# StackOverflow 问答 15071000-15071999

# mysql - mySQL 将同一列中的两个值相除

> ID：15071002
> 
> 赞同：1
> 
> 时间：2013-02-25T15:57:58.670
> 
> 标签：mysql, normalization, division, self-join

我希望使用 mySQL 从同一列中划分值。

有没有更好的方法来做到这一点？？？我真的需要 3 个选择语句吗？

```
SELECT (SELECT FixAM From Fixes WHERE Id = 1) / (SELECT FixAM From Fixes WHERE Id = 2) 
```

我的表结构如下：

```
CREATE TABLE IF NOT EXISTS `Fixes` (
  `Id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'PK',
  `CurrencyId` int(11) NOT NULL COMMENT 'FK',
  `MetalId` int(11) NOT NULL COMMENT 'FK',
  `FixAM` decimal(10,5) NOT NULL,
  `FixPM` decimal(10,5) DEFAULT NULL,
  `TimeStamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`Id`),
  KEY `CurrencyId` (`CurrencyId`),
  KEY `MetalId` (`MetalId`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci AUTO_INCREMENT=13 ;

--
-- Dumping data for table `Fixes`
--

INSERT INTO `Fixes` (`Id`, `CurrencyId`, `MetalId`, `FixAM`, `FixPM`, `TimeStamp`) VALUES
(1, 1, 1, '1592.50000', '1586.25000', '2013-02-25 15:10:21'),
(2, 2, 1, '1051.84900', '1049.59300', '2013-02-25 15:10:21'),
(3, 3, 1, '1201.88700', '1194.10600', '2013-02-25 15:10:21'),
(4, 1, 2, '29.17000', NULL, '2013-02-25 13:54:02'),
(5, 2, 2, '19.27580', NULL, '2013-02-25 13:54:02'),
(6, 3, 2, '21.98190', NULL, '2013-02-25 13:54:02'),
(7, 1, 3, '1627.00000', '1620.00000', '2013-02-25 14:28:59'),
(8, 2, 3, '1074.65000', '1072.50000', '2013-02-25 14:28:59'),
(9, 3, 3, '1229.30000', '1218.95000', '2013-02-25 14:28:59'),
(10, 1, 4, '747.00000', '748.00000', '2013-02-25 14:28:59'),
(11, 2, 4, '493.40000', '495.20000', '2013-02-25 14:28:59'),
(12, 3, 4, '564.40000', '562.85000', '2013-02-25 14:28:59'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:03:23.453

我想这就是你要找的：

```
SELECT MetalId,
  MAX(CASE WHEN CurrencyId = 1 THEN FixAM END) / 
  MAX(CASE WHEN CurrencyId = 2 THEN FixAM ELSE 1 END) Output
FROM Fixes
GROUP BY MetalId 
```

这产生 1592.50000 / 1051.849000。如果您想要相反，请交换货币 ID。

[SQL 小提琴演示](http://sqlfiddle.com/#!2/71e87/7)

如果您没有 CurrencyId = 2，我将分割值默认为 1，这样您就不会收到错误消息。

# javascript - 自动滚动到最近的 div

> ID：15071004
> 
> 赞同：1
> 
> 时间：2013-02-25T15:58:13.267
> 
> 标签：javascript, jquery, scroll, scrollto

我正在构建一个带有 4 个 div 的单页 ScrollTo 网站。这些 div 代表我的页面。

```
Home -> My work -> About me -> Contact 
```

宽度和高度由一小段 javascript 定义，它在 bodyload 或 resize 时读取用户的屏幕分辨率。所以 div 始终是用户屏幕的内部宽度和高度。

```
function resize() {

    document.getElementById("home").style.height = viewportheight+"px";
    document.getElementById("work").style.height = viewportheight+"px";
    document.getElementById("about").style.height = viewportheight+"px";
    document.getElementById("contact").style.height = viewportheight+"px"; 
```

我想要完成的是，一旦用户滚动（比如说向下或向上 100px），窗口会自动捕捉到最近的 div 的顶部。

就像是：

```
onScroll("100px") up or down { scrollTo("closest #div") }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:04:59.013

您可以从这里开始的方法是：

```
//OnScroll:
$(window).scroll(function(){
   //Get current scoll position:
   var iSrollT = $(document).scrollTop();
   //Get the position of your element:
   var iOffT = $('#home').offset().top;
 });

//Set scroll top using an animation:
$('html, body').animate({       
   scrollTop: iOffT
}, 300); 
```

但是你将不得不实现更多......例如防止scoll位置总是捕捉到下一个div并且scolling不再可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:34:30.813

```
var STELLARJS = {
init: function() {
    var self = this;
    $(function(){
        self.$sections = $('#landing_page, #work, #about, #contact').each(function(index){
            $(this).data('sectionIndex', index);
        });

        self.handleEvents();

    });
},
handleEvents: function() {
    var self = this,
        //Debounce function from Underscore.js
        debounce = function(func, wait) {
            var timeout;
            return function() {
                var context = this, args = arguments;
                var later = function() {
                    timeout = null;
                    func.apply(context, args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            }
        },
        handleScroll = function() {
            var scrollTop = $(window).scrollTop(),
                sectionIndex = Math.round((scrollTop) / self.$sections.first().outerHeight()),
                $activeSection = self.$sections.eq(sectionIndex);

            if ($activeSection.length === 0) {
                $activeSection = self.$sections.last();
            }

            if ($activeSection.length === 0) return;

            $(window).unbind('scroll.stellarsite');

            if (scrollTop === 0) {
                $(window).unbind('scroll.stellarsite').bind('scroll.stellarsite', debounce(handleScroll, 500));
            } else {
                $('html,body').animate({
                    scrollTop: $activeSection.offset().top
                }, 600, 'easeInOutExpo', function() {
                    setTimeout(function(){
                        $(window).unbind('scroll.stellarsite').bind('scroll.stellarsite', debounce(handleScroll, 500));
                    }, 10);
                });
            }

            $(window).bind('mousewheel', function(){
                $('html,body').stop(true, true);
            });

            $(document).bind('keydown', function(e){
                var key = e.which;

                if (key === 37 || key === 39) {
                    $('html,body').stop(true, true);
                }
            });
        };

    if (window.location.href.indexOf('#show-offset-parents-default') === -1) {
        $(window).bind('scroll.stellarsite', debounce(handleScroll, 500));
    }
} }); 
```

# apache-flex - Flex 禁用复选框工具提示

> ID：15071010
> 
> 赞同：0
> 
> 时间：2013-02-25T15:58:26.330
> 
> 标签：apache-flex, checkbox, tooltip, parent-child, disabled-control

我需要能够在禁用的复选框上显示工具提示。我在 stackoverflow 和其他地方看到的一个解决方案是将复选框包装在一个组中并为组提供工具提示。这行得通，但我正在尝试一般地执行此操作。

我希望能够在自定义复选框组件上设置一个属性，然后将复选框包装在一个设置了工具提示的组中。

我的问题是，我不知道如何在运行时在 Checkbox ActionScript 代码中将 Checkbox 添加到 Group 组件。我已经尝试将 showDisabledToolTip 属性添加到 Checkbox 类，并且在设置时执行以下操作：

```
var parent = this.parent;
    var gp:Group = new Group();
    gp.toolTip = this.toolTip;
    gp.addElement(this);
    if(parent is Group) {
        parent.addElement(gp);
    } else {
        parent.addChild(gp);
    } 
```

那时我的主要问题是 this.parent 为空。除此之外，我什至不知道这是否真的有效。

帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:59:52.497

我想出了扩展 CheckBox 类并创建一个新的 CheckBoxSkin 的解决方案，其中包含 2 个新的 SkinStates（disabledWithTooltip 和 disabledWithTooltipSelected）

扩展的 Checkbox 类添加了一个新的 disabledWithTooltip 属性并覆盖了 getCurrentSkinState 方法和来自 ButtonBase 的 mouseEventHandler

自定义 CheckBox 类

```
 package components
{

    import flash.events.Event;
    import flash.events.MouseEvent;

    import mx.events.FlexEvent;

    import spark.components.CheckBox;

    [SkinState (disabledWithToolTip)]
    [SkinState (disabledWithToolTipSelected)]

    public class CustomCheckBox extends CheckBox
    {
        private var _disabledKeepToolTip:Boolean = false;

        public function CustomCheckBox()
        {
            super();
            this.addEventListener(FlexEvent.CREATION_COMPLETE, onCreationComplete, false, 0, true);
        }

        protected function onCreationComplete(ev:FlexEvent):void {
            //_storedState = this.currentState;
        }

        protected override function getCurrentSkinState():String {
            if(!_disabledKeepToolTip)
                return super.getCurrentSkinState();
            else {
                if(!selected)
                    return "disabledWithToolTip";
                else 
                    return "disabledWithToolTipSelected";
            }
        }

        protected override function mouseEventHandler(event:Event):void {
            var skinState:String = getCurrentSkinState();

            if(skinState != "disabledWithToolTip" && skinState != "disabledWithToolTipSelected") {
                super.mouseEventHandler(event);
            }
        }
        [Bindable]
        [Inspectable(category="General", enumeration="true,false", defaultValue="true")]
        public function get disabledKeepToolTip():Boolean {
            return _disabledKeepToolTip;
        }

        public function set disabledKeepToolTip(value:Boolean):void {

            _disabledKeepToolTip = value;

            this.invalidateSkinState();
        }

    }
} 
```

基于（spark）CheckBoxSkin 创建一个新的 Skin 并更改元数据中的主机组件

> [HostComponent("components.CustomCheckBox")]

并添加两个新的 skinStates

```
<s:State name="disabledWithToolTip" stateGroups="disabledStates" />
<s:State name="disabledWithToolTipSelected" stateGroups="disabledStates, selectedStates" /> 
```

用法例如

```
<s:HGroup>
    <components:CustomCheckBox id="custom_chk" label="KeepTooltipCheckbox" skinClass="skins.CustomCheckBoxSkin" toolTip="See this tooltip"/>
    <s:CheckBox id="enable_chk" label="enable/disable" change="{custom_chk.disabledKeepToolTip = enable_chk.selected}"/>
</s:HGroup> 
```

如果不同，您必须调整自己的包结构......

# django - 如何为 django-gravatar 使用本地默认图像？

> ID：15071011
> 
> 赞同：1
> 
> 时间：2013-02-25T15:58:28.650
> 
> 标签：django, gravatar

我正在使用 django-gravatar，我想知道如何显示本地图像以用作默认图像。有没有办法这样做？

我已阅读要使用的文档`GRAVATAR_DEFAULT_IMAGE`，但在目录中指定图像的路径似乎不起作用`static/`。是否仅适用于其他网站的在线图片？

谢谢！

**编辑**

我正在使用以下配置：

```
STATIC_URL = '/static/'
GRAVATAR_DEFAULT_IMAGE = STATIC_URL + 'img/StartMyProjects_100.png' 
```

哈克终于用来解决问题了：

```
<img class="media-object" src="
{% if profile.gravatar_email %}
    {% gravatar_for_email profile.gravatar_email %}
{% else %}
    /static/img/StartMyProjects_100.png
{% endif %}"
alt="{{ profile.full_name }}"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T18:44:41.377

为了解决这个问题，如已编辑问题中所述，我实际上使用了 if-else（在 Django 中）。也许有人知道这样做的更好方法，但这对我有用！

```
<img class="media-object" src="
{% if profile.gravatar_email %}
    {% gravatar_for_email profile.gravatar_email %}
{% else %}
    /static/img/StartMyProjects_100.png
{% endif %}"
alt="{{ profile.full_name }}"> 
```

# c# - “发生错误。请稍后再试”尝试连接到 Facebook（Windows Phone/C# SDK）

> ID：15071018
> 
> 赞同：0
> 
> 时间：2013-02-25T15:58:58.107
> 
> 标签：c#, facebook, windows-phone-7, facebook-c#-sdk, windows-phone

（（使用 C# Facebook SDK））

我有一个应用程序已经运行了一段时间。几个月前，当人们开始使用 Windows Phone 8 设备时，有些人在尝试将应用程序连接到 Facebook 时遇到错误。遗憾的是，我无法清楚地了解发生这种情况的设备/组合，尽管它似乎不止一个设备，而且似乎也在 7.5 设备上发生。

有些人得到的错误是“发生错误。请重试。” 在输入他们的姓名/密码后。我添加了一些调试代码，并获得了他们看到的页面内容（减去 pwd），它只是一个空白页面，顶部有错误。托管浏览器上发生的导航是这样的（替换了 client_id 以保护我的密钥，但我验证它是正确的）。

首先他们得到这个：

[https://www.facebook.com/dialog/oauth?response_type=token&display=touch&redirect_uri=http://www.facebook.com/connect/login_success.html&client_id=XXXXXXXXX&scope=friends_birthday,offline_access,publish_stream,user_photo_video_tags,friends_photo_video_tags,user_photos](https://www.facebook.com/dialog/oauth?response_type=token&display=touch&redirect_uri=http://www.facebook.com/connect/login_success.html&client_id=XXXXXXXXX&scope=friends_birthday,offline_access,publish_stream,user_photo_video_tags,friends_photo_video_tags,user_photos)

然后他们被重定向到这个，这给出了上述错误：

[https://m.facebook.com/dialog/oauth?response_type=token&display=touch&redirect_uri=http://www.facebook.com/connect/login_success.html&client_id=XXXXXXXXXX&scope=friends_birthday,offline_access,publish_stream,user_photo_video_tags,friends_photo_video_tags,user_photos](https://m.facebook.com/dialog/oauth?response_type=token&display=touch&redirect_uri=http://www.facebook.com/connect/login_success.html&client_id=XXXXXXXXXX&scope=friends_birthday,offline_access,publish_stream,user_photo_video_tags,friends_photo_video_tags,user_photos)

* * *

请注意，还有另一类用户看到了不同的行为（我认为是那些使用 7.5 设备的用户）。他们转到与前一个相同的页面，然后重定向到一个空页面（当我查看内容时，标题有“错误”，但页面为空。

我无法在我的任何一个设备或各种模拟器（8.0/7.5 等）上重现这个。

有谁知道如何调试这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:00:53.920

我有同样的问题，但设置不同

通过桌面浏览器登录我的网站正常工作，但通过移动浏览器登录失败并显示“发生错误，请重试”我在旧 (2.2) android 和旧 ipod touch 上看到了问题

如果他使用的是移动浏览器，我可以通过将用户直接发送到[https://m.facebook.com/dialog/oauth ?... 页面来解决问题。](https://m.facebook.com/dialog/oauth)

桌面浏览器上的用户仍将被发送到[https://www.facebook.com/dialog/oauth](https://www.facebook.com/dialog/oauth) ?... 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:42:24.977

我是一个白痴。不知何故，该应用程序转换为“沙盒模式”，因此只允许开发人员使用它。

# c# - NHibernate Envers - 如何审核单独数据库的修订？

> ID：15071023
> 
> 赞同：1
> 
> 时间：2013-02-25T15:59:17.607
> 
> 标签：c#, nhibernate, nhibernate-envers

我正在使用 Nhibernate Envers，我希望 Envers 将审计信息保存在单独的数据库中，以使事情更清洁/更易于维护。

我正在使用这个流畅的配置：

```
var enversCfg = new NHibernate.Envers.Configuration.Fluent.FluentConfiguration()

enversCfg.Audit(GetDomainEntities())
nhCfg.SetEnversProperty(ConfigurationKey.DefaultCatalog, "nhibernate_testAU") 
```

但是当我尝试创建架构时，我得到一个 HibernateException（指定的架构名称“nhibernate_testAU”要么不存在，要么您没有使用它的权限。）

物有所值，我的后端是 SQL Server 2005

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:25:09.873

除了实际创建数据库之外，我还将模式指定为“dbo”。

```
c.SetEnversProperty(ConfigurationKey.DefaultSchema, "dbo");  
c.SetEnversProperty(ConfigurationKey.DefaultCatalog, "MyCatalog_Audit"); 
```

此外，我有自己的 RevistionEntity 类，因此，我需要将目录和模式添加到我的 hbm。

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="MyAssembly" namespace="MyNamespace">
  <class name="MyRevisionEntity" table="REVINFO" catalog="MyCatalog_Audit" schema="dbo">
    <id name="Id" column="MyRevisionEntityId">
      <generator class="identity"/>
    </id>
    <property name="AuditDate"></property>
    <property name="UserName"></property>
    <!--modifiedEntityNames-->
    <set name="ModifiedEntityNames" table="REVCHANGES"  catalog="MyCatalog_Audit" schema="dbo">
      <key column="REV"/>
      <element column="ENTITYNAME" type="string"/>
    </set>
  </class>
</hibernate-mapping> 
```

高温高压

查克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:06:25.117

您需要手动创建目录/数据库。AFAIK - NH 的 SchemaExport 不会为您创建数据库/目录（或模式）。

# css - 如何确定上传的 TrueType 字体的确切 'font-family' CSS 值？

> ID：15071027
> 
> 赞同：0
> 
> 时间：2013-02-25T15:59:40.850
> 
> 标签：css, fonts

我刚刚从互联网上下载了 KlavikaBold 字体，我希望在我的网站上使用它，但将它上传到我的主机上。我已经在网页上包含了字体，但我如何确定它的字体系列和类型以便我可以使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:02:19.827

你可以使用 FontSquirrel 的惊人的[webfont 生成器](http://www.fontsquirrel.com/tools/webfont-generator)来构建一个合适的 web 字体包，其中包含所有需要的格式和样式表。（只是在网络上的某个地方上传 TTF 是不行的，它比这要复杂得多。）

请注意，并非每种字体的许可协议都允许嵌入为 Web 字体。

# drag-and-drop - 在 grid.removeAll() 之后 Extjs4 拖放网格

> ID：15071037
> 
> 赞同：2
> 
> 时间：2013-02-25T16:00:08.323
> 
> 标签：drag-and-drop, grid, extjs4, removeall

我有两个网格面板可以拖放`grid1`，`grid2`还有一个带有这个处理函数的重置按钮：

```
handler: function(){
                //refresh source grid
                Ext.getCmp('grid1').getStore().load();
                //purge destination grid
                Ext.getCmp('grid2').removeAll();
            } 
```

一切正常，但是当我单击重置按钮时，我无法`grid2`再次放下！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T21:55:58.393

您在`removeAll()`这里调用网格组件的方法，而不是商店......这可能会破坏网格。

你应该尝试：

```
Ext.getCmp('grid2').getStore().removeAll(); 
```

# coldfusion - SpreadsheetFormatColumn() 右边框

> ID：15071042
> 
> 赞同：2
> 
> 时间：2013-02-25T16:00:22.397
> 
> 标签：coldfusion, coldfusion-9, cfspreadsheet

当我运行此代码时：

```
<cfscript>
flinstones = "fred,wilma,pebbles";
Workbook = Spreadsheetnew("Workbook");
for (i = 1; i lte listlen(flinstones); i ++) {
ThisFlinstone = ListGetAt(Flinstones, i);
if (ThisFlinstone == "wilma")
SpreadSheetAddRow(Workbook, "#ThisFlinstone#,barney");
else
SpreadSheetAddRow(Workbook, ThisFlinstone);
}

Format = {};
format.rightborder = "thin";
SpreadsheetFormatColumn(WorkBook, Format, 2);
MYfile = "d:\dw\dwtest\dan\abc.xls";
writedump(format);

</cfscript>

<cfspreadsheet action="write" filename="#MYFile#" name="Workbook"  
    sheet=1 sheetname="flinstones" overwrite=true> 
```

我希望看到一个包含三行的工作表。第二行将有两列，单元格中有 wilma 和 barney。到目前为止，我看到了我的期望。我还希望看到带有右侧边框的 B 列。我实际上看到带有右侧边框的单元格 B2。

如果我改变这个：

```
SpreadSheetAddRow(Workbook, ThisFlinstone); 
```

对此

```
SpreadSheetAddRow(Workbook, "#ThisFlinstone#, "); 
```

我看到 B 列前三行的右侧边框。

有没有办法让右侧边框适用于所有 B 列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:24:06.657

**更新：**

正如丹在评论中提到的，我误读了这个问题。澄清一下，我上次检查的 POI 不支持为*整个列添加边框。*使边框出现在*整个*列上的唯一方法是首先填充该列中的每个单元格。通过显式设置值或使用`SpreadsheetFormatCellRange(sheet, format, 1, 2, maxRow, 2)`最大[行数](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx)。虽然这确实有效，但我不推荐它，因为它有一些[不良副作用](https://stackoverflow.com/a/12699425/104223)。

* * *

> 有没有办法让右侧边框适用于所有 B 列？

**简短的回答：**

是的，通过做你已经发现的事情：首先给出所有单元格 ie和`B1`一个值。即使它只是一个空白或空字符串。这将在所有三个单元格上创建一个边框。`B2``B3`

*更新 1：*如果您使用的是 CF 9.0.1，另一个选项是[`SpreadsheetFormatCellRange`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSd160b5fdf5100e8f-42c73281129d9f55115-8000.html). 与大多数电子表格函数不同，它首先会自动创建不存在的单元格：

```
 <cfset SpreadsheetFormatCellRange(Workbook, Format, 1, 2, 3, 2)> 
```

**更长的答案：**

要应用格式，您需要 POI 所称的[`Cell`](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Cell.html)对象。当您创建一个新工作表时，它完全是空白的，没有任何“单元格”。在*大多数*情况下，CF 仅`Cell`在您使用各种函数之一设置值时创建一个对象，例如`SpreadSheetSetCellValue`, `SpreadSheetAddRow`, 等等。（见下面的例子）。您的原始代码仅在 B 列中设置一个值。因此它仅创建一个`Cell`，即`B2`。`SpreadsheetFormatColumn`仅格式化现有单元格，这就是为什么边框仅在`B2`.

```
<!--- blank sheet with no CELLS --->
<cfset Workbook = Spreadsheetnew() />
<cfset SpreadSheetWrite(Workbook, "c:/test.xls", true) />
<cfspreadsheet action="read" src="c:/test.xls" query="qValues" />
<cfdump var="#qValues#" label="No cells exist yet" />

<!--- setting one value, creates one CELL --->
<cfset Workbook = Spreadsheetnew() />
<cfset SpreadSheetAddRow(Workbook, "Fred") />
<cfset SpreadSheetWrite(Workbook, "c:/test.xls", true) />
<cfspreadsheet action="read" src="c:/test.xls" query="qValues" />
<cfdump var="#qValues#" label="Creates a single cell" />

<!--- setting two values, creates two CELL's --->
<cfset Workbook = Spreadsheetnew() />
<cfset SpreadSheetAddRow(Workbook, "Fred, ") />
<cfset SpreadSheetWrite(Workbook, "c:/test.xls", true) />
<cfspreadsheet action="read" src="c:/test.xls" query="qValues" />
<cfdump var="#qValues#" label="Creates two cells" /> 
```

# windows-phone-7 - 通过 VS2010 WP 模拟器访问 MVVMCross vNext - Portable 中的匿名对象

> ID：15071045
> 
> 赞同：2
> 
> 时间：2013-02-25T16:00:25.197
> 
> 标签：windows-phone-7, mvvmcross, portable-class-library, methodaccessexception

我安装了 VS2012 和 VS2010。我正在使用第一个在 MVVMCross vNext 中创建我的移动应用程序的 PCL 核心，并使用 VS2010 在 WP7 模拟器上打开 UI.WP7（由于 VS2012 WP 模拟器连接到 WCF 的问题 - 它无法连接到我的网络桥）。在我使用这段代码之前，一切都很好：

> protected void NavigateToClient(ClientDataRepository client) { RequestNavigate(new { key = client.IDKlient + "clients"}); }

在 VS2012 上运行良好，但在 VS2010 中我有异常（我通过 .dll 引用 core 和 mvvmcross pcl）

> “访问对象的问题 - 很可能是由作为内部生成的匿名对象引起的 - 请参阅[WP7.1 上的匿名类型和获取访问器？](https://stackoverflow.com/questions/8273399/anonymous-types-and-get-accessors-on-wp7-1) ”）；

我在我的核心甚至 Cirrious.MvvmCross 解决方案中使用 PublicKey 组装 InternalToVisible，但它没有帮助。有没有希望让它发挥作用？顺便说一句 - 每个解决方案都有相同的 PublicTokenKey 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:06:53.077

不涉及任何签名 - 因此您不需要使用公钥令牌。

一行就足够了：

```
 [assembly: InternalsVisibleTo("Cirrious.MvvmCross")] 
```

这需要在创建匿名对象的程序集中 - 因为编译器将在其中生成`internal`匿名类。

就像在[https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement/Properties/AssemblyInfo.cs#L30](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement/Properties/AssemblyInfo.cs#L30)

这在 VS2010 和 VS2012（使用 WP7.1 和 WP8 SDK）中都适用于我

* * *

如果这对您不起作用，那么您始终可以使用 a`Dictionary<string,string>`来代替导航 - 或者您可以使用非匿名类。

* * *

为了解决“它无法连接到我的网桥”的问题，请尝试使用以太网——这对我的笔记本电脑有用（有一天我希望 WiFi 也能与 Win8 模拟器一起工作）

# php - 如何在 RedBean 的更新挂钩中中止

> ID：15071046
> 
> 赞同：1
> 
> 时间：2013-02-25T16:00:29.113
> 
> 标签：php, redbean

我必须在我的模型中进行一些验证，然后在出现问题时中止。在简化版本中，它看起来像这样：

```
class Model extends RedBean_SimpleModel
{
    public function update()
    {
        if(method_exists($this, 'validate') and ! $this->validate())
            $this->abort(); // made-up method
    }
} 
```

问题是这种`abort`方法（或类似方法）似乎不存在。文档建议用例外来做，但我希望这个过程更加透明。我无法在模型代码中捕获异常（为了避免重复，因为我已经知道如何处理错误）。

我在[这里](https://stackoverflow.com/questions/10325720/validation-in-redbean-php)找到的一个解决方案是打开一个事务，然后回滚错误。但我真的不想要这种开销。有什么想法吗？

# php - 当我使用 $.Ajax-Post 加载更多数据时，缓存无法处理 JS 文件

> ID：15071051
> 
> 赞同：1
> 
> 时间：2013-02-25T16:00:42.287
> 
> 标签：php, javascript, ajax, caching, post

我已经准备好将缓存与 JS 文件一起使用，它确实有效，但事情就是这样......

我在 div 标签上有一个 .click() 事件，它触发了一个 $.AJAX 方法，让我从数据库中获取更多信息/数据。

当信息被检索时，我在控制台（网络活动）中看到我的所有 JS 文件都被再次请求并且缓存没有被使用......

脚步：

1）我进入主页（main.php）和JQUERY.MIN.JS（来自api.google ....）从缓存中检索...

2）我点击div，从moreinformation.php获取更多信息

3）moreinformation.php返回带有dataTable插件的html代码（[http://www.datatables.net/](http://www.datatables.net/)）

4) 表格显示在主页...

在控制台中，我可以完美地看到 JQUERY.MIN.JS 文件正在使用 ?_=TIMESTAMP 再次加载

```
Ex: http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js?_=1361806746980 
```

morinformation.php 有 <scripts> 到 jquery.min.js 和 dataTables.js...

我希望你能帮帮我！

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:04:29.760

基于上述（尚不完全清楚您在哪里缓存），但看起来下面可能是您的问题的原因。

Jquery Ajax 方法有一个缓存参数。

> 缓存（默认值：true，对于 dataType 'script' 和 'jsonp' 为 false） 类型：Boolean 如果设置为 false，它将强制浏览器不缓存请求的页面。注意：将缓存设置为 false 仅适用于 HEAD 和 GET 请求。它通过将“_={timestamp}”附加到 GET 参数来工作。其他类型的请求不需要该参数，除非在 IE8 中对已由 GET 请求的 URL 进行 POST。

发送请求时，尝试将此设置为 false。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

它这样做是为了覆盖内置缓存中的浏览器，以阻止 AJAX 结果返回旧的缓存值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:37:02.267

将我的评论变成答案，因为这似乎是您想要的解决方案。

最好的解决方案是更改服务器以仅返回您实际需要的数据，而不是其中包含 jQuery 的整个 HTML 页面。也可以更快地检索。

# sql-server-2008 - 数据类型 nvarchar(max) 和 ntext 在等于运算符中不兼容。

> ID：15071052
> 
> 赞同：1
> 
> 时间：2013-02-25T16:00:43.677
> 
> 标签：sql-server-2008, types

我是新来的冬眠。我有一个场景，我使用 Xstream 框架将表导出为 XML 格式并导入数据库表的另一个实例，其中我的应用程序带有 Hibernate 和 spring。

一个实例，其中表的一列是数据库中的 nvarchar(max)。当我从 xml 插入表时，它没有给出以下错误。

造成的：

```
java.sql.SQLException: The data types nvarchar(max) and ntext are incompatible in the equal to operator.  
at net.sourceforge.jtds.jdbc.SQLDiagnostic.addDiagnostic(SQLDiagnostic.java:368)  
at net.sourceforge.jtds.jdbc.TdsCore.tdsErrorToken(TdsCore.java:2820)  
at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2258)  
at net.sourceforge.jtds.jdbc.TdsCore.getMoreResults(TdsCore.java:632)  
at net.sourceforge.jtds.jdbc.JtdsStatement.executeSQLQuery(JtdsStatement.java:477)  
at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.executeQuery  (JtdsPreparedStatement.java:778)  
at org.jboss.resource.adapter.jdbc.WrappedPreparedStatement.executeQuery  (WrappedPreparedStatement.java:342)  
at org.hibernate.persister.entity.AbstractEntityPersister.getDatabaseSnapshot(AbstractEntityPersister.java:1021)  
at org.hibernate.engine.StatefulPersistenceContext.getDatabaseSnapshot(StatefulPersistenceContext.java:246)  
at org.hibernate.engine.ForeignKeys.isTransient(ForeignKeys.java:189)  
at org.hibernate.event.def.AbstractSaveEventListener.getEntityState(AbstractSaveEventListener.java:512)  
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:80)  
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:70)  
at org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:507)  
at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:499)  
at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:495)  
at org.springframework.orm.hibernate3.HibernateTemplate$18.doInHibernate(HibernateTemplate.java:772)  
at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:419) 
```

我使用了上述提供的解决方案......但对我没有任何帮助。

我使用 SQL 2008 服务器作为数据库和休眠 3 罐。它工作正常，最多 4000 个字符，但列超过它不起作用。并给出上述例外

请建议如何解决这个问题。

# macos - 使用 mamp 重新索引 magento 索引器

> ID：15071059
> 
> 赞同：0
> 
> 时间：2013-02-25T16:01:13.957
> 
> 标签：macos, magento, terminal

我正在尝试为本地机器上的 magento 重新索引我的 url 重写。我使用 Mac，所以我有终端。当我运行 /Applications/MAMP/htdocs/..../shell/indexer.php: Permission denied 它说权限被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T01:58:29.243

indexer.php 不是 shell 脚本（或有 shebang 行）。您必须使用 PHP 运行它：

```
<path to php>/php <magento root>/shell/indexer.php 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-25T16:17:24.220

做一个

```
sudo chmod -R 777 /path/to/magento 
```

在您的终端中仅用于在您的本地主机上进行测试！！！

在您的生活环境中执行此操作

```
find top/directory -type f -exec chmod 0644 '{}' \;
find top/directory -type d -exec chmod 0755 '{}' \; 
```

# sql - SqlCommand.ExecuteNonQuery 方法与回滚事务

> ID：15071061
> 
> 赞同：0
> 
> 时间：2013-02-25T16:01:30.820
> 
> 标签：sql, stored-procedures, executenonquery

在下面的代码中，回滚肯定会发生，但是 ExecuteNonQuery 方法不会返回 -1 是预期的。任何想法为什么？

```
using (var connection = new SqlConnection("")) 
{
    connection.Open();
    var cmd = connection.CreateCommand();
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = "SPXpto";
    var res = cmd.ExecuteNonQuery();                         
    System.Console.WriteLine(res);// prints 2: number of rows affected in the SP
} 
```

* * *

```
BEGIN TRANSACTION
        BEGIN TRY   
              UPDATE table_xpto SET xpto = 1 WHERE xpto2= 1; -- OK
              UPDATE table_xpto SET xpto = 1 WHERE xpto2= 1; -- OK
              UPDATE table_xpto SET xpto = 1 WHERE xpto2 = 'x'; -- ERROR ON PURPOSE: "Conversion failed when converting the varchar value 'x' to data type int."
        END TRY
        BEGIN CATCH
              IF @@TRANCOUNT > 0
                    ROLLBACK TRANSACTION;
              PRINT ERROR_STATE();
        END CATCH;

        IF @@TRANCOUNT > 0
              COMMIT TRANSACTION; 
```

执行 SPXpto；

结果：
（1 行受影响）
（1 行受影响）
（0 行受影响）
1

# javascript - 使用 JavaScript 编辑 CSS 渐变

> ID：15071062
> 
> 赞同：22
> 
> 时间：2013-02-25T16:01:33.097
> 
> 标签：javascript, css, firefox, browser, linear-gradients

我正在通过 Firefox 中的 JavaScript 编辑 CSS 渐变。我有输入框，用户可以在其中放置 1\. 方向 2\. 第一种颜色 3\. 第 2 种颜色

这是html

```
<html>
    <head>
        <title>Linear Gradient Control</title>
        <script>
            function renderButton(){ 
            var orientation = document.getElementById("firstValue").value;
            var colorOne = document.getElementById("firstColor").value;
            var colorTwo = document.getElementById("secondColor").value;
            //alert(orientation);
            //alert(colorOne);
            //alert(colorTwo);

            };
        </script>
        <style>
            #mainHolder
            {
            width:500px;
            background: -moz-linear-gradient(left,  green,  red);

            }
        </style>
    </head>
    <body>
        <h1>Gradient Editor</h1>
        <form>
            <input type="text" id="firstValue">orientation</input><br />
            <input type="text" id="firstColor">first color</input><br />
            <input type="text" id="secondColor">second color</input><br />
        </form>
        <button type="button" onclick="renderButton()">Render</button>
        <div id="mainHolder">Content</div>
    </body>
</html> 
```

回顾一下，用户将指定他们的 3 个值，这些值将传递给函数“renderButton();”。我可以使用哪一行来更改 CSS3 渐变的 3 个值，以便用户可以制作自己的自定义渐变框？我假设它只需要一两行。

PS 我意识到这个例子只适用于 Firefox。我只是想在使用不同的浏览器之前先了解一下这个概念。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-25T16:16:01.087

从以下内容开始：

```
var dom = document.getElementById('mainHolder');
dom.style.backgroundImage = '-moz-linear-gradient('
        + orientation + ', ' + colorOne + ', ' + colorTwo + ')'; 
```

如果您需要支持比 Firefox 更多的浏览器，则需要结合浏览器嗅探或一些类似 Modernizr 的功能检测来完成。

下面是一个如何做到这一点的示例，使用类似于 Modernizr 的功能检测（在 Firefox、Chrome、Safari、Opera 中测试）。

```
// Detect which browser prefix to use for the specified CSS value
// (e.g., background-image: -moz-linear-gradient(...);
//        background-image:   -o-linear-gradient(...); etc).
//

function getCssValuePrefix()
{
    var rtrnVal = '';//default to standard syntax
    var prefixes = ['-o-', '-ms-', '-moz-', '-webkit-'];

    // Create a temporary DOM object for testing
    var dom = document.createElement('div');

    for (var i = 0; i < prefixes.length; i++)
    {
        // Attempt to set the style
        dom.style.background = prefixes[i] + 'linear-gradient(#000000, #ffffff)';

        // Detect if the style was successfully set
        if (dom.style.background)
        {
            rtrnVal = prefixes[i];
        }
    }

    dom = null;
    delete dom;

    return rtrnVal;
}

// Setting the gradient with the proper prefix
dom.style.backgroundImage = getCssValuePrefix() + 'linear-gradient('
        + orientation + ', ' + colorOne + ', ' + colorTwo + ')'; 
```

# android - navision web服务的android消费

> ID：15071066
> 
> 赞同：3
> 
> 时间：2013-02-25T16:01:39.377
> 
> 标签：android, service, web, navision, dynamics-nav

我需要使用来自 android 的 NAV Web 服务。我得到了带有“上”功能的“字母”代码单元。

我已经在我的 PC 上设置了 NAV Web 服务（NTLM 身份验证）并关闭了防火墙（以便该服务在我的网络中的其他设备上可见）。输入登录名/密码（我的 PC 帐户）后，可以在浏览器（也可以在 Android 设备上）访问该服务。如果我使用[此代码](https://stackoverflow.com/questions/12685255/how-to-call-a-nav-webservice-from-android)，它会在“调用”时崩溃，并带有 END_DOCUMENT 空异常……是因为身份验证吗？

如果我使用此代码连接

> ```
> HttpGet request = new
> HttpGet("http://[myPC'sIP]:7047/DynamicsNAV/WS/SystemService");
> HttpResponse response = client.execute(request); 
> ```

我收到 401 错误，但只是指定 IP

> ```
> HttpGet request = new HttpGet("http://[myPC'sIP]");
> HttpResponse response = client.execute(request); 
> ```

返回代码 200 (ok) 如何发送凭据？我尝试了几种方法，但结果总是一样的......你有这个问题的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T07:52:50.003

1）在罐子下面添加 **jcifs-1.3.17.jar** **ksoap2-android-assembly-3.0.0-jar-with-dependencies.jar**

2) 创建这些 java 类 **JCIFSEngine.java**

```
package com.demo.Authentication;
import jcifs.ntlmssp.NtlmFlags;
import jcifs.ntlmssp.Type1Message;
import jcifs.ntlmssp.Type2Message;
import jcifs.ntlmssp.Type3Message;
import jcifs.util.Base64;
import org.apache.http.impl.auth.NTLMEngine;
import org.apache.http.impl.auth.NTLMEngineException;

import java.io.IOException;

/**
 * Class taken from http://hc.apache.org/httpcomponents-client-ga/ntlm.html
 */
public final class JCIFSEngine implements NTLMEngine {

    private static final int TYPE_1_FLAGS =
            NtlmFlags.NTLMSSP_NEGOTIATE_56 |
            NtlmFlags.NTLMSSP_NEGOTIATE_128 |
            NtlmFlags.NTLMSSP_NEGOTIATE_NTLM2 |
            NtlmFlags.NTLMSSP_NEGOTIATE_ALWAYS_SIGN |
            NtlmFlags.NTLMSSP_REQUEST_TARGET;

    public String generateType1Msg(final String domain, final String workstation)
            throws NTLMEngineException {
        final Type1Message type1Message = new Type1Message(TYPE_1_FLAGS, domain, workstation);
        return Base64.encode(type1Message.toByteArray());
    }

    public String generateType3Msg(final String username, final String password,
            final String domain, final String workstation, final String challenge)
            throws NTLMEngineException {
        Type2Message type2Message;
        try {
            type2Message = new Type2Message(Base64.decode(challenge));
        } catch (final IOException exception) {
            throw new NTLMEngineException("Invalid NTLM type 2 message", exception);
        }
        final int type2Flags = type2Message.getFlags();
        final int type3Flags = type2Flags
                & (0xffffffff ^ (NtlmFlags.NTLMSSP_TARGET_TYPE_DOMAIN | NtlmFlags.NTLMSSP_TARGET_TYPE_SERVER));
        final Type3Message type3Message = new Type3Message(type2Message, password, domain,
                username, workstation, type3Flags);
        return Base64.encode(type3Message.toByteArray());
    }
} 
```

**NtlmTransport.java**

```
package com.demo.Authentication;

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Arrays;
import java.util.List;
import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.auth.AuthScheme;
import org.apache.http.auth.AuthSchemeFactory;
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.NTCredentials;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.ByteArrayEntity;
import org.apache.http.impl.auth.NTLMScheme;
import org.apache.http.impl.client.AbstractHttpClient;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpParams;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.ksoap2.HeaderProperty;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.ServiceConnection;
import org.ksoap2.transport.Transport;
import org.xmlpull.v1.XmlPullParserException;

public class NtlmTransport extends Transport {

    static final String ENCODING = "utf-8";

    private final DefaultHttpClient client = new DefaultHttpClient();
    private final HttpContext localContext = new BasicHttpContext();
    private String urlString;
    private String user;
    private String password;
    private String ntDomain;
    private String ntWorkstation;
    public static String AuthenticationCode;

    public NtlmTransport(String url, String user, String password,
            String domain, String workStation) {
this.urlString = url;
this.user = user;
this.password = password;
this.ntDomain = domain;
this.ntWorkstation = workStation;

}

    public void setCredentials(String url, String user, String password,
                               String domain, String workStation) {
        this.urlString = url;
        this.user = user;
        this.password = password;
        this.ntDomain = domain;
        this.ntWorkstation = workStation;

    }

    public List call(String targetNamespace, SoapEnvelope envelope, List headers)
            throws IOException, XmlPullParserException {
        return call(targetNamespace, envelope, headers, null);
    }

    public List call(String soapAction, SoapEnvelope envelope, List headers, File outputFile)
            throws IOException, XmlPullParserException {
        if (outputFile != null) {
            // implemented in HttpTransportSE if you are willing to port..
            throw new RuntimeException("Writing to file not supported");
        }
        HttpResponse resp = null;

        setupNtlm(urlString, user, password);

        try {
            // URL url = new URL(urlString);
            HttpPost httppost = new HttpPost(urlString);

            setHeaders(soapAction, envelope, httppost, headers);

            resp = client.execute(httppost, localContext);
            HttpEntity respEntity = resp.getEntity();

            InputStream is = respEntity.getContent();
            parseResponse(envelope, is);

        } catch (Exception ex) {
             ex.printStackTrace();
        }

        System.out.println("RESPONSE STATUS CODE :"+resp.getStatusLine().getStatusCode());
        if (resp != null) {
            return Arrays.asList(resp.getAllHeaders());
        } else {
            return null;
        }
    }

    private void setHeaders(String soapAction, SoapEnvelope envelope, HttpPost httppost, List headers) {
        byte[] requestData = null;
        try {
            requestData = createRequestData(envelope);
        } catch (IOException iOException) {
        }
        ByteArrayEntity byteArrayEntity = new ByteArrayEntity(requestData);
        httppost.setEntity(byteArrayEntity);
        httppost.addHeader("User-Agent", org.ksoap2.transport.Transport.USER_AGENT);
        // SOAPAction is not a valid header for VER12 so do not add
        // it
        // @see "http://code.google.com/p/ksoap2-android/issues/detail?id=67
        if (envelope.version != SoapSerializationEnvelope.VER12) {
            httppost.addHeader("SOAPAction", soapAction);
        }

        if (envelope.version == SoapSerializationEnvelope.VER12) {
            httppost.addHeader("Content-Type", Transport.CONTENT_TYPE_SOAP_XML_CHARSET_UTF_8);
        } else {
            httppost.addHeader("Content-Type", Transport.CONTENT_TYPE_XML_CHARSET_UTF_8);
        }

        // Pass the headers provided by the user along with the call
        if (headers != null) {
            for (int i = 0; i < headers.size(); i++) {
                HeaderProperty hp = (HeaderProperty) headers.get(i);
                httppost.addHeader(hp.getKey(), hp.getValue());
            }
        }
    }

    // Try to execute a cheap method first. This will trigger NTLM authentication
    public void setupNtlm(String dummyUrl, String userId, String password) {
        try {

            ((AbstractHttpClient) client).getAuthSchemes().register("ntlm", new NTLMSchemeFactory());

            NTCredentials creds = new NTCredentials(userId, password, ntWorkstation, ntDomain);
            client.getCredentialsProvider().setCredentials(AuthScope.ANY, creds);

            HttpGet httpget = new HttpGet(dummyUrl);

            HttpResponse response1 = client.execute(httpget, localContext);
            HttpEntity entity1 = response1.getEntity();
            Header[] hArray = response1.getAllHeaders();
            int size = hArray.length;
            AuthenticationCode = String.valueOf(response1.getStatusLine().getStatusCode());
            System.out.println("AUTHENTICATION STATUS CODE :"+response1.getStatusLine().getStatusCode());
           /* for (int i = 0; i < size; i ++) {
                Header h = hArray[i];
                if (h.getName().equals("WWW-Authenticate")) {
                    entity1.consumeContent();
                    throw new Exception("Failed Authentication");
                }
            }*/

            entity1.consumeContent();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

        //NTLM Scheme factory
    private class NTLMSchemeFactory implements AuthSchemeFactory {
        public AuthScheme newInstance(final HttpParams params) {
        // see http://www.robertkuzma.com/2011/07/
        // manipulating-sharepoint-list-items-with-android-java-and-ntlm-authentication/
            return new NTLMScheme(new JCIFSEngine());
        }
    }

    public ServiceConnection getServiceConnection() throws IOException
    {
        throw new IOException("Not using ServiceConnection in transport");
    }

    public String getHost() {
        String retVal = null;
        try {
            retVal = new URL(url).getHost();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        return retVal;
    }

    public int getPort() {
        int retVal = -1;
        try {
            retVal = new URL(url).getPort();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        return retVal;
    }

    public String getPath() {
        String retVal = null;
        try {
            retVal = new URL(url).getPath();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        return retVal;
    }
} 
```

3) 使用参数 url,"username","password","domainName","SystemName" 调用此方法

```
 NtlmTransport ntlm = new NtlmTransport(url, "username", "password", "domainName","SystemName"); 
```

4) 发送包含肥皂信封的肥皂请求。

```
 ntlm.call("namespace/methodname", soapEnvelope); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T12:22:11.447

我使用soap_action 来做同样的事情，它的工作就像魅力一样，看看下面的代码是否对你有帮助：

```
String namespace = "urn:microsoft-dynamics-schemas/codeunit/NavisionWS";
String url = "http://IP:7047/DynamicsNAV/WS/Codeunit/NavisionWS";   
String soap_action = "urn:microsoft-dynamics-schemas/codeunit/NavisionWS:GetLoginInfo";
String method_name = "GetLoginInfo";
try
        {
              SoapObject request = new SoapObject(namespace, method_name);    
              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

               envelope.dotNet = true;   
               envelope.setOutputSoapObject(request);   
               HttpTransportSE transport = new HttpTransportSE(url);    
               transport.call(soap_action, envelope); // Receive Error here!
                    SoapObject result = (SoapObject) envelope.getResponse();
                    great = result.toString();
        }
        catch (Exception e)
        {
            e.printStackTrace();
                 great = e.toString();
                 Toast.makeText(this, great, Toast.LENGTH_LONG).show();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T20:42:28.897

嗨，你试过用吗

```
var httpClient = new DefaultHttpClient();
NTCredentials nt = new NTCredentials("user", "pass", "", "domain");
httpClient.GetCredentialsProvider().SetCredentials(AuthScope.ANY, nt); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T07:25:45.470

这就是 http 身份验证的[工作方式](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2)。您可以使用 fiddler 来查看您的中介在做什么。如果你想摆脱它，你将不得不做同样的事情:)

话虽如此，使用 Navision 进行身份验证并不是一件容易的事，因为它使用的是 SPNEGO 或 NTLM。如果您可以配置 NTLM，您也许可以使用[android-ntlm](https://github.com/masconsult/android-ntlm)来完成工作。看起来类似于 pungggi 的答案，除了`httpclient.getAuthSchemes().register("ntlm", new NTLMSchemeFactory());`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T11:48:16.827

通过创建另一个 Web 服务（用 C# 编写，在运行 NAV 服务器的同一台 PC 上运行）来解决，该服务读取 NAV 服务并且 android 通过此 C# WS 与 NAV WS 通信

# android - MapView ClassCastException

> ID：15071067
> 
> 赞同：0
> 
> 时间：2013-02-25T16:01:40.923
> 
> 标签：android, classcastexception, runtimeexception

这是 LogCat 内容：

```
02-25 15:57:42.481: E/AndroidRuntime(1327): FATAL EXCEPTION: main
02-25 15:57:42.481: E/AndroidRuntime(1327): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.hs.hospitalfinder/com.hs.hospitalfinder.MainActivity}: android.view.InflateException: Binary XML file line #11: Error inflating class MapView
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.os.Looper.loop(Looper.java:137)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at java.lang.reflect.Method.invokeNative(Native Method)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at java.lang.reflect.Method.invoke(Method.java:511)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at dalvik.system.NativeStart.main(Native Method)
02-25 15:57:42.481: E/AndroidRuntime(1327): Caused by: android.view.InflateException: Binary XML file line #11: Error inflating class MapView
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.app.Activity.setContentView(Activity.java:1881)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at com.hs.hospitalfinder.MainActivity.onCreate(MainActivity.java:18)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.app.Activity.performCreate(Activity.java:5104)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-25 15:57:42.481: E/AndroidRuntime(1327):     ... 11 more
02-25 15:57:42.481: E/AndroidRuntime(1327): Caused by: java.lang.ClassNotFoundException: Didn't find class "android.view.MapView" on path: /system/framework/com.google.android.maps.jar:/data/app/com.hs.hospitalfinder-1.apk
02-25 15:57:42.481: E/AndroidRuntime(1327):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.view.LayoutInflater.createView(LayoutInflater.java:552)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:643)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
02-25 15:57:42.481: E/AndroidRuntime(1327):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
02-25 15:57:42.481: E/AndroidRuntime(1327):     ... 22 more 
```

嫌疑犯是：

`m = (MapView)findViewById(R.id.mapView);`

哪里`m`是：

`private MapView m;`

我不明白我哪里错了。请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:10:22.700

在您的布局中，MapView 是否设置为`com.google.android.maps.MapView`？

（另外，如果您还没有，请在[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)上查看新的 Google Maps API，而不是您正在使用的 API V1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:42:49.163

检查您是否在应用程序清单中为地图声明了 uses-library 标记。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <uses-library android:name="com.google.android.maps" />
</application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:13:22.783

我认为您没有从**MapActivity**扩展。您应该从 MapActivity 而不是 Activity 扩展您的类。您可以从本教程中获得更多帮助：

> [http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

# html - 根据内容（而不是 100%）固定宽度和高度的位置

> ID：15071069
> 
> 赞同：7
> 
> 时间：2013-02-25T16:01:46.980
> 
> 标签：html, css, position, height, width

我有一个容器 DIV 设置为“位置：固定”，其中包括另一个设置为绝对位置的 div。

有什么办法可以使这个包含的 div 的宽度和高度适合内容，而不总是 100%？

这就是我所拥有的：http: [//jsfiddle.net/ydSqU/](http://jsfiddle.net/ydSqU/)

```
<div class="transparent_background">
    <div id="window">hello.</div>
</div> 
```

这就是我想要的：http: [//jsfiddle.net/3BYPu/](http://jsfiddle.net/3BYPu/)（无需手动设置宽度/高度）。

```
<div class="transparent_background">
    <div id="window" style="width:30px; height:30px">hello.</div>    
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:57:29.893

aur0n,

如果可能，最好和最简单的方法是使用 javascript 计算元素的高度和宽度，然后相应地定位内部元素。

为此，您只需将包含元素的宽度除以 2，然后将`left`内部元素的值设置为该值减去其自身宽度的一半。然后，对高度执行相同的操作。

此外，您可能错过的一件事是您的内部 div 应该设置为`position: relative`and `display: inline`。您的 div 拉伸以匹配包含元素的宽度的原因是因为`position: absolute`使元素脱离正常流动，而`position: relative`使其保持正常流动。

这是我使用的代码（使用 jQuery）：

```
// centering the width
$("#window").css("left", ($(".transparent_background").width()/2)-($("#window").width()/2) + "px");
// centering the height
$("#window").css("top", ($(".transparent_background").height()/2)-($("#window").height()/2) + "px"); 
```

使用此解决方案，您不必手动设置宽度和高度。此外，拥有一个包含多行文本的内部 div 也不是问题。

小提琴：http: [//jsfiddle.net/ydSqU/3/](http://jsfiddle.net/ydSqU/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:23:48.313

你可以试试下面的，

```
 #window {
  border:2px dotted red;
  background:white;
  width:50%;
  height:auto;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-left: -25%;
  vertical-align:center;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:19:29.847

@aur0n 像这样更改 css

```
#window {
        border:2px dotted red;
        background:white;
        position: absolute;
        clear:both;
    } 
```

# perl - Perl 等效于 java 迭代器

> ID：15071070
> 
> 赞同：1
> 
> 时间：2013-02-25T16:01:51.390
> 
> 标签：perl, perl-module

在 java 中，对于表示集合的类，如果它实现了可迭代接口，则可以在不了解集合的情况下使用 foreach 循环对集合进行迭代。

我们可以在 perl 中做类似的事情吗？假设我的 perl 类是一个集合。迭代集合的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:26:58.243

如果您使用 Perl 哈希代替 Collection，那么您可以使用[`each`](http://perldoc.perl.org/functions/each.html)它来迭代它。

每次调用都`each %hash`将返回下一个键/值对，或者最后返回一个空列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:10:15.523

Perl 没有 Java 风格的迭代器，因为它不需要它们。Perl 内置了相当强大的散列和列表，它们取代了您将需要的大多数自定义集合，并且您已经可以轻松地循环它们。如果你想对每个元素做一些事情（特别是如果你想建立一个结果列表），`map`你可以将代码引用传递给类似的函数。

但是，如果您真的想要这种 Java 主义，您可以构建自己的迭代器类。它不必实现或扩展任何特定的接口，因为 Perl 鸭子类型——而且普通人无论如何也不使用迭代器，所以首先没有标准接口。并且和它没有任何关系`foreach`。:P

确实，最好只使用标准集合类型。我从来没有遇到过需要自定义集合的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T18:58:05.633

您可以使用闭包和函数式编程技术在 perl 中创建任意复杂的迭代器，因为当您需要超出 perl 内置的遍历数组和散列的能力时。这是说明该技术的简单示例 - 在这种情况下，它非常无用，因为对于这种特殊情况，迭代器是不必要的。但正如我所说，这种技术可以有效地应用于其他场景。此示例将向后遍历数组，跳过我们想要排除的元素（在本例中为字母“c”）。

```
sub gen_iter {
    my @collection = @_;
    return sub {
        while (my $item = pop @collection) {
            next if $item eq 'c';
            return $item;
        }
    }
}

my $it = gen_iter((qw/a b c d e f g/));

# prints 'gfedba'
while (my $item = $it->()) {
    print $item;
} 
```

我建议阅读免费的电子书“High-Order Perl”并阅读有关迭代器的章节。它有一些很棒的有用的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T16:26:13.810

Perl 的两个内置集合——数组和散列——有多种迭代方式：

1.  `foreach`循环：循环（但不延迟迭代）给定列表中的每个项目。在哈希上使用 this 可能是错误的，您应该遍历`values`或`keys`：

    ```
    foreach my $key (keys %hash) {
      do something;
    } 
    ```

2.  迭代器：您可以使用该函数`each`遍历“集合” `each`。每次调用它时，它都会返回一个键/索引列表和一个值。如果没有其他项目，它将返回一个错误值：

    ```
    while (my ($key, $value) = each %hash) {
      do something;
    } 
    ```

    每个数组/哈希只能有一个这样的迭代器。on 数组的这种用法`each`是一个相当新的功能。

3.  `each`可以通过闭包来扩展该习惯用法以创建自定义迭代器：

    ```
    my %hash = ...;
    my @keys = keys %hash; # cache the current keys
    my $i = 0;
    my $iter = sub {
      return unless $i < @keys;
      my $key = $keys[$i++];
      return ($key, $hash{$key});
    };
    ...;
    while (my ($key, $value) = $iter->()) {
      do something;
    } 
    ```

# android - 安卓蓝牙发送消息

> ID：15071078
> 
> 赞同：0
> 
> 时间：2013-02-25T16:02:13.770
> 
> 标签：android, nfc

早上好。我有一个小问题。可以使用 android 应用程序向所有移动设备发送消息，几乎无需配对，也无需可见模式？这个想法是在购物时发送短信提供产品。当人们在服务器附近行走时，它会发送一条提供产品的消息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:13:28.243

> 几乎无需配对且无需可见模式即可向所有手机发送消息

不，这是不可能的。出于充分的理由，例如安全性...

我确实看到通过蓝牙广播被每个人接收的东西将是垃圾邮件发送者的梦想，但幸运的是协议不允许这样的事情。

# javascript - 使用 for 循环和 setInterval 为 Canvas 设置动画

> ID：15071086
> 
> 赞同：0
> 
> 时间：2013-02-25T16:02:28.887
> 
> 标签：javascript, html5-canvas

我正在尝试使用 for loop 和 setInterval 为画布设置动画，但到目前为止还没有运气......这是我的代码中的内容：

```
//loop function
function loop(){
    var dynamic = 0;
    var v = 10;
    var x, y;

    for (dynamic = 0; dynamic < v; dynamic++) {
        x = dynamic * 1;
        y = dynamic * 1;
        c.clearRect(0, 0, 350, 350);
        c.fillStyle = '#87CEEB';
        c.beginPath();
        c.arc(x, y, 10, 0, Math.PI*2, false);
        c.fill();
    }
}

setInterval(loop, 20); 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:09:07.520

也许你应该把`dynamic`变量移到外面？你似乎在同一点画圆`loop`。

```
var dynamic = 0;
//loop function
function loop(){
  var v = 10;
  var x, y;
  x = dynamic * 1;
  y = dynamic * 1;
  c.clearRect(0,0, 350,350);
  c.fillStyle = '#87CEEB';
  c.beginPath();
  c.arc(x,y, 10, 0, Math.PI*2, false);
  c.fill();

  ++dynamic;
}

setInterval(loop,20); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:38:35.240

如前所述：将您的动态移出动画循环并在循环内更改动态。

动画的总结是这样的：

1.  在 for 循环*之外*设置起始变量（如动态变量）

2.  在动画 loop() 中，您希望通过 1 次移动（不是多次移动）为画布设置动画，如下所示：

    ```
     + Increment your dynamic variable to induce motion.

      + Set your x & y to reflect the changes to dynamic.

      + Clear the canvas to prepare for this animation frame

      + Draw stuff! 
    ```

3.  循环结束后，使用 setInterval() 开始动画

4.  如果你的动画跑出屏幕，你还不如把它关掉！

这是一些代码和小提琴：http: [//jsfiddle.net/m1erickson/fFfRS/](http://jsfiddle.net/m1erickson/fFfRS/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var c=canvas.getContext("2d");

        // set the dynamic outside the loop
        var dynamic = 10;
        var x;
        var y;

         //loop function
        function loop(){

            // change dynamic
           dynamic=dynamic*1.1;
           x = dynamic;
           y = dynamic*1.2;

            // stop the the animation if it runs out-of-canvas
            if (x>canvas.width || y>canvas.height){
                c.clearRect(0,0,canvas.width,canvas.height);
                clearInterval(myTimer);
                alert("animation done!");
            }

           // clear the canvas for this loop's animation
           c.clearRect(0,0,canvas.width,canvas.height);
           c.fillStyle = '#87CEEB';

           // draw
           c.beginPath();
           c.arc(x,y, 10, 0, Math.PI*2, false);
           c.fill();
        }
        var myTimer=setInterval(loop,20);       

    }); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=400 height=400></canvas>
</body>
</html> 
```

# matlab - 如何更改图像轴标签

> ID：15071088
> 
> 赞同：7
> 
> 时间：2013-02-25T16:02:30.577
> 
> 标签：matlab, matlab-figure

我正在尝试使用一些纬度/经度更改图像轴标签，但我找不到如何做到这一点。我尝试了一些基本命令，例如：

```
imagesc(data)
axis(meshgrid([-180:20:180],[-90:20:90]))
colorbar 
```

但出现了这些表达：

> imagesc(data),axis(meshgrid([-180:20:180],[-90:20:90])), colorbar || 的操作数 和 && 运算符必须可转换为逻辑标量值。
> 
> ```
> Error in axis>allAxes (line 448)
> result = all(ishghandle(h)) && ...
> 
> Error in axis (line 57)
> if ~isempty(varargin) && allAxes(varargin{1}). 
> ```

有谁能够帮助我？仅供参考，我的图像轴标签是数据顺序（从 0 到 N）。

我想要的结果是图像看起来像一张世界地图，以标线/网格线为轴。它应该看起来像[这样](http://earth-info.nga.mil/GandG/wgs84/gravitymod/egm2008/egm08_gis.html)：

[![在此处输入图像描述](../Images/60186ee20d492c997b9ca72a32f38b1a.png)](https://i.stack.imgur.com/UoSkY.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T16:34:37.290

根据您的问题，我推断您希望将 x 轴标签设置为 -180 到 180，将 y 轴标签设置为 -90 到 90。为此，您应该更改轴对象的`XTickLabel`和`YTickLabel`属性（请注意您还需要通过相应地修改`XTick`和`YTick`属性来调整每个轴的刻度数）。

因此，假设您的图像存储在矩阵中`data`并使用 显示`imagesc(data)`，以下是如何将 x 轴上的刻度标签从 -180 更改为 180：

```
xticklabels = -180:20:180;
xticks = linspace(1, size(data, 2), numel(xticklabels));
set(gca, 'XTick', xticks, 'XTickLabel', xticklabels) 
```

同样，以下是如何将 y 轴上的刻度标签从 -90 更改为 90：

```
yticklabels = -90:20:90;
yticks = linspace(1, size(data, 1), numel(yticklabels));
set(gca, 'YTick', yticks, 'YTickLabel', flipud(yticklabels(:))) 
```

这应该是这样的：

![在此处输入图像描述](../Images/f1ebb7b51f8641c813ee3d67a28de5d1.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T16:15:37.550

不能说我完全理解你的意思，所以就这样吧。要将 a 添加`label`到轴上，请使用`xlabel`and `ylabel`，例如：

```
xlabel('time [sec]'); ylabel('Amplitude'); 
```

要更改轴**刻度**的标签，请使用以下内容：

```
plot(1:4)
set(gca,'Xtick',1:4,'XTickLabel',{'a', 'b', 'c', 'd'}) 
```

与`imagesc`您合作可能需要添加此行：

```
set(gca, 'YDir', 'reverse'); 
```

这将设置刻度上的数字在左下角增长......

# ios - 使用自动布局查找笔尖

> ID：15071089
> 
> 赞同：0
> 
> 时间：2013-02-25T16:02:33.270
> 
> 标签：ios, objective-c, autolayout

我知道如何从特定笔尖等中删除自动布局...

有没有办法为整个项目关闭它？

如果没有，有没有办法找到启用它的笔尖，以便我知道要关闭哪些笔尖？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:30:47.990

不，这是笔尖设置而不是项目设置。我想你可以 grep 相关标志的所有 .xib 文件，因为它们只是 XML，但我不知道那个标志是什么。

# c# - 框架和 SQL 更新后站点在测试服务器上挂起

> ID：15071090
> 
> 赞同：0
> 
> 时间：2013-02-25T16:02:42.897
> 
> 标签：c#, asp.net, entity-framework

这是一个我们无法完全弄清楚的奇怪问题。在我们的测试服务器上，我们有一个 SQL Express 实例以及运行我们的测试数据库的 SQL Server 2008 R2。我们添加了一个“游乐场”数据库，这样我们就可以开始搞乱重写了。我们同意继续使用 SQL Server 2012 开发新应用程序，该应用程序将是一个混合了 EF5 和 SPROCS（和 FileTables）的 MVC4。

我们首先将 MVC4 应用程序（此时只是 UI，其中包含一点 EF 用于我编写的错误处理程序）到测试服务器上，我们必须将服务器上的框架升级到 4.5 才能看到它。一切似乎都奏效了。所以我安装了一个新的 SQL Server 2012 实例，还安装了服务包。

奇怪的是……我们将旧应用程序（Web 表单）连接到 2008R2 实例，它只是在登录时挂起，但偶尔会通过。我们将旧应用程序绑定回 SQL Server Express 版本，但仍然挂断。好的，所以在某个地方挂断了，也许是在 SQL 上，对吧？问题是它只能挂在 Windows 系统上的 IE 和 Chrome 中。它在 windows 上的 Firefox 中运行良好。它在 Mac 上的 Chrome/Safari/Firefox 中运行良好。有时，我可以通过 Windows 登录 Chrome，但如果我再试一次，几分钟后又会重新挂起。

从那以后我们尝试过的事情：重新启动服务器，卸载 4.5 框架，检查日志（我没有看到任何问题），重新安装 4.5，使用 Fiddler，然后在 Windows 机器上使用 chrome（它直接通过），制作确保我们的旧应用程序仍然针对 IIS 中的 4.0 框架，并且在键盘上敲了敲我们的头。

如果有人能对此有所了解，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:02:42.897

在反复尝试追溯可能是什么问题后，我们卸载了 4.5 .Net Framework 更新并重新安装了 4.0，一切都恢复正常。虽然我们无法测试我们的 4.5 应用程序，但我们的印象是 4.5 更像是 4.0 的并存。我们甚至确保我们的旧应用程序面向 4.0，但这并没有什么不同。

如果有人对如何使 4.5 和 4.0 在同一台服务器上很好地协同工作有见解，请告诉我！

# r - ggplot2：用相同数据的子集覆盖散点图

> ID：15071091
> 
> 赞同：0
> 
> 时间：2013-02-25T16:02:43.940
> 
> 标签：r, ggplot2, overlay

我想为每个散点图生成一个带有 ggplot 的多面散点图，其中包含一种颜色的整个数据集，在整个散点图的顶部具有不同颜色的单个 ID（同一数据集的）。这是数据：

```
**trajectories**

X    Y    ID
2    4     1
1    6     1
2    4     1
1    8     2
3    7     2
1    5     2
1    4     3
1    6     3
7    4     3 
```

我使用以下代码为每个 ID 生成散点图：

```
ggplot(trajectories, aes(x=X, y=Y)) + 
geom_point() + 
facet_wrap( ~ ID) 
```

如何在整个数据集的散点图上打印这些散点图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:52:26.013

我能想到的唯一方法是复制数据集 3 次，并为颜色设置备用 ID，并为分面设置一个单独的组。假设你`data.frame`是`df`

```
df$ID  <- NULL
df$ID1 <- rep(1:2, c(3,6))
df$ID2 <- c(2,2,2,1,1,1,2,2,2)
df$ID3 <- rep(2:1, c(6,3))
require(reshape2)
df.m <- melt(df, id.var=c("X", "Y"))
df.m$grp <- gl(3, 9)
df.m$value <- factor(df.m$value)

ggplot(data = df.m, aes(x = X, y = Y)) + geom_point(aes(colour = value)) + 
       facet_wrap(~ grp) + scale_colour_manual(values = c("blue", "black")) 
```

![在此处输入图像描述](../Images/8ac4fd0f992e967073d5d4763568bd3d.png)

请注意，您在不同组中有相似的点，因此该组的某些颜色会被下一组的颜色覆盖。例如：(1,6) 在第一个方面应该是蓝色的，但在 ID=3 中有一个 (1,6)，因此将蓝色替换为黑色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:05:27.107

这应该有效：

```
ggplot(trajectories, aes(x=X, y=Y)) + 
  geom_point(color = ID) 
```

这将为每个 ID 创建一个带有颜色的散点图。如果您想要一个只有一种颜色的散点图，只需省略该`color = id`位即可。

要对某个 id 的区域进行着色，您可以从这里获得一些灵感：

[如何叠加两个密集散点图，以便在 R 或 Matlab 中看到每个散点图的轮廓？](https://stackoverflow.com/questions/9706825/how-can-i-overlay-two-dense-scatter-plots-so-that-i-can-see-the-outlines-of-each/9711024#9711024)

它基本上计算子组周围的凸包并在其周围绘制多边形。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:01:07.660

在基础图中，您可以执行以下操作：

```
 par(mfrow=c(length(unique(ID)),1))
    for(i in unique(ID)){ plot(X,Y,col=as.numeric(ID==i)+1)} 
```

![在此处输入图像描述](../Images/256ef8b83c05647d97abf0bded60d075.png)

如果过度绘图是一个问题，您可以添加 jitter() 或透明颜色。

# excel - 有没有办法让 Excel 知道打开 CSV 文件时，回车会在单元格内返回，而不是在行尾？

> ID：15071093
> 
> 赞同：2
> 
> 时间：2013-02-25T16:02:46.763
> 
> 标签：excel, csv, business-catalyst

**保存时 CSV 文件更改**

我搜索了论坛并联系了无法提供帮助的 Adob​​e Business Catalyst (BC)。基本上，BC 允许您将产品导出为 CSV 文件，我这样做的目的是添加并上传更改。

下载后，我打开了 CSV 文件并做了几个小时添加属性等工作（但是我没有更改任何产品的描述列）。

我保存了文件以便第二天继续。当我再次打开文件时，我注意到 CSV 文件将描述列中的回车作为新行读取，因此所有信息都不同步。

我测试了从 BC 下载 CSV 文件，并且没有对任何列进行任何更改。我只是打开文件并再次保存。当我第二次打开它时，由于描述栏中的回车，格式全部消失了。Excel在保存时必须添加一些格式吗？

为什么 CSV 文件可以区分回车符最初是在一个单元格中，但在我保存并重新打开文件后又不能区分？

有什么办法可以节省我已经完成的工作时间？即，有没有办法让excel知道回车在一个单元格内而不是一行的末尾？

BC 说，由于描述列可能包含 HTML，这可能会导致格式丢失，但这不是他们的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:03:11.510

您需要在 CSV 文件中将单元格内容用双引号引起来。

# google-maps - 谷歌地图默认tiptool倾斜箭头样式

> ID：15071100
> 
> 赞同：0
> 
> 时间：2013-02-25T16:03:07.153
> 
> 标签：google-maps, css, google-maps-api-3

我正在尝试使用倾斜箭头设置谷歌地图默认工具提示的样式。想动态随内容展开。我将如何编写倾斜箭头的样式。

像这样 [http://cdn.instantshift.com/wp-content/uploads/2012/11/free-map-navigation-psd-09.jpg](http://cdn.instantshift.com/wp-content/uploads/2012/11/free-map-navigation-psd-09.jpg)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:54:30.570

默认信息窗口不能以这种方式设置样式。您需要使用[3rd 方库](https://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries)来完成此操作（或编写您自己的库）。

# jquery - 从 jQuery 更改 CSS

> ID：15071101
> 
> 赞同：0
> 
> 时间：2013-02-25T16:03:12.520
> 
> 标签：jquery, html, css, colors, children

我正在尝试通过 jQuery 更改 div 的 CSS。下面是 jQuery 代码。

```
$(".endPollingButton").click(function () {
    var endPollingCode = $(this).attr("value");
    var correctAnswer = parseInt($(this).attr("id"));
    for(LCV=1;LCV<=5;LCV++) {
        if(LCV == correctAnswer) {
            $("#"+endPollingCode).children(".Bars_"+LCV).css("background-color","green");
            alert("check");
        } else {  
            $("#"+endPollingCode).children(".Bars_"+LCV).css("background-color","red");
            alert("check");
        }
    }
}); 
```

这是html代码：

```
for($LCV = 1; $LCV <= $rowCount; $LCV++) {
                    echo "<div class='graphBlock' id='".$questionCode[$LCV]."' value=''>";
                    echo "<div id='questionCodeBar'>Quiz Code: ".$questionCode[$LCV]."</div>";
                    echo "<div id='questionTitleBar'>".$questionName[$LCV]."</div>";
                    echo "<span class='barsInfo' id='barsInfo1".$LCV."'></span><div class='bars_1' id='bars1".$LCV."' style='width:;'></div>";
                    echo "<span class='barsInfo' id='barsInfo2".$LCV."'></span><div class='bars_2' id='bars2".$LCV."' style='width:;'></div>";
                    echo "<span class='barsInfo' id='barsInfo3".$LCV."'></span><div class='bars_3' id='bars3".$LCV."' style='width:;'></div>";
                    echo "<span class='barsInfo' id='barsInfo4".$LCV."'></span><div class='bars_4' id='bars4".$LCV."' style='width:;'></div>";
                    echo "<span class='barsInfo' id='barsInfo5".$LCV."'></span><div class='bars_5' id='bars5".$LCV."' style='width:;'></div>";
                    echo "<button class='endPollingButton' id='".$correctAnswer[$LCV]."' value='".$questionCode[$LCV]."' >End Polling</button>";
                    echo "</div>";
                } 
```

上面的代码不起作用。我不确定是否有任何语法错误。两个检查警报都有效。如果您需要更多代码，例如链接到的 HTML，请告诉我，我很乐意提供。如果可以的话请帮忙。谢谢。

请帮忙.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:05:34.320

看起来像单/双/三等于错字。

```
if(LCV = correctAnswer) { 
```

应该是

```
if(LCV === correctAnswer) { 
```

此外，在您的第二个 css 调用中应该有一个逗号。

你也可以考虑在你的`parseInt`调用中添加一个基数，以防它解析的字符串以一个`0`或其他一些不幸的字符开头:)

Radix 是您要将整数解析为的基础。例如，字符串“101”可以读作以 10 为基数的“一百零一”，或者它可以解释为二进制数，意思是“九”。`parseInt`默认以 10 为基数，除非您给它的字符串以 a`0`或开头`0x`。[在https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)查看文档

编辑：

我认为这是一个逻辑问题而不是语法问题。正确答案总是 [1,2,3,4,5] 中的数字吗？您还应该更改在 if/else 块中收到警报的消息，以便您可以知道正在执行的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:20:42.287

我发现了问题。根据我给你的信息，你们回答正确。原来我所指的类，“.Bars_”+LCV，应该是，“.bars_”+LCV。感谢所有的帮助。对此，我真的非常感激

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:05:51.067

您是说 if(LCV == correctAnswer) 吗？:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T16:31:12.823

也更正 LCV = correctAnswer 而不是使用赋值运算符使用“==”比较运算符

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-25T16:23:36.307

您的函数中存在语法错误

正确
$("#"+endPollingCode).children(".Bars_"+LCV).css("background-color"."red");

和

```
 $("#"+endPollingCode).children(".Bars_"+LCV).css("background-color","red"); 
```

# jquery - jquery 检索某些元素的 id 并将它们写入数组

> ID：15071102
> 
> 赞同：0
> 
> 时间：2013-02-25T16:03:12.847
> 
> 标签：jquery, each, attr

我需要执行以下操作：检查 tr 的第三个 td 是否包含（完全）56，然后检索该行的第一个 td 中包含的复选框的 id。

```
<table>
    <tr class="bg">
        <td nowrap="nowrap">
            <input class="selected_ads" type="checkbox" id="43617" />
        </td>
        <td class="pa">text text</td>
        <td class="pa">56</td>
    </tr>
    <tr class="bgwhite">
        <td nowrap="nowrap">
            <input class="selected_ads" type="checkbox" id="183578" />
        </td>
        <td class="pa">text</td>
        <td class="pa">56</td>
    </tr>
</table> 
```

($(".bg td:nth-child(3):contains('56')").length>0) 或 ($(".bgwhite td:nth-child(3):contains('56') ").length>0) 检查第三个单元格是否包含我要查找的值。

$(".pa").siblings().first().children("input[type='checkbox']") 让我获得了复选框，但我无法检索它的 ID。

理想情况下，我的代码如下所示：

```
var longlist = [];
for each ($(".bg td:nth-child(3):contains('56')").length>0) {

retrieve the id of $(".pa").siblings().first().children("input[type='checkbox']");
longlist.push(checkbox_id);
} 
```

对 .bgwhite 做同样的事情；

理想情况下它也会起作用。

对我来说最重要的是检索 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:06:44.827

给定一个 jQuery 元素：

```
var $foo = $(".pa").siblings().first().children("input[type='checkbox']"); 
```

至少有 4 种方法可以访问其 ID：

1.  `var id = $foo[0].id;`– 数组解引用 + [vanilla DOM](https://developer.mozilla.org/en-US/docs/DOM/element.id)
2.  `var id = $foo.get(0).id;`– [http://api.jquery.com/get](http://api.jquery.com/get) + [vanilla DOM](https://developer.mozilla.org/en-US/docs/DOM/element.id)
3.  `var id = $foo.attr('id');`– [http://api.jquery.com/attr](http://api.jquery.com/attr)
4.  `var id = $foo.prop('id');`– [http://api.jquery.com/prop](http://api.jquery.com/prop)

你是说你尝试了所有这些但没有一个工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:15:57.797

```
$('.bg .pa:last').each(function(){

     if($(this).text() === '56'){

         longlist.push( $(this)
                           .closest('.bg')
                           .find('.selected_ads')
                           .attr('id') );
     }
}); 
```

# iphone - 在旋转时放置和移动视图不会重绘子视图的 UI 元素

> ID：15071104
> 
> 赞同：1
> 
> 时间：2013-02-25T16:03:17.210
> 
> 标签：iphone, ios, objective-c

在 iOS 中，在 Rotation 上放置和移动视图不会重绘子视图的 UI 元素（按钮和标签），**子视图是主视图的子视图**

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{

    if (UIInterfaceOrientationIsPortrait(fromInterfaceOrientation)) {
        self.subView.frame = CGRectMake(0, 0, 100, 200);

    } else {
        self.subView.frame = CGRectMake(0, 0, 200, 1000);
    }

    self.subView.contentMode = UIViewContentModeRedraw;
    [self.subView setNeedsLayout];
    [UIView commitAnimations];
} 
```

**如何重绘 subView 的 UI 元素？**

**注意**：我已将 subView 位置从其原始位置更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:21:19.453

```
[self.subView setNeedsDisplay]; 
```

# knockout.js - 如何从敲除绑定中获取 DOM 元素？

> ID：15071111
> 
> 赞同：10
> 
> 时间：2013-02-25T16:03:38.997
> 
> 标签：knockout.js

我已经使用敲除将 DOM 元素绑定到 viewModel。当我更改底层模型上的属性时，它会更改 DOM - 一切正常。

但是，有没有办法获取绑定的 DOM 元素，以便在底层模型从外部更新时向它添加一个类？

我使用了自定义绑定，它可以让我访问 DOM 元素，但我想知道是否有直接来自 viewModel 的绑定属性的更简单方法？

谢谢

示例代码（TypeScript）

```
SetMyCell(row: number, newValue: any) {

    var ditem = this._DataItems[row];

    // update the actual value    
    ditem.Producer(newValue);

    // Now I wish to decorate the DOM item this Producer property is 
    // bound to with a class. How to go about that?

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T12:06:44.003

例如，您可以滥用可见绑定来执行传递 $element 和 $data 的函数。

```
<span data-bind="visible: func1($element, $data)">Test span</span> 
```

看看这个[小提琴](http://jsfiddle.net/JhWRS/6/)

我知道您在上面提到您不想使用自定义绑定，但我仍然想指出这个选项。尽管我使用的是自定义绑定，但当外部更改发生时，修改元素的逻辑仍将发生在视图模型中。

```
ko.bindingHandlers.widget = {
    init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {
        var elemObservable = valueAccessor();
        if (ko.isObservable(elemObservable)) {
            elemObservable(element);
        }
    }
};

var vm = function () {
    var self = this;
    .....
    self.spanElement = ko.observable();
    self.btnClick = function (){
        var elem = self.spanElement();
        $(elem).html("This is the span element");
    };
    ......
}; 
```

和 html 将是

```
<button data-bind="click: btnClick">change element text or something else</button>
<span data-bind="widget: spanElement"></span> 
```

我已经更新了[小提琴](http://jsfiddle.net/JhWRS/6/)，所以你可以看到它在行动

# php - Magento：注册 - 让店主确认帐户

> ID：15071112
> 
> 赞同：2
> 
> 时间：2013-02-25T16:03:40.273
> 
> 标签：php, magento, magento-1.7

我正在为一家批发公司调整一家 Magento 商店。因为这是一家批发公司，我们只想让公司，而不是私人/个人，来创建一个新帐户。我们想让店主检查公司的增值税号（这是注册表中的必填字段），**然后让他将帐户设置为“已确认”。**

首选方式是向店主发送一封确认电子邮件（并向客户发送一封不同的通知邮件，告知确认待处理）。但是，让店主在管理面板中将客户的帐户设置为“已确认”也可以。

所以，我的问题是这个。据我所知，只能选择是否要在“激活”帐户之前发送确认链接，但此确认链接将始终发送给客户。在我看来，您无法在管理面板中更改此设置，但如何在代码中更改此设置？任何提示、代码片段，甚至告诉我我必须更改什么文件，都会非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:15:29.430

Vinai Kopp（为 Magento 工作）提供了一个免费扩展，它应该满足您的需求：**Netzarbeiter_CustomerActivation**

*   [Magento Connect 上的扩展](http://www.magentocommerce.com/magento-connect/customer-activation.html)
*   [来源 Github](https://github.com/Vinai/customer-activation)

这是一个小型、干净的扩展，不使用核心重写，可以轻松停用或卸载。所以不应该有任何兼容性问题。

# javascript - 将文本添加到 jQuery 滑块

> ID：15071113
> 
> 赞同：0
> 
> 时间：2013-02-25T16:03:49.470
> 
> 标签：javascript, jquery, html, slider

我想自定义我的 Slider。它目前的工作方式如下：[http](http://ryrych.github.com/rcarousel/examples/gotopage.html) ://ryrych.github.com/rcarousel/examples/gotopage.html 。

但是，我想知道，是否可以将一段文本与每张“幻灯片”相关联。

因此，当您单击圆形按钮进行导航时，一段新文本会淡入（左下）而旧文本会淡出。这可能吗？

非常感谢这里的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:28:47.843

我实际上找到了一个更好的解决方案：Malsup。

> [http://www.malsup.com/jquery/cycle2/demo/caption.php](http://www.malsup.com/jquery/cycle2/demo/caption.php)

# java - hibernate MappingException：无法确定类型：java.util.Set

> ID：15071116
> 
> 赞同：1
> 
> 时间：2013-02-25T16:03:55.280
> 
> 标签：java, hibernate, hibernate-mapping

我是 Java 和 Hibernate 的新手（虽然我熟悉实体框架，所以了解很多概念）

我要做的就是创建一个`OrganisationNode`具有以下字段的表`Id`：`Name`和`ParentId`

`ParentId`是 Nullable 并且，如果存在，应该指向一个有效的`OranisationNode.Id`.

我认为这应该相当简单，但是花了 2 多天的时间在谷歌上搜索和编辑 XML 文件，我开始失去耐心。

让我从代码片段开始......

### 组织节点.java

```
@javax.persistence.Entity
public class OrganisationNode extends EntityBase implements Serializable {
    private String name;

    @ManyToOne(targetEntity = OrganisationNode.class, optional = true)
    @JoinColumn(name="ParentId", referencedColumnName="Id") //This is one example of this attribute. I've tried many combinations
    private OrganisationNode parent;

    @OneToMany
    private Set<OrganisationNode> children = new HashSet<OrganisationNode>();

    //Getters/Setters
} 
```

### EntityBase.java

```
@javax.persistence.Entity
public class EntityBase implements Serializable {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Long id;

    //Getter/Setter
} 
```

### 休眠.config.xml

```
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://mysqldev:3306/SomeDb?zeroDateTimeBehavior=convertToNull</property>
    <property name="hibernate.connection.username">SomeUser</property>
    <property name="hibernate.connection.password">SomePass!</property>
    <property name="hibernate.hbm2ddl.auto">create</property>
    <property name="show_sql">true</property>
    <mapping resource="hibernate.hbm.xml"/>
  </session-factory>
</hibernate-configuration> 
```

### 休眠.hbm.xml

```
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.overshare.document.entities.OrganisationNode" table="OrganisationNodes">
        <id name="id"><generator class="native"/></id>
        <property name="name"/>
        <property name="children"/>
        <property name="parent"/>
    </class>
</hibernate-mapping> 
```

### HibernateUtil.java

```
public class HibernateUtil {

    private static SessionFactory sessionFactory;

    public static void configureSessionFactory() {

            Configuration configuration = new Configuration();
            configuration.configure("hibernate.cfg.xml");
            ServiceRegistryBuilder serviceRegistryBuilder = new ServiceRegistryBuilder().applySettings(configuration.getProperties());
            sessionFactory = configuration.buildSessionFactory(serviceRegistryBuilder.buildServiceRegistry());
    }

    public static SessionFactory getSessionFactory() {
        if(sessionFactory == null){configureSessionFactory();}
        return sessionFactory;
    }
} 
```

我目前得到的例外是......

> javax.servlet.ServletException：org.hibernate.MappingException：无法确定类型：java.util.Set，在表：OrganisationNodes，列：[org.hibernate.mapping.Column（Children）]

所以，我的第一个问题是如何解决这个异常？我相信我已经明确告诉它`Children`应该指向什么。

我的下一个问题是……这一切真的有必要吗？我很难相信在 ORM 上建立并运行一个表需要这么多的配置和代码。我在这里得到的大部分内容都是从网络上的各种示例中窃取的，所以我不确定质量。当然，90% 的信息必须可以通过反射来休眠？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:15:13.997

您在这里混合了 xml 映射和注释。在您的情况下，仅注释就足够了。首先删除 Hibernate.hbm.xml。

组织节点.java

```
@Entity
public class OrganisationNode extends EntityBase {

    private String name;
    private String description;

    @ManyToOne
    @JoinColumn(name="ParentId")
    private OrganisationNode parent;

    @OneToMany
    private Set<OrganisationNode> children = new HashSet<OrganisationNode>();

} 
```

EntityBase.java

```
@Entity
public class EntityBase {
    @Id
    @GeneratedValue
    private Long id;

} 
```

休眠.config.xml

```
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://mysqldev:3306/SomeDb?zeroDateTimeBehavior=convertToNull</property>
    <property name="hibernate.connection.username">SomeUser</property>
    <property name="hibernate.connection.password">SomePass!</property>
    <property name="hibernate.hbm2ddl.auto">create</property>
    <property name="show_sql">true</property>

    <mapping class="com.overshare.document.entities.OrganisationNode"/>
  </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:15:14.460

您应该使用“Hibernate.hbm.xml”或使用注释。您正在尝试同时使用这两种方法，我认为这很令人困惑。

您在“Hibernate.hbm.xml”中所做的一切都可以作为注释放入实体类中。这使事情**变得更加**简单：

```
@Entity
@Table(name = "OrganisationNodes")
public class OrganisationNode implements Serializable {
    @Column(name = "NAME")
    private String name;

    @Column(name = "DESCRIPTION")
    private String description;
    etc. 
```

我也会摆脱的`EntityBase`。从外观上看它并没有给你太多，而且在 Hibernate 中扩展基类可能会很痛苦。

# python - 从 PyQt3 迁移到 PyQt4

> ID：15071117
> 
> 赞同：0
> 
> 时间：2013-02-25T16:03:56.903
> 
> 标签：python, pyqt

我是 python 新手，我想知道如何更改为 PyQt3 编写的代码以在 PyQt4 上工作。例如：下面的代码应该适用于 PyQt3，我应该对其进行哪些更改才能使其在 PyQt4 上运行？

谢谢。

```
import sys
from qt import *

class dlgLabel(QDialog):

def __init__(self,parent = None,name = None,modal = 0,fl = 0):
    QDialog.__init__(self,parent,name,modal,fl)
    self.setCaption("label dialog")
    if name == None:
        self.setName("dlgLabel")

    self.layout=QHBoxLayout(self)
    self.layout.setSpacing(6)
    self.layout.setMargin(11)

    self.label=QLabel("&Enter some text", self)
    self.edit=QLineEdit(self)
    self.label.setBuddy(self.edit)

    self.layout.addWidget(self.label)
    self.layout.addWidget(self.edit)

    self.edit.setFocus()

if __name__ == '__main__':
app = QApplication(sys.argv)
QObject.connect(app, SIGNAL('lastWindowClosed()'),
                app, SLOT('quit()'))
win = dlgLabel()
app.setMainWidget(win)
win.show()
app.exec_loop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:22:57.517

主要差异将来自 Qt 3 和 Qt 4 的 API 之间的差异，这应该在[http://doc.qt.io/qt-4.8/porting4-overview.html](http://doc.qt.io/qt-4.8/porting4-overview.html)和其他几个 Qt 移植指南中得到很好的介绍。

查看[https://github.com/develersrl/pyqt3support](https://github.com/develersrl/pyqt3support)也可能有用。

# php - 从在线表格向客户发送报告，告诉客户他选择的所有数据？

> ID：15071118
> 
> 赞同：1
> 
> 时间：2013-02-25T16:03:58.077
> 
> 标签：php, html

我是这个领域的初学者 我已经为客户制作了一个提交表格来销售一些产品 我从表格中收到消息到我的电子邮件中，其中包含客户输入的数据..但我希望客户得到根据客户在 [ 电子邮件地址： ] 字段中输入的电子邮件地址，将相同的数据发送给他

我的 PHP 代码是：

```
<?php
if(isset($_POST['email'])) {

    $email_to = "HERE I PUT MY EMAIL";
    $email_subject = "You've got a message - Online Form";

    function died($error) {
        echo "We are very sorry, but ";
        echo $error."<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['first_name']) ||
        !isset($_POST['last_name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['phone']) ||
        !isset($_POST['face_cream']) ||
        !isset($_POST['body_cream']) ||
        !isset($_POST['body_oil']) ||
        !isset($_POST['face_wash']) ||
        !isset($_POST['breast_oil']) ||
        !isset($_POST['comments'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $first_name = $_POST['first_name']; // required
    $last_name = $_POST['last_name']; // required
    $email_from = $_POST['email']; // required
    $phone = $_POST['phone']; // required
    $face_cream = $_POST['face_cream']; // not required
    $body_cream = $_POST['body_cream']; // not required
    $body_oil = $_POST['body_oil']; // not required
    $face_wash = $_POST['face_wash']; // not required
    $breast_oil = $_POST['breast_oil']; // not required
    $comments = $_POST['comments']; // not required
    $agreement = $_POST['agreement']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
 if(strlen($phone) < 6) {
    $error_message .= 'The Phone Number you entered do not appear to be valid.<br />';
  }
 if(strlen($agreement) < yes) {
    $error_message .= 'The agreement you entered do not appear to be valid.<br />';
  }
if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Phone Number: ".clean_string($phone)."\n";
    $email_message .= "The chosen quantity of (Face Cream) is: ".clean_string($face_cream)."\n";
    $email_message .= "The chosen quantity of (Body Cream) is: ".clean_string($body_cream)."\n";
    $email_message .= "The chosen quantity of (Body Oil) is: ".clean_string($body_oil)."\n";
    $email_message .= "The chosen quantity of (Face Wash) is: ".clean_string($face_wash)."\n";
    $email_message .= "The chosen quantity of (Breast Oil) is: ".clean_string($breast_oil)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

// checkbox
if(isset($_POST['agreement']) &&
   $_POST['agreement'] == 'yes')
{
    echo "You've accepted our terms and conditions.<br>";
}
else
{
    echo "You didn't agree on the Terms & Conditions.<br>";
}   

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<!-- include your own success html here -->

Thank you for contacting us. We will be in touch with you very soon.

<?php
}
?> 
```

（ 提前致谢 ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:23:31.637

您只需要另一个 @mail 命令，将 email_from 和 email_to 颠倒过来

```
...... all your d**kload of code
@mail($email_to, $email_subject, $email_message, $headers);  // Sends to YOU
@mail($email_from, $email_subject, $email_message, $headers); // Sends to the client 
```

您未来的问题的问题：

1.  这些代码都不是你写的（如果是，你应该知道该怎么做）。
2.  您复制了整个代码，因为（参见问题 1）
3.  你没有清楚地解释问题是什么

现在。如果这是你想要的。请点击“接受答案”打勾以帮助建立一些好的业力

# json - 如何使用 web api 返回未标记值数组的集合（数组）

> ID：15071119
> 
> 赞同：1
> 
> 时间：2013-02-25T16:03:59.633
> 
> 标签：json, linq, asp.net-mvc-4

如何在 web api 控制器中转换 linq select 语句以返回未标记值数组的集合。

例如，

```
_db.view.select(_ => new { _.Field1, _.Field2, ... , _.FieldN }) 
```

以以下形式返回 json：

```
[ { Field1: F1Value1, ... FieldN: FnValue1 },
  { Field1: F1Value2, ... FieldN: FnValue2 } ] 
```

我想从响应中删除标签：

```
[ [ F1Value1, ... , FnValue1 ],
  [ F1Value2, ... , FnValue2 ] ] 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:14:24.410

如果您无论如何都要对所需字段进行硬编码，那么只需将它们硬编码到 lambda 表达式中的数组中：

```
_db.view.select(_ => new string[]{_.Field1, _.Field2, ... , _.FieldN}) 
```

# jquery - 如何将对象数组传递给 webAPI 列表

> ID：15071120
> 
> 赞同：1
> 
> 时间：2013-02-25T16:04:05.890
> 
> 标签：jquery, ajax, asp.net-mvc-4, asp.net-web-api

我有一个基本的 HTML，它使用 jquery ajax 调用来调用 WebAPI 函数。HTML 发送一个对象数组，这些对象应该映射到我作为 LIST 接收的函数参数。如果我删除数组并仅发送 1 个对象并从函数中删除列表，那么我的代码可以工作并且对象成功传递给参数。

JavaScript 代码如下

```
 function Call_Service () {
var input =
{
    STATUS: "MY New Status",
    CATEGORY: "My Value"
};

var input2 =
{
    STATUS: "MY New Status2",
    CATEGORY: "My Value2"
};

var input_array = new Array();
input_array[0] = input;
input_array[1] = input2;

$.ajax({
    type: "POST",
    url: "http://localhost:34989/api/TMSPortal/objectPOC",
    data: input_array,
    success: function (response) {
        alert(response);
    }
});
} 
```

C# WebAPI 如下

```
 public Int64 objectPOC(List<TMS_STATUS> _Status)
    {

        Int64 retValu = 0;

        for (int i = 0; i < _Status.Count; i++)
        {
            retValu++;
        }

        return retValu;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:33:00.733

据我所知，Web-API 目前不允许超过 1 个复杂参数，因此我通过以下解决方法完成了我的工作。让我知道是否有人有更好的解决方案：

将 Web-API 函数更改为接收 JObject，然后从中提取我的复杂对象。Web-API 函数如下所示：

```
 public Int64 objectPOC(JObject jsonWrapper)
    {

        dynamic jsonValues = jsonWrapper;
        JArray jsonInput = jsonValues.input;
        JArray jsonInput2 = jsonValues.input2;

        List<TMS_STATUS> _Status = jsonInput.ToObject<List<TMS_STATUS>>();
        List<TMS_STATUS> _Status2 = jsonInput2.ToObject<List<TMS_STATUS>>();

        Int64 retValu = 0;

        for (int i = 0; i < _Status.Count; i++)
        {
            retValu++;
        }

        return retValu;
    } 
```

Ajax调用如下：

```
 function Call_Service () {
var input =
{
    STATUS: "MY New Status",
    CATEGORY: "My Value"
};

var input2 =
{
    STATUS: "MY New Status2",
    CATEGORY: "My Value2"
};

var input_array = new Array();
input_array[0] = input;
input_array[1] = input2;

alert(input_array[0].STATUS);

$.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "http://localhost:34989/api/TMSPortal/objectPOC",
    dataType: "json",
    data: JSON.stringify({
        input: input_array,
        input2: input_array
    }),
    success: function (response) {
        alert(response);
    }
});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:56:51.350

要发送多个复杂类型参数，请创建一个模型并将它们作为模型内的属性公开。在 Web API 中，您只能有 1 个开箱即用的复杂类型输入参数。

# node.js - 如何从 node.js 中的其他模块访问应用程序变量？

> ID：15071123
> 
> 赞同：3
> 
> 时间：2013-02-25T16:04:25.607
> 
> 标签：node.js, express

我需要使用 express 2 和 node 0.8 访问 app.js 中声明的变量；我有以下代码：

```
app.js
------
[.....]
var server = app.listen(3000);
var io = require('socket.io');
io.listen(server);
exports.io=io;

module.js
----------
var app=require("./app");
console.log(app.io); 
```

但是 app.io 是未定义的……我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:46:47.293

如果你在set in`console.log`的时候加上一个right ，这很可能是在runs in之后发生的。`exports.io``app.js``console.log(app.io)``module.js`

相反，为了更好地控制顺序，您可以在 中导出一个 init 函数`module.js`，然后从 中调用它`app.js`。

模块.js

```
var io = null;
exports.init = function(_io) {
  io = _io;
} 
```

应用程序.js

```
var server = app.listen(3000);
var module = require('./module')
var io = require('socket.io');
io.listen(server);
module.init(io); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T18:46:29.077

当您执行时，请`require`确保`module.js`将变量传递`app`给构造函数。例子。

应用程序.js

```
var app = express();
var mod = require('module')(app); 
```

模块.js

```
// Module constructor
var app;
var m = module.exports = function (_app) {
    app = _app;
}

m.myFunction = function () {
    // app is usable here
    console.log(app);
} 
```

# javascript - 在不重新加载页面的情况下更改 URL 变量

> ID：15071138
> 
> 赞同：2
> 
> 时间：2013-02-25T16:05:18.387
> 
> 标签：javascript, facebook, url, reload

每个人。我有个问题。这个问题在 Facebook 中得到了完美的解决。我有一个与 facebook 提要非常相似的页面。这个页面上有一些照片。单击照片 - 我们有一个显示所有内容的窗口。我们可以看到 facebook 上的 URL 地址发生了变化，但所有背景内容都没有重新加载。我们看到每张照片都有自己的带有获取参数的 url。

是否有任何解决方案如何在不重新加载页面的情况下更改 URL 参数。不使用锚点 (#) 和 HTML5。正如它在 facebook 中实现的那样。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T16:37:24.033

在 JavaScript 中使用 location.hash 来更新你的 url：

```
<script>
    location.hash = 'yourpage';
</script> 
```

您的网址将更新为 = > [http://www.yourdomain.com/#yourpage](http://www.yourdomain.com/#yourpage)

您还可以使用 HTML5 的推送状态

```
window.history.pushState(data, "Title", "/new-url"); 
```

**更多信息** [http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate](http://badassjs.com/post/840846392/location-hash-is-dead-long-live-html5-pushstate)

# c++ - 在 C++ 中通过 dirent.h 获取根文件夹中的列表文件夹和列表文件

> ID：15071143
> 
> 赞同：2
> 
> 时间：2013-02-25T16:05:29.030
> 
> 标签：c++

我有一个根文件夹包括

```
+ Test1(folder) > Test2(folder)>Test3(folder)>file1,file2....(file) 
+ Test5(folder) > Test6(folder)>file1,file2....(file) 
```

如何通过输入获取列表文件是 C++ 中的根文件夹。如果列表文件（file1，file2 ....）是子根文件夹（根文件夹>file1，file2 ...），我成功获得了列表文件。但就我而言，要获取列表文件，我必须扫描许多父文件夹。在我的情况下如何获取列表文件？如果没有父文件夹，这是我获取列表文件的代码

```
 DIR *dirStr = NULL; 
    dirStr = opendir(rootpath)
    dirent *nextFile = NULL;
    while ((nextFile = readdir(dirStr))!=NULL)
    {
        // Avoid hidden files
        //Scan all file an dictionary
        if (nextFile->d_name[0] != '.')
        {
                    cout<<nextFile->d_name<<endl;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:18:38.270

你会使用递归。

递归函数是调用自身的函数。还有相互递归的函数调用另一个函数，而后者又再次调用调用函数。

递归的一个典型例子是这个朴素的阶乘函数：

```
int factorial(int x) {
    if (x == 1) return 1; // assume 1
    else if (x > 1) return x*factorial(x-1);
    else throw std::logic_error("factorial called with argument<1");
} 
```

# jquery - jqGrid在页面上自动调整大小并带有可隐藏菜单

> ID：15071152
> 
> 赞同：-2
> 
> 时间：2013-02-25T16:05:52.300
> 
> 标签：jquery, jqgrid

我有一个带有可隐藏垂直菜单的页面。在同一页面中，我有一个带有“autowidth:true”参数的 jqgrid。当我加载页面时，它是可见的菜单，但如果我隐藏菜单，我的 jqgrid 的宽度保持相同的大小。当菜单隐藏时如何更改 jqgrid 的宽度并在它可见时再次更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:19:14.993

您可以在隐藏或显示“垂直菜单”后直接调用[setGridWidth方法。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)除了网格本身的宽度外，它还允许您调整网格所有列的宽度。

# java - 如何或在哪里访问我的属性文件

> ID：15071158
> 
> 赞同：3
> 
> 时间：2013-02-25T16:06:20.897
> 
> 标签：java, spring

我有一个属性文件 myprops.properties，如下所示：

```
Wsdl=someurl
UserName=user
UserPassword=pasword
Application=appName 
```

在我的控制器内部，我试图访问我的服务中的设置值，如下所示

```
Properties prop = new Properties();
prop.load(new FileInputStream("resources/myprops.properties"));
myService.setWsdl(prop.getProperty("Wsdl"));
myService.setUserName(prop.getProperty("UserName"));
myService.setUserPassword(prop.getProperty("UserPassword"));
myService.setApplication(prop.getProperty("Application")); 
```

我的问题是我只是不知道使用什么路径。如果这有什么不同的话，它是一个 Spring 项目。理想情况下，我希望将属性文件放在我的“src/main/resources”文件夹中

我意识到这对某些人来说可能非常简单，但我已经尝试在这里和谷歌上搜索解决方案，但我似乎找不到有帮助的解决方案。我尝试在项目中移动文件，但似乎无法弄清楚

我得到的错误是

```
java.io.FileNotFoundException: resources\drm.properties (The system cannot find the path specified) 
```

任何建议/解释，甚至是清楚地解释它的链接都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-16T11:48:11.477

好吧， src/main/resources 在类路径上，你只需要这样做。

Properties properties = PropertiesLoaderUtils.loadAllProperties("你的属性文件名");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:13:29.623

鉴于这`src/main/resources`是在类路径上，你可以这样做：

```
Resource resource = new ClassPathResource("/myprops.properties");
Properties props = PropertiesLoaderUtils.loadProperties(resource); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:18:25.907

如果您使用的是 spring，您可以设置您的属性占位符。

```
 <context:property-placeholder location="classpath:resources/myprops.properties" /> 
```

并且在您的bean中，您可以使用`@Value`注释从属性中注入值

```
@Autowired
public Foo(@Value("${Wsdl}") String wsdl) {
   ...
} 
```

在上面的情况下，我在构造函数中使用了，但它可以由 Autowired 字段/设置器使用。

因此，在您的服务中，您可能会遇到以下情况：

```
@Service
public class MyService {
     private final String wsdl;
     private final String username;
     private final String password;
     private final String application;

     @Autowired
     public MyService(
         @Value("${Wsdl}") String wsdl,
         @Value("${UserName}") String username,
         @Value("${UserPassword}") String password,
         @Value("${Application}") String application
         ) {
         // set it to each field.
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T16:10:36.723

不要使用`FileInputStream`; 用于`getResourceAsStream()`从 servlet 上下文中读取它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T16:10:54.383

你总是可以指望mkyong。这是有关如何加载和读取属性文件的示例/教程。

[http://www.mkyong.com/java/java-properties-file-examples/](http://www.mkyong.com/java/java-properties-file-examples/)

此问题应标记为重复：

1.  [从 Java 包加载属性文件](https://stackoverflow.com/questions/333363/loading-a-properties-file-from-java-package/333385#333385)
2.  [如何使用 Java 属性文件？](https://stackoverflow.com/questions/1318347/how-to-use-java-property-files)
3.  [在 Java 中加载属性文件](https://stackoverflow.com/questions/8207790/load-a-property-file-in-java)
4.  [Java 属性文件未加载](https://stackoverflow.com/questions/4777252/java-properties-file-not-loading)
5.  [加载属性文件时的 Java NullPointerException](https://stackoverflow.com/questions/8838988/java-nullpointerexception-on-loading-properties-file)
6.  [无法在 Java 中加载属性文件](https://stackoverflow.com/questions/7596155/not-able-to-load-properties-file-in-java)

# javascript - Wordpress 中的 JQuery 效果（非插件）

> ID：15071161
> 
> 赞同：0
> 
> 时间：2013-02-25T16:06:31.330
> 
> 标签：javascript, jquery, effects

我正在尝试更改 Jquery 行为并将其添加到 wordpress 网站。

我想做的第一件事是每次通过导航单击页面时，我希望页面淡入，然后看起来页面已经向上滚动。我可以让 fase 工作，但我不能让页面向上滚动或至少有效果。

```
<script language="Javascript">
    $(document).ready(function(){   
        $('body').fadeIn(1000);
    });
</script> 
```

第二个问题是我有一个图像，当你在它上面时显示图像的标题，我希望它淡入但向上滚动标题。

```
<script type="text/javascript">

    $(document).ready(function() {

        //move the image in pixel
        var move = -15;

        //zoom percentage, 1.2 =120%
        var zoom = 1.1;

        //On mouse over those thumbnail
        $('#client-rank .client-img').hover(function() {

            //Set the width and height according to the zoom percentage
            width = $('#client-rank .client-img').width() * zoom;
            height = $('#client-rank .client-img').height() * zoom;

            //Move and zoom the image
            $(this).find('#client-rank .client-img img').stop(false,true)
                .animate({
                    'width': width, 
                    'height': height, 
                    'top': move, 
                    'left': move
                }, {duration:200});

            //Display the caption
            $(this).find('div.caption').stop(false,true).fadeIn(200);

        },
        function() {
            //Reset the image
            $(this).find('img').stop(false,true)
                .animate({
                    'width': $('.item').width(), 
                    'height': $('.item').height(), 
                    'top': '0', 
                    'left': '0'
                }, {duration:100}); 

            //Hide the caption
            $(this).find('div.caption').stop(false,true).fadeOut(200);
        });

    });

</script> 
```

[关联 ]`http://test-cocoonfxmedia.co.uk/elevate/clients!`

任何意见，将不胜感激。

# c# - 此 C# 代码如何工作（在 aspx.cs 类中）

> ID：15071162
> 
> 赞同：-6
> 
> 时间：2013-02-25T16:06:32.783
> 
> 标签：c#, asp.net

我对以下代码感到困惑，看起来它在这里被禁用了？

```
 public bool GetFormsCredentials(out Cookie authCookie, out string userName, out string password, out string authority) {
        authCookie = null;
        userName = password = authority = null;
        return false;
    } 
```

它不应该是这样的吗？

```
userName =  myName
password =  12345
authority = someAuthority 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:10:12.013

C#赋值操作中“=”返回赋值，所以上面的代码执行如下：

```
userName = (password = (authority = null)); 
```

或者

```
authority = null;
password = authority;
userName = password; 
```

# sql-server - 查找每家商店前 80% 的产品

> ID：15071163
> 
> 赞同：1
> 
> 时间：2013-02-25T16:06:38.447
> 
> 标签：sql-server

我必须创建一个查询来查找每家商店销售的前 80% 的产品。有没有办法使用窗口函数来做到这一点？我的表是具有以下列的事务数据集：

```
StoreID | ProductID | NoOfProducts | SoldDate 
```

对于一家商店，如果销售 100 种不同的产品`COUNT(DISTINCT(ProductID))`，我希望得到该商店的 80 种产品的结果集。我怎么能这样做？（我的数据库环境是 SQL Server 2008）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:21:20.663

像这样的东西应该使用`ROW_NUMBER()`然后使用`COUNT`每个商店来确定要显示的行。这将始终显示按 ProductId 排序的前 80%：

```
SELECT 
  t.StoreId,
  t.ProductId,
  t.rn
FROM (
    SELECT StoreId, 
         ProductId, 
         ROW_NUMBER() OVER (Partition BY StoreId ORDER BY ProductId) rn
    FROM YourTable ) t JOIN (
    SELECT StoreId,
         COUNT(DISTINCT ProductId) cnt
    FROM YourTable
    GROUP BY StoreId
  ) t2 on t.StoreId = t2.StoreId
WHERE t.rn <= (t2.cnt*.8) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/0b4a6/7)

# xml - 使用 xslt 查找 xml 元素

> ID：15071167
> 
> 赞同：2
> 
> 时间：2013-02-25T16:06:52.173
> 
> 标签：xml, xslt

我正在使用 xslt 来转换一些 xml 文件。我的输入数据如下所示：

```
<data>
  <dataItem>
    <value>24014</value>
    <date>Feb 11, 2013</date>
  </dataItem>
  <dataItem>
    <value>0</value>
    <date>Feb 12, 2013</date>
  </dataItem>
  <dataItem>
    <value>0</value>
    <date>Feb 13, 2013</date>
  </dataItem>
  <dataItem>
    <value>24627</value>
    <date>Feb 14, 2013</date>
  </dataItem>
  <dataItem>
    <value>0</value>
    <date>Feb 15, 2013</date>
  </dataItem>
</data> 
```

我的输出数据需要如下所示：

```
<root>
  <item>
    <text>
      Feb 14, 2013
    </text>
  </item>
</root> 
```

换句话说，我正在寻找 value 元素不为 0 的最新日期元素。 dataItem 元素保证按递增的日期顺序排列（从文档顶部开始）。

我试图以递归方式处理这个问题，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template name="findDate">
    <xsl:param name="list"/>
    <xsl:choose>

      <xsl:when test="value = 0">
        <xsl:call-template name="findDate">
          <xsl:with-param name="list" select="$list[position()!=1]"/>
        </xsl:call-template>
      </xsl:when>

      <xsl:otherwise>
        <root>
          <item>
            <text>
              <xsl:value-of select="label"/>
            </text>
          </item>
        </root>
      </xsl:otherwise>

    </xsl:choose>
  </xsl:template>

  <xsl:template match="/">
      <xsl:call-template name="findDate">
        <xsl:with-param name="list" select="//dataItem"/>
      </xsl:call-template>
  </xsl:template>

</xsl:stylesheet> 
```

但到目前为止，它不起作用，我得到的只是：

```
 <root>
      <item>
        <text>
        </text>
      </item>
    </root> 
```

谁能看到我哪里出错了？

谢谢，

保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:55:14.343

该行`<xsl:value-of select="label"/>`看起来很可疑，因为您的输入 XML 中没有任何`label`元素。

但是不需要递归模板。尝试以下操作：

```
<xsl:template match="/">
    <root>
        <xsl:apply-templates select="data/dataItem[value!=0][last()]"/>
    </root>
</xsl:template>

<xsl:template match="dataItem">
    <item>
        <text>
            <xsl:value-of select="date"/>
        </text>
    </item>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:48:20.593

如果`dataItem`元素已经按 排序`date`，您应该能够只获取最后一个`dataItme`不具有 值的元素`0`。（查看模板中`xsl:apply-temlates`的`/*`XPath 以执行此操作。）

**XML 输入**

```
<data>
    <dataItem>
        <value>24014</value>
        <date>Feb 11, 2013</date>
    </dataItem>
    <dataItem>
        <value>0</value>
        <date>Feb 12, 2013</date>
    </dataItem>
    <dataItem>
        <value>0</value>
        <date>Feb 13, 2013</date>
    </dataItem>
    <dataItem>
        <value>24627</value>
        <date>Feb 14, 2013</date>
    </dataItem>
    <dataItem>
        <value>0</value>
        <date>Feb 15, 2013</date>
    </dataItem>
</data> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/*">
        <root>
            <xsl:apply-templates select="(dataItem[not(value=0)])[last()]"/>            
        </root>
    </xsl:template>

    <xsl:template match="dataItem">
        <item>
            <xsl:apply-templates/>
        </item>
    </xsl:template>

    <xsl:template match="date">
        <text><xsl:value-of select="."/></text>
    </xsl:template>

    <xsl:template match="value"/>

</xsl:stylesheet> 
```

**XML 输出**

```
<root>
   <item>
      <text>Feb 14, 2013</text>
   </item>
</root> 
```

# ruby-on-rails - 编辑页面的未定义方法

> ID：15071170
> 
> 赞同：0
> 
> 时间：2013-02-25T16:06:58.267
> 
> 标签：ruby-on-rails

我是 Rails 的新手。我的 new.html.erb 文件完美运行，如`http://localhost:3000/signup`. 但是我似乎无法让 /edit 工作。我收到此错误：

```
undefined method `model_name' for NilClass:Class
Extracted source (around line #3):

1: <h1>Account Information</h1>
2: 
3: <%= form_for @user do |f| %>
4:   <% if @user.errors.any? %>
5:     <div class="error_messages">
6:       <h2>Form is invalid</h2> 
```

这是我的 edit.html 文件，它是有效的 new.html 的副本。我尝试删除错误消息代码，但页面仍然显示另一个错误。

```
<h1>Account Information</h1>

<%= form_for @user do |f| %>
  <% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% @user.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

    <div class="field">
        <%= f.label :email %><br/>
        <%= f.text_field :email %>
    </div>
    <div class="field">
        <%= f.label :password %><br/>
        <%= f.password_field :password %>
    </div>
    <div class="field">
        <%= f.label :password_confirmation %><br/>
        <%= f.password_field :password_confirmation %>
    </div>
    <div class="field">
        <%= f.label :username %><br/>
        <%= f.text_field :username %>
    </div>
    <div class="field">
        <%= f.label :zip_code %><br/>
        <%= f.text_field :zip_code %>
    </div>
    <div class="field">
        <%= f.label :birthday %><br/>
        <%= f.text_field :birthday %>
    </div>  
    <div class="actions"><%= f.submit %></div>
<% end %> 
```

这是我的 users_controller，我不确定您是否需要查看。也许我的 def 编辑部分错了。

```
 class UsersController < ApplicationController
  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      UserMailer.registration_confirmation(@user).deliver
      session[:user_id] = @user.id
      redirect_to root_url, notice: "Thank you for signing up!"
    else
      render "new"
    end

    def edit
      @user = User.find(params[:id])
  end

  def update
    @user = User.find(params[:user])
    if @user.update_attributes(params[:user])
      flash[:success] = "Account updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
  end
end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:12:50.430

您的代码缩进在这里是一个明显的标志；你在*里面*`edit`定义and`update`方法；前一个关闭，而不是。 *`def create``end``if @user.save``def create`*

# sql-server-2008 - 如何在 SQL 代理作业中成功运行批处理文件？

> ID：15071174
> 
> 赞同：1
> 
> 时间：2013-02-25T16:07:10.223
> 
> 标签：sql-server-2008, batch-file, jobs, sql-agent

亲爱的 Stackoverflow 用户，

我有一个 SQL 代理作业，它在 PDF 文件中生成特定报告，然后将 PDF 复制到网络目录，然后删除源目录中的 PDF 文件。

SQL 作业包括 2 个步骤： 1\. 生成报告 2\. 将报告复制到网络位置。

对于第 2 步，我制作了一个 bat 文件，用于处理 pdf 文件的复制和删除。

bat文件如下：

```
set source_dir=C:\Reports\Energie\Uur
set dest_dir=\\KWS2-WEB-SERVER\Share\Reports\Uur

C:\Windows\System32\Robocopy.exe %source_dir% %dest_dir% /MOV /Z 
```

***但是，当我运行作业时，它会挂在第二步。状态只是停留在“正在执行”。***

这是我在步骤中声明的行（要执行的 bat 文件的位置）：

```
cmd.exe /c "C:\Reports\rapport_uur_copy.bat" 
```

我的工作设置如下：

**第1步**

类型：操作系统 (CmdExec) 成功时：转到下一步

On Failure：退出作业报告失败

**第2步**

类型：操作系统（CmdExec）

成功时：辞职报告成功

On Failure：退出作业报告失败

**一些事实：**

*   我对网络目录有读/写权限
*   我以管理员帐户（登录用户，默认）运行这些步骤
*   第 1 步成功
*   我运行 Windows Server 2008 R2 标准版
*   我有 SQL Server 2008 R2
*   当我从 cmd 手动运行脚本时，它可以工作（在管理员帐户下）。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:53:36.083

当批处理脚本需要使用非本地驱动器时，例如共享它总是需要特殊权限，意味着`you need to use an account to run the script which is allowed to log on as batch task in secpol`- （单击开始类型 secpol.msc 并启动它 - 在 MSC 管理单元中选择“本地策略” - 选择“用户权限分配” - 右单击“作为批处理作业登录”并选择属性 - 单击“添加用户或组”，并包括相关用户。）

在正常批次中也无法使用`\\drives`，它们必须映射为带有字符的驱动器，例如`V:\drive`，这种映射`got to be made by the batch itself`与`user account used running the batch`我在我的脚本中经历过的。

# c# - 何时应填充 winform 应用程序中的第二个表单？

> ID：15071175
> 
> 赞同：1
> 
> 时间：2013-02-25T16:07:14.083
> 
> 标签：c#, winforms, forms, multiple-forms

我正在用 C# 创建一个 Windows 窗体应用程序，我有两个窗体。用户将使用图表的主窗体和另一个窗体，其中包含：系列外观选项、轴选项、标签选项等...当按下“工具”按钮时，此窗体出现。从那里我打算让用户根据需要修改他们的图表。我的问题是 - 在第一个表单加载或初始化时填充第二个表单是否更快/更好，或者它是否应该在按下“工具”按钮时这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:12:38.597

这个问题是关于急切加载（尽快加载数据）和延迟加载（在必要时加载数据）之间的区别。我认为这里的决定应该归结为用户体验。如果数据需要一点时间来加载，并且您的用户将经常访问属性窗口，那么我建议立即加载。另一方面，如果加载速度很快，或者这是一个不常见的功能，那么我建议延迟加载。因此，您需要弄清楚用户的期望。但是，如果屏幕的数据加载速度很快，那么加载的时间就无关紧要了。

我还建议您重新考虑您的属性窗口，特别是如果要经常使用它。这种用户界面的范例是将[PropertyGrid](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid.aspx)嵌入到完成大部分工作的同一应用程序窗口中。考虑一下 Visual Studio 中的许多示例以及几乎任何 IDE 样式的应用程序。它们往往没有“浮动”属性窗口。范例是您显示当前在 IDE 中选择的任何对象的属性，以便快速轻松地进行修改。单独的工具 | 选项范式更适用于修改频率较低且与整个应用程序相关联的应用程序级设置，而不是应用程序管理的特定对象。同样，Visual Studio 是一个很好的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:12:45.927

在我看来，当您单击相应的按钮时，最好创建第二种形式的新实例。我认为您应该只在需要时为表单分配内存。

但是，如果您的表单加载速度很快，那么从用户的角度来看，这并不重要，只要您隐藏第二个表单直到单击按钮即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:15:17.080

在启动时创建多个表单不是很可扩展。当您有 20-30 个表格时，加载需要很长时间！在需要时创建它们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-25T16:14:06.367

```
// button event in your first form (Form1)
private void firstButton_Click(object sender, EventArgs e)
{
    Form2 form2 = new Form2();
    form2.ShowDialog(); // Shows Form2
} 
```

应该使用，因为您可能根本不需要该按钮。

# c++ - 代码复杂度指标和 ifdef

> ID：15071178
> 
> 赞同：3
> 
> 时间：2013-02-25T16:07:28.477
> 
> 标签：c++, c, c-preprocessor

我想知道面对 C/C++ 代码中的 ifdefs，如何计算标准代码复杂度指标（例如 LOC、McCabe 圈复杂度、Halstead 指标等）。

如果忽略 ifdefs，可能会出现语法错误（甚至类型错误），例如：

1.  #ifdef FOO
2.  for(i = 0; i < x; i++) {
3.  ＃别的
4.  for(i = 0; i < y; i++) {
5.  ＃万一
6.  打印（...）
7.  }

如果忽略第 1、3 和 5 行，则生成的代码将在另一个循环中包含一个循环，并且缺少“}”（因此出现语法错误）。

如果考虑到#ifdefs，那么每个变体都需要一个结果度量（在这种情况下，一个定义 FOO 的情况，另一个用于未定义 FOO 的情况）。然而，这种方法在实践中很容易爆炸。

查看[http://manpages.ubuntu.com/manpages/natty/man1/pmccabe.1.html](http://manpages.ubuntu.com/manpages/natty/man1/pmccabe.1.html)，手册页报告说：

*解析 pmccabe 会忽略所有 cpp 预处理器指令 - 计算代码外观的复杂性，而不是预处理器破坏代码后的复杂性。这一点尤其重要，因为像 getchar(3) 这样简单的东西会扩展成增加复杂性的宏。*

但是，正如我所说，这种方法可能会导致出现代码错误，进而可能会阻碍计算过程或导致错误的值。

工具如何克服这个问题（如果它们完全克服的话）？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:16:14.270

如果您将该构造重写为

```
#ifdef FOO
# define LOOPEND x
#else
# define LOOPEND y
#endif 
```

或类似的东西，应该没有问题。

如果您不想这样做，并且您的复杂性检查器不理解预处理器，您可以在预处理器的输出上运行它，无论是`FOO`定义的还是`FOO`未定义的，然后取它产生的最大值以获得实际复杂度的下限。`gcc -E`使用 GCC，预处理器使用;调用。其他编译器将有类似的选项。

（当然，如果你有很多这种 CPP 魔法，你就会有指数级的可能性。但这就是你为使用预处理器付出的代价；这同样适用于测试。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:18:15.400

许多度量计算器不使用完整或一致的解析器，而是使用（可能）翻译的前几个阶段，然后查找关键字。

因为他们没有像你描述的那样查看完整的语法问题，所以不要阻止他们。然而，它们确实在其他方面变得脆弱，事实上我已经看到 cyclo-2.0 在可靠的生产代码上完全失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:20:22.660

我原以为在一个更大的项目（而不是 20 行“实验”）中`#ifdef`，影响代码实际复杂性的数量和类似的东西会相当少——你希望大多数这类表达式都在对总分影响不大的独立单元。

但是，是的，如果您有一小部分代码，其中包含大量`#ifdef`且复杂的`#ifdef`部分，您可能会遇到很大的错误。手动检查代码将能够告诉您这一点。

# titanium - Titanium Studio 中的 EventListener 出现问题

> ID：15071185
> 
> 赞同：0
> 
> 时间：2013-02-25T16:07:45.067
> 
> 标签：titanium

我在尝试将事件侦听器添加到我的按钮时遇到问题。这是我的代码中的内容。

```
var TabGroup = Titanium.UI.createTabGroup();

var Maps = Titanium.UI.createWindow({
    backgroundImage:'/images/Background2.jpg'
});
var tab1 = Titanium.UI.createTab({
    title: 'Maps',
    icon: '/KS_nav_ui.png',
    window: Maps
});
var scrollView = Titanium.UI.createScrollView({
    contentWidth:'auto',
    contentHeight:'auto',
    top:0,
    showVerticalScrollIndicator:false,
    showHorizontalScrollIndicator:false
});
var view = Ti.UI.createView({
    height:495,
    width:300
});
var btnInnovations = Ti.UI.createButton({
    height:75,
    width:Titanium.UI.FILL,
    backgroundImage:'/images/Innovations.jpg',
    top:60
});
var btnOaks = Ti.UI.createButton({
    height:75,
    width:Titanium.UI.FILL,
    backgroundImage:'/images/Oaks Campus.jpg',
    top:145
});
var btnWHQ = Ti.UI.createButton({
    height:75,
    width:Titanium.UI.FILL,
    backgroundImage:'/images/WHQ.jpg',
    top:230
});
var btnRiverport = Ti.UI.createButton({
    height:75,
    width:Titanium.UI.FILL,
    backgroundImage:'/images/Riverport.jpg',
    top:315
});
var btnContinuous = Ti.UI.createButton({
    height:75,
    width:Titanium.UI.FILL,
    backgroundImage:'/images/Continuous.jpg',
    top:400
});

view.add(btnInnovations);
view.add(btnOaks);
view.add(btnWHQ);
view.add(btnRiverport); 
view.add(btnContinuous);
scrollView.add(view);
Maps.add(scrollView);

TabGroup.addTab(tab1);
TabGroup.open();

btnInnovations.addEventListener('click', function(e){
var InnovationsFloors = Titanium.UI.createWindow({
title: 'Innovations Floors',
url:'InnovationsFloors.js'
});

InnovationsFloors.open({modal : true, backgroundImage:'images/Background1.jpg'}); 
```

我在模拟器中遇到的错误说不能调用未定义的方法打开，如果我取出 Titanium.UI.currentTab.open(InnovationsFloors,{animation:true}); 它甚至不会注册点击...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:02:34.007

首先，您的 Window`url`字段名称中不能有空格，请将`Innovations Floors.js`文件重命名为`InnovationsFloors.js`.

第二部分是不支持您传递给`open()`命令的属性，应该不支持`animated`，`animation`即使如此，您也不应该以这种方式使用它，[我建议您参考这个文档。](http://docs.appcelerator.com/titanium/latest/#!/api/openWindowParams)

而是这样做：

```
Titanium.UI.currentTab.open(InnovationsFloors); 
```

或者试试这个：

```
TabGroup.activeTab.open(InnovationsFloors); 
```

如果这不起作用，则意味着您没有在 TabGroup 上调用 open ，因此没有当前选项卡。

您也可以随时尝试这个并打开一个模式：

```
InnovationsFloors.open({modal : true}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:47:42.783

如果你想用按钮打开一个窗口试试这对我有用

```
// this sets the background color of the master UIView (when there are no windows/tab groups on it)
Titanium.UI.setBackgroundColor('#000');

// create tab group
var tabGroup = Titanium.UI.createTabGroup();

//
// create base UI tab and root window
//
var win1 = Titanium.UI.createWindow({  
    title:'Tab 1',
    backgroundColor:'#fff'
});
var tab1 = Titanium.UI.createTab({  
    icon:'KS_nav_views.png',
    title:'Tab 1',
    window:win1
});

var label1 = Titanium.UI.createLabel({
    color:'#999',
    text:'I am Window 1',
    font:{fontSize:20,fontFamily:'Helvetica Neue'},
    textAlign:'center',
    width:'auto'
});

var button = Titanium.UI.createButton({
   title: 'Hello',
   top: 10,
   width: 100,
   height: 50
});

win1.add(button)
win1.add(label1);

button.addEventListener('click', function(e){
        var win = Titanium.UI.createWindow({  
            title:'New Window',
            backgroundColor:'#fff'
        });
        win.open();
});

tabGroup.addTab(tab1);  

// open tab group
tabGroup.open(); 
```

# .net - 添加多级xml powershell

> ID：15071190
> 
> 赞同：1
> 
> 时间：2013-02-25T16:08:08.553
> 
> 标签：.net, xml, powershell

我正在尝试在 powershell 中创建一些多级 xml。我从代码开始

[添加 XML 子元素](https://stackoverflow.com/questions/10987318/powershell-adding-xml-sub-elements)

我无法弄清楚如何创建第二个子级别。下面是我要创建的 xml 示例。

提前致谢，

戈德斯蒂恩

```
<?xml version="1.0" ?>
<!DOCTYPE svcengine SYSTEM "service.dtd">

<Services>

<Service>
<Name>My service</Name>
<Label>Availability</Label>
<Source>
    <Composition/>
    <ServiceRef>My service ref</ServiceRef>
</Source>
</Service>

</Services> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:17:04.413

如果你有这样的结构：

```
<Services>
  <Service>
    <Name>My service</Name>
    <Label>Availability</Label>
  </Service>
</Services> 
```

并想要添加一个节点`<Source>`，使其看起来像这样：

```
<Services>
  <Service>
    <Name>My service</Name>
    <Label>Availability</Label>
    <Source>
      <Composition/>
      <ServiceRef>My service ref</ServiceRef>
    </Source>
  </Service>
</Services> 
```

你可以这样做：

```
# load XML file
[xml]$doc = Get-Content "C:\service.xml"

# create node <Composition>
$comp = $doc.CreateNode('element', 'Composition', '')

# create node <ServiceRef>
$sref = $doc.CreateNode('element', 'ServiceRef', '')
$desc = $doc.CreateTextNode('My service ref')
$sref.AppendChild($desc)

# create node <Source> and append child nodes <Composition> and <ServiceRef>
$src = $doc.CreateNode('element', 'Source', '')
$src.AppendChild($comp)
$src.AppendChild($sref)

# append node <Source> to node <Service>
$svc = $doc.SelectSingleNode('//Service')
$svc.AppendChild($src)

# save XML file
$doc.Save("C:\service.xml") 
```

**编辑：**`<Service>`您可以使用类似这样的内容（简化）遍历多个节点：

```
$doc.SelectNodes('//Service') | % {
  $comp = $doc.CreateNode('element', 'Composition', '')
  $sref = $doc.CreateNode('element', 'ServiceRef', '')

  $src = $doc.CreateNode('element', 'Source', '')
  $src.AppendChild($comp)
  $src.AppendChild($sref)

  $_.AppendChild($src)
} 
```

# php - 为什么`catch (Exception $e)` 不处理这个`ErrorException`？

> ID：15071191
> 
> 赞同：22
> 
> 时间：2013-02-25T16:08:14.123
> 
> 标签：php, laravel, laravel-4

我得到了`ErrorException`下面的函数调用。怎么会这样？为什么没有抓到？

```
try {
    static::$function_name($url);
}
catch (Exception $e) {} 
```

错误的根本原因是`file_put_contents`调用。我正在使用 Laravel 4 框架，如果它有什么不同的话。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-12-08T00:12:09.703

我怀疑你需要这样写：

```
try {
    static::$function_name($url);
} catch (\Exception $e) {} 
```

注意 Exception 前面的 \。

声明命名空间后，需要在 Exception 之类的类前面指定根命名空间，否则这里的 catch 块会寻找`\Your\Namespace\Exception`，而不仅仅是`\Exception`

# php - 用户输入数据的 PHP 编码标准

> ID：15071194
> 
> 赞同：-6
> 
> 时间：2013-02-25T16:08:30.893
> 
> 标签：php

最近我们面临很多用户输入数据的问题

像

1.  他们使用不同的语言
2.  输入特殊字符，如“'

如何处理所有这些，在一个问题之后..我们面临另一个问题。

或者，是否有任何编码标准或高级教程可用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:11:53.213

如果您希望从数据中挑选出这些字符，您可能需要考虑正则表达式。[在此处](http://php.net/manual/en/function.preg-replace.php)查看文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:18:26.740

在处理用户提供的输入时，您通常应该尝试“转义”所有特殊字符。

如果您发现某些字符对您的系统造成严重破坏，那么您可以像这样删除它们：

```
<?php

$BadChars = array(
"'",    // Single quote - can harm SQL queries
"%",    // Percent sign - can harm SQL queries
"<",    // Less Than - can be used for XSS
">",    // Greater Then - can be used for XSS
";",    // Semicolon - can harm SQL queries
"£" 
);    

// $Input = $_GET['Name'];

$Input = "HELLO'%<;TEST";

foreach ( $BadChars as $Char )
{
    $Input = str_replace($Char, "", $Input);
}

print "Filtered Input: $Input";

?> 
```

您还可以在数据进入数据库之前使用现有函数进行转义，例如[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

# java - 用于将任何文件的内容转换为文本文件的 Java 实用程序。

> ID：15071195
> 
> 赞同：2
> 
> 时间：2013-02-25T16:08:32.937
> 
> 标签：java, apache-poi

我正在寻找一个 java 实用程序，用户可以通过它转换任何类型的文件（pdf、doc、docx、xls、xlsx、csv、rtf、txt）。我们有一个要求，用户可以上传任何类型的文件，我们需要读取文件的内容（仅文本），将其转换并存储在一个对象中。这可以使用 Apachi poi 来完成，但我想知道是否存在任何 java 实用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:25:52.677

您可能对[Apache Tika](http://tika.apache.org/)感兴趣，它包含 Apache POI 和 PDFBox 的功能。从项目描述来看，该工具包：“*使用现有的解析器库从各种文档中检测并提取元数据和结构化文本内容。* ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:12:06.957

我想你不能对每种类型的文件都有某种通用功能。您将需要为每种文件类型实现转换方法。[此链接](http://www.roseindia.net/tutorial/java/itext/convertpdfToTextFile.html)对 PDF 文件有帮助，还会为您提供一个模板来处理您的其他文件类型。

# windows - Windows 8 商店应用程序：在翻转视图控件中使用多个 RichTextColumns

> ID：15071196
> 
> 赞同：1
> 
> 时间：2013-02-25T16:08:45.943
> 
> 标签：windows, xaml, windows-8, windows-store-apps

我试图在翻转视图中以两种语言（并排）显示两列富文本。如何在 RichTextColumns 中创建两列并将它们绑定到两个不同的数据源？

翻转视图控件如下所示：

`FlipView x:Name="flipView" AutomationProperties.AutomationId="ItemsFlipView" AutomationProperties.Name="Item Details" TabIndex="1" Grid.RowSpan="2" ItemsSource="{Binding Source={StaticResource itemsViewSource}}">

```
 <FlipView.ItemContainerStyle>
            <Style TargetType="FlipViewItem">
                <Setter Property="Margin" Value="0,137,0,0"/>
            </Style>
        </FlipView.ItemContainerStyle>

        <FlipView.ItemTemplate>
            <DataTemplate>

                <!--
                    UserControl chosen as the templated item because it supports visual state management
                    Loaded/unloaded events explicitly subscribe to view state updates from the page
                -->
                <UserControl Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates">
                    <ScrollViewer x:Name="scrollViewer" Style="{StaticResource HorizontalScrollViewerStyle}" Grid.Row="1">
                        <Grid>

                        <!-- Content is allowed to flow across as many columns as needed -->
                        <common:RichTextColumns x:Name="richTextColumns" Margin="117,0,117,47">
                            <RichTextBlock x:Name="richTextBlock" Width="560" Style="{StaticResource ItemRichTextStyle}" IsTextSelectionEnabled="False">
                                <Paragraph>
                                    <Run FontSize="26.667" FontWeight="Light" Text="ምዕራፍ "/>
                                    <Run FontSize="26.667" FontWeight="Light" Text="{Binding ChapterNumber }"/>
                                    <LineBreak/>

                                    <!--<Run FontWeight="Normal" Text="{Binding Subtitle}"/>-->
                                </Paragraph>

                                <Paragraph>
                                    <Run FontWeight="SemiLight" Text="{Binding ChapterContent}"/>
                                </Paragraph>

                            </RichTextBlock>

                            <!-- Additional columns are created from this template -->
                            <common:RichTextColumns.ColumnTemplate>
                                <DataTemplate>
                                    <RichTextBlockOverflow Width="560" Margin="80,0,0,0">
                                        <RichTextBlockOverflow.RenderTransform>
                                            <TranslateTransform X="-1" Y="4"/>
                                        </RichTextBlockOverflow.RenderTransform>
                                    </RichTextBlockOverflow>
                                </DataTemplate>
                            </common:RichTextColumns.ColumnTemplate>
                        </common:RichTextColumns>

                        <VisualStateManager.VisualStateGroups>

                            <!-- Visual states reflect the application's view state inside the FlipView -->
                            <VisualStateGroup x:Name="ApplicationViewStates">
                                <VisualState x:Name="FullScreenLandscape"/>
                                <VisualState x:Name="Filled"/>

                                <!-- Respect the narrower 100-pixel margin convention for portrait -->
                                <VisualState x:Name="FullScreenPortrait">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="richTextColumns" Storyboard.TargetProperty="Margin">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="97,0,87,57"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="image" Storyboard.TargetProperty="MaxHeight">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="400"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                                <!-- When snapped, the content is reformatted and scrolls vertically -->
                                <VisualState x:Name="Snapped">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="richTextColumns" Storyboard.TargetProperty="Margin">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="17,0,17,57"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="scrollViewer" Storyboard.TargetProperty="Style">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource VerticalScrollViewerStyle}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="richTextBlock" Storyboard.TargetProperty="Width">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="280"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="image" Storyboard.TargetProperty="MaxHeight">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="160"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        </Grid>
                    </ScrollViewer>
                </UserControl>
            </DataTemplate>
        </FlipView.ItemTemplate>
    </FlipView>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:30:49.430

如果这些列将显示两条单独的信息，你能不能只制作两个单独的richtextcolumns，将它们放在网格内，然后在翻转视图内。这样，您可以将每个 RichTextColumn 绑定到您想要的源。

# html-select - 下拉列表保留最后选择的选项

> ID：15071198
> 
> 赞同：1
> 
> 时间：2013-02-25T16:08:56.113
> 
> 标签：html-select

我在 php 中创建了一个个人资料页面，用户使用 html 下拉列表选择性别。html代码如下：

```
Gender<select name="gender"> 
    <option value=" "> EMPTY </option> 
    <option value="Male">Male</option> 
    <option value="Female">Female</option> 
</select> 
```

用户选择性别后，表单发送并将数据保存到数据库中。问题是如果用户再次访问个人资料页面，下拉列表不会保留用户之前选择的值，而是每次都显示第一个选项值。如何修改它，以便下拉列表显示用户之前输入的选定值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:11:43.400

在正确的选项标签上设置“选定”属性。您必须在交付 HTML 或使用 Javascript 客户端之前在服务器上弄清楚这一点，具体取决于您存储用户选择的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:12:42.930

试试下面...它会帮助你...

```
<option value=" " selected> EMPTY </option> 
```

如果我们`Selected`在选项标签中设置属性...那么它指定在页面加载时应该预先选择一个选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:15:13.770

选择并提交表单后，所选值必须保存在会话变量中。并且当人员再次访问页面时，通过检查会话值将选定属性设置为相应的

# android - Android 模拟位置不适用于谷歌地图

> ID：15071199
> 
> 赞同：2
> 
> 时间：2013-02-25T16:08:55.447
> 
> 标签：android, mocking, maps, location

我创建了一个模拟 gps 位置的 Android 应用程序，它适用于大多数程序，如 igo、waze、osmAnd、GPS 状态等，但不适用于仍显示我所在实际位置的谷歌地图。

我也禁用了 gps 和网络位置。

任何想法为什么会这样？如何解决？谢谢

我使用的代码：

```
public void setLocation(double latitude, double longitude, double altitude, float bearing, float speed){
    String PROVIDER_NAME = LocationManager.GPS_PROVIDER;
    locationManager.addTestProvider(PROVIDER_NAME, false, false, false, false, true, true, true, Criteria.POWER_LOW, Criteria.ACCURACY_FINE);

    locationManager.setTestProviderEnabled(PROVIDER_NAME, true);
    locationManager.setTestProviderStatus(PROVIDER_NAME, LocationProvider.AVAILABLE, null, System.currentTimeMillis());

    Location location = new Location(PROVIDER_NAME);
    location.setLatitude(latitude);
    location.setLongitude(longitude);
    location.setAltitude(altitude);
    location.setBearing(bearing);
    location.setSpeed(speed);   
    location.setTime(System.currentTimeMillis());
    locationManager.setTestProviderLocation(PROVIDER_NAME, location.getLocation());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T01:53:52.330

您应该使用`GoogleMap.setLocationSource(LocationSource source)`为 Android 上最新的 Google Maps SDK 提供随机位置。使用这样的随机位置源：

```
// In your MapFragment implementation or similar
if (BuildConfig.DEBUG)
    map.setLocationSource(new MockLocationSource());

MockLocationSource.java:
public class MockLocationSource implements LocationSource {

    private static final float ACCURACY = 1; // Meters
    private static final int MAX_SPEED = 10; // m/s
    private static final LatLng CENTER = new LatLng(59.91127, 10.70834);
    private static final double DELTA_LAT = 0.0005;
    private static final double DELTA_LON = 0.0005;

    private static final long UPDATE_PERIOD = TimeUnit.SECONDS.toMillis(2);

    private final Handler handler = new Handler();
    private LatLng lastCoordinate = CENTER;
    private OnLocationChangedListener listener;

    private void scheduleNewFix() {
        handler.postDelayed(updateLocationRunnable, UPDATE_PERIOD);
    }

    private final Runnable updateLocationRunnable = new Runnable() {

        @Override
        public void run() {
            Location randomLocation = generateRandomLocation();
            listener.onLocationChanged(randomLocation);
            scheduleNewFix();
        }
    };

    public Location generateRandomLocation() {

        Location location = new Location(getClass().getSimpleName());
        location.setTime(System.currentTimeMillis());
        location.setAccuracy(ACCURACY);
        location.setBearing(randomizer.nextInt(360));
        location.setSpeed(randomizer.nextInt(MAX_SPEED));
        location.setLatitude(lastCoordinate.latitude + scaleOffset(DELTA_LAT));
        location.setLongitude(lastCoordinate.longitude + scaleOffset(DELTA_LON));

        lastCoordinate = new LatLng(location.getLatitude(), location.getLongitude());

        return location;
    }

    private final static Random randomizer = new Random();

    private double scaleOffset(double value) {
        return (randomizer.nextDouble() - 0.5) * value;
    }

    @Override
    public void activate(OnLocationChangedListener locationChangedListener) {
        listener = locationChangedListener;
        scheduleNewFix();
    }

    @Override
    public void deactivate() {
        handler.removeCallbacks(updateLocationRunnable);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T20:58:52.273

谢谢您的帮助。我发现了问题，似乎当其他应用程序不需要时，护目镜需要设置准确性，所以添加行`location.setAccuracy(1);`它解决了问题。

# c# - 混合构造函数集字段和字段初始值设定项

> ID：15071200
> 
> 赞同：3
> 
> 时间：2013-02-25T16:08:55.867
> 
> 标签：c#, oop

在设计类时，是否有关于初始化类字段的指导方针？有两种不同的初始化方法。我可以使用内联字段初始化程序，也可以在构造函数中初始化它们。它变得更加...有趣，当引入静态字段时，可以在定义时，在静态构造函数中或在实例构造函数中初始化字段，并检查该字段是否已设置。当引入工厂时，这变得更加混乱。

**示例 1 - 内联初始化**

```
 public class ExampleOne
    {
        private readonly IDictionary _collection = new Dictionary();

        ...
    } 
```

**示例 2 - 构造函数初始化**

```
 public class ExampleTwo
    {
        private readonly IDictionary _collection;

        public ExampleTwo() 
        {
            _collection = new Dictionary();
        }
        ...
    } 
```

**示例 3 - 静态内联初始化**

```
 public class ExampleThree
    {
        private static readonly IDictionary __collection = new Dictionary();

        ...
    } 
```

**示例 4 - 静态构造函数初始化**

```
 public class ExampleFour
    {
        private static IDictionary __collection;

        static ExampleFour() 
        {
            _collection = new Dictionary();
        }

        ...
    } 
```

**示例 5 - 静态/实例构造函数混合初始化**

```
 public class ExampleFive
    {
        private static readonly IDictionary __collection;
        private static IDictionary __anotherCollection;

        static ExampleFive() 
        {
            _collection = new Dictionary();
        }

        public ExampleFive()
        {
           if( __anotherCollection == null ) 
           {
            __anotherCollection = new Dictionary();
           }
        }

        ...
    } 
```

**示例 6 - 工厂方法**

```
 public class ExampleSix
    {
        private static readonly IDictionary __collection;
        private static IDictionary __anotherCollection;

        static ExampleSix() 
        {
            _collection = new Dictionary();
        }

        public static ExampleSix Create()
        {
           if( __anotherCollection == null ) 
           {
            __anotherCollection = new Dictionary();
           }

           var example = new ExampleSix();
           return example;
        }

        ...
    } 
```

目前，我所拥有的课程倾向于混合所有这些。尽管我试图避免在实例构造函数中设置静态字段。

**示例 7 - 混合**

```
 public class ExampleSeven
    {
        private static readonly IDictionary __collection = new Dictionary();
        private static readonly IDictionary __anotherCollection;
        private static readonly IDictionary __thirdCollection;
        private static IDictionary __fourthCollection;

        static ExampleSeven() 
        {
            __anotherCollection = new Dictionary();
        }

        public ExampleSeven() 
        {
            if( __thirdCollection == null )
            {
               __thirdCollection = new Dictionary();
            }
        }

        public static ExampleSeven Create()
        {
           if( __fourthCollection == null ) 
           {
            __fourthCollection = new Dictionary();
           }

           var example = new ExampleSeven();
           return example;
        }

        ...
    } 
```

我更关心的是，从示例中可以看出，字段是类对象而不是简单的原语。我知道在声明字段时初始化字段会将类标记为`beforeinit`，并且我无法传递`this`到声明时初始化的字段中。我关心的主要是与上述七个例子类似的情况。通过这种方式混合它们，我是否会为任何不可预见的问题做好准备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:32:17.120

通常，是在构造函数中初始化字段还是使用字段初始化器并不重要。但是，关于操作的时间和顺序，您应该注意一些细微之处：

*   实例字段初始化器和实例构造器按以下顺序运行，这可能会令人惊讶：

    *   派生类字段初始值设定项
    *   基类字段初始化器
    *   基类构造函数
    *   派生类构造函数

有关此行为原因的讨论，请参阅 Eric Lippert 的这篇文章：http: [//blogs.msdn.com/b/ericlippert/archive/2008/02/18/why-do-initializers-run-in-the-相反顺序作为构造函数的第二部分.aspx](http://blogs.msdn.com/b/ericlippert/archive/2008/02/18/why-do-initializers-run-in-the-opposite-order-as-constructors-part-two.aspx)

*   类中静态构造函数的存在引入了类型初始化方式的细微变化。我不会在这里详细介绍，但 Jon Skeet 有一篇非常详尽的文章：[http ://csharpindepth.com/Articles/General/Beforefieldinit.aspx](http://csharpindepth.com/Articles/General/Beforefieldinit.aspx)

要回答您的问题，对于应该在哪里初始化字段没有明确的规则。有时，如果初始化很短，则初始化字段“inline”会更自然，但如果初始化很长，它可能应该在构造函数中。有时*必须*在构造函数中初始化字段，因为字段初始化程序不能包含对`this`. 我的代码中经常混合使用这两种样式，到目前为止，我并没有因此而遇到问题。请记住上面提到的执行顺序......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:52:50.067

这个问题不只有一个答案。相反，这取决于您想在现场存储什么样的东西以及您想用它做什么。

首先，问问自己：ExampleX 是否绝对需要该字段中的对象？ExampleX 的所有用例都绝对涉及该领域吗？如果不是，则不应在构造函数中创建它。如果它仅用于一种方法，则应在该方法中创建（或传入）该方法。如果它用在两个以上的方法中，那么这些可能应该在它们自己的类中，即将类分成两个，一个依赖于该字段中的对象，一个不依赖于该字段中的对象。

其次，您真的每次创建 ExampleX 时都需要一个新字典吗？让我们换个例子——它不是字典，而是某种提供服务的对象，设置起来很昂贵，但很容易重用。在这种情况下，您绝对应该传递它而不是创建它 - 如果您创建一个新的，您会浪费资源，并且会使您的程序更复杂且可读性更低，因为您引入了隐藏的依赖项。通过传入对象，您可以在构造函数签名（或方法签名，如果您将其传递给方法）中宣传依赖关系。更不用说使它不可测试或难以测试（在单元测试的意义上）。见[http://misko.hevery.com/2008/09/30/to-new-or-not-to-new/](http://misko.hevery.com/2008/09/30/to-new-or-not-to-new/)

所以，总结一下——你总是需要它吗？这告诉您是在构造函数中还是在其他地方创建/传入对象。它必须是一个新的吗？这将告诉您是创建它还是传递它。

传递东西也让你的代码更加灵活。见[http://www.kevinwilliampang.com/2009/11/07/dependency-injection-for-dummies/](http://www.kevinwilliampang.com/2009/11/07/dependency-injection-for-dummies/)

# xslt - XSLT - 获取最后一个'/'之前的字符串

> ID：15071205
> 
> 赞同：1
> 
> 时间：2013-02-25T16:09:06.790
> 
> 标签：xslt, xslt-2.0

我有例如字符串：

```
 <path> c:/users/xyz/test_files/test.xml </path> 
```

我想得到最后一个'/'之前的字符串，即：

c:/users/xyz/test_files

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:21:40.577

尝试这样的事情：

```
<xsl:variable name="tokens" select="tokenize(.,'/')"/>
<xsl:value-of select="$tokens[not(.=$tokens[last()])]" separator="/"/> 
```

这假设当前上下文是`path`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:40:16.243

```
<xsl:template match="path">
  <xsl:variable name="p" select="string-join(tokenize(., '/')[position() lt last()], '/')"/>
</xsl:template> 
```

应该做。

# google-maps - 在 Objective C 中的谷歌地图上显示多个标记

> ID：15071209
> 
> 赞同：1
> 
> 时间：2013-02-25T16:09:25.633
> 
> 标签：google-maps, google-maps-mobile, google-maps-sdk-ios

如何在 iOS 的 Google 地图上显示多个标记？我使用了以下方法，但没有奏效。

```
for (int i = 0; i < [array count]; i++)
{
     pointsToUse[i] = CLLocationCoordinate2DMake([[[[array objectAtIndex:0]  componentsSeparatedByString:@","] objectAtIndex:0] floatValue],[[[[array objectAtIndex:0]  componentsSeparatedByString:@","] objectAtIndex:1] floatValue]);
     [_map animateToLocation:pointsToUse[i]];
      GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
      options.position = pointsToUse[i];
    [_map animateToLocation:pointsToUse[i]];
    [_map addMarkerWithOptions:options];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:32:37.473

我试过你的代码。这似乎工作正常。将值传递给 pointsToUse 后，只需删除索引 0 处的对象。

```
NSMutableArray *array = [NSMutableArray arrayWithObjects:@"12.981902,80.266333",@"12.982902,80.266363", nil];

CLLocationCoordinate2D pointsToUse[5];

for (int i = 0; i < [array Size]; i++)
{
    pointsToUse[i] = CLLocationCoordinate2DMake([[[[array objectAtIndex:0]  componentsSeparatedByString:@","] objectAtIndex:0] floatValue],[[[[array objectAtIndex:0]  componentsSeparatedByString:@","] objectAtIndex:1] floatValue]);

      [array removeObjectAtIndex:0];

    GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
    options.position = pointsToUse[i];
    [mapView_ animateToLocation:pointsToUse[i]];
    [mapView_ addMarkerWithOptions:options];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T12:38:24.417

尝试这个：

```
-(void)plotMutliplePinsonMap
{
    mapView_ = [[GMSMapView alloc]initWithFrame:CGRectMake(0, 96, 320, 450)];
    for(int i=0;i<[arrTobeShown count];i++)
    {
        double_lat = [[[arrTobeShown objectAtIndex:i]valueForKey:@"latitude"] doubleValue];
        double_long = [[[arrTobeShown objectAtIndex:i]valueForKey:@"longitude"] doubleValue];
        GMSMarker *mkr = [[GMSMarker alloc] init];
        if (double_lat !=0 && double_long!=0) 
        {        
            [mkr setPosition:CLLocationCoordinate2DMake(double_lat, double_long)];
            [mkr setTitle:[[arrTobeShown objectAtIndex:i] valueForKey:@"name"]];
            [mkr setSnippet:[[arrTobeShown objectAtIndex:i] valueForKey:@"address"]];
            [mkr setMap:mapView_];

            GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:double_lat longitude:double_long zoom:5];
        mapView_.camera=camera;
        }
    }
    [self.view addSubview:mapView_];
    [mapView_ setHidden:YES];
    [self.view layoutIfNeeded];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:19:49.903

您正在使用`[array objectAtIndex:0]`（在两个地方），当我认为您可能应该使用`[array objectAtIndex:i]`?

此外，您可能不需要调用`animateToLocation`?

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T14:28:02.337

是的，你们两个都是对的。根据您的建议，我更改了代码并且可以正常工作。但问题是，我设置了缩放并且缩放是固定的。如果这两个位置很远，我无法在一个屏幕上看到这两个位置（我需要捏一下才能看到这两个位置）。如何同时查看两个位置？我的代码如下所示。

```
-(void) displayMapwithPositionfortheArray:(NSMutableArray*) array
{
    CLLocationCoordinate2D firstPoint = CLLocationCoordinate2DMake([[[[array objectAtIndex:0]  componentsSeparatedByString:@","] objectAtIndex:0] floatValue],[[[[array objectAtIndex:0]  componentsSeparatedByString:@","] objectAtIndex:1] floatValue]);
    GMSCameraPosition *currloc = [GMSCameraPosition cameraWithLatitude:firstPoint.latitude
                                                         longitude:firstPoint.longitude
                                                              zoom:8
                                                           bearing:0
                                                      viewingAngle:45];

    _map = [GMSMapView mapWithFrame:CGRectZero camera:currloc];
    _map.myLocationEnabled = YES;
    _map.frame = CGRectMake(0, heightOffset, self.view.frame.size.width, self.view.frame.size.height - heightOffset);
    [self.view addSubview:_map];

    CLLocationCoordinate2D pointsToUse[[array count]];
    for (int i = 0; i < [array count]; i++)
    {
          pointsToUse[i] = CLLocationCoordinate2DMake([[[[array objectAtIndex:i]  componentsSeparatedByString:@","] objectAtIndex:0] floatValue],[[[[array objectAtIndex:i]  componentsSeparatedByString:@","] objectAtIndex:1] floatValue]);

          GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
          options.position = pointsToUse[i];
          [_map addMarkerWithOptions:options];
    }
} 
```

# ios - 尝试取消与已删除实体的关系时，Core Data 崩溃

> ID：15071210
> 
> 赞同：1
> 
> 时间：2013-02-25T16:09:26.197
> 
> 标签：ios, objective-c, core-data

框架讨论：

*   两个托管对象实体，A 和 B
*   A 和 B 彼此具有一对一的反向关系
*   关系的两个方向都有一个 Nullify 删除规则

问题：一段时间后，我正在编组实体 A 的实例，并尝试将关系更改为 newB（一段时间后与 oldB 有关系）（例如 AB = newB），我得到一个核心数据异常：

> CoreData 无法满足“0x1e1515a0 x-coredata://90361082-A433-41A0-9F4E-BA3F032B193D/oldB/p7”的错误

从我的研究和测试中，我收到了这个错误，因为引用的 oldB 实体被删除并且不再可用于核心数据。（我相信）抛出异常是因为 Core Data 试图访问 oldB 以使与 A 的关系无效，但显然不能，因为 oldB 已经消失了。

我不明白我是如何/为什么进入这种状态的，因为当我（在代码执行之前的某个时间）执行**removeObject:** oldB 时，Core Data 应该使关系无效，所以当我执行上述操作时，我希望 AB == nil 已经。

我会说，这似乎在绝大多数时间都正常工作。但是，当这种情况发生时，应用程序将完全无法使用，直到数据库被删除/恢复。

* * *

所以，我希望有几个问题得到回答：

*   为什么会发生这种情况？这是否可能是开发工作的结果（例如，可能在 removeObject:oldB 完成之前杀死一个进程等）在生产中不一定会发生？
*   我有哪些恢复选项？我想我可以使用@try 和@catch 异常处理程序，但我不确定这最终是否会有所不同，因为@catch 处理程序会发生同样的问题，除非我有一些核心数据技巧不知道要“强制杀死”这种关系（我认为这种关系不存在，因为它在技术上会破坏数据图）。
*   在我的数据图中，A 和 B 之间的关系是“松散的”并且并不重要（实际上 B 对象在完成工作后被删除）。因为我有一个独立于 A 的 B 清理过程，我是否最好只使用“无操作”删除策略，这样 Core Data 不会在这些罕见的情况下阻塞？

感谢您提前提供的任何见解！

* * *

更新：

我一直在玩一些@try 和@catch 块。这是我一直在发现的：

```
@try {
 if (A.B.A) // Relationship check. Will throw exception if B is missing
  nil;
 }
@catch {
 [moc deleteObject:A.B];
 [moc save:nil];
 } 
```

在上述情况下，@catch 代码运行，但在保存时，Core Data 会抛出一个注解：

> 注释：修复对象 A 上一对一关系 B 的缺失删除传播

然后我尝试继续执行我的代码，当我再次尝试更改 AB 时，我又回到了错误异常开始的地方。

因此，我尝试将 @catch 块更改为：

```
@catch {
 [moc deleteObject:A.B];
 A.B = nil;
 [moc save:nil];
} 
```

有趣的是，deleteObject 和设置 AB = nil 有效，但是在保存时，会抛出原始异常：

> CoreData 无法满足“0x2009b1e0 x-coredata://90361082-A433-41A0-9F4E-BA3F032B193D/B/p10”的错误

因此，在这种情况下，我似乎无能为力，因为 Core Data 不惜一切代价维护对象图（包括运行应用程序的能力！）。

没有重新初始化整个数据存储，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:31:29.447

我可以通过删除catch 块中的 A 和 B*来*解决这个问题：

```
@try {
 if (A.B.A) // Relationship check. Will throw exception if B is missing
  nil;
 }
@catch {
 [moc deleteObject:A.B];
 [moc deleteObject:A];
 [moc save:nil];
 } 
```

然而，这并不理想，因为 A 很重要（B 不重要）。幸运的是，可以以远低于丢失整个对象图的成本来重新生成 A。为了工作生产代码，我认为这个解决方案是合适的，但并不理想。

仍然会喜欢一个允许保存实体 A 的答案......

# google-maps - PrimeFaces gmap 更改默认视图

> ID：15071211
> 
> 赞同：1
> 
> 时间：2013-02-25T16:09:26.697
> 
> 标签：google-maps, jsf, primefaces

我是使用 primefaces gmap 控件的新手。我尝试将默认视图（卫星）更改为地图视图。但它总是在卫星视图上渲染。我可以使用 mapTypeControl 按钮更改此视图，但我想在向用户显示控件之前更改此视图。我的控制看起来像：

```
<p:gmap   center="#{mapBean.center}" zoom="15" type="hybrid" style="width:100%;height:15em" model="#    {mapBean.model}" widgetVar="M1" />` 
```

和我的豆子：

```
public class MapBackingBean {
private MapModel model = new DefaultMapModel();
private String center="8.989701,-79.516168";
  /**
 * Creates a new instance of MapBackingBean
 */
public MapBackingBean() {
    model.addOverlay(new Marker(new LatLng(8.989701,-79.516168), "Regency Tower"));
}
//getters and setters
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:36:39.627

```
<p:gmap   center="#{mapBean.center}" zoom="15" type="ROADMAP" style="width:100%;height:15em" model="#    {mapBean.model}" widgetVar="M1" /> 
```

将类型从混合（卫星视图）更改为 ROADMAP？（可能需要小写）

# php - 在 Wordpress 中显示 Tumblr 博客，但仅针对特定类别

> ID：15071213
> 
> 赞同：0
> 
> 时间：2013-02-25T16:09:38.583
> 
> 标签：php

总而言之，我有一个 wordpress 博客，但我有一个客户使用 Tumblr 作为他们的博客。我知道有一些 Wordpress 插件可以将 Tumblr 博客导入 Wordpress，但我不想这样做。例如，我希望它能够将 Tumblr 博客拉到“新闻”类别中，然后将它们显示为 Wordpress 博客文章。

有没有人做过这样的事情？有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:35:21.087

我实际上找到了 PHPTumblr，它可以满足我的一切需求：

[https://code.google.com/p/phptumblr/](https://code.google.com/p/phptumblr/)

# java - 我们如何使用 ServletUnit 对转发到 JSP 的 servlet 进行单元测试

> ID：15071214
> 
> 赞同：1
> 
> 时间：2013-02-25T16:09:41.557
> 
> 标签：java, jakarta-ee, servletunit

我有一个将请求/响应转发到 JSP 的 servlet，但我不断收到异常

> junit.framework.AssertionFailedError：抛出异常。com.meterware.httpunit.HttpNotFoundException：HTTP 请求错误：404 java.lang.ClassNotFoundException：org.apache.jasper.servlet.JspServlet [http://localhost/site-search/search-results.jsp] at junit.framework .Assert.fail(Assert.java:47)

因此，我尝试将 JSP 注册到已注册到 Servlet Runner 的模拟 web.xml 中，但随后出现以下异常。

> org.xml.sax.SAXException：节点 <servlet> 没有名为 <servlet-class> 的子节点

在我看来，Servlet Unit 没有办法测试 servlet 是否转发到特定的视图/JSP。即使我尝试使用 <jsp-file> 而不是 <servlet-class> 在 web.xml 中注册 JSP，Servlet Unit 似乎也不喜欢那样。我看到的所有示例都只是输出到 PrintWriter 的简单 servlet。有没有人能够成功测试通过 ServletUnit 转发/重定向到 JSP 的 servlet？

谢谢，

胡安

# eclipse - Eclipse 中的错误：在“联系软件站点”期间发生内部错误，org/eclipse/ecf/core/identity/ID

> ID：15071215
> 
> 赞同：0
> 
> 时间：2013-02-25T16:09:42.717
> 
> 标签：eclipse, java-8

请从您的系统中删除 Java JDK 8 Early Access 或从 JDK 8 更改系统默认值。通常可以使用 Windows 7 中的 Java 控制面板删除系统默认值。但是，对于 JDK 8，由于某些原因，这无法更改默认值。唯一的办法就是卸载。希望 Oracle 将很快改变这种行为。有人可以帮助我如何更改 Java 控制面板中的默认 JDK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:51:08.343

我对使用 Java 控制面板了解不多，但我发现在安装 java.exe 的 JDK8 副本后，javaws.exe 和 javaw.exe 被放置在您的 system32 文件夹中，并覆盖了在您的 PATH 环境变量中设置的内容，这会导致您在标题中描述的错误消息。

我尝试的解决方案是：

备份这些文件并将它们从 system32 文件夹中删除，确保我的 PATH 环境正确设置为我想要的 JDK，然后重新打开 Eclipse，它工作正常。

并更改我的 PATH 环境变量，使 JDK 位于之前：%SystemRoot%\system32;

我已经写了一篇关于此的博客文章，我将在今天晚些时候发布它时进行编辑，但这基本上就是我所做的一切。

这个问题的第一个答案与放置在 system32 中的 java.exe 有关：[How to prevent that java.exe is installed in Windows' system32?](https://stackoverflow.com/questions/8223511/how-to-prevent-that-java-exe-is-installed-in-windows-system32)

编辑：这里是[http://blog.idrsolutions.com/2013/03/why-installing-java-8-may-break-your-system/](http://blog.idrsolutions.com/2013/03/why-installing-java-8-may-break-your-system/)

# java - Java 屏幕为空白

> ID：15071216
> 
> 赞同：0
> 
> 时间：2013-02-25T16:09:58.630
> 
> 标签：java, swing, screen

正如标题所说，我的 java 屏幕一直空白。我希望它显示类形状和两个标签。如果您想查看其他处理绘图线和 xs 的课程，请告诉我。这是我到目前为止所拥有的：

- -编辑 - -

既然你们给了我建议，我已经取得了一些进展。我已经从 Shapes 的paint 方法中删除了一些不错的代码，并将它移到另一个方法或一个新类中以保持它的清洁。Shape's 仍在按页制作空白，但情况正在好转。另外，请不要粘贴代码以获得答案。作为一名学生，我被指示不要复制代码。诸如“创建 3 个 for 循环并生成一个整数”之类的指示被认为是可以接受的。再次感谢你！每个人都非常有帮助！

---编辑--- 在与老师交谈后，我成功地分离了 Shapes 的图形组件并将它们放入 Moves 中。形状知道提出问题并正常工作。我相信我仍然需要对 Moves 进行一些调整才能绘制所有内容，但我相信现在一切都会更好。我会向你展示它现在的样子。再次感谢您帮助我走上正轨！

项目1（或主要）

```
import java.awt.*;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class Project1 implements Runnable{
public static void main(String[] args) {

    SwingUtilities.invokeLater( new Project1());
}

@Override
        public void run(){
    //Asterick a = new Asterick(); 
  //fsu title bar and footer
    JLabel header = new JLabel( "FSU" );
    JLabel footer = new JLabel( "By Jared Scott" );

    //CREATE EVERYTHING
    JFrame frame = new JFrame(); 
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE );

    JPanel panel = new JPanel( new BorderLayout());

    frame.setSize(400, 700);

    Shapes as = new Shapes();
    //Asterick as = new Asterick();
    String message =
                  String.format( "Enter a number from" 
          + " 1-9 to play tick tack toe.\n" + "The order of squares is\n" +
            "1     4     7\n2     5     8\n3     6     9" +
                  "\nThe game ends when one player has three Xs or Os" +
                  " in a row.");

    JOptionPane.showMessageDialog(null, message);

   //this works
   panel.add( header, BorderLayout.NORTH );
   panel.add( footer, BorderLayout.SOUTH ); 

   panel.add(as, BorderLayout.CENTER);
   frame.add( panel );

   frame.setVisible( true );    
}
} 
```

这是形状：

```
public class Shapes extends JPanel{

//put graphics inside of moves
//shapes will send an int for moves to interpret
private int answer;
int[] locationFill = new int[ 9 ];
Moves move;
private int turn = 0;
char x = 'x';
char o = 'o';

public Shapes(){
    setBackground( Color.WHITE );
    ask();    
}

public void ask(){

    String tryAgain =
                  String.format( "Already in use. Please choose again.");

  while( getTurn() <= 9){

        goesNext( getTurn() );

       String input = JOptionPane.showInputDialog( "Choose your square" );
       answer = Integer.parseInt( input );

    //put these in pop up questions

    switch( answer ){    

        case 1: 
           if( !isEmpty( answer ) ){
               JOptionPane.showMessageDialog(null, tryAgain );
            } else if( whatToDraw( answer ) == true ){
                 move = new Moves( answer, x );  
                 locationFill[0] = 1;
                 turn++;
                 won();
            } else {
                move = new Moves( answer, o );    
                locationFill[0] = 2;
                turn++;
                won();
            }
            break;

        case 2:
            if( !isEmpty( answer ) ){
                JOptionPane.showMessageDialog(null, tryAgain );
            }else if( whatToDraw( answer ) == true  ){
                move = new Moves( answer, x );  
                locationFill[1] = 1;
                 turn++;
                 won();
            }else{
                move = new Moves( answer, o );
                locationFill[1] = 2;
                turn++;
                won();
            }
            break;

        case 3:
            if( !isEmpty( answer ) ){
                JOptionPane.showMessageDialog(null, tryAgain );
            }else if( whatToDraw( answer ) == true  ){
                move = new Moves( answer, x );       
                locationFill[2] = 1;
               turn++;
               won();
            }else{
                move = new Moves( answer, o ); 
                locationFill[2] = 2;
                turn++;
                won();
            }
            break;

        case 4:
            if( !isEmpty( answer ) ){
                JOptionPane.showMessageDialog(null, tryAgain );
            }else if( whatToDraw( answer ) == true  ){
                move = new Moves( answer, x );            
                locationFill[3] = 1;
                 turn++;
                 won();
            }else{
                move = new Moves( answer, o ); 
                locationFill[3] = 2;
                turn++;
                won();
            }
            break;

        case 5:
            if( !isEmpty( answer ) ){
                JOptionPane.showMessageDialog(null, tryAgain );
            }else if( whatToDraw( answer ) == true  ){
                move = new Moves( answer, x );        
                locationFill[4] = 1;
                 turn++;
                 won();
            }else{
                move = new Moves( answer, o );
                locationFill[4] = 2;
                turn++;
                won();
            }
            break;

        case 6:
            if( !isEmpty( answer ) ){
                JOptionPane.showMessageDialog(null, tryAgain );
            }else if( whatToDraw( answer ) == true  ){
                move = new Moves( answer, x ); 
                locationFill[5] = 1;
                turn++;
                won();
            }else{
                move = new Moves( answer, o ); 
                locationFill[5] = 2;
                turn++;
                won();
            }
            break;

        case 7:
            if( !isEmpty( answer ) ){
                JOptionPane.showMessageDialog(null, tryAgain );
            }else if( whatToDraw( answer ) == true ){
                move = new Moves( answer, x );
                locationFill[6] = 1;
                turn++;
                won();
            }else{
                move = new Moves( answer, o );     
                locationFill[6] = 2;
                turn++;
                won();
            }
            break;

        case 8:
            if( !isEmpty( answer ) ){
                JOptionPane.showMessageDialog(null, tryAgain );
            }else if( whatToDraw( answer ) == true  ){
                move = new Moves( answer, x ); 
                locationFill[7] = 1;
                turn++;
                won();
            }else{
                move = new Moves( answer, o );   
                locationFill[7] = 2;
                turn++;
                won();
            }
            break;

        case 9:
            if( !isEmpty( answer ) ){
                JOptionPane.showMessageDialog(null, tryAgain );
            }else if( whatToDraw( answer ) == true  ){
                move = new Moves( answer, x );        
                locationFill[8] = 1;
               turn++;
                won();
            }else{
                move = new Moves( answer, o ); 
                locationFill[8] = 2;
                turn++;
                won();
            }
            break;

        default:
            System.out.println("Somethings wrong");
            break;
    }//end switch

    tie(); 

   }//end while
    }

public void goesNext( int turn ){
 String player1 =
                  String.format( "Player1's Turn");
 String player2 =
                  String.format( "Player2's Turn");

 if( turn == 0 || turn % 2 == 0 ){
        JOptionPane.showMessageDialog(null, player1);
 }else{
        JOptionPane.showMessageDialog(null, player2);
 }
}

public boolean isEmpty( int i ){

    boolean answer2 = true;

if( locationFill[ i - 1 ] == 0 ){
    answer2 = true;
}else if( locationFill[ i - 1 ] == 1 || locationFill[ i - 1 ] == 2){
    answer2 = false;
}
    return answer2;
}//end isEmpty

        public void won(){

    String message =
                  String.format( "Three in a row!\nPlayer2 win!");
    String message2 =
                  String.format( "Three in a row!\nPlayer1 win!");

    if( ( locationFill[0] == 1 && locationFill[1] == 1 && 
            locationFill[2] == 1 ) || ( locationFill[3] == 1 &&
            locationFill[4] == 1 &&
            locationFill[5] == 1) || ( locationFill[6] == 1 &&
            locationFill[7] == 1 &&
            locationFill[8] == 1) || ( locationFill[0] == 1 &&
            locationFill[4] == 1 &&
            locationFill[8] == 1) || ( locationFill[1] == 1 &&
            locationFill[4] == 1 &&
            locationFill[7] == 1) || ( locationFill[0] == 1 &&
            locationFill[3] == 1 &&
            locationFill[6] == 1) || ( locationFill[2] == 1 &&
            locationFill[5] == 1 &&
            locationFill[8] == 1) || ( locationFill[6] == 1 &&
            locationFill[4] == 1 &&
            locationFill[2] == 1) ){
    JOptionPane.showMessageDialog(null, message);
    System.exit(0);
    }

    if( ( locationFill[0] == 2 && locationFill[1] == 2 && 
            locationFill[2] == 2 ) || ( locationFill[3] == 2 &&
            locationFill[4] == 2 &&
            locationFill[5] == 2) || ( locationFill[6] == 2 &&
            locationFill[7] == 2 &&
            locationFill[8] == 2) || ( locationFill[0] == 2 &&
            locationFill[4] == 2 &&
            locationFill[8] == 2) || ( locationFill[1] == 2 &&
            locationFill[4] == 2 &&
            locationFill[7] == 2) || ( locationFill[0] == 2 &&
            locationFill[3] == 2 &&
            locationFill[6] == 2) || ( locationFill[2] == 2 &&
            locationFill[5] == 2 &&
            locationFill[8] == 2) || ( locationFill[6] == 2 &&
            locationFill[4] == 2 &&
            locationFill[2] == 2) ){
    JOptionPane.showMessageDialog(null, message2);
    System.exit(0);
}

}//end won

public int getTurn(){
    return turn;
}

  public void tie(){
if( locationFill[0] != 0 && locationFill[1] != 0 &&
            locationFill[2] != 0 && locationFill[3] != 0
            && locationFill[4] != 0 && locationFill[5] != 0
            && locationFill[6] != 0 && locationFill[7] != 0
                    && locationFill[8] != 0 ){
           String tie =
                  String.format( "It's a tie!");
           String gameOver =
                   String.format( "Game Over" );
           JOptionPane.showMessageDialog( null, tie );
           JOptionPane.showMessageDialog( null, gameOver );
           System.exit( 0 );
}
}//end tie

 public boolean whatToDraw( int choice){
        boolean a;
    if( locationFill[ choice - 1 ] == 0 && turn % 2 == 0 ){
        a = true;
    }else{
        a = false;
    }
    return a;
    }

} 
```

这是动作：

```
public class Moves extends JPanel{

Line[] x = new Line[ 18 ];
int choice = 0;
char letter;
public Line[] lines = new Line[ 6 ];

public Moves(){
}

public Moves( int i, char a ){

    letter = a;
    choice = i;

    //for graph
    lines[ 0 ] = new Line(30, 330, 350, 330, Color.BLACK );
    lines[ 1 ] = new Line(30, 225, 350, 225, Color.BLACK );
    lines[ 2 ] = new Line( 250, 130, 250, 440, Color.BLACK );
    lines[ 3 ] = new Line( 125, 130, 125, 440, Color.BLACK );

    //create header and footer
    lines[ 4 ] = new Line( 0, 70, 400, 70, Color.BLACK );
    lines[ 5 ] = new Line( 0, 600, 400, 600, Color.BLACK ); 

    x[0] = new Line( 118, 220, 30, 130, Color.BLACK );//1
    x[1] = new Line( 30, 220, 118, 130, Color.BLACK );
    x[2] = new Line( 118, 320, 30, 230, Color.BLACK );//2                                                         
    x[3] = new Line( 30, 320, 118, 230, Color.BLACK );   
    x[4] = new Line( 122, 440, 34, 335, Color.BLACK );//3                                                         
    x[5] = new Line( 34, 440, 122, 335, Color.BLACK );

    x[6] = new Line( 230, 220, 145, 130, Color.BLACK );//4
    x[7] = new Line( 145, 220, 230, 130, Color.BLACK );
    x[8] = new Line( 230, 320, 145, 230, Color.BLACK );//5                                                          
    x[9] = new Line( 145, 320, 230, 230, Color.BLACK );
    x[10] = new Line( 230, 440, 145, 335, Color.BLACK );//6                                                      
    x[11] = new Line( 145, 440, 230, 335, Color.BLACK );

    x[12] = new Line( 345, 220, 260, 130, Color.BLACK );//7
    x[13] = new Line( 260, 220, 345, 130, Color.BLACK );
    x[14] = new Line( 345, 320, 260, 230, Color.BLACK );//8                                                        
    x[15] = new Line( 260, 320, 345, 230, Color.BLACK );
    x[16] = new Line( 345, 440, 260, 335, Color.BLACK );//9                                                      
    x[17] = new Line( 260, 440, 345, 335, Color.BLACK );
}

@Override
public void paintComponent( Graphics g ){

super.paintComponent( g );

    for( Line line : lines ){
        line.draw( g );
    }
}

//this will draw the Xs
public void drawX1( Graphics g ){
    x[0].draw(g);
    x[1].draw(g);  
}

public void drawX2( Graphics g ){
    x[0].draw(g);
    x[1].draw(g);        
}

public void drawX3( Graphics g ){
    x[0].draw(g);
    x[1].draw(g);       
}

public void drawX4( Graphics g ){
    x[0].draw(g);
    x[1].draw(g);

}

public void drawX5( Graphics g ){
    x[0].draw(g);
    x[1].draw(g);

}

public void drawX6( Graphics g ){
    x[0].draw(g);
    x[1].draw(g);

}

public void drawX7( Graphics g ){
    x[0].draw(g);
    x[1].draw(g);

}

public void drawX8( Graphics g ){
    x[0].draw(g);
    x[1].draw(g);

}

public void drawX9( Graphics g ){
    x[0].draw(g);
    x[1].draw(g);

}
//this will draw the Os
public void drawO1( Graphics g ){
    g.drawOval(40, 135, 75, 75);

}

public void drawO2( Graphics g ){
    g.drawOval(40, 230, 75, 95);

}

public void drawO3( Graphics g ){
    g.drawOval(40, 350, 75, 90);

}

public void drawO4( Graphics g ){
    g.drawOval( 135, 120, 100, 90);

}

public void drawO5( Graphics g ){
    g.drawOval(140, 230, 95, 100);

}

public void drawO6( Graphics g ){
    g.drawOval(150, 350, 80, 90);

}

public void drawO7( Graphics g ){
    g.drawOval( 265, 130, 80, 80);

}

public void drawO8( Graphics g ){
    g.drawOval( 265, 225, 80, 100);

}

public void drawO9( Graphics g ){
    g.drawOval(260, 350, 85, 90);

}

} 
```

和线：

```
import java.awt.Color;
import java.awt.Graphics;

//this will be for the 4 lines needed for tick tac toe
public class Line {

private int x1,
        y1,
        x2,
        y2;
private Color myColor;

//this is for grid
public Line( int x1, int y1, int x2, int y2, Color color ){

    //set coordinants
    this.x1 = x1;
    this.y1 = y1;
    this.x2 = x2;
    this.y2 = y2;
    myColor = color;
}//end constructor

public void draw( Graphics g ){

    g.setColor( myColor );
    g.drawLine( x1, y1, x2, y2 );
}//end draw
}//end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:38:10.667

我做了一些更改以确保您不会遇到黑屏问题。

我注释掉了 Shape 线条，这样我就可以运行测试了。

首先，我添加了对 SwingUtilities 的调用，以便创建 Swing 组件并在 Event Dispatch Thread 上运行。这要求我将 Swing 代码放在 Project1 类中，让 main 方法执行 SwingUtilities 调用。我让类实现 Runnable，因为这是 SwingUtilities 方法调用所需要的。

其次，我添加了一个主 JPanel。最好将 Swing 组件添加到 JPanel，并将 JPanel 添加到 JFrame。添加其他组件时，您将拥有更大的灵活性。

由于 JPanel 的默认布局管理器是 FLowLayout，因此我必须将布局管理器添加到 JPanel 构造函数中。通常，最好让代码的人类读者（包括您自己）指定布局管理器，即使它是默认设置。对于复杂的 GUI，您可能会尝试两个或三个不同的布局管理器来获得您想要的结果。

最后，我注释掉了最后一次 JFrame 重绘。调用 setVisible 方法就足够了。

试试这个代码，看看它是否能解决你的屏幕问题。

```
 import java.awt.BorderLayout;

    import javax.swing.JFrame;
    import javax.swing.JLabel;
    import javax.swing.JOptionPane;
    import javax.swing.JPanel;
    import javax.swing.SwingUtilities;

    public class Project1 implements Runnable {

        public static void main(String[] args) {
            SwingUtilities.invokeLater(new Project1());
        }

        @Override
        public void run() {
            // CREATE EVERYTHING
            JFrame app = new JFrame();
            app.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            JPanel panel = new JPanel(new BorderLayout());

            // fsu title bar and footer
            JLabel header = new JLabel("FSU");
            JLabel footer = new JLabel("By Jared Scott");
            // Shapes shape = new Shapes();
            String message = String.format("Enter a number from"
                    + " 1-9 to play tick tack toe.\n" + "The order of squares is\n"
                    + "1     4     7\n2     5     8\n3     6     9"
                    + "\nThe game ends when one player has three Xs or Os"
                    + " in a row.\nPlayer1 starts first.");
            JOptionPane.showMessageDialog(null, message);

            // app.add( shape );
            panel.add(header, BorderLayout.NORTH);
            panel.add(footer, BorderLayout.SOUTH);

            app.add(panel);
            app.setSize(400, 700);
            app.setVisible(true);

            // app.validate();
    //      app.repaint();
        }

} 
```

# python - ConfigObj 和绝对路径

> ID：15071217
> 
> 赞同：0
> 
> 时间：2013-02-25T16:10:03.713
> 
> 标签：python, path, configobj

在将 configobj 用于 python 时，我遇到了一些路径问题。我想知道是否有办法不在我的帮助文件中使用绝对路径。例如，而不是：

```
self.config = ConfigObj('/home/thisuser/project/common/config.cfg') 
```

我想使用类似的东西：

```
self.config = ConfigObj(smartpath+'/project/common/config.cfg') 
```

**背景：** 我已经将我的配置文件放在一个公共目录中，旁边是一个助手类和一个实用程序类：

```
common/config.cfg
common/helper.py
common/utility.py 
```

助手类有一个方法可以返回配置部分中的值。代码是这样的：

```
from configobj import ConfigObj

class myHelper:

    def __init__(self):
        self.config = ConfigObj('/home/thisuser/project/common/config.cfg')

    def send_minion(self, race, weapon):
        minion = self.config[race][weapon]
        return minion 
```

实用程序文件导入帮助文件，实用程序文件由驻留在我项目的不同文件夹中的一堆不同类调用：

```
from common import myHelper

class myUtility:

    def __init__(self):
        self.minion = myHelper.myHelper()

    def attack_with_minion(self, race, weapon)
        my_minion = self.minion.send_minion(race, weapon)
        #... some common code used by all
        my_minion.login() 
```

以下文件导入实用程序文件并调用该方法：

```
/home/thisuser/project/folder1/forestCastle.py
/home/thisuser/project/folder2/secondLevel/sandCastle.py
/home/thisuser/project/folder3/somewhere/waterCastle.py

self.common.attack_with_minion("ogre", "club") 
```

如果我不使用绝对路径并且我运行 forestCastle.py 它会在**/home/thisuser/project/folder1/**中查找配置，我希望它在**project/common/**中查找它，因为**/home/thisuser**会改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:13:04.163

您可以根据模块文件名计算新的绝对路径：

```
import os.path
from configobj import ConfigObj

BASE = os.path.dirname(os.path.abspath(__file__))

class myHelper:

    def __init__(self):
        self.config = ConfigObj(os.path.join(BASE, 'config.cfg')) 
```

`__file__`是*当前*模块的文件名，所以`helper.py`应该是`/home/thisuser/project/common/helper.py`; `os.path.abspath()`确保它是绝对路径，并`os.path.dirname`删除`/helper.py`文件名，为您留下“当前”目录的绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:13:20.593

我很难追随你真正想要的东西。但是，要以与操作系统无关的方式扩展主目录的路径，您可以使用`os.path.expanduser`：

```
self.config = ConfigObj(os.path.expanduser('~/project/common/config.cfg')) 
```

# javascript - jQuery将文本字段的值从不同的表单复制到另一个表单的文本字段

> ID：15071218
> 
> 赞同：5
> 
> 时间：2013-02-25T16:10:04.883
> 
> 标签：javascript, jquery, html, forms

我有两种形式。

我想将表单 1 中的一个文本字段的值复制到表单 2 中的另一个文本字段中。

文本字段名称和 ID 不同。

我怎样才能做到这一点？

这没有用：

```
document.getElementById('name').value = document.getElementById('user').value; 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T16:13:36.357

如果您要求使用 jQuery，您可以尝试：

```
$("#name").val($("#user").val()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:14:21.510

[http://jsbin.com/exudif/2/](http://jsbin.com/exudif/2/)

```
$(document).ready(function()
{
    $('#btn1').click(function()
    {
         $('#field2').val($('#field1').val());
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:22:24.873

要使用 jquery 获取值，必须以这种方式完成。还要确保您已将 id 指定给输入字段。

像这样：`<input type='text' name='user' id='user' >`

那么只有这段代码才能正常工作

```
$(document).ready(function()
{
    $('#buttonElement').click(function()
    {
         $('#name').val($('#user').val());
    });
}); 
```

# vbscript - 将日期参数传递给 .exe

> ID：15071219
> 
> 赞同：1
> 
> 时间：2013-02-25T16:10:06.397
> 
> 标签：vbscript

使用 .vbs 脚本，我想运行带有日期参数的 .exe。日期参数是“次日日期”。我在下面尝试了这个脚本，但我得到了错误：invalid month in date。

为什么？

```
Set WshShell = CreateObject("WScript.Shell")

NextDayDate = DateAdd("d",1,dtmStart)
WshShell.Run """C:\stmt.exe"" DATE=NextDayDate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:14:52.463

VBScript 不做变量插值。您只需将日期连接到字符串的末尾

```
Set WshShell = CreateObject("WScript.Shell")

NextDayDate = DateAdd("d",1,dtmStart)
WshShell.Run """C:\stmt.exe"" DATE=" & NextDayDate 
```

如果日期中有空格，您可能需要包含引号（尽管这可能取决于您的可执行文件）。

```
WshShell.Run """C:\stmt.exe"" DATE=""" & NextDayDate & """" 
```

# c# - 解析器错误消息：无法加载类型“sometype”

> ID：15071220
> 
> 赞同：32
> 
> 时间：2013-02-25T16:10:09.373
> 
> 标签：c#, asp.net, global-asax

我遇到了一个我暂时无法解决的错误。我想知道是否有人可以帮助确定此错误的原因？我对asp / asax完全陌生。经过一番研究，我认为我得到的错误是由于 Web 应用程序试图使用过时的代码。我正在考虑使用 Visual Studio 和/或整个项目重建 c# 文件。但是，我对 C# 和 asp 完全陌生，想知道是否可以给我一些建议，如果这可以解决问题和/或是否有可能的替代解决方案。

错误信息

```
Parser Error Message: Could not load type 'Inventory1.Global'.

Source Error:   <%@ Application Codebehind="Global.asax.cs" Inherits="Inventory1.Global" %> 
```

**整个**Global.asax 内容：

```
<%@ Application Codebehind="Global.asax.cs" Inherits="Inventory1.Global" %> 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-06-03T05:50:33.010

尝试用CodeFile**替换****CodeBehind**

 *** * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-25T17:01:37.540

> 无法加载类型

表示无法加载类型。（在这种情况下，“类型”指的是`Inventory1.Global`）。类型位于已编译的 DLL 中。因此，DLL 不可用、已过期或不包含`public`具有给定名称的类型。

一些可能的原因是：

*   您没有使用给定名称声明的类型。对于您的示例，您应该具有以下内容：

> ```
> namespace Inventory1 {
>   public class Global {
>   ...
>   }
> } 
> ```

***注意**：避免使用`Inventory1`. 它们暗示存在`Inventory2`,`Inventory3`等，这是不好的做法，因为它们模棱两可且描述性不强。此外，`Global`它非常模糊，可能会与[全局命名空间](http://msdn.microsoft.com/en-us/library/cc713620.aspx)混淆。*

*   确保您的案例匹配（`Inventory1`，而不是`INVENTORY1`。）
*   你还没有编译项目。在 VS 中，重建解决方案。
*   声明该类的程序集存在编译错误，因此相关的 DLL 要么丢失，要么已过期。确保您已解决所有错误。
*   该类未标记为`public`。

如果我不得不猜测，我会把钱花在编译错误上。与 PHP 和其他解释型语言不同，C# 必须经过成功编译才能使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-14T09:17:00.233

我有这个错误，只需要重建项目

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-01T16:37:42.797

我遇到了这个问题，我从[这里](http://forums.asp.net/t/928924.aspx)得到了解决方案，我想分享它。

**解决方法** 清空 bin 文件夹。构建所有依赖的类库并在主项目中引用它们并构建完整的解决方案。

我这样做了，它对我来说就像一个魅力！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-13T17:23:27.370

在四处寻找可能导致这种情况的原因之后，我发现了一些我需要做的事情才能让我的项目运行......

*（注意：您可能不需要做所有这些 - 这是一个个案）*

*   如果您从 IIS Express 到 Local IIS 进行了任何更改，您可能需要将构建配置从 更改`bin/debug`为`bin`. （右键单击解决方案>>属性>>构建>>输出）

*   如果您有 URL 重写，那么您需要[在本地 IIS 上安装 URL 重写](http://www.iis.net/downloads/microsoft/url-rewrite)。

*   导航到您的`applicationhosts.config`文件（通常是类似的地方`C:\Users\username\Documents\IISExpress\config`）并将文件重命名为`applicationhostsOLD.config`.

*   清理并重建您的项目。您可能需要手动清空垃圾箱。

现在你应该可以走了。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-05-01T17:14:47.507

因为它只发生在 IISexpress 上，所以将输出从 bin\Debug\ 更改为 bin\ 为我解决了这个问题。将标签 CodeBehind 更改为 CodeFile 只会产生更多问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-09T19:21:29.010

这发生在我的本地机器上。问题是 IISExpres 配置不正确。如果您在本地环境中遇到此问题（Visual Studio 调试运行），请检查 IIS Express 配置文件。确保您的本地站点/应用程序路径指向正确的位置。

配置文件称为`applicationhost.config`. 它存储在这里：我的文档 > IIS Express > config 。通常（并非总是）这些路径之一将起作用：

*   %userprofile%\documents\iisexpress\config\applicationhost.config
*   %userprofile%\我的文档\iisexpress\config\applicationhost.config

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-27T20:11:05.363

我添加了一个新的构建配置文件，默认为输出， `/bin/[new profile name]`当我运行调试器时，它试图查看`/bin`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-29T22:04:56.493

它在 dll 程序集中找不到必要的文件。重建项目，重建解决方案，然后再试一次。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-26T14:43:49.230

Parser Error Message: Could not load type *_*_

After doing everything suggested in the comments above, with no luck, refreshing (uploading) the contents of /bin to the server worked. The files uploaded to bin are the: dll, pdb and xml. Don't know which one did it.

The problem I had here was induced by renaming a file (*_*.aspx) in Solution Explorer.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-25T16:31:51.227

您可能重命名了某些内容。检查 Global.asax.cs 文件中的类声明，并确保命名空间和类名与asax 文件中的内容**完全匹配。**这包括案例！您能否将 .cs 文件的命名空间和类声明复制/粘贴到此处的帖子中，以便我们进行比较？

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-20T17:21:18.310

我在我们的基础项目中修复了我的命名空间，然后我开始在另一个引用它的项目上看到这个错误。我不得不删除对 Base Project 的引用并重新添加它，然后它又开始工作了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-20T16:29:58.910

重建/重新发布我的项目/解决方案到服务器对我没有任何帮助，我怀疑这会帮助很多人摆脱这种困境。对我来说，我做了一些事情来解决这个问题，最终让我摆脱了这个“洞”。

我一直在尝试在网站上使用绑定，但这不起作用。当我得到 OP 看到的解析器错误时，我尝试使用`http://localhost/Report.aspx`（这是我的主页，我选择不调用`Default.aspx`- 我稍后将使用名称更新“默认文档”部分）调用该站点。所以我尝试了一些事情：

我停止了旧项目的网站并构建了另一个简单的 Web 项目，它在页面上有“你好”和一个标签，没有别的。我在 Page_Load 中有一行用“world！”填充标签的 Text 属性，只是为了确保该部分正常工作。我在 80 端口上创建了一个新网站，并将我网站的发布内容传输到服务器。因此，即使我在服务器上安装了 .NET 4.5（并且从 4.0 目录运行了 aspnet_regiis -i 命令）并且我用于这个新项目的 IIS 中的应用程序池设置为 4.0，浏览器仍然抱怨web.config 有一个`targetFramework=4.5.2`其中，这是 Visual Studio 2015 的默认框架。所以我安装了 .NET 4.6 (NDP46-KB3045557-x86-x64-AllOS-ENU.exe)，重新启动服务器，然后我的简单站点就可以工作了。于是我删除了这个站点——我想做的只是证明我的安装步骤是准确的，并且服务器可以运行一个站点。

于是我又回到了我原来的项目/网站——我删除并重新创建了网站。我将应用程序池放入我最初为此创建的那个，我确保它运行的是 .NET 4.0。完成此操作后，我导航到我的站点，并且在使用`http://localhost/Report.aspx`. 因此，在我看来，这是您使用的 .NET Framework 版本的原因。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-28T14:13:08.837

如果您刚刚添加了新的 aspx 文件，请重建它所在的项目。问题来自您的代码隐藏文件，该文件目前未编译，因此您想要访问当前不存在的较新页面编译项目dll

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-08T11:27:19.703

试试这个它肯定会工作： - 解析错误：

可能是你的类名与网络表单名不匹配

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-05-29T12:58:55.303

请检查所有地方的命名空间和类名，在一种情况下，一名团队成员更改了命名空间，而我在 .aspx 文件中使用旧命名空间。这引起了问题。我更新了命名空间，它开始工作了。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-10-21T10:42:04.197

请尝试将您的项目作为项目/解决方案打开，很可能它会解决错误。此类错误*无法加载类型....*当我们尝试将项目打开为网站时发生。

我试图打开我的项目作为解决方案，它解决了我的问题。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-06-07T08:32:31.137

重命名 aspx 页面后，我遇到了同样的问题，Visual Studio 将其重命名但删除了命名空间。确保 Inherits 属性包含完全限定名称，包括命名空间。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-10-04T19:13:14.347

我尝试了上面列出的所有解决方案，但都没有奏效。我终于创建了一个新的网页（webform）并将所有代码（cs和aspx文件）从旧网页复制到其中，删除旧的cs和aspx文件，重新编译，现在我又开始营业了。我知道这没有任何意义。它不应该重要，但它起作用了。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-12-07T22:36:46.237

我今天刚收到这个错误。事实证明，这是因为我错误地将项目文件还原为不再包含该页面的旧版本。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-06-22T02:20:39.237

我在远程服务器上遇到了这个问题，但在我的本地服务器上没有。在尝试了一切但没有任何工作之后，我终于解决了它。我的域名指向另一个域下的目录。我最初是在 Visual Studio 中独立构建网站作为自己的项目。无论我做什么，它都不再起作用了。所以我将它移动到项目内部的主域名文件夹中，并将其作为主项目的一部分上传。

例如，我说域名 AAA.com 拥有自己的网站。然后我还有指向 AAA.com 主目录下的目录的 BBB.com。最初我为 AAA.com 和 BBB.com 有单独的 VS 项目，但那不再起作用了。因此，我不得不将 BBB.com 的所有文件移至 AAA.com 项目，并将其设置为与远程服务器上显示的完全一样。出于某种原因，这行得通。**

# apache - Apache设置，多虚拟主机多服务器名相同目录

> ID：15071224
> 
> 赞同：0
> 
> 时间：2013-02-25T16:10:16.617
> 
> 标签：apache, subdomain

我想知道是否可以使用相同的块为一个虚拟主机设置不同的服务器名称。我有一个可通过 www.extranet.com 访问的应用程序，我想通过任何子域（如 www.exemple.extranet.com）访问它，而无需全部声明。

我可以使用服务器别名，但我需要在浏览器上保留原始 URI。

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:14:32.603

可能最好的方法是使用重写规则。例如：

```
RewriteEngine on
RewriteCond %{HTTP_HOST}^mydomain\.com [NC]
RewriteRule ^/(.*)$ http://www.mydomain.com [r=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T14:11:50.423

这是`ServerAlias`. vhost 不仅响应es `Servername`，还响应所有`ServerAlias`es。您唯一需要“声明”的是该虚拟主机回答的主机列表。

```
ServerName example.net
ServerAlias www.example.net www.subdomain.example.net anothersubdomain.example.net 
```

浏览器中的主机名将保持不变。

除非你对它做些什么`RewriteRules`，但你的目标是不改变它。所以默认行为应该适合你。

# mysql - MySQL：在搜索中组合多个表

> ID：15071227
> 
> 赞同：0
> 
> 时间：2013-02-25T16:10:25.363
> 
> 标签：mysql

我有一些 SQL 可以搜索网站的内容表并根据相关性返回结果：

```
SELECT *, 
( (1.3 * (MATCH(strTitle) AGAINST ('+query+string' IN BOOLEAN MODE))) + (0.6 * (MATCH(txtContent) AGAINST ('+query+string' IN BOOLEAN MODE)))) AS relevance 
FROM content 
WHERE (MATCH(strTitle,txtContent) AGAINST ('+query+string' IN BOOLEAN MODE) ) 
ORDER BY relevance DESC 
```

我需要扩展它以包括其他 2 个表。

我需要搜索表 trade_members 的 2 个字段：

> 公司名称 | 联系人姓名

和表格新闻的2个字段：

> 新闻标题 | 新闻内容

并一举将结果按相关性排序。我怎样才能将这些表格合并到我的结果中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:03:36.680

解决方案是三个选择的 UNION。但让我们先剖析一下。

到目前为止你有

```
SELECT *, {formula} AS relevance FROM content WHERE {cond} ORDER BY relevance DESC 
```

您现在需要两个额外的选择：

```
SELECT *, {formula} AS relevance FROM trade_members WHERE {cond} ORDER BY relevance DESC
SELECT *, {formula} AS relevance FROM news WHERE {cond} ORDER BY relevance DESC 
```

如果您分别运行这三个语句，您会看到它们返回不同的列。然后，您必须统一这些列。如果没有关于表结构的更多细节，我只能给你一个暗示可能是什么样子的。

```
SELECT 'content' as type, contentID as id, strTitle     as title, txtContent   as content, {formula} AS relevance FROM content WHERE {cond} ORDER BY relevance DESC
SELECT 'member'  as type, memberID  as id, company_name as title, contact_name as content, {formula} AS relevance FROM trade_members WHERE {cond} ORDER BY relevance DESC
SELECT 'news'    as type, newsID    as id, news_title   as title, news_content as content, {formula} AS relevance FROM news WHERE {cond} ORDER BY relevance DESC 
```

现在所有三个选择应该给你一个相似的结果 - 更重要的是：你应该看到所有三个相同的列名，并且每一行应该允许你识别它代表数据库中的哪些数据，例如：这是内容 17，即公司 33，即新闻 1776。

现在您可以对所有三个进行联合：

```
(1st select) UNION (2nd select) UNION (3rd select) ORDER BY relevance DESC 
```

但是请注意，这可能会很慢，因为您实际上正在创建**四个**需要对文件进行排序的临时表......您可以尝试摆脱三个基本选择的顺序如何影响性能 - 因为它们'实际上并不需要。

# hibernate - Hibernate JPA - 如何获取映射到单列的类属性的路径？

> ID：15071230
> 
> 赞同：1
> 
> 时间：2013-02-25T16:10:41.470
> 
> 标签：hibernate, jpa, criteria-api, custom-type

我正在使用 JPA。我有具有特定属性的 java 实体类 - 映射在单列上的类：

```
@Entity
MyClass{

    @Column(length = 6, nullable = true)
    @Type(type = "mypackage.MyInnerClassHibernateType")
    @Mergable
    private MyInnerClass myProperty;

    ...

} 
```

MyInnerClass 类很简单，只包含一个字符串和几个方法：

```
public class MyInnerClass{

    private String value;

    ...
} 
```

我对建筑标准有疑问。假设我有 Join<?,MyClass> jMyClass，我需要 Path<String> 来赋值，所以我可以使用 builder.like(...) 来比较它。

怎么做？

```
Path<String> path = jMyClass.get("myProperty"); 
```

给我：*参数值与预期类型不匹配*，并且

```
Path<String> path = jMyClass.get("myProperty").get("value"); 
```

给我：*非法尝试取消引用路径源 [null]*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T11:25:50.620

那是做不到的，因为最终我们将针对数据库运行 SQL 查询。数据库不知道存储到`myProperty`字段名为 的 is 对象的数据`value`。

通常，Java 编程语言的其他结构也不能在 SQL 查询中使用 - 即使查询是通过 Criteria API 构造的。

# git - 查看不同 git 分支上文件的任何更改

> ID：15071232
> 
> 赞同：0
> 
> 时间：2013-02-25T16:10:50.817
> 
> 标签：git, branch

我确信我已经在不同的分支中编写了一种方法，但不是当前分支。有没有办法查看不同分支中文件的所有更改，最好是忽略合并到当前分支的分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:31:44.490

要查看两个分支之间文件的所有更改，请执行以下操作：

```
git diff --stat <branch1> <branch2> 
```

然后，如果您看到在这两个分支之间发生更改的文件，请执行以下操作：

```
git diff <branch1> <branch2> -- /path/to/file 
```

如果这还不够，请告诉我。

更新：看来这可能与“[如何在 Git 分支中搜索文件或目录？](https://stackoverflow.com/questions/372506/how-can-i-search-git-branches-for-a-file-or-directory) ”重复。

# android - 使用弹簧忽略杰克逊中的无效值

> ID：15071236
> 
> 赞同：3
> 
> 时间：2013-02-25T16:11:06.397
> 
> 标签：android, json, spring, date, jackson

我使用 Spring 框架从 GET 请求中接收 JSON。一切都很好，直到在数据库中输入了错误的值并且发生了这种情况：

> 02-25 14:46:04.035：E/AndroidRuntime(12271)：org.springframework.http.converter.HttpMessageNotReadableException：无法读取 JSON：无法从字符串值“-3600”构造 java.util.Date 的实例：不是有效的表示（错误：无法解析日期值'-3600'：无法解析日期“-3600”：与任何标准形式不兼容（“yyyy-MM-dd'T'HH:mm:ss.SSSZ” , "yyyy-MM-dd'T'HH:mm:ss.SSS'Z'", "EEE, dd MMM yyyy HH:mm:ss zzz", "yyyy-MM-dd"))

我如何设置杰克逊忽略不可读/可解析的值？我宁愿有 null 左右，也不愿我的完整 json 解析失败......

这是我尝试解析的对象，如您所见，我试图在代码中忽略带有 jsonignoreproperties 的属性。

收据：

```
public class Receipt {

    public String categories;

    @JsonProperty("expiration_date")
    public Date expirationDate;

    public String image1;

    public String image2;
(..  more properties, getters and setters ..) 
```

以及我如何尝试解析：

```
RestTemplate restTemplate = new RestTemplate();

    // instellen dat de converter ongedefineerde parameters negeert
    HttpMessageConverter customconver = new MappingJackson2HttpMessageConverter();
    ((MappingJackson2HttpMessageConverter) customconver).getObjectMapper().configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false); //here the ignore unknown

    restTemplate.getMessageConverters().add(customconver);
    restTemplate.getMessageConverters().add(new StringHttpMessageConverter());
    try {
    // GET Request
    ResponseEntity<ReceiptMessage> response = restTemplate.exchange(urlPath, HttpMethod.GET,requestEntity,ReceiptMessage.class); 
```

请记住，在 -3600 值之前，我的解析器工作正常，所以没有问题。

有没有办法忽略这些错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-17T13:54:18.213

`ObjectMapper`被叫上有一个设置`WRITE_DATES_AS_TIMESTAMPS`。这会导致日期被序列化为 long 而不是字符串，因此禁用它以获取字符串。您绝对应该阅读以下内容：[http ://wiki.fasterxml.com/JacksonFAQDateHandling](http://wiki.fasterxml.com/JacksonFAQDateHandling)

如果您不想这样做，要基于某些逻辑忽略一个字段，只需为需要很长时间的日期字段添加一个设置器并自己解析它。您可能需要对其进行注释，`@JsonSetter("expiration_date")`以便杰克逊知道将其传递到那里。

最后，Java 日期/日历 API 通常被认为是完全可怕的，应尽可能避免使用。如果您使用的是 Java 8，那么新的日期/时间 API 会更好。如果您是 Java 8 之前的版本，请使用[JodaTime](http://www.joda.org/joda-time/)。甚至还有一个特殊的 Jackson 模块来处理它。

# hibernate - JSE 中带有 JPA 的 EntityManager ThreadLocal 模式

> ID：15071238
> 
> 赞同：13
> 
> 时间：2013-02-25T16:11:11.310
> 
> 标签：hibernate, thread-safety, struts, entity, jpa-2.0

我正在使用 Struts 1.3 + JPA（使用 Hibernate 作为持久性提供者）开发一个简单的“书店”项目。我不能切换到 Spring 或任何其他更复杂的开发环境（例如，Jboss），也不能使用任何特定于 Hibernate 的技术（例如，`Session`类）。

鉴于我在 JSE 环境中，我需要明确管理整个 EntityManager 的生命周期。

`Book`实体定义如下：

```
@Entity
public class Book {

@Id private String isbn;
private String title;
private Date publishDate;

    // Getters and Setters
} 
```

我定义了三个`Action`类，它们分别负责检索所有书籍实例、通过 ISBN 检索单个书籍实例以及将分离的书籍合并到数据库中。

为了增加业务逻辑代码和数据访问代码之间的关注点分离，我引入了一个简单的`BookDAO`对象，它负责执行 CRUD 操作。理想情况下，所有与数据访问相关的调用都应该委托给持久层。例如，`ListBookAction`定义如下：

```
public class ListBookAction extends Action {

    private BookDAO dao = new BookDAO();

    @Override
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {

        // Retrieve all the books
        List<Book> books = dao.findAll();

        // Save the result set
        request.setAttribute("books", books);

        // Forward to the view
        return mapping.findForward("booklist");
    }

} 
```

BookDAO 对象需要访问一个`EntityManager`实例才能执行任何操作。鉴于这`EntityManger`不是线程安全的，我引入了一个名为的帮助类`BookUnitSession`，它将 EntityManager 封装在一个`ThreadLocal`变量中：

```
public class BookUnitSession {

    private static EntityManagerFactory emf = Persistence.createEntityManagerFactory("BookStoreUnit");
    private static final ThreadLocal<EntityManager> tl = new ThreadLocal<EntityManager>();

    public static EntityManager getEntityManager() {
        EntityManager em = tl.get();

        if (em == null) {
            em = emf.createEntityManager();
            tl.set(em);
        }
        return em;
    }

} 
```

一切似乎都有效，但我仍然有些担心。即：

1.  这个解决方案是最好的吗？在这种情况下，最佳做法是什么？
2.  我仍然需要明确关闭 EntityManager 和 EntityManagerFactory。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-01T14:15:19.443

在过去的几天里，我设计了一个可能的解决方案。我试图用这个`BookUnitSession`类构建的实际上是这个`EntityManagerHelper`类：

```
public class EntityManagerHelper {

    private static final EntityManagerFactory emf; 
    private static final ThreadLocal<EntityManager> threadLocal;

    static {
        emf = Persistence.createEntityManagerFactory("BookStoreUnit");      
        threadLocal = new ThreadLocal<EntityManager>();
    }

    public static EntityManager getEntityManager() {
        EntityManager em = threadLocal.get();

        if (em == null) {
            em = emf.createEntityManager();
            threadLocal.set(em);
        }
        return em;
    }

    public static void closeEntityManager() {
        EntityManager em = threadLocal.get();
        if (em != null) {
            em.close();
            threadLocal.set(null);
        }
    }

    public static void closeEntityManagerFactory() {
        emf.close();
    }

    public static void beginTransaction() {
        getEntityManager().getTransaction().begin();
    }

    public static void rollback() {
        getEntityManager().getTransaction().rollback();
    }

    public static void commit() {
        getEntityManager().getTransaction().commit();
    } 
} 
```

这样的类确保每个线程（即每个请求）都将获得自己的`EntityManager`实例。因此，每个 DAO 对象都可以`EntityManager`通过调用`EntityManagerHelper.getEntityManager()`

根据每个请求的会话模式，每个请求都必须打开和关闭自己的`EntityManager`实例，该实例将负责将所需的工作单元封装在事务中。这可以通过实现为 a 的拦截过滤器来完成`ServletFilter`：

```
public class EntityManagerInterceptor implements Filter {

    @Override
    public void destroy() {}

    @Override
    public void init(FilterConfig fc) throws ServletException {}

    @Override
    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain) throws IOException, ServletException {

            try {
                EntityManagerHelper.beginTransaction();
                chain.doFilter(req, res);
                EntityManagerHelper.commit();
            } catch (RuntimeException e) {

                if ( EntityManagerHelper.getEntityManager() != null && EntityManagerHelper.getEntityManager().isOpen()) 
                    EntityManagerHelper.rollback();
                throw e;

            } finally {
                EntityManagerHelper.closeEntityManager();
            }
    }
} 
```

这种方法还允许视图（例如，JSP 页面）获取实体的字段，即使它们已经被延迟初始化（在视图中打开会话模式）。在 JSE 环境中，`EntityManagerFactory`需要在 servlet 容器关闭时显式关闭。这可以通过使用`ServletContextListener`对象来完成：

```
public class EntityManagerFactoryListener implements ServletContextListener {

    @Override
    public void contextDestroyed(ServletContextEvent e) {
        EntityManagerHelper.closeEntityManagerFactory();
    }

    @Override
    public void contextInitialized(ServletContextEvent e) {}

} 
```

`web.xml`部署描述符：

```
<listener>
  <description>EntityManagerFactory Listener</description>
  <listener-class>package.EntityManagerFactoryListener</listener-class>
</listener>

<filter>
  <filter-name>interceptor</filter-name>
  <filter-class>package.EntityManagerInterceptor</filter-class>
</filter>

<filter-mapping>
  <filter-name>interceptor</filter-name>
  <url-pattern>*.do</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T05:12:20.253

我在 Github 中创建的[ScopedEntityManager辅助工具使用了类似的技术。](https://github.com/Murmur/ScopedEntityManager/blob/master/src/es/claro/persistence/ScopedServletListener.java)我没有选择请求过滤器，而是选择了 ServletRequestListener 进行生命周期管理。此外，我没有使用 threadlocal，因为如果不仔细编程，它们会在 J2EE 容器中出现内存泄漏的习惯。Tomcat 确实有一些技巧可以对某些人为错误进行故障保护。

# java - 无法识别同一包中的代码

> ID：15071243
> 
> 赞同：0
> 
> 时间：2013-02-25T16:11:31.090
> 
> 标签：java, netbeans, package

我正在使用带有 Java SE 的 NetBeans 6.9.1。

我正在开发一个名为 Autocorrect 的项目，其中包含 2 个文件夹、src 和测试中的代码。为了访问私有字段和方法，我试图将我的测试文件与我的源文件放在同一个包中：

```
edu.brown.cs32.dtadams.<package> 
```

例子：

```
package edu.brown.cs32.dtadams.trie; 

import org.junit.After; 
import org.junit.Before; 
import org.junit.Test; 
import static org.junit.Assert.*; 
import java.util.List; 

/* A generic class for testing methods in the "edu.brown.cs32.dtadams.trie" package 
 * 
 * @author Dominic Adams 
 * @version 1.0 2/13/13 
 */ 
public class TrieTest { 

...[TESTS]... 
} 
```

有人告诉我，即使 TrieTest 与它所在的包的其余部分位于不同的根文件夹中，NetBeans 也应该将其识别为在同一个文件夹中。但是，TrieTest 似乎无法识别其自身包中的任何文件。当我添加

```
"import edu.brown.cs32.dtadams.SQTrie" 
```

对于进口，我得到了这两个错误：

```
- cannot find symbol: ...[info]... 

- Import From The Same Package 
```

因此 TrieTest 识别出它位于与 SQTrie 同名的包中，但 NetBeans 并不等同于这两个包。

有谁知道什么可能导致这个问题？或者有关 NetBeans 如何跨多个文件夹处理包的更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:16:57.340

要限制对同一包的方法访问，请使用[包私有访问修饰符](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html) ，这意味着在您的方法前面不放置**任何内容（没有私有/公共/受保护）。**Private 更强大，并将使用限制在类本身。此访问修饰符也经常用于单元测试，以避免过度暴露测试方法。

# c# - 如何声明一个事件是强制性的

> ID：15071246
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:11:37.783
> 
> 标签：c#, .net, events

我有一个用户控件，它具有在每次右键单击时显示的上下文菜单条。当用户在此菜单上选择一个项目时，我必须将此信息传递给父控件，以便它可以根据此做出反应。

所以我需要家长强制订阅这个事件。有没有办法说出来？

如果没有办法做到这一点，我应该抛出异常还是只检查（事件处理程序的）空值并且什么都不做？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:13:29.950

无法在编译时强制执行此操作 - 这意味着 .NET 框架/C# 语言中没有任何内容可以在编译时执行静态检查以确保在您的代码中实现此逻辑。

在运行时，您可以执行必要的验证。例如，您可以检查委托的调用列表以确保父级在该列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:47:18.240

您可以为您的用户控件创建一个特定的构造函数，以防止实例化，除非给出事件处理程序，像这样。

```
public partial class MyUserControl : UserControl {
    public MyUserControl (ToolStripItemClickedEventHandler handler) {
        InitializeComponent ();
        myContextMenuStrip.ItemClicked += handler;
    }
} 
```

但请注意：这不适用于 Visual Studio 的表单设计器，因为表单设计器通常需要无参数的构造函数。相反，您需要从代码手动创建控件实例。

# jquery - jquery -- 更改 HTML 表格 scollbar 偏移量

> ID：15071256
> 
> 赞同：0
> 
> 时间：2013-02-25T16:12:06.257
> 
> 标签：jquery, html, scrollbar, offset, keyup

有没有办法用 jQuery 设置 HTML 表格的滚动条偏移量？

在自动填充我的表（通过附加行）的 keyup 事件之后，我想将滚动条偏移设置到顶部。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:19:28.777

活动后使用

```
 $('#element').scrollTop(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:53:41.427

我正在使用[http://www.farinspace.com/jquery-scrollable-table-plugin/](http://www.farinspace.com/jquery-scrollable-table-plugin/)

$('.tablescroll_wrapper').scrollTop(0);

成功了。谢谢 ;）

# matplotlib - 绘制误差线（百分位）

> ID：15071259
> 
> 赞同：1
> 
> 时间：2013-02-25T16:12:14.863
> 
> 标签：matplotlib, percentile

我对python很陌生，我需要一些帮助。我想在我的绘图上绘制相当于 1sigma 标准差的误差条作为分布的第 16 和第 84 个百分位值。我试过（使用matplotlib）：

```
err=np.std(x) 
```

但它只是给了我标准偏差。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:21:07.853

如果你想要垂直误差线

```
 ax = plt.gca()
 ax.errorbar(x, y, yerr=np.vstack([error_low, error_high]))
 plt.draw() 
```

其中`error_low`和`error_high`是长度相同的一维序列 a`x`和`y`。误差线在`y[i] - error_low[i]`和处绘制`y[i] + error_high[i]`。

`matplotlib`只是画出你告诉它的东西，提供语义是你的工作。

[`errorbar`文件](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.errorbar)

# json - getjson 与 jquery mobile 从 json 文件格式化为列表列表

> ID：15071263
> 
> 赞同：0
> 
> 时间：2013-02-25T16:12:33.210
> 
> 标签：json, jquery-mobile

我在 Slackware 上运行 nagios，我正在使用`mklivestatus`它来获取主机的 json 输出。文件格式如下

```
 [["localhost","127.0.0.1",0]] 
```

我如何使用`$.getJSON()`来获取值并将它们附加到 html 页面中？或者有没有办法将 json 文件更改为这种格式：

```
{["host_name":localhost","host_ip":"127.0.0.1","status":0]} 
```

使用上述格式，我正在使用此代码并且工作正常

```
<script>
    $.getJSON('status.json', function(data) {
        var output = '';

        $.each(data, function(index, value){

            output += '<option value="'+value.host_name+'">'+value.host_name+' ('+value.status+')</option>';

        });

        $('#page').html(output);

    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:48:37.137

有几个问题：

1.  最重要`[["localhost","127.0.0.1",0]]`的是一个数组数组，所以把它当作一个数组来对待。而不是`value.host_name`使用 index 来访问它的 members `value[0]`。
2.  使用适当的事件 jQM 处理程序（例如`pageinit`）
3.  而且我猜您想将`<option>`s插入`select`元素，而不是页面。

现在，鉴于您有以下标记

```
<div data-role="page" id="page">
    <div data-role="content">    
        <select id="select1">
        </select>
    </div>
</div> 
```

你像这样填充你的选择菜单

```
$(document).on("pageinit", "#page", function(){
    $.getJSON("status.json", function(data){
        var output = '';
        $.each(data, function(index, value){
            output += '<option value="'+value[0]+'">'+value[1]+' ('+value[2]+')</option>';
        });
        $('#select1').html(output);
    });
}); 
```

**PS** BTW 这是无效的 JSON

```
{["host_name":localhost","host_ip":"127.0.0.1","status":0]} 
```

它应该是

```
[{"host_name":localhost","host_ip":"127.0.0.1","status":0}] 
```

# html - html元素使整个网络应用程序可选择？

> ID：15071267
> 
> 赞同：0
> 
> 时间：2013-02-25T16:12:39.697
> 
> 标签：html, css, firefox, textselection

我将大部分网络应用程序设置为不可选择。以 div 为例：

```
div {
    -webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
} 
```

令人惊奇的是，我仍然可以通过从左边缘开始选择来选择大部分页面——DOM 检查器告诉我，我在任何 DOM 元素本身*之外*进行选择，并且从顶级 HTML 元素内部进行选择。我试着愚蠢并将其设置为：

```
html {
    -webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
} 
```

...没有产生任何效果。我在这里是一个完美主义者，但在这一点上我只是好奇——你怎么能完全禁用它？身体已经是 100% 的宽度。我不明白为什么我可以在外面点击。

此外，这只发生在 Firefox 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-15T04:50:24.543

将 div 作为整体包装器使用绝对定位，左上和右下为负，例如 -150 上 -150 下，然后用 120 120 填充内容，使用滚动顶部观察器或添加滑动标题，额外的 60 空间可以折叠时用作默认动画（将填充切换到边距

它应该可以工作，但如果您不使用扩展区域进行标题分层或图像，可能会让人头疼。

希望能帮助到你。

真挚地

杰森

# scala - 遍历案例对象列表替换 NaN 并将其写回 Scala

> ID：15071268
> 
> 赞同：0
> 
> 时间：2013-02-25T16:12:39.827
> 
> 标签：scala, pattern-matching, case-class, type-mismatch

我有一个`List`case 对象，其中一些值为`NaN`s，我必须将它们替换为`0.0`. 到目前为止，我尝试了这段代码：

```
var systemInformation: List[SystemInformation] = (x.getIndividualSystemInformation)

systemInformation.foreach[SystemInformation] {
  _ match {
    case SystemInformation(a, b, c, d, e, f, g, h, i, j, k, l, m, x) if x.isNaN()
      => SystemInformation(a, b, c, d, e, f, g, h, i, j, k, l, m, 0.0)
    case SystemInformation(a, b, c, d, e, f, g, h, i, j, k, l, m, x) if !x.isNaN()
      => SystemInformation(a, b, c, d, e, f, g, h, i, j, k, l, m, x)
  }
} 
```

但这不会将更改写回`systemInformation`. 所以我添加了另一个 List 但类型不匹配：

```
var systemInformation: List[SystemInformation] = (x.getIndividualSystemInformation)

var systemInformationWithoutNans: ListBuffer[SystemInformation] = new ListBuffer[SystemInformation]
systemInformation.foreach[SystemInformation] {
  _ match {
    case SystemInformation(a, b, c, d, e, f, g, h, i, j, k, l, m, x) if x.isNaN()
      => systemInformationWithoutNans += SystemInformation(a, b, c, d, e, f, g, h, i, j, k, l, m, 0.0)
    case SystemInformation(a, b, c, d, e, f, g, h, i, j, k, l, m, x) if !x.isNaN()
      => SystemInformation(a, b, c, d, e, f, g, h, i, j, k, l, m, x)
  }
} 
```

错误发生在与`+=`和 的行上，如下所示：

```
type mismatch;
found : scala.collection.mutable.ListBuffer[com.x.interfaces.SystemInformation]
required: com.x.interfaces.SystemInformation 
```

为什么这不起作用？`NaN`用 s 替换s的更好方法是`0.0`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:24:49.467

建议使用地图作为 bluenote10，但另外，如何：

```
val transformedSystemInformation = systemInformation map (_ match {
    case s:SystemInformation if s.x.isNan() => s.copy(x = 0.0)
    case _ => _
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T16:19:52.550

您应该使用`map`而不是`foreach`.

您的第一个解决方案基本上是正确的方法，但`foreach`只迭代所有元素，而`map`允许将元素从 type 映射`A`到`B`返回一个新的 type 集合`B`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:10:50.143

由于上面没有回答您的第一个问题，我想我会补充一点，这是行不通的，因为该方法`+=`

```
def +=(x: A): ListBuffer.this.type 
```

在这种情况下返回 a `ListBuffer[SystemInformation]`，但您已`foreach`按类型参数化`SystemInformation`

```
foreach[SystemInformation] 
```

这就是编译器期望类型`SystemInformation`而不是`ListBuffer[SystemInformation]`返回错误的原因

```
type mismatch;
found : scala.collection.mutable.ListBuffer[com.x.interfaces.SystemInformation]
required: com.x.interfaces.SystemInformation 
```

另一方面，如果您从 foreach 中删除类型参数化，您的示例将编译：

```
...
systemInformation.foreach { ... }
... 
```

为了获得更好的方法，使用了[Ian McMahon](https://stackoverflow.com/a/15071544/307255)建议的方法。

# symfony - 我应该在 Symfony 2 中使用什么作为 XLIFF 原始文件？

> ID：15071272
> 
> 赞同：4
> 
> 时间：2013-02-25T16:12:48.343
> 
> 标签：symfony, localization, internationalization, xliff

在 Symfony 2[有关翻译的文档中，](http://symfony.com/doc/2.0/book/translation.html)所有 XLIFF 示例似乎都`file.ext`用作`original`文件属性。来自 XLIFF 1.2 的文档：

> *原始文件*- 原始属性指定从中提取元素内容的原始文件的名称。

在 Symfony 2 的案例中，我不相信我们实际上是在提取任何内容进行翻译，但该`original`属性是必需的。Symfony 2 的文档中从未解释过的用法`file.ext`，无论它只是一个占位符并被忽略，还是它是否需要指向一个实际的文件。我最好的猜测是 Symfony 2 忽略了它，但我没有机会进行任何测试或深入研究代码。

**第二个问题：**指定一组默认翻译是否合适，例如`messages.default.yml`并将其用作衍生 XLIFF 翻译的原始文件？

在与 Web 应用程序一起使用的翻译方面，XLIFF 似乎有点矫枉过正......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:54:02.100

尽管Xliff 1.2 规范和架构中需要`original`属性 of `<file>`，但您可以忽略它并使用一个虚拟字符串作为其值，以便您的文件通过架构验证。

此属性的常见用途之一是提取来自多个文档（`.properties`文件、`gettext`文件等）的字符串并将其重新格式化为 Xliff 跨单元，以便将来自每个单独文件的字符串放置在相应的单独`<file>`标签下。`original`属性可用于将原始文件名保留在具有多个`<file>`标签的 Xliff 文件中：

```
<?xml version="1.0" encoding="utf-8" ?>
<xliff version="1.1" xml:lang='en'>
 <file source-language='en' target-language='de' datatype="plaintext" original="Sample.po">
  ...
   <body>
    <trans-unit id="1" restype="button" resname="IDC_TITLE">
     <source>Title</source>
    </trans-unit>
    <trans-unit id="2" restype="label" resname="IDC_STATIC">
     <source>&amp;Path:</source>
    </trans-unit>
  ...
 </file>
 <file source-language='en' target-language='de' datatype="plaintext" original="Sample.properties">
    <trans-unit id="1" restype="label" resname="IDC_LABEL">
  ...
   </body>
 </file>
</xliff> 
```

我同意使用 Xliff 本地化小型 Web 应用程序通常有点矫枉过正，但这种格式可以说是目前唯一用于本地化数据交换的行业标准文件格式。这使得它在大规模本地化实施中非常受欢迎，无论是简单的源/目标结构文件还是高度定制和定制的文件，例如在 SDL Idiom Worldserver 等翻译管理系统中使用的文件。

[此外，Xliff 与OAXAL 系列](https://wiki.oasis-open.org/oaxal/FrontPage#A2.2OAXALComponents)的其他标准文件格式之间存在兼容性。

# .net - 根据.Net winform中的树视图选择显示多个组框

> ID：15071278
> 
> 赞同：0
> 
> 时间：2013-02-25T16:13:07.997
> 
> 标签：.net, winforms

我的 win 表单中有一个树视图，它有超过 10 个节点，根据每个节点的选择，我必须在表单右侧显示适当的组框，我必须隐藏其他组框，有没有最简单的嵌套 if else 条件以外的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:19:12.937

这是一个潜在的解决方案：

假设您尚未将 TreeNode(s) 的[Tag 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.tag.aspx)用于其他用途，您可以将该属性设置为相应的 GroupBox 控件。然后，订阅 TreeView 控件的[NodeMouseClick 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.nodemouseclick.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)并使用所选节点的 Tag 属性来确定要显示哪个 GroupBox。所有其他的都应该隐藏起来。

当然，您会希望将 GroupBoxes 的引用存储在一个数组中。这样隐藏所有组框就像这样简单：

```
foreach(var gb in arrayOfGroupBoxes)
{
    gb.Visible = false;
} 
```

NodeMouseClick 事件处理程序的实现可能类似于：

```
void TVNodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
{
    var activeGroupBox = e.Node.Tag as GroupBox;

    foreach(var gb in arrayOfGroupBoxes)
    {            
        gb.Visible = ReferenceEquals(activeGroupBox, gb);
    }
} 
```

# c - 无法理解程序（结构数组的排序）

> ID：15071280
> 
> 赞同：0
> 
> 时间：2013-02-25T16:13:09.373
> 
> 标签：c

我有一个代码：必须排序的结构数组。程序有效，但是：

我不明白，如果`Mat`是指针，为什么不是`void sort(tArt *sMat)`，但是`void sort(tArt sMat[])`。我真的很困惑。

```
typedef struct{
    char data[26];
}tArt;

 ...

int main(void)

{
  FILE* fMat; fMat=fopen..........

  tArt* Mat;

  ...

  Mat=malloc(sizeof(tArt));

  for(i=0;i<N;i++) fread(&Mat[i],sizeof(tArt),1,fMat);

  fclose(fMat);

  sort(Mat,N); 
...
}

void sort(tArt sMat, int num) {...........} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:53:22.830

由于我们看不到整个代码，我的猜测是，当您使用 malloc 动态分配数组时，您忘记为 N 个“对象”分配数组。换句话说，我怀疑你的问题在于

```
Mat = malloc(sizeof(tArt)); 
```

它应该在哪里

```
Mat = malloc(sizeof(tArt) * N); 
```

另一方面，当您使用表单声明显式创建数组时

```
 tArt Mat[N]; 
```

其中 N 在椭圆中较早的地方定义，一切都按预期工作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:21:55.107

`tArt *sMat`和`tArt sMat[]`和之间没有区别`tArt sMat[1234]`，编译器将它们都视为`tArt *sMat`并忽略长度信息。

# r - 特定文件和文件夹其余部分的叉积——R

> ID：15071284
> 
> 赞同：0
> 
> 时间：2013-02-25T16:13:19.947
> 
> 标签：r, loops, pattern-matching, filenames, cross-product

我在让 R 读取文件夹中的一组文件并返回它们的叉积时遇到问题。

我有一个文件夹，其中包含一个 test.csv 文件和 n 个 train.csv 文件。

我需要一个循环来读取文件夹并返回一个包含测试叉积和每个训练文件的文件......所以文件的行应该看起来像这样。

```
test*train01
test*train02
test*train03
... 
```

我编写了一个脚本来为两个定义的行制作它，但不知道如何为整个文件夹和我需要的模式调整它。

```
data01 <- as.matrix(read.csv(file = "test.csv", sep = ",", header=FALSE))
data02 <- as.matrix(read.csv(file = "train.csv", sep = ",", header=FALSE))
test <- list()
test01<- list()
test02<- list()
i<- 1
while (i <= 25){
    test01[[i]] <- c(data01[i,  ])
    test02[[i]] <- c(data02[i,  ])
    test[[i]]<- crossprod(test01[[i]],test02[[i]])
    i <- i+1
}
write.csv(test, file="testing.csv", row.names = FALSE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:18:12.753

尝试：

```
test <- function(data) {
data01 <- as.matrix(read.csv(file = "test.csv", sep = ",", header=FALSE))
data02 <- as.matrix(read.csv(file = data, sep = ",", header=FALSE))
test <- list()
test01<- list()
test02<- list()
i<- 1
while (i <= 25){
    test01[[i]] <- c(data01[i,  ])
    test02[[i]] <- c(data02[i,  ])
    test[[i]]<- crossprod(test01[[i]],test02[[i]])
    i <- i+1
}
return(test)
}

result <- lapply(list.files(pattern='Train.*'),test) 
```

然后只需循环`result`保存在 CSV 文件中。

编辑：如何保存：

```
files <- list.files(pattern='Train.*')
for (i in seq(length(result))) {
 write.csv(result[[i]], paste0('result_',files[i]), row.names = FALSE)
} 
```

编辑：保存在一个文件中：

```
write.csv(do.call(rbind,result),'result.csv', row.names = FALSE) # Appending by row 
```

或者

```
write.csv(do.call(cbind,result),'result.csv', row.names = FALSE) # Appending by column 
```

# java - 我应该能够使用类型为 Object 的 Java for-each 吗？

> ID：15071292
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:13:31.753
> 
> 标签：java, object, foreach, loops, arrays

我有一个 a 的实例，`JSONArray`我只是好奇是否可以使用 for-each 构造按顺序处理每个元素。所以我尝试了：

```
for( Object jsonObj: jsonArray ) {
  System.out.println("JSONArray element: '" + ((JSONObject)jsonObj).toString() + "'");
} 
```

令我惊讶的是，它奏效了。我认为我需要使用实现 Iterable 的类。

因此，如果您能回答我最初的问题（使用 for-each on `JSONArray`），那就太好了。还：

*   第二个问题：它为什么有效？
*   第三个问题：我应该对在运输代码中实际使用它持谨慎态度吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:24:28.283

[for-each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)语法是在 java 1.5 中引入的。它的目的是从明显的东西中清除你的代码，比如迭代器，它也切断了一些错误的可能性。

这种循环语句只适用于`Iterable`类，回答你的问题，因为它`JsonArray`是实现`Iterable`接口。

关于您的代码，我认为它也可以工作，如果您确切地说是 sais`jsonObj`的类型`JSONObject`，它不仅仅是一个`Object`. 通过这种方式，您可以消除循环体中容易出错的类型转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:37:44.907

您可能知道，for each 循环[仅适用于 Iterables 和数组](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)。

正如@Quirim 和@BrianRoach 所指出的，JSONArray 的原始 json.org 实现[没有实现 iterable](http://www.json.org/javadoc/org/json/JSONArray.html)，但[Gson 实现却实现了。](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonArray.html)

有[打算](https://github.com/douglascrockford/JSON-java/pull/77)在 json.org 版本中实现它，但最后他们没有。

所以回答你的3个问题：

1.  您必须使用实现可迭代的 Gson 或类似的 JsonArray 实现。
2.  因为 JsonArray 是可迭代的。
3.  不，你不应该。

# c# - IIS UnAuthorize xml 响应

> ID：15071293
> 
> 赞同：1
> 
> 时间：2013-02-25T16:13:32.550
> 
> 标签：c#, iis, smoothing, unauthorized

当我这样调用服务器时：

```
 var client = new RestClient();
       client.Authenticator =  new NtlmAuthenticator();

       var request = new RestRequest(uri); 
       request.Method = Method.POST;
       request.RequestFormat = DataFormat.Xml;

       request.AddParameter("application/atom+xml", doc /*some xml document*/, ParameterType.RequestBody);
       IRestResponse response = client.Execute(request);

       Debug.WriteLine(response.Content); 

       if(response.StatusCode == HttpStatusCode.Created)
        {
          // always 401
        } 
```

我得到下一个服务器响应：

```
<?xml version="1.0" encoding="UTF-8"?>
<SmoothStreaming xmlns="http://schemas.microsoft.com/iis/media/2011/03/streaming/management">
    <Error>
         <ErrorCode>0x80880022</ErrorCode>
         <ErrorMessage>All requests to the management APIs must be authenticated. Please install and enable an appropriate IIS authentication module for this website.</ErrorMessage>
    </Error>
</SmoothStreaming> 
```

我应该在哪里更改（安装）？

# objective-c - 无法对自定义对象的 NSMutableArray 进行排序

> ID：15071294
> 
> 赞同：1
> 
> 时间：2013-02-25T16:13:32.763
> 
> 标签：objective-c, ios6

我在尝试对一组自定义对象进行排序时遇到问题。看起来好像我的数组甚至没有命中排序代码，而只是简单地返回了数组本身。

我有以下设置：

```
SearchResult : NSObject
--
Document : SearchResult
Tag : SearchResult
Folder : SearchResult 
```

我的代码以`SearchResult`s 形式获得返回，然后尝试将它们与实现`name`中定义的键进行比较`SearchResult`。

```
-(void) parseFolderContents:(NSDictionary *) data
{
NSMutableArray *searchResults = [[NSMutableArray alloc] init];
NSMutableArray *documents = [[NSMutableArray alloc] init];
NSMutableArray *folders = [[NSMutableArray alloc] init];
NSMutableArray *tags = [[NSMutableArray alloc] init];
NSArray *results = [data objectForKey:@"items"];
for (int i = 0; i < [results count]; i++)
{
    SearchResult *result = (SearchResult *)[KTParser parseSearchResult:[results objectAtIndex:i]];
    if ([result.type isEqualToString:@"document"]){
        [documents addObject:result];
    }
    else if ([result.type isEqualToString:@"folder"])
    {
        [folders addObject:result];
    }
    else if ([result.type isEqualToString:@"tag"])
    {
        [tags addObject:result];
    }
}
if ([documents count] > 0)
    [searchResults addObject:documents];
if ([folders count] > 0)
    [searchResults addObject:folders];
if ([tags count] > 0)
    [searchResults addObject:tags];

.... 
```

这就是用来填充数组的代码，没什么特别的。我已经尝试了这些方法中的每一种来比较数组。没有一个工作。有谁知道我要去哪里错了？

第一次尝试：

```
NSSortDescriptor *sortDescriptor;
sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name"
                                             ascending:YES];    
NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
NSArray *sortedResults;
sortedResults = [searchResults sortedArrayUsingDescriptors:sortDescriptors]; 
```

第二次尝试：

```
NSArray *sortedResults;
sortedResults = [searchResults sortedArrayUsingSelector:@selector(compare:)];

(implementing custom compare method on SearchResult/Document.m)
- (NSComparisonResult)compare:(SearchResult *)otherResult{
  return [self.name compare:otherResult.name];
} 
```

第三次尝试：

```
 sortedResults = (NSMutableArray *)[searchResults sortedArrayUsingDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES selector:@selector(caseInsensitiveCompare:)]]]; 
```

第四次尝试我尝试使用块。我什至尝试输入代码来操纵它的排序，但这也不起作用。返回的数组与原始数组完全相同：

```
sortedArray = [searchResults sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
    if ([(SearchResult *)a itemId] < 20000 )
        return NSOrderedAscending;
    else
        return NSOrderedDescending;
}]; 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:41:25.763

发现了问题 - 我将数组添加为对象，而不是将每个对象添加到数组中。然后在 NSArray 上调用 sort，而不是我的自定义对象。更改上面的代码`[searchResults addObject:documents];`以`[searchResults addObjectsFromArray:documents];`解决问题！

# c# - 当列不为空时，获取“无法将 NULL 插入（“模式”。“表”。“列”）

> ID：15071295
> 
> 赞同：3
> 
> 时间：2013-02-25T16:13:34.377
> 
> 标签：c#, entity-framework, inheritance, odac

每当我尝试在 mySchema 中创建一个新的 myObj 时，它一直告诉我 ID 为空，但是当我运行调试器时，调试器告诉我我正在添加的对象没有 NULL 值。它适用于我同事的机器，但不适用于我的机器......

```
MyObj myObj = new myObj() {
    ID = 1234,
}
container.AddObject("MyObj", myObj);
container.ObjectStateManager.ChangeObjectState(myObj, System.Data.EntityState.Added);
// container extends ObjectContext as created by the EDMX 
```

这是我得到的错误：

```
---------------------------

---------------------------
System.Data.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> Oracle.DataAccess.Client.OracleException: ORA-01400: cannot insert NULL into ("myModel"."myObj"."ID")
ORA-06512: at line 4

   at Oracle.DataAccess.Client.OracleException.HandleErrorHelper(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure, Boolean bCheck)

   at Oracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, OracleConnection conn, String procedure, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, Boolean bCheck)

   at Oracle.DataAccess.Client.OracleCommand.ExecuteReader(Boolean requery, Boolean fillRequest, CommandBehavior behavior)

   at Oracle.DataAccess.Client.OracleCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)

   at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)

   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)

   --- End of inner exception stack trace ---

   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)

   at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)

   at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)

   at System.Data.Objects.ObjectContext.SaveChanges()
---------------------------
OK   
--------------------------- 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-05T11:39:36.013

您需要在实体框架模型中指定数据库不会为您生成密钥，并且 EF 应该使用您提供的密钥！

```
modelBuilder.Entity<Department>().Property(t => t.DepartmentID)
.HasDatabaseGeneratedOption(DatabaseGeneratedOption.None); 
```

查看来源：http: [//msdn.microsoft.com/en-us/data/jj591617.aspx#1.3](http://msdn.microsoft.com/en-us/data/jj591617.aspx#1.3)

希望这可以帮助其他找到此线程的人！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T20:47:03.130

当我最终查看 EDMX 文件时，我注意到 StoreGeneratedPattern 设置为 Identity，这阻止了在通过 Entity-Framework 将 ID 保存到数据库时从子类继承继承。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T21:01:57.503

我遇到了实体框架没有在 edmx 中设置 storeGeneratedPattern="Identity" 的问题。如果您使用记事本打开 edmx 并找到您的实体，请将其添加到其 key 属性中，看看是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T16:45:55.387

虽然不了解oracle，但对Entity框架有一定的经验，

我假设，`MyObj`是数据库中的一个表，

然后，

```
container.MyObj.AddObject(myObj);
container.SaveChanges(); 
```

检查天气，这给出了同样的例外。

# java - java中的堆栈无法正常工作？

> ID：15071296
> 
> 赞同：2
> 
> 时间：2013-02-25T16:13:34.693
> 
> 标签：java, stack

我正在尝试将数据存储到堆栈中。如果我错了，请纠正我，堆栈是后进先出类型。所以，期待我的程序的输出会有点反转。但遗憾的是输出不同。我不确定代码的哪一部分是错误的。

请帮助：|

代码：

`

公共类 CorruptQueue {

```
public static void LineUp(){

    BufferedReader br = null;

try {

    String line;
    Stack nameStack = new Stack();
    Stack statusStack = new Stack();
    Stack stack = new Stack();

    br = new BufferedReader(new FileReader("C:/Users/user/Desktop/School Files/Project/CorruptOffice/input.txt"));

    while ((line = br.readLine()) != null) {

       StringTokenizer stringTokenizer = new StringTokenizer(line, " ");

       while (stringTokenizer.hasMoreElements()) {

        String lineup = stringTokenizer.nextElement().toString();
        String name = stringTokenizer.nextElement().toString();
        String status = stringTokenizer.nextElement().toString();

            nameStack.push(name);
            statusStack.push(status);
            System.out.println("Now serving "+ nameStack.pop() + " a " + statusStack.pop());

        /*StringBuilder sb = new StringBuilder();
        sb.append("" + lineup);
        sb.append(" " + name);
        sb.append("" + status);
        sb.append("\n\n");

        System.out.println(sb.toString());*/
       }

    }

    System.out.println("Done");

} catch (IOException e) {
    e.printStackTrace();
} finally {
    try {
        if (br != null)
            br.close();

    } catch (IOException ex) {
        ex.printStackTrace();
    }
}

    }

public static void main(String[] args) 
{
     LineUp(); 
```

} }`

输入：

阵容约翰常规

阵容鲍勃常规

阵容汤姆常规

阵容莎拉VIP

阵容玛丽VIP

阵容琼VIP

阵容 Bea VIP

阵容汉克常规

阵容艺术常规

阵容雏菊贵宾

阵容 Marius 常规

阵容 Dane VIP

输出：

现在为约翰服务

现在定期为鲍勃服务

现在为汤姆服务

现在为莎拉提供贵宾服务

现在为玛丽提供贵宾服务

现在为琼提供贵宾服务

现在为 Bea 提供 VIP

现在为汉克服务

现在定期为艺术服务

现在为 Daisy 服务 VIP

现在为马吕斯服务

现在为 Dane 服务 VIP

完毕

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T16:17:04.493

你的堆栈操作似乎在这里

```
nameStack.push(name);
statusStack.push(status);
System.out.println("Now serving "+ nameStack.pop() + " a " + statusStack.pop()); 
```

现在，如果您在开始弹出任何内容之前将它们全部推送，那么您的堆栈将反转名称，但是您一次同时推送和弹出 1 个项目。

所以本质上，你推入`name`堆栈`status`，但在你做其他事情之前，你只需将它们弹出并将它们打印到控制台。

你的堆栈实际上并没有做任何事情。

* * *

如果你真的想反转你的输出，采取

```
System.out.println("Now serving "+ nameStack.pop() + " a " + statusStack.pop()); 
```

退出初始循环，然后将其放入新循环中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T16:16:56.877

```
 nameStack.push(name);
  statusStack.push(status);
  System.out.println("Now serving "+ nameStack.pop() + " a " + statusStack.pop()); 
```

好的。因此，您是说，将名称压入堆栈。然后立即从堆栈中弹出该名称。所以，是的，它是 LIFO，但你的堆栈中只有一个元素。尝试将 pop 操作完全移到 while 循环之外。然后有另一个 while 循环不断弹出元素，直到您的堆栈为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:18:27.423

你的代码有这个部分：

```
 nameStack.push(name);
 statusStack.push(status);
 System.out.println("Now serving "+ nameStack.pop() + " a " + statusStack.pop()); 
```

当您将一个值压入堆栈时，您会再次将其弹出！您应该将它们全部打开，然后在它们全部打开后将它们弹出。

可能值得多[读](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)一点堆栈，以确保您理解它们:)

# curl - cUrl 设置语言标题

> ID：15071298
> 
> 赞同：14
> 
> 时间：2013-02-25T16:13:46.293
> 
> 标签：curl, http-headers, user-agent, http-accept-language

如何为我的 cURL 请求设置语言标头？例如，现在我用荷兰语获得了 facebook.com 的主页，可能是因为我的服务器在荷兰/默认语言由标题发送？..

在这种情况下，我更喜欢英语而不是荷兰语，所以我尝试在 curl 中设置一个 httpheader 但我没有任何意义？我做错了什么或者我应该设置什么？

（zen 符号）

```
CURLOPT_HTTPHEADER => 'Accept-Language: en-US;q=0.6,en;q=0.4', 
```

提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-11-08T18:01:58.943

我来到这个页面，寻找一种将语言标题传递到命令行的方法。如果要在 bash 单行中设置标题，请使用`-H Accept-Language`

```
$ curl -s -H 'Accept-Language: es'  -XGET "http://www.google.com"

<!doctype html>
  <html itemscope="" itemtype="http://schema.org/WebPage" lang="es-419">
    <head>
      <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
      <meta content="/logos/doodles/2016/united-states-elections-2016-4829342880235520-hp.gif" itemprop="image">
      <meta content="Tu voz importa. �Encuentra tu casilla y vota! g.co/elections/dondevotar #Everyonein2016 #GoogleDoodle" property="og:description">
      ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-30T10:03:36.190

您必须在请求中添加标头选项。

你会有这样的东西：

```
$options = array(
    CURLOPT_RETURNTRANSFER => true,     // return web page
    CURLOPT_HEADER         => false,    // don't return headers
    CURLOPT_FOLLOWLOCATION => true,     // follow redirects
    .....

$ch      = curl_init($url);
curl_setopt_array($ch, $options);
$content = curl_exec($ch);
$err     = curl_errno($ch);
$errmsg  = curl_error($ch);
$header  = curl_getinfo($ch);
curl_close($ch); 
```

您所要做的就是将此行添加到您的 $options 数组中：

```
 CURLOPT_HTTPHEADER     => array("Accept-Language: en-US;q=0.6,en;q=0.4"), 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-10T20:49:53.713

此请求适用于：

*   英语

```
curl -s -H 'Accept-Language: en-US,en;q=0.9,it;q=0.8'  -XGET "http://www.google.com" | lynx -dump -stdin 
```

*   西班牙语

```
curl -s -H 'Accept-Language: es-CO,es;q=0.9,it;q=0.8'  -XGET "http://www.google.com" | lynx -dump -stdin 
```

*   葡萄牙语

```
curl -s -H 'Accept-Language: pt-BR,pt;q=0.9,it;q=0.8'  -XGET "http://www.google.com" | lynx -dump -stdin 
```

我不了解优先级，但这是正常工作所必需的。
关于优先事项可以在这里找到更多信息[https://www.w3.org/International/questions/qa-lang-priorities.en](https://www.w3.org/International/questions/qa-lang-priorities.en)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-16T07:08:28.023

我们设法使用使用 libcurl 的 curlthin 库来做到这一点：

```
string strAcceptLanguage = string.Format("{0}-{1};q=0.5,{0};q=0.3", Lang, Country.ToUpper());

// Initialize HTTP header list with first value.
var headers = CurlNative.Slist.Append(SafeSlistHandle.Null, strAcceptLanguage);

// Configure libcurl easy handle to send HTTP headers we configured.
CurlNative.Easy.SetOpt(easy, CURLoption.HTTPHEADER, headers.DangerousGetHandle()); 
```

# signalr - SignalR - 存储客户信息

> ID：15071301
> 
> 赞同：2
> 
> 时间：2013-02-25T16:13:48.140
> 
> 标签：signalr

我已经开始尝试使用 SignalR。我一直在尝试想出一种灵活的方式来存储有关每个连接的客户端的信息。例如，将名称存储在聊天应用程序中，而不是随每条消息一起传递。

目前，我有一个静态字典，它将 connectionId 与包含这些属性的对象相匹配。我在连接时添加到此字典，并在断开连接时删除。

我遇到的问题是我似乎没有收到所有断开连接事件。如果我关闭 Chrome 中的选项卡，则断开连接似乎会通过。但是，如果我快速重新加载选项卡，则似乎不会发生断开连接（至少不是“干净地”）。例如，如果我一遍又一遍地重新加载同一个标签，它会告诉我我的字典应该有多个项目 - 理论上仍然是一个。

是否有存储这种每个连接信息的标准方法？否则，什么可能导致我遇到的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:28:14.397

您实际上正在正确处理连接 ID 数据。确保您只在 OnConnected 中实例化您的用户数据，并在 OnDisconnected 中取消实例化它。

在您的页面上刷新垃圾邮件时，有些情况会导致 OnDisconnected 事件未立即触发。但是您不必担心这一点，因为 SignalR 实际上会超时连接并在指定的超时 (DisconnectTimeout) 后触发 OnDisconnected 事件。

如果您确实遇到 OnConnected 和 OnDisconnected 事件（经过大量时间后）没有一对一关联的情况，请确保在[https://github.com/SignalR/SignalR/issues](https://github.com/SignalR/SignalR/issues)提交错误.

最后，如果您正在寻找一些高级聊天机制并寻找灵感，请查看[JabbR](http://jabbr.net)，它是开源的！

[https://github.com/davidfowl/JabbR](https://github.com/davidfowl/JabbR)

希望这可以帮助！

# css - Bootstrap2 Navbar 和下面的行之间的神秘空白

> ID：15071306
> 
> 赞同：29
> 
> 时间：2013-02-25T16:14:05.700
> 
> 标签：css, twitter-bootstrap, whitespace, navbar, removing-whitespace

我正在使用 Bootstrap 的 Navbar 和 Bootsrap 的网格来显示 Navbar，并在 Navbar 正下方显示一个图像。但是，由于某种原因，此导航栏和图像之间存在空白。当我使用 firebug 调查空白的位置时，看起来 Navbar 在其包含的 . 我试图通过使用 CSS 使导航栏底部对齐来解决此问题，但无济于事。

我怎样才能消除这个空白？

```
<!-- Top Navigation Bar -->
<div class="row" id="rowTopLinkNavBar">
    <div class="span6 offset3" id="divTopLinkNavBar">
        <div class="navbar" id="topLinkNavBar">
            <div class="navbar-inner" style="font-size: 16px;">
                <ul class="nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li class="divider"><a href="#">PROJECTS</a></li>
                    <li class="divider"><a href="#">ABOUT US</a></li>
                    <li class="divider"><a href="#">THE TEAM</a></li>
                    <li class="divider"><a href="#">EVENTS</a></li>
                    <li class="divider"><a href="#">MEETINGS</a></li>
                    <li><a href="#">RESOURCES</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!--Background Image-->
<div class="row" id="rowBackgroundImg">
    <div class="span6 offset3" id="backgroundImg">
    <!-- background image is set in CSS -->
    </div>
</div> 
```

这是我使用 CSS 解决此问题的绝望尝试：

```
#backgroundImg
{
    color: #ff0000;
    background-color: #000000;
    /*width: 709px;
    height: 553px;*/
    background: url('../images/someImage.jpg') no-repeat;
    background-size: 100%;
    height: 700px;
    border-radius: 0px;
    background-position: center;
    vertical-align: top;
    background-position: top;
}

#divTopLinkNavBar
{
    vertical-align: bottom;
}

#topLinkNavBar
{
    padding-bottom: 0px;
}
#rowBackgroundImg
{
    padding-top: 0px;
}

.navbar
{
    vertical-align: bottom;
} 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-02-25T16:50:12.463

您可能想要覆盖`margin-bottom: 20px`from `navbar`：

```
.navbar {
    margin-bottom: 0;
} 
```

Something like that : [http://jsfiddle.net/q4M2G/](http://jsfiddle.net/q4M2G/) (the `!important` is here just to override the style of the CDN version of bootstrap I'm using in the jsfiddle but you should not need to use it if your style correctly overrides bootstrap styles)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:16:29.903

你为什么要上课：`span12 offset3`？

Bootstrap 默认有 12 列。因此，如果您没有更改它，请尝试输入：

`span9 offset3`或者只是`span12`。

# twitter4j - 类型不匹配错误 twitter4j

> ID：15071311
> 
> 赞同：1
> 
> 时间：2013-02-25T16:14:22.883
> 
> 标签：twitter4j

```
 RequestToken requestToken = twitter.getOAuthRequestToken(callbackURL.toString()); 
```

我收到错误“类型不匹配：无法从 twitter4j.http.RequestToken 转换为 twitter4j.auth.RequestToken”，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:07:26.420

我已经确定了这个问题，我使用的 jar 文件是旧的，twitter4j-core-2.2.5.jar 完成了这项工作。

# sql-server - 如何获取 SQL Server 中两个日期之间所有周的开始和结束日期？

> ID：15071312
> 
> 赞同：8
> 
> 时间：2013-02-25T16:14:23.570
> 
> 标签：sql-server, tsql

我需要在两个日期之间获取所有星期的开始和结束日期（周），然后运行一个查询，返回每个星期中插入的记录数。

```
declare @sDate datetime,
        @eDate datetime;

select  @sDate = '2013-02-25',
        @eDate = '2013-03-25';

--query to get all weeks between sDate and eDate

--query to return number of items inserted in each of the weeks returned

WEEK                  NoOfItems
-----------------------------------------
2013-02-25            5
2013-03-4             2
2013-03-11            7 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T16:19:28.130

您可以使用递归 CTE 生成日期列表：

```
;with cte as
(
  select @sDate StartDate, 
    DATEADD(wk, DATEDIFF(wk, 0, @sDate), 6) EndDate
  union all
  select dateadd(ww, 1, StartDate),
    dateadd(ww, 1, EndDate)
  from cte
  where dateadd(ww, 1, StartDate)<=  @eDate
)
select *
from cte 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d41d8/9547)。

然后，您可以将其加入您的表中，以返回其他详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-12T03:52:56.653

这是我的解决方案。受此[答案](https://stackoverflow.com/a/15071427/2467036)启发

```
DECLARE @sDate DATE = DATEADD(MONTH, -6, GETDATE())
DECLARE @eDate DATE = GETDATE()
;WITH cte AS
(
  SELECT DATEADD(WEEK, DATEDIFF(WEEK, 0, @sDate), 0) AS StartDate, DATEADD(WEEK, DATEDIFF(WEEK, 0, @sDate), 6) AS EndDate
  UNION ALL
  SELECT DATEADD(WEEK, 1, StartDate), DATEADD(WEEK, 1, EndDate)
  FROM cte
  WHERE DATEADD(WEEK, 1, StartDate) <= @eDate
)

SELECT * FROM cte 
```

# variables - SQLCMD 使用 LIKE '%@%'

> ID：15071314
> 
> 赞同：4
> 
> 时间：2013-02-25T16:14:28.347
> 
> 标签：variables, batch-file, escaping, notepad++, sqlcmd

我正在尝试使用 SQLCMD.EXE 运行查询，但 LIKE 部分有问题。

```
WHERE email LIKE '%%@%%' 
```

我认为这是 cmd 提示而不是 SQLCMD.EXE 的错误，因为我收到了错误：

```
Syntax error "@%'" 
```

我通过指向 bat 文件的 Notepad++ (NppExec) 运行它，如下所示：

```
H:\scripts\SQL.bat "$(CURRENT_WORD)" 
```

这会导致查询在被 SQLCMD.EXE 调用使用之前用双引号引起来。然后 SQLCMD.EXE 调用在 bat 文件中运行，如下所示：

```
SQLCMD.EXE -U user -P %pass% -S %server% -Q %sql% -d %table% 
```

除了这`LIKE '%%@%%'`部分之外，它适用于我使用的任何查询。

**更新**

我又做了一些测试，并认为我已经将其范围缩小到与.`%`和`@`.

所以像这样的查询可以正常工作：

*   `SELECT name FROM table WHERE name LIKE 'test'`
*   `SELECT name FROM table WHERE name LIKE 'test%'`
*   `SELECT name FROM table WHERE name LIKE '%%test'`

但是这些会导致错误：

*   `SELECT name FROM table WHERE name LIKE '%test'`
*   `SELECT name FROM table WHERE name LIKE '%test%'`

这很好，因为我可以`%`在查询中加倍，但我已经尝试过`%%@%`并且`%%@%%`它们会抛出错误。`Syntax error "@'""`或`Syntax error "@%'""`，分别。

此外，变量的原因是我包含了一些逻辑，因此它可以检测表名并针对不同的服务器和数据库运行。

这是bat文件

```
set sql=%1
iff %@index[%sql%,sur_] GT -1 THEN
    SET SERVER=server1
    SET table=tablename
    SET pass=password
else
    SET SERVER=server2
    SET table=tablename
    SET pass=password
endiff
SQLCMD.EXE -U usr -P %pass% -S %server% -Q %sql% -d %table% 
```

奇怪语法的原因是由于命令通过 TCC/LE 运行[（见这里）](http://jpsoft.com/help/index.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T01:50:17.563

我不太确定您将`%`s 加倍的原因是什么，但看起来您的意图是在包含`@`. 如果是这样，您可以尝试重写该子句：

```
WHERE CHARINDEX('@', email) > 0 
```

如果它是使`@`事情绊倒的符号，请`CHAR(64)`改用。

```
WHERE CHARINDEX(CHAR(64), email) > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T08:41:11.847

使用 sqlcmd 运行查询时，我发现该`%`符号将被删除。假设您的查询是：

```
SELECT name FROM table WHERE name LIKE 'test%' 
```

sqlcmd 会将您的查询读取为

```
SELECT name FROM table WHERE name LIKE 'test' 
```

所以 sqlcmd 不会过滤你的结果。请`%%`用于查询

```
SELECT name FROM table WHERE name LIKE 'test%%' 
```

你会得到结果

```
SELECT name FROM table WHERE name LIKE 'test%' 
```

我已经在 SQLServer 2005 和 2008 上对此进行了测试

# iphone - 如何将 NSString/NSDate 转换为 2 月 25 日星期一

> ID：15071316
> 
> 赞同：-6
> 
> 时间：2013-02-25T16:14:44.973
> 
> 标签：iphone, ios, xcode, nsstring, nsdate

我有以下字符串作为`cell.textlabel.text`

**2013-02-25 00:00:00 +0000**

如何将其转换为以下格式？

**2月25日星期一**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:18:46.573

使用该类`NSDateFormatter`格式化日期字符串：

```
NSDateFormatter *dateFormatter=[NSDateFormatter new];
[dateFormatter setDateFormat:@"EEEE dd MMMM"];

NSLog(@"Date : %@", [dateFormatter stringFromDate:[NSDate date]]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:18:45.023

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
            [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];
            NSDate *arrivalDate = [dateFormatter dateFromString:@"2013-02-25 00:00:00 +0000"];
            [dateFormatter setDateFormat:@"EEEE dd MMMM"];
        NSDate *newDate = [dateFormatter dateFromString:[dateFormatter stringFromDate:arrivalDate]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:25:09.957

尝试这样的事情：

```
NSDateFormatter* dateFormatterForDate = [[NSDateFormatter alloc] init];     
[dateFormatterForDate setDateFormat:@"EEEE, dd MMMM yyyy"];
NSString *startDate = [dateFormatterForDate stringFromDate:dateString]; 
```

我还没有检查它，所以如果它有效，请尝试更新。

# python - 我可以使用 App Engine 支持 Google 的多重登录吗？

> ID：15071317
> 
> 赞同：5
> 
> 时间：2013-02-25T16:14:45.740
> 
> 标签：python, google-app-engine

目前，要在我的 App Engine 应用程序中切换多个 Google 帐户，用户必须注销并使用每个 Google 帐户登录。如果他们使用多重登录功能，这会弄乱他们在其他选项卡中打开的各种 Google 工具。

有什么方法可以让用户在我的应用程序中切换多个 Google 帐户？就像用户现在可以在 gmail 等中一样 [http://support.google.com/accounts/bin/answer.py?hl=en&answer=1721977](http://support.google.com/accounts/bin/answer.py?hl=en&answer=1721977)

我环顾四周，但找不到其他人这样做，但如果我错过了这个，我深表歉意。

我将 App Engine 与 Python 和标准用户服务一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T23:27:21.107

不幸的是，这不受支持。我认为值得在[我们的问题跟踪器](https://code.google.com/p/googleappengine/issues/list)上提交功能请求。

# c# - jqgrid更改列排序参数（sidx）值

> ID：15071319
> 
> 赞同：0
> 
> 时间：2013-02-25T16:14:49.457
> 
> 标签：c#, javascript, jquery, jqgrid

当我单击它对它进行排序时，我的网格中有一个名为“FullName”的列，它发送回服务器 sidx:FullName。

我想要的是能够说“在排序的这个列上发回值'x'”

因此在上述情况下，我将单击“FullName”列，它将发送到服务器 sidx:LastName。

这样做的原因是我采用该值并基于它创建一个查询，但是属性“FullName”是一个生成的值

```
public string FullNmae
    { 
       get{ return this.FirstName + " " + this.LastName; }
    } 
```

所以我的数据库中不存在“FullName”。我需要搜索“姓氏”属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:18:25.193

`index: LastName`在对该列进行排序时，尝试设置您的which 应该在您的帖子中传递该值。

# java - Java repaint() 方法并不总是有效

> ID：15071321
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:14:53.320
> 
> 标签：java, swing, repaint

Java 中的 repaint() 方法存在问题。我做了一个新线程，不断重绘屏幕。当我释放空格键时，我希望我的播放器通过设置它的位置来平稳下降，然后等待 50 毫秒并循环 20 次。相反，它会在循环中等待全部时间，*然后*重新绘制。我想知道为什么它不会不断地重新绘制玩家坐标的变化。谢谢你。

（编辑）感谢大家的帮助。这是我第一次使用堆栈溢出，我只有 13 岁，还在学习 java，所以我可能会再次回到教程。

我的“a”类（主要）：

```
public class a {
    public static void main(String[] args) {
        JFrame frame = new JFrame("StickFigure Game");
        frame.setSize(740, 580);
        frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        b board = new b();
        frame.add(board);
        frame.addKeyListener(board);
    }
} 
```

我的“b”类（JPanel/绘图）：

```
public class b extends JPanel implements KeyListener {
    c player = new c();

    public class MyRunnable implements Runnable {

        public void run() {
            while (true)
                repaint();
        }
    }

    MyRunnable run = new MyRunnable();

    public void paint(Graphics g) {
        super.paint(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.drawImage(player.getImage(), player.getX(), player.getY(), 80, 140,
                null);
    }

    public b() {
        Thread thread = new Thread(new MyRunnable());
        thread.start();
    }

    public static void slow(int n) {
        long t0, t1;
        t0 = System.currentTimeMillis();
        do {
            t1 = System.currentTimeMillis();
        } while (t1 - t0 < n);
    }

    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_D) {
            player.setPos(player.getX() + 6, player.getY());
        }
        if (e.getKeyCode() == KeyEvent.VK_A) {
            player.setPos(player.getX() - 6, player.getY());
        }
        if (e.getKeyCode() == KeyEvent.VK_SPACE) {
            player.setPos(player.getX(), player.getY() - 60);
        }
    }

    public void keyReleased(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_SPACE) {

            for (int i = 0; i < 20; i++) {
                slow(50);
                player.setPos(player.getX(), player.getY() + 2);
            }
        }
    }

    public void keyTyped(KeyEvent e) {
    }
} 
```

我的“c”类（玩家）：

```
public class c {
    private ImageIcon i = new ImageIcon("guy.png");
    private Image img = i.getImage();
    private int x = 0;
    private int y = 100;

    public void wait(int what) {
        try {
            Thread.sleep(what);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public c() {
    }

    public Image getImage() {
        return img;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    public void setPos(int mx, int my) {
        x = mx;
        y = my;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:24:06.637

我还没有完成这里的所有代码，但这里有一些提示：

*   Swing 有自己的[并发机制](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，允许您处理 UI 更新。您可以使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)而不是 raw `Thread`。相关的是使用`Thread.sleep`- 不要这样做，它只会阻止`EDT`并阻止 UI 更新。
*   Swing 油漆链机制要求您覆盖`paintComponent`而不是`paint`.
*   始终使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)而不是`KeyListeners`在 Swing 中。`KeyListeners`需要组件焦点才能与`KeyEvents`. `Key Bindings`没有这个限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T16:26:06.757

*“java中的repaint()方法有问题。”* 您是否认为问题可能出在您的代码上？您正在阻塞事件线程并且让系统没有时间进行中间重绘。特别是，这种方法：

```
public static void slow (int n){
    long t0,t1;
    t0=System.currentTimeMillis();
    do{
        t1=System.currentTimeMillis();
    }
    while (t1-t0<n);
} 
```

这个循环：

```
for(int i = 0;i<20;i++){
    slow(50);
    player.setPos(player.getX(), player.getY()+2);
} 
```

不要放弃对系统的控制，以便实际发生重新绘制。使用 Swing 计时器重写那些。查看[本教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)以了解如何使用它们。

此外，您的线程不断`repaint()`在紧密循环中调用：

```
public void run(){
  while(true) repaint();
} 
```

这是一个可怕的想法。您不需要以`repaint()`全 CPU 速度调用。对于动画来说，每 30 毫秒左右一次就可以了。同样，考虑使用 Swing 实用程序来执行此操作，而不是编写自己的循环线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:20:36.483

这`repaint`只是尽快绘画的“请求”。所以当你调用它时，它会尽快调用paint方法。

从[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#repaint%28%29)

所以基本上你只是用`paint`或淹没预定的电话。`update``while(true) repaint();`

[Oracle 在 AWT 和 Swing 中绘制的立场](http://www.oracle.com/technetwork/java/painting-140037.html)

你可以做到这一点的一种方法，或者我应该说我会怎么做，是让你的`c`类实现`KeyListener`，这样当一个键被按下时（并且只有当它被按下时）你更新它的位置。

因此，将您的`KeyListener`方法移至 class `c`，在您的 class b 构造函数中，您可以添加调用`this.addKeyListener(player)`或创建`void addPlayer(c player)`添加它的方法。

# objective-c - 格式化字典值

> ID：15071322
> 
> 赞同：1
> 
> 时间：2013-02-25T16:14:56.357
> 
> 标签：objective-c, dictionary

我需要以下列格式将值存储在字典中：

```
{ "UserId": 123,
  "UserType": "blue", 
    "UserActs": [{
           "ActId": 3,
           "Time": 1
       }, {
           "ActId": 1,
           "Time": 6
       }]
    } 
```

我知道我需要一个用于初始值的字典和一个用于 UserActs 的嵌套字典，但我不确定如何为相同的键“ActId”和“Time”存储单独的值。我将如何按照这种格式将它们添加到字典中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:20:28.440

这是创建该字典的旧的、冗长的方法（有一种新的语法，使用 Objective-C 文字，但是它们不是可变的，所以我选择了这种方法）：

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setObject:[NSNumber numberWithInt:123] forKey:@"UserId"];
[dict setObject:@"blue" forKey:@"UserType"];

NSMutableArray *acts = [[NSMutableArray alloc] init];
[acts addObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:3], @"ActId",
    [NSNumber numberWithInt:1], @"Time",
    nil]];
[acts addObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:1], @"ActId",
    [NSNumber numberWithInt:6], @"Time",
    nil]];
[dict setObject:acts forKey:@"UserActs"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:21:24.710

您还可以使用数组和字典的简写

```
NSDictionary * dictionary = @{ @"UserId": @123,
  @"UserType": @"blue", 
    @"UserActs": @[@{
           @"ActId": @3,
           @"Time": @1
       }, @{
           @"ActId": @1,
           @"Time": @6
       }]
    }; 
```

# c# - 查询以从两个表中显示否定

> ID：15071323
> 
> 赞同：0
> 
> 时间：2013-02-25T16:14:57.300
> 
> 标签：c#, sql, visual-studio-2010, listbox

我有两个列表框，listbox1 和 listbox2，以及 DB 中的两个表，table1 和 table2。两个表都包含一个名为“颜色”的列。我想在 listbox1 中显示 table1 中的所有“颜色”，我可以这样做。但是在 listbox2 中，我想显示 Table2 中的“颜色”，但它不能出现在 Table1 的“颜色”中。那么如何为它编写查询呢？

这是我一直在尝试的，但它不起作用：

```
SELECT Table2.Colour
FROM Table1 CROSS JOIN Table2
WHERE  (Tabel1.Colour! = Table2.colour) 
```

错误信息是——`multi-part identifier Tabel2.Colour could not be found`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:16:19.060

这应该适用于`LEFT JOIN`：

```
SELECT Table2.Colour 
FROM Table2 
   LEFT JOIN Table1 ON Tabel1.Colour = Table2.colour
WHERE Table1.Colour IS NULL 
```

您也可以使用`NOT IN`or `NOT EXISTS`，我只是更喜欢`LEFT JOIN`/`IS NULL`语法。

例如：

```
SELECT Colour 
FROM Table2 
WHERE Colour NOT IN (SELECT Colour FROM Table1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:27:24.077

如果您的 RDBMS 版本实现了`EXCEPT`子句，您可以执行以下操作：

```
SELECT Colour FROM Table2
EXCEPT 
SELECT Colour FROM Table1 
```

我并不是说这比 JOIN 更好。只是另一种选择。

# browser - Powershell 访问浏览器选项卡

> ID：15071324
> 
> 赞同：0
> 
> 时间：2013-02-25T16:14:59.720
> 
> 标签：browser, powershell-2.0

我们正在使用 PowerShell 来自动测试我们的网站。

过程如下：我们打开一个包含报告的选项卡，然后单击打印按钮，该按钮打开一个新选项卡，其中包含我们报告的打印机友好版本，但是当我们尝试打印打印机友好页面时，它仍然具有焦点在原始页面而不是新创建的页面上。我们如何在新页面上获得句柄，以便我们可以打印它然后关闭它。

任何帮助将不胜感激

谢谢理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:09:59.173

我只是确保浏览器设置为在创建新选项卡时激活它。在 Firefox 中，这是通过工具 > 选项 > 选项卡 > “当我在新选项卡中打开链接时，立即切换到它”来完成的。
我敢肯定IE中一定有类似的设置。

# call - Freeswitch：限制通话时间

> ID：15071325
> 
> 赞同：1
> 
> 时间：2013-02-25T16:14:59.077
> 
> 标签：call, duration, freeswitch

再会，

我写作是因为我的 FreeSWITCH 有问题。该平台运行良好，通话通常由电话提供商配置，但最近我遇到了一些长时间通话的问题。

问题是，有时应答机会接听被叫，而其他电话也会默认接听接听电话。这使得通话持续时间长达 2 小时 30 分钟，在此期间接听电话，并且由于没有通话，此剪辑一直处于活动状态，这不必要地增加了成本。

我想知道是否有办法为所有呼叫配置 FreeSWITCH 具有预定的最大持续时间。我在 FreeSWITCH ( [http://wiki.freeswitch.org/wiki/Misc._Dialplan_Tools_sched_hangup](http://wiki.freeswitch.org/wiki/Misc._Dialplan_Tools_sched_hangup) ) 中看到了一个模块，据说习惯了这个但不明白它是如何使用的。

如果有人知道如何使用此模块，我将不胜感激，或者我可以解决这个问题以避免如此长的持续时间，或者确定应答机消息何时在呼叫切断后发出音调

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:40:06.957

查看 sched_hangup 应用程序。

[http://wiki.freeswitch.org/wiki/Misc._Dialplan_Tools_sched_hangup](http://wiki.freeswitch.org/wiki/Misc._Dialplan_Tools_sched_hangup)

# floating-point - Cooley-Tukey FFT 的准确性 - 浮点数与双精度数

> ID：15071326
> 
> 赞同：0
> 
> 时间：2013-02-25T16:15:00.003
> 
> 标签：floating-point, double, fft

我听说浮点 FFT 不准确，尤其是 cos 和 sin 函数 - 与 double 相比，数字完全不同。

我问是因为我重写了一些代码——Cooley-Tukey FFT 算法；结果是不同的。原始项目使用双精度，新项目使用浮点数。那是我的错误吗？我用 matlab 和 c++ 编写这段代码......很少问 matlab 的 double 和 java 和 c+ double 一样吗？

```
float  PI=3.141592;
// Make sure n is a power of 2
// if (n != (1 << m))
//    throw new RuntimeException("FFT length must be power of 2");

// precompute tables

 for (int i = 0; i < n / 2; i++) {
     cosa[i] = cos (-2 * PI * i / n);
     sina[i] =sin (-2 * PI * i / n);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:18:32.140

对于大多数 FFT 算法，“非准确度”随着输入元素的大小以大约 O(NlogN) 的速度增长；KCS/IEEE754 浮点数的精度约为 24 位。因此对于不是超长的 FFT，数据中的噪声、不完善的抗锯齿和输入的量化通常大于算术误差。

仅当您真正关心小数点后 6 位左右的有效和准确数据时，float 和 double 之间的结果才会“完全不同”。

# python - 没有响应 mechanize 的 Content-Disposition 标头

> ID：15071327
> 
> 赞同：3
> 
> 时间：2013-02-25T16:15:05.603
> 
> 标签：python, http-headers, mechanize, google-ads-api

在 Celery 任务期间，我必须从 AdWords 结算页面下载 csv 文件。而且我不知道我的实现有什么问题，所以需要你的帮助。

登录：

```
browser = mechanize.Browser()
browser.open('https://accounts.google.com/ServiceLogin')
browser.select_form(nr=0)
browser['Email'] = g_email
browser['Passwd'] = g_password
browser.submit()

browser.set_handle_robots(False)
billing_resp = browser.open('https://adwords.google.com/') 
```

没关系，我现在在结算页面上。接下来，我解析了令牌和 id 的结果页面，分析了 Chrome 调试器中的请求标头和操作 url，现在我想发出 POST 请求并接收我的 csv 文件。响应标头（在 Chrome 中）是：

```
content-disposition:attachment; filename="myclientcenter.csv.gz"
content-length:307479
content-type:application/x-gzip; charset=UTF-8 
```

机械化：

```
data = {
    '__u': effectiveUserId,
    '__c': customerId,
    'token': token,
}

browser.addheaders = [
    ('accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'),
    ('content-type', 'application/x-www-form-urlencoded'),
    ("accept-encoding", "gzip,deflate,sdch"),
    ('user-agent', "Mozilla/5.0"),
    ('referer', "https://adwords.google.com/mcm/Mcm?__u=8183865359&__c=3069937889"),
    ('origin', "https://adwords.google.com"),
]

browser.set_handle_refresh(True)
browser.set_debug_responses(True)
browser.set_debug_redirects(True)
browser.set_handle_referer(True)
browser.set_debug_http(True)
browser.set_handle_equiv(True)
browser.set_handle_gzip(True)

response = browser.open(
    'https://adwords.google.com/mcm/file/ClientSummary/',
    data='&'.join(['='.join(pair) for pair in data.items()]),
) 
```

但！此响应中的 Content-Length 标头为 0，并且没有 Content-Disposition。为什么？我该怎么做才能让它发挥作用？

尝试使用请求，但甚至无法通过登录阶段...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:50:50.867

我现在有自己问题的答案（感谢我的团队领导）。

主要错误在于这个不正确的请求数据：

```
data = {
    '__u': effectiveUserId,
    '__c': customerId,
    'token': token,
} 
```

让我们再试一次，有适当的解决方案。

```
# Open Google login page and log in.
browser = mechanize.Browser()
try:
    browser.open('https://accounts.google.com/ServiceLogin')
    browser.select_form(nr=0)
    browser['Email'] = 'email@adwords.login'
    browser['Passwd'] = 'password'
    browser.submit()
except HTTPError:
    raise AdWordsException("Can't find the Google login form") 
```

我们现在已经登录，可以更深入了。

```
try:
    browser.set_handle_robots(False)
    billing_resp = browser.open('https://adwords.google.com/')
except HTTPError:
    raise AdWordsException("Can't open AdWords dashboard page")

# Welcome to the AdWords billing dashboard. We can get 
# session-unique token from this page for the further POST-request
token_re = re.search(r"token:\'(.{41})\'", billing_resp.read())
if token_re is None:
    raise AdWordsException("Can't parse the token")

# It's time for some magic now. We have to construct proper mcsSelector
# serialized data structure. This is GWT-RPC wire protocol hell.
# Paste your specific version from web debugger.
MCS_TEMPLATE = (
    "7|0|49|https://adwords.google.com/mcm/gwt/|18FBB090A5C26E56AC16C9DF0689E720|"
    "com.google.ads.api.services.common.selector.Selector/1054041135|"
    "com.google.ads.api.services.common.date.DateRange/1118087507|"
    "com.google.ads.api.services.common.date.Date/373224763|"
    "java.util.ArrayList/4159755760|java.lang.String/2004016611|ClientName|"
    "ExternalCustomerId|PrimaryUserLogin|PrimaryCompanyName|IsManager|"
    "SalesChannel|Tier|AccountSettingTypes|Labels|Alerts|CostWithCurrency|"
    "CostUsd|Clicks|Impressions|Ctr|Conversions|ConversionRate|SearchCtr|"
    "ContentCtr|BudgetAmount|BudgetStartDate|BudgetEndDate|BudgetPercentSpent|"
    "BudgetType|RemainingBudget|ClientDateTimeZoneId|"
    "com.google.ads.api.services.common.selector.OrderBy/524388450|"
    "SearchableData|"
    "com.google.ads.api.services.common.sorting.SortOrder/2037387810|"
    "com.google.ads.api.services.common.pagination.Paging/363399854|"
    "com.google.ads.api.services.common.selector.Predicate/451365360|"
    "SeedObfuscatedCustomerId|"
    "com.google.ads.api.services.common.selector.Predicate$Operator/2293561107|"
    "java.util.Arrays$ArrayList/2507071751|[Ljava.lang.String;/2600011424|"
    "3069937889|ExcludeSeeds|true|ClientTraversal|DIRECT|"
    "com.google.ads.api.services.common.selector.Summary/3224078220|included|1|"
    "2|3|4|5|"
    "{report_date}|5|{report_date}"  # take a note of this
    "|6|26|7|8|7|9|7|10|7|11|7|12|7|13|7|14|7|15|7|16|7|17|7|18|7|19|7|20|7|21|"
    "7|22|7|23|7|24|7|25|7|26|7|27|7|28|7|29|7|30|7|31|7|32|7|33|6|0|0|0|6|2|34|"
    "35|36|0|34|9|-35|37|100|0|6|0|6|3|38|39|40|2|41|42|1|43|38|44|40|0|41|42|1|"
    "45|38|46|-45|41|42|1|47|0|0|6|0|6|1|48|6|0|49|6|0|0|"
)

# To take stats for today
report_date = datetime.date.today()
mcs_selector = MCS_TEMPLATE.format(
    report_date='%s|%s|%s' % (
        report_date.day,
        report_date.month,
        report_date.year
    ),
)
data = urllib.urlencode({
    'token': token_re.group(1),
    'mcsSelector': mcs_selector,
})

# And... it finally works! Token and proper mcsSelector is all we need. 
# POST-request with this data returns zipped csv file for us with
# current balance state and another info that's not available via AdWords API
zipped_csv = browser.open(
    'https://adwords.google.com/mcm/file/ClientSummary', 
    data=data
)
# Unpack it and use as you wish.
with gzip.GzipFile(mode='r', fileobj=zipped_csv) as csv_io:
    try:
        csv = StringIO.StringIO(csv_io.read())
    except IOError:
        raise AdWordsException("Can't get CSV file from response")
    finally:
        browser.close() 
```

# ruby-on-rails-3 - Rails 动作缓存过期后刷新

> ID：15071328
> 
> 赞同：2
> 
> 时间：2013-02-25T16:15:09.503
> 
> 标签：ruby-on-rails-3, caching, action-caching

我希望过期，然后使用可公开访问的端点刷新控制器操作的缓存。

目前在我的应用程序中，/all 返回缓存的 json，并且 /update 使缓存过期。您可以在下面看到现有的相关代码。我想做的不仅是使缓存过期，而且还强制刷新。所以，我的问题是：

*有没有办法在动作缓存过期后启动它的刷新，而不点击动作？*

如果答案是否定的（正如我开始怀疑的那样），那么最好的方法是什么？我要求更新操作返回 HTTP 200 状态，而不是 301 重定向，因此仅重定向到 /all 不是一个选项。

**供应商控制器**

```
caches_action :all, :expires_in=>2.weeks

....

def all 
  respond_to do |format|
    format.json { render :json => Vendor.all }
    format.html { render :json => Vendor.all }
  end
end

....

def update
  render :nothing => true
  expire_action :action => :all
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:32:12.957

你应该使用[`write_fragment`](http://api.rubyonrails.org/classes/ActionController/Caching/Fragments.html#method-i-write_fragment)

```
def update
  render :nothing => true
  expire_action :action => :all

  cache_path = ActionCachePath.new(self, {:action => :all}, false).path
  write_fragment(cache_path, render_to_string(:json => Vendor.all))
end 
```

可能有帮助的来源：

*   [动作缓存过滤器](http://rubydoc.info/docs/rails/3.1.1/ActionController/Caching/Actions/ActionCacheFilter)
*   [过期动作](http://api.rubyonrails.org/classes/ActionController/Caching/Actions.html#method-i-expire_action)

# php - 查询多个分类组 slug

> ID：15071332
> 
> 赞同：0
> 
> 时间：2013-02-25T16:15:14.590
> 
> 标签：php, wordpress, str-replace, taxonomy

我有一个用于搜索查询的复选框功能。我的问题是我搜索时创建的网址。

```
?ct_zipcode=&ct_event_type=birthday&ct_event_type=photovideo-shoot&Venue-search=true 
```

当我检查了多个分类名称时，我只会在搜索结果中得到最后一个条目。

我需要像这样重写我的网址：

```
?ct_zipcode=&ct_event_type=birthday%2Cphotovideo-shoot&Venue-search=true 
```

有没有一种简单的方法可以通过重写来更改我的网址？我尝试了一点`str_replace`/`preg_replace`没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:16:40.620

将输入字段的名称更改为`ct_event_type[]`，您将获得检查值作为数组。

* * *

HTML 部分应如下所示：

```
<div>
    <label for="ct_<?php echo $name; ?>"> // for should be the same as checkbox id
        <input
          id="ct_<?php echo $name; ?>"
          name="ct_<?php echo $name; ?>"
          type="checkbox"
          style="margin-right:5px; margin-left:5px"
          value="<?php echo $t->slug; ?>" />   // <-- closing input
        <?php echo $t->name; ?>
    </label>
</div> 
```

注意使用`label`.

# r - 使用ggplot2的表格箱线图

> ID：15071334
> 
> 赞同：13
> 
> 时间：2013-02-25T16:15:15.850
> 
> 标签：r, ggplot2, boxplot

我试图用我的数据绘制一个箱线图，在 R 中使用'ggplot'，但我做不到。谁能帮我吗？数据如下表：

```
Paratio  ShapeIdx  FracD   NNDis   Core
-3.00    1.22    0.14    2.71    7.49
-1.80    0.96    0.16    0.00    7.04
-3.00    1.10    0.13    2.71    6.85
-1.80    0.83    0.16    0.00    6.74
-0.18    0.41    0.27    0.00    6.24
-1.66    0.12    0.11    2.37    6.19
-1.07    0.06    0.14    0.00    6.11
-0.32    0.18    0.23    0.00    5.93
-1.16    0.32    0.15    0.00    5.59
-0.94    0.14    0.15    1.96    5.44
-1.13    0.31    0.16    0.00    5.42
-1.35    0.40    0.15    0.00    5.38
-0.53    0.25    0.20    2.08    5.32
-1.96    0.36    0.12    0.00    5.27
-1.09    0.07    0.13    0.00    5.22
-1.35    0.27    0.14    0.00    5.21
-1.25    0.21    0.14    0.00    5.19
-1.02    0.25    0.16    0.00    5.19
-1.28    0.22    0.14    0.00    5.11
-1.44    0.32    0.14    0.00    5.00 
```

而我真正想要的是每列的箱线图，没有任何“逐列”关系。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-25T16:18:05.600

`ggplot2`需要特定格式的数据。在这里，您需要值以及`x=`对应的列 ID和值`y=`在哪里。使用from package to the data 获取这种格式的数据，然后进行绘图。`y``x``melt``reshape2``melt`

```
require(reshape2)
ggplot(data = melt(dd), aes(x=variable, y=value)) + geom_boxplot(aes(fill=variable)) 
```

![ggplot2_boxplot](../Images/8446d28d4f216a8c3cf9f12f2fd2fc87.png)

# asp.net-mvc-3 - 布尔字段上的 TextBoxFor 呈现相同的值，即使它在控制器端进行了修改

> ID：15071346
> 
> 赞同：1
> 
> 时间：2013-02-25T16:15:58.277
> 
> 标签：asp.net-mvc-3, razor

我有一个带有文本框的简单表单（以及我想在特定情况下呈现的模型编辑器）

```
@using (Html.BeginForm("Import", "Flow"))
{
    @Html.TextBoxFor(model => model.IsConfirmed)

    @if (Model.IsConfirmed)
    {
        @Html.EditorFor(m => m.Preview)
    }
} 
```

此视图中使用的模型如下

```
public class ImportViewModel
{
    public Boolean IsConfirmed { get; set; }

    public PreviewViewModel Preview { get; set; }

    public ImportViewModel()
    {
        this.IsConfirmed = false;
    }
} 
```

以下控制器上的表单发布

```
public class FlowController
{
    [HttpPost]
    public ActionResult Import(ImportViewModel model)
    {
        try
        {
            if (ModelState.IsValid)
            {
                if (model.IsConfirmed)
                {
                    // do something else
                }
                else
                {
                    model.Preview = Preview(model.strCA, model.SelectedAccount);
                    model.IsConfirmed = true;

                    return View(model);
                }
            }
        }
        catch (Exception ex)
        {
            throw new Exception("arf", ex);
        }

        return RedirectToAction("Index", "Home");
    }
} 
```

首次加载时，文本框包含“false”

发布时，模型的 IsConfirmed 属性设置为“true”，并且此模型被传递到同一视图。

我希望文本框是“真”，但它仍然是“假”......而且 Preview 属性被正确渲染，所以这意味着 Model.IsConfirmed 确实是真的......

我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:17:58.877

如果您打算修改它，请确保从 ModelState 中删除该值：

```
ModelState.Remove("IsConfirmed");
model.IsConfirmed = true; 
```

您需要这样做的原因是，按照设计，所有 Html 帮助程序（例如`TextBoxFor`）在绑定时将首先在 ModelState 中查找一个值，只有没有找到它们才会使用您的模型上的值。并且由于 ModelState 中有一个同名的值（来自 POST 请求），这就是正在使用的值。

# javascript - Tablesorter 无法在 updateComplete 上应用搜索条件

> ID：15071348
> 
> 赞同：1
> 
> 时间：2013-02-25T16:16:03.287
> 
> 标签：javascript, jquery, search, tablesorter

我有一个“tablesorter 表”，其中包含第一列中的类别名称。我使用快捷按钮过滤行，这些快捷按钮会触发特定的“搜索”操作，具体取决于哪个是活动的：

```
function do_filtering() {
    var category = $('#categories .active a').attr('data-filter-text');
    var columns = [];
    columns[0] = category;
    $('table').trigger('search', [columns]);
} 
```

表的内容可能会改变。到目前为止，我在桌子上触发了两个事件：“updateCell”和“search”，它得到了正确更新。

我需要将这些调用分开：

*   “updateCell”将由单元格编辑器触发（由特定列内容的“排序器”附加）
*   更新单元格后将触发“搜索”。

不幸的是，“updateComplete”处理程序中的过滤不起作用，请参阅：http: [//jsfiddle.net/8cg4f/352/](http://jsfiddle.net/8cg4f/352/)

更新表格后如何保留搜索条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:41:25.453

好吧，问题似乎是由于过滤器输入为空，过滤器小部件在更新后显示所有行。我有两种解决方案，第二种可能更好，因为第一种方法会导致闪烁：

1）`setTimeout`在回调中添加一个，时间为1毫秒（[demo](http://jsfiddle.net/Mottie/8cg4f/355/)）：

```
 $('td').click(function () {
        resort = false;
        $("table").trigger('updateCell', [$(this).closest('td'), resort, function(table){
            setTimeout(function(){ do_filtering(); }, 1);
        }]);
    }); 
```

2）更新过滤器，并隐藏过滤器行（[演示](http://jsfiddle.net/Mottie/8cg4f/356/)）：

CSS

```
.tablesorter-filter {
    display: none;
} 
```

代码

```
function do_filtering() {
    var category = $('#categories .active a').attr('data-filter-text');
    $('.tablesorter-filter:first').val(category).trigger('search');
}

$('td').click(function () {
    resort = false;
    $("table").trigger('updateCell', [$(this).closest('td'), resort, function(table){
        do_filtering();
    }]);
}); 
```

# php - Joomla - 在较小的分辨率（手机）上隐藏响应模块的一部分

> ID：15071351
> 
> 赞同：0
> 
> 时间：2013-02-25T16:16:08.077
> 
> 标签：php, css, joomla, responsive-design, joomla2.5

我正在使用响应式幻灯片模块 - Lof ArticlesSlideShow ( **[DEMO](http://landofcoder.com/demo/joomla25x/f33/modules/lof-articles-slideshow-module)** )。

当我将窗口大小调整为较小尺寸时，如何隐藏“导航器”部分（带有缩略图的滚动文章行）。

现在，如果我将浏览器窗口的大小重新调整为手机显示屏的大小（摩托罗拉 Defy+），导航器部分将出现在图像、标题和 introtext 之上。在手机浏览器上打开demo链接，效果一样。

由于文章的链接在标题上，它隐藏在导航器下，因此无法访问文章页面。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:34:27.917

尝试将此添加到自定义 CSS 文件或当前文件：

```
@media screen and (max-width: 480px) {
    .lof-buttons-control {
        display: none;
    }
} 
```

这意味着屏幕的最大宽度，直到这段代码开始启动是 480px。从那时起，它隐藏了 Navigator 部分。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:57:18.640

@Lodder - 太棒了！！！！！！！！！！:D

我替换**`.lof-buttons-control`**为**`.lof-ass .lof-navigator`**它并且有效：D

```
@media screen and (max-width: 480px) {
.lof-ass .lof-navigator {
        display: none;
    }
} 
```

那意义重大！！！！

# git - Git责备-M：意外行为

> ID：15071353
> 
> 赞同：2
> 
> 时间：2013-02-25T16:16:09.627
> 
> 标签：git, blame

当使用 git blame -M 来检测一个文件中的代码移动时，我得到了我无法向自己解释的结果。

首先我提交以下文件（file.cpp）：

```
void func1(){return;}[CR][LF]
int func2(){return 23;}[CR][LF] 
```

然后我通过移动第一行中的内容并添加新内容来修改它：

```
float newFunc(){return 23.0;}[CR][LF]
int func2(){return 23;}[CR][LF]
[CR][LF]
[CR][LF]
void func1(){return;}[CR][LF] 
```

日志现在如下所示：

```
>git log --oneline -2
18c670f modified file.cpp
92b4186 added file.cpp 
```

现在我责备：

```
git blame -s -w -M file.cpp
18c670fa 1) float newFunc(){return 23.0;}
92b4186d 2) int func2(){return 23;}
18c670fa 3)
18c670fa 4)
18c670fa 5) void func1(){return;} 
```

我想知道为什么包含 func1() 的行不被识别为已移动。我试图减少所需字符的数量（即 -M4 等）。此外，由于 -w 选项，空格应该无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-20T07:12:28.303

（3年后）

> 我想知道为什么包含的行`func1()`不被识别为已移动。

这可能与最近（2016 年 7 月）为即将发布的 git 2.10 修复的错误有关：

请参阅[David Kastrup (](https://github.com/fedelibre) [)的](https://github.com/fedelibre)[提交 17a07e2](https://github.com/git/git/commit/17a07e2ae2de36cadfac2349189e0c65e1c08d07)（2016 年 5 月 28 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 7418a6b](https://github.com/git/git/commit/7418a6b1a056d076b07087bdd27ad51baebc95e0))^(中，2016 年 7 月 19 日）)[`fedelibre`](https://github.com/fedelibre)
^([`gitster`](https://github.com/gitster))

> ## `blame`: 需要 0 个上下文行，同时查找移动的行`-M`
> 
> 需要 1 个上下文行的核心部分`git blame -M`，但在代码中找不到理由；它会导致像[该线程“理解行为`git blame -M`”](http://thread.gmane.org/gmane.comp.version-control.git/255289)中讨论的伪影。
> 
> 该函数`diff_hunks`是`diff`引擎的包装器。
> 将上下文长度显式放入此包装器中（而不是不传递参数而只是在函数中将上下文长度设置为零）清楚地表明有人*希望*使用不同的值调用它。
> 
> 据我记得，文件中没有文档或理由*。*
> 也许它会崩溃或陷入无限循环。也许它可以在某个时间点这样做，但现在不再这样做了。
> 
> 不确定它是否有帮助，但`ctxlen = 1`似乎被添加回[d24bba8 （`git-pickaxe -M`：文件中的责备行移动）](https://github.com/git/git/commit/d24bba8008d8e537cb48e9760f7621cbe7ae9e38)。
> 
> 似乎不检测单线运动是每个设计，只是文档对此并不精确。这种增强可以被视为功能请求吗？

[该线程](http://permalink.gmane.org/gmane.comp.version-control.git/295795)对先前选择的历史有了更多的了解。

> 唯一可以远程暗示为什么我们认为非零上下文是个好主意的事情[是 this](http://thread.gmane.org/gmane.comp.version-control.git/28336/focus=28580)，我在其中说：
> 
> > 我们可能需要使用一些周围的上下文行来更好地通过“ `ciff`”算法识别复制源，但这是一个次要的实现细节。

# c - 什么数据结构适合这个数据

> ID：15071355
> 
> 赞同：2
> 
> 时间：2013-02-25T16:16:12.430
> 
> 标签：c, data-structures

这是我的工作，但不是家庭工作。我正在尝试决定如何最好地使用本机数据结构来表示我拥有的数据（本机我的意思是我不能在 C++ 中使用 STL，它是 C++ 代码。它是我们的设计决定不使用 STL 并且没有办法改变它或违反它）

数据如下：

有一个变量 say int 来表示 ipaddr 比如说 192.168.10.77（假设它存储在一个从 192.168.10.77 唯一获得的 int 中），它可以调用 deviceId。

现在，对于每个这样的 deviceId，还有其他字段与多个服务相关联，例如服务 1、服务 2 等... 与每个设备关联的服务数量从一个 deviceId 到另一个是可变的。

因此，数据样本可能如下所示：

```
192.168.10.77 

    service1

    service2

    service3

    service4

192.168.10.98

    service1

    service2

192.168.10.97

    service1 
```

现在我将它存储在一个低效的数据结构中，如下所示。

我有一个结构：

```
typedef struct
{
   deviceId d;
   serviceId s;
}mystr; 
```

然后我使用一个结构数组，它包含

```
mystr mylist[64]; 
```

所以这个数组的条目看起来像

```
mylist[0].d = 192.168.10.77

mylist[0].s = service1

mylist[1].d = 192.168.10.77

mylist[1].s = service2

mylist[2].d = 192.168.10.77

mylist[2].s = service3

mylist[3].d = 192.168.10.77

mylist[3].s = service4

mylist[4].d = 192.168.10.98

mylist[4].s = service1

mylist[5].d = 192.168.10.98

mylist[5].s = service2

... ... and so on .... 
```

本质上，deviceId 值的重复次数与与其关联的服务一样多。

我需要一些更高效的东西，因为稍后我必须对与设备关联的所有服务进行分组。

所以要做到这一点，我可能必须搜索 deviceId 并将其服务组合在一起。我不知道如何按 deviceId 进行搜索，因为它可以具有任何值。

使用一些最佳数据结构来表示这些数据的更好方法是什么？

[我可以将其视为链表，但无法提出`struct Node{ }`它]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:25:11.287

`typedef struct
{ deviceId d;
serviceId s[100];` ***需要为 1 台设备提供超过 1 项服务***

```
 `}mystr;  

mystr mylist[64];` 
```

或者你可以有一个像这样的链表

` 结构设备 {
设备 ID; *服务; }

```
 typedef struct serviceid{
 {
   *service;
 }service; 
```

` 通过最后一个服务 ID 指向 null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:28:16.060

考虑使用 gethostbyname 和 gethostbyaddr。先试一个，如果失败，再试另一个。然后你只需要存储一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:57:13.720

这个库如何将其存储为基本哈希表？

[http://troydhanson.github.com/uthash/](http://troydhanson.github.com/uthash/)

免责声明：我对 C 只是模糊熟悉

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:41:16.280

您可以拥有设备链接列表和服务链接列表

```
typedef Service{
 serviceId s;//store service id
 Service *nextService;//link to the different services supported by the device, end by null
}*deviceServiceList;

typedef struct Device{
 deviceId d;//store the device id
 Service *s;//store the list of service available for this device
}myDevices; 
```

设备可以存储在设备数组中，或者您可以创建设备链接列表

# asp.net - 为 IIS7 Web 环境创建符号链接

> ID：15071357
> 
> 赞同：2
> 
> 时间：2013-02-25T16:16:18.940
> 
> 标签：asp.net, iis-7, asp-classic, cross-domain, symlink

. .

我们越来越需要在不同的 Web 环境之间共享 Web 资源（文件、文档、图像等）。

我正在研究设置符号链接来支持这一点，但我不知道如何设置它。（或者设置虚拟目录会更好吗？我的部分问题是，当前设置它的最佳实践是什么？）

例如，假设：

*   该环境在 IIS7 平台上运行，并且必须在 Windows 环境中。
*   共享文件需要使用 TFS 进行维护。
*   这些网站占据同一个 IIS 实例上的不同站点，并驻留在同一个物理服务器上。
*   这些站点是多个 Web 平台——例如，一个站点是 ASP.NET，而另一个站点运行的是经典的 ASP。
*   所有站点都在同一个公司保护伞下，这就是需要共享资源的原因。
*   所有站点都从同一个 SQL Server 数据库实例中提取数据。

我将如何设置符号链接来支持这一点？或者，就此而言，符号链接是解决此问题的最佳方式吗？

提前致谢！

**编辑：**上述示例的附录：我的经典 ASP 环境还可以包含 ASP.NET 虚拟子文件夹。例如，我可以让我的域 www.somedomain.com 在经典 ASP 中运行，但有一个子目录 (www.somedomain.com/dotnetapp) 作为 ASP.NET 应用程序运行。ASP.NET 使用的虚拟目录必须能够访问与经典 ASP 环境相同的文件资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:52:47.990

在 Windows 上，虚拟目录是执行此操作的标准方法。它还允许您使用 IIS 的虚拟目录功能和 Windows/IIS 权限管理。

# c# - 如何将定时器分辨率从 C# 设置为 1 ms？

> ID：15071359
> 
> 赞同：10
> 
> 时间：2013-02-25T16:16:20.517
> 
> 标签：c#, timer, windows-server-2008-r2

我使用过[这个工具](http://www.lucashale.com/timer-resolution/)并注意到我的 Windows Server 2008 R2 Standard 的分辨率为 15 毫秒，而 Windows 8 的分辨率计时器为 1 毫秒。

我更愿意在 Windows Server 2008 R2 上将计时器分辨率设置为 1 毫秒，因为我在其上运行低延迟软件。

我找到了这篇[msdn 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743626%28v=vs.85%29.aspx)，但它没有解释如何从 C# 程序更改计时器分辨率。我怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T16:21:34.900

你可以试试这个：

```
public static class WinApi
{
    /// <summary>TimeBeginPeriod(). See the Windows API documentation for details.</summary>

    [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Interoperability", "CA1401:PInvokesShouldNotBeVisible"), System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Security", "CA2118:ReviewSuppressUnmanagedCodeSecurityUsage"), SuppressUnmanagedCodeSecurity]
    [DllImport("winmm.dll", EntryPoint="timeBeginPeriod", SetLastError=true)]

    public static extern uint TimeBeginPeriod(uint uMilliseconds);

    /// <summary>TimeEndPeriod(). See the Windows API documentation for details.</summary>

    [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Interoperability", "CA1401:PInvokesShouldNotBeVisible"), System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Security", "CA2118:ReviewSuppressUnmanagedCodeSecurityUsage"), SuppressUnmanagedCodeSecurity]
    [DllImport("winmm.dll", EntryPoint="timeEndPeriod", SetLastError=true)]

    public static extern uint TimeEndPeriod(uint uMilliseconds);
} 
```

并像这样使用它：

```
WinApi.TimeBeginPeriod(1); 
```

回到原来的样子：

```
WinApi.TimeEndPeriod(1); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-13T06:09:03.140

实现这一点的更好的代码是：

```
using System;
using System.Runtime.InteropServices;
using System.Threading;

internal sealed class TimePeriod : IDisposable
{
    private const string WINMM = "winmm.dll";

    private static TIMECAPS timeCapabilities;

    private static int inTimePeriod;

    private readonly int period;

    private int disposed;

    [DllImport(WINMM, ExactSpelling = true)]
    private static extern int timeGetDevCaps(ref TIMECAPS ptc, int cbtc);

    [DllImport(WINMM, ExactSpelling = true)]
    private static extern int timeBeginPeriod(int uPeriod);

    [DllImport(WINMM, ExactSpelling = true)]
    private static extern int timeEndPeriod(int uPeriod);

    static TimePeriod()
    {
        int result = timeGetDevCaps(ref timeCapabilities, Marshal.SizeOf(typeof(TIMECAPS)));
        if (result != 0)
        {
            throw new InvalidOperationException("The request to get time capabilities was not completed because an unexpected error with code " + result + " occured.");
        }
    }

    internal TimePeriod(int period)
    {
        if (Interlocked.Increment(ref inTimePeriod) != 1)
        {
            Interlocked.Decrement(ref inTimePeriod);
            throw new NotSupportedException("The process is already within a time period. Nested time periods are not supported.");
        }

        if (period < timeCapabilities.wPeriodMin || period > timeCapabilities.wPeriodMax)
        {
            throw new ArgumentOutOfRangeException("period", "The request to begin a time period was not completed because the resolution specified is out of range.");
        }

        int result = timeBeginPeriod(period);
        if (result != 0)
        {
            throw new InvalidOperationException("The request to begin a time period was not completed because an unexpected error with code " + result + " occured.");
        }

        this.period = period;
    }

    internal static int MinimumPeriod
    {
        get
        {
            return timeCapabilities.wPeriodMin;
        }
    }

    internal static int MaximumPeriod
    {
        get
        {
            return timeCapabilities.wPeriodMax;
        }
    }

    internal int Period
    {
        get
        {
            if (this.disposed > 0)
            {
                throw new ObjectDisposedException("The time period instance has been disposed.");
            }

            return this.period;
        }
    }

    public void Dispose()
    {
        if (Interlocked.Increment(ref this.disposed) == 1)
        {
            timeEndPeriod(this.period);
            Interlocked.Decrement(ref inTimePeriod);
        }
        else
        {
            Interlocked.Decrement(ref this.disposed);
        }
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct TIMECAPS
    {
        internal int wPeriodMin;

        internal int wPeriodMax;
    }
} 
```

通过以下方式使用它：

```
using (new TimePeriod(1))
{
    ////...
} 
```

# php - 通过 PHP 中的特定键比较 JSON 数组

> ID：15071361
> 
> 赞同：0
> 
> 时间：2013-02-25T16:16:22.147
> 
> 标签：php, json, compare

我想使用数组 A 中的数据（下），但仅当数组 A 中的项目**ID**与数组 B中的**ID****不**匹配时（也，下）。我将如何通过 PHP 通过**ID** (from ) 键比较这两个 JSON 数组？我想我首先需要将它们转换为，但我不知道在那之后去哪里？**`items`**`items``json_decode`****

 *****请注意，与数组 A 不同，数组 B 有更多的嵌套（“items”、“something”和“posts”）。我想比较来自 的 ID `items`，**而不是** `posts`。*

数组 A：

```
{
  "data": [{
      "category": "Games",
      "id": "45345"
    }, 
    {
      "category": "Music",
      "id": "345345345"
    }, 
    {
      "category": "Food",
      "id": "1"
    }, 
    {
      "category": "Pets",
      "id": "13245345"
    }]
} 
```

阵列 B：

```
{
  "data":  {
    "something": "blah",
    "posts":  [{
        "id": "34241",
        "title": "orange"
      }],
    "items":  [{
        "id": "1",
        "name": "orange"
      },
      {
        "id": "2",
        "name": "dog"
      },
      {
        "id": "3",
        "name": "cat"
      },
      {
        "id": "4",
        "name": "apple"
      }]
  }
} 
```

对于上述情况，它将遍历数组 A 并输出数组 A 中除第三项之外的所有内容，因为该项 (1) 的 id 与数组 B 中的一个 id 匹配`items`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:25:08.023

将项目解码为 PHP 数组。使用像 array_diff() 这样的 SPL 来获取差异比较的结果。

帮助您入门的参考资料：

[http://www.php.net/manual/en/function.array-diff.php](http://www.php.net/manual/en/function.array-diff.php)

[http://php.net/manual/en/function.array-diff-key.php](http://php.net/manual/en/function.array-diff-key.php)

[http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

应该是关于你在寻找什么

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:47:49.387

根据我的理解，您需要一个两步过程。第一个是从第一个 JSON blob 中提取 id，第二个是过滤第二个 JSON blob。所以基本上，我们有`map`和`filter`。碰巧我们可以为此使用 PHP 的内置函数：

```
$ids = array_map(
    function($value) { 
        return $value['id']; 
    }, 
    $array2['data']['items']
); 
```

首先，我们将第二个数组的 items 元素展平为单独的 id。我们在 data.items 数组上“映射”，并返回`$id`每个数组的属性。现在，我们有一个 id 数组...

```
$new = array_filter(
    $array1['data'],
    function($var) use ($ids) {
        return !in_array($var['id'], $ids);
    }
); 
```

现在，我们使用它来过滤第一个 blobs 数组以确定一个元素是否是新的。所以我们使用数组过滤器来为我们处理它。我们需要做的就是检查`$ids`数组以查看当前数据的 id 是否存在（如果存在，则将其丢弃）。因此，我们希望将数组过滤为仅是`not in array of $ids`（因此`!in_array($var['id'], $ids)`...）的变量****

# ios - 根据来自 NSFetchedResultsController 的 NSPredicate 过滤 UITableView

> ID：15071364
> 
> 赞同：1
> 
> 时间：2013-02-25T16:16:29.013
> 
> 标签：ios, objective-c, uitableview, core-data, nsfetchedresultscontroller

我正在尝试过滤 a 中的对象`UITableView`，该对象通过 a 从 Core Data sqlite 获取其数据`NSFetchedResultsController`。它在过滤之前工作正常，但现在我需要能够点击一个按钮并让它只显示其属性（a `BOOL`）之一为的对象`YES`。让我们称之为`isFavourite`。

我有点困惑从哪里开始。我理解谓词的概念，并且我已经构建了这个，它应该可以工作：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat: @"isFavourite == 1"]; 
```

但是，对于如何将该谓词附加到`NSFetchedResultsController`. 我已经分配并初始化了它，使用一个单独的获取请求，它简单地返回了该实体的所有对象（并且效果很好）。如果它已经被初始化，我可以改变它的获取请求吗？如果是这样，我该怎么做，那么我该如何让它重新运行查询。然后我是否需要手动更新`UITableView`with`reloadData`或类似的。那么，当我想关闭此过滤器并返回查看所有结果时该怎么办？

我在这里阅读了很多现有问题，但大多数似乎与搜索栏有关，这使答案变得更加复杂。我还阅读了 Apple 文档，但倾向于发现它的编写方式非常神秘。我的代码在下面，我只是该`filterFavourite`方法的一部分，这就是我寻求帮助和澄清的地方。

```
- (NSFetchedResultsController *) fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName: @"Quote" inManagedObjectContext: [[CoreDataController sharedCoreDataController] managedObjectContext]];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey: @"quoteID" ascending: YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    [fetchRequest setFetchBatchSize: 50];

    NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest: fetchRequest managedObjectContext: [[FQCoreDataController sharedCoreDataController] managedObjectContext] sectionNameKeyPath: nil cacheName: nil];
    self.fetchedResultsController = theFetchedResultsController;
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;
}

- (IBAction) filterFavourite: (id) sender
{
    if (isDisplayingFavourite) {
        // Switch to showing all..
        NSPredicate *predicate = [NSPredicate predicateWithFormat: @"isFavourite == 1"];

        isDisplayingFavourite = NO;
    } else {
        // Switch to showing favourites only..

        isDisplayingFavourite = YES;
    }

} 
```

`controllerDidChangeContent`编辑：此代码中从未调用委托方法“ ”。我也不知道为什么会这样。极其混乱，Core Data 就像一堵砖墙。事实上，四个委托方法中没有一个被调用过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:19:17.820

您不将谓词附加到`NSFetchedResultsController`- 您将其附加到`NSFetchRequest`. 它有一个名为的方法`setPredicate:`，它的功能与它的名字所暗示的完全一样。

`fetchRequest`您可以通过更新属性并`performFetch:`再次调用来修改获取请求。您也可以将您的`fetchedResultsController`ivar 设为 nil，并使上面的代码足够灵活，以添加任何有用的谓词。下次`fetchedResultsController`调用您的方法时，它将使用当前谓词为您创建一个新实例。这将您的所有`NSFetchedResultsController`代码整合到一种方法中。它的 CPU 使用率可能稍高一些，但也可能更容易维护。

# php - Codeigniter 多张图片上传，获取每个文件名

> ID：15071367
> 
> 赞同：0
> 
> 时间：2013-02-25T16:16:32.187
> 
> 标签：php, html, codeigniter, image-upload

我正在使用下面的代码来处理图像上传。每件事都进展顺利。我允许选择上传两张图片，一张是徽标，另一张是屏幕截图。

现在，当我提供编辑上传的选项时，比如选择要上传的新文件并替换旧文件，我遇到了这个问题。

在我的`images[]`数组中，我将在循环的帮助下一一获取图像名称。但是，当用户想要更改第二张图像（屏幕截图）并且在徽标字段中没有选择任何内容时，应该只更改屏幕截图。

但在`images[]`数组中，第一个元素将是上传的第一个元素。如果我选择两个图像都可以，我会得到 logo.jpg`images[0]`和 screenshot.jpg `images[1]`。但是当我只选择第二张图片时，我会在 .jpg 中得到 screenshot.jpg `images[0]`。但是，数组的第一个元素应该是空白的，并且数组的第二个元素应该具有第二个图像上传选项的数据，以便更改生效。我怎样才能做到这一点？

```
$config['upload_path'] = '../uploads/';
            $config['allowed_types'] = '*';
            $config['max_size'] = '0';
            $config['max_width']  = '0';
            $config['max_height']  = '0';

            $this->load->library('upload', $config);
            $image = array();
            foreach ($_FILES as $key => $value) {

                if (!empty($value['tmp_name'])) {

                    if ( ! $this->upload->do_upload($key)) {
                        $error = array('error' => $this->upload->display_errors());
                        //failed display the errors
                    } else {
                        //success
                        $data =  $this->upload->data();
                            $image[]= $data['file_name'];
                    }

                }
           } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:13:52.053

请记住，您必须在每次上传时初始化上传库。

```
$this->load->library('upload'); 
$this->upload->initialize($config); 
```

用户指南：[http ://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

**编辑：**

您可以检查 $_FILES 数组并检查是否有屏幕截图输入的名称和徽标输入，如果没有，您可以创建您需要的数组

我发现了这个：

> 创建该数据结构的一种更简单的方法是命名您的 HTML 文件输入不同的名称。>如果要上传多个文件，请使用：

```
<input type=file name=file1>
<input type=file name=file2>
<input type=file name=file3> 
```

> 每个字段名称将是 $_FILES 数组中的一个键。

[http://www.php.net/manual/es/features.file-upload.multiple.php#53933](http://www.php.net/manual/es/features.file-upload.multiple.php#53933)

# asp.net - 哪一个更适合自定义错误：HTML 或 View

> ID：15071373
> 
> 赞同：0
> 
> 时间：2013-02-25T16:16:48.670
> 
> 标签：asp.net, asp.net-mvc, error-handling

我一直在想，当我的 Web 应用程序中发生错误时，使用 html 页面作为错误页面时渲染会更好，因为除非我的整个服务器关闭或使用动态服务器端页面，否则它将始终运行受到导致错误的问题的影响，因此系统可能会以无限循环来呈现错误页面。但我可能没有仔细考虑，所以我问你你对这个案子的看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:39:00.087

这主要取决于两个因素：

*   是否要重用布局视图以将错误页面集成到站点设计中
*   是否要在错误页面中包含任何动态内容（用户名称、链接等）

无论哪种情况，您都需要使用视图而不是 Html 页面。后者的优点是不能导致进一步的异常。但是，与视图一起使用的控制器中经过仔细编码的 OnException 方法可以提供比静态 Html 页面更好的用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:19:25.170

保持你的错误页面静态 html。

例如，如果您使用动态视图，布局页面是否存在问题 - 您的错误页面将不会呈现，并且正如您所提到的，您最终会陷入无限循环。

如果您想捕获异常并提醒您，请查看 Elmah。

# c# - 如何确定在来自 c# 的 ms sql 连接中使用哪种身份验证

> ID：15071380
> 
> 赞同：0
> 
> 时间：2013-02-25T16:17:08.013
> 
> 标签：c#, sql, sql-server, ado.net

ADO 中有没有办法获得 ms sql 连接使用哪种身份验证？如果我们使用 Windows 身份验证或 SQL 身份验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:19:11.630

使用`SqlConnectionStringBuilder`该类解析连接字符串并检查`UseIntegratedSecurity`or`UserName`属性。

# d3.js - 结合jquery的jedit和d3

> ID：15071385
> 
> 赞同：1
> 
> 时间：2013-02-25T16:17:41.047
> 
> 标签：d3.js, jeditable

我对 d3 很陌生，并试图将一些 jquery 与 d3 功能合并。基本上我想要一个可以让我的用户编辑的段落列表。

有一个很好的 jquery 插件，称为 jedit，非常适合我的需求： http: [//www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable)

我可以毫无问题地让它工作，但是当我尝试使用 d3 生成我的段落时，我似乎不走运。

我的 jquery 插件具有以下功能：

```
$(function() {
        $(".editable_comments").editable("save.php", { }); 
}); 
```

它适用于以下元素：

```
<p class="editable_comments">test</p> 
```

但在以下 d3 代码上并没有那么多：

```
<div id="comments" style="float:left; width:50px; padding-top:33px;">

</div>

<script  type="text/javascript" >

 d3.json("json_data.php?", function(data) {

 d3.select("#comments").selectAll("p")
    .data(data)
    .enter()
    .append("p")
    .text(function(d) {return d.NAME;})
    .attr("class", "editable_comments");

}); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:33:55.567

我在 d3 代码运行之前调用了我的 .editable ，这就是为什么它不能“工作”或更具体地说是为什么我不能编辑 d3 生成的段落的原因。

一旦我将 .editable 调用移动到 d3.json 函数的末尾

# wordpress - 在具有其他网站的服务器上托管 wordpress 博客

> ID：15071386
> 
> 赞同：0
> 
> 时间：2013-02-25T16:17:42.487
> 
> 标签：wordpress, installation, hosting

我在自己的文件夹上安装了 wordpress，在托管另一个站点（非 wp）的服务器上。我想将 wp 安装保留到它自己的子目录，但将 url 更改为直接指向博客（以摆脱 url 中的 /wp）。可能吗？index.php 必须如何配置才能正确指向托管的两个站点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:26:01.627

您应该将子域设置在您的 cPanel 之类的虚拟主机中。

示例：我想要：`blog.domain.com`和`www.domain.com`

`www.domain.com`默认设置。

在您的托管设置中，您需要创建`blog`子域并将其直接指向另一个目录。

# ios - AVAssetWriter 未知错误

> ID：15071387
> 
> 赞同：12
> 
> 时间：2013-02-25T16:17:43.847
> 
> 标签：ios, objective-c, ipad, avfoundation

我正在尝试使用`AVAssetWriter`. 实现的代码大部分时间都可以正常工作，但在随机时刻，编写器会出现问题

```
AVAssetWriter *videoWriter;
...
[videoWriter finishWriting];
NSLog(@"videoWriter error %@",videoWriter.error); 
```

收到的错误是：

```
Error Domain=AVFoundationErrorDomain Code=-11800 "The operation could not be completed" 
UserInfo=0x1f839cd0 {NSLocalizedDescription=The operation could not be completed,
 NSUnderlyingError=0x1e59efb0 "The operation couldn’t be completed. (OSStatus error -12633.)", 
NSLocalizedFailureReason=An unknown error occurred (-12633)} 
```

写图片：

```
-(void)writeFrame:(WriteableFrame*)wF
{
    if([writerInput isReadyForMoreMediaData])
    {
        CMTime presentTime = CMTimeMake(wF.frameTime, 1000);
        CGImageRef tmpImgRef = [wF.currentImage CGImage];
        buffer = [self pixelBufferFromCGImage:tmpImgRef];
        if(buffer)
        {
            [adaptor appendPixelBuffer:buffer withPresentationTime:presentTime];
            CVPixelBufferRelease(buffer);
        }
    }
    else
    {
        NSLog(@"error");
    }
} 
```

有人有这样的问题吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-27T07:46:47.130

我发现了问题，它是在同一帧时间放置两帧。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-23T18:19:57.203

直接来自 DTS

> 错误 -12633 是 InvalidTimestamp

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-13T16:52:41.047

如果推送的帧出现故障，也可能发生这种情况

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-31T16:30:40.920

如果你给 a `sampleBuffer`，`AVAssetWriter`则销毁关联的`AVAssetReader`，未来的 AVAssetReaders 可能会尝试重用`sampleBuffer`之前`AVAssetWriter`完成的它。这与 中的`AVAssetWriter`文档相矛盾`AVAssetWriterInput.h`，据我所知，在`AVAssetWriter`您获得回调之前无法确定是否完成`finishWritingWithCompletionHandler`，但这可能导致 OSStatus 错误 -12633。

> @method appendSampleBuffer：
> 
> 接收器将保留 CMSampleBuffer 直到它完成，然后释放它。将 CMSampleBuffer 或其内容传递给此方法后，请勿对其进行修改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-29T02:28:49.763

当我的像素缓冲区中的图像与输入像素缓冲区适配器所期望的宽度/高度尺寸不同时，我遇到了同样的错误，这取决于您将 sourcePixelBufferAttributes 设置为 for(kCVPixelBufferWidthKey, kCVPixelBufferHeightKey)。确保像素缓冲区具有相同的尺寸。就我而言，我的应用程序有时会绘制 1x1 图像，因为我打算绘制纯色图像，但我忽略了将单色像素放大到全尺寸。

# r - 如何在R中用分号分隔每一行函数体

> ID：15071389
> 
> 赞同：1
> 
> 时间：2013-02-25T16:17:46.183
> 
> 标签：r, function

在 RI 中有一个函数“getHbasedPortfolio”。函数体如下：

```
body("getHbasedPortfolio")
{
  className <- name
  pf = list(name = name,
            get = function(x) pf[[x]],
            set = function(x,value) pf[[x]] <- value
            )

  pf$getCash = function(date) {

    data <-data.frame(name=name,value="null")
    return(data)
  }
  pf$setCash = function(cash, date) {

    a <- insertCashTable(pf$name, cash, date)
    return("success")

  }

  pf <- list2env(pf)
  class(pf) <- name
  return(pf)
} 
```

我需要用逗号分隔每一行。所以我写了一个代码来做到这一点。我使用的代码如下：

```
body <-"";
 for(i in 1:length(as.character(body("getHbasedPortfolio")))){
      body <- paste(body,as.character(body("getHbasedPortfolio"))[i])
      body <- paste(body,";")
    } 
```

现在我得到以下输出。

> body [1] " { ; className <- name ; pf = list(name = name, get = function(x) pf[[x]], set = function(x, value) pf[[x]] <- value ) ; pf$getCash = function(date) {\n data <- data.frame(name = name, value = \"null\")\n return(data)\n} ; pf$setCash = function(cash, date) {\na <- insertCashTable(pf$name, cash, date)\n return(\"success\")\n} ; pf <- list2env(pf) ; class(pf) <- name ; return(pf ) ;"

问题是 pf$setCash 和 pf$getCash 下的语句没有用逗号分隔。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:06:24.097

你可以使用这样的东西：

```
 dat <- data.frame(capture.output(getHbasedPortfolio)) 
```

这将通过 data.frame 中的一行保存您的函数行。然后，您可以将其保存在您的数据库中。

**编辑**

您可以使用 dat 逐行编写。

```
paste(data.frame(capture.output(getHbasedPortfolio))[,1],
      collapse=',') ## I would use another separator here becuase comma is confusing 
```

# php - 规范化字符串中的空格？

> ID：15071391
> 
> 赞同：1
> 
> 时间：2013-02-25T16:17:56.503
> 
> 标签：php

我需要规范化字符串中的空格：

1.  删除多个相邻空格
2.  删除字符串开头和结尾的空格

例如`" my name is "`=>`my name is`

我试过了

```
str_replace('  ',' ',$str); 
```

我还尝试[了 php 用一个空格替换多个空格，](https://stackoverflow.com/questions/2368539/php-replacing-multiple-spaces-with-a-single-space)但这也没有用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T16:22:08.790

用一个空格替换任何出现的 2 个或更多空格，并修剪：

```
$str = preg_replace('/ {2,}/', ' ', trim($input)); 
```

注意：在`\s`这里使用空白字符类是一个相当糟糕的主意，因为它会匹配换行符和您可能不期望的其他空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:22:39.503

使用正则表达式

```
$text = preg_replace("~\\s{2,}~", " ", $text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-03T10:41:13.533

该`\s`方法也去除了换行符，并且`/ {2,}/`方法在换行符之后忽略了行首的制表符和空格。

如果您想保存换行符并获得更准确的结果，我建议[对类似问题提出这个令人印象深刻的答案](https://stackoverflow.com/a/3469155/214517)，以及[对先前答案的改进](https://stackoverflow.com/a/17752989/214517)。根据他们的说明，您的问题的答案是：

```
$norm_str = preg_replace('/[^\S\r\n]+/', ' ', trim($str)); 
```

简而言之，这是利用双重否定。阅读链接以深入了解该技巧。

# backbone.js - FB.UI 回调与 Backbone 上的范围

> ID：15071410
> 
> 赞同：0
> 
> 时间：2013-02-25T16:18:53.543
> 
> 标签：backbone.js, callback, facebook-ui

```
var obj={
         method: 'feed',

         name: 'Je viens de créer son premier domaine : "' + this.model.attributes.name + '"',
         caption: 'Entrez dans l\'univers du vin avec Vinoga',
         description: (
            'Ayez un domaine plus grand, plus beau ou plus prestigieux que vos amis. Challengez vos amis à travers de nombreux mini-jeux et rendez-leur visite '
         ),
         link: 'http://www.vinoga.com',
         picture: 'https://twimg0-a.akamaihd.net/profile_images/3095682321/79e5bb5014d6b118b08c5b11bd2a81e8.jpeg'
        };

        function callback(response)
        {
            this.model.setActivation(); // HERE 
            alert('toto');
        }
            FB.ui(obj, callback);
       }, 
```

我收到一个关于 this.model.setActivation is undefined 的错误......你知道如何解决这个问题吗？

在此先感谢皮埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:25:09.120

您可以使用[下划线的](http://underscorejs.org/#bind) `bind`助手来设置回调的上下文。

```
FB.ui(obj, _.bind(callback, this)); 
```

# python - Python 中未定义全局名称

> ID：15071411
> 
> 赞同：1
> 
> 时间：2013-02-25T16:18:53.957
> 
> 标签：python, oop, list

我是 Python OOP 的新手。请不要苛刻。这是我的代码，它从列表中计算出运动员的最快时间并显示出来。但是在运行时，我收到此错误：

```
z= add.mylist.min()
NameError: global name 'add' is not defined 
```

我的代码：

```
class Athlete:

    def add(self):
        list=[]
        mylist=[]

        for i in range(2):

            self.name = raw_input("Enter name: ")
            self.fastest_time = input("time: ")
            list.append(self.name)
            mylist.append(self.fastest_time)
        print "Names: ",list
        print "Fastest times: ",mylist

    def display(self):
        z= add.mylist.min()
        w= add.mylist.index(z)
        print "Minimum time: ",z
        print "Name of athelte with fastest time: ",list[w]

x = Athlete()
x.add()
x.display() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:20:28.333

您需要使用`self`参数引用实例上的方法。另外，你的`add()`方法需要*返回*它生成的`mylist`变量，你不能将方法局部变量作为方法的属性引用：

```
def display(self):
    mylist = self.add()
    z = min(mylist)
    w = mylist.index(z)

def add(self):
    list=[]
    mylist=[]

    for i in range(2):

        self.name = raw_input("Enter name: ")
        self.fastest_time = input("time: ")
        list.append(self.name)
        mylist.append(self.fastest_time)
    print "Names: ",list
    print "Fastest times: ",mylist

    return mylist 
```

这就是`self`for *，*作为在同一对象上查找实例属性和其他方法的参考点。

您可能希望*重命名* `list`为不影响内置类型的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:09:56.953

Martijn 已经回答了你的问题，所以这里有一些备注和代码风格提示：

1.  新式类派生自`object`
2.  您同时拥有运动员姓名和他们的时间，它们作为字典中的键值对一起属于，而不是两个单独的列表
3.  不要`print`在类方法中使用语句，类方法应该返回一个可以打印的对象
4.  如果您有超过 2 名运动员想要输入时间怎么办？如果将运动员的数量作为函数的参数，则可以添加可变数量的运动员
5.  给出描述性变量名（not `mylist`）并且不要使用内置函数的名称（如`list`）作为变量名
6.  您想在整个类中使用的变量可以在`__init__`方法中初始化。
7.  对于打印，请使用该`format`功能而不是使用逗号
8.  使用`if __name__ == '__main__'`，以便[您的 Python 文件可以充当可重用模块或独立程序](http://effbot.org/pyfaq/tutor-what-is-if-name-main-for.htm)

考虑到这些，我会将您的代码重写为以下内容：

```
from collections import defaultdict

class Athlete(object): # see (1)
    def __init__(self): # see (6)
        self.athlete_times = defaultdict(str) # see (2)

    def add_athletes_and_times(self, n): # see (4)
        for i in range(n):
            self.name = raw_input("Enter name: ")
            self.fastest_time = input("time (in seconds): ") 
            self.athlete_times[self.fastest_time] = self.name

    def get_fastest_time(self):
        return min(self.athlete_times) # see (3)

if __name__ == '__main__': # see (8)
    x = Athlete()
    x.add_athletes_and_times(2)
    for fast_time in x.athlete_times:
        print "The fastest time of athlete {0} is {1} seconds.".format(
                        x.athlete_times[fast_time], fast_time) # see (7)
    fastest_time = x.get_fastest_time()
    print "The overall fastest time is: {0} seconds for athlete {1}.".format(
                       fastest_time, x.athlete_times[fastest_time]) 
```

# mysql - SQL：喜欢 vs = 错误？

> ID：15071412
> 
> 赞同：9
> 
> 时间：2013-02-25T16:18:55.157
> 
> 标签：mysql, sql, database

我有一个非常奇怪的行为，我在我的 SQL 数据库中无法理解（我使用的是 MySQL 5.5.8）：

我在一个表中有一个 varchar(10) 一个名字：joe。

如果运行这样的sql：

```
SELECT ID FROM `names` WHERE `name` = 'joe ' 
```

我得到一个结果：乔，但这是错误的，因为在表中我没有任何“乔”（最后有一个空格。我只有“乔”（没有空格）

但是，如果我执行：

```
SELECT ID FROM `names` WHERE `name` LIKE 'joe ' 
```

我得到了我所期望的：什么都没有。据我所知，= 应该是“精确”匹配，而 like 更松散以便能够将它与子字符串和 % 一起使用。

我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T16:22:29.360

`CHAR`尾随空格对于使用或`VARCHAR`比较不重要`=`。请参阅[字符串比较函数](https://dev.mysql.com/doc/refman/5.5/en/string-comparison-functions.html)：

> 特别是，尾随空格很重要，这对于使用 = 运算符执行的 CHAR 或 VARCHAR 比较而言并非如此：
> 
> ```
> mysql> SELECT 'a' = 'a ', 'a' LIKE 'a ';
> +------------+---------------+
> | 'a' = 'a ' | 'a' LIKE 'a ' |
> +------------+---------------+
> |          1 |             0 |
> +------------+---------------+
> 1 row in set (0.00 sec) 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:22:41.703

我相信这是因为您使用的数据类型。

> CHAR 和 VARCHAR 类型相似，但它们的存储和检索方式不同。从 MySQL 5.0.3 开始，它们在最大长度和是否保留尾随空格方面也有所不同。

[http://dev.mysql.com/doc/refman/5.0/en/char.html](http://dev.mysql.com/doc/refman/5.0/en/char.html)

# coldfusion - 在coldfusion 9中刷新DNS

> ID：15071413
> 
> 赞同：6
> 
> 时间：2013-02-25T16:18:58.323
> 
> 标签：coldfusion, dns, jvm

有谁知道在 ColdFusion 9 中刷新 JVM 中的缓存 DNS 而不重新启动服务的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:11:08.363

您可以尝试在 java.security 文件中设置一个自定义值，该值会更改 dns 查找的[TTL](https://docs.oracle.com/javase/7/docs/technotes/guides/net/properties.html)，但我不相信有一种编程方式来清除缓存。

[http://tjordahl.blogspot.com/2004/10/cfmx-and-dns-caching.html](http://tjordahl.blogspot.com/2004/10/cfmx-and-dns-caching.html)

# python - Python RE（总而言之，检查首字母区分大小写，其余不区分大小写）

> ID：15071416
> 
> 赞同：2
> 
> 时间：2013-02-25T16:19:12.993
> 
> 标签：python, regex

在以下情况下，我想匹配字符串“Singapore”，其中“S”应始终为大写，其余单词可能小写或大写。但在下面的字符串中，“s”是小写的，它在搜索条件中匹配。任何机构都可以让我知道如何实施吗？

```
 import re       
            st = "Information in sinGapore "

            if re.search("S""(?i)(ingapore)" , st):
                print "matched"

Singapore => matched  
sIngapore => notmatched  
SinGapore => matched  
SINGAPORE => matched 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:23:38.127

正如评论的那样，丑陋的方式是：

```
>>> re.search("S[iI][Nn][Gg][Aa][Pp][Oo][Rr][Ee]" , "SingaPore")
<_sre.SRE_Match object at 0x10cea84a8>
>>> re.search("S[iI][Nn][Gg][Aa][Pp][Oo][Rr][Ee]" , "Information in sinGapore") 
```

更优雅的方法是匹配新加坡不区分大小写，然后检查第一个字母是`S`：

```
reg=re.compile("singapore", re.I)

>>> s="Information in sinGapore"
>>> reg.search(s) and reg.search(s).group()[0]=='S'
False

>>> s="Information in SinGapore"
>>> reg.search(s) and reg.search(s).group()[0]=='S'
True 
```

## 更新

根据您的评论 - 您可以使用：

```
reg.search(s).group().startswith("S") 
```

代替：

```
reg.search(s).group()[0]==("S") 
```

如果它看起来更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:33:31.310

您可以编写一个简单的 lambda 来生成丑陋但全部重新解决方案：

```
>>> leading_cap_re = lambda s: s[0].upper() + ''.join('[%s%s]' % 
                                                    (c.upper(),c.lower()) 
                                                        for c in s[1:])
>>> leading_cap_re("Singapore")
'S[Ii][Nn][Gg][Aa][Pp][Oo][Rr][Ee]' 
```

对于多词城市，定义一个字符串拆分版本：

```
>>> leading_caps_re = lambda s : r'\s+'.join(map(leading_cap_re,s.split()))
>>> print leading_caps_re('Kuala Lumpur')
K[Uu][Aa][Ll][Aa]\s+L[Uu][Mm][Pp][Uu][Rr] 
```

那么你的代码可能只是：

```
if re.search(leading_caps_re("Singapore") , st):
    ...etc... 
```

RE的丑陋纯粹是内部的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T17:42:51.793

既然要根据捕捉到的词组设置一个GV码（唯一的名字或者几个名字空格隔开，我知道），就必须有一个根据捕捉到的词组在字典中选择代码的步骤。
因此，很容易利用这一步对第一个字母（必须大写）或短语中的第一个名称执行任何正则表达式无法执行的测试。

我选择了某些条件来构成测试。例如，名字中的点不是强制性的，但大写字母是强制性的。这些条件将在需要时轻松更改。

### 编辑 1

```
import re

def regexize(cntry):
    def doot(x):
        return '\.?'.join(ch for ch in x) + '\.?'
    to_join = []
    for c in cntry:
        cspl = c.split(' ',1)
        if len(cspl)==1: # 'Singapore','Austria',...
            to_join.append('(%s)%s'
                           % (doot(c[0]), doot(c[1:])))
        else: # 'Den LMM','LMM Den',....
            to_join.append('(%s) +%s'
                           % (doot(cspl[0]),
                              doot(cspl[1].strip(' ').lower())))
    pattern = '|'.join(to_join).join('()')
    return re.compile(pattern,re.I)

def code(X,CNTR,r = regexize):
    r = regexize(CNTR)
    for ma in r.finditer(X):
        beg = ma.group(1).split(' ')[0]
        if beg==ma.group(1):
            GV = countries[beg[0]+beg[1:].replace('.','').lower()] \
                 if beg[0].upper()==beg[0] else '- bad match -'
        else:
            try:
                k = (ki for ki in countries.iterkeys()
                     if beg.replace('.','')==ki.split(' ')[0]).next()
                GV = countries[k]
            except StopIteration:
                GV = '- bad match -'
        yield '  {!s:15}  {!s:^13}'.format(ma.group(1), GV)

countries = {'Singapore':'SG','Austria':'AU',
             'Swiss':'CH','Chile':'CL',
             'Den LMM':'DN','LMM Den':'LM'}

s = ('  Singapore  SIngapore  SiNgapore  SinGapore'
     '  SI.Ngapore  SIngaPore  SinGaporE  SinGAPore'
     '  SINGaporE  SiNg.aPoR   singapore  sIngapore'
     '  siNgapore  sinGapore  sINgap.ore  sIngaPore'
     '  sinGaporE  sinGAPore  sINGaporE  siNgaPoRe'
     '    Austria    Aus.trIA    aUSTria    AUSTRiA'
     '  Den L.M.M     Den   Lm.M    DEn Lm.M.'
     '  DEN L.MM      De.n L.M.M.     Den LmM'
     '    L.MM   DEn      LMM DeN     LM.m  Den')

print '\n'
print '\n'.join(res for res in code(s,countries)) 
```

### 编辑 2

我改进了代码。它更短，更易读。
该指令`assert(.....]`是为了验证字典的键是否符合此目的。

```
import re

def doot(x):
    return '\.?'.join(ch for ch in x) + '\.?'

def regexize(labels,doot=doot,
             wg2 = '(%s) *( %s)',wnog2 = '(%s)(%s)',
             ri = re.compile('(.(?!.*? )|[^ ]+)( ?) *(.+\Z)')):
    to_join = []
    modlabs = {}
    for K in labels.iterkeys():
        g1,g2,g3 = ri.match(K).groups()
        to_join.append((wg2 if g2 else wnog2)
                       % (doot(g1), doot(g3.lower())))
        modlabs[g1+g2+g3.lower()] = labels[K]
    return (re.compile('|'.join(to_join), re.I), modlabs)

def code(X,labels,regexize = regexize):
    reglab,modlabs = regexize(labels)
    for ma in reglab.finditer(X):
        a,b = tuple(x for x in ma.groups() if x)
        k = (a + b.lower()).replace('.','')
        GV = modlabs[k] if k in modlabs else '- bad match -'
        yield '  {!s:15}  {!s:^13}'.format(a+b, GV)

countries = {'Singapore':'SG','Austria':'AU',
             'Swiss':'CH','Chile':'CL',
             'Den LMM':'DN','LMM Den':'LM'}

assert(all('.' not in k and
          (k.count(' ')==1 or k[0].upper()==k[0])
          for k in countries))

s = ('  Singapore  SIngapore  SiNgapore  SinGapore'
     '  SI.Ngapore  SIngaPore  SinGaporE  SinGAPore'
     '  SINGaporE  SiNg.aPoR   singapore  sIngapore'
     '  siNgapore  sinGapore  sINgap.ore  sIngaPore'
     '  sinGaporE  sinGAPore  sINGaporE  siNgaPoRe'
     '    Austria    Aus.trIA    aUSTria    AUSTRiA'
     '  Den L.M.M     Den   Lm.M    DEn Lm.M.'
     '  DEN L.MM      De.n L.M.M.     Den LmM'
     '    L.MM   DEn      LMM DeN     LM.m  Den')

print '\n'.join(res for res in code(s,countries)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T17:33:53.283

有趣的是

```
/((S)((?i)ingapore))/ 
```

在 perl 中做正确的事，但在 python 中似乎没有按需要工作。公平地说，python 文档清楚地说明了它， (?i) 改变了整个正则表达式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-15T04:03:35.850

这是最好的答案：

```
(?-i:S)(?i)ingapore 
```

[点击这里](https://regex101.com/r/MF1tew/1)为证：

# jquery - 我正在尝试创建一个功能，我需要入门帮助

> ID：15071419
> 
> 赞同：-3
> 
> 时间：2013-02-25T16:19:14.043
> 
> 标签：jquery, html, css, animation

我正在尝试构建一个具有交互功能的网页，但我不知道从哪里开始寻找。我认为它将由 jQuery 驱动，但我现在确定。

我想要的是：我想要一个页面，其中（为了这个描述）我有一个 700px 宽 x 500px 高的盒子。在框（div）的底部，我有一个 5 按钮导航（图像只是为了方便）。我想要它，以便当我单击底部导航中的按钮时，包含该特定“页面/按钮”内容的 div 从底部的导航向上展开。然后，当您单击另一个按钮时，该 div 会回滚，然后下一个会向上展开。

我看到了一些关于 CSS3 动画的东西，但我不确定我将如何使用它来实现它......

任何人都可以为我指出使用什么工具的正确方向。或者如果它以前做过，一个我自己实现它的教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:27:17.130

听起来你是新手，所以我建议慢慢来。如果您已经了解 HTML 和一些 Javascript，请了解 jQuery，了解它的作用、用途等。

[Codecademy](http://www.codecademy.com/learn)有一些很棒的 HTML、Javascript 和 jQuery 教程。

jQuery UI 有一些您可能正在寻找的功能，但我会提醒您在了解 Javascript 和 jQuery 之前深入了解 jQuery UI。

当您准备好时，请查看：

[标签](http://jqueryui.com/tabs/) 和 [效果](http://jqueryui.com/effect/)

# c++ - 链接 V8 时未定义的引用

> ID：15071432
> 
> 赞同：0
> 
> 时间：2013-02-25T16:19:39.830
> 
> 标签：c++, linker, g++, linker-errors, v8

我正在努力用 V8 编译一个非常小的示例 ..

cpp程序是这样的：

```
#include "v8.h"

int main()
{
     v8::HandleScope handle_scope;

     return 0;
} 
```

编译行：g++ -I/home/lterje/git/tengine/Externals/v8/include /home/lterje/git/tengine/Externals/v8/out/ia32.release/obj.target/tools/gyp/libv8_snapshot.a test.cpp -o 测试 -lpthread

我得到的错误：

```
/tmp/ccHYtJuE.o: In function `main':
test.cpp:(.text+0x11): undefined reference to `v8::HandleScope::HandleScope()'
test.cpp:(.text+0x22): undefined reference to `v8::HandleScope::~HandleScope()'
collect2: error: ld returned 1 exit status 
```

基本、快照和无快照库文件之间到底有什么区别？我已经尝试与它们中的每一个链接，但它们都不起作用：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T12:08:50.887

first I have to say sorry for my poor english. I have just link the .a file to my own project. There's ld error because of the dependencies of the libv8_snapshot.a is not been given.

This is my compile statement:

g++ -o xxxxx -I ~v8/out/native/obj.target/tools/gyp/libv8_{base.native,snapshot}.a ~v8/out/native/obj.target/third_party/icu/libicu{data,i18n,snapshot}.a ~v8/out/native/obj.target/icudata/third_party/icu/linux/icudt46_dat.o -lrt -lpthread

I think that the libv8_base.native.a libv8_snapshot.a is dependend on icu and icudt46 files and thereis some functions about unix clock_time is dependend on "rt", so add "-lrt"

Hope helpful for you all~ As a Chinese,sorry for my english.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:47:13.577

> 编译行：
> g++ -I/home/lterje/git/tengine/Externals/v8/include /home/lterje/git/tengine/Externals/v8/out/ia32.release/obj.target/tools/gyp/libv8_snapshot.a test.cpp -o 测试 -lpthread

此链接线不正确。试试这个：

```
g++ -I/home/lterje/git/tengine/Externals/v8/include \
  test.cpp -o test \
  /home/.../obj.target/tools/gyp/libv8_snapshot.a \
  -lpthread 
```

阅读[本文](http://webpages.charter.net/ppluzhnikov/linker.html)以了解订单为何重要。

# bash - 如何在 makefile shell 命令中使用管道？

> ID：15071439
> 
> 赞同：16
> 
> 时间：2013-02-25T16:20:02.863
> 
> 标签：bash, shell, makefile

我在 Makefile 中有以下代码片段，除非我删除下面对 sed 和 grep 的引用，否则它总是失败。

```
TAB=$(shell printf "\t")
all: abstract.tsv
      $(shell cut -d "${TAB}" -f 3 abstract.tsv | sed "s/^\s*//" | \
        sed "s/\s*$//" | grep -v "^\s*$" | sort -f -S 300M | \
        uniq > referenced_images.sorted.tsv) 
```

这是我得到的错误：

```
/bin/bash: -c: line 0: unexpected EOF while looking for matching `"'
/bin/bash: -c: line 1: syntax error: unexpected end of file 
```

有什么问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-25T16:23:20.000

一个错误来自`sed`. 当你写：

```
sed "s/\s*$//" 
```

make 将变量扩展`$/`为空字符串，因此 sed 缺少分隔符。尝试：

```
sed "s/\s*$$//" 
```

使用`$"`在`grep`. 改为使用`grep -v "^\s*$$"`。

# magento - 显示商店特定产品 magento

> ID：15071443
> 
> 赞同：0
> 
> 时间：2013-02-25T16:20:08.797
> 
> 标签：magento, magento-1.7

嗨，我正在使用 Magento CE。

我正在寻找展示商店的特定产品。

当我添加产品时，在网站选项卡下，我可以看到我创建的商店，但无法设置该选项。

CE有什么限制吗？

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:58:56.333

如果您想为每个商店提供不同的产品，例如 en 产品、pl 产品等。您必须为每个商店创建一个根类别，当您创建此商店时，您必须选择特定的根类别。因此，例如，当您创建英语商店时，您必须选择带有英语产品的根类别。

希望这会有所帮助。问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T06:55:13.443

我们需要为每个商店创建根类别，然后将相同的产品映射到商店下。

例子 ：

Store_A、Store_B 和 Store_C

Root_Cat_A、Root_Cat_B 和 Root_Cat_C

**商店 | 网站 |root_category| sku**
商店_A | 网站 | Root_Cat_A | SKU01
店铺_A | 网站 | Root_Cat_A | SKU02
店铺_A | 网站 | Root_Cat_A | SKU03
店铺_B | 网站 | Root_Cat_B | SKU04
店铺_B | 网站 | Root_Cat_B | SKU05
店铺_B | 网站 | Root_Cat_B | SKU06
Store_C | 网站 | Root_Cat_C | SKU07
Store_C | 网站 | Root_Cat_C | SKU08
Store_C | 网站 | Root_Cat_C | SKU09

谢谢。

# javascript - 尝试将自定义滚动条添加到我的网站（webkit// 浏览器特定的 css 不是一个选项）

> ID：15071449
> 
> 赞同：0
> 
> 时间：2013-02-25T16:20:23.860
> 
> 标签：javascript, jquery, css, scrollbar

我正在尝试使用 webkit 或浏览器特定的 css 文件将自定义滚动条添加到我网站上的几个 div 中，这不是一个选项。

我留下了 JS 解决方案。到目前为止，我已经尝试了 2 个插件，但似乎都有问题并向 firebug 抛出错误。

[http://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)

[http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)

上述插件都为 jquery 1.8.2 和 1.8.3 抛出错误。

是否还有其他适用于这些 jquery 版本的插件？

# python - python：选择具有列表长度限制的子列表

> ID：15071450
> 
> 赞同：0
> 
> 时间：2013-02-25T16:20:25.607
> 
> 标签：python

> player = [一长串（id，float）元组，每个id都是唯一的，按最高float排序]
> 
> on_teams = [唯一ID列表，每个on_teams id也在球员列表中]

```
picked = set(on_teams)
best_remaining = []
for best_player in players:
    if best_player[0] not in picked:
        best_remaining.append(best_player)
    if len(best_remaining) == 5: break 
```

当我用六行代码来做一件简单的事情，比如“获得剩下的五个最好的玩家”时，我想知道是否没有更优雅、pythonic 的解决方案。毫无疑问，这是一个简单的问题，但有更好的编码方法吗？

更新：我的代码运行 100,000 次，运行时间为 0.24 秒。当我运行时：

```
best_remaining = [(id, float) for id, float in players if id not in picked][:5] 
```

代码运行时间为 4.61 秒（100,000 倍）。所以代码看起来和扫描得更好，但它会创建整个列表然后对其进行切片。所以现在我的问题有点不同。以速度为限制条件，是否有更好的方法来编码搜索“剩余 5 名最佳球员”？

更新：

```
best_remaining = list(islice((p for p in players if p[0] not in picked), 5)) 
```

这段代码的运行时间比我的代码要长得多。至少对我来说，它具有列表理解的价值。最重要的是，它向我展示了一个改善我的代码习惯的好地方。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:28:17.023

使用生成器，然后`islice`最多生成 5 个结果...

```
from itertools import islice
picked = set(on_teams)
players = list(islice((p for p in players if p[0] not in picked), 5)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:28:06.377

numpy 非常适合这样的事情

```
players = numpy.array([[1,1.1],[2,1.2],[3,3.2],[4,4.4]])
on_teams = [1,3]
print players[~numpy.in1d(players[:,0],on_teams)]  #all players not on teams (in example 2,4)
# now you can just select the top n players 
```

# sitecore - Sitecore 中的语言版本控制、安全权限和工作流程

> ID：15071456
> 
> 赞同：1
> 
> 时间：2013-02-25T16:20:40.670
> 
> 标签：sitecore, sitecore6

我们有一个多站点、多语言的解决方案。我们有一个特定的站点（站点 A），我们希望将英语作为“主”语言，然后将其翻译成各种其他语言并发布。我们希望防止例如法语编辑能够以法语以外的任何其他语言进行编辑和发布。

但是，法语编辑将同时拥有英语和法语读/写权限，以便他们在解决方案的另一部分（站点 B）上工作，因此我们不能使用这些来直接指定他们在站点 A 上拥有哪些权限。我们也只使用删除继承来限制角色权限，并且从不显式拒绝，因此权限是累积的。

是否可以创建特定于语言的工作流，并为其分配相关角色，以防止该编辑器编辑或发布其他语言的项目？

注意：如果该编辑可以以所有语言发布，但仅限于已移至“可发布”状态的语言版本，并且自己无法使外语版本可发布（因此，如果他确实发布了例如一个德语版本，它只是一个完成的、可发布的版本，而不是一个正在进行的工作）。

编辑：澄清一下，我不介意我的编辑能够发布项目的所有可发布版本，只要他只能以他对该站点拥有所有权的一种语言进行编辑，并且不能使其他版本可发布。

如果没有，是否有针对此问题的标准/最佳实践解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:26:37.187

您可以通过更改 web.config 中的以下设置来强制 Sitecore 仅发布用户具有读/写访问权限的项目：

```
Publishing.CheckSecurity = true
Publishing.RequireTargetDeleteRightWhenCheckingSecurity = false 
```

[使用默认或自定义访问权限来控制用户是否可以发布项目](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/08/Use-a-Custom-Access-Right-to-Control-Whether-Users-Can-Publish-an-Item.aspx)

这确实意味着您需要将您的角色和权限分离得非常细化，即您需要为站点 1 英语编辑器、站点 1 法语编辑器、站点 2 英语编辑器等提供单独的角色。

编辑：感谢上面的澄清，我可以看到你的问题出在哪里。正如我在上面的评论中提到的，也许您可​​以隐藏/禁用“发布”对话框上的语言选项。刚刚看了看，`Sitecore.Shell.Applications.Dialogs.Publish.PublishForm`正如预期的那样，您必须复制一些私有方法，但是您可以添加自己的逻辑来`BuildLanguages()`获得所需的内容。只需复制`sitecore\shell\Applications\Dialogs\Publish\Publish.xml`并`sitecore\shell\Override`更改 codebeside 以指向您的自定义逻辑。

我讨厌通常向系统模板添加字段，但可能会添加另一个字段`/sitecore/templates/System/Language`来指定哪些角色/用户可以发布该语言。您可以为此使用[帐户选择器字段](http://marketplace.sitecore.net/en/Modules/Account_Selector_Field.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T22:18:12.170

您可以对工作流操作设置安全性，从而防止某些用户执行操作。如果这不能解决问题（因为涉及相同的工作流程），您可以随时恢复自己实施工作流程操作，这很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T14:57:53.997

我过去通过为用户创建多个帐户来处理这个问题。在您的情况下，一个用于站点 A 的英语版本，一个用于站点 B 的英语和法语版本。它可能并不理想，但我认为创建额外的语言也不理想。祝你好运！

# ios - 当我在 iOS 中单击谷歌上的标记时，如何用两个按钮显示覆盖信息视图

> ID：15071458
> 
> 赞同：1
> 
> 时间：2013-02-25T16:20:57.893
> 
> 标签：ios, objective-c, google-maps, google-maps-sdk-ios, overlay-view

我正在尝试通过适用于 iOS 的 Google Maps API 显示来自 Google Maps 的自定义叠加视图。此覆盖视图标记的内容信息和两个我的按钮。但我找不到任何参考资料。我想要的叠加视图如下图所示：

[http://i1121.photobucket.com/albums/l515/dungnlh_khtn07/NguoiMoCay/overlayinfoview_zps8110b7ed.jpg](http://i1121.photobucket.com/albums/l515/dungnlh_khtn07/NguoiMoCay/overlayinfoview_zps8110b7ed.jpg)

请给我一个指导！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T20:34:36.713

可能，正如 Google Maps Android API 文档中正式提到的，以下有关 infowindows 的限制也适用于 Google Maps iOs SDK：

信息窗口不是实时视图，而是将视图呈现为地图上的图像。因此，您在视图上设置的任何侦听器都将被忽略，并且您无法区分视图各个部分的点击事件。建议您不要在自定义信息窗口中放置交互式组件（例如按钮、复选框或文本输入）。

所以基本上点击信息窗口的任何部分只会触发“didTapWindowOfMarker”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:48:12.103

实现这一点的最佳方法是通过 GMSMapViewDelegate 的`mapView:markerInfoWindow:`方法为您的信息窗口传递您的 GMSMapView 自定义视图。

为此，请将自己设置为 GMSMapView 实例的委托，如下所示：

```
self.mapView.delegate = self; 
```

然后在请求时返回自定义 UIView：

```
- (UIView *)mapView:(GMSMapView *)mapView markerInfoWindow:(id<GMSMarker>)marker
{
    UIView *customView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    customView.backgroundColor = [UIColor redColor];

    return customView;
} 
```

您可以通过查看 GMSMapView 标头找到更多信息，该标头指出：

```
/**
 * Called when a marker is about to become selected, and provides an optional
 * custom info window to use for that marker if this method returns a UIView.
 * If you change this view after this method is called, those changes will not
 * necessarily be reflected in the rendered version.
 *
 * The returned UIView must not have bounds greater than 500 points on either
 * dimension.  As there is only one info window shown at any time, the returned
 * view may be reused between other info windows.
 *
 * @return The custom info window for the specified marker, or nil for default
 */ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T08:04:38.877

好的，但是有人可以澄清一下如何在那个 UIView 上获得一个 UIButton 来响应触摸吗？就像 Dung Nguyen Le Hoang 所附图片中的两个按钮。例如，如果我添加这样的按钮：

```
- (UIView *)mapView:(GMSMapView *)mapView markerInfoWindow:(id<GMSMarker>)marker
{
    UIView *customView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    customView.backgroundColor = [UIColor redColor];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [button addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchUpInside];
    [button setFrame:CGRectMake(0, 0, 30, 30)];

    [customView addSubview:button];

    return customView;
} 
```

当然还有 buttonPressed

```
- (void)buttonPressed
{
    NSLog(@"Hello");
} 
```

它没有被调用。如果我将按钮作为子视图添加到 self.mapView，那么它会出现在 mapView 上，而不是 InfoWindow 上，当然，它会响应触摸。我想这是由于一些未设置的帧，但不能完全明白。有人可以澄清一下吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-27T22:14:14.203

*   (void)mapView:(GMSMapView *)mapView didTapInfoWindowOfMarker:(GMSMarker *)marker

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-12T17:02:18.357

**当用户点击markerInfoContents**时，您可以使用两个按钮显示**AlertView**或**ActionSheet**

# ruby-on-rails - 如何禁用 Draper 装饰器生成器？

> ID：15071460
> 
> 赞同：3
> 
> 时间：2013-02-25T16:20:59.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, draper

在我的 Rails 3.2 应用程序中`application.rb`，我有以下几行来禁用我不想要的脚手架生成器：

```
module MyApp
  class Application < Rails::Application

    # rest of the config...

    config.generators do |g|
      g.helper false
      g.stylesheets false
      g.javascripts false
    end
  end
end 
```

该应用程序正在使用[Draper gem](https://github.com/drapergem/draper)，如果我运行`rails generate`，则被`decorator`列为可用生成器之一。我假设添加`g.decorator false`到上面的列表会阻止`rails generate scaffold SomeModel`生成装饰器文件，但它们仍然被创建。谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-09T18:24:45.267

Draper 配置为默认为每个控制器构建装饰器。您可以在 application.rb 文件中添加一行来更改默认配置...

```
module MyApp
  class Application < Rails::Application

    # rest of the config...

    config.generators do |g|
      g.helper false
      g.stylesheets false
      g.javascripts false
      g.decorator   false
    end
  end
end 
```

这是德雷珀有趣的一点……

[https://github.com/drapergem/draper/blob/master/lib/generators/controller_override.rb](https://github.com/drapergem/draper/blob/master/lib/generators/controller_override.rb)

来自Railtie的电话...

[https://github.com/drapergem/draper/blob/master/lib/draper/railtie.rb](https://github.com/drapergem/draper/blob/master/lib/draper/railtie.rb)

请注意，您仍然可以显式生成装饰器...

```
$ rails generate decorator foo 
```

# java - java.util.zip.ZipException：存储的块长度无效

> ID：15071461
> 
> 赞同：3
> 
> 时间：2013-02-25T16:21:00.070
> 
> 标签：java, apache-commons-io, apache-commons-compress

我正在尝试将 ZipArchiveEntry 读取到字符串。我有下面的代码，我遇到了异常

我的代码如下

```
StringWriter writer = new StringWriter();
IOUtils.copy(zipFile.getInputStream(zipArchiveEntry),
              writer,
              org.apache.commons.io.Charsets.UTF_8); 
```

我得到以下异常

```
java.util.zip.ZipException: invalid stored block lengths
at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:147)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
at java.io.InputStreamReader.read(InputStreamReader.java:167)
at java.io.Reader.read(Reader.java:123)
at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2001)
at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1980)
at org.apache.commons.io.IOUtils.copy(IOUtils.java:1957)
at org.apache.commons.io.IOUtils.copy(IOUtils.java:1907) 
```

真的坚持了很久。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-21T08:21:22.577

我有一个明显有效的 ZIP 的类似案例，但使用 Java 阅读它时遇到了困难。异常与您的相似，但堆栈跟踪不同：

```
Caused by: java.util.zip.ZipException: invalid stored block lengths
at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:164)
at java.util.zip.ZipInputStream.read(ZipInputStream.java:194)
at java.util.zip.ZipInputStream.closeEntry(ZipInputStream.java:140)
at java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:118)
... 
```

就我而言，“故障” ZIP 是使用 CentOS 机器上的 Ansible“归档”模块创建的：

```
- name: Create a zip archive
  archive:
    path: /tmp/mydir/
    dest: /tmp/mydir.zip
    format: zip 
```

修复方法是在创建 ZIP 时在“路径”的末尾添加一个星号：

```
- name: Create a zip archive
  archive:
    path: /tmp/mydir/*
    dest: /tmp/mydir.zip
    format: zip 
```

两个 ZIP 的内容相同，但 ZIP 中的文件/目录属性存在一些差异，这显然会导致 Java 出现问题。

# php - 使用 PHP 和 jQuery 更改屏幕/页面

> ID：15071463
> 
> 赞同：0
> 
> 时间：2013-02-25T16:21:05.950
> 
> 标签：php, jquery

我正在建立一个食品网站，允许客户建立许多定制菜单，这些菜单将显示在他们机构的监视器上。该网站是用 PHP 构建的，现在我面临如何让屏幕旋转的挑战。

有 6 个不同的屏幕要显示，每个屏幕都包含存储在数据库中的图像。我需要在预定的时间后连续运行所有六个屏幕。我意识到单独的 PHP 不会这样做，所以我使用 jQuery 来协助。闪存不是一个选项。

问题是 jQuery 需要从数据库中提取一个允许屏幕更改的屏幕 ID。有没有人创造过这种情况？我对无缝完成这项工作的最佳方式感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:51:33.960

您不需要让 JavaScript 回调到后端来获取固定轮换中的下一个 ID，只需将信息与页面一起发送即可。例如：

```
// assume URL formatted like: http://mymenu.com/page.php?n=13
$query = 'SELECT page_id FROM menu_pages WHERE menu_id = x ORDER BY [some condition]';
// code here runs query, creates array of page IDs, ie:
$ids = array(11,12,13,14,15,16);
$cur_id = intval($_GET['n']);

$next_index = array_search($cur_id, $ids) + 1;
$next_id = $ids[$next_index];

echo 'Cur: ' . $cur_id . ' Next: ' . $next_id;
// output: Cur: 13 Next: 14

$js_var = <<<_EOI_
<script type="text/javascript">
   var next_page = $next_id
</script>
_EOI_

// or without javascript at all

$meta_refresh = <<<_EOI_
<meta HTTP-EQUIV="REFRESH" content="30; url=http://mymenu.com/page.php?n=$next_id">
_EOI_ 
```

# java - Jmock 意外的方法调用，不明白为什么

> ID：15071465
> 
> 赞同：2
> 
> 时间：2013-02-25T16:21:11.187
> 
> 标签：java, jmock

我有以下方法....

```
public void testa(Car car) {
   em.persist(car);
   car.setEngine(null);

} 
```

在我的测试中，我有：

protected final Car mockCar = context.mock(Car.class);

```
@Test
public void testCar() {
        context.checking(new Expectations() {
            {
                oneOf(em).persist(car);
                oneOf(car).setEngine(null);

                   }
             });
        this.stacker.testa(mockCar);
        context.assertIsSatisfied(); 

} 
```

我运行这个，我不断得到：

意外调用 car.setEngine(null)...

如果我删除在代码中设置引擎的代码并从测试中通过测试...我完全不知道为什么会发生这种情况...

例外：

java.lang.AssertionError：意外调用：car.setEngine(null) 未指定期望：您是否... - 忘记以基数子句开始期望？- 调用模拟方法来指定期望的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:53:40.477

您的问题似乎是您有两个`Car`对象。你有一个`car`，你设定了期望，还有一个`mockCar`，你通过了。没有看到这些对象的定义，我不能肯定地说，但这可能是你问题的根源。

如果这不是问题，我们将需要更多代码。最好是整个文件。

作为参考，这可以很好地编译并通过测试：

```
import org.jmock.Expectations;
import org.jmock.Mockery;
import org.junit.Test;

public class TestyMcTestTest {
    private final Mockery context = new Mockery();

    private final EntityManager em = context.mock(EntityManager.class);
    private final Stacker stacker = new Stacker(em);
    private final Car mockCar = context.mock(Car.class);

    @Test
    public void testCar() {
        context.checking(new Expectations() {{
            oneOf(em).persist(mockCar);
            oneOf(mockCar).setEngine(null);
        }});
        this.stacker.testa(mockCar);
        context.assertIsSatisfied();
    }

    public interface Car {
        void setEngine(Engine engine);
    }

    public interface Engine { }

    public class Stacker {
        private final EntityManager em;

        public Stacker(EntityManager em) {
            this.em = em;
        }

        public void testa(Car car) {
           em.persist(car);
           car.setEngine(null);
        }
    }

    private interface EntityManager {
        void persist(Object o);
    }
} 
```

# gwt - 在 GWT 2.5 中，如何根据 AbstractCell 填充单元的多个部分

> ID：15071466
> 
> 赞同：0
> 
> 时间：2013-02-25T16:21:12.827
> 
> 标签：gwt

我有一个基于 AbstractCell 的 ContactCell 类。它有两个标签和一个图像（在 GWT 2.5 的 UiBinder 中定义）。

如何 Column.addColumn() 将此自定义单元格添加到 CellTable？

如果是这样，当 getValue() 仅返回简单值（例如字符串）时，如何使用方法 getValue() 填充 ContactCell 的字段。

```
Column<Contact, String> column = new Column<Contact, String>(
    new ContactCell()) {
  @Override
  public String getValue(Contact object) {
    return object... CAN ONLY RETURN ONE VALUE. HOW TO POPULATE 2 LABELS & IMAGE?
  }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:53:37.047

您可以通过覆盖单元格的 onrender 方法来更改渲染字符串，如下所示。

假设可以根据 getValue 方法返回的值计算 2 个标签和一张图像。

```
ContactCell contactCell = new ContactCell()
{
    @Override
    public void render( com.google.gwt.cell.client.Cell.Context context, SafeHtml value, SafeHtmlBuilder sb )
    {

    // do value check and compute label1 and label2 and calso compute the image path.       

    sb.appendHtmlConstant( "<label>LABEL1</label>" +"<label>LABEL2</label>"+"<image></image>" )
    }
});

Column<Contact, String> column = new Column<Contact, String>( contactCell ) 
{
  @Override
  public String getValue(Contact object) 
  {
    return object... CAN ONLY RETURN ONE VALUE. HOW TO POPULATE 2 LABELS & IMAGE?
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:54:06.930

您可以使用 an`IdentityColumn`代替法线`Column` （将通过整个 Contact 对象），也可以使用这样的法线`Column`：

```
Column<Contact, String[]> column = new Column<Contact, String[]>(
    new ContactCell()) {
  @Override
  public String[] getValue(Contact object) {
    String[] retvalue = new String[2];
    retvalue[0] = "SOMETHING";
    retvalue[1] = "SOME OTHER THING";
    return retvalue;
  }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:53:07.913

如果基于的单元格`AbstractCell`是使用 then 定义`UiBinder`的，则当前`(GWT 2.5`无法将此类单元格添加到`CellTable`.

# php - 数组里面的数组，只取传入的数组

> ID：15071473
> 
> 赞同：0
> 
> 时间：2013-02-25T16:21:26.257
> 
> 标签：php, arrays

我有以下数组结构，这是传入 $response 的数组

大批

```
(
    [inbox] => Array
        (
            [0] => Array
                (
                    [location] => 3
                    [ID] => 8ba84195fe79a89af1a4b5bd8c280621
                    [smsc_number] => +44******
                    [sent] => 2013-02-25 14:57:20
                    [coding] => Default GSM alphabet (no compression)
                    [remote_number] => +447****
                    [status] => Read
                    [body] => Yeppp
                )

        )

    [outbox] => Array
        (
            [0] => Array
                (
                    [location] => 2
                    [ID] => d22c4368fadd64e98fab64acb6b8fa34
                    [reference_number] => 1
                    [class] => 1
                    [coding] => Default GSM alphabet (no compression)
                    [remote_number] => *****
                    [status] => Sent
                    [body] => Test
                )

            [1] => Array
                (
                    [location] => 0
                    [ID] => f0c05e8dd2578d16d73bf5dbcf2ec3e6
                    [class] => 1
                    [coding] => Default GSM alphabet (no compression)
                    [remote_number] => 0****
                    [status] => UnSent
                    [body] => fdgg ddfgfdg fd
                )

            [2] => Array
                (
                    [location] => 1
                    [ID] => d7537acb1b3994ecc11369bac46c4bb6
                    [class] => 1
                    [coding] => Default GSM alphabet (no compression)
                    [remote_number] => 0****3
                    [status] => UnSent
                    [body] => fdgg ddfgfdg fd
                )

        )

) 
```

我只对收件箱数组的正文感兴趣。我想我可以做两个循环来得到这个，或者只是做 $response[0] 但它似乎不起作用。这是我所拥有的：

```
$response = $sms->Get();

foreach ($response[0] as $value) {
    foreach ($response as $value1) {
       echo($value1['body']); 
}

} 
```

我显然在做一些非常愚蠢的事情 - 任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:24:45.637

尝试这个

```
foreach ($response['inbox'] as $inb) {    
   echo($inb['body']); } 
```

# jenkins - 在 Jenkins 的 email-ext 中快速测试 Jelly 模板

> ID：15071475
> 
> 赞同：4
> 
> 时间：2013-02-25T16:21:30.960
> 
> 标签：jenkins, jenkins-plugins, jelly, email-ext

Jenkins 的 Email-ext 允许您编写 Jelly 电子邮件模板。如何在不每次都触发构建的情况下编写和测试一个？基本上，我正在寻找一个 1 秒的迭代，我可以在其中修改 Jelly 脚本，在浏览器上点击刷新，它会根据硬代码项目和构建结果自动呈现模板。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-05T20:12:05.703

现在有一个选项可以针对更新版本的插件中的构建测试模板。当您在工作屏幕上时，左侧应该有一个链接，上面写着电子邮件模板测试。它会让你选择一个构建来再次测试，它会在那里呈现模板。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T16:48:32.283

在 _http://server/script/ 打开 Jenkins 脚本控制台（当这是实际 URL 时，Stackoverflow 在保存编辑时遇到问题）。

输入以下代码并替换`your-project-name`为您的项目名称和`me@me.com`您的电子邮件地址：

```
import hudson.model.StreamBuildListener
import hudson.plugins.emailext.ExtendedEmailPublisher
import java.io.ByteArrayOutputStream

def projectName = "your-project-name"
def project = Jenkins.instance.getItem(projectName)

try
{

  def testing = Jenkins.instance.copy(project, "$projectName-Testing")
  def build = project.lastUnsuccessfulBuild
// see the <a href="http://javadoc.jenkins-ci.org/hudson/model/Job.html#getLastBuild()" title="Job" target="_blank">javadoc for the Job class</a> for other ways to get builds

def baos = new ByteArrayOutputStream()
def listener = new StreamBuildListener(baos)

testing.publishersList.each() { p ->
  println(p)
  if(p instanceof ExtendedEmailPublisher) {
    // modify the properties as necessary here
    p.recipientList = 'me@me.com' // set the recipient list while testing

    // run the publisher
    p.perform((AbstractBuild<?,?>)build, null, listener)
    // print out the build log from ExtendedEmailPublisher
    println(new String( baos.toByteArray(), "UTF-8" ))
  }
}

}
finally
{
    if (testing != null)
    {
        testing.delete()
    }
} 
```

来源：[https ://earl-of-code.com/2013/02/prototyping-and-testing-groovy-email-templates/](https://earl-of-code.com/2013/02/prototyping-and-testing-groovy-email-templates/)

还有一个问题是跟踪使这更容易：

[JENKINS-9594 - 应该能够根据以前的构建发送测试电子邮件](https://issues.jenkins-ci.org/browse/JENKINS-9594)

# xslt - Lua 或 XSL - 从字符串中提取单词 Lync

> ID：15071483
> 
> 赞同：0
> 
> 时间：2013-02-25T16:22:07.757
> 
> 标签：xslt, lua, lua-patterns

我有一个使用 Lua 和/或 XSL 处理的文档，因为我使用的解决方案允许两者。正在处理的数据是来自 Lync 2013 的 IM 对话的汇编。我已经能够编写一些模式匹配脚本，这些脚本在下面提取我的数据的一些值，但是由于用户能够配置他们希望他们的数据如何显示在他们的 IM 上，每个用户的数据存储方式不同。

我需要的是一个脚本，它将提取消息的 To、From、Date/Time 和 Content 中的所有值。我注意到每个单词，当包装在 RTF 标记中时，后面跟着字符串 '\embo0'。

有没有一种方法可以处理整个数据集，如下例所示，以在示例数据下产生我想要的结果？我拥有的脚本只能提取与我定义的模式匹配方案之一相匹配的对话部分，然后去除其他所有内容。

数据：

```
<?xml version="1.0" encoding="utf-8"?>
<session Type="Conversation" SessionIdTime="2013-01-18 17:18:01Z" SessionIdSeq="1">
<Reference>OCSSession-Conversation_2013-01-18 17:18:01Z_1</Reference>
<participants>
    <participant>
        <name>user1@company.com</name>
    </participant>
    <participant>
        <name>user2@company.com</name>
    </participant>
</participants>
<conversation InviteTime="2013-01-18 17:18:01Z" InitiatedBy="user1@company.com" />
<messages>
    <message Id="1" Time="2013-01-18 17:18:01Z">
        <from>user1@company.com</from>
        <to>user2@company.com</to>
        <content Type="text/html">&lt;span style="font-family:Segoe UI;     color:#000000; font-size:10pt;"&gt;Test from Lync 2013&lt;/span&gt;</content>
    </message>
    <message Id="2" Time="2013-01-18 17:18:02Z">
        <from>user1@company.com</from>
        <to>user2@company.com</to>
        <content Type="text/rtf">{\rtf1\fbidis\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0 Segoe UI;}{\f1\fnil Segoe UI;}}
{\colortbl ;\red0\green0\blue0;}
{\*\generator Riched20 15.0.4420}{\*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 
\pard\cf1\embo\f0\fs20 Test\embo0  \embo from\embo0  \embo Lync\embo0  \embo 2013\embo0    \f1\par
{\*\lyncflags rtf=1}}
        </content>
    </message>
    <message Id="3" Time="2013-01-18 17:18:07Z">
        <from>user2@company.com</from>
        <to>user1@company.com</to>
        <content Type="text/html">&lt;DIV style="font-size: 9pt;font-family: MS Shell Dlg 2;color: #000000;direction: ltr"&gt;got it&lt;/DIV&gt;</content>
    </message>
    <message Id="4" Time="2013-01-18 17:20:05Z">
        <from>user1@company.com</from>
        <to>user2@company.com</to>
        <content Type="text/rtf">{\rtf1\fbidis\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil Segoe UI;}}
{\colortbl ;\red0\green0\blue0;\red0\green0\blue255;}
{\*\generator Riched20 15.0.4420}{\*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 
\pard {\cf1\outl\f0\fs20{\field{\*\fldinst{HYPERLINK http://jefferytay.wordpress.com    /2010/12/09/converting-a-pfx-file-to-pem-and-key-via-openssl/ }}{\fldrslt{http://jefferytay.wordpress.com/2010/12/09/converting-a-pfx-file-to-pem-and-key-via-openssl/\ul0\cf0}}}}\f0\fs20\par
{\*\lyncflags rtf=1}}
        </content>
    </message>
    <message Id="5" Time="2013-01-18 17:20:19Z">
        <from>user1@company.com</from>
        <to>user2@company.com</to>
        <content Type="text/rtf">{\rtf1\fbidis\ansi\ansicpg1252\deff0    \nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0 Segoe UI;}{\f1\fnil Segoe UI;}}
{\colortbl ;\red0\green0\blue0;}
{\*\generator Riched20 15.0.4420}{\*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 
\pard\cf1\embo\f0\fs20 How\embo0  \embo does\embo0  \embo the\embo0  \embo URL\embo0      \embo look\embo0  \embo on\embo0  \embo your\embo0  \embo end?\embo0\f1\par
{\*\lyncflags rtf=1}}
        </content>
    </message>
    <message Id="6" Time="2013-01-18 17:20:25Z">
        <from>user2@company.com</from>
        <to>user1@company.com</to>
        <content Type="text/html">&lt;DIV style="font-size: 9pt;font-family: MS Shell Dlg 2;color: #000000;direction: ltr"&gt;its plain text&lt;/DIV&gt;</content>
    </message>
    <message Id="7" Time="2013-01-18 17:20:34Z">
        <from>user2@company.com</from>
        <to>user1@company.com</to>
        <content Type="text/html">&lt;DIV style="font-size: 9pt;font-family: MS Shell Dlg 2;color: #000000;direction: ltr"&gt;not clickable&lt;/DIV&gt;</content>
    </message>
    <message Id="8" Time="2013-01-18 17:20:50Z">
        <from>user2@company.com</from>
        <to>user1@company.com</to>
        <content Type="text/html">&lt;DIV style="font-size: 9pt;font-family: MS Shell Dlg 2;color: #000000;direction: ltr"&gt;how does this look?&amp;nbsp; _http://www.cnn.com&lt;/DIV&gt;</content>
    </message>
    <message Id="9" Time="2013-01-18 17:21:07Z">
        <from>user2@company.com</from>
        <to>user1@company.com</to>
        <content Type="text/html">&lt;DIV style="font-size: 9pt;font-family: MS Shell Dlg 2;color: #000000;direction: ltr"&gt;_http://powertoe.wordpress.com/2009/12/14/powershell-part-4-arrays-and-for-loops/&lt;/DIV&gt;</content>
    </message>
    <message Id="10" Time="2013-01-18 17:21:38Z">
        <from>user1@company.com</from>
        <to>user2@company.com</to>
        <content Type="text/rtf">{\rtf1\fbidis\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fcharset0 Segoe UI;}{\f1\fnil Segoe UI;}}
{\colortbl ;\red0\green0\blue0;\red0\green0\blue255;}
{\*\generator Riched20 15.0.4420}{\*\mmathPr\mwrapIndent1440 }\viewkind4\uc1 
\pard\cf1\embo\f0\fs20 Please\embo0  \embo go\embo0  \embo ahead\embo0  \embo and\embo0  \embo install\embo0  \embo the\embo0  \embo new\embo0  \embo client\embo0           {\embo{\field{\*\fldinst{HYPERLINK "n:\\\\apps\\\\microsoft\\\\lync2013\\\\client\\\\setup.exe"}}{\fldrslt{n:\\apps\\microsoft\\lync2013\\client\\setup.exe\ul0\cf0}}}}\f0\fs20    \embo Once\embo0  \embo you\embo0  \embo install\embo0  \embo it,\embo0  \embo it\embo0  \embo will\embo0  \embo force\embo0  \embo a\embo0  \embo reboot.\embo0  \embo After\embo0  \embo it\embo0  \embo reboots,\embo0  \embo you\embo0  \embo have\embo0  \embo to\embo0  \embo close\embo0  \embo out\embo0  \embo of\embo0  \embo communicator.exe\embo0  \embo completely.\embo0\f1\par
{\*\lyncflags rtf=1}}
        </content>
    </message>
</messages> 
```

期望的输出：

```
From: user1@company.com</name>
To: user2@company.com</name>

2013-01-18 17:18:02Z
user1@company.com:  Test  from  Lync  2013

2013-01-18 17:18:07Z
user2@company.com:  got it

2013-01-18 17:20:05Z
user1@company.com:  http://jefferytay.wordpress.com/2010/12/09/converting-a-pfx-file-to-pem-and-key-via-openssl/ 

2013-01-18 17:20:19Z:  How  does  the  URL  look  on  your  end?

2013-01-18 17:20:25Z
user2@company.com:  its plain text

2013-01-18 17:20:34Z
user2@company.com:  not clickable

2013-01-18 17:20:50Z
user2@company.com:  how does this look? _http://www.cnn.com

2013-01-18 17:21:07Z
user2@company.com:  _http://powertoe.wordpress.com/2009/12/14/powershell-part-4-arrays-and-for-loops/

2013-01-18 17:21:38Z:  
user1@company.com:   Please  go  ahead  and  install  the  new  client  
Once  you  install  it,  it  will  force  a  reboot.  After  it  reboots,  you  have  to  close  out  of  communicator.exe  completely. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:31:53.280

```
local function convert_string(type, str)
   if type == 'text/html' then
      str = str:gsub('&lt;.-&gt;', ''):gsub('&amp;.-;', '')
   elseif type == 'text/rtf' then
      local result = ''
      str
         :match'.-{(.*)}.-'
         :gsub('%b{}',
            function(s)
               local link = s:match'{HYPERLINK%s+(.-)}'
               if link then
                  return 'HYPERLINK'..link:gsub('\\\\\\', '')..'\\embo'
               else
                  return ''
               end
            end
         )
         :gsub('(%S*.)\\embo',
            function(s)
               if s:match'^HYPERLINK' or s:find('\\', 1, true) == nil then
                  result = result..s:gsub('^HYPERLINK', ' ')
               end
            end
         )
      str = result
   end
   return str
end

local function extract_text(input_text)
   local result = ''
   for time, from, to, type, content in input_text:gmatch'<message.-Time="(.-)".-<from>(.-)</.-<to>(.-)</.-<content Type="(.-)".->(.-)</content' do
      result = result..'\n\n'..time..'\n'..from..': '..convert_string(type, content)
   end
   return result
end

print(extract_text(assert(io.open'your_file_name'):read'*a')) 
```

# php - 通过json将联系人列表从android发送到服务器数据库？

> ID：15071485
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:22:10.123
> 
> 标签：php, android, database, json

我的 PHP 服务应该接收来自 Android 手机的联系人。如何将此数据插入服务器数据库？

将数据作为数组发送到远程数据库时出现错误。我做错了什么？

```
public class PhoneBookActivity extends Activity {
    ListView listViewPhoneBook;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.phone_book);

        listViewPhoneBook = (ListView) findViewById(R.id.listPhoneBook);

        Cursor cursor = getContentResolver().query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
            new String[] {Phone._ID, Phone.DISPLAY_NAME, Phone.NUMBER},
            null, null, null);

        startManagingCursor(cursor);
        // Cursor phones = getContentResolver().query(
        //     ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
        //     null,
        //     ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = " + contactId,
        //     null, null);

        String[] arrayColumns = new String[]{ Phone.DISPLAY_NAME, Phone.NUMBER, Phone._ID };   
        int[] arrayViewID = new int[]{ R.id.name , R.id.number, R.id.id };
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(
            this, R.layout.each_contact, cursor, arrayColumns, arrayViewID);

        listViewPhoneBook.setAdapter(adapter);
        JSONArray mJSONArray = new JSONArray(Arrays.asList(arrayColumns));
        send(mJSONArray);
    }

    private void send(JSONArray mJSONArray) {
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://www.example.org/save_contacts.php?");

            httppost.setEntity(new UrlEncodedFormEntity(mJSONArray));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
            result = co(is);
        }
        ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:23:45.053

以您容易理解的格式将其构建为 JSON 响应。然后将其发送到您需要编写的 Web 服务，该服务会解析 JSON 并将其添加到数据库中。查看 android 文档或 GSON 库中的 JSONObject API 以了解轻松形成 JSON 的方法。

# jquery - jquery javascript验证是否可见

> ID：15071486
> 
> 赞同：0
> 
> 时间：2013-02-25T16:22:10.850
> 
> 标签：jquery, validation

```
validate:function(section){
        var elements=this.sections.$sections.eq(section).data('elements') //reference elements within this section that should be validated
        var validated=true, invalidtext=["Fill the following areas:\n"]
        function invalidate(el){
            validated=false
            invalidtext.push("- "+ (el.id || el.name))
        }
        for (var i=0; i<elements.length; i++){
            if (/(text)/.test(elements[i].type) && elements[i].value==""){ //text and textarea elements
                invalidate(elements[i])
            }
            else if (/(select)/.test(elements[i].type) && (elements[i].selectedIndex==-1 || elements[i].options[elements[i].selectedIndex].text=="")){ //select elements
                invalidate(elements[i])
            }
            else if (elements[i].type==undefined && elements[i].length>0){ //radio and checkbox elements
                var onechecked=false
                for (var r=0; r<elements[i].length; r++){
                    if (elements[i][r].checked==true){
                        onechecked=true
                        break
                    }
                }
                if (!onechecked){
                    invalidate(elements[i][0])
                }
            }
        }
        if (!validated)
            alert(invalidtext.join('\n'))
        return validated
    }, 
```

我想向此函数添加一个控件，以检查字段是否可见。我试图将其添加到 if 行但没有用；

```
elements[i].style.display=="none" 
```

我隐藏表格不输入，这是原因吗？有没有其他方法可以添加这个控件？

**编辑** 解决方案：elements[i].style.display!=="none"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:27:57.157

看起来这`elements`是一个 DOM 元素数组，而不是 jquery 对象。 `is`必须在 jquery 对象上调用。

```
$(elements[i]).is(":visible") 
```

另请注意，这返回一个布尔值，无需检查它是否为`== true`.

# c# - 设置环境变量

> ID：15071489
> 
> 赞同：2
> 
> 时间：2013-02-25T16:22:21.700
> 
> 标签：c#, .net

有没有办法为应用程序设置环境变量，以便**每当**进程运行时都不需要重置它们。事实上，我正在编写一个 .NET 应用程序的分析器，我需要为进程列表设置环境变量（我从配置文件中获取列表）。换句话说，我以前知道要分析的进程，我需要在它们运行之前为它们设置环境变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:33:23.920

> 要解决此问题，请使用互操作服务设置环境变量。您可以使用 Microsoft 平台软件开发工具包 (SDK) SetEnvironmentVariable 函数设置环境变量。

[System.Environment 类没有为当前进程设置环境变量的方法](http://support.microsoft.com/kb/829145)

# ruby-on-rails-3 - 如何在 rails3 迁移中使用 collat e 选项？

> ID：15071491
> 
> 赞同：2
> 
> 时间：2013-02-25T16:22:26.443
> 
> 标签：ruby-on-rails-3, rails-migrations, collate

我正在使用 Rails 3 默认提供的 Sqlite3。如何通过`collate NOCASE`rails 迁移将特定列更改为？

我试过了`t.change :name, :string, :collate => "NOCASE"`，但是不区分大小写的搜索`find_by_name("test", :order => "name collate NOCASE")`没有按预期给出结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T06:21:45.640

我想格式可能是问题。尝试：

```
:COLLATE => :NOCASE 
```

# javascript - 如何为基于公式定位元素的函数正确设置计时器？

> ID：15071492
> 
> 赞同：0
> 
> 时间：2013-02-25T16:22:26.693
> 
> 标签：javascript, html, timer, positioning

我有一个定位页面元素的功能。例如：

```
refresh_positions = function(){
    set_pos(arrow_div,mouse_x,mouse_y);
    set_pos(title_tiv,window_width/2,20);
}; 
```

显然，这必须尽可能快地连续运行，以使元素始终正确定位。但是怎么做？

如果我设置一个快速计时器`setInterval(refresh_positions,10)`，较慢的计算机会死机。如果我设置一个较慢的计时器，较快的计算机会有更差的体验。我还担心移动设备中的电池耗尽。基于函数定位元素的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:24:54.757

尝试使用`setTimeout`or `window.requestAnimationFrame`，这样可以确保新函数调用仅在前一个函数完成运行时才会排队。这样，如果函数花费的时间比您计划的间隔长，浏览器 UI 就不会那么快冻结。

```
var interval = <so many seconds should it take>;

function update(){
    //do you stuff here

    setTimeout( update, interval );
    //or
    window.requestAnimationFrame( update );
} 
```

第二种方法`window.requestAnimationFrame`的优点是，如果可能，每秒最多触发 60 次，或者如果浏览器无法以那么快的速度运行，则触发次数更少。如果选项卡或浏览器失去焦点，也不会触发回调。

# wpf - Silverlight、WPF 和 Windows RT 的编码

> ID：15071501
> 
> 赞同：1
> 
> 时间：2013-02-25T16:22:46.020
> 
> 标签：wpf, windows-8, windows-rt

我们有一个 VS2012 解决方案，其中包含两个类库项目，一个生成 Silverlight DLL，一个生成标准 .NET DLL。类文件在两个项目之间共享（“添加为链接”）。

结果是它们都包含一个 WPF/Silverlight 控件，该控件继承自 Canvas，然后我们在 Silverlight 和 WPF 应用程序中使用该控件。

我们现在正在考虑在 Microsoft Surface RT 上使用的应用程序中使用相同的组件。我该如何构建一个可以像这样使用的 DLL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:02:41.013

没有理由不能以同样的方式进行，如果 WPF 和 Silverlight 已经在这样做了：只需创建一个类库（Windows 应用商店应用程序）项目并将现有的类文件也添加为它的链接。

`NETFX_CORE`当您需要 Windows 应用商店应用程序的不同代码时，您可以使用条件编译符号：

```
#if NETFX_CORE
// Windows Store specific code
#endif 
```

# r - 重新制定一个 for 循环以在 R 中使用 apply

> ID：15071504
> 
> 赞同：1
> 
> 时间：2013-02-25T16:22:55.570
> 
> 标签：r, for-loop, apply

我目前正在学习 R，并尝试将 for 循环更改为使用 apply。上下文是一个带有 2 个变量的数据框 galton，父级（英寸高）和子级（英寸高）。我想从中重复采样并获得一个线性模型（使用 lm）并将该结果保存到一个向量中。

```
library(UsingR)
sampleLm <- vector(100,mode="list")
for(i in 1:100) {
    sampleGalton <- galton[sample(1:length(galton$child),size=50,replace=F),]
    sampleLm[[i]] <- lm(sampleGalton$child ~ sampleGalton$parent)
} 
```

我试过这个：

```
sampleLm <- vector(100,mode="list")
sapply(samples, function(x) {
    sampleGalton <- galton[sample(1:length(galton$child),size=50,replace=F),]
    x <- lm(sampleGalton$child ~ sampleGalton$parent)
}) 
```

代码样本取自给定父母身高的孩子的高尔顿身高。您可以在 UsingR 包中获取此数据。这样你就得到了高尔顿。但实际上它可以是任何东西。只是一些常规数据框。

但是当它正确执行时，`sampleLm`向量没有更新并且包含所有`None`. 我觉得这是正常的，因为我从 R 文档中找到了“无副作用”规则。

必须有一种方法来重新制定它，以便将`for`替换为`apply`。问题是如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:35:01.537

这里最简单的方法是`replicate`：

```
sampleLm <- replicate(100, lm(child ~ parent, data = galton, 
                              subset = sample(seq(nrow(galton)), size = 50)), 
                      simplify = FALSE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:28:52.140

使用 *apply 系列时不需要预先分配 sampleLm。您只需要编写要运行的函数，以便它转换感兴趣的结果，然后将最终结果存储在变量中。

```
sampleLm <- sapply(samples, function(x) {
    sampleGalton <- galton[sample(1:length(galton$child),size=50,replace=F),]
    lm(sampleGalton$child ~ sampleGalton$parent)
}) 
```

# assembly - 如何在 ARM 汇编函数中访问 4 个以上的参数？

> ID：15071506
> 
> 赞同：8
> 
> 时间：2013-02-25T16:22:58.157
> 
> 标签：assembly, arm

在我的汇编函数中，有 6 个参数。当我尝试访问第四个和第五个参数时，它们是错误的，这是我在 arm cortex-8a 上的代码

```
push {r4-r8,lr}
ldr r6, [sp]
ldr r7, [sp, #4] 
```

我检查了 [sp] 内存，r4-r8 有错误的值。但是，如果有 3 个或更少的参数，[sp] 会给出正确的 r4-r8 值。我错过了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T19:05:40.580

为什么不试试呢？

```
unsigned int fun ( unsigned int, unsigned int, unsigned int, unsigned int, unsigned int );
unsigned int myfun ( void )
{
return(fun(1,2,3,4,5));
} 
```

组装然后拆卸

```
> arm-none-eabi-gcc -O2 -c fun.c -o fun.o
> arm-none-eabi-objdump -D fun.o 
```

汇编输出包含

```
00000000 <myfun>:
   0:   e52de004    push    {lr}        ; (str lr, [sp, #-4]!)
   4:   e3a03005    mov r3, #5
   8:   e24dd00c    sub sp, sp, #12
   c:   e58d3000    str r3, [sp]
  10:   e3a01002    mov r1, #2
  14:   e3a02003    mov r2, #3
  18:   e3a03004    mov r3, #4
  1c:   e3a00001    mov r0, #1
  20:   ebfffffe    bl  0 <fun>
  24:   e28dd00c    add sp, sp, #12
  28:   e49de004    pop {lr}        ; (ldr lr, [sp], #4)
  2c:   e12fff1e    bx  lr 
```

正如预期的那样，前四个操作数在寄存器 r0-r3 中。尽管第五个操作数被放置在堆栈上。为什么编译器为操作数分配 12 个字节而不是 4 个字节，这是一个谜……也许看到该函数会更有意义：

```
unsigned int fun ( unsigned int a, unsigned int b, unsigned int c, unsigned int d, unsigned int e )
{
    return(a+b+c+d-e);
} 
```

组装和拆卸

```
arm-none-eabi-gcc -O2 -c fun.c -o fun.o
arm-none-eabi-objdump -D fun.o 

00000000 <fun>:
   0:   e0811000    add r1, r1, r0
   4:   e0812002    add r2, r1, r2
   8:   e59d0000    ldr r0, [sp]
   c:   e0823003    add r3, r2, r3
  10:   e0600003    rsb r0, r0, r3
  14:   e12fff1e    bx  lr 
```

所以被调用者只知道操作数是堆栈上的第一件事，而不关心调用者创建的堆栈帧。所以在这种情况下调用者分配 12 个字节而不是 4 个字节是一个谜。

```
arm-none-eabi-gcc --version
arm-none-eabi-gcc (GCC) 4.7.2
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

看到编译器实际实现调用约定可以使调用约定本身的阅读更容易理解。或者，如果你在你感兴趣的编译器上为你感兴趣的特定函数原型制作这样的例子，你不必阅读约定，你只需让你的调用者或被调用者无论你感兴趣，匹配编译器正在做什么为自己。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-25T16:46:05.320

额外的参数在堆栈上传递，**但是**，*在函数入口处*`SP`指向它们。在您的序言中，您正在推送要保存的寄存器，这会更改，因此您需要考虑它。*`SP`*

 *r4,r5,r6,r7,r8 和 lr 是 6 个寄存器，因此您需要将`SP`偏移量调整为 6*4 = 24 字节。因此，请尝试以下操作：

```
push {r4-r8,lr}        // 6 regs are pushed
                       // SP is decremented by 6*4 = 24 bytes
ldr r6, [sp, #(0+24)]  // get first stack arg
ldr r7, [sp, #(4+24)]  // get second stack arg 
```

如果您对 进行更多操作`SP`，例如为堆栈变量分配空间，您可能也必须考虑到这一点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-24T15:30:17.650

**AAPCS 标准**

[http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042f/IHI0042F_aapcs.pdf](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042f/IHI0042F_aapcs.pdf) 5.5 参数传递包含答案。

由于它是一种算法，因此并不容易理解，但回答问题的关键部分似乎是：

> C.5 如果 NCRN 小于 r4 并且 NSAA 等于 SP，则参数在核心寄存器和堆栈之间拆分。参数的第一部分被复制到从 NCRN 开始直到并包括 r3 的核心寄存器中。参数的其余部分被复制到堆栈中，从 NSAA 开始。NCRN 设置为 r4，NSAA 的增量为参数大小减去寄存器中传递的数量。现在已经分配了参数。

正如其他人所说，这意味着 4 个寄存器 + 堆栈。*

# java - Spring依赖注入，使用@Named还是@Resource？

> ID：15071507
> 
> 赞同：7
> 
> 时间：2013-02-25T16:23:01.543
> 
> 标签：java, spring, dependency-injection

在 Spring 中有两个单独的注解用于按名称执行依赖注入，`javax.annotation.Resource`而`javax.inject.Named`. [Spring](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-autowired-annotation-qualifiers)的文档表明`@Resource`应该按名称用于注入：

> 如果您打算通过名称来表达注解驱动的注入，请不要主要使用@Autowired，即使在技术上能够通过@Qualifier 值引用bean 名称。相反，使用 JSR-250 @Resource 注释，它在语义上定义为通过其唯一名称标识特定目标组件，声明的类型与匹配过程无关。

上面有点混乱，因为 Spring 只是提倡`@Resource`而不是`@Autowired`与`@Qualifer`. `@Named`直到[后面的文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-standard-annotations)中才提到。

JSR-250 定义`@Resource`，而 JSR-330 定义`@Inject`和`@Named`。我知道它们可以很容易地在 Spring 中混搭。使用哪个 JSR？

似乎 Guice 和 CDI 的可移植性会很好，因此使用 JSR-330 注释。另一方面，该文档还指出了Spring 在使用 JSR-330 注释时 的一些[限制。](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-standard-annotations-limitations)

注释按名称注入的最佳实践（如果有的话）是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T04:52:13.727

@Resource 较旧，从 Spring 2.5 开始支持，而在 Spring 3.0 中添加了 @Named 支持，它们都可以用于实现按名称注入的相同目的。

使用 Spring 时，我更喜欢一个而不是另一个的担心是与 Spring 2.5 的向后兼容性以及 javax.inject 是否可以添加/假定为类路径。

# android - 测试布局是否已“膨胀”

> ID：15071511
> 
> 赞同：2
> 
> 时间：2013-02-25T16:23:08.843
> 
> 标签：android, android-layout, swipe

我有一个带有滑动导航的 android 活动（用 ViewPager 实现）。

```
public class UberActivity extends FragmentActivity {

ViewPager mViewPager;

protected void onCreate(Bundle savedInstanceState) {
        //... some stuff

        myfragment1=new MyFragment1();
        myfragment2=new MyFragment2();
        myfragment3=new MyFragment3();
        myfragment4=new MyFragment4();
    }

public void onChoiceSelected(){
    mViewPager.post(new Runnable(){public void run(){
        myfragmen1.update();
        myfragmen2.update();
        myfragmen3.update();
        myfragmen4.update();
    }});
}
}

public class Fragment4 extends Fragment {
View v;
@Override
public View onCreateView(LayoutInflater layoutInflater, ViewGroup container,
        Bundle savedInstanceState) {
        v=layoutInflater.inflate(R.layout.mylayout,container,false);
        return v;
}         
public void update(){
    ((TextView)v.findViewById(R.id.textView1)).setText("new text");
} 
```

我会在 update() 上得到一个 NullPointerException，除非我事先滑动到它（这样它的布局在调用 update() 之前实际上是膨胀的）。这里的问题是 Fragment4 被实例化但它的 OnCreateView() 没有被调用。我应该如何检查是否调用了 OnCreateView()？我可以在那里放一个布尔值，但我认为这不是最佳做法......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:26:04.100

只需在 'v' 周围添加一个 if 语句，检查它是否为空。

```
public void update(){
    if (v != null) {
        ((TextView)v.findViewById(R.id.textView1)).setText("new text");
    }
} 
```

# asp.net - Delphi Prism DLL 和 IIS

> ID：15071514
> 
> 赞同：1
> 
> 时间：2013-02-25T16:23:16.933
> 
> 标签：asp.net, dll, isapi

我的第一个 Delphi Prism Web 应用程序在本地主机上运行良好：

本地主机：58911/Default.aspx

在 IIS 7 下我使用什么 URL 来运行它？

[http://mywebsite.co.uk/AppName.dll/Default.aspx](http://mywebsite.co.uk/AppName.dll/Default.aspx)不起作用。我在这里想念什么？我不能使用这种语法吗？我需要使用 URl 重写吗？

我（想我）已经正确配置了 IIS 7.5。如果我使用 URL [http://mywebsite.co.uk/AppName.dll](http://mywebsite.co.uk/AppName.dll)，浏览器会尝试下载 DLL。

（抱歉，老派的 Windows 程序员正在为 Web 的基础知识而苦苦挣扎）

# image - GWT 项目中图像文件夹的路径

> ID：15071517
> 
> 赞同：6
> 
> 时间：2013-02-25T16:23:30.880
> 
> 标签：image, gwt

我有以下代码行来设置要显示的图像的 URL

```
img.setUrl("images/img1.jpg"); 
```

我应该把我的图像文件夹放在哪里才能正确提取它。目前我将它放在我的 WEB-INF 文件夹中，但这似乎不起作用。我在控制台上收到错误“警告：找不到文件：/images/img1.jpg”我使用 Eclipse 创建了我的项目，但我没有更改任何文件夹结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:03:25.083

您应该`images`在您的名称下创建一个文件夹`war/project_folder`并将图像放在那里。

在设置 URL 时你应该做

```
image.setUrl(GWT.getModuleBaseURL()+"images/im1.jpg"); 
```

您可以使用 GWT.getModuleBaseURL() 或 GWT.getHostPageBaseURL()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T15:40:02.193

在文件夹“client”和“server”旁边创建一个公用文件夹（名为“public”）。公用文件夹的内容将被复制到战争中。

>src
  >com
    >test
    >client
--->public
        >images
    >server
    >shared

瞧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:08:09.850

使用绝对 URL 总是比使用相对 URL 更好`GWT.getModuleBaseURL()`。如果你想使用相对路径，那么你的图像应该在你的相对路径所描述的战争中。

在你的情况下

```
war->images->img1.jpg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-09T09:06:41.567

您需要将图像放在 web 应用程序目录中。

您可以在此处查看您的网络应用程序目录 Proeect --> Properties --> Google --> web Application

在这里您将找到 WAR 目录

所以在这个目录中，你需要放置你的图片。

您可以直接放置图像，也可以根据需要制作文件夹

样本 -

```
image path -->   WebContent/img/pics/recent/data/1/1.jpg 

String imagePath = "/img/pics/recent/data/1/1.jpg" ;

Image img = new Image(imagePath); 
```

注意：- GWT Image 不理解绝对文件路径，您需要使用相对文件路径

# android - 是否有必要在活动/视图/片段停止时停止计时器？

> ID：15071521
> 
> 赞同：1
> 
> 时间：2013-02-25T16:23:42.080
> 
> 标签：android, handler

当活动停止/视图分离/等时是否有必要停止手动定时任务（使用处理程序）。或者系统是否会删除它们？

例如，我有一个 Runnable，我用它来每秒更新一个 TextView。当用户离开活动时，我必须打电话`removeCallbacks(task)`吗？

我尝试了两者（删除和不删除）并且它们工作，但我不知道计时器是否继续不必要地运行，或者在某些情况下这会导致异常。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:35:50.317

是的，它必须被处理或取消。当您使用定时器任务时，它应该在相应的任务或活动或应用程序关闭之前被取消。否则即使在实例关闭后它也会处理其内容......

# aptana - VIM 到 Aptana：缩进三行，或整个块

> ID：15071524
> 
> 赞同：1
> 
> 时间：2013-02-25T16:23:45.950
> 
> 标签：aptana

假设在 Aptana Studio 3 中打开了以下代码：

```
function doSomething()
{
foo();
bar();
baz();
} 
```

将光标放在该`foo();`行上，我如何缩进该行及其后面的两个？在 VIM 中，这是`3>>`. 就此而言，如何自动缩进整个块？在 VIM 中，这是`=%`.

请注意，在 Aptana的支持网站上[单击“浏览讨论”时，会有一个指向 Stack Overflow 的链接。](http://www.aptana.com/support)

# delphi - OnGetColors 事件未触发 TColorBox

> ID：15071525
> 
> 赞同：3
> 
> 时间：2013-02-25T16:23:46.103
> 
> 标签：delphi, colors

我正在尝试向`TColorBox`控件添加自定义颜色。我已将控件添加到我的表单和`Style`属性中，设置`cbCustomColor`为 True。对于该`OnGetColors`事件，我有以下代码：

```
procedure TfrmAbout.GetColors(Sender: TCustomColorBox; Items: TStrings);
begin
  ShowMessage('GetColors has been triggered');
  Items.AddObject('clWebSnow',TObject(clWebSnow));
  Items.AddObject('MyOrange',TObject(Rgb(255,128,0)));
end; 
```

我没有看到消息框或下拉菜单中出现的颜色。为了让它发挥作用，我还需要做些什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:29:21.617

您需要`cbCustomColors`在属性中包含该选项以`Style`启用添加您自己的自定义颜色。该`cbCustomColor`选项仅包括该项目，它允许您选择自定义颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:49:50.347

为了让它发挥作用，我确实必须遵循@Sertac 的建议。在 FormCreate 上，我为每个 TColorBox 触发了一个删除`[cbCustomColors]`然后将它们添加回的过程。

我找不到其他合适的解决方法，也找不到 GetColors 在应该触发的时候没有触发的原因。

# javascript - 热点未在产品查看器中链接

> ID：15071528
> 
> 赞同：0
> 
> 时间：2013-02-25T16:23:51.450
> 
> 标签：javascript, html, ios, jquery-mobile

因此，使用 360 度图像旋转脚本，我设置了一个标签来充当热点，并导致 jquery 移动文档中的不同页面。一切都可以在桌面上运行，但是当我在 ipad 上测试页面时，没有任何链接可以在任何地方运行。这是旋转的脚本。

```
<script>
jQuery(document).ready(function ($) {
    var $product = $('#product'),
        $imgs = $product.find(".child"),
        imageTotal = $imgs.length - 1,
        clicked = false,
        widthStep = 4,
        currPos,
        currImg = 0,
        lastImg = 0;
    $imgs.bind('mousedown', function (e) {
        e.preventDefault(); // prevent dragging images
    })
        .filter(':gt(0)').addClass('notseen');

    $product.bind('mousedown touchstart', function (e) {
        if (e.type == "touchstart") {
            currPos = window.event.touches[0].pageX;
        } else {
            currPos = e.pageX;
        }
        clicked = true;
        return false;
    });
    $(document)
        .bind('mouseup touchend', function () {
        clicked = false;
    })
        .bind('mousemove touchmove', function (e) {
        if (clicked) {
            var pageX;
            if (e.type == "touchmove") {
                pageX = window.event.targetTouches[0].pageX;
            } else {
                pageX = e.pageX;
            }
            widthStep = 4;
            if (Math.abs(currPos - pageX) >= widthStep) {
                if (currPos - pageX >= widthStep) {
                    currImg++;
                   if (currImg > imageTotal) {
  currImg = 0;
}
                } else {
                    currImg--;
                    if (currImg < 1) {
                        currImg = imageTotal;
                    }
                }
                currPos = pageX;
                $imgs.eq(lastImg).addClass('notseen');
                $imgs.eq(currImg).removeClass('notseen');
                lastImg = currImg;
                // $obj.html('<img src="' + aImages[options.currImg] + '" />');
            }
        }
    });
});
</script> 
```

我知道它的脚本，因为当我删除它时，链接工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:17:41.947

`jQuery(document).ready()`jQM 不支持。

[http://view.jquerymobile.com/1.3.0/docs/faq/dom-ready-not-working.php](http://view.jquerymobile.com/1.3.0/docs/faq/dom-ready-not-working.php)

# c++ - 尝试使用 Vector 实现堆栈时出错

> ID：15071533
> 
> 赞同：0
> 
> 时间：2013-02-25T16:24:23.643
> 
> 标签：c++, stack

我正在尝试使用向量创建一个堆栈，但我似乎无法让它工作......这是我的代码：

```
#ifndef _STACK_VEC_TPT_H_
#define _STACK_VEC_TPT_H_
#include <stdexcept>

using namespace std;

// abstract stack class implemented using vector
template<class T>
class abs_stack_vec {
public:
    // pushes an element onto the top of the stack. 
    // grows the vector if needed.
    virtual void push(const T& elem)=0;

    // pops an element from the top of the stack.
    // does nothing if the stack is empty.
    virtual void pop()=0;

    // returns the value of the top element on the stack.
    // throws domain_error if the stack is empty.
    virtual const T& top()=0;

    // returns the number of elements currently on the stack.
    virtual unsigned size() const=0;
};

// the following class inherits from the abstract stack class
// using its own implementation of a vector
// you must implement the abstract methods push, pop, and top.
template<class T>
class mystack_vec: public abs_stack_vec<T> {
public:
    unsigned size() const {return _size;}

    // method used for growing vector when size equals capacity
    // and need to add more elements
    void grow() {
        T* temp = new T[_size * 2];
        for(unsigned i = 0; i < _size; ++i) {
            temp[i] = _values[i];
        }
        delete[] _values;
        _values = temp;
        _capacity = _size * 2;
    }

    // default constructor
    mystack_vec() {
        _capacity = 5;
        _size = 0;
        _values = new T[_capacity];
    }

    // pushes an element onto the top of the stack. 
    // grows the vector if needed.
    void push(const T& elem)
    {
        if (_size == _capacity)
        {
            grow();
        }
        _values[_size] = (elem);
        ++_size;
    }

    // pops an element from the top of the stack.
    // does nothing if the stack is empty.
    void pop()
    {
        if (_size != 0)
        {
            delete _values[_size];
            --_size;
        }
    }

    // returns the value of the top element on the stack.
    // throws domain_error if the stack is empty.
    const T& top() 
    {
        if (_size == 0)
        {
            throw domain_error("The stack is empty!");
        }
        else
        {
            return _values[_size];
        }
    }

    //destructor
    ~mystack_vec() {
        delete[] _values;
    }

    // TO-DO: YOU MUST IMPLEMENT THE FOLLOWING METHODS:
    // PUSH, POP, TOP

    // END OF TO-DO
private:
    T *_values; // array !!
    unsigned _size, _capacity;
};
#endif 
```

尝试这种方法我得到了错误：

```
1>------ Build started: Project: Lab 3, Configuration: Debug Win32 ------
1>  tester.cpp
1>c:\users\jaysen\documents\data structures\lab 3\lab 3\stack_vec_tpt.h(72): error C2541: 'delete' : cannot delete objects that are not pointers
1>          c:\users\jaysen\documents\data structures\lab 3\lab 3\stack_vec_tpt.h(69) : while compiling class template member function 'void mystack_vec<T>::pop(void)'
1>          with
1>          [
1>              T=int
1>          ]
1>          c:\users\jaysen\documents\data structures\lab 3\lab 3\tester.cpp(72) : see reference to function template instantiation 'void mystack_vec<T>::pop(void)' being compiled
1>          with
1>          [
1>              T=int
1>          ]
1>          c:\users\jaysen\documents\data structures\lab 3\lab 3\tester.cpp(59) : see reference to class template instantiation 'mystack_vec<T>' being compiled
1>          with
1>          [
1>              T=int
1>          ]
1>c:\users\jaysen\documents\data structures\lab 3\lab 3\stack_vec_tpt.h(72): error C2059: syntax error : ';'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我也尝试过包含矢量类并使用 container.push_back() 和 push_back 等。请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:31:36.767

直接的问题是，它`_values[_size]`给你动态分配数组中的最后一个`T`对象，而不是指针。您不能`delete _values[_size];`对不是指向动态分配内存的指针进行操作。

因此，您可能很想这样做`delete &_values[_size];`，但这也是错误的。仅仅因为您使用 , 动态分配了整个数组`_values = new T[_capacity];`，并不意味着您可以`delete`使用单个元素。您只能使用 释放整个数组`delete[] _values;`。

现在您可以使用`std::vector`它来代替，但由于您没有发布您遇到的问题，所以我无法帮助您。但是，您将为标准已经提供的东西付出太多努力：

```
std::stack<int> s; 
```

该类`std::stack`是其他容器类型的适配器。默认情况下，它使用 a`std::deque`作为其底层结构，这比作为堆栈更适合`std::vector`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:27:12.450

你不能删除int。您可以删除 int*，但在此代码中您尝试删除 int。

看到这条消息：

```
c:\users\jaysen\documents\data structures\lab 3\lab 3\stack_vec_tpt.h(72): error C2541: 'delete' : cannot delete objects that are not pointers 
```

# python - os.open() 在哪些系统/文件系统上是原子的？

> ID：15071541
> 
> 赞同：8
> 
> 时间：2013-02-25T16:24:41.343
> 
> 标签：python, linux, windows, filesystems, locking

[这篇](http://www.anattatechnologies.com/q/2012/11/locking-and-concurrency-in-python/)文章指出，

```
fd = os.open('foo.lock', os.O_CREAT|os.O_EXCL|os.O_RDWR) 
```

“在大多数文件系统上都是原子的”。这是真的（在 Unix 和 Windows 上）吗？在哪些文件系统上？

[文档](http://docs.python.org/2/library/os.html#open-constants)声明提到的标志在 Unix 和 Windows 上可用，因此它看起来像是一种用于文件锁定的诱人的跨平台方法（标志`O_CREAT`并`O_EXCL`确保调用进程创建文件）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T17:04:59.677

对于符合 UN*X（根据 OpenGroup 认证的 POSIX / IEEE 1003.1）系统，该行为被保证为 OpenGroups 规范强制*执行*此操作。引用：[`open(2)`](http://pubs.opengroup.org/onlinepubs/000095399/functions/open.html)

 *> O_EXCL
> 如果设置了 O_CREAT 和 O_EXCL，如果文件存在，则 open() 将失败。检查文件是否存在以及如果文件不存在则创建文件对于执行 open() 的其他线程在同一目录中命名相同文件名并设置了 O_EXCL 和 O_CREAT应该是**原子的。**如果设置了 O_EXCL 和 O_CREAT，并且路径名称为符号链接，则无论符号链接的内容如何，​​open() 都将失败并将 errno 设置为 [EEXIST]。如果设置了 O_EXCL 而未设置 O_CREAT，则结果未定义。

“常见的”UN*X 和类似 UN*X 的系统（Linux、MacOSX、*BSD、Solaris、AIX、HP/UX）的行为肯定是这样的。

由于 Windows API 没有`open()`这样的功能，因此必须根据本机 API 重新实现库函数，但可以保持语义。

我不知道哪些广泛使用的系统*不*符合要求。QNX 虽然未经 POSIX 认证，但在其[`open()`](http://www.qnx.org.uk/developers/docs/6.3.0SP3/neutrino/lib_ref/o/open.html). *BSD 手册页没有明确提到“原子性”，但 Free/Net/OpenBSD 实现了它。甚至像 SymbianOS 这样的外来系统（像 Windows 一样没有 UN*X`open`系统调用）也可以进行原子打开/创建。

要获得更有趣的结果，请尝试找到一个操作系统/C 运行时库，它具有*但未*`open()`实现上述语义......并且 Python 将在其上运行线程（让你到那里，MSDOS......）。

 ***编辑：**我的帖子特别关注“哪些操作系统具有此特性`open`？” - 答案是“几乎所有人”。写。但是对于*文件系统*，情况有所不同，因为*网络文件系统*- 无论是 NFS、SMB/CIFS 还是其他文件系统，并不总是保持不变`O_EXCL`，因为这可能导致拒绝服务（如果客户端执行`open(..., O_EXCL, ...)`然后停止与文件服务器通信 /已关闭，其他所有人都将被锁定）。**

# php - 如何限制用户在 textarea 上书写

> ID：15071542
> 
> 赞同：0
> 
> 时间：2013-02-25T16:24:44.210
> 
> 标签：php, html, ajax

我有这样的文本区域类型

```
<textarea name="setting_footer" cols="30" rows="10"></textarea> 
```

怎么能把文字贴在页面上让不超过100个字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T16:26:41.837

试试，最大长度

```
<textarea maxlength='10'></textarea> 
```

[http://jsbin.com/isevek/1/](http://jsbin.com/isevek/1/)

对于 < IE 10 -[在 Html Textarea 中设置 maxlength](https://stackoverflow.com/questions/4459610/set-maxlength-in-html-textarea)

为了清楚起见，请确保您也验证了服务器端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T16:25:46.430

采用[`MAXLENGTH`](http://reference.sitepoint.com/html/input/maxlength)

```
<textarea name="setting_footer" cols="30" rows="10" maxlength="100"></textarea> 
```

# sql - 关键字“订单”附近的语法不正确。SQL

> ID：15071548
> 
> 赞同：-6
> 
> 时间：2013-02-25T16:25:01.147
> 
> 标签：sql, sql-server

```
 (select top 1 percent A from B order by newid()) 
```

我想从表 B 中获取随机记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:32:23.373

像这样使用...

```
select * from B where A in 
 (select top 1 percent A from B order by newid()) 
```

或者

```
select top 1 percent A from B order by newid() 
```

两者都会每次都给你随机的行......

**编辑 ：**

[从大表中随机选择行](http://msdn.microsoft.com/en-us/library/cc441928.aspx)

# unit-testing - 如何使用采样技术分析 Visual Studio 2012 单元测试？

> ID：15071549
> 
> 赞同：2
> 
> 时间：2013-02-25T16:25:05.557
> 
> 标签：unit-testing, visual-studio-2012, profiling

当我使用[Profile Test](https://stackoverflow.com/questions/12027885/how-to-profile-unit-tests-in-visual-studio-2012)命令在 Visual Studio 2012 Update 1 中分析单元测试时，使用了检测分析器。这种分析技术*的*开销太大 (100:1)，无法在我的应用程序中使用。如何配置 Visual Studio 2012 以使用采样分析器来分析我的单元测试？

# css - 居中左浮动内容 twitter bootstrap

> ID：15071555
> 
> 赞同：0
> 
> 时间：2013-02-25T16:25:16.103
> 
> 标签：css, twitter-bootstrap

我对 twitter bootstrap 世界和基于 % 的宽度相对较新，并且对应该很容易完成的事情感到非常困惑。

我正在尝试将浮动`.subimg`在我的页面上的每个左侧居中。显然`margin:0 auto`行不通，因为它不是静态网格。我在父 div 上使用了文本对齐中心，但无济于事。我的标记如下：

```
<style>
.subimg{float:left;}
.row-fluid{text-align:center;}
</style>

<div class="row-fluid"><!-- begin row -->
    <div class="span12 subimgstrip">
            <div class="subimg">
                <a href="#">
                    <img src="/wp-content/themes/wordpress-bootstrap/img/products/infection/1.jpg"/>
                    <h6>Customize Settings</h6>
                </a>
            </div>
            <div class="subimg">
                <a href="#">
                        <img src="/wp-content/themes/wordpress-bootstrap/img/products/infection/2.jpg"/>
                        <h6>Set Specific Criteria</h6>
                </a>
            </div>
            <div class="subimg">
                <a href="#">
                        <img src="/wp-content/themes/wordpress-bootstrap/img/products/infection/3.jpg"/>
                        <h6>Customize Alerts</h6>
                </a>
            </div>
            <div class="subimg">
                <a href="#">
                        <img src="/wp-content/themes/wordpress-bootstrap/img/products/infection/4.jpg"/>
                        <h6>Create Antibiograms</h6>
                </a>
            </div>
            <div class="subimg">
                <a href="#">
                        <img src="/wp-content/themes/wordpress-bootstrap/img/products/infection/5.jpg"/>
                        <h6>Isolate Information</h6>
                </a>
            </div>
        </div>
    </div><!-- end row --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:34:08.273

使用 twitter bootstrap 将浮动内容居中的最佳方法是给浮动项目一个样式，`display:inline-block;`并给父 div 一个样式`text-align:center`

# neo4j - neo4j 复杂模式搜索

> ID：15071557
> 
> 赞同：2
> 
> 时间：2013-02-25T16:25:24.727
> 
> 标签：neo4j

我是 NEO4J 的新手，我需要针对特定​​问题的帮助。或者如果可能的话，也可以给出答案。

设置：我们有 2 种不同类型的节点：用户（A、B、C、D）和产品（1、2、3、4、5、6、7、8）接下来我们有 2 种不同类型的用户和用户想要产品和产品由用户拥有的产品。

1.  1,2归A所有
2.  3,4 归 B 所有
3.  5,6归C所有
4.  7,8 归 D 所有

现在

1.  B 想要 1
2.  C 想要 3
3.  D要5

所以就目前而言，我没有任何问题，并且我轻松创建了图形数据。我的问题从这里开始。我们有一个圆圈，当 A 想要产品 8 时。

A-[:WANTS]->8-[:OWNEDBY]->D-[:WANTS]->5-[:OWNEDBY]->C-[:WANTS]->3-[:OWNEDBY]->B- [:WANTS]->1-[:OWNEDBY]->A

所以我们有一个独特的模式，U-[:WANTS]->P-[:OWNEDBY]->U

现在我想做的是按照该模式找到通往开始节点（启动想要产品的用户）的路径。如何使用 Cypher 定义它？还是我需要另一种方式？

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:15:35.423

我有一种感觉，这可以被破解`reduce`并计算每一个偶数（每秒）的关系：

```
MATCH p=A-[:OWNEDBY|WANTS*..20]->X
WITH r in relationships(p)
RETURN type(r),count(r) as cnt, 
WHERE cnt=10; 
```

或者可能计算 rel 数量为偶数的所有路径：

```
MATCH p=A-[:OWNEDBY|WANTS*..]->X    
RETURN p,reduce(total, r in relationships(p): total + 1)  as tt
WHERE tt%2=0; 
```

但是您的图表必须具有严格的模式，其中来自所有所有者和需求集合的所有传入关系必须不同于来自同一集合的所有传出关系。换句话说，这种模式不可能存在：`A-[:WANTS]->B-[:WANTS]->C or A-[:OWNEDBY]->B-[:OWNEDBY]->C`

查询可能在语法上是错误的，但是可以在 cypher 中实现逻辑，你会更多地使用它。或使用 gremlin，我想我在某处看到了一个 gremlin 查询，您可以在其中定义一个模式，然后通过该模式循环 n 次，直到结束节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:52:36.817

我玩过这个并创建了[http://console.neo4j.org/?id=qq9v1](http://console.neo4j.org/?id=qq9v1)显示示例图。我发现以下密码语句解决了这个问题：

```
start a=node(1) 
match p=( a-[:WANTS]->()-[:WANTS|OWNEDBY*]-()-[:OWNEDBY]->a ) 
return p 
order by length(p) desc 
limit 1 
```

只有一个故障：中间部分`[:WANTS|OWNEDBY*]`不要求交替 WANT 和 OWNEDBY 链。正如@ulkas 所说，如果您在数据建模期间小心，这应该不是问题。您还可以查看[http://api.neo4j.org/current/org/neo4j/graphalgo/GraphAlgoFactory.html](http://api.neo4j.org/current/org/neo4j/graphalgo/GraphAlgoFactory.html)从 Java 代码应用图形算法。您可以使用非托管扩展来提供对它的 REST 访问。

# xml - JAXB 将 Java List 转换为对象集，因此失去了列表排序

> ID：15071558
> 
> 赞同：1
> 
> 时间：2013-02-25T16:25:24.913
> 
> 标签：xml, json, jaxb, jaxb2, jettison

我有一个用于 UI 控件的 XML 架构，类似于以下 XML

```
<InputParameters>
    <Combobox name="Combo1">...</Combobox>
    <Radiobutton name="Radio1">...</Radiobutton>
    <Combobox name="Combo2">...</Combobox>
    <Combobox name="Combo2">...</Combobox>
</InputParameters> 
```

以下是`InputParameters`声明（另一个 JAXB 元素中的字段）的方式：

```
 @XmlElementWrapper(name="InputParameters")
    @XmlElementRefs(
        {
            @XmlElementRef(name="Combobox",     type=ComboboxJAXB.class),
            @XmlElementRef(name="RadioButtonGroup", type=RadioButtonGroup.class)
        }
        )
    protected List<? extends InputComponent> inputParameters; 
```

这里有几个要点：

*   物品的顺序`InputParameters`很重要
*   `Combobox`并且在模式 ( )`Radiobutton`中都有相同的替换组头`InputComponent`

可能还值得观察的是：

*   `InputParameters`可以（并且是）认为`Map`@name 属性是（唯一）键的位置
*   由于顺序很重要，因此这必须是 Java`LinkedHashMap`

封送处理的 XML 输出（如上所示）很好。当 JAX-RS 将其输出为 JSON 时，我遇到了麻烦。

在 JSON 中，输出类似于：

```
{
    InputParameters : {
       Combobox : {.....},
       Radiobutton : {.......},
       Combobox : {.....},
       Combobox : {.....},
       }
} 
```

这里的问题是：

*   该`InputParameters`对象具有多个名为“组合框”的属性
*   因为`InputParameters`是对象而不是数组，所以不表示项目的顺序

问题归结为：我可以让 JAXB 将内容输出`InputParameters`为（有序）数组而不是（无序）对象集吗？或者也许我应该考虑一些非常不同的方法？

所需的 JSON 输出看起来更像：

```
{
    InputParameters : 
      [
         {Combobox : {.....}},
         {Radiobutton : {.......}},
         {Combobox : {.....}},
         {Combobox : {.....}},
      ]
} 
```

我正在使用 JAXB 的参考实现。

# java - 使用 Tika 解析元标记并从正文中获取 HTML 内容

> ID：15071560
> 
> 赞同：1
> 
> 时间：2013-02-25T16:25:34.397
> 
> 标签：java, xml-parsing, apache-tika

我使用出色的 Apache Tika 库解析文件。我想用我自己的解析器提取元标记，然后仅从`<body>`-tag 中获取内容作为 HTML 并将其存储在数据库中。

我现在已经尝试了几个小时/几天:-(，但找不到解决方案：

*   当我在-tag`ToHTMLContentHandler` *之后*`<body>`使用时，我会遇到没有 -tag 的无效命名空间的异常`<html>`。
*   `BodyContentHandler`只返回没有 HTML 标签的正文。
*   `tika-app`似乎使用 a来`TransformerHandler`获取 HTML（我以前从未听说过这种处理程序。）我可以使用它从`<body>`-tag 获取 HTML 并自己解析元标记吗？这是比使用更好的方法`ToHTMLContentHandler`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:47:34.830

检查以下链接是否对您有所帮助..

[使用 Apache Tika 进行内容检测、元数据和内容提取](http://www.hascode.com/2012/12/content-detection-metadata-and-content-extraction-with-apache-tika/)

[使用 Apache Tika 解析 HTML](http://chrisjordan.ca/post/15219674437/parsing-html-with-apache-tika)

# php - 检索数组值

> ID：15071562
> 
> 赞同：-2
> 
> 时间：2013-02-25T16:25:40.187
> 
> 标签：php, arrays

关于如何使用 PHP 从这个数组中检索 email1@some.com、email2@some.com、email3@some.com、email4@some.com 和 email5@some.com 的任何想法？

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [0] => email1@some.com
        )

    [1] => SimpleXMLElement Object
        (
            [0] => email2@some.com
        )

    [2] => SimpleXMLElement Object
        (
            [0] => email3@some.com
        )

    [3] => SimpleXMLElement Object
        (
            [0] => email4@some.com
        )

    [4] => SimpleXMLElement Object
        (
            [0] => email5@some.com
        )
) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:28:06.180

```
<?php
foreach ($array as $item) {
    $email = $item[0];
    // Do something with $email
}
?> 
```

# macos - 如何使用 Indy 获取本地 IP4 地址？

> ID：15071564
> 
> 赞同：2
> 
> 时间：2013-02-25T16:25:44.973
> 
> 标签：macos, delphi, delphi-xe2, indy

我正在使用 TIdStack.LocalAddress 获取本地 IP 地址。在同时具有 IP6 和 IP4 的 OS X 系统上，这将返回 IP6 地址，这不是我想要的。

找到本地 IP4 地址的最佳方法是什么？例如，我可以简单地使用 TIdStack.LocalAddresses 中的最短条目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T20:24:04.523

该`TIdStack.LocalAddress`属性仅返回属性中列出的第一个 IP `TIdStack.LocalAddresses`（注意 - 这些属性已被弃用，因为它们不是线程安全的。您应该改用该`TIdStack.AddLocalAddressesToList()`方法）。一台PC/设备可以有多个本地IP，比如它连接到多个网络，同时支持IPv4和IPv6等。`LocalAddresses`列表中IP的顺序由操作系统决定，而不是由Indy决定。从它的声音来看，您将必须获得完整的列表并循环查找您感兴趣的 IPv4 地址。

`TIdStackVCLPosix`，Indy 用于 Mac OSX，实际上是目前唯一支持`TIdStack`在属性中报告 IPv4 和 IPv6 地址的实现`LocalAddresses`（其他`TIdStack`实现目前仅支持 IPv4）。但是，该列表是普通的`TStrings`，它不区分给定 IP 是 IPv4 还是 IPv6（它不使用该`TStrings.Objects`属性来提供该信息）。如果需要区分，则必须手动解析 IP。在未来的版本中，Indy 将使用`TIdStack.LocalAddress(es)`本机提供 IP 版本信息的不同实现来替换属性。

例如：

```
var
  IPs: TStringList;
  IP: String;
  I: Integer;
  Err: Boolean;
begin
  IPs := TStringList.Create;
  try
    GStack.AddLocalAddressesToList(IPs);
    for I := 0 to IPs.Count-1 do
    begin
      IP := IPs[I];

      // TIdStack.IsIP() currently only supports IPv4, but
      // it will be updated to support IPv6 in a future
      // release...
      //
      // if GStack.IsIP(IP) then
      // if GStack.IsIPv4(IP) then

      IPv4ToDWord(IP, Err);
      if not Err then 
        Break;
      IP := '';

      // alternatively:
      {
      IPAddr := TIdIPAddress.MakeAddressObject(IPs[I]);
      IP := IPAddr.IPv4AsString; // returns blank if not IPv4
      IPAddr.Free;
      if IP <> '' then
        Break;
      }
    end;
  finally
    IPs.Free;
  end;
  if IP <> '' then
  begin
    // use IP as needed...
  end;
end; 
```

# git - 如何在windows上安装magit

> ID：15071569
> 
> 赞同：1
> 
> 时间：2013-02-25T16:25:52.557
> 
> 标签：git, emacs, magit

我正在尝试将 magit 1.2.0 安装到从 ftp.gnu.org 下载的全新安装的 emacs-24.2-bin-i386 中，并且“make”步骤失败并出现以下错误：

打开输出文件：权限被拒绝，d:/devel/emacs/release/emacs24/emacs-24.2/lisp/50magit.el

它从哪里获取（不存在的） d:/devel/emacs... 路径？我认为它与emacs本身内置的环境有关，但我不知道如何覆盖它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:31:17.743

使用 package.el从[MELPA安装 Magit。](http://melpa.milkbox.net/)

# database - 播放框架 2.1 Neo4j 内嵌

> ID：15071570
> 
> 赞同：2
> 
> 时间：2013-02-25T16:25:59.597
> 
> 标签：database, neo4j, embedded-database, playframework-2.1

如何从 Java 或 Scala 版本的 Play 框架中使用 Neo4j 嵌入式？我很难找到有关这方面的任何信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:34:35.320

我基于 Play 的 Anorm 为 REST 编写了 AnormCypher。我实际上计划在 0.4 中添加一些嵌入式支持。

然而，Fynn 推出了 ACE (AnormCypherEmbedded)，我还没有尝试过——但它看起来可能符合你的要求：http: [//fynnfeldpausch.github.com/ace/](http://fynnfeldpausch.github.com/ace/)

您还可以通过它们的 Java API（或通过 SpringData）直接使用 neo 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T12:06:52.397

我让 Neo4j 版本 v1.9.M05 工作（在 Windows 上）`Build.scala`

```
 val appDependencies = Seq(
...
"org.neo4j.app" % "neo4j-server" % "1.9.M05" classifier "static-web" classifier "",
"ch.qos.logback" % "logback-core" % "1.0.3" force(),
"ch.qos.logback" % "logback-classic" % "1.0.3" force() 
```

有一个关于必须使用较旧的 logbacks 的线程（否则会导致一些异常） - 使用 Logback.xml[播放 2.1 和 Neo4J WrappingNeoServer 错误](https://stackoverflow.com/questions/14373029/play-2-1-and-neo4j-wrappingneoserver-errors-with-logback-xml)

里程碑构建的详细信息在这里 - [http://docs.neo4j.org/chunked/milestone/server-embedded.html](http://docs.neo4j.org/chunked/milestone/server-embedded.html)。我还没有尝试过稳定版本，但文档类似 - [http://docs.neo4j.org/chunked/stable/server-embedded.html](http://docs.neo4j.org/chunked/stable/server-embedded.html)

例如测试它是否有效

```
GraphDatabaseService graphDb = new GraphDatabaseFactory().newEmbeddedDatabase(DB_PATH);
// get all the nodes
Iterable<Node> nodes = GlobalGraphOperations.at(graphDb).getAllNodes(); 
```

# java - Connector.open(String s) 导致 RuntimeException

> ID：15071578
> 
> 赞同：0
> 
> 时间：2013-02-25T16:26:23.890
> 
> 标签：java, sockets, runtimeexception, connector

我在这里有一个小程序，我尝试在端口 1234 上创建一个服务器套接字。

```
public class SocketTest {
public static void main(String[] args) {

    try {           
        ServerSocketConnection scn;
        scn = (ServerSocketConnection) Connector.open("socket://:1234");
    } catch (IOException e) {
        e.printStackTrace();
    }

}
} 
```

我得到一个由 Connector.open() 方法引起的 RuntimeException。

更新：堆栈跟踪：

```
Exception in thread "main" java.lang.RuntimeException
at ej.ecom.io.Connector.open(Connector.java:61)
at SocketTest.main(SocketTest.java:12) 
```

我试图禁用我的防病毒和防火墙并将套接字的创建放到一个单独的线程中，但没有任何改变。我觉得我在这里犯了一个基本错误。我究竟做错了什么？

# xpages - Xpages 扩展库适用于客户端，但不适用于本地浏览器

> ID：15071582
> 
> 赞同：0
> 
> 时间：2013-02-25T16:26:37.313
> 
> 标签：xpages, xpages-extlib

我遇到了本地数据库和扩展库的问题。如果页面上有任何扩展库控件，我会`Cannot find the library com.ibm.xsp.extlib.library`在浏览器中收到错误消息，但如果在客户端中显示相同的页面。

真正奇怪的是，只要没有页面上有扩展页面控件，那么该页面就可以作为标准 XPage 正常工作。但是，只要将扩展库控件放置在任何页面上，即使没有扩展库控件的页面也会出现该错误。事实上，在删除 db 中的任何扩展库控件痕迹后，错误仍然存​​在。

当它在客户端工作正常时，如何在浏览器中获取本地数据库中的扩展页面 XPages 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:44:51.820

我将文件复制到：

workspace\applications\eclipse\plugins 在数据目录中找到

多米诺骨牌\工作区\应用程序\eclipse\plugins

它位于数据目录下。

# c - 在 fb_var_screeninfo 中设置 yres_virtual 时出现无效参数错误

> ID：15071583
> 
> 赞同：5
> 
> 时间：2013-02-25T16:26:40.143
> 
> 标签：c, linux, framebuffer, doublebuffered

我正在尝试为 linux 创建一个直接写入帧缓冲区/dev/fb0 的应用程序。为了使其双缓冲，我尝试将虚拟屏幕设置为屏幕大小的两倍。这是我写的程序：

```
struct fb_var_screeninfo screeninfo_var;
struct fb_fix_screeninfo screeninfo_fixed;
unsigned int* screenbuffer;

void gfx_init()
{
    fb0 = open("/dev/fb0", O_RDWR);
    if(fb0 == 0)
        error("Could not open framebuffer located in /dev/fb0!");

    if (ioctl(fb0, FBIOGET_FSCREENINFO, &screeninfo_fixed) == -1)
        error("Could not retrive fixed screen info!");

    if (ioctl(fb0, FBIOGET_VSCREENINFO, &screeninfo_var) == -1)
        error("Could not retrive variable screen info!");

    screeninfo_var.xres_virtual = screeninfo_var.xres;
    screeninfo_var.yres_virtual = screeninfo_var.yres * 2;
    screeninfo_var.width = screeninfo_var.xres;
    screeninfo_var.height = screeninfo_var.yres;
    screeninfo_var.xoffset = 0;
    screeninfo_var.yoffset = 0;

    if (ioctl(fb0, FBIOPUT_VSCREENINFO, &screeninfo_var) == -1)
        error("Could not set variable screen info!");

    info("Detected monitor of %ix%i pixels using %i bit colors.",screeninfo_var.xres, screeninfo_var.yres, screeninfo_var.bits_per_pixel);

    screenbuffersize = screeninfo_var.xres_virtual * screeninfo_var.yres_virtual * screeninfo_var.bits_per_pixel/8;
    screenbuffer = (unsigned int *)mmap(0, screenbuffersize, PROT_READ | PROT_WRITE, MAP_SHARED, fb0, 0);
    if( (long)screenbuffer == 0 || (long)screenbuffer == -1 )
        error("Failed to map framebuffer to device memory!");
} 
```

程序在`ioctl(fb0, FBIOPUT_VSCREENINFO, &screeninfo_var)`报告错误无效参数时失败。删除该行时`screeninfo_var.yres_virtual = screeninfo_var.yres * 2;`，它运行良好（但没有双缓冲）。

有人看到我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-07T16:29:04.263

为了避免将来任何人头疼，有一种方法可以在 linux 上使用低级图形（例如 /dev/fb0）正确地加倍缓冲。但是根据这个线程：[https://forum.odroid.com/viewtopic.php?f=55&t=8741](https://forum.odroid.com/viewtopic.php?f=55&t=8741)不可能通过创建一个两倍于原始帧大小的虚拟帧缓冲区来真正双倍缓冲帧缓冲区（我'已经读过树莓派可能是该规则的一个例外，因为它由不同的驱动程序支持）。

在 linux 上使用低级图形双缓冲的正确方法是通过 libdrm（或 /dev/dri/card0）。我在这里关注了一个非常好的示例：[https](https://github.com/dvdhrm/docs/blob/master/drm-howto/modeset-vsync.c) ://github.com/dvdhrm/docs/blob/master/drm-howto/modeset-vsync.c 。将我的 /dev/fb0 代码转换为 /dev/dri/card0 代码并不难。

无论如何，我希望我已经帮助了将来可能会遇到这个问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:15:32.300

这是一个常见的问题，它是由视频驱动程序的限制引起的。例如，Intel 的 810 芯片组仅允许 640x480 分辨率，而 Broadcom 将宽度限制为不超过 1200 ( [http://www.raspberrypi.org/phpBB3/viewtopic.php?f=66&t=29968](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=66&t=29968) )。

除非您更改驱动程序或视频卡本身（如果可能），否则您在这里无能为力。

编辑：如果您在 PC 上，请尝试使用`vesafb`，而不是英特尔的驱动程序。

这里有一个提示：http: [//www.mail-archive.com/debian-russian@lists.debian.org/msg27725.html](http://www.mail-archive.com/debian-russian@lists.debian.org/msg27725.html)

# html - Phonegap显示差异

> ID：15071585
> 
> 赞同：0
> 
> 时间：2013-02-25T16:26:44.600
> 
> 标签：html, css, cordova, webkit

我用 Phonegap 构建了一个应用程序。我的问题是，在 2.2 版本的 android 中，输入字段正确居中，但在更高版本中，输入字段显示在左侧。对我来说，这没有任何意义，因为我认为 phonegap 在所有设备上的显示方式都相同，而且 phonegap 的工作方式类似于 webkit 浏览器。我对它有什么误解？

# c# - Task.Run 用于上传和更新进度返回错误

> ID：15071586
> 
> 赞同：1
> 
> 时间：2013-02-25T16:26:44.600
> 
> 标签：c#, winforms, task-parallel-library, async-await

我有以下代码将文件上传到服务器并在栏中更新上传进度。

```
private void UploadButton_Click(object sender, EventArgs e)
{
    Cursor = Cursors.WaitCursor;
    try
    {
        // get some info about the input file
        System.IO.FileInfo fileInfo = new System.IO.FileInfo(FileTextBox.Text);
        UploadDocument(fileInfo);
        // show start message
        LogText("Starting uploading " + fileInfo.Name);
        LogText("Size : " + fileInfo.Length);
    }
    catch (Exception ex)
    {
        LogText("Exception : " + ex.Message);
        if (ex.InnerException != null) LogText("Inner Exception : " + ex.InnerException.Message);
    }
    finally
    {
        Cursor = Cursors.Default;
    }
}

private async void UploadDocument(System.IO.FileInfo fileInfo)
{
    var someTask = await Task.Run<bool>(() =>
    {
        // open input stream
        using (System.IO.FileStream stream = new System.IO.FileStream(FileTextBox.Text, System.IO.FileMode.Open, System.IO.FileAccess.Read))
        {
            using (StreamWithProgress uploadStreamWithProgress = new StreamWithProgress(stream))
            {
                uploadStreamWithProgress.ProgressChanged += uploadStreamWithProgress_ProgressChanged;

                // start service client
                FileTransferWCF.FileTransferServiceClient client = new FileTransferWCF.FileTransferServiceClient();
                //FileTransferClient.FileTransferServiceClient client = new FileTransferClient.FileTransferServiceClient();

                // upload file
                client.UploadFile(fileInfo.Name, fileInfo.Length, uploadStreamWithProgress);

                LogText("Done!");

                // close service client
                client.Close();
            }
        }

        return true;
    });
}

void uploadStreamWithProgress_ProgressChanged(object sender, StreamWithProgress.ProgressChangedEventArgs e)
{
    if (e.Length != 0)
        progressBar1.Value = (int)(e.BytesRead * 100 / e.Length);
} 
```

我收到错误消息：“跨线程操作无效：控件'progressBar1'从创建它的线程以外的线程访问。” 在行中：

```
progressBar1.Value = (int)(e.BytesRead * 100 / e.Length); 
```

也许我做错了。我是 .Net 任务库的新手。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:43:30.450

我建议阅读我的[`async`/ `await`intro](http://blog.stephencleary.com/2012/02/async-and-await.html)。编程的准则之一`async`是避免`async void`; 也就是说，除非您正在编写事件处理程序，否则请使用`async Task`而不是。`async void`

此外，一旦您开始使用`async`，请尝试在任何地方使用它。它确实简化了代码。

因此，您的代码可以像这样更改（假设`StreamWithProgress`使用[EAP](http://msdn.microsoft.com/en-us/library/ms228969.aspx)约定）：

```
private async void UploadButton_Click(object sender, EventArgs e)
{
  UploadButton.Enabled = false;
  Cursor = Cursors.WaitCursor;
  try
  {
    // get some info about the input file
    System.IO.FileInfo fileInfo = new System.IO.FileInfo(FileTextBox.Text);
    var task = UploadDocument(fileInfo);

    // show start message
    LogText("Starting uploading " + fileInfo.Name);
    LogText("Size : " + fileInfo.Length);

    await task;

    LogText("Done!");
  }
  catch (Exception ex)
  {
    LogText("Exception : " + ex.Message);
    if (ex.InnerException != null) LogText("Inner Exception : " + ex.InnerException.Message);
  }
  finally
  {
    Cursor = Cursors.Default;
    UploadButton.Enabled = true;
  }
}

private async Task UploadDocument(System.IO.FileInfo fileInfo)
{
  // open input stream
  using (System.IO.FileStream stream = new System.IO.FileStream(FileTextBox.Text, System.IO.FileMode.Open, System.IO.FileAccess.Read, FileShare.Read, 4096, true))
  { 
    using (StreamWithProgress uploadStreamWithProgress = new StreamWithProgress(stream))
    {
      uploadStreamWithProgress.ProgressChanged += uploadStreamWithProgress_ProgressChanged;

      // start service client
      FileTransferWCF.FileTransferServiceClient client = new FileTransferWCF.FileTransferServiceClient();

      // upload file
      await client.UploadFileAsync(fileInfo.Name, fileInfo.Length, uploadStreamWithProgress);

      // close service client
      client.Close();
    }
  }
}

void uploadStreamWithProgress_ProgressChanged(object sender, StreamWithProgress.ProgressChangedEventArgs e)
{
  if (e.Length != 0)
    progressBar1.Value = (int)(e.BytesRead * 100 / e.Length);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:30:13.957

您需要在 UI 线程上进行 UI 更新。

```
progressBar1.Invoke(new Action(() => 
    { progressBar1.Value = (int)(e.BytesRead * 100 / e.Length); })); 
```

或者（如果您不想在方法返回之前阻止）

```
progressBar1.BeginInvoke(new Action(() => 
    { progressBar1.Value = (int)(e.BytesRead * 100 / e.Length); })); 
```

为语法道歉，我目前无法访问 VS。

# powershell - 通过 Visual Studio Installer (C#) 和 PowerShell 安装 Windows 应用商店应用程序

> ID：15071588
> 
> 赞同：3
> 
> 时间：2013-02-25T16:26:45.853
> 
> 标签：powershell, windows-8, windows-store-apps

我想使用易于使用的**msi Installer安装****Windows Store App**。我正在使用**Visual Studio 安装程序**来创建 msi 包。Windows 应用商店应用程序可以在没有应用商店的情况下仅通过**PowerShell**安装。

 ******工作：安装程序成功完成。“AllowAllTrustedApps”所需的更改和证书的安装正在运行。

不工作：在 PowerShell 中通过 C# 代码安装 appx 包没有任何作用

通过 PowerShell 安装证书有效：

```
using (RunspaceInvoke invoker = new RunspaceInvoke())
            {
                invoker.Invoke("certutil.exe -addstore -f \"TrustedPeople\" \"C:\\Program Files\\App_1.0.0.0_x64.cer\"");
            } 
```

安装 appx 不起作用：

```
using (RunspaceInvoke invoker = new RunspaceInvoke())
            {
                invoker.Invoke("Add-AppxPackage -Path \"C:\\Program Files\\App_1.0.0.0_x64.appx\"}");
            } 
```

还尝试了 .ps1 文件。我的想法是代码无法处理在 PowerShell 中安装应用程序并杀死它时出现的进度条。所以我想启动一个新的 PowerShell 窗口：

```
using (RunspaceInvoke invoker = new RunspaceInvoke())
            {
                invoker.Invoke("cmd \c start powershell -Command {Add-AppxPackage -Path \"C:\\Program Files\\App_1.0.0.0_x64.appx\"}");
            } 
```

但这会产生一个我无法真正阅读的异常，因为它会非常快地关闭窗口。异常包含以下内容：

> 添加包被拒绝，因为该进程使用本地系统帐户。

但它以管理员权限运行！直接使用 PowerShell 安装所有东西都可以。所以每个命令都应该是正确的。有什么想法有什么问题吗？不知道再用谷歌搜索什么了...在此先感谢

问候， 塞巴斯蒂安·纽尔******

# google-places-api - 将 Google 地方信息自动填充功能限制为仅返回地址

> ID：15071589
> 
> 赞同：28
> 
> 时间：2013-02-25T16:26:47.633
> 
> 标签：google-places-api

```
autocomplete = new google.maps.places.Autocomplete(input, { types: ['geocode'] }); 
```

返回街道和城市以及其他更大的区域。是否可以仅限制在街道上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-12-08T19:58:22.670

这个问题很老，但我想我会添加它以防其他人遇到这个问题。不幸的是，将类型限制为“地址”并没有达到预期的结果，因为仍然包括路线。因此，我决定做的是遍历结果并执行以下检查：

`result.predictions[i].types.includes('street_address')`

不幸的是，我很惊讶我自己的地址没有被包括在内，因为它返回以下类型：`{ types: ['geocode', 'premise'] }`

因此，我决定启动一个计数器，任何在其类型中包含“地理编码”或“路线”的结果都必须包含至少一个要包含的其他术语（无论是“街道地址”还是“前提”或其他任何内容。因此，路由被排除，任何有完整地址的东西都会被包括进来。它不是万无一失的，但它工作得相当好。

循环遍历结果预测，并执行以下操作：

```
if (result.predictions[i].types.includes('street_address')) {
    // Results that include 'street_address' should be included
    suggestions.push(result.predictions[i])
} else {
    // Results that don't include 'street_address' will go through the check
    var typeCounter = 0;
    if (result.predictions[i].types.includes('geocode')) {
        typeCounter++;
    }
    if (result.predictions[i].types.includes('route')) {
        typeCounter++;
    }
    if (result.predictions[i].types.length > typeCounter) {
        suggestions.push(result.predictions[i])
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T23:41:58.997

我想你想要的是`{ types: ['address'] }`。

您可以通过此实时示例看到这一点：[https](https://developers.google.com/maps/documentation/javascript/examples/places-autocomplete) ://developers.google.com/maps/documentation/javascript/examples/places-autocomplete （使用“地址”单选按钮）。

# php - 在 Facebook 上的照片消息中发送页面链接

> ID：15071596
> 
> 赞同：1
> 
> 时间：2013-02-25T16:27:16.040
> 
> 标签：php, facebook, sdk

需要帮助才能将指向我页面的链接放在我发送的图像上。

比我能做的任何方式都多。

```
$photo = $facebook->api('/386987198043365/photos', 'POST',
    array(
        'source' => '@' . realpath('photos/601634_542276699138472_444978009_n.jpg'),
        'message' => 'Like this › @[305610509557745:0]'
    )
); 
```

图像发送，消息看起来越像问题。

“喜欢这个 ›”，并且不显示页面的链接。有人可以帮帮我吗！

# ruby - 如何测量 eval "def ..." 和 define_method 的性能

> ID：15071599
> 
> 赞同：3
> 
> 时间：2013-02-25T16:27:23.817
> 
> 标签：ruby, metaprogramming, eval

在 RubyMonk 中进行练习时（付费墙后面的链接，因此未提供），为了衡量定义方法的性能，`eval`提供`define_method`了以下代码：

```
require 'benchmark'

class Monk
  eval "def zen; end"

  define_method(:zen_block) {}
end

monk = Monk.new

Benchmark.bmbm do |x|
  x.report("eval zen: ") { 1_000_000.times { monk.zen } }
  x.report("define_method zen: ") { 1_000_000.times { monk.zen_block } }
end 
```

作为 Ruby 的新手，我的问题是：方法`zen`和`zen_block`解释器何时实际“编译”（不确定它是否是正确的词）？似乎不太可能在每次调用时都重新定义`zen`和。`zen_block`从我目前所了解的情况来看，在我看来，衡量性能，正确的方法是：

```
require 'benchmark'

class Monk
  def with_eval
    eval "def zen; end"
  end

  def with_define_method
    self.class.send(:define_method,:zen_block) {}
  end
end

Benchmark.bmbm do |x|
  x.report("eval zen: ") { 1_000_000.times { monk.with_eval } }
  x.report("define_method zen: ") { 1_000_000.times { monk.with_define_method } }
end 
```

* * *

第一个块在我的机器中产生这些结果（我已将迭代次数提高到 100 万次以使时间更加稳健）：

```
Rehearsal -------------------------------------------------------
eval zen:             0.070000   0.000000   0.070000 (  0.074196)
define_method zen:    0.120000   0.000000   0.120000 (  0.118621)
---------------------------------------------- total: 0.190000sec 
```

第二个区块的结果（我的建议）：

```
Rehearsal -------------------------------------------------------
eval zen:             7.740000   0.000000   7.740000 (  7.743741)
define_method zen:    1.620000   0.000000   1.620000 (  1.617666)
---------------------------------------------- total: 9.360000sec 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:33:15.940

您从 RubyMonk 中展示的基准测试并没有衡量使用or*定义*方法的速度。它正在测量*调用结果方法*的速度。这就是为什么它读取它的方式。`eval``define_method`

 *由于在您了解更多关于 Ruby 解释器的实现之前对您来说可能并不明显的原因，通过`eval`或定义的方法的速度`define_method`通常是不一样的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T18:42:34.697

感谢您向我们指出这一点。

您是对的，该主题应该措辞如下：“比较由 eval 创建的动态方法与由 define_method 创建的方法的性能”。

我们将在今天晚些时候修复我们内容中的这个错误。

尽管定义方法的性能增量是一个重要的考虑因素，但我们从未看到它具有多大的实际意义（至少在 ruby​​ 中），尤其是因为 AST 将被缓存。

光辉

RubyMonk 团队*

# php - 我可以在变化的值上设置断点吗？

> ID：15071601
> 
> 赞同：5
> 
> 时间：2013-02-25T16:27:38.047
> 
> 标签：php, xdebug, phpstorm

我只想在变量中的值更改为特定值时暂停执行。我正在使用 PHPStorm 和 Xdebug。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T16:34:43.580

放置一个断点，然后右键单击它（在红色项目符号上）。选择编辑，您可以输入条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:36:50.757

右击后安装断点。在出现的窗口中，输入要停止调试器的条件。使用 zend 调试器就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-17T19:04:57.557

顺便说一句，它似乎并不总是按预期工作。

“停止但条件不正确......嗯。奇怪在相同的条件下，其他制动点按预期工作。” [http://youtrack.jetbrains.com/issue/WI-21071](http://youtrack.jetbrains.com/issue/WI-21071)

# database - Carrierwave 未在数据库中保存缩略图

> ID：15071603
> 
> 赞同：1
> 
> 时间：2013-02-25T16:27:42.743
> 
> 标签：database, ruby-on-rails-3, image, carrierwave

如果我上传图像，则会创建原始版本和拇指版本，但拇指版本未保存在数据库中。

```
class Image < ActiveRecord::Base
  mount_uploader :image, ImageUploader
end

# encoding: utf-8

class ImageUploader < CarrierWave::Uploader::Base
  # Create different versions of your uploaded files:
   version :thumb do
     process :resize_to_limit => [50, 50]
   end   
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:50:52.463

它不会将其保存在数据库中。相反，您会在上传目录中看到一个新的缩略图版本。您可以在调用图像字段时通过引用该版本来调用该版本。

IE

`<%= image_tag @image.image(:thumb).url %>`

# android - 媒体记录器不工作

> ID：15071604
> 
> 赞同：1
> 
> 时间：2013-02-25T16:27:49.640
> 
> 标签：android

```
 OnClickListener startRecord = new OnClickListener() {
      public void onClick(View v) {

      String audiodir = new String(Environment.getExternalStorageDirectory() + File.separator +   "Test" + File.separator);

         while (stop_rec == false){

                SimpleDateFormat formatter = new SimpleDateFormat("yyyy_MM_dd_HH_mm_ss");
                Date now = new Date();
                String fileName = formatter.format(now) + ".raw";

                String audiopath = new String(audiodir + fileName);

                MediaRecorder recorder = new MediaRecorder();
                recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
                recorder.setOutputFormat(MediaRecorder.OutputFormat.RAW_AMR);

                recorder.setOutputFile(audiopath);
                try {
                  recorder.prepare();
                } catch (Exception e){
                    e.printStackTrace();
                }

                 recorder.start();   // Recording is now started

                 new RecordActivity().execute(); //waiting

                 recorder.stop();
                 recorder.reset();   
                 recorder.release(); 
            }
            stop_rec = false;
        }
    };

    //@Override
    OnClickListener stopRecord = new OnClickListener() {
        public void onClick(View v) {
            stop_rec = true; //for stop recording
        }
    };` 
```

嗨，我的问题在 recorder.setAudioSource(MediaRecorder.AudioSource.MIC) 的行上，它会生成一些 RuntimeException。

更多细节我看不到，因为还有另一个错误：“类文件编辑器，找不到源：源附件不包含文件 InvocationTargetException.class 的源......”

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:32:50.230

有没有加

```
<uses-permission android:name="android.permission.RECORD_AUDIO"/> 
```

在清单中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:32:57.823

不要忘记设置录制音频的权限

`<uses-permission android:name="android.permission.RECORD_AUDIO"></uses-permission>`

# c# - 列表框单击并拖动

> ID：15071605
> 
> 赞同：1
> 
> 时间：2013-02-25T16:27:54.170
> 
> 标签：c#, .net, wpf, drag-and-drop, listbox

我有一个列表框一个 MainControl 和 4 个 PreviewControls。我希望当我从列表框中单击 mainControl 更改的项目时（发生这种情况）。但我想向 listboxitems 添加一个拖动行为，以便我可以将一个 listboxitem 拖动到其中一个 previewControls。我试过了，但是当我尝试拖动 listboxitem 时，总是会触发 selectionchanged 事件。

所以我希望当我执行 MouseLeftDown 并移动列表框项时，请拖动。当 Click 或 MouseLefUp (selectionchanged) 发生时 MainControl 发生变化。

我试过了，但 PreviewMouseLeftButtonDown 事件再次没有执行其他事件。

```
private void lstCameras_PreviewMouseLeftButtonDown_1(object sender, MouseButtonEventArgs e)
    {
        startPoint = e.GetPosition(null);
        if (!Test) e.Handled = true;
        else
        {
            Test = false;
        }
        Console.WriteLine("lstCameras_PreviewMouseLeftButtonDown_1 Handled = " + e.Handled);
    }

    private void lstCameras_PreviewMouseUp_1(object sender, MouseButtonEventArgs e)
    {
        Console.WriteLine("lstCameras_MouseUp_1");
        if (!Test)
        {
            Test = true;
    lstCameras.RaiseEvent(new MouseButtonEventArgs(Mouse.PrimaryDevice, Environment.TickCount, MouseButton.Left) { RoutedEvent = ListBox.PreviewMouseLeftButtonDownEvent });
        }
        else
        {
            Test = false;
        }
        Console.WriteLine("end lstCameras_MouseUp_1 Test = " + Test);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:43:22.840

不知道这是否是最好的方法，但它有效。

```
private object GetDataFromListBox(ListBox source, Point point)
    {
        DependencyObject element = source.InputHitTest(point) as DependencyObject;
        if (element != null)
        {
            object data = DependencyProperty.UnsetValue;
            while (data == DependencyProperty.UnsetValue)
            {
                data = source.ItemContainerGenerator.ItemFromContainer(element);
                if (data == DependencyProperty.UnsetValue)
                {
                    element = (DependencyObject)VisualTreeHelper.GetParent(element);
                }
                if (element == source)
                {
                    return null;
                }
            }
            if (data != DependencyProperty.UnsetValue)
            {
                return data;
            }
        }
        return null;
    }
    private void lstCameras_PreviewMouseMove_1(object sender, MouseEventArgs e)
    {
        Point mousePos = e.GetPosition(null);
        Vector diff = startPoint - mousePos;

        if (e.LeftButton == MouseButtonState.Pressed && this.DataContext != null &&
            (Math.Abs(diff.X) > SystemParameters.MinimumHorizontalDragDistance ||
            Math.Abs(diff.Y) > SystemParameters.MinimumVerticalDragDistance))
        {
            ListBox parent = (ListBox)sender;
            Item data = (Item)GetDataFromListBox(parent, e.GetPosition(parent));

            if (data != null)
            {
                DataObject dragData = new DataObject(typeof(Item), data);
                DragDrop.DoDragDrop(this, dragData, DragDropEffects.All);
            }
        }
    }

    private void lstCameras_PreviewMouseDown_1(object sender, MouseButtonEventArgs e)
    {
        ListBox parent = (ListBox)sender;
        Item data = (Item)GetDataFromListBox(parent, e.GetPosition(parent));

        if (data != null )
        {
            startPoint = e.GetPosition(null);
            e.Handled = true;
        }
    }

    private void lstCameras_PreviewMouseUp_1(object sender, MouseButtonEventArgs e)
    {
        ListBox parent = (ListBox)sender;
        Item data = (Item)GetDataFromListBox(parent, e.GetPosition(parent));

        if (data != null)
        {
            lstCameras.SelectedItem = data;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:29:53.270

将链接到 UserControl 的事件更改为 mouseup 而不是单击。这样，只有完全单击才会触发更改用户控件的代码，并且拖动将不受阻碍地进行。[这](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.mouseup%28v=vs.71%29.aspx)是关于 MouseUp 事件的 MSDN 链接：)

# c# - 样式与文件位置捆绑

> ID：15071611
> 
> 赞同：1
> 
> 时间：2013-02-25T16:28:09.370
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, bundle

我想在我的代码中捆绑三个 css 文件。其中之一是用于我的网络字体，我使用“url”作为它。但是当我运行应用程序浏览器时找不到文件。

这是我的 css 文件：

```
@font-face {
    font-family: 'neuropol';
    src: url('../Files/Font/neuropol_x_free-webfont.eot');
    src: url('../Files/Font/neuropol_x_free-webfont.eot?#iefix') format('embedded-opentype'),
         url('../Files/Font/neuropol_x_free-webfont.woff') format('woff'),
         url('../Files/Font/neuropol_x_free-webfont.ttf') format('truetype'),
         url('../Files/Font/neuropol_x_free-webfont.svg#neuropol_x_freeregular') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

这是我的捆绑代码：

```
bundles.Add(new StyleBundle("~/bundles/styles/base").Include("~/Content/Styles/style.css", "~/Content/Styles/normalize.css", "~/Content/Styles/webfont.css")); 
```

有人可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:32:09.303

当 CSS 定义中有 src URL 时，浏览器将检查相对于它下载 CSS 文件的位置的路径。在这种情况下，这意味着它正在寻找 src 文件 `~/bundles/Files/Font/...`而不是`~/Content/Files/Font/...`.

尝试使您的捆绑包名称与相对位置匹配。

```
bundles.Add(new StyleBundle("~/Content/Styles/base-bundle.css").Include("~/Content/Styles/style.css", "~/Content/Styles/normalize.css", "~/Content/Styles/webfont.css")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T14:36:20.117

看看[这个链接](http://ericpanorel.net/2013/10/25/font-awesome-4-0-mvc-bundling-and-minification/)

基本上，您可以添加一个转换，将您的 css 文件中的 url 转换为有效的 url。

您可以通过将 Bundles 配置更改为此：

```
bundles.Add(
new StyleBundle("~/Content/Styles/base-bundle.css")
.Include("~/Content/Styles/style.css", new CssRewriteUrlTransform())
.Include("~/Content/Styles/normalize.css", new CssRewriteUrlTransform())
.Include("~/Content/Styles/webfont.css", new CssRewriteUrlTransform())
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:12:29.463

您可以像这样将其更改为 App_Start>BundleConfig.cs

```
 bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
                            "~/Content/themes/base/jquery.ui.core.css",
                            "~/Content/themes/base/jquery.ui.resizable.css",
                            "~/Content/themes/base/jquery.ui.selectable.css",
                            "~/Content/themes/base/jquery.ui.accordion.css",
                            "~/Content/themes/base/jquery.ui.autocomplete.css",
                            "~/Content/themes/base/jquery.ui.button.css",
                            "~/Content/themes/base/jquery.ui.dialog.css",
                            "~/Content/themes/base/jquery.ui.slider.css",
                            "~/Content/themes/base/jquery.ui.tabs.css",
                            "~/Content/themes/base/jquery.ui.datepicker.css",
                            "~/Content/themes/base/jquery.ui.progressbar.css",
                            "~/Content/themes/base/jquery.ui.theme.css")); 
```

并将其加载到您的布局页面中，就像在 head 部分中一样。

```
@Styles.Render("~/Content/themes/base/css") 
```

# javascript - Angular $watch 仅通过 onclick 触发一次

> ID：15071615
> 
> 赞同：3
> 
> 时间：2013-02-25T16:28:37.810
> 
> 标签：javascript, ajax, dialog, angularjs, watch

我在一个包含 ajax 调用的角度服务中有一个函数，它执行以下操作：

```
function performCall($scope){
   $scope.dataFail = false;

   var promise = doAjaxCall();
   promise.then(function(data){
      if(data.rootElement){
         //process...
      }else{
         $scope.dataFail=true;
      }
   }
} 
```

我的控制器中的 $watch 表达式正在监视 dataFail 并显示一个对话框，其中包含在确认对话框时调用 performCall 的选项：

```
$scope.$watch('dataFail', function(dataFail){
    if(dataFail){
        //open dialog
        $( "#ajaxFailurePopup" ).dialog({
            zIndex: 3003,
            title: "Note:",
            modal:true, // Disable controls on parent page
            buttons: {
                Ok: {
                    text: 'Retry >',
                    "class" : 'ppButton floatRight',
                    click:
                      function() {
                                             service.performCall($scope);
                         $("#ajaxFailurePopup").remove();
                       }
                    }
                }
            });
        };
    }); 
```

当 ajax 调用第一次失败时，这在初始化时效果很好。但是，在此之后，对 的任何更改都不会`dataFail`被`$watch`. 有人有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T10:44:23.390

通过在 $scope.apply 中包装对 performCall 的调用来解决：

```
$scope.apply(
   service.performCall($scope);
) 
```

在 performCall 方法中设置了 dataFail 标志。道歉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:20:27.503

您的代码有几个问题：

1.  在 Angular 中，$watch 表达式回调函数只有在表达式改变了值时才会被调用。由于您永远不会重置“dataFail”标志，因此在后续调用中永远不会调用表达式。您应该在 $watch 表达式中将标志变量设置为 false。

2.  在对话框中，您正在调用 $("#ajaxFailurePopup").remove(); 这会从 DOM 中删除 #ajaxFailurePopup 元素，因此对话框无法再次初始化。你应该使用 $('#ajaxFailurePopup').dialog('destroy');

工作 plnkr：[http ://embed.plnkr.co/wcooiJ](http://embed.plnkr.co/wcooiJ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:16:40.817

既然您说手表会在第一个失败的请求时触发，但不会在后续失败的请求中触发，您是否可能不会`$scope.dataFail`为成功的请求重置为 false？如果`$scope.dataFail`仅在初始化期间设置为 false，则该值永远不会改变，您的手表也不会被调用。如果它已经为真，则设置`$scope.dataFail`为真不会触发手表，因为 Angular 无法判断它已更改。

# mysql - 共享主机上的 CPanel SQL“超级”用户

> ID：15071618
> 
> 赞同：0
> 
> 时间：2013-02-25T16:28:48.150
> 
> 标签：mysql, sql, phpmyadmin, hosting, cpanel

我有一个共享主机帐户，我需要一个可以访问我创建的所有数据库的 SQL 用户。我的网站为每个新注册用户创建一个新的 SQL 数据库，现在我的网站无法访问新数据库，因为现在我只能授予 CPanel 权限，有没有办法解决这个问题？如果不是，我应该向我的托管服务提供商询问什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T11:23:58.890

如果您已经使用“数据库向导”从 Cpanel 创建了数据库，并且还创建了用户并授予所有权限，那么您可以在代码中输入正确的信息来访问该数据库。就像您网站代码中的数据库名称、数据库用户和密码一样。

# session - 会话数据何时发送到服务器

> ID：15071619
> 
> 赞同：0
> 
> 时间：2013-02-25T16:28:49.393
> 
> 标签：session, jakarta-ee, servlets

```
HttpSession session=requestObj.getSession();
ArrayList<String> items=(ArrayList<String>)session.getAttribute("itemlist");
items.add(newitem); 
```

在这段代码中，为什么我不需要设置属性

> setAttribute("itemlist",items)

回到会话对象，即使我更新了此会话中的数据。据我所知，会话数据存储在服务器中。那么，这些数据是什么时候发送到服务器的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:15:45.993

您不必这样做 ----setAttribute("itemlist",items)---因为您有对存储在 items 中的 itemlist 的引用。

```
ArrayList<String> items=(ArrayList<String>)session.getAttribute("itemlist"); 
```

因此，您对“项目”所做的任何更改都将在“项目列表”属性中可见。

当您提交表单时，数据会发送到服务器。可以通过单击提交按钮来提交表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:40:12.567

你的代码是 Java 的，所以我猜它已经在服务器上运行了？

如果您只有一个服务器进程，那么您将直接修改对已存储在服务器会话中的列表的相同内存引用，因此您将自动看到更改。

但是，您实际上应该`setAttribute`在修改状态时调用。如果您在集群中运行，或者像 Google App Engine 这样的云环境可能正在运行您的应用程序的多个副本，则此调用将用于将更改传播到其他进程。

# sql-server - where 子句中的可选条件语句

> ID：15071620
> 
> 赞同：0
> 
> 时间：2013-02-25T16:28:50.357
> 
> 标签：sql-server, where-clause, conditional-statements

如果@UserRoleId = 4，我需要在 WHERE 子句中添加一个条件，该条件将在搜索中包含项目，否则将它们从搜索中排除（SQL Server）。

```
INSERT INTO @partData
(
  PartPrefix,
  PartNumber,
  MyProDescription,
  ItemNumber,
  PartType,
  Side,
  VehicleLocation,
  MyProPrice
)
SELECT
  CASE
    WHEN LEFT(myParts.MyProDescription, 4) = 'FOIL' THEN 'FOIL'
    ELSE LEFT(myParts.PartNumber, 3)
  END,
  PartNumber,
  MyProDescription,
  ItemNumber,
  PartType,
  Side,
  VehicleLocation,
  MyProPrice  
FROM 
  MyProExport myParts
WHERE
  @year BETWEEN myParts.YearFrom AND myParts.YearTo AND
  myParts.CarMake = @make AND 
  REPLACE(myParts.CarModel, ' ', '') = REPLACE(@model, ' ', '') AND
  (
    myParts.EngineDisplacement = @engine OR 
    myParts.EngineDisplacement = 'ALL'
  ) AND
  LEFT(myParts.PartNumber, 3) NOT IN ('300','400') -- Exclude these parts if not @UserRoleId = 4 
```

只有当@UserRoleId = 4 时，最后一条语句才需要修改为显示 300 和 400。否则只显示 300。我对如何设置感到困惑。我试过了：

```
CASE
  WHEN @UserRoleId = 4 THEN LEFT(myParts.Number, 3) NOT IN ('300','400') -- Exclude parts 
```

没有运气...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:45:07.133

而不是 case 语句，只需使用 AND/OR 逻辑。

```
AND (LEFT(myParts.HollanderNumber, 3) = '300'
OR (@UserRoleID = 4 AND LEFT(myParts.HollanderNumber, 3) = '400')) 
```

这将始终显示 300，并且仅显示 400，如果`@UserRoleID = 4`

# java - 如何在 Java 中访问 c lojure 函数？

> ID：15071622
> 
> 赞同：1
> 
> 时间：2013-02-25T16:28:53.183
> 
> 标签：java, clojure

我是 Clojure 的新手。我正在尝试在 Clojure 中构建我的计算单元（纯函数）并将所有这些函数绑定到使用 Java 的程序中。

为了在 Java 中访问 Clojure，我做了一件事，即提前编译和类生成。但它看起来很麻烦，并且削弱了在我的应用程序中使用 Clojure 的想法。所以我的问题是有没有人试图访问 Java 中的 Clojure 函数（不包括类生成和 AOT 编译）？如果没有，那么如何使用纯 Clojure 将这些计算单元（或 Clojure 函数）链接到一个程序（其中有几个相互链接的方法）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:27:44.350

作为概述[，一般过程](http://blog.jayfields.com/2011/12/clojure-java-interop.html)是：

*   包括 clojure 运行时：
    `import clojure.lang.RT;`
*   使用运行时加载您的命名空间（将编译它）：
    `RT.loadResourceScript("path/core.clj");`
*   获取要调用的函数的 iFn 对象：
    `RT.var("mynamespace.core", "main")`
*   并调用该`invoke`对象的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:04:02.477

看看我的[clojure-utils](https://github.com/mikera/clojure-utils)库。这里有很多方便的工具用于从 Java 调用 Clojure 代码。

这是一个简单的演示：

```
import mikera.cljutils.Clojure;

public class DemoApp {
    public static void main(String [] args) {
        String s = "(+ 1 2)";
        System.out.println("Evaluating Clojure code: "+s);

        Object result=Clojure.eval(s);
        System.out.println("=> "+ result);
    }
} 
```

我更喜欢避免 AOT 编译：而是使用实用程序`mikera.cljutils.Clojure`在运行时动态加载、编译和执行 Clojure 代码。

# linux - gdb/ddd 程序收到信号 SIGILL

> ID：15071625
> 
> 赞同：10
> 
> 时间：2013-02-25T16:29:07.917
> 
> 标签：linux, gdb, libcurl, raspberry-pi, ddd-debugger

我使用 c++ 在 Linux 中编写了一个非常简单的程序，它使用 cURL 库通过 http（基本上开发了一个 http 客户端请求）从某个网站下载图像。[http://curl.haxx.se/libcurl/c/allfuncs.html](http://curl.haxx.se/libcurl/c/allfuncs.html)

```
#define CURL_STATICLIB
#include <stdio.h>
#include <stdlib.h>
#include </usr/include/curl/curl.h>
#include </usr/include/curl/stdcheaders.h>
#include </usr/include/curl/easy.h>

size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) {
    size_t written = fwrite(ptr, size, nmemb, stream);
    return written;
}

int main(void) {
    CURL *curl;
    FILE *fp;
    CURLcode res;

    char *url = "http://www.example.com/test_img.png"; 
    char outfilename[FILENAME_MAX] = "/home/c++_proj/output/web_req_img.png";
    curl = curl_easy_init();
    if (curl) {
        fp = fopen(outfilename,"wb");
        curl_easy_setopt(curl, CURLOPT_URL, url);
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp);
        res = curl_easy_perform(curl);
        /* always cleanup */
        curl_easy_cleanup(curl);
        fclose(fp);
    }
    return 0;
} 
```

我验证了代码，它工作正常。我可以看到图像已下载并且我可以查看图像（没有错误或警告）。因为我打算扩展我的代码，所以我尝试安装 ddd，并使用调试器，但是当我尝试使用 ddd 运行我的程序时，调试器不起作用，并且我的程序以某种信号错误退出。

这是错误：

```
 (Threadd debugging using libthread_db enabled)
 Using host libthread_db library "/lib/arm-linux-gnueadihf/libthread_db.so.1"

 Program received signal SIGILL, illegal instruction.
 0xb6a5c4C0 in ?? () from /usr/lib/arm-linux-gnueadbihf/libcrypto.so.1.0.0 
```

首先我认为我没有正确安装 ddd，所以我回到 gdb，但是当我运行程序时，我得到了完全相同的错误。（而且我相信我使用的是最新版本的 gdb 和 ddd）

然后我尝试在另一个不涉及 cURL 库的简单程序上使用 ddd，它运行良好！！！

有谁知道为什么会这样，解决方案是什么？在 ddd 运行时，我是否需要以某种方式指向 cURL 库？但是，在过去，我不记得用不同的库做这个！也许这是 ddd 不喜欢的 cURL ？但是程序在没有调试器的情况下运行良好！我会很感激一些帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-28T03:11:30.650

我猜它可能是某些指令集检测代码的一部分。只需让程序继续，看看它是否自己处理信号（因为它在 之外运行`gdb`，它可能会）。或者，您可以`gdb`在运行程序之前告诉您不要使用 SIGILL 来打扰您：`handle SIGILL pass nostop noprint`.

如果程序死了，这只是一个问题，这在你的问题中并不清楚。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-12T17:41:28.060

> ```
>  Program received signal SIGILL, illegal instruction.
>  0xb6a5c4C0 in ?? () from /usr/lib/arm-linux-gnueadbihf/libcrypto.so.1.0.0 
> ```
> 
> 有谁知道为什么会这样，解决方案是什么？

小丑给了你解决方案。这就是它发生的原因。

`libcrypto.so`是 OpenSSL 的加密库。OpenSSL 通过执行指令来执行 cpu 功能探测，以查看其是否可用。如果`SIGILL`生成了 a，则该功能*不可*用，而是使用适当的功能。

您在 ARM 而不是 IA-32 上看到它们的原因是，在 Intel 的 IA-32 上，`cpuid`指令是非特权的。任何程序都可以执行`cpuid`以检测 cpu 功能，因此不需要`SIGILL`基于 - 的功能程序。

与 IA-32 相比，ARM 的等效`cpuid`指令是特权指令。您的程序需要异常级别 1 (EL-1)，但您的程序运行在 EL-0。为了避开对 ARM 程序权限的需要，设置一个`jmpbuf`并安装一个`SIGILL`处理程序。然后他们尝试有问题​​的指令，`SIGILL`处理程序指示指令或功能是否可用。

`SIGILL`OpenSSL 最近在某些 Apple 平台上更改为-free 功能检测，因为 Apple 会破坏事物。另请参阅[PR 3108，MacOS X 上的无 SIGILL 处理器功能检测](https://github.com/openssl/openssl/pull/3108/files)。其他图书馆也在做类似的事情。另请参阅[如何在运行时确定 ARMv8 功能？](https://stackoverflow.com/q/45637888/608639)

OpenSSL 还在`SIGILL`其常见问题解答中记录了该行为。有关详细信息，请参阅 OpenSSL 常见问题解答中的第 17 项：[调试时我在 OpenSSL 初始化期间观察到 SIGILL：为什么？](https://www.openssl.org/support/faq.html#PROG17)另请参阅在堆栈溢出[的 gdb 下运行时 SSL_library_init 导致 SIGILL 。](https://stackoverflow.com/q/25708907/608639)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-18T09:32:30.037

`SIGILL`对于 Android 开发人员，您可以在 Android Studio 中禁用： [https ://developer.oculus.com/documentation/native/android/mobile-studio-debug/#troubleshooting](https://developer.oculus.com/documentation/native/android/mobile-studio-debug/#troubleshooting)

# html - 全宽网页和屏幕阅读器

> ID：15071626
> 
> 赞同：1
> 
> 时间：2013-02-25T16:29:12.720
> 
> 标签：html, accessibility, screen-readers

我在一个接受政府资助的办公室工作，因此我们的网站需要易于访问。我们正在为重大网站重新设计集思广益。我们有点喜欢全幅创意，但一位员工说它们会导致屏幕阅读器出现问题。有没有人有这方面的经验？如果有任何网站可以验证此信息，您可以分享链接吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T21:17:33.340

正如评论中所说，全角或固定宽度对屏幕阅读器的影响几乎为零。全宽页面唯一要做的就是使内容在视觉上更长（因为它有更多的水平扩展空间）。从屏幕阅读器的角度来看，宽度并不重要。它只是在阅读文本，就好像它在一条长线上一样（显然将其分解为段落和标题，这样会改变阅读方式）。

话虽如此，全角实际上会损害可访问性 b/c[长的水平文本行难以阅读](http://baymard.com/blog/line-length-readability)。可访问性很复杂，需要考虑很多不同的方面。

# r - R如何在这里传递参数？

> ID：15071627
> 
> 赞同：0
> 
> 时间：2013-02-25T16:29:13.263
> 
> 标签：r, function, arguments

我不是一个 OOP 的人，所以有人可以用外行的方式解释这个简单的概念。

当我从 foo.parent 函数调用 foo.child 时，它似乎将 A=7 参数向下传递到 foo.child 对象中，并按照我的预期覆盖或优先于 foo.child 中的 A=3 默认参数。

```
foo.parent <- function(A=7) foo.child(A)
foo.child <- function(A=3) 2+A
foo.parent(A=7)
#[1] 9 
```

但是当我在 foo.parent 中实例化它时，参数 A=7 会向下传递或强制实例化对象使用 A=7; 相反，它使用子对象的参数 A=3

```
foo.child<-function(A=3) 2+A
foo.parent <- function(A=7){
  foo.child(A=3)
}
foo.parent(A=7)
#[1] 5 
```

为什么会这样？我会用什么术语来描述这些差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:35:57.633

在您的第二个示例中，您没有赋予价值`A`（至少不是您可能认为的那样）。尝试

```
foo.child<-function(A=3) 2+A
foo.parent<-function(A=7){
     foo.child(A=A)
}
foo.parent(A=7)
foo.parent() 
```

反而。所以，你在这里混合了两个不同`A`的 s。调用中的`=`符号`function`定义了如果您没有在函数调用中为该变量指定值会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:37:31.207

我认为您的问题是您不太了解默认参数的工作原理。所以

```
foo.child = function(A=1) 2+A 
```

定义`foo.child`具有默认参数的函数`A=1`。所以，

```
foo.child() 
```

给出 3\. 现在在这个函数中

```
foo.parent = function(A=3){
   foo.child(A=4)
} 
```

您**总是**将值传递`A=4`给函数`foo.child`，因此，

```
foo.parent(A=7)
# 6 
```

此外，当您试图弄清楚发生了什么时，具有不同的值会有所帮助`A`

# ios - UIButton addTarget 不起作用

> ID：15071628
> 
> 赞同：4
> 
> 时间：2013-02-25T16:29:14.557
> 
> 标签：ios, uibutton

视图控制器：

```
@implementation PaiLifeViewController
@synthesize detail = _detail;
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UIImage *i = [UIImage imageNamed:@"menu_patcode_normal"];
    UIButton *c1 = [[UIButton alloc] init];
    c1.tag = 11;
    UIButton *c2 = [[UIButton alloc] init];
    c2.tag = 12;
    UIButton *c3 = [[UIButton alloc] init];
    c3.tag = 13;
    UIButton *c4 = [[UIButton alloc] init];
    c4.tag = 21;
    UIButton *c5 = [[UIButton alloc] init];
    c5.tag = 22;
    UIButton *c6 = [[UIButton alloc] init];
    c6.tag = 23;
    UIButton *c7 = [[UIButton alloc] init];
    c7.tag = 31;
    UIButton *c8 = [[UIButton alloc] init];
    c8.tag = 32;
    UIButton *c9 = [[UIButton alloc] init];
    c9.tag = 33;

    [c1 setBackgroundImage:i forState:UIControlStateNormal];
    [c2 setBackgroundImage:i forState:UIControlStateNormal];
    [c3 setBackgroundImage:i forState:UIControlStateNormal];
    [c4 setBackgroundImage:i forState:UIControlStateNormal];
    [c5 setBackgroundImage:i forState:UIControlStateNormal];
    [c6 setBackgroundImage:i forState:UIControlStateNormal];
    [c7 setBackgroundImage:i forState:UIControlStateNormal];
    [c8 setBackgroundImage:i forState:UIControlStateNormal];
    [c9 setBackgroundImage:i forState:UIControlStateNormal];

    NSArray *c = [[NSArray alloc] initWithObjects:c1,c2,c3,c4,c5,c6,c7,c8,c9, nil];
    _detail= [[PaiLifePageDetail alloc] initWithDataSource:c pageIndex:1];
    for (UIButton *b in c)
    {
        [b addTarget:self action:@selector(clicked:) forControlEvents:UIControlEventTouchUpInside];
    }
    [self.view addSubview:_detail];
}

- (void) clicked : (UIButton *) button
{
    NSLog(@"button = %i", button.tag);
}

@end 
```

自定义视图：

```
@implementation PaiLifePageDetail
#define MARGINTOTOP 120.0
#define MARGINTOLEFT 20.0
#define WIDTH 80.0
#define HEIGHT 60.0

- (id) initWithDataSource : (NSArray *) dataSource pageIndex : (int) pageIndex;
{
    self = [super init];
    if (self)
    {
        if (dataSource)
        {
            for (UIButton *button in dataSource)
            {
                //page 1 line 1
                if (pageIndex == 1)
                {
                    if (button.tag == 11)
                    {
                        button.frame = CGRectMake(MARGINTOLEFT, MARGINTOTOP, WIDTH * 2 + 20, HEIGHT);
                        [self addSubview:button];
                    }
                    else if (button.tag == 12)
                    {
                        button.frame = CGRectMake(MARGINTOLEFT + WIDTH * 2 + 20 * 2, MARGINTOTOP, WIDTH, HEIGHT);
                        [self addSubview:button];
                    }
                }
                //not page 1 line 1
                else
                {
                    if ( button.tag == 11 )
                    {
                        button.frame = CGRectMake(MARGINTOLEFT, MARGINTOTOP, WIDTH, HEIGHT);
                        [self addSubview:button];
                    }
                    else if ( button.tag == 12 )
                    {
                        button.frame = CGRectMake(MARGINTOLEFT + WIDTH + 20, MARGINTOTOP, WIDTH, HEIGHT);
                        [self addSubview:button];
                    }
                    else if ( button.tag == 13 )
                    {
                        button.frame = CGRectMake(MARGINTOLEFT + (WIDTH + 20) * 2, MARGINTOTOP, WIDTH, HEIGHT);
                        [self addSubview:button];
                    }
                }

                // line 2
                if ( button.tag == 21 )
                {
                    button.frame = CGRectMake(MARGINTOLEFT, MARGINTOTOP + HEIGHT + 20, WIDTH, HEIGHT);
                    [self addSubview:button];
                }
                else if ( button.tag == 22 )
                {
                    button.frame = CGRectMake(MARGINTOLEFT + WIDTH + 20, MARGINTOTOP + HEIGHT + 20, WIDTH, HEIGHT);
                    [self addSubview:button];
                }
                else if ( button.tag == 23 )
                {
                    button.frame = CGRectMake(MARGINTOLEFT + (WIDTH + 20) * 2, MARGINTOTOP + HEIGHT + 20, WIDTH, HEIGHT);
                    [self addSubview:button];
                }

                // line 3
                if ( button.tag == 31 )
                {
                    button.frame = CGRectMake(MARGINTOLEFT, MARGINTOTOP + (HEIGHT + 20) * 2, WIDTH, HEIGHT);
                    [self addSubview:button];
                }
                else if ( button.tag == 32 )
                {
                    button.frame = CGRectMake(MARGINTOLEFT + WIDTH + 20, MARGINTOTOP + (HEIGHT + 20) * 2, WIDTH, HEIGHT);
                    [self addSubview:button];
                }
                else if ( button.tag == 33 )
                {
                    button.frame = CGRectMake(MARGINTOLEFT + (WIDTH + 20) * 2, MARGINTOTOP + (HEIGHT + 20) * 2, WIDTH, HEIGHT);
                    [self addSubview:button];
                }
            }
        }
    }
    return self;
}

@end 
```

![在此处输入图像描述](../Images/871410f1010c06b7de55633166bd3900.png)

![在此处输入图像描述](../Images/bf79f70480759a7b7147d31652d3c872.png)

但是当我点击这些按钮时，它们根本不起作用，请帮我解决这个问题，非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T16:43:38.347

这可能是一个触摸处理事件问题。即触摸永远不会到达您的自定义按钮。要调试这个：

1.  你的按钮的子类是什么？
2.  检查 userInterction 是否启用？
3.  检查您对按钮的超级视图`UIGestureRecognizer`- 它们可能会干扰触摸处理。
4.  你是 clipsToBounds 属性 NO 吗？如果是这样，触摸是否超出了视图的范围？
5.  覆盖自定义按钮中的 touchesBegan 以查看它是否被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T05:39:02.260

I had the same issue when I already had button below the superview of my button, for which I wanted to add target. I have changed the frame of my button., then the problem was solved

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:38:41.053

方法：`(id)initWithFrame:(CGRect)frame`不用于创建那些 PaiLifeCustomButton 类型的按钮。

或者在调用init之后手动设置一个frame。我没有仔细研究你的代码，但一切看起来都很好。设置断点以查看您的代码是否运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-12T13:26:11.850

我有同样的问题，问题是我的视图是用 init 而不是 initWithFrame 创建的。万一有人有同样的问题，那么它可能会对你有所帮助。

# db2 - 如何重新绑定 IBM System i V7R1 中已确定模式中存在的所有 UDF 和过程？

> ID：15071633
> 
> 赞同：0
> 
> 时间：2013-02-25T16:29:37.460
> 
> 标签：db2, ibm-midrange, db2-400

在将我们的 IBM System i 从 V5R4 升级到 V7R1 后，我们的大多数 UDF 和过程都无法工作。我重新部署了其中一些运行 CREATE 脚本并再次工作。

有什么方法可以重新绑定已确定模式中存在的所有 UDF 和过程？

提前致谢。

# 3d - 复制而不是抓取

> ID：15071635
> 
> 赞同：0
> 
> 时间：2013-02-25T16:29:45.500
> 
> 标签：3d, blender

在 Blender 中，当您复制时，您会自动进入抓取模式。是否可以复制而不移动复制的对象？我的意思是它会在其他矢量程序中“克隆”或“粘贴到位”。

# php - 带有 JSON 的 jQuery Ajax 请求

> ID：15071636
> 
> 赞同：0
> 
> 时间：2013-02-25T16:29:48.543
> 
> 标签：php, jquery, ajax

我有一个向前端提供 JSON 的 php 文件

```
<?php 
header('Content-type: application/json');
require_once('includes/social-parser.php');

$id = $_POST['id'];
$youtube_playlists = $_POST['y'];
$twitter_lists = $_POST['t'];
$keywords = $_POST['k'];

$parser = new socialParser();
$json = $parser->build(json_decode($youtube_playlists), json_decode($twitter_lists), json_decode($keywords),$id);
shuffle($json);

print_r(str_replace('\\/', '/', json_encode($json)));
die();
?> 
```

在我的前端，我使用调用请求 json：

```
jQuery.ajax({
    url: '/blog/wp-content/themes/blog/social-ajax.php',
    type: 'POST',
    dataType: 'json',
    data: {
        y: '<?php echo json_encode($youtube_playlists); ?>',
        t: '<?php echo json_encode($twitter_lists); ?>',
        k: '<?php echo json_encode($keywords); ?>',
        id: '<?php echo $post->ID; ?>'
    },
    success: function(data, textStatus, xhr) {
        jQuery.event.trigger({
            type: "social-ajax",
            social_object: data
        });
    },
    error: function(xhr, textStatus, errorThrown) {
        console.log("Error loading social data");
        console.log(xhr);
    }
}); 
```

在某些情况下它可以工作，但在其他情况下，它会在进入错误回调时记录一个错误，但状态为 200 .. 错误是： ![在此处输入图像描述](../Images/9a46726e6a3d6ad9652e0aeaa344d8a5.png)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:34:01.580

在我看来，您正在使您的 json 无效：

```
print_r(str_replace('\\/', '/', json_encode($json))); 
```

应该只是：

```
// if $json is not valid json
echo json_encode($json); 
```

或者

```
// if $json is already valid json
echo $json; 
```

# jaxb - JAXB 生成 - 如何在 Java 代码中强制存在嵌套元素（-> 内部类）

> ID：15071639
> 
> 赞同：2
> 
> 时间：2013-02-25T16:30:05.983
> 
> 标签：jaxb, nested, inner-classes, lazy-initialization

我正在使用 JAXB 从我们自己设计的 XSD 生成域对象。在下面给出的 XSD 的相关片段中，我在父 Job 元素中有一个嵌套的 preProcessing 元素。正如预期的那样，这被解析`PreProcessing`为父类中的内部类。`Job`

```
<xsd:complexType name="Job">
    <xsd:element name="preProcessing" nillable="false">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="mask" type="MaskTypeEnum" />
                <xsd:element name="userDefinedMaskFile" type="xsd:string" />
                <xsd:element name="experimentalDesign" type="xsd:boolean" />
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
    <xsd:attribute name="name" type="xsd:string" use="required" />
</xsd:complexType> 
```

访问内部类是通过父`Job`类中生成的一对 get 和 set 方法完成的，这也是预期的：

```
public Job.PreProcessing getPreProcessing() {
    return preProcessing;
}
public void setPreProcessing(Job.PreProcessing value) {
    this.preProcessing = value;
} 
```

我希望能够确保在 Java 代码中，总是有`PreProcessing`一个`Job`. 为此，我希望能够将 JAXB 生成自定义为：

1）`PreProcessing`在`Job`类构造函数中实例化一个实例 2）在调用 getter 方法时延迟实例化一个`PreProcessing`实例（就像列表一样，这很好）

setter 方法将是多余的（实际上不应该调用，因为该`PreProcessing`实例是最终的）。

到目前为止，我已经搜索了 JAXB + 短语，例如惰性实例化、默认值、嵌套元素并绘制了一个空白。似乎可以使用自定义 XMLAdapters 执行某些类自定义，但我的场景与编组/解组并不真正相关，它与我的 Java 应用程序中域对象的操作有关。

# imagemagick - 如何旋转具有固定中心的合成图像？

> ID：15071640
> 
> 赞同：1
> 
> 时间：2013-02-25T16:30:06.937
> 
> 标签：imagemagick, imagemagick-convert

所以，我有这个背景图片：

![bg.png](../Images/885f420cd41a164db2016030a7cc8398.png)

我有一个 1px x 1px 的图像，我想覆盖它。如果我运行：

```
convert bg.png \( -size 80x240 -background none -rotate 30 -geometry +120+88 tile:red.png \) -composite result.png 
```

我明白了：

![结果.png](../Images/fef27c44f18555ef5c63d428dd8f1e45.png)

但我想用固定的中心旋转它。预期的结果应该是这样的：

![预期结果.png](../Images/a4e0e26de50db2b6161e6a6839213d18.png)

你知道我该怎么做吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:23:20.033

查看@frostyterrier 的评论，我认为他的问题是他需要+distort 并且正在使用-distort？

这个页面应该有帮助：[http ://www.imagemagick.org/Usage/distorts/#srt](http://www.imagemagick.org/Usage/distorts/#srt)

旋转图像并具有透明背景

```
convert input.jpg -background none -virtual-pixel background +distort ScaleRotateTranslate 30 output.png 
```

# asp.net - Asp.net WebControl 全球化

> ID：15071642
> 
> 赞同：0
> 
> 时间：2013-02-25T16:30:17.807
> 
> 标签：asp.net, localization, embedded-resource, globalization, web-controls

我在一个外部库中创建了一个自定义 web 控件，它具有 2 种语言的资源。

我在具有相同 web.config 元素的 2 个不同网站中使用此程序集。

```
<globalization uiCulture="en-US" culture="en-US" fileEncoding="utf-8" requestEncoding="utf-8" responseEncoding="utf-8" /> 
```

在网站 A 中，一切正常，在网站 B 中，字符串以错误的文化显示。

我进行了调试，并且在这两个站点中，线程文化和 uiculture 都是正确的。

奇怪的事实是，由 visualstudio 自动创建的 Resource 对象中的 Culture 属性在两个站点的运行时都为 null。

似乎每个站点和调用时的默认文化都不同：

```
ResourceManager.GetString("somestring", resourceCulture); 
```

和

```
resourceCulture==null 
```

线程获得不同的 CurrentUICulture

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:18:12.237

这有一个非常愚蠢的解决方案：

部署程序集的人员未部署包含资源的文件夹。

# javascript - Javascript 问题，需要根据从 2 中选择的值对表内的值进行着色 我想根据 2 个菜单中的选择为表格的某些部分着色，例如，我想为所选值以及介于两者之间的值着色。整个表格是绿色的，我想在选定的值以及它们之间的所有内容上涂上红色。我在让它工作时遇到问题，如果有人可以看看并给我一个提示，那就太好了。http://jsfiddle.net/fqwvy/1/ 我认为问题出在我的功能上……功能 placeColor(); 怎么样： var bgColor = "#123456"; var te

> ID：15071643
> 
> 赞同：0
> 
> 时间：2013-02-25T16:30:20.207
> 
> 标签：javascript, css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:32:05.823

```
var picked_time = {}; // make array for current level price 
```

{ } 不会在 javascript 中创建数组，而是创建一个对象。利用 [ ]

# ios - 等待许多异步调用执行回调

> ID：15071647
> 
> 赞同：4
> 
> 时间：2013-02-25T16:30:28.517
> 
> 标签：ios, objective-c, ios5, block

我想将一些数据与 Web 服务同步。对于每个项目，我必须进行异步调用。

当每个项目同步时，我想调用一个完成块女巫。对于每个项目，我都可以执行一个完成块。现在，我不知道如何做到这一点的好方法。

这是界面：

```
-(void) synchronizeItemsOnComplete:(CompleteBlock) block {
    NSArray* items = // get items
    for (int i = 0, n = [items count]; i < n; i++) {
       [self synchronizeItem:[items objectAtIndex:i] onComplete:^{
          // What do do here?
       }];
    }
    // And/or here?
}

-(void) synchronizeItemOnComplete:(CompleteBlock) block {
    // do something
    block();
} 
```

如何等待同步然后执行块？

我试过这样的事情：

```
NSArray* items = // get items

__block int countOfItemsUntilDone = [items count];

for (int i = 0, n = countOfItemsUntilDone; i < n; i++) {
    [self synchronizeItem:[items objectAtIndex:i] onComplete:^{
        countOfItemsUntilDone--;
    }];
}

dispatch_queue_t queue = dispatch_queue_create("wait for syncing", DISPATCH_QUEUE_CONCURRENT);
dispatch_async(queue, ^{
    while (countOfItemsUntilDone > 0) {
        usleep(1000); // wait a little bit
    }
    block();
});
dispatch_release(queue); 
```

但我认为这是一个相当糟糕的方式。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T17:02:44.927

与其在循环中等待计数器为零，不如在每次递减时检查计数器值，然后在达到零时触发事件。

```
 -(void) synchronizeItemsOnComplete:(CompleteBlock) block {
    NSArray* items = // get items
    __block NSUInteger remaining = [items count];

    for (ItemClass* item in items) {
       [self synchronizeItemImage:item onComplete:^{
            --remaining;
            if (remaining == 0) {
                block();
            }
       }];
    }
 } 
```

为了解释为什么感觉不对，你在这里做两件事，你应该永远不要或很少做：

*   使用后台队列。这是困难且容易出错的。如果没有阅读*大量*有关编写并发代码的内容，请不要这样做。如果一个操作阻塞了相当长的时间（例如，从磁盘读取文件，或执行密集计算），您也只需要这样做。不要假设你需要这样做，除非你有充分的理由（例如，一个可衡量的性能问题）。

*   循环旋转，检查变量的变化并调用睡眠。你不应该*这样*做。

此外，如果您要遍历数组中的元素，则`for ... in`在每个索引上调用 objectAtIndex: 的语法会更好（并且可能更有效）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:44:04.613

永远不要像这样检查或减少不同线程中的共享内存，这可能会导致竞争。使用调度组来做你正在做的事情。

```
dispatch_queue_t myBGQueue;
dispatch_group_t itemsGroup = dispatch_group_create();

for (ItemClass *item in items) {
    dispatch_group_async(itemsGroup, myBGQueue, ^{
        [self synchronizeItemImage:item];
    });
}

/* execution will sleep here until all the blocks added in the `for` complete */
dispatch_group_wait(itemsGroup, DISPATCH_TIME_FOREVER);

dispatch_release(itemsGroup); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:37:58.110

您可以使用这些来同步使用。

[GCD](http://cocoasamurai.blogspot.in/2009/09/guide-to-blocks-grand-central-dispatch.html)和[这个](http://www.fieryrobot.com/blog/2010/09/01/synchronization-using-grand-central-dispatch/)

`performSelector:waitUntilDone:YES`

# jpa - EclipseLink 本机查询结果到 POJO - [Class] 缺少描述符

> ID：15071649
> 
> 赞同：17
> 
> 时间：2013-02-25T16:30:32.537
> 
> 标签：jpa, eclipselink

我正在使用 EclipseLink 运行一些本机 SQL。我需要将数据返回到 POJO。我按照[EclipseLink Docs](http://wiki.eclipse.org/EclipseLink/Development/2.1/AdvancedJPA_Queries)上的说明进行操作，但收到错误消息`Missing descriptor for [Class]`

已命名查询列以匹配 POJO 的成员变量。我需要做一些额外的映射吗？

POJO：

```
public class AnnouncementRecipientsFlattenedDTO {

        private BigDecimal announcementId;
        private String recipientAddress;
        private String type;

        public AnnouncementRecipientsFlattenedDTO() {
            super();
        }

        public AnnouncementRecipientsFlattenedDTO(BigDecimal announcementId, String recipientAddress, String type) {
            super();
            this.announcementId = announcementId;
            this.recipientAddress = recipientAddress;
            this.type = type;
        }

    ... Getters/Setters 
```

实体管理器调用：

```
public List<AnnouncementRecipientsFlattenedDTO> getNormalizedRecipientsForAnnouncement(int announcementId) {
    Query query = em.createNamedQuery(AnnouncementDeliveryLog.FIND_NORMALIZED_RECIPIENTS_FOR_ANNOUNCEMENT, AnnouncementRecipientsFlattenedDTO.class);
    query.setParameter(1, announcementId);
    return query.getResultList();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T14:33:33.410

我发现您可以将本机查询执行的结果放入包含对象的数组列表中。然后可以遍历列表和数组元素并构建所需的实体对象。

```
List<Object[]> rawResultList;

    Query query =
        em.createNamedQuery(AnnouncementDeliveryLog.FIND_NORMALIZED_RECIPIENTS_FOR_ANNOUNCEMENT);
    rawResultList = query.getResultList();

    for (Object[] resultElement : rawResultList) {
        AnnouncementDeliveryLog adl = new AnnouncementDeliveryLog(getAnnouncementById(announcementId), (String)resultElement[1], (String)resultElement[2], "TO_SEND");
        persistAnnouncementDeliveryLog(adl);
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-25T16:36:02.050

如果类已映射，则只能对类使用本机 SQL 查询。您需要将 AnnouncementRecipientsFlattenedDTO 类定义为 @Entity。

否则，只需使用 SQL 创建本机查询并获​​取数据数组并使用数据自己构建 DTO。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-10-31T17:00:19.103

老问题，但可能会遵循解决方案将帮助其他人。

假设您要返回 Oracle 中给定表的列、数据类型和数据长度的列表。我在下面写了一个本机示例查询：

```
 private static final String TABLE_COLUMNS = "select utc.COLUMN_NAME, utc.DATA_TYPE, utc.DATA_LENGTH "
        + "from user_tab_columns utc "
        + "where utc.table_name = ? "                
        + "order by utc.column_name asc"; 
```

现在的要求是根据上述查询的结果构造一个 POJO 列表。

定义`TableColumn`实体类如下：

```
@Entity
public class TableColumn implements Serializable {

@Id
@Column(name = "COLUMN_NAME")
private String columnName;
@Column(name = "DATA_TYPE")
private String dataType;
@Column(name = "DATA_LENGTH")
private int dataLength;

public String getColumnName() {
    return columnName;
}

public void setColumnName(String columnName) {
    this.columnName = columnName;
}

public String getDataType() {
    return dataType;
}

public void setDataType(String dataType) {
    this.dataType = dataType;
}

public int getDataLength() {
    return dataLength;
}

public void setDataLength(int dataLength) {
    this.dataLength = dataLength;
}

public TableColumn(String columnName, String dataType, int dataLength) {
    this.columnName = columnName;
    this.dataType = dataType;
    this.dataLength = dataLength;
}

public TableColumn(String columnName) {
    this.columnName = columnName;
}

public TableColumn() {
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (columnName != null ? columnName.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {

    if (!(object instanceof TableColumn)) {
        return false;
    }
    TableColumn other = (TableColumn) object;
    if ((this.columnName == null && other.columnName != null) || (this.columnName != null && !this.columnName.equals(other.columnName))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return getColumnName();
}

} 
```

现在我们准备构建一个 POJO 列表。使用下面的示例代码将结果构建为 POJO 列表。

```
public List<TableColumn> findTableColumns(String table) {
    List<TableColumn> listTables = new ArrayList<>();
    EntityManager em = emf.createEntityManager();
    Query q = em.createNativeQuery(TABLE_COLUMNS, TableColumn.class).setParameter(1, table);
    listTables = q.getResultList();
    em.close();
    return listTables;
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-03-07T20:23:53.807

另外，不要忘记在您的 POJO 类中添加`persistence.xml`！如果您习惯于 IDE 为您管理该文件，这很容易被忽略。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-30T08:38:45.727

有同样的问题，我想返回一个 POJO 列表，实际上只是 POJO（如果你愿意，可以称之为 DTO）而不是 @Entity 注释对象。

```
class PojoExample {

  String name;

  @Enumerated(EnumType.STRING)
  SomeEnum type;

  public PojoExample(String name, SomeEnum type) {
    this.name = name;
    this.type = type;
  }
} 
```

使用以下查询：

```
String query = "SELECT b.name, a.newtype as type FROM tablea a, tableb b where a.tableb_id = b_id";

Query query = getEntityManager().createNativeQuery(query, "PojoExample");

@SuppressWarnings("unchecked")
List<PojoExample> data = query.getResultList(); 
```

从数据库创建 PojoExample，而不需要 PojoExample 上的实体注释。[您可以在此处的 Oracle 文档](https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html#createNativeQuery-java.lang.String-java.lang.String-)中找到方法调用。

编辑：事实证明，您必须使用 @SqlResultSetMapping 才能使其工作，否则您的 query.getResultList() 将返回对象列表。

```
@SqlResultSetMapping(name = "PojoExample", 
  classes = @ConstructorResult(columns = {
    @ColumnResult(name = "name", type = String.class), 
    @ColumnResult(name = "type", type = String.class)
  }, 
  targetClass = PojoExample.class)
 ) 
```

只需将其放在 @Entity 注释下的任何位置（因此在此示例中，在 tablea 或 tableb 中，因为 PojoExample 没有 @Entity 注释）

# ios - 如何将基本视图控制器用于其他视图控制器？

> ID：15071651
> 
> 赞同：0
> 
> 时间：2013-02-25T16:30:45.923
> 
> 标签：ios, view, base

有许多看起来一样的视图，视图顶部的工具栏，以及上面的一些项目。所以我想知道我是否可以设置一个基本视图控制器和其他视图控制器从它继承。因为我不想每次创建视图控制器时设置这些项目，有什么好主意吗？是否可以创建基本视图控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:00:29.020

在 iOS 5.0+ 上，您可以使用：

```
- (void)addChildViewController:(UIViewController *)childController 
```

# vba - VBA 通过 Excel 2007 在 xls 文件中创建版本 10 数据透视表

> ID：15071652
> 
> 赞同：3
> 
> 时间：2013-02-25T16:30:48.077
> 
> 标签：vba, excel-2007, excel-2003, pivot-table

我需要通过在装有 Excel 2007 的计算机上运行的宏来创建 xlPivotTableVersion10 数据透视表（与 Excel 2003 兼容）。我从源文件运行宏。我有另一个文件 (WkbVar)，它是 .xls，并以 [兼容模式] 打开，我想在其中创建几个数据透视表。我设法创建了与我的外部 Access 数据库（DOH 位置清单 V6）的连接，我从中获取我的数据源以及具有此连接的数据透视缓存（pc）。

```
Set pc = WkbVar.PivotCaches.Create(SourceType:=xlExternal,
SourceData:=WkbVar.Connections("DOH Location inventory V6") _
, Version:=xlPivotTableVersion10)
With pc
.CreatePivotTable TableDestination:=WksAlertesVar.Range("A9"),TableName:="PivotTable_0", _
DefaultVersion:=xlPivotTableVersion10
End With 
```

数据透视缓存似乎创建得很好，但随后我在“.CreatePivotTable [...] DefaultVersion:=xlPivotTableVersion10”行收到类型 1004“对象定义的应用程序定义”错误。

我尝试了几种变体，这里是我得到的回顾：

*   **数据透视缓存版本**:=xlPivotTableversion10 +**数据透视表**DefaultVersion:=xlPivotTableversion10 => 1004 错误

*   **数据透视缓存版本**:=xlPivotTableversion10 +**数据透视表**DefaultVersion:=xlPivotTableversion12 => 1004 错误

*   **数据透视缓存版本**：=xlPivotTableversion12 +**数据透视表**DefaultVersion：=xlPivotTableversion10 => 5 错误“无效的过程调用”

*   **数据透视缓存版本**:=xlPivotTableversion12 +**数据透视表**DefaultVersion:=xlPivotTableversion12 => 工作正常，但它会创建一个 Excel 2007 数据透视表，它与 xls 文件中的过滤器和刷新不兼容。

如果我在创建连接后停止宏并在 [兼容模式] 下手动创建数据透视表，它会按预期工作：我得到一个 Excel 2003 数据透视表。这让我觉得我正在尝试做的事情是可能的，我似乎无法正确编码......

如果有人对如何通过 Excel 2007 应用程序和 VBA 在 xls 文件中创建 Excel 2003 数据透视表有任何提示，我将非常感谢您的知识分享。

真诚的，J。

-------------- 编辑（按照卡特的评论）

确实，为我的数据透视表使用外部源似乎存在问题。经过更多的搜索和测试，我想出了以下解决方法：

```
With ActiveWorkbook.PivotCaches.Create(SourceType:=xlExternal, Version:=xlPivotTableVersion10)
.Connection = Array( )'HERE GOES ALL THE DATA RELATIVE TO MY CONNECTION TO THE ACCESS DATABASE
.CommandType = xlCmdTable
.CommandText = Array( _ 'here is the SQL string to select some data from a specific table I have in my Access database
"SELECT *" & Chr(13) & "" & Chr(10) & "FROM [DOH historique avec libelles] WHERE [DOH historique avec libelles]![Numero Site Gestionnaire] = " & NoSite _
)
.MaintainConnection = False
.CreatePivotTable TableDestination:=ActiveWorksheet.Range("A9"), TableName:="PivotTable_0", DefaultVersion:=xlPivotTableVersion10
End With 
```

在我首先添加一个仅包含“与我的连接相关的数据...”信息且没有 .CommandType、.CommandText 等参数的连接之前。

我对连接参数不是很熟悉，但我猜这个技巧与 Karter 强调的外部源问题有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:45:47.910

我认为实际的源连接不兼容——如果您使用 xldatabase 作为源，它可以正常工作：

```
Set pc = ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:="Sheet5!R1C1:R2C3", Version:=xlPivotTableVersion10)

Set pt = pc.CreatePivotTable(Sheet7.[A1], "testpivot1", , xlPivotTableVersion10) 
```

我知道当我在 Excel 2003 中编写数据透视表时，您必须手动调整数据透视表的连接字符串，所以我认为这可能会导致您的问题。我看看能不能找到一个老例子。

# android - android edittext 不滚动

> ID：15071655
> 
> 赞同：1
> 
> 时间：2013-02-25T16:30:54.537
> 
> 标签：android, scroll, android-edittext

我有编辑文本。现在我的edittext正在包装内容，我不知道为什么，我希望它保持相同的大小但可以滚动（垂直）。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageViewFull"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
 android:layout_weight="10"
    />

 <EditText
 android:id="@+id/editTextFull"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:clickable="false"
 android:ems="10"
 android:lines="1"
 android:maxLines="5"
 android:cursorVisible="false"
 android:scrollbars="vertical"
 android:focusable="false"
  android:focusableInTouchMode="false"
 android:inputType="textMultiLine"
  >

 <requestFocus />
 </EditText>

</LinearLayout> 
```

在java中我设置了文本`setText`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:53:59.507

采用：

```
<EditText
    android:id="@+id/editTextFull"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:clickable="false"
    android:ems="10"
    android:lines="1"
    android:maxLines="5"
    android:cursorVisible="false"
    android:scrollbars="vertical"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:inputType="textMultiLine"
     >

    <requestFocus />
</EditText> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:10:25.410

尝试使用`EditText`in`ScrollView`或查看[此](https://stackoverflow.com/questions/5831392/how-to-make-edittext-in-android-scrollable)线程以使其以编程方式滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:35:12.303

你有没有试过设置你的`layout_height="wrap_content"`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T17:04:25.253

这对我有用：

```
<ScrollView 
    android:layout_height="200dp"
    android:layout_width="match_parent">
    <EditText
        android:id="@+id/Emsg"
        android:hint="@string/texthint"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:textColor="#02960B"
        android:textSize="18sp" />
</ScrollView> 
```

我已经设置了高度`android:layout_height="200dp"`

# html -

> ID：15071656
> 
> 赞同：0
> 
> 时间：2013-02-25T16:30:57.407
> 
> 标签：html

Q1。我可以`</div class="myclass">`在我的 HTML 中使用吗？它正在工作，但未在 w3c 中验证。由于我经历了一些难以找到的封闭`<div>`，不得不使用`<!--myclass-->`来标记，`<div class="myclass"></div class="myclass">`这对我来说很有意义。Q2。经过验证的 HTML 加载速度是否更快？因为这里没有提到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:43:25.107

您不必指定`<div>`要关闭哪个 - 它必须按照打开的顺序完成。该声明对所有 HTML 标签都有效，不仅`<div>`：

***正确的：***

`<div><p>This is my <strong>first</strong> paragraph</p></div>`

`<strong><i>word</i></strong>`

***不正确：***

`<div><p>This is my <strong>second</p> paragraph</div></strong>`

`<strong><i>word</strong></i>`

因此，当您`<div>`在另一个中有多个 s 时，它们总是按给定顺序关闭：

```
<div> <!-- 1st -->
    <div> <!-- 2nd -->
        <p>My paragraph</p>
        <p>My another paragraph</p>
    </div> <!-- 2nd -->
    <div> <!-- 3rd -->
        <p>My paragraph</p>
        <p>My another paragraph</p>
    </div> <!-- 3rd -->
</div> <!-- 1st --> 
```

是的，您应该假设有效的 HTML 代码将更好地通过 Web 浏览器提供给最终用户。搜索引擎用来索引万维网的网络爬虫也应该更好、更容易地解析有效的 HTML 代码。这就是为什么您应该始终尝试使其有效的原因。

# c# - 查找 C# 小数的最低有效位

> ID：15071658
> 
> 赞同：1
> 
> 时间：2013-02-25T16:31:06.073
> 
> 标签：c#, decimal

我想找到 C# 的最低有效数字位置，`decimal`并在该位置设置 1，在所有其他位置设置零。

例如，对于 2m，结果将是 1m。对于 34m，结果将是 1m。对于 0.4m，它将返回 0.1m。对于1200m，我想要100m。

我该怎么做呢？

我可以使用类似于[https://stackoverflow.com/a/757266/246622](https://stackoverflow.com/a/757266/246622)的东西吗？

（编辑：我删除了令人困惑的 2.0m，添加了 1200 的结果）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:05:42.310

您可以利用 Decimal 的实现细节，它的指数等于小数中有效数字的数量。您可以使用 GetBits() 方法获取指数的值。这使得这个（相当模糊的）代码工作：

```
 public static Decimal SignificantFraction(Decimal d) {
        var b = decimal.GetBits(d);
        return new decimal(1, 0, 0, false, (byte)((b[3] >> 16) & 0x7fff));
    } 
```

请注意，这甚至适用于像 0.0m 这样的极端情况，它会产生 0.1m。您没有指定负值应该发生什么，所以我在构造函数中选择了*false*。`d < 0`如果您希望结果为负，请将其替换为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:40:40.830

这些方面的东西怎么样？

```
 decimal number = 1200m;

        decimal result = 1;
        decimal tmp = number;
        while (tmp % 1 != 0)
        {
            result /= 10;
            tmp *= 10;
        }
        if (result > 0 && number != 0)
        {
            tmp = number;
            while (tmp % 10 == 0)
            {
                result *= 10;
                tmp /= 10;
            }
        } 
```

编辑：所以添加了 1200 示例，我的解决方案不再那么整洁了......但我认为它应该可以解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:55:55.233

```
 var t = 1.11111000m;
        //var t = 134000m;

        var tr = t.ToString().Reverse().ToArray();
        char[] ca;
        if (t % 1 > 0)
            ca = tr.SkipWhile(c => c == '0').Select((c, i) => i == 0 ? '1' : c == ',' ? ',' : '0').Reverse().ToArray();
        else
        {
            ca = tr.TakeWhile((c, i) => c == '0' || tr[i - 1] == '0').Reverse().ToArray();
            ca[0] = '1';
        }

        var result = decimal.Parse(new string(ca)); 
```

# python - 优化产品组装/拆卸

> ID：15071659
> 
> 赞同：8
> 
> 时间：2013-02-25T16:31:09.850
> 
> 标签：python, optimization, python-3.2

我有一个包含物品的商店。每个项目要么是一个组件（原子），要么是由各种组件组成的产品（但绝不是两个或多个相同的组件）。

现在，当我想将产品从商店中取出时，有多种情况：

*   商店包含产品的必要数量。
*   该商店包含我可以组装产品的组件。
*   商店包含与所需产品共享组件的产品。我可以拆卸它们并组装所需的物品。
*   以上任意组合。

到目前为止，您可以在下面看到我的代码（`getAssemblyPath`）。如果可能的话，它确实找到了组装所需项目的方法，但它并没有优化组装路径。

我想通过两种方式优化路径：

*   首先，选择组装/反汇编操作次数最少的路径。
*   其次，如果有多种这样的路径，请选择在商店中留下最少数量的拆卸组件的路径。

现在，在这里，我完全不知道如何完成此优化（我什至不确定这是针对 SO 还是针对数学的问题）。

**如何进行更改`getAssemblyPath`以使其满足我的优化要求？**

到目前为止我的代码：

```
#! /usr/bin/python

class Component:
    def __init__ (self, name): self.__name = name

    def __repr__ (self): return 'Component {}'.format (self.__name)

class Product:
    def __init__ (self, name, components):
        self.__name = name
        self.__components = components

    @property
    def components (self): return self.__components

    def __repr__ (self): return 'Product {}'.format (self.__name)

class Store:
    def __init__ (self): self.__items = {}

    def __iadd__ (self, item):
        item, count = item
        if not item in self.__items: self.__items [item] = 0
        self.__items [item] += count
        return self

    @property
    def items (self): return (item for item in self.__items.items () )

    @property
    def products (self): return ( (item, count) for item, count in self.__items.items () if isinstance (item, Product) )

    @property
    def components (self): return ( (item, count) for item, count in self.__items.items () if isinstance (item, Component) )

    def getAssemblyPath (self, product, count):
        if product in self.__items:
            take = min (count, self.__items [product] )
            print ('Take {} of {}'.format (take, product) )
            count -= take
            if not count: return
        components = dict ( (comp, count) for comp in product.components)
        for comp, count in self.components:
            if comp not in components: continue
            take = min (count, components [comp] )
            print ('Take {} of {}'.format (take, comp) )
            components [comp] -= take
            if not components [comp]: del components [comp]
            if not components: return
        for prod, count in self.products:
            if prod == product: continue
            shared = set (prod.components) & set (components.keys () )
            dis = min (max (components [comp] for comp in shared), count)
            print ('Disassemble {} of {}.'.format (dis, prod) )
            for comp in shared:
                print ('Take {} of {}.'.format (dis, comp) )
                components [comp] -= take
                if not components [comp]: del components [comp]
                if not components: return
        print ('Missing components:')
        for comp, count in components.items ():
            print ('{} of {}.'.format (count, comp) )

c1 = Component ('alpha')
c2 = Component ('bravo')
c3 = Component ('charlie')
c4 = Component ('delta')

p1 = Product ('A', [c1, c2] )
p2 = Product ('B', [c1, c2, c3] )
p3 = Product ('C', [c1, c3, c4] )

store = Store ()
store += (c2, 100)
store += (c4, 100)
store += (p1, 100)
store += (p2, 100)
store += (p3, 10)
store.getAssemblyPath (p3, 20) 
```

这输出：

```
Take 10 of Product C
Take 10 of Component delta
Disassemble 10 of Product A.
Take 10 of Component alpha.
Disassemble 10 of Product B.
Take 10 of Component charlie. 
```

这可行，但它确实不必要地拆卸产品 A，因为产品 B 包含所需的组件 alpha 和 charlie。

--

编辑：

回答 Blckknght 的非常明智的问题：

> 当您说您想要“最少数量的组装/拆卸操作”时，您是指最少数量的项目，还是最少数量的不同产品？

“asm/disasm 动作”是组装或拆卸一个产品的动作，无论涉及多少组件。我正在寻找最少数量的触摸项目，无论它们是否不同。

> 也就是说，拆掉产品 A 的 20 个比拆掉产品 A 的 10 个和额外的产品 B 的 5 个更好吗？

后者更接近最优。

> 此外，您说您希望避免留下许多组件，但在您当前的代码中，所有未由请求的产品使用的反汇编组件都将丢失。这是故意的（也就是说，你想扔掉其他组件），还是一个错误？

该方法`getAssemblyPath`仅确定如何获取项目的路径。它不接触实际的商店。它在任何时候都不会分配给`self.__items`。将其视为向商店发出订单的功能，以保留他在（近期）将来必须做的事情，以便从他的商店中取出所需数量的所需物品。

--

编辑2：

解决这个问题的第一个明显（或至少对我来说是显而易见的）方法是首先搜索那些与所需产品共享最大数量的组件的产品，因为每次拆卸都会获得更多所需的组件。但不幸的是，这并不一定会产生最佳路径。举个例子：

产品 A 由组分 α、β、γ、δ、ε 和 ζ 组成。

产品 B 由成分 α、β、η、δ、ε 和 θ 组成。

产品 C 由组分 α、β、γ、ι、κ 和 λ 组成。

产品 D 由分量 μ、ν、ξ、δ、ε 和 ζ 组成。

我们有 A 的 0 个，B 的 100 个，C 的 100 个和 D 的 100 个。我们需要 A 的 10 个。现在如果我们首先寻找与 A 共享大多数组件的产品，我们会找到 B。我们拆卸 10 个B 得到 10 个 α、β、δ 和 ε。但是我们需要拆解 C 的 10 个（得到 γ）和 D 的 10 个（得到 ζ）。这将是 40 个动作（30 个拆卸和 10 个组装）。但最好的方法是拆卸 10 个 C 和 10 个 D（30 个动作，20 个拆卸和 10 个组装）。

--

编辑 3：

**您无需发布 python 代码即可赢得赏金。只需向我解释该算法并证明它确实会产生最佳路径，或者如果存在多个最佳路径之一。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:03:25.463

以下是我将如何解决这个问题。我想为此编写代码，但我认为我没有时间。

您可以递归地找到最佳解决方案。制作一个数据结构来表示零件存储的状态和当前请求。现在，对于您需要的每个部分，进行一系列递归调用，尝试各种方式来完成订单。关键是通过尝试填写订单的方法，您完成了部分工作，因此递归调用现在是同一问题的稍微简单的版本。

这是一个基于您的示例的具体示例。我们需要填写由组件 c1、c3 和 c4 组成的产品 3 (p3) 的订单。我们的订单是 20 个 p3，我们有 10 个 p3 库存，所以我们很容易完成前 10 个 p3 的订单。现在我们的订单是 p3 的 10 个订单，但我们可以将其视为 c1 的 10 个订单、c3 的 10 个订单和 c4 的 10 个订单。对于第一个递归调用，我们拆解了一个 p1，并为单个 c1 填写订单并在 store 中放置一个额外的 c2；因此，此递归调用适用于 c1 的 9 个、c3 的 10 个和 c4 的 10 个，并在商店中更新了可用性。对于第二个递归调用，我们拆解了一个 p2，为一个 c1 和一个 c4 填写一个订单，然后将一个额外的 c2 放入 store；因此，此递归调用适用于 c1 的 9 个、c3 的 10 个和 c4 的 9 个，并在商店中更新了可用性。

由于每次调用都会减少问题，因此递归的调用系列将终止。递归调用应该返回一个成本度量，它要么表示调用未能找到解决方案，要么表示找到的解决方案成本有多少；该函数通过选择成本最低的解决方案来选择最佳解决方案。

我不确定，但你可以通过记忆电话来加快速度。Python 在 3.x 系列中有一个非常漂亮的新内置函数`functools.lru_cache()`；由于您将问题标记为“Python 3.2”，因此您可以使用它。

[什么是 memoization 以及如何在 Python 中使用它？](https://stackoverflow.com/questions/1988804/what-is-memoization-and-how-can-i-use-it-in-python)

memoization 通过识别已经使用相同的参数调用该函数，并且只返回与以前相同的解决方案来工作。所以它是一个缓存映射参数到答案。如果参数包含非必要数据（例如存储中有多少组件 c2），则记忆不太可能起作用。但是如果我们想象我们有产品 p1 和 p9，并且 p9 包含组件 c1 和 c9，那么为了我们的目的，拆卸 p1 之一或 p9 之一应该是等效的：它们具有相同的拆卸成本，并且它们都生产我们需要的组件(c1) 和一个我们不需要的 (c2 或 c9)。因此，如果我们得到正确的递归调用参数，当我们开始尝试 p9 时，memoization 可以立即返回答案，并且可以节省大量时间。

嗯，现在想想，我们可能无法使用`functools.lru_cache()`，但我们可以自己记忆。我们可以缓存解决方案：将元组映射到值的字典，并构建只包含我们想要缓存的参数的元组。然后在我们的函数中，我们做的第一件事就是检查解决方案的缓存，如果这个调用相当于一个缓存的解决方案，就返回它。

编辑：这是我到目前为止写的代码。我还没有完成调试，所以它可能还没有产生正确的答案（我不确定，因为它需要很长时间，而且我还没有让它完成运行）。这个版本在字典中传递，这与我关于记忆的想法不太适合，但我想让一个简单的版本工作，然后担心加快速度。

此外，此代码拆开产品并将它们作为组件添加到商店中，因此最终解决方案将首先说“拆开 10 个产品 A”之类的内容，然后它会说“拆开 20 个组件 alpha”或其他内容。换句话说，组件数量可能被认为很高，因为它不区分已经在商店中的组件和通过拆卸产品放置在那里的组件。

我现在没有时间，暂时不会处理它，对不起。

```
#!/usr/bin/python3

class Component:
    def __init__ (self, name): self.__name = name

    #def __repr__ (self): return 'Component {}'.format (self.__name)
    def __repr__ (self): return 'C_{}'.format (self.__name)

class Product:
    def __init__ (self, name, components):
        self.__name = name
        self.__components = components

    @property
    def components (self): return self.__components

    #def __repr__ (self): return 'Product {}'.format (self.__name)
    def __repr__ (self): return 'P_{}'.format (self.__name)

class Store:
    def __init__ (self): self.__items = {}

    def __iadd__ (self, item):
        item, count = item
        if not item in self.__items: self.__items [item] = 0
        self.__items [item] += count
        return self

    @property
    def items (self): return (item for item in self.__items.items () )

    @property
    def products (self): return ( (item, count) for item, count in self.__items.items () if isinstance (item, Product) )

    @property
    def components (self): return ( (item, count) for item, count in self.__items.items () if isinstance (item, Component) )

    def get_assembly_path (self, product, count):
        store = self.__items.copy()
        if product in store:
            take = min (count, store [product] )
            s_trivial = ('Take {} of {}'.format (take, product) )
            count -= take
            if not count:
                print(s_trivial)
                return
            dict_decr(store, product, take)
            product not in store

        order = {item:count for item in product.components}
        cost, solution = solver(order, store)
        if cost is None:
            print("No solution.")
            return

        print("Solution:")
        print(s_trivial)
        for item, count in solution.items():
            if isinstance(item, Component):
                print ('Take {} of {}'.format (count, item) )
            else:
                assert isinstance(item, Product)
                print ('Disassemble {} of {}'.format (count, item) )

    def getAssemblyPath (self, product, count):
        if product in self.__items:
            take = min (count, self.__items [product] )
            print ('Take {} of {}'.format (take, product) )
            count -= take
            if not count: return
        components = dict ( (comp, count) for comp in product.components)
        for comp, count in self.components:
            if comp not in components: continue
            take = min (count, components [comp] )
            print ('Take {} of {}'.format (take, comp) )
            components [comp] -= take
            if not components [comp]: del components [comp]
            if not components: return
        for prod, count in self.products:
            if prod == product: continue
            shared = set (prod.components) & set (components.keys () )
            dis = min (max (components [comp] for comp in shared), count)
            print ('Disassemble {} of {}.'.format (dis, prod) )
            for comp in shared:
                print ('Take {} of {}.'.format (dis, comp) )
                components [comp] -= take
                if not components [comp]: del components [comp]
                if not components: return
        print ('Missing components:')
        for comp, count in components.items ():
            print ('{} of {}.'.format (count, comp) )

def str_d(d):
    lst = list(d.items())
    lst.sort(key=str)
    return "{" + ", ".join("{}:{}".format(k, v) for (k, v) in lst) + "}"

def dict_incr(d, key, n):
    if key not in d:
        d[key] = n
    else:
        d[key] += n

def dict_decr(d, key, n):
    assert d[key] >= n
    d[key] -= n
    if d[key] == 0:
        del(d[key])

def solver(order, store):
    """
    order is a dict mapping component:count
    store is a dict mapping item:count

    returns a tuple: (cost, solution)
        cost is a cost metric estimating the expense of the solution
        solution is a dict that maps item:count (how to fill the order)

    """
    print("DEBUG: solver: {} {}".format(str_d(order), str_d(store)))
    if not order:
        solution = {}
        cost = 0
        return (cost, solution)

    solutions = []
    for item in store:
        if not isinstance(item, Component):
            continue
        print("...considering: {}".format(item))
        if not item in order:
            continue
        else:
            o = order.copy()
            s = store.copy()
            dict_decr(o, item, 1)
            dict_decr(s, item, 1)
            if not o:
                # we have found a solution!  Return it
                solution = {}
                solution[item] = 1
                cost = 1
                print("BASIS: solver: {} {} / {} {}".format(str_d(order), str_d(store), cost, str_d(solution)))
                return (cost, solution)
            else:
                cost, solution = solver(o, s)
                if cost is None:
                    continue  # this was a dead end
                dict_incr(solution, item, 1)
                cost += 1
                solutions.append((cost, solution))

    for item in store:
        if not isinstance(item, Product):
            continue
        print("...Product components: {} {}".format(item, item.components))
        assert isinstance(item, Product)
        if any(c in order for c in item.components):
            print("...disassembling: {}".format(item))
            o = order.copy()
            s = store.copy()
            dict_decr(s, item, 1)
            for c in item.components:
                dict_incr(s, c, 1)
            cost, solution = solver(o, s)
            if cost is None:
                continue  # this was a dead end
            cost += 1 # cost of disassembly
            solutions.append((cost, solution))
        else:
            print("DEBUG: ignoring {}".format(item))

    if not solutions:
        print("DEBUG: *dead end*")
        return (None, None)
    print("DEBUG: finding min of: {}".format(solutions))
    return min(solutions)

c1 = Component ('alpha')
c2 = Component ('bravo')
c3 = Component ('charlie')
c4 = Component ('delta')

p1 = Product ('A', [c1, c2] )
p2 = Product ('B', [c1, c2, c3] )
p3 = Product ('C', [c1, c3, c4] )

store = Store ()
store += (c2, 100)
store += (c4, 100)
store += (p1, 100)
store += (p2, 100)
store += (p3, 10)
#store.getAssemblyPath (p3, 20)
store.get_assembly_path(p3, 20) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T22:27:34.460

1.  N 个产品的最优路径 <=> 单个产品的最优路径。

事实上，如果我们需要优化组装 N 个产品 X，在我们优化（使用当前库存）组装一个产品之后，问题就变成了使用剩余库存优化组装 (N-1) 个产品 X。

=> 因此，提供一次最优组合一个产品 X 的算法就足够了。

1.  假设我们需要产品的组件 x1,..xn（这里我们只包括不作为库存组件提供的组件）

对于每个组件 xk，查找具有该组件的所有产品。我们将获得每个组件的产品列表 - 产品 A1(1)、..、A1(i1) 具有组件 x1，产品 A(1)、..、A(i2) 具有组件 x2，依此类推（有些产品可以包含在多个列表 A1、A2、..、An 列表中）。

如果任何列表为空 - 没有解决方案。

我们需要最少的产品集，以便该集中的产品包含在每个列表中。最简单但计算效率不高的解决方案是蛮力 - 尝试所有集合并选择最小：

*   取 A1,..,An 的联合 - 称它为 A（仅包括联合中的唯一产品）。

一个。取A的单品，如果A1,..,An都包含，我们只需要拆一个（这个产品）。湾。尝试 A 中两种产品的所有组合，如果任何组合 (a1,a2) 满足 a1 或 a2 包含在每个列表 A1,..,An 中的条件 - 这是一个解决方案。

...

当然，在深度 n 处有一个解决方案 - 每个列表 A1,..,An 中的一个组件。如果我们之前没有找到解决方案，这是最好的解决方案。

现在，我们只需要考虑比蛮力检查更好的策略，我认为这是可能的 - 我需要考虑一下，但这种蛮力方法肯定会找到严格的最佳解决方案。

* * *

**编辑：**

更准确的解决方案是按长度对列表进行排序。然后，当检查 K 个产品的集合是否为解决方案时 - 仅需要检查前 K 个列表中每个列表中 1 项的所有可能组合，如果没有解决方案 - 没有解决问题的最小深度 K 集。这种类型的检查在计算上也不会那么糟糕——也许它可以工作？？？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T04:40:58.850

I think the key here is to establish the potential costs of each purchase case, so that the proper combination of purchase cases optimally minimize a cost function. (Then its simply reduced to a knapsack problem)

What follows is probably not optimal but here is an example of what I mean:

1.Any product that is the end product "costs" it's actual cost (in currency).

2.Any component or product that can be assembled into the end product (given other separate products/components) but does not require being dissembled costs it's real price (in currency) plus a small tax( tbd).

3.Any component or product that can facilitate assembly of the end product but requires being dissembled costs it's price in currency plus a small tax for the assembly into the end product and another small tax for each dis-assembly needed. (maybe the same value as the assembly tax?).

Note: these "taxes" will apply to all sub-products that occupy the same case.

... and so on for other possible cases

Then, find all possible combinations of components and products available at the storefront that are capable of being assembled into the end product. Place these "assembly lists" into a cost sorted list determined by your chosen cost function. After that, start creating as many of the first (lowest cost) "assembly list" as you can (by checking if all items in assembly list are still available at the store - i.e. you have already used them for a previous assembly). Once you cannot create any more of this case, pop it from the list. Repeat until all the end products you need are "built".

Note: Every time you "assemble" an end product you will need to decriment a global counter for each product in the current "assembly list".

Hope this get's the discussion moving in the right direction. Good luck!

# matlab - 从 Unix shell 脚本运行 MATLAB

> ID：15071663
> 
> 赞同：3
> 
> 时间：2013-02-25T16:31:14.107
> 
> 标签：matlab, shell, unix

我在我的 Mac OS（Mountain Lion）上从 Unix shell 脚本运行 MATLAB 脚本时遇到了一些问题。

我知道如何从 shell 调用 MATLAB 脚本，而且效果很好。但是，问题是我希望我的 shell 脚本在 MATLAB 完成运行后调用另一个程序。但是当 MATLAB 程序完成时，shell 就“卡住”了。也就是说，它不会继续执行 shell 中的其他函数，并且终端窗口卡在 MATLAB 环境中，而不是将控制权返回给 sh。

我在这里做什么？这是我的外壳的副本：

```
#! /bin/sh
echo "Please make sure the network cable is plugged in" 
echo "(then press return to continue)"

sudo mv /System/Library/CoreServices/Dock.app /System/Library/CoreServices/Dock.app.bak
killall Dock

/Applications/MATLAB_R2008a/bin/matlab -nodesktop -r "run Documents/MATLAB/BLS/BLS"

sudo mv /System/Library/CoreServices/Dock.app.bak /System/Library/CoreServices/Dock.app

# OTHER COMMANDS AFTER HERE CALLING OTHER PROGRAMS ... 
```

这两个“sudo mv”命令只是在 MATLAB 执行期间使 Dock 不可见，并在 MATLAB 完成后将其恢复。

第一个命令完美运行，使 Dock 不可见，然后运行 ​​MATLAB。但是，当 MATLAB 完成运行时，它不会继续运行 shell 的其余部分。终端在 MATLAB 中“卡住”了。我曾尝试摆弄命名管道等，但我无法让它们中的任何一个工作。

MATLAB 完成后如何让它继续执行 shell 脚本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T16:45:47.180

Have you tried adding `exit` to Matlab command?

```
/Applications/MATLAB_R2008a/bin/matlab -nodesktop -r "run Documents/MATLAB/BLS/BLS; exit;" 
```

# jquery - jQuery Mobile 不工作（我只看到 Broken Bells）

> ID：15071666
> 
> 赞同：0
> 
> 时间：2013-02-25T16:31:18.763
> 
> 标签：jquery, html, mobile, wamp

我下载了 jQuery Mobile Demo 来了解查询移动是如何工作的。我将文件放在一个名为“test”的文件夹中，并将这个测试文件夹放在我的 WAMP 服务器的 www 文件夹中。当我尝试打开网页（Chrome、Firefox 或 IE）时，除了在屏幕左上角以蓝色测试写的 Broken Bells 和损坏的图像外，我什么也没看到。我不知道发生了什么。当我尝试在我的平板电脑（Sony Tablet S）上运行网页时，我遇到了同样的情况。如果可以的话请帮忙。谢谢。

-----------------编辑后------------------------

好的，这就是我现在尝试过的。我去了这个页面[http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.js](http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.js)。我将代码从该页面复制到一个名为 jquery.mobile-1.3.0.js 的文件中。然后在与该文件相同的文件夹中，我有另一个名为 index.php 的文件。在那个文件中，我有这个代码。

```
<html>
<head>
    <script type="text/javascript" src="jquery.mobile-1.3.0.js"></script>
</head>
<body>
    <a href="#" data-role="button">Anchor</a>
    <form>
        <button>Button</button>
        <input value="Input" type="button">
        <input value="Submit" type="submit">
        <input value="Reset" type="reset">
    </form>
</body>
</html> 
```

现在页面打开了，但是按钮不像 jQuery 那样，我不明白为什么。如果可以的话请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:09:24.627

你期待看到什么？你想用这段代码做什么？

包含 jquery 移动库的正确方法：

```
<head>
  <link href="YOUR_FOLDER/jquery.mobile-1.3.0.css" rel="stylesheet">  
  <script src="YOUR_FOLDER/jquery-1.8.0.js" type="text/javascript"></script>
  <script src="YOUR_FOLDER/jquery.mobile-1.3.0.min.js" type="text/javascript"></script>
</head> 
```

首先，您需要包含所有库文件：.css 和 .js 文件。其次，必须有一个 jquery 首先包含 [not mobile]（jquery-1.8.0.js 或其他版本），然后是 jquery.mobile-xxxjs。没有jquery库，jquery移动库就无法工作......

最后，在你包含文件之后......我不明白你想用这段代码做什么，但这里有一个例子：

```
<div data-role="page">

    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p>Page content goes here.</p>  
            <a href="index.html" data-role="button">Link button</a>
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:53:51.823

如果您在本地主机上运行，​​请尝试在每个链接和按钮上使用 data-ajax=disabled。我不记得语法，但我记得有一个类似的问题。

# java - JTable 的单元格渲染器 - 彩色行

> ID：15071668
> 
> 赞同：1
> 
> 时间：2013-02-25T16:31:22.320
> 
> 标签：java, swing, jtable, cellrenderer

我一直在寻找解决这个问题的方法，如果不问我自己的问题，我就无法从各个地方找出如何让我的桌子做彩色行的方法。

从我看过的每个地方，我收集到我需要使用单元格渲染器，但问题是我不知道如何将它应用于我自己的情况。

所以我有一个包含 3 列的简单 JTable，我只是希望每一行根据单独变量的值（未显示在表中）以绿色、黄色或红色突出显示。

看起来应该很简单，但我不知道该怎么做。如果有帮助，我的表定义如下：

```
studentTableModel = new DefaultTableModel(new Object[]{"Name", "StudentNo", "Part"}, 0);
jt_studentTable = new JTable(studentTableModel);
jt_studentTable.getColumnModel().getColumn(2).setPreferredWidth(10);
studentTableModel.addRow(new Object[]{"(empty)", "(empty)", "(empty)"});
JScrollPane jsp_tableScroller = new JScrollPane(jt_studentTable);
jsp_tableScroller.setPreferredSize(new Dimension(200,190));
middleCentrePanel.add(jsp_tableScroller); 
```

表中的行会根据组合框的选择而变化。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T17:40:04.383

![JTable 单元格着色](../Images/c272c4285539936d1b74908cc5c0624b.png)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;

public class RowRendering {

    private static Object[] columnName = {"Yes", "No"};
    private static Object[][] data = {
            {"Y", "N"},
            {"N", "Y"},
            {"Y", "N"}
    };

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {

                JFrame frame = new JFrame();
                JTable table = new JTable(data, columnName);
                table.getColumnModel().getColumn(0).setCellRenderer(new CustomRenderer());
                table.getColumnModel().getColumn(1).setCellRenderer(new CustomRenderer());

                frame.add(new JScrollPane(table));
                frame.setTitle("Rendering in JTable");
                frame.pack();
                frame.setVisible(true);
            }
        };

        EventQueue.invokeLater(r);
    }
}

class CustomRenderer extends DefaultTableCellRenderer 
{
private static final long serialVersionUID = 6703872492730589499L;

    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
    {
        Component cellComponent = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

        if(row == 0){
            cellComponent.setBackground(Color.YELLOW);
        } else if ( row == 1){
            cellComponent.setBackground(Color.GRAY);
        } else {
            cellComponent.setBackground(Color.CYAN);
        }
        return cellComponent;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:35:37.903

> 我只是希望每一行根据单独变量的值（未显示在表中）以绿色、黄色或红色突出显示。

渲染器处理表中的数据。也就是说，组件只有在拥有完成工作所需的所有信息时才能绘制自己。

因此，您需要以某种方式将信息添加到表中。这可以通过添加隐藏的第四列来完成。然后该表仍然可以访问所需的信息。

那么也许您可以使用[Table Row Renderering](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/)中的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:48:41.207

也许这对你有用：

```
class MyCellRenderer extends DefaultTableCellRenderer {
     String separatedVariable;
     public MyCellRenderer(String separatedVariable) {
         this.separatedVariable = separatedVariable;
      }

      @Override
      public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int col) {
          Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, col);
          c.setBackground(Color.WHITE);
          c.setForeground(Color.BLACK);
              JLabel l = (JLabel) super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, col);
          if (separatedVariable.equals("YOUR VALUE TO GREEN")) {
              l.setBackground(Color.GREEN);

              return l;
          } else {
                     if (separatedValue.equals("YOUR VALUE TO YELLOW")) {
                          l.setBackground(Color.YELLOW);
                          return l;
                      } else if (separatedValue.equals("YOUR VALUE TO RED")) {
                          l.setBaground(Color.RED);
                          return l;
                      }
               }
              return c;
      }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-11T13:28:01.033

我只是有同样的问题，但有点复杂，因为我已经为每列有几个不同的渲染器，具体取决于数据类型。

但我发现这很有魅力：

```
public class MyTable extends JTable {
    @Override
    public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
        Component result = super.prepareRenderer(renderer, row, column);

        if (mustBeYellow(row, column)) {
            result.setBackground(Color.yellow);
        }

        return result;
    }

    private boolean mustBeYellow(int row, int column) {
        // implement this depending on your data..
        return false;
    }
} 
```

# jquery - 将自定义 jquery twitter 提要添加到 magento 右列

> ID：15071669
> 
> 赞同：0
> 
> 时间：2013-02-25T16:31:32.423
> 
> 标签：jquery, magento, twitter

我真的需要 Magento 的帮助，但我无法理解它！

基本上，我为我的 magento 网站设置了两栏，右侧栏用于一组链接和广告。所有这些都已设置为静态块并添加到 catalog.xml 文件中。我做得很好。

我需要发生在这些链接之间的某个地方，应该是一个滴滴饲料。我已经获得了 twitter 提要的 js，但我发现添加它真的很困难。

考虑到我对 Magento 很陌生，有人可以为我分解一下，如何在我已经安排的静态块之间的右侧列中添加自定义 js 脚本。js 是 jquery，所以假设我需要包含“noconflict”行。同样，如何实现这一点会很好。

如果有帮助，这个 jquert twitter 提要将保留在每个页面上。

感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:54:29.570

包含您自己的模板/布局文件以及您自己的自定义 Block 类的自定义模块可能是要走的路。

您可以尝试使用内置工具执行此操作，但所见即所得编辑器可能会破坏您的 JS 脚本，因为它会根据需要添加/删除标记/代码。当然，您始终可以完全禁用所见即所得（使其更易于使用，但客户喜欢这样）。

理论上，您应该能够像添加任何其他静态块一样添加它。如果您正在尝试此操作并遇到问题，那么详细描述这些问题可能会更有益。

# app-store - 如何将 10 个屏幕截图上传到 AppStore？

> ID：15071670
> 
> 赞同：0
> 
> 时间：2013-02-25T16:31:34.783
> 
> 标签：app-store, screenshot

我只能在 ApsStore 上上传 5 张截图。但是我可以看到一些带有 10 个屏幕截图的应用程序。我不知道该怎么做。有没有人知道这件事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:40:23.453

如果您的应用程序是“通用”，则 iPhone 为 5，iPad 为 5

# checkbox - 初始单击后 JQuery 复选框操作不起作用

> ID：15071671
> 
> 赞同：0
> 
> 时间：2013-02-25T16:31:36.457
> 
> 标签：checkbox

我有一个复选框表。顶部是一个管理员框，然后是一堆其他权限。如果选中 Admin 框，则应选中所有其他框，如果未选中另一个框，则应取消选中 Admin 框。我让它在初始点击时工作，但如果你点击管理员框，它会检查所有其他人，然后取消选中另一个选项，它会取消选中管理员。再次检查管理员，没有任何反应。

[http://jsfiddle.net/HCpQg/1/](http://jsfiddle.net/HCpQg/1/)

```
$("#administrator").click(function(){
if ($(this).is(':checked')) {
    $('.permissions').attr('checked',true);
}
});

$(".permissions").click(function(){
if ($(this).is(':checked')) {
} else {
$('#administrator').attr('checked',false);
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:36:55.667

使用 .prop() 而不是 .attr()。

[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T03:29:31.063

只是我的 2 美分：如果你使用统一的样式：

```
$(function () {
    $(":checkbox").uniform();
}); 
```

那么你需要打电话

```
$.uniform.update(); 
```

在您动态选中/取消选中复选框后。我刚刚花了 6 个小时的时间尝试，直到我挖出了这一点......

# java - SAXParser 不会解析整个 xml 文件

> ID：15071682
> 
> 赞同：0
> 
> 时间：2013-02-25T16:32:16.610
> 
> 标签：java, android, xml, xml-parsing, saxparser

我正在使用 SAXParser 来解析 xml 文件。但是，我的应用程序仅解析我的 xml 文件中的前 3 项并忽略其余项。下面是我的代码和我要解析的 xml 文件：

主要活动：

```
public class XMLParsingExample extends Activity {

    /** Create Object For Bar Class */
    Bar barList = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /** Create a new layout to display the view */
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(1);

        /** Create a new textview array to display the results */
        TextView colour[];
        TextView division[];
        TextView rect[];

        try {

            /** Handling XML */

            String path = Environment.getExternalStorageDirectory().getAbsolutePath() + "/saveObject/new.xml"; 
            File file = new File(path);
            SAXParserFactory parserFactory=SAXParserFactory.newInstance();
            SAXParser saxParser=parserFactory.newSAXParser();
            XMLReader reader=saxParser.getXMLReader();
            MyXMLHandler myXMLHandler = new MyXMLHandler();
            reader.setContentHandler(myXMLHandler);
            reader.parse(new InputSource(new FileInputStream(file)));

        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        }

        /** Get result from MyXMLHandler Bar Object */
        barList = MyXMLHandler.barList;

        /** Assign textview array lenght by arraylist size */
        colour = new TextView[barList.getColour().size()];
        division = new TextView[barList.getDivision().size()];
        rect = new TextView[barList.getRect().size()];

        /** Set the result text in textview and add it to layout */
        for (int i = 0; i < barList.getRect().size(); i++) {
            colour[i] = new TextView(this);
            colour[i].setText("Colour = "+barList.getColour().get(i));
            division[i] = new TextView(this);
            division[i].setText("Division = "+barList.getDivision().get(i));
            rect[i] = new TextView(this);
            rect[i].setText("Rect = "+barList.getRect().get(i));

            layout.addView(colour[i]);
            layout.addView(division[i]);
            layout.addView(rect[i]);
        }

        /** Set the layout view to display */
        setContentView(layout);

    }
} 
```

XML 处理程序：

```
public class MyXMLHandler extends DefaultHandler {

    Boolean currentElement = false;
    String currentValue = null;
    public static Bar barList = null;

    public static Bar getbarList() {
        return barList;
    }

    public static void setbarList(Bar barList) {
        MyXMLHandler.barList = barList;
    }

    /** Called when tag starts*/

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        currentElement = true;

        if (localName.equals("bar"))
        {
            /** Start */ 
            barList = new Bar();
        }

    }

    /** Called when tag closing*/
    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        currentElement = false;

        /** set value */ 
        if (localName.equalsIgnoreCase("colour"))
            barList.setColour(currentValue);
        else if (localName.equalsIgnoreCase("division"))
            barList.setDivision(currentValue);
        else if (localName.equalsIgnoreCase("rect"))
            barList.setRect(currentValue);

    }

    /** Called to get tag characters  */
    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {

        if (currentElement) {
            currentValue = new String(ch, start, length);

            currentElement = false;
        }

    }

} 
```

酒吧班

```
public class Bar {
    /** Variables */
    private ArrayList<String> colour = new ArrayList<String>();
    private ArrayList<String> division = new ArrayList<String>();
    private ArrayList<String> rect = new ArrayList<String>();

    /** In Setter method default it will return arraylist 
     *  change that to add  */

    public ArrayList<String> getColour() {
        return colour;
    }

    public void setColour(String name) {
        this.colour.add(name);
    }

    public ArrayList<String> getDivision() {
        return division;
    }

    public void setDivision(String division) {
        this.division.add(division);
    }

    public ArrayList<String> getRect() {
        return rect;
    }

    public void setRect(String rect) {
        this.rect.add(rect);
    }

} 
```

要解析的 XML 文件：

```
<?xml version='1.0' encoding='UTF-8' standalone='yes' ?>
<bar>
  <colour>Blue</colour>
  <division>8898</division>
  <rect>33</rect>
</bar>
<bar>
  <colour>Red</colour>
  <division>65</division>
  <rect>6876</rect>
</bar>
<bar>
  <colour>Black</colour>
  <division>65</division>
  <rect>6876</rect>
</bar>
<bar>
  <colour>Yellow</colour>
  <division>65</division>
  <rect>6876</rect>
</bar>
<bar>
  <colour>Red</colour>
  <division>65</division>
  <rect>6876</rect>
</bar> 
```

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:50:52.307

每次创建新柱实例时，您都会丢失旧柱实例。如果您尝试存储 Bar 实例的集合，请像这样更改 Bar 类：

```
public class Bar {
    private String colour;
    private String division;
    private String rect;

    public void setColor(String color) {
        this.color = color;
    }
    //other setters & getters...
} 
```

在您的 MyXmlHandler 中，有一个 List 和一个当前 Bar：

```
public List<Bar> barList = new ArrayList<Bar>();
private Bar currentBar; 
```

在 startElement 事件处理程序中，执行以下操作：

```
 if (localName.equals("bar"))
    {
        /** Start */ 
        currentBar = new Bar();
        barList.add(currentBar);
    } 
```

在 endElement 事件处理程序中，

```
 if (localName.equalsIgnoreCase("colour"))
        currentBar.setColour(currentValue);
    else if (localName.equalsIgnoreCase("division"))
        currentBar.setDivision(currentValue);
    else if (localName.equalsIgnoreCase("rect"))
        currentBar.setRect(currentValue); 
```

这应该可以解决问题，尽管我还没有测试过

# javascript - string.substring(1) 在具有相同 html 的不同站点上给出不同的结果

> ID：15071685
> 
> 赞同：0
> 
> 时间：2013-02-25T16:32:17.773
> 
> 标签：javascript, substring

我正在使用 substring(1) 从 href 属性中获取最后一个字符。

我说的是javascript。在我的开发站点上，一切正常，href [http://www.mysite.come/page/#B](http://www.mysite.come/page/#B)返回 B，一切都很好。

在网站的实时版本中，相同 href 上的相同 substring(1) 返回 ttp://www.mysite.com/page/#B - 它去掉第一个字符并返回其余字符。

我不知道它为什么这样做。我已经在多个站点上使用了相同的脚本，没有任何问题。唯一可能相关的是开发站点正在运行更新版本的 jquery (1.8.1)，并且 live 是在 1.7.1 上。

我改用 substr(-1,1) 并且一切正常，但我想知道是否有人可以告诉我为什么我从相同的输入中得到 2 个不同的结果。

谢谢！

**额外信息**

我已经使用 CSS Tricks 中的 OrganicTabs 脚本有一段时间了（[http://css-tricks.com/organic-tabs/](http://css-tricks.com/organic-tabs/)），直到最近才遇到问题。我将其追踪到子字符串行： `var curList = base.$el.find("a.current").attr("href").substring(1)`

我是这个脚本所针对的链接之一的示例： `<a href="#B"></a>`

我已修改脚本以改用 substr，但我不知道为什么我会得到与 substring 不一致的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:36:14.253

您在本地阅读的 href 仅存储 url 的哈希部分，而由于某种原因，Live 网站 href 具有整个 url

`<a href="#B">Link</a>`对比`<a href="http://www.mysite.come/page/#B">Link</a>`

substring 函数按预期工作，因为`substring(1)`应该返回除第一个字符之外的所有内容。

检查您如何生成您的网址

**编辑**：最好的解决方案是从哈希开始获取子字符串（不包括它），它涵盖了这两种情况，以及哈希长于 1 个字符的情况

`href.substring(href.indexOf("#")+1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:35:25.950

`String.prototype.substring(n [,...])`如果是正数，则返回`n`字符串中的第一个字符，而不是最后一个字符。`n`你需要`substr(-1)`这个。

看：

*   MDN：[`substr`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)对比[`substring`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)

# c# - 尝试从字节数组解码以显示为 Silverlight 图像时 Jpeg 旋转

> ID：15071687
> 
> 赞同：0
> 
> 时间：2013-02-25T16:32:21.943
> 
> 标签：c#, image, silverlight, jpeg

我的数据库保存`byte[]`了不同图像的数据，`png`扩展`bmp`工作正常，但奇怪的是，带有`jpeg`扩展的图像似乎逆时针旋转了 90 度。我只能假设这是编码器和解码器的问题。`jpegs`它们由 iPhone 编码，并在 silverlight 应用程序中使用以下代码进行解码：

```
using (MemoryStream ms = new MemoryStream(bImage, 0, bImage.Length))
{
    BitmapImage bitmapImage = new BitmapImage();
    bitmapImage.SetSource(ms);

    img.Source = bitmapImage;
    tempList.Add(img);
} 
```

因为`bmps`我使用以下内容：

```
ExtendedImage image = new ExtendedImage();
var bmp = new BmpDecoder();
var png = new PngEncoder();

try
{
    bmp.Decode(image, new MemoryStream(bImage));
}
catch (NotSupportedException)
{
    new MessageWindow("Incorrect image format", DisplayStrings.ErrorDisplay, MessageButtons.OK, MessageImage.Error).Show();
    continue;
}

MemoryStream ms = new MemoryStream();
png.Encode(image, ms);

BitmapImage bi = new BitmapImage();
bi.SetSource(new MemoryStream(ms.ToArray()));

img.Source = bi;
tempList.Add(img); 
```

这两个选项都不会以正确的方向显示图像。我是否缺少特定的 jpeg 解码器类？

**编辑** 事实证明，iPhone 对字节数组做了一些奇怪的事情。结果：在保存之前旋转 iPhone 上的图像显然对 iPhone 上的图像没有任何作用，而是将图像的正确方向上传到服务器上。为什么会发生这种情况是任何人的猜测，但事实就是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:39:50.753

通过在将字节数组上传到服务器之前在 iPhone 上旋转图像来解决。这会以正确的方向保存图像，并且显然不会与 iPhone 上的原始图像产生明显差异。

# jquery - 如果选中复选框，则更改样式

> ID：15071689
> 
> 赞同：0
> 
> 时间：2013-02-25T16:32:27.437
> 
> 标签：jquery

我怎样才能做到这一点 ？这不起作用，没有结果，没有效果，没有错误输出。

```
$('input[type=checkbox]').each(function() 
    {
            if($(this).attr("checked") === true){
            $('.hoverbox .a').css('text-transform', 'uppercase');
            }
            else
            {
            $('.hoverbox .a').css('text-transform', 'lowercase');
            }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:33:42.070

您可能需要一个事件处理程序：

```
$('input[type=checkbox]').on('change',function(e) {
   // do stuff
}); 
```

[http://api.jquery.com/on](http://api.jquery.com/on)

或者可能（我很难理解你的意图）你需要使用[`.prop()`](http://api.jquery.com/prop)而不是`.attr()`：

```
if ($(this).prop('checked')) {
    // do something 
} else {
    // do something else
} 
```

**更新：**把它们放在一起：

```
$('input[type=checkbox]').on('change',function(e) {
    if ($(this).prop('checked')) {
        $('.hoverbox .a').css('text-transform', 'uppercase');
    } else {
        $('.hoverbox .a').css('text-transform', 'lowercase');
    };
}); 
```

虽然添加自定义类并[切换它](http://api.jquery.com/toggleClass)会为您节省一些麻烦：

```
$('input[type=checkbox]').on('change',function(e) {
    $('.hoverbox .a').toggleClass('uppercase');
}); 
```

CSS：

```
.hoverbox .a {
    text-transform: lowercase;
}
.hoverbox .a.uppercase {
    text-transform: uppercase;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:35:05.017

为什么不能使用 CSS？为什么要浪费 JavaScript？

```
input[type=checkbox]:checked + div {
    text-decoration:underline;
} 
```

# php - 发布到其他页面但留在当前页面

> ID：15071690
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:32:29.763
> 
> 标签：php, post, target

我有一个要求，2 个 php 页面，一个用于输入目的，另一个用于显示目的。

第 1 页-badgeentry.php 允许管理员输入徽章编号 123 并单击提交。第 2 页 - badgedisplay.php 允许所有其他用户查看当前的徽章编号。在本例中为 123。此页面正在使用“刷新”元 html 标记。

就开发而言，我有徽章入口和徽章显示编码。但是，我希望管理员在单击提交后留在徽章条目上，并且仍然将数据发布到徽章显示。我怎样才能做到这一点？

另外，在管理员更新号码之前，我如何维护徽章号码。目前，我失去了徽章显示页面上的帖子价值。

PS：我不能使用数据库，如果我真的需要的话可能是 Javascript

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:35:16.437

**使用 JavaScript：**使用 AJAX 在后台异步发布。

**不使用 JavaScript：**发布到隐藏的 iframe（使用`<form target="name-of-iframe">`）

# reporting-services - 过滤“介于”某些日期，日期存储为文本值

> ID：15071691
> 
> 赞同：0
> 
> 时间：2013-02-25T16:32:39.373
> 
> 标签：reporting-services, filter, int, between

我有一个带有文本字段 MonthYear 的 SSRS 报告，其中包含“2012 年 9 月”、“2012 年 10 月”等值。

我需要做一个“介于”过滤器，例如 2012 年 9 月 - 2013 年 2 月。

但是，似乎不可能以任何简单的方式做到这一点，因为这些字段是文本格式的。我认为我必须将此字段转换为整数格式然后过滤，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:23:12.320

我试过这个。我每个月都使用替换功能，将它们匹配到 1、2、3 等。并使用这个数字制作过滤器，所以它就像“1 到 4 之间”但是不知何故这不能正常工作。当我选择“2012 年 9 月（1）和 2012 年 3 月（3）之间”时，它会显示所有月份的所有数据。但似乎“2012 年 5 月（5）和 2012 年 8 月（8）之间”工作正常。

# javascript - 在 BS 联系人查看器上触发 onclick 事件

> ID：15071694
> 
> 赞同：0
> 
> 时间：2013-02-25T16:32:46.340
> 
> 标签：javascript, x3dom

这是我的另一个一般问题，我被困在这一点上。我在服务器中进行了 W3DS GetScene 查询，并在查看器中获得了 3D 场景作为输出。现在我想在显示的对象上触发 onclick 函数，这样当我点击对象时，我可以获得它的 id 以及 X、Y 和 Z 方面的位置坐标，并使用它来触发 GetFeatureInfo 请求background 获取点击对象相关的属性表。我被卡住的部分是关于如何触发 onclick 事件，或者说我怎样才能让服务器了解该对象已被单击。服务器是否有必要预先定义功能，或者是否有任何其他方法可以通过适当的编码从客户端启动该功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:01:10.483

这完全不是关于 X3DOM，而是关于 X3D 以及在 X3D 场景中路由事件的方式。

*   您必须在内部定义一个 TouchSensor 节点作为形状或变换节点的兄弟节点：`<TouchSensor DEF="TCH"/>`

*   然后你必须添加一个 Script 节点，设置它的子 Field 节点，并提供一个 JS 文件或 JS 内容作为 CDATA 来描述这些字段的处理，如[instantreality wellwritten documentation中所述](http://doc.instantreality.org/tutorial/implementing-script-nodes-in-javascript/)

BS播放器中的JS与网页中的JS之间的交互不知何故没有很好的记录。但是 BitManagement 有 SDK 和支持。据我所知，能够让双方相互通信是在点击时向您的服务器发送请求的唯一方法，因为您成功收听了 BS Contact 方。

几年前，我成功地用 Octaga Player 创建了这样的通信：JS Octaga 端、JS 网页端和用 Lejos 构建的 java 小程序之间的双向通信，接收和发送订单给 NXT 机器人。

**但是**：您现在可以将 X3DOM 视为在 Web 上显示 X3D 内容的方式，因此直接避免了 JS（X3D 播放器）与 JS（网页）通信的任何问题。

然后，为了实现事件处理程序，我让您阅读[stackoverflow 上关于处理 X3DOM 形状上的点击的另一篇文章](https://stackoverflow.com/questions/13958229/display-the-attribute-as-a-table-of-x3dom-object/15746065#15746065)

# android - 将所选项目从对话框交换到列表视图

> ID：15071695
> 
> 赞同：0
> 
> 时间：2013-02-25T16:32:47.503
> 
> 标签：android, android-layout, listview, dialog, android-alertdialog

我正在尝试将项目从 Dialog 交换到 ListView。举例来说，我有一个清单。播放器 1、播放器 2 和播放器 3。一旦我从列表中选择了一个项目，比如说播放器 1。对话框与播放器 2 和播放器 3 一起打开。从对话框中选择播放器 3 后。列表应该类似于玩家 3、玩家 2、玩家 1。

ListView 项目开始顺序：

玩家 1 玩家 2 玩家 3

对话顺序：玩家 2 玩家 3

交换后

玩家 3 玩家 2 玩家 1

如何才能做到这一点？任何算法或示例代码都会受到赞赏。谢谢你。

如果我错了，请纠正我。

这就是我正在尝试的。

```
 public void onClick(View v) {

                 final Dialog dialog = new Dialog(getActivity());
                    dialog.setContentView(R.layout.custom);
                    dialog.setTitle(playerData.getDisplayPlayerName());
                    final ListView wrActivePlayerList = (ListView) dialog.findViewById(R.id.activePlayerListName);
                    final ArrayAdapter<String> activePlayer = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, qbActivePlayer);
                     wrActivePlayerList.setAdapter(activePlayer);

                      wrActivePlayerList.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                          public void onItemClick(AdapterView<?> arg0, View arg1,
                                  int arg2, long arg3) {
                              // TODO Auto-generated method stub
                              System.out.println("Item Clicked");
                                TextView playerName = (TextView)playerDataView.findViewById(R.id.playername);
for (int i = 0;i < ((ViewGroup) playerDataView).getChildCount(); i++)
                                    {
//                                             TextView txtView = (TextView)((ViewGroup) playerDataView).getChildAt(i); //(TextView) ((ViewGroup) playerDataView).getChildAt(i);
                                        TextView txtView = (TextView)playerDataView.findViewById(R.id.widget_lineupview_playerdata_playername);
                                       if (txtView != null)
                                       {
                                           if (txtView.getText() == qbActivePlayer[arg2])
                                           {
                                               txtView.setText(playerData.getDisplayPlayerName());
                                           }
                                       }
                                    }                                       playerName.setText(wrActivePlayer[arg2]);
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:04:13.107

我认为您需要更改主列表中元素的位置。当您选择第一个和第二个元素时，第一个位置需要放置第二个元素，第二个元素放置在第一个位置。当您在列表上交换位置后，只需重新创建一个新的列表视图。

示例代码：

MainActivity.java

```
public class MainActivity extends ListActivity {
ArrayList<String> values = new ArrayList<String>();

public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        values.add("Android");
        values.add("iPhone");
        values.add("WindowsMobile");        
    } 
```

```
@Override
    protected void onResume() {
        super.onResume();
        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;String&gt;(this,
                R.layout.rowlayout, R.id.label1, values);
        setListAdapter(adapter);
    } 
```

```
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        String item = (String) getListAdapter().getItem(position);
        values.remove(position);
        //here I put item on 0 position
        values.add(0, item);
        Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();
        onResume();
    }
} 
```

行布局.xml

android:layout_width="wrap_content"

android:layout_height="wrap_content" >

```
 &lt;ImageView
            android:id="@+id/icon" 
            android:layout_width="22px" 
            android:layout_height="22px" 
            android:layout_marginLeft="4px" 
            android:layout_marginRight="10px" 
            android:layout_marginTop="4px" 
            android:src="@drawable/ic_launcher" >
        &lt;/ImageView&gt; 
```

```
&lt;TextView
        android:id="+id/label1" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="+id/label" 
        android:textSize="20px" >
    &lt;/TextView&gt;
</LinearLayout> 
```

# data-binding - 我正在使用backbone.stickit 进行模型绑定。如何将预填充的选择与模型绑定？

> ID：15071699
> 
> 赞同：0
> 
> 时间：2013-02-25T16:33:09.260
> 
> 标签：data-binding, backbone.js, backbone-stickit

我有一个带有选项的表单。我想使用backbone.stickit 将它绑定到模型，但是文档显示了如何在绑定配置上填充选择。我找不到一种简单的方法将模型与我的预填充选择绑定。

这是我的html

```
<div id="main">
    <form id="formulario">
        <input id="test1" type="text" />
        <select id="test2">
            <option value="0">a</option>
            <option value="1">b</option>
        </select>
    </form>
    <div id="value-test1"></div>
    <div id="value-test2"></div>
</div> 
```

这是一个基于文档的工作示例，但不是我需要的

```
var Model = Backbone.Model.extend({});
var View = Backbone.View.extend({
  el: $('#main'),
  bindings: {
    '#test1': 'test1',
    '#value-test1': 'test1',
    '#test2': {
      observe:'test2',
      selectOptions: {
        collection: function() {
          return [
            {value: 0, label:'a'},
            {value: 1, label:'b'}
          ];
        }
      }
    },
    '#value-test2': 'test2'
  },
  render: function() {
    this.stickit();
  }
});

var model = new Model({test1: 'test', test2: 0});
var view = new View({model: model}).render(); 
```

[http://jsfiddle.net/camilosw/nDjHh/](http://jsfiddle.net/camilosw/nDjHh/)

我尝试使用 jquery 从绑定配置上的选择中获取选项值，但不起作用

```
var Model = Backbone.Model.extend({});
var View = Backbone.View.extend({
  el: $('#main'),
  bindings: {
    '#test1': 'test1',
    '#value-test1': 'test1',
    '#test2': {
      observe:'test2',
      selectOptions: {
        collection: function() {
          options = $("#test2 option").map(function(){
            return {value: this.value, label: this.text};
          }).get();
          return options;
        }
      }
    },
    '#value-test2': 'test2'
  },
  render: function() {
    this.stickit();
  }
});

var model = new Model({test1: 'test', test2: 0});
var view = new View({model: model}).render(); 
```

[http://jsfiddle.net/camilosw/2EYV7/2](http://jsfiddle.net/camilosw/2EYV7/2)

它有效，但我认为它会在有很多选择的表格上一团糟

```
window.options = $("#test2 option").map(function(){
    return {value: this.value, label: this.text};
}).get();

var Model = Backbone.Model.extend({});
var View = Backbone.View.extend({
  el: $('#main'),
  bindings: {
    '#test1': 'test1',
    '#value-test1': 'test1',
    '#test2': {
      observe:'test2',
      selectOptions: {
        collection: function() {
          return window.options;
        }
      }
    },
    '#value-test2': 'test2'
  },
  render: function() {
    this.stickit();
  }
});

var model = new Model({test1: 'test', test2: 0});
var view = new View({model: model}).render(); 
```

[http://jsfiddle.net/camilosw/Y3aEF/1](http://jsfiddle.net/camilosw/Y3aEF/1)

将预填充选择绑定到模型的最佳方法是什么？

我只尝试使用backbone.stickit，使用另一个库更容易吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:37:33.057

Stickit 实际上将值作为数据绑定到选择选项，而不是使用 value html 属性。这背后的原因是，在富应用程序中，您经常希望将不同类型的数据用于选项值。例如，您可能需要一个选项来表示一个 JavaScript 对象或数组，这不是一个容易序列化为 html 属性的值；或者您可能希望将属性值分配给数字 2，但由于类型强制，当它保存为属性时，它将被转换为字符串“2”。此外，由于 Stickit 将解析/拥有选择选项，因此让 Stickit 渲染选项而不是在两个地方渲染/处理它是有意义的（更不用说在模板中迭代是丑陋的）。

也就是说，这个请求很常见，我确信支持预渲染的选择选项。你能开一个[新的问题](https://github.com/NYTimes/backbone.stickit/issues/new)，我会在接下来的几天内得到一些关于主人的东西吗？

**编辑**：现在正在积极[开展这项工作](https://github.com/NYTimes/backbone.stickit/issues/48)。

# java - 我可以用新的字节码重新加载一个类吗？

> ID：15071701
> 
> 赞同：4
> 
> 时间：2013-02-25T16:33:14.660
> 
> 标签：java, bytecode

是否可以以某种方式在类加载器中重新加载类字节码实现？我正在尝试在运行时向类添加方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:53:17.120

不，您不能在任何类加载器中*重新加载类。*

您可以做的是编写并使用一个自定义类加载器来加载该类的第一个版本。当你想更新类时，你处理第一个类的每个实例，它的 Class<> 对象的每个实例，以及加载第一个版本的类加载器。这是在 JVM 中卸载类的唯一方法——当 GC 收集所有这些东西（类的实例、Class<> 对象和加载类的 ClassLoader 的实例）时，它将被卸载。

然后，您实例化一个新的类加载器并加载您的类。

这类似于 Servlet 容器（例如 Tomcat）动态加载和卸载应用程序。

如果你只是想动态地添加方法，有一个类似的、非常有趣的方法，我之前使用过：你可以使用与类加载器关联的 Java Compiler API。您将类的“代码”传递给您的类加载器，它将调用 Java 编译器（如果需要，可以在内存中：您不需要写入磁盘上的任何文件），并使用类加载器来加载编译后的字节码。在任何情况下，如果你想卸载像这样加载的类，你将不得不丢弃类加载器，就像我上面描述的那样。

# java - 使用 Android 模拟器进行 USB 主机调试

> ID：15071702
> 
> 赞同：2
> 
> 时间：2013-02-25T16:33:15.767
> 
> 标签：java, android, eclipse

我需要测试我的自定义 USB 外围设备，但我缺少支持 USB 主机的合适手机，Android 模拟器是否足以让我测试我的 USB 外围硬件？

**更新：**

我意识到 Android-x86（带有 VirtualBox 或 Vmware 播放器）可以用于此目的，但仍不确定到什么程度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:38:21.537

根据我的经验，模拟器不支持 USB 连接。

查看[此](https://stackoverflow.com/questions/7875061/connect-usb-device-to-android-emulator)内容以获取更多信息。

编辑：根据我的研究，三星 Galaxy 2 (7.0") 是三星 Galaxy 2 (7.0")，根据我的研究，三星 Galaxy 2 (7.0") 是支持 USB 主机模式的最便宜的优质 Android 平板电脑之一。现在 Nexus 7 确实支持一些主机模式，但它不支持内存设备，例如闪存我相信这是由于谷歌/华硕设置的软件限制，因为他们也没有在 Nexus 7 上提供 microSD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T04:27:20.330

本[教程](http://android.serverbox.ch/?p=549)展示了如何从 Nexus 与 Arduino 进行通信。

大约一年前，我能够通过三星 Galaxy Nexus I9250 的 USB 主机与定制板通信。

我不确定模拟器是否支持它。

# jquery - 切换焦点/模糊类

> ID：15071706
> 
> 赞同：0
> 
> 时间：2013-02-25T16:33:21.300
> 
> 标签：jquery, focus, toggle, keyup

我有四个列表项显示为用户选择的结果。当用户单击其中一项时，类从“.xx”更改为“.yy”（更改背景颜色）。我在最后一个 li 之外还有许多文本输入框。当输入框有焦点和/或框中有文本时，我希望能够将最后一个 li 的类从 .xx 更改为 .yy 。如果没有文本或焦点，则将 li 类更改回 .xx。

这是HTML：

```
<li class="xx lastitem">
    </li>

<span class="iknow-form">
   <input type="text" class="iknow-input" name="entry_name">
   <input type="text" class="iknow-input" name="entry_street">
   <input type="text" class="iknow-input" name="entry_city">
   <input type="text" class="iknow-input" name="entry_state">
</span> 
```

我尝试了一些不同的东西，但似乎没有任何效果。

```
$('input.iknow-input').bind('focus blur', function () {
    $(this).find('.lastitem').toggleClass('yy').toggleClass('xx');
}); 
```

我知道还必须有一些 keyup 组件，但我不确定如何合并它。任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:55:53.717

**更新**

我在其中一个选择器中错过了一个句点。我还稍微整理了一下代码。这确实有效。我知道我上次说过，但是大声笑。我又检查了一遍。

CSS：

```
<style type="text/css">
  .yy {
    background-color:#FFC;
  }
</style> 
```

HTML：

```
<ul>
  <li class="xx lastitem">
  </li>
</ul>

<span class="iknow-form">
   <input type="text" class="iknow-input" name="entry_name">
   <input type="text" class="iknow-input" name="entry_street">
   <input type="text" class="iknow-input" name="entry_city">
   <input type="text" class="iknow-input" name="entry_state">
</span> 
```

jQuery：

```
$(function(){

    $('input.iknow-input').focus(function(){
        turnOn();
    });

    $('input.iknow-input').blur(function(){

        $("input.iknow-input").each(function(){
            if ($(this).val() != ""){
                $(this).addClass("hasText");
            }
            else {
                if ($(this).hasClass("hasText")){
                    $(this).removeClass("hasText");
                }
            }
        });

        if ($(".iknow-input.hasText").length){
            turnOn();
        }
        else {
            turnOff();
        }

    });

    function turnOn(){
        $(".lastitem").removeClass("xx");
        $(".lastitem").addClass("yy");
    }
    function turnOff(){
        $(".lastitem").removeClass("yy");
        $(".lastitem").addClass("xx");
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:51:29.337

应该

```
$('.lastitem').toggleClass('yy').toggleClass('xx'); 
```

代替

```
$(this).find('.lastitem').toggleClass('yy').toggleClass('xx'); 
```

# asp.net - 请求具有匿名身份验证的文件夹时，IIS 挂起

> ID：15071710
> 
> 赞同：1
> 
> 时间：2013-02-25T16:33:24.827
> 
> 标签：asp.net, iis-7, windows-authentication

我最近更改了一个项目的前端，以使用 Windows 身份验证。但我仍然希望后端使用表单身份验证，我想我在某处读到不可能同时使用两种身份验证方法。但我似乎有它的工作，排序。

我正在使用 umbraco v4.7.2 - 对于那些不知道这个 CMS 的人来说，它基本上就像任何其他 CMS 一样，应用程序的后端是 umbraco“后台”，基本上只是一个隐藏在一个名为“ ~/umbraco/" 此文件夹在 web.config 中配置了自定义成员资格提供程序。

前端站点使用具有角色/组限制的 Windows 身份验证自动对用户进行身份验证。这非常快，没有问题。但是当我尝试访问配置为启用匿名访问的 umbraco 文件夹时，IIS 只会挂起至少一分钟，然后将我发送到登录页面。

在最初的挂起之后，我可以很好地浏览后端，但是如果我离开后端，转到应用程序的前端，然后再回到后端，我就会再次挂起。等等

我尝试从 Visual Studio 调试代码，但我得到的只是一些晦涩的反汇编，我无法理解。

编辑：这很奇怪，因为请求文件夹“umbraco”非常慢，但是在等待并被重定向到“umbraco/login.aspx”之后，刷新此页面或 umbraco 中的任何其他页面一点也不慢。但是请求文件夹“umbraco/”仍然很慢。

提琴手

```
 ServerGotRequest:    10:09:21.352
  ServerBeginResponse: 10:11:11.961
  GotResponseHeaders:  10:11:11.961
  ServerDoneResponse:  10:11:11.961 
```

在 ServerGotRequest 之后，某些东西使 IIS 挂起。我将尝试创建另一个具有相同配置的文件夹，然后看看是否也会发生这种情况。

有没有人知道可能导致这种情况的任何线索？

谢谢 ：）

# sql - 如何在 SQL 过程中实现 while 循环？

> ID：15071711
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:33:27.180
> 
> 标签：sql, stored-procedures

我对 SQL 过程很陌生。我有一个要求，我需要根据过去的日期收集每周报告。

我有 2 列说名称和时间戳。

现在，该报告详细说明了在一周的一天中找到该名称的次数。

我可以每天获取它，但不确定是否可以每周获取它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:47:07.697

您没有指定 RDBMS。但是，SQL 查询很容易支持您想要做的事情：

```
select name,
       sum(case when timestamp "during the time period" then 1 else 0 end)
from t
group by name 
```

我将“期间”放在引号中，因为这因数据库而异，您并没有真正阐明您的意思。不过，建议是在 SQL 中执行此操作。

# javascript - 扩展 jquery load() 函数以在 div 中显示微调器

> ID：15071712
> 
> 赞同：2
> 
> 时间：2013-02-25T16:33:28.530
> 
> 标签：javascript, jquery, jquery-load

有没有办法改变 .load 行为，以便它在任何正在加载数据的 div 中加载一个微调器？

例子

```
<div class='content lside'></div>
<script>
    $(document).ajaxStart(function() {
        $('body').append('<div class="notice" style="position:fixed;top:40%;left:30%;z-index:99999;"id="loadingspin">loading</div>');       });
    $(document).ajaxStop(function() {
        $('#loadingspin').fadeOut().remove();
    });
    $('.content').load("<?=base_url();?>booking/<?=$day?>");
</script> 
```

我使用上面的脚本。

但我真正想要的是，当 ajaxstart 时，$('.content') 的内容会被 spinner 替换，直到它完成加载新内容。

那么有没有一种方法可以扩展.load 来通过它自己来做到这一点并替换ajaxstart，所以只要$(div).load() 被称为a`$(div).html('spiner');`就会被触发。

如果没有，有没有办法 .ajaxstart 可以引用内容将加载到的 div ？

**请注意：**我目前在我所有网页的标题脚本中使用 .ajaxstart 和 .ajaxstop 来处理显示微调器的一般情况，但我想用 div 特定解决方案替换它/扩展它，该解决方案仍然可以在任何页面上工作而无需进一步编辑进入每一个ajax请求。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:59:15.727

可能这样的事情应该可以解决问题。覆盖 jQuery 的原型并保存旧函数。

```
(function(){
    var oldLoad = jQuery.fn.load;
    jQuery.fn.load = function( url, data, complete ){
        /*
         * do your stuff
         */
        oldLoad.call( jQuery, url, data, complete );
    }
})(); 
```

这会改变整个页面的全局可用`jQuery.load()`方法，因此即使其他脚本调用该方法，也应该执行“你的东西”，至少在你重新定义该函数被解析之后。

# forms - 如何让复选框控件表单提交属性？

> ID：15071713
> 
> 赞同：0
> 
> 时间：2013-02-25T16:33:29.247
> 
> 标签：forms, email, infopath, infopath2010

我正在整理一个非常基本的 InfoPath 2010 表单，该表单将在浏览器中填写（由未登录的用户），并在提交时生成一封电子邮件。我为其构建站点的客户希望用户能够选中一个框以标记他们是否希望在提交表单时将他们提供的电子邮件地址抄送。

我知道如何在提交时抄送电子邮件，但我还没有找到任何关于使用复选框来控制它的内容。我尝试过使用规则和提交按钮选项，但无法得到我想要坚持的东西。

我需要的是：如果用户选中一个框，他们将在提交时获得抄送，如果他们未选中该复选框，则他们不会收到任何电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:58:52.720

使用 InfoPath 表单背后的代码来完成此操作。获取后面代码的Form_Submit方法中与复选框关联的字段的XPath。如果该字段返回true，则继续并抄送，否则，不要抄送。

# objective-c - 将 UIImageView 中的手绘图变成蒙版

> ID：15071714
> 
> 赞同：1
> 
> 时间：2013-02-25T16:33:29.433
> 
> 标签：objective-c, uiimageview, cgcontext, cgimagemaskcreate

我正在制作一个应用程序，让用户在图像中绘制对象/人，然后我想充当蒙版以模糊图像的背景。

我正在使用以下代码来允许用户在图像视图上方的图像视图上绘制要操作的图像：

```
mouseSwiped = YES;
UITouch *touch = [touches anyObject];
CGPoint currentPoint = [touch locationInView:self.view];

UIGraphicsBeginImageContext(self.view.frame.size);
[self.drawImage.image drawInRect:CGRectMake(0,0,self.view.frame.size.width, self.view.frame.size.height)];
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), brush);
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeNormal);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), firstPoint.x, firstPoint.y);
CGContextSetFillColorWithColor(UIGraphicsGetCurrentContext(), [UIColor blackColor].CGColor);
CGContextFillPath(UIGraphicsGetCurrentContext());
CGContextStrokePath(UIGraphicsGetCurrentContext());

self.drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
[self.drawImage setAlpha:opacity]; 
```

这可以正常工作并达到我想要的结果，然后我可以在应用程序中按照我的意愿保存这个绘图图像。

但是，我希望能够将绘图制作成蒙版，以便我可以将其应用于原始图像和模糊图像，以使蒙版下的对象出现在焦点上。

有没有办法可以把图纸变成面具？

# string - 使用字符串的 Google 电子表格脚本

> ID：15071717
> 
> 赞同：13
> 
> 时间：2013-02-25T16:33:41.147
> 
> 标签：string, google-apps-script, google-sheets

我对如何在 Google Script 中使用“字符串”类型有疑问？

我有一列包含不同格式的网站，例如 http:/**/testsite.com/, http://**/www.sitetest.net/, dot.anothersite.com, http://**/anysite.net/index.html 等等。******

 ******所以我想自动将这些记录格式化为一个模板：sitename.domain（例如 http://**/testsite.com/ = testsite.com || http://**/www.sitetest.net/ = sitetest.net)****

 ****我通过这个脚本得到这个信息：

```
var sheet = SpreadsheetApp.getActiveSheet();
  var sheetName = sheet.getName();
  var restrictSheet = "Summary";
  if (sheetName != restrictSheet){ // I don't need to modify first sheet from my spreadsheet
    var sheetRange = sheet.getActiveRange();
    var sData = sheet.getRange("A3:A"); // column with sites
    var TextArray = sData.getValues();
  }else Browser.msgBox("wrong sheet");
} 
```

而且我不知道如何使用谷歌脚本中的字符串。例如，在 C++ 中，我可以使用 String.Find() 或 String.Mid() 等字符串函数。但我在 Google Scripts 中看不到相同的功能

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-26T04:42:19.117

嗯......我已经找到了我自己的问题的答案：D

Google Script 使用 JavaScript 中的 String 类，因此 JS 中的函数和方法也适用于 Google Scripts..

[http://www.w3schools.com/jsref/jsref_obj_string.asp](http://www.w3schools.com/jsref/jsref_obj_string.asp)

也许它会帮助某人。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-11-25T14:03:50.840

可能有点晚了。。

但很高兴知道许多常见的字符串对象方法在 Google App Script 中不起作用**。**例如**.endsWith**、**.includes**等。

检查这个stackoverflow[问题](https://stackoverflow.com/q/39669460/2637998)。

这里有一些测试来验证

```
function stringEndsWithTest(){
  var a = "abc@example.com";
  SpreadsheetApp.getUi().alert('endsWith method on a string in google app script '+ a.endsWith('.com')); 
}

function stringIncludesTest(){
  var a = "abc@example.com";
  SpreadsheetApp.getUi().alert('includes method on a string in google app script '+ a.includes('.com')); 
} 
```

我在写这个答案的时候遇到了这个错误

> TypeError：找不到对象 abc@example 中包含的函数。（第 19 行，文件“main”）

作为上述方法的替代方法，对我有帮助的是“indexOf”方法

```
function stringIndexOfTest(){
  var a = "abc@example.com";
  SpreadsheetApp.getUi().alert('indexOf method on a string in google app script '+ a.indexOf('.com')); 
} 
```

我希望它可以帮助某人。**********

# c++ - 如何在 C++ 中将字符串打印到控制台

> ID：15071722
> 
> 赞同：28
> 
> 时间：2013-02-25T16:34:02.063
> 
> 标签：c++, console, cout

我试图在 C++ 控制台应用程序中将字符串打印到控制台。

```
void Divisibility::print(int number, bool divisible)
{
    if(divisible == true)
    {
        cout << number << " is divisible by" << divisibleBy << endl;
    }
    else
    {
        cout << divisiblyBy << endl;
    }
} 
```

我有正确的包含等，我相信这个错误只是我根本不知道如何在 C++ 中打印到控制台，我想这不是这样做的方法

编辑：抱歉忘了提到 divisiblyBy 是字符串

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-25T17:23:59.820

是的，可以将字符串打印到控制台。

```
#include "stdafx.h"
#include <string>
#include <iostream>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    string strMytestString("hello world");
    cout << strMytestString;
    return 0;
} 
```

stdafx.h 与解决方案无关，其他一切都是。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-05-14T00:01:49.390

您所要做的就是添加：

```
#include <string>
using namespace std; 
```

在顶部。（顺便说一句，我知道这是在 2013 年发布的，但我只是想回答）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-24T08:48:15.357

> “Visual Studio 不支持 std::cout 作为非控制台应用程序的调试工具”
> [——来自[Marius Amado-Alves](https://stackoverflow.com/questions/16703835/visual-studio-how-can-i-see-cout-output-in-a-non-console-application/19095301#19095301)对“*如何在非控制台应用程序中查看 cout 输出？* ”的回答]

这意味着如果你使用它，Visual Studio 在“输出”窗口中什么也不显示（在我的情况下是 VS2008）

# javascript - 由于javascript，保存按钮不保存

> ID：15071724
> 
> 赞同：0
> 
> 时间：2013-02-25T16:34:06.437
> 
> 标签：javascript, jquery, button

我的保存按钮有问题。为我的按钮应用指定的 JavaScript 时，它不会保存信息。但是，如果我删除了 JavaScript，则该按钮可以正常工作并很好地保存信息。

```
(function ($) {

Views.Accounts = {
    AddSaveBtnEvents: function () {
        $(".savebtn").attr('disabled', 'disabled');

        $("#Username,#ProfileName").keyup(function(event) {
            $(event.target).siblings('.savebtn').removeAttr('disabled', true);
        });

            $(".savebtn").click(function () {
            $(this).attr('disabled', 'disabled');
        });
    } 
 };

$.views.Accounts.AddSaveBtnEvents();

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:13:26.793

在做了一些研究后，我解决了自己的问题——实际上我必须传入按钮及其类型：

```
(function ($) {

Views.Accounts = {
    AddSaveBtnEvents: function () {
        $('button[type=submit]').attr('disabled', 'disabled');

        $('#Username,#ProfileName').keyup(function(event) {
            $(event.target).siblings('button[type=submit]').removeAttr('disabled');
        });

        $('button[type=submit').click(function () {
            $(this).attr('disabled', 'disabled');
        });
    } 
};

$.views.Accounts.AddSaveBtnEvents();
})(jQuery); 
```

# mysql - MySQL以不同的方式使用Count

> ID：15071726
> 
> 赞同：0
> 
> 时间：2013-02-25T16:34:17.640
> 
> 标签：mysql, sql, database

我研究过这段代码：

```
select *,
  year(curdate())-year(dbirth) - (right(curdate(),5) < right(dbirth,5)) as age 
from       resident_info 
having age = 18; 
```

但我想要的是在获得所有已经 18 的信息之后，我想计算它们。有什么办法可以同时输入两个查询或任何解决方案来解决我的问题？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:37:04.623

除非我遗漏了什么，如果你需要`count`这些，那么你可以使用：

```
select count(*)
from
(
  select *,
   year(curdate())-year(dbirth) - (right(curdate(),5) < right(dbirth,5)) as age 
  from       resident_info 
 having age = 18
) src 
```

如果要从`resident_info`和中返回所有数据`count`，则可以使用`CROSS JOIN`：

```
select *, 
   year(curdate())-year(dbirth) - (right(curdate(),5) < right(dbirth,5)) as age,
   src.Total
from resident_info 
cross join
(
    select count(*) Total
    from
    (
        select year(curdate())-year(dbirth) - (right(curdate(),5) < right(dbirth,5)) as age 
        from  resident_info 
        having age = 18
    ) x
) src
having age = 18 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:38:35.940

这可能会有所帮助。

```
select temp.*,
   year(curdate())-year(dbirth) - (right(curdate(),5) < right(dbirth,5)) as age 
       FROM resident_info AS temp
       WHERE age = 18; 
```

# sql - 使用 SQL 从两个单独的表返回输出

> ID：15071730
> 
> 赞同：-2
> 
> 时间：2013-02-25T16:34:28.013
> 
> 标签：sql, postgresql

我有两张桌子`products`和`assets`. 它们由一张桌子连接起来`assets_products`。

我需要返回一个表，其中包含 和 中的所有行`products`，`assets`同时还显示两者的关联行数`assets_products`。

并非所有产品都有资产，反之亦然，我需要用零计数来展示这一点。

例如：

```
product   asset    count
 foo        x        1
 bar        x        0
 foo        y        2
 bar        y        1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:11:44.390

```
select products.product,
       assets.asset,
       COUNT(assets_products.id) as count
from assets
cross join products
left join assets_products
    on (assets_products.asset_id = assets.id and
        assets_products.product_id = products.id)
group by products.product, assets.asset 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:08:41.443

```
select p.product,a.asset,count(*)
from product p
full outer join product_asset pa 
on pa.product_id=p.product_id
full outer join asset a
on a.asset_id=pa.asset_id
group by p.product_id,a.asset_id 
```

# php - 超过 100 个表的大规模 SQL 查询

> ID：15071732
> 
> 赞同：2
> 
> 时间：2013-02-25T16:34:29.107
> 
> 标签：php, mysql, sql, xml, database

我最近被要求为网站的营销模块制作一个简单的模块，我被要求使用可通过 MySQL 数据库访问的原始数据生成一组非常具体的结果。现在一开始我认为这是非常直接的，但是当面对这些桌子时，我意识到我需要改变我的方法。

我面临的问题是，我需要的数据是用户在浏览网站的特定部分时的操作日志。用户的每一个动作从登录到退出都是登录的，每天访问网站的人数只允许这个系统运行大约2天，然后将数据归档到另一个表中，我们总共有100个表加上现场直播，让我可以随时使用大约 202 天的数据。

所以这是我的问题。

随着这些表存储的数据量和存档表的绝对数量可能限制或可能不限于 100，并且客户希望根据特定页面的操作将所有数字显示在屏幕上，您将如何推荐打算这样做吗？

根据数据库设置，直接使用 SQL 查询可能会也可能不会，所以我考虑了从 XML 到使用基于页面和数据的 chron 将数据序列化为文件结构的一些选项，但最终我不是 100%我应该走的路线，所以我想问一下，有人有更好的主意吗？如果是这样，请分享。

在此先感谢所有回复的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:52:36.907

如果您想查询自己的数据，听起来您正在进入需要进入数据仓库的领域。这意味着您希望对数据执行 ETL 作业，以将其转换为更有利于报告查询的数据库模式（星型模式、雪花模式等）。

就个人而言，我会考虑利用其他一些系统（如 Google Analytics）并开始将自定义数据记录到其中的方法。这样一来，Google 就可以维护基础架构，并且您可以获得所需的所有报告数据。您可以使用 Google Analytics 创建转换漏斗和大多数您需要的东西，但是请注意，您必须花大量时间来实际配置代码以将自定义事件、标签等发送到 Google 系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:44:58.557

You don't want to query this data directly. You want to create intermediate tables that have the information that you need now, and then some.

The exact format depends on the nature of the questions. For instance, it might be appropriate to have one record for each "session", with columns describing what happens in the session. Or, if you are only interested in customers, you might make a customer signature, with a bunch of values.

One of the challenges is that the data goes over boundaries between dates. So, you will have open "logins" in one table versus another. How much of a problem this poses once again depends on how the data will be used. However, you should think about strategies for ealing with it.

If you have lots of users with lots of steps on a web site, going against all the data directly would be, shall I say, fun. Well, if you take a long vacation while the system processes the data, then it might actually be fun.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T16:43:10.537

您可以尝试使用缓存的概念。这样，您可能不需要每次都从表中获取数据。

# jquery - jQuery - 选择包含自定义数据的元素

> ID：15071736
> 
> 赞同：1
> 
> 时间：2013-02-25T16:34:37.870
> 
> 标签：jquery, html, css-selectors, jquery-data, custom-data-attribute

我有几个元素，比如

```
<p data-lang-bg="Bulgarian" data-lang-en="English" >Text</p>
<p data-lang-bg="Other bulgarian text" data-lang-en="Other english text" >Text 2</p> 
```

我在编写一个 jQuery 选择器时遇到了困难，它将选择所有具有以 data-lang**开头的数据属性的元素。**是否可以编写这样的 jQuery 选择器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:46:59.187

这是我能建议的最接近的。

将您的 HTML 更改为此结构：

```
<p data-lang='{"bg":"Bulgarian","en":"English"}' >Text</p> 
```

然后使用这个选择器：

```
$('[data-lang]') 
```

例如，您可以将您的语言值作为 maps 获取：

```
$('[data-lang]').each(function(){
    var localizations = $(this).data('lang'); // parses the map as JSON
    ... use the object, for example localizations['en']
}); 
```

在我看来，这似乎是使用自定义数据属性功能的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:51:29.857

使用自定义选择器：

```
$.expr[':']['data-lang'] = function (obj) {
    var data = $(obj).data();
    for (i in data) {
        if (data.hasOwnProperty(i)) {
            if (i.indexOf('lang') === 0) {
                return true;
            }
        }
    }
}; 
```

然后用 选择它们`$('p:data-lang')`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:49:55.490

这可能会有所帮助。

[http://code.google.com/p/jquery-list-attributes/](http://code.google.com/p/jquery-list-attributes/)

```
(function($) {
      // duck-punching to make attr() return a map
      var _old = $.fn.attr;
      $.fn.attr = function() {
          var a, aLength, attributes,   map;
          if (this[0] && arguments.length === 0) {
                    map = {};
                    attributes = this[0].attributes;
                    aLength = attributes.length;
                    for (a = 0; a < aLength; a++) {
                              map[attributes[a].name.toLowerCase()] = attributes[a].value;
                    }
                    return map;
          } else {
                    return _old.apply(this, arguments);
          }
}
}(jQuery)); 
```

资料来源：http: [//forum.jquery.com/topic/retrieving-all-attributes-of-a-given-element-and-their-values](http://forum.jquery.com/topic/retrieving-all-attributes-of-a-given-element-and-their-values)

# javascript - 用于显示导航的 API/代码

> ID：15071737
> 
> 赞同：0
> 
> 时间：2013-02-25T16:34:40.490
> 
> 标签：javascript, html, gps

java/javascript/html 中是否有任何 API/代码可以像 Google Navigation 一样使用 GPS/HTML5 Geolocation API 显示我的导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:37:03.703

谷歌地图公开了一个你可以使用的 api [https://developers.google.com/maps/](https://developers.google.com/maps/)

# internet-explorer - 通过 AJAX 调用页面时，IE 中的 Highcharts 中断 - jQuery 异常

> ID：15071748
> 
> 赞同：0
> 
> 时间：2013-02-25T16:35:13.443
> 
> 标签：internet-explorer, jquery, highcharts, highstock

我似乎遇到了通过 AJAX 加载页面的 IE 问题。我们使用 jQuery、Bootstrap、Select2 和 Highcharts，不确定这是否是由 Select2 ajax 调用引起的问题，但 AJAX 返回的无结果代码似乎没问题。当没有 highcharts 时，我得到一个 jQuery 异常，这似乎很好，所以我不确定问题出在哪里......

[http://jsfiddle.net/koconder/2aXem/5/](http://jsfiddle.net/koconder/2aXem/5/)

```
$(document).ready(function () {
    $('#country').select2();
    $('#keyword').select2();
    $('#device').select2();

    //$('#keyword').select2('val', 'NULL').select2('disable');
    //$('#device').select2('val', 'NULL').select2('disable');

    $('#app').select2({
        minimumInputLength: 0,
        placeholder: {
            title: "Select your app...",
            id: ""
        },
        ajax: {
            url: 'http://dev.adtrafik.com/static/t/ajax.php',
            dataType: 'json',
            data: function (term, page) {
                return {
                    term: term, // search term
                    page_limit: 10,
                };
            },
            results: function (data) {
                return {
                    results: data
                };
            }

        },
        initSelection: function (element, callback) {
            return $.getJSON('http://dev.adtrafik.com/static/t/ajax/select2_sample.php?post=3&id=' + (element.val()), null, function (data) {
                return callback(data);
            });
        }
    });
    $('#app').select2('data', {
        id: '48',
        text: 'Free Poker by PokerStars'
    })//.select2('disable')

    $('#country').change(function () {
        var id = $('#country').val();
        var dataString = 'post=1&id1=' + id;

        $.ajax({
            type: 'GET',
            url: 'http://dev.adtrafik.com/static/t/ajax.php',
            data: dataString,
            cache: false,
            success: function (html) {
                //$('#device').select2('enable');
                $('#device').html(html);
                $('#keyword').html('');
            }
        });
    });
    $('#device').change(function () {
        var id = $('#country').val();
        var id2 = $('#device').val();
        var dataString = 'post=2&id1=' + id + '&id2=' + id2;

        $.ajax({
            type: 'GET',
            url: 'http://dev.adtrafik.com/static/t/ajax.php',
            data: dataString,
            cache: false,
            success: function (html) {
                //$('#keyword').select2('enable');
                $('#keyword').html(html);
            }
        });
    });
    $('#keyword').change(function () {
       // $('#app').select2('enable');
    });
    $('#go').click(function (event) {
        var id = $('#country').val();
        var id2 = $('#device').val();
        var id3 = $('#keyword').val();
        var id4 = $('#app').val();
        var dataString = 'post=4&regionid=' + id + '&engineid=' + id2 + '&kwid=' + id3 + '&appid=' + id4;

        $.ajax({
            type: 'GET',
            url: 'http://dev.adtrafik.com/static/t/ajax.php',
            data: dataString,
            cache: false,
            success: function (html) {
                $('#chart').fadeOut(function () {
                    $('#chart').html(html).fadeIn();
                });
            }
        });
        event.preventDefault();
    });
}); 
```

它说 jQuery 的一些问题 exeption 以及 Series Options 是 null 这不是真的，我尽力通过 IE 进行调试（painnfull !!!）

我无法通过 jFiddle 加载相同的 AJAX，但代码在那里....我很乐意支付一些鱿鱼的帮助 :)。

文森特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:21:02.750

[https://github.com/highslide-software/highcharts.com/issues/514](https://github.com/highslide-software/highcharts.com/issues/514)

发现问题，数据系列和变量中以 ',' 结尾的 IE 错误。

# asynchronous - 异步 SMPP 附加数据

> ID：15071750
> 
> 赞同：0
> 
> 时间：2013-02-25T16:35:19.053
> 
> 标签：asynchronous, parameters, listener, smpp

我正在使用 Logica 的库和模拟器在 Java (JMS) 中实现 SMPP 客户端以进行测试。

有什么方法可以嵌入自定义数据（例如标签或内部 id），这些数据可以发送给提供者并在侦听器处接收回来？我尝试使用额外的可选参数没有成功，因为它们没有作为响应的一部分到达。

到目前为止，SMPP 响应 PDU 具有序列号和操作状态码。有没有办法嵌入更多信息，以便在侦听器收到响应时使用它？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:44:36.377

I realized after some research that it not possible to embbed custom information within SMPP pdu. It is up to the SMSC to return or not any additional information other than the status and sequence number in the pdu response.

# iphone - iOS 静态库和 NSInvalidArguementException 错误

> ID：15071753
> 
> 赞同：0
> 
> 时间：2013-02-25T16:35:22.803
> 
> 标签：iphone, ios, objective-c, xcode

我成功创建了一个包含 LRResty API 以及我自己的许多类、函数等的 iOS 静态库。为了尝试测试我的库，我将它与库头文件一起复制到了一个新的 Xcode 项目中。在这个新的 Xcode 项目中，我调用了我的一个函数，该函数最终调用了 LRResty 函数 [LRRestyClient get:withBlock:]。然后抛出异常 NSInvalidArguementException unrecognized selector sent to instance。有趣的是，我可以右键单击函数（在静态库中）和“跳转到定义”，它知道函数定义的位置。

我知道这个异常可能有很多原因，有谁知道它可能是什么？如果此描述过于模糊，我很乐意提供更多信息。或者任何人都可以向我解释如何将 LRResty 库成功打包到 iOS 静态库中？然后，我将使用此过程将其余的源文件打包在其中。

注意：我是创建静态库的新手，所以我可能忽略了一些非常简单的事情。我按照本教程创建了我的静态库： http: [//www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:40:54.503

问题是 LRResty 库使用类别的结果。为了解决这个问题，我必须将编译器标志 -ObjC 和 -all_load 添加到构建目标的*Other Linker Flags*部分。注意：这些编译器标志已添加到使用我创建的库的示例应用程序中。因此，任何使用我的库的应用程序都必须插入这些编译器标志。

以下是有关在 iOS 静态库中使用类别的更多信息：

> Objective-C 没有为每个函数（或方法，在 Objective-C 中）定义链接器符号 - >相反，链接器符号只为每个类生成。如果您使用 >categories 扩展预先存在的类，则链接器不知道将核心类实现的目标代码 > 和类别实现相关联。这可以防止在生成的应用程序中创建的对象 > 响应类别中定义的选择器。
> 
> **要解决此问题，针对静态库的目标链接必须将 -ObjC 选项 > 传递给链接器**。此标志使链接器加载库中定义 >Objective-C 类或类别的每个目标文件。虽然此选项通常会导致更大的可执行文件（由于 > 加载到应用程序中的附加目标代码），但它将允许成功创建包含现有类的类别的有效 Objective-C 静态库。
> 
> **重要提示**：对于 64 位和 iPhone OS 应用程序，有一个链接器错误会阻止 -ObjC 从仅包含类别且不包含类的静态库中加载对象文件。> 解决方法是使用 -all_load 或 -force_load 标志。

上面的信息是从这个[Stackoverflow](https://stackoverflow.com/questions/6820778/linking-objective-c-categories-in-a-static-library)答案中检索到的。

# wcf - 将时间对象传递给soapui并获得异常

> ID：15071757
> 
> 赞同：7
> 
> 时间：2013-02-25T16:35:30.020
> 
> 标签：wcf, soap, soapui

我使用 SoapUI 来模拟 WCF 服务。有一个对象。

```
CallBeginTime = {2/22/2013 8:22:54 AM}

Date: {2/22/2013 12:00:00 AM}
Day: 22
DayOfWeek: Friday
DayOfYear: 53
Hour: 8
Kind: Unspecified
Millisecond: 0
Minute: 22
Month: 2
Second: 54
Ticks: 634971181740000000
TimeOfDay: {08:22:54}
Year: 2013 
```

我通过它作为

`<nsb:CallBeginTime>{2/22/2013 8:22:54 AM}</nsb:CallBeginTime>` 我有一个例外

```
 <InnerException>
                    <HelpLink i:nil="true"/>
                    <InnerException i:nil="true"/>
                    <Message>The string '{2/22/2013 8:22:54 AM}' is not a valid AllXsd value.</Message>
                    <StackTrace>at System.Xml.XmlConvert.ToDateTime(String s, XmlDateTimeSerializationMode dateTimeOption)
                    at System.Xml.XmlConverter.ToDateTime(String value)</StackTrace>
                    <Type>System.FormatException</Type>
                 </InnerException> 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-25T17:47:32.290

我认为您需要使用这种格式：

YYYY-MM-DDTHH:MM:SS 其中 T 表示时间数据的开始

例如，您的示例数据将是：

2013-02-22T08:22:54

有关更多信息，请参阅 XSD[日期](http://www.w3schools.com/schema/schema_dtypes_date.asp)数据类型。

# ios6 - 设备处于横向但 [[UIDevice currentDevice] 方向] 报告纵向

> ID：15071759
> 
> 赞同：1
> 
> 时间：2013-02-25T16:35:34.347
> 
> 标签：ios6

我的项目设置表明横向左和右是支持的界面方向。当我的应用程序启动时，模拟器处于横向状态。

但是，此 NSLog 语句（在我的 App Delegate 或我的根视图控制器中）不会运行。

```
if (UIInterfaceOrientationIsLandscape([[UIDevice currentDevice] orientation])) {
    NSLog(@"I'm in landscape");
} 
```

知道为什么吗？

我正在使用iOS6.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:54:57.237

您可以使用委托

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  return UIInterfaceOrientationLandscapeLeft;
} 
```

使用此委托，应用程序将以横向模式或任何所需的方向模式呈现。

试试看。

# c# - 从基础实体访问子实体的属性

> ID：15071767
> 
> 赞同：4
> 
> 时间：2013-02-25T16:36:06.853
> 
> 标签：c#, entity-framework

一年多后，从我关于 SO（[从子实体的属性中过滤基本实体](https://stackoverflow.com/questions/9101971/filter-base-entity-from-child-entities-properties)）的第一个问题开始，我遇到了类似的问题。

我有一个抽象基类型

```
public abstract class Base{
} 
```

我有一些继承自此基本类型的子实体

```
public class Child1 : Base{
    public virtual NavigationProperty NavigationProperty {get; set; }
    public int NavigationPropertyId {get; set}
}

public class Child2 : Base{
    public virtual NavigationProperty NavigationProperty {get; set; }
} 
```

子实体都具有 NavigationProperty 属性。NavigationProperty 类就像

```
 public class NavigationProperty{
    public virtual ICollection<Child1> Child1s {get; set;}
    public virtual Child2 Child2s {get; set;}
 } 
```

Child2 和 NavigationProperty 之间存在一对一的映射关系；Child1 和 NavigationProperty 之间的一对多关系。为了使这些映射起作用，我正在使用 TPT。我的第一个问题是，我可以搬家吗

```
 public NavigationProperty NavigationProperty {get; set; } 
```

到基类？

我正在尝试一整天，但没有任何成功。如果不可能，我至少可以从基本类型访问 NavigationProperty。在所有孩子都有这个属性之后，我尝试了类似的东西

```
 public abstract class Base{
      public abstract NavigationProperty NavigationProperty {get; set; }
 }
 ....
 public abstract class Child2{
      public override NavigationProperty NavigationProperty {get; set; }
 } 
```

但是实体框架给出了以下错误。

```
 Sequence contains more than one matching element 
```

我可以使用类似的东西

```
 public abstract class Base{
      public abstract NavigationProperty GetNavigationProperty();
   }

  public abstract class Child2{
      public override NavigationProperty NavigationProperty {get; set; }
      public override NavigationProperty GetNavigationProperty(){
           return NavigationProperty;
      }
 } 
```

但我不想介绍这些额外的方法。他们有什么方法可以更优雅地实现这一目标吗？

编辑：

我忘了提到我已经尝试过放置`[NotMapped]`属性。我猜 EF`[NotMapped]`属性也是继承的，所以子属性也没有映射。

我不希望 Linq-to-Entites 能够工作。我不希望能够查询具有导航属性的基本实体。我只是想摆脱 GetNavigationProperty 和 SetNavigationProperty 方法。因此，当我尝试从基类访问 NavigationProperty 时，它应该被加载到内存中，仅此而已。然而，经过一周的努力，我认为这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:52:35.680

**编辑 x1**更新代码以避免属性名称的文字字符串

一点点反思似乎可以完成这项工作。班级设置；

```
public class NavigationProperty
{
    public NavigationProperty(string name)
    {
        Name = name;
    }

    public string Name { get; set; }
}

public abstract class Base
{
    public NavigationProperty NavigationProperty
    {
        get
        {
            string propertyName = MethodBase.GetCurrentMethod().Name.Replace("get_", string.Empty);
            PropertyInfo property = this.GetType().GetProperty(propertyName);
            if (property != null)
            {
                nav = (NavigationProperty)property.GetValue(this, new object[] { });
            }

            return nav;
        }
        set
        {
            string propertyName = MethodBase.GetCurrentMethod().Name.Replace("set_", string.Empty);
            PropertyInfo property = this.GetType().GetProperty(propertyName);
            if (property != null)
            {
                property.SetValue(this, value, new object[] { });
            }
        }
    }
}

public class Child1 : Base {
    public NavigationProperty NavigationProperty { get; set; }
    public int NavigationPropertyId { get; set; }
}

public class Child2 : Base{
    public NavigationProperty NavigationProperty { get; set; }
} 
```

在你的代码中；

```
Child1 c1 = new Child1() { NavigationProperty = new NavigationProperty("child1Value") };
Child2 c2 = new Child2() { NavigationProperty = new NavigationProperty("child2Value") };
Base somebase = c1;
NavigationProperty childNav = somebase.NavigationProperty;
// childNav.Name now contains "child1Value" 
```

这符合您的要求吗？它比使用方法有点笨拙，`abstract`但至少意味着您不必重构每个子类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:05:55.803

> 我可以移动吗
> 
> `public NavigationProperty NavigationProperty {get; set; }`
> 
> 到基类？

不，因为实体中的逆属性`NavigationProperty`指的是`Child1`and `Child2`，而不是`Base`。导航属性始终必须是*声明*类型的属性，并且不能移动到继承链中的基类型。

对于第二个问题，您可以尝试从映射中排除抽象导航属性：

```
public abstract class Base {
    [NotMapped]
    public abstract NavigationProperty NavigationProperty {get; set; }
} 
```

（或`modelBuilder.Entity<Base>().Ignore(b => b.NavigationProperty);`使用 Fluent API）。

您将无法`Base.NavigationProperty`在任何查询中使用，因为您不能将未映射的属性与 LINQ-to-Entities 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T01:46:29.050

在 Entity Framework 中找不到针对您的场景的支持，您可以尝试以下操作：

```
public interface IHasNavigationProperty {
    NavigationProperty NavigationProperty { get; }
}

public class Child1 : Base, IHasNavigationProperty {
    public NavigationProperty NavigationProperty { get; set; }
}

public class Base {
    public void AMethodThatDoesStuff() {
        if (this is IHasNavigationProperty) {
            var navigationProperty = ((IHasNavigationProperty)this).NavigationProperty;

            /* do stuff with NavigationProperty */
        }
    }
} 
```

# javascript - 图片按钮事件

> ID：15071771
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:36:30.660
> 
> 标签：javascript, html, javascript-events

我有以下代码，当单击图像按钮时应该会发出警告消息。但我无法正确执行它。请帮助我纠正我的错误！

```
<td>
   <input type="image" src="1.png" onclick="click()">
</td> 
```

JavaScript：

```
function click () { 
    alert("hello"); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:43:07.270

将函数的名称更改为`click`

# wsdl - 将 Web 服务请求参数设为必填字段

> ID：15071772
> 
> 赞同：5
> 
> 时间：2013-02-25T16:36:34.593
> 
> 标签：wsdl, xsd, jax-ws

这是 Jax-WS Web 服务的代码优先方法。

```
@WebService (serviceName = "MyInstallPhotoService")
@SOAPBinding(style=SOAPBinding.Style.DOCUMENT, use=SOAPBinding.Use.LITERAL, parameterStyle=SOAPBinding.ParameterStyle.WRAPPED)
public class MyInstallPhotoWS {

    private MyInstallPhotoManager myInstallPhotoManager;

    @Resource
    WebServiceContext context;

    @WebMethod(operationName = "getMyInstallPhoto")
    @WebResult(name = "PhotoRetrievalResponse", partName = "PhotoRetrievalResponse")
    public MyInstallPhotoResponse getBadgePhoto(@WebParam(name = "BadgeNumber", partName = "BadgeNumber") String badgeNumber, @WebParam(name = "LastName", partName = "LastName") String lastName) {
        MyInstallPhotoResponse myInstallPhotoResponse = new MyInstallPhotoResponse();
        try {
            // more code here
        } catch (Exception e) {
          e.printStackTrace();
        }
        return myInstallPhotoResponse;
     }
} 
```

在上面的代码中，MyInstallPhotoResponse 是在 xml 模式中定义的。SoapUI 请求生成了类似这样的内容

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Header/>
   <soapenv:Body>
      <rsw:getBadgePhoto>
         <!--Optional:-->
         <rsw:BadgeNumber>I180748-003</rsw:BadgeNumber>
         <!--Optional:-->
         <rsw:LastName>Jones</rsw:LastName>
      </rsw:getBadgePhoto>
   </soapenv:Body>
</soapenv:Envelope> 
```

根据 soapui 请求，如何使 BadgeNumber 和 LastName 成为必填字段，而不是可选字段。我试图将badgeNumber 和lastName 移动到对象myinstallphotorequest（在模式中定义）并要求这两个参数。这是我得到的soapui请求。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:myin="http://www.lexisnexis.com/myInstallPhotoService" xmlns:myin1="http://www.lexisnexis.com/schema/myInstallPhotoServiceTypes">
   <soapenv:Header/>
   <soapenv:Body>
      <myin:getMyInstallPhoto>
         <!--Optional:-->
         <myin:MyInstallPhotoRequest>
            <myin1:badgeNumber>?</myin1:badgeNumber>
            <myin1:lastName>?</myin1:lastName>
         </myin:MyInstallPhotoRequest>
      </myin:getMyInstallPhoto>
   </soapenv:Body>
</soapenv:Envelope> 
```

同样，我无法删除参数“MyInstallPhotoRequest”的 Optional。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T17:18:03.340

如果您检查 Web 服务的 WSDL 文件，则该参数应该具有 minOccurs=0。这就是 SOAPUI 请求将可选注释放在那里的原因。

请使用`@XmlElement(required=true)`注释您需要的 WebParam。

# c# - 如何将DataTable中的空数据设 置为空字符串

> ID：15071773
> 
> 赞同：1
> 
> 时间：2013-02-25T16:36:39.083
> 
> 标签：c#, database, ado.net, dataset, datarow

我用数据库中的数据填充`datatable`了对象，我需要检查其中一些是否存在`NULL`并将其设置为**空字符串**。
问题是某些数据`NULL`在数据库中，但它们在 DataTable中为**“0” 。**
我试图设置为`""`等，`String.EmptyString`但没有任何效果。

```
foreach (DataRow row in ds.Tables[0].Rows)
{
    foreach (DataColumn c in ds.Tables[0].Columns)
    {
        object value = row[c];

        if (value == DBNull.Value)
        {
            try
            {
                row[c] = ""; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:44:49.873

try changing to;

```
foreach (DataRow row in ds.Tables[0].Rows)
{
    foreach (DataColumn c in ds.Tables[0].Columns)
    {
        if (row.IsNull(c))
        {
            try
            {
                row[c] = string.Empty; 
```

The `row.IsNull(c)` check is more reliable than directly comparing to `DBNull.Value` as it can evaluate more than one thing as equivilent to `NULL` in the DB.

# c# - 具有另一个结构的固定大小数组的结构

> ID：15071775
> 
> 赞同：1
> 
> 时间：2013-02-25T16:36:46.317
> 
> 标签：c#, arrays, winapi, struct

如何在 C# 中声明一个具有另一个结构的固定大小数组的结构？我需要[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183375%28v=vs.85%29.aspx)声明以便它工作。或者如果我想要创建位图信息（-header），我的方法是否错误？

```
[StructLayout(LayoutKind.Sequential)]
public struct RGBQUAD
{
    public byte b;
    public byte g;
    public byte r;
    public byte reserved;
}

[StructLayout(LayoutKind.Sequential)]
public struct BITMAPINFO
{
    public BITMAPINFOHEADER bmiHeader;
    [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.LPStruct, SizeConst = 1)]
    public RGBQUAD[] bmiColors;
} 
```

**编辑：**我自己学到的是，`UnmanagedType.ByValArray`如果我分配 256 大小的 RGBQUAD 数组，将[BITMAPINFO](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183375%28v=vs.85%29.aspx)`SizeConst = 1`编组大小始终保持在 44 字节事件很重要。

**编辑 2：**但 SizeConst 不能小于实际数组大小，否则非托管代码可能会使应用程序崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:21:35.720

如评论中所述，在 C# 中，您无法在结构中创建固定大小的结构数组。

但这不是你想要的。在声明中

```
typedef struct tagBITMAPINFO {
    BITMAPINFOHEADER bmiHeader;
    RGBQUAD          bmiColors[1];
} BITMAPINFO, *PBITMAPINFO; 
```

`bmiColors`被声明为一个固定长度的数组，但它实际上是一个可变长度数组的占位符`RGBQUAD`。数组的实际长度取决于（[以稍微复杂的方式](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd183376%28v=vs.85%29.aspx)） 的值`bmiHeader.biClrUsed`。

在 C# 中如何处理这完全取决于您对`BITMAPINFO`结构所做的工作。

**更新**

我刚刚看到你的另一个问题。您正在传递`BITMAPINFO`to`SetDIBits`并且您的颜色表始终有 256 个条目。所以在声明中`BITMAPINFO.bmiColors`设置`SizeConst`为 256。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T16:33:13.727

不幸的是（鉴于 .net 的设计目标之一是促进与 COM 的互操作，恕我直言有点令人惊讶）.net 运行时除了独立`System.Array`对象或内置于`System.String`. 尽管 C# 提供`fixed`数组类型，但这些类型是使用指针算法以 .net 运行时无法真正理解且无法验证的方式进行操作的。

`a0`可以通过定义具有元素、`a1`、`a2`等的结构并编写使用 switch 语句或其他类似结构来访问其元素的索引属性来创建行为类似于固定大小数组的东西，但这样的结构很可能执行比普通数组慢得多。

如果您不需要使用`safe`代码（并且考虑到您正在与可能不受信任的托管代码进行互操作，“安全”代码可能不是考虑因素）我建议您定义`RGBQUAD`使用显式布局，以将 a 与您的其他数据重叠`int`，然后让您的其他结构包含 a`fixed int[whateverSize];`来保存 RGB 数据。它的索引访问器应该能够通过读取/写入其“int”成员`int`来相当有效地转换为。`RGBQUAD`

# jquery - jquery如何获取元素html加上textarea元素的文本

> ID：15071777
> 
> 赞同：0
> 
> 时间：2013-02-25T16:36:54.313
> 
> 标签：jquery

我会直截了当。我创建了一个 textarea 元素，我必须返回标签 html 加上里面的文本。

```
var elemField = $('<textarea></textarea>');
elemField.val('bla bla this is my textarea text');
//changing some properties
elemField.attr("disabled", "disabled");
elemField.width('95%'); 
```

找到了这个解决方案：

```
var elemFeldCode = elemField.clone().wrap('<p>').parent().html().toString(); 
```

输出：

```
"<textarea disabled="disabled" style="width: 95%;"></textarea>" 
```

期望的输出：

```
"<textarea disabled="disabled" style="width: 95%;">bla bla this is my textarea text</textarea>" 
```

任何人都可以帮助我以跨浏览器的方式抛出 jquery 吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:42:35.617

对于您想要的输出，您必须使用`.text()`将文本区域的内容设置为`.val()`不影响节点的 html。

```
elemField.text('bla bla this is my textarea text'); 
```

[**演示**](http://jsfiddle.net/mowglisanu/H5U3s/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:41:56.417

您可以显式添加它：

```
var elemFeldCode = elemField.clone().wrap('<p>').parent().html()
    .replace('</',elemField.val()+'</').toString(); 
```

# spring - 异常 org.springframework.validation.BeanPropertyBindingResult

> ID：15071779
> 
> 赞同：0
> 
> 时间：2013-02-25T16:36:56.823
> 
> 标签：spring, spring-mvc

我正在尝试使用 apache commons 上传图像，但在与我的实体绑定时出现异常。

表单对象

```
<sf:form action="${contextPath}client/saveClient" modelAttribute="client" method="POST"
                 enctype="multipart/form-data"> 
            <label>Add Logo</label><input type="file"  name='logo' /><br/>
        </sf:form> 
```

控制器

```
 @RequestMapping("/saveClient")
    public ModelAndView addClient(@RequestParam("logo") MultipartFile file, HttpSession request,
            @Valid Client client, BindingResult result, Model model) throws IOException {

        ModelAndView mvc = new ModelAndView();
        if (result.hasErrors()) {
            mvc.addObject("client", client);
            mvc.setViewName(MANAGECLIENT_PREFIX + "addclient");
            return mvc;
        } else {
            clientService.uploadImage(file, request);
            clientRepository.add(client);
            model.addAttribute("client", client);
            mvc.setViewName(MANAGECLIENT_PREFIX + "saveclient");
            return mvc;
        }
    } 
```

服务

```
public void uploadImage(MultipartFile file, HttpSession request) throws IOException {
    logger.info("Enter upload client logo");
    Utilities utilities = new Utilities();
    if (!file.isEmpty()) {
        String fileName = (utilities.getUniqueId() + file.getOriginalFilename());
        System.out.println("Image name: {" + fileName + "}");
        String contextPath = request.getServletContext().getRealPath("/");
        String filePath = contextPath + "\\WEB-INF\\clientlogo\\" + fileName;
        String validFileFormat = utilities.validFileFormat(fileName);
        if (!validFileFormat.isEmpty()) {
            BufferedImage src = ImageIO.read(new ByteArrayInputStream(file.getBytes()));
            File destination = new File(filePath);
            ImageIO.write(src, validFileFormat, destination);
            client.setLogo(fileName);
        }
    }
} 
```

实体

```
@Column(name = "logo")
private String logo; 
```

例外

```
Field error in object 'client' on field 'logo': rejected value [org.springframework.web.multipart.commons.CommonsMultipa
rtFile@58d51629]; codes [typeMismatch.client.logo,typeMismatch.logo,typeMismatch.java.lang.String,typeMismatch]; argumen
ts [org.springframework.context.support.DefaultMessageSourceResolvable: codes [client.logo,logo]; arguments []; default
message [logo]]; default message [Failed to convert property value of type 'org.springframework.web.multipart.commons.Co
mmonsMultipartFile' to required type 'java.lang.String' for property 'logo'; nested exception is java.lang.IllegalStateE
xception: Cannot convert value of type [org.springframework.web.multipart.commons.CommonsMultipartFile] to required type
 [java.lang.String] for property 'logo': no matching editors or conversion strategy found]}] 
```

我正在尝试将图像名称存储在数据库中，并将图像存储在应用程序目录中。我应该如何解决这种类型转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:57:42.597

这只是一个绑定错误 - 您的对象“客户端”具有不同类型的“徽标”属性。您可以忽略该特定错误。

利用：

```
if (result.hasErrors() && (result.getErrorCount()>1 || !result.hasFieldError("logo")) {
 ....
} 
```

含义：只有在出现超过 1 个错误（“logo”字段上总是有错误）或者您遇到的单个错误不是“logo”错误时，您才应该对错误做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:44:04.827

The exception says

> Cannot convert value of type [org.springframework.web.multipart.commons.CommonsMultipartFile] to required type [java.lang.String] for property 'logo': no matching editors or conversion strategy found]}]

Cause You have defined `@RequestParam("logo")` on `MultipartFile parameter`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-31T04:35:15.220

第 1 步：在表单标签中添加 enctype="multipart/form-data" 属性。

步骤2：注册一个MultipartResolver bean，并在配置文件/类中返回CommonsMultipartResolver，并确保bean名称必须为“multipartResolver”，默认情况下Spring使用方法名称作为bean名称。

第 3 步：创建数据库连接对象并将其注入 DAO 类。

第四步：使用注入的数据库连接使用JdbcTemplate查询数据库。

第 5 步：最后创建一个处理用户请求的控制器类。

```
 @Configuration
    @EnableWebMvc
    @ComponentScan(basePackages = { "org.websparrow.controller", "org.websparrow.dao" })
    public class WebMvcConfig {

        @Bean
        public InternalResourceViewResolver viewResolver() {

            InternalResourceViewResolver vr = new InternalResourceViewResolver();
            vr.setPrefix("/");
            vr.setSuffix(".jsp");

            return vr;
        }

        @Bean
        public MultipartResolver multipartResolver() {
            return new CommonsMultipartResolver();
        }

        @Bean
        public DriverManagerDataSource getDataSource() {

            DriverManagerDataSource ds = new DriverManagerDataSource();
            ds.setDriverClassName("com.mysql.jdbc.Driver");
            ds.setUrl("jdbc:mysql://localhost:3306/yourdatabase");
            ds.setUsername("root");
            ds.setPassword("");

            return ds;
        }

        @Bean
        public ImageDao getConnectionObject() {
            return new ImageDao(getDataSource());
        }
    }
    public class ImageDao {

        private JdbcTemplate jdbcTemplate;

        public ImageDao(DataSource dataSource) {
            jdbcTemplate = new JdbcTemplate(dataSource);
        }

        public int inserRecords(String name, Integer age, MultipartFile photo) throws IOException {

            byte[] photoBytes = photo.getBytes();

            String sql = "INSERT INTO STUDENT(NAME,AGE,PHOTO) VALUES (?,?,?)";

            return jdbcTemplate.update(sql, new Object[] { name, age, photoBytes });
        }
    }

    @Controller
    public class ImageController {

        @Autowired
        ImageDao imageDao;

        @RequestMapping(value = "/InsertImage", method = RequestMethod.POST)
        public ModelAndView save(@RequestParam("name") String name, @RequestParam("age") Integer age,
                @RequestParam("photo") MultipartFile photo) {

            try {
                imageDao.inserRecords(name, age, photo);

                return new ModelAndView("index", "msg", "Records succesfully inserted into database.");

            } catch (Exception e) {
                return new ModelAndView("index", "msg", "Error: " + e.getMessage());
            }
        }
    }
//Database
    CREATE TABLE `student` (
      `id` int(5) NOT NULL AUTO_INCREMENT,
      `name` varchar(30) DEFAULT NULL,
      `age` int(3) DEFAULT NULL,
      `photo` mediumblob,
      PRIMARY KEY (`id`)
    );**strong text**
//html form
<form action="InsertImage" method="post" enctype="multipart/form-data">

<pre>

    Name: <input type="text" name="name">

    Age: <input type="number" name="age">

    Photo: <input type="file" name="photo">

    <input type="submit" value="Submit">

</pre>

</form> 
```

# javascript - XDate vs Datejs

> ID：15071784
> 
> 赞同：4
> 
> 时间：2013-02-25T16:37:08.243
> 
> 标签：javascript, date, datetime

有人用过[XDate](http://arshaw.com/xdate/)或[datejs](http://datejs.com)吗？它们似乎都已经有一段时间没有开发了，而且它们似乎都没有一个好的版本（datejs 是“pre-alpha”，xdate 是 0.7 版）。

我需要做一些 javascript 日期操作（字符串 -> 日期对象，日期对象 -> 字符串，将时间/天/月添加到日期对象，并计算日期差异）。显然，使用本机 Javacript 日期对象，所有这些都是可能的，但这太痛苦了——我希望有人能对更好的 API 提出建议。这两个库看起来还不错，但我担心它们的年代和缺乏发展历史。

有没有人有使用这两个库中的一个或两个的经验？或者也许是一个更好的选择，可以满足我上面的需求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:39:21.347

我使用过 DateJS，但在午夜发现解析日期的问题。我不记得细节（大约 18 个月前），但由于他们主页上使用的版本与最新的“发布”（alpha）版本不同，我都尝试了。每个人都有不同的问题。这完全是解析，我没有看到任何格式化或操作问题。这很好。

看看[MomentJS](http://momentjs.com/)，它是更新的，并且似乎得到了积极和严格的维护（例如，在撰写本文时，仅两天前合并了一个拉取请求，并且有数千个自动化测试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T13:46:16.360

XDate 很棒；我更喜欢它，因为它的 API 与原生 Date 对象非常相似，并且可以互换工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-05T22:04:25.070

多亏了这篇文章，我发现了 moment.js .... 目前受到积极支持，这是一个很大的优势 .. 太棒了！！！

XDate 和 Date.js 现在都没有积极开发.. Date.js 是相当老的库.. （2007 或 2008）... 与 XDate 相同

# c++ - 返回类型的模板参数减少

> ID：15071785
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:37:12.113
> 
> 标签：c++, templates, std

我有这个功能：

```
std::vector<std::pair<std::vector<int>::iterator, std::vector<int>::iterator> > 
split(    const std::vector<int>& vector,size_t slices){

...

} 
```

并且由于它非常冗长，并且我将来可能需要拆分其他类型的向量，因此我想使其基于模板，但是这次尝试失败了：

```
 template<typename T> 
  std::vector<std::pair< std::vector<T>::iterator, std::vector<T>::iterator> >
  split( const std::vector<T>& vector, size_t slices) 

    ...

 } 
```

我可以看到有两个问题： 1 - 我不能使用矢量或地图或列表，只能使用矢量。2 - 我还没有很好地理解模板缩减的东西。

任何解释表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:42:35.810

> 1 - 我不能使用矢量、地图或列表，[...]

如果你想处理*所有的容器*，那么你不应该`std::vector`首先使用模板（你也不应该命名你的函数参数`vector`）：

```
template<typename C>
std::vector<std::pair<typename C::iterator, typename C::iterator>>
split(C const& cont, size_t slices)
{
    ...
} 
```

还要注意`typename`关键字的使用，这在指定限定的依赖类型名称时是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:43:00.770

```
template<typename T> 
  std::vector<std::pair< typename T::iterator, typename T::iterator> >
  split( const T& vector, size_t slices) 

    ...

 } 
```

你不见了`typename`，你可以替换容器的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:42:11.260

你错过了`typename`：

```
template<typename T>
std::vector<
    std::pair<
        typename std::vector<T>::iterator,
        typename std::vector<T>::iterator
    >
>
split( const std::vector<T>& vector, size_t slices)
{ /* ... */ } 
```

请参阅[在哪里以及为什么必须放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords/613132#613132)有关更多信息`typename`。

# python - Cython 中的向量分配

> ID：15071786
> 
> 赞同：6
> 
> 时间：2013-02-25T16:37:14.903
> 
> 标签：python, pointers, vector, cython

这是我的 cython 程序

```
cdef struct Node:
    int v
    Node* next
    Node* pre

def f(int N):
    cdef:
        vector[Node*] narray
        int i
    narray.assign(N, 0)
    for i in xrange(N):
        narray[i] = 0 
```

Cython 编译结果：

```
Error compiling Cython file:
------------------------------------------------------------
...
    cdef:
        vector[Node*] narray
        int i
    narray.assign(N, 0)
    for i in xrange(N):
        narray[i] = 0
             ^
------------------------------------------------------------

testLinkList.pyx:107:14: Compiler crash in AnalyseExpressionsTransform 
```

但我可以使用`push_back()`在向量末尾附加值或使用`int`而不是`Node*`. 怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-15T14:54:11.737

你使用的是什么版本的 Cython？0.20.1 版适用于我的代码：

```
# distutils: language=c++

from libcpp.vector cimport vector

cdef struct Node:
    int v
    Node* next
    Node* pre

def f(int N):
    cdef:
        vector[Node*] narray
        int i
    narray.assign(N, NULL)
    for i in range(N):
        narray[i] = NULL 
```

并使用此`setup.py`文件：

```
from distutils.core import setup
from Cython.Build import cythonize

setup(ext_modules=cythonize("test_vector.pyx")) 
```

# android - 未找到 Google Maps API 密钥

> ID：15071791
> 
> 赞同：0
> 
> 时间：2013-02-25T16:37:41.490
> 
> 标签：android, google-maps, google-maps-api-2

尝试使用适用于 Android 的 Google Maps v2 API，它一直告诉我找不到我的 API 密钥。我尝试过其他帖子的建议，但没有任何效果。我刚刚创建了一个新的 API 密钥来验证该密钥没有缺陷。我还使用了 Google 设置文档中指定的代码，但仍然无法正常工作。以下是所有相关文件。谢谢。

```
02-25 11:16:30.890: E/AndroidRuntime(2260): FATAL EXCEPTION: main
02-25 11:16:30.890: E/AndroidRuntime(2260): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.echofriendly/com.example.echofriendly.MainMapFragment}:     android.view.InflateException: Binary XML file line #2: Error inflating class fragment
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.os.Looper.loop(Looper.java:137)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.ActivityThread.main(ActivityThread.java:4745)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at java.lang.reflect.Method.invokeNative(Native Method)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at java.lang.reflect.Method.invoke(Method.java:511)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at dalvik.system.NativeStart.main(Native Method)  
02-25 11:16:30.890: E/AndroidRuntime(2260): Caused by: android.view.InflateException: Binary XML  file line #2: Error inflating class fragment
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.Activity.setContentView(Activity.java:1867)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at com.example.echofriendly.MainMapFragment.onCreate(MainMapFragment.java:11)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.Activity.performCreate(Activity.java:5008)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-25 11:16:30.890: E/AndroidRuntime(2260):     ... 11 more
02-25 11:16:30.890: E/AndroidRuntime(2260): Caused by: java.lang.RuntimeException: API key not found.  Check that <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="your API key"/> is in the <application> element of AndroidManifest.xml
02-25 11:16:30.890: E/AndroidRuntime(2260):     at maps.y.z.a(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at maps.y.z.a(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at maps.y.z.a(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at maps.y.ae.a(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at maps.y.bu.a(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at maps.y.p.onCreateView(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:107)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.os.Binder.transact(Binder.java:326)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onCreateView(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at com.google.android.gms.maps.MapFragment$b.onCreateView(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at com.google.android.gms.internal.d$4.a(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at com.google.android.gms.internal.d.a(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at com.google.android.gms.internal.d.onCreateView(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at com.google.android.gms.maps.MapFragment.onCreateView(Unknown Source)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:807)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1013)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.FragmentManagerImpl.addFragment(FragmentManager.java:1112)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.app.Activity.onCreateView(Activity.java:4664)
02-25 11:16:30.890: E/AndroidRuntime(2260):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680) 
```

活动：

```
package com.example.echofriendly;

import android.app.Activity;
import android.os.Bundle;

 public class MainMapFragment extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map_fragment);

}

} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment" /> 
```

显现：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<permission
    android:name="com.example.echofriendly.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.example.echofriendly.permission.MAPS_RECEIVE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

----
 <meta_data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="xxxxxx"/>

</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:45:11.267

错误消息中的有用提示说：

```
<meta-data android:name="com.google.android.maps.v2.API_KEY" 
           android:value="your API key"/> 
```

你的代码说：

```
<meta_data android:name="com.google.android.maps.v2.API_KEY"
           android:value="xxxxxx"/> 
```

指出不同？将您的更改`_`为`-`.

# process - 获取相关过程信息的最快方法是什么？

> ID：15071794
> 
> 赞同：0
> 
> 时间：2013-02-25T16:37:54.003
> 
> 标签：process

目前，我正在处理一个 Java 程序，在某些情况下，它在子进程中启动一个 Python 脚本，并通过标准输入将一堆信息传递给它，并通过标准输出检索输出。这个过程并不是慢得不能忍受，但如果它可以做得更快，那将是一个巨大的胜利。

我想知道是否有任何关于使用其他通信方法（可能是套接字？）来处理这种通信的基准。

提前致谢

# vim - Vim 隐藏高亮

> ID：15071808
> 
> 赞同：11
> 
> 时间：2013-02-25T16:38:39.067
> 
> 标签：vim, vim-syntax-highlighting

使用 vim 的隐藏功能`set cole=2`时，vim 隐藏 cchar 中配置的任何内容的适当文本，并使用 Conceal 组突出显示它。

我的问题是我使用 c/c++ 中的隐藏功能来替换`&&` `||`unicode ⋀ ⋁ 等操作，并且我还在 html 中使用 concel 替换文本实体，例如“ç” 到“ç”。

所以我在 ~/.vim/after/syntax/c.vim

```
hi clear Conceal 
```

并在 ~/.vim/after/syntax/html.vim

```
hi Conceal cterm=NONE ctermbg=NONE ctermfg=darkblue 
```

问题是这个设置是全局的。如果我打开 ac 文件，然后打开一个 html 文件，当我回到 c 文件时，Conceal 组会根据最后打开的缓冲区突出显示。

我的问题是：我可以将 Conceal 组设置为使用与 Conceal 不同的东西吗？如果没有，我怎样才能使突出显示特定于当前缓冲区（而不是全局）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T17:31:34.267

你不能。好吧，您可以设置`:autocmds`为根据当前缓冲区切换`Conceal`组的突出显示，但对于其他类型的非活动可见缓冲区，它仍然会关闭。一般来说，亮点组是全球性的，这不太可能改变。

为了解决您的困境，我会选择一个突出显示，`Conceal`因为它既不显眼，适合您的 C/C++ 使用，又在视觉上不同，可以显示替换的 HTML 实体。对我来说，完全清除`Conceal`突出显示不是预期用途。它应该始终提醒您，您所看到的*并不是*文本中的实际内容。

# ear - EAR 中的类路径资源问题与多次战争

> ID：15071809
> 
> 赞同：1
> 
> 时间：2013-02-25T16:38:40.413
> 
> 标签：ear

我们有一个具有单 EAR 和多 WAR 的应用程序，我们能够通过将它们放在各自的 WEB-INF/lib 文件夹中来解决 WAR 之间的常见类问题，但是当涉及到资源时，我们在类路径中有资源（例如 abc.xml )，这是耳中 WAR 所必需的。但是每个 WAR 的 abc.xml 内容会有所不同。由于环境特定 abc.xml ，我们不能将 abc.xml 保留在 WEB-INF/lib 或 WEB-INF/classes 中以将其加载到 WAR 类加载器。而且我也不能在类路径中保留具有不同名称的 abc.xml，因为它被第三方 jars 使用，它使用类路径上下文加载这个 abc.xml，如下所示

字符串 [] 路径 = {abc.xml} ; ctx = new ClassPathXmlApplicationContext(paths);

有没有办法将此资源加载到 WAR 的类路径中。？？？底线问题是，我们可以在 EAR 中为 WAR 设置不同的类路径吗？任何投入都受到高度赞赏。

谢谢坎比

# html - 采用动态方式来获取容器的高度？

> ID：15071814
> 
> 赞同：1
> 
> 时间：2013-02-25T16:38:53.097
> 
> 标签：html, css

我有一个嵌套在父元素中的链接元素的代码，类似于这样：

```
<div class="container">
    <div class="navbar">
        <li><a href="#" class="linkitem">Hello</a></li>
        <li><a href="#" class="linkitem">Hello</a></li>
        <li><a href="#" class="linkitem">Hello</a></li>
        <img src="img">
    </div>
</div> 
```

我想这样做，以便链接采用导航栏的高度，该高度由图像的高度和各种边距/填充属性决定。我想这样做，这样我就可以创建一些 CSS 来实现它，这样当链接悬停在上面时，看起来链接所在的导航栏部分的整个背景正在改变颜色，如下所示：

```
.navbar > li > a:hover {
background-color:red;
} 
```

但就目前而言，仅突出显示链接文本的小背景，而不是包含链接的导航栏的整个部分。我不想这样做，`li:hover`因为我只希望在选择实际链接文本时背景改变颜色。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:56:23.127

如果我正确理解了您的问题，那么解决方法很简单；只需应用于`display:block;`锚标签：

```
.navbar > li > a {
  display:block;   
} 
```

在这里查看：http: [//jsfiddle.net/DrTH9/](http://jsfiddle.net/DrTH9/)

**文档**

*   `display`MDN 上的CSS - [https://developer.mozilla.org/en-US/docs/CSS/display](https://developer.mozilla.org/en-US/docs/CSS/display)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T20:00:02.087

尝试这个：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <div class="container">
        <ul class="navbar">
            <li><a href="#" class="linkitem">Hello</a></li>
            <li><a href="#" class="linkitem">Hello</a></li>
            <li><a href="#" class="linkitem" >Hello</a></li>
            <li class="imgItem">
                <img src="http://placehold.it/50"  />
            </li>
        </ul>
    </div>
    <style>
        .container,
        .navbar,
        .navbar li,
        .navbar li a
        {
            margin: 0;
            padding: 0;
        }
        .navbar{
            display: table;
        }
        .navbar li{
            display: table-cell;
            padding: 0 1em; /* you can have horizontal padding on these if you like */
            vertical-align: middle;
        }
        .navbar li.imgItem{
            padding: 0; /* Clear padding from image item */
        }
        .navbar li.hover,
        .navbar li:hover{
            background: red;
            cursor: pointer;
        }
        .navbar img{
            margin: -5px 0 0 0;
            top: 5px;
            position: relative;
            /* 
                This fixes a weird bug where the table puts 5px on the bottom of an image that defines a cell's height. 
                NO idea why this is. You may need to mess with this.
            */
        }
    </style>
</body>
</html> 
```

# sql - SQL Server 中的日期格式保持不变

> ID：15071816
> 
> 赞同：0
> 
> 时间：2013-02-25T16:39:00.803
> 
> 标签：sql, sql-server

我有一个字段 ADATE，它是一个 varchar(8)，格式如下：yyyymmdd (20080402)

我想让它看起来像：2008 年 4 月 2 日

我尝试了以下方法：

```
select convert(varchar(8),adate,101) from myTable
 where  
AYEAR= ISNULL('2008', ayear)
and active = 'y' 
```

但结果仍然是：

> 20080402

如果我将转换语句更改为：

```
convert(date,adate,101) 
```

我总是得到：

> 2008-04-02

无论我将格式数字更改为什么。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:43:28.247

您需要先将其转换为您想要的`convert`格式`aDate`：`datetime`

```
select convert(varchar(10), cast(adate as datetime), 101)
from myTable
where AYEAR= ISNULL('2008', ayear)
  and active = 'y' 
```

或者：

```
select convert(varchar(10), convert(datetime, adate), 101)
from myTable
where AYEAR= ISNULL('2008', ayear)
  and active = 'y' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4bc9f3/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:43:48.320

第一次，您将字符串格式化为日期，第二次，您将日期格式化回字符串，因此将它们组合起来：

```
select convert(varchar(10), convert(date, adate), 101) 
```

# sse - x264 库速度 - Altivec 与 SSE4 -

> ID：15071821
> 
> 赞同：1
> 
> 时间：2013-02-25T16:39:13.533
> 
> 标签：sse, powerpc, x264, libx264, altivec

我有简单便宜的双核 intel-3ghz-debian 和超级昂贵的 powerPc7-Aix。

经过几天的奋斗，我编译了**libx264**并在两台计算机上进行了测试：

1.  GCC：intel 上的 x264 库（具有 SSE2 功能）和
2.  16 核 powerPc 上的 GCC（使用 altivec）。

...结果是便宜的英特尔快了**2 倍**！（禁用 altivec，英特尔快 10 倍）

我的问题：这正常吗？所有其他 powerPC 用户是否有相同的结果？x264 库的 powerPc-altivec-optimisation 可以与英特尔以相同的速度工作吗？

我对多线程选项不感兴趣。核心数和线程数无关紧要。只是简单的单线程 x264 编码，默认“中等预设”，使用 rawvideo 作为源，sse vs altivec。

也许原生 Aix XLC 编译器会提供更好的结果？（我只管理 gcc 工作）

... mac-powerpc-users 可能对此有所了解。

```
powrPc7-Aix:$ time (cat raw10sec.y4m |x264 --input-res 720x576 --fps 50 -o /dev/null -)
x264: 64-bit XCOFF
x264 [info]: using cpu capabilities: Altivec
time: real 0m33.559s
---
intelDebian:$ time (cat raw10sec.y4m |x264 --input-res 720x576 --fps 50 -o /dev/null -)
x264: ELF 32-bit LSB executable
x264 [info]: using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.1 Cache64
time: real 0m16.503s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:13:37.797

有几件事浮现在脑海：

*   与其他架构（可能是所有其他架构的总和）相比，GCC 在优化 x86（特别是商品 Intel/AMD 部件）方面可能付出*了更多的努力。*
*   x264 可能同样在优化 x86/SSE 方面付出了更多努力。
*   您的问题是 SSE2，但 x264 说它使用的是 SSE4.1。那里有很大的不同！
*   MMX/SSE 最初是针对英特尔认为重要的东西，具有许多专门的指令和怪癖（例如，浮点和整数加载有不同的指令，尽管它们将相同的内存加载到“相同”的寄存器中）。AltiVec 似乎更加正交，但结果，可能不太擅长 MMX 设计擅长的事情。
*   即使假设 AltiVec/SSE 在很大程度上是等效的，您也没有提到时钟速度和每时钟指令。
*   PPC 部分昂贵，因为您要为 16×4 线程付费——希望将尽可能多的东西打包到单个芯片上用于服务器/HPC 应用程序的情况并不少见。有点尴尬的是，商品零件的集合通常更快、更便宜（有时甚至考虑到终生电力成本），但事情就是这样发展的。

一个更有趣的比较是针对具有优化代码以利用所有内核的 PS3 的比较——显然 PS3 非常擅长暴力破解加密。可悲的是，他们已经停止制造它们，而且我不知道这些天在其中运行 Linux 是多么容易。

# c# - 如何根据某些参数在构造函数中调用基本构造函数？

> ID：15071824
> 
> 赞同：7
> 
> 时间：2013-02-25T16:39:31.443
> 
> 标签：c#, asp.net-mvc, entity-framework, constructor

如何根据参数在构造函数中调用基本构造函数？例如：

```
public SomeConstructor (){
       if(SomeParameter == "something") //here call base("something");
          else //here call base("something else")
} 
```

在我的例子中

```
SomeParameter 
```

例如，可以是本地计算机名称。

为了解释我在做什么，我想根据计算机名称确定构造函数。我正在处理 MVC 项目，当我在服务器上发布项目时，我仍然忘记更改连接字符串的名称。所以，我想指定如果计算机名==我的计算机名，然后调用

```
:base("DefaultConnection") 
```

否则，请致电例如

```
:base("ServerConnectionString") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T16:42:11.027

你不能那样做，你只能在后面的例子中调用，即使那样，你的两个例子都在传递一个字符串而不改变参数类型，所以这样看起来毫无意义（它们甚至不是不同的构造函数你打电话）。您可以以传统方式调用构造函数，并确保提供的值是之前的有效值。

作为一个现成的例子，请考虑以下内容：

```
public SomeConstructor() 
  : base(Configuration.ConnectionString) {

}

public static Configuration {
  public static string ConnectionString {
    get { 
      /* some logic to determine the appropriate value */
#if DEBUG
      return ConfigurationManager.ConnectionStrings["DebugConnectionString"]; 
#else
      return ConfigurationManager.ConnectionStrings["ReleaseConnectionString"]; 
#endif
    } 
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T16:49:08.207

您不能调用不同的构造函数，但可以使用条件运算符将不同的值发送到同一个构造函数：

```
public SomeConstructor ()
  : base(SomeParameter == "something" ? "something" : "something else") {
} 
```

如果您需要使用不同的基本构造函数，您将为每个构造一个构造函数，并使用静态方法在不同的构造函数之间进行选择。例子：

```
private SomeConstructor() : base("some", "thing") {}

private SomeConstructor(bool flag) : base("some", "other", "thing") {}

public SomeConstructor Create() {
  if (SomeParameter == "something") {
    return new SomeConstructor();
  } else {
    return new SomeConstructor(true);
  }
} 
```

（这里我使用布尔参数只是为了使构造函数签名不同。您可能有不同的数据要发送到它们，因此您不需要以这种方式区分它们。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T16:48:07.187

试试这个：

```
public class TestInherit : Child
{
    public TestInherit()
        : base(Environment.MachineName=="MyPC" ? "here" : "there")
    {
    }

}

public class Child
{
    public Child(string name) { }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T16:49:31.400

根据构建配置使用一个具有不同值的连接字符串。这是通过[配置文件转换](http://msdn.microsoft.com/en-us/library/dd465318%28v=vs.100%29.aspx)来实现的。

在*Web.config*中使用

```
 <connectionStrings>
    <add name="Foo" connectionString="DefaultConnection" />
  </connectionStrings> 
```

如果*Web.Release.config*使用

```
 <connectionStrings>
    <add name="Foo" connectionString="ServerConnectionString"
         xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
  </connectionStrings> 
```

当您在 Release 配置中构建项目时，*Web.config*将具有*Foo*连接字符串，其值为`ServerConnectionString`。

此外，我建议您使用[SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)包，它允许您根据构建配置转换您的 app.config 或任何其他 XML 文件。

* * *

正如我在评论中提到的，如果您出于某种原因不想依赖构建配置，那么您可以向您的依赖注入框架（Unity、Ninject 等）询问正确的参数。这是 Ninject 的示例：

```
Bind<IFoo>().To<Foo>().WithConstructorArgument("bar", 
     context => IsLocalMachine ? "DefaultConnection" : "ServerConnectionString"); 
```

当 Foo 将被实例化（在您的情况下为 DbContext ）时，适当的字符串将被传递给构造函数：

```
public class Foo : FooBase, IFoo
{
    public Foo(string bar) : base(bar)
    {            
    }
} 
```

# c# - 如何在 VSIX 包安装上注册键绑定代码

> ID：15071825
> 
> 赞同：3
> 
> 时间：2013-02-25T16:39:39.663
> 
> 标签：c#, vsx, envdte, vs-extensibility, vspackage

我只想在安装过程中向 Visual Studio 包添加一次键盘快捷方式。基本上我知道如何从包代码中做到这一点，例如：

```
var dte = GetGlobalService(typeof(DTE)) as DTE2;
if (dte != null)
{                
    dte.Commands.Item("Tools.Something").Bindings = "Global::Ctrl+T, Ctrl+S";
} 
```

问题是，我只想调用此代码一次（我不想在包类构造函数中执行此代码，因为它会在 VS 重新启动后第一次使用包时执行）。

怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:41:30.150

还有另一种我上次不知道的方法。所有需要做的就是在 *.vsct 文件中添加键绑定。这将注册您的快捷键并将其绑定到所选命令。

```
<KeyBindings>
    <KeyBinding guid="guidSomehingCmdSet" id="cmdidSomehing" editor="guidVSStd97" mod1="Control" mod2="Control" key1="T" key2="S" />    
</KeyBindings> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:10:53.433

首先，如果您计划公开分发扩展，那么您可能应该删除绑定，因为它极有可能会干扰您的某些用户的现有绑定。

其次，提供命令和绑定作为[Visual Studio 命令表](http://msdn.microsoft.com/en-us/library/bb164699.aspx)的一部分，而不是通过自动化接口。这些命令是使用在[`[ProvideMenuResourceAttribute]`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.providemenuresourceattribute.aspx)安装包时不需要执行任何代码的属性注册的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:04:37.763

*   每次在包 init() 函数中检查一个注册表项
*   如果密钥不存在，则创建注册表项并执行您的代码
*   如果找到密钥，请不要执行您的代码

例如： 1\. 在您想要的位置检查“Test”键 2.如果“Test”键不存在，在注册表中创建该键并执行您的代码 3.如果找到“Test”键，请不要执行您的代码

# signalr - Signalr 不调用客户端函数

> ID：15071826
> 
> 赞同：13
> 
> 时间：2013-02-25T16:39:47.760
> 
> 标签：signalr, signalr-hub

我正在使用带有 Signalr 1.0.0 包的 VS2012“Fall”更新。调用服务器端函数工作正常。但是不调用客户端函数。`onBroadcastMessage()`当（见下文）被调用时，似乎什么也没发生。

问题：

*   我错过了什么？
*   有没有办法调试客户端调用？

谢谢！

服务器代码：

```
using Microsoft.AspNet.SignalR;

namespace KPMain
{
    public class RealtimeConnectionHub : Hub
    {
        public void BroadcastMessage(string name, string message) {
            Clients.All.onBroadcastMessage(name, message);
        }
    }
} 
```

路线登记：

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes) {
        HubConfiguration hubConfig = new HubConfiguration();
#if DEBUG
        hubConfig.EnableDetailedErrors = true;
#endif
        routes.MapHubs(hubConfig);

        ...
    }
} 
```

客户端代码（简化）：

```
var rtcom = new RealtimeConnection();
rtcom.init({debug: true}, function () {
    rtcom.subscribe(function (sender, message) {
        if (message) {
            alert("message");
        }
    });
});

RealtimeConnection: function () {    
    var
        _rtHub = $.connection.realtimeConnectionHub,
        _initialized = false,                
        _init = function (options, cb) {
            options = options || {};

            $.connection.hub.logging = options.debug;
            $.connection.hub.start().done(function () {
                _initialized = true;

                if (cb) { cb(); }
            });
        },

        _broadcast = function (message) {
            if (_initialized) {
                _rtHub.server.broadcastMessage("testuser", message);
            }
        },

        _subscribe = function (cb) {
            if (_initialized) {
                _rtHub.client.onBroadcastMessage = cb;
            }
        };

    return {
        initialized: _initialized,
        broadcast: _broadcast,
        subscribe: _subscribe,
        init: _init
    };
}

$("#container").on("click", "button.chat-btnSendMessage", function () {
    rtcom.broadcast($(this).parent().find("input").val());
}); 
```

日志（使用铬）：

```
[16:58:01 GMT+0100 (W. Europe Standard Time)] SignalR: Negotiating with '/signalr/negotiate'. jquery.signalR-1.0.0.js:54
[16:58:02 GMT+0100 (W. Europe Standard Time)] SignalR: Attempting to connect to SSE endpoint 'http://w2008r2portal/signalr/connect?transport=serverSentEvents&connectionT…EgDDEU0WLhHVzI7ZUnA0impltR7HYNTGHUJJYAXew1Leg2&connectionData=%5B%5D&tid=0' jquery.signalR-1.0.0.js:54
[16:58:03 GMT+0100 (W. Europe Standard Time)] SignalR: EventSource connected jquery.signalR-1.0.0.js:54
[16:58:03 GMT+0100 (W. Europe Standard Time)] SignalR: Now monitoring keep alive with a warning timeout of 13333.333333333332 and a connection lost timeout of 20000 

Request URL:http://xxx/signalr/send?transport=serverSentEvents&connectionToken=lnTczBgQB0dj...
Request Method:POST
Status Code:200 OK

Request Headers
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Authorization:Negotiate YIIFXQYGKwYBBQUCoIIFUTCCBU2...
Connection:keep-alive
Content-Length:148
Content-Type:application/x-www-form-urlencoded; charset=UTF-8
Host:w2008r2portal
Origin:http://w2008r2portal
Referer:http://w2008r2portal/?tab=Start
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17
X-Requested-With:XMLHttpRequest

Query String Parameters
transport:serverSentEvents
connectionToken:lnTczB...

Form Data
data:{"H":"realtimeconnectionhub","M":"BroadcastMessage","A":["testuser","test"],"I":0}

Response Headers
Cache-Control:no-cache
Content-Type:application/json; charset=UTF-8
Date:Mon, 25 Feb 2013 15:58:04 GMT
Expires:-1
Persistent-Auth:false
Pragma:no-cache
Server:Microsoft-IIS/7.5
Transfer-Encoding:chunked
WWW-Authenticate:Negotiate oYGyMIGvoAMKAQChCwY...
X-AspNet-Version:4.0.30319
X-Content-Type-Options:nosniff
X-Powered-By:ASP.NET 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-25T18:38:56.400

因此，您的问题在于您在使用集线器代理注册任何客户端方法之前开始连接。

有两种方法可以解决这个问题。

1.  在 $.connection.hub.start 之前的 init 中调用您的 _subscribe 方法。
2.  确保您在开始之前定义了至少 1 个客户端方法（需要“订阅”传入消息）。启动后使用 .on 订阅中心方法。

所以这是代码中的两种方法。

**1：**

```
var rtcom = new RealtimeConnection();
rtcom.init({debug: true});

RealtimeConnection: function () {    
    var
        _rtHub = $.connection.realtimeConnectionHub,
        _initialized = false,                
        _init = function (options, cb) {
            options = options || {};

            $.connection.hub.logging = options.debug;

            _rtHub.client.onBroadcastMessage = function() {
                alert("message");
            };

            $.connection.hub.start().done(function () {
                _initialized = true;

                if (cb) { cb(); }
            });
        },

        _broadcast = function (message) {
            if (_initialized) {
                _rtHub.server.broadcastMessage("testuser", message);
            }
        },

    return {
        initialized: _initialized,
        broadcast: _broadcast,
        init: _init
    };
}

$("#container").on("click", "button.chat-btnSendMessage", function () {
    rtcom.broadcast($(this).parent().find("input").val());
}); 
```

**2：**

```
var rtcom = new RealtimeConnection();
rtcom.init({debug: true}, function () {
    rtcom.subscribe(function (sender, message) {
        if (message) {
            alert("message");
        }
    });
});

RealtimeConnection: function () {    
    var
        _rtHub = $.connection.realtimeConnectionHub,
        _initialized = false,                
        _init = function (options, cb) {
            options = options || {};

            // Need to have at least 1 function registered to be subscribed to hub
            _rtHub.client.foo = function() {};

            $.connection.hub.logging = options.debug;
            $.connection.hub.start().done(function () {
                _initialized = true;

                if (cb) { cb(); }
            });
        },

        _broadcast = function (message) {
            if (_initialized) {
                _rtHub.server.broadcastMessage("testuser", message);
            }
        },

        _subscribe = function (cb) {
            if (_initialized) {
                _rtHub.on("onBroadcastMessage", cb);
            }
        };

    return {
        initialized: _initialized,
        broadcast: _broadcast,
        subscribe: _subscribe,
        init: _init
    };
}

$("#container").on("click", "button.chat-btnSendMessage", function () {
    rtcom.broadcast($(this).parent().find("input").val());
}); 
```

希望这可以帮助！

# c# - 将列表类型转换为 IEnumerable 接口类型

> ID：15071828
> 
> 赞同：14
> 
> 时间：2013-02-25T16:39:56.700
> 
> 标签：c#

我有一个

```
List<Person> personlist; 
```

我怎样才能转换为

```
IEnumerable<IPerson> iPersonList 
```

Person 实现 IPerson 接口

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-25T16:44:09.527

如果您使用的是 .NET 4.0 或更高版本，则可以进行隐式转换：

```
IEnumerable<IPerson> iPersonList = personlist;
//or explicit:
var iPersonList = (IEnumerable<IPerson>)personlist; 
```

这使用了泛型逆变`IEnumerable<out T>`- 即因为您只能从 中得到一些东西*，*所以`IEnumerable`您可以隐式转换`IEnumerable<T>`为`IEnumerable<U>`if `T : U`。（它也使用那个`List<T> : IEnumerable<T>`。）

否则，您必须使用 LINQ 转换每个项目：

```
var iPersonList = personlist.Cast<IPerson>(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T16:42:21.610

您可以使用`IEnumerable.Cast`

```
var iPersonList = personlist.Cast<IPerson>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T08:00:20.410

从 .NET 4.0 开始，您可以传递`List<Person>`给具有类型参数的方法，`IEnumerable<IPerson>`而无需隐式或显式强制转换。

由于[逆变，隐式转换是自动完成的（如果可能的话）](https://stackoverflow.com/questions/6797759/covariance-contravariance-in-c-sharp.)

你可以这样做：

```
var people = new List<Person>();
// Add items to the list

ProcessPeople(people); // No casting required, implicit cast is done behind the scenes

private void ProcessPeople(IEnumerable<IPerson> people)
{
// Processing comes here
} 
```

# sap-ase - 我需要 Sybase 数据类型来保存不定长度的字符串。

> ID：15071829
> 
> 赞同：4
> 
> 时间：2013-02-25T16:39:56.267
> 
> 标签：sap-ase

我的要求是声明一个接受最大大小的 xml 值的数据类型。
问题：Sybase 中是否有 text、xml 或 varchar(max) 数据类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:36:05.780

有文本数据类型。[您可以在此处](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sqlug/html/sqlug/sqlug210.htm)找到更多信息。

如何通过程序使用它：

```
create procedure settxt
(
  @txt text
)
as
begin
  select @txt
end 
```

如何运行程序：

```
declare @txt  text
select @txt = 'Hello world'
execute settxt @txt 
```

该代码适用于我，但可能不适用于所有人。

这是临时表的解决方案：

```
create table #texttab
(
  txt varchar(100)
)
go
insert into #texttab
values ('Hello ')

insert into #texttab
values  (' wolrd!')
go
create procedure settxt
as
begin
  declare @txt text, 
          @txtval varchar(100)  

  select @txt=' '

  declare curTXT cursor for 
  select txt from #texttab

  open curTXT
  fetch curTXT into @txtval  
  while @@sqlstatus=0 begin
    select @txtval
    select @txt=@txt+@txtval
    select @txt
    fetch curTXT into @txtval
  end
  close curTXT
  deallocate cursor curTXT

  select @txt

end
go
execute settxt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-01T00:12:56.963

Sybase ASE 15.7 及更高版本支持存储过程中的参数和变量中的文本数据类型（[这是我的支持](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc32300.1570/html/sqlug/sqlug666.htm)）。早期版本取决于页面大小，例如，页面大小为 2k 的服务器最多可以处理 16,348 个字符。另一个想法是以不同的方式存储数据，例如将大对象写入文件并仅将文件名保存在数据库中。

# android - 意图过滤器无法解析外部服务

> ID：15071830
> 
> 赞同：0
> 
> 时间：2013-02-25T16:39:57.360
> 
> 标签：android, android-intent, android-service

我错过了一些重要的东西或......

我有两个应用程序，其中一个包含带有在 AndroidManifest 中声明的意图过滤器的导出服务：

```
<service
    android:name=".MyService"
    android:exported="true"
    android:permission="my.permission" >
    <intent-filter>
        <action android:name="my.service" />
    </intent-filter>
</service> 
```

我可以使用“my.service”操作成功地从另一个应用程序绑定到该服务。但我想启动服务（向它发送命令）。如果我写：

```
Intent intent = new Intent("my.service");
intent.setAction("my.command");
ComponentName cn = startService(intent); 
```

我进去`null`了`cn`（服务无法解决）。但是，如果我将其更改为：

```
PackageManager packageManager = getPackageManager();
Intent serviceIntent = new Intent("my.service");
List<ResolveInfo> services = packageManager.queryIntentServices(serviceIntent, 0);
if (services.size() > 0) {
    ResolveInfo service = services.get(0);
    intent = new Intent();
    intent.setClassName(service.serviceInfo.packageName, service.serviceInfo.name);
    intent.setAction("my.command");
    ComponentName cn = startService(intent);
} 
```

服务已成功启动。我在包含第一个变体的 StackOverflow 上看到了很多建议，但我无法让它发挥作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:08:12.870

在不起作用的代码中，您首先将构造函数中的操作设置为“my.service”。这会起作用，但是在下一行中，您将您的操作设置为“my.command”。如果您需要向同一服务发送不同的操作，您还必须将该操作添加到清单中的意图过滤器中：

```
<service
    android:name=".MyService"
    android:exported="true"
    android:permission="my.permission" >
    <intent-filter>
        <action android:name="my.service" />
        <action android:name="my.command" />
    </intent-filter>
</service> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:47:48.573

在您的清单中添加以下内容

```
<service 
....
android:name="the package name of your service that you imported from another project">
....
</service> 
```

在您的活动中，

```
//start service on create
ComponentName cn = startService(new Intent(this,service_file_you_imported.class));

//Binding the activity to the service 
doBindService(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:50:41.603

文件说：

*如果服务正在启动或已经在运行，则返回实际启动的服务的 ComponentName；否则，如果服务不存在，则返回 null。*

我实现了一个使用“绑定”服务的简单教程（法语）：http: [//julien-dumortier.fr/service-et-binding-sous-android/](http://julien-dumortier.fr/service-et-binding-sous-android/) 也许它会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T18:41:43.460

```
Try the following in your activity oncreate()

 intent = new Intent(this, BackHelper.class);

 startService(intent);

In manifest try

 service android:name=".BackHelper" 
```

# xml - XML 来表达可能值的数组？

> ID：15071835
> 
> 赞同：0
> 
> 时间：2013-02-25T16:40:15.583
> 
> 标签：xml

我有一个变量列表，这些变量可以有任意数量的可能值。

```
 <?xml version="1.0" encoding="utf-8"?>
        <Keys>
              <attr1>
                     <option>X</option>
                     <option>Y</option>
                     <option>Z</option>
              </attr1>
              <attr2>
                     <option>A</option>
                     <option>B</option>
                     <option>C</option>
              </attr2>
        </Keys> 
```

我上面写的是否正确，还是有更好的表达方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:49:44.340

尝试说明 attr1 和 attr2 标记属于同一类型：

```
 <Keys>
          <Key name="attr1">
                 <option>X</option>
                 <option>Y</option>
                 <option>Z</option>
          </Key>
          <Key name="attr2">
                 <option>A</option>
                 <option>B</option>
                 <option>C</option>
          </Key>
    </Keys> 
```

此外，您可以添加选项顺序或优先级，但不一定。您还说“这些变量可以有任意数量的可能值”，“ANY”是什么意思？

如果某些变量可以具有无限值（例如在文本框中输入字符串），并且您可能想要添加一些限制，我可以建议类似

```
<Keys>
      <Key name="attr1">
             <Restriction attrType="string" maxLength="3" />
             <option>X</option>
             <option>Y</option>
             <option>Z</option>
      </Key>
      <Key name="attr2">
             <Restriction attrType="string" maxLength="1"/>
             <option>A</option>
             <option>B</option>
             <option>C</option>
      </Key>
      <Key name="attr3">
             <Restriction attrType="integer" maxValue="10" minValue="0"/>
             <option>1</option>
             <option>3</option>
             <option>4</option>
             <option>7</option>
             <option>9</option>                      
      </Key>
</Keys> 
```

剩下的取决于你想用代码做什么，我猜

# github - github原始可绘制文件夹

> ID：15071837
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:40:16.690
> 
> 标签：github, git-commit

如何忽略github 提交中的排除`raw`和文件夹？`drawable`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:44:43.820

just add the .gitignore file with /raw and /drawable

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:46:36.993

使用以下内容`.gitignore`在您的文件夹中创建一个：`/res`

```
raw/
drawable/ 
```

# jquery - jQuery附加文件并检测空输入字段

> ID：15071840
> 
> 赞同：0
> 
> 时间：2013-02-25T16:40:30.890
> 
> 标签：jquery, events

## HTML

```
<input type="file" style="display: none" id="uploadme" /> <br />
<input type="button" id="clickme" value="Upload Stuff!" /> 
```

## jQuery

```
$(function(){
    $('#clickme').click(function(){
        $('#uploadme').click();

        if( $("#uploadme").val()=='') {
            alert("empty");
        }
    });
}); 
```

当用户点击“上传东西！” 按钮，窗口显示要上传的文件。如果用户单击打开窗口的取消按钮，则输入字段为空，否则隐藏的输入字段包含所选文件。我试图检测隐藏的输入字段是否为空。如果输入字段为空，即用户取消并且不想附加任何内容，那么我必须做一些事情。同样，如果用户选择了一些文件，那么我必须做其他事情。

如何在上面的代码中检测到输入字段（id="uploadme"）是否为空？

这是 jsfiddle 中的运行代码：[这里](http://jsfiddle.net/jeewanaryal/RuqVS/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-11T22:25:18.797

您可以通过检查 $('#uploadme').files.length 的值来检查这一点。如果为 0，则没有选择文件，这意味着输入字段为空。

```
if( $("#uploadme").files.length == 0) {
    alert("empty");
} 
```

# doctrine-orm - 如何使用 Doctrine 将变量传递给 Orderby 子句

> ID：15071844
> 
> 赞同：0
> 
> 时间：2013-02-25T16:40:43.347
> 
> 标签：doctrine-orm

`ORDER BY`尝试使用 Doctrine 2 ORM在 DQL 子句中实现动态排序时出现错误。

这是我的代码片段：

```
$queryBuilder = $categoryEntity->createQueryBuilder('category');

$queryBuilder->distinct();
$queryBuilder->join('Category\Entity\CategoryName', 'category_name', 'WITH', 'category.id = category_name.category');

if($column == 'status'){
    $queryBuilder->orderBy("category.status $order");
}else{
    $queryBuilder->orderBy("category_name.name $order");
} 
```

这会产生以下错误：

> [语法错误] 第 0 行，第 189 列：错误：预期的字符串结尾，得到 'ASC'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T16:53:58.930

正确的 API 是`Doctrine\ORM\QueryBuilder#orderBy($field, $direction)`：

```
// assuming $order is either 'ASC' or 'DESC'

if($column == 'status'){
      $queryBuilder->orderBy('category.status', $order);
}else{
     $queryBuilder->orderBy('category_name.name', $order);
} 
```

# signer - 类“client”的签名者信息与同一包中其他类的签名者信息不匹配

> ID：15071845
> 
> 赞同：3
> 
> 时间：2013-02-25T16:40:44.017
> 
> 标签：signer

我花了 2 天的时间试图解决这个问题，但找不到解决这个问题的方法，或者至少找不到解决方案：

> 线程“main”中的异常 java.lang.SecurityException：类“client”的签名者信息与 java.lang.ClassLoader.checkCerts(Unknown Source) at java.lang.ClassLoader 的同一包中的其他类的签名者信息不匹配.preDefineClass(Unknown Source) at java.lang.ClassLoader.defineClass(Unknown Source) at java.security.SecureClassLoader.defineClass(Unknown Source) at java.net.URLClassLoader.defineClass(Unknown Source) at java.net.URLClassLoader.access在 java.net.URLClassLoader 的 $100（未知来源）在 java.net.URLClassLoader 的 $1.run（未知来源）在 java.security.AccessController.doPrivileged（本机方法）在 java.net.URLClassLoader 的 $1.run（未知来源）。在 java.lang.ClassLoader 中查找类（未知来源）。loadClass(Unknown Source) at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at Loader.main(Loader.爪哇：36）

```
 public static void main(String[] args) throws Exception {
    client game = new client();
    Loader loader = new Loader();
    game.setStub(loader);
    game.init();
    game.start();
    loader.add(game);
    loader.setDefaultCloseOperation(EXIT_ON_CLOSE);
    loader.setSize(773, 531);
    loader.setResizable(false);
    loader.setVisible(true); 
} 
```

我的库图片：http: [//puu.sh/28cAP](http://puu.sh/28cAP)

我的库的 Dl：http: [//dl.dropbox.com/u/17359665/lib.jar](http://dl.dropbox.com/u/17359665/lib.jar)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:54:45.847

如here所述，（[Java SecurityException：签名者信息不匹配](https://stackoverflow.com/questions/2877262/java-securityexception-signer-information-does-not-match)）这与具有不同签名的相同类的两个jar有关。检查你的构建路径库并打开这些库，也许你发现一个库要么在其中两次与不同的父级存在，要么也包含在你自己的 jar 中。我遇到了这个问题，hamcrest 1.1 版是 JUnit 4 在构建路径上的依赖项，并由 maven 导入，具有不同的签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T14:04:26.950

如果您使用 Maven，我解决了它删除库并再次下载它。

# c++ - 在将元素插入向量时对元素进行排序不起作用

> ID：15071848
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:40:48.133
> 
> 标签：c++, random, c++11

我正在尝试填充一个随机生成的数字的向量，但问题是当我运行它时，排序后我只得到 2 个数字。

0 0 0 0 0 17 17 17

这是我的代码，所以你能告诉我我做错了什么吗

```
#include <iostream>
#include <random>
#include <functional>

using namespace std;
using namespace std::chrono;

class Rand_int {
public:

    Rand_int(int low, int high) :dist{low,high} {
        for (int i = 0; i < 100; i++)
            cout << "Generated: " << dist(re) << endl;
            num = dist(re); }
    int operator()() { return dist(re);}
    int getNum() const
    {
        return num;
    }
    bool operator()(int x) const
    {
        return (num <= x);
    }

private:
    default_random_engine re;
    uniform_int_distribution<> dist;
    int num;
};

int main()
{
    int n=10;
    vector<int> v(n);
    Rand_int rnd {0,20};   // make a uniform random number generator

    for (int i=0; i<n; i++)
    {
        vector<int>::iterator iter = find_if(v.begin(), v.end(), rnd);
        v.insert(iter, rnd.getNum());
    }

    for (vector<int>::const_iterator iter = v.begin(); iter != v.end(); iter++)
        cout << *iter << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:10:28.430

```
#include <vector>
#include <algorithm>
#include <iostream>
#include <iterator>
#include <random>

int main() {
    std::default_random_engine re { std::random_device()() };
    std::uniform_int_distribution<int> dist;

    std::vector<int> v;

    for(int i=0; i!=10; ++i) {
        int r=dist(re);
        auto it=std::lower_bound(v.begin(), v.end(), r);
        v.insert(it, r);
    }
    std::copy(
        v.cbegin(), v.cend(),
        std::ostream_iterator<int>(std::cout, "\n")  
    ); 
```

您的代码不必要地令人困惑，请考虑以上内容。因为向量已排序，我们可以使用`lower_bound`O(log(n)) 而不是 O(n) 找到正确的插入位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:07:26.070

首先，你想从一个空向量开始：

```
std::vector<int> v; 
```

其次，您当前的随机数生成器`Random_int`仅在其中生成*一个*数字`num`并将其保存。你需要的是一个`Random_int`可以更新的状态：

```
class random_int_state{
public:
    random_int_state(int low, int high) : 
        re{/* Assignment 1 - use a suitable seed for the random generator.
            * maybe you could use a `time`stamp or a `random device`? */
          }, 
        dist{low,high}, 
        num(dist(re)) {}
    int getNum() const
    {
        return num;
    }
    bool operator()(int x) const
    {
        return (num <= x);
    }
    void nextState(){
        /* Assignment 2 - how do you create a new state? 
        ** what is the observable state of this object after all? */
    }

private:
    std::mt19937 re;
    std::uniform_int_distribution<int> dist;
    int num;
}; 
```

除此之外，您的插入排序算法工作正常。请记住`vector`在程序的开头保留空白，否则您将获得前导零。

请注意，此示例仍然需要您提供代码，但这很容易。

# java - 为什么抑制这个未经检查的警告是安全的？

> ID：15071851
> 
> 赞同：7
> 
> 时间：2013-02-25T16:41:00.257
> 
> 标签：java, generics, effective-java

考虑在**Effective Java** generics 一章`UnaryFunction`中定义的接口。

 **```
public interface UnaryFunction<T> {
T apply(T arg);
} 
```

以及以下用于返回的代码`UnaryFunction`

```
// Generic singleton factory pattern
private static UnaryFunction<Object> IDENTITY_FUNCTION = new UnaryFunction<Object>() {
  public Object apply(Object arg) { return arg; }
};

// IDENTITY_FUNCTION is stateless and its type parameter is
// unbounded so it's safe to share one instance across all types.
@SuppressWarnings("unchecked")
public static <T> UnaryFunction<T> identityFunction() {
  return (UnaryFunction<T>) IDENTITY_FUNCTION;
} 
```

为什么演员表`IDENTITY_FUNCTION`是`(UnaryFunction<T>)`安全的？

这本书对我提出的问题进行了说明，但我无法遵循这里的逻辑。我们在哪里调用`apply`执行身份操作的函数？我很困惑，因为它是返回传递给它的相同对象而不修改任何东西的函数。

> IDENTITY_FUNCTION 的强制转换`(UnaryFunction<T>)`生成一个未经检查的强制转换警告，因为`UnaryFunction<Object>`它不是一个 `UnaryFunction<T>`for each `T`。但是标识函数很特殊：它返回未修改的参数，因此我们知道将其用作类型安全`UnaryFunction<T>`的值是`T`. 因此，我们可以放心地抑制此强制转换生成的未经检查的强制转换警告。完成此操作后，代码编译时不会出现错误或警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:53:03.827

带类型擦除

```
T apply(T arg); 
```

实际上是

```
Object apply(Object arg); 
```

现在是身份

```
Abc x = ...;
Abc y = IDENTITY.apply(x); 
```

可以假设它总是正确的（相当于`y = x;`）。

*（非常务实。）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T16:55:08.540

强制转换是安全的，因为标识函数首先返回传递给它的***确切***对象。因此，在运行时，没有`T`可能违反强制转换的泛型参数的专门化。

又名，您将对象转换为自己的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:58:45.633

identityFunction() 只返回函数本身，用于不同的对象。

以下是一个使用示例：

```
String result = identityFunction().apply("Hello"); 
```

类型安全警告很重要。它存在是因为 IDENTITY_FUNCTION 的实现使得编译器无法保证函数返回与输入相同的类型。考虑以下替代实现：

```
private static UnaryFunction<Object> CONST_FUNCTION = new UnaryFunction<Object>() {
    public Object apply(Object arg) { return "Default"; } 
}; 
```

这个实现总是返回一个字符串，因此将它作为泛型数据类型上的一元函数返回显然是不安全的。

在我们的例子中（IDENTITY_FUNCTION），返回类型与输入类型相同的证明在实现内部。我们返回相同的实例，因此保证具有相同的类型。当你禁止类型安全警告时，建议用证明来证明它的合理性。**

# php - 使用 usort 进行对象排序

> ID：15071852
> 
> 赞同：1
> 
> 时间：2013-02-25T16:41:01.770
> 
> 标签：php

我正在尝试使用 usort 按距离对对象数组进行排序。这是我的排序功能：

```
private function sortDistance ($first, $next)
{
    $d1 = $this->searchDistance[$first->zip];
    $d2 = $this->searchDistance[$next->zip];

    if ($d1 == $d2) {
        return 0;
    }
    return ($d1 > $d2) ? +1 : -1;
} 
```

这是我调用 usort 的地方：

```
return usort($searchResults->limit('5', $start)->get()->result(), array("Search", "sortDistance")); 
```

出于某种原因，当我 print_r 返回的结果时，它只打印 1。我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:43:42.403

返回 usort 是返回 1 因为 usort 函数已完成[文档](http://php.net/manual/en/function.usort.php)。print_r() 你刚刚排序的数组，你会看到排序后的值 :)

工作示例：

```
$result = $searchResults->limit('5', $start)->get()->result();
usort($result, array("Search", "sortDistance"));
return $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:45:36.900

Make your sort function static:

```
 private static function sortDistance ($first, $next){ ... 
```

Also, this will only work for sorting inside the Search class where the method is defined since it is private. To use it in the child classes make it protected, for use anywhere make it public.

Alternately, if you want to method it non-static and you're inside an instance of a Search object, you could make the method non static and call it like this:

```
 return usort($searchResults->limit('5', $start)->get()->result(), 
                array($this,   "sortDistance")); 
```

# javascript - createElement 与 createElementWithClass

> ID：15071853
> 
> 赞同：0
> 
> 时间：2013-02-25T16:41:03.660
> 
> 标签：javascript

我正在使用这个脚本来生成一个目录：

[https://github.com/nanotube/generated_toc](https://github.com/nanotube/generated_toc)

我在这个测试页面上使用它。如您所见，创建的 [返回顶部] 链接非常丑陋：

[http://www.utahrails.net/up/up-loco-features_toc-test.php](http://www.utahrails.net/up/up-loco-features_toc-test.php)

要将 CSS 样式应用于“[返回顶部]”链接，创建的 div 需要有一个类。

这有效：

```
 // create a "back to top" link
  if (back_to_top == 'on'){
    newdiv = document.createElement('div');
    newdiv.innerHTML = "<a href='#beforetoc'>[back to top]</a>";
    this_head_el.parentNode.insertBefore(newdiv, this_head_el.nextSibling); 
```

但事实并非如此。ToC 中的内容消失了，所有的链接都消失了：

```
 // create a "back to top" link
  if (back_to_top == 'on'){
    newdiv = document.createElementWithClass('div', 'back-to-top');
    newdiv.innerHTML = "<a href='#beforetoc'>[back to top]</a>";
    this_head_el.parentNode.insertBefore(newdiv, this_head_el.nextSibling); 
```

我真的是脚本新手，我看不出问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:43:59.427

I don't see any reference for a `createElementWithClass()` method on the document object. If you were checking your javascript error console or the debug console, it should have shown you the exact error.

Just use this:

```
// create a "back to top" link
  if (back_to_top == 'on'){
    newdiv = document.createElement('div');
    newdiv.className = "back-to-top";
    newdiv.innerHTML = "<a href='#beforetoc'>[back to top]</a>";
    this_head_el.parentNode.insertBefore(newdiv, this_head_el.nextSibling); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:44:48.433

There is no (at least no native) `createElementWithClass` function. Use

```
var newdiv = document.createElement('div');
newdiv.className = 'back-to-top';
… 
```

(see docs for [`className` property](https://developer.mozilla.org/en-US/docs/DOM/element.className) and [`var` statement](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var))

# android - 如果 Fragment 是通过 XML 创建的，为什么在轮换期间无法接收非空的 savedInstanceState 包？

> ID：15071854
> 
> 赞同：0
> 
> 时间：2013-02-25T16:41:06.700
> 
> 标签：android, actionbarsherlock

我有以下非常简单的片段。

## UiFragment.java

```
package com.example.test;

import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.actionbarsherlock.app.SherlockFragment;

/**
 * This is a fragment showing UI that will be updated from work done
 * in the retained fragment.
 */
public class UiFragment extends SherlockFragment {

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        Log.i("CHEOK", "UiFragment onActivityCreated");

        super.onActivityCreated(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        Log.i("CHEOK", "UiFragment onCreateView");

        View v = inflater.inflate(R.layout.uifragment, container, false);

        return v;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.i("CHEOK", "UiFragment onCreate");

        super.onCreate(savedInstanceState);

        if (savedInstanceState != null) {
            Log.i("CHEOK", "--> UiFragment able get savedInstanceState's data : " + savedInstanceState.getInt("value"));
        }       
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("value", 111222);        
    }    
} 
```

## uifragment.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="8dp">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="fragment_retain_instance_msg" />

</LinearLayout> 
```

我意识到如果我通过 Java 代码将它附加到 FragmentActivity。

## MainActivity.java

```
package com.example.test;

import android.os.Bundle;
import android.util.Log;

import com.actionbarsherlock.app.SherlockFragmentActivity;

public class MainActivity extends SherlockFragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        Log.i("CHEOK", "MainActivity onCreate");

        super.onCreate(savedInstanceState);

        if (savedInstanceState != null) {
            Log.i("CHEOK", "--> MainActivity able get savedInstanceState's data : " + savedInstanceState.getInt("value"));
        }

        // ???
        //setContentView(R.layout.activity_main);

        if (savedInstanceState == null) {
            getSupportFragmentManager().beginTransaction().add(android.R.id.content,
                new UiFragment()).commit();
        }       
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("value", 888999);        
    }   
} 
```

每次我执行旋转时，我`Fragment`都能`savedInstanceState`在`onCreate`

```
02-26 00:36:48.777: I/CHEOK(17740): MainActivity onCreate
02-26 00:36:48.812: I/CHEOK(17740): UiFragment onCreate
02-26 00:36:49.031: I/CHEOK(17740): UiFragment onCreateView
02-26 00:36:49.035: I/CHEOK(17740): UiFragment onActivityCreated
[Rotation happens here]
02-26 00:37:37.472: I/CHEOK(17740): MainActivity onCreate
02-26 00:37:37.472: I/CHEOK(17740): UiFragment onCreate
02-26 00:37:37.472: I/CHEOK(17740): --> UiFragment able get savedInstanceState's data : 111222
02-26 00:37:37.472: I/CHEOK(17740): --> MainActivity able get savedInstanceState's data : 888999
02-26 00:37:37.511: I/CHEOK(17740): UiFragment onCreateView
02-26 00:37:37.511: I/CHEOK(17740): UiFragment onActivityCreated 
```

**但是，如果我要替换`MainActivity`'s中的代码`onCreate`**

```
if (savedInstanceState == null) {
    getSupportFragmentManager().beginTransaction().add(android.R.id.content,
        new UiFragment()).commit();
} 
```

通过 XML 创建片段

```
setContentView(R.layout.activity_main); 
```

## activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <fragment class="com.example.test.UiFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</RelativeLayout> 
```

当我执行轮换时，我会得到以下日志。

```
02-26 00:39:23.437: I/CHEOK(18055): MainActivity onCreate
02-26 00:39:23.734: I/CHEOK(18055): UiFragment onCreate
02-26 00:39:23.734: I/CHEOK(18055): UiFragment onCreateView
02-26 00:39:23.754: I/CHEOK(18055): UiFragment onActivityCreated
[Rotation happens here]
02-26 00:39:27.703: I/CHEOK(18055): MainActivity onCreate
02-26 00:39:27.703: I/CHEOK(18055): --> MainActivity able get savedInstanceState's data : 888999
02-26 00:39:27.746: I/CHEOK(18055): UiFragment onCreate
02-26 00:39:27.746: I/CHEOK(18055): UiFragment onCreateView
02-26 00:39:27.750: I/CHEOK(18055): UiFragment onActivityCreated 
```

为什么会有这样的`Fragment`行为差异？如果它是通过 XML 创建的，**为什么`Fragment`在轮换期间无法接收非空的 savedInstanceState 包？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:55:15.840

> 被实例化的片段必须具有某种唯一标识符，以便在需要销毁和重新创建父活动时可以将其与先前的实例重新关联。这可以通过以下方式提供：

为片段 XML 标记提供 id 可以解决该问题。

```
<fragment class="com.example.test.UiFragment"
    android:id="@+id/myFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

# arrays - 将 8 字节 uint8_t 数组转换为 4 字节数组

> ID：15071857
> 
> 赞同：0
> 
> 时间：2013-02-25T16:41:14.123
> 
> 标签：arrays, arduino, hex

我正在使用 Arduino，我想将 XBee MAC（高字节和低字节）保存在 uint8_t 数组中。

现在我正在毫无问题地读取字节，但我将它们保存在使用 8 个字节的 uint8_t* 数组中。我想将它们保存在一个 4 字节的数组中。

例如，高字节为：0013A200。不，它使用：{0,0,1,3,A,2,0,0}，类似的东西。

我想这样保存它们：{0x00, 0x13, 0xA2, 0x00}

可能吗？我还没找到办法。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:37:20.650

最简单的方法如下：

```
union {
  uint32_t dword;
  struct
  {
     uint8_t b0 : 4;
     uint8_t b1 : 4;
     uint8_t b2 : 4;
     uint8_t b3 : 4;
     uint8_t b4 : 4;
     uint8_t b5 : 4;
     uint8_t b6 : 4;
     uint8_t b7 : 4;
  } b;
//  uint8_t nibble[] : 4; // can't make an array!
} XbeeMAC; 
```

...

```
XbeeMAC.b.b0 = 0;
XbeeMAC.b.b1 = 1;
XbeeMAC.b.b2 = 2;
XbeeMAC.b.b3 = 3;
XbeeMAC.b.b4 = 4;
XbeeMAC.b.b5 = 5;
XbeeMAC.b.b6 = 6;
XbeeMAC.b.b7 = 7;
Serial.print(F(" XbeeMAC.dword=")); 
Serial.println(XbeeMAC.dword,HEX); 
```

输出

```
 XbeeMAC.dword=76543210 
```

如果您无法制作半字节数组，它们会被键入并存储为单独的 uint8_t。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:01:57.170

我会这样做：

```
uint8_t XbeeMAC[] = {0x00, 0x13, 0xA2, 0x00}; 
```

# java - 如何从文件中拆分给定的输入？

> ID：15071860
> 
> 赞同：0
> 
> 时间：2013-02-25T16:41:26.830
> 
> 标签：java, reducers

我已经编写了用于从文本文件传递整数输入的 Java 代码，例如`1 10 39 59 20 60 38`，当有空格时我必须拆分字符串。

输入在单行中给出`input.txt`

我的代码是：

```
public void reduce(Text key, Iterator<IntWritable> values,
        OutputCollector<Text, IntWritable> output, Reporter reporter)
        throws IOException {

    String calc;
    calc = key.toString();

    ArrayList<Integer> keys = new ArrayList<Integer>();
    String[] data = calc.split(" ");

    for (String s : data) {
        int intData = Integer.parseInt(s);
        keys.add(intData);
    }

    int val = 0;
    for (int a : keys) {
        // some tasks
    }
} 
```

分割线后，我将分离的值用于不同的任务。我的问题是如何拆分位于同一文件中的所有值（值也在不同的行中）并将它们存储在一个数组中？

假设如果以下是input.txt中给出的输入，那么如何拆分所有值并将它们存储在一个数组中？

**示例输入：**

```
1 4 92 58 30 82
49 50 38 30 29 20
... 
```

**预期输出：**

```
array1="1,4,92,58,30,82,49,50,38,30,29,20, .." 
```

当我将我的代码用于上述输入时，只考虑输入文件的最后一行 - 所有前面的行都被忽略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:37:16.970

如果您的类路径中有 commons-io-xx，您可以尝试以下代码。我使用 commons-io-2.4 进行演示。此外，我在这里假设输入为 String，您可以使用 Integer.parseInt(String str) 从输入文件中获取整数值。

```
package com.stack.overflow.works.service;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import org.apache.commons.io.FileUtils;

/**
 * 
 * @author sarath_sivan
 *
 */

public class FileIOService {

    private static final String BLANK_SPACE = " ";

    public static void main(String[] args) {
        FileIOService.run();
    }

    public static void run() {
        long startTime = System.currentTimeMillis();
        String fileName = "C:/Users/sarath_sivan/Desktop/input.txt";
        FileIOService.display(split(getContent(fileName)));
        long stopTime = System.currentTimeMillis();
        long elapsedTime = stopTime - startTime;
        System.out.println("Total Time: "+ elapsedTime + " Milliseconds...");
    }

    public static void display(List<String> splitsList) {
        for (String split: splitsList) {
            System.out.println(split);
        }
    }

    public static List<String> split(String content) {
        List<String> splitsList = new ArrayList<String>(Arrays.asList(content.split(BLANK_SPACE)));
        return splitsList;
    }

    public static String getContent(String fileName) {
        File file = new File(fileName);
        String content = null;
        try {
            content = FileUtils.readFileToString(file);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return content;
    }

} 
```

希望这会有所帮助...非常感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:45:55.637

This is pure speculation, but it seems that these lines are the culprits:

```
ArrayList<Integer> keys = new ArrayList<Integer>();
            String [] data = calc.split(" "); 
```

I assume you are invoking this method inside a `for` loop, which would of course only give you the last processed line. What you need to do is declare `keys` outside of the function so that way it isn't reinstantiated on each invocation of the surrounding function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:56:57.277

你也可以检查`calc`字符串，我猜它只会包含一行，然后你必须检查

```
key.toString() 
```

方法。

此外，使用 java 1.7 你可以初始化 ArrayList

```
ArrayList<Integer> keys = new ArrayList<>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T17:01:44.350

您似乎没有在 Text 键参数中连接文件的所有行。

我想您可以使用 Apache FileUtils 以单个字符串 var 读取文件（[http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToString(java. io.文件）](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readFileToString(java.io.File))）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T17:05:14.677

当您读取文件时，您基本上是在调用 readLine() 方法，该方法将为您提供一个包含当前行数据的字符串。但是在您的情况下，当您位于文件末尾时，将读取一个字符串，该字符串将被拆分并分配给字符串数组。所以在这里你以前的价值观会丢失。因此，为了避免这种情况，您必须使用一个临时数组来存储您当前的结果，然后将该结果添加到您的结果数组中。

```
String[] mainArray=new Array[255]; // 255 for example

String temp;

while((temp=br.readLine()!=null))
{

String[] tempArr=temp.split(" ");
addToMainArray(tempArr);

} 
```

希望这可以帮助。

# perl - 按列分组行并打印一个值

> ID：15071862
> 
> 赞同：-1
> 
> 时间：2013-02-25T16:41:30.110
> 
> 标签：perl, perl-data-structures

我有一个如下所示的文件：

```
LINE abc 1 somevalue
LINE abc 1 somevalue
LINE abc 1 somevalue
LINE def 2 somevalue
LINE def 2 somevalue
LINE abc 3 somevalue
LINE abc 3 somevalue
LINE mno 4 somevalue
LINE mno 4 somevalue
LINE def 5 somevalue
LINE def 5 somevalue 
```

我想打印一次出现的“abc”或“def”（可以由第 3 列标识）等，因为它存在于多行中。我想得到输出：

```
LINE abc 1 somevalue
LINE abc 1 somevalue
LINE abc 1 somevalue
LINE def 2 somevalue
LINE def 2 somevalue
LINE mno 4 somevalue
LINE mno 4 somevalue 
```

任何人都可以在 perl 中帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:52:20.230

您可以将已经看到的行保存在哈希中并跳过已经识别的行

```
use strict;
use warnings;

my %seen;

while (<>) {
    my @cols = split;
    if (defined($seen{$cols[1]})) {
        if ($seen{$cols[1]} == $cols[2]) {
            print;
        }
    } else {
        $seen{$cols[1]} = $cols[2];
        print;
    }
} 
```

`%seen`如果第二列已经出现在散列中，这会读取行并查看。如果是，则打印该行，如果第三列相同。否则，它将该行存储为新行以供以后参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:04:34.530

我必须说，您显示的输出与我可以对您的问题陈述提出的任何合理解释不匹配“*我想打印一次出现的 'abc' 或 'def' （可以通过第 3 列识别）* "

```
#!/usr/bin/env perl

while (my $line = <DATA>) {
    my @cols = split ' ', $line;
    next if ($cols[1] =~ /\A(?:abc|def)\z/) # if col 2 is abc or def
        and $cols[2] != 1;                  # and col 3 is not 1, then skip
    print $line;                            # otherwise print
}

__DATA__
LINE abc 1 somevalue
LINE abc 1 somevalue
LINE abc 1 somevalue
LINE def 2 somevalue
LINE def 2 somevalue
LINE abc 3 somevalue
LINE abc 3 somevalue
LINE mno 4 somevalue
LINE mno 4 somevalue
LINE def 5 somevalue
LINE def 5 somevalue 
```

或者，如果你想在命令行上使用它，

`$ perl -ane '$F[1] =~ /\A(?:abc|def)\z/ and $F[2] != 1 and next or print' input`

# ruby-on-rails-3 - JUnit 输出的黄瓜错误

> ID：15071864
> 
> 赞同：0
> 
> 时间：2013-02-25T16:41:34.623
> 
> 标签：ruby-on-rails-3, junit, cucumber, jruby

我在 1.9 模式下使用 jruby 1.6.7.2 在 Rails 3 环境中运行黄瓜测试。我正在使用的命令是`bundle exec cucumber --format junit --out features/reports feature/test.feature`

它运行该功能，然后显示一条错误消息：

```
undefined method `unwrap!' for #<IO:fd 1> (NoMethodError)
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/formatter/interceptor.rb:39:in `unwrap!'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/formatter/junit.rb:67:in `after_feature'
org/jruby/RubyBasicObject.java:1704:in `__send__'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:173:in `send_to_all'
org/jruby/RubyArray.java:1615:in `each'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:171:in `send_to_all'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:164:in `broadcast'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:19:in `visit_feature'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/features.rb:29:in `accept'
org/jruby/RubyArray.java:1615:in `each'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/features.rb:17:in `each'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/features.rb:28:in `accept'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:14:in `visit_features'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:163:in `broadcast'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/ast/tree_walker.rb:13:in `visit_features'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/runtime.rb:46:in `run!'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/cli/main.rb:43:in `execute!'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/../lib/cucumber/cli/main.rb:20:in `execute'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/cucumber:14:in `(root)'
org/jruby/RubyKernel.java:1068:in `load'
/home/jenkins/.rvm/gems/jruby-1.6.7.2/gems/cucumber-1.2.1/bin/cucumber:19:in `'
org/jruby/RubyKernel.java:1088:in `eval' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:24:07.097

问题在这里打开并解决：

[https://github.com/cucumber/cucumber/issues/376](https://github.com/cucumber/cucumber/issues/376)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T12:24:14.203

使用此命令

```
cucumber features/reports feature/test.feature --format junit --out features 
```

注意：`--out`功能（功能是这里的文件夹/目录）

# php - php - 当计数器不工作时

> ID：15071867
> 
> 赞同：0
> 
> 时间：2013-02-25T16:41:47.213
> 
> 标签：php

我正在尝试根据 sql 查询的结果创建一个计数器。sql查询抓取一堆数据，然后逐行计算持续时间的天数，然后根据总天数计算当天有多少结果。我一直试图弄清楚为什么我的计数器没有保留任何值。我知道 sql 结果正在提取数据。有任何想法吗？

这个想法是查看开始日期和当前日期之间的天数是否大于 365 天然后启动一个计数器，如果它小于 365 天启动一个不同的计数器。

```
$anymatches=mysql_num_rows($result_id);      
if ($anymatches > 0 )        
{
    while($row = mysql_fetch_array($result_id))
    {
        /*** Performing a calculation to get the number of days ***/
        $calctoday = date("Y-m-d"); // trying to capture current date

        $sd =  start_check_gap($row[1],45); // getting a date from the sql query
        $dateDiff = strtotime($calctoday) - strtotime($sd); // probably a better way to do this but calculating the difference between start date and current date.
        $totaldays = floor($dateDiff/(60*60*24));
        $data = $dateDiff / 86400;
        $data = number_format($data, 0, '.', '');
        if ($data > 365)
        {
            $pernumc1 = 0;
            while($data > 365)
            {
                $pernum1 = $pernumc1;
                $pernumc1++;
            }
        }
        elseif ($data < 365)
        {    
            $pernumc2 = 0;
            while($data < 365)
            {
                $pernum2 = $pernumc2;
                $pernumc2++;
            }

        }
        else
        {
            $pernumc3 = 0;
            while($data != FALSE)
            {
                $pernum3 = $pernumc3;
                $pernumc3++;
            }

        } 
```

谢谢大家在下面的评论是我的工作。我想发布我的正确版本，以防其他人遇到相同类型的问题。我能够根据您的无限循环评论找出问题所在，这两个问题。第一个问题是我的 sql 查询有错误。一旦我纠正了错误，我就会注意到你们提到的无限循环问题。基本上下面是我所做的。我删除了每个 if() 中的 while，并将开始的计数器变量 $pernumc1 移到了第一个 while 的上方，它就像一个魅力。看起来我仍然需要清理日期比较，但总的来说它有效。

```
 $anymatches=mysql_num_rows($result_id);   
        if ($anymatches > 0 )       
        {
                                $pernumc1 = 0;
                                $pernumc2 = 0;
                                $pernumc3 = 0;
            while($row = mysql_fetch_array($result_id))
            {

                       $calctoday = date("Y-m-d");

                       $sd =  start_check_gap($row[1],45);
                       $dateDiff = strtotime($calctoday) - strtotime($sd);
                       $totaldays = floor($dateDiff/(60*60*24));
                        $data = $dateDiff / 86400;
                        $data = number_format($data, 0, '.', '');

                            if ($data > 548)
                            {
                                    $pernum1 = $pernumc1;
                                    $pernumc1++;

                            }
                            elseif ($data > 365)
                            {   
                                    $pernum2 = $pernumc2;
                                    $pernumc2++;

                            }
                            elseif ($data < 365)
                            {
                                    $pernum3 = $pernumc3;
                                    $pernumc3++;

                            }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:55:18.227

发生了`$sd = start_check_gap($row[1],45);`什么？即价值是`$sd`多少？

第一个`while`循环永远不会退出，因为没有任何内容会修改`$data`.

```
while($data > 365)
{
    $pernum1 = $pernumc1;
    $pernumc1++;
} 
```

这同样适用于第二和第三`while`循环。

```
while($data < 365)
{
    $pernum2 = $pernumc2;
    $pernumc2++;
}

// ...

while($data != FALSE)
{
    $pernum3 = $pernumc3;
    $pernumc3++;
} 
```

您可能想要查看的另一个奇怪之处是：

```
$calctoday = date("Y-m-d");
// ...
$dateDiff = strtotime($calctoday) - strtotime($sd); 
```

这可以替换为：

```
$calcToday = time();
// ...
$dateDiff = strtotime($calctoday) - strtotime($sd); 
```

此外，`$calcToday`在整个计算过程中都是一样的，它可以移到`while`循环结构之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:59:14.193

你有很多问题，但这里有一个案例：

```
while($data < 365) {
    $pernum2 = $pernumc2;
    $pernumc2++;
} 
```

如果 $data 永远 < 365，则执行将进入此循环并且永远不会退出，因为 $data 不会以任何方式进行操作。除了第一个循环之外，每个循环中似乎都会发生同样的情况，因为 mysql_fetch_array 最终返回 false。

另一个小问题：

```
$calctoday = date("Y-m-d"); 
```

您在遍历 mysql 结果的循环中执行此操作，这是完全没有必要的，特别是考虑到您的最低单位是一天，将其移到循环之外，这样它就不会在每个 mysql 结果行上重新计算。

```
number_format($data, 0, '.', ''); 
```

PHP number_format 将数字转换为人类可读的字符串，但是在将其转换为字符串后将其与整数（365）进行比较，将其保留为数字并稍后在绝对必要时将其转换不是更好吗？

```
$pernumc1 = 0;
while($data > 365)
{
    $pernum1 = $pernumc1;
    $pernumc1++;
} 
```

在主循环中，如果 $data > 365，则运行此代码。这段代码在做什么？将 $pernumc1 设置为 0，然后进入无限循环（已解决），然后设置 $pernum1 = $pernumc1（基本上为 0），最后将 $pernumc1 增加 1，因此它永远不会超过一个（或者，在在这种情况下，它将是 MAX_INTEGER，因为循环没有结束）。

阅读“控制结构”，找到一些教程，并在你的脑海中准确组织你要做什么，然后编程。

# django - Django 没有名为 path.to 的模块

> ID：15071869
> 
> 赞同：3
> 
> 时间：2013-02-25T16:41:57.423
> 
> 标签：django

尝试加载 url /social/connections/ 时使用[django-allauth我收到以下错误。](https://django-allauth.readthedocs.org/en/latest/#)

```
Error during template rendering

In template /Users/user/Documents/workspace/iFetch/templates/socialaccount/snippets/login_extra.html, error at line 3
No module named path.to
1   {% load socialaccount %}
2   
3   {% providers_media_js %}
4   
5 
```

这是什么意思，我该如何解决或我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T16:51:22.500

`path.to.something`是文档中“将其替换为模块的实际路径”的简写。您可能已经逐字复制了某些内容，而没有将其替换为您的实际路径。

# functional-programming - 在 OCaml 中使用 continuation/CPS 实现尾递归 MergeSort

> ID：15071870
> 
> 赞同：0
> 
> 时间：2013-02-25T16:41:58.617
> 
> 标签：functional-programming, ocaml, continuation-passing

我正在尝试实现一个`tail-recursive` `MergeSort`in `OCaml`。

由于`Mergesort`自然不是尾递归的，所以我用`CPS`它来实现它。

我的实现也受到[OCaml 中的尾递归合并排序的启发](https://stackoverflow.com/questions/2529580/tail-recursive-merge-sort-in-ocaml)

**下面是我的代码**

* * *

```
let merge compare_fun l1 l2 = 
  let rec mg l1 l2 acc =
    match l1, l2 with
      | ([], []) -> List.rev acc
      | ([], hd2::tl2) -> mg [] tl2 (hd2::acc)
      | (hd1::tl1, []) -> mg tl1 [] (hd1::acc)
      | (hd1::tl1, hd2::tl2) ->
         let c = compare_fun hd1 hd2
         in 
         if c = 1 then mg l1 tl2 (hd2::acc)
         else if c = 0 then mg tl1 tl2 (hd2::hd1::acc)
         else mg tl1 l2 (hd1::acc)
  in 
  mg l1 l2 [];;

let split_list p l = 
  let rec split_list p (acc1, acc2) = function
    | [] -> (List.rev acc1, List.rev acc2)
    | hd::tl ->
      if p > 0 then split_list (p-1) (hd::acc1, acc2) tl
      else split_list (p-2) (acc1, hd::acc2) tl
  in 
  split_list p ([], []) l;;

let mergeSort_cps compare_fun l =
  let rec sort_cps l cf =  (*cf = continuation func*)
    match l with 
      | [] -> cf []
      | hd::[] -> cf [hd]
      | _ ->
        let (left, right) = split_list ((List.length l)/2) l
        in 
        sort_cps left (fun leftR -> sort_cps right (fun rightR -> cf (merge compare_fun leftR rightR)))
  in 
  sort_cps l (fun x -> x);; 
```

* * *

当我编译它并使用 a 运行它时`1,000,000` `integers`，它给出了`stackoverflow`. **为什么？**

* * *

**编辑**

这是我用于测试的代码：

```
let compare_int x y =
  if x > y then 1
  else if x = y then 0
  else -1;;

let create_list n = 
  Random.self_init ();
  let rec create n' acc =
    if n' = 0 then acc
    else 
      create (n'-1) ((Random.int (n/2))::acc)
  in 
  create n [];;

let l = create_list 1000000;;

let sl = mergeSort_cps compare_int l;; 
```

在`http://try.ocamlpro.com/`，它给出了这个错误：`Exception: RangeError: Maximum call stack size exceeded.`

在`local ocaml top level`，它没有任何问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:32:26.580

添加另一个答案来说明一个单独的观点：回答者之间的大部分混淆似乎是由于您不使用标准 OCaml 编译器，而是在 JavaScript 之上运行不同 OCaml 后端的 TryOCaml 网站，因此具有略微不同的优化和运行时特性。

我可以可靠地重现这样一个事实，即在[TryOCaml 网站上](http://try.ocamlpro.com/)，您显示的 CPS 样式函数`mergeSort_cps`在长度列表上失败，`1_000_000`并出现以下错误：

```
Exception: InternalError: too much recursion. 
```

我的分析是，这*不是*由于缺乏 tail-rec-ness，而是由于 Javascript 后端缺乏对 CPS 转换调用为 tailrec 的非明显方式的支持：递归通过lambda 抽象边界（但仍处于尾部位置）。

*在direct*、 non-tail-rec 版本中打开代码会使问题消失：

```
let rec merge_sort compare = function
  | [] -> []
  | [hd] -> [hd]
  | l ->
    let (left, right) = split_list (List.length l / 2) l in
    merge compare (merge_sort compare left) (merge_sort compare right);; 
```

正如我在另一个答案中所说，此代码具有对数堆栈深度，因此它的使用不会产生 StackOverflow（tail-rec 不是一切）。Javascript 后端可以更好地处理更简单的代码。

请注意，您可以通过使用更好的实现`split`（仍然使用您的定义`merge`）来显着加快速度，从而避免双重遍历`List.length`然后拆分：

```
let split li =
  let rec split ls rs = function
    | [] -> (ls, rs)
    | x::xs -> split rs (x::ls) xs in
  split [] [] li;;

let rec merge_sort compare = function
  | [] -> []
  | [hd] -> [hd]
  | l ->
    let (left, right) = split l in
    merge compare (merge_sort compare left) (merge_sort compare right);; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T06:00:25.087

阅读评论，您的错误似乎`Stack_overflow`很难重现。

然而，您的代码并不完全采用 CPS 或尾递归：在 中，对和`merge_sort`的调用是在非尾调用位置进行的。`split_list``merge`

问题是：通过进行 CPS 转换和大量使用累加器，与递归相关的最差堆栈深度是多少？在调用上保存堆栈深度`sort`实际上并不是很有趣：因为每个都将列表分成两部分，最差的堆栈深度将是`O(log n)`输入`n`列表的大小。

相反，如果它们不是以累加器传递样式编写的，`split`并且`merge`会线性`O(n)`使用堆栈，因此它们对于进行尾记录很重要。由于您对这些例程的实现是 tail-rec，因此无需担心堆栈使用，也无需将排序例程本身转换为 CPS 形式，这会使代码更难阅读。

（请注意，这个对数递减参数是特定于合并排序的。在最坏的情况下，快速排序可以使用线性堆栈，因此使其成为尾记录可能很重要。）

# cordova - 推送消息Phonegap

> ID：15071871
> 
> 赞同：0
> 
> 时间：2013-02-25T16:41:59.163
> 
> 标签：cordova, push-notification

我在一个 phonegap 应用程序上工作，我想添加一条推送消息。

我阅读了很多文档，但找不到用于 phonegap 的推送系统。我找到了有关谷歌云消息传递和 Iphon 推送系统的信息，但我找不到这两种应用程序类型的解决方案。

有没有解决办法

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:16:46.613

你见过 GenericPush PhoneGap 插件吗？更多信息：[https ://build.phonegap.com/blog/introducing-genericpush-plugin](https://build.phonegap.com/blog/introducing-genericpush-plugin)

# excel - 无法看到打开的 Excel

> ID：15071874
> 
> 赞同：2
> 
> 时间：2013-02-25T16:42:05.960
> 
> 标签：excel, vbscript

下面的代码创建并打开了一个新的 Excel 实例，但是尽管将`Visible`属性设置为`True`.

谁能帮我解决这个问题？

```
Set Exobj = CreateObject("Excel.Application")

Set Newbook = Exobj.Workbooks.Add()

Exobj.Application.Visible = True

Newbook.SaveAs("C:\Users\ACER\Desktop\Project Folder\Test6.xlsx")

Exobj.Workbooks.Open("C:\Users\ACER\Desktop\Project Folder\Test6.xlsx") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T18:10:03.497

Excel.Application 的奇怪行为通常是由僵尸（之前运行脚本遗留的未正确终止的 Excel 实例）引起的。正如Ansgar所说：在任务列表中运行时，使用任务管理器查看您之前是否没有Excel，并且恰好有一个Excel。

**添加：**

请参阅[此处](https://stackoverflow.com/a/13921745/603855)了解一些背景信息和避免 Excel 僵尸的策略。

# javascript - 获取相同大小的 youtube 和 Vimeo 缩略图

> ID：15071875
> 
> 赞同：0
> 
> 时间：2013-02-25T16:42:06.277
> 
> 标签：javascript, asp.net-mvc, youtube, vimeo

我有一个来自 youtube 和 vimeo 的 VideoID 列表，我想在列表中显示缩略图。

问题是 vimeo 只允许 3 种尺寸：小、中、大和 youtube 也 3：默认、mq、hq。但是 youtube 缩略图中的大小没有与 vimeo thumnbail 匹配。

```
<videos> 
  <video> 
    [skipped]
    <thumbnail_small>http://ts.vimeo.com.s3.amazonaws.com/235/662/23566238_100.jpg</thumbnail_small> 
    <thumbnail_medium>http://ts.vimeo.com.s3.amazonaws.com/235/662/23566238_200.jpg</thumbnail_medium> 
    <thumbnail_large>http://ts.vimeo.com.s3.amazonaws.com/235/662/23566238_640.jpg</thumbnail_large> 
    [skipped]
</videos> 
```

youtube给了我：

```
 [skipped]
      <media:thumbnail url='http://img.youtube.com/vi/jXE6G9CYcJs/default.jpg'
        height='90' width='120' time='00:01:41' yt:name='default'/>
      <media:thumbnail url='http://img.youtube.com/vi/jXE6G9CYcJs/hqdefault.jpg'
        height='360' width='480' yt:name='hqdefault'/>
      <media:thumbnail url='http://img.youtube.com/vi/jXE6G9CYcJs/mqdefault.jpg'
        height='180' width='320' yt:name='mqdefault'/>
      <media:thumbnail url='http://img.youtube.com/vi/jXE6G9CYcJs/1.jpg'
        height='90' width='120' time='00:00:50.500' yt:name='start'/>
      [skipped] 
```

我想显示所有缩略图大小相同的视频列表。（我的设计师有一个特定的尺寸）你建议我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T04:57:16.193

我通过使用 640 像素宽的 Vimeo 的“thumbnail_large”来伪造它，然后我使用 YouTube 的“mqdefault”并在我的图像标签上设置了 640 的宽度。这会放大它，看起来质量有点低，但我正在处理一个响应式框架......在桌面上，缩略图将适合一个更小的网格（并且看起来很好）但在手机或小型平板电脑上，它们会堆叠起来，至少它们都是相同的宽度。我可能会对其进行更多调整，但这就是我现在破解它的方式。YMMV！

# ubuntu - 使用 smpp 和 kannel 向操作员发送短信

> ID：15071877
> 
> 赞同：0
> 
> 时间：2013-02-25T16:42:10.677
> 
> 标签：ubuntu, smpp, kannel

我使用 ubuntu 10.10

目前我使用此代码通过**clickatell**发送短信

```
 Message = space_to_plus("message de test."),
    Url = io_lib:format("http://api.clickatell.com/http/sendmsg?user=...&password=...&api_id=...&to=216~s&text=~s", [Name, Message]),
    http:request(lists:flatten(Url), sms). 
```

**目前我们与运营商 Orange**达成协议

 ****我们将通过此运营商**发送短信

 ****短信将使用 smpp 3.4 和 API kannel 发送**

我使用以下命令安装 kannel：

```
apt-get install libxml2

apt-get install kannel 
```

对于 kannel.conf 的配置，我设置了这个值：

```
 group = core
    admin-port = 13000
    smsbox-port = 13001
    admin-password = zaibadmin
    status-password = zaibstatus
    log-file = "/var/log/kannel/bearerbox.log"
    log-level = 0
    box-deny-ip = "*.*.*.*"
    box-allow-ip = "127.0.0.1"

group = smsc
smsc = smpp
smsc-id = testsmsc
host = localhost
port = 2775
receive-port = 2775 
smsc-username = 'smppclient'
smsc-password = password
system-type = 'VMA'
service-type = 'test'
interface-version = 34
address-range = ''
msg-id-type = 0

    group = modems
    id = teltonika
    name = "Teltonika E12"
    detect-string = "Undefined"
    enable-mms = true
    init-string = "AT+CNMI=2,2,0,1,1"
    speed = 115200

    group = smsbox
    bearerbox-host = localhost
    sendsms-port = 13013
    global-sender = 13013
    sendsms-chars = "0123456789 +-"
    log-file = "/var/log/kannel/smsbox.log"
    log-level = 0
    access-log = "/var/log/kannel/access.log"

    group = sendsms-user
    username = kannel
    password = kannel
    concatenation = true
    max-messages = 3

    group = sms-service
    keyword = default
    get-url = "http://localhost/kannel/receivesms.php?sender=%p&amp;text=%b"
    accept-x-kannel-headers = true
    max-messages = 3
    concatenation = true
    catch-all = true 
```

我认为我们应该从**操作员橙色**中获得相同的参数，例如：

```
smsc-username
    smsc-password
    host
    port 
```

当我在浏览器中尝试：

```
http://10.20.20.26:13000/status?password=zaibstatus 
```

我有 ：

```
Kannel bearerbox version `1.4.3'. Build `Apr 6 2010 13:16:08', compiler `4.4.3'. System Linux, release 2.6.32-41-generic, version #90-Ubuntu SMP Tue May 22 11:31:25 UTC 2012, machine i686\. Hostname ubuntu, IP 127.0.1.1\. Libxml version 2.7.6\. Using OpenSSL 0.9.8k 25 Mar 2009\. Compiled with MySQL 5.1.41, using MySQL 5.1.63\. Using native malloc.

Status: running, uptime 0d 0h 0m 38s

WDP: received 0 (0 queued), sent 0 (0 queued)

SMS: received 0 (0 queued), sent 0 (0 queued), store size -1

SMS: inbound (0.00,0.00,0.00) msg/sec, outbound (0.00,0.00,0.00) msg/sec

DLR: 0 queued, using internal storage

Box connections:
    smsbox:(none), IP 127.0.0.1 (0 queued), (on-line 0d 0h 0m 33s)

SMSC connections:
    testsmsc    SMPP:localhost:2775/2775:'smppclient':'VMA' (re-connecting, rcvd 0, sent 0, failed 0, queued 0 msgs) 
```

当我尝试：

```
http://10.20.20.26:13013/cgi-bin/sendsms?username=kannel&password=kannel&to=97919860&text=ZAIB+KANNEL+WORk 
```

我有 ：

```
3: Queued for later delivery 
```

可以sameone帮我更正kannel.conf的配置吗

因为我认为我在这个配置中犯了一个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:08:50.613

我在网上找到了另一个与 kannel.conf 文件相关的配置

```
group = core
admin-port = 13000
smsbox-port = 13001
admin-password = bar
log-file = "/tmp/kannel.log"
log-level = 0
box-deny-ip = "*.*.*.*"
box-allow-ip = "127.0.0.1"

group=smsc
smsc=smpp
smsc-id=internal
interface-version=34
host=internal.smpp.ddj.co.za
port=9102
system-id=donsmpp
smsc-password=strngpas
system-type=default
transceiver-mode=1

group = smsbox
bearerbox-host = 127.0.0.1
sendsms-port = 13013
log-level = 0 
```

当然我必须更改下面的设置

```
IP address
 System-id (username)
 Password
 port 
```

我想知道正确的配置

因为我从旧配置中删除了这部分：

```
group = modems
    id = teltonika
    name = "Teltonika E12"
    detect-string = "Undefined"
    enable-mms = true
    init-string = "AT+CNMI=2,2,0,1,1"
    speed = 115200

 group = sendsms-user
    username = kannel
    password = kannel
    concatenation = true
    max-messages = 3

    group = sms-service
    keyword = default
    get-url = "http://localhost/kannel/receivesms.php?sender=%p&amp;text=%b"
    accept-x-kannel-headers = true
    max-messages = 3
    concatenation = true
    catch-all = true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T16:11:01.220

在您的状态中显示 SMSC 连接：testsmsc 处于重新连接状态，这就是它显示状态 **Queued for later delivery 的**原因。您需要**在线**建立 smsc 连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-25T08:00:34.193

激活*Kannel SMSBox*

```
sudo mkdir -p /var/log/kannel /var/run/kannel /var/spool/kannel/store
sudo chown -R kannel /var/log/kannel /var/run/kannel /var/spool/kannel/store
sudo usermod -a -G dialout kannel

sudo sed -i 's/#START_SMSBOX/START_SMSBOX/' /etc/default/kannel 
```

完毕！****

# php - 编译失败：\P 后的未知属性名称

> ID：15071880
> 
> 赞同：3
> 
> 时间：2013-02-25T16:42:16.047
> 
> 标签：php, pcre

使用 PHP 5.3.1，PCRE 已启用，版本为 7.9 2009-04-11。

```
$string = preg_replace("/\p{Number}/u", "", $string); 
```

产生错误：编译失败： \P 之后的未知属性名称。. .

我知道这是一个在 PHP 5.3 及更高版本中修复的错误，但我显然和其他使用我的脚本的人一样得到了它。据我所知，这可能与正在使用的 PCRE 版本或它的编译方式有关。

我无法控制正在使用的 PHP 的编译版本。

1.  如果 PCRE 已正确编译，有没有办法检查 PHP 脚本？

2.  我也在使用：

    preg_match("/\p{Lu}/u", $caseChar); preg_match("/\p{Ll}/u", $caseChar); preg_match("/\p{L}/u", $string, $caseChar);

如果发现不正确的 PCRE（如果 1\. 可能），是否有上述 preg_replace 和 preg_match 表达式的替代方法？

谢谢，

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:46:09.600

[http://php.net/manual/en/regexp.reference.unicode.php](http://php.net/manual/en/regexp.reference.unicode.php)

`\p{Number}`不是上述支持的属性代码。它是`\p{N}`，甚至只是`\pN`。

# ruby-on-rails-3 - Rails 路由中的嵌套资源问题

> ID：15071886
> 
> 赞同：0
> 
> 时间：2013-02-25T16:42:36.450
> 
> 标签：ruby-on-rails-3

我试图在我的路由配置中设置一个嵌套资源，但我无法找出问题所在。

这是我的路线配置中的相关代码

```
resources :positions, :only => [:new,:create,:edit,:update,:destroy]

resources :etkh_profiles, :path => "members", :only => [:new,:create,:show,:index] do
  resources :positions
  collection do
    post 'search'
  end
end 
```

它在我尝试“/positions/new”时有效，但是当我尝试“members/positions/new”时出现此错误

```
No route matches [GET] "/members/positions/new" 
```

有任何想法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:13:08.327

您需要使用的 URL 更像是`/members/:memberid/positions/new`因为您已指定`positions`包含在`etkh_profile`. 您可以通过运行来检查这一点`rake routes`。

# c++ - 二叉搜索树（搜索函数返回 NULL）

> ID：15071888
> 
> 赞同：0
> 
> 时间：2013-02-25T16:42:40.243
> 
> 标签：c++

```
#include <iostream>
#include <string>
#include <fstream>
using namespace std;
template <class T>
struct TreeNode{
  string value;
  T key;
  TreeNode<T> *Parent;
  TreeNode<T> *LeftChild;
  TreeNode<T> *RightChild;
  TreeNode (T k,string Val)
  {
           this->value=Val;
           this->key=k;
           this->Parent=NULL;
           this->LeftChild=NULL;
           this->RightChild=NULL;
  }
};

template <class T>
class BinaryTree{
  private:
       TreeNode<T> *Root;        
  public: 
       BinaryTree();
       void LoadTree(const char file[]);
       ~BinaryTree();
       void insertNode(T Key,string Val);
       void deleteNode(T Key);
       string searchNode(T Key);
       void UpdateKey(T newkey,T oldkey);
       int Height(TreeNode<T> *node);
       int height();
};

template <class T>
BinaryTree<T>::BinaryTree()
{
    Root=NULL;                       
}

template <class T>
void BinaryTree<T>::LoadTree(const char *file)
{
   ifstream fin;
   fin.open(file);
   string buffer;
   T buff;
while (!fin.eof())
{
      getline(fin,buffer,'~');
      fin>>buff;

      TreeNode<T> *temp,*temp1;
      temp=Root;
      temp1=temp;
      while (temp!=NULL)
      {
          temp1=temp;  
          if (temp->key>buff)
          {
              temp=temp->LeftChild;
          }
          else if (temp->key<buff)
          {
              temp=temp->RightChild;
          }
      }
      temp=new TreeNode<T>(buff,buffer);          
      if (temp!=Root)
      temp->Parent=temp1;
      cout<<temp->value<<temp->key<<endl;
      if (temp->LeftChild!=0)
      cout<<(temp->LeftChild)->value<<endl;
}
fin.close();
}

template <class T>
string BinaryTree<T>::searchNode(T Key)
{        
TreeNode<T> *temp=Root;
while (temp!=NULL)
{
      if (temp->key==Key)
      {
          return temp->value;
      }
      if (temp->key>Key)
      {
          temp=temp->LeftChild;
      }
      else if (temp->key<Key)
      {
           temp=temp->RightChild;
      }                  
}     
return "\0";
} 
```

以上是用于从文件构建树并在其中搜索节点的头文件和构造函数和函数。我不明白我的函数中缺少什么，因为每当我运行搜索函数时，它总是返回 NULL，这是默认值当节点键存在于文件/树中时的条件。非常感谢大家，它现在正在工作。我真的很感激。我使用我的插入功能来建立我的树。

```
template <class T>
void BinaryTree<T>::insertNode(T Key,string Val)
{
 TreeNode<T> **temp=&Root;
 TreeNode<T> *temp1=NULL;
 if (*temp==NULL)
 {
     Root=new TreeNode<T>(Key,Val);
     return;
 }
 else{            
 while (*temp!=NULL)
 {
       temp1=*temp;
       if (temp1->key>Key)
       {
           temp=&(*temp)->LeftChild;
       }
       else if (temp1->key<Key)
       {
            temp=&(*temp)->RightChild;
       }
 }
 }
 *temp=new TreeNode<T>(Key,Val);              
 (*temp)->Parent=temp1;
}

template <class T>
void BinaryTree<T>::LoadTree(const char *file)
{
ifstream fin;
fin.open(file);
string buffer;
T buff;
while (!fin.eof())
{
      getline(fin,buffer,'~');
      fin>>buff;
      insertNode(buff,buffer);
}          
fin.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:46:43.390

您的`Root`成员永远不会被设置。`NULL`因此，当您尝试搜索树时，它的值仍然存在，并且`while`永远不会被输入。

### 提示：

1.  编写一个添加节点的方法，并在您的 LoadTree 方法中使用它。
2.  在所述功能中：如果尚未存储任何节点，您将节点存储在哪里？（提示：它是您班级的重要成员）。

# c# - 报告查看器版本 11.0.0.0。参数下拉菜单不会第二次打开

> ID：15071891
> 
> 赞同：3
> 
> 时间：2013-02-25T16:43:02.287
> 
> 标签：c#, asp.net, reportviewer

我使用 Microsoft.ReportViewer.WebForms 版本 11.0.0.0 创建了一个 ASP.NET (C#)。如果用户选择了参数多选下拉菜单，然后单击离开而不选择列表中的项目，下拉菜单将关闭但不会重新打开，除非刷新页面。

这似乎只发生在 MS Internet Explorer 中（使用 IE9 进行测试）。Chrome 似乎没有这个问题。

有谁知道对此的修复或已知问题的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-23T08:53:44.467

根本原因 1：可能是下拉 Z-index 低 根本原因 2：如果您使用更新面板渲染模式和更新模式需要更改为始终

IE Compadability 视图可能有问题检查 IE 视图类型

# javascript - 使用 jQuery 使 div 上下动画

> ID：15071893
> 
> 赞同：0
> 
> 时间：2013-02-25T16:43:07.307
> 
> 标签：javascript, jquery

我试图在鼠标悬停事件期间让 div 从其当前位置上下移动 - 我有跟随但它只工作一次然后停止而不是不断循环？

```
tiptitle.stop(true, true).animate({
    'top': '5px'
}, 100).stop(true, true).animate({
    'top': '0px'
}, 100); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:49:43.713

做一个无限循环

```
function animate(isOpen) {
    tiptitle.stop().animate({'top': isOpen ? '5px' : '0px'}, 100, function() { animate(!isOpen); })
} 
```

# php - 使用 ${$varname} 动态访问 _POST 和 _GET

> ID：15071907
> 
> 赞同：0
> 
> 时间：2013-02-25T16:43:47.493
> 
> 标签：php, variables, post, dynamic, get

[最终编辑]

似乎我错过了变量变量 PHP 手册 [http://www.php.net/manual/en/language.variables.variable.php](http://www.php.net/manual/en/language.variables.variable.php)中包含的重要警告 ：

> 请注意，变量变量不能在函数或类方法中与 PHP 的超全局数组一起使用。变量 $this 也是一个不能动态引用的特殊变量。

[原始问题]

我在尝试设置/获取 html/服务器变量 $_POST、$_GET、$_SESSION 等时遇到了问题。动态地使用变量来保存它的名称：

```
// Direct name
${'_GET'}['test'] = '1';

// Variable-holded name
$varname = '_GET';
${$varname}['test'] = '2';

echo "value is " . $_GET['test']; 
```

将输出：

> 值为 1

知道为什么吗？

[编辑 1] 这就是我想以这种方式使用它的原因：

```
class Variable {
    protected static $source;

    public function __get($key) {

        // Some validation / var manip needed here

        if ( isset( ${self::$source}[$key] ) ) {
            return ${self::$source}[$key];
        }
    }

    public function __set($key, $value) {

        // Some validation / var manip needed here too
        ${self::$source}[$key] = $value;
    }
}

final class Get extends Variable {
    use Singleton;

    public static function create() {
        parent::$source = "_GET";
    }
}

final class Post extends Variable {
    use Singleton;

    public static function create() {
        parent::$source = "_POST";
    }
}

final class Session extends Variable {
    use Singleton;

    public static function create() {
        parent::$source = "_SESSION";
    }
} 
```

实例化时在单例构造函数中调用 create

[编辑 2] 使用 PHP 5.4.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:00:40.473

我猜这与您不应该`$_GET`像这样分配值有关。无论如何，这工作得很好：

```
$source = '_GET';
echo ${$source}['test'];
// URL: http://domain.com/thing.php?test=yes
// output: "yes" 
```

## 编辑

巧合的是，今天我回去更新一些旧代码，看起来我正试图在一个类中完全实现它，但它不起作用。我相信`global`在尝试通过变量访问超全局变量之前使用关键字也可以解决您的问题。

```
Class MyExample {
    private $method = '_POST';

    public function myFunction() {
        echo ${$this->method}['index']; //Undefined index warning
        global ${$this->method};
        echo ${$this->method}['index']; //Expected functionality
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:47:03.100

您可能正在寻找可变变量。取自 PHP.net：

```
<?php
$a = 'hello';
?>

<?php
$$a = 'world';
?>

<?php
echo "$a ${$a}";
//returns: hello world
//same as
echo "$a $hello";
?> 
```

***编辑*** php.net 上的另一个用户有你的确切问题。这是他的答案。

```
<?php 
function GetInputString($name, $default_value = "", $format = "GPCS") 
    { 

        //order of retrieve default GPCS (get, post, cookie, session); 

        $format_defines = array ( 
        'G'=>'_GET', 
        'P'=>'_POST', 
        'C'=>'_COOKIE', 
        'S'=>'_SESSION', 
        'R'=>'_REQUEST', 
        'F'=>'_FILES', 
        ); 
        preg_match_all("/[G|P|C|S|R|F]/", $format, $matches); //splitting to globals order 
        foreach ($matches[0] as $k=>$glb) 
        { 
            if ( isset ($GLOBALS[$format_defines[$glb]][$name])) 
            {    
                return $GLOBALS[$format_defines[$glb]][$name]; 
            } 
        } 

        return $default_value; 
    } 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:50:04.477

为什么不直接使用包含 $_GET、$_POST 和 $_COOKIE 的 $_REQUEST？还是我误解了目的？

# c# - 搜索对 Type.Method 的调用的工具？

> ID：15071915
> 
> 赞同：1
> 
> 时间：2013-02-25T16:44:08.333
> 
> 标签：c#, .net

这可能是一个疯狂的梦想，但有没有一种方法可以让我说搜索我的所有代码，如果你看到一个类型为 TYPE 的变量并且它调用 THISETHOD 将其添加到结果列表中。该方法是一个通用名称，变量可以称为任何名称（例如单个字母），因此很难搜索。我正在搜索 TYPE 并查看该方法的范围，这有点痛苦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:07:00.637

在 Visual Studio 中右键单击该方法，然后选择“查找所有引用”。应该整理你:-)

# c# - Fluent NHibernate Map Guid to Oracle Varchar2 column

> ID：15071921
> 
> 赞同：1
> 
> 时间：2013-02-25T16:44:31.737
> 
> 标签：c#, fluent-nhibernate

Can anyone help me how to map c# `system.guid` to oracle `varchar2(100)`. I tried using

```
Id(m=>m.Id).Column("xxx").GeneratedBy.Guid(); 
```

The query generated is without quotes and so failing insert in oracle.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:53:53.830

有根据的猜测。

Id(m=>m.Id).Column("xxx").Not.Nullable() .CustomSqlType("varchar2(100)").GeneratedBy.Guid();

CustomSqlType 是要考虑的新事物。

# python - Authenticate with private key using Paramiko Transport (channel)

> ID：15071924
> 
> 赞同：5
> 
> 时间：2013-02-25T16:44:42.217
> 
> 标签：python, python-2.7, paramiko, private-key

I'm trying to use Paramiko to open (and maintain) a channel so that I can issue a few commands; however, I'm unable to find an example using paramiko.Transport AND using a private key. I have been able to connect to my server and just run a command using the following code:

```
 ssh = paramiko.SSHClient()
    paramiko.util.log_to_file("support_scripts.log")
    private_key = paramiko.RSAKey.from_private_key_file(rsa_private_key)
    ssh.connect(server, username=user, password='', pkey=private_key)
    ssh_stdin, ssh_stdout, ssh_stderr = ssh.exec_command(cmd) 
```

No problems there. From what I understand, that doesn't create an "interactive session", meaning I can't issue `cd /home/my_user/my_scripts` and then issue another command like `python script_in_my_scripts_folder.py`. Therefore, I'm trying to use the Paramiko Transport object which can help me maintain an interactive session. Searching high and low, none of the examples I've found work for me. Right now, the following code returns "SSHException: Channel is not open" on line 204, which is the exec_command below:

```
 PRIVATEKEY = '/home/my_user/.ssh/id_rsa'
    user = 'harperville'
    server = '10.0.10.10'
    port = 22
    paramiko.util.log_to_file("support_scripts.log")
    trans = paramiko.Transport((server,port))
    rsa_key = paramiko.RSAKey.from_private_key_file(PRIVATEKEY)
    trans.connect(username=user, pkey=rsa_key)
    session = trans.open_channel("session")
    session.exec_command('cd /home/harperville/my_scripts/') 
```

I understand the gist of what it's telling me but I can't find or understand the documentation to help me get past this problem.

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:59:56.870

我在这个网站的帮助下发现了这个问题：http: [//j2labs.tumblr.com/post/4477180133/ssh-with-pythons-paramiko](http://j2labs.tumblr.com/post/4477180133/ssh-with-pythons-paramiko)

如果我改变：

```
session = trans.open_channel("session") 
```

至：

```
session = trans.open_session() 
```

然后，我可以使用以下命令运行命令：

```
session.exec_command('cd /home/harperville/my_scripts/') 
```

# ios - How to make a keyboard return on the done button

> ID：15071926
> 
> 赞同：0
> 
> 时间：2013-02-25T16:44:44.763
> 
> 标签：ios, objective-c, xcode, uikeyboard, custom-cell

I have created a custom cell, containing a text field. I would like the keyboard to disappear when the user presses the done button (as seen in the screen shot below).

The custom cell is located in "AccountViewCell". In my code, I call and display this custom cell:

```
- (UITableViewCell *)tableView:(UITableView *)tableView2 cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0)
    {
        static NSString *CellIdentifier = @"AccessCard";
        static NSString *Cellnib = @"AccountViewCell";

        AccountViewCell *cell = [tableView2 dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) {

            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:Cellnib owner:self options:nil];
            cell = (AccountViewCell *)[nib objectAtIndex:3];
        }

        cell.data.text = [tableData objectAtIndex:indexPath.row];

        return cell;
    }

    if (indexPath.section == 1)
    {
        static NSString *CellIdentifier = @"Password";
        static NSString *Cellnib = @"AccountViewCell";

        AccountViewCell *cell = [tableView2 dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) {

            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:Cellnib owner:self options:nil];
            cell = (AccountViewCell *)[nib objectAtIndex:4];
        }

        cell.data.text = [tableData objectAtIndex:indexPath.row];

        return cell;
    }

    return 0;
} 
```

The user is able to input text, however I cannot seem to make the keyboard disappear.

I have also created a method in AccountViewCell to hide the keyboard:

```
- (void)textfieldInput
{
    UIToolbar* padToolBar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 50)];
    padToolBar.barStyle = UIBarStyleBlackTranslucent;

    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]
                                   initWithTitle:@"Done"
                                   style:UIBarButtonItemStyleDone
                                   target:self
                                   action:@selector(doneWithPad)];
    [doneButton setWidth:65.0f];

    padToolBar.items = [NSArray arrayWithObjects:
                        [[UIBarButtonItem alloc]initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelPad)],
                        [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil],
                        doneButton,
                        nil];

    [padToolBar sizeToFit];
    textField.inputAccessoryView = padToolBar;

} 
```

But when I call it in the cellForRowAtIndexPath, it does not work.

```
AccountViewCell* keyboard = [[AccountViewCell alloc] init];
[keyboard textfieldInput]; 
```

I am wondering if there is a way to hide the keyboard when the done key is pressed. A screen shot of my application is below:

![keyboard does not disappear](../Images/4ef516e7dcba391a1882c291c1845c5b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:56:28.570

# .h`UITextFeildDelegate`文件中包含方法

提供`[textfeild setDelegate:self];`

```
[textField setReturnKeyType:UIReturnKeyDone]; 
```

包括

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
 {
[textField resignFirstResponder];
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:49:11.670

在完成按钮的操作方法中使用这一行代码：

`[myTextField resignFirstResponder];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:57:07.173

您必须`UITextViewDelegate`在头文件中隐含 ，然后将文本视图的委托设置为您的委托。通常你会在同一个类文件中做这一切，所以你可以做

```
aTextField.delegate = self; 
```

设置好委托后，您可以使用适当的委托方法：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textView resignFirstResponder];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T01:04:30.397

在 .xib 文件中连接 UITextField 时，将目标连接到 DidEndOnExit。

# ruby-on-rails - Rails 时间在控制台会话过程中不会改变

> ID：15071930
> 
> 赞同：2
> 
> 时间：2013-02-25T16:44:56.540
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在开发 Rails 3.2 应用程序。我们在 Ruby 1.9.3 和 Postgres 9.1.3 上运行。网站上的大部分内容都是由 published_at 日期时间戳组织的。面向公众的查询要求提供与 Time.zone.now 相关的内容：

```
Post.where(["published_at <= ?", Time.zone.now]) 
```

在加载控制台并询问这篇文章时，生成了这个查询：

```
SELECT "posts".* FROM "posts" WHERE (published_at <= '2013-02-25 16:32:19.852109') 
```

然后 10 分钟后在同一个控制台会话中：

```
SELECT "posts".* FROM "posts" WHERE (published_at <= '2013-02-25 16:32:19.852109') 
```

请注意，Rails 注入查询的时间没有改变。如果我在本地开发会话运行几个小时，Rails 注入的时间戳总是相同的。

另外，我尝试将 Time.zone.now 换成 Time.now 甚至 Time.new，结果都一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:55:02.710

像这样重写你的范围：

```
scope :myscope, ->{ where(["published_at <= ?", Time.zone.now]) } 
```

`Time.zone.now`出现“冻结”，因为范围宏只执行**一次**（加载类时）。使用 lambda 可以防止这种情况。

# objective-c - How can I produce a blinking label

> ID：15071933
> 
> 赞同：-3
> 
> 时间：2013-02-25T16:44:59.827
> 
> 标签：objective-c, xcode, uilabel, nstimer

I want a label to be shown for 0.4 seconds and then hidden for 0.8 seconds - in an infinite loop.

How can I pull that off?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:48:44.977

[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)和`UIView`s [hidden](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/hidden)属性是一种可能性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:07:35.617

我会说使用 NSTimer。您可以通过以下方式进行操作：

说你的标签是`myLabel`：

```
@property (weak, nonatomic) IBOutlet UILabel *myLabel; 
```

* * *

您应该创建一个由以下方法调用的方法`NSTimer`：

```
- (void)changeLabelState:(NSTimer *)timer
{
    if(self.myLabel.hidden == TRUE)
    {
        self.myLabel.hidden = FALSE; //change comparassion to assing
        [NSTimer scheduledTimerWithTimeInterval:0.4
            target:self
            selector:@selector(changeLabelState:)
            userInfo:nil
            repeats:NO];
    }
    else
    {
        self.myLabel.hidden = TRUE;
        [NSTimer scheduledTimerWithTimeInterval:0.8
            target:self
            selector:@selector(changeLabelState:)
            userInfo:nil
            repeats:NO];
    }
} 
```

* * *

并像这样初始化`NSTimer`某处：

```
[NSTimer scheduledTimerWithTimeInterval:0.4
    target:self
    selector:@selector(changeLabelState:)
    userInfo:nil
    repeats:NO]; 
```

* * *

请注意，您还可以执行以下操作：

```
[self performSelector:@selector(changeLabelState:) withObject:nil afterDelay:0.4];

- (void)changeLabelState:(NSTimer *)timer
{
    if(self.myLabel.hidden == TRUE)
    {
        self.myLabel.hidden = FALSE;
        [self performSelector:@selector(changeLabelState:) withObject:nil afterDelay:0.4];
    }
    else
    {
        self.myLabel.hidden = TRUE;
        [self performSelector:@selector(changeLabelState:) withObject:nil afterDelay:0.8];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:56:28.307

像下面这样的东西。

在 viewDidLoad 中：

```
NSTimer *silly = [NSTimer timerWithTimeInterval:0.4 target:self selector:@selector(question) userInfo:nil repeats:YES]; 
```

功能

```
-(void)question {

    if(label.isHidden){

      label.hidden = false;

    } else {

      label.hidden = true;

    }

} 
```

确保你在这个函数的范围内定义了一个 UILabel 并且它应该可以工作。未经测试。

# http - 骆驼http端点动态形成url

> ID：15071934
> 
> 赞同：4
> 
> 时间：2013-02-25T16:45:03.387
> 
> 标签：http, url, dynamic, apache-camel, endpoint

我正在尝试使用的人

```
{
from("direct:a").to (someUrl).processor(new Processor(){

   @Override
   public void process(Exchange arg0) throws Exception
   {
      // do something
   }

});

where someUrl is of the type http://xyz.com/{id}?test=<value1>&test1=<value2>
} 
```

并且这个 url 会随着对路由的每个请求而改变。

我已经尝试过了。将参数作为标题传递并尝试使用 header("test") 和使用 ${in.header.test} 访问路由似乎都不起作用。

任何建议都会很有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-13T04:32:00.870

从骆驼 2.16 你可以做这样的事情 -

```
from("direct:start")   
   .toD("${header.foo}"); 
```

参考：[http ://camel.apache.org/message-endpoint.html](http://camel.apache.org/message-endpoint.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T17:43:08.957

请参阅有关 Camel 中动态端点的此常见问题解答：[https ://camel.apache.org/manual/latest/faq/how-to-use-a-dynamic-uri-in-to.html](https://camel.apache.org/manual/latest/faq/how-to-use-a-dynamic-uri-in-to.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-24T07:47:44.797

您可以使用骆驼属性占位符

[http://camel.apache.org/using-propertyplaceholder.html](http://camel.apache.org/using-propertyplaceholder.html)

```
<camelContext trace="false" xmlns="http://camel.apache.org/schema/spring">
    <propertyPlaceholder location="config/AuditJMSConfig.properties" id="properties" />
    <route id="crudRoute">
        <from uri="activeMQ:queue:{{speedwing.activemq.auditqueue}}/>
    </route>                                                                                    where speedwing.activemq.auditqueue is the property name defined in the peroperties file. 
```

你可以用同样的`<to uri="" also`

# python - 芹菜 sqlalchemy 会议

> ID：15071947
> 
> 赞同：1
> 
> 时间：2013-02-25T16:45:55.353
> 
> 标签：python, sqlalchemy, celery

如何在 celery 延迟任务中使用 sqlalchemy 模型？

看起来 celery 有这个选项[https://github.com/celery/celery/blob/master/celery/backends/database/session.py](https://github.com/celery/celery/blob/master/celery/backends/database/session.py)，但我找不到如何使用它的示例。

```
@celery.task
def mytask(data):
   # how to I get session here? 
```

[这个](https://stackoverflow.com/questions/8034098/sqlalchemy-session-handling-in-delayed-celery-tasks)线程没有帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:52:19.753

有什么理由不只是将会话创建为全局变量并在 celery 任务中使用它？

```
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker

# an Engine, which the Session will use for connection
# resources
some_engine = create_engine('postgresql://scott:tiger@localhost/')

# create a configured "Session" class
Session = sessionmaker(bind=some_engine)

# create a Session
session = Session()

@celery.task
def mytask(data):
  session.commit(data) 
```

# python - 没有得到正确的输出......逻辑正确

> ID：15071950
> 
> 赞同：1
> 
> 时间：2013-02-25T16:46:00.997
> 
> 标签：python, math, python-2.7, logic

我的代码给出了正确的结果，除了 balance=3926。最低付款：370，而应该是 360。程序应打印给定年利率的最低每月付款。给定初始余额，代码应在年底计算余额。我们正在尝试每月支付 10 美元的初始余额。如果年底还有余额，我们编写代码将余额重置为初始余额，将付款增加 10 美元，然后重试（使用相同的代码！）计算年末余额年，看看这个新的支付价值是否足够大

```
annualInterestRate = 0.2

balance = 3926

monthlyinterestrate = annualInterestRate/12.0

remainingBalance = balance

month = 1
total = 0

payment = 10

def CheckMinimumPayment(payment,balance):

    "Checking if payment is in correct balance"
    while(payment*12 < balance):

        payment += 10
    return payment

payment = CheckMinimumPayment(payment,balance)

while(month <= 12):
    remainingBalance = remainingBalance - payment + (annualInterestRate / 12.0) * (remainingBalance - payment)
    month += 1
    total += payment

payment = CheckMinimumPayment(payment,total+remainingBalance)

print("Lowest Payment: " + str(payment)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:55:53.640

`while(month <= 12)`问题在于，每次尝试新付款时，您都不会重新遍历利息循环（您所拥有的）。将该循环写入一个函数，并在每次尝试新付款时调用它。欠款总额取决于付款，因为每月支付的金额越大，意味着每月增加的利息就越少。这是我使用的：

```
annualInterestRate = 0.2
init_balance = 3926

monthlyInterestRate = annualInterestRate/12.0
init_payment = 10

def owedBalance(payment,balance):
    """ Calculate total owed balance after one year
        given an initial balance and montly payment"""

    for month in range(12):
        balance = (balance - payment) * (monthlyInterestRate + 1)

    return payment*12 + balance

def CheckMinimumPayment(payment,balance):
    "Checking if payment is in correct balance"

    while (payment*12 < owedBalance(payment, balance)):
        payment += 10

    return payment

min_payment = CheckMinimumPayment(init_payment,init_balance)

print("Lowest Payment: {}".format(min_payment)) 
```

# javascript - 画布算法中的二维立方体

> ID：15071951
> 
> 赞同：0
> 
> 时间：2013-02-25T16:46:02.207
> 
> 标签：javascript, canvas, html5-canvas

有没有办法在二维中创建一个立方体？就像从任何角度看 3d 立方体会是什么样子一样？基本上是[这样](http://virtualmathmuseum.org/Polyhedra/Cube/Cube.png)的，基本上三个四边形组合起来看起来像一个立方体。

我想生成随机立方体，所以任何公式都需要允许变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:24:04.750

您可以在这个名为 pre3D 的简洁的 2d-->3d 库中学习转换算法。

它可能提供了比您需要的更多的功能，但它只有 36k，而且您总是可以删除不需要的功能以获得更小的下载大小。

您可以在此处查看演示（包括动画 2d-->3d 框）： [http ://deanm.github.com/pre3d/monster.html](http://deanm.github.com/pre3d/monster.html)

您可以在此处获取代码：[https ://github.com/deanm/pre3d](https://github.com/deanm/pre3d)

# c# - 如何从文本文件读取到列表中并从该列表中读取 C#

> ID：15071954
> 
> 赞同：0
> 
> 时间：2013-02-25T16:46:11.487
> 
> 标签：c#, linq

我需要从文本文件中读取，然后将每一行放入一个列表中，然后从该列表中读取。但我得到一个 NullReferenceException “对象引用未设置为对象的实例。” 在大约 7 行的同时异常。我已经尝试了我能想到的一切。提前致谢。

```
 StreamReader sre = new StreamReader(FILE_PATH);
                Books books = new Books();
                string line;
                while ((line = sre.ReadToEnd()) != null)
                {
                 //NullReferenceException is Right here
                 //I defined myLibraryBooks outside of this code; But it is in the same scope
                    myLibraryBooks.Add(new Books() { Author = books.Author.ToUpper(), Title = line.ToUpper(), ISBN = line, Publish_Date = line });
                }
                Console.Write("Enter Author's Name:");
                string input_to_find = Console.ReadLine();
                var author = from Authors in myLibraryBooks
                             where Authors.Author == input_to_find
                             select Authors;

                foreach (var book in author)
                {
                    Console.WriteLine(String.Format("      Author            Title            ISBN            Publish Date"));
                    Console.WriteLine(String.Format("       {0}          {1}              {2}                {3}", books.Author, books.Title, books.ISBN, books.Publish_Date));
                }
                sre.Dispose(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:50:17.107

您正在声明`books`，但它看起来并没有被设置为任何东西（除非您在构造函数中做了一些奇怪的事情）。基于此，我会说以下行可能会导致此异常：

```
 *Guessing Author is null...
books.Author.ToUpper() 
```

利用 .NET 的调试工具，逐行检查代码以查看问题所在。

# vba - 如何在 VB 中创建正确的循环（宏）

> ID：15071955
> 
> 赞同：0
> 
> 时间：2013-02-25T16:46:13.607
> 
> 标签：vba, excel

我已经记录并完善了以下宏，它应该创建一个额外的表，其中超文本链接指向原始表中每个表的起始单元格，称为“All_tables”。在此工作表中，每个表都由井号 (#) 分隔。 [看截图](http://ddex.xf.cz/macro.png)：

```
Sub Create_list_of_tables()

Sheets.Add After:=Sheets(Sheets.Count)
ActiveSheet.Name = "list of tables"

ActiveSheet.Hyperlinks.Add Anchor:=Selection, Address:="", SubAddress:= _
    "All_Tables!A22", TextToDisplay:="some variable pointing at the table name"
Range("A2").Select
End Sub 
```

现在我想把它放到一个循环中，它会重复十次（或更多次）。我尝试使用井号作为程序的参考点，以找出他应该将超链接指向哪个单元格。结果如下：

```
Sub Create_list_of_tables()    
Sheets.Add After:=Sheets(Sheets.Count)
ActiveSheet.Name = "list of tables"

Const cStrDivider As String = "#"

Dim rMyCell As Range
Dim table_number As Long
table_number = 0

Do Until table_number = 10
Set rMyCell = Range("cStrDivider").Select
ActiveSheet.Hyperlinks.Add Anchor:=Selection, Address:="", SubAddress:= _
    "All_Tables!&rMyCell", TextToDisplay:="some variable pointing at the table name"
ActiveCell.Offset(1, 0).Select
table_number = table_number + 1
Loop

End Sub 
```

它不起作用。我对宏和 VB 编程完全陌生，所以如果你至少能告诉我方向，我会非常高兴。我的方法是完全错误的吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:12:30.473

我不确定您希望超链接指向的确切位置，但这应该让您有一个良好的开端。需要注意的事项：

*   不要使用`Select`or`Selection`语句。它们很慢并且会产生不良影响。取而代之的是使用非常明确的陈述，这些陈述不依赖于光标位置，而是评估你知道事物所在位置的绝对位置。
*   使用范围对象的`Find`and`FindNext`方法来定位字符串。当`FindNext`找不到更多内容时，它会返回`nothing`。最好检查而不是执行 table_number 循环。

**更新**

```
Sub Create_list_of_tables()

    Const cStrDivider As String = "#"

    Dim sht As Worksheet, rMyCell As Range, rSearchRange As Range
    Dim testSht As Worksheet, firstMyCell As Range

    Set sht = ActiveSheet

    On Error Resume Next
    Set testSht = ActiveWorkbook.Sheets("All_Tables")
    If Err.Number <> 9 Then
        Application.DisplayAlerts = False
        testSht.Delete
        Application.DisplayAlerts = True    'important to set back to true!
    End If
    On Error GoTo 0

    ActiveWorkbook.Sheets.Add After:=Sheets(Sheets.Count)
    ActiveWorkbook.Sheets(Sheets.Count).Name = "All_Tables"

    Set rSearchRange = sht.Range("A:A")

    'do initial "Find"
    Set rMyCell = rSearchRange.Find(cStrDivider)
    Set firstMyCell = rMyCell

    Do
        sht.Hyperlinks.Add Anchor:=rMyCell.Offset(0, 1), Address:="All_Tables!" & rMyCell.Address, _
            TextToDisplay:="Link"

        'get the next "MyCell" to use from the master range to search
        Set rMyCell = rSearchRange.FindNext(rMyCell)
        'increment your table counter (if you want to do this you can still
        table_number = table_number + 1
        Debug.Print firstMyCell.Address
        Debug.Print rMyCell.Address
    Loop While firstMyCell.Address <> rMyCell.Address

End Sub 
```

从那里开始，看看它是如何工作的。

# r - 是否可以使用 R 命令在 Windows 上安装 pandoc？

> ID：15071957
> 
> 赞同：7
> 
> 时间：2013-02-25T16:46:26.527
> 
> 标签：r, windows-7, pandoc

我想通过在 R 中运行命令在 Windows 7 机器上下载并安装 pandoc。这可能吗？

（我知道我可以手动执行此操作，但是当我向学生展示时 - 我可以在 R 代码块中组织的步骤越多 - 越好）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T17:12:59.600

简单地下载最新版本的安装程序并从 R 启动它怎么样：

1.  a) 识别 Pandoc 的最新版本并在`XML`包的帮助下获取 URL：

    ```
    library(XML)
    page     <- readLines('http://code.google.com/p/pandoc/downloads/list', warn = FALSE)
    pagetree <- htmlTreeParse(page, error=function(...){}, useInternalNodes = TRUE, encoding='UTF-8')
    url      <- xpathSApply(pagetree, '//tr[2]//td[1]//a ', xmlAttrs)[1]
    url      <- paste('http', url, sep = ':') 
    ```

    b）或者感谢*@G.Grothendieck*应用一些正则表达式魔法（不需要`XML`这种方式的包）：

    ```
    page <- readLines('http://code.google.com/p/pandoc/downloads/list', warn = FALSE)
    pat  <- "//pandoc.googlecode.com/files/pandoc-[0-9.]+-setup.exe"
    line <- grep(pat, page, value = TRUE); m <- regexpr(pat, line)
    url  <- paste('http', regmatches(line, m), sep = ':') 
    ```

    c) 或者，如果您愿意，也可以手动检查最新版本：

    ```
    url <- 'http://pandoc.googlecode.com/files/pandoc-1.10.1-setup.exe' 
    ```

2.  下载文件为`binary`：

    ```
    t <- tempfile(fileext = '.exe')
    download.file(url, t, mode = 'wb') 
    ```

3.  只需从 R 运行它：

    ```
    system(t) 
    ```

4.  安装后删除不需要的文件：

    ```
    unlink(t) 
    ```

* * *

PS：抱歉，仅在 Windows XP 上测试过

# python - Python Fileconveyor 命名问题

> ID：15071959
> 
> 赞同：0
> 
> 时间：2013-02-25T16:46:39.850
> 
> 标签：python, cloudfiles

有没有办法让 Fileconveyor ( [https://github.com/wimleers/fileconveyor](https://github.com/wimleers/fileconveyor) ) 在 Rackspace CloudFiles 上创建文件而文件名中没有所有目录信息？

示例：
**本地目录**：001
**本地文件名**：001-
**test.jpg CloudFiles 容器**：001
**上传文件名**：001/001-test.jpg
**所需文件名**：001-test.jpg

Fileconveyor 将一个名为 001 的虚拟目录上传到 001 容器中，然后将目录名称作为文件名的前缀。我真的希望那个虚拟目录不存在，只是上传文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:31:10.500

它实际上将文件放在您可以添加的云文件中：

```
dir, file = os.path.split('foo/bar/baz.txt') 
```

可能在 fileconveyers/transporters/transport.py 的第 152 行之前：

```
self.queue.put((src, dst, action, callback, error_callback)) 
```

它将项目添加到队列的位置。

# objective-c - 迁移到 ARC“不能在类方法中分配给自己”

> ID：15071966
> 
> 赞同：2
> 
> 时间：2013-02-25T16:46:59.147
> 
> 标签：objective-c, automatic-ref-counting

我有一个类方法看起来像：

```
+ (id)itemWithTitle:(NSString *)title target:(id)target action:(SEL)action
{
    self = [[self alloc] initWithTitle:title target:target action:action];

    return self;
} 
```

它与手动引用计数一起工作得很好，但是当我尝试将它与 ARC 一起使用时，我收到错误：“无法在类方法中分配给 self”。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T16:51:17.267

我认为这与ARC无关。不同之处可能在于使用 ARC 时，编译器会对此给出警告/错误。

一般来说，在类方法中（那些以 + 而不是 - 开头并且被称为不同的方法） self 并不引用特定的对象。它指的是类。使用 [self alloc] 您可以创建该类的对象，无论它是否被子类化。如果这是一个实例方法 [[self class] alloc] 将非常等效。但是您有充分的理由使用类方法。

在这种情况下，为什么不直接返回结果？

```
+ (id)itemWithTitle:(NSString *)title target:(id)target action:(SEL)action
{
    return [[self alloc] initWithTitle:title target:target action:action];
} 
```

如果您的班级名称是 Foo 那么您可以选择：

```
+ (id)itemWithTitle:(NSString *)title target:(id)target action:(SEL)action
{
    Foo *newMe = [[self alloc] initWithTitle:title target:target action:action];
    // Here you have access to all properties and methods of Foo unless newMe is nil.
    return newMe;
} 
```

或更一般地说，无需访问 Foo 的方法和属性：

```
+ (id)itemWithTitle:(NSString *)title target:(id)target action:(SEL)action
{
    id newMe = [[self alloc] initWithTitle:title target:target action:action];
    return newMe;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:50:58.020

您的 pre-ARC 代码不应该滥用该`self`关键字。它应该看起来像这样。

```
+ (id)itemWithTitle:(NSString *)title target:(id)target action:(SEL)action
{
    MyClass* obj = [[[MyClass alloc] initWithTitle:title target:target action:action] autorelease];

    return obj;
} 
```

在 ARC 中，唯一的区别是您可以删除`autorelease`.

# android - 从 Android 应用程序发送视频/音频文件到 wcf 服务无法打开

> ID：15071968
> 
> 赞同：0
> 
> 时间：2013-02-25T16:47:02.420
> 
> 标签：android, wcf, file-upload, video-streaming

我尝试将视频文件从 android 发送到 wcf 服务。视频文件成功上传，两端大小相同，但问题是无法打开。对于其他文件，它工作正常，但不仅适用于视频文件。

下面是我的安卓代码：

```
 package com.example.filedemo;

import java.io.File;
import java.io.IOException;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.mime.HttpMultipartMode;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.FileBody;
import org.apache.http.entity.mime.content.StringBody;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.Environment;
import android.util.Log;

public class HttpUpload {

    public static String res;
    public static String response;
    public void myUploadedfile() {
        HttpClient httpClient = new DefaultHttpClient();

        HttpPost postRequest = new HttpPost(
                "http://10.160.0.18:85/Service.svc/UploadFile?fileName=vd.mp4");
        /* ResponseHandler<String> responseHandler = new BasicResponseHandler(); */

        // Indicate that this information comes in parts (text and file)
        MultipartEntity reqEntity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);

        try {

            // Create a JSON object to be used in the StringBody
            JSONObject jsonObj = new JSONObject();

            // Add some values
            jsonObj.put("filename", "vd.mp4");

            // Add the JSON "part"
            reqEntity.addPart("entity", new StringBody(jsonObj.toString()));
        } catch (JSONException e) {
            Log.v("App", e.getMessage());
        } catch (UnsupportedEncodingException e) {
            Log.v("App", e.getMessage());
        }

        FileBody fileBody = new FileBody(new File(
                Environment.getExternalStorageDirectory(), "vd.mp4"));// ,"application/octet-stream");
        reqEntity.addPart("file", fileBody);

        try {
            postRequest.setEntity(reqEntity);

            // Execute the request "POST"
            HttpResponse httpResp = httpClient.execute(postRequest);

            /*HttpResponse response = null;*/
            // Check the status code, in this case "created"

            Log.v("App", "Created");
            /*if (((HttpResponse) response).getStatusLine().getStatusCode() == HttpStatus.SC_CREATED)
            {

            }*/
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

**wcf 代码**

```
 FileStream fileToupload = new FileStream("D:\\vd.mp4", FileMode.Create, FileAccess.Write);

byte[] bytearray = new byte[10000];
int bytesRead, totalBytesRead = 0;
do
{
bytesRead = mystream.Read(bytearray, 0, bytearray.Length);
totalBytesRead += bytesRead;
} while (bytesRead > 0);

fileToupload.Write(bytearray, 0, bytearray.Length);
fileToupload.Close();
fileToupload.Dispose();
return "success"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:08:03.903

似乎问题出在 MIME 类型上。 [Android Multipart HTTP Post 不发送文件的 MIME 类型](https://stackoverflow.com/questions/3482674/android-multipart-http-post-does-not-send-the-files-mime-type)

尝试在此处接受的答案中使用为 uploadVideo() 方法提供的代码。 [Android 使用 HTTP 多部分表单数据将视频上传到远程服务器](https://stackoverflow.com/questions/11164398/android-upload-video-to-remote-server-using-http-multipart-form-data)

# mysql - 这个 MySQL 查询可以更高效吗？

> ID：15071970
> 
> 赞同：1
> 
> 时间：2013-02-25T16:47:15.790
> 
> 标签：mysql, sql

**更新** 这是一个 sqlfiddle [http://sqlfiddle.com/#!2/e0822/1/0](http://sqlfiddle.com/#!2/e0822/1/0)

我有一个 MySQL 应用程序数据库（itunes_id），每个应用程序 id 都有一个评论字段。为了保留历史记录，每次更改评论时，都会添加一行新数据。在下面的查询中，我只想要每个应用程序 (itunes_id) 的最新条目 (最高 id) 的列表。

这是我的数据库的标题：

```
id  (key and auto increment)
itunes_id
comments 
date 
```

此查询正在获取给定 itunes_id 的最新条目。我怎样才能使这个查询更有效率？

```
SELECT * FROM (
    SELECT * FROM (
        SELECT * FROM Apps
        ORDER BY id DESC
    ) AS apps1
    GROUP BY itunes_id
) AS apps2
LIMIT 0 , 25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:51:10.357

此查询使用一个子查询，它分别获取`ID`每个的最大值`itunes_ID`。如果子查询的结果与两列匹配，则子查询的结果将重新连接到原始表：`itunes_ID`和`ID`。

```
SELECT  a.*
FROM    Apps a
        INNER JOIN
        (
            SELECT  itunes_id, MAX(ID) max_id
            FROM    Apps
            GROUP   BY itunes_id
        ) b ON a.itunes_id = b.itunes_id AND
                a.ID = b.max_ID
LIMIT   0, 25 
```

为了获得更快的性能，请`INDEX`在列`itunes_ID`和`ID`. 例如，

```
ALTER TABLE Apps ADD INDEX (itunes_ID, ID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:53:43.753

对于类似的方法，我使用“最近”布尔字段来标记包含最新版本的记录。这需要对每个插入进行 UPDATE 查询（停用以前的最近记录），但允许快速选择查询。或者，您可以维护两个表，一个包含最近的记录，另一个包含每个应用程序的历史记录。

**编辑**：也许你可以尝试类似这样的表：

*   id int not null auto_increment 主键
*   版本 int 不为空
*   main_id int 空
*   最近的布尔值不为空
*   应用程序 varchar(32) 不为空
*   评论 varchar(200) 空

您可以使用“main_id”列指向版本 1 的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:50:33.380

*我只想要给定应用程序 (itunes_id) 的最新条目（最高 id）*

这会做到的

```
SELECT MAX(id), comments FROM Apps WHERE itunes_id = "iid"; 
```

或者

```
SELECT id, comments FROM Apps WHERE itunes_id = "iid" ORDER BY id DESC LIMIT 1; 
```

`iid`您想要最新评论的 iTunes id在哪里。

确保`id`并`itunes_id`在[复合索引](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)中编制索引以获得最大效率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T16:51:05.447

```
SELECT * FROM (
    SELECT * FROM (
        SELECT * FROM Apps
        ORDER BY id DESC
    ) AS apps1
    GROUP BY itunes_id
) AS apps2
LIMIT 0 , 25 
```

不会选择最旧的记录（您不能假设生成的密钥总是“最旧的”）。你想要的是这样的：

```
SELECT * FROM (
    SELECT * FROM (
        SELECT * FROM Apps
        where some_date = (select max(some_date) from Apps limit 1)
        ORDER BY id DESC
    ) AS apps1
    GROUP BY itunes_id
) AS apps2
LIMIT 0 , 25 
```

# c++ - (C++) 如何指向子类中的方法？

> ID：15071971
> 
> 赞同：1
> 
> 时间：2013-02-25T16:47:16.523
> 
> 标签：c++, object, methods, subclass

我有一个基类`Base`，它有方法`runUserMethod(void * pointer_to_method)`。

```
class Base {
    int runUserMethod(METHTYPE pointer_to_method) {
        // do some stuff before
        int retval = pointer_to_method();
        // do some stuff after
        return retval;
    }
}; 
```

现在，我想以`runUserMethod`一种能够运行由 的子类实现的任何方法的方式实现`Base`，前提是这种方法遵循一些标准签名，例如`int <methodname> (void)`

例如，假设用户创建的类`UserClass`如下：

```
class UserClass : public Base {
    int user_method (void);
}; 
```

应该`METHTYPE`是什么，以便我可以执行以下操作？

```
Base   * b = new UserClass();
int retval = b->runUserMethod(&UserClass::user_method); 
```

还有，它会起作用吗？有没有更好的方法来做到这一点？基本上，我想要做的是以对用户或多或少透明的方式拦截对子类方法调用的调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:53:28.557

这可以使用[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)and来完成[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)：

```
struct Base
{
    typedef std::function<int()> METHTYPE;

    int runUserMethod(METHTYPE pointer_to_method)
    {
        return pointer_to_method();
    }
};

UserObject b;
auto func_object = std::bind(&UserObject::user_method, std::ref(b));

int retval = b.runUserMethod(func_object); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:30:17.223

您可以尝试将*runUserMethod 设为*模板方法。此外，为了安全地将*其*从基类转换为派生类，您应该使用 dynamic_cast 所以*基*类必须是多态的（例如通过添加虚拟析构函数）：

```
class Base {
public:

    template <class T>
    int runUserMethod( int (T::* pointer_to_method)()) {
        T* p = dynamic_cast<T*> (this);
        if (p == NULL) throw std::runtime_error("cast error");

        // do some stuff before
        int retval = (p->*pointer_to_method)();
        // do some stuff after
        return retval;
    }

    virtual ~Base() {};
}; 
```

函数用法与您的代码示例中的相同：

```
Base* b = new UserClass;
int r = b->runUserMethod(&User::user_method); 
```

函数参数和返回类型也可以作为模板参数，以便 runUserMethod 接受其他函数签名：

```
class Base {
public:

    // 0 arguments
    template <class T, class R>
    int runUserMethod( R (T::* pointer_to_method)()) {
        T* p = dynamic_cast<T*> (this);
        if (p == NULL) throw std::runtime_error("cast error");

        // do some stuff before
        R retval = (p->*pointer_to_method)();
        // do some stuff after
        return retval;
    }

    // 1 argument
    template <class T, class R, class ARG1>
    int runUserMethod( R (T::* pointer_to_method)(ARG1), ARG1 arg1) {
        T* p = dynamic_cast<T*> (this);
        if (p == NULL) throw std::runtime_error("cast error");

        // do some stuff before
        R retval = (p->*pointer_to_method)(arg1);
        // do some stuff after
        return retval;
    }

    // 2 arguments
    // [...]

    virtual ~Base() {};
}; 
```

这样下面的代码也可以工作：

```
class UserClass : public Base {
public:
     int   user_method1 (void)  {return 0;}
     float user_method2 (void)  {return 0.0f;}
     int   user_method3 (int x) {return 0;}
};

int main(int argc, char* argv[]) {
    Base* b = new UserClass;
    int   r1 = b->runUserMethod(&UserClass::user_method1);
    float r2 = b->runUserMethod(&UserClass::user_method2);
    int   r3 = b->runUserMethod(&UserClass::user_method3, 2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T17:10:55.033

如果您将示例更改为更实际可行的状态，您会看到以下问题：

```
int retval       = (this->*methptr)(); 
```

撇开丑陋的语法不谈，问题是您需要将具有 Base * 类型的“this”指针传递给方法调用，但您假设将指针传递给派生类的方法
所以您要么需要让 runUserMethod 知道派生类（可能通过模板) 或将派生方法的指针类型转换为指向有问题风险的基方法的指针：

```
class Derived1 : public Base ...
class Derived2 : public Base ...
Derived2 d2;
d2.runUserMethod( static_cast<METHTYPE>( &Derived1::func ) ); // problem Derived2 * will be passed to Deriived1 method and there is no easy way to detect that 
```

所以使用 std::bind 会更安全。而且您不必从 Base 继承（我不知道您的情况是否好）

# iis - 带有 iis 的多个 ssl

> ID：15071974
> 
> 赞同：1
> 
> 时间：2013-02-25T16:47:23.047
> 
> 标签：iis, ssl

我们有 IIS6.0。我们有一个网站运行它自己的证书。到目前为止，这一直是我们托管的唯一 SSL 站点。我们正在添加另一个，它有自己的证书。它不工作。实现此目的的正确和最佳方法是什么？我们有多个可用的 IP，等等。研究让我声称我们不能使用主机头，这就是我相信我们现在正在做的事情。提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:53:16.090

如果您愿意，您可以使用主机标头，只是无法使用 IIS 管理单元进行全部设置。

此处的详细信息：http: [//www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/596b9108-b1a7-494d-885d-f8941b07554c.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/596b9108-b1a7-494d-885d-f8941b07554c.mspx?mfr=true)

在这里： [http ://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/596b9108-b1a7-494d-885d-f8941b07554c.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/596b9108-b1a7-494d-885d-f8941b07554c.mspx?mfr=true)

# php - 如何使用 CakePHP 和 Ajax 删除文件？

> ID：15071975
> 
> 赞同：0
> 
> 时间：2013-02-25T16:47:26.610
> 
> 标签：php, jquery, cakephp, ajax-upload

我在一个名为“add.cpt”的页面中，其中包含图像列表。用户可以选择删除图像，但我无法使其工作。在单击的情况下，我尝试调用 ajax 尝试传递图像的名称和项目的 id (.../item/imageName)，但它确实删除了图像并提醒似乎是 delete_photo_file 的内容。 ctp。看起来 ajax 正在使用 URL，但它没有发送数据来删除想要的文件。

物品控制器：

```
App::uses('File', 'Utility');
class ItemsController extends AppController{

[...]

public function deletePhotoFile(){
  //$this->autoRender = false; //did not tested but maybe I need to use this
  $imgName = //don't know how to get it from ajax call
  $itemId = //don't know how to get it from ajax call
  $file = new File($dir.'/'.$itemId.'/'.$imgName);
  $file->delete();
} 

} 
```

Ajax 调用（来自我的 ctp 文件）：

```
$('#delete').click(function (){
[...]

var itemId=$('#itemId').val(); //comes from hidden input
var imgName = $('#imgName').val(); //comes from hidden input

$.ajax({
  type: 'POST',
  url:'http://localhost/html/Project/v5/CakeStrap/items/deletePhotoFile/',
  data:{"itemId":itemId, imgName: imgName},
  success: function(data){
    alert(data); //alerts some HTML... seems to be delete_photo_file.ctp content
  }
});

}); 
```

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:00:15.333

在您的 ItemsController 中，确保您实际加载了 File 实用程序类，方法是添加：

```
App::uses('File', 'Utility'); 
```

在您的类定义之前的开始`<?php`标签下方。在您的操作中，您可以只使用`$this->request->data`来获取数据键。此外，返回`delete()`函数的操作，以便您可以相应地触发 AJAX 成功/错误调用。

```
public function deletePhotoFile() {
    $imgName = $this->request->data['imgName'];
    $itemId = $this->request->data['itemId'];
    /**
     * Where is the $dir below actually set? Make sure to pass it properly!
     * Furthermore, it's always cleaner to use DS constant
     * (short for DIRECTORY_SEPARATOR), so the code will work on any OS
     */
    $file = new File($dir . DS . $itemId . DS . $imgName);
    return $file->delete();
} 
```

最后，请注意 AJAX 调用中的引号：

```
data:{"itemId":itemId, imgName: imgName}, 
```

应该变成：

```
data:{"itemId":itemId, "imgName": imgName}, 
```

否则，您只需调用`imgName`JS var 两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:56:49.947

在 php`$imgName = $this->request->data('imgName'); $itemId = $this->request->data('imgId');`中，在 js 中，您可能希望在变量名周围加上引号，因为它与正在传递的值的名称相同`data: {'itemId': itemId, 'imgName': imgName},`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:57:42.067

要`debug($this->request->data)`在您的`deletePhotoFile()`方法中简单地获取数据并检查浏览器控制台中的响应，它应该是一个格式良好的数组，其中包含您在 ajax 请求中发布的数据，您应该能够从那里计算出其余部分。

您还需要考虑使用[RequestHandler 组件](http://book.cakephp.org/2.0/en/core-libraries/components/request-handling.html)，以便确保请求是 ajax 请求。

# c++ - 如何包装作为成员函数的 DLL 函数？

> ID：15071977
> 
> 赞同：3
> 
> 时间：2013-02-25T16:47:31.843
> 
> 标签：c++, function, dll, wrapper

我正在创建一个包装器类，它包装了特定 3rd 方 API 中概述的一堆函数。当我尝试像这样包装非成员函数时：

**(AVTcamDllWrapper.h)**

```
typedef VmbErrorType (WINAPI * AVTGETCAMERAS) (CameraPtrVector cameras);

class CAVTcamDllWrapper
{
    HMODULE mAVTCamLibrary; //I later have this point to the DLL

public:
    void AVTGetCameras (CameraPtrVector cameras);
}; 
```

**(AVTcamDllWrapper.cpp)**

```
void CAVTcamDllWrapper::AVTGetCameras(AVTNS CameraPtrVector cameras)
{

    AVTGETCAMERAS   pFunc = NULL;

    pFunc = (AVTGETCAMERAS) GetProcAddress(mAVTCamLibrary, "?GetCameras@VimbaSystem@VmbAPI@AVT@@AEAA?AW4VmbErrorType@@PEAV?$shared_ptr@VCamera@VmbAPI@AVT@@@23@AEAI@Z");
    DWORD dw = GetLastError();
    if(pFunc == NULL)
    {
        Exlog(L"CAVTcamDllWrapper::AVTGetCameras: Failed to locate AVTGetCameras method in AVTCamera DLL.");
        NIERR_SET_AND_THROW_ERROR(NIERR_CAMERA_ERROR, L"Failed to locate AVTGetCameras method in AVTCamera DLL.");
    }
    VmbErrorType vErr = pFunc(cameras);

    if(vErr != VmbErrorSuccess)
    {
        wstring exLogMsg = Format(exLogMsg, L"CAVTcamDllWrapper::AVTGetCameras(): Failed to get any cameras.  VmbErrorType = %d", vErr);
        Exlog(exLogMsg.c_str());

        NIERR_SET_AND_THROW_ERROR(NIERR_CAMERA_ERROR, L"Failed to get any cameras.");
    }
} 
```

上面的代码非常适合非成员函数。例如，如果我试图包装一个简单地通过说调用的函数：

```
CallFunction(blah, blaaaaah); 
```

然后包装类工作正常，并且 pFunc 设置正确并且`VmbErrorType vErr = pFunc();`在线上没有发生错误；

但是，我的许多函数都是成员函数，并且是这样调用的：

```
SomeObject.CallMemberFunction(blah, bleh);

// or

SomeObjectPointer->CallMemberFunction(what, ever); 
```

这些是我似乎无法包装的功能。错误发生在该行：

```
VmbErrorType vErr = pFunc(); 
```

因为如果没有特定的对象来调用该函数，就无法调用该函数。在我的示例中，我包装了一个存在于 Camera 内部的函数 GetCameras。在不包装函数的情况下，调用它我只需创建一个相机指针向量，然后执行以下操作：

```
cameras[0]->GetCameras(VmbAccessModeFull); 
```

哪个有效。但我不知道如何包装这个函数，因为对 GetCameras 的调用既依赖于`cameras[0]`又完全无用，如果没有相机来调用它。

***那么如何包装上面显示的成员函数呢？***

* * *

**编辑1：**

我试图传递对特定对象的引用并执行

```
VmbErrorType vErr = theObject->pFunc(); 
```

但显然这不起作用，因为它会考虑在 theObject 内部寻找一个名为 pFunc 的函数，该函数不存在。

* * *

**编辑2：**

我觉得我几乎要修改包装函数以将引用对象作为参数或其他东西传递。所以喜欢而不是常规：

```
cameras[0]->GetCameras(VmbAccessModeFull); 
```

我将不得不修改一些东西并使我的包装函数看起来像这样：

```
mWrapperObject->WrappedGetCameras(VmbAccessModeFull, cameras[0]); 
```

这样被包装的函数将具有充当成员函数所需的上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:07:51.043

To call a member function you must have an object at hand. To have an object you must get it from somewhere. The only place a good little well-behaving function can get stuff from is its parameter list.

So each of your functions obviously must have a parameter that receives The Object.

If you want your wrapper functions to be callable from C, you cannot have class types as function parameters. So you either declare it as a `void*` and do a cast inside, or just cheat and type it (for C only!) `struct YourClassName*` (without ever defining the struct). For C++, it should still use the class keyword. Use the preprocessor.

In a nutshell,

```
foo->bar(moo, roo) 
```

is the fancy shmancy C++ way of saying

```
FooType_bar(foo, moo, roo) 
```

and you should think about wrapping the latter while actually spelling the former.

How the caller obtains The Object then? One of your functions could create objects (with `new`) and return pointers to them. Another one could do a delete. Or you can return pointers to elements of a pre-allocated array. Or whatever. Basically you wrap the ways you use to obtain pointers to objects as a user of the original, unwrapped library.

That's about it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:11:29.880

您可以通过将成员函数的 thiscall 转换为 fastcall 来做到这一点

[http://www.unknowncheats.me/forum/c-and-c/73849-thiscall-hooking.html](http://www.unknowncheats.me/forum/c-and-c/73849-thiscall-hooking.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:50:18.880

如果您正在调用成员函数，则只需将 this 指针作为第一个参数传递，并确保您使用的是正确的调用约定。对于静态成员函数，您不必传递 this 指针。

在 x64 上，您甚至不必担心调用约定，因为所有内容都将编译为 __fastcall。无论您指定什么调用约定。

```
#include <iostream>
#include <stdint.h>

class Camera
{
    int i;
public:
    Camera()
    {
        i = 123;
    }

    void __stdcall print_1(int j, int k)
    {
        std::cout << i << j << k << std::endl;
    }

    void __cdecl print_2(int j, int k)
    {
        std::cout << i << j << k << std::endl;
    }

    void print_3(int j, int k)
    {
        std::cout << i << j << k << std::endl;
    }

    static void __cdecl print_s1(int j, int k)
    {
        std::cout << j << k << std::endl;
    }

    static void __stdcall print_s2(int j, int k)
    {
        std::cout << j << k << std::endl;
    }
};

int main() {
    Camera cam;
    Camera* pCam = &cam;

    // call __stdcall memberfunction
    typedef void (__stdcall* tprint_1)(Camera*,int,int);
    tprint_1 print_1 = (tprint_1)&Camera::print_1;
    print_1(pCam,1,2);

    // call __cdecl memberfunction
    typedef void (__cdecl* tprint_2)(Camera*,int,int);
    tprint_2 print_2 = (tprint_2)&Camera::print_2;
    print_2(pCam,3,4);

    // call __thiscall  memberfunction
    typedef void (__thiscall* tprint_3)(Camera*,int,int);
    tprint_3 print_3 = (tprint_3)&Camera::print_3;
    print_3(pCam,5,6);

    // call __thiscall  memberfunction different syntax
    typedef void (Camera::* tprint_4)(int,int);
    tprint_4 print_4 = (tprint_4)&Camera::print_3;
    (pCam->*print_4)(7,8);

    // static member functions don´t take a this pointer
    typedef void(__cdecl* tprint_s1)(int,int);
    tprint_s1 print_s1 = (tprint_s1)&Camera::print_s1;
    print_s1(9,10);

    // static member functions don´t take a this pointer
    typedef void(__stdcall* tprint_s2)(int,int);
    tprint_s2 print_s2 = (tprint_s2)&Camera::print_s2;
    print_s2(11,12);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T20:28:48.137

这是它是如何完成的。假设你有两层：成员函数层和包装函数层。您需要做的是创建位于这两层之间的第三层，并将该层导出为 .dll 文件。起初（当我问这个问题时）我试图包装看起来像这样的函数：

```
void SomeClass::SomeFunction(CString someParam)
{
    //blah blah
} 
```

这不起作用，因为正如问题所述，您不能包装成员函数。我发现我需要在成员函数调用之上的层上进行所有对象管理，但仍位于包装函数之下。我最终得到的是一堆“桥接”函数（这就是我所说的），它们“弥合”了包装函数和成员函数之间的差距。所以现在，我包装了如下所示的函数：

```
void BridgedSomeFunction(CString someParam)
{
    classObject.SomeFunction(someParam);
} 
```

然后我简单地做了一些`__declspec(dllexport)`'s 和`__declspec(dllimport)`'s 把这些函数变成一个 .dll 文件，就是这样！

# ocmock - 为什么OCMock在使用mockObserver时会导致nsnotificaiton center有EXC_BAD_ACCESS

> ID：15071979
> 
> 赞同：2
> 
> 时间：2013-02-25T16:47:42.163
> 
> 标签：ocmock

我像这样设置模拟观察者：

```
id quartileObserverMock = [OCMockObject observerMock];
[[NSNotificationCenter defaultCenter] addMockObserver:quartileObserverMock
                                                 name:kVPAdPlayerDidReachQuartileNotification
                                               object:self.adPlayer];

[[quartileObserverMock expect]
                       notificationWithName:kVPAdPlayerDidReachQuartileNotification
                                     object:self.adPlayer
                                   userInfo:@{@"quartile" : @(VPAdPlayerFirstQuartile), @"trackingEvent" : VPCreativeTrackingEventFirstQuartile}]; 
```

我的单元测试运行；但是在发布通知时我会收到虚假的 EXC_BAD_ACCESS 错误。

IE

```
[[NSNotificationCenter defaultCenter]
                           postNotificationName:kVPAdPlayerDidReachQuartileNotification
                                         object:self.adPlayer
                                       userInfo:@{@"quartile" : @(quartile), @"trackingEvent" : trackingEvent}]; 
```

当我注释掉观察者模拟代码时，我的测试每次都运行良好。

当我将代码放回原处时，我在 postNoticiaitonName:object:userInfo 上得到了虚假的崩溃，可能每 2.5 次发生一次。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-07T09:16:19.333

请参阅以下示例代码，这可能会对您有所帮助。它对我有用

```
- (void)test__postNotificationwithName__withUserInfo
{
     id observerMock  = [OCMockObject observerMock];
     [[NSNotificationCenter defaultCenter] addMockObserver:observerMock name:@"NewNotification" object:nil];

     NSDictionary *userInfo = [[NSDictionary alloc] initWithObjectsAndKeys:@"2",@"2", nil];
     [[observerMock expect] notificationWithName:@"NewNotification" object:[OCMArg any] userInfo:userInfo];

     NotificationClass *sut = [[NotificationClass alloc] init];
     [sut postNotificationwithName:@"NewNotification" userInfo:userInfo];

     [[NSNotificationCenter defaultCenter] removeObserver:observerMock];
     [observerMock verify];
} 
```

和我的发帖通知方法

```
- (void)postNotificationwithName:(NSString *)notifName userInfo:(NSDictionary *)userInfo
{
     [[NSNotificationCenter defaultCenter] postNotificationName:notifName object:self userInfo:userInfo];
} 
```

**请注意：**

1.  当收到意外通知时，observerMock 总是引发异常。
2.  在测试用例结束时从 NSNotificationCenter 中删除模拟的观察者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-08T04:27:45.503

发生这种情况有几个原因（我知道，因为我今天刚刚在自己的代码中解决了这两个问题）

1) 前一个测试的模拟观察者没有被移除

2) 来自先前测试的非模拟实例对象正在观察相同的通知，但该对象已过时。在我的例子中，我的`setUp`方法中的一个实例对象正在监听通知，但是当它被释放时，它并没有从 NSNotificationCenter 的观察者列表中删除自己。

在这两种情况下，解决方案都是使用

```
 [[NSNotificationCenter defaultCenter] removeObserver:name:object:] 
```

取决于范围：1）在`dealloc`观察 NSNotificationCenter 的所有类中，2）在`tearDown`方法中，或 3）在测试用例结束时（如 @PrasadDevadiga 所述）

# xcode - 如何从点击手势启动视图控制器

> ID：15071981
> 
> 赞同：0
> 
> 时间：2013-02-25T16:47:51.477
> 
> 标签：xcode, storyboard, mkmapview, coordinates, uigesturerecognizer

抱歉，如果这是一个基本问题，但我是 Xcode 的新手并且有一个故事板应用程序，并且在故事板中（没有 segue）我有一个带有嵌入式地图视图的视图控制器。

在情节提要屏幕上，我有一个链接了点击手势的图像，我已经测试了点击并且它可以工作（NSLog），但我想知道如何启动我的 mapview 视图控制器并缩放到 x&y。

我的代码目前有

```
-(IBAction)handleMapTap:(UIGestureRecognizer *)sender {   
    NSLog(@"Tapped");  
 } 
```

＆ 我试过了;

```
MMMapViewController *mapViewController = [[MMMapViewController alloc] initWithNibName:@"MapView" bundle:nil];
[self.navigationController pushViewController:mapViewController animated:YES]; 
```

我的视图控制器有一个类设置为 MMMapViewController 我给视图控制器一个 MapView 的故事板 ID（如果需要的话？）。

我已经阅读了很多 stackoverflow 文章，但似乎找不到答案。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:11:51.210

```
-(IBAction)handleMapTap:(UIGestureRecognizer *)sender 
{
    MMMapViewController *mapViewController = [[MMMapViewController alloc] initWithNibName:@"MapView" bundle:nil];
    //[self.navigationController pushViewController:mapViewController animated:YES];
     [self presentModalViewController:mapViewController animated:YES];
    [mapViewController release];
} 
```

知道 self 是什么可能会有所帮助，如果它确实是 UIViewController，那么我会确保 self.navigationController 不为零。据我所知，您实际上拥有正确的代码，但根据您的情况，您可以将 mapView 呈现为模态视图控制器。

# ios - 如何在使用 Core Graphics 绘制的图像上设置可访问性标签？

> ID：15071984
> 
> 赞同：3
> 
> 时间：2013-02-25T16:47:59.237
> 
> 标签：ios, objective-c, xcode, ios-ui-automation

我正在尝试围绕一些核心图形逻辑编写 UIAutomation 测试。目前我们正在使用核心图形来绘制图像。我正在尝试在图像上设置可访问性标签/标识符/值，以便我可以通过 UIAutomation 测试验证它的存在，但无论我做什么，我都没有在 DOM 上获得可访问性标签/标识符/值我的测试。以下是我尝试过的事情：

直接在图像上设置。

```
UIImage *uiImage = [UIImage imageWithData:bfCaseStudy.image];
uiImage.isAccessibilityElement = YES;
uiImage.accessibilityLabel = bfCaseStudy.name;
uiImage.accessibilityValue = bfCaseStudy.name;
uiImage.accessibilityIdentifier = bfCaseStudy.name;

CGContextDrawImage(context, [self rectForAttr:bfCaseStudy], uiImage.CGImage); 
```

核心图像上的设置

```
UIImage *uiImage = [UIImage imageWithData:bfCaseStudy.image];
uiImage.CIImage.isAccessibilityElement = YES;
uiImage.CIImage.accessibilityLabel = bfCaseStudy.name;
uiImage.CIImage.accessibilityValue = bfCaseStudy.name;

CGContextDrawImage(context, [self rectForAttr:bfCaseStudy], uiImage.CGImage); 
```

无论哪种方式都会产生相同的结果。这是尝试访问信息的 UIAutomation 代码。

```
UIALogger.logDebug(bookTwoHelper.mainWindow.images()[5].label());
UIALogger.logDebug(bookTwoHelper.mainWindow.images()[5].name());
UIALogger.logDebug(bookTwoHelper.mainWindow.images()[5].value());

Debug: (2013-02-25 16:06:33 +0000) - (null)
Debug: (2013-02-25 16:06:33 +0000) - (null)
Debug: (2013-02-25 16:06:33 +0000) - (null) 
```

这是 DOM 的相关部分

```
UIAImage "(null)" {{0, 149}, {316, 55}} 
```

有没有办法在使用核心图形绘制的图像上设置可访问性标签/标识符/值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T17:11:15.573

属性 like`accessibilityLabel`仅在与 UIKit 控件（例如`UIView`等）一起使用时才有效`UIImageView`。因为您的图像不是真实的`UIView`，您需要通过使容器视图或视图控制器实现`UIAccessibilityContainer`协议来向 UIKit 提供额外信息。

有关更多信息，请参阅[iOS 的辅助功能编程指南，特别是](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/iPhoneAccessibility/Introduction/Introduction.html)[使自定义容器视图的内容可访问。](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/iPhoneAccessibility/Making_Application_Accessible/Making_Application_Accessible.html#//apple_ref/doc/uid/TP40008785-CH102-SW10)

# html - 如何将 2 个文本输入字段合二为一？

> ID：15071985
> 
> 赞同：1
> 
> 时间：2013-02-25T16:48:01.200
> 
> 标签：html, css, styles

我看到了一些很酷的效果，它们将两个文本输入字段放在一个表单中！我附上了一张图片给你看，所以你知道我的意思。有谁知道如何创建这样的东西？

可以用 CSS 完成吗？

![在此处输入图像描述](../Images/814e64e5223bf695b6e618dd4ed40997.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T16:51:24.957

你可以像这样设计它 - [http://jsbin.com/adalot/1/](http://jsbin.com/adalot/1/)

这应该会让你朝着正确的方向前进

```
 <div id='holder'>
    A :<input type='text' id='field1'/>
    B: <input type='text' id='field1'/>
  </div>

  #holder {border: solid 1px red; width: 400px; background-color: white;}
  input {border: none;}
  input:focus{outline:none;} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T16:50:37.597

它是 css .. 没有办法将 2 个不同的元素合二为一`<input>`。

你在图像上看到的是一个`<div>`包含 2 个`<input>`女巫的样式是“无样式”的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T16:55:00.427

使用 4 列设置分组到行并在内部插入 2 个文本框测试此表，其中显示样式在 javascript 中设置为 none 在任何情况下也有 2 个标签和另一个带有提交按钮的表

# awk - 从右到左重新对齐字段？

> ID：15071989
> 
> 赞同：0
> 
> 时间：2013-02-25T16:48:08.527
> 
> 标签：awk

我正在制作一个用于插入分隔符和删除空格的 awk 程序。我的一个领域有问题，它向右对齐。如何获取字段中的所有内容并将其对齐到字段的左侧？

```
ex: fields delimited by %

12340987%    29873%giberish   %
11234513%  34.122-%gibergiber %
to:
12340987%29873    %giberish   %
11234513%34.122-  %gibergiber % 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:12:12.313

我相信这就是您正在寻找的：

```
awk 'BEGIN{FS=OFS="%"}{sub(/^ */,"",$2);$2=sprintf("%-8s",$2); print}' 
```

您可以更改`8`以控制字段的宽度。

# email - 从已发送的邮件创建任务并包含附件

> ID：15071993
> 
> 赞同：0
> 
> 时间：2013-02-25T16:48:29.073
> 
> 标签：email, vba, outlook, task, attachment

在 Outlook 2010 VBA 中，我想在发送电子邮件时创建一个任务。

我想将电子邮件中的所有附件添加到任务中。

我试过`.Attachments.Add`（不支持）， `.Attachments = item.Attachments`返回属性是只读的。

是否有可能或如何将电子邮件附加到任务中？

```
Public WithEvents myOlApp As Outlook.Application

Private Sub Application_MAPILogonComplete()

End Sub

Private Sub Application_Startup()
    Initialize_handler
End Sub

Public Sub Initialize_handler()
    Set myOlApp = CreateObject("Outlook.Application")
End Sub

Private Sub myOlApp_ItemSend(ByVal item As Object, Cancel As Boolean)

Dim intRes As Integer
Dim strMsg As String
Dim objTask As TaskItem
Set objTask = Application.CreateItem(olTaskItem)
Dim strRecip As String
Dim att As MailItem
Dim objMail As Outlook.MailItem

strMsg = "Do you want to create a task for this message?"
intRes = MsgBox(strMsg, vbYesNo + vbExclamation, "Create Task")

If intRes = vbNo Then
    Cancel = False
Else

    For Each Recipient In item.Recipients
        strRecip = strRecip & vbCrLf & Recipient.Address
    Next Recipient

    With objTask
        '.Body = strRecip & vbCrLf & Item.Body
        .Body = item.Body
        .Subject = item.Subject
        .StartDate = item.ReceivedTime
        .ReminderSet = True
        .ReminderTime = DateSerial(Year(Now), Month(Now), Day(Now + 1)) + #8:00:00 AM#
        **.Attachments.Add (item.Attachments)**
        .Save
    End With

    Cancel = False

End If

Set objTask = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:57:41.613

这是我的最终代码

```
Public WithEvents myOlApp As Outlook.Application

Private Sub Application_MAPILogonComplete()

End Sub

Private Sub Application_Startup()
 Initialize_handler
End Sub

Public Sub Initialize_handler()
 Set myOlApp = CreateObject("Outlook.Application")
End Sub

Private Sub myOlApp_ItemSend(ByVal item As Object, Cancel As Boolean)

Dim intRes As Integer
Dim strMsg As String
Dim objTask As TaskItem
Set objTask = Application.CreateItem(olTaskItem)
Dim strRecip As String
Dim att As MailItem
Dim objMail As Outlook.MailItem
Dim Msg As Variant

strFolderPath = "C:\temp" ' path to target folder

strMsg = "Do you want to create a task for this message?"
intRes = MsgBox(strMsg, vbYesNo + vbExclamation, "Create Task")

If intRes = vbNo Then
  Cancel = False
Else

For Each Recipient In item.Recipients
    strRecip = strRecip & vbCrLf & Recipient.Address
Next Recipient

item.SaveAs strFolderPath & "\" & "test" & ".msg", olMSG

'item.Save

With objTask
    '.Body = strRecip & vbCrLf & Item.Body
    .Body = item.Body
    .Subject = item.Subject
    .StartDate = item.ReceivedTime
    .ReminderSet = True
    .ReminderTime = DateSerial(Year(Now), Month(Now), Day(Now + 1)) + #8:00:00 AM#
    .Attachments.Add item
    .Save
End With

Cancel = False

End If

Set objTask = Nothing

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:09:01.057

Attachments.Add 允许将字符串作为参数（完全查询的附件文件名）或 Outlook 项目（例如 MailItem）传递。你将附件集合作为参数传递，你不能这样做。

对于每个附件，首先保存附件（Attachment.SaveAsFile），然后将它们一次添加到任务中，并传递文件名作为参数。

# sql-server - 使用 TSQL 从 XML 中删除具有特定值的节点

> ID：15071994
> 
> 赞同：11
> 
> 时间：2013-02-25T16:48:30.290
> 
> 标签：sql-server, xml, tsql, contains

我正在尝试解析一段 XML 并删除包含某些值的节点。如果值准确，我知道如何删除它们，但我想使用“包含”之类的东西。

这可以完全删除：

```
update @XML set data.modify('delete //Message[text() = "customer has deleted their account"]') 
```

但我想删除“消息”节点仅包含文本的位置，例如：

```
update @XML set data.modify('delete //Message[contains(text(), "customer")]') 
```

但是，这会返回错误：

```
XQuery [@XML.data.modify()]: 'contains()' requires a singleton (or empty sequence), found operand of type 'xdt:untypedAtomic *' 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-25T18:28:17.017

尝试

```
update @XML set data.modify('delete //Message[text()][contains(.,"customer")]') 
```

删除`<message/>`元素及其内容

```
update @XML set data.modify('delete //Message//text()[contains(.,"customer")]') 
```

删除`<message/>`元素的内容。

此处示例[http://msdn.microsoft.com/en-us/library/ms178026.aspx](http://msdn.microsoft.com/en-us/library/ms178026.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-01-12T11:11:11.520

```
 declare @XML xml = '
    <Root>
      <Sub>
        <Record>
          <Guid>aslkjflaksjflkasjfkljsd</Guid>
        </Record>
        <Record>
           <Guid>opqiwuerl;kasdlfkjawop</Guid>
        </Record>
      </Sub>
    </Root>'

declare @Guid varchar(30) = 'aslkjflaksjflkasjfkljsd'

set @XML.modify('delete /Root/Sub/Record[Guid = sql:variable("@Guid")]') 
```

参考 [https://dba.stackexchange.com/questions/40039/how-to-return-xml-node-ordinal-or-delete-node-based-on-element-value](https://dba.stackexchange.com/questions/40039/how-to-return-xml-node-ordinal-or-delete-node-based-on-element-value)

# php - UTF-8 页面到 UTF-8 数据库表显示不正确

> ID：15071999
> 
> 赞同：0
> 
> 时间：2013-02-25T16:48:42.300
> 
> 标签：php, mysql, utf-8

我希望能解释为什么某些 UTF-8 文本被错误地保存到数据库表中......

我创建了一个 HTML 表单，页面的元内容设置为 UTF-8：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

PHP 和模板文件都是 Unicode/UTF-8。

表单字段数据被提交到`utf8_unicode_ci`编码的数据库表。

如果我提交带有诸如“éçä”（我从 Windows 的字符映射程序设置为 Unicode 字符集创建）之类的字符的表单，它们在数据库中显示不正确（“Ã©Ã§Ã¤”）。我正在通过 phpMyAdmin（也设置为 UTF-8 字符编码）查看数据库。

但是，如果我在将字符串插入数据库之前对字符串运行 iconv() 以转换为 ISO-8859-1，则字符会正确显示：

```
$input = iconv("UTF-8", "ISO-8859-1//TRANSLIT", $input); 
```

到底是怎么回事？从头到尾一切都是 UTF-8/Unicode 的事实不应该导致它在数据库中是正确的吗？我做错了什么，为什么将数据转换为 ISO-8859-1 有效？

对数据所做的唯一其他事情是 FILTER_SANITIZE_MAGIC_QUOTES：

```
$input = filter_var($input,FILTER_SANITIZE_MAGIC_QUOTES); 
```

感谢您的时间和投入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:53:13.713

您没有提到的两个步骤：

*   `Content-Type`在 HTTP标头中指定 UTF-8
*   *连接*MySQL时指定 UTF-8 ，例如[在 PDO 中](http://www.php.net/manual/en/ref.pdo-mysql.connection.php#refsect1-ref.pdo-mysql.connection-description)[指定`charset`](http://www.php.net/manual/en/ref.pdo-mysql.connection.php#refsect1-ref.pdo-mysql.connection-description)