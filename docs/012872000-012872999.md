# StackOverflow 问答 12872000-12872999

# android - 将颜色更改为自定义按钮

> ID：12872001
> 
> 赞同：0
> 
> 时间：2012-10-13T09:56:20.993
> 
> 标签：android

我的可绘制文件夹中有一个自定义按钮。我想在我的 XML 文件中多次使用它，使用不同的颜色。有没有办法使用相同的 custom_button 但颜色不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:23:27.723

首先创建一个选择器 xml 文件。选择器将让您更改特定状态下的按钮图像，例如焦点或按下。我给你选择器的示例代码

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/ok_pressed"
          android:state_pressed="true" />
    <item android:drawable="@drawable/ok"  />

</selector> 
```

现在使用 StateListDrawable，您可以将多个图形图像分配给单个 Drawable，并通过字符串 ID 值替换可见项。

```
StateListDrawable state_up = new StateListDrawable();
        state_up.addState(new int[] {android.R.attr.state_pressed},getResources().getDrawable(R.drawable.btn_up_cyan));
        state_up.addState(new int[] {android.R.attr.state_focused},getResources().getDrawable(R.drawable.btn_up_cyan));
        b1.setBackgroundDrawable(state_up); 
```

只需使用不同颜色的图像作为背景，并在您希望更改背景时使用上面的代码

# asp-classic - 在经典asp中将HTML表单转换为PDF

> ID：12872002
> 
> 赞同：2
> 
> 时间：2012-10-13T09:56:21.283
> 
> 标签：asp-classic

我有一个经典asp的表格，我想将该表格转换为pdf而不使用任何第三方。请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:22:20.103

你不能。经典 ASP 没有内置支持。您能做的最好的事情是制作一个打印 css 并让用户使用 PDF。

有 3rd 方工具可以看到这个问题[如何在经典 ASP 中创建 PDF 文件？](https://stackoverflow.com/questions/440905/how-can-i-create-a-pdf-file-in-classic-asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-05T14:42:35.543

您可以通过几个步骤来实现这一点。

1.  使用下面的代码保存到 Word 文档。

    ```
    <!DOCTYPE html>
    <%@ Language=VBScript %>
    <% 
    Response.ContentType = "application/msword"
    Response.AddHeader "Content-Disposition", "Attachment;Filename=PRINT_TEST.doc"
    %>
    <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title>PRINT TEST</title>
    </head> 
    <body>
    Hello! This is a Word File.
    </body>
    </html> 
    ```

注意：Word 文档不采用链接的 .css 文件。如果您需要添加 HTML 样式，则必须在标签之间将它们键入到此文件中。

2.  在网络服务器上保存 Word .doc 文件 (TEMP DIR)

3.  使用简单的 Python 批处理脚本即时将 Doc 转换为 PDF（下面的 Python 代码片段）

    ```
    inDocFile = SOURCE_DIR+DOC_FILE_NAME
    outPDFFile = OUTPUT_DIR+DOC_FILE_NAME[:-4]+".PDF"

    in_file = os.path.abspath(inDocFile)
    out_file = os.path.abspath(outPDFFile)

    word = comtypes.client.CreateObject('Word.Application')
    doc = word.Documents.Open(os.path.abspath(inDocFile))
    doc.SaveAs(os.path.abspath(outPDFFile), FileFormat=17)
    doc.Close()
    word.Quit() 
    ```

4.  从临时位置打开 PDF 文件

这是一个多步骤的过程，但就像一个魅力。祝你好运！

# css - 如何漂浮 到底部 当你不能使用 position:relative 和 position:absolute

> ID：12872004
> 
> 赞同：0
> 
> 时间：2012-10-13T09:56:57.320
> 
> 标签：css

我想将 a 浮动`<p>`到 a 的底部`<div>`，但据我所知，我不能将父级设置`<div>`为`position:relative`或`position:absolute`不破坏我的布局，该布局使用 Compass 的 Susy 框架。

我还能怎么做？

相关的 HTML 是：

```
<header>
  <div class='grid'>
    <div class='logo'>
      <img src='/images/logo3.png'>
    </div>
    <div class='tagline'>
      <p>Fast Facts About Your Website, Your Competition, And Best Practice</p>
    </div>
  </div>
</header> 
```

相关的CSS是：

```
header {
  clear: both;
}

.grid .logo {
  width: 30.43478%;
  float: left;
  margin-right: 4.34783%;
  display: inline;
  padding-left: 3.75em;
  margin: 0;
}

.grid .tagline {
  width: 65.21739%;
  float: right;
  margin-right: 0;
  #margin-left: -3.75em;
  display: inline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:00:23.397

据我从您的问题中了解到，您需要`<p>`在[**My Fiddle**](http://jsfiddle.net/YdjqJ/)`logo`之后清除您的浮动`logo` `div`[](http://jsfiddle.net/YdjqJ/)

 **```
<div style="clear: both;"></div>
<div class='tagline'>
  <p>Fast Facts About Your Website, Your Competition, And Best Practice</p>
</div> 
```

为什么要使用浮动宽度？有必要这么准确吗？为什么`display: inline;`在`.logo`和`.tagline`**

# asp.net-mvc - 我可以更改 ASP.NET MVC 4 中的 pages_Membership 表名前缀吗？

> ID：12872014
> 
> 赞同：4
> 
> 时间：2012-10-13T09:59:01.883
> 
> 标签：asp.net-mvc, asp.net-membership

我正在创建一个 ASP.NET MVC 4 网站，并使用默认项目模板在我的数据库中自动生成一些表以获取成员资格。例如：

*   网页_会员
*   网页_角色

等等

因为我可能想为多个网站使用一个数据库，所以我想用特定于该网站的内容替换“webpages_”前缀，但我找不到它的配置位置。如何在 ASP.NET MVC 4 中更改它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T10:17:16.670

不，不是。表名在 SimpleMembershipProvider 中硬编码。

如果需要，您可以获取源代码、修改名称并使用您自己的版本。来源在这里：

[http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/e0115a823029#src%2fWebMatrix.WebData%2fSimpleMembershipProvider.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/e0115a823029#src%2fWebMatrix.WebData%2fSimpleMembershipProvider.cs)

# camera - 使用 javafx 从 USB 摄像头捕获视频

> ID：12872015
> 
> 赞同：0
> 
> 时间：2012-10-13T09:59:04.487
> 
> 标签：camera, usb, javafx

有什么方法可以使用 javafx 从 USB 摄像头捕获视频，或者使用 java 以外的其他方式捕获视频，jmf 除外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:33:25.267

目前，javafx.scene.media 仅提供播放支持。

从文档 -

```
public Media(java.lang.String source) 
```

> 构造一个 Media 实例。这是指定媒体源的唯一方法。源必须代表一个有效的 URI 并且是不可变的。仅支持 HTTP、FILE 和 JAR URL。如果提供的 URL 无效，则会引发异常。

[http://docs.oracle.com/javafx/2/media/simpleplayer.htm](http://docs.oracle.com/javafx/2/media/simpleplayer.htm)

[http://docs.oracle.com/javafx/2/api/javafx/scene/media/package-summary.html](http://docs.oracle.com/javafx/2/api/javafx/scene/media/package-summary.html)

# .net - WCF - Binding.ReceiveTimeout & ReliableSession.InactivityTimeout

> ID：12872017
> 
> 赞同：4
> 
> 时间：2012-10-13T09:59:21.223
> 
> 标签：.net, wcf, reliablesession

我正在尝试制作一个使用回调客户端的 WCF 服务。只要有连接（互联网，网络）并且客户端或通道没有明确关闭通道，我希望通道保持打开状态。

为了保持通道打开（即使没有活动），我找到了 WCF 支持的可靠会话。我看到通过使用可靠会话，需要考虑两个计时器：the`Binding.ReceiveTimeout`和`ReliableSession.InactivityTimeout`.

在互联网上搜索后，我仍然无法确切了解这两者是如何协同工作的。我知道如果两者中的任何一个超时，连接就会进入故障状态。

我的第一个问题：启用可靠会话时究竟会发生什么？

我的第二个问题：[这里](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.binding.receivetimeout.aspx)，为什么msdn会这样说？

> 由于如果任一非活动计时器触发，连接就会断开，因此一旦 InactivityTimeout 大于 ReceiveTimeout 就增加它没有任何效果。这两个超时的默认值都是 10 分钟，因此在使用可靠会话时，您始终必须同时增加这两个超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:01:45.633

要获得第一个问题的答案，请查看此问题的不错答案：

[WCF 可靠会话的目的是什么？](https://stackoverflow.com/questions/2911221/what-is-the-purpose-of-wcf-reliable-session)

我在 msdn 网站上的解释很清楚：当到达 ReceiveTimeout 中指定的时间（例如 10 分钟）时，它将终止连接，即使可靠会话发送了保持活动状态（例如每 1 分钟） .

每分钟发送一次保持活动状态将确保永远不会达到 inactivityTimout（例如 5 分钟） - 因此通道将无休止地保持打开状态 - 但在 ReceiveTimeout 中指定的时间之后，会话/通道仍将关闭。

因此，据我了解，ReceiveTimeout 应该始终高于或与 inactivityTimeout 相同。

# java - Java OOP三角存在

> ID：12872021
> 
> 赞同：0
> 
> 时间：2012-10-13T09:59:40.873
> 
> 标签：java, oop, input, geometry

我最近开始编程。到目前为止，我已经学习了基础知识，现在是 OOP 的时候了，所以我有一些问题，因为我正在构建基本程序以了解原理并链接到我将以实际方式使用它的方式。

所以我正在用Java制作简单的三角形程序，到目前为止它计算周长（稍后将添加其他形状和其他参数），我碰到了我想添加三角形存在的墙（因为边不能是负数）并且我也喜欢允许用户输入。事情是我不知道在哪里放置代码以及如何引用类。线性（非 OOP）方式很简单，但它是如何在 OOP 中完成的，我是否必须通过方法创建另一个类或三角形类？

我的代码：

```
public class Trissturis {
    private int sideA, sideB, sideC;
    private double perimeter;

    public Trissturis(int a, int b, int c) {
        sideA = a;
        sideB = b;
        sideC = c;
    }

    public double getPerimeter() {
        return sideA + sideB + sideC;
    }
}

public class TestTri {
    public static void main(String[] args) {

        Trissturis t1 = new Trissturis(10, 20, 30);
        System.out.println("perimeter is  " + t1.getPerimeter());

        Trissturis t2 = new Trissturis(-1, 20, 30);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T10:05:13.937

要验证三角形，您必须检查所有边的长度是否大于零，并且没有一条边长于其他两条之和。实现此目的的方法是：

```
public boolean isValid(){
    return (sideA>0)&&(sideB>0)&&(sideC>0)&&(sideA+sideB>sideC)&&(sideA+sideC>sideB)&&(sideC+sideB>sideA);
} 
```

对于用户输入值，最好有单独的用户界面类。如果这将是一个桌面应用程序，您可以使用一些 Swing 类，例如（尽管有替代品）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T10:09:47.437

```
interface TriangleFactory {

  Triangle create();

}

class ConsoleTriangleFactory implements TriangleFactory {
  @Override
  Triangle create() {
    // read perimeter from console here with some nice prompt
    // check that every side is > 0, 
    // if it's not a number or less than 0 - then do some alert
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T10:08:44.197

您用于检查三角形是否正确构造（具有非负值等）的代码属于 Triangle 类。

获取用户输入的代码可以在您的测试中的 main() 中用于小程序，但可以在单独的 UI 命名空间中用于较大的应用程序。

hth

# android - Android 使用 SharedPreferences 保存和检索值 - 计数器

> ID：12872032
> 
> 赞同：2
> 
> 时间：2012-10-13T10:01:22.437
> 
> 标签：android, android-intent, sharedpreferences

您好，我是 android 新手，实际上我正在开发一个应用程序，用户将在该应用程序上单击一个按钮，并且该按钮应记录单击事件 - 每次单击该按钮时计数器应递增。该按钮将显示在一个活动中，一旦用户单击该按钮，将显示另一个活动，从而显示结果。

实际上，我在将 sharedPreferences 分配给按钮然后将其显示到下一个活动中时遇到问题，因此有点击次数。

我正在使用的代码如下：

MainActivity.java

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */

    /** Declare the variables being used */
    public static final String GAME_PREFERENCES = "GamePrefs";

     public static final String GAME_PREFERENCES_SCORE = "Score"; // Integer
    int counter;
    Button add;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        counter = 0;
        add = (Button) findViewById (R.id.bAdd);
        add.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter++;

                Intent openClickActivity2 = new Intent("com.android.jay.Results");
                startActivity(openClickActivity2);

            }
        });
       }
} 
```

结果.java

```
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.TextView;
public class Results extends MainActivity{

    public void onCreate(Bundle savedInstanceState) {

        SharedPreferences mGameSettings;
        super.onCreate(savedInstanceState);
        mGameSettings = getSharedPreferences(GAME_PREFERENCES, Context.MODE_PRIVATE);
        setContentView(R.layout.results);

        final TextView DisplayResults =
                (TextView) findViewById(R.id.bAdd);
                if (mGameSettings.contains(GAME_PREFERENCES_SCORE)) {
                DisplayResults.setText(mGameSettings.getString(GAME_PREFERENCES_SCORE, “counter”));
                }
        }

} 
```

任何指导我的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:35:49.580

Simply make a Preferences class

```
public class Preferences {

String MASTER_NAME = "mysticmatrix_master";
SharedPreferences mysticMatrixPref;

Preferences(Context context) {
    mysticMatrixPref = context.getSharedPreferences(MASTER_NAME, 0);
}

public void setAddCount(int count) {
    SharedPreferences.Editor prefEditor = mysticMatrixPref.edit();
    prefEditor.putInt("count", count);
    prefEditor.commit();

}

public int getAddCount() {
    return mysticMatrixPref.getInt("count", 0);
}
} 
```

and in your MainActivity.java put this code

```
public class MainActivity extends Activity implements OnClickListener {

ImageButton add;
Preferences cpObj;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    preferences = new Preferences(getApplicationContext());

    /*
     * getting the count variable and adding 1 in that to check the condition of showing rate activity and adds
     */
     add = (Button) findViewById (R.id.bAdd);
    add.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
         cpObj = new Preferences(getApplicationContext());
         cpObj.setAddCount(cpObj.getAddCount() + 1);

        }
    });
    }
    } 
```

And in your result activity just get the count's value

```
import android.content.Context;
public class Results extends MainActivity{
Preferences cpObj;

public void onCreate(Bundle savedInstanceState) {

     preferences = new Preferences(getApplicationContext());
    setContentView(R.layout.results);

    final TextView DisplayResults =
            (TextView) findViewById(R.id.bAdd);
            DisplayResults.setText(cpObj.getAddCount());
            }
    } } 
```

By this you will get the default value of result as '0' and you can set that in your Preferences class

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:23:23.827

您必须在 MainActivity 中设置 GAME_PREFERENCES_SCORE。在 counter++ 之后做这样的事情：

getSharedPreferences(GAME_PREFERENCES, Context.MODE_PRIVATE).edit().setInt(GAME_PREFERENCES_SCORE, counter)。犯罪（）;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T10:16:42.330

使用这样的方法：

```
 public static void SavePreference(Context context, String key, Integer value) {
    SharedPreferences.Editor editor = PreferenceManager
            .getSharedPreferences(GAME_PREFERENCES, Context.MODE_PRIVATE)
            .edit();
    editor.putInt(key, value);
    editor.commit();
} 
```

在你的 onclick 之后 counter++ 添加这个：

```
SavePereference(context, "GAME_PREFERENCES_SCORE", counter); 
```

# matlab - 向矩阵添加一行

> ID：12872039
> 
> 赞同：2
> 
> 时间：2012-10-13T10:02:17.957
> 
> 标签：matlab, row, add

我有一个来自文本文件的矩阵 2x20
我想在该矩阵中添加一行

```
twopts = reshape(textread('input.txt', '%s'),2,20); % 2 by 20
ones_row = ones(1,20);   %1 by 20 of ones

twopts = [twopts;ones_row] 
```

给我一个错误：

> “错误使用 vertcat CAT 参数尺寸不一致。”

但矩阵尺寸匹配...... 2x20 和 1x20 使 3x20

它有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:18:26.870

`twopts`是一个字符串元胞数组并且`ones_row`是一个矩阵，你不能把它们放在一起。

这是做你想做的吗？

```
twopts = reshape(textread('input.txt', '%s'),2,20); % 2 by 20
ones_row = ones(1,20);   %1 by 20 of ones
ones_row = mat2cell(ones_row, 1, ones_row); % convert to cell array

twopts = [twopts;ones_row] 
```

或者，如果输入数据包含数字而不是文本，您可能希望将元胞数组转换为矩阵：

```
twopts = reshape(textread('input.txt', '%s'),2,20); % 2 by 20
twopts = cellfun(@str2num,twopts);
ones_row = ones(1,20);   %1 by 20 of ones

twopts = [twopts;ones_row] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:13:08.120

不要像现在那样读取字符串，而是尝试简单地读取数字（即 - 如果您的数据是数字）。只需省略`%s`参数即可`textread`：

```
twopts = textread('input.txt');
ones_row = ones(1,20);
twopts = [twopts; ones_row]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T13:59:25.697

如果您的数据是数字，您可以尝试使用

> > twopts = importdata('input.txt');
> > 
> > one_row = 个（1,20）；
> > 
> > twopts = [twopts; one_row];

# asp.net - 监视 ASP.NET 应用程序内存和磁盘使用情况

> ID：12872041
> 
> 赞同：3
> 
> 时间：2012-10-13T10:02:26.310
> 
> 标签：asp.net, .net, asp.net-mvc, performance, profiling

监视 ASP.NET (MVC) 应用程序（或和应用程序池）的内存/cpu/磁盘（读取/秒或总读取）利用率的最佳方法是什么。有没有可以做到这一点的性能计数器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T10:06:32.513

您可以使用内置的 ASP.NET 性能监视工具（它将为您提供 cpu 利用率/内存统计信息），您可以通过启用跟踪来进一步扩展它，这将为您提供进一步的诊断信息。

```
<configuration>
 <system.web>
   <trace enabled="true" pageOutput="false" requestLimit="40" localOnly="false"/>
 </system.web>
</configuration> 
```

[http://msdn.microsoft.com/en-us/library/3xxk09t8(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/3xxk09t8(v=vs.100).aspx)

[http://msdn.microsoft.com/en-us/library/0x5wc973(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/0x5wc973(v=vs.100).aspx)

# asp.net - 输入类型=“提交”是否总是在浏览器中呈现为按钮？

> ID：12872042
> 
> 赞同：0
> 
> 时间：2012-10-13T10:02:32.610
> 
> 标签：asp.net, html

我在 ASP.NET 生成的页面中看到了以下代码段。

```
<input name="ctl00$MainContent$Button1" id="MainContent_Button1" type="submit" value="Button"> 
```

问题是，

**type="submit"**控件是否总是在浏览器中呈现为**按钮**？

这直接影响到Coded UI测试代码应该怎么写，如果是Button，就用**HtmlInputButton**，如果不是，就需要用其他类型来表示输入元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:55:50.860

好吧，似乎是内容与样式的混淆。

输入的`submit`类型只是告诉渲染客户端这个特定的输入元素应该在触发时发布它包含的表单（例如通过鼠标单击）。

无论如何，当前浏览器的默认样式表包括样式/将这些输入呈现为按钮。但是默认样式并不是真正需要的，因此也可以在自制的 HTML/CSS 客户端中省略。

示例：Webkit 按钮的默认样式：

```
input[type="button"], input[type="submit"], input[type="reset"] {
    -webkit-appearance: push-button;
    -webkit-box-align: center;
    display: inline-block;
    box-sizing: border-box;
    cursor: default;
    padding: 1px 6px;
    font: -webkit-small-control;
    white-space: pre;
    text-align: center;
    border: 2px outset buttonface;
    border-image: initial;
    color: buttontext;
    background-color: buttonface;
    -webkit-rtl-ordering: logical;
    -webkit-user-select: text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:24:07.903

不可以。浏览器可能以不同的方式显示元素，或者它可能什么也不显示（例如，如果它是听觉浏览器）。图形浏览器通常显示`input type="button"`为按钮，但这可以通过 CSS 或 JavaScript（可能会更改`type`属性）进行更改。并且按钮的视觉外观可能会有很大差异；从视觉上看，按钮的构成并没有严格的定义。

# android - Android WebView -> 显示 WebArchive

> ID：12872043
> 
> 赞同：19
> 
> 时间：2012-10-13T10:02:33.977
> 
> 标签：android, webview, webarchive

Android 的 WebView 从 API 级别 11 开始就有这个 saveWebArchive 方法：[http://developer.android.com/](http://developer.android.com/reference/android/webkit/WebView.html#saveWebArchive%28java.lang.String,%20boolean,%20android.webkit.ValueCallback%3Cjava.lang.String%3E%29)。

它可以将整个网站保存为网络档案，这很棒！但是如何将下载的内容恢复到 webview 中？我试过

```
webview.loadUrl(Uri.fromFile(mywebarchivefile)); 
```

但这只会在屏幕上显示 xml。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-18T23:34:29.233

## 2014 年 2 月 21 日更新

我在下面发布的答案不适用于在 Android 4.4 KitKat 及更高版本下保存的网络存档文件。Android 4.4“KitKat”（也可能是较新版本）下 WebView 的 saveWebArchive() 方法不会将 Web 存档保存在此阅读器代码在下面发布的 XML 代码中。相反，它以 MHT (MHTML) 格式保存页面。读回 .mht 文件很容易 - 只需使用：

```
webView.loadUrl("file:///my_dir/mySavedWebPage.mht"); 
```

就是这样，比以前的方法容易得多，并且与其他平台兼容。

## 以前发布过

我自己也需要它，而且在我搜索的所有地方，都有这样的悬而未决的问题。所以我不得不自己解决。下面是我的小 WebArchiveReader 类和有关如何使用它的示例代码。请注意，尽管 Android 文档声明 shouldInterceptRequest() 已添加到 API11 (Honeycomb) 中的 WebViewClient 中，但此代码可以正常工作，并且已在低至 API8 (Froyo) 的 Android 模拟器中成功测试。以下是所需的所有代码，我还将完整的项目上传到了[https://github.com/gregko/WebArchiveReader的 GitHub 存储库](https://github.com/gregko/WebArchiveReader)

文件 WebArchiveReader.java：

```
package com.hyperionics.war_test;

import android.util.Base64;
import android.webkit.WebResourceResponse;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import org.w3c.dom.*;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import java.io.ByteArrayInputStream;
import java.io.InputStream;
import java.util.ArrayList;

public abstract class WebArchiveReader {
    private Document myDoc = null;
    private static boolean myLoadingArchive = false;
    private WebView myWebView = null;
    private ArrayList<String> urlList = new ArrayList<String>();
    private ArrayList<Element> urlNodes = new ArrayList<Element>();

    abstract void onFinished(WebView webView);

    public boolean readWebArchive(InputStream is) {
        DocumentBuilderFactory builderFactory =
                DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = null;
        myDoc = null;
        try {
            builder = builderFactory.newDocumentBuilder();
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        }
        try {
            myDoc = builder.parse(is);
            NodeList nl = myDoc.getElementsByTagName("url");
            for (int i = 0; i < nl.getLength(); i++) {
                Node nd = nl.item(i);
                if(nd instanceof Element) {
                    Element el = (Element) nd;
                    // siblings of el (url) are: mimeType, textEncoding, frameName, data
                    NodeList nodes = el.getChildNodes();
                    for (int j = 0; j < nodes.getLength(); j++) {
                        Node node = nodes.item(j);
                        if (node instanceof Text) {
                            String dt = ((Text)node).getData();
                            byte[] b = Base64.decode(dt, Base64.DEFAULT);
                            dt = new String(b);
                            urlList.add(dt);
                            urlNodes.add((Element) el.getParentNode());
                        }
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
            myDoc = null;
        }
        return myDoc != null;
    }

    private byte [] getElBytes(Element el, String childName) {
        try {
            Node kid = el.getFirstChild();
            while (kid != null) {
                if (childName.equals(kid.getNodeName())) {
                    Node nn = kid.getFirstChild();
                    if (nn instanceof Text) {
                        String dt = ((Text)nn).getData();
                        return Base64.decode(dt, Base64.DEFAULT);
                    }
                }
                kid = kid.getNextSibling();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    public boolean loadToWebView(WebView v) {
        myWebView = v;
        v.setWebViewClient(new WebClient());
        WebSettings webSettings = v.getSettings();
        webSettings.setDefaultTextEncodingName("UTF-8");

        myLoadingArchive = true;
        try {
            // Find the first ArchiveResource in myDoc, should be <ArchiveResource>
            Element ar = (Element) myDoc.getDocumentElement().getFirstChild().getFirstChild();
            byte b[] = getElBytes(ar, "data");

            // Find out the web page charset encoding
            String charset = null;
            String topHtml = new String(b).toLowerCase();
            int n1 = topHtml.indexOf("<meta http-equiv=\"content-type\"");
            if (n1 > -1) {
                int n2 = topHtml.indexOf('>', n1);
                if (n2 > -1) {
                    String tag = topHtml.substring(n1, n2);
                    n1 = tag.indexOf("charset");
                    if (n1 > -1) {
                        tag = tag.substring(n1);
                        n1 = tag.indexOf('=');
                        if (n1 > -1) {
                            tag = tag.substring(n1+1);
                            tag = tag.trim();
                            n1 = tag.indexOf('\"');
                            if (n1 < 0)
                                n1 = tag.indexOf('\'');
                            if (n1 > -1) {
                                charset = tag.substring(0, n1).trim();
                            }
                        }
                    }
                }
            }

            if (charset != null)
                topHtml = new String(b, charset);
            else
                topHtml = new String(b);
            String baseUrl = new String(getElBytes(ar, "url"));
            v.loadDataWithBaseURL(baseUrl, topHtml, "text/html", "UTF-8", null);
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
        return true;
    }

    private class WebClient extends WebViewClient {
        @Override
        public WebResourceResponse shouldInterceptRequest(WebView view, String url) {
            if (!myLoadingArchive)
                return null;
            int n = urlList.indexOf(url);
            if (n < 0)
                return null;
            Element parentEl = urlNodes.get(n);
            byte [] b = getElBytes(parentEl, "mimeType");
            String mimeType = b == null ? "text/html" : new String(b);
            b = getElBytes(parentEl, "textEncoding");
            String encoding = b == null ? "UTF-8" : new String(b);
            b = getElBytes(parentEl, "data");
            return new WebResourceResponse(mimeType, encoding, new ByteArrayInputStream(b));
        }

        @Override
        public void onPageFinished(WebView view, String url)
        {
            // our WebClient is no longer needed in view
            view.setWebViewClient(null);
            myLoadingArchive = false;
            onFinished(myWebView);
        }
    }
} 
```

下面是如何使用这个类，示例 MyActivity.java 类：

```
package com.hyperionics.war_test;

import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import java.io.IOException;
import java.io.InputStream;

public class MyActivity extends Activity {

    // Sample WebViewClient in case it was needed...
    // See continueWhenLoaded() sample function for the best place to set it on our webView
    private class MyWebClient extends WebViewClient {
        @Override
        public void onPageFinished(WebView view, String url)
        {
            Lt.d("Web page loaded: " + url);
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        WebView webView = (WebView) findViewById(R.id.webView);
        try {
            InputStream is = getAssets().open("TestHtmlArchive.xml");
            WebArchiveReader wr = new WebArchiveReader() {
                void onFinished(WebView v) {
                    // we are notified here when the page is fully loaded.
                    continueWhenLoaded(v);
                }
            };
            // To read from a file instead of an asset, use:
            // FileInputStream is = new FileInputStream(fileName);
            if (wr.readWebArchive(is)) {
                wr.loadToWebView(webView);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    void continueWhenLoaded(WebView webView) {
        Lt.d("Page from WebArchive fully loaded.");
        // If you need to set your own WebViewClient, do it here,
        // after the WebArchive was fully loaded:
        webView.setWebViewClient(new MyWebClient());
        // Any other code we need to execute after loading a page from a WebArchive...
    }
} 
```

为了使事情完整，这是我用于调试输出的 Lt.java 小类：

```
package com.hyperionics.war_test;

import android.util.Log;

public class Lt {
    private static String myTag = "war_test";
    private Lt() {}
    static void setTag(String tag) { myTag = tag; }
    public static void d(String msg) {
        // Uncomment line below to turn on debug output
        Log.d(myTag, msg == null ? "(null)" : msg);
    }
    public static void df(String msg) {
        // Forced output, do not comment out - for exceptions etc.
        Log.d(myTag, msg == null ? "(null)" : msg);
    }
} 
```

希望这会有所帮助。

## 2013 年 7 月 19 日更新

某些网页没有指定文本编码的元标记，然后我们上面显示的代码无法正确显示字符。在此代码的 GitHub 版本中，我现在添加了字符集检测算法，它在这种情况下猜测编码。再次，请参阅[https://github.com/gregko/WebArchiveReader](https://github.com/gregko/WebArchiveReader)

格雷格

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-20T00:06:13.213

我发现了一种阅读保存的网络档案的无证方式。做就是了：

```
String raw_data = (read the mywebarchivefile as a string) 
```

然后打电话

```
webview.loadDataWithBaseURL(mywebarchivefile, raw_data, "application/x-webarchive-xml", "UTF-8", null); 
```

参考： [http ://androidxref.com/4.0.4/xref/external/webkit/Source/WebCore/loader/archive/ArchiveFactory.cpp](http://androidxref.com/4.0.4/xref/external/webkit/Source/WebCore/loader/archive/ArchiveFactory.cpp)

适用于 Android 3.0，API 级别 11。

# tomcat - 在我的服务器上将端口 80 转发到 8080 将阻止端口 8080 的用户能够访问我的网站吗？

> ID：12872051
> 
> 赞同：4
> 
> 时间：2012-10-13T10:04:24.050
> 
> 标签：tomcat, port, portforwarding

我有一个 web 应用程序在 tomcat 上的 8080 端口运行。该应用程序需要可以从非常严格的防火墙后面访问。将端口 80 转发到 8080 是否允许防火墙后面阻止 8080 的用户访问应用程序？

如果没有，我还有什么其他选择？

[我按照这些说明进行端口转发](http://blog.xeiam.com/blog/2013/06/27/port-forwarding-80-to-8080-for-tomcat-using-ipfw-on-mac-osx/)

第 1 步：查看当前防火墙规则

`sudo ipfw show`

第二步：添加端口转发规则（80到8080）

Tomcat 运行的默认端口是 8080，所以这里我们展示从端口 80 到 8080（Tomcat 的默认端口）进行端口转发的命令。显然，这也适用于其他端口，您只需要相应地调整命令。

`sudo ipfw add 100 fwd 127.0.0.1,8080 tcp from any to any 80 in`

这是临时更改，重启后会恢复。如果你想让它永久化，你可以为它创建一个 lauch 守护进程。

可选删除规则

如果要删除防火墙规则，请运行：

`sudo ipfw flush`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T10:09:58.287

是的，它会起作用，因为转发是在你的机器上完成的，它看起来就像在端口 80 上一样。我们有一个类似的设置，它工作正常。

当然，如果防火墙非常严格，他们可能会有其他可能干扰的阻止规则（也许他们只允许某些 IP 通过）。

# php - PHP : 发出 curl 请求

> ID：12872053
> 
> 赞同：0
> 
> 时间：2012-10-13T10:04:48.013
> 
> 标签：php

我这里有问题

```
<?php 
        include('smsconfig.php');
        include("SMTPconfig.php");
        include("dbconnect.php");

        define("SITE_URL", "http://gf2fyu.blah.com");
        $GLOBAL_REST_URL = "gf2fyu.domain.com/organization/";

        $headers = array(
                        'X-MYDOMAIN-Secret:VuFlRQv40SUp0y1AXflMD0hWw8ZiiTu08f9ZXc0AYFc=',
                        'Content-Type: application/json; charset=UTF-8',
                        'Accept: application/json; charset=UTF-8',
        );
        //$json = array2json($ages);
        $curl_handle=curl_init();
        curl_setopt($curl_handle,CURLOPT_URL,$GLOBAL_REST_URL);
        curl_setopt($curl_handle,CURLOPT_CONNECTTIMEOUT,2);
    //    curl_setopt($curl_handle, CURLOPT_POSTFIELDS,$json);
        curl_setopt($curl_handle, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($curl_handle,CURLOPT_RETURNTRANSFER,1);
        $buffer = curl_exec($curl_handle);
        curl_close($curl_handle);
        $getit =  json_decode($buffer, true);
        $smskey =  substr(number_format(time() * rand(),0,'',''),0,5);
        print_r($getit);
?> 
```

如果我在本地服务器和 mozila REST 上运行上面的代码，它对我来说工作正常

客户端，但每当我试图将此代码放在生产版本上时

此代码未命中其余服务器。

请告诉我这里有什么问题？

我在 MOzila 中使用相同的标头，它工作正常

我正在运行 Nginx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:29:52.490

一切都在评论中，但让我们按顺序放好。

1）Curl 可能没有安装在服务器上的 PHP 中。要找出答案，请打开错误报告（或检查错误日志）。或者，一种更稳健的方法是检查函数。将以下内容添加到您的代码中（就在包含之后）

```
if (!function_exists('curl_init')) {
     die('Curl not installed');
} 
```

解决方案：您可以尝试 file_get_contents，但如评论中所述，通常不推荐，因为这也被禁用。如果您需要传递标头，您可以在“上下文”中执行此操作（调用中的第三个参数 - 查看手册）。更好的选择是安装 curl（或获得安装支持）。

2) 可能启用了防火墙。您可以通过检查[curl_getinfo](http://www.php.net/manual/en/function.curl-getinfo.php) () 并将结果转储到屏幕（用于测试）来确定这一点。这将告诉您它是否被阻止或通过。有关更多信息，请参阅手册（上面链接）。

3）您的代码中可能存在导致问题的错误。检查错误日志，或打开 error_reporting

```
error_reporting(E_ALL);
ini_set('display_errors', 'on'); 
```

不过，请记住在最终投入生产时删除这些行。

# matlab - Matlab具有条件的多个矩阵

> ID：12872054
> 
> 赞同：1
> 
> 时间：2012-10-13T10:04:51.280
> 
> 标签：matlab, matrix

我知道我可以传递矩阵的所有元素并做到这一点。

但也许还有另一种选择。

我想要做：

```
mat1 = mat2 * mat1; 
```

mat1 中的每个元素变为负数或大于 255，我想保留前一个元素。

例如（结果不正确，这仅用于示例）：

```
mat1 = [10  25  12
        33  7   163
        232 13  77]

mat2 = [-1  2  -3
         4 -5   6
         -7 -8  9] 
```

假设 mat1 = mat2 * mat1 给出：

```
mat1 = [-77.32  59    298
        0       -33   12
        -600     256   80] 
```

所以我想将 mat1 修复为：

```
mat1 = [10   59  12
        0    7   12
        232  13  80] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T10:27:29.170

如果我理解正确，你有一个矩阵乘法

```
mat2 * mat1 
```

最好是将矩阵乘法结果存储在第三个矩阵中

```
mat3 = mat2 * mat1 
```

和

```
idx = (mat3 < 0 | mat3 > 255) 
```

你有一个矩阵，其中有你想要替换的地方，而没有的地方为零。应用此索引将 mat3 中的值替换为 mat1 的值

```
mat3(idx) = mat1(idx) 
```

结果是一个矩阵，其中每个小于 0 或大于 255 的元素都被替换为 mat1 的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T10:24:25.740

我认为将矩阵相乘然后“修复”结果是最好的选择。原因如下：

1.  您已经计算了产品矩阵中的每个单元格，以了解是否要保留它
2.  Matlab 非常快地执行矩阵乘法

所以我会简单地选择：

```
prod = mat1 * mat2
mask = (prod < 0) | (prod > 255)
prod(mask) = mat1(mask) 
```

# java - eclipse 不支持在 gwt web 项目的服务器包中创建 servlet

> ID：12872061
> 
> 赞同：2
> 
> 时间：2012-10-13T10:05:41.333
> 
> 标签：java, gwt, web

在 Create Servlet 对话框中（通过右键单击我的项目中的包打开，New > Other，然后选择 Web > Servlet），“Project”下拉列表中没有选择：

源文件夹和 Java 包的“浏览”按钮也不起作用。

安装 GWT Web 项目并在现有项目中添加此类支持无济于事。顺便说一句，该项目已经是按照此处所述的说明创建的 Web 应用程序项目：[http ://code.google.com/appengine/docs/java/gettingstarted/creating.html](http://code.google.com/appengine/docs/java/gettingstarted/creating.html)

相反，我必须创建一个类，然后手动将超类设置为 javax.servlet.http.HttpServlet 以将 servlet 添加到项目中。

它是 Google 插件或 Eclipse 中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:55:04.440

您可以转到“项目 > 属性 > 项目构面”并启用“动态 Web 模块”

如果您已经安装了 Eclipse 的 JavaEE 版本（或者相应的插件），那么您应该会在项目的上下文菜单中看到“New > Servlet”操作。

注意：根据活动透视图，该操作可能隐藏在“新建 > 其他 > Web > Servlet”下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:29:49.707

我想该选项是由 Eclipse 的 Web 工具平台 (WTP) 贡献的，它只会将它添加到“动态 Web 项目”项目中，而您的 Eclipse 项目可能不是（这类似于由GPE 在非 GWT 项目中不可用）。

换句话说，这不是一个错误，它与应用于您的项目的 Eclipse 方面和性质有关。

如果您不知道什么是动态 Web 项目和/或如何使用它，我建议您只需使用“新建类”向导并选择正确的超类，然后手动将`<servlet>`配置添加`<servlet-mapping>`到您的 web.xml .

# php - 如何使用不带按钮和 JavaScript 的选择框加载数据库内容

> ID：12872063
> 
> 赞同：0
> 
> 时间：2012-10-13T10:05:43.413
> 
> 标签：php, mysql, select, textbox

我正在为网站制作一个管理页面，用于编辑前端内容。我不想使用 JavaScript，我想用原始 PHP 来实现。

事情是：用户会从选择框中选择一个页面，根据页面的内容会被加载到两个文本框中。然后用户将在文本框中编辑它们并使用更新按钮更新内容。

（选择框没有提交按钮，我想要'onselect'数据内容加载）

我需要，用户只需选择一个页面，然后没有按钮被按下，内容就会被加载。我不想为此部署 JavaScript。是否可以使用原始 PHP？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:08:37.203

如果您接受您的用户可能必须使用将提交表单的回车键，那么您就可以了。

但是你不能在一个选择上发生一个动作，甚至不用回车键，没有javascript。

请注意，不使用 javascript 的要求，特别是对于管理工具，是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:09:40.357

PHP 是一种服务器端编程语言。您不能真正直接影响客户端，只能通过表单等间接影响。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-13T10:36:35.687

是的，使用原始 PHP 是可能的，但我不推荐它。

您可以将选择框放在一个

```
<form action="targetFile.php" method="GET"> 
```

要在没有提交按钮的情况下提交表单，您可以使用：

```
<select name="sel" onChange="this.form.submit()"> 
```

提交表单时，浏览器会加载站点“targetFile.php”，在该站点上，您可以使用 php 设置文本框内容：

```
<input type="text" value="
    <?php
        if($_GET['sel'] == 0) echo "content1";
        else echo "content2";
    ?>
"> 
```

如果您想动态加载内容（无需重新加载站点），您必须使用 Javascript，也许还有 Ajax。

# c# - 在 ASP.NET 中获取带有子文件夹的活动页面

> ID：12872064
> 
> 赞同：0
> 
> 时间：2012-10-13T10:05:48.517
> 
> 标签：c#, asp.net

我正在.NET 中寻找一种方法，它允许我获取当前页面的路径，以及应用程序上的任何子文件夹。例如

localhost:3832/Admin/AdminTest.aspx 返回 Admin/AdminTest.aspx

localhost:3832/Test.aspx 返回 Test.aspx

[http://www.deployed.com/Application/Admin/AdminTest.aspx](http://www.deployed.com/Application/Admin/AdminTest.aspx)返回 Admin/AdminTest.aspx

任何想法我可以使用什么方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:56:35.030

以下是路径选项的摘要以及描述和示例路径：

[理解 ASP.NET 路径](http://www.west-wind.com/weblog/posts/2009/Dec/21/Making-Sense-of-ASPNET-Paths)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:09:37.280

尝试

字符串路径 = HttpContext.Current.Request.Url.AbsolutePath;

# python - html 页面中 Tornado 语句的语法笑话

> ID：12872067
> 
> 赞同：0
> 
> 时间：2012-10-13T10:06:30.987
> 
> 标签：python, if-statement, tornado

我有语法问题。

我的 html 页面中有这个 Tornado 声明：

```
{% if usrperm > 2 %} 
```

其中*usrperm*是从 Tornado 处理程序传递到页面的整数。只有当这个值大于 2 时，我才会比较这个值并显示一个*div块。但是这个语句不起作用。*

如果我打印*usrperm*变量，我有这个：

**[{'烫发'：1L}]**

那么我错在哪里了？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:18:24.783

显然`usrperm`不是整数，而是字典。所以你的支票应该是这样的：

```
{% if usrperm[0]['perm'] > 2 %} 
```

通常，您应该提供更多详细信息以获得更好的答案。例外细节比“没用”更有帮助。查看将数据传递给龙卷风的代码也会有所帮助。

# blogger - 如何在 Blogger 中制作无限滚动页面？

> ID：12872070
> 
> 赞同：12
> 
> 时间：2012-10-13T10:06:37.463
> 
> 标签：blogger, infinite-scroll

我有一个博客，想让它无限滚动，这样你就不必点击页面和帖子页面。任何人都可以帮助我编写代码，根据**Blogger** ，它是 HTML 格式的吗？谢谢 ：-）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T12:42:28.597

### 如何向 Blogger 博客添加无限滚动

最近我读了一篇有趣的文章，[如何为 Blogger 博客添加无限滚动](http://blog.manki.in/2012/04/how-to-add-infinite-scrolling-to.html)。如果您正在使用 Blogger 的博客，您可以按照说明为您的博客提供无限滚动，无需太多麻烦。

小部件的代码可在[Google Code](http://code.google.com/p/manki-scripts/source/browse/blogger-infinite-scrolling.js)上找到。随意复制或调整代码。

从他们的[网站上](http://blog.manki.in/2012/04/how-to-add-infinite-scrolling-to.html)，有几点值得一提：

> *   此代码使用[jQuery 库](http://jquery.com/)，所以不要忘记包含它。
> *   自定义模板博客可能需要更改`postContainerSelector`代码中变量的值。
> *   您已手动将[+1 按钮](http://www.google.com/+1/button/)添加到我的博客。动态加载的帖子不会初始化 +1 按钮；`gapi.plusone.go()`为了解决这个问题，每次将新帖子添加到页面时，我都必须打电话。
> *   `_WidgetManager`是 Blogger 博客中的一个 JavaScript 对象。您可以查询此对象以查找一些页面元数据。此代码用于`_WidgetManager`确定当前页面是否显示单个帖子。当只需要显示单个帖子时，无限滚动是没有意义的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T10:09:40.110

HTML 无法实现这一点，您需要 JavaScript。

首先为滚动事件设置一个事件监听器。当它触发时，将滚动的距离与文档和窗口的高度进行比较。

如果这表明您在文档附近，请使用 XMLHttpRequest 下载更多内容，然后通常的 DOM 会怀疑将该内容添加到页面中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T10:18:11.077

您可以通过 JQuery 或 JScript 实现这一点。HTML 不能单独做到这一点。

[这](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/#.UHk_g2_ZHXB)是一些示例，您如何获得它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-13T12:36:40.810

HTML 没有在高度方面指定绝对值，因为它自动允许无限滚动（例如，你不能说 height="100%"。就像 blogger 这样的 CMS 博客而言，应该有用户偏好来说明有多少帖子您想在控制面板中显示。或者，如果您使用带有数据库的服务器端技术（例如 php），您可以使用记录集分页指定显示的项目数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-04T15:51:30.913

您需要使用 JavaScript 添加事件侦听器，这意味着当特定元素进入视口时，会触发一个事件并从某些外部资源中获取数据。数据采用 JSON 格式，您需要提取它并将信息附加到 DIV 中。
为此，我制作了一个脚本，该脚本使用 Jquery 从 Google Docs 中获取数据，并在您滚动到最底部后触发该事件。[你可以在这里查看无限滚动](http://www.funbutlearn.com/2013/04/facebook-style-ajax-page-loading-for.html)

# git - Aptana / Git：如何“忘记”未分级的更改

> ID：12872075
> 
> 赞同：0
> 
> 时间：2012-10-13T10:07:02.237
> 
> 标签：git, aptana

我是 Git 新手，

做了一些我不想提交但想保留在本地的本地更改。如何让 Aptana 中的 Git “忘记”这些更改并将它们从非暂存更改菜单中删除？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:09:25.117

```
git reset 
```

或者：

```
git reset (filenames) 
```

# c++ - Microsoft Visual C++ 2010 无法调试？

> ID：12872077
> 
> 赞同：0
> 
> 时间：2012-10-13T10:07:04.743
> 
> 标签：c++, compilation

我安装了该程序，并编写了一个简单的 C 程序来尝试它，但我无法构建它或任何东西！调试、构建和运行选项都是灰色的！我不能点击它们请帮助:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:27:11.197

在 Visual Studio 中，您的代码需要在项目中才能构建/调试它。您不能只打开`.cpp`文件并运行它。（创建项目时，Visual Studio 会创建一个解决方案来包含它（一个解决方案可以包含许多项目））

您可以使用以下命令创建一个新项目`File -> New -> Project`：

![在此处输入图像描述](../Images/649a7eed98d3bf62557464e46be3422b.png)

然后将您的代码添加到该项目，或者如果您已经拥有源代码文件，您可以使用“从现有代码文件创建项目”向导，该向导位于`File -> New -> Project from existing code`

![在此处输入图像描述](../Images/7a4a7c2318e819b3df4c457ff6b8fa72.png)

# javascript - jQuery悬停检测通过另一个元素？

> ID：12872079
> 
> 赞同：3
> 
> 时间：2012-10-13T10:07:11.420
> 
> 标签：javascript, jquery, hover

我正在尝试为我的一个项目制作一个自定义的 jQuery 拖放功能。

我遇到的问题是，当拖动元素时，它被放在鼠标和放置区域之间，我无法找到一种体面的方法来检测通过拖动元素悬停在放置区域上而不会稍微偏移。

```
$(window).mousemove(function (event) {
    $('.element').css({
        'left' : event.pageX-30 + 'px',
        'top' : event.pageY-30 + 'px'
    });
}); 
```

上面的代码移动了一个简单的`<span`> 来匹配鼠标位置。

```
$('.dropregion').hover(function () {
    console.log('hover');
}, function () {
    console.log('unhover');
}); 
```

这是我习惯使用 jQuery 的简单悬停检测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:24:34.857

您可以尝试使用 css 禁用跨度上的鼠标事件，这应该使其对鼠标透明并允许悬停在跨度下激活

CSS：

```
.element {pointer-events:none} 
```

参考：

[https://developer.mozilla.org/en-US/docs/CSS/pointer-events](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)

# java - 多个类似的面板

> ID：12872080
> 
> 赞同：1
> 
> 时间：2012-10-13T10:07:43.450
> 
> 标签：java, swing, user-interface

在我的应用程序中，我将有几个 JPanel（10 个或更多），每个都稍作修改（附加按钮、标签等）。

所以我的想法是创建具有通用元素的 Panel 类（3个按钮，3个标签和3个文本字段-它们将位于同一位置的每个面板上，当然具有不同的数据）-在下面的示例中，只有1个按钮，1个标签和 1 个文本字段。

在我的主课中，我想更改标签的名称，在文本字段中设置值，就像我手动创建的这个面板一样：

```
 p1.btn1.setText("TEST"); 
```

我希望你能理解我的解释..谢谢。

正确执行此操作的最佳方法是什么？

![在此处输入图像描述](../Images/a4e288de954d668e731aabf99bb2990d.png)

到目前为止我所做的：

```
public class Main {

JFrame f;

Panel1 p1;
Panel2 p2;
Panel3 p3;

JButton btn2, btn3;
JPanel panel2, panel3;
JLabel lblSpeed2, lblSpeed3;
JTextField txtSpeed2, txtSpeed3;

public Main() {

    f = new JFrame();
    f.setSize(500, 500);
    f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    f.setLocationRelativeTo(null);
    f.setVisible(true);

    p1 = new Panel1();
    p2 = new Panel2(btn2, panel2, lblSpeed2, txtSpeed2, "Panel no. 2");
    p3 = new Panel3(btn3, panel3, lblSpeed3, txtSpeed3, "Panel no. 3");

    f.setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();

    c.anchor = GridBagConstraints.WEST;
    c.insets = new Insets(5, 5, 5, 5);
    c.gridx = 0;
    c.gridy = 0;
    c.weightx = 0.0;
    c.weighty = 0.0;
    c.gridx = 0;
    c.gridy = 0;
    f.add(p1, c);
    c.gridx = 0;
    c.gridy = 1;
    f.add(p2, c);
    c.gridx = 0;
    c.gridy = 2;
    f.add(p3, c);

    p1.btn1.setText("TEST");

}

public static void main(String[] args) {

    Main m = new Main();

}
  } 
```

我手动创建的面板：

```
public class Panel1 extends JPanel {

JButton btn1;
JPanel panel1;
JLabel lblSpeed1;
JTextField txtSpeed1;
Border blackline;

public Panel1() {

    super();

    blackline = BorderFactory.createLineBorder(Color.gray);

    panel1 = new JPanel(new GridBagLayout());
    panel1.setBorder(blackline);
    panel1.setBorder(BorderFactory
            .createTitledBorder("Manually created Panel"));

    btn1 = new JButton("Btn 1");
    lblSpeed1 = new JLabel("Speed");
    txtSpeed1 = new JTextField(5);

    GridBagConstraints c = new GridBagConstraints();

    c.anchor = GridBagConstraints.WEST;
    c.insets = new Insets(5, 5, 5, 5);
    c.gridx = 0;
    c.gridy = 0;
    c.weightx = 0.0;
    c.weighty = 0.0;
    c.gridx = 0;
    c.gridy = 0;
    c.gridwidth = 4;
    panel1.add(btn1, c);

    c.gridwidth = 1;
    c.gridx = 0;
    c.gridy = 1;
    panel1.add(lblSpeed1, c);

    c.gridx = 1;
    c.gridy = 1;
    panel1.add(txtSpeed1, c);

    add(panel1);

} 
```

}

其他面板的模板：

```
public class Panel extends JPanel {

Border blackline;

public Panel(JButton btnSend, JPanel MPanel, JLabel lblSpeed,
        JTextField txtSpeed, String Name) {

    super();

    blackline = BorderFactory.createLineBorder(Color.gray);

    MPanel = new JPanel(new GridBagLayout());
    MPanel.setBorder(blackline);
    MPanel.setBorder(BorderFactory.createTitledBorder(Name));

    btnSend = new JButton("Btn 1");
    lblSpeed = new JLabel("Speed");
    txtSpeed = new JTextField(5);

    GridBagConstraints c = new GridBagConstraints();

    c.anchor = GridBagConstraints.WEST;
    c.insets = new Insets(5, 5, 5, 5);
    c.gridx = 0;
    c.gridy = 0;
    c.weightx = 0.0;
    c.weighty = 0.0;
    c.gridx = 0;
    c.gridy = 0;
    c.gridwidth = 4;
    MPanel.add(btnSend, c);

    c.gridwidth = 1;
    c.gridx = 0;
    c.gridy = 1;
    MPanel.add(lblSpeed, c);

    c.gridx = 1;
    c.gridy = 1;
    MPanel.add(txtSpeed, c);

    add(MPanel);

}
} 
```

最后是我的小组课程：

```
public class Panel2 extends Panel {

public Panel2(JButton btnSend, JPanel MPanel, JLabel lblSpeed,
        JTextField txtSpeed, String Name) {
    super(btnSend, MPanel, lblSpeed, txtSpeed, Name);
    // TODO Auto-generated constructor stub
}
} 
```

和

```
public class Panel3 extends Panel {

public Panel3(JButton btnSend, JPanel MPanel, JLabel lblSpeed,
        JTextField txtSpeed, String Name) {
    super(btnSend, MPanel, lblSpeed, txtSpeed, Name);
    // TODO Auto-generated constructor stub
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:37:30.443

你所做的不是太好。您拥有处理对象的强大而强大的语言，让我们尝试专注于如何使用它们。

您只需使用相同的构造函数和相同的结构编写了 3 个“不同”类。

为什么？

您可以使用 3 个不同的面板，只需创建 3 个不同的实例：例如，我更改了您的以下代码：

```
p2 = new Panel2(btn2, panel2, lblSpeed2, txtSpeed2, "Panel no. 2");
p3 = new Panel2(btn3, panel3, lblSpeed3, txtSpeed3, "Panel no. 3"); 
```

结果是一样的，但是你只有一个类

我要去吃午饭了，那我给你解释清楚。不挂断

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:42:37.600

这有点模糊，这将归结为您希望如何与容器上的组件进行交互。

您可以使用抽象类来表示类的基本概念并实现每个单独的案例

您可以构建一个描述每个组件的模型，并允许组件根据模型的要求构建 UI。

在这里尝试实现的重要一点是保持适当的责任分离

# php - 真的有错误，还是我的服务器不支持 PDO？

> ID：12872081
> 
> 赞同：0
> 
> 时间：2012-10-13T10:07:44.130
> 
> 标签：php, mysql, pdo

正如我被告知的那样，我已经从 mySQL 更改为 PDO 调用，但我似乎无法通过访问实际数据库，如下所示

```
$db = new PDO("mysql:host=localhost;dbname=info;charset=UTF-8", 'admin', 'xxxxxx'); 
```

当它返回时

```
Parse error: syntax error, unexpected T_VARIABLE in db.php on line 8 
```

我已经通过论坛进行了检查，从我读到的内容来看，服务器确实支持 PDO ，而且`phpinfo()`出于安全原因被禁用，所以我无法转向，我实际上是在字符串中出错还是意味着我的服务器没有还支持 PDO 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:11:19.457

最后两个参数应该用单引号封装起来，或者本身就是变量。即（新 PDO（“stuffhere”，$user，$pass）

**编辑** 试试这个：[如何检查我的 Apache 安装中是否启用了 PDO 支持？](https://stackoverflow.com/questions/1087965/how-to-check-if-pdo-support-is-enabled-in-my-apache-installation)

```
if (!defined('PDO::ATTR_DRIVER_NAME')) {
    echo 'PDO unavailable';
}
elseif (defined('PDO::ATTR_DRIVER_NAME')) {
    echo 'PDO available';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:17:04.383

为了更好地了解行的哪一部分有错误，您可以将其拆分为多行。例如

```
 8\. $db = new PDO("mysql:host=localhost;dbname=info;charset=UTF-8", 'admin', 'xxxxxx'); 
```

可以改为：

```
 8\. $db = new PDO(
 9\. "mysql:host=localhost;dbname=info;charset=UTF-8",
10\. 'admin',
11\. 'xxxxxx'); 
```

现在报告错误的行可能是 8、9、10 或 11，你会更准确地知道哪里出了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T10:30:48.283

您可能想尝试从头开始重写有问题的行并完全删除旧行。我遇到了几个问题，我面临着`unexpected T_VARIABLE`- 没有明显原因的错误。我认为这是因为我设法在笔记本电脑的键盘上使用了某种组合键，这导致一些不可见的字符出现在我的代码中。

重写该行后，问题通常就消失了。

# jquery - jquery替换图像以进行响应式布局

> ID：12872083
> 
> 赞同：1
> 
> 时间：2012-10-13T10:08:07.203
> 
> 标签：jquery

在我的 HTML 页面中，每种尺寸都有 3 张图片，以匹配响应式布局。单击时如何在img中单独替换名称？

例子：

```
 <img class="img-1024" src="images/photo-holder.jpg" />
 <img class="img-768" src="images/768/photo-holder.jpg" />
 <img class="img-320" src="images/320/photo-holder.jpg" /> 
```

怎么改成这样？

```
 <img class="img-1024" src="images/new-holder.jpg" />
 <img class="img-768" src="images/768/new-holder.jpg" />
 <img class="img-320" src="images/320/new-holder.jpg" /> 
```

有什么最短的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:20:08.227

这样做： -

```
$(document).on("click", "img", function(){
    $(this).attr("src", function(i,v) { 
        return v.replace("photo","new");
    });
});​​ 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/847sb/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:10:25.183

一个*简短*的选择是使用`attr`方法。

```
$('img').attr('src', function(i, c) {
    return c.replace('photo', 'new')
}); 
```

或者：

```
$('img').click(function() {
    this.src = this.src.replace('photo', 'new')
}) 
```

[http://jsfiddle.net/hHSQe/](http://jsfiddle.net/hHSQe/)

# python - 从未收到从 python 脚本发送的电子邮件

> ID：12872084
> 
> 赞同：0
> 
> 时间：2012-10-13T10:08:11.483
> 
> 标签：python, email, smtp

我知道这在这里被介绍了很多次。我阅读了所有问题，但仍然无法正常工作。

我正在尝试从 python 脚本发送电子邮件：

```
msg= MIMEText('MESSAGE_TEXT')
msg['Subject']= 'SUBJECT'
msg['From']= 'from@example.com'
msg['To']= 'to@example.com'
s= smtplib.SMTP(host='localhost', port=1025)
s.sendmail('from@example.com', ['to@example.com'], msg.as_string())
s.quit() 
```

我正在通过执行以下操作运行本地 python SMTP 服务器：

```
python -m smtpd -n -c DebuggingServer localhost:1025 
```

当我运行脚本时，我在 SMTP 服务器中得到了这个：

```
---------- MESSAGE FOLLOWS ----------
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Subject: SUBJECT
From: from@example.com
To: to@example.com
X-Peer: 127.0.0.1

MESSAGE_TEXT

------------ END MESSAGE ------------ 
```

所以看起来服务器正在工作，但从未收到电子邮件（我也检查了垃圾邮件文件夹）我意识到我可以使用 gmail 的 SMTP 服务器，但我真的不想这样做。这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:46:23.307

当您不知道服务器如何响应时，这很棘手。

我建议您做的是连接到 SMTP 服务器并尝试使用 telnet[手动发送电子邮件。](http://www.wikihow.com/Send-Email-Using-Telnet)由于您使用的是 Python，我猜它是一个 *NIX 系统。但是 telnet（如示例所用）在那里也很有效（或 netcat）。

这样您就可以得到消息，而不必再猜测了。

# ruby-on-rails - rails-installer.sh 运行良好，但 ruby 、irb、rails 命令“未找到”（UB12.04）

> ID：12872086
> 
> 赞同：1
> 
> 时间：2012-10-13T10:08:27.377
> 
> 标签：ruby-on-rails, ruby, linux, ubuntu

我在 ubuntu 12.04 上运行 rails-installer.sh。脚本报告说 ruby​​ 和 gems 和 rails 都安装没有问题。

但是，当我尝试：

```
ruby -v
rails -v
etc. 
```

他们都报告“找不到命令”。

我是 linux 新手......我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T10:17:01.483

啊……没关系。有时，简单的事情确实让我难以捉摸。

在您启动新的 shell 之前，路径更改不会生效。

现在一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-15T09:33:32.600

只需在 C:\RailsInstaller\Ruby2.2.0\bin 文件夹中搜索每个包含“emacnic”路径的 *.bat 文件，然后用以下代码替换它们的全部内容：

```
@ECHO OFF
IF NOT "%~f0" == "~f0" GOTO :WinNT
ECHO.This version of Ruby has not been built with support for Windows 95/98/Me.
GOTO :EOF
:WinNT
@"%~dp0ruby.exe" "%~dpn0" %* 
```

有关更多详细信息，请参阅链接。 [https://github.com/railsinstaller/railsinstaller-windows/issues/70](https://github.com/railsinstaller/railsinstaller-windows/issues/70)

# iphone - NSFetchedResultsController 添加实体在 tableView 中插入空白行

> ID：12872090
> 
> 赞同：1
> 
> 时间：2012-10-13T10:08:57.100
> 
> 标签：iphone, objective-c, ios, uitableview, nsfetchedresultscontroller

在我的应用程序中，我有一个视图控制器，它是 NSFetchedResultsController 的代表以及 UITableView 的代表和数据源。

当按下导航控制器中的添加按钮时，下一个视图被正确推送，我可以正确添加一个新的 Person 实体。

我的问题是，当按下添加按钮时，在新视图被推送时，tableView 中会添加一个空白行，并且在正确创建新实体记录后仍然存在

这是添加按钮的目标操作：

```
- (void)addPerson:(id)sender
{
    AddPersonViewController *addPersonController = [[AddPersonViewController alloc] initWithNibName:@"AddPersonViewController" bundle:nil];

    [addPersonController setPerson:[NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext]];

    [self.navigationController pushViewController:addPersonController animated:YES];
} 
```

创建空白行的代码（来自 NSFetchedResultsControllerDelegate 的苹果文档）在这里：

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath]
                    atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

任何想法如何停止创建这个空白行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:31:21.413

打电话

```
[NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext] 
```

in`addPerson`创建一个新的*Person*对象并将其添加到托管对象上下文中。如果表视图的获取结果控制器配置为获取所有*Person*对象，这将导致该新对象的新（空白）表行。

我不知道你的`AddPersonViewController`工作情况如何。如果它修改了通过 给出的对象`setPerson`，那么应该更新表格行。如果它创建一个新的*Person*对象，那么第一个（空白）条目将保留。

您可能应该延迟创建新的*Person*对象，直到`AddPersonViewController`拥有所有数据来实际创建和填充该对象。您可以通过将`insertNewObjectForEntityForName:`调用移动到`AddPersonViewController`，或使用从`AddPersonViewController`.

# jquery - JQuery SVG - 获取R的圆值

> ID：12872093
> 
> 赞同：2
> 
> 时间：2012-10-13T10:09:09.620
> 
> 标签：jquery, svg, geometry

我正在使用[这个 SVG 插件](http://keith-wood.name/svg.html)。

这是我的代码：

```
$(function() {
    $('#svgbasics').svg({onLoad: drawInitial});
});

function drawInitial(svg) {

    var mycircle = svg.circle(75, 75, '50', {fill: '#f2477b', stroke: 'none', 'stroke-width': 0, class_:'drag'});

    $('.drag').click(function() {
       $(this).animate({svgR: '0'},300, function() { $('.drag').css("display", "none"); });
    }

    $("#restore").click(function() {
       $('.drag').css("display", "block");
       $(this).animate({svgR: '50'},300, function() { });
    }
} 
```

通常，有一个（半径）R = 50 的圆圈，当我单击圆圈时，它会动画到 R = 0，然后消失 css（“display”，“none”）。然后，当我单击#restore 元素时，它再次出现，其半径 = 50。我想要实现的是从`mycircle`变量中获取这个 '50' 值，例如：`svgR: $(this.R)`

如何从`mycircle`变量中获取此值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T10:30:05.597

我只能在 Firefox 上对此进行测试，但在该浏览器中`mycircle.r`返回一个[SVGAnimatedLength](https://developer.mozilla.org/en-US/docs/DOM/SVGAnimatedLength) 实例，其`animVal`属性返回一个[SVGLength](https://developer.mozilla.org/en-US/docs/DOM/SVGLength)实例，而该实例又暴露了一个`value`属性：

```
var radius = mycircle.r.animVal.value; 
```

You can test it in [this fiddle](http://jsfiddle.net/t2QfM/).

Note that using `animVal` rather than `baseVal` allows to get the current value of the circle's radius if it is being animated.

# php - 仅使用 JavaScript 和 PHP 跟踪连接的客户端

> ID：12872095
> 
> 赞同：0
> 
> 时间：2012-10-13T10:09:12.377
> 
> 标签：php, javascript, ajax, multiplayer

我正在制作一个基本的多人游戏，我不能使用 node.js 和 socket.io，因为它将在我没有太多控制权的远程服务器上运行。

目前，在客户端，我有一个 ajax 请求，它每 3 秒使用唯一 ID ping 一个服务器端 PHP 文件，如果在 6 秒内没有 ping 一个唯一 ID，则认为播放器已断开连接。

是否有任何其他技术可以更有效地跟踪仅使用 JavaScript 和 PHP 连接的客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:14:44.403

如果浏览器支持 Web Sockets，那是 socket.io 主要使用的。您应该能够判断套接字何时断开连接，因此您只需要找到一个用于 php 的 Web Socket 库（[这是](http://code.google.com/p/phpwebsocket/)我个人没有尝试过的，只是从 Google 中撤出的）。

# php - 使用ajax改变div的背景

> ID：12872104
> 
> 赞同：0
> 
> 时间：2012-10-13T10:09:53.047
> 
> 标签：php, ajax

我想改变一个div的背景，我写了下面的代码，但它没有改变背景

代码是：

```
$('#Chngclr').click(function(){
        var color = $('#color').val();
        $.ajax({
                type: "POST",
                url: "addcolor.php",
                data: 'value='+color,
                success: function(msg){
                //alert(msg);
                //$("#first").hide();
                $('#step2').html(msg);
                $('#outer').css('background-color:'+ msg);
                }
            });
        }); 
```

帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T10:17:40.703

我记得**css**函数的参数是JSON之类的

```
$('#outer').css({ "background-color", msg }); 
```

或者

如果您只更改一个属性，就像参数一样

```
$('#outer').css('background-color', msg) 
```

# lua - Corona SDK 和启动应用程序

> ID：12872106
> 
> 赞同：1
> 
> 时间：2012-10-13T10:10:07.200
> 
> 标签：lua, coronasdk

我正在学习 Corona SDK，但遇到一个问题：我的应用程序使用 Corona Simulator 启动了两次。那正确吗？我正在创建 main.lua

```
print("test") 
```

并进入控制台类似

```
Windows simulator build date: Aug 27 2012 @ 17:37:09

Copyright (C) 2009-2012  C o r o n a   L a b s   I n c .
        Version: 2.0.0
        Build: 2012.894
test

Copyright (C) 2009-2012  C o r o n a   L a b s   I n c .
        Version: 2.0.0
        Build: 2012.894
test 
```

为什么这样？这是问题，因为我的套接字客户端在启动时连接到服务器两次。怎么了？

更新：我正在使用带有 Lua 插件的 IntelliJ IDEA 来启动项目，并使用“C:\Program Files (x86)\Corona Labs\Corona SDK\Corona Simulator.exe”作为 Lua 解释器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:28:12.023

我曾经遇到过类似的问题，因为我将模拟器设置配置为在检测到文件更改时重新启动。我的一项功能在启动时保存到外部文件（即更改了它），因此它一遍又一遍地重新启动。

您的代码中是否有可以写入文件的内容？或者它现在只是一个打印功能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T17:40:07.357

这可能会解决它。确保您正在安装两个 Corona SDK。然后完全卸载，重新安装。

# asp.net - 图表底部的白色区域

> ID：12872108
> 
> 赞同：-1
> 
> 时间：2012-10-13T10:10:17.630
> 
> 标签：asp.net, mschart

我在我的网站上使用 mschart，但我对此有疑问。显示图表后，图表底部会显示一个白色区域。

那不是我图表的一部分。那是什么以及如何删除它？这是我的 MSChart 代码。

```
<asp:Chart ID="Chart1" runat="server" Palette="SeaGreen" RightToLeft="No">
                <Titles>
                    <asp:Title ShadowColor="32, 0, 0, 0" Font="Tahoma, 12pt," ShadowOffset="2" Text="Operation"
                        ForeColor="26, 59, 105">
                    </asp:Title>
                </Titles>
                <Series>
                    <asp:Series Name="Series1" XValueType="Auto" ChartType="Bar">
                    </asp:Series>
                </Series>
                <ChartAreas>
                    <asp:ChartArea Name="ChartArea1">
                        <AxisX2 TitleFont="Microsoft Sans Serif, 8pt">
                        </AxisX2>
                        <AxisY LineColor="64, 64, 64, 64" TitleFont="Tahoma, 12pt" Title="totalScore">
                            <MajorGrid LineColor="64, 64, 64, 64"></MajorGrid>
                            <LabelStyle Font="Tahoma, 12pt" />
                            <MajorGrid LineColor="64, 64, 64, 64" />
                        </AxisY>
                        <AxisX LineColor="64, 64, 64, 64" Interval="1" TitleFont="Tahoma, 12pt" IsLabelAutoFit="True"
                             Title="" LineWidth="1">
                            <MajorGrid LineColor="64, 64, 64, 64"></MajorGrid>
                            <LabelStyle Font="Tahoma, 12pt" />
                            <MajorGrid LineColor="64, 64, 64, 64" />
                        </AxisX>
                        <AxisY2 TitleFont="Microsoft Sans Serif, 12pt">
                        </AxisY2>
                    </asp:ChartArea>
                </ChartAreas>
            </asp:Chart> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:56:40.243

最后我自己找到了答案。在 cs 中，我定义了一个不必要的区域，因此，MSChart 绘制了一个空白区域图，位于我的真实区域图的底部。

# php - 个人资料内容后的 BuddyPress

> ID：12872112
> 
> 赞同：0
> 
> 时间：2012-10-13T10:10:38.317
> 
> 标签：php, wordpress, buddypress

在 buddypress 网站的个人资料页面上有这行代码

```
<?php do_action( 'bp_after_profile_content' ) ?> 
```

这会生成一个“标记此用户链接”。

我想知道的是生成该文件的位置与我一样，试图修改它以从配置文件之后删除该链接并将其放置在配置文件的其他位置。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:34:19.457

'bp_after_profile_content' 是一个[action](http://codex.wordpress.org/Plugin_API/Action_Reference)，这意味着（可能）有许多其他函数连接到它实际创建内容。搜索 BuddyPress 源（[grep](http://en.wikipedia.org/wiki/Grep)，我不能没有它，或者一些等效的）“add_action（'bp_after_profile_content'”，你应该能够找到这些函数。一旦你找到插入该链接的函数，你可能会删除它用[`remove_action()`](http://codex.wordpress.org/Function_Reference/remove_action)然后破解东西来移动那个链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:51:29.443

`<?php do_action( 'bp_after_profile_content' ) ?>`profile.php 文件中的代码。

*   删除您的个人资料页面中的链接：只需从您的 profile.php 主题文件中删除代码即可。
*   将个人资料链接放到其他地方：将此代码放在显示个人资料链接的位置。

谢谢

# java - 从命令行创建 jar 文件的工具

> ID：12872113
> 
> 赞同：1
> 
> 时间：2012-10-13T10:10:44.393
> 
> 标签：java, jar, command, cmd, prompt

我在编写批处理文件和/或java方面不是很熟练。我有一个文件夹，里面有几个`.class-Files`文件夹，我想把它们全部放入一个可执行文件`.jar-File`中。我知道有一个名为“jar - The Java Archive Tool”的工具，但这对我不起作用。我的文件夹结构如下所示：

> *   *   *   文件夹“测试”
> *   *   文件（a.class）
> *   *   文件夹“子目录”
> *   文件（b.class）

我想要一个`.jar-File`名为*`file.jar`*. 在这个 .jar 中现在应该是文件`a.class`和*`subdirectory`*包含该文件的文件夹*`b.class`*。

我无法`.jar-Tool`运行并且 7zip 命令行不支持`.jars`（我什至无法向其中添加文件）。我希望它从 运行`.bat-File`，所以我只需要打开批处理文件，它会创建`.jar`并将文件放入其中，然后再次关闭。

我希望你能帮助我，明白我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:37:55.810

If you have issues in executing jar command, then probably you would need to check if your path has been set correctly. You can verify if the path contains jdk location ( echo %path%) from command prompt. If not you need to update. Also you can verify using Javac -verbose command to see jdk is installed.

Once you have jdk path set, you can try below command to create jar

Jar -cf myapp.jar * --> includes all files including files from sub folders.

If you want to run from batch, you would need to mention path before jar command. Ideal place for path is to configure as environment property.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:23:30.983

创建一个文本文件（并将其命名为有用的东西，例如 manifest.txt）。在其中放入一行：（
`Main-Class: a`
按照惯例应该称为 A）并在最后包含一个硬返回。

然后使用以下命令创建 jar： `jar cvfm file.jar manifest.txt *.class` 或 `jar cvfm c:\somedir\file.jar c:\somedir\mainfest.txt *`

如果您只想创建名为“file.jar”的文件，您可以将该行放在一个名为 createJar.bat 的批处理文件中并运行它

hth

# mysql - 需要 mySQL 查询来检查另一个表中更新的生日

> ID：12872114
> 
> 赞同：0
> 
> 时间：2012-10-13T10:10:46.823
> 
> 标签：mysql, if-statement

我正在从第 3 方数据源下载数据，其中一个字段是联系人的生日，可能为空白，即 0000-00-00。我的用户可以选择输入联系人的生日，我认为这是在*单独*的表中，因为如果我更新了原始表，每当用户使用原始数据源刷新时，所有更新的生日都会被删除。

我现在想查找未来 30 天内的所有生日。这适用于第一个（原始数据源）表：

```
 $BirthdayResults = mysql_query("SELECT * FROM Connections WHERE UserID='$UserID' AND (DATE_FORMAT(ContactBirthday, '%m%d') BETWEEN '$sCurrentDate' AND '$sDateOneMonthAdded')"); 
```

所以我想知道 mySQL 是否可以处理这种类型的逻辑：

```
$BirthdayResults = mysql_query("SELECT * FROM Connections WHERE UserID='$UserID'... 
 AND IF ContactBirthday IN Connections = '0000-00-00' 
 CHECK OTHER_BIRTHDAY_TABLE AND USE THIS BIRTHDAY IF IT EXISTS 
 WHERE Connections.ContactID=OTHER_BIRTHDAY_TABLE.ContactID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:27:38.843

```
SELECT *
FROM   Connections LEFT JOIN OTHER_BIRTHDAY_TABLE USING(ContactID)
WHERE  UserID='$UserID'
   AND DATE_FORMAT(
         IF(
           Connections.ContactBirthday = '0000-00-00',
           OTHER_BIRTHDAY_TABLE.BIRTHDAY,
           Connections.ContactBirthday
         ),
         '%m%d'
       ) BETWEEN '$sCurrentDate' AND '$sDateOneMonthAdded' 
```

但是，`NULL`会比`0000-00-00`在这种情况下更合适；在这种情况下，可以使用 MySQL 的[`IFNULL()`](http://dev.mysql.com/doc/en/control-flow-functions.html#function_ifnull)or[`COALESCE()`](http://dev.mysql.com/doc/en/comparison-operators.html#function_coalesce)函数：

```
 DATE_FORMAT(
         IFNULL(Connections.ContactBirthday, OTHER_BIRTHDAY_TABLE.BIRTHDAY),
         '%m%d'
       ) 
```

# jquery - 如何使用 jquery 取消选择选定的项目？

> ID：12872116
> 
> 赞同：0
> 
> 时间：2012-10-13T10:11:27.110
> 
> 标签：jquery

> **可能重复：**
> [使用 .select() 取消选择在输入中选择的内容](https://stackoverflow.com/questions/5861312/unselect-what-was-selected-in-an-input-with-select)

我知道有特定标签的功能，如选项、复选框等。但那些不是我要找的。

我需要反过来：

[http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_event_select_trigger](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_event_select_trigger)

当我触发事件时，应取消选择选定的文本、图像、区域。

有没有类似 unselect 的功能？

问题可以在这里看到：

![在此处输入图像描述](../Images/aff396334838a751289c2a051d984a30.png)

到目前为止，我已经尝试了这些但没有奏效：

```
jQuery('.es-nav-next, .es-nav-prev').click(function(){
    //    jQuery("btn btn-large btn-primary").focus();
    //  jQuery(this).stop(true, true).delay(600).hide().delay(600).fadeIn().blur();      
        jQuery("#falseselect").select();
        document.selection.emtpy();
    window.getSelection().empty();
    jQuery(this).blur();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:20:43.707

我不知道有一个 jQuery 库可以处理这个问题，这意味着您必须自己担心浏览器的兼容性。

在大多数浏览器中，您应该能够运行

```
window.getSelection().empty(); 
```

在有问题的浏览器中，您可能必须这样做

```
document.selection.emtpy(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:13:57.320

采用

```
$.unbind( eventType, false ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T10:27:40.177

我认为：

```
$("input").trigger('blur'); 
```

或者：

```
$("input").blur(); 
```

是您正在寻找的那个。

# mysql - MySQL 选择公司未提供报价的任务

> ID：12872119
> 
> 赞同：1
> 
> 时间：2012-10-13T10:12:07.620
> 
> 标签：mysql, sql

我有 2 个表，任务和报价，一旦公司（企业）没有提供报价，我想选择所有任务。我已经为这两个表和一些示例数据包含了 SQL。我的查询如下所示，但它不起作用。

询问：

```
SELECT
  `task`.`id`,
  `task`.`carid`,
  `task`.`duedate`,
  `task`.`categoryid`,
  `task`.`offers`
FROM
  `task`
LEFT JOIN
  `offer`
ON
  `task`.`id` = `offer`.`taskid`
WHERE
  `task`.`offers` < 3
AND
  `offer`.`businessid` != 16
ORDER BY
  `task`.`id` DESC 
```

表：

```
CREATE TABLE `task` (
   `id` int(10) NOT NULL AUTO_INCREMENT,
   `carid` int(10) NOT NULL,
   `duedate` date NOT NULL,
   `categoryid` int(10) NOT NULL,
   `offers` int(1) NOT NULL DEFAULT '0',
   PRIMARY KEY (`id`),
   INDEX `carid` USING BTREE (carid),
   INDEX `categoryid` USING BTREE (categoryid)
) ENGINE=`InnoDB` AUTO_INCREMENT=3 DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ROW_FORMAT=COMPACT CHECKSUM=0 DELAY_KEY_WRITE=0;

CREATE TABLE `offer` (
   `id` int(10) NOT NULL AUTO_INCREMENT,
   `businessid` int(10) NOT NULL,
   `taskid` int(10) NOT NULL,
   `price` decimal(10,2) NOT NULL,
   `status` enum('received','rejected','accepted','completed') NOT NULL DEFAULT 'received',
   PRIMARY KEY (`id`),
   INDEX `businessid` USING BTREE (businessid),
   INDEX `taskid` USING BTREE (taskid)
) ENGINE=`InnoDB` AUTO_INCREMENT=2 DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ROW_FORMAT=COMPACT CHECKSUM=0 DELAY_KEY_WRITE=0; 
```

样本数据：

```
insert into `task` (1, 1, "2012-09-30", 3, 0);
insert into `task` (2, 1, "2012-09-27", 5, 0);
insert into `offer`(1, 16, 1, 3000, "received");
insert into `offer`(2, 13, 2, 212, "received");
insert into `offer`(3, 16, 2, 23, "received"); 
```

我想我现在*可能*已经解决了：

```
SELECT
  `task`.`id`,
  `task`.`carid`,
  `task`.`categoryid`,
  `task`.`duedate`,
  `task`.`offers`
FROM
  task
LEFT JOIN
  `offer`
ON
  `task`.`id` = `offer`.`taskid`
WHERE
  task.id NOT IN (
    SELECT
      `offer`.`taskid`
    FROM
      `offer`
    WHERE
      `offer`.`businessid` = 16
  )
OR
  businessid IS NULL
AND
  offers < 3
GROUP BY
  task.id
ORDER BY
  duedate ASC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T10:15:27.937

你唯一错过的是这个

```
SELECT..
FROM..
WHERE..
         AND `offer`.`taskid` IS NULL
ORDER BY  `task`.`id` DESC 
```

# c# - 如何使用 mongo db c# 驱动程序执行“和”查询？

> ID：12872125
> 
> 赞同：0
> 
> 时间：2012-10-13T10:13:51.030
> 
> 标签：c#, mongodb

我正在尝试运行一个包含两个独立查询的查询，但它似乎没有产生任何结果。这是查询..

```
 var query = Query.And(Query<Account>.EQ(a => a.UserName, userName), 
                  Query<Account>.EQ(a=> a.Password,password));

 var account = mongoAccount.FindOne(query); 
```

该帐户为空。我做错了什么？

编辑：

这个问题也可以改写为 mongoDb 和的 c# 等价物是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:36:41.070

```
var query = Query.And(Query<Account>.EQ(a => a.UserName, userName), 
                Query<Account>.EQ(a => a.Password, password));

var account = mongoAccount.FindOne(query); 
```

**添加**

为了安全起见，请检查 mongoAccount 是否包含某些帐户的用户名和密码的组合。否则你做对了，它应该可以工作。

# javascript - HTML5 音量控制 IOS 6

> ID：12872126
> 
> 赞同：0
> 
> 时间：2012-10-13T10:13:55.450
> 
> 标签：javascript, ios, html, ios6, html5-audio

我已经开发 HTML 5 应用程序很长时间了。我知道IOS不允许webkit控制设备的音量。因此，出于这个原因，为 IPAD 设置音量滑块是没有用的。但在某处我读到 IOS 6 允许 webkit 控制音量。这是真的吗？如果是真的，那我该怎么做？

# objective-c - 保存收藏夹以防止更新删除它们

> ID：12872130
> 
> 赞同：0
> 
> 时间：2012-10-13T10:14:18.063
> 
> 标签：objective-c, xcode

正如标题所说，我正在寻找一种将收藏夹存储在某处的方法，以防止在发布更新时删除它们。

我的应用程序主要由一个由 plist 处理的 tableView 组成，其中包含项目的部分、行、id 以及用于检查特定元素是否为收藏夹的 bool。收藏夹元素存储在另一个 tableView 中（但它始终是同一个 plist）。

我想要做的是保存用户存储在某个地方的所有收藏夹（可能在另一个 plist 中？），这样当应用程序收到更新时，用户不会丢失他们存储的项目（我猜这是因为更新覆盖了已经存在的具有默认值的 plist - 所有项目收藏夹 = NO），他们可以将它们放在其中，而无需再次重新收藏所有项目。

有没有办法做到这一点？有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:33:20.167

查看 NSUserDefaults。这是保持用户偏好的标准机制，本质上就是收藏夹。只要用户不删除应用程序，NSUserDefaults 就会在应用程序升级之间持续存在。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

# php - 更新表单中的php表单更新

> ID：12872134
> 
> 赞同：3
> 
> 时间：2012-10-13T10:15:05.573
> 
> 标签：php, html, forms, phpmyadmin

我正在运行 while 循环并从数据库中获取 3 条记录。然后在同一页面上更新它。每条记录都有提交按钮。但是在我提交表单时编辑后，它只捕获最后一条记录的值，并用最后一条记录值更新其他行。请如果有人帮助我，我将非常感激。请记住，它捕获了确切的 (id)，但其他参数仅是最后一行。

```
<form method="post" action="">
    <table width="700" border="1">
       <tr><th><?php echo $_SESSION['teamtwo']; ?></th></tr>
       <tr>
         <th>Player Name</th>
         <th>Runs</th>
         <th>Edit</th>
         <th>Save</th>
       </tr>
       <?php
        $team = new DBConnection();
        $condition = "WHERE teamname = '".$_SESSION['teamtwo']."' and datecreated = CURDATE()";
        $sel_player = $team->SelectRecord(array("*"),"`match`","$condition");
        //$sel_player = mysql_query("SELECT * FROM `match` WHERE teamname = '$team1' and datecreated = CURDATE()") or die(mysql_error());
        while($get_player = mysql_fetch_array($sel_player))
        {
        $totalruns = $get_player['runs_bat'];
        $totalballs = $get_player['ball_bat'];
        @$strike = $totalruns / $totalballs * 100; 
        ?>
        <tr>
          <td><input type="text" name="player_name" value="<?php echo $get_player['player_name']; ?>" disabled="disabled" /></td>
           <td><input type="text" name="runs" value="<?php echo $get_player['runs_bat']; ?>" size="1" /></td>

           <td><button><a href="?player=<?php echo $get_player['id']; ?>">Edit</a></button></td>
           <td><input type="submit" value="Save" name="team" /></td>
             </tr>
         <?php 
        } ?>
     </table>
   </form>
<?php } ?>
 </div>
 </div>
</body>
</html>
<?php

    if(isset($_POST['team'])){
        $runs = $_POST['runs'];
        $balls = $_POST['ball'];

        $object = new DBConnection();
        $arr_Field=array("runs_bat","ball_bat","player_status","how_out","opposite_bowl","opposite_player","sr","overs","bowl_ball","runs_ball","extra","madien");
        $arr_Values=array("$runs","$balls","$status","$how_out","$opposite_bowler","$opposite_player","$sr","$over","$bowls","$score","$extra","$madien");
        $condition = "WHERE id = '".$_REQUEST['player']."'";
        //echo $_REQUEST['player'];

        //echo $runs.$balls;

        $object->UpdateRecord("`match`",$arr_Field,$arr_Values,"$condition") or die(mysql_error());
        //header("Location:extra.php?update");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:36:53.393

问题是您有一个表单，当您提交表单时，它将提交最后一行的值，因为您在 1 个表单中的所有 3 行都具有相同的名称。

**解决方案：-**

在 while 循环内创建表单元素并在 while 循环内将其关闭。像这样，您将有 3 个表格，每个表格 3 行。

**代码示例：-**

```
 while($get_player = mysql_fetch_array($sel_player))
    {
    $totalruns = $get_player['runs_bat'];
    $totalballs = $get_player['ball_bat'];
    @$strike = $totalruns / $totalballs * 100; 
    ?>
    <form>
    <tr>
      <td><input type="text" name="player_name" value="<?php echo $get_player['player_name']; ?>" disabled="disabled" /></td>
       <td><input type="text" name="runs" value="<?php echo $get_player['runs_bat']; ?>" size="1" /></td>

       <td><button><a href="?player=<?php echo $get_player['id']; ?>">Edit</a></button></td>
       <td><input type="submit" value="Save" name="team" /></td>
    </tr>
    </form>
     <?php 
    } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:36:06.327

**1.** 你需要在while中创建输入数组，因为name属性在循环中被覆盖

```
<td><input type="text" name="player_name[<?php echo $get_player['id']?>]" value="<?php echo $get_player['player_name']; ?>" disabled="disabled" /></td>
<td><input type="text" name="runs[<?php echo $get_player['id']?>]" value="<?php echo $get_player['runs_bat']; ?>" size="1" /></td> 
```

**2.** 您拥有所有文本框意味着如果按下一行的提交按钮，那么您还将获得所有文本框作为 php 端，因此在表单中设置隐藏变量以获取单击的按钮

```
//write javascript in your page
<script>
function setPlayerId(id) {
  document.getElementById('playerid').value=id;
}
</script>

//take hidden field into form
<input type='hidden' name='playerid' value='0'>

//write down onlick button event

<input type="submit" value="Save" name="team" onClick="setPlayerId('<?php <?php echo $get_player['id']?>?>')"/> 
```

**3.** 现在在php中你会得到如下

```
echo $_POST['player_name'][$_POST['playerid']];

// same way you can do your insert or update. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T10:38:24.413

此代码必须有效

```
<form method="post" action="">
    <table width="700" border="1">
       <tr><th><?php echo $_SESSION['teamtwo']; ?></th></tr>
       <tr>
         <th>Player Name</th>
         <th>Runs</th>
         <th>Edit</th>
         <th>Save</th>
       </tr>
       <?php
        $team = new DBConnection();
        $condition = "WHERE teamname = '".$_SESSION['teamtwo']."' and datecreated = CURDATE()";
        $sel_player = $team->SelectRecord(array("*"),"`match`","$condition");
        //$sel_player = mysql_query("SELECT * FROM `match` WHERE teamname = '$team1' and datecreated = CURDATE()") or die(mysql_error());
        while($get_player = mysql_fetch_array($sel_player))
        {
        $totalruns = $get_player['runs_bat'];
        $totalballs = $get_player['ball_bat'];
        @$strike = $totalruns / $totalballs * 100; 
        ?>
        <tr>
          <td><input type="text" name="player_name" value="<?php echo $get_player['player_name']; ?>" disabled="disabled" /></td>
           <td><input type="text" name="runs<?=$get_player['id']?>" value="<?php echo $get_player['runs_bat']; ?>" size="1" /></td>
// you didnt write this i added
<input type="text" name="ball<?=$get_player['id']?>" value="<?php echo $get_player['ball_bat']; ?>" size="1" />

           <td><button><a href="?player=<?php echo $get_player['id']; ?>">Edit</a></button></td>
           <td><input type="submit" value="Save" name="team" /></td>
             </tr>
         <?php 
        } ?>
     </table>
   </form>
<?php } ?>
 </div>
 </div>
</body>
</html>
<?php

    if(isset($_POST['team'])){
    $runsname = 'runs'.$_GET['player'];
    $ballsname = 'ball'.$_GET['player'];
        $runs = $_POST[$runsname];
        $balls = $_POST[$ballsname];

        $object = new DBConnection();
        $arr_Field=array("runs_bat","ball_bat","player_status","how_out","opposite_bowl","opposite_player","sr","overs","bowl_ball","runs_ball","extra","madien");
        $arr_Values=array("$runs","$balls","$status","$how_out","$opposite_bowler","$opposite_player","$sr","$over","$bowls","$score","$extra","$madien");
        $condition = "WHERE id = '".$_REQUEST['player']."'";
        //echo $_REQUEST['player'];

        //echo $runs.$balls;

        $object->UpdateRecord("`match`",$arr_Field,$arr_Values,"$condition") or die(mysql_error());
        //header("Location:extra.php?update");

    } 
```

# objective-c - 从文件中读取 NSMutableArray

> ID：12872138
> 
> 赞同：0
> 
> 时间：2012-10-13T10:15:37.350
> 
> 标签：objective-c, cocoa, nsmutablearray

我正在尝试从文件中读取 2 个 NSMutableArrays。我正在保存和加载：

节省：

```
NSMutableDictionary *saveDict = [NSMutableDictionary dictionary];
[saveDict setValue:name forKey:@"name"];
[saveDict setValue:last_episodue forKey:@"whereat"];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingString:@"/ShopFile.sav"];
[saveDict writeToFile:filePath atomically:YES]; 
```

加载：

```
 name = [[NSMutableArray alloc]init];
    last_episodue = [[NSMutableArray alloc]init];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingString:@"/ShopFile.sav"];
    NSDictionary *loadDict = [NSDictionary dictionaryWithContentsOfFile:filePath];
    name =            [loadDict valueForKey:@"name"];
    last_episodue=     [loadDict valueForKey:@"whereat"]; 
```

变量 name 和 last_episodue 已在头文件中声明。

程序编译并运行，但是在运行时尝试加载文件时，代码的 LOAD 部分执行，当它完成时，程序停止工作。这是调试信息（第一部分）：

```
2012-10-13 12:14:10.801 series[5223:303] -[NSISRestrictedToZeroMarkerVariable copyWithZone:]: unrecognized selector sent to instance 0x1001900c0
2012-10-13 12:14:10.803 series[5223:303] -[NSISRestrictedToZeroMarkerVariable copyWithZone:]: unrecognized selector sent to instance 0x1001900c0
2012-10-13 12:14:10.906 series[5223:303] ( 
```

知道问题可能是什么吗？谢谢！

编辑：这是进行保存的文件的内容：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>name</key>
    <array>
        <string>a</string>
    </array>
    <key>whereat</key>
    <array>
        <string>a</string>
    </array>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-21T23:26:59.047

This is kind of a shot in the dark, since I can't tell without more context what your memory management looks like, but I just had this issue stemming from a variable whose value was not retained properly (we were assigning it using `objc_setAssociatedObject` but passing `OBJC_ASSOCIATION_ASSIGN` as the objc_AssociationPolicy). The pointer I held consistently ended up pointing over to an instance of `NSISRestrictedToZeroMarkerVariable`.

Since `NSISRestrictedToZeroMarkerVariable` is not a publicly-exposed class, what you're seeing is most likely the result of a memory overwrite. Set an exception breakpoint in Xcode and check out which line is throwing this error, and then track your memory management for that variable.

# c++ - C++：如何只用静态函数定义一个类

> ID：12872140
> 
> 赞同：-2
> 
> 时间：2012-10-13T10:16:02.023
> 
> 标签：c++, opencv, static-methods

我想创建一个 C++ 类，它只包含我无论如何都可以使用的静态函数。我已经创建了一个`.h`带有声明的`.cpp`文件和一个带有定义的文件。但是，当我在我的代码中使用它时，我会收到一些奇怪的错误消息，我不知道如何解决。

这是我的`Utils.h`文件的内容：

```
#include <iostream>
#include <fstream>
#include <sstream>

#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace std;
using namespace cv;

#include <vector>
#include <opencv/cv.h>
#include <opencv/cxcore.h>

class Utils
{
public:
    static void drawPoint(Mat &img, int R, int G, int B, int x, int y);
}; 
```

这是我的`Utils.cpp`文件的内容：

```
#include "Utils.h"

void Utils::drawPoint(Mat &img, int R, int G, int B, int x, int y)
{
img.at<Vec3b>(x, y)[0] = R;
img.at<Vec3b>(x, y)[1] = G;
img.at<Vec3b>(x, y)[2] = B;
} 
```

这就是我想在我的`main`函数中使用它的方式：

```
#include <iostream>
#include <fstream>
#include <sstream>

#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace std;
using namespace cv;

#include <vector>
#include <opencv/cv.h>
#include <opencv/cxcore.h>

#include "CThinPlateSpline.h"
#include "Utils.h"

int main()
{
Mat img = imread("D:\\image.png");
if (img.empty()) 
{
    cout << "Cannot load image!" << endl;
    system("PAUSE");
    return -1;
}
Utils.drawPoint(img, 0, 255, 0, 20, 20);
imshow("Original Image", img);
waitKey(0);
return 0;
} 
```

这是我收到的错误。

有人可以指出我做错了什么吗？我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T10:19:56.707

```
Utils::drawPoint(img, 0, 255, 0, 20, 20);
     ^^ (not period) 
```

是你如何调用一个静态函数。该时间段用于成员访问（即当您拥有实例时）。

为了完整起见：

```
Utils utils; << create an instance
utils.drawPoint(img, 0, 255, 0, 20, 20);
     ^ OK here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:17:47.253

认为您在课程减速后缺少分号。尝试，

```
class Utils
{
public:
    static void drawPoint(Mat &img, int R, int G, int B, int x, int y);
}; // <- Notice the added semicolon 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T10:42:43.197

这不是您问题的直接答案，但使用命名空间范围的函数可能更适合您的需求。我的意思是：

```
namespace Utils
{
    void drawPoint(Mat &img, int R, int G, int B, int x, int y);
} 
```

`::`语义保持不变，但现在：

*   你不能实例化一个`Utils`对象，这对于“静态类”来说是没有意义的
*   您可以`using Utils`用来避免`Utils::`选择（和有限）范围内的前缀

有关静态类成员函数与命名空间范围函数的优缺点的更深入讨论，请参阅：[命名空间 + 函数与类上的静态方法](https://stackoverflow.com/questions/1434937/namespace-functions-versus-static-methods-on-a-class)

# ios - 从其他控制器访问 UIScrollView

> ID：12872144
> 
> 赞同：0
> 
> 时间：2012-10-13T10:16:51.160
> 
> 标签：ios, xcode

我有一个 UIScrollView，它在 UIStoryboard 中以模式形式添加。我想从控制器 B 访问 UIViewController ViewController 中的 UIScrollView，我尝试了以下代码：

```
ViewController *linkToA;
linkToA = [[ViewController alloc] init];
linkToA = (ViewController*)self.presentingViewController;
linkToA.groupPass.text = @"cool party ajdaj";
[linkToA.scroll1.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

该代码不会给出错误，但不会做任何事情。

我以这种方式导入控制器：

```
#import "ViewController.h" 
```

在 ViewController.h 我有：

```
@property (strong, nonatomic) IBOutlet UIScrollView *scroll1; 
```

问题是什么？？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-13T11:37:09.520

linkToA IBOutlets 将无法访问，而 linkToA 视图控制器不会被推送到导航控制器或以模态方式呈现

# ipad - Ipad 项目的相对路径

> ID：12872149
> 
> 赞同：0
> 
> 时间：2012-10-13T10:17:16.577
> 
> 标签：ipad, relative-path

我知道这是一个愚蠢的问题，但我无法找出我的相对路径是什么...... :(

我有一个 iPad 项目，在这个项目下有一个图像文件夹

![在此处输入图像描述](../Images/8b32c12f72d6eda6f3af3d225a742254.png)

我想设置一个 UIImage，但我无法弄清楚我的相对路径是什么——

我试过这个：

```
UIImage *image = [[UIImage alloc]initWithContentsOfFile:@"/Images/send.png"]; 
```

但它不工作....

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:04:55.507

如果您的图像存在于您的包中，您不必查找相对路径。但是`[[NSBundle mainBundle] bundlePath]`会给出你的包的相对路径。

```
UIImage *image = [UIImage imageNamed:@"send.png"]; 
```

这是加载图像的基本方法。

```
UIImage *image = [[UIImage alloc]initWithContentsOfFile:@"send.png"]; 
```

这将更快地加载图像。因为它在没有缓存的情况下加载图像。

```
UIImage *image = [UIImage imageNamed:@"send"]; 
```

如果您想将图像用于普通屏幕和视网膜屏幕，请使用此选项。在你的包中，你应该有两个图像“send.png”和“send@2x.png”，其中“send@2x.png”是“send.png”大小的两倍。

# javascript - 如何让 var_dump($_POST) 满足这个结构？

> ID：12872155
> 
> 赞同：1
> 
> 时间：2012-10-13T10:18:00.983
> 
> 标签：javascript, jquery, forms, jsfiddle

我在这里有一个 jsfiddle：http: [//jsfiddle.net/ybZvv/61/](http://jsfiddle.net/ybZvv/61/)

请按照小提琴中的步骤操作：

1.  当您打开小提琴时，单击“添加问题”按钮两次，这将追加 2 行。
2.  在第一行选择答案按钮“A”和“C”，在第二行选择答案按钮“A”、“B”和“E”。选择的每个答案按钮的复选框值显示在下方。

问题是我执行 var_dump($_POST) 时的结构。

var_dump($_POST) 的当前结构如下所示：

```
array(3) { 
  ["numQuestion"]=> array(2) { 
    [0]=> string(1) "1" 
    [1]=> string(1) "2" 
  }  
  ["submitDetails"]=> string(14) "Submit Details"
  ["value"]=> array(4) { 
    ["answerARow"]=> string(2) "on" 
    ["answerCRow"]=> string(2) "on" 
    ["answerBRow"]=> string(2) "on" ["answerERow"]=> string(2) "on"
  } 
} 
```

我希望它如下所示：

```
array(3) {
  ["numQuestion"]=> array(2) { 
    [0]=> string(1) "1" 
    [1]=> string(1) "2"
  }
  ["submitDetails"]=> string(14) "Submit Details"
  ["value"]=> array(5) {
    [1]=> array(2) {
      [0]=> string(1) "A"
      [1]=> string(1) "C"
    }
    [2]=> array(3) {
      [0]=> string(1) "A" 
      [1]=> string(1) "B" 
      [2]=> string(1) "E"
    }
  }
} 
```

有没有人对如何操纵代码以达到这种结构有任何想法？

实际上结构应该是这样的，有 2 个问题，问题 1 的答案是 A 和 C，问题 2 的答案是 A、B 和 E

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:42:49.157

不要在您的复选框中生成，而是`value[answerCRow]`尝试将它们创建为：

```
<input type="checkbox" id="hiddenanswerHRow0value" name="value[" + iQuestionIndex + "][]"  value="A" checked=""> 
```

在哪里，您的价值将不断迭代。

jQuery 的`updateAnswer`函数将有这一行：

```
var input = '<input type="checkbox" id="' + hid + '" name="value[' + iQuestionIndex + '][]" value="' + value + '" checked /><label for="' + hid + '">' + value + '</label>';
_oCurrAnswerContainer.append(input); 
```

# iphone - 简单的 NSDateFormatter / 字符串解析

> ID：12872162
> 
> 赞同：0
> 
> 时间：2012-10-13T10:18:56.920
> 
> 标签：iphone, xcode, date, nsdate, nsdateformatter

```
2012-10-12 19:29:43 
```

等效`NSDateFormatter`：

```
[_dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

抛出异常......为什么？

谢谢！

**参考：** [http ://waracle.net/mobile/iphone-nsdateformatter-date-formatting-table/](http://waracle.net/mobile/iphone-nsdateformatter-date-formatting-table/)

**更新：**

问题似乎是字符串。如果我对字符串进行硬编码：

```
NSString * string = @"2012-10-12 19:29:43"; 
```

它工作正常。

我从一个键值对数组中读取它，所以我这样做：

```
NSString * string = [NSString stringWithFormat:@"%@", (NSString *)[[NSArray readFromPlistFile:@"latestchangesdates"] valueForKey:@"newsLastEdited"]]; 
```

**控制台输出：**

*#1：*

```
2012-10-12 10:16:49 
```

*#2：*

```
( "2012-10-12 10:16:49" ) 
```

*我认为问题与从数组中解析字符串有关。*

**更新 2：**

```
[[[NSArray readFromPlistFile:@"latestchangesdates"] objectAtIndex:0] valueForKey:@"newsLastEdited"]] 
```

……终于做到了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:03:09.323

看起来`newsLastEdited`您的 Plist 文件中的键实际上是返回一个数组而不是字符串。

该行：

```
NSString *string = [NSString stringWithFormat:@"%@", (NSString *)[[NSArray readFromPlistFile:@"latestchangesdates"] valueForKey:@"newsLastEdited"]]; 
```

只是转换为`NSString`从`[[NSArray readFromPlistFile:@"latestchangesdates"] valueForKey:@"newsLastEdited"]`. 这不会自动使返回值成为字符串。

如果您改用以下内容会发生什么：

```
NSString *string = [[[NSArray readFromPlistFile:@"latestchangesdates"] valueForKey:@"newsLastEdited"] objectAtIndex:0]; 
```

如果我是正确的，这将采用从 Plist`newsLastEdited`键返回的数组的第一个元素。如果这可行，那么您可能需要一些时间来了解存储在 Plist 文件中的数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:03:37.847

```
[[[NSArray readFromPlistFile:@"latestchangesdates"] objectAtIndex:0] valueForKey:@"newsLastEdited"]] 
```

……终于做到了。

# c# - 如何从winform文本框获取值并添加到数据库字段

> ID：12872163
> 
> 赞同：0
> 
> 时间：2012-10-13T10:19:10.123
> 
> 标签：c#

我有两个表（kala，reception）和两个winforms（kala，reception），我想当我填写接收表（specialy txtqty）并插入数据时，它（txtqty）添加到kala表字段（txtkqty）。我如何在接收表单中的按钮后面编写此代码。接收表格：

```
private void btninsert_Click(object sender, EventArgs e)
        {
            string check = br.createreceipt(int.Parse(txtreceptcode.Text),
                                            int.Parse(comboBox_kala.SelectedValue.ToString()),
                                            int.Parse(comboBox_suplier.SelectedValue.ToString()
                                                ), int.Parse(txtqty.Text), DateTime.Parse(dateTimePicker_recept.Text));
            if (check == "true")
            {
                dtrecept = br.getdata();
                dataGridViewrecept.DataSource = dtrecept;
                txtreceptcode.Text = null;
                txtqty.Text = null;
            }

        } 
```

卡拉形式

```
 private void btnkalainsert_Click(object sender, EventArgs e)
        {
            string check = bk.createkala(int.Parse(txtkalacode.Text), txtkalaname.Text, int.Parse(txtkqty.Text),
                                         int.Parse(txtkalapoint.Text));
            if (check=="true")
            {
                dt = bk.Getdata();
                dataGridViewkala.DataSource = dt;
            }
            else
            {
                MessageBox.Show(check);
            }
        } 
```

接收 DAL：

```
namespace DAL
{
  public  class TblreceiptionDal
    {
        SqlConnection cn=new SqlConnection("Data Source=(local);Initial Catalog=store;Integrated Security=true");
        public DataTable getall()
        {
            DataSet ds=new DataSet();
            SqlDataAdapter sa = new SqlDataAdapter("Spinforeceip", cn);
            sa.SelectCommand.CommandType = CommandType.StoredProcedure;
            sa.Fill(ds, "Spinforeceip");
            return ds.Tables["Spinforeceip"];
        }
        public string createreceipt(int recept_id,int kala_id,int suplier_id,int recept_qty ,DateTime recept_date)
        {
            try
            {
                SqlCommand cmd = new SqlCommand("Sptblreception_insert", cn);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@recept_id", recept_id);
                cmd.Parameters.AddWithValue("@kala_id", kala_id);
                cmd.Parameters.AddWithValue("@suplier_id", suplier_id);
                cmd.Parameters.AddWithValue("@recept_qty", recept_qty);
                cmd.Parameters.AddWithValue("@recept_date", recept_date);
                cn.Open();
                cmd.ExecuteNonQuery();
                cn.Close();
                return "true";
            }
            catch (Exception ex)
            {
                return ex.Message;
                throw;
            }

        }
        public String deletereceipt(int recept_id)
        {
            try
            {
                SqlCommand cmd = new SqlCommand("Sptblreception_delete",cn);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@recept_id", recept_id);
                cn.Open();
                cmd.ExecuteNonQuery();
                cn.Close();
                return "true";
            }
            catch (Exception ex)
            {
                return ex.Message;
                throw;
            }
        }
        public string updatereceipt(int recept_id,int kala_id,int suplier_id,int recept_qty ,DateTime recept_date)
        {
            try
            {
                SqlCommand cmd = new SqlCommand("Sptblreception_update", cn);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.AddWithValue("@recept_id", recept_id);
                cmd.Parameters.AddWithValue("@kala_id", kala_id);
                cmd.Parameters.AddWithValue("@suplier_id", suplier_id);
                cmd.Parameters.AddWithValue("@recept_qty", recept_qty);
                cmd.Parameters.AddWithValue("@recept_date", recept_date);
                cn.Open();
                cmd.ExecuteNonQuery();
                cn.Close();
                return "true";
            }
            catch (Exception ex)
            {
                return ex.Message;
                throw;
            }
        }
      public string receptgetbyid(int recept_id)
      {
          try
          {
              SqlCommand cmd = new SqlCommand("Sptblreception_getbyid",cn);
              cmd.CommandType = CommandType.StoredProcedure;
              cmd.Parameters.AddWithValue("@recept_id", recept_id);
              cn.Open();
              cmd.ExecuteNonQuery();
              cn.Close();
              return "true";

          }
          catch (Exception ex)
          {
              return ex.Message;
              throw;
          }
      }
    }
} 
```

接收 BLL：

```
namespace BLL
{
   public class Bllreceipt
    {
         TblreceiptionDal tr = new TblreceiptionDal();
       public DataTable getdata()
       {
           return tr.getall();
       }
       public string createreceipt(int recept_id,int kala_id,int suplier_id,int recept_qty ,DateTime recept_date)
       {
           return tr.createreceipt(recept_id, kala_id, suplier_id, recept_qty, recept_date);
       }
       public String deletereceipt(int recept_id)
       {
           return tr.deletereceipt(recept_id);
       }
       public string updatereceipt(int recept_id,int kala_id,int suplier_id,int recept_qty ,DateTime recept_date)
       {
           return tr.updatereceipt(recept_id, kala_id, suplier_id, recept_qty, recept_date);
       }
        public string receptgetbyid(int recept_id)
        {
            return tr.receptgetbyid(recept_id);
        }
    }
} 
```

卡拉达尔：

```
namespace DAL
{
    public class TblkalaDal
    {
        SqlConnection cn=new SqlConnection("Data Source=(local); Initial Catalog=store;Integrated Security=True");
        public DataTable Getdata()
        {
            try
            {
                DataSet ds=new DataSet();
                SqlDataAdapter da = new SqlDataAdapter("Sptblkala_getdata",cn);
                da.SelectCommand.CommandType = CommandType.StoredProcedure;
                da.Fill(ds, "Sptblkala_getdata");
                return ds.Tables["Sptblkala_getdata"];
            }
            catch (Exception)
            {
                return null;
                throw;
            }
        }
public string createkala(int kala_id,string kala_name,int kala_qty,int kala_orderpoint)
{
    try
    {
        SqlCommand cmd = new SqlCommand("Sptblkala_insert", cn);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@kala_id", kala_id);
        cmd.Parameters.AddWithValue("@kala_name", kala_name);
        cmd.Parameters.AddWithValue("@kala_qty", kala_qty);
        cmd.Parameters.AddWithValue("@kala_orderpoint", kala_orderpoint);
        cn.Open();
        cmd.ExecuteNonQuery();
        cn.Close();
        return "true";
    }
    catch (Exception ex)
    {
        return ex.Message;
        throw;
    }

}
        public string Deletekala(int kala_id)
        {
            try
            {
                SqlCommand dm = new SqlCommand("Sptblkala_delete", cn);
                dm.CommandType = CommandType.StoredProcedure;
                dm.Parameters.AddWithValue("@kala_id", kala_id);
                cn.Open();
                dm.ExecuteNonQuery();
                cn.Close();
                return "true";
            }
            catch (Exception ex)
            {
             return   ex.Message;
                throw;
            }

        }

        public string updatekala(int kala_id,string kala_name,int kala_qty,int kala_orderpoint)
        {
            try
            {
                SqlCommand uk = new SqlCommand("Sptblkala_update", cn);
                uk.CommandType = CommandType.StoredProcedure;
                uk.Parameters.AddWithValue("@kala_id", kala_id);
                uk.Parameters.AddWithValue("@kala_name", kala_name);
                uk.Parameters.AddWithValue("@kala_qty", kala_qty);
                uk.Parameters.AddWithValue("@kala_orderpoint", kala_orderpoint);
                cn.Open();
                uk.ExecuteNonQuery();
                cn.Close();
                return "true";
            }
            catch (Exception)
            {

                throw;
            }
        }
    }
} 
```

卡拉 BLL：

```
namespace BLL
{
    public class bllkala
    {
        TblkalaDal tk=new TblkalaDal();
        public string createkala(int kala_id,string kala_name,int kala_qty,int kala_orderpoint)
        {
            return tk.createkala(kala_id, kala_name, kala_qty, kala_orderpoint);
        }
        public string deletekala(int kala_id)
        {
            return tk.Deletekala(kala_id);
        }
        public string updatekala(int kala_id,string kala_name,int kala_qty,int kala_orderpoint)
        {
            return tk.updatekala(kala_id, kala_name, kala_qty, kala_orderpoint);
        }
        public DataTable Getdata()
        {
          return  tk.Getdata();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:36:53.263

You can use this solution :

```
Form frm = Application.OpenForms["formName"];  
TextBox txt = (TextBox)frm.Controls.Find("textboxName",true)[0];  
txt.Text = "yourValue"; 
```

Just be careful, this code is not safe, do the safety parts yourself (try catch can be good approach, you can also do it by checking error prone parts in if/else blocks)

# objective-c - 步进时从方法“返回”？

> ID：12872167
> 
> 赞同：13
> 
> 时间：2012-10-13T10:19:37.380
> 
> 标签：objective-c, xcode, lldb

我想退出我正在逐步执行的当前方法。

```
-(void)helloWorld {
    NSLog(@"Hello");
    // I would like to return here, so that "World" isn't printed.
    NSLog(@"World");  
} 
```

我尝试了以下方法，但没有运气。

```
(lldb) expr return
<no result> 
```

lldb可以做到这一点吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-13T21:01:09.253

不幸的是，在 Xcode 4.5.x 中，没有办法强制从函数中提前返回。在[http://lldb.llvm.org/](http://lldb.llvm.org/)的当前 lldb 源代码中，有一个新添加的命令 ，`thread return`它可以执行您想要的操作 - 它包括指定函数返回值的能力。不过，这要等到下一个主要版本才会出现在 Xcode 中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T12:01:12.610

当您使用 Xcode 进行调试并且程序在断点处暂停时，您可以将绿色小箭头拖动到函数中的任何其他行。例如在以下代码中：

![Xcode 断点](../Images/3815ea8ea44373bea106105540b9db8e.png)

如果我想跳过`NSLog(@"B")`，我可以简单地将绿色箭头从第 20 行拖到第 23 行，这意味着该函数将简单地从我想要的任何地方“返回”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-19T20:09:08.173

我刚刚在下面提到的行添加了一个断点：

```
var computed: Bool { 
   return device.time == 10 // added breakpoint here
} 
```

并得到以下错误：

> 错误：从线程1的第0帧返回错误：我们目前只支持设置简单的整数和浮点返回类型..

似乎只适用于这两种类型

# html - 文本框对齐

> ID：12872168
> 
> 赞同：0
> 
> 时间：2012-10-13T10:19:44.757
> 
> 标签：html, css

我正在尝试制作的大高度文本框存在一些问题。我已经设置了行高和盒子的高度。除了，发生了什么是文本垂直居中对齐？我该如何解决？它应该在左上角对齐。

[http://jsfiddle.net/s3spM/](http://jsfiddle.net/s3spM/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:23:11.880

使用这可能会有所帮助

```
#field_apply {  line-height:27px; 
  padding-bottom:80px;
} 
```

[jsFiddle](http://jsfiddle.net/s3spM/5/)

如果你需要一个多行文本框，你可以使用

```
<textarea id="field_apply" class="field" placeholder="Test" cols="20" rows="5"></textarea> 
```

[jsFiddle 2](http://jsfiddle.net/s3spM/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:27:16.470

您将高度用于文本框或使用 texarea 而不调整大小

```
#textbox{
 height:150px;
} 
```

或使用文本区域

```
#textarea{
  resize:none;
  width:180px;
  height:120px;
  float:right;
} 
```

# c# - Visual Studio 中的 VB.Net 选项在智能感知列表中缺少新运算符后直接跳转到变量的数据类型

> ID：12872171
> 
> 赞同：1
> 
> 时间：2012-10-13T10:20:08.210
> 
> 标签：c#, vb.net, visual-studio

Visual Studio 中的 VB.Net 是否有一个选项可以在智能感知列表中的 new 运算符之后直接跳转到变量数据类型？（请不要提供像 Resharper 或 CodeRush 这样的加载项选项。普通的原生 Visual Studio 设置就足够了）

**场景**
我来自C#背景并且有这样的写作习惯

```
Application a = new 
```

只要我在 new 运算符后按空格键，智能感知就会直接跳转到智能感知选项列表中的 Application 类，如下所示

![在此处输入图像描述](../Images/10c1fdc9bcc6c517168a688b71ba5426.png)

（我知道此功能在隐式声明（使用`var`关键字）中失败，它必须因为 Intellisense（在编译时）不知道数据类型，但它在上面的显式声明中工作。

但是 AFAIK 像这样在 VB.Net 中没有这个选项

![在此处输入图像描述](../Images/c53a69291bddea0270eb910527451369.png)

即使它是一个明确的声明。

现在Visual Studio中有一个可以打开的选项，以便这个东西工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:59:18.453

这是不可配置的。

当您这样编写时，编辑器假定您有意在 New 表达式中使用不同的类类型。因为如果你不这样做，那么你会这样写：

```
 Dim d As New ... 
```

键入 New 后立即弹出 IntelliSense 窗口。请注意，此语法在 C# 中没有等效项。值得注意的是，这种行为在 VS2012 中被改变，现在像 C# IntelliSense 一样工作。

# blackberry - Blackberry In App purchase getExistingPurchases 和 PaymentEngine.CONNECTION_MODE_LOCAL 显示错误

> ID：12872173
> 
> 赞同：0
> 
> 时间：2012-10-13T10:20:38.527
> 
> 标签：blackberry

我正在使用以下代码在应用程序购买中实现。我在我的项目中添加了 Blackberry paymentapi.jar。我已经从下面的链接中引用了这段代码：

[http://docs.blackberry.com/en/developers/deliverables/20374/Developing_your_application_1326736_11.jsp#Initiating_a_purchase_1314129_11](http://docs.blackberry.com/en/developers/deliverables/20374/Developing_your_application_1326736_11.jsp#Initiating_a_purchase_1314129_11)

```
package mypackage;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.BasicEditField;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.RichTextField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rimlib.blackberry.api.paymentsdk.PaymentEngine;
import net.rimlib.blackberry.api.paymentsdk.PaymentException;
import net.rimlib.blackberry.api.paymentsdk.Purchase;
import net.rimlib.blackberry.api.paymentsdk.PurchaseArgumentsBuilder;

public class PurchaseDemo extends UiApplication
{
    public static void main(String[] args) 
    {
        PurchaseDemo app = new PurchaseDemo();
        app.enterEventDispatcher(); 
    }

    public PurchaseDemo() 
    {   
        pushScreen(new PurchaseDemoScreen());
    }

    private static class PurchaseDemoScreen extends MainScreen implements FieldChangeListener
    {
        private ButtonField buyButton;
        private ButtonField displayButton;
        private BasicEditField digitalGoodName;
        private BasicEditField digitalGoodSku;

        private PaymentEngine engine = PaymentEngine.getInstance();

        public PurchaseDemoScreen()
        {
            setTitle("Payment Service SDK Demo");

            if (engine != null)
            {
                engine.setConnectionMode(PaymentEngine.CONNECTION_MODE_LOCAL);

                digitalGoodName = new BasicEditField("Digital Good Name:  ", 
                    "Sample Good");
                add(digitalGoodName);

                digitalGoodSku = new BasicEditField("Digital Good SKU:   ", 
                    "abc123");
                add(digitalGoodSku);

                HorizontalFieldManager hfm = new HorizontalFieldManager();
                add(hfm);

                buyButton = new ButtonField("Buy");
                buyButton.setChangeListener(this);
                hfm.add(buyButton);

                displayButton = new ButtonField("Display Purchases");
                displayButton.setChangeListener(this);
                hfm.add(displayButton);
            }
            else
            {
                RichTextField errorMessage = new RichTextField("Sorry, in-app purchases are unavailable");
                add(errorMessage);
            }
        }

        public void fieldChanged(Field field, int context)
        {
            if (field == buyButton)
            {
                String name = digitalGoodName.getText();
                String sku = digitalGoodSku.getText();

                PurchaseArgumentsBuilder arguments = new PurchaseArgumentsBuilder()
                    .withDigitalGoodSku( sku )
                    .withDigitalGoodName( name )
                    .withMetadata( name )
                    .withPurchasingAppName( "Payment Service SDK Demo" );

                try 
                {
                    Purchase purchase = engine.purchase(arguments.build());
                    Dialog.inform("Purchase of " + purchase.getMetadata() 
                        + " is successful.");
                }
                catch (IllegalArgumentException e) 
                {
                    Dialog.inform(e.getMessage());
                }
                catch (PaymentException e) 
                {
                    Dialog.inform(e.getMessage());
                }
            }
            else if (field == displayButton)
            {
                try 
                {
                    Purchase[] purchases = engine.getExistingPurchases(true);

                    if (purchases.length != 0)
                    {
                        if (getFieldCount() > 3)
                        {
                            deleteRange(3, (getFieldCount()-3));
                        }

                        for (int i = 0; i < purchases.length; i++ )
                        {
                            RichTextField purchaseRecord = new RichTextField("Name: " 
                                + purchases[i].getMetadata() + "    SKU: " 
                                + purchases[i].getDigitalGoodSku());
                            add(purchaseRecord);
                        }
                    }
                    else
                    {
                       Dialog.inform("No existing purchases");
                    }       
                } 
                catch (PaymentException e) 
                {
                    Dialog.inform(e.getMessage());
                }
            }
        }                   
    }
} 
```

在上面的代码中

```
engine.setConnectionMode(PaymentEngine.CONNECTION_MODE_LOCAL);
Purchase[] purchases = engine.getExistingPurchases(true); 
```

以红色显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:06:26.797

不再支持 PaymentEngine#setConnectionMode()：http: [//www.blackberry.com/developers/docs/payment/1.8api/](http://www.blackberry.com/developers/docs/payment/1.8api/)

您仍然可以使用沙盒帐户进行测试：http: [//docs.blackberry.com/en/developers/deliverables/40131/Live_testing_1935047_11.jsp](http://docs.blackberry.com/en/developers/deliverables/40131/Live_testing_1935047_11.jsp)

# javascript - Node.js 回调和何时退出

> ID：12872175
> 
> 赞同：0
> 
> 时间：2012-10-13T10:21:08.913
> 
> 标签：javascript, node.js

我正在通过 Smashing Node.js 工作，到目前为止这看起来很棒，但是关于编写异步代码和使用我不理解的回调有一些东西。

如果我有这样的代码：

```
myObject.doSomethingAsync( errorCallback );
// all done, want to exit here, but errorCallback may be called
…

function errorCallback(args) {
    // do something that takes a few seconds
} 
```

请记住，我**的**意思是退出；这是计划任务而不是服务器。

我怎么知道什么时候退出？如果总是调用 errorCallback 会更容易，但在我使用的一个模块的情况下，它不是。有这种条件回调是不是很奇怪？我该如何干净地处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:31:09.403

Node 中的约定是让回调接受 Error 对象作为第一个参数。

[http://blog.gvm-it.eu/post/22040726249/callback-conventions-in-node-js-how-and-why](http://blog.gvm-it.eu/post/22040726249/callback-conventions-in-node-js-how-and-why)

您的回调应该在成功和失败时都被调用。成功时，err 对象将为空。

当然这是约定，但是可能有很多模块无视这个约定。您应该尝试修复您正在使用的模块或使用其他模块。

当无事可做时，节点将退出进程。如果你需要在退出发生之前做一些事情，你可以监听 process.exit。

[http://nodejs.org/api/process.html#process_event_exit](http://nodejs.org/api/process.html#process_event_exit)

# jquery - jquery设置数据属性

> ID：12872176
> 
> 赞同：25
> 
> 时间：2012-10-13T10:21:30.213
> 
> 标签：jquery

**html**

```
<div id="you" data-you="Hello mean">super</div> 
```

是#you html元素改变数据-you属性

```
console.log($("#you").data("you")); // Hello mean

$("#you").attr("data-you", "yes change you atribute");

console.log($("#you").data("you")); // Hello mean | does not change. 
```

当我改变时，属性“data-you”不会改变。我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-06-22T01:42:42.870

已经有一个答案被选为正确答案，但似乎没有一个答案能清楚简洁地解释正在发生的事情。
所以让我试一试：

`$(element).data(key, value)` **不会**更改元素的 html5 'data-*' 属性，jQuery 在内部存储键值（在 jQuery.cache 中）。
因此，当您调用时，`$(element).data(key)`您会得到 jQuery 内部存储的内容。

在这里回答你的问题：

由于您要更改`data-you`html 标签的属性，因此您需要使用该`attr()`方法

因此：

```
console.log($("#you").attr("data-you")); // Hello mean

$("#you").attr("data-you", "yes change you atribute");

console.log($("#you").attr("data-you")); // The data-you attribute has been changed. 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-13T10:22:38.573

attr() 并且您不必更改 data() 方法。

试试下面的方法：

```
console.log($("#you").data("you")); // Hello mean

$("#you").data("you", "yes change you atribute"); // yes change you atribute

console.log($("#you").data("you")); //  yes change you atribute 
```

数据示例 [http://api.jquery.com/data/](http://api.jquery.com/data/) ​​​​​​</p>

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T10:24:36.620

按照你同样的逻辑，看看结果；更改`data`为`attr`

```
console.log($("#you").attr("data-you")); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/asCVU/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T10:25:33.547

试试这个：

```
$("#you").data("you", "yes change you atribute"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-19T09:20:22.923

更多信息 ==>[如何从 HTML 元素 jQuery 中获取和设置数据属性值 - Tutsmake](https://www.tutsmake.com/how-to-get-set-data-attribute-value-from-elements-jquery/)

使用以下语法，您可以设置属性和值。

```
$(selector).attr(attribute,value); 
```

通过示例设置数据属性值

```
$('#myClass').attr("data-id",50); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2019-03-15T02:40:19.497

```
$("#you").attr("data-you","New Value"); 
```

# android - 在 Eclipse 中创建新的 Android 项目时出错

> ID：12872179
> 
> 赞同：0
> 
> 时间：2012-10-13T10:22:01.113
> 
> 标签：android, dependencies

我是 Android 的新手，并试图在 Windows 7 下使用 Eclipse 创建我的第一个“Hello world”应用程序。但是在向导期间我收到一个错误，我不知道如何解决它。 ![在此处输入图像描述](../Images/9d4c81ab2e030d0283865347810751fa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:25:56.200

我之前遇到过这个错误。

您需要删除整个 SDK 并从开发者网站重新下载。

有一些解决方案建议只删除兼容性库，但它对我不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:29:14.660

尝试更新你的 eclipse 。去帮助->检查更新

# oracle - oracle10g 恢复表

> ID：12872181
> 
> 赞同：0
> 
> 时间：2012-10-13T10:22:20.520
> 
> 标签：oracle, oracle10g, database-restore

所以我在这里有一个非常尴尬的话题。oracle server 10g 上的一个表被删除并重新创建，它不应该是。表的结构已更改，现在我无法将其闪回。转储来自前一天，但我不确定如何只恢复一张表。任何想法如何继续这个话题？

非常感谢。彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:16:09.563

要恢复已删除的表（您应该使用不同的名称恢复它或删除与正在恢复的表同名的表），您可以使用任一`imp`实用程序（例如）和您拥有的转储文件通过将表名指定为`tables`参数 ( `tables=(your_table_name)`) 的值（在这种情况下，您必须删除模式中已存在的同名表或将表导入到不同的模式中。），或者您可以使用恢复表`flashback`声明是否`recycle bin`启用选项。以下是使用`flashback`语句恢复表的示例：

```
SQL> drop table tb_test;

Table dropped

SQL> drop table tb_test1;

Table dropped

SQL> show parameter recyclebin;

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
recyclebin                           string      on

SQL> create table tb_test(id number);

Table created

SQL> insert into tb_test(id) values(123);

1 row inserted

SQL> commit;

Commit complete

SQL> select object_name, original_name, operation from recyclebin;

OBJECT_NAME                    ORIGINAL_NAME                    OPERATION 
------------------------------------------------------------------------------
BIN$sCyDUbMsQ9qOotUQZUTt9g==$0 TB_TEST1                         DROP
BIN$uVD0HKOsQv26JTT3Q0PuOg==$0 TB_TEST                          DROP      

SQL> purge recyclebin;

Done

SQL> select object_name, original_name, operation  from recyclebin;

OBJECT_NAME                    ORIGINAL_NAME                    OPERATION 
------------------------------------------------------------------------------

SQL> drop table tb_test;

Table dropped

SQL> select object_name, original_name, operation from recyclebin;

OBJECT_NAME                    ORIGINAL_NAME                    OPERATION 
------------------------------------------------------------------------------
BIN$+shfpD3rQKy/ry5LKtkJaw==$0 TB_TEST                          DROP      

SQL> create table tb_test(id number, col1 varchar2(11));

Table created

SQL> insert into tb_test(id, col1) values(11, 'string');

1 row inserted

SQL> commit;

Commit complete

SQL> flashback table tb_test to before drop;

flashback table tb_test to before drop

ORA-38312: original name is used by an existing object

SQL> flashback table tb_test to before drop rename to tb_test1;

Done

SQL> select * from tb_test1;

        ID
----------
       123

SQL> select * from tb_test;

        ID COL1
---------- -----------
        11 string

SQL> 
```

# ruby-on-rails - 我们如何以 Rails 嵌套形式保存验证子记录

> ID：12872185
> 
> 赞同：2
> 
> 时间：2012-10-13T10:23:19.927
> 
> 标签：ruby-on-rails

我没有找到关于以下问题的任何方法：

如果我们的嵌套表单中有 10 条子记录，并且 9 条记录没有任何验证错误，但只有一个子记录有一些验证错误，例如验证存在。

在这种情况下，父项和 9 条记录应保存在我们的数据库中，只有 1 个子项未保存。

我们有什么选择来实现这种情况吗？

这对我很有帮助，在此先感谢。

# java - 在Java中递归地解压缩不同文件夹中的多个gzip文件

> ID：12872189
> 
> 赞同：0
> 
> 时间：2012-10-13T10:23:39.083
> 
> 标签：java, windows, gzip, directory, unzip

我有以下文件结构：

```
D:\Files\File1\file.gz, file2.gz, file3.gz
D:\Files\File2\file.gz, file2.gz, file3.gz
etc.. 
```

我想为 Java 程序提供 just`D:\Files`并且它应该递归地打开每个目录，并解压缩每个 file.gz 和 file2.gz （它们都具有相同的名称，所以我可以要求它查找与该名称匹配的所有文件) 到同一个文件夹中。

我尝试了不同的代码来提取每个文件，但似乎没有任何效果。发生在我身上的另一件有趣的事情是我似乎无法解锁该目录的只读权限。我取消选中它，转到“安全”选项卡并授予自己管理员权限，但下一秒，它又恢复为只读状态。这是题外话，但我不得不把它放在那里。请帮助我的人！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:11:48.513

使用 org.apache.commons.io.FileUtils.iterateFiles 使用文件过滤器来指定您只需要 zip 文件。

解压使用 GZIPInputStream。

# android - 单独的线程 VS 服务 + 单独的线程

> ID：12872190
> 
> 赞同：0
> 
> 时间：2012-10-13T10:23:44.600
> 
> 标签：android, service, android-service

刚刚看到 Google I/O 2010 - Android REST 客户端应用程序，其中说： **从服务开始长时间运行的操作** 据我所知（我的英语很差），这样做的主要目的是防止应用程序被系统杀死. 正确的？执行所有长时间运行的操作而不仅仅是来自服务的 Web 操作是一种好习惯吗？

据我了解，如果我在活动中创建一个对象，然后应用程序进程将被终止，我将丢失该对象，但如果我在服务中创建此对象并且在进程将被终止后 - 我的对象仍然是活动的。正确的？

**（单独的线程）VS（服务+单独的线程）**

在我的问题的背景下有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:13:17.187

不完全是 ...

你不知何故混合了这些概念`Destroyed`和`Killed`

**Destroyed** 这是你的应用程序应该准备好处理的事情。由于可能不同的原因（即设备方向更改等），操作系统可能会破坏您的活动（通常是`onDestroy()`预先调用，因此您有机会保存重要的内容）并且您的活动中的所有对象都将丢失。但是，您的应用程序可能包含一个以上的活动和/或服务，并且有一个活动被销毁，并不意味着其他活动也将被销毁。

**Killed** 操作系统可能出于某种原因决定终止您的应用程序。这是通过终止应用程序使用的进程来完成的，该进程是运行构成应用程序的所有活动和服务的进程。您的应用程序不会有任何警告，也无法阻止这种情况发生。您应用程序中的所有对象（由活动和服务使用）都将丢失。

话虽如此，`Service`长期活动的优势是什么？

让我们用一个简单的例子：

如果您的活动正在将大文件上传到服务器，并且用户决定更改设备方向，则活动将被破坏并中断上传。即使在活动重新启动时重新开始上传，它也会重新开始。

如果您有服务根据活动的请求执行上传内容，即使您的活动被破坏，该服务仍保持活动状态并且上传继续而不会中断。

**注意：** 如果您有一个运行时间很长的服务（将运行超过半小时），请将其设置为**foregroung service**，否则无论如何它都会被杀死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:36:03.067

**1\. The Service API in Android is one of the key mechanisms for applications to do work in the background.**

But it can easily implemented using a simple thread.

**BUT:** **Once an application is no longer visible to the user it is generally considered expendable and a candidate to be killed by the system if it ever needs memory elsewhere. The main way applications get around this is by starting a Service component, which explicitly tells the system that they are doing some valuable work and would prefer that the system not kill their process if it doesn't truly need to.**

So as I understand that is difference between a regular thread and a Service for our case.

# iphone - 如何从数据库中单击更改图像

> ID：12872192
> 
> 赞同：-6
> 
> 时间：2012-10-13T10:24:08.057
> 
> 标签：iphone, ios, sqlite, uiimage

在我的应用程序中，我在 SQLite 数据库中有多个图像，因为我想在单击按钮时更改为下一个图像。

这是我的代码：

```
 -(void)Readthesqlitefile:(NSInteger *)sno
 {
sqlite3 *database;//database object
NSString *docpath=[self doccumentspath];//get sqlite path
const char *ch=[docpath UTF8String];//string to constant char UTF8string  main part to connect DB

if (sqlite3_open(ch, &database)==SQLITE_OK) {

    const char *chstmt="SELECT * FROM animal where rowid=  = %d",sno;

    sqlite3_stmt *sqlstmt;//to execute the above statement
    if (sqlite3_prepare_v2(database, chstmt, -1, &sqlstmt, NULL)==SQLITE_OK)
    {
        while (sqlite3_step(sqlstmt)==SQLITE_ROW)
        {
            const char *Bname=(char *)sqlite3_column_text(sqlstmt, 0);
            //converting const char to nsstring
            NSString *Bndname=[NSString stringWithFormat:@"%s",Bname];
            NSLog(@"Brand Names=%@",Bndname);
            lb1.text=[NSString stringWithFormat:Bndname];   

            NSUInteger legnt=sqlite3_column_bytes(sqlstmt, 1);

            if (legnt>0) {

                NSData *dt=[NSData dataWithBytes:sqlite3_column_blob(sqlstmt, 1) length:legnt];
                clsimg=[UIImage imageWithData:dt];//converting data to image
                imager.image=clsimg;
            }
            else {
                clsimg=nil;
            }
     }
    }
    sqlite3_finalize(sqlstmt);
}
sqlite3_close(database);
} 
```

按钮点击功能：

```
 -(IBAction)changenext
  {
  int j;
  for (j=1; j<10; j++)
  {
      [self Readthesqlitefile:j];
  }

  } 
```

它不工作。请帮我解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:01:45.967

根据您的问题，我了解到您需要在每次单击按钮时更改图像。如果我是正确的，那么改变`changenext`方法，如：

```
-(IBAction)changenext
  {
    static int j = 0;
    if (j > 10)
    {
       j = 0;
    }
    [self Readthesqlitefile:j];
    j++;
  } 
```

上述方法将在每次单击按钮时更改图像。显示最后一张图像后，它再次从第一张图像开始。

**编辑：**

这条线似乎也是错误的

`const char *chstmt="SELECT * FROM animal where rowid= = %d",sno;`.

sqlite3中没有`==`运算符（我认为是这样）。将该行替换为，

```
NSString *query    = [NSString stringWithFormat:@"SELECT * FROM animal where rowid = %d",sno];
const char *chstmt = [query UTF8String]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:44:51.323

```
-(void)Readthesqlitefile:(NSInteger *)sno 
```

它需要一个指针作为参数，但你传递一个值。

```
const char *chstmt="SELECT * FROM animal where rowid=  = %d",sno; 
```

也许这一行应该格式化成sql语句，格式代码在哪里？

下一部分，我认为 Midhun MP 的答案是正确的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:14:34.767

好吧，我们无法给出确切的答案，因为所有数据都在您身边，但您可以尝试使用此代码检查数据的完整性，

```
 NSData *dt=[NSData dataWithBytes:sqlite3_column_blob(sqlstmt, 1) length:legnt];
       UIImage *clsimg=[UIImage imageWithData:dt]; //Creating new object for UIImage
       if(clsimg!=nil)
       {
           imager.image=clsimg; //I'm assuming that imager is added in IB or you've created it before assigning clsimg.
           clsimg = nil;
       }
       else
       {
           NSLog(@"No clsimg created, may problem in converting.");
       } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T04:34:33.617

假设你的 UIImageView (imageView)

`[imageView setImage:clsimg];`

# php - 使（文本到图像）图像具有一定宽度但无限长？

> ID：12872193
> 
> 赞同：0
> 
> 时间：2012-10-13T10:24:17.530
> 
> 标签：php, gd

我有下面的代码，可以用大量文本制作图像。我希望该图像为 700 像素宽。我还希望它保留字符串具有的段落结构。（字符串来自 MySQL 数据库。）我怎样才能做到这一点？

```
 $font  = 2;
                        $width  = imagefontwidth($font) * strlen($string);
                        $height = imagefontheight($font);

                        $image = imagecreatetruecolor ($width,$height);
                        $white = imagecolorallocate ($image,255,255,255);
                        $black = imagecolorallocate ($image,0,0,0);
                        imagefill($image,0,0,$white);

                        imagestring ($image,$font,0,0,$string,$black);

                ob_start();

                imagepng($image);
                printf('<img src="data:image/png;base64,%s"/>', base64_encode(ob_get_clean()));

                imagedestroy($image); 
```

其次，撇号没有显示是有原因的吗？我在图像的开头和结尾得到了一些奇怪的字符？

# javascript - 无法使用 javascript 发送 POST 请求

> ID：12872197
> 
> 赞同：0
> 
> 时间：2012-10-13T06:24:03.750
> 
> 标签：javascript

我正在尝试`POST`使用 javascript 发送请求。下面是代码片段-

```
 for (var i = 0; i < elements.length; i++) {
       var uid = i;
       var http = new XMLHttpRequest();
       var params = 'uid='+uid;
       http.open('POST','/home/index.php', true);

       http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
       http.setRequestHeader('Content-length', params.length);
/*    
       http.onreadystatechange = function() {
          if(http.readyState == 4 && http.status == 200) {
             continue;
          }
       }
*/
       http.send(params);
    } 
```

从 firebug 运行脚本后，没有发送任何请求。 ![在此处输入图像描述](../Images/8a3b4b7313f75e0f401221634a50efe6.png)

错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:32:00.713

你有一个非法的`continue`声明。您只能`continue`在循环中使用，而不是作为中断函数的一种方式。试试`return`吧。

# sql - sql查询来隔离数据

> ID：12872200
> 
> 赞同：3
> 
> 时间：2012-10-13T10:24:51.547
> 
> 标签：sql, sql-server

我有 3 个表，分别命名为票证、分支、有效负载

票

```
ticketid  branchid   waittime    servicetime
   1         3          10           5
   2         4          20           30 
```

分支机构

```
branchid   branchname
   3        Newyork
   4        kansas 
```

有效载荷

```
branchid   ticketid   segment
   3          1        GOLD
   4          2        SILVER 
```

这些是一些示例值，现在我要做的就是从“有效负载表”获取分支ID，从“分支”表获取分支名称，从“有效负载”表获取ticketid，从“有效负载”表获取段以及等待时间和服务时间从“票”表中，这样：

```
branchid   branchname    ticketid    segment     waittime    servicetime
   3        newyork         1         GOLD         10            5
   4        kansas          2         silver       20            30 
```

我正在使用 mssql，我是新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T10:27:30.447

那么你需要加入所有的表。

```
SELECT  a.branchid, c.branchname, a.ticketid,
        a.segment, b.waittime,b.servicetime
FROM    payload a
        INNER JOIN ticket b
            ON a.ticketid = b.ticketid
        INNER JOIN branches c
            ON a.branchid = c.branchid 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/a8395/1)

# asp.net-mvc - MVC - 如果会话状态是个坏主意，那么在哪里存储公共变量？User.Identity.Name 替代方案？

> ID：12872202
> 
> 赞同：0
> 
> 时间：2012-10-13T10:25:11.217
> 
> 标签：asp.net-mvc, session-variables

我读过在 Session State 中存储信息对于可扩展性来说是个坏主意，但是如果 Session State 存储在 SQL 中而不是 Proc 中可以吗？

通常，当用户登录时，我将他们的 customerID 分配给一个会话变量，该变量几乎在每个页面上都用于为他们过滤信息。如果此 customerID 不在会话变量中，那么存储此 customerID 的最佳方法是什么。

我可以使用 User.Identity.Name 字段去查询数据库以获取 customerID，但我看不出有任何区别并将会话变量存储在 SQL 中。还有一种方法可以扩展 User.Identity 类以包含 CustomerID 变量吗？同样，我看不出这比仅存储会话变量有什么好处。

任何想法都非常欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:57:15.390

是的，你可以做所有这些事情。出于几个原因，不鼓励在 Session 中存储东西，而不仅仅是为了可伸缩性。一个原因是会话超时，用户可能仍处于登录状态。您始终可以检查变量是否为空并重新填充它，但您必须在每个页面上都这样做，或者创建一些您将拥有的辅助方法调用表单每一页。

SQL 会话要慢得多，并且需要对每个请求进行数据库查找。所以这是避免它们的原因之一。

您可以在全局操作过滤器之类的东西中查找 ID，但同样，这会导致对每个请求进行数据库查找。

另一种选择是扩展 IIdentity 接口（即 User.Identity 对象）以添加 CustomerID。如果你用谷歌搜索“IIdentity MVC”，就会有各种各样的例子

# android - 如何取消前台服务使用通知（滑动关闭）或清除所有通知？

> ID：12872204
> 
> 赞同：25
> 
> 时间：2012-10-13T10:25:12.257
> 
> 标签：android, android-service, android-notifications

我目前正在创建一个前台服务，并在服务启动时显示在通知栏中的通知。如果服务停止，通知会消失。我的问题是，有没有办法在“清除所有通知”或通知（滑动）消失时停止服务？

更新以包括通知的实施：

```
public int onStartCommand(Intent intent, int flags, int startId)
{   
    Log.d(CLASS, "onStartCommand service started.");

    if (getString(R.string.service_start_action) == intent.getAction())
    {
        Intent intentForeground = new Intent(this, ServiceMain.class)
            .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);    
        PendingIntent pendIntent = PendingIntent.getActivity(getApplicationContext(), 0, intentForeground, 0);      
        Notification notification;
        Notification.Builder builder = new Notification.Builder(getApplicationContext())
            .setSmallIcon(android.R.drawable.btn_star)
            .setTicker("Service started...")
            .setContentIntent(pendIntent)
            .setDefaults(Notification.DEFAULT_ALL)
            .setOnlyAlertOnce(true)
            .setOngoing(false);
        notification = builder.build();
        notification.flags |= Notification.FLAG_FOREGROUND_SERVICE;

        startForeground(SERV_NOTIFY, notification);
        player.start();
    }
    else
    {
        Log.d(CLASS, "onStartCommand unable to identify acition.");
    }

    return START_STICKY;        
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2016-03-01T11:24:15.960

不允许用户刷掉*正在进行的*前台服务生成的通知。

因此，`stopForeground(false)`首先，它允许用户在此后（至少在 Lollipop+ 上）刷掉通知。对于棒棒糖之前的版本，您可能需要`stopForeground(true)`停止前台并删除通知，然后使用 重新发出通知`notificationManager.notify(yourNotificationID, yourNotificationObject)`，以便您的通知可见但可滑动。

至关重要的是，使用删除意图设置通知对象，当用户将其滑开时触发该删除意图。

```
(new NotificationCompat.builder(this).setDeleteIntent(deletePendingIntent)).build() 
```

`deletePendingIntent`类似的东西在哪里

```
Intent deleteIntent = new Intent(this, YourService.class);
deleteIntent.putExtra(someKey, someIntValue);
PendingIntent deletePendingIntent = PendingIntent.getService(this,
someIntValue, 
deleteIntent, 
PendingIntent.FLAG_CANCEL_CURRENT); 
```

当用户将其滑开时，带有额外内容的意图将传递给服务。处理内部交付的额外内容`onStartCommand`，即检查`intent != null`，，`intent.getExtras() != null`然后从给定的额外捆绑包中提取值`someKey`，如果匹配`someIntValue`，则调用`stopSelf()`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-09T09:53:01.560

这段代码对我有用：

```
this.stopForeground(false);
mNotificationManager.cancel(NOTIFY_ID); 
```

并且您应该设置 onStartCommand 的返回值，STRAT_STICKY 将重新启动您的服务。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-13T11:57:13.993

> 我的问题是，有没有办法在“清除所有通知”或通知（滑动）消失时停止服务？

假设你`Notification`的设置允许它被清除，[当`deleteIntent`](http://developer.android.com/reference/android/app/Notification.html#deleteIntent)它被清除时应该被调用。您可以将其设置为`getBroadcast()` `PendingIntent`，指向一个清单注册`BroadcastReceiver`的调用`stopService()`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-13T10:47:53.003

无法清除前台服务的通知。唯一的方法是停止服务。

所以我相信你想解决的问题永远不会发生。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T10:43:45.100

您可以在创建的通知中设置dismissIntent，但我认为无法清除前台服务通知？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-11T12:08:06.697

我做了以下事情，它对我有用：

1.  我在调用前台服务之前创建了一个通知，它使用了与前台服务的通知一起使用的相同 id 和通知通道

2.  我通过通知 ID 取消了通知

3.  我使用您所需的结构创建了另一个通知

4.  您可以在不停止前台服务的情况下关闭或滑动最后一条通知

# php - 复制过程条件后转到其他过程

> ID：12872205
> 
> 赞同：0
> 
> 时间：2012-10-13T10:25:29.220
> 
> 标签：php, mysql

我阅读数据库以获取`$doc_copy`（包含链接）。如果有链接，则复制过程开始然后转到`mainProcess.php`，但如果找不到链接，则转到'summary_index.php';`这是代码：

```
function copyDoc($link, $savePath){
    @copy($link, $savePath . basename($link));
}

while ($row = mysql_fetch_array($q)){   
    $doc_copy = $row['doc_url'];
    $copy = copyDoc($doc_copy, $savePath);
     if ($copy=== false){
        include 'summary_index.php';
    }
    else include 'mainProcess.php';
} 
```

如果没有复制过程就可以了。但是当没有复制过程时 `summary_index.php`不会运行。怎么了？非常感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:57:51.287

您的函数没有返回语句，因此`$copy`总是`false`

应该是这样的

```
function copyDoc($link, $savePath){
    return copy($link, $savePath . basename($link));
} 
```

# android - 像动画一样的翻板

> ID：12872207
> 
> 赞同：1
> 
> 时间：2012-10-13T10:25:51.693
> 
> 标签：android, timer, countdown, flip

![在此处输入图像描述](../Images/e5549f369a0d41ed94a5834aa2c349bf.png)

数字的变化应该类似于机场计时器。有人可以给我一些指示从哪里开始。

我对动画很感兴趣，像flipboard（？？？）一样改变时间。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T07:35:21.827

您将需要所有数字的上半部分和下半部分的单独图像。然后，要创建动画翻转，您需要一个[Scale Animations](http://developer.android.com/guide/topics/resources/animation-resource.html#View)，它将视图的高度从 100% 缩放到 0%，并在底部使用 pivotY。

然后，对于每个显示的数字，您将需要 4 个视图，如下所示：

![在此处输入图像描述](../Images/c0a976d2d20cc0eeed0570c0e41db9dd.png)

当前可以看到前面的两个视图，并显示“0”的两个部分。其他两个视图（我对它们进行了不同的着色以确保它是 2 个视图）位于后面并且已经持有下一个数字（注意，它们还必须具有可见性 =“可见”，它们只需要在 z-level 中落后。

现在，要切换，将动画应用到上前视图（保持“0”的上半部分）。动画使其缩小，模拟翻转，同时“1”的上半部分变得可见。动画完成后，将相同的动画应用到下前视图，这会隐藏“0”的下半部分并使“1”的下半部分可见。

当第二个动画完成后，通过改变它的 z-level 将持有“0”部分的视图移动到持有“1”的现在可见视图后面，加载下一个数字的图像（在本例中为“2”）并将高度重置为又是原来的高度。

# javascript - Javascript按字母顺序对字典数组进行排序，并带有可能的空值

> ID：12872211
> 
> 赞同：0
> 
> 时间：2012-10-13T10:26:09.437
> 
> 标签：javascript, arrays, sorting

我遇到了一个问题。我按联系人的名字对联系人进行排序，但有时我会遇到缺少名字的联系人。有谁知道如何更改此方法以使其正常工作？谢谢

这是我正在使用的排序方法。

```
function sortAZ(ob1,ob2) {
    var n1 = ob1.firstName.toLowerCase()
    var n2 = ob2.firstName.toLowerCase()
    if (n1 > n2) {return 1}
    else if (n1 < n2){return -1}
    else { return 0}//nothing to split
};

data.sort(sortAZ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:31:20.327

```
function sortAZ(ob1,ob2) {
    // Handles case they're both equal (or both missing)
    if (obj1 == obj2) {return 0}
    // Handle case one is missing
    if (obj2 == null|| obj2 == "") {return 1}
    if (obj1 == null|| obj1 == "") {return -1}

    var n1 = ob1.firstName.toLowerCase()
    var n2 = ob2.firstName.toLowerCase()
    if (n1 > n2) {return 1}
    else if (n1 < n2){return -1}
    else { return 0}//nothing to split
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:35:25.250

It depends on how you want to treat the objects that do not have that attribute.

But adding this to the top of the sort function will prevent it from comparing non-existent attributes.

```
if (ob1.firstName == undefined || ob2.firstName == undefined) {
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T11:31:24.917

在比较之前首先检查对象及其属性的存在。如果他们错过了，请返回`1`oder`-1`以将它们排序在最后或顶部。

```
function sortAZ(ob1, ob2) {
    if (!ob1) return -1;
    if (!ob2) return 1;
    // if (ob1 == ob2) return 0; // equal
    if (typeof ob1.firstName != "string") return -1;
    if (typeof ob2.firstName != "string") return -1;

    var n1 = ob1.firstName.toLowerCase()
    var n2 = ob2.firstName.toLowerCase()
    if (n1 > n2) return 1;
    if (n1 < n2) return -1;
    return 0; // equal
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T11:20:51.523

请注意，这是对 PherricOxide 答案的修改。谢谢

```
function sortAZ(obj1,obj2) {
    // Handles case they're both equal (or both missing)
    if (obj1 == obj2) {return 0}

    // Handle case firstName is missing
    if (obj2.firstName == null || obj2.firstName == "") {return 1}
    if (obj1.firstName == null || obj1.firstName == "") {return -1}

    var n1 = ob1.firstName.toLowerCase()
    var n2 = ob2.firstName.toLowerCase()
    if (n1 > n2) {return 1}
    else if (n1 < n2){return -1}
    else { return 0}//nothing to split
}; 
```

# php - 如何从 STDObject 中删除数组？

> ID：12872214
> 
> 赞同：1
> 
> 时间：2012-10-13T10:26:26.780
> 
> 标签：php, arrays, object, joomla, stdclass

**你好！！**

我认为对于那些熟悉 PHP 中的 std 对象和数组的人来说，这是一个非常简单的问题。

**这是我的 STD 对象数组：**

```
Array ( [0] => stdClass Object ( [name] => name1 [description] => [category_id] => 17 [category_publish] => 1 [ordering] => 1 [category_parent_id] => 10 ) [1] => stdClass Object ( [name] => name2 [description] => [category_id] => 8 [category_publish] => 1 [ordering] => 1 [category_parent_id] => 0 ) [2] => stdClass Object ( [name] => name3 [description] =>desc [category_id] => 10 [category_publish] => 1 [ordering] => 2 [category_parent_id] => 0 ) [3] => stdClass Object ( [name] => name3 [description] => [category_id] => 16 [category_publish] => 1 [ordering] => 2 [category_parent_id] => 10 ) ) 
```

现在，我有不同的数字数组，例如：

```
$arr=array(17,10); 
```

我需要检查其中一个数字是否等于 [category_id] 值（在 std 对象内），如果相等，请检查下一个 [category_id]，如果不是，则删除该对象的所有值。（当然，其他方法是只用数组中的数字构建一个新的 STD 对象）

**所以结果应该是：**

```
Array ( [0] => stdClass Object ( [name] => name1 [description] => [category_id] => 17 [category_publish] => 1 [ordering] => 1 [category_parent_id] => 10 ) [2] => stdClass Object ( [name] => name3 [description] =>desc [category_id] => 10 [category_publish] => 1 [ordering] => 2 [category_parent_id] => 0 ) ) 
```

只有 categiry_id =17 和 10 的数组在这个 stdObject..

非常感谢您的帮助！！

伊兰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T10:29:29.407

试试这个

```
$arr=array(17,10);
foreach ($array as $key => $obj) {
  if (!in_array($obj->category_id, $arr)) {
    unset($array[$key]);
  }
} 
// edited, missing closing bracket 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:29:02.257

你可以`array_filter`用来过滤你想要的或你不想要的

```
$filterCategory = array(17,10);
$array = array_filter($yourArray,function($var) use($filterCategory) { return in_array($var->category_id, $filterCategory); } ); 
```

# php - PHP删除脚本仅适用于本地，不适用于远程

> ID：12872215
> 
> 赞同：1
> 
> 时间：2012-10-13T10:26:38.017
> 
> 标签：php, zend-framework

我正在建立一个网站，目的是学习php，在本地开发网站，然后转移到远程。根目录中的一个文件夹是“clients”，其中包含用于从表单中列出、插入、更新和删除客户反馈的脚本。在本地（XAMPP）所有脚本都可以完美运行。但是当我将它转移到远程时，一切正常，除了删除脚本。当我尝试删除远程上的条目时，它只会给出一个找不到页面的错误。我已附上相关代码如下。我将不胜感激。1\. 下面是删除脚本的页面。

```
<?php require_once('scripts/db_delete_feedback.php'); ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Delete Feedback</title>
<link href="../css/admin.css" rel="stylesheet" type="text/css" />
</head>

<body>
<h1>Delete Feedback</h1>
<p><a href="index.php">Admin menu</a></p>
<p>Please confirm that you want to delete the following record. This cannot be undone.</p>
<form id="form1" name="form1" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>.">
<p><strong>Client Name:</strong><?php echo $feedback['name']; ?></p>
<p><strong>Feedback summary:</strong><?php echo $feedback['punch']; ?></p>
<p><strong>Rating:</strong><?php echo $feedback['rating']; ?></p>
<?php if ($photos) { ?>
<p>The following photos are linked with this client feedback. Select the checkbox next to each photo you want to delete at the same time as this feedback. To delete images without deleting the feedback, use <a href="list_photos.php">photo management page</a>.</p>
<table width="600">
<?php
$num = 0;
foreach ($photos as $photo) { ?>
  <tr>
    <td><input type="checkbox" name="photo[]" id="photo<?php echo $num;?>" value="<?php echo $photo['filename']; ?>" />
      <label for="photo<?php echo $num++; ?>" class="checkbox_label">Delete photo</label></td>
    <td><img src="../images/<?php echo $photo['filename']; ?>" width="200" alt="" /><br /><?php echo $photo['caption']; ?></td>
    </tr>
    <?php } ?>
</table>
<?php } ?>
<p>
  <input type="submit" name="delete_feedback" id="delete_feedback" value="Confirm Deletion" />
  <input type="submit" name="cancel" id="cancel" value="Cancel" />
  <input name="returnto" type="hidden" id="returnto" value="<?php echo $returnto; ?>" />
  <input name="client_id" type="hidden" id="client_id" value="<?php echo $client_id; ?>" />
</p>
</form>
</body>
</html> 
```

1.  以下是上述脚本包含的“db_delete_feedback.php”文件：

    ```
     <?php
    $errors = array();
    require_once('library.php');
    try {
      require_once('db_definitions.php');
      $client_id = checkId('client_id', 'list_feedback.php');
      if (isset($_POST['delete_feedback'])) {
        // delete and redirect
        $dbWrite->delete('clients', "client_id = $client_id");
      $dbWrite->delete('client2photo', "client_id = $client_id");
      if (isset($_POST['photo'])) {
        foreach ($_POST['photo'] as $filename) {
          $dbWrite->delete('photos', "filename = '$filename'");
          unlink($destination . '/' . $filename);
        }
      }
      header('Location: ' . $_POST['returnto']);
      exit;
      }  elseif (isset($_POST['cancel'])) {
        header('Location: ' . $_POST['returnto']);
        exit;
      }
      $feedback = getFeedback($dbRead, $client_id);
      $photos = getRelatedPhotos($dbRead, $client_id);
      if (isset($_SERVER['HTTP_REFERER'])) {
        $returnto = $_SERVER['HTTP_REFERER'];
      } else {
        $returnto = 'list_feedback.php';
      }
    } catch (Exception $e) {
      echo $e->getMessage();
    } 
    ```

包含的 library.php 文件包含 zend 框架库的路径。请帮助，因为我无法找到此问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:00:29.227

最后，我找到了原因。这是一个愚蠢的编码错误。额外的 . 在表单动作中

这不适用于远程服务器，但适用于本地：

```
<form id="form1" name="form1" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>."> 
```

这适用于远程服务器：

```
<form id="form1" name="form1" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:09:21.200

如果您收到“找不到页面错误”，它可能与脚本本身没有任何关系，因为服务器没有找到该脚本。

确保你

1.  肯定已经上传了删除脚本。
2.  脚本文件具有适当的文件权限，因此服务器可以访问该文件。
3.  如果这不起作用，请检查您的服务器错误日志文件（例如`/var/log/apache2/error.log`）中的 PHP 错误。
4.  检查在哪些情况下会发生重定向。`$_POST['returnto']`在进行重定向 ( ) 之前，您不检查是否有任何 URL `header( 'Location: ' . $_POST['returnto'] );`。也许没有给出任何 URL，因此重定向无处可去——因此出现“找不到页面错误”。

# jquery - 响应式导航可见性 - jQuery Show Hide

> ID：12872223
> 
> 赞同：0
> 
> 时间：2012-10-13T10:27:36.837
> 
> 标签：jquery, responsive-design

我刚刚从头开始重建我的网站，并且有一个小问题，我似乎无法在响应式导航上解决自己的问题。

如果您查看站点的全尺寸然后调整屏幕大小，在 400 像素时响应式导航会启动。如果您打开导航并再次关闭它，然后将浏览器的大小调整到 400 像素以上，菜单将保持隐藏状态。

你可以在这里查看：[http ://roybarber.com](http://roybarber.com)

jquery 在functions.min.js 和下面：

```
 $.fn.collapsable = function(options) {
    return this.each(function() {
  var obj = $(this);
  var tree = $('.main');
  obj.click(function(){
    if( obj.is(':visible') ){tree.slideToggle('fast');tree.toggleClass('clearfix');}
  });
  $(window).resize(function(){
    if ( $(window).width() >= 767 ){ tree.toggleClass('clearfix'); };
  });
});
};
var menubtn = $('.menu-btn');
menubtn.collapsable();
menubtn.click(function(ev) {
    menubtn.toggleClass('open');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:35:00.330

感谢 Twitter 上的 Junaid Ahmed ( [@simple_ux](https://twitter.com/simple_ux) )

修复非常简单！在此处添加 .show：

```
 if ( $(window).width() >= 600 ){ tree.toggleClass('clearfix').show(); }; 
```

还必须更正浏览器 .width 以匹配媒体查询，这是完整代码

```
 $.fn.collapsable = function(options) {
      return this.each(function() {
        var obj = $(this);
        var tree = $('.main');
        obj.click(function(){
          if( obj.is(':visible') ){tree.slideToggle('fast');tree.toggleClass('clearfix');}
        });
        $(window).resize(function(){
          if ( $(window).width() >= 600 ){ tree.toggleClass('clearfix').show(); };
        });
      });
    };
    var menubtn = $('.menu-btn');
    menubtn.collapsable();
    menubtn.click(function(ev) {
      menubtn.toggleClass('open');
    }); 
```

# c++ - 同一模板的不同类类型相互交互

> ID：12872227
> 
> 赞同：1
> 
> 时间：2012-10-13T10:27:42.360
> 
> 标签：c++, templates, recursion, wrapper

我想知道以下是否可能。假设我有这样的代码：

```
template <class NumberType>
struct Number
{
   NumberType value;

   void operator = (Number in_val)
   {
        value = in_val;
   }
} 
```

那么我就可以做类似的事情：

```
Number<int> n1, n2;
n2.value = 5;
n1 = n2;
cout << "Value: " << n1.value << endl; 
```

但这不允许我执行以下操作：

```
Number<int> n1;
Number<double> n2;
n2.value = 5;
n1 = n2;
cout << "Value: " << n1.value << endl; 
```

如何使这成为可能？我是否必须用另一个包装这个结构/类，或者我是否必须进行一些花哨的递归？

ps 我已经使用 C++ 有一段时间了，但从未尝试过`templates`。所以考虑一下我对模板很陌生。

-- 编辑 -- 好的，我现在正确理解了。但是另一个相关的问题来了。

```
template<class OtherNumType>
Number& operator *= ( const OtherNumType& in_value)
{
    value *= in_value;
    return *this;
} 
```

这会产生编译错误。为什么？正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:32:51.757

您可以提供一个模板 operator=

```
template<class OtherNumType>
Number<NumberType>& operator= ( const Number<OtherNumType>& in_val)
{
    value = in_val.value; // ok if the number types are implicitly convertable
    return *this;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:36:08.647

当`Number<T>`编译器为任何特定 type 考虑模板定义时`T`，名称`Number`（当用作类型名称时）被解释为`Number<T>`，无论`T`此时可能是什么。

因此，对于`Number<int>`，您当前的模板定义仅提供以下赋值运算符：

```
void operator=(Number<int> in_val) 
```

因为当时`Number`被解释为`Number<int>`。

为了使操作符更加灵活，可以将其变成成员模板（已经模板化的类中的模板化函数）：

```
template <class NumberType>
struct Number
{
  NumberType value;

  template <typename T2>
  Number &operator=(const Number<T2> &in_val)
  {
    value = in_val.value;
    return *this;
  }
}; 
```

请注意，我如何修改运算符，不仅可以接受`Number<T2>`任何*类型* `T2`，还可以使其返回`*this`并接受参数作为 const 引用——这是定义赋值运算符的最常见和最有用的方法。

# c++ - 从 C++ 调用 matlab fmincon

> ID：12872228
> 
> 赞同：1
> 
> 时间：2012-10-13T10:27:51.167
> 
> 标签：c++, matlab, optimization

我正在尝试`fmincon`从 C++ 调用 Matlab 的函数。我正在使用通话

```
mxcallMatlab(2, &arg1, 4, &arg2, "fmincon"); 
```

其中`arg2"`是一个维度为 4 的 Matlab`mxArray`数组（即定义为`mxArray *arg2[4]`）。`arg2`接受 4 个不同的参数`fmincon`。`arg2[0]`应该是`fmincon`用作其第一个参数的目标函数句柄。问题是如何将目标函数句柄传递给`arg2[0]`. 我的目标函数不是在 Matlab 中定义的，而是在 c++ 中定义的。我应该将我的目标函数指针转换为双精度（我必须这样做，因为 Matlab 的所有输入都是双精度的），然后将其传递给`arg2[0]`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:16:39.990

如发现[here](http://www.mathworks.de/matlabcentral/answers/44778)：

> 只有 MATLAB 可以调用 MATLAB 函数句柄。MATLAB 中的函数句柄是一种数据结构，其中包括（除其他外）对数据块的引用，该数据块以需要由 MATLAB 引擎解释的预解析线程解释器格式存储 MATLAB 代码。MATLAB .m 代码不能编译为机器语言，只能编译为链接的数据结构。

因此，您无法直接实现您想要的。您必须在单独的 MEX 文件中定义目标函数，在 Matlab 中为其定义一个函数句柄，然后将其传递给您调用`fmincon`. 所以，像

```
[sol, fval, ...] = your_main_mex(@your_objective_mex, ...) 
```

# php - 从查询字符串中提取数据

> ID：12872232
> 
> 赞同：0
> 
> 时间：2012-10-13T10:28:20.230
> 
> 标签：php, string, split, query-string

我希望能够看到用户执行了哪种类型的操作以及针对哪种产品。您可以在下面看到查​​询字符串的外观以及我想要提取（在本例中）“changeInfo”和“2”。

下面是我用于拆分查询字符串的代码，该代码有效，但我显然不推荐使用“拆分”，并且不应使用。那么，我可以用什么代替呢？提取这些值的最佳方法是什么？

```
//$queryString = index.php?action=changeInfo&id=2

list($a, $action, $b, $id) = split('[=&]', $queryString);

echo "$a, $action, $b, $id";    //action, changeInfo, id, 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:36:03.207

您可以使用

```
$quertString = parse_url("index.php?action=changeInfo&id=2",PHP_URL_QUERY);
parse_str("action=changeInfo&id=2",$quertString);
var_dump($quertString); 
```

输出

```
array
  'action' => string 'changeInfo' (length=10)
  'id' => string '2' (length=1) 
```

如果你想进一步打破它

```
list($a,$b) = array_keys($quertString);
list($action,$id) = array_values($quertString);

var_dump($a, $action, $b, $id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:45:19.490

split() 被explode() 取代，以防万一派上用场。

# android - 我有一个数据库，有多个相同日期和相关金额的记录，但我只想要一条记录，即与日期相关的总金额

> ID：12872237
> 
> 赞同：0
> 
> 时间：2012-10-13T10:29:11.087
> 
> 标签：android, sqlite, android-layout, android-cursor

我正在使用游标从数据库中检索数据，但问题是我没有。同一日期的记录，我只希望一个记录日期明智，并且相关的日期 Tamt 将添加到金额字段：

我有像这样的数据库记录：

```
Sr    ExpName       Date       Camt  Tamt
---   --------- -----------   ----- -----
1     Pen        10-10-2012      10    10
2     abc        10-10-2012      30    45
3     xyz        11-10-2012      15    55
4     ggg        11-10-2012      20    75
5     aaa        11-10-2012      10    85
6     nnn        11-10-2012      10    95

 dbhelper = new DbHelper(this);
 db = dbhelper.getReadableDatabase();

    Cursor c = db.query(DbHelper.TABLE_NAME, new String[]{"CAST(Date AS DATE)","SUM(Tamt) AS AMT"}, null, null,"CAST(Date AS DATE)", null, null);
    adapter = new SimpleCursorAdapter(this, R.layout.myrow1, c, new String[]{DbHelper.C_Date,DbHelper.C_Tamt},new int[]{R.id.textView3,R.id.textView5} );
    startManagingCursor(c);     
    lstExpense.setAdapter(adapter); 
```

其中 myrow1 是 TextView3 和 TextVew5 字段中的布局文件，我想在其中显示输出 DATE 和 AMOUNT。

我想要这样的输出：

```
DATE             AMOUNT
------------     ------
10-10-2012          40
11-10-2012          35
12-10-2012          10
13-10-2012          10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:02:51.493

这听起来像是[GROUP BY](http://www.sqlite.org/lang_select.html#resultset)和 SUM[聚合函数](http://www.sqlite.org/lang_aggfunc.html)的问题。

直接使用 SQLite，您的查询需要遵循

```
SELECT Date, SUM(Camt) AS Amount FROM Expenses GROUP BY Date; 
```

（我假设您的数据库表被调用`Expenses`。）

将其转换为 Android 游标查询非常简单

```
Cursor c = db.query("Expenses", 
    new String[] { "Date", "SUM(Camt) AS Amount" }, 
    null, null, "Date", null, null, null); 
```

这应该会给你你正在寻找的结果。

# python - Python3 - 完成脚本后保持程序运行

> ID：12872240
> 
> 赞同：0
> 
> 时间：2012-10-13T10:29:22.913
> 
> 标签：python

标题基本上说明了一切。这是我的脚本：

```
 keepProgramRunning = True
a = int(input("Type a value for a: "))
b = int(input("Type a value for b: "))
print("Result when multiplying: ", a*b)
print("Result when dividing: ", a/b)
print("...", a-b)
print("...", a+b) 
```

在没有自动关闭 cmd 的情况下，我如何在输入 a 和 b 的值后查看结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T10:33:09.770

最简单的方法是等待用户输入

在最后添加：

```
input("Press enter to close") 
```

或者，如果您从命令行运行脚本，脚本结束后窗口不会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:32:53.430

等待另一个输入

```
keepProgramRunning = True
a = int(input("Type a value for a: "))
b = int(input("Type a value for b: "))
print("Result when multiplying: ", a*b)
print("Result when dividing: ", a/b)
print("...", a-b)
print("...", a+b)
input("Press [enter] to continue..") 
```

# python - 使用 GAE 部署到 PROD 个人域

> ID：12872242
> 
> 赞同：1
> 
> 时间：2012-10-13T10:29:26.733
> 
> 标签：python, google-app-engine, deployment

我使用 GAE 成功将 Hello world 部署到[http://rajinination.appspot.com/ 。](http://rajinination.appspot.com/)当我将它链接到个人域[http://rajinination.com/](http://rajinination.com/)时，它显示“错误 404”。
我将我的个人域链接到appspotdomain：imgur.com/t8jKJ
错误404：imgur.com/iwcEC

为什么我的个人域显示 404 错误，而 apppot 域显示代码成功？

应用程序.Yaml
`application: rajinination
version: 1
runtime: python27
api_version: 1
threadsafe: yes
handlers:
- url: /favicon.ico
static_files: favicon.ico
upload: favicon.ico
- url: .*
script: main.app
libraries:
- name: webapp2
version: "2.5.1"` 

主文件
`import webapp2
class MainHandler(webapp2.RequestHandler):
def get(self):
self.response.out.write("HelloWorld")` 

`app = webapp2.WSGIApplication([('/', MainHandler)],debug=True)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:03:44.053

这是 Nick Johnson 关于在应用引擎上使用裸域的文章：http: [//blog.notdot.net/2009/12/Naked-domains-on-App-Engine](http://blog.notdot.net/2009/12/Naked-domains-on-App-Engine)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:19:14.503

**自定义域**

首先：要在自定义域上提供您的应用程序，您必须告诉 Google Apps 处理该域上的请求。

[请参阅https://developers.google.com/appengine/docs/domain](https://developers.google.com/appengine/docs/domain)上的步骤

这将让您在子域上提供服务，例如 www.rajinination.com

**裸域**

然后，看起来你正在尝试做一个裸域，这是[appengine 的一个未解决的问题](http://code.google.com/p/googleappengine/issues/detail?id=777)（如果你阅读下面链接的 Nick 的博客，你会发现它不太可能得到解决）。

解决方法是 按照尼克的博客中所述进行`rajinination.com`重定向：http: [//blog.notdot.net/2009/12/Naked-domains-on-App-Engine](http://blog.notdot.net/2009/12/Naked-domains-on-App-Engine)`www.rajinination.com`

我们在生产现场成功地使用了这种解决方法。

# python - Python：脚本中的内存问题

> ID：12872244
> 
> 赞同：4
> 
> 时间：2012-10-13T10:29:40.127
> 
> 标签：python, performance, memory, memory-management

我写了一个脚本，我在其中阅读了大约 400 万个点和 800.000 个图。该脚本剪辑每个绘图内的点并为每个绘图保存一个新的文本文件。

一段时间后，我的 PC 内存已满。我曾尝试在我的脚本中挖掘，但在每个循环`for i in xrange(len(sr)):`中，每个对象都被替换，并且剪辑的点保存在一个新的 txt 文件中。

在这种情况下是否有一些策略可以在不降低性能的情况下提高内存使用率（脚本已经很慢）？我是python的初学者，如果问题很简单，我很抱歉。

提前感谢詹尼

```
inFile ="C://04-las_clip_inside_area//prova//Ku_115_class_Notground_normalize.las"
poly ="C://04-las_clip_inside_area//prova//ku_115_plot_clip.shp"
chunkSize = None
MinPoints = 1

sf = shapefile.Reader(poly) #open shpfile
sr = sf.shapeRecords()
poly_filename, ext = path.splitext(poly)
inFile_filename = os.path.splitext(os.path.basename(inFile))[0]
pbar = ProgressBar(len(sr)) # set progressbar
if chunkSize == None:
    points = [(p.x,p.y) for p in lasfile.File(inFile,None,'r')]
    for i in xrange(len(sr)):
        pbar.update(i+1) # progressbar
        verts = np.array(sr[i].shape.points,float)
        record = sr[i].record[0]
        index = nonzero(points_inside_poly(points, verts))[0]
        if len(index) >= MinPoints:
            file_out = open("{0}_{1}_{2}.txt".format(poly_filename, inFile_filename, record), "w")
            inside_points = [lasfile.File(inFile,None,'r')[l] for l in index]
            for p in inside_points:
                file_out.write("%s %s %s %s %s %s %s %s %s %s %s" % (p.x, p.y, p.z, p.intensity,p.return_number,p.number_of_returns,p.scan_direction,p.flightline_edge,p.classification,p.scan_angle,record)+ "\n")
            file_out.close() 
```

这是原始功能

```
def LAS2TXTClipSplitbyChunk(inFile,poly,chunkSize=1,MinPoints=1):
    sf = shapefile.Reader(poly) #open shpfile
    sr = sf.shapeRecords()
    poly_filename, ext = path.splitext(poly)
    inFile_filename = os.path.splitext(os.path.basename(inFile))[0]
    pbar = ProgressBar(len(sr)) # set progressbar
    if chunkSize == None:
        points = [(p.x,p.y) for p in lasfile.File(inFile,None,'r')]
        for i in xrange(len(sr)):
            pbar.update(i+1) # progressbar
            verts = np.array(sr[i].shape.points,float)
            record = sr[i].record[0]
            index = nonzero(points_inside_poly(points, verts))[0]
            if len(index) >= MinPoints:
                file_out = open("{0}_{1}_{2}.txt".format(poly_filename, inFile_filename, record), "w")
                inside_points = [lasfile.File(inFile,None,'r')[l] for l in index]
                for p in inside_points:
                    file_out.write("%s %s %s %s %s %s %s %s %s %s %s" % (p.x, p.y, p.z, p.intensity,p.return_number,p.number_of_returns,p.scan_direction,p.flightline_edge,p.classification,p.scan_angle,record)+ "\n")
                file_out.close()
    else:
        for i in xrange(len(sr)):
            pbar.update(i+1) # progressbar
            verts = np.array(sr[i].shape.points,float)
            record = sr[i].record[0]
            f = lasfile.File(inFile,None,'r')
            file_out = open("{0}_{1}_{2}.txt".format(poly_filename, inFile_filename, record), "w")
            TotPoints = 0
            while True:
                chunk = list(islice(f,chunkSize))
                if not chunk:
                    break
                points = [(p.x,p.y) for p in chunk]
                index = nonzero(points_inside_poly(points, verts))[0]
                TotPoints += len(index) #add points to count inside th plot
                chunk = [chunk[l] for l in index]
                for p in chunk:
                    file_out.write("%s %s %s %s %s %s %s %s %s %s %s" % (p.x, p.y, p.z, p.intensity,p.return_number,p.number_of_returns,p.scan_direction,p.flightline_edge,p.classification,p.scan_angle,record)+ "\n")
            if TotPoints >= MinPoints:
                file_out.close()
            else:
                file_out.close()
                os.remove("{0}_{1}_{2}.txt".format(poly_filename, inFile_filename, record))
            f.close() 
```

unutbu 建议的脚本是：

```
import shapefile
import os
import glob
from os import path
import numpy as np
from numpy import nonzero
from matplotlib.nxutils import points_inside_poly
from itertools import islice
from liblas import file as lasfile
from shapely.geometry import Polygon
from progressbar import ProgressBar
import multiprocessing as mp

inFile ="C://04-las_clip_inside_area//prova//Ku_115_class_Notground_normalize.las"
poly ="C://04-las_clip_inside_area//prova//ku_115_plot_clip.shp"
chunkSize = None
MinPoints = 1

def pointinside(record):
    verts = np.array(record.shape.points, float)
    record = record.record[0]
    index = nonzero(points_inside_poly(points, verts))[0]
    if len(index) >= MinPoints:
        outfile = "{0}_{1}_{2}.txt".format(poly_filename, inFile_filename, record)
        with open(outfile, "w") as file_out:
            inside_points = [lasfile.File(inFile, None, 'r')[l] for l in index]
            for p in inside_points:
                fields = (p.x, p.y, p.z, p.intensity, p.return_number,
                          p.number_of_returns, p.scan_direction, p.flightline_edge,
                          p.classification, p.scan_angle, record)
                file_out.write(' '.join(map(str, fields)) + "\n")

sf = shapefile.Reader(poly) #open shpfile
sr = sf.shapeRecords()
poly_filename, ext = path.splitext(poly)
inFile_filename = os.path.splitext(os.path.basename(inFile))[0]
pbar = ProgressBar(len(sr)) # set progressbar
if chunkSize == None:
    points = [(p.x,p.y) for p in lasfile.File(inFile,None,'r')]
    for i in xrange(len(sr)):
        pbar.update(i+1) # progressbar
        proc = mp.Process(target = pointinside, args = (sr[i], ))
        proc.start()
        proc.join() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T11:30:17.893

释放用于临时计算的内存[的唯一可靠方法是在子进程中运行该计算。](https://stackoverflow.com/questions/1316767/how-can-i-explicitly-free-memory-in-python/1316799#1316799)当子进程结束时，内存将被释放。

如果您将外循环中的代码移动到一个函数中（我们称之为它`work`），那么您可以使用该模块`work`在子进程中运行：`multiprocessing`

```
import sys
import os
import time
import itertools
import multiprocessing as mp
import numpy as np
import matplotlib.nxutils as nx
import liblas
import shapefile

clock = time.clock if sys.platform == 'win32' else time.time

def LAS2TXTClipSplitbyChunk(inFile, poly, chunkSize = 1, MinPoints = 1):
    sf = shapefile.Reader(poly) #open shpfile
    sr = sf.shapeRecords()
    poly_filename, ext = os.path.splitext(poly)
    for record in sr:
        inFile_filename = os.path.splitext(os.path.basename(inFile))[0]
        record_num = record.record[0]        
        out_filename = '{0}_{1}_{2}.txt'.format(
            poly_filename, inFile_filename, record_num)
        pool.apply_async(pointinside,
                         args = (record, out_filename, inFile, chunkSize, MinPoints),
                         callback = update)

def pointinside(record, out_filename, inFile, chunkSize, MinPoints):
    start = clock()
    record_num = record.record[0]   
    verts = np.array(record.shape.points, float)
    f = iter(liblas.file.File(inFile, None, 'rb'))
    result = []
    worth_writing = False
    for chunk in iter(lambda: list(itertools.islice(f, chunkSize)), []):
        points = [(p.x, p.y) for p in chunk]
        index = nx.points_inside_poly(points, verts)
        chunk = [p for inside, p in itertools.izip(index,chunk) if inside]
        for p in chunk:
            fields = (p.x, p.y, p.z, p.intensity, p.return_number,
                      p.number_of_returns, p.scan_direction, p.flightline_edge,
                      p.classification, p.scan_angle, record_num)
            result.append(' '.join(map(str, fields)))
        if len(result) >= bufferSize:
            # Writing to disk is slow. Doing it once for every iteration is
            # inefficient.  So instead build up bufferSize number of lines
            # before writing them all to disk.
            worth_writing = True
            with open(out_filename, 'a') as file_out:
                file_out.write('\n'.join(result)+'\n')
            result = []
    # In case there were some results (less than bufferSize lines), we
    # dump them to disk here.
    if (len(result) >= MinPoints) or worth_writing:
        with open(out_filename, 'a') as file_out:
            file_out.write('\n'.join(result)+'\n')
    f.close()                    
    end = clock()
    return end-start

def update(result):
    with open(debug_filename, 'a') as f:
        f.write('{r}\n'.format(r = result))

if __name__ == '__main__':
    workdir = 'C://04-las_clip_inside_area//prova//'
    # workdir = os.path.expanduser('~/tmp/tmp')
    os.chdir(workdir)
    inFile = 'Ku_115_class_Notground_normalize.las'
    poly = 'ku_115_plot_clip.shp'
    debug_filename = 'debug.dat'
    chunkSize = None
    MinPoints = 1
    bufferSize = max(MinPoints, 100)

    pool = mp.Pool()
    LAS2TXTClipSplitbyChunk(inFile, poly, chunkSize, MinPoints)
    pool.close()
    pool.join() 
```

* * *

以下是每项任务完成所需时间的图表：

```
In [129]: import matplotlib.pyplot as plt

In [130]: import numpy as np

In [131]: x = np.genfromtxt('debug.dat')

In [132]: plt.plot(x)
Out[132]: [<matplotlib.lines.Line2D object at 0xe309b4c>]

In [133]: plt.show() 
```

![在此处输入图像描述](../Images/0d89b8bedf1e5e3affe56613adcc1d28.png)

我没有看到任何渐进式的放缓。也许试试这个代码。

# cqrs - Eventstore 调度标志在重新启动时设置为 true

> ID：12872248
> 
> 赞同：0
> 
> 时间：2012-10-13T10:29:59.707
> 
> 标签：cqrs, neventstore

我正在使用 JOliver 的 EventStore，现在我正在使用同步调度程序，这样当命令进入时，它会由我的命令处理程序处理，然后保存在事件存储中，然后我的事件处理程序更新我的读取模型。在这个阶段我没有使用 NServiceBus，但我希望稍后介绍它。我的 eventstore 数据库和 readmodel 在同一台机器上。

我注意到的是，如果在我的事件处理程序中引发异常（并且因为我没有使用 DTC），则事件将在事件存储中提交，并且调度标志设置为 false。这是我所期望的，但是当我重新启动服务器时，该标志设置为 true，但从未调用事件处理程序代码。

任何想法为什么会发生这种情况？

我假设任何未调度的事件都会被调度，或者在事件存储代码中会有一些重试机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:30:10.380

如果我没记错的话，一旦事件被存储，调度标志设置为 false 应该发生。通常，在启动应用程序时，您会像这样初始化事件存储：

```
var storeEvents = Wireup.Init()
                  ...
                  .DispatchTo(new DelegateMessageDispatcher(dispatcher.dispatchCommit)
                  .Build(); 
```

该标志在此操作发生*dispatcher.dispatchCommit*之前设置为 false，并且在此操作成功后设置为 true。

您不与聚合中的事件处理程序混淆吗？

```
public void Apply(MystuffDone evt)
{
   //code...
} 
```

# python - pyQt，Qt中的图像按钮

> ID：12872251
> 
> 赞同：0
> 
> 时间：2012-10-13T10:30:17.460
> 
> 标签：python, qt, pyqt

我创建了一个小部件（Qlabel），它使用像素图显示图像。现在，我想在该图像上添加几个按钮（基本上，在包含像素图的小部件上，即 Qlabel）

请参考附图。

![在此处输入图像描述](../Images/14bd3355ce57153f82f3619e17be1a17.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:32:00.253

图像是否必须在 Qlabel 之上？

我会将所需的图像设置为容器类型小部件的背景。可能是一个框架，然后将按钮放在框架上。

另外看看 Qt Creator，我过去用 pyqt 做过一些 GUI 工作，这确实帮助我快速构建 gui 并将其与代码分开。

# java - 验证 Base64 编码的字符串

> ID：12872256
> 
> 赞同：2
> 
> 时间：2012-10-13T10:31:25.103
> 
> 标签：java, string, base64, encode

对于以下代码，当我尝试对字符串进行 base64 编码时。

```
import org.apache.commons.codec.binary.Base64;

public class Codec {
  public static void main(String[] args) {
      String clrTxt = "Hello world";
      String encodedTxt;

      encodedText = new String(Base64.encodeBase64(clearText.getBytes()));
      System.out.println("Encoded: " + encodedText);
      System.out.println("Decoded:" 
          + new String(Base64.decodeBase64(encodedText.getBytes())));
      //    
      // output :
      //   Encoded: **SGVsbG8gd29ybGQ=**
      //   Decoded:Hello world      
  }
} 
```

在编码的字符串中，当我尝试插入一些额外的字符时，比如说 --> "SGVsb* **G8ASDFASDFASDFASDFASDF1234234** *gd29ybGQ=" -> 我得到一个包含一些变音字符的明文。有没有一种方法可以验证和克服这一点。请回复。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T10:57:14.173

您自己验证 base-64 字符串的能力非常有限：只要编码的字符串具有正确的长度（即长度，包括尾随等号，可以被四整除）并且字符串仅包含正确的 base64字符，它被认为是一个有效的字符串。

如果您需要防篡改您的消息，您需要准备一段额外的数据来描述原始文本，并将其与您的 base64 编码数据一起传递到目的地。在最简单的情况下，它可能是文本的校验和，但这种方案很容易被击败。更好的方法是使用[加密哈希函数](http://en.wikipedia.org/wiki/Cryptographic_hash_function)准备原始文本的*摘要*，并将该摘要与 base64 编码的文本一起传递到目的地。

请记住，传递摘要不会阻止[中间人攻击](http://en.wikipedia.org/wiki/Man-in-the-middle_attack#Defenses_against_the_attack)，因为攻击者可以发送他自己的摘要以及被篡改的消息。

# php - 页面重定向时会话变量丢失

> ID：12872257
> 
> 赞同：1
> 
> 时间：2012-10-13T10:31:33.763
> 
> 标签：php, session

> **可能重复：**
> [在 php 中页面重定向后会话丢失](https://stackoverflow.com/questions/3023353/session-lost-after-page-redirect-in-php)

帮助，我将长度为 771 的字符串值存储在会话变量中。问题是当我进行页面重定向时，会话变量变为空，字符串值丢失。有人可以帮忙吗？代码示例：

```
$_SESSION['text'] = $text; //$text is a string of length 771
header('location:index.php');
exit; 
```

我已经在使用会话的每个页面上都有 session_start() 。问题来自字符串的长度。当我在会话变量中存储一个长度较短的字符串时，我能够在重定向时成功检索它。但是，一旦字符串的长度达到 500，我就无法再检索它

# css - 悬停时如何更改图标列表的对齐方式

> ID：12872259
> 
> 赞同：0
> 
> 时间：2012-10-13T10:31:36.357
> 
> 标签：css

我有一些问题对齐图标列表。

从下图中可以看出，有一个图标列表。悬停时，当前图标会自行放大。

我想要做的是，改变当前图标放大的方向。我希望列表与图片右侧显示的方式对齐。

这是代码：

```
HTML code:
<div class="bar">
  <li>
    <a href=""><img src="..." /></a>
    <a href=""><img src="..." /></a>
    <a href=""><img src="..." /></a>
    <a href=""><img src="..." /></a>
    <a href=""><img src="..." /></a>
  </li>
</div>

CSS code:
.bar {
    position: absolute;
    left: 5px;
    width: 35px;
    height: auto
    }

.bar li a img {
    position: relative;
    height: 30px;
    width: 30px;
    padding-top: 4px;
    padding-bottom: 4px
    }

.bar li a:hover img {
    position: relative;
    height: 50px;
    width: 50px
    } 
```

![在此处输入图像描述](../Images/f9f25316dfbe2d6b8d2abe8481154996.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:39:47.433

```
bar li a img {
    float: right;
} 
```

应该做的伎俩。你可以为你的问题创建一个 jsFiddle 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:47:30.613

这是你想要的**[演示](http://jsbin.com/ugojih/1/edit)**

您需要`float:right`用于 img

```
.bar li a img {
    float: right;
} 
```

并增加 div 的宽度

```
.bar {
    width: 50px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:32:57.440

[添加](http://jsfiddle.net/NGLN/5PRct/)：

```
.bar li a img { 
    right: -20px;
}  
.bar li a:hover img { 
    right: 0;
} 
```

# php - 将生成的 html 发送到 php 脚本

> ID：12872260
> 
> 赞同：1
> 
> 时间：2012-10-13T10:31:56.653
> 
> 标签：php, html, send

我已经有了这个脚本

```
<FORM method="POST" name="ajax" action="#">  
<INPUT type="submit" class="env_buttn" value="<?php echo "Generate"; ?>"            
ONCLICK="gen_data()">
<div id="data_gen"> 
    // generated html to be sent to check.php
 </div>
 </FORM> 
```

我想要做的是将 div 中生成的 html 发送到另一个 php 脚本 check.php 。我曾想过添加另一个按钮，但我不知道如何正确执行。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:35:23.253

`<div>`如果您希望它与`<textarea>`表单一起提交，请 替换为：

```
<form method="post" name="ajax" action="#">
    <input type="submit" class="env_buttn" value="Generate" onclick="gen_data()">
    <textarea name="data_gen">
    </textarea>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:36:52.433

要从元素内部获取 html，请在 javascript 中执行以下操作：

```
var html = document.getElementById('data_gen').innerHTML 
```

所以这至少是你问题的一部分......你想用html做什么？

假设你想做 ajax 风格的东西......只需将此函数添加到按钮的 onclick 事件中：

```
function event_calls_this()
{
    var html = document.getElementById('data_gen').innerHTML;
    jQuery.ajax(
    {
        url       : 'blah/check.php',
        data      : {the_html:html},
        type      : 'POST',
        success   : function(data)
        {
            //do what you need to do with the response
        }
    }
} 
```

一个浮现在脑海中的问题是：你到底想做什么？用户是否以某种方式填写了 div？如果是，那怎么办？我很确定改变你的策略会产生一个更优雅的解决方案，但我不确定具体细节......所以，如果这不能解决你的问题，你能给我们一些背景信息吗？

# c# - 在 C# 中建模 mongodb 子集合

> ID：12872262
> 
> 赞同：2
> 
> 时间：2012-10-13T10:32:30.950
> 
> 标签：c#, mongodb, mongodb-.net-driver

我正在尝试通过 C# 驱动程序对子集合进行建模，但我发现这样做很困难；你能帮我做这件事吗，或者一些完整的例子吗？

我正在努力实现这一目标；

```
{
id:"id", name: 'name', Tokens:[{name:"yes",expiry:'Today'}, {name:"Hello", expiry:"tomorow"}]
} 
```

我已经为这样的课程建模

```
Class sample
{
    [BSON]
    public string id{get; set;}
    public string name{get; set;}
    public TokensCollection[] tokens(get; set;} 
} 

public class TokensCollection
{
    public string name{get;set;}
    public string expiry{get;set;}
} 
```

在存储库中，我试图像这样初始化它，

```
Sample sample1 = new Sample{
id = ObjectId.GenerateNewId().ToString();
name = "name";
//Best way to model this? any pointers?
for (int index =1; index <=2; index++)
{
    tokens[index].name = "me";
    tokens[index].expiry = "Today"
}

collection.insert(sample1); 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:33:18.397

[我最初在MongoDb CSharp Google Group](https://groups.google.com/d/msg/mongodb-csharp/vxY4M9YQ2d4/UUrYvh6ogo0J)上回答了您的问题，这里是任何有类似问题的人的示例；

```
using System;
using System.Collections.Generic;
using System.Linq;

using MongoDB.Bson;
using MongoDB.Bson.Serialization.Attributes;

using MongoDB.Driver;
using MongoDB.Driver.Linq;

namespace Test.ConsoleApp
{

public class Sample
{

    [BsonId]
    public ObjectId Id { get; private set; }
    public string Name { get; set; }
    public List<Token> Tokens { get; set; }

    public Sample()
    {
        Id = ObjectId.GenerateNewId();
        Tokens = new List<Token>();
    }

}

public class Token
{
    public string Name { get; set; }
    public string Expiry { get; set; }
}

public class Program
{
    static void Main(string[] args)
    {
        var server = MongoServer.Create("mongodb://localhost/database?safe=true");
        var database = server.GetDatabase("test");
        var samplesCollection = database.GetCollection<Sample>("samples");

        Console.WriteLine("Creating Sample #1 ... ");

        var sample1 = new Sample();
        sample1.Name = "Sample #1";
        sample1.Tokens.Add(new Token() { Name = "Name #1", Expiry = "Today" });

        Console.WriteLine("Creating Sample #2 ... ");

        var sample2 = new Sample();
        sample2.Name = "Sample #2";
        sample2.Tokens.Add(new Token() { Name = "Name #2", Expiry = "Tomorrow" });
        sample2.Tokens.Add(new Token() { Name = "Name #3", Expiry = "Next Tuesday" });

        Console.WriteLine("Saving Sample #1 and #2 ... ");

        samplesCollection.Save(sample1);
        samplesCollection.Save(sample2);

        Console.WriteLine("Fetching Sample #1 and #2 ... ");

        var sampleOneFromDb = samplesCollection.AsQueryable<Sample>().Where(c => c.Name.Contains("Sample #1"));

        Console.WriteLine("Sample #1 From DB - {0}", sampleOneFromDb.ToJson());
        Console.ReadLine();

    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:20:38.480

好吧，我设法找到了答案。我使用 IList 而不是使用 Array 并像这样初始化对象，

在示例类中有几个变化

```
 Class Sample
    {
.....

public List<TokensCollection> tokens{get; set;}
} 
```

并使用

```
Sample sample1 = new Sample()
{

.....

tokens = new List<TokensCollection>{
new TokensCollection(){name='name1', expiry ='expiry1'},
new TokensCollection(){name='name2', expiry ='expiry2'}
}

} 
```

它应该像魅力一样插入您的 Embedded Collection 文档。如果您想添加更多文档，您应该使用

```
tokes.add(new TokensCollection(){name='name3', expiry='expiry3}) 
```

祝一切顺利

# javascript - How to set minimum height of data element of series in stacked bar chart?

> ID：12872269
> 
> 赞同：3
> 
> 时间：2012-10-13T10:33:11.773
> 
> 标签：javascript, highcharts

I need to know how to set min height of data element of series. Eg:-If i have series [1000,400,200,500,10] and my Y-Axis max height is 1000..but when it will plot graph the height of last element of series "10" will be very small or negligible....i want to set condition that whatever the data of series the max height while ploting graph is 10 px. how to do it??? Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:38:36.280

Take a look at the `min` and `max` properties of the axis, like:

```
 yAxis: {
        min: 0,
        max: 3,
        title: {
            text: 'Total fruit consumption'
        }
    } 
```

Example taken from here: [http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/bar-stacked/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/bar-stacked/)

API Documentation of the `min` option on an axis is availble here: [http://api.highcharts.com/highcharts#yAxis.min](http://api.highcharts.com/highcharts#yAxis.min)

API Documentation of the `max` option on an axis is availble here: [http://api.highcharts.com/highcharts#yAxis.max](http://api.highcharts.com/highcharts#yAxis.max)

# c++ - 一个指针的两行字符串

> ID：12872272
> 
> 赞同：2
> 
> 时间：2012-10-13T10:33:36.143
> 
> 标签：c++, sql, c, sqlite

> **可能重复：**
> [如何在 C / Objective-C 中将字符串文字拆分为多行？](https://stackoverflow.com/questions/797318/how-to-split-a-string-literal-across-multiple-lines-in-c-objective-c)

有时我必须编写几个由 char 变量指向的 SQL 语句，例如：

```
const char* sql="CREATE TABLE GenInf ( EmpName TEXT NOT NULL, Pyrll TEXT PRIMARY KEY,  DtBrth TEXT,  PlBrth TEXT, CID TEXT,  ContNo  TEXT,   JnDt TEXT,   Postn TEXT, Dept TEXT, AnnLv TEXT, EmrgLv TEXT, Irr TEXT, HmTwn TEXT, F1 TEXT, F2 TEXT ); CREATE TABLE Training( Pyrll TEXT NOT NULL, Crs TEXT, Dt TEXT, Plc TEXT, Cst TEXT);"; 
```

但它很长，我怎么能把它放在两行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T10:35:50.040

C 和 C++ 中的字符串文字可以并排放置，因此这与您的代码*完全相同：*

```
const char* sql="CREATE TABLE "
    "GenInf ( EmpName TEXT NOT NULL, Pyrll TEXT PRIMARY KEY,  "
    "DtBrth TEXT,  PlBrth TEXT, CID TEXT,  ContNo  TEXT,   "
    "JnDt TEXT,   Postn TEXT, Dept TEXT, AnnLv TEXT, "
    "EmrgLv TEXT, Irr TEXT, HmTwn TEXT, F1 TEXT, F2 TEXT ); "
    "CREATE TABLE Training( Pyrll TEXT NOT NULL, Crs TEXT, "
    "Dt TEXT, Plc TEXT, Cst TEXT);"; 
```

我更喜欢这个`\`解决方案，因为换行符处的空格更容易看到，你可以随意缩进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T10:36:52.327

你可以这样写：

```
const char * sql =
    "CREATE TABLE GenInf ( EmpName TEXT NOT NULL, Pyrll TEXT PRIMARY KEY,"
    "DtBrth TEXT,  PlBrth TEXT, CID TEXT,  ContNo  TEXT,   JnDt TEXT,   " 
    "Postn TEXT, Dept TEXT, AnnLv TEXT, EmrgLv TEXT, Irr TEXT, HmTwn TEXT, "
    "F1 TEXT, F2 TEXT ); "
    "CREATE TABLE Training( Pyrll TEXT NOT NULL, Crs TEXT, Dt TEXT, Plc "
    "TEXT, Cst TEXT);"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T12:06:33.120

有2种方式：

1）只需编写多个字符串，然后 C++ 将它们链接为一个字符串：

```
char* c =
    "1234567890"
    "ABCDEFGHIJK";
assert( strcmp(c, "1234567890ABCDEFGHIJK") == 0 ); 
```

2) 以 a 结尾`\`，后跟 a`\n`

```
char* c = "0123456789\
ABCDEFGHIJK";
assert( strcmp(c, "1234567890ABCDEFGHIJK") == 0 ); 
```

请注意，在第二种情况下，第二行之前的空格将被合并到字符串中！

# iphone - Stopping a table cell highlighting on selection,

> ID：12872273
> 
> 赞同：2
> 
> 时间：2012-10-13T10:34:00.210
> 
> 标签：iphone, objective-c, ios

When a table cell is selected it gets highlighted in a blue color. I'd like to prevent this happening.

I tried doing this

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
[tableView deselectRowAtIndexPath:indexPath animated:NO];
} 
```

But it goes blue for a second before the blue disappears. Is there a way I can avoid it appearing blue? I'd like to do something custom to the table cell instead.

Many Thanks, -Code

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T10:35:52.447

`UITableViewCell` has three selection styles:-

1.  Blue

2.  Gray

3.  None

Implementation is as follows:-

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *) indexPath {

     [cell setSelectionStyle:UITableViewCellSelectionStyleNone];       
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T10:45:57.813

您还可以在 xcode 的属性检查器中将单元格选择指定为无、蓝色或灰色

![在此处输入图像描述](../Images/f2a72c3e06637dd165e869de4bee0628.png)

# java - why won't my sorting algorithm work?

> ID：12872276
> 
> 赞同：5
> 
> 时间：2012-10-13T10:34:15.360
> 
> 标签：java

code should do this: a) Given an unsorted array of integers, your task is to sort the array by applying the following algorithm (Assume that the input doesn’t contain duplicates ): Execute the following steps starting from the first element in the array: – Count the number of smaller elements to find the correct position i. – If the element is in its correct position, move to the succeeding element. – Otherwise, swap the current element with the one found in position i. – Repeat the previous steps till you reach the last element.

Example: 5 7 3 6 9 check a[0], there is one element smaller that it, so it shoould be swapped with the element at position1. 7 5 3 6 9 check the new element a[0]. it should move to position 3. 6 5 3 7 9 check the new element a[0]. it should move to position 2. 3 5 6 7 9 check the new element a[0]. it is in its correct position, so we move to the succeeding element a[1].

```
public class  Assignment1_T11_25_2729_Sara_Aly {
private int[] a;
private int max;
private int n;
int position=0;
public  Assignment1_T11_25_2729_Sara_Aly (int max){
    a= new int[max];
}
public void insert(int x){
    a[n]=x;
    n++;
        }
public void sort(){
    int out=0, smaller=0;
    while(out<n){
        for(int in=out+1;in<n;n++){
            if(a[in]<a[out])
                smaller++;
        }
        if (smaller==0){
            out++;
        }
        else {
            swap(a[out], a[smaller]);
        }
    }
    }
private void swap (int one, int two){
    int temp=a[one];
    a[one]=a[two];
    a[two]=temp;
}
    public void display(){
        for (int i=0;i<n;i++){
            System.out.print(a[i]+ " ");
        }
        System.out.println("");
    }
public static void main(String[]args){
    int maxsize=5;
    Assignment1_T11_25_2729_Sara_Aly trial;
    trial= new  Assignment1_T11_25_2729_Sara_Aly(maxsize);
    trial.insert(5);
    trial.insert(7);
    trial.insert(3);
    trial.insert(6);
    trial.insert(9);
    trial.display();
    trial.sort();
    trial.display();
}
}

    Tried a few algorithims to get it to work but for some reason it won't sort any suggestions?? 
```

also tried this the sorting method but no luck.

```
public void sort(){
boolean finished = false;
int position =0;
    while (position<max){
        if (finished==true){
        position++;
        finished =false;
        }
        else {
            int smaller=0;
            for (int j = position+1; j<max; j++){
            int temp=a[position];
                if (a[j] <a[position]){
                    smaller++;
                }
            }
            if (smaller==0){
                finished= true;
            }
            else {
                int temp= a[smaller];
                a[smaller]=a[position];
                a[position]=temp;
                }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:40:14.437

Though you have not described exactly what the problem is, I would assume that, in your `first code`, the `for-loop` inside the `while` loop of your `sort` method is giving you a problem: -

```
 for(int in = out+1; in < n; n++) {
        if(a[in] < a[out])
            smaller++;
    } 
```

Here, you are incrementing `n++` rather than `in++`. Check onto that. Change it to `in++`. You might be getting into infinite loop because of that.

Also, there is a problem in your `swap` method. You have invoked your `swap` method with actual array element, but you are considering them as `indices` in the method.

```
swap(a[out], a[smaller]);  // Called with element `a[out]`

private void swap (int one, int two) {

    int temp=a[one];    // This is equivalent to a[a[out]]
    a[one]=a[two];
    a[two]=temp;
} 
```

You can just pass index to your method: -

So, invoke your swap method like : - `swap(out, smaller);`

**UPDATE**: -In your `while` loop of `sort` method, add `smaller = 0;` as the first statement. To re-initialize it to 0.

# php - Split comma separated value from table column into rows using mysql?

> ID：12872277
> 
> 赞同：2
> 
> 时间：2012-10-13T10:34:27.937
> 
> 标签：php, mysql

I found the [post](https://stackoverflow.com/questions/1096679/can-mysql-split-a-column) which has the column with 3 values seperated by commas. I will have more than 3 values seperated by commas . For example,

```
ID    CITY_ID
--------------
1     12,18,16,17,35
2     12,16
....
-------------- 
```

Is it possible to split string city_id and make it into rows using mysql query like below

```
 ID   CITY_ID
  -------------
   1    12
   1    18
   1    16
    ....
   2    16
    ....
  -------------- 
```

If yes, Kindly give some advice ....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-16T11:27:55.460

尝试这个

```
 SELECT ID,SUBSTRING_INDEX(SUBSTRING_INDEX(t.CITY_ID, ',', n.n), ',', -1) value
  FROM Table1 t CROSS JOIN 
  (
   SELECT a.N + b.N * 10 + 1 n
     FROM 
    (SELECT 0 AS N UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) a
   ,(SELECT 0 AS N UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) b
    ORDER BY n 
   ) n
 WHERE n.n <= 1 + (LENGTH(t.CITY_ID) - LENGTH(REPLACE(t.CITY_ID, ',', '')))
 ORDER BY ID,value 
```

**[小提琴演示](http://sqlfiddle.com/#!2/3ca19c/1)**

输出：

* * *

```
ID  VALUE
1   12
1   16
1   17
1   18
1   35
2   12
2   16 
```

# php - index.php file was damaged. did someone hacked me

> ID：12872279
> 
> 赞同：0
> 
> 时间：2012-10-13T10:34:44.107
> 
> 标签：php

Yesterday, I visited my website as a normal visitor and everything was fine, but today when I tried to do, I got this message: "Access Denied.". So I checked it via FTP and found the index.php file damaged, and it was impossible to download it.

I don't understand this behavior? Does that make sense? is not it possible that someone has stolen my files using hacking techniques.

PS: I change my FTP password every time I finished with.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:37:35.350

Your index.php was probably overwritten by an unsafe PHP script. Check all files which handle file uploads. Control that they only allow saving into certain predefined folders and that file names with `..` or `/` is not allowed. For example, check with [`realpath`](http://php.net/realpath) that the file destination is not outside the folder you decided.

# java - 使用 checkstyle 格式化代码

> ID：12872283
> 
> 赞同：2
> 
> 时间：2012-10-13T10:35:27.287
> 
> 标签：java, eclipse, checkstyle

我刚刚在eclipse中安装了checkstyle。它的工作原理是在您放置断点的屏幕部分显示适当的错误。但是，我只是想知道它是否真的会为您格式化代码并确实添加空注释等供您填写？

如果是这样，你如何让它做到这一点。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T10:39:28.890

不，checkstyle 不格式化代码，它只识别不同类型的违规行为。您可以将[Jalopy](http://jalopy.sourceforge.net/)配置为根据您的 checkstyle 配置进行格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T19:34:54.903

Checkstyle 是一个静态代码分析工具。它不进行格式化。

然而 Eclipse 有一个预装的 Java Code Formatter。在这里查看详细信息： [http ://www.ralfebert.de/blog/eclipseide/source_formatting/](http://www.ralfebert.de/blog/eclipseide/source_formatting/)

# c#-4.0 - 如何使用 c# 在文本框中自动生成数字值，文本框中的数字从 2001 年开始？

> ID：12872303
> 
> 赞同：-4
> 
> 时间：2012-10-13T10:36:53.767
> 
> 标签：c#-4.0

```
public partial class Form1 : Form
{
    int billno=2000;
    string code;
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        billno = Convert.ToInt32(code);
        billno = billno + 1;
        textBox1.Text = " "+ billno;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:18:23.087

试试这个

```
public partial class Form1 : Form
{
    static int billno=2000;
    string code;
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        billno = billno + 1;
        textBox1.Text = billno.ToString();

    } 
```

这里`billno`将在每个表单加载事件上增加 1。

# mysql - 查询分组并创建分组总计

> ID：12872306
> 
> 赞同：2
> 
> 时间：2012-10-13T10:37:36.263
> 
> 标签：mysql, sql, group-by

我的桌子是这样的

```
id 查看国家/地区    
1 44 安
2 43 安
3 899 乙
4 242 安
5 3204乙
等等

```

我想计算一个国家发生了多少次。

例如，在上述情况下，国家 A 发生了 3 次。因此，对于我的查询，我希望能够正确显示每条记录发生的次数，但除了计数之外，我还想添加视图。在上述情况下，我希望国家 A 发生 3 次，并且视图的总和为`44 + 43 + 242 = 329`，但我的查询仅显示第一个视图输出：`44`。

这是我的查询

```
 SELECT count( * ) value, country, concat( country , '_', views ) prod 
 FROM tableA
 GROUP BY prod 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:40:26.660

```
SELECT country, COUNT(*), SUM(views) FROM tableA GROUP BY country 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/fa3e4/1/0)上查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:45:39.337

```
SELECT
    count( * ) value, 
    country, 
    concat(country , '_', SUM(views)) prod 
FROM
    tableA 
GROUP BY country 
```

# c# - 从 DateTime 到 Int ？（1 = 1900 年 1 月 1 日，Excel）

> ID：12872310
> 
> 赞同：-1
> 
> 时间：2012-10-13T10:38:03.277
> 
> 标签：c#, excel, datetime

> **可能重复：**
> [如何将 Excel 序列日期号转换为 .NET DateTime？](https://stackoverflow.com/questions/727466/how-do-i-convert-an-excel-serial-date-number-to-a-net-datetime)

我想找到一种将 DateTime 转换为 Int 的简单方法，其中`01/01/1900`为 1（在 Excel 的 xmls 中使用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:43:29.753

这是一个内置的转换：

```
int excelDays = (int)(yourDate.ToOADate()); 
```

请注意，0**不是**1/1/1900，而是 12/31/1899。由于试图避免处理闰年规则的 Lotus 123 程序员采取的捷径，这很糟糕。1900 年不是闰年。必须与 Lotus 兼容是 Excel 开始时的要求，当时*每个人都*使用 Lotus 123。StackExchange 的 CEO Joel Spolsky 在这篇[博](http://www.joelonsoftware.com/items/2006/06/16.html)文中写了一篇关于这个 bug 的精彩战争故事。相关部分是“这是 Excel 中的一个错误！” 我惊呼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:00:06.060

这是我从上面编译想法后的建议：

```
 private Nullable<int> ToInt1900ForExcel(DateTime DT)
    {
        if (DT.Ticks < 599266080000000000)//Below 1900-1-1, Excel has some problems representing dates, search it on the web.
            return null;
        if (DT.Ticks < 599317056000000000)//Excel reproduced a bug from Lotus for compatibility reasons, 29/02/1900 didn't actually exist.
            return (int)(DT.ToOADate()) - 1;
        return (int)(DT.ToOADate());
    } 
```

或者如果您愿意（负值和零在 Excel 中无法正常工作）

```
 private int ToInt1900ForExcel(DateTime DT)
    {
        if (DT.Ticks < 599317056000000000)//Excel reproduced a bug from Lotus for compatibility reasons, 29/02/1900 didn't actually exist.
            return (int)(DT.ToOADate()) - 1;
        return (int)(DT.ToOADate());
    } 
```

# php - 通过zend_acl 的本地javascript 文件？

> ID：12872314
> 
> 赞同：0
> 
> 时间：2012-10-13T10:38:38.460
> 
> 标签：php, zend-framework, zend-acl

将我的 zend Web 应用程序移动到 linux 服务器后，当我的布局尝试包含一个 javascript 文件时，我遇到了一个奇怪的问题：-

```
<?php echo $this->headScript()
 ->appendFile('/js/jquery/jquery.jqDock.min.js'); ?> 
```

代码通过我的 zend_acl 工厂：-

```
if($objAcl->isAllowed($role, $request->getModuleName() .'::'.$request->getControllerName() .'::' .$request->getActionName(), 'view')){
     //carry on with loading....
} 
```

请求对象如下所示：-

```
$request->module = 'ajfit'
$request->controller = 'js'
$request->action = 'jquery'
$request->_baseUri = '/js/jquery/jquery.jqDock.min.js' 
```

当上面的代码被单步执行时，应用程序会抛出这个异常：-

```
$ex->message = "Resource 'ajfit::js::jquery' not found" 
```

我当然知道我没有将此资源添加到我的 $objAcl zend_acl 中，并且我知道我不允许访问它，而且我不想这样做。这是一个存在于 /public/js/jquery/ 中的本地资源，应被绕过并视为非 mvc 资源。

当此应用程序在 Windows 中运行时，它识别出 '/js/jquery/jquery.jqDock.min.js' 是本地资源并且没有通过 zend_acl。

我的配置中是否缺少某些内容，也许是我的 .htaccess 文件中的设置？

我戴着这个把头发拉出来。

谢谢。

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:51:53.287

一定是你的.htaccess 有问题，你有那些行吗？

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

如果是，您的 apache 是否配置为允许使用 htaccess？

# php - SQL INSERT INTO - 我很困惑

> ID：12872315
> 
> 赞同：0
> 
> 时间：2012-10-13T10:38:57.907
> 
> 标签：php, mysql

我一直有一个小问题……看看这个插入语句。

这是我的连接（在本地服务器上）

```
$c2d = mysqli_connect("localhost","root","","database name here")or die("connection not set" . mysqli_error); 
```

这是我的插入语句，也是我通常的做法。

```
$insertUsrAccDetQS = "INSERT INTO user-tbl-here (usern, usrp, usere) VALUES ('x','y','z');" or die('no good on 001' . mysqli_error); 
```

当我在上面使用它时，我得到了这种性质的错误......

```
 Notice: Use of undefined constant mysqli_error - assumed 'mysqli_error' 
```

不管我对它做了什么改变（已经做了大约一个小时），它总是给我一些错误，所以我对自己说，“*让我在 phpMyadmin 应用程序中手动插入，这样我就可以看到方法IT 编写 SQL INSERT 代码，将 SQL 复制/粘贴到我的应用程序中，看看会发生什么。* ”

当我这样做时，phpMyadmin 退回给我的返回的 INSERT 代码是

```
$insertUsrAccDetQS = "INSERT INTO `database name here`.`user-tbl-here` (`usern`, `usrp`, `usere`) VALUES ('$x','$y','$z');" or die('no good on 001' . mysqli_error); 
```

果然，我复制/粘贴到我的 PHP 文档中，运行它并且它工作，值被输入到数据库中。

我能看到的唯一区别是

**1** - phpMyAdmin 将数据库名称放在查询字符串的其余部分前面

和

**2** - 它在该字符串中的所有名称/值上加上引号。

但是我确实在连接声明中命名了数据库名称，并且我使用了插入语句，就像我上面的原始语句一样，它总是有效的。

所以问题是......什么给了？我也在网上大量查看其他人`INSERT`的陈述/表格，例如，在这个[wiki](http://en.wikipedia.org/wiki/Insert_%28SQL%29)中，它是按照我一直在做的方式形成的。

我超级困惑。我很乐意感谢任何解释/链接/提示等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T10:42:34.467

在 mysqli_error 末尾添加括号，因为它是一个函数，而不是变量，像这样：

```
or die('no good on 001' . mysqli_error() );
                                       ^----- HERE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T10:42:49.573

mysqli_error 是一个函数吗？如果是这样，它需要括号 - **mysqli_error()**

# ios - iOS泄漏：谁负责？

> ID：12872318
> 
> 赞同：1
> 
> 时间：2012-10-13T10:39:29.920
> 
> 标签：ios, memory, memory-leaks, instruments

我正在使用泄漏仪器分析我的应用程序，并且我有一些泄漏。如果我查看负责的库列，我只能看到一些框架库（主要是 ImageIO）。我想知道是否有办法知道泄漏是来自我的代码还是与框架本身有关。例如，如果我选择了一个泄漏并且我查看了堆栈跟踪的扩展细节，那么就没有对我的代码的引用（见下图）

![在此处输入图像描述](../Images/561f35932c7ca68feeff186e7ff9495f.png)

我对此有点困惑，可能我没有看到对我的代码的任何引用，但泄漏与它有某种关系？如果是的话，发现谁在泄漏的最佳策略是什么？

欢迎任何帮助/建议/教程

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T10:59:47.983

正如您在图像中看到的，只需更改以下设置：

选择调用树，然后在左侧检查：反转调用树，隐藏系统库和仅显示 Obj-c

现在，如果您遇到泄漏，那么您可以提示您的代码在哪里泄漏

![在此处输入图像描述](../Images/4788226fb2bff49fb6ac9cde92f9df97.png)

# c# - 是否可以通过我在 Google Chrome 中的测试运行来捕获并记录所有可能发生的 JS 错误

> ID：12872322
> 
> 赞同：1
> 
> 时间：2012-10-13T10:40:12.457
> 
> 标签：c#, javascript, selenium

我在 C# 中使用 Selenium WedDriver。

有没有办法捕获和记录我在 Google Chrome 中的测试运行可能发生的所有 JS 错误？

例如 Firefox 的“JSErrorCollector” - [http://mguillem.wordpress.com/2011/10/11/webdriver-capture-js-errors-while-running-tests/](http://mguillem.wordpress.com/2011/10/11/webdriver-capture-js-errors-while-running-tests/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T08:47:20.950

现在我们有了相同的 Chrome 插件。它在这里 - [https://github.com/dharria/ChromeJSErrorCollector](https://github.com/dharrya/ChromeJSErrorCollector)

它与 JSErrorCollector 非常相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-07T13:02:51.497

正如 Simeon Sinichkin 所提到的，ChromeJSErrorCollector 在这里非常有用。对于 C# 中的其他任何人，这里有一些示例代码来获取 JS 错误并将它们记录到文件/控制台：

```
var options = new ChromeOptions();
options.AddExtension("ChromeJSErrorCollector.crx");
var driver = new ChromeDriver(options);

// run tests...

var javascriptDriver = driver as IJavaScriptExecutor;
var errors = javascriptDriver.ExecuteScript("return window.JSErrorCollector_errors ? window.JSErrorCollector_errors.pump() : []");
var writer = new StreamWriter("jsErrors.log");
var collection = errors as ReadOnlyCollection<object>;
foreach (var item in collection)
{
    var errorObject = item as Dictionary<string, object>;
    foreach (var field in errorObject)
    {
        Console.WriteLine(field.Key + " - " + field.Value);
        writer.WriteLine(field.Key + " - " + field.Value);
    }

    Console.WriteLine("-------------------");
    writer.WriteLine("-------------------");
}
writer.Flush();
writer.Close(); 
```

输出如下所示：

```
errorMessage - Error: Script error
http://requirejs.org/docs/errors.html#scripterror
lineNumber - 1795
pageUrl - http://someURL
sourceName - http://someURL/Scripts/require.js
------------------- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:15:35.213

我可能会在这里偏离基地，因为我从未使用过 Selenium，因此可能无法完全理解上下文：但您可以使用它[`window.onerror`](https://developer.mozilla.org/en-US/docs/DOM/window.onerror)来捕获浏览器中发生的任何错误，然后对它们执行某些操作（将它们发送到数据库或日志文件，也许）。

请注意，这不仅限于 JavaScript 错误，还可能包括一些 HTTP 错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T13:36:35.257

使用 chrome 开发人员工具（ctrl+shift+i）并查看控制台选项卡是否有错误。

Chrome 还允许您在代码的某些行上设置断点并查看变量的所有值。

# javascript - HTML 输入表单和 Javascript

> ID：12872328
> 
> 赞同：3
> 
> 时间：2012-10-13T10:41:06.773
> 
> 标签：javascript, html, forms, google-maps

我有一个带有按钮的简单 HTML 输入表单。拳头我添加了javascript，因此可以通过按Enter键提交表单，而不仅仅是通过单击按钮。那工作得很好。之后我添加了 javascript，因此当输入某个关键字时，用户会被重定向到其他 URL。这就是问题所在。用户在按下按钮时会正常重定向，但是当我按下回车键时，它会引导我进入 404 页面。这是我的代码：

```
<script type="text/javascript">
<!--
function enter(e){
    if(e.keyCode == 13)
        Login();
}
//-->
</script>

 <script type="text/JavaScript">
 <!--
 function Login(){
 var keyword=document.getElementById("address").value;
 var done=0;
 keyword=keyword.toLowerCase();
 keyword=keyword.split(' ').join('');
 if (keyword=="example,example") { window.location="http://www.example.com"; done=1; }
 if (keyword=="example1") { window.location="http://www.example1.com"; done=1; }
 if (keyword=="example2") { window.location="http://www.example2"; done=1; }
 if (done==0) { codeAddress(); }
 }
 //-->
 </script> 

<form name="enterkeyword" action="none">
    <input name="keyword" id="address" type="text"  onkeypress="return enter(event);"/>
    <div class="buttons">
    <button type="button" onclick="Login()">Submit</button>
    </div>
    </form> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:48:04.660

改变：

```
<script type="text/javascript">
<!--
function enter(e){
    if(e.keyCode == 13)
        Login();
}
//-->
</script> 
```

到

```
<script type="text/javascript">
<!--
function enter(e){
    if(e.keyCode == 13)
    {
        Login();
        return false;
    }
}
//-->
</script> 
```

# .htaccess - how to rewrite and add a new parameter in .htaccess

> ID：12872329
> 
> 赞同：0
> 
> 时间：2012-10-13T10:41:10.897
> 
> 标签：.htaccess, mod-rewrite

i want rewrite a url to another using mod_rewrite.. but i want to preserve the query parameters and and POST data even after the rewrite. And i want to add a new parameter to the url when rewriting it... For example

This -> [http://example.com/test/?user=234343](http://example.com/test/?user=234343)

To -> [http://example.com/othertest/user=234343&new_param=CUSTOM_VALUE](http://example.com/othertest/user=234343&new_param=CUSTOM_VALUE) //i'll just type this value in the .htaccess file

It will be very helpful if anyone could show me an example how to do it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:49:55.473

未经测试，但尝试：

```
RewriteRule     ^test/?user=([0-9]+)$ /othertest/user/$1&new_param=CUSTOM_VALUE [L] 
```

# javascript - how to make line-break tag work in html when added dynamically

> ID：12872330
> 
> 赞同：3
> 
> 时间：2012-10-13T10:41:17.723
> 
> 标签：javascript, html

I am facing a problem where I want a line break
tag added dynamically in the code never works after the first tag which is anchor I want every link added dynamically should go on new line

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script>
function addAnchorNode(){
    var link = document.createElement('a');
    link.setAttribute('href', 'http://Google.co.uk');
    link.innerHTML = "Hello, Google!";

    document.body.appendChild(link);
    document.body.appendchild(document.createElement('br')); //Never Works
}
</script>
</head>

<body>
<button onclick="addAnchorNode()">Click me</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T10:46:10.823

你必须在你的 BR 之后有一些东西，并且没有错字（“appendChild”，而不是“appendchild”）。

这有效：

```
function addAnchorNode(){
    var link = document.createElement('a');
    link.setAttribute('href', 'http://Google.co.uk');
    link.innerHTML = "Hello, Google!";

    document.body.appendChild(document.createElement('br'));
    document.body.appendChild(link);
} 
```

[示范](http://jsfiddle.net/rsNqt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-21T10:51:46.280

上面的代码是正确的，问题是“appendChild”，请在下面找到工作代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script>
function addAnchorNode(){
    var link = document.createElement('a');
    link.setAttribute('href', 'http://Google.co.uk');
    link.innerHTML = "Hello, Google!";

    document.body.appendChild(link);
    document.body.appendChild(document.createElement("br"));
    //document.body.appendchild(document.createElement('br')); //Never Works
}
</script>
</head>

<body>
<button onclick="addAnchorNode()">Click me</button>
</body>
</html> 
```

# alchemy - FlasCC 中的 Hello World - 第一次在 WIndows 中运行 FlasCC

> ID：12872334
> 
> 赞同：2
> 
> 时间：2012-10-13T10:42:27.900
> 
> 标签：alchemy, flascc

我正在阅读 README.html 说明。

它说：

1.  将 ZIP 文件的内容解压缩到您的硬盘上。可以将其解压缩到硬盘上的任何位置，但本自述文件假定它位于 C:\flascc\
2.  确保安装了 64 位 Java (http://www.java.com/getjava)
3.  确保 Java 在您的 PATH 上 (http://www.java.com/en/download/help/path.xml)
4.  下载 Flex SDK（有些教程需要 Flex 4.6 或更高版本才能编译。）
5.  下载 Flash Player 的调试器版本（仅当您想使用 GDB 调试代码时才需要）
6.  双击 run.bat 文件
7.  通过编译第一个教程来检查 FlasCC 是否正常工作：
    1.  cd 01_HelloWorld
    2.  制作 FLASCC=/path/to/sdk FLEX=/path/to/flex
    3.  启动 hello.swf 文件

我不确定第 2 步。64 位 Java 是否可以在 32 位 Windows 7 上运行？这是否意味着我不能使用 FlasCC？这是否也意味着我无法运行使用 FlasCC 的应用程序？

其余的步骤是小菜一碟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:51:28.473

我在官方论坛上找到了答案：

> 我不认为您可以在 32 位系统上安装 64 位 java。
> 
> 如果您将 FlasCC 与 32 位 java（推荐的 java 是 64 位）一起使用，由于需要内存，某些示例将无法工作。您可以尝试通过将 –jvmopt=-Xmx1024m 传递给 gcc/g++ 命令来减少内存堆分配。

HTH，高拉夫

归功于 Gaurav Jain

# python - Python/Eclipse can't import MatPlotLib

> ID：12872336
> 
> 赞同：1
> 
> 时间：2012-10-13T10:42:38.910
> 
> 标签：python, matplotlib

I'm trying to install MatPlotLib for Python (OS X) using [this guide](https://stackoverflow.com/questions/4092994/unable-to-install-matplotlib-on-mac-os-x). The guide seems to work fine: in fact if I open a terminal and I start a Python session, the command `import matplotlib` works. But if I try to do the same with Eclipse, it doesn't work and the IDE can't resolve the import.

I'm a newbie in Python programming, so if you have any advice I'll be really thankful.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:28:19.437

PYTHONPATH 是我的猜测。弄清楚如何在 eclipse 中为环境设置 pythonpath 并确保它包含 matplotlib 所在的任何位置。

# c - C语言。数组的声明，其大小由宏 #define 给出

> ID：12872342
> 
> 赞同：0
> 
> 时间：2012-10-13T10:42:54.483
> 
> 标签：c, arrays, macros, declaration, c-preprocessor

我想知道为什么当我尝试使用`#define`我从编译器中得到错误来声明数组时，而使用文字而不是大小允许我这样做。

### some_name.h：

```
#define size 10;

int* waitingBench[size]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T10:45:48.537

您所拥有的将被预处理为：

```
int* waitingBench[10;];
//                  ^ notice this guy! 
```

从 中删除分号`#define`。

（并且`size`是一个非常糟糕的标识符`#define`。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T10:45:37.323

`;`从您的定义中删除。正如您目前拥有的那样，这与`int* waitingBench[10;];`您知道是不正确的相同。

宏定义不是 C 指令，因此它们不需要以分号结尾（并且它们不能超过一行，除非使用了续行反斜杠，并且它们不能与其他东西共享该行）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T10:45:46.673

消除 ”;” 到底：

```
#define size 10 
```

# android - 使用标签登录到 facebook（facebook 集成）后如何移动另一个活动？

> ID：12872343
> 
> 赞同：0
> 
> 时间：2012-10-13T10:43:15.733
> 
> 标签：android

嗨，我正在使用整个应用程序中的选项卡为应用程序工作。在该特定选项卡中集成了 facebook 和 twitter.its 单击 facebook 按钮后，它显示 facebook 的登录屏幕和登录成功也可以正常工作，但是登录完成后我想重定向到另一个活动，我在 onComplete() 中使用了以下代码

```
 View view = Socialtab.group.getLocalActivityManager()  
                       .startActivity("Items", new Intent(Social.this,MainActivity.class)
                       .putExtra("name", name)
                       .putExtra("email", email)
                       .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))  
                       .getDecorView();
                    Socialtab.group.replaceView(view); 
```

它在以下行显示异常

```
.startActivity("Items", new Intent(Social.this,MainActivity.class) 
```

我的logcat错误如下：

```
 java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.karmakexpo/com.karmakexpo.MainActivity}: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()

at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1618)   
at android.app.ActivityThread.startActivityNow(ActivityThread.java:1524)

at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)

at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)    
at com.karmakexpo.Social.jsonParsing(Social.java:353)   
at com.karmakexpo.Social$SampleRequestListener.onComplete(Social.java:258)  
at com.karmakexpo.facebook.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:238)

Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()

at android.os.Handler.<init>(Handler.java:121)
at android.app.Activity.<init>(Activity.java:698)

at com.karmakexpo.MainActivity.<init>(MainActivity.java:56)

at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1409) at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1610)
... 6 more 
```

我用谷歌搜索并没有得到任何解决方案请提供解决方案提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:48:08.240

尝试使用 runOnUiThread ：

```
 Social.this.runOnUiThread(new Runnable() {

    @Override
    public void run() {
     // TODO Auto-generated method stub
                    View view = Socialtab.group.getLocalActivityManager()  
               .startActivity("Items", new Intent(Social.this,MainActivity.class)
               .putExtra("name", name)
               .putExtra("email", email)
               .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))  
               .getDecorView();
               Socialtab.group.replaceView(view); 
    }
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:55:25.533

您需要在主 UI 线程中运行代码。

试试这个

```
Looper.prepare();  // Initialize the current thread as a looper. This gives you a chance to create handlers that then reference this looper, before actually starting the loop. 

 View view = Socialtab.group.getLocalActivityManager()  
               .startActivity("Items", new Intent(Social.this,MainActivity.class)
               .putExtra("name", name)
               .putExtra("email", email)
               .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))  
               .getDecorView();
               Socialtab.group.replaceView(view); 
Looper.loop(); 
```

# php - 呼应' ' 保留断点与断字的冲突

> ID：12872350
> 
> 赞同：1
> 
> 时间：2012-10-13T10:44:56.963
> 
> 标签：php, mysql, css

我想从 TEXT 列中回显 mysql 数据，并保留中断。我曾经`<pre>`这样做过，但这会忽略`style="word-break:break-word;"`

伪示例：

```
<?php echo '<pre>'; ?>
<div style="width: 100px; word-break:break-word">
LonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglong

LonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglong
</div>
<?php echo '</pre>'; ?> 
```

（div里面的文字是从mysql里拉出来的）

`break-word;`在此示例中将不起作用，因为文本是用`<pre>`标签包裹的。**如何保留原始文本的换行符，但在显示时诱导分词？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T10:47:47.507

使用[nl2br](http://php.net/manual/en/function.nl2br.php)功能。`<br/>`它会在需要新行时添加标签。

```
<div style="width: 100px; word-break:break-word">
    <?php echo nl2br($yourVeryLongTextWithLineBreaks); ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:48:14.127

您可以使用`wordwrap`将线喙插入长字符串，特别是如果它们没有像您的示例那样的空间

```
$longText = 'LonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglongLonglonglong';
echo wordwrap($longText, 8, "<br />\n",true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T10:48:26.477

尝试这个;

```
<?php echo '<pre style="width:100px; word-wrap:break-word;">'; ?>
//some code
<?php echo '</pre>'; ?> 
```

# data-structures - 用于快速查找和插入递增整数键的内存中树/索引结构

> ID：12872355
> 
> 赞同：0
> 
> 时间：2012-10-13T10:45:36.633
> 
> 标签：data-structures, tree, b-tree, avl-tree, red-black-tree

**背景：**我将插入大约十亿个键值对。我需要一个内存索引，我可以使用它同时查找（唯一的，64 位整数）键的（32 位整数）值。没有更新，没有删除，没有遍历。键通常随着时间逐渐增加。

什么索引结构最适合处理这个问题？

我能想到的要求是：

*   由于密钥的增加，它需要进行有效的再平衡
*   它需要有效地使用内存以适应内存，最好 < 28GB
*   它需要有非常有效的查找

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:15:32.240

对于这个问题，可能没有比简单的排序向量更有效的数据结构了。（实际上，考虑到对齐问题并根据访问特性，您可能希望将键和值放在单独的向量中。）但是存在许多实际问题，特别是如果您不知道数据会有多大。如果您确实知道这一点，或者如果您准备预先分配太多空间，然后如果您获得的数据超出该空间的容量，那么这很好，尽管您仍然需要担心保持向量的排序。

一种可能更好的方法是保留索引范围的二叉搜索树，其中 BST 的叶子指向数据的“块”（即向量）。（这本质上是一棵[B+ 树](http://en.wikipedia.org/wiki/B%2B_tree)。）簇可以相当大；我会说一些你希望在几分钟内收到的数据量，或者几千个条目。它们不必都是相同的大小。（B+-树的扇出通常比这小，但由于您的数据“大部分是排序的”，您应该能够使用更大的。不要让它太大；唯一的一点是减少开销并可能缓存——鞭打。）

由于您的数据“大部分已排序”，因此您可以将数据累积一段时间，将其保存在普通的有序映射中（假设您有这样的东西），甚至使用插入排序保存在向量中。当这个缓冲区变得足够大时，您可以将其作为单个块附加到主数据结构中，重新分区最后一个块以处理重叠。

如果您有理由确定您很少会得到乱序键，那么将保留第二个常规 BST 乱序数据元素。任何不能通过重新分区新的块和前一个最后一个块来容纳的元素都可以添加到这个 BST 中。要进行查找，您需要在主结构和无序结构之间进行并行查找。

如果您偏执或对无序数据的数量不够确定，只需使用标准的 B+-tree 插入算法，该算法包括创建具有一点保留但未使用空间的块以允许插入（百分之几；您想避免空间开销），并在必要时拆分一个块。

# windows - 切换两个特定文件（或文件夹）的名称

> ID：12872367
> 
> 赞同：0
> 
> 时间：2012-10-13T10:46:22.543
> 
> 标签：windows, vbscript, batch-file

我需要切换本地驱动器上特定路径中存在的两个特定文件的名称，并想知道 .bat 或 .vbs 是否可以实现这一点。

换句话说，**一旦**执行脚本将“文件 A”与“文件 B”（“C:\Path A\File A.txt”与“C:\Path A\File B.txt”）交换并**再次**运行它将再次交换它们。

我也很想知道是否可以这样做：

1) 在这种情况下 -->> "C:\Some Path\File A.txt" 和 "D:\Some Other Path\File B.txt"

和

2）如果我想切换两个文件夹而不是两个文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T04:13:28.457

创建以下批处理文件并将其命名为您想要的任何名称。我正在使用名称“myRename.bat”。

```
:: myRename.bat
@echo off
SETLOCAL

:: verify the first file exists
if not exist "%~1" ( echo ERROR: File not found "%~1" & goto endofscript )

:: verify the second file exists
if not exist "%~2" ( echo ERROR: File not found "%~2" & goto endofscript )

:: Create a guaranteed unique string for temporarily naming one file
set instance=%date:~-4,4%%date:~-10,2%%date:~-7,2%
set instance=%instance%-%time:~0,2%%time:~3,2%%time:~6,2%%time:~9,2%
set instance=%instance%-%RANDOM%

:: rename the first file to a temporary name
ren "%~1" "%~nx1.%instance%"
:: rename the second file to the first file name
ren "%~2" "%~nx1"
:: rename teh first file to the second file name
ren "%~1.%instance%" "%~nx2"

:endofscript 
```

假设此路径中存在这两个文件：

*   c:\temp\重命名 test\File A.txt
*   c:\temp\重命名测试\文件 B.txt

然后您可以运行以下命令，它们将交换名称：

```
myRename "c:\temp\Rename test\File A.txt" "c:\temp\Rename test\File B.txt" 
```

如果未找到文件 A 或文件 B，则会在屏幕上报告该错误并且进程停止。

# probability - 给定概率的样本

> ID：12872368
> 
> 赞同：1
> 
> 时间：2012-10-13T10:46:35.550
> 
> 标签：probability, discrete-mathematics

我偶然发现了一个基本的离散数学/概率问题，我想获得一些改进我的解决方案的想法。

假设给你一个集合（字母、自然数等）。您如何确保`X`以给定的概率从该集合中提取某个值`P`？

我将用一个例子来解释我的幼稚解决方案：

```
Collection = {A, B}
X = A, P = 1/4 
```

我们构建一个数组`v = [A, B, B, B]`并使用一个`rand`函数对数组的索引进行统一采样，即`{0, 1, 2, 3}`

这种方法有效，但效率不高： 越小`P`，存储的内存越大`v`。因此，我想知道 stackoverflow 社区在改进这方面可能有什么想法。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T10:55:29.563

将区间 [0,1] 划分为不相交的区间，其并集为 [0,1]。创建每个分区的大小以对应于选择每个事件的概率。然后简单地从 [0,1] 中随机抽样，评估结果所在的分区，然后查找对应于该区间的选择。在您的示例中，这将导致以下 2 个间隔 [0,1/4) 和 [1/4,1] - 从 [0,1] 生成随机统一值。如果您的样本位于第一个区间，那么您的选择`X = A`，如果在另一个区间，那么`X = B`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:30:57.953

您提出的解决方案确实不是很好，解决它的最通用和最有效的方法是 mathematician1975 状态（这被称为逆 CDF 方法）。对于您的具体问题，即多项抽样，您还可以使用从二项分布中抽取的一系列数据从您的集合中进行抽样。如果您不熟悉采样方法，这通常更直观。

如果集合中第一项的概率为 p_1，则在区间 [0-1] 内均匀采样。如果样本小于 p_1，则返回第 1 项。否则，将剩余结果重新归一化 1-p_1，并使用下一个可能的结果重复该过程。在每次不成功的抽样后，将剩余结果按被拒绝结果的总概率重新归一化，使剩余结果的总和为 1。如果得到最后一个结果，则以概率 1 返回它。该过程的结果将是随机样本分布根据您的原始向量。

该方法使用多项式的各个分量是二项式分布的事实，并且多项式的任何子向量也是多项式，其参数由我上面描述的重整化给出。

# operating-system - 操作系统如何知道进程的执行时间

> ID：12872370
> 
> 赞同：2
> 
> 时间：2012-10-13T10:47:04.013
> 
> 标签：operating-system

我正在重新访问操作系统 CPU 作业调度，突然想到一个问题，操作系统如何在执行之前知道进程的执行时间，我的意思是在 SJF（最短作业优先）等调度算法中，执行时间如何过程是先验计算的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:51:24.640

来自维基百科：

`Another disadvantage of using shortest job next is that the total execution time of a job must be known before execution. While it is not possible to perfectly predict execution time, several methods can be used to estimate the execution time for a job, such as a weighted average of previous execution times.[1]`

更多关于[http://en.wikipedia.org/wiki/Shortest_job_next](http://en.wikipedia.org/wiki/Shortest_job_next)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-03T11:18:27.997

此外，操作系统可以通过首先计算其 CPI 来计算每个任务所需的总时间。

**（CPI：每条指令的周期数）**

每项工作都有一个加权平均 CPI。例如，浮点指令比定点指令重得多，这意味着它们需要更多的时间来执行。因此，处理定点操作的工作：如添加或增量被认为更短。因此，在最短的作业中，它应在上述作业之前执行。

# c - fcntl 未检测到套接字 fd 上的错误文件描述符

> ID：12872372
> 
> 赞同：0
> 
> 时间：2012-10-13T10:47:29.050
> 
> 标签：c, sockets, fcntl

`fcntl(sockfd,F_GETFD,0)`没有检测到错误的文件描述符，而`select`在同一个 sock fd 上会给出错误的文件描述符错误。

# mysql - 内存关系数据库

> ID：12872377
> 
> 赞同：2
> 
> 时间：2012-10-13T10:47:50.693
> 
> 标签：mysql, linux, redis, tmpfs

我知道这个问题在stackoverflow中被问了多次。我发布这个问题是为了找出我的设计的最佳选择。我的工作详细信息有以下架构。

```
_unique_key        varchar(256) NULL
_job_handle        varchar(256) NULL
_data              varchar(1024) NULL
_user_id           int(11) NULL
_server_ip         varchar(39) NULL
_app_version       varchar(256) NULL
_state             int(11) NULL
_is_set_stopped    bool 
```

我们在这张表上做了什么操作：

1.  对于每个作业，我们将在此表上进行一次更新和 10 次选择查询。所以我们需要高频读写。
2.  有许多应用程序通过对以下内容进行过滤来操作此表：

    1.  _unique_key
    2.  _状态
    3.  is_set_stopped
    4.  _用户身份
3.  _data 字段大小从 5KB 到 1 MB 不等，具体取决于应用程序和用户的类型。
4.  应用程序可以更新选择性属性。

我们认为的解决方案：

**MySQL InnoDB**

由于对高读写的要求，我认为 MySQL 的扩展性不够。

**内存表中的 MySQL**

这个解决方案的问题是

1.  它不支持动态字段大小。MEMORY 表使用固定长度的行存储格式。VARCHAR 等可变长度类型使用固定长度存储。来源[http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)
2.  select for .... update 它将锁定整个表。不知道会不会有问题。

**雷迪斯**

Redis 看起来是个不错的选择。但我认为我的表不适合键值缓存服务器。

1.  它只支持一组数据类型。我只能在列表中存储字符串。我需要将字段存储为 JSON 或其他格式。
2.  如果客户端想要更新特定属性，他们需要下载完整值，然后解析对象并重新推送到服务器。 **可能是我错了有没有办法做到这一点？**
3.  无法根据值进行过滤。 **可能是我错了有没有办法做到这一点？**

**TMPFS 文件系统上的 MySQL InnoDB**

这看起来很有希望。但是不要不，它的扩展性足够类似于内存表中的 Redis 或 MySQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T11:59:24.350

在这个问题中，您将原始性能（即效率）与可扩展性混淆了。它们是不同的概念。

在 InnoDB 和内存引擎之间，InnoDB 可能是最具可扩展性的。InnoDB 支持多版本并发控制，有很多优化来处理争用，所以它处理并发访问比内存引擎好得多。即使在某些 I/O 绑定情况下它可能会更慢。

Redis 是一个单线程服务器。所有的操作都是序列化的。它具有零可扩展性。这并不意味着它效率低下。相反，它可能会支持比 MySQL 更多的连接（由于其基于 epoll 的事件循环）和更多流量（由于其非常高效的无锁实现和内存数据结构）。

为了回答你的问题，我会尝试使用 InnoDB 的 MySQL。如果配置正确（没有同步提交、足够的缓存缓冲区等），它可以维持良好的吞吐量。而不是在 tmpfs 上运行它，我会考虑 SSD 硬件。

现在，如果您更喜欢使用 Redis（顺便说一句，它不是关系存储），您当然可以这样做。无需系统地序列化/反序列化您的数据。如果您可以预测所有访问路径并找到适合的数据结构，那么过滤确实是可能的。

例如：

*   每个作业一个哈希对象。密钥是_unique_key。散列的字段应与关系表的列相对应。
*   每个状态值一组
*   2 套 is_set_stopped
*   每个用户 ID 值一组

对于每个作业插入，您需要流水线化以下命令：

```
HMSET job:AAA job_handle BBB data CCC user_id DDD server_ip EEE app_version FFF state GGG is_set_stopped HHH
SADD state:GGG AAA
SADD is_set_stopped:HHH AAA
SADD user_id:DDD AAA 
```

只要您维护相应的集合，您就可以轻松地单独更新任何字段。

您可以通过与集合相交来执行过滤查询。例如：

```
SINTER is_set_stopped:HHH state:GGG 
```

使用 Redis，瓶颈很可能是网络，尤其是在数据字段很大的情况下。我希望您将拥有比 1MB 更多的 5KB 工作。例如，1 MB 对象的 1000 次写入/秒表示 8 GBits/秒，可能超过您的网络可以承受的速度。Redis 和 MySQL 都是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:25:06.487

我建议使用 postgresql，它比 mysql 功能更强大（具有更多功能和对复杂查询和数据类型的更好支持），并且有很多调整选项。

如果你给 postgresql 足够的内存并正确调整参数，它会将所有内容缓存在内存中。

或者，如果这是您的偏好，您也可以在 tmpfs 上使用它，并使用流复制到磁盘数据库进行硬拷贝。

流复制有 3 种异步操作模式，接收时和 fsync 时。如果您使用第一个异步，您不必等待同步到复制服务器上的磁盘，因此使用 tmpfs 的任何更新都会非常快。

由于您似乎还有很多文本字段，因此另一个功能可能会有所帮助，postgresql 可以将文本搜索向量存储在一行上，您可以在其上添加索引并通过触发器使用您的所有行的连接内容更新它正在搜索。在对多列进行文本搜索时，与您可以在 mysql 中编写的任何方式相比，这将给您带来令人难以置信的性能提升。

**无论您使用什么数据库**：

您说 _data 是 varchar[1024]，但您说它包含 5K 到 1M 的数据？这实际上是一个blob吗？即使是长度错误，mysql 也不支持长度超过 65535 字节的 varchar 字段！我想它没有像其他行那样更新，将它分成两个表可能是明智的，一个带有静态数据，另一个带有动态数据，以最大程度地减少磁盘访问。

# python - 如何删除二叉搜索树的所有节点

> ID：12872387
> 
> 赞同：1
> 
> 时间：2012-10-13T10:49:42.233
> 
> 标签：python, algorithm, binary-tree, binary-search-tree

我正在尝试编写代码来删除BST的所有节点（每个节点只有三个属性，左，右和数据，没有父指针）。下面的代码是我想出的，它只删除树的右半部分，保持左半部分不变。如何修改它以便也删除左半部分（这样最终我只剩下既没有左子树也没有右子树的根节点）？

```
def delete(root):
    global last
    if root:
     delete(root.left)
     delete(root.right)
     if not (root.left or root.right):
        last = root
     elif root.left == last:
        root.left = None
     else:
        root.right = None 
```

其次，任何人都可以建议使用堆栈或其他相关数据结构的迭代方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T10:58:28.507

如果要删除两个子树，则无需递归。只需设置`root.left`并`root.right`让`None`垃圾收集器处理它们。实际上，与其一开始`delete`就创建一个函数，不如直接设置`root = None`并完成它！

**编辑：**如果您需要对数据值运行清理代码，如果 GC 做得不够，您可能希望通过树递归来获取所有这些值。拆除树中的链接实际上并不是必需的，但我也会这样做：

```
def delete(node):
    if node:
        node.data.cleanup() # run data value cleanup code

        delete(node.left)   # recurse
        delete(node.right)

        node.data = None    # clear pointers (not really necessary)
        node.left = None
        none.right = None 
```

您还询问了遍历树的迭代方法，这有点复杂。这是一种使用`deque`（作为堆栈）来跟踪祖先的遍历方法：

```
from collections import deque

def delete_iterative(node):
    stack = deque()
    last = None

    # start up by pushing nodes to the stack until reaching leftmost node
    while node:
        stack.append(node)
        node = node.left

    # the main loop
    while stack:
        node = stack.pop()

        # should we expand the right subtree?
        if node.right && node.right != last: # yes
            stack.append(node)
            node = node.right

            while node: # expand to find leftmost node in right subtree
                stack.append(node)
                node = node.left

        else: # no, we just came from there (or it doesn't exist)
            # delete node's contents
            node.data.cleanup()

            node.data = None # clear pointers (not really necessary)
            node.left = None
            node.right = None

            # let our parent know that it was us it just visited
            last = node 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T11:36:03.810

Blckknght 关于垃圾收集是正确的，但如果您想做一些比您的示例建议的更复杂的清理或了解您的代码为什么不起作用的情况，我将提供一个额外的答案：

你的问题似乎是`elif node.left == last`支票。

我不确定您的`last`变量用于什么或它背后的逻辑是什么。
但问题是它`node.left`几乎永远不等于（如果两个子节点都已设置为，则`last`仅将节点分配给变量，它们不适用于任何有趣的节点（那些有子节点的节点））。 `last``None`

如果您查看您的代码，您会发现 if`node.left`不等于`last`只有右孩子被设置为`None`，因此只有子树的右部分被删除。

我不知道python，但这应该可行：

```
def delete(node):
    if node:

        # recurse: visit all nodes in the two subtrees
        delete(node.left)           
        delete(node.right)

        # after both subtrees have been visited, set pointers of this node to None
        node.left = None
        node.right = None 
```

（我冒昧地将您的`root`参数重命名为`node`，因为赋予函数的节点不必是树的根节点。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T12:13:40.393

使用堆栈的迭代后序遍历可能如下所示：

```
def is_first_visit(cur, prev):
    return prev is None or prev.left is cur or prev.right is cur

def visit_tree(root):
    if root:
        todo = [root]
        previous = None
        while len(todo):
            node = todo[-1]
            if is_first_visit(node, previous):
                # add one of our children to the stack
                if node.left: 
                    todo.append(node.left)
                elif node.right:
                    todo.append(node.right)
                # now set previous to ourself and continue
            elif previous is node.left:
                # we've done the left subtree, do right subtree if any
                if node.right:
                    todo.append(node.right)
            else: 
                # previous is either node.right (we've visited both sub-trees)
                # or ourself (we don't have a right subtree)
                do_something(node)
                todo.pop()
            previous = node 
```

`do_something`做任何你想称之为“实际删除这个节点”的事情。

您可以更简单地通过在每个节点上设置一个属性来说明它是否已经`do_something`调用它，但显然如果您的节点有`__slots__`或其他什么，并且您不想修改允许标志的节点类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T11:17:52.000

我不确定你在递归调用之后对这些条件做了什么，但我认为这应该足够了：

```
def delete(root):
  if root:
    delete(root.left)
    delete(root.right)

    root = None 
```

正如评论中所指出的，Python 不通过引用传递参数。在这种情况下，您可以像这样在 Python 中进行这项工作：

```
def delete(root):
  if root:
    delete(root.left)
    delete(root.right)

    root.left = None
    root.right = None

Usage:
delete(root)
root = None 
```

至于迭代方法，你可以试试这个。这是伪代码，我不知道python。基本上我们进行BF搜索。

```
delete(root):
  make an empty queue Q
  Q.push(root)
  while not Q.empty:
    c = Q.popFront()
    Q.push(c.left, c.right)
    c = None 
```

同样，如果您将其用作函数，则默认情况下不会修改根，但会删除所有其他节点。您可以在函数调用后将根设置为无，或者删除参数并处理全局根变量。

# jsf - selectManyMenu 转换器与 selectOneMenu 转换器

> ID：12872389
> 
> 赞同：1
> 
> 时间：2012-10-13T10:50:01.537
> 
> 标签：jsf, jsf-2

我有一个用于 selectOneMenu 中列出的专辑实体的转换器，如果有的话，需要进行哪些修改才能将它与 selectManyMenu 一起使用？

非常感谢与 selectManyMenu 一起使用的转换器的工作示例。

**SelectOneMenu 转换器**

```
package converter;

import javax.faces.application.FacesMessage;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;
import javax.faces.convert.FacesConverter;
import javax.persistence.EntityManager;

import entities.Album;

import util.EntityUtil;

@FacesConverter("albumconverter")
public class AlbumConverter implements Converter {

    EntityManager em = EntityUtil.getEntityManager();

     public Object getAsObject(FacesContext context, UIComponent component, String value) {
         if (value == null || value.length() == 0) {
             return null;
         }
            Album album = em.find(
                    Album.class,
                    Long.parseLong(value));
            return album;
     }

     public String getAsString(FacesContext context, UIComponent component, Object value) {

         return value instanceof Album ? 
                 ((Album) value).getAlbumId().toString() : "";
     }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:58:02.397

无需更改。转换器是基于每个项目应用的，而不是基于每个列表/数组的。

# php - php邮件附件不起作用

> ID：12872390
> 
> 赞同：0
> 
> 时间：2012-10-13T10:50:03.637
> 
> 标签：php

我是 php 新手。我从互联网上找到了一个运行正常的脚本。但是当我将附件脚本添加到此文件时，它不再正常工作。

为了使其正常工作，我应该进行哪些更改？

否则，请进行更改以正常工作。

```
<html>
<?php
if($_GET['name']== '' || $_GET['email']=='' || $_GET['Message']=='' )
{
?>

<form action="check2.php" method="get" name="frmPhone"> 
<fieldset> 
<legend style="color:#000">Contact    </legend>  
<table width="100%">
<tr>
<td width="29%">
<label for="name"     <?php if(isset($_GET['Submit']) && $_GET['name']=='') echo "style='color:red'";?>>Name*    </label>     </td>    <td width="71%">
<input id="name" name="name" type="text" style="width:50%" value="    <?php echo $_GET['name'];?>"/>    </td>    </tr>    <tr>    <td>

<label for=" email"     <?php if(isset($_GET['Submit']) && $_GET['email']=='') echo "style='color:red'";?>>Email*    </label>     </td>    <td>
<input id="email" name="email" type="text" style="width:50%" value="    <?php echo $_GET['email'];?>"/>     </td>    </tr>
</table>
</fieldset> 
<fieldset> 
<legend style="color:#000">Inquiry    </legend>  
<table width="100%">
<tr>    <td width="41%" valign="top">

 <label for="Message"     <?php if(isset($_GET['Submit']) && $_GET['Message']=='') echo "style='color:red'";?>>Message*    </label>     </td>    <td width="59%">    <textarea name="Message" rows="5" style="width:90%" id="Message">    <?php echo $_GET['Message'];?>    </textarea>    </td>
  </tr>
  <tr>
    <td>    </td>
    <td align="right">&nbsp;    </td>
  </table>
</fieldset> 

</form>
<td>   
<li id="li_8" >
      <label class="description"      <?php if(isset($_GET['Submit']) && $_GET['uploaded_file']=='') echo "style='color:red'";   ?> for="element_8">Upload your logo     </label>
      <div>
         <input name="uploaded_file" class="element file" type="file"/>
      </div>     <p class="guidelines" id="guide_8">    <small>Upload your logo here. there is a max of 1 mb    </small>    </p>
    </li>          <li id="li_9" >
      <label class="description"     <?php if(isset($_GET['Submit']) && $_GET['uploaded_file']=='') echo "style='color:red'";?> for="element_9">Upload foto 1     </label>
      <div>
        <input name="uploaded_file" class="element file" type="file"/>
      </div>     <p class="guidelines" id="guide_9">    <small>Upload your logo here. there is a max of 1 mb    </small>    </p>
      </li>    <input name="Submit" type="submit" value="Submit" />
</form>    </td>
  </tr>

<?php
}
else
{
$to      = 'yourmail@.com';
$subject = 'Customer Information';
$message = '
Name: '.$_GET['name'].'
Email Address: '.$_GET['email'].'
Message: '.$_GET['Message'];
$uploads_dir = '/uploads';
foreach ($_FILES["uploaded_file"]["error"] as $key => $error) {
if ($error == UPLOAD_ERR_OK) {
    $tmp_name = $_FILES["uploaded_file"]["tmp_name"][$key];
    $name = $_FILES["uploaded_file"]["name"][$key];
    move_uploaded_file($tmp_name, "$uploads_dir/$name");
}
}

$headers = 'From:'.$_GET['email'];

mail($to, $subject, $message, $headers, $uploads_dir);
$connection=mysql_connect("your host", "id", "pass") or die(mysql_error());
mysql_select_db("id") or die(mysql_error());
$query = mysql_query("INSERT INTO  `feedback` (  `name` ,  `email` , `Message` ,  `uploaded_file` ) VALUES ('".$_GET['name']."',  '".$_GET['email']."', '".$_GET['Message']."')");
echo "Thank you! ";
}
?>
</htm> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:54:37.193

您在`mail`添加附件时使用了错误的参数。[在http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)查看`mail()`手册页

附件没那么简单，PHP 的 vanilla`mail`命令并不真正支持它们。如果您想在邮件中提交附件，请考虑使用额外的库，例如`Pear::Mail`： http: [//pear.php.net/package/Mail/redirected](http://pear.php.net/package/Mail/redirected)

当然可以自己实现它，但你必须深入研究 Base64 编码和 MIME。

# asp.net - 从 asp.net 迁移到 MVC 时，我们真的需要 MVC 用户控件吗

> ID：12872392
> 
> 赞同：0
> 
> 时间：2012-10-13T10:51:06.293
> 
> 标签：asp.net, asp.net-mvc

我们正在将 asp.NET 应用程序迁移到 MVC3。我们有一组基本操作，每个操作都包含几个子功能。

项目结构如下——

1.  包含整个站点布局的母版页。
2.  每个基本操作都有一个名为`BasePage1.aspx`
3.  子操作已在用户控件中创建，如 `ucChildOperations.asx`.
4.  操作遵循顺序。因此，在我们用来交换 userControls 的基本页面上`visibility`。
5.  一旦 BasePage1.aspx 操作完成，用户将被重定向到 `BasePage2.aspx`等等..

在迁移到 MVC 期间，我们看不到任何需要`BaseView`. 因此 -

1.  创建共享布局页面。
2.  创建控制器，如`Base1Controller`.
3.  `Models`为每个子操作单独创建。（避免将它们分组为`BaseModles`for `loose coupling`）

在创建视图时，我们计划为每个操作创建视图，`ChildOperation1View ...`

`Base1View`创建基本视图然后放入`MVC userControls`子操作有什么好处？

谢谢您的帮助。

**编辑：** 在 VS2010 中添加新项目模板，列出了一个项目`MVC3 View User Control(ASPX).`

# javascript - 使用 Jquery 将 iframe 调整为内容

> ID：12872394
> 
> 赞同：11
> 
> 时间：2012-10-13T10:51:11.533
> 
> 标签：javascript, jquery, iframe

我正在尝试动态调整 iframe 的大小以适应其内容。为此，我有一段代码：

```
$("#IframeId").height($("#IframeId").contents().find("html").height());​ 
```

它不起作用。是因为跨域问题吗？我怎样才能让它适合？请看 Fiddle：[JsFiddle](http://jsfiddle.net/Eyshx/1/)

ps 我已经设置了链接的html和body`height:100%;`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-13T11:25:34.680

你只需要在 iframe`load`事件上应用你的代码，所以当时高度是已知的，代码如下：

```
$("#IframeId").load(function() {
    $(this).height( $(this).contents().find("body").height() );
}); 
```

请参阅工作[**演示**](http://jsfiddle.net/gnel/kkSSH/)。此演示**适用**于 jsfiddle，因为我已将 iframe url 设置为与 jsfiddle 结果 iframe 相同域中的 url，即`fiddle.jshell.net`域。

**更新**：
@Youss：您的页面似乎出于奇怪的原因没有正确设置正文高度，因此请尝试使用主要元素的高度，如下所示：

```
$(document).ready(function() {
    $("#IframeId").load(function() {
            var h = $(this).contents().find("ul.jq-text").height();
            h += $(this).contents().find("#form1").height();
            $(this).height( h );
        });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-29T05:37:33.173

不知道为什么@Nelson 的解决方案在 Firefox 26 (Ubuntu) 中不起作用，但以下 Javascript-jQuery 解决方案似乎在 Chromium 和 Firefox 中起作用。

```
/**
 * Called to resize a given iframe.
 *
 * @param frame The iframe to resize.
 */
function resize( frame ) {
  var b = frame.contentWindow.document.body || frame.contentDocument.body,
      cHeight = $(b).height();

  if( frame.oHeight !== cHeight ) {
    $(frame).height( 0 );
    frame.style.height = 0;

    $(frame).height( cHeight );
    frame.style.height = cHeight + "px";

    frame.oHeight = cHeight;
  }

  // Call again to check whether the content height has changed.
  setTimeout( function() { resize( frame ); }, 250 );
}

/**
 * Resizes all the iframe objects on the current page. This is called when
 * the page is loaded. For some reason using jQuery to trigger on loading
 * the iframe does not work in Firefox 26.
 */
window.onload = function() {
  var frame,
      frames = document.getElementsByTagName( 'iframe' ),
      i = frames.length - 1;

  while( i >= 0 ) {
    frame = frames[i];
    frame.onload = resize( frame );

    i -= 1;
  }
}; 
```

这会不断调整给定页面上所有 iframe 的大小。

使用[jQuery 1.10.2](http://jquery.com/download/)测试。

使用`$('iframe').on( 'load', ...`只会间歇性地工作。请注意，如果要在某些浏览器`0`中缩小到默认高度以下，则必须首先将大小设置为高度像素。`iframe`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T11:05:43.723

您可以执行以下操作：

*   在 iFrame 中使用 document.parent.setHeight(myheight) 将 iFrame 中的高度设置为父级。这是允许的，因为它是一个子控件。从父级调用函数。

*   在父级中，您创建了一个调整 iFrame 大小的函数 setHeight(iframeheight)。

另请参阅：
[如何使用 Javascript 从 iframe 实现跨域 URL 访问？](https://stackoverflow.com/questions/1378433/cross-domain-url-access-from-iframe-using-javascript)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-31T12:25:59.857

只需在 HTML 标记上执行，即可完美运行

```
$("#iframe").load(function() {
    $(this).height( $(this).contents().find("html").height() );
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-05T07:26:11.670

作为问题的答案，使用已经过时的 jquery（load 已被弃用并替换为 .on('load',function(){}），下面是问题答案的最新代码。

请注意，我使用 scrollHeight 和 scrollWidth，我认为这将比使用提供的答案的 Height 和 Width 加载得更好。它将完全适合，不再滚动。

```
$("#dreport_frame").on('load',function(){

  var h = $('#dreport_frame').contents().find("body").prop('scrollHeight');
  var w = $('#dreport_frame').contents().find("body").prop('scrollWidth');

  $('#dreport_frame').height(h);
  $('#dreport_frame').width(w);
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-23T11:16:46.657

最后，我提供了这个跨域解决方案，它也适用于调整大小......（调整大小不触发：[当 iframe 内容的高度发生变化时自动调整 iframe 高度（相同域）](https://stackoverflow.com/questions/20789198/auto-resize-iframe-height-when-the-height-of-the-iframe-contents-change-same-do/20792282#20792282)）

框架：

```
(function() {
    "use strict";
    var oldIframeHeight = 0,
        currentHeight = 0;
    function doSize() {
        currentHeight = document.body.offsetHeight || document.body.scrollHeight;
        if (currentHeight !== oldIframeHeight) {
            console.log('currentHeight', currentHeight);
            window.parent.postMessage({height:currentHeight}, "*");
            oldIframeHeight = currentHeight;
        }
    }
    if (window.parent) {
        //window.addEventListener('load', doSize);
        //window.addEventListener('resize', doSize); 
        window.setInterval(doSize, 100); // Dispatch resize ! without bug
    }
})(); 
```

父页面：

```
window.addEventListener('message', event => {
    if (event.origin.startsWith('https://mysite.fr') && event.data && event.data.height)  {
        console.log('event.data.height', event.data.height);
        jQuery('#frameId').height(event.data.height + 12);
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-31T12:05:49.463

Adjust height of an iframe, on load and resize, based on its body height.

```
var iFrameID = document.getElementById('iframe2');
var iframeWin = iFrameID.contentWindow;

var eventList = ["load", "resize"];
for(event of eventList) {
    iframeWin.addEventListener(event, function(){ 
        if(iFrameID) {
            var h = iframeWin.document.body.offsetHeight  + "px";
            if(iFrameID.height == h) {
                return false;
            }

            iFrameID.height = "";
            iFrameID.height = iframeWin.document.body.offsetHeight  + "px";

        }   
    })  
} 
```

# iphone - Ad Hoc 应该用于开发 iOS 设备吗？

> ID：12872396
> 
> 赞同：0
> 
> 时间：2012-10-13T10:51:20.787
> 
> 标签：iphone, ios, testing, distribution, adhoc

只是我想将 ipa 文件发送给我的客户以进行测试，我已经搜索了我的问题，但不幸的是我没有找到答案。

当客户想通过iTunes安装ipa文件时，他的iOS设备是否应该在developer.apple.com注册为开发设备？

注意：我已经成功将ipa安装到我的设备上，但我不知道是否完成，因为我的iPhone已经注册了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T11:01:51.213

我会试试 TestFlight。非常容易处理...

[https://testflightapp.com](https://testflightapp.com)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T11:17:33.687

是的，在配置门户下，`Device`您首先需要插入（新）设备的 UDID。

然后，在下面，`Provisioning menu`转到`Distribution tab`. 在那里，要么创建一个新的配置文件，要么编辑一个现有的配置文件。确保设备是配置文件的一部分。

提交新的/修改的配置文件后等待一段时间。几分钟内会出现下载按钮（您需要刷新选项卡）。

从 Safari 下载证书并将其拖放到 Xcode 管理器中或从 Xcode 中下载。

退出 Xcode 并重新打开（有助于避免奇怪的证书问题），然后 Build&Archive

# iphone - NSObject 是一个抽象类吗？

> ID：12872399
> 
> 赞同：0
> 
> 时间：2012-10-13T10:51:35.840
> 
> 标签：iphone, ios, ipad

> **可能重复：**
> [NSObject 是 Objective-C 中的抽象类吗？但是我们可以创建 NSObject 的实例，那么它如何遵循抽象类的规则呢？](https://stackoverflow.com/questions/8585829/is-nsobject-is-abstract-class-in-objective-c-but-we-can-create-instance-of-nsob)

我在一些教程中研究过 NSobject 是一个抽象类。但是当我们创建一个对象并调用方法时，它工作正常。基本上我们不能直接为抽象类创建对象。我们怎么能说它是一个抽象类。

# mysql - 在数据库中提供实体关系？

> ID：12872403
> 
> 赞同：-3
> 
> 时间：2012-10-13T10:52:17.507
> 
> 标签：mysql, sql, database, database-design

我正在设计一个关于在世界各地都有分店的超市或百货公司的数据库。

我有国家和分支机构的名单。有人能帮我将它们链接到数据库中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:04:46.910

像这样的东西？

![在此处输入图像描述](../Images/5bbde6d01bfa1d31b7cee0f62f4b1c7b.png)

当然，您的表将包含更多列来存储其他数据——但这将是基本框架。

或者你到底在问什么？你的问题不是很清楚......

生成这个的 T-SQL 代码（适应 MySQL 应该完全没有问题）：

```
CREATE TABLE dbo.Country
(
    CountryID int NOT NULL,
    CountryName varchar(50) NOT NULL
)

ALTER TABLE dbo.Country 
ADD CONSTRAINT PK_Country PRIMARY KEY CLUSTERED (CountryID)  
GO

CREATE TABLE dbo.State
(
    StateID int NOT NULL,
    StateName varchar(50) NOT NULL,
    CountryID int NOT NULL
)

ALTER TABLE dbo.State 
ADD CONSTRAINT PK_State PRIMARY KEY CLUSTERED (StateID) 

ALTER TABLE dbo.State 
ADD CONSTRAINT FK_State_Country 
FOREIGN KEY(CountryID) REFERENCES dbo.Country(CountryID)
GO

CREATE TABLE dbo.City
(
    CityID int NOT NULL,
    CityName varchar(50) NOT NULL,
    StateID int NOT NULL
)

ALTER TABLE dbo.City 
ADD CONSTRAINT PK_City PRIMARY KEY CLUSTERED(CityID) 

ALTER TABLE dbo.City 
ADD CONSTRAINT FK_City_State 
FOREIGN KEY(StateID) REFERENCES dbo.State(StateID)  
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:11:00.397

如果我理解正确，您需要三个带有 id 的表（国家、城市和州）和一个用于引用国家、城市和州的 id 的超市表。

```
create table country(id int, name varchar);
create table city(id int, name varchar);
create table state(id int, name varchar);
create table supermarket(country int, city int, state int); 
```

# php - 在 TD 标签内调用 PHP 函数

> ID：12872405
> 
> 赞同：0
> 
> 时间：2012-10-13T10:52:28.557
> 
> 标签：php, function, html-table

我有一个小问题。。

```
"<td height=50>" . captcha() . "</td>"; 
```

^ 上面的代码是一个很长的代码，这只是它的一小部分，一切似乎都很好。但是，唯一的问题是验证码（图像，由函数调用）不在 TD 标签中，它完全在表格之外。

无论如何解决这个问题将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:01:23.977

问题是该函数不返回值，而是回显它：

```
function b() {
  echo "b";
}

echo "a" . b() . "c"; 
```

在此代码示例中，您将看到它输出`bac`. 原因是，这`b`已经回显，而字符串 'a' 。`void`. 'c'（导致`ac`）被放在一起。

毫无疑问，您的验证码功能也有同样的问题。

解决方案：在你的函数中使用`return`代替。`echo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:04:44.440

您是否要`captcha`在 ? 中连接函数`td`？你说这是更多代码的一部分，你可以尝试这样的事情：

```
<table>
  <tr>
    <td>...</td>
  </tr><tr>
    <td><?php echo captcha(); ?></td>
  </tr>
</table> 
```

# php - imagecreatefrompng 函数给出“内存不足”错误

> ID：12872407
> 
> 赞同：1
> 
> 时间：2012-10-13T10:52:54.573
> 
> 标签：php

我在其中设置了有关我的服务器`php.ini`值的信息。

```
max_execution_time  30
memory_limit    256M
post_max_size   64M 
```

当我尝试制作图像的缩略图时，它给了我如下错误......

> 致命错误：内存不足（已分配 27787264）（试图分配 15054336 字节）

在......

图像大小为 8.81 MB。

这是我的代码-

```
$sizee = @getimagesize($newfilename);

        switch ($sizee['mime']) {
            case "image/jpeg" :
            $srcImage = imagecreatefromjpeg($old);
            break;
            case "image/png":
            $srcImage = imagecreatefrompng($old);
            break;
            case "image/gif":
            $srcImage = imagecreatefromgif($old);
            break;
        } 
```

# xml - 如何将通过服务器运行的 orbeon 表单 CE 中的用户输入数据捕获到磁盘中

> ID：12872408
> 
> 赞同：-1
> 
> 时间：2012-10-13T10:53:49.017
> 
> 标签：xml, orbeon, xforms

如何以任何格式（如 XML）将通过服务器运行的 CE 以 orbeon 表单捕获用户输入的数据到磁盘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:16:12.987

[首先，您可以在此处](http://wiki.orbeon.com/forms/doc/developer-guide/orbeon-forms-xforms-tutorial#TOC-Orbeon-Forms-XForms-Tutorial)了解 Orbeon Xforms 的介绍。

基本上，您可以创建一个基本的 xform，并且可以将用户输入的数据保存到硬盘，您可以通过创建一个 servlet 来实现，该 servlet 可以存储 Orbeon xform 推送的流内容并将其写入文件。

# javascript - 在一个 HTML 文件中使用 document.write 写入另一个 HTML 文件

> ID：12872410
> 
> 赞同：-6
> 
> 时间：2012-10-13T10:53:55.577
> 
> 标签：javascript, html, document.write

是否可以在一个 HTML 文件中使用 document.write 来写入另一个 HTML 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T11:05:04.770

`document.write`不写入文件，它写入浏览器窗口中的文档。您可以使用`document.write`包含在一个页面中的脚本来写入另一个页面，如下所示：

```
var wnd = window.open("about:blank");
wnd.document.write("Hi there"); 
```

[示例](http://jsbin.com/ayuruf/1)| [资源](http://jsbin.com/ayuruf/1/edit)

...创建一个新窗口并将输出写入其中（您必须在用户生成的事件的处理程序中执行此操作，否则弹出窗口将被大多数浏览器阻止）。

如果您知道其名称，您也可以对现有窗口执行此操作，因为`window.open`您可以访问现有窗口（假设所有这些都在同一来源，因此 SOP 不适用）：

```
var wnd = window.open("", "knownWindowName");
wnd.document.write("More content for the existing window"); 
```

[示例](http://jsbin.com/erukaj/1)| [资源](http://jsbin.com/erukaj/1/edit)

`document.write`是一种相当过时的（并且，我相信，在 HTML5 中已弃用）生成内容的方式，不过，很久以前就已经被使用 DOM 取代了。一些参考资料：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [DOM2 事件](http://www.w3.org/TR/DOM-Level-2-Events/)
*   [DOM3 事件](http://www.w3.org/TR/DOM-Level-3-Events/)
*   [其他 DOM 规范](http://www.w3.org/DOM/DOMTR)

您可能希望使用像[jQuery](http://jquery.com)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[任何其他](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)库这样的 godo 库，因为它们在 DOM 之上提供了大量实用程序功能，并有助于消除一些浏览器的怪癖/差异/错误。

# objective-c - 例如.tar.gz 的 Objective-C NSString pathExtension？

> ID：12872413
> 
> 赞同：4
> 
> 时间：2012-10-13T10:54:27.473
> 
> 标签：objective-c, nsstring

`pathExtension`在包含诸如“example.tar.gz”之类的字符串上调用该方法时，我得到“.gz”作为结果。我可以做一些字符串操作来获得真正的扩展，但我想知道是否有一个我忽略的内置方法？（我已经检查了文档，但我什么也没看到）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T11:08:38.690

显然`pathExtension`在这种情况下按预期工作。的文档`pathExtension`说：

> 路径扩展是在最后一个周期之后的最后一个路径组件的部分，如果有的话。

我可以通过您的 tarred gzipped 文件示例了解您的来源。但是，我会说这`.gz` *是*扩展。解压缩文件（使用`gzip`）将生成一个`.tar`可以使用`tar`.

我假设之前开始使用扩展名命名文件的**约定**也能够执行 gzip 压缩。应用程序附加到被压缩文件的文件名。例如，对日志文件 进行 gzip 压缩将生成一个名为.`.tar.gz``tar``gzip``.gz``access.log``access.log.gz`

该`.tgz`扩展名已用于 tarred gzipped 文件，特别是在文件名需要保留在会破坏扩展名的文件系统（例如 DOS）的情况下。

# ipad - 用于 UIView 的 presentModalViewController

> ID：12872418
> 
> 赞同：-1
> 
> 时间：2012-10-13T10:55:26.497
> 
> 标签：ipad, presentmodalviewcontroller

我的类是 UIView 的子类，因为我想画一些东西。

是否可以在此上下文中使用 ModalViewController？

我试过这个：

```
DrawViewController *dc = [[DrawViewController alloc]init];

[dc setModalTransitionStyle:UIModalTransitionStylePartialCurl];

 [self presentModalViewController:dc animated:YES]; 
```

但它会引发错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:56:23.353

不，只有 UIViewControllers 可以呈现模态视图控制器，而不是 UIViews。

# c++ - Pthreads，与 pthread_join(pthread_t, void**) 混淆

> ID：12872425
> 
> 赞同：2
> 
> 时间：2012-10-13T10:56:26.987
> 
> 标签：c++, c, pthreads, pthread-join

我不明白为什么 does`pthread_join`需要作为返回值的第二个参数`void**`，而`pthread_exit`给定返回值的返回值参数为`void*`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T10:58:33.923

pthread_join 等待线程结束，pthread_exit 的结果值存储到 *value_ptr。如果要忽略结果，可以为 value_ptr 传递 NULL。这是通过将指针传递给变量来模拟按引用传递的常见 C 实践。请参阅[在 C 中通过引用传递](https://stackoverflow.com/questions/2229498/passing-by-reference-in-c)

pthread_join 在成功时返回 0 作为函数返回值；那么你就知道线程已经加入了，你可以从 *value_ptr 访问值。

```
void *value = NULL;
if (pthread_join(thread, &value) == 0) {
    // thread has ended, and the exit value is available in
    // the value variable
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T22:06:02.687

本质上，`pthread_join()`想要返回两个信息：

*   成功/失败指示
*   无论线程返回什么（它有一个 type `void*`）

在 C 语言中，函数“返回”两个单独值的典型方式是让函数正常返回其中一个值，并在调用者提供的位置“返回”另一个值，调用者在该位置传递指向该位置的指针. 所以`pthread_join()`：

*   返回成功/失败作为函数的值
*   在调用者提供的位置返回线程的`void*`结果，调用者将 a 传递`void**`到该位置。

请注意，在`pthread_join()`' 的情况下，调用者提供的位置是可选的。可以在调用者对该结果不感兴趣的 id 中传递 NULL。使调用者提供的位置可选是一种常见的，绝不是普遍的习语。

`pthread_exit()`不需要使用 a`void**`作为它的参数，因为该参数不是函数的*结果*。所以它可以简单地直接取值。

# ruby - 在 OSX 上安装 Visual Ruby 时出错

> ID：12872429
> 
> 赞同：4
> 
> 时间：2012-10-13T10:56:57.083
> 
> 标签：ruby, macos, gtk, homebrew

我正在尝试在 OSX 上安装 Visual Ruby。按照 VisualRuby.net 上的指南，我做了以下事情。

```
brew install gtk+ 
```

然后：

```
brew install gtksourceview 
```

最后：

```
sudo gem install visualruby 
```

这会产生以下错误消息。我不知道出了什么问题，有什么想法吗？

```
Building native extensions.  This could take a while...
ERROR:  Error installing visualruby:
    ERROR: Failed to build gem native extension.

        /Users/ma/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for -Wall option to compiler... yes
checking for -Waggregate-return option to compiler... yes
checking for -Wcast-align option to compiler... yes
checking for -Wextra option to compiler... yes
checking for -Wformat=2 option to compiler... yes
checking for -Winit-self option to compiler... yes
checking for -Wlarger-than-65500 option to compiler... yes
checking for -Wmissing-declarations option to compiler... yes
checking for -Wmissing-format-attribute option to compiler... yes
checking for -Wmissing-include-dirs option to compiler... yes
checking for -Wmissing-noreturn option to compiler... yes
checking for -Wmissing-prototypes option to compiler... yes
checking for -Wnested-externs option to compiler... yes
checking for -Wold-style-definition option to compiler... yes
checking for -Wpacked option to compiler... yes
checking for -Wp,-D_FORTIFY_SOURCE=2 option to compiler... yes
checking for -Wpointer-arith option to compiler... yes
checking for -Wswitch-default option to compiler... yes
checking for -Wswitch-enum option to compiler... yes
checking for -Wundef option to compiler... yes
checking for -Wunsafe-loop-optimizations option to compiler... yes
checking for -Wwrite-strings option to compiler... yes
checking for rb_define_alloc_func() in ruby.h... yes
checking for rb_block_proc() in ruby.h... yes
checking for new allocation framework... yes
checking for attribute assignment... no
checking for cairo... yes
checking for rb_cairo.h... yes
checking for Win32 OS... no
checking for gtksourceview-2.0... yes
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/ma/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
    --with-pkg-config
    --without-pkg-config
    --with-override-variables
    --without-override-variables
/Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:239:in `parse_pc': .pc for libxml-2.0 doesn't exist. (RuntimeError)
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:181:in `declaration'
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:130:in `requires_private'
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:311:in `all_required_packages'
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:195:in `collect_cflags'
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:134:in `cflags'
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:196:in `block in collect_cflags'
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:195:in `collect'
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:195:in `collect_cflags'
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:134:in `cflags'
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:364:in `cflags'
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/pkg-config-1.1.4/lib/pkg-config.rb:415:in `have_package'
    from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/glib2-1.1.5/lib/mkmf-gnome2.rb:540:in `required_pkg_config_package'
    from extconf.rb:58:in `<main>'

Gem files will remain installed in /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/gtksourceview2-1.1.5 for inspection.
Results logged to /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/gtksourceview2-1.1.5/ext/gtksourceview2/gem_make.out 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T10:44:02.370

尝试如果您正在运行山狮，`brew update`您可能会遇到此[错误。](https://github.com/mxcl/homebrew/issues/13673)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-29T00:16:24.917

我遇到了同样的问题。我发现 Mountain Lion 缺少[此处](https://github.com/SciRuby/sciruby/issues/25)提到的`libxml-2.0.pc`文件。`/usr/lib/pkgconfig`

确保`libxml2`已安装后：

```
brew install libxml2 
```

我创建了允许我安装 VisualRuby 的建议符号链接。

```
sudo ln -s /usr/local/Cellar/libxml2/2.9.0/lib/pkgconfig/libxml-2.0.pc /usr/lib/pkgconfig 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-09T12:32:23.183

我在 El Capitan 上安装时遇到了这个问题。我无法使用建议的解决方案来创建链接，操作系统阻止了任何更改。我用了

```
brew link libxml2 --force 
```

这修复了链接并解决了问题

# jquery - JQuery 视口块滚动动画

> ID：12872432
> 
> 赞同：2
> 
> 时间：2012-10-13T10:57:18.577
> 
> 标签：jquery

我被问到一个网站实现了如下滚动视口（http://www.beoplay.com/Products/BeoplayA3#at-a-glance），有些有可行的解决方案吗？我已经尝试了很多 scrollTo 函数，我对这个jaja 快要疯了。使用此代码，它会滚动一次到 2 div，然后停止滚动。谢谢你们。这是代码：

```
<html>
<head>
    <style>
        div { 
            color:blue; 
        }
        p { 
            color:green; 
        }
        .div_height {
            height: 1000px;
        }
    </style>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
    <div id = "1" class="div_height"><h1>First</h1></div>
    <div id = "2" class="div_height"><h1>Second</h1></div>
    <div id = "5" class="div_height"><h1>Third</h1></div>

    <script>
        var lastScrollTop = 0;
        var lastId = 1;
        var complete = 1;

        $(window).scroll(function(event){

            var st = $(this).scrollTop();
            if(complete >0){
                complete = 0;
                if (st > lastScrollTop){
                    // down

                    if (lastId != 3 ){
                        $('html, body').animate({scrollTop: $('#'+(lastId+=1)).offset().top}, 1000/*, function (){ alert('finish down'); complete=1;}*/);
                    };

                } else {
                    // up
                    if (lastId != 1 ){
                        $('html, body').animate({scrollTop: $('#'+(lastId-=1)).offset().top}, 1000/*, function (){ alert('finish up'); complete=1;}*/);
                    };
                };
                complete = 1;
                lastScrollTop = st;
            }
        });
    </script>

</body> 
```

# c# - 如何制作这样的数组

> ID：12872434
> 
> 赞同：3
> 
> 时间：2012-10-13T10:57:30.240
> 
> 标签：c#, arrays

```
List<Customer> c= new List<Customer>()
{
    new Customer{Id = 1, Name = "Bruce"},
    new Customer{Id = 2, Name = "John"}
}; 
```

我只知道

```
c.ForEach(o => str += o.Id.ToString() + ","); 
```

有什么方法可以让它变得简单吗？

我只想让 Id 出来并制作 Ids 数组 `int[] Ids = new {Id = 1, Id = 2}`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T10:59:05.177

如果你想创建一个包含所有这些 id 的数组，那么你可以使用[`Select`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx)and[`ToArray`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)方法：

```
int[] ids = c.Select(i => i.Id).ToArray(); 
```

# jsf - JSF / Primefaces：在 OneMenu 中预先选择一个选项

> ID：12872438
> 
> 赞同：0
> 
> 时间：2012-10-13T10:57:57.643
> 
> 标签：jsf, selected, selectonemenu

我在 JSF 中有一个简单的 OneMenu：

```
@ManagedBean
@ViewScoped
public class ProductBean {
  ...
  protected static Map<String, String> priceTypes;
  ...
  getter & setter
}

<p:selectOneMenu id="sizeType" >
  <f:selectItems value="#{productBean.priceTypes}" />
</p:selectOneMenu> 
```

在我的用例中，我想从“priceTypes”中预选 [1] 一个选项 - 我该怎么做？

我正在使用带有 Primefaces 3.4.1 的 Glassfish 3.1.2.2

[1] 请参阅[http://www.w3schools.com/tags/tag_option.asp上的“已选择”](http://www.w3schools.com/tags/tag_option.asp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:04:45.357

我不确定 pfaces，但在纯 JSF 中，您只需`value`在标记中设置属性`selectOneMenu`，并确保 bean 返回的值在选择列表中。

```
<p:selectOneMenu id="sizeType" value="#{myBean.sizeType}>
  <f:selectItems value="#{productBean.priceTypes}" />
 </p:selectOneMenu> 
```

当然，`sizeType`必须把你的地图的钥匙堵住。

# ios - 覆盖面板 iPad

> ID：12872441
> 
> 赞同：1
> 
> 时间：2012-10-13T10:58:17.503
> 
> 标签：ios, view, panel

我正在尝试创建一个面板，它可以在我的视图上滑动，以显示更多与 ipad 上的应用商店非常相似的内容：

![http://0.tqn.com/d/ipad/1/0/g/5/-/-/ipad-app-like.png](../Images/2c7df3e1dc0584e1852187b9b8d76e4c.png)

是否有这样的课程，还是我必须从头开始创建它？

在此先感谢，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:22:40.753

我发现了如何做到这一点，使用：

```
UIViewController *sampleView = [[UIViewController alloc]init];
[sampleView setModalPresentationStyle:UIModalPresentationFormSheet];
[self presentViewController:sampleView animated:YES completion:NULL]; 
```

如果您想要应用商店中的方角，您可以使用：

```
self.view.layer.cornerRadius = 0; 
```

在您使用的 UIViewController 的 viewWillAppear:(BOOL) 动画方法中。您将需要导入 QuartzCore/QuartzCore.h。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:19:39.777

Ucontainerview 是我会使用的。您可以在“U”下找到此控件。

# python - 如何在 Google App Engine 中使用 Sublime 的 Text 2 构建功能？

> ID：12872442
> 
> 赞同：1
> 
> 时间：2012-10-13T10:58:16.523
> 
> 标签：python, google-app-engine, sublimetext2

我想在 Windows 7 上执行的两个操作：

1.  更新服务器上的代码；
2.  验证代码。

为了做到 (1) 我创建了*GAU update.sublime-build*文件，其中包含以下文本：

```
{
    "cmd": ["appcfg.py --oauth2 --insecure --skip_sdk_update_check update", "$project_path"],
    "path": "d:/Work/GAE/",
    "encoding": "cp1251",
    "shell": true
} 
```

但我收到以下错误：

> 错误 appcfg.py:2161 处理文件 '' 发生错误：HTTP 错误 302：发现意外重定向到 [https://appengine.google.com/api/appversion/getresourcelimits?version=1&app_id=myappid](https://appengine.google.com/api/appversion/getresourcelimits?version=1&app_id=myappid)。中止。

如何解决？我也试过[这段代码](https://stackoverflow.com/questions/11569266/deploy-on-app-engine-via-sublime-text-2-build-system#comment17413582_11569266)，但它不询问密码。

而且我不确定如何执行任务（2）。

# php - 在数据库中插入多个电子邮件（唯一键）行

> ID：12872445
> 
> 赞同：0
> 
> 时间：2012-10-13T10:58:33.640
> 
> 标签：php, mysql

我想填充具有下一个结构的表：

```
USERS_TABLE
ID_USR (Primary_Key, AUTO_INCREMENT)
USERNAME (Not Null)
EMAIL (Not Null, Unique Key)
Password(Not Null)
Nacionality (Not Null)
Work (Null) 
```

我想用一个php脚本来做。创建脚本对我来说不是问题，但我对电子邮件的字段有一些疑问。我不想要真实姓名或电子邮件，只想要数据和引入超过 10-100 行的可能性。

因此，对于 ID_USR，我没有问题，因为它是一个自动增量值，非空字段或空字段没有问题。

现在想想电子邮件，你看到它是一个唯一的键，所以我想放两个随机数值​​，一个在@之前，一个在@之后，然后是扩展名。

例子：

```
<?php 
for ($i = 0; $i < 10; $i++)
{
$a = rand();
$b = rand(); // array("gmail", "facebook", "hotmail", "outlook", "yahoo".....);
$extension = array(".com", ".es", ".net", ".org"); // ....
$c = rand(0,3);
$email = $a."@".$b."".$extension[$c];
echo "$email";
}
?> 
```

它返回给我：

```
2095518299@699790428.com 
254450939@1623171070.org 
1142680888@2074501004.org 
1940419404@1779299580.es 
726585010@1262850036.net 
578544275@145818927.net 
2067281904@1894405902.org 
275443932@1915863743.es 
734209458@1269004984.com 
1035465063@1828742272.net 
```

如您所见，这可以工作，但我的问题是是否有更智能/有效的方法。

我认为这可能是建设性的，所以我希望你的回答。再见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:31:08.877

啊哈，测试数据问题！

如果我是你，我会使用你控制的域名作为电子邮件地址的域部分。那是，

```
 726585010@emailtest.yoyodyne.com 
  578544275@emailtest.yoyodyne.com 
  2067281904@emailtest.yoyodyne.com 
```

（如果您碰巧为 Yoyodyne 工作。）如果您出错并尝试发送给所有人，这将防止随机生成的电子邮件地址逃逸。

然后，使用更长的随机数作为数字，这样您就不会遇到很多意外碰撞。你可能会得到一些。

最后，在填充表格之后，在使用它之前，返回并更改电子邮件列，使其包含 ID 号。

```
 UPDATE USERS_TABLE SET EMAIL = CONCAT(ID_USR,'@emailtest.yoyodyne.com') 
```

这样，您的测试将很容易追溯到特定的用户行。

# git - 带有 --git-dir= 的 git 会导致“不是 git 存储库”

> ID：12872446
> 
> 赞同：33
> 
> 时间：2012-10-13T10:58:50.193
> 
> 标签：git, bash, terminal, sh

我的一个 iOS 应用程序中有一个脚本，它应该获取 git 修订哈希并将其放入版本号。在这个脚本中，我为此运行 git --git-dir="$PROJECT_DIR" show -s --pretty=format:%h 。但是，我收到该目录不是 git 存储库的消息。如果我回显 PROJECT_DIR 变量并转到终端，则以下工作：

```
cd projectDirPath
git show -s --pretty=format:%h 
```

什么不起作用是：

```
git --git-dir=projectDirPath show -s --pretty=format:%h 
```

我错过了什么吗？文档指出，我可以使用 --git-dir 指定 git 存储库的路径，并且指定的路径显然是一个 git 存储库，因为如果我首先 cd 进入该路径，所有 git 命令都可以正常工作。但是，如果我不在此路径中，则指定 --git-dir 不起作用。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-14T10:40:03.457

使用时[`--git-dir`](https://git-scm.com/docs/git#Documentation/git.txt---git-dirltpathgt)，您需要指向`.git`您的存储库的文件夹。尝试：

```
git --git-dir=projectDirPath/.git show -s --pretty=format:%h 
```

上的文档`--git-dir`说：

> --git目录=
> 
> 设置存储库的路径（“.git”目录）。这也可以通过设置 GIT_DIR 环境变量来控制。它可以是当前工作目录的绝对路径或相对路径。

我曾经有一个问题自己记住这一点。为了帮助我记住要做什么，我试着记住该选项正在询问它想要的内容：`.git`目录的路径（git-dir）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-05T20:36:24.473

您正在寻找[git -C 命令行选项](https://git-scm.com/docs/git#Documentation/git.txt--Cltpathgt)。

> `-C <path>`
> 
> 就像启动 git 而不是当前工作目录一样运行。当给出多个`-C`选项时，每个后续的 non-absolute`-C <path>`都相对于前面的`-C <path>`. 如果`<path>`存在但为空，例如 `-C ""`，则当前工作目录保持不变。
> 
> 此选项影响期望路径名的选项`--git-dir` ，`--work-tree`因为它们对路径名的解释将相对于由该`-C` 选项引起的工作目录。例如，以下调用是等效的：
> 
> ```
> git --git-dir=a.git --work-tree=b -C c status
> git --git-dir=c/a.git --work-tree=c/b status 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-18T19:45:08.180

除了`--git-dir`，设置`--work-tree`也可能有所帮助。对于脚本，最好使用相关环境（更容易），例如

```
#!/bin/bash -ex
export GIT_WORK_TREE=/path/to/repo
export GIT_DIR=/path/to/repo/.git
git show -s --pretty=format:%h 
```

# html - 具有灵活背景图像的 html5 css3 流体布局

> ID：12872450
> 
> 赞同：1
> 
> 时间：2012-10-13T10:59:35.137
> 
> 标签：html, css, background-image, vertical-alignment, fluid-layout

我正在开发一个使用 HTML5 + CSS3 + jQueryMobile 1.2.0 的移动网络应用程序（稍后计划使用 phonegap 将其转换为本机应用程序）。我不擅长 css3 和 html5，但正在努力学习和开发移动网站。一切都很好，直到我得到一个应该在文本中添加背景图像的屏幕。我的目标是 320*480 - 1280*798 屏幕。因此，我的网站在每个地方都应该看起来不错且相同。所以我添加了我的 html 和 css 的小提琴并添加了屏幕截图。

我的要求：

*   左右两幅图像应根据屏幕尺寸灵活调整（320 - 1280）
*   居中的文本应居中对齐（水平 + 垂直）。
*   右侧图像上有一个文本也应该居中对齐（水平+垂直）。

小提琴我的代码[HTML + CSS 代码](http://jsfiddle.net/NxuYC/)

它导致 Firefox (1280*768) 如下所示（几乎如我所愿）。

[火狐和安卓模拟器上的屏幕截图](http://imageshack.us/photo/my-images/502/firefoxkd.png/)

但是，当我在 android 模拟器 (320*480) 上运行时，它没有正确对齐

所以，请让我知道如何将内容与背景图像/直接图像对齐。最终我的屏幕应该看起来像在 Firefox 中。

提前致谢。

# android - 如何在 android 中为图像设置操作？

> ID：12872455
> 
> 赞同：0
> 
> 时间：2012-10-13T10:59:51.020
> 
> 标签：android, image, onclicklistener

在我的应用程序中，我有一个带有 5 个图标的袋子圆形图像 在我的情况下，如何为 android 中的单个图标设置点击操作 5 个图标放置在一个图像中，并且该图像在我的应用程序中用作袋子圆形图像.

请帮助我提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:08:33.257

您可以使用 ImageButton 并在单击方法时收听它：

```
imgB =(ImageButton)findViewById(R.id.Image_Button_ID);
imgB.setOnClickListener(new OnClickListener() {
    // write your code here
}); 
```

或者如果你想在 xml 中指定方法：

```
<ImageButton android:id="@+id/Image_Button_ID"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/blah"
    android:onClick="cutsom_onclick_method" /> 
```

希望我没有误解，我不太清楚你需要什么。

OnTouchListener 将为您提供单击的位置，您可以使用它来确定单击的位置。

```
imageView.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent e) {
            if (e.getAction() == MotionEvent.ACTION_DOWN){
                int x = (int) e.getX();
                int y = (int) e.getY();
            }
            // then do some calculation with x and y and where they are
            return true;
        }
    }); 
```

另一种方法是使用五个 ImageButtons 和五个不同的图像

# actionscript-3 - PixelBlender 错误的色调。闪存/动作脚本

> ID：12872465
> 
> 赞同：1
> 
> 时间：2012-10-13T11:01:54.903
> 
> 标签：actionscript-3, flash, actionscript, pixel-bender

我有一个可以选择颜色（HSB）的javascript。但在我的闪光元素中，色调计算错误。

我有这个输入例如： HUE: 360... SAT: 100..BRIGHTNESS: 97 但闪光灯元素的颜色错误。该怎么办？我正在使用 PixelBlender 更改每个像素的颜色。

这是我的 HUE.PBJ：

```
 <languageVersion : 1.0;>

 kernel HSLFilter
 <   
namespace   : "Boostworthy::Filters";
vendor      : "Ryan Taylor";
version     : 1;
description : "";
>
{
 parameter   float       hue
 < 
    minValue        :   0.0;
    maxValue        :   360.0;
    defaultValue    :   360.0;
  >;

parameter   float       saturation
<
    minValue        :   0.0;
    maxValue        :   100.0;
    defaultValue    :   0.0;
>;

parameter   float       lightness
<
    minValue        :   0.0;
    maxValue        :   100.0;
    defaultValue    :   0.0;
>;

input       image4      source;
output      pixel4      result;

void evaluatePixel()
{
    // Convert sampled pixel from RGB space to HSL space.

    pixel4 samp;
    float  sampMin;
    float  sampMax;
    float  sampDiff;
    float  sampSum;
    float  sampH;
    float  sampS;
    float  sampL;

    samp     = sampleNearest(source, outCoord());
    sampMin  = min(samp.r,  samp.g);
    sampMin  = min(sampMin, samp.b);
    sampMax  = max(samp.r,  samp.g);
    sampMax  = max(sampMax, samp.b);
    sampDiff = sampMax - sampMin;
    sampSum  = sampMax + sampMin;
    sampL    = sampSum * 0.5;

    if(sampMin == sampMax)
        sampH = 0.0;
    else if(sampMax == samp.r)
        sampH = mod(60.0 * ((samp.g - samp.b) / sampDiff), 360.0);
    else if(sampMax == samp.g)
        sampH = 60.0 * ((samp.b - samp.r) / sampDiff) + 120.0;
    else if(sampMax == samp.b)
        sampH = 60.0 * ((samp.r - samp.g) / sampDiff) + 240.0;
    else
        sampH = 0.0;

    if(sampMin == sampMax)
        sampS = 0.0;
    else if(sampL > 0.5)
        sampS = sampDiff / (2.0 - sampSum);
    else
        sampS = sampDiff / sampSum;

    // Transform the sampled HSL values by the amounts specified
    // by the hue, saturation, and lightness parameters.

    float outH;
    float outS;
    float outL;

    outH  = sampH - hue;
    outS  = sampS * (saturation / 100.0 + 1.0);
    outL  = sampL - (1.0 - (lightness / 100.0 + 1.0));

    // Convert the transformed HSL values back to RGB space.

    float q;
    float p;
    float h;

    if(outL < 0.5)
        q = outL * (1.0 + outS);
    else
        q = outL + outS - outL * outS;

    p = 2.0 * outL - q;
    h = outH / 360.0;

    float  oneOverThree = 1.0 / 3.0;
    float  twoOverThree = 2.0 / 3.0;
    float  oneOverSix   = 1.0 / 6.0;
    float3 t            = float3(h + oneOverThree, h, h - oneOverThree);

    if(t.r < 0.0)
        t.r += 1.0;
    else if(t.r > 1.0)
        t.r -= 1.0;

    if(t.g < 0.0)
        t.g += 1.0;
    else if(t.g > 1.0)
        t.g -= 1.0;

    if(t.b < 0.0)
        t.b += 1.0;
    else if(t.b > 1.0)
        t.b -= 1.0;

    pixel4 c = pixel4(0.0, 0.0, 0.0, samp.a);

    if(t.r < oneOverSix)
        c.r = p + (q - p) * 6.0 * t.r;
    else if(t.r >= oneOverSix && t.r < 0.5)
        c.r = q;
    else if(t.r >= 0.5 && t.r < twoOverThree)
        c.r = p + (q - p) * 6.0 * (twoOverThree - t.r);
    else
        c.r = p;

    if(t.g < oneOverSix)
        c.g = p + (q - p) * 6.0 * t.g;
    else if(t.g >= oneOverSix && t.g < 0.5)
        c.g = q;
    else if(t.g >= 0.5 && t.g < twoOverThree)
        c.g = p + (q - p) * 6.0 * (twoOverThree - t.g);
    else
        c.g = p;

    if(t.b < oneOverSix)
        c.b = p + (q - p) * 6.0 * t.b;
    else if(t.b >= oneOverSix && t.b < 0.5)
        c.b = q;
    else if(t.b >= 0.5 && t.b < twoOverThree)
        c.b = p + (q - p) * 6.0 * (twoOverThree - t.b);
    else
        c.b = p;

    // Apply the final ARGB color to the pixel.

    result = c;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:52:54.893

IIRC 原始着色器版本使用 -180 到 180 色调参数，对于某些色调，您的 tb 很可能低于 -1，这在此着色器中没有说明。将其更改为 -180 到 180，默认值为 0，然后观看乐趣。

# perl - 从文件中获取属于其他文件区域一部分的区域（无循环）

> ID：12872469
> 
> 赞同：6
> 
> 时间：2012-10-13T11:02:26.050
> 
> 标签：perl, matlab, sed, awk

我有两个文件：

region.txt：第一列是染色体名称，第二列和第三列是开始和结束位置。

```
1  100  200
1  400  600
2  600  700 
```

coverage.txt：第一列是染色体名称，第二列和第三列是开始和结束位置，最后一列是分数。

```
1 100 101  5
1 101 102  7 
1 103 105  8
2 600 601  10
2 601 602  15 
```

这个文件非常大，大约 15GB，大约有 3 亿行。

我基本上想得到所有在regions.txt 中每个区域的coverage.txt 分数的平均值。

也就是说，从regions.txt的第一行开始，如果coverage.txt中有一行染色体相同，start-coverage>= start-region，end-coverage<= end-region，然后将其分数保存到一个新数组中。在所有 Coverages.txt 中完成搜索后，打印区域染色体、开始、结束和已找到的所有分数的平均值。

预期输出：

```
1  100 200 14.6   which is (5+7+8)/3
1  400 600 0      no match at coverages.txt
2  600 700 12.5   which is (10+15)/2 
```

我构建了以下 MATLAB 脚本，该脚本需要很长时间，因为我必须多次遍历 coverage.txt。我不知道如何制作一个快速的 awk 类似脚本。

我的matlab脚本

```
fc = fopen('coverage.txt', 'r');
ft = fopen('regions.txt', 'r');
fw = fopen('out.txt', 'w');

while feof(ft) == 0

linet = fgetl(ft);
scant = textscan(linet, '%d%d%d');
tchr = scant{1};
tx = scant{2};
ty = scant{3};
coverages = [];

    frewind(fc);
    while feof(fc) == 0

    linec = fgetl(fc);
    scanc = textscan(linec, '%d%d%d%d');
    cchr = scanc{1};
    cx = scanc{2};
    cy = scanc{3};
    cov = scanc{4};

        if (cchr == tchr) && (cx >= tx) && (cy <= ty)

            coverages = cat(2, coverages, cov);

        end

    end

    covmed = median(coverages);
    fprintf(fw, '%d\t%d\t%d\t%d\n', tchr, tx, ty, covmed);

end 
```

如果有人可以教我如何摆脱 matlab 脚本中的所有循环，我会很高兴使用 AWK、Perl 或...等进行替代。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T12:43:15.543

这是一个 Perl 解决方案。我使用散列（又名字典）通过染色体访问各种范围，从而减少循环迭代的次数。

这可能很有效，因为我不会`regions.txt`在每条输入线上都进行完整的循环。当使用多线程时，效率可能会进一步提高。

```
#!/usr/bin/perl

my ($rangefile) = @ARGV;
open my $rFH, '<', $rangefile    or die "Can't open $rangefile";

# construct the ranges. The chromosome is used as range key.
my %ranges;
while (<$rFH>) {
    chomp;
    my @field = split /\s+/;
    push @{$ranges{$field[0]}}, [@field[1,2], 0, 0];
}
close $rFH;

# iterate over all the input
while (my $line = <STDIN>) {
    chomp $line;
    my ($chrom, $lower, $upper, $value) = split /\s+/, $line;
    # only loop over ranges with matching chromosome
    foreach my $range (@{$ranges{$chrom}}) {
        if ($$range[0] <= $lower and $upper <= $$range[1]) {
            $$range[2]++;
            $$range[3] += $value;
            last; # break out of foreach early because ranges don't overlap
        }
    }
}

# create the report
foreach my $chrom (sort {$a <=> $b} keys %ranges) {
    foreach my $range (@{$ranges{$chrom}}) {
        my $value = $$range[2] ? $$range[3]/$$range[2] : 0;
        printf "%d %d %d %.1f\n", $chrom, @$range[0,1], $value;
    }
} 
```

示例调用：

```
$ perl script.pl regions.txt <coverage.txt >output.txt 
```

示例输入的输出：

```
1 100 200 6.7
1 400 600 0.0
2 600 700 12.5 
```

（因为 (5+7+8)/3 = 6.66…）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:47:42.003

Normally, I would load the files into R and calculate it, but given that one of them is so huge, this would become a problem. Here are some thoughts that might help you solving it.

1.  Consider splitting `coverage.txt` by chromosomes. This would make the calculations less demanding.

2.  Instead of looping over `coverage.txt`, you first read the `regions.txt` full into memory (I assume it is *much* smaller). For each region, you keep a score and a number.

3.  Process `coverage.txt` line by line. For each line, you determine the chromosome and the region that this particular stretch belongs to. This will require some footwork, but if `regions.txt` is not too large, it might be more efficient. Add the score to the score of the region and increment number by one.

An alternative, most efficient way requires both files to be sorted first by chromosome, then by position.

1.  Take a line from `regions.txt`. Record the chromosome and positions. If there is a line remaining from previous loop, go to 3.; otherwise go to 2\.

2.  Take a line from `coverage.txt`.

3.  Check whether it is within the current region.

    *   yes: add the score to the region, increment number. Move to 2.
    *   no: divide score by number, write the current region to output, go to 1.

This last method requires some fine tuning, but will be most efficient -- it requires to go through each file only once and does not require to store almost anything in the memory.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T14:25:53.593

`join`这是使用and的一种方法`awk`。像这样运行：

```
join regions.txt coverage.txt | awk -f script.awk - regions.txt 
```

内容`script.awk`：

```
FNR==NR && $4>=$2 && $5<=$3 { 
    sum[$1 FS $2 FS $3]+=$6
    cnt[$1 FS $2 FS $3]++
    next
}

{
    if ($1 FS $2 FS $3 in sum) {
        printf "%s  %.1f\n", $0, sum[$1 FS $2 FS $3]/cnt[$1 FS $2 FS $3]
    }
    else if (NF == 3) {
        print $0 "  0"
    }
} 
```

结果：

```
1  100  200  6.7
1  400  600  0
2  600  700  12.5 
```

或者，这是单线：

```
join regions.txt coverage.txt | awk 'FNR==NR && $4>=$2 && $5<=$3 { sum[$1 FS $2 FS $3]+=$6; cnt[$1 FS $2 FS $3]++; next } { if ($1 FS $2 FS $3 in sum) printf "%s  %.1f\n", $0, sum[$1 FS $2 FS $3]/cnt[$1 FS $2 FS $3]; else if (NF == 3) print $0 "  0" }' - regions.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T12:07:17.483

这是一种简单的 MATLAB 方法，可以将您的覆盖范围划分为区域：

```
% extract the regions extents
bins = regions(:,2:3)';
bins = bins(:);

% extract the coverage - only the start is needed
covs = coverage(:,2);

% use histc to place the coverage start into proper regions
% this line counts how many coverages there are in a region
% and assigns them proper region ids.
[h, i]= histc(covs(:), bins(:));

% sum the scores into correct regions (second output of histc gives this)
total = accumarray(i, coverage(:,4), [numel(bins),1]);

% average the score in regions (first output of histc is useful)
avg = total./h;

% remove every second entry - our regions are defined by start/end
avg = avg(1:2:end); 
```

现在，假设这些区域不重叠，这是可行的，但我想情况就是这样。此外，文件中的每个条目`coverage`都必须属于某个区域。

此外，如果您想避免读取整个文件，那么在覆盖范围内“阻止”这种方法是微不足道的。您只需要`bins`您的区域文件，该文件可能很小。您可以处理块中的覆盖率，逐步添加`total`并最终计算平均值。

# ruby - 构建 gem 原生扩展失败

> ID：12872471
> 
> 赞同：2
> 
> 时间：2012-10-13T11:02:36.323
> 
> 标签：ruby, linux, rubygems, fedora

我想在基于 Fedora 12 的行星实验室节点中安装一个 OMF RC：它需要 ruby​​ 1.9.3。所以，我安装了 git，然后是 ruby​​-devel，然后是 rvm。我安装了 rvm：

```
rvm install 1.9.3 
```

毕竟，当我想安装时：

```
gem install omf_rc --pre --no-ri --no-rdoc 
```

它给了我以下错误：

> 构建原生扩展。这可能需要一段时间...
> 
> > 错误：安装 omf_rc 时出错：
> > 
> > > 错误：无法构建 gem 原生扩展。
> 
> ### /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
> 
> 检查 libxml/parser.h... *** extconf.rb 失败 *** 由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件

请让我知道如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:10:25.393

看来你需要安装libxml，试试：

```
sudo yum install -y gcc ruby-devel libxml2 libxml2-devel libxslt libxslt-devel 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:07:42.060

它还需要以下安装：

```
sudo yum install -y git make gcc-c++ 
```

和

```
sudo yum groupinstall development-tools development-libs 
```

# iphone - 如何将文本文件值从一个视图传递到任何其他视图 xcode

> ID：12872472
> 
> 赞同：0
> 
> 时间：2012-10-13T11:02:42.060
> 
> 标签：iphone, xcode

我必须将 UITextField 值从一个视图传递到其他视图（第二个、第三个...视图）。实际上，在我的第三个 ViewController 中，我有一个滚动视图，我必须在其上显示值。但是 UITextField 值没有被传递。它正在返回 null。不知道可能出了什么问题？这是我正在使用的代码：

```
In ViewController1.m:

-(IBAction)butonclick:(id)sender{
ViewController2 *view2=[ViewController2 alloc];
view2.id=name.text; 
ViewController3 *view3=[ViewController3 alloc];
view3.id=name.text; 
[view2 release];
[view3 release];
}

IN ViewConroller2.h :
@interface ViewController2 : UIViewController { 
   NSString *id;
   UIlabel *displayId;
}

In ViewController2.m :
- (void)viewDidLoad
{
 self.displayId.text=self.id;
}

In ViewController3.h:
@interface ViewController2 : UIViewController { 
  NSString *id;
  UIlabel *dispId;
 }  

In ViewController3.m :
- (void)viewDidLoad
{
self.dispId.text=self.id;
} 
```

但是这里的 id 值没有传递给 ViewController3。它返回 null ..我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:20:27.173

我只是在更正您编写的代码，同时上面给出的使用 AppDelegate 属性的建议是一个很好的建议。您的代码的主要问题是您只是声明 NSString 对象而不是使其成为属性。检查这个：

```
-(IBAction)butonclick:(id)sender{
ViewController2 *view2=[ViewController2 alloc]init];
view2.str=name.text; 
ViewController3 *view3=[ViewController3 alloc]init;
view3.str=name.text; 
[view2 release];
[view3 release];
}

IN ViewConroller2.h :
@interface ViewController2 : UIViewController { 
   NSString *str;
   UIlabel *displayId;
}
@property(nonatomic, retain) NSString* str; //Synthesize it in .m file

In ViewController2.m :
- (void)viewDidLoad
{
 self.displayId.text=self.str;
}

In ViewController3.h:
@interface ViewController2 : UIViewController { 
  NSString *str;
  UIlabel *dispId;
 }  
    @property(nonatomic, retain) NSString* str; //Synthesize it in .m file

In ViewController3.m :
- (void)viewDidLoad
{
self.dispId.text=self.str;
} 
```

我不知道您的情况，但实现这种情况的最有效方法是使用**Delegates**。为设置字符串的类（ViewController1）创建一个委托，并在其他视图控制器中相应地设置委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:41:25.270

您正在传递值而不进行初始化。

```
ViewController2 *view2=[[ViewController2 alloc]init];
view2.id=name.text; 
ViewController3 *view3=[[ViewController3 alloc]init];
view3.id=name.text; 
```

如果你想在你的应用程序中全局使用对象，你可以在 appDelegate 中声明它。

在 AppDelegate.h

```
 @interface AppDelegate : NSObject <NSApplicationDelegate>
    {
         NSString *idGlobal;
    }
    @property (nonatomic, retain) NSString *idGlobal; 
```

在`AppDelegate.m`

```
@synthesize idGlobal;

In ViewController1.m:

-(IBAction)butonclick:(id)sender{

     appDelegate.idGlobal=name.text; 
}

In ViewController2.m: and
In ViewController3.m:
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
id=appDelegate.idGlobal; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T11:11:35.063

在 this 中全局声明字符串`AppDelegate.h`将有助于在整个文件中保持字符串的值不变。同样，无论您要添加字符串或更改其值或分配它，都可以导入`AppDelegate.h`.

还要检查这些链接：-

[将 NSString 从一个类传递到另一个类](https://stackoverflow.com/questions/4998623/passing-nsstring-from-one-class-to-the-other)

[将 NSString 从一个类传递到另一个类](https://stackoverflow.com/questions/7221379/pass-nsstring-from-one-class-to-another)

# javascript - Javascript 发出确认消息

> ID：12872476
> 
> 赞同：0
> 
> 时间：2012-10-13T11:03:16.583
> 
> 标签：javascript

我做了一个简短的 Javascript 函数：

```
function confirmMessage() {
  var messages = confirm("Are you sure");
  if(messages) {
    //go trough
  }else{
    //stop, cancel the action
    return false;
  }
} 
```

HTML：

```
<a href='?pagina=uitloggen'  onclick="confirmMessage()"> 
```

当我单击取消时，它返回 false 并跳转到 else 语句。但它并没有停止行动！这里有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:04:20.610

您的`<a>`标签`onclick`应该**返回**事件处理程序的结果，以使其停止传播。

```
<a href='?pagina=uitloggen'  onclick="return confirmMessage()"> 
```

# ruby - Ruby：如何添加到数组的新哈希？

> ID：12872477
> 
> 赞同：2
> 
> 时间：2012-10-13T11:03:23.527
> 
> 标签：ruby, arrays, hash

我有以下代码，它工作正常。

```
months = {"Feb"=>["day1", "day2"]}

i = 0
while i < 5 do
   months["Feb"][i] = "day#{i}"
   i += 1
end
puts months 
```

$> {"二月"=>["day0", "day1", "day2", "day3", "day4"]}

但是，如果我删除了初始化散列的第一行或尝试即时将值添加到不同的散列键，我会得到一个未定义的“月”错误。

所以我很困惑。Ruby 不会允许你任意添加键到哈希中吗？我已经习惯了 Perl，你可以随意开始制作散列和数组。但是我知道 Perl 将哈希和数组视为单独的对象，而 Ruby 的所有内容都被认为是相同的，所以我不知道它是否与此有关（尽管 Perl 的方式可能是“草率的”^_^）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:55:13.543

您总是需要在 Ruby 中初始化变量。但是您可以按如下方式初始化哈希：

```
# Using {} to creates an empty hash
months = {}

# or create a new empty hash object from Hash class
months = Hash.new

# instead of
months = {"Feb"=>["day1", "day2"]} 
```

在哈希中初始化一个数组：

```
# Array.new creates a new Array with size 5
# And values within Hash.new block are the default values for the hash
# i.e. When you call the Hash#[], it creates a new array of size 5
months = Hash.new { |hash, key| hash[key] = Array.new(5) }
puts months        #=> {}
puts months["Feb"] # Here the Hash creates a new Array inside "Feb" key
puts months        #=> {"Feb" => [nil, nil, nil, nil, nil]}
puts months["Feb"][3] = "Day3"
puts months        #=> {"Feb" => [nil, nil, nil, "Day3", nil]} 
```

要使用未定义的数组大小执行相同操作：

```
months = Hash.new { |hash, key| hash[key] = [] }
puts months        #=> {}
months["Feb"].push "Day0"
puts months        #=> {"Feb" => ["Day0"]}
months["Feb"].push "Day1"
puts months        #=> {"Feb" => ["Day0", "Day1"]} 
```

我认为更优雅的方法是使用 map 方法在将其绑定到“Feb”键之前构建您的天数：

```
months = {"Feb" => (0..4).map{ |i| "day#{i}" }}
# => {"Feb"=>["day0", "day1", "day2", "day3", "day4"]} 
```

如果您不想输入月份名称，则可以要求 Date 类并通过 Fixnum 获取月份名称：

```
require 'date'
months = {Date::ABBR_MONTHNAMES[2] => (0..4).map{ |i| "day#{i}"}}
# => {"Feb"=>["day0", "day1", "day2", "day3", "day4"]} 
```

要为所有月份生成相同的结构，您可以执行以下操作：

```
days   = (0..4).map{ |d| "day#{d}"}
months = (1..12).map{ |m| {Date::ABBR_MONTHNAMES[m] => days }}
# => {"Jan"=>["day0", "day1", "day2", "day3", "day4"],
#     "Feb"=>["day0", "day1", "day2", "day3", "day4"],
#     ...
#     "Dec"=>["day0", "day1", "day2", "day3", "day4"]} 
```

一些有用的文档：

*   [哈希#new](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-new)
*   [大批](http://www.ruby-doc.org/core-1.9.3/Array.html)
*   [可枚举#map](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)
*   [范围](http://www.ruby-doc.org/core-1.9.3/Range.html)
*   [日期](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:32:13.010

在 Ruby 中，您必须在使用它之前初始化一个变量（看起来像是一个合理的策略......）。另请注意，您编写的不是惯用的 Ruby，而是一种替代方法：

```
months = {"Feb" => 0.upto(4).map { |i| "day#{i}" }} 
```

更新：

```
months["Feb"] = 0.upto(4).map { |i| "day#{i}" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T07:29:58.147

根据你们所说的，我搞砸了，看起来 Ruby 希望密钥存在，然后才能开始为该密钥分配值。

```
hashname = Hash.new
hashname[:foo] = {}
hashname[:foo][3] = "test"
hashname[:foo][1] = "test1"
hashname[:bar] = {}
hashname[:bar][3] = "test3"
puts hashname
puts hashname[:foo][1]

C:\Ruby>scratch.rb
{:foo=>{3=>"test", 1=>"test1"}, :bar=>{3=>"test3"}}
test1 
```

一旦密钥存在，您就可以根据需要开始分配值。尽管在这种情况下，您可以看到我正在创建“哈希哈希”而不是“数组哈希”，就像 .map 方法所做的那样，我仍然不知道为什么。

谢谢您的帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T14:35:50.690

```
# the ||= set this to an empty hash({}) if it hasn't been initialized yet
months ||= {}

#updated as you like, use symbols :feb over string "feb" as the key (read this in other questions in this website)
months[:feb] = (0..4).map {|n| "day#{n}"}

p months  #==> {:feb=>["day0", "day1", "day2", "day3", "day4"]} 
```

# c# - 禁用 Aero Glass 窗体的内边框

> ID：12872479
> 
> 赞同：0
> 
> 时间：2012-10-13T11:03:47.130
> 
> 标签：c#, .net, windows-7, windows-vista, aero

默认情况下，启用 Aero Glass 的表单上的控件会绘制 2 像素宽的透明边框（我的主题为 1px 深灰色/1px 白色）。是否可以禁用此行为？

到目前为止我的方法：我尝试扩展框架并强制它使用完整的表单区域（DwmExtendFrameIntoClientArea 和负边距），但是，尽管这删除了不需要的边框，但它似乎也使所有子控件“玻璃化”，无论任何背景或 z 顺序。是否可以排除某些区域使用带有加长框架的 Aero Glass？

非常感谢您的想法。

# git - git - 尝试提交 C++ 项目时出错

> ID：12872480
> 
> 赞同：1
> 
> 时间：2012-10-13T11:03:59.610
> 
> 标签：git, repository, bitbucket, smartgit

我在 bitbucket.org 上为 C++ 项目创建了一个存储库。

我在我的计算机上下载了 git 并安装了它并作为客户端 SmartGIT 安装。

我使用 puttygen 生成了一组密钥。在生成步骤之后，我在项目的 SSH 密钥部分的 bitbucket 中添加了公钥数据，并在使用 SmartGIT 克隆计算机上的存储库时，添加了从 puttygen 保存的 OpenSSH 密钥。

我已从计算机将项目添加到存储库文件夹中，现在，当我尝试提交更改时，收到以下错误：

```
The remote end hung up unexpectedly.
conq: repository access denied. access via a deployment key is read-only. 
```

为了能够在存储库上提交更改，我应该怎么做？我是使用 GIT 的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:15:56.987

您很可能已将 SSH 密钥添加到`Deployment Keys`我们项目的部分。在那里添加的密钥只会提供只读访问权限。

您要做的是从那里删除密钥，然后将其添加到`Manage Account -> SSH keys`. 在那里添加的密钥将为您的用户有权访问的存储库提供完全的读/写访问权限。

我不确定如果您在两个地方都添加了密钥会发生什么，但以防万一，请从部署密钥中删除密钥。

# android - 简单的安卓应用

> ID：12872482
> 
> 赞同：-3
> 
> 时间：2012-10-13T11:04:28.707
> 
> 标签：android

在哪里可以找到具有 4-5 个继承活动并使用线程的简单开源 Android 应用程序？仅供我使用。也许是一个图形很差的小游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:09:22.863

从下面的链接中，您可以了解 android 游戏开发的基本知识

[http://obviam.net/index.php/getting-started-in-android-game-development-with-libgdx-create-a-working-prototype-in​​-a-day-tutorial-part-1/](http://obviam.net/index.php/getting-started-in-android-game-development-with-libgdx-create-a-working-prototype-in-a-day-tutorial-part-1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:39:46.873

查看 google API 演示，可从 eclipse 中的 android sdk 管理器下载

# javascript - 寻找覆盖每个“file://”的正则表达式

> ID：12872483
> 
> 赞同：0
> 
> 时间：2012-10-13T11:04:42.823
> 
> 标签：javascript, regex

我正在尝试为一个覆盖以“file://”开头的每个超链接的 javascript 项目创建一个正则表达式

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:09:33.867

超链接具有位置属性-

您可以从链接中读取 document.links[0].protocol。

```
var links=document.links, L=links.length, filelinks=[];

while(L){
  if(links[--L].protocol=='file:')filelinks.push(links[L].href);
}

//eg:
filelinks.join('\n')

file:///C:/webworks/gallery/gallery.html
file:///C:/webworks/library/shared/dewey.html#holmes
file:///C:/webworks/library/shared/dewey.html#twain
file:///C:/webworks/library/shared/dewey.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:41:21.283

```
/^file\/\/:/i.test(str)
str.match(/^file\/\/:\S+/i) 
```

除了协议，我不会检查任何其他内容，URI 非常复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T11:10:08.063

~~这是[这个](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)家伙开发的一个非常彻底的版本：~~

 ~~```
(?i)\b((?:file:(?:\/{2}))(?:www\d{0,3}[.]|[a-z0-9\-]+[.])?(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’])) 
```~~ 

~~编辑：显然我需要更改一些内容以使其更加严格。我已经更新了它。如果要使用捕获组，请删除 ?: 以保留反向引用。~~

请使用更简单的，`/(file:\/{2,3}[!#$&-;=?-\[\]_a-z~]+)/`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T11:11:35.097

试试这个

/^(file?://)?([\da-z.-]+).([az.]{2,6})([/\w .-] *)* /?$/

享受 ：）

# c# - 在三个组合框中显示日期

> ID：12872488
> 
> 赞同：2
> 
> 时间：2012-10-13T11:04:56.013
> 
> 标签：c#, .net, winforms, c#-4.0, combobox

我是.net的初学者。我需要在三个不同的组合框中显示`day`,`month`和。`year`为了让它们填满，我尝试了从 1950 年到现在的硬编码值。后来我意识到我还需要检查 2 月（28 天）、闰年和其他问题。有没有其他方法可以在不对值进行硬编码的情况下做到这一点。

在互联网上搜索答案时，我遇到了我不想使用的 datepicker 和 monthcalendar（因为我的项目应该与其他使用 datepicker 和 monthcalendar 的朋友不同）。否则，如果您有任何其他建议而不是组合框，请分享。

![在此处输入图像描述](../Images/33ad215701fb6511de039af01d32ccd6.png)

我相信以前有人问过这个问题。我不介意你直接链接。

*nikhil agrawal*回答后编辑：

**工作代码：**

```
cmbDay    --->  combobox
cmbMonth  --->  combobox
cmbYear   --->  combobox 
```

*表单加载事件*

```
 this.cmbYear.Leave+=new EventHandler(cmbYear_Leave);
        this.cmbDay.Leave += new EventHandler(cmbYear_Leave);
        this.cmbMonth.Leave += new EventHandler(cmbYear_Leave);
        //
        for (int i = 1950; i < 2012; i++)
        {
            cmbYear.Items.Add(i.ToString());
        }
        for (int i = 1; i < 32; i++)
        {
            cmbDay.Items.Add(i.ToString());
        }
        //
        cmbDay.SelectedIndex = 0;
        cmbMonth.SelectedIndex = 0;
        cmbYear.SelectedIndex = 0; 
```

*OnLeave 事件*

```
private void cmbYear_Leave(object sender, EventArgs e)
    {
        int day = DateTime.DaysInMonth(Convert.ToInt32(cmbYear.Text), cmbMonth.SelectedIndex+1);                       
        if (day <= cmbDay.SelectedIndex)
        {
            //alert message or your managing code.
        }
    } 
```

PS:`cmbMonth`是字符串格式 ("Jan","Feb","Mar",...)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T11:10:17.817

用所有可能的值填充所有三个，例如日期 1 到 31、1 月到 12 月以及 1950 年到今年。

当失去对所有三个使用的关注时检查有效日期

```
DateTime.DaysInMonth(int year, int month); 
```

对于年份，您可以直接将选定项目转换为 int，对于月份，您可以找到 selectedindex +1（因为索引是基于 0 的）。

现在在失去焦点（所有三个失去焦点上的一个失去焦点事件）检查日期是否小于或等于方法返回的天数。如果没有，那么警报消息或其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:55:05.003

我认为您是否想根据月份规范填充日期组合框值。你可以试试这段代码。它可能会帮助你。您在编写此代码时编写了一个 cmbobox selectedIndexChange 事件。

```
 if(cmbMonth.Text=="feb")  //if(cmbMonth.SelectedIndex.Equals(specify index))
  {
    for(i=0;i<29;i++)
    {
       cmbDay.Item.Add(i.ToString());
    }
  }
  else
   {
    for(i=1;i<32;i++)
    {
       cmbDay.Item.Add(i.ToString());
    }
   } 
```

像这样你也可以做其他月份的验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T12:04:53.673

在 for 循环语句中写入 Item

像 cmbDay.Items.Add(i.ToString()); cmbDay.Items.Add(i.ToString());

# php - 从 PHP 中的文本制作图像。需要有一定的宽度

> ID：12872494
> 
> 赞同：1
> 
> 时间：2012-10-13T11:05:52.617
> 
> 标签：php, gd

> **可能重复：**
> [使（文本到图像）图像具有一定宽度但无限长度？](https://stackoverflow.com/questions/12872193/make-a-text-to-image-image-a-certain-width-but-unlimited-length)

我想用一大段文字制作图像。文本将包含在 $content 中。如何将该文本制作成宽度为 700 像素的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:11:16.637

去[这里](http://www.daftlogic.com/projects-text-to-image.htm)你会找到你需要的所有东西

或者试试这个代码

```
<?php
$text="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";

$arrText=explode("\n",wordwrap($text,75,"\n"));//change number 75 here to check the wordwrap

$im = @imagecreate(700,500); //creates an image (width,height)
$background_color = imagecolorallocate($im, 0, 0, 0); //sets image background color
$y=5; //vertical position of text
foreach($arrText as $arr)
{
  $white=imagecolorallocate($im,255,255,255); //sets text color
  imagestring($im,5,15,$y,trim($arr),$white); //create the text string for image,added trim() to remove unwanted chars
  $y=$y+15;

}
header("Content-type: image/png");
imagepng($im);
imagedestroy($im);
?> 
```

# python - Getpass 错误

> ID：12872495
> 
> 赞同：3
> 
> 时间：2012-10-13T11:06:01.090
> 
> 标签：python, fabric

以下结构脚本是我需要使用的开源代码，不幸的是我不熟悉这些东西。结构文件以：

```
from fabric.api import *
import time

env.user = 'aegir'
env.shell = '/bin/bash -c'

# Download and import a platform using Drush Make
def build_platform(site, profile, webserver, dbserver, makefile, build):
  print "===> Building the platform..."
  run("drush make %s /var/aegir/platforms/%s" % (makefile, build)) 
```

当 Git 推送触发新构建时，结构文件由 Jenkins 服务器运行。执行此文件时，第一个远程操作（最后一行）会导致以下错误。

```
/usr/lib/python2.6/getpass.py:83: GetPassWarning: Can not control echo on the terminal.
  passwd = fallback_getpass(prompt, stream)
Warning: Password input may be echoed.
Password for aegir@o1.sub.aegir.local: ===> Building the platform...
[o1.sub.aegir.local] run: drush make https://raw.github.com/mig5/builds/master/mig5_platform.build /var/aegir/platforms/20121011010955
Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.6/fabric/main.py", line 435, in main
    commands[name](*args, **kwargs)
  File "/usr/local/bin/fabfile.py", line 11, in build_platform
    run("drush make %s /var/aegir/platforms/%s" % (makefile, build))
  File "/usr/lib/pymodules/python2.6/fabric/network.py", line 390, in host_prompting_wrapper
    return func(*args, **kwargs)
  File "/usr/lib/pymodules/python2.6/fabric/operations.py", line 414, in run
    channel = connections[env.host_string]._transport.open_session()
  File "/usr/lib/pymodules/python2.6/fabric/network.py", line 65, in __getitem__
    self[real_key] = connect(user, host, port)
  File "/usr/lib/pymodules/python2.6/fabric/network.py", line 219, in connect
    password = prompt_for_password(password, text)
  File "/usr/lib/pymodules/python2.6/fabric/network.py", line 279, in prompt_for_password
    new_password = getpass.getpass(password_prompt)
  File "/usr/lib/python2.6/getpass.py", line 83, in unix_getpass
    passwd = fallback_getpass(prompt, stream)
  File "/usr/lib/python2.6/getpass.py", line 118, in fallback_getpass
    return _raw_input(prompt, stream)
  File "/usr/lib/python2.6/getpass.py", line 135, in _raw_input
    raise EOFError
EOFError
Build step 'Execute shell' marked build as failure
Finished: FAILURE 
```

我是否必须为 aegir 用户指定密码？我试图在 下包含（我在远程机器上`env.password = ''`删除了 Aegir 的用户密码） ，但这并没有解决任何问题。`passwd --delete aegir``env.user = 'aegir'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:23:26.643

SSH 服务禁止没有密码的用户远程访问。您可以`aegir`在机器上和 fabfile 中为用户设置密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T11:00:56.683

要求登录。为避免交互，您可以从 FABRIC 机器复制公钥并粘贴到 TARGET 机器的 ~/.ssh/authorized_keys

确保： 不包括或排除任何不是密钥的内容（例如引入换行符），密钥必须按原样复制。

并这样做：

```
chmod 600 ~/.ssh/authorized_keys
chmod 700 ~/.ssh/* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-09T22:32:39.207

使用这个功能和炸弹！

```
output['running']  = False     # Avoid fabric to output what it is doing behind the scenes
output['stdout']   = False     # Do not show stdout
output['stderr']   = False     # Do not show stderr
output['status']   = False     # Prevent fabric from using print in some situations (at least in disconnect_all)
output['warnings'] = False     # Avoid fabric from showing messages about failed commands

def run_it(command, user, host, port, keyfile):
    env.host_string = "%s@%s:%s" % (user, host, port)
    env.key_filename = keyfile
    try:
        res = run(command, pty=False, shell=True)
        print "SUCCESS: return_code=%s" % (return_code)
    except Exception, e:
        print "ERROR  : %s" % (e)
        stdout, return_code =  None, None
    return stdout, return_code
```

PS 不要将密钥列表传递给 env.key_filename

# javascript - javascript for循环“跳过值”

> ID：12872501
> 
> 赞同：0
> 
> 时间：2012-10-13T11:06:46.010
> 
> 标签：javascript, parameters, for-loop, return

大家好，我在 jquery 中有一小段代码，但我遇到了问题。似乎for循环跳过了第二个参数（当i = 2时），你能告诉我什么问题吗？

这是代码：

```
 var items = $(".item").length;
    var currentIndex = items;

    place(currentIndex);

    function place(index){
        var s1 = Math.floor(items / 2);

        for (i = 1; i <= items; i++){
            (function(i, index){

                if (i <= s1){
                    var id = findNext(1, i);
                    console.log("i = " + i + " > id = " + id);
                } else if ( i > s1){
                    console.log("i = " + i);
                }

            })(i, index);
        }
    }

    function findNext(index, times){
        var result = index;

        for (i = 1; i <= times; i++){
            if (result == items){
                result = 1;
            } else {
                result ++;
            }
        }

        return result;
    } 
```

控制台输出显示：

```
i = 1 > id = 2
i = 3
i = 4 
```

所以似乎 for 循环跳过了第二个参数（当 i = 2 时）你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:18:37.883

`var id = findNext(1, i);``i=2`由于舀取，分配返回 3 。请参考此链接：[http ://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:21:00.363

在函数内部的主循环中`place`，您定义了一个全局变量`i`。您在内部执行相同操作，`findNext`从而覆盖原始`i`变量。`i`使用关键字进行定义，`var`因此它只能在创建它的范围内访问。

```
for (var i = 0; i <= items; i++) { 
```

# c++ - 使用 OpenGL 的 C++ 代码中未解决的外部问题

> ID：12872504
> 
> 赞同：3
> 
> 时间：2012-10-13T11:07:20.903
> 
> 标签：c++, opengl, unresolved-external

这是我的（好吧不是我的:)）代码：

```
/*
 *      This Code Was Created By Jeff Molofee 2000
 *      A HUGE Thanks To Fredric Echols For Cleaning Up
 *      And Optimizing This Code, Making It More Flexible!
 *      If You've Found This Code Useful, Please Let Me Know.
 *      Visit My Site At nehe.gamedev.net
 */

#include <windows.h>        // Header File For Windows
#include <gl\gl.h>          // Header File For The OpenGL32 Library
#include <gl\glu.h>         // Header File For The GLu32 Library
#include <gl\GLaux.h>       // Header File For The Glaux Library

HDC         hDC=NULL;       // Private GDI Device Context
HGLRC       hRC=NULL;       // Permanent Rendering Context
HWND        hWnd=NULL;      // Holds Our Window Handle
HINSTANCE   hInstance;      // Holds The Instance Of The Application

bool    keys[256];          // Array Used For The Keyboard Routine
bool    active=TRUE;        // Window Active Flag Set To TRUE By Default
bool    fullscreen=TRUE;    // Fullscreen Flag Set To Fullscreen Mode By Default

LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);   // Declaration For WndProc

GLvoid ReSizeGLScene(GLsizei width, GLsizei height)     // Resize And Initialize The GL Window
{
    if (height==0)                                      // Prevent A Divide By Zero By
    {
        height=1;                                       // Making Height Equal One
    }

    glViewport(0,0,width,height);                       // Reset The Current Viewport

    glMatrixMode(GL_PROJECTION);                        // Select The Projection Matrix
    glLoadIdentity();                                   // Reset The Projection Matrix

    // Calculate The Aspect Ratio Of The Window
    gluPerspective(45.0f,(GLfloat)width/(GLfloat)height,0.1f,100.0f);

    glMatrixMode(GL_MODELVIEW);                         // Select The Modelview Matrix
    glLoadIdentity();                                   // Reset The Modelview Matrix
}

int InitGL(GLvoid)                                      // All Setup For OpenGL Goes Here
{
    glShadeModel(GL_SMOOTH);                            // Enable Smooth Shading
    glClearColor(0.0f, 0.0f, 0.0f, 0.5f);               // Black Background
    glClearDepth(1.0f);                                 // Depth Buffer Setup
    glEnable(GL_DEPTH_TEST);                            // Enables Depth Testing
    glDepthFunc(GL_LEQUAL);                             // The Type Of Depth Testing To Do
    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);  // Really Nice Perspective Calculations
    return TRUE;                                        // Initialization Went OK
}

int DrawGLScene(GLvoid)                                 // Here's Where We Do All The Drawing
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clear Screen And Depth Buffer
    glLoadIdentity();                                   // Reset The Current Modelview Matrix
    return TRUE;                                        // Everything Went OK
}

GLvoid KillGLWindow(GLvoid)                             // Properly Kill The Window
{
    if (fullscreen)                                     // Are We In Fullscreen Mode?
    {
        ChangeDisplaySettings(NULL,0);                  // If So Switch Back To The Desktop
        ShowCursor(TRUE);                               // Show Mouse Pointer
    }

    if (hRC)                                            // Do We Have A Rendering Context?
    {
        if (!wglMakeCurrent(NULL,NULL))                 // Are We Able To Release The DC And RC Contexts?
        {
            MessageBox(NULL,TEXT("Release Of DC And RC Failed."),TEXT("SHUTDOWN ERROR"),MB_OK | MB_ICONINFORMATION);
        }

        if (!wglDeleteContext(hRC))                     // Are We Able To Delete The RC?
        {
            MessageBox(NULL,TEXT("Release Rendering Context Failed."),TEXT("SHUTDOWN ERROR"),MB_OK | MB_ICONINFORMATION);
        }
        hRC=NULL;                                       // Set RC To NULL
    }

    if (hDC && !ReleaseDC(hWnd,hDC))                    // Are We Able To Release The DC
    {
        MessageBox(NULL,TEXT("Release Device Context Failed."),TEXT("SHUTDOWN ERROR"),MB_OK | MB_ICONINFORMATION);
        hDC=NULL;                                       // Set DC To NULL
    }

    if (hWnd && !DestroyWindow(hWnd))                   // Are We Able To Destroy The Window?
    {
        MessageBox(NULL,TEXT("Could Not Release hWnd."),TEXT("SHUTDOWN ERROR"),MB_OK | MB_ICONINFORMATION);
        hWnd=NULL;                                      // Set hWnd To NULL
    }

    if (!UnregisterClass(TEXT("OpenGL"),hInstance))         // Are We Able To Unregister Class
    {
        MessageBox(NULL,TEXT("Could Not Unregister Class."),TEXT("SHUTDOWN ERROR"),MB_OK | MB_ICONINFORMATION);
        hInstance=NULL;                                 // Set hInstance To NULL
    }
}

/*  This Code Creates Our OpenGL Window.  Parameters Are:                   *
 *  title           - Title To Appear At The Top Of The Window              *
 *  width           - Width Of The GL Window Or Fullscreen Mode             *
 *  height          - Height Of The GL Window Or Fullscreen Mode            *
 *  bits            - Number Of Bits To Use For Color (8/16/24/32)          *
 *  fullscreenflag  - Use Fullscreen Mode (TRUE) Or Windowed Mode (FALSE)   */

BOOL CreateGLWindow(char* title, int width, int height, int bits, bool fullscreenflag)
{
    GLuint      PixelFormat;            // Holds The Results After Searching For A Match
    WNDCLASS    wc;                     // Windows Class Structure
    DWORD       dwExStyle;              // Window Extended Style
    DWORD       dwStyle;                // Window Style
    RECT        WindowRect;             // Grabs Rectangle Upper Left / Lower Right Values
    WindowRect.left=(long)0;            // Set Left Value To 0
    WindowRect.right=(long)width;       // Set Right Value To Requested Width
    WindowRect.top=(long)0;             // Set Top Value To 0
    WindowRect.bottom=(long)height;     // Set Bottom Value To Requested Height

    fullscreen=fullscreenflag;          // Set The Global Fullscreen Flag

    hInstance           = GetModuleHandle(NULL);                // Grab An Instance For Our Window
    wc.style            = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;   // Redraw On Size, And Own DC For Window.
    wc.lpfnWndProc      = (WNDPROC) WndProc;                    // WndProc Handles Messages
    wc.cbClsExtra       = 0;                                    // No Extra Window Data
    wc.cbWndExtra       = 0;                                    // No Extra Window Data
    wc.hInstance        = hInstance;                            // Set The Instance
    wc.hIcon            = LoadIcon(NULL, IDI_WINLOGO);          // Load The Default Icon
    wc.hCursor          = LoadCursor(NULL, IDC_ARROW);          // Load The Arrow Pointer
    wc.hbrBackground    = NULL;                                 // No Background Required For GL
    wc.lpszMenuName     = NULL;                                 // We Don't Want A Menu
    wc.lpszClassName    = TEXT("OpenGL");                               // Set The Class Name

    if (!RegisterClass(&wc))                                    // Attempt To Register The Window Class
    {
        MessageBox(NULL,TEXT("Failed To Register The Window Class."),TEXT("ERROR"),MB_OK|MB_ICONEXCLAMATION);
        return FALSE;                                           // Return FALSE
    }

    if (fullscreen)                                             // Attempt Fullscreen Mode?
    {
        DEVMODE dmScreenSettings;                               // Device Mode
        memset(&dmScreenSettings,0,sizeof(dmScreenSettings));   // Makes Sure Memory's Cleared
        dmScreenSettings.dmSize=sizeof(dmScreenSettings);       // Size Of The Devmode Structure
        dmScreenSettings.dmPelsWidth    = width;                // Selected Screen Width
        dmScreenSettings.dmPelsHeight   = height;               // Selected Screen Height
        dmScreenSettings.dmBitsPerPel   = bits;                 // Selected Bits Per Pixel
        dmScreenSettings.dmFields=DM_BITSPERPEL|DM_PELSWIDTH|DM_PELSHEIGHT;

        // Try To Set Selected Mode And Get Results.  NOTE: CDS_FULLSCREEN Gets Rid Of Start Bar.
        if (ChangeDisplaySettings(&dmScreenSettings,CDS_FULLSCREEN)!=DISP_CHANGE_SUCCESSFUL)
        {
            // If The Mode Fails, Offer Two Options.  Quit Or Use Windowed Mode.
            if (MessageBox(NULL,TEXT("The Requested Fullscreen Mode Is Not Supported By\nYour Video Card. Use Windowed Mode Instead?"),TEXT("NeHe GL"),MB_YESNO|MB_ICONEXCLAMATION)==IDYES)
            {
                fullscreen=FALSE;       // Windowed Mode Selected.  Fullscreen = FALSE
            }
            else
            {
                // Pop Up A Message Box Letting User Know The Program Is Closing.
                MessageBox(NULL,TEXT("Program Will Now Close."),TEXT("ERROR"),MB_OK|MB_ICONSTOP);
                return FALSE;                                   // Return FALSE
            }
        }
    }

    if (fullscreen)                                             // Are We Still In Fullscreen Mode?
    {
        dwExStyle=WS_EX_APPWINDOW;                              // Window Extended Style
        dwStyle=WS_POPUP;                                       // Windows Style
        ShowCursor(FALSE);                                      // Hide Mouse Pointer
    }
    else
    {
        dwExStyle=WS_EX_APPWINDOW | WS_EX_WINDOWEDGE;           // Window Extended Style
        dwStyle=WS_OVERLAPPEDWINDOW;                            // Windows Style
    }

    AdjustWindowRectEx(&WindowRect, dwStyle, FALSE, dwExStyle);     // Adjust Window To True Requested Size

    // Create The Window
    if (!(hWnd=CreateWindowEx(  dwExStyle,                          // Extended Style For The Window
                                TEXT("OpenGL"),                     // Class Name
                                TEXT("title"),                              // Window Title
                                dwStyle |                           // Defined Window Style
                                WS_CLIPSIBLINGS |                   // Required Window Style
                                WS_CLIPCHILDREN,                    // Required Window Style
                                0, 0,                               // Window Position
                                WindowRect.right-WindowRect.left,   // Calculate Window Width
                                WindowRect.bottom-WindowRect.top,   // Calculate Window Height
                                NULL,                               // No Parent Window
                                NULL,                               // No Menu
                                hInstance,                          // Instance
                                NULL)))                             // Dont Pass Anything To WM_CREATE
    {
        KillGLWindow();                             // Reset The Display
        MessageBox(NULL,TEXT("Window Creation Error."),TEXT("ERROR"),MB_OK|MB_ICONEXCLAMATION);
        return FALSE;                               // Return FALSE
    }

    static  PIXELFORMATDESCRIPTOR pfd=              // pfd Tells Windows How We Want Things To Be
    {
        sizeof(PIXELFORMATDESCRIPTOR),              // Size Of This Pixel Format Descriptor
        1,                                          // Version Number
        PFD_DRAW_TO_WINDOW |                        // Format Must Support Window
        PFD_SUPPORT_OPENGL |                        // Format Must Support OpenGL
        PFD_DOUBLEBUFFER,                           // Must Support Double Buffering
        PFD_TYPE_RGBA,                              // Request An RGBA Format
        bits,                                       // Select Our Color Depth
        0, 0, 0, 0, 0, 0,                           // Color Bits Ignored
        0,                                          // No Alpha Buffer
        0,                                          // Shift Bit Ignored
        0,                                          // No Accumulation Buffer
        0, 0, 0, 0,                                 // Accumulation Bits Ignored
        16,                                         // 16Bit Z-Buffer (Depth Buffer)  
        0,                                          // No Stencil Buffer
        0,                                          // No Auxiliary Buffer
        PFD_MAIN_PLANE,                             // Main Drawing Layer
        0,                                          // Reserved
        0, 0, 0                                     // Layer Masks Ignored
    };

    if (!(hDC=GetDC(hWnd)))                         // Did We Get A Device Context?
    {
        KillGLWindow();                             // Reset The Display
        MessageBox(NULL,TEXT("Can't Create A GL Device Context."),TEXT("ERROR"),MB_OK|MB_ICONEXCLAMATION);
        return FALSE;                               // Return FALSE
    }

    if (!(PixelFormat=ChoosePixelFormat(hDC,&pfd))) // Did Windows Find A Matching Pixel Format?
    {
        KillGLWindow();                             // Reset The Display
        MessageBox(NULL,TEXT("Can't Find A Suitable PixelFormat."),TEXT("ERROR"),MB_OK|MB_ICONEXCLAMATION);
        return FALSE;                               // Return FALSE
    }

    if(!SetPixelFormat(hDC,PixelFormat,&pfd))       // Are We Able To Set The Pixel Format?
    {
        KillGLWindow();                             // Reset The Display
        MessageBox(NULL,TEXT("Can't Set The PixelFormat."),TEXT("ERROR"),MB_OK|MB_ICONEXCLAMATION);
        return FALSE;                               // Return FALSE
    }

    if (!(hRC=wglCreateContext(hDC)))               // Are We Able To Get A Rendering Context?
    {
        KillGLWindow();                             // Reset The Display
        MessageBox(NULL,TEXT("Can't Create A GL Rendering Context."),TEXT("ERROR"),MB_OK|MB_ICONEXCLAMATION);
        return FALSE;                               // Return FALSE
    }

    if(!wglMakeCurrent(hDC,hRC))                    // Try To Activate The Rendering Context
    {
        KillGLWindow();                             // Reset The Display
        MessageBox(NULL,TEXT("Can't Activate The GL Rendering Context."),TEXT("ERROR"),MB_OK|MB_ICONEXCLAMATION);
        return FALSE;                               // Return FALSE
    }

    ShowWindow(hWnd,SW_SHOW);                       // Show The Window
    SetForegroundWindow(hWnd);                      // Slightly Higher Priority
    SetFocus(hWnd);                                 // Sets Keyboard Focus To The Window
    ReSizeGLScene(width, height);                   // Set Up Our Perspective GL Screen

    if (!InitGL())                                  // Initialize Our Newly Created GL Window
    {
        KillGLWindow();                             // Reset The Display
        MessageBox(NULL,TEXT("Initialization Failed."),TEXT("ERROR"),MB_OK|MB_ICONEXCLAMATION);
        return FALSE;                               // Return FALSE
    }

    return TRUE;                                    // Success
}

LRESULT CALLBACK WndProc(   HWND    hWnd,           // Handle For This Window
                            UINT    uMsg,           // Message For This Window
                            WPARAM  wParam,         // Additional Message Information
                            LPARAM  lParam)         // Additional Message Information
{
    switch (uMsg)                                   // Check For Windows Messages
    {
        case WM_ACTIVATE:                           // Watch For Window Activate Message
        {
            if (!HIWORD(wParam))                    // Check Minimization State
            {
                active=TRUE;                        // Program Is Active
            }
            else
            {
                active=FALSE;                       // Program Is No Longer Active
            }

            return 0;                               // Return To The Message Loop
        }

        case WM_SYSCOMMAND:                         // Intercept System Commands
        {
            switch (wParam)                         // Check System Calls
            {
                case SC_SCREENSAVE:                 // Screensaver Trying To Start?
                case SC_MONITORPOWER:               // Monitor Trying To Enter Powersave?
                return 0;                           // Prevent From Happening
            }
            break;                                  // Exit
        }

        case WM_CLOSE:                              // Did We Receive A Close Message?
        {
            PostQuitMessage(0);                     // Send A Quit Message
            return 0;                               // Jump Back
        }

        case WM_KEYDOWN:                            // Is A Key Being Held Down?
        {
            keys[wParam] = TRUE;                    // If So, Mark It As TRUE
            return 0;                               // Jump Back
        }

        case WM_KEYUP:                              // Has A Key Been Released?
        {
            keys[wParam] = FALSE;                   // If So, Mark It As FALSE
            return 0;                               // Jump Back
        }

        case WM_SIZE:                               // Resize The OpenGL Window
        {
            ReSizeGLScene(LOWORD(lParam),HIWORD(lParam));  // LoWord=Width, HiWord=Height
            return 0;                               // Jump Back
        }
    }

    // Pass All Unhandled Messages To DefWindowProc
    return DefWindowProc(hWnd,uMsg,wParam,lParam);
}

int WINAPI WinMain( HINSTANCE   hInstance,          // Instance
                    HINSTANCE   hPrevInstance,      // Previous Instance
                    LPSTR       lpCmdLine,          // Command Line Parameters
                    int         nCmdShow)           // Window Show State
{
    MSG     msg;                                    // Windows Message Structure
    BOOL    done=FALSE;                             // Bool Variable To Exit Loop

    // Ask The User Which Screen Mode They Prefer
    if (MessageBox(NULL,TEXT("Would You Like To Run In Fullscreen Mode?"), TEXT("Start FullScreen?"),MB_YESNO|MB_ICONQUESTION)==IDNO)
    {
        fullscreen=FALSE;                           // Windowed Mode
    }

    // Create Our OpenGL Window
    if (!CreateGLWindow("NeHe's OpenGL Framework",640,480,16,fullscreen))
    {
        return 0;                                   // Quit If Window Was Not Created
    }

    while(!done)                                    // Loop That Runs While done=FALSE
    {
        if (PeekMessage(&msg,NULL,0,0,PM_REMOVE))   // Is There A Message Waiting?
        {
            if (msg.message==WM_QUIT)               // Have We Received A Quit Message?
            {
                done=TRUE;                          // If So done=TRUE
            }
            else                                    // If Not, Deal With Window Messages
            {
                TranslateMessage(&msg);             // Translate The Message
                DispatchMessage(&msg);              // Dispatch The Message
            }
        }
        else                                        // If There Are No Messages
        {
            // Draw The Scene.  Watch For ESC Key And Quit Messages From DrawGLScene()
            if (active)                             // Program Active?
            {
                if (keys[VK_ESCAPE])                // Was ESC Pressed?
                {
                    done=TRUE;                      // ESC Signalled A Quit
                }
                else                                // Not Time To Quit, Update Screen
                {
                    DrawGLScene();                  // Draw The Scene
                    SwapBuffers(hDC);               // Swap Buffers (Double Buffering)
                }
            }

            if (keys[VK_F1])                        // Is F1 Being Pressed?
            {
                keys[VK_F1]=FALSE;                  // If So Make Key FALSE
                KillGLWindow();                     // Kill Our Current Window
                fullscreen=!fullscreen;             // Toggle Fullscreen / Windowed Mode
                // Recreate Our OpenGL Window
                if (!CreateGLWindow("NeHe's OpenGL Framework",640,480,16,fullscreen))
                {
                    return 0;                       // Quit If Window Was Not Created
                }
            }
        }
    }

    // Shutdown
    KillGLWindow();                                 // Kill The Window
    return (msg.wParam);                            // Exit The Program
} 
```

如何解决未解决的外部问题？我不能发布图片，所以这里是我的 VC++ Express 写的带有一些错误的图片链接：http: [//i.stack.imgur.com/2v2US.png](http://i.stack.imgur.com/2v2US.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T11:14:16.373

未解析的外部通常意味着您没有输入正确的库。在您的项目设置中，您包含了哪些 OpenGL 库？标准是

```
opengl32.lib
glu32.lib 
```

在您的项目链接器设置中。

# php - 解析内容并推入数组

> ID：12872511
> 
> 赞同：1
> 
> 时间：2012-10-13T11:08:35.517
> 
> 标签：php

我从我的 .php 文件中获取内容并希望将其推送到一个数组中，获取的结果类似于：

```
//english error

$lang['error_incorrect_login'] = "The username or password doesn't match. Please try again";

$lang['error_user_exist'] = "The Username already exist in database. Please try using a different Username";

$lang['error_email_exist'] = "Email address already exist in database"; 
```

这是我的 .php 文件的实际内容

我需要像这样的结果数组：

```
array(
    ['error_incorrect_login'] = "The username or password doesn't match. Please try again",
    ['error_user_exist'] = "The Username already exist in database. Please try using a different Username",
    ['error_email_exist'] = "Email address already exist in database"
); 
```

我实际上想解析

```
$lang['error_incorrect_login'] = The username or password doesn't match. Please try again"; 
```

语句的类型并推入类似的数组。

```
array(
        ['error_incorrect_login'] = "The username or password doesn't match. Please try again",
        ['error_user_exist'] = "The Username already exist in database. Please try using a different Username",
        ['error_email_exist'] = "Email address already exist in database"
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:06:16.307

感谢我使用`explode`过**'='的**朋友，如下所示：

```
$lang = '$lang';

$content = array(); 
        while (!feof($fp)) {
            $line = trim(fgets($fp));
            if ( ($line != "<?php if (!defined('BASEPATH')) exit('No direct script access allowed');") && ($line != "") ) {

                $explode = explode("=", $line);
                $content['log'][] = str_replace( "']", "", str_replace( $lang . "['", "", trim( $explode[0] ) ) );

                if (!isset($explode[1]))
                    $msg = "";
                else
                    $msg = str_replace( ";", "", str_replace( "'", "", trim( $explode[1] ) ) );

                $content['msg'][] = $msg;           
            }
        } 
```

# clojure - 如何以及为什么使用 defmulti 和 defmethod？有什么优势？

> ID：12872513
> 
> 赞同：22
> 
> 时间：2012-10-13T11:08:41.170
> 
> 标签：clojure

我想知道为什么要使用 defmulti & defmethod？有什么优势？以及如何使用它？请解释代码中发生了什么。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-13T12:06:09.813

在“一般术语”中，您可以将其称为类固醇上的 if/else，在“打动我”风格中，您可以将其命名为“动态调度”、“运行时多态性”等。

假设您要定义一个函数“Add”，它应该适用于各种数据类型，例如在 Int 的情况下它应该添加数字，在字符串的情况下它应该连接字符串。现在使用 if else 实现它非常简单，基本上你检查参数的类型，如果它们是整数，则添加它们，如果它们是字符串，则连接它们，否则抛出异常。但是这样做的问题是，如果您想在 Add 函数中添加对新数据类型的支持，您将需要**修改**Add 函数，这在您不控制 Add 源的情况下可能是不可能的，例如它在某些库等中定义的案例， `defmulti`并`defmethod`允许您解决此问题，即在不修改其代码的情况下向现有函数添加新案例。

`(defmulti add (fn [a b] [(type a) (type b)]))`

add 是函数名，匿名函数是你的 if/else，基本上这将在你的 add 参数上调用，如果有任何实现，将检查这个函数的返回值。现在让我们为 Integer 实现它。

`(defmethod add [Integer Integer] ([a b] (+ a b)))`

`[Integer Integer]`是在我们定义的匿名函数的返回值上排序 switch case，`defmulti`然后是实现。

同样我们可以为字符串做

`(defmethod add [String String] ([a b] (str a b)))`

用整数调用它 `(add (int 1) (int 2))`

用字符串调用它 `(add "hello" "world")`

使用与我们的 if/else 不匹配的东西调用它，即尚未实现案例将导致异常

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-13T13:47:09.830

根据我在阅读答案（并使用上面提供的示例）后观察到的情况，以下内容也有助于理解：

当你执行命令时：

```
(add (int 5) (int 2)) 
```

发生的事情是执行了“add defmulti”，从而产生了一个列表：

```
[Integer Integer] 
```

生成后，它会查找上面列表中标识的任何“添加定义方法”，即：

```
(add [Integer Integer]) 
```

并传递它收到的论点。

定义多方法以使参数传递清晰的另一种方法是：

```
(defmulti add (fn [a b] [(type a) (type b)]))
(defmethod add [Integer Integer] [a b] (+ a b))
(defmethod add [String String] [a b] (str a b)) 
```

然后将函数运行为：

```
(add 12 73) 
```

或者

```
(add "thank" "you") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-12T11:12:48.080

多方法有助于根据传递的参数调用方法。它可以基于参数的类型/或基于参数的某些属性调用相应的方法。示例 1 基于类型

```
test=> (defmulti multiply (fn [a b] [(type a) (type b)]))
#'test/multiply
test=> (defmethod multiply [Integer Integer] [a b] (* a b))
#object[clojure.lang.MultiFn 0x189f7b45 "clojure.lang.MultiFn@189f7b45"]
test=> (defmethod multiply [String String] [a b] (str a b))
#object[clojure.lang.MultiFn 0x189f7b45 "clojure.lang.MultiFn@189f7b45"]
test=> (multiply 10 10)
test=> (multiply (int 10) (int 10))
100
test=> (multiply "10" "10")
"1010" 
```

示例 2 基于属性

```
test=> (defmulti mn (fn[a b] ( < a b ) ))
#'test/mn
test=> (defmethod mn true [a b] (+ a b) )
#object[clojure.lang.MultiFn 0x700f6a44 "clojure.lang.MultiFn@700f6a44"]
test=> (defmethod mn false [a b] (- a b) )
#object[clojure.lang.MultiFn 0x700f6a44 "clojure.lang.MultiFn@700f6a44"]
test=> (mn 1 2)
3
test=> (mn 2 1)
1
test=> (mn 1 1)
0 
```

# php - PHP 警告破坏 JSON 响应

> ID：12872515
> 
> 赞同：15
> 
> 时间：2012-10-13T11:08:45.920
> 
> 标签：php, json

我正在为我的 php 应用程序（使用 CodeIgniter）实现一个 ajax 文件上传。

我根据[http://andrewcurioso.com/2010/06/detecting-file-size-overflow-in-php/](http://andrewcurioso.com/2010/06/detecting-file-size-overflow-in-php/)检测上传的 POST 数据是否过大（>post_max_size）并尝试发送适当的 JSON 编码错误回复。

但是输出中包含的相应 php 警告完全破坏了我的 JSON 响应！

```
<br />
<b>Warning</b>:  POST Content-Length of 105906405 bytes exceeds the limit of 8388608 bytes in <b>Unknown</b> on line <b>0</b><br />
[{"error":"Posted data is too large. 105906405 bytes exceeds the maximum size of 8388608 bytes."}] 
```

我不想在客户端解析和过滤警告，这看起来很难看。并且全局禁用所有 php 警告似乎不合适。

**我可以在 php 函数的上下文中禁用特定的 PHP 警告吗？还是将其包装在有效的 json 响应中？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-13T11:12:08.617

*在生产服务器上：*始终禁用 php 警告。

*在开发机器上：* 禁用该页面的所有警告以进行测试，并在测试完成并确认功能正常工作后重新启用。

*提示*：我更喜欢全局设置一个变量，并根据该变量启用或禁用所有 php 和数据库警告通知。`.htaccess`例如，如果您使用 apache ，您可以设置它。我有这个`.htaccess`：

*   生产：`SetEnv DEVELOPMENT Off`
*   发展：`SetEnv DEVELOPMENT On`

在php代码中：

```
if( strtolower(getenv('DEVELOPMENT')) == "on" ) {
        ini_set("display_errors",2);
        ini_set('error_reporting', E_ALL | E_STRICT);
} 
```

要禁用 .htaccess 中的所有错误，请使用

```
php_flag display_startup_errors off
php_flag display_errors off
php_flag html_errors off
php_value docref_root 0
php_value docref_ext 0 
```

如果您想变得非常棘手，可以添加如下检查：

```
if(error_get_last() !== null) 
```

并设置一个 http 标头并从 javascript 中检查 json 输出和加载页面时检查错误日志或在屏幕上显示错误（如果您愿意），我仍然强烈建议您禁用显示代码的错误生产环境。

有关此问题的更深入讨论，请查看[这篇文章](http://perishablepress.com/advanced-php-error-handling-via-htaccess/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-28T12:56:12.413

我刚刚在实现上传脚本时遇到了同样的问题，该脚本需要与调用脚本进行通信。一些 php 警告破坏了输出响应。

我已经使用了 php 输出缓冲功能。这就是我摆脱警告输出消息的方式：

```
ob_start(); // start output buffering (we are at the beginning of the script)

[ ... ] // the script actual functionality is unchanged

ob_end_clean(); // this clears any potential unwanted output

exit($my_json_encoded_response); // and this just outputs my intended response 
```

这解决了我的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T11:13:10.930

您可以设置用户定义的错误处理程序：[http ://www.php.net/manual/en/function.set-error-handler.php](http://www.php.net/manual/en/function.set-error-handler.php)

您还可以使用输出缓冲函数来包装它。`ob_start`，`ob_end_flush`等。

但是，最好在生产系统中`error_reporting`设置PHP `false`，然后捕获错误并将它们包装在 JSON 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T11:14:54.713

或者您可以更改 php.ini 文件上的帖子最大大小：

```
post_max_size = 10M //change this line to whatever fits your needs 
```

但是根据用户应该上传的内容，您还应该尝试检查他们正在上传的文件的文件大小。

# sql - 你如何逃避这个正则表达式？

> ID：12872516
> 
> 赞同：2
> 
> 时间：2012-10-13T11:08:57.523
> 
> 标签：sql, regex, postgresql

我在找

> “家庭医学博士”（2004 年）

之后有任何东西。我试过 `where id~'"House M\.D\." \(2004\).*';`了，没有匹配

这有效`id~'.*House M.D..*2004.*';`，但有点慢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T11:20:18.023

我怀疑您使用的是较旧的 PostgreSQL 版本，默认情况下该版本以不符合标准的 C-escape-like 模式解释字符串，因此反斜杠被视为转义并使用。试试`SET standard_conforming_strings = 'on';`。

根据字符串常量的[词法结构](http://www.postgresql.org/docs/9.2/static/sql-syntax-lexical.html#SQL-SYNTAX-STRINGS)文档，您可以：

*   确保`standard_conforming_strings`打开，在这种情况下，您必须将任何单引号加倍（即`'`变为`''`）但反斜杠不被视为转义：

    `id ~ '"House M\.D\." \(2004\)'`

*   使用非标准的、特定于 PostgreSQL 的`E''`语法并将反斜杠加倍：

    `id ~ E'"House M\\.D\\." \\(2004\\)'`

PostgreSQL 9.1 及以上版本默认设置`standard_conforming_strings`为`on`；请参阅[文档](http://www.postgresql.org/docs/current/static/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)。

您应该在测试代码后在旧版本中打开它，因为它会使以后的更新更加容易。您可以在全局`postgresql.conf`、在每个用户级别上使用`ALTER ROLE ... SET`、在每个数据库级别上使用`ALTER DATABASE ... SET`或在会话级别上使用`SET standard_conforming_strings = on`。用于`SET LOCAL`在事务范围内设置它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T11:15:35.200

看起来你的正则表达式没问题

[http://sqlfiddle.com/#!12/d41d8/113](http://sqlfiddle.com/#!12/d41d8/113)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:27:45.473

```
CREATE OR REPLACE FUNCTION public.regexp_quote(IN TEXT) 
  RETURNS TEXT 
  LANGUAGE plpgsql 
  STABLE 
AS $$ 
/******************************************************************************* 
 * Function Name: regexp_quote 
 * In-coming Param: 
 *   The string to decoded and convert into a set of text arrays. 
 * Returns: 
 *   This function produces a TEXT that can be used as a regular expression 
 *   pattern that would match the input as if it were a literal pattern. 
 * Description: 
 *   Takes in a TEXT in and escapes all of the necessary characters so that 
 *   the output can be used as a regular expression to match the input as if 
 *   it were a literal pattern. 
 ******************************************************************************/ 
BEGIN 
  RETURN REGEXP_REPLACE($1, '([[\\](){}.+*^$|\\\\?-])', '\\\\\\1', 'g'); 
END; 
$$ 
```

测试：

```
SELECT regexp_quote('"House M.D." (2004)'); -- produces: "House M\\.D\\." \\(2004\\) 
```

# asp.net - 使用 FormsAuthentication 更改登录用户的用户名

> ID：12872522
> 
> 赞同：1
> 
> 时间：2012-10-13T11:09:49.843
> 
> 标签：asp.net

我在我的 ASP.NET 应用程序（不是整个 asp.net 成员资格）中使用 FormsAuthentication。

当用户登录时，我对数据库进行验证并使用以下代码创建身份验证 cookie：

```
FormsAuthentication.RedirectFromLoginPage(txtUsername.Text, RememberMe.Checked); 
```

我的问题是，如何处理用户更改用户名？由于 cookie 有不同的用户名，我的应用程序崩溃了。

我可以修改身份验证令牌，还是只注销用户？

# php - Symfony 2 + Doctrine 2 覆盖实体配置

> ID：12872523
> 
> 赞同：4
> 
> 时间：2012-10-13T11:09:51.483
> 
> 标签：php, symfony, doctrine-orm

我有一个案例，我需要跨多个应用程序（位于同一个项目中）**重用常见的学说实体。**这些应用程序仅仅是相应机构使用的信息系统的实例。

我已将所有实体和存储库隔离到单独的捆绑包中，到目前为止，这就像一个魅力。**问题是：**我收到了一个要求，即只有其中一些实例需要支持其他一些功能。修改将包括向某些实体添加新的属性/关系。

这是一个简短的例子：

我们有一所大学，它有许多教师单位（即实例）。信息系统的建立只支持**学士**课程，但一个月前我们收到了支持**专业**和**硕士**课程的要求。他们想处理所有他们认为相同的应用程序实例。**这仅适用于其中一些实例**。

**问题：**有没有办法“覆盖”受影响的实体，同时保持原始实体的功能？我可以完全覆盖实体配置（YAML 或注释，不重要）吗？我真的很想保留代码库而不是将所有实体/存储库复制到另一个包...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-24T06:46:48.513

您可以通过捕获事件来覆盖实体加载的类元数据。

## 事件监听器

```
<?php

namespace Lol\RandomBundle\EventListener;

use Doctrine\ORM\Event\LoadClassMetadataEventArgs;

class ClassMetadataListener
{
    /**
     * Run when Doctrine ORM metadata is loaded.
     *
     * @param LoadClassMetadataEventArgs $eventArgs
     */
    public function loadClassMetadata(LoadClassMetadataEventArgs $eventArgs)
    {
        $classMetadata = $eventArgs->getClassMetadata();

        // Override User class to flag MappedSuperclass.
        if ('AnotherLol\AnotherRandomBundle\Entity\User' === $classMetadata->name) {
            // Do whatever you want...
            $classMetadata->isMappedSuperclass = true;
        }
    }
} 
```

## 服务配置

```
services:
    lol.random.listener.class_metadata:
        class: Lol\RandomBundle\EventListener\ClassMetadataListener
        tags:
            -  { name: doctrine.event_listener, event: loadClassMetadata } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T21:16:17.257

Sympatch 提供工具来覆盖 Symfony2 项目的任何代码部分，包括实体，而不会破坏代码库。请参阅[https://github.com/DHorchler/SympatchBundle](https://github.com/DHorchler/SympatchBundle)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T11:46:08.730

我不知道[这](http://symfony.com/doc/master/cookbook/bundles/override.html#entities-entity-mapping)是什么意思。看起来这是可能的，但尚未记录。我不知道文档或代码是否正在进行中。

[在本期](https://github.com/symfony/symfony-docs/issues/978)中，stof 表示根本不可能。

我认为您应该为此使用 SCM 分支。

# java - Java 到数据库连接：异常

> ID：12872524
> 
> 赞同：-1
> 
> 时间：2012-10-13T11:09:51.277
> 
> 标签：java, database

我正在将我的 java 程序连接到 mysql 数据库。但是我执行了一个异常块而不是连接，即“连接失败！！”。

```
 import java.sql.*;
  public class Mysqltest 
 {
public static void main(String args[])
{
    String username ="root";
    String password ="bharath12";
    String url ="jdbc:mysql://localhost:3307/";
    String dbName = "sample";
    String driver= "com.mysql.jdbc.Driver";
    Connection con =null;
    try
    {
        Class.forName(driver).newInstance();
        con=DriverManager.getConnection(url+dbName, username, password);
        System.out.println("Connection successfully established.");
        con.close();
        System.out.println("Connection terminated !");
    }
    catch(Exception e)
    {
        System.out.println("Connection failed !!");
    }
}
    } 
```

上述代码中的错误是什么？我在安装过程中故意将mysql端口更改为3307（因此，localhost：3307）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:34:07.330

你不应该有额外的空间，只允许分隔符在 Windows 的类路径变量中`;` 所以你的`CLASSPATH`变量应该如下所示 -

```
C:\Program Files\Apache Software Foundation\Tomcat 7.0\lib\servlet-api.jar;C:\Program Files\Java\jdk1.7.0_07\lib\mysql-connector-java-5.1.22-bin.jar; 
```

`mysql`jar之前的类路径中有一个空格。

继续前进，建议使用带`-cp`选项的类路径而不是全局类路径，`CLASSPATH`因为全局类路径优先于应用程序类路径，如果在全局类路径中提到的不同 jar 中有相同的类名称，则会产生问题。

您也可以开始使用编辑器，在其中您可以简单地在构建路径中`Eclipse`添加所需的文件。`jar`

# php - PHP AJAX 加载更多

> ID：12872530
> 
> 赞同：0
> 
> 时间：2012-10-13T11:10:34.640
> 
> 标签：php, jquery, mysql, ajax

嗨，我有一个脚本，当用户单击加载更多按钮时，ajax 将请求新内容并显示给用户，但是我有一个问题，如果所有内容都已加载并且如果用户单击加载更多按钮，则会导致错误并重复显示多个加载更多按钮。以下是我的代码，需要知道如何解决这个问题。如果没有内容加载按钮需要被禁用。谢谢大家！

ajax_more.php

```
 <?php
include("config.php");

if(isSet($_POST['lastmsg']))
{
$lastmsg=$_POST['lastmsg'];
$result=mysql_query("select * from messages where mes_id<'$lastmsg' limit 3");
$count=mysql_num_rows($result);
while($row=mysql_fetch_array($result))
{
$msg_id=$row['mes_id'];
$message=$row['msg'];
?>

<li>
<?php echo $message; ?>
</li>

<?php
}

?>

<div id="more<?php echo $msg_id; ?>" class="morebox">
<a href="#" id="<?php echo $msg_id; ?>" class="more">more</a>
</div>

<?php
}
?> 
```

加载更多.php

```
<?php
include('config.php');

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Twitter Style load more results.</title>
<link href="frame.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/
libs/jquery/1.3.0/jquery.min.js"></script>

<script type="text/javascript">
$(function() {
//More Button
$('.more').live("click",function() 
{
var ID = $(this).attr("id");
if(ID)
{
$("#more"+ID).html('<img src="moreajax.gif" />');

$.ajax({
type: "POST",
url: "ajax_more.php",
data: "lastmsg="+ ID, 
cache: false,
success: function(html){
$("ol#updates").append(html);
$("#more"+ID).remove();
}
});
}
else
{
$(".morebox").html('The End');

}

return false;

});
});

</script>
<style>
body
{
font-family:Arial, 'Helvetica', sans-serif;
color:#000;
font-size:15px;

}
a { text-decoration:none; color:#0066CC}
a:hover { text-decoration:underline; color:#0066cc }
*
{ margin:0px; padding:0px }
ol.timeline
    { list-style:none}ol.timeline li{ position:relative;border-bottom:1px #dedede dashed; padding:8px; }ol.timeline li:first-child{}
    .morebox
    {
    font-weight:bold;
    color:#333333;
    text-align:center;
    border:solid 1px #333333;
    padding:8px;
    margin-top:8px;
    margin-bottom:8px;
    -moz-border-radius: 6px;-webkit-border-radius: 6px;
    }
    .morebox a{ color:#333333; text-decoration:none}
    .morebox a:hover{ color:#333333; text-decoration:none}
    #container{margin-left:60px; width:580px }

</style>
</head>

<body>
<div style="padding:4px; margin-bottom:10px; border-bottom:solid 1px #333333; "><h3>Tutorial Link <a href="http://9lessons.blogspot.com/2009/12/twitter-style-load-more-results-with.html">Click Here</a></h3></div>
<div id='container'>
<ol class="timeline" id="updates">
<?php
$sql=mysql_query("select * from messages  LIMIT 3");
while($row=mysql_fetch_array($sql))
{
$msg_id=$row['mes_id'];
$message=$row['msg'];
?>
<li>
<?php echo $message; ?>
</li>
<?php } ?>
</ol>
<div id="more<?php echo $msg_id; ?>" class="morebox">
<a href="#" class="more" id="<?php echo $msg_id; ?>">more</a>
</div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:16:01.440

```
<?php
include("config.php");

$count=0;
$done=false;
if(isSet($_POST['lastmsg']))
{
$lastmsg=$_POST['lastmsg'];
$result=mysql_query("select * from messages where mes_id<'$lastmsg' limit 3");
$check=mysql_result(mysql_query("select mes_id from messages ORDER BY mes_id ASC limit 1"));
$count=mysql_num_rows($result);
while($row=mysql_fetch_array($result))
{
$msg_id=$row['mes_id'];
$message=$row['msg'];
if($row['mes_id']==$check){$done=true;}
$count++;
?>

<li>
<?php echo $message; ?>
</li>

<?php
}

if($count>0 && !$done){
?>

<div id="more<?php echo $msg_id; ?>" class="morebox">
<a href="#" id="<?php echo $msg_id; ?>" class="more">more</a>
</div>

<?php
}
}
?> 
```

解释：您无条件地输出更多链接。进行更改后，脚本会在输出更多链接之前检查是否从表中加载了超过 0 条消息。我还更新了它以检查当前批次是否是最后一批，如果是，则不输出更多的 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:33:25.067

试试这个代码；

```
 $.ajax({
**$("#load_buton").attr("disabled","disabled");**
    type: "POST",
    url: "ajax_more.php",
    data: "lastmsg="+ ID, 
    cache: false,
    success: function(html){
    $("ol#updates").append(html);
    $("#more"+ID).remove();
**$("#load_buton").removeAttr("disabled");**
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T11:25:57.577

在 php 部分，仅当您返回的行大小计数大于 0 时才显示更多按钮

边缘情况：

1.  如果您的数据库表大小增加 n 行，则每次点击更多时您将重复 n 条记录
2.  如上，但如果记录被删除，你会错过记录

安全问题：

1.  通过在最后一个消息发布字段中发送“0”；截断消息；-- 进行 SQL 注入
2.  跨站点脚本 - 如果用户可以使用 HTML/JavaScript 提交消息，它们将在内容中返回而不会转义。

在上述两种情况下，使用。MySQL 转义字符串 ( [http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php) )，或使用 mysqli，并使用 htmlentities ( [http://php.net/manual/en/function .htmlentities.php](http://php.net/manual/en/function.htmlentities.php) )

# node.js - 带有 NodeJS 模块的 VJET

> ID：12872543
> 
> 赞同：1
> 
> 时间：2012-10-13T11:11:50.490
> 
> 标签：node.js, node-mysql, vjet

我刚刚使用 VJET 插件将 NodeJS 项目导入 Eclipse。它理解一些 NodeJS 似乎很好，但我不喜欢它不识别 Node-MySQL。是否有关于如何编写项目（如 NodejsTL）来填补缺失功能的文档？我可以分析 NodejsTL 之一，但如果有任何文档和教程 - 我就不必了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:05:43.243

是的，有一些关于创建类型库的主题的文档。

[http://www.ebayopensource.org/wiki/display/VJET/VJET+Type+lib+Tutorial+-+part+1](http://www.ebayopensource.org/wiki/display/VJET/VJET+Type+lib+Tutorial+-+part+1)

有人提出了一些工作来帮助解决这个问题，我们目前正在寻求帮助来扩展 VJET 来完成这项工作。这是与此请求相关的票证。

[https://www.ebayopensource.org/jira/browse/VJET-87](https://www.ebayopensource.org/jira/browse/VJET-87) [https://www.ebayopensource.org/jira/browse/VJET-88](https://www.ebayopensource.org/jira/browse/VJET-88)

# html - 跨度和标签的宽度问题

> ID：12872551
> 
> 赞同：0
> 
> 时间：2012-10-13T11:13:19.680
> 
> 标签：html, css

我对带有 span 标签的链接的宽度有疑问，您可以在此处查看：

[JSFiddle 示例](http://jsfiddle.net/ZQUvj/)

您可以看到链接 2 的宽度比视觉提示的要大吗？知道这里发生了什么吗？

链接 1 的宽度也很宽，但隐藏在链接 2 之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:16:58.040

它渲染正确，我猜你的流与边框颜色不匹配，你一定在找这个吗？

对我来说没什么错

[**我的小提琴**](http://jsfiddle.net/ZQUvj/3/)

编辑：注意你已经给了边框`span`而不是`a`，如果这是重点，它应该是[**这个**](http://jsfiddle.net/ZQUvj/4/)，因为它`<a>`会占用`100%`宽度，因为它是一个块级元素

# javascript - 从数组中获取值时 SQLite DELETE 事务不起作用

> ID：12872557
> 
> 赞同：2
> 
> 时间：2012-10-13T11:14:30.477
> 
> 标签：javascript, sql, html, sqlite, web-storage

这真让我抓狂。

我有一个消息队列，当设备离线并且有互联网连接时它会发送这些消息时，我正在使用本地存储 Web DB 来存储这些消息。在它发送消息后，我希望它们从表中删除。

当我发送消息时，我会保留一个名为 MessageIDs 的数组，这样我就可以引用需要删除的行。

我遍历 MessageID 的长度并获取每个 ID 并进行 DELETE 事务。我的 alert() 获得了正确的值，但是当事务执行时，该值未定义。我尝试将一个已知的“ID”硬编码到事务中并且它起作用了。有什么想法吗？

```
 var MessageIDs = new Array();

//In the block of code not shown I populate MessageIDs and send out messages

for(var j=0; j < MessageIDs.length; j++)
{
  alert(MessageIDs[j]); //Pulls the right value
  site.data.database.transaction(  
            function (transaction) {  
                //[MessageIDs[j]] has a value of undefined and thus doesn't get deleted but the transaction doesn't technically fail either
                transaction.executeSql("DELETE FROM Messages WHERE id = ?;", [MessageIDs[j]],  
                    site.contact.removeQueuedMessagesSuccess, site.contact.removeQueuedMessagesError);  
            }  
        ); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:24:25.793

抱歉，我不能将此作为评论，所以在这里作为答案，扩展 DCoder 的答案：您也可以将循环放在事务中，然后它也可以工作。不过，他的解决方案更清洁。

编辑：也许我应该说明为什么这个添加并不重要：显然，你不能总是以这种方式组合查询。因此，在开始嵌套事务之前，只需将查询循环放在一个事务中即可。

# php - 突出显示无效的表单输入

> ID：12872558
> 
> 赞同：8
> 
> 时间：2012-10-13T11:14:32.893
> 
> 标签：php, javascript, jquery, html, css

我一直在努力创建一个包含用户名、密码等字段的表单。我想在单击提交按钮时进行验证。

我试图从我的边框颜色中获得警报。所有字段都有效我的边框必须变为绿色如果有任何错误，它应该变为红色。

任何人对我的问题有任何想法

如果有人有任何建议？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-13T12:21:44.397

您可以使用 jquery 插件....在这里。[JQuery 表单验证自定义示例](http://jsfiddle.net/coder2/Kzy2J/12/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T12:47:46.157

使用 jQuery 验证插件：[http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

在此插件中，您必须为字段定义验证规则。您还可以为给定的验证规则设置给定字段的错误消息。

此插件将类添加到有效和无效字段。

您必须为该课程提供 css。

例如：

```
$(document).ready(function(){
        $(".my_form").validate({
                    rules:{  // validation rules
                            email_address: {
                                required:true,
                                email: true
                            },
                            password:{
                                minlength: 6
                            },
                            confirm_password: {
                                         equalTo:"#password"
                            }
                    },
                    messages: {
                        email_address: {
                           required: "Please enter email address",
                           email: "Please enter valid email address",
                       },
                       /*
                          likewise you can define messages for different field 
                          for different rule.
                       */
                    }
                    errorClass: "signup_error",  
                     /*This is error class that will be applied to 
                      invalid element. Use this class to style border. 
                      You can give any class name.*/
                });
      }); 
```

一旦您点击提交按钮，并且字段无效，插件将类添加到您指定为的元素中`errorClass`，并且当您在字段中输入有效值时，插件将删除该类并`'valid'`默认添加类。

您可以使用这两个类使用简单元素来设置有效和无效元素的样式。

```
.valid {
   border-color:"green"
}

.signup_error {
  border-color:"red"
} 
```

希望这可以解决您的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-13T11:58:15.523

Js我要走的路。如果你用谷歌搜索，你可以找到一些非常好的 jQuery 验证器。

要自定义构建一个简单的验证器，我会这样

```
<form class="validator">
  <input type="text" name="my-input-1" data-validator="integer"/>
  <input type="text" name="my-input-2" data-validator="email"/>
  ....
</form>

<script>
   $("form.validator").submit(evt, function() {
      var errors = 0;
      $(this).find('[data-validator]').each(function(e, i) {
         var value = $(this).value;
         switch($(this).data('validator')) {
            case 'integer':
               if (!(parseFloat(value) == parseInt(value)) && !isNaN(value)) {
                  $(this).css({'border-color': '#FF0000'});
                  errors++;
               } else
                  $(this).css({'border-color': '#000000'});
               break;
            case 'email':
               if (..... // regex validate email ...) {
                  $(this).css({'border-color': '#FF0000'});
                  errors++;
               } else
                  $(this).css({'border-color': '#000000'});
               break;
         }
      });
      if (errors > 0) {
         // If you want to prevent default event execution no matter what
         evt.preventDefault();
         // If you want you other attached events to NOT run
         evt.stopPropagation();
         // signal failure
         return false;
      }

      // All is well, go on
      return true;
   });
</script> 
```

当然，为每个验证器构建函数总是一个好习惯，甚至更好地将整个东西包装在一个 jQuery 小部件中（我建议使用 jQuery Widget Factory），这将允许您在未来增强它并让您灵活地进行更改

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-03T10:37:24.153

您可以使用 DOJO 库来验证表单字段。这很容易实现。

下面给出了实现dojo的教程

[http://dojotoolkit.org/documentation/tutorials/1.6/validation/](http://dojotoolkit.org/documentation/tutorials/1.6/validation/)

这是您可以看到的工作示例...

[http://dojotoolkit.org/documentation/tutorials/1.6/validation/demo/dijitcheck.html](http://dojotoolkit.org/documentation/tutorials/1.6/validation/demo/dijitcheck.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-04T03:31:31.530

我为一般的 javascript 目的制作了一个验证库。它甚至是单元测试的！你也可以很容易地覆盖任何你想要的东西：[https ://github.com/parris/iz](https://github.com/parris/iz)

至于突出显示无效字段，您可以更改该字段的样式或添加一个类。下面的示例只是更改了输入的背景颜色并添加了一条消息。

工作示例：http: [//jsfiddle.net/soparrissays/4BrNu/1/](http://jsfiddle.net/soparrissays/4BrNu/1/)

```
$(function() {
    var message = $("#message"),
        field = $("#field");
    $("#the-form").submit(function(event) {
        if (iz(field.val()).alphaNumeric().not().email().valid){
            message.text("Yay! AlphaNumeric and not an email address");
            field.attr("style","background:green;");
        } else {
            message.text("OH no :(, it must be alphanumeric and not an email address");
            field.attr("style","background:red;");
        }
        return false;
    });
});​ 
```

验证器称为 iz。它只是让您将验证链接在一起，它会告诉您是否所有内容都通过了，或者您是否检查了“错误”对象，它会为您提供更多细节。除此之外，您可以指定自己的错误消息。检查 github 上的文档。

这里发生的事情是，一旦页面准备就绪，我们正在为提交事件设置一个点击处理程序。`return false;`在提交回调的底部阻止表单提交。如果你`return true;`的表格将继续。您也可以使用 return false 而不是 return false，`event.preventDefault();`但我更喜欢 return 语法以保持一致性。在具有多个表单元素的现实世界中，您可能会执行以下操作（伪代码）：

```
var passed = true;
if (check field 1 is false)
    ...
if (check field 2 is false)
    ...
if (check field n is false)
    passed = false
    style and add message

if passed
    return true
else
    return false 
```

if 语句检查验证规则并相应地更改 DOM。通过这种方式，您可以提供所有通过和失败字段的完整列表，并完整描述不正确的内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-05T11:11:04.330

我过去使用过[这个插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，使实现变得非常容易，并且有很好的文档和示例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-09T17:39:17.187

您需要的服务器端验证示例。你可以试试看。

```
<?php

error_reporting(0);

$green = "border: 3px solid green";
$red="border: 3px solid red";
$nothing="";

$color = array ("text1"=>$nothing , "text2"=>$nothing) ;

if ( $_POST['submit'] ) {

    if($_POST['text1']) {
        $color['text1'] = $green;       
    }

    else $color['text1'] = $red;

    if($_POST['text2'] ) {
        $color['text2'] = $green;
    }

    else $color['text2'] = $red;
}

?>

<form method="post">
    <input type="text" name="text1" style="<?php echo $color ['text1']?>" value="<?php echo $_POST['text1']?>">
    <input type="text" name="text2" style="<?php echo $color ['text2']?>" value="<?php echo $_POST['text2']?>">
    <input type="submit" name="submit">

</form> 
```

* * *

## 笔记

1.  始终**清理**用户输入。
2.  error_reporting off 根本不是一个好习惯。我这样做是因为这不是生产环境的代码。
3.  在尝试使用 isset 或类似的函数访问 post 数组之前进行检查。
4.  使用前请务必检查变量是否存在。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-07T14:05:01.840

我的建议是使用 jQuery

尝试首先创建多个输入并给它们一个类

html:

```
<input type="text" class="validate" value="asdf" />
<input type="text" class="validate" value="1234" />
<input type="text" class="validate" value="asd123" />
<input type="text" class="validate" value="£#$&" />
<input type="text" class="validate" value="  " /> 
```

然后使用下面的代码来看看它是如何工作的

jQuery：

```
// Validate Function
function validate(element) {
    var obj = $(element);
    if (obj.val().trim() != "") {
        // Not empty
        if (!/^[a-zA-Z0-9_ ]{1,10}$/.test(obj.val())) {
            // Invalid
            obj.css('border-color', '#FAC3C3');
            if (!obj.next().hasClass('error'))
            { obj.after('<span class="error">Please use letters or numbers only and not more than 10 characters!</span>'); }
            else
            { obj.next().text('Please use letters or numbers only and not more than 10 characters!'); }
        } else {
            // Valid
            obj.css('border-color', 'lightgreen');
            if (obj.next().hasClass('error'))
            { obj.next().remove(); }
        }
    } else {
        // Empty
        obj.css('border-color', '#FAC3C3');
        if (obj.next().hasClass('error'))
        { obj.next().text('This field cannot be empty!'); }
        else
        { obj.after('<span class="error error-keyup-1">This field cannot be empty!</span>'); }
    }
}

$(document).ready(function() {
    // Each
    $('.validate').each(function() {
        // Validate
        validate(this);
        // Key up
        $(this).keyup(function() {
            // Validate
            validate(this);
        });
    });
}); 
```

jsfiddle：http: [//jsfiddle.net/BerkerYuceer/nh2Ja/](http://jsfiddle.net/BerkerYuceer/nh2Ja/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-09T15:24:29.457

嗨，您可以在表单字段中使用 html5“必需”和“模式”。如果错误，您将获得红色边框，如果正确，您将获得绿色边框。如果颜色不是您想要的，您甚至可以设置 :valid 和 :invalid 输入字段的样式。我从来没有测试过，但为什么不呢，总比没有好；）

[html5解决方案](http://www.alsacreations.com/tuto/lire/1392-formulaire-html5-placeholder-required-pattern.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-07T06:57:04.297

检查下面的链接，这里我只检查了空字段，如果字段为空，则更改输入字段 ID，这将更改输入字段边框颜色。 [http://jsfiddle.net/techprasad/jBG7L/2/](http://jsfiddle.net/techprasad/jBG7L/2/)

我用过

```
$("#myb").click(function(){ 
```

那是按钮单击事件，但您可以使用提交事件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-05T17:02:59.523

可能最简单的方法是使用这个 javascript： http: [//livevalidation.com/examples#exampleComposite](http://livevalidation.com/examples#exampleComposite)

我认为它最适合你的描述。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-17T09:38:21.960

```
$("#btn").click(function(){
        // Check all of them 
        if( $.trim($("#file").val()) == ""){
            $("#file").css("border","1px solid #ff5555");
        }else{
            $("#file").css("border","1px solid #cccccc");
            if( $.trim($("#showboxResimBaslik").val()) == ""){
                $("#showboxResimBaslik").css("border","1px solid #ff5555");
            }else{
                $("#showboxResimBaslik").css("border","1px solid #cccccc");
                if( $.trim($("#showboxResimEtiket").val()) == ""){
                    $("#showboxResimEtiket").css("border","1px solid #ff5555");
                }else{  
                    if($.trim($("#showboxResimSehir").val()) == ""){
                        $("#showboxResimSehir").css("border","1px solid #ff5555");
                    }else{
                        $("#showboxResimSehir").css("border","1px solid #cccccc");
                        $("#resimYukleForm").removeAttr("onSubmit");
                        $('#resimYukleForm').bind('submit', form_submit);
                    }
                }

            }

        }
    }); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-11-09T04:55:12.243

这就是我要说的是在 jQuery 中执行此操作的简短精确和简洁的方法。

HTML：

```
<form id="myform" name="form"  action="http://www.google.com">
                    <div class="line"><label>Your Username</label><input class="req" type="text" /></div>
                    <div class="line"><label>Your Password</label><input class="req" type="password" /></div>
                    <div class="line"><label>Your Website</label><input class="req" type="text" /></div>
                    <div class="line"><label>Your Message</label><textarea  class="req"></textarea></div>
                    <div class="line"><input type="submit" id="sub"></submit>

                </form> 
```

CSS：

```
.line{padding-top:10px;}
        .inline input{padding-left: 20px;}
        label{float:left;width:120px;} 
```

jQuery：

```
$(function() {
            function validateform() {
                var valid = true;
                $(".req").css("border","1px solid green");
                $(".req").each(function() {
                    if($(this).val() == "" ||  $(this).val().replace(/\s/g, '').length == 0) {
                        $(this).css("border","1px solid red");
                        valid = false;
                    }
                });
                return valid;
                }

                $("#sub").click(function() {
                $('#myform').submit(validateform);
                    $('#myform').submit();
                });

        }); 
```

[**现场演示**](http://jsfiddle.net/refhat/FhNv7/)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2012-10-13T11:37:11.337

首先学习javascript，如果你有一些js的基础知识并且需要了解逻辑，请继续阅读。首先你需要一个事件处理程序来在表单提交上运行一个函数最简单的方法是（尽管有更好的方法）

```
<form action="som.php" onsubmit="functionName()"> 
```

在这里形成

```
</form> 
```

这将触发名为 functionname 的函数。在函数名称中，函数访问输入字段并使用正则表达式进行验证

```
function functionName()
{
//verification code
if(verified)
{
//code to change border to green
}

} 
```

您需要获取输入字段并验证它们。如果您不知道如何操作，请获取一些 Javascript 书籍 **如果您需要在输入值后立即进行验证，请在输入字段上使用 onchange 事件**

# iphone - 在调用之前编辑视图控制器中的标签（在情节提要中）

> ID：12872560
> 
> 赞同：0
> 
> 时间：2012-10-13T11:14:49.220
> 
> 标签：iphone, ios

所以我为我的应用程序使用了故事板。在调用视图控制器（带有标签的视图控制器）之前，如何在情节提要内的另一个视图控制器上编辑标签？提前致谢

# json - 从 Node.js 中的 TCP 套接字读取字符串时的问题

> ID：12872563
> 
> 赞同：11
> 
> 时间：2012-10-13T11:15:06.577
> 
> 标签：json, node.js, sockets

我已经实现了一个使用 TCP 套接字进行通信的客户端/服务器。我写入套接字的数据是字符串化的 JSON。最初一切都按预期工作，但是，随着写入速率的提高，我最终遇到 JSON 解析错误，客户端的开头在旧写入的结尾接收到新写入的开头。

这是服务器代码：

```
var data = {};
data.type = 'req';
data.id = 1;
data.size = 2;
var string = JSON.stringify(data);
client.write(string, callback()); 
```

这是我在客户端服务器上接收此代码的方式：

```
client.on('data', function(req) {
    var data = req.toString();
    try {
        json = JSON.parse(data);
    } catch (err) {
         console.log("JSON parse error:" + err);
    } 
}); 
```

随着费率的增加，我收到的错误是：

```
SyntaxError: Unexpected token { 
```

这似乎是下一个请求的开始，被标记到当前请求的末尾。

我试过使用 ; 作为每个 JSON 请求末尾的分隔符，然后使用：

```
 var data = req.toString().substring(0,req.toString().indexOf(';')); 
```

然而，这种方法，而不是导致 JSON 解析错误，似乎导致完全丢失客户端上的一些请求，因为我将写入速率提高到每秒 300 以上。

是否有任何最佳实践或更有效的方法来分隔通过 TCP 套接字的传入请求？

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-16T16:11:40.703

感谢大家的解释，他们帮助我更好地理解了通过 TCP 套接字发送和接收数据的方式。下面是我最后使用的代码的简要概述：

```
var chunk = "";
client.on('data', function(data) {
    chunk += data.toString(); // Add string on the end of the variable 'chunk'
    d_index = chunk.indexOf(';'); // Find the delimiter

    // While loop to keep going until no delimiter can be found
    while (d_index > -1) {         
        try {
            string = chunk.substring(0,d_index); // Create string up until the delimiter
            json = JSON.parse(string); // Parse the current string
            process(json); // Function that does something with the current chunk of valid json.        
        }
        chunk = chunk.substring(d_index+1); // Cuts off the processed chunk
        d_index = chunk.indexOf(';'); // Find the new delimiter
    }      
}); 
```

欢迎评论...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T10:00:33.573

使用分隔符，您走在正确的轨道上。但是，您不能只提取分隔符之前的内容，对其进行处理，然后丢弃它之后的内容。您必须缓冲分隔符之后得到的任何内容，然后连接它旁边的内容。这意味着您可以在给定`data`事件之后得到任意数量（包括 0）的 JSON“块”。

基本上你保留一个缓冲区，你初始化为`""`. 在每个`data`事件上，您将收到的任何内容连接到缓冲区的末尾，然后`split` ~~将其~~连接到分隔符上的缓冲区。结果将是一个或多个条目，但最后一个可能不完整，因此您需要测试缓冲区以确保它以分隔符结尾。如果没有，则弹出最后一个结果并将缓冲区设置为它。然后，您处理剩余的任何结果（可能不是任何结果）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-14T10:19:27.153

请注意，TCP 不保证它在哪里划分您收到的数据块。它所保证的是，您发送的所有字节都将按顺序接收，除非连接完全失败。

`data`我相信只要套接字说它有数据给你，节点事件就会出现。从技术上讲，您可以为 JSON 数据中的每个字节获取单独`data`的事件，并且它仍然在操作系统允许执行的操作范围内。没有人这样做，但是您的代码需要编写得好像它可以随时突然发生以保持健壮。您可以组合数据事件，然后沿着对您有意义的边界重新拆分数据流。

为此，您需要缓冲任何不“完整”的数据，包括附加到“完整”数据块末尾的数据。如果您使用定界符，切勿丢弃定界符之后的任何数据——始终将其作为前缀保留，直到您看到更多数据并最终看到另一个定界符或结束事件。

另一种常见的选择是在所有数据前面加上一个长度字段。假设您使用固定的 64 位二进制值。然后你总是等待 8 个字节，加上这些字节中的值表示的更多，到达。假设您有一大块十字节的数据传入。您可能会在一个事件中获得 2 个字节，然后是 5 个字节，然后是 4 个字节——此时您可以解析长度并知道您还需要 7 个字节，因为第三个块的最后 3 个字节是有效负载。如果下一个事件实际上包含 25 个字节，那么您将获取前 7 个字节以及之前的 3 个字节并对其进行解析，并在字节 8-16 中查找另一个长度字段。

这是一个人为的例子，但请注意，在低流量速率下，网络层通常会将您的数据以您提供的任何块发送出去，因此这种事情只有在您增加负载时才会真正开始出现。一旦操作系统开始一次从多个写入构建数据包，它将开始以方便网络而不是您的粒度进行拆分，您必须处理它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-17T09:10:18.990

在此响应之后：

```
var chunk = "";
client.on('data', function(data) {
    chunk += data.toString(); // Add string on the end of the variable 'chunk'
    d_index = chunk.indexOf(';'); // Find the delimiter

    // While loop to keep going until no delimiter can be found
    while (d_index > -1) {         
        try {
            string = chunk.substring(0,d_index); // Create string up until the delimiter
            json = JSON.parse(string); // Parse the current string
            process(json); // Function that does something with the current chunk of valid json.        
        }
        chunk = chunk.substring(d_index+1); // Cuts off the processed chunk
        d_index = chunk.indexOf(';'); // Find the new delimiter
    }      
}); 
```

我遇到了分隔符问题，因为`;`它是我发送的数据的一部分。

可以使用此更新来实现自定义分隔符：

```
var chunk = "";
const DELIMITER = (';;;');
client.on('data', function(data) {
    chunk += data.toString(); // Add string on the end of the variable 'chunk'
    d_index = chunk.indexOf(DELIMITER); // Find the delimiter

    // While loop to keep going until no delimiter can be found
    while (d_index > -1) {         
        try {
            string = chunk.substring(0,d_index); // Create string up until the delimiter
            json = JSON.parse(string); // Parse the current string
            process(json); // Function that does something with the current chunk of valid json.        
        }
        chunk = chunk.substring(d_index+DELIMITER.length); // Cuts off the processed chunk
        d_index = chunk.indexOf(DELIMITER); // Find the new delimiter
    }      
}); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-10-13T11:55:52.450

尝试`end`事件但没有数据

```
var data = '';

client.on('data', function (chunk) {
  data += chunk.toString();
});

client.on('end', function () {
  data = JSON.parse(data); // use try catch, because if a man send you other for fun, you're server can crash.
}); 
```

希望能帮到你。

# c++ - 在一行上打印矩阵

> ID：12872565
> 
> 赞同：-1
> 
> 时间：2012-10-13T11:15:28.993
> 
> 标签：c++, c, matrix

我有这个矩阵：

```
1 2 3 4 5
6 7 8 9 A
B C D E F
0 1 2 3 4 
```

我希望它打印在一行中，如下所示：

```
1 6 2 B 7 3 0 C 8 4 1 D 9 5 2 E A 3 F 4. 
```

最简单的方法是如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:00:19.923

使用嵌套循环。外环距离 (0,0)

内循环 i 和 j 的所有有效组合，总和为距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:19:52.457

```
#include <iostream>

int main(int argc, char **argv)
{
    char m[4][5] = { { '1', '2', '3', '4', '5' },
             { '6', '7', '8', '9', 'A' },
             { 'B', 'C', 'D', 'E', 'F' },
             { '0', '1', '2', '3', '4' } };

    for (int i = 0; i <= 3; ++i) {
        for (int j = 0; j <= i; ++j) {
            std::cout << m[i - j][j] << " ";
        }
    }

    for (int i = 4; i <= 7; ++i) {
        for (int j = i - 3; j <= 4; ++j) {
            std::cout << m[i - j][j] << " ";
        }
    }

    std::cout << std::endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:00:46.807

如果矩阵存储在这样的数组中：

```
#include <stdio.h> 
int main(void) { 
  char matrix[4][5] = {{'1','2','3','4','5'},
                       {'6','7','8','9','A'},
                       {'B','C','D','E','F'},
                       {'0','1','2','3','4'}};
  int cols = 5;
  int rows = 4;
  int i = 0;
  for( i = 0; i < cols + rows -2 ; i++){
    int j = 0;
    while(j <= i){
        int k = i-j;
        if(k < rows && j < cols){
            printf("%c ",matrix[k][j]);
        }
        j++;
    }
  }
} 
```

对于总索引的每个值，我只是从 0 到行和列的总索引（在这种情况下从 0 到 7），打印值，列和行的总和等于当前总索引，如果索引可用（较小比列和行的索引），打印它，否则转义。例如：

```
0 - 00
1 - 10 01
2 - 20 11 02 
```

顺便说一句，似乎需要比其他更多的循环

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T12:20:42.527

I would suggest a `vector<vector<char> >` representation for the matrix(if I assume that you store chars in each cell). An important observation is that for each diagonal you have the sum of the i and j indices a constant and this sum increases by one for the diagonals.

Having noticed this you make an outer cycle over the sum and inner cycle over the x coordinate. Beware not to fall out of the matrix! Now the easiest c++ way to print the matrix would be:

```
vector<vector<char> > a;
for(unsigned sum = 0;  sum < a.size() + a[0].size(); ++sum) {
  for (unsigned j = 0; j <= sum && j < a[0].size(); ++j) {
    unsigned i = sum - j;
    if (i >= a.size()) {
      continue;
    }
    cout << a[i][j] << " ";
  }
} 
```

One can optimize the cycle over j by changing the start value(so that the continue condition is never true) but the code would have been harder to understand. Another nit I did not fix on purpose is that an blank is printed even after the last element. This is yeat another check that needs to be added.

Hope this helps.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-13T11:58:55.663

```
for( int i = 0; i < matrix.cx; i++ ) {
    for( int j = 0; j < matrix.cy; j++ ) {
        std::cout << matrix[i][j] << ' ';
    }
    // comment following line to make matrix printed in one line
    std::cout << std::endl;
} 
```

# php - 某些东西破坏了登录会话

> ID：12872572
> 
> 赞同：1
> 
> 时间：2012-10-13T11:16:00.600
> 
> 标签：php, session

我已经实现了这个[安全登录脚本](http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL)。一切都很好，但是我的文章编辑页面会中断会话或某事。所以如果我来到这个页面，它就可以工作，但是如果我离开这个页面，它就会让我退出。“断页”的代码如下：

```
<?php
  include "includes/db_connect.php";
  include "includes/functions.php";
  sec_session_start();
  $page = $_SERVER['REQUEST_URI'];
  if(login_check($mysqli) == true) {
    include "includes/admin-header.php";
    $dotaz = new mysqli(HOST, USER, PASSWORD, DATABASE);
    if(empty($_GET['id'])){
      $stmt_articles = $dotaz->prepare("SELECT id, title, text FROM articles ORDER BY id DESC LIMIT 1");
      $stmt_articles->execute();
      $stmt_articles->store_result();
      $stmt_articles->bind_result($id_article, $title, $text);
      $stmt_articles->fetch();
    } else {
      $id=$_GET['id'];
      if($stmt_articles = $dotaz->prepare("SELECT id, title, text FROM articles WHERE id = ? LIMIT 1")) { 
      $stmt_articles->bind_param('i', $id);
      $stmt_articles->execute();
      $stmt_articles->store_result();
      $stmt_articles->bind_result($id_article, $title, $text);
      $stmt_articles->fetch();
      }
    } 
?>
  <div id='editation'>
    <div class='edit-title'>
      EDITACE: <a href="#" class='active'>ČLÁNKY</a> / <a href="#">NASTAVENÍ</a> <a href="#">NÁHLED</a>
    </div>
    <div class='edit-submenu'>
      <?php
        $dotaz2 = new mysqli(HOST, USER, PASSWORD, DATABASE);
        if($stmt_vypis = $dotaz2->prepare("SELECT id, title, text FROM articles ORDER BY id DESC LIMIT 0,8")) { 
          //do prepare se imho pouzije limit ?,? a pak se to bude bindovat pokazde jinymi cisly pro scrollovani?
          //$stmt_articles->bind_param('i', $id);
          $stmt_vypis->execute();
          $stmt_vypis->store_result();
          $stmt_vypis->bind_result($id_a, $titulek, $s_text);
          while($stmt_vypis->fetch()){
            echo "<a class='item' href=\"clanky.php?id=".$id_a."\">
                    <img src=\"http://25.media.tumblr.com/avatar_6feb8634e3d0_128.png\"/>
                    <p class='item-title'>".substr($titulek, 0, 20)."</p>
                    <p class='item-author'>Admin</p>
                    <div>
                      <p class='item-teaser'>".substr(strip_tags($s_text), 0, 20)."</p>
                      <p class='item-time'>Před 2 dny</p>
                    </div>
                </a>";            
          }
        }
      ?>
    </div>
    <script type="text/javascript">
      $(document).ready(function(){
        $(".edit-submenu").niceScroll({cursorcolor:"rgba(0, 0, 0, 0.6)"});
      });
    </script>
    <form action="clanky.php" method="post">
      <input type="text" size="80" name="title" value="<?php echo "$title"; ?>" />
      <textarea name="text" cols="100" rows="30"><?php echo "$text"; ?></textarea>
    </form>
  </div>
<?php
    include "includes/admin-footer.php";
  } else {
    if(!headers_sent()){
      header('Location: ./index.php?error=1');
    }
  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:55:53.807

我必须编辑函数 sec_session_start() 并为 session_set_cookie_params() 明确声明我的域。

```
function sec_session_start() {
    $domain = 'example.com'; // note $domain
    $session_name = 'sec_session_id'; // Set a custom session name
    $secure = true; // Set to true if using https.
    $httponly = true; // This stops javascript being able to access the session id. 
    ini_set('session.use_only_cookies', 1); // Forces sessions to only use cookies. 
    $cookieParams = session_get_cookie_params(); // Gets current cookies params.
    session_set_cookie_params($cookieParams["lifetime"], $cookieParams["path"], $domain, $secure, $httponly); // note $domain
    session_name($session_name); // Sets the session name to the one set above.
    session_start(); // Start the php session
    session_regenerate_id(true); // regenerated the session, delete the old one.     
} 
```

# c# - 将项目添加到带有列的列表视图行

> ID：12872575
> 
> 赞同：0
> 
> 时间：2012-10-13T11:16:16.073
> 
> 标签：c#, wpf, listview

所以我试图在我的列表视图中添加一行信息，但是当我这样做时，它会奇怪地显示出来。像这样：

![在此处输入图像描述](../Images/cabd500d4e1b08628d56a42c4d9de98f.png)

我正在使用 for each 循环，如下所示：

```
foreach (Client c in clients)
{
   ListViewItem i = new ListViewItem();
   i.Content = new String[] { c.info.cid.ToString(), c.info.pc.ToString(),c.info.ip.ToString(), c.info.status.ToString() };
   list.Items.Add(i);
} 
```

我的客户端类正在使用结构来存储信息

```
public struct Info
{
  public int cid;
  public string pc;
  public string ip;
  public string status;
} 
```

我也在为它添加值：

```
info = new Info();
info.ip = "192.168.1.100";
info.pc = "Duncan";
info.status = "idle";
info.cid = 1; 
```

为什么显示它奇怪？有人可以帮忙吗？

我的列表视图 XAML：

```
<ListView Height="247" HorizontalAlignment="Left" Margin="4,6,0,0" Name="list" VerticalAlignment="Top" Width="319" Background="#FF454545" ItemsSource="{Binding}" SelectionMode="Multiple" Grid.Column="0">
   <ListView.View>
       <GridView AllowsColumnReorder="False">
       <GridViewColumn Header="ID" Width="30" />
       <GridViewColumn Header="Computer" Width="100" />
       <GridViewColumn Header="IP" Width="100" />
       <GridViewColumn Header="Status" Width="100" />
       </GridView>
    </ListView.View>
    </ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:28:17.260

这段代码有一些错误的地方。如果你想使用绑定在 ListView 中推送数据，你必须有一个有效的 ViewModel 以及要绑定的属性。您必须在 GridViewColumns 上定义绑定。

此外，WPF 不知道如何绑定字段，因此您需要为每个要显示的数据提供 .NET 属性。这是您案例的一个非常原始的示例，这不是一个现实的场景，但应该可以帮助您入门：

**窗口.xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<ListView Height="247" HorizontalAlignment="Left" Margin="4,6,0,0" Name="list" VerticalAlignment="Top" Width="319" Background="#FF454545" ItemsSource="{Binding Clients}" SelectionMode="Multiple" Grid.Column="0">
    <ListView.View>
        <GridView AllowsColumnReorder="False">
            <GridViewColumn Header="ID" Width="30" DisplayMemberBinding="{Binding Id}" />
            <GridViewColumn Header="Computer" Width="100" DisplayMemberBinding="{Binding Computer}" />
            <GridViewColumn Header="IP" Width="100" DisplayMemberBinding="{Binding Ip}" />
            <GridViewColumn Header="Status" Width="100" DisplayMemberBinding="{Binding Status}" />
        </GridView>
    </ListView.View>
</ListView>
</Window> 
```

**主窗口.xaml.cs**

```
/// <summary>
/// Logique d'interaction pour MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;           
    }

    public IEnumerable<DummyClient> Clients
    {
        get
        {
            for (int i = 0; i < 10; i++)
            {
                var info = new Info();
                info.ip = "192.168.1.100";
                info.pc = "Duncan";
                info.status = "idle";
                info.cid = 1;

                yield return new DummyClient(info);
            }
        }
    }
}

public class DummyClient
{
    public DummyClient(Info info)
    {
        Info = info;
    }

    public string Ip { get { return Info.ip; } }
    public string Computer { get { return Info.pc; } }
    public string Status { get { return Info.status; } }
    public int Id { get { return Info.cid; } }

    public Info Info
    {
        get;
        private set;
    }
}

public struct Info
{
    public int cid;
    public string pc;
    public string ip;
    public string status;
} 
```

再一次，这不是真正应该完成的方式，但这是一个开始。例如，如果您想要两种方式的绑定工作，DummyClient 应该实现 INotifyPropertyChanged。

# php - 从模型返回结果到视图（正确的 MVC 概念）

> ID：12872577
> 
> 赞同：0
> 
> 时间：2012-10-13T11:16:26.597
> 
> 标签：php, model-view-controller

我不知道一个好的MVC模式，现在学习......所以，我想做：从数据库中获取行，如果结果没有（0行）打印“我们没有结果”，否则打印结果。

在模型中我有这个 php 代码

```
function getAutos () {
    //here connect to database

    $res = $this->db->query("SELECT names FROM auto");
    if ($res->num_rows == 0) {
        return "we have no results";
    }
    else {
        return $res;
    }

} 
```

这个函数返回对象或字符串，对吧？现在我认为：

```
<!--some html code -->
<?php
$resultFromGetAutos  = /*result from function getAutos ()*/

if (is_object(resultFromGetAutos)) {
     while ($row = resultFromGetAutos->fetch_assoc()) {
         echo row['names']."<br>";
    }
}
else {
    echo resultFromGetAutos;
}
?>
<!--some html code --> 
```

它有效，但据我了解，视图中的许多 PHP 代码不是正确的 MVC，即当我检查视图中的结果类型时：`if (is_object(Resultat)) {do something} else { do other something }` 这不是正确的 MVC 概念吗？如果不正确，在这种情况下正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T11:43:43.717

MVC 中的模型不是类或对象。模型是[层](https://en.wikipedia.org/wiki/Layer_%28object-oriented_design%29)，它包含应用程序中的所有领域业务逻辑。虽然它可能与数据库交互，但它不应该在任何时候直接创建连接。你可能会读到[这篇文章](https://stackoverflow.com/questions/12719730/dependency-injection-how-to-pass-db-around)。它将包含一些方向。

这里的底线是，您所说的“模型”甚至与原始概念都不接近。

至于视图，在正确的 MVC（或 MVC 启发）模式实现中，视图负责所有表示逻辑。这意味着视图会决定用户可以看到什么。它是通过从模型层获取信息来确定的*（在经典MVC和Model2 MVC中直接请求，在MVP和MMVM模式中通过类控制器结构获取）*。

在 Web 应用程序中，视图会创建响应。响应的形式会根据所使用的请求或接口的不同而有所不同。View 可以通过组合多个[模板](http://codeangel.org/articles/simple-php-template-engine.html)来创建响应，也可以只发送一个 HTTP 位置标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:58:30.047

MVC 设计的原则之一是 Model 和 View 不直接相互访问，甚至不知道彼此。
大多数情况下，视图是最愚蠢的。它不应该*理解*它正在显示的数据，而应该理解它应该如何显示“数据”，这可能就是一切。
如果它想要汽车，你应该有一个控制器，它会被视图注意到。然后控制器应该向模型询问汽车，并将模型的返回值解析为视图可以直接显示的格式。
或者，如果您应该在页面加载时已经拥有这些自动，请通过构造函数（示例）进行。
它应该如下*所示*：

```
<View> // you shouldn't include that, that's just that readers notice it is the view.
<?php
    // a bunch of other code
    function AutoView($whatViewShouldDisplay) { // should be the constructor, OOP PHP is not my strongest point
        $content = $whatViewShouldDisplay;
        echo $content;
    }
?>

<Controller>
<?php
    // Bunch of other code
    function AutoController() { // should-be constructor
        $model = new AutoModel();
        $result = $model->getAutos();
        if ($result->num_rows != 0) {
            while ($row = resultFromGetAutos->fetch_assoc()) {
                $viewContent .= row['names']."<br>";
            }
        }
        else {
            $viewContent = "Sorry, no results found.";
        }

        $view = new AutoView($viewContent);
    }
?>

<Model>
<?php
    // Bunch of other code
    function getAutos() {
         return $this->db->query("SELECT names FROM auto");
    }
?> 
```

如您所见，只要模型实现了`getAutos()`返回 SQL 结果集的方法并且视图具有单参数构造函数，您就可以将它们替换为所有内容！

或者，考虑到您的代码：

```
<!--some html code -->
<?php
$text  = $controller->requestContentForThisPlace(); // Something like getMainContent()? I don't know where this is on your page.

echo $text;
?> 
```

您的代码的控制器将实现此方法：

```
function requestContentForThisPlace() {
    $result = $model->getAutos();
    if ($result->num_rows != 0) {
        while ($row = resultFromGetAutos->fetch_assoc()) {
            $content .= row['names']."<br>";
        }
    }
    else {
        $content = "Sorry, no results found.";
    }

    return $content;
} 
```

# c# - 如何在 c#/xaml Windows 商店应用程序中将 RTF 文件注入 RichTextBlock

> ID：12872580
> 
> 赞同：3
> 
> 时间：2012-10-13T11:16:53.217
> 
> 标签：c#, xaml, windows-runtime, richtextbox, windows-store-apps

是否可以打开 RTF 文件然后设置富文本`RichTextBlock`？ `RichTextBox`有`Document.SetText()`方法。我怎么能做同样的事情`RichTextBlock`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:19:55.033

我认为你必须改进你的问题，这不是很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:23:36.397

最后我从 MSDN 的家伙那里找到了[答案。](https://stackoverflow.com/questions/15765004/how-to-display-rtf-in-metro-app/15765218#15765218)`RichTextBlock`不支持 RTF。这是完全令人失望的事情。

# apache-flex - 如何仅在 textinput 中输入文本后启用按钮

> ID：12872582
> 
> 赞同：0
> 
> 时间：2012-10-13T11:17:14.433
> 
> 标签：apache-flex, mxml

我只想在 textinput 中输入文本后启用按钮？如何做到这一点？任何人请帮助我..

`<mx:TextInput id="UserDetail" x="150" y="66" width="200" height="30"/>`

`<mx:Button id="Click" x="124" y="111" width="220" height="50" cornerRadius="10" fontSize="18" enabled="false"/>`

我希望在用户填写 userDetail 或在 TextInput 中输入文本后启用我的“单击”按钮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:29:10.100

```
<mx:Button id="Click" x="124" y="111" width="220" height="50" cornerRadius="10" fontSize="18" enabled="{UserDetail.text.length>0}"/> 
```

# visual-studio-2012 - 从 Visual Studio 部署到仅具有 RDP 访问权限的服务器

> ID：12872583
> 
> 赞同：6
> 
> 时间：2012-10-13T11:17:20.420
> 
> 标签：visual-studio-2012, console-application, remote-desktop

我即将将一些应用程序部署到我只有远程桌面访问权限的服务器上。是否有任何直接的方法可以使用 Visual Studio 做到这一点？我目前的想法是部署到本地文件夹并使用远程桌面的剪贴板访问复制该文件夹。有没有更好的办法？

# php - mysqli::prepare(): 无法获取 MySQL

> ID：12872584
> 
> 赞同：0
> 
> 时间：2012-10-13T11:17:21.533
> 
> 标签：php, mysqli

我开始使用`mysqli_*`函数而不是 PHP 中的旧`mysql_*`函数，但这段代码有点问题：

```
public function addUser($table, $code = false, $rows = false) {
   if (!$code) {
      header("Location: " . $this->authenticate());
   } else {
      $this->getToken($code);
   }
   $user = $this->getEndpoint('users/current', false, true);
   $user = $user->response->user;
   if (!$rows)
        $rows = array(
            "remote_id" => $user->id,
            "firstName" => $user->first_name,
            "lastName" => $user->last_name,
            "photo" => $user->photo->medium,
            "gender" => $user->gender == 'male' ? 1 : 2,
            "email" => $user->contact->email,
        );
   $rows['access_token'] = $this->accessToken;
   $stmt = $this->mysql->prepare("SELECT id FROM users WHERE access_token = '{$this->accessToken}'"); //line 136
   $stmt->execute(); //line 137
} 
```

代码返回以下 2 个错误：

> 警告：mysqli::prepare(): Couldn't fetch MySQL in C:\Users\Grega\Server\application\inc\classes\APIConnect.php on line 136
> 
> 致命错误：在第 137 行的 C:\Users\Grega\Server\application\inc\classes\APIConnect.php 中的非对象上调用成员函数 execute()

“无法获取 MySQL”的原因是什么？数据库连接是正确的，它在其他类中工作，并且查询返回一个有效的结果，如果我回显它并在 phpMyAdmin 中执行它。另外，我的变量名为`mysql`NOT `mysqli`！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:01:50.840

您应该阅读更多关于 MYSQL 与 MYSQLi 之间的区别。

虽然您的代码是：

```
$stmt = $this->mysql->prepare("SELECT id FROM users WHERE access_token = '{$this->accessToken}'"); 
```

你应该这样做：

```
$stmt = $this->mysql->prepare("SELECT id FROM users WHERE access_token = ?");
$stmt->bind_param("s" , $this->accessToken ); //Used 's' as I guess that the accessToken is a string 
```

`binding`部分是事物的关键部分`prepare`。（您的查询是安全的）

之后，您可以使用`$stmt->execute();`和`get_result()`。

# c++ - 如何让 WNDCLASS 将位图图像作为背景？

> ID：12872587
> 
> 赞同：2
> 
> 时间：2012-10-13T11:17:44.303
> 
> 标签：c++, c, windows, winapi, gdi+

我填写了 WNDCLASS 和 hbrBackground 属性到我的位图，比如

`wc.hbrBackground = CreatePatternBrush( LoadBitmap( hInstance, MAKEINTRESOURCE( "grey-texture.bmp" ) ) );`

这似乎根本没有改变，窗口是白色的，就像默认值一样，所以我需要找出这里发生了什么。CreatePatternBrush 不是用于此类事情的正确功能吗？不能以这样的方式完成吗？

> hbrBackground = fromimagefile(string bitmap, bool tile);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:39:55.010

请参阅以下页面：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd162462(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162462(v=vs.85).aspx)

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd183508(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183508(v=vs.85).aspx)

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633576(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633576(v=vs.85).aspx)

有两种类型的画笔，逻辑和物理。CreatePatternBrush 创建一个逻辑画笔，但 RegisterClass 需要一个物理画笔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:56:57.800

当你在你的 RC 文件中插入一个资源时，你可以用一个字符串或一个 int 来命名它，但是内部资源使用字符串来处理它们的资源。因此，当您使用 int 命名时（实际上是在`resource.h`int 中定义的 ID），因此当您拥有使用此类 ID（整数 ID）命名的资源时，您必须使用`MAKEINTRESOURCE`将该 ID 转换为 an`LPCTSTR`并将其传递给加载该资源的函数，但在您的情况下，您传递的是一个字符串`"grey-texture.bmp"`，因此您不应使用`MAKEINTRESOURCE`和记住，`LoadBitmap`该函数旨在从合并到您的执行程序或 DLL 的“.res”文件中加载资源，并且无法在磁盘上加载文件！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:07:00.570

您的代码应该在每个步骤中检查错误。以下只是一个原始样本。

```
HBITMAP hbmp = LoadBitmap(hInstance,MAKEINTRESOURCE(IDB_BITMAP1));
if(NULL == hbmp)
{
    MessageBox(NULL,"BitMap Loading Failed.","Error",MB_ICONEXCLAMATION | MB_OK);
}
else
{
    HBRUSH hbr = CreatePatternBrush(hbmp);
    if(NULL == hbr)
    {
        MessageBox(NULL,"Brush Creation Failed.","Error",MB_ICONEXCLAMATION | MB_OK);
    }
    else
    {
        wc.hbrBackground = hbr;
    }
} 
```

然后，再次回复结果。我不确定您的`LoadBitmap`功能是否有效。就像*BigBoss*所说的，我们通常使用 resource.h 来处理这些事情。如果您想从头开始学习，我建议您阅读[Forger 的教程。](http://www.winprog.org/tutorial/resources.html)

# hadoop - Hadoop Streaming：链接作业

> ID：12872590
> 
> 赞同：16
> 
> 时间：2012-10-13T11:18:03.083
> 
> 标签：hadoop, streaming, chaining

问题是如何使用 Hadoop Streaming（仅）在 Hadoop 中链接作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-31T14:57:29.240

这个答案是提问者实际提出的问题。我通常会引用它，但会弃权，因为它太大了。

* * *

这是关于如何使用[Hadoop Streaming](http://hadoop.apache.org/docs/r1.0.3/streaming.html)（当前为 1.0.3）链接两个或多个流作业的文档。

为了理解将执行链接的最终代码并能够编写任何其他链接工作，需要一些初步但实用的理论。

首先，Hadoop 中的工作是什么？Hadoop 作业是

```
hadoopJob = Configuration + Execution 
```

在哪里，

**配置** ：使执行成为可能的所有设置。

**执行** ：完成所需任务的一组可执行文件或脚本文件。换句话说，就是我们任务的 map 和 reduce 步骤。

```
Configuration = hadoopEnvironment + userEnvironment 
```

在哪里，

**hadoopEnvironment** ：是Hadoop通用环境的搭建。这个通用环境是从资源定义的，即位于 $HADOOP_HOME/conf 目录中的 xml 文件。例如，一些资源是 core-site.xml、mapred-site.xml 和 hadoop-site.xml，它们分别定义了 hdfs 临时目录、作业跟踪器和集群节点数。

**userEnvrironment** ：是运行作业时用户指定的参数。在 Hadoop 中，这些参数称为选项。

```
userEnvironment = genericOptions + streamingOptions 
```

在哪里，

**genericOptions**：它们是通用的，因为它们对每个流式作业都有吸引力，独立于作业。它们是从 GenericsOptionsParser 处理的。

**streamingOptions**：它们是特定于工作的，因为它们对某个工作有吸引力。例如，每个作业都有自己的输入和输出目录或文件。它们由 StreamJob 处理。

示意性地，

```
 hadoopJob
                               /\
                              /  \
                             /    \
                            /      \
                           /        \
                Configuration       Execution
                     /\                 |
                    /  \                |
                   /    \   executable or script files
                  /      \
                 /        \
                /          \
  hadoopEnvironment     userEnvironment
           |                   /\
           |                  /  \
           |                 /    \ 
    $HADOOP_HOME/conf       /      \
                           /        \   
                genericOptions   streamingOptions
                      |                 |
                      |                 |
            GenericOptionsParser    StreamJob 
```

任何人都可以看到，以上所有这些都是一系列配置。一部分是给集群的管理员（hadoopEnvironment），另一部分是给集群的用户（userEnvironment）。总而言之，如果我们暂时忘记执行部分，作业主要是抽象级别的配置。

我们的代码应该处理上述所有问题。现在我们准备好编写代码了。

首先，什么是代码级别的 Hadoop 作业？它是一个 jar 文件。每当我们提交作业时，我们都会提交一个带有一些命令行参数的 jar 文件。例如，当我们运行单个流式作业时，我们执行命令

```
$HADOOP_HOME/bin/hadoop jar $HADOOP_HOME/hadoop/contrib/streaming/hadoop-streaming-1.0.3.jar -D mapred.reduce.tasks=1 -mapper m.py -reducer r.py -input /in.txt -output /out/ 
```

在哪里，

我们的工作是 hadoop-streaming-1.0.3.jar

使用命令行参数 -D mapred.reduce.tasks=1 -mapper m.py -reducer r.py -input /in.txt -output /out/

在这个 jar 里面有我们的类，它可以妥善处理所有事情。

所以，我们打开一个新的 java 文件，比如 TestChain.java，

```
// import everything needed

public class TestChain
{
    //code here
    public static void main( String[] args) throws Exception
    {
        //code here
    }//end main

}//end TestChain 
```

为了处理 hadoopEnvironment，我们的类应该继承类[Configured](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/conf/Configured.html)。配置类使我们能够访问 Hadoop 的环境和参数，即前面提到的资源。资源是 xml 文件，其中包含名称/值对形式的数据。

展望未来，每个界面或多或少都是外部世界与世界想要完成的任务之间的媒介。也就是说，界面是我们用来完成任务的工具。因此，我们的类是一个工具。为此，我们的类必须实现[Tool](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/util/Tool.html)接口，该接口声明了一个方法 run()。这个方法定义了我们的工具行为，当然当接口实现时。最后，为了使用我们的工具，我们使用类[ToolRunner](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/util/ToolRunner.html)。ToolRunner 通过类[GenericOptionsParser](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/util/GenericOptionsParser.html)也有助于处理来自 userEnvironment 的 genericOptions。

```
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.util.ToolRunner;
import org.apache.hadoop.util.Tool;
// import everything else needed

public class TestChain extends Configured implements Tool
{
    public int run( String[] args) throws Exception
    {
        //code here
        return 0;
    }//end run

    public static void main( String[] args) throws Exception
    {
        // ToolRunner handles generic command line options  
        int res = ToolRunner.run( new Configuration(), new TestChain(), args);
        System.exit( res);
    }//end main

}//end TestChain 
```

完成图片，方法run()也称为驱动程序，设置作业，包括作业的初始化和配置。请注意，我们通过方法 ToolRunner.run()的第一个参数“new [Configuration](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/conf/Configuration.html) ”委托给 ToolRunner 处理 hadoopEnnvironment 。

到目前为止我们做了什么？我们只是设置了我们的工具将在其中运行的环境。现在我们必须定义我们的工具，即进行链接。

只要每个链作业都是流式作业，我们就这样创建它们中的每一个。我们使用 StreamJob 类的 StreamJob.createJob(String[] args) 方法来做到这[一点](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/streaming/StreamJob.html)。Strings 的 args 矩阵包含每个作业的“命令行”参数。这些命令行参数是指 userEnvironment 的 streamingOptions(job specific)。此外，这些参数采用参数/值对的形式。例如，如果我们的作业有 in.txt 文件作为输入，/out/ 作为输出目录，m.py 作为映射器，r.py 作为减速器，那么，

```
String[] example = new String[]
{
    "-mapper"   , "m.py"
    "-reducer"  , "r.py"
    "-input"    , "in.txt"
    "-output"   , "/out/"
} 
```

你必须注意两件事。首先，“-”是必要的。正是这个小东西将参数与值区分开来。这里，mapper 是一个参数，m.py 是它的值。区别从“-”来理解。其次，如果在参数的左"和"-"之间添加一个空格，则忽略此参数。如果我们有"-mapper"，则"-mapper"不被视为参数。StreamJob 解析时，args 矩阵看起来对于成对的参数/值。最后一件事，回想一下，作业大致是一个配置。我们期望这样，StreamJob.creatJob() 应该返回一个配置或类似的东西。实际上 StreamJob.createJob() 返回一个[JobConf](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapred/JobConf.html)对象.

假设我们要链接三个工作，

```
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.util.ToolRunner;
import org.apache.hadoop.streaming.StreamJob;
// import everything else needed

public class TestChain extends Configured implements Tool
{
    public int run( String[] args) throws Exception
    {
        String[] job1 = new String[]
        {
            "-mapper"   , "m1.py"
            "-reducer"  , "r1.py"
            "-input"    , "in1.txt"
            "-output"   , "/out1/"
        }
        JobConf job1Conf = new StreamJob.createJob( job1);
        //code here

        String[] job2 = new String[]
        {
            "-mapper"   , "m2.py"
            "-reducer"  , "r2.py"
            "-input"    , "in2.txt"
            "-output"   , "/out2/"
        }
        JobConf job2Conf = new StreamJob.createJob( job2);
        //code here

        String[] job3 = new String[]
        {
            "-mapper"   , "m3.py"
            "-reducer"  , "r3.py"
            "-input"    , "in3.txt"
            "-output"   , "/out3/"
        }
        JobConf job3Conf = new StreamJob.createJob( job3);
        //code here

        return 0;
    }//end run

    public static void main( String[] args) throws Exception
    {
        // ToolRunner handles generic command line options  
        int res = ToolRunner.run( new Configuration(), new TestChain(), args);
        System.exit( res);
    }//end main

}//end TestChain 
```

在这一点上，我们设置了我们的工具将要运行的环境并定义了它的行为。然而，我们还没有付诸行动。ToolRunner 还不够。ToolRunner，作为一个整体运行我们的工具。它不运行单个链作业。我们必须这样做。

有两种方法可以做到这一点。第一种方法是使用[JobClient](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapred/JobClient.html)，第二种方法是使用[JobControl](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/mapred/jobcontrol/JobControl.html)。

## 第一种方式 - JobClient

使用 JobClient，我们按顺序运行链作业，通过为每个作业调用 JobClient，一个作业一个接一个地运行。运行每个单独作业的方法是 JobClient.runJob(jobtorun)，其中 jobtorun 是 JobConf 对象。

```
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.util.ToolRunner;
import org.apache.hadoop.streaming.StreamJob;

public class TestChain extends Configured implements Tool
{
    public int run( String[] args) throws Exception
    {
        String[] job1 = new String[]
        {
            "-mapper"   , "m1.py"
            "-reducer"  , "r1.py"
            "-input"    , "in1.txt"
            "-output"   , "/out1/"
        }
        JobConf job1Conf = new StreamJob.createJob( job1);
        JobClient.runJob( job1Conf);

        String[] job2 = new String[]
        {
            "-mapper"   , "m2.py"
            "-reducer"  , "r2.py"
            "-input"    , "in2.txt"
            "-output"   , "/out2/"
        }
        JobConf job2Conf = new StreamJob.createJob( job2);
        JobClient.runJob( job2Conf);

        String[] job3 = new String[]
        {
            "-mapper"   , "m3.py"
            "-reducer"  , "r3.py"
            "-input"    , "in3.txt"
            "-output"   , "/out3/"
        }
        JobConf job3Conf = new StreamJob.createJob( job3);
        JobClient.runJob( job3Conf);

        return 0;
    }//end run

    public static void main( String[] args) throws Exception
    {
        // ToolRunner handles generic command line options  
        int res = ToolRunner.run( new Configuration(), new TestChain(), args);
        System.exit( res);
    }//end main

}//end TestChain 
```

使用 JobClient 的这种方式的一个优点是作业进度打印在标准输出上。

JobClient 的一个缺点是它不能处理作业之间的依赖关系。

## 第二种方式 - JobControl

使用 JobControl，所有链式作业都是一组作业的一部分。在这里，每个作业都在该组的框架中执行。这意味着必须首先将每个链作业添加到组中，然后运行该组。该组是一个 FIFO，或者该组中每个作业的执行都遵循 FCFS（先到先服务）模式。使用 JobControl.addJob(jobtoadd) 方法将每个作业添加到组中。

JobControl 可以通过方法 x.addDependingJob(y) 处理依赖关系，其中作业 x 依赖于作业 y。这意味着，在作业 y 完成之前，作业 x 无法运行。如果作业 x 依赖于作业 y 和 z 并且 z 独立于 y，那么使用 x.addDependingJob(y) 和 x.addDependingJob(z) 我们可以表达这些依赖关系。

JobControl 与 JobClient 相矛盾，与[Job](http://hadoop.apache.org/docs/r1.0.3/api/org/apache/hadoop/mapred/jobcontrol/Job.html)对象“工作”。例如，当我们调用 x.addDependingJob(y) 方法时，x, y 是 Job 对象。JobControl.addJob(jobtoadd) 也是如此，jobtoadd 是一个 Job 对象。每个 Job 对象都是从 JobConf 对象创建的。回到我们拥有的代码，

```
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.jobcontrol.Job;
import org.apache.hadoop.mapred.jobcontrol.JobControl;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.util.ToolRunner;
import org.apache.hadoop.streaming.StreamJob;

public class TestChain extends Configured implements Tool
{
    public int run( String[] args) throws Exception
    {

        //TestChain below is an arbitrary name for the group
        JobControl jobc = new JobControl( "TestChain");

        String[] job1 = new String[]
        {
            "-mapper"   , "m1.py"
            "-reducer"  , "r1.py"
            "-input"    , "in1.txt"
            "-output"   , "/out1/"
        }
        JobConf job1Conf = new StreamJob.createJob( job1);
        Job job1 = new Job( job1conf);
        jobc.addJob( job1);

        String[] job2 = new String[]
        {
            "-mapper"   , "m2.py"
            "-reducer"  , "r2.py"
            "-input"    , "in2.txt"
            "-output"   , "/out2/"
        }
        JobConf job2Conf = new StreamJob.createJob( job2);
        Job job2 = new Job( job2conf);
        jobc.addJob( job2);

        String[] job3 = new String[]
        {
            "-mapper"   , "m3.py"
            "-reducer"  , "r3.py"
            "-input"    , "/out2/par*"
            "-output"   , "/out3/"
        }
        JobConf job3Conf = new StreamJob.createJob( job3);
        Job job3 = new Job( job3conf);
        job3.addDependingJob( job2);
        jobc.addJob( job3);

        //code here

        return 0;
    }//end run

    public static void main( String[] args) throws Exception
    {
        // ToolRunner handles generic command line options  
        int res = ToolRunner.run( new Configuration(), new TestChain(), args);
        System.exit( res);
    }//end main

}//end TestChain 
```

在上面的代码中，请注意 job3 依赖于 job2。如您所见，job3 的输入是 job2 的输出。这个事实是一个依赖。job3 等到 job2 完成。

到目前为止，我们只是在组中添加了连锁作业并描述了它们的依赖关系。我们需要最后一件事来运行这组作业。

蛮力说只调用方法 JobControl.run()。尽管这种方法有效，但它是有问题的。当链作业完成后，整个作业仍然会永远运行。一种正常工作的方法是从我们已经存在的作业线程定义一个新的执行线程（当作业运行时）。然后我们可以等到链作业完成后再退出。在链式作业执行的同时，我们可以询问作业执行信息，例如有多少作业已经完成，或者我们可以找到一个作业是否处于无效状态，这是什么。

这种使用 JobControl 的方式的一个优点是可以处理作业之间可能存在的许多依赖关系。

JobControl 的一个缺点是作业进度不会打印在标准输出上，也不会直接呈现。无论作业失败还是成功，都不会打印任何有用的信息。您必须检查 Hadoop 的 Web UI 或在下面的 while 循环中添加一些代码来跟踪作业的状态或所需的任何内容。最后，

```
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.jobcontrol.Job;
import org.apache.hadoop.mapred.jobcontrol.JobControl;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.util.ToolRunner;
import org.apache.hadoop.streaming.StreamJob;

public class TestChain extends Configured implements Tool
{
    public int run( String[] args) throws Exception
    {

        //TestChain below is an arbitrary name for the group
        JobControl jobc = new JobControl( "TestChain");

        String[] job1 = new String[]
        {
            "-mapper"   , "m1.py"
            "-reducer"  , "r1.py"
            "-input"    , "in1.txt"
            "-output"   , "/out1/"
        }
        JobConf job1Conf = new StreamJob.createJob( job1);
        Job job1 = new Job( job1conf);
        jobc.addJob( job1);

        String[] job2 = new String[]
        {
            "-mapper"   , "m2.py"
            "-reducer"  , "r2.py"
            "-input"    , "in2.txt"
            "-output"   , "/out2/"
        }
        JobConf job2Conf = new StreamJob.createJob( job2);
        Job job2 = new Job( job2conf);
        jobc.addJob( job2);

        String[] job3 = new String[]
        {
            "-mapper"   , "m3.py"
            "-reducer"  , "r3.py"
            "-input"    , "/out2/par*"
            "-output"   , "/out3/"
        }
        JobConf job3Conf = new StreamJob.createJob( job3);
        Job job3 = new Job( job3conf);
        job3.addDependingJob( job2);
        jobc.addJob( job3);

        Thread runjobc = new Thread( jobc);
        runjobc.start();

        while( !jobc.allFinished())
        {
            //do whatever you want; just wait or ask for job information
        }

        return 0;
    }//end run

    public static void main( String[] args) throws Exception
    {
        // ToolRunner handles generic command line options  
        int res = ToolRunner.run( new Configuration(), new TestChain(), args);
        System.exit( res);
    }//end main

}//end TestChain 
```

## 错误

本节讨论可能发生的一些错误。在下面的错误消息中有一个类 OptimizingJoins。这个类只是为了演示各种错误的类，与这个讨论无关。

**尝试编译时包不存在。**

这是类路径的问题。像这样编译（例如添加 hadoop-streaming-1.0.3.jar 包），

```
javac -classpath /usr/local/hadoop/contrib/streaming/hadoop-streaming-1.0.3.jar:/usr/local/hadoop/hadoop-core-1.0.3.jar TestChain.java 
```

并添加任何丢失的包。

**java.lang.NoClassDefFoundError: org/apache/hadoop/streaming/StreamJob**

总误差是，

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/hadoop/streaming/StreamJob
at OptimizingJoins.run(OptimizingJoins.java:135)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at OptimizingJoins.main(OptimizingJoins.java:248)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.streaming.StreamJob
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 8 more 
```

这是我们 jar 文件的清单文件的问题。当我们以上述方式编译我们的工作时，一切都很好。Java 编译器会找到它需要的任何东西。但是当我们通过命令在 Hadoop 中运行我们的工作时

```
$HADOOP_HOME/bin/hadoop jar /home/hduser/TestChain.jar TestChain 
```

然后运行我们的 jar 的 JVM 找不到 StreamJob。为了解决这个问题，当我们创建 jar 文件时，我们在 jar 中放入了一个包含 StreamJob 的类路径的清单文件。几乎，

```
MANIFEST.MF

Manifest-Version: 1.0
Class-Path: /usr/local/hadoop/contrib/streaming/hadoop-streaming-1.0.3.jar
Created-By: 1.7.0_07 (Oracle Corporation) 
```

请注意，MANIFEST.MF 文件始终以空行结尾。我们的 MANIFEST.MF 文件有 4 行，而不是 3 行。然后我们创建 jar 文件，例如，

```
jar cmf META-INF/MANIFEST.MF TestChain.jar TestChain.class 
```

**错误流。StreamJob：无法识别的选项：-D**

发生此错误是因为 StreamJob 无法解析 -D 选项。StreamJob 只能解析流式传输、作业特定选项，-D 是通用选项。

这个问题有两种解决方案。第一个解决方案是使用 -jobconf 选项而不是 -D。第二种解决方案是通过 GenericOptionsParser 对象解析 -D 选项。当然，在第二种解决方案中，您必须从 StreamJob.createJob() 参数中删除 -D 选项。

举个例子，第二种解决方案的“干净”代码实现是，

```
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.util.ToolRunner;
import org.apache.hadoop.streaming.StreamJob;

public class TestChain
{
    public class Job1 extends Configured implements Tool
    {
        public int run( String[] args) throws Exception
        {
            String[] job1 = new String[]
            {
                "-mapper"   , "m1.py"
                "-reducer"  , "r1.py"
                "-input"    , "in1.txt"
                "-output"   , "/out1/"
            }
            JobConf job1Conf = new StreamJob.createJob( job1);
            JobClient.runJob( job1Conf);

            return 0;
        }//end run
    }

    public class Job2 extends Configured implements Tool
    {
        public int run( String[] args) throws Exception
        {
            String[] job2 = new String[]
            {
                "-mapper"   , "m2.py"
                "-reducer"  , "r2.py"
                "-input"    , "in2.txt"
                "-output"   , "/out2/"
            }
            JobConf job2Conf = new StreamJob.createJob( job2);
            JobClient.runJob( job2Conf);

            return 0;
        }//end run
    }

    public class Job3 extends Configured implements Tool
    {
        public int run( String[] args) throws Exception
        {
            String[] job3 = new String[]
            {
                "-mapper"   , "m3.py"
                "-reducer"  , "r3.py"
                "-input"    , "in3.txt"
                "-output"   , "/out3/"
            }
            JobConf job3Conf = new StreamJob.createJob( job3);
            JobClient.runJob( job3Conf);

            return 0;
        }//end run
    }

    public static void main( String[] args) throws Exception
    {
        TestChain tc = new TestChain();

        //Domination
        String[] j1args = new String[]
        {
            "-D", "mapred.output.key.comparator.class=org.apache.hadoop.mapred.lib.KeyFieldBasedComparator",
            "-D", "mapred.text.key.comparator.options=-k1,1"    ,
            "-D", "mapred.reduce.tasks=1"
        };

        // Let ToolRunner handle generic command-line options   
        int j1res = ToolRunner.run( new Configuration(), tc.new Job1(), j1args);

        //Cost evaluation
        String[] j2rgs = new String[]
        {
            "-D", "mapred.reduce.tasks=12 "                 ,
            "-D", "mapred.text.key,partitioner.options=-k1,1"
        };

        // Let ToolRunner handle generic command-line options   
        int j2res = ToolRunner.run( new Configuration(), tc.new Job2(), j2args);

        //Minimum Cost
        String[] j3args = new String[]
        {
            "-D", "mapred.reduce.tasks=1"
        };

        // Let ToolRunner handle generic command-line options   
        int j3res = ToolRunner.run( new Configuration(), tc.new Job1(), j3args);
        System.exit( mres);
    }
}//end TestChain 
```

在上面的代码中，我们定义了一个封装链作业的全局类 TestChain。然后我们定义每个单独的链作业，即我们定义它的运行方法。每一个链式作业都是一个继承Configured并实现Tool的类。最后，从 TestChain 的 main 方法中，我们依次运行每个作业。请注意，在运行任何链作业之前，我们定义了它的通用选项。

编译

```
javac -classpath /usr/local/hadoop/contrib/streaming/hadoop-streaming-1.0.3.jar:/usr/local/hadoop/hadoop-core-1.0.3.jar TestChain.java 
```

罐

```
jar cmf META-INF/MANIFEST.MF TestChain.jar TestChain.class TestChain\$Dom.class TestChain\$Cost.class TestChain\$Min.class 
```

**错误 security.UserGroupInformation: PriviledgedActionException as:hduser cause:org.apache.hadoop.mapred.InvalidInputException: Input Pattern hdfs://localhost:54310/user/hduser/whateverFile 匹配 0 个文件**

当我们使用 JobControl 时会发生此错误。例如，如果一个作业将前一个作业的输出作为输入，那么如果该输入-输出文件不存在，则会发生此错误。JobControl 以“并行”的方式运行所有独立的作业，而不是像 JobClient 那样一一进行。因此，Jobcontrol 尝试运行其输入文件不存在且因此失败的作业。

为了避免这种情况，我们使用 x.addDependingJob(y) 声明这两个作业之间存在依赖关系，作业 x 依赖于作业 y。现在，JobControl 不会尝试在并行相关作业中运行。

# grails - 连接到 Grails 应用程序数据库

> ID：12872591
> 
> 赞同：1
> 
> 时间：2012-10-13T11:18:13.337
> 
> 标签：grails, h2

我白天是一名 python 开发人员，但我也有一些 java 经验（主要是使用 struts）。在工作中，我收到了一个要安装的 grails 应用程序，这没问题，但是该应用程序的所有者没有提供任何凭据，并且该应用程序加载到了登录页面。

我解压缩了战争，但我认为数据库配置已打包到某个地方的 jar 中，因为我似乎找不到任何连接 URL。在我部署应用程序后创建了一个 h2 db 文件，所以我想知道：

如何像平常使用 SQLite 或 mysql 客户端一样连接到数据库、浏览表并创建管理员用户以便我可以登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:44:06.567

进行反编译。您不仅需要用户和密码，还需要至少一个数据库[JDBC URL](http://www.razorsql.com/docs/help_db2.html)。这可能包括 DBMS 名称、主机、端口、数据库名称 - 取决于 Java 驱动程序的具体情况。然后像往常一样在 Python 或其他东西中或使用[DBVisualizer](http://www.dbvis.com/)进行连接。

但是如果数据库在 H2/hsql 中（URL 类似于`jdbc:h2:mem:XXX`），那么您就有问题了：它是一个 Java 进程内 DBMS。为了获得对它的外部访问，您需要更改反编译的代码，编译并将其打包回来并[添加一些内容](http://jsoftbiz.wordpress.com/2011/04/30/share-an-h2-in-memory-database-among-several-jvms/)。希望不是你的情况。

在 hsql/H2 案例中的另一种方法是查找和反编译数据库引导代码 - 因为它是一个进程内数据库，它应该在每次应用程序启动时填充，所以应该有一个代码创建该超级用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:42:19.003

在 Grails 中，数据库配置（包括身份验证设置）在一个名为的文件中声明，`Datasource.groovy`然后将其编译到 WAR 中。您需要源代码来查找 H2 DB 的用户名和密码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-13T12:08:23.697

我不知道 Python 是否可以连接到 java 数据源，但它可能是一个解决方案。

另一种解决方案可能是从 Grails 端提供一些 REST Web 服务，以使 python 程序能够访问数据库。这是我喜欢的方式，也是我经常选择的方式。

顺便说一句，您在 conf 目录 (grails-app/conf/DataSource.groovy) 中配置了 Grails 使用的数据库，您将获得可以转换为经典 URL 的数据库的 jdbc URL。例如： jdbc:mysql://localhost/my_app 指的是本地主机上的数据库 my_app 和 mysql 数据库的默认端口。

随时询问您是否需要更多信息。

干杯

# php - PHP电子邮件验证

> ID：12872594
> 
> 赞同：3
> 
> 时间：2012-10-13T11:18:26.243
> 
> 标签：php, smtp

我已经使用 SMTP 命令来“检查/验证”电子邮件地址（无论它是否实际存在）。但问题是它有时接受电子邮件作为有效的电子邮件地址，有时不接受。

验证电子邮件是否是 SMTP 服务器的限制（出于安全目的）？如果是这样，那么我有什么替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:20:23.413

如上所述，大多数电子邮件服务器都关闭了 VRFY 命令，因为它很容易从垃圾邮件发送者那里收集电子邮件。

有几个用于验证电子邮件地址的选项

1) 使用电子邮件验证链接。这可能会导致转换率下降，因为如果您发送的验证电子邮件过多而退回，则可能会给您的电子邮件发件人（您或会抱怨您的 ESP）带来麻烦。如果您有任何可传递性问题，这些链接最终会出现在垃圾邮件/批量文件夹中，并且永远不会被点击。如果您关心转换和/或支持票，我不是这种方法的忠实拥护者。如果您有兴趣，我不久前对此进行了一些研究并写了一篇博客文章：http: [//blog.strikeiron.com/bid/54483/Email-Verification-Links-Kill-Your-Conversion-Rate](http://blog.strikeiron.com/bid/54483/Email-Verification-Links-Kill-Your-Conversion-Rate)

2) 使用付费工具。这些有 3 种风格 a) 实时 API - 有提供付费解决方案的公司（完全披露，我的公司是该领域的公司之一）能够以高 (>95%) 的准确性实时验证电子邮件。b) 数据库查找供应商 - 这是另一个付费选项，将收集的电子邮件与数据库进行比较。通常较便宜，但不如 PC 的实时工具 c) 准确 - 避免这种情况。它们不准确，会将您的 IP 地址列入黑名单。

3) 快速检查（正则表达式、检查 MX 服务器等）并接受模棱两可的电子邮件为有效。根据您的数量和受众，这可能是一个不错的选择。

希望这可以帮助。

贾斯汀

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:45:39.993

最好的方法是得到用户的确认。使用用户名创建一个随机数，在创建时使用`mt_rand()`并将其存储在数据库中。保持一个标志`activated`。`0`

发送一封带有激活密钥的邮件，即存储在数据库中的随机数。可能的小方法是这样的：

```
<?php
    $random = mt_rand(1, 1000);
    $random = $username . $random;
    # Store the $random in the DB.

    # Now send a mail
    mail($userEmail, "Confirm", "Your Unique ID is $random");
?> 
```

# c# - 如何在没有 VS 的情况下调试用 c# 编写的程序

> ID：12872596
> 
> 赞同：0
> 
> 时间：2012-10-13T11:18:52.470
> 
> 标签：c#, debugging

> **可能重复：**
> [如何在没有 Visual Studio 的情况下调试 .net 应用程序](https://stackoverflow.com/questions/819446/how-to-debug-net-applications-without-visual-studio)

嗨，我做了一个小程序，它适用于我和少数人

但它被一个朋友撞倒了

我如何调试和了解哪些行会导致错误？

```
without installing visual studio 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T11:21:51.090

您可以做的最好的事情是（并且是一个很好的编码实践）在一个新的 buid 中添加 try catch 异常块在具有日志功能的方法中记录（在 catch 块中）让我们说一个文本文件

1.  方法名称（使用 new StackTrace()..GetFrame(1).GetMethod().Name 或 查找`System.Reflection.MethodBase.GetCurrentMethod().Name`），
2.  它的参数和
3.  异常消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T11:23:02.753

如果您的意思不是“不安装调试器”，您可以尝试使用[Mono](http://mono-project.com/Main_Page)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T11:47:15.653

您可以使用可移植运行的 WinDbg（从现有安装中复制），并且使用 SoS 附加组件，它可以在调试 C# 应用程序时提供很大帮助——即使在事后分析中也是如此。一开始可能很难掌握，但值得学习 - 它在多种情况下会非常有用。

SoS 参考：http: [//msdn.microsoft.com/en-us/library/bb190764.aspx](http://msdn.microsoft.com/en-us/library/bb190764.aspx)

我有这个快速备忘单，里面有我认为最有用的东西（在互联网上的某个地方找到，然后随着时间的推移而丰富）：

```
Starting, Attaching, Executing and Exiting

Start -> All Programs -> Debugging Tools for Windows -> WinDbg
F6
attach to process
Ctrl-Break
interrupt debugee
.detach
detach from a process
g
continue debugee execution
q
exit WinDbg

Getting Help
?
help on commands that affect the debugee
.help
help on commands that affect the debugger
.hh command
view the on line help file
!help
help on the extension dll at the top of the chain (e. g., SOS)

Issuing Commands
up arrow, down arrow, enter
scroll through command history
Right mouse button
paste into command window

Examining the Unmanaged Environment
lmf
list loaded modules with full path
lmt
list loaded modules with last modified timestamp
~
list unmanaged threads
~thread s
select a thread for thread specific commands
!token -n
view thread permissions
k
view the unmanaged call stack
!runaway
view thread CPU consumption
bp
set a breakpoint
.dump path
dump small memory image
.dump /ma path
dump complete memory image

Working with Extension DLLs (e. g., SOS)
.chain
list extensions dlls
.load clr10\sos
load SOS for debugging framework 1.0 / 1.1 (use .unload to unload)
.loadby sos mscorwks
load SOS for debugging framework 2.0
.loadby sos clr
load SOS for debugging framework 4.0

SOS Commands
!threads
view managed threads
!clrstack
view the managed call stack
!dumpstack
view combined unmanaged & managed call stack
!clrstack -p
view function call arguments
!clrstack –l
view stack (local) variables
!name2ee module class
view addresses associated with a class or method
!dumpmt –md address
view the method table & methods for a class
!dumpmd address
view detailed information about a method
!do address
view information about an object
!dumpheap –stat
view memory consumption by type
!dumpheap –min size
view memory consumption by object when at least size
!dumpheap –type type
view memory consumption for all objects of type type
!gcroot address
view which object are holding a reference to address
!syncblk
view information about managed locks

SOS 2.0 Commands
!bpmd module method
set breakpoint
!DumpArray address
view contents of an array
!PrintException
view information about most recent exception 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T11:51:02.080

If you don't want to install any other debugger,

Then you should simply implement trace and log on each section of code carefully and then you can view the traces or errors on the text file..

Ways to implement trace and log:

use can use `TraceListener` class on `system.diaognosis` namespace or use

```
Microsoft.Practices.EnterpriseLibrary.Logging namespace's class `Logger` to implement tracing: 
```

syntax:

```
Logger.Write(message, "Trace", 0, 0, System.Diagnostics.TraceEventType.Information); 
```

# qt - 自己的静态链接插件

> ID：12872598
> 
> 赞同：3
> 
> 时间：2012-10-13T11:19:03.083
> 
> 标签：qt, plugins, static, linker

我有插件，我想将它与我的应用程序静态链接。在 plugin.pro 文件中，我有：

```
TEMPLATE = lib
CONFIG += staticlib 
```

在 plugin.cpp 中：

```
Q_EXPORT_PLUGIN2(plugin, pluginClass) 
```

当然 .pro 文件中的 TARGET 与插件名称相同。

在 myapp.pro 文件中：

```
LIBS += libplugin.a 
```

主.cpp：

```
#include <QtGui/QApplication>
#include <QtPlugin>

Q_IMPORT_PLUGIN(plugin)

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    ...
    return a.exec();
} 
```

插件编译没有错误，我得到 *.a 和 *.o 文件，所以我将 *.a 文件复制到 myapp 目录，当我尝试编译时出现如下错误：

```
cannot find -lmyplugin.a
collect2: ld returned 1 exit status 
```

所以我在 myapp.pro 文件中给出了 libplugin.a 的完整路径，并且出现了 Q_IMPORT_PLUGIN 错误：

```
undefined reference to `qt_plugin_instance_plugin()' 
```

还有很多这样的错误：

```
undefined reference to `pluginClass::function()' 
```

我包含了我的插件的 *.h 文件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T08:30:34.037

在您的插件 .pro 文件中使用以下代码：

```
CONFIG += plugin static 
```

代替

```
CONFIG += staticlib 
```

# php - PDO 异常没有被抛出

> ID：12872601
> 
> 赞同：8
> 
> 时间：2012-10-13T11:19:33.370
> 
> 标签：php, pdo

我是 PDO 的新手，关于它的一些事情让我感到困惑，我尝试创建一个测试函数来查看是否会针对无效查询引发异常，但没有引发任何异常。

这是代码

```
<?php
include_once("/var/www/include/constants.php");

class DB{
    private $DBH; 

    public function DB(){
        try{
            $DBH = new PDO("mysql:host=".DB_SERVER.";dbname=".DB_NAME, DB_USER, DB_PASS);   
        }
        catch(PDOException $e) {  
            echo $e->getMessage(); 
        }
    }

    public function test(){
        try{
            $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );  
            $DBH->prepare('DELECT id FROM users');  
        }
        catch(PDOException $e) {  
            echo $e->getMessage();  

        }
    }

};

/* Create database connection */
$db = new DB;
$db->test();

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T11:33:15.350

除了缺少对`$this`数据库句柄的引用之外，您还需要告诉 PDO 它不能模拟准备工作。下面的代码**会**抛出这样的异常：

> SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“DELECT id FROM users”附近使用正确的语法

```
class DB{
    private $DBH; 

    public function DB(){
        try{
            $this->DBH = new PDO("mysql:host=localhost;dbname=movies", 'root', 'jsat12');   
            $this->DBH->setAttribute(PDO::ATTR_EMULATE_PREPARES, false );
      }
        catch(PDOException $e) {  
            echo $e->getMessage(); 
        }
    }

    public function test(){
        try{
            $this->DBH->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );  
            $this->DBH->prepare('DELECT id FROM users');  
        }
        catch(PDOException $e) {  
            echo $e->getMessage();  

        }
    }

};

/* Create database connection */
$db = new DB;
$db->test(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:25:24.207

也不例外，因为你没有生产。我猜你应该看到警告、错误或未定义变量。检查您的错误报告设置。

在`test`中，您使用`$DBH`，但它不存在于本地堆栈中，而是作为对象成员存在。因此，您应该使用`$this->DBH = new PDO(..)`在构造方法中为对象成员赋值，并`$this->DBH->setAttribute(...)`在`test`方法中使用它。

给你，修正版：

```
<?php
include_once("/var/www/include/constants.php");

class DB{
    private $DBH; 

    public function DB(){
        try{
            $this->DBH = new PDO("mysql:host=".DB_SERVER.";dbname=".DB_NAME, DB_USER, DB_PASS);   
        }
        catch(PDOException $e) {  
            echo $e->getMessage(); 
        }
    }

    public function test(){
        try{
            $this->DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );  
            $this->DBH->prepare('DELECT id FROM users');  
        }
        catch(PDOException $e) {  
            echo $e->getMessage();  

        }
    }

};

/* Create database connection */
$db = new DB;
$db->test(); 
```

# asp.net - MVC 中 Webapi 控制器中的 HttpResponse

> ID：12872603
> 
> 赞同：0
> 
> 时间：2012-10-13T11:19:39.620
> 
> 标签：asp.net, asp.net-mvc-3, wcf, rest, asp.net-web-api

我正在使用 Web api 控制器，如下所示：

```
[HttpPost]    
public HttpResponseMessage PostMethod(string filename)    
{
    Stream downloadStream = BL.method(fileName);    
    HttpResponseMessage response = new HttpResponseMessage();    
    response.content= new StreamContent(downloadStream);    
    return response;    
} 
```

当我尝试使用提琴手调用上述方法时，我收到一个异常消息

> “downloadStream.ReadTimeout”引发了“System.InvalidOperationException”类型的异常。

可以设置流作为响应并发送吗？上面的代码有修改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:55:49.710

尝试使用 PushStreamContent，也许通过不在内存中缓冲文件，您可能会避免超时。

```
 [HttpPost]
    public HttpResponseMessage PostMethod(string filename)
    {
        Stream downloadStream = BL.method(fileName);
        HttpResponseMessage response = new HttpResponseMessage();
        response.Content = new PushStreamContent((responseStream, httpContent, tc) => {
                                                     downloadStream.CopyTo(responseStream);
                                                     responseStream.Close();
                                                 }, "application/octet-stream");

        return response;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:39:20.463

您的信息流似乎有问题。不知道流是如何产生的，很难说。如果您`BL.method(fileName);`只使用自己加载文件替换`FileStream`它应该可以工作（我只是自己测试过）。

在旁注中，您的方法存在一些问题：

1.  您使用 POST。因为你没有改变任何东西，所以 GET 更好。
2.  您没有设置`ContentType`标头，因此客户端在使用资源时可能会遇到问题
3.  您没有处理流，因此该流可能会处于不确定状态并且通常不好。

# android - 应用程序意外停止，android 上的特定情况

> ID：12872609
> 
> 赞同：0
> 
> 时间：2012-10-13T11:20:47.280
> 
> 标签：android, android-activity, android-2.3-gingerbread

好的，我正在开发一个 android 应用程序。它有许多功能，例如显示新闻、星座运势、电视节目表、天气预报……每条信息都通过 RSS 使用 XML 传递给我。当我有 wifi 或 3G 时，应用程序可以正常工作，但是一旦没有 wifi 或 3G 信号，或者某些链接在维护中关闭，我就会被踢出应用程序并出现如下错误：

```
The application has stopped unexpectedly! Please Try Again. 
```

我正在尝试制作一些 Activity 来显示如下内容：

```
There was a problem with your request! Please make sure that wifi or 3G signals are available or try again later. 
```

我尝试了很多方法，但没有任何接缝可以工作。以下是一些可能有帮助的课程：

1.

```
public class Pocetna extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pocetna);
.
.
.

vijesti.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            Intent xw = new Intent(getApplicationContext(), Vijesti.class );
            xw.putExtra("A", "http://klix.ba/rss/naslovnica");
            startActivity(xw);
        }
    }); 
```

2.

```
public class Vijesti extends ListActivity {

static String url =null;

// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_TITLE = "title";
static final String KEY_DATE = "pubDate";
static final String KEY_DESC = "encoded";
static final String UVOD = "uvod";
static final String CLANAK = "clanak";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.vijesti_m);
    Intent in = getIntent();

    // Get XML values from previous intent
    url = in.getStringExtra("A");
    final ArrayList<HashMap<String,String>> menuItems = new ArrayList<HashMap<String,String>>();
    ArrayList<String> xqw = new ArrayList<String>();

    ParserVijesti parser=null;
    Document doc=null;
    try {
        parser = new ParserVijesti();
        String xml = parser.getXmlFromUrl(url); //get XML
        doc = parser.getDomElement(xml);
    } catch (Exception e1) {
        finish();
    }

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    //loop
    for (int i=0; i< nl.getLength(); i++){
        HashMap<String, String> map = new HashMap<String, String>();
        HashMap<String, String> mapq = new HashMap<String, String>();

        Element e = (Element) nl.item(i);

        //add to map
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_DATE, parser.getValue(e, KEY_DATE));
        map.put(UVOD, parser.getValue(e,UVOD));
        map.put(CLANAK, parser.getValue(e,CLANAK));

        menuItems.add(map);

        xqw.add(parser.getValue(e,KEY_TITLE));
    }

    for(int gf=0; gf<xqw.size(); gf++){
        Log.w("ISPISI: ", xqw.get(gf));
    }
    ArrayAdapter adapterx = new ArrayAdapter(this, R.layout.vijesti_m,R.id.tetkica, xqw);

    setListAdapter(adapterx);

    //singleView
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener(){
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id){

            int hg = position;
            HashMap<String, String> kaktus = menuItems.get(hg);
            String uvod1 = kaktus.get(UVOD);
            String clanak1 = kaktus.get(CLANAK);
            String dat1 = kaktus.get(KEY_DATE);
            String tit1 = kaktus.get(KEY_TITLE);

            //intent
            Intent inx = new Intent(getApplicationContext(), VijestiSingle.class);
            inx.putExtra(KEY_TITLE, tit1);
            inx.putExtra(KEY_DATE, dat1);
            inx.putExtra(UVOD, uvod1);
            inx.putExtra(CLANAK, clanak1);
            startActivity(inx);
        }
    });

}   

} 
```

3.

```
public class ParserVijesti {

// constructor
public ParserVijesti() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity, "UTF-8");

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}
/**
 * Getting XML DOM element
 * @param XML string
 * */

public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    dbf.setCoalescing(true);
    dbf.setNamespaceAware(true);
    try {
        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setByteStream(new ByteArrayInputStream(xml.getBytes("UTF-8")));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if(child.getNodeType() == Node.TEXT_NODE || child.getNodeType() == Node.CDATA_SECTION_NODE){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 public final String getElementValue2( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if(child.getNodeType() == Node.CDATA_SECTION_NODE){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "SRANJE";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */

 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);                
        return this.getElementValue(n.item(0));
    }

 public String getValue3(Element item, String str){
     NodeList n = item.getElementsByTagNameNS("http://purl.org/rss/1.0/modules/content/", str);
     String ses = this.getElementValue2(n.item(0));

     //String mim =ses.replaceAll("(?s)\\<.*?\\>", " \n");
     String html = ses;
     Spanned strxa = Html.fromHtml(html);
     String fffx=strxa.toString();

     //return this.getElementValue2(n.item(0));
     //return ses;
     //return Promjena(ses);
     return fffx;
 }

} 
```

所以基本上，我想做的不是检查是否有wifi或3G。我只想实现该 Activity 将显示存在错误并且不允许在发生错误时立即退出应用程序。请问，有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:35:13.647

要检查设备是否连接到 Wifi 或 3G，您可以创建如下方法：

```
public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if(netInfo != null && netInfo.isConnected()) {
        return true;
    }
    return false;
} 
```

然后，如果您尝试启动的活动依赖于互联网连接，您可以执行以下操作：

```
if(!isOnline) {
    Toast.makeText(getApplicationContext(), "You are not connected to the internet", Toast.LENGTH_SHORT).show();
} else {
    startActivity(*yourIntent);
} 
```

您需要在清单中获得这些权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

# google-maps - 谷歌地图在自动建议中返回餐馆、商店等

> ID：12872611
> 
> 赞同：1
> 
> 时间：2012-10-13T11:20:56.750
> 
> 标签：google-maps, google-maps-api-3

我正在尝试制作一个仅适用于道路、城市、城镇和国家的地理编码器。但是，如果我输入“Papa Johns Pizza”之类的内容，它会返回结果。

我怎样才能让谷歌处理地址并删除营业地点？

这是我工作的代码：http: [//jsfiddle.net/qcPgL/4/](http://jsfiddle.net/qcPgL/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:28:24.530

[http://jsfiddle.net/aleation/pqmQ5/1/](http://jsfiddle.net/aleation/pqmQ5/1/)

添加

```
var autocompleteOptions = {
       types: ['geocode']
}; 
```

并将这些选项分配给自动完成

```
var autocomplete = new google.maps.places.Autocomplete(input, autocompleteOptions); 
```

# php - 将 HTML 站点迁移到 PHP

> ID：12872614
> 
> 赞同：2
> 
> 时间：2012-10-13T11:21:18.073
> 
> 标签：php, html, .htaccess

我目前运行一个包含 750 页 .html 网页的网站（是的，我知道这是一个愚蠢的想法，但我是新手）。我希望将这些移至 php。我真的不想设置 750 个单独的 301 重定向并将每个页面重写为 .php

我听说我可以使用 htaccess 来解决这个问题。有谁知道怎么做？

还有几个问题——

1.  我可以将这些链接从 html 永久重定向到 php，而不会丢失我的搜索引擎排名吗？
2.  如果我想将 php 添加到每个文件（即 php 文件菜单（使用 include 命令）以使链接更快更新，这会起作用吗？因为它们不会仍然是 html 文件吗？

对不起，愚蠢的问题，但我还在学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:18:13.843

恭喜您拥有 750 页的网站 - 您一定为此付出了一些努力。

要收集您当前的页面列表，请使用名为 xenu 的工具创建导出到 excel 中。然后，您可以轻松地将 b 列中的文件名称更改为 PHP 并创建一个 .htaccees 文件。

但是为什么你想要 750 个 php 文件呢？如果您有很多数据页，请将其设为一页并吸收 HTML 主要内容并引用一页。如果您有一个名为 warehouse-depot-22-row-44.html 的页面，则将其更改为 show-warehouse-row.php?depot=22&row=44 并仅返回该内容。这将显着减少您的页面数量并开始使用数据库来呈现内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:31:02.570

我有一个类似（但小得多）的网站，它经历了同样的事情。

我的 .htaccess 中有这个：

```
RewriteEngine On
RewriteRule ^(.*)\.html$ $1.php [L] 
```

这将有助于将任何访问您的 .html 地址的访问者重定向到您的 .php 地址。

希望您有一个 IDE（我推荐 Aptana），并且您可以在项目范围内使用一些查找/更改功能，并希望通过一些时间和耐心获得从 .html 到 .php 的内部链接。

但是，我要提醒您一点——也许是时候研究基于数据库的 CMS，例如 Wordpress 或 Drupal？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T11:26:29.173

对于重定向，您可以使用 Apache 模块 mod_rewrite：[https ://httpd.apache.org/docs/current/mod/mod_rewrite.html](https://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T11:27:38.283

您可以使用 url 重写将特定文件名请求与正则表达式匹配，然后决定在匹配时重定向到哪里

```
RewriteRule ^myname/?$  myname.php    [NC,L] 
```

[http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T11:39:10.537

取决于你的结构。您希望用户在其自然位置访问它们吗？

```
/public_html/folder1/file.php
user would access like
mydomain.com/folder1/file 
```

或者你想以不同的方式映射它们？

我个人认为我会使用重写规则将所有请求映射到我的 /public_html/index.php 并使用 php 映射来自那里的请求（例如使用 include）。这提供了极大的灵活性，而且您的应用程序只有一个入口点，这非常有益，因为您可以轻松地保持对应用程序流程的控制。

.htaccess 看起来像这样

```
#
# Redirect all to index.php
#
RewriteEngine On

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# RewriteCond %{REQUEST_URI} !^/index\.php
# RewriteCond %{REQUEST_URI} (/[^.]*|\.(php|html?))$ [NC]
RewriteCond %{REQUEST_URI} (/[^.]*|\.)$ [NC]
RewriteRule .* index.php [L] 
```

当然，我将所有不可直接访问的文件（除索引和 css、js、图像等之外的所有文件）都放在 public_html 之外的文件夹中，以确保没有用户可以直接访问它们；）

# android - 自动屏幕方向随时间间隔而变化

> ID：12872615
> 
> 赞同：0
> 
> 时间：2012-10-13T11:21:47.717
> 
> 标签：android, android-ndk, android-monkey

我想每 500 毫秒旋转一次屏幕方向，即从横向 -> 爱国者，反之亦然（这是在真实设备上（不在模拟器上））。是否有任何可以旋转当前屏幕方向的 shell 命令？这不对应于任何应用程序。我只想在所有可用方向上旋转屏幕，而与当前活动无关

我已经检查了 adb shell 以将屏幕更改为横向：

# 服务呼叫窗口 18 i32 1

将屏幕更改为纵向：

# 服务呼叫窗口 18 i32 0

但这些不适用于真实设备。任何人都可以提供更好的解决方案来做到这一点，这对我真的很有帮助。

至少分享/指向我任何可用的脚本/apk 将执行此自动定位。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:35:11.343

好吧 adb shell 仍然是一个shell（如果有点削减）

你可以这样做：

```
sw=1;
while true; do
    [[ "$sw" = 1 ]] && sw=0 || sw=1;
    service call window 18 i32 $sw;
    sleep 1
done; 
```

这是它的单行版本（以防您无法将其写入文件）

```
sw=1; while true; do [[ "$sw" = 1 ]] && sw=0 || sw=1; service call window 18 i32 $sw; sleep 1; done; 
```

这将每秒切换一次方向（我认为睡眠时间不会少于几秒）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-31T16:57:08.800

我遇到了同样的问题，并在[这里](https://stackoverflow.com/questions/25864385/changing-android-device-orientation-with-adb)找到了解决方案。

简而言之，这就是你必须做的：

首先使用以下命令禁用自动旋转：

```
adb shell content insert --uri content://settings/system --bind name:s:accelerometer_rotation --bind value:i:0 
```

并旋转：

```
 adb shell content insert --uri content://settings/system --bind name:s:user_rotation --bind value:i:x 
```

对于横向，将 x（在行尾）替换为 1，对于纵向，将其替换为 0，上一条注释中的代码应该可以正常工作:)

# php - 如何通过为空字段添加 NULLS 将 CSV 文件导入 MySQL？

> ID：12872618
> 
> 赞同：1
> 
> 时间：2012-10-13T11:22:16.060
> 
> 标签：php, mysql

我有一个来自美国人口普查的 CSV 文件，如下所示：

```
"ZIP5","ZIP4","ZIP9","STATE CODE","STATE","COUNTY CODE","COUNTY NAME","CBSA CODE","CBSA  TITLE","CBSA LSAD","METRO DIVISION CODE","METRO DIVISION TITLE","METRO DIVISION LSAD","CSA   CODE","CSA TITLE","CSA LSAD"
"04841",,"04841","23","ME","013","Knox County","40500","Rockland, ME","Micropolitan Statistical Area",,,,,,
"04843",,"04843","23","ME","013","Knox County","40500","Rockland, ME","Micropolitan     Statistical Area",,,,,,
"04846",,"04846","23","ME","013","Knox County","40500","Rockland, ME","Micropolitan Statistical Area",,,,,,
"04847",,"04847","23","ME","013","Knox County","40500","Rockland, ME","Micropolitan Statistical Area",,,,,,
"04848",,"04848","23","ME","027","Waldo County",,,,,,,,,
"04849",,"04849","23","ME","027","Waldo County",,,,,,,,,
"04850",,"04850","23","ME","027","Waldo County",,,,,,,,,
"04851",,"04851","23","ME","013","Knox County","40500","Rockland, ME","Micropolitan Statistical Area",,,,,,
"04852",,"04852","23","ME","015","Lincoln County",,,,,,,,, 
```

该文件有超过 200 万条记录。大多数记录的所有字段都没有数据。

这是我为上述 CSV 文件定义的 MySQL 记录布局：

```
+----------------------+------------------+------+-----+---------+----------------+
| Field                | Type             | Null | Key | Default | Extra          |
+----------------------+------------------+------+-----+---------+----------------+
| id                   | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| ZIP5                 | varchar(5)       | NO   |     | NULL    |                |
| ZIP4                 | varchar(5)       | NO   |     | NULL    |                |
| ZIP9                 | varchar(10)      | NO   |     | NULL    |                |
| STATE_CODE           | varchar(2)       | NO   |     | NULL    |                |
| STATE                | varchar(2)       | NO   |     | NULL    |                |
| COUNTY_CODE          | varchar(3)       | NO   |     | NULL    |                |
| COUNTY_NAME          | varchar(50)      | NO   |     | NULL    |                |
| CBSA_CODE            | varchar(5)       | NO   |     | NULL    |                |
| CBSA_TITLE           | varchar(50)      | NO   |     | NULL    |                |
| CBSA_LSAD            | varchar(50)      | NO   |     | NULL    |                |
| METRO_DIVISION_CODE  | varchar(5)       | NO   |     | NULL    |                |
| METRO_DIVISION_TITLE | varchar(50)      | NO   |     | NULL    |                |
| METRO_DIVISION_LSAD  | varchar(50)      | NO   |     | NULL    |                |
| CSA_CODE             | varchar(3)       | NO   |     | NULL    |                |
| CSA_TITLE            | varchar(50)      | NO   |     | NULL    |                |
| CSA_LSAD             | varchar(50)      | NO   |     | NULL    |                |
+----------------------+------------------+------+-----+---------+----------------+ 
```

（我刚刚意识到我应该将 ZIP5 定义为主键？）

我已经读过，如果您在 CSV 文件中有一个空字段，您应该将其更改为 \N，但是有没有办法轻松做到这一点？我可以编写一个 PHP 程序来做到这一点，但是有超过 200 万条记录需要很长时间，而且我的服务器没有很多 RAM。

如何以最简单的方式成功将此 CSV 文件导入 MySQL？MySQL 中的 LOAD 命令上是否有一些参数可以做到这一点？它现在的工作方式，它抱怨 ZIP5 有数据截断，当我查看 MySQL 时，它在邮政编码中有引号，只有前 4 位数字。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:33:21.857

首先，我在您上面发布的表格上看不到主键。首先必须始终有一个主键。通常我们使用AUTOINCREMENT添加一个名为id的列。对于邮政编码和其他东西，描述 2-3 列的复杂键也很方便。一如既往地视情况而定。

至于进口。你有一些解决方案

1.  在本地运行脚本以生成 SQL 插入语句，然后通过您可用的任何接口将数据提供给 mysql 服务器。

2.  将 CSV 文件上传到服务器并使用命令行 mysql 导入 CSV。MySQL 有一个内置的 CSV 导入器，虽然我从不喜欢它；）

3.  在服务器上运行脚本并一次添加一行。在 PHP 中，您可以逐行加载 CSV 并在每一行上插入（请记住相应的 set_time_limit 和 memory_limit）。提醒一下，对于第 3 步，如果您通过浏览器而不是通过命令行运行它，那么您的浏览器很可能会超时。放心，通过脚本不会停止运行，直到它结束。

我想我有一个 CSV 导入器（用于巨大的 CSV 文件——比如地理标记）。如果您需要，请告诉我，我可能会找到并在此处发布。

不幸的是，我找不到我的 csv 导入器。但是查看 php 手册中 fgetcsv 的第一个条目并进行了一些修改......

```
set_time_limit(3600); // 1 hour max script execution time. Adjust it according to your expectations.
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    // this will automate things but modify the csv head for each column to represent the actual column name in your table.
    $header = fgetcsv($handle, 1000, ",");
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $i = 0;
        $values = array();
        foreach($header as $key) {
            if (!empty($data[$i])) {
               $values[$key] = $data[$i];
           }
        }

        $keys = "`" . implode("`, `", array_keys($values)) . "`";
        $values = "'" . implode("', '", $values) . "'";
        $statement = "INSERT INTO `table_name` ({$keys}) VALUES ({$values})";
        // run the statement. the above is if you don't use PDO. For PDO transform accordingly. $values holds the column_name => value pairs. The values that can be null and should not be inserted you should give them default values in your mysql schema (table)
    }
    fclose($handle);
} 
```

我希望这有帮助。还没有测试，但看起来不错；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:28:55.570

更改文件路径后尝试以下 LOAD 命令，如果需要，请尝试行尾。

```
LOAD DATA INFILE 'your_file.csv' IGNORE
INTO TABLE zipcodes
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES
(ZIP5, ZIP4, ZIP9, STATE_CODE, STATE, COUNTY_CODE, COUNTY_NAME, CBSA_CODE, 
CBSA_TITLE, CBSA_LSAD, METRO_DIVISION_CODE, METRO_DIVISION_TITLE, 
METRO_DIVISION_LSAD, CSA_CODE, CSA_TITLE, CSA_LSAD); 
```

# maps - 如何过滤多边形内的地标并在谷歌地球中创建一个列表？

> ID：12872619
> 
> 赞同：0
> 
> 时间：2012-10-13T11:22:25.793
> 
> 标签：maps, google-earth

我有一个包含大约 1200 个地标的 kml，分布在一个非常狭窄的区域。我想创建一个小区域并过滤掉该区域的地标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:27:12.580

最好的方法是使用[区域](https://developers.google.com/kml/documentation/regions)

要引用有关区域的文档-

> 只有当数据落入用户视图并占据屏幕的某个部分时，才会加载和绘制数据

这样，当用户放大很远时，您只能显示几个主要的地标，但是当他们开始放大时，越来越多的地标变得对他们可见

# ios - iOS：xml和wbxml之间的转换

> ID：12872621
> 
> 赞同：0
> 
> 时间：2012-10-13T11:22:49.257
> 
> 标签：ios

我正在尝试通过我的程序在 wbxml 中转换 xml 数据，反之亦然。当我在谷歌搜索时，我发现以下链接正在查询相同的内容。 [https://stackoverflow.com/questions/5088507/i-there-any-library-xml2wbxml-wbxml-for-iphone](https://stackoverflow.com/questions/5088507/i-there-any-library-xml2wbxml-wbxml-for-iphone)。

但是，根据答案，它没有任何在 xml 和 wbxml 数据之间转换的示例源。

有人可以指导我获取一些在 xml 和 wbxml 数据之间转换的推荐代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:44:55.150

也许这可以帮助你：

*   [http://wbxmllib.sourceforge.net/html/files.html](http://wbxmllib.sourceforge.net/html/files.html)
*   [http://wbxmllib.sourceforge.net/html/wbxml2xml__tool_8c-source.html](http://wbxmllib.sourceforge.net/html/wbxml2xml__tool_8c-source.html)
*   [http://wbxmllib.sourceforge.net/html/xml2wbxml__tool_8c-source.html](http://wbxmllib.sourceforge.net/html/xml2wbxml__tool_8c-source.html)

# sql - 内部多次将一个表连接到另一个表

> ID：12872626
> 
> 赞同：3
> 
> 时间：2012-10-13T11:23:21.230
> 
> 标签：sql, sql-server, join

假设我有三张桌子：

```
User Table
{
    UserId INT,
    Username NVARCHAR
    ...
}

Questions
{
    QuestionId INT
    QuestionText NVARCHAR
}

Answers
{
    AnswerId INT,
    QuestionId INT,
    UserId INT,
    Answer NVARCHAR
} 
```

这个结构显然被过度简化了，但是对于这个例子来说它应该足够了。

例如，选择对特定问题有特定答案的用户的最佳方法是什么 - 假设表格中填充了以下数据：

用户表

```
UserId              Username                ...
--------------------------------------------------------------------------------------------------------
1                   User1                   ... 
2                   User2                   ... 
3                   User3                   ...
4                   User4                   ...
5                   User5                   ...
6                   User6                   ...
7                   User7                   ...
8                   User8                   ...
9                   User9                   ...
10                  User10                  ...
...                 ...                     ...

etc 
```

问题表

```
QuestionId              QuestionText
--------------------------------------------------------------------------------------------------------
1                       What is your favorite color?
2                       What do you prefer cats or dogs?
3                       Do you prefer if it is too hot or too cold?
4                       What is your favorite season (Summer, Autumn (Fall), Winter, Spring)?
5                       How Old Are you?
...                     ...

etc 
```

答案表

```
AnswerId                QuestionId              UserId          Answer
--------------------------------------------------------------------------------------------------------
1                       1                       1               Red 
2                       1                       2               Red
3                       1                       3               Blue
4                       1                       4               Green
5                       1                       5               Black
6                       2                       6               Cats
7                       2                       1               Dogs
8                       3                       1               Too Cold
9                       4                       1               Spring
10                      5                       1               22
11                      2                       4               Dogs
12                      3                       4               Too Hot
13                      3                       3               Too Cold
14                      5                       6               46
15                      1                       8               Purple 
```

如果我想选择喜欢狗和红色或紫色以及 50 岁以下等的用户

最好（最有效）的方法是从用户表到答案表有多个连接（每个所需的答案条件一个）

例如：

如果我想获得喜欢狗和红色的用户，我可以使用以下 MSSQL：

```
SELECT * 
FROM 
Users 
JOIN Answers As a1 
ON Users.UserId = a1.UserId 
JOIN Answers as a2 
ON Users.UserId = a2.UserId 
WHERE 
    (
        a1.QuestionId = 1 AND 
        a1.Answer = 'Red'
    ) AND 
    (
        a2.QuestionId = 2 AND 
        a2.Answer = 'Dogs'
    ) 
```

可能有许多答案条件。

基本上，我要问的问题是编写查询的最佳方法是什么，在该查询中，您对来自同一个表的多行具有相同的列有条件......

抱歉，如果这令人困惑，请随时提出任何问题，我会尽力回答他们......

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T11:36:42.983

您的基本查询看起来很好。随着您变得更加详细，您将根据需要如何组合条件来稍微不同地构建 WHERE 子句。

例如，在您提供的示例中，红色或紫色都是可接受的答案，您可以像这样构造 WHERE 子句：

```
WHERE (a1.QuestionId = 1 AND (a1.Answer IN ('Red','Purple')) 
  AND (a2.QuestionId = 2 AND a2.Answer = 'Dogs') 
```

如果只有某些答案集是可以接受的，它会变得更加复杂，所以如果“Red”和“Dogs”或“Purple”和“Cats”是可以接受的，它看起来更像这样：

```
WHERE 
  (
          (a1.QuestionId = 1 AND a1.Answer = 'Red')
      AND (a2.QuestionId = 2 AND a2.Answer = 'Dogs')
  )
  OR
  (
          (a1.QuestionId = 1 AND a1.Answer = 'Purple')
      AND (a2.QuestionId = 2 AND a2.Answer = 'Cats')
  ) 
```

如果您的条件变得更复杂，您可能需要阅读[T-SQL 中的动态搜索条件](http://www.sommarskog.se/dyn-search.html)。虽然您的条件不是动态的，但那里有很多有用的信息。

最后，由于很容易混淆什么问题 ID 和什么答案，特别是如果它们不是很好的、人类可识别的值，它可以帮助使用 CTE 预先选择答案：

```
WITH Colors
AS   (
    SELECT *
    FROM   Answers
    WHERE  QuestionID = 1
)
,    Animals
AS   (
    SELECT *
    FROM   Answers
    WHERE  QuestionID = 2
)
SELECT   *
FROM     Users 
   JOIN  Colors
       ON  Users.UserID = Colors.UserID
   JOIN  Animals
       ON  Users.UserID = Animals.UserID
WHERE   (
        Colors.Answer = 'Red'
    AND Animals.Answer = 'Dogs'
    )
    OR  (
        Colors.Answer = 'Purple'
    AND Animals.Answer = 'Cats'
    ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T12:05:57.753

还有使用[PIVOT 运算符](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)的选项。

这就是您在上面提出的查询的编写方式：

```
select UserId, UserName
from (
  select
    u.UserId,
    u.UserName,
    case 
      when a.QuestionId = 1 then 'Color'
      when a.QuestionId = 2 then 'Animal'
      when a.QuestionId = 3 then 'Temperature'
      when a.QuestionId = 4 then 'Season'
      when a.QuestionId = 5 then 'Age'
    end as Question,
    a.Answer
  from Users u
  join Answers a on a.UserId = u.UserId
) as SourceTable
pivot (
  max(Answer)
  for Question in (
    [Color], 
    [Animal], 
    [Temperature], 
    [Season], 
    [Age])
) as pivotTable

where Animal = 'Dogs'
  and Color in ('red', 'purple')
  and Age < 50 
```

这是一个在线测试的链接：[http ://www.sqlfiddle.com/#!3/5c960/23](http://www.sqlfiddle.com/#!3/5c960/23)

是的，查询看起来很麻烦，但是您可以编写一次并且（假设问题不会经常更改）只需更改`where`子句，这很容易编写/阅读/理解/维护（请参阅最后三行上面的代码块）。

**更新：**

对于性能分析，比较这两个查询：

*   枢轴版本：[http ://www.sqlfiddle.com/#!3/5c960/23](http://www.sqlfiddle.com/#!3/5c960/23)
*   Ann L. 的 CTE 解决方案：[http ://www.sqlfiddle.com/#!3/5c960/26](http://www.sqlfiddle.com/#!3/5c960/26)

（*执行查询后，单击结果上方的“**查看执行计划***”链接，查看 SQL 在幕后做了什么）

我建议您在自己的数据库上运行这些查询，您可能已经在其中创建了适当的索引，并且数据量足以产生相关结果。

我不是 SQL 性能专家，但我有一种预感，[Ann L. 的解决方案](https://stackoverflow.com/a/12872726/390819)可能更高效，并且可以更好地扩展到大量数据。但这又只是一种预感。如果您可以在您的环境中执行测试，您可以看到实际结果。

# wicket-1.5 - Wicket 中的文件拦截器？

> ID：12872629
> 
> 赞同：-1
> 
> 时间：2012-10-13T11:23:40.347
> 
> 标签：wicket-1.5

我们在 Apache Wicket 中是否有任何可用于文件上传的功能，我可以在其中拥有不同的属性，例如文件对象、内容类型、文件名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:52:14.523

只需使用 FileUploadField，将表单标记为 multiplePart，提交表单后，您就可以访问具有 getSize()、getContentType() 和 getClientFileName() 属性的 FileUpload。

更多信息和示例： [http ://wicket.apache.org/apidocs/1.5/org/apache/wicket/markup/html/form/upload/FileUpload.html](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/markup/html/form/upload/FileUpload.html)

[http://www.mkyong.com/wicket/wicket-file-upload-example/](http://www.mkyong.com/wicket/wicket-file-upload-example/)

# c++ - 如何在 C++ 中打乱指针列表？

> ID：12872637
> 
> 赞同：4
> 
> 时间：2012-10-13T11:25:06.913
> 
> 标签：c++, boost, stl

如何在 C++ 中打乱 stl 指针列表？我在类 Player 上有 stl 指针向量，我像这样随机播放

```
std::random_shuffle(players.begin(), players.end()); 
```

是否已经有不需要随机访问的随机列表算法，或者我需要将列表转换为向量 => 随机播放 => 回到列表？有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T11:32:55.103

随机洗牌算法将特定元素与随机选择的元素交换。重复遍历列表来获取元素是非常低效的（即这将是一个`O(n^2)`操作）。

这就是为什么最好（更快）将您的列表复制到一个数组一次，进行随机洗牌并可能恢复列表。那将是`3*n`遍历，仍然是`O(n)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:31:21.773

`std::random_shuffle`需要一个随机迭代器。Vector 支持这一点，而 List 则不支持。怎么样`std::deque`，它就像一种向量和一种列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T21:54:57.580

你的问题很有趣。所以，我试着写点东西，最后想出了这个。

```
 //---------- sample List initialization ------
    list<string> lst;
    lst.push_back("A");
    lst.push_back("B");
         ....
    lst.push_back("Y");
    lst.push_back("Z");

    #define LIST_SIZE 26
    //--------------------------------------------

    //------------- Shuffle Algorithm ------------
    unordered_multimap<int,string> mymap;
    int HashKeys[LIST_SIZE];
    srand((int)time(NULL) * (int)clock());

    for(int i = 0; i<LIST_SIZE; i++) // loop 'n' times
    {
        HashKeys[i] = rand(); // O(c) operation
    }

    for(int i = 0;lst.size() > 0; i++) // loop 'n' times
    {
         // O(n) operation ( varies from O(c) to O(n) according to the situations )
        mymap.insert(std::make_pair<int,string>(HashKeys[rand() % LIST_SIZE],lst.front()));
        lst.pop_front(); // O(c) operation
    }

    unordered_multimap<int,string>::iterator it;
    for(int i = 0; i < LIST_SIZE ;i++) // loop 'n' times
    {
        while(mymap.count(HashKeys[i]) > 0) // unpredictable
        {
            it = mymap.find(HashKeys[i]); // O(c) for single O(n) for multi
                    // ...USAGE...
            cout << it->second << endl;
                    lst.push_back(it->second);
                    //............
            mymap.erase(it); // O(c) operation
        }
    }
    //------------------------------------------------- 
```

如果哈希图中的同一键有多个值，则时间复杂度为 O(n^2)。否则时间复杂度为 O(n)。所以一切都取决于功能`(rand() % LIST_SIZE)`

# visual-studio-2012 - Component Factory Krypton Toolkit 不适用于 Visual Studio 2012 Ultimate

> ID：12872641
> 
> 赞同：3
> 
> 时间：2012-10-13T11:25:35.983
> 
> 标签：visual-studio-2012, krypton-toolkit

您好，我已经安装了 krypton 工具包，它使您的程序看起来更友好。这是我的问题。我无法使用工具包我尝试查看所有选项但没有答案，我在互联网上查看没有答案我如何在 vs 2012 上使用该工具包，因为我知道它曾经在 vs 2010 上工作

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T06:05:34.717

Krypton Toolkit 在 Visual Studio 2012 中运行良好。

您可能必须手动将控件添加到您的工具箱中，以便以您习惯的方式使用它们。

1.  通过单击“查看”菜单，然后单击“工具箱”菜单项来显示工具箱。
2.  右键单击工具箱，然后单击“选择项目”。
3.  单击“浏览”按钮，然后导航到 Krypton 目录。这通常是`C:\Program Files\Component Factory\Krypton Toolkit x.y.z\Bin\`xyz 是您安装的 Krypton 版本的位置。`Program Files (x86)`如果您正在运行 64 位 Windows ，它将在其中。
4.  选择`ComponentFactory.Krypton.Toolkit.dll`文件（以及可选的其他 Krypton 文件：`ComponentFactory.Krypton.Navigator.dll`、`ComponentFactory.Krypton.Workspace.dll`、`ComponentFactory.Krypton.Docking.dll`和`ComponentFactory.Krypton.Ribbon.dll`）。
5.  单击“打开”按钮。

您的工具箱现在将填充 Krypton 控件，您可以像使用以前的 Visual Studio 版本一样使用它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T22:23:32.627

就是这样。谢谢。打开后，您会在“所有 Windows 窗体”工具箱列表中以 Krypton .... 的名称注意到它们。您还需要在菜单>Project >> Add Reference 中浏览它，然后导航到 C:\Program Files\Component Factory\Krypton Toolkit 4.4.0\Bin\ 中的相同 dll（2013 年 3 月的当前版本）。现在您可以声明“使用 ComponentFactory.Krypton.Toolkit；” 设计屏幕中现在应该出现大约 37 个控件。

# linux - sqlcipher ./配置 linux

> ID：12872649
> 
> 赞同：4
> 
> 时间：2012-10-13T11:26:00.697
> 
> 标签：linux, configuration, cross-compiling, raspberry-pi, sqlcipher

我想为我的 Raspberry Pi 使用 OpenSSL 交叉编译 SQL-Cipher。我使用 crosstool-ng 作为编译器工具链。

```
./configure --enable-tempstore=yes CFLAGS="-DSQLITE_HAS_CODEC" LDFLAGS="/home/USER1/openssl-1.0.1c/libcrypto.a" 
```

给我以下错误：

```
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for fgrep... /bin/grep -F
checking for ld used by gcc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1572864
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking for /usr/bin/ld option to reload object files... -r
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for ar... ar
checking for strip... strip
checking for ranlib... ranlib
checking command to parse /usr/bin/nm -B output from gcc object... ok
checking how to run the C preprocessor... gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC -DPIC
checking if gcc PIC flag -fPIC -DPIC works... yes
checking if gcc static flag -static works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.o... (cached) yes
checking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking for a BSD-compatible install... /usr/bin/install -c
checking for gawk... gawk
checking for special C compiler options needed for large files... no
checking for _FILE_OFFSET_BITS value needed for large files... no
checking for int8_t... yes
checking for int16_t... yes
checking for int32_t... yes
checking for int64_t... yes
checking for intptr_t... yes
checking for uint8_t... yes
checking for uint16_t... yes
checking for uint32_t... yes
checking for uint64_t... yes
checking for uintptr_t... yes
checking for sys/types.h... (cached) yes
checking for stdlib.h... (cached) yes
checking for stdint.h... (cached) yes
checking for inttypes.h... (cached) yes
checking malloc.h usability... yes
checking malloc.h presence... yes
checking for malloc.h... yes
checking for usleep... yes
checking for fdatasync... yes
checking for localtime_r... yes
checking for gmtime_r... yes
checking for localtime_s... no
checking for utime... yes
checking for malloc_usable_size... yes
checking for tclsh8.5... no
checking for tclsh... no
Warning: can't find tclsh - defaulting to non-amalgamation build.
./configure: line 12321: tclsh: command not found
configure: Version set to 3.7
configure: Release set to 3.7.12.1
configure: Version number set to 3007012
checking whether to support threadsafe operation... yes
checking for library containing pthread_create... -lpthread
checking whether to allow connections to be shared across threads... no
checking whether to support shared library linked as release mode or not... no
checking whether to use an in-ram database for temporary tables... yes
checking if executables have the .exe suffix... unknown
checking host system type... (cached) x86_64-unknown-linux-gnu
checking for Tcl configuration... ./configure: line 12912: tclsh: command not found
configure: WARNING: Can't find Tcl configuration definitions
configure: WARNING: *** Without Tcl the regression tests cannot be executed ***
configure: WARNING: *** Consider using --with-tcl=... to define location of Tcl ***
checking for library containing tgetent... -lncurses
checking for readline in -lreadline... yes
checking readline.h usability... no
checking readline.h presence... no
checking for readline.h... no
checking for /usr/include/readline.h... no
checking for /usr/include/readline/readline.h... yes
checking for library containing fdatasync... none required
configure: creating ./config.status
config.status: creating Makefile
config.status: creating sqlite3.pc
config.status: creating config.h
config.status: config.h is unchanged
config.status: executing libtool commands
matze@matze-F5SR:~/Studienarbeit/sqlcipher-sqlcipher-ceee996$ ./configure --enable-tempstore=yes CFLAGS="-DSQLITE_HAS_CODEC" LDFLAGS="/home/matze/Studienarbeit/openssl-1.0.1c/libcrypto.a"
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for fgrep... /bin/grep -F
checking for ld used by gcc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1572864
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking for /usr/bin/ld option to reload object files... -r
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for ar... ar
checking for strip... strip
checking for ranlib... ranlib
checking command to parse /usr/bin/nm -B output from gcc object... ok
checking how to run the C preprocessor... gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC -DPIC
checking if gcc PIC flag -fPIC -DPIC works... yes
checking if gcc static flag -static works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.o... (cached) yes
checking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking for a BSD-compatible install... /usr/bin/install -c
checking for gawk... gawk
checking for special C compiler options needed for large files... no
checking for _FILE_OFFSET_BITS value needed for large files... no
checking for int8_t... yes
checking for int16_t... yes
checking for int32_t... yes
checking for int64_t... yes
checking for intptr_t... yes
checking for uint8_t... yes
checking for uint16_t... yes
checking for uint32_t... yes
checking for uint64_t... yes
checking for uintptr_t... yes
checking for sys/types.h... (cached) yes
checking for stdlib.h... (cached) yes
checking for stdint.h... (cached) yes
checking for inttypes.h... (cached) yes
checking malloc.h usability... yes
checking malloc.h presence... yes
checking for malloc.h... yes
checking for usleep... yes
checking for fdatasync... yes
checking for localtime_r... yes
checking for gmtime_r... yes
checking for localtime_s... no
checking for utime... yes
checking for malloc_usable_size... yes
checking for tclsh8.5... no
checking for tclsh... no
Warning: can't find tclsh - defaulting to non-amalgamation build.
./configure: line 12321: tclsh: command not found
configure: Version set to 3.7
configure: Release set to 3.7.12.1
configure: Version number set to 3007012
checking whether to support threadsafe operation... yes
checking for library containing pthread_create... -lpthread
checking whether to allow connections to be shared across threads... no
checking whether to support shared library linked as release mode or not... no
checking whether to use an in-ram database for temporary tables... yes
checking if executables have the .exe suffix... unknown
checking host system type... (cached) x86_64-unknown-linux-gnu
checking for Tcl configuration... ./configure: line 12912: tclsh: command not found
configure: WARNING: Can't find Tcl configuration definitions
configure: WARNING: *** Without Tcl the regression tests cannot be executed ***
configure: WARNING: *** Consider using --with-tcl=... to define location of Tcl ***
checking for library containing tgetent... -lncurses
checking for readline in -lreadline... yes
checking readline.h usability... no
checking readline.h presence... no
checking for readline.h... no
checking for /usr/include/readline.h... no
checking for /usr/include/readline/readline.h... yes
checking for library containing fdatasync... none required
configure: creating ./config.status
config.status: creating Makefile
config.status: creating sqlite3.pc
config.status: creating config.h
config.status: config.h is unchanged
config.status: executing libtool commands 
```

我怎样才能得到丢失的物品？我怎样才能告诉配置脚本使用不同的编译器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:36:04.150

要设置新的编译器，只需分配给 CC。

```
./configure CC=/path/to/compiler ... 
```

要查找`tclsh`，安装`tcl`并确保`tclsh`在运行配置脚本时包含的目录在您的 PATH 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T07:52:31.553

To solve this install tcl package on your PC. run this command on your terminal

```
sudo apt-get install tcl 
```

# entity-framework - 使用包含查找 char(1) 数据类型时的慢速 linq 查询

> ID：12872651
> 
> 赞同：2
> 
> 时间：2012-10-13T11:26:11.233
> 
> 标签：entity-framework, char, contains

我有一个带有 char(1) 状态列的旧数据库。我使用代码优先和实体框架 4.3.1 与我的数据库进行交互。我的代码第一类中的状态列定义如下：

```
[Column(TypeName = "char")]
public string Status { get; set; } 
```

我正在编写一个 linq 查询来获取状态为多个值之一的所有项目。代码看起来像这样（尽管它已被简化）：

```
List<string> statusList = new List<string>() {"N","H","P"};
...
var entries = (from t in context.MyTable where statusList.Conains(t.Status)).ToList();
... 
```

生成的 SQL 在所有 Status 值前面加上 N，这使得查询非常慢。

```
WHERE ([Extent1].[Status] IN (N'N', N'P', N'P')) 
```

似乎是因为它将 unicode 与非 unicode 进行比较，所以它不能使用 Status 列上的索引。

我之前在其他 linq 查询中也遇到过类似的问题，但我认为通过将 [Column(TypeName = "char")] 放在属性上来解决它们。

有谁知道我如何防止 SQL 将这些 N 放在我所有状态值的前面？我尝试将 statusList 设为 char 列表，但随后我需要先将 Status 列的定义更改为代码中的 char，但这会引发错误。

谢谢大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:50:01.637

您使用的是 .NET Framework 4 吗？我认为这已在 .NET Framework 4.5 附带的 EF5 核心库中得到修复。这是一个连接错误：[http ://connect.microsoft.com/VisualStudio/feedback/details/709906/entity-framework-linq-provider-defaulting-to-unicode-when-translating-string-contains-to- like-clause](http://connect.microsoft.com/VisualStudio/feedback/details/709906/entity-framework-linq-provider-defaulting-to-unicode-when-translating-string-contains-to-like-clause)连接错误还包含一个解决方法 - 使用 EntityFunctions.AsNonUnicode() 函数强制字符串不是 Unicode，如果您无法迁移到 .NET Framework 4.5，这可能会有所帮助

# regex - linux中的正则表达式，grep w

> ID：12872655
> 
> 赞同：0
> 
> 时间：2012-10-13T11:26:54.040
> 
> 标签：regex, linux, command

我有一个关于 linux 中正则表达式的简短问题。有一本书的`.txt`格式*(Dracula.txt)*。我不知道如何确定这本书中**最常用的3个**以开头`v`和结尾的单词`e`并显示它们。我知道我应该使用`grep`

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:57:08.093

你需要使用更多，然后只是`grep`为了那个>>

```
grep -io '\bv[a-z]*e\b' Dracula.txt | sort -f | uniq -ic | sort -nr | head -3 
```

# c# - 尝试解密时出现错误的密钥 CryptographicException

> ID：12872657
> 
> 赞同：2
> 
> 时间：2012-10-13T11:27:30.500
> 
> 标签：c#, encryption, rsa, x509certificate

我使用命令创建以下文件：

```
makecert -n "CN=TEST_CER" -sv "Test.pvk" -r -sky echange -pe test.cer
pvk2pfx -pvk Eltapk.pvk -spc test.cer  -pfx test.pfx -pi PVKPASS -po PFXPASS -f 
```

然后我在以下测试应用程序中使用 test.pfx：

```
 X509Certificate2 cer2 = new X509Certificate2("test.pfx", "PFXPASS");

            RSACryptoServiceProvider PrivateKey = cer2.PrivateKey as RSACryptoServiceProvider;
            RSACryptoServiceProvider PublicKey = cer2.PublicKey.Key as RSACryptoServiceProvider;

            string test = "test123";
            byte[] testb = Encoding.UTF8.GetBytes(test);

            testb = PublicKey.Encrypt(testb, true);
            testb = PrivateKey.Decrypt(testb, true);
            test = Encoding.UTF8.GetString(testb); 
```

我得到 CryptographicException: Bad Key。

我确实使用-sky exchange 和-pe。

我做错了什么？

PS PrivateKey.Encrypt 也因相同的异常而失败

# iphone - 我希望“tokenData”等于“token”中的“deviceToken”

> ID：12872659
> 
> 赞同：0
> 
> 时间：2012-10-13T11:27:45.787
> 
> 标签：iphone, nsstring, nsdata

```
- (void)application:(UIApplication *)application
didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken 
{
    NSLog(@"%@", [NSString stringWithFormat:@"%@", deviceToken]); 

    //display: 
    //<682e6887 ad7c7268 38861e90 6f4b9ba7 ced1299e abf3084b ca2ca75a 11111111>

    NSString *token = @"<682e6887 ad7c7268 38861e90 6f4b9ba7 ced1299e abf3084b ca2ca75a 11111111>";
    NSData *tokenData = [token dataUsingEncoding:NSASCIIStringEncoding];
    NSLog(@"%@", [NSString stringWithFormat:@"%@", tokenData]); 

    //display:
    //3c36383265363838372061643763373236382033383836316539302036663462396261372063656431323939652061626633303834622063613263613735612031313131313131313e
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:34:53.883

我听不懂你在说什么。但是您使用`NSData`错误`NSString`。

```
NSString *token=[[NSString alloc] initWithData:deviceToken encoding:NSUTF8StringEncoding];

NSData *deviceToken = [token dataUsingEncoding:NSUTF8StringEncoding]; 
```

使用上述两个函数进行转换`NSString`，`NSData`反之亦然。

# linux - 带有 plesk 的 linux Ubuntu 上的多个 svn 存储库

> ID：12872662
> 
> 赞同：1
> 
> 时间：2012-10-13T11:28:08.147
> 
> 标签：linux, svn, ubuntu, plesk, vhosts

我有一个 linux 虚拟服务器和一个域“mydomain”。我已经有一个工作的 svn 和 trac 系统，但是多个存储库的一个小问题。

我的存储库路径是：

```
/var/www/vhosts/mydomain.com/svn/repo1 
```

和

```
/var/www/vhosts/mydomain.com/svn/folder/repo2
/var/www/vhosts/mydomain.com/svn/folder/repo3
/var/www/vhosts/mydomain.com/svn/folder/repo4 
```

现在我想通过https连接：这已经适用于repo1，但不适用于其他人。实际上我的vhost_ssl.conf在/var/www/vhosts/svn.mydomain.com/conf/下作为子域。和我的vhost。配置：

```
 1<Location /svn>
  2    DAV svn
  3    SVNParentPath /var/www/vhosts/mydomain.com/svn/
  4    AuthType Basic
  5    AuthName "My Repository"
  6    AuthUserFile /var/www/vhosts/mydomain.com/svn/svn.password
  7    Require valid-user
  8 </Location> 
```

所以我可以通过[https://svn.mydomain.com/svn/repo1到达 svn](https://svn.mydomain.com/svn/repo1)

[我应该怎么做才能获得以下信息： 1.使用https://svn.mydomain.com/repo1](https://svn.mydomain.com/repo1)到达 repo 1

2.Reach repo2 .. repo4 通过 `https://svn.mydomain.com/repoX`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:44:58.787

**第 1 点**

根目录下的回购对于根目录下站点的其余非 svn 部分会遇到一些麻烦（无法回忆此处讨论的确切 URL，在 SF 上，但您可以尝试查找 - 它们具有与 svn 相关的标签（s），正文中的“位置/”和至少一个我的答案）

**第 2 点**

使用 /folder/ 作为 repo[234] 路径，你不能拥有 repo1 和这些 repos SVNParentPath'ed Location 的共同点（Apache 配置中没有额外的技巧 - /svn 和 /folder 路径必须相同）

**第 3 点**

`SVNPath` *可以*用于完全不相关的路径存储库，但每个 SVNPath**必须**在唯一的位置内

```
<Location /repo1>
    DAV svn
    SVNPath /var/www/vhosts/mydomain.com/svn/repo1
    ...
</Location>
<Location /repo2>
    DAV svn
    SVNPath /var/www/vhosts/mydomain.com/svn/folder/repo2
    ...
</Location> 
```

# java - Android：应用程序意外停止（进一步调查的最佳方法是什么？）

> ID：12872663
> 
> 赞同：1
> 
> 时间：2012-10-13T11:28:14.837
> 
> 标签：java, android, eclipse, runtime-error, android-logcat

我的测试应用程序包含一个从联系人填充内容的 ListActivity。LogCat 的错误没有解释异常的来源，因为没有涉及项目文件。

如果在 ADV 或设备上运行（测试了两种不同的手机），它会意外停止。

重要提示：当用户滚动列表以查看更多项目时，会引发错误：当显示两个或三个以上项目时。（总是在列表的同一点崩溃，并且两者都崩溃：用手指或轨迹球滚动）。

进一步调查的最佳方法是什么？

```
10-13 13:21:00.662: E/AndroidRuntime(8031): FATAL EXCEPTION: main
10-13 13:21:00.662: E/AndroidRuntime(8031): java.lang.NullPointerException
10-13 13:21:00.662: E/AndroidRuntime(8031):     at android.widget.AbsListView.obtainView(AbsListView.java:1304)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at android.widget.ListView.makeAndAddView(ListView.java:1727)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at android.widget.ListView.fillDown(ListView.java:652)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at android.widget.ListView.fillGap(ListView.java:623)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at android.widget.AbsListView.trackMotionScroll(AbsListView.java:2944)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at android.widget.AbsListView$FlingRunnable.run(AbsListView.java:2485)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at android.os.Handler.handleCallback(Handler.java:587)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at android.os.Looper.loop(Looper.java:123)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at android.app.ActivityThread.main(ActivityThread.java:4627)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at java.lang.reflect.Method.invokeNative(Native Method)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at java.lang.reflect.Method.invoke(Method.java:521)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
10-13 13:21:00.662: E/AndroidRuntime(8031):     at dalvik.system.NativeStart.main(Native Method) 
```

更新：适配器的代码：

```
package com.stripedbee.warayu;

import java.util.List;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class ContactAdapter extends ArrayAdapter<Contact> {

    private final List<Contact> _contacts;
    private final Activity _context;

    public ContactAdapter(Activity context, List<Contact> contacts) {
        super(context, R.layout.contact_list_item, contacts);
        this._contacts = contacts;
        this._context = context;
    }

    static class ViewHolder {
        protected TextView display_name;
        protected TextView number;
        protected TextView number_type;
        private Contact contact;

        protected void setContact(Contact contact) {
            this.display_name.setText(contact.get_display_name());
            this.number.setText(contact.get_number());
            this.number_type.setText(contact.get_number_type());
            this.contact = contact;
        }

        protected Contact getContact() {
            return contact;
        }
    }

    @Override
    public Contact getItem(int position) {
        return this._contacts.get(position);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflater = this._context.getLayoutInflater();
            view = inflater.inflate(R.layout.contact_list_item, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.display_name = (TextView) view
                    .findViewById(R.id.txtDisplayName);
            viewHolder.number = (TextView) view.findViewById(R.id.txtNumber);
            viewHolder.number_type = (TextView) view
                    .findViewById(R.id.txtNumberType);
            viewHolder.setContact(_contacts.get(position));
            view.setTag(viewHolder);
        }

        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:44:56.437

当不是时（例如当用户开始滚动时） ，您从您的方法返回一个`null`视图。你的方法应该是这样的：`getView``convertView``null``getView`

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = null;
    ViewHolder holder;
    if (convertView == null) {
        LayoutInflater inflater = this._context.getLayoutInflater();
        view = inflater.inflate(R.layout.contact_list_item, parent, false);
        holder = new ViewHolder();
        viewHolder.display_name = (TextView) view
                .findViewById(R.id.txtDisplayName);
        viewHolder.number = (TextView) view.findViewById(R.id.txtNumber);
        viewHolder.number_type = (TextView) view
                .findViewById(R.id.txtNumberType);            
        view.setTag(viewHolder);
    } else {
        view = convertView;
        holder = (ViewHolder) view.getTag();
    }        
    holder.setContact(_contacts.get(position));
    return view;
} 
```

# blackberry - 黑莓是否支持其应用程序开发人员的演示/测试版？

> ID：12872666
> 
> 赞同：2
> 
> 时间：2012-10-13T11:28:25.867
> 
> 标签：blackberry, deployment, mobile-application, beta-testing

我有兴趣为 BlackBerry 设备开发应用程序，并且想知道他们是否支持其应用程序开发人员的演示版或 beta 版概念？我的意思是能够将我的应用程序的 beta 版或演示版部署给有限/受限的受众，例如业务合作伙伴、客户、外部 beta 测试人员等。他们的[测试和部署](http://supportforums.blackberry.com/t5/Testing-and-Deployment/tkb-p/Testing_and_Deployment_of_Applications%40tkb)文档中没有任何内容表明这两种方式。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:54:26.623

BlackBerry 10 的 App World 中没有内置的 beta 进程，但您可以与您的 beta 参与者共享您的应用程序的调试版本。创建调试令牌时，请指定希望它对哪些 PIN 有效。调试令牌只会安装在具有这些 PIN 之一的设备上，并且您的应用只会安装在带有调试令牌的设备上。该令牌的有效期仅为 30 天。您必须使用命令行工具而不是 App World 来部署它。

黑莓开发者博客上的这个链接解释了如何做到这一点： http: [//devblog.blackberry.com/2012/04/debug-token/](http://devblog.blackberry.com/2012/04/debug-token/)

它适用于 PlayBook，但同样的过程也适用于 BlackBerry 10。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T02:51:07.970

这是不可能的。当您在应用世界中发布您的应用时，它将可供所有用户使用。因此，您不能设置任何特殊条件，例如仅对某些人可用。否则使其处于未发布模式。然后只有拥有沙盒 ID 的用户才能访问您的应用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T23:22:31.117

我实际上不知道 RIM 本身是否有任何正式的东西，但由于我一直在不止于官方 App World 商店发布 BlackBerry 应用程序，因此我使用了一个独立于 RIM 的 beta 测试系统。幸运的是，传统的 BlackBerry Java 平台让您可以自由地免费执行此操作。*（请注意，此答案与即将推出的 BB10 平台无关！）*

## 无线 (OTA) 安装

您可以让您的 Beta 测试人员安装您的 Beta 版本，即无线 (OTA)。例如，与 iOS 不同的是，您不限于一定数量的测试设备，并且您不必告诉 RIM 所有测试设备的唯一标识符是什么。

所以，我所做的只是将我的应用程序的 beta 版本放在网络服务器上，并将链接发送给 beta 测试人员，让他们下载它们。因此，您可以控制谁可以访问。如果您需要安全性将 Beta 版本限制为除官方 Beta 测试人员之外的任何人，那么您当然可以自由地将受密码保护的登录添加到您的网络服务器。这与任何其他安全 Web 内容的工作方式相同。

如果您这样做（OTA），这里有一些参考资料：

*   [http://www.blackberryinsight.com/2008/07/08/howto-setup-an-apache-webserver-to-deliver-blackberry-ota-applications/](http://www.blackberryinsight.com/2008/07/08/howto-setup-an-apache-webserver-to-deliver-blackberry-ota-applications/)

*   [黑莓无线安装](https://stackoverflow.com/q/6762546/119114)

*   [https://stackoverflow.com/a/10307074/119114](https://stackoverflow.com/a/10307074/119114)

有几个步骤需要注意：

*   您通常只需将`.cod`文件上传到 BlackBerry App World。如果您想将应用程序部署到您自己的网络服务器，您还需要该`.jad`文件。[JAD 文件](http://docs.blackberry.com/en/developers/deliverables/7693/Attributes_for_jad_files_513047_11.jsp)基本上只是应用程序的描述符，它可以将 BlackBerry 浏览器重定向到该文件`.cod`以进行安装。您的构建过程可能已经在生成`.jad`文件的同一输出目录中为您生成`.cod`文件。
*   您可能需要配置您的网络服务器以正确设置带有`.jad`扩展名的文件的 MIME 类型。如果您使用 Apache，那么您将在 httpd.conf 文件中添加以下内容：

```
AddType text/vnd.sun.j2me.app-descriptor jad 
```

您可能还需要为该`.cod`类型添加 MIME 类型定义

```
AddType application/vnd.rim.cod .cod 
```

如果您无权访问 Web 服务器的`httpd.conf`文件，但可以将 JAD 和 COD 放在您自己的用户目录中，那么您可以在本地`.htaccess`文件中配置 MIME 类型。

根据您的 Web 服务器配置，可能还需要几个步骤。检查我上面提供的 OTA 链接。

## 桌面安装

另一种选择是简单地将您的 Beta 版本通过电子邮件发送给 Beta 测试人员，并让他们[使用 BlackBerry Desktop Software](http://docs.blackberry.com/en/developers/deliverables/7693/Distributing_BB_Java_Apps_with_BB_Desktop_Softwar_512527_11.jsp)安装在他们的设备上。我不这样做，但这是完成同一件事的另一种方式。为此，您使用该`.cod`文件以及[.alx 文件](http://docs.blackberry.com/en/developers/deliverables/7693/Elements_and_attributes_for_alx_files_513046_11.jsp)，该文件也是由正常的 BlackBerry 构建过程生成的。

请注意，如果您只将文件直接部署到 BlackBerry App World，则无需担心放入`.alx`或文件中的一些项目属性。如果您使用其中一个选项（用于桌面安装的 ALX，或用于 OTA 的 JAD），那么我建议打开or文件并检查值的正确性。它们是普通的文本文件，大多数值应该是不言自明的。我相信所有设置都可以从您的 IDE 内部进行配置。如果您使用 BlackBerry Eclipse 插件，请右键单击您的项目，选择**Properties**并环顾四周。`.jad``.cod``.alx``.jad`

 **[这是有关所有安装选项的官方 RIM 文档](http://docs.blackberry.com/en/developers/deliverables/7693/Packaging_and_distributing_BB_Java_applications_512511_11.jsp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T09:33:08.263

检查以下链接以获取 BB 10 Cascades beta 3 版本（BB 10 中的首选开发方式）

[https://developer.blackberry.com/cascades/](https://developer.blackberry.com/cascades/)

对于 BB 10，它们有很多开发应用程序的方法，请查看以下链接

[https://developer.blackberry.com/platforms/](https://developer.blackberry.com/platforms/)**

# xcode - iOS 图像质量和分辨率下降

> ID：12872667
> 
> 赞同：0
> 
> 时间：2012-10-13T11:28:46.773
> 
> 标签：xcode, uiimage, resolution

我有我在整个应用程序中使用的 imageview。它可以保存来自画廊或相机的图片。

最后，我使用 php 将其上传到网络服务器。

但是 xcode 在哪里缩小我的图像？Ipad 图片是 aprox。300x300 像素。尝试下载 1000+ x 1000+ 像素的图像，但是一旦我通过 uiimagepicker 打开它，它看起来就会缩小。在我的画廊中，在我启动我的应用程序之前它很好，但是当我通过我的画廊添加它时，它的分辨率很低。

我需要这些图像的分辨率。

有没有办法获得它？

# matlab - matlab控制数码相机

> ID：12872668
> 
> 赞同：2
> 
> 时间：2012-10-13T11:29:04.460
> 
> 标签：matlab, camera

我有一台不支持从计算机拍照的数码相机。

我可以通过matlab控制这台相机吗？或者我是否需要一个支持它的数码相机才能通过 matlab 控制它？

我只想从matlab拍一张照片（相机和电脑之间连接了一个usb）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:09:39.107

如果你想用 Matlab 控制相机，你应该有 Image Acquisition Toolbox。此外，工具箱必须支持您要连接的相机。

您可能想查看 [http://www.mathworks.com/products/imaq/](http://www.mathworks.com/products/imaq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T15:07:50.763

如果您的相机也有 A/VR 输出（如索尼数码相机），您可以使用 USB 电视调谐器来捕获模拟信号，然后使用 matlab 从相机实时捕获视频/图像。为我工作！

# android - 找不到“userdata.img”文件？

> ID：12872670
> 
> 赞同：0
> 
> 时间：2012-10-13T11:29:06.707
> 
> 标签：android, android-emulator, avd

我在window7系统上安装了最新的Android SDK，当我尝试创建模拟器时，它响应“无法找到ABI armeabi的'userdata.img'文件复制到AVD文件夹”文件夹。

有人对此有想法/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:03:54.757

谢谢...但是我在创建模拟器时忘记选择 CPU/ABI 选项...它解决了我的问题。![在此处输入图像描述](../Images/4e2fde893c9f6ce840d656c67de3d710.png)

# php - 在每个新会话上显示随机图像？

> ID：12872673
> 
> 赞同：2
> 
> 时间：2012-10-13T11:30:20.123
> 
> 标签：php, image, session

我正在尝试这样做，以便每次加载用户会话时都会从目录中显示一个随机图像。就像一个广告。

目前图像在每次页面刷新时都会改变，这并没有真正帮助我，因为当用户从一个页面转到另一个页面时，图像的不断刷新变得很烦人。

这是我到目前为止所拥有的？请任何人都可以指出我需要做我需要做的那段代码。

```
<?php

$path_to_images = "../PTB1/data/adverts/"; // path for images
$default_img = "test.png"; // default image, when error on page

function getRandomImage($path, $img) {

if ( $list = getImagesList($path) ) {
mt_srand( (double)microtime() * 1000000 );
$num = array_rand($list);
$img = $list[$num];
}
return $path . $img;
}
function getImagesList($path) {
$ctr = 0;

    if(!isset($_SESSION['id']));

if ( $img_dir = @opendir($path) ) {
while ( false !== ($img_file = readdir($img_dir)) ) {
// formati slik, ki jih prepozna
if ( preg_match("/(\.gif|\.jpg|\.png)$/", $img_file) ) {
$images[$ctr] = $img_file;
$ctr++;
}
}
closedir($img_dir);
return $images;
}
return false;
}

?>
<div class=\"advert-box\" id=\"mod-advert\">
<img src="<?php echo getRandomImage($path_to_images, $default_img) ?>" height="190" width="180"alt="">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:40:42.283

您是否尝试创建**会话**变量？

```
<?php 

session_start();
// check if a image is already present
// no need to create again
if(!isset($_session['image'])){
  $_session['image'] = getRandomImage($path_to_images, $default_img);  
}

....
....

<div class=\"advert-box\" id=\"mod-advert\">
<img src="<?php echo $_session['image'] ?>" height="190" width="180"alt="">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:35:13.087

第一步，在用户登录时进行图像选择：

```
session_start();
if(!isset($_SESSION['image'])){
    $_SESSION['image'] = getRandomImage($path_to_images, $default_img);
} 
```

接下来，在每一页上，您只需要查看`$_SESSION['image']`变量：

```
<img src="<?php echo $_SESSION['image']; ?>" height="190" width="180"alt=""> 
```

# iphone - 改变 UIImage 颜色

> ID：12872680
> 
> 赞同：112
> 
> 时间：2012-10-13T11:31:28.047
> 
> 标签：iphone, objective-c, ios, uiimage, cgcontext

我正在尝试更改 UIImage 的颜色。我的代码：

```
-(UIImage *)coloredImage:(UIImage *)firstImage withColor:(UIColor *)color {
    UIGraphicsBeginImageContext(firstImage.size);

    CGContextRef context = UIGraphicsGetCurrentContext();
    [color setFill];

    CGContextTranslateCTM(context, 0, firstImage.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    CGContextSetBlendMode(context, kCGBlendModeCopy);
    CGRect rect = CGRectMake(0, 0, firstImage.size.width, firstImage.size.height);
    CGContextDrawImage(context, rect, firstImage.CGImage);

    CGContextClipToMask(context, rect, firstImage.CGImage);
    CGContextAddRect(context, rect);
    CGContextDrawPath(context,kCGPathElementMoveToPoint);

    UIImage *coloredImg = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return coloredImg;
} 
```

此代码有效，但获得的图像不如应有的好：返回图像的边界像素是断断续续的，不像我的第一张图像那样平滑。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：284
> 
> 时间：2014-11-17T04:31:09.077

从 iOS 7 开始，这是最简单的方法。

**目标-C：**

```
theImageView.image = [theImageView.image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];
[theImageView setTintColor:[UIColor redColor]]; 
```

**斯威夫特 2.0：**

```
theImageView.image = theImageView.image?.imageWithRenderingMode(.AlwaysTemplate) 
theImageView.tintColor = UIColor.magentaColor() 
```

**斯威夫特 4.0：**

```
theImageView.image = theImageView.image?.withRenderingMode(.alwaysTemplate) 
theImageView.tintColor = .magenta 
```

**故事板：**

首先在您的资产中将图像配置为模板（在右侧栏 - 渲染为）。然后图像的颜色将是应用的色调颜色。 [![在此处输入图像描述](../Images/244750548e1c7de49236aedfc05b6580.png)](https://i.stack.imgur.com/axqTP.png)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-10-03T06:57:31.587

这几乎是上面的答案，但略有缩短。这仅将图像作为蒙版，实际上并没有“倍增”或为图像着色。

目标 C：

```
 UIColor *color = <# UIColor #>;
    UIImage *image = <# UIImage #>;// Image to mask with
    UIGraphicsBeginImageContextWithOptions(image.size, NO, image.scale);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [color setFill];
    CGContextTranslateCTM(context, 0, image.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);
    CGContextClipToMask(context, CGRectMake(0, 0, image.size.width, image.size.height), [image CGImage]);
    CGContextFillRect(context, CGRectMake(0, 0, image.size.width, image.size.height));

    UIImage *coloredImg = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext(); 
```

迅速：

```
 let color: UIColor = <# UIColor #>
    let image: UIImage = <# UIImage #> // Image to mask with
    UIGraphicsBeginImageContextWithOptions(image.size, false, image.scale)
    let context = UIGraphicsGetCurrentContext()
    color.setFill()
    context?.translateBy(x: 0, y: image.size.height)
    context?.scaleBy(x: 1.0, y: -1.0)
    context?.clip(to: CGRect(x: 0, y: 0, width: image.size.width, height: image.size.height), mask: image.cgImage!)
    context?.fill(CGRect(x: 0, y: 0, width: image.size.width, height: image.size.height))
    let coloredImg = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext() 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-13T15:09:17.937

给图像着色的另一种方法是简单地将其乘以恒定颜色。有时，这更可取，因为它不会“提升”黑色区域的颜色值；它使图像中的相对强度保持不变。使用叠加层作为色调往往会使对比度变平。

这是我使用的代码：

```
UIImage *MultiplyImageByConstantColor( UIImage *image, UIColor *color ) {

    CGSize backgroundSize = image.size;
    UIGraphicsBeginImageContext(backgroundSize);

    CGContextRef ctx = UIGraphicsGetCurrentContext();

    CGRect backgroundRect;
    backgroundRect.size = backgroundSize;
    backgroundRect.origin.x = 0;
    backgroundRect.origin.y = 0;

    CGFloat r,g,b,a;
    [color getRed:&r green:&g blue:&b alpha:&a];
    CGContextSetRGBFillColor(ctx, r, g, b, a);
    CGContextFillRect(ctx, backgroundRect);

    CGRect imageRect;
    imageRect.size = image.size;
    imageRect.origin.x = (backgroundSize.width - image.size.width)/2;
    imageRect.origin.y = (backgroundSize.height - image.size.height)/2;

    // Unflip the image
    CGContextTranslateCTM(ctx, 0, backgroundSize.height);
    CGContextScaleCTM(ctx, 1.0, -1.0);

    CGContextSetBlendMode(ctx, kCGBlendModeMultiply);
    CGContextDrawImage(ctx, imageRect, image.CGImage);

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return newImage;
} 
```

**斯威夫特版本**

```
extension UIImage{

    static func multiplyImageByConstantColor(image:UIImage,color:UIColor)->UIImage{
        let backgroundSize = image.size
        UIGraphicsBeginImageContext(backgroundSize)

        let ctx = UIGraphicsGetCurrentContext()

        var backgroundRect=CGRect()
        backgroundRect.size = backgroundSize
        backgroundRect.origin.x = 0
        backgroundRect.origin.y = 0

        var r:CGFloat
        var g:CGFloat
        var b:CGFloat
        var a:CGFloat
        color.getRed(&r, green: &g, blue: &b, alpha: &a)
        CGContextSetRGBFillColor(ctx, r, g, b, a)
        CGContextFillRect(ctx, backgroundRect)

        var imageRect=CGRect()
        imageRect.size = image.size
        imageRect.origin.x = (backgroundSize.width - image.size.width)/2
        imageRect.origin.y = (backgroundSize.height - image.size.height)/2

        // Unflip the image
        CGContextTranslateCTM(ctx, 0, backgroundSize.height)
        CGContextScaleCTM(ctx, 1.0, -1.0)

        CGContextSetBlendMode(ctx, .Multiply)
        CGContextDrawImage(ctx, imageRect, image.CGImage)

        let newImage = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return newImage
    }
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-05-24T13:22:29.780

从**iOS 10**开始，您可以使用`UIGraphicsImageRenderer`：

```
extension UIImage {

    func colored(_ color: UIColor) -> UIImage {
        let renderer = UIGraphicsImageRenderer(size: size)
        return renderer.image { context in
            color.setFill()
            self.draw(at: .zero)
            context.fill(CGRect(x: 0, y: 0, width: size.width, height: size.height), blendMode: .sourceAtop)
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-01-08T03:37:05.660

**在 Swift 3.0 中**

```
imageView.image? = (imageView.image?.withRenderingMode(.alwaysTemplate))!
imageView.tintColor = UIColor.magenta 
```

**在斯威夫特 2.0 中**

```
yourImage.image? = (yourImage.image?.imageWithRenderingMode(.AlwaysTemplate))!
yourImage.tintColor = UIColor.magentaColor() 
```

享受你的 Swift 先驱

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-10-22T02:08:27.613

**斯威夫特 4.2 解决方案**

```
extension UIImage {
    func withColor(_ color: UIColor) -> UIImage {
        UIGraphicsBeginImageContextWithOptions(size, false, scale)
        guard let ctx = UIGraphicsGetCurrentContext(), let cgImage = cgImage else { return self }
        color.setFill()
        ctx.translateBy(x: 0, y: size.height)
        ctx.scaleBy(x: 1.0, y: -1.0)
        ctx.clip(to: CGRect(x: 0, y: 0, width: size.width, height: size.height), mask: cgImage)
        ctx.fill(CGRect(x: 0, y: 0, width: size.width, height: size.height))
        guard let colored = UIGraphicsGetImageFromCurrentImageContext() else { return self }
        UIGraphicsEndImageContext()
        return colored
    }
}

// Usage:
// let redImage = UIImage().withColor(.red) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-02T06:05:41.747

如果您不必以编程方式执行此操作，则可以使用 Xcode UI 执行此操作。

如果您转到图像资产文件夹中的图像，请打开右侧的检查器，然后有一个“渲染为”下拉菜单，其中包含以下选项：

1.  默认
2.  原来的
3.  模板

一旦你选择了模板，你可以随意改变图像的 tintColor - 无论是使用 Xcode 故事板 UI 还是以编程方式。

[![在此处输入图像描述](../Images/35526755b9cdf5e6efb879544577d1a7.png)](https://i.stack.imgur.com/8JOfe.png)

看这张图片：

[![在此处输入图像描述](../Images/ddfeee1aa870f63b692d5db3cd2383c2.png)](https://i.stack.imgur.com/CKo7d.png)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-08-18T10:53:42.417

这是我对@Anna 答案的改编。这里有两个关键点：

*   使用`destinationIn`混合模式
*   调用`UIGraphicsBeginImageContextWithOptions(backgroundSize, false, UIScreen.main.scale)`以获得平滑的图像

**Swift 3**中的代码：

```
extension UIImage {

    static func coloredImage(image: UIImage?, color: UIColor) -> UIImage? {

        guard let image = image else {
            return nil
        }

        let backgroundSize = image.size
        UIGraphicsBeginImageContextWithOptions(backgroundSize, false, UIScreen.main.scale)

        let ctx = UIGraphicsGetCurrentContext()!

        var backgroundRect=CGRect()
        backgroundRect.size = backgroundSize
        backgroundRect.origin.x = 0
        backgroundRect.origin.y = 0

        var r:CGFloat = 0
        var g:CGFloat = 0
        var b:CGFloat = 0
        var a:CGFloat = 0
        color.getRed(&r, green: &g, blue: &b, alpha: &a)
        ctx.setFillColor(red: r, green: g, blue: b, alpha: a)
        ctx.fill(backgroundRect)

        var imageRect = CGRect()
        imageRect.size = image.size
        imageRect.origin.x = (backgroundSize.width - image.size.width) / 2
        imageRect.origin.y = (backgroundSize.height - image.size.height) / 2

        // Unflip the image
        ctx.translateBy(x: 0, y: backgroundSize.height)
        ctx.scaleBy(x: 1.0, y: -1.0)

        ctx.setBlendMode(.destinationIn)
        ctx.draw(image.cgImage!, in: imageRect)

        let newImage = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return newImage!
    }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-07-14T08:41:41.233

对于 iOS 13 及更高版本：

`let redImage = image.withTintColor(.red, renderingMode: .alwaysTemplate)`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-14T10:59:36.347

基于@Anna 的回答，我为 swift 2.2 重写并使用 alpha 通道处理图像：

```
static func multiplyImageByConstantColor(image:UIImage,color:UIColor)->UIImage{
    let backgroundSize = image.size
    UIGraphicsBeginImageContext(backgroundSize)

    let ctx = UIGraphicsGetCurrentContext()

    var backgroundRect=CGRect()
    backgroundRect.size = backgroundSize
    backgroundRect.origin.x = 0
    backgroundRect.origin.y = 0

    var r:CGFloat = 0
    var g:CGFloat = 0
    var b:CGFloat = 0
    var a:CGFloat = 0
    color.getRed(&r, green: &g, blue: &b, alpha: &a)
    CGContextSetRGBFillColor(ctx, r, g, b, a)

    // Unflip the image
    CGContextTranslateCTM(ctx, 0, backgroundSize.height)
    CGContextScaleCTM(ctx, 1.0, -1.0)
    CGContextClipToMask(ctx, CGRectMake(0, 0, image.size.width, image.size.height), image.CGImage);
    CGContextFillRect(ctx, backgroundRect)

    var imageRect=CGRect()
    imageRect.size = image.size
    imageRect.origin.x = (backgroundSize.width - image.size.width)/2
    imageRect.origin.y = (backgroundSize.height - image.size.height)/2

    CGContextSetBlendMode(ctx, .Multiply)
    CGContextDrawImage(ctx, imageRect, image.CGImage)

    let newImage = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()
    return newImage
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-06T15:12:38.027

Anna 的代码非常适合使用 kCGBlendModeNormal 而不是 kCGBlendModeMultiply 在彩色 .image 背景上复制 UIImage.image。例如，`self.mainImage.image = [self NormalImageByConstantColor: self.mainImage.image withColor: yourColor];`将 mainImage.image 的内容放在 yourColor 的色调上，同时保留 yourColor 的不透明度。这解决了我在要保存到相机胶卷的图像后面放置不透明背景颜色的问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-18T15:20:32.093

Swift 3.0 版 Anna 的奇妙代码：

```
extension UIImage{

    static func multiplyImageByConstantColor(image:UIImage,color:UIColor)-> UIImage {
        let backgroundSize = image.size
        UIGraphicsBeginImageContext(backgroundSize)

        let ctx = UIGraphicsGetCurrentContext()!

        var backgroundRect=CGRect()
        backgroundRect.size = backgroundSize
        backgroundRect.origin.x = 0
        backgroundRect.origin.y = 0

        let myFloatForR = 0
        var r = CGFloat(myFloatForR)
        let myFloatForG = 0
        var g = CGFloat(myFloatForG)
        let myFloatForB = 0
        var b = CGFloat(myFloatForB)
        let myFloatForA = 0
        var a = CGFloat(myFloatForA)

        color.getRed(&r, green: &g, blue: &b, alpha: &a)
        ctx.setFillColor(red: r, green: g, blue: b, alpha: a)
        ctx.fill(backgroundRect)

        var imageRect=CGRect()
        imageRect.size = image.size
        imageRect.origin.x = (backgroundSize.width - image.size.width)/2
        imageRect.origin.y = (backgroundSize.height - image.size.height)/2

        // Unflip the image
        ctx.translateBy(x: 0, y: backgroundSize.height)
        ctx.scaleBy(x: 1.0, y: -1.0)

        ctx.setBlendMode(.multiply)
        ctx.draw(image.cgImage!, in: imageRect)

        let newImage = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return newImage!
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-03-30T03:57:16.030

斯威夫特 3：

```
extension UIImage{

    static func multiplyImageByConstantColor(image:UIImage,color:UIColor) -> UIImage{

        let backgroundSize = image.size
        UIGraphicsBeginImageContext(backgroundSize)

        guard let ctx = UIGraphicsGetCurrentContext() else {return image}

        var backgroundRect=CGRect()
        backgroundRect.size = backgroundSize
        backgroundRect.origin.x = 0
        backgroundRect.origin.y = 0

        var r:CGFloat = 0
        var g:CGFloat = 0
        var b:CGFloat = 0
        var a:CGFloat = 0
        color.getRed(&r, green: &g, blue: &b, alpha: &a)
        ctx.setFillColor(red: r, green: g, blue: b, alpha: a)

        // Unflip the image
        ctx.translateBy(x: 0, y: backgroundSize.height)
        ctx.scaleBy(x: 1.0, y: -1.0)
        ctx.clip(to: CGRect(0, 0, image.size.width, image.size.height), mask: image.cgImage!)
        ctx.fill(backgroundRect)

        var imageRect=CGRect()
        imageRect.size = image.size
        imageRect.origin.x = (backgroundSize.width - image.size.width)/2
        imageRect.origin.y = (backgroundSize.height - image.size.height)/2

        ctx.setBlendMode(.multiply)
        ctx.draw(image.cgImage!, in: imageRect)

        let newImage = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return newImage!
    }
} 
```

# html - 垂直居中对齐 div 内的图像？

> ID：12872681
> 
> 赞同：0
> 
> 时间：2012-10-13T11:31:31.117
> 
> 标签：html, css

我有一个 div，其中包含 2 个图像。

第一个图像的高度与 div 高度一样，但第二个图像高度小于 div 高度。我想垂直居中对齐这个我没有做的图像。这是我的标记，请告诉我如何执行此操作，以便它适用于所有当前浏览器。

谢谢

```
 <div class="left">
        <img alt="" src="Images/Logo.png" style=" border:2px dashed red;" />
        <img class=TI alt="Tayyiba Institute" src="Images/TayyibaInstitute.png" style=" border:2px dashed orange;" />
    </div>

    div.Container div.Left
{
width:50%;
float:left ;
display:inline;
}

div.Container div.Left img.TI
{        
 width:92px;
 height:95px;
 float:left;
 line-height:200px;
 vertical-align:middle;
 margin:auto 0 auto 0;
 display:block ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:40:36.820

好吧，这里有很多错误...让我一个接一个...

1）这里没有引号`class=TI`

2) 这里的容器 div 在哪里？`div.Container div.Left img.TI`

你需要将你的第一张图片向左浮动，然后`position: relative;`像这样给第二张图片：

[我的小提琴](http://jsfiddle.net/jGXtB/2/)

HTML

```
<div class="left">
    <img alt="" src="Images/Logo.png" style=" border:2px dashed red; float: left;" />
    <img class="TI" alt="Tayyiba Institute" src="http://www.cbfaizabad.org.in/images/bullet/0043_bullet2.png" style=" border:2px dashed orange;" />
</div> 
```

CSS

```
.Left
{
float:left ;
}

.TI
{        
    position: relative;
    top: 5px;
}​ 
```

**建议：**清理 CSS 并了解更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:24:09.837

请保持简单。

标记：

```
<div class="left"> 
    <img alt="" src="Images/Logo.png" /> 
    <img alt="" src="Images/TayyibaInstitute.png" /> 
</div> 
```

样式表：

```
.left img { 
    vertical-align: middle; 
} 
```

[有了这个结果](http://jsfiddle.net/NGLN/nx3DN/)。

# ruby-on-rails - 如何正确使用 has_many :through 和 alias_method？

> ID：12872682
> 
> 赞同：0
> 
> 时间：2012-10-13T11:31:36.037
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, associations

我正在使用 Ruby on Rails v3.2.2。`alias_method`通过这种方式，我与用于关联的关联具有以下关联`has_many :through`：

```
class Resource < ActiveRecord::Base
  has_many :article_associations
  alias_method :post_associations, :article_associations

  has_many :users, :through => :post_associations
end 
```

当我执行时，`@article.users`我收到以下错误：

```
ActiveRecord::HasManyThroughAssociationNotFoundError
Could not find the association :post_associations in model Article 
```

为什么会发生？有没有办法让它按预期工作？也就是说，如何`@article.users`通过“aliased”正确返回`:post_associations`？

* * *

*注意*：我想`:post_associations`在`has_many :users, :through => :post_associations`语句中“声明”/“使用”，因为我正在尝试“动态构建”（即元编程）`has_many :through`关联。

* * *

Ruby on Rails*框架跟踪*是：

```
activerecord (3.2.2) lib/active_record/reflection.rb:501:in `check_validity!'
activerecord (3.2.2) lib/active_record/associations/association.rb:26:in `initialize'
activerecord (3.2.2) lib/active_record/associations/collection_association.rb:24:in `initialize'
activerecord (3.2.2) lib/active_record/associations/has_many_through_association.rb:10:in `initialize'
activerecord (3.2.2) lib/active_record/associations.rb:157:in `new'
activerecord (3.2.2) lib/active_record/associations.rb:157:in `association'
activerecord (3.2.2) lib/active_record/associations/builder/association.rb:44:in `block in define_readers'
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T12:18:15.130

我看不出您需要 alias_method 命名您的关联的原因。

相反，你可以直接做这样的事情，

```
class Resource < ActiveRecord::Base
  has_many :post_associations, :foreign_key => :resource_id, :class_name => "ArticleAssociation"
  has_many :users, :through => :post_associations
end 
```

**另一种解决方案**

```
class Resource < ActiveRecord::Base
  has_many :article_associations
  has_many :users, :through => :article_associations
end

def post_associations
  self.article_associations
end 
```

你需要这样做

```
resource.post_associations 
```

或者

```
resource.article_associations 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:24:26.830

看起来您正在尝试实现[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。

# jakarta-ee - 什么是 EJB，它有什么作用？

> ID：12872683
> 
> 赞同：161
> 
> 时间：2012-10-13T11:31:45.483
> 
> 标签：jakarta-ee, ejb, ejb-3.1

一直在尝试了解`EJB`bean 是什么，它们的实例在池中管理是什么意思，等等。实在抓不住他们。

你能解释一下它们的真正含义吗（实际上对于 Java 程序员来说）？他们在做什么？他们的目的是什么？*为什么要真正使用它们？（为什么不坚持`POJO`？）*也许是一个示例应用程序？

请仅参考更新信息，即`EJB 3.1`. 有关 EJB 的过时信息可能会产生误导。

对于 EJB 学习初学者请注意：

EJB 基于**分布式对象**，这是指运行在通过**网络**链接的多台机器（虚拟机或物理机）上的软件片段。

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-10-14T05:16:41.850

> *为什么要真正使用它们？（为什么不只坚持 POJO？）*

如果您需要一个组件来访问数据库，或访问其他连接/目录资源，或从多个客户端访问，或打算用作 SOA 服务，那么今天的 EJB 通常“更大、更强、更快（或至少更具可扩展性）并且比 POJO 更简单”。它们对于通过 Web 或公司网络为大量用户提供服务最有价值，而对于部门内的小型应用程序则价值较低。

1.  通过松散耦合在多个应用程序/客户端之间重用/共享逻辑。
    EJB 可以打包在自己的 jar 中、部署并从很多地方调用。它们是通用组件。诚然，POJO 可以（小心！）设计为库并打包为 jar。但是 EJB 支持本地和远程网络访问 - 包括通过本地 java 接口、透明 RMI、JMS 异步消息和 SOAP/REST Web 服务，从具有多个（不一致？）部署的剪切和粘贴 jar 依赖项中保存。
    它们对于创建 SOA 服务非常有用。当用于本地访问时，它们是 POJO（添加了免费容器服务）。设计一个单独的 EJB 层的行为促进了对最大化封装、松散耦合和内聚的额外关注，并促进了一个干净的接口（外观），使调用者免受复杂的处理和数据模型的影响。

2.  可扩展性和可靠性 如果您应用来自各种调用消息/进程/线程的大量请求，它们首先分布在池中的可用 EJB 实例中，然后排队。这意味着如果每秒传入请求的数量大于服务器可以处理的数量，我们会优雅地降级 - 总是有一些请求被有效处理，多余的请求被等待。我们没有到达服务器“崩溃”——所有请求同时经历可怕的响应时间，而且服务器试图访问比硬件和操作系统可以处理的更多的资源，因此崩溃。EJB 可以部署在可以集群的单独层上——这通过从一台服务器到另一台服务器的故障转移提供了可靠性，此外还可以添加硬件以实现线性扩展。

3.  并发管理。容器确保 EJB 实例被多个客户端安全（串行）自动访问。容器管理EJB池、线程池、调用队列，并自动进行方法级别的写锁定（默认）或读锁定（通过@Lock(READ)）。这可以防止数据因并发写入-写入冲突而损坏，并通过防止读写冲突来帮助一致地读取数据。
    这主要对@Singleton 会话 bean 有用，其中 bean 在客户端调用者之间操作和共享公共状态。这可以很容易地被覆盖以手动配置或以编程方式控制并发代码执行和数据访问的高级场景。

4.  自动交易处理。
    什么都不做，所有的 EJB 方法都在 JTA 事务中运行。如果您使用 JPA 或 JDBC 访问数据库，它会自动加入事务。JMS 和 JCA 调用也是如此。在方法之前指定 @TransactionAttribute(someTransactionMode) 以指定该特定方法是否/如何参与 JTA 事务，覆盖默认模式：“必需”。

5.  通过注入非常简单的资源/依赖项访问。
    容器将在 EJB 中查找资源并将资源引用设置为实例字段：例如 JNDI 存储的 JDBC 连接、JMS 连接/主题/队列、其他 EJB、JTA 事务、JPA 实体管理器持久化上下文、JPA 实体管理器工厂持久化单元和JCA 适配器资源。例如设置对另一个 EJB & 一个 JTA 事务 & 一个 JPA 实体管理器 & 一个 JMS 连接工厂和队列的引用：

    ```
    @Stateless
    public class MyAccountsBean {

        @EJB SomeOtherBeanClass someOtherBean;
        @Resource UserTransaction jtaTx;
        @PersistenceContext(unitName="AccountsPU") EntityManager em;
        @Resource QueueConnectionFactory accountsJMSfactory;
        @Resource Queue accountPaymentDestinationQueue;

        public List<Account> processAccounts(DepartmentId id) {
            // Use all of above instance variables with no additional setup.
            // They automatically partake in a (server coordinated) JTA transaction
        }
    } 
    ```

    一个 Servlet 可以在本地调用这个 bean，只需声明一个实例变量：

    ```
    @EJB MyAccountsBean accountsBean; 
    ```

    然后根据需要调用它的方法。

6.  与 JPA 的智能交互。默认情况下，如上注入的 EntityManager 使用事务范围的持久性上下文。这对于无状态会话 bean 来说是完美的。当调用（无状态）EJB 方法时，会在新事务中创建新的持久性上下文，检索/写入数据库的所有实体对象实例仅在该方法调用中可见，并且与其他方法隔离。但是，如果该方法调用了其他无状态 EJB，则容器会向它们传播并共享同一台 PC，因此相同的实体在同一事务中通过 PC 以一致的方式自动共享。
    如果声明了 @Stateful 会话 bean，则通过将 entityManager 声明为扩展范围之一来实现与 JPA 的同等智能关联：@PersistentContent(unitName="AccountsPU, type=EXTENDED)。这在 bean 会话的生命周期中存在，跨多个 bean 调用和事务，缓存以前检索/写入的 DB 实体的内存副本，因此不需要重新检索它们。

7.  生命周期管理。EJB 的生命周期由容器管理。根据需要，它创建 EJB 实例，清除和初始化有状态会话 bean 状态，钝化和激活，并调用生命周期回调方法，因此 EJB 代码可以参与生命周期操作以获取和释放资源，或执行其他初始化和关闭行为。它还捕获所有异常，记录它们，根据需要回滚事务，并根据需要抛出新的 EJB 异常或 @ApplicationExceptions。

8.  安全管理。可以通过简单的注释或 XML 设置来配置对 EJB 的基于角色的访问控制。服务器自动将经过身份验证的用户详细信息与每个调用一起作为安全上下文（调用主体和角色）传递。它确保自动强制执行所有 RBAC 规则，以便方法不会被错误的角色非法调用。它允许 EJB 轻松访问用户/角色详细信息以进行额外的编程检查。它允许以标准方式将额外的安全处理（甚至 IAM 工具）插入容器。

9.  标准化和可移植性。EJB 实现符合 Java EE 标准和编码约定，提高了质量以及易于理解和维护。它还通过确保它们都支持相同的标准功能和行为，并通过阻止开发人员意外采用专有
    的非可移植供应商功能来促进代码对新供应商应用程序服务器的可移植性。

10.  真正的踢球者：简单。上述所有操作都可以通过非常精简的代码来完成——或者使用 Java EE 6 中 EJB 的默认设置，或者添加一些注释。*在您自己的 POJO中*编码企业/工业实力功能将更加庞大、复杂且容易出错。一旦您开始使用 EJB 进行编码，它们就很容易开发并提供一系列“搭便车”的好处。

在 10 年前的原始 EJB 规范中，EJB 是一个主要的生产力问题。它们很臃肿，需要大量代码和配置工件，并提供了上述大约 2/3 的好处。大多数 Web 项目实际上并没有使用它们。但随着 10 年的调整、大修、功能增强和开发流线化，这种情况发生了显着变化。在 Java EE 6 中，它们提供了最高级别的工业强度和易用性。

有什么不喜欢的？？:-) :-)

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-10-13T11:44:03.230

EJB 是一个 Java 组件，包含业务逻辑，部署在容器中，并受益于容器提供的技术服务，通常以声明方式，这要归功于注解：

*   事务管理：事务可以在调用 EJB 的方法之前自动启动，并在该方法返回时提交或回滚。此事务上下文被传播到对其他 EJB 的调用。
*   安全管理：可以检查调用者是否具有执行方法所需的角色。
*   依赖注入：可以将其他 EJB 或 JPA 实体管理器、JDBC 数据源等资源注入 EJB。
*   并发性：容器确保一次只有一个线程调用 EJB 实例的方法。
*   分发：可以从另一个 JVM 远程调用一些 EJB。
*   故障转移和负载平衡：如果需要，EJB 的远程客户端可以自动将其调用重定向到另一台服务器。
*   资源管理：有状态 bean 可以自动钝化到磁盘，以限制服务器的内存消耗。
*   ...我可能忘记了一些观点。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-11-06T10:10:27.720

希望 Oracle 文档中的这篇文章能帮助像我这样的人以简单的方式理解 EJB 的主题。

> 什么是企业 Bean？用 Java 编程语言编写的企业 bean 是一个服务器端组件，它封装了应用程序的业务逻辑。业务逻辑是实现应用程序目的的代码。例如，在库存控制应用程序中，企业 bean 可能在称为 checkInventoryLevel 和 orderProduct 的方法中实现业务逻辑。通过调用这些方法，客户端可以访问应用程序提供的库存服务。
> 
> Enterprise Beans 的好处 出于几个原因，Enterprise Beans 简化了大型分布式应用程序的开发。首先，因为 EJB 容器为企业 bean 提供系统级服务，所以 bean 开发人员可以专注于解决业务问题。EJB 容器，而不是 bean 开发者，负责系统级服务，例如事务管理和安全授权。
> 
> 其次，因为 bean 而不是客户端包含应用程序的业务逻辑，所以客户端开发人员可以专注于客户端的呈现。客户端开发人员不必编写实现业务规则或访问数据库的例程。结果，客户端变得更瘦了，这对于在小型设备上运行的客户端来说尤其重要。
> 
> 第三，因为企业 bean 是可移植的组件，应用程序组装器可以从现有的 bean 构建新的应用程序。这些应用程序可以在任何兼容的 Java EE 服务器上运行，只要它们使用标准 API。
> 
> 何时使用企业 Bean 如果您的应用程序具有以下任何要求，则应考虑使用企业 Bean：
> 
> 应用程序必须是可扩展的。为了适应越来越多的用户，您可能需要将应用程序的组件分布在多台机器上。应用程序的企业 bean 不仅可以在不同的机器上运行，而且它们的位置对客户端也将保持透明。
> 
> 事务必须确保数据完整性。企业 bean 支持事务，即管理共享对象的并发访问的机制。
> 
> 该应用程序将有各种客户端。只需几行代码，远程客户端就可以轻松找到企业 bean。这些客户端可以是瘦的、多样的和众多的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-22T23:26:26.563

The question that interests me most is how and where can I use them. To understand this, we need first to see what types of EJBs exist. There are 2 big categories:

1.  Session beans
2.  Message driven beans

Let's consider Session Beans. They are of 3 kinds:

1.  **Stateful** - these components maintain state and are specific for a client across multiple requests. See it as a session. The immediate use these could be put to is **shop carts** or other type of sessions (login session and so on)
2.  **Stateless** - these are self contained components that don't persist information between requests, but they are unique to the user. Immediate use that comes to mind - **Service classes in the service layer**. Imagine `OrderService`. Another big use for these is to expose web services. Again, this be in the Service layer or totally separate.
3.  **Singleton** - these are the beans that exist per application and are created once and can be reused / accessed multiple times. Immediately the **`Configuration`** component comes to mind - where you can store application level configs and access them when you need them from anywhere.

Now the rest of the capabilities or features can be used across layers in any such situations:

*   **Security** - you can check for permissions with an annotation on the method that is called. This can happen in the Service layer as well as in Controller if you wish so.
*   **Transaction management** - this is the obvious candidate in the Service layer or Persistence layer
*   **Dependency Injection** - again will be used everywhere

One big use in modern times are the so called Microservices and Service Oriented Architectures. You can package some business logic components as EJBs and distribute them across the organization, to be used by multiple clients (by client here I mean other back-end applications).

And so on. Now the big drawback is that you become very dependent on the EJB container and although you could switch between 2 reference implementations, you will not be able to switch to something lighter - Tomcat for example. But why would you want to sacrifice all the benefits?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-23T17:59:18.033

EJB 是分层应用程序中业务逻辑所在的位置。遵循该模型，层（不同于层）可以从用户和其他接口独立访问，因此它们可以被具有多种协议的多个组件部署和访问。

在规范化系统模型中，EJB 是“动作”和“工作流”，而 Servlet 是“接口”，JCA 是“连接器”，定时器和 JMS 是“事件”。

# tomcat - 转发端口不工作 OS X Lion 服务器

> ID：12872685
> 
> 赞同：1
> 
> 时间：2012-10-13T11:32:00.040
> 
> 标签：tomcat, osx-lion, firewall, portforwarding

我正在尝试将端口 80 转发到 8484

```
sudo ipfw add 100 fwd 127.0.0.1,8484 tcp from any to any 80 in 
```

这适用于我的本地机器（OS X 10.6），但不适用于我的服务器 OS X 7。

每当我在添加规则后尝试连接到任何 URL 时，都会出现 Not Found

在此服务器上找不到请求的 URL /login.htm。

这是添加规则后 ipfw show 的输出：

```
00100 0 0 fwd 127.0.0.1,8484 tcp from any to any dst-port 80 in
01000 0 0 allow ip from any to any via lo0
01010 0 0 deny ip from any to 127.0.0.0/8
01020 0 0 deny ip from 224.0.0.0/4 to any in
01030 0 0 deny tcp from any to 224.0.0.0/4 in
12300 0 0 allow tcp from any to any established
12301 0 0 allow tcp from any to any out
12302 0 0 allow tcp from any to any dst-port 22
12302 0 0 allow udp from any to any dst-port 22
12303 0 0 allow udp from any to any dst-port 68
12304 0 0 allow udp from any to any out keep-state
12305 0 0 allow tcp from any to any dst-port 53 out keep-state
12305 0 0 allow udp from any to any dst-port 53 out keep-state
12306 0 0 allow udp from any to any in frag
12307 0 0 allow tcp from any to any dst-port 311
12308 0 0 allow tcp from any to any dst-port 625
12309 0 0 allow icmp from any to any icmptypes 8
12310 0 0 allow icmp from any to any icmptypes 0
12311 0 0 allow igmp from any to any
65534 0 0 deny ip from any to any
65535 0 0 allow ip from any to any 
```

添加规则后，我无法判断转发是否真的有效。有什么方法可以测试这个吗？此外，什么可能会阻止转发规则被识别。

我已经尝试刷新所有规则并添加一个规则

```
00100 0 0 fwd 127.0.0.1,8484 tcp from any to any dst-port 80 in 
```

但这也没有效果。

# java - 自定义 ListView 上的当前位置

> ID：12872687
> 
> 赞同：0
> 
> 时间：2012-10-13T11:32:15.960
> 
> 标签：java, android, listview

我有一个自定义列表视图。此 ListView 包含 1 个 Image 和 3 个 TextView。如何单击 ImageView 并获取当前位置。（不要点击其他元素，只点击ImageView）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:47:10.053

在您的自定义适配器类中，您有 getView(.. .. ..) 方法：

```
@Override
    public View getView(final int position, final View convertView, final ViewGroup parent) {
//     >>>    >>>                 ^^^^^^  This is your posotion = index

        View row = convertView;
        Your_Holder holder = null;
        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(resId, parent, false);
            holder = new Your_Holder();

            ....
            ....
            holder.yourImageView = (ImageView) row.findViewById(R.id.yourImageID);
            ....
            ....

            row.setTag(holder);
        }
        else{
            holder = (Your_Holder)row.getTag();
        }

   //    Set here your images click event
        holder.yourImageView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                System.out.println("Position = " + position)

            }
        });

    } 
```

# python - Python 正则表达式子函数

> ID：12872689
> 
> 赞同：1
> 
> 时间：2012-10-13T11:32:45.227
> 
> 标签：python, regex

我正在尝试在 python 中使用 sub 函数，但无法使其正常工作。到目前为止我有

```
content = '**hello**'
content = re.sub('**(.*)**', '<i>(.*)</i>', content) 
```

我正在努力使

```
**hello** 
```

被替换为

```
<i>hello</i> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T11:34:41.410

您需要转义`*`字符，并使用替换功能：

```
content = '**hello**'
content = re.sub('\*\*(.*)\*\*', lambda p : '<i>%s</i>' % p.group(1), content) 
```

作为替代方案，您可以使用命名组。

```
content = re.sub('\*\*(?P<name>.*)\*\*', '<i>\g<name></i>', '**hello**') 
```

或者作为更好的选择，编号组。

```
content = re.sub('\*\*(.*)\*\*', '<i>\\1</i>', '**hello**') 
```

# android - 没有网络时崩溃

> ID：12872690
> 
> 赞同：1
> 
> 时间：2012-10-13T11:32:47.500
> 
> 标签：android

我正在成功访问 asmx Web 服务，但是当没有互联网时，应用程序崩溃。我已经尝试了所有方法来检测和处理异常，但都是徒劳的。
请检查我的代码和 logcat。
**日志猫：**

```
10-13 14:22:34.748: W/System.err(275):  at java.lang.Thread.run(Thread.java:1096)
10-13 14:22:34.759: W/dalvikvm(275): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
10-13 14:22:34.858: D/dalvikvm(275): GC_FOR_MALLOC freed 4242 objects / 236920 bytes in 62ms
10-13 14:22:34.858: E/AndroidRuntime(275): FATAL EXCEPTION: AsyncTask #1
10-13 14:22:34.858: E/AndroidRuntime(275): java.lang.RuntimeException: An error occured while executing doInBackground()
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
10-13 14:22:34.858: E/AndroidRuntime(275):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
10-13 14:22:34.858: E/AndroidRuntime(275):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
10-13 14:22:34.858: E/AndroidRuntime(275):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
10-13 14:22:34.858: E/AndroidRuntime(275):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-13 14:22:34.858: E/AndroidRuntime(275):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
10-13 14:22:34.858: E/AndroidRuntime(275):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
10-13 14:22:34.858: E/AndroidRuntime(275):  at java.lang.Thread.run(Thread.java:1096)
10-13 14:22:34.858: E/AndroidRuntime(275): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.view.ViewRoot.requestLayout(ViewRoot.java:594)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.view.View.requestLayout(View.java:8125)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.view.View.requestLayout(View.java:8125)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.view.View.requestLayout(View.java:8125)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.view.View.requestLayout(View.java:8125)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:254)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.view.View.requestLayout(View.java:8125)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.widget.TextView.checkForRelayout(TextView.java:5371)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.widget.TextView.setText(TextView.java:2688)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.widget.TextView.setText(TextView.java:2556)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.widget.TextView.setText(TextView.java:2531)
10-13 14:22:34.858: E/AndroidRuntime(275):  at com.bibleverses.BibleverseActivity$ws.doInBackground(BibleverseActivity.java:190)
10-13 14:22:34.858: E/AndroidRuntime(275):  at com.bibleverses.BibleverseActivity$ws.doInBackground(BibleverseActivity.java:1)
10-13 14:22:34.858: E/AndroidRuntime(275):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
10-13 14:22:34.858: E/AndroidRuntime(275):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
10-13 14:22:34.858: E/AndroidRuntime(275):  ... 4 more
10-13 14:22:35.158: W/IInputConnectionWrapper(275): showStatusIcon on inactive InputConnection
10-13 14:22:36.009: E/WindowManager(275): Activity com.bibleverses.BibleverseActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f14620 that was originally added here
10-13 14:22:36.009: E/WindowManager(275): android.view.WindowLeaked: Activity com.bibleverses.BibleverseActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f14620 that was originally added here
10-13 14:22:36.009: E/WindowManager(275):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
10-13 14:22:36.009: E/WindowManager(275):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
10-13 14:22:36.009: E/WindowManager(275):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
10-13 14:22:36.009: E/WindowManager(275):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
10-13 14:22:36.009: E/WindowManager(275):   at android.app.Dialog.show(Dialog.java:241)
10-13 14:22:36.009: E/WindowManager(275):   at com.bibleverses.BibleverseActivity$ws.onPreExecute(BibleverseActivity.java:240)
10-13 14:22:36.009: E/WindowManager(275):   at android.os.AsyncTask.execute(AsyncTask.java:391)
10-13 14:22:36.009: E/WindowManager(275):   at com.bibleverses.BibleverseActivity$1.onClick(BibleverseActivity.java:107)
10-13 14:22:36.009: E/WindowManager(275):   at android.view.View.performClick(View.java:2408)
10-13 14:22:36.009: E/WindowManager(275):   at android.view.View$PerformClick.run(View.java:8816)
10-13 14:22:36.009: E/WindowManager(275):   at android.os.Handler.handleCallback(Handler.java:587)
10-13 14:22:36.009: E/WindowManager(275):   at android.os.Handler.dispatchMessage(Handler.java:92)
10-13 14:22:36.009: E/WindowManager(275):   at android.os.Looper.loop(Looper.java:123)
10-13 14:22:36.009: E/WindowManager(275):   at android.app.ActivityThread.main(ActivityThread.java:4627)
10-13 14:22:36.009: E/WindowManager(275):   at java.lang.reflect.Method.invokeNative(Native Method)
10-13 14:22:36.009: E/WindowManager(275):   at java.lang.reflect.Method.invoke(Method.java:521)
10-13 14:22:36.009: E/WindowManager(275):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-13 14:22:36.009: E/WindowManager(275):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-13 14:22:36.009: E/WindowManager(275):   at dalvik.system.NativeStart.main(Native Method)
10-13 14:22:40.798: I/Process(275): Sending signal. PID: 275 SIG: 9 
```

**代码：**

```
private class ws extends AsyncTask<String, String, String> {

    @Override
    protected String doInBackground(String... params) {
        // try {

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        String bk = ed.getText().toString();

        tx1 = (EditText) findViewById(R.id.editText1);
        String Chapter = tx1.getText().toString();
        int chp = Integer.parseInt(Chapter);

        EditText tx2 = (EditText) findViewById(R.id.editText2);
        String verse = tx2.getText().toString();
        int vs = Integer.parseInt(verse);

        //
        //

        request.addProperty("BookTitle", bk);
        request.addProperty("chapter", chp);
        request.addProperty("Verse", vs);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER12);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        try {

            androidHttpTransport.call(SOAP_ACTION, envelope);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            tv.setText(e.toString());
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Object result = null;
        try {
            result = (Object) envelope.getResponse();
        } catch (SoapFault e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        String html = result.toString();

        Document doc = Jsoup.parse(html);

        Elements result2 = doc.select("biblewords");
        String result3 = result2.toString();
        String res = Html.fromHtml(result3).toString();

        return res;
    }

    @Override
    protected void onPostExecute(String res) {
        dialog.dismiss();
        tv.setText(res); // txt.setText(result);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:41:10.893

我相信你的问题在于这一行：

```
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    tv.setText(e.toString()); 
```

注意与`tv.setText(e.toString());`? 您正在 AsyncTask 线程中设置 UI 值。我相信这是被禁止的。

尝试将其更改为：

```
return e.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:37:28.380

`doInBackgorund()`是一个**非 UI 线程**，您无法访问其中的 UI 元素。doInBackground() 中的代码在一个单独的非 UI 线程上运行，该线程无法访问布局中定义的 UI 元素。

**`tv.setText(e.toString());`**因此，删除从 doInBackground() 内部访问 UI 元素的代码“ ”，而是将其放入内部**`onPostExecute()`**，这是一个 UI 线程，在 doInBackground() 完成后台处理后调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T11:39:50.687

您从`AsyncTask`线程中对 UI 进行更改。从除 Android 主线程之外的任何地方更改 UI 通常是一个坏主意，但在 AsyncTasks 的情况下，明确不允许这样做。

用于`onProgressUpdate`向主线程获取消息并更新 UI。

# django - 如何从 Django 中的查询集创建实例？

> ID：12872693
> 
> 赞同：1
> 
> 时间：2012-10-13T11:33:01.203
> 
> 标签：django, view, django-queryset

我有以下查看代码：

```
 n = Nutrients.objects.all()

        for q in n:
            q.save()
            Nutrition_Data.objects.create(food = l, nutrients = q) 
```

Nutrition_Data 是一个中间表。

在食物中，我从 request.Post 数据中保存 ID。有没有更好的方法将查询集（在 n 中）保存到中间表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:08:01.897

是的，您可以更有效地执行此操作（需要 Django>=1.4）：

```
n = Nutrients.objects.all()
to_save = []

for q in n:
    # q.save() absolute since you just queried the database so no need to save it again
    nutrient_data = Nutrition_Data(food=l,
                                   nutrients_id=q.pk)
    to_save.append(nutrient_data)

Nutrition_Data.objects.bulk_create(to_save) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:18:36.510

您应该将食物和营养素之间的关系定义为 ManyToManyField。然后您可以一次性创建数据：

```
n = Nutrients.objects.all()
l.nutrients.add(*n) 
```

请注意，您可以将关系设置`Nutrients_Data`为`through`表格，但如果该表格上除了食物和营养素外键之外没有其他字段，则没有意义。

# cordova - 在 Blackberry Torch 中删除数据库 - Phonegap

> ID：12872694
> 
> 赞同：1
> 
> 时间：2012-10-13T11:33:03.050
> 
> 标签：cordova, blackberry, lawnchair

我正在使用 Phonegap 构建跨平台应用程序。此外，我使用[Lawnchair](http://brian.io/lawnchair/)将数据存储在本地数据库中。

我的问题很笼统。我安装了一个为 iPhone、Android 和 Blackberry 构建的应用程序，然后创建了一些项目以存储在数据库中。这在任何平台上都没有任何问题，但是我想删除整个数据库，所以我删除了应用程序并重新安装它。在 iPhone 和 Android 上，数据库会自动清除，但在 Blackberry 上，项目仍存储在数据库中。

我知道我可以在我的 javascript 代码中使用 localStorage.clear()，但是我需要在不修改我的应用程序的情况下清除数据库。

那么为什么当我卸载一个黑莓应用程序时数据库没有被删除呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:19:06.160

BlackBerry 上的数据库不是应用程序沙箱的一部分，因为它是在 Android 和 iPhone 上完成的。也没有记录或明确定义的方法来知道您的应用程序是否将被卸载。

您可以在 BB 上加密数据库。

# python - 哪些特殊方法绕过了 Python 中的 __getattribute__？

> ID：12872695
> 
> 赞同：11
> 
> 时间：2012-10-13T11:33:05.017
> 
> 标签：python, magic-methods

> 除了为了正确性而绕过任何实例属性之外，隐式特殊方法查找通常也会绕过`__getattribute__()`对象元类的方法。

[文档](http://docs.python.org/reference/datamodel.html#new-style-special-lookup)提到了特殊方法，例如`__hash__`,`__repr__`和`__len__`, 我从经验中知道它还包括`__iter__`Python 2.7。

引用[相关问题的答案](https://stackoverflow.com/a/11360083/254704)：

> “魔法`__methods__()`被特殊对待：它们被内部分配到类型数据结构中的“槽”以加快它们的查找速度，并且只在这些槽中查找它们。

为了改进我对[另一个问题](https://stackoverflow.com/questions/12709194/the-proper-way-of-completely-overriding-attribute-access-in-python)的回答，我需要知道：具体来说，我们在谈论哪些方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T07:36:59.370

您可以在 python3[文档](http://docs.python.org/py3k/reference/datamodel.html?highlight=__getattribute__#object.__getattribute__)中找到答案`object.__getattribute__`，其中指出：

> 无条件调用以实现类实例的属性访问。如果该类还定义了`__getattr__()`，则不会调用后者，除非`__getattribute__()`显式调用它或引发 AttributeError。此方法应返回（计算的）属性值或引发 AttributeError 异常。为了避免这个方法的无限递归，它的实现应该总是调用同名的基类方法来访问它需要的任何属性，例如对象。`__getattribute__(self, name)`.
> 
> **笔记**
> 
> 由于通过语言语法或内置函数隐式调用而查找特殊方法时，仍可能绕过此方法。请参阅特殊方法查找。

[这个](http://docs.python.org/py3k/reference/datamodel.html?highlight=__getattribute__#special-lookup)页面也准确地解释了这个“机器”是如何工作的。从根本上说`__getattribute__`，仅当您使用（点）运算符访问属性时才调用`.`（也`hasattr`如 Zagorulkin 指出的那样）。

请注意，该页面未指定隐式查找哪些特殊方法，因此我认为这适用于所有方法（您可以在[此处](http://docs.python.org/py3k/reference/datamodel.html?highlight=__getattribute__#specialnames)找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-05T01:09:39.257

签入 2.7.9

找不到任何绕过对 的调用的方法，使用在or`__getattribute__`上找到的任何神奇方法：`object``type`

```
# Preparation step: did this from the console
# magics = set(dir(object) + dir(type))
# got 38 names, for each of the names, wrote a.<that_name> to a file
# Ended up with this:

a.__module__
a.__base__
#... 
```

把它放在那个文件的开头，我把它重命名为一个合适的python模块（asdf.py）

```
global_counter = 0

class Counter(object):
    def __getattribute__(self, name):
        # this will count how many times the method was called
        global global_counter
        global_counter += 1
        return super(Counter, self).__getattribute__(name)

a = Counter()
# after this comes the list of 38 attribute accessess
a.__module__
#...
a.__repr__
#...

print global_counter  # you're not gonna like it... it printer 38 
```

然后我还尝试通过`getattr`and `hasattr`-> 相同的结果来获取每个名称。`__getattribute__`每次都被调用。

因此，如果有人有其他想法……我懒得去查看 C 代码，但我确信答案就在某个地方。

所以要么是我做的不对，要么是文档在撒谎。

# java - 错误：无法加载刚刚安装的包

> ID：12872699
> 
> 赞同：41
> 
> 时间：2012-10-13T11:33:15.017
> 
> 标签：java, eclipse, r, ubuntu, statet

当我尝试在 Eclipse 中运行 R 控制台时，出现以下错误：

```
....Please make sure that R package 'rj' (1.1 or compatible) is installed... 
```

所以我尝试像这样在 R 控制台中安装它：

```
install.packages(c("rj", "rj.gd"), repos="http://download.walware.de/rj-1.1") 
```

并得到这个错误：

```
 ** testing if installed package can be loaded
 Error : .onLoad failed in loadNamespace() for 'rj.gd', details:
 call: dyn.load(file, DLLpath = DLLpath, ...)
 error: unable to load shared object '/home/alex/R/x86_64-pc-linux-gnu-library/2.15/rj.gd/libs/rj.gd.so':
 libjvm.so: cannot open shared object file: No such file or directory
 Error: loading failed
 Execution halted
 ERROR: loading failed 
```

我发现在安装 rJava 时使用：`install.packages("rJava")`会出现类似的错误：

```
** testing if installed package can be loaded
Error : .onLoad failed in loadNamespace() for 'rJava', details:
call: dyn.load(file, DLLpath = DLLpath, ...)
error: unable to load shared object '/home/alex/R/x86_64-pc-linux-gnu-library/2.15/rJava/libs/rJava.so':
libjvm.so: cannot open shared object file: No such file or directory
Error: loading failed
Execution halted
ERROR: loading failed 
```

当我运行时`sudo R CMD javareconf`，我得到了这个输出：

```
Java interpreter : /usr/bin/java
Java version     : 1.7.0
Java home path   : /usr/lib/jvm/java-7-oracle/jre
Java compiler    : /usr/bin/javac
Java headers gen.: /usr/bin/javah
Java archive tool: /usr/bin/jar
NOTE: Your JVM has a bogus java.library.path system property!
Trying a heuristic via sun.boot.library.path to find jvm library...
Java library path: $(JAVA_HOME)/lib/amd64:$(JAVA_HOME)/lib/amd64/server
JNI linker flags : -L$(JAVA_HOME)/lib/amd64 -L$(JAVA_HOME)/lib/amd64/server -ljvm
JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/linux

Updating Java configuration in /etc/R
Done. 
```

顺便说一下，我的配置是：

```
Ubuntu 11.10 64bit
Eclipse 3.7
Oracle-1.7-jdk
R version 2.15.1 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2014-09-19T11:25:52.390

对于 Linux(Ubuntu) 用户：如果您安装了[oracle-java (7/8)](http://www.webupd8.org/2012/09/install-oracle-java-8-in-ubuntu-via-ppa.html)。它将在此位置`/usr/lib/jvm`，并且`sudo`需要访问。

`/etc/ld.so.conf.d/java.conf`使用以下条目创建文件：

```
/usr/lib/jvm/java-8-oracle/jre/lib/amd64
/usr/lib/jvm/java-8-oracle/jre/lib/amd64/server 
```

（根据您的 java 版本，将 java-8-oracle 替换为 java-7-oracle）

然后：

```
sudo ldconfig 
```

重新启动 RStudio，然后安装 rJava 包。

或者

另一种方法是`LD_LIBRARY_PATH`使用从命令获得的 Java 库路径的值导出`R CMD javareconf -e`并运行`install.packages`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-19T00:10:55.527

我遇到了类似的问题，并且能够通过运行解决它

```
R CMD javareconf -e 
```

R CMD javareconf -e 的输出

```
Java interpreter : /export/apps/jdk/JDK-1_6_0_27/jre/bin/java
Java version     : 1.6.0_27
Java home path   : /export/apps/jdk/JDK-1_6_0_27
Java compiler    : /export/apps/jdk/JDK-1_6_0_27/bin/javac
Java headers gen.: /export/apps/jdk/JDK-1_6_0_27/bin/javah
Java archive tool: /export/apps/jdk/JDK-1_6_0_27/bin/jar
Java library path: /export/apps/jdk/JDK-1_6_0_27/jre/lib/amd64/server:/export/apps/jdk/JDK-1_6_0_27/jre/lib/amd64:/export/apps/jdk/JDK-1_6_0_27/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
JNI linker flags : -L/export/apps/jdk/JDK-1_6_0_27/jre/lib/amd64/server -L/export/apps/jdk/JDK-1_6_0_27/jre/lib/amd64 -L/export/apps/jdk/JDK-1_6_0_27/jre/../lib/amd64 -L/usr/java/packages/lib/amd64 -L/usr/lib64 -L/lib64 -L/lib -L/usr/lib -ljvm
JNI cpp flags    : -I/export/apps/jdk/JDK-1_6_0_27/include -I/export/apps/jdk/JDK-1_6_0_27/include/linux

The following Java variables have been exported:
JAVA_HOME JAVA JAVAC JAVAH JAR JAVA_LIBS JAVA_CPPFLAGS JAVA_LD_LIBRARY_PATH
Running: /bin/bash 
```

设置为与上面输出所示`LD_LIBRARY_PATH`相同的值后。`JAVA_LD_LIBRARY_PATH`我能够安装 rj。

```
export LD_LIBRARY_PATH=/export/apps/jdk/JDK-1_6_0_27/jre/lib/amd64/server:/export/apps/jdk/JDK-1_6_0_27/jre/lib/amd64:/export/apps/jdk/JDK-1_6_0_27/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib 
```

运行 R 然后安装 rj

```
install.packages(c("rj", "rj.gd"), repos="http://download.walware.de/rj-1.1") 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-15T02:18:10.723

我找到了解决方案：

```
export LD_LIBRARY_PATH=/usr/lib/jvm/java-7-oracle/lib/amd64:/usr/lib/jvm/java-7-oracle/jre/lib/amd64/server 
```

然后

```
sudo R CMD javareconf 
```

注意：路径 (java-7-oracle) 需要根据您的 Java 安装进行更新。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-09-26T07:21:08.103

我做了以下事情，它对我有用：

```
export LD_LIBRARY_PATH=$JAVA_LD_LIBRARY_PATH
sudo R CMD javareconf 
```

我也不得不重新启动R。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-11T21:11:34.820

多年后，在我没有成功安装需要转移到 Oracle 的 Java 的软件包后，我在搜索 R 报告的错误后最终解决了这个问题。

我所要做的就是修复它：

`$ sudo R CMD javareconf`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-24T12:12:45.023

或者只是在 R 中设置库？

我刚刚在 R 中运行了这个命令：

```
Sys.setenv(JAVA_HOME='/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/server') 
```

（用运行“sudo R CMD javareconf”的Java库路径替换“/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/server”）

可能不是最优雅的解决方案 - 但它对我有用！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-07T09:19:13.517

我没有安装可以修复的 jdk `sudo apt-get install jdk-*` 之后我可以运行`sudo R CMD javareconf`它之前总是会出现错误消息。一切都设置正确，不需要手动 tweeks，之后包安装在 R 中顺利运行（需要重新启动）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-21T08:50:14.587

当面临丢失`limjvm.so`的错误时，请确保`ldpaths`从标准配置中选择正确的，`/etc/R`而不是从`/usr/lib/R/etc`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-24T10:14:51.067

这为我解决了 LD_LIBRARY_PATH 问题（Linux、Debian 7.1.0、tc-shell、R 版本 3.0.2）：

将此行添加到 .cshrc：

setenv LD_LIBRARY_PATH $JAVA_HOME/jre/lib/amd64:$JAVA_HOME/jre/lib/amd64/server

将此命令添加到 ~/.login 是不够的；环境变量 LD_LIBRARY_PATH 在新的 xterms 中仍然未知： echo $LD_LIBRARY_PATH : LD_LIBRARY_PATH: Undefined variable。（为什么？？）

奇怪的是，当以超级用户身份启动 R 时，找到 libjvm.so 没有问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-07T15:16:55.520

我通过使用 sudo 运行 R，然后运行`install.packages('rJava`)`​​.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-18T19:32:44.507

None of the above worked for me, the only solution that installed `rJava` on Linux Ubuntu without any problems was to pass `RScript` command after installation of the base R:

```
$ sudo Rscript -e 'install.packages("rJava", repos = "http://cran.r-project.org/")' 
```

# android - HttpResponse 的 getEntity().getContent() 方法只有

> ID：12872707
> 
> 赞同：0
> 
> 时间：2012-10-13T11:34:25.410
> 
> 标签：android, apache-httpclient-4.x

我试图通过使用默认 httpClient 的 Web 服务调用获取 xml 响应，但由于 response.getEntity().getContent() 中出现错误消息而无法这样做。通过我的响应代码 200 comming，line String veraible 总是会出现。DefaultHttp 客户端对象是从另一种方法创建的
这是我的代码-

```
 try {
            HttpPost post = new HttpPost(tmsURL);
            post.setHeader("Content-Type", "text/xml;charset=utf-8");
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair(METHOD_PARAM, method));
            nameValuePairs.add(new BasicNameValuePair(XML_PARAM, xml));
            UrlEncodedFormEntity entity_st=new UrlEncodedFormEntity(nameValuePairs,"UTF-8");
            post.setEntity(entity_st);

                            HttpResponse response = client.execute(post,localcontext);

                            responseCode = response.getStatusLine().getStatusCode();

                            if (responseCode == HttpStatus.SC_OK) {
                                 BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
                                  String line = "";
                                  while ((line = rd.readLine()) != null) {
                                    System.out.println(line);
                                  }
            }
} catch (Exception e) {
                e.printStackTrace();
                logger.info("Exception occured in httpClientSendRequest() : "
                        + printStackTrace(e));
                result = buildXmlErrorMessage("", e.getMessage(), "");
            } finally {
                // post.releaseConnection();
            }

    please help me if anybody have any solution to solve the issue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:54:45.447

Your code seems to be working fine. The problem lies with your POST request, you may want to check the parameters.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:45:03.490

```
try 
 {  

                         HttpClient httpclient = new DefaultHttpClient();
                         HttpPost httppost = new HttpPost("url");

                         static_class.str_IpAddress=getLocalIpAddress();

                        // Add your data
                        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
                        nameValuePairs.add(new BasicNameValuePair("UserName", "str_user_name"));
                        nameValuePairs.add(new BasicNameValuePair("Password", "str_password"));
                        nameValuePairs.add(new BasicNameValuePair("IpAddress", "str_IpAddress"));
                        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                        // Execute HTTP Post Request
                        HttpResponse response = httpclient.execute(httppost);
                        HttpEntity entity = response.getEntity();
                        String responseText = EntityUtils.toString(entity);     
                      //  Log.w("response message....",""+responseText);
                        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                        DocumentBuilder db = dbf.newDocumentBuilder();
                        InputStream is = new ByteArrayInputStream(responseText.getBytes());
                        doc = db.parse(is);
                        doc.getDocumentElement().normalize();

                        NodeList nodeList = doc.getElementsByTagName("Response");
                        Node node = nodeList.item(0);                           
                        Element fstElmnt = (Element) node;

                        NodeList toList = fstElmnt.getElementsByTagName("ResponseMessage");
                        Element nameElement = (Element) toList.item(0);
                        toList = nameElement.getChildNodes();
                        String str_welcome_message=""+((Node) toList.item(0)).getNodeValue();

                     catch(Exception e)
                     {

                         Log.w("DocumentBuilderFactory",""+e);
                     } 
```

# sql - 数据库中的帐户交易程序？

> ID：12872709
> 
> 赞同：1
> 
> 时间：2012-10-13T11:34:44.443
> 
> 标签：sql, database, database-design, database-normalization

我正在为超市创建数据库设计，所以现在我需要规范客户和经销商的账户交易。

我想了解我的数据库设计中超市或百货公司的交易程序。

如果有人知道超市中客户和经销商之间的联系是什么。让我知道。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:04:43.897

我不确定你的问题。但我认为这是你需要阅读的内容。

[http://www.versant.com/products/fast-objects](http://www.versant.com/products/fast-objects)

只是学习一些基本的东西。这可能会有所帮助

# php - 排序然后拆分PHP数组？

> ID：12872710
> 
> 赞同：0
> 
> 时间：2012-10-13T11:34:44.100
> 
> 标签：php, arrays, split, hashmap, asymptotic-complexity

这是`var_dump`我的数组：

```
array(6) {
    [0]=> string(4) "quack"
    ["DOG"]=> string(4) "quack"
    [1]=> string(4) "quack"
    ["CAT"]=> string(4) "quack"
    [2]=> string(4) "Aaaaarrrrrggggghhhhh"
    ["CAERBANNOG"]=> string(4) "Aaaaarrrrrggggghhhhh"
} 
```

*（只是为了好玩，我在这段代码中包含了两个双关语，试着找到它们！）*

### 如何将此数组拆分为两个数组，一个包含所有`quack`s; 另一个`Aaaaarrrrrggggghhhhh`？

* * *

请注意，它并不总是按连续顺序排列，因此可能会考虑嵌套的哈希图，例如：

1.  查看`if (isset($myarr['$found_val']))`
2.  如果找到，则附加该数组
3.  否则用一个新数组创建那个地方

但不确定数组是如何实现的，所以可能是 O(n) 追加，在这种情况下我需要一些其他的解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:59:44.497

尝试这个

```
$quacks_arr = array_intersect($your_array, array('quack'));
$argh_arr   = array_intersect($your_array, array('Aaaaarrrrrggggghhhhh')); 
```

如果你想对它们进行排序，那么只需执行 ksort

```
ksort($quacks_arr);
ksort($argh_arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:59:01.877

以防万一有人想以一种更奇怪的方式做到这一点：

**更新**了 air4x 仅使用单个项目数组的想法，而不是`array_fill(0,count($a),$v)`. 使它变得更加明智。

```
$a = array(
  0 => "quack",
  "DOG" => "quack",
  1 => "quack",
  "CAT" => "quack",
  2 => "Aaaaarrrrrggggghhhhh",
  "CAERBANNOG" => "Aaaaarrrrrggggghhhhh"
);

$b = array();
foreach( array_unique(array_values($a)) as $v ) {
  $b[$v] = array_intersect($a, array($v));
}

echo '<xmp>';
print_r($b); 
```

完全不是最佳的-*难以阅读*-但仍然很有趣:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T11:42:00.267

您可以根据值对它们进行分组并存储键

```
$array = array(0 => "quack","DOG" => "quack",1 => "quack","CAT" => "quack",2 => "Aaaaarrrrrggggghhhhh","CAERBANNOG" => "Aaaaarrrrrggggghhhhh");

$final = array();
foreach ( $array as $key => $value ) {
    if (! array_key_exists($value, $final)) {
        $final[$value] = array();
    }
    $final[$value][] = $key;
}

var_dump($final); 
```

输出

```
array
  'quack' => 
    array
      0 => int 0
      1 => string 'DOG' (length=3)
      2 => int 1
      3 => string 'CAT' (length=3)
  'Aaaaarrrrrggggghhhhh' => 
    array
      0 => int 2
      1 => string 'CAERBANNOG' (length=10) 
```

# php - 如果是动态生成的，我如何更改下拉菜单中的选项？

> ID：12872713
> 
> 赞同：0
> 
> 时间：2012-10-13T11:34:56.887
> 
> 标签：php, javascript

我确实有这个脚本可以为我的 web 表单生成三个下拉列表和一个文本输入字段，我必须使用 PHP 提交到数据库。此表单是 HTML，但只有这部分是用于填充字段的 javascript。我正在使用这个 javascript 来生成大约 15 组这些下拉列表和文本输入字段。（1 组 = 3 个下拉菜单和 1 个输入文本字段）。

我的问题是：如果用户从第一个下拉菜单中选择一个选项，那么其他两个下拉菜单中的选项应该根据第一个下拉菜单中的选定选项而改变。

我想要的是在通过从这个小提琴的下拉列表中选择数字生成所需数量的集合后，它将动态生成集合 od 3 个下拉列表和 1 个输入字段。 

因此，如果有人从第一个下拉列表中选择选项一，它也应该更改其他下拉列表中的选项。 

[JSFIDDLE](http://jsfiddle.net/harshdhama/E3gWX/)

**剧本：**

```
<script>
$(function() {
    $("input[type=button][value=Add]").click(function(e) {
        for (i = 0; i < document.getElementById('sel').value; i++) {
            e.preventDefault();
            var j = 1;
            var newDiv = $("<div>").appendTo("#dropbox");
            $("<select>").attr("name", "input1_"+j).appendTo(newDiv).append(
            $("<option>").val("0").text("Option 1"), $("<option>").val("1").text("Option 2"));
            $("<select>").attr("name", "input2_"+j).appendTo(newDiv).append(
            $("<option>").val("0").text("Option 1"), $("<option>").val("1").text("Option 2"));
            $("<select>").attr("name", "input3_"+j).appendTo(newDiv).append(
            $("<option>").val("0").text("Option 1"), $("<option>").val("1").text("Option 2"));
            $("<input>").attr("name", "input4_"+j).appendTo(newDiv);
            $("<button>").text("Remove").appendTo(newDiv).click(function(e) {
                e.preventDefault();
                $(this).parent().remove();
            })
                j++;
        }
    })
})
</script> 
```

**的HTML：**

```
<form>
    <select id="sel">
        <option value="" selected="selected"></option>
                        <option value="01" >01</option>
                        <option value="02" >02</option>
                        <option value="03" >03</option>
                        <option value="04" >04</option>
                        <option value="05" >05</option>
                        <option value="06" >06</option>
                        <option value="07" >07</option>
                        <option value="08" >08</option>
                        <option value="09" >09</option>
                        <option value="10" >10</option>
                        <option value="11" >11</option>
                        <option value="12" >12</option>
                        <option value="13" >13</option>
                        <option value="14" >14</option>
                        <option value="15" >15</option>
                        </select>
    <input type="button" value="Add" />

    <div id="dropbox"></div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:41:29.670

由于您使用 jQuery，我建议您在下拉列表中添加一个[更改](http://api.jquery.com/change/)事件。（链接的 jQuery 文档页面包含一个完整的示例）。

关于填充其他 2 个下拉菜单，您有几个选项，例如：

1.  静态：您创建页面的 PHP 代码会根据用户在第一个下拉列表中的选择填充一个 javascript 数组，其中包含所有可能的选项。然后，只要触发更改事件，您的 javascript 代码就可以使用此数组。

2.  动态：如果在页面加载时无法预测或加载子选择，请使用 jQuery [ajax](http://api.jquery.com/jQuery.ajax/)请求向服务器查询匹配用户选择的选项。您可能还想了解[JSON](https://stackoverflow.com/questions/3854629)数据格式（PHP 使用[json_encode](http://www.php.net/manual/en/function.json-encode.php)支持）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:42:27.647

[演示](http://jsfiddle.net/mplungjan/REcnr/)

我给了 sel 和按钮一个 ID 并改变了对 jQuery 的 dom 访问

我现在也使用“i”和“j”

假设您想同步 3 个选择，代码可能如下所示

```
$(function() {
  $("input[type=button][value=Add]").click(function(e) {
    e.preventDefault();
    for (var i=0,n=$('#sel').val();i<n; i++) {
      var newDiv = $("<div>").appendTo("#dropbox");
      for (var j=0;j<3;j++) {
        var id = "input"+i+"_"+j;
        $("<select>")
          .attr("id",id)
          .attr("name",id)
          .on("change",function() {
            // set all other select's value to this value
            $(this).siblings("select").val(this.value);
          })
          .append(
            $("<option>").val("0").text("Option 1"), 
            $("<option>").val("1").text("Option 2"))
          .appendTo(newDiv);
      } // j
      $("<input>")
          .attr("name", "input"+i+"_"+j)
          .appendTo(newDiv);
      $("<button>").text("Remove").appendTo(newDiv).click(function(e) {
        e.preventDefault();
        $(this).parent().remove();
      })
    } // i
  })
})​ 
```

# asp.net - 无法连接到 .NET MVC3 中的 mysql 数据库

> ID：12872714
> 
> 赞同：0
> 
> 时间：2012-10-13T11:34:58.343
> 
> 标签：asp.net, mysql, asp.net-mvc-3

我在.net 中连接 mvc 3 应用程序时遇到了一些麻烦。我知道在使用 web.config 文件连接之前必须创建 mysql 数据库实例。我的连接字符串如下：

```
<connectionStrings>
<add name="epmsDb" 
  connectionString="Server=localhost;Database=database1;
                     Uid=root;Pwd=mypassword"
  providerName="System.Data.SqlClient" />
</connectionStrings> 
```

我在服务器资源管理器中创建了一个名为 epmsDb 的数据库名称。然后我尝试使用以下代码在代码中获取 connectionString：

```
 string connectionString =
          ConfigurationManager.ConnectionStrings["epmsDb"].ConnectionString;
        context = new DataContext(connectionString);
        usersTable = context.GetTable<UserObj>(); 
```

每次我试图访问数据库时，我都会抛出这个异常：

```
 A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) 
```

一个星期以来，我一直在努力克服这个问题。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:28:00.953

您的示例尝试连接到 MS SQL 数据库。要连接到 MySQL 数据库，您可能需要使用[MySQL 连接器](http://dev.mysql.com/downloads/connector/net)

然后更改 ProviderName 属性：

```
<connectionStrings>
<add name="epmsDb" 
  connectionString="Server=localhost;Database=database1;
                     Uid=root;Pwd=mypassword"
  providerName="MySql.Data.MySqlClient" />
</connectionStrings> 
```

# javascript - 为什么无法访问 JSON 对象的属性？

> ID：12872717
> 
> 赞同：0
> 
> 时间：2012-10-13T11:35:19.550
> 
> 标签：javascript, json

我无法访问对象`progress`的属性`data`。我曾经`debugger`停止应用程序并检查是否`data`定义了对象。这是控制台的屏幕截图，完全没有意义。

![控制台截图](../Images/9e6cb02d3574d29798bc0a7838441511.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T11:37:15.953

`data`是一个`Array`。你想要`data[0].progress`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T11:37:37.413

数据是一个数组，在控制台中它有括号就可以证明这一点。

为了访问其中的对象，您需要使用数组索引表示法，如下所示：

```
data[0].progress  //0 
```

# mysql - MYSQL数据库管理

> ID：12872718
> 
> 赞同：1
> 
> 时间：2012-10-13T11:35:27.157
> 
> 标签：mysql, database, content-management-system, archive

这更像是一个关于如何最好地管理数据库的一般问题。

我有一个 MYSQL 数据库，它会定期由用户更新，包括每日事件、用户活动和每日事件选择。这已经运行了几年，我认为也许最好将旧事件和活动存档。

这是个好主意吗？归档的最佳实践是什么？如何在不破坏数据库的情况下实现？我是否需要担心表格可能包含太多数据？表字段的唯一 ID 是否有时会变得过高？

我知道很多问题，但我会很感激这些问题的答案，或者可能是关于 YouTube、Facebook 等网站如何解决这个问题的信息。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:12:15.257

如果您害怕或遇到性能问题，可以考虑运行维护查询，如 ANALYZE、REINDEX 等。

如果您真的想存档您的数据，您可以运行计划任务/cron 作业将所有未使用的项目（即早于 xxxx）放入“存档”表中；您甚至可以使用[ARCHIVE Mysql 引擎](http://dev.mysql.com/doc/refman/5.0/en/archive-storage-engine.html)，该引擎允许您定义只读和压缩表来优化数据空间使用。

您还可以选择对表进行分区，以便将它们拆分为多个“子表”，这些“子表”可能位于不同的目录/驱动器中。

无论如何，我不能比其他人更推荐任何解决方案，因为你没有说出你的确切问题是什么（如果你有一个！）。让我知道我是否可以提供更多帮助。

关于 auto_increment 字段，如果 ID 达到您的 auto_increment 列类型允许的最大值，则会变得过高。你放了什么？INT？大整数？那些允许[非常高的值](http://help.scibit.com/mascon/masconMySQL_Field_Types.html)

# php - 带有逗号分隔值或分隔表的标签类？

> ID：12872727
> 
> 赞同：0
> 
> 时间：2012-10-13T11:36:58.490
> 
> 标签：php, sql, join, csv, tags

我需要将标签系统添加到我的一个网站。

现在我正在编码这样的东西：

标签表

```
创建表`tags_table`（
`id` int(15) NOT NULL AUTO_INCREMENT,
`name` varchar(50) NOT NULL,
`seo_url` varchar(50) NOT NULL,
主键（`id`）
```

files_table 有“标签”字段 [varchar(250)]

当我添加新标签时：

*   我列出 tags_table 中的所有标签并选择我想要的标签

*   我将标签名称保存到 files_table.tags -> 逗号分隔值

这样更容易显示文件标签。

当我编辑文件时： - 选择/取消选择标签并再次保存。

不同表格的方法二：

*   我知道我可以制作像 tags_files 这样的单独表格并放入 tag_id 和 file_id

但是当我编辑文件时，我如何检查为该文件添加或删除了哪些标签？

什么更有效率？

字段或不同表中的逗号分隔值？

此外，当我编辑标签名称或删除标签时，也应该对所有文件进行更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:44:50.180

不要使用逗号分隔值。它们的查询速度往往较慢。一个例外可能是如果您使用 FULLTEXT 索引并使用 MySQL 进行 MATCH，但是您将自己绑定到特定的 DBMS*和*特定的存储引擎 (MyISAM)。

如果您有一个带有标签的单独表和一个将标签 ID 链接到文件的链接表，那么您将拥有以下优势：

*   删除标签就像从链接表中删除所有具有该 id 的记录，然后删除标签记录一样简单。
*   重命名标签只是一次更新。
*   您可以轻松查询可用标签列表并快速计数以查看它使用的频率。
*   防止您删除仍在使用的标签的参照完整性（外键）。
*   比使用“LIKE”或其他方式查找与标签匹配的文件更快的查询。
*   可能还有更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:44:05.577

根据您的要求，您需要：

1.  对所有文件进行的更改
2.  效率

我强烈建议使用单独的表进行存储`tags_files`，因为您可以简单地从文件中添加或删除标签，但在表中删除或添加新条目`tags_files`。

逗号分隔的方法不好，原因如下：

1.  对于每个更改，您都将编辑文件标签中的行。
2.  搜索将更加困难，因为您将无法利用 MySQL 搜索功能，并且您将被迫使用可能效率不高的字符串搜索。

# django - 重新启动使用 Supervisor 和 uwsgi 运行的 Django 实例

> ID：12872735
> 
> 赞同：2
> 
> 时间：2012-10-13T11:37:38.247
> 
> 标签：django, uwsgi, supervisord

目前我使用`/etc/init.d/supervisor restart`，但这会重新启动主管下的所有进程。有没有一种干净的方法来重新启动一个 django 实例？

我记得使用 modwsgi 您只需要触摸 wsgi 文件，但它似乎不适用于 uwsgi。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:01:36.657

打开主管外壳并在那里重新启动：

```
$ sudo supervisorctl
>>> restart <process_name> 
```

# cordova - Phonegap Google Maps 标记图标 - 当设置为优化时：假松动点击事件

> ID：12872737
> 
> 赞同：1
> 
> 时间：2012-10-13T11:37:53.160
> 
> 标签：cordova, maps, google-maps-markers

我正在使用 PhoneGAP 构建一个本地地理定位应用程序，到目前为止一切都很好，我正在使用自定义图标，当我将自定义图标设置为优化时：true 我失去了视网膜分辨率（谷歌地图创建了一个非视网膜的精灵分辨率与我的图标），但我可以单击图标并显示信息框。

当我将优化更改为 false 时，问题就出现了，当我这样做时，我失去了点击事件，我无法弄清楚如何再次启用该事件，这里是代码：

var marker = new google.maps.Marker({ position: new google.maps.LatLng($(xml).find('lat').eq(iterator).text(), $(xml).find('lng ').eq(iterator).text())，地图：地图，动画：google.maps.Animation.DROP，图标：friendMarker，优化：false，可点击：true });

标记正确放置在地图上，一切正常，但标记上的点击事件优化：false，当设置为 true 时，它​​们工作但我看到标记在视网膜设备上模糊。

任何帮助将不胜感激。

# c# - 双击 ListView 中的一行

> ID：12872740
> 
> 赞同：19
> 
> 时间：2012-10-13T11:38:26.607
> 
> 标签：c#, .net, winforms

是否有可能在 ListView 中获得双击行的值？我注册了一个活动：

```
 private void lvLista_DoubleClick(object sender, EventArgs e)
    {
        MessageBox.Show(lvLista.SelectedItems.ToString());
    } 
```

但是在消息上，当我双击列表视图中的某行时，我得到：

> System.Windows.Forms.ListView+SelectedListViewItemCollection

更重要的是，我在列表视图中有 2 列：

```
 lvLista.Columns.Add("ID");
    lvLista.Columns.Add("Tilte"); 
```

我想在消息框中显示双击行的“ID”。
怎么做？如何从此事件中获取值？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-13T14:56:00.087

如果您处理ListView控件的`MouseDown`和/或`MouseDoubleClick`事件，并使用该`HitTest`方法确定鼠标动作的目标，您将知道哪个项目被双击。这也是确定是否单击了 NO 项的好方法（例如，单击部分填充列表中的空白区域。

如果发生单击，以下代码将在文本框中显示单击的项目，如果发生双击，则会弹出一个带有双击项目名称的消息框。

如果单击或双击发生在列表视图中未填充项目的区域，则文本框或消息框会通知 yopu 该事实。

这是一个简单的例子，根据您的需要，您将不得不稍微弄乱它。

更新：我添加了一些代码，当单击或双击列表的空白区域时清除 Listview 控件的 SelectedItems 属性。

```
public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();

        listView1.MouseDown += new MouseEventHandler(listView1_MouseDown);
        listView1.MouseDoubleClick += new MouseEventHandler(listView1_MouseDoubleClick);
        this.Load += new EventHandler(Form1_Load);
    }

    void Form1_Load(object sender, EventArgs e)
    {
        this.SetupListview();
    }

    private void SetupListview()
    {
        ListView lv = this.listView1;
        lv.View = View.List;

        lv.Items.Add("John Lennon");
        lv.Items.Add("Paul McCartney");
        lv.Items.Add("George Harrison");
        lv.Items.Add("Richard Starkey");
    }

    void listView1_MouseDoubleClick(object sender, MouseEventArgs e)
    {
        ListViewHitTestInfo info = listView1.HitTest(e.X, e.Y);
        ListViewItem item = info.Item;

        if (item != null)
        {
            MessageBox.Show("The selected Item Name is: " + item.Text);
        }
        else
        {
            this.listView1.SelectedItems.Clear();
            MessageBox.Show("No Item is selected");
        }
    }

    void listView1_MouseDown(object sender, MouseEventArgs e)
    {
        ListViewHitTestInfo info = listView1.HitTest(e.X, e.Y);
        ListViewItem item = info.Item;

        if (item != null)
        {
            this.textBox1.Text = item.Text;
        }
        else
        {
            this.listView1.SelectedItems.Clear();
            this.textBox1.Text = "No Item is Selected";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-13T11:59:56.083

尝试这个：

```
private void lvLista_DoubleClick(object sender, EventArgs e)
{

    MessageBox.Show(lvLista.SelectedItems[0].SubItems[0].Text);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-02-14T16:21:45.240

我知道这个帖子很旧，但我认为这里没有人正确回答这个问题。对于那些将来的人，试试这个，来自[MSDN](https://social.msdn.microsoft.com/Forums/en-US/022460b1-4164-4cd3-9efd-7afd92f5a17b/how-to-handle-onclick-event-of-listview?forum=vssmartdevicesvbcs)：

```
// User must double-click to activate item
myListView.Activation = System.Windows.Forms.ItemActivation.Standard;

// Add event handler
myListView.ItemActivate += new 
System.EventHandler(this.myListView_ItemClick); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-26T07:40:18.260

尝试这个

```
private void listView1_MouseClick(object sender, MouseEventArgs e)
{
    ListViewHitTestInfo hit = listView1.HitTest(e.Location);

    Rectangle rowBounds = hit.SubItem.Bounds;
    Rectangle labelBounds = hit.Item.GetBounds(ItemBoundsPortion.Label);
    int leftMargin = labelBounds.Left - 1;

    string x = hit.Item.Text;

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-19T09:59:21.543

由于接受的答案对我没有帮助，我想我会分享我对同一问题的解决方案：在双击事件中从列表视图中的特定列获取数据。

以下行将我双击的行中第二列的数据作为字符串返回：

```
private void listViewOutput_DoubleClick(object sender, EventArgs e)
{
   string content = listViewOutput.Items[listViewOutput.SelectedIndices[0]].SubItems[1].Text
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-30T12:44:42.633

谢谢; 这就是我需要的。我想我还会提到一个可以更普遍地将本地信息变量设置为：

```
 ListViewHitTestInfo info = ((ListView)sender).HitTest(e.X, e.Y); 
```

# java - 从 jni c 代码发送 jstring 到一个接收字符串作为参数的 java 函数

> ID：12872742
> 
> 赞同：5
> 
> 时间：2012-10-13T11:39:02.487
> 
> 标签：java, c, string, java-native-interface

如何将`jstring`来自 JNI`C`代码的 a 发送到`Java`接收 a`String`作为参数的函数？

我已经阅读过类似的功能，`callVoidMethodA(....)`但它们不接受诸如`jstring`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T08:51:21.540

您还没有提到目标类名称和目标方法签名。例如，考虑[java.lang.StringBuilder.append(java.lang.String)](http://developer.android.com/reference/java/lang/StringBuilder.html#append%28java.lang.String%29)方法。

```
// First lets assume you have already received the next variables
void foo( JNIEnv* env, jobject obj )
{
    // Call StringBuilder.append() method
} 
```

现在您需要类名和方法签名（根据[docs](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/types.html)）

```
static char const StringBuilder_ClassName = "java/lang/StringBuilder";
static char const StringBuilder_append_MethodName = "append";
static char const StringBuilder_append_MethodSignature =
    "(Ljava/lang/String;)Ljava/lang/StringBuilder;"; 
```

要从 JNI 代码调用 java 方法，您应该获取`jmethodID`

```
static jclass StringBuilder_Class = 0;
static jmethodID StringBuilder_append_Method = 0;

void Init( JNIEnv* env )
{
     if( StringBuilder_Class == 0 ) {
         StringBuilder_Class = (*env)->FindClass( env, StringBuilder_ClassName );
         // TODO: Handle error if class not found
     }
     if( StringBuilder_append_Method == 0 ) {
         StringBuilder_append_Method = (*env)->GetMethodID( env, StringBuilder_Class,
             StringBuilder_append_MethodName, StringBuilder_append_MethodSignature );
         // TODO: Handle error if method not found
     }
}

void foo( JNIEnv* env, jobject obj )
{
    Init();
    char* str;
    // str = ...;
    jstring jString = (*env)->NewStringUTF( env, str );
    // Because StringBuild.append() returns object, you should call CallObjectMethod
    jobject ret = (*env)->CallObjectMethod( env, obj, jString );
    // Here you can release local references, i.e.
    // (*env)->DeleteLocalRef( env, ret );
    // (*env)->DeleteLocalRef( env, jString );
    // But it is not necessary. Local references are released automatically when
    // thread returns from JNI code to Java code.
    // So you can ignore the returned value and not to release the jString local
    // reference, i.e. just call
    // (*env)->CallObjectMethod( env, obj, jString );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:59:36.247

```
JNIEXPORT jstring JNICALL 
 Java_Prompt_getLine(JNIEnv *env, jobject obj)
 {
     char *buf = "Hi !!!!";
     jstring jString = (*env)->NewStringUTF(env, buf);
     free(buf);
     return jString;
 } 
```

# php - php字符串比较意外类型杂耍

> ID：12872756
> 
> 赞同：4
> 
> 时间：2012-10-13T11:40:50.230
> 
> 标签：php

在比较一些字符串值时，我在 PHP 中遇到了一个奇怪且意外的行为。当我希望它们返回 false 时，下面的前两个语句返回 true。最后一条语句按预期返回 false。我知道 PHP 的[Type Juggling](http://php.net/manual/en/language.types.type-juggling.php)，但我从文档中了解到，当您比较两种不同的数据类型（如字符串和整数）时，会发生类型杂耍。在下面的示例中，虽然两个文字都是字符串。这是否意味着当您在 PHP 中进行字符串比较时，它会检查两个字符串以查看它们是否看起来像整数，如果是，则类型将它们都转换为整数，然后比较这些整数值。所以我的问题是在什么条件下会发生这种行为，字符串比较在 PHP 中究竟是如何工作的？

```
var_dump("10" == "10.0000");
var_dump("10" == "+10.");
var_dump("10" == "10 ");

#output
bool(true)
bool(true)
bool(false) 
```

**更新**

因此，baba 在下面的[比较中的回答涉及数字字符串](http://www.php.net/manual/en/language.operators.comparison.php)，这确实有助于让我理解发生了什么。无论字符串是否被视为数字字符串，函数[is_numeric都会返回给您。](http://php.net/manual/en/function.is-numeric.php)有趣`"10 "`的是，它不被视为数字字符串，而是`" 10"`。我挖掘了 PHP 源代码，我相信 is_numeric 的[实现](https://github.com/php/php-src/blob/master/Zend/zend_operators.h#L108)在 is_numeric_string_ex 函数中。从中可以准确判断 PHP 何时将字符串视为数字字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:55:12.310

由于空间的位置，您会收到错误，这将返回 true

```
var_dump("10" == " 10"); // true 
```

所以如果你跑

```
var_dump("10" == "10 "); //false 
```

您实际上正在运行的是因为它将被视为字符串

```
var_dump("10" == 0); //false 
```

这是因为类型杂耍会转换`"10 "` 为 [PHP 文档中的](http://www.php.net/manual/en/language.operators.comparison.php)`0`

[来自 PHP 文档](http://www.php.net/manual/en/language.operators.comparison.php)

> 如果在类型杂耍之后 $a 等于 $b，则为 TRUE。
> 
> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较。这些规则也适用于 switch 语句。当比较是 === 或 !== 时不会发生类型转换，因为这涉及比较类型和值。

如果你想欺骗类型杂耍

```
var_dump("10" == 0 + "10 ");  // true 
```

[这是因为](http://php.net/manual/en/language.types.type-juggling.php)

> PHP 自动类型转换的一个示例是加法运算符“+”。如果任一操作数是浮点数，则这两个操作数都被计算为浮点数，结果将是浮点数。否则，操作数将被解释为整数，结果也将是整数。请注意，这不会改变操作数本身的类型；唯一的变化是如何计算操作数以及表达式本身的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:19:08.087

我想确定的答案隐藏 `compare_function` 在 php-src/Zend/zend_operators.c 和其中使用的宏中的某个地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T11:51:48.323

在这种情况下，除最后一个之外的所有“字符串”都被视为浮点数或整数，然后进行比较。这就是为什么第 1 行和第 2 行给出一个 true 的原因。

在第 3 行中，字符串中有一个空格，这意味着对于 php，这是一个“真实”字符串，并且该行将字符串进行比较。

我也不喜欢`loose typed`语言，但对于 php，这是它的工作方式。

# wpf - 加载控件时触发文本更改事件，需要防止加载吗？

> ID：12872758
> 
> 赞同：0
> 
> 时间：2012-10-13T11:41:12.373
> 
> 标签：wpf, textbox

在我创建了一个控件，该控件具有一个文本框和一个附加到它的文本更改事件处理程序 - 这是在 xaml 中。

问题：当控件被加载时，文本更改事件被触发，我不希望它在控件加载时发生，只有当我通过键入某些内容来使其实际更改控件时才发生。

你的专业人士建议我做什么？:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-12T16:10:33.610

您所要做的就是在处理之前检查事件处理程序中文本框的 IsLoaded 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T19:01:00.710

用户控件1.xaml：

```
<Grid>
    <TextBox Text="{Binding MyText, UpdateSourceTrigger=PropertyChanged}" TextChanged="TextBox_TextChanged"/>
</Grid> 
```

其中 TextChanged 是 TextBox 的原始事件

UserControl1.xaml.cs：

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        _isFirstTime = true;
        DataContext = this;
        InitializeComponent();
    }

    public event TextChangedEventHandler TextBoxTextChanged;
    bool _isFirstTime;

    //MyText Dependency Property
    public string MyText
    {
        get { return (string)GetValue(MyTextProperty); }
        set { SetValue(MyTextProperty, value); }
    }
    public static readonly DependencyProperty MyTextProperty =
        DependencyProperty.Register("MyText", typeof(string), typeof(UserControl1), new UIPropertyMetadata(""));

    private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        if (TextBoxTextChanged != null)
            if (!_isFirstTime)
            {
                TextBoxTextChanged(sender, e);
            }
        _isFirstTime = false;
    }
} 
```

其中 TextBox_TextChanged 是原始 TextChanged 的​​自定义事件处理程序，而 TextBoxTextChanged 更像是原始 TextChanged 的​​包装器

窗口.xaml：

```
<Grid>
    <c:UserControl1 TextBoxTextChanged="TextBoxValueChanged"/>
</Grid> 
```

如您所见，您可以将 eventHandler 添加到事件包装器（TextBoxTextChanged）

Window.xaml.cs：

```
private void TextBoxValueChanged(object sender, TextChangedEventArgs e)
{
    MessageBox.Show("asd");
} 
```

最后 TextBoxValueChanged 在第一次更改 Text 时不会被触发

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:08:40.963

在构造函数中的方法之后附加您的 EventHandler，而`InitializeComponent`不是在`Xaml`.

IE

```
public MainWindow()
{
    InitializeComponent();
    textBox1.TextChanged+=new TextChangedEventHandler(textBox1_TextChanged);
} 
```

* * *

我注意到您在谈论用户控件，我唯一能想到的就是创建一个可用于在父窗体完成加载之前禁止 TextChanged 事件的属性。看看这样的事情是否有效。

MainForm Xaml：

```
<my:UserControl1 setInhibit="True"   HorizontalAlignment="Left" Margin="111,103,0,0" x:Name="userControl11" VerticalAlignment="Top" Height="55" Width="149" setText="Hello" /> 
```

主窗体 CS

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    userControl11.setInhibit = false;
} 
```

用户控制：

```
public UserControl1()
{
    InitializeComponent();
    textBox1.TextChanged += new TextChangedEventHandler(textBox1_TextChanged);
}

public string setText
{
    get { return textBox1.Text; }
    set { textBox1.Text = value; }
}
public bool setInhibit { get; set; }
void textBox1_TextChanged(object sender, TextChangedEventArgs e)
{
    if (setInhibit) return;
    // Do your work here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-22T01:57:21.850

```
private void TextBoxValueChanged(object sender, TextChangedEventArgs e)
    {
        if (Textbox1.IsFocused)
        {
            App.Current.Properties["TextChanged"] = "1"; // Set Flag
        }            
    }

private void TextBoxLostFocus(object sender, RoutedEventArgs e)
    {            
       if (App.Current.Properties["TextChanged"] == "1")
        {
            // Do Your Wor Here
            App.Current.Properties["TextChanged"] = "0"; // Clear Flag
        }
    } 
```

在您的 XAML 上：

```
<TextBox xName="TextBox1" LostFocus="TextBoxLostFocus" TextChanged="TextBoxValueChanged"/> 
```

在这里，由于在创建文本框控件时它没有聚焦，因此 TextChanged 事件将触发，但未设置标志“1”...稍后当用户在编辑后离开字段时，因为它具有焦点，所以设置了标志... LostFocus 是触发，但仅在文本框更改时才运行代码。

# android - Android 应用程序中的静态实例

> ID：12872764
> 
> 赞同：0
> 
> 时间：2012-10-13T11:41:33.750
> 
> 标签：android, class, service, android-activity, static

仅供参考：我不是专业人士，所以这可能很容易解决我只是直到现在才找到解决方案。

以下情景。我有一个安卓应用程序。在主要活动中，我初始化一个类的静态实例来处理通过 WebSockets 的通信，然后我启动一个使用这个静态实例的服务。

1.  现在，当我关闭活动时，我让服务在后台运行（使用部分唤醒锁），问题是，当我稍后销毁服务时，静态实例有时会保持活动状态，直到我从应用程序中删除“缓存进程”。

2.  当我再次开始活动时，我再次初始化了一个新的静态实例。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:39:15.580

> 问题是，当我稍后销毁服务时，静态实例有时会保持活动状态，直到我从“缓存进程”中删除应用程序。

如果您不希望这样做，请采取措施阻止它停止`onDestroy()`您的服务。或者，首先不要让它成为静态的，而是让它成为服务本身的一部分。

# xna - 在整个渲染器上应用颜色饱和度

> ID：12872765
> 
> 赞同：1
> 
> 时间：2012-10-13T11:41:34.190
> 
> 标签：xna, xna-4.0, effect, spritebatch

我想在整个最终渲染器上应用颜色饱和度。

有没有不使用着色器的简单方法？我对 DirectX 一无所知：x

我在 spriteBatch.Begin() 中看到了一个“效果”参数，但我没有找到任何关于它的教程：s

希望你能指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:57:37.957

你需要一个着色器。着色器是一个`Effect`.

您可以通过右键单击内容项目，单击“添加新项目”并选择“效果”文件来创建新效果。生成的`.fx`文件采用 HLSL 语言。它将由内容管道编译，您可以使用以下命令对其进行加载：

```
Effect myEffect = Content.Load<Effect>("myEffect"); 
```

[这里](http://xbox.create.msdn.com/en-US/education/catalog/sample/sprite_effects)有一个[如何使用效果的官方示例`SpriteBatch`](http://xbox.create.msdn.com/en-US/education/catalog/sample/sprite_effects)（如果你想要**去**饱和，那里有一个示例）。[这篇博文](http://blogs.msdn.com/b/shawnhar/archive/2010/04/05/spritebatch-and-custom-shaders-in-xna-game-studio-4-0.aspx)也可能有用。

我不会在这里重现饱和效果的代码，但您可以通过 Google 找到几个示例。[这是 GameDev 网站上的一个示例](https://gamedev.stackexchange.com/questions/28782/hue-saturation-brightness-contrast-effect-in-hlsl)。

# xcode - xcode故事板在编译中恢复

> ID：12872768
> 
> 赞同：0
> 
> 时间：2012-10-13T11:41:55.203
> 
> 标签：xcode, storyboard

我最近在 Xcode 4.5 中开始出现一些非常奇怪的行为。我对`UITableViewController`带有静态单元的 a 进行了更改，但更改没有出现在模拟器中，我的代码也没有更改。我从模拟器中删除了应用程序并在项目上运行 clean，然后重新启动，所有更改都出现了。我做了另一个代码更改，通过模拟器运行调试器，我再次看到我的旧`UITableViewController`值并且我的代码更改不存在。该项目正在使用情节提要，但我不确定此问题是否仅与情节提要有关，因为我的代码更改也已还原。

我在这里很困惑。甚至没有清理解决这个问题。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:31:55.757

不知何故，我的模拟器搞砸了。重置内容和设置后，一切又恢复正常。很奇怪。

# php - 如何用哈希重写 URL？

> ID：12872771
> 
> 赞同：0
> 
> 时间：2012-10-13T11:42:04.147
> 
> 标签：php, mod-rewrite

> **可能重复：**
> [PHP 可以读取 URL 的哈希部分吗？](https://stackoverflow.com/questions/940905/can-php-read-the-hash-portion-of-the-url)

我像这样在我的网址中使用哈希，

```
http://mysite.com/home/#/page/manage/ 
```

我想`/page/manage/`通过`$_REQUEST`所以我尝试像下面这样的 url rewrite mod，

```
RewriteRule ^home/#/([a-zA-Z0-9\-]+)/([a-zA-Z0-9\-]+)/?$   index.php?url=home&system_url=$1&system_name=$2 [L,QSA] 
```

`system_url=$1&system_name=$2`不送去`$_REQUEST`的当然。

如何通过以下方式获得结果`$_REQUEST`？

```
array([url]=>'home',[system_url] => 'page',[system_name] => 'manage') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T11:46:55.483

URL 的片段部分（# 之后的部分）实际上并未发送到 Web 服务器。

因此，不可能使用重写来更改它

# security - Cocos2d-x 上的 HTTPS

> ID：12872772
> 
> 赞同：5
> 
> 时间：2012-10-13T11:42:18.800
> 
> 标签：security, https, game-engine, cocos2d-x

我正在实现一个基于 cocos2d-x 的游戏应用程序。为了从技术上防止作弊，其中一个思路是使用 HTTPS 进行所有客户端-服务器通信，这使得获取数据格式/游戏逻辑和发送修改请求进行作弊变得困难。（我知道“预防”实际上是不可能的，但为了增加游戏作弊的成本，没关系：）。我的问题是，

1.  在 Cocos2d-x 中，如何进行 HTTPS 请求？可能的？
2.  在更一般的情况下，从技术上讲，如何减少此类游戏黑客攻击？持有什么策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T23:09:09.643

对于本机跨平台 C++ 网络，您可以考虑使用 Boost C++ 库。Boost.Asio 是用于网络的。

Boost.Asio 链接： http: [//www.boost.org/doc/libs/1_53_0/doc/html/boost_asio.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio.html)

Boost.Asio 教程链接： http: [//www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/tutorial.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/tutorial.html)

虽然没有官方支持（仅由于缺乏对 iOS 和 Android 的回归测试），但 Boost 在 iOS 和 Android（可能还有其他基于 C++ 的移动平台）上运行没有任何问题。

为了防止作弊，您通常依赖外部资源（可以是您的游戏服务器），例如，如果您的游戏依赖于一天中的时间，您可能会从外部服务器获取时间。您可以使用加密库在客户端和服务器端进行数据传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:45:46.500

通过使用 curl 库，您可以建立 https 连接。如果您想从技术上保护您的游戏，请使用您自己的强大加密技术。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T21:23:53.780

您好，这是我们一直面临的问题。如果作弊仅限于作弊者的实例，则问题是学术性的，应该在您的业余时间进行研究。

另一方面，当您的收入受到影响或作弊者的行为影响其他玩家并降低游戏体验时，您应该努力测试游戏状态是否存在不一致，保护客户端/服务器交易并以非常微妙的方式处理作弊避免完全阻止作弊者的兴趣。

C++ https 实现可用于 curl 和 boost。

关于游戏数据，测试不一致的最简单方法是分数。您可以添加一些指标以避免污染您的排行榜。如果您可以在服务器上重新计算分数并且如果发现不一致，您可以根据分数的组成部分（在游戏中花费的时间、上电次数和收到的分数乘数...）添加特殊校验和。

您还可以获取游戏状态的瞬间和一些命令，对其进行编码并在服务器上重播序列以检查不一致之处。随心所欲地与作弊者打交道。

在服务器上玩游戏时，让服务器管理游戏状态，并且不允许任何会影响玩家的客户端游戏状态更改。检查输入一致性等...

使用微交易时，每个微交易都应在完全提交到玩家帐户之前与供应商服务器进行验证。

即使 Valve 的这些论文[1](https://developer.valvesoftware.com/wiki/Source_Multiplayer_Networking)、[2](https://developer.valvesoftware.com/wiki/Latency_Compensating_Methods_in_Client/Server_In-game_Protocol_Design_and_Optimization)提到了 fps 游戏，它们也应该为您提供一些关于如何处理状态不一致（由通信延迟引入）的指导。它应该有助于避免假阳性并破坏非作弊者的体验。

# c# - 如何在 Windows 服务中每分钟执行一个功能？

> ID：12872773
> 
> 赞同：1
> 
> 时间：2012-10-13T11:42:18.090
> 
> 标签：c#, asp.net, multithreading, windows-services

我想为这项工作提供最佳实践。每 x 分钟运行一次功能的最佳解决方案是什么。

使用计时器或线程？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:44:51.267

您可以使用 Timer 或使用[Quartz.net](http://quartznet.sourceforge.net/)。Quartz.NET 是一个开源的作业调度系统。

在网站上有一个[教程](http://quartznet.sourceforge.net/tutorial/index.html)，你可以使用[SimpleTrigger](http://quartznet.sourceforge.net/tutorial/lesson_5.html)。

# java - 如何在窗口内移动 3 个按钮

> ID：12872775
> 
> 赞同：0
> 
> 时间：2012-10-13T11:42:30.060
> 
> 标签：java, swing, layout, jframe, jbutton

在下面的代码中，当您单击左按钮时，我试图将三个按钮向左移动。当我点击它时；目前什么都没有发生。谁能向我解释我在这里做错了什么？此外，由于某种原因，它已停止正确编译，我不确定为什么，但我相信这是因为我的代码中出现错误，而当您单击按钮时试图让按钮向左移动。我不希望窗口移动。只是窗口内的按钮。有没有人看到我做错了什么，你能解释一下吗？

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Buttons extends JFrame {
//Control Definitions

    JButton resetButton;
    JButton leftButton;
    JButton colorButton;
    JPanel buttonPanel;
// Layout Definiton
    eventHandle evt;
    FlowLayout flt;
    Point point; //to Hold Previous Window Position
    Color color; //to Hold Previous Color

    public Buttons() {
        super("Buttons Window");
        flt = new FlowLayout();//inialize the Flow Layout
        buttonPanel = new JPanel(flt);
        //inialize the buttonPanel With Flow Layout
        //initialize buttons
        resetButton = new JButton("Reset");
        leftButton = new JButton("Left");
        colorButton = new JButton("Blue");
        evt = new eventHandle(); //initiate the eventhandle class
        buttonPanel.add(leftButton); //add leftButton
        buttonPanel.add(colorButton);//add colorButton
        buttonPanel.add(resetButton);//add colorButton
        getContentPane().add(buttonPanel);//buttonPanel
        //add actionlistners
        leftButton.addActionListener(evt);
        colorButton.addActionListener(evt);
        resetButton.addActionListener(evt);
        setBounds(20, 120, 250, 70);
        //following Initate the point with Center of Scren
        point = new Point((Toolkit.getDefaultToolkit().
                getScreenSize().width - getWidth()) / 2, 
                (Toolkit.getDefaultToolkit().getScreenSize().height
                - getHeight()) / 2);
        setLocation(point); //locates the window in center
        color = buttonPanel.getBackground();//stores the initial color
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);
    }

    class eventHandle implements ActionListener { //Event Handler

        public void actionPerformed(ActionEvent e) {
            {
                if (e.getSource() == leftButton) ///if its from leftButton
                {
                    leftButton.setAlignmentX(Component.LEFT_ALIGNMENT);
                    colorButton.setAlignmentX(Component.LEFT_ALIGNMENT);
                    resetButton.setAlignmentX(Component.LEFT_ALIGNMENT);
    //setLocation( (point.x -150), point.y);//shift the window 150 pixels left
                } else if (e.getSource() == colorButton) {
                    buttonPanel.setBackground(color.BLUE); 
                    //sets the backgorund to Blue
                } else {
                    leftButton.setAlignmentX(Component.CENTER_ALIGNMENT); 
                    //sets the location to previous location
                    colorButton.setAlignmentX(Component.CENTER_ALIGNMENT);
                    resetButton.setAlignmentX(Component.CENTER_ALIGNMENT);
                }

            }
        }
    }

    public static void main(String[] args) {
        Buttons buttonwindow = new Buttons();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:48:53.877

它已停止编译，因为您删除了一项荣誉，因此在方法上方添加一项荣誉“}”：

```
public static  void main(String[] args) 
```

并且代码应该编译。请反馈。

编辑：

还像这样重写你的主要方法：

```
public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        Buttons buttonwindow = new Buttons();
                    }
                }
            );           
    } 
```

Swing 组件的每次使用都必须通过 Event Dispatch Thread（缩写为[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)）来完成，否则您可能会得到不需要的视觉效果。请参阅[此处](http://www.javamex.com/tutorials/threads/invokelater.shtml)了解说明。

编辑^2：

要实现所需的行为，请像这样重写动作侦听器：

```
if (e.getSource() == leftButton)  {
    ((FlowLayout)buttonPanel.getLayout()).setAlignment(FlowLayout.LEFT); //1
    buttonPanel.revalidate(); //2
}
else if (e.getSource() == colorButton) {
    buttonPanel.setBackground(color.BLUE); 
} 
else {
    ((FlowLayout)buttonPanel.getLayout()).setAlignment(FlowLayout.CENTER);
    buttonPanel.revalidate();
} 
```

对 Swing 组件的视觉外观的任何更改都必须通过分配的布局管理器完成，在本例中为[FlowLayout](http://docs.oracle.com/javase/6/docs/api/java/awt/FlowLayout.html) - 在第 1 行中。

要查看更改，您必须通知 Swing 组件布局管理器重新排列组件 - 在第 2 行中，[revalidate()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#revalidate%28%29)方法“通知”布局管理器重新计算新位置并最终“通知”EDT 将其绘制在屏幕上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:49:25.377

您的代码不会编译，因为静态`main`方法出现在内部类`eventHandle`中。您只需将其移入外部类的类主体即可修复`Buttons`。

由于您在类级别拥有所有对象引用，因此您可以使用以下方法进行按钮对齐：

```
flt.setAlignment(FlowLayout.RIGHT);
buttonPanel.revalidate();
... 
```

在这里，您正在调整布局对齐`FlowLayout`并重新验证以直观地反映面板上的更新更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T11:50:14.003

您应该更新布局管理器以将组件向左或向右对齐。尝试类似的东西；

```
((FlowLayout)getLayout()).setAlignment(FlowLayout.LEFT); 
```

反而

# android - 在 3D 对象 Android Opengl 上带有 Alpha 的 PNG

> ID：12872777
> 
> 赞同：4
> 
> 时间：2012-10-13T11:42:38.983
> 
> 标签：android, opengl-es

我创建了一个带纹理的 shpere，并在 Android 2.3 上使用 opengl es 正确显示。我想添加一个带有 alpha 的二维 PNG，这样我的 PNG 的透明部分就显示了球体。我可以用我的 PNG 和另一个在 Sqaure 上纹理的 PNG 来实现透明度，但是当我用 Sphere 应用相同的东西时，它会扭曲 Sphere 上的纹理。我怎样才能做到这一点？

这是我使用的代码。

```
 public void onSurfaceChanged(GL10 gl, int width, int height) {
  if (height == 0) height = 1;   // To prevent divide by zero
  float aspect = (float)width / height;

  // Set the viewport (display area) to cover the entire window
  gl.glViewport(0, 0, width, height);

  // Setup perspective projection, with aspect ratio matches viewport
  gl.glMatrixMode(GL10.GL_PROJECTION); // Select projection matrix
  gl.glLoadIdentity();                 // Reset projection matrix
  // Use perspective projection
  GLU.gluPerspective(gl, 45, aspect, 0.1f, 100.f);

  gl.glMatrixMode(GL10.GL_MODELVIEW);  // Select model-view matrix
  gl.glLoadIdentity();                 // Reset
  texs[0] = loadTexture(gl, context, "e.png");
  texs[1] = loadTexture(gl, context, "ipo7x.png");
  gl.glEnable(GL10.GL_TEXTURE_2D);
 }

// Call back to draw the current frame.
public void onDrawFrame(GL10 gl) {
    // Clear color and depth buffers using clear-value set earlier
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glLoadIdentity(); // Reset model-view matrix ( NEW )

    gl.glTranslatef(0.0f, 0.0f, -6.0f); 
    gl.glClientActiveTexture(GL10.GL_TEXTURE0); //new
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 8, sphere.getTextureBuffer());
    gl.glActiveTexture(GL11.GL_TEXTURE0); //2
    gl.glBindTexture(GL11.GL_TEXTURE_2D, texs[0]);
    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_TEXTURE_ENV_MODE, GL11.GL_MODULATE);

    gl.glClientActiveTexture(GL10.GL_TEXTURE1);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 8, square.getTexBuffer());
    gl.glActiveTexture(GL10.GL_TEXTURE1); //2
    gl.glBindTexture(GL10.GL_TEXTURE_2D, texs[1]);
    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_TEXTURE_ENV_MODE, GL11.GL_COMBINE);
    gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_SRC0_RGB,  GL11.GL_PRIMARY_COLOR);
    gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND0_RGB, GL11.GL_SRC_COLOR);
    gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_SRC1_RGB,  GL11.GL_PREVIOUS);
    gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND1_RGB, GL11.GL_SRC_COLOR);         
    gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_SRC2_RGB,  GL11.GL_TEXTURE);
    gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND2_RGB, GL11.GL_SRC_COLOR);
    gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_COMBINE_RGB, GL11.GL_INTERPOLATE);

    sphere.draw(gl);
    square.draw(gl);
    gl.glDisable(GL10.GL_DEPTH_TEST);
} 
```

# jquery - 使用 jquery 持续检查元素的样式

> ID：12872781
> 
> 赞同：1
> 
> 时间：2012-10-13T11:43:04.863
> 
> 标签：jquery

我需要这样的代码

```
if($('#someElement').hasClass('test'))
{
...
} 
```

但我需要持续检查它而不是在特定位置。我的问题是像绑定这样的功能可以帮助我还是我必须使用间隔进行检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:48:42.050

如果你想一直检查。您将需要使用间隔。绑定只能用于绑定事件。像`click`,`mouseenter`等。

如果您想知道元素何时获得类别。你应该使用类似的东西：

```
setInterval($.proxy(function(){
    if( this.hasClass("test") && !this.data("classAdded") )
    {
        this.data("classAdded", true);
        // Class added only triggers once.
    }
}, $("#el")), 50); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:48:07.000

您可以绑定一个自定义事件，然后在您更改元素的类时触发，或者您可以覆盖调用您的函数的 addClass jQuery 方法，执行以下操作：

```
(function(){
// Your base, I'm in it!
var originalAddClassMethod = jQuery.fn.addClass;

jQuery.fn.addClass = function(){
    // Execute the original method.
    var result = originalAddClassMethod.apply( this, arguments );

    // call your function
    // this gets called everytime you use the addClass method
    myfunction();

    // return the original result
    return result;
}
})(); 
```

我应该建议不要将最后一种解决方案作为不好的做法，但如果你愿意，你可以使用它。

（上面的代码取自这个答案：[https](https://stackoverflow.com/a/1950199/580131) ://stackoverflow.com/a/1950199/580131 。你可以在那里查看。）

# php - 奇怪的数组重复行为

> ID：12872794
> 
> 赞同：2
> 
> 时间：2012-10-13T11:46:00.863
> 
> 标签：php, arrays, dynamic-arrays

嗨，这是我关于 stackoverflow 的第一个问题。

我正在为一个应用程序编写一个表格构建类。

我首先使用下面的代码配置表格。

```
$table->setPage('page.rows','20');
$table->setPage('page.start','0');

$table->setTable('table.name','customertable');
$table->setTable('table.higlight','true');

$table->setColumn('column.name','id');                          
$table->setColumn('column.key','index');                        
$table->setColumn('column.heading','none');                     
$table->setColumn('column.issort','false');                     
$table->setColumn('column.islink','false');                     
$table->setColumn('column.ischeck','true');                     
$table->insertColumn();                                         

$table->setColumn('column.name','jobref');                                          
$table->setColumn('column.key','job-ref');                      
$table->setColumn('column.heading','RB Ref');                       
$table->setColumn('column.issort','true');                      
$table->setColumn('column.islink','true');                      
$table->setColumn('column.ischeck','false');                
$table->insertColumn();

$table->setColumn('column.name','type');                                            
$table->setColumn('column.key','type');                     
$table->setColumn('column.heading','Job Type');                     
$table->setColumn('column.issort','true');                      
$table->setColumn('column.islink','true');                      
$table->setColumn('column.ischeck','false');                
$table->insertColumn(); 
```

除了 setColumn 方法之外，值是什么并不重要，通过下面的函数调用将值添加到临时数组中。

```
public function setColumn($key,$value){
    $this->colParamSet[$key] = $value;      
    } 
```

然后当我完成我的参数列表时，我使用

```
$table->insertColumn(); 
```

它在下面调用此代码

```
public function insertColumn(){

    $this->columnConfig[$this->colParamSet['column.name']] = $this->colParamSet;        

    print_r($this->columnConfig); #this is for test purposes not part of the final code

    } 
```

我希望到目前为止我已经解释了一切正常现在....这里是输出

```
Array ( 

[id] => Array ( [column.name] => id [column.key] => index [column.heading] => none [column.issort] => false [column.islink] => false [column.ischeck] => true ) 

) 

Array ( 

[id] => Array ( [column.name] => id [column.key] => index [column.heading] => none     [column.issort] => false [column.islink] => false [column.ischeck] => true ) 
[jobref] => Array ( [column.name] => jobref [column.key] => job-ref [column.heading] => RB Ref [column.issort] => true [column.islink] => true [column.ischeck] => false ) 

) 

Array ( 

[id] => Array ( [column.name] => id [column.key] => index [column.heading] => none [column.issort] => false [column.islink] => false [column.ischeck] => true ) 
[jobref] => Array ( [column.name] => jobref [column.key] => job-ref [column.heading] => RB Ref [column.issort] => true [column.islink] => true [column.ischeck] => false ) 
[type] => Array ( [column.name] => type [column.key] => type [column.heading] => Job Type [column.issort] => true [column.islink] => true [column.ischeck] => false ) 

) 
```

每个配置集是表中每一列的设置，指向数组的键是用于从包含表数据的 assoc 数组中提取数据的 db 列名。

我不明白为什么我会得到这种重复的数组。我让它工作的唯一方法是使用下面的代码

```
public function insertColumn(){
    $this->columnConfig = array();
    $this->columnConfig[$this->colParamSet['column.name']] = $this->colParamSet;        
    $this->colParamSet = array();

    print_r($this->columnConfig);

    } 
```

这可以正常工作并输出我需要的东西，但我一生都无法理解它为什么会起作用，因为似乎我正在完全清除数组，然后用数组插入一个单元格，然后再次清除它，但它的行为不是那样因为我不理解它，所以我不能依赖它，因为我可能已经创建了一个不稳定的黑客，这会在生产中引发不稳定。

我希望我已经使这个问题可以理解。

提前致谢。

抱歉，我忘了显示我试图达到的输出，所以它在下面

```
Array ( 

[id] => Array ( [column.name] => id [column.key] => index [column.heading] => none         [column.issort] => false [column.islink] => false [column.ischeck] => true ) 
[jobref] => Array ( [column.name] => jobref [column.key] => job-ref [column.heading] =>     RB Ref [column.issort] => true [column.islink] => true [column.ischeck] => false ) 
[type] => Array ( [column.name] => type [column.key] => type [column.heading] => Job Type [column.issort] => true [column.islink] => true [column.ischeck] => false ) 

) 
```

* * *

## **比较代码**

我希望我不会因为这个问题太大而惹上麻烦，但我已经生成了下面的代码进行比较

```
$temp = array(); 
$final = array(); 

function setconfig($key,$value){ 
    global $temp;     
    $temp[$key] = $value; 
    } 

function insertarray(){ 
    global $final, $temp; 
    $final[$temp['config.name']] = $temp; 
    } 

setconfig('config.name','bob'); 
setconfig('config.width','50'); 
setconfig('config.height','50'); 
setconfig('config.class','bobs-box'); 
insertarray(); 

setconfig('config.name','jon'); 
setconfig('config.width','150'); 
setconfig('config.height','150'); 
setconfig('config.class','jons-box'); 
insertarray(); 

setconfig('config.name','sue'); 
setconfig('config.width','150'); 
setconfig('config.height','150'); 
setconfig('config.class','sues-box'); 
insertarray(); 

print_r($final); 
```

输出是下面的所需输出

```
Array ( 

[bob] => Array ( [config.name] => bob [config.width] => 50 [config.height] => 50 [config.class] => bobs-box ) 
[jon] => Array ( [config.name] => jon [config.width] => 150 [config.height] => 150 [config.class] => jons-box ) 
[sue] => Array ( [config.name] => sue [config.width] => 150 [config.height] => 150 [config.class] => sues-box ) 
) 
```

那么谁能告诉我数组在对象内的区别以及为什么它的行为方式不同？还是我应该忘记它并使用修复程序并继续前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:51:10.527

你有一个对象`$table`。

`$this->columnConfig`是该对象的属性。

每次调用该`insertColumn()`方法时，它都使用与`columnConfig`以前相同的方法。

当您添加 line`$this->columnConfig = array();`时，您有点“重置”该属性。

希望你明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:07:37.587

对不起，我已经回答了我的问题。当一分钱掉下来时，我意识到我是多么的麻木。

我在数组的构建迭代期间打印了数组，因此这些值似乎重复了自己，但没有。啊！！周末孩子在家的时候，应该学会独自离开。自我介绍的好方法我想哈哈

# animation - 如何在 WPF 中绘制动画图表

> ID：12872798
> 
> 赞同：0
> 
> 时间：2012-10-13T11:46:34.203
> 
> 标签：animation, charts, wpftoolkit, wpf-4.0, amcharts

在我的 WPF 应用程序中，我需要绘制一个带有动画的折线图。我找到的最好的解决方案是使用 Devexpress 工具，它提供了我需要的所有东西以及更多，但它非常昂贵，我想它不符合我的预算。

我也尝试使用 WPF 工具包和 AMChart 来实现，但我找不到任何方法来为图表上的线条绘制动画。

是否可以设置动画或创建动画并将其分配给图表（来自 WPF 工具包或 Amchart）？

目的是像我在图表上慢慢地画线一样画线。

对于这个项目，我使用 Visual Studio 2012、WPF、.NET 4.0、C#。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:49:37.860

您可以使用 WPF 中存在的动画库。例如，通过使用 DoubleAnimation，您可以在项目中制作任何动画。

# c# - 提高游戏性能 C#

> ID：12872801
> 
> 赞同：2
> 
> 时间：2012-10-13T11:46:52.050
> 
> 标签：c#, performance, caching, sortedlist, mmo

我们都知道MMO游戏的流行趋势。玩家面对面的地方。然而，在游戏过程中，有大量的 SQL 插入和查询，如下所示

*   每 12 分钟或 500 名玩家/小时平均/最少 100 场在线锦标赛
*   在游戏进度表中，我们正在存储每个玩家的移动
    *   12轮4人锦标赛可有48条记录
    *   加上大约相同数量的法术或特殊物品
    *   每场比赛总共 96 个或每小时 48000 个记录插入（500 名玩家/小时）

针对我之前的问题（[提高 MMO 游戏性能](https://stackoverflow.com/questions/12668680/improve-mmo-game-performance)），我更改了架构并且我们没有直接写入数据库。

而是在 a 中累积所有值`DataTable`。然后，只要`DataTable`有超过 100k 行（有时甚至可能在一小时内），该过程就会以 csv 格式写入文本文件。另一个后台应用程序经常扫描文件夹中的 CSV 文件，读取任何可用的 CSV 文件并将信息存储到服务器数据库中。

**问题**

1.  我们是否可以直接从另一个应用程序访问游戏应用程序中存在的数据表（它读取数据表并清除已读取的记录）。这样就代替了从磁盘写入和读取，我们直接从内存中读取和写入。

2.  有没有比 DataTable 更快的方法，它可以保存大数据，但在排序和更新操作中相当快。因为我们必须经常扫描用户 ID，更新游戏状态（几乎在每次插入时）。它可以是缓存实用程序或快速扫描/搜索算法甚至是 CollectionModel。现在，我们使用 foreach 循环遍历 a 中的所有记录并在`DataTable`用户存在时更新行。如果没有，那么我们创建一个新行。我尝试使用`SortedList`和类，但它不仅使工作量加倍，内存使用量的增加也大大降低了整体游戏性能。

谢谢

阿文德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T19:00:11.470

使用 memcache 会提高你的性能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:34:20.993

好吧，让我们回答：

1.  您*可以*使用 Remoting 在应用程序之间共享对象 - 但速度要慢得多，并且会使代码的可读性降低。但是，您有另一种解决方案，因此您将继续使用内存。您可以使用 MemoryMappedFiles，因此所有工作实际上都将使用内存而不是磁盘：http: [//msdn.microsoft.com/en-us/library/dd997372.aspx](http://msdn.microsoft.com/en-us/library/dd997372.aspx)

2.  你可以使用某种类型的 NoSQL DB（有很多：Redis、MongoDB、RavenDB）——所有这些都基于键值访问，你应该测试它们的性能。更好的是，其中一些数据库是持久的，可以与多个服务器一起使用。

希望这可以帮助。

# windows - 如何在Windows上挂钩屏幕的重绘事件（制作中间级别的屏幕）？

> ID：12872806
> 
> 赞同：0
> 
> 时间：2012-10-13T11:47:18.197
> 
> 标签：windows, winapi, mirroring, setwindowshookex

我想知道如何将屏幕渲染为中间级别。

也就是说，我可以在每次重新绘制屏幕之后，在屏幕实际显示在监视器上之前生成屏幕 HDC。

比如Window 7的放大镜实用程序。你可以看到放大镜窗口下的内容，它是怎么做出来的？

谢谢 ：-）

问候，王泽维尔。

# google-chrome - 如何找到谷歌浏览器扩展目录

> ID：12872807
> 
> 赞同：1
> 
> 时间：2012-10-13T11:47:23.580
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

嗨，我正在通过一个小 c# 程序以编程方式安装扩展。

我刚刚确实看到该软件对我的朋友不起作用。

我确实看到他的 chrome 目录不在程序文件的 %appdata% 文件夹中？

那么如何找到安装插件的真正最新版本的chrome目录？

谷歌说

```
 Windows: 
 chrome_root\Application\chrome_version\Extensions\ 
 Example: c:\Users\Me\AppData\Local\Google\Chrome\Application\6.0.422.0\Extensions\ 
```

但是如何找到 chrome_root？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T12:08:18.767

1.  访问`chrome://version`。
2.  查看**配置文件路径**。
3.  扩展可以在`Extensions`您在上一步中找到的路径的子目录中找到。

[![铬：//版本](../Images/c0ddac15a8dfb1127cd1e815112d8730.png)](https://i.stack.imgur.com/ANqlG.png)

您还可以使用[`--load-extension`](http://peter.sh/experiments/chromium-command-line-switches/#load-extension)标志加载扩展：

```
chrome.exe --load-extension=path/to/extension 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:35:53.307

以编程方式安装扩展的推荐机制是[外部扩展](http://developer.chrome.com/extensions/external_extensions.html)。它的优点是不依赖于可能更改的 Chrome 路径，而是您可以使用稳定的注册表项或 JSON 文件。

# php - Bigcommerce API PHP

> ID：12872809
> 
> 赞同：2
> 
> 时间：2012-10-13T11:47:45.217
> 
> 标签：php, doctrine, bigcommerce

I want to add products in bigcommerce store using bigcommerce Api PHP.

My code is like below:

```
$fields = array( "name" => "Apple" );
BigCommerce_Api::createBrand($fields); 
```

store is connected successfully but products are not creating.Please help...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T23:04:05.100

看起来您正在创建一个品牌而不是产品。如果要创建产品，可以执行以下操作 -

```
$filter = array('name' => 'iPhone sticker', 'price' => '12.99', 'categories' => array(2), 'type' => 'physical', 'availability' => 'available', 'weight' => 0);
$product = Bigcommerce_Api::createProduct($filter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T12:58:45.943

```
$new_product = new Bigcommerce_Api_Product();
$new_product->name = $_POST['name'];
$new_product->type= "type";
$product = $new_product->create(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T10:13:32.627

您可以使用 xml 创建品牌，请查看以下代码：

```
BigCommerce_Api::useXml();
$xml = '<brand>
          <name>'.$product[brand_name].'</name>
       </brand>';
$brand_exe = BigCommerce_Api::createBrand($xml); 
```

# ruby - 退出ruby对象中的所有方法

> ID：12872816
> 
> 赞同：1
> 
> 时间：2012-10-13T11:48:22.637
> 
> 标签：ruby, oop, class, object, exit

> **可能重复：**
> [如何在 Ruby 中打破外循环？](https://stackoverflow.com/questions/1352120/how-to-break-outer-cycle-in-ruby)

说我有这个代码：

```
class A

  def initialize
    myMethod()
    print "This should not be printed"
  end

  def myMethod
    #here
  end

end

obj = A.new
print "This should be printed" 
```

是否有任何命令可以代替“#here”退出“obj”对象并继续下一条语句？（打印“这应该打印”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T12:56:43.593

throw/catch 会这样做：

```
class A

  def initialize
    catch :init_done do
      myMethod()
      print "This should not be printed"
    end
  end

  def myMethod
    throw :init_done
  end

end

obj = A.new
print "This should be printed" 
```

# javascript - Premailer/inline css using phantomjs

> ID：12872820
> 
> 赞同：0
> 
> 时间：2012-10-13T11:48:48.497
> 
> 标签：javascript, css, phantomjs, premailer

We are aware of premailer which converts styling into inline css and also changes relative urls to absolute urls. There is an online version of it premailer.dialect.ca which provides the same.

I need to use this functionality ie given any url, I need to convert it into premailed version. However I may have to use this may be thousands of times a day and hence I cant use premailer.dialect.ca api. There is a python-premailer which does the same but I couldnt find any documentation for converting html from given url to premailed version.

How can I achieve this using premailer.py or phantom.js or any other solution? Am I missing some thing? I assume it must take lot of time to write it from scratch.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:10:32.663

dialectica.ca 为这种 premailer 操作提供了一个 API。它将任何 html 页面..提供的 url 转换为基于内联 css 的 html 页面。

# c++ - Terminate called after throwing an instance of std::string

> ID：12872822
> 
> 赞同：2
> 
> 时间：2012-10-13T11:48:54.370
> 
> 标签：c++, stdstring

I am trying to determine whether the variable a user instantiates is present within an equation. I have the class declared as follows:

```
#ifndef EQUATION_H
#define EQUATION_H
#include "Expression.h"
#include "Shunt.h"
#include <string>
#include <map>

using namespace std;

class Equation
{
   public:
      Equation(string eq);//If an equation is invalid, throw an exception string
      Equation(const Equation& other);
      Equation& operator=(const Equation& other);
      ~Equation();
      int evaluateRHS();//If at least one variable does not have a value, throw an exception string
      int evaluateLHS();//If at least one variable does not have a value, throw an exception string
      void instantiateVariable(char name, int value);//If does not exist in the equation, throw an exception string
      int RHSdistanceFromLHS();//If at least one variable does not have a value, throw an exception string
      string original;
      map<char, int> variables;
   private:
      Expression* left;//Left side of the equals
      Expression* right;//Right side of the equals
};
#endif 
```

and implement instantiateVariable in the following:

```
void Equation::instantiateVariable(char name, int value)
{

  short firstLen = left->equationPart.length();
  short secLen = right->equationPart.length();

  bool exists = false;

  for(short i = 0; i < firstLen; i++)
  {
     if(left->equationPart[i] != name)
     {
        exists = false;
     }
     else
     {
       exists = true;   
     }
  }

  if(exists == false)
  {
    for(short i = 0; i < secLen; i++)
    {
       if(right->equationPart[i] != name)
       {
          exists = false;
       }
       else
       {
          exists = true;      
       }
    }    
  }  

    if(exists == false)
    {
        string er = "error";  //Not caught successfully. Terminates entire program.
        throw er;
    }

    variables[name] = value;

} 
```

When called in the main function:

```
void testCase3()
{
        try
    {          
        Equation equation3("(y - (x + 3) ^ y) * 5 / 2 = log 20 - y");
        equation3.instantiateVariable('z',3);   
    }
    catch(string ex)
    {
        cout<<"Exception thrown"<<endl;
    }
}

int main(int argc, char** argv)
{
   testCase3();

} 
```

the following error occurs:

```
terminate called after throwing an instance of 'std::string'
Aborted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:52:28.520

Please try to catch a const reference,

```
 catch(const string& ex) {} 
```

see [https://stackoverflow.com/a/2522311/1689451](https://stackoverflow.com/a/2522311/1689451)

# java - Spring MVC generate quoted field name json output

> ID：12872824
> 
> 赞同：1
> 
> 时间：2012-10-13T11:49:27.203
> 
> 标签：java, spring-mvc

I am using spring 3.0 in my webapplication. I've got recently a problem in my application. I am using `<mvc:annotation-drive/>` tag in my spring-servlet.xml file but due to a requirement I've to remove this and place XML configuration instead.

But now my problem is it generates json output with quoted field names like if I return `Boolean.TRUE` I got `"true"` in the output. I want just true without quotes.

here is my XML configuration

```
<bean id="conversionService" class="org.springframework.format.support.FormattingConversionServiceFactoryBean" />
    <bean id="pathMatcher" class="net.hrms.web.filters.CaseInsensitivePathMatcher" />

<bean name="handlerAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="webBindingInitializer">
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="conversionService" ref="conversionService"></property>
        </bean>
    </property>
    <property name="messageConverters">
        <list>
            <ref bean="byteArrayConverter"/>
            <ref bean="jaxbConverter"/>
            <ref bean="jsonHttpMessageConverter"/>
            <bean class="org.springframework.http.converter.StringHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.ResourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"></bean>
        </list>
    </property>
</bean>
<bean name="byteArrayConverter" class="org.springframework.http.converter.ByteArrayHttpMessageConverter"></bean>
<bean name="jaxbConverter" class="org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter"></bean>
<bean name="handlerMapping" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="pathMatcher" ref="pathMatcher"></property>
</bean>

  <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsps/"/>
    <property name="suffix" value=".jsp"/>
  </bean>

  <bean id="jsonHttpMessageConverter"
        class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
    <property name="prefixJson" value="false"/>
    <property name="supportedMediaTypes" value="application/json"/>
  </bean> 
```

any help would be much appreciable.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:40:27.177

这是默认行为，如果您希望布尔值不带引号，请使用 JAXB ContextResolver

像这样的东西

```
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;

import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;
import javax.xml.bind.JAXBContext;

import com.sun.jersey.api.json.JSONJAXBContext;

@Provider
public class JAXBContextResolver implements ContextResolver<JAXBContext> {
     private JAXBContext context;
     private Class[] types = {SomeClass.class}; //Add the classes processed by JAXB and exposing boolean properties

     public JAXBContextResolver() throws Exception {
         Map props = new HashMap<String, Object>();
         props.put(JSONJAXBContext.JSON_NOTATION, JSONJAXBContext.JSONNotation.MAPPED);
         props.put(JSONJAXBContext.JSON_ROOT_UNWRAPPING, Boolean.TRUE);

     java.util.HashSet<String> eprops = new HashSet<String>();
         eprops.add("someBooleanProperty"); //add properties you want unquoted
         props.put(JSONJAXBContext.JSON_NON_STRINGS, eprops);
         this.context = new JSONJAXBContext(types, props);
     }

     public JAXBContext getContext(Class<?> objectType) {
         return (types[0].equals(objectType)) ? context : null;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:57:32.093

如果您使用的是[FlexJSON](http://flexjson.sourceforge.net/)插件，则可以为 JSON 创建自定义输出。我相信你在杰克逊也可以做到这一点，但我从来没有这样做过。FlexJSON 站点上有大量示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T17:38:38.483

如果你只返回原始值`true`（或者`Boolean.TRUE.booleanValue()`而不是包装的对象版本`Boolean.TRUE`?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T23:06:11.383

我相信真值和假值在杰克逊库中是硬编码的（即使是装箱的布尔值也会调用 writeBoolean）：

```
private final static byte[] TRUE_BYTES = { 't', 'r', 'u', 'e' };

@Override
public void writeBoolean(boolean state)
    throws IOException, JsonGenerationException
{
    _verifyValueWrite("write boolean value");
    if ((_outputTail + 5) >= _outputEnd) {
        _flushBuffer();
    }
    byte[] keyword = state ? TRUE_BYTES : FALSE_BYTES;
    int len = keyword.length;
    System.arraycopy(keyword, 0, _outputBuffer, _outputTail, len);
    _outputTail += len;
} 
```

所以**杰克逊永远不会在字段值中返回双引号的“true”**（如果它的行为没有被严重覆盖，例如使用编解码器）。

所以请检查是否调用了[MappingJacksonHttpMessageConverter](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/http/converter/json/MappingJacksonHttpMessageConverter.html)方法，并且没有在其他地方执行转换。

# c# - Get all documents from a sharepoint document library

> ID：12872825
> 
> 赞同：1
> 
> 时间：2012-10-13T11:49:33.717
> 
> 标签：c#, file, sharepoint, document

I want to retrieve all documents from an SPDocumentLibrary I've tried this way but then I got stucked

```
using (SPSite mysite = SPContext.Current.Site)
{
    using (SPWeb myweb = mysite.OpenWeb())
    {
        SPDocumentLibrary myDocLib = (SPDocumentLibrary)myweb.Lists["DocLibrary"];
        SPList myList = SPContext.Current.List;
        SPFileCollection myFiles = myList.;
        foreach (SPListItem myItem in myList.Items)
        {
            //adding each found file to my SPFileCollection
            myFiles.Add(myItem.File);
        }
    }
} 
```

but the SPFileCollection.Add function takes more than the file argument !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:42:18.750

*如果我不得不猜测*：您实际上并不想将它们添加到`SPFileCollection`. 这样做意味着您正在复制文件，但没有使用方便的 Copy 方法。

您可能只想将它们暂时存储在一个`List<SPFile>`或类似的地方。

SharePoint 对象库中有很多名为 Collections 的类，但它们并不意味着像 Systems.Collections 命名空间中的类一样使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-20T07:50:34.090

再次

[链接在这里](https://sharepoint.stackexchange.com/questions/48959/get-all-documents-from-a-sharepoint-document-library)

```
 public static bool getAllDocuments()
 {
     Console.WriteLine("getAllDocuments debug, START");
     bool isOK = false;
     string baseUrl = "http://jabdw3421:82/sites/TestSite/";
     try
     {
         SPSecurity.RunWithElevatedPrivileges(delegate()
         {
             using (SPSite site = new SPSite(baseUrl))
             {
                 using (SPWeb web = site.OpenWeb())
                 {
                     SPDocumentLibrary lib = (SPDocumentLibrary)web.Lists["TestLib"];
                     IEnumerable<SPFile> allFiles = ExploreFolder(lib.RootFolder);

                     foreach (SPFile file in allFiles)
                     {
                         Console.WriteLine("getAllDocuments debug, File Name : " + file.Name);
                         Console.WriteLine("getAllDocuments debug, File CharSetName : " + file.CharSetName);
                         Console.WriteLine("getAllDocuments debug, File SourceLeafName : " + file.SourceLeafName);
                     }
                 }
             }
         });
     }
     catch (Exception e)
     {
         Console.WriteLine("getAllDocuments debug, " + e.Message);
         isOK = false;
     }
     Console.WriteLine("getAllDocuments debug, END");
     return isOK;
 }

 private static IEnumerable<SPFile> ExploreFolder(SPFolder folder)
 {
     foreach (SPFile file in folder.Files)
     {
         yield return file;
     }
     foreach (SPFolder subFolder in folder.SubFolders)
     {
         foreach (SPFile file in ExploreFolder(subFolder))
         {
             yield return file;
         }
     }
 } 
```

# android - 当没有为项目设置图像时，ListView 显示加载项目的图像

> ID：12872827
> 
> 赞同：1
> 
> 时间：2012-10-13T11:49:39.420
> 
> 标签：android

当可以在屏幕上查看加载的图像时，我的 ListView 似乎工作正常。但是当我添加一个没有图像的新项目时，该项目不在视野范围内，ListView 会继续为其加载图像。我正在使用自定义阵列适配器。

```
 int resource;
        private RecipeClasses mRecipeClass;
        private Recipe mRecipe;
        private Context context;
        Uri path;

    public RecipeAdapter(Context context, int _resource, List<Recipebag> items)
    {
        super(context, _resource, items);
        resource = _resource;
        mRecipeClass = new RecipeClasses(context);
        this.context = context;
        mRecipe = new Recipe(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {

        LinearLayout newView;
        Recipebag item = getItem(position);
        long id = item.getRecId();
        mRecipeClass.open();
        Cursor recipe = mRecipe.setCursorToRecipe(id);
        String name = recipe.getString(recipe.getColumnIndexOrThrow(RecipeClasses.Recipe.RECIPE_NAME));
        String image = recipe.getString(recipe.getColumnIndexOrThrow(RecipeClasses.Recipe.RECIPE_IMAGE));
        mRecipeClass.close();
        String newId = String.valueOf(id);
        if(image== null)
        {
            image = " ";
        }
        else
        {
             path = Uri.parse(image);
        }

        if (convertView == null)
        {
            // Inflate a new view if this is not an update.
            newView = new LinearLayout(getContext());
            String inflater = Context.LAYOUT_INFLATER_SERVICE;
            LayoutInflater li;
            li = (LayoutInflater) getContext().getSystemService(inflater);
            li.inflate(resource, newView, true);
        }
        else
        {
            // Otherwise we’ll update the existing View
            newView = (LinearLayout) convertView;
        }
        TextView recipe_txt = (TextView) newView.findViewById(R.id.txt_recipe_row);
        ImageView img = (ImageView) newView.findViewById(R.id.img_view_recipe);
        if(new File(image).exists())
        {
        ImageResizer img_W = new ImageResizer(context, img.getMeasuredWidth(), img.getMeasuredHeight());
        img_W.loadImage(image, img);
        }
        else if(image!= " ")

        {
            ImageResizer img_W = new ImageResizer(context, img.getMeasuredWidth(), img.getMeasuredHeight());
            img_W.loadImage(path, img);
            img.setImageURI(path);
        }
        if (recipe_txt != null)
        {
            recipe_txt.setText(name);
        }
        return newView;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:45:18.227

据我所知，您永远不会清除`ImageView`in的内容`getView()`。因此，当该行被回收时，它已经有一个图像。您需要处理没有图像的情况`getView()`- 尝试`setImageDrawable(null)`或其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:10:14.593

您应该只满足无图像的情况，即暂时显示默认图像，直到您想要更新配方图像。

试试这个

```
if(image != null)
{ 
   icon.setImageBitmap(image); 
    return; 
} 
```

图标将是 ImageView

您设置的图像将是您的默认图像（R.id.default），如果它在您的项目资源中，或者将您想要的系统资源图像复制到您的项目中并从那里调用它。

# winapi - How do I create a capturable no-borders fullscreen window containing OpenGL content?

> ID：12872832
> 
> 赞同：1
> 
> 时间：2012-10-13T11:50:18.757
> 
> 标签：winapi

I have a no-borders fullscreen window created with the WinApi function CreateWindowEx :

```
 m_window = CreateWindowEx(
        WS_EX_TOOLWINDOW | WS_EX_TOPMOST,
        winClassName,
        winName,
        WS_VISIBLE | WS_POPUP,
        CW_USEDEFAULT, CW_USEDEFAULT,
        GetSystemMetrics(SM_CXSCREEN), GetSystemMetrics(SM_CYSCREEN),
        NULL,
        NULL,
        hInstance,
        NULL
    ); 
```

If I try to take a screenshot of the window with the Print-Scr key, the window won't appear on the result (everything that is behind appears though).
Using WS_POPUP as window style seems to be the source of the problem, but I couldn't find any other way to create a no-border window with the WinApi.

# jquery - rails ajax post工作不一致

> ID：12872843
> 
> 赞同：0
> 
> 时间：2012-10-13T11:51:32.653
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

好吧，这个让我发疯。首先，在我的开发环境中一切正常。然而，在生产中，该行为在多个浏览器中是不一致的。有时有效，有时无效。我正在使用 Rails 3.1 和 jQuery 1.8.2。我一直在使用 jQuery 1.4.1，但它也无法正常工作。

以下是应该发生的情况：用户单击“保存”按钮，客户端将 JSON 格式的数据发送到 Rails，Rails 使用它创建几个新的“响应”项，然后将用户重定向到控制器“显示”操作（用户回答投票，然后查看所有用户的结果）。

这是我认为的相关代码（answer.html）：

```
$.ajaxSetup({
    'beforeSend': function(xhr) {
        xhr.setRequestHeader("Accept", "text/javascript")
    }
});

$(document).ajaxSend(function(e, xhr, options) {
  var token = $("meta[name='csrf-token']").attr("content");
  xhr.setRequestHeader("X-CSRF-Token", token);
});

var plot;
var dataseries = [[[null,null]],[[null,null]],[[null,null]],[[null,null]],[[null,null]],[[null,null]],[[null,null]],[[null,null]],[[null,null]]];

$(document).ready(function(){
$('.save_button').click(function(event){
    event.preventDefault();
    var numItems = dataseries.length;
    var item;
    var sequence;
    var question = <%=@question.id%>;

    var dataArray = new Array();

    for (i=0;i<numItems;i++){
        var requestObj = {
          question_id: "<%=@question.id%>",
          user_id: "<%= @user %>",      
    }
        item = $('.item_list li[data-seq='+i+']').attr('id');
        requestObj["item_id"] = item;
        requestObj["x"]= dataseries[i][0][0];
        requestObj["y"]= dataseries[i][0][1];

    if (requestObj["item_id"]>0 && requestObj["x"]!=null && requestObj["y"]!=null ){
        dataArray.push(requestObj);
    }

    }
    var dataString = JSON.stringify(dataArray);
    var a = $.ajax({
    url: "/responses/batchCreate",
    data: dataString,
    type: "POST",
    dataType: 'json',
    success: function(data, textStatus, jqXHR) {
    },
    error: function(jqXHR, textStatus, errorThrown) {
      alert('error:');
    },
    headers: {
      'X-CSRF-Token': '<%= form_authenticity_token.to_s %>'
    }
    })

    window.location.replace("<%=question_path(@question)%>");
}); 
```

$('.save_button').click(function(event) 每次都会触发。“错误”回调也每次都会触发 - 但有时它会起作用！

这是相关的控制器代码：

```
def batchCreate
        logger.info "RECEIVED AJAX DATA!!!!"
        responses = ActiveSupport::JSON.decode(request.body.read)
        responses.each do |resp|
          if (resp["item_id"]!=:null && resp["x"]!=:null && resp["y"]!=:null )
            @response = Response.new()
            if resp["user_id"]!=""
              @response.user_id=resp["user_id"];
            else
              u = User.where(:token => cookies[:user]).first
              if u.nil?
                u = User.create!(:email => "guest_#{Time.now.to_i}#{rand(99)}@example.com", :password => cookies[:user], :token => cookies[:user])
                @response.user_id=u.id
              else
                @response.user_id = u.id
              end
            end

            @response.question_id=resp["question_id"].to_i
            @response.item_id = resp["item_id"].to_i
            @response.x = resp["x"].to_i
            @response.y = resp["y"].to_i
            @response.save
          end
        end

    respond_to do |format|

        format.html { redirect_to @response, :notice => 'Question was successfully created.' }
        format.json { render :json => response, :status => :created, :location => @response }
        format.js 

    end

  end 
```

有时会保存数据，在我的数据库中创建新的响应，并且页面会重定向到显示操作。其他时候，它只是重新加载页面。在这些情况下，发布数据似乎没有到达服务器 - 我在 production.log 中看不到任何内容。

我是 ajax 的完全初学者，并且在 Rails 上的能力稍强一些。您可以提供任何关于如何开始解决此问题的见解，我们将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:52:58.477

点击处理程序末尾的这一行将在每次点击时重新加载页面：

```
 window.location.replace("<%=question_path(@question)%>"); 
```

由于这种重定向，AJAX 请求可能会也可能不会完成，具体取决于执行的时间。我认为这是导致您的结果不一致的原因。也许您的开发环境中的执行时间使得您不会在本地遇到问题。

我认为您可能希望将该行代码移动到成功响应处理程序中，以便仅在 AJAX 请求成功时才会发生重定向

```
success: function(data, textStatus, jqXHR) {
  window.location.replace("<%=question_path(@question)%>");
} 
```

我会避免使用嵌入式 Ruby 代码来生成 JavaScript 并将所有 JavaScript 代码移出视图并放入资产文件中。而不是使用`<%=question_path(@question)%>`内联，也许将您想要的 URL 设置为保存按钮的 href 属性。

```
# View
<%= link_to "Save", question_path(@question), :class => "save_button" %>

# JavaScript
...
success: function(data, textStatus, jqXHR) {
  window.location.replace(e.target.href);
}
... 
```

或者，您可以使用 data 属性而不是 href 属性来存储 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T20:38:49.303

好的，事实证明 window.location.replace("<%=question_path(@question)%>") 部分是罪魁祸首。当我早些时候回复时，我以为我已经移动了它，但显然，我没有。然而，仅此还不够；我还缺少 batchCreate.js.erb，这是我的操作的模板文件。这导致了 500 错误，这就是在 ajax 调用上创建错误条件的原因。它现在似乎正在工作。非常感谢 Ogz 向导的帮助！

# android - What happens when onSensorChanged() in called before it can finish the current execution?

> ID：12872844
> 
> 赞同：1
> 
> 时间：2012-10-13T11:51:41.440
> 
> 标签：android, android-sensors

This is my function.

```
 public void onSensorChanged(SensorEvent event)
    {

            if (event.sensor.getType() == Sensor.TYPE_LINEAR_ACCELERATION)
            {
               //DO A JOB...
            }
     } 
```

My question is what happens if `onSensorChanged()` is called while it is finishing the current job?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:53:51.373

如果在处理前一个样本时再次调用 onSensorChanged，则 onSensorChanged 将同时处理两个样本，这对于计算的最终结果发生的任何事情都可能是一个问题。我相信它只是传递传感器事件的一个线程，但实际上在处理完成之前不应再次调用它。

一般来说，所有处理都应该在另一个线程中完成，并且 onSensorChanged 应该尽快返回，以便其他接收者也可以对数据采取行动。同时复制数据，不要传递对传感器数据的引用，因为 SensorData 对象可能会被重复使用，并且如果您在数据周围保留引用，则在您使用它时可能会发生变化。

# android - android.view.InflateException：使用自定义视图时的二进制 XML 文件行

> ID：12872848
> 
> 赞同：4
> 
> 时间：2012-10-13T11:51:49.830
> 
> 标签：android

例外：

```
>         10-13 11:47:32.151: E/AndroidRuntime(618): FATAL EXCEPTION: main
> 
>     10-13 11:47:32.151: E/AndroidRuntime(618): android.view.InflateException: Binary XML file line #3: Error
> inflating class com.example.demo.ToDoListView 10-13 11:47:32.151:
> E/AndroidRuntime(618):    at
> android.view.LayoutInflater.createView(LayoutInflater.java:596) 10-13
> 11:47:32.151: E/AndroidRuntime(618):  at
> android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
> 10-13 11:47:32.151: E/AndroidRuntime(618):    at
> android.view.LayoutInflater.inflate(LayoutInflater.java:466) 10-13
> 11:47:32.151: E/AndroidRuntime(618):  at
> android.view.LayoutInflater.inflate(LayoutInflater.java:396) 10-13
> 11:47:32.151: E/AndroidRuntime(618):  at
> android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:371)
> 10-13 11:47:32.151: E/AndroidRuntime(618):    at
> android.widget.ArrayAdapter.getView(ArrayAdapter.java:362) 10-13
> 11:47:32.151: E/AndroidRuntime(618):  at
> android.widget.AbsListView.obtainView(AbsListView.java:2267) 10-13
> 11:47:32.151: E/AndroidRuntime(618):  at
> android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
> 10-13 11:47:32.151: E/AndroidRuntime(618):    at
> android.widget.ListView.onMeasure(ListView.java:1156) 10-13
> 11:47:32.151: E/AndroidRuntime(618):  at
> android.view.View.measure(View.java:15172) 10-13 11:47:32.151:
> E/AndroidRuntime(618):    at
> android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
> 10-13 11:47:32.151: E/AndroidRuntime(618):    at
> android.widget.FrameLayout.onMeasure(FrameLayout.java:310) 10-13
> 11:47:32.151: E/AndroidRuntime(618):  at
> android.view.View.measure(View.java:15172) 10-13 11:47:32.151:
> E/AndroidRuntime(618):    at
> android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
> 10-13 11:47:32.151: E/AndroidRuntime(618):    at
> android.widget.FrameLayout.onMeasure(FrameLayout.java:310) 10-13
> 11:47:32.151: E/AndroidRuntime(618):  at
> android.view.View.measure(View.java:15172) 10-13 11:47:32.151:
> E/AndroidRuntime(618):    at
> android.widget.RelativeLayout.measureChild(RelativeLayout.java:602)
> 10-13 11:47:32.151: E/AndroidRuntime(618):    at
> android.widget.RelativeLayout.onMeasure(RelativeLayout.java:415) 10-13
> 11:47:32.151: E/AndroidRuntime(618):  at
> android.view.View.measure(View.java:15172) 10-13 11:47:32.151:
> E/AndroidRuntime(618):    at
> android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
> 10-13 11:47:32.151: E/AndroidRuntime(618):    at
> android.widget.FrameLayout.onMeasure(FrameLayout.java:310) 10-13
> 11:47:32.151: E/AndroidRuntime(618):  at
> android.view.View.measure(View.java:15172) 10-13 11:47:32.151:
> E/AndroidRuntime(618):    at
> android.widget.LinearLayout.measureVertical(LinearLayout.java:833) 
```

这是我的xml。它没有显示错误。

```
<?xml version="1.0" encoding="utf-8"?>

<com.example.demo.ToDoListView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:padding="10dp"
  android:scrollbars="vertical"
  android:textColor="@color/notepad_text"
  android:fadingEdge="vertical"
/> 
```

我正在尝试将它与列表适配器一起使用：

```
 aa=new ArrayAdapter<String>(this, R.layout.todolist_item,todoItems); 
```

待办事项列表类：

```
public class ToDoListView extends TextView{
    private Paint marginPaint;
    private Paint linePaint;
    private int paperColor;
    private float margin;

    public ToDoListView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    public ToDoListView(Context context, AttributeSet st, int ds) {
        super(context);
        init();
    }

    private void init() {
      Resources myResources=getResources();
      marginPaint=new Paint(Paint.ANTI_ALIAS_FLAG);
      marginPaint.setColor(myResources.getColor(R.color.notepad_margin));
      linePaint=new Paint(Paint.ANTI_ALIAS_FLAG);
      linePaint.setColor(myResources.getColor(R.color.notepad_lines));
      paperColor=myResources.getColor(R.color.notepad_paper);
      margin=myResources.getDimension(R.dimen.notepad_margin);      
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(paperColor);
        canvas.drawLine(0, 0, 0, getMeasuredHeight(), linePaint);
        canvas.drawLine(0, getMeasuredHeight(), getMeasuredWidth(), getMeasuredHeight(), linePaint);
        canvas.drawLine(margin, 0, margin, getMeasuredHeight(), marginPaint);
        canvas.save();
        canvas.translate(margin, 0);
        super.onDraw(canvas);
        canvas.restore();
    }

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-13T12:16:37.590

如果在xml布局中使用自定义视图需要修改这个构造函数：

```
public ToDoListView(Context context, AttributeSet st, int ds) {
    super(context);
    init();
} 
```

到：

```
public ToDoListView(Context context, AttributeSet st) {
    super(context, st);
    init();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:55:57.597

我为自定义视图使用了一个很好的模式，它涵盖了所有场景。Luksprog 当然是正确的，但只涵盖了一种可能的构造函数。对于默认视图：

```
public MyCustomView(Context context){
   this(context, null);
}

public MyCustomView(Context context, AttributeSet attrs){
   this(context, attrs, 0);
}

public MyCustomView(Context context, AttributeSet attrs, int defaultStyle){
   super(context, attrs, defaultStyle);
   init();
} 
```

使用这种模式，无论使用哪种重载，super 和 init 总是被正确调用。您的自定义视图也将在 UI 预览中正确呈现，假设 onDraw 可以在没有外部依赖项的情况下进行绘制，这些依赖项是不可解析的预编译。

# android - 这个背景怎么安装？

> ID：12872852
> 
> 赞同：0
> 
> 时间：2012-10-13T11:52:36.713
> 
> 标签：android

我有背景

![在此处输入图像描述](../Images/dd9f213a22da1e2ebc93b672531dce23.png)

不是简单的颜色我不知道如何设置你的应用程序的背景

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T11:59:24.053

因此，如果您想在背景中显示图像并重复它，请将以下代码放入`drawable`文件夹中： `bg.xml`

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/your_image"
    android:tileMode="repeat" /> 
```

然后只需将其应用于您的根视图： `android:background="@drawable/bg"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:08:08.320

(1) 将您的背景图片（例如 my_image_name.png）放入`res/drawable`文件夹中。 *提示：对于不同的设备密度（hdpi、mdpi），您可以拥有不同分辨率的图像——只需将相同名称的 PNG 放在适当的`res/drawable-xxx`文件夹中即可。*

(2) 要获得平铺的外观，请创建一个`res/drawable/my_back.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

  <item>
    <bitmap
      android:src="@drawable/my_image_name"
      android:tileMode="repeat" />
  </item>

</layer-list> 
```

(3) 接下来，创建一个新布局，例如`res/layout/main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="@drawable/my_back" >

<!-- add your elements here -->

</FrameLayout> 
```

(4) 最后，在你的 Activity 中使用新创建的带有平铺背景的布局：

```
 @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
  } 
```

就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T11:59:12.130

使用[android:background](http://developer.android.com/reference/android/view/View.html#attr_android%3abackground)属性。

您可以使用该图像定义一个[可绘制资源](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html)，并在可绘制的 XML 中指定您希望它如何平铺等。

# jquery - 我的 jquery 已停止工作

> ID：12872855
> 
> 赞同：0
> 
> 时间：2012-10-13T11:52:57.303
> 
> 标签：jquery, html, wordpress

我的 .js 文件似乎停止显示任何结果，我不确定它为什么停止工作？我已经删除了我添加的所有 wordpress 插件，认为它们可能存在冲突，但这似乎没有任何区别。

你可以在这里看到我的网站[http://mhutchinson.me.uk/](http://mhutchinson.me.uk/)

如您所见，如果向下滚动，该类别的砌体脚本和文本替换已停止工作，它们位于同一个 .js 文件中。

该文件可以在这里找到 [http://mhutchinson.me.uk/wp-content/themes/twentyeleven/js/script.js](http://mhutchinson.me.uk/wp-content/themes/twentyeleven/js/script.js)

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:16:13.870

如前所述，在您的控制台中，问题是第 31 行的 JS 错误，您尝试调用 carousel.

问题是您在加载页面时调用轮播，在您的情况下，在加载 .carousel 作为 DOM 元素之前。

JS/Jquery 最佳实践表明，您将所有依赖于 DOM 元素的代码放在 window.onload 处理程序中，或者在 jquery 的情况下，使用 ready。

```
window.onload = function(){
  $('.carousel').carousel('cycle')({
    interval: 1000
  })
} 
```

或者

```
$(document).ready(function(){
  $('.carousel').carousel('cycle')({
    interval: 1000
  })
}) 
```

经过进一步调查，问题是使用 $ 的库冲突。应该使用 jQuery.noConflict。 [jQuery.noConflict](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:10:26.513

您可以使用 Chrome (F12) 或 Firebug 中的控制台查看 Javascript 错误。在这种情况下，它`Uncaught Type Error: object is not a function`与您添加到头脑中的这段代码有关；

```
 <script>
   $('.carousel').carousel('cycle')({
   interval: 1000
   })
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T13:25:09.847

尝试先初始化轮播然后链接`cycle`方法：

```
$(document).ready(function () {
    $('.carousel').carousel({
        interval: 1000
    }).carousel('cycle');
}); 
```

**更新：**

加载页面时，我只收到两个错误：

1.  [在http://mhutchinson.me.uk/wp-content/themes/twentyeleven/img/glyphicons-halflings.png](http://mhutchinson.me.uk/wp-content/themes/twentyeleven/img/glyphicons-halflings.png)上找不到 404
2.  GET 在[https://apis.google.com/js/plusone.js](https://apis.google.com/js/plusone.js)上失败（因为 Google +1 被我的 AVG 浏览器扩展程序阻止）

并且`carousel`已经停止工作（因为脚本不再在页面上，或者作为外部 .js 文件链接到页面）。

# iphone - 有没有办法在 i18n 的 XCode ios 项目中提取字符串

> ID：12872857
> 
> 赞同：0
> 
> 时间：2012-10-13T11:54:02.810
> 
> 标签：iphone, ios, xcode, internationalization

有没有办法在 i18n 的 XCode ios 项目中提取字符串，我需要自动查找字符串并制作本地化文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:27:32.620

据我所知，只能自动查找 NSLocalizedString...(...); 方法并从中提取密钥。如果您在开发过程中还没有使用过这些宏，则无法提取项目中的每个 NSString。我很确定这总是会导致代码损坏，因为您不能简单地将每个 NSString 替换为 NSLocalizedString 语句。

要在您的代码中查找 NSLocalizedString 内容，您可以使用 genstrings：http: [//developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/genstrings.1.html](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/genstrings.1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:28:18.317

晚了几个月（抱歉）：genstrings 和 ibtool 将从 .m 或 .xib 中提取您的字符串。

编辑：哎呀，我的错，genstrings 只会提取在 NSLocalizedString 函数中调用的字符串。也许这可以满足您在 genstrings 之前进行搜索和替换的需要。

# android - Android screen-size and resolution

> ID：12872863
> 
> 赞同：0
> 
> 时间：2012-10-13T11:54:53.240
> 
> 标签：android, xml, drawable, resolution, screen-size

My app works perfectly in resolution 480x800\. If I keep the 480x800 resolution but change the screen size to for example 2.7 inches, 3.7 inches or 5.4 inches it still is perfect. But when I change the resolution to for example 640x1066 all the ImageButtons is too small and in the wrong place in all screen sizes... I have created ImageButtons in all four folders(drawable-l, m, h, xh) but still the buttons is not in the correct size..

```
<ImageButton
android:id="@+id/ib1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginLeft="6dp"
android:layout_marginTop="433dp"
android:background="@drawable/imagebutton1" />

<ImageButton
android:id="@+id/ib2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginLeft="188dp"
android:layout_marginTop="436dp"
android:background="@drawable/imagebutton2" /> 
```

NOTE: My problem is not when I change screen size, but when I change screen resolution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:59:02.007

您使用的是 9 个补丁图像吗？

当涉及到图像按钮之类的东西时，它们的工作要好得多，请在 Android 文档中查看它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:02:46.980

是的，当然它会改变。您给出的边距（左，上）`dp`因分辨率而异。为避免此问题，您应该进行动态计算，例如动态获取屏幕高度和宽度并相应地设置边距。

# java - 如何将 .out 文件复制到 postgresql？

> ID：12872864
> 
> 赞同：-2
> 
> 时间：2012-10-13T11:54:59.027
> 
> 标签：java, postgresql, copy, sqlbulkcopy, out

我有[这个文件](http://www.sendspace.com/file/6o76fk)（警告：可能不安全的文件下载站点），我需要使用 Postgres 和 Java 将其插入数据库。请下载它并告诉我如何从该文件中提取数据。我尝试了复制命令。一方面，它不允许我使用 header 选项。正如您从文件中看到的那样，我必须从第 4 行开始复制数据。另一件事是分隔符。如果您在 notepad++ 中阅读该文件，您可以将它们视为正确的列，但没有分隔符。我已经尝试并面对这些挑战。请帮我获取自定义查询。或者另一种可以实现我想做的方法。谢谢！

编辑：我使用了更安全的链接来下载文件。希望它有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:27:19.200

所以听起来你正在做固定宽度的文件。COPY 不处理这些，所以最好的办法是加载电子表格，导入文件（大多数可以处理固定宽度），然后导出为 csv。然后，您可以使用 COPY。

# javascript - 防止输入在文本字段中创建空格？

> ID：12872866
> 
> 赞同：0
> 
> 时间：2012-10-13T11:55:46.543
> 
> 标签：javascript, html, chat, textfield

所以我得到了一个用于小型聊天程序的文本字段，我让聊天发送文本字段中的任何内容，方法是捕获 keydown 事件并在按下输入时发送文本字段的内容。问题是： Enter 出于某种原因在用户上次写入的位置放置了一个空格，因此，如果用户单击文本字段中文本中间的某个位置，然后按 Enter，则发送的消息将在中间有一个空格它，这很烦人......有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:19:26.670

在输入时使用 preventDefault 将不允许文本区域中有任何空间。HTML：

```
​&lt;form action='www.google.com'>
<textarea id =textareaId>

</textarea>
</form>​ 
```

JS：

```
var ta = document.getElementById("textareaId");
ta.onkeydown = function(e){

    if(e.keyCode == 13){
        e.preventDefault();
        document.forms[0].submit();
    }
} 
```

# php - php 编辑特定的 apache 配置

> ID：12872869
> 
> 赞同：0
> 
> 时间：2012-10-13T11:55:58.607
> 
> 标签：php, apache, config

我想编写一个 php 函数来解析特定的 apache conf 文件并将添加到服务器别名新域，而不是在用户事件中重新启动我的 apache 服务器。是否可以这样做我一直在查看以下梨库[http://pear.php.net/manual/en/package.configuration.config.avail-container.apache.php](http://pear.php.net/manual/en/package.configuration.config.avail-container.apache.php)但我无法决定是否会做这项工作与否。

# java - 在invient图表的饼图中根据点击操作创建弹出屏幕

> ID：12872872
> 
> 赞同：0
> 
> 时间：2012-10-13T11:56:06.533
> 
> 标签：java, vaadin, pie-chart

当用户单击饼图的一部分时，如何创建弹出屏幕？

例如;

*   我的饼图显示了语言的分布，例如英语 50% 德语 20% 法语 20% 和意大利语 10% 等。
*   当用户单击饼图中的英文部分时，必须显示一个显示有关英文分布信息的弹出屏幕。

我如何在 vaadin 中添加 invient 图表来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:25:42.247

使用`com.invient.vaadin.charts.InvientCharts.PointClickListener`这样的：

```
chart.addListener(new PointClickListener() {
    @Override
    public void pointClick(PointClickEvent pointClickEvent) {
        Item item = pointItems.get(pointClickEvent.getPoint());

        Window popupWindow = new Window();
        // Add stuff to your window
        getWindow().addWindow(popupWindow);
    }
}); 
```

非常简单:) getWindow() 方法是在 Component 中定义的，所以调用类应该是实现它的类。如果您使用的是[ThreadLocal 模式](https://vaadin.com/wiki/-/wiki/Main/ThreadLocal%20Pattern)，您可以在代码中的任何位置获取对主窗口的引用。

编辑：我忘了提到 pointItems 在类中声明如下：

```
Map<Point, Item> pointItems = new HashMap<Point, Item>(); 
```

在创建点时，我将 Point 和 Item 对象放到地图上。您还可以创建自己的 Point 实现并将 Item 封装在其中。太糟糕了 Invient Charts 几乎声明了每个类 final 所以你不能扩展例如。日期时间点：/

# python - SQLAlchemy中的一对一自我关系

> ID：12872873
> 
> 赞同：8
> 
> 时间：2012-10-13T11:56:27.163
> 
> 标签：python, sqlalchemy

我需要创建一个链表的 SQLAlchemy 版本。它实际上比这更复杂，但归结为：

我需要*一个类中的一对一、自我参照、双向关系*。每个元素可能只有一个父元素或根本没有父元素，并且最多有一个子元素。

我简化了我的课程，所以它看起来像这样：

```
class Node(declarative_base()):
    __tablename__ = 'nodes'

    id = Column(Integer, Sequence('nodes_id_seq'), primary_key=True, autoincrement=True)
    value = Column(Integer)
    prev_node_id = Column(Integer, ForeignKey('nodes.id'))
    next = relationship('Node', uselist=False, backref=backref('prev', uselist=False)) 
```

但是，当我尝试创建一个时，它会引发异常：

```
>>> Node()
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "<string>", line 2, in __init__
  File "sqlalchemy\orm\instrumentation.py", line 309, in _new_state_if_none
    state = self._state_constructor(instance, self)

[...]

  File "sqlalchemy\orm\properties.py", line 1418, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "sqlalchemy\orm\properties.py", line 871, in _add_reverse_property
    % (other, self, self.direction))
ArgumentError: Node.next and back-reference Node.prev are both of the same direction <symbol 'ONETOMANY>.  Did you mean to set remote_side on the many-to-one side ? 
```

我在这里想念什么？谷歌搜索让我一无所获......：/

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-13T18:27:49.210

正如例外所说，您需要`remote_side`为关系设置关键字。否则 sqlalchemy 无法选择参考方向。

```
class Node(declarative_base()):
    ...
    prev = relationship(
        'Node',
        uselist=False,
        remote_side=[id],
        backref=backref('next', uselist=False)
    ) 
```

# c# - 免费的 PDF 操作库或代码？

> ID：12872878
> 
> 赞同：1
> 
> 时间：2012-10-13T11:57:28.717
> 
> 标签：c#, java, pdf, pdf-generation, pdf-manipulation

我想开发一个用于商业用途的工具（我打算出售它），其中包括处理文档文件。

操作将包括： 1\. 将多个 PDF 文件合并为一个。2.将doc/docx文件转换成PDF文件。3\. 将单个 PDF 文件分成 2 个单独的 PDF 文件。4\. 对 PDF 文件的页面进行编号（按顺序编号）。

就此而言，我正在寻找一个免费的库或代码来帮助我进行 PDF 操作。我更喜欢库在 C# 中，因为我的软件将在 C# 中，因为它有一些 GUI，但我也将使用 JAVA 库进行管理......

我找到了可以帮助我很多的“pdftk”库，但不幸的是它的许可证不允许商业用途....

有没有人知道可以帮助我的免费库或代码？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:59:49.137

如果你想用java操作PDF，[PDFBox](http://pdfbox.apache.org/)是个不错的选择。

您还可以查看支持 java 和 C#的[itextpdf 。](http://itextpdf.com/)该库有社区版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T13:19:02.490

看看[http://www.foolabs.com/xpdf/download.html](http://www.foolabs.com/xpdf/download.html)上的 pdftotext 。

它提供了将 PDF 文件的内容提取到文本文件中的选项。与其他库相比，它的突出之处在于它在提取的文本文件中保留了 PDF 文件的格式。当您的 PDF 包含诸如表格之类的结构数据并且 PDF 文件未标记时，这非常有用。PDFBox 和其他库在解析 PDF 时无法维护 PDF 内容的结构。

从 PDF 中提取文本文件后，您可以自由地使用自己喜欢的编程语言来解析文本文件。

在此处查看许可政策：[http](http://www.glyphandcog.com/Xpdf.html) ://www.glyphandcog.com/Xpdf.html 。它明确指出，如果您直接使用可执行文件而不修改源代码，您可以自由地重新分发使用这些可执行文件的应用程序。如果性能不是问题，你不需要接触他们的源代码。

如果性能是一个问题，您可以创建一个应用程序的试用版，它突出了功能，但自然会很慢，因为它会在您每次要处理 PDF 时运行可执行文件。付费版可以直接调用pdftotext api，速度会更快。你可以很容易地弥补花在许可上的钱。如果我是你，我会这样做，但我现在已经有一些大项目在我的盘子里了 :)

我可以为 pdftotext 担保，因为我自己使用过它。所有其他库似乎都忘记了用户可能有兴趣保持 PDF 文件的格式不变。

# javascript - 如何将css字符串转换为数组

> ID：12872879
> 
> 赞同：0
> 
> 时间：2012-10-13T11:57:31.320
> 
> 标签：javascript, jquery

那么这就是我想要做的。我想转换一个包含 CSS 规则的数组，如下所示：

```
[

".divd { bottom: 0px; height: 500px; }"

, 

".divk { font-size: 14px; }"

] 
```

我想把它变成：

```
cssarray['divd'] =  {
        bottom: "0px",
        height: "500px",
    }; 
```

这是我到目前为止所做的：

```
 var splitSelector= css.split("{");
    var splitProperty = split[1].split(";");
    var v =[];
    for(i in splitProperty ){
        v = $.extend(v,splitProperty[i].split(":"));
    } 
```

我试图用很多拆分语句来完成这项工作，但我不走运。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T12:09:12.890

看到这个小提琴：http: [//jsfiddle.net/YrQ7B/3/](http://jsfiddle.net/YrQ7B/3/)

```
 var arr = [".divd { bottom: 0px; height: 500px; }", 
"#divk { font-size: 14px; }"];

var output = {};
for(var k in arr)
{
    var value = arr[k], key;
    // Get key
    value.replace(/(\.|#)([a-z\s]+){/gi, function($1, $2, $3){
          key = $3;
    });
    // Make object
    output[key] = {};

    // Replace First part
    value = value.replace(/\.([a-z\s]+) {/gi, "");
    value = value.replace("}", "");

    value.replace(/([a-z\-]+)([^:]+)?:([^0-9a-z]+)?([^;]+)/g, function($1, $2, $3, $4, $5){             
        output[key][$2] = $5;
    });
}

console.log(output);
​
​ 
```

日志：

```
Object
    divd: Object
        bottom: "0px"
        height: "500px"
    divk: Object
        font-size: "14px" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T12:12:38.207

不幸的是，解析 CSS 标记并不像拆分字符串那么容易，事实上，理想情况下，您需要一个解析器，我建议您使用现有的 CSS 解析器来完成您的任务：

*   [jQuery CSS 解析器](http://bililite.com/blog/2009/01/16/jquery-css-parser/)
*   [JSCSSP](http://glazman.org/JSCSSP/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T12:19:13.557

无正则表达式方法

```
var cssObj = {},
    arr = [".divd { bottom: 0px; height: 500px; }", ".divk { font-size: 14px; }"],
    arr_i = arr.length,
    i, j, k, str,
    sel, vals, val;
while(arr_i-- > 0){       // loop over array
    str = arr[arr_i];
    i = str.indexOf('{');
    sel = str.slice(0,i); // get Selector
    vals = str.slice(i+1,str.lastIndexOf('}'));           // get values
    val = vals.slice(0,vals.lastIndexOf(';')).split(';'); // and put in array
    cssObj[sel] = {};
    k = val.length;
    while(k-- > 0){
        j = val[k].indexOf(':');                      // get name-value pair
        cssObj[sel][val[k].slice(0,j).trim()] = val[k].slice(j+1).trim();
    }
}
console.log(cssObj); // see output 
```

用作函数，传递`arr`并更改`console.log`为`return`. 假设您以分号结束 之前的`.slice(0,vals.lastIndexOf(';'))`最后一个条目。`}`如果您不想假设这一点，请将其取出并检查最后一个数组项是否为空白/空格。

[jsperf 与 RegExp 方法](http://jsperf.com/arr-to-css-obj)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T13:59:08.353

我过去使用过它，但只有当我确切知道我将发送到正则表达式中的内容时——主要是因为我确信那里会有可能破坏它的语法（尤其是使用 mixins、css 动画之类的） 、css 变量和媒体查询）。正是出于这些原因，您可能应该遵循马里奥的回答。

但是，它已经处理了我自己扔给它的大多数 css 文件，并且可能会帮助其他人......虽然它不是为使用像您正在使用的数组结构而量身定制的，但这可能是很容易改变。显然，您可以通过摆脱`RegExp`并`indexOf`像 shhac 所做的那样使用来优化事物，但我发现 RegExp 的表现力更容易使用，并且在需要时更容易扩展。

几点注意事项

1.  **它假定 CSS 中没有注释**- 您始终可以添加替换以去除注释。
2.  **它依赖于可用的 JSON.parse 方法**- 您始终可以包含非 JSON 后备。

带有注释的代码：

```
window.onload = function(){
  /// this is designed to find a <style> element in the page with id="css"
  var entireStylesheetString = document.getElementById('css').innerHTML;
  var css = String('{'+entireStylesheetString+'}')
    /// convert double quotes to single to avoid having to escape
    .replace(/"/gi,"'")
    /// replace all whitespace sequences with single space
    .replace(/\s+/g,' ')
    /// sort the first open brace so things are neat
    .replace(/^{/,'{\n')
    /// sort the newlines so each declaration is on own line
    .replace(/\}/g,'}\n')
    /// find the selectors and wrap them with quotes for JSON keys
    .replace(/\n\s*([^\{]+)\s+?\{/g,'\n"$1":{')
    /// find an attribute and wrap again with JSON key quotes
    .replace(/([\{;])\s*([^:"\s]+)\s*:/g,'$1"$2":')
    /// find values and wrap with JSON value quotes
    .replace(/":\s*([^\}\{;]+)\s*(;|(\}))/g,'":"$1",$3')
    /// add commas after each JSON object
    .replace(/\}/g,'},')
    /// make sure we don't have too many commas
    .replace(/,\s*\}/g,'}');
  /// remove the final end comma
  css = css.substring(0,css.length-2);
  try{
    /// parse using JSON
    console.log(JSON.parse(css));
  }catch(ee){
    console.log(ee);
  }
}; 
```

它的代码很寂寞：

```
window.onload = function(){
  var entireStylesheetString = document.getElementById('css').innerHTML;
  var css = String('{'+entireStylesheetString+'}')
    .replace(/"/gi,"'")
    .replace(/\s+/g,' ')
    .replace(/^{/,'{\n')
    .replace(/\}/g,'}\n')
    .replace(/\n\s*([^\{]+)\s+?\{/g,'\n"$1":{')
    .replace(/([\{;])\s*([^:"\s]+)\s*:/g,'$1"$2":')
    .replace(/":\s*([^\}\{;]+)\s*(;|(\}))/g,'":"$1",$3')
    .replace(/\}/g,'},')
    .replace(/,\s*\}/g,'}');
  css = css.substring(0,css.length-2);
  try{console.log(JSON.parse(css));}catch(ee){console.log(ee);}
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T12:10:06.600

我不是 eval 的支持者，但如果你转换

. 到 [”

第一个空格 "]=

： 到 ：”

; 到 ”，

然后一个 eval 将设置整个事情

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T14:49:30.813

您也许可以简单地附加一个样式标签；

```
var data=[".divd { bottom: 0px; height: 500px; }", 
".divk { font-size: 14px; }"
]

var $style=$('<style>');

$.each( data, function(i, item){
  $style.append( item + ';');
})

$('head').append($style) 
```

# c - 使用 memcpy 将两个 char* 复制到 **buff - C 语言

> ID：12872881
> 
> 赞同：1
> 
> 时间：2012-10-13T11:57:55.080
> 
> 标签：c, memcpy

我有两个字符指针：

```
char *a="A";
char *b="B"; 
```

以及指向指针缓冲区的指针：

```
char **buf = malloc(sizeof(char*)*2); 
```

我想使用 memcpy 将两个变量复制到 buf：

```
memcpy(*buf, &a, sizeof(char*));
memcpy(*buf, &b, sizeof(char*)); 
```

但它取代了第一个变量..

我怎样才能复制两个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:20:23.513

你真正想做的是什么？

和

```
char **buf = malloc(sizeof(char*)*2);

memcpy(*buf, &a, sizeof(char*));
memcpy(*buf, &b, sizeof(char*)); 
```

除非你在两者之间省略了一些初始化，否则你会得到未定义的行为。`malloc`ed 内存的内容是未指定的，因此 when`*buf`被解释为`void*`in `memcpy`，几乎可以肯定不会产生有效指针，并且它是空指针的概率不可忽略。

如果你只想`buf`包含两个指针，在`malloc`

```
buf[0] = a;
buf[1] = b; 
```

是最简单和最干净的解决方案，但是

```
memcpy(buf, &a, sizeof a);
memcpy(buf + 1, &b sizeof b); 
```

也将是有效的（也可以使用`&buf[1]`而不是`buf + 1`.

如果您想连接字符串`a`并`b`指向，那么您将采用完全错误的方法。您需要`char*`指向足够大的区域来保存结果（包括 0 终止符），最简单的方法是使用`strcat`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:59:59.323

我用我自己的测试代码尝试了你的程序：我希望这会有所帮助：

```
#define MAX_LENGTH 10
#define ARRAY_LENGTH 2
int main(int argc, char *argv[])
{
    char *a = "A";
    char *b = "B";
    char **buf = (char **)malloc(sizeof(char*)*ARRAY_LENGTH);
    *buf = (char *)malloc(sizeof(char) * MAX_LENGTH);
    *(buf+1) = (char *)malloc(sizeof(char) * MAX_LENGTH);
    memset(buf[0],0,10);
    memset(buf[1],0,10);
    memcpy(buf[0],a,strlen(a));
    memcpy(buf[1],b,strlen(b));
    printf("%s %s",buf[0],buf[1]);
    free(buf[0]);
    free(buf[1]);
        free(buf)
    return 0;
} 
```

# android - 无法捕获列表视图中的按钮单击？请告诉我为什么这段代码不起作用

> ID：12872895
> 
> 赞同：0
> 
> 时间：2012-10-13T11:59:26.003
> 
> 标签：android, android-listview

我的主要活动中有一个列表视图，后面是一个文本视图。列表视图中包含按钮。当单击列表中的按钮时，我希望一些文本出现在 textatrea 上。但我无法捕捉到按钮的点击。

以下是我使用的代码。请告诉我有什么问题。（我不想要替代解决方案，但我想知道代码中有什么问题）

```
public class MyFirstAppActivity extends Activity implements OnItemClickListener {   
    ListView listview ;
    String[] array = new String[] {"Click1","Click2"};
    ArrayAdapter <String> arrayadapter;
    TextView textview;

    public void onCreate(Bundle savedInstance){
        super.onCreate(savedInstance);
        setContentView(R.layout.main);
        arrayadapter = new ArrayAdapter<String>(this, R.layout.button,array);
        listview = (ListView)findViewById(R.id.lv_1);
        listview.setAdapter(arrayadapter);
        listview.setOnItemClickListener(this);
    }

    public void onItemClick(AdapterView<?>arg1,View v,int Position, long id){
        textview = (TextView)findViewById(R.id.textview);
        textview.setText("Hello, you just clicked a button"+Position);      
    }
} 
```

这会将活动设置为 main.xml，如下所示。但是当我点击列表中的按钮时，点击不会被捕获。为什么会这样？

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
        <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal" >

            <ListView android:id="@+id/lv_1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">        
            </ListView>

            <TextView android:id = "@+id/textview"
                    android:layout_width = "match_parent"
                    android:layout_height = "match_parent"
                    android:layout_below = "@id/lv_1"
                    android:text="Message about the button is displayed here">        
            </TextView>"

        </RelativeLayout> 
```

按钮.xml

```
<?xml version="1.0" encoding="utf-8"?>

<Button xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/button" >    
</Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:26:56.993

你说的是一回事，编码是另一回事......

`onItemClick`处理单击列表的行，而不是按钮。

在这种情况下，按钮会从行中窃取点击，因此不会调用您的 onItemClick。

有两种方法可以解决此问题，具体取决于您真正想要发生的事情。

如果您真的想单击按钮本身而不是行，则需要覆盖`getView`适配器的方法并`OnClickListener`为按钮添加一个。

如果您只单击该行就很高兴（这看起来就像单击按钮，因为这是该行中唯一的东西），您需要阻止该按钮从列表行中窃取点击次数。您可以通过在 xml 中设置`android:focusable="false"`和按钮来实现这一点。`android:focusableInTouchMode="false"`

一旦你这样做了，你将拥有一个NPE......

`R.id.textview`您的行布局中没有，因此`onItemClick`将抛出 NPE，因为您`findViewById`将返回 null 然后 setText 失败。您需要从单击的行导航到父布局，然后找到 textview（如果您也从方法中执行此操作，则几乎相同`getView`......

假设您坚持使用该`OnItemClick`方法：

```
 public void onItemClick(AdapterView<?>arg1,View v,int Position, long id){ 
        ListView lv = (ListView) v.getParent();
        RelativeLayout rl = (RelativeLayout) lv.getParent();
        textview = (TextView) rl.findViewById(R.id.textview); 
        textview.setText("Hello, you just clicked a button"+Position);       
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:23:55.967

将此代码`android:descendantFocusability="blocksDescendants"`放在 listview 子 xml 中。

# mysql - MySQL 从另一个表中的计数较低的位置获取

> ID：12872898
> 
> 赞同：2
> 
> 时间：2012-10-13T11:59:54.133
> 
> 标签：mysql, sql

我需要编写一个 mySQL 语句来仅返回尚未租用的物品（书籍）。我有这个但我知道这是不对的那一刻：

```
SELECT books.copies 
FROM books 
WHERE books.copies > (SELECT rentals.book_id, COUNT(rentals.book_id) As CountRentals 
                        FROM rentals 
                        WHERE rentals.book_id = books.id ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:02:01.107

使用 a获取表`left join`中没有条目的所有内容`rentals`

```
SELECT b.copies 
FROM books b
LEFT OUTER JOIN rentals r ON r.book_id = b.id
WHERE r.book_id IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:03:31.750

该查询首先会获取 book_id 和租借的副本数，然后与 books 表连接以查看副本数是否大于租借副本，并打印所有此类书籍和可用副本数。

```
SELECT 
    b.id, b.copies - r.rentalCount
FROM 
    books b
    JOIN (
           SELECT book_id, count(*) rentalCount) 
           FROM rentals 
           GROUP BY book_id
         ) as r
    ON b.book_id = r.book_id
WHERE 
    b.copies > r.rentalCount 
```

# javascript - 如何在 Wordpress 编辑器中放入脚本标签？

> ID：12872907
> 
> 赞同：2
> 
> 时间：2012-10-13T12:01:07.407
> 
> 标签：javascript, css, wordpress, tinymce, embed

几个小时以来一直在努力解决这个问题！

[CSSDeck 之](http://cssdeck.com)类的网站提供了一个由 a`pre`和标签组成的嵌入代码`script`。您可以将该代码嵌入到您的博客中，这些内容就会显示出来。[这是我的意思的一个例子](http://cssdeck.com/post/61/embedded-creations)。

但是当我在我的 Wordpress 博客中使用该代码时，它会删除脚本标记。我怎么解决这个问题 ？我也可以以某种方式解决它，以便我可以从我在某处定义的白名单域中添加脚本标签吗？

一些帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:31:09.243

您可以使用 tinymce 设置[valid_elements](http://www.tinymce.com/tryit/valid_elements.php)和[valid_children](http://www.tinymce.com/tryit/valid_children.php)来定义 tinymce 将删除的内容以及 tinymce 将保留的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:10:15.133

如果您希望将 javascript 添加到您的页面，您可以尝试使用*[Function Reference/wp enqueue 脚本](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)*

另外，你应该看看[less filter 插件](http://www.binh.name/less-filter-plugin-for-wordpress/)和[Advanced Excerpt](http://wordpress.org/extend/plugins/advanced-excerpt/)插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:26:09.483

您可以将（至少是简单的）脚本粘贴到编辑器的 HTML 版本中，但不能粘贴到 Visual 版本中。Visual 版本将对脚本进行编码，从而破坏它。一两天前，我在几乎最新的 WordPress 上对此进行了测试。如果您的脚本具有 JQuery 等依赖项，则它可能无法正常工作。这取决于依赖项何时加载以及脚本的编写方式。

# c++ - C++，Xcode。每次我尝试使用类时都会出现同样的错误

> ID：12872911
> 
> 赞同：-2
> 
> 时间：2012-10-13T12:01:22.260
> 
> 标签：c++, xcode, class, compiler-errors, undefined

每次我在头文件中有一个类并且我在源文件中使用该类时，都会遇到相同的错误。不管是哪个班级或哪个项目。

我正在尝试将一个新节点插入到链表数据结构的头部。

现在我有一个非常简单的头文件`main.h`：

```
namespace linkedlistofclasses {
    class Node {
        public:
            Node();
            Node(int value, Node *next);
            //Constructor to initialize a node

            int getData() const;
            //Retrieve value for this node

            Node *getLink() const;
            //Retrieve next Node in the list

            void setData(int value);
            //Use to modify the value stored in the list

            void setLink(Node *next);
            //Use to change the reference to the next node

        private:
            int data;
            Node *link;
        };

    typedef Node* NodePtr;
} 
```

我的源文件`main.cpp`如下所示：

```
#include <iostream>
#include "main.h"

using namespace std;
using namespace linkedlistofclasses;

void head_insert(NodePtr &head, int the_number) {

    NodePtr temp_ptr;
    //The constructor sets temp_ptr->link to head and
    //sets the data value to the_number

    temp_ptr = new Node(the_number, head);
    head = temp_ptr;
}

int main() {

    NodePtr head, temp;

    //Create a list of nodes 4->3->2->1->0
    head = new Node(0, NULL);

    for (int i = 1; i < 5; i++) {
        head_insert(head, i);
    }

    //Iterate through the list and display each value 
    temp = head;
    while (temp !=NULL) {
        cout << temp->getData() << endl;
        temp = temp->getLink();
    }

    //Delete all nodes in the list before exiting
    //the program.
    temp = head;
    while (temp !=NULL) {
        NodePtr nodeToDelete = temp;
        temp = temp->getLink();
        delete nodeToDelete;
    }

    return 0;
} 
```

我的问题是我得到了这些编译错误：

```
Undefined symbols for architecture x86_64:
  "linkedlistofclasses::Node::Node(int, linkedlistofclasses::Node*)", referenced from:
      head_insert(linkedlistofclasses::Node*&, int) in main.o
      _main in main.o
  "linkedlistofclasses::Node::getData() const", referenced from:
      _main in main.o
  "linkedlistofclasses::Node::getLink() const", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如果我在不使用类的情况下运行代码，将所有内容都写入源文件`main.cpp`，则没有问题。但是无论我如何编写一个类，我总是会得到这个错误的一些变体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:17:18.193

您只是在声明以下类方法：

```
Node(int value, Node *next);
//Constructor to initialize a node

int getData() const;
//Retrieve value for this node

Node *getLink() const;
//Retrieve next Node in the list

void setData(int value);
//Use to modify the value stored in the list

void setLink(Node *next);
//Use to change the reference to the next node 
```

这允许那些包含**main.h**的人看到**linkedlistofclasses::Node**的存在，以及它的**公共**成员。这样，您就可以调用它们，例如，从**main() 函数**。

但是，[由于它们只是简单地声明而不是定义](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)，因此稍后会引发问题：

```
**Undefined symbols for architecture x86_64:
"linkedlistofclasses::Node::Node(int, linkedlistofclasses::Node*)", referenced from:
  head_insert(linkedlistofclasses::Node*&, int) in main.o
  _main in main.o
"linkedlistofclasses::Node::getData() const", referenced from:
  _main in main.o
"linkedlistofclasses::Node::getLink() const", referenced from:
  _main in main.o** 
```

出现这些错误消息是因为[链接器](http://en.wikipedia.org/wiki/Linker_%28computing%29)不知道与这些方法名称关联的代码所在的程序内部表示中的区域。而且找不到是因为你一开始没有定义它！考虑一下这种情况：调用一个代码不存在的函数有什么意义？

我可以建议您创建一个**Node.h 和 Node.cpp**文件，第一个带有声明，第二个带有定义（[同样，这两个概念之间的差异](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)），然后**#include Node.h from main.c**？

在当前情况下，您会注意到，如果您另外调用任何这些：

```
void setData(int value);
//Use to modify the value stored in the list
void setLink(Node *next);
//Use to change the reference to the next node 
```

他们的名字将被添加到您已经收到的消息错误中！另外，为了提高可读性，我可以建议将命名空间更改为**LinkedListOfClasses**吗？

编辑：关于您对您在 pastebin 中发布的内容的评论：

```
// Node.h
namespace LinkedListOfClasses {
  class Node {

  public:
      Node();
      Node(int value, Node *next);
      int getData() const;
      Node *getLink() const;
      void setData(int value);
      void setLink(Node *next);
  private:
      int data;
      Node *link;
  };
  typedef Node* NodePtr;
} 
```

上面的代码包含您在评论中提到的方法**的声明。**关于Node 类中声明的以下方法的缺失**定义：**

```
int getData() const;
Node *getLink() const; 
```

您希望将它们的定义包含在您的 Node**.cpp** 文件中，而不是**.h**中！Node.cpp 将如下所示：

```
// Node.cpp
#include "Node.h"

using namespace LinkedListOfClasses;

void head_insert(NodePtr &head, int the_number) {

    NodePtr temp_ptr;
    temp_ptr = new Node(the_number, head);
    head = temp_ptr; 
}

Node::Node(int value, Node *next) {  
}

void Node::setData(int value) {
}

void Node::setLink(Node *next) {
}

int Node::getData() const {
  // getData definition was missing, now it's defined in Node.cpp!
}
Node *Node::getLink() const {
  // getLink definition was missing, now it's defined in Node.cpp!
} 
```

希望我能有所帮助。

# android - 在猴子运行期间更改屏幕方向

> ID：12872917
> 
> 赞同：8
> 
> 时间：2012-10-13T12:02:23.120
> 
> 标签：android, android-monkey

我正在使用猴子命令对我的应用程序进行一些压力测试。但我想在屏幕方向方面对其进行更多测试，以在更改方向时检测和捕获一些堆更新。我在 android 官方网站上搜索了有关在任何应用程序/活动上运行时将执行屏幕方向的猴子命令/参数。但是没有运气，也没有想过问像你这样的专业人士。

如果对此有想法，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-27T19:56:09.223

Monkey 有许多未记录的选项，包括`--pct-rotation`. 将该开关添加到您的命令中，然后观看您的屏幕像被恶魔附身一样旋转：

直到（包括）adb 版本 1.0.31：

```
adb shell monkey -p com.example.app -v --pct-rotation=70 500 
```

从亚行 1.0.32 版开始：

```
adb shell monkey -p com.example.app -v --pct-rotation 70 500 
```

查看猴子命令的**processOptions()**方法以查看所有支持的选项：[https ://android.googlesource.com/platform/development.git/+/master/cmds/monkey/src/com/android/commands /monkey/Monkey.java](https://android.googlesource.com/platform/development.git/+/master/cmds/monkey/src/com/android/commands/monkey/Monkey.java)

查看**MonkeySourceRandom**类的构造函数以查看所有事件类型的默认百分比。这些是本文发布时主分支中的当前值。请注意，旋转的默认值为 0：

```
 // default values for random distributions
    // note, these are straight percentages, to match user input (cmd line args)
    // but they will be converted to 0..1 values before the main loop runs.
    mFactors[FACTOR_TOUCH] = 15.0f;
    mFactors[FACTOR_MOTION] = 10.0f;
    mFactors[FACTOR_TRACKBALL] = 15.0f;
    // Adjust the values if we want to enable rotation by default.
    mFactors[FACTOR_ROTATION] = 0.0f;
    mFactors[FACTOR_NAV] = 25.0f;
    mFactors[FACTOR_MAJORNAV] = 15.0f;
    mFactors[FACTOR_SYSOPS] = 2.0f;
    mFactors[FACTOR_APPSWITCH] = 2.0f;
    mFactors[FACTOR_FLIP] = 1.0f;
    mFactors[FACTOR_ANYTHING] = 13.0f;
    mFactors[FACTOR_PINCHZOOM] = 2.0f; 
```

[https://android.googlesource.com/platform/development.git/+/master/cmds/monkey/src/com/android/commands/monkey/MonkeySourceRandom.java](https://android.googlesource.com/platform/development.git/+/master/cmds/monkey/src/com/android/commands/monkey/MonkeySourceRandom.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T12:16:32.363

测试猴子使用随机输入。它会改变屏幕方向，但不能保证它会在任何给定的测试运行中这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-24T22:48:18.613

尽管不能保证 Monkey 在给定运行期间会改变方向，但您可以通过找出会导致 Monkey 改变方向的 SEED 并在以后的运行中重新使用该 SEED 来达到您想要的结果。

```
# monkey -h
usage: monkey [-p ALLOWED_PACKAGE [-p ALLOWED_PACKAGE] ...]
              ...
              [-s SEED] [-v [-v] ...]
              ... 
```

# java - 线程启动后服务器/客户端程序停止工作

> ID：12872918
> 
> 赞同：1
> 
> 时间：2012-10-13T12:02:23.493
> 
> 标签：java, multithreading, sockets, user-interface

在过去的 5 天里，我试图找出为什么我的程序不起作用我在这里问了无数问题并得到了很好的回应，现在看来我已经找到了问题所在。

背景故事：

我有一个聊天程序，它分为两个单独的应用程序客户端和服务器。我们的想法是制作一个聊天程序，以便客户端拥有一个包含图片、一些标签和一些文本区域的 GUI。

每当客户端启动 Gui 节目并且用户能够点击按钮连接以尝试与服务器连接时，这就是我的程序中直接发生的事情，并且程序的这一部分工作正常：

** 正在按下连接按钮** 客户端发送到服务器：1 服务器发送到客户端：1 服务器发送到客户端：1 客户端发送到服务器：Marc（聊天人用户名）

客户端发送到服务器：5 服务器发送到客户端：1 服务器发送到客户端：1 服务器发送到客户端：Marc

客户端发送到服务器：8 服务器发送到客户端：8

现在所有的地狱都崩溃了，因为现在我的 Gui 中的线程开始了。从这里开始，程序显然无法从这里接收来自服务器的消息。即使服务器接收到消息。怎么会这样？

为了不发布大量代码，如果您需要更多代码，我将发布程序的重要部分，我很高兴更新帖子

**线程（在 simpleController（控制 GUI 的那个）中）**

```
public void run(){ 
    System.out.println("Thread started");
    System.out.println(client.getSocket().isConnected());
    ClientListner cl = new ClientListner(client);
    while (client.getSocket().isConnected()) {
        int key = 10;

            if (client.getInput().hasNext()) {
                txt_ChatPerson2.setText(client.reciveString());
                txt_ChatPerson2.setVisible(true);
            }
            try {
                key = client.reciveCommando();
                System.out.println("jeg er her");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        System.out.println("Key "+key);
        switch (key) {
        // case 2 er recive chat:
        case 2:
            // først find ud af hvilket ID der har sendt chatten:
            int y = 0;
            try {
                y = client.reciveCommando();
                System.out.println("y" + y); 
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            // derefter få beskeden og send den så ud til resten.
            String says = client.reciveChat().toString();
            System.out.println("Says :"+says);
            if (y == 1) {
                txt_ChatPerson1.setText(says);
                txt_ChatPerson1.setVisible(true);
            }else if (y == 2) {
                txt_ChatPerson2.setText(says);
                txt_ChatPerson2.setVisible(true);
            }else {
                chatPerson3.setVisible(true);
                txt_ChatPerson3.setVisible(true);
                txt_ChatPerson3.setText(says);
            }

            break;

        default:
            break;
        }
    }
} 
```

**客户端类**

```
 import java.io.IOException;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.util.Scanner;

public class Client {
// disse var static
    public final static int portNumber = 6040;
    public Socket socket;
    private PrintWriter pw;
    private Scanner input;
    private int clientId;
    /**
     * @param args
     * @throws IOException 
     */

    public Client(Socket socket, PrintWriter pw, Scanner input, int clientId){
        this.socket = socket;
        this.pw = pw;
        this.input = input;
        this.clientId = clientId;
    }
    public void connect() throws IOException{
        // du kan vælge at bruge inetadressen til at connecte i socketet.
        InetAddress adr = InetAddress.getByName("localhost");
        socket = new Socket("localhost", portNumber);
        input=new Scanner(socket.getInputStream());
        pw = new PrintWriter(socket.getOutputStream());

    }
    /**
     * This method sends the message (that the client(chat person) writes to the user)
     * @param x
     * @throws NullPointerException
     * @throws IOException 
     */
    public void SendChat(String x) throws NullPointerException{
            pw.print("CHAT:"+x);
            pw.flush();
        /*  pw.println(2);
            pw.flush();
            pw.println(SimpleController.currentClientId);
            pw.flush();
            pw.println(x);
            pw.flush(); 
        */
    }
    public int sendCommando(int id) throws IOException{
        System.out.println("Jeg sender"+ id);
        pw.println(id);
        pw.flush();
        /*
         * this part of the program sends a command to the server if the command is 1 then 1 is = Connect.
         * the program then ask the server is the server is full or is it ok to connect? 
         * if the response is not 10 then the program will allow a connection to happen the return type will be the Id of which 
         * the chat person becomes!
         */
        // should the method return 0 the Application will do NOTHING!
        switch (id) {
        case 1:
    int k = reciveCommando();
            if (k== 10) {
                return 10;
            }else if (k < 3) {
                System.out.println("returned k" + k);
                return k;
            }else {

            return 10;
            }
            /*
             * Closes the connection with the server!
             */
        case 3:

            socket.close();
            return 0;

        case 5:
            int y  = reciveCommando();
            return y;

        case 8:
            return 8;
        default:
            return 0;
        }

    }
    /*
     * this method recives a command from the server! the comands can be found in the ChatCommands.txt
     * returns the command as an integer!
     */
    public int reciveCommando() throws IOException{
        Integer i = input.nextInt();
        return i;
    }
    /**
     * Gets a String response from the server. This method i used to create other users and give them the correct username.
     * 
     * @param i
     * @return
     * @throws IOException
     */
    public String getStringResponse(int i) throws IOException {
        pw.print(i);
        pw.flush();
        String x = input.nextLine();
        return x;

    }
/*
 * Work in progress - client getter og setter methoder!
 */

public Socket getSocket(){
    return socket;
}
public Scanner getInput(){
    return input;
}
public PrintWriter getPw(){
    return pw;
}
public int getClientId(){
    return clientId;
}

public void setClientId(int i ){
    clientId = i;
}
public String reciveChat(){
        return getInput().nextLine();

}
public String reciveString(){
    String x =input.next();
    return x;
}
public void sendString(String x){
    pw.println(x);
    pw.flush();
}

} 
```

**服务器代码**

```
 import java.io.IOException;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;

public class Server extends Thread {

    private Socket connection;
    private PrintWriter pw;
    private Scanner input;
    private ServerInformation info = new ServerInformation();
    private ChatPerson p;

    public Server(Socket connection, PrintWriter pw, Scanner input){
        this.connection = connection;
        this.pw = pw;
        this.input = input;
    }

    @Override
    public void run() {
        while (connection.isConnected()) {
            if (input.hasNextInt()) {
                System.out.println("Det var sgu da en int");
                int i = getInput().nextInt();
                System.out.println(i);
                checkCommand(i);    
            }else if (input.hasNext()) {
                System.out.println("det var ikke en int");
                String inString = input.nextLine();
                System.out.println(inString);
                chatCase(inString);
            } 
        }

    }
    private void chatCase(String x) {
        String k =x.substring(6 , x.length());
        System.out.println("k "+k);
        pw.print(x);

        pw.flush();
    }

    private void checkCommand(int i) {
        System.out.println("i "+i);
        switch (i) {
        // this case accepts the connection and creates a new user;
        case 1:

int id = info.getNextID();
        pw.println(1);
        pw.flush();
        pw.println(id);
        pw.flush();
        p = new ChatPerson(id, input.next());
        info.addToList(p);
        break;

        // this is the chat case virker ikke endnu
    case 2:
        int clientID = input.nextInt();
        String x = reciveString();
        System.out.println(x);
        pw.println(clientID);
        pw.flush();
        pw.print(x);
        pw.flush();
        break;
    // this case sends information about other chat users to the client
    case 5:
        pw.println(5);
        pw.flush();
        pw.println(info.getList().size());
        pw.flush();
        for (int j = 0; j < info.getList().size(); j++) {
            pw.println(info.getList().get(j).getId());
            System.out.println("info.get "+info.getList().get(j).getId());
            pw.flush();
            pw.println(info.getList().get(j).getName());
            pw.flush();
        }
        break;

    case 8:
        pw.println(8);
        pw.flush();
        break;
    default:
        break;
    }

}

private String reciveString() {
    if (input.next().contains(" ")) {
        String x = input.nextLine();
        return x;
    }
    return input.next();
}

public Socket getConnection(){
    return connection;
}
public PrintWriter getPw(){
    return pw;
}
public Scanner getInput(){
    return input;
}

} 
```

我希望有人能够帮助我，因为这对我来说是个大问题，如果您需要更多信息，请发表评论，我会提供尽可能多的信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T14:10:20.473

你必须重新设计你的程序。

1.  GUI 元素应仅从 GUI 线程 (EDT) 中更新，而不是从独立线程中更新。

2.  客户端连接应该分为 2 个弱连接部分：发送消息和接收消息。接收应该是一个单独的线程，发送可以是一个线程或一个类。

3.  当接收线程读取了一条消息后，它使用 . 将消息发送到 EDT `SwingUtilities.invokeLater(Runnable)`。示例可以在其他地方找到。

4.  当用户输入文本时，文本直接发送到套接字，或者排入队列，稍后由发送线程（如果有）处理。

# php - .htaccess 重定向损坏的 URL

> ID：12872925
> 
> 赞同：6
> 
> 时间：2012-10-13T12:03:16.840
> 
> 标签：php, wordpress, .htaccess

我更新了一个网站，但链接不再正常工作。我有一些网址，但它们不再起作用：

```
http://www.mysite.eu/fr/some-page
http://www.mysite.eu/fr/some-page1
http://www.mysite.eu/fr/some-page2 
```

`/fr/`当url中有一个时，是否可以重定向页面？我试过了

```
Redirect 301 /fr/ http://www.mysite.eu/ 
```

但这只会剥离`/fr/`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T12:43:35.597

伟大的！因此，如果您已`mod_rewrite`激活，您可以重写损坏的链接，而不是重定向它们

```
# BEGIN WordPress 
<IfModule mod_rewrite.c> 
RewriteEngine On 
RewriteBase / 
RewriteRule ^fr/(.)*$ / [R=301,NC,L]  # Added line
RewriteRule ^index\.php$ - [L] 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . /index.php [L] 
</IfModule> 
# END WordPress 
```

# jquery - 带有画廊的fancybox内联内容

> ID：12872927
> 
> 赞同：2
> 
> 时间：2012-10-13T12:03:28.673
> 
> 标签：jquery, fancybox, gallery, inline

我正在使用 Fancybox 来显示内联内容、想象和 iframe。这是网站：http://marturii-nunta.com.ro/index.php。我想创建一个画廊，以便用户可以浏览图像，但我不知道如何将其应用于内联内容...请指教

这是我的代码：

```
<div style="display:none">
    <a id="inline" href="#popup">open</a>
    <div id="popup">
        <table>
            <tr>
                <td><img class="bigpic" src="" width="550px" height="500"/><div id="caption"></div><td>

                <td><iframe width="390" height="490" frameborder="0" scrolling="no" src="form.php"></iframe></td>
            </tr>
        </table>

    </div>
</div> 
```

JS：

```
<script>
var code = ""; // product code
var caption = "";
$(document).ready(function() {

/* Using custom settings */
$("a#inline").fancybox({

  'scrolling'    : 'no',
  'onComplete'     : function() {
    $('#popup iframe').contents().find('#code').val(code);
     $('#popup iframe').contents().find('#caption').val(caption);

  },
  'titleShow'    : false
});

$(".trigger").click(function() {
  $('#popup img.bigpic').attr('src',$(this).data('href') || $(this).attr('src'));

  $('#popup iframe').attr("src", "form.php"); // on next call this was not set
  code = $(this).data('code');
  caption = $(this).data('caption');
  $('#inline').trigger('click');
});

});
</script> 
```

HTML：

```
<div class='content_item' id='item_div' style=' width:222px;height:210px' >
            <img src='imagini/".$code.".jpg' id='".$code."' alt='cocarde'  style='width:218px;height:163px' class='trigger' data-caption='".$description[$code]."' data-code='".$code."' data-href='imagini/".$code.".jpg'><br>
            <div style='padding-top:5px'><span class='cod'>".$cod_produs."</span><span class='cod_pret'>".$code."</span></div>
            <span class='pricestyle'><strong>".$pret." ".$price." ".$currency."</span></strong>
            <div> 
```

谢谢！

# sqlite - 在 TestCases 中获取 iPhone 文档目录

> ID：12872930
> 
> 赞同：0
> 
> 时间：2012-10-13T12:03:42.047
> 
> 标签：sqlite, ios5, xcode4, testcase, sentestingkit

当我尝试使用以下任一方式获取主目录时，我正在运行使用 sqlite 数据库在 iPhone 模拟器上使用默认 SenTestingkit 测试我的代码的测试用例

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsPath = [paths objectAtIndex:0]; 
```

或者

```
NSString *home = NSHomeDirectory(); 
```

我找到了指向下一个浴缸的错误路径

```
/Users/{user}/Library/Application Support/iPhone Simulator/5.1 
```

而且我无法创建 sqlite 数据库，知道如何在测试用例中获得正确的路径吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:19:56.793

我找到了答案:)

首先，我必须检测我是在 TestCase 中还是使用 NSClassFromString 为 SenTest 类运行项目，然后根据每种情况构造路径

```
if (NSClassFromString(@"SenTest") == nil) {
        // Running project -> path inside the Document folder
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *docsPath = [paths objectAtIndex:0];
        path = [docsPath stringByAppendingPathComponent:KDatabaseName];
    } else {
        // Test case -> path inside "UnitTests" folder in the project directory
        NSString *directory = [[NSFileManager defaultManager] currentDirectoryPath];
        path = [directory stringByAppendingPathComponent:@"UnitTests/"];
        path = [path stringByAppendingPathComponent:KDatabaseName];
    } 
```

# android - 在一天中的确切时间之间设置重复警报

> ID：12872931
> 
> 赞同：0
> 
> 时间：2012-10-13T12:03:43.727
> 
> 标签：android, alarmmanager, android-alarms

我正在开发一个 Android 应用程序，我需要创建一个提醒，该提醒将在每天 09:00 到 22:00（假设一小时一次或两小时一次）运行，直到我取消它。我在下面有一个代码，我在其中创建具有给定确切日期和给定 ID 的提醒。所以通过这种方式，我可以稍后使用定义的 id 取消提醒。

任何想法怎么做？

```
 public void setAlarm(Context context, Calendar calendar, int alarmId) {
        Intent intent = new Intent(context, AlarmReceiver.class);           
        PendingIntent sender = PendingIntent.getBroadcast(context, alarmId, intent, 0);
        // Get the AlarmManager service
        AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), sender);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:39:45.117

如果我正确理解您的问题，当您在 BroadcastReceiver 中收到警报时，请在一个小时后设置另一个警报，或者您想要的任何时间间隔。如果下一个闹钟将在 22:00 之后，则将其设置为第二天 09:00。重复警报不适用于您提出的建议，因此只需像您在给出的示例中那样使用 set 即可。

# command - Java jar-Archive 工具 - 为包含内容的文件夹设置路径

> ID：12872936
> 
> 赞同：0
> 
> 时间：2012-10-13T12:04:30.123
> 
> 标签：command, cmd, java, prompt

当我使用这个命令时：

`echo C:\Program Files\Java\jdk1.7.0_07\bin`

`jar -cf C:\file\file.jar C:\data\`

在 jar-Archive 工具的 CMD 中，它会在 .jar 中创建名为“file.jar”的 .jar `C:\file\`，但不会添加文件夹中的文件`C:\data`，而是使用文件夹创建存档`C: -> data -> files`（在本例中为 text.txt） . 如何设置包含内容的文件夹的路径？我只想要`C:\data\`存档文件夹中的文件。我怎样才能做到这一点？

谢谢，**数字克拉克**。

*顺便说一句：*没有JDK有没有办法做到这一点？还有其他工具吗？我不希望用户安装 JDK 只使用一个小程序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:00:56.897

这应该可行，也许您必须省略最后一个斜杠：

> jar -cf C:\file\file.jar C:\data

关于你的最后一个问题：[Java JDK .jar archive tool alternative](https://stackoverflow.com/questions/12873221/java-jdk-jar-archive-tool-alternative)

是的，您可以使用任何可以创建 zip 存档的程序。您可能必须将它们从 *.zip 重命名为 *.jar

# objective-c - Game-Center Real-Time-Multiplayer，Sandbox / Sync-State 的可靠性以及如何测试

> ID：12872939
> 
> 赞同：2
> 
> 时间：2012-10-13T12:05:31.343
> 
> 标签：objective-c, xcode, game-center, appstore-sandbox

Xcode 中的 Objective-C、Game-Center、应用程序开发

我的应用程序具有最多四个玩家的 Game-Center 多人游戏。最近，它获得了 Apple 的批准，可在 App-Store 上使用。

现在，一些玩家抱怨在玩多人游戏时不同步，所以游戏在每个玩家的设备上都不会以相同的状态显示。

可能，这似乎更常见于三四个玩家而不是只有两个玩家......在“真正的”游戏中心，我也经历过这种情况，并且在玩我的 Live-Version 时卡住了与随机对手的游戏我的应用程序。

好吧，即使我测试得很好，我还是开了一个新的 Dev-Branch 来开始开发新版本。一旦我在任何设备上安装了这个新分支，我就会再次在 Game-Center 的沙盒上进行身份验证和游戏。

所以 - 这引出了我的问题：我在沙盒上玩三四个设备，这种“不同步状态”从未发生过 - 我现在玩了很多游戏！并且：它更快、更流畅、几乎是实时的；在 Live-Version 中，我总是有同步时间和滞后，完整的体验不是那么快。但是 - 这不是问题 - 问题是沙盒和真正的游戏中心之间的巨大差异！

所以 - 我猜某处是我的代码中的不一致导致了这个错误。并且：我真的很想修复它，这样就不会再发生这种情况了。但是：如果我无法使用激活的调试日志来重现它，我应该如何修复它，因为一旦我激活它们，我就在有趣的沙箱中，一切都运行得更快、更顺畅并且永远不会得到不同步？

所以，详细我提出的问题：

*   是否有可能在 XCode 中激活调试日志，在设备上编译并与真正的 Game-Center 对战？
*   在 App-Store 上发布应用程序后，是否有人有类似的编写多人游戏代码的经历？
*   有没有人对我如何找到并捕获这个错误有不同的想法，这个错误必须在我的代码或逻辑中的某个地方？

# java - 从另一个班级召回一个班级

> ID：12872949
> 
> 赞同：0
> 
> 时间：2012-10-13T12:06:54.790
> 
> 标签：java, actionlistener

你好，我用 Java 做了一个骰子（非常简单），现在当我启动应用程序时，我得到一个非常漂亮的骰子，随机值在 1 到 6 之间，唯一不起作用的是我的按钮再次抛出（比如类不记得什么的），我希望有人能告诉我我做错了什么。您可以在下面找到我的 2 节课

throwbutton 动作类：

```
package h05Dobbelsteen;

import java.awt.event.*;
import javax.swing.*;

public class Worp extends JPanel implements ActionListener {

private JButton worp;

DobbelSteen dobbelsteen;

public Worp() {

    dobbelsteen = new DobbelSteen();
    worp = new JButton("Werp de dobbelsteen");
    worp.addActionListener(this);

    add(worp);

}

@Override
public void actionPerformed(ActionEvent e) {

    dobbelsteen.roll();

}

} 
```

我的模具类如下

```
package h05Dobbelsteen; 
```

导入 java.awt.*；

导入 javax.swing.JPanel；

公共类 DobbelSteen 扩展 JPanel {

```
private final static int SPOT_DIAMETER = 40; // diameter dobbelsteen rondjes
private int faceValue; // getoonde waarde op scherm

public DobbelSteen() {

    roll();

}

/*
 * roll de dobbelsteen
 */
public int roll() {

    int val = (int) (6*Math.random() + 1); // bepaal getal tussen 1 - 6
    setValue(val);
    return val;

}

/*
 * set de waarde van de roll
 */
public void setValue(int spots) {
    faceValue = spots;
    repaint();
}

/*
 * get de waarde van de roll
 */
public int getValue() {
    return faceValue;
}

/*
 * teken de view van de dobbelsteen
 */
public void paintComponent(Graphics g) {

    int w = getWidth();  // Get height and width
    int h = getHeight();

    // Graphics naar 2d
    Graphics2D g2 = (Graphics2D)g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);

    //... Paint background
    g2.setColor(Color.WHITE);
    g2.fillRect(0, 0, w, h);
    g2.setColor(Color.BLACK);

    g2.drawRect(0, 0, w-1, h-1);  // Draw border

    switch (faceValue) {
        case 1:
            drawSpot(g2, w/2, h/2);
            break;
        case 3:
            drawSpot(g2, w/2, h/2);

        case 2:
            drawSpot(g2, w/4, h/4);
            drawSpot(g2, 3*w/4, 3*h/4);
            break;
        case 5:
            drawSpot(g2, w/2, h/2);
        case 4:
            drawSpot(g2, w/4, h/4);
            drawSpot(g2, 3*w/4, 3*h/4);
            drawSpot(g2, 3*w/4, h/4);
            drawSpot(g2, w/4, 3*h/4);
            break;
        case 6:
            drawSpot(g2, w/4, h/4);
            drawSpot(g2, 3*w/4, 3*h/4);
            drawSpot(g2, 3*w/4, h/4);
            drawSpot(g2, w/4, 3*h/4);
            drawSpot(g2, w/4, h/2);
            drawSpot(g2, 3*w/4, h/2);
            break;
    }
}

/*
 * Teken de spots
 */
private void drawSpot(Graphics2D g2, int x, int y) {
    g2.fillOval(x-SPOT_DIAMETER/2, y-SPOT_DIAMETER/2, SPOT_DIAMETER, SPOT_DIAMETER);
} 
```

}

JFrame 类

```
package h05Dobbelsteen;

import java.awt.BorderLayout;
import java.awt.Color;

import javax.swing.*;

public class startDobbelsteen {

JFrame frame = null;

public startDobbelsteen() {

    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setBackground(Color.white);
    frame.setTitle("Dobbelsteen");
    frame.setBounds(200, 200, 450, 450);

    DobbelSteen dobbelsteen = new DobbelSteen();
    frame.add(dobbelsteen, BorderLayout.CENTER);

    Worp worp = new Worp();
    frame.add(worp, BorderLayout.SOUTH);

    frame.setVisible(true);

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:13:50.557

该程序不完整（没有 main 方法，没有 JFrame），但是您没有在该程序中*显示任何 DobbelSteen 实例。*由显示的按钮 ( ) 滚动的 DobbelSteen`worp`永远不会添加到任何面板，因此滚动它不会改变应用程序的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:41:46.397

```
 DobbelSteen dobbelsteen;

    public Worp(DobbelSteen ds) {

        dobbelsteen = ds;
        worp = new JButton("Werp de dobbelsteen");
       worp.addActionListener(this);

        add(worp);

    }

    @Override
    public void actionPerformed(ActionEvent e) {

        dobbelsteen.roll();

    }

    } 
```

你可以试试这个。在您的 JFrame 类构造函数中创建一个 DobbelSteen 并将其添加到容器中。然后做 Worp worp = new Worp(dobbelsteenNaam); 并将 worp 也添加到容器中。我不确定您的 repaint() 调用是否在正确的位置。

# data-binding - Windows Store 应用程序上的条件样式（或 Style.Triggers->DataTrigger 等效项）的最佳实践？

> ID：12872952
> 
> 赞同：4
> 
> 时间：2012-10-13T12:07:06.863
> 
> 标签：data-binding, mvvm, windows-8, windows-runtime, winrt-xaml

我已经用尽了 Internet 搜索，但似乎找不到根据数据绑定条件设置 Windows Store App XAML 元素样式的最佳实践？

`<Style.Triggers><DataTrigger>...</DataTrigger></Style.Triggers>`在 Windows 8 商店应用程序上似乎不可用，就像在 WPF 中一样，并且视觉状态管理器仅用于预设交互状态`MouseOver`，不是吗？如何根据我的底层视图模型显着改变我的 UI？

为了创建一个明确回答这个问题的场景，`<TextBlock />`根据数据绑定条件将例如从一种样式更改为另一种样式的最佳实践/最广泛接受的方法是什么？我说风格，因为我知道您可以使用转换器来处理颜色之类的东西，但是如果我的更改变得非常复杂怎么办？例如添加边框、字体大小和背景颜色？

我的第二种情况是我想根据视图模型条件替换标签，这也可能吗`Data`？`<Path />`基本上，我有一个“交叉”和“勾选”XAML 路径，并希望根据视图模型属性将它们换掉。

我也在尽可能地坚持 MVVM，所以我也不希望在我的代码中硬编码样式引用。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:01:31.957

这`VisualStateManager`就是你想要的。从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.visualstatemanager)：

> 管理状态和控制状态之间转换的逻辑。

我认为这足以涵盖您想要的内容。

来自同一链接的示例应该会给您一些想法：

```
<ControlTemplate TargetType="Button">
  <Grid >
    <VisualStateManager.VisualStateGroups>
      <VisualStateGroup x:Name="CommonStates">

        <VisualStateGroup.Transitions>

          <!--Take one half second to transition to the PointerOver state.-->
          <VisualTransition To="PointerOver" 
                              GeneratedDuration="0:0:0.5"/>
        </VisualStateGroup.Transitions>

        <VisualState x:Name="Normal" />

        <!--Change the SolidColorBrush, ButtonBrush, to red when the
            Pointer is over the button.-->
        <VisualState x:Name="PointerOver">
          <Storyboard>
            <ColorAnimation Storyboard.TargetName="ButtonBrush" 
                            Storyboard.TargetProperty="Color" To="Red" />
          </Storyboard>
        </VisualState>
      </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
    <Grid.Background>
      <SolidColorBrush x:Name="ButtonBrush" Color="Green"/>
    </Grid.Background>
  </Grid>
</ControlTemplate> 
```

请务必注意，您还可以更改`VisualStateManager`from 代码的状态。查看默认模板中的 LayoutAwarePage.cs 以获取此示例。

# c# - 使用泛型进行组合而不是继承

> ID：12872954
> 
> 赞同：1
> 
> 时间：2012-10-13T12:07:19.007
> 
> 标签：c#, design-patterns, generics, composition

假设我有两个接口`ISomeInterface`，`ISomeInterface<T>`并且`ISomeInterface<T>`继承自`ISomeInterface`.

现在如果我们必须类`Someclass`，`SomeClass<T>`我们如何实现组合而不是继承？哪个类应该有另一个类的实例？

```
public interface ISomeInterface
{
     string Name {get;}
}

public interface ISomeInterface<T> : ISomeInterface
{
     string ResultMessage{get;}
}

public class SomeClass : ISomeInterface
{
     public string Name
     {
          get{return this.GetType().Name;
     }
}
public class SomeClass<T> ISomeInterface<T>
{
     ISomeInterface _someclassinstance = new SomeClass;

     public string Name
     {
          get{return _someclassInstance.Name;
     }

     public string Caption
     {
          get{return "Demo Caption";}
     }
} 
```

这将不起作用，因为当我`Name`在类的通用版本的实例上调用属性时，它将返回`SomeInterface`非派生类名。

我想知道它是否是好的实现或非通用版本应该有与我到目前为止所做的相反的通用实例？

```
 public abstract class ViewModelBase : NotificationObject, IViewModel
{
    private IViewModel _parent;
    private string _title;
    private bool _isBusy;
    private bool _isDitry;

    #region Viewmodel Initialization steps

    /// <summary>
    /// Initializes a new instance of the <see cref="ViewModelBase"/> class.
    /// </summary>
    internal protected ViewModelBase()
    {
        ResolveDependencies();

        Load();
    }

    /// <summary>
    /// Exposes a way for external users to pass a boxed payload
    /// to this view model for initialization purposes.
    /// Inheritors can override this method to perform specific
    /// initialization and validation operations depending on the
    /// payload sent from the outside.
    /// </summary>
    /// <param name="payload">
    /// Represents the boxed payload the view model uses
    /// for initialization purposes.
    /// </param>
    public virtual void Initialize(object payload)
    {
    }

    /// <summary>
    /// Loads the view model.
    /// </summary>
    private void Load()
    {
        BeforeLoad();
        OnLoad();
    }

    /// <summary>
    /// Gives inheritors the opportunity to perform an operation before the view model loads.
    /// </summary>
    protected virtual void BeforeLoad()
    {
    }

    /// <summary>
    /// Gives inheritors the opportunity to perform specific operations when the view model loads for the first time.
    /// </summary>
    protected virtual void OnLoad()
    {
        SetupEvents();
    }

    /// <summary>
    /// Registers listeners for all events in which the ViewModel is interested in.
    /// </summary>
    protected virtual void SetupEvents()
    {

    }

    /// <summary>
    /// Resolves the dependencies for this view model.
    /// </summary>
    private void ResolveDependencies()
    {
        BeforeResolveDependencies();
        EventAggregator = ServiceLocator.Current.GetInstance<IEventAggregator>();
        OnResolveDependencies();
    }

    /// <summary>
    /// Gives inheritors the opportunity to perform an operation before the dependencies are resolved.
    /// </summary>
    protected virtual void BeforeResolveDependencies()
    {
    }

    /// <summary>
    /// Gives inheritors the opportunity to resolve dependencies of their own.
    /// </summary>
    protected virtual void OnResolveDependencies()
    {
    }

    /// <summary>
    /// Event handler that notifies the new children of the parent
    /// view model they live in and removes the parent when they are
    /// removed from the collection.
    /// </summary>
    /// <param name="sender">Child view model rising the event.</param>
    /// <param name="e">Changes made to the collection.</param>
    protected void ChildCollectionChangedHandler(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.NewItems != null)
        {
            foreach (var item in e.NewItems)
            {
                ((ViewModelBase)item).Parent = this;
            }
        }

        if (e.OldItems == null) return;
        foreach (var item in e.OldItems)
        {
            ((ViewModelBase)item).Parent = null;
        }
    }

    #endregion

    #region Members of IViewModel

    /// <summary>
    /// Gets the title.
    /// </summary>
    public string Title
    {
        get { return _title ?? (_title = GetType().Name); }
        protected set
        {
            _title = value;
            RaisePropertyChanged(() => Title);
        }
    }

    /// <summary>
    /// Gets or sets a value indicating whether the ViewModel is busy.
    /// </summary>
    /// <value><see langword="true"/> if the ViewModel is busy; otherwise, <see langword="false"/>.</value>
    public bool IsBusy
    {
        get { return _isBusy; }
        protected set
        {
            _isBusy = value;
            RaisePropertyChanged(() => IsBusy);
        }
    }

    /// <summary>
    /// Gets or sets a value indicating whether this instance is dirty.
    /// </summary>
    /// <value>
    ///   <c>true</c> if this instance is dirty; otherwise, <c>false</c>.
    /// </value>
    public bool IsDirty
    {
        get { return _isDitry; }
        set
        {
            _isBusy = value;
            RaisePropertyChanged(() => IsDirty);
        }
    }

    /// <summary>
    /// Gets or sets the view for which this instance is set as DataContext.
    /// </summary>
    /// <value>
    /// The view.
    /// </value>
    public IView View { get; set; }

    /// <summary>
    /// Gets the parent ViewModel holding this instance as
    /// childe ViewModel collection item.
    /// </summary>
    public IViewModel Parent
    {
        get { return _parent; }
        set
        {
            _parent = value;
            RaisePropertyChanged(() => Parent);
        }
    }

    #endregion

    /// <summary>
    /// Get CurrentInstance of EventAggregator
    /// </summary>
    private IEventAggregator EventAggregator { get; set; }

    /// <summary>
    /// Gets the dispatcher.  Works at run-time and test-time.
    /// </summary>
    /// <value>The dispatcher.</value>
    protected static Dispatcher Dispatcher
    {
        get { return Application.Current != null ? Application.Current.Dispatcher : Dispatcher.CurrentDispatcher; }
    }

    /// <summary>
    /// Resolves this instance for specific type.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <returns></returns>
    protected static T Resolve<T>()
    {
        try
        {
            return ServiceLocator.Current.GetInstance<T>();
        }
        catch (Exception)
        {
            return default(T);
        }
    }

    /// <summary>
    /// Resolves all instances of specific type.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <returns></returns>
    protected static IEnumerable<T> ResolveAll<T>()
    {
        return ServiceLocator.Current.GetAllInstances<T>();
    }

    /// <summary>
    /// Registers for specific event inside system event providing some filter parameters.
    /// </summary>
    /// <typeparam name="TEvent">The type of the event.</typeparam>
    /// <param name="onEvent">The on event.</param>
    /// <param name="filter">The filter.</param>
    protected void RegisterForEvent<TEvent>(Action<TEvent> onEvent, Predicate<TEvent> filter = null) where TEvent : class
    {
        EventAggregator.Subscribe<TEvent>(onEvent, ThreadOption.PublisherThread, false, filter);
    }

    /// <summary>
    /// Broadcasts the specified event object.
    /// </summary>
    /// <typeparam name="TEvent">The type of the event.</typeparam>
    /// <param name="eventObject">The event object.</param>
    protected void Broadcast<TEvent>(TEvent eventObject) where TEvent : class
    {
        EventAggregator.Publish(eventObject);
    }
} 
```

这是 IViewModel 基类的完整实现和

```
 public abstract class ViewModelBase<TValidator> : ViewModelBase,IViewModel<TValidator>, IDataErrorInfo
    where TValidator : IValidator, new()
{
    private bool _islValid;
    readonly IValidator _validator = new TValidator();

    /// <summary>
    /// Get Validation processor for ViewmodelInstance 
    /// </summary>
    /// <value>
    /// The Validator.
    /// </value>
    public TValidator Validator
    {
        get { return (TValidator) _validator; }
    }

    public bool IsValid
    {
        get
        {
            _islValid = SelfValidate().IsValid;
            return _islValid;
        }
        private set
        {
            _islValid = value;                
            RaisePropertyChanged(() => IsValid);
        }
    }
// Implementation for validation
} 
```

在这里，我发布了这两个类的源代码。并且有 N 个不同的接口和类，它们都需要从这些类的通用或非通用版本派生。IViewmodel 中可用的放置属性应该在每个派生类上都可用，并且还需要保留受保护的方法和属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:20:21.870

关于组成，泛型版本需要使用非泛型版本。

你不能走相反的路，因为类的泛型版本是强类型的，这意味着它比非泛型版本包含更多的编译时间细节。没有办法将所需类型从非泛型类传递给内部泛型类。

至于`Name`属性，它实际上完全按照它应该做的，返回类型`Name`的。`SomeClass`

**编辑：**

如果您需要一种方法来始终返回当前类型的名称，那么有很多方法可以解决这个问题。您可以为此创建一个普通或通用的辅助方法，或者例如，您可以为该`ISomeInterface`类型创建一个扩展方法并使用它而不是`Name`属性：

```
public static class SomeInterfaceExtensions
{
    // Extension
    public static string GetName(this ISomeInterface some)
    {
        return some.GetType().Name;
    }
}

// Usage
var some = new SomeClass<int>();
var name = some.GetName(); 
```

但是您将实现的只是创建一个到 的快捷方式`GetType().Name`，因为所有类型都已经有了这些。

我在这个解决方案中看不到太多价值，至少在给定的带有类型名称的示例中。

此外，这与泛型与非泛型或提到的所有其他内容无关。

# cocos2d-iphone - CCSequence 在单独定义时不起作用

> ID：12872958
> 
> 赞同：1
> 
> 时间：2012-10-13T12:07:46.293
> 
> 标签：cocos2d-iphone, cocos2d-x

在cocos2d-x中，我在尝试单独定义一个CCSequence时遇到了如下问题，即不在runAction内。

这有效：

```
sprWheel1->runAction(   CCSequence::actions(
    CCDelayTime::actionWithDuration( fDelayTime ),
    CCEaseExponentialOut::actionWithAction( 
        CCRotateBy::actionWithDuration( fMoveTime, fAngle ) ),
    NULL
) );
sprWheel2->runAction(   CCSequence::actions(
    CCDelayTime::actionWithDuration( fDelayTime ),
    CCEaseExponentialOut::actionWithAction( 
        CCRotateBy::actionWithDuration( fMoveTime, fAngle ) ),
    NULL
) ); 
```

这不起作用：

```
CCFiniteTimeAction* actRotate = CCSequence::actions(
    CCDelayTime::actionWithDuration( fDelayTime ),
    CCEaseExponentialOut::actionWithAction( 
        CCRotateBy::actionWithDuration( fMoveTime, fAngle ) ),
    NULL
);

sprWheel1->runAction( actRotate );
sprWheel2->runAction( actRotate ); 
```

它不会导致编译器错误、崩溃或任何事情，它只是不会旋转精灵。

我怎样才能解决这个问题？（我多次使用此操作，因此如果我只能定义一次，这将有助于保持我的代码更清晰）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T13:51:38.853

不应在多个对象上同时使用 CCAction 的单个实例。序列中包含的对象在当前执行动作时保持状态，因此在多个对象上同时使用会导致混乱（cocos 可能通过停止所有动作来默默地“保护”，但不确定）。最好为每个要制作动画的精灵设置单独的序列。如果您担心代码可读性，只需在该类中创建一个始终返回序列的新实例的方法。

# java - 从文件夹将 Maven 依赖项添加到本地存储库

> ID：12872960
> 
> 赞同：0
> 
> 时间：2012-10-13T12:08:05.990
> 
> 标签：java, maven

我有一个文件夹，其中包含我从 Maven 存储库中提取的库，并且需要能够将它们加载到我的本地存储库中。因为它们是使用 dependency:copy-dependencies 目标从 Maven 中提取的，所以它们都有自己的工件和版本号作为文件名的一部分。其中大多数是专有库，因此我不能只从全局存储库中再次获取它们。

有任何想法吗？

爱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:12:13.930

您是在问如何将它们安装在本地存储库中，或者如何使它们可用于项目中的 maven？如果前者只是查看 mvn install:install:file 的文档，如果后者我写了一篇关于打包项目本地 maven 依赖项的方式的博客文章[http://codeghost.co.uk/blog/2012/8/15/环境不可知论非公共 maven 库references.html](http://codeghost.co.uk/blog/2012/8/15/environment-agnostic-non-public-maven-library-references.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T16:05:39.023

最好的办法是安装[存储库管理器](http://maven.apache.org/repository-management.html)并将此类库安装到存储库管理器中。之后，您可以将它们用作通常的依赖项。

# jsp - jstl - el - 从地图中读取元素

> ID：12872965
> 
> 赞同：1
> 
> 时间：2012-10-13T12:08:35.030
> 
> 标签：jsp, jstl, tomcat7, el, servlet-3.0

**更新**：代码现在与重现错误的说明一起在[github](https://github.com/Utumno/ted2012/blob/GitHub2/WebContent/WEB-INF/jsp/include/error_begin.jsp)中（在`README.md`>*重现 jstl - el - 从 map 中读取元素的说明中*）。有关我的 jsp 文件格式的信息，请参阅我的[另一个问题](https://stackoverflow.com/questions/12662172/page-pageencoding-utf-8-ignored-when-included-from-another-jsp)。我还没有弄清楚这一点

这有效：

```
<%
    HttpSession ses = (HttpSession)  request.getSession(false);
    if(ses != null) {
        HashMap<String, String> m = (HashMap<String, String>) ses.getAttribute("messages");
        if(m != null) { %>
            <%=m.get(request.getParameter("r")) %>
    <%}
    }
%> 
```

这不会：

```
<c:set var="key" value="${param.r}"/>
<c:out value="${key}" /> <!-- does print what I expect -->
<%-- ${sessionScope.messages} prints nothing --%>
sess scope : ${sessionScope} <%-- prints sess scope : {}  --%>
<c:out value="${sessionScope.messages[key]}" /> <!-- nothing !? --> 
```

为什么 ？

***jstl-1.2.1 - 也尝试使用 1.2***

相关的[jsp](https://github.com/Utumno/ted2012/blob/GitHub2/WebContent/WEB-INF/jsp/include/error_begin.jsp)（error_begin.jsp - 由仅包含关闭的[error_end.jsp](https://github.com/Utumno/ted2012/blob/GitHub2/WebContent/WEB-INF/jsp/include/error_end.jsp)`}`补充）：

```
<%@ page language="java" pageEncoding="UTF-8"%><!-- noway to include this ONCE -->
<%@page import="java.util.HashMap"%>
<% if(request.getAttribute("ErrorString") != null){ %>
Υπήρξε λάθος : ${requestScope.ErrorString}
<%} else { %>
<c:if test="${param.r != null}">
    <div class="success" align="center">
        <%
        HttpSession ses = (HttpSession)  request.getSession(false);
        if(ses != null){
            HashMap<String, String> m = (HashMap<String, String>) ses.getAttribute("messages");
            if(m != null){ %>
        <%=m.get(request.getParameter("r")) %>
        <%}
        }
     %><c:set var="key" value="${param.r}"></c:set>
<%--        <c:out value="${key}" /> --%>
<%--        ${sessionScope.messages[key]} --%>
<%--        ${sessionScope.messages} prints nothing --%>
        sess scope : ${sessionScope} <%-- prints {} --%>
<%--        <c:out value="${sessionScope.messages[key]}" /> --%>
<%--        <c:out value=" ${messages[param.r]}" /> --%>
    </div>
</c:if>
<c:forEach items="${messages}" var="entry">
    Key = ${entry.key}, value = ${entry.value}<br>
</c:forEach> 
```

[Web.xml](https://github.com/Utumno/ted2012/blob/GitHub2/WebContent/WEB-INF/web.xml)的相关部分：

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
version="3.0"> 
```

[WEB-INF/库](https://github.com/Utumno/ted2012/tree/GitHub2/WebContent/WEB-INF/lib)：

```
javax.servlet.jsp.jstl-1.2.1.jar
javax.servlet.jsp.jstl-api-1.2.1.jar
joda-time-2.1-javadoc.jar
joda-time-2.1.jar
logback-classic-1.0.7.jar
logback-core-1.0.7.jar
mail.jar
mysql-connector-java-5.1.22-bin.jar
slf4j-api-1.7.2-javadoc.jar
slf4j-api-1.7.2-sources.jar
slf4j-api-1.7.2.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:56:33.553

您应该`<%@ page session="true" %>`在 JSP 页面中包含指令。

JSP 中页面指令的会话属性默认为 true，但在站点的全局位置可能已设置为 false。

如果 session 属性的值为 true，那么 session 对象指的是当前或新的 session，因为客户端必须在 HTTP session 中才能在服务器上运行 JSP 页面。如果您将会话对象的值设置为 false，那么您将无法在 JSP 页面中使用范围为“会话”的会话对象或元素。

看：

[http://www.roseindia.net/jsp/SessionAttribute.shtml](http://www.roseindia.net/jsp/SessionAttribute.shtml)

[http://www.tutorialspoint.com/jsp/page_directive.htm](http://www.tutorialspoint.com/jsp/page_directive.htm)

[为什么要设置 JSP 页面 session="false" 指令？](https://stackoverflow.com/questions/5515729/why-set-a-jsp-page-session-false-directive)

[使用 Spring MVC 的 JSP EL 中的会话属性问题](https://stackoverflow.com/questions/4730790/problem-with-session-attributes-in-jsp-el-using-spring-mvc/4731177#4731177)

**更新：**

并且来自 JSP 2.2 规范：

**页面指​​令 - 会话属性：**

> 指示页面需要参与 (HTTP) 会话。
> 
> 如果为 true，则名为 session 的 javax.servlet.http.HttpSession 类型的隐式脚本语言变量将引用页面的当前/新会话。
> 
> 如果为 false，则页面不参与会话；session 隐式变量不可用，在 JSP 页面正文中对其的任何引用都是非法的，将导致致命的翻译错误。
> 
> 默认为真。

# c# - 如何修复脏属性的设计？它失败，因为 int 必须是引用类型

> ID：12872968
> 
> 赞同：0
> 
> 时间：2012-10-13T12:09:08.623
> 
> 标签：c#

我希望将班级中的各个属性标记为脏。

我在这里遇到了一种将整个类标记为脏的[方法](https://stackoverflow.com/questions/805505/c-sharp-marking-class-property-as-dirty)。这可以简化为。

```
class DirtyClass
{
    private string bar;
    private int foo;

    public string Bar
    {
        get { return bar; }
        set { SetProperty(ref bar, value); }
    }

    public int Foo
    {
        get { return foo; }
        set { SetProperty(ref foo, value); }
    }

    public bool IsDirty { get; private set; }

    protected void SetProperty<T>(ref T field, T value)
    {
        if (!EqualityComparer<T>.Default.Equals(field, value))
        {
            field = value;
            IsDirty = true;
        }
    }
} 
```

我尝试使用此代码作为创建 DirtyProperty 类的指南

```
class DirtyProperty<T> where T : class
{
    private bool isDirty = true;
    private T property;

    public bool GetIsDirty()
    {
        bool b = isDirty;

        // Reset dirty flag
        isDirty = false;

        return b;
    }

    public T GetValue()
    {
        return property;
    }

    public void SetValue(ref T value)
    {
        if (!EqualityComparer<T>.Default.Equals(property, value))
        {
            property = value;
            isDirty = true;
        }
    }
} 
```

脏标志在 GetIsDirty 方法中被标记为 false，因为它每帧只调用一次，并且不会被包含 DirtyProperty 类的类之外的其他类调用。是否有更好的方法将 isDirty 标记为 false 以处理对该函数的多次调用？

问题是，如果我使用非引用类型（例如 int），那么这种方法就会失败。

```
class ClassWithDirtyProperties
{
    public DirtyProperty<string> Bar;
    public DirtyProperty<int> Foo;
} 
```

如何改进我的方法并解决此问题？

我希望如何使用上述类的示例

```
 var c = new ClassWithDirtyProperties();
        c.Foo.SetValue(21); 
```

……

```
 if (c.Foo.GetIsDirty())
        {
            // Update parameter
            SetParameter(c.Foo.GetValue());
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:26:06.137

```
class DirtyProperty<T> where T : class 
```

这一行说 T 应该是一个引用类型。如果您想允许 int 作为模板，请删除 where 部分。所以只说

```
class DirtyProperty<T> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:36:56.217

你明白什么是行

```
where T : class 
```

在你的代码中呢？

这是一个泛型类型约束，表示 T 应该是类类型，即引用类型。

如果您希望 T 为任何类型，请删除该行。

# php - 我如何在没有错误的情况下编写这一行？

> ID：12872971
> 
> 赞同：-1
> 
> 时间：2012-10-13T12:09:25.620
> 
> 标签：php

我的代码必须是：

```
$name = 'Pete';
$name2 = 'Jones';
$data = "$x['$name'] = '$name2';"; 
```

$x 不应更改为 $x 的值，而应保持为 $x。$name, 必须更改为 Pete，$name2 必须更改为 Jones。如何在没有错误的情况下编写 $data 行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:12:50.250

逃脱`$`：

```
$data = "\$x['$name'] = '$name2'"; 
```

请参阅[http://php.net/manual/en/language.types.string.php#language.types.string.parsing](http://php.net/manual/en/language.types.string.php#language.types.string.parsing)。

# events - 获取我的文档父共享点文件夹

> ID：12872973
> 
> 赞同：0
> 
> 时间：2012-10-13T12:09:54.160
> 
> 标签：events, sharepoint, event-handling, directory, document

我有一个包含文档和文件夹的共享点文档库（作为新的内容类型引入），并且我在文档上添加了一个事件接收器，仅添加到我的文件夹中，以便检索我新添加的文档的父文件夹，我尝试以这种方式编写但它似乎效果不佳：

```
public override void ItemAdded(SPItemEventProperties properties)
{
    base.ItemAdded(properties);

    //getting the item (document) newly added to my content type folder
    SPListItem myItem = properties.ListItem;
    //getting the folder containing my doc
    SPFolder myFolder = myItem.File.ParentFolder;
    //other code on my SPFolder
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:48:21.480

我使用自定义扩展方法：

```
SPFolder myFolder = myItem.GetParentFolder();
// TODO Test myFolder for null, because it could happen in edge cases 
```

实施如下：

```
public static SPFolder GetParentFolder(this SPListItem spListItem) 
{
    SPFolder parentFolder = null;
    // Try to get it from folder
    if (spListItem.Folder != null)
    {
        parentFolder = spListItem.Folder.ParentFolder;
    }
    // Try to get it from file
    else if (spListItem.File != null)
    {
        parentFolder = spListItem.File.ParentFolder;
    }
    // At last get file - it is more time/resource consuming
    else
    {
        SPFile spFile = spListItem.Web.GetFile(spListItem.Url);
        if (spFile != null)
            parentFolder = spFile.ParentFolder;
    }
    // Can be null
    return parentFolder;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T09:39:47.417

sharepoint.stackexchange 的这个片段帮助了我：

```
SPFile file = properties.ListItem.Web.GetFile(properties.ListItem.Url);
SPFolder fileFolder = file.ParentFolder; 
```

[https://sharepoint.stackexchange.com/questions/7090/get- contains-folder-list-for-spfile-item](https://sharepoint.stackexchange.com/questions/7090/get-containing-folder-list-for-spfile-item)

# asp.net-mvc-3 - 如何使用 MVVM observable 使用 Kendo UI 自动完成模板

> ID：12872974
> 
> 赞同：0
> 
> 时间：2012-10-13T12:09:56.383
> 
> 标签：asp.net-mvc-3, mvvm, kendo-ui

我是 Kendo UI 的新手，仍然学到了很多东西。我的要求是创建一个多列自动完成下拉列表。我使用带有模板的 Kendo UI 自动完成文本框按照以下链接进行操作。 [http://demos.kendoui.c​​om/web/autocomplete/template.html](http://demos.kendoui.com/web/autocomplete/template.html)。

但是，我找不到使用自动完成模板的示例。

> kendo.observable。

我使用 MVVM observable 将数据绑定到输入框，如下所示。

```
 <div id="form-container">
    <h2>
        Advisors</h2>
    Select Advisor:
    <div class="autocomplete">
        <input id="div-template" data-role="autocomplete" data-text-field="AdvisorName" data-filter="contains" data-bind="source: advisorsSource, value: selectedAdvisor" />
    </div>
 </div>

<script type="text/javascript">

 $(document).ready(function () {

    var viewModel = kendo.observable({
        advisorsSource: new kendo.data.DataSource({
            minLength: 2,
            template: '<tr>' +
                    '<td>${ AdvisorCode }</dt><td>${ AdvisorName }</td><td>${ Organisation }</td>' +
                  '</tr>',
            transport: {
                type: "json",
                serverFiltering: true,
                read: "Home/Advisors",
                parameterMap: function(options, operation) {
                    if (operation !== "read" && options.models) {
                        return {
                            models: kendo.stringify(options.models)
                        };
                    }
                    return {
                        prefix: options.filter.filters[0].value
                    }; 
                }
            },
            schema: {
                model: { id: "AdvisorCode" }
            }               
        })
    });

    kendo.bind($("#form-container"), viewModel);
})

</script> 
```

HomeController 具有返回 Json 的 Action，如下所示：

```
 public JsonResult Advisors(string prefix)      
 {
       var list = new List<Advisor>()
       {
              new Advisor { AdvisorCode = 002, AdvisorName = "Alex" , Organisation = "Blue Co"},
              new Advisor { AdvisorCode = 003, AdvisorName = "Foo" , Organisation = "Yellow Co"},
              new Advisor { AdvisorCode = 004, AdvisorName = "Smith", Organisation = "Green Co" },
              new Advisor { AdvisorCode = 005, AdvisorName = "David", Organisation = "Yellow Co" },
              new Advisor { AdvisorCode = 006, AdvisorName = "Alex" , Organisation = "Blue Co"},   
        };

        return Json(list, JsonRequestBehavior.AllowGet);
   } 
```

自动完成工作正常。但是它只显示 AdvisorName。我的模板似乎没有按预期工作。

我需要在下拉列表中显示多列（AdvisorCode | AdvisorName | Organisation），并且搜索应该基于这些列中的任何一个（而不仅仅是 AdvisorName）。

谁能指出我如何使用模板的正确方向，以便我可以显示多列？

谢谢，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:53:58.557

得到它的工作！一旦我将模板属性移动到输入字段，它就可以工作了。例如，请参见下文。

```
 <input id="advisorautocomp" data-role="autocomplete" 
 data-text-field="Name" data-filter="contains"
        data-bind="source: advisorsSource, value: selectedAdvisor" 
        data-template="template" /> 
```

注意：data-template="模板"

并且模板可以定义如下（仅作为示例）。

```
 <script id="template" type="text/x-kendo-template">      
      <tr><td>${ data.Code }</td><td>${ data.Name }</td></tr>      
 </script> 
```

我不确定为什么 javascript 模板属性不适用于 kendo.observable，但在这个阶段，上述解决方案对我有用。[我在Kendo UI 论坛上](http://www.kendoui.com/forums/ui/autocomplete/how-to-use-the-templates-for-kendo-ui-autocomplete-using-mvvm-observable.aspx)发布了同样的问题，希望他们能给出完整的答案。

# c++ - 物理向量表示

> ID：12872981
> 
> 赞同：1
> 
> 时间：2012-10-13T12:10:38.627
> 
> 标签：c++, data-structures

我有 (x,y,z) 和方向的 3d 两个物理向量。我想对它们做一些操作。但我有一些问题：

*   我应该如何在 c++ 中表示这个向量？换句话说，我写了下面的课，但我不知道如何在里面表示方向？

    ```
     class vector_ {
          float x,y,z ;
     } 
    ```

*   如何计算两个向量的加法？ ![图片](../Images/f4dc9db2b240bd371f790cb598d34133.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:34:53.120

据我所知，我在学生时代的数学 - 向量方向只是其值的标志：

对于一维情况，这两个一维向量具有相同的值但方向相反：

```
{11.21}  {-11.21} 
```

对于 2D 向量，您有 2 个方向 - 这 4 个向量具有不同的方向：

```
{1,2} {-1,2} {1,-2} {-1,-2} 
```

而对于 3D 向量有 3 个不同的方向，所以我会使用简单的`std::array<float,3>`：

```
typedef std::array<float,3> Vector3D; 
```

请参阅[http://en.cppreference.com/w/cpp/container/array](http://en.cppreference.com/w/cpp/container/array)：

或使用 std::tuple [http://en.cppreference.com/w/cpp/utility/tuple](http://en.cppreference.com/w/cpp/utility/tuple)：

```
typedef std::tuple<float,float,float> Vector3D; 
```

添加使用`std::transform` [http://en.cppreference.com/w/cpp/algorithm/transform](http://en.cppreference.com/w/cpp/algorithm/transform)：

```
inline Vector3D operator + (const Vector3D& a, const Vector3D& b)
{
   Vector3D c;
   std::transform(a.begin(), a.end(), b.begin(), c.begin(), 
               [](float a, float b){return a + b;});
   return c;
} 
```

对于您的示例，请参见[ideone 示例](http://ideone.com/gqThD)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:29:42.823

您应该为 3D 矢量类提供一些东西：

1.  默认构造
2.  从组件构建
3.  访问单个组件（也可能在非笛卡尔表示中）
4.  向量-向量加减法
5.  标量乘法或“缩放”
6.  向量-向量标量或[点积](http://en.wikipedia.org/wiki/Dot_product)
7.  vector-vector 向量或[叉积](http://en.wikipedia.org/wiki/Cross_product)
8.  “大小”或“长度”

第 6 项允许您获得两个向量之间的角度，这可能会为您提供您在问题中提到的“方向”。习惯上提供加法、减法、乘法和除法作为非成员运算符`+, -, *`和`/`。但是，在向量的情况下，至少有两个常用的乘法运算（第 6 项和第 7 项）是不同的，并且具有不同的返回值。所以它们通常作为非成员函数提供。通常还提供上述某些操作的“增量”版本 ( `+=`，`-=`以及`*=`用于标量乘法。因此，您的向量类可能看起来像这样：

```
namespace geom 
{  //
class Vector3D
{
public:
  Vector3D() : x(0),y(0),z(0) {}
  Vector3D(float x,float y, float z) : x_(x), y_(y), z_(z) {}
  float x() { return x_; } // similarly for y() and z()
  Vector3D& operator +=(const Vector3D& rhs)
  {
    x_ += rhs.x_;
    y_ += rhs.y_;
    z_ += rhs.z_;
    return *this;

  }
  Vector3D& operator -=(const Vector3D& rhs)
  {
    // similar to above
  }
  template <typename Scalar>
  Vector3D& operator *=(const Scalar& scalar)
  {
    x_ *+ scalar;
    // similar for y_ and z_
    return *this;
  }
private:
 float x_, y_, z_:
}; 
```

以及您的一些非成员函数：

```
namespace geom 
{
Vector3D operator + (const Vector3D& lhs, const Vector3D& rhs)
{
  return Vector3D( lhs.x() + rhs.x(), lhs.y() + rhs.y(), lhs.z() + rhs.z() );

}
// similarly for operator -

template <typename Scalar>
Vector3D operator*(const Scalar& scalar, const Vector3D& vect)
{
  return Vector(scalar*vect.x(), scalar*vect.y(), scalar*vect.z());
}

template <typename Scalar>
Vector3D operator*(const Vector3D& vect, const Scalar& scalar)
{
  return scalar*vect;
}

float dot(const Vector3D& lhs, const Vector3D& rhs) { /* implement dot product */ }

Vector3D cross(const Vector3D& lhs, const Vector3D& rhs) { /* implement cross product */ }
} // namespace geom 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T12:13:58.107

您可以尝试使用在线找到的示例 C++ 几何矢量类，它具有创建和修改矢量以及对其执行各种操作所需的所有必要功能。[http://www.softsurfer.com/Archive/algorithm_0301/algorithm_0301.htm](http://www.softsurfer.com/Archive/algorithm_0301/algorithm_0301.htm)

这是一个非常强大的库，可以在 C++ 中执行几何运算[http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Introduction/Chapter_main.html](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Introduction/Chapter_main.html)

或者，您可以尝试使用构造函数来定义向量并编写函数来计算其从原点和所有角度的角度。请记住，向量的所有常数都是正交的，因此您可以仅使用这 3 个值找到所有属性，例如方向、大小。

```
class vector{
 float x, y, z;
 public:
 vactor(float x, float y, float z){
  this->x = x;
  this->y = y;
  this->z = z;

 }

 static float angleToOrigin(vector v){
  // calculate angle to origin
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T12:39:16.197

尝试创建一个 Vector 类，例如

```
class Vector
{
  float x,y,z ;
  Vector():x(0),y(0),z(0){}
  Vector(float x_,float y_, float z_):x(x_),y(y_),z(z_){}
  Vector(const Vector& copyfrom)
  {
    this->x=copyfrom.x;this->y=copyfrom.y;this->z=copyfrom.z;
  }
  friend Vector operator+ <> (const Vector& a,const Vector& b)
  {
    Vector temp;
    temp.x=a.x+b.x;temp.y=a.y+b.y;temp.z=a.z+b.z;
    return temp;
 }
} 
```

一旦覆盖了等号运算符，就可以编写 Vector a(1,1,1) and Vector b(2,2,2) and Vector c=a+b;

# mysql - MySql AES_ENCRYPT 256 加密

> ID：12872982
> 
> 赞同：4
> 
> 时间：2012-10-13T12:11:02.677
> 
> 标签：mysql, phpmyadmin

我想使用 mysql AES_ENCRYPT 和 256 位加密，但不知道如何配置 mysql，任何人都可以帮助我使用 AES 256，我正在使用 xampp。

# php - 用户提取 php 文件的路径

> ID：12872984
> 
> 赞同：3
> 
> 时间：2012-10-13T12:11:17.373
> 
> 标签：php

如果用户将我的 php 应用程序的文件提取到 example `http://example.com/test/webapp/`，我的应用程序中的绝对链接将不再起作用。

如何获取将`/test/webapp/`其添加到我的绝对链接的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:18:26.870

您可以使用：

```
dirname( $_SERVER["SCRIPT_NAME"] ); 
```

确保您的链接在您的页面中始终是**相对**的，因此当您将网站移动到另一个域时，它们仍然有效。

通过执行检查所有其他`$_SERVER`变量`phpinfo()`。

对于重定向，您可以使用：

```
header('Location: https://' . $_SERVER['SERVER_NAME'] . dirname($_SERVER['SCRIPT_NAME']) . '/some_page.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:18:04.657

我认为您需要`$_SERVER['REQUEST_URI']`，但这不是一个完整的解决方案。它为您提供了相对路径，但不能保证您可以添加它。`/documents`和`/documents/index.php`, 可能都指向同一个脚本，但不能同时用于添加相对路径。我认为最好将其设置为用户可以配置的设置。

# android - 在接收者调用后，意图调用不止一次

> ID：12872986
> 
> 赞同：2
> 
> 时间：2012-10-13T12:11:43.033
> 
> 标签：android, android-intent, broadcastreceiver

我正在构建一个警报应用程序。当警报启动意图时，接收器会在“魔术”发生的地方启动。不知何故，`onReceive()`广播接收器内部的方法被多次调用。

任何想法为什么会发生？

**编辑：**

仅当屏幕关闭时才调用一次以上，如果屏幕打开则不会发生。当屏幕关闭时，我调用此代码将其打开：

```
KeyguardManager km = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);
KeyguardManager.KeyguardLock kl = km.newKeyguardLock("MyKeyguardLock");
kl.disableKeyguard();

WakeLock wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK | 
                                   PowerManager.ACQUIRE_CAUSES_WAKEUP | 
                                   PowerManager.ON_AFTER_RELEASE, "MyWakeLock");
wakeLock.acquire(); 
```

我究竟做错了什么？在`AndroidManifest.xml`我使用此代码注册广播接收器：

```
<receiver android:name="com.xxx.xxx.myAlarmReceiver" >
     <intent-filter>
          <action android:name="REFRESH_THIS" />
     </intent-filter>   
</receiver> 
```

我不确定`REFRESH_THIS`. 但是，如果我改变它，接收器仍然会被调用不止一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T21:39:55.720

我最近正在调试一个具有相同行为的应用程序。当设备打开并且处理意图的服务在后台时，它仍然会积累消息。

**您可能需要注意的一些潜在问题**：

*   如果您将警报用作间隔计时器（通过 或一些不太出色的串行方法），则计时器可以在 [应用程序/服务] 未运行时（即设备关闭时 -[请参阅文档](http://developer.android.com/reference/android/app/AlarmManager.html)）[`setRepeating()`](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)关闭几次. 结果是多个消息在处理程序中排队，当应用程序回到前台时，处理程序将通过队列运行 - 将消耗多个警报意图。

*   您正在使用一个扩展[`Service`](http://developer.android.com/guide/components/services.html#ExtendingService)来接收意图的类，并且您使用`START_REDELIVER_INTENT`. 当服务处于后台任务中时：它已成功部分执行并被中断暂停。重新启动时，意图被重新传递并第二次处理。

*   [`recycle()`](http://developer.android.com/reference/android/os/Message.html#recycle%28%29)您的消息 - 或者只是扩展[`IntentService`](http://developer.android.com/guide/components/services.html#ExtendingIntentService)。

**要调试，您可能需要**：

*   为每个意图（通过[`addExtra(String, int)`](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20int%29)）添加一个递增的额外内容，以查看一个意图是否被多次交付，*或者*多个意图同时被使用。

您还应该在问题中包含来自接收者的代码。

这就是我所拥有的。

# iphone - 无法在 UITableViewCell 中更新 UI 对象的框架

> ID：12872987
> 
> 赞同：5
> 
> 时间：2012-10-13T12:12:05.890
> 
> 标签：iphone, objective-c, uitableview

我有一个子类 UITableViewCell。

我需要动态更改 UILabel 的框架。

这是我所做的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"messageCell";
    MessageCell *cell = (MessageCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    cell.Content.Text = @"Content!";
    [cell.Content setFrame:CGRectMake(0, 0, 10, 10)];
} 
```

UILabel 的文本确实发生了变化，因此这不是 IBOutlet 问题。然而，该框架保持与 IB 中定义的相同。

我以前做过这样的事情，所以我不确定这里出了什么问题......

谢谢你的帮助。

**编辑：**

我用

```
[self.tableView registerNib:[UINib nibWithNibName:@"MessageCell" bundle:nil]
     forCellReuseIdentifier:@"MessageCell"]; 
```

在 viewDidLoad

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T14:26:42.033

好吧，在发布赏金几天后，我找到了答案，我希望有一天这会对某人有所帮助......

我不是 100% 确定为什么，但我试图做的事情根本无法完成：

**如果您通过 Interface Builder 放置对象，则无法更改对象的框架。**

为了做出我想做的改变，我只是在我的子类中以编程方式创建了这些对象，在“initWithCoder”中。

```
content = [[UILabel alloc] initWithFrame:CGRectMake(120, 100, 200, 50)];
content.opaque = NO;
content.numberOfLines = 0;
[self.contentView addSubview:content]; 
```

然后我可以更改“-（void）layoutSubviews”中的框架（但基本上是我想要的任何地方）

```
- (void)layoutSubviews
{
    [super layoutSubviews];
    [cell.Content setFrame:CGRectMake(0, 0, 10, 10)];

    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T12:36:15.227

那里一定有什么问题。

尝试，***只是*** ***为了测试***实现这一点：

```
tableView:willDisplayCell:forRowAtIndexPath: 
```

像

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell    forRowAtIndexPath:(NSIndexPath *)indexPath
{
    MessageCell* aCell = (MessageCell*)cell;
    aCell.Content.Text = @"Content!";
    [aCell.Content setFrame:CGRectMake(0, 0, 10, 10)];
} 
```

结果是什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-10T09:39:21.300

如果 Autolayout 开启，您将无法编辑通过 xib 创建的 UI 对象的框架。有两种方法可以做到这一点：

1.  禁用该 xib 的自动布局。

或者

2.  为特定的 NSlayout 约束创建一个 IBOutlet 并相应地附加它并通过代码更新其常量属性值，并且不要忘记在实现 constarint 的对象上适当地调用layOutIfNeeded 或根据实现的superview。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T13:43:10.307

添加一个子视图`cell.Content`并调整该子视图的大小，而不是内容本身。单元格将始终被拉伸以适合您的表格视图，因此您无法将其变小。
（当然要使单元格高度更小，只需应用`tableView:heightForRowAtIndexPath:`）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T13:56:26.917

可能这与重复使用单元格的事实有关。试试这个

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"messageCell";
        MessageCell *cell = (MessageCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    if(cell == nil)
       { 
        cell = [[[MessageCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier]autorelease];
        }
        cell.Content.Text = @"Content!";
        [cell.Content setFrame:CGRectMake(0, 0, 10, 10)];
        return cell;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-15T14:17:45.403

您是否考虑过在您的自定义单元格（即 MessageCell）中覆盖该`- (void) layoutSubviews`方法并在其中布局您的内容？我认为这是放置布局更改代码最安全的地方，因为在其他地方它可能没有任何效果。不要忘记调用`[super layoutSubviews];`您的`layoutSubviews`.

考虑采用这种方法，让我们知道它是否适合您！但是您需要考虑这种方法对性能的影响，因为`layoutSubviews`每次表格滚动时都会调用。

编辑：

为了适应内部标签的正确框架尺寸，请`layoutSubviews`考虑使用`- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(UILineBreakMode)lineBreakMode`框架计算。

# c# - 如何在 C# 中删除 DataGridView 中的默认第一行？

> ID：12872989
> 
> 赞同：3
> 
> 时间：2012-10-13T12:12:29.623
> 
> 标签：c#, winforms, datagridview

我想在`DataGridView`通过程序添加任何行之前删除第一行。

我宁愿从`DataGridView`属性中删除第一行，而不是通过程序删除。

任何想法怎么做？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-14T09:31:24.017

您似乎指的是可编辑项上的默认新行，`DataGridView`它允许用户使用 UI 向网格添加新行。

要阻止该行出现，您只需`DataGridView.AllowUserToAddRows`以编程方式或在设计器中将该属性设置为 false。

# c# - 序列化 xml 数据网格/文本框

> ID：12872992
> 
> 赞同：0
> 
> 时间：2012-10-13T12:12:44.653
> 
> 标签：c#, winforms, datagrid, xml-serialization

可能这可能是一个非常基本的问题，但我正在研究一个小示例项目以供我理解，我需要一些帮助来完成这个。

```
public class XMlExample : INotifyPropertyChanged
        {
            [XmlElement("ID")]
            public string ID { get; set; } //Textbox
            [XmlAttribute("Initial")]
            public string Initial { get; set; } //Textbox

            public event PropertyChangedEventHandler PropertyChanged;
        }
public class Details //Datagrid
                {
                    [XmlElement("FirstName")]
                    public string FirstName { get; set; }
                    [XmlElement("LastName")]
                    public string LastName { get; set; }
                } 
```

这是未完成的功能：

读写功能：Button1 读取 XML 文件：

```
 XmlSerializer deserializer = new XmlSerializer(typeof(XMlExample));
            TextReader textReader = new StreamReader(@"C:\test\testserialization.xml");
            XMlExample xmlexmaple;
            xmlexmaple = (XMlExample)deserializer.Deserialize(textReader);
            textReader.Close(); 
```

按钮 2 写入 XML 文件：

```
XmlSerializer serializer = new XmlSerializer(typeof(XMlExample));
            TextWriter textWriter = new StreamWriter(@"C:\test\testserialization.xml");
            serializer.Serialize(textWriter, XXXX);
            textWriter.Close(); 
```

请有人帮助我如何从文本框和数据网格中获取值以写入 xml 文件以及如何将其读回界面。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:35:57.430

要序列化/反序列化`Datagrid`，您可以在`XMLExample`Class 中为它添加一个属性，并将该`Serializable`属性添加到两个类中。

```
[Serializable]
public class XMLExample : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public XMLExample()
    {
        ID = "Spaghetti";
        Initial = "Linguini";
        Details = new List<Detail>();
    }

    public string ID { get; set; } // Textbox
    public string Initial { get; set; } // Textbox
    public List<Detail> Details { get; set; } // Datagrid
}

[Serializable]
public class Detail 
{
    public Detail()
    {
        // default values, if appropriate.
        FirstName = "John"; 
        LastName = "Shaw";
    }

    [XmlElement("FirstName")]
    public string FirstName { get; set; }
    [XmlElement("LastName")]
    public string LastName { get; set; }
} 
```

反序列化后，在您的`Button1`处理程序中，您可以适当地填充您的用户界面控件。在序列化类之前，在您的`Button2`处理程序中，您需要适当地填充类中的属性。

```
XmlSerializer _serializer = new XmlSerializer(typeof(XMLExample));
XMLExample _example = new XMLExample();

// Read file.
using (TextReader textReader = new StreamReader(@"C:\test\testserialization.xml"))
{
    _example = (XMLExample)_serializer.Deserialize(textReader);
    textReader.Close();
}

// Populate user interface from the class.
textBox1.Text = _example.ID;
textBox2.Text = _example.Initial;
// etc...

// Update class from user interface
_example.Details.Add(new Detail() { FirstName = "John", LastName = "Doe" });
_example.Details.Add(new Detail() { FirstName = "Jane", LastName = "Doe" });

// Write file.
using (TextWriter textWriter = new StreamWriter(@"C:\test\testserialization.xml"))
{
    _serializer.Serialize(textWriter, _example);
    textWriter.Close();
} 
```

# 测试序列化.xml

```
<?xml version="1.0" encoding="utf-8"?>
<XMLExample xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   
  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ID>Spaghetti</ID>
  <Initial>Linguini</Initial>
  <Details>
    <Detail>
      <FirstName>John</FirstName>
      <LastName>Doe</LastName>
    </Detail>
    <Detail>
      <FirstName>Jane</FirstName>
      <LastName>Doe</LastName>
    </Detail>
  </Details>
</XMLExample> 
```