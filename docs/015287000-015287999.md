# StackOverflow 问答 15287000-15287999

# facebook - 将手机添加到 Facebook 帐户 - 无短信

> ID：15287000
> 
> 赞同：1
> 
> 时间：2013-03-08T04:56:21.660
> 
> 标签：facebook, mobile, sms

我正在尝试为 Facebook 开发人员验证我的手机号码。我的手机号码一直失败，现在说：“对不起，我们已经尝试发送多个代码，但似乎都失败了。请单击此处获取帮助。”

之后我发现我在我的 fb 设置中关闭了移动短信（它会自动执行此操作）。我猜这就是它不起作用的原因。

但是现在，即使我打开了它，每次都会收到相同的错误消息：“抱歉，我们已经尝试发送多个代码，但似乎都失败了。请单击此处获取帮助。”

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:40:27.123

I tried the other option that 'Call me ' and I received a call from Facebook, that was an Recorded speech that gave me four digit code. All work now.

Regards

# c++ - 考虑到所有可能的编码，是否有任何通用方法可以将 wstring 转换为 std::string？

> ID：15287001
> 
> 赞同：0
> 
> 时间：2013-03-08T04:56:29.863
> 
> 标签：c++, windows, unicode, character-encoding

我正在使用以下 api 将 wstring 编码为字符串，

```
string utf8_encode(const std::wstring &wstr) 
{ 
    int len = WideCharToMultiByte(CP_UTF8, 0, wstr.c_str(), -1, 0, 0, 0, 0);
    vector<char> buf(len);
    WideCharToMultiByte(CP_UTF8, 0, wstr.c_str(), -1, &buf[0], len, 0, 0);
    return std::string(buf.begin(), buf.end());
} 
```

只要在系统区域设置为的 Windows 机器中执行此编码，它就可以正常工作

英语。

现在，如果我尝试在日语窗口中使用它，转换后的字符串会损坏。我的理解是，日文窗口使用 Shift-JIS 编码。如果我修改 API 以将代码页作为参数，那么它可以工作。

```
string utf8_encode(const std::wstring &wstr)
{
    UINT codePage = GetACP();
    int len = WideCharToMultiByte(codePage, 0, wstr.c_str(), -1, 0, 0, 0, 0);
    vector<char> buf(len);
    WideCharToMultiByte(codePage, 0, wstr.c_str(), -1, &buf[0], len, 0, 0);
    return std::string(buf.begin(), buf.end());
} 
```

但是如果我在默认系统区域设置为英语的 Windows 机器中使用日文或中文字符，它会再次失败。基本上我必须使用 CP_UTF8 进行转换。如果我必须支持以下代码页怎么办？

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd317756(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317756(v=vs.85).aspx)

考虑到所有可能的编码，是否有任何通用方法可以将 wstring 转换为字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:39:29.280

不，许多编码`std::string`仅涵盖`wstring`字符集的一个子集。例如，和 Unicode 的常见选择`ISO-8859-1`意味着大多数`wchar_t`值没有`char`等价物。例如，ISO-8859-1 中没有 sa。

# javascript - 如何在 jquery 中检查 div 是否包含单选按钮？

> ID：15287005
> 
> 赞同：2
> 
> 时间：2013-03-08T04:57:17.793
> 
> 标签：javascript, jquery, html, jquery-mobile

有没有办法检查 a 是否`<div>`包含单选按钮或不使用 jquery 和 javascript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T04:58:38.320

```
if($('div').find(':radio').length > 0){
 //stuff
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T04:58:17.247

您可以像这样使用[后代选择器，您可以在](http://api.jquery.com/descendant-selector/)[此处](http://api.jquery.com/category/selectors/)了解有关选择器的更多信息

*使用 id 选择器*

```
if($('#divID :radio').length)
{
   //
} 
```

*使用类选择器*

```
if($('.div-class :radio').length)
{
   //
} 
```

*使用标签名称选择器*

```
if($('div :radio').length)
{
   //
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:58:44.290

```
$('div').children('input[type="radio"]').length 
```

这将返回单选按钮的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T04:58:59.807

你可以这样做：

```
if($('div').children('input:radio').length > 0){
    // do something
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T04:59:31.387

你可以这样做：

```
if($('#yourDivId input:radio').length) {
  //its inside
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T05:01:13.120

```
if($("div input").attr("type")=="radio") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T05:01:44.790

用这个 ：

```
if($("#divid:has(radio)");) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-08T05:02:45.037

你可以试试，

```
if ($("div input:radio").length > 0){
  // do something here...
} 
```

否则您也可以通过以下方式检查它是否存在，

```
jQuery.fn.exists = function(){return this.length>0;}

if ($("div input:radio").exists()) {
    // Do something here....
} 
```

# grails - Grails 应用程序占用更多内存？

> ID：15287009
> 
> 赞同：1
> 
> 时间：2013-03-08T04:57:57.473
> 
> 标签：grails, memory-leaks, jvm, jetty

我目前正在 Jetty 中运行 Grails 应用程序。它工作正常，但占用的内存比我想要的要多。

`htop`表明 Jetty 正在像这样运行：`java -server -Xmx256m -Xms256m -Xmn96m -XX:MaxPermSize=64m -Djetty.home=/home/...`

在我看来，Jetty 可能使用的最大内存应该*是* `256 + 64 = 320 MB`. 相反，它看起来像这样：

```
  PID USER PRI NI VIRT RES SHR S CPU% MEM% TIME+ 命令
 6256 码头 20 0 2747M 623M 13732 S 0.0 31.3 1:28.06 /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java -server -Xmx256m -Xms256m -Xmn96m -XX:MaxPermSize=64m -Djetty。家=...

```

显然我不希望内存使用量正好是 320 MB，但它不应该接近吗？为什么它会是预期内存的两倍？如果有的话，当堆填满时，Java 不应该拒绝分配更多空间吗？

我试图清楚地了解发生了什么`jmap`，但在我看来一切都是正确的：

```
# jmap -heap 6256
正在附加到进程 ID 6256，请稍候...
调试器连接成功。
检测到服务器编译器。
JVM版本是23.7-b01

使用线程局部对象分配。
4 个线程的并行 GC

堆配置：
   MinHeapFreeRatio = 40
   MaxHeapFreeRatio = 70
   MaxHeapSize = 268435456 (256.0MB)
   新大小 = 100663296 (96.0MB)
   MaxNewSize = 100663296 (96.0MB)
   OldSize = 5439488 (5.1875MB)
   新比率 = 2
   幸存者比率 = 8
   PermSize = 21757952 (20.75MB)
   MaxPermSize = 67108864 (64.0MB)
   G1HeapRegionSize = 0 (0.0MB)

堆使用：
PS年轻一代
伊甸空间：
   容量 = 65208320 (62.1875MB)
   使用 = 33343488 (31.798828125MB)
   免费 = 31864832 (30.388671875MB)
   51.13379396984924% 已使用
从太空：
   容量 = 17170432 (16.375MB)
   使用 = 0 (0.0MB)
   免费 = 17170432 (16.375MB)
   0.0% 已使用
到太空：
   容量 = 18284544 (17.4375MB)
   使用 = 0 (0.0MB)
   免费 = 18284544 (17.4375MB)
   0.0% 已使用
PS老一代
   容量 = 167772160 (160.0MB)
   使用 = 132604224 (126.46124267578125MB)
   免费 = 35167936 (33.53875732421875MB)
   79.03827667236328% 已使用
PS烫发一代
   容量 = 67108864 (64.0MB)
   使用 = 55899320 (53.30974578857422MB)
   免费 = 11209544 (10.690254211425781MB)
   83.29647779464722% 已使用

26872 个实习字符串，占用 2932096 个字节。
```

据我所知，perm gen 空间和 heap 空间都没有满。那么，这 400 MB 的内存是用来做什么的呢？我可以在我的 Grails 应用程序或 Jetty 中进行更改以减少它吗？

我过去曾在 Jetty 上运行 Grails 应用程序，但内存使用率很低。现在刚刚检查了一个，它使用了 220 MB 的内存，所以我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:00:02.850

JVM 是一个本地程序，它[消耗本地资源](http://www.ibm.com/developerworks/linux/library/j-nativememory-linux/index.html)，包括本地内存。本机内存是运行时进程可用的内存，与 Java 应用程序使用的 Java 堆内存不同。每个虚拟化资源（包括 Java 堆和 Java 线程）都必须与虚拟机运行时使用的数据一起存储在本机内存中。
你也可以看看这个[答案](https://stackoverflow.com/questions/11768615/jvm-memory-usage-out-of-control)，它很好地解释了这个主题。
这个[线程](https://stackoverflow.com/questions/6470651/creating-a-memory-leak-with-java)展示了一些很好的例子，说明如何使用 Java 泄漏本机内存。[Jetty 文档](http://wiki.eclipse.org/Jetty/Howto/Prevent_Memory_Leaks)也提到了这个主题
。 如果您使用的是 JDK7，则可以使用[VisualVM 缓冲区监视器插件](https://blogs.oracle.com/nbprofiler/entry/new_memory_buffer_plugin_for)
用于监视在垃圾收集堆之外分配的直接缓冲区。

# ruby - 匹配 IO#read 返回的行开头的奇怪行为

> ID：15287010
> 
> 赞同：0
> 
> 时间：2013-03-08T04:57:57.640
> 
> 标签：ruby, regex

这是我今天早上遇到的情况。我有很多用 CMD 模式编写的 JavaScript 文件，如下所示：

```
define(function(require, exports) {
    // code goes here
}) 
```

我有一个简单的 ruby​​ 脚本来操作这些文件以获得如下结果：

```
define(['module-a', 'module-b'], function(reuqire, exports) {
    // code
}) 
```

我这样做的方法是打开这些文件，读取它们的内容，看看它们是否匹配`/^define\(function/`，如果匹配则替换它们：

```
code = File.open('foo.js').read
if code =~ /^define\(function/
  # do some work
end 
```

奇怪的是，代码不会匹配那个正则表达式。第 2 行返回`nil`。这将起作用：

```
code = "define(function(require, exports) {\n"
code =~ /^define\(function/ # ==> 0 
```

`nil`如果使用 读取代码，它只会返回`IO#read`。但是，字符串的开头有效：

```
code = File.open('foo.js').read
code =~ /.define\(function/m # ==> 0

code[0] # ==> "" returns an empty string 
```

但是不是`^`匹配所有行的开头吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:50:47.463

在“定义”之前检查除 \n 之外的空格？特别是对于 \r 。. .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:19:40.980

那个奇怪的字符串原来是那个文本文件的 BOM。这个项目的一些同事用 UTF-8 保存了文件，这是我们同意使用的编码，带有 BOM。

这是解决方案：[有没有办法从 UTF-8 编码文件中删除 BOM？](https://stackoverflow.com/questions/5011504/is-there-a-way-to-remove-the-bom-from-a-utf-8-encoded-file)

# php - 如何查看邮箱是否已经注册？

> ID：15287011
> 
> 赞同：0
> 
> 时间：2013-03-08T04:58:02.030
> 
> 标签：php, mysql, database, pdo

我正在尝试检查是否已经使用 PDO 注册了电子邮件，但到目前为止我还没有找到这样做的好方法。这就是我到目前为止所拥有的。如果有帮助，连接变量是“$con”。另外，我是否需要在同一个文档中使用连接变量，或者它是否会在包含工作的文档中？

```
<link rel="stylesheet" type="text/css" href="css\errors.css">
<?php
require 'header.php';
if (!$_POST['submit']) {
?>
<html>
<a href="register.html">Regsiter here!</a>
<?php
} else {
    require 'connect.php';
    $firstname = ($_POST['firstname']);
    $lastname = ($_POST['lastname']);
    $email = ($_POST['email']);
    $password = ($_POST['password']);
    $passwordconf = ($_POST['passwordconf']);

    $errorfields = "<p class='errormsg'>Please fill out all the fields!</p>";
    if (empty($firstname) || empty($lastname) || empty($email) || empty($password) || empty($passwordconf)) {
        echo "$errorfields";
    }
    $erroremail = "<p class='errormsg'>Email is not in name@domain format!</p>";
    $regex = "/^[a-z0-9]+([_.-][a-z0-9]+)*@([a-z0-9]+([.-][a-z0-9]+)*)+.[a-z]{2,}$/i";
    if (!preg_match($regex, $email)) {
        echo "$erroremail";
    }
    $errorpassword = "<p class='errormsg'>You passwords do not match!</p>";
    if ($password != $passwordconf) {
        echo "$errorpassword";
    }

    //this is where email is checked
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T05:17:04.890

试试这个，用你的连接凭证填写 DB_NAME、DB_USER_NAME 和 DB_USER_PASS，或者如果一切都正确设置为 PDO 对象，则使用 $con 变量：

```
$con = new PDO( 'mysql:host=localhost;dbname=DB_NAME;charset=UTF-8', 'DB_USER_NAME', 'DB_USER_PASS' );

$query = $con->prepare( "SELECT `email` FROM `tbl_name` WHERE `email` = ?" );
$query->bindValue( 1, $email );
$query->execute();

if( $query->rowCount() > 0 ) { # If rows are found for query
     echo "Email found!";
}
else {
     echo "Email not found!";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-29T05:20:15.260

接受的答案中存在一些问题（这是很容易理解的，因为它是很久以前写的）。

第一个有点无关紧要，但仍然如此。连接代码并不像一行代码那么简单。[如何正确连接PDO](https://phpdelusions.net/pdo_examples/connect_to_mysql)请参考我的文章，以避免以后可能出现的很多问题。

另一个问题是`rowCount()`方法的使用，正如手册中所述，它[可能是不可用](https://www.php.net/manual/en/pdostatement.rowcount.php)的。此外，使用`bindParam()`是多余的，可以避免使用，以使代码更简洁。因此，我们可以提出以下解决方案

```
require 'connect.php'; // contains the code mentioned above.

$stmt = $con->prepare( "SELECT 1 FROM `tbl_name` WHERE `email` = ?");
$stmt->execute([$email]);
$found = $stmt->fetchColumn();

if( $found ) {
    echo "Email found!";
} else {
    echo "Email not found!";
} 
```

如果您不仅需要检查是否存在，还需要获取实际记录（例如，为了验证密码），只需`1`将查询更改为实际字段并`fetchColumn()`更改为`fetch()`：

```
$stmt = $con->prepare( "SELECT 1 FROM `tbl_name` WHERE `email` = ?");
$stmt->execute([$email]);
$user= $stmt->fetch();

if( $user ) {
    echo "Email found!";
} else {
    echo "Email not found!";
} 
```

# windows - 如何开发视频播放软件

> ID：15287015
> 
> 赞同：0
> 
> 时间：2013-03-08T04:58:18.460
> 
> 标签：windows, video, audiovideoplayback

我正在尝试开发一个视频播放器，只是为了好玩和学习体验，比如媒体播放器或 vlc。我想知道媒体播放器如何将这些视频文件投影给用户？如何将这些视频文件解码成视频？可以使用的算法样本以及适合开发此类软件的语言的任何想法。

我知道这个问题非常模糊，但这是我进入这部分研究的第一步，一个教程或朝着正确方向轻推会很棒。非常感谢你。

**PS**：如果可能的话，将不胜感激更多信息：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:20:01.553

大多数使用 OpenGL/Direct X 在其常规窗口顶部绘制视频。

# java - 如何在 Android 应用中创建滚动背景？

> ID：15287017
> 
> 赞同：0
> 
> 时间：2013-03-08T04:58:25.563
> 
> 标签：java, android

我是一名新的 Android 开发人员，但我用 Java 完成了一些 2D 游戏。

但是，我还没有真正找到制作菜单的好方法，我想在我的主菜单上为这个应用程序制作一个动画背景移动。

是否有某种方法，例如图形更新器（绘制），然后将 x 设置为在屏幕上滚动？

注意：这将是背景中的一个图像，我希望它滚动（这是一个简单的模式）给游戏菜单一些效果。我假设 GIF 图像是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:04:49.773

您需要使用Android 的[**ScrollView**](http://developer.android.com/reference/android/widget/ScrollView.html)类，只需在您的 .xml 文件中定义 ScrollView 如下，

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    // Define your other components here.

</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:11:26.160

有几个选项：

1.  您使用一些图像或其他视图并根据需要设置尺寸，通常比屏幕大。然后，您在相对布局中使用此图像并设置左/上偏移以控制确切位置。

2.  您创建一个自定义视图，该视图将使用偏移量在屏幕上绘制适当的图像或任何内容。

我通常更喜欢第二种选择，因为我不必将我的视图限制在相对布局内。

只是添加 - 菜单渲染不在您的控制之下。它是按设备主题和相关的控制器（阅读：制造商）。

# java - 优雅地释放 coherence 占用的 socket 端口

> ID：15287022
> 
> 赞同：1
> 
> 时间：2013-03-08T04:58:45.887
> 
> 标签：java, sockets, oracle-coherence

嗨，我有一个特殊的场景，当我启动 tomcat 时，它还会初始化一些其他服务，这些服务实际上绑定在特定端口上并开始在该端口上侦听。

当我尝试关闭tomcat时出现问题，java进程实际上并没有被杀死，因为这个进程一直在监听那个特定的端口。我实际上对此绑定没有任何控制权，也没有该类的源代码，因为这是由第三方 jar 完成的。

所以我只是想知道有没有一种特殊的方法可以通过java优雅地中止监听这个端口？

我每次都必须使用 kill -9 来终止进程并释放端口

# url - 我可以在 URL 的路径中使用哪些字符？

> ID：15287023
> 
> 赞同：0
> 
> 时间：2013-03-08T04:58:48.700
> 
> 标签：url, syntax, character, uri

前几天我注意到您可以从[http://google.com/+](http://google.com/+)访问 Google Plus ，这让我想知道在 URL 的路径中可以使用哪些其他字符。所以，我想我会在这里问：我*可以*使用哪些字符以及我*应该*使用哪些字符（例如，有些字符在旧浏览器中可能不可用）？

请记住，我只是在谈论 URL 的*路径*。谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:25:21.577

权威参考是 Internet 标准 STD 66，*统一资源标识符 (URI)：通用语法*，目前是 RFC 3986。条款[3.3 路径](http://www.apps.ietf.org/rfc/rfc3986.html#sec-3.3)指定允许的字符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T05:45:30.350

除了字母数字和具有特殊含义的保留字符，例如？和 & 你可以使用 "$-_.+!*'(),"。

有关详细信息，请参阅[http://www.faqs.org/rfcs/rfc1738.html](http://www.faqs.org/rfcs/rfc1738.html)。

类似的问题和答案：[URL 中允许的字符](https://stackoverflow.com/questions/1856785/characters-allowed-in-a-url)

# c++ - 多线程程序中的 std::map 读/写和删除

> ID：15287032
> 
> 赞同：-1
> 
> 时间：2013-03-08T04:59:48.463
> 
> 标签：c++, multithreading

我在多线程环境中的映射中具有读取、写入和删除三个功能。那么它们工作正常吗？或者它们会产生死锁或我想在多线程程序中从映射中读取、写入和删除的任何其他类型的错误。

```
//Function for read 
string GetData (const int key)
{

    pthread_rwlock_rdlock(&rwlock); //read lock
    string result = "not found";
    my_map::const_iterator iter = m.find(key);
    if ( iter != m.end() )//found
    {
        result = iter->second;
    }
    else //missing
    {
        // change from read mode to write mode
        pthread_rwlock_unlock(&rwlock); // unlock read lock
        pthread_rwlock_wrlock(&rwlock); // write lock
        // Try again
        iter = m.find(key);
        if (iter != m.end()) {
            result = iter->second;
        }
        else
        {
        string = "";
        }
    }
    pthread_rwlock_unlock(&rwlock); // unlock read/write lock
    return result;
}

//Function for write
void SetData (const int key)
{

    pthread_rwlock_rdlock(&rwlock); //read lock
    string result = "not found";
    my_map::const_iterator iter = m.find(key);
    if ( iter != m.end() )//found
    {
        result = iter->second;
    }
    else //missing
    {
        // change from read mode to write mode
        pthread_rwlock_unlock(&rwlock); // unlock read lock
        pthread_rwlock_wrlock(&rwlock); // write lock
        // Try again
        iter = m.find(key);
        if (iter != m.end()) {
            result = iter->second;
        }
        else
        {
            m[key] = "missing data";
            result = "missing data";
        }
    }
    pthread_rwlock_unlock(&rwlock); // unlock read/write lock
    return result;
}
//Function for delete
//Function for write
void deleteData (const int key)
{
    pthread_rwlock_rdlock(&rwlock); //read lock
    string result = "not found";
    my_map::const_iterator iter = m.find(key);
    if ( iter != m.end() )//found
    {
        result = iter->second;
    }
    else //missing
    {
        // change from read mode to write mode
        pthread_rwlock_unlock(&rwlock); // unlock read lock
        pthread_rwlock_wrlock(&rwlock); // write lock
        // Try again
        iter = m.find(key);
        if (iter != m.end()) {
            my_map->erase(iter);
        }
        else
        {
        }
    }
    pthread_rwlock_unlock(&rwlock); // unlock read/write lock
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:47:33.797

只要您的代码没有*其他*干扰并且不引发异常的互斥锁，它看起来还可以并且不会产生任何死锁。

当您将 C 风格的代码与 C++ 混合时，异常是您最大的敌人。我建议您查看 C++11[`std::mutex`](http://en.cppreference.com/w/cpp/thread/mutex)和[`std::lock_guard`](http://en.cppreference.com/w/cpp/thread/lock_guard)，但您也可以手动修复它，请参阅下面的直接解决方案。还有更优雅的方式，但重要的是以某种方式处理它。

*其他*互斥体呢？`my_map`在您的示例中，如果这是用户定义的类型（不是某些标准容器），它们可以隐藏在类型中，并且成员函数`find`等也会在内部锁定互斥锁。在其他情况下（不在您的示例中），该值也可能是 UDT 而不仅仅是`int`使用互斥锁。

您的代码有一件奇怪的事情：为什么`GetData`要用写锁锁定互斥锁？这似乎是多余的和低效的。同样对于其他功能，我只需立即获得写锁，而通常跳过获得读锁。但是您可能希望对这一个进行概要分析，因为两者都可能是有效的用例，并且都可能具有潜在的性能优势。

此外，在使用互斥锁时，如果可能，请始终将代码移到锁定部分之外。也就是说，这`GetData`应该是这样的：

```
string GetData (const int key)
{
  string result = "not found"; // moved before the lock
  pthread_rwlock_rdlock(&rwlock); //read lock
  try {
    my_map::const_iterator iter = m.find(key);
    if ( iter != m.end() )//found
    {
      result = iter->second;
    }
    pthread_rwlock_unlock(&rwlock); // unlock read/write lock
    return result;
  }
  catch( ... ) {
    pthread_rwlock_unlock(&rwlock); // unlock read/write lock
    throw;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:48:33.467

您的代码几乎没有问题；所以在我看来。

1.  例如删除数据；如果你确实找到了读锁下的记录，你在用它做什么？不删？您的写入功能也是如此。
2.  为什么要在写入和删除功能中使用读锁？为什么不立即使用写锁呢？
3.  在阅读中，你为什么要写锁呢？

根据我的伪代码应该是

读——取读锁——查找。存储结果 - 找到或未找到。- 释放锁 - 返回

写——取写锁——写。决定是否覆盖现有密钥。如果不覆盖你会返回什么？大多数标准实现都设置为覆盖。- 释放锁 - 返回

您的一般方法很好 - 没有问题。

你不能只用一把锁就出现死锁。您至少需要两个锁和一个特定的模式才能发生死锁。例如

螺纹 1 锁(A) 锁(B)

螺纹 2 锁(B) 锁(A)

如果线程 1 在第一次锁定调用后立即换出并且线程 2 启动，则上述情况可能会导致死锁。

如果您想变得更奇特，并担心其他潜在问题，那么您可以担心优先级反转。我说的是异国情调，因为在大多数情况下，您甚至不必考虑它。

# javascript - 如何订阅淘汰赛中模型的任何更改

> ID：15287034
> 
> 赞同：0
> 
> 时间：2013-03-08T05:00:08.120
> 
> 标签：javascript, jquery, knockout.js

我正在使用淘汰赛-2.2.0.js。我在淘汰赛中有以下对象：

```
 function Person(name, age)
 {
   this.Name = ko.observable(name);
   this.Age = ko.observable(age);
 }

 var person = ko.observable(new Person("Tom", 23)); 
```

现在我想要的是在人可观察对象上放一个下标，例如：

```
 person.subscribe(function(newValue){
 //here i want the notification whenever person object name or age change
 }); 
```

但是上述订阅并没有发生这种情况。还有其他方法可以做，还是我做错了什么？

**编辑**

我知道我们可以通过对每个单独的属性应用单独订阅来做到这一点，但我正在寻找一般订阅方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:08:07.400

看起来您还没有应用绑定，使用`ko.applyBindings(new Person("Tom", 23));`- 如果您希望在更改模型时调用某些函数，那么您应该尝试“自定义绑定”[链接在这里](http://knockoutjs.com/documentation/custom-bindings.html)

```
ko.bindingHandlers.yourBindingName = {
    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // here you can call your function when some change occur in your observables
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T08:35:54.790

这是一个插件：

[https://github.com/ZiadJ/knockoutjs-reactor](https://github.com/ZiadJ/knockoutjs-reactor)

以下是您想要使用它的方式：

```
 person.watch(function(root, trigger){
     var newValue = trigger();
 }); 
```

# r - R在矩阵上应用列和行索引的函数

> ID：15287038
> 
> 赞同：1
> 
> 时间：2013-03-08T05:00:49.437
> 
> 标签：r, matrix, apply, lapply

我想在矩阵上应用矩阵中每个值的值、行索引和列索引的函数，并获得转换后的矩阵。例如

```
mat<-matrix(c(1,2,3,4),2,2)    
mat
     [,1] [,2]
[1,]    1    3
[2,]    2    4

f<-function(x,i,j){x+i+j}
mat2 <- my.apply(f,mat)
mat2
     [,1] [,2]
[1,]    3    6
[2,]    5    8 
```

上面的示例仅用于说明目的，`f`可能要复杂得多。

`apply`由于处理额外参数的方式，无法完成这项工作。

```
apply(mat,1:2,f,seq_along(mat[,1]),seq_along(mat[1,]))
, , 1

     [,1] [,2]
[1,]    3    4
[2,]    5    6

, , 2

     [,1] [,2]
[1,]    5    6
[2,]    7    8 
```

我找不到与`lapply`家人的任何一种方式。循环可以`for`完成这项工作，但它既不高效也不优雅。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T05:16:41.813

尝试`mapply`

```
mat <- matrix(c(1, 2, 3, 4), 2, 2)
mat
##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4

matrix(mapply(function(x, i, j) x + i + j, mat, row(mat), col(mat)), nrow = nrow(mat))
##      [,1] [,2]
## [1,]    3    6
## [2,]    5    8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:52:49.887

这是 apply 的一个丑陋用法，只是为了一些快速而肮脏的工作。诀窍是为行（或列）索引添加额外的列（或行）。

```
mat <- matrix(c(1, 2, 3, 4), 2, 2)
t(apply(cbind(mat, 1:nrow(mat)), 1, function(x){x[1:ncol(mat)] + 1:ncol(mat) + x[ncol(mat)+1]}))
##     [,1] [,2]
##[1,]    3    5
##[2,]    6    8 
```

如果你已经有一个函数`f(x, i, j)`，你也可以尝试：

```
apply(cbind(mat, 1:nrow(mat)), 1, function(x){a = numeric(); for(j in 1:ncol(mat)){a[j] = f(x[j], x[ncol(mat)+1], j)}; a}) 
```

# android - achartenginge 第一次正确渲染，但是当我删除它并将具有不同数据点的数据点添加到线性布局时，预设消失

> ID：15287046
> 
> 赞同：0
> 
> 时间：2013-03-08T05:01:48.007
> 
> 标签：android, achartengine

我正在创建一个图表视图来显示一年中不同日子的心情。它第一次正确渲染。但是当我按下“下一个”和“前一个”天的按钮时，数据点正确输入，但图表预设却没有。例如，图表不再可点击，我不能再平移（我之前都可以做到）。下面是代码。我在这里做错了什么？

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
    {
    super.onCreateView(inflater, container, savedInstanceState);
    mContext = this.getActivity();
    mDbHelper=new CalendarDbAdapter(mContext);
    mDbHelper.open();
    View view = inflater.inflate(R.layout.activity_graph, container, false);
    Button next = (Button) view.findViewById(R.id.next);
    Button previous = (Button) view.findViewById(R.id.previous);
    Day = cal.get(Calendar.DAY_OF_YEAR);
    Year = cal.get(Calendar.YEAR);
    chartView = generate(Day, Year);
    layout = (LinearLayout) view.findViewById(R.id.graph);  
    layout.addView(chartView);

    next.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View arg0) 
        {
            Day++;
            if (Day > 365)
            {
                Day = 0;
                Year++;
            }
            layout.removeView(chartView);
            chartView = generate(Day, Year);
            layout.addView(chartView);

        }
    });
    previous.setOnClickListener(new OnClickListener()
    {

        public void onClick(View arg0) 
        {
            Day--;
            if (Day < 0)
            {
                Day = 0;
                Year--;
            }
            layout.removeView(chartView);
            chartView = generate(Day, Year);
            layout.addView(chartView);
        }

    });

    chartView.setOnClickListener(new View.OnClickListener()
    {

        @Override
        public void onClick(View arg0) {
            SeriesSelection seriesSelection = chartView.getCurrentSeriesAndPoint();
            Log.e("series select is",""+seriesSelection);
            Log.e("I was","clicked");
        }

    });
    return view;

    }

@Override
public void onDestroy()
{
    super.onDestroy();
    mDbHelper.close();
}

public GraphicalView generate(long Day, long Year)
{
    Cursor calendar = mDbHelper.fetchDay(Year, Day);
    Calendar cal = Calendar.getInstance();  
    cal.set(Calendar.YEAR, (int)Year);  
    cal.set(Calendar.DAY_OF_YEAR, (int)Day);  
    Log.e("Day is",""+Day);
    Date date = cal.getTime();  
    String sDate = new SimpleDateFormat("MM/dd/yyyy").format(date);  
    minutes.clear();
    mood.clear();
        while (calendar.moveToNext())
        {
            Hour = Float.valueOf((calendar.getInt(calendar.getColumnIndexOrThrow(CalendarDbAdapter.COLUMN_NAME_MINUTES))))/60;
            minutes.add(Hour);
            mood.add(calendar.getInt(calendar.getColumnIndexOrThrow(CalendarDbAdapter.COLUMN_NAME_FEELING)));
        }

    if (! calendar.moveToFirst())
    {
        Toast.makeText(mContext, "No events this day!", Toast.LENGTH_SHORT).show();
    }

    XYValueSeries series = new XYValueSeries("Mood by Time"); 
    if (minutes.size() > 0)
    {
        for( int i = 0; i < minutes.size(); i++)
        {
            series.add(minutes.get(i), mood.get(i));
        }
    }

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    dataset.addSeries(series);

    XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer(); // Holds a collection of XYSeriesRenderer and customizes the graph
    XYSeriesRenderer renderer = new XYSeriesRenderer();// This will be used to customize line 1
    mRenderer.addSeriesRenderer(renderer);
    double[] limits = new double [] {0, 23, 0, 7};
    mRenderer.setPanLimits(limits);
    mRenderer.setPanEnabled(true, false);
    for (int i = 0; i < 23; i++)
    {
        if (i == 0)
        {
            mRenderer.addXTextLabel(i, ""+(i+12)+" AM");

        }
        if (i > 0 && i < 12)
        {
            mRenderer.addXTextLabel(i, ""+(i+" AM"));
        }

        if (i == 12)
        {
            mRenderer.addXTextLabel(i, ""+(i +" PM"));
        }

        if (i > 12 && i < 24)
        {
            mRenderer.addXTextLabel(i, ""+((i -12 ) +" PM"));
        }
    }

    for (int i = 0; i < 7; i++)
    {
        if (i == 0)
        {
        mRenderer.addYTextLabel(i, "Terrible");
        }

        if (i == 3)
        {
            mRenderer.addYTextLabel(i, "Neutral");
        }

        if (i == 6)
        {
            mRenderer.addYTextLabel(i, "Fantastic");
        }

    }
    mRenderer.setYAxisMax(7);
    mRenderer.setYAxisMin(0);
    mRenderer.setXAxisMax(23);
    mRenderer.setPointSize(5);
    mRenderer.setChartTitle(sDate);
    mRenderer.setClickEnabled(true);
    // Customization time for line 1!
    renderer.setColor(Color.BLUE);
    renderer.setLineWidth(3);
    renderer.setPointStyle(PointStyle.CIRCLE);
    renderer.setFillPoints(true);

    // Customization time for line 2!

    GraphicalView chartView;

    chartView = ChartFactory.getLineChartView(mContext, dataset, mRenderer);
    return chartView;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:44:58.520

哎呀，onlicklistener 只响应了初始视图。我将 onclicklistener 移至我的 chartview 方法，它正在工作。

# ember.js - Ember JS 使用 Ember-Skel 缩小

> ID：15287049
> 
> 赞同：1
> 
> 时间：2013-03-08T05:02:17.837
> 
> 标签：ember.js, minify

我尝试缩小 Ember JS 应用程序。我正在使用 Ember-Skel 工具来编译 JS 应用程序并缩小它们。当我将 RAKEP_MODE 设置为生产时，它通常会缩小 JS 和 CSS。当我在非生产模式下编译它时，一切正常，但是当我缩小它时，不再找到一个特定的视图。关于为什么会发生这种情况的任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T23:59:59.267

我发现最可能的罪魁祸首是紧接在丢失对象之前的对象中的语法错误。看看未缩小的版本，看看有问题的视图之前是什么。它是否以 结尾`;`？所有`(`,和都与,`[`和`{`匹配吗？`)``]``}`

# javascript - AngularJS - 将插入的 html 片段传递给指令属性

> ID：15287050
> 
> 赞同：1
> 
> 时间：2013-03-08T05:02:18.497
> 
> 标签：javascript, angularjs

我有一个控制器，它接收一个 json 项目列表并在我的视图中重复它们。我正在使用引导弹出框的变体，并希望在定义我的 $scope.popover 的子模板中插入订单 ID，并对其进行变量解析。我读到方括号是要走的路，但它似乎对我不起作用。

```
function ManageOrderCtrl($scope, $http) {
  $scope.subtemplate = '<input class="hidden" value="[order._id]">';

  $http.get('/api/orders').
    success(function(data, status, headers, config) {
      $scope.orders = data.orders;
    });

  };
} 
```

模板（实际上是一个指令 - 引导弹出框的变体）：

```
<li ng-repeat="order in orders">
   <a href="#" popover="{{ subtemplate }}">{{ order._id }}</a>
<li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:14:32.397

你可以尝试类似的东西

```
<li ng-repeat="order in orders">
   <a href="#" popover="<input class="hidden" value='{{order._id}}'">{{ order._id }}</a>
<li> 
```

而不是在控制器中定义模板。您还可以使用创建模板`ngInclude`并将其包含在 html 中。

# php - curl 发布到远程服务器

> ID：15287051
> 
> 赞同：0
> 
> 时间：2013-03-08T05:02:20.527
> 
> 标签：php, curl

我对 curl 的概念和想法不熟悉。我想将波纹管值发布到远程服务器[https://example.com/test/token](https://example.com/test/token)。这些值为 client_secret=sk_test_dndkFknKdtMLhv0eA8OdcgW1 ，code=GH_Dgl12 ，grant_type=dsfgsdK。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T05:09:10.597

带有参数的 curl 帖子的简单示例：

```
<?php
//
// A very simple PHP example that sends a HTTP POST to a remote site
//

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,"http://www.mysite.com/tester.phtml");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS,
        "client_secret=sk_test_dndkFknKdtMLhv0eA8OdcgW1, code=GH_Dgl12, grant_type=dsfgsdK");

// receive server response ...
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$server_output = curl_exec ($ch);

curl_close ($ch);

// further processing ....
if ($server_output == "OK") { ... } else { ... }

?> 
```

选项 CURLOPT_RETURNTRANSFER 将使 curl_exec()**返回响应**，以便您也可以捕获它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:08:49.140

```
$url = 'http://domain.com/get-post.php';
$fields = array(
            'client_secret' => urlencode('sk_test_dndkFknKdtMLhv0eA8OdcgW1'),
            'code' => urlencode('GH_Dgl12'),
            'grant_type' => urlencode('dsfgsdK'),
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

# c++ - 'class QPlainTextEdit' 没有名为 'text' 的成员

> ID：15287056
> 
> 赞同：0
> 
> 时间：2013-03-08T05:02:28.820
> 
> 标签：c++, qt

C:\Projects\QTProjects\SampleProject\mainsample.cpp:18: 错误：'class QPlainTextEdit' 没有名为'text' 的成员

```
#include "mainsample.h"
#include "ui_mainsample.h"

MainSample::MainSample(QWidget *parent)
: QMainWindow(parent)
, ui(new Ui::MainSample)
{
    ui->setupUi(this);
}

MainSample::~MainSample()
{
    delete ui;
}

void MainSample::on_pushButton_clicked()
{
    ui->TxtAns->text(TxtFnum->text().toInt() + ui->TxtSnum->text().toInt());
} 
```

似乎是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:27:51.553

显示错误是因为以下部分

```
ui->TxtAns->text(...)
TxtFnum->text()
ui->TxtSnum->text() 
```

每个尝试调用一个方法，该方法对于您正在使用`text()`的类不存在。`QPlainTextEdit`

另一件事是：即使有`text()`方法，也只能用于*读取*文本，而不能用于*分配新的*。

假设所有三个对象都是`QPlainTextEdit`s：

```
ui->TxtAns->setPlainText(              // this method sets the text to TxtAns
    TxtFnum->toPlainText().toInt() +   // this reads the text from TxtFnum
    ui->TxtSnum->toPlainText().toInt() // this reads the text form TxtSnum
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:17:02.347

它的意思几乎就是它所说的:)

该类`QPlainTextEdit`没有`text()`方法。它确实有一个[`toPlainText()`](http://qt-project.org/doc/qt-4.8/qplaintextedit.html#plainText-prop)方法。也许您打算使用`QLineEdit`which does have[`text()`](http://qt-project.org/doc/qt-4.8/qlineedit.html#text-prop)方法？

# text - Heroku rails 应用程序（text_area 错误）

> ID：15287062
> 
> 赞同：0
> 
> 时间：2013-03-08T05:02:48.960
> 
> 标签：text, heroku, area

在 localhost 上没问题...但是在 heroku 中，我不能在“about”中添加超过 255 个字符。

heroku 错误

```
We're sorry, but something went wrong. 
```

_form.html.erb

```
<%= f.label :about %>
<%= f.text_area :about %> 
```

显示.html.erb

```
<p><%= @release.about %></p> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:04:09.177

`string`是关于在你的数据库中定义为一个吗？要超过 255 个字符，它必须是`text`. 原因是 Heroku 使用 Postgres，其`string`s 不能超过 255 个字符，而 sqlite 允许。

# mongodb - 查找在特定日期有效的文件

> ID：15287073
> 
> 赞同：1
> 
> 时间：2013-03-08T05:03:47.557
> 
> 标签：mongodb, date, mapreduce, aggregation-framework

我有一些数据存储在 mongodb 集合中，类似于：

```
{"_id": 1, "category": "food", "name": "chips", "price": 1.50, "effectiveDate": ISODate("2013-03-01T07:00:00Z")} 
{"_id": 2, "category": "food", "name": "chips", "price": 1.75, "effectiveDate": ISODate("2013-03-05T07:00:00Z")}
{"_id": 3, "category": "food", "name": "chips", "price": 1.90, "effectiveDate": ISODate("2013-03-10T07:00:00Z")}
{"_id": 4, "category": "beverage", "name": "pop", "price": 2.00, "effectiveDate": ISODate("2013-03-01T07:00:00Z")}
{"_id": 5, "category": "beverage", "name": "pop", "price": 2.25, "effectiveDate": ISODate("2013-03-05T07:00:00Z")}
{"_id": 6, "category": "beverage", "name": "pop", "price": 1.80, "effectiveDate": ISODate("2013-03-10T07:00:00Z")} 
```

在 mongodb 中，我将如何编写一个查询来返回在特定日期处于活动状态的文档，按类别分组？

如果我指定 2013 年 3 月 6 日，我希望看到结果：

```
{"_id": 2, "category": "food", "name": "chips", "price": 1.75, "effectiveDate": ISODate("2013-03-05T07:00:00Z")}
{"_id": 5, "category": "beverage", "name": "pop", "price": 2.25, "effectiveDate": ISODate("2013-03-05T07:00:00Z")} 
```

我是 mongo 的新手，一直在尝试使用组、聚合和 mapreduce 来做到这一点，但一直在绕圈子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:53:58.893

为了给你一个真正好的答案，我需要更多关于你的代码和你想要做什么的细节。但如果我理解正确，我认为你可以只使用聚合框架来解决这个问题。你应该知道聚合框架使用了管道的概念，也就是说，每一步的结果都作为下面的入口。

我的查询：

```
db.yourcollection.aggregate([

    /* First exclude everything that is superior to a given date */
    {$match:{effectiveDate:{$lte:new Date(2013,2,6)}}},

    /* Sort the rest by date, descending */
    {$sort:{effectiveDate:-1}},

    /* Group by name+category and grab only the first result
       (the newest below that date) */
    {$group:{_id:{name:'$name',category:'$category'}, effectiveDate:{$first:"$effectiveDate"},price:{$first:"$price"}}},

    /* You said you want the results grouped by category.
       This last $group does that and returns all matching products inside an array
       It also removes the duplicates */
    {$group:{_id:'$_id.category',products:{$addToSet:{name:"$_id.name",price:"$price",effectiveDate:"$effectiveDate"}}}}

]) 
```

输出是这样的：

```
{
    "result": [
        {
            "_id": "food",
            "products": [
                {
                    "name" : "chips",
                    "price" : 1.75,
                    "effectiveDate" : ISODate("2013-03-05T07:00:00Z")
                }
            ]
        },
        {
            "_id" : "beverage",
            "products": [
                {
                    "name" : "pop",
                    "price" : 2.25,
                    "effectiveDate" : ISODate("2013-03-05T07:00:00Z")
                }
            ]
        }
    ],
    "ok":1
} 
```

您可以更改最终输出修改最后一个`$group`或使用`$project`

# c# - ServiceStack 格式 - XML 显示数据，其他不显示

> ID：15287075
> 
> 赞同：1
> 
> 时间：2013-03-08T05:03:56.077
> 
> 标签：c#, web-services, servicestack

当我运行这段代码时，数据没有显示，我得到了一个空白屏幕。如果我单击`"in other formats: json"`它会返回`"{ }"`空白数据。

但是，它实际上有数据。如果我单击`"in other formats: xml"`它会返回完整数据。

那么，为什么我的 XML 工作正常，但我的 HTML 和 JSON 显示空白屏幕？

```
[Route("customers", "GET")]
[Route("customers/{Id}", "GET")]
[Route("customers/page/{Page}", "GET")]
[Route("customers/page/{Page}/size/{Size}", "GET")]
[Route("customers/{Id}/orders", "GET")]
[Route("customers/{Id}/orders/page/{Page}", "GET")]
[Route("customers/{Id}/orders/page/{Page}/size/{Size}", "GET")]
public class Customers {
    public Customers() { Page = 1; Size = 20; }
    public string Id { get; set; }
    public int Page { get; set; }
    public int Size { get; set; }
}
public class CustomersResponse {
    public IList<Customer> Customers;
    public int Pages;
}
public class CustomerDetailResponse {
    public Customer Customer;
    public IList<Order> Orders;
    public int Pages;
}
public class CustomersService : BaseService {
    public ICustomersManager CustomersManager { get; set; }
    public IOrdersManager OrdersManager { get; set; }
    public IValidator<Customers> Validator { get; set; }  
    public object Get(Customers req) {
        var result = Validator.Validate(req);
        if(!result.IsValid) return result.ToResponseDto();
        if (req.Id == null) {
            return new CustomersResponse {
                Customers = CustomersManager.GetCustomers(req), 
                Pages = CustomersManager.GetCustomersPageCount(req) };
        }
        else {
            return new CustomerDetailResponse {
                Customer = CustomersManager.GetCustomer(req), 
                Orders = OrdersManager.GetOrders(req), 
                Pages = OrdersManager.GetOrdersPageCount(req) };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:25:23.040

默认情况下， [ServiceStack 的文本序列化](https://github.com/ServiceStack/ServiceStack.Text)器仅序列化**公共属性**，您的 DTO 具有字段和属性的混合。要么将所有 DTO 更改为公共**属性**，要么将其添加到您的`AppHost.Configure()`：

```
ServiceStack.Text.JsConfig.IncludePublicFields = true; 
```

# python - 遍历二叉树改变每个节点的值？

> ID：15287077
> 
> 赞同：0
> 
> 时间：2013-03-08T05:04:05.080
> 
> 标签：python

我正在尝试遍历二叉树以将“newvalue”添加到每个节点的当前值。

定义（节点，2）：

前：

> ```
>  1
>      / \
>     2   3
>    /\   /
>   5  6  7 
> ```

后：

```
 3
     /\
    4  5
   /\  /
  7  8 9 
```

我应该如何递归处理这个问题？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:13:08.580

哈罗德提供了一个非常干净和普遍的例子。这是一个带有注释的片段，适用于二叉树

使用递归算法，您必须考虑两件事：1\. 基本情况 2\. 递归调用

在你的例子中： - 基本情况=节点没有孩子。不会发生递归调用 - 递归调用 = 每个节点都是自己的迷你树，因此在每个子节点上调用函数

```
def increase_tree_values(node, delta):
    """ Increases/decreases the value of all nodes in the tree by the value 'delta'
    """

    # increase the current node's value
    node.value += delta

    # recursively call function on left child, if it exists
    if node.left_child:
        increase_tree_values(node.left_child, delta)

    # recursively call function on right child, if it exists
    if node.right_child:
        increase_tree_values(node.right_child, delta)

# presuming you have some binary tree called 'tree' already constructed
# increase all nodes in 'tree' by 2
increase_tree_values(tree, 2) 
```

如果您有任何问题，请告诉我。如果这个练习是在学校提供给你的，他们实际上只是想让你把它识别为一个简单的树遍历，你可以在遍历树时更改节点的值。我建议您尝试编写所有不同的树遍历，而无需任何注释。这样你会学到很多关于树和递归的知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:08:30.127

```
def add_value(node, delta):
    node.value += delta
    for child in node.children:
        add_value(child, delta) 
```

# android - 将带有状态的背景可绘制对象设置为 android 按钮

> ID：15287083
> 
> 赞同：3
> 
> 时间：2013-03-08T05:04:24.220
> 
> 标签：android, textview, xml-drawable

我正在构建一个多项选择问卷android程序。我的 onCreate() 方法中有以下内容

```
btnArray = new Button[5];
btnArray[0] = (Button) findViewById(R.id.bOp1);
btnArray[1] = (Button) findViewById(R.id.bOp2);
btnArray[2] = (Button) findViewById(R.id.bOp3);
btnArray[3] = (Button) findViewById(R.id.bOp4);
btnArray[4] = (Button) findViewById(R.id.bOp5);

Typeface othmanyFont = Typeface.createFromAsset(getAssets(),
        "fonts/amiri.ttf");
Drawable shape = getResources().getDrawable(R.drawable.optionbutton);

for(int i=0;i<5;i++){
    btnArray[i].setTypeface(myFont);
    ((Button)btnArray[i]).setBackgroundDrawable(shape); //Button-4 only turns red
    btnArray[i].setOnClickListener(this);
} 
```

可绘制资源“optionbutton.xml”为“按下状态”定义红色渐变，为其他状态定义灰色渐变。它看起来如下

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true" >
    <shape>
    <gradient
      android:startColor="#bf1d00"
      android:endColor="#801300"
      android:angle="270" />
        <corners android:radius="10dp" />
    <stroke
      android:width="1dp"
      android:color="#71c2eb" />
    </shape>
  </item>
  <item>
        <shape xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle">
            <gradient android:startColor="#FFFFFF" 
                android:endColor="#999"
                android:angle="270" />
            <corners android:radius="10dp" />
            <stroke android:width="1px" android:color="#0070b7" />
        </shape>
  </item>
</selector> 
```

选择器实际上有效，但仅在最后应用的按钮上。无论按下 5 中的哪个按钮，最后一个（不是按下的那个）按钮只会将其背景变为红色。

作为调试步骤：我尝试展开 for 循环并更改应用背景的顺序，最后应用的按钮仅获得红色背景：

```
((Button)btnArray[0]).setBackgroundDrawable(shape);
((Button)btnArray[1]).setBackgroundDrawable(shape);
((Button)btnArray[2]).setBackgroundDrawable(shape);
((Button)btnArray[4]).setBackgroundDrawable(shape);
((Button)btnArray[3]).setBackgroundDrawable(shape); //Button-3 only turns red 
```

这令人困惑！我的实施有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T05:21:16.900

您可以在一个 xml 中设置形状并在另一个中设置按钮状态然后尝试这里是 xml 按钮以获得不同的状态

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android"> 

    <item android:drawable="@drawable/save_button_active" android:state_focused="true" android:state_pressed="true"/>
    <item android:drawable="@drawable/save_button_active" android:state_focused="false" android:state_pressed="true"/>
    <item android:drawable="@drawable/save_button_active" android:state_focused="true"/>
    <item android:drawable="@drawable/save_button_inactive" android:state_focused="false" android:state_pressed="false"/>
    </selector> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:47:42.763

它似乎**`setBackgroundDrawable()`**已被弃用。您可以使用另一种替代方法，例如**`setBackgroundResource()`**.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:39:00.990

由于不推荐使用 setBackgroundDrawable(shape) 方法，因此我尝试了另一种实际上可以完美运行并解决了问题的方法：

```
((Button)btnArray[i]).setBackgroundResource(R.drawable.optionbutton); 
```

# python - Numpy：在给定索引数组的情况下查找行的值

> ID：15287084
> 
> 赞同：0
> 
> 时间：2013-03-08T05:04:24.330
> 
> 标签：python, arrays, numpy, indexing

我有一个二维值数组和一个一维索引数组。我想使用索引数组从每行的索引中提取值。以下代码将成功执行此操作：

```
from pprint import pprint
import numpy as np
_2Darray = np.arange(100, dtype = np.float16)
_2Darray = _2Darray.reshape((10, 10))
array_indexes = [5,5,5,4,4,4,6,6,6,8]
index_values = []
for row, index in enumerate(array_indexes):
    index_values.append(_2Darray[row, index])
pprint(_2Darray)
print index_values 
```

退货

```
array([[  0.,   1.,   2.,   3.,   4.,   5.,   6.,   7.,   8.,   9.],
       [ 10.,  11.,  12.,  13.,  14.,  15.,  16.,  17.,  18.,  19.],
       [ 20.,  21.,  22.,  23.,  24.,  25.,  26.,  27.,  28.,  29.],
       [ 30.,  31.,  32.,  33.,  34.,  35.,  36.,  37.,  38.,  39.],
       [ 40.,  41.,  42.,  43.,  44.,  45.,  46.,  47.,  48.,  49.],
       [ 50.,  51.,  52.,  53.,  54.,  55.,  56.,  57.,  58.,  59.],
       [ 60.,  61.,  62.,  63.,  64.,  65.,  66.,  67.,  68.,  69.],
       [ 70.,  71.,  72.,  73.,  74.,  75.,  76.,  77.,  78.,  79.],
       [ 80.,  81.,  82.,  83.,  84.,  85.,  86.,  87.,  88.,  89.],
       [ 90.,  91.,  92.,  93.,  94.,  95.,  96.,  97.,  98.,  99.]], dtype=float16)
[5.0, 15.0, 25.0, 34.0, 44.0, 54.0, 66.0, 76.0, 86.0, 98.0] 
```

但我想只使用 numpy 函数来做到这一点。我已经尝试了一大堆 numpy 函数，但它们似乎都没有完成这个相当简单的任务。

提前致谢！

* * *

**编辑** 我设法弄清楚我的实现是什么： V_high = np.fromiter((

```
index_values = _2Darray[ind[0], ind[1]] for ind in
                    enumerate(array_indexes)),
                    dtype = _2Darray.dtype,
                    count = len(_2Darray)) 
```

感谢root，我已经完成了两个实现。现在进行一些分析：我的实现通过 cProfiler 运行

```
 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    2    0.274    0.137    0.622    0.311 {numpy.core.multiarray.fromiter}
20274    0.259    0.000    0.259    0.000 lazer_np.py:86(<genexpr>) 
```

和根的：

```
 4    0.000    0.000    0.000    0.000 {numpy.core.multiarray.array}
    1    0.000    0.000    0.000    0.000 {numpy.core.multiarray.arange} 
```

**我不敢相信，但 cProfiler 根本没有检测到 root 的方法需要任何时间。我认为这一定是某种错误，但它肯定明显更快。在较早的测试中，我让 root 的速度快了大约 3 倍**

注意：这些测试是在 np.float16 值的 shape = (20273, 200) 数组上完成的。此外，每次测试都必须运行两次索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T05:24:43.027

这应该这样做：

```
row = numpy.arange(_2Darray.shape[0])
index_values = _2Darray[row, array_indexes] 
```

Numpy 允许您使用两个数组来索引 2d 数组（或真正的 nd 数组），例如：

```
for i in range(len(row)):
    result1[i] = array[row[i], col[i]]

result2 = array[row, col]
numpy.all(result1 == result2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T05:26:10.150

```
In [15]: _2Darray[np.arange(len(_2Darray)), [5,5,5,4,4,4,6,6,6,8]]
Out[15]: array([  5.,  15.,  25.,  34.,  44.,  54.,  66.,  76.,  86.,  98.],
         dtype=float16) 
```

但是，我认为基于您的解决方案的东西实际上可能在较小的阵列上更快。如果数组大于`100*100`使用`numpy`索引。

```
In [22]: def f(array, indices):
    ...:     return [array[row, index] for row, index in enumerate(indices)]

In [23]: f(_2Darray, [5,5,5,4,4,4,6,6,6,8])
Out[23]: [5.0, 15.0, 25.0, 34.0, 44.0, 54.0, 66.0, 76.0, 86.0, 98.0] 
```

* * *

```
In [27]: %timeit f(_2Darray,[5,5,5,4,4,4,6,6,6,8])
100000 loops, best of 3: 7.48 us per loop

In [28]: %timeit _2Darray[np.arange(len(_2Darray)), [5,5,5,4,4,4,6,6,6,8]]
10000 loops, best of 3: 24.2 us per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:12:00.733

您必须注意使用专门为数组**而**不是**矩阵****设计**的 numpy 函数。两者很容易混淆，并且在调用另一个方法时不会引发错误，但输出几乎是不可预测的。

# md5 - 解密 Md5 加密密码？

> ID：15287097
> 
> 赞同：0
> 
> 时间：2013-03-08T05:06:30.990
> 
> 标签：md5

我正在使用 md5 来加密密码。然后，如果我需要它，如何取回原始字符串。有没有可能解密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:07:49.117

一句话：没有。如果您希望它是可逆的，那么**这是错误的方法。**MD5 是一种*散列*算法，而不是加密算法。不要使用 MD5 作为密码。

使用实际加密，例如[AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)或[Blowfish](http://en.wikipedia.org/wiki/Blowfish_%28cipher%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:17:30.883

您无法解密像 MD5 这样的单向哈希 - 您可以做的最好的事情是暴力破解它们或运行字典并比较匹配的值。

# java - Maven 在 Powershell 中工作，但在 Cmd Prompt 中不工作

> ID：15287099
> 
> 赞同：0
> 
> 时间：2013-03-08T05:06:39.983
> 
> 标签：java, windows, maven, windows-8

我在我的 Windows 8 64 位机器上安装了 Maven 3 和 Java 7。我可以在 Powershell 中从 Maven 获取输出，但不能使用 cmd 提示符（作为普通用户或管理员）。

以下是powershell中“mvn -v”的输出：

```
Apache Maven 3.0.5 (r01de14724cdef164cd33c7c8c2fe155faf9602da; 2013-02-19 07:51:28-0600)
Maven home: C:\Program Files\Apache Software Foundation\apache-maven-3.0.5
Java version: 1.7.0_17, vendor: Oracle Corporation
Java home: C:\Program Files (x86)\Java\jdk1.7.0_17\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows 8", version: "6.2", arch: "x86", family: "windows" 
```

这是我的 %PATH% 的输出（从 CMD 回显）**更新为使用反斜杠而不是正斜杠**：

```
C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Java\jdk1.7.0_17\bin; C:\Program Files\Apache Software Foundation\apache-maven-3.0.5\bin 
```

我认为我的 PATH 变量可能不正确，但我认为情况并非如此，因为它在 Powershell 中有效。任何帮助解决此问题将不胜感激。

**更新** 这是每当我在命令行上运行“mvn --version”时显示的内容：

```
C:\Users\Hector>mvn --version
'mvn' is not recognized as an internal or external command,
operable program or batch file. 
```

这是调用相同命令但在 Maven 文件夹中的输出：

```
C:\Users\Hector>"C:\Program Files\Apache Software Foundation\apache-maven-3.0.5\
bin\mvn" --version
Apache Maven 3.0.5 (r01de14724cdef164cd33c7c8c2fe155faf9602da; 2013-02-19 07:51:
28-0600)
Maven home: C:\Program Files\Apache Software Foundation\apache-maven-3.0.5
Java version: 1.7.0_17, vendor: Oracle Corporation
Java home: C:\Program Files (x86)\Java\jdk1.7.0_17\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows 8", version: "6.2", arch: "x86", family: "windows" 
```

我还应该注意，这些变量是在我的系统环境中创建的，而不是在用户环境中创建的（有几篇文章让我把它们放在这里）。想法？

我觉得好像`%M2% = %M2_HOME%\bin`可能被打破了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T01:58:24.893

**问题：**

尽管正确安装了 Maven 并正确定义了环境变量 %M2% 和 %M2_HOME%，但从命令行运行 maven 时出现问题。

**解决方案：**

事实证明，系统环境 PATH 在*分号之间有空格*。

**原来的：**

```
C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Java\jdk1.7.0_17\bin; C:\Program Files\Apache Software Foundation\apache-maven-3.0.5\bin 
```

**新的：**

```
C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Java\jdk1.7.0_17\bin;C:\Program Files\Apache Software Foundation\apache-maven-3.0.5\bin 
```

我要感谢所有发帖的人。所有的建议都对解决这个问题非常有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T08:07:32.440

你的 Maven 路径看起来不对。你有：

```
 C:\Program Files\Apache Software Foundation\apache-maven-3.0.5/bin 
```

但最后一个斜杠应该是反斜杠

```
 C:\Program Files\Apache Software Foundation\apache-maven-3.0.5\bin 
```

# python - 绿线是否等于“真实”线

> ID：15287101
> 
> 赞同：7
> 
> 时间：2013-03-08T05:06:46.310
> 
> 标签：python, eventlet

我从[Unterstanding eventlet.wsgi.server](https://stackoverflow.com/questions/8509209/unterstanding-eventlet-wsgi-server)获取了示例代码。

```
from eventlet import wsgi
import eventlet
from eventlet.green import time
import threading

def hello_world(env, start_response):
    print "got request", eventlet.greenthread.getcurrent(), threading.currentThread()
    time.sleep(10)
    start_response('200 OK', [('Content-Type', 'text/plain')])
    return ['Hello, World!\n']

wsgi.server(eventlet.listen(('', 8090)), hello_world) 
```

当我通过不同的客户端 IP 地址访问 Web 服务器时，我可以看到它们是并行处理的。通过打印`hello_world`，我还可以在两个不同的绿色线程中处理它们，但在同一个操作系统线程中。

我是 Python 新手。我很好奇，如果每个 greenthread 都与底层 OS 线程相关联？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T13:13:52.117

每个绿色线程都与一个 Python 线程绑定，该 Python 线程与一个 OS 线程绑定。*理论上，Eventlet 可以在多个 Python 线程中分配绿色线程，因此也可以在 OS 线程中分配，但由于Python 代码*不会在 CPython [1] 上并行执行，因此这项工作量很大，但收益甚微。

经验法则：如果你想使用多个核心，~~选择其他语言~~使用 Python，您最好的选择是运行多个进程。快速方法是`multiprocessing`[2]（自 2.6 起在 stdlib 中），稳健方法是`os.fork`手动 [3][4]。

*稍微澄清一下术语：* 对于大多数流行的操作系统，并行执行代码的唯一方法是拥有多个操作系统线程。严格来说，您的请求不是并行处理的，而是并发处理的；正是因为只有一个操作系统线程。在任何给定时刻，只有一个绿色线程执行某些代码。顺便说一句，同样的限制适用于常规 Python 线程，这就是为什么 Eventlet（或其他绿色线程库）大多只是作为替代品工作，并且（大多数情况下）不会导致任何新的异常错误。

您可能会发现这个答案很有用：[https ://stackoverflow.com/posts/14227272/revisions](https://stackoverflow.com/posts/14227272/revisions)

[1] [http://wiki.python.org/moin/GlobalInterpreterLock](http://wiki.python.org/moin/GlobalInterpreterLock)
[2] [http://docs.python.org/2/library/multiprocessing.html](http://docs.python.org/2/library/multiprocessing.html)
[3] [http://docs.python.org/2 /library/os.html#os.fork](http://docs.python.org/2/library/os.html#os.fork)
[4] [https://github.com/jonashaag/bjoern/blob/master/tests/fork.py](https://github.com/jonashaag/bjoern/blob/master/tests/fork.py)

# javascript - 用于构建堆积面积图的免费 JavaScript/jQuery 库

> ID：15287115
> 
> 赞同：3
> 
> 时间：2013-03-08T05:08:13.893
> 
> 标签：javascript, jquery

我正在寻找允许构建图表的免费 JS/jQuery 库。现在我有必要建立堆积面积图。

找到了描述可能很少的最佳选项的链接（[http://www.1stwebdesigner.com/css/top-jquery-chart-libraries-interactive-charts/](http://www.1stwebdesigner.com/css/top-jquery-chart-libraries-interactive-charts/)），但是：

1.  jQuery Visualize 插件 - 看起来它不能构建堆叠区域

2.  Highcharts - 需要许可

3.  Flot - 看起来它不能构建堆叠区域，没有好的文档

4.  jQuery Sparklines - 仅适用于迷你图吗？

5.  jqPlot - 找不到堆叠区域...

因此有一堆，但找不到适合我需要的。

有人对这些或其他用于构建图表的库有任何好的经验吗？你能推荐你的选择吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:39:46.463

[d3](http://d3js.org/)适合生成图表。

*   [堆积面积图示例](http://bl.ocks.org/mbostock/3885211)
*   [堆积条形图示例](http://bl.ocks.org/mbostock/1134768)
*   [更多示例...](https://github.com/mbostock/d3/wiki/Gallery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:15:07.543

谷歌图表非常好。链接[在这里](https://developers.google.com/chart/)

他们还有一个非常酷的游乐场，在那里你可以看到各种可用的图表、他们的代码、示例、现场演示和一些有趣的东西可以尝试。单击[此处查看游乐场](https://code.google.com/apis/ajax/playground/?type=visualization)

# iphone - Base64 编码图像在传输到服务器期间损坏

> ID：15287116
> 
> 赞同：5
> 
> 时间：2013-03-08T05:08:21.737
> 
> 标签：iphone, objective-c, cocoa-touch, nsurlconnection, nsurlrequest

由于某种原因，我无法使用 post 方法将 jpeg 文件上传到服务器`NSURLRequest`

我有一个使用相同 php 代码的 android 应用程序，可以通过将图像转换为字节数组然后使用**base64**编码发送和接收来很好地上传和下载图像。

我的 iPhone 应用程序可以很好地下载图像，php 脚本使用**base64**编码，我在我的 iPhone 应用程序中使用**base64解码器，然后将其转换为图像。**这工作正常。

但是，图像的上传不起作用。

我将图像转换为**base64**编码字符串（我对 base64 编码使用了几种不同的方法，**它们**都给出相同的结果）然后我发布到服务器，在服务器端解码并保存到服务器上的文件。

服务器上生成的解码文件是损坏的 jpeg 图像。损坏的文件大小是应有的字节数的 3 倍。

为上传生成的**base64**编码字符串也与从服务器下载相同jpeg文件时生成的base64编码字符串（即我使用ftp服务上传的有效图像文件）有很大不同。

下面显示了我的代码以及用于接收图像的 php 脚本。

我相信转义字符会发生一些事情，这会导致**base64**字符串在传输过程中损坏，但无法解决。

为什么我的**base64**字符串在传输过程中被损坏？

```
NSString* comments = @"comments to go with image";

NSData *data = UIImageJPEGRepresentation(_imageView.image, 1);
NSString *base64EncodedImage = [NSString base64StringFromData: data length: data.length];

//load the team posts so we know what items have been posted and what haven't
NSMutableDictionary *postDict = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                 comments, @"comment",
                                 base64EncodedImage , @"image",
                                 nil];

NSMutableArray *parts = [[NSMutableArray alloc] init];
for (NSString *key in postDict) {
    NSString *part = [NSString stringWithFormat: @"%@=%@", key, [postDict objectForKey:key]];
    [parts addObject:part];
}

NSString *encodedDictionary = [parts componentsJoinedByString:@"&"];

NSData *postData = [encodedDictionary dataUsingEncoding:NSUTF8StringEncoding];

NSString* url = @"http://www.scroppohunt.com/upload.php";
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                                   timeoutInterval:10.0];
[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"%d", postData.length] forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
if (connection) {
    _data = [[NSMutableData data] init];

} 
```

以及接收图像的 php 脚本

```
<?php

$comments = $_REQUEST['comment'];

//do some database stuff with the comments

////////////////////////////////////////
//save the file to the images folder
///////////////////////////////////////////

$base=$_REQUEST['image'];

if(strlen($base) > 0)
{

    // base64 encoded utf-8 string

    $binary=base64_decode($base);

    $file = fopen("postImages/test.jpg", 'wb');

    fwrite($file, $binary);

    fclose($file);
}

//display the bae64 encoded string taht was uploaded
echo $base; 
```

?>

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-03T08:10:41.120

好吧，你问这个问题已经有一段时间了，但如果有人（比如我）发现这个问题，这可能会有所帮助：

在您的 Base64 编码图像中，您应该将所有出现的“+”字符替换为“%”字符。翻译成代码，它会是：

```
NSString* encodedImageString = [base64EncodedImage stringByReplacingOccurrencesOfString:@"+" withString:@"%2B"]; 
```

然后，而不是添加`base64EncodedImage`in `postDict`，您应该添加`encodedImageString`.

这样，您的 postDict 将如下所示：

```
NSMutableDictionary *postDict = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                 comments, @"comment",
                                 encodedImageString , @"image",
                                 nil]; 
```

我认为这将解决问题，至少对我来说是这样。

干杯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-21T23:44:00.007

我也有这个问题。对我来说，发生的事情是所有的“+”在发送到服务器后都被替换为“空格”。没有其他这样的腐败：

[![在此处输入图像描述](../Images/061f26ad39a338fb645a28a625c31651.png)](https://i.stack.imgur.com/U1c7M.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T07:40:50.587

尝试更改内容类型。

```
[request setValue:@"image/jpeg" forHTTPHeaderField:@"Content-Type"]; 
```

# java - 如何将一个活动中的参数传递给另一个活动？

> ID：15287117
> 
> 赞同：0
> 
> 时间：2013-03-08T05:08:22.110
> 
> 标签：java, android

我根据他们从一个活动到另一个活动的点击在列表视图中传递参数，它在传递参数行 firs activity.java 的日志 cat 中显示错误

```
public class SouthIndianvegrecipes1  extends Activity {
     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            ArrayList<Recipedetails> image_details = GetSearchResults();

            final ListView lv1 = (ListView) findViewById(R.id.listV_main);
            lv1.setAdapter(new ItemListBaseAdapter(this, image_details));

            lv1.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                    Object o = lv1.getItemAtPosition(position);
                    Recipedetails obj_itemDetails = (Recipedetails)o;
                    Toast.makeText(SouthIndianvegrecipes1.this, "You have chosen : " + " " + obj_itemDetails.getName(), Toast.LENGTH_LONG).show();
                     Intent newActivity = new Intent(SouthIndianvegrecipes1.this, 
                                SouthIndianvegmanualrecipes.class );  

                    newActivity.putExtra("name", obj_itemDetails.getName());
                                startActivity(newActivity);

                } 
            });
        }

        private ArrayList<Recipedetails> GetSearchResults(){
            ArrayList<Recipedetails> results = new ArrayList<Recipedetails>();

            Recipedetails item_details = new Recipedetails();
            item_details.setName("Godhumai veg adai");
            item_details.setItemDescription("This is very good for dibets people");
            //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber(12);
            results.add(item_details);

            item_details = new Recipedetails();
            item_details.setName("Soyamore koozh");
            item_details.setItemDescription("Tasty to have this as main dish");
            //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber(13);
            results.add(item_details);

            item_details = new Recipedetails();
            item_details.setName("Tomato kulambu");
            item_details.setItemDescription("Good side dish for rice and dinner");
            //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber(14);
            results.add(item_details);

            item_details = new Recipedetails();
            item_details.setName("Tomato upma");
            item_details.setItemDescription("Evening time  dinner for kids");
            //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber(15);
            results.add(item_details);

            item_details = new Recipedetails();
            item_details.setName("Navratri special vada");
            item_details.setItemDescription("Good snacks at the function");
            //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber(16);

            results.add(item_details);

            item_details = new Recipedetails();
            item_details.setName("Egg kurma");
            item_details.setItemDescription("Wonderful dish made by egg");
            //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber(17);
            results.add(item_details);

            item_details = new Recipedetails();
            item_details.setName("Milagu kuzhambu");
            item_details.setItemDescription("Good for digestion purpose");
            //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber(18);
            results.add(item_details);

            item_details = new Recipedetails();
            item_details.setName("Rasam");
            item_details.setItemDescription("Last and famous dish in lunch,good for health also");
            //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber(19);
            results.add(item_details);

            item_details = new Recipedetails();
            item_details.setName("Vegetable kootu");
            item_details.setItemDescription("Nice and healthy one");
            //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber(20);
            results.add(item_details);

            item_details = new Recipedetails();
            item_details.setName("Avial");
            item_details.setItemDescription("Easy to prepare and lots of vegetable");
            //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber(21);
            results.add(item_details);

            item_details = new Recipedetails();
            item_details.setName("kothavarangaicurry");
            item_details.setItemDescription("Tamilnadu special and healthy too");
            //item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber(22);
            results.add(item_details);

            return results;
        }

}
passing the arguments after toasting ,passing their names
second activity.java

    public class SouthIndianvegmanualrecipes  extends Activity {

        @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.recipe_manual);
}

           String value =null; 
          Bundle extras = getIntent().getExtras();
 {
      if (extras != null) {
         if (extras.containsKey("name")) {
            value = extras.getString("name");
         }
      } 

        {
        //int obj_itemDetails.getImageNumber() = extras.getIntArray("numbers");

            //private ArrayList<Recipedetails2> GetSearchResults(){
                //ArrayList<Recipedetails2> results = new ArrayList<Recipedetails2>();

            if(value.equals("Godhumai veg adai"))
            {
                Recipedetails2 item_details = new Recipedetails2();
                item_details.setName("Godhumai veg adai");
                item_details.setIngredients("This is very good for dibets people");
                item_details.setMethods("This is very good for dibets people");

            }
            else if(value.equals("Soyamore koozh"))
            {
                Recipedetails2 item_detail1 = new Recipedetails2();
                item_detail1.setName("Soyamore koozh");
                item_detail1.setIngredients("Tasty to have this as main dish");
                item_detail1.setMethods("This is very good for dibets people");
            }
            else if(value.equals("Tomato kulambu"))
            {
                Recipedetails2 item_detail3 = new Recipedetails2();
                item_detail3.setName("Tomato kulambu");
                item_detail3.setIngredients("Good side dish for rice and dinner");
                item_detail3.setMethods("This is very good for dibets people");

            }
            else if(value.equals("Navratri special vada"))
            {
                Recipedetails2 item_detail5 = new Recipedetails2();
                item_detail5.setName("Navratri special vada");
                item_detail5.setIngredients("Good snacks at the function");
                item_detail5.setMethods("This is very good for dibets people");

            }
            else if(value.equals("Egg kurma"))
            {
                Recipedetails2 item_detail6 = new Recipedetails2();
                item_detail6.setName("Egg kurma");
                item_detail6.setIngredients("Wonderful dish made by egg");
                item_detail6.setMethods("This is very good for dibets people");

            }
            else if(value.equals("Milagu kuzhambu"))
            {
                Recipedetails2 item_detail7 = new Recipedetails2();
                item_detail7.setName("Milagu kuzhambu");
                item_detail7.setIngredients("Good for digestion purpose");
                item_detail7.setMethods("This is very good for dibets people");

            }

            else if(value.equals("Rasam"))
            {
                Recipedetails2 item_detail8 = new Recipedetails2();
                item_detail8.setName("Rasam");
                item_detail8.setIngredients("Last and famous dish in lunch,good for health also");
                item_detail8.setMethods("This is very good for dibets people");

            }

            else if(value.equals("Vegetable kootu"))
            {
                Recipedetails2 item_detail9 = new Recipedetails2();
                item_detail9.setName("Vegetable kootu");
                item_detail9.setIngredients("Nice and healthy one");
                item_detail9.setMethods("This is very good for dibets people");

            }

            else if(value.equals("Avial"))
            {
                Recipedetails2 item_detail10 = new Recipedetails2();
                item_detail10.setName("Avial");
                item_detail10.setIngredients("Easy to prepare and lots of vegetable");
                item_detail10.setMethods("This is very good for dibets people");

            }

            else 
            {
                Recipedetails2 item_detail11 = new Recipedetails2();
                item_detail11.setName("kothavarangaicurry");
                item_detail11.setIngredients("Tamilnadu special and healthy too");
                item_detail11.setMethods("This is very good for dibets people");

            }

            }
    } 
```

它在这一行中显示错误 String value =getIntent().getStringExtra("name"); 我的日志猫错误是

```
03-08 04:52:09.754: E/AndroidRuntime(1048): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.recipestutors/com.example.recipestutors.SouthIndianvegmanualrecipes}: java.lang.NullPointerException
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at android.os.Handler.dispatchMessage(Handler.java:99)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at android.os.Looper.loop(Looper.java:137)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at android.app.ActivityThread.main(ActivityThread.java:5039)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at java.lang.reflect.Method.invokeNative(Native Method)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at java.lang.reflect.Method.invoke(Method.java:511)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at dalvik.system.NativeStart.main(Native Method)
    03-08 04:52:09.754: E/AndroidRuntime(1048): Caused by: java.lang.NullPointerException
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at com.example.recipestutors.SouthIndianvegmanualrecipes.<init>(SouthIndianvegmanualrecipes.java:79)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at java.lang.Class.newInstanceImpl(Native Method)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at java.lang.Class.newInstance(Class.java:1319)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
    03-08 04:52:09.754: E/AndroidRuntime(1048):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:28:24.847

请不要直接调用意图，而是尝试执行以下操作以检查一切是否正确，然后再尝试获取您正在寻找的值

```
String value =null; 

 Bundle extras = getIntent().getExtras();
      if (extras != null) {
         if (extras.containsKey("name")) {
            value = extras.getString("name");
         }
      } 
```

尝试在目标类（SouthIndianvegmanualrecipes）中定义公共静态字符串。例如： `public static String PRODUCT_NAME = "PRODUCT NAME PLACEHOLDER";`

然后在你的第一堂课上

`newActivity.putExtra(SouthIndianvegmanualrecipes.PRODUCT_NAME, obj_itemDetails.getName());`

在你的目标班级

```
 Bundle extras = getIntent().getExtras();
          if (extras != null) {
             if (extras.containsKey(PRODUCT_NAME)) {
                value = extras.getString(PRODUCT_NAME);
             }
          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:04:04.547

在第二个活动中，我们必须像这样放置它会起作用

```
@Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.recipe_manual);
            Intent intent = getIntent();
            String value = intent.getStringExtra("name"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:01:31.213

我猜`private Object getIntent;`是罪魁祸首。尝试从下面的代码中删除它。

```
public class SouthIndianvegmanualrecipes  extends Activity {

 private Object getIntent;

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.recipe_manual);

String value =getIntent().getStringExtra("name"); 
```

# java - 具有动态列的可编辑数据表

> ID：15287119
> 
> 赞同：0
> 
> 时间：2013-03-08T05:08:34.763
> 
> 标签：java, richfaces, seam, jboss5.x, jsf-1.2

我在 JBoss 5 上部署了一个 Seam 2.2 JSF 1.2 应用程序。我需要创建一个包含复杂、可编辑数据表的页面；数据显示在横向和向下。

我有一个员工：

```
Employee {
    int id;
    String name;
    ...
} 
```

我有认证类型：

```
Certs {
    int id;
    String certType;
    ...
) 
```

我有员工举办的 Certs 类型的活动：

```
Events {
    int id;
    int employeeId;
    int certId;
    Date start;
    Date end;
    ...
} 
```

我需要通过动态生成的证书类型显示数据（证书列的数量在用户选择它们之前是未知的），如果选择了多个证书类型并且员工没有该证书类型的事件，则该证书类型的单元格应该为空。

![有效的 XHTML](../Images/b2c766aa2203cee58c20b190dc4d54eb.png)

我可以使用rich:datatable 和rich:columns 和rich:column 生成正确的格式，但这只是显示——我需要能够就地编辑行。

我正在使用 HtmlDataTable 在支持 bean 中生成表，但 Seam 不能很好地与 JSF 绑定配合使用。

对我来说，最难理解的是使垂直数据（具有相关事件信息的员工，每个事件一行）水平（员工事件事件）。

有人对有效处理此问题的最佳方法有任何建议或建议吗？

我会发布我尝试过的内容，但这已经很长了，所以我会根据需要添加更多内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:46:12.283

我最终做的是使用组件的组合来完成这项工作。我创建了一个将员工数据行转换为一行的对象。所以从数据库返回的数据：Jones certtype1 start end

琼斯 certtype2 开始结束

琼斯 certtype3 开始结束

变成：

琼斯 certtype1（开始，结束） certtype2（开始，结束） certtype3（开始，结束）

并像这样组织它：

```
 <rich:dataTable id="acadCertList"
value="#{myCertBean.employeeCertEventObjects}"
var="_certs" rowKeyVar="row" >

  <f:facet name="header">

<rich:columnGroup>
    <rich:column>
        <h:outputText value="Row" />
    </rich:column>
    <rich:column>
    <h:outputText value="Name" />
    </rich:column>

  <!-- dynamically create the certType1, certType2 …  column headers -->
    <rich:columns value="#{myCertBean.selectedCertTypeList}"
            var="_selCrtType" colspan="2">
        <h:outputText value="#{_selCrtType.certType}" />
    </rich:columns>
</rich:columnGroup>
 </f:facet>

 <rich:subTable value="#{_certs}" var="_cEmpObj">
<f:facet name="header">
  <!-- repeat start end column headers for each certType -->

    <rich:columnGroup>
        <rich:column>
 </rich:column>
        <rich:column>
        </rich:column>
        <c:forEach items="#{myCertBean.selectedCertTypeList}">
 <rich:column>
                <h:outputText value="Start" />
            </rich:column>
 <rich:column 
                <h:outputText value="End" />
            </rich:column>
 </c:forEach>
    </rich:columnGroup>
</f:facet>
 <!-- load data for each row -->

<rich:column id="row_#{row}">
    <h:outputText value="#{row+1}" />
</rich:column>
<rich:column id="name_#{row}">
    <h:outputText value="#{_cEmpObj.name}/>
</rich:column>

<c:forEach items="#{myCertBean.selectedCertTypeList}" varStatus="status">
    <rich:column id="curexp_#{status.index}" 
        <h:outputText
 value="#{_cEmpObj.certEventsByCertTypeSysid[status.index].startDate}" />
    </rich:column>
    <rich:column id="curexp_#{status.index}" 
        <h:outputText
 value="#{_cEmpObj.certEventsByCertTypeSysid[status.index].endDate}" />
    </rich:column>
 </c:forEach> 

 </rich:subTable>

 </rich:dataTable> 
```

# java - 如何将选定的信息从 Android 手机发送到酒店管理软件

> ID：15287120
> 
> 赞同：-5
> 
> 时间：2013-03-08T05:08:36.997
> 
> 标签：java, android

我正在为餐厅开发我的第一个 android 应用程序，我希望客户在其中从菜单中选择食谱。现在根据我的需要，我必须将特定客户的订单发送到前台运行的酒店管理软件。我被以下问题困扰：

1.  如何区分订单身份和个人客户？

2.  如何向酒店管理软件发送确认并向客户发送已下订单的响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:26:41.353

**第一个要求**您有服务器端
您必须在服务器端创建一个数据库，因此通过使用 clientid 您可以区分客户端。用于在酒店管理软件中发送数据。您需要服务器端，以便您可以发送请求。通过使用 1) XML 解析[http://developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)

更好地使用 JSON OBJECT 它的轻量级，读取 JSON OBJECT 它需要解析它。
[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

根据您的请求，服务器将以 JSON OBJECT 的形式给您响应。

# backbone.js - 如何在主干中使用数组作为 id

> ID：15287122
> 
> 赞同：0
> 
> 时间：2013-03-08T05:08:46.433
> 
> 标签：backbone.js

在主干中，我有一个来自 Web 服务器的 json 结构，如下所示。（注意，我只会收到一堆文档，所以不适用于 RESTful 服务） **{ 'stations':[station1,station2], 'geo':[ lat1,lng1,lat2,lng2 ....]}**，其中 'stations' 数组只有两个数字表示公交车站编号，而 'geo' 表示两个车站之间的中间地理定位点。通常在应用程序中，我可以在任何数组 [station1,station2] 或 [station2,station1] 中获取站点数组，然后我使用此站点数组作为唯一 id 来获取“地理”数组 - 中间地理位置点。

例如，**{'stations':[38306,38304],'geo':[ 53.21579073715244,-2.8958864745734445,53.26019,-2.9422970000000532]}**，这意味着我有两个编号为 38306 和 38304 的站点，以及 4 长度代表数组地理点。

```
window.stanoxPoints = Backbone.Model.extend({
    defaults:{
        "stations":new Array(),
        "points":new Array()
    }           
});

window.stanoxPointsCollection = Backbone.Collection.extend({
  model: stanoxPoints,
  url:"http://localhost:8080/geo",
});

var stanoxCollection = new stanoxPointsCollection();
stanoxCollection.fetch({
        success:function(collection,response){
            console.log('fetch the data success');
            collection.each(function(data){
                console.log(data.get('stations')+"   "+data.get('points'));                             
            })
        },
        error:function(collection, response){
        }
    }) 
```

所以我上面简单的这样设计模型，使用集合取数据，但是当我想查询数据的时候，出现了问题，

```
stanoxCollection.get([38201,38202])    //undefined 
```

我的问题是，如果我只使用 'station' 数组来获取 'geo' 数组，我怎样才能使它成为 'station' 作为骨干模型中的 id 或索引，并且无论数组 'stations' 的顺序如何, ex [station1,station2] 或 [station2,station1] 它可以让我得到地理点的数组，只有当站的数组顺序颠倒时，地理数组的顺序也会颠倒。

现在我尝试了 idAttribute: 'stations'，所以由于原始 id 是 [38201,38202]，所以 console.log('fetch get by id', stanoxCollection.get([38201,38202]).get('points' ));// 工作 console.log('fetch get by id', stanoxCollection.get([38202,38201])); // 不适用于反向数组作为 id

有没有办法处理它？

# c# - 使用嵌套资源字典在 wpf 中动态更改主题

> ID：15287123
> 
> 赞同：2
> 
> 时间：2013-03-08T05:08:47.170
> 
> 标签：c#, wpf, data-binding, themes, resourcedictionary

我想要完成的是允许我的用户通过从列表中选择主颜色来更改我的应用程序的整体颜色主题。我已经完成了这项工作，但如果我能弄清楚如何去做，我注意到有一些事情可能会让我的生活更轻松。现在我有一个看起来像这样的主题文件夹。包含其他文件夹和通用资源字典的主题文件夹（即用于背景的画笔）。下一组文件夹是 RedTheme、BlueTheme 文件夹，每个文件夹都包含用于各个控件的资源字典；例如，BlueTheme 有一个用于按钮的资源字典，RedTheme 也有。我注意到的有趣的事情是资源字典几乎相同，除了只有一个 SolidColorBrush 的颜色。所以我' 我试图以某种方式绑定那个画笔，这样我就不会在相同资源字典的副本上复制只有一个区别。我会尽我所能输入我的代码，但它的性质已经足够复杂，实际上无法查看不同的字典。另外我应该补充一点，我在嵌套字典中嵌套字典。App.xaml 包含任何字典，它本身包含多个字典，被换入或换出主题更改和一些通用字典。另外我应该补充一点，我在嵌套字典中嵌套字典。App.xaml 包含任何字典，它本身包含多个字典，被换入或换出主题更改和一些通用字典。另外我应该补充一点，我在嵌套字典中嵌套字典。App.xaml 包含任何字典，它本身包含多个字典，被换入或换出主题更改和一些通用字典。

**ThemeBlue.xaml**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="BlueTheme/BlueBrushes.xaml"/>
        <ResourceDictionary Source="BlueTheme/ButtonStyleAndTemplate(normal_blue).xaml"/>
        <ResourceDictionary Source="BlueTheme/LabelStyleAndTemplate(normal_blue).xaml"/>
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

**ThemeRed.xaml**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="RedTheme/RedBrushes.xaml"/>
        <ResourceDictionary Source="RedTheme/ButtonStyleAndTemplate(normal_red).xaml"/>
        <ResourceDictionary Source="RedTheme/LabelStyleAndTemplate(normal_red).xaml"/>
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

**这是我希望发生动态更改**的地方 我只想在选择新主题时将画笔绑定在代码隐藏的某个位置，然后将该画笔弹出到我试图突出显示的位置，这样我只需要生成这些字典之一，而不是为每种颜色生成一个。

```
Style TargetType="{x:Type mycon:MyButton}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type mycon:MyButton}">
                    <Grid Margin="2">
                        <Ellipse Name="MainCircle" Fill="{DynamicResource ResourceKey=TranslucentBrush}" Stroke="{DynamicResource ResourceKey=***RedBorderBrush***}" />
                        <Ellipse Name="RefractionCircle" Fill="{DynamicResource ResourceKey=ButtonRefractionLayer}"/>
                        <mycon:ButtonTextBlock Margin="0,0,0,8" FontWeight="Black" FontSize="20" Foreground="{DynamicResource ResourceKey=***RedBorderBrush***}" Text="{TemplateBinding Content}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <Path x:Name="ReflectionLayer" VerticalAlignment="Top" Stretch="Fill">
                            <Path.RenderTransform>
                                <ScaleTransform ScaleY="0.5" />
                            </Path.RenderTransform>
                            <Path.Data>
                                <PathGeometry>
                                    <PathFigure IsClosed="True" StartPoint="98.999,45.499">
                                        <BezierSegment Point1="98.999,54.170" Point2="89.046,52.258" Point3="85.502,51.029"/>
                                        <BezierSegment IsSmoothJoin="True" Point1="75.860,47.685" Point2="69.111,45.196" Point3="50.167,45.196"/>
                                        <BezierSegment Point1="30.805,45.196" Point2="20.173,47.741" Point3="10.665,51.363"/>
                                        <BezierSegment IsSmoothJoin="True" Point1="7.469,52.580" Point2="1.000,53.252" Point3="1.000,44.999"/>
                                        <BezierSegment Point1="1.000,39.510" Point2="0.884,39.227" Point3="2.519,34.286"/>
                                        <BezierSegment IsSmoothJoin="True" Point1="9.106,14.370" Point2="27.875,0" Point3="50,0"/>
                                        <BezierSegment Point1="72.198,0" Point2="91.018,14.466" Point3="97.546,34.485"/>
                                        <BezierSegment IsSmoothJoin="True" Point1="99.139,39.369" Point2="98.999,40.084" Point3="98.999,45.499"/>
                                    </PathFigure>
                                </PathGeometry>
                            </Path.Data>
                            <Path.Fill>
                                <RadialGradientBrush GradientOrigin="0.498,0.526">
                                    <RadialGradientBrush.RelativeTransform>
                                        <TransformGroup>
                                            <ScaleTransform CenterX="0.5" CenterY="0.5" ScaleX="1" ScaleY="1.997"/>
                                            <TranslateTransform X="0" Y="0.5"/>
                                        </TransformGroup>
                                    </RadialGradientBrush.RelativeTransform>
                                    <GradientStop Offset="1" Color="#99FFFFFF"/>
                                    <GradientStop Offset="0.85" Color="#72FFFFFF"/>
                                    <GradientStop Offset="0" Color="#00000000"/>
                                </RadialGradientBrush>
                            </Path.Fill>
                        </Path>

                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="MainCircle" Property="Fill" Value="{DynamicResource ResourceKey=TransparentBrush}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="MainCircle" Property="Fill" Value="{DynamicResource ResourceKey=HighlitTranslucentBrush}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!-- EndRegion -->
</ResourceDictionary> 
```

--------主窗口后面的代码----------

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        SetDefaultStyle();
        populateCboTheme();
    }

    private void populateCboTheme()
    {
        cboTheme.Items.Add("Red");
        cboTheme.Items.Add("Blue");
        cboTheme.Items.Add("Green");
        cboTheme.Items.Add("Yellow");
    }

    private void SetDefaultStyle()
    {
        SetNewStyle("Red");
    }

    private void SetNewStyle(string _color)
    {
        Uri themeUri = new Uri(string.Format("Themes/Theme{0}.xaml",_color),UriKind.Relative);
        ResourceDictionary theme = (ResourceDictionary)Application.LoadComponent(themeUri);
        Resources.MergedDictionaries.Add(theme);
    }

    private void TitleBar_MouseDown(object sender, MouseButtonEventArgs e)
    {
        DragMove();
    }

    private void cboTheme_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        switch (cboTheme.SelectedIndex)
        {
        case 0:
            SetNewStyle("Red");
            break;
        case 1:
            SetNewStyle("Blue");
            break;
        case 2:
            SetNewStyle("Green");
            break;
        case 3:
            SetNewStyle("Yellow");
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:20:46.430

好的，所以 DHN 是对的......我展示了很多代码，但没有对我正在寻找的内容给出很多解释。自从这篇文章以来，我偶然发现了我正在寻找的答案。基本上，我没有将画笔和控件包装在一个资源字典中并将其交换进出，而是让控件字典指向一个通用的命名键画笔，并为每种颜色制作不同的画笔字典。尽管这个解决方案仍然存在重复代码的问题……它重复的 FAR 比以前少。

`<solidcolorbrush x:key="RedBorderBrush".../>`
现在是： `<solidcolorbrush x:key="BorderBrush".../>`
对于所有不同的颜色都相同。
然后我点`<... Fill="{dynamicresource resourcekey="BorderBrush"}"`。
然后当我交换颜色时（因为所有画笔字典都将它们的边框画笔命名为“BorderBrush”）颜色会正确改变。

# context-free-grammar - 上下文无关语法

> ID：15287125
> 
> 赞同：2
> 
> 时间：2013-03-08T05:08:50.127
> 
> 标签：context-free-grammar

我需要帮助理解这个概念。

书中指出

```
G1:
    A→0A1
    A→B
    B→# 
```

它声明`G1`生成字符串`000#111`

并显示一个过程

```
A → 0A1 → 00A11 → 000A111 → 000B111 → 000#111 
```

我明白这里发生了什么。我不确定的是它是否可以无限循环。

例如：

也可以使用这个过程`G1`生成`0#1`

```
A → 0A1 → 0B1 → 0#1 
```

这本书没有清楚地解释这部分。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:12:04.117

是的，任何产生式都可以应用无数次，从而生成（在这种情况下以及在大多数情况下）无限数量的字符串。^(此文法生成 0 n) #1 ^n形式的所有字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:11:32.547

是的，当然。给定的语法也会生成`0#1`语言。事情已经很清楚了。如您所见，生成的语言 0#1 是由相同语法生成的前一种语言的子集。

# javascript - 具有多种方法的 jQuery 插件

> ID：15287126
> 
> 赞同：0
> 
> 时间：2013-03-08T05:09:05.763
> 
> 标签：javascript, jquery, jquery-plugins, plugins

我将以一种很好的方式包装我的一些函数，为此我想使用 jQuery 方法。就像 jQuery 有很多方法一样

```
$.parseJson()
$.ajax()
$("div").text("hey my testing"); 
```

并且这两种方法都存在于同一个 jQuery 文件中。但是在阅读如何制作 jquery 插件时，它指定您不需要在同一个插件中创建多个函数。而是传递一个包含方法名称的参数作为字符串。

那么，下面的代码片段是正确的还是我需要对其进行一些更正。

```
<script type="text/javascript">
    (function ($) {
        $.fn.testMethod1 = function () {
            return $(this).each(function () { });
        };
        $.fn.testMethod2 = function () {
            return $(this).each(function () { });
        };
        $.test = function () {
            return "testresult"
        };
    })(jQuery);

    $("div1").testMethod1();
    $("div2").testMethod2();
    $.test();

    //Is that needed to be replace in a different way like
    $("div1").myPlugin("testMethod1");
    $("div1").myPlugin("testMethod2");
    $("div1").myPlugin("test");

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:14:09.030

第二种方式是首选，因为它在 jQuery 对象中保存命名空间。

阅读官方 jQuery 文档：[Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring "插件/创作")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:38:59.317

你有没有尝试使用[jquery 样板](http://jqueryboilerplate.com/)。开始学习 jQuery 插件开发是一个很好的起点。它提供了一个安全且（似乎）是创建插件的好解决方案。他们使用您的第二种方式调用方法。

# sql - 授予 SQL Server 2005 权限

> ID：15287129
> 
> 赞同：1
> 
> 时间：2013-03-08T05:09:33.640
> 
> 标签：sql, sql-server, sql-server-2005, ruby-on-rails-3.2

我正在使用 ruby​​ on rails 从远程 MS Sql 数据库中获取现有表。我在尝试运行应用程序时遇到此错误。

> ODBC::Error: 42000 (229) [Microsoft][ODBC SQL Server Driver][SQL Server]对象 'TeviceDetails'、数据库 'BObd'、架构 'dbo' 的 SELECT 权限被拒绝。: EXEC sp_executesql N'SELECT [TeviceDetails].* FROM [TeviceDetails]'

从论坛和其他网站，我了解到这是由于“服务器数据库拒绝许可”，并提到了几种解决方案来纠正这个问题。以下是我从论坛获得的解决方案。

但我的问题是，我真的不知道在哪里输入/授予这些权限。（它是在 ruby​​ 控制台还是 ODBC 控制台中。如果它在 ODBC 控制台中，我可以从哪里访问这个 ODBC 控制台？？）

```
USE msdb

CREATE USER [TheUser] FOR LOGIN [TheLogin]
GO

GRANT EXECUTE ON sp_start_job TO [TheUser]
GO

 SQLAgentUserRole
 SQLAgentReaderRole
 SQLAgentOperatorRole 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:28:39.467

请阅读这个答案。

[TSQL 为 MS SQL Server 授予 db_datareader 和 db_datawriter](https://stackoverflow.com/questions/456346/tsql-to-grant-db-datareader-and-db-datawriter-for-ms-sql-server)

您可以为数据库执行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:14:56.733

最简单的方法是在 SQL Server Management Studio 或 SSMS 中。它是从微软免费下载的。

[http://www.microsoft.com/en-us/download/details.aspx?id=8961](http://www.microsoft.com/en-us/download/details.aspx?id=8961)

您可以将这些输入到 ODBC 控制台中，但您也可以使用合适的工具来完成这项工作。

# apache-flex - 如何在 Adob e Flex3 中将幂数转换为固定十进制数

> ID：15287131
> 
> 赞同：0
> 
> 时间：2013-03-08T05:09:40.487
> 
> 标签：apache-flex, flex3

如何将指数转换为固定十进制。示例：2.5e12 ,0.12323e-11 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:48:17.917

在 Flash/Flex 中，您可以使用其中一个`NumberFormatter`类。下面是使用 Flex 3 (MX) 的示例`NumberFormatter`。看看每个提供的 API 的文档，它们彼此有点不同。

```
var n:Number = 3 * .0000000001;
trace(n); // 3e-10
var f:NumberFormatter = new NumberFormatter();
f.precision=10;
trace(f.format(n)); // 0.0000000003 
```

有 3 个 NumberFormatter 类，一个用于纯 Flash（非 Flex），一个用于 Flex 3 和 Flex 4 版本。第一个和最后一个也将格式化特定于用户区域设置的数字（在适当的情况下使用逗号而不是句点等）。

以下是文档的链接：

*   [Flash NumberFormatter](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/globalization/NumberFormatter.html)
*   [Flex 3 数字格式化程序](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/formatters/NumberFormatter.html)
*   [Flex 4 (Spark) NumberFormatter](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/formatters/NumberFormatter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:09:40.487

```
public function formatIntoFixedValue(value:Object):Object
            {
                var isNegativeNum:Boolean ;
                var isNegativeExp:Boolean;
                var isDecimal:Boolean;
                var splitNums:Array;
                var splitFixedNum:Array;
                var leftDecPlaceCount:Number=0;
                var rightDecPlaceCount:Number=0;
                var exponentNum=0;
                var finalNum:String;
                var valueNum:Number=Number(value);
                var valueStr:String = valueNum.toString(); 
```

> // 不是指数返回

```
 if(valueStr.indexOf("e")<0)
            return valueStr;

            if(valueNum<0) 
```

> // 数字是否为负

```
 isNegativeNum=true;
            else
                isNegativeNum=false;

            splitFixedNum= valueStr.split("e");

            if(Number(splitFixedNum[1])<0) 
```

> //指数是否为负

```
 isNegativeExp=true;
            else 
                isNegativeExp=false;

            exponentNum=Math.abs(Number(splitFixedNum[1]));//-7 
```

> // 删除空间
> splitFixedNum[0]=StringUtil.trimArrayElements(splitFixedNum[0],"");
> 
> // 如果存在，则从开头删除减号。splitFixedNum[0]=splitFixedNum[0].toString().replace("-","");
> 
> // 它正在删除 start 的 zeors

```
 finalNum=Number(splitFixedNum[0]).toString(); 
```

> // 是否为十进制

```
 if(finalNum.toString().indexOf(".")>=0)
            {
            isDecimal=true;
            }
            else 
            isDecimal=false; 
```

> /// 指数为零

```
 if(exponentNum==0)
            return finalNum; 
```

> // 如果 num 是十进制 if(isDecimal) { var expDiff:Number;

```
 splitNums= String(splitFixedNum[0]).split(".");

                splitNums[0]=Number(splitNums[0]).toString();
                if(splitNums[0]!="0")
                {

                finalNum=splitNums[0].toString().concat(splitNums[1]); 
                leftDecPlaceCount=splitNums[0].toString().length;

                }
                else
                {

                finalNum=splitNums[1]; 
                leftDecPlaceCount=0;
                }

                rightDecPlaceCount=splitNums[1].toString().length;

                if(isNegativeExp)
                    expDiff=exponentNum-leftDecPlaceCount;

                else
                    expDiff=exponentNum-rightDecPlaceCount; 
```

> //如果exp diff大于零连接零

```
 if(expDiff>0)
                {
                        var zeros:String="";

                        for(var i:Number=0;i<expDiff;i++)
                            zeros+="0";

                        if(isNegativeExp)   
                        finalNum="0."+zeros+finalNum;
                        else
                        finalNum= finalNum+zeros;   

                } 
```

> //如果 exp diff 小于零，则在数字之间移动 .(dot)

```
 else if(expDiff<0)
                {
                    var s:String;
                    expDiff= Math.abs(expDiff);
                    if(isNegativeExp)
                    s =finalNum.substr(0,expDiff)+"."+finalNum.substr(expDiff,finalNum.length);
                    else
                    s =finalNum.substr(0,(leftDecPlaceCount+rightDecPlaceCount)-expDiff)+"."+finalNum.substr((leftDecPlaceCount+rightDecPlaceCount)-expDiff,finalNum.length);
                    finalNum=s;
                }
                else
                {
                    if(isNegativeExp)
                    finalNum= "0."+finalNum;

                }
            }
            else
            {

                        var zeros:String="";

                        for(var i:Number=0;i<exponentNum-finalNum.length;i++)
                            zeros+="0";

                        if(isNegativeExp)   
                        finalNum="0."+zeros+finalNum;
                        else
                        finalNum= finalNum+zeros;
            }   

            if(isNegativeNum)
            finalNum ="-"+ finalNum;

            return finalNum.toString();
        } 
```

# css - 如果与 LESS 一起使用，@import 对性能的使用真的那么糟糕吗？

> ID：15287135
> 
> 赞同：0
> 
> 时间：2013-03-08T05:09:57.943
> 
> 标签：css, wordpress-theming, less

我计划将我的 LESS CSS 分成多个文件，以模块化我的 CSS 并使其更易于管理和维护。最终，我将使用@import 将我所有的模块化 CSS 文件导入到一个文件中，该文件将在 WordPress 中排队。

@import 对性能来说是个坏主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:42:18.460

是的，使用多个导入将导致浏览器必须发出等量的文件请求。

只要您将 LESS 源代码编译成 CSS 文件并将该 CSS 文件包含为您网站的样式表，性能就不会成为问题。

例如，当您制作 Wordpress 主题时，您可以为您的 CSS 创建一个文件夹，然后使用例如[simpLESS](http://wearekiss.com/simpless)（如果您在 Windows 上）示例模板目录结构进行编译：

```
-themes/
  -your-theme/
    -less/
      -main.less
      -import.less
      -etc.
    -style.css <- this is the target file you would compile into
    -index.php
    -etc. 
```

您可以设置目标文件以轻松编译。此外，simpLESS 将在结果文件中保留第一个顶级评论，以便您可以将主题信息放入其中。

# web-services - 如何为通行证注册推送通知

> ID：15287136
> 
> 赞同：0
> 
> 时间：2013-03-08T05:09:59.130
> 
> 标签：web-services, ios6, passbook

我已阅读 Passbook Web 服务参考，但我不知道如何实现它。我们如何使用 webserviceURL、版本等参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:13:51.987

您需要根据文档创建 Web 服务，然后将您的 webserviceURL 和 authenticationToken 密钥添加到您的 pass.json。

然后，当您的通行证被安装到设备中时，该设备将调用您的 Web 服务来注册 deviceID 和 deviceToken。

有几点需要注意：

*   对于生产，您的 Web 服务必须使用 https（您可以通过在测试设备上的开发人员设置中设置切换来使用 http 进行开发）
*   iOS 模拟器不调用 Web 服务，所有 Web 服务测试都需要在设备上完成

# django - virtualenv 无法处理项目

> ID：15287141
> 
> 赞同：0
> 
> 时间：2013-03-08T05:10:57.513
> 
> 标签：django, terminal, virtualenv, virtualbox

我一直在尝试按照此特定指南设置工作功能，在该功能中我可以在 virtualenv 中快速从项目切换到项目... [https://python-guide.readthedocs.org/en/latest/dev/虚拟环境/](https://python-guide.readthedocs.org/en/latest/dev/virtualenvs/)

我正在尝试将我的 virtualenv 重新组织到一个特定的文件夹中（我不知道这是一个聪明还是愚蠢的想法......）：

结构：

```
-master_folder/                 #I'm currently in this folder
  -virtual_enviornments/
     -project1/
     -project2/
  -projects/
     -project1/
     -project2/ 
```

碰巧我被困在第三步：

```
 $ pip install virtualenvwrapper
 $ export WORKON_HOME=~/Envs
 $ source /usr/local/bin/virtualenvwrapper.sh      #STUCK HERE 
```

错误： `-bash: /usr/local/bin/virtualenvwrapper.sh: No such file or directory`

我知道该文件在目录中不存在，所以我应该以其他方式创建它吗？我真的很困惑...@.@

运行后`which virtualenv`：

```
 /Library/Frameworks/Python.framework/Versions/2.7/bin/virtualenv 
```

我是否错误地安装了我的 virtualenv？我只是做了`pip install virtualenv`....

感谢所有的帮助家伙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:53:20.790

我认为您没有正确安装虚拟环境。

请通过此链接

[http://ayarshabeer.com/post/50973941605/install-multiple-django-version-using-virtualenvwrapper](http://ayarshabeer.com/post/50973941605/install-multiple-django-version-using-virtualenvwrapper)

# turing-machines - 图灵机在输入类似于 000111 时结束

> ID：15287142
> 
> 赞同：0
> 
> 时间：2013-03-08T05:11:00.553
> 
> 标签：turing-machines

我们有一个随机 0 和 1 的磁带，如何设计一个在输入像 #000111# 时结束的车床，其中 0 和 1 的数字相等。

家庭作业。第一次发帖，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:21:57.783

你甚至不需要图灵机来做这个......

不放弃太多这相当于上下文无关语法

```
A => BC

B => B | 0B | 1B | empty

C => 01 | 0C1 
```

所以你真正需要的只是一个堆栈（这很容易用超过 2 个磁带或对 1 个磁带进行一些有趣的管理来实现）。

# python - 从多个远程进程生成合并日志

> ID：15287147
> 
> 赞同：0
> 
> 时间：2013-03-08T05:11:18.870
> 
> 标签：python, logging

我有在网络上的多个主机上生成另一个脚本的脚本。这些脚本生成我想要捕获的输出。所以我现在能看到的唯一选择是：

*将每个进程的输出记录在单独的文件中（如 20130308.hostname.log 等）。*

有没有办法从所有进程中生成一个合并日志？合并我的意思是这样的：

```
host1:
outputline1
outputline2

host2:
outputline1
outputline2
outputline3

host3:
... 
```

我希望能够打开一个文件 - 并检查特定主机上发生的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:16:28.013

如果我很好地理解了您的问题，您希望将多个进程登录到一个文件中。有比您建议的更好的选择，请查看 python[日志记录食谱](http://docs.python.org/2/howto/logging-cookbook.html)。“多个模块”和“多个处理程序”应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:19:39.677

您可以使用像 syslog 这样的集中式日志系统，将所有日志消息聚合到一个中央日志中。Python 的日志记录模块为此提供了一个 SyslogHandler。

要将单个日志文件手动聚合到一个日志文件中，您必须编写一个脚本来执行聚合和合并。

# java - Android videoview不播放rtsp

> ID：15287150
> 
> 赞同：3
> 
> 时间：2013-03-08T05:11:32.180
> 
> 标签：java, android, android-videoview, rtsp

我有以下简单的 Android 应用程序。

```
package com.example.videotest;

public class MainActivity extends Activity {

private Button playButton;
private Button clearButton;
private Button stopButton;
private Button defaultButton;
private VideoView mVideoView;
private EditText editText;
private String videoAddress;
private static final String TAG = "videoTest"; 
private String keyValue = "videoAddress";
private String defaultAddress = "rtsp://v6.cache7.c.youtube.com/CjYLENy73wIaLQlpqssvHCj9nxMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYLXw9ZeX2OLcUAw=/0/0/0/video.3gp";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    SharedPreferences prefs = this.getSharedPreferences(TAG, 0);

    videoAddress = prefs.getString(keyValue, defaultAddress);

    playButton = (Button)findViewById(R.id.button1);
    clearButton = (Button)findViewById(R.id.button2);
    stopButton = (Button)findViewById(R.id.button3);
    defaultButton = (Button)findViewById(R.id.button4);

    mVideoView = (VideoView) findViewById(R.id.videoView1);
    editText = (EditText)findViewById(R.id.editText1);
    editText.setText(videoAddress);

    defaultButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

             editText.setText(defaultAddress);
             SharedPreferences appSettings =  getSharedPreferences(TAG, 0);
             SharedPreferences.Editor prefEditor = appSettings.edit();          
             prefEditor.putString(keyValue, defaultAddress);    
             prefEditor.commit();

        }
    });

    stopButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

             mVideoView.stopPlayback();

        }
    });

    playButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            videoAddress = editText.getText().toString();
             SharedPreferences appSettings =  getSharedPreferences(TAG, 0);
             SharedPreferences.Editor prefEditor = appSettings.edit();          
             prefEditor.putString(keyValue, videoAddress);  
             prefEditor.commit();
             //PlayRtspStream("rtsp://10.0.0.32:5004/aac5.sdp");
             PlayRtspStream(videoAddress);

        }
    });

    clearButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

             editText.setText("");
             SharedPreferences appSettings =  getSharedPreferences(TAG, 0);
             SharedPreferences.Editor prefEditor = appSettings.edit();          
             prefEditor.putString(keyValue, "");    
             prefEditor.commit();

        }
    });

}

private void PlayRtspStream(String rtspUrl){  
    mVideoView.setVideoPath(rtspUrl);
    //mVideoView.setVideoURI(Uri.parse(rtspUrl));  
    mVideoView.requestFocus();  
    mVideoView.start();  
}  

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
} 
```

AndroidManifest.xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.videotest"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.videotest.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

当我运行应用程序并将视频视图的视频路径设置为默认地址时，我收到提示“无法播放视频”。这是 logcat 文件。

```
03-07 21:09:51.305: D/MediaPlayer(20031): Couldn't open file on client side, trying server side
03-07 21:09:51.305: E/MediaPlayer(20031): Unable to to create media player
03-07 21:09:51.305: W/VideoView(20031): Unable to open content: rtsp://v6.cache7.c.youtube.com/CjYLENy73wIaLQlpqssvHCj9nxMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYLXw9ZeX2OLcUAw=/0/0/0/video.3gp
03-07 21:09:51.305: W/VideoView(20031): java.io.IOException: setDataSource failed.: status=0x80000000
03-07 21:09:51.305: W/VideoView(20031):     at android.media.MediaPlayer._setDataSource(Native Method)
03-07 21:09:51.305: W/VideoView(20031):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:958)
03-07 21:09:51.305: W/VideoView(20031):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:946)
03-07 21:09:51.305: W/VideoView(20031):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:899)
03-07 21:09:51.305: W/VideoView(20031):     at android.widget.VideoView.openVideo(VideoView.java:236)
03-07 21:09:51.305: W/VideoView(20031):     at android.widget.VideoView.setVideoURI(VideoView.java:198)
03-07 21:09:51.305: W/VideoView(20031):     at android.widget.VideoView.setVideoURI(VideoView.java:188)
03-07 21:09:51.305: W/VideoView(20031):     at android.widget.VideoView.setVideoPath(VideoView.java:184)
03-07 21:09:51.305: W/VideoView(20031):     at com.example.videotest.MainActivity.PlayRtspStream(MainActivity.java:109)
03-07 21:09:51.305: W/VideoView(20031):     at com.example.videotest.MainActivity.access$6(MainActivity.java:108)
03-07 21:09:51.305: W/VideoView(20031):     at com.example.videotest.MainActivity$3.onClick(MainActivity.java:85)
03-07 21:09:51.305: W/VideoView(20031):     at android.view.View.performClick(View.java:4204)
03-07 21:09:51.305: W/VideoView(20031):     at android.view.View$PerformClick.run(View.java:17355)
03-07 21:09:51.305: W/VideoView(20031):     at android.os.Handler.handleCallback(Handler.java:725)
03-07 21:09:51.305: W/VideoView(20031):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-07 21:09:51.305: W/VideoView(20031):     at android.os.Looper.loop(Looper.java:137)
03-07 21:09:51.305: W/VideoView(20031):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-07 21:09:51.305: W/VideoView(20031):     at java.lang.reflect.Method.invokeNative(Native Method)
03-07 21:09:51.305: W/VideoView(20031):     at java.lang.reflect.Method.invoke(Method.java:511)
03-07 21:09:51.305: W/VideoView(20031):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-07 21:09:51.305: W/VideoView(20031):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-07 21:09:51.305: W/VideoView(20031):     at dalvik.system.NativeStart.main(Native Method)
03-07 21:09:51.315: D/VideoView(20031): Error: 1,0 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-10T17:22:10.953

由Praful解决，在Manifest.xml中添加Internet权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.videotest"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.videotest.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# c# - 根据当前月份、日期和工作日名称返回数据

> ID：15287152
> 
> 赞同：0
> 
> 时间：2013-03-08T05:11:41.480
> 
> 标签：c#, winforms, datetime

C#、Windows 窗体和 Visual Studio 的新手。我已经四处寻找，真的不知道从哪里开始。我已经成功构建了一个简单的 Windows 窗体，它将使用 DateTime.Today 显示日期名称、当前月份、日期，但现在我需要弄清楚如何设置和存储要根据这些变量提取的值。我正在考虑使用数组来存储数据。有人可以让我知道我是否在正确的轨道上。

```
 Array to store the Months and the data that is associated with each month
 Array to store the Weekday and the data that is associated with each weekday
 Array to store the Days and the data that is associated with each day 
```

然后我要做的就是弄清楚如何提取数组中关联的数据，然后将其设置为将在文本框中显示的变量。如果有人能指出我正确的方向或可能将我链接到一些很好的工作示例，那就太好了。

更新：

这是我用来获取我需要的数据的内容，刚刚从我创建的数组中引用了它

```
 int cDay = DateTime.Today.Day - 1;
 int cWeekDay = (int)System.Globalization.CultureInfo.InvariantCulture.Calendar.GetDayOfWeek(DateTime.Now) - 1;
 int cMonth = DateTime.Today.Month - 1; 
```

然后我加入了数据使用

```
 months[cMonth] + weekdays[cWeekDay] + days[cDay]; 
```

我创建的数组的月份、工作日、日期在哪里

# matlab - MATLAB - 追求曲线（捕食者/猎物）

> ID：15287158
> 
> 赞同：3
> 
> 时间：2013-03-08T05:12:08.807
> 
> 标签：matlab, simulation, differential-equations

在我的工程课上，我们正在编写一个“非平凡的”捕食者/猎物追捕问题。

这是情况的要点：有一个猎物正试图逃离捕食者。每个都可以建模为可以在 MATLAB 中动画的粒子（我们必须使用这种编码语言）。

猎物：比捕食者更容易操纵（转弯）捕食者：可以比猎物移动得更快

我必须为捕食者和猎物创建代码，这些代码将用于班级比赛。

这基本上是最终产品的样子： [http ://www.brown.edu/Departments/Engineering/Courses/En4/Projects/pred_prey.gif](http://www.brown.edu/Departments/Engineering/Courses/En4/Projects/pred_prey.gif)

目标是在最短的时间内捕捉到对方的猎物，让我的猎物变得无法被对方的捕食者捕捉（或者至少在很长一段时间内逃脱）。

以下是具体的设计约束： 3\. 设计约束：捕食者和猎物只能在 xy 平面内移动 模拟将运行 250 秒的时间段。捕食者和猎物都将受到三种力量的影响： (a) 推进力；(b) 粘性阻力；(c) 随机的时变力。（给出所有方程） 1\. 推进力将由两个竞争群体提供的函数确定 如果捕食者和猎物之间的距离低于 1m，则假设捕食者捕获猎物。你不能使用 rand() 函数来计算你的捕食者/猎物力量——唯一的随机力量应该是那些由提供的脚本生成的力量。（具有随机力的 EOM 对于 ODE 求解器来说是不可能积分的，它最终会陷入无限循环）。对于比赛，我们将提供 MATLAB 代码，用于计算和动画参赛者的轨迹，并确定每场比赛的获胜者。测试代码将以 SI 单位运行。

我正在寻找任何可以帮助我制定策略的资源。我看过基本的追逐曲线，但我很想看一些猎物没有直线移动的例子。任何其他编码建议或策略将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:33:17.477

从任何领域的基础开始都是一个好主意，而且你不能[错过 Issacs](http://en.wikipedia.org/wiki/Rufus_Isaacs_%28game_theorist%29)的工作（[微分博弈：一种应用于战争和追击、控制和优化的数学理论](https://rads.stackoverflow.com/amzn/click/com/0486406822)）。这几乎肯定会成为您最终撰写的任何学术研究项目的参考。

Steven Lavalle 的优秀著作[Motion Planning](http://planning.cs.uiuc.edu/)有很多方面可能会让人感兴趣，包括关于基于可见性的[追逃](http://planning.cs.uiuc.edu/ch12.pdf)的部分。

至于许多数学主题，Wolfram Mathworld 有一些很好的图表和链接，可能会让您朝着正确的方向思考（例如[Pursuit Curves](http://mathworld.wolfram.com/PursuitCurve.html)）。

如果你想看看一个很好理解的领域中的一个奇怪的问题，试试[Homicidal 司机问题](http://en.wikipedia.org/wiki/Homicidal_chauffeur_problem)- 这至少会给你一些比较不同技术的复杂性/效率的理由。特别是，这可能是了解水平集方法的好方法（Patsko 和 Turova 的论文[Homicidal Chaueur Game. Computation of Level Sets of the Value Function](http://www-m6.ma.tum.de/~turova/html/maas.pdf)似乎有许多可能有用的图像）

# jquery - 为什么在 jQuery scrollTop 之后滚动跳跃？

> ID：15287159
> 
> 赞同：2
> 
> 时间：2013-03-08T05:12:09.717
> 
> 标签：jquery, scroll, scrolltop

我在用着

```
$('html, body').animate({'scrollTop':target}); 
```

动画很好，但是当用户尝试滚动页面时会“摇晃”几秒钟，然后才让用户再次滚动。

我真的看不到任何添加到 body 或 html 标记的内容可能导致这种情况。可以肯定的是，我正在清除两者的样式，但它仍然会发生。

# ios - iOS：尝试获取音频帧值时的 EXC_BAD_ACCESS

> ID：15287160
> 
> 赞同：0
> 
> 时间：2013-03-08T05:12:19.077
> 
> 标签：ios, ios6, core-audio, audiounit

我在让迈克尔的[代码](http://atastypixel.com/blog/using-remoteio-audio-unit/)工作时遇到了一些麻烦。下面你将看到我的实现，我试图让它在 iOS 6.1 上运行，但我得到了一个`EXC_BAD_ACCESS`：

> AudioBuffer 缓冲区 = bufferList.mBuffers[i];

我正在从`appdelegate`文件中运行以下代码`applicationfinishloading`：

> _rec = [[AU alloc]init];
> 
> [_rec 初始化音频];
> 
> [_rec 开始];

提前致谢.. ：）

```
#define kOutputBus 0
#define kInputBus 1

@implementation AU

AudioComponentInstance audioUnit;
AudioStreamBasicDescription audioFormat;
float *convertedSampleBuffer;
-(id)init{
    self = [super init];
    if (self){

    }
    return self;
}
-(OSStatus)start{
     NSLog(@"start");
    OSStatus status = AudioOutputUnitStart(audioUnit);
    return status;
}

-(OSStatus)stop{
    OSStatus status = AudioOutputUnitStop(audioUnit);
    return status;
}

-(void)cleanUp{
    AudioUnitUninitialize(audioUnit);
}
static OSStatus recordingCallback(void *inRefCon,
                                  AudioUnitRenderActionFlags *actionFlags,
                                  const AudioTimeStamp *audioTimeStamp,
                                  UInt32 inBusNumber,
                                  UInt32 numFrames,
                                  AudioBufferList *buffers) {
    AudioBufferList bufferList;     

    for (int i = 0; i < bufferList.mNumberBuffers; i++)
    {
        AudioBuffer buffer = bufferList.mBuffers[i];
        SInt16 *audioFrame = (SInt16*)buffer.mData;
    }
    return noErr;
}
-(void)initializeAudio{
    NSLog(@"init");
    OSStatus status;

    AudioComponentDescription desc;
    desc.componentType = kAudioUnitType_Output;
    desc.componentSubType = kAudioUnitSubType_RemoteIO;
    desc.componentFlags = 0;
    desc.componentFlagsMask = 0;
    desc.componentManufacturer = kAudioUnitManufacturer_Apple;

    // Get component
    AudioComponent inputComponent = AudioComponentFindNext(NULL, &desc);

    // Get audio units
    status = AudioComponentInstanceNew(inputComponent, &audioUnit);

    // Enable IO for recording
    UInt32 flag = 1;
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioOutputUnitProperty_EnableIO,
                                  kAudioUnitScope_Input,
                                  kInputBus,
                                  &flag,
                                  sizeof(flag));

    // Describe format
    audioFormat.mSampleRate         = 44100.00;
    audioFormat.mFormatID           = kAudioFormatLinearPCM;
    audioFormat.mFormatFlags        = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
    audioFormat.mFramesPerPacket    = 1;
    audioFormat.mChannelsPerFrame   = 1;
    audioFormat.mBitsPerChannel     = 16;
    audioFormat.mBytesPerPacket     = 2;
    audioFormat.mBytesPerFrame      = 2;

    // Apply format
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioUnitProperty_StreamFormat,
                                  kAudioUnitScope_Output,
                                  kInputBus,
                                  &audioFormat,
                                  sizeof(audioFormat));

    // Set input callback
    AURenderCallbackStruct callbackStruct;
    callbackStruct.inputProc = recordingCallback;
    callbackStruct.inputProcRefCon = (__bridge void *)(self);
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioOutputUnitProperty_SetInputCallback,
                                  kAudioUnitScope_Global,
                                  kInputBus,
                                  &callbackStruct,
                                  sizeof(callbackStruct));

    status = AudioUnitInitialize(audioUnit);

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:08:39.197

您需要先调用 AudioUnitRender 来获取音频数据（代码取自您链接到的页面）

```
AudioUnitRender([audioInterface audioUnit], 
                             ioActionFlags, 
                             inTimeStamp, 
                             inBusNumber, 
                             inNumberFrames, 
                             bufferList); 
```

请注意，在某些情况下，您可能还需要 malloc 自己的 bufferList 才能使用。

# join - 我可以在 bigquery 中对多个大表进行非规范化吗

> ID：15287166
> 
> 赞同：0
> 
> 时间：2013-03-08T05:12:55.237
> 
> 标签：join, google-bigquery, denormalization, denormalized

我可以在 bigquery 中对多个大表进行非规范化（通过加入）吗？

Table1 是 400M 行 Table2 是 2M 行 Table3 是 800K 行

如果没有，我是否必须在上传之前在我的关系数据库中执行此操作？那将是一个困难的解决方案。

我是否应该将表分成更小的部分并在表上运行连接迭代以使其始终从大到小？这也将是一个困难的解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:50:06.013

BigQuery 现在支持“Big JOIN”，它允许您在 JOIN 查询中跳过 LIMIT。

此处的文档： [https ://developers.google.com/bigquery/docs/query-reference#joins](https://developers.google.com/bigquery/docs/query-reference#joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:29:27.370

是的，您可以根据查询结果创建新表。

试试看这里：

[https://developers.google.com/bigquery/docs/queries](https://developers.google.com/bigquery/docs/queries)

和这里：

[https://developers.google.com/bigquery/docs/tables#addmoredata](https://developers.google.com/bigquery/docs/tables#addmoredata)

# mysql - mysql 选择语句？

> ID：15287170
> 
> 赞同：1
> 
> 时间：2013-03-08T05:13:25.880
> 
> 标签：mysql, select

我有以下 MYSQL 表

```
OrderId OrderItemId IsReceived
  1         21          0
  1         22          1
  2         31          1
  2         11          0
  2         21          0
  3         31          1
  3         12          1 
```

*   如果`IsReceived`== 1，则表示收到此项目。

*   如果`IsReceived`== 0，则表示该项目尚未收到。

我想知道哪个订单被完全接收（All `orderItems`are received），Mysql Query 是什么？

在这种情况下，它会返回一个`OrderId`: 3 （因为在`orderId`3 中，所有的订单物品都收到了）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T05:16:06.587

这是一个解决方案：

```
SELECT OrderId
FROM `IHaveFollowingMySQLTable`
GROUP BY OrderID
HAVING MIN(IsReceived) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:24:11.807

```
select distinct(tbl.OrderId) from your_table_name tbl where tbl.OrderId not in
(select distinct(tbl2.OrderId) from your_table_name tbl2 where tbl2.IsReceived=0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:23:38.903

还有一个

```
SELECT OrderId
  FROM  OrderItems
 GROUP BY OrderID
HAVING SUM(IsReceived) = COUNT(IsReceived) 
```

但@Bill Karwin 的回答最为优雅。

# objective-c - 数据在传递给新的视图控制器时意外重置为 0

> ID：15287171
> 
> 赞同：1
> 
> 时间：2013-03-08T05:13:30.290
> 
> 标签：objective-c, xcode4.5

当我在 from 传递给我的（这是一个表格视图）时，我的**lensInt**（一个整数）被重置回 0 。我的菜单视图控制器是一个类似滑动背景的 facebook。此外，My嵌入在导航控制器栏中。Integer 只有在通过时才会重置（我使用断点来调试它）。`lensInt =1``ViewController1``MenuViewController``ViewController1``@implementation TableViewController`

我的`ViewController1.h`：

```
#import <UIKit/UIKit.h>

@interface ViewController1 : UITableViewController{
NSMutableArray *ACUVUE;
NSMutableArray *BAUSCH_LOMB;
int lensInt;

} 
```

我的`ViewController1.m`：

```
#import "ViewController1.h"
@implementation ViewController1
@synthesize lensInt;  

- (void)viewDidLoad
{

ACUVUE =[[NSMutableArray alloc]
         initWithObjects:@"1-DAY ACUVUE DEFINE",@"1-DAY ACUVUE ASTIGMATISM", nil];

BAUSCH_LOMB=[[NSMutableArray alloc]
             initWithObjects:@"B+L PURE VISION",@"B+L PURE VISION MULTIFOCAL",@"B+L PURE VISION TORIC",nil];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

if(self.lensInt == 0){
    return [ACUVUE count];}
if(self.lensInt == 1){
    return [BAUSCH_LOMB count];}

[self.tableView reloadData];}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];  }
// Configure the cell...

if(self.lensInt == 0){
    cell.textLabel.text = [ACUVUE objectAtIndex:indexPath.row];}

if(self.lensInt == 1){
    cell.textLabel.text = [BAUSCH_LOMB objectAtIndex:indexPath.row];}

//---------- CELL BACKGROUND IMAGE -----------------------------
UIImageView *imageView = [[UIImageView alloc] initWithFrame:cell.frame];
UIImage *image = [UIImage imageNamed:@"LightGrey.png"];
imageView.image = image;
cell.backgroundView = imageView;
[[cell textLabel] setBackgroundColor:[UIColor clearColor]];
[[cell detailTextLabel] setBackgroundColor:[UIColor clearColor]];

//Arrow
cell.accessoryType = UITableViewCellAccessoryNone;

return cell;}

@end 
```

我的`MenuViewController.m`：

```
#import "MenuViewController.h"
#import "ECSlidingViewController.h"
#import "ViewController1.h"

@interface MenuViewController ()

@property (strong, nonatomic) NSArray *menu;
@property (strong, nonatomic) NSArray *section1;
@property (strong, nonatomic) NSArray *section2;
@property (strong, nonatomic) ViewController1 *lens;

@end

@implementation MenuViewController
@synthesize lens;
@synthesize menu, section1, section2;

-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{

tableView.backgroundColor = [UIColor darkGrayColor];
cell.contentView.backgroundColor = [UIColor darkGrayColor];
cell.textLabel.textColor =[UIColor whiteColor];
tableView.separatorColor =[UIColor blackColor];}

- (void)viewDidLoad
{    [super viewDidLoad];

self.section1 = [NSArray arrayWithObjects:@"Acuvue", @"Bausch + Lomb", nil];

self.section2 = [NSArray arrayWithObjects:@"Daily", @"Monthly", nil];

self.menu = [NSArray arrayWithObjects:self.section1, self.section2, nil];

[self.slidingViewController setAnchorRightRevealAmount:190.0f];
self.slidingViewController.underLeftWidthLayout = ECFullWidth;}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
return [self.menu count]; }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{    
if (section == 0) {

    return [self.section1 count];

} else if (section == 1) {

    return [self.section2 count];
}}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

if (section == 0) {

    return @"Contact Lens Brand";

} else if (section == 1) {

    return @"Contact Lens Type";
}

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *cellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier]; }

if (indexPath.section == 0) {

    cell.textLabel.text = [NSString stringWithFormat:@"%@", [self.section1 objectAtIndex:indexPath.row]];

} else if (indexPath.section == 1) {

    cell.textLabel.text = [NSString stringWithFormat:@"%@", [self.section2 objectAtIndex:indexPath.row]];
}

return cell;}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

UIViewController *newTopViewController;

if (indexPath.section == 0) {

    if([[section1 objectAtIndex:indexPath.row] isEqual:@"Acuvue"]){

        lens.lensInt= 0 ;

    }

    if([[section1 objectAtIndex:indexPath.row]isEqual:@"Bausch + Lomb"]){

        lens.lensInt = 1 ;

    }

    NSString *identifier = [NSString stringWithFormat:@"product"];

    newTopViewController = [self.storyboard instantiateViewControllerWithIdentifier:identifier];

} else if (indexPath.section == 1) {

    NSString *identifier = [NSString stringWithFormat:@"product"];

    newTopViewController = [self.storyboard instantiateViewControllerWithIdentifier:identifier];

}

[self.slidingViewController anchorTopViewOffScreenTo:ECRight animations:nil onComplete:^{
CGRect frame = self.slidingViewController.topViewController.view.frame;
self.slidingViewController.topViewController = newTopViewController;
self.slidingViewController.topViewController.view.frame = frame;
[self.slidingViewController resetTopView];}];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:21:15.327

`prepareForSegue`如果您使用情节提要，则应该使用在视图之间传递数据。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Make sure your segue name in storyboard is the same as this line
    if ([[segue identifier] isEqualToString:@"YOUR_SEGUE_NAME_HERE"])
    {
        // Get reference to the destination view controller
        YourViewController *vc = [segue destinationViewController];

        // Pass object to your view controller here
        [vc setMyObjectHere:object];
    }
} 
```

# c++ - 在执行 glTexImage2D 和 glTexSubImage2D 之前是否需要调用 glGenTextures 和 glBindTexture

> ID：15287172
> 
> 赞同：1
> 
> 时间：2013-03-08T05:13:31.073
> 
> 标签：c++, opengl, textures, glteximage2d

嗨，我有 35 张图像要在显示器中绘制。我在 7X5 网格中绘制它。图片是从网上下载的。每次下载图像时，我都会尝试绘制全部 35 张图像。但其中一些尚未下载。所以我为他们画了一些默认的瓷砖。问题是每次下载图像时，我都会再次绘制以前绘制的图像。我想减少它。所以我在考虑做一些像Texture Atlas这样的东西。我正在尝试手动完成。我是通过制作一个大图像`glTexImage2D`并使用`glTexSubImage2D`.

```
glGenTextures(1, tex);
glBindTexture(GL_TEXTURE_2D, (*tex));
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
glTexImage2D(GL_TEXTURE_2D, 0, textureImageInfo->format, textureImageInfo->texWidth, textureImageInfo->texHeight, 0, textureImageInfo->format, GL_UNSIGNED_BYTE, NULL);
glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, textureImageInfo->imageWidth, textureImageInfo->imageHeight, textureImageInfo->format, GL_UNSIGNED_BYTE, textureImageInfo->image); 
```

我调用 35`glTexSubImage2D`将所有 35 个图像添加到一个大的`glTexImage2D`. 这里我只写了一个以便于解释。最后我做了

```
glEnable(GL_TEXTURE_2D);
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

glVertexPointer(3, GL_FLOAT, 0, this->tileCoordList); 
glTexCoordPointer(3, GL_FLOAT, 0, this->tileTextureCoordList);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glDisable(GL_TEXTURE_2D); 
```

现在我感到困惑的是，我是否也需要为 35 次调用生成和绑定纹理 35 次`glTexSubImage2D`？或者只做一次就足够了。我不明白绑定纹理的实际问题与它有什么关系。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T06:11:22.943

纹理中没有“子图像”之类的东西。纹理中只有图像。`glTexImage2D`为纹理中的特定图像分配存储空间，并可选择将数据上传到该图像。`glTexSubImage2D`仅将数据上传到图像。“子”意味着您可以更新图像的*一部分*，不一定是全部。

`glTexImage2D`就像`malloc`后面跟着`memcpy`. `glTexSubImage2D`只是一个`memcpy`。这就是为什么你必须先打电话`glTexImage2D`。

# android - 如何连续停止和播放通知？

> ID：15287173
> 
> 赞同：3
> 
> 时间：2013-03-08T05:13:39.847
> 
> 标签：android, notifications, notificationmanager

我想实现这一点：

*   当警报开始响起时，**通知声音应持续播放**，直到用户拖动通知栏。
*   当我向下拖动**通知栏时，声音应该停止**播放。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T09:47:52.443

在通知中，很少有用于自动停止通知的标志，您必须使用它们。

1.  Notification.DEFAULT_SOUND：用于播放声音。

2.Notification.FLAG_INSISTENT：此标志使您的声音持续响起，直到您对通知进行了一​​些操作，即拖动条或单击条。

3.Notification.FLAG_AUTO_CANCEL：此标志用于在您看到通知后自动取消通知

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:59:00.547

```
why the nastiness with reflection? 
```

因为它不是 Android SDK 的一部分。`StatusBarManager`只有对创建不可靠的应用程序感兴趣的人才会尝试与Android 源代码本身的外部进行交互。由于核心 Android 团队和设备制造商欢迎随时更改 SDK 之外的任何内容。

```
Why can't I find a reference to the StatusBarManager class directly? 
```

因为它不是 Android SDK 的一部分。Android 框架中有很多很棒的类和方法都标有 @hide 注释，原因有很多：不愿意无限期地支持 API，“默默无闻的安全性”等。

```
Why is there not a constant in the Context class for the "statusbar" service? 
```

因为它不是 Android SDK 的一部分。当然欢迎您向 AOSP 提供补丁，以使 StatusBarManager 被“提升”到与其他系统服务（例如 LocationManager、NotificationManager）相同的状态。如果 StatusBarManager 的情况仅仅是 SDK 在 2007 年创建之后的疏忽，那么您的补丁很可能会被接受，并且您会在即将发布的 Android 版本中看到这些变化。

[为什么我不能直接找到对 StatusBarManager 类的引用？](https://stackoverflow.com/questions/11323637/why-cant-i-find-a-reference-to-the-statusbarmanager-class-directly)

# java - 在java中对带有数值的字符串数组列表进行排序

> ID：15287175
> 
> 赞同：-1
> 
> 时间：2013-03-08T05:13:43.073
> 
> 标签：java, sorting, arraylist

我需要对包含数值的字符串数组列表进行排序。数组列表如下

```
A\B=5\C=56,
A\B=2\C=1,
A\B=2\C=25,
D\E=1,
D\E=3\F=5,
D\E=3\F=4 
etc... 
```

我需要的排序顺序是：

```
A\B=2\C=1
A\B=2\C=25
A\B=5\C=56
D\E=1
D\E=3\F=4
D\E=3\F=5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:26:26.233

您需要实现一个可以确定*任何两个*字符串`Comparator<String>`的大于/小于行为的位置。

 *`Then, you can sort it via Collections.sort(list, myNewComparator);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:31:48.963

```
List<String> list = new ArrayList<String>();
        list.add("A\\B=5\\C=56");
        list.add("A\\B=2\\C=1");
        list.add("A\\B=2\\C=25");
        list.add("D\\E=1");
        list.add("D\\E=3\\F=5");
        list.add("D\\E=3\\F=4");
        Collections.sort(list);
        System.out.println(list); 
```

如果您想自定义排序，请尝试查看之前发布的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:26:21.530

使用[Collections.sort](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)，但我认为，您必须编写自己的比较器。*

# android - android facebook登录和发布按钮

> ID：15287177
> 
> 赞同：2
> 
> 时间：2013-03-08T05:13:49.833
> 
> 标签：android

我正在尝试制作一个应用程序，它只能有一个按钮来登录并使用提要对话框发布 Facebook 提要，我已经阅读了来自 facebook 的登录和提要对话框的教程，即[https://developers.facebook.com/docs/ howtos/androidsdk/3.0/login-with-facebook/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)和[https://developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/)。但是在这两个教程中，他们使用两个按钮来执行登录和发布提要操作。这是我现在正在做的代码，它给了我错误。

这是我的主要课程：

```
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.Window;
import android.view.WindowManager;

public class Main extends FragmentActivity {
private MainFragment mainFragment;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    if (savedInstanceState == null) {
        // Add the fragment on initial activity setup
        mainFragment = new MainFragment(this, Main.this);
        getSupportFragmentManager()
        .beginTransaction()
        .add(android.R.id.content, mainFragment)
        .commit();
    } else {
        // Or set the fragment from restored state info
        mainFragment = (MainFragment) getSupportFragmentManager()
        .findFragmentById(android.R.id.content);
    }
} 
```

这是我的片段类：

```
import android.app.Activity;
import android.app.ProgressDialog;
import android.graphics.Matrix;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;
import com.facebook.FacebookException;
import com.facebook.FacebookOperationCanceledException;
import com.facebook.Session;
import com.facebook.SessionState;
import com.facebook.UiLifecycleHelper;
import com.facebook.widget.WebDialog;
import com.facebook.widget.WebDialog.OnCompleteListener;

public class MainFragment extends Fragment{
private UiLifecycleHelper uiHelper;
private Button shuffle, fbshare;
@Override

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.main, container, false);
    fbshare = (Button) view.findViewById(R.id.share);      

    fbshare.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            publishFeedDialog();
        }
    });
    return view;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    uiHelper = new UiLifecycleHelper(getActivity(), callback);
    uiHelper.onCreate(savedInstanceState);
}

@Override
public void onResume() {
    super.onResume();
 // For scenarios where the main activity is launched and user
    // session is not null, the session state change notification
    // may not be triggered. Trigger it if it's open/closed.
    Session session = Session.getActiveSession();
    if (session != null &&
           (session.isOpened() || session.isClosed()) ) {
        onSessionStateChange(session, session.getState(), null);
    }
    uiHelper.onResume();
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    uiHelper.onActivityResult(requestCode, resultCode, data);
}

@Override
public void onPause() {
    super.onPause();
    uiHelper.onPause();
}

@Override
public void onDestroy() {
    super.onDestroy();
    uiHelper.onDestroy();
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    uiHelper.onSaveInstanceState(outState);
}

private Session.StatusCallback callback = new Session.StatusCallback() {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        onSessionStateChange(session, state, exception);
    }
};

private void onSessionStateChange(Session session, SessionState state, Exception exception) {
    if (state.isOpened()) {
        fbshare.setOnClickListener(new View.OnClickListener() {

    } else if (state.isClosed()) {

    }
}

private void publishFeedDialog() {
    Session session = Session.getActiveSession();
    if (session == null){
        session = new Session(getActivity());
        Session.setActiveSession(session);
    }
    Bundle params = new Bundle();
    params.putString("name", "Facebook SDK for Android");
    params.putString("caption", "Build great social apps and get more installs.");
    params.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");
    params.putString("link", "https://developers.facebook.com/android");
    params.putString("picture", "https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png");

    WebDialog feedDialog = (new WebDialog.FeedDialogBuilder(getActivity(),Session.getActiveSession(),params)).setOnCompleteListener(new OnCompleteListener() {
        @Override
        public void onComplete(Bundle values, FacebookException error) {
            if (error == null) {
                // When the story is posted, echo the success
                // and the post Id.
                final String postId = values.getString("post_id");
                if (postId != null) {
                    Toast.makeText(getActivity(), "Posted story, id: "+postId, Toast.LENGTH_SHORT).show();
                } else {
                    // User clicked the Cancel button
                    Toast.makeText(getActivity().getApplicationContext(), "Publish cancelled", Toast.LENGTH_SHORT).show();
                }
            } else if (error instanceof FacebookOperationCanceledException) {
                // User clicked the "x" button
                Toast.makeText(getActivity().getApplicationContext(), "Publish cancelled", Toast.LENGTH_SHORT).show();
            } else {
                // Generic, ex: network error
                Toast.makeText(getActivity().getApplicationContext(), "Error posting story", Toast.LENGTH_SHORT).show();
            }
        }
    }).build();
    feedDialog.show();
}
} 
```

我的 logcat 错误：

```
03-07 21:05:52.527: E/AndroidRuntime(2052): FATAL EXCEPTION: main
03-07 21:05:52.527: E/AndroidRuntime(2052): com.facebook.FacebookException: Attempted to use a Session that was not open.
03-07 21:05:52.527: E/AndroidRuntime(2052):     at com.facebook.widget.WebDialog$BuilderBase.<init>(WebDialog.java:392)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at com.facebook.widget.WebDialog$FeedDialogBuilder.<init>(WebDialog.java:553)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at com.example.projectapp.MainFragment.publishFeedDialog(MainFragment.java:306)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at com.example.projectapp.MainFragment.access$11(MainFragment.java:293)
3-07 21:05:52.527: E/AndroidRuntime(2052):  at com.example.projectapp.MainFragment$3.onClick(MainFragment.java:221)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at android.view.View.performClick(View.java:4084)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at android.view.View$PerformClick.run(View.java:16966)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at android.os.Handler.handleCallback(Handler.java:615)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at android.os.Looper.loop(Looper.java:137)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at java.lang.reflect.Method.invokeNative(Native Method)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at java.lang.reflect.Method.invoke(Method.java:511)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-07 21:05:52.527: E/AndroidRuntime(2052):     at dalvik.system.NativeStart.main(Native Method) 
```

有人可以告诉我为什么会发生这个错误，我能做些什么来修复错误并使按钮工作？

我正在使用最新的 facebook sdk，这对我来说真的很困惑，有没有其他教程可以让我尝试让 facebook sdk 失效？

这是我第一次使用这个网站，如果我做错了什么，请告诉我，我会努力做对的。

谢谢。

# c++ - 如何“计算”这个？

> ID：15287180
> 
> 赞同：-1
> 
> 时间：2013-03-08T05:14:00.443
> 
> 标签：c++

我正在制作一个应用程序只是为了好玩 0_0 ，我有一点问题。这个想法是能够在用户输入数字之前运行“系统”命令。这就是我所拥有的：

```
#include <iostream>
#include <cstdlib>
int main()
{
using namespace std;
int var1;
int var2=3600;
int var3;

cout<<"Enter the time"<<endl;
cin>>var1;
var3=(var1*var2);
system("shutdown -s -t "time_here(var3)" ")

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T05:26:04.147

你需要的是这个我想

```
std::ostringstream out;
out << "shutdown -s -t " << var3;
system(out.str().c_str()); 
```

并包括

```
#include<sstream> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:24:07.390

你可以试试这样的

```
enum { N = 64 };
char buffer[ N ] = {};
snprintf( buffer, N - 1, "shutdown -s -t %d", var3 );
system( buffer ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:40:04.170

干得好

```
#include <iostream>

using namespace std;
int main()
{

    char input[256],buffer[256];
    cout<<"Enter the time:";
    cin >> input;

    sprintf(buffer,"shutdown -s -t %d", atoi(input) * 3600);

    system(buffer);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T05:44:37.693

`std::ostringstream`是个好办法。只是另一种选择（有点矫枉过正）

```
std::string cmd = "shutdown -s -t " + boost::lexical_cast<std::string>(var3);
system(cmd.c_str()); 
```

需要包括：

```
#include <boost/lexical_cast.hpp> 
```

# c++ - 1 条客户端消息会触发 websocket++ 0.3X 中的所有消息处理程序吗？

> ID：15287181
> 
> 赞同：0
> 
> 时间：2013-03-08T05:14:04.433
> 
> 标签：c++, websocket, handler, message, websocket++

我刚刚学习了 websockets，但对 c++ 还是一无所知。

我正在使用 websocket++ 0.3X，它是名副其实的天赐之物（等不及 1.0）。如果有多个并发连接，并且一个客户端向服务器发送消息，该消息会触发所有其他客户端的处理程序吗？如果没有，怎么办？（这是多线程吗？）

我想要做的是显而易见的：通过来自客户端的消息更新数据库，然后更新当前查看更新字段的任何其他客户端。

资料来源：

[http://www.zaphoyd.com/websocketpp/](http://www.zaphoyd.com/websocketpp/)

[https://github.com/zaphoyd/websocketpp/wiki](https://github.com/zaphoyd/websocketpp/wiki)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:05:54.357

on_message 处理程序将仅在接收到消息的连接中被调用。该连接负责更新数据库并向您的程序发出信号以向所有其他客户端发送更新。

在此处查看广播服务器示例：[http](http://www.zaphoyd.com/websocketpp/manual/common-patterns/server-initiated-messages) ://www.zaphoyd.com/websocketpp/manual/common-patterns/server-initiated-messages以获取有关如何设置的简单示例。

# java - 如何使用 Saxon 将 Java 对象转换为字符串

> ID：15287182
> 
> 赞同：0
> 
> 时间：2013-03-08T05:14:08.483
> 
> 标签：java, xml, xml-parsing, saxon, xalan

在将 Java 对象转换为字符串时，我遇到了 Xalon 的问题，即将空的打开关闭标签转换为自关闭标签。例如。`<span></span>`转换为`</span>`.

我在使用 Saxon XSL 转换器时解决了类似的问题。是否可以使用 Saxon 将 java 转换`Object`为`String`而不是 Xalon。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:11:45.597

首先，我确定您的意思`<span/>`是自动关闭标签。

第二：为什么会出现这个问题？如果您正在生成 XML，`<span></span>`则意味着与 完全相同`<span/>`，并且将被任何 XML 解析器视为相同。（如果您在没有 XML 解析器的情况下读取 XML，那么不要）。另一方面，如果您正在生成 HTML，那么指定 method="html" 应该是您需要做的所有事情，无论您使用的是 Xalan 还是 Saxon。

第三：我看不出您的序列化问题与将 Java 对象转换为字符串的任务之间有任何关系。

你当然可以在撒克逊做这样的事情。从 Saxon 调用 Java 方法的文档可以在这里找到：[http](http://www.saxonica.com/documentation/extensibility/intro.xml) : //www.saxonica.com/documentation/extensibility/intro.xml你一个更精确的指针）。

# jquery - 根据第一个文本框jquery的值馈送所有文本框

> ID：15287186
> 
> 赞同：0
> 
> 时间：2013-03-08T05:14:29.807
> 
> 标签：jquery

您好，我有许多带有“价格”类的文本框，我要做的就是为所有其他文本框提供与第一个文本框相同的值。这是我的代码，但它不起作用。

```
$firstprice=$("."+$sectionwrapper).find(".price").first().val();
$("."+$sectionwrapper).find(".price:eq(0)").nextAll(".price").val($firstprice); 
```

我哪里错了？任何帮助将不胜感激。

**编辑**

这是我的 HTML 代码

```
<div class="section-1">
    <div id="bookin-ad-wrapper">
        <div class="booking-wrapper booking-wrapper-5">
            <ul>
            <li><label class="w50">Pris kr</label><input type="text" value="" class="price numeric required" name="txtSection[1][5][price]" style=""></li>
            </ul>
        </div>
        <div class="booking-wrapper booking-wrapper-6">
            <ul>
            <li><label class="w50">Pris kr</label><input type="text" value="" class="price numeric required" name="txtSection[1][6][price]"></li>
            </ul>
        </div>
        <div class="booking-wrapper booking-wrapper-0">
            <ul>
             <li><label class="w50">Pris kr</label><input type="text" value="" class="price numeric required" name="txtSection[1][0][price]"></li>
            </ul>
        </div>
    </div>
</div> 
```

**$sectionwrapper 表示类“section-1”**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:25:15.623

试试这个 [JSFiddle Demo](http://jsfiddle.net/npwLt/)

```
$('input.price').val($('.price').eq(0).val()) 
```

或者这样

```
 $('input.price:gt(0)').val($('input.price').eq(0).val()); 
```

或使用第一个运算符。

```
$('input.price').val($('input.price').first().val()); 
```

你可以在任何你想要的事件中使用它。可能是点击，改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:26:03.463

试试这个：

```
$(document).ready(function(){
    $('input.price:gt(0)').val($('input.price:eq(0)').val());
}); 
```

**[JSFIDDLE](http://jsfiddle.net/arulmr/gEcTB/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:34:28.247

这是[小提琴](http://jsfiddle.net/prabhu5013/LmrRz/)

```
$(".price").on("change",function()
               {$(".price").val($(".price").first().val())
               }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T05:36:52.827

```
 Try this:

  $(document).ready(function(){
     $(".section-1").find(".price").first().blur(function () {
              var firstprice=$(".section-1").find(".price").first().val();
              //alert("val"+ firstprice);
              if(firstprice)
              $(".section-1").find(".price").val(firstprice);
        });
  }); 
```

# javascript - 如何自动刷新ejs页面

> ID：15287189
> 
> 赞同：3
> 
> 时间：2013-03-08T05:14:46.217
> 
> 标签：javascript, jquery, refresh, ejs

我是 ejs 新手。当我尝试一个应用程序时。我想每 5 秒刷新一次页面。

我有一个代码

```
<script language="javascript" type="text/javascript">
        $(document).ready(function() {
            setInterval("location.reload(true)", 5000);
        });   
</script> 
```

但是如何在 ejs 中包含 jquery？如何将此代码嵌入到 ejs 页面中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T06:43:13.580

Try this

tags: `<meta http-equiv="refresh" content="5">.` That simple. The "5" is the number of seconds. If you want to increase the time to say 20 minutes, you simply put in "1200" and so on.

# responsive-design - 方向更改后响应站点上的水平滚动条

> ID：15287194
> 
> 赞同：0
> 
> 时间：2013-03-08T05:15:16.320
> 
> 标签：responsive-design

我不打算在这里粘贴大量代码，因为我不希望任何人逐行通过它来找到我的问题。

基本上，当我将设备从纵向更改为横向，然后返回到纵向时，会有水平滚动条并且内容可以四处移动，这并不酷。

我有平常的`<meta name="viewport" content="width=device-width; initial-scale = 1.0; maximum-scale=1.0; user-scalable=no" />`。有人知道是什么导致了这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:07:43.187

有时，设备的方向从纵向到横向会出现问题，反之亦然。只需尝试使用以下内容。

```
overflow-x: hidden; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T15:58:43.213

这主要发生在键盘启动时吗？

如果是，试试这个：[https ://github.com/scottjehl/iOS-Orientationchange-Fix](https://github.com/scottjehl/iOS-Orientationchange-Fix)

# python - 由zeromq触发的nginx背后的Websockets？

> ID：15287196
> 
> 赞同：3
> 
> 时间：2013-03-08T05:15:38.977
> 
> 标签：python, nginx, websocket, zeromq, uwsgi

我正在尝试设计一个系统来处理大量数据并向客户端发送有关其进度的更新。我想使用 nginx（谢天谢地，它刚刚开始支持 websockets）和 uwsgi 作为 web 服务器，我正在使用 zeromq 通过系统传递消息。理想情况下，该解决方案可以用 Python 编写，但我也对 Nodejs 甚至 Go 解决方案持开放态度。

这是我想要实现的流程：

1.  客户访问网站并请求处理大量数据。
2.  服务器通过 zeromq 将处理外包给另一个进程/服务器 [worker]，并回复客户端请求，说明处理已开始，包括有关如何使用服务器设置 websocket 的信息。
3.  客户端建立 websocket 连接并等待更新。
4.  处理完成后，工作人员发送“处理完成！” 通过 zeromq 向 websocket 进程发送消息，websocket 进程将消息下推到客户端。

我描述的可能吗？我想我在想我可以在皇帝模式下运行 uwsgi，这样它就可以为 webserver 处理一个进程（端口），为 websocket 进程处理另一个进程（端口）。我只是不确定我是否能找到一种方法来接收 zeromq 消息和管理来自同一进程的 websocket 连接。也许我必须从工作人员那里启动最终的 websocket 推送？

任何帮助/正确的方向指向/潜在的解决方案将不胜感激。任何带有正确路由的 websocket 的 nginx 配置文件的示例或片段也将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:51:57.203

当然，这应该是可能的。你可能想看看[zerogw](https://github.com/tailhook/zerogw)。

# jquery - jQuery - 在选择更改时设置元素的 html

> ID：15287198
> 
> 赞同：0
> 
> 时间：2013-03-08T05:15:43.583
> 
> 标签：jquery, select, text

我有一个名为 JobsList 的选择元素，我需要它来设置另一个元素 jobDesc 的 html 值。我不明白我需要做什么，或者从哪里开始，我对 jQuery 比较陌生。

它必须将元素的文本设置为为每个选项预定义的内容，例如，如果选择的选项是 Citizen，它会将 jobDesc 设置为“您在社会中没有真正的角色”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:28:23.640

```
var job_list_value = $('#JobsList').val();
var message;

if (job_list_value === "Citizen") {
    message = "You have no real role in society");
} else if (job_list_value === "other") {
    message = "other statement";
} else {
    message = 'Default';
}

$('#elementId').html(message); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:26:48.307

**HTML**

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

**Javascript**

```
// # is used for filtering by element ID
    if($('#JobsList').val() == "Citizen")
       $('#jobDesc').html("You have no real role in society");
    else    if($('#JobsList').val() == "other")
       $('#jobDesc').html("other statement"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:27:13.923

看看你的html是不是这样的：

## html:

```
<select id='joblist'>
  <option value='0'>---job list---</option>
  <option value='Student'>Student</option>
  <option value='Citizen'>Citizen</option>
</select>
<div id='jobdesc'></div> 
```

## 那么jQuery应该是：

```
$(function(){
     $('#joblist').change(function () {
         if ($(this).val() == 'Student') {
             $('#jobdesc').html('You need to study good things.');
         } else if ($(this).val() == 'Citizen') {
             $('#jobdesc').html('"You have no real role in society" it\'s not true.');
         } else {
             $('#jobdesc').html('Please choose a job from above list.');
         }
     }).change();
}); 
```

[**检查这个小提琴**](http://jsfiddle.net/REVYC/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T05:22:53.807

使用 change 事件来跟踪 chnaged 事件...并放置值...

尝试这个

```
 $('#joblistID').change(function(){
    if($(this).val() == "Citizen"){
        $('#elementId').val("You have no real role in society");//if input
        $('#elementId').text("You have no real role in society");// or if otner element
    }
 }); 
```

你可以用类似的方式为别人工作。。

或制作一组选项值

**html**

```
...
<option value="citizen">Citizen</option>
<option value="test">Test</option>
.... 
```

**jQuery**

```
 var a= new Array();
a['citizen']='You have no real role in society';
a['test']='test word'
.....
$('#joblistID').change(function(){
        var currvalue=$(this).val();
        $('#elementId').val(a[currvalue]);//if input
        $('#elementId').text([currvalue]);// or if otner element

 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T05:18:49.337

```
if($('#JobsList').val() == "Citizen")
   $('#elementId').html("You have no real role in society");
else    if($('#JobsList').val() == "other")
   $('#elementId').html("other statement"); 
```

如果选择选项更多，则使用 switch 而不是 if-else。

在使用此代码之前导入 jQuery 文件。

# javascript - vars 存储在 Nodejs 中的什么位置？

> ID：15287201
> 
> 赞同：5
> 
> 时间：2013-03-08T05:16:04.033
> 
> 标签：javascript, node.js, variables, scope, global-variables

在任何 Web 浏览器中执行以下脚本将导致`'wee'`被发送到控制台。在 Node 中，它发送`{}`.

```
var d = 'wee';
console.log(this.d); 
```

我意识到`this`在这种情况下，Node 指的是导出对象。我确实知道这个`global`变量，这不是我想要访问的。此外，上面的脚本也没有设置`d`在全局对象上。它到底去哪儿了？我可以在上面的脚本中显式访问它`console.log(d);`，但它似乎完全没有充分的理由隐藏在一些非标准空间中。

我也意识到删除对象上的`var`will 声明，这是预期的行为，尽管在顶级范围内将其值存储在与“裸”变量不同的位置似乎很愚蠢。我的意思是，模块系统的重点不应该是某种预防全球污染的数字预防措施吗？在这里，打破模式似乎很容易，而做一些标准的事情却很难。`d``global``var`

`d`也没有在`module`对象上声明。

我不必证明我为什么要问这个问题，但我会回答第一个巨魔，并附上“但是你为什么想做 taht hurr durrrr”。

```
var d = {};
d.bleep = 'y';
var a = Object.keys(d);

d.bloop = 'y';
d.blop = 'y';

var b = Object.keys(d);

// c = b - a;
var c = b.filter(function (item) {
    if(a.indexOf(item) === -1) {
        return true;
    }
    return false;
});

console.log(a,b,c); 
```

就像我可以区分 的某些对象状态一样`d`，我应该能够区分顶级范围的状态。在浏览器中，这是`window`对象，`this`在顶级范围中被引用。我应该能够在脚本执行之前和之后评估环境的属性以确定很多事情，其中​​之一是检查在任意脚本的顶级范围内声明的函数和变量，然后将它们应用于导出对象。这将使以编程方式为未编写为模块的脚本生成模块包装器变得容易，并且简单`forEach`地应用于顶级函数和变量列表以分配`whateverThisIs['varFunc']`给`module.exports['varFunc']`...

和东西...

这种行为似乎类似于匿名函数。在匿名函数`this`中可以引用`window`对象，`var`必须直接调用 s（因为它们在 anon func 的范围内），并且在没有`var`关键字的情况下声明的泄漏变量可能会在`window`对象处结束。我还没有阅读整个手册，也许这正是正在发生的事情，但是，我的印象是每个模块都在它自己的上下文（窗口）中执行，并且节点通过使用`global`和在模块上下文之间传递消息`module.exports`。 ..

我不知道。不过我想知道。如果你知道，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T05:51:51.080

因此，每个节点模块都被包装为函数的主体，如[节点源代码中所示](https://github.com/joyent/node/blob/7d654be627f187f10c8df6b2a1020f88860202be/src/node.js#L800)

```
NativeModule.wrapper = [
  '(function (exports, require, module, __filename, __dirname) { ',
  '\n});'
]; 
```

所以如果你用 声明一个变量`var`，它是模块的函数局部变量，基本上是那个模块的私有变量。它不是`global`、`module`、`module.exports`或的属性`this`。如果您忘记了，它会作为属性`var`进入对象。`global`如果您在 上显式创建属性`this`，则该属性将进入`exports`其他模块并可用于其他模块。

这是一个小程序，希望能有所启发。

```
var aDeclaredVar = '*aDeclaredVar*';
undeclaredVar = '*undeclaredVar*';
this.aThisProperty = '*aThisProperty*';
module.aModuleProperty = '*aModuleProperty*';
module.exports.anExportProperty = '*anExportProperty*';

console.log('this', this);
console.log('this === exports', this === exports);
console.log('this === module', this === module);
console.log('this === module.exports', this === module.exports);
console.log('aDeclaredVar', aDeclaredVar);
console.log('undeclaredVar', undeclaredVar);
console.log('this.aThisProperty', this.aThisProperty);
console.log('module.aModuleProperty', module.aModuleProperty);
console.log('module.exports.anExportProperty', module.exports.anExportProperty);
console.log('global.undeclaredVar', global.undeclaredVar);
console.log('global.aDeclaredVar', global.aDeclaredVar); 
```

它的输出：

```
this { aThisProperty: '*aThisProperty*',
  anExportProperty: '*anExportProperty*' }
this === exports true
this === module false
this === module.exports true
aDeclaredVar *aDeclaredVar*
undeclaredVar *undeclaredVar*
this.aThisProperty *aThisProperty*
module.aModuleProperty *aModuleProperty*
module.exports.anExportProperty *anExportProperty*
global.undeclaredVar *undeclaredVar*
global.aDeclaredVar undefined 
```

# windows - 安装 PostgreSQL 9.2 的问题

> ID：15287207
> 
> 赞同：7
> 
> 时间：2013-03-08T05:16:46.763
> 
> 标签：windows, postgresql, installation

我一直在尝试在我的机器（Windows 7 64bit）上安装 PostgreSQL 9.2 for Windows 的 64 位版本并收到此错误：

`The environment variable COMPSPEC does not seem to point to the cmd.exe or there is a trailing semi colon present.`

我已经以管理员身份安装了它。

我禁用了防病毒软件（Microsoft Security Essentials）和防火墙。

跑步：

```
"%COMSPEC%" /C "echo test ok" 
```

回来`test ok`

我检查了我的系统环境变量是否有尾随分号，但我找不到任何东西。

然后我安装了 32 位版本，并设法以不同的错误消息结束安装：`Problem running post-install step. Installation may not complete correctly Error reading the C:\Program Files (x86)\PostgreSQL\9.2\data\postgresql.conf`但该目录中没有`postgresql.conf`文件。它确实安装了应用程序，当我尝试用红色 X 连接服务器时，它在底部显示失败，并且在我输入密码后它不会连接。

如何连接到此服务器连接？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-12-14T15:43:17.527

ComSpec 是任何安装失败的通用错误消息。

识别问题

1.  导航到以下路径 c:\Users\XXXXXX\AppData\Local\Temp
2.  打开“bitrock_installer_XXXX.log”
3.  检查，如果您收到以下错误：

> Script stderr: '"C:\Users\XXXXX\AppData\Local\Temp\POSTGR~1\TEMP_C~1.BAT"' 不是内部或外部命令、可运行程序或批处理文件。
> 
> 错误运行
> 
> C:\Users\XXXXX\AppData\Local\Temp/postgresql_installer_47b21c4ea1/temp_check_comspec.bat :
> '"C:\Users\XXXXX\AppData\Local\Temp\POSTGR~1\TEMP_C~1.BAT"' 未被识别为内部或外部命令，
> 
> 可运行的程序或批处理文件。

这是“ [8.3 文件名和目录](https://en.wikipedia.org/wiki/8.3_filename)”的问题（例如“\Postgres 安装”->“\POSTGR~1”）关于禁用 8.3 文件名和目录的 Microsoft 文章：https: [//support.microsoft.com/en- gb/kb/121007](https://support.microsoft.com/en-gb/kb/121007)

## 解决方案：

1.  在管理员模式下打开命令提示符
2.  执行以下命令以根据您的驱动器或所有驱动器更改格式

    示例命令：

    ```
    fsutil 8dot3name set 1"      - disable 8dot3 name creation on all volumes
    fsutil 8dot3name set C: 1"   - disable 8dot3 name creation on c: 
    ```

3.  以具有管理员权限的用户身份执行安装

4.  安装后，考虑将 8dot3name 设置重置为默认值 (2) 以避免意外后果

希望它能解决问题！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-08T13:44:22.093

# 很容易修复：

1.  只需在控制面板中打开高级系统设置并创建一个新的系统变量（在`System Variable`代替`User Variable`部分）。

2.  在变量名中输入`ComSpec`，然后在变量值中输入`C:\Windows\system32\cmd.exe`。

# 替代修复：

如果您已经`ComSpec`在系统变量部分中有变量，请删除`;`它末尾的 ，这应该可以修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T02:58:26.667

我遇到了同样的问题，我在日志中发现：

Script stderr: 'C:\Users\S300' 不是内部或外部命令、可运行程序或批处理文件。

运行 C:\Users\S300 (i5)\AppData\Local\Temp/postgresql_installer_56caeadbd6/temp_check_comspec.bat 时出错：'C:\Users\S300' 未被识别为内部或外部命令、可运行程序或批处理文件。

我将用户变量 TEMP 更改为 D:\TEMP，将 TMP 更改为 D:\TEMP。并解决了我的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T05:51:21.127

这不是`COMPSPEC`它只是`COMSPEC`。请显示以下输出：

```
echo %COMSPEC% 
```

请注意，`COMSPEC`可以在您运行安装程序的管理员帐户中将其设置为不同的值。我不确定如何找到它，但它可能会出现在 PostgreSQL 安装程序日志中，所以请上传它并在你的帖子中链接到它。有关从何处获取安装程序日志的信息，请参阅[报告安装错误。](http://wiki.postgresql.org/wiki/Troubleshooting_Installation)

请参阅 PostgreSQL for Windows 常见问题条目[检查`COMSPEC`环境变量](http://wiki.postgresql.org/wiki/Running_%26_Installing_PostgreSQL_On_Native_Windows#Check_the_.25COMSPEC.25_environment_variable)。

[这是我提出的一份报告，](http://www.postgresql.org/message-id/50A9B58E.5030200@2ndQuadrant.com)建议安装程序应明确对此进行测试，这[是我关于该主题的博客文章](http://blog.2ndquadrant.com/postgresql-cluster-initialisation-failures-no-error-windows/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-22T10:21:18.557

我有一个类似的问题。安装后，data 文件夹中没有 postgres.conf 文件。它只包含一个名为“pg_log”的文件夹。我描述了我在这里使用的解决方案：[Postgres Installation Error reading file postgresql.conf](https://stackoverflow.com/questions/16730405/postgress-instalation-error-reading-file-postgresql-conf/17249527#17249527)

基本上，检查用户是否对 postgres 文件夹具有完全权限并再次运行“init_db”和“pg_ctl start”命令会很有帮助。如果路径包含空格字符，请尝试使用 pg_ctl 数据文件夹参数的相对路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-28T12:10:48.117

就我而言，安装程序位于 %USERPROFILE%\DownloadsP{ Windows 下载文件夹}，我将安装程序移至桌面并再次运行。很奇怪，它起作用了，哈哈。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-22T11:15:19.057

打开环境变量，您可以在 Windows 7 上通过`environment variables`按下桌面左下角的开始按钮时在搜索程序和文件栏中键入来执行此操作。并创建一个新的系统变量（在“系统变量”而不是“用户变量”部分）。

在变量名中输入`ComSpec`，然后在变量值中输入`C:\Windows\system32\cmd.exe`。

就这样。希望它有效！替代修复：

如果您已经`ComSpec`在“系统变量”部分中获得了变量，请删除`;`它末尾的 ，这应该可以修复它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-01T15:49:30.983

如果安装程序 exe 位于网络共享上，则安装程序实际上可能无法访问映射的驱动器，因为它以管理员身份运行。这经常发生在某些虚拟机安排中，例如在并行 VM 中运行窗口。首先将安装程序复制到本地驱动器，您不会遇到问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-03T00:06:06.420

我正在运行 Windows Server 2003 R2，我无法通过安装程序解决这个问题，所以我求助于使用二进制 PostgreSQL 包。希望这对于不想重新安装操作系统的其他人来说是一种替代方法。

**首先，一些背景**（希望对开发者有用）

它始于 postgres 服务无法启动（服务器已经可靠运行了一年多）。我认为这是一个损坏的 PostgreSQL 安装，所以我卸载并尝试重新安装。我遇到了以下错误：

```
There has been an error.
The environment variable COMSPEC does not seem to point to the cmd.exe or there is a trailing semicolon present.
Please fix this variable and restart installation. 
```

但是，COMSPEC 变量设置正确，通过以下方式验证：

```
echo %COMSPEC%
C:\WINDOWS\system32\cmd.exe 
```

和：

```
"%COMSPEC%" /C "echo test ok"
test ok 
```

由于这是 Windows Server 2003，因此管理员帐户周围没有 UCA 包装，因此不会导致问题。

**手动安装**

```
NET USER postgres /ADD

C:\pgsql\bin\initdb.exe -U postgres -A password -E utf8 -W -D C:\pgsql\data

runas /user:postgres "C:\pgsql\bin\pg_ctl -D C:/pgsql/data -l C:/pgsql/logfile.txt start" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-25T00:21:53.563

只需以管理员身份运行并更改环境系统变量，例如创建新变量“ComSpec”和值类型“C:\Windows\system32\cmd.exe”。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-18T15:02:00.463

尝试在cmd.exe中输入给她的命令行后对我有用的东西我发现它在system32中被命名为cmd1.exe ..所以我复制了文件并将其重命名为cmd.exe并安装完成

# java - 如何从 Java 中的数组列表返回特定对象（索引）？

> ID：15287214
> 
> 赞同：0
> 
> 时间：2013-03-08T05:17:34.260
> 
> 标签：java, class, object, arraylist, sentinel

我创建了一个名为 Student 的类并为其分配了 3 个值（StudentNumber、Course、Mark）；然后我将一个创建的学生分配给一个名为 studentsCourses 的数组列表。

这样每个学生都会在数组中占用一个索引。但是我怎样才能让学生从 arrayList 中退出……如果这有意义的话？我已经将它们存储起来，但我不知道如何调用这些信息以便我可以看到它。

```
public static void main (String[]args){
ArrayList<Student> studentsCourses= new ArrayList<Student>();
String studentNumber="~";
String course="~";
int mark=0;

Student pat;

Student s=null;

do{
  s=new Student();
  System.out.println("Please Enter Your Student ID (type quit to Quit):\n");
  studentNumber=keybrd.next();
  s.setStudentNumber(studentNumber);
  System.out.println("Please Enter Your Course ID:\n");
  course=keybrd.next();
  s.setCourse(course);
  System.out.println("Please Enter Your Mark:\n");
  mark=keybrd.nextInt();
  s.setMark(mark);
  s.printStates();
  studentsCourses.add(s);
}while(!studentNumber.equals("quit"));

System.out.println(studentsCourses.size());   
System.out.println(studentsCourses); 
```

所以如果我想为创建的学生（pat）分配索引 1 的状态，我该怎么做？

我的另一个问题（连同这段代码）是我的哨兵。当我输入退出时它确实退出了。但它首先完成了“做”。这意味着我实际上最终得到了一个学生，他的数字是“退出”课程是什么，而分数是什么。

一旦键入“退出”，我如何强制它中断执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:22:30.937

ArrayList 不是一个数组...它是一个使用数组作为其后备存储的 List。

从列表中检索方法是`list.get(index)`

或者，您可以使用一些语法糖来循环它们

```
List<Student> students = new ArrayList<Student>();
// add students
for (Student student : students) {
  // do something with student
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:23:53.190

使用[`get(int)`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#get%28int%29)方法检索元素。

使用[`add(int, E)`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28int,%20E%29)方法在索引处插入元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T05:25:23.333

尝试

```
System.out.println("Please Enter Your Student ID (type quit to Quit):\n");
        studentNumber=keybrd.next();

        while (!studentNumber.equals("quit")){
            s=new Student();

            s.setStudentNumber(studentNumber);
            System.out.println("Please Enter Your Course ID:\n");
            course=keybrd.next();
            s.setCourse(course);
            System.out.println("Please Enter Your Mark:\n");
            mark=keybrd.nextInt();
            s.setMark(mark);
            s.printStates();
            studentsCourses.add(s);

            System.out.println("Please Enter Your Student ID (type quit to Quit):\n");
            studentNumber=keybrd.next();
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T05:26:05.630

你需要知道两件事：-

首先，您正在使用一个`do-while`循环，它是一个**退出检查**循环，因此它将在终止之前至少执行一次。如果您想避免它，请尝试使用`while`循环。

接下来，要从列表中检索所有元素，您可以使用`list.get(index)`或`for`循环遍历，如下所示：-

```
List<Student> students = new ArrayList<Student>();
for (Student student : students) {
    // Do something with the student object.
} 
```

**更新：-**

`for`您在上面看到的实际上是Foreach**循环**。这就是它的意思

```
for each item in collection:
  do something to item 
```

因此，循环意味着，

> **对于集合（学生**）中的每个**项目（学生） ，对****项目（学生**） 做一些事情

 ****现在回到循环部分。忘记一切，只需使用`break;`.

在这段代码之后`studentNumber=keybrd.next();`，进行检查并**中断**循环。

```
if(studentNumber.equals("quit")){
    break;
} 
```

简单的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T05:26:38.773

您可以向学生类添加一个`toString()`方法：

```
 @Override
  public String toString()
  {
      return "\tStudentNumber: " + studentNumber
                + "\tCourse: " + course 
                + "\tMarks: " + marks;

  } 
```

然后你可以说：

```
 System.out.println(studentsCourses); 
```

就此而言：

```
 How do I force it to break the do as soon as "quit" is typed? 
```

这种行为是因为您正在使用`do..while()`! 尝试`while`改用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-08T05:31:26.453

“但是我如何让学生从 arrayList 中退出……如果这有意义的话？我已经将它们存储起来，但我不知道如何调用这些信息以便我可以看到它。”

从 arraylist 中获取数据：

```
for (Student student : studentsCourses) {
        System.out.println(student.getStudentNumber());
        System.out.println(student.getCourse());
        System.out.println(student.getMarkr());
    } 
```

或者

```
for (int i = 0; i < studentsCourses.size(); i++) {
        Student student = studentsCourses.get(i);
        System.out.println(student.getStudentNumber());
        System.out.println(student.getCourse());
        System.out.println(student.getMarkr());
    } 
```

要解决其他问题，您可以尝试：

```
 do{
          s=new Student();
          System.out.println("Please Enter Your Student ID (type quit to Quit):\n");
          studentNumber=keybrd.next();
          if(studentNumber.equals("quit"))
              break;
          s.setStudentNumber(studentNumber);
          System.out.println("Please Enter Your Course ID:\n");
          course=keybrd.next();
          s.setCourse(course);
          System.out.println("Please Enter Your Mark:\n");
          mark=keybrd.nextInt();
          s.setMark(mark);
          s.printStates();
          studentsCourses.add(s);
        }while(true); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T05:19:32.453

为什么不使用带有键作为学生编号和对象的哈希图作为学生对象。这样，您也可以避免重复。
**对于哨兵**

```
 // 1\. Create a Scanner using the InputStream available.
        Scanner scanner = new Scanner( System.in );
        String input=null;
do{
        // 2\. Don't forget to prompt the user
        System.out.print( "Type some data for the program: " );

        // 3\. Use the Scanner to read a line of text from the user.
         input = scanner.nextLine();

        // 4\. Now, you can do anything with the input string that you need to.
        // Like, output it to the user.
        System.out.println( "input = " + input );
}while(!input.equalsIgnoreCase("quit")); 
```****

# css - css3渐变和精灵同时进行

> ID：15287217
> 
> 赞同：1
> 
> 时间：2013-03-08T05:17:52.230
> 
> 标签：css, background-image

现在我发现这个已经如此了，每个人似乎都认为它很好[用如何在同一个元素上结合背景图像和 CSS3 渐变？](https://stackoverflow.com/questions/2504071/is-it-possible-to-combine-a-background-image-and-css3-gradients)

由于某种原因，当我这样做时，它失败了。图像单独工作，渐变也是如此。我究竟做错了什么？

```
.cSub {
  background: #00f;
  background-image: url("../images/header/Down_Arrow.svg") 9px 8px no-repeat, -moz-linear-gradient(-45deg, #0088b7 0%, #006da4 100%);
  background-image: url("../images/header/Down_Arrow.svg") 9px 8px no-repeat, -webkit-linear-gradient(-45deg, #0088b7 0%, #006da4 100%);
  background-image: url("../images/header/Down_Arrow.svg") 9px 8px no-repeat, -o-linear-gradient(-45deg, #0088b7 0%, #006da4 100%);
  background-image: url("../images/header/Down_Arrow.svg") 9px 8px no-repeat, -ms-linear-gradient(-45deg, #0088b7 0%, #006da4 100%);
  background-image: url("../images/header/Down_Arrow.svg") 9px 8px no-repeat, linear-gradient(135deg, #0088b7 0%, #006da4 100%);
  border-top: 2px solid #0089b7;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:25:19.773

您拥有`background-image`as 属性，但您为其放置了所有背景值，只是放置`background`而不是`background-image`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:08:29.137

```
.cSub {    
  background: #00f;    
  background: url("../images/header/Down_Arrow.svg") 9px 8px no-repeat, -moz-linear-gradient(-45deg, #0088b7 0%, #006da4 100%);    
  background: url("../images/header/Down_Arrow.svg") 9px 8px no-repeat, -webkit-linear-gradient(-45deg, #0088b7 0%, #006da4 100%);    
  background: url("../images/header/Down_Arrow.svg") 9px 8px no-repeat, -o-linear-gradient(-45deg, #0088b7 0%, #006da4 100%);   
  background: url("../images/header/Down_Arrow.svg") 9px 8px no-repeat, -ms-linear-gradient(-45deg, #0088b7 0%, #006da4 100%);    
  background: url("../images/header/Down_Arrow.svg") 9px 8px no-repeat, linear-gradient(135deg, #0088b7 0%, #006da4 100%);   
  border-top: 2px solid #0089b7;    
width:200px;    
height:auto    
} 
```

您需要提及宽度和高度才能显示背景。

# java - 在 Hibernate 中获取插入的 id 是更好的方法吗？

> ID：15287221
> 
> 赞同：2
> 
> 时间：2013-03-08T05:18:19.520
> 
> 标签：java, hibernate, struts2, ognl, actionresult

我正在使用 Hibernate 3.0 和 Struts。我正在使用`@GeneratedValue`id 生成。

当我保存客户详细信息时，我有一个客户屏幕我想移动到新插入的下一个屏幕，`customerId`因为仅基于该 ID 我将保存第二页详细信息

为此我正在使用

```
someDAO.save(customer);
customerId = customer.getCustomerId(); 
```

保存并使用 Struts 2 后，我获得了客户对象值，`redirectAction`我将其转发`customerId`到第二页，它工作正常，但我在控制台上收到警告

```
Caught OgnlException while setting property 'applicationId' on type 'org.apache.struts2.dispatcher.ServletActionRedirectResult'.
ognl.NoSuchPropertyException: org.apache.struts2.dispatcher.ServletActionRedirectResult.applicationId
    at ognl.ObjectPropertyAccessor.setProperty(ObjectPropertyAccessor.java:132)
    at com.opensymphony.xwork2.util.OgnlValueStack$ObjectAccessor.setProperty(OgnlValueStack.java:68)
    at ognl.OgnlRuntime.setProperty(OgnlRuntime.java:1656)
    at ognl.ASTProperty.setValueBody(ASTProperty.java:101)
    at ognl.SimpleNode.evaluateSetValueBody(SimpleNode.java:177)
    at ognl.SimpleNode.setValue(SimpleNode.java:246) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T07:39:17.733

最好的方法你可以忽略这个，

但是， **redirectAction**使用**ActionMapperFactory**提供的**ActionMapper**将浏览器重定向到调用指定操作和（可选）**命名空间**的 URL 。OGNL 尝试使用在源页面上指定的值设置地图 html 元素，并将这些值推**送到 valuestack**中。有时**OGNL**尝试使用在源页面中指定的操作类中指定的设置器映射值，但未能设置值并**导致警告**。

您可以尝试显式分配**参数**以抑制警告：

```
<result name="showReportResult" type="redirectAction">
     <param name="applicationId">${applicationId}</param>
 </result> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:00:21.707

The exception says that

> Exception thrown if a property is attempted to be extracted from an object that does not have such a property

This means that you need to the Java bean property `applicationId`. Putting getters and setters on the field should solve the issue.

About better way to insert the id with hibernate use

```
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(name = "id", nullable = false)
public Long getId() {
    return id;
} 
```

# transactions - 如何使用谷歌翻译 api 仅翻译特定单词

> ID：15287224
> 
> 赞同：1
> 
> 时间：2013-03-08T05:18:41.840
> 
> 标签：transactions, google-translate, google-translator-toolkit

我只想在我的 PHP 网站中翻译特定的单词。

例如

```
 Data      Language      Translation
---------------------------------------------
    Hello     select        ___________ 
```

当用户从下拉列表中选择语言时，翻译字段应更新为将 Hello 翻译成所选语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:25:31.770

您可以使用[gtranslate-api-php](https://code.google.com/p/gtranslate-api-php/)，使用起来非常简单。

```
<?php
      require("GTranslate.php");

      try{
         $gt = new Gtranslate;
         echo "Translating [Hello World] from English to German => ".$gt->english_to_german("hello world")."<br/>";
         echo "Translating [Ciao mondo] Italian to English => ".$gt->it_to_en("Ciao mondo")."<br/>";
      } catch (GTranslateException $ge)
      {
        echo $ge->getMessage();
      }
?> 
```

顺便说一句，当用户将语言选择到包含此代码的 php 文件（如果您不使用框架）时，您应该发出 ajax 请求，然后返回值并填充必填字段。

# asp.net-mvc - 正确的时间没有显示在 json 网格中，但时间在 MVC 编辑视图中是正确的

> ID：15287226
> 
> 赞同：0
> 
> 时间：2013-03-08T05:18:45.077
> 
> 标签：asp.net-mvc, json

我有一个显示电子邮件模板的 JSON 网格，但问题是显示的最后更改日期早于当前日期，但在 MVC 编辑视图中编辑该记录时，相同的记录最后更改日期正确显示。

返回的 Json 格式日期为：Date(1362686659073)

但是在同一记录的编辑页面上日期是：3/7/2013 12:04:19 PM 即日期（1362638059000）

同一日期相差约 13.5 小时。

这是我将数据返回到 JSON 的代码

```
 TemplateGridExt ext = new TemplateGridExt();
        ext.Count = client.GetPagedGridCountEmailTmpl(filter);
        ext.Data = result.EmailTmpl_Vs.ToList();
        return this.Json(ext, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:14:49.137

尝试以其他格式（如字符串）传递数据，然后它应该可以正常工作。

试试这个代码 -

首先创建一个这样的类 -

```
public class TimeFormatter : DateTimeConverterBase
{
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        return DateTime.Parse(reader.Value.ToString());
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {

        writer.WriteValue(((DateTime)value).ToString("yyyy/MM/dd"));//format for date
    }
} 
```

使用此代码将 Json 数据返回到您的视图 -

```
JsonSerializerSettings jSettings = new JsonSerializerSettings()
            {
                Formatting = Formatting.Indented,
                DateTimeZoneHandling = DateTimeZoneHandling.Utc
            };

            jSettings.Converters.Add(new TimeFormatter());
            JsonSerializer.Create(jSettings);

            return JsonConvert.SerializeObject(data, jSettings);//'data' is list of objects to return to view. 
```

不要忘记包含命名空间 -

```
using System.Runtime.Serialization;
using Newtonsoft.Json;
using Newtonsoft.Json.Converters; 
```

# android - 如何获取拨出电话的通话状态？

> ID：15287229
> 
> 赞同：3
> 
> 时间：2013-03-08T05:18:51.187
> 
> 标签：android, android-activity, telephonymanager, android-broadcast

我是 android 的初学者，正在开发一个 android 应用程序来监控用户在通话时的网络状态（对于来电和去电）......

我可以通过实现 PhonestateListner 类并覆盖 onCallStateChanged 方法来监控来电的网络状态，我正在使用在 onCallStateChanged 方法内的 TelephonyManager 类中定义的常量（CALL_STATE_IDLE、CALL_STATE_OFFHOOK 和 CALL_STATE_RINGING），但这些常量无法正常工作对于拨出电话...

```
 my question is 
```

1.  有呼出时如何监控通话状态（RINGING、OFF_HOOK、IDLE）？
2.  android中有没有API来监控呼出的通话状态？？？如果是，请说明...

请帮助我理解这个概念......感谢您的时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-28T14:04:44.587

下面的代码帮助您在 onCreate 中获取网络状态代码

```
 StateListener phoneStateListener = new StateListener();
     TelephonyManager telephonyManager =(TelephonyManager)getSystemService(TELEPHONY_SERVICE);
     telephonyManager.listen(phoneStateListener,PhoneStateListener.LISTEN_CALL_STATE); 
```

为手机的监听状态创建一个内部类。

```
class StateListener extends PhoneStateListener {
@Override
public void onCallStateChanged(int state, String incomingNumber) {
    super.onCallStateChanged(state, incomingNumber);
    switch (state) {
        case TelephonyManager.CALL_STATE_RINGING:
            break;
        case TelephonyManager.CALL_STATE_OFFHOOK:
            System.out.println("call Activity off hook");
            LockScreenActivity.this.finish();
            break;
        case TelephonyManager.CALL_STATE_IDLE:
            break;
    }
}
}; 
```

`manifest`在文件中设置权限

```
 <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T05:23:52.573

具有拨出呼叫动作的 BroadcastReceiver`android.intent.action.NEW_OUTGOING_CALL`和`android.intent.action.PHONE_STATE`.

将`android.intent.action.NEW_OUTGOING_CALL`在发起拨出呼叫时广播。接收意图将有一个额外的字符串变量`Intent.EXTRA_PHONE_NUMBER`，其中包含传出号码。这需要许可`android.permission.PROCESS_OUTGOING_CALLS`。

要检测来电，请为 action 注册一个 BroadcastReceiver `android.intent.action.PHONE_STATE`。这将在电话状态发生变化时广播。接收意图将有一个额外的字符串变量`TelephonyManager.EXTRA_STATE`来描述电话状态。如果这个状态是`TelephonyManager.EXTRA_STATE_RINGING`那么会有另一个额外的字符串变量`TelephonyManager.EXTRA_INCOMING_NUMBER`。此变量包含传入的电话号码。请注意，当状态不是时，此变量将不存在`TelephonyManager.EXTRA_STATE_RINGING`。

# java - Hibernate OnetoMany,ManyToOne 映射给 null

> ID：15287230
> 
> 赞同：15
> 
> 时间：2013-03-08T05:19:04.187
> 
> 标签：java, hibernate, jpa

我有 2 个名为 PurchaseList.java 和 PurchaseListItems.java 的类

我必须在 PurchaseListItems 中映射 PurchaseList

采购清单.java

```
@OneToMany(cascade = CascadeType.ALL)
@JoinColumn(name="pl_id",referencedColumnName="id")
private List<PurchaseListItems> purchaseListItems; 
```

PurchaseListItems.java

```
@ManyToOne
@JoinColumn(name="pl_id")
private PurchaseList purchaseListId; 
```

一切都很好，但我在 pl_id 中得到了空值。请告诉我哪里错了

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-20T16:29:48.633

由于某种原因，映射的对我来说不适用于 postgres sql 和 Hibernate4

下面的映射工作

**采购清单.java**

```
@OneToMany(cascade = CascadeType.ALL)
@JoinColumn(name="pl_id",nullable=false)
private List<PurchaseListItems> purchaseListItems; 
```

**PurchaseListItems.java**

```
@ManyToOne
@JoinColumn(name="pl_id", nullable=false,insertable=false,updatable=false )
private PurchaseList purchaseListId; 
```

注意：您必须使用身份或明确提及 postgres 的 id 列的序列。

```
@GeneratedValue(strategy=GenerationType.IDENTITY) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T16:35:58.453

您的映射实际上定义了两个独立的单向关系。你想要的是一个双向关系。下面的代码将建立双向关系

```
@OneToMany(cascade = CascadeType.ALL, mappedBy = "purchaseListId")
@JoinColumn(name="pl_id",referencedColumnName="id")
private List<PurchaseListItems> purchaseListItems; 
```

mappedBy 属性是必需的，因为提供者无法自动确定指定的关系实际上形成了单个关系。可以使用实例成员的 Java 类型，但如果您有多个相同类型的成员怎么办。在很多情况下，你有两个单一的关系。例子：

OneToMany: User -> ForumThread（用户创建的话题）

ManyToOne：ForumThread -> User（关闭线程的用户。显然不一定是启动线程的人）

这是两个独立的关系，必须这样对待。如果您的持久性提供只是因为类型和多重性匹配而从中建立了双向关系，您会感到非常惊讶。

另请注意，任何 JPA 提供程序都不会自动管理双向关系，这意味着反向关系不会在您的对象模型中自动更新/设置，因此不会在数据库中。你必须自己做。顺便说一句，在我所有的项目中，双向关系都让人头疼，我认为避免它们是可取的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T05:46:51.683

1.  @JoinColumn 注释属于关系的 @ManyToOne 一侧 - 但不属于 @OneToMany 一侧 - 将其从 @OneToMany 一侧删除。

2.  Cascade 用于级联 DELETE/READ/UPDATE 操作...，但它不会自动填充外键“子”侧的 ID 列。事实上，它不会填充对 FK 关系两侧对象的 java 引用。您需要在双向关系的两侧手动设置关系数据：

    myPurchaseListItem.setPurchaseList(myPurchaseList);
    myPurchaseList.setPurchaseListItem(myPurchaseListItem);

    从 JPA 2 规范：

    托管实体之间的双向关系将基于关系拥有方持有的引用进行持久化。开发人员有责任保持拥有方的内存引用和相反方的内存引用在更改时彼此保持一致。在单向一对一和一对多关系的情况下，开发人员有责任确保（原文如此）关系的语义得到遵守。 [29]

    尤其重要的是要确保对关系反向端的更改会导致拥有端的适当更新，以确保更改同步到数据库时不会丢失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T08:01:40.003

```
for(PurchaseListItems item:purchaseListItemsList)
item.purchaseListId(PurchaseList); 
```

这是我在创建对象时错过的。

感谢您的回答

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T12:14:18.087

当您创建***PurchaseListItems***值时，检查您是否使用有效值（创建的***PurchaseList实例）填充******了 purchaseListId***。

 **最好使用***mappedBy***如下代码让多方维护关系。

```
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "purchaseListId")
@JoinColumn(name="pl_id",referencedColumnName="id")
private List<PurchaseListItems> purchaseListItems; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T05:26:04.413

尝试这个

```
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "purchaseListId") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T05:23:28.083

jpa 规范看起来不错，但请确认您在数据库中提供了有效的父子关系。如果没有引用，那么它将返回 null。**

# jsp - 在 WebSphere 中调用预编译的 JSP

> ID：15287232
> 
> 赞同：0
> 
> 时间：2013-03-08T05:19:09.763
> 
> 标签：jsp, websphere, precompiled

尝试从我的 Web 应用程序中使用已编译的 JSP，但我不知道如何为我的 确定适当的类名`web.xml`，我将`_db.class`文件放在`WEB-INF/classes/_db.class`

每当我尝试使用**/context-root/dbx**调用我的应用程序时，我都会得到：

```
Error 404: javax.servlet.UnavailableException: SRVE0200E: Servlet [com/ibm/_jsp/_db]: 
Could not find required class - class java.lang.ClassNotFoundException: com/ibm/_jsp/_db 
```

我的 web.xml 包含一个基本的 servlet 映射

```
<servlet>
            <servlet-name>dbx</servlet-name>
            <servlet-class>com/ibm/_jsp/_db</servlet-class>
</servlet>
<servlet-mapping>
            <servlet-name>dbx</servlet-name>
            <url-pattern>/dbx/*</url-pattern>
</servlet-mapping> 
```

如果我更改`<servlet-class>`为 _db，我会得到：

错误 500：java.lang.NoClassDefFoundError：_db（错误名称：com/ibm/_jsp/_db）

运行**/opt/IBM/WebSphere/AppServer/java/bin/javap _db**给出

```
Compiled from "_db.java"
public final class com.ibm._jsp._db extends com.ibm.ws.jsp.runtime.HttpJspBase implements com.ibm.ws.jsp.runtime.JspClassInformation{
    static {};
    public com.ibm._jsp._db();
    public java.lang.String[] getDependants();
    public java.lang.String getVersionInformation();
    public boolean isDebugClassFile();
    public void _jspInit();
    public void _jspService(javax.servlet.http.HttpServletRequest,   
      javax.servlet.http.HttpServletResponse)   
      throws java.io.IOException, javax.servlet.ServletException;
} 
```

如果我尝试将**com.ibm._jsp._db**用于服务器类，我会得到：

```
Error 404: javax.servlet.UnavailableException: SRVE0200E: Servlet [com.ibm._jsp._db]: 
Could not find required class - class java.lang.ClassNotFoundException: com.ibm._jsp._db 
```

我的实际 jsp 非常简单，并且不包含类定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:00:03.043

您必须根据`WEB-INF/classes`其包名称放置类。

试着把你的 Servlet 放在这里：

```
WEB-INF/classes/com/ibm/_jsp/_db.class 
```

# javascript - 网页设计：客户想要一个基于旋转的导航栏

> ID：15287240
> 
> 赞同：2
> 
> 时间：2013-03-08T05:19:52.890
> 
> 标签：javascript, css

我不知道这是否可能，但客户很坚持。他希望他的导航栏内容沿“斐波那契螺旋”对齐。

这东西：

![在此处输入图像描述](../Images/35bade9d9c95b9c1b7122c7c047e11f8.png)

我什至不认为 CSS3 旋转方面目前在任何浏览器中都可以使用，而且我不知道是否有任何脚本语言允许我创建一个自定义的弯曲轨道以强制对象跟随而不是最微弱的可能性标准（几乎只有）水平和垂直对齐方法。然而，我确实接受了一个很好的挑战。不费吹灰之力就退缩很难做得很好。

如果你们中的任何人知道我如何实现这种效果的任何可能性，甚至是最大程度的可能性，我都会感到惊讶。感谢您的时间！如果您认为这在当前的 Web 浏览器中确实不可能实现，请说出来！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:50:56.410

无论如何，有趣的想法。希望你能让你的客户满意。我想我可能会加入一些东西。找到了一个 jQuery 插件，可以沿曲线弯曲文本：http: [//tympanus.net/Development/Arctext/](http://tympanus.net/Development/Arctext/)

也许可以制作一个尺寸递减的方形 div 布局，并为每个 div 指定一条曲线？

如果你把它转过来可能的 div 布局：http: [//upload.wikimedia.org/wikipedia/commons/9/95/FibonacciBlocks.svg](http://upload.wikimedia.org/wikipedia/commons/9/95/FibonacciBlocks.svg)

该插件从半径值指定弯曲，可以向上或向下弯曲。它似乎不是为倾斜曲线构建的，但也许可以修改。

编辑：我对该插件进行了一些实验，我相信它肯定可以达到您需要的效果，尽管必须非常了解三角学（据我所知）才能使其正常运行。

另一种选择，也是迄今为止我能想到的最简单的方法，是使用一个古老的经典：图像映射！ [http://en.wikipedia.org/wiki/Image_map](http://en.wikipedia.org/wiki/Image_map)

只需 Photoshop 一个漂亮的螺旋图像，无论你喜欢什么，并使用图像映射来设置可链接区域。这可能是有趣的：[http ://www.outsharked.com/imagemapster/default.aspx?demos.html](http://www.outsharked.com/imagemapster/default.aspx?demos.html)

# javascript - 将 HTML 页面集成到 sap xcelsius

> ID：15287247
> 
> 赞同：0
> 
> 时间：2013-03-08T05:20:36.083
> 
> 标签：javascript, html, flash, xcelsius

我有一个带有 5 个选项卡的 xcelsius 仪表板，我的要求是在“xcelsius 仪表板”中添加一个新选项卡并将 HTML 页面加载到其中，并且页面有很多 javascript 和 html 组件，如 AJAX 请求、SELECT BOX、工具提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:39:25.587

恐怕我不认为这是一个选择。您最多可以做的是使用 URL 按钮链接到 HTML 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T09:32:23.553

您不能导入完整的 html 并在 XCelsius 中显示它。请注意 SWF 文件，而不是 HTML 浏览器。如何使用 XML 数据将数据带到 Xcelsius 对象并填充任何下拉框等

# php - foreach 循环中的 PHP 参数无效

> ID：15287252
> 
> 赞同：-1
> 
> 时间：2013-03-08T05:21:00.440
> 
> 标签：php

我有一个主 php 文件，我将其包含在我从中调用函数的 php 文件中。

我的主文件有这个功能

```
function GetComments()
{
global $server;
global $info;
global $dbhandle;

$query = "SELECT GbId, fname, lname, comment FROM Guestbook";

$result = sqlsrv_query($dbhandle, $query);

while($row = sqlsrv_fetch_array( $result, SQLSRV_FETCH_ASSOC))
{
$array[$row['GbId']] = array(
'f' => trim($row['fname']),
'l' => trim($row['lname']),
'c' => trim($row['comment']));
}

return $array;
} 
```

我的网页文档有这个代码

```
<?php
$array = GetComments();

foreach($array as $key => $info)
{
echo $info['f']." ".$info['l']." said "."&quot;".$info['c']."&quot;"."<br /><br />";
}

Close();
?> 
```

当 foreach 循环位于主文件中时，此代码工作正常，但在网页文件中打印出所有数据后，我收到警告。我不太担心它，因为它仍然有效，但我想摆脱它，修复它，或者至少知道它为什么会发生。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:24:10.353

发生错误是因为 foreach 期望数组作为输入，但提供的变量在某些点不是数组。

解决方案：如果不是数组，则将其设为空数组。

尝试`if(!is_array($array)){ $array = array(); }`在之后添加此行`$array = GetComments();`

```
$array = GetComments();
if(!is_array($array)){ $array = array(); } 
```

编辑：在函数中的 while 循环之前声明数组

```
$array     = array();
while($row = sqlsrv_fetch_array( $result, SQLSRV_FETCH_ASSOC))
{
$array[$row['GbId']] = array(
'f' => trim($row['fname']),
'l' => trim($row['lname']),
'c' => trim($row['comment']));
}

return $array; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:25:28.080

你可以这样使用：

```
foreach( (array) $array as $key => $info) 
```

# python - App Engine Search API - 暂时性错误

> ID：15287253
> 
> 赞同：1
> 
> 时间：2013-03-08T05:21:01.907
> 
> 标签：python, google-app-engine

我遇到了 App Engine 全文搜索 API 抛出`TransientError`. 这是我可以做到的最简单的形式（它仍然在生产服务器上给出错误，但不是在开发服务器上）。请注意，这发生在我的所有 5 个搜索索引上，而不仅仅是这个。

```
from google.appengine.api import search

query_obj = search.Query(query_string='')
print search.Index(name='donation').search(query=query_obj) 
```

这是 App Engine 给出的错误：

```
File "/base/data/home/apps/s~ghidonations/4e.365801633107307526/GlobalUtilities.py", line 914, in search
  search_results = search.Index(name=index_name).search(query=query_obj)
File "/python27_runtime/python27_lib/versions/1/google/appengine/api/search/search.py", line 3093, in search
  raise _ToSearchError(e)
TransientError 
```

在我写这篇文章时，一些搜索查询实际上又开始工作了（5 分钟前抛出了错误），但有些仍然很傻。我在以前的论坛上阅读过有关按日期排序的内容（我在实际生产代码中这样做），所以我认为将其取出可以解决问题。它没有 - 请参阅顶部的 3 行代码。

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:14:50.473

TransientErrors 是将来会消失的错误。我不知道是什么导致了这些错误，谷歌的错误建议只是重试搜索。

```
# Index the document.
try:
    index.put(doc)
except search.PutError, e:
    result = e.results[0]
    if result.code == search.OperationResult.TRANSIENT_ERROR:
        # possibly retry indexing result.object_id
except search.Error, e:
    # possibly log the failure 
```

此示例来自 Index.put 文档，但它是我能找到的唯一一个搜索 api 中出现瞬时错误的示例，因此我希望您可以使用相同的技术。

来源[https://developers.google.com/appengine/docs/python/search/indexclass#Introduction](https://developers.google.com/appengine/docs/python/search/indexclass#Introduction)

# jquery - 当我添加这个 stopPropagation 函数时，显示值的函数停止工作

> ID：15287254
> 
> 赞同：0
> 
> 时间：2013-03-08T05:21:03.133
> 
> 标签：jquery, checkbox, show-hide, checked, stoppropagation

我正在使用 unordered () HTML 列表设置一些 MultiSelect 元素的样式，但是当我添加最新的函数*（单击另一个元素时关闭容器）时，另一个*函数停止工作 - 显示复选框值的函数检查。

完整代码的小提琴在这里：http: [//jsfiddle.net/chayacooper/ezxSF/19/](http://jsfiddle.net/chayacooper/ezxSF/19/)

**我要添加的功能**

```
// Close the container when click elsewhere on the page 
$('html').click(function () { $('#select_colors').hide(); });
$('.dropdown_box_colors, .dropdown_container_colors').click(function (e) {
    e.stopPropagation();
    return false;
}); 
```

**原始功能**

```
$(document).ready(function () {
    // Opens the container and close it on mouseleave
    $(".dropdown_box_colors").click(function () {
        $("#select_colors").show();
    });           
    var timeoutID;
    $("#select_colors").mouseleave(function () {
            timeoutID = setTimeout(function () {
        $("#select_colors").hide();
        }, 800);
    });
    $("#select_colors").mouseenter(function () {
        clearTimeout(timeoutID);
    });
    // Displays the values of checkboxes checked in a container (adds/removes them when they're checked/unchecked). Displays the # selected if more than 3 items are checked
    $(".dropdown_container_colors input").change(function () {
        var checked = $(".dropdown_container_colors input:checked");
        var span = $(".dropdown_box_colors span");
        if (checked.length > 3) {
            span.html("" + checked.length + " selected");
        } else {               
            span.html(checked.map(function (){
                return $(this).closest('label').clone().children().remove().end().text(); 
            }).get().join(", ")); 
        }
    });
});
// Toggles the visibility of the checkmark 
function toggle_colorbox_alt(span) {
    div = span.getElementsByTagName('div')[0];
    cb = span.getElementsByTagName('input')[0];
    if (cb.checked == false) {
        div.style.visibility = "visible";
        span.className = "colorSwatch colorSwatchSelected";
        cb.checked = true;
    }
    else {
        div.style.visibility = "hidden";
        span.className = "colorSwatch";
        cb.checked = false;
    }
} 
```

HTML

```
<div class="dropdown_box_colors"><span>Select</span></div>
<div class="dropdown_container_colors"> 
    <ul id="select_colors">  
        <li>
            <a href="#"><label onclick="toggle_colorbox_alt(this.children[0]);">
            <div style="background-color: #000000" class="colorSwatch">
                <div class=CheckMark>&#10003;</div>
                <input type="checkbox" name="color[]" value="Black" class="ckBox"/>
            </div>Black</label></a>
        </li>   
        <!-- Additional List Items --> 
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:00:03.460

```
Try removing return false from onclick event handler after calling stopPropagation().

Have a look at the working fiddle here: http://jsfiddle.net/ezxSF/22/ 
```

# javascript - 在 IE6 中运行的 CSS 预处理器

> ID：15287255
> 
> 赞同：0
> 
> 时间：2013-03-08T05:21:11.500
> 
> 标签：javascript, less, internet-explorer-6, stylus

我正在寻找在 IE6 中运行的 CSS 预处理器。显然它需要用 Javascript 编写；Less、Stylus 或任何其他基于 JS 的 CSS 预处理器是否可以在 IE6 中工作？

（它用于一个小部件，可以选择让嵌入器设置一些变量，因此需要在浏览器中工作并支持旧浏览器。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:55:15.843

Less、Sass、Stylus 等没有理由不能在 IE6 中运行。他们编译成 CSS。只要您不使用 IE6 不支持的 CSS，我看不出有什么问题。

如果您正在寻找在浏览器中运行并支持 IE6 的编译器，那么您可能会遇到困难。甚至保险业也从 IE6 开始...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T06:41:59.027

你可以使用更少的css，

[http://lesscss.org/](http://lesscss.org/)

它是动态样式表语言。它使用一个简单的 JavaScript 文件。将其嵌入您的模板并开始使用它。它很容易使用...

# php - 入住/地图 API

> ID：15287257
> 
> 赞同：0
> 
> 时间：2013-03-08T05:21:18.703
> 
> 标签：php, javascript, ios, ruby, api

我正在尝试为我们想为我们的业务开发的应用程序获取一些信息。我们经营一家连锁店（约 20 家），并希望在客户入住我们的商店时给予奖励积分。我们还想在我们的公司网站上显示该信息，例如。“客户 X 已签入位置 Y”。我想知道是否有人可以向我指出任何能够实现这些目标的 API 或解决方案？我在看foursquare API，这是一个可行的选择吗？还是有其他建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:21:39.243

正如 Fahri 指出的那样，您可以使用 4sq API，但现在所有社交都集成了地理定位。您也可以使用 Facebook 和 Twitter 分享您的职位。我会建议使用最后两个，因为它们已经集成了身份验证，以及从 iOS6 开始的 API，可能它们也比 4SQ 使用得更多。

# qt - 为什么我在这段代码中收到错误

> ID：15287261
> 
> 赞同：0
> 
> 时间：2013-03-08T05:21:46.487
> 
> 标签：qt, user-interface, qfile

我看过几个不同的教程，所有代码看起来都一样，但是当我尝试编译它时，我得到了两个错误。它们不匹配调用“（QFile）（QString&）”不匹配调用“（QTextSteam）（Qfile）”。你能解释一下为什么吗？以下是我的代码的一部分，如果您需要更多内容，请询问。

我的标题代码块

```
private:
QLabel *label;
QTextEdit *left;
QTextEdit *right;
QLineEdit *user;
QTextStream file;
QFile namefile;
QString name;
QString n; 
```

我的源代码

```
n ="name.txt";
namefile(n);
if (!namefile.open(QFile::ReadOnly))
{
    return;
}
file(&namefile);
name=file.readLine();
right->setText(name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:37:55.430

您的问题似乎与 C++ 的关系比与 Qt 的关系更大。特别是，您应该了解一下 C++ 初始化列表以及类成员的一般构造方式。

无论如何，我假设您列为“我的源代码”的代码位于类的构造函数中。一种选择是首先重新排序私有成员，以便按初始化顺序列出它们：

```
private:
QString n;
QFile namefile;
QTextStream file;
QString name; 
```

然后在类构造函数的初始化列表中初始化它们：

```
MyClass::MyClass()
   :n("name.txt")
   ,namefile(n)
   ,file(&namefile)
{
   if (!namefile.open(QIODevice::ReadOnly))
   {
      return;
   }

   name = file.readLine();

   // Rest of your code goes here.
} 
```

还有其他方法可以做到这一点，但我会留给你研究我上面建议的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-11-02T18:04:26.940

只是改变

```
file.setDevice(&namefile); 
```

# ios - iOS - 如何为应用请求预先选择所有 Facebook 朋友？

> ID：15287270
> 
> 赞同：2
> 
> 时间：2013-03-08T05:22:53.090
> 
> 标签：ios, facebook, facebook-app-requests

我在我的 iOS 应用程序中实现了 facebook 应用程序请求，我希望默认选择所有朋友，并让用户取消选择朋友。我们可以在 iOS 中做到这一点吗？

提前致谢。

# android - 通过 div 元素的 Jquery Mobile 滑动事件

> ID：15287273
> 
> 赞同：2
> 
> 时间：2013-03-08T05:23:19.263
> 
> 标签：android, android-layout, cordova, jquery-mobile

我正在开发一个应用程序`phonegap`，`jquery-mobile`它的布局只是两行数据和一个表中大约 50 列。*我希望每个水平滑动都显示下一个相应的列，每个垂直滑动显示与每个第一行列连接的相应第二行。*

例子：

```
divA1  divB1  divC1  divD1  divE1  divF1  divG1  divH1  divI1  divJ1
divA2  divB2  divC2  divD2  divE2  divF2  divG2  divH2  divI2  divJ2 
```

每次水平滑动显示一行中的下一个 div，垂直滑动显示其下方的 2div。

我了解如何在不同页面之间滑动作为一种导航形式（使用`data-role="page"`）但是，

我希望通过一个 div 列表来实现这种类似的功能，但我还没有找到任何解释如何实现这一点的东西。

感谢您提供的任何帮助或可用的插件解决方案来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:11:46.287

您应该探索的概念称为*sprite sheet*。您应该将所有内容放在图层/页面`divs`上的单个容器中。`div`然后，您使用动态控制`.style`的更改，根据滑动的方向`div`相对于 viewports 重新定位容器。`.offset`因此，例如，如果个人`divs`是`width:100px`每个人，那么左滑动事件应该产生：

```
var el=document.getElementById("divContainer");
el.style.cssText ='left:'+ (el.offsetLeft-100) + 'px'; 
```

向右滑动会增加定位：

`(el.offsetLeft+100)`

向上/向下将遵循相同的逻辑：

```
el.style.cssText ='top:'+ (offset top +/- positioning) + 'px'; 
```

# android - 您如何将音频焦点返回到以前播放的应用程序？

> ID：15287289
> 
> 赞同：2
> 
> 时间：2013-03-08T05:24:19.210
> 
> 标签：android, android-mediaplayer, android-audiomanager

我是 android 应用程序开发的新手，我认为这可能是一个非常简单的问题，但我无法弄清楚如何做我想做的事......

我有一个简单的应用程序，可以在按下按钮时播放声音。播放声音后，我希望应用程序将音频返回到应用程序启动之前正在播放的任何内容（例如，如果音乐应用程序正在播放，声音应该在播放时中断音乐，然后返回控制并恢复音乐播放。我尝试使用 setOnCompletionListener 方法，但没有任何乐趣。

这是代码：

```
public class MainActivity extends Activity implements OnClickListener{

public MediaPlayer mp = null;
public ImageButton playm = null;
public AudioManager audioManager = null;

/** called when activity first created */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setVolumeControlStream(AudioManager.STREAM_MUSIC);
    audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

    //Sigh Button
    playm = (ImageButton) findViewById(R.id.sighButton);
    playm.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    if (v==playm){
        OnAudioFocus onAudioFocus=new OnAudioFocus(this);
        audioManager.requestAudioFocus(onAudioFocus, AudioManager.STREAM_MUSIC, 
                AudioManager.AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK);
        playSighSound();
    }
}

public void playSighSound(){
        mp = MediaPlayer.create(this, R.raw.ohboy); 
        try {
        mp.start();
        mp.setOnCompletionListener(new OnCompletionListener(){

            @Override
            public void onCompletion(MediaPlayer mp){
            mp.release();
            }
        });
        } catch (IllegalArgumentException e){
            e.printStackTrace();
        } catch (IllegalStateException e){
            e.printStackTrace();
        }
    }
}

class OnAudioFocus implements AudioManager.OnAudioFocusChangeListener{
    MainActivity onAudioFocus;

    public OnAudioFocus(MainActivity onAudioFocus){
        this.onAudioFocus = onAudioFocus;
    }

public void onAudioFocusChange(int focusChange) {
    switch(focusChange){
    case AudioManager.AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK:
        onAudioFocus.playSighSound();
        break;

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-19T12:55:12.630

我知道我迟到了，但这里是关于如何在需要时获得音频焦点并在完成播放音频时释放它的实现。

正在播放音频的后台应用程序将在您获得 `requestAudioFocus()`应用程序的音频焦点时停止，并在您释放音频焦点后继续它们停止的位置`releaseAudioFocus()`。

此外，实现**API 26**及更高版本。

```
public class AudioFocusManager {

    Context context;
    private AudioFocusRequest audioFocusRequest;

    public AudioFocusManager(Context context) {
        this.context = context;
    }

    public void requestAudioFocus() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            audioFocusRequest =
                    new AudioFocusRequest.Builder(AudioManager.AUDIOFOCUS_GAIN_TRANSIENT)
                            .build();
            getAudioManager().requestAudioFocus(audioFocusRequest);
        } else {
            getAudioManager().requestAudioFocus(null, AudioManager.STREAM_MUSIC, AudioManager.AUDIOFOCUS_GAIN_TRANSIENT);
        }
    }

    public void releaseAudioFocus() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            if (audioFocusRequest != null) {
                getAudioManager().abandonAudioFocusRequest(audioFocusRequest);
                audioFocusRequest = null;
            }
        } else {
            getAudioManager().abandonAudioFocus(null);
        }
    }

    private AudioManager getAudioManager() {
        return ((AudioManager) context.getSystemService(Context.AUDIO_SERVICE));
    }
} 
```

# asp.net - 如何在 Rackspace 云站点上以中等信任运行 Itextsharp.dll

> ID：15287290
> 
> 赞同：3
> 
> 时间：2013-03-08T05:24:31.053
> 
> 标签：asp.net, security, itextsharp, rackspace

`itextsharp.dll`在**rackspace 云站点**中使用时出现安全异常。以下是例外情况：

> [SecurityException：该程序集不允许部分受信任的调用者。]

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-23T07:39:31.867

为确保您的程序集能够在中等受信任的环境中工作，您需要给它们一个强名称并用一个属性标记它们，告诉 .NET 安全运行时允许该代码。

要允许来自您的代码的部分受信任的调用者，请将以下属性添加到程序集的 AssemblyInfo.cs 文件中：

```
[assembly: AllowPartiallyTrustedCallers] 
```

您还需要确保文件引用 System.Security 命名空间。

此外，您还需要通过项目属性对话框对程序集进行签名，为程序集提供一个强名称。

# ruby-on-rails - 如何合并rails表中的列？

> ID：15287291
> 
> 赞同：5
> 
> 时间：2013-03-08T05:24:33.550
> 
> 标签：ruby-on-rails, merge

我有一个 Rails 用户表，其中包含 first_name 和 last_name 列等。我如何将这两者合并在一起？或者我如何创建一个名为 name 的新列并从这两列添加数据？基本上我需要一个名为 name 的列，它是 first_name 和 last_name 的串联。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T05:42:25.777

正如 Richard Brown 所回答的那样，如果要将连接的字符串保存到数据库中，则应该创建一个迁移。

```
rails g migration add_fullname_to_users fullname 
```

然后在生成的迁移中运行 sql 以更新所有记录

```
# mysql
User.update_all('fullname = CONCAT(first_name, " ", last_name)')

# postgre
User.update_all("fullname = (first_name || ' ' || last_name)") 
```

但我建议您保留当前设置并在模型中创建一个名为 fullname 的方法

```
# user.rb
def fullname
  "{first_name} #{last_name}"
end 
```

哪个更好，因为您可以访问`first_name`和`last_name`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-12T06:02:24.227

如果要确保可以回滚，可以在迁移文件中执行类似的操作。

```
 def up
    add_column :your_table, :name, :string 

    YourClass.all.each do |person|
      person.update_attributes! :name => person.first_name + " " + person.last_name
    end

    remove_column :your_table, :first_name
    remove_column :your_table, :last_name  
  end 
```

以及您的回滚方法：

```
 def down
    add_column :your_table, :first_name, :string
    add_column :your_table, :last_name, :string

    YourClass.all.each do |person|
      person.update_attributes! :first_name => person.name.match(/\w+/)[0]
      person.update_attributes! :last_name => person.name.match(/\w+/)[1]
    end

    remove_column :your_table, :name
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:36:54.203

创建迁移以添加新字段：

`rails g migration AddNameToTableName name`

您可以编写一个 rake 任务来执行连接。

```
TableName.all.each do { |row| row.update_attributes(name: "#{row.first_name} #{row.last_name}") } 
```

您可以从 rails 控制台执行该操作，但我喜欢可重复的数据库更新，因此我更喜欢 rake 任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T23:54:59.297

上面示例中的 \w 正则表达式匹配器和与空格连接对我来说是有问题的，尽管我遇到了**相反**的问题，将名字分成名字和姓氏。相反，考虑使用我最终得到的东西。首先备份您的数据库，并在开发中进行测试！

```
 def up # Split name into first and last
    add_column :people, :first_name, :string
    add_column :people, :last_name, :string
    Person.all.each do |person|
      person.update_column(:first_name, person.attributes["name"].rpartition(" ").first)
      person.update_column(:last_name, person.attributes["name"].rpartition(" ").last)
      person.save(:validate => false)
    end
    remove_column :people, :name
  end

  def down # Merge first and last into name
    add_column :people, :name, :string
    Person.all.each do |person|
      person.update_column(:name, [person.attributes["first_name"].to_s, person.attributes["last_name"].to_s].reject(&:blank?).join(" "))
      person.save(:validate => false)
    end
    remove_column :people, :first_name
    remove_column :people, :last_name
  end 
```

这样可以避免在其中一个名称为 nil 的情况下插入杂散空格，并且还可以更有效地将全名拆分为名字和姓氏；具体来说，通过拆分名称中的**最后一个**空格，因为“First Middle”“Last”比“First”“Middle Last”更像是人类兼容的拆分。查看示例：

```
# Before split
> puts p.name.inspect
"Prince"
"Test User"
"Jean Luc Picard"

# After split    
> puts p.first_name.inspect + " " + p.last_name.inspect
"" "Prince"
"Test" "User"
"Jean Luc" "Picard" 
```

我的主要抱怨是“Prince”可能应该是名字而不是姓氏，但是根据您的数据库限制，它可能仍然需要进入 last_name 字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-12T04:36:03.480

在我的带有用户模型的 rails 4 应用程序中，我生成了我的迁移文件

```
rails g migration RemoveFirstLastNameColumnsFromUser 
```

然后我放入

```
class RemoveFirstLastNameColumnsFromUser < ActiveRecord::Migration
  def up
    add_column :users, :name, :string

    User.all.each do |u|
      u.update! name: "#{u.first_name} #{u.last_name}"
    end

    remove_column :users, :first_name
    remove_column :users, :last_name
  end

  def down
    add_column :users, :first_name, :string
    add_column :users, :last_name, :string

    User.all.each do |u|
      n = u.name
      u.update! last_name: n.slice!(/\w+\z/)
      u.update! first_name: n.strip
    end

    remove_column :users, :name, :string
  end
end 
```

此`#down`方法将解释具有多个空格的名称。

# php - 在函数内部使用当前变量函数

> ID：15287293
> 
> 赞同：0
> 
> 时间：2013-03-08T05:24:37.140
> 
> 标签：php, closures

我需要递归调用一个变量函数，我该怎么做？

```
$rec = function($li) use($html,$rec) { // error, rec was not defined yet
   if( ... ) $rec( ... ); 
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:04:46.593

`$rec`通过引用 ( )使用函数变量，`&$rec`以便您可以将其设置为函数。这也将定义它。

```
use($html, &$rec) 
           ^ 
```

[*您可以在Anonymous recursive PHP functions*](https://stackoverflow.com/questions/2480179/anonymous-recursive-php-functions)[问题](https://stackoverflow.com/questions/2480179/anonymous-recursive-php-functions)*中找到该原则。*

# php - 如何从 WHERE 子句中导出 MySQL 表的某些行？

> ID：15287295
> 
> 赞同：13
> 
> 时间：2013-03-08T05:24:48.170
> 
> 标签：php, mysql, phpmyadmin

如何使用 PHP 脚本中的 where 子句导出 MySQL 表的某些行？

我有一个 MySQL say 测试，我想使用 PHP 脚本为 id 介于 10 到 100 之间的行创建一个可导入的 .sql 文件。

我想创建一个 sql 文件说 test.sql 可以导入 MySQL 数据库。

我的代码：

```
$con=mysqli_connect("localhost", "root","","mydatabase");

$tableName  = 'test';
$backupFile = '/opt/lampp/htdocs/practices/phpTest/test.sql';
$query      = "SELECT * INTO OUTFILE '$backupFile' FROM $tableName WHERE id BETWEEN 10 AND 500";

$result = mysqli_query($con,$query); 
```

这会创建一个 test.sql 文件，但是当我尝试导入时，它会给出错误 #1064。
我的脚本只创建一个包含列名和表结构或插入查询的行的文件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T05:36:43.420

如评论中所述，您可以通过以下方式使用 mysqldump 。

```
mysqldump --user=... --password=... --host=... DB_NAME --where=<YOUR CLAUSE> > /path/to/output/file.sql 
```

如果您希望它出现在您的 php 文件中，您可以执行以下操作

```
exec('mysqldump --user=... --password=... --host=... DB_NAME --where=<YOUR CLAUSE> > /path/to/output/file.sql'); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-20T11:47:20.857

以非常简单的方式转到您的 phpMyAdmin 选择您要导出其特定行的数据库 单击“SQL”（在数据库上运行 SQL 查询/查询） 编写 sql 查询并执行它 就像 select * from test table limit 500 now what ever结果来了就在底部看到“查询结果操作”只需点击 **导出**

全部做完 ：-）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-07T09:51:09.127

Mysql Shell 命令

```
mysqldump -u user -p password -h host Database Table --where="Condition"> /path/exportFile.sql 
```

例子

```
mysqldump -u user -p 123456 -h host Database Student --where="age > 10"> /path/exportFile.sql 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T05:38:05.870

如果您使用 OUTFILE 导出数据，则必须使用 INFILE COMMAND 导入它

```
$con=mysqli_connect("localhost", "root","","mydatabase");

$tableName  = 'test';
$backupFile = '/opt/lampp/htdocs/practices/phpTest/test.sql';
$query      = "LOAD DATA INFILE '$backupFile' INTO TABLE $tableName";

$result = mysqli_query($con,$query); 
```

或者你可以使用

```
 $con=mysqli_connect("localhost", "root","","mydatabase");
 $tableName  = 'test';
 $backupFile = '/opt/lampp/htdocs/practices/phpTest/test.sql';
 $query      = 'SELECT * INTO OUTFILE '."'$backupFile'".'
                FIELDS TERMINATED BY "," OPTIONALLY ENCLOSED BY '.'\'"\'
                LINES TERMINATED BY \'\n\'
                FROM '.$tableName.' WHERE id BETWEEN 10 AND 500';

 $result = mysqli_query($con,$query); 
```

然后导入这个文件。

希望这有效...

# java - 使用 getter setter 递增 int 值

> ID：15287305
> 
> 赞同：1
> 
> 时间：2013-03-08T05:25:35.113
> 
> 标签：java

我需要增加 int 值。所以我为它制作了getter/setter，并将这个逻辑应用于int的增量值：

```
public class MyOrderDetails {

    private int count = 0;

    public int getCount() {
        return count;
    }

    public void setCount(int count) {
        this.count = count;
    }

    public void increment(int increment) {
        setCount(getCount() + 1);
    }

 } 
```

这是我正在做的正确方式还是在程序上是错误的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T05:27:53.863

为什么你不只是做？

```
public void increment() {
    count++;
} 
```

increment() 函数的 int 参数是干什么用的？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T05:29:44.110

一种。如果您只想增加，则不需要提供任何设置器。

湾。在

```
public void increment() {
    setCount(getCount() + 1);
} 
```

可以直接访问count变量，这样`count++`就够了，不需要setCount。

C。通常需要一个reset方法。

d。count++ 不是原子的，所以如果在多线程场景中使用，请同步。

```
public synchronized void increment() {
    count++;
} 
```

所以最后的课程是：

```
class Counter{
    private int count = 0;

    public int getCount(){
        return count;
    }

    public synchronized void increment(){
        count++;
    }

    public void reset(){
        count = 0;
    }
} 
```

所以你可以使用这样的类：

```
Counter counter = new Counter();
counter.increment() //increment the counter
int count = counter.getCount(); 
```

# php - Joomla 1.0，管理员链接重定向到“installation/index.php”，如何防止这种重定向？

> ID：15287307
> 
> 赞同：0
> 
> 时间：2013-03-08T05:26:01.697
> 
> 标签：php, joomla

我只是将我的旧 Joomla 1.0 站点迁移到本地主机，前端工作正常，但是当我尝试打开管理员时，它重定向到“installation/index.php”文件并且没有任何东西可以打开，如何防止这件事，我正在检查以下代码中的路径存在于管理员/index2.php 文件中，其路径正确，但管理员仍未打开。

```
if (!file_exists( 'C:/xampp/htdocs/myproject/configuration.php' )) {
       header( 'Location: ../installation/index.php' );
       exit();
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:15:17.627

我不相信 Administration/index2.php 的源文件验证路径中的文件：

> 'C:/xampp/htdocs/myproject/configuration.php'

被修改了吗？

# asp.net-mvc - 什么会更 RESTful：通过 WebAPI 中的 PATCH 翻转布尔值的推荐做法

> ID：15287313
> 
> 赞同：2
> 
> 时间：2013-03-08T05:26:06.470
> 
> 标签：asp.net-mvc, web-applications, asp.net-mvc-4, asp.net-web-api

我正在构建我的第一个 API，我想知道这里最好的方法是什么。我有一个带有布尔字段“isArchived”的对象。当用户点击对象上的“存档”时，我想翻转这个布尔值。我的问题：我可以这样称呼：

```
PUT /api/objects/archive/1 
```

这将使用如下逻辑击中控制器：

```
 [ActionName("archive")]
    public HttpResponseMessage ArchiveObject(int id)
    {
        if (!ModelState.IsValid)
        {
            return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
        }

        _service.ArchiveObject(id);

        return Request.CreateResponse(HttpStatusCode.OK);
    } 
```

还是通过以下方式更好地修补：

```
PATCH /api/objects/1 
```

然后在正文中发送一些数据，例如

```
{isArchived: true} 
```

似乎后者更昂贵，因为我们发送数据而不仅仅是一个 id。什么是最好的，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:20:07.670

## 什么是 RESTful 基本上是这里的问题。

如果您想要真正有趣的解释，我强烈建议您查看这篇史诗般的著名 REST“文章”：[我如何向我的妻子解释 REST](http://tomayko.com/writings/rest-to-my-wife)

所以支持你的具体问题。本着 REST 的精神，您应该创建一个适当的“资源”。在您的情况下，这意味着“归档对象”资源。你只需对它应用 HTTP 动词。这本质上是一个 RESTful 服务。

如果您尝试为操作命名，那么您可能走错了路。

那么该怎么办？创建“归档对象”WebAPI 控制器，然后，我想，取决于天气函数是幂等用户正确的 HTTP 动词。POST 用于创建，PUT 用于更新场景（幂等函数）。不要忘记在 POST（创建）场景中返回新的资源 URI。但据我所见，您可以从您的代码中看到 PUT 场景。因为您可以（我想）多次归档对象。

如何将附加数据（在您的情况下`{isArchived: true}`）发送到 API？简单，只需将这些数据放入请求的正文中即可。这就是为什么我们在 HTTP 请求中有正文消息的原因。

因此，您的 PUT URI 应如下所示：

```
PUT /api/objects/achive/1 
```

这意味着您拥有对象控制器以及“归档控制器”。很棒不是吗？如果你做正确的 REST，API 真的很漂亮并且易于理解和使用。这都是关于 RESTful 服务的。

# javascript - jQuery 单元格引用

> ID：15287316
> 
> 赞同：0
> 
> 时间：2013-03-08T05:26:15.253
> 
> 标签：javascript, jquery, html, json, reference

此代码创建座位布局。类确定座位的成本，jquery 对象包含布局，以及我确定类的数据。

```
var jsondata = {
"who": "RSNO",
    "what": "An American Festival",
    "when": "2013-02-08 19:30",
    "where": "User Hall - Main Auditorium",
    "seats": ["00000000000000000011111111111111000000000000000000", "0000000000000001111111111111111aaa0000000000000000", "00000000000000aa111111111111111aaaaa00000000000000", "00000000000001111111111111111111111111000000000000", "000000000aa00aaaaaaaaaaaaaaaaaaaaaa1100aa000000000", "00000001111001111111111111111111111100111100000000", "00000aaaaaa0011aaaaaaaaa11111111aaa1100aaaaaa00000", "00001111111001111111111111111111111100111111100000", "000aaaaaaa110011111111111111111111110011aaaaaaa000", "00111111111100111111111111111111111001111111111000", "00aaaaa1111110011111111111111111111001111aaaaaaa00", "11111111111100111111111111111111111001111111111110", "0aaaaaaaaaaaa001111111111111111111100aaaaaaaaaaaa0", "01111111111110011111111111111111110011111111111100", "00000000000000001111111111111111110000000000000000", "01111111111111001111111111111111100111111111111100", "01111111111111001111111111111111110011111111111110", "01111111111111001111111111111111100111111111111100", "00a11111111111100111111111111111100111111111111a00", "00111111111111100111111111111111001111111111111000", "00011111111111110011111111111111001111111111111000", "00111111111111100111111111111111001111111111111000", "00011111111111110011111111111111001111111111111000", "00011111111111110011111111111110011111111111110000", "0000000111a111111001111a1111a110011111111110000000", "00000000111111110011111111111110011111111000000000", "00000000001111111001111111111110011111110000000000", "00000000000000111001111111111100111000000000000000"],
    "rows": ["DD", "CC", "BB", "AA", "Z", "Y", "X", "W", "V", "U", "T", "S", "R", "Q", "xx", "P", "N", "M", "L", "K", "J", "H", "G", "F", "E", "D", "C", "B", "A"],
    "seatPrice": ["                  00000000000000                  ", "               0000000000000000000                ", "              0000000000000000000000              ", "             0000000000000000000000000            ", "         00  000000000000000000000000  00         ", "       0000  00000000000000000000000  0000        ", "     000000  000000000000000000000000  000000     ", "    0000000  00000000000000000000000  0000000     ", "   000000000  0000000000000000000000  000000000   ", "  0000000000  000000000000000000000  0000000000   ", "  00000000000  00000000000000000000  00000000000  ", "000000000000  000000000000000000000  000000000000 ", " 000000000000  00000000000000000000  000000000000 ", " 000000000000  0000000000000000000  000000000000  ", "                000000000000000000                ", " 0000000000000  00000000000000000  0000000000000  ", " 0000000000000  000000000000000000  0000000000000 ", " 0000000000000  00000000000000000  0000000000000  ", "  0000000000000  0000000000000000  0000000000000  ", "  0000000000000  000000000000000  0000000000000   ", "   0000000000000  00000000000000  0000000000000   ", "  0000000000000  000000000000000  0000000000000   ", "   0000000000000  00000000000000  0000000000000   ", "   0000000000000  0011111111100  0000000000000    ", "       0000000000  111111111111  0000000000       ", "        00000000  1111111111111  00000000         ", "          0000000  111111111111  0000000          ", "              000  00000000000  000               "],
    "priceLookup": [10, 20]
};

var counter = 0;
var tbl_body = "";
var print = "";

$.each(jsondata.seats, function (j, d) {
var tbl_row = "";
$.each(this, function (k, v) {
    var seatPrice = jsondata.seatPrice[j][k];            
        if (v == "1" || v == "a") {
            counter++;
        }

        if (v == 0) {
            print = " ";
        } else {
            print = v;
        }
        var seatPriceClass = '';
        if (seatPrice == "0") {
            seatPriceClass = "p";
        } else if (seatPrice == "1") {
            seatPriceClass = "n";
        } else {
            seatPriceClass = "none";
        }
        if (v == "a") {
            seatPriceClass = "x";
        }

        tbl_row += "<td class=" + seatPriceClass + " id=" + counter + ">" + print + "</td>";

    });

    tbl_body += "<tr>" + tbl_row + "</tr>";
    counter = 0;

});
$("#plan").html(tbl_body); 
```

在这两个数组中，创建填充表以创建布局。计数器在找到座位时开始计算一行（即，座位为 1，没有座位为 0，因此当它达到 1 时，它开始计数，直到该行结束）。到目前为止，这一切都是正确且有效的，除了我需要使用`rows`JSON 文件中的对象来创建一个行引用，我可以将其附加到计数器数据以给单元格一个 id（即 c7），然后我可以将其用作座位参考。

我试过嵌套这个函数，但它不起作用，或者抛出错误

```
 $.each(function(j, g){
    var row_id =jsondata.rows[j][g];
     }); 
```

我将如何获得这个功能，或者类似的东西在我的数组中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:11:18.693

只需使用`jsondata.rows[j]`

```
tbl_row += "<td class=" + seatPriceClass + " id=" + jsondata.rows[j] + counter + ">" + print + "</td>"; 
```

# multithreading - 使用 WIN32 API 的 UDP 套接字中的多线程 (Visual Studio 2008)

> ID：15287320
> 
> 赞同：0
> 
> 时间：2013-03-08T05:26:26.683
> 
> 标签：multithreading, sockets, udp

我正在开发一个简单的 UDP 客户端-服务器应用程序。我用过 WM_TIMER: 在服务器端，服务器使用 recv_from() 函数等待从客户端接收数据。但问题是在接收到一些数据之前程序不会进一步执行。我想在一个单独的线程中处理所有这些。简而言之，我想创建一个线程，在该线程中完成等待并同时执行所有其他功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:02:48.147

然后去创建一个线程！

[CreateThread](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453%28v=vs.85%29.aspx)可能是您要调用以启动线程的函数。

# android - camera.release（）不工作

> ID：15287325
> 
> 赞同：0
> 
> 时间：2013-03-08T05:26:43.677
> 
> 标签：android, android-camera

[我已经开发了一个使用此链接](http://developer.android.com/guide/topics/media/camera.html)中的相机 API 的相机应用程序

它工作完美，它显示预览拍照但是当我完成应用程序时它永远不会释放相机......我不能在安装这个应用程序后单独使用相机......即使当我重新启动它时应用程序也会崩溃。

这是我释放相机的方式-->

```
 @Override
    protected void onPause() {
        super.onPause();
        if (camera != null) {
         //   preview.setCamera(null);
            camera.stopPreview();
            camera.setPreviewCallback(null);
            camera.release();

            camera = null;
        }
    } 
```

onResume 我也放了这段代码，但没有用..s

```
 @Override
    protected void onResume() {
        super.onResume();

        camera = Camera.open();

        preview.setCamera(camera);
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-19T15:39:25.597

我在 HTC One X (4.1.2) 和 Nexus 4(4.3) 上遇到了同样的问题，但在 Galaxy Nexus (4.3) 上，同样的发布方法效果很好。我通过使用`camera.unlock()`而不是`camera.release()`保持对 Camera 对象的静态引用临时解决了这个问题。

# java - 在进行批量更新时跟踪导致记录的特定错误

> ID：15287331
> 
> 赞同：0
> 
> 时间：2013-03-08T05:27:29.070
> 
> 标签：java, sql, spring, hibernate, jdbc

有没有办法跟踪在休眠中执行批量更新时导致异常的记录，因为我已经在休眠配置文件中设置了 jdbc_batch_size。仅在插入该批记录时引发错误。有什么方法可以找出确切的记录号。谢谢，赛义夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:33:07.560

不，你不能那样做。

也许您应该尝试暂时将批量更新转换为单个更新的循环，以便您可以获得导致问题的更新日志？

您还可以尝试设置休眠以显示用于批量更新的 sql，例如[P6Spy](http://sourceforge.net/projects/p6spy/)。这是有关如何实现它的[教程。](http://www.mkyong.com/hibernate/how-to-display-hibernate-sql-parameter-values-solution/)

# android - 将文件存储在可移动 SD 卡上

> ID：15287333
> 
> 赞同：2
> 
> 时间：2013-03-08T05:27:44.827
> 
> 标签：android, backup, storage, sd-card

我在市场上有两个从 sdcard 读/写的 Android 应用程序。其中之一将备份文件存储到 sdcard。问题在于较新的智能手机有两个 SD 卡；/mnt/sdcard 中的嵌入式和没有标准化目录路径的可移动 sdcard。我希望做的是为用户添加一个带有两个选项的单选按钮组；将备份存储在内部 sdcard 上（默认）或存储在可移动 sdcard 上。困境是获得可移动 sdcard 的正确路径并将该路径存储在变量中。

我发现了一个似乎适用于所有 android 设备的 linux 命令。“df”命令列出了嵌入式 sdcard (/mnt/sdcard) 和可移动 SD 卡的位置。我知道如何使用 dataoutputstream 类发送命令，但我卡住的地方是从命令的输出中读取并从输出中过滤我需要的部分。

以下是“df”命令的输出示例：

```
/ $ df
Filesystem           1K-blocks      Used Available Use% Mounted on
tmpfs                   369128        32    369096   0% /dev
tmpfs                   369128         0    369128   0% /mnt/asec
tmpfs                   369128         0    369128   0% /mnt/obb
/dev/block/mmcblk0p1    516040    476832     39208  92% /system
/dev/block/mmcblk0p7  13813852   2948206  10865646  21% /data
/dev/block/mmcblk0p2    533616      8574    525042   2% /cache
tmpfs                   369128         0    369128   0% /Removable
/dev/fuse             13813852   2948206  10865646  21% /mnt/sdcard
/dev/block/vold/179:9 30306304  12222624  18083680  40% /Removable/MicroSD 
```

上面的输出来自我的 ASUS Transformer 平板电脑，如您所见，它使用路径 /Removable/MicroSD 作为可移动 sdcard 的目录。同样，我需要做的就是在我的代码中获取这个输出，过滤掉所有不必要的数据，并将路径存储在一个变量中。

我不是在找人为我编写代码，我只需要找到对任何类的更好引用，这些类将允许我获取输出并过滤它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:49:51.533

i think you have to create your own directory of folder in sd card or internal memory. like i shown in below.

```
if (sdCardDir != null) 
        return (new File(sdCardDir, CALLHISTORY_FILE).exists());

    ArrayList<File> posibleDir = new ArrayList<File>();
    File esd = Environment.getExternalStorageDirectory();
    posibleDir.add(new File(esd, "external_sd"));
    posibleDir.add(esd);
    posibleDir.add(new File("/sdcard"));

    // Use first possible sdcard directory
    for (File dir : posibleDir) {
        if (dir.exists() && dir.isDirectory()) {
            sdCardDir = new File(dir, TBACKUP_DIR);
            if(!sdCardDir.exists())
                sdCardDir.mkdir();
            return true;
        }
    }

    throw new IOException();
} 
```

# java - 跟踪选择了哪个枚举？

> ID：15287334
> 
> 赞同：0
> 
> 时间：2013-03-08T05:27:52.630
> 
> 标签：java, enums

```
/**
 * All the states in the game.
 */
public enum State {
    START_MENU,
    PLAYER_ONE_MENU,
    PLAYER_ONE_CATEGORY,
    PLAYER_TWO_MENU,
    PLAYER_TWO_CATEGORY,
    WIN_SCREEN,
    LOSE_SCREEN,
    PLAY_SCREEN
} 
```

那是我为我正在设计的刽子手游戏制作的枚举。但是我是枚举的新手，但有人建议我将枚举用于游戏状态。但是我不知道如何跟踪播放器当前处于哪个状态。有人可以解释一种跟踪选择哪个状态的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:29:41.853

根据[Enum 的 Java Doc](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html)：

> **valueOf（类枚举类型，字符串名称）**
> 
> 返回具有指定名称的指定枚举类型的枚举常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:30:45.603

只需保留`States`当前状态的类型变量即可。

```
class Player {

 States currentState=States.STARTMENU;

 void doSomething() {
  switch (currentState) {
   case STARTMENU:...;
   case PLAYERONEMENU:...;
   //etc
  }
 }

 void playMenu() {
  if (currentState==States.PLAYMENU) {...}
 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T05:31:06.500

使用具有枚举类型的变量，例如：

```
State var;
var = State.PLAYER_TWO_MENU; 
```

# android - 将应用程序数据从模拟器的 SD 卡安装到 android 设备

> ID：15287337
> 
> 赞同：0
> 
> 时间：2013-03-08T05:28:10.090
> 
> 标签：android, sd-card

我有一个媒体播放器应用程序，其中视频保存在模拟器的 SD 卡图像中。现在，我想在 android 设备上运行相同的应用程序。

如何将视频从 SD 卡图像传输到设备内存？

***我的程序需要进行哪些更改...***

**代码：**

```
 final String MEDIA_PATH = new String("/sdcard/");
  //path of sdcard image on emulaotr

public ArrayList<HashMap<String, String>> getPlayList()
    {
        File home = new File(MEDIA_PATH);

        if (home.listFiles(new FileExtensionFilter()).length > 0) 
        {
            for (File file : home.listFiles(new FileExtensionFilter())) 
            {
                HashMap<String, String> song = new HashMap<String,String>();
                song.put("songTitle", file.getName().substring(0, (file.getName().length() - 4)));
                song.put("songPath", file.getPath());

                // Adding each song to SongList
                songsList.add(song);
            }
        }

        return songsList;
    }

    class FileExtensionFilter implements FilenameFilter
    {
        public boolean accept(File dir, String name) 
        {
            return (name.endsWith(".mp3") || name.endsWith(".MP3") || name.endsWith(".mp4") || name.endsWith(".MP4"));
        }
    } 
```

# css - 子元素的 Z 索引问题

> ID：15287342
> 
> 赞同：0
> 
> 时间：2013-03-08T05:28:37.900
> 
> 标签：css, z-index

我已经在我一直在研究的一个小聊天框中发布了 z-index 属性。

[http://codepen.io/anon/pen/uLDBp](http://codepen.io/anon/pen/uLDBp)

这两个元素都定位在绝对位置，让隐藏按钮将自身定位在聊天框后面的唯一方法是给它一个 z-index 为 -1，但这使它无法点击。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:43:28.377

我认为此人以优雅的方式解决了您的问题

[重叠 div 使链接不可点击](https://stackoverflow.com/questions/4445355/overlapping-div-making-links-unclickable)

我遇到的另一个似乎创建的可选解决方案是将按钮设置在后面，然后将另一个 div 元素放在它们的顶部，透明背景可以处理您的点击

# command-line - 制作用户名和密码的命令提示符

> ID：15287345
> 
> 赞同：1
> 
> 时间：2013-03-08T05:29:13.317
> 
> 标签：command-line, batch-file, syntax-error, command-prompt

我试过这个，但它一直返回一个错误说`the syntax of the command is incorrect`。这是我尝试过的代码：

```
@echo off
echo Enter Username and Password to view files

set /p user=Enter UserId:
set /p pass=Enter Password:

if /i %user%==admin (if /i %pass%==*my password was here*)

(goto admin1)

:admin1
..etc.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:39:35.167

您的代码的问题是您使用括号。这是相同代码的重做版本。

```
@echo off
echo Enter Username and Password to view files

set /p user=Enter UserID: 
set /p pass=Enter Password: 

if /i %user%==admin (
    if /i %pass%==password goto admin1
)

:admin1
::More here... 
```

此外，此代码（以及您的代码，如果有效）存在一件事。无论您输入什么用户名或密码，它总是会转到`:admin1`. 这是因为批处理文件是从上到下读取的，所以它会跳过块内的代码`if`并转到`:admin1`块中。

您可以通过在将重定向用户的代码之间放置代码来解决此问题。

另外，我建议您查看[格式化帮助](https://stackoverflow.com/editing-help)以正确格式化您的问题（将代码放入代码块、链接等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:43:07.480

你的括号是关闭的。

```
@echo off
echo Enter Username and Password to view files

set /p user=Enter UserId:
set /p pass=Enter Password:

if /i "%user%"=="admin" (if /i "%pass%"=="password" goto admin1)

goto skip

:admin1
echo Done
goto END

:skip

:END 
```

# silverlight - 如何在silverlight的数据网格内动态绑定组合框？

> ID：15287346
> 
> 赞同：1
> 
> 时间：2013-03-08T05:29:14.447
> 
> 标签：silverlight, dynamic, datagrid, combobox

我需要在数据网格内生成一个组合框并绑定所选项目。我正在使用字典绑定数据网格。值被绑定但不是所选项目。这是我的一段代码！

```
 private DataGridTemplateColumn CreateColumnEditTemplate(string fieldName, ObservableCollection<CommonFieldValue> fieldNames)
        {
        DataGridTemplateColumn outData = new DataGridTemplateColumn();
        StringBuilder xamlData = new StringBuilder();
        xamlData.Append("<DataTemplate ");
        xamlData.Append("xmlns='http://schemas.microsoft.com/winfx/");
        xamlData.Append("2006/xaml/presentation' ");
        xamlData.Append("xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' ");
        xamlData.Append("xmlns:basics='clr-namespace:System.Windows.Controls;");
        xamlData.Append("assembly=System.Windows.Controls' >");
        xamlData.Append("<ComboBox SelectedItem='{Binding " + fieldName +                 ",Mode=TwoWay}' SelectedValuePath=\"Content\" >");
    foreach (var field in fieldNames)
        xamlData.Append("<ComboBoxItem Content='" + field.FieldValue + "'/>");
        xamlData.Append("</ComboBox> ");
        xamlData.Append("</DataTemplate>");
        outData.CellEditingTemplate =   (DataTemplate)System.Windows.Markup.XamlReader.Load(xamlData.ToString());
    return outData;
        } 
```

我正在创建一个模板列并添加一个数据模板。

# mongodb - Symfony2 在哪里/如何序列化和写入其会话数据？

> ID：15287348
> 
> 赞同：1
> 
> 时间：2013-03-08T05:29:34.110
> 
> 标签：mongodb, session, serialization, symfony

概述：

我有一个基于 Symfony1 构建的应用程序，但我正在使用 Symfony2 构建新部分。我已经移动了 Symfony2 上的登录/注销操作，并使 Symfony1 从 Symfony2 读取会话数据。通过告诉 Symfony2 将其会话数据写入默认的 PHP $_SESSION，它工作得很好，一切都在数组中，Symfony1 可以读取数据并自动登录我的用户。

现在我将 Symfony1 和 Symfony2 应用程序移动到它们各自的虚拟机上。因此，我没有使用 PHP $_SESSION 编写会话，而是将会话保存在 MongoDB 中（通过 MongoDbSessionHandler）。但是现在当我从 Symfony1 应用程序中读取会话数据时，我最终会得到这样的结果：

```
_sf2_attributes|a:0:{}_sf2_flashes|a:0:{}_sf2_meta|a:3:{s:1:"u";i:1362655964;s:1:"c";i:1362655964;s:1:"l";s:1:"0";} 
```

它绝对不是不可序列化的。Symfony2 似乎以自己的方式序列化数据，我猜这些 _sf2_* 东西是元数据包。问题是**我找不到这个序列化发生在哪里**。为了能够反序列化它，我需要找到它是如何序列化的。我找到的最近的地方是在 SessionHandlerProxy 中：

```
public function write($id, $data)
{
    return (bool) $this->handler->write($id, $data);
} 
```

此处传递的 $data 包含序列化数据，但我在调用它的代码中找不到。

运气好的话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:45:13.263

MongoDbSessionHandler 在此处设置为 PHP 会话保存处理程序：[https ://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Storage/NativeSessionStorage.php#L349-L370](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Storage/NativeSessionStorage.php#L349-L370)

session_start() ( [https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Storage/NativeSessionStorage.php#L146](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Storage/NativeSessionStorage.php#L146) ) 实际上读取会话文件/Mongo 的内容并创建全局 $_SESSION 变量：[http ://www.php.net/manual/en/function.session-start.php](http://www.php.net/manual/en/function.session-start.php)

看看 PHP 的 session_decode 函数：[http](http://www.php.net/manual/en/function.session-decode.php) ://www.php.net/manual/en/function.session-decode.php - 这可能是你要找的。

# c - 如果我对这两个功能计时，有什么区别？

> ID：15287349
> 
> 赞同：2
> 
> 时间：2013-03-08T05:29:34.550
> 
> 标签：c, algorithm, time, buffer

我可以使用 C 代码和/或系统程序，例如 time 来测量 2 个函数的差异，但我们期望什么？仅仅因为比率是 1:1024 并不意味着缓冲速度快 1024 倍，或者是吗？

```
#define SIZE 1024 /* read 1024 bytes at a time */

int main(int argc, char **argv)
{
    void info(char file_name[]);
    void buffered(char file_name[]);

    info("/proc/scsi/scsi"); /* read a byte at a time */
    buffered("/proc/cpuinfo"); /* read 1024 bytes at a time */
    return 0;
}

void info(char file_name[])
{
    int ch;
    FILE *fp;
    fp = fopen(file_name,"r");
    // read mode
    if (fp == NULL)
    {
        perror(file_name);
        exit(EXIT_FAILURE);
    }
    while ((ch = fgetc(fp)) != EOF)
    {
        putchar(ch);
    }
    fclose(fp);
}

void buffered(char file_name[])
{
    char buf[SIZE];
    FILE *fp;
    size_t nread;
    fp = fopen(file_name, "r");
    if (fp) {
        while ((nread = fread(buf, 1, sizeof buf, fp)) > 0)
        {
            fwrite(buf, 1, nread, stdout);
        }
        if (ferror(fp)) {
            /* to do: deal with error */
        }
        fclose(fp);
    }
} 
```

我应该缓冲多少？

## 更新

我添加了一个计时器，表示差异很大：

```
$ cc cpu-disk-info.c
dev@dev-OptiPlex-745:~$ ./a.out 
Unbuffered: 0.040000 seconds
Buffered: 0.000000 seconds 
```

代码

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define SIZE 1024 /* read 1024 bytes at a time */

int main(int argc, char **argv)
{
    void info(char file_name[]);
    void buffered(char file_name[]);
    clock_t toc;
    clock_t tic = clock();
    info("Cube.001.skeleton.xml"); /* read a byte at a time */
    toc = clock();
    printf("Unbuffered: %f seconds\n", (double)(toc - tic) / CLOCKS_PER_SEC);
    tic = clock();    
    buffered("Cube.001.skeleton.xml"); /* read 1024 bytes at a time */
    toc = clock();
    printf("Buffered: %f seconds\n", (double)(toc - tic) / CLOCKS_PER_SEC);   
    return 0;
}

void info(char file_name[])
{
    int ch;
    FILE *fp;
    fp = fopen(file_name,"r");
    // read mode
    if (fp == NULL)
    {
        perror(file_name);
        exit(EXIT_FAILURE);
    }
    while ((ch = fgetc(fp)) != EOF)
    {
        //putchar(ch);
    }
    fclose(fp);
}

void buffered(char file_name[])
{
    char buf[SIZE];
    FILE *fp;
    size_t nread;
    fp = fopen(file_name, "r");
    if (fp) {
        while ((nread = fread(buf, 1, sizeof buf, fp)) > 0)
    {
            //fwrite(buf, 1, nread, stdout);
    }
        if (ferror(fp)) {
            /* to do: deal with error */
        }
        fclose(fp);
    }
} 
```

## 测试 2

根据这个测试，缓冲 i/o 比无缓冲 i/o 快 19 倍（？）。

```
Unbuffered: 0.190000 seconds
Buffered: 0.010000 seconds 
```

来源

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define SIZE 1024 /* read 1024 bytes at a time */

int main(int argc, char **argv)
{
    void info(char file_name[]);
    void buffered(char file_name[]);
    clock_t toc;
    clock_t tic = clock();
    info("Cube.001.skeleton.xml"); /* read a byte at a time */
    info("Cube.001.skeleton.xml"); /* read a byte at a time */
    info("Cube.001.skeleton.xml"); /* read a byte at a time */
    info("Cube.001.skeleton.xml"); /* read a byte at a time */
    info("Cube.001.skeleton.xml"); /* read a byte at a time */
    toc = clock();
    printf("Unbuffered: %f seconds\n", (double)(toc - tic) / CLOCKS_PER_SEC);
    tic = clock();    
    buffered("Cube.001.skeleton.xml"); /* read 1024 bytes at a time */
    buffered("Cube.001.skeleton.xml"); /* read 1024 bytes at a time */
    buffered("Cube.001.skeleton.xml"); /* read 1024 bytes at a time */
    buffered("Cube.001.skeleton.xml"); /* read 1024 bytes at a time */
    buffered("Cube.001.skeleton.xml"); /* read 1024 bytes at a time */
    toc = clock();
    printf("Buffered: %f seconds\n", (double)(toc - tic) / CLOCKS_PER_SEC);   
    return 0;
}

void info(char file_name[])
{
    int ch;
    FILE *fp;
    fp = fopen(file_name,"r");
    // read mode
    if (fp == NULL)
    {
        perror(file_name);
        exit(EXIT_FAILURE);
    }
    while ((ch = fgetc(fp)) != EOF)
    {
        //putchar(ch);
    }
    fclose(fp);
}

void buffered(char file_name[])
{
    char buf[SIZE];
    FILE *fp;
    size_t nread;
    fp = fopen(file_name, "r");
    if (fp) {
        while ((nread = fread(buf, 1, sizeof buf, fp)) > 0)
    {
            //fwrite(buf, 1, nread, stdout);
    }
        if (ferror(fp)) {
            /* to do: deal with error */
        }
        fclose(fp);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:42:56.550

可能会有一些差异，但不是 1024 倍。在您的`info()`函数中，您没有缓冲，但 I/O 库是。即使 I/O 库没有缓冲，操作系统也可能正在缓冲。

Also, since you are writing the data to the standard output, the bottleneck might be precisely there. Printing characters to a "console" (or "terminal") window in a graphic environment is surprisingly slow. Try writing to disc, or nowhere at all. You will probably get different results.

# php - 如何在标签添加插件中设置隐藏字段的名称属性

> ID：15287354
> 
> 赞同：0
> 
> 时间：2013-03-08T05:29:57.053
> 
> 标签：php, jquery, tags

我正在使用[jquery](http://textextjs.com/manual/examples/tags-adding.html)插件。插件运行良好，但我需要通过**PHP在下一页上发布****隐藏**字段的数据（当我添加任何标签值时。它通过 jquery 保存在隐藏字段中）， 但问题是这个隐藏字段没有名称属性。如何设置它的名称？

 **请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:42:28.947

为您的文本区域命名，它将在您的隐藏输入中显示

```
 <textarea id="textarea" name="yourname" class="example" rows="1"></textarea> 
```

所以隐藏的输入名称将是你的名字。

在 PHP 中你可以把它当作

```
$_POST['yourname'] 
```

**更新**

这是[工作小提琴](http://jsfiddle.net/bipen/thSsj/1/)**

# java - 将 IndexLARQ 存储到磁盘

> ID：15287355
> 
> 赞同：0
> 
> 时间：2013-03-08T05:29:59.043
> 
> 标签：java, lucene, jena

我正在将 .nt 文件读入 Apache Jena 模型并对其进行索引。我想将其存储在磁盘上，但这样做时遇到了麻烦。

这就是我所拥有的：

```
IndexBuilderString larqBuilder = new IndexBuilderString();
Model model = ModelFactory.createDefaultModel();
model.register(larqBuilder);
FileManager.get().readModel(model, "sample\\titles.nt");
System.out.println("Finished Reading!");
larqBuilder.closeWriter();
model.unregister(larqBuilder);
IndexLARQ index = larqBuilder.getIndex(); 
```

我尝试使用返回 IndexReader 的 index.getLuceneReader() 并尝试将内容写入文件，这最终导致了死胡同。

任何帮助都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:33:06.003

我使用 ./tdbloader 解决了加载大型数据集的问题

# javascript - Javascript：从另一个网址获取显示的数据

> ID：15287358
> 
> 赞同：0
> 
> 时间：2013-03-08T05:30:33.930
> 
> 标签：javascript

我想知道是否可以从另一个网站获取一些数据以将其显示在我的网站上。一个很好的例子可以是 alexa.com。例如，我需要在我的页面上的 div 中显示 Alexa 流量排名和声誉，因此每次 Alexa 更改其数据时它都会动态更改。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:34:15.210

一种方法是向 Alexa.com 网站发出 ajax 请求，一旦你收到所有的 html，你就可以使用 jquery 或其他东西来为你想要的 div*抓取*它。感觉有点脏，但它是获得你想要的东西的简单方法。虽然这是假设他们的页面内容不是动态加载的。

*编辑*：有关更多信息，请参见：[Request external website data using jQuery ajax](https://stackoverflow.com/questions/10438683/request-external-website-data-using-jquery-ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:44:45.657

yahoo yql...（而不是 php？代理服务器端脚本）..

我偷偷怀疑您不拥有/控制外部链接站点，因此从不同站点获取内容将受到跨域安全限制（对于现代浏览器）。

因此，为了重新获得“用户的权力”，只需使用[http://query.yahooapis.com/](http://query.yahooapis.com/)。
jQuery 不是严格需要的。

**示例 1：**
使用类似 SQL 的命令：

```
select * from html 
where url="http://stackoverflow.com" 
and xpath='//div/h3/a' 
```

以下链接将抓取 SO 以获取最新问题（绕过跨域安全公牛$#!7）： http://query.yahooapis.com/v1/public/yql?q=select%20title%20from%20html%
[20where %20url%3D%22http%3A%2F%2Fstackoverflow.com%22%20and%0A%20%20%20%20%20%20xpath%3D%27%2F%2Fdiv%2Fh3%2Fa%27%0A%20 %20%20%20&format=json&callback=cbfunc](http://query.yahooapis.com/v1/public/yql?q=select%20title%20from%20html%20where%20url%3D%22http%3A%2F%2Fstackoverflow.com%22%20and%0A%20%20%20%20%20%20xpath%3D%27%2F%2Fdiv%2Fh3%2Fa%27%0A%20%20%20%20&format=json&callback=cbfunc)

如您所见，这将返回一个 JSON 数组（也可以选择 xml）并调用回调函数：`cbfunc`。

事实上，作为“奖励”，每次您不需要从“标签汤”中正则表达式数据时， 您还可以[保存一只小猫。](https://stackoverflow.com/a/1732454/588079)

你听到你内心的疯狂小科学家开始咯咯地笑了吗？

然后查看[此答案](https://stackoverflow.com/a/12080097/588079)以获取更多信息（不要忘记更多示例的评论）。

祝你好运！

# php - 将 Wordpress 短代码分配给 PHP 变量？

> ID：15287361
> 
> 赞同：0
> 
> 时间：2013-03-08T05:31:00.073
> 
> 标签：php, wordpress, shortcode

我正在尝试将 PHP 变量中保存的电子邮件地址与 Wordpress 中短代码中保存的电子邮件地址进行比较，这是我迄今为止尝试过的：

```
$email = 'someone@something.com';
$user_email = do_shortcode('[userinfo field="user_email"]');
echo var_dump(strcmp($user_email, $email) === 0); 
```

但是`var_dump`总是返回`false`，我很肯定它们是完全相同的字符串！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:52:41.010

默认情况下，短代码`userinfo`返回包装在`<span>`标签中的数据。要抑制跨度标记，您可以使用`nospan`-attribute。

该[插件的描述](http://wordpress.org/extend/plugins/user-meta-shortcodes/)如下：

> [userinfo nospan="true"] 应该消除周围的 span 标签，以便输出可以在 URL 或类似应用程序中使用

所以你的代码应该是这样的：

```
$email = 'someone@something.com';
$user_email = do_shortcode('[userinfo field="user_email" nospan="true"]');
$var = (string) $user_email; // Casts to string
$var2 = (string) $email; // Casts to string
echo var_dump(strcmp($var, $var2) === 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:00:33.090

您不应为此使用简码，而应仅使用 Wordpress API 函数来获取当前用户的电子邮件地址：

```
$email = 'someone@something.com';

global $user_email;
get_currentuserinfo();

echo var_dump(strcmp($user_email, $email) === 0); 
```

Worpdress API 函数`get_currentuserinfo()`将全局变量设置`$user_email`为字符串形式的当前用户的电子邮件地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:35:02.827

查看是否有任何空格以及是否需要修剪任何字符串，因为如果两个字符串相同，那么您的代码似乎已经可以工作。

```
$email = 'someone@something.com';
$user_email = 'someone@something.com';
$var = (string) $user_email; // Casts to string
$var2 = (string) $email; // Casts to string
echo var_dump(strcmp($var, $var2) === 0); 
```

退货`bool(true)`

应该`do_shortcode('[userinfo field="user_email"]');`是需要修剪的。您也可以`$user_email`在比较之前简单地回显，看看那里是否有任何意外值。

# mysql - 从 MySQL 数据库获取数据并将其传递给 Jade 并使用 nodejs 访问它

> ID：15287367
> 
> 赞同：1
> 
> 时间：2013-03-08T05:31:24.477
> 
> 标签：mysql, node.js, pug

我已经开始`nodejs`在其中制作一个简单的聊天应用程序。为此，我想访问`mysql database`.

我的代码是这样的：

**JS**

```
exports.authenticate = function(req, res) {

    //connection.connect();
    var sql="SELECT * from users where username='"+req.body.user+"' and password='"+req.body.pass+"' LIMIT 1";
    connection.query(sql, function(err, rows, fields) {
        if (err) throw err;

        //res.send('Your data is: ', rows);
        var str="Hi, <b>"+rows[0].name+"</b> ("+rows[0].email+")";

        sql="SELECT DISTINCT username,name from users ORDER BY name";
        connection.query(sql, function(err, datarows, fields) {
            if (err) throw err;
            //res.send('Your data is: ', rows+' <br/> All Users are : ', datarows.length+"<a href='/'>Login</a>");
            str+='<ul style="list-style:none;width:300px">';
            for(var index=0;index<datarows.length;index++)
            {
                str+="<li><a href='javascript:;'>"+datarows[index].name+", "+datarows[index].email+"</a></li>";
            }
            str+='</ul>';console.log(str);  
            console.log(str)//gives ul  
        });

        str+="<a href='/'>Login</a>";
        res.send(str);//this not gives the ul of other users
    });

} 
```

上面的代码有问题，我写`console.log(str)//gives ul`的这个打印整个字符串就像`Hi, <b>Rohan</b> ("rohan@xyz.com")<ul><li><a>Something</a></li>....</ul>`. 但`res.send(str);`只发`Hi, <b>Rohan</b> ("rohan@xyz.com")<a href='/'>Login</a>`。

1.  为什么会这样？
2.  我的`str variable`不是`global`吗？
3.  我可以`res.send()`多次使用，如果可以，那么如何使用？

我可以使用上面的代码，`jade`然后**我应该为此编写什么代码**。

我找到了这个答案[How to pass data form mongodb (using Mongous module) into nodejs view (using temp engine jam)?](https://stackoverflow.com/questions/8686170/how-to-pass-data-form-mongodb-into-nodejs-view-jade) 与我的问题有关

```
app.get('/', function(req, res) {
  mgs(dbColl).find(function(data){
    res.render('yourview.jade', { data: data });
  });
}); 
```

那么，如何访问中的数据`yourview.jade`

**我也想知道我们应该为哪种类型的应用程序使用 nodejs ？**

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:29:08.690

1.  这是因为 Node 是异步的。你`res.send(str)`在调用你的 inner 后立即执行`connection.query()`，因此添加更多的回调在发送之前没有执行。
2.  不，您的 str 变量不是全局的。
3.  我不相信。如果您想在发送之前写入响应，您可以使用`res.write()`.

是的，您可以使用 Jade 代替您现在正在做的事情。查看[Jade 文档](https://github.com/visionmedia/jade)。它们充满了翡翠中使用的变量的例子。不过，为您总结一下，您应该能够使用`#{variable}`.

至于你的最后一个问题，我真的不知道你在问什么。你可以使用 node 做很多事情，从[控制四轴飞行器](http://nodecopter.com/)到[网站和服务](https://transloadit.com/)。

# ruby-on-rails - public_activity 模型

> ID：15287372
> 
> 赞同：0
> 
> 时间：2013-03-08T05:31:45.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个指南模型和一个评论模型，我试图让它们都可以在我的活动提要中进行跟踪。指导方针有效，评论无效。

2个主要问题是：

我不确定如何在activity_controller.rb 中添加“评论”作为第二个trackable_type，我不确定如何在comment/_create.rb 中对我的视图进行排序——它应该说评论已添加到x 指南（和链接该指南显示页面）。

指南.rb

```
include PublicActivity::Model
  tracked owner: ->(controller, model){controller && controller.current_user}

  attr_accessible :content, :hospital, :title, :user_id, :guideline_id, :specialty, :updated_by, :current_user, :subtitle, :slug, :activities, :comment

 belongs_to :user
 has_many :favourite_guidelines
 has_many :comments, :dependent => :destroy 
```

评论.rb

```
include PublicActivity::Model
  tracked owner: ->(controller, model){controller && controller.current_user}

  belongs_to :guideline
  belongs_to :commenter, class_name: 'User' 
```

活动控制器.rb

```
def index
        @activities = PublicActivity::Activity
        .order("created_at desc")
        .where(trackable_type: 'Guideline' 'Comment') 
```

意见/public_activity/comment/_create.html.erb

```
added a comment 

<% if activity.trackable %>
    to the guideline <%= link_to activity.trackable.body, activity.trackable %>
<% else %>
    which can no longer be viewed
<% end %> 
```

意见/public_activity/guideline/_create.html.erb

```
added a guideline 

<% if activity.trackable %>
    titled <%= link_to activity.trackable.title, activity.trackable %>
<% else %>
    which can no longer be viewed
<% end %> 
```

我的 routes.rb 是

```
Guidelines::Application.routes.draw do

  get "activities/index"

  # get "user/index"

  ActiveAdmin.routes(self)

  devise_for :admin_user, ActiveAdmin::Devise.config

  get "guidelines/topic"
  get "guidelines/topichospital"
  get "guidelines/topicspecialty"
  get "guidelines/favourite"
  get "profiles/show"
  get "guidelines/show"

  devise_for :users

  devise_scope :user do
    get 'signup', to: 'devise/registrations#new', as: :register
    get 'login', to: 'devise/sessions#new', as: :login
    get 'logout', to: 'devise/sessions#destroy', as: :logout
    get 'edit', to: 'devise/registrations#edit', as: :edit
    put 'users' => 'devise/registrations#update', :as => 'user_registration'
    get 'about', to: 'about#about', as: :about
  end

  resources :guidelines
  get 'guidelines', to: 'guidelines#index', as: :guidelines
  get 'favourites', to: "favourites#show", as: :favourites
  get 'topics', to: 'guidelines#list', as: :topics
  get 'hospitals', to: 'guidelines#listhospital', as: :hospitals
  get 'specialties', to: 'guidelines#listspecialty', as: :specialties

 resources :activities

  root :to => 'guidelines#index'

resources :guidelines do
  resources :comments

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:43:06.007

如果我正确理解你的问题，这个演员解释得很好： [http](http://railscasts.com/episodes/406-public-activity) ://railscasts.com/episodes/406-public-activity ，以防你还没有看到它。

在我的情况下，我有`Post`模型（而不是你的`Guidelines`）`Comment`，我刚刚添加了

```
 include PublicActivity::Model
  tracked owner: Proc.new{ |controller, model| controller.current_user } 
```

和模型`Post`和`Comment`一切都运行良好，没有添加任何东西`activities_controller`

**public_activity/comment/_create.html.erb**

```
said  "<%= activity.trackable.body.truncate(100) %>" on <%= link_to activity.trackable.commentable.title, project_post_path(activity.trackable.commentable.project, activity.trackable.commentable.id) %> post. 
```

**public_activity/post/_create.html.erb**

```
added a new <%= link_to activity.trackable_type.downcase, project_post_path(activity.trackable.project, activity.trackable.id) %> to <%= link_to activity.trackable.project.title, project_path(activity.trackable.project) %> project. 
```

**活动 index.html.erb**

```
<% @activities.each do |activity| %>
  <%= link_to activity.owner.full_name, activity.owner if activity.owner %>
  <%= render_activity(activity) %>
<% end %> 
```

# android - 运行 App 时获取 NullPointer 异常

> ID：15287374
> 
> 赞同：0
> 
> 时间：2013-03-08T05:31:53.317
> 
> 标签：android, listview, download, nullpointerexception

我已经使用 ListView 控件实现了一个下载应用程序但是当我运行该应用程序时`NullPointerException`出现错误。

我的代码如下::

```
public class TestDownload extends Activity {
    private ListView lstView;
    private ImageAdapter imageAdapter;
    // private Handler handler = new Handler();
    ArrayList<Url_Dto> list = new ArrayList<Url_Dto>();
    File download;
    public static final int DIALOG_DOWNLOAD_THUMBNAIL_PROGRESS = 0;
    String strDownloaDuRL;
    ArrayList<HashMap<String, Object>> MyArrList = new ArrayList<HashMap<String, Object>>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_test_download);
        new LoadContentFromServer().execute();
    }

    public void ShowThumbnailData() {
        // ListView and imageAdapter
        lstView = (ListView) findViewById(R.id.listView1);
        lstView.setClipToPadding(false);
        list = DBAdpter.getUrl_Detail();
        imageAdapter = new ImageAdapter(getApplicationContext());
        lstView.setAdapter(imageAdapter);
    }

    public void startDownload(final int position) {

        Runnable runnable = new Runnable() {
            int Status = 0;

            public void run() {

                String urlDownload = MyArrList.get(position)
                        .get("VideoPathThum").toString();
                Log.v("log_tag", "urlDownload   ::: " + urlDownload);

                int count = 0;
                try {

                    URL url = new URL(urlDownload);
                    URLConnection conexion = url.openConnection();
                    conexion.connect();

                    int lenghtOfFile = conexion.getContentLength();
                    Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

                    InputStream input = new BufferedInputStream(
                            url.openStream());

                    // Get File Name from URL
                    String fileName = urlDownload.substring(
                            urlDownload.lastIndexOf('/') + 1,
                            urlDownload.length());
                    download = new File(
                            Environment.getExternalStorageDirectory()
                                    + "/download/");
                    if (!download.exists()) {
                        download.mkdir();
                    }
                    strDownloaDuRL = download + "/" + fileName;
                    OutputStream output = new FileOutputStream(strDownloaDuRL);

                    byte data[] = new byte[1024];
                    long total = 0;

                    while ((count = input.read(data)) != -1) {
                        total += count;
                        Status = (int) ((total * 100) / lenghtOfFile);
                        output.write(data, 0, count);

                        // Update ProgressBar
                        /*
                         * handler.post(new Runnable() { public void run() {
                         * updateStatus(position, Status); } });
                         */

                        TestDownload.this.runOnUiThread(new Runnable() {
                            public void run() {
                                updateStatus(position, Status);

                            }
                        });

                    }

                    output.flush();
                    output.close();
                    input.close();

                } catch (Exception e) {
                }

            }
        };
        new Thread(runnable).start();
    }

    private void updateStatus(int index, int Status) {

        View v = lstView.getChildAt(index - lstView.getFirstVisiblePosition());

        // Update ProgressBar
        ProgressBar progress = (ProgressBar) v.findViewById(R.id.progressBar);
        progress.setProgress(Status);

        // Update Text to ColStatus
        TextView txtStatus = (TextView) v.findViewById(R.id.ColStatus);
        txtStatus.setPadding(10, 0, 0, 0);
        txtStatus.setText("Load : " + String.valueOf(Status) + "%");

        // Enabled Button View
        if (Status >= 100) {
            Button btnView = (Button) v.findViewById(R.id.btnView);
            btnView.setTextColor(Color.RED);
            btnView.setEnabled(true);
        }
    }

    class LoadContentFromServer extends AsyncTask<Object, Integer, Object> {

        protected void onPreExecute() {
            super.onPreExecute();

        }

        @Override
        protected Object doInBackground(Object... params) {

            HashMap<String, Object> map;
            String url = "http://imprintingdesign.com/hiren_testing/TestHopeNew/testHope/data/url.json";
            String result = "";
            InputStream is = null;
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            // http post
            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            } catch (Exception e) {
                Log.e("log_tag", "Error in http connection " + e.toString());
            }
            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();
            } catch (Exception e) {
                Log.e("log_tag", "Error converting result " + e.toString());
            }
            try {
                JSONObject json_obj = new JSONObject(result);
                JSONArray j_Arr_fn = json_obj.getJSONArray("children");

                for (int i = 0; i < j_Arr_fn.length(); i++) {
                    JSONObject json_objs = j_Arr_fn.getJSONObject(i);
                    Url_Dto proDto = new Url_Dto();
                    proDto.url_video = json_objs.getString("videoUrl");
                    map = new HashMap<String, Object>();
                    map.put("VideoPathThum", proDto.url_video);
                    MyArrList.add(map);
                }

            } catch (JSONException e) {
                Log.e("log_tag", "Error parsing data " + e.toString());
            }

            return null;
        }

        @Override
        protected void onPostExecute(Object result) {
            ShowThumbnailData();

        }
    }

    class ImageAdapter extends BaseAdapter {

        private Context mContext;

        public ImageAdapter(Context context) {
            mContext = context;
        }

        public int getCount() {
            return MyArrList.size();
        }

        public Object getItem(int position) {
            return MyArrList.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub
            View view = null;
            if (convertView == null) {
                LayoutInflater inflater = (LayoutInflater) mContext
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                view = inflater.inflate(R.layout.activity_column, null);
                final ViewHolder viewHolder = new ViewHolder();
                viewHolder.imageView = (ImageView) view
                        .findViewById(R.id.ColImgPath);

                viewHolder.txtStatus = (TextView) view
                        .findViewById(R.id.ColStatus);
                viewHolder.txtHidden = (TextView) view.findViewById(R.id.Txtv);
                viewHolder.btnDownload = (Button) view
                        .findViewById(R.id.btnDownload);

                viewHolder.btnView = (Button) view.findViewById(R.id.btnView);

                viewHolder.progress = (ProgressBar) view
                        .findViewById(R.id.progressBar);
                // ColImage

                viewHolder.imageView.getLayoutParams().height = 110;
                viewHolder.imageView.getLayoutParams().width = 110;
                viewHolder.imageView.setPadding(10, 10, 10, 10);
                viewHolder.imageView
                        .setScaleType(ImageView.ScaleType.CENTER_CROP);
                try {

                    viewHolder.imageView
                            .setImageResource(list.get(position).images[position]);
                } catch (Exception e) {
                    // When Error
                    viewHolder.imageView
                            .setImageResource(android.R.drawable.ic_menu_report_image);
                }

                viewHolder.txtStatus.setPadding(10, 0, 0, 0);
                viewHolder.txtStatus.setText("...");

                viewHolder.txtHidden.setVisibility(View.GONE);
                viewHolder.txtHidden.setText(String.valueOf(position));

                viewHolder.btnDownload.setTextColor(Color.RED);
                viewHolder.btnDownload
                        .setOnClickListener(new View.OnClickListener() {
                            public void onClick(View v) {
                                // Download
                                viewHolder.btnDownload.setEnabled(false);
                                viewHolder.btnDownload.setTextColor(Color.GRAY);
                                startDownload(position);
                            }
                        });

                viewHolder.btnView.setEnabled(false);
                viewHolder.btnView.setTextColor(Color.GRAY);
                viewHolder.btnView
                        .setOnClickListener(new View.OnClickListener() {
                            public void onClick(View v) {
                                ViewVideoDelete(position);
                                viewHolder.btnDownload.setEnabled(true);
                                updateStatus(position, 0);
                            }
                        });

                viewHolder.progress.setPadding(10, 0, 0, 0);

                viewHolder.imageView.setTag(MyArrList.get(position));
                viewHolder.txtStatus.setTag(MyArrList.get(position));
                viewHolder.txtHidden.setTag(MyArrList.get(position));
                viewHolder.btnDownload.setTag(MyArrList.get(position));
                viewHolder.btnView.setTag(MyArrList.get(position));
                viewHolder.progress.setTag(MyArrList.get(position));

                view.setTag(viewHolder);

            } else {
                view = convertView;
                ((ViewHolder) view.getTag()).imageView.setTag(MyArrList
                        .get(position));
                ((ViewHolder) view.getTag()).txtStatus.setTag(MyArrList
                        .get(position));
                ((ViewHolder) view.getTag()).txtHidden.setTag(MyArrList
                        .get(position));
                ((ViewHolder) view.getTag()).btnDownload.setTag(MyArrList
                        .get(position));
                ((ViewHolder) view.getTag()).btnView.setTag(MyArrList
                        .get(position));
                ((ViewHolder) view.getTag()).progress.setTag(MyArrList
                        .get(position));

            }
            ViewHolder holder = (ViewHolder) view.getTag();
            holder.imageView.getLayoutParams().height = 110;
            holder.imageView.getLayoutParams().width = 110;
            holder.imageView.setPadding(10, 10, 10, 10);
            holder.imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            try {

                holder.imageView
                        .setImageResource(list.get(position).images[position]);
            } catch (Exception e) {
                // When Error
                holder.imageView
                        .setImageResource(android.R.drawable.ic_menu_report_image);
            }

            holder.txtStatus.setPadding(10, 0, 0, 0);
            holder.txtStatus.setText("...");

            holder.txtHidden.setVisibility(View.GONE);
            holder.txtHidden.setText(String.valueOf(position));

            holder.btnDownload.setTextColor(Color.RED);

            holder.btnView.setEnabled(false);
            holder.btnView.setTextColor(Color.GRAY);

            holder.progress.setPadding(10, 0, 0, 0);

            return convertView;

        }
    }

    static class ViewHolder {
        protected ImageView imageView;
        protected TextView txtStatus;
        protected TextView txtHidden;
        protected Button btnDownload;
        protected Button btnView;
        protected ProgressBar progress;

    }

    public void ViewVideoDelete(int position) {

        String urlDownload = MyArrList.get(position).get("VideoPathThum")
                .toString();
        String fileName = urlDownload.substring(
                urlDownload.lastIndexOf('/') + 1, urlDownload.length());
        download = new File(Environment.getExternalStorageDirectory()
                + "/download/");

        String strPath = download + "/" + fileName;
        Log.v("log_tag", "fileNameDElete :: " + strPath);
        File delete = new File(strPath);
        delete.delete();
    }

} 
```

我使用了 Main Xml Code::

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/main_lay"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:background="#437654" >

        <Button
            android:id="@+id/all_btn"
            android:layout_width="100dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="BACk" />

        <TextView
            android:id="@+id/accepted_all"
            android:layout_width="100dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="DownLoad Video" />

        <Button
            android:id="@+id/not_shown"
            android:layout_width="100dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="All DOwnload" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.1"
        android:orientation="horizontal" >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:focusable="false" >
        </ListView>
    </LinearLayout>

</LinearLayout> 
```

我使用了Custome Xml List View Row::

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:descendantFocusability="blocksDescendants"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/ColImgPath"
        android:layout_width="50dp"
        android:layout_height="50dp" />

    <TextView
        android:id="@+id/Txtv"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:visibility="gone"
         />

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip" >

            <TextView
                android:id="@+id/ColStatus"
                android:text="Status"
                android:textAppearance="?android:attr/textAppearanceSmall" />

            <ProgressBar
                android:id="@+id/progressBar"
                style="?android:attr/progressBarStyleHorizontal"
                android:layout_width="100dp"
                android:layout_height="wrap_content" />
        </TableRow>

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip" >

            <Button
                android:id="@+id/btnDownload"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Download" />

            <Button
                android:id="@+id/btnView"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Delete" />
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

当我在下面运行 App NOT Start But Get Error 时：

```
03-08 10:51:59.757: E/AndroidRuntime(549): FATAL EXCEPTION: main
03-08 10:51:59.757: E/AndroidRuntime(549): java.lang.NullPointerException
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.AbsListView.obtainView(AbsListView.java:1432)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.ListView.onMeasure(ListView.java:1127)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.View.measure(View.java:8313)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:701)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:311)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.View.measure(View.java:8313)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:701)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:311)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.View.measure(View.java:8313)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.View.measure(View.java:8313)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.View.measure(View.java:8313)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.View.measure(View.java:8313)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.os.Looper.loop(Looper.java:130)
03-08 10:51:59.757: E/AndroidRuntime(549):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-08 10:51:59.757: E/AndroidRuntime(549):  at java.lang.reflect.Method.invokeNative(Native Method)
03-08 10:51:59.757: E/AndroidRuntime(549):  at java.lang.reflect.Method.invoke(Method.java:507)
03-08 10:51:59.757: E/AndroidRuntime(549):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-08 10:51:59.757: E/AndroidRuntime(549):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-08 10:51:59.757: E/AndroidRuntime(549):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:35:17.743

当您的`ListAdapter.getView`方法返回时会发生这种情况`null`。在这种情况下，我看到您的`ImageAdapter`课程正在返回`convertView`，这可能是`null`。我认为这意味着返回`view`而不是返回`convertView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:45:05.130

尝试以下方式，

```
public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub
            View view = null;
            if (convertView == null) {
                ......

                view.setTag(viewHolder);

            } else {
                view = convertView;     
                 ...
            }
            ViewHolder holder = (ViewHolder) view.getTag();
            .....

            return convertView; // if convertView == null , where convertView is instanced??

        }
    } 
```

# ios - 如何使用地图：在phonegap ios应用程序中

> ID：15287375
> 
> 赞同：0
> 
> 时间：2013-03-08T05:31:55.097
> 
> 标签：ios, html, cordova

参考[链接](https://stackoverflow.com/a/14504346/1956942)

我正在尝试使用以下 url 将给定位置定位到本机 iOS 地图上：

```
window.location = "maps:Greensboro+NC" 
```

但是，它会以我当前的位置而不是指定的位置打开地图。

请建议我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T06:55:13.377

不确定这是否是您想要的，但根据 Apple 文档，您需要以下格式的 url：

[http://maps.apple.com/?q=格林斯伯勒+NC](http://maps.apple.com/?q=Greensboro+NC)

# angularjs - AngularJS - 控制器不等待条件语句中的服务返回值

> ID：15287377
> 
> 赞同：4
> 
> 时间：2013-03-08T05:32:21.497
> 
> 标签：angularjs

如果他们尝试在应用程序中访问登录页面，我目前正在尝试将登录用户重定向到登录页面之外。与登录页面关联的控制器 -`Login_controller`调用授权服务中的函数 - `Authorisation_service.isLoggedIn()`。如果此服务返回 true，则应将用户重定向到已登录的概览页面。

通过登录控制台，我可以看到在服务返回 true 之前，条件语句已经声明了服务返回的值是未定义的。之后服务确实返回 true，但为时已晚。

如何让控制器的条件语句等待服务的返回值？

**授权服务.js**

```
myApp.factory('Authorise', ['User', '$http', '$location', '$rootScope', function( User, $http, $location, $rootScope ) {
    return {
        isLoggedIn: function() {
            if( ((sessionStorage.username && sessionStorage.authKey) && (sessionStorage.username !== "null" && sessionStorage.authKey !== "null")) || ((localStorage.username && localStorage.authKey) && (localStorage.username !== "null" && localStorage.authKey !== "null" )) ) {
                if( sessionStorage.username ) {
                    var usernameLocal = sessionStorage.username;
                    var authKeyLocal = sessionStorage.authKey;
                } else {
                    var usernameLocal = localStorage.username;
                    var authKeyLocal = localStorage.authKey;
                }
                //pass to server
                var user = User.query({ usernameLocal: usernameLocal, authKeyLocal: authKeyLocal }, function(user) {
                    if( user.loginSuccess === 1 ) {
                        return true;
                    } else {
                        return false;
                    }
                });
            } else {
                return false;
            }
        }
    };
}]); 
```

**登录控制器.js**

```
myApp.controller( 'Login_controller', function( Authorise, $scope, $location ) {
    if( Authorise.isLoggedIn() === true ) {
        console.log("Authorise.isLoggedIn() = true");
        $location.path('/teach/overview');
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T06:32:18.930

smk 是对的。您可能正试图依赖**服务器尚未返回**的数据。“Yet”是这里的关键问题，因为很可能您的数据已从服务器正确获取，您只是在准备好之前尝试参考结果！要检查这是否属实，只需添加回调`console.log(user)`。`User.query(...)`

Smk 为您指出了正确的方法——改用 PROMISE API。基本上，promise 是一个对象，当服务器准备好结果时，您可以进一步使用它来执行一些操作。为了说明这一点：

```
function myFunc() {
   var result = false;

   // You are calling async request to the server, so the execution won't wait for the
   // results. It will simply fire server request and proceed to next lines.
   serverCall(function(srvResponse){

      result = srvResponse.everythingIsGood; // This will be called after the whole method finishes!
   });

   return result; // This will MOST PROBABLY return 'false' all the times.
} 
```

以及这样做的正确方法：

```
function theRealLogicYouWantToDo(result) {
   if (result) {
      // ...
   } else {
      // ...
   }
}

serverCall(function(srvResponse) {
   theRealLogicYouWantToDo(srvResposne.everythingIsGood);
}); 
```

这是关于 JQUERY 中所有这些[的很好的教程。](https://tutsplus.com/lesson/deferreds/)它不仅用于服务器调用，还用于 JS 中的其他几个地方。很好学。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T05:34:52.777

你需要返回一个[承诺](https://docs.angularjs.org/api/ng/service/$q)。

您的 angularjs 服务可以返回一个承诺，您可以在控制器中测试它的值。

# c# - 如何从域（C# 代码）中删除计算机，然后添加到工作组？

> ID：15287378
> 
> 赞同：2
> 
> 时间：2013-03-08T05:32:23.333
> 
> 标签：c#, windows, dns, workgroup

我的要求是`join`一台电脑到一个`Workgroup`. 它在正常情况下运行良好。但是如果计算机已经是域的一部分，那么我的代码就不起作用。

我假设首先需要从域中删除计算机，然后将其添加到工作组。有人知道如何从域中删除计算机吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:02:34.990

请记住，如果计算机是域的一部分，则运行您的软件的用户可能无权将其从该域中删除。这很可能是域管理员特权操作。如果是这样，那么您的软件也将无法做到！

我不确定您的软件无法在域中运行的原因是什么，但可能值得关注这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:49:39.250

不完全是答案，但评论太长了：大多数管理示例都在 VBscript 中，因此在搜索时期望大多数结果需要转换......

一起应该让您编写删除代码的链接：

*   [从域中删除计算机（ADSI/VB 脚本）](http://www.freevbcode.com/ShowCode.asp?ID=5151)
*   [WinNT 的 ADSI 对象](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772211%28v=vs.85%29.aspx)和链接的[IADsContainer::Delete](http://msdn.microsoft.com/en-us/library/windows/desktop/aa705988%28v=vs.85%29.aspx)
*   [如何在 Visual C# 中访问 ADSI 对象](http://support.microsoft.com/kb/315716)

代码块：

```
// VBScript
Set objDC = getobject("WinNT://" & strDomain )
objDC.Delete( "Computer", strComputer 
```

C# 访问 ADSI 对象：

```
DirectoryEntry de = new DirectoryEntry();
de.Path = "WinNT://YOURDOMAIN"; 
```

# ios - UIWebView 以更有效的方式降低加载时 间

> ID：15287381
> 
> 赞同：2
> 
> 时间：2013-03-08T05:33:00.337
> 
> 标签：ios, objective-c, cocoa-touch, uiwebview

我正在下载多个 html 并将它们作为字符串保存在本地`NSArray`。然后我使用 3`UIWebViews`来加载内容。用户总是看到一个`UIWebView`和两个`UIWebViews`在后台加载，使用：

```
[_firstWebView loadHTMLString:nextHtml.body baseURL:nil]; 
```

当用户在两者之间移动时，`UIWebViews`如果他一次移动 2 秒，我仍然可以看到 1-2 秒的缓慢加载`UIWebViews`时间。我考虑过 5 甚至 7 `UIWebViews`，但我担心它会严重影响内存使用。

我的另一个想法是将内容保存在本地`NSData`，然后加载它

```
[web loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:filePath]]]; 
```

但我不确定这会给我带来任何改善还是会？

另一个想法是我的应用程序中的某些东西（屏幕上的动画）正在减慢加载时间，所以也许我应该`loadHTMLString:nextHtml`在不同的线程上？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:45:40.703

最近我做了一些关于在后台将内容加载到 UIWebView 的研究。我发现即使是成功的 loadRequest 也没有效果，而 webview 是不可见的并且没有在某处添加为子视图。

但是，如果我在加载之前对视图进行了一些访问，它就会开始显示在后台加载的内容。

所以我先隐藏视图，然后在其中加载内容，然后再将其显示给用户，使视图再次可见：

在加载方法中：

```
// make some access to view to reflect content changes
self.webView.hidden = YES;

[self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:someurl]]]; 
```

当用户切换到 web 视图时：

```
// make view visible again
self.webView.hidden = NO; 
```

这种方法对我有用。希望它也为您指明正确的方向。

# c# - 使用 Microsoft.SqlServer.Management.Smo 获取性能指标

> ID：15287382
> 
> 赞同：0
> 
> 时间：2013-03-08T05:33:08.273
> 
> 标签：c#, .net, sql, performancecounter, smo

想知道如何通过使用**SMO**（sql 管理对象）以编程方式获取给定 sql server 实例或数据库的性能指标。基本上类似于 Sql Management Studio 中的活动监视器显示的内容。

*例如，如果我想知道 CPU 使用率、I/O 写入等信息，哪个 SMO 对象会给我这些信息？*

我试过使用以下方法，但我认为我没有走在正确的轨道上。

```
Server srv = new Server(conn);

DataRow[] datarows = srv.EnumPerformanceCounters().Select(); 
```

# java - 为记录添加过滤功能以便快速搜索

> ID：15287383
> 
> 赞同：1
> 
> 时间：2013-03-08T05:33:10.303
> 
> 标签：java, mysql, jsp, jakarta-ee, servlets

我正在使用两个或更多下拉列表来过滤我的 JSP 页面中显示的结果。现在我只使用`AND`我的数据库查询。例如，我有 2 个 ddl。然后在我的查询中，我有：

```
Select * from table 
WHERE cityId = ? AND 
categId = ? 
```

现在我想`ALL`在我的所有 ddl 中添加一个选项，这样当我`ALL`在一个 ddl 中选择选项时，查询将类似于：

```
Select * from table 
WHERE cityId IS NOT NULL AND 
categId = ? 
```

如何仅使用一个查询来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:38:08.913

尝试在下拉选择的基础上为 where 条件制作一个连接字符串。

例如（只是逻辑）

```
whereString = '1';

if POST contain drop1
    whereString += ' AND CONDITION';

if POST contain drop2
    whereString += ' AND CONDITION'; 
```

现在在 sql 中使用 whereString

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:47:41.093

您必须根据即将到来的值准备查询。

```
String dropDown1 = request.getParameter("dropDown1");
        String dropDown2 = request.getParameter("dropDown2");
        StringBuilder builder = new StringBuilder("Select * from table where ");
        if(dropDown1 !=null){
            if(dropDown1.equalsIgnoreCase("ALL")){
                builder.append("cityId IS NOT NULL");
            }else{
                builder.append("cityId="+dropDown1);
            }
        }

        if(dropDown2 !=null){
            if(dropDown2.equalsIgnoreCase("ALL")){
                builder.append("and categId IS NOT NULL");
            }else{
                builder.append("and categId="+dropDown2);
            }
        }
        String finalQuery = builder.toString(); 
```

# jquery - 有没有办法获得在css中自动的图像宽度？

> ID：15287387
> 
> 赞同：1
> 
> 时间：2013-03-08T05:33:25.890
> 
> 标签：jquery, html, css

从第一天开始，这个问题就一直困扰着我：

如果我得到一张图片并用 css 调整它的大小：

```
.img {
width:100%;
height:auto;
} 
```

假设我要得到这张图片的高度，通过使用

```
var imgH = $('.img').height(); 
```

imgH 将返回 0，但我想获得由 css 处理的大小的高度，如何解决？

谢谢！

* * *

对不起，伙计们，你是对的，我尝试了这些示例并在我客户的项目上进行了测试，结果它们都可以正常工作，我试图重现 value 0 错误，但我失败了。我有点迷失在这个过程中，但我仍然记得我之前被困过几次。无论如何，问题解决了，感谢@SrinivasR！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T05:42:24.130

```
$(document).ready(function() {
    $("img").load(function() {
        alert($(this).height());
        alert($(this).width());
    });
}); 
```

**[演示](http://jsfiddle.net/LECWe/35/)**

# c# - 正确使用具有指定点的 Drawing.Rectangle c# winforms

> ID：15287388
> 
> 赞同：1
> 
> 时间：2013-03-08T05:33:35.690
> 
> 标签：c#, winforms, system.drawing, bitmapimage

我正在尝试为扫描文档的每个角落（左上和右上，左下和右下）获取图像。下面是我尝试实现的方法，但是当我查看保存的图像时，它们都是不同的部分，但仅位于左上角，而不是整个文档。关于如何改变这一点的任何建议？

```
 Bitmap result = fullImg;
 //top-left
 var bandImg1 = result.Clone(new System.Drawing.Rectangle(0, 0, 375, 375), fullImg.PixelFormat);
 //top-right
 var bandImg2 = result.Clone(new System.Drawing.Rectangle(100, 50, 375, 375), fullImg.PixelFormat);
 //bottom-left
 var bandImg3 = result.Clone(new System.Drawing.Rectangle(0, 50, 375, 375), fullImg.PixelFormat);
 //bottom-right
 var bandImg4 = result.Clone(new System.Drawing.Rectangle(100, 100, 375, 375), fullImg.PixelFormat);

                    bandImg1.Save("c:\\bandImg1.gif", System.Drawing.Imaging.ImageFormat.Gif);
                    bandImg2.Save("c:\\bandImg2.gif", System.Drawing.Imaging.ImageFormat.Gif);
                    bandImg3.Save("c:\\bandImg3.gif", System.Drawing.Imaging.ImageFormat.Gif);
                    bandImg4.Save("c:\\bandImg4.gif", System.Drawing.Imaging.ImageFormat.Gif); 
```

**----- 根据下面的答案更新了代码 ------**

```
Bitmap result = fullImg;
                    //top-left
                    var bandImg1 = result.Clone(new System.Drawing.Rectangle(0, 0, result.Width/2, result.Height/2), fullImg.PixelFormat);
                    //top-right
                    var bandImg2 = result.Clone(new System.Drawing.Rectangle(result.Width / 2, 0, result.Width / 2, result.Height / 2), fullImg.PixelFormat);
                    //bottom-left
                    var bandImg3 = result.Clone(new System.Drawing.Rectangle(0, result.Height / 2, result.Width / 2, result.Height / 2), fullImg.PixelFormat);
                    //bottom-right
                    var bandImg4 = result.Clone(new System.Drawing.Rectangle(result.Width / 2, result.Height / 2, result.Width / 2, result.Height / 2), fullImg.PixelFormat);

                    bandImg1.Save("c:\\bandImg1.gif", System.Drawing.Imaging.ImageFormat.Gif);
                    bandImg2.Save("c:\\bandImg2.gif", System.Drawing.Imaging.ImageFormat.Gif);
                    bandImg3.Save("c:\\bandImg3.gif", System.Drawing.Imaging.ImageFormat.Gif);
                    bandImg4.Save("c:\\bandImg4.gif", System.Drawing.Imaging.ImageFormat.Gif);

                    string QRinfo = Process(bandImg1); 
```

**工艺方法：**

```
public string Process(Bitmap bitmap)
    {
        var reader = new com.google.zxing.qrcode.QRCodeReader();

        try
        {
            LuminanceSource source = new RGBLuminanceSource(bitmap, bitmap.Width, bitmap.Height);
            var binarizer = new HybridBinarizer(source);
            var binBitmap = new BinaryBitmap(binarizer);
            return reader.decode(binBitmap).Text;
        }
        catch (Exception e)
        {
            return e.Message;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:04:06.667

我的猜测是，在计算矩形坐标时，您需要考虑`result`或的宽度和高度`fullImg`，而不是像您这样硬编码值。像这样的东西：

```
//top left
var bandImg1 = result.Clone(new Rectangle(0, 0, result.Width / 2, result.Height / 2), result.PixelFormat);
//top right
var bandImg2 = result.Clone(new Rectangle(result.Width / 2, 0, result.Width / 2, result.Height / 2), result.PixelFormat);
//bottom left
var bandImg3 = result.Clone(new Rectangle(0, result.Height / 2, result.Width / 2, result.Height / 2), result.PixelFormat);
//bottom right
var bandImg4 = result.Clone(new Rectangle(result.Width / 2, result.Height / 2, result.Width / 2, result.Height / 2), result.PixelFormat); 
```

您现在所做的可能不起作用，因为您正在对值进行硬编码。例如，`bandImg1`您使用`(0,0,375,375)`的矩形基本上是说“从左上角开始，向右走 375 像素，向下走 375 像素”。相反，您想使用`(0, 0, result.Width / 2, result.Height / 2)`“从左上角开始，穿过图像的一半，然后沿着图像向下走一半”，这将为您提供左上角。

# javascript - 用图像而不是颜色填充画布区域

> ID：15287390
> 
> 赞同：1
> 
> 时间：2013-03-08T05:33:39.893
> 
> 标签：javascript, jquery, html, image-processing, canvas

使用下面的代码，我可以在加载到画布中的图像上绘制一个区域，并用一些颜色填充绘制的区域。

现在我需要用图像而不是颜色填充绘制区域。就像是：

canvas.fillStyle = 'url(myimage.jpg)';

代替

canvas.fillStyle = '#123456' // 示例填充颜色

**HTML：**

```
 <body>
  <div id="main" class="container">
    <h1>Image Maps Canvas Drawing</h1>
    <form>
    <div class="row">
      <div class="span6">
      <textarea rows=3 name="coords1" class="canvas-area input-xxlarge" disabled 
        placeholder="Shape Coordinates" 
        data-image-url="img1.jpg"></textarea>
      </div>
      <div class="span6">

    </div>
    </form>
    </div>
    <script language="javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script language="javascript" src="jquery.canvasAreaDraw.min.js"></script>
  </body> 
```

**jquery.canvasAreaDraw.min.js**

```
(function (e) {
    e.fn.canvasAreaDraw = function (e) {
        this.each(function (n, r) {
            t.apply(r, [n, r, e])
        })
    };

    var t = function (t, r, i) {
        var s, o, u, a, f, l, c, h, p, d, v, m, g, y, b; u = e.extend({
            imageUrl: e(this).attr("data-image-url")
        }, i), e(this).val().length ? s = e(this).val().split(",").map(function (e) {
            return parseInt(e, 10)
        }) : s = [], a = e('<button type="button" class="btn"><i class="icon-trash"></i>Clear</button>'),
f = e("<canvas id='your_canvas'>"), l = f[0].getContext("2d"), c = new Image, m = function () {
    f.attr("height", c.height).attr("width", c.width), h()
}, e(c).load(m), c.src = u.imageUrl, c.loaded && m(), f.css(
{ background: "url(" + c.src + ")" }), e(document).ready(function () {
    e(r).after("<br>", f, "<br>", a), a.click(g), f.bind("mousedown", p), f.bind("contextmenu", y), f.bind("mouseup", d)
}), g = function () {
    s = [], h()
}, v = function (t) {
    t.offsetX || (t.offsetX = t.pageX - e(t.target).offset().left, t.offsetY = t.pageY - e(t.target).offset().top), s[o] = Math.round(t.offsetX), s[o + 1] = Math.round(t.offsetY), h()
},
d = function () {
    e(this).unbind("mousemove"), b(), o = null
}, y = function (t) {
    t.preventDefault(), t.offsetX || (t.offsetX = t.pageX - e(t.target).offset().left, t.offsetY = t.pageY - e(t.target).offset().top);

    var n = t.offsetX, r = t.offsetY;
    for (var i = 0; i < s.length; i += 2) {
        dis = Math.sqrt(Math.pow(n - s[i], 2) + Math.pow(r - s[i + 1], 2));
        if (dis < 6)
            return s.splice(i, 2), h(), b(), !1
    }
    return !1
}, p = function (t) {
    var r, i, u, a, f = s.length;
    if (t.which === 3)
        return !1;
    t.preventDefault(), t.offsetX || (t.offsetX = t.pageX - e(t.target).offset().left, t.offsetY = t.pageY - e(t.target).offset().top), r = t.offsetX, i = t.offsetY;
    for (var l = 0; l < s.length; l += 2) {
        u = Math.sqrt(Math.pow(r - s[l], 2) + Math.pow(i - s[l + 1], 2));
        if (u < 6) return o = l, e(this).bind("mousemove", v), !1
    }
    for (var l = 0; l < s.length; l += 2)
        l > 1 && (a = n(r, i, s[l], s[l + 1], s[l - 2], s[l - 1], !0), a < 6 && (f = l));
    return console.log(s), s.splice(f, 0, Math.round(r), Math.round(i)), o = f, e(this).bind("mousemove", v), h(), b(), !1
}, h = function () {
    l.canvas.width = l.canvas.width;
    if (s.length < 2)
        return !1;
    l.globalCompositeOperation = "destination-over", l.fillStyle = "rgb(255,255,255)", l.strokeStyle = "rgb(255,20,20)", l.lineWidth = 1, l.beginPath(),
l.moveTo(s[0], s[1]);
    for (var e = 0; e < s.length; e += 2)
        l.fillRect(s[e] - 2, s[e + 1] - 2, 4, 4), l.strokeRect(s[e] - 2, s[e + 1] - 2, 4, 4), s.length > 2 && e > 1 && l.lineTo(s[e], s[e + 1]); l.closePath(), l.fillStyle = "rgba(255,0,0,0.3)", l.fill(), l.stroke(), b()
}, b = function () {
    e(r).val(s.join(","))
} 
}; e(document).ready(function () {
    e(".canvas-area[data-image-url]").canvasAreaDraw()
});
var n = function (e, t, n, r, i, s, o) {
    function u(e, t, n, r) {
        return Math.sqrt((e -= n) * e + (t -= r) * t)
    }
    if (o && !(o = function (e, t, n, r, i, s) {
        if (!(i - n)) return { x: n, y: t };
        if (!(s - r))
            return { x: e, y: r };
        var o, u = -1 / ((s - r) / (i - n));
        return {
            x: o = (i * (e * u - t + r) + n * (e * -u + t - s)) / (u * (i - n) + r - s), y: u * o - u * e + t
        }
    }
(e, t, n, r, i, s), o.x >= Math.min(n, i) && o.x <= Math.max(n, i) && o.y >= Math.min(r, s) && o.y <= Math.max(r, s))) {
        var a = u(e, t, n, r), f = u(e, t, i, s);
        return a > f ? f : a
    }
    var l = r - s, c = i - n, h = n * s - r * i;
return Math.abs(l*e+c*t+h)/Math.sqrt(l*l+c*c)}})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:39:49.317

像这样的东西：

```
$(function() {
  var canvas = $('#canvas')[0];
  var ctx    = canvas.getContext('2d');
  var src    = "http://www.mysite.com/avatar/e55?s=128&d=identicon&r=PG";
  var w      = canvas.width  = 400;
  var h      = canvas.height = 400;
  var img    = new Image();
  img.src    = src;
  $(img).load(function() {
    var pattern = ctx.createPattern(img, 'repeat');
    ctx.fillStyle = pattern;
    ctx.fillRect(0, 0, w, h);
  });
}); 
```

# android - 如何在android中使用SharedPreference存储动态表值

> ID：15287391
> 
> 赞同：-1
> 
> 时间：2013-03-08T05:33:40.977
> 
> 标签：android

我正在开发基于 Web 服务的 android 应用程序，下面我提到了我的应用程序输出......这是我的动态表格视图

```
final LinearLayout linear = new LinearLayout(
                                MainActivity.this);
                        MainLayout.setWeightSum(1.0f);
                        TableRow row1 = new TableRow(MainActivity.this);
                        row1.setId(1000 + sCount);
                        text1 = new TextView(MainActivity.this);
                        text1.setText(button.getText());
                        text1.setTextColor(Color.WHITE);
                        LayoutParams params = new TableRow.LayoutParams(0,
                                LayoutParams.WRAP_CONTENT, 2f);
                        text1.setLayoutParams(params);

                        // text1.setGravity(100);
                        final Button button = new Button(MainActivity.this);
                        EditText e = new EditText(MainActivity.this);
                        LayoutParams params1 = new TableRow.LayoutParams(0,
                                LayoutParams.WRAP_CONTENT, 0.5f);
                        e.setLayoutParams(params1);
                        e.setInputType(InputType.TYPE_CLASS_NUMBER);
                        arryList.add(text1.getText().toString());
                        nameArray = arryList.toArray(new String[arryList
                                .size()]);
                        String itemname = text1.getText().toString();

                        button.setText(" X ");
                        button.setId(2000 + sCount);
                        LayoutParams params2 = new TableRow.LayoutParams(0,
                                LayoutParams.WRAP_CONTENT, 0.5f);
                        button.setLayoutParams(params2);
                        button.setOnClickListener(new OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                MainLayout.removeView(findViewById(v
                                        .getId() - 1000));
                            }
                        });

                        sCount++;
                        row1.setLayoutParams(new TableRow.LayoutParams(
                                TableRow.LayoutParams.FILL_PARENT,
                                TableRow.LayoutParams.WRAP_CONTENT));
                        row1.setGravity(Gravity.CENTER_VERTICAL);
                        row1.setPadding(1, 1, 1, 1);
                        row1.addView(text1);
                        row1.addView(e);

                        row1.addView(button);
                        MainLayout.addView(row1);

                    }
                    ll.addView(MainLayout);
                    // TODO Auto-generated method stub 
```

输出是

![在此处输入图像描述](../Images/1c1c384486cd3b54e6a7362c0969ae6d.png)

我想将 textview 值和 edittext 值存储在 sharedpreference 中...之后我想检索相同的值并加载相同的表格布局...我该怎么做？请任何帮助我...在此先感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:41:54.220

保存

```
 SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_PRIVATE);
            SharedPreferences.Editor prefsEditor = myPrefs.edit();
            prefsEditor.putInt("VariableName", Value);
            prefsEditor.putInt("VariableName2", Value);
            prefsEditor.commit(); 
```

读书

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_PRIVATE);
int d = myprefs.getInt("VariableName", defaultvalue); 
```

# rally - 标签名称未显示在表格列中

> ID：15287392
> 
> 赞同：1
> 
> 时间：2013-03-08T05:33:47.450
> 
> 标签：rally

我正在尝试使用以下代码将标签名称作为列获取：

查询对象：

```
var queryObject = {
                key: 'storiesBackLog',
                type: 'hierarchicalrequirement',
                fetch: 'FormattedID,Name,PlanEstimate,ScheduleState,Tags',
                query: '(ScheduleState = "Backlog")',
                order: 'FormattedID'
        }; 
```

表配置：

```
var config = { columns: 
           [    
                {key:'FormattedID', header:'ID', width:60},
                {key:'PlanEstimate', header:'Points', width:60},
                {key:'Name', header:'Name', width:400},
                {key:'Tags.Name', header:'Department', width:400},
           ] 
        }; 
```

使用 Tags.Name，结果为 ...，使用 Tags，结果为 [object Object]。有谁知道关键是什么？

最终解决方案：

```
rally.forEach(results.storiesBackLog, function(story) {
        var tags = [];
        rally.forEach(story.Tags, function(tag) {
            tags.push(tag.Name); 
        });
        story.TagNames = tags.join(';');
    });

    var tableBackLogConfig = { columns:
        [
            {key:'TagNames', header:'Department', width:400},
        ]
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:50:28.540

我认为 table 组件足够聪明，可以遍历对象图，但我敢打赌，Tags 是一个集合这一事实会绊倒它。您可能需要先自己处理数据并将名为 TagNames 的列添加到表中，而不是在从 RallyDataSource 返回数据时自行计算。

```
function onDataRetrieved(results) {
    rally.forEach(results.storiesBacklog, function(story) {
        story.TagNames = (story.Tags || []).join(', ');
    });

    var config = { columns:
        [ //...
            {key: 'TagNames', header 'Department', width: 400}
        ]
    };
    //create table 
} 
```

# javascript - 将画布中的图像保存为 zip

> ID：15287393
> 
> 赞同：13
> 
> 时间：2013-03-08T05:33:49.200
> 
> 标签：javascript, image, html, canvas

我有一个 HTML5 画布，它最终可能是一个很长的 dataURL（如果他们试图导航到它，长到足以让 chrome 崩溃）。因此，我正在尝试使用 JSZip 将图像保存在 zip 中。我尝试了以下两件事：

```
var zip = new JSZip();
var savable = new Image();
savable.src = canvas.toDataURL();
zip.file("image.png", savable, {base64: true});
var content = zip.generate();
var blobLink = document.getElementById('blob');
blobLink.download = "image.zip";
blobLink.href = window.URL.createObjectURL(zip.generate({type:"blob"})); 
```

这会导致以下错误：

```
Uncaught TypeError: Object #<HTMLImageElement> has no method 'replace' 
```

我也试过这个：

```
var zip = new JSZip();
zip.file("image.png", canvas.toDataURL(), {base64: true});
var content = zip.generate();
var blobLink = document.getElementById('blob');
blobLink.download = "image.zip";
blobLink.href = window.URL.createObjectURL(zip.generate({type:"blob"})); 
```

这似乎可行，但是 zip 中的图像无效。我该怎么做才能正确保存图像？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-08T05:41:51.937

您正在生成一个数据 uri，它在实际 base64 数据之前具有架构、mime-type 等`data:[<MIME-type>][;charset=<encoding>][;base64],<data>`。您必须先删除所有内容，然后再使用数据。

```
zip.file("image.png", savable.src.substr(savable.src.indexOf(',')+1), {base64: true}); 
```

# asp.net-mvc - MVC 回发删除日期字段值

> ID：15287394
> 
> 赞同：1
> 
> 时间：2013-03-08T05:33:51.040
> 
> 标签：asp.net-mvc

这是我的看法：

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <div class="editor-label">
            @Html.LabelFor(model => model.Title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Title)
            @Html.ValidationMessageFor(model => model.Title)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Description)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Description)
            @Html.ValidationMessageFor(model => model.Description)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ExpireDate)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ExpireDate)
            @Html.ValidationMessageFor(model => model.ExpireDate)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

（基本上是模板视图）

这是我发布到的 C#：

```
[HttpPost]
public ActionResult Create(bulletin newBulletin)
{
    try
    {
        var db = Util.GetDb();
        var toAdd = new bulletin
            {
                title = newBulletin.title,
                description = newBulletin.description,
                expire_date = newBulletin.expire_date,
                timestamp = DateTime.Now,
                user_id = 1
            };
        db.bulletins.InsertOnSubmit(toAdd);
        db.SubmitChanges();
        return RedirectToAction("Index");
    }
    catch(Exception ex)
    {
        return View();
    }
} 
```

标题和说明已填充，但无论我在 expire_date 文本框中输入什么日期，它都是：

{1/01/0001 上午 12:00:00}

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:36:20.333

当模型绑定器尝试将请求值解析为 DateTime 字段时，它将使用当前线程区域性。因此，例如，如果您在`<globalization>`元素中设置了一些特定的文化，您应该确保您在文本框中输入的日期字符串格式正确。

另一方面，如果您的 web.config 中没有全球化元素或将文化设置为`auto`（默认值），则当前文化将由客户端确定。客户端 Web 浏览器发送包含要使用的值的 Accept-Language 请求标头。在这种情况下，您需要使用与浏览器中配置的日期格式相同的日期格式。

而且，如果您希望所有日期都采用特定格式，无论使用什么浏览器设置，您都可以编写一个自定义模型绑定器，该绑定器将`DisplayFormat`在出价时使用视图模型上的属性。我已经在[`this post`](https://stackoverflow.com/a/7836093/29407).

# objective-c - 我的控制台显示确实接收了内存并使应用程序崩溃？

> ID：15287395
> 
> 赞同：0
> 
> 时间：2013-03-08T05:33:51.973
> 
> 标签：objective-c, xcode

我的控制台显示确实“接收`memory warning"`并崩溃了应用程序。我已经完成`profiling,`但我没有发现内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:49:10.967

[为什么不使用内存分配模板运行 Xcode 工具，](https://stackoverflow.com/questions/11001088/new-in-using-xcode-instruments-to-interpret-memory-warning-for-iphone-developmen)看看你的内存被消耗的速度有多快。

[这是帮助您入门的 Apple 文档](http://developer.apple.com/library/mac/#documentation/developertools/Conceptual/InstrumentsUserGuide/MemoryManagementforYouriOSApp/MemoryManagementforYouriOSApp.html)。

您的应用程序是否偶然使用了很多图像？

# php - 使用计数有问题

> ID：15287397
> 
> 赞同：1
> 
> 时间：2013-03-08T05:33:56.940
> 
> 标签：php

```
 foreach ($studentData['questions'] as $questionId => $questionData) {

        echo '<h3>'.$questionData['questionno'].': '.$questionData['content'].'</h3>';

} 
```

上面的代码可以显示 3 个问题，例如：

1.  什么是2+2？
2.  什么是3+3？
3.  什么是4+4？

现在我想要做的是执行计数以确定有多少问题，所以我做了下面的代码：

```
 foreach ($studentData['questions'] as $questionId => $questionData) {

$noofquestions = count($questionData['questionno']);

        echo '<h3>'.$questionData['questionno'].': '.$questionData['content'].'</h3>';

} 
```

但问题是，它不是输出`3`而是`$noofquestions`输出`1`。为什么是这样？

我还想计算`Fully Correct`显示的次数`$noofcorrect`和分别显示的次数`Not Correct / Not Fully Correct`，但不确定如何使用下面的代码来确定这一点：

```
 <?php

    if($check)
{
    echo '<p class="green"><strong>Fully Correct</strong></p>';
}
else
{
    echo '<p class="red"><strong>Not Correct / Not Fully Correct</strong></p>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:51:33.820

请执行下列操作

```
$count=0;
foreach ($studentData['questions'] as $questionId => $questionData) 
{

    $count += 1;

    echo '<h3>'.$questionData['questionno'].': '.$questionData['content'].'</h3>';

}

echo $count; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:36:42.813

您正在调用`count`作为问题编号的字符串。为什么它不返回数组的计数会让您感到惊讶？

放在循环`$noofquestions = count($studentData['questions']);`之前。`foreach`

# mysql - Mysql：如果行不存在则插入，否则更新..有更简单的命令吗？

> ID：15287398
> 
> 赞同：6
> 
> 时间：2013-03-08T05:34:14.887
> 
> 标签：mysql

学习Mysql，问题一大堆……

我可以通过简单的方式达到预期的效果：

```
$mysqli->query("INSERT results SET user_id = '".$user_data[0]['user_id']."', logo_id = '".$mysqli->real_escape_string($_GET['logo_id'])."'");
$mysqli->query("UPDATE results SET result_tries = result_tries +1 WHERE logo_id = '".$mysqli->real_escape_string($_GET['logo_id'])."' AND user_id = '".$user_data[0]['user_id']."'"); 
```

我`unique check`在桌子上有数据库，所以 logo_id 和 user_id 应该是唯一的。因此，如果行存在第一个查询失败，并且执行第二个更新......，但这感觉有点黑客......有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T05:45:05.057

尝试

```
$user_id = $user_data[0]['user_id'];
$logo_id = $mysqli->real_escape_string($_GET['logo_id']);

$sql = "INSERT INTO results (user_id, logo_id, result_tries) 
        VALUES ('$user_id', '$logo_id', 0)
            ON DUPLICATE KEY UPDATE result_tries = result_tries + 1";

$mysqli->query($sql); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-14T19:04:34.017

就我而言：

```
INSERT INTO assignment_status (user, assignment, status, note) VALUES (4, 7, 2, "My special note.")
ON DUPLICATE KEY UPDATE status=2, note="My special note." 
```

请注意，我的主键由 2 列组成 -`user`和`assignment`ID...

# c# - 转换光标坐标

> ID：15287401
> 
> 赞同：0
> 
> 时间：2013-03-08T05:34:28.460
> 
> 标签：c#

我有这段代码将鼠标光标的**X**`float`坐标转换为一个值：

```
 private float XToFloat(int x)
    {
        return (float)(x / (float)this.Width);
    } 
```

结果是这样的**0.01234567**现在我如何将其转换回原始坐标？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:34:52.970

它只是一个简单的数学。使用代码。

```
private float XToFloat(int x)
{
   return (float)(x / (float)this.Width);
} 
```

例子：

```
//If Width Value
this.Width = 10; 
```

调用函数并将值传递给参数，如`XToFloat(5);` 函数将返回值**0.5**。

```
//inside the function
    (float)(x / (float)this.Width); => (float)(5 / (float)10);
//z = x/y 
```

要将其转换回原始值，我们创建了一个函数，我们将浮点值乘以宽度。

```
private int FloatToX(float f){
        return (int)((float)this.Width*f);
    } 
```

示例是`FloatToX(0.5)` **0.5x10**将返回一个整数值**5**

```
//inside the function
    (int)((float)this.Width*f) => (int)((float)10*0.5)
//x = zy 
```

在数学上它只是

得到 z

```
z = x/y 
```

得到 x

```
x = zy 
```

得到你

```
y = x/z 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:36:48.470

这是简单的数学：

```
float floatValue = (float)(x / (float)this.Width);
int cursorX = floatValue * this.Width; 
```

编辑：将浮点值视为百分比。它的范围从 0 到 1，相当于 0-100%。x 坐标的浮点版本只是宽度的百分比：

```
0%   width   100%
+-------------+
|             |
|        80%  |
|         X   |
|             |
+-------------+ 
```

因此，要获取原始坐标，您将宽度乘以百分比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:43:21.923

让我们说 this.Width 现在为 Y

转换后的值（0.01234567）为 Z

所以你正在做的是

```
z=x/y 
```

你想要的是x，这次你有Z

```
Z*Y=X 
```

# android - Android：静态 Arraylist 在服务中变空

> ID：15287409
> 
> 赞同：2
> 
> 时间：2013-03-08T05:34:55.510
> 
> 标签：android, android-service, android-4.0-ice-cream-sandwich

我在服务文件 (backgroundService.java) 中声明了一个**静态 Arraylist**变量。收到推送消息（使用 GCM）后，我正在更新静态变量。我正在使用 4.0.4 设备（三星 S3）.. 静态变量变为空，一旦我的应用程序进入后台，然后如果我长按 memu 按钮并滑动我的应用程序（一旦我们滑动应用程序完成但不强制停止)，服务暂停了一段时间，然后再次启动，即服务的 onDestroy 方法没有被调用，而是在该暂停之后 OnCreate 方法。**在该暂停之后，静态 ArrayList 变为空。如何解决？我不希望我的静态 Arraylist 失去它的价值..**

此问题仅出现在 Android 4.0+ 设备中。

```
public class BackgroundService extends Service 
```

{ 私人计时器计时器 = 新计时器（）；

```
Context mContext;

String LOG_TAG=BackgroundService.class.getSimpleName();
    ApplicationInfo ai;
    private static boolean isRunning = false; 
public static ArrayList<String> mDMPush=new ArrayList<String>();

@Override
public void onCreate() 
{
      super.onCreate();
      Log.e(LOG_TAG,"on create ");
      isRunning = true; 

}

@Override
public void onStart(Intent intent, int startId) {

    super.onStart(intent, startId);  

    Log.e(LOG_TAG,"mDMPush"+mDMPush);

    Log.e(LOG_TAG,"mDMPush outside if else "+mDMPush.size()+"   "+mDMPush.isEmpty());
            startService();

}

public static boolean isRunning() 
{ 
    return isRunning; 
} 

private void startService()
{        
   int delay = 100;
   int period =500;
final PackageManager pm = getPackageManager();

   timer.scheduleAtFixedRate(new TimerTask() {
       public void run() 
       {

        ActivityManager am = (ActivityManager) mContext.getSystemService(Activity.ACTIVITY_SERVICE);
        String packageName = am.getRunningTasks(1).get(0).topActivity.getPackageName();
        try {
                 ai = pm.getApplicationInfo(packageName, 0);
                 if ((ai.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {

                       **Iam doing an action inside this timer using that arraylist mDMPush.. I ll add value to the arraylist once i received a push***              

                 }
           } catch (NameNotFoundException e) {
                 // TODO Auto-generated catch block
                 e.printStackTrace();
           }

       }
     }, delay, period);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:47:20.050

这就是您必须将数组列表保存在持久性存储中的方式

```
 Set<String> localStore = new HashSet<String>();
            List<String> list = new ArrayList<String>();
    localStore.addAll(list);
    SharedPreferences ssidPref = getSharedPreferences("ssidPref", Context.MODE_PRIVATE);
                SharedPreferences.Editor EDITIOR = ssidPref.edit();
                EDITIOR.putStringSet("ssidStored", localStore);
                EDITIOR.commit(); 
```

读书

```
localStore = ssidPref.getStringSet("ssidStored", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:38:41.627

看起来您的应用程序进程正在被杀死并重新创建，这在 Android 上是很正常的事情。您不应该依赖静态状态，将其保存到更持久的存储中，例如首选项或数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:40:28.040

您应该查看此页面以找到更好的方法来实现数组列表的存储[Android Persistent Storage](http://developer.android.com/guide/topics/data/data-storage.html)

# python - 调用诱变函数时子线程冻结，直到脚本结束，没有错误

> ID：15287411
> 
> 赞同：0
> 
> 时间：2013-03-08T05:35:07.810
> 
> 标签：python, multithreading

所以我正在用python开发一个音乐播放器，当我初始化主窗口时，它会启动一个线程，该线程应该从文件中获取元数据。但相反，它只是在 mutagens File 函数中的第一个导入调用处停止。

当我直接使用 python.exe 执行脚本时，它可以正常工作。但是当我在 c++ 中使用本机 python api 启动脚本时，调用该函数的线程冻结。但是，我可以毫无问题地从主线程调用该函数。

主.cpp：

```
_putenv_s("PYTHONPATH", "python32.zip");

Py_Initialize();
PyRun_SimpleString("import cmw");
Py_Finalize(); 
```

cmw.py：

```
import meta
class MW(QtGui.QMainWindow):
    def __init__(self):
    super().__init__(None)
    ... 
    self.m = meta.Meta()
    self.m.get(lists_of_files) 
```

元.py：

```
import mutagen
class Meta:
    def __init__(self):
        self.q = Queue()
        self.lock = Lock()
        self.result = []

    def get(self, files):
        t = Thread(target=self._work)
        t.daemon = True
        t.start()

        for f in files:
             self.q.put(f)

    def _work(self):
        while True:
            f = self.q.get()
            print(1)
            meta = mutagen.File(f)
            with self.lock:
                self.result.append(meta)
            self.q.task_done()
            print("Done") 
```

诱变剂**初始化**.py：

```
def File(filename, options=None, easy=False):

   print(2)
   if options is None:
       from mutagen.asf import ASF
       ... imports lots of files ...

   print(5) 
```

诱变剂 asf.py：

```
print(3)
... All the code ...
print(4) 
```

输出：

```
1
2 
```

该程序的其余部分工作得很好。没有例外，没有什么。当脚本退出时

```
3
4
5 
```

编辑：通过在 main.cpp 中将导入更改为 exec(open().read()) 来修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:36:19.113

冲调。如果其他人有这个问题。见编辑

# iphone - 为什么数组和字典的值在 json 解析中显示为 null？

> ID：15287413
> 
> 赞同：1
> 
> 时间：2013-03-08T05:35:16.510
> 
> 标签：iphone, json

嗨，我是 iOS 开发的新手。在上面的代码中，我调用了一个 Web 服务，它的响应是 json 格式。我想用该 Web 服务的响应进行 json 解析。

在这里，为什么 json 和 registartion 的值在控制台中显示为 null 请帮助我。

这是我的 WebService.h 文件

```
@interface WebService : NSObject<NSURLConnectionDelegate ,NSURLConnectionDataDelegate> {
NSMutableData *data;
NSArray  * registrationDetail;
}
-(void)callWebService;
@end 
```

这是我的网络 WebService.m 文件

```
@implementation WebService

-(void)callWebService {
NSString *JsonString =[ NSString stringWithFormat:@"http://bia.igreentechservices.com/ws/ws_registration.php?emailid=%@&password=%@&fname=%@&lname=%@&gender=%@&birthdate=%@&mobile=%@&address=%@&emergency_contact_no=%@&other_contact_no_1=%@&other_contact_no_2=%@",emailAdd,pwd,fName,lName,gen,bDate,mobileNum,add,emergencyContactNum,anotherContactNum1,anothercontactNum2]

   UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
   NSURL *url = [NSURL URLWithString:JsonString];
   NSURLRequest *request =[NSURLRequest  requestWithURL:url];
   NSURLConnection *myConnection =[[NSURLConnection alloc] initWithRequest:request delegate:self];
   [myConnection start];
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

 data= [[NSMutableData alloc] init];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData {
[data appendData:theData];
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection {
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
NSString *responseString = [[NSString alloc]
    initWithData:data encoding:NSUTF8StringEncoding];
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];
registrationDetail = [json objectForKey:@"registration"];
NSLog(@"%@",json);
NSLog(@"%@",registrationDetail);
NSLog(@"%@",responseString);
NSLog(@"%@",data); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:38:20.770

可能在您的 URL 字符串中包含一些空格，您必须在空格中添加 %20。您只需添加以下代码行：-

```
JsonString = [JsonString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

您还使用`NSURLConnection`如下方式调用了您的方法：-

```
-(void)callWebService {
NSString *JsonString =[ NSString stringWithFormat:@"http://bia.igreentechservices.com/ws/ws_registration.php?emailid=%@&password=%@&fname=%@&lname=%@&gender=%@&birthdate=%@&mobile=%@&address=%@&emergency_contact_no=%@&other_contact_no_1=%@&other_contact_no_2=%@",emailAdd,pwd,fName,lName,gen,bDate,mobileNum,add,emergencyContactNum,anotherContactNum1,anothercontactNum2]

   UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
   NSURL *url = [NSURL URLWithString:JsonString];
   NSURLRequest *request =[NSURLRequest  requestWithURL:url];
   NSURLConnection *myConnection =[[NSURLConnection alloc] initWithRequest:request delegate:self];

    if(myConnection)
        {
            data=[[NSMutableData alloc]init]; 
        }
        else
        {
            NSLog(@"connection not complet")
        }

}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

    [data setLength: 0];
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [data appendData:data];
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {

    NSLog(@"Error is %@",error);
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection {

    NSString *responseString = [[NSString alloc] initWithData:self.webData encoding:NSUTF8StringEncoding];

    data = nil;
    [connection release];
    [data release];

} 
```

# sql - 如何在 Visual Foxpro 中使用 SQl Select 获取待处理数量

> ID：15287415
> 
> 赞同：0
> 
> 时间：2013-03-08T05:35:28.817
> 
> 标签：sql, select, foxpro, visual-foxpro

我有两张桌子，一张用于购买，另一张用于出售。我想创建一个查询来获取待处理的数量。

前任。在采购订单文件中（存在 2 条记录）

```
OrderID Party Quality Qty.
1       A     AA      10
2       B     BB      5 
```

销售订单文件

```
OrderID Party Quality Qty. PurchaserOrderID
11      A     AA      10   1
12      B     BB      15   2 
```

从查询我想得到以下结果：

```
OrderID Party Quality Qty.
2       B     BB      -10 
```

因为用户输入的数量多于购买量。如果任何采购订单或销售订单的待处理数量为 0。我不想显示这些订单。我只想获取待处理的数量，无论是 + 还是 -。一个采购订单可以有多个销售订单。

对不起，我的英语不好。希望你能尽快帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:21:53.133

尝试这个：

```
SELECT p.OrderID,  p.Party, p.Quality, (p.qty - o.qty) as qty
FROM ordertable AS o
INNER JOIN potable AS p on p.OrderID = o.purchaseOrderID 
```

# java - Java中的iinc是原子的吗？

> ID：15287419
> 
> 赞同：10
> 
> 时间：2013-03-08T05:36:18.003
> 
> 标签：java, jvm, atomic

我知道在没有锁定的情况下，增量操作在 C++ 中不是原子的。

`iinc`JVM 会在其指令执行上添加任何锁吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T05:38:16.613

不，这不对

*   检索 c 的当前值。
*   将检索到的值增加 1。
*   将增加的值存储回 c 中。

[原子性和线程干扰的 Java 文档](http://docs.oracle.com/javase/tutorial/essential/concurrency/interfere.html)

您需要使用`synchronized`关键字或使用`AtomicXXX`方法来确保线程安全。

**更新**：

```
public synchronized void increment() {
    c++;
} 
```

或者

```
AtomicInteger integer = new AtomicInteger(1);
//somewhere else in code
integer.incrementAndGet(); 
```

另请阅读：[Java 中的 iinc 是原子的吗？](https://stackoverflow.com/questions/15287419/is-iinc-atomic-in-java/30269266#30269266)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-15T21:48:44.580

您的问题的答案取决于您是指`IINC`指令，还是其他答案所指的`++`操作员。

在静态或实例字段上使用`++`无非就是获取、递增和设置，因此它*不是*原子的（其他答案更详细地解释了这一点）。

***但***

由于您询问该`IINC` *指令*是否是原子的，因此这不是真正的答案。事实上，这个问题的答案都没有解决*指令*，所有这些似乎都是基于在实例或静态字段上使用的运算符。

* * *

该`IINC`指令*仅对*局部变量进行操作。顾名思义，它们只是*local*，并且只能在非常有限的范围内访问。因此，不可能从另一个线程访问局部变量。这意味着指令是否是原子的并不重要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-08T05:55:29.867

不是它不是，它可能会导致真正的问题。这个测试应该打印 200000000 但它不是由于线程干扰

```
static int n;

public static void main(String[] args) throws InterruptedException {
    Runnable r = new Runnable() {
        public void run() {
            for(int i = 0; i < 100000000; i++) {
                n++;
            }
        }
    };
    Thread t1 = new Thread(r);
    Thread t2 = new Thread(r);
    t1.start();
    t2.start();
    t1.join();
    t2.join();
    System.out.println(n);
} 
```

注意`volatile`不能解决问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T05:39:26.433

不，它不是原子的，字节码可以与其他线程交错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T06:32:27.360

i++ 在 java 中不是原子的。
最好使用

```
AtomicInteger atomic= new AtomicInteger(1); 
```

定义了一些方法，例如

```
atomic.getAndDecrement();
atomic.getAndIncrement();
atomic.decrementAndGet();
atomic.incrementAndGet(); 
```

使用上述方法的任何操作都是原子的。

这个类在`java.util.concurrent.atomic`包下。Java`1.5`为线程安全和线程并发添加了许多特性。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-09-27T22:06:50.487

它不是原子的。这是静态 int 后增量生成的字节码：

```
0 getstatic 18;    // Load value of variable.
3 iconst_1;
4 iadd;
5 putstatic 18;    // Store value. 
```

# google-app-engine - Google App Engine：（Python 2.7）使用 Memcache 和 Datastore 时事务是否工作

> ID：15287422
> 
> 赞同：0
> 
> 时间：2013-03-08T05:36:37.190
> 
> 标签：google-app-engine, transactions, memcached

前几天我发了一个关于事务和幂等性的问题，但没有得到太多回应。

[Google App Engine：（Python）数据存储事务和幂等性](https://stackoverflow.com/questions/15213106/google-app-engine-python-datastore-transactions-and-idempotence)

今天我意识到事务是数据存储的一个特性，但大多数时候我都是从 Memcache 中提取数据，做一堆工作，然后保存回 memcache*和*数据存储。

如果内存缓存中缺少数据，我只会从数据存储中**获取数据。**

在事务中放置一个函数会阻止另一个请求从内存缓存中提取相同的数据吗？

这些示例通常如下所示。

```
Begin Transaction
    Get Data from Datastore
    Do Work on data
    Put data back in Datastore 
```

根据我的代码，很多时候看起来像这样

```
 Begin Transaction
    Get data from Memcache
    if not data:
        Get data from Datastore
    Do work on data
    Put to Memcache
    Put to Datastore 
```

这行得通吗？

事务代码是否足够聪明，可以知道防止整个块同时运行，还是仅在事务函数中从第一个数据存储操作到最后一个数据存储操作的锁定？

是否有可能两个请求从内存缓存中提取相同的数据，完成工作，但**在将数据放回数据存储区时不会发生冲突，**导致后一个请求踩到第一个请求的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T07:01:28.060

不，数据库事务不跨越内存缓存。

另外 - 事务不锁定。他们使用[乐观并发控制](https://developers.google.com/appengine/docs/python/datastore/transactions#What_Can_Be_Done_In_a_Transaction)，在后台每个数据库实体都有一个更新时间，在事务提交时会检查它。如果事务中使用的实体（= 实体组）的更新时间已更改，则事务是脏的并引发异常 - 您需要重复整个事务（这是低级的，我相信 python NDM 会为您完成部分工作） .

因此，要进行事务，您需要在开始时从数据存储中加载数据，以获得事务工作所需的“更新时间”。您的代码可以工作，但不会是事务性的。

# javascript - 如何通过jquery将点击更改为鼠标悬停或悬停？

> ID：15287430
> 
> 赞同：1
> 
> 时间：2013-03-08T05:37:13.593
> 
> 标签：javascript, ajax, jquery, tooltip

我想在鼠标悬停或悬停时显示日期，现在是onclick，我使用工具提示显示数据但我想在鼠标悬停时显示数据，我尝试了很多但没有成功？任何机构都可以提供帮助，将不胜感激，在此先感谢。

这是我的代码，它想在点击时更改为 mouseiver/hover。

```
 <script>
 $(".ajax_link").click(function(e) {

e.preventDefault(); //Stops link from changing the page

var link = $(this).attr('href'); //Gets link url

$.ajax({ //Make the ajax request
  url: link,
  cache: false
}).done(function( html ) { //On complete run tooltip code

    //Display tooltip code goes here, returned text is variable html
    .done(function( html ) { 
        alert("text: " + html);
    });
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:54:21.300

你可以尝试改变这个：

```
$(".ajax_link").click(function(e) { 
```

对此：

```
$(document).on('hover mouseover mouseenter', ".ajax_link", function(e) {
     //e.preventDefault(); //<-------you can take this out no need for this 
```

如果你想停止页面的跳转，那么你可以这样做：

```
$(".ajax_link").click(function(e) {
   e.preventDefault(); // or return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T05:46:34.943

you can use this.It will work for both events.

```
 $('#element').on('hover mouseover', function() {
        ...
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T05:42:44.623

为什么不只是：

```
 <script>
$(".ajax_link").mouseover(function(e) {

e.preventDefault(); //Stops link from changing the page

var link = $(this).attr('href'); //Gets link url

$.ajax({ //Make the ajax request
  url: link,
  cache: false
 }).done(function( html ) { //On complete run tooltip code

//Display tooltip code goes here, returned text is variable html
.done(function( html ) { 
    alert("text: " + html);
});
});
});
</script> 
```

? 是否有某些原因您不能使用 .mouseover？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T05:43:31.747

使用[悬停](http://api.jquery.com/hover/)功能。

```
$('id').hover(function() {
  /* code for mouseover */
}, function() {
 /* code for mouseout */
}); 
```

# c# - C# 基类可以在静态成员中调用子类的构造函数吗？

> ID：15287434
> 
> 赞同：3
> 
> 时间：2013-03-08T05:37:33.703
> 
> 标签：c#, oop

我有一个抽象的泛型类“BaseClass”和一个定义为这样的类“SubClass”：

```
public class SubClass : BaseClass<SubClass> 
```

我想在基类中定义一个静态方法，签名如下：

```
public static T GetSub() 
```

然后在子类上调用它，以便它返回子类的一个实例

```
SubClass sub = SubClass.GetSub(); 
```

GetSub 必须调用 SubClass 的默认构造函数，然后返回实例。

这开始看起来有点疯狂，但我至少很想知道这是否可能。当谈到 C# 的更复杂的 OOP 功能时，我是一个新手，所以我真的只是在黑暗中拍摄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:43:07.863

有可能完成这项工作，但您需要做一些工作。最简单的方法是使这项工作是`T`在`new`声明中给出约束`BaseClass`

```
abstract class BaseClass<T> where T : new() {
  public static T GetSub() {
    return new T();
  }
} 
```

另一种方法是使用`Activator.CreateInstance`

```
abstract class BaseClass<T> {
  public static T GetSub() { 
    return Activator.CreateInstance<T>();
  }
} 
```

虽然这与原始方法在功能上略有不同。该`CreateInstance<T>`方法将只查找无参数构造函数并调用它。事实上，`new T()`调用通常会编译为`Activator.CreateInstance<T>`调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:39:43.230

这行不通。您必须在基类中创建一个虚拟方法，在每个子类中覆盖并使其返回该子类的实例。
或者您可以使用反射调用 GetType() 并使用 Activator 创建适当类型的实例。这样，您只需要基类中的一个方法，但这在速度方面效率较低。

# javascript - 如何获取输入文本的内容？

> ID：15287437
> 
> 赞同：0
> 
> 时间：2013-03-08T05:37:45.327
> 
> 标签：javascript, jquery

我只是想使用输入到脚本中的任何内容`<input type="text">`作为我的脚本的变量。

我试过 .select() .value() .val() 并且它一直返回 undefined 或 null。我正在尝试异步进行，因此页面不必刷新，但它不想按我的意愿工作。

```
$(function() {
    $('#changeDistance').click(function(e) { e.preventDefault();
        console.log('Triggered');
        setDistance = $('#setDistance').select();
        console.log($('#setDistance').select());
        for (var i = 0; i < markersArray.length; i++) {
            markersArray[i].setMap(null);
        }
        for (var i = 0; i < database.length; i++) {
            createMarker(database[i].latitude, database[i].longitude, database[i].markerTitle, initialLocation);
        }

    });
}); 
```

是我尝试使用它的地方

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T05:39:24.900

假设您的输入确实如下：`<input type="text" id="setDistance" />`那么在 jQuery 中获取其值的正确函数是`.val()`.

但是，如果你写，`$("#setDistance").val()`那么我会私刑你。改为使用`document.getElementById('setDistance').value`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T05:40:18.960

首先你需要指定`Id`你的输入标签

用这个

```
$('#inputID').val()` 
```

您需要使用 ID `#`，如果您指定了一个类，那么您需要使用 period`.`
如果您给出类（类被分配给许多属性），那么您将获得数组。所以你需要通过索引访问每个元素

```
$('.classname').each(function() {  
   $(this).val();  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:42:07.600

尝试

```
$("input[id$='setDistance']").val(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T05:43:58.573

您可以通过文本框 id 使用

```
$("#TextboxId").val(); 
```

或者

```
$("input[type='text']").val(); 
```

或者

```
$(".text-classname").val(); 
```

# ruby-on-rails - 我如何在 ruby /rails 中的许多项目之间共享通用模型？

> ID：15287438
> 
> 赞同：2
> 
> 时间：2013-03-08T05:37:52.877
> 
> 标签：ruby-on-rails, ruby

我有 2 个不同的 rails 项目，我想在其中分享我的模型。我怎么能做到这一点？

我正在考虑一个 gem 或子模块。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T09:12:16.267

将通用代码提取到 gem 中，或者至少提取到库结构（可能在 /lib ...）中，您可以将其隔离并手动包含到您的两个项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:09:32.563

我想当你说共享模型时，你暗示`activerecord`模型。您可以创建指向文件夹的符号链接。[或者在 2 个 Rails API 之间的共享模型（单独的应用程序）](https://stackoverflow.com/questions/10487805/share-models-between-2-rails-apis-separate-applications)中提出了类似的问题

# java - 导出到excel并显示图表

> ID：15287440
> 
> 赞同：1
> 
> 时间：2013-03-08T05:38:00.240
> 
> 标签：java, jsp, jfreechart, jexcelapi

我正在开发这个应用程序，它需要我提供一个选项来导出到 excel 并根据用户的选择在 excel 中生成图形。现在我使用了 JExcel 和 JFreechart 的组合来生成 excel 表和显示图形。我无法做的是为特定列生成图形，因为我需要提供单元格范围。

因此，还有其他替代方法可以做到这一点吗？我需要编写通用代码来显示数据和图形，以便它适用于所有类型的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-25T10:02:57.767

```
index.php
 <html>
  <head>
  </head>
  <body>
  <form action="" method="POST" enctype="multipart/form-data">
    <input type="file" name="upload" value="">
    <input type="submit" value="submit" name="submit">
  </form>

    <?php

    if(isset($_POST['submit']))
    { 
      require_once 'dbConfig.php';
      require_once 'excel_reader/excel_reader.php';
      $excel = new PhpExcelReader();

        $file = $_FILES['upload']['tmp_name'];
        $excel->read($file); 
        // echo '<pre>';print_r($excel);
        // echo '<pre>';print_r($excel->sheets[0]['cells']);
         //echo '<pre>'; print_r($excel->sheets[0]['numCols']);
         //echo '<pre>'; print_r($excel->sheets[0]['numRows']);
        //echo '<pre>'; print_r($excel->sheets[0]['cells'][2][1]);

         $coloms=$excel->sheets[0]['numCols'];
         $rows=$excel->sheets[0]['numRows'];
        //  $cell = $excel->sheets[0]['cells'][$j][$i] ;

      for($i=3;$i<=$rows;)
      {
      for($j=1;$j<=$coloms;)
      {
          $cell = ($excel->sheets[0]['cells'][$i][$j]);
          $j++;

        }
            $name = ($excel->sheets[0]['cells'][$i][1]) ;

            $roll_no = ($excel->sheets[0]['cells'][$i][2]);

            $hobbies = ($excel->sheets[0]['cells'][$i][3]) ; 

          $i++;
          //echo $name;
          //echo $roll_no;
          //echo $hobbies;
          echo  $r = "INSERT INTO fileupload(name,roll_no,hobbies) VALUES('".$name."','".$roll_no."','".$hobbies."')";
          $result = mysqli_query($con,$r);

        }
       echo "<script>alert('Inserted Successfully');window.location.href = 'upload.php'</script>";

      }

    ?>
  </body>
</html>

upload.php

<table width="80%" border="1">
    <tr>
    <td>Name</td>
    <td>Roll no</td>
    <td>Hobbies</td>

    </tr>
 <?php

 require_once 'dbConfig.php';
 $sql="SELECT name,roll_no,hobbies FROM fileupload";
 $result_set=mysqli_query($con,$sql);?>

    <?php
   $hobbies='';
 while($row=mysqli_fetch_array($result_set))
 {  

  ?>

        <tr>
        <td><?php echo $row['name']; ?></td>
        <td><?php echo $row['roll_no']; ?></td>
        <td><?php $hobbies.=$row['hobbies'].','; echo $row['hobbies'];?></td>
        </tr>
        <?php

 }

 $hobbies= explode(',',rtrim($hobbies,','));
 $hobbies= array_count_values($hobbies);

 foreach ($hobbies as $key => $value) 
 {
    $key .'-'.$value.'<br>';
    }
    ?>

<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

      // Load Charts and the corechart and barchart packages.
      google.charts.load('current', {'packages':['corechart']});

      // Draw the pie chart and bar chart when Charts is loaded.
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {

        var data = google.visualization.arrayToDataTable([
         ['Task', 'Hours per Day'],
         <?php 

         foreach ($hobbies as $key => $value) 
          {?>

          ['<?php echo $key ;?>',<?php echo $value;?>],
         <?php }?>

        ]);

        var piechart_options = {title:'Activities',
                       width:400,
                       height:300};
        var piechart = new google.visualization.PieChart(document.getElementById('piechart_div'));
        piechart.draw(data, piechart_options);

        var barchart_options = {title:'Activities',
                       width:400,
                       height:300,
                       legend: 'none'};
        var barchart = new google.visualization.BarChart(document.getElementById('barchart_div'));
        barchart.draw(data, barchart_options);
         var chart = new google.visualization.ImageLineChart(document.getElementById('chart_div'));

        chart.draw(data,linechart_options );
      }
</script>
<body>
    <!--Table and divs that hold the pie charts-->
    <table class="columns">
      <tr>
        <td><div id="piechart_div" style="border: 1px solid #ccc"></div></td>
        <td><div id="barchart_div" style="border: 1px solid #ccc"></div></td>
        <td><div id="chart_div" style="border: 1px solid #ccc"></div></td>
      </tr>
    </table>
  </body>
</html> 
```

# scrapy - 如何在scrapy中手动执行请求对象？

> ID：15287448
> 
> 赞同：3
> 
> 时间：2013-03-08T05:38:41.567
> 
> 标签：scrapy

我正在尝试使用 scrapy 下载仅 HTML 的网站。我正在使用 CrawlSpider 类来实现这一点。这是我的解析器的样子。我的爬虫下载页面的 HTML 源代码并制作网站的本地镜像。它成功地镜像了网站，但没有图像。要下载附加到每个页面的图像，我尝试添加：

```
def parse_link(self, response):
        # Download the source of the page

        # CODE HERE

        # Now search for images

        x = HtmlXPathSelector(response)
        imgs = x.select('//img/@src').extract()

        # Download images

        for i in imgs:
            r = Request(urljoin(response.url, i), callback=self.parse_link)
            # execute the request here 
```

在[Scrapy's Documentation](http://doc.scrapy.org/en/latest/topics/request-response.html)的示例中，解析器似乎返回了 Request 对象，然后执行该对象。

有没有办法手动执行请求，以获得响应？我需要为每个 parse_link 调用执行多个请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:37:46.100

[您可以使用图像](http://doc.scrapy.org/en/latest/topics/images.html)管道下载图像。或者，如果您想手动执行请求，请使用`yield`：

```
def parse_link(self, response):
    """Download the source of the page"""

    # CODE HERE

    item = my_loader.load_item()

    # Now search for images

    imgs = HtmlXPathSelector(response).select('//img/@src').extract()

    # Download images

    path = '/local/path/to/where/i/want/the/images/'
    item['path'] = path

    for i in imgs:
        image_src = i[0]
        item['images'].append(image_src)
        yield Request(urljoin(response.url, image_src),
                callback=self.parse_images,
                meta=dict(path=path))

    yield item

def parse_images(self, response):
    """Save images to disk"""

    path = response.meta.get('path')

    n = get_the_filename(response.url)
    f = open(path + n, 'wb')
    f.write(response.body) 
```

# javascript - 使用在文本框中输入的子属性获取 xml 元素属性值

> ID：15287460
> 
> 赞同：0
> 
> 时间：2013-03-08T05:39:55.060
> 
> 标签：javascript, jquery, xpath

这是我的 XML 文件：-

```
<products>
  <product_id value="1">
    <tab_id value="351">
      <tab_name value="test1" />
      <region_timezone value="1" />
      <registrationstatus value="2" />
      <eventstatus value="2" />
      <dist_activity value="5,10068,10070" />
      <reg_str_dt value="2013-01-14 20:35:00" />
      <reg_end_dt value="2013-01-14 20:35:00" />
    </tab_id>
  </product_id>
  <product_id value="2">
    <tab_id value="352">
      <tab_name value="test2" />
      <region_timezone value="1" />
      <registrationstatus value="2" />
      <eventstatus value="2" />
      <dist_activity value="5,10069,10070" />
      <reg_str_dt value="2013-02-14 20:39:00" />
      <reg_end_dt value="2013-02-14 20:39:00" />
    </tab_id>
  </product_id>
</products> 
```

这是功能：-

```
function get_list(){
    xmlDoc = $.parseXML( xml ),
    $xml = $( xmlDoc ),
    $title = $xml.find('[value="'+$('#select').val()+'"] *');
    var str='';
    $title.each(function(){
        str+=$(this).attr('value')+' ';
    });
    $("#result").html(str);
} 
```

这是 HTML 代码：-

```
<input type="text" id="select">
<input type="button" name="button" value="Search" onclick="get_list()" >
<div id="result">
</div> 
```

这里我有一个文本框
在文本框中输入 xml 文件 EG 的任何子属性值：-

```
first text box:- Dist_activity(tag name)
second textbox:- 5(attr value) 
```

然后单击按钮搜索并显示第一个元素值 EG：-

```
in div "Result":- 1(is product_id value) 
```

在这里可以使用 xpath 和 xquery 然后对我来说最好的其他也是。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:10:03.083

像这样的东西怎么样：

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        var xml;
        $.get(
        "SOXml_Converted.xml",
        null,
        function (data) {
            xml = data;
        },
        "xml"
    );
        function get_list() {
            var elName = $('#select').val();
            var value = $('#value').val();
            var xPath = '//*[local-name() = "' + elName + '" and ' +
                            ' contains(concat(@value, ","), "' + value  + ',")]' + 
                            '/../../@value';

            var iterator = xml.evaluate(xPath, xml.documentElement, null,
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
            var thisNode = iterator.iterateNext();
            var str = '';
            while (thisNode) {
                if (str) {
                    str += ', ';
                }
                str += thisNode.textContent;
                thisNode = iterator.iterateNext();
            }

            $("#result").text(str);
        }
    </script>
</head>
<body>
    <input type="text" id="select">
    <input type="text" id="value">
    <input type="button" name="button" value="Search" onclick="get_list()">
    <div id="result">
    </div>
</body>
</html> 
```

当然，这不会找到任何值为“Dist_activity”和“5”的东西，因为没有名为“Dist_activity”的`dist_activity`元素，甚至没有值为 5 的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:39:20.523

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
var xml;
$.get(
    "xml_converted.xml",  
    function(data) { xml=data; },
    "html"
);
function get_list(){
    var xPath = '//*[local-name() = "' + $('#select').val() + '" and @value = "' +
            $('#value').val() + '"]/..';
var iterator = document.evaluate(xPath, documentNode, null, 
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null );
var thisNode = iterator.iterateNext();
var str = '';
while (thisNode) {
   str += thisNode.textContent ;
   thisNode = iterator.iterateNext();
 } 

    $("#result").html(str);
}
</script>

</head>
<input type="text" id="select">
<input type="text" id="value">
<input type="button" name="button" value="Search" onclick="get_list()" >
<div id="result">
</div>
</html> 
```

# php - MySQL '=' 运算符不返回结果

> ID：15287467
> 
> 赞同：1
> 
> 时间：2013-03-08T05:40:42.047
> 
> 标签：php, mysql, sql

我有一个数据库，其中有一个电子邮件字段等。

当我执行 SELECT 语句时：

```
SELECT * FROM table_name WHERE email = 'abcd@gmail.com'; 
```

...它返回一个空集，即使我可以看到表中的条目。

当我使用相同的语句时：

```
SELECT * FROM table_name WHERE fname = 'abcd'; 
```

可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:45:43.323

`trim`在您的查询中使用

```
SELECT * FROM table_name WHERE TRIM(`email`) = 'abcd@gmail.com'; 
```

[http://sqlfiddle.com/#!2/90a95/3](http://sqlfiddle.com/#!2/90a95/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:16:25.320

经过一个小但意外的改变后，我让它工作了。

我的旧 PHP 查询是这样的： `$res = mysql_query("SELECT * FROM books WHERE email = '$email'");`

我的新查询和更改查询如下所示： `$res = mysql_query("SELECT * FROM books WHERE email = ' $email'");`

出于某种原因，我认为 mysql_real_escape_string() 在开头添加了一个额外的空格，这在 PHPMyAdmin 中是不可见的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:42:38.370

也许存储在 MySQL 中的条目中有一些空格，检查存储的电子邮件是否与没有任何空格或意外字符的完全一样。您也可以尝试以下方法来确认这一点

```
 SELECT * FROM table_name WHERE email LIKE '%abcd@gmail.com%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T05:42:41.130

你确定你没有额外的空间？尝试使用`LIKE`子句

```
SELECT * FROM table_name WHERE email LIKE '%abcd@gmail.com%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T05:45:55.833

该条目是否包含额外的空格（制表符等）？您可以尝试：

```
SELECT * FROM table_name WHERE email LIKE 'abcd@gmail.com%' 
```

和

```
SELECT * FROM table_name WHERE email LIKE '%abcd@gmail.com' 
```

看看是不是这样

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T05:49:53.363

在查询中使用修剪。它不会考虑空格。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T05:53:24.967

试试这个并检查您是否获得 abcd@gmail.com 的结果。

```
 SELECT * 
  FROM table_name 
  WHERE email LIKE '%abcd@%' 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-08T05:46:17.913

try below code. thinks it will help you.

```
SELECT * FROM table_name WHERE `email' = 'abcd@gmail.com'; 
```

# ruby-on-rails - 使用 Rails 进行局部渲染

> ID：15287468
> 
> 赞同：1
> 
> 时间：2013-03-08T05:41:22.083
> 
> 标签：ruby-on-rails

render(:partial=> "test" ...) 中的 render(test) 等价物是什么？

我相信它是 render(:partial=>"test", :collection=> test)，但这似乎不适用于我的应用程序。

`render(test)`工作正常，但`render(:partial=>"test", :collection=> test)`不工作。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:45:55.900

你打电话时

```
render partial: "test", collection: test 
```

有一个期望

*   您有一个文件在与调用`_test.html.erb`视图模板相同的目录中命名`render`
*   `:collection`值是可枚举的
*   在`_test.html.erb`您使用`test`变量来处理`test`集合中的项目

`test`部分文件中的变量以文件名`test`命名`_test.html.erb`，**而不是**集合变量`test`或其模型实例类名。

我建议阅读有关**渲染集合的**[布局和渲染](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-collections)指南。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T06:04:17.093

它不起作用的原因是它不需要集合参数；最后，这是有效的：

```
render(:partial=>"test", :locals=> {:test=> test}) 
```**

# installation - 如何从 Installshield 中的 Basic MSI 项目修复 .Net Framework？

> ID：15287469
> 
> 赞同：0
> 
> 时间：2013-03-08T05:41:34.720
> 
> 标签：installation, installshield

我正在为一个 WPF 应用程序在 installshield 中开发基本的 MSI 项目。

我已经为 .Net Framework 添加了先决条件，但是这个先决条件会根据 .Net 的注册表值安装 .Net 框架。

但我的问题是，如果 .Net Framework 在用户的机器上损坏，那么我如何检测它是否损坏以及如何在安装时修复它。

请尽快建议我解决此问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:47:28.460

Windows Installer 有一个互斥锁，它强制每台机器安装一次。因此，即使您有代码来检测损坏的框架，您也无法开始修复。

无论如何，这个要求的起源是什么？如果用户的框架损坏，IMO 不应该是您的问题。将他们指向验证工具并让他们弄清楚。

# delphi - 如何随机选择一个范围内的所有数字？

> ID：15287470
> 
> 赞同：-3
> 
> 时间：2013-03-08T05:41:35.363
> 
> 标签：delphi, list, pascal

在帕斯卡中，我想随机选择一个 1 到 50 之间的数字，它会进入一个循环。每次选择一个数字时，都会删除该数字，直到最终没有 1 到 50 之间的数字可供选择，循环结束。

在 Pascal/Delphi 中是如何完成这样的事情的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T05:53:39.230

这一定很容易。

1.  您从 1 到 50 的数字数组开始
2.  在每次迭代中，您选择一个介于 1 和数组元素数之间的随机数
3.  你从数组中取出那个元素
4.  转到第 2 步，直到数组中没有更多元素为止。

在代码中，它可能如下所示：

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

const
  ARRAY_ELEMENTS = 50;

var
  SourceArray: array of Integer;
  Element: Integer;
  ValidElements: Integer;
begin
  Randomize;
  try
    //array initialization
    SetLength(SourceArray, ARRAY_ELEMENTS);
    for Element := Low(SourceArray) to High(SourceArray) do
      SourceArray[Element] := Element + 1;
    ValidElements := ARRAY_ELEMENTS;
    repeat
      //select a random element
      Element := Random(ValidElements);
      Writeln(SourceArray[Element]);
      //remove the element from the array
      SourceArray[Element] := SourceArray[ValidElements - 1];
      Dec(ValidElements);
    until ValidElements = 0;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  readln;
end. 
```

**在评论后进行编辑**，通过将最后一个数组元素与戳过的元素交换来提高性能。

### 列表示例

我没有注意到您的[列表](/questions/tagged/list "显示标记为“列表”的问题")标签，所以这是一个列表示例：

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils,
  Generics.Collections;

const
  LIST_ELEMENTS = 50;

var
  I: Integer;
  Element: Integer;
  SourceList: TList<Integer>;
begin
  Randomize;
  try
    SourceList := TList<Integer>.Create();
    try
      for I := 1 to LIST_ELEMENTS do
        SourceList.Add(I);
      repeat
        Element := Random(SourceList.Count);
        Writeln(SourceList[Element]);
        SourceList.Delete(Element);
      until SourceList.Count = 0;
    finally
      SourceList.Free;
    end;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  readln;
end. 
```

# intellij-idea - 重置 IntelliJ 重构默认值

> ID：15287476
> 
> 赞同：0
> 
> 时间：2013-03-08T05:42:16.787
> 
> 标签：intellij-idea, refactoring

我在 IntelliJ 的方法重命名功能上设置了一些默认值 [特别是“重命名字符串用法”]，这让我很痛苦。

如何删除这些默认值？我在项目设置中找不到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:14:32.533

使用`Refactor`| `Rename`两次键盘快捷键以获取带有选项的对话框：

![改名](../Images/fe441b8dc705faf245a3454635ca3188.png)

请注意弹出窗口底部的提示。

# c# - 套接字连接被中止

> ID：15287481
> 
> 赞同：0
> 
> 时间：2013-03-08T05:42:34.057
> 
> 标签：c#, wcf

我有一个 WCF 服务，它作为 Windows 服务托管，由客户端通过代理类调用。代理类中的方法如下所示：

```
 public CustomerResponse GetCustomers(CustomerRequest request)
    {
        try
        {
            return Channel.GetCustomers(request);
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

GetCustomer 目前从我的数据库中返回了大约 1000 条记录。问题是这样的：

1.  我已经在 4 台不同的 PC 上运行了我的程序，我只在其中 2 台上遇到了这个错误。其他2个都很好，都具有相同的设置

2.  在有此问题的 2 台 PC 上，当我将数据库中的客户记录数从 1000 条降低到 200 条时，问题就解决了。

3.  我已经在配置文件中使用了我知道的所有设置

这是异常消息

套接字连接被中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或者是潜在的网络资源问题造成的。本地套接字超时为“00:00:59.9863281”。

我很确定这不是超时问题，因为异常会在不到一秒的时间内返回。

这是我在服务器上的配置文件

```
<services>
  <service name="CustomerService" behaviorConfiguration="DefaultBehaviour">
    <endpoint address="CommonService" binding="netTcpBinding" bindingConfiguration="customTcpBinding"
      contract="ICustomerService">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>       
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:8542/CustomerService" />
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="DefaultBehaviour">

      <serviceMetadata httpGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

这是 MVC 项目的配置文件

```
<bindings>
      <netTcpBinding>
        <binding name="customTcpBinding" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647">
          <security mode="None"/>
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
        </binding>
      </netTcpBinding>
    </bindings>

    <endpoint address="net.tcp://localhost:8542/CustomerService" binding="netTcpBinding" bindingConfiguration="customTcpBinding" contract="ICustomerService" name="NetTcpBinding_CustomerService">
        <identity>
          <dns value="localhost"/>
        </identity>
    </endpoint> 
```

# python - Python 代码在函数中运行得更快是真的吗？

> ID：15287488
> 
> 赞同：8
> 
> 时间：2013-03-08T05:42:51.870
> 
> 标签：python, performance, profiling, benchmarking, cpython

我看到一条评论让我想到了[为什么 Python 代码在函数中运行得更快？](https://stackoverflow.com/questions/11241523/why-does-python-code-run-faster-in-a-function).

我开始思考，并想我会使用[`timeit`](http://docs.python.org/2/library/timeit.html)库自己尝试，但是我得到了非常不同的结果：

（**注意**：`10**8`已更改为`10**7`使时间更快一些）

```
>>> from timeit import repeat
>>> setup = """
def main():
    for i in xrange(10**7):
        pass
"""
>>> stmt = """
for i in xrange(10**7):
    pass
"""
>>> min(repeat('main()', setup, repeat=7, number=10))
1.4399558753975725
>>> min(repeat(stmt, repeat=7, number=10))
1.4410973942722194
>>> 1.4410973942722194 / 1.4399558753975725
1.000792745732109 
```

*   我使用`timeit`正确吗？
*   为什么这些结果彼此相差不到 0.1%，而另一个问题的结果却相差近 250%？
*   只有在使用~~CPython~~编译的 Python 版本（如 Cython）时才会有区别吗？
*   最终：Python 代码在函数中**真的**更快，还是仅仅取决于你如何计时？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T07:00:57.720

你的测试中的缺陷是`timeit`编译你的代码的方式`stmt`。它实际上是在以下模板中编译的：

```
template = """
def inner(_it, _timer):
    %(setup)s
    _t0 = _timer()
    for _i in _it:
        %(stmt)s
    _t1 = _timer()
    return _t1 - _t0
""" 
```

因此`stmt`实际上是在一个函数中运行，使用`fastlocals`数组（即`STORE_FAST`）。

这是您在问题中的函数与在函数中执行`f_opt`的未优化编译的测试：`stmt``f_no_opt`

```
>>> code = compile(stmt, '<string>', 'exec')
>>> f_no_opt = types.FunctionType(code, globals())

>>> t_no_opt = min(timeit.repeat(f_no_opt, repeat=10, number=10))
>>> t_opt = min(timeit.repeat(f_opt, repeat=10, number=10))
>>> t_opt / t_no_opt
0.4931101445632647 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:51:39.373

它归结为编译器优化算法。在执行即时编译时，如果在函数中找到经常使用的代码块，则更容易识别它们。

效率增益实际上取决于正在执行的任务的性质。在您给出的示例中，您实际上并没有做任何计算密集型的事情，通过优化实现效率提升的机会更少。

然而，正如其他人指出的那样，CPython 不进行即时编译。然而，在编译代码时，C 编译器通常会更快地执行它们。

查看有关 GCC 编译器的文档：http: [//gcc.gnu.org/onlinedocs/gcc/Inline.html](http://gcc.gnu.org/onlinedocs/gcc/Inline.html)

# node.js - Promise-IO seq，我做错了什么？

> ID：15287495
> 
> 赞同：1
> 
> 时间：2013-03-08T05:43:29.557
> 
> 标签：node.js, synchronization, promise

这可能是一个糟糕的问题，但我正在尝试将 Promise-IO 与 nodeJS 一起使用。我正在尝试使用 seq 函数。我有以下类似的东西。

```
seq = require("promised-io/promise").seq,

var functions= new Array(function1, function2);
seq(functions, startingDataObject) 
```

在function1中，我有如下内容。

```
function function1(startingDataObject) {

    var deferred = new Deferred();
    when(function3(startingDataObject),
        function (returnedData) {
            //Some logic
            deferred.resolve(returnedData);
        },
        function (err) {
            console.log(err);
            throw err;
        });
    deferred.promise;
} 
```

我看到发生的是function2在deferred.promise之后立即被解雇。我不确定我的谷歌技能是否缺乏，但我似乎没有看到很多关于如何使用这种方法的例子。所以我的问题是如何使用 Promise-IO 进行同步顺序调用。

[https://github.com/kriszyp/promised-io#seq](https://github.com/kriszyp/promised-io#seq)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:29:47.593

发现问题。我错过了 function1 中的 return deferred.promise。上面的示例完美运行。

# python - 将时间序列的时间精度降低到毫秒

> ID：15287496
> 
> 赞同：1
> 
> 时间：2013-03-08T05:43:31.057
> 
> 标签：python, pandas

解析数据文件时，我有几秒钟的时间：

```
1.296999421 
```

目前在熊猫中显示如下：

```
<Timestamp: 2011-04-16 00:00:01.296999> 
```

dtype 为 'datetime64[ns]' 但我知道原始测量只有毫秒精度。

是否可以生成仅使用毫秒精度的熊猫时间序列？我的目标之一是根据毫秒计数器精确加入不同的时间序列。

所以我只想拥有

```
<Timestamp: 2011-04-16 00:00:01.297> 
```

这样我就可以在其他时间序列中精确匹配这个时间戳。

换句话说，是否有“日期时间 [ms]”，如何将非顺序时间戳转换为它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:39:03.903

HYRY解决方案是对的，但是pandas不知道怎么处理

使用最新的 pandas 0.11-dev，timedeltas 现在得到全面支持

[http://pandas.pydata.org/pandas-docs/dev/timeseries.html#time-deltas](http://pandas.pydata.org/pandas-docs/dev/timeseries.html#time-deltas)

```
In [25]: a = np.random.rand(8)*10

In [26]: a.sort()

In [27]: a
Out[27]: 
array([ 0.72062151,  1.02039858,  2.07877837,  3.94256869,  5.5139672 ,
    6.80194715,  6.83050498,  8.63027672])

# trick is to pass a nanosecond value directly
# pandas keeps all values internally as timedelta64[ns]
In [5]: pd.Series((np.round(a*1000)/1000)*1e9,dtype='timedelta64[ns]')
Out[5]: 
0   00:00:00.721000
1   00:00:01.020000
2   00:00:02.079000
3   00:00:03.943000
4   00:00:05.514000
5   00:00:06.802000
6   00:00:06.831000
7   00:00:08.630000
dtype: timedelta64[ns] 
```

如果你需要这个作为时间戳

```
In [8]: pd.Series((np.round(a*1000)/1000)*1e9,dtype='timedelta64[ns]') + pd.Timestamp('20110406')
Out[8]: 
0   2011-04-06 00:00:00.721000
1   2011-04-06 00:00:01.020000
2   2011-04-06 00:00:02.079000
3   2011-04-06 00:00:03.943000
4   2011-04-06 00:00:05.514000
5   2011-04-06 00:00:06.802000
6   2011-04-06 00:00:06.831000
7   2011-04-06 00:00:08.630000
dtype: datetime64[ns] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:06:54.230

不知道你是怎么转`1.296999421`的`<Timestamp: 2011-04-16 00:00:01.296999>`。我认为您可以通过以下步骤创建一个 datetime64[ms] 数组：

```
a = np.random.rand(100)*10
a.sort()
t = np.array(np.round(a*1000), dtype="timedelta64[ms]") + np.datetime64("2012-03-01") 
```

然后您可以将`t`其用作 DataFrame 的索引。Pandas 会将其转换为`timedelta64[ns]`.

# arrays - 需要帮助在 Matlab 中调试此代码

> ID：15287500
> 
> 赞同：0
> 
> 时间：2013-03-08T05:43:45.820
> 
> 标签：arrays, debugging, matlab, cell, combinations

我有以下代码

```
B=[1 2 3; 10 20 30 ; 100 200 300 ; 500 600 800];
A=[100; 500; 300 ; 425];
SA = sum(A);
V={}; % number of rows for cell V = num of combinations -- column = 1                
n = 1;
 arr =  zeros(1,length(B))
for k = 1:length(B)                    
    for idx = nchoosek(1:numel(B), k)'  
       rows = mod(idx, length(B))
       if ~isequal(rows, unique(rows)) %if rows not equal to unique(rows)
           continue  %combination possibility valid      
       end %Ignore the combination if there are two elements from the same row 
       B_subset = B(idx)
       if (SA + sum(B_subset) <= 3000) %if sum of A + (combination) < 3000
           rows( rows==0 )=4
           arr(rows) = B_subset(:)
           V(n,1) = {arr}
           n = n + 1
            arr =  zeros(1,length(B))
        end
    end
end 
```

如果 A 和 B 的某些值之和小于 3000，则这些组合应该是有效的。

我的代码的问题是， B 的最后一个值 ,`B(3,3)`在代码中只占一次。

如果您运行代码，您会注意到第 12 行包含一个`V`包含`[0;0;0;800]`的单元格。但还有其他可能的组合，例如`[1;0;0;800]`. 但是`SA + (1 + 800) < 3000`，代码不会打印出这种可能性。

我不知道为什么，有人可以帮我调试一下并找出为什么会跳过某些组合吗？特别是`B(3,3)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:56:12.310

我怀疑这条线并没有完全按照你的意图做：

```
if ~isequal(rows, unique(rows)) 
```

相反，试试这个：

```
if ~isequal(length(rows), length(unique(rows))) 
```

# python - 叶子和内部函数

> ID：15287509
> 
> 赞同：1
> 
> 时间：2013-03-08T05:45:02.750
> 
> 标签：python, binary-tree

这个问题是针对学校（家庭作业）的，所以我不是要代码，我也不想要任何代码，只是一个想法。我必须编写一个返回两个列表的函数，一个叶子列表和一个二叉树内部节点列表。我的算法是：

1）如果左右子树都是None，它是叶子，所以我将它添加到叶子列表中。

2）如果它们不存在，那么我将其添加到内部列表中，并调用左子树上的函数，然后调用右子树上的函数，如果它们存在的话。

这是我写的代码：

```
def leaves_and_internals(self):
    leaves = []
    internals = []

    if self.left is None and self.right is None:
        leaves.append(self.item)
    else:     
        internals.append(self.item)
        if self.left != None:
            leaves_and_internals(self.left)
        else:
            leaves_and_internals(self.right)
    return internals, leaves 
```

我很确定算法是正确的，但我认为每次我在节点上递归时，列表都会被重置。我怎样才能解决这个问题？

任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:01:10.507

我没有研究过你的代码的算法，只是对你遇到的问题提出了一个答案。您可以将`leaves`and`internals`作为参数传递给递归函数，以便在递归调用中保留它们的内容。

在 python 中，如果将 a 传递`mutable object`给函数/方法，则函数/方法将获得对该对象的引用。因此，只要您仍然将其视为相同的可变对象（即不直接将参数分配给其他对象），您对对象所做的任何更改对调用者也是可见的。由于`list`是 a `mutable type`，因此此行为对您感兴趣的案例非常有帮助。

并确保在从外部`[]`调用函数之前初始化列表。`leaves_and_internals`

```
def leaves_and_internals(self, leaves, internals):
    if self.left is None and self.right is None:
        leaves.append(self.item)
    else:
        internals.append(self.item)
        if self.left != None:
            leaves_and_internals(self.left, leaves, internals)
        else:
            leaves_and_internals(self.right, leaves, internals)
    return

 # Somewhere outside
 leaves = []
 internals = []
 myobj.leaves_and_internals(leaves, internals) 
```

# 更新：

由于 OP 提到他不能更改方法的签名也不能使用实例变量，这是我能想到的另一种解决方案，它将叶子和内部返回给调用者。顺便说一句，我假设您的树中的某些节点可以同时具有左右，因此您需要同时检查两者（即使用 2 个单独`if`的而不是一个`if...else`）。

```
def leaves_and_internals(self):
    leaves = []
    internals = []
    if self.left is None and self.right is None:
        leaves = [ self.item ]
    else:
        if self.left != None:
            leaves, internals = leaves_and_internals(self.left)
        if self.right != None:
            templeaves, tempinternals = leaves_and_internals(self.right)
            leaves += templeaves
            internals += tempinternals
        internals.append(self.item)
    return leaves, internals 
```

# java - 我的 Java 程序不工作

> ID：15287512
> 
> 赞同：0
> 
> 时间：2013-03-08T05:45:13.407
> 
> 标签：java

我不太擅长编程，也不知道为什么这不起作用。无论我输入什么，它总是直接进入 else 语句。

```
 public void pizzaIntro()
    {
    Scanner user_input = new Scanner(System.in);
    String user_command = "null";
    String apology = "I'm sorry it appears there has been some kind of mistake in your order.";
    System.out.println("Welcome to " + cM + " here we strive to deliver excellent services to all our customers!");
    System.out.println("The current prize for pizza is $" + bP + " and an extra $" + tP + " per topping.");
    System.out.println(); System.out.println();
    while(user_command != "exit")
    {
        System.out.print("Would you like toppings?(yes/no):");
        user_command = user_input.next();
        if(user_command.toLowerCase() == "yes")
        {
            System.out.println("Good Eat Your Pizza.");
        }
        else if (user_command.toLowerCase() == "no")
        {
            System.out.println("Well Ok Then!");
        }
        else
        {
            System.out.println(apology);
            System.exit(1);
        }
    }
    pic1.show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:48:23.740

使用 equals 方法比较字符串。要了解 == 和 equals 之间的区别，请阅读[https://stackoverflow.com/questions/7311451/difference-between-equals-and-instanceof](https://stackoverflow.com/questions/7311451/difference-between-equals-and-instanceof) 您将清楚地了解何时使用什么。

```
while(!(user_command.equals("exit")) {
    System.out.print("Would you like toppings?(yes/no):");
    user_command = user_input.next();
    if(user_command.toLowerCase().equals("yes"))
    {
        System.out.println("Good Eat Your Pizza.");
    }
    else if (user_command.toLowerCase().equals("no"))
    {
        System.out.println("Well Ok Then!");
    }
    else
    {
        System.out.println(apology);
        System.exit(1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:47:34.130

使用`equals`方法而不是 ==

```
user_command.toLowerCase().equals("yes") 
```

在 Java 中， == 总是只比较两个**引用**。可以将其用于原始数据类型。字符串不是原始数据类型。字符串是一个对象。你应该使用equals方法。

在您的情况下，您可以考虑使用`equalsIgnoreCase`忽略案例的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T05:50:47.977

使用`equalsIgnoreCase`. 更安全

```
public void pizzaIntro()
    {
        Scanner user_input = new Scanner(System.in);
        String user_command = "null";
        String apology = "I'm sorry it appears there has been some kind of mistake in your order.";
        System.out.println("Welcome to " + cM
                           + " here we strive to deliver excellent services to all our customers!");
        System.out.println("The current prize for pizza is $" + bP
                           + " and an extra $" + tP + " per topping.");
        System.out.println();
        System.out.println();
        while (!user_command.equalsIgnoreCase("exit"))
        {
            System.out.print("Would you like toppings?(yes/no):");
            user_command = user_input.next();
            if (user_command.equalsIgnoreCase("yes"))
            {
                System.out.println("Good Eat Your Pizza.");
            }
            else if (user_command.equalsIgnoreCase("no"))
            {
                System.out.println("Well Ok Then!");
            }
            else
            {
                System.out.println(apology);
                System.exit(1);
            }
        }
        pic1.show();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T05:51:13.750

永远不要将任何 Java 对象与“==”（仅像 int、long、double 等原语）进行比较。它应该是：

```
if(user_command.toLowerCase().equals("yes")) {
  ...
} 
```

否则，您检查对象的位置是否相同，而不是内容。

在这个特定示例中，您可能只想使用 String.equalsIgnoreCase(...) 代替。

# asp.net - 如何在 Gridview 中执行 Click 事件

> ID：15287513
> 
> 赞同：-2
> 
> 时间：2013-03-08T05:45:23.067
> 
> 标签：asp.net

我采用了 Gridview 并在 Gridview 中采用了图像按钮。

现在我想对该图像按钮执行单击事件。

我怎样才能做到这一点？？

告诉我一些关于使用 Gridview 的点击事件的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:46:07.097

您需要绑定gridView 的[RowCommand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)事件，您不能像使用不在 GridView 中的按钮那样将单击事件绑定到按钮。

*网格视图 html*

```
<asp:GridView id="GridView1" Runat="server" OnRowCommand="GridViewCommandEventHandler" /> 
```

*事件处理程序*

```
void GridView1_RowCommand(Object sender, GridViewCommandEventArgs e)
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:05:56.883

您可以通过双击图像按钮直接在该图像按钮上创建单击事件

或者手动添加

```
<asp:ImageButton id="ImageButton1" Runat="server" OnClick="ImageButton1_Click"/> 
```

在文件后面的代码中，您可以使用

```
void ImageButton1_Click(object sender, ImageClickEventArgs e) 
{
   // you code here...
} 
```

# c - 在 C 副作用中存储指向局部变量地址的指针

> ID：15287516
> 
> 赞同：0
> 
> 时间：2013-03-08T05:45:37.243
> 
> 标签：c

假设我们有以下代码。st 是一个全局堆栈，并已正确初始化。我们调用 foo()

```
struct stack *st;

int foo() {
    int x = 1;
    stack_push(st, &x);
} 
```

现在，堆栈包含一个指向 x 的指针。在 foo 超出范围后，地址 &x 会发生什么？是否已解除分配？我们可以相信，当我们稍后 pop() 堆栈并取消引用它时，该值将是 1？

编辑：这是我目前的想法。由于 x 是在堆栈上分配的，一旦超出范围，任何人都可以使用地址 &x 中占用的内存，因此稍后 pop() 返回的取消引用值可能不是 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:48:23.940

返回点的行为`foo`是未定义的。通常，该值将一直保持到下一个方法调用创建足够大的堆栈来覆盖它。但依赖于此是错误的，不应该这样做。

如果你需要`x`活得更长，`foo`你需要在堆上为它分配内存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:41:48.947

全局堆栈一直持有指向 x 的指针，直到全局堆栈被销毁。但是 foo 超出范围后，x 之前占用的堆栈空间可以被重用。可能是由于 foo() 重新进入，或其他函数调用，或任何其他堆栈空间分配引起的。

# java - 字符串 LinkedList toString() 错误

> ID：15287528
> 
> 赞同：-2
> 
> 时间：2013-03-08T05:46:19.070
> 
> 标签：java, linked-list, tostring

所以我正在构建一个类，它是一个存储为链表的字符串。出于某种原因，每当我尝试打印出一个字符串时，我都会得到一个`NullPointerException`. 这只发生在我尝试打印我在第二个构造函数中复制的字符串时。

```
class Node
{
char c;
Node next;
int index;
}

public class StringLink {

int len;
Node head= new Node();
public StringLink(String init)
{
   head.index=0;
   Node temp= head;
   len=init.length();
   int i=0;
   while (i<this.len)
   {
     Node n= new Node();
     n.c=init.charAt(i);
     n.index=i+1;
     temp.next=n;
     temp=n;
     i++;
   }

}

// constructor -- initialize object with another StringLink    
public StringLink(StringLink other)
{
   Node temp=other.head;
   temp=temp.next;
   len=other.length();
   for (int i=0; i<this.len; i++)
   {
     Node n= new Node();
     n.c= temp.c;
     n.index=i+1;
     if (temp.next!=null){
       temp=temp.next;
       n.next=temp;
     }
     else n.next=null;

   }
} 
```

这是不起作用的 toString() 方法：

```
 public String toString()
{
  char[] narr= new char[this.len];
  Node temp= new Node();
  temp=this.head;
  temp=temp.next;
  System.out.println(temp.c);
  for (int i=0; i<this.len;i++)
  {
    narr[i]=temp.c;
    System.out.println(narr[i]);
    if (temp.next!=null)
      temp=temp.next;

  }
  return new String(narr);

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:56:54.000

在第二个构造函数中，`this.head`永远不会初始化，所以它是`null`. 当您尝试在 中访问它时`toString`，您会遇到 NullPointerException。

实际上，在第二个构造函数中，您似乎构建了只是丢弃的 Node 对象，因为您没有将它们分配给任何东西。你真的应该检查你的逻辑。

# android - 如何在 WebView 的 onReceivedError 方法中将图像设置为背景？

> ID：15287529
> 
> 赞同：1
> 
> 时间：2013-03-08T05:46:19.710
> 
> 标签：android, android-webview

是否可以将图像设置为方法`WebView`的背景`onReceivedError()`？

这对你们有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:00:08.487

这应该工作

```
webView.setBackgroundColor(0);
webView.setBackgroundResource(R.drawable.test2); 
```

# c# - 为什么 e.Row.Cells[2].Text 在 GridView1_RowDataBound 事件中总是显示“”或 null

> ID：15287531
> 
> 赞同：2
> 
> 时间：2013-03-08T05:46:28.477
> 
> 标签：c#, asp.net, gridview

这是我的代码

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow) {
        // DataRow data = ((DataRowView)e.Row.DataItem).Row;
        string ToolTipString = Convert.ToString(e.Row.Cells[2].Text);
        e.Row.Cells[2].Attributes.Add("title", ToolTipString);
        Label MyLabel = (Label)e.Row.FindControl("MyLabel");

        if (ToolTipString.Length < 20) {
            MyLabel.Text = ToolTipString;
        }
        else {
            MyLabel.Text = String.Format("{0}...", ToolTipString.Substring(0, 17));
            MyLabel.ToolTip = ToolTipString;
        }
    }
} 
```

但`Convert.ToString(e.Row.Cells[2].Text);`这里总是给我“”。我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T05:48:38.097

请使用此代码

```
var ToolTipString = Convert.ToString(DataBinder.Eval(e.Row.DataItem, "Column")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T22:42:54.023

通常当列隐藏在网格上时会发生此问题。分两步解决，

1.  而不是使用 Visible="false" 为这样的绑定字段使用 css 类，ItemStyle-CssClass="Column_Hide"

2.  在 css 文件中创建 Column_Hide，

    ```
    .Column_Hide
     {
        display: none;
     } 
    ```

希望你的问题能得到解决

# javascript - 在requirejs模块javascript中的函数内调用函数

> ID：15287537
> 
> 赞同：1
> 
> 时间：2013-03-08T05:47:00.300
> 
> 标签：javascript, requirejs

嗨，伙计们，这可能吗？在 requirejs 模块内的函数内调用函数？TIA

```
define([
'common'
], function(Common) {

return {
    func1: function() {
        return 'this is function 1';
    },

    func2 : function (data){
        console.log(func1);

    }
};
 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T05:52:17.273

您所说的代码将不起作用。我建议将其更改为以下内容：

```
define([
'common'
], function(Common) {

    var exports = {};

    var func1 = exports.func1 = function() {
        return 'this is function 1';
    };

    var func2 = exports.func2 = function (data){
        console.log(func1);
    };

    // A function that is not exported but can be accessed from other code in this module.
    var privateFunc = function() {
    };

    return exports;
}); 
```

我个人认为这种代码风格是干净和灵活的。导出哪些函数很清楚，它们可以使用简单的局部变量名称相互引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:29:02.683

让我们拆分一个 requireJs 模块以了解会发生什么：

让 requireJs 知道这是一个模块

```
define( 
```

一些依赖

```
[ 'common'], 
```

所以这是主要部分。毕竟这只是一个加载时调用的函数。RequireJs 保存函数的结果并将其注入到每个具有该模块作为依赖项的模块中

```
function(Common) {
  return 
```

所以这就是每个模块在需要这个模块时得到的

```
{
    func1: function() {
        return 'this is function 1';
    },

    func2 : function (data){
        console.log(func1);

    }
  }; 
```

因此，在您的情况下，您只返回一个简单的对象，其中包含 2 个函数作为其成员。

您尝试做的事情无法正常工作，因为`func`范围内没有，也就是返回对象的函数。但是你的对象中有一个成员`func`，所以你可以调用`this.func1`.

你也可以在你的函数中有这样的函数：

```
define([
'common'
], function(Common) {

  function func1() {
    return 'this is function 1';
  }
  return {
    func2 : function (data){
        console.log(func1);
    }
  };
}); 
```

但是`func1`从外部无法访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T23:19:00.800

受到 Andreas Köberle 回答的启发，我发现了这个工作，但我几乎可以肯定有更好的方法来做到这一点......

```
define(function(require) {

  function func1() {
    return 'this is function 1';
  }
  return {
    func1: function() {
      return func1();
    },
    func2 : function (data){
        console.log(func1);
    }
  };
}); 
```

这样我们就可以从方法 func1 的内部和外部访问。对我来说效果很好。谢谢。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-12-23T10:07:09.443

以下将起作用...

```
console.log(this.func1()); 
```

您没有正确指定句柄，您必须使用`this`指定 func1 句柄。而且我认为您将要调用`func1()`print`'this is function 1'` 不仅仅是`func1`没有括号，因为它会打印函数定义。

# c - fscanf 和链表的 char *

> ID：15287542
> 
> 赞同：0
> 
> 时间：2013-03-08T05:47:22.653
> 
> 标签：c, linux, struct, linked-list, scanf

```
struct node {
        ...
        char *name;
        ...
        struct node *next;
}; 
```

在递归函数中：

```
head->name = (char *) malloc(sizeof(char));
if (fscanf(fp, "id\t%d\nname\t%s\nmobile\t%lld\n", &head->id, head->name, &head->mobile) > 0) {
    printf("%s\n", head->name); 
```

它存储正确的数据...假设...

鲁特维克

阿比纳夫

但是当打印数据...

```
printf("%d\t%s\t%lld\n", head->id, head->name, head->mobile); 
```

1 路特维克 9876655433

2 导航 1234567789

* * *

让我们暂时搁置 char 指针。代码与结构配合得很好

```
struct node {
...
char name[10];
...
struct node *next; 
```

};

但不是当我取名字**[20]**时，它会影响*long long mobile*的价值......为什么？

输出：

1 鲁特维克 9876655433

2 阿比纳夫 578692242758466

**578692242758466**出乎意料。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:51:52.573

您分配`sizeof(char)`字节，这是一个字节，足够大，可以在字符串末尾放置一个空字节。您阅读使用`%s`which 不受长度限制。

这是堆缓冲区溢出；它通常会导致不快乐。您需要决定要分配多少数据（32、64、4096、其他数量）字节，然后使用格式字符串，例如`%31s`or`%63s`或`%4095s`or 将数据读入其中。

不要忘记检查分配是否成功！

有些人会因为选角而责骂你`malloc()`。如果您使用不接受未声明函数的模式进行编译，那么转换通常没有什么问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T05:50:57.753

这一行：

```
head->name = (char *) malloc(sizeof(char)); 
```

仅分配 1 字节内存。您需要确定最大大小并分配那么多字符：

```
head->name = (char *) malloc(sizeof(char) * MAXNAME); 
```

那么您不妨将结构更改为：

```
struct node {
        ...
        char name[MAXNAME];
        ...
        struct node *next;
}; 
```

更好的选择是保持结构不变，`buffer`使用 scanf 从文件中读取 MAXNAME 大小，然后为名称分配足够的空间：

```
// + 1 for the null character at the end
head->name = (char *) malloc(sizeof(char) * (strlen(buffer) + 1)); 
```

# cdi - 将 ejb 实例注入 servlet，@EJB 注入 null - JBoss6

> ID：15287550
> 
> 赞同：0
> 
> 时间：2013-03-08T05:47:47.957
> 
> 标签：cdi, ejb-3.1, servlet-3.0

我正在使用在 jboss 6.1.0 中运行的 ejb 3.1 和 servlets 3.0 开发企业应用程序。我将 jar 和 war 作为单独的副本部署在同一个 jboss 实例中。我使用 @EJB(mappedname="beanname/remote") 将 ejb（远程接口实例）注入到 servlet 中，但我总是得到它为空！我试图将jar 和war 绑定部署到一个副本中，即将ejb-jar 放入war 文件的web-inf/lib/ 文件夹中。此外，我在 ejb-jar 的 meta-inf 和 war 文件的 web-inf 中都有 beans.xml。为什么ejb没有注入到servlet中？我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:23:05.887

您现在可以将 EJB（本地 EJB）放入 WAR。如果您需要使用远程 EJB，那么您需要使用 EAR 部署。

此外，AS6 不再处于积极开发中，您可能想尝试更新的版本。

# jquery - 引导分页不起作用

> ID：15287551
> 
> 赞同：0
> 
> 时间：2013-03-08T05:48:01.017
> 
> 标签：jquery, twitter-bootstrap

引导分页不起作用。我在寻呼机的文本框中看不到 page#，它在 jquery.tablesorter.pager.js 函数 moveToFirstPage ln#33 中抛出错误，它是 table.config。table.config 不可用。

代码如下：

```
 <table cellspacing="1" class="tablesorter">
    <thead>
        <tr>
            <th>col1</th>
            <th>col2</th> 
        </tr>
    </thead>
         <tbody>
        <tr>
            <td>val1</td>
            <td>val2</td>
                  </tr>
          </tbody>
    </table>
<div id="pager" class="pager" style="position:absolute;width:100%;background-color:#8F8F8F;color:White;">
        <form>
            <img src="@Url.Content("~/Content/images/first.png")" class="first"/>
            <img src="@Url.Content("~/Content/images/prev.png")" class="prev"/>
            <input type="text" class="pagedisplay" readonly="readonly" style="width:auto" />
            <img src="@Url.Content("~/Content/images/next.png")" class="next"/>
            <img src="@Url.Content("~/Content/images/last.png")" class="last"/>
            Show <select class="pagesize" style="width:auto;">
                <option selected="selected"  value="10">10</option>
                <option value="20">20</option>
                <option value="30">30</option>
                <option  value="40">40</option>
            </select> items
        </form></div> 
```

查询：

```
$("table").tablesorterPager({ container: $("#pager") }); 
```

缺什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:46:13.220

您缺少的最重要的事情是使表格本身成为表格分类器。只需提前打电话`tablesorter`，然后`tablesorterPager`就可以了。

```
$("table").tablesorter().tablesorterPager({ container: $("#pager") });

```

顺便说一句，您的表格行和寻呼机选项需要正确设置。

# python - Python3如何通过组合生成列表？

> ID：15287553
> 
> 赞同：0
> 
> 时间：2013-03-08T05:48:12.700
> 
> 标签：python, function

我需要创建一个从文本生成列表的函数：

```
text = '^to[by, from] all ^appearances[appearance]'

list = ['to all appearances', 'to all appearance', 'by all appearances', 
        'by all appearance', 'from all appearances', 'from all appearance'] 
```

也就是说，括号内的值应该替换前面的单词，它紧跟在 ^ 之后。我希望函数有五个参数，如下所示...

**我的代码**（它不起作用）

```
def addSubstitution(buf, substitutions, val1='[', val2=']', dsym=',', start_p="^"):
    for i in range(1, len(buf), 2):
        buff = []
        buff.extend(buf)
        if re.search('''[^{2}]+[{0}][^{1}{0}]+?[{1}]'''.format(val1, val2, start_p,     buff[i]):
            substrs = re.split('['+val1+']'+'|'+'['+val2+']'+'|'+dsym, buff[i])
            for substr in substrs:
                if substr:
                    buff[i] = substr
                    addSubstitution(buff, substitutions, val1, val2, dsym, start_p)
        return
    substitutions.add(''.join(buf))
    pass

def getSubstitution(text, val1='[', val2=']', dsym=',', start_p="^"):
    pattern = '''[^{2}]+[{0}][^{1}{0}]+?[{1}]'''.format(val1, val2, start_p)
    texts = re.split(pattern,text)
    opttexts = re.findall(pattern,text)
    buff = []
    p = iter(texts)
    t = iter(opttexts)
    buf = []
    while True:
        try:
            buf.append(next(p))
            buf.append(next(t))
        except StopIteration:
            break
     substitutions = set()
     addSubstitution(buf, substitutions, val1, val2, dsym, start_p)
     substitutions = list(substitutions)
     substitutions.sort(key=len)
     return substitutions 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:18:08.433

一种方法可能是这样（我正在跳过字符串操作代码）：

```
text = '^to[by, from] all ^appearances[appearance]' 
```

第 1 步：`text`像这样标记：

```
tokenizedText = ['^to[by, from]', 'all', '^appearances[appearance]'] 
```

第 2 步：准备所有需要笛卡尔积的单词列表（以 ^ 开头的单词）。

```
combinationList = []
for word in tokenizedText:
    if word[0] == '^': # split the words into a list, and add them to `combinationList`.

combinationList = [['to', 'by', 'from'], ['appearances', 'appearance']] 
```

第 3 步：使用以下方法执行笛卡尔积`itertools.product(...)`：

```
for substitution in itertools.product(*combinationList):
    counter = 0
    sentence = []
    for word in tokenizedInput:
        if word[0] == '^':
            sentence.append(substitution[counter])
            counter += 1
        else:
            sentence.append(word)
   print ' '.join(sentence)    # Or append this to a list if you want to return all substitutions. 
```

# extjs - Extjs 编辑器网格面板内的组合框在填充时有时是不可见的

> ID：15287555
> 
> 赞同：1
> 
> 时间：2013-03-08T05:48:15.727
> 
> 标签：extjs, extjs3

大家好，我正在使用 Extjs 3.4 我的问题是我有一个编辑器网格面板，而在面板内部我有一个部门组合框。所以，在第一页我有搜索网格，点击网格我来到这个页面并使用 ajax 加载我在网格面板中填充组合框值。但有时值不会出现，这意味着它是不可见的，只有在单击该组合框后才会出现。一些机构可以解释是什么问题。

提前谢谢，我希望能尽快得到答复。在填充时，我正在调用一个在网格中填充值的 ajax，但其他列没有问题，只有组合框有时不可见

```
 Ext.util.Format.comboRenderer = function(Departmentscombo){

    return function(value){
        var record = combo.findRecord(combo.valueField || combo.displayField, value);
        return record ? record.get(combo.displayField) : combo.valueNotFoundText;
    }
} 

    Ext.grid.ComboColumn = Ext.extend(Ext.grid.Column, {
    constructor: function(cfg){
        Ext.grid.ComboColumn.superclass.constructor.call(this, cfg);
        this.renderer = Ext.util.Format.comboRenderer(this.editor.field ? 
        this.editor.field : this.editor);
        }
     });

    Ext.apply(Ext.grid.Column.types, {
    combocolumn: Ext.grid.ComboColumn
    });

     var DepartmentsJReader = new Ext.data.JsonReader
     ({ root: 'data', id:    'mastercode'      },   
     [{ name: 'mastercode' }, { name:  'description'}]);

        Departments_store = new Ext.data.Store
        ({
            proxy: new Ext.data.HttpProxy(
                { url: '', method: 'GET' }),
            reader: DepartmentsJReader, autoLoad: true,
            listeners:
            {
                load: function () {
                    var rec = new Departments_store.recordType({ mastercode:'-', description: '-' });
                    rec.commit();
                    Departments_store.insert(0, rec);
                    Departments_store.commitChanges();
                }
            }
        }); 
```

# virtual - 如何使用 C# 将 3D 模型（衣服）映射到 kinect 关节

> ID：15287564
> 
> 赞同：0
> 
> 时间：2013-03-08T05:48:46.863
> 
> 标签：virtual, kinect

我们正在做一个虚拟更衣室项目，我们可以在身体关节上映射 .png 图像文件。但是我们需要将 3D 衣服映射到身体上，最终输出应该是一个人（真人而不是头像）在直播视频输出上穿着 3D 衣服。但我们不知道如何做到这一点。非常感谢任何帮助。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T17:10:58.410

回答 user3588017，它太长了，但我会尝试解释如何完成你的项目。如果您完全不熟悉 3D 游戏，请先使用 XNA 的基本教程。在我的项目中，我只专注于弯曲双手。为此，您需要在搅拌机中创建一个 3D 模型并将其导出为 .xna。我用这个链接作为开始。[一开始](http://www.codeproject.com/Articles/230540/Animating-single-bones-in-a-Blender-3D-model-with#SkinningSampleProject132)实际上这是最难的部分，在此之后您知道如何使用数学为您的模型设置动画。然后您需要将 kinect 数据作为 (x,y,z) 映射到模型的各个部分。例如：- 将模型旋转映射到 kinect 的模型旋转。为此，我使用了简单的计算，例如测量肩部的深度并计算旋转角度并将其应用于我的布料模型。

# android - tabhost 中的标签不显示正确的内容

> ID：15287565
> 
> 赞同：0
> 
> 时间：2013-03-08T05:48:51.857
> 
> 标签：android, android-tabhost

我正在通过 webview 与标签小部件一起使用的 android 应用程序，以在应用程序内显示网页。执行时的应用程序未显示正确的数据。它仅显示我为特定选项卡添加的 html 页面。但是在所有选项卡中都可以看到 html 页面。并且主要内容是不可见的。

[http://prntscr.com/vgcoj](http://prntscr.com/vgcoj)

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TabHost th = (TabHost) findViewById(R.id.tabhost); 

    WebView home = (WebView) findViewById(R.id.webView1);
    home.setWebViewClient(new WebViewClient() {
        @Override
        public void onPageFinished(WebView view, String url) {
            findViewById(R.id.progressBar1).setVisibility(View.GONE);
            findViewById(R.id.webView1).setVisibility(View.VISIBLE);
        }
    });  
    home.loadUrl("http://udaipurblog.com");
    home.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);

    WebView static1 = (WebView) findViewById(R.id.webView2);

    static1.loadUrl("file:///android_asset/1.html");
    static1.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);

    WebView webview2 = (WebView) findViewById(R.id.webView3);
    webview2.loadUrl("file:///android_asset/2.html");
    webview2.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);

    th.setup();
    TabSpec homespec = th.newTabSpec("home");
    homespec.setContent(R.id.tab1);
    homespec.setIndicator("Home");
    th.addTab(homespec);

    TabSpec static1spec = th.newTabSpec("static1");
    homespec.setContent(R.id.tab2);
    homespec.setIndicator("Static1");
    th.addTab(homespec);

    TabSpec static2spec = th.newTabSpec("static2");
    homespec.setContent(R.id.tab2);
    homespec.setIndicator("Static2");
    th.addTab(homespec); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:24:22.110

您已经使用`homespec`了每个选项卡。对选项卡使用各自的规范。抱歉，由于我的声誉，我无法发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:24:48.160

您正在添加始终`homespec`选项卡

```
TabSpec homespec = th.newTabSpec("home");
homespec.setContent(R.id.tab1);
homespec.setIndicator("Home");
th.addTab(homespec);

TabSpec static1spec = th.newTabSpec("static1");
homespec.setContent(R.id.tab2);
homespec.setIndicator("Static1");
th.addTab(homespec);

TabSpec static2spec = th.newTabSpec("static2");
homespec.setContent(R.id.tab2);
homespec.setIndicator("Static2");
th.addTab(homespec); 
```

# python - 如何在 Python 中将列表/数组定义为标量

> ID：15287571
> 
> 赞同：2
> 
> 时间：2013-03-08T05:49:48.470
> 
> 标签：python, arrays, vector, scalar

标题可能看起来有点奇怪，但这是我需要在 Python 中做的事情：

假设我有一个列表 (L) 和一个布尔数组 (A)

```
L=[1,2,3,4] 
A=[True, False, True] 
```

我需要创建一个包含 L 的列表，其中 A 为真和假，其中 A 为假，即

```
[[1,2,3,4], False, [1,2,3,4]] 
```

我正在考虑做类似的事情，
`L and A`
但它似乎不起作用，因为 L 不是我想要的标量。

有没有办法将 L 定义为标量并用一两行代码完成它？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T06:08:50.840

您可以使用列表推导：

```
[L if i else False for i in A ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T06:07:20.900

这是一个非常简单的方法：

```
newList = []
for x in A:
   if x is True:
       newList.append(L)
   else: 
       newList.append(False) 
```

但既然你想要简洁，这里有一个单行：

```
[L if x else x for x in A] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T06:10:03.997

```
map(lambda x: L if x else False, A) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T07:49:51.217

根据定义，`L`并且`A`不是标量。您可以使用一个标量，它遍历 A 并返回一个向量，其中包含`L`标量所在的位置`True`和`False`它所在的位置`False`。

使用列表理解：

```
[L if a else False for a in A]    # a is the scalar here. 
```

使用`map(...)`：

```
map(lambda a: L if a else False, A) 
```

使用`for`语句：

```
returnVector = A[:]    # returnVector is the intended output vector
for index, a in enumerate(A): if a is True: returnVector[index] = L 
```

# javascript - javascript：如何逐行解析 FileReader 对象

> ID：15287573
> 
> 赞同：11
> 
> 时间：2013-03-08T05:49:56.937
> 
> 标签：javascript, html

我有一个 javascript/HTML5 页面，我想用它来拉入一个文件并检查每一行以查看它是否大于 240 个字符：

编辑：我现在可以正确解析东西，但它们没有正确呈现。这是我更新的代码：

```
<!DOCTYPE HTML>

<html>

    <head>

        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">

    </head>
    <body>

    <input type="file" id="input" name="file" multiple />
    <br>
    <output id="files"></output>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

        <script>

            if (window.File && window.FileReader && window.FileList && window.Blob) {
                // Great success! All the File APIs are supported.
            } else {
                alert('The File APIs are not fully supported in this browser.');
            }

            function handleFileSelect(evt) {
                var files = evt.target.files; // FileList object

                // files is a FileList of File objects. List some properties.
                var output = [];
                for (var i = 0, f; f = files[i]; i++) {

                    var reader = new FileReader();

                    reader.onload = function(e) {
                            // Print the contents of the file
                            var text = e.target.result;

                            var lines = text.split(/[\r\n]+/g); // tolerate both Windows and Unix linebreaks

                            for(var i = 0; i < lines.length; i++) {
                                if (lines[i].length > 240){
                                    output.push('<li>' + lines[i] + '<br>');
                                }
                            }
                    };

                    reader.readAsText(f,"UTF-8");

                }
                document.getElementById('files').innerHTML = 'Paths with more than 240 characters: <br><ul>' + output.join('') + '</ul>';
            }

            document.getElementById('input').addEventListener('change', handleFileSelect, false);

        </script>
    </body>
</html> 
```

我可以运行跟踪并查看`output`变量是否正确填充，但我得到的输出只是：`Paths with more than 240 characters:`没有`output.join()`正确渲染部分 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T05:52:15.967

显而易见的方法（如果您可以容忍一次全部读取文件）是用换行符分割它。

```
var lines = text.split(/[\r\n]+/g); // tolerate both Windows and Unix linebreaks
for(var i = 0; i < lines.length; i++) { /* do something with lines[i] */ }
// or in modern JavaScript,
lines.forEach(function(line) { /* ... */ }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T06:20:14.027

我想你应该把

```
document.getElementById('files').innerHTML = 'Paths with more than 240 characters: <br><ul>' + output.join('') + '</ul>'; 
```

内部`onload`回调。当您尝试使用它时，似乎`output`尚未填充。所以：

```
reader.onload = function (e) {
    // all your code ...

    // now can safely print output
    document.getElementById('files').innerHTML = 'Paths with more than 240 characters: <br><ul>' + output.join('') + '</ul>';
}; 
```

# jquery - 开始日期和结束日期之间的 jQuery-Validation-Engine 验证

> ID：15287574
> 
> 赞同：1
> 
> 时间：2013-03-08T05:50:01.407
> 
> 标签：jquery, jquery-validation-engine

我使用 jQuery Validation Engine 进行表单验证，这里是演示链接：

[https://github.com/posabsolute/jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)

我有两个文本框，一个是开始日期，第二个是结束日期。我想验证那 `start-date`一定不能大于`end-date`，也`end-date`不能小于`start-date`。

如果有任何验证，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:53:39.380

将值转换为`Date`对象。然后你可以用它来比较，例如。转换为Unix时间戳或其他东西......

有关更多信息，请参见此处`Date`：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

*编辑*：我将包含更多关于我的意思的信息......在[jQuery Validation Engine页面的](https://github.com/posabsolute/jQuery-Validation-Engine)**Validators**部分下，查找它描述**funcCall[methodName]**的部分。

 **> **funcCall[methodName]** - 使用第三方函数调用验证字段。如果发生验证错误，该函数必须返回一条错误消息，该消息将自动显示在错误提示中。

因此，您可以将函数处理程序附加到该字段，该函数将获取日期然后进行比较。

```
<input value="" class="validate[required,funcCall[checkDates]]" type="text" id="startdate" name="startdate" />
<input value="" class="validate[required,funcCall[checkDates]]" type="text" id="enddate" name="enddate" /> 
```

在页面的某处，您有 JavaScrip 函数：

```
var checkDates = function(field, rules, i, options) {
    // Do your date comparisons here between startdate and enddate values
}; 
```

*编辑#2*：

还有：

> **过去[现在，日期或另一个元素的名称]** - 检查元素的值（隐含的日期）是否早于给定日期。当使用“NOW”作为参数时，将在浏览器中计算日期。当使用“#field name”时（“#”是可选的），它会将元素的值与同一表单中另一个元素的值进行比较。请注意，这可能与服务器日期不同。日期使用 ISO 格式 YYYY-MM-DD

和

> **未来[现在，日期或另一个元素的名称]** - 检查元素的值（隐含的日期）是否大于给定日期。当使用“NOW”作为参数时，将在浏览器中计算日期。当使用“#field name”时（“#”是可选的），它会将元素的值与同一表单中另一个元素的值进行比较。请注意，这可能与服务器日期不同。日期使用 ISO 格式 YYYY-MM-DD

如果这符合你的喜好，这里是标记：

```
<input value="" class="validate[required,past[#enddate]]" type="text" id="startdate" name="startdate" />
<input value="" class="validate[required,future[#startdate]]" type="text" id="enddate" name="enddate" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T12:44:09.367

试试这个：

```
<input  class="validate[dateRange[group]]" type="text" id="date1">
<input  class="validate[dateRange[group]]" type="text" id="date2"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:54:15.453

在 Jquery UI 中使用日期范围。请参阅此[http://jqueryui.com/datepicker/#date-range](http://jqueryui.com/datepicker/#date-range)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T05:24:07.713

即使为时已晚，我有一个简单的答案，可能会对其他人有所帮助。您可以在此处获取有关 jQuery Validation Engine 的注释，这将是您问题的更好解决方案，

[https://github.com/posabsolute/jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)

您可以在 HTML 源代码中使用`future`,`now`验证器来启用验证。

例如，

如果您有两个具有`id`属性 as`start_date`和的文本框`end_date`，则可以按如下方式使用验证器：

```
<input value="" class="validate[required,custom[date]]" type="text" id="start_date" name="start_date" />

<input value="" class="validate[required,custom[date],future["#start_date"],now["#start_date"]]" type="text"  id="end_date" name="end_date"  /> 
```

然后在基于语言环境的验证引擎文件中，将所需的消息放在 `future`验证器上，以在验证时显示验证信息。

希望这对您有所帮助。**

# ruby - 如果源文件不存在，如何在 capistrano 脚本中复制文件而不抛出错误？

> ID：15287576
> 
> 赞同：0
> 
> 时间：2013-03-08T05:50:19.587
> 
> 标签：ruby, capistrano

我正在使用 capistrano 部署我的 php 应用程序。我需要将配置文件列表从以前的版本复制到新版本。该列表保存在一个数组中。当我循环这个数组以从以前的版本复制到当前版本时，如果找不到源文件，它会引发错误并停止进一步的执行。如果源文件不存在，我希望脚本忽略这种情况并继续执行下一个命令打印一条简单的消息。我尝试使用如下命令，但没有运气： `run "test -f /tmp/myfile && cp -p /tmp/myfile /home/admin`

甚至

```
if(File.exists?("/tmp/myfile"))

 run "cp -p /tmp/myfile /home/admin" 

else

  print " file doesnot exist"

end 
```

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:01:08.760

我会这样做：

```
run <<-CMD
  if [ -f /tmp/myfile ]; then \
    cp -p /tmp/myfile /home/admin; \
  else \
    echo 'myfile does not exist'; \
  fi
CMD 
```

请记住，所有 capistrano`run`命令都在远程服务器上执行，只有退出值`0`表示成功。如果不存在，结果`"test -f /tmp/myfile && cp -p /tmp/myfile /home/admin`仍然是。您可以使用该文件不存在的消息来调用：`1``/tmp/myfile``||``echo`

```
test -f /tmp/myfile && cp -p /tmp/myfile /home/admin && echo myfile does not exist 
```

这是同一件事。

# java - 使用 Webservice 将用户名和密码从 PHP 发送到 JAVA Api

> ID：15287578
> 
> 赞同：0
> 
> 时间：2013-03-08T05:50:21.947
> 
> 标签：java, php, web-services

我浏览了许多站点，发现 webservice 是将值（用户名和密码）从一台服务器安全地发送到另一台服务器的一种方法。

在我的 Php 应用程序中，我必须将我的用户名和密码从 php 页面（vehicle.php）发送到 java api 页面（someheader://someip:someport/track/Track?page=map.fleet）。该 Api 应该接受用户名和密码，验证它们并登录。

我的问题是我不知道如何通过 web 服务从 php 页面向这个 Java Api 发送带有用户名和密码的请求。请帮帮我。

谢谢，

SJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:02:27.067

[本](http://viralpatel.net/blogs/restful-web-service-tutorial-introduction-rest-restful/)教程应该为您指明正确的方向。

在发送密码之前，不要忘记对密码进行[哈希处理。](http://en.wikipedia.org/wiki/Hash_function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:05:44.823

你说你不知道如何发送发送请求到网络服务。首先使用storm、SOAPUI 等工具测试这些服务。在这里，您将了解要传递的输入和输出。您至少应该知道请求的格式（XML）是什么。

# windows - 在 windows phone 7 中将图像裁剪为正方形以进行拼图游戏

> ID：15287580
> 
> 赞同：-2
> 
> 时间：2013-03-08T05:50:37.113
> 
> 标签：windows, windows-phone-7

请帮助我，我想为拼图游戏应用程序将图像裁剪为正方形。我应该如何在 Windows Phone 7 中做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:35:31.863

您应该改用 Photoshop 或任何其他图像编辑软件。

# phpactiverecord - 无法判断 phpactiverecord 是否正在连接到数据库

> ID：15287584
> 
> 赞同：-1
> 
> 时间：2013-03-08T05:51:06.737
> 
> 标签：phpactiverecord

我正在为尝试使用 phpactiverecord 的 droid 应用程序编写 Web 服务。我没有使用 mvc。我无法判断它是否正确连接到我的数据库，因为我不知道它失败时返回什么，或者它是否不能在没有 mvc 的情况下使用。

```
 <?php 

require_once '../libs/php-activerecord/ActiveRecord.php';

 ActiveRecord\Config::initialize(function($cfg)
 {
     $cfg->set_model_directory('../libs/php-activerecord/models');
     $cfg->set_connections(array(
         'development' => 'mysql://username:password@localhost/dbname'));
 });

//$json=$_GET ['json'];
$json = file_get_contents('php://input');
$obj = json_decode($json);

//echo $json;

$data = Users::all();
$user_name = $data->user_name;
echo($data);
$password = $data->password;

  $posts = array(name =>$user_name,
                password =>$password
                );
    header('Content-type: application/json');
    echo json_encode(array('posts'=>$posts));

?> 
```

当我尝试转到不是很有帮助的页面时，它会引发 500 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:37:48.093

我想通了，但感谢您提供帮助。我的托管服务器有一个奇怪的结构，需要我的路径包含一堆其他人不太可能发生的额外内容......基本上我的包含模式是错误的。打开错误报告很快就指出了问题。

# c++ - 从 NSIS 调用 C++ 类

> ID：15287586
> 
> 赞同：0
> 
> 时间：2013-03-08T05:51:12.133
> 
> 标签：c++, nsis

我只是想知道是否有任何方法可以将 c++ 类调用到我们的 nsis 脚本中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:55:07.163

NSIS 可以调用 DLL 中的函数，但调用约定有些受限，并且没有对类的直接支持。您将无法轻松调用类函数。

您可以通过`extern "C"`为每个类成员函数创建包装函数以及根据需要创建和销毁类实例的函数来“破解”它。您必须以某种方式将代表新创建的实例的内容传递回 NSIS，然后 NSIS 会将其与任何必要的参数/参数一起传递给包装函数。

听起来麻烦多于它的价值...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T07:06:52.230

在我看来，调用函数的最简单方法是将其导出到 dll，然后使用`System::Call`函数从 nsis 调用它们。

# python - 为什么在 C 中返回 Py_None 之前需要 Py_INCREF(Py_None)？

> ID：15287590
> 
> 赞同：28
> 
> 时间：2013-03-08T05:51:29.260
> 
> 标签：python, c, reference-counting

为什么在 C 中返回 Py_None 之前需要 Py_INCREF(Py_None)，如下所示？

```
Py_INCREF(Py_None);
return Py_None; 
```

如果 Py_INCREF(Py_None) 被省略，会发生什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-08T06:38:58.470

缺少 a`Py_INCREF`将导致对 的引用计数不正确`Py_None`，这可能导致解释器解除分配`Py_None`。由于是在文件`Py_None`中静态分配的：`Objects/object.c`

```
PyObject _Py_NoneStruct = {
  _PyObject_EXTRA_INIT
  1, &PyNone_Type
}; 
```

里面有`Include/object.h`定义：

```
#define Py_None (&_Py_NoneStruct) 
```

那么会发生什么，解释器将因致命错误而崩溃：

```
Fatal Python error: deallocating None 
```

由以下`none_dealloc`函数生成`Objects/object.c`：

```
/* ARGUSED */
static void
none_dealloc(PyObject* ignore)
{
    /* This should never get called, but we also don't want to SEGV if
     * we accidentally decref None out of existence.
     */
    Py_FatalError("deallocating None");
} 
```

正如该评论所述，如果`NoneType`没有自己的解除分配功能，您将获得分段错误，因为`free`将在堆栈上完成调用。

您可以复制[教程](http://docs.python.org/2/extending/newtypes.html)`Py_DECREF(Py_None)`中的示例，在函数中添加调用`Noddy_name`，构建扩展并执行循环调用该方法。

* * *

在一般情况下，引用计数`0`会导致程序以许多不同的方式失败。

特别是 python 可以自由地重用被释放的对象使用的内存，这意味着突然对对象的每个引用都可以成为对随机对象（或空内存位置）的引用，你可以看到类似：

```
>>> None   #or whatever object that was deallocated
<ARandomObjectYouNeverSawBefore object at ...> 
```

（这实际上有时[发生](https://stackoverflow.com/questions/11897597/implementing-nb-inplace-add-results-in-returning-a-read-only-buffer-object)在我身上，在编写 C 扩展时。由于缺少对 的调用，一些对象在随机时间变成只读缓冲区`Py_INCREF`）。

在其他情况下，可能会引发不同类型的错误，或者解释器可能会崩溃或段错误。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-08T06:48:12.917

`Py_None`实际上只是另一个 Python 对象，除了没有方法。

Python 将计算对任何`PyObject*`. 它是字符串、整数还是 None 都没有关系。

如果不增加引用计数，Python 解释器最终会在引用计数达到 后丢弃该对象`0`，认为没有任何指向该对象的指针。这意味着下次您尝试对返回值做某事时，您将跟随一个指向内存中不能保证保存的位置的指针`Py_None`（错误、奇怪的值、分段错误等）。

除了必须记住使用之外，还有其他选择`Py_INCREF(Py_None)`：

```
return Py_BuildValue(""); 
```

或者

```
Py_RETURN_NONE; 
```

# android - 从 PreferenceScreen 开始活动

> ID：15287595
> 
> 赞同：12
> 
> 时间：2013-03-08T05:51:51.993
> 
> 标签：android, android-layout, xamarin.android

我有一个字符串列表（存储在数据库中，而不是作为资源），
我想允许用户编辑这个列表。这对普通的很容易做到 `Activity`，
但在这个应用程序中，该列表应该是`user preferences`.
*基本上，它是用户想要使用的句子列表。*

由于我想提供一致的 UI，因此我想将其添加到首选项屏幕：

```
<PreferenceScreen xmlns:android="...">
    <!-- Some other categories and preferences here -->
    <PreferenceScreen android:key="PREF_PDT"
                      android:title="Predefined Texts"
                      android:summary="View and edit the list of predefined texts">
    </PreferenceScreen>
    <!-- Some other categories and preferences here -->
<PreferenceScreen> 
```

现在假设我有一个完整的工作`Activity`允许我编辑数据库中的文本
，当用户点击使用的“PREF_PDT”项目时，我该怎么做`Activity`？

我认为我必须对`Activity`
或创建某种自定义首选项视图进行一些修改？

**更新：**所以为了清楚起见，我不需要“列表”屏幕来挂钩设置，
我只需要给用户一种印象，他们仍然在应用程序的首选项部分（不破坏导航堆栈课程）。否则他们必须去一个地方编辑一些设置，然后去另一个地方编辑文本。他们希望在“设置”下找到所有内容

**更新：**我已将“自定义首选项屏幕以编辑项目列表”中的问题重命名，因为现在很清楚我要做的是从 PreferenceScreen 启动活动。sh404 的回答有帮助，但我找不到正确的语法来引用我想要的活动。也许它是 monodroid 特定的。(ActivityNotFoundException)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T06:35:42.080

像这样写：

```
<Preference
    android:key="mykey"
    android:title="TheTitle"
    android:summary="summary here" >
    <intent android:action="net.hasnath.android.MyActivity"/>
</Preference> 
```

如果您需要通过 Intent Extras：

```
<Preference
    android:key="mykey"
    android:title="TheTitle"
    android:summary="summary here" >
    <intent android:action="net.hasnath.android.MyActivity">
        <extra android:name="extra_name" android:value="my_value" />
         <extra android:name="extra_2_name" android:value="my_value_2"/>
    </intent>
</Preference> 
```

接下来，您必须在 AndroidManifest.xml 中声明 Activity，
或者您可以在首选项屏幕中声明意图，如下所示：

```
<intent android:targetPackage="net.hasnath.android"
        android:targetClass="net.hasnath.android.MyActivity"/> 
```

这样您就不必对 AndroidManifest 进行任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-01T08:51:33.373

在清单文件中以这种方式设置活动

```
<activity android:name=".MainActivity">
     <intent-filter>
            <action android:name=".MainActivity" />
       <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

并在首选项文件中

```
<Preference
     android:key="preferred_key"
     android:title="@string/preferred_title"
     android:summary="@string/preferred_key_summary">
         <intent android:action=".MainActivity"/
</Preference> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-05T15:04:06.323

我有同样的问题，但我在 stackoverflow 上搜索的解决方案都没有解决我的 activitynotfound 异常。

这是我从[这里](http://www.coderanch.com/t/543114/Android/Mobile/Launching-Activity-Preferences)找到的工作解决方案：

```
 <PreferenceScreen  
                android:title="@string/title_intent_preference"  
                android:summary="@string/summary_intent_preference">  

            <intent android:action="your.action.string"/>  

 </PreferenceScreen> 
```

在 manifest.xml 中的活动中设置意图过滤器

```
 <activity ...>  
            <intent-filter>  
                <action android:name="your.action.string"/>  
                <category android:name="android.intent.category.DEFAULT" />  
            </intent-filter>  
</activity> 
```

# ios - 如何使用 LiveCode 字段计算 selectedText 的位置？

> ID：15287597
> 
> 赞同：1
> 
> 时间：2013-03-08T05:52:05.217
> 
> 标签：ios, user-experience, livecode

我想滚动该字段，以便在调整大小后可以看到选择。为此，我需要计算所选字段顶部的高度，然后偏移当前滚动以计算出新滚动。我不能假设一个固定的LineHeight。有人有任何线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T06:15:39.827

在字典中搜索后，我找到了 selectedLoc 函数。我最终在每次调整字段大小后执行了以下代码，这给出了我想要的行为。

```
 put item 2 of the selectedLoc-the scroll of pField into tSelectionHeight
   if tSelectionHeight > the scroll of pField+the height of pField then
      set the scroll of pField to tSelectionHeight-the height of pField
   end if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:28:09.500

如果没有选定的位置，则以下操作也有效。我在 PowerDebug 中使用它来将断点或当前代码行置于调试窗口的中心。（是的，我意识到我假设线高在现场是一致的）。

```
command CenterDebugText pLinesToHilite
  local tLineHeight, tFieldHeight
  local tScroll

  lock screen
  set the hilitedlines of field kDebugFieldName of me to pLinesToHilite
  -- center the breakpoint line in the display

  -- calculate the number of visible script lines
  put the effective textheight of field kDebugFieldName into tLineHeight
  put the height of field kDebugFieldName into tFieldHeight

  put tLineHeight * (item 1 of pLinesToHilite) into tScroll
  subtract tFieldHeight / 2 from tScroll
  set the vscroll of field kDebugFieldName to trunc(tScroll)
  unlock screen
end CenterDebugText 
```

# vb.net - Visual Basic：有没有办法缩短这个原始代码

> ID：15287613
> 
> 赞同：0
> 
> 时间：2013-03-08T05:53:37.513
> 
> 标签：vb.net

我设计了一些软件来帮助卖家计算客户购买的产品。我编码太原始了，我知道这段代码可以缩短，但我不知道该怎么做。

这是我的代码：

```
Public Class Form1

Private Strg1, Strg2, Strg3, Strg4, Strg5, Strg6, Strg7, Strg8, Strg9, Strg10, Strg11, Strg12, Strg13, Strg14, Strg15, Strg16, Strg17, Strg18, Strg19, Strg20, Strg21, Strg22, Strg23, Strg24, Strg25, Strg26, Strg27, Strg28, Strg29, Strg30 As Double
Private p1, p2, p3, p4, p5, p6, p7, p8, p9, p10, p11, p12, p13, p14, p15, p16, p17, p18, p19, p20, p21, p22, p23, p24, p25, p26, p27, p28, p29, p30, MedPrc1, MedPrc2, TotMedPrc As Double
Private Function QntCalc(ByVal x As Double, ByVal y As Double) As Double
    Return x * y
End Function
Private Sub Form1_Load(ByVal sder As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    MedPrc1 = 0
    MedPrc2 = 0
    TotMedPrc = 0
End Sub

Private Sub CheckBox1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox1.CheckedChanged
    If TextBox1.Enabled = False Then
        TextBox1.Enabled = True
        p1 = Val(Label1.Text)
    Else
        TextBox1.Enabled = False
        TextBox1.Text = ""
        p1 = 0
    End If
End Sub

Private Sub CheckBox2_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox2.CheckedChanged
    If TextBox2.Enabled = False Then
        TextBox2.Enabled = True
        p2 = Val(Label2.Text)
    Else
        TextBox2.Enabled = False
        TextBox2.Text = ""
        p2 = 0
    End If
End Sub

Private Sub CheckBox3_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox3.CheckedChanged
    If TextBox3.Enabled = False Then
        TextBox3.Enabled = True
        p3 = Val(Label3.Text)
    Else
        TextBox3.Enabled = False
        TextBox3.Text = ""
        p3 = 0
    End If
End Sub

Private Sub CheckBox4_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox4.CheckedChanged
    If TextBox4.Enabled = False Then
        TextBox4.Enabled = True
        p4 = Val(Label4.Text)
    Else
        TextBox4.Enabled = False
        TextBox4.Text = ""
        p4 = 0
    End If
End Sub

Private Sub CheckBox5_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox5.CheckedChanged
    If TextBox5.Enabled = False Then
        TextBox5.Enabled = True
        p5 = Val(Label5.Text)
    Else
        TextBox5.Enabled = False
        TextBox5.Text = ""
        p5 = 0
    End If
End Sub

Private Sub CheckBox6_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox6.CheckedChanged
    If TextBox6.Enabled = False Then
        TextBox6.Enabled = True
        p6 = Val(Label6.Text)
    Else
        TextBox6.Enabled = False
        TextBox6.Text = ""
        p6 = 0
    End If
End Sub

Private Sub CheckBox7_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox7.CheckedChanged
    If TextBox7.Enabled = False Then
        TextBox7.Enabled = True
        p7 = Val(Label7.Text)
    Else
        TextBox7.Enabled = False
        TextBox7.Text = ""
        p7 = 0
    End If
End Sub

Private Sub CheckBox8_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox8.CheckedChanged
    If TextBox8.Enabled = False Then
        TextBox8.Enabled = True
        p8 = Val(Label8.Text)
    Else
        TextBox8.Enabled = False
        TextBox8.Text = ""
        p8 = 0
    End If
End Sub

Private Sub CheckBox9_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox9.CheckedChanged
    If TextBox9.Enabled = False Then
        TextBox9.Enabled = True
        p9 = Val(Label9.Text)
    Else
        TextBox9.Enabled = False
        TextBox9.Text = ""
        p9 = 0
    End If
End Sub

Private Sub CheckBox10_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox10.CheckedChanged
    If TextBox10.Enabled = False Then
        TextBox10.Enabled = True
        p10 = Val(Label10.Text)
    Else
        TextBox10.Enabled = False
        TextBox10.Text = ""
        p10 = 0
    End If
End Sub

Private Sub CheckBox11_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox11.CheckedChanged
    If TextBox11.Enabled = False Then
        TextBox11.Enabled = True
    Else
        TextBox11.Enabled = False
        TextBox11.Text = ""
        p1 = 0
    End If
End Sub

Private Sub CheckBox12_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox12.CheckedChanged
    If TextBox12.Enabled = False Then
        TextBox12.Enabled = True
    Else
        TextBox12.Enabled = False
        TextBox12.Text = ""
    End If
End Sub

Private Sub CheckBox13_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox13.CheckedChanged
    If TextBox13.Enabled = False Then
        TextBox13.Enabled = True
    Else
        TextBox13.Enabled = False
        TextBox13.Text = ""
        p1 = 0
    End If
End Sub

Private Sub CheckBox14_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox14.CheckedChanged
    If TextBox14.Enabled = False Then
        TextBox14.Enabled = True
    Else
        TextBox14.Enabled = False
        TextBox14.Text = ""
    End If
End Sub

Private Sub CheckBox15_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox15.CheckedChanged
    If TextBox15.Enabled = False Then
        TextBox15.Enabled = True
    Else
        TextBox15.Enabled = False
        TextBox15.Text = ""
    End If
End Sub

Private Sub CheckBox16_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox16.CheckedChanged
    If TextBox16.Enabled = False Then
        TextBox16.Enabled = True
    Else
        TextBox16.Enabled = False
        TextBox16.Text = ""
    End If
End Sub

Private Sub CheckBox17_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox17.CheckedChanged
    If TextBox17.Enabled = False Then
        TextBox17.Enabled = True
    Else
        TextBox17.Enabled = False
        TextBox17.Text = ""
    End If
End Sub

Private Sub CheckBox18_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox18.CheckedChanged
    If TextBox18.Enabled = False Then
        TextBox18.Enabled = True
    Else
        TextBox18.Enabled = False
        TextBox18.Text = ""
    End If
End Sub

Private Sub CheckBox19_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox19.CheckedChanged
    If TextBox19.Enabled = False Then
        TextBox19.Enabled = True
    Else
        TextBox19.Enabled = False
        TextBox19.Text = ""
    End If
End Sub

Private Sub CheckBox20_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox20.CheckedChanged
    If TextBox20.Enabled = False Then
        TextBox20.Enabled = True
    Else
        TextBox20.Enabled = False
        TextBox20.Text = ""
    End If
End Sub

Private Sub CheckBox21_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox21.CheckedChanged
    If TextBox21.Enabled = False Then
        TextBox21.Enabled = True
    Else
        TextBox21.Enabled = False
        TextBox21.Text = ""
    End If
End Sub

Private Sub CheckBox22_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox22.CheckedChanged
    If TextBox22.Enabled = False Then
        TextBox22.Enabled = True
    Else
        TextBox22.Enabled = False
        TextBox22.Text = ""
    End If
End Sub

Private Sub CheckBox23_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox23.CheckedChanged
    If TextBox23.Enabled = False Then
        TextBox23.Enabled = True
    Else
        TextBox23.Enabled = False
        TextBox23.Text = ""
    End If
End Sub

Private Sub CheckBox24_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox24.CheckedChanged
    If TextBox24.Enabled = False Then
        TextBox24.Enabled = True
    Else
        TextBox24.Enabled = False
        TextBox24.Text = ""
    End If
End Sub

Private Sub CheckBox25_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox25.CheckedChanged
    If TextBox25.Enabled = False Then
        TextBox25.Enabled = True
    Else
        TextBox25.Enabled = False
        TextBox25.Text = ""
    End If
End Sub

Private Sub CheckBox26_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox26.CheckedChanged
    If TextBox26.Enabled = False Then
        TextBox26.Enabled = True
    Else
        TextBox26.Enabled = False
        TextBox26.Text = ""
    End If
End Sub

Private Sub CheckBox27_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox27.CheckedChanged
    If TextBox27.Enabled = False Then
        TextBox27.Enabled = True
    Else
        TextBox27.Enabled = False
        TextBox27.Text = ""
    End If
End Sub

Private Sub CheckBox28_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox28.CheckedChanged
    If TextBox28.Enabled = False Then
        TextBox28.Enabled = True
    Else
        TextBox28.Enabled = False
        TextBox28.Text = ""
    End If
End Sub

Private Sub CheckBox29_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox29.CheckedChanged
    If TextBox29.Enabled = False Then
        TextBox29.Enabled = True
    Else
        TextBox29.Enabled = False
        TextBox29.Text = ""
    End If
End Sub

Private Sub CheckBox30_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox30.CheckedChanged
    If TextBox30.Enabled = False Then
        TextBox30.Enabled = True
    Else
        TextBox30.Enabled = False
        TextBox30.Text = ""
    End If
End Sub

Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged
    Strg1 = Str(QntCalc(p1, Val(TextBox1.Text)))
End Sub

Private Sub TextBox2_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox2.TextChanged
    Strg2 = Str(QntCalc(p2, Val(TextBox2.Text)))
End Sub

Private Sub TextBox3_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox3.TextChanged
    Strg3 = Str(QntCalc(p3, Val(TextBox3.Text)))
End Sub

Private Sub TextBox4_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox4.TextChanged
    Strg4 = Str(QntCalc(p4, Val(TextBox4.Text)))
End Sub

Private Sub TextBox5_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox5.TextChanged
    Strg5 = Str(QntCalc(p5, Val(TextBox5.Text)))
End Sub

Private Sub TextBox6_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox6.TextChanged
    Strg6 = Str(QntCalc(p6, Val(TextBox6.Text)))
End Sub

Private Sub TextBox7_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox7.TextChanged
    Strg7 = Str(QntCalc(p7, Val(TextBox7.Text)))
End Sub

Private Sub TextBox8_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox8.TextChanged
    Strg8 = Str(QntCalc(p8, Val(TextBox8.Text)))
End Sub

Private Sub TextBox9_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox9.TextChanged
    Strg9 = Str(QntCalc(p9, Val(TextBox9.Text)))
End Sub

Private Sub TextBox10_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox10.TextChanged
    Strg10 = Str(QntCalc(p10, Val(TextBox10.Text)))
End Sub

Private Sub MedPrc_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MedPrc.TextChanged
End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    TotMedPrc = Strg1 + Strg2 + Strg3 + Strg4 + Strg5 + Strg6 + Strg7 + Strg8 + Strg9 + Strg10
    MedPrc.Text = Val(TotMedPrc)
End Sub
End Class 
```

有没有办法缩短这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:30:06.130

您的代码看起来像 VB.NET 对吧？在 VBA 中你会写一些有点不同的东西。样本：

```
Option Explicit

Private Strg1  As String
Private p1 As Double

Private Sub CheckBox1_Change()
  OnCheckBoxChange Me.TextBox1, Me.Label1, p1
End Sub

Private Sub TextBox1_Change()
  OnTextBoxChanged Me.TextBox1, p1, Strg1
End Sub

Private Sub OnTextBoxChanged(ByRef textBoxControl As Variant, ByRef p As Double, Strg As String)
    Strg = Str(QntCalc(p, Val(textBoxControl.Text)))
End Sub

Private Sub OnCheckBoxChange(ByRef textBoxControl As Variant, ByRef labelControl As Variant, ByRef p As Double)
    If textBoxControl.Enabled = False Then
        textBoxControl.Enabled = True
        p = Val(labelControl.Caption)
    Else
        textBoxControl.Enabled = False
        textBoxControl.Text = ""
        p = 0
    End If
End Sub

Private Function QntCalc(ByVal x As Double, ByVal y As Double) As Double
    QntCalc = x * y
End Function 
```

# ruby - rails 模块/namspace 导入

> ID：15287616
> 
> 赞同：1
> 
> 时间：2013-03-08T05:53:39.473
> 
> 标签：ruby, ruby-on-rails-3

这是我的导轨代码

```
@swimming_classschedule = Swimming::Classschedule.find(params[:id]) 
```

它有效，但每次我使用此模块名称时看起来都很乏味`Swimming::`

有没有像python这样的方法

我可以`import Classschedule from Swimming`所以我可以省去输入模块名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:58:05.370

类和其他对象一样是对象。您可以像其他任何变量一样将它们分配给变量：

```
CS = Swimming::Classschedule

@swimming_classschedule = CS.find(params[:id]) 
```

如果您想混合在模块中定义的*所有*常量（和方法！），您可以使用`Module#include`：

```
include Swimming

@swimming_classschedule = Classschedule.find(params[:id]) 
```

# scala - Scala映射提取值重复最大次数

> ID：15287619
> 
> 赞同：0
> 
> 时间：2013-03-08T05:53:53.800
> 
> 标签：scala, map, max

我有`Map[String,String]`所以键是不同的，但大多数值都是重复的。例如 ：`Map[car-> "This is a car",truck-> "This is a car", fruit ->"This is a fruit"]`

所以它应该返回`"This is a car"`，因为它重复了两次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T06:08:35.203

我做了这样的事情。希望能帮助到你。

```
val j = x.groupBy(_._2) 
```

然后

```
j.maxBy(_._2.size) 
```

其中 x 是您的原始地图。第一次调用，返回一个 Map 然后你只得到键值对，其中的值（map ，有最大条目）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T06:12:11.080

```
val m1 = Map("this" -> "that", "what" -> "that", "who" -> "me", "you" -> "who")
m1.groupBy(_._2).maxBy(_._2.size)
res0: ... = (that,Map(this -> that, what -> that)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T10:50:34.070

另一种解决方案

```
 map.values.groupBy(t => t ).values.maxBy(_.size).head 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:22:16.830

不是最优雅的，但我的解决方案就像

```
val list = Map(car-> "This is a car",truck-> "This is a car", fruit ->"This is a fruit")

list.map{
  case (k,v) => if(list.filter{case (key,value)=> value==v }.size>1)v
}.toSet 
```

# c# - 如何更新 ArrayList 中的对象记录

> ID：15287623
> 
> 赞同：-1
> 
> 时间：2013-03-08T05:54:17.337
> 
> 标签：c#, .net, arraylist

我想`ArrayList`在 c# 中更新记录，我想将我的状态更新为特定记录的非活动状态`ArrayList`，这是下面的代码，但这不能正常工作，因为它不会将状态更新为非活动状态。

```
public Boolean changeAccStatus(int userid)
{
    Boolean result = false;
    for (int i = 0; i < list.Count; i++) 
    {
        AccountDto dto = (AccountDto)list[i];
        if (dto.Userid == userid) {
            dto.Status = "Unactive";
            list[i] = dto;
            result = true;
        }
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:59:34.103

如果您能够将列表转换为通用列表，那么您可以这样做

```
 Func<int, AccountDto, bool> UpdateRecord= (y, x) => 
                  {
                    if( x.Userid== y){x.Status="Unactive";
                    return true; 
                  };
    List<AccountDto> mylist = new List<AccountDto>();
    var v = from x in mylist
            where UpdateRecord(userit-intvalue, x)
            select x; 
```

你也可以试试这个

```
List<AccountDto> mylist = new List<AccountDto>();

list.ForEach(x => {
    if( x.Userid== userid)
        x.Status="Unactive";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:00:33.267

做 `(AccountDto)list[i].Status = "inactive";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:08:19.330

试试下面的代码

```
 foreach (var temp in list)
        {
            var t = temp as AccountDto;
            if (t != null && t.Userid.Trim().Equals(userid.Trim()))
                t.Status = "inactive";
        } 
```

还可以考虑对泛型 List<AccountDto> 进行重构，这将直接为您提供 Linq 的强大功能

# jasper-reports - 交互式碧玉报告

> ID：15287627
> 
> 赞同：1
> 
> 时间：2013-03-08T05:54:57.463
> 
> 标签：jasper-reports

我在我的项目中使用 jasper 报告来生成 html 报告。但是生成的报告是静态的。现在我们想在其中添加一些交互功能，比如简单的列排序和搜索。这最好在客户端完成。如何实现？到目前为止，我已经尝试将 jquery 嵌入到生成的报告中，但没有成功。jasper 报告是否提供这种功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:48:04.150

根据您对“交互式”一词的含义，不，这是不可能的。报表只是一个报表 - 一种以业务规则要求的方式显示数据的呈现媒体。您可以在此处格式化数据。您可以对其进行样式化，添加图像等等。客户端应用程序可能是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:26:36.613

每次要过滤数据时，使用参数并重新编译报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T10:42:21.543

Well, your exact requirement can be achieved if you publish the Jasper Reports on the Jasper Server. Once published, all your reports become interactive (For Charts, you must use the PRO charts and not the basic HTML charts but for tables, it works automatically.)

Once you publish it on the Jasper Server, the features that you get are:

1.  Sort button with various types
2.  Export the Report to many formats (PDF, XML, etc - more than 10).
3.  Zoom IN and Zoom Out.
4.  Bubble for your charts making them interactive, etc.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-13T06:20:21.923

是的，Jasper Reports 中的交互性是可能的，但问题是您需要一个 Jasper Server Pro 或 Enterprise 版本来实现这一点。如果您使用的是社区版本，则无法创建交互式报告。[您可以从此链接https://www.jaspersoft.com/download](https://www.jaspersoft.com/download)下载 60 天的免费试用版 jasper 服务器

有关更多详细信息，请访问此链接[https://www.jaspersoft.com/community-commercial](https://www.jaspersoft.com/community-commercial)

根据您的要求选择。

# javascript - onunload 在 chrome 中不起作用

> ID：15287628
> 
> 赞同：0
> 
> 时间：2013-03-08T05:55:02.923
> 
> 标签：javascript, google-chrome, javascript-events

我正在打开一个新窗口，如下所示

```
var nResult = window.showModalDialog("getSelection.asp?Type=" + inputType, "", "dialogHeight:220px; dialogWidth:400px; resizable=no; help:no; status:no");  

```

现在在 getSelection.asp 我有以下 body 语法

```
<BODY onload="RetrieveDialogArguments();document.thisForm.ok.focus();" onunload="ReturnDialogArguments()" >

```

当我发出警报然后发现 onload 事件有效并调用 RetrieveDialogArguments() 但 onunload 事件不起作用并且函数 ReturnDialogArguments() 不调用。这就是为什么在 nResult 我没有得到任何值。此调用适用于 Internet Explorer，但不适用于 Google Chrome。请告诉我谷歌浏览器有什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:58:30.730

~~`onunload`Chrome 或 Opera 根本不支持。你对此无能为力。~~

改为使用`onbeforeunload`，如：

```
window.onbeforeunload = function () { // stuff here } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:08:23.967

您可以尝试使用`window.onbeforeunload`Chrome。

或者使用带有事件的[jQuery 绑定函数。](http://api.jquery.com/bind/)`onbeforeunload`

# ruby - github boxen可以在mac os 10.7（Lion）中运行吗

> ID：15287631
> 
> 赞同：2
> 
> 时间：2013-03-08T05:55:29.490
> 
> 标签：ruby, git, github, boxen

我正在我的 mac os (10.7.5) 中尝试 github.com 的 boxen 工具。但是，每次我尝试运行项目模板时：[https](https://github.com/boxen/our-boxen) ://github.com/boxen/our-boxen ，它都会抱怨：

`--> You must be running OS X 10.8 (Mountain Lion).`

这是否意味着 boxen 工具只能在 Mountain Lion 中运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:02:15.500

它抛出一个显式错误的事实意味着有人花时间为任何在比 Mountain Lion 更老的操作系统上运行它的人安装它。

源代码中很可能只有 10.8 的一些符号/API。如果您可以找到这些 API 并修改这些方法以在旧操作系统上工作，那么您将拥有 Boxen 的 10.7 兼容版本，并随时将您的更改回馈给社区。成为开源软件魔力的一部分！

# c - 循环输入行并在 C 中调用函数？

> ID：15287647
> 
> 赞同：0
> 
> 时间：2013-03-08T05:57:07.370
> 
> 标签：c, for-loop

我写了一个小的 rgrep 函数，我将有另一个文本文件，其中包含我正在检查模式的单词。我的文本文件将采用以下格式。

```
a
because 
cat 
7.* 
```

我如何编写一个循环来为文件中的每个单词调用一个函数？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:06:02.763

尝试使用 fopen 打开文件并使用 fgets 逐行读取

也检查这篇文章 [c，导入具有不同行的文本文件并处理这些行](https://stackoverflow.com/questions/15246437/c-import-text-file-with-different-lines-and-handle-the-lines/15247015#15247015)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:31:42.707

首先为该模式创建一个状态机，然后每个字符将该状态机驱动到下一个状态。检查状态以检查模式匹配。

# c++ - C ++不计算白豆

> ID：15287648
> 
> 赞同：0
> 
> 时间：2013-03-08T05:57:12.650
> 
> 标签：c++, arrays, string, counter

我需要一些帮助。我正在编写一个代码`C++`，最终将传入一个随机字符串，它会在字符串中的每个点进行中断，并计算中断右侧和左侧的颜色数（r，b , 和 w)。这就是问题所在，`w`可以是，`r`或者`b`当它破裂时，或者当强者通过它时，最终使它成为一个混合体。我的问题是，当中断被实施并且`w`立即向左或向右时，我无法让程序去寻找拳头`b`或`r`. 谁能帮我？

```
#include <stdio.h>
#include "P2Library.h"

void doubleNecklace(char neck[], char doubleNeck[], int size);
int findMaxBeads(char neck2[], int size);
#define SIZE 7

void main(void)
{
    char necklace[SIZE];
    char necklace2[2 * SIZE];
    int brk;
    int maxBeads;
    int leftI, rightI, leftCount = 0, rightCount=0, totalCount, maxCount = 0;
    char leftColor, rightColor;
    initNecklace(necklace, SIZE);

    doubleNecklace(necklace, necklace2, SIZE);
    maxBeads = findMaxBeads(necklace2, SIZE * 2);
    checkAnswer(necklace, SIZE, maxBeads);

    printf("The max number of beads is %d\n", maxBeads);
}

int findMaxBeads(char neck2[], int size)
{
    int brk;
    int maxBeads;
    int leftI, rightI, leftCount = 0, rightCount=0, totalCount, maxCount = 0;
    char leftColor, rightColor;

    for(brk = 0; brk < 2 * SIZE - 1; brk++)
    {
        leftCount = rightCount = 0;
        rightI = brk;
        rightColor = neck2[rightI];

        if(rightI == 'w')
        {
            while(rightI == 'w')
            {
                rightI++;
            }
            rightColor = neck2[rightI];
        }
        rightI = brk;

        while(neck2[rightI] == rightColor || neck2[rightI] == 'w')
        {
            rightCount++;
            rightI++;
        }

        if(brk > 0)
        {
            leftI = brk - 1;
            leftColor = neck2[leftI];

            if(leftI == 'w')
            {
                while(leftI == 'w')
                {
                    leftI--;
                }
                leftColor = neck2[leftI];
            }
            leftI = brk - 1;

            while(leftI >= 0 && neck2[leftI] == leftColor || neck2[leftI] == 'w')
            {
                leftCount++;
                leftI--;
            }
        }
        totalCount = leftCount + rightCount;
        if(totalCount > maxCount)
        {
            maxCount = totalCount;
        }
    }
    return maxCount;
}

void doubleNecklace(char neck[], char doubleNeck[], int size)
{
    int i;
    for(i = 0; i < size; i++)
    {
        doubleNeck[i] = neck[i];
        doubleNeck[i+size] = neck[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:38:37.607

我没有详细研究代码，但有些东西不是对称的：在`for`循环中，“左”代码有一个`if`但“右”代码没有。也许您应该`-1`在`for`条件中删除它并将其添加`if`为“正确”代码：

```
for(brk = 0; brk < 2 * SIZE; brk++)
{
    leftCount = rightCount = 0;

    if (brk < 2 * SIZE - 1)
    {
        rightI = brk;
        rightColor = neck2[rightI];

        //...
    }

    if(brk > 0)
    {
        leftI = brk - 1;
        leftColor = neck2[leftI];

        //...
    }

    //... 
```

只是猜测... :-/

也许您甚至应该将这些更改`<`为`<=`.

# php - 它只显示一条消息，而不是选择正确的消息来显示

> ID：15287650
> 
> 赞同：1
> 
> 时间：2013-03-08T05:57:26.597
> 
> 标签：php

我正在尝试确定正确回答的问题和错误回答的问题。如果回答正确，则显示“完全正确”，否则如果不正确，则显示“不正确”消息。问题是无论是否正确，它总是显示该问题的回答不正确。

下面是代码：

```
 $check = true;

    foreach ($studentData['questions'] as $questionId => $questionData) {

            if($questionData['answer'] == $questionData['studentanswer'])
    {
        echo '<td width="30%" class="studentanswer green"><strong>'.htmlspecialchars($questionData['studentanswer']).'</strong></td>' . PHP_EOL;
    }
    else
    {
        echo '<td width="30%" class="studentanswer red"><strong>'.htmlspecialchars($questionData['studentanswer']).'</strong></td>' . PHP_EOL;
        $check = false;
    }

if($check)
{
    echo '<p class="green"><strong>Fully Correct</strong></p>';
}
else
{
    echo '<p class="red"><strong>Not Correct / Not Fully Correct</strong></p>';
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:00:42.320

在此行之后再次设置`true`为`$check`

```
if($questionData['answer'] == $questionData['studentanswer'])
{
echo '<td width="30%" class="studentanswer green"><strong>'.htmlspecialchars($questionData['studentanswer']).'</strong></td>' . PHP_EOL;
$check = true;
} else 
```

# c# - 我在表单的 Load 事件中添加了一个事件处理程序，它编译时没有错误，但没有按预期工作

> ID：15287651
> 
> 赞同：0
> 
> 时间：2013-03-08T05:57:37.167
> 
> 标签：c#

我想为我项目中的所有表单添加额外的事件处理程序。当每个表单`Load event`被触发时，除了 Form_Load() 中编写的代码之外，我的事件处理程序也将被执行。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Reflection;

namespace eventHandlerIntercept {    
   static class Program    {
      /// <summary>
      /// The main entry point for the application.
      /// </summary>
      [STAThread]
      static void Main()
      {

          Application.EnableVisualStyles();
          Application.SetCompatibleTextRenderingDefault(false);
          //intercept all form's Load event
          Assembly[] assemblies = AppDomain.CurrentDomain.GetAssemblies();
          foreach (Assembly a in assemblies)
          {
              Type[] types = a.GetTypes();
              foreach (Type t in types)
              {
                  if (t.IsPublic && t.BaseType == typeof(Form))
                  {
                      if (t.Namespace.Contains("eventHandlerIntercept"))    
                      {                        
                        EventInfo e1 = t.GetEvent("Load");

                        MethodInfo mi = typeof(Program).GetMethod("HandleCustomEvent");

                        Delegate handler = Delegate.CreateDelegate(e1.EventHandlerType, mi);

                        object o1 = Activator.CreateInstance(t);
                        e1.AddEventHandler(o1, handler);

                    }
                }
            }
         }
         Application.Run(new Form1());
    }

    public static void HandleCustomEvent(object sender, EventArgs a)
    {
        // Do something useful here.
        MessageBox.Show("xyz");
    }
  }
 } 
```

这段代码编译没有错误，但是当Form1显示时，它没有显示`message box`内容是`xyz`什么，我的代码哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:24:58.700

你可以试试这个：

```
Form myForm = new Form();
myForm.Load += HandleCustomEvent;
Application.Run(myForm); 
```

这对我有用，但`MessageBox`它显示在表格本身之前，我不知道这对你是否重要。不过，希望这有帮助，请反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:04:37.297

没有办法通过尝试对类型执行某些操作来“拦截所有表单的 Load 事件”。OnLoad 事件是实例事件，因此无法在创建派生对象的实例*之前添加处理程序。*`Form`

您的代码实际上创建了所有 From 派生类的实例并添加了侦听器，但是您完全忽略了结果对象并创建了一个新对象以调用`Run`. 要使该方法起作用，您需要将`o1`对应的`Form1`类型传递给`Run`方法。

您可能想要编写某种工厂方法，该方法将按类型名称创建表单并立即附加您的处理程序。而且您可以在需要创建新表单的任何地方使用此方法（而不是直接调用构造函数）。

# php - 从表中请求数据并以 html 显示

> ID：15287652
> 
> 赞同：0
> 
> 时间：2013-03-08T05:57:41.423
> 
> 标签：php, html, mysql

我的php代码是这样的：

```
<?php
$con=mysqli_connect("host","user","pass","db_name");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
$result_set = mysqli_query($con,"SELECT points FROM total WHERE id = 1");
$row = mysqli_fetch_assoc($result_set);
$old_total = $row['points'];
$new_total = $old_total + $_REQUEST['total'];
mysqli_query($con,"UPDATE total SET points = $new_total WHERE id = 1");
mysqli_close($con);
?> 
```

所以现在我需要在我的 html 页面上显示 $new_total，请帮助我。

* * *

这是我使用的最终代码：

```
<?php include 'something.php'; ?>
<h3> <?php echo $new_total?> </h3> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:02:30.000

将此文件包含在主页中，然后将此代码放在主页中，您将能够看到输出：

```
 <?php echo $new_total ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:59:19.300

就`echo`在合适的地方

```
echo $new_total; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:59:44.817

简单如`<?php echo $new_total ?>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:00:21.290

只需在 html 中显示此变量，例如`<h3> <?php echo $new_total?> </h3>.`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T07:16:47.063

**在新的html 页面**中包含这个 php 文件

 **并在您的新**html 页面** 代码中回显如下内容：-

```
<?php 
      include "this.php";  /*your current php file name */ 
      echo $new_total;    /*print your new_total in html page */
?> 
```

希望它会有用。**

# sql - sql - 以特定格式获取每个年级的员工人数

> ID：15287658
> 
> 赞同：0
> 
> 时间：2013-03-08T05:58:13.547
> 
> 标签：sql, sql-server-2008

我是 sql 新手，我有一张这样的表

```
Emp_id | Emp_NAME | EMP_GRADE
  1 测试1 A1
  2 测试2 A2
  3 测试3 A3
  4 测试4 A4
  6 测试5 A1
  7 测试6 A2
  8 测试7 A3

```

我需要获取每个年级的员工人数，其中最终输出将是“2 - 2 - 2 - 1”在输出所指的单个列中（每个年级的员工人数，即 A1(2) - A2 (2)-A3(2)-A4(1))。任何人都可以为此提供sql查询。我希望我们不需要光标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:11:50.270

```
SELECT COUNT(Emp_id) FROM myTableName GROUP BY EMP_GRADE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:08:43.060

```
SELECT STUFF((
  SELECT ' - ' + CAST(COUNT(1) AS VARCHAR(max)) 
  FROM myTable 
  GROUP BY EMP_GRADE 
  ORDER BY EMP_GRADE 
  FOR XML PATH('')
), 1, 3, '') 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/0fd6d/4)

* * *

如果您正在过滤，但仍想返回每个成绩的结果，则需要自我加入以获取完整的成绩列表。这是一种方法：

```
;WITH g AS (SELECT DISTINCT EMP_GRADE FROM myTable)
SELECT STUFF((
  SELECT ' - ' + CAST(COUNT(t.Emp_id) AS VARCHAR(max)) 
  FROM g
  LEFT OUTER JOIN myTable t ON g.EMP_GRADE = t.EMP_GRADE
      AND t.Emp_id % 2 = 1 --put your filter conditions here as part of the join
  GROUP BY g.EMP_GRADE
  ORDER BY g.EMP_GRADE
  FOR XML PATH('')
), 1, 3, '') 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/0fd6d/7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:12:02.967

采用：

```
 DECLARE @Grades varchar(1000)

  SELECT @Grades=coalesce(@Grades + ' ','') +Cast(COUNT(EMP_GRADE) as Varchar(2))+' -'  From TableName 
  Group By EMP_GRADE

  Select @Grades=SUBSTRING(@Grades,0,LEN(@Grades))
  Select @Grades 
```

**更新：**

```
SELECT @Grades=coalesce(@Grades + ' ','') +Cast(COUNT(t1.EMP_GRADE) as Varchar(2))+' -'  From @tab1 t
Left Join @tab1 t1 On t1.EMP_GRADE= t.EMP_GRADE And  t1.Emp_id= t.Emp_id 
And t1.EMP_GRADE<>'A3' -- Replace conditions here
Group By t1.EMP_GRADE,t.EMP_GRADE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:16:41.203

这应该有效：

```
SELECT EMP_GRADE, COUNT(EMP_Id) AS EMPS_COUNT
FROM TableName
GROUP BY EMP_GRADE 
```

希望有帮助。继续学习 SQL。

# android - 如何在android中的asynctask中检查互联网连接

> ID：15287660
> 
> 赞同：2
> 
> 时间：2013-03-08T05:58:24.727
> 
> 标签：android, android-asynctask

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.videoview);

        mVideoView = (VideoView) findViewById(R.id.videoView1);
        scanCode = getIntent().getExtras().getString("ScanCode");

         new GetVideoUrlAsyn().execute();               

        mVideoView.setOnCompletionListener(new OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer mp) {
                // TODO Auto-generated method stub

                startActivity(new Intent(getBaseContext(),
                        PostVideoMenuActivity.class));              
            }
        });
    }   
    private class GetVideoUrlAsyn extends AsyncTask<Void, Void,Void> {

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub          

            String URL = "http://www.storybehindthestore.com/sbtsws/service/saveinfo.asmx/StoryScanHistorySave";

            WebServiceCall webservice = new WebServiceCall();

            nameValuePairs = new ArrayList<NameValuePair>(4);               

            nameValuePairs.add(new BasicNameValuePair("iSiteID","1"));          
            nameValuePairs.add(new BasicNameValuePair("sVideoURL",scanCode));
            Log.e("scancode",""+ scanCode);
            nameValuePairs.add(new BasicNameValuePair("sDeviceID",SplashActivity.deviceId));
            Log.e("sDeviceID",""+ SplashActivity.deviceId);
            nameValuePairs.add(new BasicNameValuePair("sDeviceModel",SplashActivity.deviceModelName));
            Log.e("sDeviceModel",""+ SplashActivity.deviceModelName);

            responce = webservice.callhttppost_numvaluepair(URL, nameValuePairs);
        //  Log.e("Stiryscanstorysave responce", responce);         

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

            //progressDialog.dismiss();         
            if (responce.contains("InCorrect QR Code !")) {

                AlertDialog adddrug1 = new AlertDialog.Builder(
                        VideoActivity.this)
                        .setTitle("Message")
                        .setMessage("InCorrect QR Code !")
                        .setPositiveButton("Ok",
                                new DialogInterface.OnClickListener() {

                                    public void onClick(DialogInterface dialog,
                                            int whichButton) {                                  

                                        startActivity(new Intent(getBaseContext(),
                                                HomeActivity.class));
                                    }

                                }).create();

                adddrug1.show();     

            }else {     

                StoryScanSaveListGet();                 
                mVideoView.setVideoURI(Uri.parse(scanCode));                      
                mVideoView.setMediaController(new MediaController(VideoActivity.this));
                mVideoView.requestFocus();          
                mVideoView.start(); 

            }
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            /*progressDialog = new ProgressDialog(VideoActivity.this);          
            progressDialog.setCancelable(false);
            progressDialog.show();  */  
        }       

        public void StoryScanSaveListGet() {
            // TODO Auto-generated method stub

            id.clear();
            site_id.clear();
            store_name.clear();
            store_url.clear();
            store_phone.clear();
            video_count.clear();

            try {

                JSONObject jmain = new JSONObject(responce);
                JSONArray jarray = jmain.getJSONArray("tblCustomer");

                JSONObject j_one = (JSONObject) jarray.get(0);

                Log.v("Responce", responce);

                for (int i = 0; i < jarray.length(); i++) {

                    j_one = (JSONObject) jarray.get(i);                         

                    id.add(j_one.get("id").toString());
                    site_id.add(j_one.get("site_id").toString());
                    store_name.add(j_one.get("store_name").toString());
                    store_url.add(j_one.get("store_url").toString());
                    store_phone.add(j_one.get("store_phone").toString());
                    video_count.add(j_one.get("video_count").toString());                                   
                }

                storeurl =j_one.get("store_url").toString();
                storephone = j_one.get("store_phone").toString();
                videocount = j_one.get("video_count").toString();
                storename = j_one.get("store_name").toString();

                Log.i("id", ""+ id);
                Log.i("site_id",  ""+ site_id);     
                Log.i("store_name", ""+ store_name);
                Log.i("store_url",  ""+ store_url);     
                Log.i("store_phone",  ""+ store_phone);
                Log.i("video_count", ""+ video_count);          

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally {
                responce = null;
            }
        }
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        Log.d("tag", "onPause called");
        super.onPause();
        stopPosition = mVideoView.getCurrentPosition(); // stopPosition is an
                                                        // int
        mVideoView.pause();

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        Log.d("TAG", "onResume called");

        mVideoView.seekTo(stopPosition);
        mVideoView.start(); // 
    } 
```

嗨，如果互联网不可用，我想打开警报，并检查响应是否超时..这怎么可能？？？帮帮我..这是我的异步任务代码，它是新的**GetVideoUrlAsyn().execute();** 方法..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T06:14:59.600

在执行 AsyncTask 之前检查网络连接，

```
if(isNetworkAvailable(this))
{
new GetVideoUrlAsyn().execute();
} 
```

这是方法定义，

```
 public boolean isNetworkAvailable(Context ctx)
{
    ConnectivityManager cm = (ConnectivityManager)ctx.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()&& cm.getActiveNetworkInfo().isAvailable()&& cm.getActiveNetworkInfo().isConnected()) 
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

`callhttppost_numvaluepair(URL, nameValuePairs)`在你的`WebServiceCall`课堂方法中做这样的事情，

```
HttpParams basicparams = new BasicHttpParams();
URI uri = new URI(url);
HttpPost method = new HttpPost(uri);
int timeoutConnection = 60000;//set your timeout period
HttpConnectionParams.setConnectionTimeout(basicparams,
        timeoutConnection);
DefaultHttpClient client = new DefaultHttpClient(basicparams);
    //and then rest of your code 
```

**注意：** 不要忘记将权限放在清单文件中，

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:08:49.760

您应该使用其他 SO 答案中提到的广播接收器，但是由于您已经询问了其他方式如何执行此操作，因此您可以这样做：

```
 * Checks for an existing network connectivity
 * 
 * @param context
 *            The {@link Context} which is needed to tap
 *            {@link Context#CONNECTIVITY_SERVICE}
 * @return True if network connection is available
 */
public static boolean isNetworkAvailable(Context context) {
    ConnectivityManager connectivity = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    if (connectivity == null) {
        return false;
    } else {
        NetworkInfo[] info = connectivity.getAllNetworkInfo();
        if (info != null) {
            for (int i = 0; i < info.length; i++) {
                if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                    return true;
                }
            }
        }
    }
    return false;
} 
```

需要在清单文件中指定额外的权限

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:11:20.153

```
if(CheckNetwork){
new GetVideoUrlAsyn().execute();
}else{
// Check internet connection
} 
```

和

```
private boolean CheckNetwork() {
    ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    if (conMgr.getActiveNetworkInfo() != null
            && conMgr.getActiveNetworkInfo().isAvailable()
            && conMgr.getActiveNetworkInfo().isConnected()) {
        return true;
    } else {
        return false;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:06:55.050

在执行 asyncTask 之前检查互联网

```
if(checkNetwork)
{
new GetVideoUrlAsyn().execute();    
}
else
{
 // do stuff
} 
```

# django - Django：如何取消链接通用关系？

> ID：15287665
> 
> 赞同：1
> 
> 时间：2013-03-08T05:58:45.233
> 
> 标签：django, django-1.4

如何取消链接通用关系？

我只想取消 Note 和 Customer 的链接。

模型.py

```
class Note(models.Model):
    contents = models.TextField()

    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

class Customer(models.Model):
    name = models.CharField(max_length=50, unique=True,)
    notes = generic.GenericRelation(Note, null=True) 
```

和

```
>>> cs=Customer.objects.get(pk=1)
```

```
>>> cs.notes.all()[0].delete()
```

但`cs.notes.all()[0]`被完全删除。

我不想完全删除。我只是想取消链接...

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:58:01.800

`content_type`唯一的“链接”存在于对象的and指的是`object_id`实例这一事实。所以，改变这些，链接就会消失。`Note``Customer`

# android - StarIOSDK V340 Android 4.1 Get Status 连接打印机失败

> ID：15287667
> 
> 赞同：1
> 
> 时间：2013-03-08T05:58:54.993
> 
> 标签：android, bluetooth, stario-sdk

我正在运行 Android 4.1.2 的三星 Note II 和运行 CM10.1 的 HTC ONE X 上测试 StarIOSDK v340。将演示应用程序安装到两部手机后，应用程序能够看到通过蓝牙连接的 SM-S301(ARM) (Firmware v1.0 2010/01/05)，但是当我点击“获取状态”按钮时，应用程序提示如下错误：

**失败** 连接打印机失败

这就是我从 DDMS (HTC ONE X) 得到的

```
> 03-08 13:48:42.573: W/BluetoothAdapter(32065): getBluetoothService()
> called with no BluetoothManagerCallback 03-08 13:48:42.583:
> D/BluetoothSocket(32065): connect(), SocketState: INIT, mPfd:
> {ParcelFileDescriptor: FileDescriptor[48]} 
```

这是来自 logcat（HTC ONE X）：

```
 D/BluetoothAdapterService(1090961856)(14494): getState(): mAdapterProperties: com.android.bluetooth.btservice.AdapterProperties@4106c550
    D/BluetoothAdapterService(1090961856)(14494): getState(): mAdapterProperties: com.android.bluetooth.btservice.AdapterProperties@4106c550
    D/BluetoothAdapterService(1090961856)(14494): Get Bonded Devices being called
    D/BluetoothAdapterService(1090961856)(14494): getState(): mAdapterProperties: com.android.bluetooth.btservice.AdapterProperties@4106c550
    W/BluetoothAdapter(19922): getBluetoothService() called with no BluetoothManagerCallback
    D/BTIF_SOCK(14494): service_uuid: 00001101-0000-1000-8000-00805f9b34fb
    D/BluetoothSocket(19922): connect(), SocketState: INIT, mPfd: {ParcelFileDescriptor: FileDescriptor[49]}
    I/        (14494): vendor op - 7
    D/dalvikvm( 1562): GC_EXPLICIT freed <1K, 79% free 2366K/10876K, paused 1ms+2ms, total 17ms
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    W/bt-btif (14494): info:x10
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    D/BluetoothAdapterService(1090961856)(14494): getState(): mAdapterProperties: com.android.bluetooth.btservice.AdapterProperties@4106c550
    D/BluetoothManagerService(  607): Message: 20
    D/BluetoothManagerService(  607): Added callback: android.bluetooth.IBluetoothManagerCallback$Stub$Proxy@419cda80:true
    I/HeadsetService(18313): Headset=false; Bluetooth=false
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    W/bt-sdp  (14494): process_service_search_attr_rsp
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
    I/        (14494): vendor op - 7
E/bt-rfcomm(14494): RFCOMM_CreateConnection - already opened state:2, RFC state:4, MCB state:5
E/bt-btif (14494): bta_jv_rfcomm_connect, RFCOMM_CreateConnection failed
W/bt-btif (14494): invalid rfc slot id: 105 
```

这是 DDMS（注 2）：

```
03-08 15:56:14.950: I/System.out(24466): debugger has settled (1446)
03-08 15:56:15.085: D/libEGL(24466): loaded /system/lib/egl/libEGL_mali.so
03-08 15:56:15.085: D/libEGL(24466): loaded /system/lib/egl/libGLESv1_CM_mali.so
03-08 15:56:15.090: D/libEGL(24466): loaded /system/lib/egl/libGLESv2_mali.so
03-08 15:56:15.090: D/(24466): Device driver API match
03-08 15:56:15.090: D/(24466): Device driver API version: 10
03-08 15:56:15.090: D/(24466): User space API version: 10 
03-08 15:56:15.090: D/(24466): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
03-08 15:56:15.120: D/OpenGLRenderer(24466): Enabling debug mode 0
03-08 15:56:27.650: D/GestureDetector(24466): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
03-08 15:56:27.770: E/SensorManager(24466): thread start
03-08 15:56:27.775: D/SensorManager(24466): registerListener :: handle = 0  name= LSM330DLC Acceleration Sensor delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41d35578
03-08 15:56:27.795: D/dalvikvm(24466): GC_CONCURRENT freed 63K, 5% free 12560K/13191K, paused 4ms+1ms, total 14ms
03-08 15:56:27.795: D/dalvikvm(24466): WAIT_FOR_CONCURRENT_GC blocked 3ms
03-08 15:56:27.870: D/SensorManager(24466): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41d35578
03-08 15:56:27.870: D/Sensors(24466): Remain listener = Sending .. normal delay 200ms
03-08 15:56:27.870: I/Sensors(24466): sendDelay --- 200000000
03-08 15:56:27.870: D/SensorManager(24466): JNI - sendDelay
03-08 15:56:27.870: I/SensorManager(24466): Set normal delay = true
03-08 15:56:27.895: D/SensorManager(24466): registerListener :: handle = 0  name= LSM330DLC Acceleration Sensor delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41d35578
03-08 15:56:30.825: D/GestureDetector(24466): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
03-08 15:56:30.865: D/dalvikvm(24466): GC_CONCURRENT freed 80K, 5% free 12917K/13575K, paused 1ms+1ms, total 11ms
03-08 15:56:30.870: D/AbsListView(24466): Get MotionRecognitionManager
03-08 15:56:30.950: D/dalvikvm(24466): GC_CONCURRENT freed 54K, 5% free 13336K/13959K, paused 1ms+12ms, total 26ms
03-08 15:56:30.980: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:30.990: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.000: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.005: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.015: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.025: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.055: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.060: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.095: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.105: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.115: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.125: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.135: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.145: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.185: D/SensorManager(24466): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41d35578
03-08 15:56:31.185: D/Sensors(24466): Remain listener = Sending .. normal delay 200ms
03-08 15:56:31.185: I/Sensors(24466): sendDelay --- 200000000
03-08 15:56:31.185: D/SensorManager(24466): JNI - sendDelay
03-08 15:56:31.185: I/SensorManager(24466): Set normal delay = true
03-08 15:56:31.210: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.215: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.225: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.235: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.245: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.255: E/Dynamiclayout(24466): java.lang.IndexOutOfBoundsException: charAt: 0 >= length 0
03-08 15:56:31.995: D/GestureDetector(24466): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
03-08 15:56:32.145: D/SensorManager(24466): registerListener :: handle = 0  name= LSM330DLC Acceleration Sensor delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41d35578
03-08 15:56:33.175: D/GestureDetector(24466): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
03-08 15:56:33.210: V/BluetoothSocket.cpp(24466): initSocketNative
03-08 15:56:33.210: V/BluetoothSocket.cpp(24466): ...fd 53 created (RFCOMM, lm = 26)
03-08 15:56:33.210: V/BluetoothSocket.cpp(24466): initSocketFromFdNative
03-08 15:56:33.220: D/BluetoothUtils(24466): isSocketAllowedBySecurityPolicy start : device null
03-08 15:56:36.685: V/BluetoothSocket.cpp(24466): connectNative
03-08 15:56:37.015: V/BluetoothSocket.cpp(24466): ...connect(53, RFCOMM) = 111 (errno 111)
03-08 15:56:37.160: D/SensorManager(24466): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41d35578
03-08 15:56:37.160: D/Sensors(24466): Remain listener = Sending .. normal delay 200ms
03-08 15:56:37.160: I/Sensors(24466): sendDelay --- 200000000
03-08 15:56:37.160: D/SensorManager(24466): JNI - sendDelay
03-08 15:56:37.160: I/SensorManager(24466): Set normal delay = true
03-08 15:56:38.740: D/GestureDetector(24466): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
03-08 15:56:38.785: D/SensorManager(24466): registerListener :: handle = 0  name= LSM330DLC Acceleration Sensor delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@41d35578 
```

这是 logcat（注 2）：

```
V/BluetoothSocket.cpp( 8598): initSocketNative
V/BluetoothSocket.cpp( 8598): ...fd 53 created (RFCOMM, lm = 26)
V/BluetoothSocket.cpp( 8598): initSocketFromFdNative
I/BluetoothPolicyService( 2480): getBluetoothDataTransferAllowed 
W/BluetoothPolicyService( 2480): com.android.server.enterprise.EdmStorageProvider$SettingNotFoundException: Admin data is null
D/BluetoothPolicyService( 2480): MDM: isProfileEnabled = true
W/BluetoothPolicyService( 2480): com.android.server.enterprise.EdmStorageProvider$SettingNotFoundException: Admin data is null
D/BluetoothUtils( 8598): isSocketAllowedBySecurityPolicy start : device null
V/BluetoothService.cpp( 2480): createDeviceNative
V/BluetoothService.cpp( 2480): createDeviceNative
V/BluetoothEventLoop.cpp( 2480): onCreateDeviceResult
V/BluetoothEventLoop.cpp( 2480): onCreateDeviceResult
E/BluetoothEventLoop.cpp( 2480): onCreateDeviceResult: D-Bus error: org.bluez.Error.AlreadyExists (Already Exists)
V/BluetoothService.cpp( 2480): discoverServicesNative
V/BluetoothService.cpp( 2480): ... Object Path = /org/bluez/12444/hci0/dev_00_15_0E_E0_BC_79
V/BluetoothService.cpp( 2480): ... Pattern = , strlen = 0
W/AlarmManager( 2480): FACTORY_ON= 0
V/BluetoothEventLoop.cpp( 2480): event_filter: Received signal org.bluez.Device:PropertyChanged from /org/bluez/12444/hci0/dev_00_15_0E_E0_BC_79
D/BluetoothEventLoop( 2480): Device property changed
D/BluetoothA2DPStateReceiver(12420): BluetoothA2DPStateReceiver constructor call()
D/BluetoothA2DPStateReceiver(12420): onReceive(): action = android.bluetooth.device.action.ACL_CONNECTED
D/BluetoothA2DPStateReceiver(12420): ACTION_ACL_CONNECTED
D/BluetoothA2DPSinkInfo(12420): checkBlackListCarkit() : isBlackListCarkit false
D/BluetoothNotiBroadcastReceiver( 6443): onReceive
V/BluetoothEventLoop.cpp( 2480): onDiscoverServicesResult
V/BluetoothEventLoop.cpp( 2480): ... Device Path = /org/bluez/12444/hci0/dev_00_15_0E_E0_BC_79
V/BluetoothService.cpp( 2480): getDevicePropertiesNative
V/BluetoothService.cpp( 2480): getDeviceServiceChannelNative
V/BluetoothService.cpp( 2480): ... pattern = 00001101-0000-1000-8000-00805f9b34fb
V/BluetoothService.cpp( 2480): ... attr_id = 0X4
V/BluetoothSocket.cpp( 8598): connectNative
V/BluetoothEventManager( 6443): Received android.bluetooth.device.action.UUID
I/CachedBluetoothDevice( 6443): updateProfiles
I/LocalBluetoothProfileManager( 6443): updateProfiles
D/BluetoothDevicePreference( 6443): Is my device connected::false
I/BluetoothDevicePreference( 6443): summaryResId != 0
D/BluetoothDevicePreference( 6443): Is my device connected::false
I/BluetoothDevicePreference( 6443): summaryResId != 0
D/BluetoothDevicePreference( 6443): Is my device connected::false
I/BluetoothDevicePreference( 6443): summaryResId != 0
D/BluetoothDevicePreference( 6443): Is my device connected::false
I/BluetoothDevicePreference( 6443): summaryResId != 0
D/BluetoothDevicePreference( 6443): Is my device connected::false
I/BluetoothDevicePreference( 6443): summaryResId != 0
D/BluetoothDevicePreference( 6443): Is my device connected::false
I/BluetoothDevicePreference( 6443): summaryResId != 0
D/BluetoothDevicePreference( 6443): Is my device connected::false
I/BluetoothDevicePreference( 6443): summaryResId != 0
V/AlarmManager( 2480): waitForAlarm result :1
V/AlarmManager( 2480): trigger ELAPSED_REALTIME_WAKEUP or RTC_WAKEUP
I/EventLogService( 6454): Aggregate from 1362723789949 (log), 1362723789949 (data)
W/AlarmManager( 2480): FACTORY_ON= 0
D/dalvikvm( 6454): GC_CONCURRENT freed 409K, 8% free 13296K/14407K, paused 2ms+2ms, total 17ms
V/BluetoothSocket.cpp( 8598): ...connect(53, RFCOMM) = 111 (errno 111) 
```

然后我尝试从商店安装演示应用程序，甚至抛出了模糊的错误消息。

有什么建议吗？

# javascript - Google+ 登录按钮 [class='g-signin']

> ID：15287669
> 
> 赞同：5
> 
> 时间：2013-03-08T05:58:57.930
> 
> 标签：javascript, css, button, google-plus, signing

我正在尝试为我的网站制作一个 google+ siginin 按钮。我浏览了这个链接[https://developers.google.com/+/web/signin/#button_attributes](https://developers.google.com/+/web/signin/#button_attributes)并试图让它工作，但现在我的样式都搞砸了。我无法处理 CSS 中的 [class='g-sinin'] 。 ![在此处输入图像描述](../Images/18e902a46e8eb21ce22cda312ace0878.png)
这是我的代码：

```
 <section class='login_G' >
   <span class='g-signin' data-callback='signinCallback' 
   data-scope='https://www.googleapis.com/auth/plus.login'></span>
</section> 
```

这是我的CSS：

```
.login_G {
  cursor: pointer;
  margin-left: 35px;
  float: left;
  height: 72px;
  width: 72px;
  background:url(images/register-google-sprite.png) 0 0;
} 
```

如何隐藏默认类`class='g-signin'`或使其良好。如果我删除跨度内的类，那么整个 google+ 登录功能就会关闭。谁能告诉我单击背景图像时如何使 siginin 功能起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T10:29:45.863

该[文档现在包含一个演示和代码示例](https://developers.google.com/+/web/signin/#customizing_the_sign-in_button)，用于说明如何自定义 Google+ 登录按钮以及有关指南的一些关键信息。

Freshbm 的答案很接近，但在示例中存在多个问题，因此无法正常工作。

以下代码包含所有必需参数，并从自定义标记正确生成登录按钮。按钮和图标的风格化完全取决于您，同时确保遵循[品牌指南](https://developers.google.com/+/branding-guidelines)。

```
<script type="text/javascript">
  (function() {
    var po = document.createElement('script');
    po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/client:plusone.js?onload=render';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(po, s);
  })();

  function render() {
    gapi.signin.render('customBtn', {
      'callback': 'signinCallback',
      'clientid': 'xxxxxxxxxx.apps.googleusercontent.com',
      'cookiepolicy': 'single_host_origin',
      'scope': 'https://www.googleapis.com/auth/plus.login'
    });
  }
  function signinCallback(authResult) {
    // Respond to signin, see https://developers.google.com/+/web/signin/
  }
  </script>
  <div id="customBtn" class="customGPlusSignIn">
    <span class="icon"></span>
    <span class="buttonText">Google</span>
  </div> 
```

# python - 在python中向子类添加字段

> ID：15287671
> 
> 赞同：0
> 
> 时间：2013-03-08T05:59:05.743
> 
> 标签：python, subclass

我有一个基类

```
class Person(object):
    def __init__(self,name,age):
        self.name = name
        self.age = age
    def title(self):
        return self.name+str(self.age) 
```

我需要对其进行子类化以获取 Employee 类，其中 empid 也是一个属性

```
class Employee(Person):
    def __init__(self,*args,**kwargs,empid):
        Person.__init__(self, *args)
        self.empid= empid
    def title(self):
        return self.name+str(self.age)+self.empid 
```

例如，假设 Jon 是 empid="001" 的 Employee

```
j = Employee('Jon',30,'001')
print j.title() 
```

应该给`Jon30001`

我收到语法错误..我做错了子类化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:03:47.330

可选参数必须放在方法签名的最后。您的原始帖子中也存在缩进问题，但看起来这是发布时出现的复制/粘贴错误。以下应该更适合您。

[编辑]

```
class Person(object):
    def __init__(self,name,age):
        self.name = name
        self.age = age
    def title(self):
        return self.name+str(self.age)

class Employee(Person):
    def __init__(self,*args,**kwargs):
        Person.__init__(self, *args)
        self.empid= kwargs.get('empid')
    def title(self):
        return self.name+str(self.age)+self.empid 
```

输出->

```
>>> j = Employee('Jon',30,empid="001")
>>> j.title()
'Jon30001' 
```

# java - 如何在我的 ant 脚本中包含额外的类路径？

> ID：15287675
> 
> 赞同：-1
> 
> 时间：2013-03-08T05:59:22.297
> 
> 标签：java, ant

我有一个java项目。该项目引用了一个我不希望与我构建的包一起导出的共享库。共享库是一个 jar 文件，位于我项目的文件夹中。

项目中的 src 引用了这个共享库。当我尝试使用 ant 构建时，javac 无法将引用链接到共享库，这表明该库未包含在类路径中。

谁能告诉我如何在不将库移动到我的 libs 文件夹中的情况下包含类路径？如果我将它移动到我的 libs 文件夹中，我认为它将被导出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:06:02.647

```
<classpath>
      <pathelement path="${classpath}"/>
      <fileset dir="lib">
        <include name="**/*.jar"/>
      </fileset>
      <pathelement location="classes"/>
      <dirset dir="${build.dir}">
        <include name="apps/**/classes"/>
        <exclude name="apps/**/*Test*"/>
      </dirset>
      <filelist refid="third-party_jars"/>
</classpath> 
```

[Ant 文档教程](http://ant.apache.org/manual/using.html)

您可以添加类路径元素以在类路径元素中添加库

# mongodb - 生成 Mongo 查询

> ID：15287676
> 
> 赞同：0
> 
> 时间：2013-03-08T05:59:27.817
> 
> 标签：mongodb

我是 Mongo DB 的新用户，请多多包涵。

我有一个存储使用日志的 Mongo 数据库，对于每个`jobID`，都有一个存储在名为 的字段中的可执行文件列表`"exec"`，它们构成了一个工作流。

我想查询数据库以生成软件对作为作业的一部分使用的次数。

前任。

> 如果`softwareA`和`softwareB`where 在相同的`jobID`20 次中使用，查询将为这对返回 20，我希望这可以递归地检查所有软件对。

有人可以就如何构建查询提出建议吗？谢谢！

# ios - 警告：尝试呈现视图不在窗口层次结构中的 ViewController

> ID：15287678
> 
> 赞同：31
> 
> 时间：2013-03-08T05:59:34.440
> 
> 标签：ios, objective-c, xcode, uiviewcontroller

在我的一个应用程序中，我从该`application didReceiveLocalNotification`方法调用 viewController。页面加载成功，但显示警告：

```
 Warning: Attempt to present <blankPageViewController: 0x1fda5190> on 
 <ViewController: 0x1fd85330> whose view is not in the window hierarchy! 
```

我的代码如下：

```
 -(void) application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {

    blankPageViewController *myView = [[blankPageViewController alloc] 
               initWithNibName:@"blankPageViewController" bundle: nil];
    myView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self.viewController presentViewController:myView animated:NO completion:nil];  
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-12T11:51:51.120

最后我用下面的代码解决了这个问题。

```
-(void) application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {
       self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
       self.blankviewController = [[blankPageViewController alloc] initWithNibName:@"blankPageViewController" bundle:nil];
       self.window.rootViewController = self.blankviewController;
       [self.window makeKeyAndVisible];
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-20T01:41:36.147

放

```
[self.viewController presentViewController:myView animated:NO completion:nil]; 
```

进入一个函数，例如

```
- (void)yourNewFunction
{
    [self.viewController presentViewController:myView animated:NO completion:nil];
} 
```

然后这样称呼它：

```
[self performSelector:@selector(yourNewFunction) withObject:nil afterDelay:0.0]; 
```

[问题在这里](https://stackoverflow.com/a/15287859/1953914)得到了描述，为什么这`performSelector:withObject:afterDelay`能解决这个问题？因为直到下一次运行循环才会调用选择器。所以事情有时间安定下来，你会跳过一个运行循环。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-08T06:13:54.947

根据我的假设，我感觉您正试图`myView`从`self.viewController`以前呈现的`self.viewController`内容附加或放置在窗口层次结构中。因此，请确保在出现/附加到窗口`myView`后呈现。`self.viewController`

[为什么模态视图控制器不能在 viewDidLoad 中显示另一个？](http://www.cocoabuilder.com/archive/cocoa/297736-why-can-a-modal-view-controller-present-another-in-viewdidload.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T06:04:43.720

这可能是因为当出现 VC 时，viewcontroller 的视图当前没有加载到窗口层次结构中......

```
-(void) application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    UINavigationController *navigationController = (UINavigationController*) self.window.rootViewController;
    rootViewController = [[navigationController viewControllers] objectAtIndex:0];
    blankPageViewController *myView = [[blankPageViewController alloc] initWithNibName:@"blankPageViewController" bundle: nil];
    [rootViewController presentModalViewController:myView animated:YES];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-09T11:59:54.070

我遇到了类似的问题，当应用程序进入前台时，我正在 AppDelegate.m 中调用 presentViewController：

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSDate * lastActive = [[NSUserDefaults standardUserDefaults] objectForKey:@"lastActive"];

    double interval = [[NSDate date] timeIntervalSinceDate:lastActive];

    NSLog(@"Time Interval: %f", interval);

    if (interval > 900) { // interval is in seconds, so 900 seconds = 15 mins
        Login *pres = [self.window.rootViewController.storyboard instantiateViewControllerWithIdentifier:@"login"];

        UINavigationController *navi = ((UINavigationController*)self.window.rootViewController);
        if (navi.presentedViewController) {
            [navi dismissViewControllerAnimated:YES completion:^{
                [navi presentViewController:pres animated:NO completion:nil];
            }];
        } else {
            [navi presentViewController:pres animated:NO completion:nil];
        }
    }
} 
```

* * *

这没有问题，因为它首先关闭视图控制器（无论已将哪些视图推送到它上面）如果它在呈现登录视图控制器之前存在。如果没有，那么我可以直接显示登录视图控制器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-22T18:42:52.137

边缘案例：

有些人可能会通过 Google 找到这一点，值得指出的是，如果您将视图作为根视图控制器加载，而该视图未标记为 Storyboard 中的初始视图（另一个视图是），那么有时会引发此错误，然后您在顶部加载另一个视图。`applicationdidfinish...`例如，在从App Delegate的方法中以编程方式加载的登录视图中。只需将初始视图（拖动 Storyboard 中的箭头）更改为适合您的层次结构的视图。深奥，含糊，但值得指出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T06:03:10.330

如果您的应用程序类型 id UINavigationController 那么您可以使用。

```
-(void) application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {

blankPageViewController *myView = [[blankPageViewController alloc]
                                   initWithNibName:@"blankPageViewController" bundle: nil];
myView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self.navigationController presentViewController:myView animated:NO completion:nil]; } 
```

希望这会帮助你。祝一切顺利 ！！！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-09T05:51:43.147

因为**`Swift 2.0`**我使用了覆盖`viewDidAppear`：

让 vc = self.storyboard?.instantiateViewControllerWithIdentifier("Second") as！第二视图控制器

```
self.presentViewController(vc, animated: true, completion: nil) 
```

其中“Second”是身份检查器中 SecondViewController 的情节提要 ID。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-03T07:35:21.950

```
I have used Navigation Controller and on which i have used a
ModalViewController to present a Popup(Present over current context). 
From this Popup i am opening a ViewController Modally which 
caused the Warning. So to resolve i did below change:

[self.presentedViewController performSegueWithIdentifier:@"PresentScreenSegueId" sender:sender]; 
```

# javascript - 单击按钮时弹出

> ID：15287679
> 
> 赞同：0
> 
> 时间：2013-03-08T05:59:36.813
> 
> 标签：javascript, jquery, html, wordpress

我有一个带有类加入按钮的加入按钮 当我单击该按钮时，我希望收到一个选项，可以作为会员加入`type A`还是会员加入`type B`，然后链接到正确的页面。我可以请一些帮助来解决这个功能吗？我应该使用ajax吗？

```
<?php if ( !is_user_logged_in() ): ?>
    <a href="www.domain.com" class="join-button">Join</a>
<?php endif; ?> 
```

CSS：

```
.join-button {
   -moz-box-shadow:inset 0px 1px 0px 0px #f5840c;
    -webkit-box-shadow:inset 0px 1px 0px 0px #f5840c;
    box-shadow:inset 0px 1px 0px 0px #f5840c;
    background-color:#f5840c;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    border:1px solid #f5840c;
    display:inline-block;
    color:#ffffff;
    font-family:Arial;
    font-size:14px;
    font-weight:bold;
    padding: 1px 4px;
    text-decoration:none;
    text-shadow:1px 1px 0px #f5840c;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:43:21.447

只需使用可以从[这里下载的 jquery UI 插件](http://jqueryui.com/download/)

```
 <script>
  $(function() {
    $( "#dialog" ).dialog();
  });
  </script>
<body>
<div id="dialog" title="Basic dialog">
  <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div>
</body> 
```

要获得更好的文档和演示，请访问[此链接](http://jqueryui.com/dialog/)并在演示中搜索对话框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:16:16.353

用户 Jquery UI 插件在这里是[小提琴](http://jsfiddle.net/prabhu5013/6zT4b/1/#update)

```
 $("button.joinbutton").on("click", function () {

  $( "#dialog" ).dialog();
    }); 
```

# c - 为什么这不能消除 C 中的双空格？这是 K & R 中的 getchar() 练习之一

> ID：15287680
> 
> 赞同：0
> 
> 时间：2013-03-08T05:59:42.653
> 
> 标签：c, while-loop, getchar, putchar

这是一个 K&R 练习。它应该用一个空格代替双倍或更多。相反，它完全反映了输入、空间和所有内容。另外，为什么我必须在其他练习中使用 EOF (ctrl-d) 而在这个练习中使用 RETURN (Enter)？（我在 Ubuntu 上运行它，但在 mac 上使用 ssh。）

```
 #include <stdio.h>

 main()
 {

   int c;

   c = getchar();

   while (c != EOF)
     {
       while (c != EOF | c != ' ')
         {
           putchar(c);
           c = getchar();
         }
       putchar(c);
       c = getchar();
         while (c == ' ' | c != EOF)
           c = getchar();
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T06:02:49.553

显示的片段有 [至少] 一个逻辑错误和另一个错误，这是由于逻辑布尔运算符和按位布尔运算符之间的混淆而导致的。

**逻辑错误**：

您的第二个测试`c != EOF`是 OR-ed，而字符测试不是空格（`c != ' ')`...由于您在 c 不是 EOF 时进行此 OR-ed 测试（这是 的控制条件 `while`），所以 OR-ed 测试永远是真的！

```
 ...
   while (c != EOF)
     {
       // This test always true regardless of c being a space or not
       // Also it should be a logical OR, if at all.  The bitwise OR will produce
       // odd results if you are not sure of the bit patterns of the operands.
       while (c != EOF | c != ' ')  
         {
           putchar(c);
           c = getchar();
         }
     ... 
```

**运算符错误的混淆**：在这种情况下，您需要使用*逻辑*或（或实际上是逻辑与）运算符，即`||`和`&&`分别而不是按位布尔运算符（`|`和`&`）。

您通常会发现，在 C 语言中，您经常使用逻辑运算符来表示布尔条件，因此，当您实际上需要处理变量的位模式时（例如，屏蔽某些位或强制它们成为设置等）

现在，上面是“按原样”解决代码中的问题，只是解释了为什么要像处理其他字符一样处理空格......关于 K&R 练习的目标：用一个空格替换几个空格的序列，显示的逻辑是肯定错误的。我不想在这里放弃它，但有一些提示：

*   引入一个“状态”变量，指示前一个字符是否为空格
*   使用单个 while 循环（而不是 EOF 或您希望的任何结束条件）
*   在循环内系统地输出读取的字符，除非设置了状态变量
*   有条件地输出当前字符后，更新状态字符。

作为一般提示，*当*[***您***](http://martinfowler.com/bliki/CodeSmell.html)需要在循环中重复循环结束条件和/或引入您从某些输入中读取的多个点（此处为 multiple `getchar()`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:06:09.100

您的代码有两个问题。

第一个是您尝试使用逻辑或运算符 (||)，但您使用的是按位或 (|)。第二个是你应该使用逻辑与而不是逻辑或，无论如何：

```
while (c != EOF && c != ' ') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T06:08:43.423

试试这个循环：

```
 while (c != EOF)
     {
       if (c == ' ')
         {
           putchar(c);
           while(c == ' ' && c != EOF)
             c = getchar();
         }
       else
         {
           if (c != EOF)
             putchar(c);
           c = getchar();
         }
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-26T23:44:10.990

这是很多获取和放置，以及值的检查。这里有一些更清洁的东西，也可以处理标签。

```
void main (void)
{
int F_space=F_tab=0;    // Flags for special chars
char ch;
do
    {
    ch = getchar();

    // test for special characters
    switch (ch)
        {
        case ' ':   // space
            F_space = 1;
            continue;

        case '\t':  // tab
            F_tab = 1;
            continue;

        default:    // anything else
            // output a space if necessary
            if (F_space || F_tab) {
                F_space = F_tab = 0;    // clear flags
                putchar (' ');
            }
            break;
        }

    // output the character
    putchar (ch);
    break;
    } 
while (ch != EOF); 
```

# android - onitemclicklistener 在自定义 listvew 中不起作用。？

> ID：15287683
> 
> 赞同：0
> 
> 时间：2013-03-08T05:59:54.457
> 
> 标签：android

**主要的.xml**

```
<include layout="@layout/header" />

<ListView
    android:id="@+id/alist"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:dividerHeight="0dp"
    android:listSelector="@drawable/list_selector" />

<TextView
    android:id="@+id/android:empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/no_reminders"
    android:visibility="gone" />
<TextView
android:id="@+id/TextView02" 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text=""
/> 
```

**ReminderListActivity.java**

```
package com.dummies.android.taskreminder;

import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

import com.dummies.android.taskreminder.R;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.ContextMenu;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.view.Window;
import android.view.WindowManager;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.CursorAdapter;
import android.widget.ImageButton;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.SeekBar;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView.AdapterContextMenuInfo;

public class ReminderListActivity extends Activity implements OnClickListener {
    private static final int ACTIVITY_CREATE = 0;
    private static final int ACTIVITY_EDIT = 1;

    private RemindersDbAdapter mDbHelper;
    ListView lvRemind;
    ListView llv;
    ImageButton btnAdd, btnBack, btnSettings;
    TextView text;
    LinearLayout layout;
    ArrayAdapterExample aAdapter;
    String remainTime;
    int finalVal;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        // setContentView(R.layout.reminder_list);
        LayoutInflater inflate = LayoutInflater.from(this);
        layout = (LinearLayout) inflate.inflate(R.layout.main, null);
        this.setContentView(layout);
        btnAdd = (ImageButton) findViewById(R.id.btnAdd);
        btnBack = (ImageButton) findViewById(R.id.btnBackMain);
        btnSettings = (ImageButton) findViewById(R.id.btnSettings);

        btnAdd.setOnClickListener(this);
        btnBack.setOnClickListener(this);
        btnSettings.setOnClickListener(this);
        mDbHelper = new RemindersDbAdapter(this);
        mDbHelper.open();

        llv = (ListView) findViewById(R.id.alist);
        fillData();

        llv.setAdapter(aAdapter);
        llv.setClickable(true);
        llv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub
                Toast.makeText(ReminderListActivity.this, "hello", Toast.LENGTH_SHORT).show();

            }
        });
        registerForContextMenu(llv);

    }

    private void fillData() {
        Cursor remindersCursor = mDbHelper.fetchAllReminders();
        startManagingCursor(remindersCursor);

        // Create an array to specify the fields we want to display in the list
        // (only TITLE)
        String[] from = new String[] { RemindersDbAdapter.KEY_TITLE };

        Log.d("Length: ", "" + from.length);
        // and an array of the fields we want to bind those fields to (in this
        // case just text1)
        int[] to = new int[] { R.id.text1 };

        // Now create a simple cursor adapter and set it to display
        // SimpleCursorAdapter reminders =
        // new SimpleCursorAdapter(this, R.layout.reminder_row, remindersCursor,
        // from, to);
        // setListAdapter(reminders);

        text = (TextView) findViewById(R.id.TextView02);

        // listview.setLayoutParams(new LinearLayout.LayoutParams(
        // LinearLayout.LayoutParams.FILL_PARENT,
        // LinearLayout.LayoutParams.FILL_PARENT));
        // layout.addView(listview);

        aAdapter = new ArrayAdapterExample(ReminderListActivity.this,
                mDbHelper.fetchAllReminders());

    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        MenuInflater mi = getMenuInflater();
        mi.inflate(R.menu.list_menu_item_longpress, menu);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_delete:
            AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
                    .getMenuInfo();
            mDbHelper.deleteReminder(info.id);
            fillData();
            return true;
        }
        return super.onContextItemSelected(item);
    }

    private void createReminder() {
        Intent i = new Intent(this, ReminderEditActivity.class);
        startActivityForResult(i, ACTIVITY_CREATE);
    }

    // @Override
    // protected void onListItemClick(ListView l, View v, int position, long id)
    // {
    // super.onListItemClick(l, v, position, id);
    // Intent i = new Intent(this, ReminderEditActivity.class);
    // i.putExtra(RemindersDbAdapter.KEY_ROWID, id);
    // startActivityForResult(i, ACTIVITY_EDIT);
    // }

    @Override
    protected void onActivityResult(int requestCode, int resultCode,
            Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent);
        fillData();
    }

    @SuppressLint("NewApi")
    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btnAdd:
            createReminder();
            break;
        case R.id.btnSettings:
            Intent i = new Intent(this, TaskPreferences.class);
            startActivity(i);
            break;
        case R.id.btnBackMain:
            onBackPressed();
            break;
        default:
            break;
        }

    }

    @SuppressLint("NewApi")
    @Override
    public void onBackPressed() {

        super.onBackPressed();
    }

    class ArrayAdapterExample extends CursorAdapter {

        public ArrayAdapterExample(Context context, Cursor c) {

            super(context, c);

        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {
            // TODO Auto-generated method stub
            SeekBar sBar = (SeekBar) view.findViewById(R.id.seekBarTime);

            String curDte = cursor.getString(cursor
                    .getColumnIndex(cursor.getColumnName(3)));

            TextView txtNote = (TextView) view.findViewById(R.id.label);
            TextView tvDateValue = (TextView) view.findViewById(R.id.tvValueDate);
            txtNote.setText(cursor.getString(cursor.getColumnIndex(cursor
                    .getColumnName(1))));
            DateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy hh:mm a");
            Date date = new Date();

            try {
                String format = "dd-MM-yyyy hh:mm a";

                DateFormat sdf = new SimpleDateFormat(
                        "EEE MMM dd HH:mm:ss zzz yyyy", Locale.ENGLISH);

                String v_date_str = cursor.getString(cursor
                        .getColumnIndex(cursor.getColumnName(4)));

                String curDate = cursor.getString(cursor
                        .getColumnIndex(cursor.getColumnName(3)));
                Log.d("CUrr SET DAT: ", curDate);

                // String setDate =sdf.format(dt + " " + tm);
                Date v_date = new SimpleDateFormat("yyyy-MM-dd HH:mm",
                        Locale.ENGLISH).parse(v_date_str);
                DateFormat formatter = null;

                formatter = new SimpleDateFormat("dd-MM-yyyy hh:mm a");

                Log.d("sset: ", "" + formatter.format(v_date));
                String currDate = dateFormat.format(date);

                String setDate = formatter.format(v_date);
                tvDateValue.setText(setDate);
                Date cDate = new SimpleDateFormat("dd-MM-yyyy hh:mm a")
                        .parse(currDate);
                Log.d("Current: ", "" + cDate);

                Date sDate = new SimpleDateFormat("dd-MM-yyyy hh:mm a")
                        .parse(setDate);

                Date startDate = new SimpleDateFormat("dd-MM-yyyy hh:mm a").parse(curDate);
                Log.d("Set: ", "" + sDate);

                long diff = sDate.getTime() - cDate.getTime();
                if(diff>0){
                    long dif = sDate.getTime() - startDate.getTime();
                    Log.d("Starting: ", ""+dif);
                    Log.d("Ending: ", ""+diff);

                    int dif1 = (int)dif;
                    int dif2 = (int)diff;

                    Log.d("Starting1: ", ""+dif1);
                    Log.d("Ending2: ", ""+dif2);

                    sBar.setMax(100);

                    finalVal = 100*dif2/dif1;

                    Log.d("Result: ", ""+finalVal*100);
                    TextView txtPer = (TextView)view.findViewById(R.id.tvPercent);
                    txtPer.setText(""+finalVal+"% left");
                    sBar.setProgress(finalVal);

                    double diffInHours = diff / ((double) 1000 * 60 * 60);
                    double minLeft = (diffInHours - (int) diffInHours) * 60;
                    long mLeft = Math.round(minLeft);

                    remainTime = "("+(int) diffInHours + "H " + mLeft
                            + "M)";
                    TextView txtTime = (TextView) view
                            .findViewById(R.id.tvBelowSeekBar);

                    txtTime.setText(remainTime);
                    txtTime.setTextColor(Color.MAGENTA);

                }
                else{
                    long diffRev = cDate.getTime() - sDate.getTime();
                    double diffInHours = diff / ((double) 1000 * 60 * 60);
                    double minLeft = (diffInHours - (int) diffInHours) * 60;
                    long mLeft = Math.round(minLeft);

                    remainTime = "(Overdue!)";

                    TextView txtTime = (TextView) view
                            .findViewById(R.id.tvBelowSeekBar);

                    txtTime.setText(remainTime);
                    txtTime.setTextColor(Color.RED);
                }

            } catch (ParseException e) {
                e.printStackTrace();
            }

        }

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {
            // TODO Auto-generated method stub
            LayoutInflater inflater = LayoutInflater.from(parent.getContext());

            View retView = inflater
                    .inflate(R.layout.list_remind, parent, false);

            return retView;
        }

    }

} 
```

**注意：我`onitemclicklistener`在 custom 上实现了`listview`。但它没有用。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:14:36.630

按照以下方式创建您的`ListView`控件，

```
llv = (ListView) layout.findViewById(R.id.alist); 
```

这样做的原因是您的 Listview 在您的正常布局中不可用，因为您正在代码中创建动态布局。

# c# - 实现相同方法的表单

> ID：15287686
> 
> 赞同：2
> 
> 时间：2013-03-08T06:00:05.570
> 
> 标签：c#, winforms, class, methods

我有两个表格表格 A 和表格 B，我将使用它们将信息输入到 XML 文件中。现在，这两种形式将不得不调用一些基本相同的方法（相同的名称，相同的实现）。

我不能在这种情况下使用基类，因为 Form A 和 Form B 已经继承自`System.Windows.Forms.Form`. 我应该只使用这两种形式将实现的接口吗？我怀疑这将是最好的方法，因为他们需要的方法是相同的。

你能建议一个更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:18:15.667

为了代码重用并遵循所谓的“DRY”原则，您需要进行“EXTRACT CLASS”重构以避免代码重复。

如果上面的句子看起来如此通用，那么用外行的话来说，如果你不想以不同的形式有不同的实现并将代码移动到实用程序静态类，那么创建一个实用程序类是完美的候选者。

```
public static  class Utility
{
    public static void WriteToXML()
    {
        // come code here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:02:52.463

您可以创建一个类来存储项目中的常用功能。您可以以任何形式调用这些函数。

```
namespace ProjectNameSpace
{
    public class GenericFunctions
    {
        public static void WriteToXML()
        {
         // come code here
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:16:28.523

绝对可以引入 Form A 和 Form B 继承自的基本形式：

```
public partial class BaseForm : System.Windows.Forms.Form
    {
        public BaseForm()
        {
            InitializeComponent();
        }

        public void  CommonMethod()
        {

        }
    }

public partial class FormA : BaseForm
{
    public Form1()
    {
        InitializeComponent();
    }

    private void LocalMethod()
    {
        CommonMethod();
    }

}

public partial class FormB : BaseForm
{
    public Form1()
    {
        InitializeComponent();
    }

    private void LocalMethod()
    {
        CommonMethod();
    }

} 
```

也就是说，如果您的通用代码不涉及任何与 UI 相关的内容，那么@Gian Acuna 有正确的答案，您可以使用静态方法创建一个单独的类。

# css - 自动调整宽度以适合儿童并离开页面

> ID：15287687
> 
> 赞同：0
> 
> 时间：2013-03-08T06:00:07.520
> 
> 标签：css, html

我有一个烦人的问题一直困扰着我一段时间。差不多，我有一个 div，其中包含一个 ul，然后包含一系列 li。这是一些来源：

```
<div>
    <ul>
        <li>Foo</li>
        <li>Bar</li>
        <li>Some text here</li>
    </ul>
</div> 
```

我已经设置好，以便不同的元素在屏幕上平铺，就像在这张图片中一样。 ![元素图](../Images/cbfe8fbb5aa555d267a9d6a642490ac8.png)
除了底部没有滚动条。我想要做的是添加一个滚动条，以便您可以滚动浏览。我不知道我会有多少元素，但是，我确实知道每个框的大小以及它们之间的间距。如果您仍然不明白我要做什么，请在[此处](http://products.mrfishie.com/playzone/index.php?p=my%20awesome%20game)查看项目。我想要做的部分是顶部的元素行。我希望他们有一个水平滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:04:01.007

我查看了您引用的网站。`<li>`元素在 中，这`display: inline-block`是行不通的。试试这个：将您当前的 CSS 替换为`ul li`：

```
ul li {
    list-style: none;
    display: table-cell;
    border: 10px solid transparent;
    border-top: none;
    border-bottom: none;
} 
```

这使得所有列表元素仅在一行中对齐，而不是溢出到多行中。

另外，请尝试包含更多代码，或将其添加到[JSFiddle](http://jsfiddle.net "JSFiddle")中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:04:36.370

您可以为您指定一个宽度`div`并将`overflow:auto`css 属性应用于它。如果元素宽度高于 div 的宽度，它将使滚动条可见。

```
<style>
.my_div {
   width:600px;
   overflow-x:auto;
}
</style>

<div class='my_div'>
    <ul>
        <li>Foo</li>
        <li>Bar</li>
        <li>Some text here</li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:05:10.660

```
<div style="overflow-x: auto; width:100%;">
    <ul>
        <li>Foo</li>
        <li>Bar</li>
        <li>Some text here</li>
    </ul>
</div> 
```

和李的

```
 li {
      float: left:
      // or
      display: inline;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:06:19.077

**CSS：**

```
#header-container
{
    width:100%; /* or set it to whatever you want */
    overflow-x: auto;
} 
```

**HTML：**

```
<div id="header-container">
    <ul>
        <li>Foo</li>
        <li>Bar</li>
        <li>Some text here</li>
    </ul>
</div> 
```

完毕！

# python - 导入 pocketsphinx 不工作 python 3.2 (Windows)。“ImportError：没有名为 pocketsphinx 的模块”

> ID：15287689
> 
> 赞同：0
> 
> 时间：2013-03-08T06:00:08.710
> 
> 标签：python, windows, importerror, speech-to-text, cmusphinx

我正在尝试在 python 3.2 上使用 pocketsphinx，但我很困惑。我已将构建的包放在 site-packages 目录中，确保我使用的是正确的音频文件格式。根据文档，支持 python，因为有 python 绑定。我环顾了论坛，似乎`_init_.py`需要一个未包含的文件，这可能是个问题？有关如何解决此问题的任何建议？

我目前正在使用pocketsphinx 和sphinxbase v 0.8 下载链接和链接。我放入站点包的文件都是pocketsphinx目录的Debug文件夹中包含的文件。即：

*   sphinxbase.dll
*   pocketsphinx（.dll、.exp、.ilk、.lib、.pdb）
*   pocketsphinx_batch(.exe,.ilk,.pdb)
*   pocketsphinx_continuous(.exe,.ilk,.pdb)
*   pocketsphinx_mdef_convert(.exe,.ilk,.pdb)

我正在使用以下 Python 代码：

```
import pocketsphinx as ps
from pocketsphinx import sphinxbase

hmmd = 'C:\Python32\Lib\site-packages\pocketsphinx\model\hmm\en_US\hub4wsj_sc_8k'
lmd = 'C:\Python32\Lib\site-packages\pocketsphinx\model\lm\en_US\hub4.5000.DMP'
dictd = 'C:\Python32\Lib\site-packages\pocketsphinx\model\lm\en_US\hub4.5000.dic'
fraw1 = file(r'C:\Users\Stefan\Documents\2012\40I6\test1.wav', 'rb')
fraw1.seek(44)
speechRec = ps.Decoder(hmm = hmmd, lm = lmd, dict = dictd) speechRec.decode_raw(fRaw1)
result = speechRec.get_hyp()
print (result[0]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:06:10.250

要编译 python 模块，请执行以下操作：

1.  根据需要使用 Visual Studio 构建 sphinxbase 和 pocketsphinx
2.  将 sphinxbase.lib 和 sphinxbase.dll 从 sphinxbase/bin/Release 复制到 sphinxbase/python 和 pocketsphinx/python
3.  将 pocketsphinx.lib 和 pocketsphinx.dll 从 pocketsphinx/bin/Release 复制到 sphinxbase/python 和 pocketsphinx/python
4.  打开终端
5.  将目录更改为 spixnbase/python
6.  运行命令

    python setup_win32.py 安装

7.  将目录更改为 pocketsphinx/python

8.  运行命令

    python setup_win32.py 安装

9.  运行命令测试python

    python ps_test.py

# asp.net-mvc - 检查 MVC3 或 MVC4 中的项目构建

> ID：15287690
> 
> 赞同：16
> 
> 时间：2013-03-08T06:00:12.623
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有一个项目，我想了解这个项目，即它是在 Asp.net MVC3 中还是在 Asp.net MVC4 中构建的？我怎样才能找到它的构建过程，即在 MVC3 或 MVC4 中制作的？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-08T06:04:45.373

检查项目引用（或 bin 文件夹），查找`"System.Web.Mvc"`并打开其属性。然后看`"Version"`楼盘。如果`4.0.0.0`是 MVC 4，如果是`3.0.0.0`当然是 MVC 3。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T06:10:30.783

您可以通过代码获取：

```
typeof(YourControlller).Assembly.GetName().Version 
```

# .htaccess - 使用 htaccess 设置子域

> ID：15287692
> 
> 赞同：2
> 
> 时间：2013-03-08T06:00:23.957
> 
> 标签：.htaccess, redirect, url-rewriting, subdomain

我需要有关 htaccess 的帮助。我需要一个像使用 htaccess 设置的子域。它应该重定向或显示来自我的一个控制器的内容。

例如：

我有一个控制器说“视图”和称为“站点”的方法。我会传递一些参数

当前网址将是：`www.mydomain.com/view/site/name`

现在我需要的是我应该有如下设置

`name.mydomain.com = www.mydomain.com/view/site/name`

我当前的 htaccess 看起来像这样

```
allow from all

Options -Multiviews

RewriteEngine On

Options -Multiviews

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %(REQUEST_FILENAME) !-l

RewriteRule ^(.*)$ index.php?rt=$1 [L,QSA] 
```

我应该添加什么？请告诉我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:35:27.320

首先 - 你不需要重复`Options -Multiviews`

至于规则

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(.*)\.mydomain\.com
RewriteRule ^(.*)$ http://mydomain.com/view/site/%1/$1 [L,NC,QSA] 
```

`%`说：*从 RewriteCond 中获取第一个参数，*因为它以`%{HTTP_HOST}`

`$`说：*从 RewriteRule 中获取第一个*参数

# asp.net - ASP.NET SessionID 管理

> ID：15287693
> 
> 赞同：0
> 
> 时间：2013-03-08T06:00:26.033
> 
> 标签：asp.net

您好我想知道服务器如何管理客户端和服务器之间的会话。服务器是为每个 Web 应用程序和客户端存储一个 sessionID，还是只为每个客户端存储一个 sessionID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:02:00.213

会话具有以下属性 [阅读本文](http://www.codeproject.com/Articles/32545/Exploring-Session-in-ASP-Net)

```
Session is Stored  per User basis. 
```

来自 asp.net 中的 MSDN Docs [Session](http://msdn.microsoft.com/en-us/library/ms178581.aspx#Background)

> 会话由可以使用 SessionID 属性读取的唯一标识符标识。当为 ASP.NET 应用程序启用会话状态时，会检查应用程序中对页面的每个请求是否有从浏览器发送的 SessionID 值。如果没有提供 SessionID 值，ASP.NET 将启动一个新会话，并将该会话的 SessionID 值与响应一起发送到浏览器。默认情况下，SessionID 值存储在 cookie 中。但是，您也可以将应用程序配置为将 SessionID 值存储在“无 cookie”会话的 URL 中。只要使用相同的 SessionID 值继续发出请求，会话就被认为是活动的。如果对特定会话的请求之间的时间超过指定的超时值（以分钟为单位），则认为会话已过期。

# ruby-on-rails - ROR + 试图从 VB.Net 访问 RESTful URL

> ID：15287694
> 
> 赞同：0
> 
> 时间：2013-03-08T06:00:26.797
> 
> 标签：ruby-on-rails, vb.net, web-services

在我的 rails 应用程序中，我使用 rails web-service 对用户进行身份验证。这里网址：

> [https://www.test.com/AuthenticateUser?username=tuser@mailinator.com&password=123456](https://www.test.com/AuthenticateUser?username=tuser@mailinator.com&password=123456)

在这里，我将用户名和密码传递给 AuthenticateUser 方法来验证用户。我的 Rails 应用程序运行良好。但是当我试图从 .Net 代码中访问它时，我得到了`error 406`.

> ' 调用 json 网络服务

```
 String uri = "https://www.test.com/AuthenticateUser?username=tuser@mailinator.com&password=123456";
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);
req.Method = "GET";
req.Accept = "application/json";
req.PreAuthenticate = true;
req.Credentials = CredentialCache.DefaultCredentials;
    WebResponse response = req.GetResponse();
    Stream s = response.GetResponseStream(); 
```

我想，当我从 .net 代码访问它时，它应该是一个跨域调用。对结果有影响吗？

我收到错误：远程服务器返回错误：（406）不可接受。请提出一些建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:20:24.573

[406](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)表示您的客户端指定它不会接受 Web 服务愿意提供的格式。

假设响应是`application/json`，您可以[更改`Accept`标头](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.accept%28v=vs.71%29.aspx)：

```
req.Accept = "application/json" 
```

如果它不起作用，则意味着 Web 服务实际上并没有在 中给出响应`application/json`，您应该再看看它实际提供的服务。

如果您不相信服务器的 406，那么您应该开始查看 Web 服务代码，看看为什么它会返回 406，即使它可以产生`application/json`响应，并且请求已`application/json`包含在其`Accept`标头中。

# c# - 在 datalist 中单独显示分组数据

> ID：15287697
> 
> 赞同：0
> 
> 时间：2013-03-08T06:00:33.563
> 
> 标签：c#, asp.net

我在需要执行搜索并显示结果的网站上工作。例如，如果我搜索一个名为的产品`product1`，如果它属于 2 个类别，比如 category1 和 category2，那么我需要将其显示为

```
Category 1:
-----------
product1

Category 2:
----------
product1 
```

这里 product1 代表数据库中产品的图像和其他详细信息。我正在从数据库中获取与我的搜索条件匹配的数据并根据类别将其分开。现在我需要如上所示显示它。我正在尝试do somethink like [this](http://www.flipkart.com/search/a/all?fk-search=all&query=sony&vertical=all&dd=0&autosuggest%5Bas%5D=off&autosuggest%5Bas-submittype%5D=default-search&autosuggest%5Bas-grouprank%5D=0&autosuggest%5Bas-overallrank%5D=0&autosuggest%5Borig-query%5D=&autosuggest%5Bas-shown%5D=on&Search=%C2%A0&otracker=start&_r=RsuiHvNUWzIGQmMYN5OGLg--&_l=kHKbQQIaxhdVidRxlMIbvQ--&ref=3e02b3dc-d02a-4baa-af9c-0c9904d1759b&selmitem=All%20Categories&ab_buk=disabled)我该怎么做。我在某处看到 itemdatabound 事件可用于此目的，如果可以，如何使用它。请帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:15:30.443

为此，您可以使用 datalist。嵌套数据列表是解决方案。您必须将一个数据列表放在另一个数据列表中。然后在外部数据列表的 dataitembound 事件上，您必须绑定内部数据列表。我将向您展示一些示例代码，以便您轻松理解。

代码

```
 <asp:DataList ID="DataList1" runat="server">
    <ItemTemplate>
    <asp:Label ID="lblCategory" runat="server"  Text='<% eval("categoryid") %>'></asp:Label>
        <asp:DataList ID="DataList2" runat="server">
        <ItemTemplate>
        <asp:Image runat="server" ID="catImage" ImageUrl='<% eval("ImageURL") %>' />
        </ItemTemplate>
        </asp:DataList>
    </ItemTemplate>
    </asp:DataList>

 protected void Page_Load(object sender, EventArgs e)
{
    DataTable tbl = new DataTable();

DataTable tbl = new DataTable();
        DataRow datarow;

        tbl.Columns.Add ("categoryid");

        datarow=tbl.NewRow ();
//this value from database
        datarow ["categoryid"]="Cat1";

        tbl.Rows.Add (datarow );
         //tbl= Take datafromdatabasetoBindtheFirstDataList();

        DataList1.DataSource = tbl;
        DataList1.DataBind();

}
protected void DataList1_ItemDataBound(object sender, DataListItemEventArgs e)
{
    Label catId = e.Item.FindControl("lblCategory") as Label ;
    DataList List2= e.Item.FindControl("DataList2") as DataList ;

    DataTable tbl2 = new DataTable();
    //tbl2= GetCategoryItemBasedonCategoryID(catId.Text)          database call function for fetch data to bind the second datalist
    List2.DataSource = tbl2;
    List2.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:29:17.083

```
 DataTable dlcat = new DataTable();

        SqlCommand cmdcat = new SqlCommand("select CategoryName from tblCategoryMaster where CategoryMasterSequenceNumber='" + catno + "'", lcon);
        lcon.Open(); 
        cmdcat.ExecuteNonQuery();
        SqlDataAdapter da = new SqlDataAdapter(cmdcat);
        da.Fill(dlcat);
        dlouter.DataSource = dlcat;
        dlouter.DataBind();

<asp:DataList ID="DataList1" runat="server" 
    onitemdatabound="DataList1_ItemDataBound">
<ItemTemplate>
<asp:Label ID="lblCategory" runat="server"  Text='<% eval("CategoryName") %>'></asp:Label>
    <asp:DataList ID="DataList2" runat="server" Width="197px">
    <ItemTemplate>
    <asp:Image runat="server" ID="catImage" ImageUrl='<% eval("ImageURL") %>' />
    </ItemTemplate>
        </asp:DataList>
    </ItemTemplate>
    </asp:DataList>

protected void DataList1_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        Label catId = e.Item.FindControl("lblCategory") as Label ;
        DataList List2= e.Item.FindControl("DataList2") as DataList ;

        DataTable tbl2 = new DataTable();
        //tbl2

= GetCategoryItemBasedonCategoryID(catId.Text)          database call function for fetch data to bind the second datalist
        List2.DataSource = tbl2;
        List2.DataBind();
 } 
```

# javascript - jQuery Deferred 没有被拒绝

> ID：15287699
> 
> 赞同：1
> 
> 时间：2013-03-08T06:00:44.670
> 
> 标签：javascript, jquery, jquery-deferred, promise

我有下面使用 jQuery deferred 的示例代码。我似乎无法理解的是，虽然 BrushTeeth 函数返回了一个被拒绝的承诺，但为什么另一个延迟的 collectionResults 总是被解决。

一些 jQuery 延迟阅读说如果传入 $.when 的函数不是承诺，它们将立即被解析，但 BrushTeeth 实际上返回一个承诺。

线索我在这里做错了什么？

```
ShowerModule = ( function($) {
                    function init(){
                        var result = $.Deferred();
                        var collectionResults = $.when(brushTeeth);
                        collectionResults.done(function(){
                            console.log("done");
                        })

                        collectionResults.fail(function(){
                            console.log("reject");
                        })

                    }

                    function brushTeeth() {
                        var result = $.Deferred();
                        result.reject('["bah"]');
                        return result.promise();

                    }

                    return {
                        init : init
                    }

                }(jQuery));
            ShowerModule.init(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:29:09.843

弄清楚了

```
var collectionResults = $.when(brushTeeth); 
```

上面的行应该是

```
var collectionResults = $.when(brushTeeth()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:12:08.707

您已经创建了两个同名的延迟对象`result`

所以我猜 $.when 将它上面的那个作为承诺.. 没有被拒绝.. 试试这个

```
 function init(){
                   // var result = $.Deferred(); remove this
                    var collectionResults = $.when(brushTeeth()); //accept function and not the function's reference
                    collectionResults.done(function(){
                        console.log("done");
                    })

                    collectionResults.fail(function(){
                        console.log("reject");
                    })

                } 
```

# error-handling - gst-启动返回值

> ID：15287700
> 
> 赞同：2
> 
> 时间：2013-03-08T06:00:46.020
> 
> 标签：error-handling, return-value, gstreamer, gst-launch

gst-launch 应用程序的返回值是多少？它会在成功时返回“0”，在失败时返回非负数（错误代码）吗？我在哪里可以找到 gst-launch 的所有可能错误代码的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T15:44:55.763

在 Linux 上，最后一个命令的退出状态码存储在变量中`$?`。通常它`0`表示成功，非零表示失败。

```
gst-launch v4l2src num-buffers=1 ! xvimagesink
echo $? 
```

节目

```
0 
```

虽然有些错误，比如

```
gst-launch junk
echo $? 
```

节目

```
1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T20:46:05.270

查看代码，一切正常为 0，无法理解管道为 1（如前所述），无法启动或停止管道为 -1，仅此而已。（gst-launch 是一个原型工具，要真正使用它，您需要使用代码，因此错误代码不是很全面。）

# javascript - 如何使用 JavaScript 格式将 @html.dropdownlist 名称与 mvc 中的 id 绑定

> ID：15287703
> 
> 赞同：1
> 
> 时间：2013-03-08T06:01:27.123
> 
> 标签：javascript, asp.net-mvc-3, jquery, html.dropdownlistfor

我需要使用带有 name 和 id 的 JavaScript 格式在 mvc 中绑定 @html.dropdownlist 。我尝试但没有在 JavaScript 端绑定它没有在客户端传递值。我的列表值格式图像如下所示。如何通过 name 和 id 而不是序列号传递值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:15:42.167

在您的 ajax 请求中将类型更改为 GET，例如

```
 $.ajax({
 type: 'GET',
 ... 
```

并尝试

```
$.each(data, function (index, val) {
    $('<option/>',{value:val.Id,text:val.Text}).appendTo("#MyDdl");
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:55:58.167

您正在向客户端发送一个 SelectList。此类实现并且`IEnumerable<SelectListItem>`SelectListItem 具有 2 个属性：您应该将下拉列表绑定到：`Value``Text`

```
$.ajax({
    type: 'POST',
    url: url,
    data: { id : id },
    success: function (data) {
        $('#MyDdl').empty();
        $.each(data, function () {
            $('#MyDdl').append(
                $('<option/>', {
                    value: this.Value,
                    html: this.Text
                })
            );
        });
    }
}); 
```

在您使用的示例中，`val.Id`但没有这样的属性。

但事实上，您不需要任何 SelectList。只需返回学生集合：

```
[HttpPost]
public ActionResult Some(string id) 
{
    var students = service.GetAllStudents().ToList();
    students.Insert(0, new StudentModel{ Id = 0, Name = "Select student" });
    return Json(students);
} 
```

现在您可以将下拉列表绑定到此集合的`Id`和`Name`属性：

```
$.each(data, function () {
    $('#MyDdl').append(
        $('<option/>', {
            value: this.Id,
            html: this.Name
        })
    );
}); 
```

# macos - 如何保存网页的缩略图？

> ID：15287705
> 
> 赞同：0
> 
> 时间：2013-03-08T06:01:39.620
> 
> 标签：macos, cocoa, webview

我想保存网页的缩略图。所以我创建了一个 webview。代码是

```
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame
{
if (frame != [sender mainFrame]) {
    return;
}
    [sender lockFocus];
    NSData* data = [sender dataWithPDFInsideRect:[sender bounds]];
    [sender unlockFocus];
    NSImage *img = [[NSImage alloc] initWithData:data];
    NSData* imageData = [img TIFFRepresentation];
    NSArray* deskTopArrayPaths = NSSearchPathForDirectoriesInDomains(NSDesktopDirectory, NSUserDomainMask, YES);
    NSString* deskTopPath = [deskTopArrayPaths objectAtIndex:0];
    NSString* pngPath = [NSString stringWithFormat:@"%@/SaveWebThumbnail.png",deskTopPath];
    [imageData writeToFile:pngPath atomically:NO];
} 
```

但是保存的图像中有一些空白位置。不知道为什么？我猜当 webView:didFinishLoadForFrame: 被调用时，webview 还没有真正完成，不是吗？哪位知道解决方法，请告诉我，谢谢！

# objective-c - 使用自定义类属性的两个 NSMutableSet 相等

> ID：15287706
> 
> 赞同：0
> 
> 时间：2013-03-08T06:01:41.507
> 
> 标签：objective-c, cocoa-touch, cocoa, equality, nsmutableset

你如何**检查两个`NSMutableSets`是否相等**（*相同的成员，相同的成员数量*）？

我的实施`isEqualToSet`似乎不起作用。

```
// members is a NSMutableSet of AUser objects

// users is also a NSMutableSet of AUser objects, it is an attribute of instances of the AGroup class

[[group valueForKey:@"users"] isEqualToSet:members]

AGroup
- users

AUser
- name  (String) 
```

如何通过检查名称属性来检查集合是否相等？

很抱歉我的知识不足，这是我第一次接触iOS编程，所以我目前只知道基础知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:16:49.713

如果要检查相应的`name`属性是否相同，以下应该有效：

```
[[group valueForKeyPath:@"users.name"] isEqualToSet:[members valueForKey:@"name"]] 
```

`[group valueForKeyPath:@"users.name"]`返回组中所有用户的名字集合，`[members valueForKey:@"name"]`返回集合中所有用户的名字`members`集合。

*更新：*正如评论中清楚的那样，`members`是一组字符串，而不是一组用户对象。因此代码简化为：

```
[[group valueForKeyPath:@"users.name"] isEqualToSet:members] 
```

# qt - qt:: mouseDoubleClickEvent 在设置 ui 时不起作用

> ID：15287707
> 
> 赞同：1
> 
> 时间：2013-03-08T06:01:43.923
> 
> 标签：qt, mouseevent, double-click

好的，所以代码很短，如下所示：

```
MainWindow::MainWindow() :
    QMainWindow(),
    ui(new Ui::MainWindow)
{
    //ui->setupUi(this);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow:: mouseDoubleClickEvent ( QMouseEvent * event )
{
    cout << "being double clicked" << endl;
}

void MainWindow:: mousePressEvent(QMouseEvent *){
    cout << "being clicked once " << endl;
} 
```

setupUi 被削减，在这种情况下输出很好，当我双击时，它显示“被双击”消息。

然而， ！！！当我设置用户界面时，它停止工作！消息将不再显示... !!!

有人可以解释为什么！万分感谢，紧急！！！！！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:19:12.767

鼠标单击事件将始终发送到您单击的对象。这意味着如果您有一个按钮跨越整个主窗口并且您双击该按钮，`QPushButton::mouseDoubleClickEvent()`将调用而不是主窗口中的事件。

如果您不想在子小部件的子类中实现这些功能，或者您的子小部件不提供`clicked()`信号之类的东西，您可以使用事件过滤器技术：

[http://qt-project.org/doc/qt-5.0/qtcore/qobject.html#installEventFilter](http://qt-project.org/doc/qt-5.0/qtcore/qobject.html#installEventFilter)

# axis2 - java.lang.NoClassDefFoundError: org/drools/event/KnowledgeRuntimeEventManager

> ID：15287710
> 
> 赞同：0
> 
> 时间：2013-03-08T06:02:10.787
> 
> 标签：axis2, wso2, wso2carbon

我在 WSO2 Carbon 工作室创建了一个axis2 项目。这个应用程序基本上

运行 CEP 应用程序。我在构建路径中添加了 drools 5.5.0。在日食

控制台程序正在运行。但是当我将它部署到 WSO2 AS 时，它会显示一个错误

在部署时，任何人都可以帮助如何解决这个问题。

```
INFO {org.apache.axis2.deployment.ServiceDeployer} -  The CEPEventHandler-1.0.0.aar service, which is not valid, caused java.lang.NoClassDefFoundError: org/drools/event/KnowledgeRuntimeEventManager

at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.<init>(DefaultSchemaGenerator.java:140)
    at org.apache.axis2.deployment.util.Utils.fillAxisService(Utils.java:453)
    at org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:389)
    at org.apache.axis2.deployment.repository.util.ArchiveReader.buildServiceGroup(ArchiveReader.java:101)
    at org.apache.axis2.deployment.repository.util.ArchiveReader.processServiceGroup(ArchiveReader.java:143)
    at org.apache.axis2.deployment.ServiceDeployer.deploy(ServiceDeployer.java:82)
    at org.apache.axis2.deployment.repository.util.DeploymentFileData.deploy(DeploymentFileData.java:136)
    at org.apache.axis2.deployment.DeploymentEngine.doDeploy(DeploymentEngine.java:813)
    at org.apache.axis2.deployment.repository.util.WSInfoList.update(WSInfoList.java:144)
    at org.apache.axis2.deployment.RepositoryListener.update(RepositoryListener.java:371)
    at org.apache.axis2.deployment.RepositoryListener.checkServices(RepositoryListener.java:254)
    at org.apache.axis2.deployment.RepositoryListener.startListener(RepositoryListener.java:365)
    at org.apache.axis2.deployment.scheduler.SchedulerTask.checkRepository(SchedulerTask.java:73)
    at org.apache.axis2.deployment.scheduler.SchedulerTask.run(SchedulerTask.java:94)
    at org.apache.axis2.deployment.scheduler.Scheduler$SchedulerTimerTask.run(Scheduler.java:93)
    at java.util.TimerThread.mainLoop(Unknown Source)
    at java.util.TimerThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: Class Not found : org.drools.event.KnowledgeRuntimeEventManager
    at org.apache.axis2.deployment.DeploymentClassLoader.findClass(DeploymentClassLoader.java:92)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.apache.axis2.deployment.DeploymentClassLoader.loadClass(DeploymentClassLoader.java:273)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 19 more

[2013-03-08 14:44:39,106]  INFO {org.apache.axis2.deployment.DeploymentEngine} -  org.apache.axis2.deployment.DeploymentException: java.lang.NoClassDefFoundError: org/drools/event/KnowledgeRuntimeEventManager 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:10:05.140

WSO2 AS 好像找不到口水了。它可能在您的 Eclipse 中，但没有发送到服务器。

尝试以下选项之一：

*   右键单击您的eclipse项目->部署程序集->添加->添加Drools

*   将口水添加到您的项目库中

*   将 drools 添加到您的应用程序服务器 lib 文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:21:06.217

如果有任何第 3 方罐子。将它们放入 AS_HOME/repository/components/lib 并重新启动服务器。

# visual-studio-2010 - VS-2012 Express 网页插件

> ID：15287717
> 
> 赞同：0
> 
> 时间：2013-03-08T06:02:36.903
> 
> 标签：visual-studio-2010, add-in

这可以在 VS2012-express 中制作插件应用程序吗？我要试试nuget。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:05:19.943

不，这是不可能的。Visual Studio Express SKU 不支持第 3 方加载项/扩展。这是 Microsoft 设置的限制，开发人员无法覆盖。

注意：Express SKU 确实支持作为项目模板的扩展。这些虽然没有真正的功能，只是为了创建新项目而存在。

# amazon-web-services - 适用于 Linux 的 AWS S3 客户端，具有分段上传功能

> ID：15287724
> 
> 赞同：6
> 
> 时间：2013-03-08T06:03:10.887
> 
> 标签：amazon-web-services, amazon-s3

您在具有分段上传功能的 linux 中使用什么 amazon s3 客户端？我有 6GB 的 zip 文件要上传，由于最大限制仅为 5GB，因此无法使用 s3curl。

谢谢。詹姆士

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T06:33:26.360

我使用[S3 Tools](http://s3tools.org/s3cmd-110b2-released)，它会自动为所有 PUT 命令使用大于 15MB 的文件的分段上传功能：

> 默认情况下启用 Multipart，并针对大于 15MB 的文件启动。您可以使用 —multipart-chunk-size-mb=5 将此阈值设置为低至 5MB（亚马逊的限制）或 5 到 5120 MB 之间的任何其他值

安装和配置后，只需发出以下命令：

```
~$ s3cmd put largefile.zip s3://bucketname/largefile.zip 
```

或者，您可以在 zip 文件的命令行中使用[split ：](http://unixhelp.ed.ac.uk/CGI/man-cgi?split)

```
split -b1024m largefile.zip largefile.zip- 
```

并稍后在您的文件系统上使用以下命令重新组合：

```
cat largefile.zip-* > largefile.zip 
```

如果您选择第二个选项，您可能希望在上传之前存储文件的 MD5 哈希值，以便在以后重新组合时验证存档的完整性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-30T22:41:37.747

官方[AWS 命令​​行界面](http://aws.amazon.com/cli/)支持分段上传。（它在引擎盖下使用了[boto](https://github.com/boto/boto)后继[botocore](https://github.com/boto/botocore)）：

> AWS 命令​​行界面 (CLI) 是用于管理您的 AWS 服务的统一工具。只需下载和配置一个工具，您就可以从命令行控制多个 AWS 服务并通过脚本自动化它们。

除了所有 AWS API 的统一方法之外，它还添加了*一组新的简单[文件命令](http://aws.amazon.com/cli/)，用于在 Amazon S3 之间进行高效的文件传输*，其特征类似于众所周知的 Unix 命令，例如：

*   [ls](http://docs.aws.amazon.com/cli/latest/reference/s3/ls.html) -*在前缀或所有 S3 存储桶下列出 S3 对象和公共前缀。*
*   [cp](http://docs.aws.amazon.com/cli/latest/reference/s3/cp.html) -*将本地文件或 S3 对象复制到本地或 S3 中的另一个位置。*
*   [sync](http://docs.aws.amazon.com/cli/latest/reference/s3/sync.html) -*同步目录和 S3 前缀。*
*   ...

所以`cp`对于手头的用例来说就足够了，但也一定要检查一下`sync`，它对于许多经常遇到的场景特别强大（并且有点暗示`cp`取决于参数）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-09T18:38:00.453

[boto 库](https://github.com/boto/boto)包含一个名为的 s3 命​​令行工具，`s3put`可以处理大文件的分段上传。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-17T06:59:22.237

您可以查看 FTP/Amazon S3/Glacier 客户端[CrossFTP](http://www.crossftp.com/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-17T02:10:21.910

我个人创建了具有简单功能的 python 文件**s3upload.py**，以使用 boto 和分段上传来上传大文件。

现在每次我需要上传大文件时，我只需运行如下命令：

```
python s3upload.py bucketname extremely_large_file.txt 
```

更多细节和功能代码可以在[这里](http://codeinpython.blogspot.com/2015/08/s3-upload-large-files-to-amazon-using.html)找到。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T06:12:34.323

您可以将[S3 存储桶挂载到文件系统](http://unixsystems.blogspot.com/2011/04/mounting-s3-as-file-system-on-linux.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-24T01:42:37.280

我刚开始使用[s4cmd](https://github.com/bloomreach/s4cmd)，它处理了一个 50gb 的文件就好了

# .net - VB.NET 中的 Integer 和 Int32 有什么区别吗？

> ID：15287742
> 
> 赞同：23
> 
> 时间：2013-03-08T06:04:59.950
> 
> 标签：.net, vb.net, integer, int32

`Integer`在 VB.NET 中，和之间有什么区别`Int32`吗？

如果是，请解释。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-08T06:09:05.053

`Integer`在功能上，类型和之间没有区别`System.Int32`。在 VB.NET`Integer`中只是`System.Int32`类型的别名。

标识符`Int32`和`Integer`并不完全相等。 `Integer`始终是编译器的别名`System.Int32`并被编译器理解。`Int32`虽然在编译器中没有特殊情况，并且像任何其他类型一样通过正常的名称解析。所以`Int32`在某些情况下可以绑定到不同的类型。不过，这非常罕见；没有人应该定义自己的`Int32`类型。

这是一个展示差异的具体复制品。

```
Class Int32

End Class

Module Module1
    Sub Main()
        Dim local1 As Integer = Nothing
        Dim local2 As Int32 = Nothing
        local1 = local2 ' Error!!! 
    End Sub
End Module 
```

在这种情况下`local1`和`local2`实际上是不同的类型，因为`Int32`绑定到用户定义的类型 over `System.Int32`。

# blackberry - 给 BBM 群发消息？

> ID：15287743
> 
> 赞同：1
> 
> 时间：2013-03-08T06:05:02.040
> 
> 标签：blackberry, bb-messenger

我希望我的应用程序向 BBM 组发送消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T17:25:44.570

目前，您的应用程序无法指定 BBM 组与其共享文本或图像。您可以提供要在 BBM Group 上共享和调用以共享的文本或图像。当您这样做时，BBM 组选择器会出现在用户选择他们想要发布到的组的位置。下面是一些示例 QML，展示了如何将一些文本发布到 BBM 组。

```
InvokeActionItem {
title: "Share Text Over BBM Group"
query {
    mimeType: "text/plain"
    invokeTargetId: "sys.bbgroups.sharehandler"
    invokeActionId: "bb.action.SHARE"
    data: "This is some text to share in a group."
} 
```

# ios - iOS：应用内购买。产品根据用户类型付费或免费

> ID：15287745
> 
> 赞同：6
> 
> 时间：2013-03-08T06:05:05.667
> 
> 标签：ios, ipad, in-app-purchase

我正在开发一个 iOS 应用程序，我将在用户登录后根据用户类型在应用程序中销售产品。

如果用户是 A 类 [特权用户] 那么他可以完全免费下载产品/基于促销代码/如果促销代码无效则购买（我可以根据一些标志来决定）。

如果用户是 B 类 [普通用户] 他必须为产品付费，然后他可以在成功付款后下载它。

但是，我怀疑苹果是否会批准这一点。在向应用商店提交申请时，我将提供普通用户（B 类用户）凭据，以便他们可以正常购买。

这种做法是对还是错？

另一种方法是，我可以在 iTunes 连接上设置具有两个不同标识符的相同产品。一份免费，另一份购买。

当用户根据用户类型登录时，我可以根据我拥有的产品标识符决定为该用户加载哪些产品。

是否有任何替代解决方案？

有没有人经历过同样的场景？

感谢您 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T22:05:40.520

我在商店里有一个免费的应用程序，它使用应用程序内购买来启用功能。我还有一个地方可以输入促销代码，它也可以启用功能。它被苹果拒绝，因为它可以输入促销代码并绕过应用商店。听起来和你想要做的一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:09:59.133

我有一个想法，不知道Apple测试工程师是否会允许，请继续为非特权用户和特权用户购买应用程序，而不是要求他们在应用程序中输入促销代码，更新他们的特权WS（如果您通过电子邮件向他们发送促销代码，这意味着您拥有他们的电子邮件 ID 或用户 ID），请在应用程序内部进行一些设置以识别这一点并解锁功能。从来没有尝试过，但是对于我的一个应用内购买应用程序没有被拒绝，即使它有缺陷，当我放置后续构建版本时，应用程序被拒绝，我需要纠正这个缺陷。这是关于恢复购买按钮。一旦您的应用程序进入应用商店，他们就不会进一步研究它。这只是一个想法，但您需要在冒险之前考虑一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:18:28.647

我不认为你真的可以那样做。该应用程序只能是免费的，如果它是免费的。但是，如果没有输入促销代码，您不能让应用程序什么都不做。因此，最好的解决方案似乎是拥有一个功能最少的应用程序的免费版本。特权用户可以使用促销代码（但您不能链接到可以购买此促销代码的网站！），普通用户必须进行应用内购买才能获得额外的功能。

希望这可以帮助！

# java - 如何存储和搜索“禁止密码”列表

> ID：15287748
> 
> 赞同：7
> 
> 时间：2013-03-08T06:05:30.537
> 
> 标签：java, dictionary, passwords

我正在做一个项目，我需要有一组密码限制，其中包括一个不允许的密码文件（*所有常见的密码，如'abc'、'abcdef'、'12345'、'password'等*）。密码将由大约 10000-15000 个单词组成。

现在我想确保当用户设置/更改密码时，它不存在于列表中。我正在考虑在Java中使用字典（或地图）（桶为'A'，'B'，'C'......'Z'，'NUMBERS'，'SPECIAL_CHARS'），以便我检查第一个字符，然后搜索相应的桶。但我不确定我能从中获得什么样的表现。

关于使用“禁止密码”列表的任何建议......还有其他需要注意的指针吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:13:16.423

如果您将“每个字母一个桶”的方法扩展到完整的字符串，您将以[**trie**](http://en.wikipedia.org/wiki/Trie)结尾，这看起来是解决这个问题的一个很好的结构，尽管我看不出不使用单个的原因`HashSet`（毕竟，验证成本几乎不变，哈希集在应该存储密码的桶中搜索）。与使用单个集合相比，根据首字母拆分哈希不会提高性能。

另一方面，如果你的实现是内存受限的，你可以避免存储一些被禁止的密码并进行规则引导的验证（例如检查是否有 4 个连续的字符相差一个，如“ghij”，或者检查它们是否是键盘行的片段，例如“yuiop”）。每条规则将相当于几个被禁止的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T19:33:12.397

You might want to use a real lib to do this. For example.. [https://code.google.com/p/java-dictionary-password-validator/](https://code.google.com/p/java-dictionary-password-validator/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:14:55.760

您必须编写一个可以检查字符序列（例如：abcdef）和相同字符（例如：111111）和所有其他约束的方法。除此之外，您必须采用静态 List/Set 变量来保存所有受限制的字符串。

# php - 如何从php中的表中获取行值

> ID：15287759
> 
> 赞同：0
> 
> 时间：2013-03-08T06:06:09.940
> 
> 标签：php, javascript, jquery

我是 PHP 编码的新手，请帮助我。这是我的代码：

```
echo "<td id=\"row\" align=\"center\">" . $row['id'] . "</td>";
echo "<td id=\"title\" align=\"center\">" . $row['Title'] . "</td>";
echo "<td id=\"prodname\" align=\"center\">" . $row['ProductName'] . "</td>";
echo "<td id=\"amt\" align=\"center\">" . $row['Amount'] . "</td>";
$amt = $row['Amount'];
echo "<td id=\"row\" align=\"center\">" . 
     "<select id=\"testing\" onchange=\"GetSelected (this,$amt)\">
        <option value=\"100\">100g</option>
        <option value=\"250\">250g</option>
      </select>" . "</td>";
echo "<td>" . "<input type=\"button\" value=\"Add\">" . "</td>"; 
```

单击“添加”按钮后，我需要将行值存储在数组或变量中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:25:17.563

你可以这样编码

```
<form name="frm" method="POST" action="">
 <table>
  <tr>
echo "<td id=\"row\" align=\"center\">" . $row['id'] . "</td>";
echo "<td id=\"title\" align=\"center\">" . $row['Title'] . "</td>";
echo "<td id=\"prodname\" align=\"center\">" . $row['ProductName'] . "</td>";
echo "<td id=\"amt\" align=\"center\">" . $row['Amount'] . "</td>";
$amt = $row['Amount'];
echo "<td id=\"row\" align=\"center\">" . 
     "<select id=\"testing\" onchange=\"GetSelected (this,$amt)\">
        <option value=\"100\">100g</option>
        <option value=\"250\">250g</option>
      </select>" . "</td>";
echo "<td>" . "<input type=\"SUBMIT\" value=\"Add\">" . "</td>";
  </tr>
 <table>
</form> 
```

现在您可以将数组设置为**$_POST**或**$_REQUEST**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:25:45.477

我希望以下代码可以帮助您解决问题。

将此代码放在您的 PHP 脚本中

```
 <? php
   if ( $_GET["reg"] == "suc" )
   {
     $row['id']=$_GET["id"];
     $row['Title']=$_GET["title"];
     $row['prod']=$_GET["prod"];
     $row['amount']=$_GET["amt"];
   }
   else
   {
   echo "try again";
   }
  echo "<form action=\"?reg=suc\" method=\"GET\">\n";
  echo "Id: <input name=\"id\" ><br />\n";
  echo "Title: <input type=\"text\" name=\"title\" ><br />\n";
  echo "Productname: <input name=\"prod\" ><br />\n";
  echo '<input type="checkbox" name="amt" value="100" >';
  echo '<input type="checkbox" name="amt" value="250" > ';
  echo "<input type=\"submit\" name=\"Add\">\n";
  echo "</form>\n";
 ?> 
```

如果您单击添加按钮，这些值将存储在数组中，您可以使用 POST 方法而不是 GET 以隐藏方式发送这些值！！！

# android - 如何提取 AsyncTask 的返回值？

> ID：15287760
> 
> 赞同：3
> 
> 时间：2013-03-08T06:06:17.507
> 
> 标签：android, android-asynctask

我在我的应用程序中使用 http GET 方法检索数据。任务完成后，我希望在我的 mainActivity 中显示返回值（目前我的应用程序中只有 1 个活动）

这是我的 asyncTask 类：

```
class getAsync extends AsyncTask<String,Void,String> {
    String ret;
    @Override
    protected String doInBackground(String... params) {
        String url = params[0];
        myGetReq myget = new myGetReq();
        ret = myget.get(url);
        Log.d("[RETURN STATUS]",ret);
        return ret;
    }
} 
```

从我的主要活动中，我以下列方式使用它：

```
getAsync get = new getAsync();
get.execute(url);
statText.setText(get.ret); 
```

其中 statText 是我的活动窗口中的文本。它保持空白，甚至很难在 logcat 中看到响应的正文。如何正确地将这些数据返回到我的活动中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T06:11:17.433

异步任务有 onPostExecute 方法...在这种方法中，您可以在 UI 组件上工作，所以我在 onPostExecute 中有 settext ...使用下面的代码..

```
class getAsync extends AsyncTask<String,Void,String> {

    @Override
    protected String doInBackground(String... params) {
        String url = params[0];
        myGetReq myget = new myGetReq();
        String ret = myget.get(url);
        Log.d("[RETURN STATUS]",ret);
        return ret;
    }

   @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            statText.setText(result);

     }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T06:09:16.203

结果从 传递`doInBag()`到 的`onPostexecute()`方法`AsyncTask`。

现在您可以使用处理程序将数据发送回您的活动，如下所示：

```
@Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);

        if (mProgressDialog != null) {
            if (mProgressDialog.isShowing()) {
                mProgressDialog.dismiss();
            }
        }
        final Message message = new Message();
        if (result != null && !result.equals("")) {
            if (result.equals("success")) {
                message.what = 1000; // to show SUCCESS
            } else {
                message.what = 1001; // to show FAILURE
            }
        } else {
                message.what = 1001; // to show FAILURE
        }
        mHandler.sendMessage(message);
    } 
```

**编辑**：使用带有 AsyncTask 的处理程序：

在您的活动中声明一个处理程序，如下所示：

```
 /**
         * Handler to update the UI.
         */
        private static final Handler sHandler = new Handler() {

    @Override
            public void handleMessage(Message msg) {
                super.handleMessage(msg);
                if (msg.what == 1000) {

                        } else {
                         // failure
                       } 
                     }
    }; 
```

现在在您的活动中，像这样调用 AsyncTask：

```
YourAsyncTask obj = new YourAsyncTask(context, sHandler);
obj.execute(); 
```

现在在您的 AsyncTask 中，创建一个像这样的构造函数：

```
public YourAsyncTask(final Context context, final Handler handler) {
this.context = context;
mHandler = handler;
} 
```

**说明**：

为什么要在这里使用处理程序，因为您可能希望在完成后台操作后返回到您的活动，以根据 AsyncTask 结果执行其他任务。在这里，您将 Handler 的引用传递给您的 asyncTask，并最终将结果发送回您的活动。

请注意，上面的 Handler 是一个静态处理程序，否则如果您的活动在异步操作完成之前完成，可能会发生内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:11:14.973

定义`public String ret="";`到您的活动类。

按以下方式设置：

```
class getAsync extends AsyncTask<String,Void,String> {

    @Override
    protected String doInBackground(String... params) {
        String url = params[0];
        myGetReq myget = new myGetReq();
        ret = myget.get(url);
        Log.d("[RETURN STATUS]",ret);
        return ret;
    }
} 
```

并通过以下方式简单地获取它：

```
statText.setText(ret); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:20:35.243

创建回调接口以将结果发布到您的活动是一个很好的做法。

```
public interface AsyncTaskCompleteListener {
    public void onTaskComplete(String result);
} 
```

在单独的类中进行网络操作

```
public class RssFeedAsyncTask extends
        AsyncTask<String, Void, String> {
    private ProgressDialog Dialog;
    String response = "";
    Activity _context;
    private AsyncTaskCompletionListener callback;

    public RssFeedAsyncTask(Activity _context) {
        this._context = _context;
        this.callback = (AsyncTaskCompletionListener) _context;
    }

    @Override
    protected void onPreExecute() {
        Dialog = new ProgressDialog(_context);
        Dialog.setMessage("Loading...");
        Dialog.show();

    }

    @Override
    protected String doInBackground(String... urls) {
        try {
            // Your Code
        } catch (Exception e) {
        }
        return null;

    }

    @Override
    protected void onPostExecute(String result) {
        Dialog.dismiss();
        callback.onTaskComplete(result);

    }

} 
```

最后是您的活动类并实现该回调接口

```
public class RssReaderActivity extends Activity implements AsyncTaskCompletionListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        if(Utility.determineConnectivity(this))
        new RssFeedAsyncTask(this).execute(Yoururl);
        else
            Toast.makeText(this, "No Internet Connection", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onTaskComplete(String result) {
    //write the code to upadte the UI from the Result
          statText.setText(result);
    }

} 
```

希望这可以帮助您编写结构良好且干净的单独编程。有关更多详细信息，请访问以下博客

[http://amitandroid.blogspot.in/2013/02/android-rssfeed-with-async-task-example.html](http://amitandroid.blogspot.in/2013/02/android-rssfeed-with-async-task-example.html)

谢谢，

# grok - 编译 Grok 时出错

> ID：15287765
> 
> 赞同：1
> 
> 时间：2013-03-08T06:06:29.243
> 
> 标签：grok

我尝试根据此链接[http://linuxdrops.com/log-management-using-logstash-and-kibana-on-centos-rhel-fedora/](http://linuxdrops.com/log-management-using-logstash-and-kibana-on-centos-rhel-fedora/)编译 grok，但遇到以下问题。希望有人可以帮助我解决我遇到的问题。

```
[root@eul2400508 grok]# make 
cc -c -pipe -fPIC -I. -O2 -I/usr/local/include -DPLATFORM_GNULinux  grok.c -o grok.o
In file included from grok.c:1:
grok.h:8:20: error: tcutil.h: No such file or directory
In file included from grok.c:1:
grok.h:39: error: expected specifier-qualifier-list before ‘TCTREE’
In file included from grok.h:132,
                 from grok.c:1:
grok_pattern.h:7: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
In file included from grok.h:140,
                 from grok.c:1:
grok_discover.h:9: error: expected specifier-qualifier-list before ‘TCTREE’
grok.c: In function ‘grok_init’:
grok.c:27: error: ‘grok_t’ has no member named ‘re’
grok.c:30: error: ‘grok_t’ has no member named ‘pcre_capture_vector’
grok.c:31: error: ‘grok_t’ has no member named ‘pcre_num_captures’
grok.c:32: error: ‘grok_t’ has no member named ‘max_capture_num’
grok.c:33: error: ‘grok_t’ has no member named ‘pcre_errptr’
grok.c:34: error: ‘grok_t’ has no member named ‘pcre_erroffset’
grok.c:35: error: ‘grok_t’ has no member named ‘logmask’
grok.c:36: error: ‘grok_t’ has no member named ‘logdepth’
grok.c:39: error: ‘grok_t’ has no member named ‘patterns’
grok.c:43: error: ‘grok_t’ has no member named ‘captures_by_id’
grok.c:44: error: ‘grok_t’ has no member named ‘captures_by_name'
grok.c:45: error: ‘grok_t’ has no member named ‘captures_by_subname’
grok.c:46: error: ‘grok_t’ has no member named ‘captures_by_capture_number’
grok.c:56: error: ‘grok_t’ has no member named ‘pcre_errptr’
grok.c:57: error: ‘grok_t’ has no member named ‘pcre_erroffset’
[root@eul2400508 grok]# make 
cc -c -pipe -fPIC -I. -O2 -I/usr/local/include -DPLATFORM_GNULinux  grok.c -o grok.o
In file included from grok.c:1:
grok.h:8:20: error: tcutil.h: No such file or directory
In file included from grok.c:1:
grok.h:39: error: expected specifier-qualifier-list before ‘TCTREE’
In file included from grok.h:132,
                 from grok.c:1:
grok_pattern.h:7: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
In file included from grok.h:140,
                 from grok.c:1:
grok_discover.h:9: error: expected specifier-qualifier-list before ‘TCTREE’
grok.c: In function ‘grok_init’:
grok.c:27: error: ‘grok_t’ has no member named ‘re’
grok.c:30: error: ‘grok_t’ has no member named ‘pcre_capture_vector’
grok.c:31: error: ‘grok_t’ has no member named ‘pcre_num_captures’
grok.c:32: error: ‘grok_t’ has no member named ‘max_capture_num’
grok.c:33: error: ‘grok_t’ has no member named ‘pcre_errptr’
grok.c:34: error: ‘grok_t’ has no member named ‘pcre_erroffset’
grok.c:35: error: ‘grok_t’ has no member named ‘logmask’
grok.c:36: error: ‘grok_t’ has no member named ‘logdepth’
grok.c:39: error: ‘grok_t’ has no member named ‘patterns’
grok.c:43: error: ‘grok_t’ has no member named ‘captures_by_id’
grok.c:44: error: ‘grok_t’ has no member named ‘captures_by_name'
grok.c:45: error: ‘grok_t’ has no member named ‘captures_by_subname’
grok.c:46: error: ‘grok_t’ has no member named ‘captures_by_capture_number’
grok.c:56: error: ‘grok_t’ has no member named ‘pcre_errptr’
grok.c:57: error: ‘grok_t’ has no member named ‘pcre_erroffset’
grok.c:60: error: ‘grok_t’ has no member named ‘pcre_errptr’
grok.c:62: error: ‘grok_t’ has no member named ‘pcre_erroffset’
grok.c: In function ‘grok_clone’:
grok.c:78: error: ‘grok_t’ has no member named ‘patterns’
grok.c:78: error: ‘grok_t’ has no member named ‘patterns’
grok.c:79: error: ‘grok_t’ has no member named ‘logmask’
grok.c:79: error: ‘grok_t’ has no member named ‘logmask’
grok.c:80: error: ‘grok_t’ has no member named ‘logdepth’
grok.c:80: error: ‘grok_t’ has no member named ‘logdepth’
grok.c: In function ‘grok_pcre_callout’:
grok.c:114: error: ‘grok_t’ has no member named ‘logmask’
grok.c:114: error: ‘grok_t’ has no member named ‘logdepth’
grok.c:119: error: ‘grok_t’ has no member named ‘logmask’
grok.c:119: error: ‘grok_t’ has no member named ‘logdepth’
grok.c:124: error: ‘grok_t’ has no member named ‘logmask’
grok.c:124: error: ‘grok_t’ has no member named ‘logdepth’
make: *** [grok.o] Error 1
grok.c:60: error: ‘grok_t’ has no member named ‘pcre_errptr’
grok.c:62: error: ‘grok_t’ has no member named ‘pcre_erroffset’
grok.c: In function ‘grok_clone’:
grok.c:78: error: ‘grok_t’ has no member named ‘patterns’
grok.c:78: error: ‘grok_t’ has no member named ‘patterns’
grok.c:79: error: ‘grok_t’ has no member named ‘logmask’
grok.c:79: error: ‘grok_t’ has no member named ‘logmask’
grok.c:80: error: ‘grok_t’ has no member named ‘logdepth’
grok.c:80: error: ‘grok_t’ has no member named ‘logdepth’
grok.c: In function ‘grok_pcre_callout’:
grok.c:114: error: ‘grok_t’ has no member named ‘logmask’
grok.c:114: error: ‘grok_t’ has no member named ‘logdepth’
grok.c:119: error: ‘grok_t’ has no member named ‘logmask’
grok.c:119: error: ‘grok_t’ has no member named ‘logdepth’
grok.c:124: error: ‘grok_t’ has no member named ‘logmask’
grok.c:124: error: ‘grok_t’ has no member named ‘logdepth’
make: *** [grok.o] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T16:58:10.650

有同样的问题，但在 debian 上并且能够通过以下方式解决：

1.  确保我拥有所有依赖项：在 Makefile 中找到 - 第 269 行

    *   野牛
    *   ctags
    *   柔性
    *   gperf
    *   libevent-dev
    *   libpcre3-dev
    *   libtokyocabinet-dev
2.  我也按照我在“wheel ...@gmail.com”的评论中[找到](https://code.google.com/p/semicomplete/wiki/Grok)的说明进行操作，但不确定这是否有必要。

> 可以通过更改如下所示的两条 gcc 行来修复 Makefile：
> 
> > `gcc $(LDFLAGS) $^ -o $@`
> > 
> > 对此：
> > 
> > `gcc $^ $(LDFLAGS) -o $@`
> > 
> > 当然，更新 CFLAGS 和 LDFLAGS 以指向正确的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T22:41:28.843

在 Centos 上，您需要使用相同的软件包，尽管它们的名称不同（只是最后三个）：

```
bison
ctags
flex
gperf
libevent-devel
libprcre3-devel
tokyocabinet-dev 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T06:07:47.193

在`make grok`Ubuntu 12.04 上，我需要更新上面提到的两条 gcc 行（通过在 $^ 之后移动 $(LDFLAGS)），但似乎我不需要做任何这意味着：

> “更新 CFLAGS 和 LDFLAGS 以指向正确的目录。”

# mongodb - MongoDB - 可定制的日志大小和增长策略

> ID：15287768
> 
> 赞同：0
> 
> 时间：2013-03-08T06:07:02.333
> 
> 标签：mongodb, logging, size

我已经运行 MongoDB 一段时间了。这带来了一个值得付出的问题。

我的自定义日志策略如下： 1）每个日志文件的最大大小限制为 50MB 2）在指定的日志路径下限制总共 7 个日志文件

我怎样才能在 MongoDB 中实现这些东西？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:26:07.630

您需要编写一个检查日志文件大小的 cronjob，如果它大于 50MB，它会向您的 mongodb 进程发送一个 SIGUSR1（信号编号 10）。然后这将轮换 mongodb 日志。

# facebook - 在 facebook 和 twitter 上发布的小部件 - Dropbox 类型的小部件

> ID：15287770
> 
> 赞同：1
> 
> 时间：2013-03-08T06:07:10.343
> 
> 标签：facebook, twitter, facebook-like, facebook-wall, facebook-widgets

我正在查看 Facebook 的社交插件，但不知道如何做类似于 Dropbox 所做的事情。

如果您转到保管箱推荐页面，他们有一个带有一些预定义文本的文本框 - 用户可以添加或编辑内容，然后在他/她的 Facebook 墙上分享。

我也附上了截图

![保管箱](../Images/ae07ddd263cae5820fd0200bce3a1931.png)

是否有一个代码片段可以轻松地与我的网站集成以在 facebook 和 twitter 上发布。即使它支付了 - 它的罚款。

谢谢你的帮助

# asp.net-mvc-4 - 数据库值的选择列表

> ID：15287771
> 
> 赞同：0
> 
> 时间：2013-03-08T06:07:17.863
> 
> 标签：asp.net-mvc-4, entity-framework-5

使用 MVC4、EF5 在遗留数据库和代码之上进行开发。我们在数据库中有一个列（例如 productcolor），它具有一组不同的值。这些值可以是“红色”、“绿色”或“蓝色”。DB 列是 varchar(20)。我无法更改数据库（是的，我已经阅读了有关“枚举”的信息 - 但无法触摸数据库）。

我想创建某种通用对象，每当使用表单创建/编辑新项目时，它总是返回这 3 个值的选择列表。

现在，我的模型中有几个 [NotMapped] 类

```
 [NotMapped]
    public string ProductColorSelected {
        get { return productcolor; }
        set { productcolor = value; }        
    }

    [NotMapped]
    public IEnumerable<SelectListItem> ProductColors { get; set; } 
```

然后我在传递给视图之前在控制器中手动创建 SelectList

```
 product.ProductColors = new[]
     {
                new SelectListItem { Value = "Red", Text = "Red" },
                new SelectListItem { Value = "Green", Text = "Green" },
                new SelectListItem { Value = "Blue", Text = "Blue" },
      }; 
```

和视图

```
@Html.DropDownListFor(model => model.ProductColorSelected , Model.ProductColors) 
```

这可行，但我需要在 POST 和 GET 中使用它（编辑、创建）的每个控制器类上创建此选择列表。没有真正遵循 DRY，但我不确定更好的方法。

此外，如果我有另一个存储可用于该列的 3 个值的表，答案是否会改变。我不是从上面创建选择列表，而是从查找表中获取值（我们的应用程序中有这两种情况）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:10:21.960

一种可能性是编写一个自定义操作过滤器，该过滤器将在每个操作后执行并填充模型上的 ProductColors 属性：

```
public class PopulateProductColorsAttribute: ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var viewResult = filterContext.Result as ViewResultBase;
        if (viewResult == null)
        { 
            // the controller action didn't return a view result => no need to go any further
            return;
        }

        var model = viewResult.Model as SomeModel;
        if (model == null)
        {
            // The controller action didn't pass a model containing the ProductColors property => no need to go any further
            return;
        }

        // now populate the ProductColors property. Of course here you could do a db lookup or whatever
        model.ProductColors = new[]
        {
            new SelectListItem { Value = "Red", Text = "Red" },
            new SelectListItem { Value = "Green", Text = "Green" },
            new SelectListItem { Value = "Blue", Text = "Blue" },
        };
    }
} 
```

现在剩下的就是使用自定义操作过滤器装饰所有需要此操作的控制器操作：

```
[PopulateProductColors]
public ActionResult Index()
{
    SomeModel model = ...
    return View(model);
}

[PopulateProductColors]
[HttpPost]
public ActionResult Index(SomeModel model)
{
    ...
} 
```

或将其注册为全局操作过滤器，在这种情况下，它将应用于您的所有控制器操作。

# c++ - clock_gettime 返回一个无意义的值

> ID：15287778
> 
> 赞同：1
> 
> 时间：2013-03-08T06:07:48.353
> 
> 标签：c++, linux, time

我正在尝试模拟在 linux 中以恒定速率下降的点。为此，我需要获得毫秒分辨率的时间。现在这部分很好，但我遇到了*clock_gettime*的问题。

当 'tv_nsec' 字段回绕到大约 100000000 时，它开始回到接近零的位置，并且*clock_gettime*检索到的时间在前一次迭代检索到的时间之前。请注意，并非每次字段换行时都会发生这种情况，但确实会发生。

为了调试，我让它写出从*clock_gettime*返回的值和检索的增量值：

> 迭代：
> 
> gettime.seconds：1362720808，gettime.us：993649771，总计：1362721801649 us
> delta：0.014
> 
> 另一个迭代：
> 
> gettime.seconds：1362720808，gettime.us：993667981，总计：1362721801667 us
> delta：0.015
> 
> 另一个迭代：
> 
> gettime.seconds：1362720808，gettime.us：993686119，总计：1362721801686 us
> delta：0.015
> 
> 有问题的迭代：
> 
> gettime.seconds：1362720809，gettime.us：20032630，总计：1362720829032 us
> delta：-972.661

请注意，增量以秒为单位，其计算方法是将毫秒除以 1000，再加上从过去的时间减去未来的时间（等于负数），然后除以 1000，它使增量为积极的。

重现问题的代码在这里：

```
#include <iostream>
#include <sys/time.h>

using namespace std

double prevMillis = 0.0;

double getMillis()
{
    timespec ts;

    clock_gettime(CLOCK_REALTIME, &ts);

    cout << "gettime.seconds: " << ts.tv_sec << " , gettime.us: " << ts.tv_nsec << ", total: " << ((ts.tv_sec * 1000) + (ts.tv_nsec / 1000)) << " ms" << endl;

    return ((ts.tv_sec * 1000) + (ts.tv_nsec / 1000)) + 0.5;
}

int main()
{
    double delta = 0.0;

    prevMillis = getMillis();

    while(delta >= 0)
    {
        delta = (getMillis() - prevMillis) / 1000;

        prevMillis = getMillis();

        cout << "Delta: " << delta << endl << endl;
    }

    return 0;
} 
```

请注意，必须使用“-lrt”编译时钟功能。

这将循环直到问题发生，即由于时间的原因增量为负。在我的电脑上只需要几秒钟。

抱歉这个冗长的问题，但感谢我提前获得的任何帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T06:16:30.440

`tv_nsec`是*纳秒*，即一秒的十亿分之一（1 / 1,000,000,000）。但是，您的计算将其视为微秒。

这是修复：

```
return ((ts.tv_sec * 1000) + (ts.tv_nsec / 1000000)) + 0.5;
                                               ^^^ 
```

# javascript - jQuery 错误 NS_ERROR_XPC_BAD_CONVERT_JS

> ID：15287780
> 
> 赞同：1
> 
> 时间：2013-03-08T06:08:03.637
> 
> 标签：javascript, jquery, quovolver

我在我正在构建的网站上使用 quovolver，当我尝试添加此脚本时，我收到此错误：

```
NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument arg 0
[nsIDOMWindow.getComputedStyle]
[Break On This Error]   

var ret = matches.call( elem, expr );               jquery.js (line 5316 
```

如果我删除 quovolver，错误就会消失。

我该如何解决这个问题？

这是我的 HTML 和 JS：

***HTML***

```
<div class="quotes">   
<span>
  <blockquote>
     <p><i class="icon-quote-left"></i>Quote Goes here<i class="icon-quote-right"></i></p>
     <p>&mdash;Author</p>
  </blockquote>
</span>

<span>
     <h2>Call to Action Text</h2> 
</span>

<!-- NEXT SET OF QUOTES/CALL TO ACTION -->

</div> 
```

***JS***

```
$('.quotes').quovolver({
    children : 'span',
    pauseOnHover : true,
    autoPlaySpeed : 8000
}); 
```

# mysql - SQL 查询没有返回任何值

> ID：15287782
> 
> 赞同：0
> 
> 时间：2013-03-08T06:08:12.950
> 
> 标签：mysql, sql

嗨，我有以下表格结构。

```
Professor (EMP ID,Name,Status,Salary,Age)
Course(Course ID,Course Name,Points)
Works(Course ID,EMP ID,Class ID) 
```

我需要执行以下操作。

返回同一班级'class 10'修过2门不同课程M1和M2的员工名单</p>

这是我写的查询。

```
SELECT p.EmpID, p.Name, p.Status, p.Salary 
FROM professor p, course c, works w 
WHERE p.EmpID = w.EmpID
AND
w.CourseID = c.CourseID
AND
w.ClassID = 10
AND
c.CourseName IN ( SELECT CourseName FROM course WHERE CourseName = 'm1'
AND CourseName = 'm2') 
```

但是即使数据库中有数据，查询也不返回任何值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:12:25.003

这个问题通常被称为`Relational Division`

```
SELECT  a.EmpID, a.name
FROM    Professor a
        INNER JOIN Works b
            ON a.EmpID = b.EmpID AND b.ClassID = 10 
        INNER JOIN  Course c
            ON b.CourseID = c.CourseID
WHERE   c.CourseNAME IN ('M1', 'M2')
GROUP   BY a.EmpID, a.name
HAVING  COUNT(DISTINCT c.CourseNAME) = 2 
```

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:09:36.503

子查询

```
( SELECT CourseName FROM course WHERE CourseName = 'm1' AND CourseName = 'm2') 
```

不会返回任何东西。看“和”

# c# - webclient.downloadfile 没有完全保存页面

> ID：15287793
> 
> 赞同：0
> 
> 时间：2013-03-08T06:09:01.503
> 
> 标签：c#, .net, webclient

我使用以下代码在我的 C# 应用程序中保存网页，但页面未完全保存：

```
WebClient webClient = new WebClient();
webClient.DownloadFile("http://jahanesanat.ir/currency.html", @"d://test/mytest66.html"); 
```

页面的某些部分没有保存在本地文件中是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:15:13.757

也许 d://test/ 被拒绝访问

使用 MSDN 中的这个示例

```
string remoteUri = "http://www.contoso.com/library/homepage/images/";
string fileName = "ms-banner.gif", myStringWebResource = null;
// Create a new WebClient instance.
WebClient myWebClient = new WebClient();
// Concatenate the domain with the Web resource filename.
myStringWebResource = remoteUri + fileName;
Console.WriteLine("Downloading File \"{0}\" from \"{1}\" .......\n\n", fileName, myStringWebResource);
// Download the Web resource and save it into the current filesystem folder.
myWebClient.DownloadFile(myStringWebResource,fileName);        
Console.WriteLine("Successfully Downloaded File \"{0}\" from \"{1}\"", fileName, myStringWebResource);
Console.WriteLine("\nDownloaded file saved in the following file system folder:\n\t" + Application.StartupPath) 
```

# php - iBrowser 不适用于 tinymce_3.5.8

> ID：15287800
> 
> 赞同：2
> 
> 时间：2013-03-08T06:09:33.187
> 
> 标签：php, javascript, jquery, tinymce

我做了以下将 iBrowser 插件添加到 tinymce_3.5.8。

1) iBrowser 文件夹复制到 /tiny_mce/Plugins 2) 复制文件 'editor_plugin.js' 和 'editor_plugin_src.js' 到 iBrowser 3) 配置 iBrowser 的 config.inc.php

```
$cfg['ilibs'] = array ( 
        array (                                                                     
            'value'     => '/tinyimages',                                               
            'text'      => 'Site Pictures',
        ),
        array (
            'value'     => '/tinyimages',               
            'text'      => 'Gallery',
        ),  
    );

$cfg['ilibs_dir']      = array('/tinyimages');

tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "ibrowser,autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

        // Theme options
        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "ibrowser,tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,spellchecker,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,blockquote,pagebreak,|,insertfile,insertimage",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : false,

        content_css :    "style.css",

        template_external_list_url :"tiny_mce/lists/template_list.js",
        external_link_list_url :"tiny_mce/lists/link_list.js",
        external_image_list_url :"tiny_mce/lists/image_list.js",
        media_external_list_url :"tiny_mce/lists/media_list.js",

}); 
```

我仍然得到图标来上传图片。可能出了什么问题？

# php - 使用php刷新页面时发生双重保存

> ID：15287801
> 
> 赞同：1
> 
> 时间：2013-03-08T06:09:33.297
> 
> 标签：php, mysql

我有一个 php 脚本，我提供所有数据并保存存储在我的 mysql 数据库中的数据。但之后如果刷新页面，相同的数据将再次存储在数据库中。我怎样才能避免这种情况。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:19:31.667

1.  使用标题并重定向页面。

    `header("Location:your_page.php");`您可以重定向到同一页面或不同的页面。

2.  将 $_POST 插入数据库后取消设置。

    `unset($_POST);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:15:06.977

您似乎正在重新发送页面刷新时的表单数据。如果一旦您保存表单数据，就不要再将相同的表单呈现给视图。您必须通过检查数据是否已保存来防止它发生。如果保存成功，您还可以从表单视图重定向用户。

# json - 主干获取响应的迭代

> ID：15287804
> 
> 赞同：-1
> 
> 时间：2013-03-08T06:09:45.513
> 
> 标签：json, backbone.js, iteration

在获取结果后，我正在调用一个休息网络服务`backboneCollection.fetch` ，我得到的响应如下：

```
[{"projects":[{"id":1537512,"name":test},{"id":1537513,"name":test1}]}] 
//response =JSON.stringify(projects); 
```

我怎样才能迭代这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:20:15.117

你应该覆盖你的集合的`parse`方法：

```
... rest of collection...

,parse: function(response) {
    return response[0].projects;
} 
```

这样，您的集合将由返回的项目数组组成，而没有额外的包装对象。

[在http://backbonejs.org/#Collection-parse](http://backbonejs.org/#Collection-parse)查看优秀的文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:03:49.503

我相信您未定义 response.projects 的原因是，如果您的响应对象是

```
[{"projects":[{"id":1537512,"name":test},{"id":1537513,"name":test1}]}] 
```

正如您所说，那么您的整个响应都包含在一个数组中。

如果你要带`response[0]`你会有

```
{"projects":[{"id":1537512,"name":test},{"id":1537513,"name":test1}]} 
```

你应该能够接受 response.projects 这个。

从那里遵循@Andbdrew 关于 Backbone 解析函数的声明。

# c# - 使用 Linq 在一行中选择多个元素

> ID：15287805
> 
> 赞同：10
> 
> 时间：2013-03-08T06:09:46.573
> 
> 标签：c#, .net, linq

我的代码如下

```
var users = MyTable.AsEnumerable()
                      .Select(x => new { x.Field<string>("Col1"),x.Field<string>  
                       ("Col2")}).ToList(); 
```

在编译我得到

**无效的匿名类型成员声明符。必须使用成员分配、简单名称或成员访问来声明匿名类型成员。**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-08T06:11:29.403

您需要为匿名类型中的每个字段命名

```
var users = MyTable.AsEnumerable()
  .Select(x => 
     new { Col1 = x.Field<string>("Col1"), Col2 = x.Field<string>("Col2")})
  .ToList(); 
```

只有当表达式本身是编译器可以使用的简单名称时，才能省略匿名类型字段的名称。例如，如果表达式是字段或属性，则可以省略名称。在这种情况下，表达式是一个泛型方法调用，并且没有编译器将使用的名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T06:11:32.633

试试这个：

```
var users = MyTable.AsEnumerable()
                      .Select(x => new
                      {
                        Col1 = x.Field<string>("Col1"),
                        Col2 = x.Field<string>("Col2")})
                        .ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T06:12:14.917

你可以用这个

```
var users = MyTable.AsEnumerable()
                      .Select(x => new
                      {
                        Col1 = x.Field<string>("Col1"),
                        Col2 = x.Field<string>("Col2")})
                        .ToList(); 
```

# r - 如何使用栅格列表创建栅格马赛克？

> ID：15287807
> 
> 赞同：10
> 
> 时间：2013-03-08T06:09:50.650
> 
> 标签：r, raster, mosaic

我需要创建几个光栅马赛克。我在 64 位 Windows 计算机上使用 Package raster 版本 2.0-31。我相信我做功课检查了所有可能的博客并向一些同事提出了这个问题，但仍然找不到解决方案。

我遇到的问题是，如果我的网格列在栅格对象中，我将无法创建马赛克。我发现[这个例子](http://www.nceas.ucsb.edu/scicomp/usecases/createrasterimagemosaic)虽然我可以应用，但不是，我收到一条奇怪的错误消息。下面的例子代表了我的问题：

```
r <- raster()
r1 <- crop(r, extent(-10, 10, -10, 10))
r2 <- crop(r, extent(0, 20, 0, 20))
r3 <- crop(r, extent(10, 30, 10, 30))

r1[] <- 1:ncell(r1)
r2[] <- 1:ncell(r2)
r3[] <- 1:ncell(r3)
rasters1 <- list(r1, r2, r3)

mos <- mosaic(rasters1,fun=mean) 
```

这是我得到的错误：

> 函数错误（类、fdef、mtable）：无法为签名“列表”、“缺失”的函数“马赛克”找到继承的方法</p>

我也尝试了[这里](https://stat.ethz.ch/pipermail/r-sig-geo/2010-March/007941.html)建议的功能，但也没有用。

```
fmerge <- function(rasters1, fun, ...){
  ex <- raster(union(rasters1))
  res(ex) <- res(rasters1[[1]])
  for( i in 1:length(rasters1) )
    rasters[[i]] <- merge(rasters1[[i]], ex)
  rasters <- stack(rasters1)
  fun(rasters1, ...)
}

rfm <- fmerge(rasters1, mean, na.rm=T) 
```

这是错误消息：

> raster(union(rasters1)) 中的错误：在为函数“raster”选择方法时评估参数“x”时出错：as.vector(y) 中的错误：缺少参数“y”，没有默认值

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T03:26:27.857

这似乎是较新版本的栅格中的回归。您的示例代码在 raster 1.9-70（和 R 2.13.1）中按预期运行，但给出的错误与您在 raster 2.0-41（ad R 2.15.3）中收到的错误相同。您可能希望通过电子邮件向维护者 Robert J. Hijmans 指出这一点。

与此同时，这个问题可以得到解决。[查看raster 1.9-70](https://r-forge.r-project.org/scm/viewvc.php/pkg/raster/R/mosaic.R?view=markup&revision=2120&root=raster)[中的镶嵌](https://r-forge.r-project.org/scm/viewvc.php/pkg/raster/R/mosaic.R?view=markup&revision=2598&root=raster)和2.0-41 中的镶嵌之间的代码差异，您可以看到接受列表的方法已被删除。相反，现在只有一种接受单个栅格的方法。所以如果你有很多栅格，你应该像这样调用函数：

```
mos1 <- mosaic(r1, r2, r3, fun=mean) 
```

但是，如果您正在构建要动态镶嵌的栅格列表，这不是很方便。R 确实有一个辅助函数来帮助你在这种情况下，`do.call`. 所做的是`do.call`获取一个函数和一个列表，并使用列表中的项目作为参数调用该函数。所以你可以使用它，只要你添加`fun=mean`到你的参数列表中：

```
rasters1.mosaicargs <- rasters1
rasters1.mosaicargs$fun <- mean
mos2 <- do.call(mosaic, rasters1.mosaicargs) 
```

您可以仔细检查这两种方法是否给出相同的结果：

```
stopifnot(identical(mos1, mos2)) 
```

这可以包装到一个简单的便利函数中，并绑定到相关的调用签名，因此您的原始代码将不加修改地工作：

```
setMethod('mosaic', signature(x='list', y='missing'), 
function(x, y, fun, tolerance=0.05, filename=""){
    stopifnot(missing(y))
    args <- x
    if (!missing(fun)) args$fun <- fun
    if (!missing(tolerance)) args$tolerance<- tolerance
    if (!missing(filename)) args$filename<- filename
    do.call(mosaic, args)
}) 
```

# javascript - 如果用户按下后退按钮，我如何使 jsp 中的会话无效

> ID：15287808
> 
> 赞同：1
> 
> 时间：2013-03-08T06:09:55.673
> 
> 标签：javascript, jquery, html, jsp

我有这个脚本来检测浏览器后退按钮是否被按下。我从[http://www.bajb.net/2010/02/browser-back-button-detection/](http://www.bajb.net/2010/02/browser-back-button-detection/)得到的。

```
var bajb_backdetect={Version:'1.0.0',Description:'Back Button Detection',Browser:{IE:!!(window.attachEvent&&!window.opera),Safari:navigator.userAgent.indexOf('Apple')>-1,Opera:!!window.opera},FrameLoaded:0,FrameTry:0,FrameTimeout:null,OnBack:function(){alert('Back Button Clicked')},BAJBFrame:function(){var BAJBOnBack=document.getElementById('BAJBOnBack');if(bajb_backdetect.FrameLoaded>1){if(bajb_backdetect.FrameLoaded==2){bajb_backdetect.OnBack();history.back()}}bajb_backdetect.FrameLoaded++;if(bajb_backdetect.FrameLoaded==1){if(bajb_backdetect.Browser.IE){bajb_backdetect.SetupFrames()}else{bajb_backdetect.FrameTimeout=setTimeout("bajb_backdetect.SetupFrames();",700)}}},SetupFrames:function(){clearTimeout(bajb_backdetect.FrameTimeout);var BBiFrame=document.getElementById('BAJBOnBack');var checkVar=BBiFrame.src.substr(-11,11);if(bajb_backdetect.FrameLoaded==1&&checkVar!="HistoryLoad"){BBiFrame.src="blank.html?HistoryLoad"}else{if(bajb_backdetect.FrameTry<2&&checkVar!="HistoryLoad"){bajb_backdetect.FrameTry++;bajb_backdetect.FrameTimeout=setTimeout("bajb_backdetect.SetupFrames();",700)}}},SafariHash:'false',Safari:function(){if(bajb_backdetect.SafariHash=='false'){if(window.location.hash=='#b'){bajb_backdetect.SafariHash='true'}else{window.location.hash='#b'}setTimeout("bajb_backdetect.Safari();",100)}else if(bajb_backdetect.SafariHash=='true'){if(window.location.hash==''){bajb_backdetect.SafariHash='back';bajb_backdetect.OnBack();history.back()}else{setTimeout("bajb_backdetect.Safari();",100)}}},Initialise:function(){if(bajb_backdetect.Browser.Safari){setTimeout("bajb_backdetect.Safari();",600)}else{document.write('<iframe src="blank.html" style="display:none;" id="BAJBOnBack" onunload="alert(\'de\')" onload="bajb_backdetect.BAJBFrame();"></iframe>')}}};bajb_backdetect.Initialise(); 
```

为此，我必须在我想要检测它的 jsp 中包含以下 3-4 行。

```
<script type="text/javascript" src="backfix.min.js"></script>
<script type="text/javascript">
    bajb_backdetect.OnBack = function()
    {
        //alert('You clicked it!');
        logoutUser();

    }

      /*window.history.forward();    
      function noBack() { 
      window.history.forward(); 
      }*/

</script> 
```

通过检测用户是否按下后退按钮来使用此脚本，我想使用户页面的会话无效，其中包含重要处理。

仅在 Firefox Mozilla 浏览器中运行良好。但在其他浏览器（如 IE、Google chrome、safari、torch）中，此脚本无法运行。

请帮帮我

# javascript - 禁用演示的提交按钮

> ID：15287809
> 
> 赞同：0
> 
> 时间：2013-03-08T06:09:55.783
> 
> 标签：javascript, html, disabled-input

我正在尝试为演示帐户禁用选项卡式菜单页面的提交按钮。不幸的是，3 个菜单选项卡中的每一个都具有相同的按钮 ID -“Mod0EditRecord”。我不能重命名按钮 ID，也不能改用 class，因为它是由在线数据库呈现的。

```
<input type="submit" value="Update" name="Mod0EditRecord" id="Mod0EditRecord">
<input type="submit" value="Update" name="Mod0EditRecord" id="Mod0EditRecord">
<input type="submit" value="Update" name="Mod0EditRecord" id="Mod0EditRecord"> 
```

我可以成功地将第一个按钮的属性设置为禁用，如下所示

```
if (login == 'demo.account')
{
document.getElementById('Mod0EditRecord').setAttribute("disabled","disabled");
document.write("<br><p style=\"text-align:left; padding-left:100px; font-size:10px;\">** Update button is disabled for the demo **</p>");
} 
else
{
document.getElementById('Mod0EditRecord').removeAttribute("disabled");
} 
```

我正在寻找有关如何为其他两个设置属性的指导。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:24:00.587

您可以使用[jQuery](http://www.jquery.org)之类的 javascript dom 操作库来遍历 HTML 节点并根据需要添加类/更改 id。

如果您必须特别坚持这些属性，那么您可以在 jQuery 中执行以下操作：

```
$('input[name="Mod0EditRecord"]').eq(0).attr('disabled','disabled') 
//this is the first input, change .eq(index) to the value you need 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:34:26.953

document.getElementById 的返回值应该是一个数组。你可以遍历它们。

```
var elem = document.getElementById('Mod0EditRecord');
    for(var i = 0; i < elem.length; i++)
    {
      elem[i].setAttribute("disabled","disabled");
    } 
```

或者，如果您使用的是 jquery，则可以使用 .next() 方法来检索其他两个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T07:47:57.557

您不能使用`document.getElementById`，因为它会返回具有该 ID 的第一个元素。如果您使用的是 VanillaJS，我不会使用 jQuery，因为仅为此功能下载库是毫无用处的。

这就是你要做`document.getElementsByTagName`的：用于获取所有-types ，`input`检查它是否来自那个。`type submit``disable`

```
var inputs = document.getElementsByTagName('input');
for(var i = 0; i < inputs.length; i++ ) {
    if(inputs[i].type === "submit") {
        var submitbtn = inputs[i];
        submitbtn.setAttribute("disabled", "disabled");
    }
} 
```

[JSF](http://jsfiddle.net/6w2WN/)中。

# pointers - 很难弄清楚指向结构的指针在二叉树中是如何工作的

> ID：15287813
> 
> 赞同：0
> 
> 时间：2013-03-08T06:10:05.170
> 
> 标签：pointers, struct, binary-search-tree

```
#include<stdio.h>
#include<stdlib.h>

typedef struct              //create a pointer structure
{
int data;
struct node *left;
struct node *right;
} node;

node *insert(node *root, int x);

//Insert Function
node *insert(node *root, int x)    //Line 53        
{    
    if(!root)
    {
        root = new_node(x);
        return root;
    }

    if (root->data > x)
    {
        root->left = insert(root->left, x);   //Line 63
    }

    else 
    {
        root->right = insert(root->right, x);  // Line 68
    }

    return root;
} 
```

> 编译时出现以下错误：
> 
> ：在函数“插入”中：
> 
> :63:3: 警告：从不兼容的指针类型传递“插入”的参数 1 [默认启用]
> 
> :53:7: 注意：预期的 'struct node *' 但参数的类型是 'struct node *'</p>
> 
> :63:14: 警告：来自不兼容指针类型的赋值 [默认启用]
> 
> :68:3: 警告：从不兼容的指针类型传递“插入”的参数 1 [默认启用]
> 
> :53:7: 注意：预期的 'struct node *' 但参数的类型是 'struct node *'</p>
> 
> :68:15: 警告：来自不兼容指针类型的赋值 [默认启用]

1.  为什么我的插入函数中的第一个参数与我传递给它的参数不兼容？
2.  如何将指针分配给“结构指针”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:17:37.920

将结构定义更改为

```
struct node             //create a pointer structure
{
    int data;
    struct node *left;
    struct node *right;
}; 
```

和函数原型

```
struct node *insert(struct node *root, int x); 
```

# qt - 在 Qt 中获取 MAC ID

> ID：15287814
> 
> 赞同：5
> 
> 时间：2013-03-08T06:10:10.660
> 
> 标签：qt, qtnetwork

我正在使用以下代码在 Qt 中获取 MAC ID。

主文件

```
#include <QtCore/QCoreApplication>
#include "QtNetwork/QNetworkInterface"
#include "QString"

QString getMacAddress()
{
    foreach(QNetworkInterface interface, QNetworkInterface::allInterfaces())
    {
        // Return only the first non-loopback MAC Address
        if (!(interface.flags() & QNetworkInterface::IsLoopBack))
            return interface.hardwareAddress();
        QString text = interface.hardwareAddress();
        qDebug() << text;
    }
    return QString();
}

int main(int argc, char *argv[])
{
    getMacAddress();
    QCoreApplication a(argc, argv);
    return a.exec();
} 
```

我在控制台中一无所获？指导我谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:06:37.530

试试这段代码，显示每个接口的硬件地址：

```
QString getMacAddress()
{
    QString text;
    foreach(QNetworkInterface interface, QNetworkInterface::allInterfaces())
    {
        text += "Interface:"+interface.hardwareAddress()+"\n";
    }
    return text;
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    printf( "%s\n", getMacAddress().toAscii().constData() );
    exit(1);
    return a.exec();
} 
```

# javascript - 推送方法不起作用

> ID：15287815
> 
> 赞同：0
> 
> 时间：2013-03-08T06:10:16.947
> 
> 标签：javascript, push

我一直在为这个脱发。我想根据我的 main 里面有多少标签来创建一个动态数组。请帮我！

这是我的 HTML

```
<div id="image-slider">
   <a href="http://www.google.com"><img src="images/slider1.png"></a>
   <a href="http://www.phpacademy.org"><img src="images/slider2.png"></a>
   <a href="http://www.ign.com"><img src="images/slider3.png"></a>
   <a href="http://www.w3schools.com"><img src="images/slider4.png"></a>
   <a href="http://www.nfl.com"><img src="images/slider5.png"></a>
</div> 
```

这是我的 JS

```
container = document.getElementById('image-slider');
containerLength = container.childNodes.length;
images = new Array();
for(var i=0;i<=containerLength;i++){
if (container.childNodes[i].nodeName == 'A') {
    alert(container.childNodes[i]);// here I get the desired value
    images.push(container.childNodes[i]);
          //this doesn't work even if i use images.push('Hello');
}
}
alert(images[0]); //doesn't even pops out
// if I do it like this.... i get the desired result! I don't know why! but this is not what i want
images.push(container.childNodes[1]);
alert(images[0]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:13:50.193

您的整个问题可以很容易地规避：

```
var images = document.getElementById("image-slider").children; 
```

魔术：p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:22:16.280

如果您对此运行调试器，您会注意到您正在尝试引用集合中的第 12 个元素，而该集合只有 11 个。

```
for(var i=0;i<=containerLength;i++) 
```

应该

```
for(var i=0;i<containerLength;i++) 
```

# c++ - 在 C++ 中避免向量中的多次复制

> ID：15287818
> 
> 赞同：2
> 
> 时间：2013-03-08T06:10:32.227
> 
> 标签：c++, stl

我的问题是在下面给出避免矢量复制中的多个副本。

```
#include <iostream>
#include <algorithm>
#include <vector>

using namespace std;

class DataValue {
public:

    DataValue() { std::cout << "DataValue constructor called" << std::endl; }
    DataValue(DataValue const& other) { cout << "DataValue copy constructor called" << std::endl; }
    ~DataValue() { std::cout << "DataValue destructor is called" << std::endl; }
private:

};

class ItemDataHistory {
public:
    ItemDataHistory() { std::cout << "ItemDataHistory constructor called" << std::endl; }
    // ItemDataHistory(ItemDataHistory const & other) { std::cout << "ItemDataHistory copy constructor called" << std::endl; }
    ~ItemDataHistory() { std::cout << "ItemDataHistory destructor called" << std::endl; }
    std::vector<DataValue>& GetVecDataValues() { return m_vecDataValues; }  

private:
    std::vector<DataValue> m_vecDataValues;
};

class DataReply {
public:

    DataReply() { std::cout << "Data reply constructor is called "<< std::endl; }
    ~DataReply() { std::cout << "Data reply destructor is called "<< std::endl; }
    DataReply(const DataReply& ) { std::cout << "Data reply copy constructor is called "<< std::endl; }

    std::vector<ItemDataHistory>& GetItemDataHistories() { return m_vecItemData; }  

private:
    // The list of DataValue
    std::vector<ItemDataHistory> m_vecItemData;
};

void main()
{

    DataValue dv1, dv2, dv3;
    ItemDataHistory itmDH;
    itmDH.GetVecDataValues().reserve(3);
    itmDH.GetVecDataValues().push_back(dv1);
    itmDH.GetVecDataValues().push_back(dv2);
    itmDH.GetVecDataValues().push_back(dv3);

    DataReply dr;
    dr.GetItemDataHistories().reserve(1);
    dr.GetItemDataHistories().push_back(itmDH); // Here copy consturtor of itemdatahistory is called and all data values are copied.
                                                    // Here I want to avoid data values constructor to be called again how can I avoid this
                                                    // How can I directly insert values of dv1, dv2, dv3 into "dr" with out using "itmDH"?
    return;
} 
```

请注意，我不能在 std::vector m_vecItemData 上方使用指针；在数据回复类中，因为这些是来自库的接口类并且无法控制它，我正在调用函数，因此函数可以在数据范围内使用数据

我的问题在上面的代码注释中给出。原因是我有数千个数据值。为了避免调用数据值的多个构造函数，我想将数据值直接插入到数据回复中（即，不使用 itmDH 局部变量）

其他问题是

如何在数据回复中保留数据值空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:14:38.323

使用 C++11，您有两种选择：

*   使您的类型`ItemDataHistory`可移动并移动您的数据（如果可能）`dr.GetItemDataHistories().push_back(std::move(itmDH));`
*   查看容器的新成员函数，例如[`emplace_back()`](http://en.cppreference.com/w/cpp/container/vector/emplace_back).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:30:20.440

在**C++11 中，**您可以使用移动语义。

而不是这样做：

```
itmDH.GetVecDataValues().push_back(dv1);
itmDH.GetVecDataValues().push_back(dv2);
itmDH.GetVecDataValues().push_back(dv3); 
```

你可以这样做：

```
itmDH.GetVecDataValues().push_back(std::move(dv1));
itmDH.GetVecDataValues().push_back(std::move(dv2));
itmDH.GetVecDataValues().push_back(std::move(dv3)); 
```

它们不是复制值，而是简单地移动到向量中。

而不是复制*itmDH*

```
dr.GetItemDataHistories().push_back(itmDH); 
```

你也可以移动它：

```
dr.GetItemDataHistories().push_back(std::move(itmDH)); 
```

此外，您还需要移动构造函数。这是一个例子：

```
DataValue(DataValue&& other){
    std::cout << "DataValue move constructor called" << std::endl;
} 
```

您还可以声明和定义移动赋值运算符：

```
DataValue& operator=(DataValue&& other){
    std::cout << "DataValue move assigment operator is called" << std::endl;
    return *this;
} 
```

为了完全理解移动语义（以及右值引用），请查看以下链接：

[http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html](http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html) [http://thbecker.net/articles/rvalue_references/section_01.html](http://thbecker.net/articles/rvalue_references/section_01.html)

# ios - 核心数据获取不返回结果，但它们在 sqllite 数据库中

> ID：15287820
> 
> 赞同：1
> 
> 时间：2013-03-08T06:11:03.147
> 
> 标签：ios, core-data

我正在使用以下代码创建一个对象：

```
 +(Checkin *) newCheckinWithId:(NSString*) checkinID forVenueId:(NSString *)venueId
{
    NSManagedObjectContext * context = [[AppDelegate sharedInstance] managedObjectContext];
    Checkin *ret = (Checkin *)[NSEntityDescription insertNewObjectForEntityForName:@"Checkin" inManagedObjectContext:context];
    ret.checkinID = checkinID;
    ret.forVenueID = venueId;
    ret.date = [NSDate date];
    NSError * error;
    if(![context save:&error]) {
        NSLog(@"Error saving!!!!!: %@", error.userInfo);
    }
    return ret;
} 
```

此代码有效，我可以在磁盘上的 sqldatabase 文件中看到对象（在 ~/library/iphone sim/.. 不管它是什么）

这是我用来创建商店 + 托管对象上下文的代码（我对所有内容都使用 1 个上下文）它基本上全部来自我发现的堆栈溢出帖子

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (_managedObjectModel != nil)
    {
        return _managedObjectModel;
    }
    //NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Model" withExtension:@"momd"];
    //__managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    //NSArray *testArray = [[NSBundle mainBundle] URLsForResourcesWithExtension:@"momd"subdirectory:nil];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"Model" ofType:@"momd"];

    if( !path ) path = [[NSBundle mainBundle] pathForResource:@"Model" ofType:@"mom"];

    NSURL *modelURL = [NSURL fileURLWithPath:path];

    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    //__managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];

    return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if((_persistentStoreCoordinator != nil)) {
        return _persistentStoreCoordinator;
    }

    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];
    NSPersistentStoreCoordinator *psc = _persistentStoreCoordinator;

    // Set up iCloud in another thread:

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // ** Note: if you adapt this code for your own use, you MUST change this variable:
        NSString *iCloudEnabledAppID = @"[MY APP ID]";

        // ** Note: if you adapt this code for your own use, you should change this variable:
        NSString *dataFileName = @"foursquareaugmentation.sqlite";

        // ** Note: For basic usage you shouldn't need to change anything else

        NSString *iCloudDataDirectoryName = @"Data.nosync";
        NSString *iCloudLogsDirectoryName = @"Logs";
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSURL *localStore = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:dataFileName];
        NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];

        if (iCloud) {

            NSLog(@"iCloud is working");

            NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

            NSLog(@"iCloudEnabledAppID = %@",iCloudEnabledAppID);
            NSLog(@"dataFileName = %@", dataFileName);
            NSLog(@"iCloudDataDirectoryName = %@", iCloudDataDirectoryName);
            NSLog(@"iCloudLogsDirectoryName = %@", iCloudLogsDirectoryName);
            NSLog(@"iCloud = %@", iCloud);
            NSLog(@"iCloudLogsPath = %@", iCloudLogsPath);

            if([fileManager fileExistsAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]] == NO) {
                NSError *fileSystemError;
                [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]
                       withIntermediateDirectories:YES
                                        attributes:nil
                                             error:&fileSystemError];
                if(fileSystemError != nil) {
                    NSLog(@"Error creating database directory %@", fileSystemError);
                }
            }

            NSString *iCloudData = [[[iCloud path]
                                     stringByAppendingPathComponent:iCloudDataDirectoryName]
                                    stringByAppendingPathComponent:dataFileName];

            NSLog(@"iCloudData = %@", iCloudData);

            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
            [options setObject:iCloudEnabledAppID            forKey:NSPersistentStoreUbiquitousContentNameKey];
            [options setObject:iCloudLogsPath                forKey:NSPersistentStoreUbiquitousContentURLKey];

            [psc lock];
            NSError *error;

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                                        URL:[NSURL fileURLWithPath:iCloudData]
                                    options:options
                                      error:&error];

            if( error )
            {
                NSLog(@"Error adding persistent store %@, %@", error, [error userInfo]);

                // comment in this line while debugging if get "Can't find model for source store" error in addPersistentStoreWithType.
                // it means the sqlite database doesn't match the new model and needs to be created from scratch.
                // this happens if you change the xcdatamodel instead of creating a new one under Xcode->Editor->Add Model Version...
                // CoreData can only automatically migrate if there is a new model version (it can't migrate if the model simply changes, because it can't see the difference between the two models).
                // be sure to back up the database if needed, because all data will be lost.
                //[fileManager removeItemAtPath:iCloudData error:&error];

                /*// this is another way to verify the hashes for the database's model to make sure they match one of the entries in the momd directory's VersionInfo.plist
                 NSDictionary *sourceMetadata = [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:NSSQLiteStoreType URL:[NSURL fileURLWithPath:iCloudData] error:&error];

                 if( !sourceMetadata )
                 NSLog(@"sourceMetadata is nil");
                 else
                 NSLog(@"sourceMetadata is %@", sourceMetadata);*/
            }

            [psc unlock];
        }
        else {
            NSLog(@"iCloud is NOT working - using a local store");
            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

            [psc lock];
            NSError *error;

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                                        URL:localStore
                                    options:options
                                      error:nil];

            if( error )
                NSLog(@"Error adding persistent store %@, %@", error, [error userInfo]);
            [psc unlock];
        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [[NSNotificationCenter defaultCenter] postNotificationName:@"SomethingChanged" object:self userInfo:nil];
        });
    });

    return _persistentStoreCoordinator;   
}

/*
 Returns the managed object context for the application.
 If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
 */
- (NSManagedObjectContext *) managedObjectContext
{
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
        [_managedObjectContext setPersistentStoreCoordinator: coordinator];
    }
    return _managedObjectContext;
} 
```

这是我的收获：

```
+(NSArray *) checkinsForVenue:(NSString *) venueID
{
    NSManagedObjectContext * context = [[AppDelegate sharedInstance] managedObjectContext];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Checkin" inManagedObjectContext:context];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    request.entity = entity;

    //NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(forVenueID = %@)", venueID];
    //request.predicate = predicate;

    NSError *error;
    NSArray * ret = [context executeFetchRequest:request error:&error];
    if(ret == nil) {
        NSLog(@"%@", error.description);
    }
    return ret;
} 
```

即使数据库中有东西，Fetch 总是不返回任何对象（空数组）！

我一直在安静地解决这个问题一段时间，并且非常没有想法，所以任何事情都值得赞赏！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:27:16.507

试试这个代码来获取数据：

```
- (NSFetchedResultsController *)fetchedResultsController 
{
    if (_fetchedResultsController != nil )
    {
        return _fetchedResultsController;
    }

    NSLog(@"Length:: %d",[[_fetchedResultsController mutableCopy] length]);

    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"OrderDetails"];
    [fetchRequest setIncludesSubentities:YES];

    // Sort by Application name
    NSSortDescriptor* sortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"orderId" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)];
    //Sort by CommandNameloca
    NSArray* sortDescriptors = [[NSArray alloc] initWithObjects: sortDescriptor1, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    [fetchRequest setFetchBatchSize:100];

    ordersArr=[[NSMutableArray alloc]initWithArray:sortDescriptors];

    NSLog(@"----- ordersArr Count == %d",[ordersArr count]);

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"orderId" cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;

    if (![self.fetchedResultsController performFetch:&error])
    {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    return _fetchedResultsController;
} 
```

在此方法之后，我执行编写此行以将数据存储在您的应用程序数组中，如下所示：

```
NSMutableArray *myArr=[[NSMutableArray alloc]initWithArray:self.fetchedResultsController.fetchedObjects]; 
```

# exception - 如果异常处理，Windows Phone 应用程序认证失败

> ID：15287829
> 
> 赞同：0
> 
> 时间：2013-03-08T06:11:30.367
> 
> 标签：exception, windows-phone-8

我正在为 Windows Phone 开发。当代码中抛出异常时，我会处理它并以用户可以理解的方式向用户显示有关某些问题的特定消息。我想问如果我发现异常并做同样的事情，我的申请认证是否有可能失败？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:58:55.100

这本身不会使证书失败，但如果您的应用程序由于不再工作的异常而陷入如此混乱，它可能会失败。有一些你无论如何都无法捕捉到的例外情况（`OutOfMemoryException`例如，如果我没记错的话）

# cassandra - Cassandra中的几个非主键列，以及使用Pycassa

> ID：15287831
> 
> 赞同：1
> 
> 时间：2013-03-08T06:11:49.803
> 
> 标签：cassandra, pycassa

我的要求是有一个如下的列族：

```
 mac_ap text,
    proto int,
    stime int,
    total_data int,
    total_assoc int,
    location_id int,
    location_name text
    PRIMARY KEY(mac_ap, proto, stime) 
```

我认为`COMPACT STORAGE`不允许这样做。另外，我想使用 pycassa。有什么方法可以实现上述使用`Cassandra 1.2`和`Pycassa?`

# php - 从网站 cms 将推荐信发布到 Facebook 业务页面

> ID：15287838
> 
> 赞同：2
> 
> 时间：2013-03-08T06:12:10.523
> 
> 标签：php, facebook, facebook-graph-api, content-management-system

抱歉，如果以前已经处理过此问题，但是我的网站人员在使其正常工作时遇到了问题。我正在使用 facebook open graph api 将我的 PHP 网站 CMS 的推荐信发布到我的 facebook 业务页面。我有一个 facebook 个人资料，并从我的个人资料创建了一个业务页面。我还在我的个人资料下创建了一个应用程序，以获取一个应用程序 ID 和密钥，用于图形 api 代表我从我的网站发布到我的 facebook 业务页面。问题是我需要将帖子直接转到我的业务页面并作为我的业务发布，而不是作为我或代表我。目前，该 api 正在将帖子直接发送到我的个人资料墙上，显示我通过我的业务页面共享链接，并且它根本没有出现在业务页面上。我需要一种将推荐书直接发布到我的业务页面而不是在我的个人资料墙上的方法。我怎么做？我的理解是他使用了个人 ID 和应用程序密码以及业务页面应用程序 ID 和密码，但似乎得到了相同的结果。
下面的代码是正在使用的，任何帮助将不胜感激；

```
<?php
$facebook = new Facebook(array(
    'appId'  => 'myappid',
    'secret' => 'mysecrectkey',
));
// Get User ID
$user = $facebook->getUser();
if ($user) {   
    try
    {
        $user_profile = $facebook->api('/me');
        $AccessToken  = $facebook->getAccessToken();
        $data = array("message" => $pdes,"link" => "http://www.website.com.au/testimonial.php", "name" => $name);
        $share = $facebook->api("/me/feed", "POST", $data);
    }
    catch (FacebookApiException $e)
    {
        error_log($e);
        $user = null;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:41:37.010

好吧，你的问题在这里：

```
$share = $facebook->api("/me/feed", "POST", $data); 
```

此代码将消息发送到您的墙上，而不是页面。为了代表您的页面在您的 Facebook 页面上发帖，首先，您的应用需要获取`manage_pages`和`publish_stream`权限。拥有它后，您需要获取要发布的页面的访问令牌：

```
$pages = $facebook->api('/me/accounts');
foreach($pages as $page)
{
 if($page['id'] == YOUR_PAGE_ID)
    $data['access_token'] = $page['access_token'];
} 
```

获得页面访问令牌后，您必须使用它在页面墙上发送消息：

```
$facebook->api(YOUR_PAGE_ID . '/feed', 'POST', $data); 
```

# java - 根据包含对象的属性值从 ArrayList 中过滤唯一对象

> ID：15287842
> 
> 赞同：0
> 
> 时间：2013-03-08T06:12:16.777
> 
> 标签：java, arraylist

我将如何从数组列表中过滤唯一对象。

```
List<LabelValue> uniqueCityListBasedState = new ArrayList<LabelValue>();
for (LabelValue city : cityListBasedState) {
    if (!uniqueCityListBasedState.contains(city)) {
        uniqueCityListBasedState.add(city);
    }
} 
```

这是我的代码。但问题是我需要过滤的不是对象，而是该对象内的属性值。在这种情况下，我需要排除具有该名称的对象。

那是`city.getName()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T07:44:20.633

```
List<LabelValue> uniqueCityListBasedState = new ArrayList<LabelValue>();
        uniqueCityListBasedState.add(cityListBasedState.get(0));
        for (LabelValue city : cityListBasedState) {
            boolean flag = false;
            for (LabelValue cityUnique : uniqueCityListBasedState) {    
                if (cityUnique.getName().equals(city.getName())) {
                    flag = true;                    
                }
            }
            if(!flag)
                uniqueCityListBasedState.add(city);

        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T06:20:56.543

假设您可以更改要设置的列表。

请改用[集合集合](http://docs.oracle.com/javase/tutorial/collections/interfaces/set.html)。

> Set 是一个不能包含重复元素的集合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T06:57:25.763

覆盖(在这种情况下不是必须的)的`equals()`and`hashCode()`方法：`LabelValue``hashCode`

```
String name;

@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((name == null) ? 0 : name.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    LabelValueother = (LabelValue) obj;
    if (name == null) {
        if (other.name != null)
            return false;
    } else if (!name.equals(other.name))
        return false;
    return true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T06:15:42.740

这是解决它的一种方法。

您应该覆盖 LabelValue 的`equals()`方法和`hashCode()`。

`equals()`方法应该使用`name`属性，方法也应该使用`hashCode()`。

然后你的代码就可以工作了。

PS。我假设您的 LabelValue 对象可以仅通过 name 属性来区分，这正是您根据您的问题似乎需要的。

# javascript - 请解释一下这行js代码。

> ID：15287850
> 
> 赞同：0
> 
> 时间：2013-03-08T06:13:09.917
> 
> 标签：javascript

我有以下 javascript 代码块，但不是很清楚：

```
var level = this.getLevelForResolution(this.map.getResolution());
var coef = 360 / Math.pow(2, level);

var x_num = this.topTileFromX < this.topTileToX ? Math.round((bounds.left - this.topTileFromX) / coef) : Math.round((this.topTileFromX - bounds.right) / coef);
var y_num = this.topTileFromY < this.topTileToY ? Math.round((bounds.bottom - this.topTileFromY) / coef) : Math.round((this.topTileFromY - bounds.top) / coef); 
```

`<`in是什么`this.topTileFromX <`意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:14:46.300

那是一个 JavaScript 三元运算符。[在此处](http://msdn.microsoft.com/en-us/library/ie/be21c7hw%28v=vs.94%29.aspx)查看详细信息

```
var x_num = this.topTileFromX < this.topTileToX ? Math.round((bounds.left - this.topTileFromX) / coef) : Math.round((this.topTileFromX - bounds.right) / coef); 
```

等价于下面的表达式

```
var x_num;

if (this.topTileFromX < this.topTileToX )
{
    x_num= Math.round((bounds.left - this.topTileFromX) / coef);
}
else
{
    x_num= Math.round((this.topTileFromX - bounds.right) / coef);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:15:09.020

`<`意思是“小于”，就像在数学中一样。

因此

*   `2 < 3`返回`true`
*   `2 < 2`是`false`
*   `3 < 2`也是`false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:17:03.967

```
var x_num = this.topTileFromX < this.topTileToX ? Math.round((bounds.left - this.topTileFromX) / coef) : Math.round((this.topTileFromX - bounds.right) / coef); 
```

这是一个较短的 if 语句。它的意思是：

```
var x_num;

if(this.topTileFromX < this.topTileToX)
{
   x_num = Math.round((bounds.left - this.topTileFromX) / coef);
}
else
{
   x_num = Math.round((this.topTileFromX - bounds.right) / coef);
} 
```

# css - 溢出属性不切断 jQuery 轮播内容

> ID：15287852
> 
> 赞同：0
> 
> 时间：2013-03-08T06:13:16.093
> 
> 标签：css, carousel

好的，我知道。相信我，我知道。这似乎很容易解决。但是，解决方案已经让我困惑了一段时间。

我正在使用 jQuery[轮播](http://caroufredsel.dev7studios.com/)插件。我似乎无法让轮播在它嵌套的 div 的末尾切断。

```
<div style='overflow:hidden;margin:0 auto;'>
     <div class='carousel'>
<?php
     for($i=0;$i<$count;$i++)
     {
          echo "<div>
                    ".$content[$i]."
               </div>";
     }
 ?>
     </div>
</div> 
```

[你可以在这里](http://sportannica.com/)找到一个工作示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:16:54.753

你给`overflow:hidden`了错误的父元素。尝试给予`overflow:hidden`元素`li`并给予 `position:relative`它。问题将得到解决。:)

```
li{
  /* other css properties */
  position:relative;
  overflow:hidden;
} 
```

# android - 如何实现 iOS 提供给 Android ListFragment 的 scrollsToTop

> ID：15287854
> 
> 赞同：0
> 
> 时间：2013-03-08T06:13:30.520
> 
> 标签：android

我创建了使用`ListFragment`.

所以，我想在 iOS 中滚动到`touch StatusBar`顶部`UItableView`。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:21:33.773

您可以将 OnClickListener 设置为 StatusBar 并使用列表视图的 scrollTo/smoothScrollTo 方法。

像这样的东西

`getListView().smoothScrollToPosition(0);`

应该有帮助。

# java - Eclipse：以编程方式创建动态 Web 项目

> ID：15287856
> 
> 赞同：6
> 
> 时间：2013-03-08T06:13:49.770
> 
> 标签：java, eclipse

我尝试通过首先通过 IProject 创建 java 项目然后使用 IFacetedProject 将其转换为动态 Web 项目来创建动态 Web 项目，但只创建静态项目......这是我所做的代码......请帮助我这..提前谢谢。

```
IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
IProject project = root.getProject("TESTJDT");

        try
        {
            project.create(null);
            project.open(null);
            IProjectDescription description = project.getDescription();
            description.setNatureIds(new String[] { JavaCore.NATURE_ID });
            project.setDescription(description, null);
            IJavaProject javaProject = JavaCore.create(project);

            IClasspathEntry[] buildPath = {
            JavaCore.newSourceEntry(project.getFullPath().append("src")),
            JavaRuntime.getDefaultJREContainerEntry() };

            javaProject.setRawClasspath(buildPath,project.getFullPath().append(
            "bin"), null);

            IFolder folder = project.getFolder("src");
            folder.create(true, true, null);

            IPackageFragmentRoot srcFolder = javaProject.getPackageFragmentRoot(folder);

            IPackageFragment fragment = srcFolder.createPackageFragment("com.programcreek", true, null);

            String str = "package com.programcreek;" + "\n"
            + "public class Test  {" + "\n" + " private String name;"+ "\n" + "}";

            ICompilationUnit cu = fragment.createCompilationUnit("Test.java", str,false, null);

            IType type = cu.getType("Test");

            type.createField("private String age;", null, true, null);

            IFacetedProject facetedProject =
                ProjectFacetsManager.create(project, true, null);
            IProjectDescription description1 = project.getDescription();
            description1.setNatureIds(new String[]
        {"org.eclipse.jem.workbench.JavaEMFNature",
        "org.eclipse.jdt.core.javanature",
        "org.eclipse.wst.common.project.facet.core.nature",
        "org.eclipse.wst.common.modulecore.ModuleCoreNature",
        "org.eclipse.wst.jsdt.core.jsNature"});

            project.setDescription(description1, null);
            IProjectFacet wstWebFacet = ProjectFacetsManager.getProjectFacet
                (IModuleConstants.WST_WEB_MODULE);
            facetedProject.installProjectFacet
                (wstWebFacet.getDefaultVersion(), null, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T18:39:46.487

试试这个方法：

```
public static IProject getWebDataModel(String projName, boolean createDD) throws ExecutionException{
    IDataModel dm = DataModelFactory.createDataModel(new SimpleWebFacetProjectCreationDataModelProvider());
    dm.setProperty(IFacetProjectCreationDataModelProperties.FACET_PROJECT_NAME, projName);

    FacetDataModelMap facetMap = (FacetDataModelMap) dm.getProperty(IFacetProjectCreationDataModelProperties.FACET_DM_MAP);
    IDataModel facetModel = facetMap.getFacetDataModel(IJ2EEFacetConstants.DYNAMIC_WEB);
    facetModel.setProperty(IFacetDataModelProperties.FACET_VERSION, JavaEEFacetConstants.WEB_25);

    facetModel.setBooleanProperty(IJ2EEFacetInstallDataModelProperties.GENERATE_DD, createDD);
    IDataModel javaFacetModel = facetMap.getFacetDataModel(IJ2EEFacetConstants.JAVA);
    javaFacetModel.setProperty(IFacetDataModelProperties.FACET_VERSION, JavaEEFacetConstants.JAVA_5);

    IStatus st = dm.getDefaultOperation().execute(new NullProgressMonitor(), null);
    return st.isOK() ? ResourcesPlugin.getWorkspace().getRoot().getProject(projName) : null;
} 
```

如果您不介意使用非公共 API，`WebFacetProjectCreationDataModelProvider`您也可以使用受限类。`SimpleWebFacetProjectCreationDataModelProvider`

# iphone - 如何在iphone的图像视图中加载url图像

> ID：15287860
> 
> 赞同：2
> 
> 时间：2013-03-08T06:14:06.990
> 
> 标签：iphone, ios, ipad

```
- (void)viewDidLoad
   {
    [super viewDidLoad];
    NSURL *url = [NSURL URLWithString:@"http://www.scri8e.com/effects/FL0WERZ/PNG/ir09.png"];
    data = [[NSData alloc]initWithContentsOfURL:url ];
    UIImage *img = [[UIImage alloc]initWithData:data ];
    imageview.image=img;
    } 
```

以上是我的代码，但它不会在图像视图中加载图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T06:19:43.377

试试[这个](https://github.com/nicklockwood/AsyncImageView)库，它将帮助您下载图像并在 imageview 中显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:21:14.643

相同的代码对我有用！！！！！！

> 请检查互联网连接。
> 
> 请检查`NSData *data` 尺寸
> 
> 请检查 UIImageView 大小
> 
> 请检查它被其他一些控件隐藏
> 
> 请检查它是否已正确添加到您的视图中
> 
> 请检查其内容视图

```
@property(nonatomic,retain) IBOutlet UIImageView *imageview;

NSURL *url = [NSURL URLWithString:@"http://www.scri8e.com/effects/FL0WERZ/PNG/ir09.png"];
NSData *data = [[NSData alloc]initWithContentsOfURL:url ];
UIImage *img = [[UIImage alloc]initWithData:data ];
self.imageview.image=img; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:32:02.290

如果您直接在 xib 中获取 imageview，则不仅仅是在连接检查器中检查连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T13:58:18.033

使用[EgoImageView](https://github.com/enormego/EGOImageLoading)而不是 ImageView。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-21T12:46:04.017

```
NSString *mainimg=[NSString stringWithFormat:@"%@",[[xmlDataDictionary valueForKeyPath:@"eg.main.img1"]objectAtIndex:indexPath.row]];
NSURL *url = [NSURL URLWithString:mainimg];
NSData *image = [[NSData alloc] initWithContentsOfURL:url];
cell.img.image=[UIImage imageWithData:image]; 
```

试试这个解析的网址..

很简单..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-23T08:32:28.513

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *url_Img1 = @"http://www.scri8e.com/effects/FL0WERZ/PNG";
    NSString *url_Img2 = @"ir09.png";

    NSString *url_Img_FULL = [url_Img1 stringByAppendingPathComponent:url_Img2];

    NSLog(@"Show url_Img_FULL: %@",url_Img_FULL);
    _view_Image.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url_Img_FULL]]];

} 
```

# mysql - 使用 NOT IN 时我的 sql 括号

> ID：15287861
> 
> 赞同：0
> 
> 时间：2013-03-08T06:14:08.913
> 
> 标签：mysql, notin

我使用 MySql，在下面的查询中运行时，我发现它在两个框中的行为不同，有人可以帮助我吗？

代码在这里：

```
SELECT *
FROM `product` AS `e`
WHERE e.id NOT IN((SELECT `product_id` FROM `sales`)) 
```

在一个框中，它运行良好并返回结果。在另一个框中，它显示`error: [Err] 1242 - Subquery returns more than 1 row`

如果删除一对（），它在两个框中都可以正常工作，如下所示：

```
SELECT *
FROM `product` AS `e`
WHERE e.id NOT IN(SELECT `product_id` FROM `sales`) 
```

谁能告诉我原因，即与服务器设置有关？我可以在不修改 sql 语句的情况下解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:11:50.900

数据;

```
 (SELECT `product_id` FROM `sales`) 
```

被视为“NOT IN”要使用的列表中的第一项。这必须是单个值，因此您会收到错误，因为返回了多行。

# regex - 在 sed 中使用正则表达式查找和替换

> ID：15287862
> 
> 赞同：2
> 
> 时间：2013-03-08T06:14:18.583
> 
> 标签：regex, sed, unix

我想换

```
# Bulk Delete # 
```

和

```
=== Bulk Delete === 
```

我正在使用以下`sed`命令。

```
sed "s/#\([^#]*\)#/===\1===/g" filename 
```

它有效，但它也取代了

```
### Translation 
```

和

```
======# Translation 
```

如何防止它并使其在mac和ubuntu中都可以工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T06:17:15.930

最简单的方法是也匹配空白：

```
sed 's/# \([^#]*\) #/=== \1 ===/g' filename 
```

另一种方法是在两个散列之间要求多个（一个或多个）非散列：

```
sed 's/#\([^#]\{1,\}\)#/===\1===/g' filename 
```

是一个量词符号，`\{n,m\}`它需要至少*n*次出现和最多*m*次出现在它之前的模式，所以它是`?`,`*`和`+`元字符（可以分别表示为`\{0,1\}`,`\{0,\}`和`\{1,\}`）的泛化。如果缺少*m*，则表示不小于*n*的任何数字；如果*n*缺失，则表示任何不大于*m*的数字，因此等于 0。在我的示例中，我将其用作经典的、可移植的（适用于`sed`Linux 和 Mac OS X 的史前版本）版本的`+`.

另一种写法是：

```
sed 's/#\([^#][^#]*\)#/===\1===/g' filename 
```

当然，您可以结合这些想法：

```
sed 's/# \([^#][^#]*\) #/=== \1 ===/g' filename
sed 's/# \([^#]\{1,\}\) #/=== \1 ===/g' filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:20:19.543

您可以使用`+`来强制执行至少一个不是`#`

由于`sed`在 OSX 中默认情况下不支持增强的正则表达式语法`+`，因此您需要将`-E`标志传递给 sed。好消息是`-E`flag 在`*nix`系统上也能很好地工作。使用`-E`标志时，您可以跳过转义特殊的正则表达式字符，如`+`,`(`等。

```
sed -E "s/#([^#]+)#/===\1===/g" filename 
```

# php - 如何以分层方式检索 S3 存储桶内容？

> ID：15287864
> 
> 赞同：0
> 
> 时间：2013-03-08T06:14:21.803
> 
> 标签：php, data-structures, amazon-s3

我工作的公司将来自其客户端的已处理文件存储在其服务器上，并为每个客户端提供一个简单的页面，该页面具有指向服务器上文件目录的链接。每个客户端都有一个文件夹，其中任何一个都可能有许多子文件夹。

我最近将此设置移至 Amazon S3 存储桶。我的问题是，当我检索存储桶的内容时（使用我在网上找到的 S3 php 类），它会返回存储桶全部内容的大量 FLAT 数组。我可以对其进行过滤，以便每个客户只看到他们的目录，但是将这种分层数据结构转换为以后显示被证明是一件非常痛苦的事情。

是否有任何函数以某种反映其结构的方式返回 S3 项目？如果不是这样，这可能会变成一个关于从一大堆平面数组中生成多维数组的问题。

谢谢！克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:52:30.577

使用前缀和分隔符来获取文件列表。

```
 <?php        
    $prefix = "jsondata/$folderName/$subFolderName/temp/";
    //$bucketname is a root bucket name   
    $ret = $s3->getObjectsByBucket($bucketname, array(
        'prefix'    => $prefix,
        'delimiter' => ''
    ));
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:36:29.083

S3 支持使用前缀和分隔符分层列出键，有关更多信息，请参阅[文档](http://docs.aws.amazon.com/AmazonS3/latest/dev/ListingKeysHierarchy.html)。

# javascript - 根据对象属性删除数组元素

> ID：15287865
> 
> 赞同：374
> 
> 时间：2013-03-08T06:14:24.517
> 
> 标签：javascript, jquery, arrays, object, properties

我有一个像这样的对象数组：

```
var myArray = [
    {field: 'id', operator: 'eq', value: id}, 
    {field: 'cStatus', operator: 'eq', value: cStatus}, 
    {field: 'money', operator: 'eq', value: money}
]; 
```

如何根据其属性删除特定的？

例如，我将如何删除以'money' 作为字段属性的数组对象？

* * *

## 回答 #1

> 赞同：517
> 
> 时间：2013-03-08T06:19:37.990

一种可能：

```
myArray = myArray.filter(function( obj ) {
    return obj.field !== 'money';
}); 
```

请注意，这`filter`会创建一个新数组。尽管您`myArray`使用新引用更新了原始变量，但引用原始数组的任何其他变量都不会获得过滤后的数据。谨慎使用。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2013-03-08T06:17:54.493

遍历数组，[`splice`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)找出你不想要的。为了更容易使用，向后迭代，这样您就不必考虑数组的实时性质：

```
for (var i = myArray.length - 1; i >= 0; --i) {
    if (myArray[i].field == "money") {
        myArray.splice(i,1);
    }
} 
```

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2018-04-06T09:45:40.057

假设您想通过它的字段属性删除第二个对象。

使用 ES6 就这么简单。

```
myArray.splice(myArray.findIndex(item => item.field === "cStatus"), 1) 
```

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2020-01-21T03:27:29.410

在 ES6 中，只有一行。

```
const arr = arr.filter(item => item.key !== "some value"); 
```

:)

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-08-20T11:30:20.660

你可以使用lodash的[findIndex](https://lodash.com/docs/4.17.4#findIndex)来获取特定元素的索引，然后使用它进行拼接。

```
myArray.splice(_.findIndex(myArray, function(item) {
    return item.value === 'money';
}), 1); 
```

**更新**

你也可以使用 ES6 的[findIndex()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex)

> findIndex() 方法返回数组中满足提供的测试函数的第一个元素的索引。否则返回 -1。

```
const itemToRemoveIndex = myArray.findIndex(function(item) {
  return item.field === 'money';
});

// proceed to remove an item only if it exists.
if(itemToRemoveIndex !== -1){
  myArray.splice(itemToRemoveIndex, 1);
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2020-11-23T17:52:36.057

我们可以使用以下两种方法根据属性删除元素。

1.  使用过滤方法

> ```
> testArray.filter(prop => prop.key !== 'Test Value') 
> ```

2.  采用拼接法。对于这种方法，我们需要找到属性的索引。

> ```
> const index = testArray.findIndex(prop => prop.key === 'Test Value')
> testArray.splice(index,1) 
> ```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-03-23T12:20:21.037

这是使用 jQuery grep 的另一个选项。作为第三个参数传递`true`以确保 grep 删除与您的函数匹配的项目。

```
users = $.grep(users, function(el, idx) {return el.field == "money"}, true) 
```

如果您已经在使用 jQuery，则不需要 shim，与使用`Array.filter`.

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-08-25T17:00:48.790

```
var myArray = [
    {field: 'id', operator: 'eq', value: id}, 
    {field: 'cStatus', operator: 'eq', value: cStatus}, 
    {field: 'money', operator: 'eq', value: money}
];
console.log(myArray.length); //3
myArray = $.grep(myArray, function(element, index){return element.field == "money"}, true);
console.log(myArray.length); //2 
```

元素是数组中的一个对象。第三个参数`true`意味着将返回一个不符合您的功能逻辑`false`的元素数组，意味着将返回一个不符合您的功能逻辑的元素数组。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-04-10T09:41:59.020

使用[lodash](https://lodash.com/)库：

```
var myArray = [
    {field: 'id', operator: 'eq', value: 'id'}, 
    {field: 'cStatus', operator: 'eq', value: 'cStatus'}, 
    {field: 'money', operator: 'eq', value: 'money'}
];
var newArray = _.remove(myArray, function(n) {
  return n.value === 'money';;
});
console.log('Array');
console.log(myArray);
console.log('New Array');
console.log(newArray);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.5/lodash.js"></script>
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-07-19T20:36:33.257

基于上面的一些评论，下面是如何根据键名和键值删除对象的代码

```
 var items = [ 
  { "id": 3.1, "name": "test 3.1"}, 
  { "id": 22, "name": "test 3.1" }, 
  { "id": 23, "name": "changed test 23" } 
  ]

    function removeByKey(array, params){
      array.some(function(item, index) {
        return (array[index][params.key] === params.value) ? !!(array.splice(index, 1)) : false;
      });
      return array;
    }

    var removed = removeByKey(items, {
      key: 'id',
      value: 23
    });

    console.log(removed); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-08T06:25:46.120

jAndy 的解决方案可能是最好的，但如果您不能依赖过滤器，您可以执行以下操作：

```
var myArray = [
    {field: 'id', operator: 'eq', value: 'id'}, 
    {field: 'cStatus', operator: 'eq', value: 'cStatus'}, 
    {field: 'money', operator: 'eq', value: "money"}
];

myArray.remove_key = function(key){
    var i = 0, 
        keyval = null;
    for( ; i < this.length; i++){
        if(this[i].field == key){
            keyval = this.splice(i, 1);
            break;
        }
    }
    return keyval;
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-03-08T06:27:29.917

如果您不使用 jQuery，以下是代码。[演示](http://jsfiddle.net/umairsaleemid/mkjqM/)

```
var myArray = [
    {field: 'id', operator: 'eq', value: 'id'}, 
    {field: 'cStatus', operator: 'eq', value: 'cStatus'}, 
    {field: 'money', operator: 'eq', value: 'money'}
];

alert(myArray.length);

for(var i=0 ; i<myArray.length; i++)
{
    if(myArray[i].value=='money')
        myArray.splice(i);
}

alert(myArray.length); 
```

您还可以使用具有很多功能的下划线库。

[Underscore](http://underscorejs.org/)是一个用于 JavaScript 的实用工具带库，它提供了许多函数式编程支持

# html - 支持除 Internet Explorer 以外的所有浏览器

> ID：15287873
> 
> 赞同：-5
> 
> 时间：2013-03-08T06:14:53.057
> 
> 标签：html

这是在文本框中显示搜索的简单代码。但它不适用于 Internet Explorer。为什么？

```
<div id="rightsearch_div1">
   <input id="text_box" placeholder="search..." type="text"  />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:16:34.340

它适用于 IE10。

事情在发布时没有实现它的浏览器中不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:17:22.780

它应该可以在最新的 IE 中运行。我喜欢使用这个网站来检查这些东西的跨浏览器兼容性：http: [//caniuse.com/#feat=input-placeholder](http://caniuse.com/#feat=input-placeholder)

# android - Android 打印到网络打印机

> ID：15287892
> 
> 赞同：4
> 
> 时间：2013-03-08T06:15:58.273
> 
> 标签：android

我想在我的 android 应用程序中包含通过 WiFi 从网络打印机打印图像的功能。我尝试了下面的代码，发布在stackoverflow上，但我只能打印文本:(如果我想打印图像该怎么办。

```
try
{
    Socket sock = new Socket("192.168.1.222", 9100);
    PrintWriter oStream = new PrintWriter(sock.getOutputStream());
        oStream.println("HI,test from Android Device");
        oStream.println("\n\n\n");
        oStream.close();
        sock.close(); 
    }
    catch (UnknownHostException e) 
    {
        e.printStackTrace();
    } 
    catch (IOException e) 
    { 
        e.printStackTrace();
    } 
} 
```

# sql-server-2012 - SSIS CDC 控制任务

> ID：15287893
> 
> 赞同：1
> 
> 时间：2013-03-08T06:16:12.893
> 
> 标签：sql-server-2012, cdc, change-data-capture, ssis-2012

我正在对 SSIS CDC 组件的使用进行概念验证。

对于初始负载：到目前为止我得到的是

步骤 1：具有 CDC 控制操作的 CDC 控制任务为：标记初始加载开始步骤 2：将所有源记录加载到目标的数据流步骤 3：具有 CDC 控制操作的 CDC 控制任务为：标记初始加载结束（其余设置为CDC 在步骤 1)

当我第一次运行时......所有数据加载正常。如果运行相同...而不是选择无记录（源没有变化）...它会再次重新加载所有记录...复制。

这是否不检查在步骤 1 中创建的 CDC 状态表。

任何人都可以向我指出好的示例或教程会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:49:43.363

是的，我明白了.. 我做错的是我创建了一个包来完成所有初始加载和增量加载。另一件事是我在初始加载后没有为“Mark CDC Start”创建一个步骤。现在我得到了一个包，它完成了完整的初始加载，然后标记 CDC 启动。然后从那里开始我的第二个包做增量加载开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:41:32.043

首先，您需要了解 CDC Control Task 仅处理 LSN。它从启用 CDC 的数据库中读取它，并将其保存到指定的变量中，以便后续步骤可以使用它。可选，它可以将值保存到数据库表中，然后后续包执行可以使用它。

步骤 1 和步骤 3 本质上只是分别将一个 LSB 编号置于 CDC 状态，即执行这些步骤时的最大 LSB。在执行初始加载时，可能同时发生其他活动，这两个步骤为我们提供了涵盖初始加载期的 LSB 范围。

初始加载之后的下一次运行应该是增量加载，它使用数据流中**的 CDC 源** 来检索在初始加载期间发生的事务。

Matt Masson的一篇很棒的文章[应该](http://www.mattmasson.com/2011/12/cdc-in-ssis-for-sql-server-2012-2/)让您了解 CDC。

# python - pexpect 输出不显示

> ID：15287894
> 
> 赞同：0
> 
> 时间：2013-03-08T06:16:13.423
> 
> 标签：python, pexpect

我们简单的 pexpect 脚本有这个：

```
import pexpect
import sys

test = pexpect.spawn('ftp www.today.com')
test.logfile = sys.stdout
test.expect('Name.*') 
```

但是，在调用脚本的 shell 上，没有显示输出。相反，它似乎挂起，但我们可以看到进程 ftp ... 已生成。

如何在调用脚本的 shell 上显示输出？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:04:15.533

这行应该：

```
test = pexpect.spawn('ftp www.today.com') 
```

不是：

```
test = pexpect.spawn('ftp ftp.today.com') 
```

因为通常如果你愿意`ftp`，你必须使用`ftp.something.com`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:19:27.407

test.logfile 将只包含命令的输出，命令行本身并没有记录在 logfile 属性中。

因此，只要生成命令并且没有输出，调用脚本时外壳中不会显示任何内容。例如，当达到 ftp 连接超时时，将会有一个显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T06:43:33.490

您可能需要使用`logfile_read`. 这是代码：

```
import pexpect
import sys
test = pexpect.spawn('ftp www.today.com')
test.logfile_read = sys.stdout
test.expect('Name.*') 
```

# php - 在 PHP 中将 PDO 记录集转换为 JSON

> ID：15287905
> 
> 赞同：1
> 
> 时间：2013-03-08T06:16:51.967
> 
> 标签：php, json, pdo, recordset

我正在使用 PHP，我需要一种将整个记录集转换为 JSON 字符串的方法。

在搜索 Stack Overflow 时，我发现这个解决方案有效：

```
function recordSetToJson($mysql_result) {
  $rs = array();
  while($rs[] = mysql_fetch_assoc($mysql_result)) {
    // you don´t really need to do anything here.
  }
  return json_encode($rs);
} 
```

这段代码的问题是我发现该函数`mysql_fetch_assoc()`在 PHP 5.5.0 中已被弃用。另一件事是我使用 PDO 连接到我的数据库。

鉴于上述情况，将 PDO 记录集转换为 JSON 的最佳解决方案是什么？我希望它也可以在更高版本的 PHP 中工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-08T07:01:17.650

解决方案很简单。考虑到变量`$stmt`是您的 PDO 记录集，您可以像这样将其转换为 JSON：

```
json_encode($stmt->fetchAll(PDO::FETCH_ASSOC)); 
```

有关这段代码中使用的函数的更多信息：

[http://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

[http://www.php.net/manual/en/pdostatement.fetchall.php](http://www.php.net/manual/en/pdostatement.fetchall.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T06:28:36.457

你应该使用类似的东西

以前的某个地方

```
$stmt = $pdo->prepare("SELECT * FROM fruit WHERE name = ?");
$stmt->execute(array("Apple"));
....

function recordSetToJson($stmt) {
  $json_result = array();
  while($tmp = $stmt->fetch() ) {
       $json_result[] = $tmp;
  }
  return json_encode($json_result);
} 
```

但最终的解决方案将完全取决于太多的因素。

# c++ - 在box2d中操纵精灵运动

> ID：15287909
> 
> 赞同：0
> 
> 时间：2013-03-08T06:17:11.470
> 
> 标签：c++, cocos2d-iphone, box2d

在过去的几天里，我一直在尝试制作类似乒乓球的游戏。我有 2 个桨和一个球。所有动态精灵。除了我遇到的一个问题外，一切都运行良好。球往往会在某个点以相同的角度反弹。所以有时玩家可以简单地在特定部分移动球拍，游戏可以持续一段时间或可能永远，因为无论击中球拍的哪个部分，球都不会改变其角速度. 我正在使用线速度和角速度的组合来保持球像这样移动：

```
if(_isPaused == FALSE)
{
    _world->Step(dt, 10, 10);
    for(b2Body *b = _world->GetBodyList(); b; b=b->GetNext()) {
        if (b->GetUserData() != NULL) {
            CCSprite *sprite = (CCSprite *)b->GetUserData();
            if(sprite.tag == 2)
            {
                b2Vec2 dir = b->GetLinearVelocity();
                dir.Normalize();
                float currentSpeed = dir.Length();
                int maxSpeed = 60;
                float accelerate = vel;

                if(currentSpeed <= maxSpeed)
                {
                    b->SetLinearVelocity(accelerate * dir);
                }

                sprite.position = ccp(b->GetPosition().x * PTM_RATIO,
                                      b->GetPosition().y * PTM_RATIO);
                sprite.rotation = -1 * CC_RADIANS_TO_DEGREES(b->GetAngle());

                //Keep sprite from bouncing in a straight angle
                b->SetAngularVelocity(_body->GetAngle());
            }}} 
```

所以我的问题是，我如何操纵角速度以使球在每次与我的桨碰撞时以不同的角度弹跳？我正在考虑获取当前角速度然后将其乘以某个值，但我不确定这是否是解决我遇到的问题的正确方法。任何建议或想法将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:51:40.297

在我看来，你有两个选择：

1.  检查碰撞的位置。如果它靠近桨的顶部/底部边缘，则将传出速度偏转一个与该点表面“曲率”成比例的角量。当然，这是作弊，但如果艺术品和代码一致，它看起来是正确的。图形是“不被抓住的作弊艺术”。
2.  您可以考虑桨的当前速度以及球的当前速度。例如：如果球向下和向右移动，并且桨向下移动，那么您可以使用[线性动量守恒](https://en.wikipedia.org/wiki/Momentum#Conservation)来计算传出方向。只要确保将桨沿水平轴的动量变化限制为零即可。

最后，您可以结合上述技术，但现在您必须使用准确的碰撞检测（不是我在上面 (1) 中描述的 hack）。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T22:03:59.027

一些指针，你应该`SetLinearVelocity()`很少使用`SetAngularVelocity()`。每一个都会改变 body 定义的一个属性，当事情变得更复杂时，这可能会让你遇到问题。最好使用`ApplyForceToCenter()`或`ApplyLinearImpulse()`代替，`SetLinearVelocity()`因为这两个功能更加通用，并且对编码器更友好。

在我看来，我认为你不应该使用`b->SetAngularVelocity(_body->GetAngle());`如果你想在每次碰撞时改变角速度，你可以在你的`beginContact`方法中写下每次身体与桨体碰撞时，都会应用随机角脉冲对球，使用`ApplyAngularImpulse().`

希望有帮助。

# function - 使用函数时变量发生意外变化

> ID：15287911
> 
> 赞同：1
> 
> 时间：2013-03-08T06:17:12.883
> 
> 标签：function

我写了一个简单的代码，但是当我运行代码`IniPopulation`时会变成Population，有什么原因会发生这种情况？？？我是初学者。

```
Module Module1

Function SelectParents(ByVal Population As String()) As String()
    Population(0) = "Micheal"
    Population(1) = "Moses"
    Return Population
End Function

Sub main()
    Dim IniPopulation() As String = {"Saed", "Ahmad"}
    Dim population() As String
    population = SelectParents(IniPopulation)
    population(0) = "AZIZ"
End Sub

End Module 
```

# image - 图像未以在 adobe reader 11.0.02 中打开的 adobe livecycle design 创建的表单上传

> ID：15287913
> 
> 赞同：1
> 
> 时间：2013-03-08T06:17:16.213
> 
> 标签：image, adobe, adobe-reader, livecycle-designer

`adobe livecycle designer`adobe reader 11.0.02 和 10.1.4 不支持在其中创建的表单

该表单有一个图像字段，允许用户上传图像并将其保存在表单中。图像未保存在 adobe 11 和 adobe 10 中。

我试过保存表格，`adobe reader 9.5.0`图像没有问题。

我还尝试在`adobe livecycle designer`. 然而，这并没有解决问题。

如果有人遇到过同样的问题，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T13:24:00.743

关于 Adob​​e Live Cycle 中的图像字段：图像默认链接。如果您希望它与表单一起保存，则需要嵌入图像。只需选中嵌入图像旁边的框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:50:40.830

我遇到过同样的问题。对我来说，我已将所有字段名称命名为 imagefield1。将它们更改为像 imagefield1 和 imagefield2 这样的唯一名称后，图像将保存。我认为这是由于数据绑定到图像字段名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:27:48.967

对于读者或 Livecycle 来说，Adobe 的已知问题似乎没有任何关于此的内容，但如果您可以共享该文件，我很乐意查看并看看是否有什么我能做的。

过去我遇到过图像不显示的问题，值得检查对象属性中的绑定属性是否设置为 Normal 而不是 None，因为这是我之前遇到的问题。

# linux - 如何找到 main() 的返回地址在堆栈中的位置？

> ID：15287917
> 
> 赞同：0
> 
> 时间：2013-03-08T06:17:46.173
> 
> 标签：linux, buffer-overflow, exploit

我需要为一个类做一个远程缓冲区溢出漏洞利用。我了解其中的大部分。它涉及覆盖 main 的返回地址，以便我可以执行自己的代码。但是我们从来没有讨论过如何在内存中找到返回地址的位置......我一直弄错了，漏洞利用不起作用:(

我坐在 gdb 中，我有缓冲区的地址 (0xbffff3dc)

现在，我需要找出返回地址在堆栈中的哪个位置（这样我就可以找出它和我的缓冲区之间的偏移量）。

然后我会知道我必须添加多少空间：

*   一个 NOP (0x90) “雪橇”
*   我的shellcode
*   更多 NOP ？？？
*   我的缓冲区的地址（覆盖返回地址）
*   “\r\n” ???

^ 我不确定标有“???”的东西是否 是完全必要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:35:22.810

您可能可以使用[objdump](http://sourceware.org/binutils/docs/binutils/objdump.html)。

试一试`objdump -d your-executable`，它会给你汇编代码和地址

# javascript - 如何在jquery中获取事件的完成时间

> ID：15287921
> 
> 赞同：4
> 
> 时间：2013-03-08T06:17:58.773
> 
> 标签：javascript, performance, jquery

嗨，我正在使用 jquery。

我有一个复选框点击事件

```
jQuery('.btn-check-box').click(function () {

    //code goes here .
}); 
```

问题是点击事件需要相当长的时间才能完成。有时浏览器会卡住。所以我想更改函数内部的代码并减少完成时间。

现在我想获取我当前的点击事件完成时间。然后更改代码并再次检查完成时间。

所以我可以根据完成时间优化我的代码。

**有什么方法可以检查事件完成时间。** 请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T06:25:12.137

将事件作为参数传递。

```
var createdTime;
jQuery('.btn-check-box').click(function(e){ 
  createdTime = e.timeStamp;
}).done(function(){ calculate time difference }); 
```

如果您将使用`console.log(e)`它，它将向您显示 jQuery 在触发事件时已经传递了时间戳。

所以现在你需要在完成时找到一种方法，这样`.done()`jQuery 方法会帮助你。

在 .done() 中，您也可以得到相同`e.timestamp`的结果并进行一些数学运算，以在秒、分钟或任何时间内得到您想要的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:25:55.913

就像 SrinivasR 说的，完成时间 - 开始时间。

```
jQuery('.btn-check-box').click(function () {
    var t0 = (new Date()).getTime();
    //code goes here
    console.log("Event took",(new Date()).getTime() - t0, "ms to complete.");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T06:28:09.327

尝试以下代码

```
jQuery('.btn-check-box').click(function () {
var secondStart = new Date().getTime() / 1000;
    // Your code goes here .
var secondEnd = new Date().getTime() / 1000;
var totalTime = secondEnd - secondStart;
console.log('Executing took' +totalTime +'seconds' )
}); 
```

# php - 货币格式输出，也在文本框中

> ID：15287923
> 
> 赞同：0
> 
> 时间：2013-03-08T06:18:09.517
> 
> 标签：php

我这里有一个示例计算，我想知道它如何成为货币格式输出。例如 1000+ 1000 =2000 我想将其输出为 2,000。另外，在输入值时，我希望它自动显示为货币格式。

```
<html>

<head>
</head>

<body>

<form name="haha" method="post" >

1:<input type="text" name="num1">

2:<input type="text" name="num2">

Total:<input type="label" name="total">
<input type="submit" value="add" name="submit">

</html>
</form>
<?

if (isset($_POST['submit']))
{

$num1=$_POST['num1'];
$num2=$_POST['num2'];
$total=$_POST['total'];

$total= $num1 + $num2;

echo $total;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:20:10.137

我假设您正在寻找[`number_format`](http://php.net/number_format)或更高级的兄弟[`money_format`](http://php.net/money-format)。这将为您处理服务器端。

至于客户端，我建议不要在用户打字时进行更改。只需让他们输入他们想要的数字即可。如果您允许他们输入千位分隔符，则可以加分（因为您可以在 PHP 中轻松地将它们删除以获取数字本身）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:20:41.567

尝试[number_format](http://php.net/manual/en/function.number-format.php)

```
$english_format_number = number_format(floatval($total));
echo $english_format_number; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:28:28.423

您需要为此使用 javascript，当用户更改输入值时，您需要调用该函数来格式化该值。

你必须这样：

```
$("[name^='num']").change(function(){
     var value = $(this).val();
      $(this).val(money_format(format, value));
}); 
```

这是 monet 格式的功能：

参考：[https ://github.com/kvz/phpjs/blob/master/functions/strings/money_format.js](https://github.com/kvz/phpjs/blob/master/functions/strings/money_format.js)

```
function money_format (format, number) {
  // http://kevin.vanzonneveld.net
  // + original by: Brett Zamir (http://brett-zamir.me)
  // + input by: daniel airton wermann (http://wermann.com.br)
  // + bugfixed by: Brett Zamir (http://brett-zamir.me)
  // - depends on: setlocale
  // % note 1: This depends on setlocale having the appropriate locale (these examples use 'en_US')
  // * example 1: money_format('%i', 1234.56);
  // * returns 1: 'USD 1,234.56'
  // * example 2: money_format('%14#8.2n', 1234.5678);
  // * returns 2: ' $ 1,234.57'
  // * example 3: money_format('%14#8.2n', -1234.5678);
  // * returns 3: '-$ 1,234.57'
  // * example 4: money_format('%(14#8.2n', 1234.5678);
  // * returns 4: ' $ 1,234.57 '
  // * example 5: money_format('%(14#8.2n', -1234.5678);
  // * returns 5: '($ 1,234.57)'
  // * example 6: money_format('%=014#8.2n', 1234.5678);
  // * returns 6: ' $000001,234.57'
  // * example 7: money_format('%=014#8.2n', -1234.5678);
  // * returns 7: '-$000001,234.57'
  // * example 8: money_format('%=*14#8.2n', 1234.5678);
  // * returns 8: ' $*****1,234.57'
  // * example 9: money_format('%=*14#8.2n', -1234.5678);
  // * returns 9: '-$*****1,234.57'
  // * example 10: money_format('%=*^14#8.2n', 1234.5678);
  // * returns 10: ' $****1234.57'
  // * example 11: money_format('%=*^14#8.2n', -1234.5678);
  // * returns 11: ' -$****1234.57'
  // * example 12: money_format('%=*!14#8.2n', 1234.5678);
  // * returns 12: ' *****1,234.57'
  // * example 13: money_format('%=*!14#8.2n', -1234.5678);
  // * returns 13: '-*****1,234.57'
  // * example 14: money_format('%i', 3590);
  // * returns 14: ' USD 3,590.00'

  // Per PHP behavior, there seems to be no extra padding for sign when there is a positive number, though my
  // understanding of the description is that there should be padding; need to revisit examples

  // Helpful info at http://ftp.gnu.org/pub/pub/old-gnu/Manuals/glibc-2.2.3/html_chapter/libc_7.html and http://publib.boulder.ibm.com/infocenter/zos/v1r10/index.jsp?topic=/com.ibm.zos.r10.bpxbd00/strfmp.htm

  if (typeof number !== 'number') {
    return null;
  }
  var regex = /%((=.|[+^(!-])*?)(\d*?)(#(\d+))?(\.(\d+))?([in%])/g; // 1: flags, 3: width, 5: left, 7: right, 8: conversion

  this.setlocale('LC_ALL', 0); // Ensure the locale data we need is set up
  var monetary = this.php_js.locales[this.php_js.localeCategories['LC_MONETARY']]['LC_MONETARY'];

  var doReplace = function (n0, flags, n2, width, n4, left, n6, right, conversion) {
    var value = '',
      repl = '';
    if (conversion === '%') { // Percent does not seem to be allowed with intervening content
      return '%';
    }
    var fill = flags && (/=./).test(flags) ? flags.match(/=(.)/)[1] : ' '; // flag: =f (numeric fill)
    var showCurrSymbol = !flags || flags.indexOf('!') === -1; // flag: ! (suppress currency symbol)
    width = parseInt(width, 10) || 0; // field width: w (minimum field width)

    var neg = number < 0;
    number = number + ''; // Convert to string
    number = neg ? number.slice(1) : number; // We don't want negative symbol represented here yet

    var decpos = number.indexOf('.');
    var integer = decpos !== -1 ? number.slice(0, decpos) : number; // Get integer portion
    var fraction = decpos !== -1 ? number.slice(decpos + 1) : ''; // Get decimal portion

    var _str_splice = function (integerStr, idx, thous_sep) {
      var integerArr = integerStr.split('');
      integerArr.splice(idx, 0, thous_sep);
      return integerArr.join('');
    };

    var init_lgth = integer.length;
    left = parseInt(left, 10);
    var filler = init_lgth < left;
    if (filler) {
      var fillnum = left - init_lgth;
      integer = new Array(fillnum + 1).join(fill) + integer;
    }
    if (flags.indexOf('^') === -1) { // flag: ^ (disable grouping characters (of locale))
      // use grouping characters
      var thous_sep = monetary.mon_thousands_sep; // ','
      var mon_grouping = monetary.mon_grouping; // [3] (every 3 digits in U.S.A. locale)

      if (mon_grouping[0] < integer.length) {
        for (var i = 0, idx = integer.length; i < mon_grouping.length; i++) {
          idx -= mon_grouping[i]; // e.g., 3
          if (idx <= 0) {
            break;
          }
          if (filler && idx < fillnum) {
            thous_sep = fill;
          }
          integer = _str_splice(integer, idx, thous_sep);
        }
      }
      if (mon_grouping[i - 1] > 0) { // Repeating last grouping (may only be one) until highest portion of integer reached
        while (idx > mon_grouping[i - 1]) {
          idx -= mon_grouping[i - 1];
          if (filler && idx < fillnum) {
            thous_sep = fill;
          }
          integer = _str_splice(integer, idx, thous_sep);
        }
      }
    }

    // left, right
    if (right === '0') { // No decimal or fractional digits
      value = integer;
    } else {
      var dec_pt = monetary.mon_decimal_point; // '.'
      if (right === '' || right === undefined) {
        right = conversion === 'i' ? monetary.int_frac_digits : monetary.frac_digits;
      }
      right = parseInt(right, 10);

      if (right === 0) { // Only remove fractional portion if explicitly set to zero digits
        fraction = '';
        dec_pt = '';
      } else if (right < fraction.length) {
        fraction = Math.round(parseFloat(fraction.slice(0, right) + '.' + fraction.substr(right, 1))) + '';
        if (right > fraction.length) {
          fraction = new Array(right - fraction.length + 1).join('0') + fraction; // prepend with 0's
        }
      } else if (right > fraction.length) {
        fraction += new Array(right - fraction.length + 1).join('0'); // pad with 0's
      }
      value = integer + dec_pt + fraction;
    }

    var symbol = '';
    if (showCurrSymbol) {
      symbol = conversion === 'i' ? monetary.int_curr_symbol : monetary.currency_symbol; // 'i' vs. 'n' ('USD' vs. '$')
    }
    var sign_posn = neg ? monetary.n_sign_posn : monetary.p_sign_posn;

    // 0: no space between curr. symbol and value
    // 1: space sep. them unless symb. and sign are adjacent then space sep. them from value
    // 2: space sep. sign and value unless symb. and sign are adjacent then space separates
    var sep_by_space = neg ? monetary.n_sep_by_space : monetary.p_sep_by_space;

    // p_cs_precedes, n_cs_precedes // positive currency symbol follows value = 0; precedes value = 1
    var cs_precedes = neg ? monetary.n_cs_precedes : monetary.p_cs_precedes;

    // Assemble symbol/value/sign and possible space as appropriate
    if (flags.indexOf('(') !== -1) { // flag: parenth. for negative
      // Fix: unclear on whether and how sep_by_space, sign_posn, or cs_precedes have
      // an impact here (as they do below), but assuming for now behaves as sign_posn 0 as
      // far as localized sep_by_space and sign_posn behavior
      repl = (cs_precedes ? symbol + (sep_by_space === 1 ? ' ' : '') : '') + value + (!cs_precedes ? (sep_by_space === 1 ? ' ' : '') + symbol : '');
      if (neg) {
        repl = '(' + repl + ')';
      } else {
        repl = ' ' + repl + ' ';
      }
    } else { // '+' is default
      var pos_sign = monetary.positive_sign; // ''
      var neg_sign = monetary.negative_sign; // '-'
      var sign = neg ? (neg_sign) : (pos_sign);
      var otherSign = neg ? (pos_sign) : (neg_sign);
      var signPadding = '';
      if (sign_posn) { // has a sign
        signPadding = new Array(otherSign.length - sign.length + 1).join(' ');
      }

      var valueAndCS = '';
      switch (sign_posn) {
        // 0: parentheses surround value and curr. symbol;
        // 1: sign precedes them;
        // 2: sign follows them;
        // 3: sign immed. precedes curr. symbol; (but may be space between)
        // 4: sign immed. succeeds curr. symbol; (but may be space between)
      case 0:
        valueAndCS = cs_precedes ? symbol + (sep_by_space === 1 ? ' ' : '') + value : value + (sep_by_space === 1 ? ' ' : '') + symbol;
        repl = '(' + valueAndCS + ')';
        break;
      case 1:
        valueAndCS = cs_precedes ? symbol + (sep_by_space === 1 ? ' ' : '') + value : value + (sep_by_space === 1 ? ' ' : '') + symbol;
        repl = signPadding + sign + (sep_by_space === 2 ? ' ' : '') + valueAndCS;
        break;
      case 2:
        valueAndCS = cs_precedes ? symbol + (sep_by_space === 1 ? ' ' : '') + value : value + (sep_by_space === 1 ? ' ' : '') + symbol;
        repl = valueAndCS + (sep_by_space === 2 ? ' ' : '') + sign + signPadding;
        break;
      case 3:
        repl = cs_precedes ? signPadding + sign + (sep_by_space === 2 ? ' ' : '') + symbol + (sep_by_space === 1 ? ' ' : '') + value : value + (sep_by_space === 1 ? ' ' : '') + sign + signPadding + (sep_by_space === 2 ? ' ' : '') + symbol;
        break;
      case 4:
        repl = cs_precedes ? symbol + (sep_by_space === 2 ? ' ' : '') + signPadding + sign + (sep_by_space === 1 ? ' ' : '') + value : value + (sep_by_space === 1 ? ' ' : '') + symbol + (sep_by_space === 2 ? ' ' : '') + sign + signPadding;
        break;
      }
    }

    var padding = width - repl.length;
    if (padding > 0) {
      padding = new Array(padding + 1).join(' ');
      // Fix: How does p_sep_by_space affect the count if there is a space? Included in count presumably?
      if (flags.indexOf('-') !== -1) { // left-justified (pad to right)
        repl += padding;
      } else { // right-justified (pad to left)
        repl = padding + repl;
      }
    }
    return repl;
  };

  return format.replace(regex, doReplace);
} 
```

# javascript - 掌握 Javascript Function.bind()

> ID：15287925
> 
> 赞同：3
> 
> 时间：2013-03-08T06:18:17.397
> 
> 标签：javascript

```
function def() {
    console.log(this.x)
}

var f = def.bind({ x:777 })
f() // prints 777 
```

`bind`创建一个`f`与 相同的函数`def`，除了在 内`f`，`this`设置为`{ x:777 }`。

是否可以访问`f`绑定到外部的对象`f`？例如，`console.log(f.this.x)`（但这不起作用）。或者后面的代码不可能看到`f`绑定到什么对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T08:02:17.773

我在这里找到了一些有用的信息：http `bind`: [//dmitrysoshnikov.com/notes/note-1-ecmascript-bound-functions/](http://dmitrysoshnikov.com/notes/note-1-ecmascript-bound-functions/)

`bind`正如 ECMAScript 5 中所指定的那样，产生一种轻量级函数（在某些方面与通常的函数不同，如上面的链接中所述。基本上它提供了一个用于调用目标函数的包装器，并维护包括目标函数的内部属性， bound`this`和绑定参数。由于这些是内部属性，因此无法以 OP 询问的方式访问它们（您不能采用任意绑定函数`f`并执行类似的操作`f.getBoundThis()`）。

值得注意的是，bind 在捕获某些状态时并不是唯一的。闭包也捕获状态。但是，`bind`（如 ECMAScript 5 中所指定）*不是*闭包，因为闭包捕获变量，而 bind 捕获值。

这是一个例子：

```
(function () {
    var x = 2;

    function thisSquared() { return this * this; }
    f = thisSquared.bind(x);

    g = function() { return x * x; } // g is a closure

    console.log(f()); // Squares the captured value (2), prints 4
    console.log(g()); // Squares x, prints 4

    x = 3;
})();

console.log(f()); // Squares the captured value (still 2), prints 4
console.log(g()); // Squares x, prints 9 
```

一些以前的实现`bind`（在 ECMAScript 5 之前用 JavaScript 编写）与闭包没有这种区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:40:24.973

不，您无法访问它，因为该对象仅在调用的生命周期内临时绑定到该函数，它不会更改函数原型。

# java - 通过 JNI 从本机代码访问 java 变量，给出垃圾值

> ID：15287926
> 
> 赞同：1
> 
> 时间：2013-03-08T06:18:18.177
> 
> 标签：java, android, android-ndk, java-native-interface, native

我正在android中创建一个视频播放器。在代码的 android 端，我有一个用于播放/暂停状态的切换按钮。如果 plafFlag=0，则需要暂停视频（playFlag 是 java 部分代码中的变量）。

在代码的本机端，我试图在每次帧显示到屏幕上之前访问这个 playFlag 的值。

下面是我的java部分代码：

```
public class myPlayer extends Activity {
    public int playFlag;
   .
   .
   .
   .
   protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.player);
          final ToggleButton playFlagBtn=(ToggleButton) findViewById(R.id.toggleButton1);

         playFlagBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                if(playFlagBtn.isChecked()){
                    playFlag=0;
                }
                else{
                    playFlag=1;
                }
            }
        }); 
```

从这个**OnCreate**函数本身，我调用了我试图访问**playFlag**变量的本机代码。

下面是我用来访问**playFlag**变量的代码片段：

```
jclass cls = (*env)->FindClass(env,"com/example/my_decoder/myPlayer");  __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","reference to class obatined",NULL);

 jfieldID fidInt=(*env)->GetFieldID(env,cls,"playFlag","I");
 __android_log_print(ANDROID_LOG_DEBUG,"MYAPP","fid obtained",NULL);

 int Flag=0;

__android_log_print(ANDROID_LOG_DEBUG,"MYAPP","Before fetching flag value",NULL);
playFlag=(*env)->GetIntField(env,jobj,fidInt);
__android_log_print(ANDROID_LOG_DEBUG,"MYAPP","Initial value of playflag=%d",playFlag); 
```

上面的本机代码片段没有给出错误。该值已获取，但似乎是一些垃圾值。

在 logcat 中，我得到如下输出：

```
03-08 11:21:32.627: D/MYAPP(31220): Initial value of playflag=1085053248 
```

这里的主要目的是如果 fetched 标志的值为 0，则暂停解码过程，否则继续解码帧并将其渲染到屏幕上。因此，对我来说，从代码的 java 部分获取正确的标志值非常重要。

谁能解释一下我哪里出错了。或者，如果有其他方法可以做到这一点。

等待一些答复。提前致谢。

# java - DAO中方法的单元测试

> ID：15287928
> 
> 赞同：1
> 
> 时间：2013-03-08T06:18:37.153
> 
> 标签：java, junit, junit4

在 DAO 中，一个查询返回我和`List<Object[]>`

我做了一个 ABC 有

```
protected String Name;
protected Integer AGE; 
```

以及它的获取者和设置者。

这是我的 DAO 方法

```
List<ABC> list = new ArrayList<ABC>();
if(result!=null && !result.isEmpty())
{
    Iterator dataIter = result.iterator();
    while(dataIter.hasNext()) 
    {
    Object[] row = (Object[]) dataIter.next();
    ABC abc = new ABC();
    abc.setName((String)row[0]);
    abc.setAGE((Integer)row[1]);
    list.add(abc);
    }
}

return list; 
```

我如何为这种方法编写 JUNit 测试。通过 Junit 我可以检查返回列表是否为空，但是如果我想检查列表中的内容怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:14:04.760

您可以使用`assertEquals`检查返回的值是否已更正

```
@Test
public void testListOfABC() throws DAOException {
    // Declare your DAO 

    List<ABC> lstABC = dao.yourFunction();

    // check if it is null
    assertNotNull(lstABC);

    // check if the returned list have enough values 
    assertEquals(lstABC.size(), 3);

    // check if each value is corrected 
    assertEquals(lstABC.get(0).getName(), "firstname");
    assertEquals(lstABC.get(0).getAGE(), 25);
    // and so on   

} 
```

通常，我们会准备一个测试数据集（例如，在您的情况下，“名字”或 25），因此，在运行时，我们知道每个单元测试的预期结果。

# cakephp - Cakephp：向日期时间对象添加分钟

> ID：15287930
> 
> 赞同：0
> 
> 时间：2013-03-08T06:18:47.920
> 
> 标签：cakephp, datetime, cakephp-2.2

我是 cakephp 的新手，我希望执行以下操作：我有一个 dateTime 对象，我想给它加减 30 分钟。以下是我在控制器中的代码：

```
$time = $this->request->data['Rideoffer']['DepartureTime'];
                    $date = new DateTime($time['hour'] . ':' . $time['min'] . ' ' . $time['meridian']); 

                        $currentDate = strtotime($date['date']); // this line gives error
                        $futureDate = $currentDate+(60*30);
                        $formatDate = date("Y-m-d H:i", $futureDate); 
```

当我调试 $date 我得到以下结果：

```
 object(DateTime) {
 date => '2013-03-08 05:54:00'
 timezone_type => (int) 3
 timezone => 'UTC'
} 
```

我想`date`从这个对象中提取。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:21:17.963

解决了它：

```
 $currentDate = strtotime($date->format('Y-m-d H:i:s')); 
```

但我仍然不明白为什么我不能使用 $date['date']，我的意思是 $date 就像一个数组。

# php - Zend 框架中找不到路径错误

> ID：15287932
> 
> 赞同：1
> 
> 时间：2013-03-08T06:18:55.930
> 
> 标签：php, zend-framework, url-routing

当我想运行静态内容时，我在 Zend 框架中遇到了这个错误，错误就像

```
///Not Found

The requested URL /public/content/services was not found on this server.
Apache/2.2.20 (Ubuntu) Server at localhost Port 8090/// 
```

当我尝试访问时发生这种情况`localhost:8090/content/services`

请给我一个解决方案，在此先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:12:45.713

我在 httpd.conf 文件中用“AllowOverride FileInfo”替换了“AllowOverride None”，它起作用了！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:32:45.230

确保按照第 39 页“定义自定义路由”中的说明在 application.ini 中创建路由

```
//this needs to be exact
resources.router.routes.static-content.route = /content/:page 
resources.router.routes.static-content.defaults.module = default
resources.router.routes.static-content.defaults.controller = static-content
resources.router.routes.static-content.defaults.action = display 
```

如果没有正确定义路由，静态内容将无法按照本书的建议工作。

如果您打算使用这本书“Zend Framework: A Beginner's Guide”，请尽可能接近代码，直到您理解它为止。ZF1 并不容易理解。

不要随意更改您的 .htaccess 文件，尽可能将其保存在库存附近。用它来设置环境是可以的，仅此而已。如果 .htaccess 有点不正确，Zf1 将无法正常工作。

```
//stock .htaccess
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我注意到您使用的是 Ubuntu... 确保您对文档根目录中的文件拥有正确的权限和所有权。Ubuntu 对文件权限有一些不同的默认设置。

这本书还指导您为您的站点建立一个虚拟主机（*第 13 页“定义虚拟主机设置”*）。请执行此建议，当您学习此框架时，它将使您的生活更轻松。

# git - 通过远程登录 git

> ID：15287934
> 
> 赞同：2
> 
> 时间：2013-03-08T06:19:06.040
> 
> 标签：git, telnet

我知道 git 支持 SSH。但是我 13 年的服务器不支持 SSH。仅支持远程登录。

是否可以通过 telnet 推送到 git 存储库？

如何设置这样的环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:31:28.023

不，这是不可能的。

即使在 13 年前 telnet 还不是一个可接受的协议，任何值得使用的服务器都已经支持 ssh。现在更是如此。

您*可以*设置支持通过 http 执行 git，包括推送。但是您应该真正了解获得可以支持 ssh 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T20:48:47.507

使用 git ext:: 协议处理程序[https://git-scm.com/docs/git-remote-ext](https://git-scm.com/docs/git-remote-ext)或将 GIT_SSH 设置为您的远程 shell 并模拟 SSH 选项（要构建模拟脚本，您可以简单地调整，例如[执行远程通过 Telnet 从 Debian 到 Windows 的命令](https://stackoverflow.com/questions/28319804/execute-remote-commands-from-debian-to-windows-via-telnet)）

请参阅这篇关于 git 如何使用 git-upload-pack 进行通信的帖子：[https ://unix.stackexchange.com/questions/140089/what-c​​ommands-does-git-use-when-communicating-via-ssh](https://unix.stackexchange.com/questions/140089/what-commands-does-git-use-when-communicating-via-ssh)

# spatial-query - Oracle 空间数据运算符 - SDO_nn - sdo_num_res = 1 未获得任何结果

> ID：15287941
> 
> 赞同：0
> 
> 时间：2013-03-08T06:19:45.430
> 
> 标签：spatial-query, oracle-spatial

我正在使用 SDO_NN 运算符来查找建筑物旁边最近的消火栓。

建造：

```
CREATE TABLE  "BUILDINGS" 
(   
"NAME" VARCHAR2(40), 
"SHAPE" "SDO_GEOMETRY") 
```

消火栓：

```
CREATE TABLE  "HYDRANTS" 
   (    "NAME" VARCHAR2(10), 
"POINT" "SDO_POINT_TYPE"
  ); 
```

我已经为 building.shape 正确设置了空间索引，并运行查询以获取离建筑物“汽车旅馆”最近的消火栓

```
select b1.name as name, h.point.x as x, h.point.y as y  from buildings b1, hydrants h where  b1.name ='Motel'  and
                    SDO_nn( b1.shape, MDSYS.SDO_GEOMETRY(2003,NULL, NULL,SDO_ELEM_INFO_ARRAY(1,1003,1),
                            SDO_ORDINATE_ARRAY( h.point.x,h.point.y)), 'sdo_num_res=1')= 'TRUE'; 
```

**这是问题所在：**

当我设置参数*sdo_num_res=1*时，我得到零元组。当我设置 sdo_num_res=2 时，我得到一个元组。

奇怪行为的原因是什么？

注意：只有在 building.name='Motel' 时我得到零行，对于所有其他元组，当 sdo_num_res = 1 时我得到 1 行

编辑：插入查询

```
Insert into buildings (NAME,SHAPE) values ('Motel',MDSYS.SDO_GEOMETRY(2003,NULL,NULL,MDSYS.SDO_ELEM_INFO_ARRAY(1,1003,1),MDSYS.SDO_ORDINATE_ARRAY(564,425,585,436,573,458,552,447)));

Insert into hydrants  (name,POINT) values ('p57',MDSYS.SDO_POINT_TYPE(589,448,0)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:43:14.440

为了在一个点和一个多边形之间进行空间比较，我们`SDO_GEOMETRY`定义了`SDO_SRID=2001`并且中心设置为`SDO_POINT_TYPE->`我们想要比较的 a。

```
MDSYS.SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(-79, 37, NULL), NULL, NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T18:37:08.473

首先，您的查询并不像您所说的那样：它实际上从您的任何消火栓返回最近的名为“汽车旅馆”的**建筑物。**为了做你想做的事（即相反），你需要将参数的顺序颠倒到 SDO_NN：所有空间运算符都使用第二个参数的值搜索第一个参数。

然后插入到您的 HYDRANTS 表中是错误的：

```
Insert into hydrants  (name,POINT) values ('p57',MDSYS.SDO_POINT_TYPE(589,448,0)); 
```

SDO_POINT_TYPE 对象并非旨在以这种方式使用：它仅在 SDO_GEOMETRY 类型内部使用。正确的做法是这样的：

```
insert into hydrants (name,POINT) values ('p57',sdo_geometry(2001, null, SDO_POINT_TYPE(589,448,null), null, null)); 
```

当然，您需要相应地更改表定义。

然后您的建筑物也被错误地创建：多边形**必须**始终关闭，即最后一个点必须与第一个点相同。所以正确的形状应该是这样的：

```
insert into buildings (NAME,SHAPE) values ('Motel', SDO_GEOMETRY(2003,NULL,NULL,SDO_ELEM_INFO_ARRAY(1,1003,1),SDO_ORDINATE_ARRAY(564,425,585,436,573,458,552,447,564,425))); 
```

这是完整的示例：

创建表：

```
create table buildings (
  name varchar2(40) primary key,
  shape sdo_geometry
);

create table hydrants(
  name varchar2(10) primary key, 
  point sdo_geometry
); 
```

填充表格：

```
insert into buildings (NAME,SHAPE) values ('Motel', SDO_GEOMETRY(2003,NULL,NULL,SDO_ELEM_INFO_ARRAY(1,1003,1),SDO_ORDINATE_ARRAY(564,425,585,436,573,458,552,447,564,425)));
insert into hydrants (name,POINT) values ('p57',sdo_geometry(2001, null, SDO_POINT_TYPE(589,448,null), null, null));
commit; 
```

确认几何图形都正确：

```
select name, sdo_geom.validate_geometry_with_context (point, 0.05) from hydrants;
select name, sdo_geom.validate_geometry_with_context (shape, 0.05) from buildings; 
```

设置空间元数据并创建空间索引：

```
insert into user_sdo_geom_metadata (table_name, column_name, diminfo, srid)
values (
  'BUILDINGS',
  'SHAPE',
  sdo_dim_array (
    sdo_dim_element ('X', 0,1000,0.05),
    sdo_dim_element ('Y', 0,1000,0.05)
  ),
  null
);
commit;

create index buildings_sx on buildings (shape)
  indextype is mdsys.spatial_index;

insert into user_sdo_geom_metadata (table_name, column_name, diminfo, srid)
values (
  'HYDRANTS',
  'POINT',
  sdo_dim_array (
    sdo_dim_element ('X', 0,1000,0.05),
    sdo_dim_element ('Y', 0,1000,0.05)
  ),
  null
);
commit;

create index hydrants_sx on hydrants (point)
  indextype is mdsys.spatial_index; 
```

现在尝试正确编写的查询：

```
select h.name, h.point.sdo_point.x as x, h.point.sdo_point.y as y  
from buildings b, hydrants h 
where b.name ='Motel' 
and sdo_nn(h.point, b.shape, 'sdo_num_res=1')= 'TRUE'; 
```

返回：

```
NAME                      X          Y
---------------- ---------- ----------
p57                     589        448

1 row selected. 
```

# file - 如何根据 ssis 中匹配的文件名和文件夹名将文件移动到不同的文件夹

> ID：15287943
> 
> 赞同：1
> 
> 时间：2013-03-08T06:19:48.717
> 
> 标签：file, loops, for-loop, ssis, each

我有四个文件 xxxxxxCd999, xxxxCf999, xxxxC999 , xxxxD999 ...我需要根据文件名将这些文件移动到各自的文件夹中，例如文件 xxxxxCd999 应该移动到文件夹 Cd999 ，文件 xxxxCf999 应该移动到文件夹 Cf999 ,file xxxC999 应该移动到文件夹 C999 等等...我如何在 ssis 中实现这一点？

我已经为每个循环容器使用了一个，为 sourcepath、destinationpath 和文件系统任务分配了一些变量来使用这些变量，但是我现在迷路了，不知道如何继续，请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T07:39:32.270

尝试这个 ：-

将`Foreach Loop`枚举源文件夹，路径将存储在变量中。在`script task`编写代码以使用正则表达式获取文件夹名称。脚本任务值将存储在另一个变量中，该变量将用于`File System Task`

包装设计将是

![在此处输入图像描述](../Images/15084aafd62a383cddc375a8cd832522.png)

*   创建 3 个变量

    ```
     Name         DataType   Expression
     FolderName    string
     DestLoc       string     "D:\\"+ @[User::FolderName]   
     LoopFiles     string 
    ```

在上面的`DestLoc`变量表达式中，根据您的位置进行更改

*   ForEach 循环配置 ![在此处输入图像描述](../Images/d6682bd0d9db0c555c28f3cab3532fd1.png)

![在此处输入图像描述](../Images/c069d433f840fdb7d827d842c9421bf4.png)

根据需要更改源文件夹位置

*   脚本任务 - 添加 2 变量如下 ![在此处输入图像描述](../Images/b2e0e5914af3ad8816205f3ef3e4f4cc.png)

*   您需要从变量中提取文件夹名称`LoopFiles`

例子

`LoopFiles`变量将`D:\ForLoop\SampleFolder1.txt`在运行时

因此，为了从上述变量中​​提取文件夹名称，请使用正则表达式

打开`Edit Script`并编写以下代码

```
List<string> filePatterns = null;

public void Main()
 {
     filePatterns = new List<string>();
     filePatterns.Add("Folder1");
     filePatterns.Add("Folder2");
     string fileName = Path.GetFileNameWithoutExtension(Dts.Variables["User::LoopFiles"].Value.ToString());
     Match match = Regex.Match(fileName, string.Join("|", filePatterns.ToArray()));
     Dts.Variables["User::FolderName"].Value = match.Value;
     Dts.TaskResult = (int)ScriptResults.Success;
  } 
```

在上面的代码中，您正在提取文件夹名称并将其存储在变量中`FolderName`。如果有`multiple folders`，则只需将 添加`folder names`到`filePatterns`集合变量中。

*   文件系统任务配置

![在此处输入图像描述](../Images/3547ac1eca3014e05feb32446a4c0599.png)

# html - 将图像放在表格行中

> ID：15287955
> 
> 赞同：0
> 
> 时间：2013-03-08T06:20:31.773
> 
> 标签：html, css

在 html/css 方面我很弱。

我从数据库中调用了动态数量的图像。3图像一次显示在一行中。这是我的表格的 html/css：

```
<style>
    table { 
        border-collapse: collapse; 
        table-layout: fixed;
        max-width: 100%
    }
    figure {
        display: block;
        margin-before: 1em;
        margin-after: 1em;
        margin-start: 40px;
        margin-end: 40px;
    }
    figure img {
        padding: 5px;
        background: #fff;
    }
    figcaption {
        padding: 5px;
        font-family: 'Cherry Swash', cursive;
        font-size: 1em;
        font-weight: 700;
        border: none;
        background: transparent;
        word-wrap:normal;
        text-align: center;
    }
    a {
        text-decoration:none;    
    }
</style>

<table>
    <tr><td align='left'>
        <a href="works.php" title="Click To See More Work">
            <figure>
                <img src="img/11.jpg"  alt="Picture 2" title="Picture 2">
                <figcaption>
                    project name 
                    <br> Sitting stick figures hunched over their laptops! 
                    See <a href="#">more</a>.
                </figcaption>
            </figure>
        </a>
    </td></tr>
</table> 
```

我的要求是，当第四个图像被调用时，它应该自动落在下一行。请建议如何去做。有没有其他方法可以更好地做我正在做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:38:11.420

最简单的方法是使用服务器端语言。如果你使用PHP，你可以这样做

```
 <table>
    <tr>
    <?php for(int i=0; i<number_of_images; i++){ ?>
       <td align='left'>
        <a href="works.php" title="Click To See More Work">
        <figure>
            <img src="img/11.jpg"  alt="Picture 2" title="Picture 2">
            <figcaption>
                project name<br>Sitting stick figures hunched over their laptops! See <a href="#">more</a>.
            </figcaption>
        </figure>
        </a>
    </td>
    <?php 
         if(i%3 == 0){ echo "</tr><tr>";}
    }
    ?>
    </tr>
    </table> 
```

# jquery - SVG 动画不能在 Asp.net MVC 应用程序/Asp.net Web 应用程序（IE -10,9 浏览器）中工作，但在 JS fiddle 中工作

> ID：15287956
> 
> 赞同：1
> 
> 时间：2013-03-08T06:20:34.087
> 
> 标签：jquery, svg, jquery-svg

我用 SVG 线/路径动画创建了简单的 MVC3 应用程序。请参考下面的代码片段。

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <clipPath id="curtainClip">
            <rect id="clipRect" x="0" y="0" width="100" height="100"/>
        </clipPath>
    </defs>

    <animate xlink:href="#clipRect"
        attributeName="width" 
        dur="15s"
        from="0" 
        to="100" />

    <path clip-path="url(#curtainClip)" stroke="red" d="M 0 0 L 100 100"/>
</svg> 
```

它在 JS-fiddle /JS- bin 中工作。这意味着动画路径将是结果。

请参考以下链接。

[http://jsfiddle.net/XbzRX/2/](http://jsfiddle.net/XbzRX/2/)

示例链接：

[样本](http://www.syncfusion.com/downloads/Support/DirectTrac/85008/MvcApplication21320891637.zip)

动画无法在 IE 浏览器中运行。(10,9)

谢谢，

湿婆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:23:25.293

IE9/10 不支持声明性 SVG 动画。但是，它确实支持某些样式属性的 CSS 动画和脚本动画。

[请参阅此处 - 基本 SVG 动画 (MSDN)](http://msdn.microsoft.com/en-us/library/ie/gg193979%28v=vs.85%29.aspx)

# xml - 如何使用 xsl 转换在 xml 中删除

> ID：15287964
> 
> 赞同：1
> 
> 时间：2013-03-08T06:20:49.500
> 
> 标签：xml, xslt

转到此链接[Convert XML file to attribute XML](https://stackoverflow.com/questions/15195405/convert-xml-file-to-attribute-xml/15196154#15196154)
and copy/past my question xml file (with name "xml_simple.xml")
and copy/past answer xslt then (with name "xslt4convert.xsl")
copy/past this php file
php code :-

```
<?php
    $sourcedoc = new DOMDocument();
    $sourcedoc->load('xml_simple.xml');
    $stylesheet = new DOMDocument();
    $stylesheet->load('xslt4convert.xsl');

    // create a new XSLT processor and load the stylesheet
    $xsltprocessor = new XSLTProcessor();
    $xsltprocessor->importStylesheet($stylesheet);

    // save the new xml file
    file_put_contents('xml_converted.xml', $xsltprocessor->transformToXML($sourcedoc));

echo ' xml convert';
?> 
```

并运行这个php文件它生成新的xml文件在每个属性值中
打开这个文件到记事本 它在浏览器中显示一个空格如果我在记事本中打开xml文件，如何删除它是在记事本 中显示 谢谢...
`&#10;`
`&#10;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:30:27.477

这个样式表应该这样做：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:output method="xml" indent="yes"/>

  <!--
  Identity transform: copy all nodes that don't have overriding templates as is
  -->
  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="@value">
    <xsl:attribute name="value">
      <!--
      Use the translate() function to replace all &#10; entities with an empty
      string
      -->
      <xsl:value-of select="translate(., '&#10;', '')"/>
    </xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

### 输出

```
<?xml version="1.0"?>
<products>
  <product_id value="1">
    <tab_id value="351">
      <tab_name value="test1"/>
      <region_timezone value="1"/>
      <dist_region value="5069,5069,5069"/>
      <dist_value value="55,342,86"/>
      <reg_str_dt value="2013-01-14 20:35:00"/>
    </tab_id>
  </product_id>
  <product_id value="2">
    <tab_id value="352">
      <tab_name value="test2"/>
      <region_timezone value="1"/>
      <dist_region value="4457,7140,5069"/>
      <dist_value value="55,213,86"/>
      <reg_end_dt value="2013-02-14 20:39:00"/>
    </tab_id>
  </product_id>
</products> 
```

# java - 比较两个数组列表并在第二个中取出不常见的

> ID：15287971
> 
> 赞同：0
> 
> 时间：2013-03-08T06:21:30.047
> 
> 标签：java, arraylist

我有两个清单

```
array A = [1,3,5]//jst array A
list B = [3,7]//ArrayList B 
```

我想要列表 B 中的 7 个

```
for(int A=0;A<elements.length;A++){
    for(int r=0;r<B.size();r++){
        if(A[k] != B.get(r)){
              pln(A[k]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:24:02.633

使外部循环遍历列表 (B) 并检查 B 的每个元素，如果它是数组的成员。这只是反过来。

```
// for each element of B ...
for (i = 0; i < B.size(); i++ ) {
  // ... check each element of A
  for (j = 0; j < A.length; j++) {
     // if it is equal.
     if (B.get(i) == A[j]) {
         // if yes, continue with the next B
         break; 
     }
  }
  // so none of the elements of A matched the element of B.
  System.out.println(B.get(i));
} 
```

*注意：变量名违反了 java 约定。我只保留你的名字以帮助你理解答案。请使用以小写字符开头的拼写名称。Commodore 64 Basic 时代已经结束*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:25:09.720

这应该很快做到：

```
B.retainAll(Arrays.asList(elements)); 
```

假设`B`是一个`List`, 和`elements`- 一个数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T06:28:16.810

这是一种方法。不是最干净的，但它有效：

```
final Integer[] arr1 = new Integer[] { 3, 4, 5 };
final Integer[] arr2 = new Integer[] { 3, 7 };
List<Integer> arr2List = new ArrayList<Integer>(Arrays.asList(arr2));
arr2List.retainAll(Arrays.asList(arr1));
System.out.println(arr2List); // output [3] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T07:23:27.277

```
import java.util.ArrayList;

public class test1 {

    public static void main(String[] args) 
    {
        ArrayList<Integer> a1 = new ArrayList(); 
        a1.add(3);
        a1.add(4);
        a1.add(5);
        ArrayList<Integer> a2 = new ArrayList(); 
        a2.add(3);
        a2.add(7);
        a2.retainAll(a1);
        for(Integer i:a2)
        {
            System.out.println(i);
        }
    }

} 
```

# php - 使用 curl php 检索验证码并登录

> ID：15287974
> 
> 赞同：0
> 
> 时间：2013-03-08T06:21:40.817
> 
> 标签：php, session, curl, web, captcha

我正在做一个项目。所以我必须从下面提到的网站获取验证码。用户将提交验证码和他的登录凭据，然后我必须提取数据（为了用户的利益）。但是在我提交验证码后，只是出现登录页面，没有任何反应。

我已经在多个站点上进行了尝试，并且只出现了登录页面。我知道登录后如何获取数据，但是验证码真的很头疼

```
<?php

 $cookie="cookie.txt";
function open($url)
{

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL,$url);  
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2) Gecko/20070219 Firefox/2.0.0.2');
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_COOKIE, 1);
    curl_setopt($ch, CURLOPT_COOKIEJAR,$cookie);
    curl_setopt($ch, CURLOPT_COOKIEFILE,$cookie);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); 
    curl_setopt ($ch, CURLOPT_REFERER, $url);
    $result = curl_exec($ch);  
    curl_close($ch);

    return $result;
}

function between($string, $start, $end)
{
    $out    = explode($start, $string);

    if(isset($out[1]))
    {
        $string = explode($end, $out[1]);
        echo $string[0];
        return $string[0];
    }

    return '';
}

function get_captcha()
{
    $url    = 'https://academics.vit.ac.in/student/stud_login.asp';

    $open   = open($url);

    $code   = between($open, '<img src='https://academics.vit.ac.in/student/captcha.asp', '">');

   // echo 'https://academics.vit.ac.in/student/captcha.asp' . $code;

    return 'https://academics.vit.ac.in/student/captcha.asp' . $code;
   //return ;

}

function rahul()
{
    $capth=htmlspecialchars($_POST['code']);

    echo $capth;

    $username="xyz"; 
$password="abc"; 
$url="https://academics.vit.ac.in/student/stud_login.asp"; 
$cookie="cookie.txt";
$veri=$capth;

$com="Login";

$postdata = "regno=".$username."&passwd=".$password."&vrfcd=".$veri."&submit=".$com;

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie);  // <-- add this line
curl_setopt ($ch, CURLOPT_REFERER, $url); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 

echo $result;  

$data = curl_exec($ch);

}

?>

 <html>
 <body>
<form action="" method="post">
<img src="<?php echo get_captcha(); ?>" border="0" /><br />
<input type="text" name="code" value="<?= isset($_POST['code']) ? htmlspecialchars($_POST['code']) : '' ?>" /><br />
<input type="submit" name="submit" value="submit"/>
</form>

<?php

if(isset($_POST['submit'])) {
 rahul();
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T14:22:26.303

在这种情况下，直接从 CURL 打开 capcthca 图像并返回二进制代码。

```
<?php
$cookie='cookie.txt';
if(!file_exists($cookie)){
        $fh = fopen($cookie, "w");
        fwrite($fh, "");
        fclose($fh);
}
$ch = curl_init();   
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);   
    curl_setopt($ch, CURLOPT_URL, "https://academics.vit.ac.in/student/captcha.asp");  
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, TRUE);   
    curl_setopt($ch, CURLOPT_COOKIE,1);         
    curl_setopt($ch, CURLOPT_COOKIEJAR,$cookie);
    curl_setopt($ch, CURLOPT_COOKIEFILE,$cookie);      
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    $result = curl_exec($ch);   
curl_close($ch);  
$ImageCaptcha=base64_encode($result);
?> 
```

查看图片 base64 编码

```
<?php echo '<img src="data:image/jpeg;base64,'.$ImageCaptcha.'">'; ?> 
```

我已经测试过这段代码，它对我有用

# asp.net - 如何显示适合屏幕的 DevExpress PivotGrid

> ID：15287976
> 
> 赞同：0
> 
> 时间：2013-03-08T06:22:02.003
> 
> 标签：asp.net, .net, devexpress

我无法显示枢轴网格大小，适合屏幕。我已经尝试过`BestFit();` ，`BestFitColumnArea();` 但这不起作用。我可以通过设置属性来显示 GridView`OptionsView.ColumnAutoWidth=True;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:36:50.743

*   将 ASPxPivotGrid.Width 设置为 100%；
*   使用[ASPxPivotGrid 中的建议 - 如何将控件切换到全屏模式](http://www.devexpress.com/issue=Q281778)线程。

# python - 如何使用python从文本中删除特定符号？

> ID：15287982
> 
> 赞同：0
> 
> 时间：2013-03-08T06:22:50.453
> 
> 标签：python, list

我有一个这样的字符串：

> string = '这是我的 2013-02-11 的文本，它包含这样的字符！（例外）'

这些是我想从我的字符串中删除的符号。

```
!, @, #, %, ^, &, *, (, ), _, +, =, `, / 
```

我尝试过的是：

```
listofsymbols = ['!', '@', '#', '%', '^', '&', '*', '(', ')', '_', '+', '=', '`', '/']
exceptionals = set(chr(e) for e in listofsymbols)
string.translate(None,exceptionals) 
```

错误是：

> 需要一个整数

请帮我这样做！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T06:28:09.687

试试这个

```
>>> my_str = 'This is my text of 2013-02-11, & it contained characters like this! (Exceptional)'
>>> my_str.translate(None, '!@#%^&*()_+=`/')
This is my text of 2013-02-11,  it contained characters like this Exceptional 
```

此外，请不要命名已经是内置名称或标准库一部分的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T06:27:28.300

这个怎么样？我还重命名`string`为`s`以避免它与内置模块混淆`string`。

```
>>> s = 'This is my text of 2013-02-11, & it contained characters like this! (Exceptional)'
>>> listofsymbols = ['!', '@', '#', '%', '^', '&', '*', '(', ')', '_', '+', '=', '`', '/']
>>> print ''.join([i for i in s if i not in listofsymbols])
This is my text of 2013-02-11,  it contained characters like this Exceptional 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T08:45:08.903

另一个建议，可轻松扩展为更复杂的过滤条件或其他输入数据类型：

```
from itertools import ifilter

def isValid(c): return c not in "!@#%^&*()_+=`/"

print "".join(ifilter(isValid, my_string)) 
```

# javascript - Nodejs serialport data.toString() 编码失败

> ID：15287984
> 
> 赞同：1
> 
> 时间：2013-03-08T06:23:20.660
> 
> 标签：javascript, node.js, serial-port

我有一个条形码扫描仪连接到运行 nodejs 串行端口的树莓派。串口实例正在监听`/dev/input/event0`

当我运行这个

```
var serialport = require("serialport");
var SP = serialport.SerialPort;
var port = "/dev/input/event0"
var sp = new SP(port);

sp.on('data', function(data) {
  console.log( data);
}); 
```

我从扫描中获取了一堆 Buffer 对象。（我认为它将代码中的每个数字都计为一个数据事件。

我的问题是，我什至无法将其转换为正确的 utf8 数字。我怎样才能得到解码的数据？

`console.log(data)`Update-1：这是扫描带有数字的条形码后的原始结果`19024336`

```
<Buffer 32 a9 3b 51 54 76 0c 00 04 00 04 00 1e 00 07 00 32 a9 3b 51 6d 76 0c 00 01 00 02 00 01 00 00 00 32 a9 3b 51 76 76 0c 00 00 00 00 00 00 00 00 00>
<Buffer 32 a9 3b 51 c6 8d 0c 00 04 00 04 00 1e 00 07 00 32 a9 3b 51 dc 8d 0c 00 01 00 02 00 00 00 00 00 32 a9 3b 51 e2 8d 0c 00 04 00 04 00 26 00 07 00 32 a9 3b ...>
<Buffer 32 a9 3b 51 61 cc 0c 00 04 00 04 00 1f 00 07 00 32 a9 3b 51 78 cc 0c 00 01 00 03 00 00 00 00 00 32 a9 3b 51 7e cc 0c 00 04 00 04 00 21 00 07 00 32 a9 3b ...>
<Buffer 32 a9 3b 51 5f fb 0c 00 00 00 00 00 00 00 00 00 32 a9 3b 51 e4 0a 0d 00 04 00 04 00 20 00 07 00 32 a9 3b 51 fc 0a 0d 00 01 00 04 00 00 00 00 00 32 a9 3b ...>
<Buffer 32 a9 3b 51 f6 d5 0d 00 04 00 04 00 28 00 07 00 32 a9 3b 51 0a d6 0d 00 01 00 1c 00 00 00 00 00 32 a9 3b 51 12 d6 0d 00 00 00 00 00 00 00 00 00> 
```

每次扫描时，它都会返回不同的结果（从我的人眼可以在这里读取的内容）

您可能还想知道`Buffer.isBuffer(data);`返回 true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:03:37.483

你应该看看这样的模块：[https ://github.com/Bornholm/node-keyboard](https://github.com/Bornholm/node-keyboard)

不过要详细说明，答案是 的输出`/dev/input/event0`不是 ASCII 字符。输出是此处描述的格式的一系列结构[https://www.kernel.org/doc/Documentation/input/input.txt](https://www.kernel.org/doc/Documentation/input/input.txt) as `struct input_event`。

例如，这意味着给定输出的第二块

```
32 a9 3b 51 54 76 0c 00 04 00 04 00 1e 00 07 00 
```

像这样分解：

```
// 32-bit int timestamp (1362864434) - Sat, 09 Mar 2013 21:27:14 GMT
32 a9 3b 51 

// microsecond-granularity time
54 76 0c 00

// 16-bit short (1) indicating it is a key event 
01 00

// 16-bit short (2) is the keycode for the key '1'.
02 00

// 32-bit int (1) indicating it was a keypress.
01 00 00 00 
```

# c - 将 C char 数组拆分为单词

> ID：15287986
> 
> 赞同：0
> 
> 时间：2013-03-08T06:23:41.633
> 
> 标签：c, arrays, string, pointers, char

我正在尝试将给定的 char 数组拆分为单独的字符串。我这样做是通过将每个单词的地址放入一个数组中，然后从地址中获取字符串进行打印。

所以我更新了我的代码，但现在程序在打印 numArgs 之后但在“test2”之前冻结。我不明白为什么。

```
----------------old code-----------------------   
char* parseArgs(char* comPtr){
    char *args[100] = {0};
    char *token;
    int i = 0;
    token = strtok(comPtr, " ");
    while(token != NULL){
        args[i] = malloc(100);
        args[i] = &token;
        token = strtok(NULL, " ");
    }
    return *args;
}

char* args = parseArgs(comPtr);
int i = 0;
while(i < numArgs){
    printf("arg%d: %s\n",i,&args[i]);
    i++;
}
-----------------------end old code--------------------

------------------new code------------------------
int countArgs(char* comPtr){
    char *token;
    int i = 0;
    token = strtok(comPtr, " ");
    while(token != NULL){
        i++;
        token = strtok(NULL, " ");
    }
    return i;
}

char** parseArgs(char* comPtr){
    printf("test1");
    char** args = calloc(100, sizeof(char*));
    char* token;
    int i = 0;
    while(token = strtok(comPtr, " ")){
        args[i] = token;
    }
    printf("test2");
    return args;
}

printf("ComPtr: %s\n",comPtr);
char* path = "/bin/";
//int pid = fork(); //pid always 0 so using pid = 1 to test
//printf("PID:%d",pid);
int pid = 1;
printf("PID:%d",pid);
if(pid != 0){
    int numArgs = countArgs(comPtr);
    printf("test1");
    printf("NumArgs: %d\n",numArgs);
    printf("test2");
    char** args = parseArgs(comPtr);
    int i = 0;
    printf("test3");
    while(i < numArgs){
        printf("arg%d: %s\n",i,args[i]);
        printf("test4");
        i++;
    }
}
else{
    //waitpid();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:36:47.130

你已经忘记了你的记忆在哪里，你的指针指向等等。如果你想返回指向标记的指针列表，你需要这样的东西：

```
char** parseArgs(char* comPtr){
    char** p_args = calloc(100, sizeof(char*);
    int i = 0;
    char* token;
    while (token = strtok(comPtr, " "))
        p_args[i] = token;
    return p_args;
}

char** p_args = parseArgs(comPtr);
int i = 0;
while(i < numArgs)
{
    printf("arg%d: %s\n",i,p_args[i]);
    i++;
}
free(p_args); 
```

我没有测试过它，但它应该为你指明正确的方向。仔细考虑它与您的程序有何不同，并`printf()`在代码中使用调试器和/或语句来打印地址并查看它是如何工作的（或在必要时对其进行调试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:30:46.907

将指针数组 'char *args[100]' 声明为全局变量。在您的程序中，您正在为本地指针分配内存，它的生命在函数内。所以在函数结束时，您的指针变量范围结束。这里也有内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:16:43.143

冻结是由于

```
int i = 0;
while(token = strtok(comPtr, " ")){
    args[i] = token;
} 
```

在哪里你反复 - 在一个无限循环中 - 找到第一个标记`comPtr`,`token`成为`&comPtr[0]`每次迭代（除非字符串以空格开头），并且分配给`args[i]`.

在第一次调用之后，所有对它的调用`strtok`都应该在同一个字符串中找到更多的标记——如果有的话——应该有一个`NULL`第一个参数。

此外，您可能应该在循环中递增`i`，因为大概您不想`args[0]`用每个新令牌覆盖。

# java - java应用程序在IDE中工作，相同的jar文件没有响应

> ID：15287987
> 
> 赞同：0
> 
> 时间：2013-03-08T06:23:42.400
> 
> 标签：java, classpath, runtime-error, noclassdeffounderror

我使用的是 Ubuntu 11.10，jdk 1.7。我创建了一个桌面应用程序，它通过检查数据库来发送邮件。在 netbeans 7.2.1 中，应用程序在 IDE 中运行良好，但出现引导警告。但是双击时 jar 构建没有响应。当通过终端中的命令行执行 jar 文件时，它显示 No Class Found Exception javax.mail。 Authenticator.Is 设置类路径是我的问题吗？用于发送邮件的代码。

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.Iterator;
import java.util.Properties;
import javax.mail.Authenticator;
import javax.mail.Message;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class Desk_mail
{

    private String from = "mailid";
    private String subject = "Test Mail";
    private String smtpServ = "smtp.gmail.com";

    DBConnection dbcon = new DBConnection();
    Desk_mailPojo dmp ;

         public static void main(String[] args) throws Exception
       {
           try{
               int status;
               Desk_mail m1=new Desk_mail();
               status=m1.changestatus();
               if(status==1)
               {
                   System.out.println("Email sent succesfull");
               }

            }
            catch(Exception e){
                 try{
                    Desk_mail m1=new Desk_mail();
                    String p=e.getMessage()+e.getStackTrace();
                     m1.sendmail(p, "mailid");
                }
                    catch(Exception en){
                        throw new Exception("changestatus" + en.getMessage());
                    }

              throw new Exception("main" + e.getMessage());
         }

        }
        public int changestatus() throws Exception
        {
            String status,email,body;
            String policyname,policyno;
            int remdays;
            int detailsid;
            Date remdate ;
            Date enddate;
            Date expdate;
            readxml rl= new readxml();
            dbcon.results = new ArrayList();
            try{
                Desk_mail m1=new Desk_mail();
                DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
                Date date = new Date();
                System.out.println(dateFormat.format(date));
                dbcon.query="-----MYSQL QUERY----- ";
                dbcon.pst = dbcon.getConnection().prepareStatement(dbcon.query);
                dbcon.rs = dbcon.pst.executeQuery();
               while(dbcon.rs.next()) {
                   dbcon.results.add(new Desk_mailPojo(dbcon.rs.getInt(1), dbcon.rs.getString(2),dbcon.rs.getString(3),dbcon.rs.getDate(4), dbcon.rs.getString(5), dbcon.rs.getString(6), dbcon.rs.getString(7)));
                }
                 Iterator iter = dbcon.results.iterator();
                while (iter.hasNext())
                {
                    Desk_mailPojo dmp= (Desk_mailPojo)iter.next();
                    enddate=dmp.getDate();
                    email=dmp.getEmail();
                    policyname=dmp.getPolicyname();
                    policyno=dmp.getPolicyno();
                    detailsid = dmp.getDetailsid();
                    remdays=Integer.parseInt(dmp.getRemindme());
                    Calendar c = Calendar.getInstance();
                    c.setTime(enddate);
                    c.add(Calendar.DAY_OF_MONTH, -remdays);
                    String output = dateFormat.format(c.getTime());
                    remdate= dateFormat.parse(output);
                    c.setTime(enddate);
                    c.add(Calendar.DATE, 5);
                    expdate = dateFormat.parse(dateFormat.format(c.getTime()));
                    if(date.before(remdate)){
                         dbcon.query="-----MYSQL QUERY-----" ;
                         dbcon.pst = dbcon.getConnection().prepareStatement(dbcon.query);
                         dbcon.pst.setInt(1, detailsid);
                         dbcon.result=dbcon.pst.executeUpdate();
                    }
                    else if (((date.after(remdate))||(date.equals(remdate)))&&(date.before(enddate))){
                         dbcon.query="-----MYSQL QUERY-----" ;
                         dbcon.pst = dbcon.getConnection().prepareStatement(dbcon.query);
                         dbcon.pst.setInt(1, detailsid);
                         dbcon.result=dbcon.pst.executeUpdate();
                         if (dbcon.result>0){
                             body="The insurance policy "+policyname+"with policyno:"+policyno+" will be expired on "+ enddate;
                             m1.sendmail(body, email);
                         }
                    }
                    else if((date.after(remdate))&&(date.after(enddate))){
                         dbcon.query="-----MYSQL QUERY----- " ;
                         dbcon.pst = dbcon.getConnection().prepareStatement(dbcon.query);
                         dbcon.pst.setInt(1, detailsid);
                         dbcon.result=dbcon.pst.executeUpdate();
                          if ((dbcon.result>0)&&(date.before(expdate))){
                             body="The insurance policy "+policyname+"with policyno:"+policyno+" has been expired on "+ enddate;
                              m1.sendmail(body, email);
                          }
                     }

                }

            }catch(Exception e){

                 throw new Exception("changestatus" + e.getMessage());

            }
            return dbcon.result;
        }

        public int sendmail(String message,String email) throws Exception
        {
            try{

            Properties props =System.getProperties();

            props.put("mail.transport.protocol","smtp");
            props.put("mail.smtp.starttls.enable","true");
            props.put("mail.smtp.host",smtpServ);
            props.put("mail.smtp.auth","true");

            Authenticator auth = new Desk_mail.SMTPAuthenticator();
            Session session=Session.getInstance(props,auth);

            Message msg = new MimeMessage(session);
            msg.setFrom(new InternetAddress(from));
            msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(email, false));
            msg.setSubject(subject);
            msg.setText(message);

            msg.setHeader("MyMail", "Mr. XYZ" );
            msg.setSentDate(new Date());

            MimeBodyPart messagePart = new MimeBodyPart();
            messagePart.setText(message);

            Multipart multipart = new MimeMultipart();
            multipart.addBodyPart(messagePart);

            msg.setContent(multipart);

            Transport.send(msg);
            System.out.println("Message sent to"+email+" OK." );
            return 0;
            }
            catch(Exception e)
            {   

                return -1;
            }

        }

        private class SMTPAuthenticator extends javax.mail.Authenticator
        {
            @Override
            public PasswordAuthentication getPasswordAuthentication()
            {
                String username =  "mailid";           // specify your email id here (sender's email id)
                String password = "*****";                                      // specify your password here
                return new PasswordAuthentication(username, password);
            }
        }

    } 
```

我也在阅读 xml 。该类的代码如下。

```
import java.io.File;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class readxml {

    public static void main(String argv[]) throws Exception {

      try {

         String path=System.getProperty("user.dir");
                path=path+"/dbconfig.xml";
        File fXmlFile = new File(path);
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(fXmlFile);
        doc.getDocumentElement().normalize();

        System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
        NodeList nList = doc.getElementsByTagName("db");
//                String username
        System.out.println("-----------------------");

                String username;
        for (int temp = 0; temp < nList.getLength(); temp++) {

           Node nNode = nList.item(temp);
           if (nNode.getNodeType() == Node.ELEMENT_NODE) {

              Element eElement = (Element) nNode;
//                     url = getTagValue("username", eElement);
//                      driver = getTagValue("username", eElement);
//                      username = getTagValue("username", eElement);
//                       password = getTagValue("username", eElement);
//                      

                      System.out.println("URL" + getTagValue("url", eElement));
              System.out.println("driver" + getTagValue("driver", eElement));
                  System.out.println("username" + getTagValue("username", eElement));
              System.out.println("password " + getTagValue("password", eElement));

           }
        }
      } catch (Exception e) {
               try{

         throw new Exception("" + en.getMessage());
      }
  }

  private static String getTagValue(String sTag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

        Node nValue = (Node) nlList.item(0);

    return nValue.getNodeValue();
  }

} 
```

这是我尝试使用以下命令执行 jar 文件时命令行的响应：java -jar Myjarfile.jar

```
Exception in thread "main" java.lang.NoClassDefFoundError: javax/mail/Authenticator
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2451)
    at java.lang.Class.getMethod0(Class.java:2694)
    at java.lang.Class.getMethod(Class.java:1622)
    at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:494)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:486)
Caused by: java.lang.ClassNotFoundException: javax.mail.Authenticator
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 6 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:31:59.313

> 设置类路径是我的问题吗？

基本上是的。额外的 API 需要放在相对于主 Jar 的路径上（“相同目录”适用于大多数应用程序。）& 在主 Jar 文件的清单中提到。

有关更多详细信息，请参阅[将类添加到 JAR 文件的类路径](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)。

# iphone - 如何在调整大小时移动 UIImageView？

> ID：15287993
> 
> 赞同：0
> 
> 时间：2013-03-08T06:23:56.743
> 
> 标签：iphone, objective-c, cocoa-touch, uikit, core-graphics

我正在尝试上下移动`UIImageView`它，同时让它变大。现在，当我分别做这些事情时，它就像我想的那样工作，但是当我将它们结合起来时，它看起来真的很糟糕，就像我想要的那样。

这是我的代码，因此您可以将其复制到 Xcode 中，看看会发生什么。使用您在界面生成器中获得的任何图像添加一个`UIImageView`，并将此代码添加到 viewController.h：

```
IBOutlet UIImageView *bg1;

int steps;

float a; 
```

这就是 viewController.m

```
#define kA 3

- (void)viewDidLoad {
    [super viewDidLoad];

    steps = 0;

    a = kA;

    [NSTimer scheduledTimerWithTimeInterval:.04 target:self selector:@selector(walk)
                                            userInfo:nil repeats:YES];
}

-(void)resetA { // This function makes it possible for the UIImageView to move up and down
    if (a > 0) a=-kA;
    else a=kA;

    steps++;
    NSLog(@"%i", steps);
}

-(void)walk { // This function makes the UIImageView bigger and move up and down
    if (a > 0) [bg1 setFrame:CGRectMake(0, 0, bg1.bounds.size.width+a,  
                                              bg1.bounds.size.height+a)];
    else [bg1 setFrame:CGRectMake(0, 0, bg1.bounds.size.width-a, 
                                        bg1.bounds.size.height-a)];

    [bg1 setCenter:CGPointMake(160, bg1.center.y+a)];
    a *= 0.9;

    if (a < 0.15 & a > 0 || a > -0.15 & a < 0) [self resetA];
} 
```