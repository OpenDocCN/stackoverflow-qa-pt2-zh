# StackOverflow 问答 15480000-15480999

# objective-c - NSView 子类 drawRect 在无限循环中被调用

> ID：15480005
> 
> 赞同：2
> 
> 时间：2013-03-18T15:02:34.800
> 
> 标签：objective-c, cocoa, nsview, drawrect, nsimageview

我创建了 NSView 的子类 a 来创建包含 NSTextView 的自定义 UI。因此我使用 drawRect 方法来绘制我的 UI。我还创建了一个 NSImageView 的子类来获取 mousedown 事件。每当我点击我的子类 NSImageView 时，我的 View 的 drawRect 方法就会在无限循环中被调用，我不知道为什么。构建自定义 UI 对我来说是新事物，所以也许我做错了什么？

TWIComposeFrameView.m：

```
#import "TWIComposeWindowFrameView.h"
#import "TWIImageView.h"

@implementation TWIComposeWindowFrameView

#pragma mark draw Rect of the View

//
// drawRect:
//
// Draws the frame of the window.
//
- (void)drawRect:(NSRect)rect
{
    //// Color Declarations
    NSColor* mainClrWhite = [NSColor colorWithCalibratedRed: 0.954 green: 0.954 blue:     0.954 alpha: 1];
    NSColor* transpGrey = [NSColor colorWithCalibratedRed: 0.224 green: 0.224 blue: 0.224 alpha: 0.745];
    NSColor* composeClrGrey = [NSColor colorWithCalibratedRed: 0.858 green: 0.842 blue: 0.842 alpha: 1];

    //// Abstracted Attributes
    NSRect composeRectRect = NSMakeRect(20, 70, 475, 210);
    NSRect attachmentRectRect = NSMakeRect(499, 195, 85, 85);

    //// transpRect Drawing
    NSBezierPath* transpRectPath = [NSBezierPath bezierPathWithRoundedRect: NSMakeRect(1, 0, 599, 299) xRadius: 10 yRadius: 10];
    [transpGrey setFill];
    [transpRectPath fill];

    //// mainRect Drawing
    NSBezierPath* mainRectPath = [NSBezierPath bezierPathWithRoundedRect: NSMakeRect(10, 10, 580, 280) xRadius: 10 yRadius: 10];
    [mainClrWhite setFill];
    [mainRectPath fill];

    //// composeRect Drawing
    NSBezierPath* composeRectPath = [NSBezierPath bezierPathWithRoundedRect: composeRectRect xRadius: 10 yRadius: 10];
    [composeClrGrey setFill];
    [composeRectPath fill];

    //// attachmentRect Drawing
    NSBezierPath* attachmentRectPath = [NSBezierPath bezierPathWithRoundedRect: attachmentRectRect xRadius: 10 yRadius: 10];
    [mainClrWhite setFill];
    [attachmentRectPath fill];
    [composeClrGrey setStroke];
    [attachmentRectPath setLineWidth: 1];
    [attachmentRectPath stroke];
}

- (id)initWithFrame:(NSRect)rect
{
    if (![super initWithFrame:rect])
        return nil;

    NSColor* composeClrGrey = [NSColor colorWithCalibratedRed: 0.858 green: 0.842 blue: 0.842 alpha: 1];
    NSRect composeRectRect = NSMakeRect(20, 70, 475, 210);
    NSRect attachmentRectRect = NSMakeRect(499, 195, 85, 85);
    //// Add Controls
    [self addComposeTextView:composeClrGrey composeRectRect:composeRectRect];
    [self addAttachmentImageView:attachmentRectRect];
    return self;
}

#pragma mark -
#pragma mark Add Controls to View

//
// Create and Add the Compose TextView
//
- (void)addComposeTextView:(NSColor *)composeClrGrey composeRectRect:(NSRect)composeRectRect
{
    NSTextView *composeTextView;
    if (composeTextView == nil)
    {
        composeTextView = [[NSTextView alloc] initWithFrame:composeRectRect];
        [composeTextView setBackgroundColor:composeClrGrey];
        [composeTextView setFont:[NSFont fontWithName:@"Helvetica" size:18]];
        [composeTextView setRichText:NO];
        [self addSubview:composeTextView];
    }
}

//
// Create and Add the Attachemant ImageView
//
- (void)addAttachmentImageView:(NSRect)attachmentRectRect
{
    NSImage *defaultImage = [NSImage imageNamed:@"168-upload-photo-2"];
    NSRect ivRect = NSMakeRect(attachmentRectRect.origin.x + 5, attachmentRectRect.origin.y + 5, attachmentRectRect.size.width - 10, attachmentRectRect.size.height - 10);
    TWIImageView *imageView = [[TWIImageView alloc] initWithFrame:ivRect];
    imageView.delegate = self;
    [imageView setEditable:YES];
    [self addSubview:imageView];
    [imageView setImage:defaultImage];
}

#pragma mark -
#pragma mark TWIImageView Delegate

//
// mouseDown Event on TWIImageView
//
- (void)myImageView:(TWIImageView *)view mouseDown:(NSEvent *)event
{
    NSLog(@"imageView clicked");
}
#pragma mark - 

@end 
```

TWIImageView.h

```
@class TWIImageView;
@protocol TWIImageViewDelegate <NSObject>

- (void)myImageView:(TWIImageView *)view mouseDown:(NSEvent *)event;

@end

@interface TWIImageView : NSImageView
{

}

@property (assign) id<TWIImageViewDelegate> delegate;

@end 
```

TWIImageView.m:

```
#import "TWIImageView.h"

@implementation TWIImageView

@synthesize delegate = _delegate;

- (void)mouseDown:(NSEvent *)event {
    if([self.delegate respondsToSelector:@selector(myImageView:mouseDown:)]) {
        [self.delegate myImageView:self mouseDown:event];
    }
}

@end 
```

在覆盖的 initWithFrame 方法中创建控件有错吗？还是我的 TWIImageView 缺少重要的东西

堆栈跟踪：

```
Thread 1, Queue : com.apple.main-thread
#0  0x0000000100001cd0 in -[TWIComposeWindowFrameView drawRect:] at     /Users/thomaswickl/Documents/Development/Git     Projects/QuickQuick/QuickQuick/TWIComposeWindowFrameView.m:24
#1  0x00007fff92efa170 in -[NSView _drawRect:clip:] ()
#2  0x00007fff92ef6fe3 in -[NSView  _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView: ] ()
#3  0x00007fff92ef7a74 in -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] () 
#4  0x00007fff93045fdb in -[NSNextStepFrame _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] ()
#5  0x00007fff92ef1d9d in -[NSView _displayRectIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:] ()
#6  0x00007fff92ebbcc3 in -[NSView displayIfNeeded] ()
#7  0x00007fff93045e94 in -[NSNextStepFrame displayIfNeeded] ()
#8  0x00007fff92ebb1fc in _handleWindowNeedsDisplayOrLayoutOrUpdateConstraints ()
#9  0x00007fff934868f1 in __83-[NSWindow _postWindowNeedsDisplayOrLayoutOrUpdateConstraintsUnlessPostingDisabled]_block_invoke_01208 ()
#10 0x00007fff92b39417 in __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ ()
#11 0x00007fff92b39381 in __CFRunLoopDoObservers ()
#12 0x00007fff92b147b8 in __CFRunLoopRun ()
#13 0x00007fff92b140e2 in CFRunLoopRunSpecific ()
#14 0x00007fff90ce8eb4 in RunCurrentEventLoopInMode ()
#15 0x00007fff90ce8b94 in ReceiveNextEventCommon ()
#16 0x00007fff90ce8ae3 in BlockUntilNextEventMatchingListInMode ()
#17 0x00007fff92eb8563 in _DPSNextEvent ()
#18 0x00007fff92eb7e22 in -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] ()
#19 0x00007fff92eaf1d3 in -[NSApplication run] ()
#20 0x00007fff92e53c06 in NSApplicationMain ()
#21 0x0000000100001242 in main at /Users/thomaswickl/Documents/Development/Git Projects/QuickQuick/QuickQuick/main.m:13
#22 0x00007fff955db7e1 in start () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:12:25.050

我认为这个答案不会解决您的问题。但是，init 方法可能返回与 self 不同的对象。所以你最好使用这个：

```
if (!(self = [super initWithFrame:rect]))
    return nil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:57:47.710

添加

> [超级drawRect：矩形]；

在 drawRect 方法中

# javascript - 如何下拉菜单将在零秒内下降

> ID：15480007
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:02:37.273
> 
> 标签：javascript, jquery, html

我的网站中有一个 JS 的下拉菜单，[请点击这里查看网站](http://www.fedri.com)，但它的下降速度很慢。下面是我的 JS 代码。请告诉我如何让它在零秒内快速下降......

```
$(document).ready(function($){
    $('#mega-menu-7').dcMegaMenu({
        rowItems: '3',
        speed: 'fast',
        effect: 'slide'
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:07:11.093

更改`speed: 'fast'`为`speed: 0`。 `dcMegaMenu`使用动画时间的文字`speed`值，因此如果您将其设置为 0，它实际上不会动画并且会立即执行过渡。

# javascript - Ajax 请求后更改浏览器的 URL

> ID：15480013
> 
> 赞同：0
> 
> 时间：2013-03-18T15:02:52.847
> 
> 标签：javascript, ajax

Ajax 可以通过只刷新页面的一部分而不是整个页面来改善网页用户体验。因此，我认为如果请求作为 Ajax 请求发送，则无法更改浏览器的 URL（哈希 # 除外），因此将 URL 从浏览器地址栏复制到另一个浏览器窗口可能无法成功重新打开我正在访问的页面。然而，当我看到 GitHub 网页时，我很快就发现我错了。

在 Github 网页中浏览存储库文件夹时，不难发现页面更新是由 Ajax 完成的（使用 Chrome 调试）。但地址栏中的 URL 也会刷新。那么，Github 网页背后的技术是使用 Ajax 部分更新页面并刷新地址栏中的 URL？

# windows-8 - 无法启用虚拟化

> ID：15480020
> 
> 赞同：0
> 
> 时间：2013-03-18T15:03:02.550
> 
> 标签：windows-8, android-emulator, virtualization, intel, haxm

我试图让我的 Android 模拟器运行得更快，但我无法启用虚拟化。当我打开bios时，它说它已启用，但是当我运行英特尔处理器识别实用程序时，它显示“支持高级英特尔处理器技术：英特尔（R）虚拟化技术：否”。但是当我在英特尔页面上查看关于我的处理器的页面时，它说我的处理器支持虚拟化

关于我的机器：

*   戴尔工作室 1749
*   4 GB 内存
*   Intel Core i5-450M CPU（[规格](http://ark.intel.com/products/49022/Intel-Core-i5-450M-Processor-3M-cache-2_40-GHz)）
*   视窗 8 64 位

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:12:52.097

我找到了解决方案！在 Windows 8 中，我需要禁用 Hyper-V .. 我不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T18:45:48.007

Hyper-V 使用 VT 资源，如果它们已被另一个进程使用，则它们将无法供 HAXM 使用。

# javascript - 按键事件被触发两次

> ID：15480022
> 
> 赞同：0
> 
> 时间：2013-03-18T15:03:09.790
> 
> 标签：javascript, jquery, html

对于我的文本区域，我正在使用这个插件[https://github.com/jaz303/jquery-grab-bag/blob/master/javascripts/jquery.autogrow-textarea.js](https://github.com/jaz303/jquery-grab-bag/blob/master/javascripts/jquery.autogrow-textarea.js)

而且我有以下代码。

```
 <script type="text/javascript">

     $(function() {
      $('.pages .newcomment').autogrow();
     });

     $('.newcomment').keypress(function(event){
     var keycode = (event.keyCode ? event.keyCode : event.which);
     if(keycode == '13'){

  </script> 
```

我有以下html

```
<textarea class="newcomment field span12" style="width: 350px; height: 20px; resize:none;  font-size: 60%"  placeholder="Enter comment here..." ></textarea> 
```

我不明白为什么有两个触发器，因为我可以看到代码执行在我的按键方法中出现了两次......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:05:50.063

试试keyup..

```
$('.newcomment').keyup(function(event){
 var keycode = (event.keyCode ? event.keyCode : event.which);
 if(keycode == '13'){
    ........... 
```

# python - sqlalchemy：column_prefix 导致访问模型属性的问题

> ID：15480023
> 
> 赞同：0
> 
> 时间：2013-03-18T15:03:11.840
> 
> 标签：python, sqlalchemy

我去搜索w/o结果以从通过sqlalchemy创建的对象模型中获取整数值或布尔值，

我的意思是我可以添加它并且它可以完美运行，但是当我尝试打印它时，我无法获得整数值或布尔值，它是对象名称：

```
from sqlalchemy import create_engine, MetaData, Table, Column,Integer,String,Boolean,Sequence
from sqlalchemy.orm import mapper, sessionmaker
from sqlalchemy.ext.declarative import declarative_base
import json
class Bookmarks(object):
    pass
#----------------------------------------------------------------------
engine = create_engine('postgresql://u:p@localghost/asd', echo=True)
Base = declarative_base()

class Tramo(Base):
    __tablename__ = 'tramos'
    __mapper_args__ = {'column_prefix':'tramos'}

    id = Column(Integer, primary_key=True)
    nombre = Column(String)
    tramo_data = Column(String)
    estado = Column(Boolean,default=True)

    def __init__(self,nombre,tramo_data):
        self.nombre=nombre
        self.tramo_data=tramo_data

    def __repr__(self):
        return "[id:%s][nombre:%s][tramo:%s]" % (getattr(self, 'id'),     self.nombre,self.tramo_data)

Session = sessionmaker(bind=engine)
session = Session()

tabla = Tramo.__table__
metadata = Base.metadata
metadata.create_all(engine)

b=Tramo('tramo1','adadas')

session.add(b)
session.commit()
print b
print b.id 
```

它的版画

```
[id:tramos.id][nombre:tramo1][tramo:adadas]
tramos.id 
```

我无法打印 id 值，看起来对象列在那里，但它不返回属性的值

我什至用

```
session.refresh(b) 
```

添加之后，但结果是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:20:23.453

根据文档[Naming All Columns with a Prefix](http://docs.sqlalchemy.org/en/latest/orm/mapper_config.html#column-prefix)：

> **...相对于（表**）列名的**映射**属性名称的前缀...

 **由于您在类中定义了映射属性，因此我认为它不会满足您的要求。

**解决方案 1：**从`'column_prefix':'tramos'`您的`__mapper_args__`

**解决方案 2：** `print b.tramosid`将打印其 ID。您需要`__repr__`相应地更改：

```
def __repr__(self):
    return "[id:%s][nombre:%s][tramo:%s]" % (getattr(self, 'tramosid'), self.nombre, self.tramo_data) 
```**

# android - Android 上 Scala 中的 TableLayout.LayoutParams.WRAP_CONTENT 以编译器错误结束

> ID：15480024
> 
> 赞同：0
> 
> 时间：2013-03-18T15:03:18.020
> 
> 标签：android, scala

我正在将以下 Java 代码翻译成 Scala。

```
some_android_view.setLayoutParams(
    new TableLayout.LayoutParams(TableLayout.LayoutParams.WRAP_CONTENT,
                                 TableLayout.LayoutParams.WRAP_CONTENT)); 
```

但它给了我以下编译错误：

> 值 WRAP_CONTENT 不是对象 android.widget.TableLayout.LayoutParams 的成员

**编辑**

更换

```
TableLayout.LayoutParams.WRAP_CONTENT 
```

为了

```
android.view.ViewGroup.LayoutParams.WRAP_CONTENT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:14:53.497

使用`android.view.ViewGroup.LayoutParams.WRAP_CONTENT`代替`TableLayout.LayoutParams.WRAP_CONTENT`

# wpf - 0x88980406 SyncFlush() ...有解决方法吗？

> ID：15480028
> 
> 赞同：27
> 
> 时间：2013-03-18T15:03:27.893
> 
> 标签：wpf, crash, wpf-4.0

我在我的应用程序中遇到了这个异常。我在网上找到了讨论它的链接，但没有表明如何追踪它和/或解决它。

请不要回复来自互联网的链接。请回复追踪来源的策略。如果您找到了解决方法，请回复。

```
Source: PresentationCore
Message: Exception from HRESULT: 0x88980406
Stack Trace:
   at System.Windows.Media.Composition.DUCE.Channel.SyncFlush()
   at System.Windows.Interop.HwndTarget.UpdateWindowSettings(Boolean enableRenderTarget, Nullable`1 channelSet)
   at System.Windows.Interop.HwndTarget.UpdateWindowPos(IntPtr lParam)
   at System.Windows.Interop.HwndTarget.HandleMessage(WindowMessage msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Interop.HwndSource.HwndTargetFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-19T19:21:45.687

这很旧，但无论如何我都会回答，因为我遇到了刚刚解决的同样问题。[https://stackoverflow.com/a/18003004/1415307](https://stackoverflow.com/a/18003004/1415307)

基本上，我对这个错误的问题归结为一个过时的视频卡驱动程序。更新到最新驱动后，问题已解决。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-25T20:46:58.250

就我而言，事实证明有问题的应用程序已经在其指定硬件的内存限制上加紧。每当我添加使用大量内存的代码时，都会出现这种情况。

`MemoryFailPoint`当我实现将处理图像缓冲区放在另一个线程上的功能时，我最终使用了一种机制。

[https://docs.microsoft.com/en-us/dotnet/api/system.runtime.memoryfailpoint](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.memoryfailpoint)

第一次实现成功了，但经过多次尝试，QA 导致了 OOM 炸弹。所以我实现了一个`MemoryFailPoint()`with`GC.Collect()`循环（我知道有点骇人听闻……但有时……完成任务）。

我学到的主要内容是：

1.  这是 WPF 中一个非常糟糕的错误。
2.  如果你真的消耗了过多的内存，你只需要担心它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-27T18:38:32.377

在微软的大力帮助下，我们刚刚解决了一个困扰我们一年多的 SyncFlush 问题。事实证明，我们是在本机代码中创建多媒体计时器，但我们并不是每次都释放它们。更具体地说，我们调用了 timeBeginPeriod 和 timeEndPeriod，但是我们调用 begin 的次数多于 end，从而造成了资源泄漏。WPF 渲染线程需要使用这些计时器，但我们用尽了它们的有限供应（可能是 65k）。结果是渲染线程停止渲染并挂起或导致崩溃。注意计时器！

# php - 返回 http/https 协议

> ID：15480030
> 
> 赞同：1
> 
> 时间：2013-03-18T15:03:32.527
> 
> 标签：php

我有以下从某处获得的代码，但它似乎不起作用：

```
function http() {
 $pageURL = 'http';
 if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
 $pageURL .= "://";
 return $http;
} 
```

有人可以帮忙吗？

我正在尝试做的是在我输入 $http 时返回网站协议

前任：

```
<a href="<?php echo $http . $websiteurl .'/index.php' ?>">Website URL including Protocol</a> 
```

我的 $websiteurl 已关闭，我似乎无法让它回显 http 与 https。我对功能了解不多，所以我不确定如何解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:06:07.740

这`http`是一个函数，所以你不要像使用变量一样调用它`$`

尝试：

```
function http() {
 $pageURL = 'http';
 if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
 $pageURL .= "://";
 return $pageURL; // <-changed
}

<a href="<?php echo http() . $websiteurl . '/index.php'; ?>">Website URL including Protocol</a> 
```

澄清：

```
$http = 'variable';

function http() {
  return 'function';
}

var_dump($http);
var_dump(http()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:06:08.453

```
<a href="<?php echo http() . $websiteurl .'/index.php' ?>">Website URL including Protocol</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:05:49.580

您正在尝试获取`http()`via的值`$http`。试试这个：

```
<a href="<?php echo http() . $websiteurl .'/index.php' ?>">Website URL including Protocol</a> 
```

`$http`in 只定义在一个`http()`功能范围内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T15:08:34.553

`E_NOTICE`该函数将按原样触发错误，试试这个：

```
function http() {
     return (getenv('HTTPS') == "on" ? 'https://' : 'http://');
} 
```

然后正如 mkjasinski 所说，

```
<a href="<?php echo http() . $websiteurl .'/index.php'; ?>">Website URL including Protocol</a> 
```

# python - 使用 rpy2 更改 ggplot2 中的图例

> ID：15480031
> 
> 赞同：1
> 
> 时间：2013-03-18T15:03:33.073
> 
> 标签：python, ggplot2, rpy2

我正在尝试使用 rpy2 自定义 ggplot2 中的图例。我注意到 ggplot2 到 rpy2 没有自定义图例所需的[http://www.cookbook-r.com/Graphs/Legends_(ggplot2)/](http://www.cookbook-r.com/Graphs/Legends_(ggplot2)/)`scale_shape_discrete`中显示的其他方法。

```
from rpy2.robjects.lib import ggplot2
# not present
ggplot2.scale_shape_discrete 
```

通过rpy2重命名/自定义ggplot2中离散图例的正确方法是什么？这些方法可以访问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:32:11.310

它不见了。你可以

1) 在 rpy2 的 bitbucket 页面上报告问题。

2）定义为：

```
from rpy2.robjects.lib import ggplot2
class ScaleShapeDiscrete(ggplot2.Scale):
    _constructor = ggplot2.ggplot2_env['scale_shape_discrete']
scale_shape_discrete = ScaleShapeDiscrete.new 
```

# ios5 - iPad iOS5 上的 VideoJS：关于宽度和高度

> ID：15480033
> 
> 赞同：0
> 
> 时间：2013-03-18T15:03:39.363
> 
> 标签：ios5, video.js

我使用 videoJS 在 HTML5 网页上播放视频。一切在 PC 上运行良好（即使使用 Safari），但在 iPad（iOS 5）上，即使视频播放良好，我也遇到了视频大小的问题——它非常小，我不知道不知道如何让它更大。

`width`我尝试`height`在`video.js`. 另外，我的视频应该是 408px 宽和 520px 高，在 iPad 上它比高宽，而且两边各有一个黑色。

我该如何解决这个问题？

EDiT @Emil 感谢您抽出宝贵时间。有一些代码：

我如何在我的 HTML 页面上包含视频：

```
<video id='videoDavi' class='video-js vjs-default-skin' autoplay='autoplay' width='408' height='520' style='z-index: 1;' data-setup='{}'>
    <source src="#DOSSIER_SQUELETTE/video/bub_Intro.<?php echo $extension; ?>" type="<?php echo $type; ?>" /> 
</video> 
```

"$extension" 和 "$type" 旨在为正确的浏览器选择正确的视频。我曾经使用 videoJS 解决方案 ( `<video> <source [..]/> <source [...] /> <source [...] /> </video>`)，但必须进行更改才能使我不记得什么工作。

我还包括在我的 css 中：

```
video#videoDAVI_html5_api{ width: 408px; height: 520px; } 
```

因为我通过网络检查器模拟器看到 iPad 上的代码是

```
<video id="videoDAVI_html5_api" autoplay src="video.mp4"></video> 
```

（+我忘了我也在使用easySlider 1.7）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:27:39.277

我终于让它在 iPad 上运行。

我在下面有这个代码`<video id="videoDavi"></video>`

```
<script>
     var homePlayer=_V_("videoDavi");
</script> 
```

并拥有video-js.css（其他人不需要它，我仍然不明白为什么iPad需要它）现在它在Android / Chrome上根本不起作用，但在Android / Firefox上工作......但我我想我会找到原因的，还没有搜索。

# html - css submenu ul li 问题

> ID：15480036
> 
> 赞同：1
> 
> 时间：2013-03-18T15:03:45.860
> 
> 标签：html, css, superfish

我有一个使用 SuperFish 的菜单，但最后 2 个子菜单没有正确对齐。

这是我的 jsfiddle：http: [//jsfiddle.net/uP4bY/4/](http://jsfiddle.net/uP4bY/4/)

我的 CSS 看起来像这样：

```
 /*  Header/Navigation   */
 div#Nav {
    background:transparent url(../Images/nav_Bg.png) no-repeat scroll top left;
    height:70px;
    width:980px;
    margin:0 auto;
    display:block;
    position:relative;
    z-index:2;
}
/*Level 1 or Parent / Destination*/
 div#Nav ul {
    padding-top:9px;
    display:inline;
    list-style-type:none;
    margin:0;
}
div#Nav ul li {
    background:transparent url(../Images/nav_li_Separator.png) no-repeat scroll center left;
    padding-left:8px;
    margin-left:8px;
    display:inline;
    position:relative;
}
div#Nav ul li.First {
    background:none;
    margin:0;
    padding:0;
}
/*Level 2 Treks*/
 div#Nav ul li ul {
    left:10px;
    position:absolute;
    top:26px;
    padding:0 !important;
    z-index:100;
    height:500px;
    float:left;
    list-style:outside;
    width:auto;
}
/*Level 3 Everest Region*/
 div#Nav ul li ul li ul {
    float: left;
    height: 500px;
    left: 50px;
    list-style: disc outside none;
    padding: 0 !important;
    position: absolute;
    top: 30px;
    width: auto;
    z-index: 100;
}
/*Level 5 Everest Base Camp*/
 div#Nav ul ul ul ul ul {
    float: left;
    height: 500px;
    left: 50px;
    list-style: disc outside none;
    padding: 0 !important;
    position: absolute;
    top: 60px;
    width: auto;
    z-index: 100;
}
div#Nav ul li ul li {
    border-top:1px solid #2f3b48;
    border-right:1px solid #384857;
    border-bottom:1px solid #384857;
    height:24px;
    display:block;
    padding:5px 15px 0;
    width:150px;
    /*width:150px;*/
    border-left:1px solid #384857;
    margin:0 !important;
    background:transparent url(http://www.kenticotemplates.net/themeforest/DreamTravel/Images/Nav_ul_li_Bg.png) repeat scroll top left !important;
}
div#Nav a, div#Nav a:link, div#Nav a:visited {
    color:#7f8b98;
}
div#Nav a:hover, div#Nav a.selected {
    color:#96b2cb !important;
    text-decoration:none;
}
div#Nav ul#Links, div#Nav ul.nav {
    float:left;
    text-transform:uppercase;
}
div#Nav ul.Lang {
    float:right;
}
div#Nav ul li {
    float:left;
} 
```

我很确定我需要设置最后一个样式，`ul li`但是当我这样做时，它会移动前一个 ul li。

**更新：它应该看起来像这样减去空白！** [http://i48.tinypic.com/1zfpxqf.png](http://i48.tinypic.com/1zfpxqf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:12:08.210

问题的解决方案是她的小提琴：http: [//jsfiddle.net/7mvuw/](http://jsfiddle.net/7mvuw/)

演示：http: [//jsfiddle.net/7mvuw/embedded/result/](http://jsfiddle.net/7mvuw/embedded/result/)

注意：我已经改变了外观，但 html 结构是相同的，外观和感觉用于演示目的，您可以根据您的要求进行调整。

![在此处输入图像描述](../Images/9d0201240a4d778a3f7c2f7ba65f749c.png)

```
#access {
    background: #000;
    display: block;
    float: left;
    margin: 0 auto;
    width: 940px;
}
#access .menu-header,
div.menu {
    font-size: 13px;
    margin-left: 12px;
    width: 928px;
}
#access .menu-header ul,
div.menu ul {
    list-style: none;
    margin: 0;
}
#access .menu-header li,
div.menu li {
    float: left;
    position: relative;
}
#access a {
    color: #aaa;
    display: block;
    line-height: 38px;
    padding: 0 10px;
    text-decoration: none;
}
#access ul ul {
    box-shadow: 0px 3px 3px rgba(0,0,0,0.2);
    -moz-box-shadow: 0px 3px 3px rgba(0,0,0,0.2);
    -webkit-box-shadow: 0px 3px 3px rgba(0,0,0,0.2);
    display: none;
    position: absolute;
    top: 38px;
    left: 0;
    float: left;
    width: 180px;
    z-index: 99999;
    padding-left:0;
}
#access ul ul li {
    min-width: 180px;
}
#access ul ul ul {
    left: 100%;
    top: 0;
}
#access ul ul a {
    background: #333;
    line-height: 1em;
    padding: 10px;
    width: 160px;
    height: auto;
}
#access li:hover > a,
#access ul ul :hover > a {
    background: #333;
    color: #fff;
}
#access ul li:hover > ul {
    display: block;
}
#access ul li.current_page_item > a,
#access ul li.current-menu-ancestor > a,
#access ul li.current-menu-item > a,
#access ul li.current-menu-parent > a {
    color: #fff;
} 
```

# c# - dbf 文件插入耗时较长

> ID：15480038
> 
> 赞同：1
> 
> 时间：2013-03-18T15:03:48.903
> 
> 标签：c#, oledb, dbf

我使用 OLEDB 将数据插入到 DB4 .dbf 文件中。插入 13 行几乎需要 1 分钟，这太长了，这个问题只发生在插入一个包含 varchar 20、2 个日期和一个小数的表中。有没有其他更快的方法可以做到这一点？

```
 foreach (DataRow row in fstathotel.Rows)
            {
                cmd.CommandText = @"insert into fstathote values (" + Convert.ToInt32(row["mpe"]) + ",'" + Convert.ToDateTime(row["date"]) + "','" + row["type"].ToString() + "',?,'" + Convert.ToDateTime(row["edate"]) + "')";
                cmd.Parameters.AddWithValue("parmSlot1", Decimal.Parse(row["value"].ToString()));
                cmd.ExecuteNonQuery();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:00:09.690

你`cmd.Parameters.AddWithValue`在循环中做。

这意味着在每次迭代时添加一个参数。我不了解 DB4，但我敢打赌 OleDB 驱动程序正试图尽其所能处理额外的额外未使用参数。它成功了，但操作需要更多时间。

请像这样插入`cmd.Parameters.Clear()`，并判断事情是否运行得更好。

```
foreach (DataRow row in fstathotel.Rows)
{
    cmd.CommandText = @"insert into fstathote values (" + Convert.ToInt32(row["mpe"]) + ",'" + Convert.ToDateTime(row["date"]) + "','" + row["type"].ToString() + "',?,'" + Convert.ToDateTime(row["edate"]) + "')";
    cmd.Parameters.Clear(); // Clear the parameter list 
    cmd.Parameters.AddWithValue("parmSlot1", Decimal.Parse(row["value"].ToString()));
    cmd.ExecuteNonQuery();
} 
```

此外，我还会尝试将循环包含在数据库事务中。请记住，表上过多的索引不利于插入性能。

# iphone - iOS在iPhone上逐帧修改视频（添加CC）

> ID：15480044
> 
> 赞同：3
> 
> 时间：2013-03-18T15:04:02.957
> 
> 标签：iphone, ios, video, frame

我有兴趣在 iPhone 上的现有视频中添加文本（以隐藏式字幕样式）。stackoverflow 上的一些解决方案建议添加一个透明的 UIView 来覆盖视频。一切都很好，但是，我不能将其保存为“新的和修改过的视频”。

我看到的唯一解决方案是获取文本，从视频中获取单个帧，将文本添加到帧中，然后将带有文本的修改帧推回视频中，替换视频中的原始帧。

有谁知道如何从视频中取出一帧，（我想我可以弄清楚添加文本），然后如何将帧推回视频中？如果您有一些想法或知道教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T16:35:54.570

您不需要逐帧执行此操作。AVFoundation 从 iOS 4.0 开始支持字幕。

例如，您可以创建一个[AVMutableComposition](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVMutableComposition_Class/Reference/Reference.html)，然后在视频顶部添加一个字幕轨道。AVMediaTypeSubtitle 是字幕的类型（或隐藏字幕的 AVMediaTypeClosedCaption）。然后，您可以将合成提供给播放器或[AVAssetWriter](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAssetWriter_Class/Reference/Reference.html)。为您省去一切麻烦​​。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-19T09:50:59.063

根据你说的，这里有一个例子你可以学习。

![在此处输入图像描述](../Images/2d248b3acd9292cb52e095ddeea68b65.png)

如上图所示，您可以为视频添加边框、叠加层、字幕等任何您想要的内容。

[http://www.raywenderlich.com/30200/avfoundation-tutorial-adding-overlays-and-animations-to-videos](http://www.raywenderlich.com/30200/avfoundation-tutorial-adding-overlays-and-animations-to-videos)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-21T06:14:54.110

您可以通过 AvFoundation 框架编辑视频...

这是一个例子..

var assetsTrack = AVAsset.assetWithURL(filePath1) as！AVURLAsset var mutableComposition = AVMutableComposition()

```
 // Step - 1  pass url to  avasset

    // video

    var compositionVideoTrack = AVMutableCompositionTrack()
    compositionVideoTrack = mutableComposition.addMutableTrackWithMediaType(AVMediaTypeVideo, preferredTrackID: CMPersistentTrackID())

    var assetVideoTrack = assetTrack.tracksWithMediaType(AVMediaTypeVideo)[0] as! AVAssetTrack
    compositionVideoTrack.insertTimeRange(CMTimeRangeMake(kCMTimeZero , assetTrack.duration), ofTrack: assetVideoTrack, atTime: kCMTimeZero, error: nil)

    // audio

    var compositionAudioTrack = AVMutableCompositionTrack()
    compositionAudioTrack = mutableComposition.addMutableTrackWithMediaType(AVMediaTypeAudio, preferredTrackID: CMPersistentTrackID())

    var assetAudioTrack = assetTrack.tracksWithMediaType(AVMediaTypeAudio)[0] as! AVAssetTrack
    compositionAudioTrack.insertTimeRange(CMTimeRangeMake(kCMTimeZero , assetTrack.duration), ofTrack: assetAudioTrack, atTime: kCMTimeZero, error: nil)

    var videoAssetOrientation_: UIImageOrientation = .Up
    var isVideoAssetPortrait_: Bool = false

    var videoTransform: CGAffineTransform = assetTrack.preferredTransform

    var videosize = CGSize()
    videosize = assetVideoTrack.naturalSize

    var parentLayer = CALayer()
    var videoLayer = CALayer()
    var textLayer = CALayer()

    parentLayer.frame = CGRectMake(0, 0, videosize.width, videosize.height)
    videoLayer.frame = CGRectMake(0, 0, videosize.width, videosize.height)
    textLayer.frame = CGRectMake(0, 0, videosize.width, videosize.height)

    parentLayer.addSublayer(videoLayer)

    if drawingView.image != nil
    {
        var drawingLayer = CALayer()
        drawingLayer.frame = CGRectMake(0, 0, videosize.width, videosize.height)
        drawingLayer.contents = drawingView.image.CGImage

        var image = UIImage()
        parentLayer.addSublayer(drawingLayer)

    }

    var textV = UIView()
    textV.backgroundColor = UIColor.clearColor()
    textV.layer.backgroundColor = UIColor.clearColor().CGColor
    textV.frame = CGRectMake(self.captureView.frame.size.width, 0, self.captureView.frame.size.width, self.captureView.frame.size.height)

    var textL = UILabel()
    textL = textShowOnPreview
    textV.addSubview(textL)

    if textL != ""
    {
        UIGraphicsBeginImageContext(textV.bounds.size)
        textV.layer.renderInContext(UIGraphicsGetCurrentContext())
        var image1: UIImage = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        if ( TextAnimation == "")
        {
            textLayer.contents = image1.CGImage
            parentLayer.addSublayer(textLayer)
        }

        else if  ( TextAnimation == "flip")
        {

            var overlayer1 = CALayer()
            overlayer1.backgroundColor = UIColor.clearColor().CGColor
            let screenSize: CGRect = UIScreen.mainScreen().bounds
            overlayer1.contents = image1.CGImage
            overlayer1.masksToBounds = true
            overlayer1.frame = CGRectMake(videosize.width/2-300, videosize.height/2 - 400, videosize.width,videosize.width);
            var   animation : CABasicAnimation = CABasicAnimation(keyPath: "transform.rotation")
            animation.duration=5.0;
            animation.repeatCount=5;
            animation.autoreverses = true;
            // rotate from 0 to 360
            animation.fromValue = 0
            animation.toValue = (2.0 * M_PI);
            animation.beginTime = AVCoreAnimationBeginTimeAtZero;
            overlayer1.addAnimation(animation, forKey:"rotation")
            [parentLayer .addSublayer(overlayer1)]

        }
        else if ( TextAnimation == "fade")
        {

                       //opacity
            var overlayer1 = CALayer()
            overlayer1.backgroundColor = UIColor.clearColor().CGColor
            overlayer1.contents = image1.CGImage
            overlayer1.masksToBounds = true

            overlayer1.frame = CGRectMake(videosize.width/2 - 300,  videosize.height/2 - 100 , videosize.width+20, videosize.width);
            var   animation : CABasicAnimation = CABasicAnimation(keyPath: "transform.scale")
            animation.duration = 2.0;
            animation.repeatCount = 3;
            animation.autoreverses = true;
            // rotate from 0 to 360

            animation.fromValue = 0.5;
            animation.toValue = 1.0;
            animation.beginTime = AVCoreAnimationBeginTimeAtZero;

            overlayer1.addAnimation(animation, forKey:"scale")
            [parentLayer .addSublayer(overlayer1)]

        }
        else if ( TextAnimation == "bounce")
        {
            var overlayer1 = CALayer()

            var bounce : CABasicAnimation = CABasicAnimation (keyPath:"position.y");
            overlayer1.backgroundColor = UIColor.clearColor().CGColor
            overlayer1.contents = image1.CGImage
            overlayer1.masksToBounds = true
            overlayer1.frame = CGRectMake(videosize.width/2 - 300,  videosize.height/2 - 100 , videosize.width, videosize.width);
            bounce.duration = 1.0;
            bounce.fromValue =  overlayer1.frame.origin.y

            bounce.toValue =  overlayer1.frame.origin.y - 100
            bounce.repeatCount = 10
            bounce.autoreverses = true;
            overlayer1.addAnimation(bounce, forKey: "y")

            var animation = CABasicAnimation(keyPath: "transform.scale")
            animation.toValue = NSNumber(float: 0.9)
            animation.duration = 1.0
            animation.repeatCount = 10;
            animation.autoreverses = true
            overlayer1.addAnimation(animation, forKey: nil)
             [parentLayer .addSublayer(overlayer1)]

        }

    }

    var mutableVideoComposition = AVMutableVideoComposition()
    mutableVideoComposition.frameDuration = CMTimeMake(1, 30)
    mutableVideoComposition.renderSize = videosize

    mutableVideoComposition.animationTool = AVVideoCompositionCoreAnimationTool(postProcessingAsVideoLayer: videoLayer, inLayer: parentLayer)

    var passThroughInstruction = AVMutableVideoCompositionInstruction()
    passThroughInstruction.timeRange = CMTimeRangeMake(kCMTimeZero, mutableComposition.duration)

    var passThroughLayerInstruction = AVMutableVideoCompositionLayerInstruction()

    // video

    var assestVideoMutableCompositionVideo = mutableComposition.tracksWithMediaType(AVMediaTypeVideo)[0] as! AVAssetTrack
    passThroughLayerInstruction = AVMutableVideoCompositionLayerInstruction(assetTrack: assestVideoMutableCompositionVideo)

    if isVideoAssetPortrait_ == false
    {

        var FirstAssetScaleFactor: CGAffineTransform = CGAffineTransformMakeScale(1, 1)

        passThroughLayerInstruction.setTransform(CGAffineTransformConcat(assetVideoTrack.preferredTransform, FirstAssetScaleFactor), atTime: kCMTimeZero)

    }

    passThroughInstruction.layerInstructions = [passThroughLayerInstruction]
    mutableVideoComposition.instructions = [passThroughInstruction]

    let documentsURL = NSFileManager.defaultManager().URLsForDirectory(.DocumentDirectory, inDomains: .UserDomainMask)[0] as! NSURL
    let filePath = documentsURL.URLByAppendingPathComponent("NewWatermarkedVideo.mov") as NSURL

    var fileManager:NSFileManager = NSFileManager.defaultManager()
    fileManager.removeItemAtURL(filePath, error: nil)

   var exporter: AVAssetExportSession = AVAssetExportSession(asset: mutableComposition, presetName: AVAssetExportPresetMediumQuality)
    exporter.videoComposition = mutableVideoComposition
    exporter.outputFileType = AVFileTypeQuickTimeMovie
    exporter.outputURL = filePath
    exporter.shouldOptimizeForNetworkUse = true
    self.captureView.addSubview(textShowOnPreview)

    exporter.exportAsynchronouslyWithCompletionHandler({() -> Void in

        println(exporter.status)

        if  exporter.status == AVAssetExportSessionStatus.Completed
        {

            dispatch_async(dispatch_get_main_queue(), { () -> Void in

                MBProgressHUD.hideAllHUDsForView(self.view, animated: true)

                self.topicSelectedImage.highlighted = false
                self.timelineSelectedImage.highlighted = false
                self.selectCat = ""
                self.postView.hidden = false

            })

            println("Completed")
            self.mediaData =  NSData(contentsOfURL:filePath, options: nil, error: nil)!

            var err: NSError? = nil
            var asset = AVURLAsset(URL: filePath, options: nil)
            var imgGenerator = AVAssetImageGenerator(asset: asset)
            var cgImage = imgGenerator.copyCGImageAtTime(CMTimeMake(0, 30), actualTime: nil, error: &err)
            var uiImage = UIImage(CGImage: cgImage)!
            self.videoThumbData = UIImageJPEGRepresentation(uiImage, 0.1)

            var assetTrack = AVAsset.assetWithURL(filePath) as! AVURLAsset
            self.videoTime = Int(CMTimeGetSeconds(assetTrack.duration)) + 3

            println(self.videoTime)

        }
        else if exporter.status == AVAssetExportSessionStatus.Cancelled
        {

        }
        else if exporter.status == AVAssetExportSessionStatus.Failed
        {

        }
    }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-22T17:51:42.813

对于那些想要逐帧编辑电影的人，请使用[AVReaderWriter](https://developer.apple.com/library/mac/samplecode/ReaderWriter/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011124)。尽管它是一个 OS X Apple 示例代码，但 AVFoundation 在两个平台上都可用，几乎没有什么变化。

# sql-server-2008 - 是否有系统角色允许查看数据库中所有对象的定义？

> ID：15480045
> 
> 赞同：0
> 
> 时间：2013-03-18T15:04:03.940
> 
> 标签：sql-server-2008

我需要通过授予对生产数据库的足够访问权限来请求全局组，以便执行对使用该数据库的应用程序的支持。我正在尝试确定我需要请求哪些特定权利。

为了对所有表执行查询，我想请求`db_datareader`访问。我想避免维护以确保全局组具有`SELECT`并`VIEW DEF`访问所有对象。我知道`db_datareader rights`，如果获得批准，将授予用户`SELECT`对所有表的完全权限。是否有对应的角色授予查看所有表、存储过程、视图等的定义的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:22:42.227

定义“对生产数据库的充分访问”

作为一名 DBA，我不会给予任何 DDL 管理员或任何允许用户即时更改模式的访问权限，这是导致灾难的原因，并且会使您的 DBA 更加努力地工作。DBA 必须而且应该能够在适当的测试后帮助解决性能问题并更改生产模式。您真的不想在不测试 1st 的情况下更改生产模式。

话虽如此，如果用户希望有限的访问权限来解决性能问题（这实际上可以让您的生活更轻松），他们可能需要以下任何一项：

*   查看数据库状态
*   查看服务器状态

这两个允许访问 DMV，这对于查明性能问题和查询的运行方式很有用。

SELECT、UPDATE、INSERT 等都是正常的。如果您的数据库对象（表、视图、存储过程）不需要细粒度权限，我会使用任何默认数据库角色并将用户或用户放入其中。

运行存储过程的权限将是 EXECUTE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:06:48.363

```
USE [your database]
EXEC sp_addrolemember 'db_datareader', '[your user name]' 
```

# browser - Salesforce 添加一个按钮/链接到电话号码

> ID：15480048
> 
> 赞同：0
> 
> 时间：2013-03-18T15:04:12.530
> 
> 标签：browser, salesforce, apex-code, phone-number

在 Salesforce 中，是否可以针对联系人/潜在客户记录的详细信息页面上的电话号码添加按钮/链接？我需要它来实现类似 Skype 的 Click-To-Call 浏览器扩展。

它需要浏览器扩展程序吗？可以在没有扩展的情况下完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:23:38.330

仅当您安装了 CTI 适配器时才能执行此操作。Salesforce 有演示 CTI 适配器，您可以安装和使用它。

这是演示 CTI 适配器的 YouTube 视频的链接：[http ://www.youtube.com/watch?v=36k7iwnYYfM](http://www.youtube.com/watch?v=36k7iwnYYfM)

这是 Salesforce CTI 工具包的链接，它包含可以下载的演示 CTI 适配器的链接：[http ://wiki.developerforce.com/page/CTI_Toolkit](http://wiki.developerforce.com/page/CTI_Toolkit)

# typo3 - 复制页面时不要复制域模型

> ID：15480050
> 
> 赞同：1
> 
> 时间：2013-03-18T15:04:14.730
> 
> 标签：typo3, domain-model, extbase

我们有一个 Extbase 扩展，它有一个与 tt_content 元素相关联的域模型。当我们删除一个页面或内容元素时，所有相关的域模型项也会被删除。这很好，我们想要这种行为（否则我们会留下孤儿）。

但是我们的客户希望在复制页面时不会复制来自此域模型的项目。有没有办法告诉 TYPO3 在复制操作期间不要复制此扩展的域模型项？

**编辑：**我们在这个项目中使用 TYPO3 4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:41:37.360

处理此问题的唯一方法是将模型表添加到“不允许”部分，但这也将删除在任何地方修改后端数据集的能力。

这就是原因（在 TYPO3 6.0 中）：

文件：方法：\TYPO3\CMS\Core\DataHandling\DataHandler::copyPages

```
$copyTablesArray = $this->admin ? $this->compileAdminTables() : explode(',', $this->BE_USER->groupData['tables_modify']);
// If not all tables are allowed then make a list of allowed tables: That is the tables that figure in both allowed tables AND the copyTable-list
if (!strstr($this->copyWhichTables, '*')) {
    foreach ($copyTablesArray as $k => $table) {
        // Pages are always going...
        if (!$table || !\TYPO3\CMS\Core\Utility\GeneralUtility::inList(($this->copyWhichTables . ',pages'), $table)) {
            unset($copyTablesArray[$k]);
        }
    }
} 
```

所有设置的表格都`$copyTablesArray`将被复制。`$this->BE_USER->groupData['tables_modify']`如果当前登录的用户不是管理员，则设置它们。

也许添加此方法的替代实现可以解决此问题，但这不是很容易的方法。

# android - Android 上活动的并发接近警报总数

> ID：15480053
> 
> 赞同：4
> 
> 时间：2013-03-18T15:04:37.533
> 
> 标签：android

有谁知道一次可以在 Android 上激活多少个并发接近警报？

使用以下 API 添加接近警报

public void addProximityAlert（双纬度，双经度，浮动半径，长期过期，PendingIntent 意图）

事实上，我通过从服务器端获取来添加多个地理围栏。但我需要知道设备上可以同时激活多少个地理围栏。有这样的数字吗？> ..我认为Apple iOS一次有10个并发地理围栏……如果我没记错的话。

但是Android有类似的东西吗？...无法在文档中的任何地方收集这些数据。

提前致谢。

# c++ - 提升矩阵运算顺序

> ID：15480058
> 
> 赞同：0
> 
> 时间：2013-03-18T15:04:56.897
> 
> 标签：c++, visual-studio, boost

我已经重载了加法和乘法运算符。如果我有这样的程序：

```
#include <boost/numeric/ublas/matrix.hpp>
typedef boost::numeric::ublas ublas;

int main()
{
   ublas::matrix<double> A(10,10,5);
   double c1 = 10;
   double c2 = 1;

   A = (A*c1) + c2; // something like this wouldn't work.
   // But if i change it to
   A = A*c1;
   A = A+c2;
   // this will work.
   return 0;
} 
```

我该如何做到这一点`A = A*c2+c1;`或`A = (A*c2)+c1`工作？

# php - Mysqli 2 记录是用一次插入创建的

> ID：15480060
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:05:08.717
> 
> 标签：php, file-upload, mysqli, insert-into

我正在使用以下表单创建相册，它将数据提交给处理脚本，然后处理文件并将数据输入数据库。

这是提交表格：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Create New Album</title>
    </head>

    <body>
    <p>Create New Album</p>
    <form action="createnewalbumsubmit.php" method="post" enctype="multipart/form-data" name="form1" id="form1">

        <input type="hidden" value="<?php echo substr(md5(time() * rand()),0,10); ?>" name="albumid" id="albumid" />
        <input type="hidden" value="<?php echo date("Y-m-d"); ?>" name="datecreated" id="datecreated" />
      <input type="hidden" value="yes" name="isalbum" id="isalbum" />

      <p>
        <label for="albumname">Album Name</label>
        <input type="text" name="albumname" id="albumname" />
      </p>
      <p>
        <label for="albumthumbnail">Album Thumbnail Image</label>
        <input type="file" name="albumthumbnail" id="albumthumbnail" />
      </p>
      <p>
        <input type="submit" name="submit" id="submit" value="Submit" />
      </p>
    </form>
    </body>
    </html> 
```

这是数据处理脚本，它使用 VEROT 上传类处理上传的文件，然后使用 MYSQLI 向数据库添加详细信息：

```
 <?php include("connect.php"); ?>
    <?php
    // Posted Data
    if(isset($_POST['albumid'])){
        $albumid = $_POST['albumid'];};

        if(isset($_POST['datecreated'])){
        $datecreated = $_POST['datecreated'];};

        if(isset($_POST['isalbum'])){
        $isalbum = $_POST['isalbum'];};

        if(isset($_POST['albumname'])){
        $albumname = $_POST['albumname'];};
        //

        require_once 'uploadclass/class.upload.php';

        $file = new Upload($_FILES['albumthumbnail']);
    if ($file->uploaded) {
      // save uploaded image with a new name,
      // resized to 100px wide
      $albumthumbnail = substr(md5(time() * rand()),0,10);
      $file->file_new_name_body = $albumthumbnail;
      $file->image_resize = true;
      $file->image_convert = 'jpg';
      $file->image_x = 100;
      $file->image_ratio_y = true;
      $file->Process('albums/'.$albumid.'/thumbnail/');
      $filename = $file->file_dst_name;
      if ($file->processed) {
        echo 'image renamed, resized x=100
              and converted to jpg';
        $file->Clean();
      } else {
        echo 'error : ' . $file->error;
      }
    }

    mysqli_query($db,"INSERT INTO albums (`albumid`,`datecreated`,`isalbum`,`albumname`,`albumthumbnail`) VALUES ('$albumid','$datecreated','$isalbum','$albumname','$filename')");

    ?> 
```

我遇到的问题是，当我创建一条新记录时，数据库中正在创建两条记录，一条空白记录，其中没有任何内容，一条有效记录，其中包含添加专辑的所有详细信息。

![在此处输入图像描述](../Images/435879b4f289f5279366f1279d6932b5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:08:35.993

这是因为您没有检查表单是否正在发布。每次您登陆页面时，它都会运行：

```
mysqli_query($db, "INSERT INTO albums (`albumid`,`datecreated`,`isalbum`,`albumname`,`albumthumbnail`) VALUES ('$albumid','$datecreated','$isalbum','$albumname','$filename')"); 
```

这就是为什么你得到一个空白记录。您需要用以下方式包围您的提交代码`if (!empty($_POST)) { }`：

```
<?php
include ("connect.php");

if (!empty($_POST)) {
    // Posted Data
    if (isset($_POST['albumid'])) {
        $albumid = $_POST['albumid'];
    };

    if (isset($_POST['datecreated'])) {
        $datecreated = $_POST['datecreated'];
    };

    if (isset($_POST['isalbum'])) {
        $isalbum = $_POST['isalbum'];
    };

    if (isset($_POST['albumname'])) {
        $albumname = $_POST['albumname'];
    };
    //

    require_once 'uploadclass/class.upload.php';

    $file = new Upload($_FILES['albumthumbnail']);
    if ($file -> uploaded) {
        // save uploaded image with a new name,
        // resized to 100px wide
        $albumthumbnail = substr(md5(time() * rand()), 0, 10);
        $file -> file_new_name_body = $albumthumbnail;
        $file -> image_resize = true;
        $file -> image_convert = 'jpg';
        $file -> image_x = 100;
        $file -> image_ratio_y = true;
        $file -> Process('albums/' . $albumid . '/thumbnail/');
        $filename = $file -> file_dst_name;
        if ($file -> processed) {
            echo 'image renamed, resized x=100
              and converted to jpg';
            $file -> Clean();
        } else {
            echo 'error : ' . $file -> error;
        }
    }

    mysqli_query($db, "INSERT INTO albums (`albumid`,`datecreated`,`isalbum`,`albumname`,`albumthumbnail`) VALUES ('$albumid','$datecreated','$isalbum','$albumname','$filename')");
}
?> 
```

# python - Python argparse REMAINDER 不清楚

> ID：15480062
> 
> 赞同：7
> 
> 时间：2013-03-18T15:05:11.377
> 
> 标签：python, arguments, argparse

正如文档所示：

> argparse.REMAINDER。所有剩余的命令行参数都被收集到一个列表中。这对于调度到其他命令行实用程序的命令行实用程序通常很有用：

```
>>> parser = argparse.ArgumentParser(prog='PROG')
>>> parser.add_argument('--foo')
>>> parser.add_argument('command')
>>> parser.add_argument('args', nargs=argparse.REMAINDER)
>>> print parser.parse_args('--foo B cmd --arg1 XX ZZ'.split())
Namespace(args=['--arg1', 'XX', 'ZZ'], command='cmd', foo='B') 
```

我试图将其用于完全相同的目的，但在某些情况下，这对我来说似乎是错误的*（或者我的概念可能是错误的）*：

```
import argparse

a = argparse.ArgumentParser()

a.add_argument('-qa', nargs='?')
a.add_argument('-qb', nargs='?')
a.add_argument('rest', nargs=argparse.REMAINDER)

a.parse_args('-qa test ./otherutil bar -q atr'.split()) 
```

结果：

```
test.py: error: ambiguous option: -q could match -qa, -qb 
```

因此，显然，如果`otherutil`有这样的论点以某种方式与给定的论点“冲突” `argparse`，它似乎无法正常工作。

我希望当`argparse`达到`REMAINDER`那种参数时，它只会用完列表末尾的所有字符串，而无需进一步解析。我能以某种方式达到这种效果吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-08-04T15:01:33.000

我在尝试将选项分派给底层实用程序时遇到了这个问题。我最终使用的解决方案是`nargs='*'`代替`nargs=argparse.REMAINDER`，然后只使用“伪参数”`--`来分隔我的命令和底层工具的选项：

```
>>> import argparse
>>> parser = argparse.ArgumentParser()
>>> parser.add_argument('--myflag', action='store_true')
>>> parser.add_argument('toolopts', nargs='*')
>>> parser.parse_args('--myflag -- -a --help'.split())
Namespace(myflag=True, toolopts=['-a', '--help']) 
```

这在帮助输出中很容易记录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-06-17T23:44:13.987

这与处理缩写有关，而不是与 REMAINDER 有关`nargs`。

```
In [111]: import argparse                                                                 
In [112]: a = argparse.ArgumentParser() 
     ...:  
     ...: a.add_argument('-qa', nargs='?') 
     ...: a.add_argument('-qb', nargs='?')                                                

In [113]: a.parse_args('-qa test ./otherutil bar -q atr'.split())                         
usage: ipython3 [-h] [-qa [QA]] [-qb [QB]]
ipython3: error: ambiguous option: -q could match -qa, -qb 
```

`argparse`进行 2 遍解析。首先，它尝试将字符串分类为选项（标志）或参数。其次，它在解析位置和可选项之间交替，根据`nargs`.

这里歧义发生在第一遍。它试图将“-q”与两个可用的选项相匹配。REMAINDER 的特殊动作（吸收 '-q' 就好像它是一个普通的字符串）直到第二遍才发生。

较新`argparse`的版本允许我们关闭缩写处理：

```
In [114]: a.allow_abbrev                                                                  
Out[114]: True
In [115]: a.allow_abbrev=False                                                            
In [116]: a.parse_args('-qa test ./otherutil bar -q atr'.split())                         
usage: ipython3 [-h] [-qa [QA]] [-qb [QB]]
ipython3: error: unrecognized arguments: ./otherutil bar -q atr 
```

如果我添加 REMAINDER 动作：

```
In [117]: a.add_argument('rest', nargs=argparse.REMAINDER) 

In [118]: a.parse_args('-qa test ./otherutil bar -q atr'.split())                         
Out[118]: Namespace(qa='test', qb=None, rest=['./otherutil', 'bar', '-q', 'atr']) 
```

@Colin 建议使用 '--' 有效，因为该字符串在第一遍中被识别：

```
In [119]: a.allow_abbrev=True                                                             
In [120]: Out[117].nargs='*'                                                              
In [121]: a.parse_args('-qa test -- ./otherutil bar -q atr'.split())                      
Out[121]: Namespace(qa='test', qb=None, rest=['./otherutil', 'bar', '-q', 'atr']) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T15:08:26.147

您需要使用两个 `--`.

```
a.add_argument('--qa', nargs='?')
a.add_argument('--qb', nargs='?') 
```

因此，您定义的选项与 a 冲突`-q`，它至少接受一个参数，在其他地方定义

来自[argparse 文档](http://docs.python.org/dev/library/argparse.html)

```
ArgumentParser.add_argument(name or flags...)

name or flags - Either a name or a list of option strings, e.g. foo or -f, --foo. 
```

编辑回复@PDani第一条评论：

[这个帖子](https://stackoverflow.com/questions/2160083/what-is-the-general-syntax-of-a-unix-shell-command/2160165#2160165)很有趣。

据我了解，argparse 遵循 POSIX 和 GNU 风格。

重要的是，短（1 个字母）选项可以组合在一起，如果一个选项需要一个参数，则可以将其附加到选项字母上。例如，如果你有这样的东西

```
a.add_argument('-a', action='store_true')
a.add_argument('-b', action='store_true')
a.add_argument('-c', action='store_true')
a.add_argument('-d', nargs=1)
a.add_argument('-e', nargs=1) 
```

您可以将它们称为`-abcd3 -e5`or `-a -b -c -d3 -e5`or `-cba -e5 -d3`, ...
现在，如果您有

```
a.add_argument('-abc',  action='store_true') 
```

argparse 很难确定`-abc`是附加了 3 个短参数还是一个长参数。因此，您被迫将参数定义为`--abc`.

所以我猜你不能使用长参数 name 和 one `-`。

[我知道一种叫做docopt](http://docopt.org/)的命令行解析的替代方法：你可以看看，但我怀疑它是否能解决你的问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-14T21:48:36.240

也许是一些特殊处理的组合[`ArgumentParser.parse_known_args()`](https://docs.python.org/2/library/argparse.html#argparse.ArgumentParser.parse_known_args)和其他一些特殊处理？

这并不完美，但可能会导致正确的方向：

```
import argparse
import sys

a = argparse.ArgumentParser()
# treat the common-prefixed arguments as options to the prefix
a.add_argument("-q")

# allow a delimiter to set off your arguments from those which should go to the
# other utility, and use parse_known_args() if the delimiter is not present
argv = sys.argv[1:]
if "--" in argv:
    i = argv.index("--")
    args, extra = a.parse_args(argv[:i]), argv[i + 1:]
else:
    a.add_argument("extra", nargs=argparse.REMAINDER)
    args, _ = a.parse_known_args(argv)
    extra = args.extra

# complain if the `-q` option was not specified correctly
if args.q not in ("something", "otherthing"):
    a.error("Must specify '-qsomething' or '-qotherthing'")

print "q:", "-q%s" % (args.q,)
print "extra:", '"%s"' % (" ".join(extra),) 
```

结果：

```
$ ./testcmd -qsomething test ./otherutil bar -q atr
q: -qsomething
extra: "test ./otherutil bar -q atr" 
```

注意事项：

1.  这将在-prefixed 选项`-q`的其余部分和其余部分之间留出空格。`-q`
2.  这将消耗一个`-q`选项，但如果指定更多选项，我不记得它是否会引发异常（或做任何其他有用的事情）。

# ios - 复合精灵背景的滚动层

> ID：15480066
> 
> 赞同：1
> 
> 时间：2013-03-18T15:05:25.547
> 
> 标签：ios, background, cocos2d-iphone, scroll, layer

我游戏中的每个背景都由一到五个相互叠加的图像表示。如何制作这些复合精灵背景，并以可以滚动浏览它们的方式向图层添加最多三个背景。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:11:55.680

使用 CCScrollLayer 扩展。

你可以从[这里下载](https://github.com/cocos2d/cocos2d-iphone-extensions/tree/master/Extensions/CCScrollLayer)

# c# - MonoTouch.Dialog LoadMoreElement 在委托上阻塞

> ID：15480070
> 
> 赞同：1
> 
> 时间：2013-03-18T15:05:34.010
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我正在尝试使用 LoadMoreElement 对象在单击单元格时显示活动指示器。下面的代码有效，但是 NavigationController 对象运行时间很长，并且活动指示器仅在 NavigationController 完成其工作后显示。当应用程序似乎挂起一段时间然后只是在屏幕上闪烁时，这种方式就失去了活动指示器的意义。

我认为 NavigationController 对象正在阻塞，这就是 AcitivityIndi​​cator 不显示的原因。我应该使用线程来允许它在后台完成吗？任何帮助将不胜感激！

```
 var loadMore = new LoadMoreElement();
        loadMore.Caption = "Ratios";
        loadMore.NormalCaption = "Ratios";
        loadMore.LoadingCaption = "Loading Ratios...";
        loadMore.Tapped += delegate { loadMore.Animating = true; NavigationController.PushViewController(new FileListController(), true); };
        loadMore.Font = UIFont.FromName("Arial", 10);
        loadMore.TextColor = UIColor.Black;

        Root.Add(new Section() {                
            loadMore
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:18:49.560

[我会尝试使用InvokeOnMainThread](http://iosapi.xamarin.com/?link=M%3aMonoTouch.Foundation.NSObject.InvokeOnMainThread%28MonoTouch.Foundation.NSAction%29)在主线程上调用 ActivityIndi ​​cator ，然后推送您的新视图控制器。

# c# - 使用ajax调用子域内的页面

> ID：15480071
> 
> 赞同：1
> 
> 时间：2013-03-18T15:05:36.350
> 
> 标签：c#, jquery, asp.net, ajax

我需要使用 ajax get 读取我的子域上的页面内容。我想在我的子域上创建一些脚本并在我的域上调用该脚本。但是我不知道该怎么做。

有可能做这样的事情吗？如何？

编辑：

我在我的域中创建了一个页面，该页面使用 DownloadString 并下载该页面并记下结果。有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:39:25.957

如果您希望支持跨域 AJAX 请求，则需要创建一个跨域资源共享处理程序 (CORS)。我没有特定于 asp.net 的示例，但如果您使用的是 MVC，这很容易实现（并且对于 WebForms 基本相同）。

可以在此处找到一个 Web API 示例来帮助您入门： [CorsHandler.cs](https://github.com/DavidChristiansen/DotNetOpenAuth.WebAPI.40/blob/master/source/DotNetOpenAuth.WebAPI/CorsHandler.cs)

此外，如果您需要支持 IE 7、8 或 9，则需要查看 jQuery 扩展库，例如[jQuery-ajaxTransport-XDomainRequest](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest)

**编辑**

如果您想查看一个完整的示例（不幸的是 Web API），这里是一个 MSDN 文章，其中包含一个完整的代码示例[在 ASP.NET Web API 中实现 CORS 支持](http://code.msdn.microsoft.com/windowsdesktop/Implementing-CORS-support-a677ab5d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:03:23.983

您有时也可以在 JS 中操作 document.domain。因此，如果您从 www.site.com 提供页面，并且您的 Ajax 服务托管在 app.site.com，请将您的 document.domain 设置为 site.com。

# javascript - AJAX 调用在 Backbone.js 完成之前被中止

> ID：15480080
> 
> 赞同：2
> 
> 时间：2013-03-18T15:06:10.647
> 
> 标签：javascript, jquery, ajax, backbone.js, onbeforeunload

我已经按照这个关于如何在页面重定向上中止所有 AJAX 请求的[答案进行操作。](https://stackoverflow.com/a/10701856/1591165)它基本上使用 ajaxSend 将 xhr 请求对象添加到数组中，然后使用 ajaxComplete 从数组中删除该对象，然后如果页面被重定向，它将遍历该数组并中止浏览器仍在等待的每个请求。

这适用于所有使用 $.ajax({}) 的普通 AJAX 请求。但是，如果像 model.save() 一样调用 Backbone AJAX 请求，则 window.onbeforeunload 函数会在任何事情发生之前执行，并导致 model.save() 在事件发送到服务器之前中止。

有人对如何解决此问题或为什么调用 window.onbeforeunload 函数有任何想法吗？

这是我从链接答案中获得的代码：

```
var xhrPool = [];
$.xhrPool = {};
$.xhrPool.abortAll = function () {
   $.each(xhrPool, function (idx, jqXHR) {
       jqXHR.abort();
   });
   xhrPool.length = 0;
};

$(document).ajaxSend(function (e, jqXHR, options) {
   xhrPool.push(jqXHR);
});

$(document).ajaxComplete(function (e, jqXHR, options) {
   xhrPool = $.grep(xhrPool, function (x) {
       return x != jqXHR;
   });
});

window.onbeforeunload = function () {
   $.xhrPool.abortAll();
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:18:21.160

您当时是否尝试使用等待标志来保存？

像这样 model.save(data,{wait:true});

希望这可以帮助。

# r - 轴标签中的数学表达式

> ID：15480082
> 
> 赞同：17
> 
> 时间：2013-03-18T15:06:12.700
> 
> 标签：r, plot, latex, axis-labels, plotmath

在 R 中，我使用这样我的绘图轴的标签与来自 LaTeX`expression(theta[l])`的标签相同。`$\theta_l$`出于审美原因，我宁愿展示`$\theta_\ell$`. 你能帮助我吗？

![在此处输入图像描述](../Images/810435aaf2082087e07cfc623d526fbe.png)

* * *

**编辑**

之前，我做过

```
plot(1:10, 1:10, xlab=expression(theta[l])) 
```

我将生成的图片导出为 pdf 格式。然后，使用

```
\begin{figure}[htbp]
\centerline{\includegraphics[scale=.6]{test.pdf}}
\end{figure} 
```

我的图片被插入到 LaTeX 中。

在评论之后，这是我现在要做的：

```
require(tikzDevice)
tikz("test.tex", standAlone=TRUE, width=5, height=5)

plot(1:10, 1:10, xlab="$\\theta_\\ell$")

dev.off()
tools::texi2pdf('test.tex')
system(paste(getOption('pdfviewer'),'test.pdf')) 
```

但是，当我在 LaTeX 中插入结果图时，图形的质量不如以前。我还能做些什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T15:46:47.570

对于这样一个简单的问题，真的没有理由使用像“tikzDevice”这样[可能未维护的包。](http://cran.r-project.org/web/packages/tikzDevice/index.html)'tikz' 设备的部分问题在于它似乎没有正确接受指定绘图分辨率的 'xpinch' 和 'ypinch' 参数。

将 LaTEX 符号添加到绘图有一个更大的问题，但对于这个本地化问题，问题是指定字体以使基本 'plotmath' 包为您显示草书字母。

您可以通过将其从绘图命令中分离出来并从“标题”函数中选择自定义字体来更改 x 轴标签的字体，如下所示：

```
plot(1:10, 1:10, xlab="")
windowsFonts(script=windowsFont("Script MT Bold"))
title(xlab=expression(theta[l]), family="script") 
```

我们所做的是在 plot 命令中为 x 轴指定一个空标签，以首先腾出空间。然后，我们将系统字体加载到可用的字体系列中（我喜欢 Script MT Bold 用于表达式）。最后，我们可以使用 'title' 函数绘制 x 轴标签并为该标签中的任何文本指定族。

通过这样做，我们保留了绘图设备的所有原始功能，因此在转换为 PDF 时不应再出现分辨率下降的问题。

![图表演示](../Images/c506263dc7c5b2707ed0459e871b9ac0.png)

现在，如果有人对 'tikzDevice' 包之外的 LaTEX 符号问题有一个好的解决方案，我很想听听。我知道做到这一点的唯一方法是翻转模型并使用“tikz”LaTEX 包从 LaTEX 文件中手动绘制整个图形，或者使用“pixmap”R 包在情节的顶部。两者都不是一个完美的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T03:02:09.073

我认为这`tikzDevice` *是*去这里的方式。您可以从`R-forge`.

```
install.packages("tikzDevice", repos="http://R-Forge.R-project.org") 
```

tikz /pgf 的理念是创建一个可以排版的情节。您可能希望这些与您的文档保持一致。例如，使用相同的包、字体、字体大小等

`tikz`您可以通过设置在调用中设置这些内容

文件声明等选项

```
options(tikzDocumentDeclaration = "\\documentclass[10pt]{article}") 
```

包

`tikzLatexPackages`（或类似的）

您还可以控制字体大小。

所有这些东西都在

?tikzDevice.

* * *

您还可以使用`knitr`在文字编程文档 (.rnw) 中创建绘图

在这种情况下，使用 tikz 设备创建一个 pdf（作为 external = TRUE），使用与整个文档相同的文档声明和标题/包。

```
\documentclass[12pt,a4paper]{article}

\begin{document}

<<setup, include = FALSE>>=
opts_chunk$set(dev = 'tikz', external = TRUE)
@

<<myplot, fig.width=5, fig.height = 5, echo=FALSE>>=
plot(1:10, 1:10, xlab="$\\theta_\\ell$")
@

\end{document} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T20:14:55.530

这是一个有点脏的解决方案，但它使它：

```
plot(1,1, xlab=expression(theta))
title(xlab="    \u2113",line=3.2,cex.lab=.7) 
```

首先用 theta 符号绘制。然后添加字体较小的\ell符号并手动设置位置。

![在此处输入图像描述](../Images/7da908bd8b917173279923898f93cb59.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-29T02:41:20.247

我在[这里](https://www.stat.auckland.ac.nz/~paul/R/PDF/pdfEncoding.html)找到了解决方法。他们确实解释了使编码与标准 pdf 设备一起工作的漫长过程。否则，可以通过安装[Cairo](http://cran.r-project.org/web/packages/Cairo/index.html)包来使用 CairoPDF 设备。然后`xlab="\u2113"`使用@Julián Urbano 的解决方案会在 pdf 中显示类似的内容。我没有运气在表达式中使用该字符。

# c# - 从具有多个命名空间 C# 的 XML 文件返回数据

> ID：15480085
> 
> 赞同：1
> 
> 时间：2013-03-18T15:06:27.870
> 
> 标签：c#, xml, xml-namespaces

我在从 Linq 到 XML 查询返回数据时遇到问题。我有以下 XML

```
<sdnList xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/sdnList.xsd">
  <publshInformation>
    <Publish_Date>03/14/2013</Publish_Date>
    <Record_Count>5440</Record_Count>
  </publshInformation>
</sdnList> 
```

我正在尝试使用以下方法获取 Publish Date 的值

```
XDocument xDoc = XDocument.Load(fileName);
XNamespace xNS = "http://tempuri.org/sdnList.xsd";
XNamespace xNS1 = "http://www.w3.org/2001/XMLSchema-instance";
string strCurrentDate = xDoc.Element(xNS1 + sdnList").Element("publshInformation").Element("Publish_Date").Value; 
```

这只是返回一个对象预期的错误。我知道我的问题在于命名空间（很可能是一个简单的解决方案）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:13:49.490

该文档中的所有元素都在`http://tempuri.org/sdnList.xsd`名称空间中，因此您需要类似

```
xDoc.Element(xNS + "sdnList")
    .Element(xNS + "publshInformation")
    .Element(xNS + "Publish_Date").Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:28:57.217

这将起作用：

```
XNamespace xNS = "http://tempuri.org/sdnList.xsd";
string strCurrentDate = xDoc.Element(xNS + "publshInformation").Element(xNS + "Publish_Date").Value; 
```

# java - 文件附件的解码名称不适用于属性

> ID：15480086
> 
> 赞同：0
> 
> 时间：2013-03-18T15:06:29.043
> 
> 标签：java, jakarta-mail

我阅读了这份文档：

[http://docs.oracle.com/javaee/6/api/javax/mail/internet/package-summary.html](http://docs.oracle.com/javaee/6/api/javax/mail/internet/package-summary.html)

所以我向 mimeMessage 添加了一些属性：

```
Properties props = new Properties();
        props.put("mail.mime.decodefilename", true);

    Session mailConnection = Session.getInstance(props, null);

    source = new FileInputStream(emlFile);

    MimeMessage message = new MimeMessage(mailConnection, source); 
```

现在我期待该方法`bodyPart.getFileName()`返回正确的文件名。但是使用这种配置它仍然无法正常工作，我需要调用 mimeUtils: `MimeUtility.decodeText`- 我不想要的。我也尝试：

```
 props.put("mail.mime.decodefilename", "true"); 
```

但没有成功。那么我做错了什么？

更新：

调试后我有这个解决方案：

这行得通

```
 Properties props = System.getProperties();        
    props.put("mail.mime.decodefilename", "true"); 
```

这不起作用：

```
 Properties props = new Properites();
    props.put("mail.mime.decodefilename", "true"); 
```

所以如果文件名正在解码也取决于系统属性。有谁知道哪些属性？我没有办法尝试所有系统属性并解决它是哪一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:29:27.380

[`MimeMessage.getFileName`](http://docs.oracle.com/javaee/6/api/javax/mail/internet/MimeMessage.html#getFileName%28%29)

> 如果 mail.mime.encodefilename 系统属性设置为 true，则 MimeUtility.decodeText 方法将用于解码文件名。

* * *

现在，当人们查看实现时，这就是`MimeUtility.decodeText`在调用过程中的表现方式`getFileName`：

```
if (decodeFileName && filename != null) {
    try {
    filename = MimeUtility.decodeText(filename);
    } catch (UnsupportedEncodingException ex) {
    throw new MessagingException("Can't decode filename", ex);
    }
} 
```

在哪里`decodeFileName`初始化是这样的：

```
s = System.getProperty("mail.mime.decodefilename");
// default to false
decodeFileName = s != null && !s.equalsIgnoreCase("false"); 
```

* * *

`javadoc`似乎与实施相冲突。

因此，尝试设置`mail.mime.decodefilename`而不是`mail.mime.encodefilename`，可能使用[`System.setProperty`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setProperty%28java.lang.String,%20java.lang.String%29).

# mysql - mySQL/SQlite 减法查询

> ID：15480087
> 
> 赞同：1
> 
> 时间：2013-03-18T15:06:30.143
> 
> 标签：mysql, sql, sqlite

我需要一个查询，它从选择整个表开始，然后会有更多查询从第一个查询中删除条目。我通过使用几个查询然后在我的应用程序中比较结果来实现这一点。我想知道是否可以在单个查询中完成此操作。

*算法*

1.  从表中选择所有 AccountID

2.  从其中 parameter1 = true 的表中选择 AccountIDs

3.  从原始查询结果中删除这些匹配项

4.  从参数 2 = true 的表中选择 AccountIDs

5.  从剩余的查询结果中删除这些匹配项

6.  依此类推，最多 N 个参数。

这还需要与 mySQL 和 SQLite 兼容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:16:50.003

我想你正在寻找这个：

```
SELECT AccountID FROM the_table
LEFT JOIN (
    SELECT AccountID FROM the_table
    WHERE
        parameter1 = true OR
        ... OR
        parameterN = true ;
) AS not_included USING (AccountID)
WHERE not_included.AccountID IS NULL -- only items with no match in the "not_included" sub-query 
```

`not_included`子查询返回任何参数设置为的所有项目`TRUE`。您实际上希望从最终结果集中排除这些记录。

然后 LEFT-JOIN `the_table`（即所有项目）到这个子结果。该`WHERE...IS NULL`子句排除出现在`the_table`但不出现在的项目`not_included`。

因此，只有您不想排除的项目才会**保留**在最终结果集中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:47:04.317

实现算法的最直接方法是使用[复合 SELECT 语句](http://sqlite.org/lang_select.html#compound)：

```
SELECT AccountID FROM MyTable
EXCEPT
SELECT AccountID FROM MyTable WHERE parameter1 = 1
EXCEPT
SELECT AccountID FROM MyTable WHERE parameter2 = 1 
```

但是，这也可以使用单个`WHERE`表达式：

```
SELECT AccountID
FROM MyTable
WHERE NOT (parameter1 = 1 OR
           parameter2 = 1 OR
           ...) 
```

# c# - Directory.EnumerateFiles 或 Directory.GetFiles 中的 Take()

> ID：15480088
> 
> 赞同：-2
> 
> 时间：2013-03-18T15:06:34.277
> 
> 标签：c#, .net, foreach, parallel.foreach

在 Directory.EnumerateFiles 或 Directory.GetFiles 中使用 .take() 是否允许？

我有这个并且工作

```
 Parallel.ForEach(Directory.EnumerateFiles(sourceFolder, "*", 
               SearchOption.AllDirectories), file =>
    {
         //DO SOMETHING

    }); 
```

我只想在 100 个文件中执行循环。所以：

```
 Parallel.ForEach(Directory.EnumerateFiles(sourceFolder, "*",
              SearchOption.AllDirectories).Take(100), file =>
    {
         //DO SOMETHING

    }); 
```

但是这个周期并没有像我预期的那样被记录 100 次。

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:09:16.657

是的，这样做绝对没问题。它将结果限制为返回的前 100 个文件`EnumerateFiles`。如果没有 100 个文件，它*不会执行 100 次块……这只是一个限制因素。*

# python - Python for：循环不会暂停？

> ID：15480089
> 
> 赞同：2
> 
> 时间：2013-03-18T15:06:37.693
> 
> 标签：python, timing

好的，所以我有一个脚本可以在给定要搜索的文件名时查找、移动和重命名文件。我在我的 Robotics 文件夹中的所有文件夹中为迭代器编写了一个包装器，以自动化该过程。这是代码：

```
#! /usr/bin/env python

import os
import sys
import time

files = [ ... Big long list of filenames ... ]

for item in files:
    sys.stdout.write("Analyzing & Moving " + item + "... ")
    os.system('python mover-s.py "' + item + '"')
    sys.stdout.write("Done.\n")
print ""
print "All files analyzed, moved, and renamed." 
```

现在，执行并完成原始脚本需要大约 2 秒，我想要它做的是显示“分析和移动任何东西......”，然后在脚本完成后，显示“完成。”。我的问题是消息和“完成”。消息同时出现。我给它添加了一个小暂停，大约 0.25 秒，和同样的东西，但它只是增加了 0.25 秒来显示“分析和移动任何东西......完成”所需的时间。基本上，为什么它不会显示我的第一条消息，暂停，然后显示第二条？因为现在它同时显示整行。这可能是因为我对管道和诸如此类的知识贫乏..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:08:09.377

`sys.stdout.flush()`在第一个之后添加一个呼叫`write()`。

您看到的行为与缓冲有关。有关讨论，请参阅[sys.stdout.flush() 方法](https://stackoverflow.com/questions/10019456/usage-of-sys-stdout-flush-method)的用法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:10:38.707

这里有几个问题。

首先，要调用另一个 python 脚本，没有理由`os.system`像现在这样使用。你应该简单地沿着

```
import movers # can't have hyphen in a module name
movers.main() 
```

或其他什么，让比去做。

其次，如果您要使用 Python 的内置库移动文件，请参阅[这个 SO question](https://stackoverflow.com/questions/4837127/how-can-i-delay-execution-until-after-os-system-finishes)，它解释了您应该使用`shutil.copyfile`而不是`os.system`.

这也将解决暂停问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:09:11.530

```
....
for item in files:
    sys.stdout.write("Analyzing & Moving " + item + "... ")
    os.system('python mover-s.py "' + item + '"')
sys.stdout.write("Done.\n")
print ""
.... 
```

# c++ - ns3泊松流量模型

> ID：15480093
> 
> 赞同：2
> 
> 时间：2013-03-18T15:06:57.443
> 
> 标签：c++, poisson, ns-3

我正在尝试学习 ns3，并且正在尝试通过使用 onofApplication 来生成 Vbr 而不是 Cbr 来修改其中一个示例，但是代码不起作用，我不知道为什么，您能帮帮我吗？

```
#include "ns3/core-module.h"
#include "ns3/network-module.h"
#include "ns3/csma-module.h"
#include "ns3/internet-module.h"
#include "ns3/point-to-point-module.h"
#include "ns3/applications-module.h"
#include "ns3/ipv4-global-routing-helper.h"
#include "ns3/random-variable.h"
#include "ns3/socket-factory.h"
#include "ns3/udp-socket-factory.h"
#include "ns3/on-off-helper.h"
#include "ns3/nstime.h"

using namespace ns3;

NS_LOG_COMPONENT_DEFINE ("SecondScriptExample");

int 
main (int argc, char *argv[])
{
  bool verbose = true;
  uint32_t nCsma = 3;

  CommandLine cmd;
  cmd.AddValue ("nCsma", "Number of \"extra\" CSMA nodes/devices", nCsma);
  cmd.AddValue ("verbose", "Tell echo applications to log if true", verbose);

  cmd.Parse (argc,argv);

  if (verbose)
    {
      LogComponentEnable ("UdpEchoClientApplication", LOG_LEVEL_INFO);
      LogComponentEnable ("UdpEchoServerApplication", LOG_LEVEL_INFO);
    }

  nCsma = nCsma == 0 ? 1 : nCsma;

  NodeContainer p2pNodes;
  p2pNodes.Create (2);

  NodeContainer csmaNodes;
  csmaNodes.Add (p2pNodes.Get (1));
  csmaNodes.Create (nCsma);

  PointToPointHelper pointToPoint;
  pointToPoint.SetDeviceAttribute ("DataRate", StringValue ("5Mbps"));
  pointToPoint.SetChannelAttribute ("Delay", StringValue ("2ms"));

  NetDeviceContainer p2pDevices;
  p2pDevices = pointToPoint.Install (p2pNodes);

  CsmaHelper csma;
  csma.SetChannelAttribute ("DataRate", StringValue ("100Mbps"));
  csma.SetChannelAttribute ("Delay", TimeValue (NanoSeconds (6560)));

  NetDeviceContainer csmaDevices;
  csmaDevices = csma.Install (csmaNodes);

  InternetStackHelper stack;
  stack.Install (p2pNodes.Get (0));
  stack.Install (csmaNodes);

  Ipv4AddressHelper address;
  address.SetBase ("10.1.1.0", "255.255.255.0");
  Ipv4InterfaceContainer p2pInterfaces;
  p2pInterfaces = address.Assign (p2pDevices);

  address.SetBase ("10.1.2.0", "255.255.255.0");
  Ipv4InterfaceContainer csmaInterfaces;
  csmaInterfaces = address.Assign (csmaDevices);

  UdpEchoServerHelper echoServer (9);

  ApplicationContainer serverApps = echoServer.Install (csmaNodes.Get (nCsma));
  serverApps.Start (Seconds (1.0));
  serverApps.Stop (Seconds (10.0));

    OnOffHelper onOffAP ("ns3::UdpSocketFactory", csmaInterfaces.GetAddress(nCsma));
    onOffAP.SetAttribute("PacketSize", UintegerValue(1024));
    onOffAP.SetAttribute("OffTime",RandomVariableValue(ExponentialVariable(0.01)));
    // the packet arrivalrate on AP side is 100 pkt/sec, so we set mean value as 1/100
    onOffAP.SetAttribute("OnTime",RandomVariableValue(ConstantVariable(0.0001583)));
    // the constanttime for sending one packet
    onOffAP.SetAttribute("DataRate", StringValue ("54Mbps"));

 // UdpEchoClientHelper echoClient (csmaInterfaces.GetAddress (nCsma), 9);
  //echoClient.SetAttribute ("MaxPackets", UintegerValue (1));
  //echoClient.SetAttribute ("Interval", TimeValue (Seconds (1.0)));
  //echoClient.SetAttribute ("PacketSize", UintegerValue (1024));

  ApplicationContainer clientApps = onOffAP.Install (p2pNodes.Get (0));
  clientApps.Start (Seconds (2.0));
  clientApps.Stop (Seconds (10.0));

  Ipv4GlobalRoutingHelper::PopulateRoutingTables ();

  pointToPoint.EnablePcapAll ("second");
  csma.EnablePcap ("second", csmaDevices.Get (1), true);

  Simulator::Run ();
  Simulator::Destroy ();
  return 0;
} 
```

我收到了这个错误

```
msg="Invalid value for attribute set (OffTime) on ns3::OnOffApplication", file=../src/core/model/object-factory.cc, line=75
libc++abi.dylib: terminate called without an active exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:23:31.503

onOffAP.SetAttribute ("OnTime", StringValue ("ns3::ConstantRandomVariable[Constant=4]")); onOffAP.SetAttribute ("OffTime", StringValue ("ns3::ConstantRandomVariable[Constant=0]"));

他们从 API 3.15 开始进行了一些更改。看看[https://groups.google.com/group/ns-3-users/tree/browse_frm/month/2012-11/be3cd40a0dc9c3a1?rnum=461&start=250&_done=/group/ns-3-users/browse_frm /月/2012-11?start%3D250%26sa%3DN%26&pli=1](https://groups.google.com/group/ns-3-users/tree/browse_frm/month/2012-11/be3cd40a0dc9c3a1?rnum=461&start=250&_done=/group/ns-3-users/browse_frm/month/2012-11?start%3D250%26sa%3DN%26&pli=1)

[或者在http://code.nsnam.org/ns-3-dev/file/eb7335c2423c/examples/wireless/wifi-hidden-terminal.cc](http://code.nsnam.org/ns-3-dev/file/eb7335c2423c/examples/wireless/wifi-hidden-terminal.cc)查看设置 OffTime 的示例代码

希望对你有帮助.. :)

# jquery - 试图开发一个 Jquery 滑块储蓄计算器并被卡住了

> ID：15480096
> 
> 赞同：-4
> 
> 时间：2013-03-18T15:07:01.373
> 
> 标签：jquery

[http://cdpn.io/AafGc](http://cdpn.io/AafGc)

[http://codepen.io/jakedx6/pen/AafGc](http://codepen.io/jakedx6/pen/AafGc)

我以前从来没有真正尝试过在 Jquery 中编写类似这样的代码，我确信我的代码是一团糟，但我希望能得到一些帮助以使其工作。上面的链接指向我的问题的 CodePen。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:32:38.807

您正在尝试使用类似的字符串进行计算，`$5,000`这是不可能的，因为它不是数字 ( `NaN`)。

如果您删除`$`char 您的代码按预期工作：

```
var totalcoan = $( "#tviytviy" ).val().substring(1);
var totalvfiy = $( "#totalcoan" ).val().substring(1); 
```

[我更新了你的代码。](http://codepen.io/anon/pen/LcarC)

您还应该使用`$(this)`而不是`$("this")`因为您想选择对象而不是 DOM 标记`this`。

# git - Git diff 文件名破坏一致性

> ID：15480103
> 
> 赞同：0
> 
> 时间：2013-03-18T15:07:19.067
> 
> 标签：git, diff, filenames, git-diff

此行取自包含 2852 个文件更改（切换多个库）的原始差异。

```
diff --git "a/system/cms/config/database.php\n" "b/system/cms/config/database.php\n" 
```

在所有 2852 个文件更改中，这是唯一一个文件名用引号括起来并以“\n”结尾的差异。其他所有相关行都符合这种模式。

```
diff --git a/system/cms/config/constants.php b/system/cms/config/constants.php 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:15:23.823

`\n`发生这种情况是因为您实际上有一个文件名，其末尾包含 a 。

```
$ git init
Initialized empty Git repository in /home/foo/tmp/.git/
$ echo foo > a$'\n'
$ git add a*
$ git commit -m one
[master (root-commit) 2ce40fd] one
 1 file changed, 1 insertion(+)
 create mode 100644 "a\n"
$ echo bar >> a*
$ git diff|less
diff --git "a/a\n" "b/a\n"
index 257cc56..3bd1f0e 100644
--- "a/a\n"
+++ "b/a\n"
@@ -1 +1,2 @@
 foo
+bar 
```

# c# - 如何从子类中隐藏 DependencyPropery？

> ID：15480106
> 
> 赞同：0
> 
> 时间：2013-03-18T15:07:23.557
> 
> 标签：c#, wpf

我创建了一个类，将其视为某些功能的基类。现在我想扩展那个类的工作。但这里有一些我不想被用户展示的属性。所以问题是如何隐藏一些依赖属性。

我知道`BrowsableAttribute`但我不能在我的基类中使用它，因为它正在被其他类使用。所以我只想在新的扩展类中隐藏一些属性。

```
 public class BaseControl : Control
    {
        static BaseControl()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof(BaseControl), new FrameworkPropertyMetadata(typeof(BaseControl)));
        }

        public int BaseProperty
        {
            get { return (int)GetValue(BasePropertyProperty); }
            set { SetValue(BasePropertyProperty, value); }
        }

        // Using a DependencyProperty as the backing store for BaseProperty.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty BasePropertyProperty =
            DependencyProperty.Register("BaseProperty", typeof(int), typeof(BaseControl), new UIPropertyMetadata(100));

    }

    public class Child1Control : BaseControl
    {
      // Using BaseProperty for internal Uses. 
    }

    public class Child2Control : BaseControl
    { 
        //TODO: How To HIDE the BasePropery here so that
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:23:44.203

如果您不想被这些属性覆盖，只需将它们注册为[ReadOnly](http://msdn.microsoft.com/en-us/library/ms754044.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:13:00.143

如果基类具有不应被子类访问且不应被分类代码访问的属性，请将属性设为私有：

```
public MyBaseClass
{
    private string MyProperty { get; set; }

} 
```

或者使用私有变量而不是属性：

```
public MyBaseClass
{
    private string _myProperty;

} 
```

# javascript - jQuery outerHeight 没有返回正确的值

> ID：15480108
> 
> 赞同：8
> 
> 时间：2013-03-18T15:07:36.913
> 
> 标签：javascript, jquery, html, dynamic

我正在尝试通过从窗口大小中减去页眉和页脚值并将内容设置为文档加载时的此值来动态设置网页内容的高度。

每个函数参数都接受一个元素 id 以获取元素高度；不包括内容参数。

```
 function setH(header, content, footer) 
{
    winH = top.innerHeight;
    winTitle = 32; // height value of the window title (part of the header)
    headH = $(header).outerHeight(true);
    footH = $(footer).outerHeight(true);
    contentH = winH - winTitle - headH - footH;
    $(content).css({'height' : (contentH) + 'px','overflow-y' : 'scroll'});
} 
```

我遇到的问题是 outerHeight 值返回了错误的值。页眉返回 23 像素，页脚返回 40 像素。

检查 FF 和 Chrome 中的元素时，值是 25px 和 44px。

我尝试使用 innerHeight、outerHeight 和 outerHeight(true) 但没有得到正确的值。

关于可能出现问题的任何建议？还是动态设置内容高度的替代方法？我的头发快用完了，所以感谢您的帮助。

编辑：我正在处理 iframe 中的内容。以下内容：`winH = top.innerHeight`获取最顶部 iframe 窗口的高度值。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-23T07:04:14.847

尝试对我有帮助的一件事是放入检查而不是检查`outerHeight()`的代码。显然在许多情况下使用 是可以的，但有时不正确的值是由于元素没有完全加载造成的。`$(window).load()``$(document).ready()``$(document.ready()``outerHeight()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:19:09.400

我修改了用于计算屏幕宽度/高度的脚本。看看这是否有效：

```
 if (typeof window.innerWidth != 'undefined') {
        viewportwidth = window.innerWidth;
        viewportheight = window.innerHeight;
        winTitle = 32;
        headH = $(header).outerHeight(true);
        footH = $(footer).outerHeight(true);
        contentH = viewportheight - winTitle - headH - footH;
    }

    // IE6 in standards compliant mode (i.e. with a valid doctype as the first line in the document)

    else if (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientWidth != 'undefined' && document.documentElement.clientWidth != 0) {
        viewportwidth = document.documentElement.clientWidth;
        viewportheight = document.documentElement.clientHeight;
        winTitle = 32;
        headH = $(header).outerHeight(true);
        footH = $(footer).outerHeight(true);
        contentH = viewportheight - winTitle - headH - footH;
    }

    // older versions of IE

    else {

    viewportwidth = document.getElementsByTagName('body')[0].clientWidth;
    viewportheight = document.getElementsByTagName('body')[0].clientHeight;
    }
    document.getElementById("content id").style.height = contentH + "px"; 
```

# sql-server - 仅当第 2 行具有条件 x 时才选择 row_number() 的第一行？

> ID：15480111
> 
> 赞同：0
> 
> 时间：2013-03-18T15:07:46.253
> 
> 标签：sql-server

仅当第二行具有特定条件时，我才需要选择 row_number 视图的第一行。

现在，我如何检查行的条件？

我可能会得到这样的看法：

```
row_num   value
1          1
2          1 
```

但是，我只需要第一行，如果它看起来像这样：

```
row_num   value
1          1
2          2 
```

所以，我想我需要的是这样的：

“当第二行的值为2时选择第一行”

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:44:24.290

你的问题有点不清楚，但是这个怎么样：

```
SELECT
*
FROM
yourView v1
LEFT JOIN yourView v2 ON v1.row_num = v2.row_num -1
WHERE 
MOD(v1.row_num, 2) != 0
AND v2.value = 2 
```

有了`MOD(v1.row_num, 2) != 0`你，你只会得到 row_num 奇数的行，因为我理解你的问题是这样的：

```
table
-----
type | row_num | value
a      1         x
b      2         y
a      3         z
b      4         xx 
```

您只需要 a 类型的行，并且仅当相应 b 行的值为 2 时。

这是正确的吗？

# cartopy - 强制地图的纵横比

> ID：15480113
> 
> 赞同：5
> 
> 时间：2013-03-18T15:07:48.473
> 
> 标签：cartopy

如果我定义一组具有给定高度和宽度的（地理）轴，我如何确保绘图将填充这些轴？

```
import matplotlib.pyplot as plt
import cartopy.crs as ccrs

ax = plt.axes([0.3, 0.1, 0.4, 0.8], projection=ccrs.PlateCarree())
ax.coastlines()
ax.set_global()
plt.show() 
```

这会为地图生成一个具有合理纵横比的图，但我希望它改为填充轴，从而导致图的高度大于宽度。这只是一个示例，但在现实世界中这样做很重要。

**编辑**

只是为了澄清，我实际上希望结果被扭曲，所以在我的例子中，我真的想要一张全局范围大于宽度的地图。使用`ax.set_aspect('auto')`似乎适用于`PlateCarree`和`NorthPolarStereographic`预测，但可能不适用于所有人（`OSGB`例如）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T17:07:53.460

好问题。我已经关注这个问题好几个月了（[https://github.com/SciTools/cartopy/issues/9](https://github.com/SciTools/cartopy/issues/9)）。

我最近了解了 matplotlib 的`ax.set_adjustable`方法（[其实这里](https://github.com/matplotlib/matplotlib/issues/1789)）。使用它，您可以通过更改数据限制来告诉具有固定（数据）纵横比的轴来填充它可以填充的空间。

例如：

```
import matplotlib.pyplot as plt

ax = plt.axes([0.25, 0.05, 0.5, 0.9])
ax.set_aspect(1)

ax.plot(range(10))
ax.set_adjustable('datalim')

plt.show() 
```

生成非方形图（在 x 和 y 维度上具有相等的长度比例）。

在我看来，这也可以应用于 cartopy 地图：

```
import matplotlib.pyplot as plt
import cartopy.crs as ccrs

ax = plt.axes([0.25, 0.05, 0.5, 0.9], projection=ccrs.PlateCarree())
ax.coastlines()
ax.set_adjustable('datalim')

ax.set_ylim([-90, 90])

plt.show() 
```

我想知道这是否适合您的需求？

# regex - 正则表达式过滤具有重复 3 次或更多次字符串的 url

> ID：15480115
> 
> 赞同：3
> 
> 时间：2013-03-18T15:07:54.103
> 
> 标签：regex, regular-language

我正在使用正则表达式`(\b\w+\b)\W+\1{3,}`过滤字符串重复三次或更多次的 url。我试过了`(\b\w+\b)\W+\1{3,}`，`(\b\w+\b)\W{3,}+\1`但没有帮助

[http://rubular.com/r/6IyCPyBiuW](http://rubular.com/r/6IyCPyBiuW) -> `(\b\w+\b)\W+\1`-> 这可以找到重复超过一次的单词，但我有兴趣找到重复超过三次的单词。

[http://rubular.com/r/O9NcobUsTX](http://rubular.com/r/O9NcobUsTX) -> `(\b\w+\b)\W+\1{3,}`-> 这不能找到重复三个或更多的单词

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:20:34.170

以下正则表达式有效：

```
(\w+\W)\1{2,} 
```

上面的内容也与非单词字符**完全**匹配，因此，或者，您可以使用相当丑陋的外观

```
(\w+)(?:\W+\1){2,} 
```

**细节：**

```
\w    -> single word character
\w+   -> one or more word characters
\W    -> non-word character
\1    -> back-reference to capturing group #1 (in this case, (\w+)
{2,}  -> 2 or more of (?:\W+\1)
(?:)  -> grouping without actually capturing anything 
```

[http://rubular.com/r/Trb41xxCAt](http://rubular.com/r/Trb41xxCAt)

# asp.net - 在 asp.net 中跟踪用户

> ID：15480121
> 
> 赞同：0
> 
> 时间：2013-03-18T15:08:11.990
> 
> 标签：asp.net, asp.net-membership

我们目前正在构建一个应用程序，该应用程序将让用户登录并在他们浏览网站时被跟踪。我研究了 ASP.Net Membership，但不是使用用户或管理员必须设置的用户名/密码，而是要求我们针对 LDAP 验证用户。目前我们正在使用会话，因此一旦在 LDAP 中验证了用户，我们就允许他们进入站点并将信息保存到会话变量中，然后在主页面中检查该变量以确保它存在于所有页面上，如果不是用户是反弹登录。

这是一种常见的方法，可以吗？或者有没有办法使用表单身份验证和成员资格来验证 LDAP 而不是 SQL 表。所以我们只能将成员资格用于角色，而不能用于创建用户/密码。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:01:04.483

听起来对我来说是一个非常合理的解决方案。

否则，搜索 .NET LDAP Membership Provider 并查看是否有任何结果看起来很有趣。

# c# - 时间：2019-04-10 标签：c#udp client receivebtye unreadable

> ID：15480123
> 
> 赞同：0
> 
> 时间：2013-03-18T15:08:23.747
> 
> 标签：c#, udpclient

我创建了一个发送 get server list 命令的客户端，但接收到的字节不可读。

这是我的代码：

```
 byte[] receiveBytes = udp.Receive(ref RemoteIpEndPoint);

    string[] returnData = Encoding.Default.GetString(udp.Receive(ref RemoteIpEndPoint)).Split('\\');
    textBox1.Lines = returnData; 
```

在当地人中，我看到了写入值![在此处输入图像描述](../Images/c168b1e16306e1180bef9f7752a99adb.png)

但是程序告诉我这个

![在此处输入图像描述](../Images/c8d2d861665dfe1e38215009b7d1adc7.png)

有人可以告诉我我的代码有什么问题吗？

好的，我将代码更改为

```
 yte[] receiveBytes = udp.Receive(ref RemoteIpEndPoint);
    int size = receiveBytes.Length;
    int i = 0;
    while ( i <= size-5 )
    {

        string ip = receiveBytes[i] + "." + receiveBytes[i + 1] + "." + receiveBytes[i + 2] + "." + receiveBytes[i + 3] ;
        int port = receiveBytes[i + 4] * 256 + receiveBytes[i + 5];

        textBox1.Text += ip + ":" + port.ToString() + Environment.NewLine;
        i = i + 6;
    } 
```

但收到的数据不对！

我在 php 上找到了微笑代码及其工作。

```
$data = explode("\\", $data);

for($i=0, $o=0; $i<count($data); $i++) {
    if (strlen($data[$i])>=4) { //fix

        // First 4 bytes are the ip:
        $list_server[$o]['ip']=ord($data[$i][0]).".".ord($data[$i][1]).".".ord($data[$i][2]).".".ord($data[$i][3]);

        // Last 2 bytes are the port, Takes penultimate number and multiply by 256 and sum with the last number:
        $list_server[$o]['port']=(ord($data[$i][4])*256) + ord($data[$i][5]);
        //GetName($list_server[$o]['ip'],$list_server[$o]['port']);
        $o++;
    }
} 
```

我猜不出我的代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:21:43.647

您假设整个 UDP 数据包是英文可读消息。几乎从来没有这种情况。

您需要研究您要连接的服务器使用的协议。例如，它可能会向您发送一个标识符列表，希望您返回该列表以查找该特定服务器的更多详细信息。

编辑：

您最新的 PHP 版本使用 a`\`来分隔地址，因此它们的发送方式如下：

```
127.0.0.1:8080\192.168.0.1:9000\8.8.8.8:80 
```

这将被编码为（为清楚起见添加了空格）：

```
7F000001 1F90 5C c0A80001 2328 5C 08080808 0050 
```

我在您的示例中没有看到对`\`字符的任何引用，因此您可能会将这个示例解码为（请注意，您通常无法使用它，但您修改了保护子句以隐藏此错误）：

```
127.0.0.1:8080
92.192.168.0:291
40.92.8.8:2056 
```

# java - 从 Thread 修改 Global ArrayList

> ID：15480128
> 
> 赞同：2
> 
> 时间：2013-03-18T15:08:31.637
> 
> 标签：java, android, multithreading

我想要做的是在一个线程内修改全局 ArrayList 并将这个修改后的 ArrayList 放在我的线程之外。

这是我的代码，它可以工作，但是当我从外部读取我的 ArrayList 时，它具有正确的大小，但是此 ArrayList 中的所有元素都是最后添加的元素，我的意思是如果最后一个元素具有 pollingCode,pollingType,polling Value = 0, all elements在数组中具有相同的值。

有人知道为什么会这样吗？

```
public abstract class OverlayView extends RelativeLayout {

protected ArrayList<InputEvent> eventList       = new ArrayList<InputEvent>();

public void StartEventMonitor() {
        Thread b = new Thread(new Runnable() {

                public void run() {

                    InputEvent ie= new InputEvent();
                    while (m_bMonitorOn) {
                        for (InputDevice idev:events.m_Devs) {
                            // Open more devices to see their messages

                            int pollingEvent = idev.getPollingEvent();

                                int pollingType=idev.getSuccessfulPollingType();
                                int pollingCode=idev.getSuccessfulPollingCode();
                                int pollingValue=idev.getSuccessfulPollingValue();

                                final String line =/* idev.getName()+
                                        ": " +*/ idev.getSuccessfulPollingType()+
                                        " " + idev.getSuccessfulPollingCode() + 
                                        " " + idev.getSuccessfulPollingValue() +
                                        "\n";
                                Log.d(LT, "Event:"+line);

                                ie.setCode(pollingCode);
                                ie.setType(pollingType);
                                ie.setValue(pollingValue);
                                eventList.add(ie);
                            }

                        }
                    }
                }
            });
            b.start();    
   } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:12:46.387

您是否尝试过在循环中创建一个新的 InputEvent。您只有一个，即添加列表，然后更新其中的值`InputEvent`：

```
InputEvent ie= new InputEvent();
while (m_bMonitorOn) {
    ie= new InputEvent();
 ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:14:35.617

仅供参考，这与多线程无关。

您正在重新使用相同的 InputEvent 对象。因此，您调用`setCode`的是同一 InputEvent 的 setCode 方法。添加只是每次都会添加相同的IE实例。

例如，尝试（假设列表大小 > 1）

```
if(eventList.get(0) == eventList.get(1)){
   //re using the same object
} 
```

您应该在 for 循环内移动 InputEvent 的创建分配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T15:15:04.713

无需详细研究您的代码：您的列表不是线程安全的。我建议您使用[ArrayBlockingQueue](http://developer.android.com/reference/java/util/concurrent/ArrayBlockingQueue.html)之类的东西在线程之间共享事件。这将消除重大问题，无论如何都是正确的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T15:29:01.373

你有两个错误：

首先，改变：

```
protected ArrayList<InputEvent> eventList = new ArrayList<InputEvent>(); 
```

到

```
protected final List<InputEvent> eventList = 
    Collections.synchronizedList(new ArrayList<InputEvent>()); 
```

这将使从 List 线程中添加和删除项目是安全的。现在我们需要解决添加项目的问题。对于每个事件，您都需要新的 InputEvent 实例。所以改变你的循环如下：

```
public void run() {
    while (m_bMonitorOn) {
        for (InputDevice idev:events.m_Devs) {
            InputEvent ie= new InputEvent();
               ...
            eventList.add(ie);
        }
    }
} 
```

# java - 跟踪我在迷宫中输入的单元格的最佳数据结构是什么

> ID：15480129
> 
> 赞同：0
> 
> 时间：2013-03-18T15:08:32.390
> 
> 标签：java, data-structures, hashmap, depth-first-search

这是我现在使用 HashMap 实现的方法

```
private int steps=0;
private LinkedList<MazeCell> breadCrumbs = new LinkedList<MazeCell>();
private HashMap<MazeCell, Boolean> visitedCells = new HashMap<MazeCell, Boolean>();
public int stepsToSolveMaze(MazeCell cell)
{       
    if (visitedCells.get(cell) == null)
    {
        visitedCells.put(cell, true);
        breadCrumbs.push(cell);
    } 
```

我正在使用递归算法来查找迷宫结束的步数。在我尝试迈出下一个“步骤”之前，我需要确保我没有去过我要迈出的地方。我觉得除了我去过的地方之外，还有比充满空值的 HashMap 更好的数据结构，但我真的不知道。有谁知道更好的数据结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:13:01.423

`HashMap`您应该使用[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)而不是a 。代码会更容易阅读。由于 an`HashSet`由 an 支持，因此性能是等效的`HashMap<E,Object>`。

```
private int steps=0;
private LinkedList<MazeCell> breadCrumbs = new LinkedList<MazeCell>();
private Set<MazeCell> visitedCells = new HashSet<MazeCell>();
public int stepsToSolveMaze(MazeCell cell)
{       
    if (!visitedCells.contains(cell))
    {
        visitedCells.add(cell);
        breadCrumbs.push(cell);
    }   
} 
```

一个`HashSet` *`offers constant time performance for the basic operations.`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:36:53.357

`boolean[][]`为整个矩阵设置一个怎么样？

如果您不处理太大的矩阵，我可能会选择这个选项。

1000x1000 不是那么大，整个矩阵将占用大约 1 MB 的存储空间（[取决于实现](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)）。

读/写的开销应该小于使用散列。还需要注意的是，如果散列函数不好，散列的性能可能会很糟糕。二维阵列解决方案没有这个缺点。

存储密集度较低的解决方案是`BitSet[]`1000x1000 矩阵的存储空间约为 125 KB。

请注意，您可以`null`在任何一种情况下（`boolean[]`或`BitSet`可以为空）都有值，其中有空行/列（取决于实现）以进一步减少存储空间。

**免责声明：**以上数字只是估计，我忽略了一些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:14:12.933

目前的设计还可以。如果单元格的数量是固定的，您可以将单元格保存在一个数组中，并使用位向量来表示访问过的单元格。例如，一个 32 位整数可以表示 32 个单元。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:23:42.233

[不相交集](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)

这是实现这种数据结构的最有效方式。

简而言之，您所做的是创建一个代表您的迷宫的二维整数数组。数组中的每一行列将是迷宫中的 x,y 坐标。坐标位置上的值将显示它所在的“集合”。

因此，在您的情况下，如果您访问过某个位置，请在该位置放置 1。

因此，如果未访问坐标，它将包含 0。

# django - 检索为模型字段提供支持的类的名称

> ID：15480133
> 
> 赞同：0
> 
> 时间：2013-03-18T15:08:36.223
> 
> 标签：django, django-1.3

我正在处理一些 django 代码中的一些边缘情况，并且遇到了一个仅在涉及特定字段时才会遇到的问题。

我希望能够检测模型用于字段的类，并根据结果放入备用逻辑。

我尝试`get_internal_type()`在字段实例上使用，但它只是返回`"BooleanField"`而不是预期的`"ModifiedField"`

自定义字段类型：

```
class ModifiedField(models.BooleanField):
    def __init__(self, *args, **kwargs):
        kwargs['editable'] = False
        models.BooleanField.__init__(self, *args, **kwargs)

    def pre_save(self, model_instance, add):
        value = getattr(model_instance, self.attname)

        if add:
            return True
        elif value == 2:
            return False
        else:
            return True 
```

模型：

```
class TemplateItem(models.Model):
    uuid = UUIDField(primary_key=True)
    name = models.CharField(null=False, blank=True, max_length=255)
    image = models.ImageField(_('Image'), upload_to=_template_image_upload_path,
                              storage=item_fs, null=True, blank=True)
    is_modified = ModifiedField() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:23:19.533

你试过**class** ._ *name* _ 吗？

```
g = TemplateItem.objects.get(id=1)
g.__class__.__name__ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:24:39.500

```
fld_cls = type(model_instance._meta.get_field(fieldname)) 
```

# nhibernate - 多对一公式将表名附加到 SQL 关键字

> ID：15480140
> 
> 赞同：3
> 
> 时间：2013-03-18T15:08:55.213
> 
> 标签：nhibernate, nhibernate-mapping, advantage-database-server

我正在使用旧数据库，并尝试将 char 转换为 int 以进行多对一映射。我知道这不是一个好主意，但我坚持使用模式。

我尝试使用以下映射来执行此操作，但发现 NHibernate 正在将表名别名添加到关键字`SQL_INTEGER`中。

```
<many-to-one name="host" formula="CONVERT(alloc_code, SQL_INTEGER)" /> 
```

生成 SQL

```
CONVERT(hostplacem0_.alloc_code, hostplacem0_.SQL_INTEGER) 
```

我找到[了这篇](https://stackoverflow.com/questions/3333054/nhibernate-formula-appending-template-word-to-sql-keyword)文章，但解决方案不适用于我的情况。

需要注意的一点是，我们为我们使用的 DBMS（Sybase Advantage 数据库服务器）推出了自己的方言，因为 NHibernate 不支持开箱即用。因此，我可以选择修改它来解决这个问题。我已经尝试注册`SQL_INTEGER`为关键字，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:49:00.150

在花了好几个小时浏览 NHibernate 源代码后，我终于能够确定为什么`RegisterKeyword("SQL_INTEGER")`不起作用。该方法`Template.RenderWhereStringTemplate`用于生成公式SQL。此方法调用`ToLowerInvariant()`它处理的每个字符串标记，因此当该方法检查它查找的保留关键字列表时`sql_integer`，因此找不到它。`RegisterKeyword("sql_integer")`在我们的自定义方言中更改调用后，生成了正确的 SQL：

```
CONVERT(hostplacem0_.alloc_code, SQL_INTEGER) 
```

为了完整起见，我还检查了是否可以通过访问方言类`SessionFactoryImpl`并通过反射调用来注入新的关键字`RegisterKeyword`，即

```
var factory_impl = factory as SessionFactoryImpl;
if (factory_impl != null)
{
  MethodInfo mInfoMethod = typeof(Dialect).GetMethod(
         "RegisterKeyword",
         BindingFlags.Instance | BindingFlags.NonPublic,
         Type.DefaultBinder,
         new[] { typeof(string) },
         null);

  mInfoMethod.Invoke(factory_impl.Dialect, new object[] { "sql_integer" });
} 
```

虽然这段代码工作 NHibernate 仍然发出不正确的 SQL。`Dialect.GetDialect`不幸的是，每次使用该方法请求方言对象时，NHibernate 都会创建一个新的方言实例。

我想解决这个问题的唯一方法是做我们所做的。完全创建自己的方言，就像在我们的情况下一样，或者通过从现有方言中子类化并将调用添加`RegisterKeyword`到构造函数中。

# sql-server - LINQ 是否正在重置数据库字段类型？

> ID：15480150
> 
> 赞同：0
> 
> 时间：2013-03-18T15:09:17.287
> 
> 标签：sql-server, linq, orm

我们有一个包含许多 NVARCHAR(255) 字段的表，这些字段正在强制可能的截断异常“字符串或二进制数据将被截断。语句已终止。”。

为了避免这种情况，我只需要将字段类型增加到 NVARCHAR(MAX)。但是一旦 LINQ 在数据库上运行，它会将字段类型重置回 NVARCHAR(255)。

如果我在 Management Studio 中运行正常查询，则字段类型保持不变，没有问题。

不用说，我没有浪费我一天的二进制文件的源代码。否则，我只会更新上下文类。

我是否有任何可能的转变来保留字段类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:15:42.480

根据 orm，可能有一个设置会根据您的代码库中的域模型强制更新 db 模式（如 EntityFramework 的 CodeFirst 或 NHibernate 中的类似事物）。因此，最好查看您的应用程序的源代码，并专门设置 orm。

# php - 如何使用正则表达式查找其中不包含空格的一定长度的字符串

> ID：15480154
> 
> 赞同：-2
> 
> 时间：2013-03-18T15:09:30.170
> 
> 标签：php, regex

我想使用 PHP 的 preg_replace 在字符串中搜索任何大于 100 个字符且没有空格的子字符串，并将其替换为任何内容。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:14:17.177

`/\s*\S{101}\S*\s*/`

这也会删除已删除部分周围的空白。

# c++ - 在 Visual Studio 2005 中使用 VC++ 的气球工具提示图标

> ID：15480155
> 
> 赞同：0
> 
> 时间：2013-03-18T15:09:36.310
> 
> 标签：c++, visual-c++-2005, balloon-tip

我正在尝试在 Visual Studio 2005 中使用 VC++ 创建一个 BalloonToolTipIcon。我能够创建一个工具提示，如图所示“ [http://www.c-sharpcorner.com/UploadFile/mahesh/tooltip-in-C-Sharp /Images/ToolTipImg2.jpg](http://www.c-sharpcorner.com/UploadFile/mahesh/tooltip-in-C-Sharp/Images/ToolTipImg2.jpg) ”但我希望它是这种类型的“ [http://www.quantumsoftware.com.au/Images/Products/WindowsFormsComponents/BalloonToolTip.gif](http://www.quantumsoftware.com.au/Images/Products/WindowsFormsComponents/BalloonToolTip.gif) ”...

我正在使用以下代码来创建此工具提示。谁能告诉我我没有正确设置哪个属性？

```
NOTIFYICONDATA nidApp;
nidApp.cbSize = sizeof(NOTIFYICONDATA); // sizeof the struct in bytes
nidApp.hWnd = (HWND) hWnd;              //handle of the window which will process this app. messages
nidApp.uID = IDI_SYSTRAYDEMO;           //ID of the icon that willl appear in the system tray
nidApp.uFlags = NIF_INFO;
nidApp.hIcon = hMainIcon; // handle of the Icon to be displayed, obtained from LoadIcon
nidApp.uCallbackMessage = WM_USER_SHELLICON;
wcscpy_s(nidApp.szInfo, szinfo);
LoadString(hInstance, IDS_APPTOOLTIP,nidApp.szTip,MAX_LOADSTRING);
// Add the balloon tip
Shell_NotifyIcon(NIM_ADD, &nidApp);     //Show the systary icon 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:01:11.067

1.  你是`NIM_SETVERSION`先打电话的吗？你应该。
2.  'i' 图标看起来像`dwInfoFlags=NIIF_INFO`已设置。该图标位于 的左侧`szInfoTitle`，因此您也应该设置它。（我认为您是，正在查看屏幕截图，但我在代码中没有看到）。

# css - Bootstrap + Fontawesome + IE7 = 带图标的按钮上没有标题

> ID：15480157
> 
> 赞同：0
> 
> 时间：2013-03-18T15:09:38.753
> 
> 标签：css, twitter-bootstrap, internet-explorer-7, font-awesome

在使用这样的按钮组时，我遇到了 Bootstrap、Fontawesome 和 IE7 的问题：

```
<div class="btn-group">
    <a href="some-url.html" class="btn icon-circle-arrow-left"> Back</a>
    <a href="some-other-url.html" class="btn icon-edit"> Edit</a>
</div> 
```

我已将 CSS 文件包含在文档 (HTML5) 的 HEAD 中：

```
<link href="/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/fontawesome/css/font-awesome.min.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/fontawesome/css/font-awesome-ie7.min.css" media="screen" rel="stylesheet" type="text/css" /> 
```

它在大多数现代浏览器中按预期显示。但在 IE7 中，按钮上的标题文本消失了。请参阅随附的屏幕截图（WinXP 上的 IE7、WinXP 上的 IE8、OS X 上的 Safari）。在IE8上使用F12开发者工具并在兼容模式下运行时，我看到标签中的text-node只包含一个正方形（开发工具无法显示的图标）；节点中的文本消失了。手动更改它会删除图标并显示文本。

有人对我如何解决此问题有任何建议吗？不幸的是，放弃对 IE7 的支持不是一种选择。没关系，它看起来很难看.. :-)

![例子](../Images/94ac6ed468385895774c7cffd68ba212.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:15:17.020

这是意料之中的，因为由于 IE7 缺乏`:before`/`:after`支持，他们正在使用 CSS 表达式来生成您需要的内容。

[https://github.com/FortAwesome/Font-Awesome/blob/master/css/font-awesome-ie7.min.css](https://github.com/FortAwesome/Font-Awesome/blob/master/css/font-awesome-ie7.min.css)

```
.icon-glass{*zoom:expression(this.runtimeStyle['zoom'] = '1',this.innerHTML = '&#xf000;')} 
```

在这种情况下，您必须使用一个空元素：

```
<a href="some-url.html"><span class="btn icon-circle-arrow-left"></span> Back</a> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T15:14:24.993

您是否尝试过在 IE 6-8 中包含 html5shiv 以支持 HTML5？[https://code.google.com/p/html5shiv/](https://code.google.com/p/html5shiv/)

# grails - grails findWhere不等于

> ID：15480158
> 
> 赞同：5
> 
> 时间：2013-03-18T15:09:38.933
> 
> 标签：grails, grails-orm

有没有办法使用[`findWhere`](http://grails.org/doc/2.1.0/ref/Domain%20Classes/findWhere.html)和不相等的价值（试图使用它与标准）？

例如

```
Books.findWhere('sale' : true, 'category': ne('exclude me') ) 
```

我有一个可行的解决方案，但想知道是否有一种使用方法，`findWhere`我发现它更易于阅读。

```
def result = Books.createCriteria().get{
            eq('sale', true)
            ne("category", 'exclude me')
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:25:46.750

您可以使用任一动态查找器方法：

```
Books.findAllBySaleAndCategoryNotEqual(true, 'exclude me') 
```

或 where 查询（使用`DetachedCriteria`：

```
Books.findAll {
     (sale == true) && (category != 'exclude me')
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:29:34.053

我不知道有一种方法可以做到这一点，`findWhere`但是对于两个属性的动态查找器有一个很好的语法，其中一个是`boolean`

```
Books.findSaleByCategoryNotEqual('exclude me') 
```

（或者`findNotSaleBy...`如果你想要销售`false`）。

# javascript - 在 for 循环中动态更改 ID 属性

> ID：15480160
> 
> 赞同：0
> 
> 时间：2013-03-18T15:09:42.120
> 
> 标签：javascript

标题可能具有误导性，但我会尽力解释。

我有一个获取某些 XML 节点值的 Ajax 函数。现在我想用 xml-nodes 的值更改每个创建元素的 ID。

我有这样的东西。XML 文件

```
<notes>
    <note>
        <text>Hello Dog</text>
        <id>1</id>
    </note>
    <note>
        <text>Hello Cat</text>
        <id>1</id>
    </note>
</notes> 
```

现在调用每个文本节点我使用一个循环

```
stickers = myXML.getElementsByTagName("note");
for( i = 0; i < stickers.length; i++) {
    var idNod =  (stickers[i].getElementsByTagName("id")[0].childNodes[0].nodeValue);
    var textNod = (stickers[i].getElementsByTagName("text")[0].childNodes[0].nodeValue);
    add_sticker(idNod);
    add_sticker(textNod);
} 
```

// add_sticker() 是动态创建元素的函数...

所以这个的输出会变成

```
Note1 = Hello Dog id 1,
Note2 = Hello Cat id 2 
```

但我想以某种方式使用 idNod 并将其用作 ID 属性，所以它看起来像这样

```
<div id=1>hello dog</div>
<div id=2>hello Cat</div> 
```

在我输入的循环中

```
stickers[i].setAttribute("id", idNod); 
```

但这没有做任何事情，也没有给我一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:20:48.350

为什么你`add_stickers`被调用两次来创建一个元素？您应该设计您的函数以获取两个值并创建元素。

```
function add_sticker(idNod, textNod) {
    var div = document.createElement("div");
    div.id = idNod;
    div.innerHtml = textNod;

    //Other parts
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:16:22.397

我不确切知道 add_stickers 做了什么，所以我只是在黑暗中刺了一下。我将创建一个同时传递 idNod 和 textNod 值的函数，然后输出所需的 div

```
function addValues(id, text) {
   var div = "<div id=\"" + id + "\">" + text + "</div>";

   //add code here to append the above div to whatever element you need it to go to.
} 
```

# c# - 将 4 个相似的图像打印到一个文档 c#

> ID：15480161
> 
> 赞同：0
> 
> 时间：2013-03-18T15:09:44.207
> 
> 标签：c#, graphics, printing, printdocument

这次我有一个希望是简单的问题：我想打印循环通过并以每页 2x2 打印的项目。我为此使用了一个循环和一个 Rectangle 数组。不过，这可以改变。打印到图形特定部分的最简单方法是什么？上下文是我在打印事件中使用提供的 e.Graphics 对象执行此操作 - 当前代码如下所示：

```
public void BeginPrintEvent(object sender, PrintPageEventArgs e)
{
    SizeF TestSize;
    string text = "";
    Image labelImage = new Bitmap((int)e.Graphics.DpiX, (int)e.Graphics.DpiY, e.Graphics);
    Graphics g = e.Graphics;
    Rectangle[] rect = new[] { new Rectangle(0,   0,   419, 581),
                               new Rectangle(419, 0,   419, 581),
                               new Rectangle(0,   581, 419, 581),
                               new Rectangle(419, 581, 419, 581) };

    try
    {
        for (int lblNum = 0; lblNum < 4); lblNum++)
        {
            g.DrawString( // lots of stuffs
            e.Graphics.DrawImage(labelImage, rect[lblNum]);
        }
    }
    catch (Exception exc)
    {
        // Report to user
    }
} 
```

我似乎无法正确成像，尺寸往往非常小，因此大部分图像都丢失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:35:18.243

将其计算为：

```
 Image labelImage = new Bitmap(419 * ((int)e.Graphics.DpiX / 100), 581 * ((int)e.Graphics.DpiX / 100), e.Graphics); 
```

为通过 Sinatr 注意到这篇文章而欢呼:)

# hibernate - 如何处理 org.hibernate.ConstraintViolationException

> ID：15480164
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:10:05.947
> 
> 标签：hibernate, exception-handling

获得 DuplicateEntry (org.hibernate.ContraintViolaionException) 后系统崩溃。

错误描述：错误：键 'PRIMARY' 的重复条目 'FELIPE'

我该如何处理这种情况，以便系统可以继续其流程。

我的保存方法：

```
public void saveDB(Object object)
{
    Session session = HibernateUtil.getSession();
    HibernateUtil.beginTransaction();
    try
    {
        session.save(object);
        HibernateUtil.commit();
    }
    catch(ConstraintViolationException e)
    {
        HibernateUtil.rollback();
    }
    catch (Exception ex) {
        HibernateUtil.rollback();
    }
    finally {
        HibernateUtil.closeSession();
    }
} 
```

实际上，我想知道 MySQL 是否可以在重复输入异常后自行恢复，因为在该异常之后，该表似乎被锁定了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T09:54:18.707

在休眠 cfg 文件 hibernate.connection.isolation 中使用以下属性，值为 2 以避免脏读。

尝试在 session.save(object); 中使用要使用的本地对象；例如，如果我们在保存方法中使用一个对象，该对象要么在类级别声明，要么在循环外部声明，然后将其设为本地。Hibernate 在 jvm 中保留对象引用

# audio - 考虑有一个音频文件，其中一个人阅读了一个句子。如何使用 C、C++ 或 java 程序知道演讲的开始和结束时间

> ID：15480172
> 
> 赞同：0
> 
> 时间：2013-03-18T15:10:28.737
> 
> 标签：audio

我正在研究自动字幕生成项目。我的方法是 1\. 音频提取（使用 ffmpeg 完成） 2\. 语音转文本（可以使用 sphinx 4 完成，但不准确） 3\. 字幕生成。（这里我需要帮助）

考虑有一个音频文件，其中一个人阅读了一个句子。如何使用 C、C++ 或 java 程序知道演讲的开始和结束时间

我们需要字幕文件中特定行的开始和结束时间。那么在这里如何检索谈话开始和结束的时间？

有任何想法吗？

是否可以使用声学公式来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-25T13:35:58.347

我知道已经很晚了。但我已经使用 sphinx4 完成了这项工作。您不需要音频的开始时间。Sphinx4 将为每个识别的单词提供时间。你可以用那个。[这篇](http://hv.diva-portal.org/smash/get/diva2:241802/FULLTEXT01.pdf)研究论文很有帮助。

# jquery - jQuery Bootstrap 对话框 2 表单验证

> ID：15480175
> 
> 赞同：1
> 
> 时间：2013-03-18T15:10:48.503
> 
> 标签：jquery, twitter-bootstrap, dialog, modal-dialog

我正在尝试使用 Nikku 的引导插件创建一个向导，但无法弄清楚如何集成 jQuery 验证。

[https://github.com/Nikku/jquery-bootstrap-scripting](https://github.com/Nikku/jquery-bootstrap-scripting)

我认为我可以`beforeSend`用作触发验证的触发器，但即使我可以阻止 ajax 调用，对话框已经开始更新。

```
$(document).delegate(".modal", "dialog2.before-send", function(e, xhr, settings) {
    if(settings.type == "POST"){
        // trigger validation abort if fail
        xhr.abort();
    }
}); 
```

向导 html

```
<!DOCTYPE html>
<html>
    <head>
        <title>jQuery dialog2 plugin</title>
    </head>
    <body>
        <form class="ajax" method="post" action="nextpage.htm">
            <fieldset>
                    <input type="text" name="name" id="name" />
            </fieldset>
            <div class="form-actions">
                <input type="submit" value="Send" class="btn btn-primary" />
                <a class="btn close-dialog" href="#">Cancel</a>
            </div>
        </form>
    </body>
</html> 
```

任何指针？

# php - 邮件中的附件 php

> ID：15480185
> 
> 赞同：0
> 
> 时间：2013-03-18T15:11:29.143
> 
> 标签：php, forms, file-upload, email-attachments

大家晚上好，我写信是因为我无法将使用表单加载的文件附加到电子邮件中。我不明白在将其附加到文件夹之前是否必须保存....这是我的代码，邮件到达，但没有附件。有人告诉我我错在哪里？

```
$allegato=$_FILES['userfile']['tmp_name'];
$allegato_name=$_FILES['userfile']['name'];
$allegato_tipo=$_FILES['userfile']['type'];
$uploaddir = '/uploads/';
$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);
$headers = 'From: '.$email.'' . "\r\n" .
        'Reply-To: pir.stefania@tiscali.it' . "\r\n" .
        'X-Mailer: PHP/' . phpversion();

            ;

 if ($_FILES["userfile"]["error"] > 0){
      echo "Return Code: " . $_FILES["userfile"]["error"] . "<br>";
  }else{
     if (file_exists("uploads/" . $_FILES["userfile"]["name"])){
        echo $_FILES["userfile"]["name"] . " already exists. ";
     }else{
        move_uploaded_file($_FILES["userfile"]["tmp_name"],
        "uploads/" . $_FILES["userfile"]["name"]);
        echo "Stored in: " . "uploads/" . $_FILES["userfile"]["name"];
     }
   }
    if(is_uploaded_file($allegato)){
        $file = fopen($allegato,'rb');
        $data = fread($file, filesize($allegato));
        fclose($file);

        $data = chunk_split(base64_encode($data));

        $semi_rand = md5(time());
        $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

        $headers .= "\nMIME-Version: 1.0\n";
        $headers .= "Content-Type: multipart/mixed;\n";
        $headers .= " boundary=\"{$mime_boundary}\"";

        $msg .= "This is a multi-part message in MIME format.\n\n";

        $msg .= "--{$mime_boundary}\n";

        $msg .= "Content-Type: text/plain; charset=\"iso-8859-1\"\n";
        $msg .= "Content-Transfer-Encoding: 7bit\n\n";
        $msg .= $messaggio . "\n\n";

        $msg .= "--{$mime_boundary}\n";

        $msg .= "Content-Disposition: attachment;\n";
        $msg .= " filename=\"{$allegato_name}\"\n";
        $msg .= "Content-Transfer-Encoding: base64\n\n";
        $msg .= $data . "\n\n";

        $msg .= "--{$mime_boundary}--\n
     }else{
        $msg = $messaggio;
     }

      if (mail($destinatario, $oggetto, $msg, $headers)){
            echo "<p>Mail inviata con successo!</p>";
        }else{
            echo "<p>Errore!</p>";
       } 
```

/*精细脚本*/

```
 mail($destinatario, $oggetto, $messaggio, $headers) ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:17:53.693

当您进入附件时，我建议您使用[PHPMailer 。](https://code.google.com/a/apache-extras.org/p/phpmailer/)一个简单的附件示例：

```
<?php
    require_once ('../class.phpmailer.php');

    $mail = new PHPMailer();
    // defaults to using php "mail()"

    $mail -> IsSendmail();
    // telling the class to use SendMail transport

    $body = file_get_contents('contents.html');
    $body = preg_replace('/[\]/i', '', $body);

    $mail -> SetFrom('name@yourdomain.com', 'First Last');

    $mail -> AddReplyTo("name@yourdomain.com", "First Last");

    $address = "whoto@otherdomain.com";
    $mail -> AddAddress($address, "John Doe");

    $mail -> Subject = "PHPMailer Test Subject via Sendmail, basic";

    $mail -> AltBody = "To view the message, please use an HTML compatible email viewer!";
    // optional, comment out and test

    $mail -> MsgHTML($body);

    $mail -> AddAttachment("images/phpmailer.gif");
    // attachment
    $mail -> AddAttachment("images/phpmailer_mini.gif");
    // attachment

    if (!$mail -> Send()) {
        echo "Mailer Error: " . $mail -> ErrorInfo;
    } else {
        echo "Message sent!";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:18:57.223

如果您使用像**Swiftmailer**这样的 Mailer 类来处理如此复杂的任务，那将是最好的。

SwiftMailer 提供了一个`attach()`用于将文件附加到电子邮件的函数。( [http://swiftmailer.org/docs/messages.html](http://swiftmailer.org/docs/messages.html) )

# c# - 如何将 KendoUI Validator 属性添加到 HTML 辅助函数生成的字段？

> ID：15480187
> 
> 赞同：0
> 
> 时间：2013-03-18T15:11:32.460
> 
> 标签：c#, asp.net, asp.net-mvc, razor, kendo-ui

我正在尝试使用 KendoUI Validator 实现一个表单，它需要对需要验证的表单字段进行属性修饰。

下面是我想要呈现的所需 html：

```
<input type="email" required> 
```

如何`@Html.EditorFor`通过 Razor 视图引擎呈现此 html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:26:19.057

您应该能够使用自定义模板，使用[带有模板名称的 EditorFor 覆盖](http://msdn.microsoft.com/en-us/library/ee407414%28v=vs.98%29.aspx)。[如 Brad Wilson](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)所述，将自定义模板添加到您的项目中，然后您可以使用此模板自定义电子邮件字段的外观。基本设置是：

在视图文件夹中，在视图的控制器文件夹中创建一个 EditorTemplates 文件夹（例如，对于 HomeController，在 Views/Home/EditorTemplates 中创建文件夹）。添加一个将出现的模板，其中模型定义为正在编辑的值，然后添加您想要的标记，如上所述。

然后你只需要使用`Html.EditorFor(i => i.X, "NameofTemplate");`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:10:06.130

基本上，如果您要编辑一封电子邮件（要在其上启用验证），您将需要使用 TextBox。

要生成电子邮件类型的输入，您可以像这样设置其 html 属性：

```
@(Html.TextBoxFor(x => x.Name, new { type="email"})) 
```

# asp.net-mvc - MVC 用户授权但会话变量丢失

> ID：15480188
> 
> 赞同：0
> 
> 时间：2013-03-18T15:11:41.687
> 
> 标签：asp.net-mvc, session-variables, filterattribute

当用户返回我的站点时，由于我正在使用的 ASP.NETMembershipProvider 的 Auth Cookie (?)，他们显示为仍处于登录状态。但是会话变量不再可用。我添加了一个自定义操作过滤器属性，我将在其中检查会话变量是否可用，但是我似乎无法从过滤器属性访问会话变量。

我不认为我想将 CustID 存储在 cookie 中，一旦我发现它们是否被授权，我宁愿找到一种方法将其从数据库中拉回来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:50:06.407

auth cookie 的过期时间与会话无关，因此它们的过期时间是相互独立的。

简单的解决方案是将会话超时设置为一个较大的值，这样如果他们登录（身份验证 cookie 有效），那么会话仍然可用。

# javascript - 将 json 对象动态添加到 Sencha 选择字段？

> ID：15480194
> 
> 赞同：0
> 
> 时间：2013-03-18T15:12:00.327
> 
> 标签：javascript, json, sencha-touch, sencha-touch-2

我有一个 json 对象。如何将此添加到 sencha 选择字段？

```
{

   "info":{
      "sd-1dd2-11b2-0000-242d50cf1f9f":"root",
      "sd-8d30-11e2-98f5-bf6df0e83168":"WS123",
      "sd-8d31-11e2-956a-8f722b3d14b8":"test"
   }
} 
```

将项目添加到选择字段的代码

```
 {

                        xtype: 'selectfield',
                        autoLoad: true,

                        label:'Parent category',
                        name: 'parent_uuid',

                        options : [

                            {text: 'Select category',  value: 'select'},
                            {text: 'Root',  value: 'sd-1dd2-11b2-0000-242d50cf1f9f'}
    ]

} 
```

如何将我的 json 对象转换为这种格式 `{text: 'Root', value: 'sd-1dd2-11b2-0000-242d50cf1f9f'}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:23:21.887

干得好

```
var json = {
   "info":{
      "sd-1dd2-11b2-0000-242d50cf1f9f":"root",
      "sd-8d30-11e2-98f5-bf6df0e83168":"WS123",
      "sd-8d31-11e2-956a-8f722b3d14b8":"test"
   }
},
    options = [],
    i;

for (i in json.info) {
  options.push({text: json.info[i], value: i})
} 
```

然后您只需要获取您的选择字段并使用`add`添加选项的功能

```
selectfield.add(options); 
```

希望这有帮助

# ruby-on-rails - 测试 HTTP 请求不是在 Rails 中进行的

> ID：15480199
> 
> 赞同：1
> 
> 时间：2013-03-18T15:12:22.307
> 
> 标签：ruby-on-rails, rspec, fakeweb

测试是否未发出 HTTP 请求的最简单方法是什么？

比如说，如果用户不提供用户名，我希望我的应用程序不要向远程服务器发送 API 调用。

我应该在我的 Rails 应用程序中编写什么 RSpec 测试来测试从未发出过 HTTP 请求？fakeweb 能以某种方式帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:27:00.623

您可能应该尝试[WebMock](https://github.com/bblimke/webmock)。
它允许您检查某些 url 被请求的次数。

```
assert_requested :post, "http://www.example.com", :times => 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-14T15:49:22.663

假设我们有以下代码向 GitHub 的 API 发出条件请求。

```
if condition
  user = Octokit.user 'dideler'
end 
```

使用 RSpec，您可以测试对象是否没有收到方法调用的消息。

```
expect(Octokit).to_not receive(:user) 
```

如果通过，则表示未提出请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:18:04.590

我想我明白你在问什么。您只想错误检查以查看请求是否已发送或有效。

如果用户名！= 空白 --> api 调用，否则返回“您没有输入用户名”。

或者您可以使用 api 的返回数据来检查请求是否有效。

我希望这有帮助。

# c++ - 特定格式的字符串解析

> ID：15480201
> 
> 赞同：0
> 
> 时间：2013-03-18T15:12:25.947
> 
> 标签：c++, string, parsing

`string = std::vector<int>(6,0)`并希望它显示为`{ 0 0 0 0 0 0 }`

我试过这个

```
#include <iostream>
using namespace std;

int main()
{
    string str = "std::vector<int>(6,0)" ;

    unsigned found = str.find('(');
    char c = str[found+1];
    int i = c - '0'; 
    char ch = str[found+3];
    int j = ch - '0';

    str = "{ ";
    for(int k = 0; k < i ; k++)
    {
        str = str + ch + " " ;
    }

    str = str + " }";

    cout << str << endl; 

    return 0;
} 
```

它有效，但看起来效率不高。有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:26:56.837

当前版本的代码仅适用于向量和元素大小的单个数字值。使用`std::stringstream`更好的解决方案：

```
#include <iostream>
#include <sstream>

using namespace std;

int main()
{

  string str = "std::vector<int>(6,0)" ;

  unsigned found = str.find('(');
  string arguments = str.substr(found);

  // Replace non-numeric chars with spaces.
  for (unsigned i=0;i<arguments.size(); ++i) {
    if (!isdigit(arguments[i])) {
      arguments[i] = ' ';
    }
  }

  std::istringstream iss(arguments);
  int size;
  // String to avoid having to cast later on
  string value;
  iss >> size >> value;

  string res = "{;

  for (int i = 0; i < size; ++i) {
    res += " " + value;
  }
  res += " }";

  cout << res;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:28:52.237

这是（希望）更灵活的代码的另一个版本。它找到“（”，然后是“）”，用逗号分隔它们，去除所有空白字符并将数字转换为整数。然后将它们打印出来。

```
#include <string>
#include <iostream>
using namespace std;

//these three functions are taken from here: 
//http://stackoverflow.com/questions/216823/whats-the-best-way-to-trim-stdstring

#include <algorithm> 
#include <functional> 
#include <cctype>
#include <locale>

static inline std::string &ltrim(std::string &s) {
        s.erase(s.begin(), std::find_if(s.begin(), s.end(), std::not1(std::ptr_fun<int, int>(std::isspace))));
        return s;
}

// trim from end
static inline std::string &rtrim(std::string &s) {
        s.erase(std::find_if(s.rbegin(), s.rend(), std::not1(std::ptr_fun<int, int>(std::isspace))).base(), s.end());
        return s;
}

// trim from both ends
static inline std::string &trim(std::string &s) {
        return ltrim(rtrim(s));
}

int main()
{
    string s = "std::vector<int>(612,30)";

    int paren_start = s.find("(")+1;

    string numbers = s.substr(paren_start, s.find(")")-paren_start);
    int comma_pos = numbers.find(",");

    string first_num = numbers.substr(0, comma_pos);
    string second_num = numbers.substr(comma_pos+1, numbers.size()-comma_pos);

    int first = atoi(trim(first_num).c_str());
    int second = atoi(trim(second_num).c_str());

    cout << "{" << endl;
    for(int i=0; i<first; i++)
    {
        cout << second << " ";
    }
    cout << "}" << endl;

    return 0;
} 
```

# .net - 是否有 SQL 等待光标？

> ID：15480204
> 
> 赞同：0
> 
> 时间：2013-03-18T15:12:32.543
> 
> 标签：.net

我注意到在 Delphi 中，有一个 SQL 等待光标，它显示一个沙漏，下面有字母 SQL。

.NET 中是否有类似的可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:14:43.657

默认情况下不是。您可以设置自定义光标，但默认情况下 .Net 仅公开在 windows 中配置的光标。

# mysql - 具有复杂聚合结果的 MYSQL 查询

> ID：15480210
> 
> 赞同：0
> 
> 时间：2013-03-18T15:12:47.857
> 
> 标签：mysql, sql, inner-query

这是场景。我有两个这样的表

经验：（id，title）

user_experience：（id，experience_id，created_date）

当用户将体验添加到他的待办事项列表时，会在 user_experience 中添加一条记录。现在，我想获取体验达到 2、5 或 10 个列表者里程碑的日期。

所需结果：id (experience.id)、title、created_date、count（列出体验的用户数）

如果一个体验达到了10个listers，那么结果应该包括它得到2个和5个listers的时间对应的记录。

我正在使用此查询来获取所需的结果，并寻找更好的“查询”。

```
SELECT e.id, e.title, ue_res.created_date, ue_res.count FROM
experience e INNER JOIN
(
    SELECT ue.experience_id, (
        SELECT COUNT(uee.id) FROM user_experience uee WHERE uee.experience_id = ue.experience_id AND uee.created_date <= ue.created_date
    ) AS `count`, ue.created_date FROM user_experience ue
) ue_res
ON e.id = ue_res.experience_id
WHERE ue_res.uecount IN (2,5,10)
ORDER BY e.id,ue_res.created_date ASC 
```

我无法为成就创建另一个表，因为里程碑可以随时更改，所以我只是在寻找查询。

这里有一些示例数据

经验样本数据：

```
1   |   Bunjee jump from Eifel Tower
2   |   Surf in Rio
3   |   Fly over Grand Canyon
4   |   Go to a Mexican resturant 
```

user_experience 的样本数据：

```
1   |   1   |   2013-03-01
2   |   4   |   2013-03-02
3   |   1   |   2013-03-03
4   |   3   |   2013-03-04
5   |   2   |   2013-03-05
6   |   3   |   2013-03-06
7   |   4   |   2013-03-07
8   |   1   |   2013-03-08
9   |   1   |   2013-03-09
10  |   1   |   2013-03-10
11  |   3   |   2013-03-11
12  |   2   |   2013-03-12
13  |   2   |   2013-03-13 
```

样本数据的结果：

```
1   |   Bunjee jump from Eifel Tower    |   2013-03-03  |   2
3   |   Fly over Grand Canyon           |   2013-03-06  |   2
4   |   Go to a Mexican resturant       |   2013-03-07  |   2
1   |   Bunjee jump from Eifel Tower    |   2013-03-10  |   5
2   |   Surf in Rio                     |   2013-03-12  |   2 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:10:46.740

此查询可能会解决问题：

```
SET @helper:=0;

SET @oldid:=0;

SELECT ue.experience_id AS id,
       e.title,
       ue.created_date,
       ue.helper        AS milestone
FROM   (SELECT ue.id,
               ue.experience_id,
               ue.created_date,
               CASE @oldid
                 WHEN ue.experience_id THEN ( @helper := @helper + 1 )
                 ELSE ( @helper := 1 )
               end                            AS helper,
               ( @oldid := ue.experience_id ) oldid
        FROM   user_experience ue
        ORDER  BY ue.experience_id ASC,
                  ue.created_date ASC) ue
       JOIN experience e
         ON ( e.id = ue.experience_id )
WHERE  ue.helper IN ( 2, 5, 10 ); 
```

请注意，数据排序是使运行变量起作用的原因。

# c# - 自动将 SQL 返回到通用列表

> ID：15480211
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:12:48.593
> 
> 标签：c#, sql, linq

我有一个连接到数据库并提取数据的功能。

数据返回到 Expando 对象。

然后我通常将expando对象转换为一个类，在动态行上使用linq语句但是，我想知道我的SQL代码中是否有一个包含所有字段的类，系统有没有办法自动映射到每个我班上的领域？

IE

```
public List<CLIENTALL> FullTableClients()
{
  const string abstractStatement =@"SELECT * FROM CLIENT WHERE CLINO = '0000001'";

  var sqlStatement = new SqlStatements(abstractStatement, _reportingBackOffice.GenerateTables);

  var data = _reportingBackOffice.ExecuteQuery(sqlStatement);

  var name = (from dynamic line in dataArray
              select new CLIENTALL()
              {
                ClientNumber = line.?????
                //normally I would write line.ClientNumber
                }).ToList();

  return name;
} 
```

正如您在上面看到的，我需要一种方法来几乎引用类中的字段名称，并在我从行分配时将其用作变量？

谢谢，

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:22:27.103

如果你有一个 linq2SQL 数据上下文，你可以写：

```
const string abstractStatement = @"SELECT * FROM CLIENT WHERE CLINO = '0000001'";
using (var db = new MyDataContext())
  var col = db.ExecuteQuery<CLIENTALL>(abstractStatement).ToList(); 
```

它会将 SQL 语句中的列映射到`CLIENTALL`

# python - 使用 Python 近似查找值

> ID：15480217
> 
> 赞同：0
> 
> 时间：2013-03-18T15:13:11.143
> 
> 标签：python, approximation

所以我有一个 alpha 向量，一个 beta 向量，当所有估计值（对于 alpha 的 i 到 n 和 beta 的 i 到 n）的总和等于 60 时，我试图找到一个 theta。

`math.exp(alpha[i] * (theta - beta[i])) / (1 + math.exp(alpha[i] * (theta - beta[i])`

![在此处输入图像描述](../Images/bfe782e8152aba95c56d672dbfb21933.png)

基本上我所做的是从 theta = 0.0001 开始，遍历，计算所有这些总和，当它低于 60 时，继续每次添加 0.0001，而高于 60 意味着。

我以这种方式找到了 theta 值。问题是，我使用 Python 花了大约 60 秒，才找到 0.456 的 theta。

找到这个 theta 的更快方法是什么（因为我想将它应用于其他数据）？

```
def CalcTheta(score, alpha, beta):
    theta = 0.0001
    estimate = [score-1]

    while(sum(estimate) < score):

        theta += 0.00001

        for x in range(len(beta)):
            if x == 0:
                estimate = []

            estimate.append(math.exp(alpha[x] * (theta - beta[x]))  / (1 +  math.exp(alpha[x] * (theta - beta[x]))))

    return(theta) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:58:29.973

您可以使用`zip`and`sum`来计算您的目标函数：

```
 def f(theta):
    return sum(1/(1 + exp(a*(b-theta)))) for a,b in zip(alpha, beta)) 
```

# maven - Tomcat - Maven 插件：运行 webapps 但不是当前项目

> ID：15480218
> 
> 赞同：7
> 
> 时间：2013-03-18T15:13:18.277
> 
> 标签：maven, web-applications, tomcat7, maven-tomcat-plugin

允许将`tomcat7-maven-plugin`当前项目作为 Web 应用程序运行，并且`<webapps>`可以指定将同时加载到 tomcat 中的其他项目。

我的项目不是 Web 应用程序，但它访问 webapps 提供的服务。那么如何在不将项目本身作为 webapp 运行的情况下部署多个 webapps 呢？以下 Maven 片段导致 FileNotFoundExceptions，因为找不到 context.xml。

```
<plugin>
  <groupId>org.apache.tomcat.maven</groupId>
  <artifactId>tomcat7-maven-plugin</artifactId>
  <version>2.0</version>
  <executions>
    <execution>
      <id>run-tomcat</id>
      <phase>${tomcat.run.phase}</phase>
      <goals><goal>run-war-only</goal></goals>
      <configuration>
        <webapps>
          <webapp>
            <contextPath>/my/app1</contextPath>
            <groupId>...</groupId> 
            <artifactId>...</artifactId>
            <version>...</version>
            <type>war</type>    
            <asWebapp>true</asWebapp>
          </webapp>
          ... possibly more webapps ...
        </webapps> 
      </configuration>
    </execution>
    <execution>
      <id>tomcat-shutdown</id>
      <phase>${tomcat.shutdown.phase}</phase>
      <goals><goal>shutdown</goal></goals>
    </execution>
  </executions>
</plugin> 
```

**解决方法：**

即使您的应用程序本身不是 webapp，您也需要为其配置 a`path`和 a `contextFile`：

```
<configuration>
    <path>/my/non/existing/webapp</path>
    <contextFile>src/test/resources/context.xml</contextFile>
    <webapps>
    ... 
```

指定的`context.xml`文件必须存在。以下对我有用，即使该`web.xml`文件不存在：

```
<?xml version="1.0" encoding="utf-8"?>
<Context path="/my/non/existing/webapp">
    <WatchedResource>WEB-INF/web.xml</WatchedResource>
</Context> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-11T01:35:50.933

这可能是在滥用 tomcat maven 插件，但这是我找到的解决方案。顺便说一句，您的假上下文文件解决方案对我不起作用，因为我需要运行不同的 web 应用程序，而我的应用程序也是一个 web 应用程序。

有一个 jira 可以为我们的问题提供更好的解决方案。请参阅[https://issues.apache.org/jira/browse/MTOMCAT-228](https://issues.apache.org/jira/browse/MTOMCAT-228)。现在开始我的解决方案......

首先，您需要将战争复制到一个目录。我建议使用目标目录，以便轻松清理它。取决于您是要支持 run 还是 run-war 目标，取决于您是只是复制战争还是复制战争并解压缩它。

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-dependency-plugin</artifactId>
  <version>${maven-dependency-plugin.version}</version>
  <executions>
    <execution>
      <id>copy-war</id>
      <goals>
        <goal>copy</goal>
      </goals>
      <configuration>
        <artifactItems>
          <artifactItem>
            <groupId>org.foo</groupId>
            <artifactId>bar</artifactId>
            <version>${bar.version}</version>
            <type>war</type>
            <overWrite>true</overWrite>
            <outputDirectory>${project.build.directory}/bar/</outputDirectory>
          </artifactItem>
        </artifactItems>
        <stripVersion>true</stripVersion>
      </configuration>
    </execution>
    <execution>
      <id>copy-war-unpack</id>
      <goals>
        <goal>unpack</goal>
      </goals>
      <configuration>
        <artifactItems>
          <artifactItem>
            <groupId>org.foo</groupId>
            <artifactId>bar</artifactId>
            <version>${bar.version}</version>
            <type>war</type>
            <overWrite>true</overWrite>
            <outputDirectory>${project.build.directory}/bar/bar</outputDirectory>
          </artifactItem>
        </artifactItems>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

接下来，您需要配置tomcat插件以查看您在上一步中刚刚复制到的目录或war。下面显示了 tomcat 6 和 7 的配置，除了工件 ID 之外，它是相同的。

```
<plugin>
  <groupId>org.apache.tomcat.maven</groupId>
  <artifactId>tomcat6-maven-plugin</artifactId>
  <version>${tomcat6-maven-plugin.version}</version>
  <configuration>
    <port>8090</port>
    <path>${default.rice.context.path}</path>
    <warDirectory>${project.build.directory}/bar/bar.war</warDirectory>
    <warSourceDirectory>${project.build.directory}/bar/bar</warSourceDirectory>
  </configuration>
</plugin>
<plugin>
  <groupId>org.apache.tomcat.maven</groupId>
  <artifactId>tomcat7-maven-plugin</artifactId>
  <version>${tomcat7-maven-plugin.version}</version>
  <configuration>
    <port>8090</port>
    <path>${default.rice.context.path}</path>
    <warDirectory>${project.build.directory}/bar/bar.war</warDirectory>
    <warSourceDirectory>${project.build.directory}/bar/bar</warSourceDirectory>
  </configuration>
</plugin> 
```

需要明确的是，如果您只想支持 tomcat:run，则不需要配置 warDirectory 或执行复制战。反之，如果只想支持tomcat:run-war，则不需要配置warSourceDirectory，也不需要执行copy-war-unpack。

最后一点，这个依赖副本解决方法也适用于 Jetty Maven 插件，所以如果你想同时支持 tomcat 和 jetty，这可能是一个很好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T18:47:51.653

我刚刚对如何以类似 maven 的方式解决这个问题有了另一个想法。我想在这里记录这一点，因为这可能对其他人有所帮助。我还没有测试过这个解决方案，但我看不出它为什么不起作用。

基本上，如果你想使用 jetty 或 tomcat 插件启动一个“不同”的 webapp，你可以这样做：

在您的项目中创建另一个 Maven 模块。此模块将是您要启动的 web 应用程序的空战争覆盖。然后你可以把你所有的 jetty 或 tomcat 配置放在那个新模块中（或者只是将 jetty 和 tomcat 配置集中在 pluginManagement 下的父 pom 中）。由于 jetty 和 tomcat 旨在启动“当前”应用程序，因此不需要特殊的破解配置。

# php - 带有换行符的正则表达式

> ID：15480227
> 
> 赞同：0
> 
> 时间：2013-03-18T15:13:49.830
> 
> 标签：php, regex

我想要下面代码中的字符串**FC Barcelona v BM Huesc 、 FC Ferrari v BM ameriF 和 C semari v AM buhari**。

```
$mat = '<font color="white">FC Barcelona v BM Huesca

<font color="white">FC Ferrari v BM ameri

<font color="white">FC semari v AM buhari
'; 
```

我尝试了下面的代码，但它似乎不起作用。任何帮助将不胜感激。谢谢

```
preg_match_all('/<font color="white">(.*?)/',$mat,$mats);
var_dump($mats); 
```

编辑：我的实时示例如下

```
<?php
$game = file_get_contents("http://www.firstrow1.eu/bet365/index.html");
preg_match_all('/<\/td><td><font color="white">(.*)/m',$game,$mats);
var_dump($mats);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:23:41.837

`.*?`将不匹配任何内容，因为它不情愿并且尽可能少地匹配。由于它后面没有表达式的其他部分，因此它在没有匹配到任何内容时完成。使用`.*`它是因为它的贪婪只会匹配到行尾。请注意，无论您是否使用`m`修饰符，这都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:24:53.470

```
preg_match_all("#<font color=\"white\">(.*?)\n#si", $mat, $mats); 
```

有用！

# session - 在注销和登录时保留会话

> ID：15480229
> 
> 赞同：2
> 
> 时间：2013-03-18T15:14:05.750
> 
> 标签：session, yii

我像这样打印出会话 ID：

```
<?php print YII::app()->session->sessionID; ?> 
```

例如，当我`log-in`检查我的`ID`时，它类似于：`huh09vuo33scdlkmfuc8651t12`。如果我注销并再次检查，我的 ID 保持不变。但是，如果我再次重新登录，会话 ID 会更改！

**我的问题**是我的会话中有信息需要存储在 cookie 中并在登录后重新加载。如果他的会话 ID 更改，我如何才能唯一地确定登录的用户是正确的用户？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:25:50.740

该组件`Yii::app()->user`是一个`CWebUser`实例，[`CWebUser::logout(boolean $destroySession=true)`](http://www.yiiframework.com/doc/api/1.1/CWebUser#logout-detail)文档说明：

> **$destroySession** ( *boolean* ) 是否销毁整个会话。**默认为 true**。如果为 false，则将调用 clearStates，它仅删除通过 setState 存储的数据。

实际上，`Yii::app()->user->logout(true)`销毁会话，意味着所有会话信息*都无法恢复*，它使用PHP的[`session unset`](http://php.net/manual/es/function.session-unset.php)和[`session destroy`](http://php.net/manual/en/function.session-destroy.php)分别取消设置所有会话信息和销毁服务器上的会话ID信息。但`Yii::app()->user->logout(false)` **不会破坏原始会话信息或取消设置会话 ID**，它只会清除会话状态，这是 Yii 实际使用的信息。您可以将其归类为“软注销”，因为原始会话信息保持关联与会话，只有状态与会话 ID 解除关联，但会话 ID 保持不变..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:50:41.483

不要问我怎么做，但这解决了我的问题：

我变了：

```
Yii::app()->user->logout(); 
```

至

```
Yii::app()->user->logout(false); 
```

也许它会帮助其他人，或者至少引导他们朝着正确的方向前进。

# msdeploy - TeamBuild 中的 WebDeploy 失败并显示 http 504

> ID：15480231
> 
> 赞同：0
> 
> 时间：2013-03-18T15:14:07.243
> 
> 标签：msdeploy, webdeploy

我有一个简单的 VS2012 mvc 网站。我已经为此构建了一个部署包以部署到 IIS 8 的本地实例。我可以从 Visual Studio 手动发布它（右键单击项目并点击发布）并且效果很好。

我为该项目创建了一个 TFS 2012 构建。这成功编译并执行了我的单元测试。我的下一步是增强构建，以便它也部署网站 - 这是我遇到问题的地方。

我将以下内容添加为“MSBuild Arguments”： /p:DeployOnBuild=True /p:DeployTarget=MsDeployPublish /p:DeployIisAppPath="Default Web Site/TrainingCompany" /p:MsDeployServiceUrl=urlhere.com /p:username=username /p :密码=密码

在构建之后，我在 msbuild 日志文件中得到以下信息：

```
Could not complete the request to remote agent URL 'http://urlhere.com:8172/msdeploy.axd?site=Default Web Site'.
The operation has timed out
at Microsoft.Web.Deployment.AgentClientProvider.GetHttpResponse(HttpWebRequest request)
at Microsoft.Web.Deployment.AgentClientProvider.PerformHeadRequestHelper(Boolean getVersionInfo, Version& maximumSupportedVersion, Version& minimumSupportedVersion)
at Microsoft.Web.Deployment.AgentClientProvider..ctor(DeploymentProviderContext providerContext, DeploymentBaseContext baseContext, String serverVersion)
at Microsoft.Web.Deployment.DeploymentManager.CreateObjectPrivate(DeploymentProviderContext providerContext, DeploymentBaseOptions baseOptions, DeploymentObject sourceObject, String serverVersion)
at Microsoft.Web.Deployment.DeploymentManager.CreateDestinationObject(DeploymentProviderOptions providerOptions, DeploymentBaseOptions baseOptions, DeploymentObject sourceObject, String serverVersion)
at Microsoft.Web.Deployment.DeploymentObject.SyncTo(DeploymentProviderOptions providerOptions, DeploymentBaseOptions baseOptions, DeploymentSyncOptions syncOptions)
at System.Dynamic.UpdateDelegates.UpdateAndExecuteVoid4[T0,T1,T2,T3](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
at Microsoft.Web.Publishing.Tasks.VSMSDeployObject.SyncTo(VSMSDeployObject destObject, Object syncOptions, IVSMSDeployHost _host)
at System.Dynamic.UpdateDelegates.UpdateAndExecuteVoid4[T0,T1,T2,T3](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
at Microsoft.Web.Publishing.Tasks.BaseMSDeployDriver.InvokeMSdeploySync()
at Microsoft.Web.Publishing.Tasks.BaseMSDeployDriver.SyncThruMSDeploy()
at Microsoft.Web.Publishing.Tasks.VSMSDeploy.Execute() 
```

从提琴手我尝试执行以下作为 GET 请求 - 我的猜测是我应该得到一些东西，但我只是得到一个 504 超时：

[http://urlhere.com:8172/msdeploy.axd](http://urlhere.com:8172/msdeploy.axd)

谁能告诉我我可能做错了什么或者我可以采取哪些额外的步骤来排除故障？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:48:24.263

这可能是因为 WebDeploy 默认设置在 HTTPS 上，而不是 HTTP。

试试[https://urlhere.com:8172/msdeploy.axd](https://urlhere.com:8172/msdeploy.axd)看看你的进展如何。

# ruby - 如何防止位置参数被扩展为关键字参数？

> ID：15480236
> 
> 赞同：9
> 
> 时间：2013-03-18T15:14:19.160
> 
> 标签：ruby, arguments, ruby-2.0, keyword-argument

我想要一个接受散列和可选关键字参数的方法。我尝试定义这样的方法：

```
def foo_of_thing_plus_amount(thing, amount: 10)
  thing[:foo] + amount
end 
```

当我使用关键字参数调用此方法时，它按我的预期工作：

```
my_thing = {foo: 1, bar: 2}
foo_of_thing_plus_amount(my_thing, amount: 20) # => 21 
```

但是，当我省略关键字参数时，哈希会被吃掉：

```
foo_of_thing_plus_amount(my_thing) # => ArgumentError: unknown keywords: foo, bar 
```

我怎样才能防止这种情况发生？有没有防泼溅之类的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T18:08:00.217

这是在 Ruby 2.0.0-p247 中修复的错误，请参阅[此问题](https://bugs.ruby-lang.org/issues/8040)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:24:34.450

关于什么

```
def foo_of_thing_plus_amount(thing, opt={amount: 10})
  thing[:foo] + opt[:amount]
end

my_thing = {foo: 1, bar: 2}   # {:foo=>1, :bar=>2}
foo_of_thing_plus_amount(my_thing, amount: 20)   # 21
foo_of_thing_plus_amount(my_thing)   # 11 
```

?

# c++ - 类中的唯一指针

> ID：15480238
> 
> 赞同：1
> 
> 时间：2013-03-18T15:14:24.210
> 
> 标签：c++, class, c++11, smart-pointers

假设我们有三个类：A、B、C。A 和 B 都拥有一个指向 C 类的指针。永远不会发生类 A 的两个实例共享同一个指向对象 C 的指针，但是，同时，对象 C 可以自由地被 B 类的实例指向。

有没有办法在 c++(11) 中实现这一点？

======编辑======

好的，让我们更详细地介绍一下。当我创建对象 CI 时，将它们的指针添加到对象 B 中的容器中。对象 A 可能拥有或不拥有指向 C 的指针。重要的是，不超过一个 A 指向同一个 C，这实际上可能由于用户的错误而发生。一旦 A 先验地指向 C，它就应该一直指向 C。

我会选择唯一指针，但我需要将它们的副本放入 B 的容器中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:48:50.887

如果将同一个指针分配给多个`A`.

此解决方案可以跟踪使用过的指针以防止重新分配。 **它不是线程安全的**……如果需要，您必须修改它以添加同步。

```
class A
{
  // The pointers used by all instances of A
  static std::set<C*> used_ptrs;

  // The pointer used by this instance of A
  C* the_c;

  // Sets the pointer if it is valid
  void set_c( C* c )
  {
    if ( the_c )
      throw std::runtime_error( "C pointer is already set in this A" );

    if ( used_ptrs.count( c ) )
      throw std::runtime_error( "C pointer is already set in another A" );

    the_c = c;
    used_ptrs.insert( c );
  }

  // The pointer is presumed to be unassigned at construction
  A() : the_c(NULL) {}

  // The pointer is removed from the set at destruction
  ~A()
  {
    if( the_c );
      used_ptrs.erase( the_c );
  }

  // Copying A is invalid by your description
  A( const A& ) = delete;
  A& operator= ( const A& ) = delete;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:48:41.073

我认为您需要在班级内部做一些簿记，也许使用静态`unordered_map`成员。我已经测试了以下代码的工作：

```
using namespace std;

struct C;

struct A
{
  void SetPointerToC(C & aC)
  {
    if ( mAllC.find(&aC) != mAllC.end() )
      assert(false); // multiple instances of A should not point to the same C

    mAllC[&aC] = this;
    mC = &aC;
  }

  ~A()
  {
    mAllC.erase(mC);
  }

private:

  // A is not copyable as to prevent multiple A instances having 
  // mC with the same value
  A(const A &);
  A & operator=(const A &);

  static unordered_map<C*, A*> mAllC;
  C * mC;
};

unordered_map<C*, A*> A::mAllC;

struct C
{

};

int _tmain(int argc, _TCHAR* argv[])
{
  A a;    
  A a2;
  C c;
  a.SetPointerToC(c); // works
  a2.SetPointerToC(c); // assert!

  return 0;
} 
```

# unit-testing - 让测试使用应用引擎“High Replication Datastore”的模拟版本？

> ID：15480244
> 
> 赞同：1
> 
> 时间：2013-03-18T15:14:40.530
> 
> 标签：unit-testing, google-app-engine, testing

根据 App Engine 网站，我们应该将其添加到我们的测试中：

```
LocalServiceTestHelper datastoreHelper = 
        new LocalServiceTestHelper( new LocalDatastoreServiceTestConfig( )
                                    .setDefaultHighRepJobPolicyUnappliedJobPercentage(100)); 
```

但是运行测试它会在控制台中打印：

```
INFO: Local Datastore initialized: 
Type: Master/Slave
Storage: /Users/celsodantas/code/eclipse-workspace/code/BAM/product/./WEB-INF/appengine-generated/local_db.bin 
```

我的问题是：**如何针对模拟的 High Replication 数据存储运行测试？**

在 App Engine 迁移到 HRD 之前，我的所有测试都使用主/从运行。我的生产应用程序已经在运行 HRD，但不是我的测试。

有任何想法吗？肿瘤坏死因子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:52:02.753

**[更新了一个例子]** 它应该可以工作。我假设您在某处有另一个 LocalServiceTestHelper 实例。的构造函数`LocalServiceTestHelper`可以接收多个TestConfigs，所以如果你想拥有多个testConfigs，请尝试如下：

```
private final LocalServiceTestHelper helper = new LocalServiceTestHelper(
 new LocalMemcacheTestConfig(),
 new LocalDatastoreServiceTestConfig()
   .setDefaultHighRepJobPolicyUnappliedJobPercentage(100)); 
```

# django - Django-South 未检测到在字段上添加默认值

> ID：15480250
> 
> 赞同：3
> 
> 时间：2013-03-18T15:15:00.827
> 
> 标签：django, django-models, django-south

因此，我向 Django 模型字段添加了一个默认值，然后运行：

```
$ python manage.py schemamigration myapp --auto 
```

似乎什么都没有改变。

呸呸呸？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:16:34.030

无需迁移`default`价值。因为，默认值是由 django 应用程序读取的，并将指定的`default`值添加到它生成的 Raw SQL 中添加添加/更新的时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:18:08.567

你不需要在南方做那个。它已经存在，您可以随时更改。

# ruby-on-rails - 设置一个等于自身的变量，除非它不存在

> ID：15480251
> 
> 赞同：1
> 
> 时间：2013-03-18T15:15:01.233
> 
> 标签：ruby-on-rails, ruby, variables

我现在正在解析 Linkedin API，您可以请求各种字段及其值。有时用户有一个字段的值，有时他们没有。

例如，如果用户没有输入电话号码，Linkedin 将不会返回电话号码字段。

**对 Linkedin 的示例请求**

`email, firstName, lastName, phoneNumber`

**来自Linkedin的示例响应：**

```
{"email"=>"test@example.com", "firstName"=>"Brian", "lastName"=>"Weinreich"} 
```

所以，我要求 4 件事：`email, firstName, lastName, phoneNumber`它只返回 3 件事。我想知道是否有更快/更有效的方法来设置等于这些值的变量，具体取决于它们是否存在。

我就是这样做的……但这似乎是多余的。

```
@user.email = profile['emailAddress'] ? profile['emailAddress'] : ""
@user.phone_number = profile['phoneNumber'] ? profile['phoneNumber'] : ""
@user.first_name = profile['firstName'] ? profile['firstName'] : ""
@user.last_name = profile['lastName'] ? profile['lastName'] : "" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T15:16:09.440

```
@user.email = profile['emailAddress'] || ""
@user.phone_number = profile['phoneNumber'] || ""
@user.first_name = profile['firstName'] || ""
@user.last_name = profile['lastName'] || "" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T16:23:01.977

这相当简单 - 为 Hash 设置默认值：

```
> profile={"email"=>"test@example.com", "firstName"=>"Brian", "lastName"=>"Weinreich"}
=> {"email"=>"test@example.com", "firstName"=>"Brian", "lastName"=>"Weinreich"}
> profile.default = ""
=> "" 
```

那么只需简单的分配就可以满足您的要求：

```
@user.email = profile['emailAddress']
@user.phone_number = profile['phoneNumber']
@user.first_name = profile['firstName']
@user.last_name = profile['lastName'] 
```

`Proc`对于更复杂的情况，您还可以设置而不是一个默认值块：

```
profile.default_proc= proc {|hash, key| hash[key] = (key =~ /email/i) ? "default@example.com" : ""}

> profile['email']
=> "test@example.com"
> profile['hiddenEmail1234']
=> "default@example.com"
> profile['some-other-key']
=> "" 
```

# javascript - 在 Chrome 中使窗口无法调整大小

> ID：15480252
> 
> 赞同：6
> 
> 时间：2013-03-18T15:15:02.043
> 
> 标签：javascript, google-chrome

我有一些 JavaScript 用于使窗口无法调整大小，类似于：

```
window.open(URL, id, "resizable=no"); 
```

这适用于大多数浏览器，但 Chrome 似乎不支持它。我曾考虑使用 JavaScript 来观察重新调整大小并将其重新设置，但这并不理想。有没有人有任何其他建议？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-25T03:30:22.730

不久前，使用带有弹出窗口和“resizable = 0”参数的旧 javascript 很容易做到这一点，但当前的浏览器不允许这样做，因为它们扼杀了用户的自由。这一举措始于 firefox，chrome 紧随其后，可能这种情况的解决方案是创建一个 chrome 扩展，并且只适用于 chrome，但这似乎很疯狂。

> 经过一番讨论，共识似乎是 window.open() 不应该被修改为解析“resizeable”，至少目前是这样。更改将需要对 Webkit 进行修改，并且该行为将与 Firefox 和现有的 Webkit 浏览器不一致。

[在这里查看更多](https://code.google.com/p/chromium/issues/detail?id=185425)

> 我们总是允许调整窗口大小，这与 Firefox 一致。

[在这里查看更多](https://docs.google.com/document/edit?id=14nBjW6gHJW0kk44o8Z8vfDSnDi0ZT1sUU74Zc5wmwIQ&hl=en&authkey=CKT6-O8I#)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-18T16:02:19.457

这是老式的 javascript。现代浏览器往往不允许这样做，因为它被视为对用户不友好的限制。

# json - 使用 Jackson Json 解析器递归解析 json 文件

> ID：15480254
> 
> 赞同：4
> 
> 时间：2013-03-18T15:15:09.440
> 
> 标签：json, jackson

我正在尝试递归解析具有许多复杂元素集的示例 Json 文件。我正在尝试的代码是这样的：

```
public class Jsonex {
    public static void main(String argv[]) {
        try {
            Jsonex jsonExample = new Jsonex();
           jsonExample.testJackson();
        } catch (Exception e){
            System.out.println("Exception " + e);
        }       
    }
    public static void testJackson() throws IOException {       
        JsonFactory factory = new JsonFactory();
       // System.out.println("hello");
        ObjectMapper mapper = new ObjectMapper(factory);
        File from = new File("D://albumList.txt");
        TypeReference<HashMap<String,Object>> typeRef = new TypeReference<HashMap<String,Object>>() {};
        HashMap<String,Object> o= mapper.readValue(from, typeRef);
       // System.out.println("" + o);
        Iterator it = o.entrySet().iterator();
       while (it.hasNext()) {

          Map.Entry pairs = (Map.Entry)it.next();
            System.out.println(pairs.getKey() + " = " + pairs.getValue());

           HashMap<String,Object> o1=mapper.readValue(pairs.getValue().toString(),typeRef);
          System.out.println("hey"+o1);
           Iterator it1 = o1.entrySet().iterator();
           while (it1.hasNext()) {
                Map.Entry pairs1 = (Map.Entry)it.next();
                System.out.println(pairs1.getKey() + " = " + pairs1.getValue());
            it1.remove(); // avoids a ConcurrentModificat

    }   
    }
}} 
```

我得到了这个例外：

异常 org.codehaus.jackson.JsonParseException：意外字符（'i'（代码 105））：期望双引号在 [Source: java.io.StringReader@2de7753a; 开始字段名称；行：1，列：3]

**实际上，我想做的是解析文件并获取名称对象对的列表，然后获取具有名称对象对的对象。- 但问题是解析器在字符串之前期待“”！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:46:12.273

Instead of parsing everything by yourself you should consider to use Jacksons built-in tree model feature ([http://wiki.fasterxml.com/JacksonTreeModel](http://wiki.fasterxml.com/JacksonTreeModel)):

```
ObjectMapper mapper = new ObjectMapper(factory);
File from = new File("D://albumList.txt");
JsonNode rootNode = mapper.readTree(from);  

Iterator<Map.Entry<String,JsonNode>> fields = rootNode.fields();
while (fields.hasNext()) {

    Map.Entry<String,JsonNode> field = fields.next();
    System.out.println(field.getKey() + " = " + field.getValue());
    …

} 
```

This should be more convenient in the long run. Have a look at the API at [http://fasterxml.github.com/jackson-databind/javadoc/2.1.0/com/fasterxml/jackson/databind/JsonNode.html](http://fasterxml.github.com/jackson-databind/javadoc/2.1.0/com/fasterxml/jackson/databind/JsonNode.html).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-29T09:21:22.340

Just a comment. As you know there are 3 major processing modes that Jackson supports (Data Binding, Streaming API and Tree Model). You need to take into account that if you decide to use the Tree Model, acording to the official docs, the memory usage is proportional to content mapped (similar to data binding), so tree models can NOT be used with huge Json content, unless mapping is done chunk at a time. This is the same problem that data binding encounters; and sometimes the solution is to use Stream-of-Events instead.

# php - 如何选择 MYSQL 日期时间列到 HTML 输入日期时间

> ID：15480259
> 
> 赞同：0
> 
> 时间：2013-03-18T15:15:37.147
> 
> 标签：php, mysql

我`$datetime`从 MYSQL 日期时间列中选择了一个值如何转换格式。

这个 php 代码不起作用：`<input type="datetime" value=<?php echo '"'.$datetime.'"' ?> />`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:48:45.857

输入类型“日期时间”是 HTML5，目前仅支持 Safari 和 Opera。它不适用于任何其他浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:19:21.213

对于 PHP 5.3，这很容易：

$date = new DateTime($datetime);

echo $date->format('needful_fromat_here');

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:20:44.663

[`strtotime`](http://www.php.net/manual/en/function.strtotime.php)您可以使用和的组合在 PHP 中转换格式[`date`](http://www.php.net/manual/en/function.date.php)：

```
<?php echo '"' . date('d/m/Y', strtotime($datetime)) . '"' ?> 
```

您也可以在 MySQL 中对其进行格式化，而不是使用[`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)

```
DATE_FORMAT(datetimeCol, '%d/%m/%Y') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T15:20:49.937

有几种方法可以更改格式。首先是在查询中它自己看到[mysql日期时间格式](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)：

```
SELECT DATE_FORMAT('2009-10-04 22:23:00', '%W %M %Y');

//'Sunday October 2009' 
```

另一种选择是在[PHP中进行](http://php.net/manual/en/function.date.php)

```
echo date("Y-m-d H:i:s", strtotime($datetime));

// default SQL format, but you get the idea how to change it
// 2012-01-01 10:15:59 
```

# jquery-ui - a 的错误行为（错误的显示位置）在 jquery-ui 对话框中 jquery-ui 对话框声明中的 <select>输入未显示在正确的位置。它总是在对话框的顶部！这里是代码： ID：15480261 赞同：0 时间：2013-03-18T15:15:42.610 标签：jquery-ui, jquery-ui-dialog, html-select 回答 #1 赞同：0 时间：2013-03-20T05:33:23.830 我没有找到好的解决方案，但我在对话框中成功使用了一个表格： <div id="newarticle-form" title="Cr&eacute;ation nouvel article"> <form action="http://localhost/ravioles/administration/articleAjout" method="post" accept-charset="utf-8" id="newarticleform"> <fieldset> <table><tr><td> <label for="code" class="label-class">Code article</label> <input type="text" name="code" id="code" size="6" maxlength="6" class="text input-class" /> </td></tr><tr><td> <label for="validite" class="label-class">Date de validit&eacute;</label> <input type="text" name="validite" id="validite" size="10" maxlength="10" class="text input-class" /> </td></tr><tr><td> <label for="libelle" class="label-class">Libell&eacute;</label> <input type="text" name="libelle" id="libelle" size="50" maxlength="100" class="text input-class" /> </td></tr><tr><td> <label for="poids" class="label-class">Poids (g)</label> <input type="text" name="poids" id="poids" value="" size="5" maxlength="5" class="text input-class" /> </td></tr><tr><td> <label for="pu" class="label-class">Prix unitaire</label> <input type="text" name="pu" id="pu" value="" size="10" maxlength="10" class="text input-class" /> </td></tr><tr><td> <label for="categorie" class="label-class">Cat&eacute;gorie</label> <select id="categorie" > <option value="00001">RAVIOLES</option> <option value="00002">PATES FRAICHES DU ROYAN</option> <option value="00003">PATES FARCIES DU ROYAN</option> <option value="00004">QUENELLES</option> <option value="00005">TRAITEUR</option> <option value="00006">SAVEURS EXPRESS</option> <option value="00007">CONSERVES ET SAUCES</option> </select><br> </td></tr></table> </fieldset> </form> <p class="validateTips"></p> </div> 谢谢 ！^_^ 回答 #2 赞同：0 时间：2013-04-19T16:48:38.653 我有完全相同的问题。<hr />奇怪的是，当添加一个或<select>元素时，对话框会向上移动。将元素包装在表格中解决了这个问题。 <select>...</select> <hr /> <more content> 变成了 <table> <tr> <td><select>...</select></td> </tr> <tr> <td><more content></td> </tr> </table> 祝其他找到这个的人好运！博</select>

# maven - 使用 Selenium、JUNIT、MAVEN 生成报告的插件、依赖项是什么

> ID：15480265
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:15:52.373
> 
> 标签：maven, ant, selenium, webdriver, selenium-webdriver

我正在使用 Selenium webdriver、JUNIT、MAVEN 设置 selenium maven 项目。

所以在 pom.xml 中我给出了与 selenium 相关的依赖项。生成 Junit 报告的所有插件和依赖项是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:21:57.173

```
<dependency>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-report-plugin</artifactId>
    <version>2.5</version>
    <type>maven-plugin</type>
</dependency>  <reporting>
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-report-plugin</artifactId>
    <version>2.5</version>
    <configuration>
      <outputName>MavenSeleniumTestResults</outputName>                   
    </configuration>
  </plugin> 

</plugins> 
```

# java - 扩展 Log4j Logger 类时出现 NullPointerException

> ID：15480266
> 
> 赞同：2
> 
> 时间：2013-03-18T15:15:57.223
> 
> 标签：java, nullpointerexception, log4j

我想向 Log4j 记录器添加一些简单的方法，以便在我的应用程序中使用。

尝试这样做：

```
public class Logger extends org.apache.log4j.Logger
{
    public Logger(Class type)
    {
        super(type.getName());
    }

    public void info(String format, Object... o)
    {
        info(String.format(format, o));
    }

    public void debug(String format, Object... o)
    {
        debug(String.format(format, o));
    }

    public void warn(String format, Object... o)
    {
        warn(String.format(format, o));
    }

    public void error(String format, Object... o)
    {
        error(String.format(format, o));
    }
} 
```

认为我应该能够像这样使用它：

```
public class TmpTest
{
    public static void main(String[] args) throws Exception
    {
        // Note I'm not even using the special methods here
        new Logger(TmpTest.class).warn("Test");
    }
} 
```

但我得到一个`NullPointerException`.

```
Exception in thread "main" java.lang.NullPointerException
    at org.apache.log4j.Category.warn(Category.java:1004)
    at no.nwn.productconfigurator.TmpTest.main(TmpTest.java:16) 
```

我不能这样吗？`getLogger`只有当我使用类的工厂方法时，是否有一些缺失的初始化`Logger`？

如果我不能扩展 Logger 类，我应该怎么做？

* * *

可能是关于 log4j.xml 的东西吗？我自己以前从来没有用过这个，也没有自己写过。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" >
<log4j:configuration debug="true">
    <appender name="stdout" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ABSOLUTE} %5p %c{1}:%L - %m%n"/>
        </layout>
    </appender>
    <appender name="ProductConfigurator" class="org.apache.log4j.DailyRollingFileAppender">
      <!-- 
      <param name="File" value="logs/ProductConfigurator.log" />   
      -->
      <param name="File" value="/var/tomcat/logs/ProductConfigurator.log" />
      <param name="Append" value="true" />
        <layout class="org.apache.log4j.PatternLayout">
          <param name="ConversionPattern" value="%d{yyyy-MMM-dd HH:mm:ss,SSS}. %5p %c{1}:%L - %m%n"/>
        </layout>
    </appender>
    <logger name="org.hibernate" additivity="false">
    <level value="warn" />
        <appender-ref ref="ProductConfigurator"/>
    </logger>
    <logger name="org.hibernate.type" additivity="false">
    <level value="warn" />
        <appender-ref ref="ProductConfigurator"/>
    </logger>
    <logger name="org.hibernate.SQL" additivity="false">
    <level value="warn" />
        <appender-ref ref="ProductConfigurator"/>
    </logger>
    <root>
        <!-- all|trace|debug|info|warn|error|fatal|no -->
        <priority value="info" />
        <appender-ref ref="ProductConfigurator"/>
    </root>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:33:09.477

`category.repository`场`null`是。查看源代码：

```
public void warn(Object message) {
    if(repository.isDisabled( Level.WARN_INT))
       return;

    if(Level.WARN.isGreaterOrEqual(this.getEffectiveLevel()))
        forcedLog(FQCN, Level.WARN, message, null);
} 
```

要正确初始化 a `Logger`，您应该使用`LogManager`：

```
public static void main(String[] args) throws Exception
{              
    LogManager.getLogger(TmpTest.class.getName(), new LoggerFactory() {

        @Override
        public Logger makeNewLoggerInstance(String name) {
            return new Logger(name);
        }
    }).warn("Test");
} 
```

我使用自定义工厂实现来实例化您的记录器。并不是说创建记录器（`Logger.getLogger(Class clazz)`）的经典方法使用`LogManager`：

```
static public Logger getLogger(Class clazz) {
    return LogManager.getLogger(clazz.getName());
} 
```

* * *

如果您的项目中没有特定的约束，我建议您使用[slf4j](http://www.slf4j.org/manual.html)。它提供了您期望的方法：

```
logger.debug("Temperature set to {}. Old temperature was {}.", t, oldT); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T15:33:30.503

只需`super.`在所有对信息、警告等的调用之前添加即可。

在以下代码中：

```
public void info(String format, Object... o) {
    info(String.format(format, o));
} 
```

当您调用时`info(String.format(format, o))`，您以递归方式调用相同的方法：第一个参数是格式化字符串，第二个（var-args）参数为空，因此`String.format`再次调用时，您会得到 NullPointerException。

因此，您应该改为这样写：

```
public void info(String format, Object... o) {
    super.info(String.format(format, o));
} 
```

# ios - Blender-文件到 Xcode

> ID：15480268
> 
> 赞同：0
> 
> 时间：2013-03-18T15:16:02.397
> 
> 标签：ios, xcode, opengl-es-2.0, blender

我们想为 Apple iPad 制作 3D 游戏，我们正在考虑一种可能性，将 Blender 中的 3D 模型导入 Xcode。

有没有办法做到这一点？

我们想使用opengl-es 2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:33:24.403

XCode 不是游戏引擎或 3D SDK。您不能将搅拌机文件“导入”到 XCode 中。您可以做的是获取您的 3D 资源并在您的应用程序中使用它们，或者直接通过 OpenGL（相当低级），或者使用诸如 Unity 之类的 3D 引擎（更简单）。

无论哪种方式，Stackoverflow 上已经存在一些您可能会觉得有用的问题：

[Opengl ES如何在运行时导入3D模型并将纹理映射到它](https://stackoverflow.com/questions/6059584/opengl-es-how-to-import-a-3d-model-and-map-textures-to-it-on-runtime)

[Iphone + OpenGL ES + Blender 模型：触摸旋转](https://stackoverflow.com/questions/3280094/iphone-opengl-es-blender-model-rotation-by-touch)

[在 C++ 中为 iOS 选择 3D 引擎](https://stackoverflow.com/questions/12068018/choosing-3d-engine-for-ios-in-c)

...我强烈建议您看看有哪些选项，确定实现 3D 游戏的最佳方式（无论是原始 OpenGL 还是引擎），然后从那里开始。

# c++ - OpenGL教程错误

> ID：15480271
> 
> 赞同：4
> 
> 时间：2013-03-18T15:16:10.047
> 
> 标签：c++, opengl, driver, ubuntu-12.04

我设法从[这里](http://www.arcsynthesis.org/gltut/)构建了教程，但是在执行它们时会发生错误：

```
X Error of failed request:  BadRequest (invalid request code or no such operation)
Major opcode of failed request:  154 (GLX)
Minor opcode of failed request:  34 ()
Serial number of failed request:  34
Current serial number in output stream:  33 
```

谷歌告诉我这个错误与图形驱动程序有关，所以关于我的系统的信息可能有用；我在三星 700Z7C 笔记本上使用 Ubuntu 12.04 64 位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:23:37.303

你有：

> OpenGL 版本字符串：**2.1** Mesa 8.0.4

第三页，[“你需要什么”](http://www.arcsynthesis.org/gltut/About%20Need.html)：

> ...但要执行代码，您必须有一个允许 OpenGL 的编程环境。具体来说，**您将需要能够运行 OpenGL 版本 3.3 的硬件**。...

[三星700Z7C笔记本：](http://www.samsung.com/us/computer/laptops/NP700Z7C-S01US-specs)

> 显卡：外置或集成：外置（**擎天柱**）

[擎天柱](http://en.wikipedia.org/wiki/Nvidia_Optimus#Unix_support)：

> When no software mechanism exists for switching between graphics adapters, the system cannot use the NVIDIA GPU at all, even if an installed graphics driver would support it.

[Make sure you're routing your GLX requests to the NVidia chip (with the proprietary drivers) and not the Intel one.](http://bumblebee-project.org/install.html#Ubuntu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:24:35.050

There are 3 things you should check - does your graphics card support OpenGL 3.3 (I believe that's the version used in the arcsynthesis book), are your drivers up to date, and is your code actually ok? We can probably cross 3 out, it would still help if you told us which example you were trying to run though.

# java - 活动生命周期问题（如何检测活动是否在前台）

> ID：15480272
> 
> 赞同：0
> 
> 时间：2013-03-18T15:16:21.327
> 
> 标签：java, android, android-activity

我有广播接收器，当用户收到短信时它会启动。只有当我的活动处于前台或设备处于睡眠模式时，广播接收器中的代码才会触发。但是我在检测我的活动是否在前台有一个小问题。onResume 我将布尔值“isActive”设置为 true，而 onStop 我将布尔值“isActive”设置为 false。（以这种方式检测活动是否在前台似乎很合乎逻辑）。

在下面的代码中，我检查屏幕是否关闭或活动是否在前台，如果其中一个表达式为真，则执行以下代码。

```
@Override
public void onReceive(Context context, Intent intent) {
if(!pm.isScreenOn() || HandleActivity.isHandleActivityActive) { 

// unnecessary code omitted

    //start activity
    intent = new Intent(MainService.this, HandleActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); //Clear top is necessary otherwise would be a lot of new activites (depends on received sms)       
    startActivity(intent);
    } 
```

}

但我不知道活动生命周期发生了什么。当我第一次收到短信时，它工作得很好。布尔“isActive”具有以下值：

```
03-04 07:31:49.989: I/APP(7604): is handle activity active: true
03-04 07:31:50.169: I/APP(7604): is handle activity active: false
03-04 07:31:50.979: I/APP(7604): is handle activity active: true 
```

当我第二次收到短信时（活动仍在前台。没有读取短信或任何内容）我得到了这些值：

```
03-04 07:32:04.828: I/APP(7604): is handle activity active: true
03-04 07:32:06.849: I/APP(7604): is handle activity active: false 
```

因为“isActive”现在为假，“if”代码无法执行。有人能指出我正确的方向吗，可能出了什么问题或如何检查我的活动是否在前台或其他地方。因此，我在过去 2 天感到沮丧。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:28:48.763

将您的 HandleActivity 设为 SingleTop 并让活动在每次消息到达时启动，它会正常工作，请参阅此链接 [http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:35:37.257

我从你的代码中收集：

```
if(!pm.isScreenOn() || HandleActivity.isHandleActivityActive) { 
```

isHandleActivityActive 是一个静态变量吗？在这种情况下，您可能正在检查以前的活动是否正在/正在运行，而不是您所在的实际活动。尝试将该变量更改为私有实例变量，看看它是否有效。

# c# - WPF 复选框：检查更改的处理

> ID：15480279
> 
> 赞同：61
> 
> 时间：2013-03-18T15:16:33.747
> 
> 标签：c#, wpf, checkbox

在 WPF 数据绑定中，我可以将 IsChecked 属性绑定到某些数据，例如用户设置，但我需要处理“CheckChanged”事件，我知道我可以单独处理***Checked***、***Unchecked***事件，但是有什么方法可以在这种情况下得到通知值变了？

```
<CheckBox Content="Case Sensitive" IsChecked="{Binding bSearchCaseSensitive,
          Source={x:Static Properties:Settings.Default}}" /> 
```

注意：我不在乎它是选中还是未选中。我只想在更改时收到通知。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-03-18T16:16:11.063

您*可以*分别处理已检查和未检查的事件并不意味着您*必须*. 如果您不想遵循 MVVM 模式，您可以简单地将相同的处理程序附加到两个事件，并且您有更改信号：

```
<CheckBox Checked="CheckBoxChanged" Unchecked="CheckBoxChanged"/> 
```

并在代码隐藏中；

```
private void CheckBoxChanged(object sender, RoutedEventArgs e)
{
  MessageBox.Show("Eureka, it changed!");
} 
```

请注意，出于某种原因，WPF 强烈鼓励使用 INotifyPropertyChanged 和/或 DependencyProperties 的 MVVM 模式。这是可行的，而不是我想鼓励的良好编程习惯。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-10-24T14:19:44.393

作为一个复选框单击=一个复选框更改以下内容也将起作用：

```
<CheckBox Click="CheckBox_Click" /> 
```

```
private void CheckBox_Click(object sender, RoutedEventArgs e)
{
    // ... do some stuff
} 
```

它具有额外的优势，即在`IsThreeState="True"`仅处理 Checked 和 Unchecked 时不工作。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-18T15:31:43.207

我把它放在一个答案中，因为评论太长了：

如果您需要 VM 在`CheckBox`更改时知道，您应该真正将 绑定`CheckBox`到 VM，而不是静态值：

```
public class ViewModel
{
    private bool _caseSensitive;
    public bool CaseSensitive
    {
        get { return _caseSensitive; }
        set
        {
            _caseSensitive = value;
            NotifyPropertyChange(() => CaseSensitive);

            Settings.Default.bSearchCaseSensitive = value;
        }
    }
} 
```

XAML：

```
<CheckBox Content="Case Sensitive" IsChecked="{Binding CaseSensitive}"/> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-10-03T21:31:54.923

我知道这是一个老问题，但是`Command`如果使用 MVVM 绑定到呢？

前任：

```
<CheckBox Content="Case Sensitive" Command="{Binding bSearchCaseSensitive}"/> 
```

对我来说，它同时触发`Check`和`Uncheck`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-27T07:28:10.763

我发现使用 MVVM 模式处理已检查/未检查事件的一种简单而正确的方法如下，使用 Caliburn.Micro ：

```
 <CheckBox IsChecked="{Binding IsCheckedBooleanProperty}" Content="{DynamicResource DisplayContent}" cal:Message.Attach="[Event Checked] = [Action CheckBoxClicked()]; [Event Unchecked] = [Action CheckBoxClicked()]" /> 
```

并在 ViewModel 中实现一个方法 CheckBoxClicked() 来做你想做的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T15:20:51.100

[Checked](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.checked.aspx)事件呢？将其与[AttachedCommandBehaviors](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)或类似的东西以及[DelegateCommand](http://wpftutorial.net/DelegateCommand.html)结合起来，以在每次调用该事件时在您的视图模型中触发一个函数。

# android - 安卓手机及蓝牙模块规格

> ID：15480282
> 
> 赞同：0
> 
> 时间：2013-03-18T15:16:47.583
> 
> 标签：android, bluetooth

我对使用 Android 的蓝牙通信很陌生。我想开发一个示例项目，使用 Android 手机通过蓝牙打开和关闭不同的 LED，为此我需要一个蓝牙模块来与 LED 通信。

现在我的问题是：

1）蓝牙模块与安卓手机通信需要什么技术规范（我有两部蓝牙版本V2.1和V3.0的安卓手机）？

2）在上述情况下，哪家公司的蓝牙模块更适合我？

请在这方面帮助我，我会非常感谢你的善举。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:36:53.360

[http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html)

使用那里为 SPP 指定的 UUID

蓝牙适配器默认作为服务器工作。所以你应该在安卓端进行客户端编程。

我的项目处理连续发送数据，所以我不得不使用 HandlerThreads，这样我就不会阻塞 UIThread。因为你不需要发送太多数据，你可以直接在 UIThread 上工作。所以 [连接作为](http://developer.android.com/guide/topics/connectivity/bluetooth.html)android 文档的客户端部分会做。

# asp.net - 一个页面只能有一个服务器端 Form 标签。

> ID：15480287
> 
> 赞同：2
> 
> 时间：2013-03-18T15:17:02.160
> 
> 标签：asp.net, forms, master-pages

母版页.aspx

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">

    </asp:ContentPlaceHolder>
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'>     
     </script>
     <script src="Chrome.js" type="text/javascript"></script>
     </head>
     <body>
     <form id="Master" runat="server">
      <table style="width:987px; margin:auto; height: 86px;">
       <tr style="background-color:#FFFFFF">
         <td class="style2">
           <img src="images/logo.jpg" alt="" width="235" height="73" />&nbsp;
             </td>
             <td style="vertical-align:middle;"class="style1">
             <div style="float:right; width:153px; height: 22px;">
             &nbsp;<asp:TextBox ID="TextBox1" runat="server" Height="20px" 
                                            style="margin-left: 0px" Width="140px">   
              </asp:TextBox>
              </div>
              <a href="">Forget Password?</a> </span></span>
               </td>
               <td class="style33">
              <div style="float:right; width:157px; height: 20px; margin-right: 1px;">
            <asp:TextBox ID="TextBox2" runat="server" Height="20px"  
                                            style="margin-left: 0px; margin-top:  
                                            Width="147px"></asp:TextBox>
                                        </div>

              <a href="Registration.aspx">New User Registration</a> </span>
                                </td>
                                <td class="style40">
            <div style="height: 67px; width: 81px;">
            &nbsp<asp:Button ID="btnlogin" runat="server" style="color:White;  background-color:#404040;font-family:Verdana;font-size:10pt; height: 29px; margin-top: 12px;" Text="Login" onclick="btnlogin_Click1" /></div>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr style="background-color:#207DA8">
                    <td class="style39">
                    </td>
                    <td class="style39">
                    </td>
                </tr>

        <script type="text/javascript">

            cssdropdown.startchrome("chromemenu")

          </script>
                    </td>
                </tr>

                                        <img alt="" src="images/rgt.jpg" style="width: 471px; height: 247px" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </td>
                                </tr>
                                <tr style="vertical-align=top;background-color=#D4D3D9">
                                    <td style="height:1;">
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                         </tbody>
                         </table>
       <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
    </asp:ContentPlaceHolder>
   </form>  
  </body>
  </html> 
```

注册页面.aspx

```
 <%@ Page Language="C#" MasterPageFile="~/MasterPage.Master" AutoEventWireup="true" CodeBehind="Registration.aspx.cs" ValidateRequest="false" Inherits="Paragraphreader.Registration" %>
  <asp:Content ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
   <script src="jquery.validate.js" type="text/javascript"></script>
   <script src="jquery.validation.js" type="text/javascript"></script>
    <script>
    $("#Register").submit(function () {
        return $(this).validation();
        alert("submitted");
    });

 </script>
 <script>
     function validate() {

         var a = 0, rdbtn = document.getElementsByName("gender");
         for (i = 0; i < rdbtn.length; i++) {
             if (rdbtn.item(i).checked == false) {
                 a++;
             }
         }

         if (a == rdbtn.length) {
             document.getElementById("RadioButtonList1").style.border = "2px solid red";
             return false;
         } else {
             document.getElementById("RadioButtonList1").style.border = "";
             return true;
         }

     }

 </script>

   <link href="Career.css" rel="stylesheet" type="text/css" />
   <link href="Chrome.css" rel="stylesheet" type="text/css" />
   <link href="Styles.css" rel="stylesheet" type="text/css" />
  <form id="Register" runat="server">//A page can have only one form tag
  <asp:ScriptManager ID="ScriptManager1" runat="server">
  </asp:ScriptManager>
  <asp:UpdatePanel ID="FormUpdatePanel" runat="server">
   <ContentTemplate> 
```

我收到错误（在编译 RegisterPage.aspx 时，一个页面只能有一个服务器端 cof。在母版页中我有一个表单标签和服务器端代码在注册页面中我有一个表单标签和服务器端代码。如何避免这个错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T15:20:55.043

母版页通常不应包含`form`标签，因为它们仅用作内容页的基本布局。从母版页中删除`form`标签，错误就会消失。

如果您想为所有页面定义一个通用的“登录”部分（这似乎是您的意图），您可以改为创建一个`UserControl`来执行此操作。然后，您将在母版页内定义一个部分以包含此用户控件，确保 Login UserControl 的 ContentPlaceHolder 始终包含在内容页的`form`. 这样，当您提交表单时，`btnlogin_Click1`就会触发 click 事件。

总之：重新排列您的页面，使每页有一个`form`标签，因为 ASP.NET 不允许有多个标签，并尝试在内容页面而不是母版页中定义您的表单。

# database - 在控制器中访问 zf2 数据库结果对象

> ID：15480289
> 
> 赞同：0
> 
> 时间：2013-03-18T15:17:05.047
> 
> 标签：database, arrays, controller, zend-framework2, resultset

如何使用 foreach 循环遍历控制器中的数据库结果？

```
$select = new Select();
$select->from('table_name');
$select->where(array('salt'  => $salt));
$select->where(array('ip'    => $this->_getUserIp()));

$rowset = $this->tableGateway->selectWith($select);

return $rowset; 
```

我想我需要将 db 结果对象转换为数组？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:29:31.550

[http://framework.zend.com/manual/2.1/en/modules/zend.db.result-set.html](http://framework.zend.com/manual/2.1/en/modules/zend.db.result-set.html)

`Zend\Db\ResultSet\ResultSet`扩展`traversable`，因此您可以使用`foreach`它。

```
foreach($this->getSomeTable()->fetchAll() as $row) {
    //here you can access the row as an array or use getters if you have set a prototype object
    //eg
    $userId = $row['user_id'];
    $userId = $row->user_id;
    $userId = $row->getId();

} 
```

另外，我建议通读入门指南。所有这些基本的东西都在那里解释。

[http://framework.zend.com/manual/2.1/en/user-guide/overview.html](http://framework.zend.com/manual/2.1/en/user-guide/overview.html)

# vim - 如何让 Vim tabularize 自动打破给定的列宽？

> ID：15480291
> 
> 赞同：3
> 
> 时间：2013-03-18T15:17:14.963
> 
> 标签：vim, tabular

在 vim 中使用 tabularize 确实很不错，但我不喜欢的一件事是，当我在一组中有一列特别长时，会弄乱所有其他列。一般来说，我喜欢让我的文本宽度不超过 80 个字符。否则，当你垂直分割时，你会得到一团糟的可读性。考虑以下：

```
 mlog->_ofile << "INS="      << string((char *) ins_asm)    << delimiter  << 
    " in Img: " <<  (img_name!=0  ? string( (char*)   img_name) : "INVALID") <<
    delimiter  << " at IP="   << setbase(16) << insPointer   << delimiter << 
    " Time: "  << setbase(10) << time << delimiter; 
```

您通常会将其与简单的视觉选择对齐，然后：Tab /<<。但是以 ( ... 开头的长列`img_name!=`把一切都搞砸了：它迫使所有其他列都非常长。如果 tabularize 有一个你可以设置的变量会很酷，这样它就会自动找到最佳间距和排列标记为最短的法律声明，但这对于每种语言来说都比较困难，最好能够快速按文本宽度进行分割。

```
:set tw=80 doesn't do the job either just to note. 
```

如何既能快速将此语句与 tabularize 对齐，又能在适当的地方插入换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T01:33:15.410

结果不漂亮:)但尝试

```
:Tab /<<
Select range
type gq 
```

如下所示。

![在此处输入图像描述](../Images/9ce2c6885b2ec43df5c9848ff9ba28af.png)

有一种非视觉方法

```
:%s/\(.\{78}\)/\1\r/g 
```

但看起来更糟

![在此处输入图像描述](../Images/5ed55f37adcd625165459686f924c5f2.png)

# ios - MapView 没有显示正确的点

> ID：15480292
> 
> 赞同：1
> 
> 时间：2013-03-18T15:17:17.383
> 
> 标签：ios, objective-c, xcode, mkmapview, mapkit

我刚开始使用 MapKit 框架，我的第一次实践并不顺利 :)

一切似乎都很好，除了 MapView 显示在海洋中的某个地方并且它没有找到任何地方（例如：陆地、岛屿）。我认为纬度和经度不知何故超出了范围。

这是我的代码：

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UIBarButtonItem *zoomButton =
    [[UIBarButtonItem alloc]
     initWithTitle: @"Zoom-In"
     style:UIBarButtonItemStyleBordered
     target: self
     action:@selector(zoomIn:)];

    UIBarButtonItem *typeButton =
    [[UIBarButtonItem alloc]
     initWithTitle: @"Zoom-Out"
     style:UIBarButtonItemStyleBordered
     target: self
     action:@selector(zoomOut:)];

    NSArray *buttons = [[NSArray alloc]
                        initWithObjects:zoomButton, typeButton, nil];

    barButtons.items = buttons;

    MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 0.5*METERS_PER_MILE, 0.5*METERS_PER_MILE);

    MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];

    zoomLocation.latitude = 48.431638;
    zoomLocation.longitude= 27.169436;
    annotationPoint.coordinate = zoomLocation;
    annotationPoint.title = @"My Company";
    annotationPoint.subtitle = @"my Company Title";

    //[self __mapView];

    MKCoordinateRegion adjustedRegion = [__mapView regionThatFits:viewRegion];

    [__mapView setRegion:adjustedRegion animated:YES];

    [__mapView addAnnotation:annotationPoint];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:22:01.407

您`zoomLocation`在创建区域后设置坐标。先尝试设置`zoomLocation`

```
...
zoomLocation.latitude = 48.431638;
zoomLocation.longitude= 27.169436;
MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 0.5*METERS_PER_MILE, 0.5*METERS_PER_MILE);
MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
... 
```

# oracle - PL/SQL Developer 删除重复条目但保留相关列数据

> ID：15480293
> 
> 赞同：1
> 
> 时间：2013-03-18T15:17:18.293
> 
> 标签：oracle, plsql

您好我有一个查询，我需要删除或格式化代码的输出显示。请看下面：

询问：

```
select rfc."NUMBER",
ag.current_pending_groups
from smspadm.cm3rm1 rfc, smspadm.tv_approval_vw appr, smspadm.approvala1 ag
Order By rfc."NUMBER" 
```

当前结果：

```
NUMBER  CURRENT_PENDING_GROUPS

C301609 Comm/AT&T Vert DCAB
C302023 Collections DCAB
C302023 Comm/AT&T Vert DCAB
C302023 Fin-D2C-DNB DCAB
C302023 Interactive Recording DCAB
C302103 Collections DCAB
C302103 Wintel Server DCAB
C302103 Fin-D2C-DNB DCAB
C301813 GTHRA Vert DCAB
C301813 Tech Vert DCAB 
```

期望的结果：要么：

```
NUMBER  CURRENT_PENDING_GROUPS

C301609 Comm/AT&T Vert DCAB
C302023 Collections DCAB, Comm/AT&T Vert DCAB, Fin-D2C-DNB DCAB
C302103 Collections DCAB, Wintel Server DCAB, Fin-D2C-DNB DCAB
C301813 GTHRA Vert DCAB, Tech Vert DCAB 
```

或者应该是这样的：

```
NUMBER  CURRENT_PENDING_GROUPS

C301609 Comm/AT&T Vert DCAB
C302023 Collections DCAB
        Comm/AT&T Vert DCAB
        Fin-D2C-DNB DCAB
        Interactive Recording DCAB
C302103 Collections DCAB
        Wintel Server DCAB
        Fin-D2C-DNB DCAB
C301813 GTHRA Vert DCAB
        Tech Vert DCAB 
```

我应该使用什么查询来获得这个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:04:34.157

```
SELECT rfc."NUMBER",
  LISTAGG(ag.current_pending_groups, ', ')
   WITHIN GROUP (ORDER BY rfc."NUMBER") "CURRENT_PENDING_GROUPS"
   FROM smspadm.cm3rm1 rfc, smspadm.tv_approval_vw appr, smspadm.approvala1 ag
   GROUP BY rfc."NUMBER";

SELECT rfc."NUMBER",
   wm_concat(ag.current_pending_groups)
   FROM smspadm.cm3rm1 rfc, smspadm.tv_approval_vw appr, smspadm.approvala1 ag
   GROUP BY rfc."NUMBER"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:20:43.463

第一个变体

```
select 
  rfc."NUMBER",
  wm_concat(ag.current_pending_groups)  -- for 10g
  -- listagg(ag.current_pending_groups,',') within group (order by ag.current_pending_groups)  -- for 11g
  as CURRENT_PENDING_GROUPS
from smspadm.cm3rm1 rfc, smspadm.tv_approval_vw appr, smspadm.approvala1 ag
group by rfc."NUMBER"
Order By rfc."NUMBER" 
```

第二种变体

```
select
  case when
    row_number() over (partition by rfc."NUMBER" order by ag.current_pending_groups) = 1
  then
    rfc."NUMBER"
  end as "NUMBER",
  ag.current_pending_groups
from smspadm.cm3rm1 rfc, smspadm.tv_approval_vw appr, smspadm.approvala1 ag
Order By rfc."NUMBER", ag.current_pending_groups 
```

# javascript - js动态创建的点击功能复选框未定义

> ID：15480294
> 
> 赞同：1
> 
> 时间：2013-03-18T15:17:20.750
> 
> 标签：javascript, jquery, inputbox

我正在动态创建一个复选框，当执行 onclick 函数时，我在控制台中收到“函数未定义”错误。在单步执行中，代码在页面加载事件期间被读取，但在单击时会引发错误。我尝试将函数加载到 $(document).ready(); 但得到同样的错误：

*这些函数在页面加载时调用的函数内。 **'chkBox' 是未定义的函数**

```
function lyrBuild(lyrVar, lyrName) {
    $('<li>').attr({
        id: lyrVar.liID,
        class: 'layer'
    }).html($('<input>').attr({
        id: lyrVar.cbID,
        type: 'checkbox',
        onClick: "chkBox(" + "'" + lyrVar.liID + "'" + ")",
        checked: 'unchecked',
        name: lyrVar.Name,
        value: lyrVar.val
    })).appendTo('#layersList');
}

function chkBox(lyrId) {
    //switch statement goes here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:24:56.457

尝试像这样声明 dhkBox 函数：

```
var chkBox = function(lyrId) {
    //switch statement goes here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:26:16.733

你没有问题，但我还是给你一个答案；）

“这些函数在函数内部”，这意味着`chkBox`当您以这种方式调用它时它不可用。如果可能，请使用`.click()`, [doc here](http://api.jquery.com/click/)或`.on()`, 或放在`chkBox`函数之外。

# ios - UIAccessibility 更改 UITableView 画外音公告（第 # 行，共 # 行）

> ID：15480297
> 
> 赞同：6
> 
> 时间：2013-03-18T15:17:35.923
> 
> 标签：ios, tableview, accessibility, voiceover, uiaccessibility

启用 VoiceOver 后，用户可以使用 3 指滑动手势来滚动 TableView。VoiceOver 向用户口头宣布一个短语，指示他们在 tableview 上的位置，即可见的行，例如“第 1 到 4 行，共 5​​ 行”。

我想覆盖这个口头提示并让画外音向用户宣布其他内容。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-29T13:41:05.727

使用[UIScrollViewAccessibilityDelegate](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIScrollViewAccessibilityDelegate_Protocol/index.html)并实现方法[-accessibilityScrollStatusForScrollView：](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIScrollViewAccessibilityDelegate_Protocol/index.html#//apple_ref/occ/intfm/UIScrollViewAccessibilityDelegate/accessibilityScrollStatusForScrollView:)

**例子**

```
- (NSString *)accessibilityScrollStatusForScrollView:(UIScrollView *)scrollView
{
    return @"Your text";
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-25T13:27:41.577

您不能*只*更改消息。您将不得不覆盖`accessibilityScroll:`并进行滚动，然后发布滚动公告（至少我不知道任何其他方式）。不过也不是特别难。

## 该怎么办

由于您有一个表格视图，您可以使用 滚动到某一行`scrollToRowAtIndexPath:atScrollPosition:animated:`。您可以决定一个可访问性元素是 X 行数。在这种情况下，您可以从表格视图中获取一组可见行，并将 X 添加或删除到最后一个或第一个单元格的行（取决于滚动是向上还是向下）。

最后要宣布表格视图确实滚动了，您应该发布“页面滚动”通知并传递要阅读的文本。最后你应该返回`YES`说你处理了滚动（如果你不这样做，那么事件将继续传播）。

## 示例实现

一个基本的实现可能看起来像这样（我做出了一些可能会根据您的代码而改变的假设，就像只有一个部分一样）：

```
- (BOOL)accessibilityScroll:(UIAccessibilityScrollDirection)direction 
{
    BOOL isScrollingUp = NO;
    switch (direction) {
        case UIAccessibilityScrollDirectionUp: {
            isScrollingUp = YES;
        } break;

        case UIAccessibilityScrollDirectionDown: {
            isScrollingUp = NO;
        } break;

        default:
            // These cases are not handled
            return NO;
    }

    NSInteger numberOfCellsToScroll = 5; // Any number you'd like

    NSInteger newRow = -1;
    if (isScrollingUp) {
        newRow = [self.tableView indexPathsForVisibleRows][0].row - numberOfCellsToScroll;
    } else {
        newRow = [[self.tableView indexPathsForVisibleRows] lastObject].row + numberOfCellsToScroll;
    }

    [self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:newRow inSection:0] 
                          atScrollPosition:UITableViewScrollPositionMiddle 
                                  animated:YES];

    UIAccessibilityPostNotification(UIAccessibilityPageScrolledNotification,
                                    @"YOUR CUSTOM TEXT FOR THE SCROLL HERE");

    return YES; // We handled the scroll
} 
```

# arm - 手臂霓虹灯指令

> ID：15480299
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:17:48.810
> 
> 标签：arm, vectorization, simd, neon

我有一些代码，我想使用 Neon 指令来更改它，但我真的不知道如何完成它......有人可以帮助我吗？

```
void add(int n,float *a,float *b,float t) {
    int i, size = (n+2) * (n+2);
    for(i = 0; i < size; i++)
        a[i] += t * b[i];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:59:04.213

通过使用 NEON 内在函数.. 像这样：

```
void add(int n,float *a,float *b,float t) {
  int i, size = (n+2) * (n+2);
  float32x4_t temptt = vdupq_n_f32(t);
  for(i = 0; i < size; i+=4) {
    float32x4_t temp1 = vld1q_f32(a+i);
    float32x4_t temp2 = vld1q_f32(b+i);
    temp1 = vmlaq_f32(temp2, tempt, temp1);
    vst1q_f32(a + i, temp1);
  }
} 
```

这一次进行 4 次迭代，并且仅在 size 是 4 的倍数时才有效。

# c# - AxWindowsMediaPlayer 剪辑有时无法播放

> ID：15480303
> 
> 赞同：1
> 
> 时间：2013-03-18T15:17:57.053
> 
> 标签：c#, .net, windows, media-player

我有一个简单的单线程 Windows 窗体 .NET 4.5 应用程序，用户在其中收听口语（wav 文件），然后选择代表该词的正确图片。

问题是剪辑有时（非常罕见 - 大约 1% 的时间，完全随机）不会播放......

这是播放剪辑的方法：

```
 public static void PlayWordAudio(Word word, AxWMPLib.AxWindowsMediaPlayer player)
    {
        string tempFile = Path.GetTempFileName() + ".wav";

        MemoryStream stream = new MemoryStream(word.Audio);

        using (Stream fileStream = File.OpenWrite(tempFile))
        {
            stream.WriteTo(fileStream);
        }

        player.URL = tempFile;

        File.Delete(tempFile);
    } 
```

有人可以建议解决这个问题吗？也许我不应该在方法结束时删除文件？但是随后临时文件会堆积...

我在Windows 7...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:04:00.193

我猜该文件被删除的速度比播放速度快。

你可以试试这个而不是`File.Delete(tempFile);`利用[PlayStateChange](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562460%28v=vs.85%29.aspx)事件

```
player.PlayStateChange += (snd, psce) => {
     switch (psce.newState)
    {
        case 1:    // Stopped (maybe use 12 =>  Last )
            File.Delete(tempFile);
            break;
        default:
            Debug.WriteLine(psce.newState);
            break;
    }
}; 
```

如果您将播放器对象保留很长时间，您可能必须取消订阅该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:25:50.697

看来我解决了这个问题......实际上是文件的删除导致了这个......

解决方案：

```
public static void PlayWordAudio(Word word, AxWMPLib.AxWindowsMediaPlayer player)
    {
        string tempFile = Path.GetTempFileName() + ".wav";

        MemoryStream stream = new MemoryStream(word.Audio);

        using (Stream fileStream = File.OpenWrite(tempFile))
        {
            stream.WriteTo(fileStream);
        }

        player.URL = tempFile;

        RunDelayed(5000, File.Delete, tempFile); //if we delete file immediately then clip sometimes would not be played
    }        

    public delegate void DelayedFuncion(string param);

    public static void RunDelayed(int delay, DelayedFuncion function, string param = null)
    {
        System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();

        DelayedArgs args = new DelayedArgs() { delayedFunction = function, param = param };
        timer.Tag = args;
        timer.Tick += TimerElapsed;            
        timer.Interval = delay;

        timer.Start();
    }

    private static void TimerElapsed(object sender, EventArgs e)
    {
        System.Windows.Forms.Timer timer = sender as System.Windows.Forms.Timer;
        timer.Stop();
        DelayedArgs args = timer.Tag as DelayedArgs;
        args.delayedFunction(args.param);
    }

    class DelayedArgs
{
    public Util.DelayedFuncion delayedFunction;
    public string param;
} 
```

# arrays - 如何创建数组并将其从 KSH 传递到 Oracle sqlplus

> ID：15480309
> 
> 赞同：0
> 
> 时间：2013-03-18T15:18:07.223
> 
> 标签：arrays, loops, while-loop, sqlplus, ksh

我正在尝试创建一个 KSH 脚本，在该脚本中我试图创建一个数组，该数组将保存包含字符串值列表的文本文件的内容，并将该数组发送到 KSH 脚本中的 SQL 函数。这是我到目前为止所做的：

```
export text_file=$HOME/values.log
while read **line**; 

       do
       CmResTypUpd 
   done < $text_file 
```

ResTypUpd 执行以下操作：

```
CmResTypUpd () {
            sqlplus -s $db_user/$db_pass@$db_inst <<EOF

            SET VERIFY OFF
            SET HEADING OFF
            SET PAGESIZE 200
            SET LINESIZE 200
            SET FEEDBACK OFF

            update My_Table set Column_Field_To_Change='NEW_VALUE' where IND1_COLUMN_VALUE='SomethingSomething' and IND2_COLUMN_VALUE='**$line**';
            commit;
   exit;

    EOF

            } 
```

我得到的是脚本挂起并且什么都不做。

此外，脚本应该能够跨平台运行，即在任何`Unix`或`Linux`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:23:10.510

您需要将您的行作为参数传递给函数

```
export text_file=$HOME/values.log 
while read line; do CmResTypUpd "$line"; done < $text_file 
```

你的功能：

```
CmResTypUpd () {
    [...]
    update My_Table set Column_Field_To_Change='NEW_VALUE' 
    where IND1_COLUMN_VALUE='SomethingSomething' and IND2_COLUMN_VALUE='$1';
    [...]
} 
```

而且变量`**line**`应该是`line`

# php - 在两个 Web 浏览器客户端之间发送信息的方式？

> ID：15480311
> 
> 赞同：0
> 
> 时间：2013-03-18T15:18:21.540
> 
> 标签：php, javascript, ajax, websocket

我对以下问题进行了大量研究，但最终都指向了我无法使用的 Websocket，因为我的主机不允许命令行或 ssh。我也尝试过 postMessage(data, targetDomain) 技术，但这也不完全是我想去的地方。

这是我想要做的：

执行 javascript 从一个人到该页面上的其他用户，而无需重新加载它或任何东西。

示例：用户单击页面上的一个按钮，它会发送一个 JavaScript 代码，该代码会在每个其他侦听器页面上自动执行一个函数。有点像你可以说的聊天功能，但可能不那么密集？

这是我第一次探索这个领域，所以我对这些概念有点困惑。我已经阅读了提供类似套接字使用的程序的多个文档，但这里并没有真正的运气。（就像我说的，由于我的主机，我不能真正使用套接字）。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:57:51.463

如果您在不允许 WebSockets 的托管平台上，那么您可以将实时通信层外包给[托管的实时服务](http://www.leggetter.co.uk/2012/01/24/hosted-realtime-services-making-the-realtime-web-more-accessible.html)（*我为[Pusher](http://pusher.com)工作，这是一种这样的服务*）。

托管服务往往具有免费层，因此取决于您要实现的目标，这可能就足够了。如果没有，请联系他们，解释您的应用程序和您的情况，他们可能会提供帮助。

如果您想使用[自托管解决方案](http://www.leggetter.co.uk/real-time-web-technologies-guide#self-hosted)，那么您可能需要使用基于 HTTP 的解决方案。但是，同样，如果您在一个小型共享托管平台上，这可能会占用大量资源，并且您的托管服务可能会让您失望。

如果更新不是那么频繁，您可以在相当长的时间间隔内使用标准 AJAX 轮询。听起来你想避免这种情况。

就个人而言，我建议使用托管服务，因为 PHP 本身就很难实现，因为它是在考虑请求/响应的情况下构建的。

相关：[Heroku 上可能有类似实时 websocket 的行为吗？](https://stackoverflow.com/questions/14908212/realtime-websocket-like-behavior-possible-on-heroku)

# java - 创建 Java 回声音效

> ID：15480312
> 
> 赞同：0
> 
> 时间：2013-03-18T15:18:25.190
> 
> 标签：java, audio, javasound

因此，我试图通过将其分解为样本并将这些样本存储在数组中来操作 java 中的声音文件。然后我循环遍历更改每个样本的数组。我意识到 java 中已经有一个回声过滤器，但我需要设计我自己的，方法是让声音在整个声音剪辑中以不同的间隔重复，音量减小。我目前有一种控制音量的方法，但在让声音在当前声音文件的特定延迟处开始重复时，我感到很困惑。这是我到目前为止所拥有的：

```
public void echoEffect(int delay){
   SoundSample[] sampleArray = this.getSamples(); // get array

   SoundSample sample = null;                     // current sample obj
   int value = 0;                                 // value at sample

 // loop through SoundSample objects
 for(int i = 0, index = 0; index < sampleArray.length; i++,index++)
 {
  sample = sampleArray[index];    // get current obj
  value = sample.getValue();      // get the value
  sample.setValue(value*2);       // set the value
 }
} 
```

我认为我需要做的是将方法从 void 更改为 Sound 并返回延迟的声音文件。可能返回类似 value + value[i+delay]*(一些分数以减少声音)

新更新而不是发布：

无论如何，这就是我到目前为止所拥有的，我似乎无法让代码正常工作，我知道我已经接近了，但我需要在声音文件上输出回声效果的方法。这是我目前所拥有的：

```
public void echo(int delay){
   SoundSample[] sampleArray = this.getSamples();   // get array
   //Sound target = new Sound(sampleArray.length);

   SoundSample sampleDelay = null;
   SoundSample sample = null;                       // current sample obj

   int value = 0;                                   // value at sample
   int index = 0;
   double value2 = 0;
// loop through SoundSample objects
while (index < sampleArray.length)
 {
  sample = sampleArray[index]; // get current obj
  value = sample.getValue();     // get the value      
  sampleDelay = (sampleArray[delay-index]);
  value2 = (sampleDelay.getValue()*.6);
  sample.setValue(value + (int) value2);       // set the value
  index++;                                  // increment index
 }
} 
```

让我知道你们认为这一切似乎是出于某种原因改变幅度......发布SSCCE的问题是，我相信这是在使用一些不经常在java中使用的类，因此我只是在寻找有人帮助逻辑。我正在尝试遍历声音文件的样本，然后将延迟点的值设置为声音的开头，但音量较弱。IDK，如果我解释得对，但我希望这将是一个简单的修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:32:36.313

代替

`sampleDelay = (sampleArray[delay-index]);`

你要

`sampleDelay = (sampleArray[index-delay]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T03:04:30.483

你确定不是下面这个？

```
sampleDelay = (sampleArray[index*delay]); 
```

# wordpress - wordpress 中的 .htaccess 和 robots.txt

> ID：15480315
> 
> 赞同：0
> 
> 时间：2013-03-18T15:18:46.667
> 
> 标签：wordpress, .htaccess

我正在使用 Wordpress 运行一个图片库，用户将下载图片，我在 wordpress 的根目录中使用一个名为“下载”的文件夹。我将使用 .htaccess 在该下载文件夹中隐藏图像，

```
<Files ~ "\.(jpg|png|jpeg|gif)$">
Order allow,deny
Deny from all
</Files> 
```

这个 .httaccess 会阻止谷歌搜索吗？因为我的网站完全依赖图像。如果 Google bot 阻止，那么有没有办法使用 robots.txt 对其进行调整？如果是这样，请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:15:03.483

此代码将阻止对您的图像的任何 HTTP 访问，包括 Google bot 以及因此的 google 索引。如果你真的想阻止任何 http 访问并被索引，你可以除了 google bot ip 地址。这些网站引用了 Google、Yahoo、MSN bot ip：

[http://chceme.info/ips/](http://chceme.info/ips/)

[http://seofilelist.blogspot.fr/2012/03/google-bot-ip-list.html](http://seofilelist.blogspot.fr/2012/03/google-bot-ip-list.html)

[http://googlewebmastercentral.blogspot.fr/2006/09/how-to-verify-googlebot.html](http://googlewebmastercentral.blogspot.fr/2006/09/how-to-verify-googlebot.html)

但是，这种方式不是一个好的解决方案，并且使用 robots.txt，这似乎是不可能的。

# binding - 淘汰赛动态绑定问题

> ID：15480316
> 
> 赞同：3
> 
> 时间：2013-03-18T15:18:46.397
> 
> 标签：binding, knockout.js

考虑以下通过敲除映射插件生成的 ViewModel。

```
var originalData = {

"QuoteSelectedViewModel": {
  "ProductName": "Select",      
  "CoverQuotesViewModel": [
     {
        "Code": 1,
        "Label": "Première Assistance 24h/24 (GRATUITE)",
        "IsMandatory": true,
        "IsSelected": true,            
        "DependsOn": []
     },
     {
        "Code": 2,
        "Label": "Assistance PLUS 24h/24",
        "IsMandatory": false,
        "IsSelected": false,          
        "DependsOn": []
     },
      {
        "Code": 8,
        "Label": "Heurts Animaux / Force de la Nature",
        "IsMandatory": false,
        "IsSelected": false,        
        "DependsOn": [
           2
        ]
     },
  ]}
}

var viewModel = ko.mapping.fromJS(originalData);

ko.applyBindings(viewModel);

<div data-bind="with: QuoteSelectedViewModel">
selected quote is : <span data-bind="text: ProductName"></span>
 <!-- ko foreach: CoverQuotesViewModel -->
<br/>    
  <div data-bind: if: IsVisible>
    <input type="checkbox" data-bind="checked: IsSelected"></input>
    <input type="text" data-bind="value: Label, enable: IsSelected"></input>
  </div>
<!-- /ko -->
</div> 
```

现在，我想在 IsVisible 返回 false 时隐藏 div。IsVisible 尚不存在，它应该是 CoverQuotesViewModel 数组的每个元素上的计算 observable 函数。

如何在每个元素上生成这个计算的 observable 函数？

谢谢

***[编辑]*** 我在这里添加了一个 jsfiddle：http: [//jsfiddle.net/graphicsxp/fpKWM/](http://jsfiddle.net/graphicsxp/fpKWM/)

[EDIT2] 实际上淘汰文件很清楚如何做到这一点：

> 当然，如果您愿意，可以在 create 回调中再次调用 ko.mapping.fromJS。一个典型的用例可能是如果你想用一些额外的计算 observables 来扩充原始 JavaScript 对象：
> 
> var myChildModel = function(data) { ko.mapping.fromJS(data, {}, this);
> 
> ```
> this.nameLength = ko.computed(function() {
>     return this.name().length;
> }, this); } 
> ```

**[编辑]**

以下是 Paul 建议的完整代码：（getQuotesSuccess 是一个 AJAX 成功处理程序）

```
viewModel.getQuotesSuccess = function (result) {
var myCoverQuotesViewModel = function (data, parent) {
    var self = this;
    ko.mapping.fromJS(data, {}, this);

    self.IsVisible = ko.computed(function () {
        var visible = true;
        if (self.DependsOn().length > 0) {
            $.each(self.DependsOn(), function (index, value) {
                var dependency = viewModel.QuoteSelectedViewModel().CoverQuotesViewModel.filterByProperty("Code", value);
                if (dependency().length > 0) {
                    visible = visible & dependency()[0].IsSelected();
                } else {
                    visible = false;
                }
            });
        }

        return visible;

    }, this);
}

var mapping = {
    'CoverQuotesViewModel': {
        create: function (options) {
            return new myCoverQuotesViewModel(options.data, options.parent);
        }
    }
}

  ko.mapping.fromJS(result, mapping, viewModel);
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:30:30.430

好的，通过您的修改恢复到我之前的答案，因此查看此答案的其他任何人实际上都会得到正确的版本！

您需要创建一个子 viwe 模型，并使用映射插件自动填充它，然后添加您的计算 observable：

```
function CoverQuotesViewModel(data)
{
    var self = this;
    ko.mapping.fromJS(data, {}, self);

    // Copy the data to each property.
    self.IsVisible = ko.computed(function()
    {
            // your logic for each quote
    });
} 
```

然后您需要使用创建映射来映射主视图模型，并在此创建您的子视图模型：

```
var mapping = {
    'CoverQuotesViewModel': {
        create: function(options) {
            var model = new CoverQuotesViewModel(options.data);
            return model;
        }
    }
}
var viewModel = ko.mapping.fromJS(data, mapping); 
```

您不需要传递`this`到计算中，因为您引用的是 self，这是您存储的 this 版本。

# c# - 将字符串从非托管代码传递到托管

> ID：15480317
> 
> 赞同：4
> 
> 时间：2013-03-18T15:18:51.397
> 
> 标签：c#, marshalling, com-interop, unmanaged, managed

我在将字符串从非托管代码传递到托管代码时遇到问题。在我的非托管类（*unmanagedClass.cpp*）中，我有一个指向托管代码中的函数的指针：

```
TESTCALLBACK_FUNCTION testCbFunc; 
```

TESTCALLBACK_FUNCTION 接受一个字符串并且不返回任何内容：

```
typedef void (*TESTCALLBACK_FUNCTION )(char* msg); 
```

非托管类继承自 ITest 接口，该接口只有一种方法：

```
 STDMETHOD(put_TestCallBack) (THIS_
                  LPVOID FnAddress       
             ) PURE; 
```

在 managedClass.cs 我写了这段代码：

```
public class ManagedClass
{
    ITest unmanaged = new unmanagedClass();
    public delegate void TestDelegate(string info);
    ManagedClass()
    {
        unmanaged.put_TestCallBack(new TestDelegate(this.Test));
    }
    void Test(string info)
    {
            MessageBox.Show(info);
    }
}

[ComImport, Guid("<my guid here>")]
public class unmanagedClass
{
}

[ComImport, System.Security.SuppressUnmanagedCodeSecurity,
Guid("<my guid here>"),
InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface ITest
{
    [PreserveSig]
    int put_TestCallBack([MarshalAs(UnmanagedType.FunctionPtr), In] Capture.TestDelegate func); 
```

}

要从非托管代码调用 Test func 我使用这个

```
(*testCbFunc)("Func Uragan33::Execute has been started!"); 
```

但是当调用 managedClass.cs 中的 Test 方法时，我总是收到**空**字符串。为什么会这样？

预先感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:52:42.790

您的调用约定不匹配。C++ 代码中的 typedef 声明了一个具有默认调用约定的函数指针，即 __cdecl。但是托管代码中委托的默认值是 __stdcall。

否则，您将需要一个属性来告诉 pinvoke 编组器。让它看起来像这样：

```
 [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
    public delegate void TestDelegate(string info); 
```

在函数声明中删除 [MarshalAs]。如果可以的话，在 C++ 代码中修复 typedef 可能更可取，显然使所有内容保持一致是首选解决方案：

```
 typedef void (__stdcall * TESTCALLBACK_FUNCTION )(char* msg); 
```

* * *

无关，这是您需要修复的错误：

```
 unmanaged.put_TestCallBack(new TestDelegate(this.Test)); 
```

您创建的委托对象对垃圾收集器不可见。如果将在下一次 GC 上收集，则当本机代码进行回调时，您的代码将崩溃。您必须将委托对象存储在某处，以便 GC 始终看到引用。作为类中的一个字段，附加要求类对象需要保持足够长的生命周期，或者作为静态变量。

请注意，当您声明回调接口而不是委托时，所有这些问题如何消失。COM方式。

# sqlite - 区分大小写和不区分大小写，如 SQLite

> ID：15480319
> 
> 赞同：50
> 
> 时间：2013-03-18T15:18:55.133
> 
> 标签：sqlite, case-sensitive

在 SQLite 中，可以使用以下命令更改“LIKE”的区分大小写行为：

```
PRAGMA case_sensitive_like=ON;
PRAGMA case_sensitive_like=OFF; 
```

但是在我的情况下，我想执行一个查询，其中一部分区分大小写，一部分不区分大小写。例如：

```
SELECT * FROM mytable
WHERE caseSensitiveField like 'test%'
AND caseInsensitiveField like 'g2%' 
```

这可能吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-18T15:22:25.303

您可以在不区分大小写的字段上使用 UPPER 关键字，然后将 like 语句大写。例如

```
SELECT * FROM mytable 
WHERE caseSensitiveField like 'test%' 
AND UPPER(caseInsensitiveField) like 'G2%' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T15:53:58.750

使用普通比较，默认情况下区分大小写（除非您声明了 column `COLLATE NOCASE`）：

```
SELECT *
FROM mytable 
WHERE caseSensitiveField >= 'test'
  AND caseSensitiveField <  'tesu'
  AND caseInsensitiveField LIKE 'g2%' 
```

这仅适用于原始`LIKE`搜索前缀，但允许使用索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-04T07:34:51.990

我知道这是一个老问题，但是如果您使用 Java 进行编码并且遇到此问题，这可能会有所帮助。您可以注册一个处理类似检查的函数。我得到了这篇文章的提示：[https ://stackoverflow.com/a/29831950/1271573](https://stackoverflow.com/a/29831950/1271573)

我依赖于 sqlite jdbc 的解决方案：[https ://mvnrepository.com/artifact/org.xerial/sqlite-jdbc](https://mvnrepository.com/artifact/org.xerial/sqlite-jdbc)

在我的情况下，我只需要查看某个字符串是否作为另一个字符串的一部分存在（例如 '%mystring%'），所以我创建了一个 Contains 函数，但应该可以扩展它以进行更像 sql 的检查使用正则表达式或其他东西。

要在 SQL 中使用该函数来查看 MyCol 是否包含“searchstring”，您可以：

```
select * from mytable where Contains(MyCol, 'searchstring') 
```

这是我的包含功能：

```
public class Contains extends Function {

    @Override
    protected void xFunc() throws SQLException {
        if (args() != 2) {
            throw new SQLException("Contains(t1,t2): Invalid argument count. Requires 2, but found " + args());
        }
        String testValue = value_text(0).toLowerCase();
        String isLike = value_text(1).toLowerCase();

        if (testValue.contains(isLike)) {
            result(1);
        } else {
            result(0);
        }
    }
} 
```

要使用此功能，您必须先注册它。完成使用后，您可以选择销毁它。方法如下：

```
public static void registerContainsFunc(Connection con) throws SQLException   {
    Function.create(con, Contains.class.getSimpleName(), new Contains());
}
public static void destroyContainsFunc(Connection con) throws SQLException {
    Function.destroy(con, Contains.class.getSimpleName());
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-30T09:46:16.837

在 SQLite 中，您可以使用 GLOB 而不是 LIKE 进行模式搜索。例如：

```
SELECT * FROM mytable
WHERE caseSensitiveField GLOB 'test*'
AND caseInsensitiveField LIKE 'g2%' 
```

使用这种方法，您不必担心 PRAGMA。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-18T11:56:06.110

我使用正则表达式来做我需要的事情。我想找出所有出现的单词“In”，但不是全部小写。

```
select [COL] from [TABLE] where [COL] REGEXP '\bIn\b'; 
```

例子：

```
with x as (select 'in' Diff_Ins union select 'In' Diff_Ins)
select Diff_Ins from x where Diff_Ins REGEXP '\bIn\b'; 
```

# android - 从谷歌地图 v1 的数据库中绘制经纬度

> ID：15480323
> 
> 赞同：1
> 
> 时间：2013-03-18T15:18:58.213
> 
> 标签：android, database, geolocation, maps, overlay

我正在开发一个应用程序，我想在地图上从我的数据库中绘制纬度和经度。在我的数据库架构中，我有三列：

```
Name | Latitude | Longitude 
```

我可以从 SQLite 中检索数据`ArrayList`，但我面临的问题是我应该如何在 Google 地图上可视化这些值以及存储在数据库中的位置名称？另外，如何绘制从起始地理点到结束地理点的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:21:19.053

我通过创建逐项覆盖类使我的代码正常工作

```
package com.rahul.besttracker;

import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class HelloItemizedOverlay extends ItemizedOverlay {
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
Context mContext;

public HelloItemizedOverlay(Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
    // TODO Auto-generated constructor stub
}

public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));
    mContext = context;
}

@Override
protected OverlayItem createItem(int i) {
    return mOverlays.get(i);
}

@Override
public int size() {
    return mOverlays.size();
}

public void addOverlay(OverlayItem overlay) {

    mOverlays.add(overlay);
    populate();
}

@Override
protected boolean onTap(int index) {
    OverlayItem item = mOverlays.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.show();
    return true;
} 
```

}

我在我的主类中创建了一个这样的实例，每次我需要添加一个项目到覆盖时，我都调用了添加覆盖函数。最后我在地图上绘制了叠加层

# javascript - 从ajax添加元素时li动作不起作用

> ID：15480324
> 
> 赞同：1
> 
> 时间：2013-03-18T15:18:59.580
> 
> 标签：javascript, jquery, html

我有这个 div

```
<div class="foodsSection">
    <label>
        Foods:
    </label>
    <ul>
        <li>
            roma
        </li>
    </ul>
</div> 
```

这个jQuery：

```
$(".foodsSection li").click(function(){
        $(".addressesSection").css("display","block");
    }); 
```

当我按下`roma`jquery 时工作正常，但是当我按下`li`来自使用 jquery 的数据库的任何内容时，jquery 不工作，这是 jquery，它采用数据表单数据库，但它在`li`元素中

```
$(document).ready(function(){
    $(".RestauranstSection li").click(function (){
        var divYourOrder = $(".YourOrder");
        var li = $(".OMRestaurants li");
        $(".foodsSection").css("display", "block");
        var restaurantID = 8;
        var foodDive = $(".foodsSection ul");
        foodDive.html("");
        var lis = '';
        $.getJSON("http://localhost/TheEatTel/Food/getFoodForRestaurant/"+restaurantID+"/TRUE",function(data){
            for(var i=0;i<data.length;i=i+3){
                lis +="<li id='"+data[i+2]+"'>"+"<label>"+data[i]+"</label> <label>"+data[i+1]+"</label></li>";
            }
            lis+="";
            foodDive.html(lis);    
        });
    });
    $(".foodsSection li").click(function(){
        $(".addressesSection").css("display","block");
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:19:51.023

用这个 ：

```
$(".foodsSection ul").on('click', 'li', function(){ 
```

您调用绑定函数的 jQuery 集是在您进行绑定时计算的。收到事件后，它会检查您作为参数传递的选择器。请参阅[文档](http://api.jquery.com/on/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:22:53.743

您必须使用.on()而不是*.click(* *)*因为 click 方法不适用于已生成的 DOM。

```
$(".foodsSection li").on("click", 'li' ,function(){
    $(".addressesSection").css("display","block");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:23:48.643

使用委托事件，例如

```
$(".foodsSection").on("click", "li", function(){
    $(".addressesSection").css("display","block");
}); 
```

请参阅[http://api.jquery.com/on/ （并特别阅读有关直接和委托事件的部分，这解释了](http://api.jquery.com/on/)*为什么*您的代码不起作用而此代码起作用）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T15:26:38.400

解决方案将是

```
$('.foodsSection').on('click', 'li', function() {
}); 
```

您的代码中的问题是，您当时在每个现有的 'li' 元素上附加了侦听器。否则，当您使用时，`.on('click', 'li', function(){})`您将侦听器附加到父元素，因此它可以处理对其子元素的所有点击

# batch-file - 根据文件数将文件从文件夹移动到新文件夹

> ID：15480325
> 
> 赞同：2
> 
> 时间：2013-03-18T15:19:01.210
> 
> 标签：batch-file, automation, directory

这可能是一个特定的案例，但如果有正确的代码，我相信很多人都可以从中受益。

我在一个文件夹中有数千个文件，需要拆分为多个文件夹。每个文件夹需要比之前的文件多 1 个文件，并且需要这样命名。每个文件夹都需要至少有`X`数量的文件。例如，如果每个文件夹必须至少有 1 个文件，最终结果可能如下所示：

```
U:\Batch\Original\ -->
    file1.xml
    file2.xml
    file3.xml
    file4.xml
    file5.xml
    file6.xml

U:\Batch\Processed\ -->
    folder1.1 -->
        file1.xml
    folder2.2 -->
        file2.xml
        file3.xml
    folder3.3 -->
        file4.xml
        file5.xml
        file6.xml 
```

我已经开始[自己尝试这个，](http://pastebin.com/LZwDgUB4)但我觉得我很遥远。假设我在每个文件夹中至少需要 1000 个文件。如何在`.bat`程序中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:59:24.913

你在正确的轨道上。为了演示，首先我们需要创建一些文件来使用：

```
md c:\y
cd /d c:\y
for %i in (1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30) do echo.>%i.txt 
```

现在我们可以运行以下批处理文件`c:\y`来创建子文件夹并按照您的指示复制文件（但在此示例中最少有 3 个文件）：

```
@echo off

setlocal EnableDelayedExpansion

set cnt=1
set fldr=1
set min=3

for %%i in (*.txt) do (
  if !cnt! GTR !min! (
    set /a cnt-=1
    ren folder!fldr! folder!fldr!.!cnt!
    set cnt=1
    set /a fldr+=1
    set /a min+=1
  )

  md folder!fldr! > nul 2>&1

  copy "%%i" folder!fldr!

  set /a cnt+=1
)

set /a cnt-=1
ren folder!fldr! folder!fldr!.!cnt! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:57:04.827

干得好。这应该处理它。

```
@echo off
setlocal enabledelayedexpansion
set /a "minimum=1000, outer=minimum, inner=1"
set folder_prefix=folder
call :mkfolder

:: dir list, order by name, exclude directories, exclude this batch script
for /f "delims=" %%I in ('dir /b /o:n /a:-d ^| findstr /v "%~nx0"') do (
    if !inner! GTR !outer! (
        set /a "inner=1, outer+=1"
        call :mkfolder
    )
    copy "%%I" "!folder!" >NUL
    set /a "inner+=1"
)

:: rename final directory to reflect the number of files contained within
for /f "delims=" %%I in ("%folder%") do set "to=%%~dpnI"
set /a "inner-=1"
ren "%folder%" "%to%.%inner%"

goto :EOF

:mkfolder
set folder=%folder_prefix%!outer!.!outer!
if not exist "!folder!" mkdir "!folder!"
goto :EOF 
```

# vb.net - 动态组合框在 vb.net 中选择时重复添加项目

> ID：15480337
> 
> 赞同：0
> 
> 时间：2013-03-18T15:19:40.150
> 
> 标签：vb.net

```
Dim cbox As New ComboBox     // combo box declaration

        If (cmb_item.SelectedIndex = 0) Then  // option select by other combo box
            Label2.Text = "Enter the ID:"
            txt_id.Visible = True
            cbox.Visible = False
        ElseIf (cmb_item.SelectedIndex = 1) Then
            txt_id.Visible = False
            cbox.Visible = True
            Label2.Text = "Select Department:"
            cbox.Width = 202
            cbox.Height = 23
            cbox.Location = New Point(142, 39)
            gbox2.Controls.Add(cbox)
            cbox.Text = "--Select--"
            cbox.Items.Add("Computer Engineering")
            cbox.Items.Add("Electronics & Communication Engineering")
            cbox.Items.Add("Electrical Engineering")
            cbox.Items.Add("Instrumentation & Control Engineering ")
            cbox.Items.Add("Information Technology")
        ElseIf (cmb_item.SelectedIndex = 2) Then
            Me.Dispose()
        End If 
```

如果选择选项 0 文本框（txt_id）将出现，接下来我将选项更改为 1 组合框（cbox）将出现并隐藏文本框（txt_id）。通过同样的方式我更改选项，当 cbox 获得选择时，它使用现有项目更新 cbox.item。还有其他方法可以避免重复的 cbox 项目吗？

# ruby-on-rails - params.merge 命令不安全？

> ID：15480345
> 
> 赞同：2
> 
> 时间：2013-03-18T15:20:10.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

因此，我终于能够编写一些我需要的代码，如下所示：

```
 = link_to 'Clear', params.merge(:teachers => {:sort_column => 'teacher_name', :sort_direction => 'desc'}), :class => 'btn' 
```

注意我使用**了 params.merge**命令。

但是现在我通过 Brakeman gem 运行它，它说**params.merge**有一个跨站点脚本漏洞。

那么现在我该如何重写不使用 params.merge 的相同代码呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:49:08.830

没有理由使用（也有很多理由不使用）整个`params`哈希。只需拉出构建 url 所需的部分。由于您正在重定向到相同的操作和控制器，您可以将它们排除在外，Rails 将找出路径：

```
= link_to 'Clear', :teachers => ... 
```

如果您需要动作和控制器之外的特定参数，您可以将它们添加到：

```
= link_to 'Clear', :id => params[:id], :teachers => ... 
```

# javascript - 如何通过 csv-jQuery 解析 csv 并生成报告？

> ID：15480346
> 
> 赞同：1
> 
> 时间：2013-03-18T15:20:11.560
> 
> 标签：javascript, jquery, csv, jquery-csv

想象一下，你有这样的 csv 数据，我可以从我网页上的 textarea 中读取它们：

```
A,10,USA
B,5,UK
A,2,USA 
```

我正在尝试使用 cs-jQuery 来解析和处理这些数据以获得以下报告：

```
A has ran 12 miles with average of 6\. 
B has ran 5 miles with average of 5\. 
```

我编写的代码如下所示：

```
<script>
$(document).ready(function() {
    $('#calculate').click(function() {
        $('#report').empty();
        var data = $('#input').val();
        var values = $.csv.toObjects(data);
        $('#report').append(values);
        alert(values);
    });
});
</script> 
```

但我得到的只是`[object Object] [object Object]`......关于我应该做什么的任何建议？有什么方法可以用 jQuery 功能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:33:01.273

此函数[$.csv.toObjects()](https://github.com/evanplaice/jquery-csv/blob/master/docs/api.md#csvtoobjects)返回对象数组

> 用于将多行 CSV 数据解析为以 {header:value} 形式表示数据的对象数组。除非被覆盖，否则假定第一行数据包含标题。

您没有标头，因此您应该使用`$.csv.toArrays()`并迭代该数组：

```
$.each($.csv.toArrays(data), function(_, row) {
   $('#report').append('<div>' + row[0] + ' has ran ' + row[1] + ' miles</div>');
}); 
```

如果你想使用 toObjects 你需要把标题

```
person,miles,country
A,10,USA
B,5,UK
A,2,USA 
```

并使用 row.person row.miles 和 row.country 访问它

# scala - 使用 -deprecation 运行 SBT

> ID：15480347
> 
> 赞同：10
> 
> 时间：2013-03-18T15:20:13.800
> 
> 标签：scala, sbt

我的 project/build.scala 文件中似乎有警告（不在我的**SCALA 项目**中）。如何配置 SBT 以使用该`-deprecation`标志运行。

```
// Does not help so do not suggest it!
scalacOptions ++= Seq("-unchecked", "-deprecation") 
```

我知道 SBT 有`sbt.boot.properties`文件，但不知道标志是否应该进入那里。如果它是一个例子会很好。提前谢谢。

顺便提一句

我将 SBT 启动器用于 0.12.2，并且 SBT 0.12.2 和 0.11.3 都存在问题。我在 Ubuntu 上，以防万一。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T16:51:15.357

只需将`scalacOptions`设置放入`project/build.sbt`. 您的项目和构建定义的设置放在不同的文件中，因为它们必须在使用之前进行编译，并且由于您想要更改编译器设置，因此无法在同一个文件中处理。

**编辑**：只是为了防止混淆`./build.sbt`，`project/build.scala`和`project/build.sbt`是不同的。在第一个中，您可以放置​​项目的正常设置，在后两个中（从不一起使用），您可以放置​​影响项目文件编译的设置。

# android - 将“，”更改为“。” 在安卓中

> ID：15480348
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:20:17.710
> 
> 标签：android

我有一个字符串，其中有一个值：2,6。我怎样才能改变“，”上的“。” 我使用`x.replace(",", ".");`但不起作用。这是任何其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:21:39.260

尝试使用：

```
x = x.replace(",","."); 
```

在 Java 中，字符串是不可变的，所以你总是会从操作中得到一个新的字符串。您必须存储此新字符串，否则您的更改将丢失。`replace()`返回一个新的 String 对象，因此您需要保留对这个新对象的引用。您的旧字符串未修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:21:38.733

字符串是不可变的，它在字符串中修改后再次创建新对象。所以你需要分配结果。

这样做。

```
x= x.replace(",", "."); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T15:21:43.560

正确的做法是：

```
x = x.replace(",", "."); 
```

字符串是不可变的，无法更改。`x.replace`创建一个新字符串

# c# - 左连接选择器无法访问单个左表名

> ID：15480349
> 
> 赞同：0
> 
> 时间：2013-03-18T15:20:18.110
> 
> 标签：c#, linq

我正在编写 101 个 linq 示例，现在我在 #106。

我正在尝试用方法/lambda语法重写查询表达式以供我自己学习。

这是示例代码：

```
List<Customer> customers = GetCustomerList();
List<Supplier> suppliers = GetSupplierList();

var custSuppliers =
    from cust in customers
    join sup in suppliers on cust.Country equals sup.Country into ss
    from s in ss.DefaultIfEmpty()
    orderby cust.CompanyName
    select new
    {
        Country = cust.Country,
        CompanyName = cust.CompanyName,
        SupplierName = s == null ? "(No suppliers)" : s.SupplierName
    }; 
```

这是我到目前为止所拥有的：

```
var custSuppliers =
    customers.GroupJoin(suppliers, c => c.Country, s => s.Country, (c, s) => new { Customers = customers, Suppliers = suppliers })
        .OrderBy(i => i.Customers)
        .SelectMany(x => x.Suppliers.DefaultIfEmpty(), (x, p) =>    // p is the many field (i.e. customers)
            new
            {
                CompanyName = x.CompanyName,    // no definition for CompanyName
                Country = p.Country,
                SupplierName = p.SupplierName == null ? "(No suppliers)" : p.SupplierName
            }); 
```

我的理解是 SelectMany 接受参数 X 和 P，其中 X 是“左”表（即最多有 1 个），P 是“右”表，其中可能有 N 个（或空值）。

但不是 X 变量包含单个客户，而是包含供应商和客户的集合。

谁能解释这里发生了什么？

# windows-8 - Windows 8 Metro 应用程序的代码覆盖率不可用？

> ID：15480352
> 
> 赞同：1
> 
> 时间：2013-03-18T15:20:25.473
> 
> 标签：windows-8, microsoft-metro, code-coverage

我正在 VSUltimate 上开发 Metro 应用程序并有一些测试方法。

我想知道现在是否可以查看代码覆盖率？我把这个主题加红了，但它是在 2012 年发布的...... [VS2012 中的代码覆盖率是否适用于 Metro 风格的应用程序？](https://stackoverflow.com/questions/12029433/is-code-coverage-available-in-vs2012-for-metro-style-apps) 有什么改变吗？

谢谢

# php - 在 php 中检查空选择不会给出正确的结果

> ID：15480356
> 
> 赞同：0
> 
> 时间：2013-03-18T15:20:36.910
> 
> 标签：php, html, mysql

我有 sell.php 和一个 sell_form.php 文件。他们在销售方面工作良好，但如果他们为股票代码选择空值，我想尝试向用户发送错误消息。我已经实施

```
'if(["blank"]){
        apologize("You must select a stock symbol");
    }' 
```

我收到这条 if 语句的错误消息，但我也无法出售选定的股票。我不知道我在哪里犯了错误。我也尝试使用这个 if 语句

```
'if([empty($_POST["symbol"])){
        apologize("You must select a stock symbol");
    }' 
```

这会将我重定向到没有错误的主页。任何帮助，将不胜感激。这是我的两个文件的代码。出售.php

```
//configuration
require("../includes/config.php");

if ($_SERVER["REQUEST_METHOD"] == "POST") 
{

    if(empty($_POST["symbol"])){

        apologize("You must select a stock symbol");

    }  

    // lookup stock
    $stock = lookup($_POST["symbol"]);

    // lookup user's shares of stock being sold
    $shares = query("SELECT shares FROM shares WHERE id = ? AND symbol = ?",  $_SESSION["id"], $_POST["symbol"]);

    // calculate total sale value (stock's price * shares)
    $value = $stock["price"] * $shares[0]["shares"];

    $date = date("Y-m-d, H:i:s");

    // add the sale value to cash
    query("UPDATE users SET cash = cash + ? WHERE id = ?", $value, $_SESSION["id"]);

    // delete the stock from their portfolio 
    query("DELETE FROM shares WHERE id = ? AND symbol = ?", $_SESSION["id"], $_POST["symbol"]);  

    query("INSERT INTO history (id, symbol, soldOrBought, numberOfSharesBoughtOrSold, price, dateAndTime)
          VALUES (?, ?, 'Sold', ?, ?, ?)", $_SESSION["id"], strtoupper($_POST["symbol"]), $shares[0]["shares"], $stock["price"], $date );

redirect("/");
}
else
{

$rows = query("SELECT * FROM shares WHERE id = ?", $_SESSION["id"]);

    //create array to store the shares
    $shares = [];

    //for each of the user info

    foreach($rows as $row){

        //lookup stock info
        $stock = lookup($row["symbol"]);
        if($stock !== false){

            $shares[] = [
                "name" => $stock["name"],
                "price" => $stock["price"],
                "shares" => $row["shares"],
                "symbol" => $row["symbol"],
                "total" => $row["shares"]*$stock["price"]
            ];

        }
    }

// render portfolio
render("sell_form.php", ["shares" => $shares, "title" => "Sell"] );
}

?> 
```

出售表格.php

```
<ul class="nav nav-pills" >

<li >
    <a href="index.php">Portfolio</a>
</li>
<li>
    <a href="quote.php">Quote</a>
</li>
<li>
    <a href="buy.php">Buy</a>
</li>
<li>
    <a href="sell.php">Sell</a>
</li>
<li>
    <a href="history.php">History</a>
</li>
<li>
    <a href="deposit.php">Deposit Funds</a>
</li>    

</ul>
<form action="sell.php" method="post">
<fieldset>     
    <div class="control-group">

        <select name="symbol">
        <option value="blank"></option>

        <?php foreach ($shares as $symbol):?>
        <option value="<?= $symbol["symbol"]?>"><?= $symbol["symbol"]?></option>
         <? endforeach ?>
        </select>     

    </div>
    <div class="control-group">
        <button type="submit" class="btn">Sell all shares</button>
    </div>
</fieldset>
</form>
<div>
or <a href="logout.php">log out</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:28:50.777

您的选择列表可以包含一个“空白”选项，其值为“空白”，因此在表单的常规帖子上检查是否为空将不起作用。

你的支票应该是：

```
if(empty($_POST["symbol"]) || $_POST["symbol"]=="blank") {

    apologize("You must select a stock symbol");

} 
```

现在，当值完全丢失或值为“空白”时，它将显示此消息。另一种选择是更改选择列表以具有第一个选项，例如

```
<select name="symbol">
<option value=""></option> 
```

那么你所需要的只是一张支票`if (empty($_POST["symbol"])) { }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:29:39.780

根据我的理解，函数道歉（）正在打印输入文本，然后您必须在调用该函数后终止执行。这样您就可以收到错误消息。只需尝试如下，

```
if(empty($_POST["symbol"])){
apologize("You must select a stock symbol");
die();
} 
```

编辑：为了更多的理解，发布道歉（）定义也是如此。

# c++ - 使用 map 计算每个单词在文件中出现的次数。(c++)

> ID：15480357
> 
> 赞同：0
> 
> 时间：2013-03-18T15:20:38.230
> 
> 标签：c++, string, file-io, map

```
#include <iostream>
#include <fstream>
#include <cstdlib>
#include <string>
#include <map>

using namespace std;

int main()
{
    ifstream fin;
    fin.open("myTextFile.txt");
    if ( fin.fail()){
        cout << "Could not open input file.";
        exit(1);
    }

    string next;
    map <string, int> words;
    while (fin >> next){
        words[next]++;
    }
    cout << "\n\n" << "Number of words: " << words[next] << endl;

    fin.close();
    fin.open("myTextFile.txt");
    while (fin >> next){
        cout << next << ": " << words[next] << endl;
    }

    fin.close();
    return 0;
} 
```

我的主要问题是，当一个词出现不止一次时，它也会被列出不止一次。即，如果文本以“hello hello”开头，则 cout 产生：“hello: 2”'\n'“hello:2”

另外，我不想关闭，然后第二次重新打开文件。似乎它仍然在最后一个 while 循环的文件末尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:25:47.943

您不需要重新打开文件：

```
for (auto i = words.begin(); i != words.end(); i++)
{
  cout << i->first << " : " << i->second << endl;
} 
```

或更简单：

```
for (const auto &i : words)
{
  cout << i.first << " : " << i.second << endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:24:03.510

您需要遍历地图，而不是再次打开文件。

[查看此处](http://www.cplusplus.com/reference/map/map/begin/)提供的代码示例。

编辑：这里是一个遍历地图的代码示例

```
// map::begin/end
#include <iostream>
#include <map>

int main ()
{
  std::map<char,int> mymap;
  std::map<char,int>::iterator it;

  mymap['b'] = 100;
  mymap['a'] = 200;
  mymap['c'] = 300;

  // show content:
  for (std::map<char,int>::iterator it=mymap.begin(); it!=mymap.end(); ++it)
    std::cout << it->first << " => " << it->second << '\n';

  return 0;
} 
```

这是输出：

```
a => 200
b => 100
c => 300 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:26:33.227

您需要在设置地图后对其进行迭代，然后您不需要再次打开文件，这是一个简单的示例：

```
int main()
{
  std::map<std::string, int> m1 ;

  m1["hello"] = 2 ;
  m1["world"] = 4 ;

  for( const auto &entry : m1 )
  {
    std::cout << entry.first << " : " << entry.second << std::endl ;
  }
} 
```

预期的输出将是：

```
hello : 2
world : 4 
```

# html - html表格边框问题

> ID：15480359
> 
> 赞同：0
> 
> 时间：2013-03-18T15:20:43.370
> 
> 标签：html, css

我在其他一些 HTML 元素中有一个表格，它呈现得很奇怪 - 即使我在 css 中将其设置为折叠，边框空间也会出现。该表如下所示：

![在此处输入图像描述](../Images/fa44a0929176eefdf02630fc7ec61af8.png)

html是这样的：

```
<table cellspacing="0" border="1" class="scrollable-headers-only" title="" cellpading="0">
        <thead title="">
            <tr title="">
                <th class="check" title=""></th>
                <th class="type" title=""></th>
                <th class="name" title="">Name</th>
                <th class="address center-column" title="">Address</th>
                <th class="domain" title="">Domain</th>
                <th class="status" title="">Status</th>
            </tr>
        </thead>
    </table> 
```

而在 FireBug 中出现的 css 是这样的：

*   对于主表： ![在此处输入图像描述](../Images/b1d7e822b2c3e5b384f8e43eb1fddede.png)

*   对于每个 th：

![在此处输入图像描述](../Images/2b6d78eeda0368f4b17e57886dcea583.png)

我只添加了边框，也看到了单元格之间的 s[aces。我的问题是消除那个空间。我在表格中添加了 cellpading 和 cellspacing = 0 ，但没有任何区别。我添加了 css 以消除该空间，而渲染没有任何变化。

该表用作另一个表的标题，我需要将其列与另一个表对齐 - 正如您从图像中看到的那样，表下方有小线。我需要将此表与第二个表对齐，因为这个原因对于获得 100% 的精度很重要。

怎么了？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:36:00.027

我将从删除`display: inline-block;`for`th`和`table`元素开始。Firefox 将它们视为内联元素并插入额外的空间。另一种消除它的方法是设置元素，例如`font-size: 0;`元素。`table``font-size: 12px;``th`

# scala - Play2 和 Flash Scope，为什么我不能打印我的消息？

> ID：15480363
> 
> 赞同：0
> 
> 时间：2013-03-18T15:20:49.990
> 
> 标签：scala, playframework-2.1, flash-scope

在我当前的控制器中，我正在传递[文档中描述的 Flash 消息](http://www.playframework.com/documentation/2.1.0/ScalaSessionFlash)

**控制器：**

```
def test(token: String) = Action {
        Ok(views.html.mobile.smsReview(smsReviewForm.fill(model), grades, smstoken.get.token))
        .flashing("success" -> Messages("sms.form.write.review"))
      }
  } 
```

**我的观点：**

```
@(smsReviewForm: Form[SmsReview], grades: Seq[Grade], smstoken: String)(implicit request: RequestHeader) 
```

...

```
@request.flash.get("success").getOrElse("HELLO!").map { msg =>
        <div class="alert alert-info">
            @msg
        </div>
    } 
```

在视图中你好！是打印出来的，不是我的消息。但是，如果我检查 Chrome 中的标题，我的消息就在那里：

```
Content-Length:3596
Content-Type:text/html; charset=utf-8
Set-Cookie:PLAY_FLASH=success%3AHej%21+Skriv+din+rekommendation+nedan; Path=/; HTTPOnly 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:26:40.827

flash 作用域用于将消息“闪烁”到下一个请求。这主要在您重定向到另一个页面时使用。最常见的用例是表单帖子末尾的重定向。

文档的第一部分说明了这一点：

> *如果您必须跨多个 HTTP 请求保留数据，则可以将它们保存在 Session 或 Flash 范围内。Session 中存储的数据在整个用户 Session 期间都可用，而 Flash 范围中存储的数据仅对下一个请求可用。*

在您的情况下，您可以简单地将消息直接传递给视图，因为您在呈现视图时有可用的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:39:10.410

来自 Wikipedia 上的[HTTP Cookie](http://en.wikipedia.org/wiki/HTTP_cookie#Setting_a_cookie)页面

> Set-Cookie 是浏览器存储 cookie 并在将来的请求中将其发送回服务器的指令...

在响应中看到`SET_COOKIE`标头表明您向服务器发出的后续请求将发送 cookie，并且呈现的视图将有权访问 flash 范围内的数据（前提是您添加`(implicit flash: Flash)`到模板函数定义中）。

正如上面所说的[EECOLOR](https://stackoverflow.com/users/596816/eecolor)，您只需将数据作为参数传递给您的视图。在这种情况下，不需要使用 flash 示波器。

下面我调整了您的代码以将消息`String`作为参数传递给视图。

**控制器**

```
def test(token: String) = Action {
  Ok(views.html.mobile.smsReview(smsReviewForm.fill(model), grades, smstoken.get.token, "sms.form.write.review"))
} 
```

**看法**

```
@(smsReviewForm: Form[SmsReview], grades: Seq[Grade], smstoken: String, message: String)(implicit request: RequestHeader)
...
<div class="alert alert-info">@message</div> 
```

# javascript - 从不存在的站点请求 HTTP 响应时，Node.js 脚本会中断

> ID：15480366
> 
> 赞同：1
> 
> 时间：2013-03-18T15:20:52.200
> 
> 标签：javascript, node.js, http, request, response

使用 Node.js，当请求一个 HTTP 响应时，在最佳情况下，请求会返回一个 HTTP 响应。

但是，有时请求会中断，例如，该站点具有 404 代码，或者该站点根本不存在。当请求一批 URL 时，如果在请求的 1000 个 URL 中的第 200 个 URL 上有 404 代码，则整个脚本会中断。这是我的代码：

```
var hostNames = ['www.gizmodo.com','www.sitethatdoesnotexist123.com','www.google.com'];

for (i; i < hostNames.length; i++){

    var options = {
            host: hostNames[i],
            path: '/'
    };

  (function (i){
    http.get(options, function(res) {

        var obj = {};
        obj.url = hostNames[i];
        obj.statusCode = res.statusCode;
        obj.headers = res.headers;

        db.scrape.save(obj);
    }).on('error',function(e){
    console.log("Error Site: " + hostNames[i]);
    });
  })(i);
}; 
```

有没有办法，例如，如果该站点不存在，我只是跳到下一个 URL，而不是让脚本中断？

编辑：固定。感谢用户 DavidKemp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:23:47.590

使用 try/catch 块来捕获可能发生的任何错误，然后从那里继续。

例如：

```
var hostNames = ['www.gizmodo.com','www.sitethatdoesnotexist123.com','www.google.com'];

//moved the function out so we do not have to keep redefining it:
var get_url = function (i){
    http.get(options, function(res) {

        var obj = {};
        obj.url = hostNames[i];
        obj.statusCode = res.statusCode;
        obj.headers = res.headers;

        console.log(JSON.stringify(obj, null, 4));
    })
  };

for (i; i < hostNames.length; i++){

    var options = {
            host: hostNames[i],
            path: '/'
    };
    try {
       get_url(i);
    }
    catch(err){
       //do something with err
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:02:37.120

您需要将`error`处理程序绑定到您的请求。我还清理了一些代码。

```
hostNames.forEach(function(hostname), {
  var req = http.get({host: hostName}, function(res) {  
    var obj = {
      url: hostName,
      statusCode: res.statusCode,
      headers: res.headers
    };
    console.log(JSON.stringify(obj, null, 4));
  });

  req.on('error', function(err){
    console.log('Failed to fetch', hostName);
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:25:02.617

您可以使用 uncaughtException 事件。这让脚本即使在异常之后也能运行。[关联](http://nodejs.org/api/process.html#process_event_uncaughtexception)

```
process.on('uncaughtException', function(err) {
  console.log('Caught exception: ' + err);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T09:22:56.620

在撰写本文时，完整的文档位于[http://nodejs.org/api/http.html#http_http_get_options_callback](http://nodejs.org/api/http.html#http_http_get_options_callback)。[loganfsmyth 的回答](https://stackoverflow.com/a/15482596/26479)提供了一个有用的例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T14:01:40.263

```
var hostNames = ['www.gizmodo.com','www.sitethatdoesnotexist123.com','www.google.com'];

for (i; i < hostNames.length; i++){

    var options = {
            host: hostNames[i],
            path: '/'
    };

  (function (i){
    http.get(options, function(res) {

        var obj = {};
        obj.url = hostNames[i];
        obj.statusCode = res.statusCode;
        obj.headers = res.headers;

        db.scrape.save(obj);
    }).on('error',function(e){
    console.log("Error Site: " + hostNames[i]);
    });
  })(i);
}; 
```

添加了出现错误时的回调。记录在控制台上返回错误的站点。此错误通常由 404 或请求时间过长触发。

# asp.net-mvc - 遍历剃刀列表并在项目之间添加分隔符

> ID：15480370
> 
> 赞同：12
> 
> 时间：2013-03-18T15:21:00.523
> 
> 标签：asp.net-mvc, razor

我有一个要在剃刀视图中输出的项目列表。我想在每个项目之间添加分隔线，如下所示：

```
item1 | item2 | item3 
```

遍历项目的最简单方法是使用 foreach：

```
@foreach(var item in Model.items){
  <span>@item.Name</span> | 
} 
```

不幸的是，这在列表末尾添加了一个额外的分隔线。有没有一种简单的方法可以跳过最后的分隔线？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T15:27:04.823

您可以使用`string.Join`：

```
@Html.Raw(string.Join("|", model.Items.Select(s => string.Format("<span>{0}</span>", s.Name)))) 
```

使用`string.Join`否定检查最后一项的需要。

您可以将其与 Razor`@helper`方法混合使用以实现更复杂的标记：

```
@helper ComplexMarkup(ItemType item)
{ 
    <span>@item.Name</span>
}

@Html.Raw(string.Join("|", model.Items.Select(s => ComplexMarkup(s)))) 
```

您甚至可以创建一个辅助方法来抽象`Html.Raw()`and`string.Join()`调用：

```
public static HtmlString LoopWithSeparator
    (this HtmlHelper helper, string separator, IEnumerable<object> items)
{
    return new HtmlString
          (helper.Raw(string.Join(separator, items)).ToHtmlString());
} 
```

用法：

```
@Html.LoopWithSeparator("|",  model.Items.Select(s => ComplexMarkup(s))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T09:23:45.390

结合这里的其他答案和[这篇关于内联模板](http://blogg.sigma.se/en/Development/Mario-Ienasescu/Dates/2012/12/Inline-templates-in-Razor/)的文章，我想出了这个帮助方法，它可以放在一个扩展类中：

```
public static HelperResult Join<T>(this IEnumerable<T> list, Func<T, HelperResult> template, Func<T, HelperResult> separator)
{
    var first = true;
    var result = new HelperResult(writer =>
    {
        foreach (var item in list)
        {
            if (first == false)
                separator(item).WriteTo(writer);
            first = false;
            template(item).WriteTo(writer);
        }
    });

    return result;
} 
```

那么使用它的方法是

```
@Model.ListOfItems.Join(
    @<a href="@item.Href">
        @item.Name
    </a>, 
    @<text> | </text>) 
```

这在项目和分隔符中都支持 html。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T15:25:26.727

不确定这是最简单的方法，还是更优雅的方法，但你可以这样做；

```
@foreach ( var item in Model.items){
    <span>@item.Name</span> @(Model.items[Model.items.Count - 1] != item ? "|" : "")
} 
```

因此，您基本上是在检查是否`item`是列表中的最后一项。

没有尝试过此代码示例，因此您可能需要对其进行修改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T15:26:24.443

在循环中保留一个计数器变量并检查它是否是最后一项。

```
@{ int counter=0; }
@foreach(var item in Model.items){
  counter++;
  <span>@item.Name</span>
  if(counter<Model.Items.Count) 
  {
    @Html.Raw("|")
  } 
} 
```

简短的版本是

```
@{ int counter=0; }
@foreach(var item in Model.items){
  counter++;
  <span>@item.Name</span> @(counter< Model.items.Count?"|":"")
 } 
```

# python-2.7 - 用 fig.show() 内联绘制一个 IPython Notebook 图形？

> ID：15480379
> 
> 赞同：7
> 
> 时间：2013-03-18T15:21:30.467
> 
> 标签：python-2.7, matplotlib, ipython, ipython-notebook

我正在使用 IPython Notebook 调用内联模式；

```
%pylab inline 
```

以下代码立即在单元格处绘制了一个图形；

```
fig = plt.figure()
axes = fig.add_axes([0, 0, 1, 1]) 
```

但是我想在一个单元格中创建绘图/轴等，然后使用可能的绘图；

```
fig.show() 
```

如何更好地控制内联模式？如果我不使用 %pylab inline，它会在我不想要的单独窗口中创建绘图（并且通常会冻结窗口）。

版本；

```
Numpy: 1.7.0
Matplotlib: 1.2.1rc1
Python: 2.7.2 (default, Jun 24 2011, 12:22:14) [MSC v.1500 64 bit (AMD64)]
Pandas: 0.10.1
PyLab: 1.7.0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T17:07:13.070

所以我想你想要的是这样的：

```
from matplotlib.backends.backend_agg import FigureCanvasAgg as fc
fig = Figure()
canvas = fc(fig)
ax = fig.add_subplot(1, 1, 1)
ax.plot(arange(10)) 
```

要在另一个单元格中显示绘图，只需使用：

```
fig 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T16:53:31.600

您可能正在寻找禁用自动关闭图：

```
InlineBackend options
---------------------
--InlineBackend.close_figures=<CBool>
    Default: True
Close all figures at the end of each cell.
When True, ensures that each cell starts with no active figures, but it also
means that one must keep track of references in order to edit or redraw
figures in subsequent cells. This mode is ideal for the notebook, where
residual plots from other cells might be surprising.
When False, one must call figure() to create new figures. This means that
gcf() and getfigs() can reference figures created in other cells, and the
active figure can continue to be edited with pylab/pyplot methods that
reference the current active figure. This mode facilitates iterative editing
of figures, and behaves most consistently with other matplotlib backends,
but figure barriers between cells must be explicit. 
```

尽管如此，如果单元格的最后一行返回一个 fig 对象，IPython 将显示该图形，您可以通过以 a 结束它`;`或添加`pass`作为最后一行来避免这种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-13T14:59:27.050

使用较新[的 jupyter](/questions/tagged/jupyter "显示标记为“jupyter”的问题")和[matplotlib](/questions/tagged/matplotlib "显示标记为“matplotlib”的问题")

*   木星：4.6
*   Jupyter 笔记本：6.0
*   Matplotlib：3.1
*   ipykernel：5.1

您真正需要的是`matplotlib.pyplot.Figure`（在一个单元格中）创建您的图形，然后将该图形作为另一个单元格中的单元格值。例如

在单元格中`[1]`

```
%matplotlib inline 
```

在单元格中`[2]`

```
from matplotlib.pyplot import Figure
from numpy import arange 
from numpy.random import normal 

fig = Figure()
ax  = fig.add_subplot(111)

ax.plot(arange(10),normal(size=10),label='Data')
ax.set_xlabel('$x$')
ax.set_ylabel('$y$')
ax.legend(); 
```

最后在细胞中`[3]`

```
fig 
```

这应该足够了。请看下面的截图

[![截屏](../Images/073e1b1e5d0a3ff7210f0ae3ea88f1e6.png)](https://i.stack.imgur.com/TyGYP.png)

注意与`matplotlib.pyplot.ioff()`和类似的建议不起作用

# ruby-on-rails - 如何在 Windows 上为 Ruby 安装 sqlite3？

> ID：15480381
> 
> 赞同：40
> 
> 时间：2013-03-18T15:21:35.390
> 
> 标签：ruby-on-rails, ruby, windows, sqlite

作为 Ruby/Rails 的新手，在本周末尝试自己解决问题后，我正在尝试在这里寻求建议。

我在 FreeBSD 上完成了完整的 Ruby/Apache/Passenger 设置，我正在尝试完成将 Windows 用作 Ruby 开发环境的任务。

至今：

*   Ruby 已安装，v2.0.0p0 (2013-02-24) [x64-ming32]
*   Rails 已安装，v.3.2.12
*   我已经安装并注册了 Ruby 开发工具包。
*   我已将 sqlite3 dll/exe 复制到 Ruby“bin”文件夹（使用“使用 Ruby 启动命令提示符”控制台也在我的路径中。）
*   我可以成功启动 Rails 服务器，并继续[学习 http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)教程到 3.3。
*   ">rake db:create" 告诉我：

    请安装 sqlite3 适配器：（`gem install activerecord-sqlite3-adapter`sqlite3 不是捆绑包的一部分。将其添加到 Gemfile。）

我对此没有“理解”。尝试安装 activerecord-sqlite3-adapter 给我一个“找不到有效的 gem...”

*   ">gem install sqlite3" 返回：

    `Building native extensions. This could take a while...` `ERROR: Error installing sqlite3:` `ERROR: Failed to build gem native extension.`

    `D:/Development/Ruby200-x64/bin/ruby.exe extconf.rb` `checking for sqlite3.h... *** extconf.rb failed ***`

现在我被困在我什至不知道我的 Ruby on Windows 安装处于什么状态的地步。我正在尝试遵循主要的 Rails 教程，它没有指定任何这些问题（可能是因为 Ruby在 Windows 上似乎对很多人来说是一种自然的痛苦。）

我错过了什么？！？我只是想在 Windows 上为 Ruby 安装 sqlite3，看起来很简单吧？

如果我这样做`">rais db"`，则会显示 SQLite shell：

`SQLite version 3.7.15.2 2013-01-09 11:53:05`

与无法解决我的问题的步骤类似的问题： [在 Windows 7 上安装 SQLite 3.6](https://stackoverflow.com/questions/1734629/installing-sqlite-3-6-on-windows-7)

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-15T19:14:35.740

即使问题已得到解答，我仍想发布我的研究以帮助他人。我在网上找到了很多信息，但是作为一个 Ruby 新手，我很难跟上所有这些。基本答案来自以下帖子[https://github.com/luislavena/sqlite3-ruby/issues/82](https://github.com/luislavena/sqlite3-ruby/issues/82)，其中包含“paulwis”关于如何为 ruby​​ 2.0.0-p0 正确安装 sqlite3 的说明以及对[https 的一些评论： //github.com/rails/rails/issues/10150](https://github.com/rails/rails/issues/10150)。所以这里是：

1.  为您的设置安装 Ruby Devkit（DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe，因为我使用的是 x64 机器）
2.  从 Sqlite.org 下载并解压 autoconf 包
3.  运行 msys.bat（它位于 ruby​​ devkit 根文件夹内）
4.  cd 进入您下载 sqlite 源的路径（例如：如果您是 MSYS/MINGW32 的新手，则路径“c:\dev\sqlite3”的路径为“cd /c/dev/sqlite3”）
5.  运行“./configure”
6.  运行“制作”
7.  运行“制作安装”
8.  再次获取 sqlite3 gem，这次指定平台和新编译的二进制文件的路径：

    ```
    gem install sqlite3 --platform=ruby -- --with-sqlite3-include=[path\to\sqlite3.h] --with-sqlite3-lib=[path\to\sqlite3.o] 
    ```

    例如：

    ```
    gem install sqlite3 --platform=ruby -- --with-sqlite3-include=/c:/dev/sqlite3/ --with-sqlite3-lib=/c:/dev/sqlite3/.libs/ 
    ```

    （来自步骤 4 中给出的路径）

9.  检查您的 rails 应用程序的 Gemfile.lock 并确保它指向正确的 sqlite3 版本。我的是“sqlite3（1.3.7-x86-mingw32）”并手动将其更改为“sqlite3（1.3.7-x64-mingw32）”。删除平台也可以：“sqlite3 (1.3.7)”。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-13T14:31:20.283

我能够使用以下命令在 win XP32 上安装带有 ruby​​2.0.0 的 sqlite3：

`c:\>gem install sqlite3 --platform=ruby -- --with-sqlite3-dir=C:/distr/sqlite --with-sqlite3-include=C:/distr/sqlite`

文件夹`C:/distr/sqlite`包含以下文件

*   外壳程序
*   sqlite3.c
*   sqlite3.h
*   sqlite3ext.h
*   sqlite3.def
*   sqlite3.dll

所以，基本上我已经提取`sqlite-amalgamation-3071602.zip`和`sqlite-dll-win32-x86-3071602.zip`到`C:/distr/sqlite`.

**小心**

您仍然需要将副本`sqlite3.dll`和`sqlite3.def`某处放入 PATH。恕我直言，最好将 sqlite3 二进制文件保存在 ruby​​ 的 bin 文件夹中。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-05-10T17:05:12.957

这是一个旧线程，但仍然相关。

对我们来说，它就像编辑`Gemfile`和添加一个特定版本的 sqlite 一样简单。

```
gem 'sqlite3', '~> 1.3.13' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-09T00:25:09.533

```
#!/usr/bin/env sh

mkdir c:/sqlite3x86
wget -P c:/sqlite3x86 http://packages.openknapsack.org/sqlite/sqlite-3.7.15.2-x86-windows.tar.lzma
cd c:/sqlite3x86
bsdtar --lzma -xf c:/sqlite3x86/sqlite-3.7.15.2-x86-windows.tar.lzma
gem install sqlite3 --platform=ruby -- --with-opt-dir=c:/sqlite3x86
cd c:/
rm -rf c:/sqlite3x86 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-06T11:37:23.610

对于 Windows，请访问`C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/sqlite3-1.3.13-x64-mingw32/lib/sqlite3.rb`

并确保

`require "sqlite3"`而不是原生的

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-10T07:53:25.570

从这里获取胖二进制文件

[https://ci.appveyor.com/project/MSP-Greg/sqlite3-ruby/build/3/job/hhk6ie8gdo545svr/artifacts](https://ci.appveyor.com/project/MSP-Greg/sqlite3-ruby/build/3/job/hhk6ie8gdo545svr/artifacts)

和

```
gem install c:\path\to\downloaded_gem.gem 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T17:54:23.620

为了后代，我想我会从评论中给出答案。问题似乎是我抓住了一个新版本的 Ruby/Rails（用于 Windows），它“还”与 SQLite3 不兼容。

我降级到 1.9.x 并且能够运行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-01T18:17:09.590

在 Windows 机器上设置 Ruby on Rails 的最简单方法是使用 RailsInstaller，它会自动为您安装和配置 sqlite3。一步。

[http://railsinstaller.org/en](http://railsinstaller.org/en)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-18T18:45:11.343

您应该遵循以下程序：

1.  `gem install bundler` （添加宝石文件_）
2.  `gem 'sqlite3', ' < 1.4'`（添加宝石文件_）

然后运行：

```
install bundler 
```

# ant - 用 Ant 启动 Jboss。命令执行不起作用

> ID：15480388
> 
> 赞同：0
> 
> 时间：2013-03-18T15:21:50.010
> 
> 标签：ant, jboss, exec

我尝试用 ant 启动 JBoss。当我执行这个脚本时：

```
<target name="start-jboss" >
         <exec executable="${jboss.bin.dir}\run.bat" >
                       <arg line="--configuration=Myserver -b localhost" />
         </exec>

</target> 
```

JBoss 在这一步被阻塞：

```
 [exec] 15:52:55,373 INFO  [AjpProtocol] Initializing Coyote AJP/1.3 on ajp-localhost%2F127.0.0.1-8009 
```

但是当我运行 run.bat 时它可以工作......当我在 exec 中添加 spawn="true" 时它是一样的。

我认为问题来自日食......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:34:26.743

要运行批处理文件，请使用 cmd 作为可执行文件，例如：

```
<exec dir"yourworkingdir" executable="cmd" failonerror="true">
<arg line="/c ${jboss.bin.dir}\run.bat --configuration=Myserver -b localhost"/>
</exec> 
```

如果`arg line=...`不起作用，请使用`arg value=...`每个参数。

**编辑：**如果您在使用批处理文件时遇到问题，为什么不摆脱使用该附加批处理文件并直接使用[java 任务，如此](http://ant.apache.org/manual/Tasks/java.html)[处](http://shrubbery.mynetgear.net/c/display/W/Starting+JBoss+with+ANT)所述？

# excel - Excel VBA 检查目录是否存在错误

> ID：15480389
> 
> 赞同：42
> 
> 时间：2013-03-18T15:21:52.813
> 
> 标签：excel, vba, file, directory

我有一个电子表格，单击按钮后，它将通过将所有内容复制/粘贴到新工作簿来复制自身，并使用取决于某些变量值的名称保存文件（取自电子表格上的单元格）。我目前的目标是让它根据客户名称的名称（保存在变量中的单元格值）将工作表保存在不同的文件夹中，虽然这在第一次运行时有效，但之后出现错误。

代码检查目录是否存在，如果不存在则创建它。这有效，但在创建后，第二次运行它会引发错误：

> 运行时错误 75 - 路径/文件访问错误。

我的代码：

```
Sub Pastefile()

Dim client As String
Dim site As String
Dim screeningdate As Date
screeningdate = Range("b7").Value
Dim screeningdate_text As String
screeningdate_text = Format$(screeningdate, "yyyy\-mm\-dd")
client = Range("B3").Value
site = Range("B23").Value

Dim SrceFile
Dim DestFile

If Dir("C:\2013 Recieved Schedules" & "\" & client) = Empty Then
    MkDir "C:\2013 Recieved Schedules" & "\" & client
End If

SrceFile = "C:\2013 Recieved Schedules\schedule template.xlsx"
DestFile = "C:\2013 Recieved Schedules\" & client & "\" & client & " " & site & " " & screeningdate_text & ".xlsx"

FileCopy SrceFile, DestFile

Range("A1:I37").Select
Selection.Copy
Workbooks.Open Filename:= _
    "C:\2013 Recieved Schedules\" & client & "\" & client & " " & site & " " & screeningdate_text & ".xlsx", UpdateLinks:= _
    0
Range("A1:I37").PasteSpecial Paste:=xlPasteValues
Range("C6").Select
Application.CutCopyMode = False
ActiveWorkbook.Save
ActiveWindow.Close

End Sub 
```

你必须原谅我在这方面缺乏知识，我还在学习。我有一种非常强烈的感觉，它与目录检查逻辑有关，因为当抛出错误时，该`MkDir`行被突出显示。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-03-18T16:35:24.133

要使用 来检查目录是否存在`Dir`，您需要指定`vbDirectory`第二个参数，例如：

```
If Dir("C:\2013 Recieved Schedules" & "\" & client, vbDirectory) = "" Then 
```

请注意，如果指定的路径已经作为目录*或文件*存在（假设文件不具有任何只读、隐藏或系统属性）`vbDirectory`，则 with`Dir`将返回非空字符串。您可以确定它是目录而不是文件。*`GetAttr`*

 ** * *

## 回答 #2

> 赞同：34
> 
> 时间：2017-01-02T23:34:12.940

使用对象的`FolderExists`方法`Scripting`。

```
Public Function dirExists(s_directory As String) As Boolean
    Dim oFSO As Object
    Set oFSO = CreateObject("Scripting.FileSystemObject")
    dirExists = oFSO.FolderExists(s_directory)
End Function 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-18T05:53:47.033

为了确定一个*文件夹*存在（而不是一个*文件*），我使用这个函数：

```
Public Function FolderExists(strFolderPath As String) As Boolean
    On Error Resume Next
    FolderExists = ((GetAttr(strFolderPath) And vbDirectory) = vbDirectory)
    On Error GoTo 0
End Function 
```

它既适用`\`于最后，也适用于没有。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-25T11:48:34.730

我最终使用：

```
Function DirectoryExists(Directory As String) As Boolean
    DirectoryExists = False
    If Len(Dir(Directory, vbDirectory)) > 0 Then
        If (GetAttr(Directory) And vbDirectory) = vbDirectory Then
            DirectoryExists = True
        End If
    End If
End Function 
```

这是@Brian 和@ZygD 答案的混合。我认为@Brian 的回答不够，不喜欢`On Error Resume Next`@ZygD 的回答中使用的

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-19T17:31:18.767

```
If Len(Dir(ThisWorkbook.Path & "\YOUR_DIRECTORY", vbDirectory)) = 0 Then
   MkDir ThisWorkbook.Path & "\YOUR_DIRECTORY"
End If 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-03T03:23:37.270

这是最干净的方式......到目前为止：

```
Public Function IsDir(s) As Boolean
    IsDir = CreateObject("Scripting.FileSystemObject").FolderExists(s)
End Function 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-08-24T22:08:18.070

您可以将 WB_parentfolder 替换为“C:\”之类的内容。对我来说 WB_parentfolder 正在获取当前工作簿的位置。file_des_folder 是我想要的新文件夹。这会根据需要创建尽可能多的文件夹。

```
 folder1 = Left(file_des_folder, InStr(Len(WB_parentfolder) + 1, file_loc, "\"))
        Do While folder1 <> file_des_folder
            folder1 = Left(file_des_folder, InStr(Len(folder1) + 1, file_loc, "\"))
            If Dir(file_des_folder, vbDirectory) = "" Then      'create folder if there is not one
                MkDir folder1
            End If
        Loop 
```*

# data-binding - 绑定数据透视表头模板

> ID：15480393
> 
> 赞同：2
> 
> 时间：2013-03-18T15:22:01.543
> 
> 标签：data-binding, pivot, windows-phone, mvvm-light

我添加了一个`Pivot Control`和三个。每个都有一个原样。每个都有一个字符串属性。我想编辑，创建 a并将其属性绑定到，但由于某种原因它不起作用。我确定这是因为 的为空，但我认为它会从特定的. 这是标题模板的代码。`PivotItems``Blend``PivotItem``ViewModel``DataContext``ViewModel``Title``Header Template``TextBlock``Text``Title``DataContext``Header Template``PivotItem``xaml`

```
 <DataTemplate x:Key="HeaderTemplate">
        <Grid Height="47" Width="354">
            <TextBlock Margin="8,0,64,8" TextWrapping="Wrap" Text="{Binding Title}" d:LayoutOverrides="Width" FontSize="24" Foreground="Red"/>
        </Grid>
    </DataTemplate>

    <controls:Pivot TitleTemplate="{StaticResource TitleTemplate}" HeaderTemplate="{StaticResource HeaderTemplate}">
        <!--Pivot item one-->
        <controls:PivotItem DataContext="{Binding Home, Mode=OneWay}">
            <Grid>
                <ListBox x:Name="listBox" ItemsPanel="{StaticResource HomeItemsPanel}" ItemTemplate="{StaticResource HomeItemTemplate}" ItemsSource="{Binding Tiles}">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="SelectionChanged">
                            <GalaSoft_MvvmLight_Command:EventToCommand Command="{Binding OnSelectionChanged}" CommandParameter="{Binding SelectedIndex, ElementName=listBox}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                </ListBox>
            </Grid>
        </controls:PivotItem>
        <controls:PivotItem Margin="0,8,0,1">
            <Grid/>
        </controls:PivotItem>

        <!--Pivot item two-->
        <controls:PivotItem DataContext="{Binding More, Mode=OneWay}">
            <Grid/>
        </controls:PivotItem>
    </controls:Pivot> 
```

我想创建一个更复杂的东西`Header Template`，但现在我正在测试是否可以绑定它，然后再继续处理不仅仅是 TextBlock 的东西。我知道我可以使用 a `List`of `ViewModels`，`PivotControl.ItemSource`但是我必须使用 a`DataTemplateSelector`等等，我不希望那样。

所以我想我的问题是这样的，我怎样才能让 HeaderTemplate 继承相应的 DataContext `PivotItem`？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:14:06.380

那是行不通的。您应该按以下方式编写 HeaderTemplate：

```
<controls:Pivot.HeaderTemplate>
    <DataTemplate>
        <TextBlock Text="{Binding}" />
    </DataTemplate>
</controls:Pivot.HeaderTemplate> 
```

Textblock 将从 PivotItem 的 Header 属性接收绑定。对于每个 PivotItem，您绑定其 Header：

```
<controls:PivotItem Header="{Binding Title}">
    <Grid/>
</controls:PivotItem> 
```

唯一的问题仍然是将每个数据透视项绑定到它自己的数据上下文。您可以使用以下代码为每个项目手动执行此操作：

```
<controls:PivotItem DataContext="{Binding Item1}" Header="{Binding Title}">
    <Grid/>
</controls:PivotItem>
<controls:PivotItem DataContext="{Binding Item2}" Header="{Binding Title}">
    <Grid/>
</controls:PivotItem> 
```

# jquery - jQuery-Ajax 调用无法通过基本身份验证

> ID：15480394
> 
> 赞同：0
> 
> 时间：2013-03-18T15:22:04.280
> 
> 标签：jquery, web2py

我有 2 个 Web2Py 应用程序，我称它们为*Provider*和*Receiver*。*Provider*提供基本的身份验证功能，而*Receiver*使用它来登录。用户已在*Provider*本地的数据库中创建，并且*Receiver*使用这些用户凭据成功登录。但是，当我的控制器中有 RESTful 方法时，只有当我使用相同的用户名通过相同的浏览器会话手动登录到*Provider时，对它们的 jQuery-Ajax 调用才有效。*如果我不这样做并且只从*Receiver*登录，它会说成功登录，但没有成功执行 Ajax GET 调用。如果我登录*Reciever*使用一个用户名，对于使用不同用户名的*Provider*，Ajax GET 获取登录到*Provider*的用户的信息。我把它作为脚本放在`index.html`Receiver*中*：

```
var gBaseUrl="http://127.0.0.1:8000/Provider/sites/";
$(document).ready(function(){
  $.ajax({
      type: "GET",
      async: true,
      url: gBaseUrl+"get_username",
      dataType: "text",
      success: function(data){
        $('#ContentView').append('<p> succeeded '+data+'</p>');
      }
      failure: function(data){
        $('#ContentView').append('<p> failed '+data+'</p>');
      }
    });
}); 
```

如果我没有在本地登录到*Provider ，这不会对 ContentView 添加任何内容。*这就是*Provider*的`db.py`样子：

```
## configure auth policy
auth.settings.registration_requires_verification = True
auth.settings.registration_requires_approval = True
auth.settings.reset_password_requires_verification = True
auth.settings.allow_basic_login = True
auth.settings.controller = 'default'
auth.settings.hmac_key = None
auth.settings.mailer = None
auth.settings.login_after_registration = False 
```

为了实现基本身份验证，Provider*具有*`default.py`以下功能：

```
def basic_auth():
    """
    checks if the user is logged in and returns True/False.
    if so user is in auth.user as well as in session.auth.user
    """
    auth.basic()
    if auth.user:
        print("login success!")
        print(auth.user.username, " is logging in!")
        session.forget()
        return True
    else:
        print("login failed!")
        return False 
```

然后返回用户名，在*Provider*的`site`控制器中，我有：

```
@request.restful()
@auth.requires_login()
def get_username():
    def GET():
        return str(auth.user.username)
    return locals() 
```

ContentView 只不过`div`是我在`index.html`.

我还`requires`稍微修改了装饰器的实现`gluon/tools.py`：

```
if current.request.ajax:
    raise HTTP(401)
...
elif self.settings.allow_basic_login_only or \
        basic_accepted or current.request.is_restful:
    raise HTTP(401, **{'WWW-Authenticate': 'Basic realm="My Realm"'})
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:54:21.433

如果要通过基本身份验证登录，则需要在请求的 HTTP 标头中提供登录凭据，而 Ajax 代码不会这样做。在任何情况下，更好的选择可能是使用内置的[中央身份验证服务](http://web2py.com/books/default/chapter/29/09#Central-Authentication-Service)功能。由于您从浏览器发出 Ajax 请求，会话 cookie 将随请求一起发送，因此没有理由将自己限制为基本身份验证。

更新：如果您需要使用基本身份验证，请注意 jQuery[`.ajax()`](http://api.jquery.com/jQuery.ajax/)方法采用`username`和`password`参数。它还允许您直接设置标题。您还可以让服务器发送 401 响应并让浏览器处理凭据提示，但这并不是最好的用户体验。

此外，如果 Provider 应用程序将在不同的域上运行，请记住浏览器对Ajax 请求施加[相同的来源策略。](http://en.wikipedia.org/wiki/Same_origin_policy)在这种情况下，您需要实现[JSONP](http://en.wikipedia.org/wiki/JSONP)或[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

# java - Java - 通过哈希映射

> ID：15480395
> 
> 赞同：1
> 
> 时间：2013-03-18T15:22:10.683
> 
> 标签：java, while-loop, hashmap, enumeration, concurrenthashmap

我正在更新一些我有一段时间没有接触过的旧 Java 代码，并且有一个关于以下代码片段的快速问题：

```
private Map<String, Example> examples = new ConcurrentHashMap<String, Example>(); 
```

...

```
public void testMethod() {
    Enumeration allExamples = examples.elements();
    while (allExamples.hasMoreElements()){
    //get the next example
    Example eg = (Example) allExamples.nextElement();
    eg.doSomething(); 
```

}

它以前使用过哈希表，但我已将其替换为线程安全哈希表。我的问题是，迭代哈希图的最佳方法是什么？因为枚举已被弃用。我应该只为每个循环使用一个吗？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:23:53.887

是的，使用[**for-each 循环**](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)，引入 for **-each/enhanced 循环**是为了`iterating`在集合/数组上进行。[**但是只有当且仅当您的集合实现Iterable**](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)接口时，您才能使用 for-each 遍历集合。

```
for(Map.Entry<String, Example> en: example.entrySet()){
System.out.println(en.getKey() + "  " + en.getValue());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:26:42.603

由于您只处理值：

```
public void testMethod() 
{
    for (Example ex : allExamples.values())
    {
        ex.doSomething();
    }
} 
```

# java - 如何将对象列表发送到 View 并返回到控制器中的 Post 方法

> ID：15480397
> 
> 赞同：34
> 
> 时间：2013-03-18T15:22:17.697
> 
> 标签：java, spring-mvc, post

假设我有类`Person`，我制作了一个`Person`实例列表并将此列表添加到`Model`.

```
List<Person> persons = new ArrayList<Person>();
model.addAttribute("persons",persons);
return "savePersons"; 
```

在`View`页面中，我有一个表格：

```
<form:form method="post" action="savePerson" modelAttribute="persons">
    <c:forEach var="person" items="${persons}">
        <form:input path="person.FName" name="FName" id="FName" value="" />
        <form:input path="person.LName" name="LName" id="LName" value="" />
    </c:forEach>

    <button type="submit"></button>
</form:form> 
```

当我单击提交按钮时，我想将`Person List`POST 绑定到控制器上的方法..

```
@RequestMapping(value = { "savePerson" }, method = RequestMethod.POST)
public String savePerson(Model model, HttpServletRequest request,
        HttpSession session,@ModelAttribute("persons")List<Person> persons) {
    System.out.println(persons.length);
    return "success";
} 
```

但该`persons`列表未在该`POST`方法处绑定/获取。

是否可以以这种方式绑定列表对象，或者是否有替代方法？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-18T16:01:16.813

我认为此链接将帮助您设置要执行的操作：

[http://viralpatel.net/blogs/spring-mvc-multi-row-submit-java-list/](http://viralpatel.net/blogs/spring-mvc-multi-row-submit-java-list/)

在您的表单中，您需要将其修改为：

```
<form:form method="post" action="savePerson" modelAttribute="persons">
    <c:forEach var="person" items="${persons}" varStatus="status">
        <form:input path="person[${status.index}].FName" name="FName" id="FName" value="" />
        <form:input path="person[${status.index}].LName" name="LName" id="LName" value="" />
    </c:forEach> 
```

这个 SO question 有一个很好的例子，它也可以帮助你：[List<Foo> as form backing object using spring 3 mvc，正确的语法？](https://stackoverflow.com/questions/9617207/listfoo-as-form-backing-object-using-spring-3-mvc-correct-syntax?rq=1)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-07-11T13:32:23.003

正如 Shri 在他对 ssn771 答案的[评论](https://stackoverflow.com/questions/15480397/how-to-send-list-of-object-to-view-and-back-to-post-method-in-controller/15481311?noredirect=1#comment38294749_15481311)中提到的那样，如果您的绑定列表超过 256，那么它会给出错误，例如

> org.springframework.beans.InvalidPropertyException：bean 类 [com.app.MyPageListVO] 的无效属性“mylist [256]”：属性路径“mylist [256]”中的越界索引；嵌套异常是 java.lang.IndexOutOfBoundsException: Index: 256, Size: 256 at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:830) at...

发生此错误是因为默认情况下 256 是数组和集合自动增长以避免的 限制，但是您可以通过在该控制器中`OutOfMemoryErrors`设置 WebDataBinder 的 AutoGrowCollectionLimit 属性来增加此限制。`@InitBinder`

代码：

```
@InitBinder
public void initBinder(WebDataBinder dataBinder) {
    // this will allow 500 size of array.
    dataBinder.setAutoGrowCollectionLimit(500);
} 
```

# android - LinearLayout 内的水平滚动视图 - Android

> ID：15480399
> 
> 赞同：0
> 
> 时间：2013-03-18T15:22:20.503
> 
> 标签：android, android-layout, scrollview, horizontal-scrolling, horizontalscrollview

我有一个自定义列表。我正在尝试仅水平滚动特定部分。例如，在下图中，我试图仅水平滚动橙色框。

![在此处输入图像描述](../Images/4abaec42fcd64dd88ea053d8e423a789.png)

这是我的 XML 布局：在 XML 布局中，橙色框开始“android:id="@+id/projected"

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="63dp"
    android:layout_marginLeft="0dp"
    android:background="@drawable/bkg_img_fullcell"
    android:orientation="horizontal" >

    <!-- Left Column -->

    <LinearLayout
        android:id="@+id/widget_lineupview_playerdata_container"
        android:layout_width="wrap_content"
        android:layout_height="@dimen/widget_lineup_table_row_height"
        android:layout_toRightOf="@+id/sideView"
        android:gravity="center_vertical"
        android:layout_toLeftOf="@+id/projected"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:weightSum="4" >

            <!-- rel 1 -->

            <LinearLayout
                android:id="@+id/playername1"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="3"
                android:layout_toRightOf="@+id/sideView">

                <com.cbssports.nflapp.ffb.MyTextViewBold
                    android:id="@+id/widget_lineupview_playerdata_playername"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:ellipsize="end"
                    android:inputType="text|textNoSuggestions"
                    android:layout_marginLeft="5dp"
                    android:maxLines="1"
                    android:text=""
                    android:textColor="#08233e"
                    android:textSize="15dp" />

            </LinearLayout>
            <!-- rel 2 -->

            <LinearLayout
                android:id="@+id/widget_lineupview_playerdata_playerStatsIconContainer"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_toRightOf="@+id/playername1"
                android:orientation="horizontal" >

                <ImageView
                    android:id="@+id/widget_lineupview_playerdata_statusIconSuspended"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="1dp"
                    android:src="@drawable/btn_s"
                    android:visibility="gone" />
            </LinearLayout>
 </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_toRightOf="@+id/sideView" >

            <TextView
                    android:id="@+id/widget_lineupview_playerdata_playerPositionTeam"
                    android:layout_marginLeft="5dp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:ellipsize="end"
                    android:inputType="text|textNoSuggestions"
                    android:maxLines="1"
                    android:text=""
                    android:textColor="#333333"
                    android:textSize="12dp" />

            <ImageView
                android:id="@+id/widget_lineupview_playerdata_startingPitcherStatus"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="3dp"
                android:layout_marginRight="3dp"
                android:src="@drawable/btn_baseballgraphic"
                android:visibility="gone" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/sideView"
        android:layout_width="@dimen/widget_lineup_table_status_column_width"
        android:layout_height="@dimen/widget_lineup_table_row_height"
        android:layout_alignParentLeft="true"
        android:background="@drawable/bkg_img_rosterpos"
        android:gravity="center" >

        <!-- <Button -->
        <com.cbssports.nflapp.ffb.VerticalTextView
            android:id="@+id/widget_lineupview_playerdata_playerStatusButton"
            android:layout_width="21dp"
            android:layout_height="60dp"
            android:layout_margin="0dp"
            android:padding="0dp"
            android:textColor="#004a8e"
            android:textSize="11dp"
            android:textStyle="bold"
            android:gravity="bottom|center" />
    </LinearLayout>
***<LinearLayout
        android:id="@+id/projected"
        android:layout_width="wrap_content"
        android:layout_height="@dimen/widget_lineup_table_row_height"
        android:background="@drawable/bkg_img_whiteoverlay"
        android:layout_toLeftOf="@+id/percentStarted">

        <TextView
            android:id="@+id/widget_lineupview_player_h2h_stats_started_custom"
            android:layout_width="50dp"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:gravity="center"
            android:textStyle="bold"
            android:textSize="16dp"
            android:textColor="#333333" />
    </LinearLayout>
    <LinearLayout
        android:id="@+id/percentStarted"
        android:layout_width="wrap_content"
        android:layout_height="@dimen/widget_lineup_table_row_height"
        android:background="@drawable/bkg_img_whiteoverlay"
         android:layout_alignParentRight="true"
         android:layout_marginLeft="2dp">

        <TextView
            android:id="@+id/widget_lineupview_player_projected_custom"
            android:layout_width="50dp"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:gravity="center"
            android:textStyle="bold"
            android:textSize="16dp"
            android:textColor="#333333" />
    </LinearLayout>***
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T18:56:32.370

谢谢g00dy，我可以通过在horizo​​ntalScrollView 中添加一个LinearLayout 来解决它。

这是我的解决方案。

```
 <HorizontalScrollView
                android:id="@+id/horizontalScroll"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:animateLayoutChanges="true"
                android:scrollbars="none">
   <LinearLayout
                android:id="@+id/horizontalScroll_linear"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:layout_alignParentRight="true" >
         <LinearLayout
             android:id="@+id/projected"
             android:layout_width="wrap_content"
             android:layout_height="@dimen/widget_lineup_table_row_height"
             android:background="@drawable/bkg_img_whiteoverlay"
             android:layout_toLeftOf="@+id/percentStarted">

                <TextView
                    android:id="@+id/widget_lineupview_player_h2h_stats_started_custom"
                    android:layout_width="50dp"
                    android:layout_height="wrap_content"
                    android:layout_centerInParent="true"
                    android:gravity="center"
                    android:textStyle="bold"
                    android:textSize="16dp"
                    android:textColor="#333333" />
           </LinearLayout>
        <LinearLayout
            android:id="@+id/percentStarted"
            android:layout_width="wrap_content"
            android:layout_height="@dimen/widget_lineup_table_row_height"
            android:background="@drawable/bkg_img_whiteoverlay"
            android:layout_alignParentRight="true"
            android:layout_marginLeft="2dp">

             <TextView
                android:id="@+id/widget_lineupview_player_projected_custom"
                android:layout_width="50dp"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:gravity="center"
                android:textStyle="bold"
                android:textSize="16dp"
                android:textColor="#333333" />
      </LinearLayout>
</LinearLayout>
</HorizontalScrollView> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-06T21:31:36.670

您还可以将 LinearLayout fillViewport 设置为 true 并将 foregroundGravity 设置为 true （不确定是否需要最后一个），并将子 LinearLayout 重力设置为右：

```
<HorizontalScrollView
        android:layout_width="match_parent"
        android:layout_height="@dimen/IconM"
        android:id="@+id/account_food_scroll"
        android:layout_alignParentEnd="false"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@+id/client_add_button_layout"
        android:foregroundGravity="right"
        android:layout_marginLeft="@dimen/PadM"
        android:fillViewport="true">

        <LinearLayout
            android:orientation="horizontal"
            android:layout_width="wrap_content"
            android:layout_height="@dimen/IconM"
            android:id="@+id/account_food_layout"
            android:gravity="right">
            </LinearLayout>
    </HorizontalScrollView> 
```

# magento - Magento：由于缺少 Mage/Email/Helper/Data.php，无法添加新的交易电子邮件模板

> ID：15480403
> 
> 赞同：0
> 
> 时间：2013-03-18T15:22:28.617
> 
> 标签：magento, magento-1.7

我正在尝试通过 adminhtml -> system -> transactional email -> new template 添加新的电子邮件模板。

但是，当我转到该页面时，默认模板的下拉列表中没有选项，并且该页面上没有其他内容。

我检查了 /var/log/system.log 并发现了以下几行：

*   警告：include(Mage/Email/Helper/Data.php) [function.include]：无法打开流：第 93 行的 /home/jille/public_html/lib/Varien/Autoload.php 中没有这样的文件或目录

*   警告：include() [function.include]：无法打开“Mage/Email/Helper/Data.php”以包含（include_path='/home/jille/public_html/app/code/local:/home/jille/public_html/ app/code/community:/home/jille/public_html/app/code/core:/home/jille/public_html/lib:.:/usr/lib/php:/usr/local/lib/php') 在 /home /jille/public_html/lib/Varien/Autoload.php 在第 93 行

我进入源代码，找不到对该文件的任何引用。关于如何解决这个问题的任何想法？

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:45:40.333

如果使用 helper 或在 translate xml 节点中引用模块，则 magento 将搜索 module/Helper/Data.php 文件。

您只需创建一个文件 data.php 类 Mage_Modulename_Helper_Data extends Mage_Core_Helper_Abstract { }

这将解决您的错误。

# css - Sublime Text 2 中捆绑/包的编辑菜单操作

> ID：15480404
> 
> 赞同：1
> 
> 时间：2013-03-18T15:22:31.850
> 
> 标签：css, less, sublimetext2, textmate, sublimetext

我正在从 Textmate 切换到 Sublime，并且无法让“自定义菜单操作”在 Sublime 中工作。菜单操作是一位同事编写的一行代码，它编译 LESS（css 预处理器）[文件名].less 并在保存时自动缩小和更新 2 个其他文件。更新的文件是：1\. [文件名].css 和 2\. [文件名].css.vtl。我们使用在 Velocity 上运行的 CMS，我们使用这种方式将 css 扔到页面上以减少 http 请求。这听起来可能很愚蠢，但我们有一个包含 800 多个站点等的巨大多租户实例。下面是代码：

```
#!/bin/sh
# This compiles the LESS and creates a CSS and CSS.VTL file

# lessc is added to the usr/local/bin dir, add it to the path
PATH=$PATH:/usr/local/bin

# get the filename without the extension
FILENAME=${TM_FILEPATH%.*}

# get the filetype of the current file (will handle multiple . in the filepath)
FILETYPE=${TM_FILEPATH##*.}

# only compile if this is a less document
if [ "$FILETYPE" == "less" ]; then
  lessc "$TM_FILEPATH" "$FILENAME".css
  lessc "$TM_FILEPATH" "$FILENAME".css.vtl --compress
  echo "Successfully created the following files:"
  echo "$FILENAME.css"
  echo "$FILENAME.css.vtl"
else
  echo "Not a less file: $TM_FILEPATH"
  echo "File type is $FILETYPE"
fi 
```

我是后端代码的新手，我不确定如何将其转换为 Python 并在 Sublime 中更新我的 LESS 包。感谢您的帮助，如果我错过了一些 stackoverflow 协议，我们深表歉意。这是我的第一篇文章。

-吸收瘤

# schema.org - 推荐和推荐的丰富片段

> ID：15480405
> 
> 赞同：2
> 
> 时间：2013-03-18T15:22:34.320
> 
> 标签：schema.org, rich-snippets

我有一个项目将使用建议，而不是评论。我能找到的唯一接近的丰富片段是 Schema.org “评论”，但我没有“5 星”或类似的东西给它。这些是纯文本评论。

我是否应该只填写 5 星，因为它是一项建议，并通知发布者出于道德原因将这样显示它，或者我是否也会遇到谷歌的问题，因为它的网站只有 5 星评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:41:06.487

如果您的评论没有评分，则不应标记。根据[Schema.org FAQ](http://schema.org/docs/faq.html#13)，不需要标记每个属性：

> **问：我必须标记每个属性吗？**
> 只标记项目的某些属性很好 - 标记不是一个全有或全无的选择。但是，标记尽可能多的内容有助于搜索引擎使用您的信息以最有用的方式向用户展示您的页面。作为一般规则，您应该只标记访问网页的人可见的内容，而不是隐藏 div 或其他隐藏页面元素中的内容。

给所有内容 5 星评级将是对内容的歪曲，这将违背使用结构化数据的全部目的：让机器更容易解析人类内容。

# node.js - 为什么 Ubuntu 上的 Node.js 没有函数 fs.exists

> ID：15480406
> 
> 赞同：0
> 
> 时间：2013-03-18T15:22:34.443
> 
> 标签：node.js, ubuntu

我正在将 Node.js 代码从 Windows 迁移到 Ubuntu 12.04，运行代码时出现错误，提示“fs”没有方法“存在”。代码就像

```
var fs = require('fs');
fs.exists ... 
```

我检查了 nodejs.org 的文档，没有发现任何关于不同平台上 API 差异的说明。我是否遗漏了在 Ubuntu 上配置 Node.js 的任何内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:35:48.280

`fs.exists`在节点 0.7.1 中添加。因此，如果您在此之前使用节点，则无法使用该功能。检查您的节点版本`node -v`以确认这一点。

# command-line - 在调用堆栈上推送命令行参数（C）？

> ID：15480408
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:22:42.643
> 
> 标签：command-line, parameters, callstack

我想知道命令行参数的参数传递是如何工作的？我的组件有点生锈。我知道一个函数的参数是由它的调用者推入堆栈的。命令行参数呢？它们是如何被推入主函数的堆栈框架的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:28:45.070

在标准 C 中，`main`至少可以采用两个参数——第一个是命令行参数的数量，第二个是指向它们的指针数组。它们出现在堆栈上的顺序是实现定义的，但 C 的一个常见约定是将它们从右向左推送，因此后续 args 出现在更高的地址。

就原始组装而言，尽管......就像大多数与组装相关的东西一样，它依赖于平台。Linux 会为您解析命令行参数，并在堆栈上传递指向它们的指针。在 Windows 中，命令行是通过调用操作系统（`GetCommandLineA`或`GetCommandLineW`）来检索的，然后您自己解析它。如果您在 Windows 应用程序中使用 C 或 C++，则命令行也是`WinMain`.

# ruby-on-rails - Rails - 如何在表单提交中传递 2 个对象的 ID？

> ID：15480409
> 
> 赞同：0
> 
> 时间：2013-03-18T15:22:45.823
> 
> 标签：ruby-on-rails

我有一个用于关联 RFID 和设备对象的表单。提交后，表单会自动传递 rfid 的 id。如何传递在 options_from_collection_for_select 中选择的设备的 ID？

这是表单中的代码：

```
<br/>

<div class="well">

<%= form_for(@rfid) do |f| %>
        <table class="table table-bordered">
                <tr>
                    <th>RFID Tag #</th>
                        <td>
                            <%= f.label(:@rfid, @rfid.rfid_tag) %>
                            <%= f.hidden_field :rfid, :value => @rfid %>
                        </td>
                </tr>
                <tr>
                    <th>Device Name</th>
                        <td>
                            <%= f.select :device, options_from_collection_for_select(Device.order(:name).where("rfid_tag IS NULL"), "id", "name_or_alternative", @device) %>
                        </td>                               
                </tr>
        </table>
        <%= link_to "Link Device", { :controller => :devices, :action => :assign_rfid_to_device, :device => @device }, :class => "btn btn-primary" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:36:50.587

您需要一个表单的提交按钮，一个 link_to 是不够的，除非它运行一些 javascript 来提交表单或通过选择。

```
<%= f.submit 'Link Device' %> 
```

# migration - 阅读 Xen 源代码

> ID：15480410
> 
> 赞同：1
> 
> 时间：2013-03-18T15:22:47.393
> 
> 标签：migration, virtualization, xen

我想修改 xen(hypervisor) 迁移代码。为此，我想从控制流、链接和不同代码段的使用方面阅读和理解源代码。主要是我想关注xen源代码中的迁移代码。但是我看源代码看不懂，实际上我没有找到详细描述代码的准确文档。如果没有这样的帮助，很难理解这么大的代码。

请帮助我如何阅读 xen 代码并修改（添加一些额外的代码）相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-24T20:31:40.157

不幸的是，没有任何文档可以替代阅读源代码。Xen 的开发速度极快。

最接近深入文档的是 David Chisnall 的一本书，名为“Xen Hypervisor 的权威指南”，如果您寻找它，它就在那里。但它已经很过时了。

最好的办法是深入研究代码，然后在 xen-devel 邮件列表上提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:54:39.113

Start at the sourcecode page in the [wiki](http://wiki.xensource.com/xenwiki/XenSourceCode.html).

# ssh - Windows 中涉及 SCP、SSH 的调度任务

> ID：15480415
> 
> 赞同：0
> 
> 时间：2013-03-18T15:22:55.323
> 
> 标签：ssh, scheduled-tasks, scp, wsh

我正在使用 Git Bash 在 Windows 8 中运行以下脚本；手动运行时工作正常--scp、ssh 等都工作正常。但是放入任务计划程序时它不起作用。任务计划程序停止在 scp ... 不运行 scp 命令。在调度程序中，我看不到任何错误消息或错误日志（我不知道在哪里查找日志文件）。

我正在使用：以最高权限运行 UNCHECKED；为 Windows 8 配置；

```
Wscript.echo "Running abc.exe"
Set objShell = CreateObject("WScript.Shell")
Return = objShell.Run ("C:\abc.exe /S", 1, true)
Wscript.echo "Done Running abc.exe"
WScript.Sleep(5000)
Wscript.echo "Done sleeping"
dim fileSystem
Set fileSystem = CreateObject("Scripting.FileSystemObject")
Return = objShell.Run ("scp -i c:/users/uname/.ssh/id_dsa /c/data/*.txt admin@svr3.com:/mnt/wnd01/txt",0,true)
Wscript.echo "Uploading file, Return message " & Return
if Return = 0 then
  WScript.Sleep(5000)
  Wscript.echo "Done sleeping on scp"
  fileSystem.MoveFile "C:\data\*.txt","C:\data\archivefiles"
  Return = objShell.Run ("ssh -i c:/users/uname/.ssh/id_dsa admin@svr3.com '/opt/drupal/scripts/import_raw.sh wnd01'",0,true)
end if
Wscript.echo "Running DB script on server, Return message " & Return 
```

任何帮助弄清楚可能发生的事情将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:27:16.593

它实际上是调用执行 abc.exe 然后将文件上传到服务器将文件移动到服务器中的特定位置。

# php - CodeIgniter 额外选项值

> ID：15480421
> 
> 赞同：0
> 
> 时间：2013-03-18T15:23:13.950
> 
> 标签：php, codeigniter

我一直在拔头发，天知道要花多长时间才能解决这个问题。

目前我有一个这样的选择列表（form_dropdown）。

```
<select name="starters">
<option value="">Please Select</option>
<option value="0" >Brochettes</option>
<option value="1" >Grilled mackerel</option>
<option value="2" >Risotto cake</option>
<option value="3" >Calamari rings</option>
<option value="4">Parma ham parmesan</option>
</select> 
```

我需要做的是传入这个 form_dropdown 是一个价格值，所以我可以在网站上拥有一个动态价格计算器。

```
<select name="starters">
<option value="" price="100">Please Select</option>
<option value="0" price="22">Brochettes</option>
<option value="1" price="342">Grilled mackerel</option>
<option value="2" price="42">Risotto cake</option>
<option value="3" price="52">Calamari rings</option>
<option value="4" price="22">Parma ham parmesan</option>
</select> 
```

有什么办法可以做到这一点吗？我真的坚持死线，我认为这在代码点火器中是可能的。

到目前为止，我的代码，如您所见，我有一个价格，但我需要将它传递给选项。

```
 echo form_label("APPETISERS", "appetisers");
            $array = array();
            foreach($appertisers as $row ){
                 $array[] = $row->product;
                 $price[] = $row->price;
            }
            $array = array_merge(array('' => 'Please Select'), $array);
            echo form_dropdown('appetisers',  $array); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:11:49.583

好吧，我不知道如何使用 codeingiter form_label 来做到这一点，主要是因为我不使用 form_helper 来创建输入。

通常我这样做：

```
<select name="starters">
  <option value="">Please Select</option>
  <?php foreach($appertisers as $row ):?>
  <option value="<?=$row->id?>" data-price="<?=$row->price?>"><?=$row->product?></option>
  <?php endforeach;?>
</select> 
```

我已将您的价格属性命名为 data-price，这样您就可以像这样使用数据函数：

```
var price_value = $('select[name="starters"] option:selected').data('price'); 
```

您可以在此处阅读有关数据属性的更多信息[http://api.jquery.com/data/](http://api.jquery.com/data/)和此处[http://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:26:37.910

您可以完全按照您在示例中显示的方式进行操作。您可以使用 jQuery 提取所选元素的价格。

见：[http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

# r - 如何在 RStudio 中为不同版本的 R 设置快捷方式？

> ID：15480423
> 
> 赞同：6
> 
> 时间：2013-03-18T15:23:19.833
> 
> 标签：r, configuration, rstudio

使用 Rstudio，很[容易](http://www.rstudio.com/ide/docs/advanced/versions_of_r)为不同版本的 R 配置它。您只需导航到`/Tools/Options`并选择您喜欢的 R 版本。

但是有没有一种简单的方法来设置菜单（或桌面）快捷方式或命令行脚本以指向不同版本的 R？

我的用例是我经常想在不同版本的 R 中运行和比较脚本，例如：

*   R-2.15.3
*   R-开发 (R-3.0.0)

将其设置为单击快捷方式而不是每次都导航菜单会很有用。

（我很欣赏这可能更适合[超级用户](https://superuser.com/)，但在我看来，这个问题的答案更有可能在 StackOverflow 上找到。）

**我应该怎么做才能配置这样的快捷方式？**

附加信息：我正在运行 Windows。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T15:37:49.477

当您单击桌面快捷方式时，您不能按住控制吗？

从[您发布的链接](http://www.rstudio.com/ide/docs/advanced/versions_of_r)：

> 请注意，在启动 RStudio 期间按住 Control 键可以使 R 版本选择对话框在启动时显示。

# azure - Windows Azure 在最初的几个请求上很慢

> ID：15480427
> 
> 赞同：9
> 
> 时间：2013-03-18T15:23:25.603
> 
> 标签：azure

当最初的几个用户访问该网站时，性能非常缓慢。

Windows Azure 设置使用 IIS 7.0，因此预热初始化模块不是一个选项。

有没有办法“预热”网站，这样性能速度就不是问题了？

我看过这个：[Controlling Application Pool Idle Timeouts in Windows Azure](http://blog.smarx.com/posts/controlling-application-pool-idle-timeouts-in-windows-azure)，但不确定当 Azure 大约每 29 小时回收一次应用程序池时这是否仍然会导致问题。

**更新：**

部署是包含多个网站的 1 个 Web 角色。是否可以为此进行预编译？或使用以下答案之一中建议的网络角色？

**编辑：**

正如@Igorek 在下面关于使用在角色启动期间自动加载的Web 角色所说的那样，这在我的设置中是可能的。有没有人有一个如何实现这一目标的例子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:16:27.490

> 我看过这个：Controlling Application Pool Idle Timeouts in Windows Azure，但不确定当 Azure 大约每 29 小时回收一次应用程序池时这是否仍然会导致问题。

Azure 回收应用程序池时不会导致问题，但您也可以添加到该启动任务以防止/增加应用程序池回收时间。

试试这个：

在你的定义任务`ServiceDefinition`：

```
<Startup>
    <Task commandLine="startup\disableTimeout.cmd" executionContext="elevated" />
</Startup> 
```

然后让您的`cmd`文件包含以下代码（只需将其放入记事本，然后另存为`.cmd`文件）：

```
%windir%\system32\inetsrv\appcmd set config -section:applicationPools -applicationPoolDefaults.processModel.idleTimeout:00:00:00

%windir%\system32\inetsrv\appcmd set config -section:applicationPools -applicationPoolDefaults.recycling.periodicRestart.time:00:00:00 
```

**有两件事要确保**：

1) 确保使用 ANSI 编码保存文件。
2) 将该脚本添加到 Visual Studio 后，请确保在属性中选择“始终复制”作为“复制到输出目录”选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:19:09.320

您是否正在预编译应用程序？默认情况下，部署后的应用仍然需要第一次编译。根据应用程序的大小，编译可能需要几秒钟 [http://msdn.microsoft.com/en-us/library/399f057w(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/399f057w(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T06:49:56.617

当第一个 HTTP 请求到达时，实际上已经完成了很多额外的工作 - 启动应用程序池，找到所有需要的程序集，将所有作为 MSIL 交付的程序集编译为机器代码，然后预编译必要的 ASP.NET 视图（除非您部署它们是预编译的，但使用 Azure 工具很难，所以我猜你不这样做）。这一切都需要一些时间，因此不幸的第一批用户必须等待。

解决方法是从内部角色入口点预热站点`OnStart()`- 使其预编译站点，然后向 localhost 发送 HTTP 请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-21T18:00:55.247

mattytommo 的答案非常好，但我更喜欢以编程方式实现相同的目标，而不是依赖于 cmd 文件。您可以通过 3 个步骤完成：

**第 1 步：**您必须安装 NuGet 包 Microsoft.Web.Administration。该包包含从应用程序代码控制 IIS 所需的库。

**第 2 步：**然后您只需从 Web 角色的 RoleEntryPoint 添加对该方法的调用。如果不存在，只需添加一个继承自 RoleEntryPoint 的类。

```
private void ConfigureAppPools()
{
    using (ServerManager serverManager = new ServerManager())
    {
        foreach (var appPool in serverManager.ApplicationPools)
        {
            appPool.ProcessModel.IdleTimeout = TimeSpan.Zero;
            appPool.Recycling.PeriodicRestart.Time = TimeSpan.Zero;
        }
        serverManager.CommitChanges();
    }
} 
```

此代码只是将机器上的所有应用程序池配置为永不回收或超时。

**第 3 步：**为此，还需要将这一行添加到 ServiceDefinition.csdef：

```
 <WebRole name="YourWebRoleName" vmsize="ExtraSmall">
    ...
    <Runtime executionContext="elevated" />
    ...
  </WebRole> 
```

这可确保您的 Web RoleEntryPoint 的 OnStart() 方法以提升的权限执行。您的代码的其他部分不会受到影响，因此从安全角度来看这不是问题。

就这些。现在解决了加载慢的问题:)

# ios - 在不同的类中禁用/启用滚动视图

> ID：15480428
> 
> 赞同：1
> 
> 时间：2013-03-18T15:23:27.433
> 
> 标签：ios, objective-c

我有一个从 UIViewController 继承的 ViewController 类：

```
@interface PagerViewController : UIViewController <UIScrollViewDelegate> 
```

在这里我可以像这样打开和关闭滚动选项：

```
[self setScrollEnabled:NO]; 
```

我将其他一些 ViewController 类添加为孩子，但问题是当我尝试在那里启用或禁用滚动时，它无法识别“setScrollEnabled”。在这个类中，我有一个按钮，我想在按下按钮时禁用“setScrollEnabled”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:45:09.520

使用`NSNotification`，这将允许您调用`PagerViewController`类的方法，您可以在其中设置`scrollEnabled`属性。

`NSNotification`搜索关于/的示例`Local Notification.`

它会解决你的问题。

# jquery - JQuery如何选择所选日期的一周中的星期一

> ID：15480431
> 
> 赞同：0
> 
> 时间：2013-03-18T15:23:32.970
> 
> 标签：jquery, jquery-ui, datapicker

我使用 Datepicker JQuery，我需要选择用户选择的星期几中的星期一。IE

用户选择 2013 年 3 月 13 日（星期三）。所以我想选择 2013 年 3 月 11 日（星期一）。

我希望我很清楚。肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:34:38.470

我只会在 JavaScript 中做到这一点。您可以使用 获取特定给定日期的工作日`getWeekDay()`。这也意味着您可以获得所选日期与该周星期一之间的差异（以天为单位）。

然后你可以通过设置一个新的时间戳来减去天数的差异。这意味着您需要获取所选日期和该周星期一之间的毫秒数，您可以通过将天数乘以 24（以小时为单位），然后乘以 60（分钟），再乘以 60 以获取秒数最后是 1000 以毫秒为单位。

结果将是这样的：

```
function getMonday(/** Date */ date) {
    var diff = (date.getDay() == 0 ? 6 : date.getDay() - 1);
    date.setTime(date.getTime() - (diff * 24 * 60 * 60 * 1000));
    return date;
} 
```

我还写了一个[JSFiddle](http://jsfiddle.net/nL5Qs/)来测试它。

# c++ - C++ winapi32图表

> ID：15480432
> 
> 赞同：1
> 
> 时间：2013-03-18T15:23:34.233
> 
> 标签：c++, eclipse, mingw

我想用这个工具创建一个图表：http: [//www.codecutter.net/tools/koolplot/](http://www.codecutter.net/tools/koolplot/)

我使用eclipse + minGW

我以这种方式安装了koolplot：

```
Library installation for MingW: 
Copy headers koolplot.h, Plotdata.h, Plotstream.h, winbgitypes.h and BGI_util.h To your MingW #include directory.
Copy library libkoolplot.a to your MingW lib directory. 
```

但首先我必须修改 graphics.h 文件，然后我得到这个错误：

```
g++ -mwindows -o aplot.exe -lkoolplot -lgdi32 -lcomdlg32 -luuid -loleaut32 -lole32 -lstdc++ -lsupc++ -o plot.exe "src\\plot.o" 
src\plot.o: In function `main':
...workspace\plot\Debug/../src/plot.cpp:5: undefined reference to `Plotdata::Plotdata(double, double)'
...plot\Debug/../src/plot.cpp:5: undefined reference to `operator*(double, Plotdata const&)'
...plot\Debug/../src/plot.cpp:5: undefined reference to `sin(Plotdata const&)'
...plot\Debug/../src/plot.cpp:5: undefined reference to `Plotdata::operator-(Plotdata const&) const'
...plot\Debug/../src/plot.cpp:6: undefined reference to `plot(Plotdata const&, Plotdata const&)'
collect2: ld returned 1 exit status 
```

这是我的代码：

```
#include "koolplot.h"
int main()
{
   plotdata x(-6.0, 6.0);
   plotdata y = sin(x) + x/5;
   plot(x, y);
   return 0;
} 
```

知道有什么问题吗？或者有人可以给我发送另一个好的（易于使用的）工具来创建图表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:41:28.247

首先，**永远不要**像刚才那样安装任何 3rd 方库。MinGW 是一个独立的工具链，必须始终保持原始状态（未受影响）。你应该已经在你的机器上的某个地方创建了一个特定的目录，比如说`koolplot`. 然后在其中再创建两个目录`include`和`lib`. 然后将标题`include`和库放入`lib`.

您应该做的下一件事是在 Eclipse 中为您的项目添加包含路径和库路径（我们刚刚创建的库）。仔细查看项目的配置，有专门的特殊选项。

如果这仍然不起作用，那么我需要更多信息：

1.  使用哪个编译器`koolplot`构建，目标平台是什么？
2.  您当前的 MinGW 发行版的目标平台是什么？

**注意**：如果您想开发现代、美观和跨平台的应用程序，利用 C++ 面向对象方法的所有功能，那么我强烈建议您深入研究[Qt](http://qt-project.org/)。是的，它包含图表、图形和更多您可能还不知道的小部件，但随着您的应用程序的增长肯定会需要这些小部件。

# windows-7 - 在 Windows 7 上安装 IE10 后如何修复 Visual Studio 2012？

> ID：15480436
> 
> 赞同：13
> 
> 时间：2013-03-18T15:23:37.147
> 
> 标签：windows-7, visual-studio-2012, internet-explorer-10

我最近将我的机器升级到**Internet Explorer 10**。我在 Windows 7 下使用**Visual Studio 2012** (VS2012)。由于我升级到 IE10，VS2012**不再自动附加**到`iexplorer.exe`进程。我在下拉列表中有 2 个条目。

![重复的 Internet Explorer 条目](../Images/cda598e21ab72075b62a690515be284c.png)

**知道我应该怎么做吗？**

（是的，我应该在接下来的几个月内升级到 Win8 并进行全新安装......）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-20T20:46:13.637

我不确定您是否已经找到了解决方案，但如果您选择任何其他浏览器，请在您的情况下选择 Google Chrome。然后，运行您的解决方案，然后停止。改回 Internet Explorer，瞧……其他 IE 条目将被删除并修复调试器附加问题。试试看，它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:45:17.363

我通过打开“浏览方式...”对话框并删除两个“Internet Explorer”条目之一解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-21T10:52:33.437

我的 VS 2012 上有两个 IE 条目

1.  从“浏览方式”选项中删除一个 Internet Explorer 条目。
2.  现在用任何其他浏览器浏览 - 比如谷歌浏览器
3.  停止。现在从调试选项中删除了 IE 的第二个条目。
4.  现在使用 Internet Explorer 浏览。

有用。

# php - 执行此 php 文件时出错

> ID：15480438
> 
> 赞同：-3
> 
> 时间：2013-03-18T15:23:39.643
> 
> 标签：php, mysql

> 警告：mysql_fetch_assoc() 期望参数 1 是资源，F:\Softwares\xampp\htdocs\login-check.php 中给出的整数第 14 行连接错误

代码：

```
<?php
session_start();
if(isset($_SESSION['username']))
{
header("location:home.php");
}
else
{
$user=$_POST['mailid'];
$pass=$_POST['password'];
$con=mysqli_connect("127.0.0.1","rahulk","","weltit");
$get=mysqli_query($con,"SELECT * FROM mem WHERE mailid='$user' AND password='$pass'");
$check=mysqli_num_rows($get);
if ($result=mysql_fetch_assoc($check))
{
$check_pass=$result['password'];
$check_user=$result['mailid'];
if ($check_pass==$pass &&  $check_user==$user)
{
echo "matched";
}
else
{
echo "wrong pass";
}
}
else
{
echo "connection error";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:25:44.763

`mysql_fetch_assoc($check)`应该是`mysql_fetch_assoc($get)`。您无法获得行号计数的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:26:24.473

```
mysql_fetch_assoc($check) 
```

以上应该是

```
mysql_fetch_assoc($get) 
```

# javascript - 在 d3.layout.tree() 中自定义单个坐标

> ID：15480442
> 
> 赞同：2
> 
> 时间：2013-03-18T15:23:46.327
> 
> 标签：javascript, d3.js

我想通过手动设置两个坐标之一来自定义 d3.layout.tree。我的树的不同分支都有时间戳，因此为了更平滑的表示，最好将一个坐标与时间相关联。

有人知道是否可以调整树布局以接受固定坐标吗？或者，如果不是，也许是另一种方法？

我试图通过使用 d3.layout.force 来解决它，它允许修复单个节点的位置。但是，我找不到如何只修复一个坐标而让另一个坐标由力算法确定。

为了说明，树应该看起来非常像这样： http: [//mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html) （不幸的是它看起来完全像这样）但是明确设置了x坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:21:07.700

因此，如果有人感兴趣，这是我使用 d3.force.layout 的解决方法。它并不完美，但可以满足我的需要。

基本上我将`born`每个节点的探针分配给它的 x 坐标，从而限制力布局只在 y 坐标上工作。

如果您有任何改进，请告诉我。

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Force-Directed Graph</title>
    <script type="text/javascript" src="d3.js"></script>
    <script type="text/javascript" src="d3.geom.js"></script>
    <script type="text/javascript" src="d3.layout.js"></script>
    <style type="text/css">

circle.node {
  cursor: pointer;
  stroke: #3182bd;
  stroke-width: 1.5px;
}

line.link {
  fill: none;
  stroke: #9ecae1;
  stroke-width: 1.5px;
}

    </style>
  </head>
  <body>
<div id="chart"></div>
<script type="text/javascript">

var w = 2960,
    h = 2000,
    node,
    link,
    root;

var force = d3.layout.force()
    .distance(200)
    .charge(-10)
    .gravity(0)
    .size([w, h]);

var vis = d3.select("#chart").append("svg:svg")
    .attr("width", w)
    .attr("height", h);

d3.json("collapsable/relations.json", function(json) {
  root = json;
  update();
});

function update() {
  var nodes = flatten(root),
      links = d3.layout.tree().links(nodes);

  // Restart the force layout.
  force
      .nodes(nodes)
      .links(links)
      .start();

function tick(e) {

  link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.born; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.born; });
  node.attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.born; });
}
      // Update the links…
  link = vis.selectAll("line.link")
      .data(links, function(d) { return d.target.id; });

  // Enter any new links.
  link.enter().insert("svg:line", ".node")
      .attr("class", "link")
      .attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  // Exit any old links.
  link.exit().remove();

  // Update the nodes…
  node = vis.selectAll("circle.node")
      .data(nodes, function(d) { return d.id; })
      .style("fill", color);

  // Enter any new nodes.
  node.enter().append("svg:circle")
      .style("stroke", function(d) {return d.gender == "m" ? "steelblue" : "red";})
      .attr("class", "node")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; })
      .attr("r", function(d) { return Math.sqrt(d.size) / 10 || 4.5; })
      .style("fill", color)
      .on("click", click)
      .call(force.drag);

  force.on("tick",tick)

  // Exit any old nodes.
  node.exit().remove();
}

function tick(e) {

  link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  node.attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
}

// Toggle children on click.
function click(d) {
  if (d.children) {
    d._children = d.children;
    d.children = null;
  } else {
    d.children = d._children;
    d._children = null;
  }
  update();
}

// Returns a list of all nodes under the root.
function flatten(root) {
  var nodes = [], i = 0;

  function recurse(node) {
    if (node.children) node.children.forEach(recurse);
    if (!node.id) node.id = ++i;
    nodes.push(node);
  }

  recurse(root);
  return nodes;
}

    </script>
  </body>
</html> 
```

# python - 在 Arcgis 10 中使用 Python 计算方位角时的语法错误

> ID：15480450
> 
> 赞同：1
> 
> 时间：2013-03-17T18:18:19.767
> 
> 标签：python

我正在尝试在 arcgis 10 中使用 Python 计算方位角，但出现语法错误。这是我的代码：

```
def CalculaAzimuth(Linea):
    Xorigen = linea.firstPoint.Y
    Yorigen = linea.firstPoint.X
    Xfinal = linea.lastPoint.X
    Yfinal = linea.lastPoint.Y
    DeltaX = Xfinal - Xorigen
    DeltaY = Yfinal - Xorigen
    PI = math.pi()
    Azimuth = 4 * PI
    if DeltaX = 0:
        if DeltaY >=0:
            Azimuth = 0
        else:
            Azimuth = 180
    elif DeltaX >0:
        Azimuth = 90 - math.atan( DeltaY / DeltaX ) * 180 / PI
    elif DeltaX <0:
        Azimuth = 270 - math.atan( DeltaY / DeltaX )* 180 / PI

return Azimuth 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:52:43.320

好的，这是一个经过清理的版本，上面包含所有注释以及逻辑上的小改动和一些变量清理。请注意，这不是椭球体上的真正方位角。

```
def CalculaAzimuth(linea):
    if (hasattr(linea,'type') and linea.type == 'polyline'):
        xf = linea.firstPoint.X
        yf = linea.firstPoint.Y
        xl = linea.lastPoint.X
        yl = linea.lastPoint.Y
        dX = xl - xf
        dY = yl - yf
        PI = math.pi
        Azimuth = 0 #Default case, dX = 0 and dY >= 0
        if dX > 0:
            Azimuth = 90 - math.atan( dY / dX ) * 180 / PI
        elif dX < 0:
            Azimuth = 270 - math.atan( dY / dX )* 180 / PI
        elif dY < 0:
            Azimuth = 180
        return Azimuth
    else:
        return False 
```

# google-chrome-extension - 重启浏览器后右键菜单消失

> ID：15480457
> 
> 赞同：3
> 
> 时间：2013-03-18T15:24:27.930
> 
> 标签：google-chrome-extension

我正在开发一个 chrome 扩展。我在扩展的右键菜单中添加了一个新菜单项。安装后运行正常。然后重启浏览器，新的右键菜单项消失了！但是扩展运行良好，只有新的菜单项消失了！我已经比较了 contextMenu 的 chrome 官方示例，似乎是一样的。我只是像示例一样将创建菜单代码放在 chrome.runtime.onInstalled.addListener(function() {}) 中.....知道为什么会发生这种情况吗？

非常感谢！

更新：在清单文件中添加属性：“background”：{ **“persistent”：false，** “scripts”：[“background.js”]}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:40:40.370

我建议将代码移至单独的函数，然后从`onInstalled`和调用该函数`chrome.runtime.onStartup`。第一个在您安装或更新时调用，而第二个在您重新打开浏览器时调用。

# c++ - 如何从 UserMode C++ 获取 ZwQuerySystemInformation 的地址

> ID：15480463
> 
> 赞同：0
> 
> 时间：2013-03-18T15:24:35.327
> 
> 标签：c++, function, kernel

如何`ZwQuerySystemInformation`从用户模式获取内核中函数的地址？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:40:26.980

请改用 NtQuerySystemInformation。您必须使用 LoadLibrary() 来获取 ntdll.dll 的句柄，并使用 GetProcAddress() 来获取地址。请注意 ZwQuerySystemInformation 已从 Windows 8 中删除，这对 NtQuerySystemInformation 有什么影响尚不清楚。显然，您需要彻底测试。

# c++ - 删除动态链表时遇到问题？

> ID：15480466
> 
> 赞同：0
> 
> 时间：2013-03-18T15:24:47.520
> 
> 标签：c++, dynamic-arrays

```
 struct Package_Node
    {
        int bar_code;
        float package_weight;
        Package_Node *next_packaged;
    };

    struct Key_Node
    {
        int key;
        Package_Node *next_package;
    };        

   for(int i=0; i<3; i++)
            {
                if(keyMain[i].next_package==NULL)
                {
                    continue;
                }

                if(keyMain[i].next_package!=NULL)
                {
                    nPointer3=keyMain[i].next_package;
                    nPointer4=keyMain[i].next_package;
                    while(nPointer3)
                    {
                        nPointer4=nPointer4->next_packaged;
                        delete[] nPointer3;
                        nPointer3=nPointer4;
                    }
                }
            } 
```

`keyMain`由给定 struct 描述的数组`key_node`。

Key main 本身是一个动态数组，但为了代码的缘故，我已经将它展示为一个静态数组。

假设数组有 3 个索引长，`0,1,2`每个索引包含一个单独的链表。现在我正在尝试删除每个链接列表，但似乎有些正在被删除，而有些则没有。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:25:57.987

你在这里做错了什么？一方面，您正在手动管理内存。

```
#include <memory>

struct Package_Node
{
  int bar_code;
  float package_weight;
  std::unique_ptr<Package_Node> next_packaged;
};

struct Key_Node
{
  int key;
  std::unique_ptr<Package_Node> next_package;
}; 
```

要将指针存储在 a 中`unique_ptr`，请使用`reset(new Package_Node())`. 而不是`delete`，调用`reset()`。`unique_ptr`删除 a时，会自动删除a 指向的任何内容`unique_ptr`。

这是 C++11——在 C++03 中，您可能有`std::tr1::unique_ptr`, 或`boost::unique_ptr`，但没有移动语义`unique_ptr`使用起来更危险。

* * *

现在，如果您执行上述操作，您的代码会变得更短，并且释放整个链表只是`.reset()`指向第一个节点的智能指针的问题：其他所有内容都会自动删除！

但是，您可能不愿意这样做。因此，我将在您的代码中解决一些其他问题。

您的变量名称不反映值的使用。 `nPointer4`是一个可怕的变量名。尝试`PointerToDelete`记录其目的是什么。此外，您应该在初始化时声明指针，并在它无效时将其清除，而不是让它在使用之前或之后闲置。（重用变量不会获得奖励积分）。

看这个循环：

```
 nPointer3=keyMain[i].next_package;
            nPointer4=keyMain[i].next_package;
            while(nPointer3)
            {
                nPointer4=nPointer4->next_packaged;
                delete[] nPointer3;
                nPointer3=nPointer4;
            } 
```

请注意，`nPointer3`并且`nPointer4`应该在 的开头保存相同的数据`while`，那么为什么它们都存在？你可以通过这样重写来减半你的状态：

```
 Package_Node* ptrToDelete=keyMain[i].next_package;
            while(ptrToDelete)
            {
                Package_Node* nextPtr = ptrToDelete->next_packaged;
                delete ptrToDelete;
                ptrToDelete = nextPtr;
            } 
```

请注意`ptrToDelete`仅在初始化时存在的方式。

请注意如何`nextPtr`尽可能短地存在，然后超出范围。它也仅在初始化后才存在。

接下来，始终发布实际演示您的问题的编译代码。您上面的代码由于与您的问题完全无关的原因无法编译，并且阅读您的想法不是您应该要求人们做的事情。

你不知道什么是错的，那么你怎么知道什么是重要的或不重要的？简单：让你的编译器弄清楚。生成一个简单的示例来演示您遇到的问题，编译它，测试问题是否仍然存在，然后发布*。*

不要有问题，而是删除部分以使其更短，发布可能或可能没有问题的非编译代码，并希望其他人能读懂你的想法。

您的使用`struct Package_Node*`是完全没有必要的——`Package_Node*`更短并且（除了一些极端的极端情况）做同样的事情。

即使您不使用智能指针，`struct`拥有指针的 a 也应该在其析构函数中销毁它，如果它不拥有该指针，则应该使用其他指针。 [RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)是你的朋友。当你创建一个拥有指针的 a 时，不要忘记遵循[三原则。](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)`struct`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:00:03.380

由于您在评论中提到 nPointer3 内存是通过“new Package_Node”分配的，因此行“delete[] nPointer3;” 应该读：

```
delete nPointer3;
nPointer3 = NULL;  // recommended (mentioned in another answer) 
```

您描述的行为可能是由于尝试释放通过单数 new 分配的 nPointer3 内存时未定义的行为造成的。只有通过数组 new 运算符“new[]”（例如 new Package_Node[16]）分配的内存应该用“delete []”释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:05:36.943

我不知道你是怎么检查东西是否被删除的；一旦您释放了内存，就可以重新使用该内存并且您不能再访问它 - 尽管除非您导致运行时错误，否则没有人会阻止您 - 但释放不会修改该内存的内容。
您无法通过检查来判断某个特定对象已被释放。

我相信您的问题是您完成后忘记`keyMain[i].next_package`设置`NULL`。

```
for(int i = 0; i < 3; i++)
{
    if (keyMain[i].next_package != NULL)
    {
        Package_Node* current = keyMain[i].next_package;
        Package_Node* next = 0;
        while (current)
        {
            next = current->next_package;
            // No "[]" since you're apparently not allocating with "[]"
            delete current;
            current = next;
        }
        keyMain[i].next_package = NULL;
    }
} 
```

# c++ - 检查某些应用程序是否定义为在启动时运行

> ID：15480468
> 
> 赞同：1
> 
> 时间：2013-03-18T15:24:55.573
> 
> 标签：c++, macos, startup

我正在编写一个 C++ 代码，它必须检查某些程序是否定义为在操作系统启动时运行。在 Windows 中，它将通过检查注册表中是否存在某些条目来实现（例如，在

> 软件\Microsoft\Windows\CurrentVersion\Run

）。

OS X 上注册表的等效机制是什么？如何以编程方式检查其中的某些条目？

参考有用的手册也会很有帮助。

# firefox - ASP.NET Web API CORS 在 Chrome 和 Safari 中运行良好，但在 Firefox 中无法运行

> ID：15480470
> 
> 赞同：3
> 
> 时间：2013-03-18T15:25:02.413
> 
> 标签：firefox, asp.net-web-api, cors

我已经使用 ASP.NET Web API 设置了一个 REST api 并启用了 CORS，如下所示：

```
<system.webServer>
 <httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
    <add name="Access-Control-Allow-Headers" value="Content-Type" />
    <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" />
  </customHeaders>
 </httpProtocol>
</system.webServer> 
```

jQuery ajax 调用在 Chrome 和 Safari 中有效，但在 Firefox 中我得到一个`NetworkError: 405 Method Not Allowed`.

Firefox 在网站运行时是否有一些特别严格的限制`http://localhost`？我是否错过了 FF 需要的 Web.Config 中的某些内容？

谢谢！

**＃＃ 编辑：**

看起来是 OPTION 方法不起作用。Chrome 中也不允许使用 OPTION 方法，但 Chrome 仍会继续发出 GET 请求。Firefox 为 OPTION 提供 405，然后从不进行 GET。

这是来自 chrome 开发工具的请求：

![chrome 开发工具](../Images/f39c1124d80c0c53bcc1665c81fe76f4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T15:28:11.077

尝试使用修复域而不是“*”解决了我们案例中的问题 `<add name="Access-Control-Allow-Origin" value="http://localhost" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T07:52:50.827

我在同样的情况下跑了。options-keyword 出现 405 HTTP 错误。好吧，解决方案是从 IISExpress（开发应用程序服务器）切换到 ISS 7.x。（当然）使用开发网络服务器有很大的限制。这解决了你为我提到的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:06:12.913

您可以尝试在 web.config 的 system.web -> handlers 下添加以下行吗？

<remove name="OPTIONSVerbHandler" />

此默认处理程序可能会阻止您的选项请求

# asp.net - 为 mp3 下载添加水印

> ID：15480472
> 
> 赞同：5
> 
> 时间：2013-03-18T15:25:02.313
> 
> 标签：asp.net, html, mp3, watermark, drm

我注意到 iTunes 和 Amazon 等公司在他们的 mp3 文件中添加了“水印”，显示如下信息：

*   从哪里购买文件。
*   谁买的。
*   等等

亚马逊还[表示](http://www.amazon.com/gp/help/customer/display.html/ref=dm_adp_uits?ie=UTF8&nodeId=200422000)

> “一些唱片公司要求我们在伴随音乐的元数据中插入标识符”

我正在忙着开发的电子商务网站将出售 mp3 下载。由于 iTunes 和亚马逊被迫在他们的歌曲中添加水印，一些唱片公司很可能会要求我正在开发的唱片公司也这样做。

该网站是使用 ASP.NET 4 和 C# 开发的 Web 应用程序。为每个下载 mp3 的用户在我们的网络服务器上生成一个包含元数据修改的新文件似乎是不切实际的，因为这将导致数千个临时 mp3 文件驻留在我们的服务器上。

有没有办法在下载文件时将相关元数据注入文件，或者可能在客户端使用 HTML5？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T02:34:18.147

您无需在服务器上创建数千个文件。您可以从源中读取，通过某种插入水印的方法将其流式传输，然后直接输出到新的 mp3 流到 http 响应。

该库提供了许多有用的类，用于读取和写入 mp3 流和其他音频操作。

[http://naudio.codeplex.com/](http://naudio.codeplex.com/)

它没有内置水印。你需要这样做。这将是真正复杂的部分。您需要修改原始文件以使您可以识别水印数据，但不影响音频质量并且无法轻松删除。祝你好运。

# mysql - MySQL 删除从 datetime 转换为 varchar 的剩余时间。子字符串（）？

> ID：15480476
> 
> 赞同：2
> 
> 时间：2013-03-18T15:25:24.443
> 
> 标签：mysql, sql, sql-update, substr

我做的事情有点倒退：

所以我已经将一列从 datetime 转换为 varchar （有正当理由）。我的问题是来自 TIME 的所有 0 也不同了。尝试使用 concat() 剥离字符串。

> 例如：2013-12-12 00:00:00
> 
> 输出：2013-12-12

问题是，并非所有的 varchars 都有“00:00:00”结尾。其中一些是在系统转到 varchar 而不是 datetime 之后放入的，所以我可以从字符串中删除 say -X 而无需首先检查它是否大于 12 个字符。

我在想类似的东西

```
UPDATE logic_intern_report_link SET comp_date=SUBSTR(comp_date,0,10) 
```

但是，这最终会删除该列的所有值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T15:34:12.313

我同意 JW. 的解决方案，但只是为了回答您的问题：您使用原始查询获得空值的原因是 SUBSTR() 函数需要基于 1 的起始索引，而不是您提供的零值第二个参数。试试这个

```
SELECT SUBSTR(comp_date,1,10) FROM logic_intern_report_link 
```

看看有什么不同。

（为了全面披露：SUBSTR() 函数也将接受一个负的起始索引）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T15:27:18.180

```
UPDATE  logic_intern_report_link 
SET     comp_date = DATE_FORMAT(DATE(comp_date), '%Y-%m-%d') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:29:04.577

```
update logic_intern_report_link 
set comp_date = REPLACE(comp_date, ' 00:00:00', '') 
```

# python - 将字符串拆分为元组列表？

> ID：15480483
> 
> 赞同：5
> 
> 时间：2013-03-18T15:25:45.643
> 
> 标签：python, split, tuples

我有一串键值对，不幸的是它们用相同的符号分隔。有没有办法在不使用 lambda 的情况下将其“拆分”成一个元组列表？

这是我所拥有的：

```
Moscow|city|London|city|Royston Vasey|vilage 
```

我想要的是：

```
[("Moscow","city"), ("London", "city")....] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T15:28:06.173

这真的是一件很容易的事......

`'|'`首先，将字符串拆分到`zip`所有其他元素上：

```
data = s.split('|')
print zip(data[::2],data[1::2]) 
```

在 python3 中，您需要： `print(list(zip(data[::2],data[1::2]))`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-18T15:31:25.670

```
s = 'Moscow|city|London|city|Royston Vasey|vilage'

it = iter(s.split('|'))
print [(x,next(it)) for x in it] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-18T15:30:49.650

```
def group(lst, n):
    for i in range(0, len(lst), n):
        val = lst[i:i+n]
        if len(val) == n:
            yield tuple(val)

a = 'Moscow|city|London|city|Royston Vasey|vilage'
list(group(a.split('|'), 2)) 
```

输出是`[('Moscow', 'city'), ('London', 'city'), ('Royston Vasey', 'vilage')]`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-18T15:32:52.347

对于 Python2

```
>>> s = "Moscow|city|London|city|Royston Vasey|vilage"
>>> zip(*[iter(s.split('|'))]*2)
[('Moscow', 'city'), ('London', 'city'), ('Royston Vasey', 'vilage')] 
```

Python3`list(zip(...))`当然只需要

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T15:33:25.703

您可以使用`city, status, remaining = s.split("|", 2)`一些递归方法`city_split(s)`来实现您想要的。

# javascript - 调试 Easeljs 或 kineticjs.js

> ID：15480489
> 
> 赞同：1
> 
> 时间：2013-03-18T15:25:57.610
> 
> 标签：javascript, kineticjs, easeljs

许多 javascript 库，如 easeljs 或 kinetic.js 都可以作为

*   源代码
*   缩小的内置版本

当我第一次看它们时，我不想要缩小版本，而是可调试的普通版本。

**有人有快速调试这两个库的方法吗？**

我试图在没有缩小的情况下构建画架，但我不熟悉 Closure，而且我没有看到阻止它缩小的方法，因为我知道它总是捆绑和缩小。

我不会以正确的顺序包含许多源文件来完成这项工作。

致图书馆维护者：谢谢，但*请*提供非缩小版本并在自述文件顶部放置指向它们的链接。

**编辑**
找到动力学的非缩小版本：http:
[//www.html5canvastutorials.com/libraries/kinetic-v4.3.2-beta.js](http://www.html5canvastutorials.com/libraries/kinetic-v4.3.2-beta.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:29:09.480

可以想象，这些库的“源”被打包到 javascript 模块中，而不是一个大的源文件。

您可以在此处查看 KineticJS 依赖项：http: [//kineticjs.com/configurator.php](http://kineticjs.com/configurator.php)

您可以在此处查看 EaselJS 构建清单：[https ://github.com/CreateJS/EaselJS/blob/master/build/config.json](https://github.com/CreateJS/EaselJS/blob/master/build/config.json)

然后只需将适当的源文件与您的 html/css 文件一起放在一个文件夹中。确保脚本引用 html 文件中的所有源文件。

从那里，使用浏览器的检查器或您最喜欢的编程 IDE。

你是金子（！）——你的调试器将引用适当的源文件+违规行#！

# nginx - Nginx+web.py+fastcgi 错误：未找到

> ID：15480492
> 
> 赞同：0
> 
> 时间：2013-03-18T15:26:03.183
> 
> 标签：nginx, fastcgi, web.py

错误是`not found`，并且 Nginx 没有错误，我检查了`/var/log/nginx/error.log`文件，它是空的。那么错误来自哪里？

名为 的python 文件`app.py`，它是可以执行的，其内容与[http://webpy.org/cookbook/fastcgi-nginx](http://webpy.org/cookbook/fastcgi-nginx)`app.py`相同，名为的Nginx 配置文件位于，我只是在其中添加了一些内容：`default``/etc/nginx/sites-available/`

```
location / {
      #below is what I added
      include /etc/nginx/fastcgi_params;
      fastcgi_pass 127.0.0.1:8080
} 
```

有谁知道应用程序无法路由的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:49:46.663

好吧，我想通了，这是我的 Nginx 配置文件：

```
server {
    listen   80; ## listen for ipv4; this line is default and implied
    #listen   [::]:80 default_server ipv6only=on; ## listen for ipv6

    #root /usr/share/nginx/www;
    root  /var/www/app/;
    #index index.html index.htm;

    # Make site accessible from http://localhost/
    server_name 10.100.20.107;

    location / {
        # First attempt to serve request as file, then
        # as directory, then fall back to displaying a 404.
        # try_files $uri $uri/ /;
        # Uncomment to enable naxsi on this location
        # include /etc/nginx/naxsi.rules

        fastcgi_param REQUEST_METHOD $request_method;
        fastcgi_param QUERY_STRING $query_string;
        fastcgi_param CONTENT_TYPE $content_type;
        fastcgi_param CONTENT_LENGTH $content_length;
        fastcgi_param GATEWAY_INTERFACE CGI/1.1;
        fastcgi_param SERVER_SOFTWARE nginx/$nginx_version;
        fastcgi_param REMOTE_ADDR $remote_addr;
        fastcgi_param REMOTE_PORT $remote_port;
        fastcgi_param SERVER_ADDR $server_addr;
        fastcgi_param SERVER_PORT $server_port;
        fastcgi_param SERVER_NAME $server_name;
        fastcgi_param SERVER_PROTOCOL $server_protocol;
        fastcgi_param SCRIPT_FILENAME $fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_script_name;
        #fastcgi_index app.py;
        fastcgi_pass 127.0.0.1:8080;
    }
    location /static/ {
        root /var/www/app;
        if (-f $request_filename) {
            rewrite ^/static/(.*)$ /static/$1 break;
        }
    } 
```

# c++ - VS 2010,C++中使用“open”时保存文件的默认路径

> ID：15480493
> 
> 赞同：0
> 
> 时间：2013-03-18T15:26:04.750
> 
> 标签：c++, visual-studio-2010, file, path

```
#include<iostream>
#include<fstream>
using namespace std;
int main()
{
string a("hehe.txt");
ofstream aa;
aa.open(a.c_str());
aa<<"hehe"<<endl;
aa.close();
return 0;
} 
```

我在 VS 2010 中创建了一个简单的项目，它只包含一个主文件，如上所示。我想知道“hehe.txt”存储在哪里？我在项目中找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:29:30.203

该文件将创建在与 .vcxproj 和 .cpp 文件相同的文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:29:45.703

它通常存储在您启动可执行文件的目录中。检查项目下的 Debug 或 Release 子目录。您可以通过在项目属性->配置属性->调试中指定它来更改工作目录。

# c++ - Netbeans：加载共享库时出错：libicuuc.so.50：无法打开共享对象文件：没有这样的文件或目录

> ID：15480494
> 
> 赞同：1
> 
> 时间：2013-03-18T15:26:05.860
> 
> 标签：c++, timezone, shared-libraries, netbeans-7, icu

我正在尝试在 Ubuntu 下将 ICU-Timezone API 与 Netbeans c++(7.3) 一起使用。

我已经为 ICU 添加了库和包含目录。

然后我想执行这个简单的示例代码：

```
#include <ctime>
#include <stdlib.h>
#include <stdio.h>
#include "DateFormats.h"
#include "NumberFormats.h"
#include <time.h>
#include <unistd.h>
#include <getopt.h>
#include <timezone.h>
using namespace std;

int main(int argc, char **argv) {
    cout<<"hello"<<endl;
    TimeZone *tz = TimeZone::createTimeZone("America/Los_Angeles");  
} 
```

我得到错误

> /home/ubuntu/NetBeansProjects/DFC/dist/Debug/GNU-Linux-x86/dfc：加载共享库时出错：libicuuc.so.50：无法打开共享对象文件：没有这样的文件或目录

希望你能帮我！

谢谢弗洛里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T10:57:40.417

运行跟随的命令很好

`export LD_LIBRARY_PATH=/usr/local/lib`

或者您可以使用 vi 永久添加到文件

`vi ~/.bashrc`

# jquery - 在打印时隐藏调整大小功能

> ID：15480498
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:26:11.980
> 
> 标签：jquery, html, css

我有一个页面，用户可以调整图像大小以制作情绪板。一切正常，除了打印。如果他们打印情绪板，则调整大小的位置会出现一个白色方块。我不知道是否需要css。

**在纸上打印时如何隐藏调整器？**

目前我没有用于调整大小的 CSS。我正在使用[jquery 调整大小功能](http://jqueryui.com/resizable/)。

**例子**

![在此处输入图像描述](../Images/8a43936dd3b923f446eb078d3f44908c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:28:00.083

使用 jQuery，通常你会调用`$('#yourId').hide()`. 那没有用吗？

[文档](http://api.jquery.com/hide/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:29:07.533

你应该在标题中添加这个：

```
<link type="text/css" rel="stylesheet" href="path_to_special_print_css" media="print" /> 
```

在这个 css 文件中添加：

```
#resizeblock {
  visible: hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:34:36.920

您是否在 中使用特定的打印样式表`<head>`？像这样：

```
<link rel="stylesheet" type="text/css" media="print" href="print.css"> 
```

您可以在其中`print.css`设置特定于打印的属性。因此，您可以定位调整大小并将其隐藏：

```
.resizer { display: none; } 
```

（假设调整器有一个`resizer`类）

# c# - 有什么方法可以设置 Encoding.UTF8 实例提供 BOM 为 false

> ID：15480500
> 
> 赞同：0
> 
> 时间：2013-03-18T15:26:14.527
> 
> 标签：c#, xml

我知道我们可以创建一个`UTF8Encoding`不提供 Unicode 字节顺序标记的实例，方法是使用`UTF8Encoding(false)`. 但我也遇到了另一种获取`UTF8Encoding`实例引用的方法是 by `Encoding.UTF8`。问题是：我们是否可以将静态`Encoding.UTF8`实例的提供 BOM 属性设置为 false，或者它将始终提供 BOM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:28:57.540

Encoding.UTF8 返回一个静态的默认实例，该实例将始终包含 BOM

```
 [__DynamicallyInvokable]
    public static Encoding UTF8
    {
      [TargetedPatchingOptOut("Performance critical to inline across NGen image boundaries"), __DynamicallyInvokable] get
      {
        if (Encoding.utf8Encoding == null)
          Encoding.utf8Encoding = (Encoding) new UTF8Encoding(true);
        return Encoding.utf8Encoding;
      }
    } 
```

我应该注意，该标志存储在一个私有布尔字段中，您可以通过反射将其设置为 false，但这不是一个好主意，原因有很多。

# java - CMake 和 Java：为 javah 编译，而不是 jar

> ID：15480502
> 
> 赞同：2
> 
> 时间：2013-03-18T15:26:18.510
> 
> 标签：java, java-native-interface, cmake

使用 JNI 时，我们将在 bash/cmd 上执行以下操作：

1.  编译源码
2.  生成标题
3.  构建原生库
4.  把整个东西拉上拉链

在脚本中，类似于：

```
javac foo.java
javah foo
cmake . && make
jar ..... 
```

如何在 CMake 上重现？

除了使用 CUSTOM_COMMAND 之外，我只能找到 add_jar 来编译 java 源代码。是否可以在 CMake 中编译源代码而不在之后对其进行 jaring？

或者我应该辞职并添加java源代码，再次构建库和add_jar？

此外，Java_JAVAH_EXECUTABLE 应该如何与 CUSTOM_COMMAND 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:01:38.430

我有一个项目，我试图实现这样的目标。（并且一些 Android NDK 使用 android-cmake 工作，但成功有限，尽管这不是你问题的重点。）

CMake 确实支持构建 Java 的选项。[见注 1] 然而，这正是它的方向：就这个构建系统而言，您的本机代码是一等公民，所以如果您正在考虑走与我相同的道路，请记住这一点。有些人在 ant/maven 或类似性质的东西下使用 CMake 作为其 Java 工作流程的一个*组件，并且有*[各种插件](https://code.google.com/p/cmakeant/)可以在“更大”构建的范围内加载 CMake 项目。

但我认为这确实阻碍了 CMake 生成器的价值。我调查过这样做，但我们最终没有走那条路。这真的是你必须为自己做出的选择。（我发现这个项目*有*Java，而不是***Java***，所以对我来说做一些更像你要求的事情是有意义的。）

事情是这样的：add_jar 有一点黑盒魔法。如果你想集成 UseJNI ......好吧，我找不到太多支持它的方式。（通读 CMake 2.8.x 中包含的模块的源代码会发现诸如 CMAKE_JNI_TARGET 之类的东西。虽然我从来没有真正做到这一点，但我还是[把它包括在内](https://github.com/hagemt/libalexandria/blob/master/bindings/java/CMakeLists.txt#L35)。这是我对这个问题的自定义解决方案：

[用于使用 Java 的项目中的顶级 CMakeLists.txt 的好东西](https://github.com/hagemt/libalexandria/blob/master/CMakeLists.txt#L108)

[包含有用宏的定义：javah](https://github.com/hagemt/libalexandria/blob/master/include/libalexandria/laJ/CMakeLists.txt)

[如何在本机库周围使用宏的示例](https://github.com/hagemt/libalexandria/blob/master/bindings/java/jni/CMakeLists.txt#L28)

[1] 在撰写本文时，似乎有两种方法：

*   通过 project(PROJECT_NAME Java) 通知 CMake 它需要找到一个通用的 Java 编译器
*   find_package({Java, JNI})，它公开了更多功能，包括 add_jar

[这是后面的参考](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module%3aFindJava)，我发现自己参考了很多。

祝你好运。

# java - Heroku/Play/BoneCp 连接问题

> ID：15480506
> 
> 赞同：6
> 
> 时间：2013-03-18T15:26:24.820
> 
> 标签：java, heroku, playframework-2.0, entitymanager, bonecp

我在 heroku 上有一个使用 play 的应用程序。它在很长一段时间内都运行良好，但最近我开始得到这个：

```
Caused by: java.sql.SQLException: Timed out waiting for a free available connection.
at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169) ~[hibernate-core-4.1.9.Final.jar:4.1.9.Final]
at com.jolbox.bonecp.BoneCP.getConnection(BoneCP.java:503) ~[bonecp-0.7.1.RELEASE.jar:0.7.1.RELEASE] 
```

这是由

```
org.postgresql.util.PSQLException: FATAL: too many connections for role "ejmatdbwywaugk" 
```

现在这很明显是一个连接泄漏，除了我使用的是 JPA.em()。Play 示例永远不会关闭这样获得的实体管理器。我尝试关闭它，但随后应用程序爆炸说实体管理器已关闭。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T13:09:40.043

尝试使用 BoneCP 0.8.0-rc1 并使用以下配置：

```
db.default.idleMaxAge=10 minutes
db.default.idleConnectionTestPeriod=30 seconds
db.default.connectionTimeout=20 second
db.default.connectionTestStatement="SELECT 1"
db.default.maxConnectionAge=30 minutes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-15T00:20:26.607

BoneCP/Heroku/Play 处理连接的方式存在缺陷。我在 github 上对 BoneCP 进行了修复：

[https://github.com/wwadge/bonecp/pull/10](https://github.com/wwadge/bonecp/pull/10)

此外，可以通过将以下内容添加到**Build.scala**来使用已编译的库：

```
val appDependencies = Seq(
"com.jolbox" % "bonecp" % "0.8.0-rc2-SNAPSHOT-20130712-14382677.jar",
....

val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  libraryDependencies += "com.jolbox" % "bonecp" % "0.8.0-rc2-SNAPSHOT-20130712-14382677.jar" from "https://dl.dropboxusercontent.com/u/36714110/libraries/bonecp-patches/bonecp-0.8.0-rc2-SNAPSHOT-20130712-14382677.jar"
,resolvers += ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:18:40.807

BoneCP 0.7.1 版本（目前是稳定版本）存在一个已知的连接泄漏问题 -[错误 999114](https://bugs.launchpad.net/bonecp/+bug/999114)。切换到@MaFo 提到的更高版本应该可以解决它。[BoneCP/Postgres 连接泄漏](https://groups.google.com/forum/#!msg/play-framework/RM1QwOFz-2A/hvh7LQOffyYJ)中也提到了一种解决方法

最后，我在我正在从事的项目中切换到另一个连接池[Tomcat JDBC 连接池](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)，因为我希望它（将）作为 apache 项目的一部分得到更好的支持。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-20T04:50:27.413

我在使用远程 postgres 实例时遇到了同样的问题。我在 application.conf 数据库设置中添加了以下内容：

```
db.default.partitionCount=1
db.default.maxConnectionsPerPartition=5
db.default.minConnectionsPerPartition=5 
```

这对我有用。我正在使用 org.postgresql.Driver 驱动程序。

# r - read.table 错误：相同的数据文件，但列号不匹配

> ID：15480508
> 
> 赞同：0
> 
> 时间：2013-03-18T15:26:32.003
> 
> 标签：r, read.table

我想为从文件中读取的数据表分配列名，但我收到一条对我来说不太有意义的错误消息。这是数据文件的摘录：

```
HEADER  SPOT    GRID    TOP LEFT    BOT RIGHT   ROW COL CH1I    CH1B    CH1AB   CH2I    CH2B    CH2AB   SPIX    BGPIX   EDGE    RAT2    MRAT    REGR    CORR    LFRAT   CH1GTB1 CH2GTB1 CH1GTB2 CH2GTB2 CH1EDGEA    CH2EDGEA    FLAG    CH1KSD  CH1KSP  CH2KSD  CH2KSP
REMARK  SOFTWARE    ScanAlyze
REMARK  SOFTVERS    2.30
REMARK  CH1 IMAGE   lc8n076_532 nm
REMARK  CH2 IMAGE   lc8n076_635 nm
REMARK  GRID FILE   ..\..\AshGrids\lc8n076_ar_finalflagged.SAG
REMARK  DATE    8/28/99
REMARK  TIME    9:12:58 AM
SPOT    1   1   79  48  96  65  1   1   187 174 183 115 101 104 225 990 0   1.077   0.6214  0.2045  0.3047  0.3411  0.5111  0.4978  0.1911  0.2089  0.006432    -0.00362    0   0.04242 8.898E-01   0.09556 6.597E-02
0... 
```

现在，我首先阅读了标题：

```
blood_title <- read.table("lc8n076rex2.DAT", header=FALSE, sep="\t", nrows=1) 
```

接下来，我将它用作 col.names 来读取表的其余部分，我想在其中使用 blood_title 变量作为列名：

```
blood_data <- read.table("lc8n076rex2.DAT", header=FALSE, skip=8, nrows=5, col.names="blood_name") 
```

不幸的是，我收到一条我不明白的错误消息：

```
Error in read.table("lc8n076rex2.DAT", header = FALSE, skip = 8, nrows = 5,  : 
  more columns than column names 
```

为什么会出现这个错误？blood_title 中的表名和列名都包含 34 列：

```
 V1   V2   V3  V4   V5  V6    V7  V8  V9  V10  V11   V12  V13  V14   V15  V16   V17  V18  V19  V20  V21  V22   V23     V24     V25
1 HEADER SPOT GRID TOP LEFT BOT RIGHT ROW COL CH1I CH1B CH1AB CH2I CH2B CH2AB SPIX BGPIX EDGE RAT2 MRAT REGR CORR LFRAT CH1GTB1 CH2GTB1
      V26     V27      V28      V29  V30    V31    V32    V33    V34
1 CH1GTB2 CH2GTB2 CH1EDGEA CH2EDGEA FLAG CH1KSD CH1KSP CH2KSD CH2KSP

    V1 V2 V3 V4  V5 V6  V7 V8 V9  V10 V11 V12   V13 V14 V15 V16 V17 V18     V19     V20    V21    V22     V23    V24    V25    V26
1 SPOT  1  1 79  48 96  65  1  1  187 174 183   115 101 104 225 990   0  1.0770  0.6214 0.2045 0.3047 0.34110 0.5111 0.4978 0.1911
2 SPOT  2  1 78  65 95  82  1  2  451 166 177   842 101 133 225 756   0  2.6000  2.1550 1.9440 0.7322 3.40300 0.7467 0.7467 0.5067
3 SPOT  3  1 78  83 95 100  1  3  727 171 187 12803  98 134 225 766   0 22.8500 20.1900 0.0000 0.0000 0.06008 0.7289 0.8711 0.5600
4 SPOT  4  1 78 100 95 117  1  4 1532 181 196   730  98 108 225 746   0  0.4678  0.4773 0.4028 0.8788 0.42010 0.7867 0.8000 0.6311
5 SPOT  5  1 78 118 95 135  1  5 4139 188 214 20358 105 159 225 746   0  5.1260  4.7240 0.0000 0.0000 5.58600 0.8533 0.9289 0.7156
     V27        V28        V29 V30     V31       V32     V33       V34
1 0.2089  0.0064320 -3.620e-03   0 0.04242 8.898e-01 0.09556 6.597e-02
2 0.5689 -0.0007581 -2.205e-03   0 0.38510 3.391e-23 0.46000 6.426e-33
3 0.7600 -0.0164600  8.613e-06   0 0.44400 8.761e-31 0.65230 0.000e+00
4 0.6356 -0.0104900  6.777e-03   0 0.51220 1.389e-40 0.52090 5.747e-42
5 0.8356 -0.0209900 -9.983e-03   0 0.60900 0.000e+00 0.70760 0.000e+00 
```

# 编辑：

这是我在这个特定顺序中使用的完整代码

```
> blood_title <- read.table("lc8n076rex2.DAT", header=FALSE, sep="\t", nrows=1)
> blood_data <- read.table("lc8n076rex2.DAT", header=FALSE, skip=8, nrows=5, col.names=unlist("blood_title"))
Error in read.table("lc8n076rex2.DAT", header = FALSE, skip = 8, nrows = 5,  : 
  more columns than column names
> blood_title
      V1   V2   V3  V4   V5  V6    V7  V8  V9  V10  V11   V12  V13  V14   V15  V16   V17  V18  V19  V20  V21  V22   V23     V24     V25
1 HEADER SPOT GRID TOP LEFT BOT RIGHT ROW COL CH1I CH1B CH1AB CH2I CH2B CH2AB SPIX BGPIX EDGE RAT2 MRAT REGR CORR LFRAT CH1GTB1 CH2GTB1
      V26     V27      V28      V29  V30    V31    V32    V33    V34
1 CH1GTB2 CH2GTB2 CH1EDGEA CH2EDGEA FLAG CH1KSD CH1KSP CH2KSD CH2KSP
> blood_data
    V1 V2 V3 V4  V5 V6  V7 V8 V9  V10 V11 V12   V13 V14 V15 V16 V17 V18     V19     V20    V21    V22     V23    V24    V25    V26
1 SPOT  1  1 79  48 96  65  1  1  187 174 183   115 101 104 225 990   0  1.0770  0.6214 0.2045 0.3047 0.34110 0.5111 0.4978 0.1911
2 SPOT  2  1 78  65 95  82  1  2  451 166 177   842 101 133 225 756   0  2.6000  2.1550 1.9440 0.7322 3.40300 0.7467 0.7467 0.5067
3 SPOT  3  1 78  83 95 100  1  3  727 171 187 12803  98 134 225 766   0 22.8500 20.1900 0.0000 0.0000 0.06008 0.7289 0.8711 0.5600
4 SPOT  4  1 78 100 95 117  1  4 1532 181 196   730  98 108 225 746   0  0.4678  0.4773 0.4028 0.8788 0.42010 0.7867 0.8000 0.6311
5 SPOT  5  1 78 118 95 135  1  5 4139 188 214 20358 105 159 225 746   0  5.1260  4.7240 0.0000 0.0000 5.58600 0.8533 0.9289 0.7156
     V27        V28        V29 V30     V31       V32     V33       V34
1 0.2089  0.0064320 -3.620e-03   0 0.04242 8.898e-01 0.09556 6.597e-02
2 0.5689 -0.0007581 -2.205e-03   0 0.38510 3.391e-23 0.46000 6.426e-33
3 0.7600 -0.0164600  8.613e-06   0 0.44400 8.761e-31 0.65230 0.000e+00
4 0.6356 -0.0104900  6.777e-03   0 0.51220 1.389e-40 0.52090 5.747e-42
5 0.8356 -0.0209900 -9.983e-03   0 0.60900 0.000e+00 0.70760 0.000e+00
> 
```

# 编辑2：

问题已解决，忘记取消引用变量 blood_title

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:39:43.863

这里有两件事。首先，您将名称保存到`blood_title`然后使用`col.names=blood_name`in `blood_data`。我想这是一个错字...？

其次（更重要的是），您的实际问题是您提供的只是一个具有一个值“blood_name”的字符向量，`col.names`而不是所有列名。试试这个：

```
blood_data <- read.table("lc8n076rex2.DAT", header=FALSE, 
                    skip=8, nrows=5, col.names=unlist(blood_title)) 
```

# java - 如何构建与活动目录相同架构的 ldap 服务器

> ID：15480512
> 
> 赞同：2
> 
> 时间：2013-03-18T15:26:37.917
> 
> 标签：java, active-directory, apacheds

我想使用与活动目录具有相同架构的 apacheds 构建存根服务器。

我们需要添加自定义属性，例如：userAccountControl、unicodePwd、..etc。

我不知道如何以编程方式将其添加到默认架构中。任何想法？

apacheds 版本 2.0.0-M10

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-14T19:42:07.233

使用 Apache DS Studio 定义您自己的架构。您可以使用核心、余弦或其他模式中的属性和对象类。实际上，您可以采用 MS AD 架构并定义所需的对象类和属性。

您可能无法直接在 Apache DS 中导入 AD 架构，因为格式会有所不同（即使它们都在 LDIF 中），但是，您可以在 Apache DS 架构中创建相同的类和属性（我建议使用不同的 OID多发性硬化症）。

然后，您可以将模式 LDIF 导入 Apache DS。

# jquery - jQuery Tip Calculator - 带有基于 TextArea 输入的变量的公式

> ID：15480516
> 
> 赞同：1
> 
> 时间：2013-03-18T15:26:43.773
> 
> 标签：jquery, variables, user-input, validation, jquery-calculation

我发现了一些有用的线程，但没有直接回答我的问题，所以这是具体问题：

为了磨练我有限的 jQuery 技能，我正在创建一个拆分账单/小费计算器，它根据以下输入计算单击按钮时的金额：账单总额、小费百分比、人数。

但是，当我单击按钮时，什么都没有发生。这是jQuery代码：

```
$(document).ready(function() {
$('button').click(function(){
var Total = $('.Total').val();
var Tip = $('.Tip').val();
var NumberOfPeople = $('.NumberOfPeople').val();
var AdjTotal = (((Tip/100)*Total)+Total).toFixed(2);
var Result = (AdjTotal/NumberOfPeople).toFixed(2);
if(isNaN(AdjTotal)) {
    $('.result').remove();
    $('.error').remove();
    $('.price').append('<p class="error">Please enter valid numbers into the above fields.</p>');
}
else {
    $('.error').remove();
    $('.result').remove();
    $('.price').append('<p class="result">Your total is $' + AdjTotal + ' ' + 'and each person owes: $' + Result + '.</p>');
}
});
}); 
```

和 HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css" />
        <script src='script.js'></script>
        <title>Split the Bill</title>
    </head>
    <body>
        <div class="header">
            <h1>Split the Bill</h1>
        </div>
        <div>
            <table>
                <tbody>
                    <tr>
                        <td align="right">
                            Bill Total: $
                        </td>
                        <td text-align="left">
                            <input class="Total" type="text" name="Total">
                        </td>
                    </tr>
                    <tr>
                        <td align="right">
                            Tip Percentage: 
                        </td>
                        <td text-align="left">
                        <input class="Tip" type="text" name="Tip"> %
                        </td>
                    </tr>
                    <tr>
                        <td align="right">
                            Number of People: 
                        </td>
                        <td colspan=3>
                            <input class="NumberOfPeople" type="text" name="Number of People">
                        </td>
                    </tr>
                    <tr>
                        <td colspan=4 align="right">
                            <button>Calculate</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="price">
        </div>
    </body>
</html> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:34:25.580

问题是这一行：

```
var AdjTotal = (((Tip/100)*Total)+Total).toFixed(2); 
```

总计是一个字符串。你需要强制它是一个数字：

```
var AdjTotal = (((Tip/100)*Total)+Total/1).toFixed(2); 
```

[http://jsfiddle.net/59WXX/](http://jsfiddle.net/59WXX/)

# java - 升级到 JRE7 抛出 java.lang.NoClassDefFoundError

> ID：15480528
> 
> 赞同：2
> 
> 时间：2013-03-18T15:27:23.050
> 
> 标签：java, noclassdeffounderror

我的产品运行**JRE 6.31**没有任何问题。现在我正在尝试将其设置为与 JRE 7 一起使用，但是当我在 Linux 机器上运行它时，我得到：

```
java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11FontManager 
```

当调用`java.awt.Font.canDisplayUpTo()`. 这个案子是不是很眼熟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:16:44.877

似乎您的 Linux 机器没有安装 X11，或者没有可用的 X 显示器。

如果您的应用程序是服务器应用程序，请尝试使用命令行开关强制进行无头渲染：

```
-Djava.awt.headless=true 
```

**编辑：**

此外，用户报告说，在 Linux 系统上，Oracle JDK 1.7 和 OpenJDK 1.7 都需要安装 dejavu 字体。

# php - 比较 2 个数组

> ID：15480529
> 
> 赞同：1
> 
> 时间：2013-03-18T15:27:38.377
> 
> 标签：php, arrays

是否有比较 2 个不同的关联数组并返回更改的函数？

例如

```
$age = array("Peter"=>"35","Ben"=>"37","Joe"=>"");
$age2 = array("Peter"=>"38","Ben"=>"37","Joe"=>"43"); 
```

返回

```
$return = array(
    "Peter"=>"Changed from 35 to 38",
    "Joe"=>"Changed from blank to 43"
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:28:43.953

[array_diff](http://php.net/manual/en/function.array-diff.php)可能会让您走上正确的道路。虽然它没有给出您正在寻找的确切输出，但它会向您显示两个数组之间的差异。

正如马克指出的那样，[array_diff_assoc](http://www.php.net/manual/en/function.array-diff-assoc.php)可能会更有帮助，因为它维护数组索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:45:35.127

如前所述，`array_diff_assoc`是您的起点。剩下的就是为每个差异构建你的字符串：

```
function compareAge($age, $age2)
{
    $return = array();
    foreach(array_keys(array_diff_assoc($age, $age2)) as $diffKey) {
        $from = empty($age[$diffKey]) ? 'blank' : $age[$diffKey];
        $to = empty($age2[$diffKey]) ? 'blank' : $age2[$diffKey];
        $return[$diffKey] = "Changed from {$from} to {$to}";
    }
    return $return;
} 
```

**[工作演示](http://sandbox.onlinephpfunctions.com/code/b5bb7ebf7035537c27f87d3c8634ed3937f05aa0)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:37:43.020

没有什么默认的，我手上有一些时间:) [http://codepad.org/2UtrPE3o](http://codepad.org/2UtrPE3o)

```
<?
$age = array("Peter"=>"35","Ben"=>"37","Joe"=>"");
$age2 = array("Peter"=>"38","Ben"=>"37","Joe"=>"43");

$result = array();
foreach($age as $key=>$val) {
  if (array_key_exists($key, $age2)) {
    if ($val!==$age2[$key])
      $result[$key] = 'Changed from '.(empty($val)?'blank':$val).' to '. (empty($age2[$key])?'blank':$age2[$key]);
  } else {
    $result[$key] = 'Changed from '.(empty($val)?'blank':$val).' to blank';
  }
}

foreach($age2 as $key=>$val) {
  if (!array_key_exists($key, $age)) {
    $result[$key] = 'Changed from blank to ' . $val;
  }
}

var_dump($result);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T09:01:19.357

检查这个，更有效的解决方案：

```
$age1   = array("Peter"=>"35","Ben"=>"37","Joe"=>"");
$age2   = array("Peter"=>"38","Ben"=>"37","Joe"=>"43");

$result = array_diff_assoc($age1, $age2);

$res    = array();
foreach($result as $key=>$val){
  $res[$key]  = "Changed from ".($val?$val:"Balnk")." to ".($age2[$key]?$age2[$key]:"blank");
}

echo "<pre>";
print_r($res); 
```

# php - 在注册时向所选用户创建警报

> ID：15480537
> 
> 赞同：0
> 
> 时间：2013-03-18T15:27:58.073
> 
> 标签：php, notifications, alert

我正在使用 PHP 建立一个在线诊所注册系统。该系统有两组不同的用户，即患者和诊所。患者将从可用的诊所中进行选择，并在注册时为患者分配一个唯一的队列号。我已经做了所有这些，但是我现在需要知道的是，当诊所的用户收到来自患者用户的新注册时，如何向他们创建警报？此警报是在不刷新网页的情况下通知诊所新注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:33:13.327

使用 Ajax 从服务器获取最新（或未读）通知。此 Ajax 可以从已登录诊所用户的浏览器中定期发送。
如果诊所不在线，您也可以向诊所发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:40:31.850

我会使用“XMLHttpRequest”来做到这一点。在诊所的网页上，我会有这样的 javascript：

```
<script type="text/javascript">
var comm = new Array(), frameTime = 0, regTime = 0;

function startItUp(){
    animate();
}

window.requestAnimFrame = (function(){//from Paul Irish
    return  window.requestAnimationFrame       || 
    window.webkitRequestAnimationFrame || 
    window.mozRequestAnimationFrame    || 
    window.oRequestAnimationFrame      || 
    window.msRequestAnimationFrame     || 
    function(callback, element){
        window.setTimeout(callback, 1000 / 60);
    };
})();
function animate() {
    frameTime = Date.now();
        if(regTime < frameTime){
            comm.push( new getRegistrants() );
            regTime = frameTime + 8000;//how often to call the php page and check for new patients
        }
    }
    requestAnimFrame( animate );
}
function getRegistrants(){
    this.client = new XMLHttpRequest();
    this.client.onload  = function () {
        var registrantData = this.responseText;
        //Parse the registrant data displayed by php page here and make the alert or div popup...
        alert(parsedRegistrantName + ' has registered.');

    }
    this.client.open('POST', 'getRegistrants.php');//This page would have a session that would contain your logged in clinic's ID and would just output registrant(patient) data that you can parse
    this.client.send();
}
</script> 
```

然后在诊所的网页中启动它：

```
<body onload="startItUp();"> 
```

注意：这种方法在几个 Web 应用程序中对我来说效果很好，但是根据我的个人经验，如果您有很多诊所（数百个）执行 XMLHttpRequest，那么如果您有便宜/常见的共享主机，您将遇到服务器资源问题为了这。

# java - 在 Autocompletetextfield 中使用面板而不是字符串

> ID：15480544
> 
> 赞同：1
> 
> 时间：2013-03-18T15:28:18.347
> 
> 标签：java, autocomplete, wicket, panels

我正在使用 Wicket 为网站上的搜索引擎构建用户界面。当用户键入时，结果显示在下拉列表中。由于我有很多不同的对象（每个对象都有不同的显示结构），我想定义几个面板。因此，对于数据库中找到的每个项目，它都会获得正确的面板和正确的结构。例如：如果搜索引擎找到一个用户，它应该只显示名称。当找到图片时，缩略图和描述等......

现在我正在使用 AutocompleteTextField 但它只需要字符串。我想过在字符串中添加 html 并像这样显示它。但由于这不是一个真正干净的解决方案，我正在考虑使用面板。

那么，任何人都知道如何使用面板而不是 AutoCompleteTextField 中的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:23:46.710

使用-hook 方法来创建显示选项的行为`AutoCompleteTextField`。`newAutoCompleteBehavior`此钩子方法将[IAutoCompleteRenderer](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/extensions/ajax/markup/html/autocomplete/IAutoCompleteRenderer.html)作为参数。这个渲染器实际上是在做显示部分。因此，您可以将自己的渲染器传递给 AutoCompleteTextField （有一个构造函数接受一个），或者将其子类化`AutoCompleteTextField`以覆盖工厂方法。无论哪种方式，您都必须提出自己的实现，`IAutoCompleteRenderer`因为在 wicket 中没有这样的实现，并且渲染器本身将受到您当前应用程序设计的严重影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T18:38:39.477

创建自己的组件。使用 ListView，将其放入 WebMarkupContainer。根据 TextField 输入显示 WebMarkupContainer 并刷新附加到 TextField 的 OnChangeAjaxBehavior 中的 ListView。

这样你就可以完全控制你想要实现的目标。

ListView 的示例代码：

```
 private ListView getLv(){
      ListView lv = new ListView(PANEL, new PropertyModel(this, "someList")) {
         @Override
         protected void populateItem(ListItem item) {
            Integer type = item.getModelObject().getType();
            if (type == 1) {
               item.add(new PanelType1("panel", item.getModelObject().someIdMaybe));
            } else if (type == 2) {
               item.add(new PanelType2("panel", item.getModelObject().someIdMaybe));
            }
         }
      };
      return lv;
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:32:41.307

我认为不可能使用面板，因为面板是一个组件，它本身可以是任何东西。支持任何面板作为自动完成列表的一部分太难了。将自动完成元素作为带有自动完成字段的表单会很有趣；）

所以，这就是为什么有`IAutoCompleteRenderer`界面允许您为元素生成任何 html 标记，但不能作为面板。

作为一种选择，也许可以使用`ModalWindow`.

# css - 在 Firefox 中居中元素（水平和垂直）失败

> ID：15480548
> 
> 赞同：0
> 
> 时间：2013-03-18T15:28:26.060
> 
> 标签：css, firefox, centering

我使用[Chris Coyier 在 CSS-tricks 中建议](http://css-tricks.com/centering-in-the-unknown/)的方法将一些内容（两种方式）集中在容器元素内。为了兼容性，我使用语义方法而不是`:before`文章中使用的伪元素。由于某种原因，Firefox（在 v.19 for Mac 上测试）失败了，我不知道正确的修复方法是什么（而 Safari、Opera、IE9 和 Chrome 都以它们应该的方式工作）。

我可以检测浏览器并设置一些条件规则，但如果可能的话，我有兴趣在全球范围内解决这个问题。

如果您想检查不同的浏览器，这是[我创建的修改过的小提琴](http://jsfiddle.net/inhan/hJtpF/4981/)的代码。

**CSS：**

```
.block {
    text-align: center;
    background: #c0c0c0;
    margin: 20px 0;
    height: 300px;
}
.content-before {
    content:'';
    display: inline-block;
    height: 100%;
    vertical-align: middle;
    margin-right: -0.25em; /* Adjusts for spacing */
}
.centered {
    display: inline-block;
    vertical-align: middle;
    padding: 10px;
    background: #f5f5f5;
} 
```

**HTML：**

```
<div>
    <div class="block">
        <span class="content-before"></span>
        <div class="centered">
            <h1>Some text</h1>
            <p>But he stole up to us again, and suddenly clapping
            his hand on my shoulder, said&mdash;"Did ye see anything
            looking like men going towards that ship a while ago?"</p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:38:09.920

布局被破坏了，因为 的宽度`.centered`是容器宽度的 100%，并且 inline-block 元素不能很好地处理溢出（它们被推到下一行）。

尝试设置`font-size: 0`元素`.block`，然后在`.centered`. 它对我有用 - [http://jsfiddle.net/teddyrised/hJtpF/4986/](http://jsfiddle.net/teddyrised/hJtpF/4986/)

```
.block {
    font-size: 0;
    /* Rest of the styles here */
}
.centered {
    font-size: 16px;
    /* Rest of the styles here */
} 
```

这里唯一的缺点是您必须使用像素值来重新声明字体大小 -`em`单位（我个人最常使用）将不起作用，因为父级的字体大小为 0 （`em`是一个相对单位，在这个在这种情况下，`em`将参考为 0 的父字体大小，乘以零的任何值都为零）。

[编辑]：如果您不想使用这种肮脏的技巧，那么您也可以选择确保子`.centered`容器的宽度不是父容器宽度的 100%，以便为空容器留出一些空间element `.content-before`，类似于：

```
.centered {
    box-sizing: border-box; /* So that padding is also taken into account */
    width: 90%;
    /* Rest of the styles here */
} 
```

请参阅小提琴的第二个建议 - [http://jsfiddle.net/teddyrised/hJtpF/4988/](http://jsfiddle.net/teddyrised/hJtpF/4988/)

# fonts - 网站如何显示新字体？

> ID：15480552
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:28:33.863
> 
> 标签：fonts

网站有什么方法可以在客户的计算机上下载和安装新字体？或者有没有其他方法可以在客户端的计算机上显示新字体？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:32:05.423

诚实的回答：不。至少不是以合理的方式。

如果您希望静态文本以另一种字体显示，只需在您的开发机器上创建一个图像并显示该图像而不是文本。

您可以使用透明度，因此，如果您的页面背景发生变化，您不必重新创建图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:38:27.767

如果要根据用户代理更改字体样式，可以使用 CSS“font-family”属性，如下所示，

按照您的喜好排列您的字体选择。我的意思是，如果浏览器在列表中没有第一个系列，它会尝试第二个，然后是第三个，依此类推，直到它在系统上找到它。

字体系列：字体1、字体2、字体3；

在上面的例子中，浏览器将首先检查“font1”字体，然后是“font2”，最后如果都没有找到，它会检查“font3”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:37:08.933

WebFonts 可以帮助您[http://www.google.com/webfonts](http://www.google.com/webfonts)。[您可以在https://developers.google.com/webfonts/?hl=fr](https://developers.google.com/webfonts/?hl=fr)上找到文档

# breeze - 是否可以通过另一个表的导航属性设置主外键？

> ID：15480562
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:28:53.497
> 
> 标签：breeze

我有一个表 TaxReturn，它有一个 ProcessID 的主外键，它映射到 ProcessID 的流程表主键。我需要将 TaxReturn 的 ProcessID 设置为 Process 表的 ProcessID。如何使用 Breeze 执行此操作，这样我就不会保存两次并两次往返数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:29:41.573

May I rephrase?

*   You have two tables, `Process` and `TaxReturn`
*   `Process` has a 1..(0,1) association with `TaxReturn`
*   `ProcessID` is the PK of `Process`
*   `ProcessID` is the PK of `TaxReturn` and is also the FK to the parent `Process`

Thus a `Process` can have zero or one `TaxReturn`s.

If you create and save a`Process` and `TaxReturn` at the same time (assuming the camelCase `NamingConvention`):

```
var process = manager.createEntity('Process');
var taxReturn = manager.createEntity('TaxReturn', {ProcessID: process.processID});
// ... fill them in
return manager.saveChanges(); // Breeze saves them together in a single transaction.

```

If you add a `TaxReturn` to an existing `Process`:

```
var taxReturn = manager.createEntity('TaxReturn', {ProcessID: existingProcess.processID});
// ... fill them in
return manager.saveChanges(); // saves the new TaxReturn.

```

# servicestack - 使用 SOAPUI 进行 servicestack 网络服务测试

> ID：15480563
> 
> 赞同：2
> 
> 时间：2013-03-18T15:28:54.393
> 
> 标签：servicestack, soapui

我已经使用服务堆栈创建了一个服务，并想使用 SOAPUI 对其进行测试。当我使用soap12 wsdl url [ `http://<developmenturl>/soap12`]设置SOAPUI项目时，我不断收到以下错误：

```
Mon Mar 13 15:14:29 GMT 2013:ERROR:Could not find element [{http://schemas.servicestack.net/types}<requestDTOobject>] specified in part [parameters] 
```

最初我将 DTO 放在不同的名称空间下，由于上述错误消息，我将 DTO 对象更改为与服务位于同一名称空间中，但我仍然收到此错误。

我在生成的请求下面粘贴了：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:typ="http://schemas.servicestack.net/types">
   <soap:Header/>
   <soap:Body>
      <typ:requestDTOtype/>
   </soap:Body>
</soap:Envelope> 
```

任何帮助都感激不尽..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T17:33:49.367

SOAPUI 似乎没有为 ServiceStack 生成正确的请求。ServiceStack 创建 Soap1.2 请求的样本，它们可以在 [元数据](https://github.com/ServiceStack/ServiceStack/wiki/Metadata-page)页面（例如`http://<developmenturl>/metadata`）中找到。要查找“操作”请求，请单击元数据页面右侧的 SOAP 1.2 链接。您应该能够将此请求复制/替换到 SOAPUI 请求窗口的左窗格中。

**HelloWorld SOAP 1.2 请求示例**

```
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
    <soap12:Body>

<HelloText xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/HelloWorld">
  <Name>String</Name>
</HelloText>

    </soap12:Body>
</soap12:Envelope> 
```

# c# - 在多个编码的 ui 测试之间共享被测应用程序对象

> ID：15480566
> 
> 赞同：0
> 
> 时间：2013-03-18T15:28:59.337
> 
> 标签：c#, visual-studio-2010, coded-ui-tests

我想在单个测试中启动被测应用程序，并在其他测试中使用打开的应用程序。这是因为启动应用程序需要相当长的时间，如果我为每个测试重复它可能会很昂贵。我想在与 UI 映射对象一起初始化的对象映射中拥有 AUT 的单个对象。

此方法失败，因为即使对象是静态的，也没有在不同测试之间传递对象。这个问题有什么解决办法吗？

**用户界面地图**

```
public partial class UIMap
{
    public ApplicationUnderTest _aut { get; set; }

    public void AUT_Open()
    {
        string AUTExecutable = ConfigurationManager.AppSettings["AUTExecutable"];
        _aut = ApplicationUnderTest.Launch(AUTExecutable );
    }
    ...
 } 
```

**测试**

```
private static UIMap map;

[TestMethod]
public void Test01()
{
    ...
    this.UIMap.RecognitionDesigner_Open();
}

[TestMethod]
public void Test02()
{
    //Do something on the UIMap that tries to use the same member variable- _aut 
    //in the UIMap
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:39:45.027

我能够通过使用`_aut.CloseOnPlaybackCleanup = false;`. 显然，对 UIMap 对象的引用似乎在每个测试方法结束时丢失了。

```
public partial class UIMap
{
    public ApplicationUnderTest _aut { get; set; }

    public void AUT_Open()
    {
         string AUTExecutable = ConfigurationManager.AppSettings["AUTExecutable"];
         _aut = ApplicationUnderTest.Launch(AUTExecutable );
         _aut.CloseOnPlaybackCleanup = false;
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:31:50.910

测试彼此独立运行，并且在每个测试中重新创建 UIMap。我建议使用`ClassInitialize`属性，因为用这个属性标记的方法只在类中的所有测试之前执行一次。您将绝对确定您的流程将被启动，因为现在您依赖于测试的执行顺序，这并不好。

```
private static TestContext contextSave;

[ClassInitialize]
public static void DoOneTime(TestContext context)
{
    string AUTExecutable = ConfigurationManager.AppSettings["AUTExecutable"];
    _aut = ApplicationUnderTest.Launch(AUTExecutable );
    context.Properties.Add("AUT", _aut);
    contextSave = context;
}

[TestMethod]
public void Test01()
{
   //...
   DoSthmWithAUT(context.Properties["AUT"]);
}

[TestMethod]
public void Test02()
{
    DoOtherWithAUT(context.Properties["AUT"]);
}
[ClassCleanup]
public static void Cleanup()
{
     contextSave = null;
} 
```

请注意，通常您无法判断 Test01 在 Test02 之前且仅在 Test02 之前运行。如果您**真的**想要订购 - 然后使用`Ordered Tests`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-16T12:37:32.037

我遇到了同样的问题，即在第一种测试方法中初始化的 AUT 对象在第二种方法中为 NULL。我尝试了很多东西，但只有一个对我有帮助：我必须将类的 AUT 属性设为**static**！

这是我使用计算器应用程序的非常简单的代码。

```
using System;
using Microsoft.VisualStudio.TestTools.UITesting;
using Microsoft.VisualStudio.TestTools.UITesting.WpfControls;
using Microsoft.VisualStudio.TestTools.UITesting.WinControls;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Microsoft.VisualStudio.TestTools.UITest.Extension;
using Keyboard = Microsoft.VisualStudio.TestTools.UITesting.Keyboard;

namespace CUIT
{
    [CodedUITest]
    public class UITestDemo
    {
        private readonly string path = @"C:\Windows\SysWOW64\calc.exe";
        static ApplicationUnderTest app = null;

        [TestMethod]
        public void Start()
        {
            app = ApplicationUnderTest.Launch(path);
            Playback.Wait(1000);
            app.CloseOnPlaybackCleanup = false;
            app.SearchProperties[ApplicationUnderTest.PropertyNames.Name] = "Calculator";
            app.SearchProperties[ApplicationUnderTest.PropertyNames.ClassName] = "CalcFrame";
        }

        [TestMethod]
        public void TestButtonOne()
        {
            Assert.IsNotNull(app, "Should not be NULL!");
            app.SetFocus();
            WinButton btn1 = new WinButton(app);
            btn1.SearchProperties[WinButton.PropertyNames.Name] = "1";
            Mouse.Click(btn1);
            Mouse.Click(btn1);
            Mouse.Click(btn1);
            Playback.Wait(3000);
        }
    }
} 
```

# optimization - 使用 CUDA 进行蒙特卡罗优化

> ID：15480567
> 
> 赞同：2
> 
> 时间：2013-03-18T15:29:01.630
> 
> 标签：optimization, cuda, gpu, montecarlo

我正在处理一些关于我在 CUDA 中开发的蒙特卡洛模拟的缓慢问题。我观察到我的 GTX 680（计算能力 3.0）的性能非常差，我不知道我实现蒙特卡罗模拟的方式有什么问题。我试图通过在我的主循环中执行几条路径来“展开”我的循环，而没有观察到任何重大改进。

我将内核定义如下： SimulationVolInterp = parallel.gpu.CUDAKernel('sh_cuda_MC.ptx', 'sh_cuda_MC.cu', 'MCSharedMemory'); SimulationVolInterp.ThreadBlockSize = 2^9; SimulationVolInterp.GridSize = 2^5;

这是我的内核函数：

```
__global__ void MC(double* vol_int, double* matrice,const double* randomWalk, int nbreSimulation, int nPaths, double S0, double strike, double T, double drift,  const double* strikes_vec, const double* volatility_mat, int l_strikes_vec) {

    //double mydt = (index - nbreSimulation)/nbreSimulation*dt + dt;
    double dt = T/nPaths;
    unsigned int tid = threadIdx.x + blockDim.x * blockIdx.x; 
   // unsigned int stride = blockDim.x*gridDim.x;
    unsigned int index = tid;   
    int workingCol = 0; 
    unsigned int previousMove;  
    if (index < nbreSimulation) {
        matrice[index] = S0;  
        for (workingCol=1; workingCol< nPaths; workingCol++) {
            previousMove = index; 
            index += nbreSimulation;
            vol_int[index] = 0.25;
            matrice[index] = matrice[previousMove]*exp((drift - vol_int[index] *vol_int[index] *0.5)*dt + randomWalk[index]*vol_int[index] *sqrt(dt));
        }
   }
} 
```

例如，2^12 次模拟 x 2^11 步需要 7 秒，这是相当巨大的吧？！我在 Matlab 上的经典 Monte Carlo 耗时不到一秒……

有人可以在这一点上帮助我吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:53:57.803

GTX 680 上的双精度算术性能并不是那么好。我记得在 GTC 2012 上，一位 Nvidia 工程师告诉我，GTX 680 的双精度 FPU 比单精度 FPU 少得多。该卡针对游戏而非计算进行了优化。

这篇博文[http://blog.accelereyes.com/blog/2012/04/26/benchmarking-kepler-gtx-680/](http://blog.accelereyes.com/blog/2012/04/26/benchmarking-kepler-gtx-680/) 证实了轶事证据。试试新的 GTX Titan 卡或尝试单精度的 Monte Carlo 模拟（我怀疑这些选项对你来说都不是很满意）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-08T17:04:36.547

替换双浮动。双重好作品，只有cuda 3.5

# jquery - Stellar.js 元素偏移位置

> ID：15480569
> 
> 赞同：3
> 
> 时间：2013-03-18T15:29:02.083
> 
> 标签：jquery, jquery-plugins, offset, percentage

我正在使用 Stellar.js 一个不错的视差插件。这是链接：[http ://bit.ly/XUs0oW](http://bit.ly/XUs0oW)

想知道是否可以使用百分比而不是像素来设置偏移量......

正如您在第一张图片的代码中看到的那样，我添加了 -350px 的水平偏移和 -85px 的垂直偏移。

```
<div class="bg bgUp" 
     data-stellar-background-ratio="1.6"  
     data-stellar-horizontal-offset="-350"     
     data-stellar-vertical-offset="-85">
</div> 
```

我希望属性*data-stellar-horizo​​ntal-offset*和*data-stellar-vertical-offset*相对于视口大小改变（百分比）。

任何提示如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:54:36.870

似乎 Stellar.js 不适用于百分比： [https ://github.com/markdalgleish/stellar.js/issues/7](https://github.com/markdalgleish/stellar.js/issues/7)

也许尝试此评论中提到的一些嵌套想法？

# c# - 向标签添加新文本

> ID：15480571
> 
> 赞同：-7
> 
> 时间：2013-03-18T15:29:05.983
> 
> 标签：c#

我想做以下事情：

*   按下按钮时将下拉列表中的文本插入标签
*   然后在单击第二个按钮后，首先添加另一个文本
*   单击另一个按钮后，同一标签上的另一个文本

如何才能做到这一点？

label1 = combobox item1 + combobox item 2 + ... item n，点击后

private void button1_Click(object sender, EventArgs e) {
label1.Text = item1 + item2, ...;

```
 if (comboBox1.SelectedItem.ToString() == "item1")
        {                               
            text = "item1";
        }            
        else if (comboBox1.SelectedItem.ToString() == "item2")
        {                   
            text = "item2";
        }                     
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:38:25.303

你需要三样东西：

1.  按钮单击处理程序（假设您正在单击单个按钮）
2.  一个类范围的整数，用于计算点击次数
3.  一系列或 if/else 语句或 switch 语句，其中包含根据您的点击次数更改操作的案例。

灯光代码示例：

```
 private int _btnClickCount = 0; // your class-scoped variable

 // your button click handler
 private void SomeButtonClicked(object sender, EventArgs args) {
     if (_btnClickCount == 0)
          // do something
     else if (_btnClickCount == 1)
          // do something else
     // etc.

     _btnClickCount++;
 } 
```

# uninstallation - 如何干净地去除trac？

> ID：15480572
> 
> 赞同：2
> 
> 时间：2013-03-18T15:29:06.077
> 
> 标签：uninstallation, trac

我需要删除 Trac 但我没有足够的线索。

我听说我可以简单地删除所有文件，它们在 /usr/lib 下

```
[root@deadwood /]# find /usr/lib -name "*trac*"
/usr/lib/python2.4/test/test_trace.pyc
/usr/lib/python2.4/test/test_traceback.pyc
/usr/lib/python2.4/test/decimaltestdata/subtract.decTest
/usr/lib/python2.4/test/test_traceback.pyo
/usr/lib/python2.4/test/test_trace.py
/usr/lib/python2.4/test/test_traceback.py
/usr/lib/python2.4/test/test_trace.pyo
/usr/lib/python2.4/site-packages/Pygments-1.5-py2.4.egg/pygments/styles/trac.py
/usr/lib/python2.4/site-packages/Pygments-1.5-py2.4.egg/pygments/styles/trac.pyc
/usr/lib/python2.4/site-packages/trac_svn.pth 
```

似乎只有最后三个数。对？我也相信这两个？

```
/usr/bin/tracd
/usr/bin/trac-admin 
```

这样做会好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T23:37:47.733

“如果您使用包管理器安装 Trac，请不要尝试手动卸载它。让您的包管理器完成工作。如果您通过 easy_install 安装，请不要忘记运行 easy_install -m PackageName 以便 Python 知道您已删除包裹。”

（回应 bta 的评论作为答案，以便对其进行投票和/或接受。）

此外，您的“查找”语句区分大小写，这就是它与“Trac-0.12-py2.4.egg”（“Trac”中的大写 T）不匹配的原因。要不区分大小写地匹配，请使用 -iname 而不是 -name。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:27:49.897

在您的第一个列表中的文件中，只有最后一个真正属于 Trac。也许您已经删除/卸载了大多数其他的？最后两个文件`/usr/bin`是 Trac 的一部分，因此您可以删除它们。

# android - Android 设备上的时间戳变化

> ID：15480575
> 
> 赞同：1
> 
> 时间：2013-03-18T15:29:18.420
> 
> 标签：android

我的 android 应用程序正在从我的服务器获取一些 json 数据。json 文件包含一个时间戳值，表示当前日期，在 PHP 中计算如下：

```
mktime(0,0,0,date('m'),date('d'),date('Y')) 
```

即，我在 00:00 Hrs 获得了 unix 时间戳，并用它来表示特定的一天。

现在，在 android 端，解析文件并将文件时间戳与 Java 时间戳进行比较，计算如下：

```
GregorianCalendar aDate = new GregorianCalendar();

GregorianCalendar tDate = new     
GregorianCalendar(aDate.get(Calendar.YEAR),aDate.get(Calendar.MONTH),   
aDate.get(Calendar.DAY_OF_MONTH));

today = (tDate.getTimeInMillis())/1000; 
```

很明显，我正在尝试以与 PHP 相同的方式计算 Java 中的时间戳。但是，奇怪的是，Java 也考虑了当前时间。例如，在 Android 模拟器上，时区不同（比我的本地时间晚一小时），我得到的时间戳值与 PHP 中计算的值相差 3600 秒。当我在 Android 上更改时区时模拟器，我没问题。这是一个Java错误吗？

# c++ - 无法打开共享对象文件 libmysqlclient.so.18

> ID：15480576
> 
> 赞同：0
> 
> 时间：2013-03-18T15:29:18.917
> 
> 标签：c++

我想启动一个进程，但它显示“./log/BillServer_err:./Bill/BillServer: 加载共享库时出错：libmysqlclient.so.18: 无法打开共享对象文件：没有这样的文件或目录”，它可以不开始！（这是一个 linux c++ 程序！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:05:45.960

如果库位于非标准位置，请尝试将`LD_LIBRARY_PATH`变量设置`export LD_LIBRARY_PATH=/your/path/here`为告诉二进制文件在哪里找到它们。

# debugging - 文本文件查看器

> ID：15480582
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:29:31.190
> 
> 标签：debugging, text-files, viewer, apache-chainsaw

我正在寻找一种工具来调试文件文本。有许多包含数据的文件文本格式。

比如`2734958723fdshkfsdhfkjhewkf3242342` 哪些可能是数据

数字1`2734` 数字2`958723` 文本`fdshkfsdhfkjhewkf` 数字 3`3242342`

我正在寻找一种可以根据定义解析文件并将其解析为易于阅读的工具。而不是在文本文件中查找列。

你知道任何这样做的开源项目吗？

更新：是否可以使电锯可配置为读取其他格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:43:24.373

Chainsaw 不支持字段的“固定长度”解析，就像您在这里寻找的那样（field1 的长度为 4 个字节，field2 的长度为 6，等等）。

Chainsaw 的文件解析支持是围绕分隔符将包含在日志文件格式中的假设设计的。

# scripting - 使用套接字提交表单

> ID：15480586
> 
> 赞同：0
> 
> 时间：2013-03-18T15:29:36.337
> 
> 标签：scripting, mirc

我有 2 页：

*   [http://emailser1.hostzi.com/default.php](http://emailser1.hostzi.com/default.php)
*   [http://emailser1.hostzi.com/dira/sentmail.php](http://emailser1.hostzi.com/dira/sentmail.php)

代码：
[http](http://emailser1.hostzi.com/default.php) ://emailser1.hostzi.com/default.php 包含：

```
<html>
<head><title></title></head>
<body>
<form action="formsend.php" method="post">

    address: <input type="text" name="address">
    <br/>
    age: <input type="text" name="age">

    <input type="submit" value="send">
</form>
</body>
</html> 
```

[http://emailser1.hostzi.com/dira/sentmail.php](http://emailser1.hostzi.com/dira/sentmail.php)包含：

```
<?php
echo $_POST["address"];
echo "<br />";
echo $_POST["age"];
?> 
```

现在我如何提交表单 index.html 并从 sendmail.php 中获取值并在 mirc 中回显？我只需要一个例子>.<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:15:11.070

了解 HTTP 请求（或 POST 请求，在这种情况下）如何工作非常重要。`/default.php`用户使用它来向`/dira/sentmail.php`. 但是，应用程序发送的 POST 请求不需要构成表单的 HTML。相反，他们只是将原始数据发送到接收文件，在这种情况下是`/dira/sentmail.php`.

我制作了以下示例，该示例应该向您展示 POST 请求如何在 mIRC（或任何其他语言）中工作。这可以用 触发`/postForm <address> <age>`，然后将所有数据回显到状态窗口中。

```
alias postForm {
  var %address = $$1
  var %age = $$2
  var %sockname = postForm. $+ $ctime

  sockopen %sockname emailser1.hostzi.com 80
  sockmark %sockname %address $+ , $+ %age
}
on *:SOCKOPEN:postForm.*:{
  var %data = address= $+ $gettok($sock($sockname).mark, 1, 44) $+ &age= $+ $gettok($sock($sockname).mark, 2, 44)

  sockwrite -nt $sockname POST /dira/sentmail.php HTTP/1.1
  sockwrite -nt $sockname Host: emailser1.hostzi.com
  sockwrite -nt $sockname Content-Type: application/x-www-form-urlencoded
  sockwrite -nt $sockname Content-Length: $len(%data)
  sockwrite -nt $sockname $crlf $+ %data
}
on *:SOCKREAD:postForm.*:{
  var %sockread
  sockread %sockread
  echo -st %sockread
} 
```

我希望这可以帮助你。如果您需要对代码进行一些解释，请随时提出问题。

# c - 未从 C 中的数组接收到所需的输出

> ID：15480587
> 
> 赞同：0
> 
> 时间：2013-03-18T15:29:38.117
> 
> 标签：c, arrays, 8051

我有一个数组：

```
int arr[]={'1','2','4','8','16','32','64','128'}; 
```

我用这条线来称呼它：

```
a=arr[a]; 
```

但是，我没有得到想要的输出。输入符合预期（我已经检查过了，它从 0-7 开始），但输出`49,50,52,56,49,51,54,49`取决于输入。我做错了什么？

编辑：引号表示 ASCII。知道我错过了一些简单的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:31:24.577

输出是正确的。例如，49 是字符的 ASCII 值，`'1'`它是数组中的第一个条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:31:09.757

数组中的初始值设定项是字符文字，而不是`int`值，因此数组将填充每个字符文字的数值（`'32'`允许使用多字节字符文字，例如 ，但它们的值是实现定义的，请参阅[如何确定分配的结果多字符 char 常量到 char 变量？](https://stackoverflow.com/questions/11737320/how-to-determine-the-result-of-assigning-multi-character-char-constant-to-a-char/11737414#11737414)）。

要获得所需的输出，请使用`int`文字：

```
int arr[]={1,2,4,8,16,32,64,128}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:33:11.100

在此声明`int arr[]={'1','2','4','8','16','32','64','128'};`中，您将存储 ascii 值，因为您将它们声明为字符串。因此，当您对数组进行索引时，会检索`49`for `1`、`50`for `2`、`52`for `4`、`56`for `8`、`49`for `1`of `16`、`51`for `3`of `32`、`54`for `6`of`64`和`49`for `1`of的值。`128`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T15:34:52.533

`int arr[]={'1','2','4','8','16','32','64','128'};` 您应该将`arr`数组声明为`char`而不是`int`.

您获得数字而不是字符的确切原因是您使用的输出库是通过`int`参数调用的。由此，图书馆了解您提供的数据应该被解释并显示为数字。

此外，您获得的数字是数组中值的**[ASCII](http://en.wikipedia.org/wiki/ASCII)**或数字等价物。

# cryptojs - 使用crypto-js解密在C#中加密的AES

> ID：15480590
> 
> 赞同：1
> 
> 时间：2013-03-18T15:29:41.350
> 
> 标签：cryptojs

我在 C# 中使用 AES 加密字符串，如下所示：

```
public static byte[] KeyFromString(string key, int keyBits)// keyBits is 128, 192, or 256.
{ 
    byte[] keyBinary = Encoding.UTF8.GetBytes(key);
    byte[] b = new byte[keyBits / 8];
    for (int i = 0, j = 0; i < b.Length && j < keyBinary.Length; i++, j++)
    {
        b[i] = keyBinary[j];
    }
    return b;
}

public static string encrypt(string key, string input)
{
    byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(input);
    byte[] keyBytes = KeyFromString(key, 256);
    byte[] encrypted = null;

    using (RijndaelManaged rijAlg = new RijndaelManaged())
    {
        rijAlg.Mode = CipherMode.CBC;
        rijAlg.Padding = PaddingMode.PKCS7;
        rijAlg.KeySize = 256;

        rijAlg.Key = keyBytes;
        rijAlg.IV = new byte[rijAlg.IV.Length]; //use empty IV

        using(var encryptor = rijAlg.CreateEncryptor())
        {
            encrypted = encryptor.TransformFinalBlock(inputBytes, 0, inputBytes.Length); 
        }
    }

    var res = Convert.ToBase64String(encrypted);
    return res;
} 
```

我想在 javascript 中解密密文，我尝试使用 crypto-js ：

```
var iv = [];
for (var i = 0 ; i < 16 ; i++) iv.push(0); //empty IV
var options = { keySize: 256 / 8, mode: CryptoJS.mode.CBC, iv: iv, padding: CryptoJS.pad.Pkcs7 };
var decrypted = CryptoJS.AES.decrypt(cipheredtext, key, options);
var decryptedText = decrypted.toString(CryptoJS.enc.Utf8); 
```

我得到的解密文本是空的。我在编码、密钥大小等方面尝试了多项更改

如果需要，我可以使用另一个 javascript 库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T16:49:28.693

也许 CryptoJS 文档没有足够明确地提及这一点，但是为了让您选择的加密算法（在您的情况下为 AES）使用您提供的确切密钥和 IV，它们必须作为 CJS 类型 WordArray 传入。

获取单词数组的一种方法是使用您选择的编码的解析方法：

```
var iv = CryptoJS.enc.Hex.parse("HEX ENCODING OF THE KEY");
var key = CryptoJS.enc.Hex.parse("HEX ENCODING OF THE IV"); 
```

之后，您所做的一切都应该可以正常工作。

希望有人觉得这很有用 几天前我花了一段时间才弄清楚这一点。

# python - 改善 MySQL 读取时间，MySQLdb

> ID：15480593
> 
> 赞同：1
> 
> 时间：2013-03-18T15:29:57.983
> 
> 标签：python, mysql, database-normalization

我有一个超过一百万条记录的表，其结构如下：

```
mysql> SELECT * FROM Measurement;
+----------------+---------+-----------------+------+------+
| Time_stamp     | Channel | SSID            | CQI  | SNR  |
+----------------+---------+-----------------+------+------+
| 03_14_14_30_14 |       7 | open            |   40 |  -70 |
| 03_14_14_30_14 |       7 | roam            |   31 |  -79 |
| 03_14_14_30_14 |       8 | open2           |   28 |  -82 |
| 03_14_14_30_15 |       8 | roam2           |   29 |  -81 |.... 
```

我正在从这个表中读取数据到 python 中进行绘图。问题是，MySQL 读取速度太慢，即使在使用 MySQLdb.cursors.SSCursor（如本论坛中的一些人所建议的那样）来加快任务之后，我也需要数小时才能获得绘图。

```
con = mdb.connect('localhost', 'testuser', 'conti', 'My_Freqs', cursorclass = MySQLdb.cursors.SSCursor);
cursor=con.cursor()
cursor.execute("Select Time_stamp FROM Measurement")
for row in cursor:
    ... Do processing .... 
```

规范化表格会帮助我加快任务速度吗？如果是这样，我应该如何规范它？

PS：这是 EXPLAIN 的结果

```
+------------+--------------+------+-----+---------+-------+
| Field      | Type         | Null | Key | Default | Extra |
+------------+--------------+------+-----+---------+-------+
| Time_stamp | varchar(128) | YES  |     | NULL    |       |
| Channel    | int(11)      | YES  |     | NULL    |       |
| SSID       | varchar(128) | YES  |     | NULL    |       |
| CQI        | int(11)      | YES  |     | NULL    |       |
| SNR        | float        | YES  |     | NULL    |       |
+------------+--------------+------+-----+---------+-------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:02:13.727

问题可能是您正在循环游标，而不是一次转储所有数据然后处理它。您应该能够在几秒钟内转储几百万行。尝试做类似的事情

```
cursor.execute("select Time_stamp FROM Measurement")
data = cusror.fetchall()
for row in data: 
   #do some stuff... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:08:03.450

好吧，既然您说*必须阅读**整个*表格，我想您对此无能为力。它有超过 100 万条记录……您不会在数据库方面进行太多优化。

 *您只处理一条记录需要多长时间？也许你可以尝试优化那部分。但即使您将每条记录降低到 1 毫秒，处理整个表仍需要大约半小时。您正在处理大量数据。

也许并行运行多个绘图作业？使用与上述相同的指标，将您的数据划分为 6 个大小相等的作业（理论上）将在 5 分钟内为您提供绘图。

你的情节必须细粒度吗？您可以寻找忽略数据中某些值的方法，并仅在用户需要时生成完整的图（这里是疯狂的猜测，我真的不知道您的图是什么样的）*

# delphi - 扩展类时出现抽象错误

> ID：15480597
> 
> 赞同：1
> 
> 时间：2013-03-18T15:30:18.093
> 
> 标签：delphi

```
type
  TObjA = class
    a: string;
  end;
type
  worker<T> = interface
    function step1(v: integer): T;
    function step2(s: string): T;
  end;

type
  ImplA<T> = class(TInterfacedObject, worker<T>)
    function step1(v: integer): T;
    function step2(s: string): T; virtual; abstract;
  end;

type
  ImplB = class(ImplA<TObjA>)
    function step2(s: string): TObjA;
  end;
implementation

function ImplA<T>.step1(v: integer): T;
begin
  result := step2(IntToStr(v));
end;

function ImplB.step2(s: string): TObjA;
var
  r: TObjA;
begin
  r := TObjA.Create;
  r.a := 'step2 ' + s;
  result := r;
end; 
```

我正在尝试根据此结构构建功能。我知道它可以在 java 中工作，但目前我在 delphi 2010 中工作。调用 ImplB.step1(1) 时出现抽象错误我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:38:14.830

由于您没有声明`function step2(s: string): TObjA;`为`override`.

所以在

```
function ImplA<T>.step1(v: integer): T;
begin
  result := step2(IntToStr(v));
end; 
```

它不是你所期望的那样`step2`打电话`ImplA``ImplB`

您还将返回类型从泛型对象更改为 TObjA，编译器可能不喜欢这样，但我没有支持泛型的 Delphi 副本来进行测试。

# c - UDP 套接字使用 select()

> ID：15480599
> 
> 赞同：0
> 
> 时间：2013-03-18T15:30:20.647
> 
> 标签：c, sockets, multiplexing

嗨，我正在创建一个代理服务器，它通过 UDP 连接等待来自客户端的数据包，并检查它们是否都有效到达或是否相同。

在这种情况下，我应该为每个丢失的数据包（使用 send_ack() ）向客户端发送一个“ack”，但是在发送第一个 ack 之后，选择循环的“if 部分”发送无限的 ack 永远不会回到“else”部分”是来自客户端的选择监听数据（接收 _pkt() 函数）

```
fd_set rset, allset;
int maxfd, nready;
struct timeval timeout;

timeout.tv_sec = 4;
timeout.tv_usec = 150000; 
maxfd = socketfd;  
FD_ZERO(&allset);
FD_SET(socketfd, &allset);
rset = allset;

for( i=0; ;i++){
    do {
        nready=select( (maxfd +1), &rset, NULL, NULL,  &timeout); 
    } while ((nready<0) & (errno==EINTR)); 

    if( nready<0) {
        perror("Error main: select failed: ");
        exit(32);
    }  
    if( nready==0){ 
        send_ack(socketfd,head);
    }
    else{           
        receive_pkt(socketfd, head);
    }
} 
```

希望它足够清楚，感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:14:52.730

在某些系统（特别是 Linux）上，`select`调用会修改超时以显示还剩多少时间。因此，在您的情况下，如果它等待一个数据包 3 秒，超时将减少到 1.15 秒，总共 4.15 秒后，超时将为 0，因此稍后调用`select`将立即返回 nready == 0。

如果您想在发送 ack 后再次等待，则需要将超时重置为非零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:18:54.807

`fd_set rset`必须在每次调用之前重置`select`. 该`select`调用需要一组字段描述符来监视并用一组字段描述符覆盖，并带有要读取的通知。

```
for( i=0; ;i++){
    do {
        rset = allset;
        nready=select( (maxfd +1), &rset, NULL, NULL,  &timeout); 
    } while ((nready<0) & (errno==EINTR)); 
```

# javascript - Highcharts 绘图标记在样条图动画后面移动

> ID：15480600
> 
> 赞同：1
> 
> 时间：2013-03-18T15:30:22.610
> 
> 标签：javascript, graph, highcharts, spline

我刚刚写了一个简单的图表。在此图中，线条在标记之前移动，因此对我来说似乎很奇怪。我很确定这是关于动画属性的，但我找不到导致问题的原因。

[你可以在这里](http://jsfiddle.net/md7hW/3/)检查我的代码

我使用以下代码设置值

```
function () {

    // set up the updating of the chart each second
    var series1 = this.series[0];
    var series2 = this.series[1];
    var series3 = this.series[2];

    setInterval(function () {
        var x = (new Date()).getTime(), // current time
            y = Math.random();
        series1.addPoint([x, y], true, true);

        var x = (new Date()).getTime(), // current time
            y = Math.random();
        series2.addPoint([x, y], true, true);

        var x = (new Date()).getTime(), // current time
            y = Math.random();
        series3.addPoint([x, y], true, true);

    }, 1000);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:35:48.623

它是由 addPoint 引起的，重绘所有图表 3 次。所以我建议不要为 1/2 点重新绘制图表，仅用于最后。

[http://jsfiddle.net/md7hW/4/](http://jsfiddle.net/md7hW/4/)

```
setInterval(function() {
                            var x = (new Date()).getTime(), // current time
                                    y = Math.random();
                            series1.addPoint([x, y], false, true);

                            var x = (new Date()).getTime(), // current time
                                    y = Math.random();
                            series2.addPoint([x, y], false, true);

                            var x = (new Date()).getTime(), // current time
                                    y = Math.random();
                            series3.addPoint([x, y], true, true);

                        }, 1000); 
```

[http://api.highcharts.com/highcharts#Series.addPoint()](http://api.highcharts.com/highcharts#Series.addPoint())

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:58:57.993

@sebastian，感谢您为我指明正确的方向。我遇到了类似的问题，但处理的是动态数据。我发现在添加我的点时为 redraw 参数传递 false ，然后在图表对象上调用 redraw 以最适合我的情况。

```
var chart, REFRESH_DELAY = 1000;
function requestData(){
    $.ajax({
        url: "/reports/realtime",
        format:"json",
        cache: false,
        success: function (data) {
            for (var i = 0 ; i < data.length && i < chart.series.length; i++) {
                var series = chart.series[i], 
                    shift = series.data.length > 20,
                    point = data[i];
                series.addPoint(point, false, shift);
            }
            chart.redraw();
            setTimeout(requestData, REFRESH_DELAY);
        }
    });
} 
```

# cassandra - Cassandra：键空间没有环

> ID：15480603
> 
> 赞同：1
> 
> 时间：2013-03-18T15:30:34.450
> 
> 标签：cassandra, bigdata, cql

当我运行 nodetool 命令时，它在 Cassandra 中给了我以下异常。我正在使用 cassandra 1.2.1 版。

我已将密钥空间中的数据从旧的 Cassandra 集群复制到新的 Cassandra 集群，并在我的新集群中创建了一个模式。我能够取回一些信息，但是当我尝试创建某些内容时，它确实会创建一个新密钥，但我也遇到了以下异常。对于`nodetool describering system`.

谁能让我知道出了什么问题以及在哪里？

```
nodetool describering system_auth

Schema Version:67158f43-3871-3496-9ab4-4f73d0450575
TokenRange:
There is no ring for the keyspace: system_auth
java.io.IOException: There is no ring for the keyspace: system_auth
    at org.apache.cassandra.service.StorageService.describeRingJMX(StorageService.java:1017)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:93)
    at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:27)
    at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:208)
    at com.sun.jmx.mbeanserver.PerInterface.invoke(PerInterface.java:120)
    at com.sun.jmx.mbeanserver.MBeanSupport.invoke(MBeanSupport.java:262)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1454)
    at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:74)
    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1295)
    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1387)
    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:818)
    at sun.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:303)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:37:56.210

在 1.2.1 版本中，`system_auth`是一个普通的系统密钥空间，因此它没有任何关联的复制（因此，没有环）。`system`系统密钥空间也没有与之关联的环。

在版本 1.2.2 中，`system_auth`成为了一个键空间，其复制策略和复制因子可以更改，因此如果您升级它会有所不同，但这并不是您的问题。

最后，您可能想要做的是为您*自己的*密钥空间之一描述环，因为这可能是您集群中的复制对您最重要的地方。

# java - 在 Swing 中使用 JProgressBar 进行操作

> ID：15480604
> 
> 赞同：0
> 
> 时间：2013-03-18T15:30:40.417
> 
> 标签：java, swing

我有一个连接远程服务器上的读取文件的应用程序。文件动态更新，这就是我使用 Timer 类定期重新读取此文件的原因。工作流程如下：

*   打开将显示文本的窗口。

*   开始读取文件（使用定时器每 15 秒重读一次）

*   在 15 秒内，窗口充满了数据，或者我在日志中收到异常。异常被抑制，我继续尝试读取数据。

例外是我的问题，因为用户不知道应用程序现在发生了什么。我运行了至少两个异常： - 如果文件不存在，我收到 FileNotFoundException。- 如果服务器处于维护状态，我会收到其他异常（我抓住了它，所以它的名字无关紧要）。

以下是上面代码中的样子：

```
public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
            final RemoteReader reader = new RemoteReader();
            Timer timer = new Timer(15000, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    try {
                        reader.getMainPanel().readData();
                    } catch (IOException e) {
            //Here is a counter that increases after each exception throw
            if(counter >5) {
                JOptionPane.showOptionDialog(chat,
                    e.getMessage(),
                    e.getClass().getName(),
                    JOptionPane.OK_CANCEL_OPTION,
                    JOptionPane.INFORMATION_MESSAGE,
                    null,
                    new String[]{"Retry", "Cancel"}, //on Retry - make another 5 tries to read file, on cancel - close the window
                    null);
                counter = 0;
            }
                        e.printStackTrace();
                    } catch (ParseException e) {
                        e.printStackTrace();
                    }
                }
            });
            timer.start();
            }
        });
    }

    public String readData() throws IOException {
    // read and process data before returning it
    // but for test purpose:
        //BufferedReader br = new BufferedReader(new InputStreamReader(this.url.openStream()));
    throw new IOException("cannot read file");
     } 
```

我想要做的是添加 JProgressBar。打开主窗口时会出现进度条，然后读取数据。如果 IOException 连续抛出 5 次，则显示选项对话框。否则隐藏进度条并显示数据。如果远程文件不可用，则显示选项对话框。然后按下重试按钮，显示进度条......然后工作流程从头开始。

一些代码示例会对我有所帮助，但我不希望整个问题的解决方案 - 建议，从设计的角度来看应该如何以正确的方式完成就足够了。Oracle 的样本对我来说有点模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:22:25.693

即使`WatchService`, seen [here](https://stackoverflow.com/q/7784909/230513)不可用，我仍然会使用`SwingWorker`, seen [here](https://stackoverflow.com/a/4637725/230513)和[here](https://stackoverflow.com/a/13205322/230513)。

*   你有相当大的自由度来调整`doInBackground()`线程，例如`Thread.sleep(15 * 1000)`。

*   您可以`setProgress()`在后台监听`PropertyChangeEvent`GUI 中的任何内容。

*   您可以更新在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)`process()`上运行的任何 GUI 组件。

# xcode - xcode 提交并将断点从一台计算机传输到另一台计算机

> ID：15480606
> 
> 赞同：4
> 
> 时间：2013-03-18T15:30:41.400
> 
> 标签：xcode, cocoa

我正在寻找一种在 github 下使用 Xcode 在两台计算机之间保持断点设置的方法。添加该文件： server:myproject.xcodeproj alex$ ls xcuserdata/alex.xcuserdatad/xcdebugger/ Breakpoints.xcbkptlist

没有成功。我哪里错了？

更新 - 它现在正在工作，但我需要重新启动 Xcode 才能看到更新的断点。有机会避免吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T15:51:41.920

如果你试图通过 git 分享，你可能已经`*.xcuserdatad`忽略了（如果没有，你应该）。如果你不介意每个人都看到断点，你可以在 Xcode 中分享它：

右键单击断点导航器中的断点并选择“共享”：

![在此处输入图像描述](../Images/078d7731d0564870f4417cc5a548a562.png)

您现在应该可以通过 git 添加文件了。它将位于这样的位置：

```
Test/Test.xcodeproj/xcshareddata/xcdebugger/Breakpoints.xcbkptlist 
```

从事该项目的任何其他人现在都应该能够使用该断点。

# php - 无法从给定路径php加载文件

> ID：15480609
> 
> 赞同：0
> 
> 时间：2013-03-18T15:30:47.190
> 
> 标签：php, jquery, filepath

我在我的 php 脚本中加载 jpg 文件路径时遇到问题。我正确指定了文件路径，因为当我在浏览器中输入它时，它会在浏览器中显示图像。但是当我尝试运行脚本时它说

> 无法打开`'http://localhost/php/testig/assets/Others/uploadify/memes/abc100003052455644.jpg'`写入：参数无效

我正在将此路径返回给客户端。因此，如果我使用`dirname(__ FILE __)`它可以正常工作，但是当我尝试使用 jquery 在客户端动态更改图像的路径时。它给了我错误提示。

> 不允许加载本地资源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:09:14.287

```
$current_path = realpath(dirname(__FILE__)) . DIRECTORY_SEPARATOR;
$file_path = $current_path . "somefolder/folder2/filename.jpg"; 
```

尝试以这种方式捕获您的文件路径..

在您的 PHP 代码中，您应该使用真实路径。

编辑：

```
$www_path = "http://localhost/folder/folder/folder/img.jpg"; 
```

您可以在 PHP 代码中使用的第一个 $file_path（仅在 PHP 代码中打开/编辑/删除图像文件）。

$www_path 是您的用户可以看到的路径，您可以将其作为 Image src 放在您的 HTML 中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T15:55:37.920

问题在于你的`/php/testig/`- 这应该是`/php/testing/`。一个简单的错字！

# iphone - 想要基于窗口提高从我的 iphone 应用程序到我的网络服务器的图像上传速度

> ID：15480611
> 
> 赞同：3
> 
> 时间：2013-03-18T15:30:51.167
> 
> 标签：iphone, ios, photo-upload

我正在研究从我的 iphone 应用程序上传照片的速度。但我无法通过网络找到任何东西。我尝试使用 ASIHttpRequest 和 NSURLConnection 上传照片。

但我注意到我的代码需要大量时间才能将拍摄的照片从相机上传到我的服务器，而 facebook 会在 20-30 秒内完成。我的代码上传大约需要 4 分钟。

我确实在客户端压缩图像然后上传，但这也需要比 facebook 应用程序更多的时间。

有人对此有任何想法吗？

# c# - 值更改时的多重绑定

> ID：15480612
> 
> 赞同：1
> 
> 时间：2013-03-18T15:30:55.903
> 
> 标签：c#, wpf, binding, datagrid, converter

我有一个`MultiBinding`调用转换器`DataGrid`的属性。`CellStyle`

```
<Setter Property="CellStyle">
  <Setter.Value>
    <Style TargetType="{x:Type DataGridCell}">
      <Setter Property="Background">
        <Setter.Value>
          <MultiBinding Converter="{StaticResource TheConverter}">
            <MultiBinding.Bindings>
               <Binding RelativeSource="{RelativeSource Self}"/>
               <Binding Path="SpecificColorList" RelativeSource="{RelativeSource AncestorType=local:BADataGrid}" Mode="OneWay"/>
            </MultiBinding.Bindings>
          </MultiBinding>
        </Setter.Value>
      </Setter>
    </Style>
  </Setter.Value>
</Setter> 
```

当我初始化`DataGrid`'s source ( `ObservableCollection`)时，每个单元格都会调用转换器（当然......）。现在我想补充一点，每次单元格的值发生变化时都会调用转换器。我怎样才能做到这一点？

# java - 升级到新的 Java 版本：代码分析

> ID：15480613
> 
> 赞同：3
> 
> 时间：2013-03-18T15:30:56.507
> 
> 标签：java, code-analysis

如果有一个代码分析工具能够在升级到新的 Java 版本时建议代码更改，我一直在徘徊。

例如：

*   升级到 Java 7 时查找`.close()`自动关闭资源的调用
*   `catch`升级到 Java 7 时查找具有相同正文的多个子句
*   升级到 Java 5 时寻找不必要的手动装箱和拆箱
*   ...

现有工具或规则（例如 Checkstyle）是否有帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:36:12.133

IntelliJ 有一组标记为“语言迁移”的检查，可以帮助您发现可以从新语言结构（例如增强的 for 循环）中受益的位置。

它甚至可以立即自动将此类建议应用于您的整个代码库 - 如果它当然是无风险的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:34:16.543

Findbugs 处理`.close()`如[Java 资源管理中所述：了解 Findbugs 结果](https://stackoverflow.com/questions/2441853/java-resource-management-please-help-to-understand-findbugs-results)并捕获许多其他问题。

Finsbugs 处理一些有问题的装箱，例如用作`==`. [Eclipse 警告](http://javaeffective.wordpress.com/2010/05/21/the-advantages-and-traps-of-autoboxing/)可以配置为警告您所有隐式装箱/拆箱。

我不知道任何处理来源相同的`catch`机构的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:34:35.673

我不知道专门为此设计的工具，但有许多工具可用于一般代码审计，它们将检测或建议这些类型的升级。

1.  CodePro 分析
2.  查找错误
3.  PMD（尤其是冗余 catch 块的 CPD 部分）
4.  格纹风格

Google的[CodePro](https://developers.google.com/java-dev-tools/codepro/doc/) Eclipse 插件具有许多非常有用的代码分析功能，可以找到您提到的许多 Java 7 功能。

[PMD](http://pmd.sourceforge.net/)中的 Copy/Paste Detector一般可以检测复制粘贴的代码，因此非常适合查找冗余的 catch 块。

# facebook - LinkedIn 和 Facebook 喜欢按钮更改图像和标题？

> ID：15480614
> 
> 赞同：1
> 
> 时间：2013-03-18T15:30:59.093
> 
> 标签：facebook, facebook-opengraph, linkedin, meta

我正在使用 LinkedIn 的点赞按钮和 Facebook 的点赞按钮。

在LinkedIn上，当我点击喜欢时，它可以工作，但我想知道如何在出现的弹出对话框中更改标题的名称？

对于 Facebook Like 按钮，如何更改弹出对话框中的图像缩略图？

好吧，我得到了可以使用的图像缩略图

```
 <meta property="og:image" 
```

为什么我仍然无法更改 LinkedIn 的标题

我试过了：

```
<meta property="og:title"
<meta property="og:site_name" 
```

而且这些都不起作用....是否有一个用于LinkedIn的调试站点，就像Facebook一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:01:40.363

据我所知，它不是 og:site_name，而是 og:title。下面的代码非常适合我，所以我将其附上（记得更改内容）。希望它能解决你的问题。

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta property="fb:app_id" content="APP_ID" /> 
        <meta property="og:type" content="website" /> 
        <meta property="og:title" content="My cool website" /> 
        <meta property="fb:admins" content="ADMINS_ID"/>
        <meta property="og:image" content="http://mywebsite.com/images/mylogo.png" /> 
```

# git - git push 试图推送到错误的远程源？

> ID：15480615
> 
> 赞同：1
> 
> 时间：2013-03-18T15:31:06.527
> 
> 标签：git, github, ssh-keys

再会，

我有一个非常奇怪的问题，有人在 github 中将我添加为他组织的成员，并要求我提供**rsa 密钥**，我现在是该组织的成员，但现在我所有其他项目在**执行时都指向该组织的回购推**，即：

```
for_linode $ git push origin master
ERROR: Permission to jlstr/for_linode.git denied to other_org/core.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

当我打印我的远程源配置时，它会显示正确的信息：

```
for_linode $ git remote show origin
* remote origin
  Fetch URL: git@github.com:jlstr/for_linode.git
  Push  URL: git@github.com:jlstr/for_linode.git
  HEAD branch: master
  Remote branch:
    master tracked
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (fast-forwardable) 
```

为什么它试图推送到**other_org/core** Repo？我从来没有见过像这样奇怪的事情，我真的希望有人能帮助我解决这个奇怪的问题.. :(

提前致谢，

何塞。

编辑：

```
for_linode $ git remote -v
origin  git@github.com:jlstr/for_linode.git (fetch)
origin  git@github.com:jlstr/for_linode.git (push) 
```

编辑：

```
for_linode $ ssh -T git@github.com
Hi new_org/core! You've successfully authenticated, but GitHub does not provide shell access. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:49:12.307

尝试做

```
ssh -T git@github.com 
```

它应该打印回您的用户名。

您不应该将 rsa 密钥（ public ）提供给其他人以将您添加到组织中。他们所要做的就是将您的 github 用户添加到组织中，该用户当然会与您的密钥相关联。要求将您的密钥从添加的任何地方删除，或生成一个新对。

# weka - weka setDataset()，是否需要使用完整的数据集

> ID：15480616
> 
> 赞同：0
> 
> 时间：2013-03-18T15:31:08.697
> 
> 标签：weka

我是否需要使用完整的训练数据集，还是可以使用仅包含从具有完全相同属性的 arff 文件构建的属性描述的数据集并说一个实例？

我在 EC2 实例上使用分类器，所以我不想在 EC2 实例上拥有整个数据集，因为它非常大并且还在增长。

剂量 weka 需要整个数据集还是只需要 arff 文件中的描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T12:55:34.883

setDataset() 方法仅从您之前定义的 Instances 对象（您的数据集）中获取您的 Instance 的属性描述。因此，您通过 setDataset() 方法引用的数据集有多大并不重要。

# ios - NSOperationQueue 中的 dispatch_after 等效项

> ID：15480618
> 
> 赞同：18
> 
> 时间：2013-03-18T15:31:20.170
> 
> 标签：ios, objective-c, xcode, grand-central-dispatch, nsoperationqueue

我将我的代码从常规 GCD 移动到，`NSOperationQueue`因为我需要一些功能。我的很多代码都依赖于 dispatch_after 才能正常工作。有没有办法用 a 做类似的事情`NSOperation`？

这是我的一些代码需要转换为`NSOperation`. 如果您可以提供使用此代码进行转换的示例，那就太好了。

```
dispatch_queue_t queue = dispatch_queue_create("com.cue.MainFade", NULL);
dispatch_time_t mainPopTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(timeRun * NSEC_PER_SEC));
dispatch_after(mainPopTime, queue, ^(void){
    if(dFade !=nil){
        double incriment = ([dFade volume] / [self fadeOut])/10; //incriment per .1 seconds.
        [self doDelayFadeOut:incriment with:dFade on:dispatch_queue_create("com.cue.MainFade", 0)];
    }

}); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-18T15:39:25.950

`NSOperationQueue`它没有任何计时机制。如果您需要像这样设置延迟然后执行操作，您需要安排`NSOperation`from`dispatch_after`以处理延迟并将最终代码设置为`NSOperation`.

`NSOperation`旨在处理或多或少的批处理操作。用例与 GCD 略有不同，实际上是在带有 GCD 的平台上使用 GCD。

如果您要解决的问题是获得可取消的计时器通知，我建议`NSTimer`您在需要取消它时使用并使其无效。然后，响应计时器，您可以执行代码，或使用调度队列或 NSOperationQueue。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:36:43.550

您可以继续使用`dispatch_after()`全局队列，然后在您的操作队列上安排操作。传递给的块`dispatch_after()`在指定时间之后不执行，它们只是在该时间之后安排。

就像是：

```
dispatch_after
(
    mainPopTime,
    dispatch_get_main_queue(),
    ^ {
        [myOperationQueue addOperation:theOperationObject];
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T06:55:32.610

您可以制作一个执行睡眠的 NSOperation：MYDelayOperation。然后将其添加为您实际工作操作的依赖项。

```
@interface MYDelayOperation : NSOperation
...
- (void)main
{
    [NSThread sleepForTimeInterval:delay]; // delay is passed in constructor
} 
```

用法：

```
NSOperation *theOperationObject = ...
MYDelayOperation *delayOp = [[MYDelayOperation alloc] initWithDelay:5];
[theOperationObject addDependency:delayOp];
[myOperationQueue addOperations:@[ delayOp, theOperationObject] waitUntilFinished:NO]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-24T12:55:59.640

```
[operationQueue performSelector:@selector(addOperation:) 
                     withObject:operation 
                     afterDelay:delay]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-07T09:49:31.407

斯威夫特 4：

```
DispatchQueue.global().asyncAfter(deadline: .now() + 10 { [weak self] in
                guard let `self` = self else {return}

                self. myOperationQueue.addOperation {
                    //...code...
                }
            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-12T22:35:49.267

晚了七年，但 iOS 7 将此功能引入了 OperationQueue。

[https://developer.apple.com/documentation/foundation/operationqueue/3329365-schedule](https://developer.apple.com/documentation/foundation/operationqueue/3329365-schedule)

# javascript - Javascript 模块模式 - 如何显示所有方法？

> ID：15480620
> 
> 赞同：3
> 
> 时间：2013-03-18T15:31:22.950
> 
> 标签：javascript, unit-testing, tdd, module-pattern

我有这样的模块模式：

```
var A = (function(x) {
   var methodA = function() { ... }
   var methodB = function() { ... }
   var methodC = function() { ... }
   ...
   ...
   return {
      methA: methodA,
      methB: methodB
   }
})(window) 
```

这段代码让我只调用 methA ，`methB()`这`A`就是我想要的和我喜欢的。现在我遇到的问题 -***我想***至少以最小的努力对它进行单元测试而没有痛苦。

* * *

***首先***，我虽然可以简单地返回`this`，但我错了。它返回`window`对象。（有人可以解释为什么吗？）。

***其次***- 我在网上的某个地方找到了解决方案 - 将此方法包含在我的返回块中：

```
__exec: function() {
    var re = /(\(\))$/,
        args = [].slice.call(arguments),
        name = args.shift(),
        is_method = re.test(name),
        name = name.replace(re, ''),
        target = eval(name);
    return is_method ? target.apply(this, args) : target;
} 
```

这个方法让我这样称呼方法：`A.__exec('methA', arguments);` 这几乎是我想要的，但很丑陋。我更喜欢`A.test.methA()`where`test`永远不会在生产代码中使用 - 只是为了揭示私有方法。

* * *

**编辑** 我看到人们告诉我要测试大的东西而不是小部分。让我解释。在我看来，API 应该只显示所需的方法，而不是一堆内部函数。由于它们的小尺寸和有限的功能，内部结构更容易测试，然后测试整个事物并猜测哪个部分出了问题。

虽然我可能错了，但我仍然想看看如何从对象本身返回对所有方法的引用:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T06:59:52.623

回答你的**第一个**问题（你返回这个，但它返回窗口，而不是你想要的对象）：在 javascript`this`中，函数内部返回全局对象，除非这个函数是对象的方法。

考虑下一个例子：

1）`this`指向全局对象（）：

```
function(){
   return this;
} 
```

2）`this`指向对象：

```
var obj = {
    value: "foo",
    getThisObject: function(){
        return this;
    }
} 
```

您的案例是示例 #1，因为您有一个返回对象的函数。此函数不是任何对象的方法。

**您的第二个**问题的最佳答案是仅测试公共方法，但如果这对您来说如此重要，我可以提出以下建议：

在服务器端动态创建模块。

这个怎么运作：

*   为您想要的功能创建单独的脚本；
*   为这些单独的脚本创建测试；
*   创建可以将脚本组合成一个的方法；
*   要加载脚本，请参考组合脚本方法。

希望它可以解决您的问题。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:39:23.740

为什么不使用命名空间将模块和公共方法添加到 js 引擎。像这样：

```
window['MyApp']['MODULE1'] = { "METHOD1" : {}, "METHOD2" : {}}; 
```

我[在 JavaScript 中编写了像这个示例模块](https://gist.github.com/gustinmi/4945781)这样的模块。

并像这样测试它：[JavaScript 中的简单单元测试](https://gist.github.com/gustinmi/4945710)

eval() 的使用通常不是一个好主意。

# java - 如何在android应用程序中输入文本而不显示在屏幕上？

> ID：15480624
> 
> 赞同：-3
> 
> 时间：2013-03-18T15:31:31.957
> 
> 标签：java, android

嘿伙计们，我想做一个应用程序，它需要我输入文本而不显示在屏幕上。我什至不希望它采用密码格式（即*****）。我想通过互联网或蓝牙从另一部手机接收文本，但我不知道这是否可能？如果是的话，你能指导我如何开始吗？任何帮助，将不胜感激。

PS：如果我的问题没有意义，请告诉我：P。我会跟进并尝试更好地解释它。谢谢

我正在制作一个彼得答案的游戏，我想输入一些文本，而其他人站在附近不知道我在做什么。有什么想法我能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:38:22.677

为什么不尝试使用一个按钮来选择一个隐藏的（实际上是隐藏的或被其他东西覆盖的）TextView，然后当他们键入时，因为 TextView 是隐藏的，所以不会显示文本。之后，您始终可以复制文本并清除 TextView，这样就不会出现故障，从而可以看到文本。

我认为最大的问题是选择隐藏的 TextView。如果你想让它看起来像是在选择一个可见的 TextView，你总是可以做与按钮相同的事情，但只是在选择 TextView 时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:50:05.517

我曾经犯了一个错误，想知道为什么没有在 EditText 中输入任何内容，直到我意识到我的 Text 颜色与 EditText 背景相同，即白色。试试这个，但光标会向前移动。

# c# - 在 WP8 应用程序中反序列化 XML

> ID：15480625
> 
> 赞同：2
> 
> 时间：2013-03-18T15:31:31.713
> 
> 标签：c#, xml, windows, windows-phone-7, deserialization

我正在尝试开发一个 Windows phone 8 应用程序（我是 wp8 dev 的新手）。

我有一个如下所示的 XML 文件：

* * *

```
<?xml version="1.0" ?> 
<root>
   <quotes>
      <quote>
         <author></author>
         <text></text>
         <text></text>
         <text></text>
      </quote>
   </quotes>
</root> 
```

* * *

这是我的报价课：

```
[XmlRoot("root")]
public class Quotes
{
   [XmlArray("quotes")]
   [XmlArrayItem("quote")]
   public ObservableCollection<Quote> Collection { get; set; }
} 
```

* * *

这是报价类：

```
public class Quote
{
   [XmlElement("author")]
   public string author { get; set; }

   [XmlElement("text")]
   public string text { get; set; }
} 
```

* * *

然后我使用这段代码来反序列化它：

```
XmlSerializer serializer = new XmlSerializer(typeof(Quotes));
XDocument document = XDocument.Parse(e.Result);
Quotes quotes = (Quotes) serializer.Deserialize(document.CreateReader());
quotesList.ItemsSource = quotes.Collection; 
```

* * *

```
// selected Quote
        Quote quote;

        public QuotePage()
        {
            InitializeComponent();

            // get selected quote from App Class
            var app = App.Current as App;
            quote = app.selectedQuote;

            // show quote details in page
            author.Text = quote.author;
            text.Text = quote.text;

        } 
```

这在具有这种结构的每个提要中都可以正常工作`<text>`。但我有很多饲料`<text>`

如果我使用上面的 C# 代码，则只`<text>`解析第一部分，忽略其他部分。我需要为`<text>`单个 XML 提要中的每个部分创建单独的 List 或 ObservableCollection。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:24:31.323

将您的课程更改`Quote`为包含`List<string> text`而不是`string text`：

```
public class Quote
{
    [XmlElement("author")]
    public string author { get; set; }

    [XmlElement("text")]
    public List<string> text { get; set; }
} 
```

***更新***

由于您的应用程序和当前类成员中的现有功能，`Quote`我将离开序列化并使用 LINQ to XML 将数据从 XML 加载到`Quotes`类实例中：

```
XDocument document = XDocument.Parse(e.Result);
Quotes quotes = new Quotes() {
    Collection = document.Root
                         .Element("quotes")
                         .Elements("quote")
                         .Select(q => new {
                             xml = q,
                             Author = (string) q.Element("author")
                         })
                         .SelectMany(q => q.xml.Elements("text")
                                           .Select(t => new Quote() {
                                                author = q.Author,
                                                text = (string)t
                                            }))
                         .ToList()
}; 
```

我已经使用以下`Quotes`和`Quote`类声明对其进行了测试：

```
public class Quotes
{
    public List<Quote> Collection { get; set; }
}

public class Quote
{
    public string author { get; set; }

    public string text { get; set; }
} 
```

不再需要属性，因为此方法不使用 XmlSerialization。

# html - 不能完全点击

> ID：15480626
> 
> 赞同：0
> 
> 时间：2013-03-18T15:31:33.833
> 
> 标签：html, css

见：[http ://dals.realsense.co.uk/](http://dals.realsense.co.uk/)

在最新的新闻部分（就在 Main Navbar 下方） - 有一个“新闻项目 1”。任何解释，为什么它不能完全点击？即只能点击文本的下半部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:36:14.393

```
div class="art-nav-outer" 
```

正在覆盖你的锚。

您可以调整它的高度以匹配您的按钮：

```
.art-nav-outer {
    height:38px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:37:28.883

给您`.news-ticker`一个相对位置并将 设置为`z-index`比`z-index`您的`.art-bar.art-nav`（当前为 100）更高的值，例如：

```
.news-ticker
{
    position: relative;
    z-index: 101;
} 
```

# mysql - 返回包含“关键字”的所有列条目的计数

> ID：15480631
> 
> 赞同：0
> 
> 时间：2013-03-18T15:31:48.573
> 
> 标签：mysql, database, phpmyadmin

我有一个 MySQL 表，其中包含许多关于员工信息的不同列（我在类似临时机构的地方工作。）因此，例如，我有一个查询给了我按员工位置分组的工作计数：

```
SELECT job_location, COUNT( job_title ) 
FROM registration
GROUP BY job_location 
```

如果可能的话，我想更进一步。我希望能够用某个关键字计算工作的数量。因此，例如，如果 job_location 列有“XYZ town”、“New XYZ”、“XYZ city”之类的条目，我想计算“XYZ”（本例中的关键字）的条目数，不管该领域的其他词。

这甚至可能吗？据我了解，这非常困难。我真的很感激任何建议。干杯!

编辑：如果我告诉你我为什么要这样做，也许会有所帮助。基本上我希望结果告诉我在包含 XYZ 的所有条目中，在包含 ABC 的所有条目中，对于许多不同的关键字有多少工作（图片一个两列表格）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:35:02.373

```
SELECT  job_location, COUNT(*)
FROM    registration
WHERE   job_location LIKE '%XYZ%'
GROUP   BY job_location 
```

# soap - MTOM 和 SAAJ 提供的附件功能有什么区别？

> ID：15480632
> 
> 赞同：17
> 
> 时间：2013-03-18T15:31:49.993
> 
> 标签：soap, jax-ws, mtom, saaj

**SAAJ：**带有 Java 附件 API 的 SOAP

**MTOM：** SOAP消息传输优化机制

我的简单理解：它们处理 SOAP 附件，MTOM 是 SAAJ 的更*优化*版本。这个对吗？

他们只是做同一件事的两种不同方式吗？还是我想在这里比较苹果和橘子？

我可以同时使用 SAAJ 和 MTOM 吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-18T22:50:27.593

这有点复杂。[SAAJ](https://en.wikipedia.org/wiki/SAAJ)是一个用于操作 SOAP 信封的旧 Java API，因此可以以合理的方式发送二进制附件（即不是作为消息正文中的 BASE64 编码字符串）。SAAJ 是一种低级接口，您需要在代码中“手动”构建 SOAP 信封并向其添加附件。

如果您不需要使用遗留代码并且希望直接使用 SOAP 信封，请查看[JAX-WS](https://en.wikipedia.org/wiki/JAX_RS) Dispatcher 和 Provider 接口。

[MTOM](https://en.wikipedia.org/wiki/MTOM)是另一种野兽。它不是一个完整的 Web 服务 API - 它是发送附件的特殊方式。它可以被任何“真正的”Web 服务 API 使用，例如 JAX-WS 或 SAAJ（如果您设法强制 SAAJ 以这种方式工作）。

MTOM（几乎）总是与 XOP 一起使用，这是一种发送二进制数据的更有效方式，与 BASE64（开销很大）相比。附件作为 MIME 附件单独发送，并且正确处理了 MIME 类型（这曾经是 Java-Microsoft 技术交互的问题）。

现在忘记 SAAJ，使用大多数 JAX-WS 实现提供的 JAX-WS + MTOM 支持。

# matlab - 谱聚类

> ID：15480635
> 
> 赞同：7
> 
> 时间：2013-03-18T15:31:56.207
> 
> 标签：matlab, cluster-analysis, linear-algebra, eigenvector

首先，我必须说我是 matlab 的新手（和这个网站......），所以请原谅我的无知。

我正在尝试在 matlab 中编写一个函数，该函数将使用光谱聚类将一组点分成两个簇。

我的代码如下

```
function Groups = TrySpectralClustering(data)
dist_mat = squareform(pdist(data));

W=  zeros(length(data),length(data));

for i=1:length(data),
    for j=(i+1):length(data),
    W(i,j)=10^(-dist_mat(i,j));
    W(j,i)=W(i,j);
    end
end
D = zeros(length(data),length(data));
for i=1:length(W),
D(i,i)=sum(W(i,:));
end
L=D-W;
L=D^(-0.5)*L*D^(-0.5);
[ V E ] = eig(L);
disp ('V:');
disp (V); 
```

如果我理解正确，那么通过使用第二小的特征向量，我应该能够将数据划分为两个集群 - 如果第二个特征向量的第 i 个成员为正，则第 i 个数据点将在一个集群中，否则它将在另一个集群中。

但是，当我尝试以下

```
f=[1,1;0,0;1,0;0,1;100,100;100,101;101,101;101,100]
TrySpectralClustering(f) 
```

我希望前四个点会形成一个集群，而后四个点会形成另一个集群。

但是，我收到

```
V:
   -0.0000   -0.5000    0.0000   -0.5777    0.0000    0.4078   -0.0000    0.5000
   -0.0000   -0.5000    0.0000    0.5777    0.0000   -0.4078   -0.0000    0.5000
   -0.0000   -0.5000    0.0000    0.4078    0.0000    0.5777   -0.0000   -0.5000
   -0.0000   -0.5000    0.0000   -0.4078    0.0000   -0.5777   -0.0000   -0.5000
   -0.5000   -0.0000   -0.0000   -0.0000   -0.7071   -0.0000    0.5000   -0.0000
   -0.5000   -0.0000    0.7071    0.0000   -0.0000   -0.0000   -0.5000   -0.0000
   -0.5000    0.0000   -0.0000    0.0000    0.7071    0.0000    0.5000    0.0000
   -0.5000         0   -0.7071         0         0         0   -0.5000         0 
```

取第二个特征向量

```
 -0.0000   -0.5000    0.0000    0.5777    0.0000   -0.4078   -0.0000    0.5000 
```

我发现一个集群包括点 1,0;0,1;100,100;101,100，而另一个集群由点 1,1;0,0;100,101;101,101 组成

我想知道我做错了什么。

注意：作为家庭作业项目的一部分，我正在处理上述内容。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:10:20.473

你得到的是正确的。令 U 为包含如上所示特征向量的矩阵，并让它们排列成第一列对应于最小特征值，渐进列对应于升序特征值。然后，通过保留与较小特征值相对应的特征向量来获取 U 列的子集。现在，将这些列逐行读取到一组新的向量中，称为 Y。集群 Y 以获得光谱集群。所以，让我们假设我们的子集只是第一列。我们清楚地看到，如果您要对第一列进行聚类，您会将前 4 列放入 1 个集群中，然后将接下来的 4 列放入另一个集群中，这就是您想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T09:48:56.373

看一下[J. Shi教授网页上](http://www.cis.upenn.edu/~jshi/software/)的实现。密切关注`discretisation.m`功能。

此外，您的代码效率非常低。您需要更多地利用 Matlab 的矢量化：

```
W = 10.^( - dist_mat ); % single liner of nested loop for comuting W
% computing the symmetric laplacian
d = sum( W, 2 ); % sum each row
d( d == 0 ) = 1; % avoid division by zero
d_half = 1./sqrt( d );
L = eye( n ) - bsxfun( @times, bsxfun( @times, W, d_half' ),  d_half ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T08:47:14.797

两个观察：

1.  `L=D-W; L=D^(-0.5)*L*D^(-0.5);` 为什么让他计算单位矩阵？只需使用单位矩阵 eye(n) 并从中减去 D^(-0.5) * W * D^(-0.5) 即可计算拉普拉斯 L

2.  eig 将特征向量作为列返回，为什么要取行？您是否检查了 E 中相应特征值的值，因此您可以确定您正在查看与第二个最小特征值相对应的特征向量？

# javascript - 在 Javascript 中引发 http 代码错误

> ID：15480636
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:31:58.710
> 
> 标签：javascript

我想知道如何在 JavaScript 中传递错误代码：

```
try{ /*do something*/ }
catch { /*throw a 404 error*/ } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:34:01.037

您**不能**使用客户端 javascript “抛出” 404 错误。

您*可以*将页面替换为新内容，或者将页面的位置更改为不存在的页面

# android - VLC 编译。添加按钮并播放视频

> ID：15480637
> 
> 赞同：0
> 
> 时间：2013-03-18T15:32:02.810
> 
> 标签：android, video, compilation, apk, vlc

有源代码VLC。在android下编译。添加了活动。它有三个按钮。只需按一下按钮，就可以切换频道流、来自 sd 卡的视频或来自互联网的视频。

```
public void onClick(View v) 
{
    switch (v.getId()) {
    case R.id.b1:

      break;
    case R.id.b2:

        break;
    case R.id.b3:
    Context context = this;
    VideoPlayerActivity.start(context, "http://www.youtube.com/watch?v=9Xjw2PtKjJE",
                         null, false, false);                           
        break;
} 
```

全部编译。通过单击按钮，播放器，但视频不开始播放。空白屏幕，播放器看不到视频。从卡播放视频也有同样的问题。告诉我如何处理按钮的按下。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T07:33:16.793

而不是 VideoPlayerActivity.start

```
VLCCallbackTask task = new VLCCallbackTask(MainActivity.this)
{
    @Override
    public void run() {
        AudioServiceController c = AudioServiceController.getInstance();
        c.append("http://www.youtube.com/watch?v=9Xjw2PtKjJE");
    }
};
task.execute(); 
```

# windows - 不使用 QPixmap 将 HBITMAP 转换为 QImage

> ID：15480639
> 
> 赞同：0
> 
> 时间：2013-03-18T15:32:03.930
> 
> 标签：windows, image, qt, qimage, hbitmap

我在辅助线程中从 Windows 中提取文件的缩略图，输出是 HBITMAP。现在我必须将其转换为 QImage 以将其发送回主线程。您可能已经知道，在非 gui 线程中使用 QPixmap 会导致运行时错误和编译时警告。我知道是因为我确实尝试过使用它，但它给了我随机错误。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:40:28.557

在辅助线程中提取缩略图时，为什么不直接存储 HBitmap 直到您再次回到主线程中？

因此，只需使用 HBitmaps 集合作为您的容器，而不是 QPixmaps...

（通读文档，看起来没有一种简单的方法可以在不使用 QPixmaps 的情况下完成任务）。

一个附加选项（如果上述路线在渲染时被证明太慢）是让您的主线程定期检查您的 HBitmap 列表并以生产者消费者模型的形式进行转换，您的辅助线程创建一个简短的列表HBitmaps 和计时器上的主线程会去转换它们。仅当您查看大量缩略图时才需要这样做...

您可以解决此问题的第三种方法是在 Qt 之外找到另一种方法来缓存这些位图或可以将其转换为 QImage 的中间转换。您甚至可以访问 Qt 的源代码并查看如何`fromWinHBITMAP()`实现并创建您自己的。

希望有帮助。

# eclipse - Eclipse/Freemarker 插件：语法高亮失败

> ID：15480642
> 
> 赞同：1
> 
> 时间：2013-03-18T15:32:11.070
> 
> 标签：eclipse, freemarker

我在 Eclipse/Indigo 中安装了 JBoss Freemarker IDE。对于第一个 .ftl，我创建了语法高亮/解析工作正常。但是当我复制它来创建新的 .flt 语法高亮/解析时就不会发生。文件本身的图标表明它已被插件通知，但似乎无法说服插件开始处理文件。（文件本身的内容很好：如果我将内容粘贴到原始文件中，语法突出显示就可以了。）

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:36:50.287

似乎我需要选择“打开方式> Freemarker 编辑器”。当然，晦涩和奇怪的行为。

# asp.net-mvc-3 - 如何备份 Asp.Net MVC 应用程序中的缓存数据？

> ID：15480643
> 
> 赞同：0
> 
> 时间：2013-03-18T15:32:12.037
> 
> 标签：asp.net-mvc-3

我正在构建一个构建大缓存的应用程序。如果丢失，构建缓存的成本又是巨大的。

有没有办法将缓存数据保存在 asp.Net MVC3 应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:47:34.473

我认为你应该采取另一种方法。可能是，例如创建数据库视图

请记住一些事情，你不可能一直缓存，因为它会回收应用程序池，所以即使你改变时间间隔，总是会发生。

另外，您的应用程序中可能触发回收的更改

什么触发了立即回收？

任何变化：

*   网页配置
*   机器配置
*   全球.asax
*   斌目录
*   应用程序代码
*   查看强类型

什么触发了延迟回收？

发生在 .aspx、.cs/.vb 文件中的更改。

# php - 在图像上映射多边形坐标

> ID：15480645
> 
> 赞同：0
> 
> 时间：2013-03-18T15:32:13.070
> 
> 标签：php, jquery, maps, typo3

对于客户，我需要创建一个带有不同多边形标记的地图（= 图像）。这是一个带有房屋的小区域的图像。我的客户想自己编辑它，所以必须有一种方法可以在排序可视化编辑器（谷歌，如“我的地图”）中映射多边形（4+ 点）。

我在谷歌和这里搜索了几天，但如果这是可能的，我找不到任何答案。

所以我的第一个问题是，这是否可能，或者我应该告诉客户不可能做这样的事情？

如果问题 #1 == 可能：问题 #2 是：有人有一些代码、任何教程或文档来帮助我入门吗？最好符合 Typo3，不是必须的，但我应该能够将坐标解析为 PHP 以保存在 MySQL 中。

提前致谢，

杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:24:39.390

我会建议2个解决方案来解决这个问题：

1.  **[如果您使用的是 templavoila，那么您可以创建一个 FCE（灵活内容元素）并通过以下链接中给出的打字稿实现图像映射： https](https://sankartypo3.wordpress.com/2012/06/28/typoscript-for-image-map/)** ://sankartypo3.wordpress.com/2012/06/28/typoscript-for **[-图像地图/](https://sankartypo3.wordpress.com/2012/06/28/typoscript-for-image-map/)**。

    其余的需要使用 javascript 处理。

2.  使用 MW Imagemap 扩展：[http ://typo3.org/extensions/repository/view/mwimagemap](http://typo3.org/extensions/repository/view/mwimagemap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T16:41:34.627

我是 MW Imagemap 的程序员，我可以告诉你，MW Imagemap 肯定没有迁移到 imagemap_wizard。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:34:47.963

对于图像地图，扩展“imagemap_wizard”对我来说非常有用。

# javascript - 使用 Javascript 向 Google 电子表格添加一行

> ID：15480650
> 
> 赞同：2
> 
> 时间：2013-03-18T15:32:27.233
> 
> 标签：javascript, html, google-sheets, rows

我正在尝试使用 HTML 中的三个文本框在表格末尾添加一个新行。所以我假设最好的方法是使用Javascript。我是 Google Docs 编程的新手，所以我会使用我在 Google 上找到的内容，即使那里没有很多信息。

所以我有这张桌子：

[https://docs.google.com/spreadsheet/pub?key=0ApLU-4iFz9JYdGkzVlB2YWVDYXcweEYwcTFrRmJUYWc&output=html](https://docs.google.com/spreadsheet/pub?key=0ApLU-4iFz9JYdGkzVlB2YWVDYXcweEYwcTFrRmJUYWc&output=html)

我想使用 HTML 中的 txtfield1、txtfield2 和 txtfield3 将值添加到表的末尾。

所以`txtfield1.value = "K", txtfield2.value = "11", txtfield3.value = "24-Sep-2012"`，但我知道如何得到它。我只需要了解如何使用 Javascript 在 Google 电子表格中修改行或每个独立单元格。

这实现起来复杂吗？我尝试查找教程来做到这一点，但我找不到任何东西，所以我不确定是否可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:32:43.213

HTML 服务是执行此操作的好方法。该教程在这里[https://developers.google.com/apps-script/html_service](https://developers.google.com/apps-script/html_service)

# javascript - 狡猾的滚动Jquery

> ID：15480652
> 
> 赞同：3
> 
> 时间：2013-03-18T15:32:32.970
> 
> 标签：javascript, jquery, scrollbar, sly-scroller

我想使用以下插件[http://darsa.in/sly/](http://darsa.in/sly/)但我无法让它工作，这是我的代码的一些细节。

我有以下 HTML：

```
<div class="scroller">
    <div class="scrollbar">
        <div class="handle" style="-webkit-transform: translateZ(0px) translateX(0px);"></div>
    </div>

    <div class="sly" style="overflow: hidden;">
        <ul class="slidee" style="-webkit-transform: translateZ(0);">
            <li><a href="#" style="position: absolute;" rel="tooltip" data-original-title="kuskov(ekuskov@gmail.com)"><div style="width:50px;height:50px;overflow:hidden"><img src="/images/users/7.jpg"></div></a></li>
<li><a href="#" style="position: absolute;" rel="tooltip" data-original-title="kuskov(ekuskov@gmail.com)"><div style="width:50px;height:50px;overflow:hidden"><img src="/images/users/7.jpg"></div></a></li></ul>
    </div>
</div> 
```

和以下JS：

```
$(document).find(".scroller").each(function (i, element) {

var $cont = $(element),
    $frame = $cont.find(".sly"),
    $scrollbar = $cont.find(".scrollbar");

$frame.sly({
    // Sly type
    horizontal: 1,    // Change to horizontal direction.
    itemNav:    null, // Item navigation type. Can be: basic, smart, centered, forceCentered.

    // Scrollbar
    scrollBar:     $scrollbar, // Selector or DOM element for scrollbar container.
    dragHandle:    0,    // Whether the scrollbar handle should be dragable.
    dynamicHandle: 0,    // Scrollbar handle represents the relation between hidden and visible content.
    minHandleSize: 50,   // Minimal height or width (depends on sly direction) of a handle in pixels.
    clickBar:      0,    // Enable navigation by clicking on scrollbar.
    syncFactor:    0.50, // Handle => SLIDEE sync factor. 0-1 floating point, where 1 = immediate, 0 = infinity.
});
$frame.sly('reload'); 
```

});

但不知何故 Sly-Scroller 不起作用？感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T16:33:02.130

首先在你的 body 末尾加载 SLY 的所有脚本：

```
<script src="js/jquery.easing.js"></script>
<script src="sly/horizontal.js"></script>
<script src="http://darsa.in/sly/js/vendor/modernizr.js"></script>
<script src="http://darsa.in/sly/js/sly.min.js" ></script> 
```

然后像这样调用 HTML：

```
 <div id="navigation">
                <div class="wrap">
                    <h2>Video Playlist</h2>
                        <div class="scrollbar" style = "width:100%">
                            <div class="handle">
                                <div class="mousearea"></div>
                            </div>
                        </div>

                    <div class="frame " id="basic">
                        <ul class="clearfix">
                            <li> </li>

                        </ul>
                    </div>

                    <ul class="pages"></ul>
             </div> 
        </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T02:59:54.360

干得好！归功于这位博客作者...

不要忘记点击“下载”，在那里查看更多详细信息！

[http://www.okilla.com/614/plugin-sly-scrolling-with-item-based-navigation-support/](http://www.okilla.com/614/plugin-sly-scrolling-with-item-based-navigation-support/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T21:07:39.343

试试这个，它对我有用

```
$(document).find('.row').each(function () {
    var $slider = $(this).find('#contentSlider');
    var $wrap = $slider.parent();
    $slider.sly({
        horizontal: 1,
        itemNav: 'basic',
        smart: 1,
        activateOn: 'click',
        mouseDragging: 1,
        touchDragging: 1,
        releaseSwing: 1,
        startAt: 1,
        scrollBar: $wrap.find('.scrollbar'),
        scrollBy: 1,
        pagesBar: $wrap.find('.pages'),
        activatePageOn: 'click',
        speed: 300,
        elasticBounds: 1,
        easing: 'easeOutExpo',
        dragHandle: 1,
        dynamicHandle: 1,
        clickBar: 1
    });
}); 
```

# android - Android，setonclicklistner 动态生成文本视图数组

> ID：15480653
> 
> 赞同：2
> 
> 时间：2013-03-18T15:32:32.930
> 
> 标签：android, textview

我有一个动态生成的文本视图数组

```
for(int i = 0; i < blog_link_counter; i++) {
textViewArray[i] = new TextView(this);
textViewArray[i].setText(Html.fromHtml(array_blog_text[i]+"<br>"));
textViewArray[i].setId(i);
textViewArray[i].setOnClickListener(this);
((LinearLayout) linearLayout).addView(textViewArray[i]);
} 
```

现在我有一个活动，其中有许多文本视图。我需要将 onclick 侦听器功能添加到所有文本视图。

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:id="@+id/info"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#FFFFFF" /> 
```

我在java文件中添加了onclicklistner。之后我实现了onclicklistner接口

```
 public void onClick(View v) {
        // TODO Auto-generated method stub

```
 switch(v.getId())
    {
    case R.id.    <--  ?
    }

}} 
``` 我如何匹配它所指的 Textview id？

请帮忙。

            回答 #1

赞同：3

时间：2013-03-18T15:34:29.250

只需在您的每个s[`setOnClickListener(OnClickListener)`](http://developer.android.com/reference/android/view/View.html#setOnClickListener%28android.view.View.OnClickListener%29)上调用 then即可。`TextView`

```
for(int i = 0; i < blog_link_counter; i++) {
    textViewArray[i] = new TextView(this);
    textViewArray[i].setText(Html.fromHtml(array_blog_text[i]+"<br>"));
    textViewArray[i].setId(i);
    textViewArray[i].setOnClickListener(listener);
    ((LinearLayout) linearLayout).addView(textViewArray[i]);
} 
```

            回答 #2

赞同：1

时间：2013-03-18T16:23:00.667

不必使用 R.id.xxx，只需使用您在循环中使用的相同数字：

```
switch(v.getId())
{
case 0:
case 1:
//etc
} 
```

```

# javascript - 在 WinJS.UI.ListView 中设置滚动位置

> ID：15480654
> 
> 赞同：1
> 
> 时间：2013-03-18T15:32:33.837
> 
> 标签：javascript, listview, microsoft-metro, windows-store-apps, winjs

我想在特定项目上自动滚动我的 ListView。ListView 必须自动滚动到其索引中的项目。

```
listView.ensureVisible(itemIndex); 
```

但它不起作用。另一种选择：

```
yourListView.currentItem = { index: 8, hasFocus: true, showFocus: true } 
```

它也失败了。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:42:28.997

通常，您必须将调用包装`ensureVisible(index)`在对 msSetImmediate 的调用中。不知道为什么会这样，可能是一个错误，但对我有用。例子：

```
msSetImmediate(function (){ listView.ensureVisible(4);} ); 
```

如果您查看[setImmediate](http://msdn.microsoft.com/en-us/library/windows/apps/hh453394.aspx)的文档（msSetImmediate 是 Microsoft 特定的实现），该功能被描述为：

> 请求在当前或待处理任务完成时调用函数，例如事件或屏幕更新。

这确实有点道理，因为它听起来像是确保所有列表视图动画等在进行调用以确保项目可见之前完成。

[请参阅此线程以获取相关帖子：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/2f11e46f-9421-4e31-93d3-fca06563ec41/](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/2f11e46f-9421-4e31-93d3-fca06563ec41/)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:35:38.383

我可能会给你一个答案。您不能立即设置 ListView 的滚动位置，因为 ListView 的布局尚未完成，因此尝试将其滚动到某个位置是徒劳的。因此，您必须等到 ListView 达到计算其布局的状态。就是这样...

```
myListView.onloadingstatechanged = function () {
    if (app.sessionState.homeScrollPosition && myListView.loadingState == "viewPortLoaded") {
        myListView.scrollPosition = app.sessionState.homeScrollPosition;
        app.sessionState.homeScrollPosition = null;
    }
}; 
```

通过查看我的开源[codeSHOW 项目](http://codeshow.codeplex.com)中的 /pages/home/home.js 文件，您可以在上下文中看到这一点。希望有帮助。

# sql-server-2008 - 是否可以使用sql查询在sql server中获取视图创建语句

> ID：15480659
> 
> 赞同：0
> 
> 时间：2013-03-18T15:32:42.260
> 
> 标签：sql-server-2008

是否可以在 sql sever 2008 中编写任何查询的视图创建语句实际上我想将视图从一个数据库复制到另一个数据库谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:53:47.350

你有 SSMS 吗？您可以选择为数据库中的所有对象生成脚本。您可以将其限制为仅视图。

1.  在对象资源管理器中右键单击特定数据库的节点。
2.  选择`Tasks`
3.  在 下`Tasks`，选择`Generate Scripts`
4.  执行向导，选择适合您任务的选项。

这将为您的所有视图生成一个脚本，或者允许您选择您感兴趣的特定视图。

@Sashenka 的回答是正确的，但这将让您一次编写多个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:44:03.370

在 SSMS 中，

1.  右键单击视图
2.  选择`Script view as`
3.  选择`CREATE To`
4.  选择`New Query Editor Window`

然后，您可以复制脚本并为您的新数据库修改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T00:33:33.050

最简单的方法是使用[SQL Compare](http://www.red-gate.com/products/sql-development/sql-compare/)，但您也可以在 SQL Server Management Studio 中以与我在此[博客文章](https://www.simple-talk.com/blogs/2012/04/24/ever-wondered-what-the-object-explorer-details-window-is-for/)中描述的方式类似的方式执行此操作。

简而言之，打开对象资源管理器详细信息，多选所有视图，然后从上下文菜单中将脚本设置为 Drop 和 Create。您现在可以在第二台服务器上应用此脚本。

# jira - 声纳 JIRA 插件：缺少“到 JIRA 的链接”

> ID：15480665
> 
> 赞同：2
> 
> 时间：2013-03-18T15:32:54.200
> 
> 标签：jira, sonarqube

安装[Sonar JIRA 插件](http://docs.codehaus.org/display/SONAR/Jira+Plugin)并重新启动 Sonar 服务器后，我使用 Sonar Ant 任务中配置的以下属性运行了分析：

*   sonar.jira.url（不使用 HTTPS）
*   sonar.jira.login.secured
*   sonar.jira.password.secured
*   sonar.jira.url.param（JIRA 过滤器）
*   sonar.jira.project.key（在 JIRA 问题密钥中也用作前缀的项目密钥）

JIRA 小部件显示配置的 JIRA 过滤器的结果，但“更多操作”弹出菜单中缺少“链接到 JIRA”项。我已经用 Sonar 3.0、3.4.1 和 3.5 进行了尝试。

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:48:04.137

如果您希望能够将问题链接到 JIRA，那么您必须在 Sonar Web UI 中指定所有属性，而不是在 Ant 构建脚本中。

实际上，项目文件（可能是 POM / sonar-project.properties / build.xml 文件）上设置的属性不会存储在数据库中，因此 UI 无法检索此信息，因此不会显示链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-07T19:49:23.950

在仪表盘上，点击进入一个项目，在右上角，有一个配置下拉菜单，在设置选项中，您可以找到 JIRA 设置。在那里您将能够看到 JIRA 项目密钥输入框。

# java - Worklight 项目在构建时出现内存不足错误

> ID：15480666
> 
> 赞同：2
> 
> 时间：2013-03-18T15:32:56.693
> 
> 标签：java, memory, ibm-mobilefirst, heap-memory

尝试在我的一个 worklight 项目上构建和部署所有内容时，我开始收到此错误：

```
!ENTRY com.worklight.studio.plugin 4 0 2013-03-18 10:17:41.511
!MESSAGE FWLSE4002E: Failed to connect to HSQL database : Cannot create PoolableConnectionFactory (error in script file line: 84 java.lang.OutOfMemoryError: Java heap space) 
```

我尝试通过在我的 Eclipse 首选项中添加这些参数来增加我的 JRE VM 内存：`-Xms256M` `-Xmx512M`但它不起作用。还有什么我可以尝试的吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-07T21:48:56.640

您必须给 Worklight Server 更多的堆大小，而不是 eclipse。Worklight 服务器基本上是一个 Websphere Application Server (WAS)。将以下行添加到 Worklight 服务器的 jvm.options 文件中，该文件位于 workspace/WorklightServerConfig/servers/worklight/jvm.options：

```
-Xmx2g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:43:34.340

如果您有 64 位 Eclipse，请尝试将以下行添加到 eclipse.ini 文件中：

```
-XX:MaxPermSize=512m   
-Xmx1024m
-XX:+UseCompressedOops 
-Djava.util.Arrays.useLegacyMergeSort=true
-Dcom.ibm.ws.management.event.max_polling_interval=1000
-Xms100m 
```

这些是从文档中启动 WL Studio 64bit 的推荐设置。

# objective-c - 如何强制更新 Cocoa 绑定？

> ID：15480668
> 
> 赞同：5
> 
> 时间：2013-03-18T15:33:03.880
> 
> 标签：objective-c, macos, cocoa, cocoa-bindings

我正在使用 Cocoa 绑定（如在 Mac 上的 Objective-C 中）使用值转换器显示相对日期值。也就是说，我的`NSValueTransformer`子类将`NSDate`实例转换`NSString`为显示相对日期，如“3 秒前”、“2 分钟前”等。

如您所见，这些显示的值会随着时间的推移而过时，因此需要以某种方式刷新。我知道我需要使用计时器，然后强制绑定更新，以便重新执行值转换器并显示正确的相对日期。

但问题是，如何使这些绑定刷新它们的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:45:31.743

如果您正在使用绑定，那么只要您执行以下操作，GUI 就会更新：

*   正在更新主线程上的值（因此可以在 GUI 时更新绑定）
*   正在使用 setter 更新值

因此，如果您已将值绑定到对象的`foo.zot`属性，则需要确保调用`[foo setZot: @"new value"]`主线程（或使用 设置属性`foo.zot=@"new value"`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-21T10:19:39.067

我意识到这个问题很久以前就被问过了，而且对于这种特殊情况，强制 Cocoa-Binding 更新可能不是正确的解决方案，但是当我在寻找一种方法时遇到这个问题时，我认为它是值得在这里发布答案。

您可以通过使绑定对象“认为”某个属性已更改来强制更新，这将促使它通知该属性的任何观察者。这是通过按顺序连续调用**两者** `willChangeValue`来完成的`didChangeValue`，如下例所示：

```
boundToObject.willChangeValue(forKey: "boundToProperty")
boundToObject.didChangeValue(forKey: "boundToProperty") 
```

# excel - VBA如何检查数据库中是否已经存在用户表单组合框值

> ID：15480678
> 
> 赞同：0
> 
> 时间：2013-03-18T15:33:29.397
> 
> 标签：excel, vba, search, combobox, userform

我在 vba 中自学成才，目前正在为我的公司构建一个基于表单的库存控制系统，将材料转换为定制尺寸。由于业务的定制性质取决于客户、使用的基材尺寸等。在使用基材后，可能会有无数不同的边角料或成品入库。因此，如果不实际滚动并查找它，就很难知道该产品是否已经存在于数据库 (FinPriceList) 中。因此，我正在寻找一种方法来检查产品是否存在于表 FinPriceList（分别为列 A、B、C 和 D）中，使用 vba 交叉引用来自组合框产品组（FinProdGroup）、产品类别“FinProdCat”的输入，产品描述“FinProdDesc”和文本框产品尺寸“

我目前的尝试如下，因此任何帮助将不胜感激：

```
Sub VerifyStock()
Const DQTE = """"

Dim criteria1 As String
Dim criteria2 As String
Dim criteria3 As String
Dim criteria4 As String
Dim evalStr As String
Dim prodCode As Variant

criteria1 = FinProdIn.FinProdGroupIn.Value 'combobox1 from userform
criteria2 = FinProdIn.FinProdCatIn.Value   'combobox2 from userform
criteria3 = FinProdIn.FinProdDescIn.Value  'combobox3 from userform
criteria4 = FinProdIn.FinProdSizeIn.Value  'combobox4 from userform
evalStr = "INDEX(FinishedPriceList,MATCH(" & DQTE & criteria1 & DQTE & "&" & DQTE & criteria2 & DQTE & "&" & DQTE & criteria3 & DQTE & "&" & DQTE & criteria4 & DQTE & ",FinPriceList!$A:$A&FinPriceList!$B:$B&FinPriceList!$C:$C&FinPriceList!$D:$D,0))"
prodCode = Evaluate(evalStr)

If VarType(prodCode) = vbError Then
    MsgBox "Not Found! Would you like to add new product to stock list?", vbYesNo
    If Response = vbNo Then
        MsgBox "Cancelled", vbInformation
        Unload FinProdIn
    Else
    Call ModuleAddtoFinPriceList.AddtoFinPriceList
    End If
Else
    MsgBox "Product found would you like to add a transaction?", vbYesNo
    If Response = vbNo Then
        MsgBox "Cancelled"
        Unload FinProdIn
    Else
        Call ModuleAddTrans.AddTrans
    End If
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:42:13.283

将[索引](http://office.microsoft.com/en-us/excel-help/index-HP005209138.aspx)和[匹配](http://office.microsoft.com/en-us/excel-help/match-HP005209168.aspx)工作表函数与[评估](http://msdn.microsoft.com/en-us/library/office/aa223886%28v=office.11%29.aspx)VBA 方法结合使用。例如，如果您的产品代码（或部件号或其他标识符）在 A2:A5000 范围内，并且在 B2:B5000 和 C2:C5000 中有两个要匹配的条件，则可以使用：

```
Sub FindVal()
    Const DQTE = """"

    Dim criteria1 As String
    Dim criteria2 As String
    Dim evalStr As String
    Dim prodCode As Variant

    criteria1 = "ABC"
    criteria2 = "DEF"
    evalStr = "INDEX($C$2:$C$5000,MATCH(" & DQTE & criteria1 & DQTE & "&" & DQTE & criteria2 & DQTE & ",$A$2:$A$5000&$B$2:$B$5000,0))"

    prodCode = Evaluate(evalStr)

    If VarType(prodCode) = vbError Then
        MsgBox "No match found"
    Else
        MsgBox "Value found: " & prodCode
    End If
End Sub 
```

# jquery - Jquery 使用同一个按钮隐藏/显示多个 div

> ID：15480683
> 
> 赞同：2
> 
> 时间：2013-03-18T15:33:43.560
> 
> 标签：jquery

我正在使用 jquery 进行某种动态测验。我目前被困在使用相同按钮隐藏/显示 div 上。因此，例如，我在 html 中有这个：

```
<div id="div1" class="question">
<div id="div2" class="question">
<div id="div3" class="question">
<div id="div4" class="question">
<div id="div5" class="question">

<button type="button" onclick="GetSelectedItem()" id="next">Next</button> 
```

这是jQuery部分：

```
$(document).ready(function (){

$('#div2, #div3, #div4, #div5').hide();
$('#next').click(function(){
     //code
});
}); 
```

使用“#next”按钮，我想浏览每个 div，所以当我按下它时，它会隐藏前一个 div 并显示下一个，依此类推。谁能指出我正确的方向？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:41:27.757

你可以尝试这样的事情（假设你所有的问题都有一个类`question`而没有别的）：

```
$('#next').click(function(){
    var curr = $(".question:visible");
    curr.next(".question").show();
    curr.hide();
}); 
```

看[这里](http://jsfiddle.net/2eQTa/2/)

请注意，您可以检查返回的值`next()`以处理测验的结束。

这是一个[示例](http://jsfiddle.net/2eQTa/1/)，当您到达最后一个问题时禁用下一个按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:39:02.770

首先，您的 HTML 中有错误，您没有关闭 div

这应该让你开始：

[http://jsfiddle.net/crZ69/](http://jsfiddle.net/crZ69/)

HTML

```
<div id="div1" class="question">q1</div>
<div id="div2" class="question">q2</div>
<div id="div3" class="question">q3</div>
<div id="div4" class="question">q4</div>
<div id="div5" class="question">q5</div>

<button type="button" onclick="GetSelectedItem()" id="next">Next</button> 
```

查询

```
var qCount = 1;

$('.question').hide();

$('#next').click(function(){
    $('.question').hide();
    $('#div' + qCount).show() ;   
    qCount = qCount + 1;

    if(qCount == 6){ qCount = 1;}
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T15:39:08.420

您可以创建一个索引来跟踪打开的 div 并在单击按钮时增加它，隐藏所有 div，然后只显示“下一个”。

```
$('#div2, #div3, #div4, #div5').hide();
var idx = 0;
$('#next').click(function () {
    idx++;
    if (idx < $('.question').length) $('.question').hide();
    $('.question').eq(idx).show();
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/qXSwg/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T15:45:52.623

这使用`current`CSS 类来跟踪当前问题以实现可见性，并稍微整理 HTML 以使用不引人注目的 Javascript - [http://jsfiddle.net/ZqTsv/](http://jsfiddle.net/ZqTsv/)

HTML：

```
<div id="div1" class="question current">Question 1</div>
<div id="div2" class="question">Question 2</div>
<div id="div3" class="question">Question 3</div>
<div id="div4" class="question">Question 4</div>
<div id="div5" class="question">Question 5</div>

<button type="button" id="next">Next</button> 
```

CSS：

```
.question {
    display: none;
}

.question.current {
    display: block;
} 
```

jQuery：

```
$("#next").click(function () {
    if ($(".current").next(".question").length) {
       $(".current").removeClass("current").next(".question").addClass("current");     
    }    
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T16:12:30.017

令人惊讶的是，不同的人想出了多少不同的解决方案。这是我的：

首先修复您的 html，以便 div 有内容。

这是我建议的 javascript：

```
var idx = 0;
$(document).ready(function (){
    var qs = $('.question');
    qs.hide();
    qs.first().show();
    $('#next').click(function(){
       idx++;
       if( idx >= qs.length ) idx = 0;
       qs.hide();
       qs.eq(idx).show();
    });
}); 
```

[小提琴](http://jsfiddle.net/zy3Ty/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T16:16:52.190

[我做了什么](http://jsbin.com/aruwuh/3)

我觉得对你有用=）

# icloud - iCloud 日历中奇怪的日期时间格式

> ID：15480690
> 
> 赞同：0
> 
> 时间：2013-03-18T15:34:06.613
> 
> 标签：icloud, icalendar, rfc5545

我目前正在显示 ical 格式的日期（通过 caldav 从 iCloud 获取）。但是，日期时间格式不一致，有时我会得到`VEVENT`如下信息：

```
BEGIN:VEVENT
...
DTSTART;TZID=Europe/Berlin:Mond marc 2013 T-001020350 (TIV)
DTEND;TZID=Europe/Berlin:20130315T120000
END:VEVENT 
```

日期时间对`DTSTART`我来说没有意义。有没有关于如何解释这种日期时间的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:10:31.380

这确实没有意义。它不符合[RFC5545](https://www.rfc-editor.org/rfc/rfc5545)，因此服务器应该拒绝它。

在我看来，唯一明智的做法是尝试追踪生成此问题的客户并让他们修复他们的错误。通常，这由 PRODID 属性值指示，尽管服务器有时会重写这些值。

# java - 无法访问的声明 - 为什么在这里？

> ID：15480691
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:34:06.827
> 
> 标签：java

我有以下代码，我收到了一个无法访问的语句错误。有问题的行在说它是罪魁祸首之后有一条评论。

```
public static void selectPlayer ()
{
    // Loops through Player class' static array. If an index is storing a player object then print the player name out with a number for selection.
    for(int i=0; 1<101; i++)
    {
        if (Player.playerArray[i] != null)
        {
            System.out.println(i + ". " + Player.playerArray[i - 1].playerName);
        }

        System.out.print("\nPlease enter the number that corresponds to the player you wish to use; "); // This line is where it failed to compile a la unreachable statement.
        Scanner scanner = new Scanner(System.in);
        // Take players selection and minus 1 so that it matches the Array index the player should come from.
        int menuPlayerSelection = scanner.nextInt() - 1;
        // Offer to play a new game with selected player, view player's stats, or exit.
        System.out.print("You have selected " + Player.playerArray[menuPlayerSelection].playerName + ".\n1) Play\n2) View Score\n3) Exit?\nWhat do you want to do?: ");
        int areYouSure = scanner.nextInt();
        // Check player's selection and run the corresponding method/menu
        switch (areYouSure)
        {
            case 1: MainClass.playGame(menuPlayerSelection); break;
            case 2: MainClass.viewPlayerScore(menuPlayerSelection); break;
            case 3: MainClass.firstMenu(); break;
            default: System.out.println("Invalid selection, please try again.\n");
                         MainClass.firstMenu();
        }
    } 
```

我的问题是，我该如何解决？我明白为什么通常会发生无法访问的语句错误，但我无法弄清楚为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T15:35:34.983

首先编辑这个。

```
for(int i=0; 1<101; i++) { 
```

它是无限循环。

所以设置 i 而不是 1。

```
for(int i=0; i<101; i++){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:35:41.023

查看你的 for 循环的条件。它永远不会结束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:36:41.210

```
for(int i=0; 1<101; i++) 
```

应该

```
for(int i=0; i<101; i++) 
```

你的条件是 1<101 。无限循环永远是正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T15:44:24.643

您的代码缺少一个`}` 肯定会导致它中断的代码

正如其他人所说，你的 for 循环

```
for(int i=0; 1<101; i++) 
```

将始终满足它的条件，并且看起来您将开始遇到`IndexOutOfBound`异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T15:37:08.673

你有`for(int i=0; 1<101; i++)`一个无限循环（因为 1 总是低于 101）。

# git - 同步远程存储库

> ID：15480694
> 
> 赞同：0
> 
> 时间：2013-03-18T15:34:09.327
> 
> 标签：git, version-control, git-remote

我希望将多个遥控器与 git 存储库的裸副本同步，这样如果开发人员在一个遥控器上添加或更新分支，这些更改也会影响到其他遥控器。举个例子：

开发人员 A 将新分支“test-dev”推送到其原点。开发人员 B（我）从我的“本地”远程获取与开发人员 A 的来源相对应的所有内容，并且 git 通知我新的 test-dev 分支。要手动将 test-dev 推送到我的“网络”远程，我可以签出分支然后推送它，或者我可以在调用 git 时传递一个 refspec：

```
git push network local/test-dev:refs/heads/test-dev 
```

当有人从我称之为“网络”的远程拉/取/克隆时，test-dev 分支现在会出现。一个小时后，开发人员 A 将一些重要的更改推送到 test-dev。然后我可以获取并合并（或只是拉取）更改，然后以与以前相同的方式将更新的更改推送到网络，方法是签出更改或使用 refspec。

有没有办法自动化这个过程？一旦出现新分支或对现有分支进行更改，我希望有一些简单的命令从指定的远程获取这些新信息，然后再使用第二个命令将其推送到我的所有其他远程。如果必须编写脚本，那就这样吧，但我希望有一些参数可以传递给我没有看到的现有 git 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:09:46.430

> 有没有办法自动化这个过程？

是的，它是 Git 的一个特性，称为[hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)。

您应该阅读此处链接的页面以了解它们，我会告诉您您想要在`post-receive`您想要用作其他人的规范参考的服务器上实现挂钩。如果人们可以推送到多个服务器，那么您也需要在这些服务器上实现挂钩。

# arrays - 通过 PAWN 中的关联数组传递数组变量（.p 文件）

> ID：15480696
> 
> 赞同：0
> 
> 时间：2013-03-18T15:34:15.720
> 
> 标签：arrays, if-statement, for-loop, pawn

我是编程世界的新手（很高兴能成为其中的一员）。我相信我想做的事情非常简单，但是我在 PAWN 文件编程中找不到很多不适合`SA-MP`. 我有一个 '.p' 文件，它应该根据限定符数字数组检查数组的三明治数字。据我了解，我可以通过我的代码传递一个数组来检查它是否匹配。这些是我的数组：

```
+ new spec_bacon_plus[] = { 30500, 30100, 30400, 33100, 30300 } 
+ new correct_spec_bacon_qual[] = { 9094400, 9013400, 9013400, 9093400, 9094400 }
+ new all_bacon_plus[] = {
    9093400, /* add(1) bacon */ 
    9013400, /* add(2) bacon */ 
    9094400, /* add(3) bacon */ 
    9095400, /* add(4) bacon */ 
    9096400, /* add(6) bacon */ 
    9097400, /* add(8) bacon */ 
} 
```

我的代码如下。我正在尝试检查我的 spec_bacon_plus 是否发生，如果发生，我的 all_bacon_plus 是否发生？如果 spec_bacon_plus 中的数字与 correct_spec_bacon_qual 中的数字不一致，则显示错误。我相信他们是“关联”的，因为他们的立场。（例如，30500 是 9094400，30100 是 9013400，30400 是 9013400 等等）。

```
 for(k = 0; k < sizeof spec_bacon_plus; k++) {
                        if(p_plu == spec_bacon_plus[k]) { /* the sandwich we rung up is the kth bacon sandwich */
                            for(m = 0; m < sizeof all_bacon_plus; m++) { /* check if the qualifer was any of the bacons */
                                if (p_qualifier == correct_spec_bacon_qual[m] && k != m ) /* && not in the slot that we expect */ 
                                    ok = 0; /*not cool*/
                                    pos_popup_dialog("THIS BACON IS NOT OK!");
                                        ok = 1;
                                        check_spec_bacon_plu = p_plu;
                                        check_spec_bacon_qual = p_qualifier;
                                        check_spec_bacon_qual_should_be = correct_spec_bacon_qual[k]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:30:19.960

我想到了...

```
for(k = 0; k < sizeof spec_bacon_plus; k++) {
    if(p_plu == spec_bacon_plus[k]) { /* the sandwich we rung up is the kth bacon sandwich */
        for(m = 0; m < sizeof all_bacon_plus; m++) { /* check if the qualifer was any of the bacons */
            if (p_qualifier == all_bacon_plus[m]) /* && not in the slot that we expect */ 
                for(l = 0; l < sizeof correct_spec_bacon_qual; l++) {
                    if (p_qualifier == correct_spec_bacon_qual[k])
                        pos_popup_dialog("THIS BACON IS OK!");
                    else pos_popup_dialog("THIS BACON NOT IS OK!"); 
```

# sql - 在后台运行大型查询 MS SQL

> ID：15480699
> 
> 赞同：1
> 
> 时间：2013-03-18T15:34:23.703
> 
> 标签：sql, sql-server, database, sql-server-2008

我正在使用 MS SQL Server 2008 我有一个不断使用的表（数据总是在更改并插入其中）它现在包含 ~70 Mill 行，我正在尝试使用存储过程对表运行一个简单的查询应该适当几天，

我需要表保持可用，现在我执行了存储过程，过了一会儿，我尝试在表上执行的每个简单的身份查询选择都没有响应/运行太多时间，我破坏了它

我应该怎么办？这是我的存储过程的样子：

```
 SET NOCOUNT ON;
update SOMETABLE
set
[some_col] = dbo.ufn_SomeFunction(CONVERT(NVARCHAR(500), another_column))
WHERE 
[some_col] = 243 
```

即使我在 where 子句上尝试它（使用“和”逻辑..）：

```
ID_COL > 57000000 and ID_COL < 60000000 and 
```

它仍然不起作用

BTW- SomeFunction 做了一些简单的数学运算，并在另一个包含大约 300k 项的表中查找行，但从未更改

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:54:29.673

从我的角度来看，您的服务器存在严重的性能问题。即使我们假设查询中没有任何记录

```
select some_col with (nolock) where id_col between 57000000 and 57001000 
```

在内存中，从磁盘顺序读取几页不应该花费 21 秒（如果它是一个自动标识并且你没有做一些愚蠢的事情，比如添加一个“desc”，那么你在 id_col 上的聚集索引不应该是碎片化的到索引定义）。

但是如果你不能/不会解决这个问题，我的建议是一次以小包进行更新，比如 100-1000 条记录（取决于查找函数消耗的时间）。一项更新/事务不应超过 30 秒。

您会看到每次更新都会对其修改的所有记录保持独占锁定，直到事务完成。如果您不使用显式事务，则每个语句都在单个自动事务上下文中执行，因此当更新语句完成时锁会被释放。

但是您仍然可能会以这种方式遇到死锁，具体取决于其他进程的操作。如果他们一次修改了多个记录，或者即使他们收集并持有多行的读锁，您也可能会出现死锁。

为避免死锁，您的更新语句需要锁定它一次将修改的所有记录。这样做的方法是将单个更新语句（只有几行受 id_col 限制）放在可序列化的事务中，例如

```
IF @@TRANCOUNT > 0
  -- Error: You are in a transaction context already

SET NOCOUNT ON
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE

-- Insert Loop here to work "x" through the id range
  BEGIN TRANSACTION
    UPDATE SOMETABLE
      SET [some_col] = dbo.ufn_SomeFunction(CONVERT(NVARCHAR(500), another_column))
      WHERE [some_col] = 243 AND id_col BETWEEN x AND x+500 -- or whatever keeps the update in the small timerange
  COMMIT
-- Next loop

-- Get all new records while you where running the loop. If these are too many you may have to paginate this also:
BEGIN TRANSACTION
  UPDATE SOMETABLE
    SET [some_col] = dbo.ufn_SomeFunction(CONVERT(NVARCHAR(500), another_column))
    WHERE [some_col] = 243 AND id_col >= x
COMMIT 
```

对于每次更新，这将对给定记录进行更新/排他键范围锁定（但仅限于它们，因为您通过聚集索引键限制更新）。它将等待同一记录上的任何其他更新完成，然后获取它的锁（导致所有其他事务阻塞，但仍仅针对给定记录），然后更新记录并释放锁。

最后一个额外的语句很重要，因为它会将键范围锁定到“无穷大”，从而在更新语句运行时甚至阻止在范围末尾的插入。

# jquery - twitter-bootstrap typeahead RTL - 位置错误

> ID：15480700
> 
> 赞同：0
> 
> 时间：2013-03-18T15:34:24.113
> 
> 标签：jquery, css, twitter-bootstrap, bootstrap-typeahead

我正在使用 twitter-bootstrap typeahead 从服务器获取数据并将其显示为用户类型。

问题是我的网站是 RTL，这使得结果框不对齐。

在 chrome 上，结果框与最右侧对齐，而在 FF 上，它显示在输入的左侧。

我试图寻找它，但似乎没有解决方案有效。

这是 twitter-bootstrap 应用的硬编码样式：

```
<ul class="typeahead dropdown-menu dropdown-fixed" style="top: 191px; left: 849px; display: none;"> 
```

任何想法如何正确对齐它？10倍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:10:00.147

我通过删除左属性使其工作：

```
this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this} 
```

并为下拉菜单使用固定的正确位置。

# javascript - 如何正确获取 JSON 值？

> ID：15480712
> 
> 赞同：0
> 
> 时间：2013-03-18T15:34:47.043
> 
> 标签：javascript, json

我有这个 json 数组

```
var currencyformats =
{"USD":[
    {'symbol':'$', 'left':true}
],
    "UAH":[
        {'symbol':'₴', 'left':true}
    ],
    "EUR":[
        {'symbol':'€', 'left':false}
    ]
}; 
```

如何检索'₴'？我试过这个（在cookie“to”我有“UAH”）

```
currencyformats[$.cookie("to")].symbol 
```

但我得到了`undefined`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:36:45.847

问题是在每个国家代码下，您都定义了一个包含单个对象的数组。这意味着在您访问国家代码后，您还需要访问数组中的第一个索引。

因此，假设 cookie 设置为您期望的值：

```
currencyformats[$.cookie("to")][0].symbol; 
```

# real-time - 实时信号强度：更新速度有多快？

> ID：15480715
> 
> 赞同：1
> 
> 时间：2013-03-18T15:34:55.840
> 
> 标签：real-time, signal-strength

我是一名从事与无线通信相关的项目的科学家。在我的项目中，我需要访问电话信号强度、二进制错误率或任何指示接收信号质量的信息。我知道可以使用 SignalStrength 在 Android 上执行此操作，但我只是不知道它的更新速度有多快。谁能告诉我这个变量的更新时间是多少？提前谢谢了。

G。

# winapi - 通过用户名通过 SSPI 检索 Kerberos 令牌

> ID：15480721
> 
> 赞同：1
> 
> 时间：2013-03-18T15:35:09.317
> 
> 标签：winapi, kerberos, sspi

有没有办法在没有密码的情况下在本地检索用户令牌？

# php - 是否有关于 zend 框架 2 的良好基本概述？

> ID：15480722
> 
> 赞同：6
> 
> 时间：2013-03-18T15:35:12.703
> 
> 标签：php, zend-framework, zend-framework2

我已经阅读了大量关于 Zend Framework 2 的教程等，但我似乎找不到一个以简单的方式描述基本组件和逻辑流程的一般概述。

目前可用的所有教程似乎都做出了巨大的假设，并且只是给出了解决特定问题的代码示例，而不涉及它们背后的基本思想。ZF2 文档是主要的罪魁祸首。

这是我为一般概述找到的最有用的东西，尽管现在已经过时了：http: [//zendframework2.de/en/cheat-sheet.html](http://zendframework2.de/en/cheat-sheet.html)

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:08:16.573

阅读 Zend Framework 2 的最佳去处当然是 ZF2 的手册。

[http://framework.zend.com/manual/2.1/en/index.html](http://framework.zend.com/manual/2.1/en/index.html)

我还建议您关注 Zend 网站上与 ZF2 相关的网络研讨会

[http://www.zend.com/en/resources/webinars/framework](http://www.zend.com/en/resources/webinars/framework)

博客：

Matthew Weier O'Phinney 是 ZF2 项目的首席开发人员，是那种对 ZF2 了如指掌的人。他有一个博客，分享与 ZF2 和 PHP 相关的有趣谈话、概念和想法。 [http://www.mwop.net/](http://www.mwop.net/)

甚至 Coury 也是 ZF2 的贡献者和 ModuleManager 的创建者。他在他的 github 和博客上有一些很棒的模块要遵循 :) [http://blog.evan.pro/](http://blog.evan.pro/)

Ralph Schindler 是 ZF2 的另一位贡献者，他有一个博客，经常发布关于 zf2 的很酷的东西和概念 [http://ralphschindler.com/](http://ralphschindler.com/)

**编辑**博客部分：

我最近发现 framework.zend.com 网站提供了该项目的贡献者列表。此列表提供了有关 github 帐户和这些贡献者的博客的信息（如果他们有声明的话）。在那里您还可以找到有关 ZF2 的有用资源。链接在这里：

[http://framework.zend.com/participate/contributors](http://framework.zend.com/participate/contributors)

还有一个人 Alexander Romanenko 制作了一个关于 ZF2 应用程序开发的视频系列。他谈到了 ZF2 的很多方面和重要组成部分。现在有 9 个视频，他开始构建应用程序，同时考虑到很多与日常 Web 开发相关的事情

[https://www.youtube.com/feed/UCLgC6BIGw2brdJK7Lb4elpg](https://www.youtube.com/feed/UCLgC6BIGw2brdJK7Lb4elpg)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T20:09:27.437

我发现这很有帮助：http: [//zf2cheatsheet.com](http://zf2cheatsheet.com)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T13:41:29.133

我会推荐这里的“使用 Zend Framework 2”一书： [https ://leanpub.com/using-zend-framework-2](https://leanpub.com/using-zend-framework-2)

# php - 合并 2 个表格并显示给定成员的所有可能结果

> ID：15480726
> 
> 赞同：1
> 
> 时间：2013-03-18T15:35:15.743
> 
> 标签：php, mysql

假设我有以下表结构

```
DROP TABLE IF EXISTS `members`;

CREATE TABLE `members`
(
    m_id  INT PRIMARY KEY NOT NULL AUTO_INCREMENT
  , m_upgrade TINYINT NOT NULL DEFAULT 0  COMMENT '0 - no upgrade, 1 - possible upgrade'
) ENGINE MyISAM
;

DROP TABLE IF EXISTS `upgrade_reasons`;

CREATE TABLE `upgrade_reasons`
(
    ur_id INT PRIMARY KEY NOT NULL AUTO_INCREMENT
  , ur_by INT NOT NULL COMMENT 'Who upgraded me'
  , ur_for INT NOT NULL COMMENT 'who this upgrade is for'
  , ur_vote TINYINT DEFAULT NULL COMMENT 'NULL - not yet voted, 0 - do not upgrade, 1 - upgrade'
  , ur_reason VARCHAR(255) DEFAULT NULL COMMENT 'The reason for marking as upgrade / do not upgrade'
  , UNIQUE INDEX ur_idx(ur_by, ur_for)
) ENGINE MyISAM
;

INSERT INTO `members`(m_id, m_upgrade)
VALUES
    (1, 0)
  , (2, 0)
  , (3, 0)
  , (4, 1)
  , (5, 1)
;

INSERT INTO `upgrade_reasons`(ur_by, ur_for, ur_vote, ur_reason)
VALUES
    (2, 4, 1, 'Vote for')
  , (3, 4, 0, 'vote against')
  , (3, 5, 0, 'vote against')
; 
```

对于成员 1，我希望看到以下结果

```
+-----+-----------+--------+--------+---------+---- ---------+
|m_id | m_升级 | ur_by | ur_for | 你的投票 | 你的原因 |
+-----+-----------+--------+--------+---------+---- ---------+
| 4 | 1 | 空 | 4 | 空 | 空 |
+-----+-----------+--------+--------+---------+---- ---------+
| 5 | 1 | 空 | 5 | 空 | 空 |
+-----+-----------+--------+--------+---------+---- ---------+

```

对于成员 2，我希望看到以下结果

```
+-----+-----------+--------+--------+---------+---- ---------+
|m_id | m_升级 | ur_by | ur_for | 你的投票 | 你的原因 |
+-----+-----------+--------+--------+---------+---- ---------+
| 4 | 1 | 2 | 4 | 1 | 投票 |
+-----+-----------+--------+--------+---------+---- ---------+
| 5 | 1 | 空 | 5 | 空 | 空 |
+-----+-----------+--------+--------+---------+---- ---------+

```

对于成员 3，我希望看到以下结果

```
+-----+-----------+--------+--------+---------+---- ---------+
|m_id | m_升级 | ur_by | ur_for | 你的投票 | 你的原因 |
+-----+-----------+--------+--------+---------+---- ---------+
| 4 | 1 | 3 | 4 | 0 | 投反对票|
+-----+-----------+--------+--------+---------+---- ---------+
| 5 | 1 | 3 | 5 | 0 | 投反对票|
+-----+-----------+--------+--------+---------+---- ---------+

```

到目前为止，我什么都没试过（除了搜索 StackOverflow），因为我不知道从哪里开始。

注意。这是一个用 PHP 编码的网站，所以如果没有纯 SQL 的解决方案，我可以用 PHP 做

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:05:42.030

您必须[`joins`](http://dev.mysql.com/doc/refman/5.5/en/join.html)为此使用

```
select m1.m_id, m1.m_upgrade,
       ur.ur_by, coalesce(ur.ur_for, m1.m_id) as ur_for, ur.ur_vote, ur.ur_reason
from members m1
join members m2 on m2.m_id <> m1.m_id
left join upgrade_reasons ur on ur.ur_by = m2.m_id and ur.ur_for = m1.m_id
where m1.m_upgrade = 1 
```

[SQLFiddle](http://www.sqlfiddle.com/#!2/66c3a/37/0)用于测试。

# php - localhost 加载错误的 php 版本

> ID：15480728
> 
> 赞同：2
> 
> 时间：2013-03-18T15:35:21.207
> 
> 标签：php, macos

我使用 Liip 的服务[http://php-osx.liip.ch/#ext](http://php-osx.liip.ch/#ext)在运行 10.8 的 macbook pro 上安装了 php 5.4 ：

```
 curl -s http://php-osx.liip.ch/install.sh | bash -s 5.4 
```

我使用终端检查 php 版本：

```
 php -v 
```

并查看正确版本的 php：

```
PHP 5.4.13 (cli) (built: Mar 18 2013 09:51:28) 
Copyright (c) 1997-2013 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies
with Xdebug v2.2.1, Copyright (c) 2002-2012, by Derick Rethans 
```

我从 httpd.conf 中取消了 LoadModule php5_module libexec/apache2/libphp5.so 的注释。但是，当我从 localhost 运行 phpinfo() 时，我运行的是 php 5.3。如何让 localhost 运行 php 5.4？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:47:02.463

Mac 通常会预装 Apache，包括安装 php 和 mysql，配置为 localhost。您需要在默认 apache 的`httpd.conf`文件中重新配置 php 的路径，或者使用 PHP 5.4 的内置服务器，该服务器在特定端口上运行，这将允许您使用 PHP 的内置服务器而不是 Mac 的默认 apache 安装.

PHP 手册展示了如何在端口 8000 上启动 PHP 的内置服务器：http: [//php.net/manual/en/features.commandline.webserver.php](http://php.net/manual/en/features.commandline.webserver.php)

# r - 查找数据框中所有站点共有的日期

> ID：15480729
> 
> 赞同：0
> 
> 时间：2013-03-18T15:35:24.237
> 
> 标签：r

我正在处理一个大型数据集，我想找到所有站点共有的日期。

```
site <- c(1,1,1,2,2,2,2,3,3,4,4,4)
date <- c("4th Nov","5th Nov","6th Nov","5th Nov","6th Nov","7th Nov","8th Nov","5th Nov","6th Nov","6th Nov","7th Nov","8th Nov")
temperature <- c(3,5,7,3,6,8,5,3,5,7,8,9)
data <- data.frame(site,date,temperature)

common.dates(data)
[1] "6th Nov" 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T16:07:16.837

它与 、 和 的组合`split`一起`intersect`使用`Reduce`：

```
Reduce(intersect, split(data$date, data$site))

[1] "6th Nov" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:52:13.323

一种使用方式`plyr`：

```
with(ddply(data, .(date), function(x) all(1:4 %in% x$site)), date[V1 == TRUE])
# [1] 6th Nov 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:49:39.327

你可以这样做（即使它没有优化）：

```
dates <- union(NULL,data$date)
sites <- union(data$site,NULL)

w <- array(0,length(dates)) # number sites per date
for (i in sites)
    for (j in 1:length(dates))
        w[j] <- w[j] + dates[j] %in% data$date[data$site==i]

dates[w == length(sites)] # returns the dates common to all sites 
```

# jquery - 修改隐藏字段值时将 PUT 表单作为 POST 发送

> ID：15480730
> 
> 赞同：0
> 
> 时间：2013-03-18T15:35:28.933
> 
> 标签：jquery, ruby-on-rails

我有一个更新对象的表单，

`= form_tag (..., method: :put) do`

HTML 会说`method="post"`，但表单将使用`PUT`. 当我尝试根据按钮组的选择更改隐藏字段的值时：

```
 $('#form .btn-group button').click(function(e) {
    $('#form input[type=hidden]').val($(this).data('value'));
  }); 
```

表单是使用 提交的`POST`，给了我一个 404。我想我正在破坏一些东西`jquery_ujs`，但是已经有几天了，我仍然没有任何线索。不会发生 JavaScript 错误，并且隐藏字段值已正确修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:38:43.523

尝试将其更改`$('#form input[type=hidden]')`为更精确的选择器，这样您就不会影响所有隐藏字段。向隐藏字段添加一个类。您很可能会覆盖所有可能导致问题的隐藏字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:39:00.350

这是因为`method: put`为表单创建了一个隐藏字段，如下所示：

```
<input name="_method" type="hidden" value="put"> 
```

检查导轨插入元素`div`正下方。`form`

这就是应用程序将其识别为 PUT 请求而不是 POST 的方式 - 通过此表单参数的值。因此，像在 js 中那样修改*所有*隐藏字段会破坏表单。

# unix - 将文本传递给 KSH 中的变量。不工作

> ID：15480734
> 
> 赞同：0
> 
> 时间：2013-03-18T15:35:40.530
> 
> 标签：unix, awk, ksh

嗨，我正在努力解决这个简单的程序。我无法将文本文件中的值传递给变量。我被困在这个：`value=$( sed -n "${line}p" rpt1.txt|awk {$3}`

输出/输出：

```
1.sh[15]: test: argument expected 
```

代码：

```
wc `find /arbor/custom/gur/fold1`|grep -vi "total"| tee rpt1.txt
total1=`wc -l rpt1.txt`
wc `find /arbor/custom/gur/fold2`|grep -vi "total"| tee rpt2.txt
total2=`wc -l rpt2.txt`
line=1
if [ $line  -le  $total1 ]
then
value=$( sed -n "${line}p" rpt1.txt|awk {$3} )
if [ $value  -eq  512 ];
then
sed -n "${line}p" rpt1.txt|awk '{print $4}'| tee direc.txt
fi
line =$line+1
else
echo "loop over"
fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:39:49.180

可疑行中的 $3 前面不应该有打印吗？

# android - 键盘出现时隐藏ImageView，键盘消失时显示

> ID：15480737
> 
> 赞同：8
> 
> 时间：2013-03-18T15:35:47.483
> 
> 标签：android, keyboard, android-imageview, android-edittext

键盘出现时如何隐藏`ImageView`（按下某些键后`EditText`）。`ImageView`然后在关闭键盘时显示这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:37:05.550

我认为[`OnFocusChangeListener`](http://developer.android.com/reference/android/view/View.OnFocusChangeListener.html)这对你来说可能是正确的。

```
editText.setOnFocusChangeListener(new OnFocusChangeListener() {

    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        // view/hide ImageView
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T21:03:41.810

```
edit_Text.setOnFocusChangeListener(new OnFocusChangeListener() {
@Override
public void onFocusChange(View v, boolean hasFocus) {
    if(hasFocus){
        Toast.makeText(getApplicationContext(), "got the focus", Toast.LENGTH_LONG).show();
             // Hide your ImageView
               iv.setVisibility(View.GONE);  // (make the view gone)
    }else
        Toast.makeText(getApplicationContext(), "lost the focus", Toast.LENGTH_LONG).show();
            // Show your ImageView
              iv.setVisibility(View.VISIBLE);
    }
}); 
```

# ios - tableViewController 不同单元格中的不同图像无法正常工作

> ID：15480740
> 
> 赞同：1
> 
> 时间：2013-03-18T15:35:54.590
> 
> 标签：ios, uitableview

我做了一个`tableViewController`. 我想为第 1 个和第 7 个索引单元格提供不同的图像。`cellForRowAtIndexPath`这是我的委托方法中的代码片段。它在开始时正确初始化单元格，但是当我上下滚动几次时，它也开始在其他单元格的附件视图中给出“button4.png”。

```
 UIImage *indicatorImage;
            if(indexPath.row==0||indexPath.row==6)
            {
                indicatorImage = [UIImage imageNamed:@"button4.png"];
            }
            else
            {
                indicatorImage = [UIImage imageNamed:@"img-arrow.png"];
            }      

        cell.accessoryView =
        [[UIImageView alloc]
          initWithImage:indicatorImage]; 
```

这可能是什么原因？

该函数的完整代码有点乱，但我在这里发布：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    selection=self.tabBarController.selectedIndex;
    static NSString *CellIdentifier = @"Cell";
    UILabel *topLabel;

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {

        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        UIImage *indicatorImage;

        if(indexPath.row==0||indexPath.row==6)
        {
            indicatorImage = [UIImage imageNamed:@"button4.png"];
        }
        else
        {
            indicatorImage = [UIImage imageNamed:@"img-arrow.png"];
        }      

    cell.accessoryView =
    [[UIImageView alloc]
      initWithImage:indicatorImage];

        cell.accessoryView =
        [[UIImageView alloc]
          initWithImage:indicatorImage];
        const CGFloat LABEL_HEIGHT = 20;

        topLabel =
        [[UILabel alloc]
          initWithFrame:
          CGRectMake(
                     2.0 * cell.indentationWidth,
                     0.5 * (tableView.rowHeight - 2 * LABEL_HEIGHT),
                     tableView.bounds.size.width -
                     4.0 * cell.indentationWidth
                     - indicatorImage.size.width,
                     LABEL_HEIGHT)];

        [cell.contentView addSubview:topLabel];

        topLabel.backgroundColor = [UIColor clearColor];
        topLabel.shadowColor = [UIColor whiteColor];
        topLabel.shadowOffset = CGSizeMake(0, 1);
        topLabel.textColor = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:1.0];
        topLabel.highlightedTextColor = [UIColor colorWithRed:1.0 green:1.0 blue:0.9 alpha:1.0];
        topLabel.font = [UIFont systemFontOfSize:[UIFont labelFontSize]];

        topLabel.tag=10;
        cell.backgroundView =
        [[UIImageView alloc] init];
        cell.selectedBackgroundView =
        [[UIImageView alloc] init];

    }
}
else
{
    topLabel = (UILabel *)[cell viewWithTag:10];
}

UIImage *rowBackground;
UIImage *selectionBackground;

rowBackground = [UIImage imageNamed:@"topAndBottomRow.png"];
selectionBackground = [UIImage imageNamed:@"topAndBottomRowSelected.png"];

    if(indexPath.row==0||indexPath.row==6)
    {

        rowBackground = [UIImage imageNamed:@"topAndBottomRowSelected.png"];
        selectionBackground = [UIImage imageNamed:@"topAndBottomRowSelected.png"];

        topLabel.textColor = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:1.0];
        topLabel.highlightedTextColor = [UIColor colorWithRed:1.0 green:1.0 blue:0.9 alpha:1.0];
        topLabel.font = [UIFont systemFontOfSize:20];
    }

((UIImageView *)cell.backgroundView).image = rowBackground;
((UIImageView *)cell.selectedBackgroundView).image = selectionBackground;

NSString *object = _objects[indexPath.row];
NSString *str=[object description];
topLabel.text=[NSString stringWithFormat:@"         %@",str];

return cell; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:53:17.377

您在`if (cell == nil) ...`创建和配置单元的块中设置此图像。但是您需要将此图像设置移到该`if`块之外，因为如果正在重用单元格（即您不必`alloc`和`init`），旧图像将被重用。您应该查看该`if`语句中的任何内容，以了解应该逐个单元格更改的内容，并将其移到`if`块之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:54:25.660

当滚动让你像这样混乱时，它表明你没有完全初始化**REUSED** UITableViewCell 的内容。虽然您的代码片段说您确实将其设置为某些东西 - 您的结果表明您不是。你可以找那个。

例如，在获取单元格后立即尝试将附件视图设置为 nil 并查看问题是否消失。

# javascript - 如何为浏览器后退按钮指定上一页

> ID：15480744
> 
> 赞同：1
> 
> 时间：2013-03-18T15:36:03.973
> 
> 标签：javascript, html, web.py

我正在创建一个 Web 应用程序。

我有一个登录页面，用户在登录后会看到该页面。

从登录页面，他们可以单击链接转到详细信息页面。

详细信息页面加载默认 id 的数据以开始。它还包含一个下拉菜单，供用户选择不同的 ID。当用户按下提交按钮时，它会向同一页面发出获取请求，但使用可选参数`id=someID`重新加载页面并显示新选择的 id 的数据。所有这些都正常工作。

我的问题是，如果用户从下拉列表中选择几个不同的 id 并单击提交以查看他们的数据，那么现在如果他想返回登陆，他必须返回查看他查看的每个 id。我想知道是否可以进行设置，以便当他们按下后退按钮时，无论他们选择了多少次新的 ID 来查看数据，他们都会直接进入登录页面。

这是我想要实现的流程：

`/landing -> /detail -> /detail?id=1 -> /detail?id=2 -> [press back button] -> /landing`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:47:01.047

将详细信息页面上的请求通过 ajax 拉入。您必须进行一些重构，以便在成功请求时，它接收到的信息将像内容块一样重新填充，但这将允许详细信息页面上的信息更新，而无需您实际导航到新页面。然后它会让您能够按后退按钮返回登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:53:45.460

如果您已经在使用一种方法来捕获请求的 id 数量：

```
<INPUT Type="button" id="back" VALUE="Back" onClick="history.go(-"number of id requests");return true;"> 
```

# arrays - Gchart.php，动态填充数据集和图例

> ID：15480749
> 
> 赞同：0
> 
> 时间：2013-03-18T15:36:22.737
> 
> 标签：arrays, loops, gchart

我正在尝试使用 gchart.php 制作图表。

它采用这种格式的数据：

```
 $Chart->setLegend(array("blah", "bla2", "blah3")); 
```

我有一组名字，名字的数量可以是任何东西，从 1 到 10 或更高。

我不知道如何在每个数组项之间用“”拆分数组项的语法，也不知道如何循环 (array("blah","blah") 的语法以获取我的数组中的值。

这似乎是一个相当复杂的问题，这可能吗？

# java - 只有最后一个子字符串在 java for 循环中测试

> ID：15480750
> 
> 赞同：1
> 
> 时间：2013-03-18T15:36:23.207
> 
> 标签：java, string, loops, substring

我正在创建一个循环，它将测试用户输入的每个子字符串以测试非法字符。但是，它仅检测非法字符何时位于输入的最后位置。我觉得解决方案可能很简单，但我似乎无法弄清楚，我该如何纠正这个问题，以便它可以在字符串中的任何位置检测到它？

```
public class IllegalFileName {

public static final Set<String> illegalCharsSet = new HashSet<String>(
        Arrays.asList("/", "\n", "\r", "\t", "\0", "\f", "`", "?", "*",
                "\\", "<", ">", "|", "\"", ":", ".", "£", "$", "%", "^",
                "&", ")", "("));

public static void main(String[] args) {

    String illegalNameText = "££!233";
    String illegalNameText2 = "££!233$";
    boolean illegalName = false;

    for (int i = 0; i <= illegalNameText.length() - 1; i++) {
        System.out.println(i);
        if (illegalCharsSet.contains(illegalNameText.substring(i))) {
            System.out.println(illegalNameText + " is illegal");
            illegalName = true;
            System.out.println(illegalNameText.substring(i));
        }

    }

    for (int i = 0; i <= illegalNameText2.length() - 1; i++) {
        System.out.println(i);
        if (illegalCharsSet.contains(illegalNameText2.substring(i))) {
            System.out.println(illegalNameText2 + " is illegal");
            illegalName = true;
            System.out.println(illegalNameText2.substring(i));
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:39:20.897

`substring(i)`返回从`i`包含到`n`排除的子字符串（其中`n`是初始字符串的大小）。

使用一组字符代替 ( `Set<Character>`，由 初始化`Arrays.asList('/', '\n', ...)`，并使用`contains`on `theString.charAt(i)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:39:29.307

您想检查**它是否包含非法字符**，因此是`illegalCharsSet`. 我认为应该是这样的：

```
for (int i = 0; i <= illegalNameText.length() - 1; i++) {
    System.out.println(i);
    if (illegalNameText.contains(illegalCharsSet.get(i)) {
        System.out.println(illegalNameText + " is illegal");
        illegalName = true;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:39:38.167

我会简单地遍历非法字符然后做

```
if (illegalNameText.contains(illegalChar)) {... 
```

或类似的。更简洁的解决方案可能是使用[Java 正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)并执行类似的操作。

```
if (Pattern.matches("[£$%]", illegalNameText)) {... 
```

替换您的全套非法字符。为了提高效率，您可能需要预先初始化/编译上面的正则表达式。

# fine-uploader - 文件添加到列表时的回调

> ID：15480751
> 
> 赞同：0
> 
> 时间：2013-03-18T15:36:29.803
> 
> 标签：fine-uploader

使用[FineUploader jQuery 插件](http://fineuploader.com)时...我有 autoUpload = false 并且我需要知道何时将文件添加到 ul。在添加 li 之前调用提交回调。（我有一些其他元素作为我的“fileTemplate”的一部分，我需要在添加文件时更新这些元素。）

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:01:07.533

这很可能在 3.4-IP 分支中已经实现的案例中得到解决。3.4 是下一个预定版本。本质上，我添加了一个`onSubmitted`回调。在您的情况下，可以安全地假设仅在将列表项添加到 DOM 后才会调用此回调。如果这不能解决您的问题，请告诉我。

# java - 尝试添加 http 参数但它不起作用

> ID：15480765
> 
> 赞同：1
> 
> 时间：2013-03-18T15:36:56.540
> 
> 标签：java, apache, http, post

```
HttpClient httpclient = new DefaultHttpClient();
        try {
            HttpPost httpMethod = new HttpPost(this.transformURL(request));
            BasicHttpParams params = new BasicHttpParams();
            params.setParameter("name", name);
            httpMethod.setParams(params);
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            httpclient.execute(httpMethod, responseHandler);
        }catch{
           LOG.error("Error");
        } finally { 
          httpclient.getConnectionManager().shutdown();
        } 
```

我有上面的代码，我试图传入一个名称变量作为参数，以便在另一个方法中被`request.getParameter("name")`.

它似乎不起作用，当我调试时，我可以看到参数已设置，但是当我按照它执行下一个方法时，它不会获取参数。

有什么建议么？

编辑：

我添加了这个，效果很好

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
            nameValuePairs.add(new BasicNameValuePair("name", request.getParameter("name")));
            httpMethod.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:14:36.557

你检查[了这个例子](http://www.vogella.com/articles/ApacheHttpClient/article.html#example_post)吗？它使用类`BasicNameValuePair`而不是`BasicHttpParams`像你一样。

此外，[HttpClient 3.x 版的文档](http://hc.apache.org/httpclient-3.x/methods/post.html)也这样做：

```
 PostMethod post = new PostMethod("http://jakarata.apache.org/");
    NameValuePair[] data = {
      new NameValuePair("user", "joe"),
      new NameValuePair("password", "bloggs")
    };
    post.setRequestBody(data);
    // execute method and handle any error responses.
    ...
    InputStream in = post.getResponseBodyAsStream();
    // handle response. 
```

**更新**：`BasicHttpParams`该类是`HttpParams`接口的实现，正如下面@Perception 所指出的，它是一组“自定义 HTTP 客户端行为”的属性。来自[HttpParams javadoc](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/params/HttpParams.html)：*“HttpParams 预计将用于‘一次写入 - 多次读取’模式。一旦初始化，HTTP 参数预计不会在 HTTP 消息处理过程中发生变化。”*

# php - 如何使用导致正确产品的选择选项过滤 MySQL 查询

> ID：15480766
> 
> 赞同：1
> 
> 时间：2013-03-18T15:36:59.100
> 
> 标签：php, mysql

我正在研究基于数据库的CMS。数据库结构如下（语言为荷兰语）：

id，artikelnummer_fabrikant，breedte，diepte，hoogte，extrainfo，afmeting，kleur，merk，serie，producttype，omschrijving，prijsfinal，levertijd

使用下一段代码，我从数据库中获取所有信息并将其放入表中：

（对不起，我不使用 < 和 > 创建标签，这个文本编辑器将其视为标签而不是文本，我不知道如何使这项工作正确，欢迎任何提示！）

```
function get_content() {

echo "<p>";
echo "<table>";
echo "<tr>";
echo "<td> id </td>";
echo "<td> artikelnummer frabrikant </td>"
and so on
echo "</tr>";

$sql = "SELECT * FROM products";
$res = mysql_query($sql) or die (mysql_error());

if (mysql_num_rows($res) != 0) :
while ($row = mysql_fetch_assoc($res)) :
echo "<tr>";
echo "<td> . $row['id'] . </td>";
echo "<td> . $row['artikelnummer_fabrikant'] . </td>";
and so on
echo "</tr>";
endwhile;

echo "</table>";
echo "</p>";

endif; 
```

现在我想用标签选择和选项在此构建一个过滤器，这样当我选择选项品牌（merk）'windsor'时，它将显示所有带有品牌'windsor'的产品以及所有信息，例如breedte，hoogte , diepte（宽度、高度、深度）。

我得到了一段代码，它在选项菜单中为我提供了所有品牌（merk）：

```
function category_filter() {

echo "Merk: ";
echo "<select onchange=window.location = this.value>;";
$sql = "SELECT merk FROM products";
$res = mysql_query($sql) or die (mysql_error());

if (mysql_num_rows($res) !=0 ) :
while ($row = mysql_fetch_array($res, MYSQL_ASSOC)) :
echo "<option> . $row['merk'] . </option>";
endwhile;
endif;
echo "</select>"; 
```

当然，我对数据库中的每个项目都有 1 个。

我接下来要做的是以某种方式组合这两个代码，当我在选项菜单品牌（merk）中选择品牌（merk）'Windsor'时，它将显示所有带有品牌'Windsor'的产品+所有该产品的其他信息。

我挣扎了一周试图让这件事发生，但我无法让它像我想要的那样发展:(。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:24:35.803

好的，所以我通过编写以下代码了解了如何做到这一点：

```
 echo    "<form class='merk' action='index.php'>";
        echo        "<select name=merk>";
        echo            "<option value=''>Kies een merk</option>";

        while ($row_merk    =   mysqli_fetch_array($merk_query_selected)) :

        $filter =   $row_merk['merk'];

            if($filter == $merk) :
                echo    "<option value=" . urlencode($filter) . " selected='selected'>" . $filter . "</option>";
            else :
                echo    "<option value=" . urlencode($filter) . ">" . $filter . "</option>";
            endif;

        endwhile;

        echo        "</select>";        
        echo        "<input class='input-merk' type='submit' value='Filter op merk'>";
        echo    "</form><br />";

$('form').each(function() {
        var that = $(this);
        $.post(that.attr('action'), that.serialize());
    });</script> 
```

解码：

```
$merk                                       =   urldecode($_GET["merk"]); 
```

然后通过运行这个while循环来获取内容：

```
while ($row_merk    =   mysqli_fetch_array($merk_query_all)) :
            echo    $table_row;
            echo        $table_cell, $row_merk['id'] . $table_div_end;
            echo        $table_cell, $row_merk['artikelnummer_fabrikant'] . $table_div_end;
            echo        $table_cell, $row_merk['breedte'] . $table_div_end;
            echo        $table_cell, $row_merk['diepte'] . $table_div_end;
            echo        $table_cell, $row_merk['hoogte'] . $table_div_end;
            echo        $table_cell, $row_merk['extrainfo'] . $table_div_end;
            echo        $table_cell, $row_merk['afmeting'] . $table_div_end;
            echo        $table_cell, $row_merk['kleur'] . $table_div_end;
            echo        $table_cell, $row_merk['merk'] . $table_div_end;
            echo        $table_cell, $row_merk['serie'] . $table_div_end;
            echo        $table_cell, $row_merk['producttype'] . $table_div_end;
            echo        $table_cell, $row_merk['omschrijving'] . $table_div_end;
            echo        $table_cell, $row_merk['prijsfinal'] . $table_div_end;
            echo        $table_cellEnd, $row_merk['levertijd'] . $table_div_end;
            echo    $table_row_end;
        endwhile; 
```

现在我想做的是让它动态化，以便它可以同时过滤多个选择。

尽我所能，欢迎任何帮助！

[编辑] 发现这是如何工作的，但它仍然不是动态的。但是这个问题已经解决了，我会去网上看看如何使这个动态化。

# android - 如何填充布局中的剩余空间？

> ID：15480769
> 
> 赞同：0
> 
> 时间：2013-03-18T15:37:00.073
> 
> 标签：android, xml

我有这些按钮，如下图所示，我希望它们自行排列，以便它们从布局的顶部开始并在底部结束，并在它们之间自动排列空间。怎么做？

![在此处输入图像描述](../Images/67f646e48f9d2c2ff8cec9c7efe17fdc.png)

我的xml代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/background">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:orientation="vertical" >

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="360dp"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:gravity="center"
            android:orientation="vertical"
            android:paddingLeft="10dp"
            android:paddingRight="5dp" >

            <Button
                android:id="@+id/bA1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="A1"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bA2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="A2"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bA3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="A3"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bA4"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="A4"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bA5"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="A5"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bA6"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="A6"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bA7"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="A7"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bA8"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="A8"
                android:background="@drawable/buttons" />

        </LinearLayout>

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:gravity="top"
            android:orientation="vertical"
            android:paddingLeft="5dp"
            android:paddingRight="10dp" >

            <Button
                android:id="@+id/bB1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/buttons"
                android:text="B1" />

            <Button
                android:id="@+id/bB2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="B2"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bB3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="B3"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bB4"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="B4"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bB5"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="B5"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bB6"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="B6"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bB7"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="B7"
                android:background="@drawable/buttons" />

            <Button
                android:id="@+id/bB8"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="B8"
                android:background="@drawable/buttons" />

        </LinearLayout>

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:42:27.513

使用重量。下面是一些示例代码。

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_centerHorizontal="true"
    android:orientation="vertical"
    android:padding="48dp"
    android:weightSum="4" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:text="button 1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:text="button 2" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:text="button 3" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:text="button 4" />
</LinearLayout> 
```

代码`android:weightSum="4"`会说使用 4 的“权重”，这里的每个孩子使用该权重中的 1 个，即概率值 (25%)。您可以更改 weightSum 和每个孩子的重量，从而给每个孩子一个百分比宽度或高度。使用 0dp 来操作尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:51:33.900

试试这个..它对我有用。

![在此处输入图像描述](../Images/95f37799e0a57b06d1edfc21751e6873.png)

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:baselineAligned="false"
    android:orientation="horizontal"
    android:layout_weight="8" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical"
        android:paddingLeft="10dp"
        android:paddingRight="5dp"
        android:weightSum="8" >

        <Button
            android:id="@+id/bA1"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="A1" />

        <Button
            android:id="@+id/bA2"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="A2" />

        <Button
            android:id="@+id/bA3"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="A3" />

        <Button
            android:id="@+id/bA4"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="A4" />

        <Button
            android:id="@+id/bA5"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="A5" />

        <Button
            android:id="@+id/bA6"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="A6" />

        <Button
            android:id="@+id/bA7"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="A7" />

        <Button
            android:id="@+id/bA8"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="A8" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical"
        android:paddingLeft="5dp"
        android:paddingRight="10dp"
        android:weightSum="8" >

        <Button
            android:id="@+id/bB1"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="B1" />

        <Button
            android:id="@+id/bB2"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="B2" />

        <Button
            android:id="@+id/bB3"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="B3" />

        <Button
            android:id="@+id/bB4"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="B4" />

        <Button
            android:id="@+id/bB5"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="B5" />

        <Button
            android:id="@+id/bB6"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="B6" />

        <Button
            android:id="@+id/bB7"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="B7" />

        <Button
            android:id="@+id/bB8"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:background="@android:drawable/dialog_frame"
            android:text="B8" />
    </LinearLayout>
</LinearLayout>
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:orientation="horizontal"
    android:background="@android:drawable/dark_header"
    android:layout_weight="1" /> 
```

现在它看起来像我也添加了页眉和页脚。

![在此处输入图像描述](../Images/b26934de38740a768af35eca15dc778e.png)

# android - Android中从左到右的无缝活动过渡动画

> ID：15480770
> 
> 赞同：8
> 
> 时间：2013-03-18T15:37:05.133
> 
> 标签：android, animation, android-activity, android-animation, transition

我有两个活动，我希望当用户在第一个活动上触摸一个按钮时，新活动从左侧滑入并向右移动，而第一个活动也一样，它向右移动并滑出，所以它会产生一种效果，即新活动将旧活动推到右侧并替换它。

为此，我编写了以下 XML：

**在动画中**

```
<?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
    android:fromXDelta="-100%"
    android:toXDelta="0"
    android:duration="1250" />
 </set> 
```

**出动画**

```
<?xml version="1.0" encoding="utf-8"?>
   <set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
    android:fromXDelta="0"
    android:toXDelta="-100%"
    android:duration="1250" />
  </set> 
```

我在新活动的 onCreate 方法中调用该`overridePendingTransition(R.anim.anim_in,R.anim.anim_out);`函数。在产生的效果中，新活动正确地从左向右移动，但第一个旧活动向相反方向移动；它向左移动。我想恢复第一个活动的移动方向。我该怎么做，是否有用于此目的的 XML 属性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T15:42:17.990

改变

```
android:toXDelta="-100%" 
```

到

```
android:toXDelta="100%" 
```

在出动画。

# c# - 如何序列化-反序列化 3 种对象类型中的任何一种，其中一种包含抽象类？

> ID：15480780
> 
> 赞同：0
> 
> 时间：2013-03-18T15:37:39.323
> 
> 标签：c#, .net, json.net

我通过网络发送 3 个 .net 对象：

```
 - List<int>
 - List<ParentObject>
 - string 
```

这就是我序列化的方式（所有类型都相同）：

```
JsonSerializerSettings JSsettings = new JsonSerializerSettings
        {
            TypeNameHandling = TypeNameHandling.Arrays
        };

        string message = JsonConvert.SerializeObject(listOfParents, JSsettings);
        //listOfParents is  of type List<ParentObject> 
```

ParentObject 是一个抽象类，有两个子类。它有一个属性来获取它代表的子类型。

```
public enum EntityType {Child1, Child2};

class ParentObject
{
  public EntityType et { get; set; }
  //..other members
} 
```

我想根据收到的 3 个对象中的哪一个来调用 3 个不同的函数。

```
Object genericObject = JsonConvert.DeserializeObject(message, new JsonSerializerSettings
            {
                TypeNameHandling = TypeNameHandling.Auto
            });

        if (genericObject is List<int>)
        {
          List<int> myList= (List<int>)genericObject;
          myfunction1(myList);
        }
        if (genericObject is List<ParentObject>)
        {
         //etc.. 
```

ParentObject 导致 DeserializeObject() 出现问题，因为它说“无法创建 ParentObject 类型的实例。类型是接口或抽象类，无法实例化”。所以我想我可能需要在[http://james.newtonking.com/projects/json/help/index.html?topic=html/CustomCreationConverter.htm使用 CustomCreationConverter](http://james.newtonking.com/projects/json/help/index.html?topic=html/CustomCreationConverter.htm)

这仍然不能解决我的问题，因为 CustomCreationConverter在反序列化**期间**需要该类型，而我直到反序列化**之后**才检查类型。

有什么解决问题的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:43:56.270

如果我使用这样定义的对象：

```
public enum EntityType { Child1, Child2 };

abstract class ParentObject
{
    public EntityType et { get; set; }
}

class ChildClass : ParentObject
{
    public int ChildClassProp { get; set; }

    public ChildClass()
    {
        this.et = EntityType.Child1;
    }
}

class ChildClass2 : ParentObject
{
    public int ChildClass2Prop { get; set; }

    public ChildClass2()
    {
        this.et = EntityType.Child2;
    }
} 
```

然后我可以愉快地将派生类（`ChildClass`和`ChildClass2`）反序列化为`ParentObject`：

```
JsonSerializerSettings JSsettings = new JsonSerializerSettings
{
    TypeNameHandling = TypeNameHandling.Objects
};

List<ParentObject> list = new List<ParentObject>();
list.Add(new ChildClass() { ChildClassProp = 1 });
list.Add(new ChildClass2() { ChildClass2Prop = 2 });

string message = JsonConvert.SerializeObject(list,
      Newtonsoft.Json.Formatting.Indented, JSsettings);

list = JsonConvert.DeserializeObject<List<ParentObject>>(message, JSsettings); 
```

哪里`message`看起来像这样：

```
[
  {
    "$type": "ConsoleApplication4.ChildClass, ConsoleApplication4",
    "ChildClassProp": 1,
    "et": 0
  },
  {
    "$type": "ConsoleApplication4.ChildClass2, ConsoleApplication4",
    "ChildClass2Prop": 2,
    "et": 1
  }
] 
```

这个关键是`TypeNameHandling = TypeNameHandling.Auto`同时用于序列化和反序列化。使用`TypeNameHandling.Arrays`会创建如下所示的消息：

```
{
  "$type": "System.Collections.Generic.List`1[[ConsoleApplication4.ParentObject, ConsoleApplication4]], mscorlib",
  "$values": [
    {
      "ChildClassProp": 1,
      "et": 0
    },
    {
      "ChildClass2Prop": 2,
      "et": 1
    }
  ]
} 
```

请注意，不包括列表项的类型，仅包括列表的类型，因此您得到的错误。

**编辑：**

我认为让这个工作以你想要的方式工作的最简单方法是定义一个像这样的简单类，它充当你正在序列化的对象的薄包装器：

```
class ObjectContainer
{
    public object Data { get; set; }
} 
```

然后代码将如下所示（注意对 的更改`TypeNameHandling.Auto`）：

```
JsonSerializerSettings JSsettings = new JsonSerializerSettings
{
    TypeNameHandling = TypeNameHandling.Auto
};

List<ParentObject> list = new List<ParentObject>();
list.Add(new ChildClass() { ChildClassProp = 1 });
list.Add(new ChildClass2() { ChildClass2Prop = 2 });

ObjectContainer container = new ObjectContainer()
{
    Data = list
};

string message = JsonConvert.SerializeObject(container,
      Newtonsoft.Json.Formatting.Indented, JSsettings);

var objectContainer = JsonConvert.DeserializeObject<ObjectContainer>(message, JSsettings);

if (objectContainer.Data is List<int>)
{
    Console.Write("objectContainer.Data is List<int>");
}
else if (objectContainer.Data is List<ParentObject>)
{
    Console.Write("objectContainer.Data is List<ParentObject>");
}
else if (objectContainer.Data is string)
{
    Console.Write("objectContainer.Data is string");
} 
```

我采用这种方法的原因是 Json.Net 将负责几乎所有的工作。简单地调用非泛型`JsonConvert.DeserializeObject`方法就可以了，但是你需要做额外的工作，因为这个方法返回的是 a `JContainer`，而不是 a `object`。

# string - 如何在 TCL 中检测字符串中的“ÿ”？

> ID：15480782
> 
> 赞同：0
> 
> 时间：2013-03-18T15:37:43.613
> 
> 标签：string, parsing, unicode, tcl

我正在查询一台旧的 Tektronix 11801B 采样示波器。当我查询任何内容时，它总是返回我的结果，然后是一个设备上的“ÿ”或另一台设备上的“ÿ..”（均为同一型号）的无尽字符串。因此，我决定在查询时点击“ÿ”之前阅读所有内容。

以下是我尝试过的两种方法：

```
# Issue command
puts ${ChannelId} ${Command}

# Set loop variables
set Result [list]
set Byte [read ${ChannelId} 1]
set BadByte ÿ

# Loop until BadByte is found
while {![string equal -nocase ${Byte} ${BadByte}]} {

    # Append good bytes to a list
    lappend Result ${Byte}

    # Read next byte
    set Byte ::visa::read ${ChannelId} 1]
}

# Join and return result list
return [join ${Result}] 
```

和：

```
# Set loop variable
set Result [list]

# Read channel 1 byte at a time until ÿ is found
while {![string equal -nocase [set Character [read ${ChannelId} 1]] "ÿ"]} {

    # Append non ÿ characters to a list
    lappend Result ${Character}
}

# Join the result and return it
return [join ${Result}] 
```

在这两种情况下，我的循环总是返回 true 并变为无限。但是，如果我逐行运行命令行，希望一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:15:03.873

我相信问题在于您*如何*获取文件。默认情况下，它使用`encoding system`，如果您将文件保存为[UTF-8](http://en.wikipedia.org/wiki/UTF-8) ，这是一个问题。你可以看到 Tcl 如何看到`ÿ`char；您可以尝试以下脚本：

```
binary scan ÿ c* bytes
puts $bytes 
```

如果输出不是`-1`，那么情况确实如此。

避免这种情况的最好方法是`\xff`改用（编码 ASCII 范围之外的每个字符）。这是我不仅推荐给 Tcl 的东西，也推荐给许多其他语言，如 Java、C# 等。

因此，您有以下选择：

*   `\xff`改为使用`ÿ`
*   使用系统编码保存您的文件（在 Tcl 中使用正确的编码打开两个文件 & fcopy 可以完成这项工作）
*   使用正确的编码获取文件。如果使用 tclsh 调用，请使用`tclsh -encoding utf-8 yourfile.tcl`. 如果你使用`source`命令，那么`source -encoding utf-8 yourfile.tcl`

如果所有这些都不起作用，您可以尝试对`binary scan`输入进行 a`ÿ`并查看它的外观。

# .net - asp.net MVC 参数总是获取默认值

> ID：15480783
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:37:44.500
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4

考虑这个控制器动作：

```
public ActionResult List(int userid = 0)
{
    var campaigns = db.Dyn_Campaigns.Where(c => c.UserID == userid);
    return View(campaigns.ToList());
} 
```

模型中的 UserID 字段是一个 int。

这是视图：

```
@model IEnumerable<KnockoutExample.Models.Dyn_Campaigns>

@{
    ViewBag.Title = "List";
 }

<h2>List</h2>

<p>
@Html.ActionLink("Create New", "Create")
</p>
<table>
<tr>
    <th>
        @Html.DisplayNameFor(model => model.DateCreation)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.CompanyID)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.UserID)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.Name)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.Descr)
    </th>
    ...
</tr>

@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.DateCreation)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.CompanyID)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.UserID)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Descr)
    </td>
    ...
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
        @Html.ActionLink("Details", "Details", new { id=item.ID }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.ID })
    </td>
</tr>
}

</table> 
```

这是我在 global.asax 中的自定义路由：

```
 config.Routes.MapHttpRoute("MyRoute", "{controller}/{action}/{userid}",
  new { controller = "Campaigns", action = "List", userid = UrlParameter.Optional }); 
```

问题是`userid`参数总是得到默认值（0）。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:44:07.690

因为`UrlParameter.Optional`不是int。`userid`必须是 int 否则找不到用户 ID。例如：在您的控制器中：

```
public ActionResult List(int userid = 0)
{
...
} 
```

在您的模型中（例如）

```
Myclass{
    int id;
} 
```

在您看来：

```
 @model MyApp.Model.MyClass
 ...
    new { controller = "Campaigns", action = "List", userid =  model.id}); 
```

在 Asp.net MVC 4 中，您的视图中的参数和您的 controleur 必须是相同的类型和名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:31:38.953

更改您的 registerRoutes 如下

```
public static void RegisterRoutes(RouteCollection routes)
            {
                routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
     routes.MapRoute("MyRoute", "{controller}/{action}/{userid}",
                    new { controller = "Campaigns", action = "List", userid = UrlParameter.Optional });    

                routes.MapRoute(
                    name: "Default",
                    url: "{controller}/{action}/{id}",
                    defaults: new { controller = "Home", action = "Index", id =  UrlParameter.Optional }
                );

            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T06:48:51.063

很好地改变参数：

```
public ActionResult List(int userid = 0) 
```

到：

```
public ActionResult List(int id) 
```

解决了这个问题。但我仍然不明白为什么该方法不接受相同类型但名称不同的参数。

RouteConfig 如下所示：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id =  UrlParameter.Optional }
        );

        routes.MapRoute("MyRoute", "{controller}/{action}/{userid}",
            new { controller = "Campaigns", action = "List", userid = UrlParameter.Optional });
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-18T15:53:31.183

因为如果缺少 userid 作为参数，则 userid 将获取 0 它应该可以为空

```
 public ActionResult List(int? userid)
{
var campaigns = db.Dyn_Campaigns.Where(c => c.UserID == userid);
return View(campaigns.ToList());
} 
```

根据您的编辑进行编辑

您正在传递参数名称 id，它应该是 userid

```
@Html.ActionLink("Edit", "Edit", new { userid=item.ID }) |
    @Html.ActionLink("Details", "Details", new { userid=item.ID }) |
    @Html.ActionLink("Delete", "Delete", new { userid=item.ID }) 
```

# java - Android - 关于 System-UI 的问题

> ID：15480787
> 
> 赞同：0
> 
> 时间：2013-03-18T15:37:51.680
> 
> 标签：java, android, system

所以我查看了 CM10.1(4.2.2) 中的设置，我看到了一个使用颜色选择器更改软键颜色的选项。

现在我正在开发一个应用程序，虽然做这样的事情会很酷。但我不明白它是如何做到的。它如何使用代码更改颜色，为什么不需要重新启动？

另外，我是否也可以使用类似的过程来更改我的应用程序中 Wi-Fi 的科罗拉多州？怎么会这样。我对你如何做到这一点很感兴趣，因为它会成为我的应用程序的一个很好的补充。

我发现我不是唯一一个对此感到疑惑的人，我认为这是一个很好的问题。如果有人可以，您能否解释一下可能发生的事情，然后解释我该怎么做，或者给我一个链接到一些代码来看看？

任何事情都会有所帮助。我很好奇，但很困惑。我认为答案不仅可以帮助我，还可以帮助许多其他人。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:41:35.857

简短回答：您不能使用公共 SDK。

长答案：这不是股票 AOSP 的功能。Cyanogenmod 是经过大量修改的 Android 版本，此类功能是在 ROM 级别而非应用程序级别实现的。如果您想包含此功能，则必须在源代码级别自定义 Android，并为您想要的每台设备构建系统映像。

（[来源 - 谷歌员工](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/wroaPcuqmRM)）

# api - 谷歌日历智能工作表同步已禁用

> ID：15480791
> 
> 赞同：1
> 
> 时间：2013-03-18T15:38:05.440
> 
> 标签：api, sync, google-calendar-api

以下是谷歌日历设置页面抛出的错误。尽管在 .php 文件中提到了所有凭据，例如电子邮件 ID 和密码，但这个 API 无法正常工作，我怀疑可能是因为这个问题，日历可能无法正常工作。

**如何解决以下问题？**

**错误信息的屏幕截图**

![在此处输入图像描述](../Images/f45618396102f72477f4d2b98af37504.png)

**错误信息 ：**

> Smartsheet 中的事件：注意：此 Google 日历的同步功能已被禁用，因为关联的 Smartsheet 已被删除，或者您的权限已被删除。

# css - 如何在液体布局中保持两个固定宽度的 div 等距

> ID：15480794
> 
> 赞同：0
> 
> 时间：2013-03-18T15:38:09.593
> 
> 标签：css, layout, positioning, liquid

我有一个液体布局页面，该页面具有正文集的最大和最小宽度（分别为 1260 像素和 960 像素）。我有一个左侧边栏，占据左侧 25%，内容占据右侧 75% 的屏幕。在内容中，我放置了两个带有固定宽度图片（300 像素 x 225 像素）的 div 容器，每个容器下方都有一些文本。

我想做的是让这些 div 框保持它们自己的静态宽度（300px，由文本上方图片的宽度决定），但为了论证的缘故，能够保持 50px 内联并始终位于中心（将 50 像素分开）不管我在什么浏览器中（1260 或 960 像素，或介于两者之间）。我想要这样做的原因是，如果我使用边距来分隔它们，它们只会在一个浏览器宽度中看起来“居中”（再次，在它们之间设置 50px），并且在它们的布局中不是流动的。

JSFiddle：http: [//jsfiddle.net/fpN5t/1/](http://jsfiddle.net/fpN5t/1/)

如果我不能很好地解释自己，请告诉我！

非常感谢你。

```
<div id="content">
    <div id="upper-left-box">
        <img class="boxed-content-image" src="images/Leaf 300x225px.jpg" alt="" />
        <p>Example text example text example text example text example text example text example text example text example text</p>
    </div>
    <div id="upper-right-box">
        <img class="boxed-content-image" src="images/Lens 300x225px.jpg" alt="" />
        <p>Example text example text example text example text example text example text example text example text example text</p>
    </div>
     <h1 class="first-content-heading">Heading 1</h1>

    <p>Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here.</p>
    <p>&nbsp;</p>
     <h2>Heading 2</h2>

    <p>Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here.</p>
    <p>&nbsp;</p>
     <h3>Heading 3</h3>

    <p>Your text goes here. Your text goes here. Your text goes here. Your text goes here. Your text goes here.</p>
    <p>&nbsp;</p>
</div> 
```

> ```
> #content {
>     width: 75%;
>     float: left;
>     margin: 0;
>     background: #FFF;
> }
> #upper-left-box {
>     width: 300px;
>     margin: 0 auto;
>     position: relative;
>     text-align: center;
>     float: left;
> }
> .boxed-content-image {
>     width: 300px;
>     height: 225px;
> }
> #upper-right-box {
>     width:300px;
>     margin: 0 auto;
>     position: relative;
>     text-align: center;
>     float: left;
> }
> .first-content-heading {
>     clear: both;
> } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:51:13.743

您可以通过在它们周围放置一个带有自动边距的容器来使上面的框居中。然后，您可以在框之间放置 50px 的边距，以获得您正在寻找的效果”

[http://jsfiddle.net/fpN5t/2/](http://jsfiddle.net/fpN5t/2/)

```
<div class="upper-boxes">

    <div id="upper-left-box">
        <img class="boxed-content-image" src="images/Leaf 300x225px.jpg" alt="" />
        <p>Example text example text example text example text example text example text example text example text example text</p>
    </div>
    <div id="upper-right-box">
        <img class="boxed-content-image" src="images/Lens 300x225px.jpg" alt="" />
        <p>Example text example text example text example text example text example text example text example text example text</p>
    </div>

</div> 

.upper-boxes{ width: 650px; margin: 0 auto; }

#upper-left-box {
    width: 300px;
    margin:0 50px 0 0;
    position: relative;
    text-align: center;
    float: left;
}
.boxed-content-image {
    width: 300px;
    height: 225px;
}
#upper-right-box {
    width:300px;
    position: relative;
    text-align: center;
    float: left;
} 
```

希望我正确理解了这个问题，如果没有请指出。

# java - protobuf RPC 结构（嵌入式 ARM）

> ID：15480797
> 
> 赞同：3
> 
> 时间：2013-03-18T15:38:16.767
> 
> 标签：java, c, embedded, rpc, protocol-buffers

我需要在嵌入式手臂系统中使用 protobuf。需要纯C的支持。该项目将使用客户端-服务器架构（C服务器与java、Python客户端）。该项目需要考虑扩展协议的可能性。例如 - 此类请求将被发送到服务器：

```
read <address> <type> <count> [<filename>]
write <address> <type> <value>
... 
```

其中地址、长度、类型、值 - 必需；文件名 - 可选。请求必须包含以下命令之一：write、read ...（但不超过一个）。我认为应该是这样的：

```
message WriteRequest {
    enum ValueType {
        INT8 = 0 [(string)="int8"];
        INT16 = 1 [(string)="int16"];
        INT32 = 2 [(string)="int32"];
        INT64 = 3 [(string)="int64"];
        FLOAT32 = 4 [(string)="float32"];
        FLOAT64 = 5 [(string)="float64"];
        BYTEARRAY = 6 [(string)="bytearray"];
    }

    required uint64 address = 1;

    required ValueType value_type = 2 [default = INT32];
    optional int32 value_int8 = 3;
    optional int32 value_int16 = 4;
    optional int32 value_int32 = 5;
    optional int32 value_int64 = 6;
    optional float value_float32 = 7;
    optional double value_float64 = 8;
    optional bytes value_bytearray = 9;
}
...
message Request {
    enum RequestType {
        READ_REQUEST = 1;
        WRITE_REQUEST = 2;
        ...
    }

    required RequestType request_type = 1;
    optional ReadRequest read = 3;
    optional WriteRequest write = 4;
    ...
} 
```

我认为在这种情况下最好的选择 - nanopb ( [http://koti.kapsi.fi/jpa/nanopb/](http://koti.kapsi.fi/jpa/nanopb/) )。在我看来，代码 nanopb 写得很好。

据我了解，nanopb 不支持自描述消息。或任何反射方法。这就是我选择这种结构的原因。**这种结构是否最适合这种情况？将来会不会有问题？是否需要为新命令扩展协议（例如：）`listStatus <id> <verbose>`？**

**如果用作服务器 nanopb（例如：[http](http://code.google.com/p/nanopb/source/browse/example/server.c) ://code.google.com/p/nanopb/source/browse/example/server.c ），我可以用作客户端吗？（据我了解，nanopb 不支持 .proto 中的服务。）**：

```
service MyService {
  rpc Search (Request) returns (Response);
} 
```

PS：值得用protobuf-c吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:32:41.060

自描述消息更像是一种特殊情况，即使它们受到支持，我认为您也不应该在此处使用它们。Protocol Buffers 对以后扩展消息有很好的支持，你可以为新的请求类型添加新的可选字段。

您不一定需要那些 ValueType 和 RequestType 字段。相反，您可以检查每个字段是否存在（has_value_int8 等）。

然后，您的请求消息将使用“[联合消息](https://developers.google.com/protocol-buffers/docs/techniques#union)”设计模式。如果您希望节省内存，可以使用 nanopb 回调机制将函数绑定到每个请求类型。

# javascript - 我在没有任何用户操作的情况下显示 javascript 输出时遇到问题

> ID：15480801
> 
> 赞同：0
> 
> 时间：2013-03-18T15:38:27.467
> 
> 标签：javascript, html

这就是问题：如果一个整数大于 1 并且只能被 1 和自身整除，则称它为素数。例如，2、3、5 和 7 是质数，但 4、6、8 和 9 不是。

a) 编写一个判断一个数是否为素数的函数。b) 在一个脚本中使用这个函数来确定并打印 1 到 10000 之间的所有素数。

在确定找到所有素数之前，您真的需要测试这 10000 个数字中的多少？在 a 中显示结果`<textrarea>`。

这是我的代码：

```
 function isPrime(n)
    {
        boolean prime=true;
            if(n==1 || n==0)
            {

                prime= false;
            }

            if(n==2)
            {
                prime= true;
            }
            else
            {
                for(int i=2;i<n;i++)
                {
                    if(n%i==0)
                    {
                        prime= false;
                    }
                }
            }
            return prime;
    }
    function printPrimes()
    {
        document.writeln("<textarea rows="10" cols="15">");
        for(var i=0; i<=1000; i++)
        {
            if(isPrime(i)==true)
            {
                document.writeln("<p>" + i + "</p>");
            }
        }
        document.writeln("</textarea>");
    }
    printPrimes(); 
```

这是我的html：

```
<!DOCTYPE html>
<html>
    <head>
        <script src="prime.js" type="text/javascript"> </script>
    </head>
    <body>
        <h1> Prime numbers between 1 and 1000 are: </h1>
    </body> 
```

当我在 chrome 上打开 html 文件时，只有标题显示脚本似乎没有运行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:41:16.110

您正在将脚本导入到 中`<head>`，这就是它的输出所在。尝试将其移至`<body>`.

这可能是寻找素数最慢的方法。

*编辑*——另一个问题是：

```
 for(int i=2;i<n;i++) 
```

JavaScript中没有`int`关键字 - 它是`var`. 这将导致语法错误，该错误将显示在错误控制台中。也没有`boolean`关键字（“素数”的声明）。在进行任何 HTML/JavaScript 开发时，保持错误控制台打开是很重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:41:26.857

这是因为您正在尝试将 写入`<textarea>`元素`<head>`。尝试在`<body>`.

# c++ - 从精明的边缘检测器中分离边缘

> ID：15480803
> 
> 赞同：0
> 
> 时间：2013-03-18T15:38:30.010
> 
> 标签：c++, opencv, image-processing, edge-detection

我想获得一组由精明边缘检测算法产生的所有 8 连接路径，以便我可以独立分析它们。有没有办法使用 OpenCV 或任何其他 C++ 库而无需自己实现它？

我已经检测到了边缘，我需要在检测到的边缘上找到 8 个连接的路径。

# ios - 在 Mobile Safari 上的 iFrame 中显示 PDF 的问题

> ID：15480804
> 
> 赞同：50
> 
> 时间：2013-03-18T15:38:30.887
> 
> 标签：ios, ipad, pdf, iframe, mobile-safari

在我们的 Web 应用程序中，我们`iframe`使用以下代码行显示 PDF 文档：

```
<iframe id="iframeContainer" src="https://example.com/pdfdoc.pdf" 
                             style="width:100%; height:500px;"></iframe> 
```

这在所有主要的桌面浏览器中都可以正常工作，PDF 的宽度可以缩放以适应 iFrame 的范围，垂直滚动条可以查看文档中的所有页面。

但目前我无法让 PDF 在 Mobile Safari 中正确显示。在这种情况下，只有 PDF 的左上部分是可见的，没有任何水平或垂直滚动​​条来查看文档的其余部分。

有人知道我在 Mobile Safari 中解决此问题的方法吗？

**更新 - 2013 年 3 月**

经过数小时的搜索和实验，我可以得出结论，这个问题真是一团糟！有很多解决方案，但每一个都远非完美。我建议任何其他为此苦苦挣扎的人参考“ [iPad 问题上的 iFrame 策略](https://blogs.magnolia-cms.com/christopher-zimmermann/detail~&strategies-for-the-iframe-on-the-ipad-problem~.html)”。对我来说，我需要写下这个并为我们的 iPad 用户寻找另一种解决方案。

**更新 - 2015 年 5 月**

只是对这个问题的快速更新。最近开始使用 Google Drive 查看器，基本解决了原来的问题。只需提供 PDF 文档的完整路径，Google 就会返回您 PDF 的 HTML 格式解释（不要忘记设置`embedded=true`）。例如

[https://drive.google.com/viewerng/viewer?embedded=true&url=www.analysis.im%2Fuploads%2Fseminar%2Fpdf-sample.pdf](https://drive.google.com/viewerng/viewer?embedded=true&url=www.analysis.im%2Fuploads%2Fseminar%2Fpdf-sample.pdf)

我将其用作较小视口的后备，并将上述链接嵌入到我的`<iframe>`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-13T17:58:55.360

我找到了一个新的解决方案。从 iOS 8 开始，移动 Safari 将 PDF 呈现为框架内 HTML 文档中的图像。然后，您可以在 PDF 加载后调整宽度：

```
<iframe id="theFrame" src="some.pdf" style="height:1000px; width:100%;"></iframe>
<script>
document.getElementById("theFrame").contentWindow.onload = function() {
    this.document.getElementsByTagName("img")[0].style.width="100%";
};
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-09T18:28:02.007

try`pdf.js`也应该在移动 safari 中工作：[https ://github.com/mozilla/pdf.js/](https://github.com/mozilla/pdf.js/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-03T23:35:59.560

我的解决方案是在移动设备上使用谷歌驱动器，并在大屏幕的 iframe 中嵌入标准 pdf。

```
.desktop-pdf {
    display: none;
}

.mobile-pdf {
    display: block;
}
@media only screen  and (min-width : 1025px) {

  .mobile-pdf {
      display: none;
  }

  .desktop-pdf {
      display: block;
  }
}

    <div class="outer-pdf" style="-webkit-overflow-scrolling: touch; overflow: auto;">
        <div class="pdf">
            <iframe class="desktop-pdf" scrolling="auto" src="URL HERE" width="100%" height="90%" type='application/pdf' title="Title">
                <p style="font-size: 110%;"><em>There is content being displayed here that your browser doesn't support.</em> <a href="URL HERE" target="_blank"> Please click here to attempt to view the information in a separate browser window. </a> Thanks for your patience!</p>
            </iframe>
            <iframe class="mobile-pdf" scrolling="auto" src="https://drive.google.com/viewerng/viewer?embedded=true&url=URL HERE" width="100%" height="90%" type='application/pdf' title="Title">
                <p style="font-size: 110%;"><em>There is content being displayed here that your browser doesn't support.</em> <a href="URL HERE" target="_blank"> Please click here to attempt to view the information in a separate browser window. </a> Thanks for your patience!</p>
            </iframe>
        </div>
    </div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-25T16:03:34.683

```
<iframe
              id="ifamePdf"
              type="application/pdf"
              scrolling="auto"
              src={"https://docs.google.com/viewerng/viewer?url="+"https://example.com/pdfdoc.pdf"+"&embedded=true"}
              height="600"
            ></iframe> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-04T13:59:18.213

为了在 2021 年使用谷歌预览版，我必须执行以下操作。对上面的发布方式进行了一些小的调整。

```
"https://drive.google.com/viewerng/viewer?embedded=true&url=" + encodeURIComponent(pdfUrl) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-04-18T15:45:09.083

我遇到了同样的问题。我发现通过将焦点设置在输入上（不适用于 div 标签），会显示 pdf。

我通过添加一个隐藏的输入来修复它并将焦点设置在它上面。这种解决方法不会减慢应用程序的速度。

```
<html><head>
<script>
    $(document).ready(function () {
        $("#myiframe").load(function () { setTimeout(function () { $(".inputforfocus").focus(); }, 100); });
    });
</script></head>
<body>
<div class="main">
    <div class="level1">Learning</div>
    <input type="hidden" class="inputforfocus">
    <div>
        <iframe src="PDF/mypdf.pdf" frameborder="0" id="myiframe" allow="fullscreen"></iframe>
    </div>
</div>
</body>
</html> 
```

# c - 假设带有“text/*”的 HTTP 数据包永远不会有“\0”，是否总是安全的？

> ID：15480805
> 
> 赞同：2
> 
> 时间：2013-03-18T15:38:32.260
> 
> 标签：c, http, network-programming, c-strings

我正在编写一个使用 HTTP 进行通信的嵌入式 C 程序。我已经让它工作了，但我之前没有做太多的网络工作，只是想确保我没有做出任何非常糟糕的假设。

我可以安全地假设任何具有 Content-Type 的非恶意 HTTP 数据包中`text/<something>`都不会包含零吗？我的代码中有很多地方都依赖于字符串末尾的 '\0'。我确实有一些保护措施，这些保护措施总是在给定的 Content-Length 之后停止，并且永远不会溢出我正在写入的缓冲区，但我想尽可能确保低级别的东西有效，因为一旦这些设备发货，我将无法更新这些部件。

另外，谁能指出我在网络编程中有共同问题的任何资源？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T15:42:02.653

不，即使您可以保证消息符合要求，这也不是一个安全的假设。例如，UTF-16 文本几乎肯定会包含 NUL 字节。

此外，即使您的客户端不接受，配置不佳的 Web 服务器（其中有很多）也可能会提供 gzip 数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T15:41:31.257

不，这不是一个安全的假设。

始终假设任意输入是恶意格式错误的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T15:44:13.940

不，这绝对是**不安全**的假设。

您甚至无法知道用户正在使用网络浏览器。攻击者可以编写一个应用程序，该应用程序向您的应用程序发送任意数据，该数据看起来像是来自 Web 浏览器，但随后发送一个 nul 字符以使您的程序崩溃（或者更糟糕的是：利用缓冲区溢出）。

**永远不要相信用户数据！**

拥有高安全标准对于嵌入式设备编程尤为重要，因为这些设备上的软件通常在出厂后检测到漏洞时很难更新。

# r - 为类别构建具有总值、最大值、最小值、平均值和百分比的数据框

> ID：15480808
> 
> 赞同：2
> 
> 时间：2013-03-18T15:38:48.513
> 
> 标签：r

我的数据框有一个问题，其中个人 ID 相同，但在超市、健康、汽车等各种类别的费用不同。我的数据框是这样的：

```
Base=data.frame(ID=c("CED1","CED2","CED3","CED1","CED1","CED3","CED3","CED2","CED2","CED4"),Value=c(10,20,10,30,50,10,10,20,30,30),Categorie=c("Markets","Markets","Health","Cars","Cars","Health","Cars","Health","Cars","Markets"))

    ID   Value Categorie
1  CED1    10   Markets
2  CED2    20   Markets
3  CED3    10    Health
4  CED1    30      Cars
5  CED1    50      Cars
6  CED3    10    Health
7  CED3    10      Cars
8  CED2    20    Health
9  CED2    30      Cars
10 CED4    30   Markets 
```

你怎么能看到我有不同的ID和类别。我想要这个数据框中的指标在一个新的中，并且有这样的人：

```
ID   Total.Value   Max.Value  Min.Value  Average.Value  %Markets  %Health  %Cars
CED1     90           50         10           30           11%       0%      89%
CED2     70           30         20           23.33        28.5%    28.5%   42.8%
CED3     30           10         10           10           33.3%    33.3%   33.3%
CED4     30           30         30           30           100%      0%       0% 
```

我正在尝试使用 plyr 开发这个数据框，但我没有得到正确的指标。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:50:52.433

这是一个`ddply`解决方案。

```
library(plyr)
ddply(Base, .(ID), summarise, Total = sum(Value),
      Max.Value = max(Value),
      Min.Value = min(Value),
      Average.Value = mean(Value),
      "%Markets" = sum(Value[Categorie == "Markets"])/sum(Value) * 100,
      "%Health" = sum(Value[Categorie == "Health"])/sum(Value) * 100,
      "%Cars" = sum(Value[Categorie == "Cars"])/sum(Value) * 100) 
```

结果：

```
 ID Total Max.Value Min.Value Average.Value  %Markets  %Health    %Cars
1 CED1    90        50        10      30.00000  11.11111  0.00000 88.88889
2 CED2    70        30        20      23.33333  28.57143 28.57143 42.85714
3 CED3    30        10        10      10.00000   0.00000 66.66667 33.33333
4 CED4    30        30        30      30.00000 100.00000  0.00000  0.00000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:58:21.157

这是一个`data.table`解决方案：

```
require(data.table)
dt <- data.table(Base, key="ID")
dt[, as.list(c(total=sum(Value), max=max(Value), 
    min=min(Value), mean=mean(Value), 
    tapply(Value, Categorie, sum)/sum(Value) * 100)), 
by=ID]
#      ID total max min     mean     Cars   Health   Markets
# 1: CED1    90  50  10 30.00000 88.88889       NA  11.11111
# 2: CED2    70  30  20 23.33333 42.85714 28.57143  28.57143
# 3: CED3    30  10  10 10.00000 33.33333 66.66667        NA
# 4: CED4    30  30  30 30.00000       NA       NA 100.00000 
```

这里可以将NA替换为0。如果坚持`0`直接get而不是NA，那么：

```
dt[, {tt <- tapply(Value, Categorie, sum)/sum(Value); ## compute ratio for percentage
      tt[is.na(tt)] <- 0; 
      as.list(c(total=sum(Value),                     ## total
          summary(Value)[c(6,1,4)],                   ## max, min and mean
          tt* 100))                                   ## percentages
     }, 
by=ID]

#      ID total Max. Min.  Mean     Cars   Health   Markets
# 1: CED1    90   50   10 30.00 88.88889  0.00000  11.11111
# 2: CED2    70   30   20 23.33 42.85714 28.57143  28.57143
# 3: CED3    30   10   10 10.00 33.33333 66.66667   0.00000
# 4: CED4    30   30   30 30.00  0.00000  0.00000 100.00000 
```

在这里，我还展示了如何使用`summary`函数来获取一些值，而不是一一写入。

# html - 发送带有本地链接的 HTML 并通过 gmail 帐户接收

> ID：15480810
> 
> 赞同：0
> 
> 时间：2013-03-18T15:38:54.940
> 
> 标签：html, email, hyperlink, gmail

我需要创建 HTML 链接并将它们通过电子邮件发送给具有 gmail 帐户的其他用户。此 HTML 包含指向本地文件的链接（供内部使用，所有用户都可以访问本地文件）

我发送：

```
<a href="smb://server/folder/file.jpg">Mac OSX</a>
<a href="file:////server/folder/file.jpg">Windows</a>
<a href="file://///server/folder/file.jpg">Windows test</a> 
```

但是gmail不显示链接，只显示文本，我无法单击并转到文件。

我可以做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:41:12.693

Gmail 正在过滤掉这些链接，因为它们怀疑它们本质上是恶意的。通常电子邮件中的超链接指向网站，而不是本地网络文件。结果，它们看起来很可疑并被删除。

# java - For循环在字符串中搜索单词

> ID：15480811
> 
> 赞同：7
> 
> 时间：2013-03-18T15:38:58.647
> 
> 标签：java

我似乎无法在此方法中找到 for 循环所需的语法。我正在寻找遍历字符串中的单词`suit`。

编辑：需要注意的一点是 cardArray 是一个 ArrayList。

```
public String getSuit(int card){
    String suit = cardArray.get(card);
    for (String word : suit){
        if (word.contains("SPADES")){
            suit = "SPADES";            
        }
    }
    return suit;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T15:40:04.050

你可以使用

```
for (String word : suit.split(" ")) { 
```

拆分每个[空格字符 (U+0020)](http://www.fileformat.info/info/unicode/char/20/index.htm)。

或者：

```
for (String word : suit.split("\\s+")) { 
```

这会拆分每个空白字符序列（包括制表符、换行符等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T15:40:31.540

尝试在空格上拆分字符串：

```
String suit = cardArray.get(card);
for (String word : suit.split("\\s+")){
    if (word.contains("SPADES")){
        suit = "SPADES";            
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:43:56.527

为什么不将枚举用于西装，并将其添加到您的 Card 类或更多面向对象的东西中？您甚至可以拥有一个抽象类卡或接口卡，它可以让您在 Card 实例本身中添加所需的逻辑，而不是迭代进行字符串比较。

但是：[String.split(String regex)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)应该可以工作，只需选择适当的[正则表达式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#sum)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T15:54:39.490

如果您只想替换包含“SPADES”的字符串：

```
public String getSuit(int card){
    String suit = cardArray.get(card);
    if (suit.contains("SPADES")){
        cardArray.set(card, "SPADES");            
    }
    return suit;
} 
```

如果您想`suit`出于其他原因拆分字符串，请查看其他答案

# sql - 在聚合 SUM() 中计数

> ID：15480817
> 
> 赞同：1
> 
> 时间：2013-03-18T15:39:08.917
> 
> 标签：sql, sql-server-2008, count, sum, sql-function

我有一张有 1000 行的表。存在的列是 ID、DBID、TalkTime。

我在做：

```
SELECT DBID, SUM(TalkTime)
FROM Incoming_Calls
GROUP BY DBID 
```

这压缩到大约 18 行。

我想知道如何计算每个分组中存在的记录数。因此，例如 DBID 105 的总和为 526，由 395 条记录组成，DBID 104 的总和为 124，由分组期间的 241 条记录组成。

有任何想法吗？

使用 Microsoft SQL Server 2012。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:39:47.360

然后使用`COUNT()`

```
SELECT DBID, 
       COUNT(*) TotalRows, 
       SUM(TalkTime) TotalTalkTime
FROM   Incoming_Calls
GROUP  BY DBID 
```

*   [TSQL 聚合函数](http://msdn.microsoft.com/en-us/library/ms173454.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:49:25.033

```
Select DBID, SUM(TalkTime), COUNT(TalkTime) TalkTimeCount 
FROM Incoming_Calls 
GROUP BY DBID 
```

或者，如果您想包含空值计数，那么您可以这样做

```
Select DBID, SUM(TalkTime), @@ROWCOUNT 
FROM Incoming_Calls 
GROUP BY DBID 
```

# php - 在php中使用foreach进行计数器

> ID：15480818
> 
> 赞同：0
> 
> 时间：2013-03-18T15:39:10.863
> 
> 标签：php, wordpress, loops, foreach, count

我正试图让我的计数器，嗯，计数。我正在尝试使用以下内容在显示的每一秒帖子中添加一个类名（偶数）：

```
<?php
        global $paged;
        global $post;
        $do_not_duplicate = array();
        $categories = get_the_category();
        $category = $categories[0];
        $cat_ID = $category->cat_ID;
        $myposts = get_posts('category='.$cat_ID.'&paged='.$paged);
        $do_not_duplicate[] = $post->ID;
        $c = 0;
        $c++;
        if( $c == 2) {
            $style = 'even animated fadeIn';
            $c = 0;
        }
        else $style='animated fadeIn';
        ?>

<?php foreach($myposts as $post) :?>
   // Posts outputted here
<?php endforeach; ?> 
```

我只是没有得到`even`输出的类名。唯一输出的类名是`animated`和`FadeIn`类（来自我的 if 语句的 else 部分）现在添加到每个帖子中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:41:40.473

查看[模数运算符](http://php.net/manual/en/language.operators.arithmetic.php)

此外，将您的偶数/奇数支票移动到您的帖子循环中。

```
<?php $i = 0; foreach($myposts as $post) :?>
    <div class="<?php echo $i % 2 ? 'even' : 'odd'; ?>">
        // Posts outputted here
    </div>
<?php $i++; endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:43:17.713

从您的代码的这一部分：

```
 $c = 0;
    $c++;
    if( $c == 2) {
        $style = 'even animated fadeIn';
        $c = 0;
    }
    else $style='animated fadeIn'; 
```

您需要将增量和`if-else`块放在`foreach`循环内。像这样：

```
<?php foreach($myposts as $post) :
    $c++;
    if( $c % 2 == 0) {
        $style = 'even animated fadeIn';
        $c = 0;
    }
    else $style='animated fadeIn'; ?>
   // Posts outputted here
<?php endforeach; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:46:02.897

问题是您没有在 else 语句中将计数器设置回 2。

```
if( $c == 2) {
  $style = 'even animated fadeIn';
  $c = 0;
} else {
  $style='animated fadeIn';
  $c = 2;
} 
```

话虽如此，您也可以像其他人提到的那样使用模数，或者干脆这样做：

```
//outside loop
$c = 1;

//inside loop
if ($c==1)
  $style = 'even animated fadeIn';
else
  $style='animated fadeIn';
$c = $c * -1; 
```

甚至更短

```
//outside
$c = 1;

//inside
$style = (($c==1)?'even':'').' animated fadeIn';
$c = $c * -1; 
```

# c# - 无法使用 LINQPad 4 更新行

> ID：15480826
> 
> 赞同：2
> 
> 时间：2013-03-18T15:39:26.363
> 
> 标签：c#, linq, oracle, linq-to-sql, linqpad

我可以使用 IQ 的直接接口从 Oracle 数据库中很好地查询行，但是在进行简单更新时遇到了麻烦。我想知道我是否做错了什么，或者 IQ 是否无法处理我的特定 Oracle 表。

我的表有一个主键 NUMBER(22)，这导致实体的 Int64。该查询有两个数字列，我正在更新的列是一个 CHAR，它是实体中的一个字符串。

这是我的更新...

```
var c = Components.Single (c => c.Componentordernumber == 119137 && c.Componentorderversion == 1);
c.Circuitordernumber = "11043913";
SubmitChanges();
Components.Where (c => c.Componentordernumber == 119137 && c.Componentorderversion == 1).Dump(); 
```

当我在 LINQPad 中运行它时，它在 SubmitChange() 处失败。有一个 TargetInvocationException（在 _InvokeMethodFast 处）。内在的例外是......

```
InvalidOperationException - The binary operator Equal is not defined for the types 'System.Int64' and 'System.Object'.
TargetSite: Expression.GetEqualityComparisonOperator (ExpressionType binaryType, String opName, Expression left, Expression right, Boolean liftToNull)
Stacke Trace:
  at System.Linq.Expressions.Expression.GetEqualityComparisonOperator(ExpressionType binaryType, String opName, Expression left, Expression right, Boolean liftToNull)
  at System.Linq.Expressions.Expression.Equal(Expression left, Expression right)
  at IQToolkit.Data.EntityRef`1.QueryParent()
  at IQToolkit.Data.EntityRef`1.get_Value() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-06T10:10:24.013

我在删除行时遇到了同样的问题。我通过将所有值为 null 的可空长字段设置为非空值（例如 0L）找到了解决方案。

为了简化这一点，我编写了一个简短的扩展方法 PatchForDelete（见下文）并使用它：

```
var testUsers = Users.Where (a => a.login.StartsWith("test")); 
testUsers.Dump();

foreach (var user in testUsers) {
    MyExtensions.PatchForDelete(user);  
    AsdBenutzers.DeleteOnSubmit(user);  
}
SubmitChanges(); 
```

问候，沃尔特

```
//
// Patch for Bug in IQ-Driver
//
// If each nullable long field which is null ist set to 0L
// DeleteOnSubmit() works!!
//
public static void PatchForDelete(object entity) {
    var fields = entity.GetType().GetFields();

    foreach (var field in fields) {
        if (field.FieldType == typeof(long?)) {
            var v = field.GetValue(entity);             
            if (v == null) {
                field.SetValue(entity, 0L);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T13:37:26.370

我刚刚遇到了类似的错误。从我所能找到的一切来看，它看起来像是 IQ 驱动程序中围绕可空外键的错误。

更多细节：http: [//forum.linqpad.net/discussion/225/nullable-foreign-key-bug-in-iq-driver](http://forum.linqpad.net/discussion/225/nullable-foreign-key-bug-in-iq-driver)

不幸的是，除了放弃 linqPad 解决方案之外，我不知道如何解决此错误。

# vba - 为什么我的代码没有填写？

> ID：15480829
> 
> 赞同：0
> 
> 时间：2013-03-18T15:39:37.773
> 
> 标签：vba, excel

```
Dim SLR As Range
Dim ELR As Range

Private Sub Worksheet_Change(ByVal Target As Range)
If Target.Cells.Count > 1 Then Exit Sub
On Error Resume Next

Select Case UCase(Target.Value)

Case "START-LOCATION"
    Target.Offset(0, 0).Select
    Selection.ClearContents
    SLR = ActiveCell.Address
    Target.Offset(-1, 1).Select

Case "END-LOCATION"
    Target.Offset(0, 0).Select
    Selection.ClearContents
    ELR = ActiveCell.Address
    Target.Offset(0, -1).Select
    ActiveSheet.Range(SLR, ELR).FillDown

End Select
End Sub 
```

大家好，我有上面的代码，它应该在第一个单元格的开始位置设置变量，在结束位置设置第二个变量，然后将单元格从 SLR 填充到 ELR，但是它不起作用并且没有向我提供错误消息，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:52:35.757

尝试更改以下内容：

```
SLR= Activecell.Address 
```

进入

```
Set SLR = Activecell 
```

并为 ELR 做同样的事情：

```
Set ELR = Activecell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:17:26.357

On Error Resume Next 总是一个坏主意。如果我是世界之王，我会将此命令设为非法，错误处理程序应该用于发生意外事件导致代码崩溃时。

您的宏最重要的是用户在其末尾获得的数据是正确的。如果这意味着当代码崩溃并且用户打电话给你时，那就是它所需要的。但是 On Error Resume Next 意味着没有人会知道你的代码是否已经崩溃，也没有人会知道数据是错误的。

永远不要使用 On Error Resume Next ！！！！！！

至于这段代码，如果您删除 On Error Resume Next，您将了解更多有关您的问题的信息。

# c - C (glibc) rand() 生成的下一个数字的预测

> ID：15480838
> 
> 赞同：5
> 
> 时间：2013-03-18T15:39:55.923
> 
> 标签：c, random, generator, glibc, prediction

给定由 rand() 生成的一系列数字，我如何预测下一个值？蛮力是不可能的。我知道 rand() 基本上是一个线性同余生成器，但也会进行位移。我可以用什么理论来破解它？任何提示都将受到欢迎:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:08:44.070

@unwind：感谢您的建议！我在某些地方错了，而文档让我走上了正确的轨道。

实际上，当您知道 30 个（左右）数字的序列时，预测是小菜一碟。在 50% 的情况下，“计算”的答案是正确的。unwind 提供的链接或简化代码中提供了更多详细信息：http: [//www.mathstat.dal.ca/~selinger/random/](http://www.mathstat.dal.ca/~selinger/random/)

# verilog - 将 Verilog 中的引脚强制到特定频率

> ID：15480840
> 
> 赞同：1
> 
> 时间：2013-03-18T15:39:59.760
> 
> 标签：verilog, clock, xilinx

我试图寻找这个问题的答案，但无济于事。当我重新综合我的代码时遇到问题，我怀疑这是由于时钟问题。

我正在使用 DCM 将外部晶体振荡器从 25MHz 放大到 50MHz。但是，我认为该工具不会知道晶体振荡器的实际频率，因为它是一个外部物理组件。我的代码如下：

```
//since our crystal oscillator is only 25Mhz, we use a DCM to multiply it by two since the desired is 50Mhz
DCM #(
    .CLKFX_DIVIDE   (2), 
    .CLKFX_MULTIPLY (4) 
) dcm_master (
    .CLKFB    (CLK_FB), 
    .CLKIN    (CLK_crystal), 
    .RST      (DcmReset),    
    .CLK0     (MasterClk0Unbuf), 
    .CLK90    (), 
    .CLK180   (), 
    .CLK270   (), 
    .CLK2X    (), 
    .CLK2X180 (),    
    .CLKFX    (MasterClkFxUnBuf), 
    .CLKFX180 (),
    .CLKDV    (), 
    .LOCKED   (DcmLocked),
    .STATUS   (),
    .PSCLK    (1'b0),
    .PSEN     (1'b0),
    .PSINCDEC (1'b0),
    .PSDONE   ()    
); 

//we provide feedback to the DCM's phase input (possibly not neccessary)
BUFG bufg_master_dcm_clk_0  ( .I(MasterClk0Unbuf),  .O(CLK_FB) );
BUFG bufg_master_dcm_clk_fx ( .I(MasterClkFxUnBuf), .O(CLK_FX) );

//code taken from xilinx. We toggle using a bufgmux between the onboard and external clock
// BUFGMUX: Global Clock Buffer 2-to-1 MUX
// Spartan-3
// Xilinx HDL Libraries Guide, version 13.2
BUFGMUX BUFGMUX_inst (
.O(CLK), // Clock MUX output
.I0(CLK_FX), // Clock0 input
.I1(CLK_local), // Clock1 input
.S(sw[6]) // Clock select input
); 
```

ucf 中的这段代码是否会强制工具将我的 DCM 的输出识别为 50MHz？

```
PIN "bufg_master_dcm_clk_fx.O" TNM_NET = CLK50;
TIMESPEC TS_CLKBuf = PERIOD "CLK50" 100 MHz HIGH 50%; 
```

此外，我是否正确使用了BUFG？Xilinx 说我应该使用 IBUFG 将外部时钟连接到我的 DCM，我收到错误消息说我的 BUFG 只能寻址一半的芯片（我想这会变得很麻烦）。

谢谢，

弥敦道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T00:19:32.770

我认为您的时钟限制已关闭。您应该限制 DCM 的输入——DCM 知道如何处理输出。这是我会使用的：

```
NET clk_in TNM_NET = tnm_clk_in;
TIMESPEC TS_clk_in = PERIOD tnm_clk_in 40ns; 
```

其中 clk_in 是晶体（在您的情况下为 CLK_crystal）。确保晶体连接到设备上的时钟引脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T10:57:14.737

我本来想先测试一下。对于 Spartan-3 系列 FPGA，使用其中一个 DCM。这是 ISE 生成的模板。

请注意，有一个专用的 CLK2X。

此外，根据用户手册： .CLKFB 应由 BUFG 源驱动。

```
 wire i_FeedBack;
     wire o_FeedBack;

     BUFG clkFBBuf(
            .I(i_FeedBack),
            .O(o_FeedBack)
     );

     DCM #(
 [...]
  .CLKFX_DIVIDE(1),   // Can be any integer from 1 to 32
  .CLKFX_MULTIPLY(2), // Can be any integer from 2 to 32
 [..]

 ) DCM_inst (
      .CLK0(i_FeedBack),     // 0 degree DCM CLK output
      .CLK2X(CLK2X),   // 2X DCM CLK output
      [...]
      .CLKFX(CLKFX),   // DCM CLK synthesis out (M/D)
      .CLKFB(o_FeedBack),   // DCM clock feedback
      .CLKIN(clk),   // Clock input (from IBUFG, BUFG or DCM)
      [...]
   ); 
```

# php - 非重音函数返回 1

> ID：15480841
> 
> 赞同：0
> 
> 时间：2013-03-18T15:39:59.933
> 
> 标签：php

我正在尝试使用 unaccent 函数来删除特殊字符。

如果放： echo Unaccent('áéç'); 结果还可以

当我尝试添加分解参数时： echo Unaccent($foo[1]); 结果是 1

有什么建议吗？

```
$fiche = file('fiches.txt');
foreach ($fiche as $line_num => $line) {
echo $line;

$foo = explode (",", $line);

function Unaccent($string)
{
return preg_replace('~&([a-z]{1,2})(acute|cedil|circ|grave|lig|orn|ring|slash|th|tilde|uml);~i', '$1', htmlentities($string, ENT_QUOTES, 'UTF-8'));
}

echo Unaccent($foo[1]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:38:34.990

我以这种方式解决了：

```
preg_replace("/&([a-z])[a-z]+;/i", "$1", htmlentities($line)); 
```

非常感谢大家。

# python - 单语句异常检查

> ID：15480843
> 
> 赞同：1
> 
> 时间：2013-03-18T15:40:01.443
> 
> 标签：python, exception-handling

我只是好奇这是否存在。在为 python 编程一年的大部分时间之后，我从未遇到过它。

是否有一个检查异常的 c 编译的 python 函数（为了更快地访问理解）：

类似以下的函数：

```
def no_exception(function, *args, **kwargs):
    try:
        function(*args, **kwargs)
    except Exception:
        return False
    return True 
```

你可以在这种情况下使用它

```
# values is full of data
new_values = [float(n) if no_exception(float, n) else n for n in values] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:47:40.863

**不**

至少不在标准库中。否则`assertRaises`Python unittest 模块中的方法会使用它。请参阅： http: [//pythonhosted.org/gchecky/unittest-pysrc.html#TestCase.failUnlessRaises](http://pythonhosted.org/gchecky/unittest-pysrc.html#TestCase.failUnlessRaises)

您当然可以轻松编写自己的 c 实现。

# rake - 为什么这个 dotCover rake 任务使用这些相对文件路径失败？

> ID：15480845
> 
> 赞同：4
> 
> 时间：2013-03-18T15:40:16.763
> 
> 标签：rake, teamcity, teamcity-7.0, dotcover, albacore

我在让 dotCover`exec`使用相对路径在 Albacore 任务中工作时遇到了一些问题。

```
@xUnitRunnerPath = Pathname.new('../../Tools/xUnit/xunitcontrib-dotcover.2.0/xunit.runner.utility.dll').realpath
@myTestDll = 'C:\PathToProj\My.Project.Tests\bin\Release\My.project.Tests.dll'
@outputDir = 'C:\PathToTestResults\'

exec :testCoverage do |cmd|
    cmd.command = "C:/BuildAgent/tools/dotCover/dotCover.exe"
    cmd.parameters = [
        "cover",
        "/targetexecutable=$$#{@xUnitRunnerPath}$$",
        "/targetarguments=$$#{@myTestDll}$$",
        "/output=#{@outputDir}/My.Project.Tests.dll.dcvr"
    ]
end 
```

只是告诉我路径错误，该`dotCover`错误无济于事

```
Failed to convert relative paths to absolute in parameters for the 'cover' 
command. The given path's format is not supported. 
```

这并没有提供太多帮助，我也尝试过 dotcover help cover 以获得帮助，但没有提供很多关于出了什么问题的线索。

我已经关注[了这篇关于 rake 和 dotcover 的帖子](http://devnet.jetbrains.com/thread/297902)以及[这个问题](http://devnet.jetbrains.com/thread/439535)。也许我在这里错过了相关文档，但能够让它工作真的很有帮助。

* * *

编辑：我刚刚发现这与[相对路径和绝对路径](http://youtrack.jetbrains.com/issue/DCVR-3800)有关，也许是因为我使用的是绝对路径，所以我需要以下内容。我们明天就会知道

```
/AnalyseTargetArguments=false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T05:00:09.040

我将从您自己的答案中重新混合 rakefile/tasks。您应该遵循一些 Ruby/Rake 约定以吸引更广泛的受众。我对如何编写很棒的 rakefile 有一些看法。尤其...

### 1\. 不要直接调用/执行 Rake 任务

```
Rake::Task[:unitTestWithCoverage].execute( testAssembly ) 
```

您不想直接使用 Rake`invoke`或`execute`. 其中一个不调用依赖任务，一个只运行一次依赖任务......它变得愚蠢。应该总是有一种方法来构建正确定义和依赖的任务。

### 2.不要参数化“内部”任务

```
exec :unitTestWithCoverage, [:testAssembly] do |cmd, testAssembly| 
```

您可能有一个静态列表或通配符匹配的测试程序集列表。您应该能够在不使用参数的情况下构建具体任务。当用户可以从命令行使用自定义输入调用参数化任务时，我只使用参数化任务。

### 3\. 无需在每个任务内创建路径

```
testAssemblyRealPath = Pathname.new(testAssembly).realpath
testAssemblyName = File.basename(testAssemblyRealPath) 
```

我们将探索 Rake[`FileList`](http://ruby-doc.org/core-2.0/File.html)以找出如何创建自定义、惰性、[映射](http://ruby-doc.org/core-2.0/File.html)的文件名/路径/任意字符串列表！

# 混音（更新）

*我在第一个答案中犯了一个严重错误（我将其保留在底部，以供参考）。我将解释您/我的教育在该部分中出了什么问题！*

接下来是我的新建议。这对我来说应该很明显，因为我在自己的构建中使用 mspec 测试运行器任务犯了同样的错误。

```
dotcover_path = 'path/to/dotcover.exe'
xunit_runner_path = 'path/to/xunitrunner.exe'

test_assemblies = FileList['path/to/output/**/*.test.dll']
coverage_results = "#{test_results_path}/coverage_results.dcvr"

task :cover_all => [ :tests_with_coverage, :publish_coverage_results ]

exec :tests_with_coverage do |cmd|
  cmd.comand = dotcover_path
  cmd.parameters = [ 
    "cover",
    "/AnalyseTargetArguments=False",
    "/TargetExecutable=\"#{xunit_runner_path}\"",
    "/TargetArguments=\"#{test_assemblies.join ','}\"",
    "/Output=\"#{coverage_results}\""
  ]
end

task :publish_coverage_results => [ :tests_with_coverage ] do 
  import_data 'dotNetCoverage', 'dotCover', coverage_results
end

def import_data(type, tool, file)
  puts "##teamcity[importData type='#{type}' tool='#{tool}' path='#{file}']"
end 
```

## 说明

我默认使用绝对路径（通常使用[`File.expand_path`](http://ruby-doc.org/core-2.0/File.html)和[`__FILE__`](https://stackoverflow.com/questions/224379/what-does-file-mean-in-ruby)常量）。有些工具/任务需要相对路径，但您始终可以使用`File.basename`.

```
dotcover_path = 'path/to/dotcover.exe'
xunit_runner_path = 'path/to/xunitrunner.exe' 
```

我们仍然可以使用一个[`FileList`](http://rake.rubyforge.org/classes/Rake/FileList.html)已构建的程序集来定义目标程序集。在测试任务的主体执行之前，我们不会评估它。

```
test_assemblies = FileList['path/to/output/**/*.test.dll'] 
```

覆盖运行程序支持具有单个结果文件的多个程序集。这样我们就没有另一个复杂`pathmap`的 .

```
coverage_results = "#{test_results_path}/coverage_results.dcvr" 
```

从 CI 服务器调用它来运行测试并发布覆盖结果。

```
task :cover_all => [ :tests_with_coverage, :publish_coverage_results ] 
```

这个任务现在简单明了。一些注意事项： 1\. 用于[`join`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-join)将目标列表转换为正确格式的字符串。2\. 我倾向于引用具有文件路径的 exec 任务参数（需要转义，`\"`）。

```
exec :tests_with_coverage do |cmd|
  cmd.command = dotcover_path
  cmd.parameters = [ 
    "cover",
    "/AnalyseTargetArguments=False",
    "/TargetExecutable=\"#{xunit_runner_path}\"",
    "/TargetArguments=\"#{test_assemblies.join ','}\"",
    "/Output=\"#{coverage_results}\""
  ]
end 
```

相同的旧发布任务/方法。

```
task publish_coverage_results => [ :tests_with_coverage ] do 
  import_data 'dotNetCoverage', 'dotCover', coverage_results
end

def import_data(type, tool, file)
  puts "##teamcity[importData type='#{type}' tool='#{tool}' path='#{file}']"
end 
```

# 老混音

*剪断以显示问题区域，假设其余部分无趣或也存在于新解决方案中。*

在构建任务*之后*，测试程序集才会存在。这通常不是问题，因为`FileList`它很懒惰。在您枚举它之前，它不会评估（例如，使用`each`、`map`或`zip`）。

但是，我们立即`each`通过它来生成测试任务……所以这行不通。列表中没有任何内容，也不会生成任何任务。或者，更糟糕的是，它会拾取先前构建的输出并可能做坏事（如果您没有完全清理输出目录）。

```
test_assemblies = FileList['path/to/output/**/*.test.dll']
coverage_results = test_assemblies.pathmap "#{test_results_path}/%n.dcvr"
cover_task_names = test_assemblies.pathmap "cover_%n"

test_assemblies.zip(coverage_results, cover_task_names) do |assembly, results, task_name|
  exec task_name do |cmd|
    cmd.command = dotcover_path
    cmd.parameters = [ 
      "cover",
      "/AnalyseTargetArguments=False",
      "/TargetExecutable=#{xunit_path}",
      "/TargetArguments=#{assembly}",
      "/Output=#{results}"
    ]
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:10:36.090

对于任何对此感兴趣的人，这是我最后的 rake 任务

```
task :unitTestsWithCoverageReport => [ :unitTestsWithCoverage, :coverageServiceMessage ]

exec :unitTestsWithCoverage do |cmd|
    fullPathAssemblies = []

    @unitTestAssemblies.each do |testAssembly|
        testAssemblyRealPath = Pathname.new(testAssembly).realpath
        fullPathAssemblies << testAssemblyRealPath
    end

    cmd.command = @dotCoverRealPath
    cmd.parameters = [
        "cover",
        "/AnalyseTargetArguments=False",
        "/TargetExecutable=#{@xUnitRunnerRealPath}",
        "/TargetArguments=\"#{fullPathAssemblies.join ';'}\"",
        "/Output=#{@testResultsRealPath}/coverage.dcvr"
        ]
end

task :coverageServiceMessage do |t|
    puts "##teamcity[importData type='dotNetCoverage' tool='dotcover' path='#{@testResultsRealPath}/coverage.dcvr']"
end 
```

非常感谢@AnthonyMastrean，他向我展示了一些非常棒的 ruby​​ 小技巧以及我应该如何正确构建我的 rake 文件。

# http - 在 Windows Mobile 5.0 和 Windows CE 6.0 上通过 HTTP 或 FTP 下载文件

> ID：15480851
> 
> 赞同：0
> 
> 时间：2013-03-18T15:40:31.597
> 
> 标签：http, ftp, windows-mobile, windows-ce, auto-update

什么样的库或命名空间能够在 Windows Mobile (WM) 5.0 和 Windows CE (Win CE) 6.0 上通过 HTTP 或 FTP 下载文件？

我计划在 WM 5.0 和 Win CE 6.0 中开发一个自动更新程序。看起来 WM 5.0 和 Win CE 6.0 都不支持 Webclient。是否有任何有用的 3rd 方库？（我试图找到一个，但仍然找不到。）或者我应该使用什么命名空间和类？

我可以同时使用 C# 或 C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:26:23.403

我建立了自己的，我认为大多数软件开发人员都会走这条路。

ping 您的托管站点。

如果您收到回复，请阅读现有版本的文本字符串。

如果它大于您在设备上安装的内容，请使用[TcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)下载它，启动 CAB 文件来安装它。

# java - 在 Java 类中映射没有属性的 Hibernate 列

> ID：15480853
> 
> 赞同：0
> 
> 时间：2013-03-18T15:40:38.493
> 
> 标签：java, hibernate, hql, hibernate-mapping

是否可以使用 Hibernate 映射数据库列，以便我可以在 HQL 查询中使用它，但不能将其映射到映射类中的实际属性？

我在课堂上不需要这个属性，并且希望避免 getter 和 setter 的混乱，无论如何都不应该使用它们。

我的用例是在某些行上设置一个标志，因此不同的进程将拾取该行并对其进行处理。我们只需要像这样对字段进行更新：

```
 update FJ345KJ set wrkxGrumble=1 
 where wrkxGrumble = 0
 and -- more constraints comming here 
```

由于数据库强加给我们的表名和列名类似于哈希码，我们希望使用 HQL 进行更新，它可以使用漂亮的映射名称。因此我们需要在 Hibernate 中映射的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:29:22.260

据我所知，这是不可能的。任何映射列都需要类中的变量。

您可以做的是：您使用属性映射列，`access = "field"`并在类中将变量声明为`private`. 然后仍然声明了一个无用的变量（这不是性能问题，因为数据库无论如何都必须加载行），但是不需要 getter 和 setter，并且由于变量被声明为私有它不会影响您的接口java 类，即对其他类不可见。

# extjs - ExtJS Spring 文件上传

> ID：15480855
> 
> 赞同：1
> 
> 时间：2013-03-18T15:40:45.467
> 
> 标签：extjs, file-upload, extjs3

我有包含文件上传项目的 ext 表单面板。代码如下所示：

```
fp = new Ext.FormPanel({
         fileUpload: true,
         autoHeight: true,
         bodyStyle: 'padding: 10px 10px 0 10px;',
         labelWidth: 50,
         defaults: {
             anchor: '95%',
             allowBlank: false,
             msgTarget: 'side'
         },
         items: [
            {
                xtype: 'fileuploadfield',
                id: 'form-file',
                emptyText: 'Select excel file',
                fieldLabel: 'File',
                name: 'file',
                buttonText: 'Choose File',
                buttonCfg: {
                    iconCls: 'upload-icon'
                }
            }
         ],
         buttons: [{
            text: 'Load',
             handler: function(){                   
                if(fp.getForm().isValid()){
                  fp.getForm().submit({
                      url: myURL,
                      waitMsg: 'Uploading your photo...',
                      success: function(fp, o){
                        // I want to get loaded excel data list
                      },
                      failure : function(fp,o)
                      {
                        console.log('error');
                      }
                  });
                 }
             }
         }]
     }); 
```

我有弹簧控制器和一些用于处理上传的 Excel 数据的服务。上传excel后，我在excel上迭代数据并将它们放在一个列表中。

```
@RequestMapping("/uploadExcel")
@ResponseBody
public Map<String, ? extends Object> uploadExcellData(@RequestParam("file") MultipartFile file)
{
    Map<String, Object> result = new HashMap<String,Object>();
    try
    {
        result = uploadService(file);
    }
    catch(Exception ex)
    {
        logger.error(ex.getMessage(), ex);
    }

    return result;
}

public Map<String,Object> uploadService(MultipartFile argFile) throws BLOException, DAOException 
{
    Map<String,Object> result = new HashMap<String,Object>(3);

    List importExcelList = null;
    try 
    {
        if (!argFile.isEmpty()) 
        {   
            importExcelList = parseExcelAndCreateListFunction(argFile.getInputStream());

            result.put("total", new Integer(importExcelList.size()));
            result.put("success", true);

            result.put("data", importExcelList);
        }
    } 
    catch (IOException e) 
    {
        logger.error(e.getMessage(), e);
    }

    return result;
} 
```

当我运行这段代码时，我得到了“ `NetworkError: 404 Not Found`”。我想在表单提交后返回 excel 数据列表。我不能这样做。如何在提交回调时获取 excel 数据列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:08:58.063

我想您需要返回附加参数并签入`success`方法`action`参数。请检查[Extjs 文档 (action.result)](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.BasicForm-method-doAction)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:18:20.013

我已经更新了这样的java文件：

```
@RequestMapping("/uploadExcel")
@ResponseBody
public void uploadExcellData(@RequestParam("file") MultipartFile file, HttpServletResponse response)
{
    Map<String, Object> result = new HashMap<String,Object>();
    try
    {
        result = uploadService(file);
    }
    catch(Exception ex)
    {
        logger.error(ex.getMessage(), ex);
    }

    response.setContentType("text/html; charset=UTF-8");
    response.getWriter().write("{success:true, total:'"+result.size()+"', data:'"+result+"'}");

}

public List uploadService(MultipartFile argFile) throws BLOException, DAOException 
{
    List importExcelList = null;
    try 
    {
        if (!argFile.isEmpty()) 
        {   
            importExcelList = parseExcelAndCreateListFunction(argFile.getInputStream());
        }
    } 
    catch (IOException e) 
    {
        logger.error(e.getMessage(), e);
    }

    return importExcelList;
} 
```

而且我还更新了我的 js 文件，如下所示：

```
fp = new Ext.FormPanel({
   fileUpload: true,
   autoHeight: true,
   bodyStyle: 'padding: 10px 10px 0 10px;',
   labelWidth: 50,
   defaults: {
       anchor: '95%',
       allowBlank: false,
       msgTarget: 'side'
   },
   items: [
      {
          xtype: 'fileuploadfield',
          id: 'form-file',
          emptyText: 'Select excel file',
          fieldLabel: 'File',
          name: 'file',
          buttonText: 'Choose File',
          buttonCfg: {
              iconCls: 'upload-icon'
          }
      }
   ],
   buttons: [{
      text: 'Load',
       handler: function(){                   
          if(fp.getForm().isValid()){
            fp.getForm().submit({
                url: myURL,
                waitMsg: 'Uploading your photo...',
                success: function(fp, o){
                    var resData = Ext.util.JSON.decode(o.result.data);
                    // I can iterate resData
                },
                failure : function(fp,o)
                {
                    Ext.MessageBox.alert("Failure", "your error message");
                }
            });
           }
       }
   }]
}); 
```

如上所述，我解决了我的问题。

# android - 在 ArrayList 中添加按钮侦听器

> ID：15480857
> 
> 赞同：0
> 
> 时间：2013-03-18T15:40:50.590
> 
> 标签：android

我在按钮的循环中添加 OnClickListener，问题是 i 变量需要是最终的，但是不能增加他。

我的代码：

```
ArrayList<Button> buttonList  = new ArrayList<Button>();
buttonList.add((Button)findViewById(R.id.mov1_btn));
buttonList.add((Button)findViewById(R.id.mov2_btn));
buttonList.add((Button)findViewById(R.id.mov3_btn));
buttonList.add((Button)findViewById(R.id.mov4_btn));
buttonList.add((Button)findViewById(R.id.mov5_btn));
buttonList.add((Button)findViewById(R.id.mov6_btn));

for(int i = 0;i<buttonList.size();i++) 
    {
        buttonList.get(i).setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {

                    buttonList.get(movCnt).setBackgroundResource(R.drawable.mov1n);
                    buttonList.get(i).setBackgroundResource(R.drawable.mov1o);  
                    movCnt = i;

                }
            });
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:45:31.197

由于`i`can't be `final`，您必须声明另一个变量。

```
for (int i = 0; i < buttonList.size(); i++) {
    final int current = i;  

    buttonList.get(i).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            buttonList.get(movCnt).setBackgroundResource(R.drawable.mov1n);
            buttonList.get(current).setBackgroundResource(R.drawable.mov1o);
            movCnt = current;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:49:35.913

您需要使按钮最终不是 i，这是应该完成的示例：

```
ArrayList<Button> list = new ArrayList<Button>();

        list.add((Button) findViewById(R.id.BTN_login));
        list.add((Button) findViewById(R.id.BTN_login));
        list.add((Button) findViewById(R.id.BTN_login));
        list.add((Button) findViewById(R.id.BTN_login));
        for (int i = 0; i < list.size(); i++)
        {
            final Button tempButton = list.get(i);
            tempButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                     tempButton.setBackgroundResource(R.drawable.mov1n);
                     tempButton.setBackgroundResource(R.drawable.mov1o);  

                }
            });

        } 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:45:46.477

Don't set the variable `i` to final, instead just set a tag to the view. This way the value can always stay with the view and can be used whenever needed.

```
for(int i = 0;i<buttonList.size();i++) 
{
    buttonList.setTag(i);
    buttonList.get(i).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                buttonList.get(movCnt).setBackgroundResource(R.drawable.mov1n);
                buttonList.get(i).setBackgroundResource(R.drawable.mov1o);  
                movCnt = (Integer)v.getTag();

            }
        });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T15:47:10.437

```
//...
for(int i = 0;i<buttonList.size();i++) 
{
    final int current = i;

    buttonList.get(ii).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                buttonList.get(movCnt).setBackgroundResource(R.drawable.mov1n);
                buttonList.get(current).setBackgroundResource(R.drawable.mov1o);  
                movCnt = current;

            }
        });
} 
```

# ios - 以编程方式触发 UITableViewCell“删除”按钮

> ID：15480860
> 
> 赞同：12
> 
> 时间：2013-03-18T15:41:02.470
> 
> 标签：ios, uitableview

我想在我的单元格上添加一个与滑动删除功能相同的自定义按钮。因此，当单击我的自定义按钮时，此按钮将被隐藏，以显示官方的红色“删除”按钮。

所以我做了这样的事情：

```
/// Controller.m
///
/// @brief Delete icon button pressed. Trigger display of Delete full button
///
- (IBAction)deleteDrug:(id)sender event:(id)event {
    NSIndexPath *indexPath = [self indexPathForButton:sender event:event];
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    [cell setEditing:YES animated:YES];
}

/// CustomCell.m
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
    [super setEditing:editing animated:animated];

    // hide / show "modify" button when entering in edit mode
    switch (editing) {
        case YES:
            self.deleteButton.hidden = YES;
            break;
        case NO:
            self.deleteButton.hidden = NO;
            break;
        default:
            break;
    }
} 
```

此时，我的自定义按钮在单击它们时会被隐藏，但没有出现官方的红色“删除”按钮。

有人知道如何处理吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:44:40.003

我相信删除按钮更多地由 tableView 处理。因此，您可能需要让 tableView 知道它应该正在编辑，而不是设置您的单元格编辑。

```
- (IBAction)deleteDrug:(id)sender event:(id)event {
    selectedButtonIndex = [self indexPathForButton:sender event:event];

    [tableView setEditing:YES animated:YES];
} 
```

所以你可能需要做一些事情，比如将 tableView 设置为编辑。然后在您的表格视图的数据源中，您可以实现此方法，其中 selectedButton 是正确单元格的索引路径。

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath == selectedButtonIndex) {
        return YES;
    }

    return NO;
} 
```

您可能需要为您的数据源实现此方法。

```
- (UITableViewCellEditingStyle) tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return UITableViewCellEditingStyleDelete;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-27T20:03:11.670

我没有找到任何合适的解决方案来解决这个问题，所以我自己做了。我做了一个假的删除按钮，它的工作原理和原来的很像。我在这里展示了棘手的删除按钮部分。

如果你想知道如何替换默认减号（删除）编辑控件，有一篇不错的文章，我推荐：http: [//vinsol.com/blog/2015/01/06/custom-edit-control-for-合适的viewcell/](http://vinsol.com/blog/2015/01/06/custom-edit-control-for-uitableviewcell/)

因此，假设您从文章中制作了第一部分，并且您希望在按下自定义编辑控件按钮时看到删除按钮。代码在 Swift 上，但您可以使用相同的步骤在 Objective-C 中进行此操作

```
func deleteButtonShow(){

    let deleteButton = UIButton(frame: CGRect(x: self.frame.width, y: 0, width: 80, height: self.frame.height))
    deleteButton.backgroundColor = UIColor.redColor() // ! note: original delete have another color
    deleteButton.setTitle("Delete", forState: UIControlState.Normal)
    deleteButton.setTitleColor(UIColor.whiteColor(), forState: .Normal)
    deleteButton.addTarget(self, action: "actionForDelete", forControlEvents: UIControlEvents.TouchUpInside)
    // action for your button will call delegate that will do the delete work. in most cases
    self.contentView.addSubview(deleteButton)

    var movedSubviews = self.subviews        
    var i = 0
    for subview in movedSubviews {
        // NOTE: I added tag = 1 in the storyboard to Content View of my cell
        if subview.tag == 1 {
            movedSubviews.removeAtIndex(i) // we don't need to move it.
            break
        }
        ++i
    }
    movedSubviews.extend(self.contentView.subviews)// add subviews from content view

    UIView.animateWithDuration(0.3, animations: { () -> Void in

        for movedView in movedSubviews as! [UIView]  {

            movedView.frame = CGRect(origin: CGPoint(x: movedView.frame.origin.x - 80, y: movedView.frame.origin.y), size: movedView.frame.size)
        //animate the things    
        }

    })

} 
```

我们不想移动内容视图，因为我发现如果我们的按钮不在内容视图上方，它是不可触摸的，我有一些想法为什么，但不确定。如果您知道原因，请在评论中添加此信息，我很想知道。

我还想指出，如果您像我一样使用自动布局，则需要更改动画中的约束，而不是帧，因此您可能不需要`extend`部分。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-05-10T06:39:56.837

请这样做以使用 UITableViewcell 右侧的删除按钮。

```
- (void)tableView:(UITableView *)tableView 
        commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
        forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [tableView beginUpdates];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] 
                   withRowAnimation:UITableViewRowAnimationTop];
        [self.**yourarray** removeObjectAtIndex:indexPath.row];
        [tableView endUpdates];
        [tableView reloadData];
    }
} 
```

# c# - 在调用 wkhtmltopdf.exe - win server 2008 时，许可证执行系统已被篡改

> ID：15480861
> 
> 赞同：2
> 
> 时间：2013-03-18T15:41:03.307
> 
> 标签：c#

在我们的生产服务器上，win 2008 64 位，在 NETWORK SERVICE 帐户下运行 .NET 3.5 站点，我突然在错误日志中收到此消息“服务器无法打开此程序，因为许可证执行系统已被篡改或损坏”启动wkhtmltopdf.exe 在我的帐户下（或在 SYSTEM 帐户下，使用此处描述的使用签名技术 - [http://geek.hubkey.com/2008/02/impersonating-built-in-service-account.html](http://geek.hubkey.com/2008/02/impersonating-built-in-service-account.html)） - 成功运行。所有软件都已获得许可，我们已经有一段时间（几周）没有在服务器上安装任何新软件了。

调用 wkhtmltopdf.exe 从页面生成 PDF 时会引发异常。

有谁知道如何找出这里出了什么问题？

这是堆栈跟踪：

```
[Win32Exception (0x80004005): Windows cannot open this program because the license enforcement system has been tampered with or become corrupted]
System.Diagnostics.Process.StartWithShellExecuteEx(ProcessStartInfo startInfo) +614
System.Diagnostics.Process.Start() +56
KPI.DownloadWoordenschatTest() in ..\KPI.aspx.cs:1579
KPI.btnLogin5_Click(Object sender, EventArgs e) in ..\KPI.aspx.cs:1451
KPI.Page_Load(Object sender, EventArgs e) in ..\KPI.aspx.cs:109
System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
System.Web.UI.Control.OnLoad(EventArgs e) +99
System.Web.UI.Control.LoadRecursive() +50
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627 
```

这是代码片段，其中报告了问题：

```
Process pdfConverterProcess = new Process();
            pdfConverterProcess.StartInfo.FileName = Server.MapPath("~/bin/wkhtmltopdf.exe");
            pdfConverterProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            pdfConverterProcess.StartInfo.Arguments = String.Format(@" ""{0}"" ""{1}"" --header-html ""{2}&np=1"" --footer-html ""{3}&np=1""  --margin-top 2.5cm --header-spacing 7", requestUrl, filePath, pdfHeaderURL, pdfFooterURL);
            pdfConverterProcess.Start(); (this is line 1579)
            pdfConverterProcess.WaitForExit();
            pdfConverterProcess.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:55:03.247

这可能有多种原因，但是当我遇到这种情况时，我注意到安装[Windows Management Framework 3.0后错误消失了](http://www.microsoft.com/en-us/download/details.aspx?id=34595)

您可以检查您的设置是否属于这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T20:28:54.657

我最近有一个事件，每次调用 Rotativa WkhtmltopdfDriver ConvertHtml 时都会出现此错误。

然后我测试了 wkhtmltopdf 正在使用

```
C:\inetpub\wwwroot\SomeApplication\Rotativa>wkhtmltopdf.exe c:\pdf\test.txt c:\pdf\test.pdf 
```

这给我留下了几个选择，因为我的搜索结果不是很好。

**值得庆幸的是，在重新启动服务器后，我的问题得到了解决，无需任何额外步骤。**

就我而言，当这种情况开始发生时，我们最近没有对应用程序进行任何更改，而 Rotativa 已经工作了一年多，一旦我们启动并运行它就没有任何问题。

我建议任何遇到此类问题的人都尝试证明 wkhtmltopdf 本身是否正常工作，因为这应该有助于进一步排除故障。并在您开始更改任何内容之前尝试重新启动。

在我的情况下，我假设 Windows 服务没有运行，或者类似地，其他一些必需的部分已经发现它进入错误状态。

# c++ - 预处理器#defines 以及如何在没有预编译头文件的情况下全局使用？

> ID：15480862
> 
> 赞同：0
> 
> 时间：2013-03-18T15:41:09.600
> 
> 标签：c++, compiler-construction, precompiled-headers

我在过去几年所做的开发使用了很多预编译的头文件。每个产品一个。预编译的标头用于`#define`每个产品所需的项目。这确实使每个产品之间的代码相当干净和可移植。

但是，如何在不使用预编译头文件的情况下复制这种方法？

基本上，能够`#define`包含相当数量的项目和一些基本内容，但它不是 PCH。

您是否只是创建一个`.h`并将其包含在需要这些定义的每个类中？

你能把 重命名`.pch`为 a`.h`吗？从结构上看，它看起来一样吗？好吧，再加上一个头球。

更新：这是一个用于 Mac 和 Win 的 Codewarrior 的代码库。现在在 OS X 上使用 XCode，我们可能正在迁移到 Mac 和 Win 的 CMake，以帮助我们没有那么多不同的环境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:43:21.253

您可以使用单个包含文件 (.h) 并将其包含在任何地方。

但是，大多数构建系统还提供了一种添加`#defines`项目范围的方法。例如，在 Visual Studio 中，项目属性的*预处理器*部分允许您放置项目范围内的特定于构建的定义。

# compression - zlib inflate 返回 Z_DATA_ERROR “不正确的标头检查”

> ID：15480866
> 
> 赞同：4
> 
> 时间：2013-03-18T15:41:16.267
> 
> 标签：compression, zlib, deflate, spdy

我正在尝试在 Web 服务器上开发自己的 SPDY 支持实现，SPDY 是 Google 实验性协议，用于减少加载网页的延迟。客户端/服务器交互通过“流”发生，即客户端和服务器之间名为“帧”的 SPDY 信息单元的双向交换。其中一些帧中有一个标题块，并且这个块总是被压缩的。我正在使用以下函数（Web服务器是用C编写的）来解压“头块”，压缩/解压算法是deflate，所以zlib是这样的：

```
int spdy_decompress_header_block( Byte* data, size_t data_len, unsigned char* processed, size_t* processed_len, z_stream* decomp) {

if (!decomp) {
    // I should return error...
    spdy_log_error("Error occurred getting decompressor!!!");
    return -1;
}

char decomp_buffer[HEADER_CHUNK_MAX_SIZE];
size_t decompressed_len = 0;
int rv = -1;

inflateReset(decomp);
decomp->next_in = data;
decomp->avail_in = data_len;
while (decomp->avail_in > 0) {

    decomp->next_out = (Byte*)decomp_buffer;
    decomp->avail_out = HEADER_CHUNK_MAX_SIZE;

    rv = inflate(decomp,Z_SYNC_FLUSH);

    if (rv == Z_NEED_DICT) {

        uLong dictionary_id = calculate_dictionary_id((Byte*)SPDY_dictionary, sizeof(SPDY_dictionary));

        if (decomp->adler == dictionary_id){

            rv = inflateSetDictionary(decomp, (Byte*)SPDY_dictionary, sizeof(SPDY_dictionary));
            rv = inflate(decomp, Z_SYNC_FLUSH);
        }

    }

    if ((rv == Z_OK) || ((rv == Z_BUF_ERROR) && (decomp->avail_in == 0))) {
        decompressed_len = HEADER_CHUNK_MAX_SIZE - decomp->avail_out;
        if (decompressed_len > 0) {
            memcpy(processed + *processed_len, decomp_buffer, decompressed_len);
            *processed_len += decompressed_len;
        }

    } else {
        if(rv == Z_DATA_ERROR){
            spdy_log_error("Error inflating headers:  Z_DATA_ERROR encountered" );
        }else{
            spdy_log_error("Error inflating headers!!!");
        }
        return -1;
    }

}
return *processed_len; 
```

}

~~SPDY 规范建议为 SPDY 会话中的每个帧（对应于 TCP 连接）中的每个帧~~重用相同的压缩器/解压缩器，这样每个标头块都受到 z_stream 的威胁，内部状态已经通过使用字典“预热” （也包括在 SPDY 规范中）。字典设置和z_stream初始化成功，第一块解压正常，第二帧块解压失败

> rv = 膨胀（decomp，Z_SYNC_FLUSH）；

返回值为 -3 (Z_DATA_ERROR)，decomp->msg 设置为“Incorrect header check”。在我看来，inflate 找不到 zlib 标头。压缩和解压缩数据是通过按照谷歌规范的建议使用 Z_SYNC_FLUSH 调用 deflate() 和 inflate() 来完成的，我在 chromium（我实际用于测试的浏览器）源代码中检查了这一点以确保。第一个块（成功解压）是：

```
00111000 11101010 11011111 10100010 01010001 10110010 01100010 11100000 01100110 01100000
10000011 10100100 00010111 00000110 01111011 10111000 00001011 01110101 00110000 00101100
...
00001000 01001110 01001100 01001011 00101100 11001010 10000100 01101010 01100010 01100000
10000111 01000110 00001001 00000011 00000111 00101100 10100110 00000000 00000000 00000000
00000000 11111111 11111111 
```

而第二个街区（这让我发疯）是：

```
00011010 01110110 00010001 00000011 00010000 01000000 10111001 10001001 00010101 10111010 10001001 11101001 10101001 10110110 00000110 00000000 00000001 01000100 01101110 11000100 00000000 00000100 10010000 00111110 01000000 00000000 00001101 10001110 10001000 00000001 00000000 00000000 00000000 11111111 11111111 
```

在他们两个中，我都可以识别`Z_SYNC_FLUSH`预告片（`00FF`），但我无法确定第二帧是否在其开头有正确的标题。我的问题：第二个压缩内容实际上是无标题的吗？并且，在这种情况下，我可以通过哪种方式解压这个流，也许使用原始的 deflate 解压（使用 inflateBack()）？

就像我在下面的评论中简要解释的那样，错误出现在 inflateReset() 调用中，因为它破坏了使用 00FF 预告片获得的压缩器和解压缩器之间的同步。最后，代码的正确版本是：

```
int spdy_decompress_header_block( Byte* data, size_t data_len, unsigned char* processed,     size_t* processed_len, z_stream* decomp) {

if (!decomp) {
    // I should return error...
    spdy_log_error("Error occurred getting decompressor!!!");
    return -1;
}

char decomp_buffer[HEADER_CHUNK_MAX_SIZE];
size_t decompressed_len = 0;
int rv = -1;

decomp->next_in = data;
decomp->avail_in = data_len;
while (decomp->avail_in > 0) {

    decomp->next_out = (Byte*)decomp_buffer;
    decomp->avail_out = HEADER_CHUNK_MAX_SIZE;

    rv = inflate(decomp,Z_SYNC_FLUSH);

    if (rv == Z_NEED_DICT) {

        uLong dictionary_id = calculate_dictionary_id((Byte*)SPDY_dictionary, sizeof(SPDY_dictionary));

        if (decomp->adler == dictionary_id){

            rv = inflateSetDictionary(decomp, (Byte*)SPDY_dictionary, sizeof(SPDY_dictionary));
            rv = inflate(decomp, Z_SYNC_FLUSH);
        }

    }

    if ((rv == Z_OK) || ((rv == Z_BUF_ERROR) && (decomp->avail_in == 0))) {
        decompressed_len = HEADER_CHUNK_MAX_SIZE - decomp->avail_out;
        if (decompressed_len > 0) {
            memcpy(processed + *processed_len, decomp_buffer, decompressed_len);
            *processed_len += decompressed_len;
        }

    } else {
        if(rv == Z_DATA_ERROR){
            spdy_log_error("Error inflating headers:  Z_DATA_ERROR encountered" );
        }else{
            spdy_log_error("Error inflating headers!!!");
        }
        return -1;
    }
}
return *processed_len;
} 
```

有关更多信息，请参阅有趣的：http: [//www.bolet.org/~pornin/deflate-flush.htm](http://www.bolet.org/~pornin/deflate-flush.htm)

# tsql - SQL hashbytes 更新语句不符合预期

> ID：15480867
> 
> 赞同：3
> 
> 时间：2013-03-18T15:41:18.000
> 
> 标签：tsql

我正在尝试使用 hashbytes 命令更新 SQL Server r2 上的列。这是命令的简化版本：

```
COMMAND: "UPDATE [tbl] SET [checksum] = HASHBYTES('MD5',[field1])" 
```

问题是，它会在所有字段中写入这样的奇怪字符：

`"˜Iý¸¶C"KéS©c"`

但是，如果我进行选择（使用相同的字段）：

```
select HASHBYTES('MD5',[field1]) from [tbl]; 
```

它返回一个正确的字符串：

```
0x9849FDB80C17B64322DA094BE963A963 
```

任何人都知道它为什么会这样做。我已经尝试过测试数据库并且更新命令按预期工作。但它不适用于我们的生产服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:46:13.280

The reason you are getting this is because HASHBYTES returns a binary data type, and this is not text.

Using the build in function fn_varbintohexstr you can convert the binary data into text, as follows:

```
UPDATE [tbl] SET [checksum] = master.dbo.fn_varbintohexstr(HASHBYTES('MD5',[field1])) 
```

# java - 当我引入一个while循环时，我收到变量可能未初始化的错误消息......为什么会这样？

> ID：15480868
> 
> 赞同：0
> 
> 时间：2013-03-18T15:41:18.537
> 
> 标签：java, methods

我有一个调用方法 1 的 main 调用方法 2：

```
 public class azza_wahada_A3Q1 {
           public static void main (String[] args) {
           Method1 m1 = new Method1();

      int age = m1.getValidNumber("Please enter your age.", 0, 110);

    //int age = m2.getInteger("Please enter your age.");
    System.out.println("u r age is \n"+age);
    }
    }

public class Method1 {

public static int getValidNumber(String prompt, int min, int max){
   int input;
   Method2 m2 = new Method2();
   Method3 m3 = new Method3();
   Boolean range = false;

   while(range){
        input = m2.getInteger(prompt);

        if (input > min && input < max){
            range = true;
           // return input;
        }
        else{
            m3.showError(input,min, max);
            range = false;
        }

   }
   return input;
  }
}
import javax.swing.JOptionPane;
public class Method2 {
  public static int getInteger(String prompt){

  String message;
  int getInt;

  message = JOptionPane.showInputDialog(null, prompt);
  getInt =  Integer.parseInt(message);
  return getInt ;
}

}
import javax.swing.JOptionPane;
public class Method3 {
  public static void showError(int number, int min, int max){

 String error_message;
 error_message = JOptionPane.showInputDialog(null, "Please enter a new number");

}

} 
```

为什么会这样？代码在没有 while 循环的情况下工作正常，当我引入循环时，我收到错误消息，说我的输入变量可能尚未初始化，在方法 1 中的返回输入处显示错误。这是怎么回事？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:46:48.643

使用`while`循环，理论上可能`while`不会执行循环，也就是说，当条件`range`简单地设置为 false 时。编译器不知道循环是否会被执行，因此它认为变量可能`input`没有被初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:07:50.577

您不能在方法中声明变量（在 Java 中）。

当您声明任何本地/块/方法变量时，它们不会获得默认值。

您必须在访问之前分配一些值，否则编译器会抛出错误。

所以您的解决方案是：由于您使用的是 int 输入，因此将其替换为 int input = 0;

更多和快速信息：[http ://anotherjavaduke.wordpress.com/2012/03/25/variable-initialization-and-default-values/](http://anotherjavaduke.wordpress.com/2012/03/25/variable-initialization-and-default-values/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:42:33.230

您需要在声明时初始化局部变量。

```
int input = 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T15:46:23.340

Note that your control variable is `range = false`, so in fact the body of that loop never executes and `input` is not initialized.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T15:46:34.480

You need to change `range` to be `true`, and set it to `false` inside the `while` loop.

In your code, you're never entering the `while` loop, thus, the variable is never initialized.

This causes `input` to never be initialized. Change it and it should work.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T15:46:59.093

```
 the code works fine without the while loop, 
```

当然，因为您要做的第一件事是：

```
input = m2.getInteger(prompt); 
```

从而初始化`input`. 但是，事实上，当将它包装在一个 while 循环中时，它可能不会执行。就目前而言，它不会执行，因为条件为假。

# java - Java并发多读/原子写

> ID：15480872
> 
> 赞同：0
> 
> 时间：2013-03-18T15:41:28.340
> 
> 标签：java, concurrency

我正在尝试在 java 中实现一个 cuncurrent 读取/原子写入。

```
static int atom = 0;

static boolean flag = false;

public static void main(String[] args) {

  new Thread(new Reader()).start();
  new Thread(new Reader()).start();
  new Thread(new Reader()).start();

  Timer timer = new Timer();
  timer.schedule(new TimerTask() {
    @Override
    public void run() {
      write();
    }
  }, 3000);
}

static void write() {
  flag = true;

  Thread.sleep(1000);
  atom++;

  flag = false;
}

static class Reader implements Runnable {

  @Override
  public void run() {
    while (true) {
      Thread.sleep(5);

      if (flag) {
        continue;
      }

      System.out.println(atom);
    }
  }
} 
```

当我的线程读取原子变量时，读取完成，直到标志标记为真，并在标志关闭时在值更改后继续。

做这个的最好方式是什么？使用同步块？

谢谢，费德拉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:59:54.867

多部分答案。在第 1 部分中，我将回答实际问题。在第 2 部分中，我将进行一些社论。

* * *

你在这里有各种各样的竞争，包括数据竞赛。您没有任何发生前的订单，因此 JIT 完全有权改变它：

```
while(true) {
    ...
    if (flag) {...}
} 
```

进入这个：

```
boolean flagCache = flag;
while(true) {
    if (flagCache) { ... }
} 
```

请注意，`flagCache`在第二个版本中永远不会更新。JVM 没有义务更新它，因为`flag`没有标记为`volatile`.

除此之外，您还遇到了`write`您似乎已经注意到的竞态条件，并且`synchronized`块确实可以提供帮助。该方法是创建一个单独的`private static final Object lock = new Object()`，然后在该`write`方法内同步。这样，写入将在该对象上同步，而读取则不会。如果你走这条路线，你也应该标记`atom`为`volatile`。而且您绝对不需要或不希望使用`Thread.sleep(1000)`该`write`方法，尤其是不在一个`synchronized`块内。如果您在写入时有任何类型的并发性，那将造成很大的瓶颈。

（如果你做对了事情，实际上并不严格需要标记`atom`为`volatile`[你可以捎带前发生的事情 - 保证阅读 from`volatile flag`给你]，但这是一个微妙而棘手的操作，除非你真的试图优化，否则最好避免见鬼，并且还认为自己是 JMM/并发方面的高级程序员。）

说到瓶颈，你`Thread.sleep(5)`在[繁忙的等待](http://en.wikipedia.org/wiki/Busy_waiting)循环中作为一个有趣的权衡值得一提。没有它，读取线程可能会大量旋转，从而浪费 CPU。但是有了它，他们可能会无缘无故地旋转*太多。*但实际上，您根本不需要`flag`，或者忙等待循环。如果您只是将其标记`atom`为`volatile`并同步其写入，那么它的读取将正常进行。在写入 volatile 字段和读取它之间存在先发优势。

* * *

但我认为@Damian Jeżewski 就在这里。An`AtomicInteger`可以简单、轻松且更有效地完成这个技巧（因为它使用[比较和设置](http://en.wikipedia.org/wiki/Compare-and-swap)而不是阻塞的、潜在的上下文切换`synchronized`块）。

多线程的一般方法应该几乎总是在使用低级构造之前尝试使用高级构造（即，在 中的东西`java.util.concurrent.*`）（例如`volatile`或什`synchronized`至，并且绝对是在之前`Object.wait/notify`）。当然，这不是一个硬性规定——只是一般准则。在这种情况下，看看有多少想法必须进入一个非常简单的要求 - 具有高并发读取的线程安全写入 -`AtomicInteger.incrementAndGet`为您提供“免费”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:43:50.100

`AtomicInteger`从`java.util.concurrent.atomic`包装中使用不是更好吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:45:04.167

您需要`synchronize`在类上，或将和声明`flag`为`atom`变量`volatile`，否则一个线程执行的并发修改不能保证在其他线程上可见。

您也可以使用[`CountDownLatch`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)计数为 1 的 a，而不是等到`flag`is `true`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-05T17:10:40.877

代码中的问题。1\. atom++ 引入了[这里解释](http://fearlessdeveloper.com/race-condition-concurrency-problems/)的竞争条件 2\. writer 更新的*标志*值可能不会立即对 reader 可见 3\. writer 更新的*atom*值可能不会立即对 reader 可见

以下是使其线程安全所需的 2 个简单步骤。

1.  正如 Damien 所指出的，制作*原子*AtomicInteger。
2.  标记*标志*易变

# java - 将 Twitter 集成到我的 Android 应用程序

> ID：15480873
> 
> 赞同：2
> 
> 时间：2013-03-18T15:41:29.163
> 
> 标签：java, android, twitter, httpconnection

我正在尝试将我的应用程序与 Twitter 集成。但是我遇到了一些错误。我已经使用了[这个站点](http://www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/)的代码。我为我的应用创建了一个 API。我已将网站的 URL 设置为[http://www.androidhive.info](http://www.androidhive.info)并将回调 URL 设置为[http://androidhive.info](http://androidhive.info)。我更新了我的消费者和消费者密钥。

我不确定为什么会收到此错误。我在此处附加了错误 logcat：

```
03-18 21:36:13.971: E/AndroidRuntime(1339): FATAL EXCEPTION: main
03-18 21:36:13.971: E/AndroidRuntime(1339): android.os.NetworkOnMainThreadException
03-18 21:36:13.971: E/AndroidRuntime(1339):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1084)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:158)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:65)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at twitter4j.internal.http.HttpClientWrapper.post(HttpClientWrapper.java:102)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at twitter4j.auth.OAuthAuthorization.getOAuthRequestToken(OAuthAuthorization.java:121)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at twitter4j.auth.OAuthAuthorization.getOAuthRequestToken(OAuthAuthorization.java:104)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at twitter4j.TwitterBaseImpl.getOAuthRequestToken(TwitterBaseImpl.java:276)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at com.androidhive.twitterconnect.MainActivity.loginToTwitter(MainActivity.java:236)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at com.androidhive.twitterconnect.MainActivity.access$1(MainActivity.java:223)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at com.androidhive.twitterconnect.MainActivity$1.onClick(MainActivity.java:123)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at android.view.View.performClick(View.java:3480)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at android.view.View$PerformClick.run(View.java:13983)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at android.os.Handler.handleCallback(Handler.java:605)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at android.os.Looper.loop(Looper.java:137)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at android.app.ActivityThread.main(ActivityThread.java:4340)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at java.lang.reflect.Method.invokeNative(Native Method)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at java.lang.reflect.Method.invoke(Method.java:511)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-18 21:36:13.971: E/AndroidRuntime(1339):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:02:57.697

> android.os.NetworkOnMainThreadException

From Android 3.0 you can't attempt to perform networking operation from Main(UI) Thread. So you have to move your code into background Thread and best solution is an usage of `AsyncTask` to reach your goal.

It's designated for tasks as yours. Also generally is a bad practise to make some long calculations, networking and other stuff on UI Thread. You should let your Activity classes clean and separate logic of application from an appearance.

**Main advantages of AsyncTask:** it's generic type(type safe), offers a few methods if you want to announce an user that *"something is changed"* and implementation isn't difficult to understand.

If you want some inspiration look at [Zwitscher's github](https://github.com/pilhuhn/ZwitscherA/blob/master/src/de/bsd/zwitscher/account/TwitterLoginActivity.java).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:47:47.393

在主线程上执行网络操作是不好的做法，这就是你看到这个的原因。它被政策所阻止。如果您确实必须这样做以进行测试，请将以下内容放入您的 OnCreate：

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 
```

请记住，这样做是非常糟糕的做法，理想情况下应该将您的网络代码移动到一个`AsyncTask`或一个`Thread`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:58:06.580

您应该将尝试使用 Twitter API（或执行任何其他网络操作）的代码移至新的`AsyncTask`或新的`Thread`.

# java - 将 PrimeFaces p:wizard 绑定到复合组件

> ID：15480875
> 
> 赞同：2
> 
> 时间：2013-03-18T15:41:32.033
> 
> 标签：java, jsf-2, binding, primefaces, composite-component

我需要从复合组件内部访问 PrimeFaces 向导。我使用 Mojarra 2.1.13、PrimeFaces 3.4.2 和 Spring Web Flow 2.3.1.RELEASE。我的小脸看起来像这样：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<composite:interface componentType="actionWizard">  
    <composite:attribute name="bean" type="java.lang.Object" required="true" />
    <composite:attribute name="name" type="java.lang.String" required="true" />
    <composite:attribute name="widgetVar" type="java.lang.String" required="true" />
    <composite:attribute name="header" type="java.lang.String" />    
</composite:interface>
<composite:implementation>
     <p:wizard id="#{cc.attrs.name}" widgetVar="#{cc.attrs.widgetVar}"
         flowListener="#{cc.onFlowProcess}" showStepStatus="false"
         showNavBar="true" binding="#{cc.wizard}">
         ... tabs
     </p:wizard>

</composite:implementation> 
```

以下是组件的一部分：

```
@FacesComponent(value="actionWizard")  
public class ActionWizard extends UINamingContainer {
    ...
    private Wizard wizard;
    ...

    public ActionWizard() {     
    }

    public Wizard getWizard() {
        return wizard;
    }

    public void setWizard(Wizard wizard) {
        this.wizard = wizard;
    }

} 
```

我收到一个错误：目标无法访问，标识符“cc”解析为 null -

```
org.springframework.webflow.execution.FlowExecutionException: Exception thrown in state 'accounts' of flow 'actions-acc-flow'
at org.springframework.webflow.engine.impl.FlowExecutionImpl.wrap(FlowExecutionImpl.java:571)
at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:262)
at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
at org.springframework.faces.webflow.JsfFlowHandlerAdapter.handle(JsfFlowHandlerAdapter.java:48)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.geneous.client.web.servlet.ResourceAuthorizationFilter.doFilter(ResourceAuthorizationFilter.java:49)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: javax.faces.el.PropertyNotFoundException: javax.el.PropertyNotFoundException: /resources/custom/actionWizard.xhtml @21,73 binding="#{cc.wizard}": Target Unreachable, identifier 'cc' resolved to null
at javax.faces.component.ValueBindingValueExpressionAdapter.setValue(ValueBindingValueExpressionAdapter.java:154)
at org.springframework.faces.webflow.JsfViewFactory.processTree(JsfViewFactory.java:180)
at org.springframework.faces.webflow.JsfViewFactory.processTree(JsfViewFactory.java:185)
at org.springframework.faces.webflow.JsfViewFactory.processTree(JsfViewFactory.java:185)
at org.springframework.faces.webflow.JsfViewFactory.processTree(JsfViewFactory.java:185)
at org.springframework.faces.webflow.JsfViewFactory.processTree(JsfViewFactory.java:185)
at org.springframework.faces.webflow.JsfViewFactory.processTree(JsfViewFactory.java:185)
at org.springframework.faces.webflow.JsfViewFactory.processTree(JsfViewFactory.java:185)
at org.springframework.faces.webflow.JsfViewFactory.processTree(JsfViewFactory.java:185)
at org.springframework.faces.webflow.JsfViewFactory.processTree(JsfViewFactory.java:185)
at org.springframework.faces.webflow.JsfViewFactory.processTree(JsfViewFactory.java:185)
at org.springframework.faces.webflow.JsfViewFactory.getView(JsfViewFactory.java:111)
at org.springframework.webflow.engine.ViewState.resume(ViewState.java:193)
at org.springframework.webflow.engine.Flow.resume(Flow.java:545)
at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:258)
... 28 more 
```

# java - 线程、Arraylist 对内存的影响 - Java

> ID：15480878
> 
> 赞同：0
> 
> 时间：2013-03-18T15:41:41.860
> 
> 标签：java, multithreading, jvm, out-of-memory

我的输入数据是一个列表中的 50,000 条（或更多）电子邮件消息，并且在 to、cc 和 bcc 中的多个收件人之间存在大量重复。因此，我需要从此列表中提取唯一消息。

我必须比较 Message 的某些属性（发件人、收件人列表和包含（仅限字符串））以确定是否相同。

现在，我将这 50,000 条消息分成 50 个小 1000 条消息列表，并在其线程中运行每个小列表的重复项。

所有线程都将其输出添加到一个列表中，最后我检查该线程中的重复项。当我这样做时，我的 JVM 达到了 1.25 GB 内存。

因此，如果我尝试推送超过 50,000 条消息，则会出现内存不足错误。

我有一个名为 的方法`removeDeduplicate(array of messages, blank list)`，它将消息数组和空列表作为输入，并在该空白列表中返回唯一消息。这是我的代码：

```
public Message[] processForDeduplication(Message[] msgs) throws MessagingException, IOException, InterruptedException {
    final List<Message> output = new ArrayList<Message>();

    if(msgs.length < MAX_MSG){
        output.addAll(removeDeduplication(msgs, new ArrayList<Message>()));
    } else {
        List<Thread> threads = new ArrayList<Thread>();
        int index = 0, lastIndex = MAX_MSG;

        while(index < msgs.length){
            if(lastIndex >= msgs.length) {
                lastIndex = msgs.length;
            }
            final Message[] temp = Arrays.copyOfRange(msgs, index, lastIndex);
            Thread t = new Thread(new Runnable(){
                @Override
                public void run() {
                    try {
                        output.addAll(removeDeduplication(temp, new ArrayList<Message>()));
                    } catch (MessagingException ex) {
                        logger.error(EmailComparator.class.getName() +  ex);
                    } catch (IOException ex) {
                        logger.error(EmailComparator.class.getName() +  ex);
                    }
                }
             });
             t.start();
             threads.add(t);
            index = lastIndex;
            lastIndex = lastIndex + MAX_MSG;
        }
        for(Thread t: threads){
            while(t.isAlive()){
                Thread.sleep(100);
            }
        }
        threads = null;
    }
    List<Message> results = removeDeduplication(convertToArray(output), new ArrayList<Message>());
    return convertToArray(results);
} 
```

我也在尝试微调我的代码以提高内存和性能。现在完成 50,000 条记录大约需要 12-15 秒，我希望是 5-6 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:16:52.453

我不确定你`Message`是什么所以我认为它是一个`javax.mail.Message`. 我创建了一个包装器对象，用于检查您指定的消息是否相等。该对象将`from`和`to`数组缓存为`Set`s - 这允许更快的等于比较，因为`Set`s 具有 O(1) 包含方法。
包装器还缓存 ，`hashCode`因此不必由`Set`.

```
public static class MessageWrapper {

    private final Message message;
    private final Set<Address> from;
    private final Set<Address> to;
    private final Object content;
    private final int hashCode;

    public MessageWrapper(Message message) throws MessagingException, IOException {
        this.message = message;
        this.from = new HashSet<Address>(Arrays.asList(message.getFrom()));
        this.to = new HashSet<Address>(Arrays.asList(message.getRecipients(Message.RecipientType.TO)));
        this.content = message.getContent();
        this.hashCode = calcHashCode();
    }

    public Message getMessage() {
        return message;
    }

    private int calcHashCode() {
        int hash = 7;
        hash = 37 * hash + (this.from != null ? this.from.hashCode() : 0);
        hash = 37 * hash + (this.to != null ? this.to.hashCode() : 0);
        hash = 37 * hash + (this.content != null ? this.content.hashCode() : 0);
        return hash;
    }

    @Override
    public int hashCode() {
        return hashCode;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final MessageWrapper other = (MessageWrapper) obj;
        if (this.from != other.from && (this.from == null || !this.from.equals(other.from))) {
            return false;
        }
        if (this.to != other.to && (this.to == null || !this.to.equals(other.to))) {
            return false;
        }
        if (this.content != other.content && (this.content == null || !this.content.equals(other.content))) {
            return false;
        }
        return true;
    }
} 
```

存储最昂贵的东西确实是`content`-您可能只想考虑存储`content.hashCode`然后进行比较；然而，这将允许发生冲突。

现在您需要做的就是将所有`Message`s 放入`MessageWrapper`s 并将其放入 a `HashSet`- 这将自动删除那些`equals()`

```
public Message[] processForDeduplication(final Message[] messages) throws MessagingException, IOException {
    final Set<MessageWrapper> messageWrappers = new HashSet<MessageWrapper>(messages.length, 1.0f);
    for (final Message m : messages) {
        messageWrappers.add(new MessageWrapper(m));
    }
    final List<Message> ms = new ArrayList<Message>(messages.length);
    for (final MessageWrapper wrapper : messageWrappers) {
        ms.add(wrapper.getMessage());
    }
    return ms.toArray(new Message[messages.length]);
} 
```

这有点混乱，因为你必须在`Message[]`最后将东西转换回 a 。

显然，如果您`Message`不是`javax.mail.Message`，实施可能会有所不同。您甚至可以直接在相关类上实现`equals`和实现。`hashCode`

# jquery - 单击 jQuery 时，我的第二个“打开”按钮没有响应

> ID：15480881
> 
> 赞同：0
> 
> 时间：2013-03-18T15:41:45.867
> 
> 标签：jquery, html, css

我正在尝试添加一个侧边栏，通过单击使用 jQuery 的按钮来显示和消失。但由于某种原因，我的 div“.sidebarBtn2”不能被点击？知道我做错了什么吗？

CSS：

```
.sidebar {
width: 200px;
height: 800px;
background: red;
border: 1px solid black;
position: absolute;
right: 0;
}

.sidebarBtn {
text-align: center;
height: 80px;
width: 20px;
border-top-left-radius: 30%;
border-bottom-left-radius: 30%;
background: orange;

position: absolute;
right: 198px;
top: 328px;
}

.sidebarBtn2:hover,
.sidebarBtn:hover {
cursor: pointer;
}

.sidebarBtn2 {
text-align: center;
height: 80px;
width: 20px;
border-top-left-radius: 30%;
border-bottom-left-radius: 30%;
background: orange;

position: absolute;
right: 0px;
top: 328px; 
} 
```

html:

```
<!DOCTYPE html>
<html>
<head>
    <link rel='stylesheet' type='text/css' href='stylesheet.css'/>
</head>
<body>
    <div class="sidebarBtn">
        C</br>l</br>o</br>s</br>e</br>
    </div>
    <div class="sidebar"></div>
    <div class="sidebarBtn2">
        O</br>p</br>e</br>n</br>
    </div>

    <script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
    <script src="script.js"></script>
</body>
</html> 
```

Javascript

```
$(document).ready(function() {
$(".sidebarBtn2").hide();

$(".sidebarBtn").click(function() {
        $(".sidebarBtn").hide();
        $(".sidebar").hide();
    $(".sidebarBtn2").show();
});

$(".sidebarBtn2").click(function() {
    $("sidebarBtn2").hide();
    $("sidebar").show();
    $("sidebarBtn").show();
});
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:44:43.963

您`.`在按钮 2 的类名前面缺少。试试这个：

```
$(".sidebarBtn2").click(function() {
    $(".sidebarBtn2").hide();
    $(".sidebar").show();
    $(".sidebarBtn").show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:46:22.827

Try this:

```
$(".sidebarBtn2").click(function() {

    // You can also use $(this).hide(); in place of $(".sidebarBtn2").hide();
    $(".sidebarBtn2").hide();       

    $(".sidebar").show();
    $(".sidebarBtn").show();
}); 
```

# knockout.js - 淘汰赛js坚持非常简单但不能

> ID：15480885
> 
> 赞同：0
> 
> 时间：2013-03-18T15:41:54.387
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0, knockout-mvc

我从服务器获取了一些 json 对象，但无法将它们显示在我的视图中。我做错了什么。

我在这里有一个 jsfiddle：http: [//jsfiddle.net/cy6kC/](http://jsfiddle.net/cy6kC/)

```
 var volModel = function() {
 self.Vol = ko.observable({"ID": 1,"Name": 1});
 }
 var volunteerModel = new volModel();
 ko.applyBindings(new volunteerModel()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:56:10.157

您当前的代码有两个问题：

**第一的**

```
var volunteerModel = new volModel();
ko.applyBindings(new volunteerModel()); 
```

会抛出一个`TypeError: object is not a function`因为`volunteerModel`是一个对象，所以你不能用 with 调用`new`。你只需要写：

```
var volunteerModel = new volModel();
ko.applyBindings(volunteerModel); 
```

**第二**

您当前的绑定已损坏

```
<input data-bind="value: Vol.ID" /> 
```

因为`Vol`是可观察的（这是一个函数），所以`()`如果您在表达式中使用它，则需要：

```
<input data-bind="value: Vol().ID" /> 
```

演示[JSFiddle](http://jsfiddle.net/CfEXJ/)。

# javascript - 当鼠标在元素上时，Javascript在间隔中执行函数

> ID：15480887
> 
> 赞同：2
> 
> 时间：2013-03-18T15:42:01.587
> 
> 标签：javascript, jquery, coffeescript, jquery-events

我想实现一个简单的东西（在这里模拟）

```
[+] 123 [-] 
```

当用户按住鼠标`+`或`-`总和增加或减少时。

因此，我编写了一个简单的脚本来执行此操作（[http://jsfiddle.net/wFAfy/3/](http://jsfiddle.net/wFAfy/3/)），似乎可行，但我对这种方法的效率/稳健性感到好奇，因为我在前面不是很有经验-结尾。

或者有没有更好的方法来做到这一点（也许使用插件或其他东西）？

HTML：

```
<p id="sum">0<p>
<a id="inc" href="#">inc on hover</a> | 
<a id="dec" href="#">dec on hover</a> 
```

JavaScript：

```
sum = $("#sum")
inc = $("#inc")
dec = $("#dec")

currentSum = -> parseInt sum.text()

incSum = -> sum.text currentSum() + 1    
decSum = -> sum.text currentSum() - 1

run = (f, direction) ->
  -> 
    return unless running[direction] == true
    f()

running = { inc: false, dec: false }

inc.mouseenter -> running.inc = true
inc.mouseleave -> running.inc = false
dec.mouseenter -> running.dec = true
dec.mouseleave -> running.dec = false

setInterval run(incSum, "inc"), 200
setInterval run(decSum, "dec"), 200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:49:27.333

我同意 Ian 的建议 - 这是该实现的示例：

```
$sum = $ '#sum'
$inc = $ '#inc'
$dec = $ '#dec'

currentSum = 0

incSum = -> $sum.text currentSum++
decSum = -> $sum.text currentSum--

interval = null

$inc.on
  'mouseenter' : ->
    interval = setInterval incSum, 200
    incSum()
  'mouseleave' : -> clearInterval interval

$dec.on
  'mouseenter' : ->
    interval = setInterval decSum, 200
    decSum()
  'mouseleave' : -> clearInterval interval 
```

# windows - %~dp0 不返回包含运行脚本的文件夹

> ID：15480892
> 
> 赞同：1
> 
> 时间：2013-03-18T15:42:12.547
> 
> 标签：windows, batch-file, filepath

在批处理脚本上，与`%~dp0`. 问题是，在我的脚本的某些部分，`%~dp0`返回它应该返回的内容，即包含正在运行的脚本的文件夹的驱动器的完整路径（这里：'C:\Data\name\App\App\' ）。在代码的其他一些部分，`%~dp0`只返回包含脚本的驱动器（这里：'C:\'）。

这是我的脚本（有史以来的第一个批处理脚本：D）：

```
@ECHO OFF

ECHO.
:: run the script with the command new-built.bat /all -arch x86 -config release

SETLOCAL EnableDelayedExpansion
SET options=arch version config
SET what_to_build=all lib
:: the three following lines returns what is expected
echo %%~dp0 is returning : %~dp0
echo %%~p0 is returning : %~p0
echo %%~d0 is returning : %~d0
echo The absolute path to this script is : %~dp0%0

:: read what to build, ie all or lib only
FOR %%i in (%what_to_build%) do if %1==/%%i (
SHIFT
GOTO %%i
)

::the following sections (:readoptions and :optlp) work together to collect the options entered in the command, used to launch this script. It saves the values the two arrays "options" and "what_to_build" array

:readoptions
echo Entered the read options label
rem -- initialises variables arch, version and config with empty string
FOR %%i IN (%options% badoptions) DO (SET %%i=)
:optlp
echo Entered the read options loop
SET _parm1=%1
IF NOT DEFINED _parm1 GOTO :END
IF DEFINED _parm1 FOR %%i IN (%options%) DO IF .%_parm1%==.-%%i SET %%i=%2
IF DEFINED %%i shift&shift&(SET _parm1=)
IF DEFINED _parm1 SET badoptions=%badoptions% %1&SHIFT
GOTO :optlp

:all
echo Entered the all label ...
CALL :readoptions %*
echo About to build complete app for x86 in release config
set CYGWIN_DIR="%~dp0" 
:: I want this line to return "C:\Data\name\App\App\" without quotes, but it's returning "C:\"
echo Cygwin dir (not returning what I want): %CYGWIN_DIR%
rem build lib
call %~dp0\build_scripts\build_lib_x86.bat
rem build the Visual Studio Solution
start "Build App x86 - release config" /W "%~dp0%build_scripts\build_app_x86_release.bat"

goto :end

:END
echo Program is done
endlocal 
```

这是我得到的痕迹：

```
%~dp0 is returning : C:\Data\name\App\App\
%~p0 is returning : \Data\name\App\App\
%~d0 is returning : C:
The absolute path to this script is : C:\Data\name\App\App\new-build.bat
Entered the all label ...
Entered the read options label
Entered the read options loop
Entered the read options loop
Entered the read options loop
Entered the read options loop
Entered the read options loop
Entered the read options loop
Program is done
About to build complete app for x86 in release config
Cygwin dir (not returning what I want) : "C:\"
The system cannot find the path specified.
Program is done 
```

一定有什么事情发生了，我错过了。任何帮助将不胜感激。

最好的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:01:59.940

Ooooh - 大麻烦！

```
@ECHO OFF

ECHO.
:: run the script with the command new-built.bat /all -arch x86 -config release

SETLOCAL EnableDelayedExpansion
SET options=arch version config
SET what_to_build=all lib
:: the three following lines returns what is expected
echo %%~dp0 is returning : %~dp0
echo %%~p0 is returning : %~p0
echo %%~d0 is returning : %~d0
echo The absolute path to this script is : %~dp0%0 
```

给定 new-built.bat /all -arch x86 -config release 然后`%1`是`/all`

```
:: read what to build, ie all or lib only
FOR %%i in (%what_to_build%) do if %1==/%%i (
SHIFT
GOTO %%i
) 
```

所以，因为`%1`is `/all`，这将`:all`与`%1=-arch %2=x86 %3=-config %4=release`BUT`%*=/all -arch x86 -config release`

那时同上，但`%1`会`/lib`到达`:lib`

但是对于 %1 的任何其他值，处理将直接从这里收费到下一条语句....

* * *

...所以我们到达`:all`了`%1=-arch %2=x86 %3=-config %4=release`但是`%*=/all -arch x86 -config release`

```
:all
echo Entered the all label ...
CALL :readoptions %* 
```

由于 :readoptions 被调用，`%*`每个***ORIGINAL***参数都被传递给 :readoptions 但是`goto :EOF`你没有把它修改为 'goto END `and hence the message`Program is done `is displayed - and processing returns to the statement following the`CALL'

```
echo About to build complete app for x86 in release config
set CYGWIN_DIR="%~dp0" 
:: I want this line to return "C:\Data\name\App\App\" without quotes, but it's returning "C:\"
echo Cygwin dir (not returning what I want): %CYGWIN_DIR%
rem build lib
call %~dp0\build_scripts\build_lib_x86.bat
rem build the Visual Studio Solution
start "Build App x86 - release config" /W "%~dp0%build_scripts\build_app_x86_release.bat" 
```

* * *

让我们重新开始...

我相信您实际上希望为 CYGWIN_DIR 分配您的 CYGWIN 目录名称的值。可能我们可以解决这个问题，但如果它永久设置在您的环境中会更好。简单的方法是：

```
SETX CYGWIN_DIR "wherever your cygwin dir is"
SETX CYGWIN_DIR "wherever your cygwin dir is" /M 
```

（第一个为当前登录会话中的新 CMD 实例分配值，第二个为将来的登录会话分配值。IOW，执行第二个并重新启动...如果您愿意，可以使用 SETX CYGWIN_DIR "" 删除该条目）

```
@ECHO OFF
ECHO.
:: run the script with the command new-built.bat /all -arch x86 -config release

SETLOCAL EnableDelayedExpansion
SET options=arch version config
SET SLASHOPTS=ALL LIB
(SET SWITCHES=)
:: %CD% is the magic pseudovariable for the current directory.
:: quote it if you wish
SET CYGWIN_DIR=%CD%
:: The above line of course only if you want CYGWIN_DIR to be set to the current directory
CALL :READOPTIONS %*
:: NOTE THAT %badoptions% now contains a list of the items NOT
:: involved in the OPTIONS, SWITCHES or SLASHOPTIONS
:: read what to build, ie all or lib only
:: ONE WAY...
IF DEFINED ALL goto ALL
IF DEFINED LIB goto LIB
:: ANOTHER WAY to do the same thing
for %%i in (%SLASHOPTS%) DO if defined %%i goto %%i
:: EEK! Neither ALL not LIB was specified - what to do?
echo EEK! Neither ALL not LIB was specified - exiting!
goto :EOF

:all
echo Entered the all label ...
echo About to build complete app for x86 in release config
echo Cygwin dir (not returning what I want): %CYGWIN_DIR%
rem build lib
:: I'll assume %CYGWIN_DIR%\build_scripts is where you're keeping this batch
call %CYGWIN_DIR%\build_scripts\build_lib_x86.bat
rem build the Visual Studio Solution
start "Build App x86 - release config" /W "%CYGWIN_DIR%\build_scripts\build_app_x86_release.bat"

goto end

:LIB
echo LIB processing not yet defined
goto end

:END
echo Program is done
endlocal

:readoptions
echo Entered the read options label
rem -- initialises variables arch, version and config with empty string
:readoptions
FOR %%i IN (%options% %slashopts% %switches% badoptions) DO (SET %%i=)
:optlp
SET _parm1=%1
IF NOT DEFINED _parm1 GOTO :EOF
FOR %%i IN (%switches%) DO IF /i %_parm1%==-%%i SET %%i=Y&(SET _parm1=)
IF NOT DEFINED _parm1 shift&GOTO :optlp
FOR %%i IN (%slashopts%) DO IF /i %_parm1%==/%%i SET %%i=Y&(SET _parm1=)
IF NOT DEFINED _parm1 shift&GOTO :optlp
FOR %%i IN (%options%) DO IF /i %_parm1%==-%%i (
SET %%i=%2
IF DEFINED %%i shift&shift&(SET _parm1=)
)
IF DEFINED _parm1 SET badoptions=%badoptions% %1&SHIFT
GOTO :optlp 
```

请注意，我稍微修改了 :readoptions 以便您可以设置`-option anoptionvalue`or`-switch`或`/slashoption`

另请注意，您可以将部分从 :readoptions 传输到最后一个独立的批处理文件，例如`readoptions.bat`将该文件放在您的任何位置`path`（`set path`从提示中查看），然后任何批处理都可以执行

```
CALL READOPTIONS %* 
```

阅读您的选项/开关/斜线选项，因为您已在变量和批处理中单独指定它们`options`-并将包含任何剩余参数...`switches``slashopts``badoptions`

(Note on colons: call :routine parameterlist calls an INTERNAL routine with 'private' parameters `parameterlist` call routine parameterlist calls an EXTERNAL routine with 'private' parameters `parameterlist`; ie. the [batch] file 'routine`from somewhere on the`path`

```
goto :eof 
```

Is an inbuilt facility to go to the physical end-of-file. This terminates a CALL and returns to the line following OR exits the batch completely. )

# java - Java 服务器-客户端 readLine() 方法

> ID：15480894
> 
> 赞同：2
> 
> 时间：2013-03-18T15:42:16.213
> 
> 标签：java, sockets, client-server, readline, printwriter

我有一个客户端类和一个服务器类。如果客户端向服务器发送消息，服务器会将响应发送回客户端，然后客户端将打印它收到的所有消息。

例如，

如果客户端向服务器发送“A”，那么服务器将向客户端“1111”发送响应。所以我在客户端类中使用 readLine() 从服务器读取消息，然后客户端在控制台中打印“1111”。

如果客户端向服务器发送“B”，那么服务器将向客户端“2222\n 3333”发送响应。所以客户端的预期打印输出是：

“2222”

“3333”

因此，从服务器到客户端的响应消息可能有 1 行或 2 行，具体取决于它从客户端发送到服务器的消息。

我的问题是如何使用 readLine() 来读取从服务器发送到客户端的消息。更具体地说，如果我使用以下代码，

```
String messageFromServer;
while(( messageFromServer = inputStreamFromServer.readLine()) != null) {
    println(messageFromServer);
} 
```

它只会打印第一行，即使我继续从客户端向服务器发送消息也不会打印任何其他内容，因为 readLine() 将在读取第一行后停止。

**更新：** 更具体地说，我正在客户端类中寻找一些方法来一次读取包含来自服务器的 1 行或多行的消息。如果我不想更改从服务器发送到客户端的消息格式，我想知道是否有任何方法可以在客户端执行此操作。

**更新2** 为了让我的问题更清楚，我将在下面放置一些示例代码：

这是服务器：

```
import java.net.*;
import java.io.*;

public class Server {
 public static void main(String[] args) throws IOException {

  ServerSocket serverSocket = null;
  try {
    serverSocket = new ServerSocket(1234);
} catch (IOException e) {
    System.err.println("Could not listen on port: 1234.");
    System.exit(1);
}

Socket clientSocket = null;
try {
    clientSocket = serverSocket.accept();
} catch (IOException e) {
    System.err.println("Accept failed.");
}
 System.out.println("Connected");

PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

String textFromClient =null;
String textToClient =null;
textFromClient = in.readLine(); // read the text from client
if( textFromClient.equals("A")){
   textToClient = "1111";
}else if ( textFromClient.equals("B")){
   textToClient = "2222\r\n3333";
}

out.print(textToClient + "\r\n");  // send the response to client
 out.flush();
 out.close();
 in.close();
 clientSocket.close();
 serverSocket.close();
 }
} 
```

客户端：

```
public class Client {
public static void main(String[] args) throws IOException {

    Socket socket = null;
    PrintWriter out = null;
    BufferedReader in = null;
    BufferedReader read = new BufferedReader(new InputStreamReader(System.in));
    try {
        socket = new Socket("localhost", 1234);
        out = new PrintWriter(socket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    } catch (UnknownHostException e) {
        System.err.println("Don't know about host");
    } catch (IOException e) {
        System.err.println("Couldn't get I/O for the connection");
    }
    System.out.println("Connected");

    String textToServer;

    while((textToServer = read.readLine())!=null){
        out.print(textToServer + "\r\n" );  // send to server
        out.flush();

        String messageFromServer =null;
        while(( messageFromServer = textToServer=in.readLine()) != null){
            System.out.println(messageFromServer);
        }
    }
    out.close();
    in.close();
    read.close();
    socket.close();
}

private static void debug(String msg)
{
    System.out.println("Client: " + msg);
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:52:58.457

您不需要更改服务器发送的数据的格式，并且 readLine() 应该可以工作，但我怀疑服务器在编写可能解释事情的响应后没有刷新或关闭 OutputStream。
对 readLine() 的调用是否挂起？你在控制服务器代码吗？如果是这样，你能包括它吗？

修改后的课程按我的预期工作：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

public class ClientServerTest2
{

    public static void main(String[] args) throws Exception
    {
        Thread serverThread = new Thread(new Server());
        serverThread.start();
        Thread clientThread = new Thread(new Client());
        clientThread.start();

        serverThread.join();
        clientThread.join();
    }

    private static class Server implements Runnable
    {
        @Override
        public void run()
        {
            ServerSocket serverSocket = null;
            try
            {
                serverSocket = new ServerSocket(1234);

                Socket clientSocket = null;
                clientSocket = serverSocket.accept();
                debug("Connected");

                PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
                BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

                String textFromClient = null;
                String textToClient = null;
                textFromClient = in.readLine(); // read the text from client
                debug("Read '" + textFromClient + "'");
                if ("A".equals(textFromClient))
                {
                    textToClient = "1111";
                }
                else if ("B".equals(textFromClient))
                {
                    textToClient = "2222\r\n3333";
                }

                debug("Writing '" + textToClient + "'");
                out.print(textToClient + "\r\n"); // send the response to client
                out.flush();
                out.close();
                in.close();
                clientSocket.close();
                serverSocket.close();
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }

        }

        private static void debug(String msg)
        {
            System.out.println("Server: " + msg);
        }
    }

    private static class Client implements Runnable
    {

        @Override
        public void run()
        {
            Socket socket = null;
            PrintWriter out = null;
            BufferedReader in = null;
            BufferedReader read = new BufferedReader(new InputStreamReader(System.in));
            try
            {
                socket = new Socket("localhost", 1234);
                out = new PrintWriter(socket.getOutputStream(), true);
                in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                debug("Connected");

                String textToServer;

                textToServer = read.readLine();
                debug("Sending '" + textToServer + "'");
                out.print(textToServer + "\r\n"); // send to server
                out.flush();

                String serverResponse = null;
                while ((serverResponse = in.readLine()) != null)
                    debug(serverResponse); // read from server and print it.

                out.close();
                in.close();
                read.close();
                socket.close();
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
        }
    }

    private static void debug(String msg)
    {
        System.out.println("Client: " + msg);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:02:46.000

更改`while(( messageFromServer = inputStreamFromServer.readLine() != null)`为`while(( messageFromServer = inputStreamFromServer.readLine()) != null)`

实际上这甚至不应该编译....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:05:28.363

这是一个解决方法。

如果您想发送多个字符串，例如：“2222\n 3333”。

您可以通过在两个字符串之间添加分隔符（如：）来发送它们**：**`:` “2222 3333”。

然后你可以从服务器端调用 write 作为

```
clientOut.write("2222: 3333\n"); 
```

在客户端解析收到的字符串：

```
messageFromServer = inputStreamFromServer.readLine();
String strArray[] = messageFromServer.split(":");

strArray[0] : 2222

strArray[0] : 3333 
```

# nsis - nsis 文件夹参数目录

> ID：15480902
> 
> 赞同：0
> 
> 时间：2013-03-18T15:42:38.713
> 
> 标签：nsis

我希望有一个功能可以将一些文件添加到某个文件夹中，因为我需要添加更多文件。

这是我的函数代码：

```
Function "addElement"
    DetailPrint $0
    CreateDirectory $INSTDIR\data\Element\$0
    SetOutPath $INSTDIR\data\Element\$0

    File /r "${binFolder}\data\Element\$0\*.*"
FunctionEnd 
```

在这里我称之为：

```
strcpy $0 "Element_1"
call "addElement"

strcpy $0 "Element_2"
call "addElement"

strcpy $0 "Element_3"
call "addElement" 
```

nsis 给出了这个错误：

在该行`File /r...`给出*- >没有找到文件。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:05:44.353

`$0`是一个变量，变量在运行时使用，`File`指令需要在编译时知道文件名！

用宏替换函数：

```
!macro addElement fname
    DetailPrint "${fname}"
    CreateDirectory "$INSTDIR\data\Element\${fname}"
    SetOutPath "$INSTDIR\data\Element\${fname}"

    File /r "${binFolder}\data\Element\${fname}\*.*"
!macroend

...

Section

!insertmacro addElement foo
!insertmacro addElement bar
!insertmacro addElement baz 
```

# python - py2exe 找不到所有依赖项

> ID：15480906
> 
> 赞同：6
> 
> 时间：2013-03-18T15:43:01.923
> 
> 标签：python, py2exe, cx-freeze

我正在尝试从 python 代码创建一个 exe。我可以像这样从命令行很好地运行代码：

```
python myScript.py 
```

我已经从这里安装了 py2exe：http: [//sourceforge.net/projects/py2exe/files/py2exe/0.6.9/](http://sourceforge.net/projects/py2exe/files/py2exe/0.6.9/)

并且，有一个如下所示的 setup.py：

```
from distutils.core import setup
import py2exe

setup(console=['myScript.py']) 
```

而且，我像这样运行 setup.py：

```
python setup.py py2exe 
```

我在输出中得到以下信息：

```
The following modules appear to be missing
['Carbon', 'Carbon.Files', '__pypy__', '_scproxy', 'http_parser.http', 'http_parser.reader', 'jinja2._debugsupport', 'jinja2._markupsafe._speedups',
'jinja2.debugrenderer', 'markupsafe', 'pretty', 'socketpool', 'socketpool.util'] 
```

而且，果然，如果我尝试运行 exe，我会收到错误：

```
$ ./myScript.exe
Traceback (most recent call last):
  File "restkit\__init__.pyc", line 9, in <module>
  File "restkit\conn.pyc", line 14, in <module>
ImportError: No module named socketpool
Traceback (most recent call last):
  File "myScript.py", line 12, in <module>
ImportError: cannot import name Resource 
```

我需要做什么才能让 py2exe 找到依赖项？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:44:49.953

`Carbon`是两个不同的 Mac 特定事物的名称。

首先，在 2.x 中，在 Mac OS X 和 Mac Classic 构建中，标准库中都有一个[`Carbon`包](http://docs.python.org/2/library/carbon.html)，用于调用 Carbon/Toolbox API（以及，在 OS X 中，CoreFoundation 和朋友）。

其次，在 2.x 和 3.x 中，在 Mac OS X 上，使用 PyObjC，PyObjC 包装器`Carbon.Framework`被命名为`Carbon`. （PyObjC 不是标准库的一部分，但它确实随 Apple 构建的 Python 以及除了 python.org 的官方安装程序之外的大多数第三方构建提供。）

这些都不存在于 Windows 上。

`py2exe`尝试变得聪明，只导入与您的平台相关的东西。然而，这很容易被愚弄。例如，像这样：

```
try:
    import Carbon.Files
except:
    Carbon = collections.namedtuple('Carbon', 'Files')
    Carbon.Files = None

if Carbon.Files:
    Carbon.Files.whatever(…) 
```

……可能需要`py2exe`思考`Carbon.Files`。

现在，显然这不是您的全部问题，但这是一个非常大的危险信号，即`py2exe`模块依赖代码不适用于您的项目。您可能在各种其他模块中遇到类似的问题，因此它既缺少一些您需要的东西，又要求一些您没有的东西，这可能是导致您的实际问题的原因。

正如[常见问题解答](http://www.py2exe.org/index.cgi/FAQ)所解释的，您可以通过运行模块查找器代码来调试它，以查看它出错的地方，如下所示：

```
python -m py2exe.mf -d path/to/my_file.py 
```

您可以使用此信息来指导模块查找器代码，或重写您的代码，以免混淆`py2exe`.

或者，更简单地说，只是明确地在你的模块中包含和排除模块`setup.py`作为一种解决方法，而不用担心为什么它们会被错误地检测到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:59:36.727

py2exe 依赖于 python 版本。你所做的一切似乎都是正确的，我猜你安装了错误的版本。

# eclipse - eclipse 使用 perforce 时逐行签入（就像 intelliJ 是如何做到的）

> ID：15480908
> 
> 赞同：0
> 
> 时间：2013-03-18T15:43:06.393
> 
> 标签：eclipse, intellij-idea, perforce

所以这是一个我在谷歌上苦苦挣扎的问题（我不知道这些术语）——我确信某处有答案。

在 intelliJ 中，我可以按一些按钮（看到我的同事这样做）来查看谁签入了文件中的哪些代码行。这是非常漂亮的东西。

当与 perforce 结合使用时，eclipse 是否让我这样做？如果是这样，我该怎么做？

更新：现在我看到这是一个特定于 VC 的功能，让我扩展问题以包括 perforce 的使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:46:34.233

我不确定 Eclipse，但使用 P4V 工具，您可以使用“延时视图”。它非常强大且易于使用，并将帮助您详细了解谁更改了哪条线路。

请参阅：[http ://www.perforce.com/resources/tutorials/time-lapse-view](http://www.perforce.com/resources/tutorials/time-lapse-view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:08:18.070

P4Eclipse 插件有一个可从 Team 菜单获得的本机责备工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:55:04.993

在 Subversion 词汇表中，这称为“责备”（或“注释”，Subversive 插件支持：[https ://stackoverflow.com/a/224221/500478](https://stackoverflow.com/a/224221/500478)

# camera - Three.js：改变上轴的方法？

> ID：15480910
> 
> 赞同：18
> 
> 时间：2013-03-18T15:43:09.573
> 
> 标签：camera, three.js

我看到 ColladaLoader 有办法将 upAxis 设置为“Z”……有没有办法在 Three.js 中做到这一点，以便相机的上轴是 Z？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-18T16:21:50.703

您可以像这样设置相机`up`矢量：

```
camera.up.set( 0, 0, 1 ); 
```

然后，当您致电时`camera.lookAt( point )`，它将按您的预期工作。

编辑：更新到three.js r.68

# opencv - CImg 库中的 get_convolve() 函数正在使用哪个过滤器

> ID：15480918
> 
> 赞同：3
> 
> 时间：2013-03-18T15:43:27.243
> 
> 标签：opencv, convolution, cimg, imagefilter

CImg 库的 get_convolve() 函数（用 C 编写）使用了哪种过滤器？中位数或高斯或双边或其他？我试图了解该功能，以便可以在 PIL openCV 中使用类似的功能。在库的头文件 CImg.h 中，它说：

```
/**
   Compute the convolution of the image by a mask.
   The result \p res of the convolution of an image \p img by a mask \p mask is defined to be :

   res(x,y,z) = sum_{i,j,k} img(x-i,y-j,z-k)*mask(i,j,k)

   param mask = the correlation kernel.
   param cond = the border condition type (0=zero, 1=dirichlet)
   param weighted_convol = enable local normalization.
**/ 
```

声明是这样的：

```
 template<typename t> CImg<typename cimg::superset2<T,t,float>::type>
  get_convolve(const CImg<t>& mask, const unsigned int cond=1, const bool weighted_convol=false) const {} 
```

这是一个代码片段：

```
 for (int z = mz1; z<mze; ++z) 
                for (int y = my1; y<mye; ++y) 
                for (int x = mx1; x<mxe; ++x) {// For each pixel
                  Ttfloat val = 0;
                  for (int zm = -mz1; zm<=mz2; ++zm) 
                  for (int ym = -my1; ym<=my2; ++ym) 
                      for (int xm = -mx1; xm<=mx2; ++xm)
                            val+=(*this)(x+xm,y+ym,z+zm,v)*mask(mx1+xm,my1+ym,mz1+zm);
                  dest(x,y,z,v) = (Ttfloat)val;
                }
                if (cond)
                  cimg_forYZV(*this,y,z,v)
                    for (int x = 0; x<dimx(); (y<my1 || y>=mye || z<mz1 || z>=mze)?++x:((x<mx1-1 || x>=mxe)?++x:(x=mxe))) {
                      Ttfloat val = 0;
                      for (int zm = -mz1; zm<=mz2; ++zm) for (int ym = -my1; ym<=my2; ++ym) for (int xm = -mx1; xm<=mx2; ++xm)
                        val+=at3(x+xm,y+ym,z+zm,v)*mask(mx1+xm,my1+ym,mz1+zm);
                      dest(x,y,z,v) = (Ttfloat)val;
                 }else
                    cimg_forYZV(*this,y,z,v) 
```

我正在使用 7 x 7 的掩码，其中的每个值都是“1”。我从函数中得到的是，对于每个像素，它在其周围占据一个 7 x 7 的窗口，像素位于中心，然后与单位矩阵相乘。感觉就像某种平滑过滤器，但它是哪一个？我可以在 openCV 中使用哪个等效过滤器？

我可以发布整个功能，但它太长了，我不明白这一点。我会非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:52:09.117

[所以，我在实现pHash](http://phash.org)的人的论文中找到了答案。它说：在计算pHash的过程中，对图像应用了一个均值滤波器。使用尺寸为 7x7 的内核。为了应用这个内核，使用了 CImg 库的**get_convolve()** 函数。然后突出显示为：

对于图像 I 和掩码 M，它是： R(x,y,z) = SIGMA(i,j,k) I(x - i, y - j, z - k)M (i, j, k)

[然后，当我在这里查看](http://www.opencv.org.cn/opencvdoc/2.3.2/html/modules/imgproc/doc/filtering.html)openCV 提供的过滤功能类型时，它与框过滤器功能相匹配。

# mongodb - 适用于 Windows XP 32 位的文档数据库

> ID：15480920
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:43:47.350
> 
> 标签：mongodb, couchdb, hsqldb, document-database, database

我正在寻找一个支持 Windows XP 32 位的文档数据库，满足以下要求：

*   不得中断支持。即我希望能够安装最新版本的数据库。MongoDB 不适合，因为它们不再支持 XP，而 CouchDB 不适合，因为它们不再支持任何 Windows 32 位。
*   应该比较简单。显然，该应用程序不是企业应用程序，因此像 Cassandra 这样的复杂数据库已经不存在了。事实上，我想避免列数据库，因为我认为它们的存在是为了解决企业级问题，而这里不是这样。另一方面，我不想要关系数据库，因为我想避免每次添加新字段时都升级数据库（并且它们将被添加）。
*   它应该支持对部分文档进行索引，例如 MongoDB。我可以使用关系数据库，如 hsqldb 将数据存储为 json 字符串。这使得添加新字段变得容易 - 无需更改架构。但是这些字段不能被数据库索引。同样，与 MongoDB 不同。
*   最后，数据库将与应用程序本身在同一台机器上运行 - MongoDB 会再运行一台机器，这会将应用程序的所有 RAM 都窃取给它自己。

所以，从某种意义上说，我正在寻找类似 MongoDB 的东西，但要支持 Windows XP 32 位。

有什么建议吗？

附言

我知道 Windows XP 在 MS 放弃支持它之前还有一年的寿命。但是，无论如何我必须支持XP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:23:31.097

使用 HSQLDB 和其他一些关系数据库，您可以将文档存储为 CLOB。可以通过包含所有索引字段的索引的单个表访问此 clob。例如

```
CREATE TABLE DATAINDEX(DOCID BIGINT GENERATED BY DEFAULT AS IDENTITY, FIELDNAME VARCHAR(128), FIELD VARCHAR(10000),
    DOCUMENT CLOB, PRIMARY KEY (DOCID, FIELDNAME))

CREATE INDEX IDS ON (FIELDNAME, FIELD); 
```

整个文档就是 CLOB。需要索引进行搜索的选定字段的副本存储在 (fieldnname, field) 列中。具有相同 DOCID 的行在 DOCUMENT 列中将具有相同的 CLOB。用第一个字段和 clob 插入一行，然后通过选择并插入现有的 DOCID 和带有第二个字段的 clob 来复制它，依此类推。

```
-- use this to insert the CLOB with the first field
INSERT INTO DATAINDEX VALUES DEFAULT, 'f1', 'fieldvalue 1', ?
-- use this to insert the second, third and other fields
INSERT INTO DATAINDEX VALUES
    IDENTITY(), 'f2', 'filedvalue 2', 
    (SELECT DOCUMENT FROM DATAINDEX WHERE DOCID = IDENTITY() LIMIT 1) 
```

以上只是一个例子。您可以创建自己的 DOCID。原则是使用相同的 DOCID 并插入带有 CLOB 的第一行。第二行和第三行从先前插入的行中选择 DOCID 和 clob，以使用其他字段创建新行。您可能会使用 JDBC 参数来插入 FIELDNAME 和 FIELD 列。

这允许您执行搜索，例如：

```
SELECT DOCID, DOCUMENT FROM DATAINDEX 
    WHERE FIELDNAME = 'COMPANY NAME' AND FIELD LIKE  'Corp%' 
```

这可能无法满足您的所有要求，但答案旨在涵盖 HSQLDB 的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:34:27.380

您使用的是哪个编程框架？如果可以使用 .NET，您可以尝试[RavenDB](http://ravendb.net/)。它既可以用作[嵌入式](http://ravendb.net/docs/server/deployment/embedded)数据库，也可以用作独立数据库。

对于 Java，您可以尝试[OrientDB](http://www.orientdb.org/)。它也是可嵌入的：[https ://github.com/nuvolabase/orientdb/wiki/Embedded-Server](https://github.com/nuvolabase/orientdb/wiki/Embedded-Server)

# android - View with 2 ListViews and headers 移动另一个列表视图

> ID：15480922
> 
> 赞同：2
> 
> 时间：2013-03-18T15:43:53.887
> 
> 标签：android, android-listview

在我看来，我有 2 个列表视图，都有一个标题。当我滚动一个列表时，另一个列表视图也会移动（不是很多），但它在标题不再可见的地方移动得足够多。

如果我删除标题，这不会发生。

在我的xml中我设置`android:splitMotionEvents="true"`了但没有做任何事情

这就是我在列表视图中设置标题的方式

```
@Override
public View onCreateView(LayoutInflater inflater,ViewGroup container,Bundle saved){
    View v = inflater.inflate(R.layout.sin_preplan_layout,container,false);

    sinList = (ListView)v.findViewById(R.id.sin_listView);
    prePlanList = (ListView)v.findViewById(R.id.preplan_listView);

    sinList.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    prePlanList.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

    View v2 = inflater.inflate(R.layout.sin_preplan_header,(ViewGroup) v.findViewById(R.id.header_layout_root));

    prePlanList.setHeaderDividersEnabled(true);
    prePlanList.addHeaderView(v2);
    sinList.addHeaderView(v2);

    return v;
} 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:12:06.233

您将相同的实例两次添加到不同的视图中，这是不鼓励的。尝试这个：

```
View firstHeader = inflater.inflate(R.layout.sin_preplan_header,(ViewGroup) v.findViewById(R.id.header_layout_root));
prePlanList.addHeaderView(firstHeader);

View secondHeader = inflater.inflate(R.layout.sin_preplan_header,(ViewGroup) v.findViewById(R.id.header_layout_root));
sinList.addHeaderView(secondHeader); 
```

# ruby-on-rails - accept_nested_attributes_for :destroy_if

> ID：15480926
> 
> 赞同：2
> 
> 时间：2013-03-18T15:43:56.740
> 
> 标签：ruby-on-rails

我在一个类中有一个 accept_nested_attributes_for 的 :reject_if 案例，但如果某个值为 0，我也希望能够销毁已经创建的对象。

似乎没有 :destroy_if 选项。有没有标准的方法来控制这样的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:59:25.457

我找到了使用 before_save 的解决方案。这似乎工作得很好。

```
before_save :mark_entries_for_removal

def mark_entries_for_removal
  entries.each do |entry|
    entry.mark_for_destruction if entry.hours_spent <= 0
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:46:18.133

A nested model is destroyed when its attribute `_destroy` is set (1 or true)

A solution is to overload `your_nested_model_attributes=` to set the `_destroy` attribute to `1`

# c - va_arg 64位问题

> ID：15480927
> 
> 赞同：1
> 
> 时间：2013-03-18T15:43:58.587
> 
> 标签：c, linux, 64-bit, variadic-functions

我有这样的C代码。在 64 位 linux 系统上，结果是：4294967264 而不是 -32。clang 和 gcc 都生成具有相同错误结果的二进制文件。行中的问题：

```
*v = va_arg(args, long);
```

```
#include <stdio.h>
#include <string.h>
#include <stdarg.h>

void setter(long *v, ...)
{
        va_list args;
        va_start(args, v);
        *v = va_arg(args, long);
        va_end(args);
}

int main()
{
        long v = 0;
        setter((long *) &v, -32);
        printf("%ld\n", v);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:51:20.013

您实际上需要将 a 传递`long`给您的函数。你正在通过一个`int`.

```
setter(&v, -32L); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T15:52:00.757

在 x86_64 架构上，大小`long`为 64 位。当您传递`-32`到 时`setter()`，它的类型是`int`并且只有 32 位。如果您想`long`通过，请显式转换。例如：

```
setter((long *) &v, (long)-32); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-30T10:21:41.103

一点澄清：
如前所述，在 64 位架构上， a`long`是 64 位的。然而，这还不是全部，因为 C/C++ 会进行一些自动转换。在这里，`setter()`函数接受一个指定的参数和零个或多个未指定的参数。-32 参数是那些未指定的参数之一，因此编译器不知道实际上 a`long`是有意的并保留了一个`int`（32 位）。此外，额外的零被压入堆栈以保持 64 位对齐。这将产生如上所述的打印结果。因此，您必须明确指定您需要一个`long`here（或`-32L`或`(long) -32`）。但是如果函数确实已经被声明`void setter (long *v, long arg)`，那么编译器就会知道第二个参数是`long`, 并自动转换`int`参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-05T18:04:56.727

更奇怪的是，但仍然不是真正的编译器错误：如果将`-32`值作为第 7 个或更高的可变参数传递，它可能会扩展为 64 位：

```
#include <stdio.h>
#include <stdarg.h>

/* long long int is a 64bit datatype on both Unix and Windows */
void setter(long long int arg, ...)
{
    va_list args;
    va_start(args, arg);
    while(arg != 0) {
        printf("0x%016llx  %lld\n", arg, arg);
        arg = va_arg(args, long long int);
    }
    va_end(args);
}

int main()
{
    setter(-32, -32, -32, -32, -32, -32, -32, -32, 0);
    return 0;
} 
```

x64 Linux 上的输出是：

```
0xffffffffffffffe0  -32
0x00000000ffffffe0  4294967264
0x00000000ffffffe0  4294967264
0x00000000ffffffe0  4294967264
0x00000000ffffffe0  4294967264
0x00000000ffffffe0  4294967264
0xffffffffffffffe0  -32
0xffffffffffffffe0  -32 
```

但是，x64 Windows 上的输出类似于：

```
0xffffffffffffffe0  -32
0x00000000ffffffe0  4294967264
0x00000000ffffffe0  4294967264
0x00000000ffffffe0  4294967264
0x00040800ffffffe0  1134700294832096
0x178bfbffffffffe0  1696726761565323232
0x00007ff6ffffffe0  140698833649632
0x00007ff6ffffffe0  140698833649632 
```

这里的原因是，在 64 位[x86 调用约定](https://en.wikipedia.org/wiki/X86_calling_conventions)中，许多前导参数（System V AMD64 ABI 中为**6 ，Microsoft x64 中为****4**）通过 CPU 寄存器传递，只有后续参数通过堆栈传递。

由于 64 位寄存器提供对其低 32 位的单独访问，编译器确实只设置了它们的低 32 位，因此没有值扩展到 64 位。

对于后续参数，它取决于编译器：

*   gcc 确实将扩展的 64 位值推入堆栈
*   MSVC cl.exe 确实将每个低 32 位写入堆栈，使每个高 32 位未初始化
*   不确定其他编译器

无论如何，堆栈上的每个参数都保留了 64 位。

# javascript - 使用 parent() 获取标题值

> ID：15480930
> 
> 赞同：0
> 
> 时间：2013-03-18T15:44:06.200
> 
> 标签：javascript, jquery

我有这个 html 代码：

```
<a class="ms-navedit-linkNode" title="Apps" href="url/test">
    <span class="menu-item-text">Apps</span>
</a> 
```

我想将标题值从“应用程序”更改为其他内容。

这是我使用的 javascript，但它只是给出了我的标题变量`undefined`。

注意：其他一切在我的 js 代码中都很好用

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".menu-item-text").each(function() {
            var text = $(this).text();
            if (text == "Apps") {
                $(this).text("");
                $(this).text("Organization");

                var title = $(this).parent().attr("title");

                if (title == "Apps") {
                    $(this).parent().attr("title", "Organization");
                }
            }
        });
    });
</script> 
```

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:57:20.873

您的 html 缺少双引号

```
<a class="ms-navedit-linkNode" title="Apps" href="url/test">
    <span class="menu-item-text">Apps</span>
</a> 
```

你在 Attr 上也有一个大写字母 A。它应该是：

```
$(".menu-item-text").each(function() {
    var text = $(this).text();
    if (text == "Apps") {
        $(this).text("Organization");

        var title = $(this).parent().attr("title");
        alert($(this).parent().attr("title"));

        if (title == "Apps") {
            $(this).parent().attr("title", "Test");
            alert($(this).parent().attr("title"));
        }
    }
}); 
```

我在标题属性更改之前和之后都设置了两个警报来提醒它。

小提琴：http: [//jsfiddle.net/VinnyFonseca/x8ceZ/](http://jsfiddle.net/VinnyFonseca/x8ceZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:59:30.713

您快到了。这是[小提琴](http://jsfiddle.net/Ty6L2/)。

变化：

1.  `$(this).val("");`to `$(this).text("");`（您可以完全删除该语句）。
2.  `$(this).parent().Attr("title", "Test");`到`$(this).parent().attr("title", "Test");`

# jquery - 迭代到一个元素数组

> ID：15480931
> 
> 赞同：1
> 
> 时间：2013-03-18T15:44:07.273
> 
> 标签：jquery, arrays, loops

我发现了这个问题，它看起来很简单，但我找不到任何解决方案。我有一个元素数组，如下所示：

```
<input type="text" name="subTotal[]"/>
<input type="text" name="subTotal[]"/>
<input type="text" name="subTotal[]"/>
<input type="text" name="subTotal[]"/> 
```

使用 jquery，我想从这四个 subTotal 中计算总数。当该 subTotal 的值更改时，将触发计数。我像下面这样尝试过，但它不起作用：

```
var totalPrice = 0;
$('input[name="subTotal"]').each( function( key, value ) {
    totalPrice += value;
    alert(totalPrice);
}); 
```

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:46:01.323

Try this, by using `name^=` and parseInt on the value

```
 var totalPrice = 0;
    $('input[name^="subTotal"]').each( function() {
        totalPrice += parseInt(this.value);
        alert(totalPrice);
    }); 
```

Demo here [http://jsfiddle.net/gBudm/](http://jsfiddle.net/gBudm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:01:20.417

尝试这个：

```
$('input[name^="subTotal"]').change(function () {
    var totalPrice = 0;
    $('input[name^="subTotal"]').each(function () {
        totalPrice += parseInt(this.value);        
    })
    alert(totalPrice);
}); 
```

当该 subTotal 的值更改时，将触发计数。 [**演示在这里**](http://jsfiddle.net/TM4Me/)

# mongodb - 为什么MongoDb文档id前面有下划线？

> ID：15480934
> 
> 赞同：10
> 
> 时间：2013-03-18T15:44:10.497
> 
> 标签：mongodb

为什么 MongoDb 文档 id 前面有一个下划线？

为什么不叫它“id”而不是“_id”？

这是我不知道的命名约定的一部分吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-18T16:27:27.293

您可能会注意到 MongoDB 有很多函数（在 shell 中）和以底层存储开头的字段，表示它们是内部的或特殊的，而不是用户提供的。

如果您有自己的“ID”，那么您可以将其存储为“id”并仍然使用由 MongoDB 提供的 _id 字段，尽管您不需要使用 MongoDB 生成的 ObjectId - 您可以将自己的自然主键存储在“_id”字段将始终具有唯一索引。

# javascript - iframe 仅在点击后显示？

> ID：15480936
> 
> 赞同：1
> 
> 时间：2013-03-18T15:44:15.217
> 
> 标签：javascript, ajax, html, iframe

我有以下代码：正在显示 iframe，但我喜欢在提交表单之前隐藏它。使用 Div 而不是 iframe 会更好吗？我喜欢在提交表单时摆脱已经存在的 div。

```
<script type="text/javascript">  
function showIFrame() {  
 var iframe = document.getElementById("myiframe");  
 iframe.style.display="block";  
}  
</script> 
```

在我的 CSS 文件中

```
#myiframe {
display:none; }

<form name="search" id="search" method="get"      action="http://tmccaffery.outsideagents.com/travel/car/search.rvlx" target="carsearch">

<iframe id="myframe" name="carsearch" width="535" height="625" scrolling="no"   frameborder="0"></iframe>

<button type="submit" id="SearchCarButton" class="submitBtn" onclick="showIFrame()"/>  <span>Search</span></button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:52:40.630

您`id="myframe"`在 HTML 和`#myiframe`CSS 中使用。

更改`id="myframe"`为`id="myiframe"`或更改`#myiframe`为`#myframe`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:50:18.330

```
iframe.style.visibility="hidden"; 
```

并展示它：

```
iframe.style.visibility="visible"; 
```

编辑：您可以使用 onsubmit="JavaScriptCode" 事件来触发更改。

参考： [http ://www.w3schools.com/jsref/event_form_onsubmit.asp](http://www.w3schools.com/jsref/event_form_onsubmit.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:57:50.037

您使用了错误的 id - 在您的 css 中您使用的是“#myiframe”而不是“#myframe” - 没有“i”。

这是正确的代码：

```
#myframe { display:none; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T15:51:51.360

将您的脚本更改为此:)

```
<script type="text/javascript">  
function showIFrame() {  
var iframe = document.getElementById("myiframe");  
iframe.style.visibility="visible";
}  
</script> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-18T15:51:47.917

jQuery 有在加载 iframe 时执行的加载事件：

```
$('#myframe').load(function() {
   $(this).show();
}); 
```

# php - PHP嵌套foreach循环以显示表格

> ID：15480939
> 
> 赞同：0
> 
> 时间：2013-03-18T15:44:24.783
> 
> 标签：php, mysql, wordpress, foreach

我正在寻找生成如下所示的 HTML 表格。

```
|nick_name| bookmarked_sites  |
-------------------------------
| admin   | http://test1.com  |
|         | http://test2.com  |
|         | http://test3.com  |
-------------------------------
| John    | http://mysite.com |
------------------------------- 
```

我正在使用 $wpdb 查询数据库，它正在构建一个信息数组，如下所示：

```
$userquery = $wpdb->get_results("SELECT * FROM bookmarks");
print_r($userquery);

Array ( 
[0] => stdClass Object ( 
    [id] => 1 [user_id] => 1 [post_id] => 1654,1532,1672,1610,1676 ) 
[1] => stdClass Object ( 
    [id] => 3 [user_id] => 6 [post_id] => 1680,1654 ) ) 
```

我开始构建我的第一个`foreach`以提取 . `user_id`，然后我有一个嵌套来为该用户`foreach`提取. `post_id`但我现在意识到我不能轻易地根据这个概念构建一个 HTML 表格。

我很难概念化将所有这些放在一起的逻辑。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:57:16.070

你在正确的轨道上。它会是这样的：

```
echo '<table>';
foreach ($userquery as $user) {
  //load sites into $loadedsites

  $rowheight = count($loadedsites);
  $c = 0;

  //if there is a user without any sites, the rowheight would be 0.
  //You need to deceide what to do than, because now it wouldnt show the user at all.

  foreach($loadedsites as $site) {

    if ($c==0)
      echo '<tr><td rowspan="'.$rowheight.'">'.$user->user_id.'</td><td>'.$site->url.'</td></tr>';
    else
      echo '<tr><td>'.$site->url.'</td></tr>';

    $c++;
  }
}
echo '</table>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:57:24.160

这是制作表格的可能方法..使用您从查询中获得的数据..

```
<table>
  <thead>
    <tr>
      <th>user_id<th>
      <th>post_id<th>
    </tr>
  </thead>
  <tbody>
    <?php foreach($userquery as $uq): ?>
    <tr>
      <td><?php echo $uq['user_id']; ?></td>
      <td>
        <?php
           $posts = explode(',', $uq['post_id']);
           if(count($posts)>0):
           ?>
           <table>
             <?php foreach($posts as $p): ?>
             <tr><td><?php echo $p; ?> </td></tr>
             <?php endforeach; ?>
           </table>
     <?php else: ?>
           No posts...
     <?php endif; ?>
      </td>
    </tr>      
    <?php endforeach; ?>
  </tbody>
</table> 
```

# android - 以编程方式替换 TableLayout 的单元格（具有复杂布局）

> ID：15480943
> 
> 赞同：0
> 
> 时间：2013-03-18T15:44:49.227
> 
> 标签：android, android-tablelayout

在我的应用程序中，我有一个布局有些复杂的表格：它是一个 3x3 表格，顶部和左侧是静态标题，其他四个单元格分别包含一个包含我的信息的表格。

这个内部表有两个选项，我以编程方式选择要使用的两个选项，然后将它们添加到表中。到目前为止，一切都很好。

现在，当更新表格中的信息时，会在单元格中添加第二个表格，而不是替换原来的表格。因此，经过几次更新，我的主表变得很大，其中的单元格非常高，有许多内部表。当然不是这个想法。

```
private int setTable(int minAPI, int maxAPI, TableLayout tableId) {

    // Get the levels that belong to the API.
    String minLevel = getLevel(minAPI);
    String maxLevel = getLevel(maxAPI);

    // Get an inflater to inflate the table layouts.
    LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    // Get the layout of the API/Level table. 
    // Which one to use for the levels depends on whether the levels are 
    // the same or not.
    TextView textLevelFrom = null;
    TextView textLevelTo = null;
    TableLayout tableLayout = null;

    if (minLevel.equals(maxLevel)) {
        Log.v(TAG, "Setting up api_table1.");
        tableLayout = (TableLayout) inflater.inflate(R.layout.api_table1, tableId);
        textLevelFrom = (TextView) tableLayout.findViewById(R.id.textLevel);
        textLevelFrom.setText(minLevel);        
        textLevelFrom.setTextColor(getColour(minAPI));  
    }

    else {
        Log.v(TAG, "Setting up api_table2.");
        tableLayout = (TableLayout) inflater.inflate(R.layout.api_table2, tableId);
        textLevelFrom = (TextView) tableLayout.findViewById(R.id.textLevelFrom);
        textLevelFrom.setText(minLevel);        
        textLevelFrom.setTextColor(getColour(minAPI));  
        textLevelTo = (TextView) tableLayout.findViewById(R.id.textLevelTo);
        textLevelTo.setText(maxLevel);
        textLevelTo.setTextColor(getColour(maxAPI));
    }

    Log.v(TAG, "Populating the table.");

    TextView textAPIFrom = (TextView) tableLayout.findViewById(R.id.textAPIFrom);
    textAPIFrom.setText(""+minAPI);     
    textAPIFrom.setTextColor(getColour(minAPI));

    TextView textAPITo = (TextView) tableLayout.findViewById(R.id.textAPITo);
    textAPITo.setText(""+maxAPI);
    textAPITo.setTextColor(getColour(maxAPI));

    textLevelFrom.setText(minLevel);        
    textLevelFrom.setTextColor(getColour(minAPI));

    return tableLayout.getId();
} 
```

以前是通过类似`TableLayout TableId`的调用找到的

```
tableCurrentGeneral = (TableLayout) findViewById(R.id.CurrentGeneral); 
```

四个细胞中的每一个。主表在main.xml中定义；这些表格的单元格是一个空的 TableLayout。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.squirrel.hkairpollution.MySupportMapFragment"
    />
<!-- class="com.google.android.gms.maps.SupportMapFragment" -->

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/tableAPI" 
        android:background="@color/translucent_white"
        android:layout_alignBottom="@id/map">

        <!-- First row: headers. -->
        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:text="@string/general" 
                android:textStyle="bold" 
                android:textColor="@color/black"
                android:gravity="center" 
                android:paddingRight="8dip" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/roadside" 
                android:textStyle="bold" 
                android:textColor="@color/black"
                android:gravity="center" />

        </TableRow>

        <!-- Second row: current API -->                
        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="@string/current" 
                android:textStyle="bold" 
                android:textColor="@color/black"
                android:paddingRight="5dip"
                android:gravity="center" />

            <!-- Current API, general stations -->
            <TableLayout
                android:id="@+id/CurrentGeneral"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:paddingRight="8dip" />

            <TableLayout
                android:id="@+id/CurrentRoadside"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
        </TableRow>

        <!-- Third row: forecast API -->
        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="@string/forecast" 
                android:textStyle="bold" 
                android:textColor="@color/black"
                android:paddingRight="5dip"
                android:gravity="center" />

            <!-- Forecast API, general stations -->
            <TableLayout
                android:id="@+id/ForecastGeneral"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:paddingRight="8dip" />

            <TableLayout
                android:id="@+id/ForecastRoadside"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
        </TableRow>
    </TableLayout>

    <ProgressBar
        android:id="@+id/progressBar1"
        android:visibility="invisible"
        android:layout_width="48dip"
        android:layout_height="48dip"
        android:layout_alignTop="@id/map" 
        android:layout_alignLeft="@id/map"/>

    <ImageView
        android:id="@+id/refresh"
        android:layout_width="48dip"
        android:layout_height="48dip"
        android:contentDescription="@string/refresh"
        android:layout_alignTop="@id/map" 
        android:layout_alignLeft="@id/map"
        android:src="@drawable/ic_menu_refresh" />

</RelativeLayout> 
```

线

```
tableLayout = (TableLayout) inflater.inflate(R.layout.api_table1, tableId); 
```

正确链接 api_table1 resp。api_table2 布局到所需的单元格，但一直添加此布局时，它不会被替换。

我没有成功地尝试将刚刚添加的视图的 id 交回，以便稍后将其删除：

```
tableAPI.removeView(findViewById(tableCurrentRoadsideId)); 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:37:55.677

最后通过稍微不同的路线解决了它。

我错误地认为，当您再次将视图附加到单元格时，它是附加到它的第二个视图。相反，我的表向自身附加了更多行。

而且还没有关于实际工作的文档`TableLayout.removeView()`

解决方案：在`setTable`从该表中删除所有视图的行的开头。这清除了这张表，之后我可以重新附加我的布局，一切都应该是这样。

```
private void setTable(int minAPI, int maxAPI, TableLayout tableId) {
    tableId.removeAllViews();
    ... 
```

# jquery - 加载照片库后初始化 flexslider

> ID：15480944
> 
> 赞同：0
> 
> 时间：2013-03-18T15:44:49.743
> 
> 标签：jquery, json, flexslider

我正在和一个朋友一起做一个项目，我们在点击查看画廊后无法弄清楚如何重新初始化。有什么想法吗？提供的代码：

```
jQuery(document).ready(function(){
    fetchAlbumList();
});

function fetchAlbumList() {
    jQuery.ajax({
        url:'https://picasaweb.google.com/data/feed/api/user/107232985562777672515' + '?alt=json&callback=?',
        dataType:'json',
        success:function(data){
            var albumList = '';
            for (var i = 0; i < data.feed.entry.length; i++) {
              albumList += '<li class="onethird column"><div class="pod"><div class="podContent">';
              albumList += '<img src="' + data.feed.entry[i].media$group.media$content[0].url + '"/>';
              albumList += '<h2>' + data.feed.entry[i].media$group.media$title.$t + '</h2>';
              albumList += '<a href="javascript:void(0)" onclick="fetchAlbum(&quot;' + data.feed.entry[i].id.$t + '&quot;)" class="button">View Gallery</a>';
              albumList += '</div></div></li>';
            };

            jQuery('.albumList').html(albumList);
        }
    });
}

function fetchAlbum(albumID) {
    jQuery.ajax({
        url:albumID.replace('entry','feed') + '&callback=?',
        dataType:'json',
        success:function(data){
            console.log(data);

            jQuery('.albumPhotos').html('');

            var photoList = '<ul class="slides">'
            for (var i = 0; i < data.feed.entry.length; i++) {
              photoList += '<li><img src="' + data.feed.entry[i].content.src + '"/></li>';
            };
            photoList += '</ul>'
            var href = jQuery(this).attr('href');

            var albumPhotos = '<h2>' + data.feed.title.$t + '</h2>';
            albumPhotos += '<div class="sliderWrapper"><div id="slider2" class="flexslider">';
            albumPhotos += photoList;
            albumPhotos += '</div><div id="carousel2" class="flexslider">';
            albumPhotos += photoList;
            albumPhotos += '</div></div>';

            jQuery('.albumPhotos').html(albumPhotos);

            jQuery('#carousel2').flexslider({
                animation: "slide",
                controlNav: false,
                animationLoop: false,
                slideshow: false,
                itemWidth: 210,
                itemMargin: 5,
                asNavFor: '#slider2'
            });

            jQuery('#slider2').flexslider({
                animation: "slide",
                controlNav: false,
                animationLoop: false,
                slideshow: false,
                sync: "#carousel2"
            });
        }
    });
} 
```

只需要有关如何重新初始化它的帮助。我认为需要有一个开始回调，但我可能是错的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:14:27.317

如果您想从 Flexslider 动态添加/删除幻灯片，您需要使用：

```
$('#slider').data('flexslider').addSlide(obj);
$('#slider').data('flexslider').removeSlide(obj); 
```

这可能是相对的。 [使用 jQuery FlexSlider 添加或删除幻灯片](https://stackoverflow.com/questions/8929961/add-or-remove-slides-using-jquery-flexslider)

# prolog - 使用 swi-prolog 编译，而不将交互式 prolog 环境包含到二进制文件中

> ID：15480946
> 
> 赞同：0
> 
> 时间：2013-03-18T15:44:53.650
> 
> 标签：prolog, swi-prolog

我正在学习 prolog，我使用 swi-prolog 作为编译器/解释器。我有这个 hello world 文件：

```
:- initialization(main).
main :- format('Hello, world'). 
```

但是当我尝试编译`swipl -o hello.exe -c hello.pro`并运行二进制文件`hello.exe`时，它首先运行目标（main），然后将我返回到 swi-prolog 交互式环境。我如何编译它，使它成为一个没有 prolog 环境的功能程序？我也尝试`halt`在 main 的末尾添加，但这根本无法编译。当我尝试这样做时，编译器会打印“Hello, world”，然后停止编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:54:48.937

我会：

*   删除`:-initialization`指令
*   编译：`swipl.exe -nodebug -g true -O -q --toplevel=main --stand_alone=true -o hello.exe -c hello.pro`

这应该够了吧

# eclipse - 自动导入属性文件？

> ID：15480953
> 
> 赞同：0
> 
> 时间：2013-03-18T15:45:06.410
> 
> 标签：eclipse, eclipse-plugin

我有一个用于在 Ant 中构建的属性文件，其中包含要添加到 Eclipse 类路径中的变量。有没有办法自动做到这一点？

理想情况下，我希望能够在命令行中添加一个参数并自动导入文件中的值。

可接受的解决方案还包括使用添加此功能的插件。

示例：test.propeties

```
MW_HOME=C:\\Program\\Oracle\\
TEST_HOME=C:\\temp\\ 
```

# java - 应用程序写入文件

> ID：15480957
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:45:21.390
> 
> 标签：java, android, file

我有一个将数据写入文件的应用程序。我第一次运行它时，它运行良好并将 1000 个值写入文件。然后我使用此代码关闭应用程序

```
finish();
System.exit(0); 
```

当我按下停止按钮时会发生这种情况。

当我停止后再次运行它时，比如几分钟后，它只会在同一时间范围内将几个值写入一个新文件。

这是我用来写入文件的代码：

```
public void write(String message) {

    try {
        if (out == null) {
            FileWriter datawriter = new FileWriter(file, true);
            out = new BufferedWriter(datawriter);
            //out.write("X Value, Y Value, Z Value \n");
        }
        if (file.exists()) {
            out.append(message);
            out.flush();    
        } 
```

任何有关为什么会发生这种情况的见解将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:57:04.177

就整理做`out.close()`。这可能是一个系统正在恶化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:12:11.630

不要打电话

```
System.exit(0); 
```

阅读[这篇文章](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon)以了解原因。

此外，您不需要调用`flush()`，而只是`close()`在完成后，在调用`finish()`.

试试这个代码：

```
public void write(String message) {
    try {
        if (out == null) {
            FileWriter datawriter = new FileWriter(file, true);
            out = new BufferedWriter(datawriter);
        }
        out.append(message);
        out.flush();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# jquery - jquery淡入一个动态创建的div

> ID：15480958
> 
> 赞同：0
> 
> 时间：2013-03-18T15:45:26.423
> 
> 标签：jquery, html, css

这个问题被问了很多次，但我有不同的细节。你能帮我附加一个动态创建的div吗？但不同的是我必须像下面这样创建 div。

这是jQuery

```
 var new_div = "<div class='rounded_corner_with_border_and_tag' style='line-height:35px'><span class='span_tags'>Temel Bilgiler</span><br /><br /><div style='float:left;width:130px'>İsim:</div><div style='float:left;width:200px'><input id='Text1' class='blue_input' type='text' /></div><div style='clear:both'></div><div style='float:left;width:130px'>Soyad:</div><div style='float:left;width:200px'><input id='Text2' class='blue_input' type='text' /></div><div style='clear:both'></div><div style='float:left;width:130px'>Ünvan:</div><div style='float:left;width:200px'><input id='Text3' class='blue_input' type='text' /></div><div style='clear:both'></div><div style='float:left;width:130px'>Uzmanlık:</div><div style='float:left;width:200px'><input id='Text4' class='blue_input' type='text' /></div><div style='clear:both'></div><div style='float:left;width:130px'>Cep Numarası:</div><div style='float:left;width:200px'><input id='Text5' class='blue_input' type='text' /></div><div style='clear:both'></div><div style='line-height:6px'>&nbsp;</div><div style='float:right'><input type='button' id='Button2' name='btn_new_photo' value='Güncelle' class='theme05' /></div><div style='clear:both'></div></div>"; 
```

我无法创建静态 div，所以我必须在上面的 javascript 中创建它。

这是我的简单 jquery 代码....

```
$(document).ready(function () {
        $('#menu_1').click(function () {
            var new_div = "<div class='rounded_corner_with_border_and_tag' style='line-height:35px'><span class='span_tags'>Temel Bilgiler</span><br /><br /><div style='float:left;width:130px'>İsim:</div><div style='float:left;width:200px'><input id='Text1' class='blue_input' type='text' /></div><div style='clear:both'></div><div style='float:left;width:130px'>Soyad:</div><div style='float:left;width:200px'><input id='Text2' class='blue_input' type='text' /></div><div style='clear:both'></div><div style='float:left;width:130px'>Ünvan:</div><div style='float:left;width:200px'><input id='Text3' class='blue_input' type='text' /></div><div style='clear:both'></div><div style='float:left;width:130px'>Uzmanlık:</div><div style='float:left;width:200px'><input id='Text4' class='blue_input' type='text' /></div><div style='clear:both'></div><div style='float:left;width:130px'>Cep Numarası:</div><div style='float:left;width:200px'><input id='Text5' class='blue_input' type='text' /></div><div style='clear:both'></div><div style='line-height:6px'>&nbsp;</div><div style='float:right'><input type='button' id='Button2' name='btn_new_photo' value='Güncelle' class='theme05' /></div><div style='clear:both'></div></div>";

            $('#div_profile_container').append(new_div).fadein();
        });
    }); 
```

我需要先让 div display:none 然后淡入但不能这样做。请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:47:13.047

`.hide()`之后添加`.append(new_div)`

```
$('#div_profile_container').append(new_div).hide().fadeIn(); 
```

此外，正如 Explosion Pills 所提到的，方法是`fadeIn`（大写 I），而不是`fadein`.

或者，您可以简单地更改您的样式声明并制作它`style='line-height:35px; display: none;'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:48:48.823

我一直使用的方法（而不是首先使用 .hide() ）是在构建元素时简单地将“显示”属性标记为“无”。例如：

```
<div class='rounded_corner_with_border_and_tag' style='line-height:35px; display:none;'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:07:12.640

我终于做到了。谢谢你的帮助。我给 div 一个 ID 并将其隐藏

```
var new_div = "<br /><div id='div_menu_1' class='rounded_corner_with_border_and_tag' style='line-height:35px;display:none'>" 
```

然后，我将它附加到 div 并在下面使用 jquery 使其淡入

```
$('#div_profile_container').append(new_div);
$('#div_menu_1').fadeIn(); 
```

# r - 合并各种因子的重复项并计算平均值

> ID：15480959
> 
> 赞同：3
> 
> 时间：2013-03-18T15:45:28.060
> 
> 标签：r, merge, duplicates, plyr

我有一个带有 X、Y 轮廓编号和相关深度的地理参考数据集：

```
Dataset
X = c(1:10)
Y=c(11:20)
Profile=c(298,298,298,299,299,299,300,300,301,301)
Depth=c(-1,-1,-2,-1,-2,-3,-1,-1,-1,-2)
df=as.data.frame(cbind(X,Y,Profile,Depth)) 
```

我的数据集如下所示：

```
 X  Y Profile Depth
1   1 11     298    -1
2   2 12     298    -1
3   3 13     298    -2
4   4 14     299    -1
5   5 15     299    -2
6   6 16     299    -3
7   7 17     300    -1
8   8 18     300    -1
9   9 19     301    -1
10 10 20     301    -2 
```

我要做的是合并每个配置文件内的深度重复，计算合并重复的 X 和 Y 的平均值并保持配置文件编号相关联。

我可以使用包 plyr 按配置文件合并副本：

```
out=ddply(df,.(Profile,Depth),summarize, Depth=unique(Depth))

  Profile Depth
1     298    -2
2     298    -1
3     299    -3
4     299    -2
5     299    -1
6     300    -1
7     301    -2
8     301    -1 
```

但我找不到一种方法来提取我的 X 和 Y 列的平均值以获取合并深度。有什么提示吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:14:32.697

一个`data.table`替代方案。这将比 快`ddply`，并且可以针对大数据进行扩展。它也少打字！

```
 library(data.table)
  DT <- data.table(df)
  DT[, lapply(.SD, mean) ,by = list(Profile, Depth)] 
```

笔记

*   `.SD`是每个组的 data.table 的子集
*   `lapply(.SD, mean)`将计算每列的平均值`.SD`
*   如果您只想要列的一个子集，您可以将其传递给`.SDcols`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:49:17.627

`X`您必须以与添加相同的方式为un`Y`值添加计算和名称`Depth`。

```
 ddply(df,.(Profile,Depth),summarize, X=mean(X),Y=mean(Y), Depth=unique(Depth))
  Profile    X    Y Depth
1     298  3.0 13.0    -2
2     298  1.5 11.5    -1
3     299  6.0 16.0    -3
4     299  5.0 15.0    -2
5     299  4.0 14.0    -1
6     300  7.5 17.5    -1
7     301 10.0 20.0    -2
8     301  9.0 19.0    -1 
```

# android - SAXException iso-8859-2

> ID：15480966
> 
> 赞同：1
> 
> 时间：2013-03-18T15:45:36.163
> 
> 标签：android, xml, character-encoding, sax, iso-8859-2

我有一个以`<?xml version="1.0" encoding="iso-8859-2"?>`. 我是这样读的：

```
SAXParserFactory.newInstance().newSAXParser().parse(is, handler); 
```

其中`is`是 InputStream 并且`handler`是一些任意处理程序。然后我得到这个异常：

```
org.apache.harmony.xml.ExpatParser$ParseException: At line 41152, column 17: not well-formed (invalid token) 
```

实际上，该位置有一个度数符号，包含在这样的 CDATA 中：

```
<![CDATA[something °]]> 
```

使用字符集 iso-8859-2，解析器应该接受几乎任何字符，包括这个字符。情况似乎并非如此。我究竟做错了什么？

**编辑**

我在安卓上做这一切。

奇怪：解析器似乎完全忽略了编码属性。我将文件转换为 UTF-8，同时保留标题，现在我的程序可以毫无错误地读取它。这是为什么？？

（我正在像这样制作 InputStream ：`new BufferedInputStream(new FileInputStream(filename))`，即没有阅读器，所以这不会是错误。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:39:15.677

我通过手动识别编码来解决该错误。我查看了 XML 标头并查找了`encoding`属性（如果可用），提取为字符串，从中创建了一个 Java`Charset`对象`Charset.forName()`，然后使用给定的编码创建了一个 Reader，并在该 Reader 上创建了一个 InputSource，如下所示：

```
String encoding;
Charset charset;
[...]
    Reader reader = new BufferedReader(new InputStreamReader(inputStream, charset));
    InputSource inputSource = new InputSource(reader);
    inputSource.setEncoding(encoding);
    SAXParserFactory.newInstance().newSAXParser().parse(inputSource, myHandler); 
```

不幸的是，我仍然不知道为什么解析器无法自动识别编码。

# c# - File.ReadAllText 中的字符无效

> ID：15480970
> 
> 赞同：12
> 
> 时间：2013-03-18T15:45:44.660
> 
> 标签：c#, text, character-encoding, special-characters, symbols

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T15:47:16.300

这很可能是由于`Encoding`. 使用[ReadAllText](http://msdn.microsoft.com/en-us/library/ms143369.aspx)重载，它允许您`Encoding`在读取文件时指定要使用的正确值。

默认重载将采用 UTF-8，除非它可以检测到 UTF-32。任何其他编码都会错误地通过。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-18T15:48:25.177

该文件很可能包含与默认编码不同的编码。如果您知道，可以使用[File.ReadAllText Method (String, Encoding)](http://msdn.microsoft.com/en-us/library/ms143369.aspx)覆盖来指定它。

代码示例：

```
string readText = File.ReadAllText(path, Encoding.Default);  // <-- change the encoding to whatever the encoding really is 
```

如果您***不***知道编码，请参阅之前的 SO 问题：[How to use ReadAllText when file encoding unknown](https://stackoverflow.com/questions/10753417/how-to-use-readalltext-when-file-encoding-unknown)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-18T15:47:41.183

您需要在调用 时指定编码[`File.ReadAllText`](http://msdn.microsoft.com/en-us/library/system.io.file.readalltext.aspx)，除非文件实际上是 UTF-8 格式，听起来好像不是。（基本上单参数重载相当于传入 UTF-8 作为第二个参数。我相信它还会检测带有适当字节顺序标记的 UTF-32。）

第一件事是确定它在哪个编码*中*（例如 ISO-8859-1 - 但您需要*检查*这一点），然后将其作为第二个参数传递。

例如：

```
Encoding isoLatin1 = Encoding.GetEncoding(28591);
string text = File.ReadAllText(path, isoLatin1); 
```

在尝试将二进制数据读取为文本之前，了解二进制数据的编码方式始终*很重要。*对于文件、网络流等任何东西都是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T15:48:45.350

您正在阅读的字符是替换字符

> 用于替换值未知或在 Unicode 中无法表示的传入字符比较使用 U+001A 作为控制字符来指示替换功能

[http://www.fileformat.info/info/unicode/char/fffd/index.htm](http://www.fileformat.info/info/unicode/char/fffd/index.htm)

你得到这个是因为文件的实际编码与你的程序期望的编码不匹配。

默认情况下，ReadAllText 需要 UTF-8。它遇到一个不代表有效 UTF-8 字符的字节序列，因此将其替换为*Replacement character*。

# pdf - attach image to fdf using itextsharp

> ID：15480981
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:46:26.010
> 
> 标签：pdf, itextsharp, fdf

I'm working to refactor a PDF form web application that is using the Active PDF Toolkit and the FDFToolkit from Adobe. My goal is to use iTextSharp to:

1.  Pre-populate the form fields with data from the database
2.  Allow the user to attach a signature and/or barcode image **via FDF**

Item #1 is not the problem. Item #2 is the biggest challenge. Let me provide some background:

This is a web application which renders the PDF form **once**. After the initial load, there are 2 key buttons on the form which submit the PDF form to a URL with an action parameter in the query string. These buttons are called "Save" and "Sign". The Save button takes the FDF field dictionary and saves it to the database. The Sign button looks up the signature for the logged-in user and attaches the signature image to the FDF and writes the FDF to the HTTP Response.

The FDFToolkit supports attaching an image to a field using this method:

FDFSetAP(string bstrFieldName, short whichFace, string bstrFileName, short pageNum)

iTextSharp does not offer a comparable method in the FdfWriter class. I've considered subclassing the FdfWriter class and adding my own method to attach an image, but wanted to reach out here to see if anyone has had the same problem.

I have been able to overlay an image on top of a field using this method, but this is in the underlying PDF and not the FDF.

```
AcroFields.FieldPosition pos = _Stamper.AcroFields.GetFieldPositions("SIGNATUREFIELD").First();
Image signature = Image.GetInstance("Signature.gif");
image.SetAbsolutePosition(pos.position.Left, pos.position.Bottom); 
image.ScaleToFit(pos.position.Width, pos.position.Height);
PdfContentByte pcb = _Stamper.GetOverContent(pos.page);
pcb.AddImage(image); 
```

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:04:10.737

我通过使用 PdfStamper 和制作按钮字段将图像放在表单上。您可以将现有字段替换为 Pushbutton 字段并将 Pushbutton 设置为 READ_ONLY 以便无法按下它并且看起来像静态图像。这会将您尝试添加的图像保留为字段注释，而不是将其添加到页面内容中。

```
using (PdfStamper stamper = new PdfStamper(new PdfReader(inputFile), File.Create(outputFile)))
{
    AcroFields.FieldPosition fieldPosition = stamper.AcroFields.GetFieldPositions(fieldName)[0];

    PushbuttonField imageField = new PushbuttonField(stamper.Writer, fieldPosition.position, fieldName);
    imageField.Layout = PushbuttonField.LAYOUT_ICON_ONLY;
    imageField.Image = iTextSharp.text.Image.GetInstance(imageFile);
    imageField.ScaleIcon = PushbuttonField.SCALE_ICON_ALWAYS;
    imageField.ProportionalIcon = false;
    imageField.Options = BaseField.READ_ONLY;

    stamper.AcroFields.RemoveField(fieldName);
    stamper.AddAnnotation(imageField.Field, fieldPosition.page);
} 
```

# jquery - jquery mobile autocomplete select option

> ID：15480986
> 
> 赞同：1
> 
> 时间：2013-03-18T15:46:37.660
> 
> 标签：jquery, list, select, mobile, autocomplete

I have a problem with JQuery 1.3.0 mobile Autocomplete, because I don't know how to select a list item and add the selection into a different DIV or hidden input field! Here is my code:

```
$( document ).on( "pageinit", "#main", function() 
{
    $( "#addimageword" ).on( "listviewbeforefilter", function ( e, data ) 
    {
        var $ul = $( this ),
        $input = $( data.input ),
        value = $input.val(),
        html = "";
        $ul.html( "" );
        if ( value && value.length > 2 ) {
            $ul.html( "<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>" );
            $ul.listview( "refresh" );
            $.ajax({
                type : 'GET',

                url: "./inc/search2.php",
                dataType: "json",
                data: {
                    q: $input.val()
                }
            })
            .then( function ( response ) {
                $.each( response, function ( i, val ) {
                    var substr = val.split('_');
                    var idword = substr[0];
                    var your = substr[1];
                    var lblyour = substr[2];
                    var learn = substr[3];
                    var lbllearn = substr[4];

                    var lblyourlang = substr[6];
                    var lbllearnlang = substr[7];

                    html += "<li><a href='#'>" +lblyour+": "+your+" - "+lbllearn+": "+learn+ "</a></li>";
                });
                $ul.html( html );
                $ul.listview("refresh");
                $ul.trigger("updatelayout");
            });
        }
    });

    $('#addimageword li a').click(function(){

        var listItemText = $(this).text;
        $('#result').text(listItemText);
        $('#addimageword').children('li').hide(); 
        $('#addimageword').bind(function(){
            $.mobile.listview.prototype.options.filterPlaceholder = listItemText;
        });        
        e.preventDefault();
    })

    <ul id="addimageword"
        data-role="listview"
        data-inset="true" 
        data-filter="true" 
        data-filter-placeholder="Type in your word" data-filter-theme="d">
    </ul>

    <div id="result">

    </div> 
```

Does anyone know how it works?

Thank's in advance...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:30:48.313

在你的 .then() 中做这样的事情

```
.then( function ( response ) {
  $.each( response, function ( i, val ) {
    html += '<li class="surgeon" id="surgeon_' + val.id + '"">' + val.name + '</li>';
  });
  $ul.html( html );
  $ul.listview( "refresh" );
  $ul.trigger( "updatelayout");
  $('.surgeon').click(function(){
    var id = $(this).attr('id').split('_');
    $('#InputId').val(id[1]);
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T22:47:21.103

由于 li 是在页面加载后添加的，因此您需要使用`.delegate()`.

给`a`标签一个类，如：

```
 html += "<li><a class="example">" +lblyour+": "+your+" - "+lbllearn+":  "+learn+ "</a></li>"; 
```

然后有一个功能，如：

```
$('body').delegate('.example', 'click', function() {
   var val = $(this).html();  
   $('$hiddeninput').html(val);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T04:25:20.863

你可以试试这个：

```
$( '#addimageword' ).on('click', 'li a', function( ) {  
    var listItemText = $(this).closest("li").text();
    $('#result').text(listItemText);
    //other code
}); 
```

# nservicebus - What Are NServiceBus 3.0 Minimum Requirements

> ID：15480988
> 
> 赞同：0
> 
> 时间：2013-03-18T15:46:43.897
> 
> 标签：nservicebus, minimum-requirements

I've looked everywhere and I can't seem to find any up to date information on the minimum requirements of NServiceBUs 3.0\. I did find some posts that go back to 2011, are they still relevant? does anyone have a link or info on this.

more specifically we're trying to install on a server with Windows 2003 sp1 on it. But as far as I can make out I need MSMQ 3.1 which was released in SP2

cheers

Johnny

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:34:42.833

运行 NServiceBus v3 所需的最低 MSMQ 版本是 MSMQ 3.1。
显然，您还需要安装 .NET4 和 DTC。

有关您的信息，如果您在[NServiceBus 网站](http://particular.net/nservicebus)上进行搜索，您会得到答案:)，请参阅[http://docs.particular.net/nservicebus/operations/running-on-windows](http://docs.particular.net/nservicebus/operations/running-on-windows)

# javascript - Dojo 网格 Bool 列

> ID：15480996
> 
> 赞同：0
> 
> 时间：2013-03-18T15:47:01.037
> 
> 标签：javascript, dojo, dojox.grid.datagrid

所以我用 dojo 在我的网格中添加了一个检查列

```
 <th field="selectStudent" width="5%" cellType="dojox.grid.cells.Bool"
      editable="true" alwaysEditing="true">Select Stdent</th> 
```

Grid 的选择模式设置为**multiple**。我想知道如何访问（或知道）用户选择的所有复选框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:02:55.367

在客户端使用 javascript...示例位于此处：

[http://dojotoolkit.org/documentation/tutorials/1.6/checkboxes/](http://dojotoolkit.org/documentation/tutorials/1.6/checkboxes/)

# android - 从 Android Google Maps API v2 中删除一个圆圈而不清除地图

> ID：15480997
> 
> 赞同：24
> 
> 时间：2013-03-18T15:47:02.467
> 
> 标签：android, geometry, android-maps-v2

我在我的地图上画了一个圆圈，如下所示：

```
CircleOptions circle=new CircleOptions();
circle.center(centre);
circle.strokeColor(0xFFFFA420);
circle.strokeWidth(2f);
circle.fillColor(0x11FFA420);
circle.radius(radius);
myMap.addCircle(circle); 
```

为了移除这个圈子，我打电话给`myMap.clear()`，它会移除所有添加到地图中的项目。问题是如何在不删除地图上所有其他项目的情况下删除这个圆圈？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-18T15:58:16.770

尝试调用您从中返回[`remove()`的`Circle`对象](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Circle#remove%28%29)`addCircle()`。例如

```
Circle mapCircle;
mapCircle = mapView.addCircle(circleOption); 
```

现在，当您要删除时调用此方法

```
if(mapCircle!=null){
  mapCircle.remove();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-18T04:27:53.167

代码可能很有用。

```
drawnCircle = map.addCircle(circle);
drawnCircle.remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-18T06:53:58.553

最简单的方法，你可以使用：circle.visible(false)