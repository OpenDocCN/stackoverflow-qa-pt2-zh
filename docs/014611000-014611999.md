# StackOverflow 问答 14611000-14611999

# php - MySQL 使用 join 连接表

> ID：14611002
> 
> 赞同：2
> 
> 时间：2013-01-30T18:21:16.727
> 
> 标签：php, mysql, sql, join, web

我整天都在为这个问题挠头，我只是无法解决。这是我第一次尝试使用 SQL Joining，虽然我们确实学到了一些基础知识，但我更倾向于将更多内容推向高级内容。

基本上我正在制作自己的论坛，并且有两张桌子。f_topics（线程）和 f_groups（论坛或类别）。f_topics 中的 topicBase 和 f_groups 中的 groupID 之间存在关系，这表明每个主题属于哪个组。每个主题都有一个唯一的 ID，称为 topicID，组 ID 相同，称为 groupID。

基本上，我试图将所有这些列放入一个 SELECT 语句中 - 主题的标题、主题发布的日期、主题所属组的 ID 以及该组的名称。这是我试图使用的，但组总是返回为 1，即使主题在 groupID 2 中：

```
$query=mysqli_query($link, "

SELECT `topicName`, `topicDate`, `groupName`, `groupID`
FROM `f_topics`
NATURAL JOIN `f_groups`
WHERE `f_topics`.`topicID`='$tid';

") or die("Failed to get topic detail E: ".mysqli_error());
var_dump(mysqli_fetch_assoc($query)); 
```

对不起，如果这没有多大意义，如果我的整个逻辑完全错误，如果是这样，你能建议一种替代方法吗？

谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:23:34.410

要连接表，您需要映射外键。假设您的组表有一个`groupID`字段，这就是您加入它们的方式：

```
SELECT `topicName`, `topicDate`, `groupName`, `groupID`
FROM `f_topics`
LEFT JOIN `f_groups`
ON `f_topics`.`groupID` = `f_groups`.`groupID`
WHERE`f_topics`.`topicID`='$tid'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:25:10.440

因此，据我所知，f_topics 中有一个名为“topicBase”的列，它引用了 f_groups 表中的 groupID 列。

基于该假设，您可以执行 INNER JOIN 或 LEFT JOIN。INNER 要求两个表中都有一个条目，而 LEFT 要求 f_topics 中只有数据。

```
SELECT
    f_topics.topicName,
    f_topics.topicDate
    f_groups.groupName
    f_groups.groupID
FROM
    f_topics
INNER JOIN
    f_groups
    ON
    f_topics.topicBase = f_groups.groupID
WHERE
    f_topics.topicID = '$tid' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:06:25.783

我建议你避免`NATURAL JOIN`。

主要是因为可以通过在引用表中添加一个新列来破坏工作查询，该列与另一个引用表中的列名匹配。

其次，对于 SQL 的任何读者（审阅者）来说，哪些列与哪些列匹配并不清楚，没有仔细审查两个表。（而且，如果有人添加了一个破坏查询的列，那么在添加该列之前就更难弄清楚过去的 JOIN 标准是什么。

* * *

相反，我建议您在 ON 子句的谓词中指定列名。

通过表名或最好是较短的表别名来限定所有列引用也是一种好习惯。

对于更简单的陈述，我同意这可能看起来像不必要的开销。但是一旦语句变得更加复杂，这种模式极大地提高了语句的可读性。

如果没有这两个表的定义，我将不得不做出假设，并且我“猜测”这`groupID`两个表中都有一个列，这是唯一一个名称相同的列。但是您指定它在中匹配的`topicBase`列。（而 NATURAL JOIN 不会让你明白这一点。）`f_topics``groupID``f_groups`

我认为此查询将返回您想要的结果集：

```
SELECT t.`topicName`
     , t.`topicDate`
     , g.`groupName`
     , g.`groupID`
  FROM `f_topics` t
  JOIN `f_groups` g
    ON g.`groupID` = t.`topicBase`
 WHERE t.`topicID`='$tid'; 
```

如果`topicBase`列可能为 NULL 或包含与 f_groups.GroupID 值不匹配的值，并且您希望返回该主题，并且 f_group 中的列返回为 NULL（当不匹配时），您可以获得与外部连接。

为了获得这种行为，在上面的查询中，在`LEFT`关键字之前添加`JOIN`关键字。

# python - 迭代整数的 Pythonic 或最佳实践方法是什么？

> ID：14611008
> 
> 赞同：4
> 
> 时间：2013-01-30T18:21:41.767
> 
> 标签：python, casting, type-conversion

在 Python 中迭代整数的最佳实践是什么？我发现我需要经常这样做，通常会产生冗长的结果。例如，这是我为[Project Euler](https://projecteuler.net)问题编写的两个函数：

```
def is_permutation_of(n, m):
    """ Return True if n is a permutation of m, else False
    """
    if len(str(n)) != len(str(m)):
        return False
    for d in str(n):
        if d not in str(m):
            return False
    return True 
```

还有一个：

```
def has_even_digit(n):
    """ Return True if n has an even digit, else False
    """
    evens = ['0', '2', '4', '6', '8']
    for e in evens:
        if e in str(n):
            return True
    return False 
```

除了冗长之外，1) 必须有与每个类型转换相关的计算开销，以及 2) 感觉完全不优雅。有没有另一种方法来处理这个问题？我是否以完全错误的方式处理这些函数，即我是否应该不必遍历整数？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:24:55.787

我个人觉得`for e in str(n)`非常具有可读性。

我确实发现不那么令人赏心悦目的是对`str(n)`内部循环的重复调用（其中`n`是不变的）。

无论如何，我会以完全不同的方式实现这两个功能

```
def is_permutation_of(n, m):
   return sorted(str(n)) == sorted(str(m))

def has_even_digit(n):
   if n == 0:
      return True
   while n != 0:
      if n % 2 == 0:
         return True
      n //= 10
   return False 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T18:28:05.010

我更喜欢我的变体而不是你的`is_permutation_of`：

```
def is_perm(a,b): return sorted(str(a)) == sorted(str(b)) 
```

我认为这对`has_even_digit`

```
def has_even_digit(n):
    evens=set(['0', '2', '4', '6', '8'])
    return any(c in evens for c in str(n)) 
```

或者，甚至使用元组而不是集合：

```
def has_even_digit(n):
    return any(c in ('0', '2', '4', '6', '8') for c in str(n)) 
```

* * *

**编辑**

从评论线程中，我认为您正在寻找这样的东西：

```
# pseudo code -- don't use -- not syntactically correct
for d in 123456:      # integer
   # do something with each digit... 
```

这不起作用，因为整数不支持 Python 中的迭代。此外，没有真正需要像整数迭代这样的东西，因为它是如此地道且易于使用字符串来完成。

这是一个 Python 框架，用于处理字符串但生成单个整数：

```
for d in [int(c) for c in str(123456)]:
    # d is a left (most significant) to right integer digit - do what you want with it... 
```

如果您想要从右到左的相同数字：

```
for d in [int(c) for c in str(123456)[::-1]]:
    # Now right (least significant digit) to left (most significant digit) 
```

将这两个简单的情况与整数或长整数的实际数学进行比较：

```
def int_iter(n,reverse=False):
    rtr=[]
    if not isinstance(n, (int,long)):
        raise ValueError('n must be int or long')

    while n:
        rtr.append(n%10)
        n/=10

    if reverse:
        return rtr[::-1]    
    else:
        return rtr 
```

使用字符串确实容易得多，而且可能更快。如果您需要超快的速度，请在 C 中进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T18:31:26.970

```
def is_permutation_of(n, m):
    return sorted(n) == sorted(m)

evens=re.compile('[02468]')
def has_even_digit(n):
    return evens.search(str(n)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T18:25:26.957

如果您的数字不是“大量” - 即使事情停止，那么您可以使用您的`has_even_digit`as：

```
>>> a = 123456789
>>> any(i % 2 == 0 for i in map(int, str(a)))
True 
```

如果做不到这一点，优化将是对`1`自身进行按位 - 因为如果设置了第一位，则任何可以用二进制表示的东西都必须是奇数。虽然这与“整数”有关 - 而不是数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T18:26:59.833

为了迭代偶数位，您可以使用[range 的`step`](http://docs.python.org/2/library/functions.html#range)参数：

`range(start, end, step)`

因此，在您的代码中，您可以执行以下操作：

`for e in range(0, 8, 2):`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T18:27:04.033

您可以创建一个生成器：

```
def digits(num):
    while num > 0:
        yield num % 10
        num /= 10 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T18:29:59.203

如果您将 is_permutation_of 的计算成本存储到单独的变量中，则可以轻松降低它们的计算成本。

```
def is_permutation_of(n, m):
    """ Return True if n is a permutation of m, else False
    """
    sn = str(n)
    sm = str(m)
    if len(sn) != len(sm):
        return False
    for d in sn:
        if d not in sm:
            return False
    return True 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-30T18:37:39.867

```
def has_even_digits(n):
    return bool(set('02468') & set(str(n))) 
```

# android - 从 jpeg 字节数组中获取像素

> ID：14611012
> 
> 赞同：1
> 
> 时间：2013-01-30T18:21:55.913
> 
> 标签：android, bitmap, java-native-interface, jpeg, pixel

我需要在不实例化位图的情况下从 Jpeg 图像中获取像素信息，然后将其传递给 JNI。

android 无法从相机中获取除 jpeg 图像之外的任何其他内容（除非您需要低分辨率，在这种情况下您可以使用`PreviewCallback`），所以我从 jpegCallback 获得了 byte[]。

`int[]`是否可以在不使用的情况下获取像素信息`Bitmap.getPixels()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:35:57.743

如果您不想构建位图，则唯一的选择是自己解码 JPEG 缓冲区；这意味着要么找到另一个 Java JPEG 解压缩库，要么使用 JNI 和 C JPEG 库，例如[libjpeg](http://libjpeg.sourceforge.net/)。或者，您可以从头开始编写一个，我不建议您这样做，除非您已经非常熟悉图像压缩例程，并且您有足够的时间来实现和调试。

正如 Scott 所问，为什么使用 Bitmap 是不可接受的？无论您采取什么路线，都必须调用一些东西来解压缩图像数据，并且使用[BitmapFactory.decodeByteArray](http://developer.android.com/reference/android/graphics/BitmapFactory.html)是一个简单的、已知可行的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:23:20.793

我看不出标准的 Android API 是如何实现的。我确定您可以使用第 3 方 JPEG 库（谷歌搜索可能会发现）。你为什么要避免位图？如果是内存限制，您可能需要使用[BitmapRegionDecoder解码小的水平块](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html)

# opengl - OpenGL - 以交互方式更改变量值的简单方法

> ID：14611014
> 
> 赞同：2
> 
> 时间：2013-01-30T18:22:01.313
> 
> 标签：opengl

我想要的是能够通过带有图形的窗口而不是代码来更改变量的值。如果有几个固定值并且只能在它们之间进行选择，那也没关系。你能给我一些想法吗？

我在想这样的事情：|--|--|--|--|--|，其中每条垂直线代表一个值，当您单击该线时，该值会更改，但这有点困难我来实现这一点。任何更简单的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:59:33.977

这是一个基于键盘的快速解决方案（我假设是 C++）：

假设您的值都在一个名为的数组中`values`：

```
const int NUM_VALUES = 5;
int values[NUM_VALUES]; 
```

跟踪所选值：

```
int selectionIndex = 0; 
```

创建一个处理按键的函数：

```
void keyPressed (unsigned char key, int x, int y) { 
    if (key == GLUT_KEY_LEFT) {
        if(--selectionIndex < 0)
            selectionIndex = NUM_VALUES - 1;
    } 
    else if (key == GLUT_KEY_RIGHT) {
        if(++selectionIndex >= NUM_VALUES)
            selectionIndex = 0;
    }  
    else if (key == GLUT_KEY_UP) {
        values[selectionIndex]++;
    }  
    else if (key == GLUT_KEY_DOWN) {
        values[selectionIndex]--;
    }   
} 
```

最后，在您的初始化中，链接`keyPressed`到`glutKeyboardFunc`：

```
glutKeyboardFunc(keyPressed); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T19:00:26.257

不同的键盘输入可能是实现这一目标的最简单方法。只需使用 switch 语句来区分不同的可能性并将值存储在变量中。如果您需要从着色器访问它，请将该值用作统一值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T06:46:55.820

我建议使用[http://www.antisphere.com/Wiki/tools:anttweakbar](http://www.antisphere.com/Wiki/tools:anttweakbar) - AntTweakBar，它是一个很棒且易于使用的 GUI 库。

基本上它会呈现一个窗口，您可以在其中轻松放置变量。

初始化它并简单地添加你的变量：

```
float myFloat = 0.0f;
TwAddVarRW(myBar, "myFloat", TW_TYPE_FLOAT, &myFloat, "min=-10.0 max=10.0 step=0.1"); 
```

# iis-7 - IIS7 访问网络共享

> ID：14611015
> 
> 赞同：27
> 
> 时间：2013-01-30T18:22:06.990
> 
> 标签：iis-7, windows-server-2008-r2

我正在使用 PHP 5.4 在 Windows Server 2008 R2 上运行 IIS 7。我的一个 PHP 脚本正在尝试使用 UNC 路径访问受保护网络共享上的文件。如何将 IIS 服务帐户更改为有权访问共享的帐户？这在 Apache HTTP 服务器上很容易做到（您只需更改它），但不清楚如何使用 IIS。我能做些什么？

**更新：**

我能够使用我网站的“基本设置”中的“连接为”选项让事情正常工作，然后指定一个可以访问网络共享的帐户。看来*我*的问题与这个问题有关：

[https://serverfault.com/questions/366234/iis-identities-application-pool-vs-connect-as-in-basic-settings](https://serverfault.com/questions/366234/iis-identities-application-pool-vs-connect-as-in-basic-settings)

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-30T18:26:30.037

对于在 Windows Server 2008 R2 上运行的 IIS 7 ... 在 中`IIS Manager`，选择`Application Pool`您的网站正在运行的位置。

单击“高级设置”。将有一个条目`Identity`（在该`Process Model`部分下）。单击它，为您有权访问共享的帐户提供凭据。

**更新**

如果您使用的是 Active Directory 域帐户，则应确保`Identity`在运行的应用程序池下正确提供了该帐户。例如，`MYDOMAIN\myAccount`。

进行此更改后，您需要执行以下操作：

1.  停止网站。
2.  回收您的应用程序池。
3.  启动网站。

**更新二**

从对此答案的评论讨论中，@HydroPowerDeveloper 能够使用 WebSite -> Basic Settings -> "Connect As" 并在此处设置凭据，使 PHP 脚本能够通过 UNC 路径访问网络共享。

过去，我一直使用设置`Identity`via的方法`Application Pool`，这允许我的代码通过 UNC 路径访问网络共享。

但是，我部署的所有站点/应用程序`IIS`都是基于 .NET 的 WCF 或 ASPX 站点。

我推测（但对此不是 100% 确定，需要研究/测试来确认）在 .NET 代码中`Identity`指定的`Application Pool`内容是通过执行 .NET 代码使用的，而 PHP 脚本使用“Connect As”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-23T02:36:31.317

通常，应用程序池设置使用尽可能少的权限。

[http://msdn.microsoft.com/en-us/library/ff647402.aspx](http://msdn.microsoft.com/en-us/library/ff647402.aspx)

最简单的方法是允许访问当前的 IIS 帐户。

在资源管理器中，导航到共享目录。

右键单击-> 属性-> 安全

如果在列表中看不到预期的 IIS 用户（组或用户名），请根据需要编辑并添加用户。

我使用“网络服务”-> 检查名称。

详细说明在那个网站上。

这样，系统仍然是受限的，我们只允许访问特定目录，我们不需要创建任何新用户，我们不需要回收应用程序池，我们不需要执行任何操作漂亮的模拟代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-15T15:53:12.333

复活一个老问题...

我刚刚设置了一个使用 Perl 访问 UNC 共享的 Win 2016 服务器。我将应用程序池设置为我验证对该共享具有正确权限的帐户。然后我将我的网站设置为“连接为...”（在“基本设置”下）同一用户。我仍然无法访问工作。

挠头之后，我意识到我的“虚拟目录”cgi-bin 是在原来的“通过”帐户下运行的。然后，我将虚拟目录设置为“连接为...”与站点和应用程序池相同的帐户，宾果游戏，一切正常。

因此，请记住更新任何虚拟目录以及站点和应用程序池...

# wpf - How could I implement this listbox with WPF/DataBinding?

> ID：14611022
> 
> 赞同：0
> 
> 时间：2013-01-30T18:22:36.807
> 
> 标签：wpf, data-binding, listbox

I have a working HTML form with a listbox from where the user can select from a list of standard bicycle tyre sizes. Each size maps internally to some numerical value, making the data source a Dictionary (map of key/value pairs).

The javascript implementation is as follows, and I would like to have the same behaviour in WPF with databinding (defining the dictionary/enum inside my domain-model class):

```
<select name="tiresize" id="tiresize"
    onchange="calcula();" style="width: 100px">
    <option value="305">26 X 1.0 (559 mm)</option>
    <option value="311">26 x 1 (650C)</option>
    <option value="312">26 X 1.5</option>
    <option value="324">26 X 1.9</option>
    <option value="330">26 X 1 3/8 (590 mm)</option>
    <option value="340">27 X 1</option>
    <option value="342">27 X 1 1/8</option>
    <option value="343">27 X 1 1/4</option>
    <option value="345">27 X 1 3/8</option>
    <option value="330">26 X 2.125</option>
    <option value="332">700 x 21</option>
    <option value="334" selected="selected">700 x 23</option>
    <option value="335">700 x 25</option>
    <option value="336">700 x 28</option>
    <option value="342">700 x 32</option>
    <option value="345">700 x 35</option>
    <option value="347">700 x 38</option>
    <option value="354">700 x 44</option>
    <option value="365">700 x 50</option>
    <option value="370">700 x 56</option>
</select> 
```

Thanks for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:38:46.083

You first need to set the DataContext of something (Window, Grid, etc.) that contains your ListBox to an instance of the class that contains the Dictionary. You can do this in XAML or in code. Then:

```
<ListBox ItemsSource="{Binding MyDictionaryProperty}" DisplayMemberPath="Key"
         SelectedValuePath="Value" SelectedValue="{Binding wheelRadius}"/> 
```

As long as wheelRadius is of type `int` and has a public setter this will take the Value property of the `SelectedItem` (thanks to `SelectedValuePath`) and push that into `SelectedValue`, which will set your `wheelRadius` property through a `TwoWay Binding` (the default for `SelectedValue`, `SelectedItem`, and some others).

# php - 获取 xml 文件的内容会导致 XML 解析错误

> ID：14611024
> 
> 赞同：0
> 
> 时间：2013-01-30T18:22:42.330
> 
> 标签：php, xml, http-headers

我正在尝试获取 XML 文件的内容，以防文件存在或生成新的 xml 文件。问题是，当我尝试获取 xml 文件时，出现此错误：

> XML 解析错误：找不到元素位置： [http](http://mydomain.gr/generate.php) ://mydomain.gr/generate.php第 1 行，第 1 列：^

我的代码是这个

```
<?php

include_once('xmlgenerator.php');
$xml = new XmlGenerator();
if($xml->cachefile_exists){
    if(!$xml->is_uptodate()){
        // echo "update it now";
        $xml->createFile = 1;
        $data = $xml->create();
        Header('Content-type: text/xml');
        print($data->asXML());
    }else{
        //echo "doesn't need any update.";
        Header('Content-type: text/xml');
        file_get_contents($xml->cached_file);
    }
}else{
   // echo "Didn't find any cache file. Lets Create it";
        $xml->createFile = 1;
        $data = $xml->create();
        Header('Content-type: text/xml');
        print($data->asXML());
}
?> 
```

XML 结构很好，我仔细检查了 XML 文件编码或调用 XML 的 php 文件。一切都是没有 BOM 的 UTF8。当我直接在浏览器中打开 XML 文件时，它看起来很完美，而且它是一个有效的文件（使用 w3c 和在线工具检查过）。

造成问题的 2 行（很可能）：

```
Header('Content-type: text/xml');
file_get_contents($xml->cached_file) 
```

我什至删除了任何东西，只使用了这 2 行并得到了同样的错误。

那么有什么问题呢？是否有任何适当的方法可以在 php 文件中包含 XML 文件、更改标题并将其显示给最终用户？我真的不想重定向，我需要留在同一个 php 文件中，只显示 XML 内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:16:30.090

```
echo file_get_contents($xml->cached_file) 
```

# c++ - Direct2D - 模拟颜色键控透明位图

> ID：14611030
> 
> 赞同：5
> 
> 时间：2013-01-30T18:22:53.587
> 
> 标签：c++, transparency, gdi, direct2d

我目前正在更新 Windows GDI 应用程序以使用 Direct2D 渲染，并且我需要通过颜色键控支持“透明”位图以实现向后兼容性。

现在我正在使用 HWND 渲染目标和转换后的 WIC 位图源（到 GUID_WICPixelFormat32bppPBGRA）。到目前为止，我的计划是从转换后的位图 Lock() 创建一个 IWICBitmap，然后处理每个像素，如果它与颜色键匹配，则将其 alpha 值设置为 0。

这似乎有点“蛮力” - 这是解决这个问题的最佳方法还是有更好的方法？

编辑：为了完整起见，这里是我所使用的摘录 - 看起来它工作正常，但我愿意接受任何改进！

```
// pConvertedBmp contains a IWICFormatConverter* bitmap with the pixel 
// format set to GUID_WICPixelFormat32bppPBGRA

IWICBitmap* pColorKeyedBmp = NULL;
HRESULT hr    = S_OK;
UINT    uBmpW = 0;
UINT    uBmpH = 0;

pConvertedBmp->GetSize( &uBmpW, &uBmpH );

WICRect rcLock = { 0, 0, uBmpW, uBmpH };

// GetWIC() returns the WIC Factory instance in this app
hr = GetWIC()->CreateBitmapFromSource( pConvertedBmp, 
                                       WICBitmapCacheOnLoad, 
                                       &pColorKeyedBmp );
if ( FAILED( hr ) ) {
   return hr;
}

IWICBitmapLock* pBitmapLock = NULL;
hr = pColorKeyedBmp->Lock( &rcLock, WICBitmapLockRead, &pBitmapLock );
if ( FAILED( hr ) ) {
   SafeRelease( &pColorKeyedBmp );
   return hr;
}

UINT  uPixel       = 0;
UINT  cbBuffer     = 0;
UINT  cbStride     = 0;
BYTE* pPixelBuffer = NULL;

hr = pBitmapLock->GetStride( &cbStride );
if ( SUCCEEDED( hr ) ) {
   hr = pBitmapLock->GetDataPointer( &cbBuffer, &pPixelBuffer );
   if ( SUCCEEDED( hr ) ) {

      // If we haven't got a resolved color key then we need to
      // grab the pixel at the specified coordinates and get 
      // it's RGB

      if ( !clrColorKey.IsValidColor() ) {
         // This is an internal function to grab the color of a pixel
         ResolveColorKey( pPixelBuffer, cbBuffer, cbStride, uBmpW, uBmpH );
      }

      // Convert the RGB to BGR
      UINT   uColorKey = (UINT) RGB2BGR( clrColorKey.GetRGB() );
      LPBYTE pPixel    = pPixelBuffer;

      for ( UINT uRow = 0; uRow < uBmpH; uRow++ ) {

         pPixel = pPixelBuffer + ( uRow * cbStride );

         for ( UINT uCol = 0; uCol < uBmpW; uCol++ ) {

            uPixel = *( (LPUINT) pPixel );

           if ( ( uPixel & 0x00FFFFFF ) == uColorKey ) {
              *( (LPUINT) pPixel ) = 0;
           }
           pPixel += sizeof( uPixel );
        }
     }
   }
}

pBitmapLock->Release();

if ( FAILED( hr ) ) {
   // We still use the original image
   SafeRelease( &pColorKeyedBmp );
}
else {
   //  We use the new image so we release the original
   SafeRelease( &pConvertedBmp );
}

return hr; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-02T21:19:32.830

如果你只需要“处理”位图来渲染它，那么最快的总是GPU。在 Direct2D 中有用于简单位图处理的[效果](https://msdn.microsoft.com/en-us/library/windows/desktop/hh973240.aspx)(ID2D1Effect)。你*可以*自己写[看起来比较复杂]，或者使用其中一种[内置效果](https://msdn.microsoft.com/en-us/library/windows/desktop/hh706316.aspx)[比较简单]。有一个叫[色度键 (CLSID_D2D1ChromaKey)](https://msdn.microsoft.com/en-us/library/windows/desktop/dn890715.aspx)。

另一方面，如果您需要在 CPU 上进行进一步处理，它会变得更加复杂。优化您拥有的代码可能会更好。

# maven - Clojure/leiningen：项目突然中断！什么会导致这个maven错误？

> ID：14611033
> 
> 赞同：4
> 
> 时间：2013-01-30T18:22:58.273
> 
> 标签：maven, clojure, leiningen

今天早上去启动我的 clojure/lein 应用程序，突然我收到了这个错误！

```
Retrieving lein-clojars/lein-clojars/0.9.1/lein-clojars-0.9.1.pom from clojars
Retrieving lein-clojars/lein-clojars/0.9.1/lein-clojars-0.9.1.jar from clojars
Could not find metadata org.codehaus.jackson:jackson-core-asl/maven-metadata.xml in local (/Users/JD/.m2/repository)
Could not transfer metadata org.codehaus.jackson:jackson-core-asl/maven-metadata.xml from/to central (http://repo1.maven.org/maven2/): Checksum validation failed, expected e3f022e29dff365daf755e2c89fe42867e7addac but is aed947332fa98b1f9cd176faa3d046faa1e48bc9
Failure to find org.codehaus.jackson:jackson-core-asl/maven-metadata.xml in https://clojars.org/repo/ was cached in the local repository, resolution will not be reattempted until the update interval of clojars has elapsed or updates are forced
This could be due to a typo in :dependencies or network issues.
Could not resolve dependencies 
```

校验和验证错误？在杰克逊核心 asl 上？没有错别字或网络问题（已验证）。这里发生了什么！有人有线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:43:58.010

[`maven-metadata.xml`](http://search.maven.org/remotecontent?filepath=org/codehaus/jackson/jackson-core-asl/maven-metadata.xml)for`jackson-core-asl`确实有一个[MD5](http://search.maven.org/remotecontent?filepath=org/codehaus/jackson/jackson-core-asl/maven-metadata.xml.sha1)文件，而`aed947332fa98b1f9cd176faa3d046faa1e48bc9`leiningen 计算下载的文件是`e3f022e29dff365daf755e2c89fe42867e7addac`. 例如，当从远程存储库下载工件时出现一些网络问题时，可能会发生这种情况：在这种情况下，可能会忽略诸如 404 之类的失败 HTTP 代码，并在描述错误的 HTML 页面上计算哈希值。

确保您至少可以手动访问工件（即没有 404 等），发出

```
rm -R ~/.m2/repository/org/codehaus/jackson 
```

并重试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T21:54:11.570

除了@skuro 给出的答案之外，我遇到此问题的其他常见原因是当您位于代理中心的公司内部存储库（例如：nexus）之后。你应该检查你的 ~/.m2/settings.xml 镜像设置，如果你有这样的内部仓库，检查它与[http://search.maven.org](http://search.maven.org)的一致性。通常，您公司 repo 上的 jar 已损坏，您需要将其删除，以便从中央重新下载

# extjs - TextField.setHieght(100); 在ie中不起作用？

> ID：14611038
> 
> 赞同：-2
> 
> 时间：2013-01-30T18:23:20.813
> 
> 标签：extjs, textfield

我使用此代码设置文本字段高度，但它在 IE (8) 中不起作用，

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:24:35.227

可能是笔误造成的？我想应该是：

```
TextField.setHeight(100); 
```

# r - 将 SPSS 数据文件导入 R

> ID：14611045
> 
> 赞同：5
> 
> 时间：2013-01-30T14:51:09.360
> 
> 标签：r, spss

在我的公司，我们正在考虑逐步淘汰 SPSS 以选择 R。在过渡期间，尽管我们仍将获得 SPSS 数据文件格式 (.sav) 的数据。

我在将此 SPSS 数据文件导入 R 时遇到问题。当我将 SPSS 文件导入 R 时，我想保留变量的值和值标签。包中的`read.spss()`函数`foreign`使我可以选择保留变量的值或值标签，但不能同时保留两者。

AFAIK，R 确实允许因子变量具有值（级别）和值标签（级别标签）。我只是想知道是否有可能以某种方式修改`read.spss()`函数来合并它。

或者，我`spss.system.file()`从`memisc`包中遇到了据称允许这种情况发生的函数，但它要求一个单独的语法文件（codes.file），我不一定总是可以使用它。

这是一个[示例数据文件](https://docs.google.com/file/d/0BzEqcNzewvoKOVdWQkNWakxPdHM/edit)。

我将不胜感激解决此问题的任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:15:24.587

我不知道如何读取 SPSS 元数据；我通常读取 .csv 文件并添加元数据，或者编写一个小的一次性 PERL 脚本来完成这项工作。我想提一下的是，最近发布的 R 包[Rz](http://cran.r-project.org/web/packages/Rz/index.html)可以帮助您将 SPSS 数据引入 R。我已经快速浏览了一下，似乎很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T20:29:32.323

我的工作正在经历同样的转变。

read.spss() 将变量标签作为您使用它创建的对象的属性返回。因此，在下面的示例中，我有一个名为 rvm 的数据框，它是由 read.spss() 使用 to.data.frame=TRUE 创建的。它有 3,500 个变量，名称短名为 a1、a2 等，但 SPSS 中的每个变量都有长标签。我可以通过以下方式访问变量标签

```
cbind(attributes(rvm)$variable.labels) 
```

它返回所有 3,500 个变量全名的列表，最多为

```
…
x23      "Other Expenditure Uncapped Daily Expenditure In Region"          
x24      "Accommodation Expenditure In Region"                             
x25      "Food/Meals/Drink Expenditure In Region"                          
x26      "Local Transport Expenditure In Region"                           
x27      "Sightseeing/Attractions Expenditure In Region"                   
x28      "Event/Conference Expenditure In Region"                          
x29      "Gambling/Casino Expenditure In Region"                           
x30      "Gifts/Souvenirs Expenditure In Region"                           
x31      "Other Shopping Expenditure In Region"                            
x0       "Accommodation Daily Expenditure In Region" 
```

如何处理这些是另一回事，但至少我拥有它们，如果我愿意，我可以将它们放在其他对象中进行保管、使用 grep 搜索等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T15:19:34.707

有一个解决方案可以通过 ODBC 驱动程序读取 R 中的 SPSS 数据文件。

1) 有一个[IBM SPSS Statistics 数据文件驱动程序](http://www-01.ibm.com/support/docview.wss?uid=swg21483499)。我找不到下载链接。我是从我的 SPSS 提供商那里得到的。独立驱动程序就是您所需要的。您不需要 SPSS 来安装或使用驱动程序。

2) 为 SPSS 数据驱动程序创建一个 DSN。

3）使用`RODBC`包，您可以在 R 中读取任何 SPSS 数据文件。可以将每个变量的值标签作为单独的表获取。然后可以根据需要以任何方式使用 R 中的标签。

这是 Windows 上的一个工作示例（我的计算机上现在没有 SPSS），用于读取 R 示例数据文件。我没有在 Linux 上测试过这个。它可能也适用于 Linux，因为 Linux 也有一个 SPSS 数据驱动程序。

```
require(RODBC)

# Create connection
# Change the DSN name and CP_CONNECT_STRING according to your setting
con <- odbcDriverConnect("DSN=spss_ehsis;SDSN=SAVDB;HST=C:\\Program Files\\IBM\\SPSS\\StatisticsDataFileDriver\\20\\Standalone\\cfg\\oadm.ini;PRT=StatisticsSAVDriverStandalone;CP_CONNECT_STRING=C:\\temp\\data_expt.sav")

# List of tables
Tables <- sqlTables(con)
Tables

# List of table names to extract
table.names <- Tables$TABLE_NAME[Tables$TABLE_SCHEM != "SYSTEM"]

# Function to query a table by name
sqlQuery.tab.name <- function(table) {
  sqlQuery(con, paste0("SELECT * FROM [", table, "]"))
}

# Retrieve all tables
Data <- lapply(table.names, sqlQuery.tab.name)

# See the data
lapply(Data, head)

# Close connection
close(con) 
```

例如，我们可以为两个变量定义值标签：

```
[[5]]
  VAR00002 VAR00002_label
1        1           Male
2        2         Female

[[6]]
  VAR00003 VAR00003_label
1        2        Student
2        3       Employed
3        4     Unemployed 
```

**附加信息**

这是一个允许在连接到 SPSS 数据文件后读取 SPSS 数据的功能。该函数允许指定要选择的变量列表。如果`value.labels=T`将 SPSS 数据文件中带有值标签的选定变量转换为带有标签的 R 因子。

我不得不说我对这个解决方案的性能不满意。它适用于小型数据文件。对于大型 SPSS 数据文件（甚至选择了变量的子集），经常会达到 RAM 限制。

```
get.spss <- function(channel, variables = NULL, value.labels = F) {

  VarNames <- sqlQuery(channel = channel,
    query = "SELECT VarName FROM [Variables]", as.is = T)$VarName

  if (is.null(variables)) variables <- VarNames else {
    if (any(!variables %in% VarNames)) stop("Wrong variable names")
  }

  if (value.labels) {
    ValueLabelTableName <- sqlQuery(channel = channel,
      query = "SELECT VarName FROM [Variables]
                                    WHERE ValueLabelTableName is not null",
      as.is = T)$VarName
    ValueLabelTableName <- intersect(variables, ValueLabelTableName)
  }

  variables <- paste(variables, collapse = ", ")

  data <- sqlQuery(channel = channel,
    query = paste("SELECT", variables, "FROM [Cases]"),
    as.is = T)

  if (value.labels) {
    for (var in ValueLabelTableName) {
      VL <- sqlQuery(channel = channel,
        query = paste0("SELECT * FROM [VLVAR", var,"]"),
        as.is = T)
      data[, var] <- factor(data[, var], levels = VL[, 1], labels = VL[, 2])
    }
  }

  return(data)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T19:41:52.333

由于您有 SPSS，我建议安装“Essentials for R”插件（免费，但您需要注册，另请参阅[安装说明](ftp://public.dhe.ibm.com/software/analytics/spss/documentation/statistics/21.0/en/rplugin/InstallationDocuments/Windows/Essentials_for_R_Installation_Instructions.pdf)），它允许您在 SPSS 中运行 R。该插件包括一个 R 包，其中包含将活动 SPSS 数据帧传输到 R（和返回）的功能 - 包括标记的因子水平、日期、德语变音符号 - 否则众所周知的困难的细节。以我的经验，它比 R 自己的`foreign`包更可靠。

完成所有设置后，在 SPSS 中打开数据，然后在语法窗口中运行类似于以下代码的内容：

```
begin program r.
myDf <- spssdata.GetDataFromSPSS(missingValueToNA=TRUE,
                                 factorMode="labels",
                                 rDate="POSIXct")
save(myDf, file="d:/path/to/your/myDf.Rdata")
end program. 
```

R 插件链接的要点（显然破坏了降价链接语法）：

```
https://www.ibm.com/developerworks/mydeveloperworks/wikis/home/wiki/We70df3195ec8_4f95_9773_42e448fa9029/page/Downloads%20for%20IBM®%20SPSS®%20Statistics?lang=en 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-22T22:45:53.700

如今，该软件包[`haven`](https://haven.tidyverse.org/index.html)提供了实现您想要的功能（以及更多功能）。

该函数[`read_sav()`](https://haven.tidyverse.org/reference/read_spss.html)可以导入 *.sav 和 *.zsav 文件并返回一个 .sav 文件[`tibble`](https://github.com/tidyverse/tibble)。变量标签自动存储在`labels`对应变量的属性中`tibble`。[标签](https://haven.tidyverse.org/reference/labelled.html)类保留了原始语义，并允许我们将任意标签与数字或字符向量相关联。如果需要，我们可以使用该函数[`as_factor()`](https://haven.tidyverse.org/reference/as_factor.html)强制标记对象，即标记类的对象，甚至`data.frame`s 或`tibble`s 内的所有标记向量（一次）到因子。

# php - 由于查询导致页面加载缓慢

> ID：14611048
> 
> 赞同：0
> 
> 时间：2013-01-30T18:23:54.467
> 
> 标签：php, mysql

我在页面上运行此查询以使用 foreach 语句显示表中的记录。我认为它导致页面加载缓慢。我在想第二行可能是导致问题的原因。但是，如果我删除该行`WHERE code = 'FE'`，页面会抛出一个 foreach 错误`Warning: Invalid argument supplied for foreach()`

```
$arrquery = "SELECT * FROM phpvms_schedules 
WHERE code = 'FE'
AND locate(dayofweek(convert_tz(now(),'+1:00','+0:00'))-1,".TABLE_PREFIX."schedules.daysofweek)>0
AND phpvms_schedules.enabled = '1'
ORDER BY arrtime ASC";

$arrlist = DB::get_results($arrquery); 
```

前锋：

```
foreach($arrlist as $flight) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:27:03.190

您查询的这一行可能会导致您出现问题：

```
AND locate(dayofweek(convert_tz(now(),'+1:00','+0:00'))-1,".TABLE_PREFIX."schedules.daysofweek)>0 
```

此 WHERE 条件无法利用索引，因此除了在其他 WHERE 条件和条件中使用的列上设置索引之外，您无法优化此查询`ORDER BY`。

好的，根据您的评论，我正在更新我的答案。我认为您最好的选择是使用字符串比较，因此在 PHP 中为您感兴趣的日期构建一个字符串。所以，假设您想要任何包含第 0、2 和 4 天的记录。您将构建一个这样的字符串：

```
$day_search = '%0%2%4%'; 
```

或者，如果您将天数作为数组：

```
$day_array = array(1,3,5);
$day_search = '%' . implode('%', $day_array) . '%'; 
```

然后你会像这样进行搜索：

```
AND dayofweek LIKE '$day_search' 
```

当然，您需要对 , , 和 conditions 中使用的所有其他列以及所有其他列的索引（尽管GROUP `dayofweek`BY和 JOIN 在这里不适用）。`WHERE``ORDER BY``GROUP BY``JOIN`

不过老实说，这个表真的应该被规范化，以便在单独的表中显示日期。这样，每条记录都可以在另一个表中为每个适用的日子有一个条目，您可以使用更合适的 WHERE 条件在 JOIN 中进行查询，例如`IN()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:27:24.830

不要删除该行`WHERE code = 'FE'`，因为它会使查询失败，只需删除`code = 'FE' AND`条件，或删除查询中的其余条件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:33:53.340

我建议您在 php 中进行计算，然后将其注入查询

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:26:48.610

我相当有信心这将对您有所帮助：

```
CREATE INDEX idx_code ON phpvms_schedules (code); 
```

但是，在评论中发布`EXPLAIN`我建议的内容将有助于我们澄清

# eclipse - 使用 Eclipse 的带有 Postgres 的基本独立 JPA 示例

> ID：14611052
> 
> 赞同：1
> 
> 时间：2013-01-30T18:24:00.153
> 
> 标签：eclipse, postgresql, jpa

我一直在尝试使用 Eclipse IDE 获得一个非常基本的独立 JPA 示例来与 Postgres 一起使用。

我定义了一个像这样的persistance.xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="sample" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>package.class</class>
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
        <properties>
            <property name="eclipselink.logging.level" value="INFO" />
            <property name="eclipselink.jdbc.driver" value="org.postgresql.Driver" />
            <property name="eclipselink.jdbc.url"
                value="jdbc:postgresql://localhost:5432/sample" />
            <property name="eclipselink.jdbc.user" value="scott" />
            <property name="eclipselink.jdbc.password" value="tiger" />
        </properties>
    </persistence-unit>
</persistence> 
```

该文件位于 src/main/resources/META-INF 文件夹中。我已将 src/main/resources 文件夹包含在 eclipse 的源目录中。我定义了一个名为 User 的简单实体。当我尝试创建该实体时

```
EntityManagerFactory entityManagerFactory 
         = Persistence.createEntityManagerFactory("sample");
     EntityManager em = entityManagerFactory.createEntityManager();
     EntityTransaction tx = em.getTransaction();
     try {
         User user = new User();
         user.setEnabled(false);
         user.setEmailId("test@test.com");
         tx.begin();
          em.persist(user);
         tx.commit();
     } catch (Exception e) {
         em.getTransaction().rollback();
     } finally {
         em.close();
     } 
```

我得到以下异常 -`Exception in thread "main" javax.persistence.PersistenceException: No Persistence provider for EntityManager named sample`

似乎我的persistance.xml 文件没有被拾取。JPA 框架在哪里加载persistance.xml 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T22:14:31.317

这是一个愚蠢的错误。该文件需要调用persistance.xml 而不是persistance.xml。

# quickbooks - Intuit Anywhere API 告诉我一个字段在已经指定时是必需的

> ID：14611054
> 
> 赞同：2
> 
> 时间：2013-01-30T18:24:12.897
> 
> 标签：quickbooks, intuit-partner-platform

我正在尝试在 Windows 的 QB 中创建发票。这是 XML：

```
<?xml version='1.0' encoding='utf-8'?>
<Add xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.intuit.com/sb/cdm/v2" xsi:schemaLocation="http://www.intuit.com/sb/cdm/V2./RestDataFilter.xsd " RequestId="1836474224e142c9ad9b7dd6cb0eaa41" FullResponse="true">
  <OfferingId>ipp</OfferingId>
  <ExternalRealmId>596059545</ExternalRealmId>
  <Invoice>
    <Header>
      <TxnDate>2013-01-30</TxnDate>
      <DiscountAmt>0</DiscountAmt>
      <ARAccountName>Sales - Support and Maintenance</ARAccountName>
      <DiscountAccountName>Discounts/Refunds</DiscountAccountName>
      <DueDate>2013-02-17</DueDate>
      <Currency>USD</Currency>
      <CustomerId>4</CustomerId>
    </Header>
    <Line>
      <Qty>1</Qty>
      <UnitPrice>7.00</UnitPrice>
      <Desc>Follow-up Test, Instant for Person138-Org3 Person138-Org3</Desc>
    </Line>
  </Invoice>
</Add> 
```

这是回应：

```
-2001:  cvc-complex-type.2.4.a: Invalid content was found starting with element 'ARAccountName'. One of '{"http://www.intuit.com/sb/cdm/v2":DiscountAccountId, "http://www.intuit.com/sb/cdm/v2":DiscountAccountName, "http://www.intuit.com/sb/cdm/v2":DiscountTaxable, "http://www.intuit.com/sb/cdm/v2":TxnId}' is expected. 
```

我不明白，因为我已经指定了 DiscountAccountName。我还尝试使用更像[创建示例](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/Invoice)的东西（与上面相同，但删除了 ARAccountName 和 DiscountAccountName）并得到了类似的响应。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:51:24.733

Intuit XML 请求由 XSD 验证，而 XML 由 XSD 验证，*您提供的标签的顺序很重要*。

这意味着如果文档 ( [https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/Invoice](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/Invoice) ) 规定 ARAccountName 位于DiscountAmt*之前*，那么您*必须*将 ARAccountName 放在 DiscountAmt 之前。

切换 XML 标记的顺序以匹配文档中显示的顺序，然后一切就绪。

# c# - 如何从派生类中设置类中的属性

> ID：14611056
> 
> 赞同：-2
> 
> 时间：2013-01-30T18:24:22.633
> 
> 标签：c#, inheritance, constructor

我不确定它在`C#`.

我有一堂课：

```
public class FindIt()
{
}

public class FindItFrm()
{
  private bool _amISet = false; 

  public FindItFrm()
  {
  }

  public bool AmISet()
  {
      get { return _amISet; }
  set { _amISet = value; }
  }
} 
```

我正在学习的课程有：

```
public class MyHelper() : FindIt
{
    // Constructor
           public MyHelper()
            : base(new FindItFrm())
} 
```

我想在类内的 while中设置一个属性（ `AmISet`）。我将如何做到这一点？`FindItFrm``MyHelper`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:50:14.563

您的代码应如下所示（将来，请发布工作代码作为示例）：

```
public class FindIt
{
    // You need to let your derived class access the FindItFrm
    protected FindItFrm Frm;

    // Constructor needs to accept a FindItFrm
    public FindIt(FindItFrm frm)
    {
        Frm = frm;
    }
}

public class FindItFrm
{
    private bool _amISet = false; 

    public bool AmISet
    {
        get { return _amISet; }
        set { _amISet = value; }
    }
}

public class MyHelper : FindIt
{
    // Constructor
    public MyHelper()
        : base(new FindItFrm())
    {
        Frm.AmISet = true;
    }
} 
```

# android - 从不同线程中的 DialogFragment 启动 AlertDialog

> ID：14611066
> 
> 赞同：1
> 
> 时间：2013-01-30T18:25:00.587
> 
> 标签：android, multithreading, handler

我有一个相当复杂的设置，其中`DialogFragment implements Runnable`启动另一个线程。我使用 a`Handler`来处理结果。在某些情况下，它应该构建并启动`AlertDialog`一个.`DialogFragment``DialogFragment`

# c# - 将 DevExpress DataGrid 绑定到自定义数据源

> ID：14611082
> 
> 赞同：0
> 
> 时间：2013-01-30T18:26:10.850
> 
> 标签：c#, .net, c#-4.0, datagrid, devexpress

我正在为我正在处理的项目（.NET4.0、WinForms）寻找一个好的 DataGrid 实现。我找到了 DevExpress 网格，这正是我所需要的，我只是有点迷失在绑定选项中。我能找到的所有示例都是将网格绑定到标准数据源——比如数据库数据源或 linq2sql ......不幸的是，我需要将它绑定到自定义 REST API 以从服务器应用程序收集数据（API 能够指定查询数据的广泛标准）。我还需要异步加载数据块而不是整个数据集（几千个条目）。

到目前为止，我已经找到了一些 DevExpress 组件的异步加载方法，但都需要（据我了解）一些 IQueryable 接口实现来执行任务。

我的问题基本上是要找出是否有更明智的选择来实现这一点，而不是实现 IQueryable 接口集（我真的不想这样做）。

我有一些经验，请告诉我。我不期待工作源代码，只是指向文档/网站的指针，我可能错过了或确认，我需要实现接口或其他一些具有我错过的所需功能的优秀数据网格库。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:47:14.483

您可以将 grid.DataSource 绑定到文档中的几乎任何列表：

实现**IList**接口的对象 - 此类数据源必须至少有一个“记录”。否则，绑定控件将无法创建任何行。绑定到此类数据源的控件不会收到任何数据更改的通知，因此必须手动更新。

实现**ITypedList**接口的对象 - 在这种情况下，没有必要为要创建的行提供任何“记录”。不支持数据更改通知。

实现**IBindingList**接口的对象（派生自 IList）——这种数据源类型没有其他接口的缺点。该接口声明了 ListChanged 事件，当绑定数据发生更改时，控件使用该事件更新自身。

# java - switch语句中有多个字符？

> ID：14611084
> 
> 赞同：-1
> 
> 时间：2013-01-30T18:26:12.487
> 
> 标签：java, switch-statement, case

只是为了澄清这是硬件。

在我们正在做的项目中，不允许用户输入数字或特殊字符（即！@ £ 等）

```
 char letter;
        String phonetic;

        Scanner kb = new Scanner(System.in);

        System.out.print("Please enter a letter: ");
        letter = letter = kb.next().charAt(0);

        switch(Character.toUpperCase(letter))
{
       case 'A':
            {
                Dot();
                Dash();
                Red();
            }
            break;

        case '1,2,3,4,5,6,7,8,9,0':
            {
               System.out.println('No number input please!');
            }
        break;
} 
```

错误开启

```
'1,2,3,4,5,6,7,8,9,0' 
```

日食 说

```
invalid character constant 
```

如果我必须手动输入所有数字，那不是很冗长吗？

即案例'1'：案例'2'：

即使

```
case 1,2,3,4,5,6,7,8,9,0: 
```

它行不通。

有没有更短的方法可以使用 switch 语句来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:29:25.540

这是因为 Case 表达式应该是java **7**`int-compatible literal`中的 an或 a 。`String`

 **```
case '1,2,3,4,5,6,7,8,9,0': 
```

字符文字使用单引号表示。`c`，它应该只有一个长度，而你的情况没有反映这一点，因此是错误的。

```
'1,2,3,4,5,6,7,8,9,0'  this is not a legal character. 
```

如果您只想检查字符是否只是 alpha，请在开关开始之前使用[**Charcter#isDigit(char)**](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html#isDigit%28char%29)或[**Charcter#isLetter ，如下面的代码所示：**](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html#isLetter%28char%29)

```
char ch=  (Character.toUpperCase(letter);
if(!Character.isDigit(ch)) {
    switch(Character.toUpperCase(letter))
     {
       case 'A':
            {
                Dot();
                Dash();
                Red();
            }
            break;
        }
     }
else {
       System.out.println("no numbers please")
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:30:38.333

没有更简单的使用案例的方法，那呢？：

```
if ('0' <= letter && letter <= '9')
  System.out.println('No number input please!'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T18:27:16.333

不，这种情况下的 Java 不像 C# 那样聪明。您需要为此编写多行。如果要比较字符串，则需要使用`if`语句。还记得使用此代码进行比较：

```
if("search".equals(string2)) {...} 
```

你不能通过`==`这个来比较只会比较内存地址。另请注意，我在静态字符串而不是变量上使用等号，`string2`因为如果`string2`为空，您的代码会中断。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T18:27:18.507

> 如果我必须手动输入所有数字，那不是很冗长吗？

是的。

> 有没有更短的方法可以使用 switch 语句来做到这一点？

不。

考虑一个`if`声明...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T05:40:01.747

希望这篇能给你更多启发。

考虑一下，您的表达式生成输出为`A , B, C, D, E, F, G, H, I, ...till Z`. 并且您想为所有这些执行相同的方法/功能。

然后，您可以检查`ascii`字符的值并修改您的代码以使用`if`和`for`循环，或者`switch`按照以下示例程序中的程序中所述使用。

玩弄代码以了解更多信息。

```
public class SwitchClass 
{   

public void method1()
{
        System.out.println("Menthod 1");
}

public void method2()
{
        System.out.println("Menthod 2");
}

public void method3()
{
        System.out.println("Menthod 3");
}   

public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);
    SwitchClass sw = new SwitchClass();
    System.out.println("Enter the String:");
    String input = in.next();

    for(int i = 0; i<input.length(); i++)
    {

        switch(Character.toUpperCase(input.charAt(i)))
        {

            case 'A':
            case 'B':
            case 'C':
            case 'U':
                    System.out.println(Character.toUppercase(input.charAt(i))+" Case calling");
                    sw.method1();
                    sw.method2();
                    sw.method3();
                    break;

            default:
                    System.out.println("No number input please!");
                    break;
        }
    }       
}
} 
```**

# java - 我应该使用哪个 AssistedInject？谷歌还是 Sonatype？

> ID：14611086
> 
> 赞同：0
> 
> 时间：2013-01-30T18:26:19.503
> 
> 标签：java, maven, guice, assisted-inject

我很新`Guice`，我需要`AssistedInject`在我的应用程序中。当我在 Maven 上查看 Jar 时，我看到有两个：

*   [org.sonatype.sisu.inject](http://search.maven.org/#artifactdetails|org.sonatype.sisu.inject|guice-assistedinject|3.1.2|jar)
*   [com.google.inject.extensions](http://search.maven.org/#artifactdetails|com.google.inject.extensions|guice-assistedinject|3.0|jar)

Sonatype 版本更新更近，版本号也更高，但它实际上是由 Google 和 Guice 官方支持的吗？还是它自己的 Nexus 东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:32:38.287

我会使用 Google 的，除非您了解更多关于 Sonatype 为何修补 Google 的版本以及您需要与它一起使用的其他 Guice jar 版本的信息。

Sonatype 3.2.1 版依赖于其他 3.2.1 Sonatype Guice jar。

这里有一些关于谷歌版 Guice 的 Sonatype 补丁的信息[http://www.sonatype.com/people/2010/01/from-plexus-to-guice-3-creating-a-guice-bean-extension -层/](http://www.sonatype.com/people/2010/01/from-plexus-to-guice-3-creating-a-guice-bean-extension-layer/)

似乎他们正在从使用 Plexus 改为使用 Guice 进行依赖注入，并添加了一些东西并修复了一些他们认为被破坏的东西。在其他地方，我看到了一些将他们的更改（或其中一些）重新安装到 Google 版本的注释。当然，我对此知之甚少。

# wordpress - 在 WordPress 3.5.x 上的自定义主题小部件中调用 wp_enqueue_media() 会导致 js 错误

> ID：14611094
> 
> 赞同：3
> 
> 时间：2013-01-30T18:26:33.070
> 
> 标签：wordpress, widget, themes, wordpress-3.5

我正在为我自己的 WordPress 主题编写一个自定义小部件。

从 WordPress 3.5 开始，有一个新的媒体上传器，而不是旧的厚盒。

我的小部件过去在 3.5 之前的 WordPress 版本上运行良好，但现在新的媒体上传器阻止了旧的工作行为。

我在 costructor 中添加了一个检查`wp_enqueue_media`函数是否存在：

```
if( function_exists( 'wp_enqueue_media' ) ) {
    wp_enqueue_media();
} 
```

但是当执行这部分 cose 时，javascript 在停止 Js 引擎的控制台中抛出错误：

```
Uncaught TypeError: Cannot read property 'id' of undefined    load-scripts.php:69 
```

我删除了所有小部件代码并将其简化为基本...错误是由 wp_enqueue_media() 调用引起的，但我无法理解为什么以及如何修复它。

我还[为您的主题选项阅读了 Wordpress 3.5 自定义媒体上传](https://stackoverflow.com/questions/13847714/wordpress-3-5-custom-media-upload-for-your-theme-options)，但没有提及此问题

谁能指出我正确的方向？是否有任何可用于 WordPress 3.5 媒体上传器的文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-16T00:13:36.593

现在对你来说太晚了，但可能对其他人有帮助。我设法使它使用

`add_action( 'admin_enqueue_scripts', 'wp_enqueue_media' );`

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T15:02:41.230

您遇到的问题是因为您可能将自定义 jquery 放在标题中并且您没有注册 wordpress jquery。如果定义了多个 jquery，您将收到该错误。

我的建议是您应该删除您的 jquery 脚本或从 wordpress 中删除该脚本

```
function remove_jquery() {

wp_deregister_script('jquery');
//wp_register_script('jquery', ("//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"), false);

}

if(!is_admin()){add_action('init', 'remove_jquery');} 
```

我建议您使用 jquery wordpress 为您提供，如果没有，正确的入队方法是取消注册默认值并注册您的 jquery。只需从 remove_jquery 函数中删除注释即可。

另外，上面的代码应该放在functions.php中

干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-20T05:21:23.857

在 codex [1] 中，`wp_enqueue_media( $args )`应该从 'admin_equeue_scripts' 动作挂钩调用该函数。或更晚。

例子：

```
function enqueue_media() {
    if( function_exists( 'wp_enqueue_media' ) ) {
        wp_enqueue_media();
    }
}

add_action('admin_enqueue_scripts', 'enqueue_media'); 
```

希望它有所帮助。

[1]。[https://codex.wordpress.org/Function_Reference/wp_enqueue_media](https://codex.wordpress.org/Function_Reference/wp_enqueue_media)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T15:45:32.787

要调试，您需要将非缩小版的 js 发送到浏览器。请参阅[文档](https://codex.wordpress.org/Debugging_in_WordPress)：

**脚本调试**

SCRIPT_DEBUG 是一个相关的常量，它将强制 WordPress 使用核心 CSS 和 Javascript 文件的“开发”版本，而不是通常加载的缩小版本。当您测试对任何内置 .js 或 .css 文件的修改时，这很有用。默认为假。

```
define('SCRIPT_DEBUG', true); 
```

# forms - 模型填充了未发布的数据

> ID：14611099
> 
> 赞同：0
> 
> 时间：2013-01-30T18:26:49.193
> 
> 标签：forms, symfony, doctrine-orm

我有两个模型，课程和评估。每节课可以有多个评价。

我正在尝试设置一个嵌入式表单，允许用户同时输入所有这些数据。

它可以很好地添加和编辑数据，但是如果我尝试删除评估，我会遇到问题。

例如，我有一堂课附有三个评估。然后我再次提交表单，但其中一个被删除。

在控制器中，我首先得到正在编辑的课程，然后得到它的评估并循环通过它们，打印 ID。三个 id 按预期打印。

接下来，我将请求绑定到表单并检查它是否有效。然后我再次获得评估并再次遍历它们以检查它们是否已被删除，但是所有三个 id 仍然存在！

如果我打印原始 POST 数据，则只有两个。

谁能看到我做错了什么？

这是我的控制器代码：

```
public function editAction($id = NULL)
{
    $lesson = new Lesson;

    if ( ! empty($id))
    {
        $lesson = $this->getDoctrine()
                    ->getRepository('LessonBundle:Lesson')
                    ->find($id);
    }

    foreach ($lesson->getEvaluations() as $evaluation)
    {
        print_r($evaluation->getId());
        print_r('<br />');
    }

    $form    = $this->createForm(new LessonType(), $lesson);
    $request = $this->getRequest();

    if ($request->getMethod() == 'POST') {

        $form->bindRequest($request);

        if ($form->isValid()) {

            foreach ($lesson->getEvaluations() as $evaluation)
            {
                print_r($evaluation->getId());
                print_r('<br />');
            }
            die();

            $em = $this->getDoctrine()->getEntityManager();
            $em->persist($lesson);
            $em->flush();
        }
    }
} 
```

这是我的课程表：

```
class LessonType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('evaluations', 'collection', array(
                                            'type' => new EvaluationType(),
                                            'allow_add' => true,
                                            'by_reference' => false,
                                            'allow_delete' => true,
                                            ));
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'LessonBundle\Entity\Lesson',
        );
    }

    public function getName()
    {
        return 'Lesson';
    }
} 
```

最后，我的评估表：

```
class EvaluationType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('report');
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'LessonBundle\Entity\Evaluation',
        );
    }

    public function getName()
    {
        return 'Evaluation';
    }
} 
```

任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:03:26.617

我认为您的表格未与班级正确绑定。

看看这里[http://symfony.com/doc/2.0/cookbook/form/form_collections.html](http://symfony.com/doc/2.0/cookbook/form/form_collections.html)

表格应该是这样的

```
$builder
    ->add('name lesson')
    ->add('evaluation', 'collection', array('type'=>new EvaluationsType())) 
```

您需要创建一个嵌入其他表单的新表单类。

另一种方法是手动检查发布的数据并在控制器中手动删除评估，然后再次持久化课程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:22:00.043

我通过使用：

```
$lesson = $form->getData(); 
```

# c - 在 C 中创建一个简单的 HTTP 代理

> ID：14611101
> 
> 赞同：5
> 
> 时间：2013-01-30T18:26:54.903
> 
> 标签：c, http, sockets, tcp, proxy

我是一名新手程序员，希望在 C 中创建一个简单的代理来转发 HTTP 请求（通过 TCP）。有什么在线资源可以帮助我入门吗？我已经看过强烈推荐的“Beej's Guide to Network Programming”，但我发现它有点不完整且难以理解。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:30:07.033

为什么要重新发明轮子？有一个功能齐全、开源且免费的 tinyproxy。

[https://banu.com/tinyproxy/](https://banu.com/tinyproxy/)

# asp.net-mvc-4 - MVC4 WebApi 路由返回 404

> ID：14611102
> 
> 赞同：1
> 
> 时间：2013-01-30T18:26:57.370
> 
> 标签：asp.net-mvc-4, asp.net-web-api-routing

我开始了一个新的 Web Api MVC4 项目，但没有弄清楚我在路由器上做错了什么。我的简单 Get 请求路由返回 404。

这是我的路线定义：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute("ApiDefault", "api/{controller}/{id}",
                        new {controller = "Home", id = UrlParameter.Optional});

        routes.MapRoute("ApiDefault-CategoryLevels", "api/{controller}/{level1}/{level2}/{level3}/{level4}",
                        new
                            {
                                controller = "Home",
                                level1 = UrlParameter.Optional,
                                level2 = UrlParameter.Optional,
                                level3 = UrlParameter.Optional,
                                level4 = UrlParameter.Optional
                            });

        routes.MapRoute("Default", "{controller}/{action}/{id}",
                        new {controller = "Home", action = "Index", id = UrlParameter.Optional});
    } 
```

我正在尝试使用 ApiDefault-CategoryLevels 路由。我安装了 Phil Haack 的[路由调试器](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)，它显示当我浏览到这个 Url 时：

```
http://localhost:22283/api/Categories/a/b/c/d 
```

我正在寻找的路线匹配：

> ```
> 匹配路由：api/{controller}/{level1}/{level2}/{level3}/{level4}
> 
> 路线数据
> 核心价值
> 控制器类别
> 一级a
> 2级b
> 3级c
> 4级d
> ```

然而，来自 IIS Web 服务器的返回是 404。

当我使用查询字符串以这种方式调用相同的 URL 时，它可以工作：

```
http://localhost:22283/api/Categories?level1=A&level2=B&level3=C&level4=D 
```

网络请求有效，我得到了我期望的结果。只有当我以第一种方式尝试请求时，它才会返回 404。

这是我的 CategoriesController 的全部内容：

```
public class CategoriesController : ApiController
{

    public IEnumerable<CategoryModel> Get(string level1 = null, string level2 = null, string level3 = null, string level4 = null)
    {
        return new[] {new CategoryModel()};
    }

    public CategoryModel Get(Guid id)
    {
        return new CategoryModel();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:52:26.510

您正在将基于 ApiController 的路由添加到 RouteTable.Routes。您应该将它们添加到 GlobalConfiguration.Configuration。也就是说，您似乎已将它们添加到 MVC 4 项目模板的 RouteConfig.RegisterRoutes(RouteCollection)。如果您使用 MVC4 Web API 项目模板，请将它们添加到 WebApiConfig.Register(HttpConfiguration) 方法中。

# excel - 用于对重复值进行排序的 Excel 函数

> ID：14611103
> 
> 赞同：1
> 
> 时间：2013-01-30T18:26:57.977
> 
> 标签：excel, duplicates, rank

我有一个包含两列数据的 Excel 表，我想对其进行排名。

假设我们有以下内容：

```
 A        B
    Franz    58
    Daniel   92
    Markus   37
    Jörg     58 
```

我想要一个公式来根据 B 列对上述数据进行排名，并且在有重复值（Franz 和 Jörg）的地方将字母名称放在首位。我现在所拥有的只是将弗朗茨复制两次：

```
 =INDEX(Name,MATCH(A2,Points,0)) 
```

有人可以建议我对数据进行排名并按字母顺序排列重复值的公式/代码吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:26:57.487

我会在您的数据旁边添加一个帮助列来帮助解决关系。所以在C列使用

```
=B1+1/COUNTIF($A$1:$A$4,"<="&A1)/10 
```

这将添加基于名称的十进制排名系统。这假设您在 B 列中的数字没有小数位，如果有，那么您将需要增加公式末尾的 10 来解释它，即：对于 2 个小数位，使用 1000、3：10000 等

使用此公式获取名字

```
=INDEX(name,MATCH(LARGE(points,1),points,0)) 
```

将第二个名称的 1 调整为 2 等

*编辑*有错误的标志

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-28T11:41:45.987

这将对您的数据进行排名，并且也不会重复重复：

在 C2 中：

```
=SUM(1*(b2>$b$2:$b$5))+1+IF(ROW(b2)-ROW($b$2)=0,0,SUM(1*(b2=OFFSET($b$2,0,0,INDEX(ROW(b2)-ROW($b$2)+1,1)-1,1)))) 
```

CTRL+SHIFT+ENTER 把它变成一个数组

将它们向下拖动到 C5，它不会在名称相同的地方重复排名，如果它们相同，它将按字母顺序排列它们。

然后，如果您想按照表现最佳者/得分的顺序自动对它们进行排序，请执行以下操作：

把它放在 E2 中：

```
=INDEX(A2:A5,MATCH(LARGE(C2:C5,ROW()-1),C2:C5,0)) 
```

...并向下拖动

然后对您的数据使用 vlookup 以返回将其放入 F2 的分数：

```
=vlookup(E2,A2:C5,2,false) 
```

...并向下拖动

这应该为您提供按得分顺序排列的得分最高的人的表格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T18:42:06.763

假设 A2 是排名第一的分数 试试这个版本

`=INDEX(Name,SMALL(IF(A2=Points,ROW(Points)-MIN(ROW(Points))+1),COUNTIF(A$2:A2,A2)))`

用 CTRL+SHIFT+ENTER 确认并复制下来

需要对名称列表进行排序，因为具有重复分数的名称将按显示的顺序列出

# php - 使用多维数组时未定义的索引

> ID：14611111
> 
> 赞同：0
> 
> 时间：2013-01-30T18:27:17.400
> 
> 标签：php, jquery, html

使用多维数组时，我的`$_POST 中不断得到一个未定义的索引，`vidid`但我不知道为什么会得到这个？

下面是jquery：

```
var videocounter = 0;

function stopVideoUpload(success, videoID, videofilename){

      var result = '';
      videocounter++;

      if (success == 1){
         result = '<span class="videomsg'+videocounter+'">The file was uploaded successfully</span>';
            $('.hiddenvid').append('<input type="hidden" name="vidid[" + videocounter + "][]" id="'+videoID+'" value="' + videoID + '" />');

      return true;   
} 
```

下面是 $_POST：

```
$vidresults = $_POST['vidid']; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T18:28:49.130

注意引号，f.ex 这个：

```
'<input type="hidden" name="vidid[" + videocounter + "] 
```

应该是

```
'<input type="hidden" name="vidid[' + videocounter + '] 
```

您可以在 SO 的语法突出显示中轻松发现这一点，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:32:00.730

不好的报价。改变：

```
$('.hiddenvid').append('<input type="hidden" name="vidid[" + videocounter + "][]" id="'+videoID+'" value="' + videoID + '" />'); 
```

到：

```
$('.hiddenvid').append('<input type="hidden" name="vidid[' + videocounter + '][]" id="'+videoID+'" value="' + videoID + '" />'); 
```

# xcode - 为什么 Interface Builder 会不断更新其文件（更改似乎是任意的）？

> ID：14611128
> 
> 赞同：2
> 
> 时间：2013-01-30T18:28:12.467
> 
> 标签：xcode, interface-builder, xib, nib

每天，我注意到在带有源代码控制的 Xcode 4.5 中，Interface Builder 非常频繁地更改 xib 文件。

例如，我可以打开一个 xib 并单击左侧的一个视图并切换右侧的一个检查器。并且没有实际做任何工作或修改文件，文件被标记为未保存。好的，所以我保存它。

然后版本助手编辑器将显示看似任意的更改，有时甚至是破坏性的。例如：今天我看到一长串从文件中消失的网点，一分钟后它们又回到了文件中，而我没有更改任何内容。

这似乎有点令人沮丧，因为它可能导致没有有用更改的无用提交。我已经恢复了一些时间，而其他时间则提交了诸如“系统自动生成对 xib 文件的更改”之类的消息。
在查看历史更改时，在提交中包含自动更改可能会导致混淆。对 xib 的真正更改，例如创建新对象或更改类名或自动调整掩码，可能会在不必要的更改的海洋中迷失。

* * *

这是另一个 SO 问题的副本：[如何从自动更新中禁用 Interface Builder 文档版本控制？](https://stackoverflow.com/questions/13654796/how-to-disable-interface-builder-document-versioning-from-auto-updating?rq=1)

此问题由 calvinBhai 在雷达上提出，后来被标记为错误 ID# 11533872 的欺骗

# c - 强制使用与库不同的 SONAME 链接

> ID：14611140
> 
> 赞同：1
> 
> 时间：2013-01-30T18:28:53.127
> 
> 标签：c, linux, linker, shared-libraries, dynamic-linking

如何以与具有冲突 SONAME 的两个现有版本库兼容的方式链接二进制文件？这两个版本不共享相同的 SONAME 前缀。一个是 libcapi10.so.3，另一个是 libcapi10.so.4。我无法重新编译它们，因为我将它们作为二进制文件获取，并且由于这些是经过认证的加密库，我无法请求具有正确 SONAME 的新库。当然，如果一个是 libcap10.so.3 而另一个是 libcap10.so.3.1，我不会遇到任何问题，因为我只需要链接第一个以与第二个兼容。这两个库被告知是二进制兼容的（我应该相信这个信息）。我搜索但没有找到任何好的方法，无论是使用链接器选项还是使用 objcopy。我想避免手动修补二进制文件以在编译链接时使用它。

所以回到我最初的问题：如何指定 SONAME（在本例中为 libcap10.so）用于链接？

（我已经搜索过了，我目前的发现只是它是不行的，但不幸的是这是一个要求......）。

更新：我使用类似 sed 的二进制工具修补了 .so 库，将 libcapi10.so.6\0 替换为 libcapi10.so\0，因为新名称比以前的名称短，并且 SONAME 的 elf 结构是以 C 字符串结尾使用 0 并且在 gcc 链接期间不使用 elf 校验和。我只在编译时使用了那个补丁库，然后我可以在我的目标系统上使用相同的二进制文件中的一个或另一个原始库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-05-15T14:53:26.200

[`patchelf`](https://www.mankier.com/1/patchelf)是你的朋友。您可以执行以下操作：`patchelf --replace-needed libcapi10.so.3 libcapi10.so.4 <your_thing>`.

Patchelf 对于其他各种事情也很有用，例如更改 RPATH。查看手册页。非常漂亮的玩具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:21:00.613

我目前的最佳答案可以满足我的需求。

我使用类似 sed 的二进制工具修补了 .so 库，将 libcapi10.so.6\0 替换为 libcapi10.so\0，因为新名称比以前的名称短，并且 SONAME 的 elf 结构是一个以0 并且在 gcc 链接期间不使用 elf 校验和。我只在编译时使用了那个补丁库，然后我可以在我的目标系统上使用相同的二进制文件中的一个或另一个原始库。

在那里找到了stackverflow中的最佳提示： [构建依赖于它的程序后，如何更改共享库的文件名？](https://stackoverflow.com/questions/2759254/how-can-i-change-the-filename-of-a-shared-library-after-building-a-program-that)

# architecture - 如何将现场内存/无 sql 数据源与中央数据库实时同步

> ID：14611143
> 
> 赞同：1
> 
> 时间：2013-01-30T18:28:59.550
> 
> 标签：architecture, nosql, java-ee-6, in-memory-database, embedded-sql

我有一个有趣的架构问题。

我的场景是这样的：我需要将当前存储在 60 个店面中的现场 SQL Server 2005 数据库中的数据集中起来，很快就会翻一番，达到 120 个店面。在这个集中位置有一个主要的 SQL Server 2005 数据库。不单纯依靠集中位置的 SQL Server 2005 db 的原因是，如果由于各种原因（天气、物理线路切断、维护等）切断了 WAN 连接，店面可以继续使用本地 SQL Server 2005 数据库。我说的是关键任务数据。

但是出现了许多后勤问题。店面依赖于内部团队构建的 .NET 桌面应用程序。该团队利用从本地数据库到集中式数据库的 SQL Server 复制。安装这个内部软件的新版本并在每个软件安装到 60 个位置执行相关的 SQL Server 脚本需要大量繁重的工作才能完成这些安装（冗长的安装清单，登录到现场服务器远程桌面，Dameware'进入现场工作站以验证员工是否没有离开任何桌面应用程序运行等）。这种效率极低的繁重工作大多在周末完成，由一个 6-7 人组成的团队完成，他们不会为此获得加班费。我来自实现 Java EE 6、Java SE 7 和 JavaFX 的不同内部团队，虽然我知道他们的痛苦，因为我曾经在那个小组中。我认为有一个更简单的解决方案。有人谈到将我们的整个 .NET 应用程序架构切换到实现客户端应用程序的 Java EE 6 架构。

我的想法是：实现一个嵌入式/无 SQL 本地数据库，它与集中式 RDBMS Oracle 数据库保持实时同步（我们公司使用 Oracle 10g/11g 或 SQL Server 2005+）。如果我们的 WAN 出现故障，店面可以继续使用本地嵌入式/No-SQL 数据库无缝运行。重新建立连接后，嵌入式/No-SQL 数据库将其状态持久化到集中式数据库并恢复实时同步。我希望连接转换对用户来说是无缝的。我是 JPA 2 等技术的忠实拥护者，它只是在连接断开后重新连接。

由于我们正在考虑切换到基于 Java EE6 的解决方案，因此我想考虑所有可以与 WebSphere v8.0.x 一起使用并且是开源的技术。我不想处理商业许可证。这意味着考虑所有选项，如 No-SQL 数据库、内存数据库、Lucene、Apache Jackrabbit、Corba/IIOP、JMS、EJB 3.1、CDI 1.0、JSF MyFaces 2.0.4、JPA 2、JAX-RS 和桌面客户端由 JavaFX 提供支持。剩下的唯一问题是什么可以将数据持久化到嵌入式/No-SQL 数据库，然后将该数据实时同步到集中式数据源，以便店面可以保持运营？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:52:54.907

我喜欢 .NET，所以我会努力让 SQL Server 复制解决方案正常工作，但失败了......

以下是我会考虑用于复制的两个 NoSQL 解决方案：

**沙发数据库**

[http://couchdb.apache.org/](http://couchdb.apache.org/)

他们有很好的复制，当连接丢失时它会从中断的地方恢复。如果您来自 RDBMS 背景，则有一个学习曲线，但它可以工作。

**MongoDB**

[http://www.mongodb.org/](http://www.mongodb.org/)

您可以在 Mongo 中使用与中央（主）节点同步的副本集。当副本集中的辅助节点离线时，您可以将它们带回来并从您离开的地方继续。

问题是，如果主节点获得大量写入，它可能无法再次与已关闭很长时间的辅助节点同步。它基本上会记住主/中央节点上的所有写入，并最终清除较旧的写入。

**一般建议**

Mongo 和 Couch 都是文档数据库。如果您想迁移到 NoSQL，您需要将所有代码切换到非规范化结构而不是规范化结构，这可能是您在关系世界中所习惯的。

这是一个很大的转变，我知道我很难确定我在文档数据库世界中感觉良好的模型。

就总体而言移动数据而言，我发现 Mule ( [http://www.mulesoft.org/](http://www.mulesoft.org/) ) 非常擅长连接非常不同类型的系统/数据库。

# android - 键盘打开时保持按钮可见（android）

> ID：14611145
> 
> 赞同：0
> 
> 时间：2013-01-30T18:29:04.963
> 
> 标签：android, keyboard, resize, window, views

我有一个底部有两个按钮的`EditText`内部（保存/取消）。`DropDown`当用户点击 时`EditText`，键盘会打开并遮住两个按钮，这很不方便。我希望这些按钮保持在键盘顶部，但在`EditText`. 我尝试在我的清单中声明调整大小，但这没有用，因为该操作发生在我的`DropDown`而不是我的活动中。我知道有一种方法可以以编程方式执行此操作，但需要一些帮助，谢谢。继承人的代码：

```
 layout = inflater.inflate(R.layout.popup, (ViewGroup)findViewById(R.layout.main));
            pw = new PopupWindow(layout,LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT, true);
            pw.setBackgroundDrawable(new BitmapDrawable());
            pw.setOutsideTouchable(true);
            pw.showAsDropDown(dropdown1);

          pw.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);
                   //This does not work 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:37:10.113

该设置是清单的一部分。在活动中，您可以将 android:windowSoftInputMode 设置为 adjustPan 或 adjustResize。在调整大小时，整个活动将重新布置为较小的尺寸。对于平移，它将向上或向下滚动，并保证具有焦点的文本框将在视图中。这是您对它的唯一控制。默认是让系统根据滚动元素的存在来选择。在我看来，潘可能对你有用。

# php - 如何（临时）在没有适当架构的情况下将 Eloquent 模型存储在数据库中？

> ID：14611149
> 
> 赞同：0
> 
> 时间：2013-01-30T18:29:20.017
> 
> 标签：php, laravel

我有一个模型，我知道它的模式在开发过程中会迅速改变，所以我现在不想为它创建一个合适的模式，我会稍后再做。但我仍然希望能够将项目保存在存储中。

澄清示例：我有一个 Article 模型，它现在具有一些属性，但我稍后会添加更多属性，并且我不想为每个此类修改添加一个列。我只是想把它保存在存储中。

也许某种序列化？即使缓存也可以，如果它可以工作：它可以保存，但我无法轻松检索所有文章，因为我不知道确切的键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:08:50.563

我会使用无模式存储，比如 MongoDB。它有点像你描述的场景。如果您以后决定使用传统的关系数据库，请担心当时的迁移。

# css - 为什么当 SSL 开启并启用 appcache 时 CSS 为空？（iPad、Safari）

> ID：14611153
> 
> 赞同：1
> 
> 时间：2013-01-30T18:29:26.710
> 
> 标签：css, ipad, ssl, mobile-safari, html5-appcache

我创建了使用 HTML5 的应用程序缓存功能的简单 HTML 页面。

```
<!DOCTYPE html>
<html manifest="test.appcache">
<head>
  <title>Test</title>    
  <meta name="viewport" content="width=device-width initial-scale=1.0 maximum-scale=1.0 user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <!-- App icon for iPad (3rd gen) with retina display -->
  <link rel="apple-touch-icon" sizes="144x144" href="./img/app-icon/apple-touch-icon-144x144.png">
  <!-- App icon for iPhone with retina display -->
  <link rel="apple-touch-icon" sizes="114x114" href="./img/app-icon/apple-touch-icon-114x114.png">
  <!-- App icon for iPad (1st and 2nd gen) -->
  <link rel="apple-touch-icon" sizes="72x72" href="./img/app-icon/apple-touch-icon-72x72.png">
  <!-- App icon for iPhone (non-retina) and Android -->
  <link rel="apple-touch-icon" href="./img/app-icon/apple-touch-icon.png">
  <!-- Favicon for Android browser tabs/bookmarks -->
  <link rel="icon" type="image/png" href="./img/app-icon/favicon.png">  
  <link href="themes/theme1/splash.css" media="screen, projection" rel="stylesheet" type="text/css" />      
  <script src="js/src/vendor/jquery.js" type="text/javascript"></script>        
</head>

<body>
  <h1>TEST PAGE</h1>
  <div id="splash">    
    <div id="splash-logo"></div>
    <ol class="loader"><li></li><li></li><li></li></ol>
    <img id="splash-gtechg2" src="img/logo.png"/>
  </div>    
</body>
</html> 
```

如您所见，它非常简单。以下是我的清单：

```
CACHE MANIFEST
# Modified: Thu Jan 24 12:22:59 2013
#-----------------------------------------------------------------------------
CACHE:
# js/src/vendor
  js/src/vendor/jquery.js

# img/app-icon
  img/app-icon/apple-touch-icon-114x114.png
  img/app-icon/apple-touch-icon-144x144.png
  img/app-icon/apple-touch-icon-72x72.png
  img/app-icon/apple-touch-icon.png
  img/app-icon/favicon.png
#-----------------------------------------------------------------------------
NETWORK:
  *
  http://*
  https://*
#-----------------------------------------------------------------------------
FALLBACK: 
  / offline.html 
```

CSS文件是：

```
#splash {
  background-image    : url(img/background.jpg);
  background-position : top left;
}

#splash-logo {
  background-image    : url(img/splash-logo.png);
  background-position : center;
} 
```

如您所见，主题 css 未包含在 appcache 中，因为实际应用程序 URL 可能随时更改，因此应始终从网络提供服务。

问题是当我在服务器上启用 SSL 时根本没有加载 CSS 文件。如果我使用 HTTP 或者将 CSS 及其图像放入清单中，它工作正常。请注意，这仅在 Mobile Safari 上复制。（我有 iOS 6.1 的 iPad3）。

重现步骤如下：

1.  在 iPad 上的 Safari 中打开测试页面
2.  一切正常
3.  完全关闭 Safari，使其不会最小化，而是实际关闭。
4.  打开 Safari。
5.  现在它将尝试使用我们的测试页面恢复上次打开的选项卡，并且这里的 CSS 无法加载。

所以基本上我什至没有得到“混合内容警告”——它只是默默地无法加载。

起初我认为证书有问题，但一旦我删除清单属性，一切正常。

几天来试图找到解决方案，但我尝试的一切都不起作用，所以我决定在这里问。任何想法如何解决这个问题？

**更新 1：**这适用于 iOS 的 Chrome 23.0.1271.100

**更新 2：**向 Adob​​e 报告错误并暂时关闭 appcache

# c# - 获取客户角色 nopcommerce

> ID：14611160
> 
> 赞同：0
> 
> 时间：2013-01-30T18:29:46.897
> 
> 标签：c#, razor, nopcommerce

谁能帮我在 2.8 版的视图中获得客户角色？我已经尝试过工作上下文，并且错误说“当前上下文中不存在工作上下文”。我在下面有以下代码，但它不起作用..

```
@model BoardsIndexModel
@using Nop.Core.Infrastructure;
@using Nop.Services.Helpers;
@using Nop.Web.Models.Boards;
@using Nop.Core.Domain.Customers;
@using Nop.Services.Customers;

@if (Roles.IsUserInRole("Administrators"))
{
    Do that;
}
else
{
    Do this;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:03:59.230

在 nopcommerce 论坛上一个好人的帮助下，我就是这样做的：

```
@using Nop.Core.Domain.Customers;
@using Nop.Services.Customers;
@using Nop.Core;
@{
    bool customerHasRoleX = EngineContext.Current.Resolve<IWorkContext>().CurrentCustomer.IsInCustomerRole("Administrators");
    bool customerHasRoleY = EngineContext.Current.Resolve<IWorkContext>().CurrentCustomer.IsInCustomerRole("ForumModerators");
}

@if ((customerHasRoleX == true) | (customerHasRoleY == true)) {

}
else
{
    Response.Redirect("~/login?ReturnUrl=%2fboards");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:34:20.190

您可以使用，

```
@User.IsInRole("Administrators") 
```

# c# - MVC 条件授权

> ID：14611162
> 
> 赞同：0
> 
> 时间：2013-01-30T18:29:47.320
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, authorization

我试图找出控制对我的应用程序不同部分的访问的正确方法。

我的应用程序有 3 个部分。

1.  管理员
2.  超级用户
3.  普通用户

我读过[http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)，所以我明白即使我有每个区域都有一个区域，我不想将其用于我的授权。

我的想法是有 3 个基本控制器类，每个部分一个。像`AdminBaseController`,`SuperUserBaseController`和`RegularUserBaseController`.

我知道我可以`AuthorizeAttribute`为每个角色添加一个，但我想在我的设置中存储所需的角色，所以我不能在属性中设置这些角色。

所以我想我需要一个继承`AuthorizeAttribute`和覆盖`OnAuthorization`，这就是我被卡住的地方。这就是我到目前为止所拥有的。

```
 public override void OnAuthorization(HttpActionContext actionContext)
    {
        if (actionContext.ControllerContext.Controller is AdminBaseController)
        {
            //do something
        }
        else if (actionContext.ControllerContext.Controller is SuperUserBaseController)
        {
            //do something
        }
        else if (actionContext.ControllerContext.Controller is RegularUserBaseController)
        {
            //do something
        }
        else
        {
            //someone forgot to use a base controller
            //deny be default
        }
    } 
```

我想我只是将`Roles`and`Users`属性设置为正确的值，然后`base.OnAuthorization`在最后调用。这似乎是一个合理的解决方案？另外，要拒绝所有，我是否应该将两个属性都设置为`""`？

如果我走得很远，请为我指出一个更好的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:43:33.657

查看 Fluent Security [http://www.fluentsecurity.net/](http://www.fluentsecurity.net/)

与 .NET 中的内置安全功能相比，我更喜欢它。他们的示例中有基于角色的权限示例。它也比你想要做的更干净。

以下是有关如何使用 Fluent Security 为站点配置安全性的示例

```
/// <summary>
/// Configuration Helper for Fluent Security. See http://www.fluentsecurity.net
/// </summary>
public static class SecurityConfig
{
    public static void Configure()
    {
        SecurityConfigurator.Configure(c =>
        {
            c.GetAuthenticationStatusFrom(() => HttpContext.Current.User.Identity.IsAuthenticated);
            c.GetRolesFrom(() => (HttpContext.Current.Session["Roles"] as string[]));

            // Blanket Deny All
            c.ForAllControllers().DenyAnonymousAccess();                

            // Publicly Available Controllers
            c.For<HomeController>().Ignore();
            c.For<RegistrationsController>().Ignore();
            c.For<LoginController>().Ignore();

            // Only allow Admin To Create
            c.For<ReservationsController>(x => x.Create())
             .RequireRole(UserRoles.Admin.ToString());

            c.For<ReservationsController>(x => x.Edit(""))
             .RequireRole(UserRoles.Admin.ToString(),UserRoles.User.ToString());

            c.For<ReservationsController>(x => x.Delete(""))
             .RequireRole(UserRoles.Admin.ToString(),UserRoles.User.ToString());           
        });
    }
} 
```

# wpf - 如何在 WPF 中使用 Dispatcher 来制作计时器

> ID：14611163
> 
> 赞同：0
> 
> 时间：2013-01-30T18:29:55.540
> 
> 标签：wpf, timer, dispatcher

我是一个菜鸟，我有这个问题，我需要为我的程序制作一个计时器，当用户单击特定按钮时它就会启动。然后将倒计时输出到标签

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:39:39.000

这是从生产中提取的，所以我确信它有效：

```
...
     _Timer = new DispatcherTimer();
     _Timer.Interval = TimeSpan.FromMilliseconds(125);
     _Timer.Tick += new EventHandler(_Timer_Tick);
     _Timer.IsEnabled = true;
     _Timer.Start();
...

    void _Timer_Tick(object sender, EventArgs e)
    {
         try {
           ...Do your thing here
         } catch (Exception x){
             Debug.WriteLine("Error: "+x);
         }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:41:08.090

位于命名空间[`DispatcherTimer`](http://msdn.microsoft.com/en-us/library/ms615945%28v=vs.110%29.aspx)中`System.Windows.Threading`。

像这样的东西应该工作：

```
public partial class MainWindow : Window
{
    int count = 0;
    System.Windows.Threading.DispatcherTimer tmr = new System.Windows.Threading.DispatcherTimer();
    public MainWindow()
    {
        InitializeComponent();
        tmr.Interval = new TimeSpan(0, 0, 2);
        tmr.Tick += new EventHandler(tmr_Tick);
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        tmr.Start();
    }

    void tmr_Tick(object sender, EventArgs e)
    {
        label1.Content = count += 1;
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        tmr.Stop();
    }
} 
```

# iphone - iOS开发指南中的可能错误

> ID：14611166
> 
> 赞同：1
> 
> 时间：2013-01-30T18:29:59.437
> 
> 标签：iphone, ios, objective-c

从[查看编程指南](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009503)：

“...Windows 本身没有任何可见内容，但为您的应用程序视图提供了一个基本容器。...”

“可见”是什么意思？我可以（不向窗口添加任何 UIViews）设置窗口的颜色，它会使用以下两行（在模拟器上）可见：

```
window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
window.backgroundColor = [UIColor whiteColor]; 
```

如果我运行我的应用程序，它将是白色的。因此问题是：在这种情况下，“可见”是什么意思？如果 UIWindow 不应该有任何可见的内容，那么为什么它仍然被实现为具有属性 backgroundColor？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:37:19.627

最有可能的是，文档中的“可见内容”一词的意思是“子视图”。目的是窗口不提供任何子视图、小部件或任何其他内容。背景颜色不是内容，它是一个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:34:31.220

`UIWindow`是 的子类`UIView`，这就是您会看到该`backgroundColor`属性的原因。我不确定 iOS 如何在内部处理这个问题，但我假设您的根视图控制器的`view`属性已加载到窗口的视图中以显示内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:32:36.327

当您没有任何内容时，背景颜色会显示出来。

# sockets - 使用一个套接字进行对等通信

> ID：14611169
> 
> 赞同：4
> 
> 时间：2013-01-30T18:30:11.857
> 
> 标签：sockets, p2p

我想编写一个点对点网络应用程序并遇到以下问题。

网络中的两个节点 A 和 B 试图同时建立彼此的连接。当它们都接受对方的连接时，就会打开两个 TCP 套接字。

两者之间的通信应该只使用一个套接字，因为双向通信就足够了。这个问题的优雅解决方案是什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T21:12:20.203

您不应该尝试同时建立两个同时连接。这是您的 p2p 设计中的一个缺陷。两个对等点需要相互协调（例如通过他们都连接到并知道他们是谁的中央服务器交换消息）。首先需要决定谁在倾听，谁在连接。一个对等点只打开一个侦听套接字，该信息被发送到另一个对等点，因此它知道在哪里连接。如果该连接失败（即，侦听对等方位于 NAT/防火墙后面），则需要通知对等方并做出交换角色的决定。先前连接的对等体现在打开一个侦听套接字，并且该信息被发送到先前侦听的对等体，因此它知道在哪里连接。如果该连接失败（即，正在侦听的对等方也在 NAT/防火墙后面），那么如果没有额外的帮助（例如 NAT 打孔），两个对等点之间的直接连接是不可能的。在某些情况下，直接连接根本不可能，因此它们之间交换的数据必须通过中央服务器进行代理。

# javascript - 无法在 chrome 中完全打印包含 iframe 的页面

> ID：14611172
> 
> 赞同：2
> 
> 时间：2013-01-30T18:30:14.463
> 
> 标签：javascript, jquery, html, google-chrome

我有一个网页，其中包含 4 个 iframe 以及许多其他内容。当我尝试使用 window.print() 在 chrome 中打印整个页面时，它会打印除 iframe 之外的所有内容。有没有办法让它打印整个页面，包括 iframe。如果有帮助，我可以控制 iframe 中托管的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:12:14.310

尝试： [Javascript 仅打印 iframe 内容](https://stackoverflow.com/questions/9616426/javascript-print-iframe-contents-only)

```
window.frames["iframeID"].focus();
window.frames["iframeID"].print(); 
```

# c# - 创建日期时间实例时的代码优化

> ID：14611180
> 
> 赞同：0
> 
> 时间：2013-01-30T18:30:39.847
> 
> 标签：c#, asp.net, datetime

我的 asp.net 网站中有一个名为 ddlPayrollDate 的下拉列表。我想插入/绑定最近 3 个月的日期 2 和 17，包括当月。要考虑何时更改年份，我必须在我的 C# 代码中编写多个条件，下面给出的是我的代码：

```
 ddlPayrollDate.Items.Insert(1, String.Format("{0:MMMM dd, yyyy}", new DateTime (DateTime.UtcNow.Year, DateTime.UtcNow.Month, 17)));
                ddlPayrollDate.Items.Insert(2, String.Format("{0:MMMM dd, yyyy}", new DateTime(DateTime.UtcNow.Year, DateTime.UtcNow.Month, 2)));
                if (DateTime.UtcNow.Month != 1)
                    ddlPayrollDate.Items.Insert(3, String.Format("{0:MMMM dd, yyyy}", new DateTime(DateTime.UtcNow.Year, DateTime.UtcNow.Month - 1, 17)));
                else
                    ddlPayrollDate.Items.Insert(3, String.Format("{0:MMMM dd, yyyy}", new DateTime(DateTime.UtcNow.Year - 1, 12, 17)));

                if (DateTime.UtcNow.Month != 1)
                    ddlPayrollDate.Items.Insert(4, String.Format("{0:MMMM dd, yyyy}", new DateTime(DateTime.UtcNow.Year, DateTime.UtcNow.Month - 1, 2)));
                else
                    ddlPayrollDate.Items.Insert(4, String.Format("{0:MMMM dd, yyyy}", new DateTime(DateTime.UtcNow.Year - 1, 12, 2)));

                if (DateTime.UtcNow.Month != 1 && DateTime.UtcNow.Month != 2)
                    ddlPayrollDate.Items.Insert(5, String.Format("{0:MMMM dd, yyyy}", new DateTime(DateTime.UtcNow.Year, DateTime.UtcNow.Month - 2, 17)));
                else if (DateTime.UtcNow.Month == 1)
                    ddlPayrollDate.Items.Insert(5, String.Format("{0:MMMM dd, yyyy}", new DateTime(DateTime.UtcNow.Year - 1, 11, 17)));
                else
                    ddlPayrollDate.Items.Insert(5, String.Format("{0:MMMM dd, yyyy}", new DateTime(DateTime.UtcNow.Year - 1, 12, 17)));

                if (DateTime.UtcNow.Month != 1 && DateTime.UtcNow.Month != 2)
                    ddlPayrollDate.Items.Insert(6, String.Format("{0:MMMM dd, yyyy}", new DateTime(DateTime.UtcNow.Year, DateTime.UtcNow.Month - 2, 2)));
                else if (DateTime.UtcNow.Month == 1)
                    ddlPayrollDate.Items.Insert(6, String.Format("{0:MMMM dd, yyyy}", new DateTime(DateTime.UtcNow.Year - 1, 11, 2)));
                else
                    ddlPayrollDate.Items.Insert(6, String.Format("{0:MMMM dd, yyyy}", new DateTime(DateTime.UtcNow.Year - 1, 12, 2))); 
```

有没有一种方法可以通过使用任何日期时间函数来优化此代码而无需满足这些条件。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:39:17.357

在我看来，你想要一个循环。*像*：

```
DateTime now = DateTime.UtcNow;
// Use the start of the month to avoid concerns around short months etc
DateTime current = new DateTime(now.Year, now.Month, 1);

for (int i = 0; i < 3; i++)
{        
    // Add the 17th... (add 16 days to the 1st)
    ddlPayrollDate.Items.Insert(i * 2 + 1,
                                current.AddDays(16).ToString("MMMM dd, yyyy"));
    // Add the 2nd... (add 1 day to the 1st)
    ddlPayrollDate.Items.Insert(i * 2 + 2,
                                current.AddDays(1).ToString("MMMM dd, yyyy"));
    // Go back a month...
    current = current.AddMonths(-1);
} 
```

这假设您总是想要当月的第 17 日和第 2*日*（以 UTC 为单位），无论当前日期是在 2 日之前、2 日和 17 日之间还是 17 日之后。

另请注意，在指定自定义日期格式时，您*通常应该使用不变文化；*或使用具有“正常”文化的*标准*日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:36:18.223

使用[DateTime.AddMonths](http://msdn.microsoft.com/en-us/library/system.datetime.addmonths.aspx)

例如，DateTime.UtcNow.AddMonths(-1) 获取今天日期前 1 个月的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:37:55.677

```
DateTime startDate = DateTime.Today.AddMonths(-3);

for (Int32 indexer=0; indexer < 3; indexer++) {
  ddlPayrollDate.Items.Add(String.Format("{0:MMMM dd, yyyy}", new DateTime(startDate,Year, startDate.Month, 2)));
ddlPayrollDate.Items.Add(String.Format("{0:MMMM dd, yyyy}", new DateTime(startDate,Year, startDate.Month, 17)));
startDate = startDate.AddMonth(1);
} 
```

# php - 使用 ajax 创建的发布变量的问题

> ID：14611183
> 
> 赞同：0
> 
> 时间：2013-01-30T18:30:56.040
> 
> 标签：php, javascript, mysql, xml, ajax

这是一个艰难的.. 我第一次尝试使用 ajax。基本上在从第一个字段中选择一个选项后，js 和 xml 运行一个 php 脚本，该脚本根据它从 SQL 表中提取的信息创建下一个下拉列表。令人惊讶的是，对于我的第一次尝试，一切都很好。当您运行最终查询时，问题就出现了，应该通过 ( `$_POST['ports'];`) 发布的变量评估为单个空格字符，而不是标签中选择的值。代码时间：

html:

```
<h1>Enter port data to set how your table will look</h1>
<select style="width:150px;" onChange="showUser(this.value)">

<option value="">Select A Table Type</option>
<option value="option1">option1</option>
<option value="247">Custom</option>
</select>
<br>
<div id="select2">
</div> 
```

javascript:

```
function showUser(str){
document.getElementById('hide').style.display='none';
document.getElementById('select2').innerHTML="";
if(str===""){
    document.getElementById('hide').style.display='none';
    document.getElementById('select2').innerHTML="";
    return;
}

if(str==="247"){
    document.getElementById('hide').style.display='block';
    return;
}

// code for IE7+, Firefox, Chrome, Opera, Safari
if (window.XMLHttpRequest){
    xmlhttp=new XMLHttpRequest();
}

// code for IE6, IE5
else{
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

//set up return
xmlhttp.onreadystatechange=function(){
if (xmlhttp.readyState==4 && xmlhttp.status==200){
document.getElementById("select2").innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open("GET","gethtml.php?q="+str,true);
xmlhttp.send();
} 
```

获取html.php

```
//include connection
include 'log.php';

//get vars
$q=$_GET['q'];

//make the query
$sql = "SELECT DISTINCT Model 
FROM tbl
WHERE Manufacturer = '".$q."'";

//make the new box
echo '<select name="ports" style="width:150px;">';
echo '<option>Select A Port Total</option>';
$i=1;
foreach($conn->query($sql) as $row) {
echo $row['Model'];
echo '<option value="'.$row['Model'].'">'.$row['Model'].'</option>';
$i++;
}
echo "</select>"; 
```

因此，所有内容都发送到 gethtml.php。查询运行正确，`<select>`盒子在那里，但是它的一部分似乎有错误`<select>`，我就是不知道那是什么。这是提交 php 中的一个片段，在您提交混乱的表单后运行`<select>`。

```
echo "<pre>";print_r($_POST);echo"</pre>"; 
```

哪个输出

```
Array
(
[ports] => 
) 
```

我知道你看不出来，但是当我突出显示那一点时，那里有一个空白字符，我什至通过它`isset()`来查看它我是对的并且那里有一个字符。

这是使用 firebug 查看时创建的 html 的 xml 图像：

![萤火虫](../Images/68439c2dac8c66f2bbef447e20377f8b.png)

有人有想法么？这非常令人沮丧..显然，萤火虫图像显示它看起来不像它应该的样子......如果你们需要更多信息，请询问

如果值得一提，我正在使用 chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:45:23.740

你没有发布你的ajax请求。

```
xmlhttp.open("GET","gethtml.php?q="+str,true); 
```

你通过get发送它。在 php 中，尝试`print_r($_GET)`代替`$_POST`并检查您是否看到正确的值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T18:37:23.073

```
 foreach($conn->query($sql) as $row) {
echo $row['Model'];
echo '<option value="'.$row['Model'].'">'.$row['Model'].'</option>';
$i++;
} 
```

看上面的第 2 行。

# c++ - 代码在 Linux g++ 中没有按预期工作？

> ID：14611185
> 
> 赞同：-4
> 
> 时间：2013-01-30T18:31:00.653
> 
> 标签：c++, linux, compiler-construction, output

在linux g++编译器中，不打印第三个数字，也不打印“reached”。但我预计会打印“到达”，然后它会进入无限循环。它使用代码块在 Windows 上按预期执行

```
#include <iostream>
int main()
{
    int a;
    for (int i = 0; i < 3; i++) {
        std::cin >> a;
        std::cout << a;
    }
    std::cout << "reached";
    while (1) {}
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:32:04.697

`"reached"`被写入内部缓冲区，但不写入控制台。通常，缓冲区会在每个换行符中写入控制台。如果您不想要换行符，请刷新缓冲区（即将其写入控制台可见）：

```
cout<<"reached"<<flush; 
```

如果您想要换行符，请使用`endl`：

```
cout<<"reached"<<endl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T18:33:55.337

因为您永远不会结束程序，因此永远不会刷新您的 stdout (cout) 输出。

您可以更改：

```
 cout<<"reached"; 
```

到：

```
 cout<<"reached" << endl; 
```

或者：

```
 cout<<"reached" << flush; 
```

或者干脆删除你的永远循环。

另一种选择是使用`cerr << "reached";`- 将立即打印，因为`cerr`没有缓冲。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:32:41.697

它与`cout`. 在进入无限循环之前写入`std::endl`或`std::flush`刷新缓冲区。`cout`

# function - 在 PL/SQL 中的触发器内调用函数

> ID：14611193
> 
> 赞同：1
> 
> 时间：2013-01-30T18:31:37.343
> 
> 标签：function, plsql, triggers

所以我有一个函数，给定一个用户 id，根据他最后的体重测量值计算他的 bmi（体重指数）（我有一个记录所有测量值的表），我想编写一个触发器，每次用户插入他的体重时，触发器检查用户 bmi 是否低于限制。该功能还可以，但我无法让触发器在这里工作，这就是我所拥有的：

```
1  CREATE OR REPLACE
2  TRIGGER BMITG
3  AFTER INSERT ON WEIGHTS
4  BEGIN
5     IF BMI(USRID)>25
6     THEN raise_application_error(-20001,'Please control your weight.');
7     END IF;
8  END; 
```

但我得到错误：错误（6,3）：PL/SQL：语句被忽略错误（6,10）：PLS-00201：必须声明标识符'IDENT'

我认为问题在于数据库不知道 USRID 是激活触发器的 INSERT 的用户 ID。我怎么解决这个问题？顺便说一句，WEIGHTS 表有一个用户 ID（数字）、一个日期和一个重量（数字）。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:44:40.713

尝试使用`:new.id`代替`USRID`并添加`FOR EACH ROW`.

# f# - 升级项目时 F# 3.0 编译器错误 FS0193

> ID：14611194
> 
> 赞同：4
> 
> 时间：2013-01-30T18:31:40.200
> 
> 标签：f#, f#-3.0

在构建我的一个大型项目时，我遇到了一个奇怪的`FSharp.Core`相关错误，并且该错误不包含任何位置信息来帮助我找出问题所在。

编译错误是`error FS0193: The module/namespace 'Microsoft.FSharp.Linq.RuntimeHelpers' from compilation unit 'FSharp.Core' did not contain the namespace, module or type 'LeafExpressionConverter'`

起初我以为是因为该项目使用了旧的 Powerpack LINQ 东西，所以我把它去掉了。然后我想这可能与使用 Entity Framework 4.3 而不是 5.0 有关，所以我升级了它。同样的错误。我仍在编译为 .NET 4.0，而不是 4.5……也许这是部分原因？

我将`Doctypes.fsproj`XML 与同一解决方案中的其他项目进行了比较，一切看起来都很正常。参考`FSharp.Core`很简单`<Reference Include="FSharp.Core" />`

这是一个*非常*大的项目，因此创建此错误的可重现的小版本可能需要我一段时间才能弄清楚，我想知道这里是否有人能快速回答。

这是 MSBUILD 输出：

```
19> C:\Program Files (x86)\Microsoft SDKs\F#\3.0\Framework\v4.0\fsc.exe -o:obj\Debug\DTC.Doctypes.dll -g --debug:full --noframework --define:DEBUG --define:TRACE --doc:bin\Debug\Doctypes.XML --optimize- --tailcalls- --resource:statutes_ebook_cover.jpg -r:A:\svn\dtc\Publisher\Doctypes\bin\Debug\CsvHelper.dll -r:A:\svn\dtc\Publisher\Data\bin\Debug\DTC.Data.dll -r:A:\svn\dtc\Publisher\Formats\bin\Debug\DTC.Formats.dll -r:A:\svn\dtc\Publisher\Parser\bin\Debug\DTC.Parser.dll -r:A:\svn\dtc\Publisher\ReferenceParser\bin\Debug\DTC.ReferenceParser.dll -r:A:\svn\dtc\Publisher\Shared\bin\Debug\DTC.Shared.dll -r:A:\svn\dtc\Publisher\Solr\bin\Debug\DTC.Solr.dll -r:A:\svn\dtc\Publisher\Utilities\bin\Debug\DTC.Utilities.dll -r:A:\svn\dtc\Publisher\Doctypes\bin\Debug\EntityFramework.dll -r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\2.0\Runtime\v4.0\FSharp.Core.dll" -r:A:\svn\dtc\Publisher\packages\HtmlAgilityPack.1.4.6\lib\Net40\HtmlAgilityPack.dll -r:A:\svn\dtc\Publisher\packages\DotNetZip.1.9.1.8\lib\net20\Ionic.Zip.dll -r:A:\svn\dtc\Publisher\packages\LegislativeData.1.0.2773.180\lib\net40\LegislativeData.dll -r:A:\svn\dtc\Publisher\packages\LibrarianData.1.0.2773.6\lib\net40\Librarian.Data.dll -r:A:\svn\dtc\Lib\Office12\Microsoft.Office.Interop.Excel.dll -r:A:\svn\dtc\Lib\Office12\Microsoft.Office.Interop.Word.dll -r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\mscorlib.dll" -r:A:\svn\dtc\Publisher\packages\Newtonsoft.Json.4.5.11\lib\net40\Newtonsoft.Json.dll -r:A:\svn\dtc\Publisher\Repository\bin\Debug\Repository.dll -r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.ComponentModel.DataAnnotations.dll" -r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Configuration.dll" -r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Core.dll" -r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Data.dll" -r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Data.Entity.dll" -r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.dll" -r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Numerics.dll" -r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Runtime.Serialization.dll" -r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Xml.dll" --target:library --warn:4 --warnaserror --warnaserror:76 --vserrors --validate-type-providers --LCID:1033 --utf8output --fullpaths --flaterrors --highentropyva- "C:\Users\dfitch\AppData\Local\Temp\.NETFramework,Version=v4.0.AssemblyAttributes.fs" Helpers.fs Paths.fs FolioImport.fs Epub.fs Kindle.fs Ebooks.fs SharedLaw.fsi SharedLaw.fs SharedIndex.fs HistoryLinks.fs AdministrativeCodeHeaders.fs AdministrativeCode.fs AdministrativeCodeTOC.fs AdministrativeCodeIndex.fs SCRHeaders.fs Register.fs StatuteHeaders.fs Statutes.fs StatutesTOC.fs StatutesIndex.fs CrossReferences.fs SupremeCourtRules.fs Constitution.fs SessionTypes.fs CrDocs.fs EmergencyRules.fs OracleSession.fs LatsSession.fs TestSessionData.fs Session.fs Votes.fs SessionText.fs FiscalEstimates.fs LatsBulletinIndex.fs SharedBulletinIndex.fs AuthorIndex.fs SubjectIndex.fs JournalIndex.fs CrIndex.fs ActIndex.fs SectionsAffected.fs LCAmendmentMemos.fs LCActMemos.fs LCDocuments.fs RecordsOfCommitteeProceedings.fs VetoMessages.fs AssemblyInfo.fs Journals.fs Calendars.fs ProposalText.fs AmendmentText.fs EnrolledBillsText.fs RDAttachments.fs ActText.fs Budget.fs LegislativeRules.fs DraftingManual.fs AdminRulesManual.fs DraftingFiles.fs ExecutiveOrders.fs CapitolHeadlines.fs TownLawForms.fs FolioBillHist.fs FolioLaw.fs FolioSessionImport.fsi FolioSessionImport.fs FolioSession.fs FolioMisc.fs FolioIndexes.fs FolioCr.fs Wislaw.fs Help.fs Disclaimers.fs Dnotes.fs CCC.fs LCMemos.fs oag.fs AdministrativeCodeCites.fs StatutesRepealedRenumbered.fs LRBUserProcedures.fs LRBDraftingManual.fs 
19>FSC: error FS0193: The module/namespace 'Microsoft.FSharp.Linq.RuntimeHelpers' from compilation unit 'FSharp.Core' did not contain the namespace, module or type 'LeafExpressionConverter'
19>C:\Program Files (x86)\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets(155,9): warning MSB5021: "Fsc" and its child processes are being terminated in order to cancel the build.
19>C:\Program Files (x86)\Microsoft SDKs\F#\3.0\Framework\v4.0\Microsoft.FSharp.Targets(155,9): error : Build was canceled. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T21:05:46.047

您的 MSBuild 输出显示对...的引用

`C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\2.0\Runtime\v4.0\FSharp.Core.dll`.

这就是 FSharp.Core 的 F# 2.0 版本。您需要改为引用 F# 3.0 版本：

`C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\3.0\Runtime\v4.0\FSharp.Core.dll`

# ios - 我想学iphone开发编程

> ID：14611195
> 
> 赞同：-1
> 
> 时间：2013-01-30T18:31:40.323
> 
> 标签：ios

我想学习iphone编程。我该如何学习请推荐一些链接或一些书籍，我可以开始iphone编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:35:06.293

[这](http://developer.apple.com/library/ios/#documentation/ "这")是开始的最佳地点.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:36:30.017

有一个苹果文档“我的第一个 iphone 应用程序”。有一些其他人写的教程。

这要从学习 Objective-C 开始。
在页面[http://developer.apple.com/library/ios/navigation/](http://developer.apple.com/library/ios/navigation/)左侧有“入门”主题。从那里开始。

您的学习方式还取决于您的软件开发人员经验。

我通过阅读几个小时（大约 3 个），然后编码 2-3 小时，并再次阅读我不理解的内容来学习它。等等。

您必须在阅读理论和编码之间找到正确的平衡点。

您需要一个用于开发的英特尔 mac：例如 mac mini，如果您想在 iphone 上试用您的程序，您需要每年 99 美元才能获得 Apple SW 开发者许可证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:36:36.843

是的，我从观看有关 iPhone 开发的 iTunes U 讲座开始。很棒的东西！

# google-apps-script - Google Apps 脚本图表使用第 1 行作为标题

> ID：14611197
> 
> 赞同：2
> 
> 时间：2013-01-30T18:31:54.723
> 
> 标签：google-apps-script, google-visualization, google-sheets

我有以下图表：

```
var ss = ... // get sheet
var chart = ss.newChart().asLineChart();
chart.setTitle("My Title");
chart.addRange(dataSheet.getRange(1, 1, ss.getLastRow(), 4));
chart.setColors(["#3c78d8", "#a61c00", "#38761d"]);
chart.setXAxisTitle("X Title");
chart.setYAxisTitle("Y Title");
chart.setPosition(1, 1, 0, 0);
chart.setCurveStyle(Charts.CurveStyle.SMOOTH);
ss.insertChart(chart.build()); 
```

此代码将使用显示第一行作为数据的一部分，而不是使用它来标记图例。附带说明一下，如果我使用 asColumnChart 而不是折线图，它会做正确的事情。

如何使用 Google Apps 脚本告诉图表将第一行用作标题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:14:13.317

首先 - 你的代码是好的。我拿了一份副本并对其进行了一些小改动，只是为了使用一张纸来说明：

![图表截图 - 一切都好](../Images/f889fabd6a961cbc231f8d1da8d32347.png)

问题可能出在您的数据上，特别是第一行。这是相同的示例，其中一些“标题”从文本更改为数字。我相信它的行为方式与您所描述的不一样。

![图表截图 - 问题](../Images/64fafc9d97ded240235f0fce3b3a5c5a.png)

再一次，但标题中的数字被迫为文本。（在电子表格中，我将它们输入为`'4`和`'5`- 前导单引号告诉电子表格将其视为文本。）

![图表截图 - 一切都很好](../Images/b7c9b71f0edac966009f49564bf6a16e.png)

只需查看第一行中的数据类型，并确保它们是文本。

# ios - 解析 Facebook Dialog Delegate 方法未被调用

> ID：14611208
> 
> 赞同：1
> 
> 时间：2013-01-30T18:32:30.620
> 
> 标签：ios, facebook, cocoa-touch, facebook-ios-sdk, parse-platform

我正在使用 Parse SDK`apprequests`在我的应用程序中实现 Facebook 对话框。出于所有意图和目的，它只是包装了 Facebook SDK，在 Facebook 方法前加上`PF_`.

我使用这段代码来准备和引发对话框：

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys: [NSString stringWithFormat:@"I just challenged you to a game!"], @"message",
 [friendIds componentsJoinedByString:@"," ], @"to",
 nil];

PF_FBSession *session = [PFFacebookUtils session];
PF_Facebook *facebook = [[PF_Facebook alloc] initWithAppId:session.appID andDelegate:nil];

facebook.accessToken = session.accessToken;
facebook.expirationDate = session.expirationDate;

[facebook dialog:@"apprequests" andParams:params andDelegate:self]; 
```

这很好用，我得到了对话框，我可以邀请朋友玩这个应用程序。

问题是没有调用委托方法，即使我已将视图控制器设置为`PF_FBDialogDelegate`：

```
@interface ChallengeFriendsViewController : UIViewController <UITableViewDelegate, PF_FBDialogDelegate> {
    NSArray *facebookFriends;
    NSMutableArray *selectedFriends;
} 
```

这些是我正在谈论的一些委托方法：

```
- (void)dialog:(PF_FBDialog *)dialog didFailWithError:(NSError *)error {
    NSLog(@"Error in Dialog: %@", error);
}

- (void)dialogDidNotCompleteWithUrl:(NSURL *)url {
    NSLog(@"Failure on Facebook server side");
}

- (void)dialogCompleteWithUrl:(NSURL *)url {
    NSLog(@"Did complete with URL");
    [self.navigationController popViewControllerAnimated:YES];
    [MBProgressHUD hideAllHUDsForView:self.view animated:YES];
}

- (void)dialogDidNotComplete:(PF_FBDialog *)dialog {
    NSLog(@"Cancelled");
    [MBProgressHUD hideAllHUDsForView:self.view animated:YES];
} 
```

如果不调用这些方法，我真的无法以直观的方式处理共享。我很困惑为什么不叫他们，觉得我已经尝试了一切。任何指向我哪里出错的指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T08:38:21.337

在您的代码中，您有

```
PF_Facebook *facebook = [[PF_Facebook alloc] initWithAppId:session.appID andDelegate:nil]; 
```

由于您设置了一个 nil 委托，因此我希望永远不会调用委托方法，正如您所描述的那样。

你能把这个改成

```
PF_Facebook *facebook = [[PF_Facebook alloc] initWithAppId:session.appID andDelegate:self]; 
```

那是假设您将委托方法放在同一个类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:18:37.407

我终于通过使用`facebook`提供的实例解决了这个问题`PFFacebookUtils`。这已被弃用，但似乎是目前使其调用正确委托方法的唯一方法。

替换：

```
PF_Facebook *facebook = [[PF_Facebook alloc] initWithAppId:session.appID andDelegate:nil]; 
```

和：

```
PF_Facebook *facebook = [PFFacebookUtils facebook]; 
```

感谢 JP 和 Aromal 的投入。

# python - Python 正则表达式意外行为

> ID：14611209
> 
> 赞同：2
> 
> 时间：2013-01-30T18:32:33.957
> 
> 标签：python, regex

```
str1='<a href="/states/florida/433" title="florida"><img alt="florida" src="http://abc.com"'
str2='<a href="/states/florida/433" title="florida">'
pat = re.compile('/states/.*/([^"]+)')
if ( pat.findall(str2) == pat.findall(str1)):
    print "TRUE"
else:
    print "FALSE" 
```

输出：假，

输出 2：433
输出 1：abc.com

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:35:48.267

使用不情愿的量词 - `.*?`，而不是贪婪的量词 -`.*`一切都会好起来的： -

```
pat = re.compile('/states/.*?/([^"]+)') 
```

默认情况下，量词是*贪婪*的，从某种意义上说，它们试图覆盖尽可能多的字符串，并且仍然保留模式的其余部分以匹配剩余的字符串。使用`?`after 量词使其*不情愿*，在这种情况下，它们将在下一个字符的第一个匹配处停止 -`/`在这种情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:36:05.747

在第一个 URL 上，您的正则表达式匹配整个字符串：

```
<a href="/states/florida/433" title="florida"><img alt="florida" src="http://abc.com
         /states/                                .*                         /([^"]+) 
```

并不是

```
<a href="/states/florida/433" title="florida"><img alt="florida" src="http://abc.com
         /states/ .*   /([^"])+ 
```

他们很贪婪，`.*`尽可能多地吃数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T18:39:01.823

您的 RegEx 工作正常：

```
<a href="/states/florida/433" title="florida"><img alt="florida" src="http://abc.com"
         ^^^^^^^^............................................................^^^^^^^
         /states/                      .*/                                     [^"]+ 
```

和：

```
<a href="/states/florida/433" title="florida">
         ^^^^^^^^........^^^ 
```

如果您不想在第一种情况下使用整个字符串，请使用`?`非贪婪匹配量词来表示“`/states/`后跟任意数量的字符，直到*第一个* `/`字符后跟一个或多个非引号字符”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:51:06.777

你的模式是贪婪的（你可以在这里阅读关于贪婪和非贪婪的正则表达式模式： http: [//docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)和这里：[http ://www.itworld.com/nl /perl/01112001](http://www.itworld.com/nl/perl/01112001) . 改变模式

```
'/states/.*/([^"]+)' 
```

到

```
'/states/.*/([^"]+)' 
```

返回真。这是完整的修改源：

```
import re

str1='<a href="/states/florida/433" title="florida"><img alt="florida" src="http://abc.com"'
str2='<a href="/states/florida/433" title="florida">'
pat = re.compile('/states/.*?/([^"]+)')
if ( pat.findall(str2) == pat.findall(str1)):
    print "TRUE"
else:
    print "FALSE" 
```

# jquery - 带有多个 URL 的 jQuery Ajax 调用

> ID：14611214
> 
> 赞同：3
> 
> 时间：2013-01-30T18:32:44.380
> 
> 标签：jquery, ajax, url

我想运行 Ajax 调用，但由于我的 htaccess 重写规则，我在定位 script.php 文件时遇到问题。我在同一个文件夹中有一个 index.php、script.php 和 .htaccess。在 htaccess 中，有一个 RewriteRule 将这样的 URL 格式化为“domain.com/index.php?bla=123”到这个“domain.com/123”。

但是，我的 javascript 无法找到 PHP 脚本，因为当 URL 变为“domain.com/asdf/”时路径设置为“script.php”。知道如何从 js 运行脚本，无论是通过根目录还是 FAKE 目录。

```
url: "script.php" || "../script.php", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:36:37.040

您可以使用内联条件，例如以下示例：

```
url: (4 > 2 ? "script.php" : "../script.php"), 
```

在此示例中，您将始终以 url "script.php" 结尾，因此将`4 > 2`条件更改为您自己的需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:59:57.107

根据对您的情况的进一步解释，您应该可以将其`"/script.php"`用作 ajax 调用的路径。在 javascript 中，以 开头的路径`/`会将您带到服务器的根目录；因此，无论当前页面位于何处，您都可以从那里继续并找到您的脚本文件。

如果由于某种原因这不起作用，您可以使用`window.location.hostname`以下方式获取服务器的路径：

```
var scriptUrl = window.location.hostname + "/script.php"; 
```

**编辑：**

根据您的评论，您的路径必须是您的`/something/script.php`，而不仅仅是`/script.php`两种可能的解决方案。

# variables - 可变参数方案

> ID：14611221
> 
> 赞同：2
> 
> 时间：2013-01-30T18:33:21.087
> 
> 标签：variables, scheme, arity

```
(define test (lambda args 
  (if (= (length args) 1) (display (car args))
      (begin (display (car args))
      (test (cdr args)))))) 
```

我在网上寻找它并没有找到答案，我能够为我的 func 获得可变数量的参数，但是我如何不将它们作为单个列表传递给下一次迭代？

为了更清楚，如果我打电话：

```
(test (list 1 1) (list 2 2) (list 3 3)) 
```

我期待得到：

```
(1 1) (2 2) (3 3) 
```

但我得到：

```
(1 1) ((2 2) (3 3)) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:40:09.997

```
(define (test . args)
  (if (= (length args) 1)
    (display (car args))
    (begin
      (display (car args))
      (apply test (cdr args))))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:47:53.013

`args`将是传递给的参数列表`test`。第一次传递三个列表时，这三个列表`args`的列表也是如此。递归地传递它`(cdr args)`，它是最后两个列表的列表，所以现在`args`是一个包含具有最后两个列表的列表的列表。也就是说，`args`是`(((2 2) (3 3)))`你想要`((2 2) (3 3))`的。[您可以通过将](http://en.wikipedia.org/wiki/Apply#Common_Lisp_and_Scheme)`test`函数应用于列表来修复它：

```
(apply test (cdr args)) 
```

如果`(cdr args)`是`((2 2) (3 3))`，则与执行以下操作相同：

```
(test (2 2) (3 3)) 
```

# html - 电子邮件中的HTML 标记

> ID：14611225
> 
> 赞同：7
> 
> 时间：2013-01-30T18:33:42.820
> 
> 标签：html, html-email, base, email-client

我们有一个内容管理的解决方案（具体来说是 SDL Tridion；但是，问题更笼统），其中包括具有不同语言内容的多个站点。它们都共享许多基于 Razor 的模板，这些模板用于在发布页面时呈现带有特定注入内容的 HTML 片段。

CRM 也通过 CMS 进行管理，并且相同的模板用于创建电子邮件通讯。这些 HTML 电子邮件包含图像，这些图像会发布到管理相关分发列表的任何站点。因为模板系统是通用的，CMS 没有最终产品的绝对 URL 的概念，所以这些图像都嵌入了相对地址。我们有能力将绝对 URL 作为元数据应用到 CMS 中的不同网站，并编写 .Net 扩展以将这些 URL 格式化为渲染图像标签；但是，这会给这项工作增加相当大的开销。

我们可以通过在电子邮件标记部分中使用`<base href="..." />`标签来解决此问题。`<head>`这似乎至少在 Outlook 中有效；但是，我无法找到有关电子邮件客户端支持和不支持此标签的最新信息。

`<base>`那么问题来了：标签在电子邮件客户端（尤其是基于浏览器的客户端）中的支持范围有多广？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T09:57:17.103

不幸的是，它不适用于大多数基于 Web 的电子邮件客户端（Hotmail、Gmail），而这通常会增加大约 30% 的接收者。

为什么它不起作用：大多数基于 Web 的客户端会注入电子邮件正文标签内的任何内容，并删除其他所有内容，包括`head`. 因此，如果您发送：

```
<html>
<head><base ...></head>
<body><p class="youremail">Email</p></body>
</html> 
```

电子邮件客户端执行此操作：

```
<html>
<head><Email client head></head>
<body>
  <email client wrapper>
  <email>
    <p class="youremail">Email</p>
  </email>
  <email client wrapper>...
</body> 
```

所以你的基本标签将被剥离。即使不是，因为它不包含在电子邮件客户端的头部，它也会被浏览器忽略。

不幸的是，图像上的绝对路径是要走的路。过去我通过使用“预检处理器”解决了类似的问题。您可以使用它来获取`<base>`href 并将其设置在所有图像上，然后再返回完成的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T21:50:09.603

我不知道您是否使用 Razor，但如果是，您可以在 razor 视图中执行此操作：

```
src="@Request.Url.GetLeftPart(UriPartial.Authority)~/images/screenshot.png" 
```

# c# - Windows 窗体 - 从按钮类型的对象获取文本值

> ID：14611226
> 
> 赞同：2
> 
> 时间：2013-01-30T18:33:46.403
> 
> 标签：c#, winforms, visual-studio-2010

我有一个名为的 Windows 窗体`Form1`，该窗体中的面板名为`panel1`. 我只使用面板来放置按钮，以便我可以将它们分组并与`Form1`. 就我的程序而言，我需要处理从内部按钮发出的每个按钮单击`panel1`。为此，我使用相同的代码片段：

```
 public Form1()
        {
            InitializeComponent();

            // Set a click event handler for the button in the panel
            foreach (var button in panel1.Controls.OfType<Button>())
            {

                button.Click += HandleClick;
            }
        } 
```

我需要做的是有一种方法来识别确切点击了哪个按钮。为此，我使用了我的处理程序方法：

```
private void HandleClick(object o, EventArgs e)
{
    MessageBox.Show("HI" + o.ToString());
} 
```

这给了我一些希望，因为我明白了：

![在此处输入图像描述](../Images/40908c9db10e6f2a3ab20a82bd79ce7b.png)

这是第二部分——`Text: button4`这实际上是足够的信息来继续我的工作。但是如果没有一些复杂的字符串操作，我找不到获取这条信息的方法。那么，鉴于我编写代码的方式，有没有办法获取有关单击按钮的此或其他唯一信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:37:07.053

```
 private void HandleClick(object sender, EventArgs e)
    {
        var btn = sender as Button;
        if (btn != null)
        {
            MessageBox.Show(btn.Text);
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T18:36:50.297

一种选择是将对象转换为 a `Button`，但您可以更改事件处理程序的分配方式，而不是进行转换，这样您就不需要首先进行转换：

```
foreach (var button in panel1.Controls.OfType<Button>())
{
    button.Click += (_,args)=> HandleClick(button, args);
} 
```

然后只需将签名更改`HandleClick` 为：

```
private void HandleClick(Button button, EventArgs e); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T18:36:23.467

您需要强制`sender`转换为`Button`该类，以便您可以访问其属性：

```
Button b = (Button)sender;
MessageBox.Show(b.Text); 
```

# java - Java中的浮点数

> ID：14611234
> 
> 赞同：0
> 
> 时间：2013-01-30T18:34:03.183
> 
> 标签：java, floating-point

> **可能重复：**
> [为什么 (360 / 24) / 60 = 0 … 在 Java 中](https://stackoverflow.com/questions/2475652/why-does-360-24-60-0-in-java)

Java 中的浮点数和长整数问题

```
float f = 0.100f;
f = 3/180; 
```

目前我正试图用对象及其属性做这样的事情，但即使是这种最简单的形式，我的程序也会返回 0.0。

我已经用 Longs 试过了，结果还是一样。这是漫长的一天，也许这很简单，但我在砖墙上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T18:36:07.693

您的表达式`3/180`正在执行整数除法，然后将其转换为 float `f`。在整数除法中，`3/180`将返回`0`，这就是您所看到的。

您可能想要做的只是为您的数字添加一个小数点：`f = 3.0/180.0;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T18:35:05.400

`3/180`是**整数**除法。
因此，结果被截断为整数。

您需要执行浮点除法：`3/180f`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T18:35:11.227

你做一个整数除法。所以你得到一个 int ，它被转换回浮点数。尝试这个：

```
f = 3/180.0; 
```

或者

```
f = 3/180f; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-30T18:35:52.003

试试`3.0/180`。否则，您将两个整数相除并遇到整数截断。当您进行整数除法时，结果也是整数，而不是浮点数。

# import - PyDev: "Unresolved import nltk" 运行时，pydev 将其导入

> ID：14611236
> 
> 赞同：1
> 
> 时间：2013-01-30T18:34:12.820
> 
> 标签：import, python-2.7, pydev, nltk

我想摆脱这个错误信息，我想拥有自动完成和建议的好处。PyDev 显然确实找到了 nltk，因为从 IDE 内部运行它时它可以工作。不仅来自控制台。

肯定有人需要知道为什么我会收到此“未解决的导入”错误消息，但另一方面，当单击“运行”时，它运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-21T19:33:10.413

@TheGT 似乎走在正确的道路上，尽管我发现说明有点混乱。我的解决方案：

项目->属性->PYDEV-PYTHONPATH->外部库

添加源文件夹（按钮）

/Library/Python/2.7/site-packages/nltk-2-0/4-py2.7.egg

显然，您的路径、版本等......可能会有所不同。

这看起来很奇怪。有一个添加 zip/jar/egg 的按钮，它不想与 nltk...目录...egg 一起正常工作。nltk egg 的行为类似于选择器中的目录（即继续向下钻取而不是返回）。

另一方面，源文件夹按钮确实允许您选择一个文件夹......所以我选择了鸡蛋，这似乎工作。

似乎没有为 OSX 正确配置 nltk egg。而且，根据访问方式，它可以表现得像文件夹或最终目的地。

注意：将 nltk egg 添加到项目的外部库路径中会使错误消失。但是将鸡蛋添加到preferences>PyDev>Interpreter 似乎并不能解决问题（就它自己而言）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:39:38.197

当我尝试在我的项目中使用 nltk 时，我遇到了完全相同的错误。我做了两件事来解决未解决的错误。

1.  我将 setupctools**.egg 文件（用于在 mac/*nix 系统中安装 nltk 的文件）添加为外部库 [Project->Properties->PYDEV-PYTHONPATH->External Libraries] 我使用的是 Eclipse Indigo，顺便说一句，我的 mac 上的 Python 2.6.1。

2.  我重新启动了eclipse

砰！- 错误消失。

虽然，错误不再存在，但我想知道为什么 Eclipse 会这样。需要注意的是，当我尝试运行程序时，程序确实运行成功，即使 eclipse 将“import nltk”标记为未解析的导入。

# python - 如果我不需要用户访问令牌，如何使用请求从 Python 连接到 Facebook Graph API？

> ID：14611240
> 
> 赞同：10
> 
> 时间：2013-01-30T18:34:23.360
> 
> 标签：python, facebook-graph-api, python-requests

我正在尝试使用我最喜欢的[Requests](http://docs.python-requests.org/)库找到使用 Facebook Graph API 的最简单方法。问题是，我发现的所有示例都是关于获取**用户访问令牌**、重定向和用户交互的。

我只需要**应用程序访问令牌**。我不处理任何非公开数据，因此我不需要用户交互，并且由于我的最终应用程序应该是命令行脚本，因此不需要重定向。

[我在这里](https://stackoverflow.com/questions/3058723/programmatically-getting-an-access-token-for-using-the-facebook-graph-api)找到了类似的东西，但它似乎是优雅的。此外，我更喜欢使用[Requests](http://docs.python-requests.org/)或[Requests-OAuth2 的](https://github.com/maraujop/requests-oauth2)东西。或者也许有图书馆？我找到了[Requests-Facebook](https://github.com/maraujop/requests-oauth2)和[Facepy](https://github.com/jgorset/facepy)（均基于 Requests），但同样，所有示例都带有重定向等。Facepy 根本不处理授权，它只接受您的令牌，并由您以某种方式获取它。

有人可以提供一个简短的、理智的、有效的示例如何获取应用程序访问令牌吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T12:47:03.097

按照[https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)：

```
import requests
r = requests.get('https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=123&client_secret=XXX')
access_token = r.text.split('=')[1]
print access_token 
```

`client_id`（使用and的正确值`client_secret`）给了我一些看起来像访问令牌的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T21:39:43.813

如果您只需要一个快速/小请求，您可以手动将访问令牌从此处剪切并粘贴到您的代码中：[https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

注意：与 Richard Barnett 的回答不同，每次使用它时，您都需要从图形 api 资源管理器手动重新生成代码。

# wordpress - 用文字交换分享页面的twitter logo

> ID：14611249
> 
> 赞同：0
> 
> 时间：2013-01-30T18:35:09.007
> 
> 标签：wordpress, post, twitter

我想将我的 wordpress 网站上的分享链接添加到 tweeter。我找到了方法，但是我想删除 twitter 徽标并添加一个简单的文本链接。所以我删除了 twitter 类“twitter-share-button”，但我无法将信息检索到 twitter 文本框中......

这是我的代码：

```
<a href="https://twitter.com/share" data-url="<?php the_permalink(); ?>" data-text="<?php the_title(); ?>" data-hashtags="hashtag" >THIS_TEXT_THAT_I_WANT_TO_DISPLAY and add all data content to the twitter text area</a>

<script>
!function(d,s,id){
var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){
js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";
fjs.parentNode.insertBefore(js,fjs);}}
(document,"script","twitter-wjs");
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:12:18.837

您可以建立自己的 Twitter 分享 URL。您不需要包含任何 javascript 或 Twitter SDK，它只是一个 HTML 链接。[有关在https://dev.twitter.com/docs/tweet-button](https://dev.twitter.com/docs/tweet-button)上构建自己的更多信息，只需滚动到页面底部即可。为您的标记尝试这样的事情：

```
<a href="https://twitter.com/share?url=<?php the_permalink(); ?>&lang=en&text='<?php the_title(); ?>' via @yourtwitterhandle&conturl=<?php the_permalink(); ?>&count=vertical" target="_blank">Tweet this</a> 
```

您可以将很多内容传递到 url，因此您可以对其进行调整以获得您正在寻找的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:15:43.997

这是结果代码：

```
<a href="https://twitter.com/share?url=<?php the_permalink(); ?>&lang=en&text='<?php the_title(); ?>'+via+@twitteraccount+:+Check+this+out+<?php the_permalink(); ?>&target="_blank">Tweet this</a> 
```

# python - 屏蔽 numpy 数组的特定列

> ID：14611250
> 
> 赞同：5
> 
> 时间：2013-01-30T18:35:09.223
> 
> 标签：python, numpy, mask

我有一个 (60,1000) 维的 2D numpy 数组 A。
说，我有一个变量`idx=array([3,72,403, 512, 698])`。

现在，我想屏蔽`idx`. 这些列中的值可能会出现在其他列中，但它们不应被屏蔽。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T18:48:07.063

```
In [22]: A = np.random.rand(5, 10)

In [23]: idx = np.array([1, 3, 5])

In [24]: m = np.zeros_like(A)

In [25]: m[:,idx] = 1

In [26]: Am = np.ma.masked_array(A, m)

In [27]: Am
Out[27]: 
masked_array(data =
 [[0.680447483547 -- 0.290757600047 -- 0.0718559525615 -- 0.334352145502
  0.0861242618662 0.527068091963 0.136280743038]
 [0.729374999214 -- 0.76026650048 -- 0.656082247985 -- 0.492464543871
  0.903026937193 0.0792660503403 0.892132409419]
 [0.0845266821684 -- 0.838838594048 -- 0.396344231382 -- 0.703748703373
  0.380441396691 0.010521007806 0.344945867845]
 [0.7501401585 -- 0.0685427000113 -- 0.587100320511 -- 0.780160645327
  0.276328587928 0.0665949459004 0.604174142611]
 [0.599926798275 -- 0.686378805503 -- 0.776940069716 -- 0.0452833614622
  0.598622591094 0.942843765543 0.528082379918]],
             mask =
 [[False  True False  True False  True False False False False]
 [False  True False  True False  True False False False False]
 [False  True False  True False  True False False False False]
 [False  True False  True False  True False False False False]
 [False  True False  True False  True False False False False]],
       fill_value = 1e+20) 
```

# javascript - 在父函数之外使用数组

> ID：14611251
> 
> 赞同：0
> 
> 时间：2013-01-30T18:35:09.780
> 
> 标签：javascript

将此函数作为回调触发

```
 var testing  = []; 
 var vid;

function showMyVideos(data){

        var feed = data.feed; //object "feed"
        var entries = feed.entry || [];   //array "entry"
        var html = ['<ul>'];
        for (var i = 0; i < entries.length; i++){
            entry = entries[i];
            playCount = entry.yt$statistics.viewCount.valueOf() + ' views';
            title = entry.title.$t;

            vid = (getVideoId(entry.link[0].href));
            testing[i] = vid;
            lnk = '<a href = \'' + entry.link[0].href + '\'>link</a>';
            html.push('<li>', title, ', ', playCount, ', ', vid, ', ', lnk, '</li>');

        }
        html.push('</ul>');
        $('#videoResultsDiv').html(html.join(''));

     } 
```

* * *

我想在其他函数上使用“测试”数组，我该怎么做？.. 我现在很沮丧，抱歉我刚刚开始欣赏 JavaScript。我想完美地访问数组数据，就像我在函数内部的 console.log(testing) 上做的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:53:25.193

“测试”在全局范围内，只要在另一个范围内没有另一个具有相同名称的变量覆盖全局“测试”，它就应该可以在任何地方访问。

如果在您尝试它的地方无法访问这些值，则可能是因为该函数在回调加载“测试”中的值之前被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:58:54.007

正如已经提到`testing`的是全局范围，所以你可以在任何地方使用它。因此，使用`testing`.

有些人可能不赞成在 javascript 中使用全局范围，但有一些方法可以缓解问题。

通常，当我必须实现全局范围变量时，我会创建一个类似于“clear_session”或“reset_globals”的方法。

在您的情况下，这样的函数如下所示：

```
function reset_globals(){
   testing  = []; 
   vid;
} 
```

这很有用，因为您知道在调用之后您`reset_globals()`的变量将为空。

# asp.net-mvc-4 - 具有自定义角色的 MVC4 SimpleMemberhip Intranet webapp

> ID：14611254
> 
> 赞同：0
> 
> 时间：2013-01-30T18:35:29.210
> 
> 标签：asp.net-mvc-4, security, intranet, simplemembership

我正在将 SimpleMembership 与 WebMatrix 一起使用。由于它是一个 Intranet webapp，我将现有域用户与自定义角色结合使用，并将它们存储在本地网页表中。我正在尝试开发类来管理用户和角色。也许我正在以错误的方式解决这个问题，但这就是我所拥有的以及我被卡住的地方。

在 global.asa 中设置

```
 WebSecurity.InitializeDatabaseConnection("SqlRoleManagerConnection", "webpages_Users", "UserID", "Username", false); 
```

在 web.config 中设置这个（其他消息来源说添加 roleManager=true 部分，但目前没有它也可以工作）

```
<!--<roleManager enabled="true" defaultProvider="SqlRoleManager">
  <providers>
    <clear />
    <add name="SqlRoleManager" type="System.Web.Security.SqlRoleProvider" connectionStringName="SqlRoleManagerConnection" applicationName="YourAppName" />
  </providers>
</roleManager>-->

<httpRuntime targetFramework="4.5" />
<authentication mode="Windows" />
<authorization>
  <allow roles="Managers" />
  <allow users="?" />
</authorization> 
```

数据访问类（由控制器使用）

```
 public class Membership
{
    private OFACDB _db = new OFACDB();

    public string UserID { get; set; }
    public string UserName { get; set; }
    public string RoleName { get; set; }
    public string Name { get; set; }
    public const string Domain = "LAN\\";

    public void Delete()
    {
        Roles.RemoveUserFromRole(this.UserName, this.RoleName);
    }

    public void AddMemberToRole()
    {
        if (!Roles.IsUserInRole(Membership.Domain + this.UserName, this.RoleName))
            Roles.AddUserToRole(Membership.Domain + this.UserName, this.RoleName);
    }

    public void AddMember()
    {
        webpages_Users member = new webpages_Users();
        member.Username = Membership.Domain + this.UserName;
        _db.webpages_Users.Add(member);
        _db.SaveChanges();
    }

    public void DelMember(string id)
    {
        webpages_Users member = _db.webpages_Users.Find(id);
        _db.webpages_Users.Remove(member);
        _db.SaveChanges();
    }
}

public class MembershipViewModel : List<Membership>
{
    private OFACDB _db = new OFACDB();
    //public List<webpages_Users> UserView { get; set; }

    public IQueryable<webpages_Users> GetAllRecords()
    {
        var view = _db.webpages_Users
                .OrderBy(v => v.Username);
        return view;
    }

    public void GetAllRoleUsers(string role) //Get application's users
    {
        if (Roles.RoleExists(role))
        {
            foreach (var item in Roles.GetUsersInRole(role))
            {
                var user = new Membership();
                user.UserName = item;
                user.Name = item;
                user.RoleName = role;
                this.Add(user);
            }
        }
    }

    public void GetNetworkUsers() //Get Network Users (AD)
    {
        var domainContext = new PrincipalContext(ContextType.Domain);
        var groupPrincipal = GroupPrincipal.FindByIdentity(domainContext, IdentityType.SamAccountName, "Domain Users");

        foreach (var item in groupPrincipal.Members)
        {
            var user = new Membership();
            user.UserName = item.SamAccountName;
            user.Name = item.Name;
            this.Add(user);
        }
    }
} 
```

控制器按角色控制访问

```
 [Authorize(Roles = "Admins")]
    public ActionResult Index()
    {
        var users = new MembershipViewModel();
        users.GetAllRoleUsers("Managers");
        return View(users);
    } 
```

建议？我使用 Roles.GetUsersInRole 列出角色中的用户，但我不能很容易地删除它们，因为此调用不返回 UserID，如果我使用用户名查找/删除记录，那么它会在 URL 中转义，因为用户名包含域\字符。

/帐户/删除/LAN%5CLAN%5Ctest

如果其他人以前这样做过，请寻求有关可能对这些课程采取不同方法的建议。我需要使用会员提供者和角色提供者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:34:59.450

我们最近致力于一个需要角色管理的成员实现，并遇到了一个名为 Security Guard 的 nuget 包。

[http://www.mvccentral.net/Story/Details/tools/kahanu/securityguard-nuget-package-for-asp-net-membership](http://www.mvccentral.net/Story/Details/tools/kahanu/securityguard-nuget-package-for-asp-net-membership)

我会马上注意到这个包不是为与 SimpleMembership 提供程序一起工作而构建的。SMP 包括一个基本的功能子集，这使得编辑用户记录变得困难。然而，尽管 SMP 的限制，我们仍然能够在自定义功能后结合本地注册、OAuth 注册和角色管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T21:56:49.540

我只想发表评论，但我不能，因为我只有 44 分的代表。

我知道这很旧，但我一直在寻找同样的东西，并想在上面的评论中添加 @Vic 和 @Pabloker 之间的评论，@Vic 有他自己的数据库，@Pabloker 使用内置数据库。我猜 asp.net 在创建此数据库时有自己的脚本，并在此[博客中进行了说明](http://www.archaique.net/role-authorization-in-an-asp-net-mvc-intranet-application/)

```
cd \Windows\Microsoft.NET\Framework64\v4.0.30319
.\aspnet_regsql -C "Data Source=localhost;Database=ACME.Config;Integrated Security=True;" -A r 
```

# c++ - 使用用 Cygwin 编译的库时缺少 cyg*.dll，添加时出错

> ID：14611258
> 
> 赞同：0
> 
> 时间：2013-01-30T18:35:43.810
> 
> 标签：c++, dll, cygwin, mingw, zlib

我刚刚用 Cygwin 编译了 zlib 和 libzip，以便在 Windows 中将它们与 Code::Blocks 一起使用。我的代码是：

```
#include <iostream>
#include <zip.h>

int main()
{
    //Open the ZIP archive
    int err = 0;
    zip *z = zip_open("main.zip", 0, &err);
    zip_close(z);

    std::cout << "Hello world!" << std::endl;

    return 0;
} 
```

当我构建我的代码时，它运行良好，没有错误和警告。

当我启动我的程序时，它说我没有 cygzip-2.dll。好的，我搜索它并将其放入我的可执行文件夹中。然后，它说我没有 cygwin1.dll。好吧，我也发了。cygz.dll 和 cyggcc_s-1.dll 也是如此。

哦，它有效！但是，我的程序总是以相同的状态停止：-1073741819。它甚至不告诉我你好:(

我用 MinGW 编译它（它在 Cygwin 上也犯了同样的错误），我链接了 libz.a、libzip.a 和 libzip.dll.a。问题可能来自哪里？

谢谢！

编辑：当我尝试在 Cygwin 中编译我的程序时，它显示“未定义对 ' *_zip_open* ' 的引用”和“未定义对 '_zip_close' 的引用”。可能缺少一些东西，但是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:30:54.480

最终，我成功使用了我的 2 个库！我已经尝试过使用 CMake，但惨遭失败。

所以今天，我决定用 GUI 重试它。首先，我编译了 zlib。我选择了 zlib 文件夹，并将 build 文件夹放入其中。我配置了 Code::Blocks 和 MinGW Makefiles 以及本机编译器的选项。然后，我在“build”文件夹中打开了 .cbp（Code::Blocks 项目）并构建了它。

对于 libzip，除了指定 2 个变量外，我执行了这些步骤：

ZLIB_INCLUDE_DIR = zlib 文件夹的根目录（其中包含所有 .h 和 .c）和 ZLIB_LIBRARY = [从 zlib 到构建文件夹的路径]\libzlib.dll

我也是从 .cbp 构建的。我将所有文件链接到我的项目，它完成了！

# matlab - Matlab中如何调整y标签和y轴之间的距离？

> ID：14611259
> 
> 赞同：6
> 
> 时间：2013-01-30T18:35:47.733
> 
> 标签：matlab, matlab-figure

在 Matlab 中，如果我们不旋转包含多个字母的 y 标签，标签可能会与刻度数字甚至 y 轴重叠。我们可以通过以下方式增加 y 标签和 y 轴之间的距离：

```
plot(A, B);
y=ylabel('xxx', 'rot', 0);  % do not rotate the y label
set(y, 'position', get(y,'position')-[0.1,0,0]);  % shift the y label to the left by 0.1 
```

但是，一个问题是，如果我们更改`axis([0 1 0 25])`为`axis([0 10 0 25])`，则 y 标签和 y 轴之间的距离也会发生变化。有没有一种方便的方法可以将 y 标签稍微向左移动，但是当我们改变 x 的范围时，保持 y 标签和 y 轴之间的距离不变？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T19:22:10.713

您可以对 y 标签位置使用归一化单位。尝试这个：

```
set(y, 'Units', 'Normalized', 'Position', [-0.1, 0.5, 0]); 
```

标准化单位始终与 [0 1] 相关，因此数据的范围无关紧要。

# html - "X-UA 兼容" 内容="IE=9; IE=8; IE=7; IE=EDGE"

> ID：14611264
> 
> 赞同：234
> 
> 时间：2013-01-30T18:36:00.423
> 
> 标签：html, internet-explorer, x-ua-compatible

```
<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" /> 
```

1.  其实这句话的意思是什么？

2.  一些示例用于`,`分隔 IE 的版本，而一些使用`;`; 哪个是对的？

3.  顺序`IE=9; IE=8; IE=7; IE=EDGE`有一些重要性，我想知道这一点。

**编辑**：我正在使用`<!DOCTYPE html>`

* * *

## 回答 #1

> 赞同：330
> 
> 时间：2013-01-30T18:39:23.370

如果您支持 IE，对于 Internet Explorer 8 及更高版本，此：

```
<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7" /> 
```

强制浏览器呈现为该特定版本的标准。IE7 及以下不支持。

如果你用分号分隔，它会设置不同版本的兼容性级别。例如：

```
<meta http-equiv="X-UA-Compatible" content="IE=7; IE=9" /> 
```

将 IE7 和 IE8 呈现为 IE7，但将 IE9 呈现为 IE9。它允许不同级别的向后兼容性。但是，在现实生活中，您应该只选择以下选项之一：

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

这使得测试和维护更加容易。虽然通常更有用的版本是使用 Emulate：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" /> 
```

为了这：

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
```

它强制浏览器以最新版本的标准进行渲染。

有关更多信息，[请参阅 MSDN 上的大量](http://msdn.microsoft.com/en-us/library/ie/ms533876(v=vs.85).aspx)信息，

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-06T19:13:32.653

> 在某些情况下，可能需要将网页的显示限制为 Internet Explorer 早期版本支持的文档模式。您可以通过使用与 x-ua 兼容的标头来提供页面来做到这一点。有关详细信息，请参阅指定旧文档模式。
> - [https://msdn.microsoft.com/library/cc288325](https://msdn.microsoft.com/library/cc288325)

因此，此标签用于对网页进行**未来验证，以便使用***较旧*/*兼容*的引擎以与创建者预期相同的方式呈现它。

确保您已检查它与您指定的 IE 版本一起正常工作。

# java - PDF 文件返回为使用 Java（Java EE）创建和下载的不受支持的格式

> ID：14611266
> 
> 赞同：0
> 
> 时间：2013-01-30T18:36:05.773
> 
> 标签：java, jakarta-ee, pdf-generation, itext

当我执行这个jsp文件时，我可以下载pdf格式的文件。但是当我试图打开它时，它会显示一个不支持格式的错误。但是，如果我尝试在记事本中打开下载的 pdf 文件，我会得到我想要的数据。但我应该以解密的形式获得它。所以请帮我打开 pdf 文件以查看数据。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
    <%  String ID = (String) session.getAttribute("ID");
    String connectionURL = "jdbc:oracle:thin:@localhost:1521:XE";
    String url = request.getParameter("WEB_URL");
    String Content = new String("");
    Statement stmt = null;
    Connection con = null;

String Content = new String("");
                String filename = "data" + ID + ".pdf";

        try {
            Class.forName("oracle.jdbc.driver.OracleDriver");
            con = DriverManager.getConnection(connectionURL, "temp",

            "root");
            stmt = con.createStatement();
            String qry = "select * from form where id='" + ID + "'";
            ResultSet rst = stmt.executeQuery(qry);
            if (rst.next()) {
                Content = "  FirstName: " + rst.getString("FirstName")
                        + "\r\n" + "  LastName: "
                        + rst.getString("LastName") + "\r\n" + "  Age: "
                        + rst.getString("Age") + "\r\n" + "  City: "
                        + rst.getString("City") + "\r\n" + "  Phone: "
                        + rst.getString("Phone") + "\r\n" + "  ID: "
                        + rst.getString("ID");
            }
            //out.println(Content);
            byte requestBytes[] = Content.getBytes();
            response.reset();
            response.setContentType("application/pdf");
            response.setHeader("cache-control", "no-cache");
            response.setHeader("Content-disposition",
                    "attachment; filename=" + filename);
            response.setCharacterEncoding("UTF-8");

            ByteArrayInputStream byteStream = new ByteArrayInputStream(
                    requestBytes);
            BufferedInputStream bufStream = new BufferedInputStream(
                    byteStream);
            ServletOutputStream responseOutputStream = response
                    .getOutputStream();
            int data = bufStream.read();
            while (data != -1) {
                responseOutputStream.write(data);
                data = bufStream.read();
            }

            bufStream.close();
            responseOutputStream.close();

        } catch (Exception e) {
            e.printStackTrace();
            System.out.println(" Exception is:" + e);
        }
    %>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:44:21.373

主要是什么问题，您也在 PDF 输出周围输出 HTML。确保以没有最终换行符开始`<%`和结束；`%>`那是很好的风格，即使在 `response.reset()`这里可以发挥作用。

此外`content.getBytes("Cp1252")`（Windows Latin-1，ISO-8859-1 的扩展）。否则平台编码是默认的。

看来您输出的是字符串`Content`而不是 pdf（文件名）。

```
File file = request.getServletContext().getRealPath("/pdfsdir/" + filename);
FileInputStream byteStream = new FileInputStream(file); 
```

由于 PDF 是二进制的，因此不需要 setCharacterEncoding。但是，对于文件，您可以设置 Content-Length 标头。

为了填写个性化数据，需要更多。

* * *

早期做：

```
 File file = request.getServletContext().getRealPath("/pdfsdir/" + filename);
        if (!file.canRead()) {
            // Log this with filename...
            response.sendError(HttpServletResponse.SC_NOT_FOUND);
            return;
        }
        long fileLength = file.length();
        if (fileLength > Integer.MAX_VALUE) { // Too large
            // Log this with filename...
            response.sendError(HttpServletResponse.SC_CONFLICT);
            return;
        }
        int length = (int) fileLength; 
```

后：

```
 response.setHeader("Content-disposition",
                "attachment; filename=" + filename); 
```

做

```
 response.setContentLength(length);

        FileInputStream byteStream = new FileInputStream(file);
        BufferedInputStream bufStream = new BufferedInputStream(
                byteStream);
        ServletOutputStream responseOutputStream = response
                .getOutputStream();
        final int BLOCK_SIZE = Math.min(16*1024, length);
        byte[] data = new byte[BLOCK_SIZE];
        while (length > 0) {
            int nread = bufStream.read(data, 0, Math.max(length, block.length));
            if (nread <= 0) {
                // Something fishy happened, upload of other smaller version.
                break;
            }
            length -= nread;
            responseOutputStream.write(data, 0, nread);
        }
        bufStream.close(); 
```

# html - 13英寸显示器的媒体查询

> ID：14611269
> 
> 赞同：1
> 
> 时间：2013-01-30T18:36:17.257
> 
> 标签：html, css, media-queries

我的布局在大显示器上工作正常......但我试图在小屏幕笔记本电脑中正确显示......我应该在 13 英寸显示器的 css 媒体查询中使用哪个宽度......我很困惑13英寸笔记本电脑的abt宽度

```
@media (min-width: 768px) and (max-width: 979px) {
@media (max-width: 767px) {
@media (min-width: 1200px) {
@media (min-width: 768px) and (max-width: 979px) {
@media (max-width: 767px) {
@media (max-width: 480px) {
@media (max-width: 979px) {
@media (min-width: 980px) { 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:21:23.617

大多数 13 英寸显示器将大于960 像素甚至大于**1140 像素**宽 **。960****像素**宽是一种旧标准，现在更经常使用**1140 像素**，尤其是对于响应式设计。

 ******也就是说，只有 8 英寸或 9 英寸屏幕的上网本才会出现显示问题。我所知道的每台 13" 显示器在显示您的网页时应该没有任何问题。如果您想为上网本设计，它们的分辨率与大多数平板电脑的纵向位置相似。因此，如果您正在对平板电脑和手机进行媒体查询，那么上网本应该采用平板的风格，因为它们的分辨率是**800x600**到**1024x768**。

一般来说，没有理由为手机和平板电脑以外的任何东西制作不同的样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-20T13:27:14.980

在这里，您可以资助所有分辨率及其屏幕尺寸：

[http://www.codeply.com/responsive-design-cheatsheet.html](http://www.codeply.com/responsive-design-cheatsheet.html)

**对于您提出的问题：13' Macbook Air 1440 px x 900px 13 英寸**

如需更多测试和研究，您还可以查看此网站，该网站测试所有所需的屏幕分辨率，并提供输入自定义屏幕尺寸的选项：

[http://www.infobyip.com/testwebsiteresolution.php](http://www.infobyip.com/testwebsiteresolution.php)

PS：我上面提到的网站都没有连接到我，我只是普通用户和Web开发人员。******

# javascript - JavaScript - 如何将数组与自身进行交叉比较

> ID：14611271
> 
> 赞同：2
> 
> 时间：2013-01-30T18:36:17.877
> 
> 标签：javascript

我有一个这样的数组：

```
var myObjArray = [{city: 'milwaukee', state: 'wi'}, 
                  {city:'madison', state: 'wi'}, 
                  {city:'greenbay', state: 'wi'}, 
                  {city:'madison', state: 'wi'}]; 
```

我将如何将数组与自身进行比较以查找重复项。
（注意：我需要保留重复项，所以也许我可以向对象添加一个属性作为标志）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:41:51.463

怎么样：

```
var bucket = {};
for(var i=0;i<array.length;i++) {
    var item = array[i];
    var hash = JSON.stringify(item); //or some a hashing algorithm...
    var prev = bucket[hash];
    if(prev) {
        prev.duplicate = item.duplicate = true;
    } else {
        bucket[hash] = item 
    }   
} 
```

或相同而不依赖于`JSON.stringify`：

```
var markDuplicates = function(array, hashFunc) {
    var bucket = {};
    for(var i=0;i<array.length;i++) {
        var item = array[i];
        var hash = hashFunc(item);
        var prev = bucket[hash];
        if(prev) {
            prev.duplicate = item.duplicate = true;
        } else {
            bucket[hash] = item 
        }   
    }
    return array;
};

markDuplicates(yourArray, function(item) { return item.city + item.state; }); 
```

# ms-access - CurrentDB.Execute 活动记录参考

> ID：14611277
> 
> 赞同：0
> 
> 时间：2013-01-30T18:36:37.233
> 
> 标签：ms-access, relationship, record, jet

在此处访问 2010。

有两个表处于一对一关系（MainDB、Parts）和一个来自表单（MainForm）的命令对“Parts”表进行操作：

```
CurrentDb.Execute "DELETE * FROM Parts WHERE ID = ID", dbFailOnError
PartsForm.Requery 
```

这将简单地删除整个“Parts”表并重新查询使用该表的子表单（PartsForm）。我只是想根据调用命令的“MainForm”中当前选定记录的 ID 删除一条记录。如果“Parts”表中有与“MainForm”中选择的当前记录具有相同ID的记录，则该命令应在调用时将其删除。

当然，

```
WHERE ID = ID 
```

将是问题所在，但该命令不喜欢对“MainDB”中可用字段的引用。您如何通过此命令引用活动记录的 ID？

谢谢您的帮助。这似乎应该是一个简单的语法修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:54:13.947

```
CurrentDb.Execute "DELETE * FROM Parts WHERE ID = " & Me.ID, dbFailOnError
PartsForm.Requery 
```

似乎工作，额外的括号外部没有。

# c# - 实体框架 OptimisticConcurrencyException 问题

> ID：14611278
> 
> 赞同：1
> 
> 时间：2013-01-30T18:36:37.850
> 
> 标签：c#, entity-framework-4, add, optimistic-concurrency

我正在使用实体框架 4。在一个表单中，我有一个`DataGridView`分配为`DataSource`. 然后，我有两个按钮。删除`historial_borrar`list() 的最后一个 entity() `lista_historial_prestamo`，实际上是 的第一行`DataGridView`：

```
Historial_estado_prestamo historial_borrar = 
    (Historial_estado_prestamo)dgv_Historial_estado_prestamo.Rows[0].DataBoundItem;

dgv_Historial_estado_prestamo.DataSource = null;

lista_historial_prestamo.Remove(historial_borrar);

historial_borrar.Prestamo.Estado_prestamo = 
     lista_historial_prestamo.OrderByDescending(x => x.fecha_hora).First().Estado_prestamo;

db.DeleteObject(historial_borrar);
db.SaveChanges(); 
```

然后，另一个按钮将一个新实体添加到数据库中。

```
Historial_estado_prestamo historial_nuevo = new Historial_estado_prestamo();

historial_nuevo.fecha_hora = DateTime.Now;

historial_nuevo.Estado_prestamo = db.Estado_prestamo.Where(x => x.id_estado_prestamo == 2)
                                                    .FirstOrDefault();

prestamo_seleccionado.Historial_estado_prestamo.Add(historial_nuevo);

dgv_Historial_estado_prestamo.DataSource = null;

lista_historial_prestamo.Add(historial_nuevo);

lista_historial_prestamo = lista_historial_prestamo.OrderByDescending(x => x.fecha_hora)
                                                   .ToList();
prestamo_seleccionado.Estado_prestamo =   
    lista_historial_prestamo.FirstOrDefault().Estado_prestamo;
db.SaveChanges(); 
```

每次单击按钮时`DataSource`，我显然都会刷新`DataGridView`( ) 。`dgv_Historial_estado_prestamo`

这个想法是，如果我添加一个，我可以在它之后删除那个。

如果我添加一个，然后删除那个。我得到一个`OptimisticConcurrencyException`.

我真的不知道为什么！我`SaveChanges()`每次删除对象或将其添加到数据库中。我也将其从`datasource`列表中删除。

仅当我在添加对象后删除对象时才出现此异常。

我一直在阅读一些帖子并尝试过这个：

```
{
    Historial_estado_prestamo historial_borrar = 
        (Historial_estado_prestamo)dgv_Historial_estado_prestamo.Rows[0].DataBoundItem;

    dgv_Historial_estado_prestamo.DataSource = null;

    lista_historial_prestamo.Remove(historial_borrar);

    historial_borrar.Prestamo.Estado_prestamo = 
         lista_historial_prestamo.OrderByDescending(x => x.fecha_hora)
                                 .First()
                                 .Estado_prestamo;
    db.DeleteObject(historial_borrar);
    try
    {
        db.SaveChanges();
    }
    catch (OptimisticConcurrencyException)
    {
        db.Refresh(RefreshMode.ClientWins, historial_borrar);
        db.SaveChanges();
    }
} 
```

这段代码没有例外，但是当我关闭并重新打开该表单时，我删除的所有对象实际上都在那里。

# mysql - MySQL 和 PHP 错误

> ID：14611281
> 
> 赞同：0
> 
> 时间：2013-01-30T16:38:29.227
> 
> 标签：mysql

我有这个代码来创建一个基于随机数的数据库。

```
<?php
  $con = mysql_connect("localhost","soociali","[censored]");
  $databasename = rand(5, 7);

  if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }

  if (mysql_query("CREATE DATABASE $databasename",$con))
    {
    echo "Database created, called $databasename";
    }
  else
    {
    echo "Error creating database: " . mysql_error();
    }

  mysql_close($con);
?> 
```

但是，我收到此错误：`Error creating database: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '6' at line 1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:45:21.567

将您的数据库名称包含在 ` 标记中：

```
if (mysql_query("CREATE DATABASE `$databasename`",$con)) 
```

该查询`"CREATE DATABASE 6;"`使 MySQL 感到困惑，因为它需要一个字母数字数据库名称，而不是看起来像一个直整数的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:46:59.207

您的数据库名称将被解析为一个数字。只需像这样放置反引号：

```
mysql_query("CREATE DATABASE `$databasename`",$con) 
```

# eclipse - 评论正在从 web.xml 中删除

> ID：14611295
> 
> 赞同：1
> 
> 时间：2013-01-30T18:37:36.270
> 
> 标签：eclipse, web-applications, servlets, web.xml

我的问题是，当我使用向导将新的 Servlet 插入到动态 Web 项目中时，web.xml 文件的内容总是被折叠：

*   缩进制表符转换为两个空格；
*   多余的白色行被删除；
*   评论被删除。

我怎样才能防止这种情况，或者我什至可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-10T07:58:22.203

要禁止 Eclipse 删除 xml 文件中的注释：

查看您的 Window->Preferences -> XML -> XML Files -> Editor -> Typing settings: Automatically remove: clear check-box of: End tags when creating empty self- closing tags

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:42:26.940

听起来您的日食已配置为这样做。

查看您的 Window->Preferences -> XML -> XML Files -> Editor 设置

-确保选择使用制表符缩进 -清除所有空白行未选中

至于被删除的评论，不确定那个。也许格式评论复选框。

# c# - 自定义简单的成员资格/WebMatrix 网络安全？能够抑制 OAuth 表吗？删除密码字段？

> ID：14611298
> 
> 赞同：0
> 
> 时间：2013-01-30T18:37:46.817
> 
> 标签：c#, asp.net-mvc-4, simplemembership

我正在开发一个 MVC4 网站，并且一直在努力自定义开箱即用的 SimpleMembershipProvider，并且有一些我无法在文档中找到的问题。

1) 我可以对生成的表格进行什么样的控制？例如，如果您永远不会使用 OAuth，是否有办法阻止生成 OAuth 表？是否可以简单地使用用户表中的角色字段，而不是默认的单独连接表？

2) 用户将通过外部系统进行身份验证。无论如何将Websecurity.Login（用户名，密码）覆盖为Webseurity.Login（用户名）？

提前感谢您提供的任何指针或资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:42:40.997

您可以修改的唯一表是 UserProfile。[以下是有关如何在 SimpleMembership 中自定义 UserProfile 的说明](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html)。

没有只接受用户名的[WebSecurity.Login方法。](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.login%28v=vs.111%29.aspx)但是您可以通过在使用[WebSecurity.CreateUserAndAccount](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.createuserandaccount%28v=vs.111%29.aspx)时为数据库中的每个人分配相同的内部密码，然后在使用 Login 方法时使用该内部密码来解决此问题。

# java - 我怎样才能给 JRuby 打补丁来给它一个伪文件系统？

> ID：14611301
> 
> 赞同：0
> 
> 时间：2013-01-30T18:38:06.550
> 
> 标签：java, ruby, jruby

以前我试图[给 JavaScript 的 Java 引擎 - rhino - 一个伪文件系统](https://stackoverflow.com/questions/13569734/how-can-i-provide-a-pseudo-file-system-for-r-js)，我取得了成功（[jszip maven 插件](http://jszip.org)）

我现在将注意力转向[SASS 编译器](http://sass-lang.com)

我已经将 JRuby 集成到我的 Maven 插件中，我可以很好地调用 SASS 编译器，所以现在最后一步（在从 hack-land 到可维护代码的大重构之前）是伪造 JRuby 看到的路径，

我的感觉是我将无法重用我的 Rhino 技巧（我在 Rhino 范围内重新映射 java.io.File 类适配器），因为 Ruby 通常没有适配器层来纠正不同 Ruby VM 之间的差异

所以我的下一个想法是猴子补丁......但我不确定这会有多大的工作......

使用 JavaScript 我只需要伪造`java.io.File`, `java.io.FileReader`, `java.io.FileWriter`, `java.io.FileInputStream`,`java.io.FileOutputStream`

我需要在 Ruby 运行时打多少补丁......或者我最好使用基于 ASM 的重写类加载器从 JRuby 本身下面拉出地毯（我冒着破坏合法文件用于加载例如 Gems 的风险）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:43:52.723

对我关于 SASS 编译器的具体问题的回答，但不是对如何对 JRuby 进行猴子补丁以提供假文件系统的一般问题的回答。

事实证明，Sass 有一个概念，`Sass::Importer::Base`它是解析`.scss`和`.sass`文件的基类。所以我需要做的就是创建我自己的实现，它委托给我的虚拟文件系统并配置传递给的选项，`Sass::Engine.new`以便将基于默认文件系统的导入器替换为我的 Importer 实现。

[似乎正在工作，](https://github.com/jszip/jszip-maven-plugin/commit/58783681ca3f757bc47606c44b1602043c08e57f)尽管我在尝试让它编译[Foundation 3](http://foundation.zurb.com/)时遇到了一些问题，这可能是因为它依赖于[Compass](http://compass-style.org/)，这与我对 LESS 支持的测试经验形成对比，其中[Bootstrap](http://getbootstrap.com)是独立的。

# 更新

关于基于 ASM 的重写类加载器。也许这种方法的诀窍是使用 AspectC 仅修改 JRuby 运行时中的那些类。换句话说，仅当类扩展 RubyObject 时才应用方面。这应该保留 JRuby 加载 ruby​​ 源代码的合法需求，同时为嵌入式 VM 提供假文件系统。

关于猴子补丁，似乎需要大量工作来填充 Ruby 的文件 API 提供的所有等效方法，以确保猴子补丁有效，特别是考虑到我们不知道确切的足迹SASS 编译器将使用哪些 API。

所以，我想完整的答案是：“你不想做猴子补丁或 ASM 重写，因为你想要使用的库提供了一个很好的抽象来允许它提供虚拟文件系统”

# windows-phone-8 - Windows Phone 8 消息框

> ID：14611305
> 
> 赞同：0
> 
> 时间：2013-01-30T18:38:11.090
> 
> 标签：windows-phone-8

在 Windows Phone 8 中显示复杂消息框的最佳方式是什么？

这些是我知道的： 默认 Windows Phone 工具包 Coding4Fun：[http ://coding4fun.codeplex.com/wikipage?title=MessagePrompt&referringTitle=Documentation](http://coding4fun.codeplex.com/wikipage?title=MessagePrompt&referringTitle=Documentation)

我正在开发一个静态游戏。

我希望有一种设置菜单作为消息框。因为这些都是快速的事情，应该很容易改变。

此外，对主游戏菜单执行相同操作是否是个好主意。这两者的合理性是不应该将玩家带离主游戏。

消息框可以有多个按钮、切换开关、文本框等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:57:46.847

我的 0.02$：最好将游戏菜单（开始菜单、设置菜单、高分等）作为游戏的一部分全部以原生格式呈现。这样，这些菜单就可以具有游戏其余部分的外观和感觉。话虽这么说，构建这些额外的屏幕需要做很多工作，所以如果您想通过使用不合格的 UX 来缩短开发并减少开发时间，这完全取决于您。

# android - 在 fragmentactivity 中切换标签

> ID：14611307
> 
> 赞同：-1
> 
> 时间：2013-01-30T18:38:22.353
> 
> 标签：android, tabs, fragment

我知道这听起来很愚蠢，但我最近开始研究片段/片段活动来替换 tabactivity.. 但简单的问题是我不知道如何从当前选项卡切换选项卡，即在 tabactivity 托管活动中，用它来打开选项卡 1

```
TabActivity tabMap = (TabActivity) getParent();
tabMap.getTabHost().setCurrentTab(1); 
```

我怎样才能对 FragmentActivity 托管选项卡（片段）做同样的事情？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:47:56.320

只要我理解，你想要这样的东西（假设 getParent() 返回 Activity）

```
TabHost host = getParent().findViewById(android.R.id.tabhost);
host.setCurrentTab(1); 
```

顺便说一句，建议切换到 ActionBar 选项卡，这并不难，而且看起来会更好，而且您不必使用已弃用的东西。

# javascript - 为什么javascript重定向不起作用？

> ID：14611317
> 
> 赞同：0
> 
> 时间：2013-01-30T18:39:05.037
> 
> 标签：javascript

我有一个表单，在单击“删除”按钮时应该将用户重定向到一个页面。这是表单中的唯一对象。

```
<input type="submit" name="delete" value="Delete" class="submitbutton" id="submitbutton"  onclick="Redirect();"> 
```

不幸的是，重定向不起作用：

```
<script type="text/javascript">

function Redirect()
{
 alert('b');
 window.location="http://www.tutorialspoint.com";
}

</script> 
```

显示警报。然后什么也没有发生。我也试过window.navigate。我正在拔头发。

如果这很重要，则在页面开头有一个会话：

```
<?php
session_start();
?>
<html>... 
```

我在chrome和firefox中试过。我显然错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:40:27.127

它可能正在运行您的脚本，然后提交表单。

你应该使用：

```
<input type="button" ...> 
```

代替：

```
<input type="submit" ...> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:01:27.033

它一直在我眼前：此页面上接受的解决方案： [尝试将javascript确认框与php post方法结合起来？](https://stackoverflow.com/questions/7081016/try-to-combine-javascript-confirm-box-with-php-post-method)

# c# - 为什么每个人都说 SpinLock 更快？

> ID：14611320
> 
> 赞同：9
> 
> 时间：2013-01-30T18:39:18.530
> 
> 标签：c#, multithreading, monitor, interlocked, spinlock

我在互联网上阅读了很多文档、文章和帖子。几乎所有人和任何地方都认为 SpinLock 对于运行较短的代码片段更快，但我做了一个测试，在我看来，简单的 Monitor.Enter 比 SpinLock.Enter 工作得更快（测试是针对 .NET 4.5 编译的）

```
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Diagnostics;
using System.Threading.Tasks;
using System.Linq;
using System.Globalization;
using System.ComponentModel;
using System.Threading;
using System.Net.Sockets;
using System.Net;

class Program
{
    static int _loopsCount = 1000000;
    static int _threadsCount = -1;

    static ProcessPriorityClass _processPriority = ProcessPriorityClass.RealTime;
    static ThreadPriority _threadPriority = ThreadPriority.Highest;

    static long _testingVar = 0;

    static void Main(string[] args)
    {
        _threadsCount = Environment.ProcessorCount;

        Console.WriteLine("Cores/processors count: {0}", Environment.ProcessorCount);

        Process.GetCurrentProcess().PriorityClass = _processPriority;

        TimeSpan tsInterlocked = ExecuteInterlocked();
        TimeSpan tsSpinLock = ExecuteSpinLock();
        TimeSpan tsMonitor = ExecuteMonitor();

        Console.WriteLine("Test with interlocked: {0} ms\r\nTest with SpinLock: {1} ms\r\nTest with Monitor: {2} ms",
            tsInterlocked.TotalMilliseconds,
            tsSpinLock.TotalMilliseconds,
            tsMonitor.TotalMilliseconds);

        Console.ReadLine();
    }

    static TimeSpan ExecuteInterlocked()
    {
        _testingVar = 0;

        ManualResetEvent _startEvent = new ManualResetEvent(false);
        CountdownEvent _endCountdown = new CountdownEvent(_threadsCount);

        Thread[] threads = new Thread[_threadsCount];

        for (int i = 0; i < threads.Length; i++)
        {
            threads[i] = new Thread(() =>
                {
                    _startEvent.WaitOne();

                    for (int j = 0; j < _loopsCount; j++)
                    {
                        Interlocked.Increment(ref _testingVar);
                    }

                    _endCountdown.Signal();
                });

            threads[i].Priority = _threadPriority;
            threads[i].Start();
        }

        Stopwatch sw = Stopwatch.StartNew();

        _startEvent.Set();
        _endCountdown.Wait();

        return sw.Elapsed;
    }

    static SpinLock _spinLock = new SpinLock();

    static TimeSpan ExecuteSpinLock()
    {
        _testingVar = 0;

        ManualResetEvent _startEvent = new ManualResetEvent(false);
        CountdownEvent _endCountdown = new CountdownEvent(_threadsCount);

        Thread[] threads = new Thread[_threadsCount];

        for (int i = 0; i < threads.Length; i++)
        {
            threads[i] = new Thread(() =>
            {
                _startEvent.WaitOne();

                bool lockTaken;

                for (int j = 0; j < _loopsCount; j++)
                {
                    lockTaken = false;

                    try
                    {
                        _spinLock.Enter(ref lockTaken);

                        _testingVar++;
                    }
                    finally
                    {
                        if (lockTaken)
                        {
                            _spinLock.Exit();
                        }
                    }
                }

                _endCountdown.Signal();
            });

            threads[i].Priority = _threadPriority;
            threads[i].Start();
        }

        Stopwatch sw = Stopwatch.StartNew();

        _startEvent.Set();
        _endCountdown.Wait();

        return sw.Elapsed;
    }

    static object _locker = new object();

    static TimeSpan ExecuteMonitor()
    {
        _testingVar = 0;

        ManualResetEvent _startEvent = new ManualResetEvent(false);
        CountdownEvent _endCountdown = new CountdownEvent(_threadsCount);

        Thread[] threads = new Thread[_threadsCount];

        for (int i = 0; i < threads.Length; i++)
        {
            threads[i] = new Thread(() =>
            {
                _startEvent.WaitOne();

                bool lockTaken;

                for (int j = 0; j < _loopsCount; j++)
                {
                    lockTaken = false;

                    try
                    {
                        Monitor.Enter(_locker, ref lockTaken);

                        _testingVar++;
                    }
                    finally
                    {
                        if (lockTaken)
                        {
                            Monitor.Exit(_locker);
                        }
                    }
                }

                _endCountdown.Signal();
            });

            threads[i].Priority = _threadPriority;
            threads[i].Start();
        }

        Stopwatch sw = Stopwatch.StartNew();

        _startEvent.Set();
        _endCountdown.Wait();

        return sw.Elapsed;
    }
} 
```

在具有 24 个 2.5 GHz 内核的服务器上，此应用程序使用 x64 编译产生以下结果：

```
Cores/processors count: 24
Test with interlocked: 1373.0829 ms
Test with SpinLock: 10894.6283 ms
Test with Monitor: 1171.1591 ms 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-30T20:33:32.337

您只是没有测试 SpinLock 可以改进线程的场景。自旋锁背后的核心思想是线程上下文切换是非常昂贵的操作，花费在 2000 到 10,000 个 cpu 周期之间。并且，如果线程很可能通过等待（自旋）来获得锁，那么通过避免线程上下文切换，可以通过避免线程上下文切换来获得额外的等待周期。

所以基本要求是锁的持有时间很短，这在你的情况下是正确的。并且有合理的几率可以获得锁。在您的情况下不是这样，锁**受到**不少于 24 个线程的激烈竞争。所有旋转和燃烧的核心都没有机会获得锁。

在这个测试中，Monitor 将工作得最好，因为它将等待获取锁的线程排队。它们被挂起，直到其中一个有*机会*获得锁，当锁被释放时从等待队列中释放。给他们一个公平的机会转弯，从而最大限度地提高他们同时完成的几率。Interlocked.Increment 也不错，但不能提供公平保证。

很难判断 Spinlock 是否是正确的方法，你必须衡量。并发分析器是正确的工具。

# ios - 我可以在 iOS 中获取日、周、月、年的本地化字符串吗？

> ID：14611321
> 
> 赞同：4
> 
> 时间：2013-01-30T18:39:20.403
> 
> 标签：ios

除了进行手动查找之外，这似乎是不可能的。

请注意，我不是要求本地化日期。我想要“日”、“周”、“月”、“年”的实际术语。

编辑：我正在寻找本地化的翻译。例如，如果我计算两个日期之间的 3 个月，我想向用户显示“3 个月”的本地化版本。希望有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-05-07T12:32:11.673

我们可以从中提取它`DateComponentsFormatter`，这是我的日历扩展：

```
extension Calendar {
    mutating func localizedUnitTitle(_ unit: NSCalendar.Unit, value: Int = 1, locale: Locale? = nil) -> String {
        let emptyString = String()
        let date = Date()
        let component = getComponent(from: unit)
        guard let sinceUnits = self.date(byAdding: component, value: value, to: date) else {
            return emptyString
        }

        let formatter = DateComponentsFormatter()
        if locale != nil {
            self.locale = locale
        }
        formatter.calendar = self
        formatter.allowedUnits = [unit]
        formatter.unitsStyle = .full
        guard let string = formatter.string(from: date, to: sinceUnits) else {
            return emptyString
        }

        return string.replacingOccurrences(of: String(value), with: emptyString).trimmingCharacters(in: .whitespaces).capitalized
    }
    // swiftlint:disable:next cyclomatic_complexity
    private func getComponent(from unit: NSCalendar.Unit) -> Component {
        let component: Component

        switch unit {
        case .era:
            component = .era
        case .year:
            component = .year
        case .month:
            component = .month
        case .day:
            component = .day
        case .hour:
            component = .hour
        case .minute:
            component = .minute
        case .second:
            component = .second
        case .weekday:
            component = .weekday
        case .weekdayOrdinal:
            component = .weekdayOrdinal
        case .quarter:
            component = .quarter
        case .weekOfMonth:
            component = .weekOfMonth
        case .weekOfYear:
            component = .weekOfYear
        case .yearForWeekOfYear:
            component = .yearForWeekOfYear
        case .nanosecond:
            component = .nanosecond
        case .calendar:
            component = .calendar
        case .timeZone:
            component = .timeZone
        default:
            component = .calendar
        }
        return component
    }
} 
```

用法：

```
var calendar = Calendar.current
let dayString = calendar.localizedUnitTitle(.day) //Day
let weekString = calendar.localizedUnitTitle(.weekOfMonth) //Week
let monthString = calendar.localizedUnitTitle(.month) //Month
let yearString = calendar.localizedUnitTitle(.year) //Year
let locale = Locale(identifier: "uk")
let secondString = calendar.localizedUnitTitle(.second, locale: locale) //Секунда 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:42:52.723

做这样的事情来获得语言环境中的星期几：

```
NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setLocale: [NSLocale currentLocale]];
NSArray * weekdays = [dateFormatter weekdaySymbols]; 
```

如果你想要实际的单词“day”、“week”、“month”，我认为你必须使用 NSLocalizedString。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T18:43:08.997

没有内置功能可以为您提供英文单词“day”、“week”等的本地化翻译。

你必须使用

```
 NSLocalizedString(@"day",""); 
```

并提供语言字符串资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-02T13:12:50.950

您实际上可以使用`DateComponentsFormatter.localizedString(from: to:)`. [这是文档](https://developer.apple.com/documentation/foundation/datecomponentsformatter/1411422-localizedstring)。

这是一个方便的`Calendar`扩展：

```
extension Calendar {
  func period(unit component: Component, value: Int) -> String? {
    let present = Date()

    guard let future = date(byAdding: component, value: value, to: present) else { return nil }

    let period = dateComponents([component], from: present, to: future)

    return DateComponentsFormatter.localizedString(from: period, unitsStyle: .full)
  }
}

// Usage:
Calendar.current.period(unit: .month, value: 3) // "3 months" 
```

另外，我不久前写了[这篇](https://medium.com/@rserentill/dealing-with-relative-dates-in-swift-the-cool-way-5903a7af2461)关于相对日期的中篇文章，看看吧！

你可以只用一行来做到这一点：

```
DateComponentsFormatter.localizedString(from: 3.months, unitsStyle: .full) // "3 months" 
```

# c - 如何在 C 中使用零长度数组

> ID：14611322
> 
> 赞同：3
> 
> 时间：2013-01-30T18:39:20.983
> 
> 标签：c, struct

我们可以使用链接中指定的零长度数组初始化结构：

[零长度](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Zero-Length.html)。

我正在使用以下结构：

```
typedef unsigned char UINT8;
typedef unsigned short UINT16;

typedef struct _CommandHeader
{
    UINT16 len;
    UINT8 payload[0];
} CommandHeader;

typedef struct _CmdXHeader
{
    UINT8 len;
    UINT8 payload[0];
} CmdXhHeader; 
```

现在 CommandHeader.payload 应该指向/包含 CmdXHeader 结构。即内存应该是这样的：

```
 -------------------------------------------------------------
| CommandHeader.len | CmdXHeader.len | CmdXHeader.payload ....|
 ------------------------------------------------------------- 
```

我可以轻松地将 CmdXHeader / CommandHeader 分配到自定义长度。但是如何为 CmdXHeader 有效负载赋值或如何将 CmdXHeader 对象链接到 CommandHeader.payload？

* * *

### 我的解决方案

谢谢大家的回复。我通过以下方式解决了它：

```
//Get the buffer for CmdXHeader:
size_t cmdXHeader_len = sizeof(CmdXHeader) + custom_len;
CmdXHeader* cmdXHeader = (CmdXHeader*) malloc(cmdXHeader_len);
//Get a temporary pointer and assign the data to it
UINT8* p;
p[0] = 1;
p[2] = 2;
.......

//Now copy the memory of p to cmdXHeader
memcopy(cmdHeader->payload, p, custom_len);

// allocate the buffer for CommandHeader
CommandHeader* commandHeader = (CommandHeader*) malloc (sizeof (CommandHeader) + cmdXHeader_len);

// populate the fields in commandHeader
commandHeader->len = custom_len;
memcpy(commandHeader->payload, cmdXHeader, cmdXHeader_len); 
```

现在 commandHeader 对象具有所需的内存，我们可以用任何我们想要的方式进行类型转换......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T18:52:48.423

在标准 C 中，结构末尾或其他任何地方的零长度数组实际上是非法的（更准确地说是*违反约束*）。它是 gcc 特定的扩展。

它是“struct hack”的几种形式之一。一种更便携的方法是定义一个长度为 1 而不是 0 的数组。

C 语言的创建者 Dennis Ritchie 称其为“与 C 实现毫无根据的亲密关系”。

ISO C 标准的 1999 年修订版引入了一种称为“灵活数组成员”的功能，这是一种更强大的方法。大多数现代 C 编译器都支持此功能（但我怀疑 Microsoft 的编译器不支持）。

[这在comp.lang.c FAQ](http://www.c-faq.com/)的问题 2.6 中有详细讨论。

至于您如何访问它，无论您使用哪种形式，您都可以像对待任何数组一样对待它。在大多数情况下，成员的名称会衰减为指针，允许您对其进行索引。只要您分配了足够的内存，您就可以执行以下操作：

```
CommandHeader *ch;
ch = malloc(computed_size);
if (ch == NULL) { /* allocation failed, bail out */ }
ch.len = 42;
ch.payload[0] = 10;
ch.payload[1] = 20;
/* ... */ 
```

显然，这只是一个粗略的轮廓。

请注意`sizeof`，当应用于类型`CommandHeader`或该类型的对象时，将为您提供不包括灵活数组成员的结果。

另请注意，以下划线开头的标识符保留给实现。你永远不应该在你自己的代码中定义这样的标识符。不需要为 typedef 名称和 struct 标签使用不同的标识符：

```
typedef struct CommandHeader
{
    UINT16 len;
    UINT8 payload[0];
} CommandHeader; 
```

我还建议使用标准类型`uint16_t`和`uint8_t`，定义在`<stdint.h>`（假设你的编译器支持它；它在 C99 中也是新的）。

（实际上，以下划线开头的标识符规则稍微复杂一些。引用[N1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)，该标准的最新草案，第 7.1.3 节：

> *   以下划线和大写字母或另一个下划线开头的所有标识符始终保留用于任何用途。
> *   所有以下划线开头的标识符始终保留用作普通和标记名称空间中具有文件范围的标识符。

还有更多类别的保留标识符。

但是，与其确定哪些标识符在文件范围内可以安全使用，哪些在其他范围内可以安全使用，不如避免定义任何以下划线开头的标识符要容易得多。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T03:16:53.203

我假设您在内存中有一些字节并且您想找到指向有效负载的指针？

```
typedef struct _CmdXHeader
{
    UINT8 len;
    UINT8* payload;
} CmdXhHeader;

typedef struct _CommandHeader
{
    UINT16 len;
    CmdXhHeader xhead;
} CommandHeader; 
```

然后，您可以将内存转换为指向 CommandHeader 的指针

```
uint8_t* my_binary_data = { /* assume you've got some data */ };

CommandHeader* cmdheader = (CommandHeader*) my_binary_data;

// access the data
cmdheader->xhead.payload[0]; 
```

重要的！除非你打包你的结构，否则它可能会在单词边界上对齐并且不可移植。有关如何打包结构的特定语法，请参阅您的编译器文档。

另外，如果您正在使用字节（即从文件或线路读取），我只会执行您所显示的操作。如果您是数据的创建者，那么我衷心建议您反对您所展示的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:09:51.747

```
 struct _CommandHeader *commandHeader = malloc(sizeof(struct _CommandHeader)+
                                  sizeof(struct _CmdXHeader)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T04:12:00.677

在 C99 中最好使用有效载荷 [] 而不是有效载荷 [0]。一些 C99 编译器不鼓励使用零长度数组。因此，如果您在这里遇到错误：

```
typedef struct CommandHeader
{
    UINT16 len;
    UINT8 payload[0];
} CommandHeader; 
```

您可以随时将其更正为：

```
typedef struct CommandHeader
{
    UINT16 len;
    UINT8 payload[];
} CommandHeader; 
```

# python - 渲染时出现 ImportError：没有名为 app 的模块

> ID：14611330
> 
> 赞同：3
> 
> 时间：2013-01-30T18:39:43.727
> 
> 标签：python, django, pythonanywhere

我在[pythonanywhere](https://www.pythonanywhere.com)上运行一个 twitter 应用程序，该应用程序在 localhost 开发服务器上运行良好，但是当我在[pythonanywhere](https://www.pythonanywhere.com)上运行它时，我得到了这个错误：

```
2013-01-30 20:04:12,843 :Traceback (most recent call last):
2013-01-30 20:04:12,843 :  File "/usr/local/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 272, in __call__
2013-01-30 20:04:12,843 :    response = self.get_response(request)
2013-01-30 20:04:12,844 :  File "/usr/local/lib/python2.7/site-packages/django/core/handlers/base.py", line 169, in get_response
2013-01-30 20:04:12,844 :    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
2013-01-30 20:04:12,844 :  File "/usr/local/lib/python2.7/site-packages/django/core/handlers/base.py", line 203, in handle_uncaught_exception
2013-01-30 20:04:12,844 :    return debug.technical_500_response(request, *exc_info)
2013-01-30 20:04:12,844 :  File "/usr/local/lib/python2.7/site-packages/django/views/debug.py", line 59, in technical_500_response
2013-01-30 20:04:12,845 :    html = reporter.get_traceback_html()
2013-01-30 20:04:12,845 :  File "/usr/local/lib/python2.7/site-packages/django/views/debug.py", line 151, in get_traceback_html
2013-01-30 20:04:12,845 :    return t.render(c)
2013-01-30 20:04:12,845 :  File "/usr/local/lib/python2.7/site-packages/django/template/base.py", line 123, in render
2013-01-30 20:04:12,845 :    return self._render(context)
2013-01-30 20:04:12,845 :  File "/usr/local/lib/python2.7/site-packages/django/template/base.py", line 117, in _render
2013-01-30 20:04:12,845 :    return self.nodelist.render(context)
2013-01-30 20:04:12,845 :  File "/usr/local/lib/python2.7/site-packages/django/template/base.py", line 744, in render
2013-01-30 20:04:12,846 :    bits.append(self.render_node(node, context))
2013-01-30 20:04:12,846 :  File "/usr/local/lib/python2.7/site-packages/django/template/debug.py", line 73, in render_node
2013-01-30 20:04:12,846 :    result = node.render(context)
2013-01-30 20:04:12,846 :  File "/usr/local/lib/python2.7/site-packages/django/template/debug.py", line 90, in render
2013-01-30 20:04:12,846 :    output = self.filter_expression.resolve(context)
2013-01-30 20:04:12,846 :  File "/usr/local/lib/python2.7/site-packages/django/template/base.py", line 536, in resolve
2013-01-30 20:04:12,847 :    new_obj = func(obj, *arg_vals)
2013-01-30 20:04:12,847 :  File "/usr/local/lib/python2.7/site-packages/django/template/defaultfilters.py", line 695, in date
2013-01-30 20:04:12,847 :    return format(value, arg)
2013-01-30 20:04:12,847 :  File "/usr/local/lib/python2.7/site-packages/django/utils/dateformat.py", line 285, in format
2013-01-30 20:04:12,847 :    return df.format(format_string)
2013-01-30 20:04:12,847 :  File "/usr/local/lib/python2.7/site-packages/django/utils/dateformat.py", line 30, in format
2013-01-30 20:04:12,847 :    pieces.append(force_unicode(getattr(self, piece)()))
2013-01-30 20:04:12,848 :  File "/usr/local/lib/python2.7/site-packages/django/utils/dateformat.py", line 191, in r
2013-01-30 20:04:12,848 :    return self.format('D, j M Y H:i:s O')
2013-01-30 20:04:12,848 :  File "/usr/local/lib/python2.7/site-packages/django/utils/dateformat.py", line 30, in format
2013-01-30 20:04:12,848 :    pieces.append(force_unicode(getattr(self, piece)()))
2013-01-30 20:04:12,848 :  File "/usr/local/lib/python2.7/site-packages/django/utils/encoding.py", line 71, in force_unicode
2013-01-30 20:04:12,848 :    s = unicode(s)
2013-01-30 20:04:12,848 :  File "/usr/local/lib/python2.7/site-packages/django/utils/functional.py", line 206, in __unicode_cast
2013-01-30 20:04:12,848 :    return self.__func(*self.__args, **self.__kw)
2013-01-30 20:04:12,849 :  File "/usr/local/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 81, in ugettext
2013-01-30 20:04:12,849 :    return _trans.ugettext(message)
2013-01-30 20:04:12,849 :  File "/usr/local/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 286, in ugettext
2013-01-30 20:04:12,849 :    return do_translate(message, 'ugettext')
2013-01-30 20:04:12,849 :  File "/usr/local/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 276, in do_translate
2013-01-30 20:04:12,849 :    _default = translation(settings.LANGUAGE_CODE)
2013-01-30 20:04:12,849 :  File "/usr/local/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 185, in translation
2013-01-30 20:04:12,850 :    default_translation = _fetch(settings.LANGUAGE_CODE)
2013-01-30 20:04:12,850 :  File "/usr/local/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 162, in _fetch
2013-01-30 20:04:12,850 :    app = import_module(appname)
2013-01-30 20:04:12,850 :  File "/usr/local/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
2013-01-30 20:04:12,850 :    __import__(name)
2013-01-30 20:04:12,850 :django.template.base.TemplateSyntaxError: Caught ImportError while rendering: No module named twitterApp 
```

什么可能导致此错误？我应该去哪里看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T06:12:29.837

如果可能是由 pythonanywhere 中的 wsgi.py 配置问题引起的，在本地环境中，django 可以很好地处理 python 路径和静态文件。根据pythonanywhere 部署文档中的这一[部分：](http://tutorial.pythonanywhere.com/django#existing-apps-manual-config)

1.  在 wsgi.py 中添加 sys.path 的正确路径

假设您的 Django 设置文件位于 /home/my_username/projects/my_project/settings.py'

```
path = '/home/my_username/projects'
if path not in sys.path:
    sys.path.append(path)
os.environ['DJANGO_SETTINGS_MODULE'] = 'my_project.settings'
from my_project.myapp.models import Kitchen, Sink 
```

**请注意：my_project 前缀是必需的。**

2.static文件应该处理好

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns += staticfiles_urlpatterns() 
```

根据文件检查这两点应该解决这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-30T22:08:17.203

我的应用程序有完全相同的问题......问题原来是文件权限。如果app目录没有执行权限，则导入失败。

# c++ - Windows 8 Store App，在异步调用中使用静态类成员

> ID：14611332
> 
> 赞同：0
> 
> 时间：2013-01-30T18:39:59.080
> 
> 标签：c++, windows-runtime, c++-cx, winrt-async

我正在编写一个相当一致地执行多个套接字操作的应用程序，并且有一个类似于 javascript 范例（ eventlistener.on(, ) / eventlistener.emit() ）的事件消息传递系统。我从一个异步调用中输出一些调试信息，该调用附加了一个带有调试信息的 TextBlock xaml 元素。当我在异步函数之外发出相同的事件时，它工作正常。我已经用互斥体包装了我的事件 on/emit 调用，我认为这足以让我写入 TextBlock。

可视化事件过程：

> [class]->listener->emit(<type>,<data>)->[Dispatcher]->[Listeners(<type>)]->lambda([class],<data>)

我对 WinRT 的异步函数和 Windows 8 UI/Metro/Modern 意识形态不够熟悉，不知道是否有一种特殊的方法可以让我从线程中附加 TextBlock，或者是否有更好的方法来解决这个问题。

简而言之，是否可以从异步函数中附加一个 Textblock，如果是这样，我需要做一些特别的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:01:50.460

只要更新在 UI/调度程序线程上，就应该没有什么可以阻止您从异步函数更新 TextBlock。特定线程上的异步函数调用通常在同一线程上结束。

# javascript - javascript另存为遇见

> ID：14611333
> 
> 赞同：1
> 
> 时间：2013-01-30T18:40:07.953
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

> **可能重复：**
> [使用 JavaScript 在 Firefox 中保存 HTML 页面](https://stackoverflow.com/questions/5777000/save-a-html-page-in-firefox-using-javascript)

谁能建议一种方法来调用“另存为”对话框以使用 JavaScript 方法在本地保存网页？我已经尝试过`document.execCommand()`在 IE 上运行良好，但在其他浏览器中不行。我不能使用 PHP 或其他任何东西。

# sharepoint - SharePoint Online 2010 功能区中的自定义链接/按钮

> ID：14611336
> 
> 赞同：2
> 
> 时间：2013-01-30T18:40:17.487
> 
> 标签：sharepoint, sharepoint-2010, ribbon

我是 SharePoint 的新手，我希望向功能区添加一些自定义链接或按钮（如果有意义的话，只希望这些在高级功能区菜单控件未显示时显示在功能区上）。我在 SharePoint Online（2010 版，但很快将转换为 2013）。

这是我要添加链接或按钮的位置的屏幕截图。

![封闭色带区域的右侧](../Images/2082b43a6e05c3b3b965bcd379cf8842.png)

我认为 v4.master 中控制此区域的代码部分就是此部分，但我无法让我的链接显示在正确的区域中。

```
<div class="s4-trc-container-menu">
     <div>
        <wssuc:Welcome id="IdWelcome" runat="server" EnableViewState="false">
        </wssuc:Welcome>
        <wssuc:MUISelector ID="IdMuiSelector" runat="server"/>
    </div> 
</div> 
```

有什么建议么？非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:58:50.283

假设您使用 v4.master 作为母版页（默认），有一个 ID 为“RibbonTabRowRight”的控件围绕着您发布的代码片段。

您要添加的任何链接和按钮都应位于此控件中，并且位于欢迎菜单（您发布的代码段）之前。是使用简单的锚标记还是更复杂的控件取决于您的要求。

例子：

```
<SharePoint:SPRibbonPeripheralContent
                runat="server"
                Location="TabRowRight"
                ID="RibbonTabRowRight"
                CssClass="s4-trc-container s4-notdlg">
    <SharePoint:DelegateControl runat="server" ID="GlobalDelegate0" ControlId="GlobalSiteLink0" />
     <a href="#" tabindex="-1" style="display:none"></a><a href="#" tabindex="-1" style="display:none"></a>
     <div class="s4-trc-container-menu">
         <a href="EXAMPLE.ASPX" />MY EXAMPLE</a>
         <div>
            <wssuc:Welcome id="IdWelcome" runat="server" EnableViewState="false">
            </wssuc:Welcome>
            <wssuc:MUISelector ID="IdMuiSelector" runat="server"/>
        </div>
    </div>
    <SharePoint:DelegateControl ControlId="GlobalSiteLink2" ID="GlobalDelegate2" Scope="Farm" runat="server" />
    <span>
        <span class="s4-devdashboard">
            <Sharepoint:DeveloperDashboardLauncher
                ID="DeveloperDashboardLauncher"
                NavigateUrl="javascript:ToggleDeveloperDashboard()"
                runat="server"
                ImageUrl="/_layouts/images/fgimg.png"
                Text="<%$Resources:wss,multipages_launchdevdashalt_text%>"
                OffsetX=0
                OffsetY=222
                Height=16
                Width=16 />
        </span>
    </span>
            </SharePoint:SPRibbonPeripheralContent> 
```

# opengl-es - 为什么顶点显示为白色而不是顶点缓冲区中的颜色？

> ID：14611337
> 
> 赞同：0
> 
> 时间：2013-01-30T18:40:23.163
> 
> 标签：opengl-es, opengl-es-2.0, glkit

我创建了 3 个缓冲区来分隔顶点位置、颜色和索引数据。

顶点正确呈现为正方形，但它是白色而不是数组中定义的颜色`dynamicVertexData`。

我正在使用 OpenGL ES 2.0，但我认为我犯了一个一般的 OpenGL 错误。

谁能发现它？

```
typedef struct _vertexStatic
{
    GLfloat position[2];
} vertexStatic;

typedef struct _vertexDynamic
{
    GLubyte color[4];
} vertexDynamic;

enum {
    ATTRIB_POSITION,
    ATTRIB_COLOR,
    NUM_ATTRIBUTES
};

// Separate buffers for static and dynamic data.
GLuint    staticBuffer;
GLuint    dynamicBuffer;
GLuint    indexBuffer;

const vertexStatic staticVertexData[] = {

    {0, 0},
    {50, 0},
    {50, 50},
    {0, 50},
};

vertexDynamic dynamicVertexData[] = {

    {0, 0, 255, 255},
    {0, 0, 255, 255},
    {0, 0, 255, 255},
    {0, 0, 255, 255},
};

const GLubyte indices[] = {

    0, 1, 2,
    2, 3, 0,
};

- (void)setupGL {

    CGSize screenSize = [UIApplication currentSize];
    CGSize screenSizeHalved = CGSizeMake(screenSize.width/2, screenSize.height/2);

    numIndices = sizeof(indices)/sizeof(indices[0]);

    [EAGLContext setCurrentContext:self.context];

    glEnable(GL_CULL_FACE); // Improves perfromance

    self.effect = [[GLKBaseEffect alloc] init];

    // The near and far plane are measured in units from the eye
    self.effect.transform.projectionMatrix = GLKMatrix4MakeOrtho(-screenSizeHalved.width,
                                                                     screenSizeHalved.width,
                                                                     -screenSizeHalved.height,
                                                                     screenSizeHalved.height,
                                                                     0.0f, 1.0f);

    self.preferredFramesPerSecond = 30;

    CreateBuffers();
}

void CreateBuffers()
{
    // Static position data
    glGenBuffers(1, &staticBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, staticBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(staticVertexData), staticVertexData, GL_STATIC_DRAW);

    // Dynamic color data
    // While not shown here, the expectation is that the data in this buffer changes between frames.
    glGenBuffers(1, &dynamicBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, dynamicBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(dynamicVertexData), dynamicVertexData, GL_DYNAMIC_DRAW);

    // Static index data
    glGenBuffers(1, &indexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);
}

void DrawModelUsingMultipleVertexBuffers()
{
    glBindBuffer(GL_ARRAY_BUFFER, staticBuffer);
    glVertexAttribPointer(ATTRIB_POSITION, 2, GL_FLOAT, GL_FALSE, sizeof(vertexStatic), 0);
    glEnableVertexAttribArray(ATTRIB_POSITION);

    glBindBuffer(GL_ARRAY_BUFFER, dynamicBuffer);
    glVertexAttribPointer(ATTRIB_COLOR, 4, GL_UNSIGNED_BYTE, GL_TRUE, sizeof(vertexDynamic), 0);
    glEnableVertexAttribArray(ATTRIB_COLOR);

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
    glDrawElements(GL_TRIANGLES, sizeof(indices)/sizeof(GLubyte), GL_UNSIGNED_BYTE, (void*)0);
    }

- (void)tearDownGL {

    [EAGLContext setCurrentContext:self.context];

    glDeleteBuffers(1, &_vertexBuffer);
    glDeleteBuffers(1, &_indexBuffer);
    //glDeleteVertexArraysOES(1, &_vertexArray);

    self.effect = nil;    

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if (!self.context) {
        NSLog(@"Failed to create ES context");
    }

    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
//    view.drawableMultisample = GLKViewDrawableMultisample4X; // Smoothes jagged lines. More processing/memory
    view.drawableColorFormat = GLKViewDrawableColorFormatRGB565; // Lower colour range. Less processing/memory
    [self setupGL];
}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {

    glClearColor(0.0, 0.0, 0.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    [self.effect prepareToDraw];

    DrawModelUsingMultipleVertexBuffers();
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:54:05.243

`ATTRIB_COLOR`您已使用`glVertexAttribPointer`和入口点启用顶点缓冲区并将其绑定到绑定点`glEnableVertexAttribArray`，但未指定如何处理它们。

OpenGLES 2.0 移除了大部分固定功能的渲染管线，因此您需要编写一个顶点着色器来使用顶点缓冲区。在 1.X 中，您可以使用[`glColorPointer`](http://www.khronos.org/opengles/sdk/1.1/docs/man/glColorPointer.xml)入口点为固定功能管道指定顶点颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:34:22.583

当你设法让 openGL ES 2.0 运行时——这在启动时可能很困难——但你没有得到你想要的图纸，我绝对推荐在设备上运行，这使得 XCode 的额外功能能够调试 openGL

![在此处输入图像描述](../Images/1693050772fc84963f7c9f63274ceaad.png)

那么你也能 ：

*   逐步完成您的循环和绘图调用，并查看刷新的颜色/深度缓冲区图像
*   查看所有有界 gl 对象
*   查看 VAOs 内容（您可以看到它指向的实际数据，对查找丢失的数据/指针很有用）
*   程序：您可以在 GPU 上实时编辑着色器（gl 绑定对象 -> 程序：双击！）对润色着色器很有用

如果您很好奇，这对于深入了解 GLKit 的 GLKBaseEffect 内部工作也非常有用——实际上它只是生成一个 openGL 程序，其特定的顶点和片段着色器代码取决于您设置的属性......

您忘记的属性是 GLKBaseEffect`colorMaterialEnabled`

# bash - 在 UNIX shell 中复合语句“;”的区别 和 ”＆＆”

> ID：14611340
> 
> 赞同：0
> 
> 时间：2013-01-30T18:40:29.260
> 
> 标签：bash

假设我想在 /tmp 中触摸 mickymouse

我可以

```
cd /tmp ; touch mickymouse 
```

或者我可以

```
cd /tmp && touch mickymouse 
```

我不清楚这两个陈述之间有什么细微的（或不那么细微的）差异。

希望对两者之间的差异发表评论。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T18:43:49.200

`;`终止语句，`&&`而是逻辑与。

```
cd /tmp ; touch mickymouse 
```

在上面，即使`cd /tmp`失败，`touch mickymouse`仍然会被执行。

在第二个中，

```
cd /tmp && touch mickymouse 
```

`touch mickymouse`仅在`cd /tmp`成功时执行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:44:30.013

看到这`&&`是特殊操作，其中 && 的 RHS 始终仅在 LHS of`&&`为真时才执行。

或者只有在`/tmp`可用时，您才能`touch mickymouse`.

而在较早的情况下，它只是返回一个`/tmp`不可用的错误。

或者你可以有效地做

```
touch /tmp/mickymouse 
```

# javascript - 匿名函数声明的语法错误，但不是在有效语句之后

> ID：14611341
> 
> 赞同：1
> 
> 时间：2013-01-30T18:40:33.850
> 
> 标签：javascript

我只是花了很长时间在 Promise 中挖掘回调，想知道为什么不调用某些回调。最后的问题是声明不正确，而不是

```
 Promise.when(null).then(function () {
            var p = new Promise();
            p.fail(new Error("some message"));
            return p;
        }).then(function () {
            console.log("success");
        }, function (err) {
            console.log("failure");
        }); 
```

我做了

```
 Promise.when(null).then(function () {
            var p = new Promise();
            p.fail(new Error("some message"));
            return p;
        }).then(function () {
            console.log("success");
        }), function (err) {
            console.log("failure");
        }; 
```

无论 Promise 的实现细节如何，它都归结为一件事：

```
function(){};//throws SyntaxError
"something valid, or function call", function(){};//no error 
```

我希望有人向我解释这一点。为什么第一个是抛出`SyntaxError`而后者是有效的（至少在浏览器控制台中）？它似乎声明了匿名函数。当我尝试时也会发生同样的事情

```
eval("function(){};//throws SyntaxError")
eval("'lala',function(){};//no error") 
```

那么有人可以解释一下为什么第一个无效而后者无效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:48:21.433

以关键字“function”开头的语句必须是有效的函数声明语句。这需要函数的名称。

在表达式（或表达式语句）中，该规则是不同的；不需要名称，因为函数在该上下文中充当值。那时不需要名字。

因此：

```
function myFunction() {
  // ...
} 
```

是一个函数声明语句。这个：

```
5 + function() {}; 
```

是一个表达式语句（一个愚蠢的语句，但 JavaScript 没问题）。同样，没有错误的示例是带有逗号运算符的表达式：

```
"lala", function() {}; 
```

关键字“function”没有出现在这两个表达式的开头，因此解析器不坚持函数的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:48:30.367

您的原始代码不起作用，因为正如您所知道的，第二个函数没有作为参数传递 - 您将结束括号放在函数之前。它没有引起错误，因为 JavaScript 将其识别为函数表达式。您对逗号运算符的使用告诉 JavaScript 期望下一个语句是一个表达式。

函数*声明*不能​​是匿名的，但函数*表达式*可以。一个独立的匿名函数看起来像一个缺少 JavaScript 标识符的函数声明。但是，结合运算符，JavaScript 将匿名函数视为运算符的操作数表达式。

该语句`'lala',function(){}`由一个表达式 ( `'lala'`) 后跟一个运算符 ( `,`) 和一个函数表达式组成。这种说法类似：`0,function(){}`. `Promise.when(...).then(...)`也是一个有效的表达式，所以`Promise.when(...).then(...),function(){}`工作原理是一样的。

# python - Python：我正在为课堂制作一个简单的计算器。这段代码有什么问题？

> ID：14611344
> 
> 赞同：-2
> 
> 时间：2013-01-30T18:40:42.600
> 
> 标签：python, calculator

我的老师要求我制作一个计算器，可以计算提交价格的 15% 小费。我遵循了这个 python 应用程序的在线教程。在做老师要求的东西之前，我做了一个简单的加减乘除计算器练习。在 YouTube 视频中，我跟踪了在他的计算机上运行的 python 应用程序。我在 Python Shell 中收到“无效语法”错误。我正在使用 Python 3.3.0。谢谢你。

**编辑：**我遵循了一个不同的教程，弄清楚了如何完成我的项目。我遇到的唯一问题是同时使用常规整数（1、2、3、4 等）和浮点整数（4.36、5.45 等）。

* * *

```
print("Welcome to the calculator!")

mealPrice = int(input("Enter your meal price:"))

asw = mealPrice * 0.15

print("The tip you owe is: ", asw) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:43:32.313

因为 y 是字符串

```
y = int(raw_input("Input second integer: ")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:19:23.630

而不是转换为 int （因此无论您的值是什么 - 例如，2.99 变为 2）转换为 float 应该可以很好地解决问题；即使您使用 2.0*0.15 而不是 2*0.15，小费计算也应该有效。

这显然只有在您知道可以期待什么输入时才有效。如果有人输入任何无效的内容，它将非常失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:14:44.857

这有很多改变要做。首先，第一行代码应该是：

```
print ("Hello") 
```

然后，raw_input() 应该变成 input()。

接下来，除了在定义函数时的第二行之外，calc() 之后不应有冒号或分号。

代码应该看起来像这样。试试看。

```
print ("Hello")
def calc():
    x = int(input("Input first integer: "))
    y = int(input("Input second integer: "))
    type = str.lower(input("(A)dd, (S)ubstract, (M)ultiply, (D)ivide \n"))
    if type != "a" and type != "s" and type != "m" and type != "d":
        print ("Sorry, the command you entered is not valid.")
        calc()
    else:
        if type =="a":
            print ("The result is '" + str(x+y) + "'")
        elif type == "s":
            print ("The result is '" + str(x-y) + "'")
        elif type =="m":
            print ("The result is '" + str(x*y) + "'")
        elif type == "d":
            print ("The result is '" + str(float(x)/float(y)) + "'")

        if int(input("Enter 1 if you would like to perform another calculation? \n")) == 1:
            calc()
        else:
            exit()
calc() 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:46:47.813

我发现您的代码存在一些问题。

您`print`在第一行使用 会给您带来麻烦，因为`print`它是 Python 3 中的一个函数。您应该将其称为`print("hello")`.

在第 8 行，您有一个额外的冒号：

```
calc(): 
```

摆脱它。

最后，调用时不需要分号`calc()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-16T15:01:05.793

如果要使用整数：

```
mealprice = int(input("Enter your meal price:")) 
```

如果你想使用浮动：

```
mealprice = float(input("Enter your meal price:")) 
```

建议使用浮点数，因为您还可以使用单个数字，例如 1、2、3 等，也可以使用浮点数。

我还创建了自己的计算器，它有 6 个功能：

```
1 = Add  
2 = Subtract  
3 = Multiply  
4 = Divide  
5 = Round Off  
6 = Get Remainder 
```

就是这么简单。
我还没有使用四舍五入。
如果你想要那个代码问我我会给你。
如果您想了解更多信息，我已准备好提供给您。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-30T19:10:43.503

我想到了。我应该使用：

```
int(float(input("Enter your meal price:"))) 
```

谢谢大家！

# java - 如何从输入的信息（即名称）中创建一个数组，然后将其用作代码中的对象？

> ID：14611346
> 
> 赞同：0
> 
> 时间：2013-01-30T18:40:49.720
> 
> 标签：java, arrays

我一直在阅读它，但我发现的每个问题都要求稍微不同的东西，例如只想要一个字母作为他们的数组，或者使用不同的语言（我是新手，只在时刻），所以我在这里。

我想设置一个数组，使用用户的输入作为他们的名字。

到目前为止，我假设这是声明行，稍后我使用输入行在数组中定义一个值（我也不确定该怎么做）

```
String[] array = {"name"}; 
```

但我不知道如何例如 print.out 对象或跟上哪个名称将是什么值。感谢您花时间教我！

编辑以进一步澄清。我正在尝试编写一个小应用程序，要求用户提供大量姓名、地址和电话号码（键入姓名 -> 键入姓名的地址 -> 键入姓名的电话号码，询问他们是否要添加另一个人，如果是，那么回去问另一个名字）

我不确定如何设置字符串数组或如何在整个过程中使用它。但是，多亏了您的输入并在呼吸新鲜空气后回来，我对如何为谷歌措辞有了更好的想法。感谢你们的帮助，即使只是为了提出一个更清晰的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:56:31.717

数组是一系列值。您已经创建了一个字符串长的字符串数组。要访问特定数组的值，请使用**数组下标表示法：**数组名称后跟一对方括号 ( `[]`)，索引位于它们之间。

```
String[] anArrayOfStrings = {"string0", "string1", "string2"};

anArrayOfStrings[0]; //the first element

System.out.println(anArrayOfStrings[1]); //print the second element

anArrayOfStrings[2] = "new string value"; //assign the third element to a new value

if (anArrayOfStrings[0].equals("string0") //evaluate the first element and call a method
{
     //this block will execute anArrayOfStrings[0] is "string0"
} 

anArrayOfStrings[3]; //error, index out of bounds 
```

简单地声明数组将是

```
String[] names; 
```

在您的代码中，您都使用初始化列表在同一行中声明和分配它。要分配单个元素，请使用`[]`符号。请注意，一旦您将列表初始化为只有一个 String 长，它就不会变得比没有重新分配的更长。要声明任意大小的数组，可以使用：

```
 String[] arrayWithInitialSize = new String[5]; //holds five strings, each null to begin with 
```

# wordpress - Wordpress Multisite - 这是个好主意吗？

> ID：14611348
> 
> 赞同：4
> 
> 时间：2013-01-30T18:40:58.993
> 
> 标签：wordpress

我在公司的任务是制定一个计划来处理我们即将引入的 50 个新客户。每个客户都是直接相关的，并且隶属于一个拥有所有客户的“伞形”公司。所有 50 个站点都非常相似，每个站点都针对不同的公司，因此它们的主题可能会有所不同。

我们计划为所有 50 个站点提供 10 个主题供他们选择。所以有些会非常相似，有些根本不会。

WordPress 是最佳途径吗？我对 Wordpress 非常熟悉。我以前使用过 Expression Engine，但不像我使用 Wordpress 那样精明，而且我知道 Expression Engine 也具有多站点功能。

所以我的问题是，Wordpress Multi Site 是最好的途径吗？在我的情况下你会怎么做？

另外，如果我们想创建一个可以访问 50 个站点中的 10 个的用户，这可能吗？我们需要缩小权限。

此外，每个站点都需要自己的域名。那可能吗？

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T00:12:04.280

是的，Multisite 可以轻松处理这个问题。

要运行映射域，使用[@Calle](https://stackoverflow.com/questions/14611348/wordpress-multisite-is-this-a-good-idea#comment20403116_14611559)引用的[MU 域映射](http://wordpress.org/extend/plugins/wordpress-mu-domain-mapping/)插件，您需要将网络设置为子域（与设置目录相反）。并且映射的域必须设置为指向 WordPress Multisite 安装目录的 Parked Domains。

多站点用户管理可能有点棘手。
如果网络的某个站点对其用户的管理*确实*有特殊要求，那你可能会很难过。
**网络的所有用户在****所有站点**中都被赋予了`Subscriber`状态（这可以被屏蔽）。您可以轻松地将一位用户分配为 10 个站点的管理员、授予其他用户超级管理员访问权限、使用网络角色管理等。

 **您可以拥有几个具有企业标识的父主题，并创建子主题以适应特定需求。

有用信息：

*   [Multisite 101](http://halfelf.org/ebooks/wordpress-multisite-101/)，由它的一位向导介绍 MS，如果它对您有用，请不要忘记提示罐；）

    > 这本电子书力求将所有内容整合在一起，向您解释入门所需的技能，并引导您进入下一步：运行您自己的网络。将其视为运行您自己的多站点的基本教程。

*   [Multisite Rationale](https://docs.google.com/document/d/1h1CejwUCKU9SNLtTwHxxZKfGjTWtUkpiMM4wyZdQS8s/edit?hl=en_US#)，MS 网络实施的真实案例研究，如果您能找到类似的 Expression Engine 文档，那么您可以很快做出选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:53:14.290

Wordpress Multisite 可以基于路径（www.domain.com/site1、www.domain.com/site2）或基于域（www.site1.domain.com、www.site2.domain.com）。我相信这些网站中的每一个都有不同的用户；我不确定您关于设置只能访问一定数量站点的用户的问题，但您可以设置一个可以访问网络上所有站点的“主用户”。如果您为 MS 使用基于域的网络，则可以进入您为 50 个站点购买的每个域，并使用 DNS/.htaccess 将它们转发到各个 Wordpress 多站点。我希望这是有道理的 ：）**

# xml - Java.lang.NoClassDefFounderError：无法初始化类 groovy.net.http.ParserRegistry

> ID：14611349
> 
> 赞同：0
> 
> 时间：2013-01-30T18:40:59.120
> 
> 标签：xml, groovy, httpbuilder

我目前在使用 Groovy 时在 SoapUi 中收到此错误消息。

最初，代码没有编译，即出现“无法解析类 HTTPBuilder”错误。为了解决这个问题，我从[http://repository.codehaus.org/org/codehaus/groovy/modules/http-builder/http-builder/0.6/](http://repository.codehaus.org/org/codehaus/groovy/modules/http-builder/http-builder/0.6/)下载了 jar 文件 并将其粘贴到 C:\Program Files\SmartBear\soapUI -Pro-4.5.1\bin\ext 解决了这个问题。

现在重新运行相同的脚本时出现 Java.lang.NoClassDefFounderError 错误：无法初始化类 groovy.net.http.ParserRegistry

类 SomeClassName {

def RequestBody = SomeClassName.Method() // 这个方法返回一个 XML

静态定义方法名（）

def http = new HTTPBuilder(' [http://www.SomeWebServiceLocation.com](http://www.SomeWebServiceLocation.com) ')

```
http.request(Method.POST, ContentType.URLENC) 

{
      uri.path = "/"
      body = RequestBody   
} 
```

}

当我注释掉调用此方法的位置时，即 SomeClassName.Methodname() ，该类中的其他所有内容似乎都可以正常工作。

有人可以帮忙.. :'( :'(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:22:36.317

http-builder 依赖于额外的库。仅下载 http-builder-0.6.jar 是不够的。你应该下载[http-builder-0.6-all.zip](http://repository.codehaus.org/org/codehaus/groovy/modules/http-builder/http-builder/0.6/http-builder-0.6-all.zip)，解压它并将你在依赖库中找到的所有 jar 文件复制到 C:\Program Files\SmartBear\soapUI-Pro-4.5.1\bin\ext

您收到此错误的原因可能是因为 ParserRegistry 类依赖于可以在这些附加库中找到的其他类。

# google-drive-api - 创建谷歌驱动客户端程序

> ID：14611350
> 
> 赞同：-3
> 
> 时间：2013-01-30T18:41:01.463
> 
> 标签：google-drive-api

我想创建一个基于 java 的桌面应用程序，它可以从谷歌驱动器上传、下载和共享文件。实际上我正在创建一个电子邮件客户端和文件共享客户端应用程序。我想让我的用户使用我的 java 应用程序的前端共享他们的文件。我还想在这个应用程序中自动将 gmail 附件存储到谷歌驱动器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:29:08.820

查看 Google Drive SDK 文档中的 Java 快速入门，了解如何编写将文件上传到 Google Drive 的命令行 Java 应用程序：

[https://developers.google.com/drive/quickstart-java](https://developers.google.com/drive/quickstart-java)

# regex - VBS RegExp 错误 - 从行首提取文本

> ID：14611351
> 
> 赞同：0
> 
> 时间：2013-01-30T18:41:02.567
> 
> 标签：regex, vbscript

我需要从字符串中提取前 3 到 13 个字符，从行首开始到第一次遇到空格时结束。

以下代码我无法开始工作。我经常收到“无效程序”错误。更改模式有时会使错误消失，但它永远不会导致我需要的匹配。

请帮忙。

编辑：我发现这个模式“/[^]*/”应该做我想做的事（我认为），但是现在当我执行代码时，我在 strOut = match.SubMatches(0) 行出现错误。知道为什么吗？

```
 ' Set the pattern to find the data we would like to test; 
re_Name.Pattern = "^xe\-1/1/1"
re_Name.IgnoreCase = True
re_Name.Multiline = True

vLines = Split(strNames, vbcrlf)
For Each strLine in vLines
Set matches = re_Name.Execute(strLine)
    For Each match in matches
        strOut = match.SubMatches(0)
        MsgBox strOut
        Next
    Next 
```

我正在搜索的示例：

```
xe-0/1/1
xe-0/3/2.0
ge-11/2/1
ae0
ae0.3156 
```

在上下文中可能会喜欢的示例：

```
xe-0/0/0        up    up   xxxxxxxxxxJxx0/0xToxBBxxx1 x;
ae0.202         up    up   ;xxxxxx1;xxxxxxxxixxxxx 
ge-11/3/0.0     up    down Rxxxxxxx RESERVEDing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:57:47.837

我认为`strOut = match.SubMatches(0)`应该是`strOut = match.Value`因为您没有捕获任何子匹配，因为您没有使用方括号来捕获任何内容。

如果您只想将字符匹配到第一个空格，您可以使用

```
 re_Name.Pattern = "^\S+" 
```

`\S`匹配任何非空格字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:58:26.150

您的正则表达式缺少捕获 () 以使子匹配成为可能。在空间上使用拆分可能是一种风险较小的方法。

# python - 带有元组字符串表示的格式错误的字符串 ValueError ast.literal_eval()

> ID：14611352
> 
> 赞同：52
> 
> 时间：2013-01-30T18:41:06.940
> 
> 标签：python, parsing, python-2.x, abstract-syntax-tree, representation

我正在尝试从文件中读取元组的字符串表示形式，并将元组添加到列表中。这是相关的代码。

```
raw_data = userfile.read().split('\n')
for a in raw_data : 
    print a
    btc_history.append(ast.literal_eval(a)) 
```

这是输出：

```
(Decimal('11.66985'), Decimal('0E-8'))
Traceback (most recent call last):

File "./goxnotify.py", line 74, in <module>
    main()
  File "./goxnotify.py", line 68, in main
    local.load_user_file(username,btc_history)
  File "/home/unix-dude/Code/GoxNotify/local_functions.py", line 53, in load_user_file
    btc_history.append(ast.literal_eval(a))
  File "/usr/lib/python2.7/ast.py", line 80, in literal_eval
    return _convert(node_or_string)

  `File "/usr/lib/python2.7/ast.py", line 58, in _convert
   return tuple(map(_convert, node.elts))
  File "/usr/lib/python2.7/ast.py", line 79, in _convert
   raise ValueError('malformed string')
   ValueError: malformed string 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-08-12T01:25:15.947

`ast.literal_eval`（位于`ast.py`_ `ast.parse`不幸的是，代码根本无法扩展，因此要添加`Decimal`到代码中，您需要复制所有代码并重新开始。

对于更简单的方法，您可以使用`ast.parse`module 来解析表达式，然后使用`ast.NodeVisitor`or`ast.NodeTransformer`来确保没有不需要的语法或不需要的变量访问。`compile`然后用and编译`eval`得到结果。

`literal_eval`该代码与该代码实际使用的代码略有不同`eval`，但在我看来更容易理解，并且不需要深入挖掘 AST 树。它专门只允许某些语法，明确禁止例如 lambdas、属性访问（`foo.__dict__`非常邪恶）或访问任何被认为不安全的名称。它可以很好地解析您的表达式，并且作为额外的我还添加了`Num`（浮点数和整数）、列表和字典文字。

此外，在 2.7 和 3.3 上的工作方式相同

```
import ast
import decimal

source = "(Decimal('11.66985'), Decimal('1e-8'),"\
    "(1,), (1,2,3), 1.2, [1,2,3], {1:2})"

tree = ast.parse(source, mode='eval')

# using the NodeTransformer, you can also modify the nodes in the tree,
# however in this example NodeVisitor could do as we are raising exceptions
# only.
class Transformer(ast.NodeTransformer):
    ALLOWED_NAMES = set(['Decimal', 'None', 'False', 'True'])
    ALLOWED_NODE_TYPES = set([
        'Expression', # a top node for an expression
        'Tuple',      # makes a tuple
        'Call',       # a function call (hint, Decimal())
        'Name',       # an identifier...
        'Load',       # loads a value of a variable with given identifier
        'Str',        # a string literal

        'Num',        # allow numbers too
        'List',       # and list literals
        'Dict',       # and dicts...
    ])

    def visit_Name(self, node):
        if not node.id in self.ALLOWED_NAMES:
            raise RuntimeError("Name access to %s is not allowed" % node.id)

        # traverse to child nodes
        return self.generic_visit(node)

    def generic_visit(self, node):
        nodetype = type(node).__name__
        if nodetype not in self.ALLOWED_NODE_TYPES:
            raise RuntimeError("Invalid expression: %s not allowed" % nodetype)

        return ast.NodeTransformer.generic_visit(self, node)

transformer = Transformer()

# raises RuntimeError on invalid code
transformer.visit(tree)

# compile the ast into a code object
clause = compile(tree, '<AST>', 'eval')

# make the globals contain only the Decimal class,
# and eval the compiled object
result = eval(clause, dict(Decimal=decimal.Decimal))

print(result) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-30T18:51:24.343

从[文档](http://docs.python.org/2/library/ast.html#ast.literal_eval)中`ast.literal_eval()`：

> 安全地评估表达式节点或包含 Python 表达式的字符串。**提供的字符串或节点只能由以下 Python 文字结构组成：字符串、数字、元组、列表、字典、布尔值和无。**

`Decimal`不在允许的事情清单上`ast.literal_eval()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-03T13:44:00.250

我知道这是一个老问题，但我认为找到了一个非常简单的答案，以防万一有人需要。

如果你把字符串引号放在你的字符串中（“'hello'”），ast_literaleval() 将完全理解它。

您可以使用一个简单的功能：

```
 def doubleStringify(a):
        b = "\'" + a + "\'"
        return b 
```

或者可能更适合这个例子：

```
 def perfectEval(anonstring):
        try:
            ev = ast.literal_eval(anonstring)
            return ev
        except ValueError:
            corrected = "\'" + anonstring + "\'"
            ev = ast.literal_eval(corrected)
            return ev 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-21T03:58:36.273

如果输入受信任（在您的情况下），则使用`eval()`而不是。`ast.literal_eval()`

```
raw_data = userfile.read().split('\n')
for a in raw_data : 
    print a
    btc_history.append(eval(a)) 
```

这适用于我在 Python 3.6.0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-29T06:59:05.163

就我而言，我解决了：

```
my_string = my_string.replace(':false', ':False').replace(':true', ':True')
ast.literal_eval(my_string) 
```

# php - 如何修复php中删除确认消息中的错误

> ID：14611354
> 
> 赞同：0
> 
> 时间：2013-01-30T18:41:10.603
> 
> 标签：php, confirmation

我有一些 PHP 代码正在尝试添加删除确认。但是导致错误...

```
$arr_data[$array_pos][] = 'a href="delete.php?pid='.$row['pid'].'"
    onclick="return confirm('Are you sure want to delete')">delete<'; 
```

`onclick`代码导致了问题。以我非常有限（零！）的知识，我找不到修复程序，因此将不胜感激。

```
onclick="return confirm('Are you sure want to delete')" 
```

（我删除了超链接 HTML 代码以便显示）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:43:04.193

您需要转义单引号。

```
$arr_data[$array_pos][] = '<a href="delete.php?pid=' . $row['pid'] . '" onclick="return confirm(\'Are you sure you want to delete?\')">Delete</a>'; 
```

# c# - 带有 BouncyCastle 的 C# 中的 PKCS12 客户端证书

> ID：14611357
> 
> 赞同：1
> 
> 时间：2013-01-30T18:41:27.450
> 
> 标签：c#, certificate, bouncycastle, pkcs#12

我需要为 Windows Phone 应用程序使用证书客户端 .pkcs12。我不能使用 X509Certificate 类，因为不允许使用 PKCS12。所以我下载了 BouncyCastle 类并制作了这个

```
try
{
    FileStream Cert = new FileStream 
                           ("certificate.pkcs12",FileMode.Open,FileAccess.Read);
    char[] password = new char[] { 'p','a','s','s','w','o','r','d' };
    Pkcs12Store certificate = new Pkcs12Store(Cert,password);
}     
catch (Exception e)
{
    Console.WriteLine(e.Message);
 } 
```

我得到这个例外：

```
 {System.TypeInitializationException: 
   The type initializer for 'Org.BouncyCastle.Asn1.Pkcs.PkcsObjectIdentifiers' 
    threw an exception. --->
     System.IO.FileNotFoundException: Could not load file or assembly 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:41:44.843

由于这是一个 FileNotFoundException，我可能与 BouncyCastle 无关。您确定文件在正确的位置并且使用了正确的文件名吗？

# git - 推送 git 标签时如何避免推送提交？

> ID：14611361
> 
> 赞同：0
> 
> 时间：2013-01-30T18:41:45.560
> 
> 标签：git

在 git 中标记时，我可以

推送所有新标签：

```
git push --tags 
```

或推送特定标签：

```
git push origin v1.5 
```

但在这两种情况下，任何新的未决提交也会被推出。如何避免推送提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:49:51.137

因为 git 中的标签除了是提交的别名之外“什么都不是”——你不能。它会不连贯地更改 git-base，新的克隆会看到标签，但无法将其签出。

如果您真的想破坏您的 git 远程存储库，并且您在托管 git 存储库的服务器上具有文件系统访问权限，则可以在`[.git]/refs/tags/`. 文件名将是标记名，内容将是引用提交的 sha1。

试图列出带有`git tag -l`结果的标签`error: refs/tags/<tagname> does not point to a valid object!`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:49:10.737

两种形式都不会将新的提交推送到远程，除非您推送的标签引用远程中尚不存在的提交。

# jakarta-ee - 两个或多个嵌入消息系统到jboss 4.x

> ID：14611362
> 
> 赞同：1
> 
> 时间：2013-01-30T18:41:45.853
> 
> 标签：jakarta-ee, jboss, jms, hornetq, jbossmq

我试图从 Jboss 4.0.5 GA 的默认 JbossMQ 迁移到嵌入的 HornetQ 2.2.14。我想知道是否有人知道是否可以运行嵌入多个消息系统的服务器？

提前致谢！

# scala - 是否有任何合适的方法可以直接从 Scala Parser Combinators 生成 [jpg、png 等] 语法图（和/或 AST）？

> ID：14611364
> 
> 赞同：16
> 
> 时间：2013-01-30T18:41:50.933
> 
> 标签：scala, dot, abstract-syntax-tree, parser-combinators

我知道的唯一方法不是“直接”：

*   转换为 ANTLR 格式并使用其自己的可视化工具
*   VISUALLANGLAB，它似乎需要整个鼠标点击“重写”
*   自己实现一个转换器（这很有趣，但很耗时）
*   下面的第二个链接

有关的：

*   [比较](https://stackoverflow.com/questions/6011141/scala-parser-combinators-vs-antlr-java-generated-parser)
*   [包装](http://jim-mcbeath.blogspot.com.br/2011/07/debugging-scala-parser-combinators.html)
*   [第 3 方尝试](http://blog.32leaves.net/?p=861)

第二个链接建议调试向解析器添加隐式方法：

```
implicit def toLogged(name:String) = new { 
  def !!![T](p:Parser[T]) = log(p)(name)
} 
```

可能是 AST 会更可行/有用；但问题仍然相似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T07:50:12.570

我可能误解了你的问题。

Scala 解析器组合器用于将字符串解析为您可以使用的类型的实例（自定义或内置）。结果是您决定的 Scala 实例结构，这可以是任何东西。

例如，您可以创建一个解析器，将您的任意字符串解析为众所周知的 java 结构的实例[`ECore`](http://download.eclipse.org/modeling/emf/emf/javadoc/2.8.0/org/eclipse/emf/ecore/package-summary.html#details)。

如果没有用例，就很难为您的问题提出最佳途径。也许 Xtext 可以帮助你： http: [//www.eclipse.org/Xtext/](http://www.eclipse.org/Xtext/)。Xtext 有很多内置功能，但它是一个 Eclipse 插件，您可能需要其他东西。

# rest - 如何避免在泽西岛处理 RunTimeException

> ID：14611368
> 
> 赞同：0
> 
> 时间：2013-01-30T18:41:59.883
> 
> 标签：rest, exception, jersey, unchecked-exception

据我所知，在休息服务中处理异常并将错误消息返回给客户端的最流行的设计是捕获 WebApplicationException 或 MappableContainerException。但是他们正在扩展 RuntimeExceprion （我不明白为什么）。据我所知，我们应该避免处理 RuntimeExceptions。

我需要处理诸如“具有该名称的实体已经存在”之类的异常。我确定这不是运行时异常。

还有其他方法吗？我现在正在研究包装器。可能你能解释我解决我的问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:06:32.713

我处理这个问题的方法是拥有自己的异常层次结构，并构建一个单独的 ExceptionMapper 来处理这个层次结构。这允许我以标准化的方式传回我需要的任何信息（在我的情况下是 JSON 格式的响应）。

我仍然会有一个用于 WebApplicationException 的 ExceptionMapper，否则最终用户可能会收到一些看起来很讨厌的响应。而且，如果您想更加安全，那么您还可以将一个用于 Exception 以获取您可能错过的任何其他内容（异常会转到最具体的异常映射器，因此将一个用于 Exception 不会影响他们）。

# makefile - 我可以参考“make”命令行上的默认目标吗？

> ID：14611372
> 
> 赞同：1
> 
> 时间：2013-01-30T18:42:20.657
> 
> 标签：makefile, gnu-make

如果我只输入

```
$ make 
```

它将`make`使用默认目标调用命令（通常是 中指定的第一个目标`Makefile`，但规则比这更复杂一些）。

有没有办法在命令行上指定默认目标而不知道它是什么，而不是简单地省略目标名称？

我想做的是结合这两个命令：

```
$ make clean
$ make 
```

一次调用`make`. 如果我碰巧知道默认目标是`all`，我可以输入：

```
$ make clean all 
```

但如果我不知道默认目标是什么，那将不起作用。

理想情况下，我想要一些引用默认目标的语法（[GNU make 手册](http://www.gnu.org/software/make/manual/)将其称为“默认目标”）。这：

```
 $ make clean .DEFAULT_GOAL 
```

显示了一般的想法，但它不起作用。

第二好的方法是从命令行确定默认目标是什么的简单而可靠的方法：

```
$ make clean $(get-default-target) 
```

一个特定于 GNU 的解决方案就可以了。

我怀疑，通过快速浏览手册，没有好的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:32:27.980

对于次优解决方案，您可以从 make -pq 的输出中解析默认目标：

```
make -pq  | sed -ne 's/^.DEFAULT_GOAL := //p' 
```

# c - v5 UUID。命名空间的 UUID 和名称有什么区别

> ID：14611373
> 
> 赞同：3
> 
> 时间：2013-01-30T18:42:23.953
> 
> 标签：c, uuid

我正在尝试通过引用函数（[http://www.ietf.org/rfc/rfc4122.txt](http://www.ietf.org/rfc/rfc4122.txt)）来生成 v5 UUID：

```
/* uuid_create_sha1_from_name -- create a version 5 (SHA-1) UUID
   using a "name" from a "name space" */
void uuid_create_sha1_from_name(
    uuid_t *uuid,         /* resulting UUID */
    uuid_t nsid,          /* UUID of the namespace */
    void *name,           /* the name from which to generate a UUID */
    int namelen           /* the length of the name */
); 
```

`uuid_t nsid`我已经阅读了帮助，但我仍然不清楚上述函数的 2nd( ) 和 3rd ( `void *name`) 参数有什么区别？

有人可以用一个例子解释我上面的内容吗？

我还想了解以下在 RFC4122 链接中的含义，它对第二个参数有什么意义吗？

```
/* Name string is a URL */
uuid_t NameSpace_URL = { /* 6ba7b811-9dad-11d1-80b4-00c04fd430c8 */
    0x6ba7b811,
    0x9dad,
    0x11d1,
    0x80, 0xb4, 0x00, 0xc0, 0x4f, 0xd4, 0x30, 0xc8
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T21:31:44.653

这`name`是您生成 uuid 的任何东西的唯一键

这`namespace`是一个常量 UUID，用于标识生成 UUID 的上下文

如果您查看 RFC，您会看到第 4.3 节定义了基于名称的 UUID 的这些特征：

*   在不同时间从同一命名空间中的相同名称生成的 UUID 必须相等。
*   从同一个命名空间中的两个不同名称生成的 UUID 应该是不同的（很有可能）。
*   在两个不同的命名空间中从相同名称生成的 UUID 应该不同（非常可能）。
*   如果从名称生成的两个 UUID 相等，则它们是从同一命名空间中的相同名称生成的（概率非常高）。

这些都是在基于名称的 UUID 中具有的重要属性。例如，假设您和我正在为我们各自的公司实施人力资源系统。这些系统彼此完全不相关，但由于 UUID 非常棒，我们都使用基于名称的 UUID 来识别员工。而且因为这是一件相当明显的事情，我们使用员工姓名作为`name`生成 UUID 的依据。

如果没有命名空间，我们都会为任何名为“John Smith”的人创建相同的 UUID……但这会很糟糕（tm），因为我们的系统是不相关的，而且我们正在处理不同的 John Smiths。“那又怎样，”你说！...但是当我们的公司明年合并并且我们必须合并我们的人力资源数据库时会发生什么？好吧，到那时，我们发现自己正在合并具有相同 ID 的数据库记录，很快公司中每个 John Smith 的薪水都在邮寄中，HR 递给我们我们的粉红单。

为了防止这种事情发生，RFC 规定我们每个人都独立地[选择一个 UUID](http://www.famkruithof.net/uuid/uuidgen)作为我们的`namespace`. 命名空间通常是固定的，并与生成 UUID 的特定系统相关联，因此我们可能只是将其硬编码为某个配置文件中的某个常量。因此，在我的命名空间（例如`87c9cdf7-101d-4c05-a89d-c7aaff3a3fcf`）中，我可以相信我为其生成的 UUID`John Smith`将始终相同。但我也可以指望它与您创建的任何 UUID 不同，因为您将使用不同的命名空间。因此，如果/当我们的系统合并时，就不会有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:09:22.027

引用 RFC 的[第 4.3 节](https://www.rfc-editor.org/rfc/rfc4122#section-4.3)，有这个步骤：

> 为从该名称空间中的名称生成的所有 UUID 分配一个 UUID 以用作“名称空间 ID”；有关一些预定义值，请参见[附录 C。](https://www.rfc-editor.org/rfc/rfc4122#appendix-C)

据我了解，这个命名空间的目的是确保使用具有相同含义的相同名称将导致相同的 UUID，而使用具有不同含义的相同名称将导致不同的 UUID。命名空间 UUID 与实际名称连接在一起，并且两者都被散列在一起。

关于 6ba7b811-9dad-11d1-80b4-00c04fd430c8 UUID 的代码片段来自 C 部分。因此，当您将其用作命名空间时，您应该使用 URL 作为名称。例如，您将函数称为

```
uuid_t result_uuid;
const char* url = "http://www.example.com/document.txt";
uuid_create_sha1_from_name(&result_uuid, NameSpace_URL, url, strlen(url)); 
```

与此相反，整个 example.com 域的 UUID 将使用

```
uuid_t result_uuid;
const char* domain = "example.com";
uuid_create_sha1_from_name(&result_uuid, NameSpace_DNS, domain, strlen(domain)); 
```

# python - 为什么这个烧瓶管理表单总是验证失败？

> ID：14611374
> 
> 赞同：7
> 
> 时间：2013-01-30T18:42:23.690
> 
> 标签：python, sqlalchemy, flask, wtforms

状态字段显示 3 个选项，但在提交时始终显示“不是有效选择”，无论选择哪个。

```
from website import app, db
from flask.ext import admin
from flask.ext.admin.contrib import sqlamodel
from wtforms.fields import SelectField

class Users(db.Model):
    id     = db.Column(db.Integer, primary_key=True)
    name   = db.Column(db.String(160), unique=True)
    status = db.Column(db.Integer)

    def __repr__(self):
        return self.name

class UsersAdmin(sqlamodel.ModelView):
    form_overrides = dict(status=SelectField)
    form_args = dict(
        status=dict(
            choices=[(0, 'Regular'), (1, 'Guest'), (2, 'Banned')],
        ))

admin = admin.Admin(app, 'Admin')
admin.add_view(UsersAdmin(Users, db.session)) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T20:01:19.047

当您在 db 中的状态字段是整数时，选择很可能作为 unicode 字符串发送。您可以尝试以下方法：

```
form_args = dict(
    status=dict(
        choices=[(0, 'Regular'), (1, 'Guest'), (2, 'Banned')],coerce=int
    )) 
```

# java - 从控制台获取 char 并将其转换为 int

> ID：14611380
> 
> 赞同：0
> 
> 时间：2013-01-30T18:42:45.183
> 
> 标签：java

尝试创建新方法，但在运行过程中，放置的代码不起作用

```
class Matrix {
    public static void main (String  args[]) throws IOException {
        ...
        System.out.println("Enter q-ty of matrix elements i= ");
        int gormatelement = 0;
        getchartoint (gormatelement);
        ...
    }
    ...
} 
```

和之后的方法

```
public static void getchartoint (int a) throws IOException{
    BufferedReader bReader = new BufferedReader (new InputStreamReader(System.in));
    String k = bReader.readLine();
    a =  Integer.parseInt(k);
} 
```

此代码必须从控制台获取 char 并将其转换为 int - 将用作矩阵中元素的 q-ty

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:46:41.310

当您更改方法内的简单参数变量（如 a）的值时，它不会更改您在调用该方法时提供的变量（如 gormateelement）。

最简单的方法是让方法返回整数值和调用代码来存储它。

```
int gormatelement = getchartoint (); 
```

和

```
public static int getchartoint () throws IOException{
   int a;
   ... same code ...
   return a;
} 
```

**展开**

如果你想了解更多关于传递变量的概念，你可以谷歌“按值调用”和“按引用调用”这两个术语。

Java 使用“按值调用”，但是当将具有包含实例变量的对象传递给方法时很容易混淆，因为包含的字段值可以更改，并且更改似乎会传播到您调用该方法的对象。

发生的事情是 Object 的值实际上是对对象内容的引用，可以这么说。你得想一想才能明白我的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:48:37.767

```
public class x
{
public static void main(String[] args)
{
System.out.println("Enter q-ty of matrix elements i= ");
        int gormatelement = 0;
        getchartoint (gormatelement);
}

public static void getchartoint (int a) throws IOException{
            BufferedReader bReader = new BufferedReader (new 
                    InputStreamReader(System.in));
            String k = bReader.readLine();
                a =  Integer.parseInt(k);
            }
} 
```

由于您是初学者，因此至少这是您的程序编译所必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:49:16.020

您正在将 parseInt() 的结果分配给 a，它是“gormateelement”的本​​地副本，一旦函数结束就会被删除。Java 对原始数据类型使用[“按值调用”](http://en.wikipedia.org/wiki/Call-by-value#Call_by_value)。

您还可以查看[Scanner Class](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)：

```
public static int getIntFromCommandLine() {
    Scanner scan = new Scanner(System.in);
    return scan.nextInt();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T18:48:01.360

尝试

```
int gormatelement = YourClass.getchartoint(0); 
```

# php - Eclipse 调试器错误模型代理已安装通知作业

> ID：14611383
> 
> 赞同：3
> 
> 时间：2013-01-30T18:43:00.767
> 
> 标签：php, eclipse, xdebug

每当我在调试器下打开断点列时，它都会给出错误

```
Model proxy installed notification job
Child Count Update 
```

细节给出

```
An internal error occurred during: "Model Proxy installed notification job".
java.lang.NullPointerException
An internal error occurred during: "child count update".
java.lang.NullPointerException 
```

我在 Mac OSX 10.8.2 上的 Eclipse Juno 上使用 Xdebug。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-21T07:26:39.800

我知道现在回答为时已晚，但希望这对任何人都有效。

我的 android eclipse（ADT 包）也遇到了同样的问题。

我刚刚从调试角度删除了断点选项卡并将其添加回相同的位置。

从`Windows -> Show View -> Breakpoints.`它对我有用。现在我可以切换断点，并且不会出现任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:20:51.887

只是为了让您知道我通过更新修复了它，还更新了 eclipse 错误跟踪器中的问题。

该错误未在其主要网站上可用的最新 Eclipse PHP PDT 3.0.X 版本中修复：http: [//www.eclipse.org/pdt/downloads/](http://www.eclipse.org/pdt/downloads/)

这就是我修复它的方法：
转到断点选项卡，按三下确定，直到错误消失。在断点选项卡内右键单击，删除所有断点。之后删除断点选项卡，使其不再出现在选项卡中。关闭 Eclipse。
现在使用 AtfCleaner 和 CCleaner，删除所有临时文件和任何可能存在冲突的注册表项。

现在更新到 3.1.1 版（可能您不需要做上述事情，但它对我有用，所以我不确定）：
要更新到 3.1.1 版，您必须使用 Eclipse 更新程序更新它，指向：
[http ://download.eclipse.org/tools/pdt/updates/release](http://download.eclipse.org/tools/pdt/updates/release)
仅逐一更新元素以确保正确下载和安装所有内容。
更多信息：
[http](http://eclipse.org/pdt/release-notes/3.1.1/)

://eclipse.org/pdt/release-notes/3.1.1/ Subversion 也是如此，如果你想修复它，你必须手动搜索最新的更新存储库，更新到最新版本并修复坏连接器。
[http://subclipse.tigris.org/update_1.8.x](http://subclipse.tigris.org/update_1.8.x)
[http://subclipse.tigris.org/servlets/ProjectProcess?pageID=p4wYuA](http://subclipse.tigris.org/servlets/ProjectProcess?pageID=p4wYuA)
仅下载最新的 svn 版本，否则 Eclipse 将无法连接到 svn 存储库。

Eclipse 充满了错误，必须知道在哪里下载、更新或修复某些东西是一件非常痛苦的事情。无法理解如何可能仍然没有更新 Eclipse 的标准方法，并且它的组件和信息在其主 Web 中没有更新和清晰。令人难以置信的是，该产品随附过时且相互冲突的组件。

# windows-phone-7 - 应用程序内可自定义的磁贴

> ID：14611384
> 
> 赞同：0
> 
> 时间：2013-01-30T18:43:04.043
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone, tiles

我想在我的应用程序中将项目显示为图块。HubTile 控件对我来说不够灵活，因此我将此[解决方案与 listbox 一起使用](https://stackoverflow.com/questions/8372733/how-can-i-make-something-like-this-tiles-inside-the-app-windows-phone)。我有几种类型的项目，它们应该以不同的方式显示。例如，注释项具有标题和文本，而图像项具有图像源和名称。

![输入注释磁贴](../Images/191e420ef7c814b59fb97e38cea03f03.png) ![图像平铺](../Images/4b4632534b10d35e7617b5d113cde4d8.png)

为笔记和图像实现两种样式并使用每种样式动态创建 ListBoxItem 在我看来是一种简单的方法，但它是最佳解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:50:08.423

当您的 ItemsControl 在其 ItemsSource 中具有多种数据类型并且每种数据类型具有不同的 DataTemplate 时，您应该使用 DataTemplateSelector 之类的东西。

我在 WP7/WP8 @ [ListBox 的上下文中写过关于这个主题的文章，在 Windows Phone 8 中有多个 ItemTemplates](https://stackoverflow.com/questions/14075542/listbox-with-multiple-itemtemplates-in-windows-phone-8/14077757#14077757)

# sharepoint-2013 - 使用 openCMIS Workbench 登录 Sharepoint 2013 存储库时出错

> ID：14611390
> 
> 赞同：2
> 
> 时间：2013-01-30T18:43:32.830
> 
> 标签：sharepoint-2013, cmis, opencmis, cmis-workbench

使用 OpenCMIS Workbench 0.8.0，我可以很好地加载 sharepoint 2013 (GA) 存储库，但是当我尝试登录到 Documents 等存储库之一时出现以下错误：

“无效参数：服务方法的一个或多个输入参数丢失或无效”

找到了一个包含一些说明的博客，但这些说明对我不起作用： [http ://dhartford.blogspot.com/2013/01/sharepoint-2013-w-apache-chemistry-cmis.html?showComment=1359398536275#c6910049622927723676](http://dhartford.blogspot.com/2013/01/sharepoint-2013-w-apache-chemistry-cmis.html?showComment=1359398536275#c6910049622927723676)

注意：这是我使用的服务 url 格式： http://myserver.xxx.com/MYSITE/cmis/_vti_bin/cmis/rest? [getRepositories](http://myserver.xxx.com/MYSITE/cmis/_vti_bin/cmis/rest?getRepositories)

有谁知道问题是什么？

这是来自 Workbench 的堆栈跟踪：

```
> 11:05:17 DEBUG ncmis.client.bindings.spi.http.HttpUtils: GET http://MYServer/_vti_bin/cmis/rest/f8134afe-176a-4c48-9fd2-a9f97e5dc91d?getTypeDefinition&typeId=cmis%3Adocument
> 11:05:17 TRACE ncmis.client.bindings.spi.http.HttpUtils: GET http://MYServer/_vti_bin/cmis/rest/f8134afe-176a-4c48-9fd2-a9f97e5dc91d?getTypeDefinition&typeId=cmis%3Adocument > Headers: {null=[HTTP/1.1 400 One or more of the input parameters to the service method is missing or invalid.], Server=[Microsoft-IIS/7.5], SPRequestDuration=[124], SPIisLatency=[27], X-FRAME-OPTIONS=[SAMEORIGIN], Content-Type=[plain/text; charset=utf-8], Date=[Wed, 30 Jan 2013 19:05:02 GMT], X-SharePointHealthScore=[1], Cache-Control=[private], X-Content-Type-Options=[nosniff], X-Powered-By=[ASP.NET], X-MS-InvokeApp=[1; RequireReadOnly], request-id=[5ef0f99b-24ec-909f-6192-6eaf6feccabc], Content-Length=[167], MicrosoftSharePointTeamServices=[15.0.0.4420], SPRequestGuid=[5ef0f99b-24ec-909f-6192-6eaf6feccabc], X-AspNet-Version=[4.0.30319]}
> 11:05:17 ERROR hemistry.opencmis.workbench.ClientHelper: CmisInvalidArgumentException: One or more of the input parameters to the service method is missing or invalid.
org.apache.chemistry.opencmis.commons.exceptions.CmisInvalidArgumentException: One or more of the input parameters to the service method is missing or invalid.
    at org.apache.chemistry.opencmis.client.bindings.spi.atompub.AbstractAtomPubService.convertStatusCode(AbstractAtomPubService.java:423)
    at org.apache.chemistry.opencmis.client.bindings.spi.atompub.AbstractAtomPubService.read(AbstractAtomPubService.java:554)
    at org.apache.chemistry.opencmis.client.bindings.spi.atompub.AbstractAtomPubService.getTypeDefinitionInternal(AbstractAtomPubService.java:821)
    at org.apache.chemistry.opencmis.client.bindings.spi.atompub.RepositoryServiceImpl.getTypeDefinition(RepositoryServiceImpl.java:88)
    at org.apache.chemistry.opencmis.client.bindings.impl.RepositoryServiceImpl.getTypeDefinition(RepositoryServiceImpl.java:137)
    at org.apache.chemistry.opencmis.client.runtime.SessionImpl.getTypeDefinition(SessionImpl.java:518)
    at org.apache.chemistry.opencmis.workbench.model.ClientSession.createOperationContexts(ClientSession.java:244)
    at org.apache.chemistry.opencmis.workbench.model.ClientSession.createSession(ClientSession.java:195)
    at org.apache.chemistry.opencmis.workbench.LoginDialog$2.actionPerformed(LoginDialog.java:204)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2006)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2329)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:398)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:253)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:247)
> 11:05:17 ERROR hemistry.opencmis.workbench.ClientHelper: Error code: 0 
```

我注意到的另一件事是，当我从浏览器中使用服务文档中的 URL 时，它们都不起作用。所以我认为服务文档没有有效的网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:39:44.003

试试最新的 CMIS Workbench： [https ://repository.apache.org/content/repositories/orgapachechemistry-166/org/apache/chemistry/opencmis/chemistry-opencmis-workbench/0.9.0-beta-1/chemistry- opencmis-workbench-0.9.0-beta-1-full.zip](https://repository.apache.org/content/repositories/orgapachechemistry-166/org/apache/chemistry/opencmis/chemistry-opencmis-workbench/0.9.0-beta-1/chemistry-opencmis-workbench-0.9.0-beta-1-full.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T22:19:33.073

没有时间发布解决方案，但这基本上是我在获得 Microsoft 帮助后必须做的事情。我错过了下面的步骤 B：

# A. 为您的子站点激活 CMIS 功能

1.  转到 Sharepoint 2013 中央管理
2.  单击站点链接，然后单击您的子站点。或者直接导航到它。例如[http://myserver/mysitename](http://myserver/mysitename)
3.  单击设置图标（右上角的齿轮），然后选择站点设置
4.  在站点操作下，单击管理站点功能
5.  单击 CMIS 生成器的激活。

# B. 检查备用访问映射

1.  转到中央管理页面
2.  在系统设置下，单击配置备用访问映射
3.  至少应该有两个网址。一个带有服务器短名称，一个带有服务器全名。
4.  如果缺少 url，请单击添加内部 URL
5.  对于备用访问映射集合，单击无选择链接，更改并选择：
    *   共享点 - 80
    *   设置网址如 [http://myserver.usa.com](http://myserver.usa.com)（全域名）
    *   设置区域：内网等任意
6.  点击保存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:54:49.093

我的建议是：

*   启动工作台，*不要登录*
*   关闭连接弹窗
*   使用右上角的按钮打开日志窗口
*   将日志级别增加到 DEBUG 或更详细
*   尝试连接
*   再次检查日志，可能将它们发布在这里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:11:49.380

在启动 OpenCMIS 之前从 Internet Explorer 中删除所有代理设置，同时重置所有系统范围的代理设置：`netsh winhttp reset proxy`

确保您的共享点 Web 应用程序设置为仅接受基本身份验证，如您提到的博客文章中所述

从 IE 和系统范围内删除代理解决了我的问题。我现在可以使用 OpenCMIS 登录到 sharepoint 2013

啊在我忘记 URL 语法之前应该是`http://server:port/_vti_bin/cmis/rest/?getRepositories`

祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T23:49:11.100

问题的实际根源是缺少备用访问映射。不知道为什么它首先丢失了。

所以我添加了一个内部 url，它具有完整的服务器名称地址，而不仅仅是短名称。一位微软开发人员帮助我解决了这个问题。

# performance - 让属性“id”成为唯一标识实体的复合键的一部分是否违反直觉？

> ID：14611393
> 
> 赞同：0
> 
> 时间：2013-01-30T18:43:34.827
> 
> 标签：performance, naming-conventions, uuid

在这里与一些命名约定作斗争。

我有一个可以通过两个属性唯一标识的对象：其父级的 UUID 和自动递增的计数。

例子：

父对象的 UUID 为 04305eb6-cccb-498c-8fab-95e7d933672d 我向父对象添加了一个子对象。它的 ID 是 1。我向父对象添加了第二个子对象。它的 ID 是 2。我删除了 ID 为 1 的孩子。我添加了第三个孩子。它的 ID 是 3。我删除了 ID 为 3 的孩子。我添加了第四个孩子。它的 ID 是（3 还是 4？不确定哪个更有意义）

我的问题：

*   在这里使用属性 Id 会令人困惑吗？我应该将其命名为 countAutoIncrement 吗？
*   我的算法意味着 countAutoIncrement 将是 1 + 播放列表的最大计数。这是一个好的算法吗？还是应该总是 1 + 最后生成的计数？

# cuda - GTX 480 上的 NVIDIA Nsight 调试

> ID：14611402
> 
> 赞同：2
> 
> 时间：2013-01-30T18:44:14.787
> 
> 标签：cuda, gpu, nsight

我有一台配备 GeForce GTX 480 的机器，但我无法在其上调试或运行分析活动。当我调试或运行分析活动时出现此错误：

> 远程系统通过远程桌面登录。除非安装了 TCC 适配器，否则 CUDA 调试不支持远程桌面。

我的 Nsight 版本是 2.2。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:47:56.860

如果您想在 RPD 会话中使用 GPU，则需要支持 TCC 的卡（Quadro 或 Tesla 系列）。

当您没有支持 TCC 的 GPU 时，您可以例如将 VNC 服务器安装为服务并使用它来访问机器。

或者，您可以将 Windows 自动登录配置为自动登录，并在启动组中拥有 Nsight Monitor（但要远程访问桌面，您仍然需要某种远程访问软件，如 VNC）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:07:12.330

经过一些测试和尝试，我发现这个问题是因为 RDC 并且如果您从一台具有远程桌面连接的计算机连接到目标计算机，即使您断开所有远程桌面并尝试远程或本地使用 Nsight 进行调试，您也会收到此错误.

我通过远程桌面连接到目标机器并配置并运行 Nsight 监视器，然后关闭 RDC。然后我尝试从目标上的主机远程调试项目，因此我收到此错误

我发现一种解决方案是重新启动目标机器并在目标机器前面物理配置监视器，然后不要从任何地方远程到目标机器，现在我可以从目标机器上的主机调试我的项目。

# syntax - YAML 语法验证器脚本

> ID：14611405
> 
> 赞同：2
> 
> 时间：2013-01-30T18:44:20.987
> 
> 标签：syntax, yaml

我的任务是创建和编辑相当多的 YAML 文件，但我没有使用在线语法验证器，而是希望通过脚本运行它。是否有任何可用的脚本可以测试 YAML 语法？我通过 Perl 找到了一个使用 perl::xs 的工具，但它并不是特别便携。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:08:38.607

您应该在 CPAN 上尝试[YAML](http://search.cpan.org/~mstrout/YAML-0.84/lib/YAML.pm)，它是纯 perl，没有依赖项，因此它是可移植的。您甚至可以直接下载它并将它们与您的验证器脚本一起放置而无需安装。

这是一个示例验证器脚本：

```
use YAML qw(LoadFile);
use Data::Dumper;

my $data = LoadFile($ARGV[0]);
print Dumper($data); 
```

如果发生任何错误，错误消息将告诉您问题出在哪里：

```
YAML Error: Expected separator '---'
   Code: YAML_PARSE_ERR_NO_SEPARATOR
   Line: 1
   Document: 2
 at /Users/alec/perl5/perlbrew/perls/p5161t/lib/site_perl/5.16.1/YAML/Loader.pm line 81. 
```

# sql - 如何将 VARCHAR 日期时间转换为 DATETIME 类型以填充表

> ID：14611407
> 
> 赞同：0
> 
> 时间：2013-01-30T18:44:21.900
> 
> 标签：sql, sql-server, tsql, datetime, converter

我有一个带有 VARCHAR() 列的表，其值采用以下格式：

```
2012-10-05T11:14:00-04:00 
```

我需要将此数据放入另一个表中，其中字段的数据类型为 DATETIME。

我将如何进行转换

```
2012-10-05T11:14:00-04:00 
```

到

```
2012-10-05 11:14:00 
```

?

我试过：

```
CAST(LEFT(REPLACE(fieldtimestamp, 'T', ' '), 19) AS DATETIME) 
```

但它一直给我错误：

> 从字符串转换日期和/或时间时转换失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T18:48:58.150

这将做： `SELECT CONVERT(DATETIME,LEFT(fieldtimestamp,19),126)`

无需更换`'T'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:50:07.560

```
select CAST(LEFT(REPLACE('2012-10-05T11:14:00-04:00', 'T', ' '), 19) AS DATETIME) 
```

为我工作

```
2012-10-05 11:14:00.000 
```

sql server 2012下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:59:24.490

如果您使用的是 MS SQL Server 2008，则可以使用 DATETIMEOFFSET 而不是 DATETIME，它会起作用。

```
BEGIN
DECLARE @d DATETIMEOFFSET
SELECT @d = '2012-10-05 11:14:00-04:00'
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T19:46:43.620

> 选择日期，CAST（左（替换（日期，'T'，''），21）作为日期时间）来自MyTbl1

如果你想要秒数，你需要写 21 个字母，

```
thedate                     DATETIME
2012-10-05T11:14:00-04:00   2012-10-05 11:14:00
2012-10-05T11:14:00-05:00   2012-10-05 11:14:00 
```

**在mysql**中工作正常

# c# - RestSharp RequestFormat 不起作用

> ID：14611413
> 
> 赞同：0
> 
> 时间：2013-01-30T18:44:38.977
> 
> 标签：c#, rest, restsharp

我有以下代码：

```
1\.  var client = new RestClient("http://localhost:52347/");
2\.  var xmlRequest = new RestRequest("api/students/{id}", Method.GET);
3\.  //xmlRequest.AddHeader(HttpRequestHeader.Accept.ToString(), "text/xml");
4\.  xmlRequest.RequestFormat = DataFormat.Xml;
5\.  xmlRequest.AddUrlSegment("id", "5");
6\.  
7\.  IRestResponse xmlResponse = client.Execute(xmlRequest);
8\.  var xmlContent = xmlResponse.Content;
9\.  
10\. Console.WriteLine(xmlContent); 
```

但是，通过这种设置，我仍然得到 JSON 的返回格式。如果我取消注释第 3 行并注释掉第 4 行，它会起作用，但我不想这样做。似乎第 4 行根本没有做任何事情。有什么我遗漏的东西还是我必须使用第 3 行才能使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:32:57.570

RestRequest.RequestFormat 属性告诉 RestSharp 您要发送到服务器的数据类型；它没有告诉它要返回什么数据。相反，这是由请求管理的。

在这个例子中，第 4 行没有做任何事情，因为您没有向服务器发送任何数据。

然而，第 3 行告诉服务器要返回什么类型的数据。所以我会把它留在里面。或者，如果这不是它应该的工作方式，请查看响应 API 请求的代码以及 API 如何确定要返回的数据的格式。

# php - 将 Javascript 变量显示为 PHP 变量

> ID：14611417
> 
> 赞同：0
> 
> 时间：2013-01-30T18:44:49.017
> 
> 标签：php, javascript, forms, variables

在我的表单操作中有一个网址：**www.url.com/ ?quantity=$quantity**

在表格中有一个选择框，客户可以在其中选择数量。

```
<form method="post" name="jform" action="www.url.com/?quantity=$quantity">
<select class="font_12" id="quantity" name="quantity">
    <option value="10">10 PCs</option>
    <option value="25">25 PCs</option>
    <option value="50">50 PCs</option>
    <option value="99">99 PCs</option>
</select> 
```

我正在尝试使用 ajax 获取选择框中的值，然后显示到操作表单 url 中。我做了一个警报，它起作用了，我得到了选择框的值。但我不知道如何将此值放入 PHP 变量**$quantity**？

这是我的 Ajax 代码：

```
$('#quantity').on('change', function() {
var val = $(this).val();
if(val != '') {
    $.get('index.php', {'quantity' : val}, function(resp) {
        alert(val);
    });
}
}); 
```

实际上，我希望它在提交表单之前选择框中的数量发生变化时立即更改 php 变量。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:46:02.350

采用`$_GET`

如果您的 URL`?quantity=###`只是`$_GET['quantity']`在您的 PHP 代码中使用。

要在更改数量时更改表单上的操作属性，只需将以下内容放入 onchange 事件中：

```
$('form[name="jform"]').attr('action','http://url.com/?quantity=' + val); 
```

# doxygen - 在 XML 注释中交叉引用另一个接口的成员的语法

> ID：14611419
> 
> 赞同：1
> 
> 时间：2013-01-30T18:44:57.520
> 
> 标签：doxygen, c++-cx, xml-documentation

我正在尝试将某些 C++/CX 接口的文档编写为 XML 注释。结果将由 Doxygen 以及 VC++ 自己的`/doc`选项解析。

在每个接口成员的文档中，我可以使用`<see cref="..."/>`语法来交叉引用同一接口的成员，以及已经前向声明的其他类型。但是引用不同接口的*成员的正确语法是什么？*

我所有的尝试都会产生编译器警告：

> C4638：XML 文档注释应用于 ...：引用未知符号 ...

我已经看过[这个问题](https://stackoverflow.com/questions/9153455/xml-comment-cref-to-unknown-symbol)及其答案，但是您不能转发声明接口类的*成员*，可以吗？而且由于循环性，我不能总是确保在包含引用的接口之前包含每个引用接口的声明。

如果接口是类，我的理解是 XML 注释可以放在函数的*实现*而不是它们的声明上，但是对于接口，没有任何成员的实现我可以将 XML 注释移动到。

# hadoop - 如何在 Hadoop 1.1.1 上安装 Oozie 3.3.1？

> ID：14611421
> 
> 赞同：1
> 
> 时间：2013-01-30T18:45:09.443
> 
> 标签：hadoop, oozie

我正在运行 Hadoop Ver 1.1.1 并想在安装时安装 Oozie 3.3.1 我收到以下错误

```
hduseros@MT2012018:/usr/local/oozie-3.3.1$ ./distro/target/oozie-3.3.1-distro/oozie-3.3.1/bin/oozie-setup.sh -hadoop 1.1.1 /usr/local/hadoop -extjs /usr/local/oozie-3.3.1/webapp/src/main/webapp/ext-2.2.zip
  setting CATALINA_OPTS="$CATALINA_OPTS -Xmx1024m"

Exiting: Unsupported Hadoop version '', supported versions: 0.20.1, 0.20.2, 0.20.104, 0.20.200, 0.23.x and 2.x 
```

我正在关注本教程 [http://practicalcloudcomputing.com/post/26337621577/installing-and-running-apache-oozie-3-2-x-and-possibly?543b50f0](http://practicalcloudcomputing.com/post/26337621577/installing-and-running-apache-oozie-3-2-x-and-possibly?543b50f0)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T02:22:27.410

在运行这个 oozie-setup.sh 之前，您需要将所需的 hadoop 1.1.1 jar 复制到 oozie home 的 libext 目录中。然后运行上面的命令。

[http://srikanthayalasomayajulu.blogspot.sg/2013/02/apache-oozie-331-installation-on-apache.html](http://srikanthayalasomayajulu.blogspot.sg/2013/02/apache-oozie-331-installation-on-apache.html)

按照这个链接...希望这应该会有所帮助

# android - jQuery Mobile show() 和 hide() 在 Android 中不起作用

> ID：14611423
> 
> 赞同：0
> 
> 时间：2013-01-30T18:45:22.437
> 
> 标签：android, jquery, show-hide

我试图在进行 ajax 调用以获取信息时显示“请稍候...”消息。基本上，用户输入他们的搜索词，点击搜索，我想在页面执行 ajax 调用时显示“请稍候...”，然后在完成后将其隐藏。

我的 jsp 页面上有一个 div，如下所示：

```
<div id="modalWindow">Please Wait...</div> 
```

我的 jQuery 看起来像这样：

```
jQuery('#modalWindow').css({
    'text-align' : 'center',
    'font-size' : '20px'
}).hide();  //this is called when the page initially loads

jQuery('#modalWindow').show();    //I call this in the function that does the Ajax call

jQuery('#modalWindow').hide();    //I call this once the Ajax is done. 
```

这是我的整个 Ajax 调用：

```
jQuery.ajax(
{
    url : urlContext + "/getItems.html",
    data :
    {
        txtItemReference : txtItemReference
    },
    dataType : "json",
    cache : false,
    async : false,
    timeout : 100000,
    success : function(jsonResponse)
    {
        if ( jsonResponse instanceof Object)
        {
            if (jQuery.isEmptyObject(jsonResponse))
            {
                createLocationDisplayPanel(false);
                createSimilarItemsPanel(false);
            }
            else if (jsonResponse['Locations'] != undefined)
            {
                responseArray = new Array();
                arrayStart = 0;
                intPage = 1;

                if (jsonResponse['Locations'].length <= 20)
                {
                    for (var x = arrayStart; x < jsonResponse['Locations'].length; x++)
                    {
                        responseArray[x] = jsonResponse['Locations'][x];
                    }
                }

                else
                {
                    responseArray = new Array();

                    for (var x = arrayStart; x < (20 * intPage); x++)
                    {
                        responseArray[x] = jsonResponse['Locations'][x];
                    }
                }

                createLocationDisplayPanel(jsonResponse, responseArray, txtItemReference, urlContext, callback);
            }
            else
            {
                if (jsonResponse['Items'].length <= 20)
                {
                    for (var x = arrayStart; x < jsonResponse['Items'].length; x++)
                    {
                        responseArray[x] = jsonResponse['Items'][x];
                    }
                }

                else
                {
                    for (var x = arrayStart; x < (20 * intPage); x++)
                    {
                        responseArray[x] = jsonResponse['Items'][x];
                    }
                }

                createSimilarItemsPanel(jsonResponse, responseArray, txtItemReference, urlContext, callback);
            }
            if (callback != undefined)
            {
                callback();
            }
        }
        else
        {
            alertLogout(document.URL);
        }
    },
    error : function(jsonResponse)
    {
        if (jsonResponse.hasOwnProperty('ERROR'))
        {
            alertError("There was no response from the server.");
        }
    }
}); 
```

这在我桌面上的 Firefox 以及 Android 的 Firefox 中完美运行。但是，在我尝试过的每个 Android 浏览器上，“请稍候...”文本永远不会显示，我感到很沮丧。谁能告诉我让 show() 和 hide() 函数在 Android 浏览器中工作的解决方法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:03:27.780

我发现问题出在 Ajax 调用的 async 属性上：

```
jQuery.ajax(
{
    url : urlContext + "/getItems.html",
    data :
    {
        txtItemReference : txtItemReference
    },
    dataType : "json",
    cache : false,
    async : true,   //was false before
    timeout : 100000,
    success : function(jsonResponse)
    {
        if ( jsonResponse instanceof Object)
        {
            if (jQuery.isEmptyObject(jsonResponse))
            {
                createLocationDisplayPanel(false);
                createSimilarItemsPanel(false);
            }
            else if (jsonResponse['Locations'] != undefined)
            {
                responseArray = new Array();
                arrayStart = 0;
                intPage = 1;

                if (jsonResponse['Locations'].length <= 20)
                {
                    for (var x = arrayStart; x < jsonResponse['Locations'].length; x++)
                    {
                        responseArray[x] = jsonResponse['Locations'][x];
                    }
                }

                else
                {
                    responseArray = new Array();

                    for (var x = arrayStart; x < (20 * intPage); x++)
                    {
                        responseArray[x] = jsonResponse['Locations'][x];
                    }
                }

                createLocationDisplayPanel(jsonResponse, responseArray, txtItemReference, urlContext, callback);
            }
            else
            {
                if (jsonResponse['Items'].length <= 20)
                {
                    for (var x = arrayStart; x < jsonResponse['Items'].length; x++)
                    {
                        responseArray[x] = jsonResponse['Items'][x];
                    }
                }

                else
                {
                    for (var x = arrayStart; x < (20 * intPage); x++)
                    {
                        responseArray[x] = jsonResponse['Items'][x];
                    }
                }

                createSimilarItemsPanel(jsonResponse, responseArray, txtItemReference, urlContext, callback);
            }
            if (callback != undefined)
            {
                callback();
            }
        }
        else
        {
            alertLogout(document.URL);
        }
    },
    error : function(jsonResponse)
    {
        if (jsonResponse.hasOwnProperty('ERROR'))
        {
            alertError("There was no response from the server.");
        }
    }
}); 
```

一旦我改变了它，显示和隐藏就可以在 Android 中运行。谢谢你们的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:56:37.590

您是否检查过当时是否加载了 jQuery？在你的脚本之前写下这个。

```
if (typeof jQuery == 'undefined') {  
    alert('jQuery is not loaded'); 
} 
```

您可能需要组合脚本或找到一种方法来确保它们按您需要的顺序加载。

# ios - 有没有办法在 for..in 循环中检查 NSArray 中的下一个对象？

> ID：14611425
> 
> 赞同：4
> 
> 时间：2013-01-30T18:45:25.817
> 
> 标签：ios, objective-c

我有这个 NSArray：

```
NSArray* temp=[[NSArray alloc]
initWithObjects:@"one",@"five",@"two",nil];

for(NSString* obj in temp){ 
    NSLog(@"current item:%@ Next item is:%@",obj, ***blank***);
} 
```

需要更换`blank`什么？我需要知道即将到来的对象吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T18:52:05.337

这仅适用于您的对象是唯一的（即数组中没有相同的对象）：

```
id nxt = nil;
int nxtIdx = [temp indexOfObject:idx] + 1;
if (nxtIdx < temp.count) {
    nxt = [temp objectAtIndex:nxtIdx];
}
NSLog(@"current item:%@ Next item is:%@", obj, nxt); 
```

但在我看来，这是一个黑客。为什么不使用带有对象索引的普通 for 循环：

```
for (int i = 0; i < temp.count; i++) {
    id obj = [temp objectAtIndex:i];
    id next = (i + 1 < temp.count) ? [temp objectAtIndex:i + 1] : nil;
} 
```

或者（**推荐**）使用块枚举它

```
[temp enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    id next = nil;
    if (idx + 1 < temp.count) {
        next = [temp objectAtIndex:idx + 1];
    }
}]; 
```

* * *

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T18:49:18.377

尝试使用`NSEnumerator`.

代码：

```
NSEnumerator *enumerator = [temp objectEnumerator];
id obj;
while (obj = [enumerator nextObject]) {
    if ([enumerator nextObject] == nil) {
       NSLog(@"This is the last object: %@", obj);
       break;
    }
    NSLog(@"current item:%@ Next item is:%@", obj, [enumerator nextObject]);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T18:51:06.273

如果没有几行额外代码（导出索引、添加索引、检查其是否仍在边界内），您无法通过快速枚举来做到这一点。

您可以使用块进行枚举并将一个添加到`idx`参数中，但更好的设计（您不会冒险或不必检查越界异常）将记住*前一个*对象，这将是您的第一个对象迭代。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T18:49:03.130

您可以获取当前对象的索引，并使用类似于以下内容查看下一个：

```
NSArray* temp=[[NSArray alloc] initWithObjects:@"one",@"five",@"two",nil];

for(NSString* obj in temp){

    if([temp count] < [temp indexOfObject:obj]+1)
    {
        NSLog(@"current item:%@ Next item is:%@",obj, [temp objectAtIndex:[temp indexOfObject:obj] + 1]);
    }

} 
```

对我来说，在这种情况下执行传统的 for 循环有时会更容易访问您的索引变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T18:49:32.630

使用快速枚举，这是唯一的方法：

```
NSInteger index = [temp indexOfObject:obj];
if (index != NSNotFound && index < temp.count)
    NSObject nextObject = [temp objectAtIndex:(index + 1)]; 
```

请注意如果，您需要确保获得一个有效的索引，并且向其中添加一个不会让您越界。

# android - 如何从用户输入的sqlite数据库中获取数据

> ID：14611426
> 
> 赞同：0
> 
> 时间：2013-01-30T18:45:25.410
> 
> 标签：android, sqlite

我目前正在尝试比较最后一年项目的日期。我希望能够比较日期（来自 datepicker 和 calendarview）以查看它们是否匹配，然后仅显示该给定日期的信息。

我努力了：

```
String dateSelected = (dayOfMonth + "/" + (month + 1) + "/" + year);

Toast.makeText(getApplicationContext(), "TODAYS DATE" + dateSelected, Toast.LENGTH_SHORT).show();
Toast.makeText(getApplication(), Calms.KEY_FLARE_DATE, Toast.LENGTH_SHORT).show();

db = openOrCreateDatabase(Calms.DATABASE_NAME, MODE_PRIVATE, null);
Cursor c = null;

String dbDate = c.getString(c.getColumnIndex(Calms.KEY_FLARE_DATE));
Toast.makeText(getApplication(), dbDate, Toast.LENGTH_SHORT).show(); 
```

我在这里真是不知所措。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:03:11.700

您需要阅读一些教程以了解如何查询数据库。

以下将为您提供某个表的所有记录中的所有列：

```
Cursor c = db.query("SomeTable", null,
                    null, null, null, null, null); 
```

要仅获取具有特定日期的记录，请添加 where 子句：

```
Cursor c = db.query("SomeTable", null,
                    KEY_FLARE_DATE + " = ?",
                    new String[] { dateSelected },
                    null, null, null); 
```

# java - mongodb，java和连接没有关闭

> ID：14611427
> 
> 赞同：1
> 
> 时间：2013-01-30T18:45:29.323
> 
> 标签：java, mongodb, connection

因为一段时间以来我遇到了一个奇怪的问题：

我有一个 Spring 3 webapp，带有一个由 Spring IoC 容器实例化的 Mongo() 单格顿。Mongo 类正在正确地获得@Autowired，我可以发出查询、更新等。

一段时间后，我在 DBPortPool 上遇到有关发出连接超时的异常。

为了排除故障，我编写了一个将池统计信息转储到日志文件的作业。

几个小时后，我得到这个输出：

```
Total  : 38
Used   : 8
Unused : 30
Detailed Usage: 
        Duration: 0, Namespace: null, No Documents 0, ThreadName: null, Class: class com.mongodb.InUseConnectionBean, OpCode: null, Query: null
Detailed Usage: 
        Duration: 0, Namespace: null, No Documents 0, ThreadName: null, Class: class com.mongodb.InUseConnectionBean, OpCode: null, Query: null
Detailed Usage: 
        Duration: 0, Namespace: null, No Documents 0, ThreadName: null, Class: class com.mongodb.InUseConnectionBean, OpCode: null, Query: null
Detailed Usage: 
        Duration: 0, Namespace: null, No Documents 0, ThreadName: null, Class: class com.mongodb.InUseConnectionBean, OpCode: null, Query: null
Detailed Usage: 
        Duration: 0, Namespace: null, No Documents 0, ThreadName: null, Class: class com.mongodb.InUseConnectionBean, OpCode: null, Query: null
Detailed Usage: 
        Duration: 0, Namespace: null, No Documents 0, ThreadName: null, Class: class com.mongodb.InUseConnectionBean, OpCode: null, Query: null
Detailed Usage: 
        Duration: 0, Namespace: null, No Documents 0, ThreadName: null, Class: class com.mongodb.InUseConnectionBean, OpCode: null, Query: null
Detailed Usage: 
        Duration: 0, Namespace: null, No Documents 0, ThreadName: null, Class: class com.mongodb.InUseConnectionBean, OpCode: null, Query: null 
```

基本上，我只是打印 ConnectionPoolStatisticsBean 类的所有属性。

现在，令人困惑的是：通常情况下，这些变量 Duration、Namespace、ThreadName、Class 和 Query 正在填充数据。不，这些连接似乎没有被释放。

不幸的是，我现在无法重现这个错误。

任何提示我如何找出这些连接卡在哪里？

谢谢大家的帮助！

简

//编辑：

我确实使用：

DBCollection col = mongo.getDB(this.db).getCollection("collection"); col.insert(...)

我不发出 db.requestStart(); 或 db.requestDone()。

# qooxdoo - 为什么 qooxdoo 生成器会抛出错误 TypeError: 'int' object is not subscriptable

> ID：14611432
> 
> 赞同：0
> 
> 时间：2013-01-30T18:45:52.030
> 
> 标签：qooxdoo

当我在源代码上运行 qooxdoo 生成器时，出现错误：

TypeError：“int”对象不可下标

我的源代码是什么导致了这个：

```
/* ************************************************************************

   Copyright:

   License:

   Authors:

   ************************************************************************ */

/* ************************************************************************

   #asset(first/*)

   ************************************************************************ */

/**
 * This is the main application class of your custom application "first"
 */
qx.Class.define("first.Application", {

    extend : qx.application.Standalone,
    members : {

    main : function() {
        // Call super class
        this.base(arguments);

        // Enable logging in debug variant
        if (qx.core.Environment.get("qx.debug")) {
        // support native logging capabilities, e.g. Firebug for Firefox
        qx.log.appender.Native;
        // support additional cross-browser console. Press F7 to toggle visibility
        qx.log.appender.Console;
        }

        var layout = new qx.ui.layout.Grid(9, 5);

        var label_f = new qx.ui.basic.Label("fahrenheit");
        var label_c = new qx.ui.basic.Label("celsius");
        var tf_f = new qx.ui.form.TextField();
        var tf_c = new qx.ui.form.TextField();

        var button_f = new qx.ui.form.Button("F->C");
        var button_c = new qx.ui.form.Button("C->F");

        // Document is the application root
        var doc = this.getRoot();
        doc.setLayout(layout);

        // Add button to document at fixed coordinates
        doc.add(label_f, {row: 0, column: 0});

    }

    }
}
           ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:00:56.747

这是一个 Python 异常。你的 JavaScript 看起来不错，我让它运行没有问题。请您执行以下操作：

*   说明您是如何运行生成器的（例如`./generate.py source`）？
*   添加一个`-s`到您的生成器调用（例如`./generate.py -s source`- 这将打印一个 python 堆栈跟踪）并在此处打印输出
*   在此处运行`./generate.py info`并打印输出
*   [通过jslint.com](http://jslint.com)验证你`config.json`的 JSON 是否有效=> 你应该得到：`JSON: good.`

# vba - Excel VBA 打开工作簿并复制内容

> ID：14611433
> 
> 赞同：-1
> 
> 时间：2013-01-30T18:45:52.213
> 
> 标签：vba, excel

我正在创建一个应该向用户询问文件的 VBA，然后复制第一张工作表的内容（工作表名称不是默认值，并且包含一个空格）.. 之后我需要删除特定的列.. 从我需要的行中删除包含特定文本的行（区分大小写）

我现在所能做的就是加载文件，但不知道如何将数据复制到活动工作表！

```
FileToOpen = Application.GetOpenFilename _
(Title:="Please Choose the RTCM File", _
FileFilter:="Excel Files *.xls (*.xls),")
''
If FileToOpen = False Then
MsgBox "No file specified.", vbExclamation, "Duh!!!" ' Notification that nothing is chosen
Exit Sub
Else ' Load the file, copy the first sheet and paste it in active sheet ...

End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:22:57.813

希望这可以帮助。此代码会将数据粘贴到已经处于活动状态的工作表中。如果要将数据粘贴到特定工作表中，可以用 Sheets("Sheetname") 替换 Activesheet。

我假设被粘贴的数据只会从 A 列到 Z 列，请根据需要进行更改。

```
FileToOpen = Application.GetOpenFilename _
(Title:="Please Choose the RTCM File", _
FileFilter:="Excel Files *.xls (*.xls),")

If FileToOpen = False Then
    MsgBox "No file specified.", vbExclamation, "Duh!!!" ' Notification that nothing is chosen
    Exit Sub
Else ' Load the file, copy the first sheet and paste it in active sheet ...
    ThisWorkbook.Activate
    ThisWorkbook.ActiveSheet.Range("A1:Z65536").ClearContents
    Workbooks(FileToOpen).Activate
    lrow=Workbooks(FileToOpen).Sheets("Sheet1").Cells(65536,1).End(xlUp).Row
    Workbooks(FileToOpen).Sheets("Sheet1").Range("A1:Z" & lrow).Copy
    ThisWorkbook.Activate
    ThisWorkbook.ActiveSheet.Range("A1").PasteSpecial xlPasteValues
End If 
```

# php - xdebug 设置 PHP 调试

> ID：14611436
> 
> 赞同：0
> 
> 时间：2013-01-30T18:46:01.107
> 
> 标签：php, linux, ubuntu, xdebug

我有我的 x 调试一些工作的 Ubuntu 11.10 我通过 apt-get 安装了 xdebug。这些是我遵循的说明：http: [//molecularsciences.org/articles/installing_xdebug_on_ubuntu_10.x_or_ubuntu_11.x](http://molecularsciences.org/articles/installing_xdebug_on_ubuntu_10.x_or_ubuntu_11.x)

我在让某些事情正常工作时遇到了一些困难，并且有一些我无法解决的奇怪问题。在问之前，我已经用谷歌搜索了我的小心脏。

问题一：如果我使用 PHP 执行脚本（例如，`$php index.php`），脚本会一直暂停，直到我附加调试器并点击运行。我找不到任何选项来告诉 xdebug 不要暂停，除非发生断点或异常。

问题二：无论我尝试什么，我都无法从浏览器触发调试器。cookie 由 Xdebug 设置，服务器上的 xdebug 变量似乎与 cookie 的值匹配。

请帮忙！我在窃听。要检查的事项清单将有很大帮助。

## 

phpInfo xdebug 设置

* * *

```
指令 本地价值 主价值
xdebug.auto_trace 关 关
xdebug.collect_assignments 关 关
xdebug.collect_includes On On
xdebug.collect_params 0 0
xdebug.collect_return 关 关
xdebug.collect_vars 关 关
xdebug.default_enable On On
xdebug.dump.COOKIE 无值 无值
xdebug.dump.ENV 无值 无值
xdebug.dump.FILES 无值 无值
xdebug.dump.GET 无值 无值
xdebug.dump.POST 无值 无值
xdebug.dump.REQUEST 无值 无值
xdebug.dump.SERVER 无值 无值
xdebug.dump.SESSION 无值 无值
xdebug.dump_globals On On
xdebug.dump_once On On
xdebug.dump_undefined 关 关
xdebug.extended_info On On
xdebug.file_link_format 无值 无值
xdebug.idekey 根 macgdbp
xdebug.manual_url http://www.php.net http://www.php.net
xdebug.max_nesting_level 100 100
xdebug.overload_var_dump On On
xdebug.profiler_aggregate 关 关
xdebug.profiler_append 关 关
xdebug.profiler_enable 关 关
xdebug.profiler_enable_trigger 关 关
xdebug.profiler_output_dir /tmp /tmp
xdebug.profiler_output_name cachegrind.out.%p cachegrind.out.%p
xdebug.remote_autostart 关 关
xdebug.remote_connect_back 关 关
xdebug.remote_cookie_expire_time 360​​0 3600
xdebug.remote_enable On On
xdebug.remote_handler dbgp dbgp
xdebug.remote_host 127.0.0.1 127.0.0.1
xdebug.remote_log 无值 无值
xdebug.remote_mode req req
xdebug.remote_port 9000 9000
xdebug.scream 关​​ 关
xdebug.show_exception_trace 关 关
xdebug.show_local_vars 关 关
xdebug.show_mem_delta 关 关
xdebug.trace_format 0 0
xdebug.trace_options 0 0
xdebug.trace_output_dir /tmp /tmp
xdebug.trace_output_name 跟踪。%c 跟踪。%c
xdebug.var_display_max_children 128 128
xdebug.var_display_max_data 512 512
xdebug.var_display_max_depth 3 3

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:28:23.993

**问题一**：

暂停不受 xdebug 控制，而是由客户端通过 dbgp 控制

在日食上，您可以：

来自[http://devzone.zend.com/1147/debugging-php-applications-with-xdebug/](http://devzone.zend.com/1147/debugging-php-applications-with-xdebug/)

> 您还不会在浏览器窗口中看到输出，因为默认情况下 Eclipse 在脚本的第一行暂停脚本执行，就好像在这一行设置了断点一样。如果要禁用此行为，请从调试对话框配置窗口中取消选中断点部分中的第一行中断复选框。

如果您使用的是 netbeans，您可以

首选项 > php > 调试

并取消选中“在第一行停止”。我不知道如何在其他编辑器上执行此操作，但最终这和编辑器行为有关，而不是 xdebug。

**问题二**：我遇到过几次这个问题，并用浏览器扩展修复了这个问题。

铬： [https ://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc](https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc)

火狐： [https ://addons.mozilla.org/en-US/firefox/addon/easy-xdebug/?src=search](https://addons.mozilla.org/en-US/firefox/addon/easy-xdebug/?src=search)

# c# - 有没有办法编写一个适用于所有可能的办公文档的代码？

> ID：14611442
> 
> 赞同：0
> 
> 时间：2013-01-30T18:46:20.217
> 
> 标签：c#, ms-word, interop, translation

我正在编写一个修改word文档的程序。目前我已经使用 Microsoft.Office,Interop.Word 来处理 Word 文档，它需要在用户计算机上安装 Microsoft Office，但我的一些客户没有 MS Office，但他们有 Open Office。那么，我应该使用哪个库而不是 Interop？

以及如何使我的代码能够处理不同的 word 文件，不仅是 .doc 和 .docx，还包括其他办公程序文件？目前我正在为每种类型的文档编写不同的代码..

我的程序将文档从其原始语言翻译成另一种语言，因此将文档的格式保持为原始格式对我来说非常重要，这就是我使用 Interop 的原因。但我也希望我的程序对尽可能多的人有用尽可能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:01:38.640

我认为您没有提及，但是您是否假设所有客户都使用相同版本的 Office。要解决 Office 版本的问题，您可能需要查看这个开源项目：NetOffice [http://netoffice.codeplex.com/](http://netoffice.codeplex.com/)并使用该库进行所有 .doc 和 .docx 文件格式的开发。

对于 OpenOffice 或 LibreOffice，我相信您能做的最好的事情就是进入项目网站并下载 SDK。例如，去这里：[http](http://api.libreoffice.org/examples/examples.html) ://api.libreoffice.org/examples/examples.html ，你会发现一些用 Java、Python、C++ 编辑文本文档的例子，包括 odt 文件。

LibreOffice SDK 在这里下载：[http ://www.libreoffice.org/download/](http://www.libreoffice.org/download/)

最后，还有 OpenXML 格式（在另一个答案中提到），它是：ECMA Office Open XML（“Open XML”）是一种用于文字处理文档、演示文稿和电子表格的国际开放标准，可以由以下人员自由实施多个平台上的多个应用程序。

您还可以在这里下载它的 SDK：http: [//msdn.microsoft.com/en-us/office/bb265236.aspx](http://msdn.microsoft.com/en-us/office/bb265236.aspx)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:49:13.990

您最终可能会编写单独的代码来处理每种文件类型。例如，Office 产品内部可能有*一些*相似之处，但在大多数情况下，您需要为每种类型 配备一个[适配器。](http://en.wikipedia.org/wiki/Adapter_pattern)

但是，您可以（并且应该）通过将翻译逻辑和其他非特定于类型的函数放置在每个适配器随后将引用的共享库中来最小化重复代码的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:18:14.980

我们使用[aspose words](http://www.aspose.com/.net/word-component.aspx)。这支持 DOC、DOCX、RTF 和 OOXML。但它不是免费的。

# ios - NSPredicate 包含字符串小写

> ID：14611444
> 
> 赞同：19
> 
> 时间：2013-01-30T18:46:33.133
> 
> 标签：ios, core-data, nspredicate

我正在使用 iOS SDK 6.0 和 XCode 4.5.2 开发一个 iOS 应用程序。我的目标开发是4.3。

我正在使用 Core Data 来管理我的数据。现在我有这个`NSPredicate`来搜索商店：

```
if ((shopSearchBar.text != nil) && ([shopSearchBar.text length] > 0))
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name = %@",shopSearchBar.text];
    [fetchRequest setPredicate:predicate];
} 
```

这是商店实体：

![在此处输入图像描述](../Images/949d6b826fe41f244c8a9e4b0652a98e.png)

我必须将**名称**转换为小写，看看它是否包含`shopSearchBar.text`小写格式。

例子：

我有这四个商店：

*   店铺1
*   1号店
*   我的店铺
*   店铺

如果用户搜索文本是 'shop'，它必须返回所有这些。

**你知道怎么做吗？**

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-30T19:31:57.247

这就是我解决问题的方法：

```
if ((shopSearchBar.text != nil) && ([shopSearchBar.text length] > 0))
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name CONTAINS[cd] %@",
                              shopSearchBar.text];
    [fetchRequest setPredicate:predicate];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:51:24.963

(a) 您可以在存储库中添加一列 - lowercaseName - 并且每次保存 Shop 时，保存其名称的仅小写版本。那么你的谓词只是比较:)

(b) 但是，如果您只想进行不区分大小写的比较，请尝试以下操作：

```
if ((shopSearchBar.text != nil) && ([shopSearchBar.text length] > 0))
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name LIKE[cd] %@",shopSearchBar.text];
    [fetchRequest setPredicate:predicate];
} 
```

这也是变音符号不敏感的比较。查看[此文档页面](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)的字符串比较部分以获取更多选项。

(a) 为您提供更快的查询但更复杂的代码。(b) 为您提供非常简单的保存方法，但（稍微）较慢的查询

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T18:55:01.857

您应该可以使用 NSPredicat 的 predicateWithBlock: 方法：

```
NSPredicate *predicate = [NSPredicate predicateWithBlock:^BOOL(id obj, NSDictionary *bind) {
return [self.name compare:shopSearchBar.text options:NSCaseInsensitiveSearch] == NSOrderedSame; }]; 
```

# php - 在没有内容的自定义帖子类型上使用 TinyMCE

> ID：14611445
> 
> 赞同：2
> 
> 时间：2013-01-30T18:46:33.200
> 
> 标签：php, javascript, wordpress, tinymce

我正在尝试在 WordPress 中设置一个自定义帖子类型，其中包含一个我想变成 TinyMCE WYSIWYG 编辑器的文本区域。[该线程](http://wordpress.org/support/topic/plugin-verve-meta-boxes-tinymce-support-on-textarea)的倒数第二篇文章展示了如何在文本编辑器中嵌入将调用 TinyMCE 的 JavaScript。但是，当我尝试使用它时，我得到一个`tinyMCE`未定义的 JavaScript 错误。

看起来问题是因为帖子类型没有内容，所以编辑器 JavaScript（包括全局`tinyMCE`对象）没有包含在管理页面中。如何包含这些脚本以便我可以访问`tinyMCE`？

谢谢，

-内特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:19:08.343

也许你可以使用[**`wp_editor`**](http://codex.wordpress.org/Function_Reference/wp_editor). 请参阅WordPress Answers 中的[其他参考资料](https://wordpress.stackexchange.com/search?q=wp_editor+is%3Aanswer)。

为了测试，我在没有编辑器的情况下定义了 CPT `'supports' => array( 'title', 'comments' )`：.

并使用了这个自定义元框：

```
add_action( 'add_meta_boxes', 'add_custom_box_so_14611445' );

function add_custom_box_so_14611445() 
{
    add_meta_box( 
        'sectionid_so_14611445',
        __( 'Custom Editor' ),
        'inner_custom_box_so_14611445',
        'portfolio' 
    );
}

function inner_custom_box_so_14611445( $post ) 
{
    echo wp_editor( '', 'editor_id_so_14611445', array() );
} 
```

# c - MIL-STD-1750A 到十进制转换示例

> ID：14611450
> 
> 赞同：0
> 
> 时间：2013-01-30T18:46:51.873
> 
> 标签：c, floating-point, floating-accuracy, floating-point-precision

我正在查看[1750A 格式网页](http://www.xgc.com/manuals/m1750-ada/m1750/c189.html#AEN322)中的一些示例，其中一些示例并没有真正意义。我在这篇文章的底部包含了 1750A 格式规范，以防有人不熟悉它。

以 1750A 格式网页的表 3 为例：

`.625x2^4 = 5000 00 04`

在二进制`5000 00 04`是`0101 0000 0000 0000 0000 0000 0000 0100`

如果将其转换为十进制，则它不等于 10，即 0.625x2^4。也许我转换不正确。

取尾数，`101 0000 0000 0000 0000 0000`减去 1 `100 1111 1111 1111 1111 1111`。然后翻转位，给出`011 0000 0000 0000 0000 0000`. 将小数点移动 4 位（因为我们的指数`0100`是 4），得到`0110.0000 0000 0000 0000 000`. 这等于 6.0，而不是 0.625x2^4。

我相信实际值应该是十六进制`0011 0000 0000 0000 0000 0000 0000 01000`的`30000004`。

其他人能否证实我的怀疑，即上述 1750A 格式页面的表 3 中的该值标记不正确？

谢谢

![1750A](../Images/0fe5a51275201fb680570ff47c641321.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:52:58.603

如前所述，符号+尾数被[解释](https://stackoverflow.com/a/14563481/129570)为介于 -1 和 +1 之间的 2 补码值。

在您的情况下，它是 0.101000000 ...（base-2）。这是 1/2 + 1/8 = 0.625（以 10 为底）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:56:36.117

这一切都说得通。

这里：

```
0101 0000 0000 0000 0000 0000 0000 0100 
```

你有：

(0*2 ⁰ + 1*2 ^(-1) + 0*2 ^(-2) + 1*2 ^(-3) + 0*2 ^(-4) + ... + 0*2 ^(-23) ) * 2 ⁴ = (0.5 + 0.125) * 16 = 0.625 * 16 = 10

只是做数学。

# entity-framework - 导航属性过滤器

> ID：14611451
> 
> 赞同：4
> 
> 时间：2013-01-30T18:46:55.100
> 
> 标签：entity-framework, asp.net-web-api, odata, breeze

我的问题是：如何为[导航属性](http://www.breezejs.com/documentation/navigation-properties)实现默认的服务器端“过滤器” ？

在我们的应用程序中，我们实际上很少从数据库中删除任何内容。相反，我们实现了“软删除”，其中每个表都有一个`Deleted`位列。如果此列为真，则记录已被“删除”。如果它是假的，它就没有。

这使我们可以轻松地“取消删除”客户端意外删除的记录。

默认情况下，我们当前的 ASP.NET Web API 仅返回“未删除”的记录，除非从客户端`deleted`发送参数`true`。这个想法是服务的消费者不必担心指定他们只想要未删除的项目。

在 Breeze 中实现同样的功能非常简单，至少对于基础实体来说是这样。例如，这将是经典 Todo 示例的实现，添加一个“已删除”位字段：

```
 // Note: Will show only undeleted items by default unless you explicitly pass deleted = true.
    [HttpGet]
    public IQueryable<BreezeSampleTodoItem> Todos(bool deleted = false) {
        return _contextProvider.Context.Todos.Where(td => td.Deleted == deleted);
    } 
```

在客户端，我们需要做的就是...

```
var query = breeze.EntityQuery.from("Todos"); 
```

...获取所有未删除的待办事项，或者...

```
var query = breeze.EntityQuery.from("Todos").withParameters({deleted: true}) 
```

...获取所有已删除的待办事项。

但是，假设 BreezeSampleTodoItem 有一个子集合，用于完成该 Todo 所需的工具。我们将其称为“工具”。工具还实现了软删除。当我们执行一个`expand`用于获取 Todo 及其工具的查询时，它将返回所有工具 - “删除”与否。

但是如何在`Todo.Tools`展开时默认过滤掉这些记录呢？

我想到每个可能需要扩展的项目都有单独的 Web API 方法，例如：

```
[HttpGet]
public IQueryable<Todo> TodoAndTools(bool deletedTodos = false, bool deletedTools = false)
{
    return // ...Code to get filtered Todos with filtered Tools
} 
```

[我在另一个 SO 帖子](https://stackoverflow.com/questions/11228463/load-navigation-properties-with-filter-for-entity-framework-4-3)中找到了一些如何执行此操作的示例代码，但它需要手动编码 Todo 的每个属性。上述帖子中的代码也返回 a `List`，而不是`IQueryable`. 此外，这需要为每个可能的扩展添加方法，这并不酷。

本质上，我正在寻找某种方法来定义一段代码，该代码在`Todos`被查询时被调用，而另一个被查询时被调用`Tools`- 最好能够传递一个定义它是否应该返回已删除项目的参数。这可能是服务器端堆栈上的任何位置 - 无论是在 Web API 方法中、本身还是实体框架的一部分（请注意，[在 EF 中不支持](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015345-allow-filtering-for-include-extension-method)过滤 Include 扩展。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:44:01.870

虽然我们已经讨论了允许过滤“扩展”的想法，但 Breeze 目前无法完全满足您的要求，但我们确实需要更多反馈来了解社区是否会觉得这很有用。请将此添加到微风[用户语音](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)并投票。我们非常重视这些建议。

此外，正如您所指出的，EF 不支持这一点。

但是......你可以做的是使用投影**而不是扩展**来做一些非常相似的事情：

```
public IQueryable<Object> TodoAndTools(bool deleted = false
                                      ,bool deletedTools = false) {
    var baseQuery = _contextProvider.Context.Todos.Where(td => td.Deleted == deleted);
    return baseQuery.Select(t => new {
      Todo: t,
      Tools: t.Tools.Where( tool => tool.Deleted = deletedTools);
    });
 } 
```

这里需要注意几点：

1) 我们返回一个 IQueryable 的 Object 而不是 IQueryable 的 ToDo

2) Breeze 将检查返回的有效负载并为返回的任何“entityTypes”自动创建微风实体（即使在投影中）。所以这个查询的结果将是一个 javascript 对象数组，每个对象都有两个属性；'ToDo' 和'Tools' 其中Tools 是'Tool' 实体的数组。好消息是在投影中返回的 ToDo 和 Tool 实体都将是“完整的”微风实体。

3) 您仍然可以根据预计的属性名称传递客户端过滤器。IE

```
var query = EntityQuery.from("TodoAndTools")
        .where("Todo.Description", "startsWith", "A")
        .using(em); 
```

4) EF**确实**支持这一点。

# android - Android 返回旧的缓存网络数据

> ID：14611453
> 
> 赞同：1
> 
> 时间：2013-01-30T18:46:58.360
> 
> 标签：android, http, ftp

我正在设计一个处理客户订单的应用程序。

我的主屏幕在 ListView 中显示了所有当前订单的列表，它从我网站上的文本文件中下载。它还有一个按钮来下一个新订单。

当创建、填写和发送新订单时，它会使用一行数据更新网站上的文本文件。

创建订单后，我重新下载文本文件以对其进行解析。但是，上传到文本文件的新数据不会在我的设备上出现 1-15 分钟。但是，当我从计算机加载文本文件时，文本文件显示订单已正确上传。

我在使用 org.apache.commons.net.ftp.FTPClient、2 个不同的 URL 输入流和 HttpClient 获取请求时遇到了这个错误。错误的行为很奇怪，数据被缓存长达 15 分钟，或者有时根本不显示。

手机信号塔网络是否以某种方式缓存这些数据？其他人遇到过这个吗？是否有解决方法或请求新数据的方法？

我下载文本文件的 4 种方法都是从网上的各种示例中获取的，并且相当冗长，但是如果您想查看它们，我会上传它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:51:23.683

如果某处有一个透明代理缓存数据，您应该尝试通过设置不允许缓存的 http 标头来避免缓存。

例如使用：

*   埃塔格
*   最后修改
*   缓存控制：max-age=0，必须重新验证
*   Pragma：无缓存

# php - 如何加载指定时间的脚本

> ID：14611454
> 
> 赞同：0
> 
> 时间：2013-01-30T18:46:58.793
> 
> 标签：php, autoload

> **可能重复：**
> [如何以自动方式定期执行 PHP 代码](https://stackoverflow.com/questions/7939667/how-to-execute-php-code-periodically-in-an-automatic-way)

我正在尝试在 PHP 中找到一种在指定时间加载指定脚本的方法，例如，如果 apache 服务器可以执行指定的脚本，或者 php.ini 中有一个选项，所以我可以添加要加载的文件指定的时间。

**例如：**

我想加载脚本**example.php**这个文件可以在根目录的**X/Y/example.php**位置找到，我想要的是**PHP 引擎/Apache 服务器**将在 12:00 执行这个脚本，如果任何人都知道这样做的方法，我将非常感激，谢谢大家，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:49:00.390

使用[cron](http://kvz.io/blog/2007/07/29/schedule-tasks-on-linux-using-crontab/)

> Cron 是一个执行预定命令的守护进程。Cron 在进入多用户运行级别时从 /etc/init.d 自动启动。Cron 在其假脱机区域 (/var/spool/cron/crontabs) 中搜索 crontab 文件（以 /etc/passwd 中的帐户命名）；找到的 crontab 被加载到内存中。请注意，不应直接访问此目录中的 crontab - 应使用 crontab 命令来访问和更新它们。

欲了解更多信息：
[croninfo.html](http://www.pantz.org/software/cron/croninfo.html)
[维基](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:51:25.197

[cronjobs](http://en.wikipedia.org/wiki/Cron)和[GET](http://linux.about.com/library/cmd/blcmdl1_GET.htm)就是你所需要的

# objective-c - 无法从其自己的 Touch Up Inside 事件更改 UIButton 的标题

> ID：14611455
> 
> 赞同：0
> 
> 时间：2013-01-30T18:47:06.563
> 
> 标签：objective-c, cocoa-touch, uibutton, uikit, ibaction

我刚刚注意到 UIButton 中的这种疯狂行为：

如果我尝试从在按钮的 touch up inside 事件中触发的 IBAction 设置 UIButton 的标题，则标题会更改，但会很快恢复为旧值。

如果我在其他按钮的内部事件中进行此操作，它会按预期工作。

搞什么鬼生意？？？

```
- (IBAction)removeText:(id)sender {

    [[sender titleLabel] setText:@"New Text"];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:50:15.713

titleLabel 是一个只读属性。你想使用：

```
[sender setTitle:@"title" forState:UIControlStateNormal]; 
```

编辑：实际上，查找 titleLabel 自己的属性仍然可以访问，但是 setTitle 解决方案是要走的路......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:52:05.810

正确的方法是：

```
- (IBAction)removeText:(id)sender {
   [(UIButton*)sender setTitle:@"New Text" forState: UIControlStateNormal];
} 
```

# css - 如何使用 css 缩小视网膜图像精灵

> ID：14611459
> 
> 赞同：1
> 
> 时间：2013-01-30T18:47:35.127
> 
> 标签：css, sprite, scaling

我在加载视网膜图像时遇到问题。我有两个图像精灵。一个正常，一个视网膜。问题是我不知道如何缩小视网膜图像，它现在是两倍大小。这是我的CSS。

```
.home {
    background: url('../images/buttonSprite.png') -49px -52px;
    width: 43px;
    height: 43px;
}
@media all and (-webkit-min-device-pixel-ratio: 2) {
    .home {
        background: url('../images/buttonSprite@2x.png') no-repeat -79px -113px !important;
        -webkit-background-size:43px 43px;
    }
} 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:02:04.790

试试这个：

```
.home {
    background: url('http://img580.imageshack.us/img580/9284/buttonsprite.png') no-repeat -49px -53px;
    width: 43px;
    height: 43px;
}

@media all and (-webkit-min-device-pixel-ratio: 1.5), all and (-moz-min-device-pixel-ratio: 1.5), all and (-o-min-device-pixel-ratio: 3/2), all and (min-device-pixel-ratio: 1.5) {
    .home {
        background: url('http://img90.imageshack.us/img90/5624/buttonsprite2x.png') no-repeat -39px -56px;
        background-size: 200px 496px;
    }
} 
```

请注意，我使用了 1.5 的像素比，这几乎是一个标准。我还包括了其他前缀。

# ms-access - 要从 Access 导出的 schema.ini 文件

> ID：14611460
> 
> 赞同：1
> 
> 时间：2013-01-30T18:47:39.297
> 
> 标签：ms-access, export, ini

我正在通过 VBscript 从 Access DB 导出并想尝试使用 Schema.ini 文件。我有一个批处理程序可以触发一个 vbscript 文件，该文件打开 Access DB 并进行导出。我的 vbscript 文件名是 export.vbs。

如果我有：

```
DoCmd.TransferText acExportDelim, "", "table", "C:\output\table.csv" 
```

我注意到在导出过程中会自动创建一个文件“export.ini”。

如果我有

```
DoCmd.TransferText acExportDelim, "Schema.ini", "table", "C:\output\table.csv" 
```

我收到一个关于“文本文件规范'Schema.ini”不存在的错误。”即使在同一个目录中这一切都发生在我那里有一个 Schema.ini 文件。我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:41:39.340

您需要采取不同的方式（[从访问创建逗号分隔文件 (csv) - 每天从 Windows 安排](https://stackoverflow.com/questions/13482242/create-comma-separated-file-csv-from-access-scheduled-daily-from-windows/13483597#13483597)）

```
Set cn = CreateObject("ADODB.Connection")

cn.Open "Provider=Microsoft.Ace.OLEDB.12.0;Data Source=z:\Docs\test.accdb"

sSQL = "select * into " 
sSQL= sSQL & "[text;database=z:\docs\;FMT=Delimited;HDR=Yes].[csvfile.csv]"
sSQL= sSQL & " from table1"

cn.Execute sSQL 
```

# c# - 使用 IEnumerator 是实现异步的最佳方式，而多线程似乎很慢？

> ID：14611461
> 
> 赞同：0
> 
> 时间：2013-01-30T18:47:41.217
> 
> 标签：c#, multithreading, asynchronous

我正在尝试创建某种框架来简化编写对象交互算法的过程。（一个对象——许多客户端（算法））

*   例如，我想实现一些非常简单的工作并在循环中等待满足某些条件的算法：

    ```
    public void MakeVerySimpleJob() { }

    public void AsyncLoop()
    { // real algorithm can be more complex, but job is always very simple
        while (true)
        {
            MakeVerySimpleJob();
            WakeUpCondition = "As fast as u can!";
            JobComplete.Set();
            WakeUp.WaitOne();
        }
    }

    void main()
    {
        Thread MyThread = new Thread(AsyncLoop);
        MyThread.Start();

        var w = new System.Diagnostics.Stopwatch(); w.Start();
        for (int i = 0; i < 100000; i++)
        {
            // waitin for thread
            JobComplete.WaitOne();
            // ok we did it
            WakeUpCondition = null;
            WakeUp.Set();
        }
        w.Stop();
    }

    AutoResetEvent JobComplete = new AutoResetEvent(false);
    AutoResetEvent WakeUp = new AutoResetEvent(false); 
    ```

    不幸的是，它消耗大约`500ms`100000 个简单的工作。

*   好的多线程在我的情况下是不可接受的，但我不想强迫用户以这种方式编写算法：

    ```
    // invoke it again and again
    public void PseudoAsyncLoop()
    {
        if (CurrentState == 1) 
        {
            MakeVerySimpleJob();
            CurrentState = 2;
            return;
        }
        else is (CurrentState == some_sate)
        {
        }
    }

    int CurrentState = 0; 
    ```

*   所以我看看`Enumerators`。使用 Enumerators 用户可以以传统风格实现自己的算法：

    ```
    public IEnumerable<bool> PseudoAsyncLoop()
    {
        while (true)
        {
            MakeVerySimpleJob();
            WakeUpCondition = "As fast as u can!";
            yield return true;
        }
    }

    public string WakeUpCondition { get; private set; }

    void main()
    {
        var MyLoop = PseudoAsyncLoop();
        var LoopEnumerator = MyLoop.GetEnumerator();

        var w = new System.Diagnostics.Stopwatch(); w.Start();
        for(int i = 0; i < 100000; i ++)
        {
            LoopEnumerator.MoveNext();
            // ok we did it
            WakeUpCondition = null;
        }
        w.Stop();
    } 
    ```

    现在它需要大约`3ms`，太好了。但我认为这一切都有问题......

**我的问题是：**

*   **我的方向正确吗？**
*   **专业程序员如何解决这类问题？**
*   **可能有一些方法可以优化多线程版本？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:29:52.600

我不完全理解你在做什么或为什么，但如果这实际上代表你的代码，那么你可以通过使用`-Slim`同步原语之一来加速它。[没有`AutoResetEventSlim`](https://stackoverflow.com/q/8215380/41071)，但您可以`SemaphoreSlim`改用：

```
private readonly SemaphoreSlim JobComplete = new SemaphoreSlim(0, 1);
private readonly SemaphoreSlim WakeUp = new SemaphoreSlim(0, 1);

private void AsyncLoop()
{
    while (true)
    {
        MakeVerySimpleJob();
        WakeUpCondition = "As fast as u can!";
        JobComplete.Release();
        WakeUp.Wait();
    }
}

private void main()
{
    Thread MyThread = new Thread(AsyncLoop);
    MyThread.Start();

    for (int i = 0; i < 100000; i++)
    {
        JobComplete.Wait();
        WakeUpCondition = null;
        WakeUp.Release();
    }
} 
```

这导致我的机器上的执行速度提高了大约 5.5 倍。

# android - Android：你如何从谷歌财经/雅虎账户导入投资组合？

> ID：14611462
> 
> 赞同：2
> 
> 时间：2013-01-30T18:47:47.943
> 
> 标签：android, finance, stock

有谁知道如何从谷歌金融账户导入股票投资组合？我正在尝试为 Android 制作一个股票投资组合跟踪应用程序，并希望能够与 Google 金融或雅虎金融同步？

它基本上是股票代码/股票代码的列表，可能还有股票数量和购买价格。

# ms-access - 向 VBA 代码添加条件并重新查询

> ID：14611464
> 
> 赞同：0
> 
> 时间：2013-01-30T18:47:54.533
> 
> 标签：ms-access, vba, criteria, ms-access-2010

因此，我拥有的以下 VBA 代码将根据等于一月的 Combo1 值重新查询表单。最终，我将在 Combo 值中有 X 年，并且只想显示基于每年的所有记录。

是否可以添加额外的 VBA 代码以使用查询中的条件，而不是有 X 数量的查询并根据年份重新查询它们。

```
Private Sub Combo1_AfterUpdate()

If Combo1.Value = "2013" Then
[Form_Main Form].RecordSource = "Main_Form_Query"
[Form_Main Form].Requery
End If

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:55:39.170

您可以在运行时构造查询（记住：访问中的查询对象只是一条sql语句）

因此，假设您的数据存储在一个名为的表中，该表`tblMyData`具有名为`month`(String, month name) 和`year`(Numeric, Integer) 的列（*仅示例*）。您可以通过这种方式在 VBA 中生成 SQL 查询：

```
...
Dim strSQL as String
...
strSQL = "SELECT * FROM tblMyData " & _
         "WHERE month='" & ComboMonth.Value & "' " & _
         "  AND year=" & ComboYear.Value ";"
...
[Form_Main Form].RecordSource = strSQL
[Form_Main Form].Requery
... 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:43:54.080

[以不同的方式打开表单](http://msdn.microsoft.com/en-us/library/office/ff820845.aspx)。

```
 DoCmd.OpenForm "MyForm",,,"MyYear=2013" 
```

或者

```
 DoCmd.OpenForm "MyForm",,,"MyYear=" & Me.MyCombo 
```

假设表或查询中的 MyYear 是数字。如果不是，您可以使用单引号。

一般的想法是您使用包含所有记录的表单，并使用 OpenForm 的 Where 参数来指定应显示的记录。您可以对报告执行相同的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T19:44:29.687

我对你想要完成的事情只有一个模糊的想法。向我们展示来自`Main_Form_Query`. 同时，考虑您是否可以使用表单的`.Filter`属性来做您需要的事情。

如果表单的记录源包含一个名为 的文本字段`fiscal_year`，您可以根据组合框中选择的年份过滤显示的行。

```
Private Sub Combo1_AfterUpdate()
    ' .Value is the default property, so not required after Me.Combo
    Me.Filter = "fiscal_year = '" & Me.Combo1 &  "'"
    Me.FilterOn = True
End Sub 
```

另一种方法可能是引用`Main_Form_Query`.

```
WHERE
       Forms!YourForm!Combo1 Is Null
    OR some_field = Forms!YourForm!Combo1 
```

然后`Me.Requery`在组合的更新后事件中执行。

# servicestack - 我将如何创建自己的 IUserAuthRepository 实现？

> ID：14611471
> 
> 赞同：4
> 
> 时间：2013-01-30T18:48:16.003
> 
> 标签：servicestack, authentication

我正在使用开箱即用的身份验证和服务堆栈，并且效果很好。所以，现在，我正在使用以下代码行模拟用户，取自 ServiceStack 示例：

```
 var userRep = new InMemoryAuthRepository();
            container.Register<IUserAuthRepository>(userRep);
            string hash;
            string salt;
            new SaltedHash().GetHashAndSaltString("test", out hash, out salt);
            userRep.CreateUserAuth(new UserAuth
            {
                Id = 1,
                DisplayName = "DisplayName",
                Email = "as@if.com",
                UserName = "john",
                FirstName = "FirstName",
                LastName = "LastName",
                PasswordHash = hash,
                Salt = salt,
            }, "test"); 
```

有没有办法可以在 userRep 中定义字段？例如，假设我想要字段 portalid 以及 UserAuth 对象的一部分？我该怎么做呢？我可以只修改 InMemoryAuthRepository 类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:30:06.320

您无法更改[ServiceStack 的内置 UserAuth](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization) DTO 的架构，但它确实提供了一些可扩展点，这些点[在此答案](https://stackoverflow.com/a/11118747/85785)中进行了详细说明，您可以使用`RefId`and`RefIdStr`字段来引用您自己的自定义表或在 UserAuth 中添加元数据通过将元数据添加到`Dictionary<string,string> Meta`集合中。

# matlab - 来自2x2 ZYZ旋转矩阵的欧拉角？

> ID：14611473
> 
> 赞同：1
> 
> 时间：2013-01-30T18:48:23.923
> 
> 标签：matlab, matrix, linear-algebra, rotatetransform, euler-angles

如何从随机 2x2 ZYZ 旋转矩阵中找到欧拉角？我们知道所有 SU(2) 矩阵都可以使用 ZYZ 分解作为基于欧拉角的三矩阵乘积进行分解。在关于欧拉角的维基百科中：

“类似的三角分解适用于 SU(2)，即复杂二维空间中的特殊酉旋转群，不同之处在于 β 的范围从 0 到 2π。这些也称为欧拉角。”

我确实尝试在matlab中做一个方程系统，但它在某些情况下（泡利矩阵）找到了解决方案，而在许多其他情况下却没有。它永远不会找到随机的 SU(2) 矩阵。

有人知道一般方法吗？我已经找到了如何做 3x3 矩阵，但不是 2x2 ZYZ。

最好的祝福！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:26:55.967

来自[https://groups.google.com/forum/?fromgroups=#!topic/mathtools/q25a5WoG6Eo](https://groups.google.com/forum/?fromgroups=#!topic/mathtools/q25a5WoG6Eo)，龚海峰写的（不是自己找的吗）：

```
function orthm = ang2orth(ang) 

sa = sin(ang(2)); ca = cos(ang(2)); 
sb = sin(ang(1)); cb = cos(ang(1)); 
sc = sin(ang(3)); cc = cos(ang(3)); 

ra = [  ca,  sa,  0; ... 
       -sa,  ca,  0; ... 
         0,   0,  1]; 
rb = [  cb,  0,  sb; ... 
         0,  1,  0; ... 
       -sb,  0,  cb]; 
rc = [  1,   0,   0; ... 
        0,   cc, sc;... 
        0,  -sc, cc]; 
orthm = rc*rb*ra; 

function ang = orth2ang(orthm) 
ang(1) = asin(orthm(1,3)); %Wei du 
ang(2) = angle( orthm(1,1:2)*[1 ;i] ); %Jing Du 
yz = orthm* ... 
    [orthm(1,:)',... 
     [-sin(ang(2)); cos(ang(2)); 0],... 
     [-sin(ang(1))*cos(ang(2)); -sin(ang(1)*sin(ang(2))); 
cos(ang(1))] ]; 

ang(3) = angle(yz(2,2:3)* [1; i]); % Xuan Du 
```

可以在[这里](http://hepwww.rl.ac.uk/Haywood/Group_Theory_Lectures/Lecture_3.pdf)和[这里](http://fds.oup.com/www.oup.com/pdf/13/9780199662920.pdf) `There is an isomorphism between SO(3) and SU(2)`看到：

![在此处输入图像描述](../Images/b93d60c9091b8c1b73f20b9ee958acfc.png)

# algorithm - MST相关算法

> ID：14611478
> 
> 赞同：-1
> 
> 时间：2013-01-30T18:48:37.170
> 
> 标签：algorithm, graph, graph-theory, minimum-spanning-tree

`G(V,E)`给定一个具有权重函数的无向连通图`w:E->R`，一条边`e(u,v)`属于 E。以线性运行时复杂度运行的算法可以确保是否存在包含边 e 的最小生成树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:05:56.283

从**u**开始执行深度优先搜索，忽略任何权重等于给定边权重或更重的边。如果 DFS 在没有访问**v**的情况下完成，这意味着不存在给定边是最重边的循环，因此给定边包含在某个最小生成树中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T03:13:33.547

这是要求您实施[Prim 的最小生成树](http://www.geekviewpoint.com/java/graph/mst)两次。

*   第一次正常运行算法。记下 mst 的重量。

*   第二次，不是像 Prim 算法通常那样从一棵空树开始，而是从树上已经存在的节点 u 和 v 开始——这与拥有边 e(u,v) 相同。然后继续构建 mst。

*   最后，如果第二个 mst 与第一个 mst 的权重相同，则边 e(u,v) 可以在 mst 中。如果没有，则有一个较轻的 mst。

顺便说一句，2*O(n) 仍然是 O(n)

# java - 从服务拨打电话

> ID：14611481
> 
> 赞同：-1
> 
> 时间：2013-01-30T18:48:44.923
> 
> 标签：java, android

我正在尝试编写一个 android 服务，其中包括拨打电话。我有服务做其他事情：在网络上收听，接受连接，处理文本并用文本响应。我现在正在尝试建立一个呼叫。

到目前为止，设置调用的一点是额外不必要的 {}，当我将额外 {} 中的代码粘贴到启动此服务的活动中时，调用已设置。我看到的唯一不同的是上下文。那么我做错了什么？

```
public class Service extends android.app.Service {

@Override
public int onStartCommand(Intent intent, int flags, int startId) {  
    {
        android.content.Intent intent2 = 
                new android.content.Intent(
                    android.content.Intent.ACTION_CALL, 
                    android.net.Uri.parse("tel:012345556789"));
        this.startActivity(intent2);
    }       
    return Service.START_NOT_STICKY;
} 
```

堆

```
 Thread [<1> main] (Suspended (exception RuntimeException))  
    ActivityThread.handleServiceArgs(ActivityThread$ServiceArgsData) line: 2673 
    ActivityThread.access$1900(ActivityThread, ActivityThread$ServiceArgsData) line: 141    
    ActivityThread$H.handleMessage(Message) line: 1331  
    ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
    Looper.loop() line: 137 
    ActivityThread.main(String[]) line: 5039    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 511  
    ZygoteInit$MethodAndArgsCaller.run() line: 793  
    ZygoteInit.main(String[]) line: 560 
    NativeStart.main(String[]) line: not available [native method] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:00:11.130

如果你想打电话，这是代码：

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("tel:123456789"));
        startActivity(callIntent); 
```

但更好的方法是在活动的新线程中使用它 - 代码片段：

```
Thread thread = new Thread()
{
    @Override
    public void run() {

Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("tel:123456789"));
        startActivity(callIntent);

    }
};

thread.start(); 
```

您必须`CALL_PHONE`在清单中拥有 : 权限。

我希望我有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:22:38.247

我发现从服务启动活动是一种特殊情况，您需要一个标志，可能是为了停止意外的活动启动。我在这里得到了答案[https://stackoverflow.com/a/3456099/537980](https://stackoverflow.com/a/3456099/537980)

```
{
    android.content.Intent intent2 = 
            new android.content.Intent(
                android.content.Intent.ACTION_CALL, 
                android.net.Uri.parse("tel:012345556789"));
    intent2.setFlags(android.content.Intent.FLAG_ACTIVITY_NEW_TASK); //Add this line, if starting an activity from a service.
    this.startActivity(intent2);
} 
```

# ios - 是否可以在您的应用上线之前测试 iOS 应用评级？

> ID：14611485
> 
> 赞同：2
> 
> 时间：2013-01-30T18:48:54.563
> 
> 标签：ios, app-store

这里只是一个健全的检查。如果我有一个应用程序并添加一个“给我打分”按钮，按照[此处](https://stackoverflow.com/questions/3654144/direct-rate-in-itunes-link-in-my-app)的建议重定向请求，是否可以在应用程序的第一个版本上线之前进行测试（而不是将其指向不同的应用程序）？有确定的答案来源吗？

# objective-c - 忽略顶栏uiwebview

> ID：14611490
> 
> 赞同：0
> 
> 时间：2013-01-30T18:49:02.507
> 
> 标签：objective-c, xcode

我正在使用 xcode 开发 iPhone 应用程序。我有一个 uiwebview，它显示一个网站。该网站有一个标题栏，例如堆栈溢出顶部的标题栏。

我试过了：

```
[webView.scrollView setContentOffset:CGPointMake(0, 50)]; 
```

但它所做的只是将 uiwebview 内容移到屏幕下方。我想知道如何忽略顶部的这个菜单栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:08:11.313

这会将 webview 从屏幕上推出一点点，因为它不在视图中，所以会隐藏顶部栏。

```
[webView setFrame:CGRectMake(0, -50, width, height); 
```

# android - 将箭头指向用户面对的方向

> ID：14611493
> 
> 赞同：3
> 
> 时间：2013-01-30T18:49:07.987
> 
> 标签：android, gps, accelerometer, android-sensors, android-location

在 Google 地图应用程序中，有一个蓝色的小箭头指向用户所面对的方向。如何在我的应用程序中复制它？请提供示例代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:16:34.760

我有一个应用程序，我必须在其中获取设备指向的方向。为了获得这个值，你必须设置一个 SensorManager 和一个 SensorListener。这是启动它的基本代码。当然，您必须根据偏角（真北和磁北之间的差异）进行一些调整。

```
mySensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
List<Sensor> mySensors = mySensorManager.getSensorList(Sensor.TYPE_ORIENTATION);

private SensorEventListener mySensorEventListener = new SensorEventListener(){

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        //device heading in degrees
        float azimuth = event.values[0];
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:09:20.253

从当前 GPS 位置获取路线（有时称为航向）属性。

# php - 如何在另一个php文件中列出一个php文件的值

> ID：14611494
> 
> 赞同：0
> 
> 时间：2013-01-30T18:49:08.647
> 
> 标签：php, javascript, html, css

我不确定这是否可能！

我有两个文件说**main.php**和**submenu.php** 在**main.php**我有以下 mainMenu ![在此处输入图像描述](../Images/25973bd8aefb497c0550a863a49d7727.png)

在另一个名为**submenu.php**的文件中，我有一个列表说

```
<ul>
<li>1</li>
<li>2</li>
<li>3</li>
</ul> 
```

如果我单击主菜单中的**价格表**，我想将子菜单的内容显示为价格表下的列表

![在此处输入图像描述](../Images/f6bcbdba8aee70606dd3b3c8599ee684.png)

简单的解决方案可能是在 menu.php 本身中包含列表视图，但情况并非如此

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:04:31.200

您应该使用数组和递归。像这样：

（代码很粗糙，抱歉）

```
$menu = array(
    'About Us',
    'Categories',
    'Price List' => array(
         '1','2','3','4'
    )
);

function loop_menu($menu){
    foreach($menu as $m):
        if(is_array($m))
            return '<ul>' . loop_menu($m) . '</ul>';
        else
            return '<li>' . $m . '</li>';
    endforeach;
}

echo loop_menu($menu); 
```

然后使用 CSS 让它看起来像你想要的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:57:08.687

如果你想包含一个页面，只需使用 include('page.php');

但是使用 JS & CSS 是最好的方法 这里有一个非常有用的插件 [http://users.tpg.com.au/j_birch/plugins/superfish/](http://users.tpg.com.au/j_birch/plugins/superfish/) 并且不要忘记获取 jQuery

# c# - 匹配多行以及忽略大小写的正则表达式选项

> ID：14611495
> 
> 赞同：3
> 
> 时间：2013-01-30T18:49:10.267
> 
> 标签：c#, html, regex, multiline, ignore-case

我有一些格式不正确的 html，有时缺少 "。此外，它有时显示大写字母，而有时显示小写字母：

```
<DIV class="main">
    <DIV class="subsection1">
   <H2>
   <DIV class=subwithoutquote>StackOverflow</DIV></H2></DIV></DIV> 
```

我想同时匹配多行并忽略大小写。但是以下模式似乎不起作用。（对于连接，我也尝试了 | 而不是 &）

```
const string pattern = @"<div class=""?main""?><div class=""?subsection1""?><h2><div class=""?subwithoutquote""?>(.+?)</div>";
Match m = Regex.Match(html, pattern, RegexOptions.IgnoreCase & RegexOptions.Singleline); 
```

或者我应该在模式中添加 \n* 来解决多行问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T18:51:20.440

第一个问题是您不允许选项卡之间的正则表达式中有空格。正确的正则表达式（在 Rubular 中测试）是：

```
<div class=""?main""?>\s*<div class=""?subsection1""?>\s*<h2>\s*<div class=\"?subwithoutquote\"?>(.+?)<\/div>\s* 
```

注意添加了几个`\s*`条目。

第二个问题是您没有正确连接选项。

你的代码：

```
Match m = Regex.Match(html, pattern, RegexOptions.IgnoreCase & RegexOptions.Singleline); 
```

由于这些是位标志，因此按位与（`&`运算符）是错误标志。你想要的是按位或（`|`运算符）。

> Bitwise-And 表示“如果在***这两个***中都设置了位，则将其设置；否则，取消设置。您需要 Bitwise-Or，这意味着“如果在***其中任何一个***中设置了位，则设置它；否则，取消设置。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T18:52:11.673

在这种情况下，您需要将它们组合在一起。

```
const string pattern = @"<div class=""?main""?><div class=""?subsection1""?><h2><div class=""?subwithoutquote""?>(.+?)</div>";
Match m = Regex.Match(html, pattern, RegexOptions.IgnoreCase | RegexOptions.Singleline) 
```

编辑：将您的正则表达式更改为以下...

```
const string pattern = @"<div class="?main"?>\s*<div class="?subsection1"?>\*+<h2>\s*<div class="?subwithoutquote"?>(.+?)</div> 
```

# powershell - 我应该如何处理返回不同类型值的函数和 cmdlet？

> ID：14611499
> 
> 赞同：1
> 
> 时间：2013-01-30T18:49:17.467
> 
> 标签：powershell, types, error-handling

许多函数和 cmdlet 根据传递给它的参数返回不同的类型。这使我有必要测试返回值。目前我正在使用嵌套的 if-then-else 语句来执行此操作。这是我今天开始编写的用于验证 IP 配置的示例脚本：

```
$adapters = get-wmiobject win32_networkadapterconfiguration -filter "ipenabled = 'true'"
$adapters_type = $adapters.gettype().tostring()
if ($adapters_type -eq "System.Management.ManagementObject") {
    #TODO: configure network adapter.
}
else if ($adapters_type -eq "System.Object[]") {
  #TODO: handle the case of multiple network adapters.
}
else {
  echo "error: unexpected type returned from internal function."
} 
```

当我有多个返回变量来测试我的代码时，我的代码很快就会嵌套得很深。是否有一种更自然的方法来处理可能由多种类型中的一种所占据的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:53:48.300

一种选择是确保 Get-WmiObject 上的结果始终是一个数组，例如：

```
$adapters = @(get-wmiobject win32_networkadapterconfiguration -filter "ipenabled = 'true'")
foreach ($adapter in $adapters) {
    #TODO: configure adapter
} 
```

除此之外，可能使用 switch 语句而不是一堆 if/else 语句，没有更好的方法来处理我能想到的不同返回类型。

# c - select()ed 套接字无法接收到完整的数据

> ID：14611505
> 
> 赞同：0
> 
> 时间：2013-01-30T18:49:57.443
> 
> 标签：c, sockets

使用以下伪 Python 脚本将数据发送到本地套接字：

```
s = socket.socket(AF_UNIX, SOCK_STREAM)
s.connect("./sock.sock")
s.send("test\n")
s.send("aaa\0")
s.close() 
```

我的 C 程序将随机结束`recv`以下缓冲区：

*   `test\n`
*   `test\n<random chars>`
*   `test\naaa`（如预期）

在套接字可读的点之后，套接字正在被`recv()`'d 。`select()`问题是，如何避免前两种情况？

还有一个问题：是否可以从该脚本发送以下两条消息：

*   `asd\0`
*   `dsa\0`

并且必须`select()`在每个 s 上将套接字显示为可读`send`的，还是只有在我再次运行脚本（重新启动套接字客户端`connect`ion）并为每个 s 发送消息时才会这样做`connect`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:53:26.760

猜测一下，[recv](http://linux.die.net/man/2/recv)`len`的参数指定了要读取的最大数据量，而不是要返回的精确数据量。 可以自由地返回任何数量的数据*，最多*字节。`recv` *`len`*

 *如果要读取特定数量的字节，请`recv`在循环中调用。

```
 int bytes = 0;
 while (bytes < len) {
    int remaining = len - bytes;
    int read = recv(sockfd, buf+bytes, remaining, 0);
    if (read < 0) {
        // error
        break;
    }
    bytes += read;
 } 
```

正如 junix 所指出的，如果您需要发送不可预测的数据量，请考虑定义一个简单的协议，该协议要么以每条消息的长度注释开始，要么以特定字节或字节序列结束。*

# java - 如何在不进行任何转换的情况下将字节数组转换为字符串数组

> ID：14611509
> 
> 赞同：0
> 
> 时间：2013-01-30T18:50:13.267
> 
> 标签：java, hex, byte

我有一个字节数组。我需要在屏幕上显示它的字节。如何在不进行任何转换的情况下将字节转换为字符串表示形式？

*通过转换，在这种情况下，我的意思是不将其解码为 ASCII 或任何其他等效的编码系统

例如，如果我有：

```
byte[] a = { 0x3F, 0x2C, 0x6A }; 
```

我想要这样的结果：

```
String[] b = { "3F", "2C", 6A"}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T18:57:13.577

```
byte[] a = { 0x3F, 0x2C, 0x6A };
String[] s = new String[a.length];
for (int i=0; i<a.length; i++) {
  s[i] = String.format("%02X", a[i]);
}
// s => ["3F", "2C", "6A"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:05:14.097

试试这个

```
Byte[] a = {31,22,62}; 

System.out.println(Arrays.deepToString(a)); 
```

# python - Python/Django：需要一个 ListBox/Dropdown 和 pytz common_timezones 名称每个 UTC 差异（偏移量）

> ID：14611510
> 
> 赞同：0
> 
> 时间：2013-01-30T18:50:14.087
> 
> 标签：python, html, django, timezone, pytz

需要一个带有 pytz common_timezones 的 ListBox/Dropdown 命名每个 UTC 差异。

```
<select style="cursor:pointer; min-width: 300px;" name="timezone">
    {% for tz in timezones %}
        <option value="{{ tz }}"{% if tz == TIME_ZONE %} selected="selected"{% endif %}>{{ tz }}</option>
    {% endfor %}
</select> 
```

我正在为该列表提供： 'timezones': pytz.common_timezones, 'TIME_ZONE': request.session['django_timezone'] on render to response ...

但我只得到一个名称列表..我需要一个名称列表，每个时区的 UTC 差异..

例子：

美国/XYZ UTC-xxxx/UTC-xxxx+1

欧洲/XPTO UTC+xxxx

已编辑：我很乐意在这一刻（这一刻）获得每个时区的当前已知偏移量，如此处所示[http://www.timeanddate.com/worldclock/](http://www.timeanddate.com/worldclock/)），如果可能的话，去年一/两年产卵（可能性像：[http](http://www.timeanddate.com/library/abbreviations/timezones/) ://www.timeanddate.com/library/abbreviations/timezones/ ）。

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:07:52.607

我来到了这个：

```
def get_timezones_with_gmt_diff(timezone_string_list = None):
    """
    Converts a datetime object into string.
    """
    if timezone_string_list:
        timezone_list = timezone_string_list
    else:
        timezone_list = pytz.common_timezones

    datetime1 = datetime.strptime("10-07-%s 00:00:00" % datetime.utcnow().year, "%d-%m-%Y %H:%M:%S")
    datetime2 = datetime.strptime("10-12-%s 00:00:00" % datetime.utcnow().year, "%d-%m-%Y %H:%M:%S")

    result_dict = {}
    for time_zone in timezone_list:
        result_dict[time_zone] = [Date.timedelta_in_seconds(pytz.timezone(time_zone).localize(datetime1).tzinfo._utcoffset)/3600,
                                  Date.timedelta_in_seconds(pytz.timezone(time_zone).localize(datetime2).tzinfo._utcoffset)/3600,
                                  time_zone.replace("/", " - ").replace("_", " "),
                                  Date.timedelta_in_seconds(pytz.timezone(time_zone).localize(datetime1).tzinfo._utcoffset)/3600 !=
                                  Date.timedelta_in_seconds(pytz.timezone(time_zone).localize(datetime2).tzinfo._utcoffset)/3600]

    sorted_result_dict = OrderedDict(sorted(result_dict.items(), key=lambda t: t[1][2]))
    return sorted_result_dict

def get_timezones_for_listbox(time_zones_dict):
    list = []
    for time_zone_tuple in time_zones_dict:
        # Has different DST/Summer times:
        if time_zones_dict[time_zone_tuple][3]:
            new_item = "%s      UCT %s/%s" % (str(time_zones_dict[time_zone_tuple][2]), str(time_zones_dict[time_zone_tuple][0]), str(time_zones_dict[time_zone_tuple][1]))
        # Does not change datetime:
        else:
            new_item = "%s      UCT %s" % (str(time_zones_dict[time_zone_tuple][2]), str(time_zones_dict[time_zone_tuple][0]))
        list.append(new_item)
    return list

def timedelta_in_seconds(duration):
    days, seconds = duration.days, duration.seconds
    return days * 24 * 60 * 60 + seconds 
```

当然，我将进一步操作这两种方法，以便从我的输入上下文中完成所需的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:02:38.360

```
 {% load tz %}

 <select style="cursor:pointer; min-width: 300px;" name="timezone">
     {% for tz in timezones %}
    <option value="{{ tz }}"{% if tz == TIME_ZONE %} selected="selected"{% endif %}>
        {{ tz }} - {{tz|utc}}
    </option>
    {% endfor %}
 </select> 
```

# wcf - WCF 绑定到 HTTPS

> ID：14611514
> 
> 赞同：19
> 
> 时间：2013-01-30T18:50:18.013
> 
> 标签：wcf, .net-3.5

我知道有很多关于此的帖子，并且我已经浏览了所有在我的搜索中出现的帖子并实施了提到的所有内容。我有一个 WCF Web 服务，可以在我的本地系统上运行 HTTP，它在服务器上运行 HTTP。但是客户端要求它通过 HTTPS 工作。这个网站和其他网站上的大量帖子告诉我，这并不像应有的那么简单，因为在此之前，ASMX Web 服务“正常工作”并且不需要复杂的配置。

我的当前配置出现以下错误：

> 找不到与具有绑定 WSHttpBinding 的端点的方案 https 匹配的基地址。注册的基地址方案是 [http]。

这是我目前的代码，经过几天的尝试配置它无济于事：

```
<system.serviceModel>

    <!--     -->
    <serviceHostingEnvironment  aspNetCompatibilityEnabled="true" >
        <baseAddressPrefixFilters>
            <add prefix="https://mysite.com"/>
            <add prefix="http://mysite.com"/>
        </baseAddressPrefixFilters>
    </serviceHostingEnvironment>

    <!-- Set up Custom Behaviors -->    
    <behaviors>

        <endpointBehaviors>
        </endpointBehaviors>

        <serviceBehaviors>
            <behavior name="WebPostService.WebPostServiceBehavior">
                <serviceMetadata httpsGetEnabled="true" httpsGetUrl="WebPostServices.svc/mex"  /> 
                <serviceDebug includeExceptionDetailInFaults="false" />
            </behavior>
        </serviceBehaviors>

    </behaviors>

    <!-- Set up the binding configuration  -->
    <bindings>

        <wsHttpBinding>
            <binding    name="SOAPBinding" 
            >

                <security mode="Transport">
                </security>
            </binding>
        </wsHttpBinding>

    </bindings>

    <services>

        <service    
                    behaviorConfiguration="WebPostService.WebPostServiceBehavior"
                    name="WebPostService.WebPostService"
        >

    <host>
      <baseAddresses>
        <add baseAddress="https://mysite.com/Services/WebPostService.svc"/>
      </baseAddresses>
    </host>
            <endpoint   address="" 
                        binding="wsHttpBinding" 
                        bindingConfiguration="SOAPBinding"
                        contract="WebPostService.IWebPostService"
            >
                <identity>
                    <dns value="mysite.com" />
                </identity>
            </endpoint>

            <endpoint   
                        address="mex" 
                        binding="mexHttpsBinding" 
                        contract="IMetadataExchange" 
            >
            </endpoint>

        </service>

    </services>

</system.serviceModel> 
```

我做错了什么，我怎样才能让它通过 HTTPS 工作？我很沮丧，这并不像它应该的那么简单。在这个项目上工作的几个月里，我一直沉浸在 MSDN 的 WCF 文档中，并且对服务、端点和绑定有很好的了解——这比我完全不了解更让我感到沮丧。

更新：仍在努力解决这个问题，当我尝试为 mex 地址输入完整 URL 时遇到了一个奇怪的错误。我改成这样：

```
address="https://prcwebs.com/Services/WebPostService.svc/mex" 
```

并得到错误：

> 此服务的安全设置需要 Windows 身份验证，但托管此服务的 IIS 应用程序未启用它。

我没有尝试使用 Windows 身份验证，安全设置未更改，仍设置为

> <安全模式="传输" />

[找不到与具有绑定 WebHttpBinding 的端点的方案 https 匹配的基地址。注册的基地址方案是 [http]](https://stackoverflow.com/questions/9817718/could-not-find-a-base-address-that-matches-scheme-https-for-the-endpoint-with-bi) [-](https://stackoverflow.com/questions/6846038/could-not-find-a-base-address-that-matches-scheme-http-for-the-endpoint-with-bin)没有帮助， 没有 提到任何有帮助 的内容 尝试更改为不同的安全模式，仍然无法使网站正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:32:06.380

添加`multipleSiteBindingsEnabled="true"`并`serviceHostingEnvironment`更新安全性以禁用客户端凭据：

```
<security mode="Transport">
    <transport clientCredentialType="None"></transport>
</security> 
```

**编辑** 我在 Windows 2003 下的最终工作版本具有以下配置。

```
<system.serviceModel>
    <serviceHostingEnvironment  aspNetCompatibilityEnabled="false" />

    <!-- Set up Custom Behaviors -->    
    <behaviors>
        <endpointBehaviors>
        </endpointBehaviors>
        <serviceBehaviors>
            <behavior name="WebPostService.WebPostServiceBehavior">
                <serviceMetadata httpsGetEnabled="true" httpsGetUrl="WebPostServices.svc/mex"  /> 
                <serviceDebug includeExceptionDetailInFaults="false" />
            </behavior>
        </serviceBehaviors>
    </behaviors>

    <!-- Set up the binding configuration  -->
    <bindings>
        <wsHttpBinding>
            <binding name="SOAPBinding">
                <security mode="Transport">
                  <transport clientCredentialType="None"/>
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>

    <services>
        <service behaviorConfiguration="WebPostService.WebPostServiceBehavior"
                 name="WcfService2.Service1">

            <host>
                <baseAddresses>
                    <add baseAddress="https://localhost/Service/Service1.svc"/>
                </baseAddresses>
            </host>
            <endpoint address="" 
                      binding="wsHttpBinding" 
                      bindingConfiguration="SOAPBinding"
                      contract="WcfService2.IService1">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>

            <endpoint address="mex" 
                      binding="mexHttpsBinding" 
                      contract="IMetadataExchange">
            </endpoint>
        </service>
    </services>
</system.serviceModel> 
```

您可以使用 https 访问该网站，所以我猜安装的证书部分是正确的。如果您有任何想与我的设置进行比较的内容，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T16:48:02.873

您为 HTTPS 使用了错误的绑定。

有两个单独的绑定类。wsHttpBinding 和 wsHttpsBinding 通知 s。您需要在绑定下为 HTTPS 添加一个 wsHttpsBinding，并且您需要为该绑定创建一个新端点。

此外，您通常会看到特定错误，我可以查看是否没有从该位置为 https 设置 IIS。

*   打开 IIS 管理器
*   打开网站
*   右键单击默认网站。
*   编辑绑定
*   确保存在 https 和 http 条目。

* * *

*   打开 IIS 管理器
*   找到您的应用程序（我认为它将成为默认网站）。
*   右键点击
*   管理网站/应用程序
*   高级设置
*   启用的协议
*   http,https

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T09:19:36.783

我用了这个，它对我有用，也许它可以帮助你

要在 WCF WsHttp 绑定上启用 Https，应该在 web.config 文件中更改一些简单的步骤。

这些步骤是：

**在服务的 web.config 文件中启用传输级安全性：**

在此步骤中，您需要将安全模式从无更改为传输。下面的代码显示了如何做到这一点：

```
<bindings>
    <wsHttpBinding>
        <binding name="TransportSecurity">
            <security mode="Transport">
                <transport clientCredentialType="None"/>
            </security>
        </binding>
    </wsHttpBinding>
</bindings> 
```

**绑定绑定并指定 HTTPS 配置**

您现在需要将绑定、预览步骤与端点相关联。使用 bindingConfiguration 标记来指定绑定名称。您还需要指定托管服务的地址。下面的代码显示了如何做到这一点

```
<service name="WCFWSHttps.Service1" behaviorConfiguration="WCFWSHttps.Service1Behavior">
<!-- Service Endpoints -->
    <endpoint address=https://localhost/WCFWSHttps/Service1.svc binding="wsHttpBinding"  bindingConfiguration="TransportSecurity" contract="WCFWSHttps.IService1"/>
    <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
</service> 
```

. 您还需要在 serviceMetaData 中将 httpGetEnabled 更改为 httpsGetEnabled。下面的代码显示了如何做到这一点：

```
<serviceMetadata httpsGetEnabled="true"/> 
```

希望它有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:16:24.057

我已经在 3.5 设置中使用了您的确切配置，并且它适用于以下 Luuk 回答中提到的`Transport`模式使用。`clientCredentialType="None"`但为了确定起见，我继续创建了一个示例项目来模拟尽可能多的环境，因为我可以从这里的信息中收集到。

为了模拟您的环境，我将 IIS (7.5) 设置为使用标准`Asp.Net 2.0 Integrated`应用程序池。我添加了 3 个 http 绑定和 3 个 https 绑定，以模拟您的“每个方案问题只能有一个地址”并`baseAddressPrefixFilters`使用它。

我只搜索并替换`mysite.com`到`localhost`. 下面是我用来生成屏幕截图的确切配置的复制粘贴：

**网络配置**

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" />
    <authentication mode="None"/>
    <customErrors mode="Off"/>
  </system.web>
  <system.serviceModel>
    <!--     -->
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true">
      <baseAddressPrefixFilters>
        <add prefix="https://localhost"/>
        <add prefix="http://localhost"/>
      </baseAddressPrefixFilters>
    </serviceHostingEnvironment>
    <!-- Set up Custom Behaviors -->
    <behaviors>
      <endpointBehaviors/>
      <serviceBehaviors>
        <behavior name="WebPostService.WebPostServiceBehavior">
          <serviceMetadata httpsGetEnabled="true" httpsGetUrl="WebPostServices.svc/mex"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <!-- Set up the binding configuration  -->
    <bindings>
      <wsHttpBinding>
        <binding name="SOAPBinding">
          <security mode="Transport">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="WebPostService.WebPostServiceBehavior" name="WebPostService.WebPostService">
        <host>
          <baseAddresses>
            <add baseAddress="https://localhost/Services/WebPostService.svc"/>
          </baseAddresses>
        </host>
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="SOAPBinding" contract="WebPostService.IWebPostService">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

结果如下：

![截屏](../Images/cb7594b0aa600f150aa12d4ef773c97c.png)

您会注意到它在完整网址中`WebPostService.svc`出现了两次。`mex`你需要放弃`httpsGetUrl`只是`mex`而不是`WebPostService.svc/mex`（或完全放弃它，它在我这边仍然可以正常工作）

如果您想讨论这个或除了 IIS 版本之外我们的环境之间可能有什么不同，我几乎整天都在 WPF 聊天室（另外 5-6 小时）。

# perl - 如何使用 nginx 和自定义 URI 开发和部署 Catalyst fastcgi 应用程序？

> ID：14611516
> 
> 赞同：2
> 
> 时间：2013-01-30T18:50:24.620
> 
> 标签：perl, nginx, fastcgi, catalyst

可能不太相关，但我将从我的环境开始：Linux OS、Perl 5.10、Catalyst 5.80032、nginx 1.0.11。

为了这个问题，假设我在端口 80 上使用*mydomain.com*作为应用程序网页的访问点。还让我们`/var/www/mydomain`用作我的 Catalyst 应用程序的物理位置。在这种情况下，静态内容位于`/var/www/mydomain/MyApp/root/`.

我将应用程序作为 fastcgi 服务器启动（来自`MyApp/script`）：

```
 > ./myapp_fastcgi.pl -l /tmp/myapp.socket -n 2 -p /tmp/myapp.pid -d 
```

我使用以下配置启动*nginx服务器：*

```
 server {
        listen       127.0.0.1:80;
        server_name  mydomain.com;

        location / {
            include        fastcgi_params;
            fastcgi_param  PATH_INFO  $fastcgi_script_name;
            fastcgi_pass   unix:/tmp/myapp.socket;
        }

        location /static {
            root   /var/www/mydomain/MyApp/root;
        }
    } 
```

`http://mydomain.com/`当我以或`http://mydomain.com/products`作为另一个页面（由 处理）访问应用程序时，一切似乎都正常`MyApp::Controller::Products`。

现在是挑战和问题：**应该如何配置*nginx*以便它可以为具有 URI 前缀（例如`/some/prefix`）**的应用程序页面提供服务？

在这种情况下，rootpage 应该以 as`http://mydomain.com/some/prefix/`和第二个 as访问`http://mydomain.com/some/prefix/products`。

问题的第二部分是：**应如何修改应用程序代码以便为重定向和所有页面提供有效的 URI？**即`$c->uri_for()`应该如何（重新）编写类似的方法以使前缀路径具有相同的行为？

我试过虚拟直接调整

```
 location /some/prefix {
        include        fastcgi_params;
        fastcgi_param  PATH_INFO  $fastcgi_script_name;
        fastcgi_pass   unix:/tmp/myapp.socket;
    } 
```

但当然它不是这样工作的。因此，在转向 Perl 代码并使用重定向和 URL 生成之前，即使手动输入 URL，我也无法获得响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:20:26.310

在`nginx`这样的指令中有`alias`. 它是这样工作的：

如果您有一个值为 的 url`http://my.domain.com/some/prefix/blabla.file`并使用`alias`带有指令的`location`指令，如下所示：

```
location /some/prefix {
   alias /var/www/mydomain/MyApp/root;
} 
```

结果 url 将是`/var/www/mydomain/MyApp/blabla.file`. 为什么？因为块`alias`中的指令`location`使用它的值（`alias`值）作为临时`root`服务文件和请求并从匹配的请求部分修剪`location`所以当请求在`/some/prefix/blabla.file`这里时，只有`/blabla.file`当你将它添加到`alias`值时，你才会得到你想要的（如果我很好理解你）。

**根据我们在评论中的讨论，亲爱的，我可以提出两件事。首先，在 nginx 中你可以添加这样的`location`块：**

```
location ~ ^/some/prefix(.*)$ {
   rewrite ^/some/prefix(.*)$ $1;
} 
```

该指令将从中删除`/some/prefix`并`/some/prefix/products`只留下`/products`. 接下来将您的`location`块更改为如下所示：

```
location / {
    include        fastcgi_params;

    # Here you provide for your Catalys real uri which was orignally provided by user
    fastcgi_param  REQUEST_URI $request_uri;

    fastcgi_param  PATH_INFO  $fastcgi_script_name;
    fastcgi_pass   unix:/tmp/myapp.socket;
} 
```

因此，您将`REQUEST_URI`Catalys 的参数设置为具有用户请求的价值而无需任何修改。在`nginx`是变量`$request_uri`和`$uri`。第一个的值永远不会改变，而第二个的值每次都会改变，例如，被`rewrite`指令重写。此外，这将起作用，因为`location ~`它具有更高的优先级，`location /`因此请求 url 将始终首先被修剪为仅在`/some/prefix`模式之后出现的内容。

现在有用吗？

# php - PHP：创建一个裁剪的矩形缩略图

> ID：14611517
> 
> 赞同：5
> 
> 时间：2013-01-30T18:50:28.633
> 
> 标签：php, image, crop

`@imagecopyresampled`我正在尝试在保持原始纵横比的情况下调整和裁剪图像。

这个想法是：1）我固定缩略图的尺寸（fe 300x40）2）从高度中心开始裁剪

![在此处输入图像描述](../Images/7baa023960ceb74063045a4b41c32b39.png) ![在此处输入图像描述](../Images/4b1ef81e78994c8ae7104aa45b22784e.png)

我试图阅读有关 stackoverflow 的文档和许多其他问题，但没有结果。任何人都可以帮助我吗？？我的实际代码如下：

```
//$img_height, $img_width [original size of the image]

$thumb_width  = 300;
$thumb_height = 40;
$new_img = @imagecreatetruecolor($thumb_width, $thumb_height);
$middle = floor($img_height/2);

$src_x = 0;
$src_y = $middle-($thumb_width/2);

$src_w = $img_width;
$aspectRatio = $img_width/$thumb_width;

//$src_h = ?????

$imgCopyRes = @imagecopyresampled(
                  $new_img, $src_img,
                  0, 0, 
                  $src_x, $src_y, 
                  $thumb_width, $thumb_height, 
                  $src_w, $src_h); 
```

* * *

**编辑 ：**

非常感谢@Joshua Burns，阅读您的课程并编辑您的代码，我找到了解决方案，但不包括整个文件。

**代码：**

```
$target_width  = 300;
$target_height = 40;
$new_img = @imagecreatetruecolor($target_width, $target_height);

$width_ratio  = $target_width  / $img_width;
$height_ratio = $target_height / $img_height;
if($width_ratio > $height_ratio) {
    $resized_width  = $target_width;
    $resized_height = $img_height * $width_ratio;
} else {
    $resized_height = $target_height;
    $resized_width  = $img_width * $height_ratio;
}
// Drop decimal values
$resized_width  = round($resized_width);
$resized_height = round($resized_height);

// Calculations for centering the image
$offset_width  = round(($target_width  - $resized_width) / 2);
$offset_height = round(($target_height - $resized_height) / 2);

$imgCopyRes = @imagecopyresampled(
                  $new_img, $src_img, 
                  $offset_width, $offset_height, 
                  0, 0, 
                  $resized_width, $resized_height, 
                  $img_width, $img_height); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:11:31.433

好吧，这对于您的需求来说可能有点臃肿，但它可以完成工作并且做得很好..

首先，将此类包含或粘贴到您的 PHP 代码中：http: [//pastebin.com/dnmiUVmk](http://pastebin.com/dnmiUVmk)

然后，使用类似于以下的类：

```
<?php
// Replace 'picture' w/ whatever the name of the file upload.
// Alternately, specify an absolute path to an image already on the server.
$upload_image_tmp_filename = $_FILES['picture']['tmp_name'];
$saveas_image_filename = 'my_resized_image.png';
$max_width = 300;
$max_height = 40;

// If there was a problem, an exception is thrown.
try {
    // Load the image
    $picture = New Image($upload_image_tmp_filename);
    // Save the image, resized.
    $picture->saveFile($saveas_image_filename, $max_width, $max_height, True);
} catch(Exception $e) {
    print $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:59:35.337

使用 Imagick ( [http://www.php.net/manual/en/class.imagick.php](http://www.php.net/manual/en/class.imagick.php) )

```
//instantiate the image magick class
$image = new Imagick($image_path);

//crop and resize the image
$image->cropThumbnailImage(100,100);

// save
$image->writeImage($your_file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:38:12.783

您可以使用以下代码来计算裁剪参数：

```
$target_width = 300;
$target_height = 40;
$test_case = array(
    array(233,350),
    array(350,233),
    array(300,40)
);
foreach ($test_case as $test) {
    list($source_width, $source_height) = $test;
    $source_ar = $source_width / $source_height;
    $target_ar = $target_width / $target_height;
    if ($source_ar > $target_ar) {
        $temp_height = $target_height;
        $temp_width = (int) ($target_height * $source_ar);
    } else {
        $temp_width = $target_width;
        $temp_height = (int) ($target_width / $source_ar);
    }
    $temp_crop_hori = (int) (($temp_width - $target_width) / 2);
    $temp_crop_vert = (int) (($temp_height - $target_height) / 2);
    echo "==================
source image: ${source_width}x${source_height}
temp image:   ${temp_width}x${temp_height}
target image: crop ${target_width}x${target_height} from ${temp_crop_hori}, ${temp_crop_vert}
";
} 
```

它打印：

```
==================
source image: 233x350
temp image:   300x450
target image: crop 300x40 from 0, 205
==================
source image: 350x233
temp image:   300x199
target image: crop 300x40 from 0, 79
==================
source image: 300x40
temp image:   300x40
target image: crop 300x40 from 0, 0 
```

您可以将这些信息用于：

1.  `imagecopyresampled`将**233x350**图像调整为**300x450**图像
2.  `imagecopy`**从0, 205**开始从**300x450**复制**300x40**部分

# bash - 解析文件以获取特定常量及其整数以存储到数组中

> ID：14611518
> 
> 赞同：1
> 
> 时间：2013-01-30T18:50:32.377
> 
> 标签：bash

我有几个像这样的异常类（是 PHP，但现在没关系）：

```
class FileNotFoundException extends OtherException {
    const DEFAULT_FILE_NOT_FOUND_ERROR_CODE = 159;

    public function __construct($code=self::DEFAULT_FILE_NOT_FOUND_ERROR_CODE) {
            parent::__construct($code);
    }

} 
```

# 问题

我需要从所有文件中获取错误代码以将它们存储到一个数组中（索引是错误代码，值是常量名称）以便按顺序打印它。

## 提示

1.  所有文件都是`.php`文件
2.  不断的错误代码总是像`const DEFAULT_[A-Z_]_ERROR_CODE = [0-9]+;`
3.  我试图存储在这样的数组中`array[159]="DEFAULT_FILE_NOT_FOUND_ERROR_CODE";`

# 我做了什么

我试图做的——用我的一点 bashscripting 知识——是一个解析所有这些 php 异常文件并只获取常量的**脚本**`DEFAULT_[...]_ERROR_CODE = "number";`

这是我的**script.sh**试图得到它：

```
#! /bin/bash

sed -n "s/const \(DEFAULT[A-Z_]*\) = \([0-9]*\);/$array[\2]=\1;/p" $1 
```

如果我这样做：
`script.sh < FileNotFoundException.php`

它输出`[159]=DEFAULT_FILE_NOT_FOUND_ERROR_CODE;`

然后我尝试在其中放置一个变量“数组”，如下所示：

```
eval('$array(`sed -n "s/const \(DEFAULT[A-Z_]*\) = \([0-9]*\);/$array[\2]=\1;/p" $1`)') 
```

和其他几种组合，但没有成功。

## 为什么我在stackOverflow中发布这个

我想知道是否可以解决它以及**如何**解决，或者是否有其他更容易的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:23:28.927

去掉前面的“$” `array`：

```
#! /bin/bash
sed -n "s/.*const \(DEFAULT[A-Z_]*\) = \([0-9]*\);.*/array[\2]=\1;/p" $1 
```

现在它将输出`array[159]=DEFAULT_FILE_NOT_FOUND_ERROR_CODE;`哪些可以被评估以设置数组元素：

```
eval "$(find yourdir -name '*.php' -exec cat {} + | yourscript)" 
```

（我还在`.*`sed 表达式中添加了一些 s 以便将 a 附加`$(rm -ri /)`到 php 脚本中的行不会导致您对其进行评估。）

# sql - InRecovery SQL Server 数据库模式

> ID：14611519
> 
> 赞同：0
> 
> 时间：2013-01-30T18:50:33.530
> 
> 标签：sql, sql-server

从以前就知道有一个数据库可以使用它。知道此数据库（ms sql 数据库）处于 InRecovery 模式。在这种模式下，我可以在 SQL Server Management Studio 中看到它，但我不能做任何其他事情。这意味着我看不到表格，看不到每个表格的数据，...。抽象地说，数据库名称旁边的加号按钮不存在。你可以猜到我做不到的其他事情。这个问题是从哪里来的？以及我如何解决这个问题。（注意：我没有这个数据库的任何备份）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:59:17.853

您必须等待它退出恢复模式。基本上，它发生了一些不好的事情，SQL 正试图从中恢复。如果它无法恢复，并且您没有备份，那么您就很不走运了。

# multithreading - （Google App Engine Python 2.7）主线程上的 webapp2 RequestHandler？

> ID：14611523
> 
> 赞同：0
> 
> 时间：2013-01-30T18:50:50.430
> 
> 标签：multithreading, google-app-engine, webapp2, requesthandler

我从一个简单的`Python 2.5` *应用程序引擎*应用程序开始并将其迁移到`Python 2.7`希望利用其多线程功能。迁移后，我注意到`webapp2.RequestHandler`所有实例都是从*Main Thread*调用的。

我有一个`AJAX`客户端触发多个异步请求。我只想在服务器端发生某些事件时才响应的请求之一。假设事件现在休眠 10 秒。问题是睡眠发生在*主线程*中并在处理我的第二个 ASYNC 请求之前占用线程`AJAX`。我错过了什么？

这是一个堆栈跟踪：

> PyDevDebug [PyDev Google App Run] dev_appserver.py
> MainThread - pid4276_seq4
> post [test1.py:53]
> dispatch [webapp2.py:570]
> **call** [webapp2.py:1102]
> default_dispatcher [webapp2.py:1278]
> **call** [webapp2.py :1529]
> 处理 [wsgi.py:223]
> HandleRequest [wsgi.py:298] HandleRequest [runtime.py:151]
> ExecutePy27Handler [dev_appserver.py:1525]
> ExecuteCGI [dev_appserver.py:1701]
> 调度 [dev_appserver.py:1803 ]
> 调度 [dev_appserver.py:719] _调度 [dev_appserver.py:2870]
> _HandleRequest [dev_appserver.py:3001]
> do_POST [dev_appserver.py:2794] handle_one_request [BaseHTTPServer.py:328]
> 处理 [BaseHTTPServer.py:340]
> **init** [SocketServer.py:638]
> **init** [dev_appserver.py:2780]
> finish_request [ SocketServer.py:323]
> process_request [SocketServer.py:310]
> _handle_request_noblock [SocketServer.py:284]
> handle_request [dev_appserver.py:3991]
> serve_forever [dev_appserver.py:4028]
> main [dev_appserver_main.py:721]
> [dev_appserver_main.py :747]
> run_file [dev_appserver.py:167] [dev_appserver.py:171] 运行 [pydevd.py:1090]
> [pydevd.py:1397]
> 线程 4 - pid4276_seq5 dev_appserver.py

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:28:56.790

似乎在开发（本地）服务器中，并行线程不是并行执行，而是串行执行。

[这里](http://code.google.com/p/appengine-devappserver2-experiment/)有一个“实验性开发服务器” ，你刚刚让我想起了：

**用于 Google App Engine 的实验性新开发服务器。**

> 多线程服务为复杂的应用程序提供更好的性能和更正确的语义，例如通过 urlfetch 访问您自己的应用程序不再出现死锁。

这可能会在本地解决它，但我没有亲自尝试过。

# javascript - 包含 if 语句和函数调用的 onblur 事件

> ID：14611529
> 
> 赞同：0
> 
> 时间：2013-01-30T18:51:10.197
> 
> 标签：javascript, html, onblur

我有这个代码：

```
onblur="(if(this.value==''){this.value=this.title});validateText(this.value);" 
```

我试图在 onblur 事件中结合 if 语句和函数调用，正如你猜到的那样，它不起作用。这甚至可能吗？如果是，那怎么办？因为如果我将为 if 创建另一个函数，这将花费我更多的时间，因为我需要再次分配 id，这样我就可以轻松地更改值。

我将如何解决这个问题？非常欢迎任何建议。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:52:21.117

只需去掉括号：

```
onblur="if(this.value==''){this.value=this.title};validateText(this.value);"
       ^^             no parentheses            ^^ 
```

# multicore - 犰狳线性系统求解器（带有openblas）

> ID：14611533
> 
> 赞同：3
> 
> 时间：2013-01-30T18:51:21.550
> 
> 标签：multicore, blas, armadillo

我一直在测试各种开源代码来求解 C++ 中的线性方程组。到目前为止，我发现最快的是犰狳，也使用了 OPENblas 包。为了解决一个密集的线性 NxN 系统，其中 N=5000 在我的系统上大约需要 8.3 秒，这真的非常快（没有安装 openblas，大约需要 30 秒）。

这种增加的一个原因是犰狳+openblas 似乎可以使用多线程。它在我的两个内核上运行，而没有 openblas 的犰狳只使用 1 个。我有一个 i7 处理器，所以我想增加内核数量，并进一步测试它。我正在使用 ubuntu，所以从 openblas 文档中我可以在终端中执行以下操作：

导出 OPENBLAS_NUM_THREADS=4

但是，再次运行代码似乎并没有增加正在使用的内核数量或速度。我做错了什么，还是 2 是使用犰狳的“solve(A,b)”命令的最大数量？我无法在任何地方找到犰狳的源代码来查看。

顺便说一句，有人知道犰狳/openblas 用于解决 Ax=b 的方法（具有并行性的标准 LU 分解或其他方法）吗？谢谢！

编辑：实际上，在使用突触包管理器安装 openblas 时，停留在 2 的核心数量似乎是一个错误，[请参见此处](https://bugs.launchpad.net/ubuntu/+source/openblas/+bug/817212)。从源代码重新安装允许它检测我实际拥有的核心数量 (8)。现在我可以使用 export OPENBLAS_NUM_THREADS=4 等来管理它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T06:31:48.967

[Armadillo](http://arma.sourceforge.net)不会阻止[OpenBlas](http://xianyi.github.com/OpenBLAS/)使用更多内核。OpenBlas 的当前实现可能只是为某些操作选择了 2 个内核。

您可以直接在“include”文件夹中的[可下载](http://arma.sourceforge.net/download.html)包（它是开源的）中查看犰狳的源代码。具体来说，查看文件“include/armadillo_bits/fn_solve.hpp”（其中包含用户可访问的*solve()*函数）和文件“include/armadillo_bits/auxlib_meat.hpp”（其中包含用于调用折磨人的 Blas 和 Lapack 函数）。

如果您的机器上已经安装了 Armadillo，请查看“/usr/include/armadillo_bits”或“/usr/local/include/armadillo_bits”。

# c# - LINQ to SQL Union 然后加入

> ID：14611541
> 
> 赞同：1
> 
> 时间：2013-01-30T18:51:35.820
> 
> 标签：c#, linq-to-sql

我有类似 Employee、Manager、Branch、Division、Employee_history 的表

让我们说两个表 Employee 和 Manager 共享某些列，例如employee_id、name、branch_id

分支表有 branch_id

分区表有 division_id

Employee_history 有 emp_hist_id。所有这些表都是一对多的关系

我要转换为 LINQ 的 SQL 是

```
select b.branch_id, e.employee_id 
from division d
join branch b on d.division_id = b.division_id
join 
      (   select employee_id, branch_id
          from EMPLOYEE 
          UNION 
          select employee_id, branch_id
          from MANAGER
       ) e
on e.branch_id = b.branch_id
join EMPLOYEE_HISTORY eh on eh.employee_id = e.employee_id 
```

我如何做一个 UNION 然后加入。我已经放了一个简化版本的 SQL，而不是我所拥有的。在我的实际SQL中，Branch表之前有两三个join，union之后有一个join

我的 LINQ 看起来像（类似于实际代码）

```
 from division in divisions
  join brnch in Branch on division.division_id equals brnch.division_id
  join empl in (
        from emplyee in Employee select new { EmployeeId = emplyee.employee_id},  BrnachId = branch_id).Union(
        from mngr in Manager select new { EmployeeId = mngr.employee_id, BrnachId = branch_id)
   on brnch.branch_id equals empl.BranchId
  join emplhistory in EMPLOYEE_HISTORY on empl.EmployeeId equals emplhistory.employee_id
  where division.division_type_id = 10
  select new
  {
     //...
  } 
```

我收到错误消息：

> join 子句中的表达式之一的类型不正确。对“加入”的调用中的类型推断失败。

在以 'join empl in (' 开头的行中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:18:45.933

您的`on`caluse of语法`Join`略有偏差。在 C# 中它不是：

```
on division.division_id = brnch.division_id 
```

它必须是：

```
on division.division_id equals brnch.division_id 
```

这需要对所有`on`条款进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:17:31.540

`LINQ`语句的顺序有点颠倒，而不是`SQL`. 并**确保`.Join()`属性名称和类型（！）是相等的**。您不能简单地加入 an `int`on an `int?`，您还必须转换`int`to be `int?`。

在下面的示例中，我假设`Branch_ID`on`Employee`并且`Manager`可以为空 ( `int?`)。

```
DataContext.GetTable<Employee>()
    .Select(e => new { e.ID, e.Name, e.Branch_ID })
    .Union(DataContext.GetTable<Manager>()
            .Select(m => new { m.ID, m.Name, m.Branch_ID }))
    .Join(DataContext.GetTable<Branch>(), 
            u => new { Branch_ID = u.Branch_ID },
            b => new { Branch_ID = (int?)b.ID },
            (u, b) => new { u.ID, u.Name, u.Branch_ID, b.Branch_Name })
    .Select(j => new { j.ID, j.Name, j.Branch_ID, j.Branch_Name }); 
```

* * *

为了完成它，我将其应用于实际代码：

```
divisions
    .Where(d => d.division_type_id == 10)
    .Join(branches, 
          d => (int?)d.division_id, 
          b => b.division_id, 
          (d, b) => new { b.branch_id }) // j1
    .Join(employees
            .Select(e => new { e.employee_id, e.branch_id })
            .Union(managers
                     .Select(m => new { m.employee_id, m.branch_id })),
          j1 => (int?)j1.branch_id,
          em => em.branch_id,
          (j1, em) => new { em.employee_id, em.branch_id }) // j2
    .Join(employeeHistory,
          j2 => j2.employee_id,
          h => h.employee_id,
          (j2, h) => new { j2.employee_id, j2.branch_id, h.history_line }) // j3 
```

# php - 跨不同域保留会话变量

> ID：14611545
> 
> 赞同：22
> 
> 时间：2013-01-30T18:51:58.150
> 
> 标签：php

我不确定这是否可能。

我公司的主要网站接受信用卡和其他付款信息。他们还有其他与我们举办的活动直接相关的网站。例如我们的主站点是这样的：

[http://www.etm124biz.com](http://www.etm124biz.com)

但是有另一个专门用于年度活动的网站：

[http://www.etm124annualgala.com](http://www.etm124annualgala.com)

我的“事件”站点正在处理注册并保存到我们的数据库，但我们的主站点处理信用卡处理。在主网站上处理当前购买时，会话用于将数据传递到支付/抄送屏幕。

无需更改我的付款代码（例如，接受 $_GET 参数），我的`$_SESSION`变量不应该传递吗？

例子：

```
$_SESSION['s_address1'] = $_POST['address1'];
$_SESSION['s_address2'] = $_POST['address2'];
$_SESSION['s_city']     = $_POST['city'];
$_SESSION['s_state']    = $_POST['state'];
$_SESSION['s_zip']      = $_POST['zip'];

header('Location: https://www.etm124biz.com/payment.php?oid=' . $oid . '&src=conf&id=' . $seq); 
```

我的`payment.php`页面查找上面的地址会话变量。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-30T18:54:10.870

## 跨域会话 ID

默认情况下，会话 ID 使用 cookie 传递。由于您的网站位于不同的域上，因此会话 cookie 不会传输过来，因此这是阻止跨域会话工作的一件事。

传递会话 ID 的一种技术是将它们附加到所有请求的查询字符串中（PHP 甚至对此有一定程度的内置支持）。然而，这种做事方式有许多缺点——最重要的是人们一直在复制/粘贴 URL，这意味着揭示有效和重用无效会话 id——因此*不推荐使用*。

更好的方法是使用 Javascript 跨所有感兴趣的域发出跨域请求（当然这需要合作）。通过这种方式，您可以根据需要在任意数量的服务器之间无缝传输会话 ID。

## 共享会话数据

即使 cookie 没有问题，您也需要将会话数据保存在所有服务器通常可以访问的某个存储上。默认存储是本地文件系统，所以如果你想要跨域会话，这也是需要改变的。

此问题的一个简单解决方案是使用[自定义会话处理程序](http://php.net/manual/en/session.customhandler.php)，将数据存储在数据库或其他全局可访问的存储中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-10T08:36:56.380

现在回答这个问题已经很晚了，但是由于我遇到了这个问题，即使经过数十个小时并搜索谷歌也找不到解决方案，stackoverflow 已经全部结束但没有成功。但现在我终于找到了问题和解决方案。

## 服务器端

对于**跨域 PHP 会话**，我们需要做以下事情

> **第1步**

首先，我们需要`.htAccess`在 php 接收请求的主域中设置这些行

```
SetEnvIf Origin ^(http?://m\.example\.com(?::\d{1,5})?)$   CORS_ALLOW_ORIGIN=$1
Header append Access-Control-Allow-Origin  %{CORS_ALLOW_ORIGIN}e   env=CORS_ALLOW_ORIGIN
Header set Access-Control-Allow-Methods "POST, GET, OPTIONS, DELETE, PUT"
Header set Access-Control-Allow-Credentials true
Header set Access-Control-Allow-Headers "x-requested-with, Content-Type, origin, authorization, accept, client-security-token" 
```

上面这些行告诉只允许来自**[http://m.example.com](http://m.example.com)**的请求。请注意，我已设置`http`. 您可以设置`https`是否有 SSL 连接。

> **第2步**

您必须先允许 PHP 为不同的子域共享相同的会话`session_start()`

```
ini_set('session.cookie_domain', '.example.com');
session_start(); 
```

如果您可以访问`php.ini`然后在那里设置它，那么您不需要在 PHP 文件中设置上述行。

## 客户端

最后，您必须告诉浏览器使用`Cross-Domain`. 就像在 JQuery 中一样

```
$(document).ready(function()
{
  $.ajaxSetup({
    crossDomain: true,
    xhrFields: {
        withCredentials: true
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T19:00:04.497

这个问题确实探索了很多。

*   [如何创建跨多个域的共享登录服务？](https://stackoverflow.com/questions/4306728/how-to-create-a-shared-login-service-across-multiple-domains)

# javascript - 我仍然无法为下面的这个 Jquery 事件获得帮助

> ID：14611554
> 
> 赞同：0
> 
> 时间：2013-01-30T18:52:53.730
> 
> 标签：javascript, jquery, jquery-ui, javascript-framework, jquery-events

在 ESNList 文本域 中 , 需要 输入 多个 值 以 逗号 分隔 , 但 它们 必须 在 同一 范围 内 .. 例如 , 在 循环 中 的 下面 条件 中 , 如果 你 在 ESNList 中 输入 一个 介于 986329 和 999999 之间 的 数字 . ，逗号后 ESNList 字段中的第二个输入应与第一个输入在同一范围内，依此类推，否则我会发出警报，说两个 ESN 应在同一范围内.. 我做了一个循环来执行检查，但是它不工作..有人可以向我证明错误在哪里..小提琴会帮助吨，

```
<html>
    <head>
    <script type="text/javascript" src="jquery/jquery-1.8.3.js"></script>
    <script type="text/javascript">

    $(function () {

    $(":text").css("border", "2px solid red");
      $(":text").keyup(function(){
        var enteredData = $(this).val()
        console.log(enteredData);
        if (enteredData == "") {
          $(this).css("border", "2px solid red");
        } else {
          $(this).css("border", "inherit");
        }
        if ($(this).attr("id") == "ESNList"){
       esnList = enteredData.split(',');
           }

           for(var i = 0; i < esnList.length; i++) {
            if  ( parseInt(esnList[i]) >= 986329 && parseInt(esnList[i]) <= 999999) {
                $("#ddl_StxName").val("stx2");
                $("#ddl_rtumodel").val("globalstar");
                }
            else if ( parseInt(esnList[i]) >= 660000 && parseInt(esnList[i]) <= 699999) {
                $("#ddl_StxName").val("mmt");
                $("#ddl_rtumodel").val("globalstar");
                 }
            else if ( parseInt(esnList[i]) >= 200000 && parseInt(esnList[i]) <= 299999) {
                $("#ddl_StxName").val("stm3");
                $("#ddl_rtumodel").val("stmcomtech");
                 }
            else if ( parseInt(esnList[i]) >= 1202114 && parseInt(esnList[i]) <= 1299999) {
                $("#ddl_StxName").val("smartone");
                $("#ddl_rtumodel").val("globalstar");
          }

          else { alert("ESNs should be within the same range"); }

        }

      });
      });
    </script> </head>
    <body>
    <form id="provision">
        ESNList:    <input  type="text" id="ESNList" name="ESNList" size="30" /> <br />
        ESN Start:<input type="text" id="ESNStart" name="ESNStart" size="10" /> <br />
        ESN End: <input type="text" id="ESNStart" name="ESNStart" size="10" /> <br />
        UnitName:<input type="text" id="STxName" name="STxName" size="30"  />  <br />  
         Unit Model:   <select name="STxName" id="ddl_StxName">
        <option value="stx2">STX2</option>
        <option value="stm3" selected>STM3</option>
        <option value="acutec">Acutec</option>
         <option value="trackpack">Trackpack</option>
        <option value="mmt">MMT</option>
        <option value="smartone">Smartone</option>
        <option value="smartoneb" >SmartOneB</option>
        </select> <br />
        RTU Model Type:
         <select name="rtumodel" id ="ddl_rtumodel">
        <option value="globalstar">GlobalStar</option>
        <option value="both">Both</option>
        <option value="comtech">Comtech</option>
        <option value="stmcomtech">STMComtech</option>
        </select> <br />
        <input type="submit" value ="submit"  />
        </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:46:39.920

哦，我的，从哪里开始？

一方面，keyup 将在每个连续的 keyup 事件之后触发，这意味着您将一遍又一遍地进行大量比较，并在用户完成输入之前得到很多“否定”第一个值。

为了节省一些痛苦，我从你的代码开始，在这个小提琴中：http: [//jsfiddle.net/mori57/68s68/](http://jsfiddle.net/mori57/68s68/)

（请注意，我在底部放置了一个 textarea 作为输出，因此您可以准确地看到范围检查是如何发生的。我还注释掉了警报，因为它与 keyup 相结合，创建了一个非常讨厌的循环.)

问题是每个比较只存在于当前值的上下文中......它无法判断“开始范围”应该是什么，因为你没有存储任何这样的东西来比较，所以，当谈到循环中的下一个值，它只是测试它当前正在查看的项目是否在指定的范围内，而不是它与最后一个查找项目的范围相同。

您可以通过将第一个比较存储在外部变量中来做到这一点，然后将第一个比较之后的每个值与保存在该外部变量中的范围进行比较。请参阅下面的代码以获取帮助您入门的示例。另外，在上下文中查看它，这里：http: [//jsfiddle.net/mori57/68s68/2/](http://jsfiddle.net/mori57/68s68/2/)

```
$(function () {
    var out = $("#output");
    var debug = function(txtIn){
        out.val(out.val() + "\n" + txtIn);
    };
    // store your ranges here, in an array
    var ranges = [
        [986329,999999],
        [660000,699999],
        [200000,299999],
        [1202114,1299999]
    ];

    // store the activeRange that is set by the first item in the comparison loop
    var activeRange = -1;

    // use this to test the a value against a given range array
    var withinRange = function(comparitor, range) {
        return (comparitor >= range[0] && comparitor <= range[1]);
    };

    $(":text").css("border", "2px solid red");
    // start the test onBlur, rather than on keyup
    $(":text").blur(function () {
        var enteredData = $(this).val()
        console.log(enteredData);
        if (enteredData == "") {
            $(this).css("border", "2px solid red");
        } else {
            $(this).css("border", "inherit");
        }
        if ($(this).attr("id") == "ESNList") {
            esnList = enteredData.split(',');
        }

        // loop through your values...
        for (var i = 0; i < esnList.length; i++) {
            // store the current value, rather than re-parseInt'ing it for every comparison
            var intVal = parseInt(esnList[i]);

            debug("intVal = " + intVal);

            // now, find out if an activeRange has been set
            if(activeRange == -1) {
                // if not, we need to find out what the activeRange is
                if (withinRange(intVal, ranges[0])) {
                    activeRange = ranges[0];
                } else if (withinRange(intVal, ranges[1])) {
                    activeRange = ranges[1];
                } else if (withinRange(intVal,ranges[2])) {
                    activeRange = ranges[2];
                } else if (withinRange(intVal,ranges[3])) {
                    activeRange = ranges[3];
                }
            } else {
                // if an activeRange has been set already, 
                // we need to find out if the current item is outside the activeRange
                if (!withinRange(intVal, activeRange)) {
                    debug("Value out of active range.");
                }
            }

            // Now that you know what your activeRange should be, you can
            // decide what to set your drop down lists to reflect
            switch (activeRange) {
                case ranges[0]:
                    $("#ddl_StxName").val("stx2");
                    $("#ddl_rtumodel").val("globalstar");
                    break;
                case ranges[1]:
                    $("#ddl_StxName").val("mmt");
                    $("#ddl_rtumodel").val("globalstar");
                    break;
                case ranges[2]:
                    $("#ddl_StxName").val("stm3");
                    $("#ddl_rtumodel").val("stmcomtech");                        
                    break;
                case ranges[3]:
                    $("#ddl_StxName").val("smartone");
                    $("#ddl_rtumodel").val("globalstar");
                    break;
                default:
                    debug("Value out of range.");
                    break;
            }
        }
    });
}); 
```

# php - 如何将 3rd 方应用程序添加到 Zend Framework 2 MVC (Apache)？

> ID：14611557
> 
> 赞同：1
> 
> 时间：2013-01-30T18:53:08.020
> 
> 标签：php, apache, zend-framework2, zend-framework-mvc

好的，所以我正在使用 Zend 2 框架并遵循基本的 Zend MVC 样式。但是可以说我想添加 site.com/blog （并且博客是第 3 方应用程序）。那么我该如何添加这个呢？如何告诉框架忽略 /blog？这只是一个 .htaccess 更改吗？（我正在使用 Apache）

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T17:27:20.693

试试这个：

```
<IfModule mod_rewrite.c>
 RewriteEngine On 
 RewriteBase /
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /index.php [L]
</IfModule> 
```

这将检测到 /blog/ 是一个真实的目录，并且可以正常访问它。然后，您可以在 blog 文件夹中有一个 htaccess 文件来执行您需要在那里重写的操作，并且在访问 blog 目录时将覆盖基本 htaccess

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T03:08:56.930

我想你已经一针见血了。ZF2 只会在网络服务器发挥作用后解释其路由 - 所以它不是一个真正的因素（也不应该是！）。为了提高效率，我强烈建议您将博客的位置标识为您的网络服务器配置中的一个单独的位置实体（因此这永远不会触及 ZF2 的海岸）。Nginx 非常优雅地做到了这一点，这是一个示例配置：

```
location ^~ /blog {
    root /var/www/example.com;
    index index.php index.html index.htm;
    try_files $uri $uri/ /blog/index.php;

    location ~ \.php {
        fastcgi_split_path_info ^(.*\.php)(.*)$;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
        fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;
        fastcgi_pass 127.0.0.1:9000;
    }
} 
```

各种好事都会发生，您可以将 wordpress 与 ZF2 分开（在各个方面），并且不会影响性能。我有一段时间没有和 Apache 共舞了，但我确信有一个等效的结构。双方，去 NGINX ;)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T17:34:10.397

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{REQUEST_URI} !^blog.*$
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

# jsp - 如何使用 在自定义标签jsp中

> ID：14611558
> 
> 赞同：1
> 
> 时间：2013-01-30T18:53:12.170
> 
> 标签：jsp, jboss, portlet

我在使用 customtag 时遇到问题，并且

这是我的标签日历

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE taglib PUBLIC "-//Sun Microsystems, Inc.//DTD JSP Tag Library 1.1//EN"
"http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd">
<taglib>
    <tlibversion>1.0</tlibversion>
    <jspversion>1.1</jspversion>
    <shortname>tagCalendar</shortname>
    <info>Custom Tag Visualizzazione Lista Calendari</info>
    <tag>
        <name>tagCalendar</name>
        <tagclass>it.postecom.postesalute.tag.TagCalendar</tagclass>
        <bodycontent>empty</bodycontent>
        <info>Custom Tag Visualizzazione Lista Calendari</info>
        <attribute>
            <name>pageRedirect</name>
            <required>true</required>
        </attribute>
        <attribute>
            <name>collectionCalendar</name>
            <required>true</required>
            <rtexprvalue>true</rtexprvalue>
        </attribute><attribute>
            <name>actionUrl</name>
            <required>true</required>
            <rtexprvalue>true</rtexprvalue>
        </attribute>
    </tag>
</taglib> 
```

这是我的 JSP 片段

```
<ct:tagCalendar actionUrl="<portlet:actionURL/>" pageRedirect="viewPage" collectionCalendar="<%=QueryCalendar.getUserCalendars(JodUtil.getToken(request))%>" /> 
```

和 TagCalendar.java 的 doStartTag 方法

```
 try {
        JspWriter out = pageContext.getOut();
        Iterator iter = collectionCalendar.iterator();
        ArrayList <JodBaseCalendar>userCalendarList = new ArrayList<JodBaseCalendar>();
        int cnt = 0;
        while (cnt <= 3) {
            userCalendarList.add((JodBaseCalendar) iter.next());
            cnt++;
        }

        out.println("<table>");
        for(JodBaseCalendar calendar:userCalendarList){
            out.println("<tr>");
            out.println("<a href='"+actionUrl +"?forwardTo="+pageRedirect+"&calendarId="+ calendar.getCalendarId()+"'>");
            out.println("["+calendar.getCalendarId()+" - "+calendar.getCalendarSubject()+"]");
            out.println("</a>");
            out.println("</tr>");

        }

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 

    return TagSupport.SKIP_BODY; 
```

标签不会转换为动作，而是像字符串一样使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:27:02.437

我是这样解决的，在jsp页面中

```
 <portlet:defineObjects /> 

    <ct:tagCalendar actionUrl="<%= renderResponse.createActionURL().toString() %>" pageRedirect="indexTo" collectionCalendar="<%=QueryCalendar.getUserCalendars(JodUtil.getToken(request))%>" /> 
```

# javascript - 简单的连接错误socket.io

> ID：14611561
> 
> 赞同：0
> 
> 时间：2013-01-30T18:53:19.907
> 
> 标签：javascript, html, node.js, canvas, socket.io

我在 nodejs + socket.io 中有一个简单的 tcp 连接服务器可以向服务器发送数据，但我没有卷土重来。

对不起我的英语我来自巴西

看代码。

客户端代码：

```
if(newY !== ymouse  || newX !== xmouse)
{
    socket.emit('chat', {playerX: playerX, playerY: playerY});
}

socket.on('chat',
            function (data)
            {
                console.log(data)

            //  $("p#data_recieved").append("<br />\r\n [position] {" + data.msgr + ": playerX = " + data.playerX + ", playerY = " + data.playerY + "}");
                document.getElementById("vy").innerHTML = data.X;
                document.getElementById("vx").innerHTML = data.y;

            } 
```

服务器代码：

```
var io = require('socket.io').listen(8000);

io.sockets.on('connection',
    function (socket)
    {
    socket.on('chat',
        function (data)
        {
            var sender = 'unregistered';
            socket.get('nickname', 
                function (err, name)
                {
                    console.log('Chat message by ', name);
                    console.log('error ', err);
                    console.log('X: ' + data.playerX);
                    console.log('Y: ' + data.playerY);
                    sender = name;
                });

            socket.broadcast.emit('chat', { playerX : data.playerX, playerY : data.playerY, msg : data, msgr : sender});
        });

    socket.on('position',
        function (data)
        {
            var sender = 'unregistered';
            socket.get('nickname', 
                function (err, name)
                {
                    sender = name;
                });

            if(sender == 'unregistered')
                return;

            var playerX = data.playerX;
            var playerY = data.playerY;

            socket.broadcast.emit('position', {msgr : sender, playerX : playerX, playerY : data.playerY});
        });

    socket.on('register',
        function (name)
        {
            socket.set('nickname', name,
                function ()
                {
                    io.sockets.emit('chat', {msg : "naay nag apil2! si " + name + '!', msgr : "mr. server"});
                });
        });

}); 
```

你怎么能看到我可以向服务器发送数据但没有响应服务器似乎运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:56:51.160

我留下一个简单连接的例子，你可以在其中激发灵感

服务器：

```
var simple = io
  .sockets
  .on('connection', function(socket) {
    socket.on('message', function(data) {
      socket.broadcast.send(data);
    });
    socket.on('disconnect', function() {
      // handle disconnect
    });
  }); 
```

客户：

```
var socket = io.connect();
var content = $('#simple-content');
socket.on('connect', function() {
  $('#simple-form').css('display', 'block');
  content.append($('<p>').text('Connected'));  
});

socket.on('message', function(msg) {
  content.append($('<p>').text(msg)
         .append($('<em>').text(' from server')));
});

$('#simple-form').submit(function(e) {
  e.preventDefault();
  var textObj = $('#simple-text');   
  var msg = textObj.val();
  textObj.val('');
  content.append($('<p>').text(msg)
         .append($('<em>').text(' from me')));
  socket.send(msg);
}); 
```

我希望它会有所帮助！

# c++ - 重载 + 运算符的奇怪行为

> ID：14611565
> 
> 赞同：1
> 
> 时间：2013-01-30T18:53:27.070
> 
> 标签：c++, operator-overloading

我已经创建了代表 Line 的类，`Linia` `(aX+bY=c)`并且我重载`+`了运算符，所以现在它返回`Linia`了具有`c = c + b/argument`. 但问题是当我使用这个运算符时，给定 Line 对象的所有字段都变为 0

```
 #include <iostream>

using namespace std;
struct Q{
public:
double x,y;
    Q(double x, double y){
        this->x = x;
        this->y = y;
    }
     friend ostream& operator<< (ostream &wyjscie, Q const& ex){
        wyjscie<<"("<<ex.x<<","<<ex.y<<")";
        return wyjscie;
     }

};
class Linia{
public:
    double a,b,c;
    Linia (double a, double b, double c){
        this->a = a;
        this->b = b;
        this->c = c;
    }
    Linia operator+ (double i){
       return Linia(a, b, c + i/b);
    }
      Linia operator- (double i){
       return Linia(a, b, c - i/b);
    }
    Q operator* (const Linia& i){
        double w = a*i.b - b*i.a;
        double wx = -c*i.b + i.c*b;
        double wy = a*(-i.c) + i.c*c;
        double x = wx/w, y = wy/w;
        cout<<*this<<endl;
        cout<<i<<endl;
        return Q(x,y);
    }
     friend ostream& operator<< (ostream &wyjscie, Linia const& ex){
        wyjscie<<ex.a<<"x + "<<ex.b<<"y = "<<ex.c;
        return wyjscie;
    }

};//podwyzszenie przez ile/B

int main()
{
    Linia* pionowa = new Linia(0,1,0);
    Linia* l = new Linia(1,1,3);
 //   Q q = (*l) * (*pionowa);
    cout<<"linia przed podniesieniem "<<*l<<endl;
 //   cout<<"punkt przeciecia przed podniesieniem: "<<q<<endl;
    l = l+3;
    cout<<"Line highered"<<*l<<endl;
    l = l-3;
    cout<<"Line Lowered "<<*l<<endl;
//    q = (*l) * (*pionowa);
 //   cout<<"punkt przeciecia po podniesieniu: "<<q<<endl;
    cout << "Hello world!" << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:55:55.613

你在这里做指针算术。这意味着`l`最终指向不应该指向的地址：

```
Linia* l = new Linia(1,1,3);
l = l+3; // l is a pointer!!! 
```

如果您停止`new`在任何地方使用原始指针，它可能会起作用。

```
int main()
{
    Linia pionowa(0,1,0);
    Linia l(1,1,3);
    l = l+3;
    cout<<"Line highered"<< l <<endl;
    l = l-3;
    cout<<"Line Lowered "<< l <<endl;

} 
```

# haskell - 为什么这个记录类型检查？

> ID：14611566
> 
> 赞同：3
> 
> 时间：2013-01-30T18:53:37.240
> 
> 标签：haskell, record

给定一个数据类型

```
data Foo = Foo { one :: Int, two :: String } deriving (Show) 
```

一个不完整的表达式通过了类型检查——例如

```
foo :: Foo
foo = Foo { one = 5 }

main = print foo 
```

类型检查（发出有关不完整记录的警告），然后（显然）在遇到表达式时崩溃。为什么会通过？没有记录语法它不会（即`bar = Foo 5 :: Foo`）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T19:11:20.150

Haskell 2010 报告在第[**3.15.2 节使用字段标签构建**](http://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-520003.15.2)

> 带有标签字段的构造函数可用于构造一个值，其中组件由名称而不是位置指定。与声明列表中使用的大括号不同，它们不受布局的影响；{ 和 } 字符必须是明确的。（字段更新和字段模式也是如此。）使用字段标签的构造受以下约束：[...]
> 
> *   未提及的字段初始化为⊥。
>     
>     
> *   如果在构造期间省略任何严格字段（声明类型以 ! 为前缀的字段），则会发生编译时错误。

所以它是语言规范的一部分，编译器必须接受代码。所有字段都被初始化，只有一些被初始化`undefined`。

```
foo = Foo{ one = 5 } 
```

相当于

```
foo = Foo 5 undefined 
```

如果您要求，一个好的编译器会警告您。如果您想要一个错误，请使字段严格。

# c# - 'Session' 抛出了 system.web.httpexception 类型的异常

> ID：14611568
> 
> 赞同：1
> 
> 时间：2013-01-30T18:53:40.513
> 
> 标签：c#, asp.net, session

我正在尝试`Session["user"]`启动，`Page_Load`但它一直让我崩溃：

> 'Session' 抛出了 system.web.httpexception 类型的异常
> 
> 会话状态只能在 enableSessionState 设置为 true 时使用，无论是在配置文件中还是在 Page 指令中。还请确保 System.Web.SessionStateModule 或自定义会话状态模块包含在应用程序配置的 \\ 部分中。

这是我的 web.config

```
<configuration>
<system.web>
<pages enableSessionState="true" />        
    <httpModules>
      <add name="Session" type="System.Web.SessionState.SessionStateModule" />
    </httpModules>
</system.web>
</configuration> 
```

配置标签里面还有其他的东西，但重要的部分是这个，配置正确，但错误仍然相同。

为什么会这样？

.aspx 没什么大不了的

```
protected void Page_Load(object sender, EventArgs e)
{
    try
    {
        if (Session["user"] == null)
            Response.Redirect("~/Login.aspx");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-26T19:54:12.627

我刚刚遇到了类似的问题，并在所有地方的[连字符网站上找到了解决方案。](http://www.experts-exchange.com/Programming/Languages/.NET/Q_24074282.html)我的代码：

```
 void Application_Error(object sender, EventArgs e )
    {
        Exception ex = Server.GetLastError();
        if ( ex != null )
        {
            if ( ex.GetBaseException() != null )
            {
                ex = ex.GetBaseException();
            }

            if ( Session != null )  // Exception occurred here.
            {
                Session[ "LastException" ] = ex;
            }

            Toolbox.Log( LogLevel.Error, "An Application Error Occurred", ex );
        }
    } 
```

...并将指示的行更改为：

```
 if ( HttpContext.Current.Session != null ) 
```

代码现在按我的预期执行。警告 Emptor：我指向该连字符网站的链接在此页面上的行为与从 Google 结果页面到我的查询的行为不同

```
'session' threw an exception of type 'system.web.httpexception' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:12:27.517

如果您使用的是 win2008 和 IIS，则默认情况下可能不会启用会话状态。您可以检查是否`Session State Mode Settings`在 IIS 中启用？

这是您要查找的内容的图片：

![在此处输入图像描述](../Images/7aea4453b8cea613676cd76de9742cc1.png)

右键单击并选择`Open Feature`并确保将其设置为`enabled`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T14:23:23.400

尝试`EnableSessionState="true"`在页面指令中设置

```
<%@ Page EnableSessionState="true" %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T19:09:44.707

您的 web.config 中有 Seesionstate 标签吗？尝试添加此标签。

样本：

```
 <sessionState mode="Off|InProc|StateServer|SQLServer"
          cookieless="true|false"
          timeout="number of minutes"
          stateConnectionString="tcpip=server:port"
          sqlConnectionString="sql connection string"
          stateNetworkTimeout="number of seconds"/> 
```

更多详情：http: [//msdn.microsoft.com/en-us/library/ms178586.aspx](http://msdn.microsoft.com/en-us/library/ms178586.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-12T07:19:40.307

我不确定这与多少相关，但我最近为自己创造了这个问题。

在一个较旧的 WebForms 项目中，我将一个类的名称从更改`_Default`为`[Default]`- 遵循样式指南。

`Default.aspx`那就是我的 WebForms 应用程序的默认页面所继承的 CodeBehind 类。

我不确定*为什么*这个名称会导致 Session 被删除，但将其改回以立即`_Default`解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-19T11:17:18.977

Convert.ToString() V/S obj.ToString()

使用 Convert.ToString()，因为如果您使用 obj.ToString() 并且 object(obj) 值为 null，它将引发“System.NullReferenceException”类型的异常。异常的原因是 null 没有名为 ToString() 的方法。

Response.Write("名称：" + Session["User_Name"].ToString()); //这里如果 Session["User_Name"] 为空会抛出异常。

Response.Write("名称：" + Convert.ToString(Session["User_Name"])); //这里不会抛出任何异常。

参考这个链接： [http ://burnignorance.com/asp-net-developer-tips/some-best-practices-while-writing-asp-net-code/](http://burnignorance.com/asp-net-developer-tips/some-best-practices-while-writing-asp-net-code/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-02T09:18:05.740

“ASP.NET 状态服务”的启动和停止在类似情况下帮助了我。

# r - 在ggplot2中绘制在另一个顶部

> ID：14611571
> 
> 赞同：4
> 
> 时间：2013-01-30T18:53:50.267
> 
> 标签：r, plot, ggplot2

我怎样才能在同一图中绘制参考线`Y1`和参考线？`Y2``ggplot2`

这是我的数据：

```
 year       partbuild    mean.t       sd.t  n.t      se.tr       ci1       ci2
1  2003          Assets  6.072719  11.109798  173  0.8446623  4.417181  7.728257
2  2003 Non-opportunity  3.793043  59.377032 4394  0.8957534  2.037366  5.548720
3  2003     Opportunity  2.650684   7.397618  257  0.4614507  1.746240  3.555127
4  2004          Assets 11.334394  19.609274  173  1.4908655  8.412297 14.256490
5  2004 Non-opportunity  5.922468  38.776455 4394  0.5849760  4.775915  7.069021
6  2004     Opportunity  4.757593  21.598943  257  1.3473051  2.116875  7.398311
7  2005          Assets 13.580937  23.748005  368  1.2379504 11.154554 16.007319
8  2005 Non-opportunity  9.698966 154.769250 4009  2.4443683  4.908004 14.489928 
```

这是我正在使用的代码

```
y.bar <- ddply(d1a, c('year', 'partbuild'), function(x) mean(x$transfers.cap, na.rm=T))
sd.tr <- ddply(d1a, c('year', 'partbuild'), function(x) sd(x$transfers.cap, na.rm=T)) 
n.tr <- ddply(d1a, c('year', 'partbuild'), function(x) length(x$transfers.cap))
db2 <- merge(y.bar, sd.tr, by=c('year', 'partbuild'))
db3 <- merge(db2, n.tr, by=c('year', 'partbuild'))
colnames(db3) <- c('year', 'partbuild', 'mean.t', 'sd.t', 'n.t')

p <- ggplot(db3, aes(y=mean.t, x=year, group=partbuild, shape=partbuild))
p + geom_point(aes(colour = partbuild), size=3.5) + geom_line(aes(colour = factor(partbuild)), size=1) + theme_bw() + ylab("Average of Federal Transfers per capita") + xlab("Year") + theme(axis.title.x = element_text(face='bold', size = 15, vjust = .25)) + theme(legend.title=element_blank()) + theme(axis.title.y = element_text(face="bold", size = 15, angle=90)) + scale_fill_discrete(name="") + theme(legend.text = element_text(colour="black", size = 13, face = "bold"))  + geom_vline(xintercept = c(2004, 2008), linetype="dashed" ) 
```

这是我得到的图片：

![样本图](../Images/f05b726c2bc68027eb5f5f1991c72dbd.png)

但是，我想用`n.tr`这些线后面的变量绘制区域。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:23:12.903

绘图仅显示部分数据，因为仅提供了前 8 行。

首先，在函数中提供和的`ggplot()`值，因为这些值对于所有层都是相同的。然后为每个元素提供值。使用是因为和值之间存在很大差异。`x=``colour=``y=``scale_y_log10()``n.t``mean.t`

```
p<-ggplot(data=db3,aes(x=year,colour=partbuild))
p+geom_bar(aes(y=n.t,fill=partbuild),stat="identity",position="dodge")+
 geom_line(aes(y=mean.t))+
  geom_point(aes(y=mean.t,shape=partbuild), size=3.5)+scale_y_log10()+theme_bw() 
```

![在此处输入图像描述](../Images/aa75e7e1236b330fde008e95b39f4d78.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T02:18:15.403

GGplot 默认使用这些颜色，但对于数据之上的数据，它并没有太大帮助。我想你可以试试：

```
p<-ggplot(data=db3,aes(x=year,colour=partbuild))
p+geom_bar(aes(y=n.t,fill=partbuild),stat="identity",position="dodge")+
 geom_line(aes(y=mean.t**, colour="black"**))+
  geom_point(aes(y=mean.t,shape=partbuild), size=3.5)+scale_y_log10()+theme_bw() 
```

我希望这有帮助。

# ruby - 字符串括号/赋值和一个shell命令

> ID：14611573
> 
> 赞同：0
> 
> 时间：2013-01-30T18:54:00.627
> 
> 标签：ruby

我正在使用厨师。为什么这不起作用？

```
someString[aSearchString]= `pwd` 
```

对我来说，`aSearchString`最终不会被替换。我必须`pwd`在单独的行中执行到变量中，然后使用它来进行替换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:05:01.090

尝试这个：

```
some_string.gsub('search_string', `pwd`)

>> s="./asd"   #=> "./asd"
>> s.gsub('.', `pwd`) #=> "/home/rahul\n/asd"
>> s.gsub('.', `pwd`.chop) #=> "/home/rahul/asd"   #chop because 'pwd` adds \n at end
>> s.gsub!('.', `pwd`.chop)  #=> "/home/rahul/asd" #inplace 
```

基准：

```
ree-1.8.7-2011.12 :005 > my_bm(1000){"/./././.".gsub(".", `pwd`)}
   user     system      total        real
0.040000   0.760000   0.800000 (  2.690505)
=> nil 
ree-1.8.7-2011.12 :006 > my_bm(1000){c=`pwd`;"/./././.".gsub(".", c)}
   user     system      total        real
0.140000   0.660000   0.800000 (  2.692811)
=> nil 
ree-1.8.7-2011.12 :007 > my_bm(1000){"/./././.".gsub(".", `pwd`)}
   user     system      total        real
0.090000   0.720000   0.810000 (  2.705673)
=> nil 
ree-1.8.7-2011.12 :008 > my_bm(1000){c=`pwd`;"/./././.".gsub(".", c)}
   user     system      total        real
0.090000   0.720000   0.810000 (  2.688737)
=> nil 
```

# azure - 在 Azure 表存储中创建目录层次结构

> ID：14611574
> 
> 赞同：4
> 
> 时间：2013-01-30T18:54:08.167
> 
> 标签：azure, hierarchical-data, azure-table-storage

是否可以在 Azure Tables 中创建类似结构的目录？

我需要将一些元数据存储在树状结构中。

例如，如果我有 10 个项目并且每个项目都包含一些元数据列（所有这些列都有一些公共列 [id、name、date created、author ... ]，但也可能是一个项目可能具有的一些列，但另一个没有）

这些项目能否以结构化方式存储？

```
 Item1
        |_____ Item2
                 |_____ Item3
                          |_____ ItemX 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T22:44:35.083

您无法按照您描述的方式嵌套，但使用 Azure Tables，您不一定需要这样做。在上面的示例中，我将设置 Item1 = Partition Key。项目 2-->n 每个都是行键。每一行都可以有一个唯一的模式，每个项目都是索引的一部分，所以查找会非常快。

行键只需要在分区中是唯一的，因此如果需要，您可以有一个重复的模式（很难从描述中分辨出来）。

然后，您可以通过查询 PK 来获取与 Item1 相关的所有项目，或者通过指定 PK + RK 来获取单个项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T19:10:29.140

否 - Azure 表不是关系表 -[在此处](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)阅读更多信息。但是，您可以拥有多个属性，以便实体具有未填充的属性。如果您有 Azure 帐户，则可以使用[Azure 存储资源管理器](http://azurestorageexplorer.codeplex.com/)来探索和测试 Azure 表。

# php - __set __get、访问公共字段和 __call 的顺序是什么？

> ID：14611580
> 
> 赞同：0
> 
> 时间：2013-01-30T18:54:35.733
> 
> 标签：php, get, set, call, magic-methods

假设我们有这个代码：

```
class SomeClass{

    private $somePrivateField;

    public function __get($name){
        $function = "get".ucfirst($name);
        return $function;
    }

     public function __set($name,$value){
        $function = "set".ucfirst($name);
        return $function($value);
    }

    public function __call($name, $arguments) {
        //if function being called is getSomething
        //getThat private/protected field if exists and return
        //if not raise exception

        // similar for setSomething...
    }

} 
```

这是一些教程的一段话：

__get() 方法接受一个参数，该参数表示正在设置的属性的名称。在 $obj->property 的情况下，参数将是属性。

然后我们的 __get() 方法将其转换为 getProperty，它与我们在 __call() 方法中定义的模式相匹配。这意味着**$obj->property会先尝试设置一个同名的公共属性，然后去__get()，然后尝试调用公共方法setProperty()，然后去__call()，最后设置受保护的 $_property。**

所以当我在代码中的某个地方说

```
$obj->property 
```

我可以理解它首先尝试访问公共字段。为什么它首先进入 __get() ？为什么不 __set() ？那为什么会去 __set() 呢？

有人可以解释一下吗？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:56:07.047

*   `__get()`只会返回一个包含可能不存在的函数名称的字符串。
*   `__set()`实际上调用了它构造名称的函数，但我无法确定*原因*，因为......
*   `__call()`似乎必须确定它调用的函数实际上是“setter”还是“getter”函数，这`__get()`首先是重点`__set()`。
*   `$obj->property`是一段毫无意义的代码片段，实际上它自己并没有做任何事情。

```
// assuming $obj->property is declared as private, or does not exist in the class.

$var = $obj->property; // invokes __get('property')

$obj->property = $var; // invokes __set('property', $var)

$obj->someFunction($var1, $var2, ...);
// invokes __call('someFunction', array($var1, $var2, ...)), but only if
// the specified function is private, or otherwise does not exist. 
```

重写示例代码以使其具有某种意义：

```
class SomeClass{

    private $somePrivateField;

    public function __get($name){
        if( isset($this->$name) ) {
            return $this->$name;
        } else {
            Throw new Exception("Object property $name does not exist.");
        }
    }

     public function __set($name,$value){
        if( isset($this->$name) ) {
            $this->$name = $value;
        } else {
            Throw new Exception("Object property $name does not exist.");
        }
    }
}
$obj = new SomeClass();
$obj->somePrivateField = $var; // uses __set()
$var = $obj->somePrivateField; // uses __get() 
```

`__call()`很少需要使用all，对于给定的示例当然不是。

或者，如果您希望能够设置/获取私有/公共属性而无需先显式声明它们：

```
class SomeClass{

    private $properties = array();

    public function __get($name){
        if( isset($this->properties['name']) ) {
            return $this->properties['name'];
        } else {
            Throw new Exception("Object property $name does not exist.");
        }
    }

     public function __set($name,$value){
        $this->properties[$name] = $value;
    }

    // it's also a good idea to define __isset() and __unset() in this case as well
    public function __isset($name) {
        return isset($this->properties['name']);
    }

    public function __unset($name) {
        return unset($this->properties['name']);
    }
} 
```

# java - jpa多个双向多对一关系到同一字段

> ID：14611581
> 
> 赞同：2
> 
> 时间：2013-01-30T18:54:39.487
> 
> 标签：java, jpa, mapping, replace

我有一个问题，希望有人能帮我解决。

我的系统有一个实体“产品”。在产品上应该可以设置“替换产品”（应该出售的产品而不是原始产品）。我们有两种替换方式。在产品上，我需要能够设置无、其中一种或两种类型的替换产品。但是，每种类型只能设置一个产品。除此之外，我希望能够查看一个产品并获取将该产品作为替代产品的其他产品的列表。

精简版：

*   产品 -> 替换（两种类型，每种一种）
*   产品 -> 它替换的产品列表（两种类型的替换）

到目前为止，我的解决方案是创建一个带有子类的抽象类 ReplacementProduct（每个替换类型一个），并带有鉴别器值。数据库中的replacementproduct表有以下字段：id、replacementproduct、replacementType

此外，我在 Product 实体上放置了两个字段（替换类型的子类的实例）。像这样，我已经获得了从产品到具有替换类型的另一种产品的单向链接。

我的问题是使此链接双向进行。正如我所说，我希望能够获得一份产品清单，其中有问题的产品作为他们的替代产品。

在不使用大量 java 逻辑的情况下这可能吗？

我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:12:48.620

听起来产品之间需要双向多对多。拥有方将设置映射键映射，使用类型作为键。对方不需要钥匙，会反映它可以替换的所有产品。这在这里描述 [http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Map_Key_Columns_.28JPA_2.0.29](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Map_Key_Columns_.28JPA_2.0.29)

# ssas - SSAS 自定义总费率（加权平均）

> ID：14611582
> 
> 赞同：3
> 
> 时间：2013-01-30T18:54:46.410
> 
> 标签：ssas

我需要更改利率列的总计。我的意思是，比率列中的总数是总结性的，我需要加权平均值而不是总数。例如：

金额............率

450000........8.75

390000........8

15000…………2

855000（总计）...8.29（加权平均）

我试图在 SSAS 的 CALCULATIONS 选项卡中执行此操作，但我无法确定每个组的总水平。

请一些想法，指出我正确的方向......

谢谢

JA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T06:34:53.693

我会在您的源 SQL 视图或 DSV 中添加一个计算来计算例如费率权重 = 费率 * 金额。然后，我会将其添加为常规度量 Sum 聚合，一旦您完成测试就隐藏起来。

然后 SSAS 计算变为：rate weight / amount（包裹在典型的 Iif 函数中以避免除以零）。

在叶子级别，这会返回权重。在任何汇总级别，它将返回加权平均值。

# php - PHP 如何在内部使用数组键和类型？

> ID：14611585
> 
> 赞同：5
> 
> 时间：2013-01-30T18:54:52.040
> 
> 标签：php

假设我定义了一个数组：

```
$a = Array();
$a[0] = 1;
$a['0'] = 2;
$a['0a'] = 3;
print_r($a); 
```

输出是相当预期的。我假设内部有某种`strval()`或`intval()`正在进行以允许覆盖该值。

```
Array
(
    [0] => 2
    [0a] => 3
) 
```

但这让我感到困惑。

```
foreach($a as $k => $v) {
    print(gettype($k) . "\n");
} 
```

这给了我：

```
integer
string 
```

PHP 在使用数组键时如何在内部进行这些类型转换？[即，它如何根据文档](http://php.net/manual/en/language.types.array.php)确定密钥是“有效的十进制整数” ？此外，[`is_int`](http://php.net/manual/en/function.is-int.php)不适用于字符串。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T19:39:16.547

全部在[php 手册中解释](http://php.net/manual/en/language.types.array.php)

> PHP 中的数组实际上是一个有序映射。
> 
> 键可以是整数或字符串。

执行了一些类型转换（即使在字符串上）

> 包含有效整数的字符串将被转换为整数类型。例如，键“8”实际上将存储在 8 下。另一方面，“08”不会被强制转换，因为它不是有效的十进制整数。
> 
> 浮点数也被转换为整数，这意味着小数部分将被截断。例如，密钥 8.7 实际上将存储在 8 下。
> 
> 布尔值也被转换为整数，即键 true 将实际存储在 1 下，而键 false 将存储在 0 下。
> 
> Null 将被强制转换为空字符串，即键 null 将实际存储在 "" 下。
> 
> 数组和对象不能用作键。这样做会导致警告：非法偏移类型。

**编辑**

如果你想了解更多关于 PHP 如何在内部处理数组，我推荐[这篇文章](http://nikic.github.com/2012/03/28/Understanding-PHPs-internal-array-implementation.html)

# mysql - 偶尔重启时无法连接到 MySQL 以获取单个测功机

> ID：14611586
> 
> 赞同：2
> 
> 时间：2013-01-30T18:54:55.787
> 
> 标签：mysql, ruby-on-rails, heroku, amazon-web-services

每隔一段时间，当我们重新启动应用程序或测功机自动循环/重新启动时，测功机会重新启动，但会出现`Can't connect to MySQL server on (url) (110)`错误。然后将在我们收到的每个请求中不断抛出`!! Unexpected error while processing request: can't modify frozen array`错误，直到我们手动重新启动测功机。就像我们所有其他的测功机一样，它非常好

```
Jan 29 22:18:23 myapp heroku/web.26:  State changed from up to starting
Jan 29 22:18:27 myapp heroku/web.26:  Stopping all processes with SIGTERM
Jan 29 22:18:29 myapp heroku/web.26:  Process exited with status 0
Jan 29 22:18:32 myapp heroku/web.26:  Starting process with command `bundle exec thin -p 41924 -e production -R /home/heroku_rack/heroku.ru start`
Jan 29 22:18:40 myapp app/web.26:  >> Thin web server (v1.4.1 codename Chromeo)
Jan 29 22:18:40 myapp app/web.26:  >> Maximum connections set to 1024
Jan 29 22:18:40 myapp app/web.26:  >> Listening on 0.0.0.0:41924, CTRL+C to stop
Jan 29 22:18:42 myapp heroku/web.26:  State changed from starting to up
Jan 29 22:19:08 myapp app/web.26:  Starting the New Relic Agent.
Jan 29 22:19:08 myapp app/web.26:  Installed New Relic Browser Monitoring middleware
Jan 29 22:19:08 myapp app/web.26:  ** [NewRelic][01/29/13 19:19:08 -0800 dd1c41a1-e62a-46f0-bdc8-f48919d4db3c (2)] INFO : Dispatcher: thin
Jan 29 22:19:08 myapp app/web.26:  ** [NewRelic][01/29/13 19:19:08 -0800 dd1c41a1-e62a-46f0-bdc8-f48919d4db3c (2)] INFO : Application: myapp
Jan 29 22:19:08 myapp app/web.26:  ** [NewRelic][01/29/13 19:19:08 -0800 dd1c41a1-e62a-46f0-bdc8-f48919d4db3c (2)] INFO : New Relic Ruby Agent 3.5.3 Initialized: pid = 2
Jan 29 22:19:08 myapp app/web.26:  ** [NewRelic][01/29/13 19:19:08 -0800 dd1c41a1-e62a-46f0-bdc8-f48919d4db3c (2)] INFO : NewRelic::Agent::Samplers::DelayedJobSampler sampler not available: No DJ worker present
Jan 29 22:19:18 myapp app/web.26:  ** [NewRelic][01/29/13 19:19:18 -0800 dd1c41a1-e62a-46f0-bdc8-f48919d4db3c (2)] INFO : Connected to NewRelic Service at collector-1.newrelic.com
Jan 29 22:19:18 myapp app/web.26:  ** [NewRelic][01/29/13 19:19:18 -0800 dd1c41a1-e62a-46f0-bdc8-f48919d4db3c (2)] INFO : Reporting performance data every 60 seconds.
Jan 29 22:19:31 myapp app/web.26:  !! Unexpected error while processing request: Can't connect to MySQL server on 'myrdsinstance.us-east-1.rds.amazonaws.com' (110)
Jan 29 22:19:31 myapp app/web.26:  !! Unexpected error while processing request: can't modify frozen array
Jan 29 22:19:31 myapp app/web.26:  !! Unexpected error while processing request: can't modify frozen array
Jan 29 22:19:31 myapp app/web.26:  !! Unexpected error while processing request: can't modify frozen array
Jan 29 22:19:31 myapp app/web.26:  !! Unexpected error while processing request: can't modify frozen array
Jan 29 22:19:31 myapp app/web.26:  !! Unexpected error while processing request: can't modify frozen array 
```

我们的 MySQL 实例是一个 RDS 实例，我们从未遇到过从其他 EC2 实例或本地连接到它的问题，仅从我们的 Heroku dynos 连接到它。

认为这可能是[`back_log`](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_back_log)问题，我们提高了该值，但它对错误的发生没有影响。

我们还能尝试什么来帮助诊断问题所在或消除此连接问题？在 RDS 和 Heroku 上，我们的日志记录选项似乎相当有限......是否有某种方法可以让 MySQL 自动重新连接其连接，因为 Heroku 会覆盖您的 database.yml？

# jquery - 包装器溢出后窗口滚动到顶部：通过 jQuery 隐藏

> ID：14611591
> 
> 赞同：0
> 
> 时间：2013-01-30T18:55:06.390
> 
> 标签：jquery, css, overflow, hidden, scrolltop

在我的包装器溢出后，我不希望窗口滚动到顶部：通过 jQuery 隐藏。

```
$('#shownav').click(function(event) {
    $('#wrapper').toggleClass('noscroll');      
    return false;
}); 
```

html:

```
<div id="shownav"> navigation </div>
<div id="wrapper"> long content </div> 
```

CSS：

```
.noscroll {overflow:hidden;} 
```

导航是`position:fixed;`

包装器有`position: relative;`和`width: 100%; height:100%;`

如果我向下滚动长长的内容并单击#shownav，则内容会像 scrollTop(0) 一样滚动到顶部。但我不知道这是什么！我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:56:56.730

尝试这个：

```
$('#shownav').click(function() {
    $('body').toggleClass('noscroll');
}); 
```

# iphone - 去除疙瘩/柔化图像/用周围像素替换图像像素

> ID：14611592
> 
> 赞同：3
> 
> 时间：2013-01-30T18:55:07.140
> 
> 标签：iphone, ios, objective-c

[http://beautifulapps.mobi/acne/](http://beautifulapps.mobi/acne/)

这里还有另一个例子 ![具有相同功能的其他示例](../Images/24ea8cef1b7f8e912fc8a7511e681757.png)

我也需要在我自己的应用程序中实现这样的粉刺去除。我尝试搜索堆栈溢出并遇到了几十个问题，但它们与简单的图像过滤器有关。我想应用模糊，但后来我给出了一个很好的结果，我认为模糊不会是这里的解决方案。

布拉德 GPUImage 库也在那里..它有很多效果..我经历过它们对我的情况没有帮助..我可能错过了一个重要的..如果你知道这可以通过那个库来实现..请指出..否则任何关于采取什么步骤来达到这种效果的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:36:40.890

GPUImage 框架将为您提供帮助。看看这里描述的过滤器：[JH Labs](http://www.jhlabs.com)。你需要做的是（这并不容易；很多工作）

1.  弄清楚脸部肤色。使用人脸检测算法定位人脸，然后从额头和脸颊区域采样肤色。
2.  对于每种肤色类型，您需要有一系列您认为肤色的颜色。
3.  在您的过滤器中，如果有问题的像素落在肤色范围内，则应用最小或中值过滤器（主要是噪声消除过滤器；不是模糊过滤器 - 这会让您无处可去）。您可能需要多次通过过滤器。

# vba - 难以将 VBA 数组保存到 Excel 中的范围

> ID：14611598
> 
> 赞同：2
> 
> 时间：2013-01-30T18:55:20.967
> 
> 标签：vba, excel

我已经玩了几个小时了，离解决方案还差得远。

当我通过以下方式创建数组时，它会毫无困难地输出到一个范围：

```
Dim Destination As Range
Set Destination = NewSheet.Range("A1")

ReDim OutArray(1 To 1, 1 To NumArrayCols) As Variant
OutArray(1, 1) = "hello"
Destination.Resize(UBound(OutArray, 1), UBound(OutArray, 2)).Value = OutArray 
```

但是，当我以以下方式创建输出数组时，它只是将一个大的空白数组粘贴到我的电子表格中。代码的第一部分可能几乎无关紧要，但我想包括它以防我遗漏任何东西：

```
ReDim OutArray(1, 1 To NumArrayCols) As Variant
Set ThisAtt = Wells.CurrWell.FirstAttribute(Skip:=False)
k = 1
OutArray(1, k) = "UWI"
Do
    ElevOffset = 0
    Set ThisAtt = Wells.CurrWell.CurrAttribute
    If InStr(LCase(ThisAtt.Name1), "elevation") Then
        OutArray(1, k + 1) = ThisAtt.Name1
        OutArray(1, k + 2) = ""
        OutArray(1, k + 3) = ThisAtt.Name2
        OutArray(1, k + 4) = ""
        ElevOffset = ElevOffset + 2
    Else
        OutArray(1, k + 1) = ThisAtt.Name1
        OutArray(1, k + 2) = ThisAtt.Name2
    End If
    OutArray(1, k + ElevOffset + 3) = "Recommend"
    OutArray(1, k + ElevOffset + 4) = "Rec. Value"
    OutArray(1, k + ElevOffset + 5) = "Comments"
    k = k + ElevOffset + 2 + AdditionalColumns
Loop While Not (Wells.CurrWell.NextAttribute(EnableSkipping:=False) Is Nothing)

Dim Destination As Range
Set Destination = NewSheet.Range("A1")
Destination.Resize(UBound(OutArray, 1), UBound(OutArray, 2)).Value = OutArray 
```

这很奇怪，因为 OutArray 中的每个元素，经过检查，似乎都在那里。我的手动生成的数组工作正常，但自动生成的数组——在几乎所有方面看起来都相似——不起作用。有谁知道为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:08:21.207

我怀疑这只是你的`REDIM`陈述。在你的第一个例子中，你有这个：

```
ReDim OutArray(1 To 1, 1 To NumArrayCols) As Variant 
```

但在第二个例子中你这样做：

```
ReDim OutArray(1, 1 To NumArrayCols) As Variant 
```

注意到区别了吗？当您说`ReDim A(1 To 1)`上限和下限均为 1，但`Redim(1)`仅说上限为 1 时，下限设置为默认值，即零 (0)。因此，这两个数组的形状/大小不同，因此在第二种情况下，您的数组不适合目标范围。

# c# - wp8中的多个webview？

> ID：14611601
> 
> 赞同：0
> 
> 时间：2013-01-30T18:55:39.073
> 
> 标签：c#, javascript, cordova, windows-phone-8

你如何嵌入一个可以打开其他 web 视图的 web 视图，你可以轻松地在 Windows Phone 8 的 PhoneGap 应用程序之间切换？我找不到任何有关如何将多个 webview 嵌入到 windows 8 移动应用程序的资源。我真的在寻求任何可以提供帮助的指导。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:23:52.453

看看[ChildBrowser 插件](https://github.com/sgrebnov/incubator-cordova-wp8/tree/master/plugins/www/plugins/ChildBrowser)，它允许您打开一个新的浏览器窗口，甚至有事件来捕获来自生成的子窗口的响应。这是您正在寻找的 PhoneGap 中最接近的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:22:44.737

Windows Phone 不支持`WebBrowser`单个页面上的多个控件。如果您需要多个嵌入式浏览器控件或更改单个嵌入式控件的内容，则需要使用多个页面。

在不知道您要达到的目标的情况下，很难知道最适合您的方法是什么。

# javascript - 除了 undefined 之外，javascript 的 void 函数的用例

> ID：14611603
> 
> 赞同：0
> 
> 时间：2013-01-30T18:55:48.220
> 
> 标签：javascript, void

除了明显防止链接被点击（with `javascript:void(0);`）和`undefined`在许多javascript预编译语言中定义，比如coffeescript（where`undefined`变成`void 0`）-->这个函数还能`void`用来做什么？

* * *

相关：[“javascript:void(0)”是什么意思？](https://stackoverflow.com/questions/1291942/what-does-javascriptvoid0-mean)

有用[的链接：MDN 页面`void`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:20:50.170

首先，`void`是一个操作符，而不是一个函数。无法比您在问题中提供的[MDN 链接中](https://stackoverflow.com/questions/1291942/what-does-javascriptvoid0-mean)给出的解释更清楚地给出您问题的答案：

> ## 概括
> 
> 运算符计算给定的`void`表达式，然后返回`undefined`。
> 
> ...
> 
> ## 用途
> 
> 此运算符允许将产生副作用的表达式插入到`undefined`需要计算结果的表达式的位置。

### 理论用途：

更改产生副作用的表达式的返回值。

```
var i;
i = 0;       // returns 0
void i = 1;  // returns undefined 
```

但在大多数情况下，这种用途并不是很有价值。

### 实际用途：

我们已经知道：

*   取消小书签中的导航
*   比较项目`undefined`- 由于`undefined`可以修改全局变量（它不是保留字），`void 0`因此是一种更可靠的获取`undefined`值的方法。例如：`obj.foo === void 0`

其他用途：

**防止冗长的控制台输出**- 当我只想执行一些代码并且不想用无趣的冗长输出污染控制台时，我在 JavaScript 控制台中使用它。

**显式传递`undefined`给函数**- 了解是否在没有传递参数的情况下调用函数，或者是否将参数传递给具有以下值的函数会很有用`undefined`：

```
function countArguments(a) {
    console.log(a === undefined);
    console.log(arguments.length);
}
countArguments();
countArguments(void 0); 
```

您的控制台输出将是：

```
真的
0
真的
1

```

JavaScript*需要*这个操作符吗？可能不是。您可以从自调用匿名函数中获得相同的功能（甚至更多）：

```
(function(){ /* expression */ })() 
```

但这并不那么简洁。

# javascript - onmouseout 不工作

> ID：14611604
> 
> 赞同：0
> 
> 时间：2013-01-30T18:55:52.320
> 
> 标签：javascript, html, onmouseout

我有一个小问题。我在`onmouseout`事件的事件上调用一个函数，它工作正常，但它没有改变`innerHTML`. 以下是我的功能：

```
function rvrtImg(id) {
  alert(id);
  if(id=="img1") {
    alert(id)
    document.getElementById(id).innerHTML = "<img src='<?php echo     
        get_bloginfo('template_directory')?>/img/paging/1.png' />"; 
  }
} 
```

在这里，我叫它

```
<a href="#"  id="img1" onmouseover="repImg(this.id)" onmouseout="rvrtImg(this.id)">hello</a> 
```

只有警报在工作，但它不会改变内部 HTML

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:12:24.803

WordPress？

```
<a href="#" id="img1" class="paging image1">hello</a> 
```

您可以使用 jQuery 来处理鼠标悬停/移出：

```
<script type="text/javascript">

jQuery( document ).ready( function( $ ) {

    $( 'a.paging.image1' ).hover(
        function() { $( this ).html( '<img src="hoverimage1.png" alt="" />' ); },
        function() { $( this ).html( '<img src="normalimage1.png" alt="" />' ); }
     );

} );

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:39:20.730

那是因为图像大于锚点的当前大小。这将防止鼠标移出正确触发。

这是一个工作示例：（CSS 注释） [http://jsfiddle.net/QQSLC/16/](http://jsfiddle.net/QQSLC/16/)

```
<a href="#" id="img1" onmouseover="repImg(this.id)" onmouseout="rvrtImg(this.id)">hello with lower size than image</a>
<a href="#" id="img2" onmouseover="repImg(this.id)" onmouseout="rvrtImg(this.id)">hello with higher size than image</a>

a {
    background: green;
}
#img2{
    background: red;
    width: 300px;
    height: 120px;
    display: block;
} 
```

只是为了了解更多信息：

当你有一个自动大小的锚时，它使用字体高度作为高度，自动调整宽度。假设在这种情况下，我们的锚点大小约为 100px X 23px 现在您想在鼠标移出时加载图片。这将改变锚点高度和其中图片的高度，使锚点变为 600px X 300px。当这件事发生时，鼠标仍然在这个区域（因为它超出了 23 像素。但现在它是 300 像素。所以鼠标仍然存在）所以浏览器再次触发鼠标悬停。同时，将鼠标悬停在代码上将锚点的高度更改为 23px，因此鼠标再次退出，此循环将永远进行。为了防止这种悖论，浏览器决定在尺寸较小的元素上忽略鼠标悬停，然后将鼠标悬停在尺寸上。（直到您手动而不是自动执行 CSS 或更改大小）

请注意，如果您从元素的上方或左侧移动鼠标，则鼠标移出会起作用，因为锚点大小的任何变化都不会影响这两个方向。

# php - PHP视频操作？

> ID：14611609
> 
> 赞同：5
> 
> 时间：2013-01-30T18:56:07.470
> 
> 标签：php, video

我想知道是否有用于处理音频/视频文件的基于服务器端脚本的解决方案？通过操纵，我的意思是对视频进行编码/解码并将视频分割成多个剪辑并对它们进行编码/解码等..？

我看过[FFMPEG 项目](http://ffmpeg.org/index.html)，但想知道可能还有什么其他解决方案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T00:00:50.093

通过PHP来处理视频，没有办法直接通过PHP来做，所有的解决方案都是围绕使用exec调用外部库程序进行编辑。

## 从 PHP 调用 FFMPEG

这种方法的一个很好的例子可以在这里找到：

*   [http://www.phpro.org/tutorials/Video-Conversion-With-FFMPEG.html](http://www.phpro.org/tutorials/Video-Conversion-With-FFMPEG.html)

下面是一个从 php 执行 ffmpeg 的例子：

```
<?php
    exec("ffmpeg -i video.mpg -an -r 10 -y -s 320x240 video%d.jpg");
?> 
```

此外，还请查看以下库： http: [//ffmpeg-php.sourceforge.net/](http://ffmpeg-php.sourceforge.net/)

## 从 PHP 调用 VLC

引用[http://en.wikipedia.org/wiki/VLC_media_player](http://en.wikipedia.org/wiki/VLC_media_player)：

> VLC 媒体播放器支持多种音频和视频压缩方法和文件格式，包括 DVD-Video、视频 CD 和流媒体协议。它能够通过计算机网络流式传输并转码多媒体文件。

VLC 也可以通过 exec 方法的命令行调用来执行转码、流式传输和基本的视频编辑功能，例如旋转和裁剪。

## 调用 Mencoder

再一次，另一种选择是使用 Mencoder 工具，它是“根据 GNU 通用公共许可证发布的免费命令行视频解码、编码和过滤工具”。- [http://en.wikipedia.org/wiki/MEncoder](http://en.wikipedia.org/wiki/MEncoder)。

例子：

```
<?PHP

 echo "ENCODING\n";

 exec ("start mencoder \"mf://../../*.jpg\" -ofps 25 -o ../test.flv -of lavf -ovc lavc -lavcopts vcodec=flv:keyint=50:vbitrate=600:mbd=2:mv0:trell:v4mv:cbp:last_pred=3  -vop scale=320:240 -lavfopts video");

 echo "\nDONE";

?> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-20T20:00:14.980

无论如何，您可以使用 virtualdub，在 PHP 中执行此操作需要使用 exec() 函数。

# git - gitconfig：git 配置文件的位置

> ID：14611610
> 
> 赞同：4
> 
> 时间：2013-01-30T18:56:13.050
> 
> 标签：git, system, global, git-config

如何查找/列出*全局*和*用户配置*文件？我的意思是“Git 原生功能”，而不是像`find`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:02:25.217

在[这个问题](https://stackoverflow.com/questions/2114111/where-does-git-config-global-get-written-to)中，一条评论指出了如何知道哪个文件与和`--system`相关。`--global``--local`

简而言之，您只`--edit`需要`git config`：

```
git config --system --edit
git config --global --edit
git config --local --edit 
```

如果您将环境变量替换为`EDITOR`例如`echo`，您可以在变量中接收它，即。您可以以编程方式使用它：

```
t=`EDITOR=echo git config --system --edit`
echo $t 
```

`/etc/gitconfig`在我的情况下打印。

# javascript - 使用数据内容更改 css 内容 - 换行

> ID：14611618
> 
> 赞同：2
> 
> 时间：2013-01-30T18:56:36.777
> 
> 标签：javascript, jquery, css

我有： HTML：

```
<div id="mydiv" data-content="Loading..."></div> 
```

CSS：

```
#mydiv:after{
   content: attr(data-content);
   height: 100%;
   opacity: 1;
   position: absolute;
   text-align: center;
   text-transform: uppercase;
   width: 100%;
   white-space: pre;
} 
```

JS（jQuery）：

```
$('.ui-effects-transfers').attr('data-content',"Loading... \A Please wait..."); 
```

我有问题，当我在 CSS 中设置时

```
content: "Loading... \A Please wait..."; 
```

然后**\A**作为断线工作。当我用**数据内容**设置它时，breake new line 不起作用。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:03:47.970

您需要使用`\n`而不是`\A`

```
$("#mydiv").attr("data-content","hello\nworld"); 
```

[jsFiddle](http://jsfiddle.net/ZhCrG/)

# c# - 控制台应用程序间隔与 Thread.Sleep

> ID：14611622
> 
> 赞同：1
> 
> 时间：2013-01-30T18:56:49.337
> 
> 标签：c#, console-application, thread-sleep

我有一个控制台应用程序，它应该定期监听远程数据库，如果有新值，那么做一些事情。

通常我创建 Windows 任务计划程序作业以每 2 分钟运行一次此控制台应用程序。我认为另一种选择，在控制台应用程序中，我将有一个类似的代码；

```
while(true)
{
  ConnectDatabaseAndProcess();
  System.Threading.Thread.Sleep(120000);
} 
```

所以我假设控制台应用程序将始终打开，每个进程将等待 2 分钟并继续。在性能问题上会有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:30:05.987

除非您的计算机超载到每两分钟创建一个进程的时间会消耗大量资源，否则让您的程序在循环中等待两分钟以轮询数据库没有任何好处。

使用计划任务的好处是您可以更改计划任务频率（每五分钟一次，或一小时一次，或其他），而无需修改程序。当然，您可以使用应用程序配置文件，但为什么呢？为什么要复制操作系统中已经存在的功能，并且更加灵活。

此外，通过计划任务，您知道程序将在下次重新启动计算机时再次启动轮询操作。如果您依赖程序来提供延迟，您必须记住每次都启动它，或者将它放在启动任务列表中。

此外，当程序闲置时，它会占用其他进程可以使用的内存。

总而言之，使用计划任务是一种更加灵活和强大的解决方案。让程序始终运行所带来的任何边际性能提升（我们说的最多是一秒钟）都远远超过了缺点。

# javascript - 使用 Raphael.js 转换为绑定框

> ID：14611623
> 
> 赞同：1
> 
> 时间：2013-01-30T18:56:54.820
> 
> 标签：javascript, svg, raphael, transform

我需要一些数学帮助。我正在尝试将我的 Raphael元素[集](http://raphaeljs.com/reference.html#Set)动态转换为画布内的给定绑定框。

例如，假设我的画布（纸）是 600 x 300 并且充满了路径。这些路径都在一个集合中。

现在我想用给定的绑定框填充我的画布。绑定框位于像素坐标中。例如 [[50,10], [100,20]]

所以最终结果将是一个函数调用，它将缩放和定位 SVG 元素。这将导致画布被裁剪到坐标边界。

```
var bbox = [[50,10], [100,20]]
animateToBoundBox(set, bbox, duration);
function animateToBoundBox(set, bbox, duration) { /* beautiful code */ } 
```

我认为实现这一点的方法是使用元素矩阵，但我不确定。你认为最优雅的处理方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:21:44.240

其他答案是正确的——你想使用 setViewBox。

这是一个支持动画的版本。它并不完全漂亮，您必须查看页面源代码才能提取代码，但它应该或多或少完全符合您的要求。

这是作为 Raphael 扩展的视图框动画：

```
Raphael.fn.animateViewBox = function animateViewBox( x, y, w, h, duration, easing_function, callback )
{
    var cx = this._viewBox ? this._viewBox[0] : 0,
        dx = x - cx,
        cy = this._viewBox ? this._viewBox[1] : 0,
        dy = y - cy,
        cw = this._viewBox ? this._viewBox[2] : this.width,
        dw = w - cw,
        ch = this._viewBox ? this._viewBox[3] : this.height,
        dh = h - ch,
        self = this;;
    easing_function = easing_function || "linear";

    var interval = 25;
    var steps = duration / interval;
    var current_step = 0;
    var easing_formula = Raphael.easing_formulas[easing_function];

    var intervalID = setInterval( function()
        {
            var ratio = current_step / steps;
            self.setViewBox( cx + dx * easing_formula( ratio ),
                             cy + dy * easing_formula( ratio ),
                             cw + dw * easing_formula( ratio ),
                             ch + dh * easing_formula( ratio ), false );
            if ( current_step++ >= steps )
            {
                clearInterval( intervalID );
                callback && callback();
            }
        }, interval );
} 
```

（不是那么漂亮）演示在这里：http: [//voidblossom.com/tests/easedViewBox.php](http://voidblossom.com/tests/easedViewBox.php)

如果您真的很想使用变换（如果利用得当，它可能会带来一些好处，但与视图框操作相比通常会很脆弱），还有另一个使用变换的示例，位于[http://voidblossom.com/tests/zoomByTransform .php](http://voidblossom.com/tests/zoomByTransform.php) _

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:05:09.310

不确定我是否完全理解您要查找的内容，但听起来您想将视图缩放到特定的边界框。你看过[setViewBox](http://raphaeljs.com/reference.html#Paper.setViewBox)函数吗？基本上你的函数会这样称呼它：

```
setViewBox(bbox[0][0], bbox[0][1], bbox[1][0] - bbox[0][1], bbox[1][1] - bbox[0][0]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:05:48.043

据我所知，您想要完成的所有事情都会`Paper.setViewBox()`在动画中得到更好的处理。见[http://raphaeljs.com/reference.html#Paper.setViewBox](http://raphaeljs.com/reference.html#Paper.setViewBox)

# xml - 如何使用经典 ASP 从 XML 中提取特定标签数据

> ID：14611626
> 
> 赞同：1
> 
> 时间：2013-01-30T18:57:03.500
> 
> 标签：xml, asp-classic, xml-parsing

我在 IIS 服务器上有一个 XML 文件存储。我正在尝试获取标签`<amount>`内的值。`<TotalNetCharge>`

这是驻留在文件位置的标签：

```
<TotalNetCharge>
<Currency>USD</Currency> 
<Amount>92.33</Amount> 
</TotalNetCharge> 
```

我尝试在变量中使用 XML 并从文件中读取它。两者都不起作用。这是代码：

```
Set oXML = Server.CreateObject("MSXML2.DomDocument.4.0")
'oXML.LoadXML(SOAPResponse) 
oXML.LoadXML("D:\myfile\XMLReply.xml")
For Each oNode In oXML.SelectNodes("//TotalNetCharge/Amount")
    Response.Write "test"
Next

Set oXML = Nothing 
```

没有任何东西被写入屏幕，所以我假设数据没有被加载，因为如果它是循环将被输入并将“测试”写入屏幕。我还尝试加载我知道其中包含数据的注释掉部分（SOAPResponse），因为我将其响应写入屏幕。任何人？2天就这个废话。

更新，这是有效的替换代码。

```
Set objXMLDoc = CreateObject("Microsoft.XMLDOM")
objXMLDoc.async = False
objXMLDoc.loadXML(SOAPResponse)

Dim TransactionDetail, CustomerTransactionId

Set NodeList = objXMLDoc.getElementsByTagName("ServiceType")
For Each Node In NodeList
   Response.write(Node.text & "<br>")
Next
Set NodeList = objXMLDoc.getElementsByTagName("TotalNetCharge")
For Each Node In NodeList
   Response.write(Node.text & "<br>")
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T03:26:16.160

错误的对象方法；

*   [loadXML](http://msdn.microsoft.com/en-us/library/ms754585%28v=vs.85%29.aspx)用于直接从字符串加载 XML 文档，而不是从文件或 URL
*   [load](http://msdn.microsoft.com/en-us/library/ms762722%28v=vs.85%29.aspx)是您想要从 URL 加载的内容

# java - 查找 Java 数组中的最小双精度数

> ID：14611633
> 
> 赞同：1
> 
> 时间：2013-01-30T18:57:30.113
> 
> 标签：java, arrays, for-loop

我试图从用户输入中捕捉最低的双倍。我只捕获初始化的 min 变量的值 - 我错过了什么？谢谢！

```
public static void main(String[] args) {

    double[] lowNum = new double[10];
    Scanner input = new Scanner(System.in);

    for (int i=0; i<=9; i++) {
        System.out.println("Enter a double: ");
        lowNum[i] = input.nextDouble();
    }
    input.close();
    double min = calcLowNum(lowNum);
    System.out.println(min);
}

public static double calcLowNum(double[] a) {
    double min=0;
    for (int i=0; i>=9; i++){
      for (int j=0; j>=9; j++){
          if (a[i]<=a[j] && j==9){
              min=a[i];
          }
          else {
              continue;
      }
    }
    }

    return min; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-12T14:27:53.333

您可以只使用[Collections#min](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#min(java.util.Collection))来找到最小值。不过，您将需要`Apache Commons-Lang`这个。

```
// This would be the array 'a'
double[] array = {15, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10};

// Convert the primitive array into a Class array
Double[] dArray = ArrayUtils.toObject(array);
List<Double> dList = Arrays.asList(dArray);

// Find the minimum value
Double returnvalue = Collections.min(dList);

return returnvalue; // or you can do returnvalue.doubleValue() if you really want 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T21:36:40.933

如果您确实需要存储所有输入，而不是找到最小、最简单的方法来使用库函数对数组进行排序：

```
...
//sorting array, so first element will be the lowest
Arrays.sort(lownum);

double min = lownum[0]; 
```

我同意 Peter Lawree 你实际上并不需要所有的数组。您需要保存第一个输入，并将以下所有内容与其进行比较，如果较低则存储：

```
double lastInput=0, min=0;
for (int i=0; i<=9; i++) {
   System.out.println("Enter a double: "); 
   lastInput = input.nextDouble();
   if (0==i) {
       //if this is first iteration, save first input as min
       min=lastInput;
   } else {
       if (lastInput<min) min=lastInput;
   }
}
return min; 
```

PS 实际上，您应该使用 Double.compare 来比较双打。因此，如果输入数量不大，则使用 Arrays.sort() 的示例会更好，在这种情况下，第一个示例将花费更多的内存和时间来执行。

**更新：Java8 解决方案**

```
double findMin(double[] input) {
 return Arrays.stream(input).min().getAsDouble();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T18:58:27.263

首先，将`i>=9`and更改`j>=9`为`i<=9`and `j<=9`in：

```
for (int i=0; i>=9; i++){
  for (int j=0; j>=9; j++){ 
```

否则，您的循环实际上是无操作的。

一个更健壮的方法是像这样编写循环：

```
for (int i = 0; i < a.length; i++) { 
```

或者像这样：

```
for (double val : a) { 
```

最后，找到最小值可以通过只遍历数组一次来完成，将每个元素与当前最小值进行比较（但请确保正确初始化`min`！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T19:25:08.800

OMG，遍历数组 - 这是最糟糕的解决方法（但我的英语不好比它更糟糕）。查看[http://code.google.com/p/guava-libraries/](http://code.google.com/p/guava-libraries/)这个库包含满足您需要的**健壮**代码（事实上，您的项目中必须有库）。您可以查看和分析来源 - 它是免费的，但您在最佳实践中的经验将随着我的英语技能的增长而增长。以下是番石榴代码的示例：

```
 public static double min(double... array) {
    checkArgument(array.length > 0);
    double min = array[0];
    for (int i = 1; i < array.length; i++) {
      min = Math.min(min, array[i]);
    }
    return min;
  } 
```

PS：用标准代码学习库，不要重新发明轮子。要开心！

# c# - 如何在 WP8 中截屏

> ID：14611639
> 
> 赞同：1
> 
> 时间：2013-01-30T18:57:51.013
> 
> 标签：c#, windows-phone-8

所以我在我的 WP8 应用程序中的 PhoneApplicationPage 中有一个 DrawingSurfaceBackgroundGrid；我想截图。据我所知（来自谷歌），没有简单的“截屏”调用。人们正在做的是使用 WriteableBitmap，如下所示：

```
WriteableBitmap wbmp = new WriteableBitmap(test, null);
wbmp.SaveJpeg(isoStream2, wbmp.PixelWidth, wbmp.PixelHeight, 0, 100); 
```

我已经尝试过作为 DrawingSurfaceBackgroundGrid 和 PhoneApplicationPage 进行测试。这些都不适合我。这可能与我使用 RenderTargets 和像素着色器（在 SharpDX 中）渲染所有内容有关吗？我只是得到一个黑色的图像。这是保存图像的代码：

```
IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication();

using (IsolatedStorageFileStream isoStream2 = new IsolatedStorageFileStream("new.jpg", FileMode.OpenOrCreate, isoStore))
{
    WriteableBitmap wbmp = new WriteableBitmap(test, null);
    wbmp.SaveJpeg(isoStream2, wbmp.PixelWidth, wbmp.PixelHeight, 0, 100);
} 
```

但就像我说的，它只是创建了一个黑色图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:27:52.277

*除了在我的应用程序中将“test”*更改为根网格的名称外，按原样尝试了您的代码`x:Name="LayoutRoot"`，并且工作正常！只需将*test*替换为您要捕获的元素、整个页面的根网格名称或仅该元素的子元素名称。

* * *

顺便说一句，感谢您的代码，还有一个要松鼠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-03T13:44:25.923

我正在使用下面的代码。虽然它正在保存到媒体库。

```
WriteableBitmap bmpCurrentScreenImage = new WriteableBitmap((int)this.ActualWidth, (int)this.ActualHeight);
bmpCurrentScreenImage.Render(LayoutRoot, new MatrixTransform());
bmpCurrentScreenImage.Invalidate();
using (var stream = new MemoryStream())
{
    // Save the picture to the Windows Phone media library.
    bmpCurrentScreenImage.SaveJpeg(stream, bmpCurrentScreenImage.PixelWidth, bmpCurrentScreenImage.PixelHeight, 0, quality);
    stream.Seek(0, SeekOrigin.Begin);

    var picture = new MediaLibrary().SavePicture(name, stream);
    return picture.GetPath();
} 
```

# c++ - C++：请求超过 2GB 的内存

> ID：14611641
> 
> 赞同：2
> 
> 时间：2013-01-30T18:57:58.330
> 
> 标签：c++, memory, memory-management

我有以下代码：

```
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <iostream>

typedef uint64_t     Huge_num;  // 8 bytes
typedef Huge_num *   Huge_Arr; // Array of 8 byte elements

using namespace std;

// Function: Return a huge array
static Huge_Arr* requestMem(int n)
{
   cout << "requesting :" 
        << (sizeof(Huge_num)*n)/(1024*1024*1024) 
        << "GB" << endl;

   Huge_Arr *buff;
   try {
      buff = new Huge_Arr[n];
   }
   catch (bad_alloc){
      cout << "Not enough mem!" << endl; 
      exit(-1);
   }
   return buff;
}

// Main
int main(){
    for (int i=1; i< 10; i++){
         Huge_Arr *mem = requestMem(i*90000000);
         delete mem;
    }
} 
```

`bad_alloc()`由于某种原因，malloc 在抛出错误之前只能获取不超过 2GB 的内存。

我知道在 32 位系统上，最大地址空间确实在 2GB 的相同数量级。

但我使用的是 Ubuntu 12.04 x86_64，它*应该*能够处理更大的内存请求，对吧？

编辑：原来答案是我正在用`g++ -std=c00x`32 位编译？不确定，无论哪种方式，我都更改了 Makefile 以删除`-std`标志，并且编译得很好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:06:06.520

`malloc`正在分配连续的内存。您获得`badalloc`请求的 2 GB 内存这一事实并不一定意味着您的可用内存少于 2 GB，也可能意味着可用内存是碎片化的。如果您想测试在您的系统上可以分配多少内存，请尝试分配较小的块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T19:56:45.530

如果您增加了`swap space`大小，则可能有更多空间用于分配，当`RAM`没有足够的内存时，操作系统会`heap space`通过交换来增长`disk space`，因此您可能会更改交换文件的大小，这个链接最好地解释它：

[关于 Linux 交换空间](http://www.linux.com/news/software/applications/8208-all-about-linux-swap-space)

其他最好的方法是打开`overcommitting`value **，**如果`overcommitting`value 设置为**off**，你不能在你的系统上分配所有的内存，打开**value**`overcommitting`你可以为你的数组分配所有的内存空间。

 **将`overcommitting`值转为**on**：

设置`/proc/sys/vm/overcommit_memory`为`0`**

# objective-c - 使用未声明的标识符“位置”

> ID：14611642
> 
> 赞同：1
> 
> 时间：2013-01-30T18:57:59.467
> 
> 标签：objective-c, core-data

在我已注释掉的几行中出现此错误，想知道为什么会出现此问题？解决此问题的最佳方法是什么？

Location 是一个 CoreData 实体，placemark 是它的属性之一。

提前致谢。

LocationsViewController.m

```
#import "LocationsViewController.h"
#import "Location.h"

@interface LocationsViewController ()

@end

@implementation LocationsViewController{
    NSArray *locations;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Location" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"date" ascending:YES];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];

    NSError *error;
    NSArray *foundObjects = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];
    if (foundObjects == nil) {
        FATAL_CORE_DATA_ERROR(error);
        return;
    }

    locations = foundObjects;

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    locations = nil;
}

#pragma mark - Table view data source

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return [locations count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Location"];

    UILabel *descriptionLabel = (UILabel *) [cell viewWithTag:100];
    descriptionLabel.text = @"If you can see this";

    UILabel *addressLabel = (UILabel *)[cell viewWithTag:101];
    addressLabel.text = @"%@ %@, %@",
    location.placemark.subThoroughfare, // Use of undeclared identifier 'location'
    location.placemark.thoroughfare, // Use of undeclared identifier 'location'
    location.placemark.locality ]; // Use of undeclared identifier 'location'

    return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:03:56.690

在`cellForRowAtIndexPath`

你忘了

```
Location *location = locations[indexPath.row]; 
```

# php - 如何为每个模型存储/关联用户特定的数据（状态？）

> ID：14611643
> 
> 赞同：0
> 
> 时间：2013-01-30T18:58:01.683
> 
> 标签：php, mysql, database, orm, kohana

例如，如果我有一个充满`folders`站点范围的值的表，例如，`name`并且`created`我希望允许每个用户存储他们自己的关于这些的元数据`folders`（例如`expanded = 1`，或`label_color = 'red'`），我应该如何组织我的数据库？

这是此示例的图表，因为我目前正在处理它：

![图表](../Images/41efe6ccb23bb6cdfe9d0c15c3f13997.png)

请注意，这是与数据透视表类似的设置，或者是多次通过，只是我想存储/访问数据透视表中的数据。**这是可取的还是有更好的方法来完成这种行为？**

我认为这可能不是最优雅的原因是它使我的 ORM 中的连接复杂化，因为我在加载文件夹行时加入了元数据，所以当我将该文件夹作为与另一个模型的关系加载时存在双重连接。**我怎样才能避免这种情况？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:25:38.170

你的方式看起来是最好的做法。我会在您的folders_usermeta 表中的user_id 和folder_id（这两个定义您的唯一行）上放置一个主键（尽管Kohana 不支持在多个列上设置主键）。

@biakaveron，我永远不会在我的数据库中存储序列化数据，这没有必要，你会失去你的语义和你的 SQL 能力。您可以在此处了解更多信息：

[http://www.slideshare.net/billkarwin/sql-antipatterns-strike-back](http://www.slideshare.net/billkarwin/sql-antipatterns-strike-back)

# .net - 来自 NAS 的间歇性读取失败

> ID：14611651
> 
> 赞同：0
> 
> 时间：2013-01-30T18:58:40.593
> 
> 标签：.net, windows, nas

我们的处理平台包含大量机器，其中大量应用程序在本地创建文件并将它们复制到 Isilon NAS。它还包含在单独的计算机上的单个使用者，从 Isilon NAS 读取这些文件。间歇性地，50000 个中的 1 个，消费者将抛出访问冲突，声明“文件被另一个应用程序锁定”。对 NAS 的写入在 100% 的时间内成功完成。

编写器和 NAS 之间的唯一连接点是对 File.Copy(localfile, "\\naslocation\destfilename") 的以下调用。如果消费者重试读取文件，则每次都成功。

File.Copy 不可靠吗？意思是，在 File.Copy 返回给调用者之后，目标文件可能对另一个进程不可用？Windows 是否在写入远程共享时执行缓冲，从而导致 File.Copy 的返回与被检测为被不同计算机上的不同应用程序锁定的文件之间存在延迟？

提前致谢。

# asp.net-mvc - asp.net mvc 按名称和区域查找控制器

> ID：14611652
> 
> 赞同：3
> 
> 时间：2013-01-30T18:58:41.047
> 
> 标签：asp.net-mvc, controller, asp.net-mvc-routing

我的目标是从它的名称和区域中找到一个控制器。如果我的电流`httpContext`与要找到的控制器在同一区域内，我已经成功地做到了这一点。但是，我无法打电话给`ControllerFactory`考虑区域。这是我的代码：

```
public static ControllerBase GetControllerByName(this HtmlHelper htmlHelper, string controllerName)
    {
      IControllerFactory factory = ControllerBuilder.Current.GetControllerFactory();
      IController controller = factory.CreateController(htmlHelper.ViewContext.RequestContext, controllerName);
      if (controller == null)
      {
        throw new InvalidOperationException(String.Format(CultureInfo.CurrentCulture, "The IControllerFactory '{0}' did not return a controller for the name '{1}'.", factory.GetType(), controllerName));
      }
      return (ControllerBase)controller;
    } 
```

由于它采用 a`RequestContext`作为参数，因此我向其添加了“区域”的路由值，但没有任何变化。我可以用 requestContext 做些什么来考虑一些区域吗？我是否需要覆盖控制器工厂——如果是这样，什么特别处理区域区分？

更新：

这是我拥有的 AreaRegistration 示例：

```
public class StoresAreaRegistration : AreaRegistration
  {
    public override string AreaName { get { return "Stores"; } }

    public override void RegisterArea(AreaRegistrationContext context)
    {
      context.MapRoute(
          AreaName,
          AreaName + "/{controller}/{action}/{id}",
          new { area = AreaName, controller = "Home", action = "Index", id = UrlParameter.Optional }
      );
    }
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T22:43:06.370

用于定位控制器的区域和命名空间位于 RequestContext 的 RouteData 中。~~默认情况下，它们会根据您当前提供的请求进行填充，如果您需要更改它们，则必须在调用 CreateController 之前这样做。~~当找不到控制器时，您可能会遇到异常，因此您也必须考虑到这一点。

**更新**：注意，您必须创建一个新的 RequestContext。如果您重用现有的，它将在此请求的后续部分中混淆操作和视图的解析。

```
var tempRequestContext = new RequestContext(Request.RequestContext.HttpContext, new RouteData());
tempRequestContext.RouteData.DataTokens["Area"] = "";
tempRequestContext.RouteData.DataTokens["Namespaces"] = "YourCompany.Controllers";
var controller = ControllerBuilder.Current.GetControllerFactory()
                .CreateController(tempRequestContext, "ControllerName");

if(controller != null)
{
    //TODO: Implement your logic here
} 
```

# javascript - 使用 jquery 和骨干 js 创建动态表单字段

> ID：14611655
> 
> 赞同：1
> 
> 时间：2013-01-30T18:59:17.137
> 
> 标签：javascript, jquery, jquery-ui, backbone.js, underscore.js

我有一个使用主干 js 和 jquery 的应用程序。我需要根据从服务器获得的响应动态生成模板。场景是这样的......我有一个可以选择的模板下拉列表，在我从下拉列表中选择任何模板后，会为该模板调用一个 api，它为我提供了这样的结构

```
items:[
{
    "vars":
           {
               "name":
                      {
                           "required": false,
                           "default": "abc"
                      },
               "address":
                      {
                           "required": false,
                           "default": "xyz"
                       }
           }
    "tables": {}
}] 
```

那么如何使用这种服务器响应创建动态表单元素呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:12:42.860

您可以使用[主干表单](https://github.com/powmedia/backbone-forms)插件，并将服务器响应映射到表单对象。就像是：

```
var data = {};
var schema = {};
var item = _.first(items);

_.each(item.vars, function(value, key) {
  data[key] = value.default;
  schema[key] = {
    type:"Text",
    validators:value.required ? ['required'] : undefined
  };
});

var form = new Backbone.Form({data:data, schema:schema}).render(); 
```

这只是一个简单的、未经测试的示例。查看`backbone-forms`文档，看看它是否可以满足您的需求。

# python - 列表推导中的变量范围更容易格式化

> ID：14611657
> 
> 赞同：1
> 
> 时间：2013-01-30T18:59:19.937
> 
> 标签：python, python-3.x, list-comprehension

如果我有一个本质上是这样的列表理解：

```
result = [function(i,j,k,l) for i in range(3) for j in range(3)
    for k in range(3) for l in range(3)] 
```

它做我想要的，但它看起来很丑。我对 Python 还很陌生，但似乎 Python 会有某种内置功能，可以让我以一种不那么繁琐的方式总结 4 个字母 ijkl 的所有可能组合。我的直觉是正确的，还是我一直盯着那条又长又丑的线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T21:58:51.790

因为没有人为此提出重复，所以这是我的答案，仅供记录（尽管 DSM 已经在他也使用的评论中给出了一个很好的答案，`itertools.product`这就是解决方案的核心）：

```
result = itertools.starmap(function, itertools.product(range(3), repeat=4)) 
```

`starmap`返回一个迭代器（就像 Python 3 一样`map`），因此您可能希望将此表达式包装在一个列表中，此时 DSM 的答案可能更具可读性。

# java - A* (A Star) 算法输出所有可能的解

> ID：14611663
> 
> 赞同：1
> 
> 时间：2013-01-30T18:59:34.710
> 
> 标签：java, algorithm, a-star

已知 A 星算法是完整的。但是，我在网上找到的所有实现似乎只返回第一个（最佳）解决方案。

例如，这个实现： [星型算法实现](http://code.google.com/p/a-star/source/browse/trunk/java/AStar.java)

由于该算法总是扩展具有最小 f 值的节点，并且当第一个节点是一个解决方案时，实现似乎停止了，如何调整上述代码以输出所有（或前*n 个*）导致目标，而不考虑重复的动作（即一遍又一遍地包含相同动作的路径）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:07:13.117

它是完整的，这意味着如果存在解决方案，它将找到解决方案，但该算法专门只返回一个路径。广度优先搜索将找到两个节点之间的所有非循环路径，但是：[http ://en.wikipedia.org/wiki/Breadth-first_search](http://en.wikipedia.org/wiki/Breadth-first_search)

**更新**- 这是 k 最短路径算法，它将按从最短到最长的顺序返回 n（或在本例中为 k）最短路径的列表。[http://code.google.com/p/k-shortest-paths/](http://code.google.com/p/k-shortest-paths/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:30:51.287

对于所有路径，使用呼吸优先搜索可能更有意义。或者，如果您想找到前 n 条最短路径，可以尝试[Dijkstra 算法。](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

# msbuild - 如果代码合同重写器没有运行，为什么 TFS2012 报告构建成功？

> ID：14611665
> 
> 赞同：1
> 
> 时间：2013-01-30T18:59:51.513
> 
> 标签：msbuild, code-contracts

我构建了我的解决方案，但构建服务器上没有安装 CC 工具。
所以没有重写。

现在我很好奇，如果不是所有任务都完成了，为什么 msbuild 报告构建成功？

PS我对msbuild完全没有经验，所以如果我的问题听起来很愚蠢，请原谅，伙计们。

**更新**
好吧，我在本地安装了代码合同扩展，它为项目选项创建了附加选项卡。然后我在运行时启用了代码合同检查，并在 Main 方法的开头添加了以下行：

```
// test for Code Contracts rewrite
// exception is thrown if no rewrite 
Contract.Requires<Exception>(true); 
```

我提交了对 TFS 的更改并开始构建，它成功完成而没有任何警告。没有重写，我的应用程序抛出异常。
我已经阅读了有关 Microsoft.CodeContracts.targets 文件广告的信息，在 CC 安装目录中找到了它，但我在项目文件中没有看到对它的引用。只有像`<CodeContractsAssemblyMode>1</CodeContractsAssemblyMode>`.

我不明白 msbuild 从哪里获得有关 CC 的知识以及如何应用它们。

**更新 2**
最终，我们在构建服务器上安装了代码合同并执行了组装检测。
然而，仍然不清楚在 CC 安装期间更改了哪些设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T01:25:46.793

您还需要在构建服务器上安装这些工具。合约工具的设计是这样的，除非你使用`Contract.Requires< Exception >(...)`一个可以在不使用我们的工具的情况下构建和发布比特。但是，如果您使用`Contract.Requires< Exception >(...)`，则必须按照文档所述使用重写器。因此，为了成功构建您的项目，您需要安装这些工具。MsBuild、VS 和 C# 对合同工具一无所知，因此无法警告您缺少工具安装。

希望这可以帮助。

# c# - 每个 c(r)ud 操作的实体框架单独的 DbContext？

> ID：14611670
> 
> 赞同：2
> 
> 时间：2013-01-30T19:00:21.470
> 
> 标签：c#, entity-framework, dbcontext

我在使用实体框架时遇到了一些奇怪的问题，我不确定这是什么道理。

我应该为每个创建、更新和删除操作使用单独的上下文对象吗？

我有一个实体，它有一个独特的约束。我从不同的线程接收值，并希望将它们存储在实体中并将它们保存到数据库中。如果我正在使用一个 DbContext 并且由于违反唯一约束而添加实体失败，则所有后续存储有效实体的尝试也将失败。这是因为无效实体仍在 DbContext 的集合中。

我认为问题归结为：

```
/* 
 * m_context is a memeber variable of the class and created once
 * new MyEntity("unique") => creates new entity and sets the unique attribute to the passed value
 * the entity's key is set automatically
 */
//works fine
try { m_context.MyEntities.Add(new MyEntity("unique"); m_context.SaveChanges() } catch{} 
//fails because of unique constraint violation => this is okay
try { m_context.MyEntities.Add(new MyEntity("unique"); m_context.SaveChanges() } catch{} 
//fails, too => not okay and not expected
try { m_context.MyEntities.Add(new MyEntity("unique2"); m_context.SaveChanges() } catch{} 
```

例外是 System.Data.Infrastructure.DbUpdateException（更新条目时发生错误）-> System.Data.UpdateException（更新条目时发生错误）-> System.Data.SQLite.SQLiteException（约束失败列...不是唯一的）

=> 在上面的场景中两次，有单独的上下文（见下文），一次，只有一次。

我认为每个数据库提供程序都会出现问题，并且与 SQLite 无关。

所以至少有两种解决方案：

1.  从 MyContext 中的 DbSet 中手动删除第二个实体
2.  为每个创建操作使用单独的上下文

我倾向于使用第二种。这是因为我在教程/代码中看到了很多 using 语句。我从来不明白为什么要大规模复制同一个物体，但这可能是一个（那个）原因。这是真的，还是我完全错了。

更新和删除操作也存在此问题。另一个失败的原因可能是外键违规。

那么这里的最佳做法是什么？每个操作单独的上下文对象？但是这个物体真的那么轻吗？我也应该将“每个操作一个上下文”应用于读取操作吗？

如前所述，修复是显而易见的，但我并不完全清楚道德，我对这里的最佳实践很感兴趣。谢谢！

# jquery-mobile - 设计可记忆在 jQuery Mobile 中不起作用

> ID：14611671
> 
> 赞同：0
> 
> 时间：2013-01-30T19:00:25.457
> 
> 标签：jquery-mobile, devise, remember-me

Devise rememberable 应该在客户端设置一个 remember_user_token cookie，这样即使会话 cookie 被删除，用户也不必再次登录。

`t.rememberable`在 create_users 迁移中设置`devise :rememberable`并存在于用户模型中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:00:25.457

这是因为 jQuery mobile 在重新格式化页面时处理复选框输入和它们的标签的方式。最简单的解决方法是通过运行在项目中安装设计视图`rails g devise:views`。然后在会话控制器的 new.html 模板中，切换复选框和标签的顺序，以便标签`:remember_me`位于复选框之后。

# mysql - 如果内联指定密码，mysql无法连接到数据库

> ID：14611673
> 
> 赞同：1
> 
> 时间：2013-01-30T19:00:26.957
> 
> 标签：mysql

我有一个问题，我认为这很容易。

我想连接到mysql数据库。

如果我执行以下操作：

```
mysql -uroot -premoved mydatabase
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES) 
```

但如果我这样做：

```
mysql -uroot -p mydatabase
Enter password: removed
mysql> 
```

有用！！为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:02:25.177

您需要在密码周围加上单引号。

`mysql -uroot '-pabc$def' mydatabase`

请参阅[mysql 密码弄乱了我的转储](https://stackoverflow.com/questions/4610028/mysql-password-is-messing-up-my-dump)以供参考。

# file - Cygwin ssh - 无法访问身份文件

> ID：14611677
> 
> 赞同：2
> 
> 时间：2013-01-30T19:00:43.187
> 
> 标签：file, ssh, cygwin, identity, accessible

我一直在尝试使用 Cygwin 建立 ssh 连接，但它无法识别我的 id_rsa 公钥文件。

我的命令行如下：

```
$ssh XXX@XXX -i /home/XXX/.ssh/id_rsa
Warning: Identity file /home/XXX/.ssh/id_rsa not accessible: No such file or directory.
Permission denied (publickey,XXX). 
```

（对不起，我用XXX作为私人信息。）

我将 .pub 文件复制到 C:\cygwin\home\XXX.ssh 文件夹。但它仍然会吐出相同的错误消息。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-10-08T18:19:16.753

**背景**

大多数 cygwin 可执行文件将 Unix 路径映射`/home/XXX/.ssh/id_rsa`到 Windows 路径`C:\cygwin64\home\XXX\.ssh\id_rsa`。除了 ssh.exe 将相同的 Unix 路径映射到 Windows 路径`C:\home\XXX\.ssh\id_rsa`。

也就是说，如果你这样做`cat ~/.ssh/id_rsa`，它会打印出 的内容`C:\cygwin64\home\XXX\.ssh\id_rsa`，但如果你这样做`ssh XXX@XXX -i /home/XXX/.ssh/id_rsa`，它会尝试从中读取密钥`C:\home\XXX\.ssh\id_rsa`。

我认为这是 Cygwin 中的错误。无论如何，这对我来说是一种解决方法（在 Windows 10 和截至 2020 年 10 月的最新版本的 Cygwin 上）。

**解决方案**

打开管理员命令提示符。转到`C:\`并发出命令`mklink /D home c:\cygwin64\home`

而已。

但至少对我来说，一旦我解决了上述问题，我就开始遇到这个超级用户问题[https://superuser.com/questions/1296024/windows-ssh-permissions-for-private-key-are-too中描述的问题-打开](https://superuser.com/questions/1296024/windows-ssh-permissions-for-private-key-are-too-open)。我使用了最受好评的答案中的解决方案，ssh 终于为我工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:06:20.633

从您的帖子看来，SSH 正在寻找`/home/XXX/.ssh/id_rsa`但没有找到。确保您复制的 .pub 文件命名正确并具有正确的权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T20:54:20.507

尝试将选项放在主机名之前...

# php - MySQL 表中的 PDO 'ON DUPLICATE KEY UPDATE' rowCount() 返回双倍更新记录

> ID：14611680
> 
> 赞同：14
> 
> 时间：2013-01-30T19:00:55.323
> 
> 标签：php, mysql, pdo

我正在做一个上传 CSV 并更新 MySQL 表的项目。在我的 sql 插入语句的末尾，我有一个“重复键更新...”语句。

我的问题是，PDO rowCount() 似乎为更新的行返回 2x。例如，当我第一次上传 CSV 时，我总共得到 100 行（csv 行的计数）并且 rowCount 返回 100，这是有道理的，因为我插入了 100 行。

但是，如果我再次上传同一个文件，所有 100 行都会更新（我更新了一个 unix 时间戳），并且 rowCount 返回 200。我认为这是因为 rowCount 为每次更新返回 2，而为插入返回 1。

我的假设正确吗？有没有人遇到过这个问题，有没有不涉及 100 个单独的插入语句的解决方案？我希望能够显示 csv 中的总行数、插入的新行总数和更新的总行数。

```
$sql = 'INSERT INTO projects (' . implode($fields,',') . ') VALUES';
    $rowCount = count($csvData);
    $tmp = array();
    for( $i = 0; $i < $rowCount; $i++ ){
        $placeholders = array();
        foreach( $fields as $key=>$val ){

            /* do some post processing for special characters */
            switch($val){
                case 'description':
                    $value = !empty($csvData[$i][$_POST[$val]]) ? $csvData[$i][$_POST[$val]] : NULL;
                    array_push($tmp,$value);
                break;
                case 'country':
                    $value = !empty( $csvData[$i][$_POST[$val]] ) ?  implode(' ',array_unique(explode(' ', $csvData[$i][$_POST[$val]]))) : NULL;
                    $value = str_replace(array(',','.','\''),'',$value);
                    array_push($tmp,$value);
                break;
                case 'add_unixtime':
                    array_push($tmp,time());
                break;
                case 'project_type':
                    array_push($tmp,strtolower($formData['project_type']));
                break;
                default:
                    $value = !empty($csvData[$i][$_POST[$val]]) ? str_replace(array(',','.','\''),'',$csvData[$i][$_POST[$val]]) : NULL;
                    array_push($tmp,$value);
                break;
            }
            array_push($placeholders,'?');
        }
        $sql .= ' (' . implode($placeholders,',') . '),';
    }
    /*  
        detect duplicate projects based on project_number & project_type
        mysql unique index created with (project_number + project_type)
        if duplicate found, update row
    */
    $sql = rtrim($sql,',');
    $sql .= 'ON DUPLICATE KEY UPDATE';
    foreach($fields as $key=>$val){
        $sql .= ' ' . $val . ' = VALUES(' . $val . '),';
    }
    $sql = rtrim($sql,',');

    /* update database */
    $query = $this->dbc->prepare($sql);
    if( $query->execute($tmp) ){
        $result = array('total_rows'=>$rowCount,'modified_rows'=>$query->rowCount());
    }

    /* return result */
    return $result; 
```

这是为 3 行插入生成的查询。

```
INSERT INTO projects (project_number, project_value, project_name, 
    address1, address2, city, state, zip, country, description,  
    project_type, add_unixtime ) 
VALUES (?,?,?,?,?,?,?,?,?,?,?,?), 
        (?,?,?,?,?,?,?,?,?,?,?,?), 
        (?,?,?,?,?,?,?,?,?,?,?,?)  
    ON DUPLICATE KEY UPDATE 
        project_number = VALUES(project_number), 
        project_value = VALUES(project_value), 
        project_name = VALUES(project_name), 
        address1 = VALUES(address1), address2 = VALUES(address2), 
        city = VALUES(city), state = VALUES(state), zip = VALUES(zip), 
        country = VALUES(country), description = VALUES(description), 
        project_type = VALUES(project_type), 
        add_unixtime = VALUES(add_unixtime); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T17:34:13.810

根据 MySQL 手册：

使用 ON DUPLICATE KEY UPDATE 时，如果将行作为新行插入，则每行的受影响行值为 1，如果更新现有行，则为 2，如果将现有行设置为其当前值，则为 0。

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# reporting-services - 在将 SSRS 集成到应用程序时，“Visual Studio 的 ReportViewer 控件”和“URL 访问”有什么区别？

> ID：14611684
> 
> 赞同：0
> 
> 时间：2013-01-30T19:01:09.500
> 
> 标签：reporting-services, ssrs-2008, asp.net-webcontrol

我即将建立一个网页，可以查看我的 SSRS。我看到有三个选项（报表服务器 Web 服务、Visual Studio 的 ReportViewer 控件和 URL 访问）

我想了解“Visual Studio 的 ReportViewer 控件”和“URL 访问”之间的主要区别——“Visual Studio 的 ReportViewer 控件”是否需要最终用户拥有额外的插件？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:13:07.630

我相信 ReportViewer 需要通过 SOAP 请求调用 SSRS 服务器。它基本上是一个进入 SSRS 站点的窗口，并且具有服务中的所有功能，可以立即直观地使用。查看器通常以如下格式显示报告：

```
http:// (server)/Reports/Pages/Report.aspx?ItemPath=%2f(ReportName) 
```

URL 访问通常是 SSRS 的 Web 服务，直接使用直接给它的命令为您完成工作。重要的是要注意，我相信 Web 服务可以为两者完成所有工作，但站点访问在主机和客户端位置也有 Visual Studio，还从默认位置执行一些售后 CSS 渲染和其他事情。Webservice 只是呈现报告和参数所在的潜在标题。如果你知道你在用 SSRS 做什么，你甚至可以在 URL 中传递参数。但是，除了在浏览器中之外，这不会提供用于渲染的可用对象。

EG：假设我有一个带有两个参数的报告：“开始”日期时间和“结束”日期时间。我可以同时调用 Web 服务并呈现报表并输入参数。我可以在我自己的浏览器查看器中托管它，但在不开发其他东西来使用它的情况下，并没有真正对对象做太多事情。

```
http:// (server)/ReportServer/Pages/ReportViewer.aspx?%2f(ReportName)&rs:Command=Render&Start=11/01/2012&End=1/1/2013 
```

您还可以在 .NET 中通过与 SSRS Web 服务通信或创建自己的代理类来进行自己的调用。这适用于当您希望以自定义格式呈现事件时，可能会触发未按设定时间表的应用程序，或者您希望与 SSRS 站点分离并维护自己的设置而不依赖服务器作为何时的决定者的应用程序事情发生。

# gwt - GWT - 如何以 HSL 格式获取小部件背景颜色

> ID：14611686
> 
> 赞同：0
> 
> 时间：2013-01-30T19:01:20.967
> 
> 标签：gwt

如何以 HSL 格式获取小部件背景颜色（纯 gwt）？例如，我尝试使用，`label.getElement().getStyle().getBackgroundColor();`但它总是以 RGB 格式返回颜色，尽管原始格式是`#FFFFFF`：S

请分享一些有用的技巧

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:27:45.990

您可以将 RBG 值转换为 HSL：

[http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript](http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript)

# facebook-c#-sdk - 如何获取给定组中的所有评论？

> ID：14611690
> 
> 赞同：1
> 
> 时间：2013-01-30T19:01:30.390
> 
> 标签：facebook-c#-sdk, facebook-group

我正在尝试在 Facebook 上的给定组中发布所有消息。但是，我无法将 FQL 与 Facebook C# SDK 一起使用，所以我尝试了一些简单的方法，如下所示：

```
dynamic result = fb.Get("/groups/GroupID/feed/"); 
```

但后来我得到了以下异常：

```
(OAuthException) Unknown path components: /feed 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:50:13.013

使用 FQL，可以执行以下操作：

```
 var fb = new FacebookClient(facebookOAuthResult.AccessToken);

                var query = string.Format("select actor_id, attachment, message from stream where source_id = {0}", "groupId");

                dynamic parameters = new ExpandoObject();
                parameters.q = query;

                dynamic result = fb.Get("/fql", parameters); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:59:40.733

你应该使用 fb.get("/" + groupID + "?fields=feed.limit(10).fields(type,message)"); 这应该会在组中为您提供一个数组或消息，但我无法将消息转换为 c# 中的字符串

# c++ - 为什么我不能在下面的代码中使用 `pos_type` 返回类型？

> ID：14611692
> 
> 赞同：1
> 
> 时间：2013-01-30T19:01:32.370
> 
> 标签：c++, visual-studio-2010, fstream

[这](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28%22IOSFWD/STD%3a%3aBASIC_FSTREAM%3a%3aTELLG%22%29;k%28%22STD%3a%3aBASIC_FSTREAM%3a%3aTELLG%22%29;k%28TELLG%29;k%28DevLang-%22C%2b%2b%22%29;k%28TargetOS-WINDOWS%29&rd=true)`basic_istream::tellg()`是VS2010中函数的定义。请注意，该函数返回一个类型为 的变量`pos_type`。但是，当我将`streamoff`下面给出的示例中使用的类型替换为 时`pos_type`，编译器会抱怨（C2065：'pos_type'：未声明的标识符）。

`pos_type`定义`<fstream>`为`typedef typename _Traits::pos_type pos_type;`。

```
// basic_istream_tellg.cpp
// compile with: /EHsc
#include <iostream>
#include <fstream>

int main()
{
    using namespace std;
    ifstream file;
    char c;
    streamoff i; // compiler complains if I replace streamoff by pos_type

    file.open("basic_istream_tellg.txt");
    i = file.tellg();
    file >> c;
    cout << c << " " << i << endl;

    i = file.tellg();
    file >> c;
    cout << c << " " << i << endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:07:16.520

你不能只写`pos_type`没有资格。请注意，它是 的成员`ifstream`。所以你必须这样写：

```
ifstream::pos_type i; //ok 
```

现在应该可以了。

此外，由于`using namespace std;` [被认为是 bad](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)，您应该避免它，而是应该更喜欢使用完整的限定：

```
std::ifstream file;        //fully-qualified
std::ifstream::pos_type i; //fully-qualified 
```

在 C++11 中，您可以`auto`改用。

```
auto i = file.tellg(); 
```

并让编译器推断`i`为`std::ifstream::pos_type`.

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:06:01.440

`pos_type`是属于类的成员 typedef，而不是命名空间范围的 typedef。你需要类似的东西`ifstream::pos_type`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T15:12:38.097

```
std::ifstream file;        
std::ifstream::pos_type i; 
```

你可以使用这个：它在开发 C++ 中对我有用

```
 i = file.tellg(); 
```

# javascript - 使用键码（箭头）停止窗口滚动，event.preventDefault() 不起作用？

> ID：14611694
> 
> 赞同：6
> 
> 时间：2013-01-30T19:01:47.470
> 
> 标签：javascript, jquery

我建立了一个自动提示，并且键码可以在列表中上下导航，但它会滚动窗口。我已经尝试过 event.preventDefault() 但它并没有停止它。有任何想法吗？这是我尝试过的：

```
$(document).keyup(function(e) {
e.returnValue=false;
e.preventDefault();
switch(e.keyCode) {
    case 40:
        suggestionLine++;
                $('#suggestionLine_'+suggestionLine).focus();
                break;
// etc... 
```

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T20:01:27.377

你需要`keydown`，不是`keyup`。

为什么？当您按下该键时，您试图阻止的默认操作会立即发生（立即尝试！）。这允许诸如自动重复之类的事情，它将`keydown`在发送单个事件之前发送多个`keyup`事件。到时间`keyup`被触发时，滚动已经发生。

# qt - Qt，在 QListWidget 中混合带有和不带有复选框的项目

> ID：14611696
> 
> 赞同：1
> 
> 时间：2013-01-30T19:01:55.850
> 
> 标签：qt, checkbox, qlistwidget

今天是个好日子。我正在尝试创建一个基于`QListWidget`. 但是，我遇到了一个问题。在我的经理中，我需要让一些项目带有复选框，而其他项目则没有它们。问题在于，在没有复选框的项目中，文本和图标向左移动（稍微向内`IconView`和基本上向内`ListView`）。有没有办法让所有复选框中的文本和图标在同一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:02:24.147

将该列中的项目向右对齐似乎是一个可行的选择。

# python - numpy数组中的min函数

> ID：14611703
> 
> 赞同：1
> 
> 时间：2013-01-30T19:02:21.183
> 
> 标签：python, arrays, numpy

我试图从一维 numpy 数组中找到一个最小值，它看起来像：

```
col = array(['6.7', '0.9', '1.3', '4', '1.8'],dtype='|S7'), 
```

使用`col.min()`，这是行不通的。

我按照[NumPy 上的建议进行了尝试：从数值](https://stackoverflow.com/questions/11321271/numpy-get-min-max-from-record-array-of-numeric-values)视图函数的记录数组中获取最小值/最大值，它无法将“S7”识别为有效字段。

处理这个问题的最佳方法是什么？我应该在读取值或使用 min 函数时指定数据类型吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:05:32.567

问题是你有一个字符串数组，而不是一个数字数组。因此，您需要先将数组转换为适当的类型：

```
In [38]: col.astype(np.float64).min()
Out[38]: 0.90000000000000002 
```

> 我是否应该在读取值或使用 min 函数时指定数据类型

如果您知道输入是数字，那么在读取数据时指定数据类型是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T19:18:44.123

另一种方法是将 python 内置`min`函数与`key`关键字结合使用：

```
>>> import numpy as np
>>> col = np.asarray(['6.7', '0.9', '1.3', '4', '1.8'])
>>> min(col,key=float)
'0.9' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:13:42.960

如果您不需要执行许多其他数值运算，并且您有理由更喜欢以`str`格式保存数据，那么您始终可以使用本机 Python`min`并`max`在纯`list`数据上进行操作：

```
In [98]: col = np.asarray(['6.7', '0.9', '1.3', '4', '1.8'])

In [99]: col
Out[99]:
array(['6.7', '0.9', '1.3', '4', '1.8'],
      dtype='|S3')

In [100]: col.min()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-100-1ce0c6ec1def> in <module>()
----> 1 col.min()

TypeError: cannot perform reduce with flexible type

In [101]: col.tolist()
Out[101]: ['6.7', '0.9', '1.3', '4', '1.8']

In [102]: min(col.tolist())
Out[102]: '0.9'

In [103]: max(col.tolist())
Out[103]: '6.7' 
```

一般来说，这不是处理数值数据的好方法，并且可能容易受到关于数组中的内容的许多错误假设的影响。但这只是另一种选择，如果您需要，或者您是否有特殊原因使用字符串（例如，您只计算最小值和最大值，而您对它们所做的只是显示它们）。

# ms-access - 我可以创建一个下拉列表（而不是组合框）吗？

> ID：14611704
> 
> 赞同：1
> 
> 时间：2013-01-30T19:02:21.293
> 
> 标签：ms-access, drop-down-menu, ms-access-2007

在 Access 中创建*组合框*很容易。但是，当不需要编辑或向列表添加值时，*下拉列表对用户来说会稍微容易一些。*

我可以设置一个属性来使组合框控件显示为下拉列表吗？是否有带有下拉样式的自定义 ActiveX 控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:12:55.697

看看组合框`.Dropdown`方法是否能让你接近你需要的东西。我从 Access 帮助主题中抄录了这个示例：

```
Private Sub SupplierID_GotFocus()
    Me!SupplierID.Dropdown
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:57:08.580

如果我正确理解您的短语“清单作为下拉列表”，我认为您的意思是您希望限制用户仅从一组预填充的选项中进行选择。

**提供批准值列表以供选择**

例如，如果您希望他们选择月份，并且从一月到十二月只有十二个有效条目，您可以提供来自查询、表或直接输入到组合框的行源属性中的月份列表。

**阻止用户添加新值或编辑现有值**

我认为“作为列表框显示”可能意味着您还可以通过将组合框的“限制到列表”属性设置为“是”来限制用户仅从您提供的值中进行选择。设置此属性会将您的用户限制在您的列表中，并且不允许编辑或新的列表条目。如果您需要确保用户选择了您的列表值之一，请记住采取附加步骤。

**一起使用 Dropdown 和 On Got Focus 之类的事件**

Dropdown 方法“打开”列表，以便用户可以看到可用的选项。例如，您可以将其设置为控件的 On Got Focus Event 属性，以便在将焦点设置到此控件时用户将看到部分或全部可用选项。

祝你好运！

# c# - 存在于 Session 中的 MVC ViewModel - 如何更新？

> ID：14611710
> 
> 赞同：0
> 
> 时间：2013-01-30T19:02:48.193
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我已经做到了“标准”的方式：

```
 public ActionResult Respondent()
    {
        return View(Session["Respondent"]); //passing the model
    }

    [HttpPost]
    public ActionResult Respondent(Respondent resp)
    {
        repository.UpdateRespondent(Respondent resp);
        Session["Respondent"] = respondent; //put back into session
        return View(respondent); //redraw view, passing in respondent
    } 
```

它有效。我只为 MVC 传递响应模型以在 POST 操作中自动收集 FORM 值，在视图内部我为所有属性提供了这些：

```
@using (Html.BeginForm())
{
    @Html.LabelFor(model => model.FirstName)
    @Html.EditorFor(model => model.FirstName)
    @Html.ValidationMessageFor(model => model.FirstName)

    // and so on...
} 
```

我的问题是 - 如果我已经在使用 Session 对象（位于 Session 中），有什么方法可以将 Session 对象用作视图内的模型，以便 HttpPost 工作，包括所有验证。那么，这些值将如何被收集并放回会话中呢？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:27:38.567

如果我理解您的问题，除了最佳实践之外，您可以将会话对象作为模型传递。

**2 警告：**

1.  传递时应强制转换会话对象

    返回视图((RespondentObject)Session["Respondent"])

2.  在视图上，记得绑定到对象类型

    @model perseus.Models.RespondentObject

我建议您在控制器中读取和写入 Session。

您指出您将使用多个部分来创建表单。你有2个选择：

*   创建一个由 Action 接收的模型，其中包括所有对象。
*   将每个参数单独传递给您的操作。

**你问为什么使用对象是不好的形式：**

*   因为它们是非类型的
*   因为 Sessions 不稳定（不可靠）

也就是说，您最了解您的应用程序和架构。你必须做出决定并支持他们。尽管我是一个纯粹主义者，但我相信最佳实践是一种指南，而不是一种宗教。情况不同。

# python - Python/Pycharm，Ctrl-Space 不调出代码补全

> ID：14611714
> 
> 赞同：3
> 
> 时间：2013-01-30T19:03:22.433
> 
> 标签：python, code-completion, pycharm

我有以下文件。为什么当我`Ctrl-Space`在“r.”之后按下时代码完成不运行？它在红色框中显示“没有建议”。

（程序运行和输出：200）

```
__author__ = 'hape'

import urllib.request
import urllib.response

print("Starting")
r = urllib.request.urlopen("http://www.python.org")

r.  <------------ No code completion, why not?!

print (r.getcode()) 
```

之后`r.`，代码完成没有弹出，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:08:23.380

您是否查看过编辑器代码完成设置的 Pycharm 页面？

[http://www.jetbrains.com/pycharm/webhelp/editor-code-completion.html](http://www.jetbrains.com/pycharm/webhelp/editor-code-completion.html)

通过启用智能类型代码完成？

[http://www.jetbrains.com/pycharm/webhelp/smart-type-code-completion-completing-code-based-on-type-in​​formation.html](http://www.jetbrains.com/pycharm/webhelp/smart-type-code-completion-completing-code-based-on-type-information.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-08T19:22:43.077

添加来自 JetBrains 的响应：@CrazyCoder 就在那里。问题是我们无法推断函数“urllib.request.urlopen()”的正确返回类型，因为它的实现使用了一些我们无法静态处理的动态技巧，特别是：

通常，我们在 python-skeletons 中使用外部注释来处理困难的情况，但它不包含“urllib.request”模块的类型提示。同样在即将发布的 PyCharm 版本中，我们计划切换到在 typeshed 项目中收集的注释集合。它发展得更加积极，并且已经包含一些“urllib”的注释。要从它们中受益，您只需在解释器路径中的某处放置带有注释的“urllib”包，以便 PyCharm 可以找到相应的 .pyi 存根。

[![来自 JB 的屏幕截图](../Images/b8d323ef40716ab2f390e340a5ce6ebc.png)](https://i.stack.imgur.com/HP513.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-16T07:56:38.590

检查 IDE 是否处于省电模式。如果是，则没有代码完成过程或任何其他后台进程起作用

它显示在 IDE 底部的状态栏中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-14T12:41:36.840

@CrazyCoder 是对的。现在，Pycharm 不知道`r`.

如果你真的喜欢自动补全，先获取`r`使用 IPython 或 debug的类型

```
# IPython

In [1]: import urllib.request

In [2]: r = urllib.request.urlopen("http://www.python.org")

In [3]: type(r)
Out[3]: http.client.HTTPResponse 
```

然后使用 Python3 注释

```
r: http.client.HTTPResponse = urllib.request.urlopen("http://www.python.org")
r. 
```

现在，你可以得到

[http.client.HTTPResponse 的 python 注释](https://i.stack.imgur.com/pL6ug.png)

# sql - 从Oracle中的字符串变量中提取多个数字

> ID：14611719
> 
> 赞同：0
> 
> 时间：2013-01-30T19:03:29.187
> 
> 标签：sql, regex, string, oracle, oracle10g

我有一个 varchar 变量，其内容如下：'123,12,7654321,9998...'。我在 Oracle 10gR2 工作。如何实现以下输出格式？：

```
------
123
12
7654321
9998
...
------ 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:07:10.817

试试这个

```
SELECT EXTRACTVALUE(COLUMN_VALUE,'text()') VALS 
FROM XMLTABLE('123,12,7654321,9998'); 
```

或者

```
SELECT COLUMN_VALUE VALS FROM XMLTABLE('123,12,7654321,9998'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:10:16.443

这是一种使用方法`connect`：

```
with str as (select '123,12,7654321,9998' as val from dual)
select cast(regexp_substr(val,'[^,]+', 1, level) as int)
from str
connect by cast(regexp_substr(val, '[^,]+', 1, level) as int) is not null; 
```

我承认我改编自这篇[文章](https://blogs.oracle.com/aramamoo/entry/how_to_split_comma_separated_string_and_pass_to_in_clause_of_select_statement)。您要做的通常是放入一个名为“split”的函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:25:53.723

试试这个 ：

```
/* Formatted on 1/30/2013 1:24:07 PM (QP5 v5.227.12220.39724) */
WITH val AS (SELECT '123,12,7654321,9998' txt FROM DUAL)
SELECT REGEXP_SUBSTR (txt,
              '[0-9]+|[a-z]+|[A-Z]+',
              1,
              lvl)
  FROM (SELECT txt,
           LEVEL lvl
      FROM val
    CONNECT BY LEVEL <=   LENGTH (txt)
                - LENGTH (REPLACE (txt,
                           ','))
                + 1) 
```

# php - 如何使用 Simple-HTML-DOM 提取完整的子链接？

> ID：14611721
> 
> 赞同：0
> 
> 时间：2013-01-30T19:03:48.657
> 
> 标签：php, hyperlink, anchor, simple-html-dom

以下是我用来从页面中提取子链接的基本代码：

```
<?php
    include_once('simple_html_dom.php');
    function extract_links($target_url)
    {   
        $html = new simple_html_dom();
        $html->load_file($target_url);  
        $i=0;
        $crawl =array();
        foreach($html->find('a') as $link)
        {
            $crawl[$i] = $link->href;
            $i++;
        }
        var_dump($crawl);
    }
    extract_links('http://stackoverflow.com');
?> 
```

输出如下：

```
array
  0 => string 'http://stackexchange.com' (length=24)
  1 => string '/users/login' (length=12)
  2 => string 'http://careers.stackoverflow.com' (length=32)
  3 => string 'http://chat.stackoverflow.com' (length=29)
  4 => string 'http://meta.stackoverflow.com' (length=29)
  5 => string '/about' (length=6)
  6 => string '/faq' (length=4)
  7 => string '/' (length=1)
  8 => string '/questions' (length=10)
  9 => string '/tags' (length=5)
  10 => string '/users' (length=6)
  11 => string '/badges' (length=7)
  12 => string '/unanswered' (length=11)
  13 => string '/questions/ask' (length=14)
  14 => string '?tab=interesting' (length=16)
  15 => string '?tab=featured' (length=13)
  16 => string '?tab=hot' (length=8)
  17 => string '?tab=week' (length=9)
  18 => string '?tab=month' (length=10)
  19 => string '/questions/14611052/basic-standalone-jpa-example-with-postgres-using-eclipse' (length=76)
  20 => string '/questions/tagged/eclipse' (length=25)
  21 => string '/questions/tagged/postgresql' (length=28)
  22 => string '/questions/tagged/jpa' (length=21)
  23 => string '/questions/14611052/basic-standalone-jpa-example-with-postgres-using-eclipse' (length=76)
  24 => string '/users/865448/tostao' (length=20)
  25 => string '/questions/14611172/unable-to-fully-print-a-page-containing-iframes-in-chrome' (length=77)
  26 => string '/questions/tagged/javascript' (length=28)
  27 => string '/questions/tagged/jquery' (length=24)
  28 => string '/questions/tagged/html' (length=22)
  29 => string '/questions/tagged/html5' (length=23)
  30 => string '/questions/tagged/google-chrome' (length=31)
  31 => string '/questions/14611172/unable-to-fully-print-a-page-containing-iframes-in-chrome' (length=77)
  32 => string '/users/962868/tejas' (length=19)
  33 => string '/questions/14609779/how-can-i-configure-bash-to-handle-crlf-shell-scripts' (length=73)
  34 => string '/questions/tagged/linux' (length=23)
  35 => string '/questions/tagged/windows' (length=25)
  36 => string '/questions/tagged/bash' (length=22)
  37 => string '/questions/tagged/line-endings' (length=30)
  38 => string '/questions/14609779/how-can-i-configure-bash-to-handle-crlf-shell-scripts/?lastactivity' (length=87)
  39 => string '/users/1899640/that-other-guy' (length=29)
  40 => string '/questions/14611169/using-one-socket-for-peer-to-peer-communication' (length=67)
  41 => string '/questions/tagged/sockets' (length=25)
  42 => string '/questions/tagged/p2p' (length=21)
  43 => string '/questions/14611169/using-one-socket-for-peer-to-peer-communication' (length=67)
  44 => string '/users/911651/xsnrg' (length=19)
  45 => string '/questions/14611166/possible-mistake-in-ios-dev-guide' (length=53)
  46 => string '/questions/tagged/iphone' (length=24)
  47 => string '/questions/tagged/ios' (length=21)
  48 => string '/questions/tagged/objective-c' (length=29)
  49 => string '/questions/14611166/possible-mistake-in-ios-dev-guide' (length=53)
  50 => string '/users/107715/matt-n' (length=20)
  51 => string '/questions/14611163/how-to-use-dispatcher-in-wpf-to-make-a-timer' (length=64)
  52 => string '/questions/tagged/wpf' (length=21)
  53 => string '/questions/tagged/timer' (length=23)
  54 => string '/questions/tagged/dispatcher' (length=28)
  55 => string '/questions/14611163/how-to-use-dispatcher-in-wpf-to-make-a-timer' (length=64)
  56 => string '/users/1741800/nashat' (length=21)
  57 => string '/questions/14610879/how-can-i-handle-an-access-violation-in-visual-studio-c' (length=75)
  58 => string '/questions/tagged/visual-c%2b%2b' (length=32)
  59 => string '/questions/tagged/exception-handling' (length=36)
  60 => string '/questions/tagged/access-violation' (length=34)
  61 => string '/questions/tagged/structured-exception' (length=38)
  62 => string '/questions/14610879/how-can-i-handle-an-access-violation-in-visual-studio-c/?lastactivity' (length=89)
  63 => string '/users/901812/big-endian' (length=24)
  64 => string '/questions/14611162/mvc-condintional-authorization' (length=50)
  65 => string '/questions/tagged/c%23' (length=22)
  66 => string '/questions/tagged/asp.net-mvc' (length=29)
  67 => string '/questions/tagged/asp.net-mvc-4' (length=31)
  68 => string '/questions/tagged/authorization' (length=31)
  69 => string '/questions/14611162/mvc-condintional-authorization' (length=50)
  70 => string '/users/644969/cadrell0' (length=22)
  71 => string '/questions/14611160/get-customer-role-nopcommerce' (length=49)
  72 => string '/questions/tagged/c%23' (length=22)
  73 => string '/questions/tagged/razor' (length=23)
  74 => string '/questions/tagged/nopcommerce' (length=29)
  75 => string '/questions/14611160/get-customer-role-nopcommerce' (length=49)
  76 => string '/users/1378841/mlg74' (length=20)
  77 => string '/questions/14611158/iframe-resizing-nested-in-gridview' (length=54)
  78 => string '/questions/tagged/resize' (length=24)
  79 => string '/questions/14611158/iframe-resizing-nested-in-gridview' (length=54)
  80 => string '/users/2026451/satish-patil' (length=27)
  81 => string '/questions/14611157/php-how-to-check-the-value-got-this-word-from-a-var' (length=71)
  82 => string '/questions/tagged/php' (length=21)
  83 => string '/questions/tagged/preg-match' (length=28)
  84 => string '/questions/tagged/strpos' (length=24)
  85 => string '/questions/14611157/php-how-to-check-the-value-got-this-word-from-a-var' (length=71)
  86 => string '/users/963414/samual99' (length=22)
  87 => string '/questions/14611155/how-to-get-the-coordinates-of-boundries-of-drawable-on-the-mapview' (length=86)
  88 => string '/questions/tagged/android' (length=25)
  89 => string '/questions/tagged/google-maps' (length=29)
  90 => string '/questions/14611155/how-to-get-the-coordinates-of-boundries-of-drawable-on-the-mapview' (length=86)
  91 => string '/users/1520564/blubar' (length=21)
  92 => string '/questions/14611153/why-css-is-empty-when-ssl-is-on-and-appcache-is-enabled-ipad-safari' (length=87)
  93 => string '/questions/tagged/css' (length=21)
  94 => string '/questions/tagged/ipad' (length=22)
  95 => string '/questions/tagged/ssl' (length=21)
  96 => string '/questions/tagged/mobile-safari' (length=31)
  97 => string '/questions/tagged/html5-appcache' (length=32)
  98 => string '/questions/14611153/why-css-is-empty-when-ssl-is-on-and-appcache-is-enabled-ipad-safari' (length=87)
  99 => string '/users/2026375/twoface' (length=22)
  100 => string '/questions/14611149/laravel-how-to-temporarily-store-eloquent-models-in-db-without-a-proper-schem' (length=97)
  101 => string '/questions/tagged/php' (length=21)
  102 => string '/questions/tagged/laravel' (length=25)
  103 => string '/questions/14611149/laravel-how-to-temporarily-store-eloquent-models-in-db-without-a-proper-schem' (length=97)
  104 => string '/users/291557/duality' (length=21)
  105 => string '/questions/13928812/xmlserializer-generateserializer-and-collections' (length=68)
  106 => string '/questions/tagged/c%23' (length=22)
  107 => string '/questions/tagged/xml-serialization' (length=35)
  108 => string '/questions/13928812/xmlserializer-generateserializer-and-collections/?lastactivity' (length=82)
  109 => string '/users/1200614/phil' (length=19)
  110 => string '/questions/14611145/keep-buttons-in-view-when-keyboard-opens-android' (length=68)
  111 => string '/questions/tagged/android' (length=25)
  112 => string '/questions/tagged/keyboard' (length=26)
  113 => string '/questions/tagged/resize' (length=24)
  114 => string '/questions/tagged/window' (length=24)
  115 => string '/questions/tagged/views' (length=23)
  116 => string '/questions/14611145/keep-buttons-in-view-when-keyboard-opens-android' (length=68)
  117 => string '/users/1137413/725623452362' (length=27)
  118 => string '/questions/14611144/ssdp-discovery-from-a-browser' (length=49)
  119 => string '/questions/tagged/silverlight' (length=29)
  120 => string '/questions/tagged/flash' (length=23)
  121 => string '/questions/14611144/ssdp-discovery-from-a-browser' (length=49)
  122 => string '/users/191882/legege' (length=20)
  123 => string '/questions/14611143/how-to-syncrhonize-on-site-in-memory-no-sql-datasources-with-central-database-in' (length=100)
  124 => string '/questions/tagged/architecture' (length=30)
  125 => string '/questions/tagged/nosql' (length=23)
  126 => string '/questions/tagged/java-ee-6' (length=27)
  127 => string '/questions/tagged/in-memory-database' (length=36)
  more elements... 
```

现在考虑数组中的“ **/about ”子链接。**我希望它显示为“ **[https://stackoverflow.com/about](https://stackoverflow.com/about)** ”。为什么只返回子链接的子部分，而在某些情况下返回完整的子链接？还有一些链接以' **？**' 符号。如何清理这些链接？

**编辑：** 考虑“ **`http://en.wikipedia.org/wiki/Web_crawler`**”。现在，如果我对其执行 extract_links，我会得到一个像这样“ **`http://en.wikipedia.org/wiki/Web_crawler/wiki/Web_search_engine`**”的子链接，这是无效的，并且大多数链接都是这种格式。正确的链接是“ **`http://en.wikipedia.org/wiki/Web_search_engine`**”。**我在另一个程序中使用这个函数，它将传递一个链接数组，所以我不能保持 if 条件*static***。以下是我现在使用的代码片段：

```
foreach($html->find('a') as $link)
{   
    $href = $link->href;
    $fchr = substr($href, 0, 1);
    if ($fchr === '/')
    {
        $href = $target_url.$href;
    }
    else if ($fchr === '?')
    {
        $href = $target_url.'/'. $href;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:28:20.387

任何以“/”开头的链接都是从文档根目录开始的绝对路径。要获得完整的 URL，您需要预先添加找到该链接的主机名。对于相对链接，例如“?tab=etc”，您需要预先添加找到链接的完整 URL。如果您想忽略查询字符串链接 ("?tab=etc")，请使用正则表达式来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:46:38.423

在 html 源代码中，此`a`元素的定义是`<a href="/about">about</a>`，因此它返回现有的 href 值作为`/about`。

如果您想显示带有 http 和域的链接，请尝试此操作（所有内部链接都可以以`/`or开头`?`）；

```
foreach($html->find('a') as $link) {
    $href = $link->href;
    $fchr = substr($href, 0, 1);
    if ($fchr === '/') {
        $href = 'http://stackoverflow.com'. $href;
    } else if ($fchr === '?') {
        $href = 'http://stackoverflow.com/'. $href;
    }
    $crawl[] = $href;
} 
```

`$i`PN：推非关联数组时不需要，就`$array[] = ..`可以了。

**更新**

假设您在“内部链接”方面遇到问题（因此，这些可能不包含 http 或站点 url）。实际上我不知道如何检测内部链接了。我认为这抓住了所有这些：`'foo', '/foo', '?foo', '#foo', '../foo', '/../foo'`。但是假设这些似乎无效？`'../foo', '/../foo'`.

```
// or more strong pattern
if (!preg_match('~^((ht|f)tp?s*)://.*~i', trim($href))) {
    $href = 'http://www.site.com/'. ltrim($href, '/');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T09:27:35.803

## *@pguardiario 的评论*

正如他的评论`phpUri`中所建议的，是将相对 URL 转换为绝对 URL 的完美解决方案。你可以在[这里找到它，](https://github.com/monkeysuffrage/phpuri)

# ios - 我无法理解这 2 份崩溃报告

> ID：14611722
> 
> 赞同：4
> 
> 时间：2013-01-30T19:03:53.523
> 
> 标签：ios, objective-c, xcode, crash, crittercism

由于我收到了有关崩溃的评论，但该应用程序从未为我崩溃，因此我现在使用批评来追捕崩溃。

我收到一份报告指出我的错误。这很容易，因为给出了方法名称，我可以查看我的代码可能会崩溃的地方。到目前为止，一切都很好。

但我也有以下两个让我困惑。

对我来说，看起来应用程序在一些内部苹果库中崩溃了。（很可能是因为我给它喂了一些坏东西......）

崩溃中没有来自我的代码的调用，那么从哪里开始寻找呢？

有人了解这些崩溃吗？知道如何捕捉这些并获得更多崩溃信息吗？1号：

```
0 CoreFoundation 0x3585f88f __exceptionPreprocess + 162
1 libobjc.A.dylib 0x37c06259 objc_exception_throw + 32
2 CoreFoundation 0x35862a9b -[NSObject doesNotRecognizeSelector:] + 174
3 CoreFoundation 0x35861915 ___forwarding___ + 300
4 CoreFoundation 0x357bc650 _CF_forwarding_prep_0 + 48
5 UIKit 0x332f3efb -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 546
6 UIKit 0x332f2f39 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 916
7 UIKit 0x332f2763 -[UITableView layoutSubviews] + 206
8 UIKit 0x33296f37 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 182
9 CoreFoundation 0x357be1fb -[NSObject performSelector:withObject:] + 42
10 QuartzCore 0x3268eaa5 -[CALayer layoutSublayers] + 216
11 QuartzCore 0x3268e6bd _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 216
12 QuartzCore 0x32692843 _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 226
13 QuartzCore 0x3269257f _ZN2CA11Transaction6commitEv + 314
14 QuartzCore 0x326ba911 _ZN2CA11Transaction5flushEv + 44
15 QuartzCore 0x326ba8e3 +[CATransaction flush] + 34
16 UIKit 0x332a1fb1 _afterCACommitHandler + 52
17 CoreFoundation 0x35833b1b __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 18
18 CoreFoundation 0x35831d57 __CFRunLoopDoObservers + 258
19 CoreFoundation 0x358320b1 __CFRunLoopRun + 760
20 CoreFoundation 0x357b54a5 CFRunLoopRunSpecific + 300
21 CoreFoundation 0x357b536d CFRunLoopRunInMode + 104
22 GraphicsServices 0x37451439 GSEventRunModal + 136
23 UIKit 0x332c1cd5 UIApplicationMain + 1080
24 Wohnungssuche 0x000d5218 start + 40 
```

2号：

```
Thread: Unknown Name (Crashed)
0     libobjc.A.dylib                       0x35beb5d0 objc_msgSend + 16 + 15
1     UIKit                                 0x39fb0541 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 409 + 408
2     UIKit                                 0x39f95361 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1317 + 1316
3     UIKit                                 0x39fac7ff -[UITableView layoutSubviews] + 207 + 206
4     UIKit                                 0x39f68897 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 259 + 258
5     QuartzCore                            0x34ab74eb -[CALayer layoutSublayers] + 215 + 214
6     QuartzCore                            0x34ab708d _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 461 + 460
7     QuartzCore                            0x34ab7fb1 _ZN2CA5Layer28layout_and_display_if_neededEPNS_11TransactionE + 17 + 16
8     QuartzCore                            0x34ab799b _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 239 + 238
9     QuartzCore                            0x34ab77ad _ZN2CA11Transaction6commitEv + 317 + 316
10   QuartzCore                             0x34aee7df _ZN2CA7Display11DisplayLink8dispatchEyy + 255 + 254
11   QuartzCore                             0x34aee6d9 _ZN2CA7Display16IOMFBDisplayLink8callbackEP21__IOMobileFramebufferyyyPv + 65 + 64
12   IOMobileFramebuffer                    0x375f0fd7 IOMobileFramebufferVsyncNotifyFunc + 155 + 154
13   IOKit                                  0x3282a5ad IODispatchCalloutFromCFMessage + 193 + 192
14   CoreFoundation                         0x3918288b __CFMachPortPerform + 119 + 118
15   CoreFoundation                         0x3918d3e7 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 35 + 34
16   CoreFoundation                         0x3918d38b __CFRunLoopDoSource1 + 139 + 138
17   CoreFoundation                         0x3918c20f __CFRunLoopRun + 1383 + 1382
18   CoreFoundation                         0x390ff23d CFRunLoopRunSpecific + 357 + 356
19   CoreFoundation                         0x390ff0c9 CFRunLoopRunInMode + 105 + 104
20   GraphicsServices                       0x3344933b GSEventRunModal + 75 + 74
21   UIKit                                  0x39fb9291 UIApplicationMain + 1121 + 1120 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:14:40.563

两种情况下的崩溃点是相同的：

```
 UIKit 0x39fb0541 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 409 + 408 
```

在第一种情况下，表视图试图在未实现所述方法的实例上调用方法。第二次崩溃是由于尝试向垃圾发送消息而引起的。

因此，最可能的结论是，两次崩溃都是同一个问题的征兆。你有一个被过早释放或过度释放的对象。

特别是，表视图的数据源在表重新加载之前或期间被释放。

我怀疑 UITableView 试图调用数据源的方法来创建一个单元格。您可以通过在所述方法上设置断点并查看堆栈跟踪来确认这一点。如果我的赌注是正确的，您将在跟踪中看到 _createPreparedCellForGlobal... 方法。

* * *

在不知道您的应用程序的详细信息的情况下，很难说。最有可能的是，这是在屏幕上加载数据与用户执行某些操作之间的时间相关问题，导致请求在表格视图完成加载之前被取消，从而导致您的数据源从表格下方释放（可能会发生，因为表视图具有对您的对象的分配引用；非保留引用）。

要尝试和复制，请关注：

• 缓慢的网络连接或可变带宽（如果您的应用是客户端/服务器）

• 做用户可能会导致操作取消的事情

• 在视图之间快速导航，无需等待更新完成绘图

在您的评论中，您提到您正在尝试使用“两种不同的 iPhone”。尝试其他设备类型和不同的网络配置。

# javascript - 再次进入网站时如何避免大图闪烁？

> ID：14611726
> 
> 赞同：0
> 
> 时间：2013-01-30T19:04:06.457
> 
> 标签：javascript, image, firefox, browser

如果您的网站以非常大的图像作为背景，则每当您离开该网站并在其他选项卡中访问其他网站时，该图像都会闪烁一瞬间。感觉就像浏览器正在重新加载图像。

如果您在离开站点后立即进入站点，则不会发生这种情况，可能需要 30 秒。

这个问题可以通过编程解决，还是与浏览器有关？

PS。我使用Firefox，它不会发生在Chrome 或IE 中。

PS。图像大小为 423 kb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:13:59.110

尝试添加展示位置信息以及后备颜色信息：

```
background:#ccc url('img.jpg') no-repeat center center fixed; 
```

Firefox 通常喜欢更明确地编码（例如 position:absolute）。

# jquery - jQuery：遍历元素并包装在不同的标签中

> ID：14611727
> 
> 赞同：1
> 
> 时间：2013-01-30T19:04:07.740
> 
> 标签：jquery, arrays, loops

我正在从公共域网站 (cancer.gov) 上抓取内容，并且我想重新格式化标记，因为它在表格中的格式非常糟糕。我有 jQuery 供我使用，我只是想把它放到控制台中，这样我就可以将它复制并粘贴到 Vim 中。

我已经将要制作的`td`元素数组制作成`h3`'s，但是当我尝试遍历它们并将它们包装在`h3`标签中时，我得到`Error: NOT_FOUND_ERR: DOM Exception 8`了 ，我相信这是找不到 DOM 元素，这是没有意义的。

看看我评论的[小提琴](http://jsfiddle.net/nickcoxdotme/M4Pn5/)。

加分点：`td`' s 都是问题，我能想到的将它们拆分为数组索引的唯一方法是将它们拆分为`?`，这会删除输出中的问号。将它们放回原处的最佳方法是什么？

### 更新

如果您想查看该页面并在控制台中尝试操作，请[点击此处](http://www.cancer.gov/cancertopics/coping/chemotherapy-and-you/page2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:08:35.363

创建一个 jQuery 对象并不会神奇地将它们变成 DOM 元素。

* * *

只需在 HTML 的大字符串上创建，并将其传递给 jQuery 构造函数：

```
var questions = $('selector here...').text().split('?');

questions = $('<h3>' + questions.join('?</h3><h3>') + '?<h3>' ); 
```

这是你的小提琴：http: [//jsfiddle.net/M4Pn5/1/](http://jsfiddle.net/M4Pn5/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:31:10.347

您可以简单地将内容抓取到一个数组中，然后对数组做任何您想做的事情，而不必担心问号。

```
var myarr = $('#Table1').find('tr:even');//even to exclude the hr rows 
```

在这里，我展示了一些你可以用它做的事情：

```
var myQuest = myarr.find('td:eq(0)').map(function () {
    return $(this).html();
});//questions
var myAns = myarr.find('td:eq(1)').map(function () {
    return $(this).html();
});// answers

//process the arrays:
for (var i = 0; i < myQuest.length; i++) {
    alert(myQuest[i]+ myAns[i]);
};

myarr.find('td:eq(0)').wrap('<h3>');//wrap the questions 
```

# javascript - infowindow.close() 不适用于多个标记

> ID：14611729
> 
> 赞同：1
> 
> 时间：2013-01-30T19:04:20.060
> 
> 标签：javascript, google-maps-api-3, geolocation, google-maps-markers

我阅读了很多解决方案并尝试了几个，但在我的脚本中我无法完成它。

我喜欢在单击另一个标记时关闭活动的信息窗口。

部分代码：

```
 for (var i = 0; i < locations.length; i++) {
          var centrum = locations[i];
          var myLatLng = new google.maps.LatLng(centrum[1], centrum[2]);
          var marker = new google.maps.Marker({
              position: myLatLng,
              map: map,
              animation: google.maps.Animation.DROP,
              icon: image,
              shape: shape,
              title: centrum[0],
              zIndex: centrum[3]
          });
          marker['infowindow'] = new google.maps.InfoWindow({
              content: '<b>Informatie:</b><br>' + centrum[0]
          });
          google.maps.event.addListener(marker, 'click', function() {
              marker['infowindow'].close(); // has to close another active window
              this['infowindow'].open(map, this);
          });
        } 
```

有人提示或更好......解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:25:54.803

将标记保存在数组中，并在打开当前窗口之前添加对关闭所有窗口的函数的调用：

```
function closeInfos() {
    for(var i=0; i<markers.length; i++)
    {
        markers[i]['infowindow'].close();
    }
} 
```

**编辑：**

使用您的代码，它应该看起来像这样：

```
var markers = [];
for (var i = 0; i < locations.length; i++) {
          var centrum = locations[i];
          var myLatLng = new google.maps.LatLng(centrum[1], centrum[2]);
          var marker = new google.maps.Marker({
              position: myLatLng,
              map: map,
              animation: google.maps.Animation.DROP,
              icon: image,
              shape: shape,
              title: centrum[0],
              zIndex: centrum[3]
          }));
          marker['infowindow'] = new google.maps.InfoWindow({
              content: '<b>Informatie:</b><br>' + centrum[0]
          });
          markers.push(marker);
          google.maps.event.addListener(marker, 'click', function() {
              closeInfos();
              this['infowindow'].open(map, this);
          });
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:24:08.670

通过将 infowindow 存储到变量中，只保留一个对 infowindow 的引用，例如：

`var infowindow = new google.maps.InfoWindow({content: "some text here..."});`

这就是这样做的方法，现在您正在创建该类的许多实例..

查看完整的[小提琴](http://jsfiddle.net/hWPVJ/1/)

**编辑：**

具有独特内容[小提琴的信息窗口](http://jsfiddle.net/hWPVJ/2/)

# javascript - JavaScript div 使用纵横比调整大小

> ID：14611736
> 
> 赞同：0
> 
> 时间：2013-01-30T19:04:53.133
> 
> 标签：javascript, html, resize, aspectj, mousemove

我正在编写一个允许用户移动和调整 div 大小的小脚本。我需要保持纵横比，我的逻辑不起作用。

```
function resizing() {
    var currentHeight = elmnt.offsetHeight;
    var currentWidth  = elmnt.offsetWidth;
    var newHeight     = currentHeight + (event.pageY - currentY);
    var newWidth      = currentWidth  + (event.pageX - currentX);
    var ratio         = currentWidth  / currentHeight;

    if(ratio < 1) {
        newwidth = parseInt(newHeight * ratio);
    }
    else {
        newheight = parseInt(newWidth / ratio);
    }

    elmnt.style.height = newHeight + "px";
    elmnt.style.width  = newWidth  + "px";

    currentY = event.pageY;
    currentX = event.pageX;
} 
```

脚本类型的作品。但不幸的是，它不能保持纵横比完全正确。有时，当我只调整水平线的大小时，旧的高度保持不变，有时它会起作用，但是一个长度会被调整大小并有一点偏移。

当我再次上下调整大小时，长度变得越来越相等，当它是一个合适的正方形时，一切都是正确的。

如何解决我的问题？我的谬误在哪里？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:10:43.417

我认为你的比例是错误的。

您需要通过取旧宽度并除以新宽度或旧高度/新高度来计算这一点。

例如

```
var ratio = newWidth / currentWidth;
newHeight = currentHeight * ratio; 
```

改变它是否是高度正在改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:40:12.400

我可以的。

非常感谢！

我的问题是我首先必须跟踪哪个轴有更多的变化。我没有意识到的第二个问题是，我在**舍**入问题上遇到了很大的问题。

使用 jQuery 设置 css 大小时，它会四舍五入。我为每一个事件计算比率的高度。

这意味着不准确性变得越来越糟糕。现在我考虑到了这一点，并想出了一种方法来让它工作**得**很好。

我现在直接在 onclick 上执行此操作，只是更新它们而不是从元素中获取：

```
currentHeight = $("#dragger").height();
currentWidth = $("#dragger").width(); 
```

所以再次感谢您的帮助！这是我的最终结果：http: [//jsfiddle.net/julian_weinert/xUAZ5/30/](http://jsfiddle.net/julian_weinert/xUAZ5/30/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:11:59.030

你必须这样做，得到最小比例（比率）。下面的代码是我的 PHP 脚本的一部分，但很容易翻译成 JS。`$iSrc`= 源和`$iDest`是目标最大宽度/高度。

你的问题是你没有得到正确的比例。定义比率的第一行是解决问题的地方。它获得宽度或高度的最低比率。你只做宽度/高度并忘记高度/宽度。这就是垂直缩放不正确的原因。

```
$scale = min($iDestWidth/$iSrcWidth, $iDestHeight/$iSrcHeight);

    if($scale >= 1){
        $iDestHeight = $iSrcHeight;
        $iDestWidth = $iSrcWidth;
    }else{          
        $iDestWidth = floor($scale*$iSrcWidth);
        $iDestHeight = floor($scale*$iSrcHeight);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T01:02:22.450

用以下内容替换您的 if(ratio < 1) 块。offsetx 和 offsety 与您的 (event.pageX - currentX) 和 (event.pageY - currentY) 相关：

```
if (Math.abs(offsetx) > Math.abs(offsety)) {
    ratio = currentHeight/currentWidth;
    newHeight = currentHeight + (offsetx * ratio);
    newWidth = currentWidth + offsetx;        
} else {
    ratio = currentWidth/currentHeight;
    newHeight = currentHeight + offsety;
    newWidth = currentWidth + (offsety * ratio);  
} 
```

这是整个操作的快速jsfiddle：http: [//jsfiddle.net/8TWRV/](http://jsfiddle.net/8TWRV/)

# scala - Stream[Boolean] 中的 foldLeft 提前终止？

> ID：14611737
> 
> 赞同：5
> 
> 时间：2013-01-30T19:04:53.257
> 
> 标签：scala

我有一个：

```
val a : Stream[Boolean] = ... 
```

当我 foldLeft 如下

```
val b = a.foldLeft(false)(_||_) 
```

`true`当它在流中找到第一个值时会终止吗？如果没有，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:13:10.653

它不会在第一个 true 时终止。您可以改用存在：

```
val b = a.exists(identity) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T19:37:33.020

不，它不会提前终止。这很容易说明：

```
val a : Stream[Boolean] = Stream.continually(true)
// won't terminate because the strea
val b = a.foldLeft(false)(_||_) 
```

炖表明，在您的具体情况下，提前终止的简单解决方案是

```
val b = a.exists(identity). 
```

更简单的是，这相当于：

```
val b = a.contains(true) 
```

如果您确实需要折叠，则与上述不同的更通用的解决方案也适用于使用递归（请注意，为简单起见，这里我假设流是非空的）：

```
def myReduce( s: Stream[Boolean] ): Boolean = s.head || myReduce( s.tail )
val b = myReduce(a) 
```

现在递归解决方案的有趣之处在于它如何用于更一般的用例中，您实际上需要以某种方式累积值（这就是 fold 的用途）*并且仍然提前终止*。假设您想使用一种`add`方法来添加整数流的值，该方法将以类似的方式提前“终止” `||`（在这种情况下，如果左侧> 100，它不会评估其右侧）：

```
def add(x: Int, y: => Int) = if ( x >= 100 ) x else x + y
val a : Stream[Int] = Stream.range(0, Int.MaxValue)
val b = a.foldLeft(0)(add(_, _)) 
```

最后一行不会终止，就像您的示例一样。但是你可以像这样修复它：

```
def myReduce( s: Stream[Int] ): Int = add( s.head, myReduce( s.tail ) )
val b = myReduce(a) 
```

**警告**：这种方法有一个明显的缺点：`myReduce`这里不是尾递归，这意味着如果迭代流的太多元素，它会破坏你的堆栈。另一个不会破坏堆栈的解决方案是：

```
val b = a.takeWhile(_ <= 100).foldLeft(0)(_ + _) 
```

但我担心我在离题方面走得太远了，所以我最好现在停下来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:12:45.820

您可以使用`takeWhile`提取`Stream`要操作的前缀，然后应用于该前缀`foldLeft`。

# jquery - 使用停止后jquery淡入错误

> ID：14611747
> 
> 赞同：-1
> 
> 时间：2013-01-30T19:05:11.977
> 
> 标签：jquery, callback, fadein

我是 jquery 的新手，我需要对不同的元素进行链接效果，所以我使用了像这个例子这样的回调函数：

HTML：

```
<div id="div1" class="class1">hello</div>
<div id="div2" class="class2">world</div>
<div id="div3" class="class3"></div> 
```

JS：

```
$("#div1").fadeIn(1000,
(function(){
   $("#div2").fadeIn(5000,
   (function(){ 
     $("#div3").fadeIn(1000);
   });
 }); 
```

所以如果我想在任何时候停止它，我会调用一个类似这样的函数：

```
$(".class1").stop(true);
$(".class2").stop(true);
$(".class3").stop(true); 
```

（不知道有没有更好的办法）

但最重要的问题是，有时我不知道为什么如果我再次制作动画，图像淡入将不再完成。所以我要问的是我是否对这两个导致错误的代码做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:14:47.663

[fadeIn() 关于使用](http://api.jquery.com/fadeIn/)的文档，您的示例应该是这样的：

```
$(".class1").stop().fadeIn(1000,function(){
   $(".class2").fadeIn(5000,function(){ 
     $(".class3").fadeIn(1000);
   });
}); 
```

或您的替代方式：

```
$(".class1").stop().fadeIn(1000);
$(".class2").delay(1000).stop().fadeIn(5000);
$(".class3").delay(5000).stop().fadeIn(1000); 
```

# javascript - Forever 或 domain - 其中哪一个更适合 node.js 持续工作

> ID：14611749
> 
> 赞同：6
> 
> 时间：2013-01-30T19:05:31.003
> 
> 标签：javascript, node.js, forever

我希望我的节点应用程序连续运行。我确信在应用程序工作期间可能会出现一些崩溃。如今，我可以看到 3 种使应用程序持续运行的方法：

1.  [永远](https://npmjs.org/package/forever)启动我的应用程序，所以当应用程序永远崩溃时会自动重新启动它
2.  使用[域](http://nodejs.org/api/domain.html)模块捕获错误并在发出“错误”事件时再次启动应用程序
3.  *弃用*process.on('uncaughtException')

问题是：这三种方式中哪一种更好用。在我看来，这个问题没有确切的答案，所以欢迎任何评论。

在我看来，第一个更合适，因为节点进程的内存消耗不会随着时间的推移而增长——每次节点进程永远崩溃都会启动另一个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T21:36:09.600

啊，这是一个棘手的问题。首先，[`domains`](http://nodejs.org/api/domain.html)方法的不同之处[`forever`](https://npmjs.org/package/forever)在于它不会强制您重新启动整个 Node 进程。例如，您的 Node 应用程序同时处理来自多个客户端的请求。通过仔细配置您的域，您（至少在理论上）将能够防止其他请求在其中一个请求引发错误时失败。

然而，在实践中，要让域工作，您的应用程序的某些组件必须是 -`domain`感知的。这也适用于第三方组件。例如，一个在内部使用连接池的数据库连接模块不应该将它们包装到它自己的域中，而是检查回调是否已经附加了一个域。否则，数据库代码中抛出的异常将被模块自己的域捕获，而您的域不会知道它。因此，为了使用带有第三方代码的域，您必须首先检查该代码是否是`domains`在考虑到该代码的情况下编写的。

`forever`只需在应用程序崩溃时重新启动它。这听起来比 更糟糕`domains`，但它也没有对第三方代码强加任何特定要求。因此，您可以使用任何您想要的库或模块。您也不必将任何复杂的错误恢复逻辑放入您的代码中。有时拥有一个简单的代码库比拥有一个不失败但复杂的代码库更重要。

至于`process.on('uncaughtException')`我不会用。它现在已被弃用，因此它可能会在某个时候被删除。

* * *

## 这是我的细分：

1.  `forever`

    ### 优点：

    *   让你的代码库更简单更小
    *   允许您先编写应用程序逻辑，然后再考虑错误处理

    ### 缺点：

    *   单个未捕获的异常导致所有其他请求失败

    ### 在以下情况下使用：

    *   你的 Node 进程和你的请求很便宜
    *   客户端可以重试错误
2.  `domains`

    ### 优点：

    *   中断的请求不会中断其他客户端
    *   节点进程保持更长的时间减少您的整体停机时间
    *   [另见`domains+cluster`组合（谢谢，艾萨克！）](https://stackoverflow.com/questions/14611749/forever-or-domain-which-of-them-is-better-for-node-js-continuous-work#comment20409657_14614261)

    ### 缺点：

    *   可以与域感知的 3rd-party 库一起使用
    *   在你的程序中需要额外的逻辑

    ### 在以下情况下使用：

    *   您的请求或您的节点进程很昂贵（例如文件上传、流数据）
    *   单节点正常运行时间很重要
3.  `process.on('uncaughtException')`不要使用它。

* * *

## 笔记

1.  *[Isaac Z. Schlueter](https://npmjs.org/~isaacs)和[Felix Geisendörfer在](https://npmjs.org/~felixge)[NodeUp 第 13 集中](http://nodeup.com/thirteen)谈到了域*

2.  *[最近`forever``systemd`](http://savanne.be/articles/deploying-node-js-with-systemd/)有一篇文章解释了[Unix 和](http://savanne.be/articles/deploying-node-js-with-systemd/). 您可能会发现它很有用。*

# c# - 从 sql 数据库返回随机行并使用 ASP.NET 在 html 表中显示

> ID：14611751
> 
> 赞同：1
> 
> 时间：2013-01-30T19:05:34.640
> 
> 标签：c#, asp.net, html, sql, sql-server-2008-r2

我是使用 ASP.NET 的新手，想知道如何从 sql 数据库中选择随机行，然后在单独的页面上显示 html 表中的字段。用户可以按下按钮，该按钮将从数据库中检索随机电影，然后在新页面的 html 表中显示电影详细信息。我不知道该怎么做，并且一直在尝试使用标签来显示数据。这是到目前为止的代码示例：

```
 private SqlConnection conn;
    protected void Page_Load(object sender, EventArgs e)
    {
            ConnectionStringSettings connString = ConfigurationManager.ConnectionStrings ["MovieAppConnectionString1"];
            conn = new SqlConnection(connString.ConnectionString);
    }

    protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
    {
        try
        {
            conn.Open();
            string queryString = "SELECT TOP 1 * FROM Movie ORDER BY NEWID()";
            SqlCommand cmd = new SqlCommand(queryString, conn);
            {
                SqlDataReader reader = cmd.ExecuteReader();
                StringBuilder MyStringBuilder = new StringBuilder();
                while (reader.Read())
                {
                    Image2.Text = reader[2].ToString();
                    Label1.Text = reader[1].ToString();
                    Desc.Text = reader[3].ToString();
                    Direc.Text = reader[5].ToString();
                    Strs.Text = reader[7].ToString();
                    Rtime.Text = reader[4].ToString();
                    ImdbRt.Text = reader[8].ToString();
                }
            }
       }
        finally
        {
            conn.Close();
        }
        Server.Transfer("MovieSelected.aspx"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:08:29.800

更改您的 sql server 查询：

```
SELECT TOP 1 * FROM Movie ORDER BY NEWID() 
```

至

```
SELECT TOP 1 * FROM Movie ORDER BY RAND() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:07:44.843

在您的 aspx.cs 文件中：

```
int iLength = 0; 
int index = 0;

DataTable dt = new DataTable();
dt = SqlComm.SqlDataTable("SELECT * FROM Movie");

object obj = new object();
obj = SqlComm.SqlReturn("SELECT COUNT (yourTargetColumn) FROM yourTable");

if (obj != null)                    
     iLength = Convert.ToInt32(obj); 

string[] stringArray = new string[iLength];
for (index = 0; index < iLength; index++) 
{
     stringArray[index] = (string)dt.Rows[index]["yourTargetColumn"];                   
}
foreach (string strArray in stringArray)
{    
     Label yourLabel = new Label();
     PH.Controls.Add(yourLabel);
} 
```

在您的 .aspx 文件中：

```
<asp:PlaceHolder ID="PH" runat="server"></asp:PlaceHolder> 
```

将一个类添加到名为“SqlComm.cs”的 App_Code 文件夹中：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;
using System.Data.SqlClient;

public class SqlComm
{
   static string DatabaseConnectionString = "your connection string";

   public static object SqlReturn(string sql)
    {
        using (SqlConnection conn = new SqlConnection(DatabaseConnectionString))
        {
            conn.Open();
            SqlCommand cmd = new SqlCommand(sql, conn);                  
            object result = (object)cmd.ExecuteScalar();
            return result;           

        }
    }

   public static DataTable SqlDataTable(string sql)
   {
       using (SqlConnection conn = new SqlConnection(DatabaseConnectionString))
       {
           SqlCommand cmd = new SqlCommand(sql, conn);
           cmd.Connection.Open();
           DataTable TempTable = new DataTable();
           TempTable.Load(cmd.ExecuteReader());
           return TempTable;
       }
} 
```

* * *

注意：不要忘记将 添加`using System.Data.SqlClient`到您的代码中。此外，您只需自定义`SELECT`命令即可获得所需的数据。

# c# - C# 渲染性能差异

> ID：14611752
> 
> 赞同：0
> 
> 时间：2013-01-30T19:05:46.797
> 
> 标签：c#, performance, rendering

我正在使用动态数据显示来绘制一些图。

它提供了一个名为 MarkerPointsGraph 的类来将标记呈现到屏幕上。OnRender 方法在 Render 期间被调用，这反过来又调用适当的标记（圆形、三角形等）的渲染方法。

```
 protected override void OnRenderCore(DrawingContext dc, RenderState state)
    {
        if (DataSource == null) return;
        if (Marker == null) return;

        var transform = Plotter2D.Viewport.Transform;

        DataRect bounds = DataRect.Empty;
        using (IPointEnumerator enumerator = DataSource.GetEnumerator(GetContext()))
        {
            Point point = new Point();
            while (enumerator.MoveNext())
            {
                enumerator.GetCurrent(ref point);
                enumerator.ApplyMappings(Marker);

                //Point screenPoint = point.Transform(state.Visible, state.Output);
                Point screenPoint = point.DataToScreen(transform);

                bounds = DataRect.Union(bounds, point);
                Marker.Render(dc, screenPoint);
            }
        }

        Viewport2D.SetContentBounds(this, bounds);
    }

/// <summary>Renders circle around each point of graph</summary>
public class CirclePointMarker : ShapePointMarker {

    public override void Render(DrawingContext dc, Point screenPoint) {
        dc.DrawEllipse(Fill, Pen, screenPoint, Size / 2, Size / 2);
    }
} 
```

现在，我的调用代码如下。

```
 plotter.AddLineGraph(
            data.Data,
            new Pen
            {
                Brush = Brushes.Violet,
                DashStyle = DashStyles.DashDot,
                Thickness = 3
            },
            GetMarker(data),
            new StandardDescription(data.Title)); 
```

我注意到性能的主要区别在于以下方法。

引用来自 ChartData 类的数据

```
private ShapePointMarker GetMarker(ChartData data)
    {
        ShapePointMarker marker = null;

        switch (data.MarkerShape)
        {
            case Shapes.Circle:
                marker = new CirclePointMarker();
                break;

            case Shapes.Triangle:
                marker = new TrianglePointMarker();
                break;

            case Shapes.None:
            default:
                marker = null;
                break;
        }

        if (marker != null)
        {
            //Referring to stuff here.
            marker.Fill = new SolidColorBrush(data.MarkerColor);
            marker.Size = data.MarkerSize;
        }

        return marker;
    } 
```

硬编码数据代替参考。

```
private ShapePointMarker GetMarker(ChartData data)
    {
        ShapePointMarker marker = null;

        switch (data.MarkerShape)
        {
            case Shapes.Circle:
                marker = new CirclePointMarker();
                break;

            case Shapes.Triangle:
                marker = new TrianglePointMarker();
                break;

            case Shapes.None:
            default:
                marker = null;
                break;
        }

        if (marker != null)
        {
            //Hard coding stuff here.
            marker.Fill = Brushes.Red;
            marker.Size = 5;
        }

        return marker;
    } 
```

仅通过将 GetMarker 方法中基于引用的数据更改为硬编码值，我就发现渲染时间提高了近 100 倍。

C# 的什么行为导致了这种差异？

编辑： MarkerPointsGraph 不会为每个点创建一个 Marker 对象。它只是调用 render 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:37:10.397

您可以尝试冻结您的画笔：

```
if (marker != null)
{
    Brush b = new SolidColorBrush(data.MarkerColor);
    b.Freeze();  
    marker.Fill = b;  
    marker.Size = data.MarkerSize;  
} 
```

`Brushes.Red`已经冻结，这可能就是您看到性能提升的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:39:44.953

在不了解您的设置的情况下，您的问题可能在于您正在创建`SolidColorBrush`一个相对紧凑的循环（而不是处理它们，但这是另一个问题）。该对象具有与创建新对象相关的大量开销，而 using`Brushes.Red`使用相同的实例，因此没有相同的问题。如果您曾经创建自己的画笔，我认为您不会遇到同样的问题。

# java - 将字符串拆分为导致 NumberFormatException 的字符串数组

> ID：14611754
> 
> 赞同：0
> 
> 时间：2013-01-30T19:05:55.660
> 
> 标签：java, regex, parsing

我很难将文本文件中的每一行拆分为字符串数组并像我需要的那样使用它。split() 似乎工作正常。我最终得到了一个字符串数组，其中字符串数组的第一个槽包含一个我需要解析为 int 的数字，以继续我的代码。出于某种原因，我不断收到下面显示的错误，我似乎无法弄清楚。

我的目标是简单地将包含字母的文本文件的每一行存储在一个数组中，并将将成为该行的第一个值的数字解析为一个整数。完成此操作后，我需要能够独立使用前面的每组字母，因此我也尝试将它们放入数组中。

我很感激这方面的任何帮助。

提前谢谢了！

注意：numGrammars 是文本文件第一行显示的第一个数字。

我的代码

```
 numGrammars = Integer.parseInt(fin.next());
    System.out.println("Num Grammars:" + numGrammars);

    for(int v=0; v < numGrammars; v++){
       int numVariables = Integer.parseInt(fin.next());
       System.out.printf("numVariables: %s", numVariables);

        for(int z=0; z < numVariables; z++){
            //reads in variable line
            String line = fin.nextLine();
            String[] strings = line.split(" ");

            for(int m=0; m < strings.length; m++){
               int numRules = Integer.parseInt(strings[0]);
               //All other array slots in strings array should be groups of letters on group per slot...

            }   
        }
    } 
```

控制台输出

```
Num Grammars:2
numVariables: 3Exception in thread "main" java.lang.NumberFormatException: For input string: ""
at java.lang.NumberFormatException.forInputString(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at Methods.readFile(Methods.java:34)
at Main.main(Main.java:12) 
```

我正在阅读的文本文件：

```
1
3
2 S AB BB
3 A BB a b
2 B b c 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:07:03.870

仅使用`fin.nextLine()`. 在调用 之后`next()`，光标就在 numVariables value 之后`3`，但**在**换行符之前。当您`nextLine()`在那之后调用时，它会返回光标和换行符之间的所有内容，这是一个空字符串！`nextLine()`每次使用总是将光标放在换行符之后，一切正常。

```
numGrammars = Integer.parseInt(fin.nextLine());
System.out.println("Num Grammars:" + numGrammars);

for(int v=0; v < numGrammars; v++){
   int numVariables = Integer.parseInt(fin.nextLine());
   System.out.printf("numVariables: %s", numVariables);

    for(int z=0; z < numVariables; z++){
        //reads in variable line
        String line = fin.nextLine();
        String[] strings = line.split(" ");

        for(int m=0; m < strings.length; m++){
           int numRules = Integer.parseInt(strings[0]);
           //All other array slots in strings array should be groups of letters on group per slot...

        }   
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-30T19:39:26.123

你没有说 fin 是什么，所以我不能说它对 next() 和 nextLine() 有什么作用，但也许你在字符串中选择换行符。

# java - 有没有办法避免在这段代码中重复属性？

> ID：14611760
> 
> 赞同：0
> 
> 时间：2013-01-30T19:06:05.580
> 
> 标签：java, struts2

嗨，我想知道是否存在避免此代码中重复代码的方法。现在我有一个名为 CustomerAction 的动作类，这个类处理请求的行为（它就像一个控制器），我有一个 CustomerPOJO，其属性包括 id、name、last_name 等。现在我必须向 CustomerAction 添加属性来处理提交的数据从表格。有什么方法可以绕过我的 CustomerPOJO 操作？

```
public class CustomerAction {

private String nombre;
private String apellido;
private String dni;
private String fechaNac;
private String obraSocial;
private String nroAsociado;
private String plan;
private String password;
private String email;
private String telParticular;
private String telCelular;

private static final Log log = LogFactory
        .getLog(CustomerAction.class);

public String execute() throws Exception {
    if ("cancelar".equals(this.getAccion())) {
        log.debug("Executing 'cancelar' action");
        return "login";
    }

    if ("registro".equals(accion)) {
        log.debug("Executing 'registro' action");
        IReferenceDataBusinessDelegate ud = new ReferenceDataBusinessDelegate();
        ud.signCustomer(this.getNombre(), this.getApellido(),
                this.getDni(), this.getCorreo(), this.getContrasena());

        return "login";

    }
} 
```

* * *

```
public class Customers implements java.io.Serializable {

private long id;
private String dni;
private String name;
private String lastName;
private String email;
private String password;
private String phone;
private String cellphone;
private Date birthDate;
private Date creationDate;
private Date lastAccessDate;
private byte active;
private Set<Profesionales> profesionaleses = new HashSet<Profesionales>(0);
private Set<Pacientes> pacienteses = new HashSet<Pacientes>(0);

public Customers() {
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:08:17.437

是的，使用`ModelDriven`，并使用 a`Customers`作为模型。

[http://struts.apache.org/2.x/docs/model-driven.html](http://struts.apache.org/2.x/docs/model-driven.html)

您需要确保`"modelDriven"`拦截器在您的堆栈中。

初始化模型的方式/位置取决于您的特定使用场景；您可以在文档中显示的 getter 中执行此操作，`prepare()`如果您需要从数据库中重新加载它，则可以在方法中执行，等等。

我不确定您所说的“绕过操作”是什么意思。

请注意，这里使用`accion`参数实现的 ad-hoc 调度机制复制了 Struts 2 使用`method`动作配置的属性提供的功能。我不建议使用 ad-hoc 调度机制，因为它使理解程序流变得比必要的更加困难。

# c# - C#：如何连接位以创建 UInt64？

> ID：14611764
> 
> 赞同：0
> 
> 时间：2013-01-30T19:06:13.897
> 
> 标签：c#, hash, uint64

我正在尝试为图像创建一个散列函数，以便从数据库中找到类似的图像。哈希只是一系列位 (101110010)，其中每个位代表一个像素。由于每个图像大约有 60 个像素，我认为最好将其保存为 UInt64。

现在，当遍历每个像素并计算每个位时，我如何将它们连接起来并将它们保存为 UInt64？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:09:03.307

使用一些小玩意：

```
long mask = 0;

// For each bit that is set, given its position (0-63):
mask |= 1 << position; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T19:08:51.877

您可以像这样使用按位运算符：

```
ulong it1 = 0;
ubyte b1 = 0x24;
ubyte b2 = 0x36;
...
it1 = (b1 << 48) | (b2 << 40) | (b3 << 32) .. ; 
```

或者，您可以使用该`BitConvert.Uint64()`函数将字节数组快速转换为 int64。但是你确定目标是 8 字节长吗？

# c# - C# 每 X 秒执行一次方法，直到满足条件然后停止

> ID：14611765
> 
> 赞同：1
> 
> 时间：2013-01-30T19:06:18.373
> 
> 标签：c#, silverlight, timer

我正在使用 Silverlight C# 按钮单击事件在单击后暂停 10 秒，然后每 x 秒调用一次方法，直到满足特定条件：x = y 或经过的秒数> = 60，而不冻结 UI。

有几个不同的例子。我是 C# 新手，并试图保持简单。我想出了以下内容，但我没有最初的 10 秒等待，我需要了解该放在哪里，而且似乎我有一个无限循环。这是我的代码：

```
 public void StartTimer()
    {

        System.Windows.Threading.DispatcherTimer myDispatchTimer = new System.Windows.Threading.DispatcherTimer();

        myDispatchTimer.Interval = TimeSpan.FromSeconds(10); // initial 10 second wait
        myDispatchTimer.Tick += new EventHandler(Initial_Wait);
        myDispatchTimer.Start();
    }

    void Initial_Wait(object o, EventArgs sender)
    {
        System.Windows.Threading.DispatcherTimer myDispatchTimer = new System.Windows.Threading.DispatcherTimer();
        // Stop the timer, replace the tick handler, and restart with new interval.

        myDispatchTimer.Stop();
        myDispatchTimer.Tick -= new EventHandler(Initial_Wait);
        myDispatchTimer.Interval = TimeSpan.FromSeconds(5); //every x seconds
        myDispatchTimer.Tick += new EventHandler(Each_Tick);
        myDispatchTimer.Start();
    }

    // Counter:
    int i = 0;

    // Ticker
    void Each_Tick(object o, EventArgs sender)
    {

            GetMessageDeliveryStatus(messageID, messageKey);
            textBlock1.Text = "Seconds: " + i++.ToString();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:20:25.767

创建第二个更改计时器的事件处理程序。像这样：

```
public void StartTimer()
{
    System.Windows.Threading.DispatcherTimer myDispatcherTimer = new System.Windows.Threading.DispatcherTimer();

    myDispatchTimer.Interval = TimeSpan.FromSeconds(10); // initial 10 second wait
    myDispatchTimer.Tick += new EventHandler(Initial_Wait);
    myDispatchTimer.Start();
}

void Initial_Wait(object o, EventArgs sender)
{
    // Stop the timer, replace the tick handler, and restart with new interval.
    myDispatchTimer.Stop();
    myDispatchTimer.Tick -= new EventHandler(Initial_Wait);
    myDispatcherTimer.Interval = TimeSpan.FromSeconds(interval); //every x seconds
    myDispatcherTimer.Tick += new EventHandler(Each_Tick);
    myDispatcherTimer.Start();
} 
```

计时器在第一次计时时调用`Initial_Wait`。该方法停止计时器，将其重定向到`Each_Tick`，并调整间隔。所有随后的报价都将转到`Each_Tick`。

如果您希望计时器在 60 秒后停止，`Stopwatch`请在第一次启动计时器时创建一个，然后在`Elapsed`每次滴答时检查该值。像这样：

修改`InitialWait`启动方法`Stopwatch`。您需要一个类范围变量：

```
private Stopwatch _timerStopwatch;

void Initial_Wait(object o, EventArgs sender)
{
    // changing the timer here
    // Now create the stopwatch
    _timerStopwatch = Stopwatch.StartNew();
    // and then start the timer
    myDispatchTimer.Start();
} 
```

在您的`Each_Tick`处理程序中，检查经过的时间：

```
if (_timerStopwatch.Elapsed.TotalSeconds >= 60)
{
    myDispatchTimer.Stop();
    myDispatchTimer.Tick -= new EventHandler(Each_Tick);
    return;
}
// otherwise do the regular stuff. 
```

# wordpress - Chrome 有时会隐藏导航层

> ID：14611767
> 
> 赞同：0
> 
> 时间：2013-01-30T19:06:20.443
> 
> 标签：wordpress, google-chrome

2 个站点 - 相同的 WordPress 主题 - 使用 Chrome 查看时 - 2 个单独的结果：

*URLS 已被删除。*

好：博客站点（注意金色容器中的菜单导航） 坏：父站点（如果您快速浏览，您会在导航消失之前看到导航）

这个问题似乎是某种堆叠问题。我已经复制了相同的样式表，并且在清除缓存和刷新后仍然得到相同的结果。

这是怎么回事？感谢这个论坛。

详细：3浏览器(IE、FF、Chrome) 2博客

1 个主题（The Corporation - SAME 样式表）

问题：在 Chrome 中查看父站点时，导航菜单和菜单分隔符图像（/wp-conten ... arator.png）隐藏在 /wp-conten ... r_tile.png 背景图像下。

更多详细信息：Chrome 版本（版本 24.0.1312.56 m）

Wordpress 版本：主站点 (WordPress 3.2.1.) 博客站点 (WordPress 3.4.1)

主题版本：TheCorporation 1.3

是的，它们是定制的——但完全相同。我不喜欢定制。

我确实找到了这个 - 不确定它是否相关：code DOT google DOT com /p/chromium/issue ... ?id=154671

和...新闻 DOT ycombinator DOT com/item?id=4587264

顺便说一句，在 Safari 中查看时出现同样的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:37:36.467

您的博客在导航中的链接较少，因此很容易放在徽标旁边，但在网站上您有更多链接，并且导航位于徽标下方，使其不可见。

这种情况的快速解决方法是这个 CSS：

```
img#logo {
    margin: 6px 0 6px 20px;
}

div#top-menu {
    float: right;
} 
```

# javascript - 剑道组合框的问题

> ID：14611768
> 
> 赞同：0
> 
> 时间：2013-01-30T19:06:23.867
> 
> 标签：javascript, jquery, kendo-ui

我在我的 html 中定义了 kendocombox，如下所示

```
<input  id="selFrameworkVersion" style="width: 210px" data-bind="kendoComboBox: { dataTextField: 'Name', dataValueField: 'Id', data:  $root.versionListByProductType, value:  $root.editFrameworkVersion, optionsCaption: 'Select Version...'  }" /> 
```

组合框正确加载并设置值，但是当它没有将焦点设置到列表中的正确项目时。见下图 ![剑道盒](../Images/86012a2809ee356fad4f63494abc254a.png)

您可以看到值为 5.5.1，但它设置为 5.4，这是列表中的第一项。我现在知道它为什么会发生。在我的组合框中，您可以看到我将值设置为 $root.editFrameworkVersion。在我的视图模型中，我对该值使用订阅事件。请参阅下面的代码

```
self.editFrameworkVersion.subscribe(function (value) {
        var combobox = $("#selFrameworkVersion").data("kendoComboBox");

        var callback = function (data) {

            self.editOnlyAlternativeVersions(self.versionListByProductType());

            combobox.select(function (dataItem) {
               return dataItem.Name === value;
            });
            self.editOnlyAlternativeVersions.remove(function (data) {

                return parseInt($("#selFrameworkVersion").attr('value')) === parseInt(data.Id()); 
            });

        };

        loadVersionListByProductType(self.editProductType().Id(), callback); 
```

});

我使用这个订阅事件来做一些逻辑。在这种情况下，我正在调用 WCF 服务，该服务再次在该组合框中加载值，这就是为什么它总是设置为第一个值。但它需要我调用该服务以获得一些逻辑。然后我在您已经在上面看到的那个订阅事件中添加了代码

```
combobox.select(function (dataItem) {
               return dataItem.Name === value;
            }); 
```

此代码正确设置值，但前提是组合框失去焦点。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T14:36:52.240

试试这样的 $("#selFrameworkVersion").attr("autofocus",true);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:47:58.123

在[此处的 ComboBox 演示](http://demos.kendoui.com/web/combobox/index.html)中，他们使用一个`index`属性来设置最初选择的项目。不知道你是否可以在你的情况下尝试。否则，还有一个[.select() 方法](http://docs.kendoui.com/api/web/combobox#select)，您可以在小部件上调用该方法来设置所选项目。

它没有根据`value`. 也许这是一个错误。

# jquery - jQuery UI：数据选择器不返回 HTML5 数据属性

> ID：14611769
> 
> 赞同：5
> 
> 时间：2013-01-30T19:06:25.190
> 
> 标签：jquery, jquery-ui, selector

假设我有这段 HTML：

```
<div id="container">
   <ul>
       <li><a href="#" data-some-info="foo">Bar</a>
       <!-- repeating a few like the one -->                          -->
       <!-- above for a while ...        -->
   </uL>
</div> 
```

我想在`some-info`定义数据时对所有带有数据的锚元素应用一些东西。

我只是想了解为什么这种行为（它是一个错误吗？）

```
$("#container").find("a:data(some-info)").size();  // -> 0
$("#container").find("a").data("some-info");       // -> "foo"
$("#container").find("a:data(some-info)").size();  // -> 1 (actual expected val) 
```

有任何想法吗？

**更多信息**：我正在使用 jQuery 1.9.0 和 jQuery UI 1.9.2

****编辑****

我*知道*`$("#container").find("a[data-some-info]")`。_ 这不是我在这里提出的问题。如果有一个[数据选择器](http://api.jqueryui.com/data-selector/)，为什么它会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:22:24.560

这是选择器的实现方式：

```
$.extend( $.expr[ ":" ], {
    data: $.expr.createPseudo ?
        $.expr.createPseudo(function( dataName ) {
            return function( elem ) {
                return !!$.data( elem, dataName );
            };
        }) :
        // support: jQuery <1.8
        function( elem, i, match ) {
            return !!$.data( elem, match[ 3 ] );
        }, 
```

（参考[https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.core.js#L160](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.core.js#L160)）

注意它是如何使用`$.data`而不是`$(elem).data`. 这意味着它只查找通过`$.data`or`$().data`方法存储在元素上的数据。它不会在元素上查找数据属性，我认为它不是为此目的。属性等于选择器是您应该使用的。`[data-foo]`但是请注意，它会查看属性，如果您使用 jQuery 将数据添加到元素，`$().data`如果 jQuery 不更新属性，它可能与该选择器不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:10:08.563

:data 选择器不是 JQuery 核心的一部分。这可能是一个错误，但 JQuery 文档说 HTML5 数据属性被拉入内部 JQuery 数据对象（大概在调用`.data`）而不是作为`:data`伪选择器的一部分（根据 JQuery UI 文档查询内部数据表示*原样，*并没有说明 HTML5 数据属性）

替代方法：

`$("#container").find("a[data-some-info='foo']")`如果在数据属性上设置了任何内容，请使用或`.find("a[data-some-info]")`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T19:07:49.090

从文档，

> 表达式`$( "div:data(foo)")`匹配 a`<div>`如果它有数据存储通过`.data( "foo", value )`

并来自 jquery 代码->

> jQuery`data()`存储在对象内部数据缓存内的单独对象中，以避免内部数据和用户定义数据之间的键冲突（来自 jQuery 代码的注释）

[https://github.com/jquery/jquery/blob/master/src/data.js#L51](https://github.com/jquery/jquery/blob/master/src/data.js#L51)

[https://github.com/jquery/jquery/blob/master/src/data.js#L63](https://github.com/jquery/jquery/blob/master/src/data.js#L63)

当它在 HTML 中定义时，它只是一个用户定义的数据元素，不会被 jQuery`:data`选择器选择。

但是，当您调用时`.data(some-info)`，它实际上会读取用户定义的数据并将其复制到内部数据中，然后使用`:data`拾取元素，因为它可以在内部数据中找到它。

这**不是**错误，因为文档中明确提到了这一点。

* * *

您应该使用`.length`which 是一个属性来从选择器中获取返回元素的数量。

**自jQuery 1.8**起也`.size`已弃用。[http://api.jquery.com/size/](http://api.jquery.com/size/)

# c# - 如何在 WIF 4.5 中处理 ActAs 令牌？

> ID：14611773
> 
> 赞同：2
> 
> 时间：2013-01-30T19:06:55.333
> 
> 标签：c#, wif, ws-trust

我正在使用`System.IdentityModel`.NET 4.5 中的 WIF ( ) 类创建 STS。此 STS 需要处理 ActAs 令牌。我已经成功地对客户端进行了原型设计以发送 ActAs 令牌，这会导致服务器端出现以下错误消息：

> ID3265：找到 ActAs 元素，但没有注册令牌处理程序来读取 ActAs 元素。考虑将有效的 SecurityTokenHandlerCollection 添加到 SecurityTokenHanderCollectionManager 以供 ActAs 使用。

但是，我认为没有办法将 a 添加`SecurityTokenHandlerCollection`到`SecurityTokenHanderCollectionManager`. 这是怎么做到的？

我已经尝试过[本](http://msdn.microsoft.com/en-us/library/ee517266.aspx)文档中的建议：

```
<securityTokenHandlers name="ActAs">
    ...
</securityTokenHandlers> 
```

但这会导致此错误：

> ID0005：输入“configElement.ElementInformation.Properties”集合不包含名为“ActAs”的属性。

“等效”（根据该文档）咒语`ServiceConfiguration.SecurityTokenHandlerCollectionManager["ActAs"]`同样无益：

> 未处理的异常：System.Collections.Generic.KeyNotFoundException：字典中不存在给定的键。在 System.Collections.Generic.Dictionary`2.get_Item(TKey key) 在 System.IdentityModel.Tokens.SecurityTokenHandlerCollectionManager.get_Item(字符串使用)

请注意，[本文档提供的信息与](http://msdn.microsoft.com/en-us/library/hh568671.aspx)[1](http://msdn.microsoft.com/en-us/library/ee517266.aspx)基本相同，但专门针对 .NET 4.5。

如何处理 ActAs 代币？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:22:32.637

索引器`SecurityTokenHandlerCollectionManager`不是只读的：

```
// Summary:
//     Returns the security token handler collection for the specified usage.
//
// Parameters:
//   usage:
//     The usage name for the token handler collection.
//
// Returns:
//     The token handler collection associated with the specified usage.
public SecurityTokenHandlerCollection this[string usage] { get; set; } 
```

只需`SecurityTokenHandlerCollection`将给定键设置为所需的集合：

```
SecurityTokenHandlerCollectionManager["ActAs"] = new SecurityTokenHandlerCollection();
// or:
SecurityTokenHandlerCollectionManager[SecurityTokenHandlerCollectionManager.Usage.ActAs] = new SecurityTokenHandlerCollection(); 
```

# knockout.js - 在淘汰赛中禁用单个项目

> ID：14611775
> 
> 赞同：3
> 
> 时间：2013-01-30T19:07:00.283
> 
> 标签：knockout.js, knockout-sortable

在淘汰赛排序中，我知道您可以`isEnabled`在`sortable`绑定中使用禁用可排序列表。我也知道您可以`cancelDrop`在`beforeMove`函数中禁用移动项目。问题是，`isEnabled`禁用整个列表，并且`cancelDrop`只能在项目已经拖放到另一个`sortable`.

有没有办法禁用`sortable`某些包含项目的单击/拖动行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T20:31:06.020

您可以使用 jQuery UI 可排序选项`items`或`cancel`用于此目的。此处的文档：http: [//jqueryui.com/sortable/#items](http://jqueryui.com/sortable/#items)。

您可以将它们添加到绑定中，例如：

```
<div class="container" data-bind="sortable: { data: tasks, options: { cancel: '.prevent' } }"> 
```

或全球喜欢：

```
ko.bindingHandlers.sortable.options.cancel = ".prevent"; 
```

示例：http: [//jsfiddle.net/rniemeyer/2wEX3/](http://jsfiddle.net/rniemeyer/2wEX3/)

# wpf - 尝试从 XAML 文件更改窗口背景颜色

> ID：14611776
> 
> 赞同：0
> 
> 时间：2013-01-30T19:07:05.067
> 
> 标签：wpf, xaml, themes

我正在玩 ExpressionDark.xaml 主题。我在 App.xaml 中设置主题：

```
<Application x:Class="WpfApplication4.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary Source="Themes/ExpressionDark.xaml"/>
    </Application.Resources>
</Application> 
```

我查看了他们如何设置其他控件的颜色和样式，但无法在窗口中产生相同的结果。

如果您愿意，可以在[此处](https://dl.dropbox.com/u/4709427/ExpressionDark.xaml)查看 XAML 。

这是我正在尝试的 XAML：

```
 <Style TargetType="{x:Type Window}">
        <Setter Property="Background" Value="{DynamicResource BlackTestBrush}" />
        <Style.Triggers>
        </Style.Triggers>
    </Style>

   <SolidColorBrush x:Key="BlackTestBrush" Color="#FF000000" /> 
```

关于我在这里做错了什么的任何想法？

谢谢

# ember.js - 如何在没有 controller.get('view') 的情况下使操作影响同级视图？

> ID：14611778
> 
> 赞同：6
> 
> 时间：2013-01-30T19:07:10.907
> 
> 标签：ember.js, ember-router

快速上下文：应用程序视图有 2 个出口。一个用于工具栏。另一个用于可路由的“主”视图层次结构。

```
app -- main
   \-- toolbar 
```

我需要工具栏中的一些按钮来触发“主”视图中的事件。不更新任何模型中的任何数据。我只是指示它触发对视图呈现的绘图库的一些更改。清除画布，重置缩放值等。

在 1.0 pre2 和更早的版本中，我使用了操作和 router.get('someController.view') 来访问我想要的视图并触发操作/方法/事件。几乎不是应用程序设计的巅峰之作，但它运行良好。

这个选项现在已经消失了，我无法找到一个*好的*选择。**在不在子/父层次结构中的视图之间进行通信时，我应该使用什么机制？**我想出的一切都很笨拙，并引发了我的感觉，即*“Ember 有更好的方法”*。

简而言之，我想要：

*   触发事件的工具栏按钮
*   对此做出反应并对其自身部分执行一些更新的主视图。
*   不会像通过路由那样在 Ember 的意义上重新渲染的主要视图。它使用绘图库并将其所有属性和行为集成到 Ember 模型和控制器中不会很有趣。
*   工具栏和主视图共享一个父视图，但位于不同的“分支”上。

我正在考虑的不良选择：

工具栏在很大程度上是一个应用程序级别的问题，但它确实有一些需要指示特定视图的按钮。我在 Ember 中看到的一个选项是将工具栏嵌套在“主”视图下。对于它的其他一些功能，这似乎是错误的。

通信可以由一个控制器（甚至可能是一个模型）来处理，该控制器将保存工具栏设置的属性，并且“监听”视图会对其做出反应并重置其值。这听起来像是对控制器和模型目的的滥用，并且像是一个非常糟糕的事件监听器设置。

我可以将绘图库作为 App.Drawing 之类的全局应用程序，但这似乎也很糟糕。这也意味着操作仍然无法使用视图中的任何数据来更新绘图库。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:14:55.620

> 在不在子/父层次结构中的视图之间进行通信时，我应该使用什么机制？

在典型的 ember 应用程序中，这种通信应该发生在控制器之间。否则“糟糕的选项 2”是在正确的轨道上：

> 通信可以由一个控制器（甚至可能是一个模型）来处理，该控制器将保存工具栏设置的属性，并且“监听”视图会对其做出反应并重置其值。

考虑使用两个控制器。工具栏操作将针对`ToolbarController`，它负责维护工具栏的状态并更改 main 以响应用户操作。应该通过属性`ToolbarController`声明依赖。例如：`MainController``needs`

```
App.ToolbarController = Ember.Controller.extend({
  needs: ['main'],
  buttonOneGotAllPressed: function() {
    main = this.get('controllers.main');
    main.turnOffAnOption();
    main.makeSomeOtherChange();
  }
}); 
```

现在`MainController`可以专注于 MainView 的状态。它不应该知道`ToolbarController`或它的按钮。

> 这听起来像是对控制器和模型目的的滥用，并且像是一个非常糟糕的事件监听器设置。

同意这可能是对模型目的的滥用，但这正是控制器的用途。

这绝对不是事件侦听器设置，但这似乎不适合您的情况。您描述的工具栏似乎只存在与主视图交互，因此拥有一个依赖于主视图并直接与其交互的工具栏控制器是有意义的。

如果组件真正解耦，那么观察者 (Pub/Sub) 模式可能更合适。如果感兴趣，请参阅[如何从另一个框架向 Ember 触发事件。](https://stackoverflow.com/questions/14458287/how-to-fire-an-event-to-ember-from-another-framework/14508316#14508316)

# c# - 在 Oracle 表上动态执行业务规则

> ID：14611781
> 
> 赞同：0
> 
> 时间：2013-01-30T19:07:17.060
> 
> 标签：c#, oracle, architecture, rule-engine, business-rules

我正在尝试在 Oracle 表上应用一些业务规则（包含和排除规则）并根据规则更新状态列。稍后将根据状态列的值从该表中提取文件。现在企业想要使用 UI 配置规则。所以规则将是动态的。

我计划在临时表中存储用户可能希望使用业务规则的所有可能列。在规则 UI 中，将显示此临时表中的所有列。然后我打算创建一个存储过程来从规则表中获取规则并使用动态更新语句来更新状态列。动态 SQL 会对此有好处吗？

规则表：

> Id、RuleName、RuleDesc、ColumnName、运算符、值、连接器、ConnectOperator、RulePrecedence

连接器 - 要连接到规则说

```
#1 Code=1001
#2 state='FL' 
```

在第一条规则中，用户可以将 #2 作为 Connector 并且 ConnectOperator 可以是“和/或”

或者我可以使用 C# 代码，将表中的所有行提取到对象中，然后使用 LINQ 查询根据规则过滤行并更新表。也许使用 NHibernate 作为 ORM，因为 Oracle 是底层数据库。但不确定Oracle的性能是否会好。要处理的行数可以在 500K 左右

我也很困惑，如果数据库将是存储规则的最佳位置，或者还有其他方式，但可以肯定的是用户想要配置和创建规则，并且规则可以引用可能属于不同表的列（这就是我想要的原因将所有可能的列存储在暂存表中，尽管我知道它有限制，如果业务想要在此暂存中不存在的列上创建规则，那么此架构将不起作用）

有什么建议我应该如何处理这个设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T14:04:14.220

我继续将规则存储在数据库表中，并使用存储过程和动态 sql 在运行时执行它们。我需要对 sql 查询进行一些性能调整，现在它工作正常。我能够在 45 分钟内处理 64 百万条记录，这还不错。我使用基于集合的操作（更新语句）进行规则处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:14:20.473

有很多方法可以解决这个问题，没有标准的解决方案。如果你用谷歌搜索“规则引擎”和“ETL”，你会发现很多人都在展示他们的解决方案。

我发现的最灵活的解决方案[将图形 ETL 工具与现有规则引擎集成在一起](http://zogamorph.blogspot.nl/2011/10/integrating-rules-engine-with.html?m=1)。这利用了现有产品，使流程的双方保持良好的分离和灵活性。即使它们向规则引擎提供单行，它们也报告了足够好的性能。

在 C# 或 Java 中评估规则的主要优点是您可以使用标准规则引擎。因此，您可以免费获得规则引擎附带的所有语法糖和图形编辑。您的业​​务可能会在规则方面变得疯狂，您甚至不会注意到。

我建议不要使用 ORM 工具来获取和更新数据。更新状态列所需的信息应该存在于同一行中，因此不需要 ORM 工具。一个简单的数据集应该就可以了。

作为一个疯狂的事后思考：Oracle 已经尝试使用 Java-in-the-database，所以也许您甚至可以让 Java 规则引擎在您的数据库中运行？

# javascript - 使用中点圆算法生成实心圆的点

> ID：14611782
> 
> 赞同：2
> 
> 时间：2013-01-30T19:07:22.347
> 
> 标签：javascript, jquery, algorithm, geometry

我需要生成并存储一个实心圆的每个点的坐标，比如 Javascript 中的半径 10。

似乎最好的方法是使用[midpoint circle algorithm](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm)，但我不确定如何调整它以找到圆中的每个点。坐标将作为对象存储在数组中。

有人可以帮我实施吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:47:54.300

就我个人而言，我认为在这种情况下测试边界框中的所有像素到中心的距离可能会更快。如果`<= r`那么该点在圆圈中，应该被推到您的阵列上。

```
function distance(p1, p2)
{
   dx = p2.x - p1.x; dx *= dx;
   dy = p2.y - p1.y; dy *= dy;
   return Math.sqrt( dx + dy );
}

function getPoints(x, y, r)
{
    var ret = [];
    for (var j=x-r; j<=x+r; j++)
       for (var k=y-r; k<=y+r; k++)
           if (distance({x:j,y:k},{x:x,y:y}) <= r) ret.push({x:j,y:k});
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:48:35.690

您遍历所有可能的点，然后对它们运行 Point-In-Circle 检查。

像下面这样就足够了......

```
var result = [];
var d = 10;
var r = d / 2;
var rr = r*r;
for(var y=0; y<d; y++)
 for(var x=0; x<d; x++)
  if((x-r)*(x-r)+(y-r)*(y-r) < rr)
   result.push({"x": x, "y": y}); 
```

修改上述算法以处理其他（更复杂的）形状/路径/多边形将很困难。对于更通用的解决方案，您可以使用 HTML5 CANVAS。您创建一个画布，获取 2d 上下文以纯黑色绘制所有形状/路径/多边形，然后遍历像素数据并找到 alpha 通道大于 0（或 127，如果您想减轻反抗误报）的像素-混叠）。

```
var r = 5; // radius of bounding circle
//
// set up a canvas element
//
var canvas = document.createElement("canvas");
canvas.width = r*2;
canvas.height = r*2;
canvas.style.width = (r*2) + "px";
canvas.style.height = (r*2) + "px";
var ctx = canvas.getContext("2d");
ctx.fillStyle = "#000";
//
// draw your shapes/paths/polys here
//
ctx.beginPath();
ctx.arc(r, r, r, 0, Math.PI*2, true); 
ctx.closePath();
ctx.fill();
//
// process the pixel data
//
var imageData = ctx.getImageData(0,0,(r*2),(r*2));
var data = imageData.data;
var result = [];
var str = "";
for(var y = 0; y<(r*2); y++) {
    for(var x = 0; x<(r*2); x++) {
        var pixelOffset = (y * (r*2) + x) * 4;
        if(data[pixelOffset+3] > 127) {
            result.push({x: x, y: y});
            str += "(" + x + ", " + y + ") "; // debug
        }
    }
}
//
// debug/test output
//
document.body.innerHTML += str;
document.body.appendChild(canvas);
alert(result.length); 
```

# android - 如何为 android 的 facebook sdk 3.0 配置禁用 Single SIGn On？

> ID：14611783
> 
> 赞同：1
> 
> 时间：2013-01-30T19:07:28.717
> 
> 标签：android, facebook, single-sign-on

我已经为 Facebook 创建了一个 android 应用程序并使用“com.facebook.LoginActivity”登录此方法使用 facebook 的应用程序登录，我需要独立登录。

类似于此问题 [的内容如何为 facebook android 应用禁用单点登录？](https://stackoverflow.com/questions/13899955/how-to-disable-single-sign-on-for-facebook-android-app) 我需要一些例子..非常感谢您的帮助....对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:48:18.457

If you're using LoginButton (as in the HelloFacebookSample), you can disable SSO like so:

```
 loginButton = (LoginButton) findViewById(R.id.login_button);
    loginButton.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO); 
```

Otherwise, You will have to set the SessionLoginBehavior similarly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-22T14:14:28.557

对于 SDK 4，您需要设置`setLoginBehavior(LoginBehavior.SUPPRESS_SSO);`

# extjs - Ext JS：过滤商店

> ID：14611787
> 
> 赞同：0
> 
> 时间：2013-01-30T19:08:00.447
> 
> 标签：extjs

我正在运行一个奇怪的 reg ex 问题。我正在尝试过滤以字符 A 或 a 开头的名称并使用 dataStore.filter("name", /^[Aa]*$/);

但由于某种原因，我得到了空店。

任何帮助表示赞赏

塔拉罕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:56:08.890

你的正则表达式是错误的。您要求输入字符串的开头，后跟任意数量的字母 a，然后是字符串的结尾。唯一会匹配的是空字符串和字符串，如 A、a、Aa、aAAAaAaaaaAAAa 等。

尝试这个：

```
dataStore.filter('name',/^[Aa]/) 
```

# javascript - 我需要一些 javascript 来删除字符串上的前导和尾随空格，而不是任何其他字符之间的空格

> ID：14611788
> 
> 赞同：1
> 
> 时间：2013-01-30T19:08:00.647
> 
> 标签：javascript, split

> **可能重复：**
> [如何在 JavaScript 中修剪字符串？](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)

所以....

```
"   steve   monkey   " 
```

会成为`"steve monkey"`

和...

```
"   cheese charlie face   " 
```

会成为`"chesse charlie face"`

所以基本上取出第一个非空格字符之前出现的所有空格字符，并删除最后一个非空格字符之后的所有空格字符，但不要删除中间的任何空格。谢谢！！！

现在我只是删除下面的所有空格，但我知道我们需要在中间保留空格...... :(

```
$newPassword.val().split(" ").join("") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:10:50.843

使用修剪（）：

```
var testString = "                 hello                   wold        ";
alert("The text:"+testString.trim()+"End here"); 
```

编辑：如评论和其他答案中所述，这在 IE < 9 中不起作用。 jquery 选项适用于所有浏览器：

```
$.trim(testString); 
```

感谢 Joseph 和 mplungjan 清除它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T19:13:00.400

JQuery（似乎你使用它）：

```
$.trim(str) 
```

适用于所有浏览器

请注意

```
Str.trim() 
```

在 IE8 中不起作用

# c# - 无法更新数据库“*.mdf”，因为只读 EntityFramework

> ID：14611790
> 
> 赞同：1
> 
> 时间：2013-01-30T19:08:10.027
> 
> 标签：c#, .net, entity-framework, permissions

我有一个 C# .NET Framework 4.0 桌面应用程序，其实体框架为 DAL。当尝试将数据保存到除我之外的任何机器上的 DBContext 时，我收到了一个异常

```
Failed to update database "*.mdf" read only 
```

我将我的数据库放在“DAL/AppData”文件夹中的 .exe 文件附近。

如何允许在其他机器上进行写访问？我可以以编程方式进行吗？

我读过我可以将 DB 放入 AppRoaming 文件夹，但这不是我的变体。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:13:53.763

> 我将我的数据库放在“DAL/AppData”文件夹中的 .exe 文件附近。

是的。难道你的意思是这是在程序文件夹中，你知道的。

过去 10 年的 Windows 规格对普通用户来说是“只读”的吗？

哎哟。

它们是用于存储数据的文件夹。有一个 SpecialFolders 枚举来获取每个此类文件夹的有效路径。

> 如何允许在其他机器上进行写访问？我可以以编程方式进行吗？

在 SQL Server 上，这是通过允许其他计算机访问服务器而不是数据文件来完成的。即，您连接到另一台机器上的 SQL Server，该机器正在加载数据库。

> 我读过我可以将 DB 放入 AppRoaming 文件夹，但这不是我的变体。

首先，除非您确实计划漫游，否则这将是愚蠢的- SQL shold 进入本地文件夹，从不漫游。

第二，“不是我的变种”就像“嘿，我开车违反规则，我能做什么不被超速罚单”。并且“遵守法律不是我的变种”。您的变体是 WINdows 不关心的。了解如何根据 Windows 指南安装软件，该指南非常清楚不应该更改数据的位置。

# php - PHP 和 MySQL 的多租户

> ID：14611792
> 
> 赞同：2
> 
> 时间：2013-01-30T19:08:14.360
> 
> 标签：php, mysql, codeigniter, activerecord, multi-tenant

我有一个基于 CodeIgniter PHP 的 Web 应用程序，一个 MYSQL 数据库，我们使用 PHPActiveRecords。我们不断发展壮大，现在需要提供带有白标签的应用程序。我已经完成了大部分工作，唯一遇到的问题是如何处理数据库。我不想有两个数据库连接，因为两个站点之间的大量数据将被共享。我研究了 Multitenancy，这听起来是个不错的选择，但是如果我必须重写每个 ActiveRecord 找到的条件，其中的条件是tenant_id = 'this site'，然后必须培训我的员工在他们现在编写代码时做同样的事情，它不可扩展。有没有人知道如何 A) 将多租户集成到 PHPActiveRecords 中而无需进行大量修改，或者 B) 比多租户更好的解决方案。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:11:58.950

根据您拥有的客户端数量，您可以在一台主机上为每个客户端创建一个模式。使用常用数据库名称为常用表的表名添加前缀，并依靠客户端查询来使用默认数据库。

您的入口点可能会执行以下操作：

```
$pdo->query('USE client_12345'); 
```

您的查询可能类似于：

```
$pdo->query('SELECT * FROM clientspecificdata WHERE ...'); 
```

和

```
$pdo->query('SELECT * FROM common.data WHERE ...'); 
```

请注意：这会将数据暴露给错误的客户的风险相对较高。确保这适合您的方案。使用多个连接可能会好得多。

# .net - SqlDataReader 的行数

> ID：14611793
> 
> 赞同：0
> 
> 时间：2013-01-30T19:08:15.057
> 
> 标签：.net, sql, vb.net, ado.net

我正在尝试使用 SQL获取**SqlDataReader**`COUNT()`的行数。由于某些技术原因，我不能使用计数器（在转发时增加变量）。这是我的 SQL 语句：

```
(SELECT * FROM [Menus] WHERE MenuParent=@ID);
(SELECT COUNT(*) AS rowsCount FROM [Menus] WHERE MenuParent=@ID) 
```

这是我的.net代码：（
*很简单，C#ers也能看懂）*

```
While DR.Read
    If Not DR("rowsCount") Is Nothing Then
    temp &= DR("rowsCount")
    End If
    'blah blah
End While 
```

它不识别**rowsCount**。

我怎么了？

整个功能：（我用自己的类连接到数据库）[http://pastebin.com/YBZCvvBH](http://pastebin.com/YBZCvvBH)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:12:18.573

您的 SQL 语句返回两个结果集。假设你的问题中SQL语句的顺序和你执行的顺序是一样的，你需要处理第一个查询返回的数据（处理各种菜单选项），然后执行：

```
DR.NextResult() 
```

在尝试读取计数之前。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T19:25:03.833

好吧，如果您真的想要结果集中的记录数

可以做到这一点，这似乎是你的查询

```
 select V.rowsCount,* from [Menus]
    cross join (select COUNT(*) as rowsCount from [Menus] WHERE MenuParent=@ID)V
            WHERE MenuParent=@ID 
```

或者只是做

```
 select COUNT(*) over () as rowsCount
    ,* from [Menus]
    WHERE MenuParent=@ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:12:04.130

*   为什么`&=`？
*   您正在选择两个记录集。如果您想要计数，请先单独进行。

# java - Hibernate log4j 无法识别 log4j.properties

> ID：14611796
> 
> 赞同：0
> 
> 时间：2013-01-30T19:08:21.630
> 
> 标签：java, hibernate, logging, log4j, slf4j

我有一个休眠标准 java 应用程序（不是 webapp）。默认情况下，日志记录已经工作。我想看看在 sql 查询中传递的参数。我已经研究过，为此我需要启用日志记录。好像hibernate使用slf4j。我已经下载了那个 jar 及其随附的 slf4j-log4j jar。我已将这些 jar 添加到类路径中。我还在 Eclipse 项目的根目录中添加了一个 log4j.properties。

我似乎无法让项目认识到它需要使用 slf4j 及其属性文件。

我需要在 hibernate.cfg.xml 中添加引用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:52:37.873

确保您将属性`hibernate.show_sql`设置为`true`.

`format_sql`设置为 true 将使 SQL 的格式更漂亮。

您可能还需要登录 TRACE 级别。

有关更多详细信息，请查看[此处](http://www.mkyong.com/hibernate/hibernate-display-generated-sql-to-console-show_sql-format_sql-and-use_sql_comments/)或[此处](https://stackoverflow.com/questions/2536829/hibernate-show-real-sql)。

# apache - 在 Apache 中包含两个文档根？

> ID：14611797
> 
> 赞同：0
> 
> 时间：2013-01-30T19:08:22.773
> 
> 标签：apache, httpd.conf

我的原始服务器上有数百个 jpg 的[http://example.com/pic1.jpg](http://example.com/pic1.jpg)、 pic2.jpg、 pic3.jpg 等，但我需要将其移动到 http://example.com/图片/图片[##].jpg。许多不同的服务器和页面链接到这些图片，所以如果可能的话，我不想只是移动图片和更改链接。是否可以在 Apache 中包含另一个目录作为第二个文档根目录？

所以，即使图片实际上位于 /pictures/pic1.jpg，链接到 /pic1.jpg 也可以正常工作吗？

编辑：我不想符号链接，因为根目录中有这么多图片会造成混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:31:19.480

当根目录中没有具有该名称的文件时，您可以使用根目录中的 .htaccess 文件将所有请求重定向到图片目录。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /pictures/$1 [L] 
```

关于主要问题。不，不可能有两个文档根（从逻辑角度来看也不可接受）。但是您可以使用 .htaccess 文件重定向请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:19:23.960

在我的 httpd.conf 文件中，对于文档根目录，我现在有以下块：

```
<Directory />
    Options FollowSymLinks
    AllowOverride None
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.+) http://example.com/pictures%{REQUEST_URI}
</Directory> 
```

因此，如果您尝试访问[http://example.com/pic1.jpg](http://example.com/pic1.jpg)但它不存在，它会将您重定向到[http://example.com/pictures/pic1.jpg](http://example.com/pictures/pic1.jpg)。这可以做得更好，就像只在 REQUEST_URL 包含 .jpg 时这样做，但它现在对我有用。

# python - 控制器如何在 web2py 中工作？

> ID：14611801
> 
> 赞同：1
> 
> 时间：2013-01-30T19:08:34.607
> 
> 标签：python, web2py

我有一个关于控制器和[表单](http://web2py.com/books/default/chapter/29/07#FORM)如何在 web2py 中工作的问题。考虑下一个控制器功能（来自 we2py 书）：

```
def display_form():
form=FORM('Your name:',
          INPUT(_name='name', requires=IS_NOT_EMPTY()),
          INPUT(_type='submit'))
if form.accepts(request,session):
    response.flash = 'form accepted'
elif form.errors:
    response.flash = 'form has errors'
else:
    response.flash = 'please fill the form'
return dict(form=form) 
```

这个函数有两个目标：第一个是返回一个表单，第二个是告诉提交按钮要做什么。我无法理解这怎么可能。是否调用了两次？第一次视图需要知道什么是表单，第二次按下提交按钮？直观地说：

```
if form.accepts(request,session):
    response.flash = 'form accepted'
elif form.errors:
    response.flash = 'form has errors'
else:
    response.flash = 'please fill the form' 
```

应该在一些不同的功能中负责后期处理。

它是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:06:59.693

是的，该函数被调用了两次。当调用该函数的 URL 而不发布任何表单值时，该`form.accepts()`函数将失败（即返回 False），因为尚未提交任何数据。在这种情况下，返回的只是一个新的空白表格。当用户最终提交表单时，表单值会发布到相同的函数。在这种情况下，在 中`form.accepts()`查找已发布的表单数据`request.post_vars`。然后验证数据，如果验证通过，则返回 True 并`response.flash`设置为“接受表单”。

这称为回发或自我提交。有关更多信息，请参见[此处](http://web2py.com/books/default/chapter/29/03#Postbacks)。

# paypal - PayPal MassPay API - 它是如何工作的？

> ID：14611807
> 
> 赞同：1
> 
> 时间：2013-01-30T19:09:17.763
> 
> 标签：paypal, paypal-ipn, masspay

我浏览了 Paypal 网站，查看了他们的数十个常见问题解答和文档，但仍然不知道如何集成 Paypal Masspay API。我希望我能在这里有更好的运气:)。

我有一个为用户提供奖品的**应用程序**，它带有一个在用户兑换奖品时填充的 Oracle SQL 数据库。

我是否需要将 SDK 下载到我的应用程序中，包括 PayPal IPN，并在每次用户兑换奖品时调用 MassPay API？

我曾多次尝试联系 Paypal，但均无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:12:15.777

不确定您问题的哪个方面对您来说最有问题。我假设你已经看过概念图了

[https://www.paypal.com/webapps/mpp/mass-payments](https://www.paypal.com/webapps/mpp/mass-payments)

Excel 工作表大致类似于表格（或查询）的收款人。

您通常会在您的服务器/网站上提供脚本代码，该代码将通过针对 PayPal 网站的 MassPay API 调用提交该收款人/金额列表。如果您一次只有一两个收款人，这不是向您的用户付款的常用方式（一次性付款通常是自适应付款 API）。不过，它不是可下载的应用程序。

那么您的应用是用户下载并与您的网站互动的东西吗？如果是这样，则将面向 PayPal 的代码（并实际转移资金）放置在您网站的服务器上的正确位置。不在听筒上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:01:02.003

我终于找到了 PayPal 团队的一名有能力的支持成员。我得到的答案：

无需 SDK。每次我想参考付款时，我需要做的就是设置从我的服务器到他们的服务器的 API 调用。

# android - android访问服务器数据库出两种选择

> ID：14611809
> 
> 赞同：1
> 
> 时间：2013-01-30T19:09:29.833
> 
> 标签：android, sql-server

我试图构建一个应用程序，它从服务器数据库中获取数据并在 android 应用程序中使用它（在可能的情况下用于读取数据库上可用的 gprs 坐标）。

经过大量搜索，我遇到了 RESTfull 服务来实现这一点。但还有一种更简单的方法，即使用驱动程序（jtds）直接从android应用程序访问服务器数据库并在服务器端运行mysql。

我实际上很困惑使用哪一个。为什么要使用高度独立且范围广泛的restful服务或直接从服务器访问mysql数据库。哪个使用最广泛，为什么？下面给出这两种情况的例子。

通过 restful 服务 - [http://avilyne.com/?p=105](http://avilyne.com/?p=105)并直接通过访问 sql server 数据库- [http://amitku.wordpress.com/2011/08/03/how-to-connect-and-access- sql-database-server-from-android-app/](http://amitku.wordpress.com/2011/08/03/how-to-connect-and-access-sql-database-server-from-android-app/)

请让我知道哪个更好且最常用，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:46:40.753

我强烈鼓励使用 REST 方法，虽然有很多原因，但我会立即想到两三个：

1.) 安全。通过使用 REST 方法，服务器端的任何数据都只能通过服务器端代码访问，这可以在数据和外界之间提供一个保护层。

2.) 可扩展性。直接连接，例如链接中的示例，挂钩到数据库的特定实例。如果该数据库已经有大量连接，则会出现性能问题或更糟。

3.) 服务器端的灵活性。如果底层数据库结构或技术需要更改，REST 方法将允许这样做。所有客户端关心的是向将通过 REST 协议响应的服务器发布或请求。

我认为 REST 方法比直接的客户端-服务器方法使用得更广泛。

# authentication - 使用 LDAP 和 Java EE 在遗留系统中分离身份验证和授权

> ID：14611817
> 
> 赞同：0
> 
> 时间：2013-01-30T19:09:52.857
> 
> 标签：authentication, ldap, authorization, kerberos, saml

我有一个传统的自定义“ID 集线器”，它在内部关系数据库中保存身份验证和授权数据——没有 LDAP、ActiveDirectory 等。“ID 中心”公开了使用自定义“登录令牌”操作的自定义遗留 API——对登录操作的成功调用会返回一个令牌，该令牌可用于检索授权信息等。

我正在重新设计“ID 中心”，以便可以将其身份验证数据提取到提供 LDAP 接口的适当目录中。鉴于用户名将是匹配身份验证和授权条目的“关键”，我相信 ID hub 的接口可以保持不变，而实现会进行调整，包括。从 ID 中心访问身份验证目录。由于我的应用程序依赖于 ID 集线器，ID 集线器的旧接口还不能退役。

我的问题是：在第二步中，我还需要对 ID 集线器进行现代化改造，以便切换角色：应用程序将访问上述目录，该目录将不再仅进行身份验证，但现在也将公开授权接口（例如，再次使用 LDAP）并用作入口点，而不是“ID 集线器”。同时，授权数据保存在传统的“ID hub”中很重要。

我的问题是：如何以受信任的方式从该目录调用“ID hub”，即如何解决“ID hub”需要来自“前端目录”的有关已验证用户的受信任信息的问题? 即使这两个组件在一个共同的受信任环境中运行，我也不想将用户名（=joint，主键）作为唯一信息传递。

目录和旧版 ID 集线器之间可以使用哪些接口？这可以使用 SAML 2.0 或 LDAP 吗？我还需要考虑目录通过 Kerberos 对用户进行身份验证的情况。

任何意见，将不胜感激！

米库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:00:52.777

您询问目录和 ID-hub 之间可以使用哪些接口。这取决于两者的共同点。

如果将 SAML IDP 放在目录前面，则可以使用 SAML。前提是您的 ID-hub 支持 SAML。在这种情况下，SAML 可能是一种方法。它是交换授权信息的行业标准。

# php - 在现有 PHP 代码中显示实际图像大小

> ID：14611820
> 
> 赞同：1
> 
> 时间：2013-01-30T19:10:08.627
> 
> 标签：php, image, wordpress, getimagesize

我正在建立一个[Wordpress 网站](http://www.jordangabrielarts.com)。请不要介意我不在本地或测试服务器或我的代码上工作。当我试图弄清楚这个编程位时，它现在很乱。通过访问我的网站，您会在顶部看到一排图像，位于 jcarousel 中。

它有效，但如果你点击下一步直到你到达“肖像”照片，就会有一个差距。差距是因为我必须在我的 HTML 或 CSS 中设置一个以像素为单位的宽度，才能使轮播正常工作。如果设置为`auto`，则轮播将折叠。对我来说很有意义，但令人沮丧的是我无法解决这个问题。我希望“风景”和“人像”照片具有相同的 427 高度，但我希望它能够自动调整到实际图像尺寸的宽度。

所以我想在玩了 3 天后我明白了这一点——我无法告诉你我使用了多少轮播代码。最初我认为这是问题所在，有些是。我发现，每张图片幻灯片的宽度都是在 JavaScript 中设置的，所以如果我给它一个 640 的宽度，我会得到和现在一样的结果。

我的第一个问题是这样的：

我从我的服务器上的一个目录中调用我的图像，专门为 Wordpress（[作者](http://bavotasan.com/2010/get-files-from-directory-using-php/)）编写。这是代码：

```
<?php
$uploads = wp_upload_dir();

if ($dir = opendir($uploads['basedir'].'/picture-atlantic')) {
$images = array();
while (false !== ($file = readdir($dir))) {
    if ($file != "." && $file != "..") {
        $images[] = $file; 
    }
}
closedir($dir);
}

echo '<ul>';
foreach($images as $image) {
echo '<li><img src="';
echo $uploads['baseurl'].'/picture-atlantic/'.$image;
echo '" alt="" width="auto" height="auto" /></li>';
 }
echo '</ul>';
?> 
```

如您所见，它从图片大西洋目录调用并将其显示在无序列表中，出于某种原因，我的 jcarousel 需要这样做。

最后：我怎样才能使用相同的代码来获取我的图像，同时也以它们的实际尺寸显示它们？在上面的代码中，如果我定义了宽度和高度，它会为所有图像执行此操作。但是，正如我之前提到的，我有使用不同尺寸的肖像图片。我找到了这段代码：erikastokes.com/php/how-to-get-image-size-with-php.php，但我不确定如何在我现有的代码中实现它。

有人可以帮我重写吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:50:52.170

您可以将图像的宽度设置为`100%`并添加样式以将纵向图像重新定位在`top: -50%;`，但如果它是横向的，您将无法看到整个图像。

![宽度 100%，顶部 -50%](../Images/c28a646f0967d17f0c5cf39214724193.png)

```
<?php
$uploads = wp_upload_dir();

if ($dir = opendir($uploads['basedir'].'/picture-atlantic')) {
$images = array();
while (false !== ($file = readdir($dir))) {
    if ($file != "." && $file != "..") {
        $images[] = $file; 
    }
}
closedir($dir);
}

echo '<ul>';
foreach($images as $image) {
  $myimage = $uploads['baseurl'].'/picture-atlantic/'.$image;
  $size = getimagesize($myimage);
  $top_50 = '';
  if($size[1] > $size[0]) {
    $top_50 = 'style="position: realative; top: -50%;"';
  }
  echo '<li><img src="';
  echo $uploads['baseurl'].'/picture-atlantic/'.$image;
  echo '" alt="" width="100%" height="auto" '.$top_50.'/></li>';
 }
echo '</ul>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T04:37:55.587

韦尔普，我读到如果我已经在使用 php 来动态显示我的图像，我就不能使用 getimagesize。我最终解决了通过 Wordpress 在无序列表中上传图像，并将我的轮播标记放在帖子循环中。它现在工作得很好。

哦，我在[http://www.css-tricks.com](http://www.css-tricks.com)上读到，Wordpress 会自动添加图像属性，这就是解决图像宽度问题的方法，同时在屏幕上 100% 显示横向和纵向样式的照片。

对于那些试图做类似任务的人，不要使用 jj nexgen 画廊来插入你的图像。jj nexgen gallery 是一个很棒的插件，以及与之相关的其他插件。它只是不适用于我试图做的事情，因为它不会将属性添加到图像中。如果您不尝试这样做，我会下载他们的 wordpress 插件，所以我猜你们中的大多数人。

再次感谢您的回复。

# asp-classic - 经典 ASP - 检测调用函数的行号和文件？

> ID：14611822
> 
> 赞同：0
> 
> 时间：2013-01-30T19:10:21.573
> 
> 标签：asp-classic, vbscript

我们的应用程序是用优秀的 (?) ol' 经典 ASP 制作的。不理想，但它可以工作并且非常稳定 - 已经使用了 10-15 年。它在某些地方没有特别好的记录，例如出现“翻译”（客户控制的一段文本）的地方。我们反对翻译的只有一个clientid和translationid，这两者都不是特别有用。我已经尝试为（翻译 1）搜索（数千行的）核心代码，`gettrans(1)`并且可以看到为另一个 3100 执行此操作将是一场噩梦，更不用说不准确了，因为有很多函数被调用一个 transid 传递给他们，然后他们调用`gettrans(transid)`.

我对这个问题的最后一个想法是我们可能会检测到，from `gettrans`，调用函数的位置——不仅是行号，还有包含的文件名（幸运的是，包含的命名很有用，因此可以确定翻译在哪里使用不应该太硬！）。我非常怀疑是否有可能在包含在 ASP 之前处理的基础上获得包含名称，但我会选择整体文件名，然后我们可以组合包含以到达代码行并记录包含文件名。

我非常怀疑这是可能的，在 SO 或 Google 上找不到任何东西。有谁知道实现这一目标的任何方法，或者对我可能尝试的方法有任何指示？提前致谢。

问候，理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:02:02.517

您可以实现的大部分目标是获取当前正在执行的脚本，可以通过以下方式获得：

```
Dim currentPage
currentPage = Request.ServerVariables("SCRIPT_NAME") 
```

当在包含的页面中时，它将为您提供“父”页面。

然而，据我所知，使用经典 ASP 获取“被调用者”信息是不可能的，因此您必须向被调用的函数添加另一个参数，然后更改所有调用以传递参数以识别它的来源。看起来有人做了类似的事情并将其称为[ASP Profiler](http://aspprofiler.sourceforge.net/)，当然使用它需要您自担风险。（我自己没试过）

# google-apps-script - 需要在 Google 协作平台主页上堆叠子页面 - 怎么做？

> ID：14611827
> 
> 赞同：0
> 
> 时间：2013-01-30T19:10:29.750
> 
> 标签：google-apps-script, google-sheets, google-sites

*这是对我原来的问题**[https://stackoverflow.com/questions/14516983/google-sites-trying-to-script-announcements-page-on-steroids](https://stackoverflow.com/questions/14516983/google-sites-trying-to-script-announcements-page-on-steroids)**的改写：*

我一直在寻找使父页面的子页面出现在网格中的方法，例如我的 Google 网站主页上的“文章”——就像在 Joomla 主页上一样，*几乎*就像标准的“公告”模板一样，**除了**：

*   文章应该以可配置的顺序出现，**而不是**按时间顺序（或字母顺序）。
*   前两篇文章应全角显示，下面的文章应在两列中显示。
*   所有文章都将包含一个或多个图像，并且至少应显示第一个。
*   不应显示每个子页面/文章的时间戳和作者。

目前，我不在乎除了排序之外的所有内容是否都是硬编码的，但理想情况下，应该有一个地方可以输入首选项，例如显示的文章数量、图像大小、片段长度、css 样式等。

到目前为止我的进展：

*   我尝试使用带有外部托管 Javascript 的 iframe（使用*google.feeds.Feed*）从“公告”模板中提取 RSS 提要，但我无法配置文章的顺序。一种可能性是在每个子页面标题的开头都有一个数字并对其进行解析，但这会与时间混淆，并且该数字也会在独立的文章页面上可见。或者可以用Javascript隐藏数字吗？
*   我尝试为每篇文章制作一个电子表格，其中包含“OrderId”、“Title”、“Content”、“Image”列，并使用 Google App Script 处理和格式化数据（使用*createHTML*和*createImage*），但是**a）**那里似乎不是一种让电子表格图像显示在 web 应用程序中的方法，并且**b)**这些文章不是可以在菜单上轻松链接到的“真实”页面。

这个功能对于很多网站来说都非常有用，而且对我来说，它不是一个标准的小工具（编辑：**或模板**）似乎很奇怪。想法，有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:21:09.963

我不知道这是否有帮助，但我想要类似的东西并使用嵌入到我的站点页面的 Google 小工具中的 RSS XML 公告提要示例小工具/站点： [http ://hosting.gmodules.com/ig/gadgets/文件/105840169337292240573/CBC_news_v3_1.xml](http://hosting.gmodules.com/ig/gadgets/file/105840169337292240573/CBC_news_v3_1.xml) [http://www.cambridgebridgeclub.org](http://www.cambridgebridgeclub.org)

它写得不好，很乱，我相信有人可以比我做得更好，但它似乎工作得相当可靠。xml 似乎拥有能够分割文章的所有必要数据，而且我似乎记得它也有图像 url，因此可以使用它们（尽管没有在我的小工具中实现）。

抱歉，如果我错过了重点。我同意您的功能要求-不必在网站中实现这样的东西就不必变得如此低级了....

# arrays - Lua - 检查数组是否存在

> ID：14611831
> 
> 赞同：3
> 
> 时间：2013-01-30T19:10:39.307
> 
> 标签：arrays, string, lua

我试图通过 if 语句找出某个数组是否存在，例如

```
if array{} == nil then array = {} else print("it exists") end 
```

以上似乎不起作用，我无法检查它是否存在，基本上我正在创建一个插件，它会扫描日志以查找某个事件，如果它是真的，它会返回拼写名称。我希望使用该 spellName 创建一个数组，但是 spellName = {} 不起作用，因为它似乎只是创建一个新数组（而不是更新现有数组）。

```
local _SPD = CreateFrame("Frame");
_SPD:RegisterEvent("COMBAT_LOG_EVENT_UNFILTERED");
_SPD:SetScript("OnEvent", function(self, event, ...)

local timestamp, type, sourceName = select(1, ...), select(2, ...), select(5, ...)

if (event == "COMBAT_LOG_EVENT_UNFILTERED") then
    if select(2,...) == "SPELL_AURA_APPLIED" then
        if select(5,...) == UnitName("player") then

            local spellID, spellName = select(12, ...), select(13, ...)

             spellName = { 
                sourceName = {

                } 
            }

            table.insert(spellName["sourceName"], {id = spellID, stamp = timestamp })

            for k,v in pairs ( spellName["sourceName"] ) do
                print (k.. ": " ..v["id"].. " at " ..v["stamp"])
            end 
        end
    end
end
end); 
```

基本上它只是在每次对我施加某种光环时重新创建表格（这是预期的行为）

我撞了头，但我不知道如何检查 spellName （和 sourceName ）是否存在，如果存在则不要再次创建它们，因为在这种情况下变量已经存在，因为它会将值返回给我，所以我无法检查如果它们不是 nil，我需要以某种方式检查这些值上是否存在表，如果不存在则创建它们。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:14:30.947

您对**表格**检查的声明是错误的。像这样使用它：

```
if type(array) == "table" then
  print("it exists")
else
  array = {}
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:42:34.143

尝试这个：

```
local spellID, spellName = select(12, ...), select(13, ...)
spellName = spellName or {}
spellName.sourceName = spellName.sourceName or {}
table.insert(spellName.sourceName, {id = spellID, stamp = timestamp }) 
```

# alfresco - 使用 MuleSoft CMIS 连接器从 Alfresco 下载文件

> ID：14611835
> 
> 赞同：1
> 
> 时间：2013-01-30T19:10:52.860
> 
> 标签：alfresco, cmis

MuleSoft CMIS 连接器有一点问题。我有一个从 Alfresco 上传和下载文件的应用程序。我通过 AtomPub 连接到 Alfresco，并使用 CMIS 对 Alfresco 执行所有操作。

问题是这样的：我曾经从存储库中获取对象并且工作正常。在我的流程中，我添加了一个组件，该组件从流程中获取对象，它的类型为`DocumentImpl`get `InputStream`，将其转换为 Object 并返回它。浏览器开始下载文件，但它不知道文件是什么，因为它没有附加扩展名。

最后是一个问题：如何将扩展名附加到正在下载的文件中？

**编辑添加的一些代码**

@Override public Object onCall(MuleEventContext eventContext) 抛出异常 {

```
 MuleMessage mes = eventContext.getMessage();
    System.out.println("Message is :" +mes);

    DocumentImpl doc = mes.getPayload(DocumentImpl.class);

    HttpResponse res = new HttpResponse();
    InputStream a = doc.getContentStream().getStream();
    String m = doc.getContentStreamMimeType();
    String n = doc.getContentStreamFileName();

    res.setBody(mes);

    return a;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:26:27.800

好的，我解决了这个问题。基本上最好的方法是将流程更改为：

```
 <set-payload value ="#[payload.getContentStream()]" />

    <set-variable value="#[payload.getMimeType()]" variableName="mime" doc:name="Variable" />
    <set-variable value="#[payload.getFileName()]" variableName="name" doc:name="Variable" />

    <!-- Set Content-Type to stored mimetype -->        
    <set-property value="#[flowVars['mime']]" propertyName="Content-Type" />
    <set-property propertyName="File-Name" value="#[flowVars['name']]"/>
    <set-property value="attachment; filename=#[flowVars['name']]" propertyName="Content-Disposition" /> 
```

这应该在 Mule Flow 之后

这会从有效负载中获取 mime 类型和文件名并返回它！

# java - Ajax 表单字段验证

> ID：14611837
> 
> 赞同：0
> 
> 时间：2013-01-30T19:10:58.080
> 
> 标签：java, ajax, validation

我是 ajax 新手，我编写了以下 Ajax 代码来验证表单字段，但它不起作用。我不知道如何调试它。任何人都可以解释如何使用ajax将数据从服务器发送回页面。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>

</head>
<body>
<form name="validationForm" action="ValidateForm" method="get">
<table>
<tr><td>Catalog Id:</td><td><input type="text"
            size="20"  
            id="catalogId"
            name="catalogId"
            autocomplete="off"
           onkeyup="validateCatalogId();"></td>
         <td><div id="validationMessage"></div></td>
</tr>
</table>
</form>
</body>

<script type="text/javascript">
function validateCatalogId(){

    var xmlHttpRequest=init();

  function init(){
    if (window.XMLHttpRequest) {
           return new XMLHttpRequest();
       } else if (window.ActiveXObject) {

           return new ActiveXObject("Microsoft.XMLHTTP");
       }

    function processRequest(){
        if(xmlHttpRequest.readyState==4){
           if(xmlHttpRequest.status==200){

              processResponse();

            }
          }
        }

    var catalogId=document.getElementById("catalogId");
    xmlHttpRequest.open("GET", "validateForm?catalogId="+ 
    encodeURIComponent(catalogId.value), true);

    xmlHttpRequest.onreadystatechange=processRequest;

    xmlHttpRequest.send(null);

    function processResponse(){
      var xmlMessage=xmlHttpRequest.responseText;

      if(xmlMessage=="valid"){
          var validationMessage=document.getElementById("validationMessage");
          validationMessage.innerHTML = "Catalog Id is Valid";
          document.getElementById("submitForm").disabled = false;
          }

      if(xmlMessage=="invalid"){
          var validationMessage=document.getElementById("validationMessage");
          validationMessage.innerHTML = "Catalog Id is not Valid";
          document.getElementById("submitForm").disabled = true;
          }

         }

}
}

</script>

</html> 
```

这是servlet代码：

```
package com.ajax.request;

import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/ValidateForm")
public class ValidateForm extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public ValidateForm() {
        super();
        // TODO Auto-generated constructor stub
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        String catalogId = request.getParameter("catalogId");

        String uname="root";
        String pass="server";
        String driver="com.ibm.db2.jcc.DB2Driver";
        String url="jdbc:db2://localhost:50000/TEST:retrieveMessagesFromServerOnGetMessage=true;";
        Statement stmt=null;
        Connection conn=null;

        PrintWriter pw = response.getWriter();
        response.setContentType("text/plain");

        try{
            Class.forName(driver);
            System.out.print("driver loaded successfully");

        }catch(Exception e){
            e.printStackTrace();
        }
        try {
             conn = (Connection)DriverManager.getConnection(url,uname,pass);
             if(conn!=null){
                 System.out.println("we have a connection");
             }
        } catch (SQLException e) {
            e.printStackTrace();
        }
        try {
             stmt = (Statement)conn.createStatement();
        } catch (SQLException e) {

            pw.print(e.getMessage());
        }

        String query = "SELECT * from DRUNKENDEATH.CATALOG WHERE EMAIL=" + "'" +
                catalogId + "'";
        try {
            ResultSet rs = stmt.executeQuery(query);

                if (rs.next()) {
                     pw.println("invalid");
                } else {
                     pw.println("valid");
                }

        } catch (SQLException e) {

            e.printStackTrace();
        }
    }// end of do get

} 
```

# c# - 如何在 C# 中解析 MSI 路径？

> ID：14611838
> 
> 赞同：3
> 
> 时间：2013-01-30T19:10:57.417
> 
> 标签：c#, wix, windows-installer

我需要在安装之外从 MSI 数据库解析目标路径。我目前正在使用 Wix SDK 通过查询数据库的目录和文件表并从那里构造路径来执行此操作，但解析路径似乎应该已经内置。是否有一个图书馆可以做到这一点，甚至是非官方的，还是我坚持自己做？

这个问题[已经被问到](https://stackoverflow.com/questions/12818796/locate-file-paths-from-a-msi-database-in-vc)C++，但唯一的答案不知何故误解了这个问题是关于字符串的。

我真的不介意表演。我真正关心的是解决特殊文件夹，如“.:Fonts”、“.:Windows”、“.:WinRoot”等——我仍然可以在我自己的代码中这样做，但不是很优雅。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T01:34:49.777

当 DTF 第一次出现时，我做了和你一样的事情。我编写了所有查询和循环来获取我正在处理的数据。表演有点痛苦。

然后我注意到 Microsoft.Deployment.WindowsInstaller.Package 程序集中的 InstallPackage 类。当我看到以下代码使用该类的速度和简单程度时，我感到有点傻：

```
using System;
using Microsoft.Deployment.WindowsInstaller;
using Microsoft.Deployment.WindowsInstaller.Package;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            using (var package = new InstallPackage("foo.msi", DatabaseOpenMode.ReadOnly))
            {
                foreach (var filePath in package.Files)
                {
                    Console.WriteLine(filePath.Value);
                }
                Console.WriteLine("Finished");
                Console.Read();
            }
        }
    }
} 
```

# java - Process.getOutputStream.close() 似乎不起作用或其他什么？

> ID：14611841
> 
> 赞同：0
> 
> 时间：2013-01-30T19:11:17.737
> 
> 标签：java, outputstream, bufferedwriter

我的项目有这个问题两天了。我不确定是什么问题。我的项目包括 2 个类，主类和另一个使用 ExecutorService 通过 ProcessBuilder 调用的类。这是代码。

主类：

```
public class DesktopApplication1View extends FrameView{
        public Process process = null;
        private executeCode execute = new executeCode();

public DesktopApplication1View(SingleFrameApplication app){

        (.........)

        jButton.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e){
                console.setText("");
                execute.start();
            }
        });

    }

    class executeCode implements Runnable{
            private boolean executeStarted = false;
            private ExecutorService executecode;

            ReadStdout read;
            WriteStdin write;

            public executeCode(){
                executecode = Executors.newSingleThreadExecutor();
                read = new ReadStdout();
                write = new WriteStdin();
            }

            public void start(){

                     if(executeStarted){
                        try {
    //                        process.getInputStream().close();
                            process.getOutputStream().close();
                            process.destroy();
                        } catch (IOException ex) {}
                     }

                     console.append("start\n");//debugging purpose
                     executecode.execute(this);
            }

            public void run(){
                console.append("Execute thread = " + Thread.currentThread().getName() + "\n");//debugging purpose
                     executeStarted = true;
                try {
                                    ProcessBuilder builder = new ProcessBuilder("java", "-cp", "Project.jar", "project/oddeven");
                                    builder.redirectErrorStream(true);
                                    process = builder.start();
                                    read.startReadStdout();
                                    write.startWriteStdin();
                                }
                        catch (IOException e1) {console.append("error io");}
    //                return;
                    }
        }

        class WriteStdin implements Runnable{
        private String input = null;
        private BufferedWriter writer = null;
        private ExecutorService executeWrite = Executors.newSingleThreadExecutor();

        public void startWriteStdin(){
            writer = new BufferedWriter(new OutputStreamWriter(process.getOutputStream()));

            executeWrite.execute(this);
        }
        public void WriteStdin(){

            console.addKeyListener(new java.awt.event.KeyAdapter() {

                @Override
                public void keyTyped(java.awt.event.KeyEvent e){

                    //save the last lines for console to variable input
                    if(e.getKeyChar() == '\n'){

                        try {
                            int line = console.getLineCount() -2;
                            int start = console.getLineStartOffset(line);
                            int end = console.getLineEndOffset(line);
                            input = console.getText(start, end  - start);
                            writer.write(input);
                            writer.flush();
                        } catch (Exception e1) {}
                    }
                }
            });
        }

        @Override
        public void run(){
             console.append("Write thread = " + Thread.currentThread().getName() + "\n");//debugging purpose
            if(input == null) this.WriteStdin();

        }
    }

    class ReadStdout implements Runnable{
        private ExecutorService executeRead = Executors.newSingleThreadExecutor();
        private BufferedReader reader = null;

        public void startReadStdout(){
            reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
            executeRead.execute(this);
        }

        public void run() {
            console.append("Read thread = " + String.valueOf(Thread.currentThread().getName()) + "\n");//debugging purpose
            String line;
            try {
            while((line = reader.readLine())!=null)
              console.append(line+"\n");
                 }catch (IOException e) {}

            console.append("read done");//debugging purpose

        }
    } 
```

奇偶类：

```
public class oddeven{
            static double num = 0;
            static int even = 0, odd = 0, zero = 0;
    public static void main(String[]args) throws Exception{
        odd();
    }
    public static void odd() throws Exception{
        try{
            BufferedReader dataIn = new BufferedReader(new InputStreamReader(System.in));
            System.out.print("Enter numbers\n(Input negative value to end)\n");
            num = Double.parseDouble(dataIn.readLine());
            while(num>=0){
                if(num == 0)
                    zero++;
                else if(num%2==0)
                    even++;
                else
                    odd++;
                num = Double.parseDouble(dataIn.readLine());
            }
            System.out.print("There are\n"+even+" even numbers\n"+odd+" odd numbers\n"+zero+" zero value");

        } catch(NumberFormatException e){
            System.out.print("Wrong input, enter again\n");
            odd();
        }
    }
} 
```

所以。如果我单击一次按钮，则输出为：

```
start
Execute thread = pool-2-thread-1
Read thread = pool-3-thread-1
Write thread = pool-4-thread-1
Enter numbers
(Input negative value to end)
1
2
-1
There are
1 even numbers
1 odd numbers
0 zero value
read done 
```

但是如果我关闭然后再次启动应用程序然后单击按钮两次而不在第一次单击时输入任何内容，输出将是：

```
start
Execute thread = pool-2-thread-1
read doneRead thread = pool-3-thread-1
Write thread = pool-4-thread-1
Enter numbers
(Input negative value to end)
1
2
-1
There are
2 even numbers
2 odd numbers
0 zero value
read done 
```

如您所见，当我单击按钮两次而不在第一次单击时输入时，输出流没有关闭，我认为这导致奇偶类从流中注册了 2 个输入。但是，如果您在第一次单击时输入然后第二次单击没有得到任何输入并且您再次单击该按钮，则流将不再注册 2 个输入，它只会注册一个。

这不应该发生，因为首先，如果您单击按钮并且再次实例化缓冲写入器，则该进程将被破坏。或者我可能是错的。

我希望你明白我的意思。谢谢你。

# java - java中随机访问文件中的新行

> ID：14611843
> 
> 赞同：2
> 
> 时间：2013-01-30T19:11:23.740
> 
> 标签：java, newline, randomaccessfile

每当在java中使用'writeBytes'方法时`RandomAccessFile`，它都会将文本写入文件的同一行。我怎样才能到达一个新的线路`RandomAccessFile`？（没有`BufferedReader`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:18:24.650

你可以写一个行分隔符。为了获得当前运行的操作系统的正确行分隔符，您必须查找该`line.separator`属性。这些方面的东西：

```
randomAccessFile.writeBytes(System.getProperty("line.separator")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T19:27:53.477

**试试这个：**

```
 RandomAccessFile file = new RandomAccessFile("e:\\demo.txt","rw");
 String originalString = "First line \nSeconf line \n";
 String updatedString = originalString.replace("\n","\r\n");
 file.writeBytes(updatedString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:20:15.600

```
System.getProperty("line.separator"); 
```

尝试在其他任何内容之前向文件写入新行，因为它将从您上次写入的位置开始写入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-01T15:06:19.297

换行符的 ASCII 值为 10 。您可以将此值存储在一个字节中，然后使用“writeBytes”，这将产生一个新行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-15T16:13:54.013

```
String data = "New Line";
RandomAccessFile raf = new RandomAccessFile(myFile);
raf.writeBytes("\r\n" + data); 
```

这将在“文本”之前添加一个新行（windows 样式/CRLF）。

# java - Android onTouch 动画向上 onTouch 停止动画向下

> ID：14611844
> 
> 赞同：0
> 
> 时间：2013-01-30T19:11:28.047
> 
> 标签：java, android, animation, android-animation

我试图在触摸按钮时使 imageView 向上移动，而当按钮被释放时，我希望它返回向下。我开始编写一些示例代码以至少让它向上移动，但我已经在我的 onClick 中获得了一个空指针。有任何想法吗？

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.TranslateAnimation;
import android.widget.Button;
import android.widget.ImageView;

public class Test extends Activity {
    ImageView img_left;
    ImageView img_right;
    Button left;
    Button right;
    TranslateAnimation moveup;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test);

        moveup = new TranslateAnimation(0, 0, 0, 300);
        moveup.setDuration(3000);
        moveup.setFillAfter(true);
        left = (Button) findViewById(R.id.left);
        right = (Button) findViewById(R.id.right);

        left.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                img_left.startAnimation(moveup);
            }

        });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:21:42.483

您没有初始化 ImageView 对象，就程序而言，它们只是空引用。

您需要执行以下操作：

```
//initialize the ImageView
img_left = (ImageView)findViewById(R.id.ID of the image view);
//same thing for img_right 
```

# mysql - 正确使用 KEY、INDEX 或 UNIQUE

> ID：14611847
> 
> 赞同：1
> 
> 时间：2013-01-30T19:11:31.747
> 
> 标签：mysql, indexing, constraints, unique

我指的是[这个 SO-question](https://stackoverflow.com/questions/707874/differences-between-simple-primary-unique-and-fulltext-indexes)。在这里，在第一个答案中，据说

> UNIQUE 是指索引的所有行都必须唯一的索引。也就是说，对于该索引中的所有列，同一行可能不会与另一行具有相同的非 NULL 值。除了用于加快查询速度外，UNIQUE 索引还可用于对数据实施约束，因为数据库系统不允许在插入或更新数据时破坏这种不同的值规则。

由于我的英语不是最好的，我想知道这意味着什么，

> 对于该索引中的所有列，同一行的非 NULL 值可能与另一行不同

为了快速将此与我的实际问题联系起来，这是我的场景。我有三张桌子

```
game(gameID, ...), PK(gameID)
player(gameID, playerName, ...), PK(gameID, playerName), FK(gameID)
prop(gameID, playerName, c1, c2, c3, ...) PK(gameID, playerName), FK(gameID, playerName) 
```

现在，连接到游戏的玩家可以选择 1-n 个道具。在这样的道具`c1 - c3`中，代表扑克牌值，更准确地说是{1,2,3, ..., T, J, Q, K, A}。

三张牌的这种组合可以包含相同的值，但在游戏中只能选择一次组合。例如，玩家可以选择`{2,2,3}`和`{A,2,3}`，但是在该游戏中，没有其他玩家可以再次选择相同的组合。

现在回到我的序言，这三个元素`c1, c2, c3`没有`UNIQUE`在语句中`CREATE TABLE`声明（否则示例中的第一个组合是不可能的）。这是否意味着我不能`UNIQUE(gameID, c1, c2, c3)`用作约束来确保游戏中组合的唯一性？这是一个很好的例子`INDEX(gameID, c1, c2, c3)`吗？在我的特定情况下使用这两种变体有什么区别？

最后`CREATE TABLE`，第三张表的声明将是

```
create table prop(
    gameID  INTEGER NOT NULL,
    playerName  VARCHAR(25) NOT NULL,
    isBB    BOOLEAN NOT NULL DEFAULT FALSE,
    card1   VARCHAR(1) NOT NULL,
    card2   VARCHAR(1) NOT NULL,
    card3   VARCHAR(1) NOT NULL,
    PRIMARY KEY (gameID, playerName),
    FOREIGN KEY (gameID, playerName) REFERENCES player(gameID, playerName) ON DELETE CASCADE,
    UNIQUE(gameID, c1, c2, c3) /* OR INDEX(gameID, c1, c2, c3)?

)ENGINE=INNODB; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:22:35.773

索引用于加速数据库中的搜索。另一方面，唯一约束对数据库中的行强制执行规则（在您的示例中，没有两行对于 'gameID, c1, c2, c3' 列具有相同的值。

您可以在 gameID 上建立索引以加快查询，例如`WHERE gameID = ?`. 但这并不能保证你只有 1 行，比如说 gameID = 1。如果你需要这样一个约束，那么`UNIQUE`你需要的是约束（对于 id 字段，主键是一个更好的选择，因为它将唯一性和索引结合在一起）。

要回答您的具体问题：

> 这是否意味着我不能使用 UNIQUE(gameID, c1, c2, c3) 作为约束来确保游戏中组合的唯一性？

如果你这样做，那么这些组合将在每场比赛中都是独一无二的。

> 这是使用 INDEX(gameID, c1, c2, c3) 的好例子吗？

如果您经常在游戏中搜索组合，这也是一个很好的示例。

# iphone - 通过 iCloud 从参考 URL 同步数据？

> ID：14611858
> 
> 赞同：1
> 
> 时间：2013-01-30T19:11:59.547
> 
> 标签：iphone, ios, icloud

我想通过 iCloud 从我的文档目录同步文档，但是如果用户与 iCloud 断开连接，我希望它保留在那里，所以我想知道是否可以在 iCloud 中保存参考 URL，这将同步原始文件并将其放回设备之间的原始位置？

# facebook - FB评论插件无法访问站点警告

> ID：14611863
> 
> 赞同：-1
> 
> 时间：2013-01-30T19:12:15.727
> 
> 标签：facebook, plugins, comments

我插入了新版本的 FB 社交评论插件，它显示我发布评论框的 URL 无法访问。我之前有旧版本的评论插件，它工作得很好。我该如何解决？我的网页网址是[http://www.irinadesigns.com/blog11_fun_facts.html](http://www.irinadesigns.com/blog11_fun_facts.html)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:13:37.133

您的评论插件`href`设置为`http://www.irinasworld.com/blog11_fun_facts.html`哪个 404。更新它以指向正确的 URL。

# python - PYTHON：公共、私有（单下划线）和私有（双下划线）方法的虚拟方法行为差异

> ID：14611865
> 
> 赞同：0
> 
> 时间：2013-01-30T19:12:19.333
> 
> 标签：python, virtual-functions, private-methods

我在 python 中尝试了 NVI(Non-Virtual Interface) Idiom，并注意到私有（双下划线）方法似乎并不像虚拟一样。

```
class A(object):
    def a(self):
        print "in A.a"
    self.b()
    self.__b()
    self._b()

def _b(self):
    print "in A._b"

def __b(self):
    print "in A.__b"

def b(self):
    print "in A.b"

class B(A):
def __b(self):
    print "in B.__b"

def b(self):
    print "in B.b"

def _b(self):
    print "in B._b"

>>> a=A()
>>> b=B()
>>> a.a()
in A.a
in A.b
in A.__b
in A._b
>>> b.a()
in A.a
in B.b
in A.__b
in B._b 
```

我猜这可能是因为双下划线方法的名称修改，但这是违反直觉的。此外，python 文档“（对于 C++ 程序员：Python 中的所有方法实际上都是虚拟的。）”引起了混淆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:14:34.140

你的分析是正确的。这是由于名称重整，这实际上与（因为它们具有不同的重整名称）`A.__b`无关。`B.__b`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:18:47.413

正如[文档](http://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references)所说，双前导下划线方法适用于**类私有成员**。它们对于使用它们的特定类是私有的，而不是它的类继承子树。这就是重点：它们是为特定于类的变量而设计的，您*不*希望子类定义覆盖其值或访问子类方法。

您是正确的，名称修饰是您描述的行为的来源。所有 Python 方法确实是虚拟的，因为它们可以被覆盖。双下划线方法只是通过修改名称使从类外部的访问变得更加困难。您可以通过在 class 中`A.__b`定义方法来覆盖。那将是一个坏主意，因为它首先会破坏使用双下划线的目的，但这是可能的。`_A__b``B`

# python - 抽象出样板 sqlalchemy 调用以允许在 try/except 块中使用不同的选项

> ID：14611868
> 
> 赞同：0
> 
> 时间：2013-01-30T19:12:35.123
> 
> 标签：python, sqlalchemy, abstraction, method-chaining

我正在尝试抽象我的 sqlalchemy 查询调用，完整的未修改调用如下所示：

```
Session.query(User).options(FromCache('redis1')).filter(User.id == user_id).all() 
```

我需要控制的动态部分是**User**，**redis1**和最后一次调用**all()** 我想调用类似上面的代码，并且可以在参数中更改上面粗体的内容。

我的第一次尝试结果是这样的：

```
# Abstracts the final chained method
def q(obj, action):
    return getattr(obj, action)()

# Removes a lot of boiler plate code
# but doesn't give me control over the cache argument
# which I need in the same method as the action above
def query(model):
    return Session.query(model).options(FromCache('redis1'))

# Called like this
result = q(query(User).filter(User.id == user_id), 'all') 
```

但我显然只想要一个功能而不是两个，这样我就可以控制动作和模型。这样做的原因是我想将**.one()**或**.all()**调用包装在一个 try-except 块中，以防查询失败，该块将通过 FromCache 选项中的不同缓存服务器。但是每次我写查询时都这样做会很烦人。

我正在寻找这样的东西（代码不起作用，显然）：

```
def q(model, filters, action):
    data = None
    servers = ['redis1', 'redis2']
    for server in servers:
        try:
            call = Session.query(model).options(FromCache(redis)).filters_here_somehow()
            data = getattr(call, obj)() # Final call from action added
        except:
            continue
        break;
    return data

# and called something like this.. (or some other way)
result = q(User, the filter/between/limit/whatnot here, 'all') 
```

有什么想法还是我完全偏离了基础？还是有更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:42:46.960

唯一需要发生有趣事情的部分是“all()”。其余部分似乎您会坚持使用直接查询。

所以这是一种方式模式：

```
q = query(User).filter(User.id = user_id).limit(whatever)
results = from_redis(q, Query.all) 
```

这是我们可以做到的一种方法：

```
def from_redis(query, meth):
    for server in ['r1', 'r2']:
        try:
            return meth(q.options(FromCache(server)))
        except Exception, e:
            continue
    else:
        raise e 
```

但这似乎有点蹩脚。由于您使用的是缓存配方和子类`Query`化，因此您也可以将您的 redis 功能添加到其中，有点像：

```
class RedisQuery(CachingQuery):
    redis_servers = False

    @_generative(self):
    def using_redis(self):
        self.redis_servers = True

    def __iter__(self):
        if self.redis_servers:
            for server in ['r1', 'r2']:
                try:
                    return super(RedisQuery, self).options(FromCache(server)).__iter__()
                except Exception, e:
                    continue
            else:
                raise e
        else:
            return super(RedisQuery, self).__iter__() 
```

你这样称呼的那个：

```
q = query(User).filter(User.id = user_id).limit(whatever)
results = q.using_redis().all() 
```

只是一些想法。

# c - 常见的 C89 之前的编译器/stdlib 习惯用法 (1985-1988)

> ID：14611871
> 
> 赞同：7
> 
> 时间：2013-01-30T19:12:49.903
> 
> 标签：c, history

我正在为虚构的 DCPU-16 CPU（将在 0x10C 游戏中使用）编写 C 编译器。在这个游戏世界中，为系统编写的任何原始软件都是在 1988 年之前（或期间）开发的：所以我正在尝试编写我的编译器，就像它是在 1985 年至 1988 年之间编码的那样。我有一份 C89 标准的副本，但想知道在此之前的常见编译器与该标准和该时期的常见编码风格有何不同。

到目前为止，这就是我的假设：

*   我需要使用预处理器支持来定义新旧样式的函数定义/原型。
*   编码风格通常使用“something_with_an_underscore”来表示类型、函数和变量（这是真的吗？在那个时期匈牙利符号有多流行？骆驼格呢？）

我想知道的其他事情：

*   常见的 c 编译器/标准库与后来的 C89 标准有何不同？
*   流行什么常见的代码模式？
*   当时的公共变量是如何命名的（i、n、foo、bar？）
*   你有当时的示例代码吗？
*   ETC...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:30:07.613

当没有明确的标准时，人们只关心让它“工作”。它几乎适用于*任何东西*，而不仅仅是 C 语言。因此，很难区分所有预标准编码样式/命名约定等与标准编码样式之间的区别。我认为大多数人都会遵循 K&R 书籍（第一和第二）中的任何内容。

对于样品...

您可以查看 Dennis Ritchie 的网站，他提供了一些示例：[非常早期的 C 编译器和语言](http://cm.bell-labs.com/cm/cs/who/dmr/primevalC.html)。您可以通过该网站搜索更多相关信息。但我认为你不会得到所有问题的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T22:02:29.627

您可以做的一件怪异丑陋的事情可能会在游戏中形成一个巧妙的“谜题”，即非常早期的预处理器实际上会扫描并替换字符串文字内容中定义的宏！

所以，例如

```
#define foo bar
char *s = "That would be a foolish thing to do!"; 
```

将被预处理为

```
char *s = "That would be a barlish thing to do!"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-27T11:41:35.680

负责标准化 C 语言的 ANSI X3J11 委员会成立于 1983 年，并于 1985 年 4 月发布了初稿。根据 Eric S. Raymond 的说法，“自从 X3J11 委员会关于拟议标准草案的工作文件的副本向 1985-1986 年的编译器实施者表明委员会的意图以来，[C 语言] 基本上是稳定的”。[1]

研究 '85-'86 时间范围内的编译器手册，例如 Lattice C [2] 或 Microsoft C 4.0 [3]，表明这些编译器已经开始支持大部分 ANSI C89。最明显的遗漏是缺乏`const`和`volatile`支持（尽管 Microsoft C 已经将这些添加到保留关键字列表中）以及继续使用“K&R”风格的函数定义。

所以到 1988 年，看到 ANSI C89 代码在野外出现并不是不合理的，即使标准本身还没有发布——仅仅是因为编译器编写者已经将部分标准合并到他们的编译器中好几年了.

[1] [http://www.catb.org/~esr/writings/taoup/html/c_evolution.html](http://www.catb.org/~esr/writings/taoup/html/c_evolution.html)

[2] [https://archive.org/details/Lattice_C_AmigaDOS_Compiler_Version_3_Programmers_Reference_Guide_1986-09-12_Lattice_Inc](https://archive.org/details/Lattice_C_AmigaDOS_Compiler_Version_3_Programmers_Reference_Guide_1986-09-12_Lattice_Inc)。

[3] [http://www.os2museum.com/wp/dos/dos-library/](http://www.os2museum.com/wp/dos/dos-library/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T20:46:40.720

见[http://cm.bell-labs.com/who/dmr/](http://cm.bell-labs.com/who/dmr/)

尤其是“1972-73 年间两个原始 C 编译器的复活，包括源代码。”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T19:25:41.767

*我有一份 C89 标准的副本，但想知道在此之前的常见编译器与该标准和该时期的常见编码风格有何不同。*

C 的历史主要是由编译器供应商创造的。在标准化 ANSI C 时，C89 委员会努力不破坏现有代码。我认为 C89 之前的代码很可能使用 C89 编译器进行编译。

来自 C89 的基本原理：

> “在指定标准语言时，委员会使用了几个原则，其中最重要的是：[...] 大量 C 代码具有相当大的商业价值。已尽一切努力确保该代码的大部分任何符合标准的实现都可以接受。委员会不想强迫大多数程序员修改他们的 C 程序，只是为了让符合标准的翻译器接受它们。

# android - Android GLSurfaceView 2.x SDK 保留上下文。屏幕关闭时被破坏

> ID：14611872
> 
> 赞同：1
> 
> 时间：2013-01-30T19:12:50.857
> 
> 标签：android, destroy, glsurfaceview

我在做游戏。不久前，我遇到了一个问题。我想为旧的 sdk 版本保留 GLSurfaceView 的 GLContext 。我通过获取 GlSurfaceView 的最新源并将其放入我的项目中解决了这个问题。只需要一点点修复：gles 2.0 版本检查。

这几乎可以正常工作。但！

在 android 版本 2.xx 上，当应用程序的屏幕调整被破坏时，上下文和所有纹理都随之被破坏。有趣的事情：如果我按下主页按钮并且应用程序将进入后台并且屏幕转动它不会被破坏，但是如果我在它在前台运行时转动屏幕它肯定会被破坏。

我尝试了不同的方法来避免这种情况。

1.  我尝试按照副本岛开发人员的建议分离上下文和表面线程。但没什么好。它总是重新加载纹理。

2.  我已尝试按照此处的建议在 onDestroy 上分离视图： [将 Android 视图附加到布局/从布局分离，](https://stackoverflow.com/questions/10505346/attach-detach-android-view-to-from-layout)但也没有什么好处。

3.  我尝试使用 FLAG_SHOW_WHEN_LOCKED。但是当屏幕打开时，储物柜屏幕不会出现。它会在按下主页按钮时显示。一点都不好。

4.  我尝试在调用恢复时将应用程序发送到后台，然后使用 BroadcastReceiver 将其置于前台，但它始终被置于前台（即使它在后台）。如果它被系统破坏了，它根本不会显示出来。

不知道该怎么办。可能是我的手机资源不足，但我尝试过其他游戏，它们运行良好。无需长时间重新加载即可恢复自身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:47:00.717

我不敢相信。这太愚蠢了。根据这个线程[问题了解屏幕关闭和打开时的生命周期](https://stackoverflow.com/questions/3407192/problems-understanding-the-life-cycle-when-screen-goes-off-and-on)你必须添加

```
<activity ... android:configChanges="orientation" ... > 
```

因此，当您关闭屏幕时，应用程序不会旋转然后销毁。

# javascript - Backbone Marionette onBeforeClose 和过渡

> ID：14611873
> 
> 赞同：3
> 
> 时间：2013-01-30T19:12:51.067
> 
> 标签：javascript, backbone.js, marionette

从昨天开始，我是 Backbone Marionette 的新手，我想知道是否有人已经尝试在视图之间实现一些花哨的转换。

实际上，我正在尝试在渲染下一个视图之前淡出当前视图。我在 onBeforeClose 回调中执行此操作，但这不起作用，因为下一个视图在我当前视图完成转换之前呈现...

有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T03:21:31.493

这本应该在很久以前就出现在 Marionette 中了，但我一直推迟...

[https://github.com/marionettejs/backbone.marionette/issues/320#issuecomment-9746319](https://github.com/marionettejs/backbone.marionette/issues/320#issuecomment-9746319)

这是使用区域进行过渡动画所需的代码核心。该问题中的代码直接在视图上调用“淡出”和“淡入”方法，但您只需调用`view.$el.fadeIn(...)`并淡出即可。

我已经多次使用它并取得了巨大的成功，我和我的朋友一起构建了它，他也在大规模应用程序中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T10:07:12.787

我认为这可能对你有用。

以下木偶插件添加了 4 种过渡。可以轻松添加更多过渡类型。

基本上不是使用 yourRegion.show(view)... 你现在可以使用 yourRegion.showAnimated(view, {animationType: 'yourAnimation'});

它非常易于使用。

[https://github.com/marcinkrysiak1979/marionette.showAnimated](https://github.com/marcinkrysiak1979/marionette.showAnimated)

有关更多信息，请参阅 github 上的文档

# android - 使用 YouTubeThumbnailViews 切换活动时泄漏

> ID：14611876
> 
> 赞同：2
> 
> 时间：2013-01-30T19:13:00.563
> 
> 标签：android, youtube-api, memory-leaks

在从一项活动切换到另一项活动时，我真的需要一些帮助来解决泄漏问题。我正在尝试使用 YouTube Android API，我将播放列表加载到一些可点击的缩略图中，然后它们可以播放视频。一切似乎都正常，但后来我注意到 Logcat 中存在泄漏。

这是我的代码：

```
public class MainActivity extends Activity implements
    OnInitializedListener,
    YouTubeThumbnailLoader.OnThumbnailLoadedListener, OnClickListener {

YouTubeThumbnailView thumbs1, thumbs2, thumbs3, thumbs4, thumbs5

YouTubeThumbnailLoader Loader;

ImageView play1, play2, play3, play4, play5;

RelativeLayout tempLayout;

public static final String DEVELOPER_KEY = "xxxxxxxxxxxxxxxxxxxxxxxx";

String videolist, taal;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main);
    tempLayout = (RelativeLayout) findViewById(R.id.tempLayout);
    tempLayout.setVisibility(View.VISIBLE);

    taal = Locale.getDefault().getLanguage();
    if(taal.equals("nl")){
    videolist = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
    }else{
    videolist = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";   
    }

    play1 = (ImageView) findViewById(R.id.play1);
    play2 = (ImageView) findViewById(R.id.play2);
    play3 = (ImageView) findViewById(R.id.play3);
    play4 = (ImageView) findViewById(R.id.play4);
    play5 = (ImageView) findViewById(R.id.play5);

    play1.setVisibility(View.INVISIBLE);
    play2.setVisibility(View.INVISIBLE);
    play3.setVisibility(View.INVISIBLE);
    play4.setVisibility(View.INVISIBLE);
    play5.setVisibility(View.INVISIBLE);

    thumbs1 = (YouTubeThumbnailView) findViewById(R.id.thumbs1);
    thumbs2 = (YouTubeThumbnailView) findViewById(R.id.thumbs2);
    thumbs3 = (YouTubeThumbnailView) findViewById(R.id.thumbs3);
    thumbs4 = (YouTubeThumbnailView) findViewById(R.id.thumbs4);
    thumbs5 = (YouTubeThumbnailView) findViewById(R.id.thumbs5);

    thumbs1.initialize(DEVELOPER_KEY, this);
    thumbs2.initialize(DEVELOPER_KEY, this);
    thumbs3.initialize(DEVELOPER_KEY, this);
    thumbs4.initialize(DEVELOPER_KEY, this);
    thumbs5.initialize(DEVELOPER_KEY, this);

}

@Override
public void onInitializationFailure(YouTubeThumbnailView v,
        YouTubeInitializationResult arg1) {
    // TODO Auto-generated method stub
    tempLayout.setVisibility(View.INVISIBLE);
    Toast.makeText( this,"Unable to initialize",Toast.LENGTH_LONG).show();

}

@Override
public void onInitializationSuccess(YouTubeThumbnailView v,
        YouTubeThumbnailLoader loader) {
    // TODO Auto-generated method stub
    this.Loader = loader;
    Loader.setOnThumbnailLoadedListener(this);
    if (v == thumbs1)
        Loader.setPlaylist(videolist, 0);
    if (v == thumbs2)
        Loader.setPlaylist(videolist, 1);
    if (v == thumbs3)
        Loader.setPlaylist(videolist, 2);
    if (v == thumbs4)
        Loader.setPlaylist(videolist, 3);
    if (v == thumbs5)
        Loader.setPlaylist(videolist, 4);

}

@Override
public void onThumbnailError(YouTubeThumbnailView v, ErrorReason arg1) {
    // TODO Auto-generated method stub
    if (isOnline() == true) {

        tempLayout.setVisibility(View.INVISIBLE);

        if (v == thumbs1)
            play1.setImageResource(R.drawable.unav);
        play1.setVisibility(View.VISIBLE);
        if (v == thumbs2)
            play2.setImageResource(R.drawable.unav);
        play2.setVisibility(View.VISIBLE);
        if (v == thumbs3)
            play3.setImageResource(R.drawable.unav);
        play3.setVisibility(View.VISIBLE);
        if (v == thumbs4)
            play4.setImageResource(R.drawable.unav);
        play4.setVisibility(View.VISIBLE);
        if (v == thumbs5)
            play5.setImageResource(R.drawable.unav);
        play5.setVisibility(View.VISIBLE);

    } else {
        tempLayout.setVisibility(View.INVISIBLE);
        Toast.makeText(this,
                "Error: "+ arg1",
                Toast.LENGTH_LONG).show();

    }
}

@Override
public void onThumbnailLoaded(YouTubeThumbnailView v, String arg1) {
    // TODO Auto-generated method stub
    tempLayout.setVisibility(View.INVISIBLE);

    play1.setVisibility(View.VISIBLE);
    play2.setVisibility(View.VISIBLE);
    play3.setVisibility(View.VISIBLE);
    play4.setVisibility(View.VISIBLE);
    play5.setVisibility(View.VISIBLE);
    v.setTag(arg1);
    v.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    String vid = v.getTag().toString();
    if(Loader != null){
    Loader.release();
    Loader = null;
}
    Intent intent = new Intent(MainActivity.this, PlayerActivity.class);
    intent.putExtra("play", vid);
    startActivity(intent);
    finish();
}

public boolean isOnline() {
    ConnectivityManager CM = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo nwi = CM.getActiveNetworkInfo();
    if (netInfo != null && nwi.isConnected()) {
        return true;
    }
    return false;
}

} 
```

现在这是我通过单击缩略图完成活动时的 LogCat 输出，因此 onClick 方法中的代码：

```
01-30 19:29:04.122: E/ActivityThread(21292): Activity com.reemdroid.tube.MainActivity      has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f42c50 that was originally bound here
01-30 19:29:04.122: E/ActivityThread(21292): android.app.ServiceConnectionLeaked:   Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f42c50 that was originally bound here
01-30 19:29:04.122: E/ActivityThread(21292):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-30 19:29:04.122: E/ActivityThread(21292):    at com.google.android.youtube.player.internal.r.e(Unknown Source)
01-30 19:29:04.122: E/ActivityThread(21292):    at com.google.android.youtube.player.YouTubeThumbnailView.initialize(Unknown Source)
01-30 19:29:04.122: E/ActivityThread(21292):    at com.reemdroid.tube.MainActivity.onCreate(MainActivity.java:140)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.app.Activity.performCreate(Activity.java:5104)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.os.Looper.loop(Looper.java:137)
01-30 19:29:04.122: E/ActivityThread(21292):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-30 19:29:04.122: E/ActivityThread(21292):    at java.lang.reflect.Method.invokeNative(Native Method)
01-30 19:29:04.122: E/ActivityThread(21292):    at java.lang.reflect.Method.invoke(Method.java:511)
01-30 19:29:04.122: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-30 19:29:04.122: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-30 19:29:04.122: E/ActivityThread(21292):    at dalvik.system.NativeStart.main(Native Method)
01-30 19:29:04.132: E/ActivityThread(21292): Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f23660 that was originally bound here
01-30 19:29:04.132: E/ActivityThread(21292): android.app.ServiceConnectionLeaked: Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f23660 that was originally bound here
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-30 19:29:04.132: E/ActivityThread(21292):    at com.google.android.youtube.player.internal.r.e(Unknown Source)
01-30 19:29:04.132: E/ActivityThread(21292):    at com.google.android.youtube.player.YouTubeThumbnailView.initialize(Unknown Source)
01-30 19:29:04.132: E/ActivityThread(21292):    at com.reemdroid.tube.MainActivity.onCreate(MainActivity.java:129)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.Activity.performCreate(Activity.java:5104)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.os.Looper.loop(Looper.java:137)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-30 19:29:04.132: E/ActivityThread(21292):    at java.lang.reflect.Method.invokeNative(Native Method)
01-30 19:29:04.132: E/ActivityThread(21292):    at java.lang.reflect.Method.invoke(Method.java:511)
01-30 19:29:04.132: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-30 19:29:04.132: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-30 19:29:04.132: E/ActivityThread(21292):    at dalvik.system.NativeStart.main(Native Method)
01-30 19:29:04.132: E/ActivityThread(21292): Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f3d140 that was originally bound here
01-30 19:29:04.132: E/ActivityThread(21292): android.app.ServiceConnectionLeaked: Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f3d140 that was originally bound here
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-30 19:29:04.132: E/ActivityThread(21292):    at com.google.android.youtube.player.internal.r.e(Unknown Source) 
01-30 19:29:04.132: E/ActivityThread(21292):    at com.google.android.youtube.player.YouTubeThumbnailView.initialize(Unknown Source)
01-30 19:29:04.132: E/ActivityThread(21292):    at com.reemdroid.tube.MainActivity.onCreate(MainActivity.java:138)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.Activity.performCreate(Activity.java:5104)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.os.Looper.loop(Looper.java:137)
01-30 19:29:04.132: E/ActivityThread(21292):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-30 19:29:04.132: E/ActivityThread(21292):    at java.lang.reflect.Method.invokeNative(Native Method)
01-30 19:29:04.132: E/ActivityThread(21292):    at   java.lang.reflect.Method.invoke(Method.java:511)
01-30 19:29:04.132: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-30 19:29:04.132: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-30 19:29:04.132: E/ActivityThread(21292):    at dalvik.system.NativeStart.main(Native Method)
01-30 19:29:04.142: E/ActivityThread(21292): Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f291f8 that was originally bound here
01-30 19:29:04.142: E/ActivityThread(21292): android.app.ServiceConnectionLeaked: Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f291f8 that was originally bound here
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-30 19:29:04.142: E/ActivityThread(21292):    at com.google.android.youtube.player.internal.r.e(Unknown Source)
01-30 19:29:04.142: E/ActivityThread(21292):    at com.google.android.youtube.player.YouTubeThumbnailView.initialize(Unknown Source)
01-30 19:29:04.142: E/ActivityThread(21292):    at com.reemdroid.tube.MainActivity.onCreate(MainActivity.java:131)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.Activity.performCreate(Activity.java:5104)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.os.Looper.loop(Looper.java:137)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-30 19:29:04.142: E/ActivityThread(21292):    at java.lang.reflect.Method.invokeNative(Native Method)
01-30 19:29:04.142: E/ActivityThread(21292):    at java.lang.reflect.Method.invoke(Method.java:511)
01-30 19:29:04.142: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-30 19:29:04.142: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-30 19:29:04.142: E/ActivityThread(21292):    at dalvik.system.NativeStart.main(Native Method)
01-30 19:29:04.142: E/ActivityThread(21292): Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f2ed08 that was originally bound here
01-30 19:29:04.142: E/ActivityThread(21292): android.app.ServiceConnectionLeaked: Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f2ed08 that was originally bound here
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-30 19:29:04.142: E/ActivityThread(21292):    at     com.google.android.youtube.player.internal.r.e(Unknown Source)
01-30 19:29:04.142: E/ActivityThread(21292):    at com.google.android.youtube.player.YouTubeThumbnailView.initialize(Unknown Source)
01-30 19:29:04.142: E/ActivityThread(21292):    at com.reemdroid.tube.MainActivity.onCreate(MainActivity.java:133)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.Activity.performCreate(Activity.java:5104)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.os.Looper.loop(Looper.java:137)
01-30 19:29:04.142: E/ActivityThread(21292):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-30 19:29:04.142: E/ActivityThread(21292):    at java.lang.reflect.Method.invokeNative(Native Method)
01-30 19:29:04.142: E/ActivityThread(21292):    at java.lang.reflect.Method.invoke(Method.java:511)
01-30 19:29:04.142: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-30 19:29:04.142: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-30 19:29:04.142: E/ActivityThread(21292):    at dalvik.system.NativeStart.main(Native Method)
01-30 19:29:04.152: E/ActivityThread(21292): Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f2bf80 that was originally bound here
01-30 19:29:04.152: E/ActivityThread(21292): android.app.ServiceConnectionLeaked: Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f2bf80 that was originally bound here
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-30 19:29:04.152: E/ActivityThread(21292):    at com.google.android.youtube.player.internal.r.e(Unknown Source)
01-30 19:29:04.152: E/ActivityThread(21292):    at   com.google.android.youtube.player.YouTubeThumbnailView.initialize(Unknown Source)
01-30 19:29:04.152: E/ActivityThread(21292):    at com.reemdroid.tube.MainActivity.onCreate(MainActivity.java:132)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.Activity.performCreate(Activity.java:5104)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.os.Looper.loop(Looper.java:137)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-30 19:29:04.152: E/ActivityThread(21292):    at java.lang.reflect.Method.invokeNative(Native Method)
01-30 19:29:04.152: E/ActivityThread(21292):    at java.lang.reflect.Method.invoke(Method.java:511)
01-30 19:29:04.152: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-30 19:29:04.152: E/ActivityThread(21292):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-30 19:29:04.152: E/ActivityThread(21292):    at dalvik.system.NativeStart.main(Native Method)
01-30 19:29:04.152: E/ActivityThread(21292): Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f51090 that was originally bound here
01-30 19:29:04.152: E/ActivityThread(21292): android.app.ServiceConnectionLeaked: Activity com.reemdroid.tube.MainActivity has leaked ServiceConnection com.google.android.youtube.player.internal.r$e@42f51090 that was originally bound here
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-30 19:29:04.152: E/ActivityThread(21292):    at  android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-30 19:29:04.152: E/ActivityThread(21292):    at com.google.android.youtube.player.internal.r.e(Unknown Source)
01-30 19:29:04.152: E/ActivityThread(21292):    at com.google.android.youtube.player.YouTubeThumbnailView.initialize(Unknown Source)
01-30 19:29:04.152: E/ActivityThread(21292):    at com.reemdroid.tube.MainActivity.onCreate(MainActivity.java:145)
01-30 19:29:04.152: E/ActivityThread(21292):    at android.app.Activity.performCreate(Activity.java:5104) 
```

我错过了什么吗？我看到了一个 serviceConnection，但我认为在发布 YouTubeThumbnailLoader 时它应该消失了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T21:05:56.077

每个`YouTubeThumbnailView`. 您只保存对其中一个的引用（在字段中`this.Loader`），并且您只发布了一个加载器。你想释放所有这些。

实现此目的的一种方法是保留从`YouTubeThumbnailView`到的地图`YouTubeThumbnailLoader`。在`onInitializationSuccess`你做`map.put(view, loader)`和在`onClick`（你释放的地方）你调用`.release()`所有的加载器`map.valueSet()`。

希望有帮助！

# image-processing - 伽马校正公式

> ID：14611881
> 
> 赞同：1
> 
> 时间：2013-01-30T19:13:37.547
> 
> 标签：image-processing

我想做一些伽玛校正很重要的图像处理。我在网上搜索了通用公式，但找不到适合我需要的公式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:16:44.953

相当“通用”的问题。如果您对特定编程语言的解决方案不感兴趣，则可以使用此公式：

```
g'(g) = w_max * ((g - w_min) / (w_max - w_min)) ^ gamma + w_min 
```

w_max 和 w_min 是图像中的最大和最小强度值，g 是游戏校正之前的强度值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T19:20:24.080

在谷歌快速搜索伽玛校正 matlab（我在大学里使用 matlab 进行图像处理）后，我遇到了这个页面（[http://www.mathworks.com/matlabcentral/fileexchange/5347-gamma-correction](http://www.mathworks.com/matlabcentral/fileexchange/5347-gamma-correction)）和这段代码：

```
Err = 0;
if nargin < 2
    GammaValue = 1;
    disp('Default value for gamma = 1');
else if nargin ==2 & GammaValue < 0
     GammaValue = 1;
     disp('GammaValue < 0, Default value considered, Gammavalue = 1');
else if nargin > 2
     disp('Error : Too many input parameters');
     Err = 1;
end
if Err == 1 
x = imread(Image);
x = double(x);
Correction = 255 * (x/255).^ GammaValue; 
end; 
```

# sitecore - 限制 Sitecore MediaCache 文件夹大小

> ID：14611888
> 
> 赞同：1
> 
> 时间：2013-01-30T19:13:20.177
> 
> 标签：sitecore, sitecore6, sitecore-media-library

**问题**

有没有办法限制默认为每个 Sitecore 站点创建的 MediaCache 文件夹的大小？Sitecore 6.2 文档说这是不可能的，但我们使用的是 6.4.1。

**背景**

我们有一个网站部署到三个负载平衡的 Sitecore 服务器。我们的 Search Appliance 专门使用其中一台服务器来索引我们的网站内容。由于它比普通用户更快地浏览我们的网站并消耗更多的数据，因此我们网站的 MediaCache 文件夹 (/App_Data/MediaCache/website) 会填满该 Web 服务器上的磁盘。我想我们可以完全禁用该服务器上的媒体缓存，但如果可能的话，我们更愿意在每个 Web 服务器之间保持相同的配置。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:39:33.823

MediaCache 文件夹填满的问题是什么？我想您在该服务器上有很多媒体项目和/或小（ish）磁盘大小？我还假设您没有使用 Lucene 进行索引，而是一个爬虫将访问每个页面并“报废” html，就像谷歌一样？为什么爬虫请求图像，而不仅仅是 HTML 标记？

我不知道有什么手头，可能有一些东西，但这意味着在 dotPeek 中查看 Sitecore 内核。

但是，使用现有的东西，您必须更改该服务器上的配置文件。

您可以将 MediaCache 文件夹清理任务设置为更快/更频繁地运行，但是您需要将父代理间隔设置为相同，因此这意味着更多的 Sitecore 喋喋不休。

```
<agent type="Sitecore.Tasks.CleanupAgent" method="Run" interval="00:01:00">
  <files hint="raw:AddCommand">
    <remove folder="/App_Data/MediaCache" pattern="*.*" maxAge="00:01:00" recursive="true" />
  </files>
</agent> 
```

就个人而言，我只会使用[补丁配置文件](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/05/All-About-web-config-Include-Files-with-the-Sitecore-ASPNET-CMS.aspx)来禁用该文件夹的 MediaCache。但是，如果确实有那么多数据耗尽了磁盘空间，那么请确保您的服务器架构设置正确，否则将会出现大量网络流量。如果您在 3 个服务器之间有一个共享数据库，那么这可能是一个问题。

将以下内容添加到 .config 文件并放置在索引服务器上的 /App_Config/include/ 文件夹中。

```
<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <settings>
      <setting name="Media.CachingEnabled" value="false" />
    </settings>
  </sitecore>
</configuration> 
```

或者对于特定网站，只需修补 `<site name="website">`元素并添加`cacheMedia="false"`.

如果您的索引服务器与前端服务器具有不同的 URL，那么您可以考虑让索引服务器输出媒体项目的完整 URL，以便它们指向前端服务器。这样，图像就会被缓存在这些服务器上。

# c# - 使用下拉菜单制作动态菜单

> ID：14611891
> 
> 赞同：2
> 
> 时间：2013-01-30T19:13:49.637
> 
> 标签：c#, asp.net

我目前有这样的动态菜单：

```
<asp:Repeater runat="server" id="MenuRepeater">
  <headertemplate>
       <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">KezBlu</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
  </headertemplate>
  <itemtemplate>
     <li><a href='<%# Eval("PageFile") %>'><%# Eval("DisplayName") %></a></li>
  </itemtemplate>
  <footertemplate>
             </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>
  </footertemplate>
 </asp:Repeater> 
```

数据源是：

```
 public partial class KezberProjectManager : System.Web.UI.MasterPage
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            MenuRepeater.DataSource = GetMenu();
            MenuRepeater.DataBind();
        }

        protected DataTable GetMenu() 
        {
          // you would normally pull this from a database, this is here
          // only to show the idea.
          DataTable menu = new DataTable();
          menu.Columns.Add("PageFile", typeof(String));
          menu.Columns.Add("DisplayName", typeof(String));

          DataRow row = menu.NewRow();
          row["PageFile"] = "home.aspx";
          row["DisplayName"] = "Home";
          menu.Rows.Add(row);

          row = menu.NewRow();
          row["PageFile"] = "Accounts.aspx";
          row["DisplayName"] = "Accounts";
          menu.Rows.Add(row);

          row = menu.NewRow();
          row["PageFile"] = "Logout.aspx";
          row["DisplayName"] = "Logout";
          menu.Rows.Add(row);

          return menu;
        }
    } 
```

这很好用，但我也需要子菜单。

有没有办法以某种方式为每个项目设置中继器，或者更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:13:09.293

您可以使用嵌套中继器：

```
<asp:Repeater ID="rptFirstLevel" runat="server">
    <ItemTemplate>
        <!-- first level html --> 
        <asp:Repeater ID="rptSecondLevel" DataSource='<%# DataBinder.Eval(Container.DataItem, "Children") %>' runat="server">
            <ItemTemplate>
                <!-- second level html -->
            </ItemTemplate>
        </asp:Repeater>
     </ItemTemplate>
</asp:Repeater> 
```

在您的代码中，只需确保您正确地对第一个中继器进行数据绑定。

```
rptFirstLevel.DataSource = menu;
rptFirstLevel.DataBind(); 
```

并且您的`menu`对象包含该`Children`集合。这只是众多可能的解决方案之一。希望能帮助到你。

# android - 当Android杀死一个应用程序时，一个功能可以中途停止吗？

> ID：14611893
> 
> 赞同：14
> 
> 时间：2013-01-30T19:13:51.890
> 
> 标签：android

我想知道：当一个应用程序要被杀死时，Android 是等待当前正在运行的函数返回，还是 Android 会在它自行结束之前停止它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:16:05.180

**更新：** 经过测试，Android会杀死当前正在运行的任何线程/AsynTask（不调用onPostExecute()/onCancelled()）；

如果您正常关闭应用程序。您的 ui-thread 停止，但如果您在 Thread / AsyncTask / Service 中实现您的方法，它将继续运行直到完成。
但是，如果您有应用程序实例的回调或对应用程序的 ui 执行某些操作，您的 Thread / AsyncTask 可能会继续运行，但可能会或可能不会完全正常运行。根据正在执行的操作，这可能会给您一个例外。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                int i = 0;
                while (true) {
                    i++;
                    Thread.sleep(2000);
                    Log.i("not dead", "not dead" + i);
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }).start();
} 
```

运行这段代码，然后去玩一些游戏。结果是线程将被系统杀死。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T19:28:21.010

操作系统杀死 JVM 进程，所有线程中的所有“功能”。实际上，您不应该假设方法是事务。相反，应该假设它可以随时终止并进行适当的设计。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T19:39:11.677

您的应用程序可能随时被系统杀死，而无需执行另一行代码。然而，根据[文档](http://developer.android.com/reference/android/app/Activity.html)，有一些方法不是“可杀死”的：

*   onCreate()
*   onRestart()
*   开始（）
*   onResume()
*   暂停（）

由于 onDestroy() 肯定不会被调用，因此使用*onPause()*方法将任何持久性数据写入存储更节省：

```
protected void onPause(){
   super.onPause();
   if(isFinishing()){
      // store data
   }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T19:23:20.980

它会在执行过程中杀死一个方法是有道理的。考虑到许多“挂起”是由于单个方法循环中的无限循环条件造成的。操作系统如何杀死这样的应用程序而不在执行方法的过程中杀死它？

还要考虑这一点：即使操作系统允许“当前”方法在终止应用程序之前完成执行，然后终止应用程序，它也会在调用操作系统的第一个方法的方法中间终止应用程序允许继续执行直到完成。好的，那么继续这个想法到极致。如果操作系统允许正在执行的每个函数在杀死应用程序之前完成，那么最终结果是操作系统允许整个应用程序运行完成，这正是杀死应用程序应该规避的。因此，操作系统在杀死一个应用程序时，必须在“一个”......实际上是“许多”......功能的中间终止它。调用堆栈上的每个函数都没有机会完成！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-30T19:25:14.380

Android 可以在任何时候、任何时候杀死你的应用程序。但是如果他有足够的资源或者你有前台活动或服务，android 会尝试让你的应用程序运行。

在杀死您的应用程序之前，android 将根据 SDK 文档调用组件的生命周期方法。并非所有生命周期方法都保证被调用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-30T19:28:21.340

每个 android 应用都运行在一个单独的 Dalvik VM 上。当 android 杀死该应用程序时，它会破坏该 VM 实例。并且不关心您正在使用的线程或它们在做什么，您可以通过创建一个 tcp 服务器套接字轻松测试这一点，该套接字将阻塞直到客户端连接然后终止应用程序，没有任何反应，没有中断异常引发或任何事情，因为VM实例本身被杀死。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-30T19:28:40.950

这真的取决于杀戮的方法。撞车致死？所有线程都停止在它们所在的位置。由于看门狗定时器而杀死？无论他们在哪里，所有线程都被杀死。由于用户关闭活动而被杀？活动/线程将完成他们正在做的事情。基本上，你不能指望它，但它可能会发生。如果您担心由于关闭而导致数据损坏，则需要使用事务模型。

# ruby-on-rails - Heroku 推送被拒绝，无法编译 Ruby/disabledeploys 应用程序

> ID：14611894
> 
> 赞同：1
> 
> 时间：2013-01-30T19:13:53.080
> 
> 标签：ruby-on-rails, ruby, git, heroku, master

我被邀请作为部署在 Heroku 中的 Rails 应用程序的合作者。我克隆了应用程序，进行了一些更改，然后提交到 git 并尝试推送到 Heroku，但我收到了该错误消息。

关于这个“Ruby/disabledeploys 应用程序”的任何想法？我已经尝试用谷歌搜索它但没有运气..

`git push heroku master`我在命令后收到的完整消息：

```
-----> Ruby/DisableDeploys app detected
!
!     Ruby deploys have been temporarily disabled. We will have more information 
available shortly, including a workaround.
!
!     Heroku push rejected, failed to compile Ruby/disabledeploys app

To git@heroku.com:salty-temple-5503.git
! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:salty-temple-5503.git' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:17:51.483

您可以查看 heroku 状态页面以获取更多信息，该页面位于：http: [//status.heroku.com](http://status.heroku.com)

此处详细介绍了此特定事件： [https ://status.heroku.com/incidents/489](https://status.heroku.com/incidents/489)

Heroku 禁用部署是因为 ruby​​gems.org 已被入侵。您可以在这里获得更多信息：http: //news.ycombinator.com/item?id= [5139583](http://news.ycombinator.com/item?id=5139583)

（在 ruby​​gems.org 域上直接有一个状态/新闻页面，但它现在返回 404。）

# javascript - 谷歌分析：跟踪链接点击需要延迟？

> ID：14611899
> 
> 赞同：5
> 
> 时间：2013-01-30T19:14:01.057
> 
> 标签：javascript, google-analytics

我们正在尝试跟踪我们页面上的各种点击事件，以了解用户如何浏览我们的网站。

可以通过不同的链接到达给定的页面（例如，通过原始页面顶部的链接与页脚中的链接）。出于这个原因，仅仅跟踪目标页面的加载是不够的。我们需要标记和跟踪点击事件。

Google Analytics[文档](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1136920)建议为点击“出站链接”添加 100 毫秒的延迟，以便在加载链接目标之前完成跟踪代码。这是因为`_gaq.push(['_trackEvent', category , action])`代码是异步的，并且在页面被卸载之前需要时间来完成？

如果是这样，“现场”链接是否也需要这样做？我看不出这与指向同一站点上新页面的链接有何不同；在这两种情况下，当前页面都被卸载。

**编辑**：我已经发现了谷歌[`hitCallback`](https://stackoverflow.com/a/12461558/93995)通过回调触发页面加载事件的机制。这消除了使用延迟的需要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T22:18:47.130

任何需要在新页面之前完成的跟踪都应该包含轻微的（< 200 毫秒）延迟。异地、现场、表单提交等。这允许完成对分析服务器的请求。

至于内部链接跟踪，您是否查看过 In-Page Analytics 报告和[增强的链接属性](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2558867)插件？它可以帮助你一点，而不需要做额外的编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-06T17:27:46.557

谷歌分析[`hitCallback`](https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#hitCallback)为这种情况提供了一个钩子。

但是，在某些情况下事件不会触发，因此最好使用延迟添加回退重定向。

```
// Pretend that all of this preceding code
// is within a link's click handler.
var _this = this;
var eventHit;

ga('send', 'event', 'Outbound Links', 'click', _this.href, {
  hitCallback: function () {
    eventHit = true;
    document.location = _this.href;
  }
});

// Set delayed fallback to your liking. This example is 1 second.
setTimeout(function () {
  if (!eventHit) {
    document.location = _this.href;
  }
}, 1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-03T11:53:41.607

不要延迟点击。即使是 250 毫秒的延迟也不能保证成功跟踪。如果目标网址在您的域内，只需将跟踪信息存储在 local.storage 上，并检查每个页面是否有存储内容，并在页面加载时触发点击按钮的 ga 事件。您还应该验证客户端上是否有可用的 local.storage，如果没有，您可以在这些情况下使用点击延迟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-24T03:31:13.677

这是创建延迟的Jquery：

```
$("a").click(function (e) {        
    e.preventDefault(); //cancel the link click
    var url = $(this).attr('href');//get the destination url of the link        
    _gaq.push(['_trackEvent', 'Links', 'Clicked', 'Buy']); //do your tracking
    //go to the original destination url after a delay
    setTimeout(function () { window.location.href = url; }, 250); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-18T12:39:30.367

是的，需要延迟以确保在重新加载页面之前完成 GA 请求。

下面是实现跟踪和延迟的 Vanilla JS 代码：

```
document.getElementById('ID').addEventListener('click', function(event) {
    event.preventDefault();
    _gaq.push([ '_trackEvent', 'category', 'action', 'label' ]);
    setTimeout( function() {
        document.location = event.target.href;
    }, 200);
}); 
```

# c - 使用 UNIX 管道进行进程同步饥饿

> ID：14611901
> 
> 赞同：1
> 
> 时间：2013-01-30T19:14:14.493
> 
> 标签：c, unix, synchronization, pipe

通过使用 UNIX 管道进行进程同步，我们是否会陷入饥饿？例如：

```
void pipesem_wait(struct pipesem *sem)
{
    char onebyte = 'A';
    if ( read( sem->rfd, &onebyte, sizeof( onebyte ) ) != sizeof( onebyte ) ) {
        perror( "read from pipe" );
        exit( 1 );
    }
} 
```

这就是我们从管道中读取的方式。当多个进程想要从该管道中读取时，是否确定所有请求都将以特定（例如 FIFO）顺序处理，或者甚至可能永远不会发生仍有可能饥饿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:28:38.263

您无法保证许多读取进程中的哪一个会读取数据，但您可以保证其中有一个会读取每个字节。管道实际上只是内核内部的一个共享缓冲区，具有不同的文件句柄来读取和写入它 - 如果多个进程共享这些句柄，则由调度程序决定哪个进程获取数据。

因此，如果您的意思是饥饿，因为一个或多个进程不会读取任何数据，那很有可能 - 如果数据写入速度足够慢，以至于一个进程可以像写入一样快地消耗它，那么其他进程可能看不到任何数据数据。另一方面，它可能会在所有进程中循环——它只取决于调度是如何发生的。您不能依赖任何一种情况，并且行为可能取决于 Unix 风格，甚至该风格的版本和运行它的硬件。

但是，您可以依赖所有被消耗的数据而不会丢失任何数据，并且您可以依赖以 FIFO 顺序读取的数据。然而，想象一下，一个写入`"ABC"`完成，进程 1 读取它，然后一个写入`"DEF"`完成，进程 2 读取它。无法保证这些进程将被调度，使得进程 1 在进程 2 之前完成其输入的处理。因此，虽然从管道读取数据的顺序是 FIFO，但之后又取决于进程的调度方式。

正如下面的第一个评论者指出的那样，还值得一提`write()`的是，只要您写入`PIPE_BUF`的数据价值低于数据（例如，在我的 Linux 系统上是 512 字节 - 检查`limits.h`您的等价物），对管道的调用就是原子的。这保证了数据块不会与来自任何其他进程写入同一管道的数据交错。如果超出此限制，则标准不会指定是否`write()`是原子的。还要记住，对于大数据块，您可能会得到部分写入，您应该始终处理。有关更多信息，请参阅[评论者链接的 SO 问题和答案](https://stackoverflow.com/questions/4669710/atomic-write-on-an-unix-socket)。

但是，您似乎一次读取一个字节的数据，所以我推测您一次只写入一个字节并将其用作某种进程同步机制。您可能想考虑将共享内存与 pthreads 条件变量一起使用，这可能是实现相同目标的一种更优雅的方式 - 我有一些旧的演示代码，我已将其[放在此处](http://www.andy-pearce.com/wiki/doku.php?id=notes:sharing_pthreads_primitives_between_processes)。

*注意：如果可移植性对您很重要，那么您可能希望坚持使用管道 - 我怀疑它们更有可能在最广泛的平台上工作。pthreads 方法应该是相当可移植的，但共享内存可能要少一些。*

简而言之，如果您使用它从池中唤醒工作进程并且您不关心使用哪个进程，则管道可以作为 IPC 机制正常工作。但是，如果您希望唤醒特定进程，则需要为每个工作人员使用管道或其他机制。例如，使用 pthreads 条件变量，您可以*通过*调用`pthread_cond_broadcast()`而不是`pthread_cond_signal()`.

这是否回答你的问题？

# c++ - 调试 Prime 程序

> ID：14611904
> 
> 赞同：0
> 
> 时间：2013-01-30T19:14:29.887
> 
> 标签：c++, primes

我正在开发这个程序来确定一个数字是否是素数。编译时我没有收到任何错误，但输出不正确。谁能告诉我出了什么问题（以及如何解决？）？

```
#define PROMPT "Please enter a whole number: "
#define NOT_PRIME "The number is not a prime number! "
#define PRIME "The number is a prime number "
#define DONE 0
#define FIRST_FACTOR 3

using std::cout;
using std::cin;

int main(){
   int i;
   char number;

   cout << PROMPT;
   cin >> number;

 for (i=FIRST_FACTOR; i<=number; i++){
        prime = true;
        for (int n=2; n<=i-1; n++){
           if (i%n == 0){
              prime = false;
           }
        }
        if(prime){
           cout << number <<  PRIME << endl;
        }
        else{
           cout << number <<  NOT_PRIME << endl;
        }
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:19:04.103

最大的问题是您的程序总是`number`在应该打印的时候打印`i`。

```
 if(prime){
       cout << i <<  PRIME << endl;
    }
    else{
       cout << i <<  NOT_PRIME << endl;
    } 
```

另一个问题是您声明`number`为`char`而不是`int`.

除此之外，您的程序正在运行（[指向 ideone](http://ideone.com/6yp2Ot)的链接），但不是最佳的。

为了使其达到最佳状态，请考虑以下更改（按照挑战增加的顺序）：

*   不要测试偶数是否为素数：在循环结束时打印另一条消息，说明`i+1`不是素数，并增加`i`2。
*   当你达到候选的平方根时停止：换句话说，而不是`n<=i-1`在`for`循环中写`n*n <= i`
*   存储到目前为止找到的素数列表；而不是测试从`2`到的所有可能因素`sqrt(i)`，只测试您已经找到的素数。
*   考虑切换到[更高级的算法来寻找素数](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:25:57.760

你的问题是：

*   number 应该是 int 或 unsigned int。
*   第二个 for 循环没有意义。
*   你的控制流很复杂，让它更简单。

这是我认为的解决方案应该是这样的：

```
#include <iostream>

int main() {
    std::cout << "Please enter a whole number: " << std::endl;
    unsigned int number;
    std::cin >> number;

    for (unsigned int i = 2; i * i < number; i++) {
        if(number%i == 0) {
            std::cout << "The number is not a prime number! " << std::endl;
            return 0;
        }

    }

    std::cout << "The number is a prime number " << std::endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:24:20.843

我假设您应该循环两次以继续询问新条目，直到它们输入 0。

```
#define PROMPT "Please enter a whole number: "
#define NOT_PRIME " is not a prime number! "
#define PRIME " is a prime number "

using std::cout;
using std::cin;

int main(){

   int number;
   bool prime;

   while (true)
   {
      prime = false;

      cout << PROMPT;
      cin >> number;

      if (number == 0) break;

      int MaxPossibleFactor = (int)(sqrt(number) + 1);

      if ((number % 2) == 0)
      {
         prime = true;
      }
      else
      {
         for (int i=3; i<=MaxPossibleFactor; i += 2)
         {
            if ((number % i) == 0)
            {
               prime = true;
               break;
            }
         }
      }

      if (prime)
      {
         cout << number << PRIME << endl;
      }
      else
      {
         cout << number << NOT_PRIME << endl;
      }
   }

   return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T19:18:44.323

我不确定你为什么在代码中循环两次你可以将它更改为类似

```
if (number % 2 == 0) prime = false;

for (i = 3; i <= sqrt(number) && prime; i+=2)
    if (number % i == 0) prime = false; 
```

意识到一个数字的最高除数（可以将它平均除）等于它的平方根，所以你不需要检查更多。

# c# - 如何创建连续的命名文件

> ID：14611919
> 
> 赞同：0
> 
> 时间：2013-01-30T19:15:05.953
> 
> 标签：c#, winforms, visual-studio-2010

我需要`files.txt`使用`10 lines`和 之类的名称进行创建`10FRE001 then 10FRE002`，知道吗？我该怎么做？如何检查是否已经有 10 行以及如何将名称从`10FRE001`to递增`10FRE002`？要检查是否已经有 10 行，我想使用`int counter++;`我会看到的...但是我不知道如何使用文件名...有什么提示吗？谢谢大家

这是我到目前为止的代码，它读取和写入一个新的文本文件，但我不知道如何更改文件的名称......

```
string conteudo="";
int numeroLinhas=0;

using(var writer=new StreamWriter(Txt_DestinoPath.Text, true))
using(var reader=new StreamReader(Txt_OrigemPath.Text)) {
    while(reader.ReadLine()!=null)
        numeroLinhas++;

    string oi=numeroLinhas.ToString();

    writer.WriteLine(oi);
    int contador=0;

    for(int i=0; i<numeroLinhas; i++) {
        if(contador<9) {
            contador++;
            writer.WriteLine(@"\campo0"+contador+@"\");
        }
        else {
            contador++;
            writer.WriteLine(@"\campo"+contador+@"\");
        }
    }
}

using(var sw=new StreamWriter(Txt_DestinoPath.Text, true))
using(var sr=new StreamReader(Txt_OrigemPath.Text))
    while((conteudo=sr.ReadLine())!=null) {
        // Tira asteriscos,remove valor vazio, insere barras 
        string[] teste=conteudo.Split(new[] { '*' }, StringSplitOptions.RemoveEmptyEntries);

        var noEmptyParts=
            teste
                .Where(p => !String.IsNullOrWhiteSpace(p))
                .Skip(2)
                .Select(p => String.Format("\\{0}\\", p.Trim()))
                .ToArray<String>();

        string resultado=String.Join("", noEmptyParts);

        if(Txt_DestinoPath.Text==""||Txt_DestinoPath.Text==string.Empty) {
            MessageBox.Show("Nenhum Caminho de Origem Escolhido.");
            return;
        }

        // Cria novo arquivo txt                
        sw.WriteLine(resultado);
    } 
```

上面计数器的结果是：`\campo01\, \campo02\, \campo03\ .... \campo10\, \campo11\ ...`

我需要更改的名称我会放在上面

```
Txt_DestinoPath.Text + FileThatIneedToIncrement,true) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:21:29.223

要做 10FRE001, 10FRE002, ... 命名你可以试试这个：

```
for(int i = 0; i<10; i++)
{
    string fileName = string.Format("10FRE{0:D3}",i);
    // other codes
} 
```

看看[这个](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)，还有[这个](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

# javascript - 访问 swig 模板中的最后一个数组元素

> ID：14611921
> 
> 赞同：2
> 
> 时间：2013-01-30T19:15:13.517
> 
> 标签：javascript, twig, swig-template

我有一个数组：

```
product.paths = [ text: 'hello', text: 'world' ] 
```

如何访问 swig 模板标签中的最后一个元素？

这个元素：

```
{{ product.paths[1].text }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:59:51.357

我不熟悉 swig，但 twig 有最后一个过滤器，它给出了数组的最后一个元素。 [http://twig.sensiolabs.org/doc/filters/last.html](http://twig.sensiolabs.org/doc/filters/last.html)

您是否尝试过类似下面的方法？

```
{{ product.paths|last }} 
```

编辑：我刚刚在 github 项目上查看了 swig 的过滤器列表，它确实有一个最后一个过滤器，所以上面应该可以工作。[https://github.com/paularmstrong/swig/blob/master/lib/filters.js](https://github.com/paularmstrong/swig/blob/master/lib/filters.js)

EDIT2：如果它是一个多维数组，您可以尝试将变量设置为最后一个元素，然后对其执行任何进一步的操作。

```
{% set last_element = product.paths|last %}
{{ last_element.text }} 
```

# javascript - 通过javascript和回发启用ListBox中不正确的选定项

> ID：14611922
> 
> 赞同：1
> 
> 时间：2013-01-30T19:15:13.133
> 
> 标签：javascript, asp.net, vb.net, postback

这很奇怪。我有一个javascript函数来启用加载时禁用的列表框。这个 javascript 函数可以很好地启用或禁用列表框。但是用户点击保存按钮后，并没有得到新的选中项；始终通过数据绑定保留旧的选定项目。我检查了页面加载时的 isPostback。如果不是 isPostback，则不会再次加载列表框。有人会给我解决这个问题的提示吗？提前谢谢。

```
function enableProject() {           
    var chk=document.getElementById('chkProject');
if (chk.checked) {
    document.getElementById('listProject').disabled = false;
     }
else {
         document.getElementById('listProject').disabled = true;
     }
} 
```

有我的 asp.net 页面

```
<asp:ListBox id="listProject" runat="server"
    SelectionMode="Multiple" Rows="5" class="w200"  Enabled="false"/>
<asp:checkbox id="chkProject" runat="server"
    Text="Enable" onclick="enableProject()" /> 
```

以下代码用于检查`ListBox`：

```
For Each projectItem In listProject.Items
    If projectItem.Selected Then
        'create a new project object
        Dim objProj As New Data.Project( ID, projectItem.Value)
        objProjects.Add Project(objProj)
    End If
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:17:54.990

首先要检查的是我们没有在每次回发时“重新绑定”。如果你是那将解释为什么你得到你开始的东西。你能把你的代码贴在你绑定的地方`ListBox`吗？

如果控件在回发时被禁用，则它不会发布“新”值，并且只会脱离 ViewState 最初为控件存储的内容，因此请确保在回发之前确实启用它。

这是该行为示例的链接：

[http://aspnet.4guysfromrolla.com/demos/ProblemNotReturningDisabledControls.aspx](http://aspnet.4guysfromrolla.com/demos/ProblemNotReturningDisabledControls.aspx)

如果您想测试这是否是问题，请在您的表单标签中设置以下属性，这将强制回发禁用的控件：

```
<form id="form1" submitdisabledcontrols="true" runat="server"> 
```

# python - 向 NDB 中的模型添加 StructuredProperty

> ID：14611923
> 
> 赞同：1
> 
> 时间：2013-01-30T19:15:18.123
> 
> 标签：python, google-app-engine, app-engine-ndb

（想不出更好的标题：S）

因此，我最近从 db 更改为 ndb，但我无法让其中一部分工作。我有这个有章节的教程模型，所以我使用“ndb.StructuredProperty”将模型章节与教程相关联。我可以毫无问题地创建教程和章节，但我不能将章节指向教程。

教程模型：

```
class Tutorial(ndb.Model):
    title = ndb.StringProperty(required=True)
    presentation = ndb.TextProperty(required=True)
    extra1 = ndb.TextProperty()
    extra2 = ndb.TextProperty()
    extra3 = ndb.TextProperty()
    tags = ndb.StringProperty(repeated=True)
    votes = ndb.IntegerProperty()
    created = ndb.DateTimeProperty(auto_now_add=True)
    last_modified = ndb.DateTimeProperty(auto_now=True)
    chapters = ndb.StructuredProperty(Chapter, repeated=True) 
```

编辑类：

```
class EditTut(FuHandler):
    def get(self):
        ...
        ...

    def post(self):
        editMode = self.request.get('edit')

        if editMode == '2':
            ...
            ...

        elif editMode == '1':
            tutID = self.request.cookies.get('tut_id', '')
            tutorial = ndb.Key('Tutorial', tutID)
            title = self.request.get("chapTitle")
            content = self.request.get("content")
            note = self.request.get("note")

            chap = Chapter(title=title, content=content, note=note)
            chap.put()
            tutorialInstance = tutorial.get()
            tutorialInstance.chapters = chap
            tutorialInstance.put()

            self.redirect('/editTut?edit=%s' % '0')
        else:
            self.redirect('/editTut?edit=%s' % '1') 
```

使用此代码创建教程，但我收到此错误：

```
tutorialInstance.chapters = chap
AttributeError: 'NoneType' object has no attribute 'chapters' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:09:13.970

你似乎很困惑。使用`StructuredProperty`时，包含的对象没有自己的 ID 或键——它只是外部对象中具有有趣名称的更多属性。也许您希望将本书与其章节重复`KeyProperty` *链接，而不是将所有章节都包含**在*书中？你必须选择其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:19:18.627

更新：在@nizz 的帮助下，改变

```
tutorialInstance = tutorial.get()
tutorialInstance.chapters = chap 
```

到：

```
tutorialInstance = ndb.Key('Tutorial', int(tutID)).get()
tutorialInstance.chapters.append(chap) 
```

完美地工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T20:45:19.537

您正在处理一个列表...您需要将对象附加到列表中

```
tutorialInstance.chapters.append(chap) 
```

# jquery - 如何捕捉悬停在 div 元素上？

> ID：14611924
> 
> 赞同：0
> 
> 时间：2013-01-30T19:15:18.610
> 
> 标签：jquery

我有一个`div`, `div`, `img`, `a`,元素`h3`。`input`它们动态变化（轮播）。所以我需要停止`setInterval`在悬停时提供此更改，但它不起作用（`hover`事件不会触发）。

```
jQuery('div.slider').on('hover', 'div, img, a, h3, input',
//Tried jQuery('body').on('hover', 'div.slider'...
//Alsro tried on('focusin focusout')
    function(event){
        console.log('on');
        if(event.type === 'focusin'){
            console.log(event.type);
            stopCarousel();
        }
        else if(event.type === 'focusout'){
            console.log(event.type);
            startCarousel();
        }
    }
); 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:19:04.603

`.hover()`, 是一个函数而不是一个事件，它使用`mouseenter`，`mouseleave`所以它肯定不会有一个匹配 focusin 或 focusout 的类型。我只是这样做：

```
$('div.slider').on({
    mouseenter: function() {
        stopCarousel();
    },
    mouseleave: function() {
        startCarousel();
   }
}, 'div, img, a, h3, input'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:20:21.633

```
$('.slider').mouseenter(function (event) {
    console.log(event.type);
    stopCarousel();
});

$('.slider').mouseleave(function (event) {
    console.log(event.type);
    startCarousel();
}); 
```

参考：[http](http://api.jquery.com/mouseleave/) ://api.jquery.com/mouseleave/和[http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T19:17:15.560

我认为您正在寻找的事件不是`hover`但是`mouseover`。

在纯 Javascript中不`hover`存在任何事件。`mouseover`悬停是开始悬停并`mouseout`停止悬停事件的结论。在你的情况下`mouseover`应该是你正在寻找的事件。

# javascript - 跨域 cookie 不起作用

> ID：14611925
> 
> 赞同：0
> 
> 时间：2013-01-30T19:15:23.047
> 
> 标签：javascript, cookies, browser

我正在尝试从 A.com 中的 B.com 读取 cookie

为了解决这个问题，我添加了一个**从 B.com 加载**`script tag`的in A.com 。这个 B.com 脚本是我需要的 cookie 的回显。**`PHP`**

 ***B.com/script.php*

```
<? echo 'var mycookie="'.$_COOKIE['myBdotComCookie'].";";?> 
```

*A.com 页面：*

```
...
 <script src="http://B.com/script.php">
 ... 
```

*附加信息：myBdotComCookie 域是 B.com*

## 问题

这在 iOS Chrome 上运行良好，但在 Linux 或 Win Chrome 上不行。

## 问题

这种技术是错误的还是 iOS Chrome 有错误或 Linux 和 Win Chrome 有错误？

**更新**：

在 FF 上也可以正常工作，但不能在 IE8/9 上工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:33:21.490

如今，越来越多的浏览器阻止了第三方 cookie。您不能再将它们真正用于任何需要可靠的事情。原因是第三方 cookie 可用于监视用户的浏览历史。您可以随时在浏览器隐私设置中禁用它们。大多数浏览器默认情况下不会这样做，但例如 Safari 会这样做。显然 Chrome 上的一些版本也是如此。

如果您需要从不同域的站点可靠地获取一些数据，您应该查看 jsonp 请求。它们由 jquery 抽象，因此您可以使用与 ajax 调用相同的 api 来执行它们。**

# jquery - 如何获取 web listview 剑道 ui 的项目

> ID：14611926
> 
> 赞同：0
> 
> 时间：2013-01-30T19:15:23.067
> 
> 标签：jquery, listview, kendo-ui

我想知道如何在 kendo ui web 中获取 listview 项。

这是我的代码，

```
var listView = $("#listView").data("kendoListView");
var children = listView.items()[1];
children.css({backgroundColor : "green"}); 
```

当 U 使用 var`children = listView.items();`时，它适用于 all `listview`。

我怎样才能让它影响一些特定的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:56:38.007

代替

```
children.css({backgroundColor : "green"}); 
```

做

```
$(children).css({ backgroundColor: "red"}); 
```

Children 是一个数组或 HTML 元素，没有名为 的函数`css`。`children`这是 jQuery 提供的功能，所以需要将`$()`.

# javascript - 使用 javascript 预加载 HTML 下拉菜单

> ID：14611930
> 
> 赞同：0
> 
> 时间：2013-01-30T19:15:29.243
> 
> 标签：javascript, html, forms

我想用从 Servlet 获得的数据预加载一个下拉菜单。这就是我的代码目前的样子：

```
<script>
var method = ${method};
</script>

<script type="text/javascript">

  function PreselectMyItem(value)
  {
    // Get a reference to the drop-down
    var myDropdownList = document.form.select;

    // Loop through all the items
    for (iLoop = 0; iLoop< myDropdownList.options.length; iLoop++)
    {    
      if (myDropdownList.options[iLoop].value == value)
      {
        // Item is found. Set its selected property, and exit the loop
        myDropdownList.options[iLoop].selected = true;
        break;
      }
    }
  }
</script>

<body onload="init(jsonData); PreselectMyItem(method)">

<div>
            <div id="header">
            <form method="post" action="Servlet" id="form" name="form">
            <table border=0 width=100%>
            <tr>
            <td><select name="method" id="select">
                    <option value="AllDocs">AllDocs</option>
                    <option value="TermTerm">TermTerm</option>
                    <option value="DocsDocs">DocsDocs</option>
                </select></td>
            </tr>
                    </table>
             </form>
             </div>
</div></body> 
```

该值似乎已正确传输，但未在下拉菜单中选择。

```
<script>
var method = TermTerm;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:18:34.137

你的`method`变量应该是一个字符串：

```
var method = "${method}"; 
```

# python - 循环中的插槽连接数很少

> ID：14611931
> 
> 赞同：1
> 
> 时间：2013-01-30T19:15:40.113
> 
> 标签：python, qt, pyqt, pyside

我创建了几行。每行包含复选框和组合框。我希望 chechbox 启用\取消组合框。但如果我以这种方式绑定插槽，它总是启用\禁用列表中的最后一个组合框。如何使每个复选框与下一个组合框一起使用？我是 Qt\PySide 的新手。这是简化的代码：

```
 for i, feature_name in zip(xrange(data_set.n_features), data_set.feature_names):
        rowLayout = QtGui.QHBoxLayout()
        featureLabel = QtGui.QLabel()
        active_checkbox = QtGui.QCheckBox()
        input = QtGui.QSpinBox()
        self.feature_inputs.append(input)
        def abc(state):
            self.feature_inputs[i].setEnabled(state == Qt.Checked)
        active_checkbox.stateChanged.connect(abc)
        rowLayout.addWidget(active_checkbox)
        rowLayout.addWidget(input)
        rowLayout.addWidget(featureLabel)
        self.ui.features_layout.addLayout(rowLayout) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:00:49.557

你在寻找这样的东西吗？

```
import sys

from PySide.QtCore import *
from PySide.QtGui import *

class Main(QWidget):

    def __init__(self):
        super(Main, self).__init__()
        layout = QVBoxLayout(self)
        for x in xrange(3):
            layout.addLayout(CheckComboGroup())

class CheckComboGroup(QHBoxLayout):

    def __init__(self, parent=None):
        super(CheckComboGroup, self).__init__(parent)

        self.checkBox = QCheckBox()
        self.checkBox.clicked.connect(self.handleComboBox)

        self.comboBox = QComboBox()

        self.addWidget(self.checkBox)
        self.addWidget(self.comboBox)

    def handleComboBox(self):
        self.comboBox.setDisabled(self.comboBox.isEnabled())

app = QApplication([])
main = Main()
main.show()
app.exec_() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:05:57.403

与 PySide 相比，Python 中的范围更是如此。变量 i 定义在 abc 函数之外的范围内。您的每个 abc 函数都使用相同的变量。该变量最终具有最后一次循环的值，这就是复选框总是切换最后一个旋转框的原因。您需要类似以下内容来确保为每个 abc 函数创建一个单独的索引变量：

```
def abcmaker(ind):
    def abc(state):
        self.feature_inputs[ind].setEnabled(state == Qt.Checked)
    return abc
active_checkbox.stateChanged.connect(abcmaker(i)) 
```

# perl - 我正在尝试使用 perl 脚本在 HTTP 响应中将 HTML 部分作为块发送，但出现编译错误

> ID：14611933
> 
> 赞同：0
> 
> 时间：2013-01-30T19:15:48.360
> 
> 标签：perl, chunked-encoding, http-chunked, nph

以下是我用来将 HTML 页面作为分块响应发送的脚本的一部分。但是，在运行脚本时会引发编译错误，例如：

在 nph-99_1_1_18.pl 第 19 行，靠近“print”233“（可能是从第 18 行开始的失控的多行“”字符串）处找到操作员预期的数字

```
#! /usr/bin/perl

print "HTTP/1.1 200 OK\n";
print "Connection: Close\n";
print "Content-type:text/html\n" ;
print "Transfer-Encoding:chunked\n\n" ;
print "96\r\n";
print <<EndText;
<html>
  <!-- this chunk is 150 bytes in length-->
  <head>
         <title>Document Title</title>
  <link REL="StyleSheet" TYPE="text/css" HREF="example.css">
  </head>

<body>
EndText
print "\r\n\";
print "233\r\n";
print <<EndText;
<!-- this chunk is 563 bytes in length-->
<h1 CLASS="funkyclass" ALIGN="center">Welcome to my home page!</h1>
  <br><br>
<p>Hi there! If you are reading this then you have found my home page!  Congratulations! I know it can be hard to find my pages, but I bet that you feel lucky now. Now that you are here, please take a look at my page of links to <a HREF="http://www.mysite.com/coolsites.html">cool sites</a> or sign my <a HREF="http://www.mysite.com/guestbook.html">guest book</a></p>
<div CLASS="foo"> My wonderful poetry <br> is available if you are REALLY bored. Why not give it a spin?</div>
EndText
print "\r\n\"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:18:07.850

`\`你的一个陈述中有一个间接的反对`print`意见。还有一个你也复制了那条线。它转义了关闭`"`，因此它之后的所有内容都被解释为字符串。

```
<body>
EndText
print "\r\n\"; # <--- HERE (and also further down)
print "233\r\n"; 
```

您是否使用具有语法突出显示的编辑器/IDE 编写代码？打开它并使琴弦伸出。这样，它会在`"`作为字符串转义后突出显示您的所有内容，并且您不会再次忽略这一点。

此外，您应该`use strict`和`use warnings`。

# jquery - jQuery DataTable 按键

> ID：14611935
> 
> 赞同：5
> 
> 时间：2013-01-30T19:16:17.217
> 
> 标签：jquery, datatable, keydown

我无法使用 JQuery DataTable 捕获 keydown 事件。我的目标是允许用户使用箭头键导航表格的行。因此，当用户按下箭头键时，我想捕获 keydown 事件并移动表的选定行（这是我使用选定行的类在数据表外部跟踪的内容）。但是，我似乎无法捕捉到 keydown 事件。

例如，下面的代码不起作用：

```
$('#myTable tbody').keydown(function (event){...}); 
```

我的想法是问题是表没有焦点，但也许这是错误的路径。例如，即使我添加以下内容，我也不会使用上面的代码捕获 keydown 事件：

```
 $('#myTable tbody').click(function(e){ $('#myTable tbody').focus();}); 
```

我可以用 $(document) 捕捉 keydown ，但这是不可取的。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T23:22:18.297

这是一个可行的解决方案...可以稍微清理一下代码（并且存在错误，例如没有限制检查），但效果就在那里：

[http://jsfiddle.net/BLSully/Xdkea/](http://jsfiddle.net/BLSully/Xdkea/)

“键”为表格提供了一个 tabindex，因此它变得“可聚焦”。它不需要为零，但它需要是“某物”，以便按键事件对其起作用

```
<table id="myTable" tabindex=0>
    <tbody>
        <tr><td>Row 1</td></tr>
        <tr><td>Row 2</td></tr>
        <tr><td>Row 3</td></tr>
        <tr><td>Row 4</td></tr>
        <tr><td>Row 5</td></tr>
    </tbody>
</table> 
```

JavaScript：

```
$(function(){
    var focusedRow = null;
    $('#myTable').on('keydown', function(ev){
        console.log(ev.keyCode);
        if(focusedRow == null) {
            focusedRow = $('tr:nth-child(1)', '#myTable');
        } else if(ev.keyCode === 38) {
            focusedRow.toggleClass('focused');
            focusedRow = focusedRow.prev('tr');
        } else if(ev.keyCode === 40) {
            focusedRow.toggleClass('focused');
            focusedRow = focusedRow.next('tr');
        }
        focusedRow.toggleClass('focused');
    });
    $('#myTable').focus();
}); 
```

# knockout.js - 使用变量存储剔除模板

> ID：14611936
> 
> 赞同：2
> 
> 时间：2013-01-30T19:16:19.293
> 
> 标签：knockout.js, mustache, knockout-2.0, templating

到目前为止，对淘汰赛的新手和喜爱它把一个 700 行的 jQuery 乱七八糟的东西剪成了 150 行。我不太喜欢的一个部分是模板。我希望能够创建一个类似的文件

```
module.ViewModel.views = {
   'view1' : '<div data-bind="foreach: data">TEMPLATE</div>'
};

// in my view model set something like 
ViewModel.view1Template = module.ViewModel.views.view1;

// then in my html have
<div data-bind="template: view1Template()"></div> 
```

如果这很重要，我希望能够用小胡子来做到这一点，但实际上我只是想为我的模板添加可重用性，而不是让 ID 直接在 html 中引用它们。我想这样做的另一个原因是在我的视图文件夹中，我有其他使用小胡子但不淘汰的模板希望在所有 JS 模板中保持我的格式一致。

## 更新

下面的答案似乎是目前最接近我想做的事情我做了略有不同

```
for (var view in module.views){
    var node = $("<script/>", {
        "type" : "text/html",
        "id" : view,
        "text" : module.views[view]
    }).appendTo("body");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:30:39.600

您可以将元素动态插入到 DOM 中，然后应用 ko 绑定：

```
var html = $.parseHtml(module.ViewModels.views['view1'])[0];
ko.applyBindings(model, html);
$('#content').append(html); 
```

## 现场演示

[http://jsfiddle.net/bikeshedder/VHUcF/](http://jsfiddle.net/bikeshedder/VHUcF/)

* * *

我刚刚意识到我可能只回答了你问题的一半。可悲的是，模板绑定处理程序只接受一个`element id`as 参数而没有元素。然而，这很容易通过在应用绑定之前将模板添加到 DOM 来解决：

## HTML

```
<script id="templates" type="text/html"></script>

<div id="content" data-bind="template: templates.answerList.id"></div> 
```

## JavaScript

```
var templates = {
    answerList: '<ul class="answer-list" data-bind="template: { name: templates.answer.id, foreach: answers }"></ul>',
    answer: '<div class="answer" data-bind="text: text"></div>'
};

// insert templates into DOM
for (var name in templates) {
    var html = templates[name];
    var element = document.createElement('div');
    $(element).append($.parseHTML(html)[0]);
    element.id = 'tpl_' + name;
    $(element).attr('id', element.id);
    templates[name] = element;
    $('#templates').append(element);
}

answerModel = {
    answers: [
        { text: 1 },
        { text: 42 },
        { text: 667 }
    ],
    templates: templates
};

ko.applyBindings(answerModel, $('#content')[0]); 
```

## 现场演示

[http://jsfiddle.net/bikeshedder/VHUcF/1/](http://jsfiddle.net/bikeshedder/VHUcF/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:36:03.487

我只是想出了一个更好的解决方案来解决这个问题。它不再要求您在指定模板时添加“.name”。

## HTML

```
<script id="templates" type="text/html"></script>

<div id="content" data-bind="template: templates.answerList"></div> 
```

## JavaScript

```
var templates = {
    answerList: 'Answers: <ul class="answer-list" data-bind="template: { name: templates.answer, foreach: answers }"></ul>',
    answer: '<li class="answer" data-bind="text: text"></li>'
};

var templateIds = {};

for (var name in templates) {
    var id = 'tpl_' + name;
    $(document.createElement('div'))
        .append($.parseHTML(templates[name]))
        .attr('id', 'tpl_' + name)
        .appendTo('#templates');
    templateIds[name] = id;
}

answerModel = {
    answers: [
        { text: 1 },
        { text: 42 },
        { text: 667 }
    ],
    templates: templateIds
};

ko.applyBindings(answerModel, $('#content')[0]); 
```

## 现场演示

[http://jsfiddle.net/bikeshedder/VHUcF/3/](http://jsfiddle.net/bikeshedder/VHUcF/3/)

## 笔记

此尝试要求您传递`templates`as 模型属性或`templates`在全局范围内定义。你也可以只写`"tpl_"`+ ' 我觉得使用起来更自然。

```
<div data-bind="template: 'tpl_answers'"></div> 
```

如果您不想将`script`包含模板的元素放在 HTML 中，也可以从 JavaScript 中创建它。

# c++ - C++ 传递未初始化的变量

> ID：14611943
> 
> 赞同：2
> 
> 时间：2013-01-30T19:16:50.563
> 
> 标签：c++, runtime, initialization

当我到达网格的末尾时，我需要忽略 C++ 中未初始化的变量。

```
 pointMapIt++;
         float nextPointRow;
         if (pointMapIt != grid.points.end())
         {
             nextPointRow = 3.0;
             pointMapIt--;
         }

         if (point.dr != nextPointRow)
             //Do stuff 
```

pointMapIt 是一个通过我的网格点的迭代器。它每次迭代都会检查 nextPointRow。程序将在最后一次迭代时崩溃，因为 nextPointRow 尚未设置。

我无法将 nextPointRow 设置为`0.0`，因为`0.0`它是一个实际有效的输入。事实上，我真的无法知道 nextPointRow 会是什么。所以我真正需要的是能够（初始化 nextPointRow 并）检查 nextPointRow 是否为 NULL，如下所示：

```
 if (nextPointRow != null && point.dr != nextPointRow) 
```

有没有办法可以做到这一点或完全规避这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:18:23.413

最简单的可能是设置`nextPointRow`为[`NAN`](http://en.wikipedia.org/wiki/NaN).

或者，旁边有一个布尔标志`nextPointRow`，表明后者是否包含有效值。

另一种选择是重新排列您的代码，如下所示：

```
 pointMapIt++;
     if (pointMapIt != grid.points.end())
     {
         float nextPointRow = 3.0;
         pointMapIt--;
         if (point.dr != nextPointRow) {
             //Do stuff 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T19:23:31.593

您应该为此使用 Boost.Optional 之类的东西：

```
boost::optional<float> nextPointRow;  // initially unset

if (condition) { nextPointRow = 3.0; }
else           { ++pointMapIt;       }

if (nextPointRow && nextPointRow != point.dr) { /* stuff */ } 
```

`else`此外，您应该通过使用子句来避免迭代器不必要的反复。

# regex - 在文件名中插入字符

> ID：14611944
> 
> 赞同：3
> 
> 时间：2013-01-30T19:16:55.503
> 
> 标签：regex, unix, grep

我有一个目录，其中包含一堆标题为（例如）的文件

```
how it is:            how it should be:
945TITLE-1.txt        945TITLE-00.txt
945TITLE-10.txt       945TITLE-01.txt
945TITLE-2.txt        945TITLE-02.txt
945TITLE-23.txt       945TITLE-03.txt
945TITLE-3.txt        945TITLE-10.txt
945TITLE.txt          945TITLE-23.txt 
```

破折号字符后面的数字和文本可以更改，因此它需要是可变的。忽略未编号的文件（在本例中为 945TITLE.txt），我使用以下行来获取所有以破折号和单个数字结尾的文件

```
file=`ls -1 working/pages/files | grep [-][0-9].txt` 
```

但现在我无法弄清楚如何在破折号和数字之间拼接 0。

```
for file in $filelist
do  
????
done 
```

经过几次尝试后，我得到了最远的结果：

```
for file in working/pages/files/$filelist
do  
f1=${filelist%%[-]*}
f2=${filelist##*[-]}
finalName=${f1}-0${f2}
echo $finalName
mv $file working/pages/files/$finalName
done 
```

的输出`$finalName`是`945TITLE-03.txt`每次，它只将`mv`命令应用于`945TITLE-1.txt`（错误地将其更改为`945TITLE-03.txt`）并说它找不到其他文件（因为它只查找`working/pages/files/`第一个文件的文件夹）

任何帮助将不胜感激，我绝不会与此解决方案结婚，因此，如果您能想到一个更优雅的解决方案，但与我的建议不同，我将非常高兴听到它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:24:14.117

主意 ：

1.  逐行处理（例如 945TITLE-1.txt）
2.  首先用“-”分割（给出“945TITLE”和“1.txt”，）
3.  然后将第一个拆分的第二个输出拆分为“。” （给出“1”和“txt”）

    ```
    ls -1 | awk '{ 
             n=split($0, array , "-");
             if( n > 1 ) {
               printf("%s-",array[1]);
               split(array[2],arraydot,".");
               printf("%02d.%s\n", arraydot[1], arraydot[2]);
              } else {
               split(array[1],arraydot, "."); 
               printf("%s-00.%s\n",arraydot[1],arraydot[2]);
             }
          }' | sort 
    ```

    上述其他条件处理的情况`945TITLE.txt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:42:40.723

这个 awk-onliner 将起作用：（您可以先删除结尾`|sh`以检查生成的 mv 命令。）

```
ls -[your options] |awk  -F'-|\\.' 'NF<3{x=$0;sub(/\./,"-00.",x)}NF>2{x=sprintf ("%s-%02d.%s",$1,$2,$3)}{print "mv "$0" "x}' |sh 
```

我用文本文件模拟它。

```
kent$  cat test.txt
945TITLE-1.txt
945TITLE-10.txt
945TITLE-2.txt
945TITLE-23.txt
945TITLE-3.txt
945TITLE.txt

kent$  awk  -F'-|\\.' 'NF<3{x=$0;sub(/\./,"-00.",x)}NF>2{x=sprintf ("%s-%02d.%s",$1,$2,$3)}{print "mv "$0" "x}' test.txt
mv 945TITLE-1.txt 945TITLE-01.txt
mv 945TITLE-10.txt 945TITLE-10.txt
mv 945TITLE-2.txt 945TITLE-02.txt
mv 945TITLE-23.txt 945TITLE-23.txt
mv 945TITLE-3.txt 945TITLE-03.txt
mv 945TITLE.txt 945TITLE-00.txt 
```

如果将结果通过管道传输到 sh，就像`awk.....|sh`将执行那些 mv 命令一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T20:59:35.310

这是一个可以为您工作的 Perl 示例：

```
perl -E 'while(<*.txt>){ $a = $_; s/-\K\d\./0$&/ || s/\D\K\./-00./; rename $a, $_; }' 
```

没有测试过。;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T19:40:46.990

这是我在这里制作的一个简单示例，基于您的开始。有一些有趣的特殊外壳可以处理您的`945TITLE.txt`情况：

```
#!/bin/bash

for file in 945*
do
    suffix=${file##*[.]}
    base=$(basename ${file} .${suffix})
    prefix=${base%%[-]*}
    number=${base##*[-]}
    case ${number} in
        ''|*[!0-9]*) number=0 ;;
    esac
    echo ${prefix}-$(printf "%02d" ${number}).${suffix}
done 
```

# c# - 在 Expression Blend 中重命名 ControlTemplate

> ID：14611948
> 
> 赞同：0
> 
> 时间：2013-01-30T19:17:21.003
> 
> 标签：c#, wpf, silverlight, xaml, expression-blend

我们正在对一些 Flash 动画师进行 Expression Blend 培训。

引起他们注意的一件事是，一旦创建了 ControlTemplate，就无法从 UI 重命名它——我只看到如何在代码中进行，而 XML 让他们感到害怕。

这是一个屏幕截图：

![新模板](../Images/ca679d3ebc9b384b369e5c1d5408d6e9.png)

一旦您经过此屏幕，您选择的名称似乎无法在 Blend 的 UI 中更改。

我们正在使用[VS 2012 Blend+Sketchflow](http://www.microsoft.com/en-us/download/details.aspx?id=30702)预览，但我在 VS 2012 或 Blend 4 附带的 Blend 副本中也看不到如何操作。

有谁知道这是否可能？如果没有，Blend 是否有任何很酷的扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T19:25:14.170

查看“资源”选项卡。它将列出当前打开的文档范围内的所有资源，您可以从那里重命名。

右键单击 > 编辑，或双击资源的名称。

![在此处输入图像描述](../Images/af5e671a51b4f1c300042ecc450a5bac.png)

![在此处输入图像描述](../Images/1891a8bb5671d231ac815f2940f3584c.png)

# iphone - 在哪里自定义UITabBar？

> ID：14611950
> 
> 赞同：0
> 
> 时间：2013-01-30T19:17:32.750
> 
> 标签：iphone, objective-c, cocoa-touch, uitabbar

一个简单的问题，我正在对从情节提要加载的 UITabBar 进行一些 UI 自定义（更改色调颜色，为 tabBar 背景设置图像等）。我的问题是最好的地方是哪里，我不使用 IBOutlets 只是在情节提要中布置的对象。目前我正在使用`initWithCoder:`，但有人提到`awakeFromNib:`（这对我来说似乎不对）所以我只是想检查一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:33:00.923

`-awakeFromNib`*如果您确定将始终使用 nib 来加载*视图，那么它是一个完全可以接受的调用方法来设置视图样式的地方。但同样适用于使用`-initWithCoder`.

我最常使用`-awakeFromNib`有几个原因。首先，来自文档：

> nib 加载基础结构向从 nib 存档重新创建的每个对象发送 awakeFromNib 消息，但前提是存档中的所有对象都已加载和初始化。当一个对象收到一个 awakeFromNib 消息时，它保证已经建立了它的所有出口和动作连接。

目前，这对你来说并不重要，因为你没有接触任何出口。但过了一段时间，您可能最终会使用它们，很高兴看到您所有的自定义/设置工作都包含在一个方法中。

`-viewDidLoad`是另一种选择。当您想要支持以编程方式或从 nib 加载的视图时，非常适合设置/自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:23:12.463

我会：

*   完全以编程方式创建 UI 对象
*   或者在情节提要中创建 UI 对象，然后将 IBOutlets 连接到这些对象

然后在`initWithCoder:`方法中可以自定义UITabBar。

# r - 类似 R 中的 Excel 计算

> ID：14611951
> 
> 赞同：-5
> 
> 时间：2013-01-30T19:17:39.817
> 
> 标签：r

我得到了向量的两个第一个值。我想从前两个向量中计算下一个向量值。就像您在 excel 中所做的那样：用数字填充前两个单元格，在第三个单元格中写入公式，然后将其应用于其他单元格。但是，我想在没有循环的情况下做到这一点。

我想做的事：

```
x = c()
x[1] = 1
x[2] = 2
for (i in 3:10)
    x[i] = 2*x[i-1] - 0.5*x[i-2]

x

> x
 [1]   1.0000   2.0000   3.5000   6.0000  10.2500  17.5000  29.8750  51.0000
 [9]  87.0625 148.6250
> 
```

我想在计算当前值时使用向量的先前值，但不是我刚刚做的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T20:43:33.127

您可以找到该系列的第 i 个元素，而无需像这样循环：

```
roots <- polyroot( c(0.5, -2, 1) )
roots <- Re(roots)

k <- solve( rbind( 1, roots ), c(1,2) )

genfun <- function(n) {
    as.vector(k %*% roots^(n-1))
}

genfun(1)
genfun(2)
genfun(3)
genfun(4) 
```

如果我们执行以下操作，则更容易与循环进行比较：

```
genfun2 <- Vectorize(genfun)
genfun2( 1:10 ) 
```

然而，虽然不使用显式循环，但循环有多种用途（`:`使用内部循环，然后`mapply`在内部使用 which 循环），因此这不太符合“无循环”要求。即使我们手动输入 'genfun(1) `,`genfun(2) `,`genfun(3)', ... 即使不强制计算机循环，我们也在使用湿件循环，所以我不知道这是否重要.

就个人而言，循环对我来说似乎是更简单的选择。如果您预先分配整个向量并编写一个有效的循环，那么循环可能不会比其他方法慢。

**编辑**

实际上，您也可以使用递归函数来执行此操作（并存储所有中间计算）。我不确定这是否会被认为是“没有循环”。无论哪种方式，我都希望它比简单的循环更复杂和更慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:55:31.647

我写这个作为答案，因为我认为你的问题“是否可能”的答案是“不”。

据我所知，如果没有循环（至少在后台），这是不可能的，因为您需要为每个连续步骤重新轮询新值。在 Excel 中，我知道您所指的“自动填充”选项，它在后台循环。

即使在“嵌入”函数中使用计算滞后，每次更新前一个值时，您仍然必须再次调用该函数。正如我所看到的，你想要做的逻辑基本上是一个循环，除非你想手工编写每一行。我不知道任何适合您的矢量化方法，因为矢量化语句必须一次完成所有工作。

# css - 表格布局：固定在绝对 100% 宽度的表格行内不展开表格单元格（元素也不折叠）

> ID：14611952
> 
> 赞同：2
> 
> 时间：2013-01-30T19:17:41.610
> 
> 标签：css, css-position, tablelayout, css-tables, dynamic-pages

这对我来说毫无意义，但话又说回来，我与 CSS 专家相差甚远（可能甚至不是一个好的新手）。

我正在使用`relative`/`absolute`因为我正在使用大表中的动态分页表。我这样做是为了让用户快速浏览数据而不会使客户端超载。

[如您所见](http://jsfiddle.net/qfNML/1/)，`table-row`扩展 100%，但`table-cell`s 不服从`table-layout:fixed`。需要`table-cell`s 扩展以填充所有可用`table-row`空间。

（旁注，`border-collapse: collapse`也不起作用。）

请帮忙。提前谢谢了！

**HTML**

```
<div class="gridTable">
    <div class="gridRow">
        <div class="gridCell">a</div>
        <div class="gridCell">JKL;</div>    
        <div class="gridCell">Jb</div>  
    </div>
</div> 
```

**CSS**

```
.gridTable{
display:table;
table-layout:fixed;
position:relative;
border-collapse: collapse;
}
.gridHeaderRow{
top:0px;
}
.gridRow, .gridHeaderRow{
display:table-row;
position:absolute;
}
.gridCell{
display:table-cell;
}
.gridTable, .gridRow, .gridHeaderRow{
width:100%;
}
.gridTable, .gridTable *{
border-collapse:collapse;
}
.gridTable div{
border-color:black;
border-width:1px;
border-style:solid;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:59:07.750

我从行规则中删除了绝对位置，它对我有用（chrome，firefox）

```
.gridRow, .gridHeaderRow{
  display:table-row;
} 
```

如果你想有一个固定的标题，你可以像这样分开标题：

```
<div class="gridTableBox">
    <div class="gridTable gridHeaderTable">
        <div class="gridRow">
            <div class="gridCell">T1</div>
            <div class="gridCell">T2</div>
            <div class="gridCell">T3</div>
        </div>
    </div>
    <div class="gridTable gridBody">
        <div class="gridRow">
            <div class="gridCell">a</div>
            <div class="gridCell">JKL;</div>
            <div class="gridCell">Jb</div>
        </div>
    </div>
</div> 
```

现在您可以在不破坏表格布局的情况下为 gridHeaderTable div 提供绝对位置。

更新的小提琴在[这里](http://jsfiddle.net/7SJ4V/1/)。

# python - Python和SQlite交互如何去掉U？

> ID：14611953
> 
> 赞同：1
> 
> 时间：2013-01-30T19:17:45.463
> 
> 标签：python, sqlite

晚上，我使用以下代码从数据库中检索数据以进行编辑

```
os.system('cls')
    print("Editing the details")
    conn = sqlite3.connect('SADS.db')
    cur = conn.cursor()
    print " "
    choice = raw_input("Does the Customer know their user ID? Y/N : ")
    if choice == "N":
        number = raw_input("What is their phone number? : ")
        cur.execute("SELECT * FROM customers")
        while True:
            rows = cur.fetchone()
            if rows == None:
                print "No one found with that record"
                break
            print rows
    raw_input("Press Enter to return to the menu")
    os.system('cls') 
```

但是当我这样做时，我会返回以下结果：

```
(u'0001', u'Stack', u'Overflow', u'Confused', u'', u'sqlite', u'PYTH OON', u'07831994131', u'TEST@hotmail.com') 
```

哦 ps 那些不是我为了我的安全编辑它们的真实细节:')

但无论如何，我如何删除每条数据之前的 u ？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:57:56.147

`u`只是意味着您有一个 Unicode 字符串，并且不是字符串内容的一部分。

获取输出是因为您将`u`整个元组打印*为 tuple*，而不是单个字符串。

以下代码可以正常工作：

```
print "Name: %s %s, phone: %s" % (rows[1], rows[2], rows[7]) 
```

# video.js - videosjs - 当应用工具提示效果时，我的标题“cc”图标？

> ID：14611957
> 
> 赞同：0
> 
> 时间：2013-01-30T19:17:52.483
> 
> 标签：video.js

我正在尝试为videojs编写一个皮肤，我需要在div.vjs-volume-control内部的音量栏中应用cc（字幕）的相同效果。如何将工具提示效果复制到音量栏？

我可以自己用 jquery 做到这一点，但我想知道是否可以在没有 jquery 的情况下完成。

在 video.js 第 1446 行中，我有：

```
_V_.MuteToggle = _V_.Button.extend({

    init: function(player, options){
    init: function(player, options){
    this._super(player, options);
    player.addEvent("volumechange", _V_.proxy(this, this.update));    
    });
}, 
```

我看了一下并做到了：

```
_V_.MuteToggle = _V_.Button.extend({

    init: function(player, options){  
    this._super(player, options);
    //var volume = _V_('volumeBar');
    player.addEvent("volumechange", _V_.proxy(this, this.update));
    this.addEvent("mouseover",  function(){
     var barra = new _V_.VolumeControl(this.player);
    //alert('sdsd');
    barra.fadeOut();
    });
}, 
```

警报有效。但是当我隐藏音量栏时它不起作用

# java - 尝试制作第一个 Java 小程序，实现不同的类

> ID：14611961
> 
> 赞同：0
> 
> 时间：2013-01-30T19:18:10.627
> 
> 标签：java, oop, applet

我正在尝试学习 Java，但我很难理解 OOP。我正在尝试创建一个简单的 java 绘画小程序。我目前有一个要绘制的背景图像、一个颜色选择器和一个宽度选择器。我正在尝试导入在[http://www.javakode.com/applets/08-painting/上找到的 Brush1.java 示例](http://www.javakode.com/applets/08-painting/)

到目前为止，我现有的代码是：

```
package imagetest;

import java.awt.event.*;
import java.awt.*;
import java.applet.*;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Image;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JButton;
import javax.swing.JColorChooser;
import javax.swing.ListSelectionModel;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class ImageTest {

public static JList colorJList; // list to display colors
   private static final String[] colorNames = { "Black", "Blue", "Cyan",
  "Dark Gray", "Gray", "Green", "Light Gray", "Magenta",
  "Orange", "Pink", "Red", "White", "Yellow" };
   public static final Color[] colors = { Color.BLACK, Color.BLUE,
  Color.CYAN, Color.DARK_GRAY, Color.GRAY, Color.GREEN, 
  Color.LIGHT_GRAY, Color.MAGENTA, Color.ORANGE, Color.PINK, 
  Color.RED, Color.WHITE, Color.YELLOW };

   public static JList widthJList; // list to display colors
   private static final String[] widthNames = { "Thin", "Small", "Medium","Large" };
   public static final int[] widths = { 2,4,6,10 };

   public static ImagePanel panel;

  public static void main(String[] args) {

    panel = new ImagePanel(new ImageIcon("willy.jpg").getImage());
    JFrame frame = new JFrame();
    frame.setLayout(new FlowLayout());
    colorJList = new JList( colorNames ); // create with colorNames
      colorJList.setVisibleRowCount( 5 ); // display five rows at once

      // do not allow multiple selections
      colorJList.setSelectionMode( ListSelectionModel.SINGLE_SELECTION );

      // add a JScrollPane containing JList to frame
      frame.add( new JScrollPane( colorJList ) );
      colorJList.setSelectedIndex(0);

      colorJList.addListSelectionListener(
     new ListSelectionListener() // anonymous inner class
     {   
        // handle list selection events
        public void valueChanged( ListSelectionEvent event )
        {
           panel.repaint();
        } // end method valueChanged
     } // end anonymous inner class
  );

  widthJList = new JList( widthNames ); // create with colorNames
  widthJList.setVisibleRowCount( 4 ); // display five rows at once

  // do not allow multiple selections
  widthJList.setSelectionMode( ListSelectionModel.SINGLE_SELECTION );

  // add a JScrollPane containing JList to frame
  frame.add( new JScrollPane( widthJList ) );
  widthJList.setSelectedIndex(0);

  widthJList.addListSelectionListener(
     new ListSelectionListener() // anonymous inner class
     {   
        // handle list selection events
        public void valueChanged( ListSelectionEvent event )
        {
           panel.repaint();
        } // end method valueChanged
     } // end anonymous inner class
  );

  frame.getContentPane().setBackground(Color.LIGHT_GRAY );
frame.getContentPane().add(panel);
frame.pack();
frame.setVisible(true);
  }
  }

   class ImagePanel extends JPanel {

    private Image img;

  public Color color = Color.BLACK;
  public int linewidth = 2;

 public ImagePanel(String img) {
 this(new ImageIcon(img).getImage());
  }
  public ImagePanel(Image img) {
 this.img = img;
 Dimension size = new Dimension(img.getWidth(null), img.getHeight(null));
 setPreferredSize(size);
setMinimumSize(size);
setMaximumSize(size);
setSize(size);
setLayout(null);
  }

   public void paintComponent(Graphics g) {
 g.drawImage(img, 0, 0, null);
  color = ImageTest.colors[ ImageTest.colorJList.getSelectedIndex()];
  linewidth = ImageTest.widths[ ImageTest.widthJList.getSelectedIndex()];
      g.setColor(color);
  for(int i = 0; i < 10; i++)
  {
   g.drawLine(10+i*10,10+i*10,50+i*10,50+i*10);

  }
   }
   } 
```

我真的在为面向对象编程而苦苦挣扎。我完全不明白。它只是不适合我。我仍在寻找一种资源，将其分解为任何假人都可以学习的婴儿步骤。那么如何将刷子实现到我的练习小程序的其余部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:27:36.620

链接中显示的小程序是基于旧的`AWT`小程序而不是新的基于 Swing 的`JApplet`。您也可以使用[Java Web Start](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)来部署当前`JFrame`基于应用*程序*。

# java - java.lang.RuntimeException：使用 Facebook 登录时未能交付结果 ResultInfo

> ID：14611969
> 
> 赞同：6
> 
> 时间：2013-01-30T19:18:37.063
> 
> 标签：java, android, nullpointerexception, facebook-authentication, facebook-android-sdk

我的应用程序在模拟器上运行良好。所以我决定在我的安卓手机上运行我的应用程序。我正在尝试使用我的应用程序登录 Facebook 帐户，它在模拟器上运行良好。一旦我在安卓手机上运行我的应用程序，我总是会得到这个异常 -

```
01-30 11:06:08.400: E/AndroidRuntime(7463): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=64206, result=0, data=null} to activity {com.facebook.samples.sessionlogin/com.facebook.LoginActivity}: java.lang.NullPointerException 
```

下面是我的代码-

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment, container, false);

    buttonLoginLogout = (Button) view.findViewById(R.id.buttonLoginLogout);
    textInstructionsOrLink = (TextView) view.findViewById(R.id.instructionsOrLink);

    Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

    Session session = Session.getActiveSession();
    if (session == null) {
        if (savedInstanceState != null) {
        session = Session.restoreSession(getActivity(), null, statusCallback,
            savedInstanceState);
        }
        if (session == null) {
        session = new Session(getActivity());
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        }
    }

    updateView();

    return view;
    }

    @Override
    public void onStart() {
    super.onStart();
    Session.getActiveSession().addCallback(statusCallback);
    }

    @Override
    public void onStop() {
    super.onStop();
    Session.getActiveSession().removeCallback(statusCallback);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(getActivity(), requestCode, resultCode, data);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    Session session = Session.getActiveSession();
    Session.saveSession(session, outState);
    }

    private void updateView() {
    Session session = Session.getActiveSession();
    if (session.isOpened()) {

        Intent thesisProject = new Intent(getActivity(), ThesisProjectAndroid.class);
        startActivity(thesisProject);

    } else {
        Log.d(TAG_LOGIN_FAILED,
            "There is something wrong with your Facebook account. Please try again.");

        textInstructionsOrLink.setText(R.string.instructions);
        buttonLoginLogout.setText(R.string.login);
        buttonLoginLogout.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            onClickLogin();
        }
        });
    }
    }

    private void onClickLogin() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
    } else {
        Session.openActiveSession(getActivity(), this, true, statusCallback);
    }
    }

    private void onClickLogout() {
    Session session = Session.getActiveSession();
    if (!session.isClosed()) {
        session.closeAndClearTokenInformation();
    }
    }

    private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        updateView();
    }
    } 
```

我正在做的是-一旦我使用 Facebook 帐户登录，我需要转到另一个 Intent（在模拟器中运行良好）但是一旦我在 android 手机中安装了这个应用程序，我总是会`Login failed`尽快当应用程序启动时，我什至没有在 facebook 登录页面上提供用户名和密码，而且我得到了上述异常。

还有谁能让我知道我的逻辑是否正确`updateView method`-我想做的是，只要 Facebook 身份验证正确意味着我可以登录，那么我需要转到另一个 Intent。

任何人都可以在这里帮助我，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-27T19:40:15.787

坦克你@Matt Accola。该页面是这样说的：

在 Android 系统设置中打开“不保留活动”开发人员选项时，Facebook SSO 登录过程会中断。LoginActivity 被重复调用，并且每次都会泄漏一个 LoginActivity 实例。登录实际上从未完成，最终需要终止该过程。

请注意，如果关闭“不保留活动”设置，此错误将无法重现。

请注意，仅当所有用户帐户都从本机 Facebook 应用程序中注销时，此错误才会重现。

重现步骤： 1\. 在设备上的 Android 开发者选项（设置下）中启用“不保留活动”设置。

2.  验证设备上安装了适用于 Android 的原生 Facebook 应用程序。

3.  确保所有用户帐户都已从本机 Facebook 应用程序中注销。

4.  下载 Facebook SDK for Android 源代码和示例，并将项目导入 Eclipse。

5.  启动 HelloFacebookSample。

6.  点击登录按钮。应显示 Facebook 登录屏幕。

7.  输入 Facebook 凭据并点击登录按钮。等待后，可能会出现身份验证对话框。

8.  在身份验证对话框上点击确定。

预期行为：登录过程应完成，HelloFacebookSample 屏幕应显示为登录状态。

实际行为：Facebook 屏幕在进度对话框中仍然可见。整个系统速度变慢，最终由于内存不足，进程开始崩溃。我在此过程中捕获了一个堆转储，并且可以看到许多已泄露的 LoginActivity 实例。此外，启用 StrictMode 将显示消息，说明 LoginActivity 实例正在泄漏。

# .net - 为 linq to sql 更新 SQL Compact db 和 dbml 时出现 Method not Found 错误

> ID：14611976
> 
> 赞同：0
> 
> 时间：2013-01-30T19:18:56.757
> 
> 标签：.net, linq-to-sql, sql-server-ce

我有一个使用 linq to sql 和 SQL Compact 数据库的 vb.net 应用程序。我刚刚将数据库中的日期字段更新为可以为空，并使用 sqlmetal 重新生成了 dbml。现在，当我运行应用程序时，单击“搜索”按钮后出现此运行时错误：

找不到方法：'System.Nullable`1 Downtime.Students.get_DateOfBirth()'。

我注意到我对数据类型所做的最后一次更改也引起了问题。也许我没有更新 dbml 文件对吗？它在 .designer.vb 文件中为 dateOfBirth 字段提供了这个方法：

```
<Global.System.Data.Linq.Mapping.ColumnAttribute(Name:="dateOfBirth", Storage:="_DateOfBirth", DbType:="DateTime")>  _
Public Property DateOfBirth() As System.Nullable(Of Date)
    Get
        Return Me._DateOfBirth
    End Get
    Set
        If (Me._DateOfBirth.Equals(value) = false) Then
            Me.OnDateOfBirthChanging(value)
            Me.SendPropertyChanging
            Me._DateOfBirth = value
            Me.SendPropertyChanged("DateOfBirth")
            Me.OnDateOfBirthChanged
        End If
    End Set
End Property 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:22:09.483

解决方案，有点：我最终完全删除了 dbml 文件，使用 sqlmetal 重新生成 dbml，然后重新添加到项目中。

# c# - ASP.NET 表单身份验证 - 记住我问题

> ID：14611981
> 
> 赞同：4
> 
> 时间：2013-01-30T19:19:14.317
> 
> 标签：c#, asp.net, forms, authentication

我在我的 ASP.NET webapp 的表单身份验证中使用“记住我”。如果我使用有效凭据登录并选择“记住我”，我可以登录，一切都很好。现在，如果我关闭窗口，打开 SQL 服务器并更改密码，然后尝试打开 Web 应用程序，它会绕过登录过程并使用“记住我”中的旧缓存凭据并允许我登录。

这是正常的行为吗？如果是这样，我唯一能想到的就是删除“记住我”选项或使用非常短的到期时间。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:23:39.757

这很正常。原因是为了记住用户，需要在客户端机器上存储某种形式的密钥，从而绕过登录过程。假设您正在使用 ASP.NET 的集成成员资格功能，您实际上在 cookie 中存储了一个唯一令牌，用于识别用户。出于各种充分的原因，这与密码无关。这意味着自动登录与密码无关，因此更改它不应该在逻辑上影响此功能。

如果安全是一个问题，您确实可以考虑缩短记忆保持有效的时间跨度。或者正如您所提到的，如果它带来太大的风险，您可以完全避开此功能。密码记忆是绝大多数网站都实现的通用功能，如果您使用的是 ASP.NET 的集成会员功能，您的安全风险就会降到最低，但最终您需要检查您的具体情况并确定此功能是否使对你有感觉。

# python - 将 PodSixNet 库与 Python 一起使用，我在使用 Tkinter 时遇到问题

> ID：14611986
> 
> 赞同：0
> 
> 时间：2013-01-30T19:20:01.840
> 
> 标签：python, multithreading, sockets, tkinter

所以我使用[PodSixNet](http://mccormick.cx/projects/PodSixNet/)进行服务器-客户端交互。它工作得很好，但是当我尝试添加 Tkinter 时，我在 assyncore 中获得了最大的递归深度。

这是我的客户，服务器完美运行：

```
import sys
from time import sleep
from sys import stdin, exit
from Tkinter import *
import Tkinter

from PodSixNet.Connection import connection, ConnectionListener

# This example uses Python threads to manage async input from sys.stdin.
# This is so that I can receive input from the console whilst running the server.
# Don't ever do this - it's slow and ugly. (I'm doing it for simplicity's sake)
from thread import *
class App:
        def __init__(self, master, connection):
            self.connection = connection
            self.frame = Frame(master)
            self.frame.pack()
            self.connection.Send({"action":"nickname","nickname":"test"})
class Client(ConnectionListener):
    global players
    players = []
    def __init__(self, host, port):
        root = Tk()
        root.title("CHAT")
        app = App(root, connection)
        start_new_thread(root.mainloop, ())
        print "Enter your nickname:",
        nick = raw_input()
        self.Connect((host, port))
        connection.Send({"action": "nickname", "nickname": nick})
        # launch our threaded input loop
        t = start_new_thread(self.InputLoop, ())

    def Loop(self):
        connection.Pump()
        self.Pump()

    def InputLoop(self):
        global players

        # horrid threaded input loop
        # continually reads from stdin and sends whatever is typed to the server
        while 1:
            msg = raw_input()
            if msg.startswith("/"):
                cmd = msg[1:]
                if cmd.lower().startswith("pm"):
                    to = cmd[3:].split(" ", 1)[0]
                    msg = cmd[3:].split(" ", 1)[1]
                    if to in players:
                        connection.Send({"action": "PM", "to": to, "message":msg})
                    else:
                        print "That person is not online!"
                        continue
                elif cmd.lower().startswith("name"):
                    newName = cmd[5:]
                    connection.Send({"action":"nickname","nickname":newName})
            else:
                connection.Send({"action": "message", "message": msg})

    #######################################
    ### Network event/message callbacks ###
    #######################################

    def Network_players(self, data):
        global players
        #Recieved list of players.
        players = data['players']

    def Network_message(self, data):
        #Got a message.
        print data['from'] + ": " + data['message']\

    def Network_serverMessage(self, data):
        msg = data['message']
        print "Server:",msg
    def Network_PMrecieve(self, data):
        msg = data['message']
        of = data['from']
        print "PM from " + of + ": " + msg
    def Network_PMsuccess(self, data):
        success = data['success']
        if success == True:
            print "PM successfully sent!"
        else:
            print "Error, recipient may not be online."

    # built in stuff
    def Network_connected(self, data):
        print "You are now connected to the server"

    def Network_error(self, data):
        print 'error:', data['error'][1]
        connection.Close()

    def Network_disconnected(self, data):
        print 'Server disconnected'
        exit()

c = Client("localhost", 12345)
while 1:
    c.Loop()
    sleep(0.001) 
```

当我尝试使用连接时，它只会给出错误。从客户端类以外的任何地方发送

我听说可能是 Tkinter 不是线程安全的？如果是这样，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:27:58.660

您不能从多个线程访问 Tkinter 小部件。您正在一个线程中创建根窗口，但在另一个线程中运行事件循环。

# sql - SQL - 加入，但包括空结果（好像没有加入）？

> ID：14611987
> 
> 赞同：0
> 
> 时间：2013-01-30T19:20:05.317
> 
> 标签：sql, sql-server-2008, join

我有一张`Contacts`桌子和一张`Businesses`桌子，它们通过一张`Contacts_vs_Businesses`桌子连接（这是一个多对多的关系）。

我想查询这两个表；如果一个联系人与两个业务相关，我想返回：

*   一行包含所有联系方式和企业 A 的所有详细信息；
*   包含所有联系方式和业务 B 的所有详细信息的行
*   一行包含所有联系方式，但根本没有业务详细信息（好像我刚刚`SELECT`在第一张桌子上做了一个基本操作）

联系人表

```
ID Contact_Name Contact_Phone
1  Jez Clark    01234 567 890
2  Someone Else 01254 648 654 
```

企业表

```
ID Business_Name   Business_Address
1  A Company       24, A Street, A Town
2  Another Company 43, Another Street, Another Town 
```

Contacts_vs_Businesses

```
Contact_ID Business_ID
1          1
1          2
2          2 
```

我想返回：

```
Contact_Name Contact_Phone Business_Name   Business_Address
Jez Clark    01234 567 890 A Company       24, A Street, A Town
Jez Clark    01234 567 890 Another Company 43, Another Street, Another Town
Jez Clark    01234 567 890 NULL            NULL 
```

我在 SQL Server 2008 R2 上。

我该怎么做（我猜这真的很容易......）？我已经尝试了 OUTER 和 INNER 以及 LEFT/RIGHT 连接的各种排列，但似乎没有一个能给我最后一行结果。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:22:41.810

如果我正确理解您的问题，对于与 2 个企业相关联的任何联系人，您希望显示该联系人与每个企业，然后是 NULL 企业，从而产生 3 条记录？

尝试使用这样的方法`GROUP BY`来获取计数并`UNION`返回 NULL 记录：

```
SELECT C.Contact_Name, C.Contact_Phone, B.Business_Name, B.BusinessAddress
FROM Contacts C
  INNER JOIN Contacts_vs_Businesses CB ON C.Id = CB.Contact_ID
  INNER JOIN Businesses B ON CB.Business_Id = B.Id
  INNER JOIN (SELECT Contact_ID, COUNT(*) cnt FROM Contacts_vs_Businesses GROUP BY Contact_ID) CB2 ON C.Contact_ID = CB2.Contact_Id      
WHERE CB2.cnt = 2
UNION
SELECT C.Contact_Name, C.Contact_Phone, NULL, NULL
FROM Contacts
   INNER JOIN Contacts_vs_Businesses CB ON C.Contact_ID = CB.Contact_Id      
GROUP BY C.Contact_Name, C.Contact_Phone
HAVING Count(*) = 2 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:37:21.543

这不是一个简单的查询，因为它需要连接和联合。前两项非常标准。引入第三个是`union all`需要的地方：

```
select Contact_Name, Contact_Phone, Business_Name, Business_Address
from Contacts_vs_Businesses cb join
     Businesses b
     on cb.Business_Id = b.id join
     Contacts c
     on cb.Contact_Id = c.id
union all
select Contact_Name, Contact_Phone, NULL, NULL
from Contacts
where Contact_Id in (select Contact_id
                     from Contacts_vs_Businesses cb
                     group by Contact_id
                     having COUNT(*) = 2
                    ) 
```

# c# - 如何使用 Bing 地图在 Windows Store App 中实现弹出气球？

> ID：14611989
> 
> 赞同：3
> 
> 时间：2013-01-30T19:20:20.277
> 
> 标签：c#, xaml, popup, windows-store-apps, popup-balloons

我有一个应用程序，它显示有关放置在地图上的某个图钉的信息。到目前为止，我将信息显示为消息对话框。这不是很好看，也不适合作为信息框。我将尝试实现一个弹出窗口，它将显示所有信息，这应该很容易，因为有很多关于它的文档。我的问题是如何让它看起来像在 Windows 地图应用程序中出现的弹出气球一样时髦？图片显示了我的意思。似乎这种气球更难找到信息。

也许我什至在寻找错误的东西。

有谁知道这是否相对容易？以及有关如何自己做的任何信息？

![Windows地图图像中的弹出气球](../Images/e9bbb1de855e1b96da3df5899bf9053d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T16:41:59.750

我实际上正在寻找类似的东西，最终创建了一个 UserControl。这是我的样子：

![在此处输入图像描述](../Images/2eadcfe0abe7dde8d9c3d56534690ffa.png)

这就是 Xaml 代码的样子：

```
<Popup 
    x:Name="bingMapsFlyout" 
    IsLightDismissEnabled="True"
    >
        <Popup.ChildTransitions>
            <TransitionCollection>
                <PaneThemeTransition/>
            </TransitionCollection>
        </Popup.ChildTransitions>
        <Canvas 
        x:Name="contentFlyoutPanel" 
        Height="126" 
        Width="259"
        >
            <Rectangle HorizontalAlignment="Left" Height="45.035" VerticalAlignment="Top" Width="20.552" RenderTransformOrigin="0,1" UseLayoutRounding="False" d:LayoutRounding="Auto" Fill="#FF252525" Opacity="0.6" Canvas.Left="26.902" Canvas.Top="26.128">
                <Rectangle.Clip>
                    <RectangleGeometry Rect="20.761,-7.16,21.378,58.646">
                        <RectangleGeometry.Transform>
                            <CompositeTransform CenterY="-7.6496992111206055" CenterX="20.250661849975586" Rotation="-3.03122615814209" SkewX="-21.284000396728516"/>
                        </RectangleGeometry.Transform>
                    </RectangleGeometry>
                </Rectangle.Clip>
                <Rectangle.RenderTransform>
                    <CompositeTransform SkewX="21" Rotation="163.744"/>
                </Rectangle.RenderTransform>
            </Rectangle>
            <Rectangle HorizontalAlignment="Left" Height="69" VerticalAlignment="Top" Width="245" Fill="#FF2B2B2B" Canvas.Left="7" Canvas.Top="8"/>
            <StackPanel HorizontalAlignment="Left" Height="69" VerticalAlignment="Top" Width="247" Canvas.Left="7" Canvas.Top="8">
                <TextBlock x:Name="txtLine1" HorizontalAlignment="Left" Height="18" TextWrapping="Wrap" VerticalAlignment="Top" Width="227" Margin="10,10,0,0" Foreground="White" FontFamily="Arial" FontSize="16" FontWeight="Bold"/>
                <TextBlock x:Name="txtLine2" HorizontalAlignment="Left" Height="26" TextWrapping="Wrap" VerticalAlignment="Top" Width="227" Margin="10,5,0,0" Foreground="White" FontFamily="Arial" FontSize="12" FontWeight="Bold"/>
            </StackPanel>
        </Canvas>
    </Popup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:29:15.550

您将需要使用该`PopupMenu`课程

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.popups.popupmenu.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.popups.popupmenu.aspx)

# javascript - 如何在 JSDoc 中指定一个对象数组作为参数或返回值？

> ID：14611995
> 
> 赞同：150
> 
> 时间：2013-01-30T19:20:26.037
> 
> 标签：javascript, documentation, jsdoc

在 JSDoc 中，如果您有一个特定类型的数组（例如字符串数组），我能找到的最佳文档显示使用以下内容：

```
/**
 * @param {Array.<string>} myStrings All my awesome strings
 */
 function blah(myStrings){
     //stuff here...
 } 
```

您将如何替换以下问号指定对象数组？

```
/**
 * @param {???????} myObjects All of my equally awesome objects
 */
 function blah(myObjects){
     //stuff here...
 } 
```

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2013-02-13T13:38:03.787

您应该更具体地说明 JSDoc 的含义——这是一个通用术语，几乎涵盖了 JavaScript 的所有 JavaDoc 样式文档工具。

您用于字符串数组的语法类似于[Google Closure Compiler](https://developers.google.com/closure/compiler/docs/js-for-compiler#types)支持的语法。

使用它，对象数组将是：

```
/**
 * @param {Array.<Object>} myObjects
 */ 
```

或者只是一组任何东西——这应该适用于几乎所有的文档工具：

```
/**
 * @param {Array} myArray
 */ 
```

[jsdoc-toolkit](http://code.google.com/p/jsdoc-toolkit/wiki/TagParam)、[JSDoc 3](http://usejsdoc.org/tags-param.html)和[JSDuck](https://github.com/senchalabs/jsduck/wiki/Type-Definitions)支持以下语法来表示对象数组：

```
/**
 * @param {Object[]} myArray
 */ 
```

* * *

## 编辑

如果您知道值的键和变量类型，您还可以执行以下操作：

```
/**
 * @param {Array.<{myNumber: Number, myString: String, myArray: Array}>} myObjects
 */ 
```

或者

```
/**
 * @param {{myNumber: Number, myString: String, myArray: Array}[]} myObjects
 */ 
```

# c++ - 使用描述符为 0 的 getpeername

> ID：14611997
> 
> 赞同：3
> 
> 时间：2013-01-30T19:20:29.700
> 
> 标签：c++, sockets

我得到了这行的旧代码：

```
getpeername(0, (struct sockaddr *)&sin, &namelen) 
```

做什么`getpeername(0,...)`？它适用于所有操作系统？我试图在 SUN 中编译和运行，我得到了这个 => 非套接字上的套接字操作我在互联网上做了一些研究，但我不明白为什么我使用这条线，它返回我的“本地主机”？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:30:02.007

它查找文件描述符 0（即 STDIN）的对等点，即网络另一端的主机。

这可能是检查标准输入是否已重定向到套接字的一种简单方法。*这在inetd*风格的守护进程中很常见：如果它返回一个错误，那么它作为一个普通的守护进程启动，但是如果它成功，那么它作为一个*inetd*守护进程启动，这个套接字就是用于守护进程操作的套接字.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:28:58.253

试试`man getpeername`。这是一个 POSIX API，因此应该在 UNIX 和 Linux 平台上得到支持。

第一个参数必须是连接套接字的 fd。它将填写对等方（另一方）的地址。如何使用长度参数的详细信息：参见手册页

仅当 fd 0 (stdin) 绑定到套接字时，您的调用才会起作用。

这通常是由 inetd 启动的服务器的情况，但您没有告诉我们上下文。

您可能想要更改标签：这是一个 UNIX 套接字问题，但与 C++ 没有特别的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T19:29:02.473

您收到该错误是因为文件描述符`0`通常是标准输入，而不是套接字。我不确定原作者的意图，但它不应该以它的方式工作。也许有更多的背景，我可以进一步帮助你。