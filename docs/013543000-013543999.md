# StackOverflow 问答 13543000-13543999

# postgresql - 使用postgresql的ORDER BY、OFFSET和LIMIT优化SELECT查询

> ID：13543004
> 
> 赞同：3
> 
> 时间：2012-11-24T16:17:13.660
> 
> 标签：postgresql

这是我的表架构

```
Column       |          Type          |                      Modifiers                      
-------------+------------------------+------------------------------------------------------
id           | integer                | not null default nextval('message_id_seq'::regclass)
date_created | bigint                 |
content      | text                   |
user_name    | character varying(128) |
user_id      | character varying(128) |
user_type    | character varying(8)   |
user_ip      | character varying(128) |
user_avatar  | character varying(128) |
chatbox_id   | integer                | not null
Indexes:
    "message_pkey" PRIMARY KEY, btree (id)
    "idx_message_chatbox_id" btree (chatbox_id)
    "indx_date_created" btree (date_created)
Foreign-key constraints:
    "message_chatbox_id_fkey" FOREIGN KEY (chatbox_id) REFERENCES chatboxes(id) ON UPDATE CASCADE ON DELETE CASCADE 
```

这是查询

```
SELECT * 
FROM message 
WHERE chatbox_id=$1 
ORDER BY date_created 
OFFSET 0 
LIMIT 20; 
```

（$1 将替换为实际 ID）

它运行得非常好，但是当它达到 370 万条记录时，所有 SELECT 查询开始消耗大量 CPU 和 RAM，然后整个系统出现故障。我必须临时备份所有当前消息并截断该表。我不确定发生了什么，因为当我有大约 200 万条记录时一切正常

我正在使用带有默认选项的 Postresql Server 9.1.5。

* * *

更新 EXPLAIN ANALYZE 的输出

```
Limit  (cost=0.00..6.50 rows=20 width=99) (actual time=0.107..0.295 rows=20 loops=1)
->  Index Scan Backward using indx_date_created on message  (cost=0.00..3458.77 rows=10646 width=99) (actual time=0.105..0.287 rows=20 loops=1)
Filter: (chatbox_id = 25065)
Total runtime: 0.376 ms
(4 rows) 
```

* * *

更新服务器规范

```
Intel Xeon 5620 8x2.40GHz+HT
12GB DDR3 1333 ECC
SSD Intel X25-E Extreme 64GB 
```

* * *

**最终解决方案**

最后我可以超过 300 万条消息，我必须按照 wildplasser 的建议优化 postgresql 配置，并按照 AH 的建议创建一个新索引

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T18:40:56.477

您可以尝试为该查询为 PostgreSQL 提供更好的索引。我提出这样的建议：

```
create index invent_suitable_name on message(chatbox_id, date_created); 
```

或者

```
 create index invent_suitable_name on message(chatbox_id, date_created desc); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T21:47:53.480

尝试为`chatbox_id, date_created`. 对于这个特定的查询，它将为您提供最大的性能。

对于这种情况，当 postgres“开始消耗大量 CPU 和 RAM”时，会尝试获取更多详细信息。这可能是一个错误（默认配置 postgres 通常不会消耗太多 RAM）。

UPD 我对性能不佳的猜测：

在某个时间点，表变得很大，无法进行全面扫描以收集准确的统计信息。在另一个`ANALYZE`Postgresql 得到了该表的错误统计信息之后。结果 - 制定了糟糕的计划，其中包括：

1.  索引扫描`chatbox_id`；
2.  返回记录的排序以获得前 20 名。

由于默认配置和大量记录，在第 1 步返回，postgres 被迫在磁盘上的文件中进行排序。结果 - 表现不佳。

UPD2`EXPALIN ANALYZE`显示了`0.376 ms`时间和一个好的计划。您能否详细介绍性能不佳的案例？

# image - 使用matlab检测图像中物体的位置

> ID：13543005
> 
> 赞同：1
> 
> 时间：2012-11-24T16:17:17.710
> 
> 标签：image, matlab, optimization, image-processing, computer-vision

我正在尝试实现二维相关算法来检测图像中对象的位置，我不想使用任何内置函数估计二维相关。

这是我的代码：

```
I=imread('image.tif');      % image is a black image contains white letters.
h=imread('template.tif');   %template is a small image taken from the original image, it contains one white letter.
I=double(I);
h=double(h);
[nrows ncolumns]=size(I);
[nrows2 ncolumns2]=size(h);
C=zeros(nrows,ncolumns);

for u=1:(nrows-nrows2+1)
   for v=1:(ncolumns-ncolumns2+1)
       for x=1:nrows2
           for y=1:ncolumns2
               C(u,v)=C(u,v)+(h(x,y)*I(u+x-1,v+y-1));
           end
       end
  end
end

[maxC,ind] = max(C(:));
[m,n] = ind2sub(size(C),ind)   % the index represents the position of the letter.

output_image=(3.55/4).*C./100000;
imshow(uint8(output_image)); 
```

我认为它正在工作！但它很慢。

如何用更好的代码替换以下代码以加快算法速度？

```
 for x=1:nrows2
       for y=1:ncolumns2
           C(u,v)=C(u,v)+(h(x,y)*I(u+x-1,v+y-1));
       end
   end 
```

我在想，每次我都有以下两个矩阵

`h(1:nrows2,1:ncolumns2)`和`I(u:u+nrows2-1,v:v+ncolumns2-1)`

另一个问题，有什么改进吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:45:37.210

只要有可能，请尝试使用矩阵运算。所以尝试类似：

```
rowInds = (1:nrows2)-1;
colInds = (1:ncolumns2)-1;

temp = h.*I(u+rowInds,v+colInds);
C(u,v) = sum(temp(:)); 
```

代替：

```
for x=1:nrows2
    for y=1:ncolumns2
        C(u,v)=C(u,v)+(h(x,y)*I(u+x-1,v+y-1));
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:23:57.507

是的，有很多改进。你根本不需要 for 循环。由于您不想使用 matlab 的`xcorr2`功能，您可以使用`conv2`. [请参阅我在这里](https://stackoverflow.com/questions/11360297/matlab-how-to-find-out-if-a-matrix-is-in-another-martrix/12084000#12084000)给出的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:51:34.097

如何根据互[相关定理](http://mathworld.wolfram.com/Cross-CorrelationTheorem.html)确定傅里叶域中的互相关？这应该保证显着的速度增加。

# asp.net-mvc-3 - 根据选择的自动完成值单击按钮时附加记录和同步

> ID：13543013
> 
> 赞同：0
> 
> 时间：2012-11-24T16:17:50.117
> 
> 标签：asp.net-mvc-3, entity-framework-4, synchronization, kendo-ui

单击按钮时，我需要根据自动完成附加记录：自动完成绑定到远程数据库中的 wcf。我需要做的是将记录附加到本地数据库并同步。请告知我需要进行的操作。谢谢

```
$(document).ready(function () {
    $("#search").kendoAutoComplete({ 
        minLength: 3, 
        dataTextField: "SDesc", 
        dataValueField: "RefID", 
        template: '${ data.SDesc } ' + '(' + '${ data.SDate }' + ')',

        dataSource: {
            type: "odata",
            serverFiltering: true,
            serverPaging: true,
            pageSize: 20,
            transport: {
                read: "http://localhost:54329/HH_WcfDataService.svc/Product"
            }
        }
    });   

    $('#btnSelect').click(function (e){
        var value = $("#search").data("kendoAutoComplete").value();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:46:58.023

实际上，当 AutoComplete 位于表单元素内部时（就像普通输入一样），只有 Autocomplete dataTextField 被发布到服务器。对于您的情况，将使用**搜索**名称发布自动完成文本。

如果您想发送底层 dataValueField （实际上 AutoComplete 小部件从未使用过），您应该使用[ComboBox](http://demos.kendoui.com/web/combobox/remotedatasource.html)小部件。

# android - 监视多个 EditText 以在 Android 中更改文本

> ID：13543014
> 
> 赞同：0
> 
> 时间：2012-11-24T16:17:51.600
> 
> 标签：android, android-edittext, textwatcher

这就是我打算做的：我有一个有 20-25 EditText 的活动。当 EditText 的文本发生更改时，必须更改一些相应的 TextView 的文本。即用户输入他每月的杂货支出，因此显示他每年的杂货支出的TextView 得到更新，每月和每年的总支出TextView 也是如此。

我知道我可以使用 TextWatcher 来做到这一点。但在这种情况下，我需要为每个 EditText 使用单独的 TextWatcher。即使我编写了一个自定义 TextWatcher 来保存 EditText 的 Id 并在 switch-case 块中执行适当的操作，但在这种情况下，我需要为每个 EditText 创建一个该类的新实例。这不是非常低效和消耗内存吗？

我希望有像 OnClickListener 这样的东西，这样我只需要覆盖一些函数，它就会完成所有任务，比如我的 Activity 中的所有按钮，我只需要覆盖 onClick(View v) 函数并完成它。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:17:17.713

像这样的东西怎么样：

```
yourEditText1.setOnFocusChangeListener(yourFocusChangeListener);
yourEditText2.setOnFocusChangeListener(yourFocusChangeListener);

View.OnFocusChangeListener yourFocusChageListener = new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (!hasFocus) {
            // Update your textview depending on which edittext lost focus
        }
    }
}); 
```

与 TextWatcher (IMO) 相比，这样做的好处是您知道用户已经完成，因为他们已经离开了 EditText。唯一的问题是他们需要离开才能触发它（不确定这是否对你来说是一个阻碍）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:03:36.267

您无法避免使用 a`TextWatcher`来“查看”您的`EditText`. 前段时间我回答[了一个类似的问题](https://stackoverflow.com/questions/12709597/how-to-know-if-user-made-an-input-without-field-listeners/12712094#12712094)，稍加修改你可能会用它来让事情变得简单。在我回答的那个类中，您可能需要修改`onInputChange()`方法以返回 id`EditText`以便您知道谁触发了文本输入。

# entity-framework - 在 EF Code-First 中表示图形

> ID：13543015
> 
> 赞同：0
> 
> 时间：2012-11-24T16:18:01.563
> 
> 标签：entity-framework, ef-code-first, code-first

我试图在实体框架代码优先模型中表示具有类型边的图。我很难理解如何正确建立关系。我将图中的节点称为“项目”，将边称为“关系”这是我所拥有的：

```
public class Item : Learnable
{
    public Boolean IsBeginningItem { get; set; }
    public virtual List<Relationship> RelationshipsLeft { get; set; }
    public virtual List<Relationship> RelationshipsRight { get; set; }
} 
```

-

```
public class Relationship : Learnable
{
    public Boolean IsPrerequisiteRelationship { get; set; }
    public virtual RelationshipType RelationshipType { get; set; }

    public int ItemLeftID { get; set; }
    [ForeignKey("ItemLeftID")]
    public virtual Item ItemLeft { get; set; }

    public int ItemRightID { get; set; }
    [ForeignKey("ItemRightID")]
    public virtual Item ItemRight { get; set; }
} 
```

这就是我得到的：

![在此处输入图像描述](../Images/190bae3ad989fed429cc304293d85f53.png)

如何让 Item 的 RelationshipsRight 属性对应于 Relationship 的 ItemLeft 属性，以及 Item 的 RelationshipsLeft 属性对应于 Relationship 的 ItemRight 属性？

哦……我想我应该解释一下，这应该是一个可以双向导航的有向图。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:29:12.713

您可以使用该`[InverseProperty]`属性将正确的导航属性对绑定在一起：

```
public class Relationship
{
    //...

    public int ItemLeftID { get; set; }
    [ForeignKey("ItemLeftID"), InverseProperty("RelationshipsRight")]
    public virtual Item ItemLeft { get; set; }

    public int ItemRightID { get; set; }
    [ForeignKey("ItemRightID"), InverseProperty("RelationshipsLeft")]
    public virtual Item ItemRight { get; set; }
} 
```

# c# - 使用 COM 端口/使用 USB 串行 COM 端口与 xbee 模块通信的 C# 程序

> ID：13543018
> 
> 赞同：3
> 
> 时间：2012-11-24T16:18:11.297
> 
> 标签：c#, .net, winforms

我正在使用 ac# 程序，它使用 USB 串行 COM 端口来传输和接收数据。该组件是我想要访问的 XBEE 模块，但我编写的代码在我的计算机上没有检测到任何串行端口。任何可以帮助我纠正错误的人。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;

namespace WindowsFormsApplication3
{
    public partial class Test : Form
    {
        private StringBuilder receivedData = new StringBuilder();

        public Test()
        {
            InitializeComponent();
        }

        private void Test_Load(object sender, EventArgs e)
        {
            Array ports = System.IO.Ports.SerialPort.GetPortNames();
            for (int x = 0; x <= ports.Length; comboBox1.Items.Add(ports.GetValue(x))) ;
            timer1.Start();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            serialPort1.PortName = comboBox1.Text;
            if (!serialPort1.IsOpen)
            {
                serialPort1.Open();
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen)
            {
                serialPort1.Close();
            }
        }

        private void Test_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (serialPort1.IsOpen)
            {
                serialPort1.Close();
            }
        }

        private void button3_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen)
            {
                serialPort1.Write(textBox2.Text + "\n\r");
            }
        }

        private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {
            receivedData.Append(serialPort1.ReadExisting());
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            textBox1.Text = receivedData.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-18T08:13:44.717

您需要在串口上设置正确的参数以匹配设备的设置。你安装了[XCTU](http://knowledge.digi.com/articles/Knowledge_Base_Article/X-CTU-XCTU-software "西安交通大学")吗？记下“搜索设备”对话框中的设置——假设它确实找到了您的设备！

![XCTU 发现设备对话框](../Images/2ff514546de792d9a9a5a87373ce52a2.png)

对我来说，我发现我实际上只需要设置波特率：

```
var serialPort = new SerialPort(portName);
serialPort.BaudRate = 115200;
serialPort.Open();
// win! 
```

# python - 为什么python中的递归这么慢？

> ID：13543019
> 
> 赞同：14
> 
> 时间：2012-11-24T16:18:18.090
> 
> 标签：python, performance, recursion, python-2.7

所以我在递归闲置中搞砸了，我注意到使用递归的循环比常规的 while 循环慢得多，我想知道是否有人知道为什么。我已经包括了我在下面所做的测试：

```
>>> import timeit
>>> setu="""def test(x):
    x=x-1
    if x==0:
        return x
    else:
        test(x)
    """
>>> setu2="""
x=10
while x>0:
    x=x-1
"""
>>> timeit.timeit(stmt="test(10)",setup=setu,number=100)
0.0006629826315997432
>>> timeit.timeit(stmt=setu2,number=100)
0.0002488750590750044
>>> setu="""def test(x):
    x=x-1
    if x==0:
        return x
    test(x)
    """
>>> timeit.timeit(stmt="test(10)",setup=setu,number=100)
0.0006419437090698921 
```

然而，在最后一次测试中，我注意到如果我取出`else`语句，它显示速度略有提高，所以我想知道 if 语句是否是导致这种循环速度差异的原因？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-24T16:48:05.943

您已将函数编写为尾递归。在许多命令式和函数式语言中，这将触发尾递归消除，其中编译器用简单的 JUMP 替换 CALL/RETURN 指令序列，使过程或多或少与迭代相同，而不是正常的堆栈帧分配递归函数调用的开销。但是，Python 不使用尾递归消除，如其中一些链接中所述：

[http://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html](http://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html)

[http://metapython.blogspot.com/2010/11/tail-recursion-elimination-in-python.html](http://metapython.blogspot.com/2010/11/tail-recursion-elimination-in-python.html)

正如您从链接中看到的那样，默认情况下它不存在是有原因的，您可以通过多种方式破解它，但默认情况下，Python 奖励使用生成器函数之类的东西来创建复杂的指令序列，而不是递归。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T16:20:45.000

与迭代（通常）相比，递归相当昂贵，因为它需要分配新的堆栈帧。

# android - queryBuilder.appendWhere() 的意义何在？安卓

> ID：13543023
> 
> 赞同：3
> 
> 时间：2012-11-24T16:18:58.290
> 
> 标签：android, android-contentprovider

这里使用有什么意义 `queryBuilder.appendWhere()`？设置 where 子句不是更简单`Cursor cursor = queryBuilder.query()`吗？还是设置“where”子句的两种方式彼此不同？

```
 public Cursor query(Uri uri, String[] projection, String selection,
      String[] selectionArgs, String sortOrder) {

    // Uisng SQLiteQueryBuilder instead of query() method
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

    // Check if the caller has requested a column which does not exists
    checkColumns(projection);

    // Set the table
    queryBuilder.setTables(TodoTable.TABLE_TODO);

    int uriType = sURIMatcher.match(uri);
    switch (uriType) {
    case TODOS:
      break;
    case TODO_ID:
      // Adding the ID to the original query
      queryBuilder.appendWhere(TodoTable.COLUMN_ID + "="
          + uri.getLastPathSegment());
      break;
    default:
      throw new IllegalArgumentException("Unknown URI: " + uri);
    }

    SQLiteDatabase db = database.getWritableDatabase();
    Cursor cursor = queryBuilder.query(db, projection, selection,
        selectionArgs, null, null, sortOrder);
    // Make sure that potential listeners are getting notified
    cursor.setNotificationUri(getContext().getContentResolver(), uri);

    return cursor;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T16:47:31.757

如果您要根据条件`appendWhere()`构建子句的各个部分，则可以使用。`WHERE`

# php - 无法让 PHP 正则表达式工作

> ID：13543024
> 
> 赞同：1
> 
> 时间：2012-11-24T16:19:12.110
> 
> 标签：php, regex

我正在尝试使用 PHP 正则表达式。我试过这段代码：

```
$regex = "c:(.+),";
$input = "otherStuff094322f98c:THIS,OtherStuffHeree129j12dls";
$match = Array();
preg_match_all($regex, $input, $match); 
```

它应该`THIS`从`$input`. 但它返回一个空数组。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T16:21:39.603

我认为您需要斜杠才能使正则表达式正常工作。

并且 using`.+`也将匹配逗号后面的所有内容，这是您不想要的。使用`.+?`或`[^,]+`

```
$regex = "/c:(.+?),/"; 
```

或者

```
$regex = "/c:([^,]+),/"; 
```

# c# - 将 Resharper 中的间距行为更改为多行 lambda 现场表达式

> ID：13543025
> 
> 赞同：3
> 
> 时间：2012-11-24T16:19:25.887
> 
> 标签：c#, visual-studio, resharper

怎么变丑

```
Task t1 = new Task(() => {
                        for (int i = 0; i < int.MaxValue; ++i) {
                            Console.WriteLine(i);
                        }
                    }); 
```

到更可口的东西，例如

```
Task t1 = new Task(() => {
    for (int i = 0; i < int.MaxValue; ++i) {
        Console.WriteLine(i);
    }
}); 
```

在 Resharper？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:03:24.783

去`ReSharper | Options -> Code Editing | C# | Formatting Style | Other`，关掉`Align Multiline Constructs | Anonymous method body`。这适用于 ReSharper 7.1，也许在以前的版本中，您还需要在同一页面上查找一些设置，但在`Other`部分中。

# oop - Matlab中动态调用对象

> ID：13543027
> 
> 赞同：2
> 
> 时间：2012-11-24T16:19:34.523
> 
> 标签：oop, class, matlab

说我有以下变量

```
myClassName = 'myClass'; 
```

我想调用 myClass 构造函数的一个实例，即。

```
myObject = myClass(arg1, arg2, ..., argn); 
```

假设我想使用 myClassName 来调用它。

```
myObject = (myClassName)(arg1, arg2, ..., argn);      % something like that 
```

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:33:27.713

知道了。我发现这是：

```
myFunc = str2func(myClassName);
myClass = myFunc(arg1, arg2, ..., argn); 
```

做这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:55:43.380

`eval`也可以使用：

```
eval([myClassName '(arg1,arg2,arg3)']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:04:46.093

初始变量是否`myClassName`真的需要是一个字符串？我将其实现为：

```
myClassName = @myClass;
myObject = myClassName(arg1, arg2, arg3); 
```

`str2func`这与使用selfanswer中的调用非常相似，只是没有字符串操作，这会让某些人（例如，我）感觉不对。

# oop - 有什么方法可以不重复此代码流中的节点吗？

> ID：13543029
> 
> 赞同：0
> 
> 时间：2012-11-24T16:19:50.440
> 
> 标签：oop, uml

我尝试使用**活动** **图**来描述这个 [伪] 代码：

```
get expression
    while match '('
        get expression
        if !match ')'
            error
    get term 
```

看：

![在此处输入图像描述](../Images/23d77067228ecb3bb3ee7e11ff124687.png)

有没有办法在没有重复`get expression`节点的情况下描述该代码两次？

还是我使用了错误的图表来描述这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:56:01.143

图错了。您`get_expression`在每次迭代中遍历两次。在第一个下方添加一个节点`get_expression`，底部 [yes] 将转到该新节点。

![修改后的 UML](../Images/fbd343aac63a47fde9ef32ae3f91a1e3.png)

# c# - 如何从 C# 代码刷新 HttpWebResponse？

> ID：13543034
> 
> 赞同：0
> 
> 时间：2012-11-24T16:20:12.987
> 
> 标签：c#, asp.net, httpwebrequest, httpwebresponse

我构建了一个连接到 asp 站点 (Login.aspx) 的程序，并从 htmp 响应中获取一些文本。

现在我想制作一个按钮来刷新 html 并检查站点中是否有任何更改。

我使用 HttpWebRequest 和 HttpWebResponse。

我该怎么做？谢谢！

# android - 安卓中的 FileNotFoundException

> ID：13543037
> 
> 赞同：0
> 
> 时间：2012-11-24T16:20:35.530
> 
> 标签：android, filenotfoundexception, file-not-found

我有一段代码，它将视频从服务器流式传输到我插入到我的应用程序中的 Flash 播放器，但有时，由于网络问题，用户按下“播放”后，它会收到 FileNotFoundException。我如何编辑我的代码以尝试托盘和托盘 din，直到服务器响应？这是我的代码：

```
 irib1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            rtmpUrl = "rtmp://live.kashef.tv/totalstreamer";
            fileName = "irib1-"+ qpm +".sdp";

            if (fileName.endsWith(".flv")) {
                fileName = "flv:" + fileName;
            }

            bodyHtml = htmlCode;
            bodyHtml = bodyHtml.replaceAll("@FILESRC@", 
                    "\"file=" + fileName
                    + "&streamer=" + rtmpUrl + "\"");
            webView.loadDataWithBaseURL("http://127.0.0.1",
                    htmlPre + bodyHtml
                    + htmlPost, "text/html", "UTF-8", null);

        }
    }); 
```

这是我的 LogCat：

```
11-24 19:48:01.380: W/System.err(17187): java.io.FileNotFoundException: http://live.kashef.tv/fcs/ident2
11-24 19:48:01.380: W/System.err(17187):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:521)
11-24 19:48:01.380: W/System.err(17187):    at dalvik.system.NativeStart.run(Native Method)
11-24 19:48:01.380: W/System.err(17187):    at dalvik.system.NativeStart.run(Native Method) 
```

# jquery - Jquery Validation 不适用于某些文本框

> ID：13543040
> 
> 赞同：0
> 
> 时间：2012-11-24T16:20:52.157
> 
> 标签：jquery, validation

这是我的表单和 jquery 验证代码。问题是：它验证了前两个字段，即 title 和 desc，但它没有从品种字段验证。

```
<div class='span10 well' style='display:block;'>
  <h4>Listing Details : <span class='btn btn-info btn-    small' style='display:inline;'>Public</span><a href="#" class="tt"><img src='../../img/help.png' class='helpicon' /><span class="tooltip"><span class="top"></span><span class="middle">The information entered here will only shown to all customers who view your profile!</span><span class="bottom"></span></span></a></h4><br>
  <div class='test span9 well'>
    <form name='listingForm' id='listingForm' action='processListing.php' method='POST' onsubmit='validateForm()'>
            <label for "title"> Title: </label>
                    <input class='span8' type='text' name='title' id='title' placeholder='Catchy one-liner title...'>
                    <!-- help message -->
                    <a href="#" class="tt"><img src='../../img/help.png' class='helpicon' /><span class="tooltip"><span class="top"></span><span class="middle">A title is your first impression key! Make it catchy but informative to attract more customers.</span><span class="bottom"></span></span></a>
            <br><br><label for "desc"> Description: </label>
                    <textarea id="desc" name="desc" class='span8' rows=5 placeholder='Detailed description about your listing...'></textarea>
                    <a href="#" class="tt"><img src='../../img/help.png' class='helpicon' /><span class="tooltip"><span class="top"></span><span class="middle">A detailed description about your listing helps prospective customers know more about you. Talk about your pet, your family, how much you love your pet or an overview about how you can take the best possible care of the customer's four-feeted friend!</span><span class="bottom"></span></span></a>
  </div>
  <div class='myspan well'>
     <label for "breeds"> Breeds: <a href="#" class="tt"><img src='../../img/help.png' class='helpicon' /><span class="tooltip"><span class="top"></span><span class="middle">Key in all the breeds that you are willing to host. The more the merrier, so select as many as you want!</span><span class="bottom"></span></span></a></label>
             <input  type='text' name='breeds' id='breeds' value='' placeholder='Breeds you are willing to take in' onfocus='getDynamicData("Breed",this)'>

     <br><br><label for "boardingtype"> Accomodation Type: 
     <a href="#" class="tt"><img src='../../img/help.png' class='helpicon' /><span class="tooltip"><span class="top"></span><span class="middle">The type of accomodation that you can provide for the customer's best friend!</span><span class="bottom"></span></span></a>
     </label>

             <input type='radio' name='boardingtype' id='Apartment'> Apartment
             <input type='radio' name='boardingtype' id='House'> House
             <input type='radio' name='boardingtype' id='Boarding'> Boarding
     <br><br>
     <label for "amenities"> Amenities: 
     <a href="#" class="tt"><img src='../../img/help.png' class='helpicon' /><span class="tooltip"><span class="top"></span><span class="middle">Amenities available for a customer's pet. Choose all that apply. If you have more, be sure to mention it in the description of your listing.</span><span class="bottom"></span></span></a>
     </label>
             <input type='checkbox' id='amenity1' name="amenity1" value='Y'> <span style='padding-left: 10px'>Proximity to Vet</span>
             <br><input type='checkbox' id='amenity2' name="amenity2" value='Y'> <span style='padding-left: 10px'>Play Area</span>
             <br><input type='checkbox' id='amenity3' name="amenity3" value='Y'> <span style='padding-left: 10px'>24x7 Caretaker</span>
             <br><input type='checkbox' id='amenity4' name="amenity4" value='Y'> <span style='padding-left: 10px'>Toys</span>
  </div> 
```

这是我的jQuery验证：

```
$(document).ready(function(){
     $("#listingForm").validate({
            rules: {
                title: "required",
                desc: "required",
                breeds: "required",
                price: {
                    required: true,
                    },

            },
            messages: {
                title: "blah blah",
                desc: "blah blah",
                breeds: "blah blah",

                price:"blah blah"
            }
        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:41:09.797

问题是其余字段不是表单的一部分。表单和 div 必须正确嵌套。你有：

```
<div class='test span9 well'> 
```

在表格开始之前。与 this 匹配的`</div>`也隐式结束表单。如果要将表单拆分为多个分区，则需要将`<div>`标签移动到`<form>`.

你也错过了结束和`</form>`分裂。`</div>``span9`

# sass - 无法在 SASS 中编译注释

> ID：13543043
> 
> 赞同：2
> 
> 时间：2012-11-24T16:21:15.773
> 
> 标签：sass

我正在使用 Mac 10.7.2、Ruby 1.9.3 和 SASS 3.2.1。我正在尝试在多级 CSS 之间获取多行注释和注释。我知道我们可以在 SASS 中实现多行注释，如下所示：

**SASS**

```
/*
 Multiline
 comments
 goes here 
```

**CSS**

```
/* Multiline
 * comments
 * goes here */ 
```

但是我在我的样式表中使用了不同的注释来突出/识别我的 CSS 中的多个级别和不同的东西，其中两个如下：

我的样式表以下面的评论开头：

```
/***************************************************************

Theme Name: Theme name goes here
Theme URI: Theme URL goes here
Description: Discription related to theme will goes here
Version: 1.1
Author: Author name goes here
Author URI: Authour url goes here

***************************************************************/ 
```

我的应用程序索引评论如下：

```
/*
---------------------------------------
---------------------------------------
--- Table of Contents:              ---
---                                 ---
--- 1\. HEADER                       ---
--- -1.1 Navigation Bar             ---
---                                 ---
---                                 ---
--- 2\. MAIN SECTION                 ---
--- -2.1 Home page                  ---
--- --2.1.1 Sections                ---
--- ---2.1.1.1 sub section          ---
---                                 ---
---                                 ---
--- 3\. FOOTER                       ---
---------------------------------------
---------------------------------------
*/ 
```

我可以找到更接近它的评论，但无法将其完全作为编译后的 CSS 评论

**SASS**

```
/*
  ---------------------------------------
  ---------------------------------------
  --- Table of Contents:              ---
  ---                                 ---
  --- 1\. DEFAULT ELEMENTS             ---
  --- 2\. LINKS                        ---
  --- 3\. TABLE                        ---
  --- 4\. FORM                         ---
  --- 5\. GLOBAL CLASSES               ---
  ---------------------------------------
  --------------------------------------- 
```

**CSS**

```
/*  ---------------------------------------
 *  ---------------------------------------
 *  --- Table of Contents:              ---
 *  ---                                 ---
 *  --- 1\. DEFAULT ELEMENTS             ---
 *  --- 2\. LINKS                        ---
 *  --- 3\. TABLE                        ---
 *  --- 4\. FORM                         ---
 *  --- 5\. GLOBAL CLASSES               ---
 *  ---------------------------------------
 *  --------------------------------------- */ 
```

还有一些时候我们需要多层次的评论

```
.firstLavel
  background: #f00
  /* comeent goes here before second level */
  .secondLavel
    font-size:  20
    color:  #ddd
  /* comeent goes here before third level
  .secondLavel
    font-size:  70
    color:  #ded 
```

但我得到了结果：

```
 background: red;
  /* comeent goes here before second level */
  /* comeent goes here before third level */ }
  .firstLavel .secondLavel {
    font-size: 20;
    color: #dddddd; }
  .firstLavel .secondLavel {
    font-size: 70;
    color: #ddeedd; } 
```

它应该是：

```
.firstLavel {
  background: red; }

  /* comment goes here before second level */
  .firstLavel .secondLavel {
    font-size: 20;
    color: #dddddd; }

  /* comment goes here before third level */ 
  .firstLavel .secondLavel {
    font-size: 70;
    color: #ddeedd; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:33:05.420

Sass 使用一种算法进行编译，该算法递归地渲染 CSS 树的所有子节点，从端点（没有更深层次的端点）开始。由于这种算法，当它不是端点时，不可能在子节点之前设置评论：评论永远不会有更深的层次。设置评论的唯一方法是将评论设置为节点的子节点。

为了澄清，考虑这棵树：

```
root
  child1 
    child1.1
      /* comment on 1.1*/
      child1.1.1
    child1.2
  child2
  /* comment on 2 */
  child3
    /* comment on 3*/
    child3.1
  child4 
```

渲染它将首先导致没有子项的条目，然后是更深的条目。CSS 的顺序为：

```
root
  child2
  /* comment on 2 */
  child4
  child1
    child1.2
    child1.1
      /* comment on 1.1 */
      child1.1.1
  child3
    /* comment on 3 */
    child3.1 
```

使用的算法是带有队列的[BSF](http://en.wikipedia.org/wiki/Breadth-first_search)，该队列将端点放在首位

# python - 如何在科学文章或论文中引用 Python？

> ID：13543045
> 
> 赞同：10
> 
> 时间：2012-11-24T16:21:30.127
> 
> 标签：python, reference, article

我正在写一篇科学文章，其中我使用 Python 进行模拟。如何正确引用 Python 语言？我可以链接到期刊中的任何文章吗？

这也与 Python 不为人知的领域的论文和论文相关。

编辑：请参阅此处获取答案：[https ://academia.stackexchange.com/questions/5482/how-do-i-reference-the-python-programming-language-in-a-thesis-or-a-paper](https://academia.stackexchange.com/questions/5482/how-do-i-reference-the-python-programming-language-in-a-thesis-or-a-paper)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T16:24:28.143

好吧，原则上你*可以引用*[语言参考](http://docs.python.org/2/reference/)，但说实话，引用正在使用的编程语言作为参考书目有点奇怪。这只是您的论文或文章的工具，而不是科学工作，因此*不是*您研究基础的一部分 - 因此恕我直言，无需引用它。除非你的研究恰好属于编程语言的一般领域，尤其是 Python。

# c++ - OMNET++：.gdbinit：没有这样的文件或目录？

> ID：13543049
> 
> 赞同：3
> 
> 时间：2012-11-24T16:22:35.070
> 
> 标签：c++, omnet++, inet

我正在使用 Inet，并为我的工作做了一些修改。我创建了一类新的地址（我没有任何错误）。当我想在我的文件 .cc 中使用这个类时，我收到了这个错误：

> `<!> Warning: opp_run: Cannot check library ../../src/inet: ../../src//libinet.so: undefined symbol: _ZNK12MYAddress3strEv`
> 
> `<!> Error during startup: Cannot load library '../../src//libinet.so': ../../src//libinet.so: undefined symbol: _ZNK12MYGAddress3strEv. OMNeT++ Discrete Event Simulation (C) 1992-2011 Andras Varga, OpenSim Ltd. Version: 4.2.2, build: 120327-7947143, edition: Academic Public License -- NOT FOR COMMERCIAL USE`
> 
> 请参阅许可以了解分销条款和保修免责声明
> 
> `End.`
> 
> `Simulation terminated with exit code: 1`（不知道是什么意思）

我使用了调试，我得到：

> `.gdbinit: no such file or directory` 但我也不知道这意味着什么。

所以，如果你能帮助我，我将不胜感激。我不知道解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:49:14.107

您可以放心地忽略丢失的 .gdbinit 警告。与你的问题无关。

根本原因很可能是新的 Address 类未包含在创建的共享库中。请务必重新创建您的 makefile 并检查您是否使用 .cc 作为扩展名以及该文件是否位于 src 目录下。

# php - jQuery AJAX 请求不返回（无 HTTP 状态代码）并保持挂起

> ID：13543055
> 
> 赞同：0
> 
> 时间：2012-11-24T16:23:17.177
> 
> 标签：php, ajax, jquery

我有几个这样的要求：

```
 $('#some-button').on('click', function(e) {
      e.preventDefault(); 
      $this = $(this);
      $.ajax({
         url: 'some_request.php/?q='+$some_id,
         dataType: 'json',
         success: function(data) {
            alert('success!')
         }          
      }); 
   }); 
```

即在按钮单击时启动的大量 AJAX 请求。根据 Chrome，此请求保持“待处理”状态 - 没有 JS 警报。没有返回 HTTP 响应代码。我认为它只是坐在那里等待响应而没有得到它。

问题类似于：[jquery $.ajax 请求仍然挂起](https://stackoverflow.com/questions/8724739/jquery-ajax-request-remains-pending)，但答案没有帮助。在我的 PHP 或 HTML 代码中，我没有使用会话。

有任何想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:06:19.097

我认为您需要一个 jQuery Ajax 错误处理函数。这里是：

```
// jQuery Ajax Error Handling Function
$.ajaxSetup({
    error: function(jqXHR, exception) {
        if (jqXHR.status === 0) {
            alert('Not connect.\n Verify Network.');
        } else if (jqXHR.status == 404) {
            alert('Requested page not found. [404]');
        } else if (jqXHR.status == 500) {
            alert('Internal Server Error [500].');
        } else if (exception === 'parsererror') {
            alert('Requested JSON parse failed.');
        } else if (exception === 'timeout') {
            alert('Time out error.');
        } else if (exception === 'abort') {
            alert('Ajax request aborted.');
        } else {
            alert('Uncaught Error.\n' + jqXHR.responseText);
        }
    }
}); 
```

现在调用你的 ajax 函数：

```
$.ajax({
    url: 'some_request.php/?q=' + $some_id,
    dataType: 'json',
    success: function(data) {
        alert('success!')
    }
}); 
```

并检查您遇到的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:30:45.337

您确定您请求的 Php 文件在同一个域中吗？这通常发生在执行大多数 Web 浏览器不允许的跨域 Ajax 调用时。如果是这种情况，您将不得不尝试使用[jsonp](http://en.wikipedia.org/wiki/JSONP)。这是一个很好的实用解释示例：[http ://www.jquery4u.com/json/jsonp-examples/](http://www.jquery4u.com/json/jsonp-examples/)

# c++ - 将结构（或类）的内部函数作为函子传递

> ID：13543062
> 
> 赞同：2
> 
> 时间：2012-11-24T16:24:05.973
> 
> 标签：c++, stl, functor, function-object

我应该如何将结构内的函数作为函子传递？我认为这应该可以正常工作，但事实并非如此：

```
#include <algorithm>
using namespace std;

struct s {
    int a[10];

    bool cmp(int i, int j) {
        // return something
    }

    void init() {
        sort(a, a + 10, cmp);
    }
}; 
```

得到`<unresolved overloaded function type>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T16:26:06.280

您不能直接执行此操作，因为`cmp`它是一个成员函数，它需要*三个*参数：`i`、`j`和不可见的隐式`this`指针。

要传递`cmp`给`std::sort`，请将其设为静态函数，该函数不属于 的任何特定实例，`s`因此没有`this`指针：

```
static bool cmp(int i, int j) {
    // return something
} 
```

* * *

如果你需要访问`this`，你可以`cmp`用一个简单的函数对象来代替：

```
struct cmp {
    s &self;
    cmp(s &self) : self(self) { }
    bool operator()(int i, int j) {
        // return something, using self in the place of this
    }
}; 
```

并这样称呼它：

```
sort(a, a + 10, cmp(*this)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T16:49:02.773

虽然@Thomas 的答案完全有效，但您甚至可以使用`std::bind`lambdas 来做更简单的操作，如下所示：

```
// Using std::bind
std::sort( a, a + 10, std::bind(&s::cmp, this, _1, _2) );

// Using lambdas
std::sort( a, a + 1, [this](int i, int j) {return this->cmp( i, j );} ); 
```

# linux - 如何使用 tty 通过 ssh 运行屏幕执行命令

> ID：13543063
> 
> 赞同：0
> 
> 时间：2012-11-24T16:24:16.763
> 
> 标签：linux, bash, ssh, gnu-screen

我今天尝试了很多方法来让 ssh 启动一个执行命令的屏幕会话。目标是在远程机器上运行命令并能够看到输出并分离和重新连接后者。我想从脚本中执行此操作，除了分离屏幕会话以关闭之外没有任何交互。目前还没有令人满意的解决方案。

```
ssh -t ${host} "\
    source ~/.bashrc; \
    echo \"done.\"; \
    cd \"$exedir\"; \
    if [ \$? -ne 0 ]; then \
        echo \"could not cd into directory\"; \
        exit 1; \
    fi; \
    echo \"executing remotexe.sh ...\"; \
    screen -S "remotexe" -t "remotexe" -R "nice -n$prio ./remotexe.sh ${exeparams[@]}";" 
```

我遇到的一些问题与将命令传递给 screen/ssh/bash 的奇怪方式有关，这会干扰参数和选项（我不太明白为什么它们不用`--`来将后面的任何内容解释为带参数的命令）。上面的版本几乎可以工作。剩下的困难是 remotexe.sh 中的命令（尤其是 make）显然错过了来自`.bashrc`. 这就是为什么我试图将`source ~/.bashrc`. 我尝试向 remotexe.sh 添加类似的命令或显式导出，但它的行为就好像它是由 /bin/sh 执行的。如果我进行常规 ssh 登录，我可以立即运行 remotexe.sh 脚本而不会出错。我也尝试添加`shell -$SHELL`到我的`.screenrc`.

这个解决方案的错误在哪里？我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:43:02.683

我根本没有测试过你的代码，也不会保证这样做的合理性，但你肯定有一个引用错误。尝试：

```
ssh -t ${host} "
    source ~/.bashrc;
    echo done.;
    cd \"$exedir\" || exit 1;
    echo executing remotexe.sh ...;
    screen -S remotexe -t remotexe -R nice -n$prio ./remotexe.sh ${exeparams[@]};" 
```

# iphone - 情节提要：标签栏前带有导航控制器的视图

> ID：13543065
> 
> 赞同：0
> 
> 时间：2012-11-24T16:24:27.377
> 
> 标签：iphone, sdk

当我在 tabbarcontroller 之前有两个视图时，我有一个与实现带有导航控制器的标签栏相关的小问题，它也使用导航控制器。这是我在 StoryBoard 中的设置

[http://i.stack.imgur.com/8P4Zw.png](http://i.stack.imgur.com/8P4Zw.png)

[http://i.stack.imgur.com/ei3xa.png](http://i.stack.imgur.com/ei3xa.png)

但这不是我想要的，因为当我进入标签栏屏幕时，我得到了两个导航栏（图片编号 2）。我知道我只能删除标签栏中的导航控制器或将 segue 更改为模式，但如果我这样做，我将无法向每个标签栏视图添加单独的 UIBarbuttons 或设置单独的导航栏标题。我还想在整个应用程序中使用 push segue，因为它是一种“逐步”应用程序。我的问题是：当我进入标签栏时，如何消除双导航栏，但仍然能够为与标签相关的每个视图设置标题并继续使用推送 segue 和导航控制器？我希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:41:10.383

您可以为每个视图控制器设置单独的按钮。抓住一个标签栏项目并将其拖到您想要的任何视图控制器的导航栏上。您还可以设置每个视图控制器的单独标题。就像你说的，你没有理由在标签栏控制器之后添加第二个和第三个导航控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:50:27.927

您可以在 Storyboard 中和以编程方式设置按钮，并且它们在视图控制器的不同阶段可能会有所不同。因此，您应该删除第二个和第三个导航控制器，然后将所需的按钮拖放到您需要的地方，和/或在必要时以编程方式处理它。

您可以以编程方式执行的一个示例：

```
 UIBarButtonItem *yourButton = [[UIBarButtonItem alloc] initWithTitle:@"yourTitle" style:UIBarButtonItemStylePlain target:self action:@selector(yourSelector)];
self.navigationItem.leftBarButtonItem = buttonSegueBackToAccueil; 
```

这将为您所在的控制器创建一个 UIBarButtonItem 并将其放置为导航控制器栏的左按钮。单击时它将运行方法“yourSelector”。

# python - 如何在python中创建具有负边权重的随机单源随机无环有向图

> ID：13543069
> 
> 赞同：5
> 
> 时间：2012-11-24T16:25:27.190
> 
> 标签：python, random, graph, networkx, bellman-ford

我想在大量图上对贝尔曼福特算法进行执行时间分析，为了做到这一点，我需要生成大量随机 DAGS，并且可能具有负边权重。

我在python中使用networkx。networkx 库中有很多随机图生成器，但是哪个会返回带有边权重和源顶点的有向图。

我正在使用 networkx.generators.directed.gnc_graph() 但这并不能完全保证只返回一个源顶点。

有没有办法在有甚至没有networkx的情况下做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T23:38:35.503

您可以使用 gnp_random_graph() 生成器生成随机 DAG，并且只保留从较低索引指向较高索引的边。例如

```
In [44]: import networkx as nx

In [45]: import random

In [46]: G=nx.gnp_random_graph(10,0.5,directed=True)

In [47]: DAG = nx.DiGraph([(u,v,{'weight':random.randint(-10,10)}) for (u,v) in G.edges() if u<v])

In [48]: nx.is_directed_acyclic_graph(DAG)
Out[48]: True 
```

这些可以有多个来源，但您可以通过@Christopher 的建议来解决这个问题，即制作一个指向所有来源的“超级来源”。

对于小的连接概率值（上面的 p=0.5），这些也不太可能连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:07:01.983

我注意到生成的图总是恰好有一个接收器顶点，它是第一个顶点。您可以反转所有边的方向以获得具有单个源顶点的图形。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-09T12:09:46.883

@Aric 建议的方法将生成随机 DAG，但该方法不适用于大量节点，例如：n 趋于 100000。

```
 G = nx.gnp_random_graph(n, 0.5, directed=True)
        DAG = nx.DiGraph([(u, v,) for (u, v) in G.edges() if u < v])
        # print(nx.is_directed_acyclic_graph(DAG)) # to check if the graph is DAG (though it will be a DAG)
        A = nx.adjacency_matrix(DAG)
        AM = A.toarray().tolist()  # 1 for outgoing edges
        while(len(AM)!=n):
            AM = create_random_dag(n)

        # to display the DAG in matplotlib uncomment these 2 line
        # nx.draw(DAG,with_labels = True)
        # plt.show()

        return AM 
```

对于大量节点，您可以使用每个下三角矩阵都是 DAG 的属性。因此生成随机下三角矩阵将生成随机 DAG。

```
 mat = [[0 for x in range(N)] for y in range(N)]
        for _ in range(N):
             for j in range(5):
                 v1 = random.randint(0,N-1)
                 v2 = random.randint(0,N-1)
                 if(v1 > v2):
                     mat[v1][v2] = 1
                 elif(v1 < v2):
                     mat[v2][v1] = 1

        for r in mat:
            print(','.join(map(str, r))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-02T09:46:41.097

对于 G -> DG -> DAG

具有 k 个输入和 m 个输出的 DAG

1.  用你最喜欢的算法生成一个图（`G=watts_strogatz_graph(10,2,0.4)` ）
2.  使图形为双向 ( `DG = G.to_directed()`)
3.  确保只有低索引的节点指向高索引
4.  删除 k 个最低索引节点的输入边和 m 个最高索引节点的输出边（使 DG 变为 DAG）
5.  确保每 k 个最低索引节点都有输出边，并且每 m 个最高索引节点都有输入边。
6.  检查这个 DAG 中的每个节点，如果 k<index<nm，并且它只有没有输入边或输出边，随机选择 k 个最低索引节点中的一个节点链接到或选择 m 个最高索引节点中的一个节点链接到它，然后你会得到一个带有 k 个输入和 m 个输出的随机 DAG

喜欢：

```
 def g2dag(G: nx.Graph, k: int, m: int, seed=None) -> nx.DiGraph:
     if seed is not None:
         random.seed(seed)
     DG = G.to_directed()
     n = len(DG.nodes())
     assert n > k and n > m
     # Ensure only node with low index points to high index
     for e in list(DG.edges):
         if e[0] >= e[1]:
             DG.remove_edge(*e)
     # Remove k lowest index nodes' input edge. Randomly link a node if
     # they have not output edges.
     # And remove m highest index nodes' output edges. Randomly link a node if
     # they have not input edges.
     # ( that make DG to DAG)
     n_list = sorted(list(DG.nodes))
     for i in range(k):
         n_idx = n_list[i]
         for e in list(DG.in_edges(n_idx)):
             DG.remove_edge(*e)
         if len(DG.out_edges(n_idx)) == 0:
             DG.add_edge(n_idx, random.random_choice(n_list[k:]))
     for i in range(n-m, n):
         n_idx = n_list[i]
         for e in list(DG.out_edges(n_idx)):
             DG.remove_edge(*e)
         if len(DG.in_edges(n_idx)) == 0:
             DG.add_edge(random.random_choice(n_list[:n-m], n_idx))
     # If the k<index<n-m, and it only has no input edges or output edges,
     # randomly choose a node in k lowest index nodes to link to or
     # choose a node in m highest index nodes to link to it,
     for i in range(k, m-n):
         n_idx = n_list[i]
         if len(DG.in_edges(n_idx)) == 0:
             DG.add_edge(random.random_choice(n_list[:k], n_idx))
         if len(DG.out_edges(n_idx)) == 0:
             DG.add_edge(n_idx, random.random_choice(n_list[n-m:]))

     # then you get a random DAG with k inputs and m outputs
     return DG 
```

# android - Android客户端与jboss服务器中的数据库通信

> ID：13543070
> 
> 赞同：-1
> 
> 时间：2012-11-24T16:25:38.793
> 
> 标签：android, database, jboss

我的 android 客户端需要与 jboss 应用程序服务器中的数据库建立连接。如何建立连接，以便从服务器和客户端发送信息？我是Android开发的新手，请原谅我的无知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:43:42.227

您可以在 Jboss AS 上部署[RESTful Web 服务](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)，以便从各种（移动）设备轻松访问（创建、读取、更新、删除）托管资源。

[Jersey](http://jersey.java.net/)是 JAX-RS 的参考实现，我建议您使用它。下面是一个从 Android 调用 RESTful 服务的示例：[Calling RESTful services from your Android app](http://www.techrepublic.com/blog/app-builder/calling-restful-services-from-your-android-app/1076)。

另一个在 Android 上使用 REST 的指南是来自 Google IO 2010 的剪辑：[在 Android 平台上开发 RESTful 应用程序的架构注意事项](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)。

# java - InvalidAMIID.NotFound，AWS 错误消息：AMI ID 'ami-c1aaabb5' 不存在

> ID：13543071
> 
> 赞同：5
> 
> 时间：2012-11-24T16:25:39.390
> 
> 标签：java, amazon-ec2, amazon

我正在尝试以编程方式启动带有 EBS 的 Ubuntu 12.04 LTS Server 64 位。我编写了以下代码：

```
Placement placement = new Placement("eu-west-1b");
RunInstancesRequest runInstancesRequest = new RunInstancesRequest()
    .withPlacement(placement).withInstanceType("t1.micro")
    .withImageId("ami-c1aaabb5").withMinCount(1).withMaxCount(1)
    .withSecurityGroupIds("testGroup").withKeyName("testKey")
    .withUserData(Base64.encodeBase64String(startupScript.getBytes()));
RunInstancesResult runInstances = amazonEC2.runInstances(runInstancesRequest);
List<Instance> instances = runInstances.getReservation().getInstances(); 
```

但是，我收到此错误：

> AWS 错误代码：InvalidAMIID.NotFound，AWS 错误消息：AMI ID 'ami-c1aaabb5' 不存在

我在 Amazon AWS 控制台和以下 URL 中找到了该实例 ID：http: [//cloud-images.ubuntu.com/releases/precise/release-20121001/](http://cloud-images.ubuntu.com/releases/precise/release-20121001/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T17:01:39.293

我发现，默认情况下，请求被发送到美国弗吉尼亚数据中心，设置正确的端点解决了这个问题。

```
public AmazonEC2 createAmazonEC2() {
    AmazonEC2 ec2 = new AmazonEC2Client(createAwsCredentials());
    ec2.setEndpoint("https://eu-west-1.ec2.amazonaws.com");
    return ec2;
}

private AWSCredentials createAwsCredentials() {
    AWSCredentials credentials = new BasicAWSCredentials(awsAccessKey, awsSecretKey);
    return credentials;
} 
```

# c# - ASP.NET MVC - ExpressionHelper.GetExpressionText：返回错误的属性名称

> ID：13543073
> 
> 赞同：2
> 
> 时间：2012-11-24T16:26:05.740
> 
> 标签：c#, asp.net, asp.net-mvc, expression, mvccontrib

我的视图使用 MVCContrib Grid，我需要其中的一些输入字段：

```
@(Html.Grid(Model.Items)
.RenderUsing(new PostAsListRenderer<ItemModel>("list"))
.Columns(c =>
{
    c.Custom(
        @<text>
             @Html.HiddenFor(x => item.Id), item.Id)
             @item.Id
         </text>
    ).Named("Id");
    c.For(x => Html.TextBoxFor(y => x.Name)).Named("Name");
    c.For(x => Html.TextBoxFor(y => x.Description)).Named("Description");
    c.For(x => Html.DropDownListFor(y => x.SelectedItem, Model.SelectListItems)).Named("DropDown");
    c.For(x => Html.NameFor(y => x.Name));
})) 
```

问题是文本框的名称属性是：

**列表[38ef6173-b837-4d5a-ab2a-28ba9989c879].Value.Name**

代替

**列表[38ef6173-b837-4d5a-ab2a-28ba9989c879]** .名称。

**list[38ef6173-b837-4d5a-ab2a-28ba9989c879]**是我的自定义渲染器创建的前缀`PostAsListRenderer`，它使用`TemplateInfo.HtmlFieldPrefix`.

**.Name**在 ASP.NET MVC 中由`ExpressionHelper.GetExpressionText`.

所有输入字段都会出现此问题。

我需要正确的名称值才能将整个网格发布到服务器。

问题是我使用的那种表达方式`c.For(x => Html.TextBoxFor(y => x.Name))`。

这是`ExpressionHelper.GetExpressionText`方法中的错误吗？

现在我有一个解决方法，它只适用于非复杂属性：

```
@(Html.Grid(Model.Items)
.RenderUsing(new PostAsListRenderer<ItemModel>("list"))
.Columns(c =>
{
    c.Custom(
        @<text>
             @Html.Hidden(Reflector.GetPropertyName(x => item.Id), item.Id)
             @item.Id
         </text>
    ).Named("Id");
    c.For(x => Html.TextBox(Reflector.GetPropertyName(y => x.Name), x.Name)).Named("Name");
    c.For(x => Html.TextBox(Reflector.GetPropertyName(y => x.Description), x.Description)).Named("Description");
    c.For(x => Html.DropDownList(Reflector.GetPropertyName(y => x.SelectedItem), Model.SelectListItems)).Named("DropDown");
})) 
```

有没有更好的方法来创建正确的名称属性值？

**编辑＃1：**

在我看来，这是一个错误。如果您也这么认为，请在以下位置投票：[http ://aspnetwebstack.codeplex.com/workitem/638](http://aspnetwebstack.codeplex.com/workitem/638)

**编辑#2：** 这些是我的视图模型：

```
public class ViewModel
{
    public List<ItemModel> Items { get; set; }
    public List<SelectListItem> SelectListItems { get; set; }
}

public class ItemModel
{
    public int Id { get; set; }
    public string SelectedItem { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
} 
```

该代码也可在以下网址获得：[https ://github.com/Rookian/ListModelBinding](https://github.com/Rookian/ListModelBinding)

# php - PHP停止函数并在数组不包含任何元素时发送电子邮件

> ID：13543081
> 
> 赞同：0
> 
> 时间：2012-11-24T16:27:04.693
> 
> 标签：php, arrays, email, sendmail, matching

这是一个 PHP 问题

我有一个功能

> 函数 myfn () {
> 
> ```
> where i get some data here and add result to an array
> 
> $matches = array();
> 
> preg_match_all('????????????', $searched, $matches);
> 
> print_r($matches[1]);
> 
> } 
> ```

如果数组不包含任何元素，我需要暂停或退出此函数，并向 xyz@mail.com 发送电子邮件

感谢你的帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:29:08.723

如果你想退出功能就做`return;`。但我只是添加一些以`if()`. 并检查`$matches`数组是否为空`count()`。所以它可能看起来像这样：

```
function myfn () {

   // where i get some data here and add result to an array
   $matches = array();
   preg_match_all('????????????', $searched, $matches);

   if( count($matches) > 0 ) {
     // there's something

     print_r($matches[1]);

   } else {

     // empty
     // send an email to xyz@mail.com

   }
} 
```

# javascript - 如何在 HTML 中阻止点击和 Java 脚本

> ID：13543085
> 
> 赞同：-1
> 
> 时间：2012-11-24T16:27:26.320
> 
> 标签：javascript, html, css

我有这个带有或不带有嵌入内容的 HTML div，我想阻止右击和左击。因此，如果用户单击或右键单击，则不会发生任何事情。

你能用 HTML/CSS/Java Script 做到这一点吗？

基本上这是一个关于违反规则的问题，假设您在 html 的 div 中嵌入了 youtube 视频，您如何阻止用户点击，以便如果他点击视频，他不会去 youtube dot com。

*注意，我只对 youtube 不感兴趣，我只是想要一种阻止 div 中的点击和右键点击的方法。

所以采取一个非常简单的场景：

在基本的 HTML 页面中，有一个具有绝对位置和大小的 div，如果用户单击该 div 中的链接，我希望它不起作用，但如果他单击页面上其他任何位置的链接，我希望它起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:04:42.957

另一种忽略点击的方法是使用 css 'pointer-events'。

例如：

```
div.style.pointerEvents = 'none' 
```

或者

```
<div id="content" style="pointer-events:none;"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:40:06.110

猜猜这会帮助你：

```
function disableClick(){
    if(window.event.target.id && window.event.target.id=="myDiv"){
        window.event.preventDefault();
    }
}

    document.onclick = disableClick;
    document.oncontextmenu = disableClick; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T16:34:04.303

使用具有更大 DIV 的叠加层或使用以下代码

```
var event = $(document).click(function(e) {
e.stopPropagation();
e.preventDefault();
e.stopImmediatePropagation();
return false; 
```

});

# android - 在android的列表视图内的按钮上设置OnClick监听器

> ID：13543087
> 
> 赞同：8
> 
> 时间：2012-11-24T16:27:49.297
> 
> 标签：android, listview, button, adapter, onclicklistener

我的屏幕上有一个列表视图，每个列表项都包含 2 个文本视图和一个按钮。单击按钮时，我想获取列表项选定的索引以从向量中获取一些数据。

这是我的列表自定义适配器。但我不知道该怎么做。

```
private class CustomAdapter extends ArrayAdapter<ServicesItems> {

    public CustomAdapter(Context context, int resource,
            int textViewResourceId, List<ServicesItems> objects) {
        super(context, resource, textViewResourceId, objects);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;
        TextView item = null;
        TextView description = null;
        Button subNowBtn;

        ServicesItems ii = getItem(position);

        if (null == convertView) {
            convertView = mInflater.inflate(
                    R.layout.list_of_servics_item_2, null);

            holder = new ViewHolder(convertView);
            convertView.setTag(holder);
        }
        holder = (ViewHolder) convertView.getTag();
        // cat_name = holder.gettitle();

        Resources resources = getResources();

        ServicesItems bean1 = (ServicesItems) servicesVector
                .elementAt(position);

        String cat_name_str = bean1.getService_name().toString();
        String descreption = bean1.getDescription().toString();

        item = holder.getItem();
        item.setText(bean1.getDescription());

        description = holder.getDescription();
        description.setText(bean1.getService_name());

         subNowBtn=holder.getSubButton();

        return convertView;
    }

    private class ViewHolder {
        private View mRow;
        private TextView description = null;
        private TextView item = null;
        private Button sub = null;

        public ViewHolder(View row) {
            mRow = row;
        }

        public TextView getDescription() {
            if (null == description) {
                description = (TextView) mRow
                        .findViewById(R.id.category_tv);
            }
            return description;
        }

        public TextView getItem() {
            if (null == item) {
                item = (TextView)       
           mRow.findViewById(R.id.descreption_tv);
            }
            return item;
        }

        public Button getSubButton(){
            if(null==sub){
                sub=(Button)findViewById(R.id.subscribe_now_btn);

            }
            return sub;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-24T16:51:19.830

在您的适配器中试试这个：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent)
{
    View row = convertView;
    YourWrapper wrapper = null;

    if (row == null)
    {
        row = inflater.inflate(R.layout.layout, parent, false);
        wrapper = new YourWrapper (row);
        row.setTag(wrapper);
    }
    else
        wrapper = (YourWrapper) row.getTag();

    wrapper.getButton().setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            // What you want
        }
    });

    return row;
} 
```

**编辑**

你的包装类：

```
public class YourWrapper
{
    private View base;
    private Button button;

    public YourWrapper(View base)
    {
        this.base = base;
    }

    public Button getButton()
    {
        if (button == null)
        {
            button = (Button) base.findViewById(R.id.your_button);
        }
        return (button`);
    }
} 
```

换成`sub=(Button)findViewById(R.id.subscribe_now_btn);`_`sub=(Button) mRow.findViewById(R.id.subscribe_now_btn);`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-09T07:39:33.280

您可以在单击按钮时获取列表视图的索引，这里有两个示例：-

您可以在您**`onClick`**的侦听器方法中编写这些。

**示例 1**

```
View parentRow = (View) v.getParent();
ListView listView = (ListView) parentRow.getParent();
final int position = listView.getPositionForView(parentRow); 
```

**示例 2**

`setTag`创建视图时使用设置位置

```
mybutton.setTag(position); 
```

在侦听器中获取位置

```
int position = (Integer) view.getTag(); 
```

希望这有帮助:)

# c# - Web 应用程序验证设计决策

> ID：13543091
> 
> 赞同：0
> 
> 时间：2012-11-24T16:28:11.870
> 
> 标签：c#, asp.net-mvc, web-applications, architecture, validation

我的项目中有这个结构。
EmployeeController 层调用 EmployeeApi 层，该层调用 EmployeeBusinessLogic (bll) 层。

控制器与 EmployeeModel 一起使用，而 bll 与 EmployeeEntity (nhibernate) 一起使用。
API 层将模型从 Model 转换为 entity 并交给 bll。
验证在控制器 (MVC) 上工作，并到达已验证的 BLL。
我需要在 bll 上再次验证实体吗？因为如果有人开发并重新使用我的 bll，他可能会向它发送未经验证的数据。我应该两次验证数据吗？在 BLL 和控制器上？
对我来说，这看起来像是一种重复，因为模型与实体有 80% 的相似性。
这里的解决方法是什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:10:39.977

我总是会在 BLL 上进行验证，因为它是您系统的核心。由于您的系统将通过可能最终超出您的控制范围或被具有不同需求的应用程序使用的服务公开，因此这是一种确保您的数据无论来自何处都有效的方法。

例如，想想这个例子：

> MVC 应用 | 内部cmd工具| 第三方申请
> 
> 服务层
> 
> 业务层
> 
> > 您首先在核心业务和服务层之上创建一个 MVC 应用程序。然后有人认为创建一个可以在您的应用程序核心上执行某些操作的内部命令行工具将是一个好主意。如果您没有在业务层上进行验证，那么您将需要重复 MVC 应用程序所做的验证。您可以忍受这种情况，但如果您将服务暴露给第三方，您的服务层的消费者甚至可能无法控制。因此，最终完全信任您的数据的唯一方法是在持久化之前在业务层中进行验证。

此外，根据应用程序，在其他一些层上添加验证也很有用，例如 ASP MVC 应用程序上的控制器或客户端验证。这样操作会尽早失败，并尽快通知用户错误。

> 例如，在 MVC 应用程序中，简单的验证将在客户端使用 jquery 验证和 MVC 非侵入式验证进行，因此当发现错误时，它甚至不需要将数据发送回服务器并等待响应。您在控制器操作中还有另一个验证步骤，您的视图模型将被验证。如果在控制器上发现任何错误，它将被添加到 ModelState 中，并且用户通常会被重定向到显示错误并可​​以采取措施的屏幕。最后，您的应用程序核心将验证进入的数据，发现的任何错误都将发送回堆栈中。

正如您所说，您似乎会重复大量验证代码，但有一些方法可以最大限度地减少这种影响。当您使用 ASP MVC 时，一个示例可能是混合数据注释和您的验证库：

*   您可以在模型和业务对象上使用数据注释来进行最简单的验证，例如要求或正则表达式。您还可以开发自己的数据注释验证属性。

    ```
    public class EmployeeModel
    {
        [Required]
        public string Name {get; set;}
        ...
    }

    public class EmployeeEntity: BaseEntity
    {
        [Required]
        public string Name {get; set;}
        ...
    } 
    ```

*   对于您的业务层，创建一个仅考虑数据注释属性的基本验证器。（类似于此处描述的方法：http: [//odetocode.com/blogs/scott/archive/2011/06/29/manual-validation-with-data-annotations.aspx](http://odetocode.com/blogs/scott/archive/2011/06/29/manual-validation-with-data-annotations.aspx)）

    ```
    public class BaseValidator<T> where T: BaseEntity
    {
        public virtual ValidationResult Validate(T entity)
        {
             ... validate data annotations here ...
        }
    } 
    ```

*   这将为您在客户端、控制器和业务层提供相同的基本规则集，主要与用户输入相关。

*   对于任何具有更复杂验证逻辑的实体，从仅考虑数据注释属性的验证器中派生出业务层上的特定验证器。为该实体类型添加特定且更复杂的验证逻辑。

    ```
    public class EmployeeValidator: BaseValidator<EmployeeEntity>
    {
        public override ValidationResult Validate(EmployeeEntity entity)
        {
             base.Validate(entity);

             ... perform complex BLL calculations ...
        }
    } 
    ```

*   最后，在控制器层中添加一些代码，将业务层引发的任何验证错误添加到 ModelState 中。例如，您可以在基本控制器类上添加这样的方法：

    ```
    public void AddValidationsToModelState(ValidationResult validationResult)
    {
        foreach(var error in validationResult.Errors)
        {
            ModelState.AddModelError(error.property, error.message);
        }
    } 
    ```

最后，您将获得一个通用的数据注释属性共享库和业务层的特定验证程序部分。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:55:30.877

就个人而言，我永远不会相信跨越服务边界的数据。如果您的业务逻辑层设计为共享，那么您*应该*再次验证。是的，这是重复，但我在这里真的看不到任何替代方案。

# symfony - 异步发送电子邮件：假脱机、队列和 cronjob/daemon

> ID：13543092
> 
> 赞同：6
> 
> 时间：2012-11-24T16:28:14.807
> 
> 标签：symfony, rabbitmq, daemon, amqp, swiftmailer

我想异步发送电子邮件以获得更快、更轻的 http 响应，但我正在为许多新概念而苦苦挣扎。

例如，文档讨论了[spool](http://symfony.com/doc/current/cookbook/email/spool.html)。它说我应该使用带有文件的假脱机，然后使用命令发送电子邮件。但是我应该如何运行该命令？如果我将 cronjob 设置为每 1 分钟执行一次该命令（在 中可用的最小值`cron`），用户将不得不等待平均 30 秒才能发送他们的电子邮件（例如，注册电子邮件）。

所以我想改用队列。我已经在使用[RabbitMQBundle](https://github.com/videlalvaro/RabbitMqBundle#readme)进行图像处理（例如，缩略图创建）。但我只定期使用这个，所以它是在一个 cronjob 中使用的。

也许我应该创建一个始终等待新消息到达电子邮件队列并尽快交付它们的[守护进程？](https://github.com/shaneharter/PHP-Daemon#readme)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-05T13:42:48.223

解决方案是将每封电子邮件发送到一个队列，然后使用服务使用该队列。我的服务非常简单，它只是将项目从队列中取出，其中每个项目都是一个包含 from、to、body 等的数组，然后发送该电子邮件。我正在使用使 Rabbit 更易于使用的 Thumper：github.com/videlalvaro/Thumper。我确保服务始终使用“sv”（来自 Runit）：smarden.org/runit/sv.8.html。您可以使用您喜欢的任何其他服务或守护程序管理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T10:15:36.107

我和你有同样的问题。你最后是怎么解决你的问题的？

目前我在 crontab 中运行一个小脚本以便循环运行：

```
<?php
include('/var/www/vendor/symfony/symfony/src/Symfony/Component/Filesystem/LockHandler.php');
use Symfony\Component\Filesystem\LockHandler;

$lock = new LockHandler('mailer:loop');
if ($lock->lock()) {
    system('cd /var/www && php app/console swiftmailer:spool:send');
    sleep(1);
    $lock->release();
    shell_exec('cd /var/www && php LoopMailer.php > /dev/null 2>/dev/null &');
} 
```

它不是很干净，但它完成了他的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:36:30.963

您需要 2 项服务，一项用于假脱机消息，另一项用于发送即时电子邮件。检查[这个](https://stackoverflow.com/questions/12270162/how-to-define-an-additional-mailer-service-to-use-the-spool-and-send-instant-ema)

# wpf - 创建具有跳转到错误功能的 Visual Studio 样式错误工具窗口

> ID：13543097
> 
> 赞同：0
> 
> 时间：2012-11-24T16:28:39.467
> 
> 标签：wpf, mvvm, navigation, caliburn.micro

我正在使用 Caliburn Micro 为我的应用程序创建一个 Visual Studio 风格的界面。

用户可能在多个窗口中出现多个错误，这些错误都显示在停靠在我的应用程序底部的“错误”视图中。我已经设法实现了一个很好的通知机制，以便在对任何文档进行更改时，通知错误 VM 并查询源对象。

但是，我在弄清楚如何双击以导航到错误源时遇到了麻烦。

想象一下，我已将“描述”绑定到文档视图上的文本框，这提供了“需要描述”验证消息。双击消息应该将用户导航到有问题的文档并关注文本框。

提供消息的验证对象已经包含对视图模型的引用（作为`IViewAware`接口），它允许我调用`GetView()`以获取对视图的引用。我已经尝试使用这种方法来枚举我的视图上的绑定并找到绑定到特定属性的控件，尽管这非常慢并且更多的是蛮力 - 运气好方法

有人对解决此问题的方法有任何建议吗？我唯一的另一个想法是将“焦点”操作的责任传递给视图本身，并决定如何处理导航到某个属性的请求 - 可能使用附加属性通过唯一属性标识符来识别特定控件。应用程序可以将此列表缓存在字典中以加快处理速度（在加载应用程序时预先完成所有处理）

我假设 Visual Studio 很容易为标准代码编辑器窗口实现这一点，因为它只需要一个行号就可以跳转到正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:16:39.580

好的，所以在搞砸了几个小时后，我找到了一个似乎可以正常工作的解决方案。我已经为我的视图实现了一个接口类，它允许它们导航。

基本设置是：

`ErrorsViewModel`- 接收业务对象需要重新查询错误的通知，并管理错误列表以及何时需要查询（以便可以在后台线程上完成任何工作以防止锁定 UI）

`WorkspaceViewModel`- 托管工具窗格和文档的主工作区 VM

`ICanNavigate`- 视图将用于决定如何处理导航参数的接口

`NavigationEventMessage`- 发送到事件聚合器以提供导航通知和参数的消息

通过`ErrorsViewModel`事件聚合器从另一个 VM 接收事件消息并最终查询对象（如果可以）。收集错误后，它会在视图中显示项目（目前在网格控件中）。

当用户双击一行时，a`NavigationEventMessage`被调度，其中包含一些参数，例如调度它的视图和目标业务对象等。它由..

1) WorkspaceViewModels 视图。这允许它通过查看每个对象的 DataContext 并检查它是否与消息中传递的视图匹配来激活正确的文档

2) 目标文档视图，视图根据消息中发送的参数决定突出显示/显示/查找的内容

这似乎是将 VM 与视图分离的最合乎逻辑的方式，因为 ViewModel 仍然与视图没有耦合。视图只是实现了接口，如果它在那里，VM 会调用它并传入参数。

# c# - 正则表达式如何匹配值可以是 xml 类型的属性

> ID：13543102
> 
> 赞同：1
> 
> 时间：2012-11-24T16:29:15.030
> 
> 标签：c#, regex

我正在尝试修复一个无法正常工作的正则表达式。

就像现在一样：`<[^>]*(>|$)`

当字符串如下时，该正则表达式有效：

```
<?UMBRACO_MACRO  macroalias="RelatedLinks"  PushCollection="Test123"  /> 
```

但我也需要它来匹配这个：

```
<?UMBRACO_MACRO  macroalias="RelatedLinksPresentation"  PushCollection="<links><link title="test" link="1058" type="internal" newwindow="1" /></links>"  /> 
```

其中一个属性的内容在 xml 中。

该xml值产生3组......

编辑：

代码如下所示：

```
protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        ...........            

        Regex tagregex = new Regex("<[^>]*(>|$)", RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled);
        MatchCollection tags = tagregex.Matches(_data.Value.ToString());

        List<int> editornumbers = new List<int>();
        string sortorder = string.Empty;

        for (int i = 0; i < _maxNumber; i++)
        {
            if (!editornumbers.Contains(i))
            {
                string data = string.Empty;

                if (tags.Count > i)
                    data = tags[i].Value;

                MacroEditor macroEditor = new MacroEditor(data, _allowedMacros);
                macroEditor.ID = ID + "macroeditor_" + i;

                this.ContentTemplateContainer.Controls.Add(macroEditor);
            }
        }

        this.ContentTemplateContainer.Controls.Add(new LiteralControl("</div>"));

        if (tags.Count == _maxNumber)
        {
            _addMacro.Enabled = false;
            _limit.Visible = true;
        }

        MacroContainerEvent.Execute += new MacroContainerEvent.ExecuteHandler(MacroContainerEvent_Execute);

    } 
```

我知道他们为什么这样做；他们需要解析它，因为值来自数据库，并且它可能有多个这样的字符串，例如

```
<?UMBRACO_MACRO  macroalias="RelatedLinks"  PushCollection="Test123"  />
<?UMBRACO_MACRO  macroalias="RelatedLinks"  PushCollection="<links><link title="test" link="1058" type="internal" newwindow="1" /></links>"  />
<?UMBRACO_MACRO  macroalias="RelatedLinks"  PushCollection="Test123"  />
<?UMBRACO_MACRO  macroalias="RelatedLinks"  PushCollection="Test123"  /> 
```

那是 4 个宏，并且正则表达式用于将它们拆分为单独的实例。

需要明确的是，这不是 xml，它是 Umbraco 框架从其属性中取出值的模式。这次它恰好是值中的 xml 和需要分隔 UMBRACO_MACRO 字符串的正则表达式吓坏了。

编辑：现在的问题是我如何忽略“” < - 我什至不希望正则表达式关心值字段内的内容，这可能吗？

我发现这太难了，但我找到了另一条路要走：DI now HtmlEncode the value before it is saved and then when I get it Idecode,然后它就可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:05:41.320

要扩展我的评论和 Ωmega 的：

您明显无效的数据结构使这项任务变得不可能。你说你想忽略引号之间的文本。原则上这很好（并且很可能使用正则表达式），但是在您的情况下，引用的文本包含未转义的引号。这会导致出现问题的情况，即嵌入字符串*中* 实际引用的任何内容都在双引号*之外！*为了说明这一点，这是您的字符串拆分为不带引号和带引号的部分：

```
<?UMBRACO_MACRO  macroalias=
"RelatedLinks"
PushCollection=
"<links><link title="
test
" link="
1058
" type="
internal
" newwindow="
1
" /></links>"
/> 
```

您的源数据至少应该转义内部引号，如下所示：

```
<?UMBRACO_MACRO  macroalias="RelatedLinks"  PushCollection="<links><link title=\"test\" link=\"1058\" type=\"internal\" newwindow=\"1\" /></links>"  /> 
```

只要您不解决此问题，就无法解析。

为了能够使用 XML 解析器（否则它将非常适合此任务），您需要`&quot;`字符实体而不是`\"`.

因此，如果您像这样正确地转义源字符串（为清楚起见，添加了换行符）：

```
<?UMBRACO_MACRO  macroalias="RelatedLinks"  
  PushCollection="&lt;links&gt;
  &lt;link title=&quot;test&quot; 
  link=&quot;1058&quot; 
  type=&quot;internal&quot; 
  newwindow=&quot;1&quot;
  /&gt;
  &lt;/links&gt;"  
/> 
```

那么你可以使用你原来的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T00:37:57.153

您可以尝试将其插入[http://txt2re.com/index-csharp.php3](http://txt2re.com/index-csharp.php3)并从那里获取

# c# - 在c#中没有将bool设置为true

> ID：13543103
> 
> 赞同：0
> 
> 时间：2012-11-24T16:29:23.163
> 
> 标签：c#

我根本无法理解这个简单的问题。

我有一个布尔值，我将其分配给测试的输出：

```
// these are passed in to the function and will vary
bool inReview = true;
char status = 'V';

bool test = (inReview && status != 'M') || !inReview; 
```

评估为：

```
bool test = (true && true) || !true; 
```

这应该是真的 - 但调试器显示“test”的值是假的。

当我尝试这个时：

```
bool inReview = true;
char status = 'V';

bool test = false;

if ((inReivew && status != 'M') || !inReview)
{
    test = true;
} 
```

它进入 if 并且调试器显示“test”的值为 true。

如果我这样做，现在还有一些非常奇怪的东西：

```
bool test = (inReview && status != 'M') || !inReview;
bool test2 = (inReview && status != 'M') || !inReview; 
```

使用调试器进行单步调试 - 起初 test 是假的，test2 立即变为真，但是当我检查 test 时，它现在是真的！？

另外，如果我尝试：

```
bool test = (inReview && status != 'M') || !inReview;
if (test)
{
    string s = "WTF?";
} 
```

单步执行 - 首先测试是假的，然后它确实进入了 if 并且值现在是真的！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T16:33:31.043

当调试器进入一行时，仍然需要评估该行。您必须越过该行才能进行分配。一旦调试器位于右括号 ( `}`) 中，就应该设置变量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:34:56.470

您在调试器中评估哪一行？如果您只是在进行赋值的行上设置一个断点，当然该值最初将为 false，因为该行的代码尚未执行。转到下一行，您应该会看到正确的结果。

# android - 收到服务器的响应后完成活动

> ID：13543105
> 
> 赞同：-1
> 
> 时间：2012-11-24T16:29:58.943
> 
> 标签：android, android-activity

我想在另一个 java 类中收到来自服务器的完整响应时完成活动。

类别.java

这是主要活动

```
public void onListItemClick(ListView parent, View v, int position, long id)
    {
        // Get the selected category id & name.
        String catId = "";
        String catName = "";
        LinearLayout ll = (LinearLayout)findViewById(R.id.linearLayout1);
        View view = ll.getChildAt(0);
        if(view instanceof ListView) {
            ListView lView = (ListView) view;
            RowData rowData = (RowData) lView.getAdapter().getItem(position);
            catId = rowData.mCatId;
            catName = rowData.mTitle;
        }

        String url = "http://global.thinlenses.co.uk/virtualMirror/productlisting.php"; 
        String xml = "<?xml version=\"1.0\" encoding=\"utf-8\" ?>" + "<category><Id>" + catId + "</Id>"
                    + "<Data>" + "pList" + "</Data></category>";

        if(getIntent().getBooleanExtra("VM", false))
            new SpinnerHelper().serverCall(Category.this, "ProductListVM", url, xml, catName);
        else
            new SpinnerHelper().serverCall(Category.this, "ProductList", url, xml, catName);
    } 
```

SpinnerHelper.java 常规类不是 Activity

```
void serverCall(Context context, final String target, final String url, final String xml, String extraValue)
    {
        try {
            this.context = context;
            this.target = target;
            this.extraValue = extraValue;

            ConnectivityManager conMan = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
            if(conMan.getActiveNetworkInfo() != null && conMan.getActiveNetworkInfo().isConnected())
            {
                dialog = new ProgressDialog(context);
                dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                dialog.setCancelable(true);
                dialog.setTitle(R.string.app_name);
                dialog.setMessage(context.getString(R.string.progressing));
                dialog.show();

                // Create a thread for updating the spinner.
                Thread progressThread = new Thread(new Runnable() {
                    public void run() {
                        try {
                            while(!isExecuted) {
                                Thread.sleep(1000);                                 // Wait 1000ms between each update.
                                handler.sendMessage(handler.obtainMessage());       // Active the update handler.
                            }
                        }
                        catch (InterruptedException e) {
                            Log.e("VM", "Exception while spinner is updating at: " + e.getMessage());
                        }
                    }
                });
                progressThread.start();

                // Create a thread to get response from server.
                Thread registerThread = new Thread(new Runnable() {
                    public void run()
                    {
                        // Get response XML from server and parse it.
                        String resXML = new Connection().getResponse(url, xml);
                        XMLParser parser = new XMLParser();
                        Document doc = parser.getDomElement(resXML);
                        if(doc != null)
                        {
                            if(target.equals("Category")) {
                                NodeList nodeList = doc.getElementsByTagName("Category");
                                name = new String[nodeList.getLength()];
                                id = new String[nodeList.getLength()];

                                // Fetch all node values and store into arrays.
                                for(int index = 0; index < nodeList.getLength(); index++)
                                {
                                    Element element = (Element) nodeList.item(index);
                                    id[index] = parser.getValue(element, "id");
                                    name[index] = parser.getValue(element,"CategoryName");
                                }
                                result = "yes";
                            }
    } 
```

}

当我收到来自服务器的完整响应时，将调用此处理程序。

```
 Handler handler = new Handler()
  {
    public void handleMessage(Message message)
    {
        if(isExecuted)
        {
            dialog.dismiss();
            isExecuted = false;

            if(result.equals("yes"))
            {
                  /////HERE i want to start the next activity and finish the Category(previous activity).

             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:56:10.177

您可以为此使用上下文参考

```
Intent intent = new Intent(context,nextActivity.class);
context.startActivity(intent);
((Activity) context).finish(); 
```

# android - Eclipse 上的 Android - 处理“javax/xml/namespace/QName.class”时出现问题：

> ID：13543108
> 
> 赞同：0
> 
> 时间：2012-11-24T16:30:35.870
> 
> 标签：android, eclipse, jar

我正在开发一个使用适用于 Java 版本 1.12.0 的 Google API 客户端库的 Android 应用程序。我已将 jar 文件添加到 /libs 文件夹（而不是新的 /lib 文件夹）。我在运行时收到以下错误：

DX 故障处理“javax/xml/namespace/QName.class”：

不构建核心库时对核心类（java.* 或 javax.*）的不明智或错误使用。

不过，我没有使用 Maven，其他人的所有答案似乎都使​​用了 Maven。

Android 版本 - 4.1.2 API 级别 16 Eclipse - Java EE Juno

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:45:17.953

将外部 Jar 添加到您的 Android 项目或任何 Java 项目的最佳方法是：

在您的项目根文件夹中创建一个名为“libs”的文件夹 将您的 Jar 文件复制到 libs 文件夹 现在右键单击 Jar 文件，然后选择 Build Path > Add to Build Path，这将创建一个名为“Referenced Library”的文件夹。项目，你就完成了通过这样做，每当你将你的项目转移到其他计算机上时，你都不会错过你的库，这些库被引用到你的硬盘驱动器上的某些空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:13:02.763

不知道你现在有没有解决办法。我在这里发布这个是为了帮助将来遇到同样问题的人。

基本上我必须从构建路径中删除“android.jar”，保留“Android XX”库。然后，清理项目。

这是[链接](http://www.coderanch.com/t/539779/Android/Mobile/Ill-advised-mistaken-usage-core)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:48:17.247

您应该将 jar 放在 libs 文件夹中，然后 Project -> Properies -> Java Buid Path -> Add JARs -> 从 libs 文件夹中选择您的库的 jar -> OK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-18T10:24:53.680

跟随这里

window->preference->compiler->jre1.6 后做项目->properties->java build path->addlibrary->jresystemlibrary->environment->选择你的jre

它将解决问题

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-24T17:02:10.180

您按照以下步骤在项目中添加外部 jar

步骤1

![步骤1](../Images/19be7e2b841196f00d71c8c45e36a94f.png)

第2步

![第2步](../Images/d56af6b4f6c3968c3180012cb6227d87.png)

第 3 步

![第 3 步](../Images/69d3d5862612d63831280f596156be04.png)

# html - 如何锁定 Dreamweaver 模板

> ID：13543110
> 
> 赞同：1
> 
> 时间：2012-11-24T16:30:42.973
> 
> 标签：html, templates, dreamweaver

嗨，我是 Webdeign 2 的学生，我想使用 DreamWeaver CS4 从头开始​​制作模板。我在我应该做的事情上遇到了麻烦。这是我的代码：

```
<!-- TemplateBeginEditable name="Header" -->Header<!-- TemplateEndEditable -->
<br>
<br>
<!-- TemplateBeginEditable name="Body" -->Body<!-- TemplateEndEditable -->
<br>
<br>
<!-- TemplateBeginEditable name="Nav Bar" -->Nav Bar<!-- TemplateEndEditable -->
<br>
<br>
<!-- TemplateBeginEditable name="Text area" -->Text Area<!-- TemplateEndEditable -->
<br>
<br>
<!-- TemplateBeginEditable name='Footer' -->Footer<!-- TemplateEndEditable --> 
```

我的判断是我至少有一个可编辑区域和至少一个锁定区域。我不知道如何锁定一个区域，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:18:48.730

希望我已经理解您的问题：您想为具有 HTML 经验的人创建一个模板。有些代码行不应该是可编辑的，对吧？

在 HMTL 文档中，您不能锁定任何代码行。它的工作方式类似于文本文档（例如 .docx）。你可以改变你想要的。没有锁定功能。这也没有任何意义。学习创建 Wordpress-网站：世界上大多数人不会编写 HTML 或任何东西。如果他们可以安装任何应用程序，他们会很高兴；-)

也许这很有帮助。

真诚的 麦克斯

# android - 如何制作一个向上流动的文本视图

> ID：13543111
> 
> 赞同：1
> 
> 时间：2012-11-24T16:30:43.367
> 
> 标签：android, textview

```
___________    ___________    ___________      ___________    ___________    ___________
|         |    |text1    |    |text1    |      |         |    |         |    |         |  
|         |    |         |    |text2    |      |         |    |         |    |         |  
|         |    |         |    |         |      |         |    |         |    |         |  
|         |    |         |    |         |      |         |    |         |    |text1    |  
|         |    |         |    |         |      |         |    |text1    |    |text2    |  
|_________|    |_________|    |_________|      |_________|    |_________|    |_________| 
```

前三个显示了当我调用 myTextView.append("text1\n"); 时会发生什么。myTextView.append("text2\n"); 按顺序。但我希望它像后三个一样。我怎样才能做到这一点，或者这已经存在？欢迎任何猜测或报价，谢谢。

PS：行数没有限制，应该也是可以滚动的。

编辑：[这里](https://stackoverflow.com/questions/12671467/how-to-insert-text-at-either-end-of-the-android-textview?rq=1)它说使用html向右对齐，所以我正在考虑使用html但不确定。关联：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:49:51.297

`android:gravity="bottom"`在`TextView`您的 XML 布局中设置。这会将它与视图的底部对齐，并且当您添加到它时，内容应该向上推。

# sql - 如何在 Postgresql 中对表或表中的字段进行更改时显示查询？

> ID：13543116
> 
> 赞同：0
> 
> 时间：2012-11-24T16:31:59.107
> 
> 标签：sql, database, postgresql

我在一些项目中使用了 mysql，最近我搬到了 postgresql。在 mysql 中，当我更改表或字段时，相应的查询将显示在页面中。但是在 postgresql 中没有找到这样的功能（如果我错了，请原谅）。由于查询很容易获得，因此在本地数据库中测试某些内容（无需显式键入查询）、复制打印的查询并在服务器中运行它对我很有帮助。现在看来我必须手动完成所有技巧。尽管我熟悉查询操作，但有时这可能是一个非常耗时的过程。有谁能够帮我？每当对表进行更改时，如何让相应的查询显示在 postgresql 中（如在 mysql 中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:03:53.347

如果你使用`SELECT * FROM ...`，你的输出不应该有任何理由不包括新添加的列，无论你如何得到你的结果——那是`psql`在命令行、PgAdmin3 还是任何其他 IDE 中。

添加新列后，这些更改可能仍在其他窗口或 SQL 命令中的打开事务中 - 请务必提交此类事务。请注意，在事务提交之前，任何其他数据库客户端都不会看到您对数据或架构的更改。

如果您的 IDE 仍然没有显示更改，您可能需要刷新表列表，或者如果该选项不可用，请重新启动您的 IDE。如果这仍然不起作用，也许您应该使用更好的 IDE。

如果您使用过`SELECT field1, field2, ... FROM ...`，那么您必须在 SELECT 语句中添加新字段——但这对于任何其他 SQL 实现都是如此，包括 MySQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T22:56:16.087

您可以使用 PostgreSQL 中的[LISTEN](http://www.postgresql.org/docs/9.1/static/sql-listen.html) / [NOTIFY](http://www.postgresql.org/docs/9.1/static/sql-notify.html)机制来通知您的客户端更改数据库模式。

# iphone - pathForResource 动态输入

> ID：13543120
> 
> 赞同：1
> 
> 时间：2012-11-24T16:33:14.923
> 
> 标签：iphone

我正在尝试使用 pathForResource 的动态输入编写代码，但我得到目录列表的空值。我使用的文件是 wav 文件。这是代码。我在项目文件夹中有一个 .wav 文件。这里有什么问题？我怎样才能使这项工作？请帮忙。

```
int alphanum = 97;

NSString *alphastring = [NSString stringWithFormat:@"%i",alphanum];
NSString *path = [[NSBundle mainBundle] pathForResource:alphastring ofType:@"wav"];

AVAudioPlayer *theplayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

[theplayer play]; 
```

# ios5 - iOS 5 部分过渡视图控制器

> ID：13543125
> 
> 赞同：1
> 
> 时间：2012-11-24T16:33:39.087
> 
> 标签：ios5

我很难找到仅转换视图控制器一部分的最佳方法。这就是我所拥有的：在我的第一个视图控制器中，我有一个 UIView，它的作用类似于我提供一些 ImageView 和标签的标题，在它下面我有一个表格视图。当用户单击表格中的单元格时，会推送另一个视图控制器，它包含与以前相同的 UIView 标头，并在其下方提供有关所选单元格项目的一些详细信息。

这就是我想要的：由于两个视图控制器具有相同的 UIView 标头，我希望它被修复并且只更改底部内容（表格视图或详细信息）。我期望一个只移动底部内容的过渡效果。

我很感激任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:46:30.617

视图控制器控制视图，因此它不是转换视图控制器的情况，您可以通过转换视图来做到这一点。

您可以有多个视图。占据窗口的一部分。

在您的情况下，您可以保留顶视图（您称为标题的视图），当您需要更改视图的一部分时，您的控制器只需要创建一个新视图来显示，然后您可以将其设置为新位置在旧视图之上。

[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW108)动画可以让你完成这个。例如，您可以使用`transitionFromView:toView:duration:options:completion:`动画从表格视图到详细视图。

如果您愿意，可以为此详细视图使用不同的视图控制器。您需要做的就是使用配置其视图所需的信息创建视图控制器，然后将此视图作为`toView`上述方法传递，然后当您完成视图时，您可以使用相同的方法来转换回原来的tableview。

# c++ - 在没有 SO_LINGER > 0 的情况下强制服务器端套接字关闭会丢失数据，对吗？

> ID：13543126
> 
> 赞同：5
> 
> 时间：2012-11-24T16:33:45.007
> 
> 标签：c++, linux, windows, sockets

我正在编写一个使用套接字的跨平台客户端应用程序，用 C++ 编写。当服务器完成向我发送信息时，我遇到了服务器在套接字上硬关闭的问题。

我一直在阅读有关此主题的其他帖子，并且我对这种方法的正确或错误不太感兴趣，但似乎服务器要么明确设置 SO_LINGER = 0，要么这是该系统上的默认行为（不确定，它是一个 Linux 机器）。

我可以看到（在 Wireshark 中）数据是在几毫秒内由 RST 发送给我的，这表明服务器硬关闭。我个人不同意这种方法，因为应该由客户端来关闭套接字。

服务器团队说这种方法没有任何问题（执行硬关闭而不是关闭），通常在服务器上避免累积 TIMED_WAIT 套接字。在 Windows 上，我的`select()`返回表明有一些东西要读取（虽然我还没有读取任何这些“传输中”数据）。

但是，由于 RST 的快速到达，在 Windows 上`recv()`返回 -1 并且我看到错误代码为 10054（对等方重置连接）。如果我至少可以获取已发送的数据，这不会太糟糕，但似乎一旦我的客户端的套接字堆栈看到 RST，任何未读字节都不再可供我使用。

在 Linux（客户端）上，没有问题。似乎 TCP 堆栈的行为略有不同，因为我可以在 RST 得到尊重之前读取未完成的字节。鉴于它适用于 Linux 客户端，我无法说服服务器人员他们有错误。

首先，我说的对吗？这是服务器端的问题吗？我看不出客户端做错了什么，所以一定是对的？

似乎服务器团队坚持他们想要执行关闭，并且他们不想有 TIMED_WAIT，所以我要推动他们添加一个 SO_LINGER，比如说 2 秒？这听起来会解决我的问题吗？据我了解，这将阻止服务器在发送数据后很快发送 RST，并且应该让我有机会读取未完成的字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:45:56.543

找到了我自己问题的明确答案：

“...在接收到 RST 段后，接收方将立即中止连接。该声明的含义不仅仅是意味着您将无法从该连接接收或发送任何更多数据。**它还意味着任何仍在 TCP 接收缓冲区中的未读数据都将丢失**……”它引用了《TCP/IP Internetworking Volume II》一书。我没有那本书，所以我只能相信他的话。似乎没有丢弃 Linux 上的数据，只有 Windows ......

[Olivier Langlois 的博客](http://blog.olivierlanglois.net/index.php/2010/02/06/tcp_rst_flag_subtleties)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:28:24.810

摆弄 SO_LINGER 以强制重置的副作用是所有待处理的数据都会丢失。您没有收到它的事实就是您需要证明服务器团队这样做是错误的。

下面引用的 RFC 793 说“这个命令 [ABORT] 导致所有挂起的 SEND 和 RECEIVE 被中止，......并且一个特殊的 RESET 消息被发送到连接另一端的 TCP。” 另见 WR Stevens，*TCP/IP 图解，*卷。1，第 287：'中止连接为应用程序提供了两个功能：（1）任何排队的数据都被丢弃并立即发送重置，以及（2）RST的接收者可以告诉另一端中止而不是正常关闭'。有类似的措辞，以及实现它的 BSD 代码的摘录，在 Vol。2.

TIME_WAIT 状态仅发生在在收到 FIN 之前发送 FIN 的套接字上：请参阅[RFC 793](http://www.ietf.org/rfc/rfc793.txt)。因此，服务器应该等待来自客户端的 FIN，并具有适当的超时时间，而不是重置。这也将允许客户端进行连接池。

# ms-access - MS Access 报告布局

> ID：13543127
> 
> 赞同：0
> 
> 时间：2012-11-24T16:33:51.410
> 
> 标签：ms-access, layout, report, grouping

我创建了一个包含分组数据的报告，如图像的上半部分所示。理想情况下，我希望分组看起来像图像的下半部分。这在 Access 中是否可行，如果可以，我该如何实现？谢谢。

![在此处输入图像描述](../Images/34563a8626c48b1559b76f0195f185c2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:03:36.287

没有简单的方法可以在 Access 中并排放置部分。报告有一个`MoveLayout`可以`False`在代码中设置的属性。这样做的结果是下一部分将开始在相同的垂直位置打印，从而打印几个相互重叠的部分。

这是我的一份报告中的代码示例，我根据字段值设置此属性：

```
Private Sub GroupHeader2_Format(Cancel As Integer, FormatCount As Integer)
    If FormatCount = 1 Then
        If IsNull(Me!Pruefpunkt) Then
            Me.MoveLayout = False
        End If
    End If
End Sub 
```

您可能必须`False`在组部分标题中将此属性设置为，并在详细信息部分和组部分页脚中设置为 true。在部分的情况下执行此`Format`操作。

* * *

**更新**（回应评论）

这个对我有用

```
Private Sub Detail_Format(Cancel As Integer, FormatCount As Integer)
    MoveLayout = True
End Sub

Private Sub GroupHeader0_Format(Cancel As Integer, FormatCount As Integer)
    MoveLayout = False
End Sub

Private Sub GroupHeader1_Format(Cancel As Integer, FormatCount As Integer)
    MoveLayout = False
End Sub 
```

报告看起来像这样

![在此处输入图像描述](../Images/6149c21c560e889cfe33098830132565.png)

结果看起来像这样

![在此处输入图像描述](../Images/e2cbcc92f2a1cbdb427ed5055971e756.png)

# php - 如何将 CURLOPT_HTTPHEADER 页面放入 iframe？

> ID：13543131
> 
> 赞同：1
> 
> 时间：2012-11-24T16:34:27.263
> 
> 标签：php, javascript, ajax, curl, user-agent

我必须把这个页面：[http://www.tvindiretta.com/m/](http://www.tvindiretta.com/m/)放在 iframe 中。此页面由 cURL 驱动。他是它的内容。当我尝试将此网址：[http://www.tvindiretta.com/m/index.php](http://www.tvindiretta.com/m/index.php)放入 iframe（带标签）时，浏览器将重定向到 iframe 网址。如何将此页面保留在 iframe 中。我必须更改用户用户代理。我是 cURL 中的一个完整的菜鸟，但请帮助我。他是/m/index.php页面源代码：

```
<?php
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "http://www.tvindiretta.com/");
curl_setopt($ch, CURLOPT_MAXREDIRS, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('User-Agent: Mozilla/5.0 (iPhone; U; CPU iPhone OS 2_2_1 like Mac OS X; en-us) AppleWebKit/525.18.1 (KHTML, like Gecko) Version/3.1.1 Mobile/5H11 Safari/525.20'));

curl_exec($ch);
$result = curl_exec ($ch);
curl_close ($ch);

print $result;
curl_close($ch);
?> $ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:02:32.553

我认为此网页上没有用户代理重定向，因为

```
<?php
if (isset($_GET['get'])){

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://www.tvindiretta.com/m");
    curl_setopt($ch,  CURLOPT_RETURNTRANSFER, TRUE);
    curl_exec($ch);
    $result = curl_exec ($ch);
    curl_close ($ch);
    print $result;

}
else{
?>
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
</head>
<body>
<iframe src="test.php?get" style="position:absolute; top:100px; left:100px; width:400px; height:400px;"/>
</body>
</html>
<?php } ?> 
```

似乎搞砸了页面，但无论如何都要为我提供移动内容。

所以我想这里真正的问题是该页面内的javascript代码：

在 html5 中，您有一个新的[iframe 属性](http://www.w3schools.com/tags/att_iframe_sandbox.asp)“沙盒”，它允许您限制 iframe 的内容行为。不幸的是，这似乎只有 Chrome 和 Safari 支持。

这里的一个想法可能是尝试抓取网页的内容（例如使用 PHP 中的[DomDocument](http://php.net/manual/fr/class.domdocument.php)），只保留您感兴趣的内容，并尝试重现它们的风格。说起来容易做起来难，但我看不到更干净的方法。

由于您似乎有兴趣获得电视节目，因此您可以检查专用的 xml scaper [XMLtv](http://wiki.xmltv.org/index.php/Main_Page)。

# java - 三角坐标几何

> ID：13543133
> 
> 赞同：0
> 
> 时间：2012-11-24T16:34:41.020
> 
> 标签：java, android, geometry

我有一个三角形 ABC 内接在一个圆圈中。B点位于圆心，A和C是圆上的两点。

![带内接三角形的圆](../Images/69900990874b7f7e8001a6986e259c67.png)

**给定**

给定 AB（长度）

给定 A 和 B 的坐标

给定角度 B（角度 ABC）

**需要**

求 C 的坐标

**我知道的**

AB = BC，都是半径的

**我用这个做什么**

我正在为 android 制作一个基本的 3D java 游戏。这将用于向左和向右看，因此如果您单击屏幕的右侧部分，对象将通过将角度 B 增加 1 度来围绕您移动。

**我尝试查找 C 坐标的代码**

```
rect.get(index)[5] = (int) ((di * Math.cos(Math.toRadians(angle-90)))+.5);
rect.get(index)[6] = (int) ((di * Math.sin(Math.toRadians(angle-90)))+.5);
rect.get(index)[5] = shapes x coord 
rect.get(index)[6] = shapes y coord 

di = radius length 
angle = angle B 
```

我添加了`.5`这样，当坐标被截断时，它会被舍入。

我的完整代码

```
 double di = distance(playerx, playery, rect.get(index)[5], rect.get(index)[6]);
    double side1 = di;
    System.out.println("Side1: "+ side1);
    double side2 = side1;
    System.out.println("Side2: "+ side2);
    double side3 = distance(rect.get(index)[5], rect.get(index)[6], playerx, playery+di);
    System.out.println("Side3: "+ side3);

    double angle = ((side1*side1)+(side2*side2)-(side3*side3));
    angle = angle/(2*side1*side2);
    angle = Math.acos(angle)*(180/Math.PI);
    System.out.println("Angle: "+angle);
    if(playerx > rect.get(index)[5]){
        if(lookdirection.equals("left")){
            angle += 5;
        }
        if(lookdirection.equals("right")){
            angle -= 5;
        }
    }
    else{
        if(lookdirection.equals("left")){
            angle -= 5;
        }
        if(lookdirection.equals("right")){
            angle += 5;
        }
    }
    System.out.println("Angle: "+angle);

    rect.get(index)[5] = -(di * Math.cos(Math.toRadians(angle-90)));
    rect.get(index)[6] = -(di * Math.sin(Math.toRadians(angle-90)));

    di = distance(playerx, playery, rect.get(index)[5], rect.get(index)[6]);
    side1 = di;
    System.out.println("Side1: "+ side1);
    side2 = side1;
    System.out.println("Side2: "+ side2);
    side3 = distance(rect.get(index)[5], rect.get(index)[6], playerx, playery+di);
    System.out.println("Side3: "+ side3);
    angle = ((side1*side1)+(side2*side2)-(side3*side3));
    angle = angle/(2*side1*side2);
    angle = Math.acos(angle)*(180/Math.PI);
    System.out.println("Angle: "+angle);

    repaint();
} 
```

角度现在可以工作，但是 X 和 Y 坐标但是

```
 rect.get(index)[5] = -(di * Math.cos(Math.toRadians(angle-90)));
rect.get(index)[6] = -(di * Math.sin(Math.toRadians(angle-90))); 
```

正在变得非常大/小。他们应该与 B 点保持“di”距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:57:11.657

**更新**

看来这是一个几何问题！我没有测试你的代码，但我猜你想要的**不是**

```
rect.get(index)[6] = (int) ((di * Math.sin(Math.toRadians(angle-90)))+.5); 
```

但

```
rect.get(index)[6] = (int) (-(di * Math.sin(Math.toRadians(angle-90)))+.5); 
```

试着想象你在做什么，并[在这里](http://en.wikipedia.org/wiki/List_of_trigonometric_identities)检查对称性、变化和周期性下的身份。图像正在沿着 x 轴转动并反射，就像您现在正在做的那样。您还必须注意舍入问题。如果坐标接近 0，图像可能不会移动。

我的建议是将您的坐标保持为双精度，并且仅在您将它们渲染为像素而不覆盖它们的值时将它们四舍五入

# javascript - Javascript 无法识别 HTML 表单输入？

> ID：13543135
> 
> 赞同：1
> 
> 时间：2012-11-24T16:35:20.557
> 
> 标签：javascript, jquery, html, forms, jquery-validate

我有超级棒的 jQuery[验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)和[表单](http://www.malsup.com/jquery/form/)插件在我的网站上运行，没有任何问题。不幸的是，对于我的一个表单，我遇到了一个奇怪的问题，即无论我在表单的文本框中输入什么，都没有提交表单数据。

为了向您展示我的意思，当我`console.log`输入之前的字段数据（“存储数据”）和提交（“实时数据”）时，这就是我得到的（[使用 $.param 序列化](http://api.jquery.com/jQuery.param/)）：

```
stored data: full_name=&email_address=&password=  
live data: full_name=&email_address=&password= 
```

因此，此表单上没有提交任何内容，而我网站上使用完全相同的 JS 代码库的所有其他表单的“实时数据”显示输入的任何内容。

**更新**这是[此表单的 JSFiddle](http://jsfiddle.net/trpeters1/xqk7V/12/)。

**更新 2**我意识到这个表单的元素没有被 Javascript 识别。所以如果我这样做，背景不会变红。

```
$('#email_address').focus(
function(){
    $(this).css({'background-color' : 'red'});
}); 
```

哇，这完全令人困惑，想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:25:43.383

你有

```
$(document.body).on('click', ".ajaxFormBtn" 
```

和

```
<button data-loading-text="Saving..." class=" btn btn-green btn-large txt24" 
            value="Sign up" id="signupModalBtn" ><i class="icon-key icon-signin"></i> 
            Sign up</button> 
```

注意到按钮的类属性中缺少什么吗？

# python - 如何禁用 wxPython 网格中可调整大小的行？

> ID：13543139
> 
> 赞同：2
> 
> 时间：2012-11-24T16:35:53.820
> 
> 标签：python, wxpython

我[`wx.grid.Grid`](http://www.wxpython.org/docs/api/wx.grid.Grid-class.html)在我的应用程序中使用 a 。调整网格行的大小永远不会有用，所以我很想禁用调整它们大小的能力。这是可能的，我将如何去做？

### 理由

在测试应用程序时，当我尝试单击单元格主体时，我总是不小心单击单元格之间令人惊讶的大边框。行的高度不能超过 20 像素，可点击（可拖动）边框的宽度至少为 3 像素。除了当我打算选择多个单元格时经常不小心重新调整一行的事实之外，我真的认为禁用调整大小是值得的。一个可接受的替代方案是完全禁用单元格之间的边界拖动，但仍然可以通过沿顶部和左侧边缘的标签之间的边界来调整行和列的大小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T18:27:36.760

[DisableDragRowSize()](http://www.wxpython.org/docs/api/wx.grid.Grid-class.html#DisableDragRowSize)是您所需要的。

# c# - 如何从字符串创建属性（集合）表达式选择器？

> ID：13543140
> 
> 赞同：3
> 
> 时间：2012-11-24T16:35:56.933
> 
> 标签：c#, linq, lambda, expression-trees, dynamic-linq

我想在**linq 表达式中转换字符串“** *Employee.Orders.OrderID* ” ：“ ***employee.Orders.Select(order => order.OrderID)*** ”。

 ***我已经知道如何在诸如“Employee.FirstName”之类的简单属性中执行此操作，我的问题是如何在集合中的类型内的属性中执行此操作。

“订单”是“员工”类中的订单集合。“OrderID”是“Order”类的属性。

换句话说，我想改变它；

```
string path = "Employee.Orders.OrderID"; 
```

进入这个；

```
Expression<Func<Employee, object>> exp = employee => employee.Orders.Select(order => order.OrderID); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:19:23.497

这应该可以解决问题：

[https://gist.github.com/4149424](https://gist.github.com/4149424)

我还没有编译结果表达式，但它毫无例外地构建了表达式。

**编辑：**我添加了一行来创建 lambda 并对其进行编译，它确实如此，所以它可以工作。

它处理您访问集合属性的场景`Orders.OrderID`，这是使它变得复杂的部分。没有它，它会缩短大约 30 行。

目前，它所做的是将字符串拆分为 '.' 然后它递归地处理每个元素。如果元素是`IEnumerable`（但不是字符串），它会构建一个额外的`Select`lambda。

它还处理稍微复杂（但更多相同）的场景，您可以在集合属性中访问集合属性。***

# javascript - javascript 如果将 .shift() 与数组的最后一个值进行比较不起作用

> ID：13543142
> 
> 赞同：0
> 
> 时间：2012-11-24T16:36:26.950
> 
> 标签：javascript, arrays, multidimensional-array, loops

我有一个包含一些嵌套数组的数组。我遍历数组，并使用 .shift() 嵌套数组。当 .shift() 等于嵌套数组中的最后一个值时，我会遍历顶层并使用 console.log("last member of array") 记录它。如果活动的 shift() 不是最后一个值，那么我会记录“数组成员”。

出于某种原因，我测试数组最后一个成员的 if 条件不起作用。奇怪的是，当我记录活动班次和数组的最终值时，日志显示它们是相同的！但是 if 语句没有运行。不确定这是否是因为我正在将数组与对象或什么进行比较。有任何想法吗？

例如，在日志中 a3ls 与 b 相同，这意味着 b = a3ls，但该 if 语句中的块没有运行！

```
a3ls: .wePredOpTemps, .pcb_cad,fadeOut,1000
a is: .pcb_cad_cfd,fadeIn,1000,
b is: .wePredOpTemps, .pcb_cad,fadeOut,1000
a[3] is: 
b member 
```

根据我的 if 语句 if ( b == a3ls )，我认为“b 成员”应该是“最后一个成员”。

动画是一个大数组截断版本，看起来像：

```
animations = [
    ['.arrows', 'fadeIn', [1000], [
        ['.heatGenComps', 'fadeIn', [1000] ],
        ['.heatGenComps', 'delay', [2000] ],
        ['.heatGenComps, .arrows', 'fadeOut', [1000] ]
        ]
    ],
    ['.pcb_cad_cfd', 'fadeIn', [1000] , [
        ['.wePredOpTemps', 'fadeIn', [1000] ],
        ['.wePredOpTemps', 'delay', [2000] ],
        ['.wePredOpTemps, .pcb_cad', 'fadeOut', [1000] ]
        ]
    ],
] 
```

嵌套迭代代码：

```
 //iterate through nested array,
        function iterSub( a, a3ls ){
            b = a[3].shift(); //grab active of nested array
            console.log('a3ls: ' + a3ls);
            console.log('a is: ' + a );
            console.log('b is: ' + b);
            console.log('a[3] is: ' + a[3]);

            if ( b )
            {
                animations.push(b); // add active value back to animations array for infinite loop
                if ( b == a3ls ) //if active is last of array then
                {
                    console.log("last member of b array");
//run animations with promise and done then call top level array iterations
                    $.fn[ b[1] ].apply( $( b[0] ), b[2] ).promise().done( function(){
                        iter();     
                    });

                }
                else //more members left to iterate 
                {
                    console.log("b member");
//run animations and call sub with destructed array and the copy of the last value
                    $.fn[ b[1] ].apply( $( b[0] ), b[2] );
                    iterSub( a, a3ls );
                }

             }
             else //no more elements left
             {
                console.log("b does not exists");
             }
        }; 
```

如果存在嵌套数组，则调用嵌套迭代的迭代代码：

```
 function iter(){

        if (!animating) return;

            a = animations.shift(); //active array

            if (a) //if there is something, do something
            {

                console.log("a exists"); //log a
                animations.push(a); //put a back to the bottom of array for infinite loop

                 if ( a[3] ) //if there is a nested array then
                 {
                    a3ls = a[3][ a[3].length-1 ].slice(); //make a copy of the last element of nested array before shift destructs the array
                    console.log("a[3] exists");
                    $.fn[ a[1] ].apply( $( a[0] ), a[2] ); //applied some jquery animations based on array parameters
                    iterSub( a, a3ls  ); //call function to iterate through nested array and pass it the a array and a copy of the nested array's last value.
                 }
                 else //no nested array then do this
                 {
                    console.log("a[3] does not exist");
//use array to run jquery animations, promise, done, iterate to next 
                    $.fn[ a[1] ].apply( $( a[0] ), a[2] ).promise().done( function(){
                        iter();
                    });
                 }
            }
            else //no a, nothing to do
            {
                return alert('a does not exist');
            }

    }; 
```

**编辑** 当我做`if(b.toString == a3ls.toString)`测试工作时会打印出“数组的最后一个成员”，即使它不是最后一个成员......认为这是因为 .toString 函数是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:09:40.683

您可以在自己的代码中找到问题的答案。

```
a3ls = a[3][ a[3].length-1 ].slice(); //make a copy of the last element of nested array before shift destructs the array 
```

`a3ls`是实际元素的副本（切片总是返回一个新数组）。在`itersub`中，`b`是实际元素。Javascript`==`基于参考。它实际上并不检查两个数组是否包含相同的元素。它只检查两个变量是否指向同一个对象，在这种情况下它们没有。

你有两个选择。

*   1.  不要复制。`a3ls = a[3][ a[3].length-1 ]`
*   1.  实现一些外部逻辑，检查每个元素是否`b`存在，`a3ls`反之亦然。

您可能还有第三种选择。不要使用`shift`. 使用一个简单的`for`循环并检查 if `current index === length - 1`。

# php - 在 PHP 中将实例方法作为参数传递

> ID：13543143
> 
> 赞同：35
> 
> 时间：2012-11-24T16:36:29.327
> 
> 标签：php, class, methods, argument-passing

我想创建一个 Listener 类

```
class Listener {
    var $listeners = array();

    public function add(callable $function) {
        $this->listeners[] = $function;
    }

    public function fire() {
        foreach($this->listeners as $function) {
            call_user_func($function);
        }
    }
}

class Foo {
    public function __construct($listener) {
        $listener->add($this->bar);
    }

    public function bar() {
        echo 'bar';
    }
}

$listener = new Listener();
$foo = new Foo($listener); 
```

但是此代码失败并出现此错误：

> 注意：未定义的属性：第 18 行 index.php 中的 Foo::$bar
> 
> 可捕获的致命错误：传递给 Listener::add() 的参数 1 必须是可调用的，给定 null，在第 18 行的 index.php 中调用并在第 5 行定义 index.php

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-24T16:46:38.783

*   在 PHP 5.4 之前，没有命名类型`callable`，所以如果你用它作为类型提示，它的意思是“命名的类`callable`”。如果您使用 PHP >= 5.4，`callable`则为有效提示。

*   可调用对象由描述可调用对象名称的字符串（例如函数名称或类方法名称）或数组指定，其中第一个元素是对象的实例，第二个元素是要调用的方法的名称叫。

对于 PHP < 5.4，替换

```
public function add(callable $function) 
```

和：

```
public function add($function) 
```

调用它：

```
$listener->add(array($this, 'bar')); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-24T16:48:52.210

方法和属性在 PHP 中具有单独的命名空间，这就是为什么`$this->bar`计算结果为`null`：您正在**访问一个未定义的属性**。

以以下形式创建数组的正确方法`array($object, "methodName")`：

**正确传递回调**：

```
$listener->add(array($this, 'bar')); 
```

* * *

您给出的**类型提示**[**是可以**](http://www.php.net/manual/en/language.types.callable.php)的——从 PHP 5.4 开始，就是这样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T16:39:01.333

我认为您不能以这种方式指定可调用对象...

尝试

```
$listener->add(array($this, 'bar')); 
```

并参见[http://php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)。

# c# - 从 MMF 访问 SQLite 数据库

> ID：13543146
> 
> 赞同：5
> 
> 时间：2012-11-24T16:36:40.990
> 
> 标签：c#, sqlite, memory-mapped-files, memory-mapping

我正在使用`System.Data.SQLite`lib 访问我的 SQLite 数据库。我想将 db 文件加载到内存并使用 MMF（内存映射文件）来访问数据库。

这可以使用默认的[SQLite](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)库吗？

**编辑：**

欢迎使用有关如何拥有内存数据库的替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T16:46:51.880

不...

你可以：

*   创建一个内存数据库实例（在连接字符串中指定`Data Source=:memory:`）并将数据库文件中的内容加载到该实例中...当您更改内存实例的内容时，您的数据库文件将不会更新...您可以稍后将内存中的实例内容保存到数据库文件中......[一种方法来做到这一点](http://sqlite.phxsoftware.com/forums/t/2403.aspx)

*   使用 RAM 磁盘并将 db 文件复制到该 RAM 磁盘中...

*   修改库的源代码以支持MMF

# image-processing - 如何在积分图像中找到一定大小的最亮矩形？

> ID：13543147
> 
> 赞同：0
> 
> 时间：2012-11-24T16:36:58.993
> 
> 标签：image-processing, computer-vision

有什么比滑动窗口更快的吗？我尝试使用重叠矩形进行二分搜索 - 它有点工作，但有时会切断部分 blob（预期，正确） - 请参阅[http://juick.com/lurker/2142051中的视频](http://juick.com/lurker/2142051)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:01:37.403

*二进制搜索没有任何意义，因为它是一种在排序*结构 中搜索特定值的算法。

除非您对图像有一些先验知识，否则您需要检查所有可能的位置，这就是您建议的滑动窗口方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:57:52.397

Chris 是正确的，除非您可以说出周围区域的统计数据，例如，“我正在寻找的点周围的某些像素排列不太可能”。请注意，这与说“永远不会发生”不同，任何基于统计方法的算法都会有一个相关的概率（找到错误的框）。

如果您认为所需位置周围较大区域的统计数据可能提供信息，您可以在执行精细滑动窗口之前对较大的块进行一些块处理。例如，如果您可以说某个 64 x 64 区域*不*包含最大值的概率很高，那么您可以只使用（也许）丢弃很多 [64 x 64] 像素区域，32 像素重叠几个特点。

你可以训练像 AdaBoost 这样的东西来做到这一点。请参阅经典的 Viola-Jones 工作，该工作用于面部检测[http://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework](http://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework)

如果您绝对需要最大值位置，那么就像克里斯所说的那样，您需要到处搜索。

# sharepoint - 具有 Sharepoint 或 Windows 身份验证的 Java EE SSO

> ID：13543157
> 
> 赞同：0
> 
> 时间：2012-11-24T16:37:51.933
> 
> 标签：sharepoint, jakarta-ee, single-sign-on

我的公司正在切换到 sharepoint，并希望在他们的其他应用程序中使用 SSO，其中包括我正在开发的 java EE 应用程序。这可能吗？登录必须以某种方式通过浏览器直接连接到他们的 Windows 登录，或者单击 sharepoint 中的链接需要以某种方式将登录信息发布到我的页面。Java EE 应用程序当前使用 LDAP 进行身份验证，当然连接到 sharepoint 使用的同一个 AD。该应用程序也可以在我们公司网络之外使用，因此它不是 Intranet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:58:25.480

是的，这是可能的。

一种选择是使用 SAML 令牌使用基于声明的身份验证，各种应用程序信任相同的安全令牌服务 (STS)，它可以将您的 AD 用作用户数据库。

有关如何使用 2 个共享点站点以及内部和外部用户执行此操作，请参阅：http: [//msdn.microsoft.com/en-us/library/hh446525.aspx](http://msdn.microsoft.com/en-us/library/hh446525.aspx)

# ios - 在IOS中根据ID执行Fetched

> ID：13543158
> 
> 赞同：0
> 
> 时间：2012-11-24T16:37:54.953
> 
> 标签：ios

我正在尝试编写一个基于我传入的 ID（NSInteger 值）执行提取的方法。我可以对所有内容进行提取，但是当我添加谓词时，程序会崩溃。我是否做错了谓词。

```
-(BOOL)finding:(NSInteger)theID 
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"self == %i",theID];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Course"    inManagedObjectContext:_cdStack.managedObjectContext];

    [fetchRequest setEntity:entity];
    [fetchRequest setHavingPredicate:predicate];
    NSError *error = nil;
    NSArray *fetchedObjects = [_cdStack.managedObjectContext executeFetchRequest:fetchRequest error:&error];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-15T22:02:31.097

这个问题很老了，但我刚刚遇到了后续讨论中提到的相同错误。因此，以防万一其他人最终遇到同样的问题，问题在于使用`[fetchRequest setHavingPredicate: predicate];`而不是`[fetchRequest setPredicate: predicate];`.

# java - 组件本身可以用作监听器吗？

> ID：13543159
> 
> 赞同：2
> 
> 时间：2012-11-24T16:38:01.653
> 
> 标签：java, swing, user-interface, jframe, actionlistener

我曾尝试在 Java 中使用此代码，其中我使用 JFrame 作为它自己的 ActionListener。现在，理论上是可能的，因为在 Java 中，一个类既可以实现多个接口**，又**可以扩展另一个类。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.SwingConstants;
import javax.swing.border.EmptyBorder;

/*
 * This is an example of the strangeness of the syntax of Java. In this example, I am using the JFrame itself as the listener for its component, namely a JButton which, on clicking, ends the program. 
 * Warning : This is just an example, and I would never recommend this syntax, for I do not know the full consequences yet.
 */

@SuppressWarnings("serial") public class ListenerTest extends JFrame implements ActionListener{

    private final JPanel contentPane;
    private final JLabel message;
    private final JButton button;

    /**
     * Launch the application.
     */
    public static void main(String[] args){
        EventQueue.invokeLater(new Runnable(){
            @Override public void run(){
                try{
                    ListenerTest frame = new ListenerTest();
                    frame.setVisible(true);
                } catch(Exception e){
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public ListenerTest(){
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 200, 150);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(new BorderLayout(0, 0));

        message = new JLabel("Hello World");
        message.setFont(new Font("Times New Roman", Font.PLAIN, 16));
        message.setHorizontalAlignment(SwingConstants.CENTER);
        contentPane.add(message, BorderLayout.CENTER);

        button = new JButton("Click Me!");
        button.addActionListener(this);
        contentPane.add(button, BorderLayout.SOUTH);
    }

    @Override public void actionPerformed(ActionEvent arg0){
        JOptionPane.showMessageDialog(null, "Well, I listened for myself!");
        System.exit(0);
    }

} 
```

我的问题是：使用组件作为自己的监听器有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T16:59:54.787

它工作......是的。

话虽如此。我可以给你数百个糟糕的编码实践的例子，这就是其中之一。

*   几乎从不需要扩展`Jxxx`Swing 中的类（也许自定义绘画除外）。在您的示例中，您可以使用 a`JFrame`而不是扩展它
*   拥有一个实现`ActionListener`接口的类向您的 API/代码的用户建议它可以用作`ActionListener`. 但是，您的课程并非设计为`ActionListener`. 它是一个事实是一个可以更好地隐藏的实现细节。所以使用`ActionListener`(anonymous class, inner class, ...) 而不是直接实现它（或者甚至更好，使用 an `Action`）

不，`ActionListener`直接实现界面与*我看到GUI需要很长时间才能加载*

作为旁注。更好地使用`JFrame#pack()`然后调用`setBounds`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T17:00:08.630

`ActionListener`如果仅用于单个按钮，为什么要在类上实现它？

这样做的副作用是：

*   添加到其他类和组件可以访问此侦听器的事实

*   需要更多的检查来确定哪个组件正在触发侦听器（因为我看到许多其他组件的重用侦听器使用 if 检查哪个触发了侦听器）。

*   `Listener`除非将类用作侦听器，否则在类上实现 a 并不是很好的做法。

正确的解决方案 IMO：

[使用匿名内部类监听器：](http://www.leepoint.net/notes-java/GUI/events/anonymous_listener.html)

```
ActionListener al=new ActionListener() {
    @Override
     public void ActionPerformed(ActionEvent ae) {
     }
}; 
```

现在您可以通过 将其添加到您的单个按钮中`addActionListener`。

我得出上述不想在类上实现监听器的结论的原因是在 Swing 你不应该`JFrame`不必要地扩展类。

注释（与特定问题无关）：

*   正如我自己的编码偏好，不要使用`EventQueue`，而是[`SwingUtilities.invokeXXX`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)@Robin 说谁说的文档：*从 1.3 开始，这种方法只是一个掩护`java.awt.EventQueue.invokeLater()`*

# jquery - 为什么我的页面需要有 .hide() 的标签？

> ID：13543162
> 
> 赞同：-1
> 
> 时间：2012-11-24T16:38:22.493
> 
> 标签：jquery, label

为什么我的页面需要`<label id="error"></label>`运行`.hide()`？

删除此标签后，我的`.hide()`方法将根本不起作用。

我有一个表调用`aTable`，我想在表单处理后隐藏它。

```
$("#aTable").hide( "blind", 1000 ); 
```

只有当我的标签带有`id="error"`. 一旦我删除此标签，该方法将不再起作用？

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:15:36.630

尝试使用浏览器的调试工具在调用`.hide(...)`. 我有大约 80% 的把握，一旦你移除标签，它甚至永远不会被击中。

`.hide`在期望更改标签内容之前，我正在考虑一些代码。标签消失后，类似的东西`document.getElementById('error')`会返回 null，并且任何将该 null 值视为元素的尝试都会引发错误，从而在`hide`调用之前杀死脚本。

但是，在我没有看过代码的情况下，这只是一个相当有根据的猜测。:)

# jquery - 关于布局的 jquery ui 可排序的两个问题

> ID：13543163
> 
> 赞同：1
> 
> 时间：2012-11-24T16:38:29.553
> 
> 标签：jquery, jquery-ui, css-float, jquery-ui-sortable

我有两个重要的问题需要解决，我已经尝试了几个月......，可排序的问题，我创建了一个小提琴来复制问题：http: [//jsfiddle.net/tnLcg/134/](http://jsfiddle.net/tnLcg/134/)

将 F 拖到 B 中，你会明白我的意思，

我不希望 A、F、B 和 C 低于 B，然后是 D 和 E

```
A F B
    C
D E 
```

我想按照以下方式查看它。

```
A F B
C D E 
```

超过六个元素实际上看起来很糟糕，因为三个内联的结构没有保留，这是由于可排序元素上的可排序所需的浮点数。

另一个问题（不太重要）是如何在浮动 div 无法对齐时将这些浮动到左侧的 div 垂直对齐 - 到底部。

这是一个更新的小提琴，它涵盖了这两个问题，但在 ul 中添加了一个新问题，即额外的高度，如何在没有这个高度覆盖空间的情况下使其工作。

[http://jsfiddle.net/tnLcg/136/](http://jsfiddle.net/tnLcg/136/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:00:19.353

ul 有额外的高度，因为`.block`你的 li 上的类有 300px 的 a`min-height`和 a `line-height`，这比你最高的块高。尝试将这些属性设置为 200px，即块 E（最高）的高度：

```
.block {
    border: 1px dashed green;
    vertical-align: bottom;
    margin: 5px 0 0 5px;
    float: left;
    padding: 5px;
    display: block;
    width:190px;
    color:#ffffff;
    margin-left:10px;
    min-height:200px; /*Changed to 200px*/
    line-height:200px; /*Changed to 200px*/
    overflow-y:hidden;
} 
```

这是修改后的小提琴：http: [//jsfiddle.net/ztu2z/](http://jsfiddle.net/ztu2z/)

# joomla - 如何在 k2 项目的图像旁边显示 k2 额外字段

> ID：13543164
> 
> 赞同：0
> 
> 时间：2012-11-24T16:38:34.810
> 
> 标签：joomla, joomla-k2

我在一个政治网站上工作，正在使用 K2 模块，政治家的额外字段显示在 K2 项目的底部，但我的要求是在项目图像旁边显示所有可用的额外字段。

谁能帮帮我，谢谢和问候，k2 navy 用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:47:51.663

只需一个简单的模板覆盖即可完成此操作。制作此文件的副本 -

```
/components/com_k2/templates/default/item.php 
```

对副本进行所有您想要的更改，然后在此处上传 -

```
/templates/YOUR TEMPLATE/html/com_k2/OVERRIDE NAME/item.php 
```

完成此操作后，您需要做的就是将此新模板覆盖分配给您希望以这种方式显示内容的类别。在 K2 管理员的类别管理器中，选择类别，然后您应该会看到您在选择模板选项中使用的覆盖名称。

# php - 从 PHP GD 文件中输出动画 GIF

> ID：13543165
> 
> 赞同：1
> 
> 时间：2012-11-24T16:38:42.480
> 
> 标签：php, http, file-io

我在网络无法访问的文件夹中有一个动画 GIF 图像。我想通过 PHP GD 输出该图像，但是当输出时，GIF 是非动画的。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:03:56.987

而不是在 PHP-GD 中重新处理图像（您将通过这种方式分配更多的资源，而不是仅仅读取已经存在的文件。

1.  查看文件是否存在并且可读
2.  为预期输出设置适当的标题
3.  将文件数据返回给客户端

    ```
    if (!is_readable($FILE)){
        exit('Undefined file');
    }

    header('Content-type: image/gif');
    echo file_get_contents($FILE); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:50:12.743

您使用“路由脚本”来访问此类图像（或任何类型的文件）：

客户端->路由脚本->打开文件并转发内容->客户端

客户端请求这样的 url：`http://your.domain/some/path/image.php?id=animation`

使用类似这样的东西将文件内容输出到客户端：

```
<?php
    // some catalog (or database) where file-paths are kept
    $catalog = array(
        'animation' => '/path/to/animated_gif.gif';
    );

    // read which file the client wants to access
    $id = $_GET['animation'];

    // decide action on where that file is located physically
    if (!isset($catalog['id'])
    {
        // die with error message
        die('forbidden');
    }

    // send file content
    $success = readfile($catalog['id']);
    if (FALSE === $success)
    {
        // die with error message
        die('sorry, problems to give the file.');
    } 
```

请注意，要使其正常工作，不能通过 http 服务器直接访问 gif 文件。它是访问基于本地文件系统内部的文件的本地脚本。因此，该脚本充当客户端请求的路由器。

在脚本里面可以做各种花哨的事情：

*   计数请求
*   阻止未预定义的请求
*   修改你转发的任何内容
*   ... 无限可能 ...

# c# - 在 Adam Freeman 的 C# 示例中的 Pro Parallel Programming 中抛出 OperationCanceledException。这是一个错误还是我错过了什么？

> ID：13543168
> 
> 赞同：2
> 
> 时间：2012-11-24T16:38:53.883
> 
> 标签：c#, task-parallel-library

在 Adam Freeman 的 Pro .NET 4 Parallel Programming in C# 的 Visual Studio 2012 Listing_07 下的控制台应用程序中运行时，当我尝试取消任务时出现异常。对我来说，这似乎没有什么大不了的，因为我们`OperationCanceledException`在任务中检测到取消尝试时抛出（或者看起来如此）。

这是一个错误还是我错过了什么？这个问题基本上出现在他所有的任务取消示例中！我只能假设自从这本书进入商店（2010 年）以来，任务库中的某些内容发生了变化？

```
// create the cancellation token source
CancellationTokenSource tokenSource
    = new CancellationTokenSource();

// create the cancellation token
CancellationToken token = tokenSource.Token;

// create the task
Task task = new Task(() => {
    for (int i = 0; i < int.MaxValue; i++) {
        if (token.IsCancellationRequested) {
            Console.WriteLine("Task cancel detected");
            throw new OperationCanceledException(token);
        } else {
            Console.WriteLine("Int value {0}", i);
        }
    }
}, token);

// wait for input before we start the task
Console.WriteLine("Press enter to start task");
Console.WriteLine("Press enter again to cancel task");
Console.ReadLine();

// start the task
task.Start();

// read a line from the console.
Console.ReadLine();

// cancel the task
Console.WriteLine("Cancelling task");
tokenSource.Cancel();

// wait for input before exiting
Console.WriteLine("Main method complete. Press enter to finish.");
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:25:22.700

异常被 TPL 捕获，Task 进入 Canceled 状态。因此，虽然您会看到异常（如果您在调试器中打开了异常），但它会被处理。

正如 leon 提到的，您应该使用该`CancellationToken.ThrowIfCancellationRequested`方法，而不是明确地进行检查 + 扔自己。

此页面提供了有关取消任务的详细信息：http: [//msdn.microsoft.com/en-us/library/dd997396.aspx](http://msdn.microsoft.com/en-us/library/dd997396.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:27:10.483

没有尝试捕获来使异常静音。当您按两次回车时，它就会被抛出。不就是为了这样的行为吗？将它包裹在 try 'n catch 中，它应该是优雅的。

```
 try
                {
                    for (int i = 0; i < int.MaxValue; i++)
                    {
                        if (token.IsCancellationRequested)
                        {
                            Console.WriteLine("Task cancel detected");
                            token.ThrowIfCancellationRequested();
                        }
                        else
                        {
                            Console.WriteLine("Int value {0}", i);
                        }
                    }
                }
                catch(OperationCanceledException e)
                {
                    Console.WriteLine("Task cancelled via token!");
                } 
```

还有一个方便的 CancelletionToken.ThrowIfCancellationRequested() 方法可以用来捕捉。

# android - Android 中的多点触控查询。检测手指何时松开？

> ID：13543172
> 
> 赞同：0
> 
> 时间：2012-11-24T16:39:05.373
> 
> 标签：android, multi-touch

这就是我想要做的。我正在尝试使用我的 android 触摸板复制 Alt+Tab 功能。我的计算机上运行着一个 java 服务器，而我的 Nexus 7 上运行着一个 android 应用程序，它向服务器发送某些触摸事件。

当用户用 3 根手指触摸触摸屏时，我告诉服务器按下 alt 键。

```
 if(event.getPointerCount()==3)
     // Send message to server to hold alt key down 
```

现在，当用户移动一定距离时，我告诉服务器按下并释放 Tab 键。即shift改变当前窗口。

这是我遇到故障的地方。当用户释放所有 3 个手指时，我想告诉服务器释放 Alt 键，从而完成该过程。
我该怎么做？我尝试使用

```
if(event.getAction()==MotionEvent.ACTION_POINTER_2_UP && event.getAction()== MotionEvent.ACTION_POINTER_3_UP && event.getAction()== MotionEvent.ACTION_POINTER_1_UP)
//Release alt key 
```

但它没有用。

基本上，我想检测用户何时从触摸屏上松开了所有 3 个手指

更新 1。

我也尝试过使用

```
if(event.getPointerCount()==0)
       //send message 
```

但这也行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:06:35.023

您的第一次尝试不起作用，因为它需要在同一事件中接收 MotionEvent.ACTION_POINTER_n_UP，而这永远不会发生。你一一收到。

您的第二次尝试应该有效。如果它不起作用，则问题应该出在代码逻辑的其他部分。如果您想要更具体的答案，最好发布它。

问候。

# eclipse - 简单的jsf spring hibernate应用很慢

> ID：13543173
> 
> 赞同：0
> 
> 时间：2012-11-24T16:39:13.243
> 
> 标签：eclipse, hibernate, spring-mvc, glassfish-3

我正在学习 Hibernate，并使用 Eclipse Helios 作为 IDE、Oracle11g 作为数据库和 Glassfish 3 作为服务器来使用它。我正在关注一个简​​单的应用程序 [（JSF+Spring+Hibernate）](http://www.mkyong.com/jsf2/jsf-2-0-spring-hibernate-integration-example/)

我发现一个简单的选择和插入非常慢，选择查询几乎需要 25 秒。我想知道为什么它比普通的 JDBC 慢。

以下来自 server.log，当我刷新页面时，相同的查询执行了五次。这是慢的原因吗？

```
INFO: Hibernate: select customer0_.CUSTOMER_ID as CUSTOMER1_0_, 
customer0_.NAME as NAME0_, customer0_.ADDRESS as ADDRESS0_, customer0_.
CREATED_DATE as CREATED4_0_ from scott.customer customer0_

INFO: Hibernate: select customer0_.CUSTOMER_ID as CUSTOMER1_0_, 
customer0_.NAME as NAME0_, customer0_.ADDRESS as ADDRESS0_, customer0_.
CREATED_DATE as CREATED4_0_ from scott.customer customer0_

INFO: Hibernate: select customer0_.CUSTOMER_ID as CUSTOMER1_0_, 
customer0_.NAME as NAME0_, customer0_.ADDRESS as ADDRESS0_, customer0_.
CREATED_DATE as CREATED4_0_ from scott.customer customer0_

INFO: Hibernate: select customer0_.CUSTOMER_ID as CUSTOMER1_0_, 
customer0_.NAME as NAME0_, customer0_.ADDRESS as ADDRESS0_, customer0_.
CREATED_DATE as CREATED4_0_ from scott.customer customer0_

INFO: Hibernate: select customer0_.CUSTOMER_ID as CUSTOMER1_0_, customer0_.
NAME as NAME0_, customer0_.ADDRESS as ADDRESS0_, customer0_.
CREATED_DATE as CREATED4_0_ from scott.customer customer0_ 
```

任何见解或帮助都是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:29:49.550

好吧，我认为执行相同的查询 5 次不太可能是加载页面的最有效方式。

了解 Hibernate 等工具在幕后所做的工作很重要，也就是说，您不能只是假设一切都会执行。因此，查看生成的 SQL 肯定是正确的做法。

但是，您只能通过分析您的应用程序来真正回答您的问题。如果您发现执行查询需要 25 秒，您应该查看 Oracle 诊断工具。

# java - InputTextArea Keyup 事件和焦点

> ID：13543174
> 
> 赞同：0
> 
> 时间：2012-11-24T16:39:13.783
> 
> 标签：java, ajax, jsf, richfaces

我正在尝试使用 ajax 制作动态 InputTextArea。我解释一下：我有一个 inputTextArea 用户可以在其中写他的文本，但我想限制这个字符的数量。因为我不想让它成为服务器端，基本上是通过在提交步骤检查这个输入的大小。我尝试使其动态化：当达到字符数量时，将剪切用户输入。

所以，我写了这段代码：

```
<h:inputTextarea value="#{bean.val}" id="area">
      <a4j:ajax event="keyup" listener="#{bean.cutoff}" execute="@this" render="area" />
</h ...> 
```

在我的 bean 中，监听器做了非常基本的事情：

```
public void cutoff() {
    if(val.length() > 100)
            val = val.substring(0, 100);
} 
```

当我运行它时，我遇到了以下问题：每次我输入一个字母时，它都会失去对 inputTextArea 的关注。所以真的很无聊。

我试图在我的 a4j:ajax 中添加一个属性：

```
<a4j:ajax ... onbeforedomupdate="area.focus();"/> 
```

但它不起作用：我可以输入一些字母，但函数 (cutoff()) 不再调用。

所以我不知道该怎么办。第一个解决方案启动该功能但失去焦点，第二个解决方案重新获得焦点但不启动该功能（仅当我第一次这样做时）......

如果您有解决此问题的方法，那就太好了。

提前致谢。

# c# - 算法性能

> ID：13543177
> 
> 赞同：5
> 
> 时间：2012-11-24T16:39:28.917
> 
> 标签：c#, visual-studio-2010, performance, profiling, benchmarking

我正在计算机上测试不同参数的算法。我注意到每个参数的性能波动。

假设我第一次运行得到 20 毫秒，第二次得到 5 毫秒，第三次得到 4 毫秒：但是算法在这 3 次中应该是一样的。

我正在使用`stopwatch`C# 库来计算时间，有没有更好的方法来衡量性能而不受到这些波动的影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T16:44:27.237

欢迎来到基准测试的世界。

使用在 4 毫秒内完成的代码，您将无法仅运行一次就获得准确的测量结果。页面错误、静态初始化器、JIT、CPU 缓存、分支预测器和上下文切换都会影响运行时间，并且在很小的测试中，其中任何一个都可以很容易地产生巨大的差异。循环运行它，直到秒表测量超过 1 或 2 秒，然后除以它运行的次数。

此外，您应该在开始*之前*运行代码一次或两次，`Stopwatch`以确保代码在 CPU 的缓存中是 JIT 和热的。

当我想要一个穷人基准而不是分析时，这是我使用的代码。它比我上面描述的要多一点——比如从基准测试中删除秒表的开销，并向下钻取直到它确信它找到了最小的执行时间。

runCount = 检查下一个最小执行时间的次数。

subRunCount = 如果你传入的 Action 已经运行了一个循环，或者运行在多个项目上等，并且你想测量每个项目花费的时间，把计数放在这里。

```
static double Benchmark(string name, int runCount, int subRunCount, Action action)
{
    Console.WriteLine("{0}: warming up...", name);

    // warm up.
    action();

    Console.WriteLine("{0}: finding ballpark speed...", name);

    // find an average amount of calls it fill up two seconds.

    Stopwatch sw = Stopwatch.StartNew();

    int count = 0;
    do
    {
        ++count;
        action();
    }
    while (sw.ElapsedTicks < (Stopwatch.Frequency * 2));

    sw.Stop();

    Console.WriteLine("{0}: ballpark speed is {1} runs/sec", name, MulMulDiv(count, subRunCount, Stopwatch.Frequency, sw.ElapsedTicks));

    // The benchmark will run the Action in a loop 'count' times.

    count = Math.Max(count / 2, 1);

    // Start the benchmark.

    Console.Write("{0}: benchmarking", name);
    Console.Out.Flush();

    long minticks = long.MaxValue;
    int runs = 0;

    while (runs < runCount)
    {
        sw.Restart();

        for (int i = 0; i < count; ++i)
        {
            action();
        }

        sw.Stop();

        long ticks = sw.ElapsedTicks;

        if (ticks < minticks)
        {
            // Found a new smallest execution time. Reset.

            minticks = ticks;
            runs = 0;

            Console.Write('+');
            Console.Out.Flush();
            continue;
        }
        else
        {
            ++runs;
            Console.Write('.');
            Console.Out.Flush();
        }
    }

    Console.WriteLine("done");
    Console.WriteLine("{0}: speed is {1} runs/sec", name, MulMulDiv(count, subRunCount, Stopwatch.Frequency, minticks));

    return (double)count * subRunCount * Stopwatch.Frequency / minticks;
}

static long MulMulDiv(long count, long subRunCount, long freq, long ticks)
{
    return (long)((BigInteger)count * subRunCount * freq / ticks);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T16:44:17.320

首次运行需要更多时间，因为在执行时**，即时 (JIT) 编译器会将 MSIL 转换为本机代码**（请参阅[托管执行过程](http://msdn.microsoft.com/en-us/library/vstudio/k5532s8a%28v=vs.110%29.aspx)）。

要消除*首次运行问题*，您可以使用：

*   [**Ngen.exe（本机图像生成器）**](http://msdn.microsoft.com/en-us/library/vstudio/6t9t5wcf.aspx)；

> 本机映像生成器 (Ngen.exe) 是一种提高托管应用程序性能的工具。Ngen.exe 创建本机映像，这些文件包含已**编译的特定于处理器的机器代码**，并将它们安装到本地计算机上的本**机映像缓存中。**运行时可以使用缓存中的本机映像，而不是使用即时 (JIT) 编译器来编译原始程序集。

*   或运行**多次迭代**并跳过第一次运行的结果（但您需要确保它经过所有分支以编译它们）。

要在**不包含`StopWatch`**代码的情况下分析代码，可以使用Visual Studio 中包含的[Performance Profiler中的](http://msdn.microsoft.com/en-us/library/ms182372.aspx)[**检测分析。**](http://msdn.microsoft.com/en-us/library/ms182369.aspx)

> Visual Studio的[**检测分析**](http://msdn.microsoft.com/en-us/library/ms182369.aspx)方法记录了被分析应用程序中函数调用、行和指令的**详细计时信息：**

![经过时间](../Images/29464d6677c306a891359f320dadb50a.png)

您还可以分析“*热路径*”并比较来自多个不同运行的报告。

![热路径](../Images/ac681011b6073fea72d41801f8cc08de.png)

# javascript - 当哈希是视频时触发 jquery

> ID：13543178
> 
> 赞同：0
> 
> 时间：2012-11-24T16:39:38.113
> 
> 标签：javascript, jquery, video

我有一个简单的问题。我想做一些javascript。当 url 是#video. 例如。这是我的网站：www.website.nl。当网址为 www.website.nl/#video 时。比我必须做的 javascript。我该怎么做：

从此代码开始：

```
$("a[href='http://www.website.nl/#video']"){
            alert("test");
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:43:39.480

尝试这个：

```
var url = $('a').attr('href');
var hash = url.substring(url.indexOf("#")+1);

if ( hash === 'video' ) {
  alert('test');
}

<a href="http://www.website.nl/#video">a</a>​ 
```

[http://jsfiddle.net/EGHuB/9/](http://jsfiddle.net/EGHuB/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:46:53.940

你有正确的选择器，但是块封闭警报的语法错误

**[现场演示](http://jsfiddle.net/HDnnk/3/)**

```
$("a[href='http://www.website.nl/#video']").each(function(){
            alert("test");
});​ 
```

如果你知道你只有一个元素，那么你不需要每个元素

**[现场演示](http://jsfiddle.net/HDnnk/4/)**

```
 alert($("a[href='http://www.website.nl/#video']")[0].href);​ 
```

或者

**[现场演示](http://jsfiddle.net/HDnnk/5/)**

```
alert($("a[href='http://www.website.nl/#video']").attr('href'));​ 
```

# c++ - 一般来说，如何在 C++ 中的结构和类之间进行选择

> ID：13543179
> 
> 赞同：2
> 
> 时间：2012-11-24T16:39:44.353
> 
> 标签：c++, oop, class, struct

这是一个非常简单的问题，但在某些情况下，我似乎找不到选择一个而不是另一个的一般规则。

假设我有一个简单的`Point`类，如下所示：

```
class Point
{
public:
    Point();
    Point(double, double, double);

    Point(const Point& other);
    Point& operator=(const Point& other);

    bool operator==(Point& lhs, Point& rhs);

    void translate(double, double, double);

    double getX() const;
    double getY() const;    
    double getZ() const;

    void setX(const double);
    void setY(const double);
    void setZ(const double);

private:
    double x_, y_, z_;
} 
```

好吧，但为什么不把它变成一个带有公共 x、y、z 的结构并节省一半的代码呢？

另一个例子可以说我有一个`Header`这样的结构：

```
struct Header
{
    short int id;
    short int version;        
    size_t indexOffset;
    size_t indexSize;
} 
```

在什么情况下我想让它成为一个类？上述内容与我在这样的质量代码中也看到的内容之间是否有任何区别：

```
class Header
{
public:
    short int id;
    short int version;        
    size_t indexOffset;
    size_t indexSize;
} 
```

所以我想这个的一个子问题是我如何决定何时将成员变量设为私有。我知道 OO 纯粹主义者可能会说总是，但我不确定它的好处。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:13:39.177

```
regarding class vs. struct : 
```

如果您不需要成员函数，请使用 struct ，否则使用类。

```
regarding getters and setters : 
```

如果您需要直接访问成员 - 将其公开。将它们设为私有并通过 getter/setter 访问的唯一原因是，如果您在访问它们时需要执行某种处理，例如检查有效性或重新计算其他依赖成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:12:01.477

感谢 Bo Persson 提供的链接，我发现以下是相关的答案：

> 结构的成员和基类默认是公共的，而在类中，它们默认是私有的。注意：您应该明确地使您的基类公开、私有或受保护，而不是依赖默认值。
> 
> struct 和 class 在其他方面在功能上是等效的。
> 
> 好的，足够干净的技术谈话了。从情感上讲，大多数开发人员在类和结构之间做出了强烈的区分。结构感觉就像是一堆开放的位，封装或功能的方式很少。一个类感觉就像是一个活生生的、负责任的社会成员，具有智能服务、强大的封装屏障和定义明确的接口。由于这是大多数人已经拥有的含义，因此如果您的类具有很少的方法并且具有公共数据（这样的东西确实存在于设计良好的系统中！），您可能应该使用 struct 关键字，否则您可能应该使用该类关键词。

和

> 您使用哪种风格取决于环境和品味。我通常更喜欢将 struct 用于所有数据都公开的类。我认为这样的类“不是很合适的类型，只是数据结构。

资料来源： http:
[//www.parashift.com/c++-faq/struct-vs-class.html](http://www.parashift.com/c++-faq/struct-vs-class.html)
[http://www.amazon.com/dp/0201700735/?tag=stackoverfl08-20](https://rads.stackoverflow.com/amzn/click/com/0201700735)

# perl - Perl：如何从字节中提取某些位，然后将这些位转换为十六进制值？

> ID：13543180
> 
> 赞同：7
> 
> 时间：2012-11-24T16:39:53.177
> 
> 标签：perl, bitmap, bit-manipulation, bit, text-parsing

我需要提取字节的某些位并将提取位转换回十六进制值。

示例（字节的值为 0xD2）：

```
76543210 bit position
11010010 is 0xD2 
```

*   位 0-3 定义的*通道*是`0010b``0x2`
*   位 4-5 定义的*控制器*是`01b``0x1`
*   位 6-7 定义的*端口*是`11b``0x3`

我不知何故需要从字节是`0xD2`通道是`0x2`，控制器是`0x1`，端口是`0x3`

我用谷歌搜索了分配并找到了函数[`pack`](http://p3rl.org/pack)/[`unpack`](http://p3rl.org/unpack)和. 但我正在摸索如何使用这些功能来实现这一点。知道如何在 Perl 中实现这一点吗？[`vec`](http://p3rl.org/vec)[`sprintf`](http://p3rl.org/sprintf)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T16:52:26.447

初始格式是什么？

```
my $chr = chr(0b11010010);  # A character  e.g. from read()
my $bin = '11010010';       # Binary
my $hex = 'D2';             # Hexadecimal
my $num = 0b11010010;       # A number.
my $num = 0xD2;             # A number. 
```

您想首先将其转换为数字

```
my $num = ord($chr);
my $num = unpack('C', $chr);  # Alternative
my $num = oct("0b$bin");
my $num = hex($hex); 
```

然后你使用班次和面具。

```
my $channel    = ($num >> 0) & 0xF;   # Or just: $num & 0xF
my $controller = ($num >> 4) & 0x3;
my $port       = ($num >> 6) & 0x3;   # Or just: $num >> 6 
```

（您可以使用`0b1111`,`0b11`和`0b11`作为面具。大多数人使用十六进制。）

或者让我们`vec`为你找出面具。

```
my $channel    = vec $num, 0, 4;
my $controller = vec $num, 4, 2;
my $port       = vec $num, 6, 2; 
```

这是一个示例`$controller`：

```
 11010010
      >> 4
  --------
      11010010
&       11
  --------
        01 
```

（为清楚起见，省略了一些零。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T16:59:30.827

[`vec`](http://p3rl.org/vec)是一个不错的选择。我认为这很简单：

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature 'say';

my @channels    = map "channel_$_"      => 0 .. 15;
my @controllers = map "controller_$_"   => 0 .. 3;
my @ports       = map "port_$_"         => 0 .. 3;

my $bits        = 0b11010010;
my $channel     = vec $bits, 0, 4;
my $controller  = vec $bits, 4, 2;
my $port        = vec $bits, 6, 2;

say "channel    : $channels[$channel]";
say "controller : $controllers[$controller]";
say "port       : $ports[$port]"; 
```

输出：

```
channel    : channel_2
controller : controller_1
port       : port_3 
```

# java - 在java中解析字符串

> ID：13543181
> 
> 赞同：2
> 
> 时间：2012-11-24T16:39:54.603
> 
> 标签：java, string, parsing

我从服务器获取以下字符串，仅以空格分隔。（换行符只是为了便于阅读，“`XX`是一个占位符，长度可能会有所不同。方括号中的内容的长度也可能有所不同。

字符串 1：

```
status:ok [XXX][a=XXX b=XXX c=XXX d=XXX e=0 f=XXX g=XXX h=XXX i=XXX j=XXX 
k=XXX l=XXX m=XXX n=[[XXX][XXX]] p=[[XXX][XXX][XXX][XXX][XXX][XXX][XXX]]]
end:end 
```

字符串 2：

```
status:ok [XXX][a=XXX b=XXX  c=XXX d=XXX d2=XXX e=XXX  f=XXX g=XXX h=XXX i=XXX j=XXX 
k=XXX l=XXX m=XXX n=[[XXX][XXX]] p=[[XXX][XXX][XXX][XXX][XXX][XXX][XXX]]]
end:end 
```

方括号“[]”中的所有部分都可以包含或多或少的“[]”元素，并且内部“[]”中的单词的长度可以不同。我需要 HashMap 中的 a、b、c、d、e 等，但在我能做到之前，我需要以某种方式解析它。

**如何在 Java 中有效地解析这个字符串？**

我搜索并发现了很多网站和线程，人们建议除了“正则表达式解析”之外还有一些叫做“键值解析”的东西，但不幸的是，关于“键值解析”的信息很少。

编辑：最后，我想将这些值存储在 Hashmap 中，如下所示：

```
HashMap<String,Object> myHashMap = new HashMap();
myHashMap.put(a, XXX);
....
myHashMap.put(p,array-of-all-[XXX]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:52:03.883

你可以简单地这样做，它会打印你的 a,b,c ..

```
 String s ="status:ok [XXX][a=XXX b=XXX c=XXX d=XXX e=0 f=XXX g=XXX h=XXX i=XXX j=XXX k=XXX l=XXX m=XXX n=[[XXX][XXX]] p=[[XXX][XXX][XXX][XXX][XXX][XXX][XXX]]] end:end".replaceAll("end:end", "");

    String [] ss  = s.split("=");
    HashMap<Character,Object> myHashMap = new HashMap();
    try{
    for(int i=0;i<ss.length;i++){

        myHashMap.put(ss[i].charAt(ss[i].length()-1), ss[i+1].substring(0, ss[i+1].length()-1).trim());

    }

    }catch(Exception e){
        // do nothing
    }
      System.out.println(myHashMap);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:46:01.433

它不是Regex-Parsing，而是一些键值解析，但主要是通用解析。
你应该研究那个话题。

您的字符串中的问题是表达式 [] 可以包含其他表达式（嵌套 [[]]）。
这不是三行就能解决的。
尝试搜索解释如何解析表达式。
此外，您需要了解什么是“语法”。然后在字符串中写下那个表达式的语法，
那么工作就完成了一半，因为你可以或多或少地严格按照语法来实现解析。

**另一种解决方案：**使用上面不适用于 n 和 p （数组）的答案之一。然后在第二步中解析表达式 [[XXX][XXX][XXX][XXX][XXX][XXX]]，这并不难；（您可以使用`String.split("]")`并返回字符串，直到找到“[”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:50:48.113

这有帮助吗

```
String str = "status:ok [XXX][a=XXX b=XXX c=XXX d=XXX e=0 f=XXX g=XXX h=XXX i=XXX j=XXX k=XXX l=XXX m=XXX n=[[XXX][XXX]] p=[[XXX][XXX][XXX][XXX][XXX][XXX][XXX]]] end:end";
String[] splitStrA = str.split(" ");         
HashMap<String,String> map = new HashMap() ;
for (String splitStr : splitStrA) {
    String[] splitStr1 = splitStr.split("=");
    if (splitStr1.length == 2) {
        map.put(splitStr1[0], splitStr1[1]);
    }
}
System.out.println(map); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T16:52:58.010

**与其使用正则表达式，不如使用经典的字符串标记器**？

这些天来，每个人都试图用正则表达式粉碎一切。这在 Perl 中很有意义，因为 regexp 在那里是一种非常简写的语法。但是对于 Java，正则表达式有点笨拙。

但是，Java 带来了许多有用的类，例如[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)。有些人认为它不鼓励，但在许多情况下它非常有用。

当然，还有各种帮助解析文件格式的包。

例如，[CUP](http://www2.cs.tum.edu/projects/cup/)是Weka 机器学习工具包使用的**解析器生成器。**

[JFlex](http://jflex.de/)可能受到经典 C“flex”解析器生成器（以及 Yacc、Bison 等）的启发。

一个好的解析器将能够解析嵌套表达式。它将知道如何解释表达式，`a=[[1,2],[3,4]]`即使它们嵌套得很深。正则表达式不能做到这一点。

正则表达式没有错。但它们是为*匹配*而设计的，而不是为*解析*而设计的。

# java - Android Webview 初始缩小

> ID：13543186
> 
> 赞同：25
> 
> 时间：2012-11-24T16:40:17.523
> 
> 标签：java, android, webview, zooming

我在我的android应用程序中使用webview，在应用程序启动的那一刻，网站被放大了很多，我希望它被缩小以适应屏幕的宽度。我目前在我的活动中有这个：

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.shop);
    WebView webview;
    webview = (WebView) findViewById(R.id.webview);
    webview.setWebViewClient(new WebViewClient());
    webview.getSettings().setJavaScriptEnabled(true);
    webview.loadUrl("http://www.example.com"); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-24T16:43:41.933

```
webview.getSettings().setLoadWithOverviewMode(true); 
```

这将导致 webview 最初被缩小。

```
webview.getSettings().setUseWideViewPort(true); 
```

Webview 将有一个普通的视口（如桌面浏览器），当为 false 时，webview 将有一个视口限制为它自己的尺寸。

**编辑**：随着 Android KitKat 中“Chrome 网络视图”的引入，此代码可能无法正常工作。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-07-24T09:37:56.167

这会缩小，以便内容（在我的情况下为 SVG）适合屏幕，但不会产生不必要的空间。

```
webView.getSettings().setUseWideViewPort(true);
webView.setInitialScale(1); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-24T16:45:00.807

尝试这个：

```
 webView.setInitialScale(50);
    webPlanSettings.setDefaultZoom(WebSettings.ZoomDensity.FAR);
    webPlanSettings.setUseWideViewPort(true); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-24T09:56:12.573

```
 //This the the enabling of the zoom controls 
    webView.getSettings().setBuiltInZoomControls(true);

    //This will zoom out the WebView
    webView.getSettings().setUseWideViewPort(true);
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.setInitialScale(1); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-24T16:42:33.167

使用[webSettings](http://developer.android.com/reference/android/webkit/WebSettings.html)类来设置缩放级别...

```
webview.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-20T22:41:18.473

对于 Kit Kat 和更高版本的设备，您需要在 WebView 加载的 HTML 页面的标题中设置视口元标记，以防止默认的放大行为。

```
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/> 
```

# c++ - 如何检索 DirectX 9 的错误字符串

> ID：13543195
> 
> 赞同：10
> 
> 时间：2012-11-24T16:41:20.920
> 
> 标签：c++, winapi, com, error-handling, directx

我想检索 DirectX 9 的错误字符串，但我可以在网上找到正在使用 FormatMessage() 和 _com_error.ErrorMessage()，这两个都让我失败了。

```
hr = g_pd3dDevice->GetRenderTargetData(...
... // the debugger tells me hr = 0x8876086c
FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER |
    FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,
    NULL, hr, 0, (LPTSTR)&lpBuf, 0, NULL))
// it returns 0 with lpBuf unallocated 
```

FormatMessage() 失败，我再次使用 GetLastError() 来查看 FormatMessage() 失败的原因：“系统在 %2 的消息文件中找不到消息号 0x%1 的消息文本。”

_com_error.ErrorMessage() 告诉我“未知错误 0x8876086c”

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-24T16:59:07.780

要获取 DirectX 错误消息，有两个函数 —`DXGetErrorString()`和`DXGetErrorDescription()`. 话虽这么说，`FormatMessage()`不会得到你想要的。这是一个小例子：

```
// You'll need this include file and library linked.
#include <DxErr.h>
#pragma comment(lib, "dxerr.lib") 
```

...

```
if (FAILED(hr)) {
    fprintf(stderr, "Error: %s error description: %s\n",
        DXGetErrorString(hr), DXGetErrorDescription(hr));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-18T00:51:30.203

根据[https://walbourn.github.io/wheres-dxerr-lib/](https://walbourn.github.io/wheres-dxerr-lib/)（也链接到 kreuzerkrieg 的评论）：

> 在已经支持 DXERR 报告的大多数系统错误代码的 Windows 8 中使用 FORMAT_MESSAGE_FROM_SYSTEM 时，将 DirectX 图形 API 的 HRESULTS 添加到 FormatMessage 函数

同时，包含该`DXGetErrorString()`函数的先前 DXERR.LIB 库在 Windows SDK 8 中被删除（DirectX SDK 被合并到其中）。

如果您想要一个适用于任何 Windows 操作系统的解决方案，您可以使用该网站上发布的 MIT 许可的 DXERR.LIB 库的“精简版”。

# django - 如何在 Django 中为用户设置权限（不使用管理员）？

> ID：13543196
> 
> 赞同：0
> 
> 时间：2012-11-24T16:41:21.987
> 
> 标签：django, django-permissions

我是 Django 新手，我想在不使用模板中的管理员的情况下设置权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:00:11.447

来自[https://docs.djangoproject.com/en/dev/topics/auth/#methods](https://docs.djangoproject.com/en/dev/topics/auth/#methods)：

这是如何以编程方式添加/删除权限

```
myuser.groups = [group_list]
myuser.groups.add(group, group, ...)
myuser.groups.remove(group, group, ...)
myuser.groups.clear()

myuser.user_permissions = [permission_list]
myuser.user_permissions.add(permission, permission, ...)
myuser.user_permissions.remove(permission, permission, ...)
myuser.user_permissions.clear() 
```

# c# - 如何为 WPF 网格中的所有元素设置特定的高度/宽度？

> ID：13543197
> 
> 赞同：2
> 
> 时间：2012-11-24T16:41:23.947
> 
> 标签：c#, wpf

我有一个自定义列表框，其中每个项目都有一个定义了我显示框的网格。我可以使用 SharedSizeGroup 属性将宽度设置为相同的长度。但是，如何为父 ListBox 元素中的所有这些项目共享此属性？

我也尝试在 ListBox 元素上设置属性，但这不起作用。

```
<ListBox
    ItemContainerStyle="{StaticResource MyStyle}"...>

<Style x:Key="MyStyle" TargetType="ListBoxItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListBoxItem">
                <Grid Grid.IsSharedSizeScope="True">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" SharedSizeGroup="Box" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="Box" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="Box" />
                    </Grid.ColumnDefinitions>
                    <Border Grid.Column="0">
                        <TextBlock Text="{Binding PropertyA}" />
                    </Border>
                    <Border Grid.Column="1">
                        <TextBlock Text="{Binding PropertyB}" />
                    </Border>
                    <Border Grid.Column="2">
                        <TextBlock Text="{Binding PropertyC}" />
                    </Border>
                </Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:42:04.867

而不是设置属性`Grid.IsSharedSizeScope="True"`on `Grid`，而是像这样在 Listbox 上设置它 -

```
 <ListBox Grid.IsSharedSizeScope="True"> 
```

并将其从`Grid`.

`all`这将使`listboxItems`to`share the same size`代替单个项目。

# c - 通过 main 传递参数

> ID：13543199
> 
> 赞同：-1
> 
> 时间：2012-11-24T16:41:51.087
> 
> 标签：c

下面的代码在我通过 ./a.out abc abd 在 ubuntu 终端中运行时打印垃圾值

```
#include<stdio.h>

int main(int size_of_args, char args[10][10])
{
    while(size_of_args)
        printf("%s\n",args[--size_of_args]);

    return 0;
} 
```

但是下面的代码运行正确，请解释一下。

```
#include<stdio.h>

int main(int size_of_args, char *args[])
{
    while(size_of_args)
        printf("%s\n",args[--size_of_args]);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T16:48:34.510

因为`char args[10][10]`是一个 10x10 字符的数组，而 while`char *args[]`是一个指向（数组）指针（数组）的指针（数组）字符。后者是如何将参数传递给`main`.

一个合理的编译器会在第一种情况下警告您，您对`main`.

# mysql - SQL，约束检查

> ID：13543211
> 
> 赞同：1
> 
> 时间：2012-11-24T16:43:00.997
> 
> 标签：mysql, sql

我正在创建我的第一个 mysql 脚本，并希望创建一个包含“类型”列的表。它应该只有两个可能的值：“XYZ”和“ABC”，所以我做了：

```
CREATE TABLE table(
type varchar(12) NOT NULL,
CHECK (type = 'XYZ' or type = 'ABC'); 
```

但是当我测试和插入像 234 或 'John' 这样的值时，它正在工作并且不会返回任何错误。我认为它不应该插入值“约翰”，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:55:25.473

MySQL[不支持](https://stackoverflow.com/a/2115641/50552)检查约束：

```
The CHECK clause is parsed but ignored by all storage engines. 
```

因此，虽然该`check`语句没有给出错误，但它会被默默地忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:56:22.373

改为使用`enum`：

```
CREATE TABLE test( 
  type ENUM('XYZ', 'ABC')
); 
```

请参阅[此 SQL 小提琴](http://sqlfiddle.com/#!2/a2ef2/1)。尝试将插入更改为“John”，您将收到错误消息：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:06:17.083

似乎MYSQL没有检查......

[http://bugs.mysql.com/bug.php?id=25660](http://bugs.mysql.com/bug.php?id=25660)

[http://blog.christosoft.de/2012/08/mysql-check-constraint/](http://blog.christosoft.de/2012/08/mysql-check-constraint/)

[http://forums.mysql.com/read.php?136,572271,572603#msg-572603](http://forums.mysql.com/read.php?136,572271,572603#msg-572603)

你可以试试触发器。

# c - 为什么这段代码不交换数字？

> ID：13543218
> 
> 赞同：-3
> 
> 时间：2012-11-24T16:44:09.240
> 
> 标签：c

> **可能重复：**
> [为什么这些交换函数的行为不同？](https://stackoverflow.com/questions/4330929/why-do-these-swap-functions-behave-differently)

看看下面的代码，旨在交换两个数字，但事实并非如此。请帮助我理解它没有的原因。我是编程新手，所以如果您能比平时更多地解释这些事情，我将不胜感激。谢谢！

```
#include <stdio.h>
void swap (int a, int b);
int main (void)
{
   int x = 1;
   int y = 2;
   swap (x, y);
   printf ("Now x is %d and y is %d\n", x, y);

   return 0;

}
//function definition of swap
void swap (int a, int b)
{
   int temp = a;
   int a = b;
   int b = temp;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T16:45:14.023

C 是按值传递的，因此`swap`函数接收值的副本，并且不能影响调用者中的变量。

要影响调用者中的变量，您需要将指针传递给它们。

```
void swap(int *a, int *b) {
    int temp = *a;
    *a = *b;
    *b = temp;
} 
```

并称之为

```
swap(&x, &y); 
```

在`main`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T16:45:45.957

这是因为您通过副本而不是指针传递变量。换句话说，您的`swap()`函数接收其自己的私有副本`x`并`y`交换它们，并且调用者看不到交换的结果。正确的代码可能如下所示：

```
#include <stdio.h>

void swap(int *a, int *b);

int main(void)
{
    int x = 1;
    int y = 2;
    swap(&x, &y);
    printf("Now x is %d and y is %d\n", x, y);
    return 0;
}

//function definition of swap
void swap(int *a, int *b)
{
    int temp = *a;
    *a = *b;
    *b = temp;
} 
```

# tinymce - Tiny MCE：如何让人们缩进

> ID：13543220
> 
> 赞同：10
> 
> 时间：2012-11-24T16:44:17.217
> 
> 标签：tinymce

我试图找出如何让人们在 Tiny MCE 编辑器中缩进。现在，只要有人按下`tab`，他们就会进入下一个字段。是否有任何代码可以让他们实际点击`tab`并让它为新段落创建一个选项卡。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-11-20T09:35:42.257

对于较新版本的 Tiny MCE 编辑器，以下解决方案对我有用：

```
setup: function(ed) {
    ed.on('keydown', function(event) {
        if (event.keyCode == 9) { // tab pressed
          if (event.shiftKey) {
            ed.execCommand('Outdent');
          }
          else {
            ed.execCommand('Indent');
          }

          event.preventDefault();
          return false;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-26T09:16:51.663

您可以捕获此事件，`stopPropagation/return false`以防用户按下选项卡。

```
// Adds an observer to the onKeyUp event using tinyMCE.init
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onKeyDown.add(function(ed, evt) {
          console.debug('Key up event: ' + evt.keyCode);
          if (evt.keyCode == 9){ // tab pressed
            ed.execCommand('mceInsertRawHTML', false, '\x09'); // inserts tab
            evt.preventDefault();
            evt.stopPropagation();
            return false;
          }
      });
   }
}); 
```

如果用户在段落的开头或结尾插入制表符，它将被浏览器删除（解决方法是插入一个预定义长度的特殊字符，而不是制表符）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-31T15:26:41.067

Thariama 的解决方案并不适合我。我同意 Jon Hulka 的修正。这似乎在 Firefox (mac+pc)、Chrome (mac+pc) 和 Internet Exploder 上运行良好。它并不完美，但我发现它非常有用且可以接受。谢谢乔恩

因此，包装 op Jon 的解决方案：

```
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onKeyDown.add(function(ed, evt) {
          if (evt.keyCode == 9){
            ed.execCommand('mceInsertContent', false, '&emsp;&emsp;');
            evt.preventDefault();
          }
      });
   }
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-07T13:16:36.107

这里给出的答案不太符合我的要求，因为我需要在一行中间缩进文本。我列出了办公室分支机构的名称，并希望他们的电话号码对齐。由于每个办公室名称的长度不同，我尝试了@Mac 的答案和空格的组合，但我无法让它足够准确，所以我使用 shift 键和空格键添加了一个小空格选项，这让我可以让所有内容完美排列. 唯一的缺点是 tinymce 的默认实体不包括在内`&hairsp;`，因此我不得不将默认实体列表添加到我的设置中，并在最后添加“8202，hairsp”。

```
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.on('keydown', function(event) {
        if (event.keyCode == 9) { // tab pressed
            ed.execCommand('mceInsertContent', false, '&emsp;&emsp;'); // inserts tab
            event.preventDefault();
            return false;
        }
        if (event.keyCode == 32) { // space bar
            if (event.shiftKey) {
                ed.execCommand('mceInsertContent', false, '&hairsp;'); // inserts small space
                event.preventDefault();
                return false;
            }
        }
      });
   }
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-30T12:00:22.027

它可以通过tinymce中提供的不间断插件来完成

```
tinymce.init({
  selector: "textarea",  // change this value according to your HTML
  plugins: "nonbreaking",
  mewnubar: "insert",
  toolbar: "nonbreaking",
  nonbreaking_force_tab: true
}); 
```

详细信息可以在[https://www.tinymce.com/docs/plugins/nonbreak/](https://www.tinymce.com/docs/plugins/nonbreaking/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-19T07:43:08.127

**您可以使用以下代码轻松添加选项卡空间**

```
 ed.on('keydown',function(evt){
            if (evt.keyCode==9) {
                ed.execCommand('mceInsertContent', false, '<span class="mce-nbsp">&emsp;&emsp;&emsp;&emsp;</span>');
                tinymce.dom.Event.cancel(evt);
                return;
            }
    }); 
```

# javascript - 创建一个根据 ID 号命名的变量？

> ID：13543224
> 
> 赞同：0
> 
> 时间：2012-11-24T16:44:38.233
> 
> 标签：javascript, jquery, variables

有没有办法创建一个变量，并在实际变量名的末尾添加一个 ID？

我有一个名为“gauge”的变量，用于创建一个新的 Gauge 对象：

```
var gauge = new Gauge(target).setOptions(opts); 
```

我想为变量添加一个 ID，例如：

```
var gauge+id = new Gauge(target).setOptions(opts); 
```

这是因为我正在创建许多这样的对象，并且每个对象都有一个特定的 ID，如果可能的话，我想将其附加到仪表对象上吗？

我所有的这个函数的代码都在下面，如果它能让你更好地了解我需要做什么：

```
 function go(id, votes)
{

var val = $('#votes_'+id).text();

var target = document.getElementById('foo_'+id); // your canvas element

var gauge = new Gauge(target).setOptions(opts); // create sexy gauge!
gauge.maxValue = 100; // set max gauge value
gauge.animationSpeed = 20; // set animation speed (32 is default value)
var a=votes+0.5;
gauge.set(val); // set actual value
} 
```

我的主要问题出现在最后一行。它说gauge.set（val），它只设置最后一个对象，忽略所有其他对象......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T16:46:07.810

你可以做

```
window['gauge'+id] = new Gauge(target).setOptions(opts); 
```

但通常最好使用数组或对象作为映射：

```
var gauges = {};
gauges[id] = new Gauge(target).setOptions(opts); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:46:56.717

你为什么不只使用一个数组，像这样：

```
var gauge = []; //this needs be declared at global scope
gauge[id] = new Gauge(target).setOptions(opts); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T16:50:27.350

您几乎没有可能的解决方案。

1.  使用 eval() - 慢一
2.  使用 key/val 数组 - 最佳解决方案
3.  创建一个对象 - 也是不错的选择，但它需要一些规划

在您的情况下，选项 2 是最好的。

[在这里](https://stackoverflow.com/questions/5944749/how-do-i-declare-and-use-dynamic-variables-in-javascript)您可以找到更多信息。

或者一个例子：

```
 var counter = 1;
 eval("var btn" + counter + "=123;");
 alert(btn1); 
```

# c++ - 解析未解析的外部符号 CSourceSeeking::CSourceSeeking(...) 尽管链接到正确的库

> ID：13543233
> 
> 赞同：1
> 
> 时间：2012-11-24T16:45:35.177
> 
> 标签：c++, windows, visual-studio-2010, windows-7, directshow

这是错误：

> 错误 2 错误 LNK2019：未解析的外部符号“受保护：__thiscall CSourceSeeking::CSourceSeeking(char const *,struct IUnknown *,long *,class CCritSec *)”(??
> 0CSourceSeeking@@IAE@PBDPAUIUnknown@@PAJPAVCCritSec@@@Z)在函数“public: __thiscall CPushPin::CPushPin(long *,class CSource *)”中引用 (??0CPushPin@@QAE@PAJPAVCSource@@@Z) C:\Users\x\Desktop\PushSource\PushFilter.obj > PushSource

这是我的库：

> gdiplus.lib strmbasd.lib msvcrtd.lib winmm.lib odbc32.lib odbccp32.lib

CSourceSeeking 在什么库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:52:50.383

[显然，您必须自己创建`Strmbase.lib`/ 。`Strmbased.lib`](http://social.msdn.microsoft.com/Forums/en/windowssdk/thread/1d38b047-cd75-4381-adde-071e3f2a5c51)确保它是为您的目标构建的（即，如果您的程序是 32 位的，请确保它是作为 32 位库构建的；对于 64 位也是如此）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:48:45.620

在 MSDN 上大多数 C/C++ API 参考页面的底部，您会找到一个*参考*部分，告诉您要包​​含哪些标头以及要链接哪些库。

相应地，在[CSourceSeeking 参考页面的](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375200.aspx)*参考*部分中，您将找到您的答案：

```
Strmbase.lib (retail builds)
Strmbasd.lib (debug builds) 
```

* * *

**编辑**

有关如何构建/自己的说明，请参阅[@Cornstalk 的答案。](https://stackoverflow.com/a/13543307/66516)构建/时，请确保库构建设置与程序的构建设置相匹配：32/64 位、/等。对其中一个或另一个使用不同的设置会导致错误。`Strmbase.lib``Strmbased.lib``Strmbase.lib``Strmbased.lib``UNICODE``ANSI`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:51:05.547

[CSourceSeeking 类](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375200%28v=vs.85%29.aspx)是 Strmbase.lib 库（或用于调试构建的 Strmbasd.lib）的一部分。通常，MSDN 会在相应文档页面的“要求”部分下声明头文件和库要求。

# android - 使用 Android 和 Maven

> ID：13543244
> 
> 赞同：0
> 
> 时间：2012-11-24T16:46:33.923
> 
> 标签：android, eclipse, maven

我正在使用[此处](http://www.vogella.com/articles/AndroidBuildMaven/article.html)找到的 Android Maven 教程。我已经为 Eclipse 安装了 m2e 插件。现在我的 src 目录有点乱了。它读取 src 目录，并将 main/java 目录视为包名。我该如何纠正这个。当然，我只是将 java 目录作为我的 src 文件夹，但 eclipse 应该将其识别为 maven 项目。当我使用 Web 应用程序时，这是可行的，如果是 Android 应用程序，我如何强制 Eclipse 执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:54:25.730

您可以通过将 sourceDirectory 添加到构建部分来在 pom.xml 中指定您的 java 包存在的确切位置：

```
<build>
    <sourceDirectory>${project.basedir}/src/main/java</sourceDirectory>
</build> 
```

maven 项目中 java 包的标准位置是将它们放在 src/main/java 中，因此只有在使用不同的位置时才需要 sourceDirectory，如教程所示：

```
<sourceDirectory>src</sourceDirectory> 
```

只要将 pom 配置为指向正确的位置，您就可以将它们放在您喜欢的位置。

顺便说一句，Intellij IDEA 在处理 maven 项目方面做得比 Eclipse 似乎做得更好，而且下个月发布的[第 12 版具有出色的 Android 功能。](http://www.jetbrains.com/idea/nextversion/index.html)

# java - 使用 JOCL/OPENCL 加速强度总和计算

> ID：13543248
> 
> 赞同：4
> 
> 时间：2012-11-24T16:46:53.287
> 
> 标签：java, opencl, jocl

嗨，我是 JOCL（opencl）的新手。我编写了这段代码来获取**每个图像的强度总和**。内核采用一个包含所有图像的所有像素的一维数组，这些图像的所有像素相互放在一起。图像为 300x300 ，因此每张图像有 90000 像素。目前它比我按顺序执行此操作时要慢。

我的代码

```
package PAR;

/*
 * JOCL - Java bindings for OpenCL
 * 
 * Copyright 2009 Marco Hutter - http://www.jocl.org/
 */
import IMAGE_IO.ImageReader;
import IMAGE_IO.Input_Folder;
import static org.jocl.CL.*;

import org.jocl.*;

/**
 * A small JOCL sample.
 */
public class IPPARA {

    /**
     * The source code of the OpenCL program to execute
     */
    private static String programSource =
            "__kernel void "
            + "sampleKernel(__global uint *a,"
            + "             __global uint *c)"
            + "{"
            + "__private uint intensity_core=0;"
            + "      uint i = get_global_id(0);"
            + "      for(uint j=i*90000; j < (i+1)*90000; j++){ "
            + "              intensity_core += a[j];"
            + "     }"
            + "c[i]=intensity_core;" 
            + "}";

    /**
     * The entry point of this sample
     *
     * @param args Not used
     */
    public static void main(String args[]) {
        long numBytes[] = new long[1];

        ImageReader imagereader = new ImageReader() ;
        int srcArrayA[]  = imagereader.readImages();

        int size[] = new int[1];
        size[0] = srcArrayA.length;
        long before = System.nanoTime();
        int dstArray[] = new int[size[0]/90000];

        Pointer srcA = Pointer.to(srcArrayA);
        Pointer dst = Pointer.to(dstArray);

        // Obtain the platform IDs and initialize the context properties
        System.out.println("Obtaining platform...");
        cl_platform_id platforms[] = new cl_platform_id[1];
        clGetPlatformIDs(platforms.length, platforms, null);
        cl_context_properties contextProperties = new cl_context_properties();
        contextProperties.addProperty(CL_CONTEXT_PLATFORM, platforms[0]);

        // Create an OpenCL context on a GPU device
        cl_context context = clCreateContextFromType(
                contextProperties, CL_DEVICE_TYPE_CPU, null, null, null);
        if (context == null) {
            // If no context for a GPU device could be created,
            // try to create one for a CPU device.
            context = clCreateContextFromType(
                    contextProperties, CL_DEVICE_TYPE_CPU, null, null, null);

            if (context == null) {
                System.out.println("Unable to create a context");
                return;
            }
        }

        // Enable exceptions and subsequently omit error checks in this sample
        CL.setExceptionsEnabled(true);

        // Get the list of GPU devices associated with the context
        clGetContextInfo(context, CL_CONTEXT_DEVICES, 0, null, numBytes);

        // Obtain the cl_device_id for the first device
        int numDevices = (int) numBytes[0] / Sizeof.cl_device_id;
        cl_device_id devices[] = new cl_device_id[numDevices];
        clGetContextInfo(context, CL_CONTEXT_DEVICES, numBytes[0],
                Pointer.to(devices), null);

        // Create a command-queue
        cl_command_queue commandQueue =
                clCreateCommandQueue(context, devices[0], 0, null);

        // Allocate the memory objects for the input- and output data
        cl_mem memObjects[] = new cl_mem[2];
        memObjects[0] = clCreateBuffer(context,
                CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR,
                Sizeof.cl_uint * srcArrayA.length, srcA, null);
        memObjects[1] = clCreateBuffer(context,
                CL_MEM_READ_WRITE,
                Sizeof.cl_uint * (srcArrayA.length/90000), null, null);

        // Create the program from the source code
        cl_program program = clCreateProgramWithSource(context,
                1, new String[]{programSource}, null, null);

        // Build the program
        clBuildProgram(program, 0, null, null, null, null);

        // Create the kernel
        cl_kernel kernel = clCreateKernel(program, "sampleKernel", null);

        // Set the arguments for the kernel
        clSetKernelArg(kernel, 0,
                Sizeof.cl_mem, Pointer.to(memObjects[0]));
        clSetKernelArg(kernel, 1,
                Sizeof.cl_mem, Pointer.to(memObjects[1]));

        // Set the work-item dimensions
        long local_work_size[] = new long[]{1};
        long global_work_size[] = new long[]{(srcArrayA.length/90000)*local_work_size[0]};

        // Execute the kernel
        clEnqueueNDRangeKernel(commandQueue, kernel, 1, null,
                global_work_size, local_work_size, 0, null, null);

        // Read the output data
        clEnqueueReadBuffer(commandQueue, memObjects[1], CL_TRUE, 0,
                (srcArrayA.length/90000) * Sizeof.cl_float, dst, 0, null, null);

        // Release kernel, program, and memory objects
        clReleaseMemObject(memObjects[0]);
        clReleaseMemObject(memObjects[1]);
        clReleaseKernel(kernel);
        clReleaseProgram(program);
        clReleaseCommandQueue(commandQueue);
        clReleaseContext(context);

        long after = System.nanoTime();

        System.out.println("Time: " + (after - before) / 1e9);

    }
} 
```

在答案中的建议之后，通过 CPU 的并行代码几乎与顺序代码一样快。还有什么可以改进的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:05:40.453

```
 for(uint j=i*90000; j < (i+1)*90000; j++){ "
        + "              c[i] += a[j];" 
```

1）您正在使用全局内存（c[]）来求和，这很慢。使用私有变量使其更快。像这样的东西：

```
 "__kernel void "
        + "sampleKernel(__global uint *a,"
        + "             __global uint *c)"
        + "{"
        + "__private uint intensity_core=0;" <---this is a private variable of each core
        + "      uint i = get_global_id(0);"
        + "      for(uint j=i*90000; j < (i+1)*90000; j++){ "
        + "              intensity_core += a[j];" <---register is at least 100x faster than global memory
         //but we cannot get rid of a[] so the calculation time cannot be less than %50
        + "     }"
        + "c[i]=intensity_core;"   
        + "}";  //expecting %100 speedup 
```

现在你有 c[number of images] 强度总和数组。

**您的本地工作大小为 1，如果您至少有 160 张图像（这是您的 gpu 的核心编号），那么计算将使用所有核心。**

您将需要 90000*num_images 次读取和 num_images 次写入以及 90000*num_images 次寄存器读取/写入。使用寄存器将使您的内核时间减半。

2）每 2 次内存访问你只做 1 次数学运算。每 1 次内存访问至少需要 10 次数学运算才能使用 gpu 峰值 Gflops 的一小部分（6490M 的峰值 Gflops 为 250）

您的 i7 cpu 可以轻松拥有 100 Gflops，但您的内存将成为瓶颈。当您通过 pci-express 发送整个数据时，情况会更糟。（HD Graphics 3000 的额定速度为 125 GFLOPS）

```
 // Obtain a device ID 
    cl_device_id devices[] = new cl_device_id[numDevices];
    clGetDeviceIDs(platform, deviceType, numDevices, devices, null);
    cl_device_id device = devices[deviceIndex];
 //one of devices[] element must be your HD3000.Example: devices[0]->gpu devices[1]->cpu 
 //devices[2]-->HD3000 
```

在您的程序中：

```
 // Obtain the cl_device_id for the first device
    int numDevices = (int) numBytes[0] / Sizeof.cl_device_id;
    cl_device_id devices[] = new cl_device_id[numDevices];
    clGetContextInfo(context, CL_CONTEXT_DEVICES, numBytes[0],
            Pointer.to(devices), null); 
```

第一个设备可能是gpu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:34:03.667

您应该使用每个 300x300 图像的整个工作组。这将有助于使 gpu 核心饱和并让您使用本地内存。内核还应该能够同时处理与设备上的计算单元一样多的图像。

下面的内核分三步完成你的缩减。

1.  将值读入每个工作项的一个私有单元
2.  将私有变量写入本地内存（非常简单的步骤，但很重要）
3.  减少本地内存中的值以获得最终值。这里显示了两种方法来做到这一点。

WG_MAX_SIZE 的定义是因为我不喜欢传入可变大小的本地内存块。该值为 64，因为这是在大多数平台上使用的好值。如果您想尝试更大的工作组，请确保将此值设置得更高。小于 WG_MAX_SIZE 的工作组仍然可以正常工作。

```
#define WORK_SIZE 90000
#define WG_MAX_SIZE 64
__kernel void sampleKernel(__global uint *a, __global uint *c)
{

    local uint intensity_core[WG_MAX_SIZE];
    private uint workItemIntensity = 0;

    int gid = get_group_id(0);
    int lid = get_local_id(0);
    int wgsize = get_local_size(0);
    int i;

    for(i=gid*WORK_SIZE; i < (gid+1)*WORK_SIZE; i+=wgsize){ 
        workItemIntensity += a[j];
    }
    intensity_core[lid] = workItemIntensity;
    mem_fence(CLK_LOCAL_MEM_FENCE);

    //option #1
    //loop to reduce the final values O(n) time
    if(lid == 0){
        for(i=1;i<wgsize;i++){
            workItemIntensity += intensity_core[i];
        }
        c[gid]=intensity_core;
    }

    //option #2
    //O(logn) time reduction
    //assumes work group size is a power of 2
    int steps = 32 - clz(wgsize);
    for(i=1;i<steps;i++){
        if(lid % (1 << i) == 0){
            intensity_core[lid] += intensity_core[i<<(i-1)];
        }
        mem_fence(CLK_LOCAL_MEM_FENCE);
    }
    if(lid == 0){
        c[gid]=intensity_core[0];
    }
} 
```

# c# - 获取 TransactionScope 以使用 async / await

> ID：13543254
> 
> 赞同：126
> 
> 时间：2012-11-24T16:47:09.133
> 
> 标签：c#, transactionscope, async-await

我正在尝试将`async`/集成`await`到我们的服务总线中。我`SingleThreadSynchronizationContext`基于此示例[http://blogs.msdn.com/b/pfxteam/archive/2012/01/20/10259049.aspx](http://blogs.msdn.com/b/pfxteam/archive/2012/01/20/10259049.aspx)实现了一个。

它工作正常，除了一件事：`TransactionScope`. 我等待里面的东西`TransactionScope`，它打破了`TransactionScope`.

`TransactionScope`似乎不适合`async`/ `await`，当然是因为它使用 . 将东西存储在线程中`ThreadStaticAttribute`。我得到这个例外：

> “TransactionScope 嵌套不正确。”。

我试图`TransactionScope`在排队任务之前保存数据并在运行它之前恢复它，但它似乎并没有改变任何事情。而且`TransactionScope`代码是一团糟，所以很难理解那里发生了什么。

有没有办法让它工作？有什么替代方法`TransactionScope`吗？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2013-07-08T13:21:43.107

在 .NET Framework 4.5.1 中，有一组带有参数的[新构造函数。`TransactionScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope(v=vs.110).aspx)`TransactionScopeAsyncFlowOption`

根据 MSDN，它支持跨线程延续的事务流。

我的理解是，它是为了让您可以编写如下代码：

```
// transaction scope
using (var scope = new TransactionScope(... ,
  TransactionScopeAsyncFlowOption.Enabled))
{
  // connection
  using (var connection = new SqlConnection(_connectionString))
  {
    // open connection asynchronously
    await connection.OpenAsync();

    using (var command = connection.CreateCommand())
    {
      command.CommandText = ...;

      // run command asynchronously
      using (var dataReader = await command.ExecuteReaderAsync())
      {
        while (dataReader.Read())
        {
          ...
        }
      }
    }
  }
  scope.Complete();
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-04T02:26:07.610

回答有点晚了，但我在 MVC4 上遇到了同样的问题，我通过右键单击项目转到属性将我的项目从 4.5 更新到 4.5.1。选择应用程序选项卡将目标框架更改为 4.5.1 并使用事务，如下所示。

```
using (AccountServiceClient client = new AccountServiceClient())
using (TransactionScope scope = new TransactionScope(TransactionScopeAsyncFlowOption.Enabled))
{
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-26T00:16:02.083

您可以使用由[Transaction.DependentClone()](http://msdn.microsoft.com/en-us/library/system.transactions.transaction.dependentclone.aspx)方法创建的[DependentTransaction ：](http://msdn.microsoft.com/en-us/library/system.transactions.dependenttransaction.aspx)

```
static void Main(string[] args)
{
  // ...

  for (int i = 0; i < 10; i++)
  {

    var dtx = Transaction.Current.DependentClone(
        DependentCloneOption.BlockCommitUntilComplete);

    tasks[i] = TestStuff(dtx);
  }

  //...
}

static async Task TestStuff(DependentTransaction dtx)
{
    using (var ts = new TransactionScope(dtx))
    {
        // do transactional stuff

        ts.Complete();
    }
    dtx.Complete();
} 
```

[使用 DependentTransaction 管理并发](http://msdn.microsoft.com/en-us/library/ee818752.aspx)

[http://adamprescott.net/2012/10/04/transactionscope-in​​-multi-threaded-applications/](http://adamprescott.net/2012/10/04/transactionscope-in-multi-threaded-applications/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-28T00:13:51.757

如果有人仍然关注这个线程......

Microsoft.Data.SqlClient v3.0.1 看起来修复了 System.Transactions 在 .NET Framework 的 async/await 函数中的死锁问题！我用的是4.8。我使用显式分布式事务方法允许通过使用多个连接对单个 sql 服务器执行并行查询，但我确信 TransactionScope 的行为也更好。

创建一个 CommittableTransaction，创建任意数量的 SqlConnections，这些 SqlConnections 包含从父可提交表创建的 DependentTransaction，并行执行连接上的查询，在查询执行后完成依赖项，然后提交/回滚父可提交表。

我在 3 个不同的连接上使用 3 个并行异步插入到同一个数据库中对其进行了测试。当父可提交正在进行时，我使用了一个消息框来提示提交或回滚。当分布式事务处于活动状态时，表被锁定。我无法在 ssms 中选择它们。选择提交或回滚后，要么按预期工作。

上周使用 Microsoft.Data.SqlClient 3.0.0，这是不可能的，因为 .Commit() 方法会在异步函数中死锁。我什至用各种方法尝试过 BeginCommit/EndCommit。甚至在异步函数中招募依赖项时也会出现问题，但这也已修复。现在最简单的显式分布式事务方法适用于 async/await。

# javascript - 将值分配给新数组

> ID：13543266
> 
> 赞同：0
> 
> 时间：2012-11-24T16:48:38.173
> 
> 标签：javascript, arrays, associative

我是关联数组的新手，下面有这段代码。我想将 和 的值分配`prop`给`sumprop[prop]`一个新数组，`prop1`并且`prop2`. 在这里感谢一些帮助。

```
var name = new Array();
var amount = new Array();

name[0]="Peter";
amount[0]="50";
name[1]="John";
amount[1]="10";
name[2]="John";
amount[2]="20";
name[3]="Peter";
amount[3]="20";
name[4]="Mary";
amount[4]="40";

var sum = {};
var i;
var prop1 = new Array();
var prop2 = new Array();

for (i = 0; i < amount.length; i++) {
  var name = name[i];
  var oldSum = sum[name];
  if (typeof oldSum === 'undefined') {
    oldSum = 0;
  }
  sum[name] = oldSum + amount[i];
} 

for (var prop in sum) {
  if (sum.hasOwnProperty(prop)) {
    console.log(prop + " " sum[prop]);
    // assign to a new array
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:00:47.767

我重写了您的代码以使您的意图更加清晰（使用更好的变量名称并更改数据结构）：

```
var people = [
    { name: 'Peter', amount: 50 },
    { name: 'John', amount: 10 }
    // etc.    
];

var sums = {};
var i, person;

for (i = 0; i < people.length; i++) {
  person = people[i];
  if (typeof sums[person.name] === 'undefined') {
    sums[person.name] = 0;
  }
  sums[person.name] += person.amount;
} 

for (var name in sums) {
  if (sums.hasOwnProperty(name)) {
    console.log(name, sums[name]);
  }
}​ 
```

你试图强迫数组像字典一样工作，这是一场艰苦的战斗。您也不需要使用数组构造函数（即`new Array()`），因为您可以像这样创建一个新数组`var someVar = [];`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:00:51.287

你要这个：

```
for (var prop in sum) {
  console.log(prop + " " sum[prop]);
  prop1.push(prop);
  prop2.push(sum[prop])
} 
```

`new Array()`另外，初始化数组时不要使用，使用：

```
var prop1 = []; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:56:07.497

你可能想要：

```
for (var prop in sum) {
  if (sum.hasOwnProperty(prop)) {

     prop1.push(prop);
     prop2.push(sum[prop]);

  }
} 
```

# windows-phone-7 - windows phone 模拟器问题

> ID：13543279
> 
> 赞同：0
> 
> 时间：2012-11-24T16:49:14.960
> 
> 标签：windows-phone-7

我想开始在 windows phone 上编程。所以我安装了带有更新（7.1.1）的windows phone sdk 7.1。我构建了一个“hello world”程序，并希望通过运行模拟器来启动该程序。但是，每次我在模拟器上运行程序时它都会停止：

![在此处输入图像描述](../Images/6173f3044eb1e6dcf90cfc44a75ac9ae.png)

我有：

-Windows 8。

-视觉工作室 2010。

-SDK 7.1.1

-核心2二重奏

-内存：4 GB。

它在开始之前停止可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:19:24.207

为什么不使用 Visual Studio 2012 和 Windows Phone SDK 8？我认为在 Windows Phone Emulator 中运行在 VM 中，所以这个问题可能是由于互联网连接造成的。

# python - 无法在 python 加载的模板中引用 css 样式表

> ID：13543282
> 
> 赞同：6
> 
> 时间：2012-11-24T16:49:44.457
> 
> 标签：python, bottle

我是使用 Python 的新手，在尝试从 .tpl 文档中引用我的样式表时遇到了问题。我的 python、模板和 css 文档都在同一个目录中，但是当我使用 CMD 将页面加载到“localhost:8080”时，它会显示没有应用样式的模板。

在我的模板文档 index.tpl 中，我引用了三个样式表：

```
<link rel="stylesheet" type="text/css" href="demo.css" />
<link rel="stylesheet" type="text/css" href="style.css" />
<link rel="stylesheet" type="text/css" href="animate-custom.css" /> 
```

我的python文件输出模板：index.py：

```
from bottle import route,template,debug,run
import sqlite3

@route('/')
def player():
    return template('index.tpl')

debug(True)
run(reloader=True) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T17:15:27.020

我没有使用过 bottle，但大多数 Web 框架都要求您将 css/js/images 放在特定的目录中（通过配置设置）。通常它被称为“静态”或类似的东西。

我敢打赌，如果您尝试直接在浏览器中加载这些 CSS 文件：

```
http://localhost:8080/demo.css 
```

你会得到一个404。

您当前设置它的方式是您对传统 PHP/CGI 东西所做的 - 您的 Web 服务器正在磁盘上查找文件并为它们提供服务。框架（通常）不会那样工作 - 您设置路由规则。

你用@route('/') 装饰器做到了——通过设置它，你告诉瓶子“对 http://localhost:8080/ 的任何请求都应该运行播放器函数并返回它生成的任何内容。” 请注意，您没有为您的 css 文件设置任何规则。

另一种可能性是您没有在 HTML 中正确引用 CSS 文件。如果您在直接加载 CSS 文件时没有收到 404，请发布 HTML，我们可以查看一下。

**编辑**：在瓶子文档中找到了这个：

[http://bottlepy.org/docs/dev/tutorial.html#routing-static-files](http://bottlepy.org/docs/dev/tutorial.html#routing-static-files)

> 图像或 CSS 文件等静态文件不会自动提供。您必须添加路由和回调来控制提供哪些文件以及在哪里找到它们：

```
from bottle import static_file
@route('/static/<filename>')
def server_static(filename):
  return static_file(filename, root='/path/to/your/static/files') 
```

# html - div标签中的居中元素

> ID：13543290
> 
> 赞同：3
> 
> 时间：2012-11-24T16:50:52.433
> 
> 标签：html, css

我在 div 中有一个图像。我想为 div 中的图像设置垂直对齐底部和水平对齐中心。

居中元素我使用对齐，但我的元素设置正确的位置。

```
 <asp:Repeater ID="product" runat="server">
  <ItemTemplate>
  <div style="float: right; width: 180px; height: 177px; margin: 0 30PX 10px 5px">
     <asp:Panel ID="Panel1" runat="server">
        <font color="white">
        <asp:Label ID="Label1" runat="server" Text='<%# Eval("Name") %>'></asp:Label></font>
        <br />
        <div style="height:140px ; overflow:hidden">
           <asp:Image ID="Image1"  runat="server"  Width="120px" ImageUrl='<%#  Eval("Image") %>' ImageAlign="Bottom" />
       </div>
      </asp:Panel>
 </div>
  </ItemTemplate> 
```

例子 ： ![在此处输入图像描述](../Images/22c347567f593e08910e81213077dc36.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T16:55:23.640

如果没有`float`分配 img 标签，那么只需添加`text-align : center`to 即可`div`解决问题。

```
<div style="text-align:center">
    <asp:Image runat="server" ID="Image1" Width="140px" ImageUrl="" />
  </div> 
```

**编辑 ：**

检查这个演示：[演示](http://jsfiddle.net/mePzB/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:55:05.827

要在 DIV 中居中图像：

1.  从 DIV 中删除 align="center"
2.  添加css样式“text-align:center;” 到 DIV。
3.  删除“位置：绝对；底部：0；” 来自 DIV。

那应该这样做。

# python - 添加到 numpy.nextafter() 浮点数会返回意外结果

> ID：13543291
> 
> 赞同：3
> 
> 时间：2012-11-24T16:50:55.127
> 
> 标签：python, numpy, python-2.7, ieee-754

根据 Wolfram Alpha 的说法，对于`x > 2`.

```
6.0/(x+16) > 2.0/(x+4) 
```

为了获得最小的可能`x`，我正在使用`numpy.nextafter()`.

```
>>> from numpy import nextafter
>>> x = nextafter(2,2+1)
>>> x
2.0000000000000004 
```

然而。

```
>>> 6.0/(x+16) > 2.0/(x+4)
False 
```

奇怪的是。

```
>>> x+1
3.0000000000000004
>>> x+4
6.0 
```

那么我如何获得`x > 2`这种情况下的实际最小可能呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T17:58:49.410

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T17:49:59.313

unutbu's method should be pretty general. If what you're asking for is why it doesn't work after the first iteration, the answer is because of rounding. When you use `np.nextafter`, you're working at the limit of precision, so any arithmetic operation after that can't be trusted implicitly. In your case, it's probably the `+ 16` that's the problem. 16 is a couple exponent bits up from 2, so you're going to lose that increment to finite precision. In this case, it takes one extra increment to get that sum to round up instead of down.

# php - YII：需要结合这两个If语句吗？

> ID：13543294
> 
> 赞同：0
> 
> 时间：2012-11-24T16:51:26.273
> 
> 标签：php, if-statement, yii, conditional-statements

我正在使用 Yii 框架。如果用户没有选择他们的位置，我想显示特定的内容。

因此，如果未选择任何状态，我将使用以下代码显示内容：

```
 <?php if ($state == NULL) { ?> 
```

如果没有选择城市，我将使用以下代码：

```
 <?php if ($city == NULL) { ?> 
```

而且它们工作得很好，但是我如何将这两个语句结合起来，以便在它们没有州和没有选择城市的情况下显示内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:06:10.693

有***四种***不同的情况：

*   两种说法都是正确的
*   第一个是真的
*   第二个是真的
*   没有一个是真的

```
if($state == NULL && $city == NULL) {
    // both are true
}
else if($state == NULL) {

}
else if{$city == NULL) {

}
else{
   // neither is true, i.e. both are selected
} 
```

它们列出的顺序很重要：您***必须首先***检查两个条件都为真的情况！

有关更多信息，请参阅[**有关逻辑运算符的 PHP 文档**](http://php.net/manual/en/language.operators.logical.php)：*AND*、*OR*、*XOR*、*NOT*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:54:05.783

```
if ($city == NULL && $state == NULL) 
```

[逻辑连接](http://en.wikipedia.org/wiki/Logical_connective)

`&&`手段`AND` `||`是_`OR`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:56:22.620

`<?php if ($city == NULL && $state == NULL) { ?>` 我建议您阅读[PHP 中的运算符](http://www.php.net/manual/en/language.operators.logical.php)。另外值得一读的是[SO 的 PHP 符号参考常见问题解答](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)。

# jar - 如何在使用 IKVM 将 jar 文件转换为 dll 时链接 jar 库？

> ID：13543297
> 
> 赞同：0
> 
> 时间：2012-11-24T16:51:29.993
> 
> 标签：jar, ikvm

我有一个从 Oracle 数据库读取数据的 Java 应用程序 (JAR)。我想使用 IKVM 将 JAR 文件转换为 .NET dll。任何人都可以建议如何在创建 dll 时将 ojdbc.jar 附加或链接到 jar 文件，以便当我在 .NET 项目中添加 dll 时它应该能够从数据库中读取？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:04:24.150

最简单的方法是在使用 ikvmc 编译时简单地包含两个 jar：

ikvmc yourapp.jar ojdbc.jar -out:YourAppLibrary.dll

如果这在运行时不起作用，则需要查看 IKVM 类加载。有关详细信息，请参阅[http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=ClassLoader](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=ClassLoader)。

# c++ - 具有静态成员的类在 C++ 中包含静态成员

> ID：13543298
> 
> 赞同：1
> 
> 时间：2012-11-24T16:51:48.130
> 
> 标签：c++, static, destruction

我有一个包含静态成员'obj'的类。静态类成员 obj 本身包含一个静态成员（恰好是类的互斥类型）。

现在，当我的程序终止时，它会崩溃。当静态对象“obj”被破坏时，就会发生这种情况。'obj' 的析构函数调用它的静态成员（我自己的互斥锁类型遵循 RAII 惯用语来破坏底层的低级对象）。不幸的是，这个成员碰巧已经被销毁，因为静态对象的初始化顺序（-> 相反的析构函数顺序）是未定义的。

如何干净地生存下来？我很惊讶这种情况并没有更频繁地发生。一般来说，拥有静态的非 POD 成员似乎非常危险。特别是如果您不了解它们的内部结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:39:31.493

如果您需要静态对象使用的对象，在构造函数或析构函数中，通常最好使用单例模式的变体。这样就解决了初始化顺序的问题，如果做对了，对象永远不会被破坏，所以也不应该有破坏顺序的问题。

由于您的应用程序显然是多线程的（因为您有一个互斥锁），您应该采取通常的预防措施来确保对象线程安全，确保在进入 main 之前进行初始化。基本思想是这样的：

```
template <typename T, char const* id>
class StaticInstanceWrapper
{
    static T* myObject;
public:
    static T& instance();
};

template <typename T, char const* id>
T* StaticInstanceWrapper<T, char const* id>::myObject =
        &StaticInstanceWrapper<T>::instance();

template <typename T, char const* id>
T& StaticInstanceWrapper<T>::instance()
{
    if ( myObject == NULL ) {
        myObject = new T;
    }
    return *myObject;
} 
```

然后，您将静态对象定义为`static StaticInstanceWrapper<Whatever> obj;`，并将其访问为 `obj.instance().someFunction()`，而不仅仅是 `obj.someFunction()`（不会编译，因为`obj`没有`someFunction()`成员）。

请注意，对于`StaticInstanceWrapper`具有不同类型的每个实例，因此具有唯一的静态成员，您必须强制模板的单独实例化。这就是我们拥有`id`模板参数的原因；这个参数的类型实际上可以是任何东西，只要每个实例都有一个唯一的标识符。在实践中，我可能会使用宏进行定义，类似于：

```
#define DEFINE_STATIC_INSTANCE_WRAPPER(type, name) \
char const PASTE(name, _Identifier)[] = STRINGIZE(name); \
StaticInstanceWrapper<type, PASTE(name, _Identifier)> name 
```

这确保了每个实例都有一个唯一的 id。（如果你想变得更漂亮，你也可以加入`__LINENO__`，但由于无论如何名称必须在范围内是唯一的，我怀疑这是必要的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:58:17.577

如果您将它们`static`放在函数中，那么您将根据谁首先调用该函数来对它们的生命周期进行排序。这就是单例的实现方式。

```
foo& get_foo() {
  static foo instance;
  return instance;
}

bar& get_bar() {
  static bar instance;
  return instance;
} 
```

不过，你最好避免静态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T16:58:27.030

当试图避免动态分配时，这是一个常见的问题。

我避免这个问题的方法是遵循“静态类”的模式——通常静态数据属于没有静态数据的实例的“管理器”类。然后在显式“初始化”调用中处理静态数据初始化，并在仅具有静态数据和静态成员函数的管理器类上的显式“关闭”调用中处理破坏。

您可能必须使用 new 或 delete 并明确说明您正在做什么 - 从这个意义上说，您否定了自动机制为您工作的优势，但作为交换，您可以获得可靠且易于调试的初始化和关闭例程。

这种方法本质上创建了一个单例，因此没有管理器类的实例 - 基本上是静态数据的负载和一些具有类语法的 C 函数，提供封装的好处（例如，私有成员不能在类外部访问）

在许多情况下，这对编译器也很友好，因为它知道所有数据在哪里以及如何处理它

# c# - 使用 IDispatch::Invoke 反向 PInvoke

> ID：13543300
> 
> 赞同：1
> 
> 时间：2012-11-24T16:51:56.627
> 
> 标签：c#, c++, pinvoke, reverse, intptr

我正在做一个从非托管 C++ 到 C# 的反向 PInvoke。我不想为此使用 C++/CLI。我想完全使用非托管 C++ 和 C# 来完成这项工作。

我需要将指向结构的指针传递给 C#。我在这个 StackOverflow 线程上读到 -[究竟什么是 IntPtr？](https://stackoverflow.com/questions/1148177/just-what-is-an-intptr-exactly)- 我可以使用 IntPtr 来执行此操作。

这是我的托管方法签名 public int Start(string commandName, IntPtr a) { .... }

我使用 IDispatch::Invoke 方法从我的本机代码调用它。我像这样构建了DISPARAMS

```
VARIANT pVarArgs[2];
BSTR bstrCommandName = NULL;
pVarArgs[0].vt = VT_INT| VT_PTR; // | VT_BYREF;
pVarArgs[0].pintVal = reinterpret_cast<int*>(context); //context is a pointer to a structure. 

pVarArgs[1].vt = VT_BSTR;
pVarArgs[1].bstrVal = bstrCommandName;    // Allocated elsewhere
DISPPARAMS dispparamsTwoArgs = {pVarArgs, NULL, 2};
//Invoke the method on the Dispatch Interface
hr = pDisp->Invoke(
                    dispid,
                    IID_NULL,
                    LOCALE_SYSTEM_DEFAULT,
                    DISPATCH_METHOD,
                    &dispparamsTwoArgs,
                    &varResult,
                    &exception,
                    &uArgErr
); 
```

这是我得到的错误代码 - 0x80070057

我的问题如下 1\. 有没有比使用 IDispatch::Invoke 更好的反向 PInvoke 方法？
2\. 如果 IDispatch::Invoke 是最好的方法，我该如何解决这个错误？我需要将指向结构的指针从本地世界传递到托管世界。

# visual-studio-2010 - 如何为 Visual Studio 2010 插件加载 WCF 服务绑定？

> ID：13543304
> 
> 赞同：1
> 
> 时间：2012-11-24T16:52:26.287
> 
> 标签：visual-studio-2010, add-in, wcf-binding, wcf-client, visual-studio-addins

**我的问题是：**

* * *

我想通过 Visual Studio 插件调用 WCF 服务方法，并且插件/或 Visual Studio 主机正在寻找错误的配置位置（或者它可能在寻找正确的位置但配置位于错误的位置）？

这样做的最佳做法是什么？

我正在开发一个 Visual Studio 2010 插件，它需要调用 WCF 服务来获取数据并进行一些处理。

我已成功添加 WCF 服务引用并创建客户端，如下所示：

```
WcfServiceClient client = new WcfServiceClient() 
```

当控件到达我的代码中的上述行时，我收到以下错误：

> 在 ServiceModel 客户端配置部分中找不到引用合同“WcfService.IWcfService”的默认终结点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

现在端点和绑定信息在 app.config 文件中。这里发生的是：

当 Visual Studio exe (devenv.exe) 加载插件并执行必须创建 WCF 服务客户端的部分代码时，它会尝试加载 **devenv.exe.config** 而不是 **MyAddin.dll.config 文件**

解决方案似乎是：将 WCF 服务绑定和服务模型客户端数据从 app.config 复制并粘贴到 devenv.exe.config，然后它可能会起作用。

请问最佳实践建议？

谢谢

史蒂夫

# imagick - 我如何在 Imagick::annotateImage() 中使用换行符？

> ID：13543305
> 
> 赞同：1
> 
> 时间：2012-11-24T16:52:26.807
> 
> 标签：imagick

```
$image->annotateImage($draw, 10, 45, 0, 'The quick brown fox jumps\n over the lazy dog'); 
```

Imagick::annotateImage() 似乎不适用于换行符 \n，它是否支持使用这个 \n 字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:54:27.677

尝试使用 \ 转义 \n，使其变为 \\n

# java - 如何获取 .txt 文件路径？

> ID：13543311
> 
> 赞同：-2
> 
> 时间：2012-11-24T16:53:00.013
> 
> 标签：java, file, netbeans, filepath

我的意思是我的班级文件夹中的txt文件。我想找到它的路径并打开txt文件。我怎样才能找到那条路？

```
 File ftxtFile = new File(something_in_here+"\\myfile.txt"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:58:54.303

快乐阅读[Java：基本 I/O](http://docs.oracle.com/javase/tutorial/essential/io/)

PS：以后你应该更加积极主动，因为这样的基本东西很容易找到

# html - 骨架框架间距

> ID：13543313
> 
> 赞同：0
> 
> 时间：2012-11-24T16:53:37.447
> 
> 标签：html, css

我昨晚很晚才想问这个问题，但我太困了，我把问题打错了。我希望将我的导航浮动到其当前位置的右侧大约 200 像素，有空间但它不会移动。

您可以在此处查看实时代码 - www.xronn.co.uk/hosting

这是一张图片来解释我的问题

[http://i.stack.imgur.com/JtL0C.png](http://i.stack.imgur.com/JtL0C.png)

紫线 网站的 960 像素宽度 蓝线显示导航的可用空间，红色箭头当然显示我希望导航进入的方向（右）

任何人都知道为什么当我向右推时，列表开始位于彼此下方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:00:04.427

如果你可以给`<div class="seven columns" style="float: right;">`持有人，它会向右移动。

我使用了萤火虫，但您必须对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:07:33.627

将 html 标记更改为如下所示：

```
<div class="nine columns">..logo</div>
<div class="seven columns">..navigation</div> 
```

这将不需要进一步调整，并将保持响应。

# xml - 在 actionscript 3 中加载 xml 数据的进度条

> ID：13543319
> 
> 赞同：1
> 
> 时间：2012-11-24T16:54:19.063
> 
> 标签：xml, actionscript, urlloader

我正在使用 Flash CS5 和 FlashDevelop 在 ActionScript 3 中构建游戏。我试图让游戏尽可能多地以数据驱动。所以大部分游戏信息都存储在游戏需要时加载的 XML 文件中。

此加载工作正常，但碰巧有些文件变得相当大，因此加载可能需要几秒钟（目前在我的 PC 上约为 3，但我希望它会变得更长）。所以我想添加一个带有进度信息的加载屏幕（至少一个带有百分比的栏）。

后面的部分是让我困惑的部分。这是我要求加载 XML 文件的代码：

```
public function load( a_FileName:String, a_Callback:Function, a_LoadingScreen:MovieClip ):void
{
    m_Callback = a_Callback;

    m_LoadingScreen = a_LoadingScreen;

    var t_URLLoader:URLLoader = new URLLoader();

    t_URLLoader.addEventListener( Event.COMPLETE, fileLoadComplete );
    t_URLLoader.addEventListener( ProgressEvent.PROGRESS, fileLoadProgress );

    t_URLLoader.load( new URLRequest( a_FileName ) );

} 
```

应在每个 ProgressEvent.PROGRESS 上调用以下代码

```
public function fileLoadProgress( e:ProgressEvent ):void 
{
    m_LoadingScreen.txtPercentage.text = Math.floor( ( e.bytesLoaded / e.bytesTotal ) * 100 ) + "%";

} 
```

问题是我的程序似乎首先加载文件（在忙碌时不做任何其他事情），然后才显示加载屏幕。

如果我在 fileLoadProgress 函数中添加跟踪信息，我会在输出窗口中获得一些更新，但屏幕不会更新。

使用 MouseEvents 时，我知道您可以使用 updateAfterEvent() 函数来强制进行绘图调用，但是在使用 ProgressEvents 时，我似乎无法使用此方法。

加载xml文件时有什么方法可以强制我的屏幕更新？

- -编辑 - -

我做了一个小沙箱来进一步测试这个问题：一个 FLA 文件，第一帧只有一个动态文本字段，下面的代码：

```
var t_URLLoader:URLLoader = new URLLoader();

t_URLLoader.addEventListener( Event.COMPLETE, fileLoadComplete );
t_URLLoader.addEventListener( ProgressEvent.PROGRESS, fileLoadProgress );

t_URLLoader.load( new URLRequest( "data/TerritoryData.xml" ) );

stop();

function fileLoadProgress( e:ProgressEvent ):void 
{
    trace( Math.floor( ( e.bytesLoaded / e.bytesTotal ) * 100 ) + "%" );
    txtPercentage.text = Math.floor( ( e.bytesLoaded / e.bytesTotal ) * 100 ) + "%";
}

function fileLoadComplete( a_Event:Event ):void
{
    trace( "done!" );
    txtPercentage.text = "done!";
} 
```

这几乎是我能做到的熊骨头，但它仍然显示出同样的问题。在我的输出窗口中，跟踪显示：

28% 56% 84% 100% 完成！

但在屏幕上它从空白变为“完成”。如果我在 fileLoadProgress 函数中放置断点，屏幕也不会更新。如果我在 fileLoadProgress 函数中关闭（） URLLoader，它最终会显示“28%”文本。

有任何想法吗？这让我发疯...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:32:22.433

您是否尝试过在第一帧中设置所有内容但在第二帧中加载？所以它实际上需要：

```
t_URLLoader.load( new URLRequest( "data/TerritoryData.xml" ) );
stop(); 
```

到第二帧。我认为 txtPercentage 不会在两者之间刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T22:45:34.593

正如戴夫哈特在对原始问题的评论中提到的那样。答案是除非加载的 xml 文件来自外部网站，否则 Flash 不会更新屏幕。

使用我网站上的 XML，游戏会在文本字段中显示一到两次更新，而屏幕更新会在两者之间停止（我在后台使用了一个简单的动画来跟踪帧速率）。到目前为止，这仍然不是我在调试窗口中收到的跟踪输出量，但至少它表明它确实可以将内容输出到屏幕，并且每秒更新一次。

我也是第一次尝试，似乎比以后更好，但这可能是由于文件暂时存储在本地？

不幸的是，它对我来说毫无用处，因为我的文件将在本地加载。所以我想我将不得不忍受没有任何动画的加载屏幕。

# gps - Gps追踪器收到数据，

> ID：13543321
> 
> 赞同：-1
> 
> 时间：2012-11-24T16:54:38.180
> 
> 标签：gps, hex, latitude-longitude

提前我想感谢任何关于这个问题的答案和建议，

我正在开发一个 GPS 跟踪器模块（型号：m528），它的文档记录很差，所以我没有任何关于它发送的数据格式的论文，

我有自己的服务器，它监听一个特殊的端口并获取模块发送的数据包，

我知道接收到的数据包中经纬度的位置，每个有4个字节，没有N，W，S，E指示符，

这是我认为会有所帮助的例子，

以十六进制存储的纬度数据：03447535 纬度值：34.79225

以十六进制存储的经度数据：04830690 经度值：48.51150

任何帮助和建议将不胜感激，谢谢每一位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:04:37.053

你所拥有的似乎没有任何十六进制表示。似乎是度/分：03447535 = 34°47.535' = 34.79225 十进制...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:05:02.513

它很容易转换，首先你分开 3 个小数位，即度数：

```
03447535 -> 034 degrees 
```

然后你把剩下的除以 60000：

```
47535 / 60000 = 0.79225 
```

最后你加上 34 度，结果：

```
34.79225 
```

与其他号码相同：

```
04830690 -> 48 degrees + 30690 / 60000 = 48.5115 
```

# database - 如何最小化生产数据库中不需要的/意外更新？

> ID：13543322
> 
> 赞同：0
> 
> 时间：2012-11-24T16:54:38.633
> 
> 标签：database, updates

如何最小化生产数据库中不需要的/意外更新？防止对生产数据库进行直接更改，任何建议或想法都会做。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:02:18.567

这是一个非常开放的问题。有很多层次可以回答。

1.  操作系统级别。
    *   确保存储数据库的文件不会被意外篡改。
    *   没有对文件的公共访问权限，尤其是没有写访问权限。
    *   对包含文件的目录没有公共访问权限（或再次没有写访问权限）。
    *   只有值得信赖的人才能拥有 O/S 级别的访问权限。
2.  DBMS 级别。
    *   确保只有受信任的用户才具有数据库系统管理员权限。
3.  数据库级别。
    *   确保只有受信任的用户才有 DBA 权限。
    *   确保公众只能修改他们应该修改的表中的数据。这很可能意味着对公众“只有 SELECT 访问”。
    *   确保只有选定的用户才能修改普通公众无法修改的表（其中的数据）。
    *   确保 DBMS 强制执行正确的完整性约束。
    *   确保只有受信任的用户才能创建存储过程、修改表结构等。

训练那些值得信赖的人。

确保您有适当的备份方案。

# ruby-on-rails - Rails HTML Table 使用 AJAX 更新 mongo 中的字段

> ID：13543323
> 
> 赞同：0
> 
> 时间：2012-11-24T16:54:41.707
> 
> 标签：ruby-on-rails, ajax, mongodb, mongoid

我正在使用 mongoid 构建一个由 mongodb 支持的 Rails 应用程序。

这是一个单页应用程序，带有一个 HTML 表格，其中每一行的每个字段都需要在不刷新页面的情况下进行编辑。

这是您常用的 Rails 视图（就像 Rails casts 中的许多视图一样），显示包含数据的行和列的表。

例如。我正在展示汽车，并展示它们的品牌、型号和备注

我这样做的方法是将mongo文档的_id附加到每一列，并在html id中标记它的字段名称。然后我获取 $("#id") 的值并通过 AJAX 将其发送到 rails 控制器并相应地运行 @car.update_attributes 方法。

目前，我的一排看起来像这样。

```
 <tr>
       <td id=<%= car.id %>_make>
       <%= car.make %>
       </td>

       <td id=<%= car.id %>_model>
       <%= car.model %> 
       </td>

       <td id=<%= car.id %>_notes>
       <%= car.notes %>
       </td>
     </tr>

     // my function which is called onChange for every column
     function update_attributes(id){
        var id = id.split[0];
        var attribute = id.split[1];
        $.ajax("sending id and attribute to rails controller");
     } 
```

是否有任何内置的 Rails 魔法可以让我只更新模型中的一个字段而不刷新页面？

或者。

有这方面的 Rails 插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:01:52.433

对于您所描述的内容（以单页 ajax 为中心的应用程序），我强烈建议使用[骨干网](http://backbonejs.org/)。您也可以通过其他更简单的 gem（甚至手动编写 jquery ajax）来完成此操作，但我发现您在以 ajax 为中心的应用程序中很快就会变得杂乱无章。Backbone.js 最大的优点之一是它使您的 ajax 代码井井有条。尝试使用[backbone-rails gem](https://github.com/codebrew/backbone-rails)，借助出色的内置脚手架，它可以让您在几分钟内启动并运行。

为了更直接地回答您的问题，在您正在寻找的意义上，ajax 并不是“内置”到 rails 的，但是有一些 gem 可以帮助您更轻松地做到这一点（例如骨干轨）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:19:48.870

还有专门为此目的制作的名为[rest_in_place的 gem。](https://github.com/janv/rest_in_place)您将需要做很少的配置来执行就地编辑。你的控制器只需要拥有所有的 restfull 方法。

# php - 多词搜索查询

> ID：13543324
> 
> 赞同：0
> 
> 时间：2012-11-24T16:54:43.960
> 
> 标签：php, sql

我有一个爬虫，它扫描网页中的所有单词。然后它将每个单词及其所属的 url 插入 mysql 数据库。然后根据文档中找到的单词数量对搜索进行排名。问题是...如何将多个术语查询添加到现有查询中。

它非常适合单词查询，但我希望我的查询尝试在同一个网页中一起查找单词，如果网页中没有出现任何单词，则正常返回这些词的结果。

我的查询如下：

```
 $results = addslashes( $_POST['results'] );

               " SELECT p.page_url AS url,
                       COUNT(*) AS occurrences 
                       FROM page p, word w, occurrence o
                       WHERE p.page_id = o.page_id AND
                       w.word_id = o.word_id AND
                       w.word_word = \"$keyword\"
                       GROUP BY p.page_id
                       ORDER BY occurrences DESC
                       LIMIT $results" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:00:12.393

如果数据库引擎支持，您可以进行子选择。例子：

```
SELECT 
  url, 
  (select count(*) from table where conditions1) as count1, 
  (select count(*) from table where conditions2) as count2 
 FROM table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:59:09.013

用于[`COUNT(DISTINCT ...)`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_count-distinct)计算在每页上找到的不同单词的数量，并用于[`IN`](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_in)查找单词列表中的任何一个：

```
SELECT
    p.page_url AS url,
    COUNT(DISTINCT w.word_word) AS words_found
    COUNT(*) AS occurrences 
FROM page p
JOIN occurrence o ON p.page_id = o.page_id
JOIN word w ON w.word_id = o.word_id
WHERE w.word_word IN ('foo', 'bar')
GROUP BY p.page_id
ORDER BY occurrences DESC 
```

如果要确保页面上至少有 n 个搜索词，请添加 HAVING 子句：

```
GROUP BY p.page_id
HAVING COUNT(DISTINCT w.word_word) >= 2
ORDER BY occurrences DESC 
```

# android - 在 2 个列表视图 android 线性布局之间对齐文本

> ID：13543327
> 
> 赞同：1
> 
> 时间：2012-11-24T16:55:09.027
> 
> 标签：android, listview, android-linearlayout

我在尝试在线性布局中调整 2 个列表视图时遇到了一点问题
1 个列表视图（左）有修复文本，所以当右列表视图有更多文本时，问题是 2 个列表视图

下面是活动代码：

```
lv1 = (ListView) findViewById (R.id.aulalist);
lv2 = (ListView) findViewById (R.id.horariolist);
String [] horarios = res.getStringArray(R.array.horarios); 
lv1.setAdapter(new ArrayAdapter<String> (this, android.R.layout.simple_list_item_1, horarios));
lv2.setAdapter(new ArrayAdapter<String> (this, android.R.layout.simple_list_item_1, aula)); 
```

和布局代码：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="horizontal"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          >

<LinearLayout
    android:layout_width="169dp"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/aulalist"
        android:layout_width="169dp"
        android:layout_height="fill_parent"

         />

</LinearLayout>
<LinearLayout android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:layout_weight="1"
              >

    <ListView
        android:id="@+id/horariolist"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" />

</LinearLayout>
 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:08:27.930

您不需要将 ListView 包含在 LinearLayout 中。试试下面的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="horizontal"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">

<ListView
    android:id="@+id/aulalist"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1" >
</ListView>

<ListView
    android:id="@+id/horariolist"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1" >
</ListView> 
```

# ruby-on-rails - 在服务层处理用户请求后报告错误的 OOD

> ID：13543332
> 
> 赞同：0
> 
> 时间：2012-11-24T16:55:32.920
> 
> 标签：ruby-on-rails, web, soa, object-oriented-analysis

我相信在用户请求期间可能会发生两种类型的错误。

**{1}**：系统错误（异常、致命错误、警告、通知等）
**{2}**：用户控制错误（用户做错了什么，通常发生在验证期间）

通常报告**{1}**相对简单。大多数人只会显示错误页面或通知。**{2}**的情况不同。

Yii 和 Rails 以及其他一些框架提供了一个验证方案，您可以在其中为模型中的每个属性指定验证器。在验证期间，验证器将验证指定的属性并以映射形式报告错误：*attributeName => 错误数组。*

在应用程序中，**[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)**中的服务可能依赖于其他服务的逻辑和域模型的逻辑，因此其属性集和验证也可能依赖于这些外部服务和域模型。

例如，用户注册服务拥有“用户名”和“密码”属性，其逻辑规则可能依赖于用户验证用户名最大长度和密码最大长度的逻辑规则。

所以我的问题是，我们如何通过多层依赖来验证这些属性并将错误报告给用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:12:58.640

它不是那么困难。您可以使用某种形式的客户端验证在客户端处理大多数模型验证错误。例如，您可以为此使用**client_side_validation** gem。您可以将这些错误呈现为通知或警报，也可以如下所示

```
@user.errors.full_messages.join('. ') 
```

现在回到您的问题，您可以进行多层异常处理。层的偏好取决于您正在实现的功能。例如，在创建新用户时，您首先要检查的是数据有效性。您还可以拥有应用程序范围的异常处理程序，并且这些异常处理程序中的每一个都可以拥有`own error reporting mechanisms`。所以它只取决于场景。

# javascript - 灯箱倒计时关闭

> ID：13543335
> 
> 赞同：1
> 
> 时间：2012-11-24T16:55:46.510
> 
> 标签：javascript, jquery, lightbox

我的问题是我第一次看到计时器下降，但在那之后它变得很奇怪，最后浏览器崩溃了。

我把给我错误的代码放在这里，这是一个巨大的东西，所以我不能把它全部放在这里。

JavaScript：

```
// display the lightbox
function lightbox(insertContent) {

    // jQuery wrapper (optional, for compatibility only)
    (function($) {
        // add lightbox/shadow <div/>'s if not previously added
        if ($('#lightbox').size() === 0) {
            var theLightbox = $('<div id="lightbox"/>');
            var theShadow = $('<div id="lightbox-shadow"/>');
            var countDown = $('<div class="countDown"/>');
            $(theShadow).click(function(e) {
                closeLightbox();
            });
            $('body').append(theShadow);
            $('body').append(theLightbox);
            $('body').append(countDown);
        }

        // insert HTML content
        if (insertContent !== null) {
            $('#lightbox').html(insertContent);
            $('#lightbox').corner("15px");

            // ALWAYS LAST
            //$('#lightbox').append(countDown);
            CountDown(5);
        }

        // move the lightbox to the current window top + 100px
        $('#lightbox').css('top', $(window).scrollTop() + 100 + 'px');
        $('#lightbox-shadow').css('top', $(window).scrollTop());
        $('.countDown').css('top', $(window).scrollTop() + 150 + "px");

        // display the lightbox
        $('#lightbox').show();
        $('#lightbox-shadow').show();
        $('.countDown').show();

    })(jQuery); // end jQuery wrapper
}

function CountDown(tiempo) {
    if (tiempo <= 0) {
        clearInterval(IntervalID);
        closeLightbox();
    } else {
        $(".countDown").html("Esta ventana se cerrará en " + tiempo + " segundos");
        tiempo--;
    }
    var IntervalID = setInterval("CountDown(" + tiempo + ")", 1000);
}

// close the lightbox

function closeLightbox() {

    // jQuery wrapper (optional, for compatibility only)
    (function($) {

        // hide lightbox/shadow <div/>'s
        $('#lightbox').hide();
        $('#lightbox-shadow').hide();
        $('.countDown').hide();

        // remove contents of lightbox in case a video or other content is actively playing
        $('#lightbox').empty();

    })(jQuery); // end jQuery wrapper
};

$(document).ready(function() {
    $("#Login").click(function(event) {
        event.preventDefault();
        lightbox("Username Not Available");
        $("#lightbox").css("color", "#FF0000");
    });
}); 
```

HTML：

```
<input type="button" id="Login" value="Hello"> 
```

CSS：

```
#lightbox {
    position: absolute;
    width: 50%;
    left: 25%;
    background: #fff;
    z-index: 1001;
    display: none;

    color: #069;
    padding: 20px;
    text-align: center;
    font-size: 24px;
    font-weight: bold;
    font-variant: small-caps;
    text-shadow: 1px 1px #000;
}
#lightbox-shadow {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    filter: alpha(opacity=90);
    -moz-opacity: 0.90;
    -khtml-opacity: 0.90;
    opacity: 0.90;
    z-index: 1000;
    display: none;
}

.countDown {
    position: absolute;
    width: 50%;
    left: 25%;
    background: #fff;
    z-index: 1002;
    display: none;

    color: #069;
    padding: 20px;
    text-align: center;
    font-size: 18px;
    font-variant: small-caps;
    font-weight: normal;
    margin: 10px auto;
    display: none;
} 
```

JsFiddle：

[http://jsfiddle.net/c2gx9/6/](http://jsfiddle.net/c2gx9/6/)

不知道为什么它在 jsfiddle 上不起作用；它在我的电脑上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:18:08.480

只是一个建议，尝试使用 jsbin 而不是 jsfiddle。您的小提琴在 jsbin 上比在 jsfiddle 上效果更好。

无论如何，在`closeLightbox`你正在执行`$('#lightbox').empty();`这将删除所有孩子，但让父母留下。意思是清除灯箱后，还有一个id为灯箱的div。

第二次`lightbox`调用 your 时，条件`$('#lightbox').size() === 0`评估为 false，因为元素已经存在。

要解决此问题，请将行替换`$('#lightbox').empty();`为`$('#lightbox').remove();`

代码的第二个问题是您正在调用的方式`setInterval`。

```
function CountDown(tiempo) {
    if (tiempo <= 0) {
        clearInterval(IntervalID);
        closeLightbox();
    } else {
        $(".countDown").html("Esta ventana se cerrará en " + tiempo + " segundos");
        tiempo--;
    }

    var IntervalID = setInterval("CountDown(" + tiempo + ")", 1000);
} 
```

js引擎将代码翻译成这样

```
function CountDown(tiempo) {
    var IntervalID;

    if (tiempo <= 0) {
        clearInterval(IntervalID);
        closeLightbox();
    } else {
        $(".countDown").html("Esta ventana se cerrará en " + tiempo + " segundos");
        tiempo--;
    }

    IntervalID = setInterval("CountDown(" + tiempo + ")", 1000);
} 
```

`IntervalID`是函数的局部变量。每次调用函数时，都会从头开始创建变量。所以实际上，你永远不会清除间隔。您只是在减少`tiempo`变量。

“浏览器发疯”的一个可能原因是只执行`setInterval`一次将重复调用指定的函数直到显式停止。在您的倒计时中，超过 5 次迭代，您调用了`setInterval`5 次。您可以想象，经过几次尝试后，浏览器会因为所有这些同时运行的`CountDown`.

将来如果您想使用`setInterval`，您可能需要[阅读 MDN 上的文档](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)。该站点是一个非常好的 HTML、JS 和 CSS 资源。

最后，您将函数名称作为字符串参数传递给`setInterval`. 由于各种原因，它有点不受欢迎。我选择不这样做的原因是代码只有在函数可全局访问时才能工作。为了封装和不污染全局命名空间，人们推荐其他方法。

回到如何解决这个问题，我应该`setInterval`第一次注意到这个错误。我没有，那是我的错。您找到了适合您的解决方案。为了完整起见，我将包括我会如何要求您修复它。

```
function CountDown(tiempo) {
    if (tiempo <= 0) {
        closeLightbox();

    } else {
        $(".countDown").html("Esta ventana se cerrará en " + tiempo + " segundos");
        tiempo--;

        setTimeout(function () { 
            CountDown(tiempo);
        }, 1000);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:39:28.840

在网上找到了一些代码，它终于可以工作了，我现在使用的代码是：

JS：

```
// display the lightbox
function lightbox(insertContent){

    // jQuery wrapper (optional, for compatibility only)
    (function($) {
        // add lightbox/shadow <div/>'s if not previously added
        if($('#lightbox').size() === 0){
            var theLightbox = $('<div id="lightbox"/>');
            var theShadow = $('<div id="lightbox-shadow"/>');
            var countDown = $('<div id="countDown"/>');
            $(theShadow).click(function(e){
                closeLightbox();
            });
            $('body').append(theShadow);
            $('body').append(theLightbox);
            $('body').append(countDown);
        }

        // insert HTML content
        if(insertContent !== null){
            $('#lightbox').html(insertContent);
            $('#lightbox').corner("15px");

            // ALWAYS LAST
            $('#lightbox').append(countDown);
            CreateTimer(3);
        }

        // move the lightbox to the current window top + 100px
        $('#lightbox').css('top', $(window).scrollTop() + 100 + 'px');
        $('#lightbox-shadow').css('top', $(window).scrollTop());
        //$('#countDown').css('top', $(window).scrollTop() + 150 + "px");

        // display the lightbox
        $('#lightbox').show();
        $('#lightbox-shadow').show();
        $('#countDown').show();

    })(jQuery); // end jQuery wrapper

}

function CreateTimer(Tiempo) {
    TotalSeconds = Tiempo;

    UpdateTimer();
    window.setTimeout("Tick()", 1000);
}

function Tick() {
    if (TotalSeconds <= 1) {
        closeLightbox();
        return;
    }

    TotalSeconds -= 1;
    UpdateTimer();
    window.setTimeout("Tick()", 1000);
}

function UpdateTimer() {
    $('#countDown').html("Esta ventana se cerrará en " + TotalSeconds + " segundos");
}

// close the lightbox
function closeLightbox(){

    // jQuery wrapper (optional, for compatibility only)
    (function($) {

        // hide lightbox/shadow <div/>'s
        $('#lightbox').remove();
        $('#lightbox-shadow').remove();
        $('#countDown').remove();

        // remove contents of lightbox in case a video or other content is actively playing

    })(jQuery); // end jQuery wrapper

} 
```

# c++ - C++/CX - 我需要从 const char* 实例化 Platform::String

> ID：13543337
> 
> 赞同：4
> 
> 时间：2012-11-24T16:56:05.913
> 
> 标签：c++, windows-8, windows-runtime, c++-cx

我正在尝试`Platform::String`从返回的方法的结果中构造一个`const char*`

我根本无法让它工作，并且多年来一直在摸不着头脑。

我不是一个非常有经验的 c++ 开发人员，所以答案可能很明显，但我似乎无法解决。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T17:03:39.450

您可以使用 mbstowcs [http://www.cplusplus.com/reference/cstdlib/mbstowcs/](http://www.cplusplus.com/reference/cstdlib/mbstowcs/)填充 wchar_t 缓冲区，然后将其传递给 Platform::String 构造函数以使用所需数据创建实例。

```
static wchar_t buffer[ MAX_BUFFER ];
mbstowcs( buffer, source, MAX_BUFFER );
platformString = ref new Platform::String( buffer ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T17:00:16.347

`Platform::String`在内部使用`char16`，并`char16*`在其构造函数中采用 a。您需要使用 将`char*`文本转换为`char16*`文本[`MultiByteToWideChar`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)。[这个问题](https://stackoverflow.com/questions/11746146/how-to-convert-platformstring-to-char)谈到了 from `Platform::String`to`char*`和 to go from `char*`to`Platform::String`应该遵循的反向路径。

# php - Symfony 2.1 - 加载资产的问题和资产抛出的异常

> ID：13543343
> 
> 赞同：1
> 
> 时间：2012-11-24T16:56:26.280
> 
> 标签：php, exception, twig, symfony-2.1, assetic

这有点令人沮丧。根据 Symfony 最佳实践，bundle 的 web 资源（图像、css、js）应该放在`src/vendor/path/to/bundle/Resources/public`. 运行`app/console assets:install`将该公用文件夹的内容复制到`web/bundles/bundlename`. 在官方文档中，显示了 Twig 模板来获取这些资产，代码如下：

```
{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="{{ asset('/css/styles.css') }}
{% endblock %} 
```

`web/bundles/bundlename/css/styles.css`当我尝试它时，它并没有神奇地从`web/css/styles.css`. 这是预期的行为吗？官方文档对此不太清楚。

为了尝试解决这个问题，我尝试采用资产动态服务资产的能力。我试过：

```
{% stylesheets '@mybundle/Resources/public/css/*' %}
    <link rel="stylesheet" type="text/css" href="{{ asset_url }}" />
{% endstylesheets %} 
```

但得到以下异常：

> 在 "/home/凯文/www/src/mybundle/Resources/views/Home/index.html.twig

[Symfony 官方文档](http://symfony.com/doc/current/cookbook/assetic/asset_management.html)表明它应该可以开箱即用，无需任何配置。

所以，TLDR：

1.  我不明白应该如何加载资产吗？
2.  如何解决资产异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T12:57:55.207

要修复资产异常，您需要在 config.yml 中配置您的包，如下所示：

```
assetic:
    bundles: [ MyAwesomeBundle ] 
```

`{{ asset(...) }}`twig 函数将提供与您的 Web 根目录相关的文件。

您用于`app/console assets:install`在 Web 根目录中安装静态资产，稍后您可以使用资产功能轻松指向它们，如下所示`{{ asset('/mybundle/css/site.css') }}`

# java - 决定使用 Comparable 或 Comparator

> ID：13543344
> 
> 赞同：1
> 
> 时间：2012-11-24T16:56:26.870
> 
> 标签：java, comparator, comparable

我的程序实现了一个`Product`类，其对象包含以下实例变量：`name`、`priority`、`price`和`amount`。

在`LinkedList`对. `Product`_`LinkedList`

我想首先按优先级（从最低到最高）对列表进行排序。如果优先级相同，则查看价格（从最低到最高），然后查看名称（按字母顺序）。

我已经阅读了很多关于`Collections.sort`,`Comparable`和`Comparator`. 我相信我需要使用`Comparable`接口并实现一个`compareTo`方法。我的想法是，因为`priority`,`price`和`name`都有一个“自然”的顺序，所以使用`Comparable`.

```
public class Product extends ProductBase implements PrintInterface, Comparable<Product>{
    private String name;
    private int priority; 
    private int cents;
    private int quantity;

    // setters and getters

    /**
    * Compare current Product object with compareToThis
    * return 0 if priority, price and name are the same for both  
    * return -1 if current Product is less than compareToThis
    * return 1 if current Product is greater than compareToThis
    */ 

    @override
    public int compareTo(Product compareToThis)
} 
```

然后，当我想对我的 LinkedList 进行排序时，我只需调用`Collections.sort(LinkedList)`. 在我开始编写代码之前，你能告诉我我是否遗漏或忘记了什么吗？

****** *** ** *** ** *** *******更新****** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *******

 **我刚刚使用 compare 方法创建了一个名为 ProductComparator 的单独类。

这是 LinkedList 类的一部分。

```
import java.util.Collections;

public class LinkedList {

private ListNode head; 

public LinkedList() { 
    head = null;
}
     // this method will sort the LinkedList using a ProductComparator
public void sortList() {
    ListNode position = head;
    if (position != null) {
        Collections.sort(this, new ProductComparator());
    }
}
// ListNode inner class
private class ListNode {

    private Product item;
    private ListNode link;

    // constructor
    public ListNode(Product newItem, ListNode newLink) {
        item= newItem;
        link = newLink;
    }
} 
```

}

编译时从 IDE 收到以下错误。

Collections 类型中的方法 sort(List, Comparator) 不适用于参数 (LinkedList, ProductComparator)。

有谁知道我为什么会收到此错误并且可以指出我正确的方向来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:01:33.553

如果存在“自然”排序，请使用 Comparable。判断顺序是否“自然”的经验法则是，对象的顺序是否*始终*如此。

话虽如此，使用 Comparable 还是 Camparator 的决定并不是您需要考虑太多的决定。大多数 IDE 都有重构工具，这使得 Comparable 和 Comparator 之间的转换**非常**容易。所以如果你现在选择走错路，改变它不需要太多的努力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T16:58:55.387

您在此处定义的产品顺序非常具体，并且

*   可能会在您的程序的未来版本中发生变化
*   可能会通过上下文参数化来丰富
*   不会涵盖新功能

所以很难说它是“自然的”。

我建议定义一个常量，例如

```
public static Comparator<Product> STANDARD_COMPARATOR = new Comparator<Product>() {
    public int compare(Product p1, Product p1) {
        return ...
    }
}; 
```

然后你就可以轻松地在任何地方排序

```
Collections.sort(myProductList, Product.STANDARD_COMPARATOR); 
```

随着您添加其他比较器，您的代码将以更好的方式发展。

就像您通常应该更喜欢组合而不是继承一样，您应该尽量避免以不可变的方式定义对象的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:48:30.580

如果您的订单仅基于数字，那`Comparable`很好。

但是，由于您的顺序（有时）涉及文本的词汇顺序，所以一个`Comparator`类更好，因为使用 of`Comparable`意味着使用 `String.compareTo`which 会阻止您进行国际化。

实现的单独类`Comparator`可以使用本地化`Collator`来比较字符串。例如：

```
public class ProductComparator
implements Comparator<Product> {
    private final Collator collator;

    public ProductComparator() {
        this(Locale.getDefault());
    }

    public ProductComparator(Locale locale) {
        this.collator = Collator.getInstance(locale);
    }

    public int compare(Product product1,
                       Product product2) {

        int c = product1.getPriority() - product2.getPriority();
        if (c == 0) {
            c = product1.getPrice() - product2.getPrice();
        }
        if (c == 0) {
            c = collator.compare(product1.getName(), product2.getName());
        }
        return c;
    }
} 
```

无论您使用 Comparable 还是 Comparator，明智的做法是确保`Product`有一个`equals`方法可以检查与比较代码相同的属性。**

# java - 如何从 Thread 更新 java GUI？

> ID：13543345
> 
> 赞同：3
> 
> 时间：2012-11-24T16:56:33.410
> 
> 标签：java, swing

```
 private void StartActionPerformed(java.awt.event.ActionEvent evt) {

        Queue queue=new Queue();
        int target=Integer.parseInt(Target.getText());
        String path=Path.getText();
        final Producer p=new Producer(queue, target);
        Consumer c=new Consumer(queue);
        p.start();
        c.start();

        while(p.finish !=true)
        {
          Runnable r = new Runnable() {
            public void run() {
              ProgressPrecent.setValue(Producer.ProgressPercent);
            }
          };
          if(EventQueue.isDispatchThread()) {
            r.run();
          }
          else {
            EventQueue.invokeLater(r);
          }
       }
 } 
```

我有两个具有共享队列的类。其中之一是生产者，它生产直到目标另一个消耗这些元素。所有两个都扩展了线程。我想向用户显示进度百分比，但它冻结了我的 GUI，我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T18:25:51.177

*   `Worker Threads`默认情况下从不调用`EventDispatchThread`，你有问题[`Concurency in Swing`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

*   Swing GUI 的所有更新都必须在 EDT 上完成

*   `Runnable`可能是正确的方式，但`ProgressPrecent.setValue(Producer.ProgressPercent);`必须包裹在`invokeLater`

代码

```
SwingUtilities.invokeLater(new Runnable(){
    public void run(){
        ProgressPrecent.setValue(Producer.ProgressPercent);
    }
}); 
```

*   删除对 EDT 的测试，

代码行

```
if(EventQueue.isDispatchThread()) {
   r.run();
} 
```

`Workers Thread`默认情况下永远不会调用 EDT，那么无论是否从 EDT 开始，也没有经过测试`isDispatchThread()`都不会让我感觉

*   永远不要`Thread.sleep(int`在里面使用) `Swing Listeners`，因为也会导致冻结 Swing GUI

*   我认为您也可以使用[SwingWorker 来完成这项](https://stackoverflow.com/a/6114890/714968)工作

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T17:57:14.083

我认为您必须将整个 while 循环放入一个线程中。否则循环将阻止您的 ActionEvent 并因此冻结 UI。

就像是：

```
new Thread(){
    public void run(){
        while(!p.finish){
           SwingUtilities.invokeLater(new Runnable(){
             public void run(){
               ProgressPrecent.setValue(Producer.ProgressPercent);
             }
           }); 
           try{
              Thread.sleep(100);
           }catch(...){}
        }
    }
}.start(); 
```

# java - JPA Query 通过 id 以外的参数查找

> ID：13543346
> 
> 赞同：-1
> 
> 时间：2012-11-24T16:56:36.913
> 
> 标签：java, mysql, database, jpa, dao

我有一个 MySQL 数据库，其中包含一个名为`User`. 它有两列。一个是命名`ID`的，另一个是`EMAIL`。它有更多的列，但这与问题无关。

在我的 DAO 对象中，我想创建一个名为`findByEmail`. 它目前看起来像这样：

```
@Override
public User findByEmail(String email) {
    Object obj = em.createQuery("FROM User WHERE EMAIL LIKE :email").setParameter("email", email).getSingleResult();
    User user = (User)obj;
    return user;        
} 
```

这给出了一个空指针异常。我的猜测是，我的查询是错误的。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:53:43.413

显然，MySQL 服务器被配置为阻止所有远程连接。它现在可以工作（使用 vels4j 提供的 JPA 查询，`select r FROM User r WHERE r.EMAIL = :email`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T11:23:34.633

正如你所说，你可以这样做。但是如果你想遵循更接近的 SQL 方法，你不妨使用

```
 @Override
public User findByEmail(String email) {
    Object obj = em.createNativeQuery("SELECT * FROM User WHERE EMAIL = " + email).getSingleResult();
    User user = (User)obj;
    return user;        
} 
```

此外，如果您想缩短代码，您可以在执行查询的同一行中声明并强制转换用户，如下所示：

```
User user = (User) em.createNativeQuery("SELECT * FROM User WHERE EMAIL = " + email).getSingleResult(); 
```

希望能帮助到你！

# php - 是否可以在 PHP 中以“人类可读的语言”序列化数组然后反序列化它？

> ID：13543349
> 
> 赞同：-1
> 
> 时间：2012-11-24T16:57:04.273
> 
> 标签：php, serialization, deserialization, store, human-readable

我要求通过 PHP 脚本进行序列化和反序列化。只有有时我手动编辑数组（在 database.txt 中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T16:59:08.700

您可以将数组导出为[JSON](http://json.org)（JavaScript 对象表示法）字符串，然后再对其进行解码。

您可以分别使用函数[`json_encode`](http://php.net/json_encode)和来做到这一点。[`json_decode`](http://php.net/json_decode)

```
$a = array(
  'a' => 1,
  'b' => 2,
  'c' => array(1,2,3));
file_put_contents('database.txt', json_encode($a));
// encoded: {a:1,b:2,c:[1,2,3]}

// ---
$a = json_decode(file_get_contents('database.txt'), TRUE);
// specify TRUE to parse objects as assoc. arrays ---^ 
```

请注意，所有这一切可能不是最好的主意（我有点担心您选择的文件名——如果您想要一个 DB，那么就使用一个 DB！（例如 sqlite））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T16:59:15.417

您应该看一下 JSON 格式。根据您要序列化的数据类型，这应该可以满足您的需求，并且它非常易于阅读且易于编辑。

特别是，您的数组仅限于包含数字、字符串、浮点数、布尔值或其他数组。但是，您既可以存储数字索引数组，也可以存储关联数组。

有关标准的更多信息，请查看[http://www.json.org/](http://www.json.org/)，有关 php 函数，请参阅[http://us2.php.net/json_encode](http://us2.php.net/json_encode)和[http://us2.php.net/ json_decode](http://us2.php.net/json_decode)

# ios - 看起来像 UINavigationItem 的 iOS 制作按钮

> ID：13543351
> 
> 赞同：0
> 
> 时间：2012-11-24T16:57:18.370
> 
> 标签：ios, button, uibutton, uinavigationitem

除了将 UINavigationItem 的外观复制到自定义图像文件中之外，有没有办法向 iOS 应用程序添加一个看起来像 UINavigationItem 的按钮？

我有 UITableView 并希望在每个单元格的右侧有用于特定操作的按钮（每个单元格 1 个按钮，但并非所有单元格都有相同的按钮）。因此，我希望将此基于在表格单元格上滑动删除时显示的“删除”按钮的行为，但我还需要能够更改此类按钮的颜色和文本。

做这样的事情的最好方法是什么？

编辑：我知道我可以在 Photoshop 中复制该外观并使用图像，但是通过这种方式更改标题和颜色，我每次都必须返回编辑图像。有没有办法在 UINavigationBar 之外以编程方式制作一个看起来像 UINavigationItem 的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:51:36.750

我正在寻找的按钮样式是 UISegmentedControl。它的行为与标准按钮略有不同，但看起来要好得多。如果您没有时间花时间在图形编辑器中制作按钮，这是一个很好的替代丑陋不灵活的 UIButton 的方法。

```
UISegmentedControl *btn = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"My Button"]];
btn.segmentedControlStyle = UISegmentedControlStyleBar;
btn.momentary = YES;
btn.tintColor = [UIColor greenColor];
[btn addTarget:self action:@selector(btn_action:) forControlEvents:UIControlEventValueChanged]; 
```

# hadoop - 在使用加载数据流步骤的猪中，使用（使用 PigStorage）和不使用它有什么区别？

> ID：13543358
> 
> 赞同：1
> 
> 时间：2012-11-24T16:58:28.857
> 
> 标签：hadoop, apache-pig

在使用加载数据流步骤的猪中，使用（使用 PigStorage）和不使用它有什么区别？

想知道以下步骤之间的区别。

```
movie2 = load 'movie/part-m-00000' as (mid:int, mname:chararray, myr:int);

movie2 = load 'movie/part-m-00000' using PigStorage(',') as (mid:int, mname:chararray, myr:int); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:31:43.153

默认使用 PigStorage，它是一个文本文件，其中的字段由分隔符分隔，制表符作为分隔符。

指定`using PigStorage(',')`将分隔符更改为逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:33:19.607

添加到 rsp 的答案，使用 PigStorage 有两个优点

1.  指定文件分隔符的选项

2.  是否加载输入模式的选项。

更多细节在这里： http: [//pig.apache.org/docs/r0.10.0/api/org/apache/pig/builtin/PigStorage.html](http://pig.apache.org/docs/r0.10.0/api/org/apache/pig/builtin/PigStorage.html)

# xna - XNA XACT 我在哪里放置 .xap 文件？

> ID：13543359
> 
> 赞同：0
> 
> 时间：2012-11-24T16:58:32.943
> 
> 标签：xna, xact

我已经尝试并在互联网上查找了很长时间，但是您将 .xap 文件放在哪里？我读过你应该把文件放在你的内容文件夹中，但我有一个内容文件夹；

游戏\游戏内容\

但我也有；

TheGame\TheGame\bin\x86\Debug\Content

它是哪一个？如果我将 .xap 文件添加到后者，它会在我刷新解决方案资源管理器时识别它，但前者不会。

但是，如果我将 .xap 添加到后者，则会出现错误，指出当我使用以下代码行访问它时找不到它；

ae = new AudioEngine(@"Content\game_content\audio\xact\Win\xna xact file.xgs");

这一行显然获得了 \x86\debug 路径。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:53:28.700

Visual Studio，转到解决方案资源管理器并右键单击内容解决方案（即“TheGameContent (Content)”）或该部分中的文件夹，然后选择添加 > 现有项目...并选择 .xap 文件。如果它不在那里，它会将文件复制到 TheGame/Content 中，但它也会使其准备好加载并在您的项目中工作。

基本上它与将图像文件添加到 XNA 项目中相同，它将为您省去所有的麻烦。

# ruby - 使用 Ruby 包装器查询 Factual API 数据的问题

> ID：13543367
> 
> 赞同：0
> 
> 时间：2012-11-24T16:59:27.360
> 
> 标签：ruby, json, api

尝试使用提供的 Ruby 包装器实现 Factual API。希望返回地理点一定米数内的所有酒吧。我的查询如下所示：

```
factual.table("places").search("category_id"=>"312").geo("$circle" => {"$center" => [40.7811, -73.98], "$meters" => 10000}).rows 
```

这将返回 200:OK 响应，但有 0 条记录（即使该位置在曼哈顿）。我很确定我传递类别信息的方式存在问题。

根据 API 文档，我也尝试过像这样传递类别数据，这会返回语法错误：

```
factual.table("places").filters("category_ids" => {"category_ids":["6"]}).geo("$circle" => {"$center" => [40.7811, -73.98], "$meters" => 10000}).rows 
```

还有这个，它返回 Factual 错误 *references unknown field category_ids*：

```
factual.table("places").filters("category_ids" => {"$in" => ["312", "338"]}).geo("$circle" => {"$center" => [40.7811, -73.98], "$meters" => 10000}).rows 
```

我在此处关注文档示例并使用 v3：[https](https://github.com/Factual/factual-ruby-driver/wiki/Read-API) ://github.com/Factual/factual-ruby-driver/wiki/Read-API和此处：http: [//developer.factual.com/display/docs/地点+API++-+全局+地点+属性](http://developer.factual.com/display/docs/Places+API+-+Global+Place+Attributes)

编辑：

我也尝试将`filters`方法更改为`search`：

```
 factual.table("places").search("category_ids" => {"$in" => ["312", "338"]}).geo("$circle" => {"$center" => [40.7811, -73.98], "$meters" => 10000}).rows 
```

这将返回地址中包含 338 的记录，而与类别无关。很奇怪。几个小时以来，我一直在尝试不同的事情。我很确定这是我如何传递类别信息的问题。我正在尽可能密切地关注文档，但我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:01:00.823

试试这个

```
factual.table("places").filters("category" => "Bars")
  .geo("$circle" => {"$center" =>[40.7811, -73.98] , "$meters" => 1000}).rows 
```

# python - 使用 Python ElementTree 提取特定的 XML 行

> ID：13543369
> 
> 赞同：1
> 
> 时间：2012-11-24T16:59:32.960
> 
> 标签：python, xml, elementtree

我有点卡在我正在做的一个使用 Python 的项目上——我对这个项目很陌生。我被告知使用 ElementTree 并从传入的 XML 文件中获取指定的数据。这听起来很简单，但我不擅长编程。下面是一个（非常！）传入文件的小示例以及我尝试使用的代码。

我想要接下来的任何提示或地方。我曾尝试搜索并关注其他人所做的事情，但我似乎无法获得相同的结果。我的目标是获取“活动”、“房间”和“方向”中包含的信息，但稍后我需要获取更多信息。

我尝试过使用 XPath，但效果不太好，尤其是 xml 使用的命名空间，而且我需要的所有东西的 XPath 都会变得太大。我已经简化了这个例子，所以我可以理解要做的原则，因为在此之后必须扩展它以从“AssetEquipment”和它们的多个实例中获取更多信息。然后最终目标是将来自一个设备的所有信息保存到一个字典中，以便我以后可以操作它，每个新设备都在它自己的单独字典中。

示例 XML：

```
<AssetData>
<Equipment>
    <AssetEquipment ID="3" name="PC960">
        <Active>Yes</Active>
        <Location>
            <RoomLocation>
                <Room>23</Room>
                <Area>
                    <X-Area>-1</X-Area>
                    <Y-Area>2.4</Y-Area>
                </Area>
            </RoomLocation>
        </Location>
        <Direction>Positive</Direction>
        <AssetSupport>12</AssetSupport>
    </AssetEquipment>
</Equipment> 
```

示例代码：

```
tree = ET.parse('C:\Temp\Example.xml')
root = tree.getroot()

ns = "{http://namespace.co.uk}"

for equipment in root.findall(ns + "Equipment//"):
    tagname = re.sub(r'\{.*?\}','',equipment.tag)
    name = equipment.get('name')

    if tagname == 'AssetEquipment':
        print "\tName: " + repr(name)
        for attributes in root.findall(ns + "Equipment/" + ns + "AssetEquipment//"):
            attname = re.sub(r'\{.*?\}','',attributes.tag)
            if tagname == 'Room': #This does not work but I need it to be found while
                                  #in this instance of "AssetEquipment" so it does not
                                  #call information from another asset instead.
                room = equipment.text
                print "\t\tRoom:", repr(room) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:01:45.697

```
import xml.etree.cElementTree as ET
tree = ET.parse('test.xml')
for elem in tree.getiterator():
    if elem.tag=='{http://www.namespace.co.uk}AssetEquipment':
        output={}
        for elem1 in list(elem):
            if elem1.tag=='{http://www.namespace.co.uk}Active':
                output['Active']=elem1.text
            if elem1.tag=='{http://www.namespace.co.uk}Direction':
                output['Direction']=elem1.text
            if elem1.tag=='{http://www.namespace.co.uk}Location':
                for elem2 in list(elem1):
                    if elem2.tag=='{http://www.namespace.co.uk}RoomLocation':
                        for elem3 in list(elem2):
                            if elem3.tag=='{http://www.namespace.co.uk}Room':
                                output['Room']=elem3.text
        print output 
```

# html - DIV标签中的奇怪属性

> ID：13543382
> 
> 赞同：5
> 
> 时间：2012-11-24T17:00:16.253
> 
> 标签：html, tags

我在 div 标签中看到了一些我以前从未见过的属性。我有一段时间没有接触 html，但谷歌搜索该属性并没有返回太多有用的信息。

```
 <div dataquery="#item_1306"  comp="box.components.Flashplayer" id="box_Flashplayer_2"     propertyquery="#box_Flashplaye_2" class="box_Flashplaye_style2"... 
```

我的问题是，你知道这些“dataquery”“comp”和“propertyquery”属性是什么吗？

非常感谢各位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T17:03:03.883

如今，HTML 通常通过自定义属性得到增强，而 HTML5 明确允许这样做。通常这些属性应该以“data-”为前缀，但显然这里不是这种情况。

含义很可能取决于页面中包含的脚本。

例如，在 twitter bootstrap 中，常见的属性`<body data-spy='scroll'>`是由脚本解释的属性，并允许监视用户滚动的数量。

当包含 Facebook 类似按钮时，您可能具有`data-style`控制是否使用框、按钮或 hwatever 的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:03:34.603

您可以将自己的属性添加到元素。我不认为这些属性是标准属性，如 class 和 name，而是程序员出于某种目的添加 self 的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:03:34.973

这些不是 W3C 属性，它们用于执行某些任务，可能是它使用的语言，并且可能执行一些特殊标记，但这不是最佳实践，因为它会给出 HTML 验证错误，更好的是使用 data-xxxx 标记额外属性。

更多读数。 [http://www.javascriptkit.com/dhtmltutors/customattributes.shtml](http://www.javascriptkit.com/dhtmltutors/customattributes.shtml) http://ejohn.org/blog/html-5-data-attributes/ [http://html5doctor.com/html5-custom-data-attributes/](http://html5doctor.com/html5-custom-data-attributes/)

# magento - Magento Adminhtml 模块上的 404 错误

> ID：13543383
> 
> 赞同：0
> 
> 时间：2012-11-24T17:00:27.593
> 
> 标签：magento, adminhtml

我已经为带有管理部分的mageneto 创建了一个相当简单的模块。

管理部分运行良好，只是在点击“添加项目”时出现 404 错误。

特别奇怪的是“新”动作只是转发到“编辑”动作并且编辑动作工作正常：

```
public function newAction()
{
    $this->_forward('edit');
} 
```

我读过的所有论坛帖子都表明这是我在 config.xml 中设置的 ACL 的问题，但我尝试了无数次排列和组合，注销并重新登录以测试它们，但似乎没有一个工作。

config.xml 的 ACL 部分如下所示：

```
<acl>
<resources>
    <all>
        <title>Allow Everything</title>
    </all>
    <admin>
        <children>
            <press>
                <title>Press Module</title>
                <sort_order>10</sort_order>
            </press>
        </children>
    </admin>
</resources> 
```

另外，如果我将 newAction 更改为仅回显某些内容，则它可以正常工作。

关于它可能是什么的任何其他想法？当然，如果控制器只是转发到编辑页面并且编辑页面很好，我不应该看到 404 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:04:54.063

在黑暗中拍摄了一点，但也许你可以尝试 $this->_redirect() 而不是 _forward

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T11:52:34.383

您的模块 config.xml 中缺少某些内容。我面临同样的情况，但是当我添加以下代码时......它对我来说很好

```
<admin>
    <routers>
        <yourmodule>
            <use>admin</use>
            <args>
                <module>Yournamespace_Yourmodule</module>
                <frontName>yourmodule</frontName>
            </args>
        </yourmodule>
    </routers>
</admin> 
```

# android - 为什么我们可以直接使用游标？

> ID：13543387
> 
> 赞同：0
> 
> 时间：2012-11-24T17:01:20.947
> 
> 标签：android, cursor

查看 android.database.Cursor 的源代码，我注意到它的所有成员函数都是未定义的。

如果是这样，我们如何直接使用Cursor？我们不应该使用一些实现 Cursor 的具体类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:05:28.477

> 我们不应该使用一些实现 Cursor 的具体类吗？

您*确实*“使用了一些实现的具体类`Cursor`”。例如，当您查询 SQLite 时，您会得到[`SQLiteCursor`](http://developer.android.com/reference/android/database/sqlite/SQLiteCursor.html)回复。我们只是倾向于将其作为接口类型 ( `Cursor`) 来引用，以防我们有时更改实现（例如，切换到查询 a `ContentProvider`）。

如果您查看[的 JavaDocs`Cursor`](http://developer.android.com/reference/android/database/Cursor.html)，您将看到实现此接口的类的列表。

# jquery - 如何使用 jquery 创建弹出窗口

> ID：13543396
> 
> 赞同：0
> 
> 时间：2012-11-24T17:01:42.273
> 
> 标签：jquery, dialog

我想使用jQuery创建对话框，它可以在java中创建like和object。

```
var popupObject = $.popup({option1:'dd', option2: 'ccc'}); 
```

然后我可以像这样控制弹出窗口：

```
popupObject.show();
popupObject.hide(); 
```

我需要这种编码风格来应用于 JSF 控制。

我如何在 jQuery 中编码？

请帮帮我，我找了很久。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:28:31.577

jQuery有很多好的弹出框功能这里有一个[列表或**10个**](http://www.jquery4u.com/windows/10-jquery-popup-window-image-slider-plugins/)带有现成源代码和Demo的各种弹出框，你也可以试试[jQuery UI](http://jqueryui.com/dialog/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:22:08.200

你可以试试[jQuery UI 对话框](http://jqueryui.com/dialog/)。

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Dialog - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="/resources/demos/external/jquery.bgiframe-2.1.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        $( "#dialog" ).dialog();
    });
    </script>
</head>
<body>

<div id="dialog" title="Basic dialog">
    <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div>

</body>
</html> 
```

# c# - 到本地文件的超链接不起作用

> ID：13543398
> 
> 赞同：0
> 
> 时间：2012-11-24T17:02:03.880
> 
> 标签：c#, hyperlink

我需要使用 c# 向现有报告添加 2 种类型的链接。例如：

```
1) http://www.google.co.il/
2) file:///C:/index.html 
```

我添加了链接，但只有**“http://”有效**。当我按下**“file:///”的链接时，什么也没有发生**。

我已经上传了包含问题的完整项目（虽然非常小）： [http ://www.filefactory.com/file/452gsoyymalv/n/ObjectReports.zip](http://www.filefactory.com/file/452gsoyymalv/n/ObjectReports.zip)

顺便说一句，“index.html”是一个简单的“helloWorld”，在浏览器地址栏上写入路径时成功加载。

有谁知道应该设置哪些其他设置才能使文件链接正常工作？

*样品的信用（**没有我的案例**）： [http ://www.c-sharpcorner.com/uploadfile/mahesh/reportviewerobject04172007111636am/reportviewerobject.aspx](http://www.c-sharpcorner.com/uploadfile/mahesh/reportviewerobject04172007111636am/reportviewerobject.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:37:45.870

AFAIK 出于安全原因禁用此功能 - 这`ReportViewer`不是一个完整的浏览器...

[`ReportViewer.Hyperlink`您可以尝试通过自己处理事件](http://msdn.microsoft.com/en-us/library/microsoft.reporting.winforms.reportviewer.hyperlink%28v=vs.100%29.aspx)来规避该限制......现在不能自己尝试，但这是唯一可以工作的选项恕我直言......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T08:13:14.750

这是详细的解决方案（@Yahia 建议的主要思想）：

首先，我创建了事件处理程序：

```
public void HyperLinkReportHandler(Object sender, HyperlinkEventArgs e)
        {
            Process.Start(e.Hyperlink);
        } 
```

其次，我关联了事件处理程序：

```
this.rvContainer.Hyperlink += HyperLinkReportHandler; 
```

# hibernate - H2 DB -- Hibernate 示例 -- 无法从资源中解析映射文档

> ID：13543400
> 
> 赞同：1
> 
> 时间：2012-11-24T17:02:11.260
> 
> 标签：hibernate

# *以下每个文件都在同一位置*

# 错误 ：

```
    SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。
    SLF4J：默认为无操作（NOP）记录器实现
    SLF4J：有关详细信息，请参阅 http://www.slf4j.org/codes.html#StaticLoggerBinder。
org.hibernate.InvalidMappingException：无法从资源 ./employee.hbm.xml 解析映射文档
    在 org.hibernate.cfg.Configuration.addResource(Configuration.java:616)
    在 org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1635)
    在 org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1603)
    在 org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1582)
    在 org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1556)
    在 org.hibernate.cfg.Configuration.configure(Configuration.java:1476)
    在 org.hibernate.cfg.Configuration.configure（Configuration.java:1462）
    在 com.yahoo.hibernatelearning.FirstExample.main(FirstExample.java:19)
原因：org.hibernate.InvalidMappingException：无法从输入流解析映射文档
    在 org.hibernate.cfg.Configuration.addInputStream(Configuration.java:555)
    在 org.hibernate.cfg.Configuration.addResource(Configuration.java:613)
    ... 7 更多
引起：org.dom4j.DocumentException：http://hibernate.sourceforge.net/%0Ahibernate-mapping-3.0.dtd 嵌套异常：http://hibernate.sourceforge.net/%0Ahibernate-mapping-3.0.dtd
    在 org.dom4j.io.SAXReader.read(SAXReader.java:484)
    在 org.hibernate.cfg.Configuration.addInputStream(Configuration.java:546)
    ... 8 更多
线程“主”java.lang.NullPointerException 中的异常
    在 com.yahoo.hibernatelearning.FirstExample.main(FirstExample.java:33)

```

# 休眠配置：hibernate.cfg.xml

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory>
<property name="hibernate.connection.driver_class">org.h2.Driver</property>
<property name="hibernate.connection.url">jdbc:h2:./db/repository</property>
<property name="hibernate.connection.username">sa</property>
<property name="hibernate.connection.password"></property>
<property name="hibernate.default_schema">PUBLIC</property>
<property name="hibernate.dialect">org.hibernate.dialect.H2Dialect</property>
<property name="hibernate.show_sql">true</property>
<property name="hibernate.hbm2ddl.auto">update</property>
<!--  Mapping files  -->
<mapping resource="./employee.hbm.xml"/>
</session-factory>
</hibernate-configuration> 
```

# 映射配置：employee.hbm.xml

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/
hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="com.yahoo.hibernatelearning.Employee" table="employee">
<id name="empId" type="int" column="emp_id" >
<generator class="native"/>
</id>
<property name="empName">
<column name="emp_name" />
</property>
<property name="empSal">
<column name="emp_sal" />
</property>
</class>
</hibernate-mapping> 
```

# 映射类：Employee.java

```
    包 com.yahoo.hibernatelearning；

    公共类员工{

        私人int empId；
        私人字符串 empName；
        私营企业；

        公共 int getEmpId() {
            返回员工ID；
        }   

        公共无效 setEmpId(int empId) {
            这个.empId = empId;
        }

        公共字符串 getEmpName() {
            返回员工姓名；
        }

        公共无效setEmpName（字符串empName）{
        这个.empName = empName;
        }

        公共 int getEmpSal() {
            返回empSal；
        }

        公共无效 setEmpSal（int empSal）{
            这个.empSal = empSal;
        }

    }

```

# 代码：FirstExample.java

```
    包 com.yahoo.hibernatelearning；

    导入 org.hibernate.Session；
    导入 org.hibernate.SessionFactory；
    导入 org.hibernate.Transaction；
    导入 org.hibernate.cfg.Configuration；

    公共类 FirstExample {

    /**
    * @param 参数
    */
    公共静态无效主要（字符串[]参数）{
    // TODO 自动生成的方法存根

    会话 sess = null;
    事务 tran = null;
    尝试{
    SessionFactory sessFact = new Configuration().configure().buildSessionFactory();
    sess = sessFact.openSession();
    System.out.println("会话："+ sess);
    tran = sess.beginTransaction();
    雇员 emp = new Employee();
    emp.setEmpName("Birendra Kumar");
    emp.setEmpSal(12000);
    sess.save(emp);
    tran.commit();
    }
    捕捉（异常前）{
    ex.printStackTrace();
    }
    最后{
    sess.close();
    }

    }

    }

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:17:56.857

`%0A`告诉问题是 和 之间的换`http://hibernate.sourceforge.net/`行`hibernate-mapping-3.0.dtd`。

通过删除换行符解决了问题：

```
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" 
```

# css - 使用 CSS 在图像后放置文本

> ID：13543402
> 
> 赞同：3
> 
> 时间：2012-11-24T17:02:15.473
> 
> 标签：css, image, text

我正在尝试做一些我确信很简单的事情，但我做不到。

我想要做的就是有一个图像，然后在该图像之后有一些文本，并且能够准确地控制图像和文本之间的空间量。

这是我的代码：

```
<div class="wrap"><div style="width:189px;""position:relative;float:left;top:5px;">
      <a href="http://google.com"><img src="30000000_1.jpg" style="position:absolute" width="189"></a>
</div> 
```

在我的样式表中， wrap 具有以下属性：

```
.wrap {
    /*text-align: left;*/
    width: 1100px;
    height: 870px;
    background-color: white;
    color: black;
    padding: 10px;
    margin: auto;
} 
```

我希望我的文本在图像正下方看起来像这样：

> 用户名
> 
> 年龄
> 
> 地点

目前，我只是添加大量中断标签来控制文本的位置，但这很混乱，必须有更好的方法。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:31:52.937

```
<div class="wrap">
<div style="width:189px;position:relative;float:left;top:5px;">
<a href="http://google.com"><img src="30000000_1.jpg" style="position:absolute" width="189" /></a>
</div>
<br clear="all" />
<div id="bottomText">
Username
<br /><br />
Age
<br /><br />
Location
</div>
</div> 
```

CSS：

```
.wrap {
    /*text-align: left;*/
    width: 1100px;
    height: 870px;
    background-color: white;
    color: black;
    padding: 10px;
    margin: auto;
}

#bottomText{
    margin-top: 10px;
} 
```

更改`margin-top: 10px`为所需的距离。

`bottomText`如果您打算拥有多个班级，请更改为班级而不是 id。

（注意：我`""`从第二个中删除了你的，`div`因为我不确定为什么会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:33:55.090

检查此解决方案[jsfiddle](http://jsfiddle.net/7gwQA/1/)。就我个人而言，我不会使用内联样式，因为它会变得更加凌乱。我已经用于`<ul>`文本。这可以让您更好地控制文本的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T18:28:44.697

只需对文本使用无序列表，因为它是一个列表。`ul`是“块级元素”，因此它们会自动清除。并且绝对使用外部样式表与内联样式。外部更干净，更易于使用和更改。示例：http: [//jsfiddle.net/codeview/Fk3EK/](http://jsfiddle.net/codeview/Fk3EK/)

HTML：

```
<div class="wrap">  
<a href="http://google.com"><img src="30000000_1.jpg"></a>  
<ul>  
<li>Username</li>  
<li>Age</li>  
<li>Location</li>  
<ul>  
</div> 
```

CSS：

```
.wrap {  
    /*text-align: left;*/  
    width: 1100px;  
    height: 870px;  
    background-color: yellow;  
    color: black;  
    padding: 10px;  
    margin: auto;  
}  
ul { list-style-type:none; }  
li { padding:5px 0; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T18:47:03.553

我无法让它工作。可能是因为你们看不到我正在进行的其他代码。但也许我以错误的方式处理问题。

这是我开始摆弄 css 定位之前的代码：

```
<br><br>

 <div class="imgleft">
 <a href="http://image.jpg" alt="" border="0"></a></div>

    <br><br><br><br><br><br><br><br><br><br><br>

        <span style="font-weight: bolder;font-size: 12px;"></br><br><br></br>
    <font color="green">    User69 </font> <a href="google.com"><img src="online01.gif" alt="" border="0" style="float:center"></a><br>

        Location: 
        <script language="JavaScript" src="http://j.maxmind.com/app/geoip.js"></script> 
        <script language="JavaScript">document.write(geoip_region_name());</script></span> 
        </script></br>

<br><br> 
```

问题是，图像有固定的宽度，但高度不同，所以有时我会使用 8 个中断标签，有时会使用 7 个，但每个图像下方的确切距离（文本所在的位置）是不同的。而且看起来很糟糕。

页面上有 3 个图像，所以它在图像下方是图像、文本（嗯，还有一个图像，闪烁的 gif），然后是另一个在其下方带有文本的图像，依此类推。页面左侧从上到下。

以下是我的 css 中的相关位：

```
.imgleft {
float: left;
width: 120px;
}

.imgleft img {
clear: both;
width: 175px;
padding-bottom: 0px;

 } 
```

我确定我让这种方式变得比它需要的更复杂！对不起。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T20:35:19.323

如果有人可以看一下，我已经在第一个答案的评论中放置了我的代码的链接。谢谢。

# oauth-2.0 - 如何在打开 Facebook 登录对话框之前告诉 iphone 应用用户会发生什么

> ID：13543404
> 
> 赞同：0
> 
> 时间：2012-11-24T17:02:29.540
> 
> 标签：oauth-2.0, facebook-ios-sdk

允许用户通过第 3 方身份验证提供商（例如 Facebook、Google、Twoitter 等）登录的应用程序应打开一个浏览器窗口，让用户通过该提供商进行身份验证。这意味着，在某些时候，应用程序是后台的，并且用户与浏览器窗口进行交互。就在浏览器打开之前，推荐的做法是通知用户将会发生什么（例如，参见 OAuth 2.0 入门 - O'Reilly），假设一个警报窗口类似于“您现在将离开 XYZ 应用程序和一个浏览器窗口将打开，您可以在其中安全地输入您的凭据”。

**我的问题：**如果我使用 facebook SDK for ios 怎么办？查看 SDK，似乎没有任何通知和指定状态可以让我检测到 sdk 即将后台运行我的应用程序并即将打开 Safari 或 Facebook 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:25:13.887

使用一个简单的警报来解释按下按钮时会发生什么（或者您选择这样做）。并且当用户按下警报上的 OK 时，请登录。

但是我很确定，在 Facebook 服务条款中，您必须在与 facebook 交互之前拥有某种 Facebook 商标，并且在按钮上以某种方式提及 facebook 然后登录用户而不提及它似乎是标准做法，因为它符合用户的期望。

尤其是在使用 iOS 6.0 和 Facebook SDK 3.1 for iOS 时，Facebook 的 SDK 会自行处理大部分内容。

# web-applications - 如何通过网络自动导入.cer文件

> ID：13543407
> 
> 赞同：1
> 
> 时间：2012-11-24T17:02:49.697
> 
> 标签：web-applications, import, certificate

我正在尝试通过任何代码和脚本创建一个网页，以`.cer`自动下载文件并将其导入任何客户端的受信任根目录。

例如：一个`.cer`从我的网络服务器目录下载文件并自动将其导入到客户端的受信任根目录的 java 脚本。

我已经通过客户端本地的 VBScript 代码进行了尝试，但现在我想通过网页自动完成这项工作，而不通知浏览用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:31:06.527

添加受信任的根证书是一项极其危险的操作。“不通知浏览用户”绝对没有办法做到这一点，也不应该有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T16:33:42.427

嗨，亲爱的，我搜索了许多页面和库以找到通过 javascript 导入 seft 签名 ca 的最佳方法，并找到两种方法之一：

```
` `
>    <html> 
> <头部>
> <title>证书安装test2</title>
> </head>
> <正文>
> <object id='CertEnroll' name='CertEnroll'></object>
> <object id='XEnroll' name='XEnroll'></object>

> <脚本语言="javascript">

            var CERT_ENROLL_CLASSID = "clsid:884e2049-217d-11da-b2a4-000e7bbb2b09";

            功能 InstallCertChainCEnroll(pkcs7){
                CertEnroll.classid = CERT_ENROLL_CLASSID;
                varenrollObj = CertEnroll.CreateObject("X509Enrollment.CX509Enrollment");
                注册对象。初始化（1）；
                for (var i=0;i<pkcs7.length;i++){
                    enrollObj.InstallResponse(4, pkcs7[i], 6, "");
                }
                返回真；
            }

            document.write("<br>正在安装证书...");
            尝试{
                var pkcs7Chain = 新数组（）；

                pkcs7链[0] =                                                     
                "-----开始证书-----" +
                "MIIDUzCCAjugAwIBAgIIMPQ+41XDpAAwDQYJKoZIhvcNAQEFBQAwNzERMA8GA1UE" +
                "AwwIQWRtaW5DQTExFTATBgNVBAoMDEVKQkNBIFNhbXBsZTELMAkGA1UEBhMCU0Uw" +
                ……
                "QCU+xDRP4/o/HHR5T0MEYI+bmuWfF6hbGai6r4VlLmnQHb0Rs5mGDN3eHj0lyMhT" +
                "NiNSvPMvQviVxEsjwBjpYhe53cI4bxIVOpqW8GvxUot/Yakdy5xC" +
                “-----结束证书-----”

                InstallCertChainCEnroll(pkcs7Chain);
            } 抓住（前）{
                document.write("<br>" + ex);
                document.write("<br>" + ex.message);
            }            
> </脚本>
> </正文>
> </html>

` `
```

和两个：

```
` `
>    <html> 
> <头部>
> <title>证书安装test2</title>
> </head>
> <正文>
> <object id='CertEnroll' name='CertEnroll'></object>
> <object id='XEnroll' name='XEnroll'></object>

> <脚本语言="javascript">

            var CERT_ENROLL_CLASSID = "clsid:884e2049-217d-11da-b2a4-000e7bbb2b09";

            功能 InstallCertChainCEnroll(pkcs7){
                CertEnroll.classid = CERT_ENROLL_CLASSID;
                varenrollObj = CertEnroll.CreateObject("X509Enrollment.CX509Enrollment");
                注册对象。初始化（1）；
                for (var i=0;i<pkcs7.length;i++){
                    enrollObj.InstallResponse(4, pkcs7[i], 6, "");
                }
                返回真；
            }

            document.write("<br>正在安装证书...");
            尝试{
                var pkcs7Chain = 新数组（）；

                pkcs7链[0] =                                                     
                "-----开始证书-----" +
                "MIIDUzCCAjugAwIBAgIIMPQ+41XDpAAwDQYJKoZIhvcNAQEFBQAwNzERMA8GA1UE" +
                "AwwIQWRtaW5DQTExFTATBgNVBAoMDEVKQkNBIFNhbXBsZTELMAkGA1UEBhMCU0Uw" +
                ……
                "QCU+xDRP4/o/HHR5T0MEYI+bmuWfF6hbGai6r4VlLmnQHb0Rs5mGDN3eHj0lyMhT" +
                "NiNSvPMvQviVxEsjwBjpYhe53cI4bxIVOpqW8GvxUot/Yakdy5xC" +
                “-----结束证书-----”

                InstallCertChainCEnroll(pkcs7Chain);
            } 抓住（前）{
                document.write("<br>" + ex);
                document.write("<br>" + ex.message);
            }            
> </脚本>
> </正文>
> </html>

` `
```

但问题是第一个代码的使用会导致此错误：消息：CertEnroll::CX509EnrollmentWebClassFactory::CreateObject: The operation was cancelled by the user。0x800704c7 (WIN32: 1223) 请看： [microsoft msdn blog](http://blogs.msdn.com/b/alejacma/archive/2009/01/28/how-to-create-a-certificate-request-with-certenroll-javascript.aspx?PageIndex=2#comments)

当我使用第二个代码时，在中间证书颁发机构区域安装我的 cer 文件！！！！！！！！！发生的事情是 pkcs7Chain 变量中的这个证书是根证书，并且 IstallResponse 方法应该将这个家伙安装在受信任的根证书颁发机构中，但它是否安装在中间证书颁发机构区域。！？我可以通过网页中的 javascript 启动 cmd 并将 ca 从中间更改（替换）为受信任的根吗？（我可以在 ie 中启动 cmd）

# c# - 运行最小值列表

> ID：13543408
> 
> 赞同：1
> 
> 时间：2012-11-24T17:02:55.333
> 
> 标签：c#, linq

我希望能够迭代项目的枚举，并在每个元素处返回迄今为止迭代的最小值。

我的代码如下所示：

```
var items = new List<int>{1, 2, -1, 3, -2, 1, 1, 2, -1, -3};

var min = items.First();

var drawdown = items.Select(i =>
{
    if(i < min)
    {
        min = i;
        return i;
    }
    else
    {
        return min;
    }
}); 
```

所以对于价值观`1, 2, -1, 3, -2, 1, 1, 2, -1, -3`

结果列表如下所示：

```
1
1
-1
-1
-2
-2
-2
-2
-2
-3 
```

但这不是很优雅。有没有更容易阅读（linq？）的方式来做到这一点？我查看了 Aggregate ，但它似乎是错误的工具。最终，项目列表将非常长，有数千个。所以良好的性能将是一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:12:38.077

您可以使用迭代器块编写方法：

```
private IEnumerable<int> RunningMinimum(IEnumerable<int> ints)
{
    int minimum = int.MaxValue;
    foreach (int x in ints)
    {
        if (x < minimum) { minimum = x; } 
        yield return minimum;
    }
} 
```

调用如下：

```
int[] drawdown = RunningMinimum(items).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:09:50.633

你可以做

```
var drawdown = items.Select(i =>
{
    min = Math.Min(min, i);
    return min;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:38:25.863

```
class Program
{
    static void Main(string[] args)
    {
        var items = new[] { 1, 2, -1, 3, -2, 1, 1, 2, -1, -3 };

        int min = items.First();

        Action<int> minimumSoFar = (int x) => { Console.WriteLine("{0}", Math.Min(min, x)); min = Math.Min(min, x); };

        foreach (var integer in items)
        {
            minimumSoFar.Invoke(integer);
        }
    }

} 
```

# git - 是否可以在我自己的 ~/.gitconfig 中忽略 git 文件模式更改

> ID：13543409
> 
> 赞同：1
> 
> 时间：2012-11-24T17:02:59.307
> 
> 标签：git, git-config

来自旧线程：[如何让 Git 忽略文件模式 (chmod) 更改？](https://stackoverflow.com/questions/1580596/how-do-i-make-git-ignore-mode-changes-chmod)

在我看来，我需要在每个存储库上做，对吧？是否可以在我自己的 ~/.gitconfig 中设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:33:32.403

这似乎是一个错误，因为运行`git config --global core.fileMode false`不起作用，但`git config core.fileMode false`或`git config --global core.filemode false`两者都起作用。

所以选择其中之一。

我`git --version`的是`git version 1.7.10.4`

# android-listfragment - 一个活动中的两个 ListFragment

> ID：13543413
> 
> 赞同：1
> 
> 时间：2012-11-24T17:03:11.947
> 
> 标签：android-listfragment

由于每个 ListView 都需要有 android:id="android:id/list"... 我怎样才能在两个不同的片段上创建两个列表视图？.. OnItemSelectListener 似乎在监听另一个片段的事件...请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-22T01:29:07.957

我有完全相同的情况......到目前为止，我的猜测是这是不可能的，因为应用程序只考虑创建的第一个 ListView （因为 android:id="android:id/list" 在应用程序范围内必须是唯一的) 文档没有说明如何拥有自定义 ID，因此我的猜测是在这种情况下，无法使用 ListFragment。

# ruby-on-rails - Rails Mailboxer/messaging -- 只返回非空数组

> ID：13543417
> 
> 赞同：0
> 
> 时间：2012-11-24T17:03:26.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, loops, private-messaging

我使用mailboxer gem 来构建一个私人消息系统。

我想遍历我的用户列表，并在每个用户名旁边，提供一个链接以打开一个预先存在的对话（如果存在），或者如果不存在对话则创建一个新对话。（因此用户只能与另一个用户进行 1 次对话，而不是像系统一样的电子邮件）。

```
<% @users.each do |u| %>
  <%= link_to u.name, u %>
  <% @mailbox.conversations.each do |c| %>
    <% if c.receipts.where(:receiver_id => user).present? %>
     true
    <% else %>
     false
    <% end %>
  <% end %>
<% end %> 
```

所以“真”将是重新打开对话的链接，“假”将是新对话的按钮。

但如果一个用户有 4 个对话和 1 个与给定用户的对话，它将返回 true false false false。所以 1 继续按钮和 3 创建新按钮。所以本质上，我需要整个事情返回真或假

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:44:10.313

如果有人感兴趣，这是一个更优雅的解决方案。只是在控制器中。那么所有的链接都是一样的，如果存在就会打开消息。Conversation.participant(a).participant(b) 过滤是关键

```
def new
  @recipient = User.find(params[:recipient])
  @ongoing_conversation = Conversation.participant(current_user).participant(@recipient)

  respond_to do |format|
    format.html { redirect_to root_path }
    if @ongoing_conversation.present?
      format.js { redirect_to mailbox.conversations.find(@ongoing_conversation) }
    else
      format.js
    end
  end
end 
```

# php - 如何对二维数组求和

> ID：13543423
> 
> 赞同：2
> 
> 时间：2012-11-24T17:03:40.730
> 
> 标签：php, foreach

晚上好

我在这里有个问题。我有两个数组：$duration_c[$k][$s]。一切正常

```
$duration_c[0][0]="19:30:00";
$duration_c[0][1]="00:10:00";

$duration_c[1][0]="00:30:00";
$duration_c[1][1]="00:20:00"; 
```

比总和

```
$times=$duration_c[$k][$s];
function sum_the_time($times) {

  $seconds = 0;
  foreach ($times as $time)
  {
    list($hour,$minute,$second) = explode(':', $time);
    $seconds += $hour*3600;
    $seconds += $minute*60;
    $seconds += $second;
 }
  $hours = floor($seconds/3600);
  $seconds -= $hours*3600;
  $minutes  = floor($seconds/60);
  $seconds -= $minutes*60;
  // return "{$hours}:{$minutes}:{$seconds}";
  return sprintf('%02d:%02d:%02d', $hours, $minutes, $seconds);
} 
echo sum_the_time($times); 
```

$duration_c[0][0]+$duration_c[0][1] 和 $duration_c[1][0]+$duration_c[1][1] 如何求和，如何打印？为 foreach() 提供了错误**无效参数**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:10:12.767

您只向 sum_the_time 函数发送一个值，因为`$times=$duration_c[$k][$s];` $times 只有一个值，您可以打印并通过这样编写检查函数的值

```
$times=$duration_c[$k][$s];
echo $times; 
```

采用

```
$times=$duration_c[$k]; 
```

这样您就可以将数组发送到您的函数并且 foreach 不会给您错误

```
$times=$duration_c[$k]; // contains array of times
function sum_the_time($times) {

  $seconds = 0;
  foreach ($times as $time)
  {
    list($hour,$minute,$second) = explode(':', $time);
    $seconds += $hour*3600;
    $seconds += $minute*60;
    $seconds += $second;
 }
  $hours = floor($seconds/3600);
  $seconds -= $hours*3600;
  $minutes  = floor($seconds/60);
  $seconds -= $minutes*60;
  // return "{$hours}:{$minutes}:{$seconds}";
  return sprintf('%02d:%02d:%02d', $hours, $minutes, $seconds);
} 
echo sum_the_time($times); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:13:31.790

这在 PHP 代码中做的更少，并尽可能在 PHP 运行时中保持执行流程，用 C 编写：

```
<?php
$duration_c[0][0]="19:30:00";
$duration_c[0][1]="00:10:00";

$duration_c[1][0]="00:30:00";
$duration_c[1][1]="00:20:00";

$sum = 0;
foreach($duration_c as $durations) {
    $today = strtotime('today');
    $sum += array_sum(array_map(function($str) use ($today) {
        return strtotime($str)-$today;
    }, $durations));
}
echo $sum; // 73800 seconds, that's 20.5 hours 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:09:22.000

`$times=$duration_c[$k][$s];`应该是`$times=$duration_c[$k];`，否则您将单个时间传递给函数，而不是时间数组。

# c++ - 模板参数字符串与 int

> ID：13543425
> 
> 赞同：3
> 
> 时间：2012-11-24T17:03:42.273
> 
> 标签：c++, templates

> **可能重复：**
> [字符串作为模板参数？](https://stackoverflow.com/questions/1826464/strings-as-template-arguments)

为什么第一个声明可以，而第二个声明不行？为什么`std::string`不适合？

```
template <typename T, T x> struct foo { };

using namespace std;

int main()
{
    foo<int, 0> f_int;              // ok
    foo<string, ""> f_string;      // not ok
} 
```

我得到：

```
error: a non-type template parameter cannot have type 'std::basic_string<char>' 
```

使用铿锵++。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T17:07:17.530

您根本不能拥有 type 的模板参数`std::string`。非类型模板参数的规则由标准定义如下（§14.1/4）：

> 非类型*模板参数*应具有以下类型之一（可选*cv-qualified*）：
> 
> *   整数或枚举类型，
> *   指向对象的指针或指向函数的指针，
> *   对对象的左值引用或对函数的左值引用，
> *   指向成员的指针，
> *   `std::nullptr_t`.

此外（§14.1/7）：

> 不应将非类型*模板参数声明为具有浮点、类或 void 类型。*

作为`std::string`类类型，您的实例化`foo`是不允许的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T17:07:10.377

因为非类型模板参数（“值”的丑陋名称）在编译时应该是可计算的，而`std::string`不是（它可能需要动态内存分配，因此它的构造函数不是`constexpr`）。

# c - 在 C 中：main() 和 int main() 之间的区别

> ID：13543428
> 
> 赞同：5
> 
> 时间：2012-11-24T17:04:01.947
> 
> 标签：c

> **可能重复：**
> [c 中 main(void) 和 main() 之间的区别](https://stackoverflow.com/questions/3711048/difference-between-mainvoid-and-main-in-c)

我知道这是超级基本的，其他一些线程已经讨论过类似的问题。但是我有一本书（C 绝对初学者指南），其中所有代码都写在函数 main() 中。int 总是被排除在外。这怎么可能跑？使用旧版本的 stdio.h 可以吗？
这是示例代码：

```
#include <stdio.h>

main()  // not int main()
{
printf("This is it\n");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T17:15:15.493

我认为 c89 标准将允许***main()***但 c99 及更高版本不允许。你必须使用***int main()***否则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:10:13.517

`main()`有效但令人困惑，在 C 中 main 函数总是返回一个 int 来指定退出状态，所以正确的语法是`int main()`，但如果你不费心设置退出状态就`main()`足够了，但是好的 C 书籍总是有`int main()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T17:35:55.397

这类问题高度依赖标准版本，因此一般答案没有多大意义。

来自 C89 草案（如果官方 C89 标准不同，请纠正我，它不是免费提供的）：

> 程序启动时调用的函数名为 main。实现没有声明这个函数的原型。它可以不带参数定义：
> 
> `int main(void) { /*...*/ }`
> 
> 或者带有两个参数（这里称为 argc 和 argv，尽管可以使用任何名称，因为它们是声明它们的函数的局部变量）：
> 
> `int main(int argc, char *argv[]) { /*...*/ }`

C99 和 C11 标准的说法相同，但它们在 and 处添加了一些内容：

> [...]
> 
> 或等效的；[9] 或以其他一些实现定义的方式。
> 
> [9] 因此，int 可以替换为定义为 int 的 typedef 名称，或者 argv 的类型可以写为 char ** argv，依此类推。

一般来说，标准中未定义的事物会导致未定义的行为，因此该代码在 C89/C90 中是 UB，它在 C99 和 C11 中*可能*有效，但这是实现定义的。

PS：如您所见，您还应该`void`在参数列表中添加，没有它的行为定义如上。

# java - JDBC - 在准备好的语句中使用 sysdate 会产生错误

> ID：13543431
> 
> 赞同：0
> 
> 时间：2012-11-24T17:04:08.080
> 
> 标签：java, ms-access, jdbc

执行准备好的语句时出现以下错误。我对我的数据库使用 ms-access

```
java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Too few parameters. Expected 10.
at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956)
at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113)
at sun.jdbc.odbc.JdbcOdbc.SQLExecute(JdbcOdbc.java:3148)
..... 
```

这是我准备好的声明

```
addUserSt = con.prepareStatement("insert into Accounts(Username, First_name, last_name, gender, birthday, email, civil_status, password, role, date_join) values(?,?,?,?,CDATE(?),?,?,?,?, sysdate)"); 
```

这就是我执行准备好的语句的方式......这里的变量都是字符串

```
 dc.addUserSt.setString(1, uname);
                dc.addUserSt.setString(2, fname);
                dc.addUserSt.setString(3, lname);
                dc.addUserSt.setString(4, gender);
                dc.addUserSt.setString(5, bday);
                dc.addUserSt.setString(6, email);
                dc.addUserSt.setString(7, civil);
                dc.addUserSt.setString(8, pass);
                dc.addUserSt.setString(9, role); 
```

我不明白为什么我得到参数太少的错误，我认为我 setString 很好地准备了语句。当我删除 sysdate 并删除列中的 date_join 时，程序运行完美。但我需要获取当前日期以存储在数据库中。任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:16:48.207

sysdate 不是有效的函数。请改用 Date()。

并且在使用函数时不要忘记括号。

# jdbc - 谷歌云 SQL + RETURN_GENERATED_KEYS

> ID：13543433
> 
> 赞同：1
> 
> 时间：2012-11-24T17:04:35.110
> 
> 标签：jdbc, google-apps-script, google-cloud-sql

我的 Google Cloud SQL 数据库中有一个带有自动递增列的表。

如何`INSERT`通过 google-apps-script/JDBC 执行查询并取回新增加的列的值？

例如，我的列名为`ticket_id`. 我想在结果集中返回`INSERT`新`ticket_id`值。

换句话说，如果我有以下结构，我需要修改什么或如何修改，以便我可以做类似的事情`rs = stmt.getGeneratedKeys();`

```
var conn = Jdbc.getCloudSqlConnection("jdbc:google:rdbms:.......  
var stmt = conn.createStatement();

//build my INSERT sql statement  
var sql = "insert into ......

var rs = stmt.executeUpdate(sql); 
```

我看到有一个 JDBC 语句类，其中有一个名为的成员，`RETURN_GENERATED_KEYS`但到目前为止我还不够聪明，无法弄清楚如何正确操作它并获得我需要的东西。是`RETURN_GENERATED_KEYS`常数，是属性，还是我该如何利用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T19:24:42.840

Apps Script JDBC 服务的文档似乎有点缺乏。我为此创建了一个内部任务项。值得庆幸的是，Apps Script JDBC API 非常接近 Java JDBC API。`stmt.getGeneratedKeys()`关键是使用调用来取回结果集。

我使用 MySQL 文档中的动物示例构建了一个示例表，下面的这个示例很好地处理了这个示例，并记录了下一个递增的 ID。

```
function foo() {
  var conn = Jdbc.getCloudSqlConnection("jdbc:google:rdbms://<instance>/<db>");
  var stmt = conn.createStatement();
  var sql = "INSERT INTO animals (name) VALUES ('dog')";
  var count = stmt.executeUpdate(sql,1)//pass in any int for auto inc IDs back
  var rs = stmt.getGeneratedKeys();
  //if you are only expecting one row back, no need for while loop
  // just do rs.next();
  while(rs.next()) { 
    Logger.log(rs.getString(1));
  }
  rs.close();
  stmt.close();
  conn.close();
} 
```

# java - 执行后如何取消 AsyncTask？

> ID：13543434
> 
> 赞同：0
> 
> 时间：2012-11-24T17:04:35.257
> 
> 标签：java, android, android-asynctask

我使用带有进度对话框的 AsyncTask 从服务器下载数据库。我想为用户提供取消下载任务的选项。

我的目的是在用户单击`Cancel button`进度对话框时关闭进度对话框并取消 AsyncTask。

我已经应用了许多代码示例，但它们仅有助于关闭进度对话框并且无法停止或取消下载任务。

***关于我下面的代码行，*****你能帮忙吗？非常感谢。**

**编辑版本**

```
public class Download_gram extends Activity {

// File url to download
private static String url = "https://dl.dropbox.com/u/15034088/Anhroid_Dict/grammar.nvk.zip";
private static DownloadFile newTask; 

// Progress Dialog
private ProgressDialog progressDialog;
// Progress dialog type (0 - for Horizontal progress bar) 
public static final int progress_bar = 0; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.download_gram);
    newTask = new DownloadFile();

    startDownload_gram = (Button) findViewById(R.id.btnProgressBar_gram);

    //start download event and show progress bar
    startDownload_gram.setOnClickListener(new View.OnClickListener() {  
        @Override
        public void onClick(View v) {
        //Checi if file exists 
             File fgram = new File(Environment.getExternalStorageDirectory()+"/my_Folder/db/my_file/my_file.nvk");
             if(fgram.exists())
             { 
                 Toast.makeText(getApplicationContext(), "File installed.", Toast.LENGTH_LONG).show();
             }
             else
             {

                //checking if the user has an internet connection
                ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
                NetworkInfo info = cm.getActiveNetworkInfo();
                if (info != null) {
                    if (!info.isConnected()) {
                        Toast.makeText(getApplicationContext(), "No Internet connection!", Toast.LENGTH_SHORT).show();
                    }
                // execute async task
                    else 
                        //new DownloadFile().execute(url);                          
                    newTask.execute(url);
                }
                else {
                    Toast.makeText(getApplicationContext(), "No Internet connection!", Toast.LENGTH_SHORT).show();
                }                   
             }           

        }});        
    }   

//show progress dialog
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case progress_bar:
        progressDialog = new ProgressDialog(this);
        progressDialog.setMessage("Downloading… Please wait.");
        progressDialog.setIndeterminate(false);
        progressDialog.setMax(100);
        progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressDialog.setCancelable(false);
        progressDialog.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dismissDialog(progress_bar);
                newTask.cancel(true);
            }
        });
        progressDialog.show();
        return progressDialog;
    default:
        return null;
    }
}

//backgroound downloading
    class DownloadFile extends AsyncTask<String, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            showDialog(progress_bar);
        }

        @Override
        protected String doInBackground(String... args) {
            while (url != null) {
            int count;              
            try {
                URL url = new URL(args[0]);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int fileLength = conection.getContentLength();
                InputStream is = new BufferedInputStream(url.openStream(), 8192);
                OutputStream os = new FileOutputStream(Environment.getExternalStorageDirectory().getPath() + "/_nvk_gram.zip");

                byte data[] = new byte[1024];
                long total = 0;
                while ((count = is.read(data)) != -1) {
                    total += count;
                    publishProgress(""+(int)((total*100)/fileLength));
                    // writing data to file
                    os.write(data, 0, count);
                }
                // flush output
                os.flush();             

                os.close();
                is.close();
            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }
            //Unzip the downloaded zip file 
            {
                String destinationDirectory = Environment.getExternalStorageDirectory().getPath() + "/my_Folder/db/my_file/";
                int BUFFER = 2048;
                List<String> zipFiles = new ArrayList<String>();
                File sourceZipFile = new File(Environment.getExternalStorageDirectory().getPath() + "/_nvk_gram.zip");
                File unzipDestinationDirectory = new File(destinationDirectory);
                unzipDestinationDirectory.mkdir();

                ZipFile zipFile = null;
                // Open Zip file for reading
                try {
                    zipFile = new ZipFile(sourceZipFile, ZipFile.OPEN_READ);
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

                // Create an enumeration of the entries in the zip file
                Enumeration<? extends ZipEntry> zipFileEntries = zipFile.entries();

                // Process each entry
                while (zipFileEntries.hasMoreElements()) {
                    // grab a zip file entry
                    ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();

                    String currentEntry = entry.getName();

                    File destFile = new File(unzipDestinationDirectory, currentEntry);
                          //destFile = new File(unzipDestinationDirectory, destFile.getName());

                    if (currentEntry.endsWith(".zip")) {
                        zipFiles.add(destFile.getAbsolutePath());
                    }

                    // grab file's parent directory structure
                    File destinationParent = destFile.getParentFile();

                    // create the parent directory structure if needed
                    destinationParent.mkdirs();

                    try {
                        // extract file if not a directory
                        if (!entry.isDirectory()) {
                            BufferedInputStream is =
                                    new BufferedInputStream(zipFile.getInputStream(entry));
                            int currentByte;
                            // establish buffer for writing file
                            byte data[] = new byte[BUFFER];

                            // write the current file to disk
                            FileOutputStream fos = new FileOutputStream(destFile);
                            BufferedOutputStream dest =
                                    new BufferedOutputStream(fos, BUFFER);

                            // read and write until last byte is encountered
                            while ((currentByte = is.read(data, 0, BUFFER)) != -1) {
                                dest.write(data, 0, currentByte);
                            }
                            dest.flush();
                            dest.close();
                            is.close();
                        }
                    } catch (IOException ioe) {
                        ioe.printStackTrace();
                    }
                }
                try {
                    zipFile.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                for (Iterator<String> iter = zipFiles.iterator(); iter.hasNext();) {
                    String zipName = (String)iter.next();
                    doUnzip(
                        zipName,
                        destinationDirectory +
                            File.separatorChar +
                            zipName.substring(0,zipName.lastIndexOf(".zip"))
                    );
                    if(isCancelled())return (null);
                }
            }
            }

            File fav_ifo = new File(Environment.getExternalStorageDirectory()+"/my_Folder/db/my_file/my_file.nvk");
            if(fav_ifo.exists())
            { 
                try {
                    AssetManager am = getAssets();
                    String fileName = "my_file.ifo";
                    File destinationFile = new File(Environment.getExternalStorageDirectory()+"/my_Folder/db/my_file/" + fileName);    
                    InputStream in = am.open("my_file.ifo");
                    FileOutputStream f = new FileOutputStream(destinationFile);  
                    byte[] buffer = new byte[1024];
                    int len1 = 0;
                    while ((len1 = in.read(buffer)) > 0) { 
                        f.write(buffer, 0, len1);
                    }
                    f.close();
                } catch (Exception e) {
                    Log.d("CopyFileFromAssetsToSD", e.getMessage());    
                }   
            }
            else
            {

            }
           //Delete the downloaded zip
            File folder = Environment.getExternalStorageDirectory();
            String fileName = folder.getPath() + "/_nvk_gram.zip";

            File myFile = new File(fileName);
            if(myFile.exists())
                myFile.delete();
                return null; 

                 }          

        private void doUnzip(String zipName, String string) {
            // TODO Auto-generated method stub

        }

        //updating progress bar
        protected void onProgressUpdate(String... progress) {
            //progress percentage
            progressDialog.setProgress(Integer.parseInt(progress[0]));   
       }

        @Override
        protected void onPostExecute(String file_url) { 
            dismissDialog(progress_bar);
            //toast to notify user of download completion
            Toast.makeText(getApplicationContext(), "Database successfully downloaded.", Toast.LENGTH_LONG).show();
             Intent mainIntent = new Intent(Download_gram.this, my_Main_class.class);
                Download_gram.this.startActivity(mainIntent);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:01:52.853

看到你应该跟踪你的 DownloadFile(aSyncTask) 类对象。

在您的文件中创建一个新变量

```
public class Download_gram extends Activity {
    // File url to download
    private static String url = "http://www.abc.123.zip";
    private static DownloadFile newTask; // ADDED BY ME
// ... ... 
```

您应该在调用时保存对象引用

```
new DownloadFile().execute("Url String"); //you must be doing this

//instead you should do

newTask = new DownloadFile();
newTask.execute("Url String");  // YOUR OBJECT IS IN newTask
...

// keep track of this newTask variable

// when ever you want to cancel just call
newTask.cancel(true); // ADDED BY ME
dialog.dismiss();//In fact, I want to apply the code to stop both Progress Dialog and AsynTask here. 
```

将newTask设置为取消后，您应该及时在doInBackground中检查您的任务是否被取消？如果是，则退出 doInBackground

```
// YOU CAN USE THIS IN WHILE LOOP OF doInBakcground
if(isCancelled())return (null);
//This will exit doInBackground function and hence cancel task.
// you can perform other operations too in this "if" statement as per your need. 
```

供这些功能参考

[http://developer.android.com/reference/android/os/AsyncTask.html#cancel(boolean](http://developer.android.com/reference/android/os/AsyncTask.html#cancel(boolean) )

＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃ 新版本 ＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃。

你没有检查任务是否被取消。如果 iscancelled 为 true return (null)，您必须检查 asynctask 中是否发生下载；停止异步任务并停止下载。您应该替换以下代码：

```
 while ((count = is.read(data)) != -1) { // inside doInBackground
                total += count;
                publishProgress(""+(int)((total*100)/fileLength));
                // writing data to file
                os.write(data, 0, count);
                if(isCancelled())return (null); // ADDED BY ME
            } 
```

上面添加的行是必须的，这将检查任务是否被取消，这个 doInBackground 函数应该结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:09:06.230

你可以这样做，

```
 progressDialog.setOnCancelListener(new DialogInterface.OnCancelListener(){
      public void onCancel(DialogInterface dialog) {
          yourAysncTask.cancel(true);
      }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:12:59.807

你应该

```
yourAsyncTask.cancel(true); 
```

并且，在您的类 DownloadFile 中，您应该检查*isCanceled()*并在 true 时返回。

# c++ - C++ 自定义单例

> ID：13543445
> 
> 赞同：2
> 
> 时间：2012-11-24T17:05:31.607
> 
> 标签：c++, templates, singleton

我实现了一个模板单例类以及静态成员定义：

```
template <typename T> class SingletonT
{
public:
    static T *GetInstance()
    {
        if (!s_instance)
        {
            s_instance = new T;
        }
        return s_instance;
    }
private:
    static T *s_instance;
};
template <typename T> T *SingletonT<T>::s_instance = 0; 
```

它编译得很好并且工作正常。现在，我正在尝试创建一个将使用自定义函数而不是 operator 的单例`new`：

```
template <typename T, T *(*f)()> class PolymorphSingletonT
{
public:
    static T *GetInstance()
    {
        if (!s_instance)
        {
            s_instance = f();
        }
        return s_instance;
    }
private:
    static T *s_instance;
};
template <typename T, T *(*f)()> T *PolymorphSingletonT<T, T *(*f)()>::s_instance = 0; 
```

我在最后一行说编译错误`error C2146: syntax error : missing ')' before identifier 'f'`

我使用 MSVC2005 编译器。

**更新** 现在我结束了仿函数方法：

```
template <typename T, typename F> class PolymorphSingletonT
{
public:
    static T *GetInstance()
    {
        if (!s_instance)
        {
            s_instance = F::Create();
        }
        return s_instance;
    }
private:
    static T *s_instance;
};
template <typename T, typename F> T *PolymorphSingletonT<T, F>::s_instance = 0; 
```

但是，它迫使我用仿函数包装我的创建函数。它只添加了几行代码并且运行良好，但无论如何我仍然有兴趣在没有仿函数的情况下获得它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:10:42.563

最后一行应该是：

```
template <typename T, T *(*f)()> T *PolymorphSingletonT<T,f>::s_instance = 0; 
```

不要重复类型签名，使用您指定的名称。

# c++ - 简单的 Boost 文件系统访问冲突

> ID：13543447
> 
> 赞同：0
> 
> 时间：2012-11-24T17:05:41.370
> 
> 标签：c++, windows, visual-studio, architecture, linker

我正在尝试使用列出当前目录中的项目，`boost::filesystem`但我得到：

```
Unhandled exception at 0x6B59DF8D (msvcr110.dll) in BoostTest.exe: 0xC0000005: Access violation reading location 0x9BE3B7A1. 
```

这是我的代码：

```
#include <iostream>
#include <boost/filesystem.hpp>

using namespace boost::filesystem;

int main() {
    std::cout << "Hello World!\n";
    auto end_it = directory_iterator();
    for(auto it = directory_iterator(current_path()); it != end_it; it++) {
        std::cout << it->path() << std::endl;
    }
    std::cin.get();
    return 0;
} 
```

我刚刚从 mingw 切换到 vs2012，我认为这可能是一个链接错误或类似的东西。我正在链接这些 32 位库：

*   boost_filesystem-vc110-mt-1_52.lib

这些文件位于可执行文件的目录中：

*   boost_filesystem-vc110-mt-1_52.dll
*   boost_system-vc110-mt-1_52.dll

从本网站下载：http: [//boost.teeks99.com/](http://boost.teeks99.com/)

并且平台设置为“Win32”。

这是来自 Visual Studio 2012 窗口的日志：

```
'BoostTest.exe' (Win32): Loaded 'C:\Users\Ell\Programming\C++\BoostTest\Debug\BoostTest.exe'. Symbols loaded.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\ntdll.dll'. Cannot find or open the PDB file.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\kernel32.dll'. Cannot find or open the PDB file.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\KernelBase.dll'. Cannot find or open the PDB file.
'BoostTest.exe' (Win32): Loaded 'C:\Users\Ell\Programming\C++\BoostTest\Debug\boost_filesystem-vc110-mt-1_52.dll'. Module was built without symbols.
'BoostTest.exe' (Win32): Loaded 'C:\Users\Ell\Programming\C++\BoostTest\Debug\boost_system-vc110-mt-1_52.dll'. Module was built without symbols.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcp110.dll'. Symbols loaded.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcr110.dll'. Symbols loaded.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\advapi32.dll'. Cannot find or open the PDB file.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcrt.dll'. Cannot find or open the PDB file.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\sechost.dll'. Cannot find or open the PDB file.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\rpcrt4.dll'. Cannot find or open the PDB file.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\sspicli.dll'. Cannot find or open the PDB file.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\cryptbase.dll'. Cannot find or open the PDB file.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcp110d.dll'. Symbols loaded.
'BoostTest.exe' (Win32): Loaded 'C:\Windows\SysWOW64\msvcr110d.dll'. Symbols loaded.
First-chance exception at 0x6B59DF8D (msvcr110.dll) in BoostTest.exe: 0xC0000005: Access violation reading location 0x9BF7B7A1.
Unhandled exception at 0x6B59DF8D (msvcr110.dll) in BoostTest.exe: 0xC0000005: Access violation reading location 0x9BF7B7A1.
The program '[5292] BoostTest.exe' has exited with code 0 (0x0). 
```

我的平台是带有visual studio 2012 64位编译器的windows 7 64位。

我只在 linux 和 mingw 上开发过，所以很可能是我链接错误或类似的东西 - 可能是架构问题（尽管我的印象是 32 位应用程序使用 32 位库）。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:09:19.007

这不是解决您发布的问题的答案，但至少会帮助（我希望）通过确认我构建了您发布的示例并且它适用于 32 位库：

```
Hello World! 

"C:\Users\john\Documents\Visual Studio 2012\Projects\TestOperator\TestOperator\Debug" 
"C:\Users\john\Documents\Visual Studio 2012\Projects\TestOperator\TestOperator\ReadMe.txt"
"C:\Users\john\Documents\Visual Studio 2012\Projects\TestOperator\TestOperator\stdafx.cpp" 
"C:\Users\john\Documents\Visual Studio 2012\Projects\TestOperator\TestOperator\stdafx.h" 
"C:\Users\john\Documents\Visual Studio 2012\Projects\TestOperator\TestOperator\targetver.h"
 "C:\Users\john\Documents\Visual Studio 2012\Projects\TestOperator\TestOperator\TestOperator.cpp" 
"C:\Users\john\Documents\Visual Studio 2012\Projects\TestOperator\TestOperator\TestOperator.vcxproj"
 "C:\Users\john\Documents\Visual Studio 2012\Projects\TestOperator\TestOperator\TestOperator.vcxproj.filters" 
```

我从您上面引用的站点下载了库（32/64），并且根据[This](https://stackoverflow.com/questions/1066071/boost-linker-error-unresolved-external-symbol-class-boostsystemerror-categ)遇到了 64 位版本的链接错误。（我有 64 位操作系统、编译器等。）当我与 32 位版本链接时，它一切正常，如上所述。

您收到的有关 PDB 文件的警告只是说调试信息在这些库/dll 中不可用的消息 - 所以基本上没有，原则上，我认为您没有做错任何事情。

如果 Boost 抛出异常，那么您可以使用以下方法获得更多信息：

```
#include <boost/exception/diagnostic_information.hpp>

...

catch(...)
{
    std::cerr << "Unhandled exception!" << std::endl <<
    boost::current_exception_diagnostic_information();
    return 0;
} 
```

可能有帮助的最后一件事是添加

```
#define BOOST_LIB_DIAGNOSTIC 
```

到主 cpp 文件的开头并查看输出窗口以准确查看正在链接的库 EG：

```
1>  stdafx.cpp
1>  TestOperator.cpp
1>  Linking to lib file: libboost_system-vc110-mt-gd-1_52.lib
1>  Linking to lib file: libboost_filesystem-vc110-mt-gd-1_52.lib
1>  TestOperator.vcxproj -> C:\Users\john\Documents\Visual Studio 2012\Projects\TestOperator\Debug\TestOperator.exe
========== Rebuild All: 1 succeeded, 0 failed, 0 skipped ========== 
```

# android - 使屏幕的视图下降

> ID：13543451
> 
> 赞同：0
> 
> 时间：2012-11-24T17:06:16.737
> 
> 标签：android, android-layout, android-view

我有一个`RelativeLayout`添加和定位`Views`( `Buttons`, `TextViews`) 的位置，方法是更改​​它们的顶部和左侧边距。我可以将它们一半放置在顶部和左侧的布局之外，但是当我尝试将它们移动到底部或右侧的布局之外的一半时，它们会改变形状以留在布局内。

**如何使视图落在屏幕之外而不是自行调整它们的大小？**

给他们一个宽度并不能解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:49:30.977

你不能使用 来做到这一点`RelativeLayout`，它总是需要适合屏幕尺寸。

您可以使用`ScrollView`wich extends a`FrameLayout`并且可以比屏幕更大。

问候。

# java - 如何在 Java 中创建字典？

> ID：13543457
> 
> 赞同：262
> 
> 时间：2012-11-24T17:06:48.443
> 
> 标签：java, dictionary, key-value

我正在尝试实现一本字典（如在实体书中）。我有一个单词列表和它们的含义。

Java 提供什么数据结构/类型来将单词列表及其含义存储为键/值对。

给定一个键，我如何找到并返回该值？

* * *

## 回答 #1

> 赞同：343
> 
> 时间：2012-11-24T17:13:06.250

你会想要一个`Map<String, String>`. 实现该[`Map`](https://docs.oracle.com/javase/8/docs/api/java/util/Map.html)接口的类包括（但不限于）：

*   [`HashMap`](https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html)
*   [`LinkedHashMap`](https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashMap.html)
*   [`Hashtable`](https://docs.oracle.com/javase/8/docs/api/java/util/Hashtable.html)

每个都是针对特定情况设计/优化的（请访问其各自的文档以获取更多信息）。`HashMap`可能是最常见的；首选默认值。

例如（使用`HashMap`）：

```
Map<String, String> map = new HashMap<String, String>();
map.put("dog", "type of animal");
System.out.println(map.get("dog")); 
```

```
动物类型

```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-11-24T17:09:49.600

这将创建文本字典（字符串）：

```
Map<String, String> dictionary = new HashMap<String, String>(); 
```

然后您将其用作：

```
dictionary.put("key", "value");
String value = dictionary.get("key"); 
```

> 工作，但给出一个错误，您需要保持构造函数类与声明类相同。我知道它继承自父类，但不幸的是它在运行时出错。

```
Map<String, String> dictionary = new Map<String, String>(); 
```

这工作正常。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-24T17:09:42.127

使用[Map 接口](http://docs.oracle.com/javase/8/docs/api/java/util/Map.html)和[HashMap 之类的实现](http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-24T17:09:46.700

有一个抽象类字典

[http://docs.oracle.com/javase/6/docs/api/java/util/Dictionary.html](http://docs.oracle.com/javase/6/docs/api/java/util/Dictionary.html)

但是，这需要实施。

Java 为我们提供了一个很好的实现，称为 Hashtable

[http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html)

# jquery - 如何在 Dreamweaver 中获取 jQuery 的自动建议？

> ID：13543466
> 
> 赞同：0
> 
> 时间：2012-11-24T17:07:40.480
> 
> 标签：jquery, dreamweaver, cs3

我正在使用 Dreamweaver CS3。我想要 JavaScript 和 jQuery 的自动建议和自动完成功能，例如 HTML 和 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:18:08.870

Adobe 网站上的扩展库中有一个扩展，但效果不是很好。我这么说是基于我多年前使用 DW CS3 的经验，我怀疑是否已经对 CS3 扩展进行了更新，但可能是错误的。建议使用`Sublime Text`jQuery 插件和 javascript 格式化插件作为 javascript 编辑器。比旧版本的 Dreamweaver 好很多。

# java - MaxTenuringThreshold - 它究竟是如何工作的？

> ID：13543468
> 
> 赞同：41
> 
> 时间：2012-11-24T17:07:53.100
> 
> 标签：java, garbage-collection

我们知道有几个主要的内存域：Young、Tenured（Old gen）和 PermGen。

*   Young域分为Eden和Survivor（有两个）。
*   OldGen 用于幸存的对象。

MaxTenuringThreshold 防止对象过早地最终复制到 OldGen 空间。它非常清晰易懂。

但它是如何工作的？垃圾收集器如何处理这些仍然存活到 MaxTenuringThreshold 的对象以及以什么方式？它们位于哪里？

对象被复制回幸存者空间进行垃圾收集..还是以其他方式发生？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-25T08:01:58.817

Java 堆中的每个对象都有一个用于垃圾收集 (GC) 算法的标头。年轻的空间收集器（负责对象提升）使用此标头中的一些位来跟踪已存活的集合对象的数量（32 位 JVM 使用 4 位，64 位可能更多） .

在年轻空间收集期间，每个对象都被复制。Object 可以复制到生存空间之一（在年轻 GC 之前为空的空间）或旧空间。对于每个被复制的对象，GC 算法会增加它的年龄（幸存的集合数），如果年龄高于当前的**任期阈值**，它将被复制（提升）到旧空间。如果生存空间已满（溢出），对象也可以直接复制到旧空间。

Object 的旅程有以下模式：

*   分配在伊甸园
*   由于年轻的GC，从伊甸园复制到生存空间
*   由于年轻 GC，从生存空间复制到（其他）生存空间（这可能会发生几次）
*   由于年轻 GC（或完整 GC），从生存空间（或可能的伊甸园）提升到旧空间

实际的**tenuring阈值**由JVM动态调整，但MaxTenuringThreshold设置了一个上限。

如果设置 MaxTenuringThreshold=0，所有对象都会立即提升。

我有[几篇](http://blog.ragozin.info/p/garbage-collection.html)关于 java 垃圾收集的文章，你可以在那里找到更多细节。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-25T20:43:54.480

（免责声明：这仅涵盖 HotSpot VM）

正如 Alexey 所说，实际使用的任期阈值是由 JVM 动态确定的。设置它的价值很小。对于大多数应用程序，默认值 15 就足够高了，因为通常会有更多的对象在集合中存活。当许多对象在集合中幸存下来时，幸存者空间直接溢出到旧的。这被称为过早提升和问题的指标。然而，它很少可以通过调整 MaxTenuringThreshold 来解决。

在这些情况下，有时可能会使用 SurvivorRatio 来增加幸存者空间中的空间，从而使终身有效。然而，大多数情况下，扩大年轻代是唯一的好选择（从配置的角度来看）。如果你从编码的角度来看，你应该避免过多的对象分配，让任期按设计工作。

要准确回答您的问题：当一个对象达到其 JVM 确定的使用期限阈值时，它会被复制到旧的。在此之前，它将被复制到空的幸存者空间。已经存活了一段时间但在达到阈值之前被取消引用的对象可以非常有效地从幸存者中清除。

# iphone - iPhone NSData 到 UIImage

> ID：13543475
> 
> 赞同：0
> 
> 时间：2012-11-24T17:08:35.670
> 
> 标签：iphone, ios

我的 NSData 对象包含在照片的字节内。我想将此对象转换为 UIImage。我的问题是他不能给一个名字 all'oogetto UIImage。示例 myphoto.jpg

这是我的代码：

```
NSString * bytestring =(NSString *)[bean image];

//contain byte of my photo
NSData * byte = [bytestring dataUsingEncoding:NSUTF8StringEncoding];

UIImage *image=[[UIImage alloc]initWithData:byte];

UIButton *bt=[[UIButton alloc]initWithFrame:CGRectMake(80,80,100,100)];

[bt setImage:image forState:UIControlStateNormal];
[self.boxView addSubview:bt]; 
```

该按钮不显示我的照片。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:54:23.833

由于它看起来`[bean image]`实际上是图像数据的 base 64 编码，因此您需要使用一种方法将编码数据转换回未编码数据。

对此没有标准方法，但您可以找到并使用很多方法。然后你的代码变成这样：

```
NSString *byteString = [bean image]; // no need for a cast if it's already an NSString
NSData *byte = // call some method to convert base 64 encoded string into an NSData object 
```

看一下：

[将 base64 解码的 NSData 转换为 NSString](https://stackoverflow.com/questions/11832165/convert-base64-decoded-nsdata-to-nsstring)

# javascript - 具有动态表单的 Javascript 数组

> ID：13543476
> 
> 赞同：0
> 
> 时间：2012-11-24T17:08:36.187
> 
> 标签：javascript

这让我发疯了，所以我当然希望 SO 社区可以为我阐明这一点。问题是我正在创建一个订单表单，其中用户有两个选项可供选择（报告或评级），它们动态填充数量下拉列表。为了计算他们的订单总数，我相信我必须将下拉列表转换为数组，但是我不知道如何为动态下拉列表执行此操作。为了澄清数组，应该将货币价值与每个选项相关联。这是一些代码：

用于动态选项的 Javascript：

```
 function dropdownlist(listindex)
      {
       document.form.rnr.options.length = 0;

      switch (listindex)
     {

     case "0" :
          document.form.rnr.options[0]=new Option("1 - $40","1");
          document.form.rnr.options[1]=new Option("10 - $350 ($35 ea)","10");
          document.form.rnr.options[2]=new Option("25 - $700 ($28 ea)","25");
          document.form.rnr.options[3]=new Option("50 - $1200 ($24 ea)","50");
          document.form.rnr.options[4]=new Option("100 - $2000 ($20 ea)","100");
     break;

     case "1" :
          document.form.rnr.options[0]=new Option("Up to 249 - $750 (~$3 ea.)","249");
          document.form.rnr.options[1]=new Option("Up to 499  - $1375 (~$2.75 ea.)","499");
          document.form.rnr.options[2]=new Option("Up to 1000 - $2500 (~$2.50 ea)","1000");
          document.form.rnr.options[3]=new Option("1000+ - $4000","100000");

     break;

        }
     return true;
     } 
```

我在网上找到的关于数组的示例代码是这样的：

```
 var cake_prices = new Array();
     cake_prices["Round6"]=20;
     cake_prices["Round8"]=25;
     cake_prices["Round10"]=35;
     cake_prices["Round12"]=75; 
```

请忽略该示例使用蛋糕的事实，蛋糕订单是开发人员在我正在使用的教程中使用的示例，不幸的是该教程是针对静态数据的。在此先感谢您，如果需要任何说明或需要任何其他代码，请随时告诉我！

添加：

Dropdown 以如下形式调用：

```
 <select class="form" name="type" id="type" style="height:26px;" onchange="javascript:dropdownlist(this.options[this.selectedIndex].value);"> 
     <option value="" selected="selected" disabled="disabled">Select an Option</option>
     <option value="0">Reports</option>
     <option value="1">Ratings</option>

    <script type="text/javascript" language="JavaScript">
    document.write('<select class="form" name="rnr" id="rnr" style="height:26px;"><option value="">Select an option</option></select>')
    </script>
    <noscript>
    <select class="form" name="rnr" id="rnr" style="height:22px; "></select>
    </noscript> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T00:23:37.493

好的，我自己解决了这个问题，这是我为自己面临这个问题的任何人所做的：

```
 <script>
     var rnr_prices= new Array();
         rnr_prices["1"]=40;
         rnr_prices["10"]=350;
         rnr_prices["25"]=700;
         rnr_prices["50"]=1200;
         rnr_prices["100"]=2000;
         rnr_prices["249"]=750;
         rnr_prices["499"]=1350;
         rnr_prices["249"]=750;
         rnr_prices["1000"]=2000;
         rnr_prices["100000"]=4000;

     function getDropPrice()
     {
        var dropPrices=0;
        var theForm = document.forms["form"];
        var selectedtype = theForm.elements["rnr"];

        dropPrices = rnr_prices[selectedtype.value];

        return dropPrices;
     }
   </script> 
```

解决方案在这里找到：[http ://www.javascript-coder.com/javascript-form/javascript-calculator-script.phtml](http://www.javascript-coder.com/javascript-form/javascript-calculator-script.phtml)

# android - 更改屏幕锁定方式

> ID：13543478
> 
> 赞同：-1
> 
> 时间：2012-11-24T17:08:54.683
> 
> 标签：android, lockscreen

有没有办法以编程方式更改手机屏幕锁定方法？例如，将其更改为显示图案、图钉、滑动解锁或根本不显示。

例如，考虑一个允许用户在滑动解锁和模式锁定之间切换的小部件。

Cyanogenmod 在他们的配置文件中有类似的东西，使用[PROFILE_SERVICE](https://github.com/CyanogenMod/android_packages_apps_Settings/blob/jellybean/src/com/android/settings/profiles/ProfileConfig.java#L109)但这似乎不在公共 API 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:27:17.157

不完全是。通过`DevicePolicyManager`，您可以为密码指定一些最低质量特征，并强制用户重置密码以满足这些特征。然而：

*   用户总是可以选择比你需要的更强大的东西
*   这要求用户将您的应用配置为设备管理员
*   这需要额外的权限
*   用户始终参与密码重置过程

# android - WallpaperManager 中流/位图的最大大小

> ID：13543495
> 
> 赞同：2
> 
> 时间：2012-11-24T17:10:18.373
> 
> 标签：android

我正在尝试在 Android 中将资源/流设置为墙纸。我使用 WallpaperManager 类及其方法 setResource/setStream 来执行此操作。在将它们设置为墙纸之前，我通常使用 BitmapFactory.Options 缩放图像。但这次我想尝试不进行任何缩放的完整图像。所以我尝试将分辨率为 5005 x 3274 的图像设置为墙纸，不进行任何缩放。令我惊讶的是，avd 的壁纸更改为默认的库存壁纸。没有异常，也没有错误日志。下面是我使用的代码。

那么可以设置的壁纸尺寸有什么限制吗？我在 WallpaperManager 文档中找不到有关最大图像大小的任何信息。任何帮助，将不胜感激。

```
public void onBtnClick(View view) {
    Thread t = new Thread(new Runnable() {
        public void run(){
            try{
               mgr.setResource(R.drawable.wallpaper);
               mHandler.post(new Runnable() {
                   public void run(){
                       Toast.makeText(MainActivity.this, R.string.toast_success, Toast.LENGTH_SHORT).show();
                   }
               });
            } catch(Exception ioe) { 
                  Log.w("WallpaperManager", ioe.getMessage());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T12:03:12.833

我知道为时已晚...无论如何，它应该在 4096 x 4096 以内（在 API 17，SDK 4.2 下测试），否则家庭应用程序将崩溃并设置默认壁纸。

# c# - 从一系列 CheckBox 控件构建数组

> ID：13543499
> 
> 赞同：0
> 
> 时间：2012-11-24T17:10:41.070
> 
> 标签：c#, arrays, winforms, checkbox

我有一个关于数组的小问题。

这是代码：

```
char[] select = new char[] { '+', '-', '/', '%' };
var rand = new Random();
char num = select[rand.Next(5)]; 
```

我有五个`CheckBox`控件。如果`checkboxadd`选中了名为我的控件，我希望数组的值为`{ + }`. 如果我的控件命名`checkboxadd`并被`checkboxsubtract`选中，我希望数组的值更改为`{ +, - }`. 等等。

这可能吗？

**更多：**我正在创建一个 Windows 窗体应用程序。该应用程序是一个算术学习系统，它提供一组通过`CheckBox`控件选择的操作。我认为我的方法是错误的......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:24:52.313

您在设计器中添加复选框（因此它们是在 InitializeComponent() 调用中创建的）。之后，您初始化一个助手数组，该数组允许在 CheckedChanged 事件处理程序中进行优雅的编码。因此，您对处于选中状态的每个更改做出反应：

```
public partial class Form1 : Form {
    private CheckBox[] checkboxes;
    private char[] operators;

    public Form1() {
        InitializeComponent();
        checkboxes = new[] { checkBox1, checkBox2, checkBox3, checkBox4, checkBox5 };
        checkBox1.Tag = '+';
        checkBox2.Tag = '-';
        checkBox3.Tag = '*';
        checkBox4.Tag = '/';
        checkBox5.Tag = '%';
        foreach (var cb in checkboxes) {
            cb.CheckedChanged += checkBox_CheckedChanged;
        }
    }

    private void checkBox_CheckedChanged(object sender, EventArgs e) {
        operators = checkboxes.Where(cb => cb.Checked)
            .Select(cb => cb.Tag)
            .Cast<char>()
            .ToArray();
    }
} 
```

# neo4j - 如何从 Web 界面或 shell 列出所有已安装的 neo4j 服务器插件？

> ID：13543501
> 
> 赞同：6
> 
> 时间：2012-11-24T17:10:56.937
> 
> 标签：neo4j

现在我正在使用 neo4jrestclient python 包来列出扩展：

```
from neo4jrestclient.client import GraphDatabase
gdb = GraphDatabase("http://localhost:7474/db/data/")
ext = gdb.extensions 
```

有没有我可以使用的直接 shell 命令来执行此操作？我在网络界面上也看不到任何东西。我用的是1.8。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-11-10T17:59:05.440

由于这是 Google 中的最佳答案，并且接受的答案对于 v3.0+ 已过时，因此这里有一个新答案。

在[此页面上](https://neo4j.com/docs/developer-manual/current/procedures/)，它们显示了许多新程序，其中一个获取数据库中所有程序（包括插件）列表的问题是“dmbs.procedures()”，我发现拥有签名最有用程序以及名称。查询是：

```
CALL dbms.procedures() YIELD name, signature RETURN name, signature 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T22:44:42.010

跑

```
curl -v http://localhost:7474/db/data/ 
```

从命令行。扩展在 Web 界面上不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:36:43.277

您有以下扩展[文档](https://neo4j-rest-client.readthedocs.org/en/latest/extensions.html)`neo4j-rest-client`：

```
>>> gdb.extensions
{u'GetAll': <Neo4j ExtensionModule: [u'get_all_nodes', u'getAllRelationships']>}

>>> gdb.extensions.GetAll
<Neo4j ExtensionModule: [u'get_all_nodes', u'getAllRelationships']>

>>> gdb.extensions.GetAll.getAllRelationships()[:]
[<Neo4j Relationship: http://localhost:7474/db/data/relationship/0>,
 <Neo4j Relationship: http://localhost:7474/db/data/relationship/1>,
 <Neo4j Relationship: http://localhost:7474/db/data/relationship/2>,
 <Neo4j Relationship: http://localhost:7474/db/data/relationship/3>] 
```

# html - 如何在背景图像之上应用图像？

> ID：13543502
> 
> 赞同：3
> 
> 时间：2012-11-24T17:11:00.990
> 
> 标签：html, css

一些页面包含`page-header`元素/类。

.page-header 类如下所示：

```
.page-header {
    background: url(/public/images/page-header.png) no-repeat;
    width: 1000px;
    height: 190px;
    color: white;
    font-size: 17px;
    margin: 0;
} 
```

**例如：**

索引.html

```
<div class="page-header">
   <h1>Homepage</h1>
</div> 
```

about.html

```
<div class="page-header">
    <h1>About</h1>
</div> 
```

我想在`page-header`使用 css 的顶部添加小图像，每个页面都有不同的图像。如何做到这一点，我应该使用`span`css 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:08:21.403

使用 CSS3，您可以将多个背景应用于元素。它们相互叠加，您提供的第一个背景在顶部，最后一个背景在后面列出。只有最后一个背景可以包含背景颜色。

[https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multiple_backgrounds](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multiple_backgrounds)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:15:08.013

是的，您可以添加一个 SPAN 并提供图像，注意：如果您将任何图像作为背景提供给标题，它对 SEO 没有用，我建议将相同的图像保留在 IMG 标记中并在屏幕外获得一些 SEO 帮助也。

前任：

```
.page-header {
    background: url(/public/images/page-header.png) no-repeat;
    width: 1000px;
    height: 190px;
    color: white;
    font-size: 17px;
    margin: 0;
    position:relative;
}
.out-of-screen {
    position:absolute;
    top:-2000em;
}
<div class="page-header">
   <h1>Homepage</h1>
   <img src="/public/images/page-header.png" alt="alt text" class="out-of-screen">
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:19:14.090

如果您正在寻找要覆盖在前一个背景图像上的辅助背景图像。然后试试这个。我自己没有尝试过，但它可能是答案。

```
.page-header:after{
    background-image:url('/public/images/page-header2.png' no repeat;
} 
```

您可能需要将 :after 定位到页面上您想要它的位置，但如果您希望图像位于元素内的某个位置，则可能更容易坚持使用 Sameera 建议的简单图像标记。

```
position:fixed;
left:0;
top:30%;
width:200px;
height:auto 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T17:19:31.523

```
<div class="page-header">
   <h1>Homepage</h1>
   <img src="path/to/image.jpg" alt="" style="position:absolute; left:50px; top: 50px;" />       
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T17:19:33.187

有一个名为 z-index 的 CSS 属性。

值越高，它就越“前”。Back t 越低

负值是可以的。

```
.front{
    z-index: 999;
}
.back{
    z-index: 0;
} 
```

注意：不同的浏览器似乎有不同的行为。

要回答您的问题，请为您的标题提供较低的 z-index 并添加一个具有较高 z-index 的元素（跨度会很好）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T17:20:52.960

通过 CSS3 使用多个背景。

将 padding-top 添加到底部`.page-header`位置，并将第二个背景放在顶部。`page-header.png`

[http://css-tricks.com/stacking-order-of-multiple-backgrounds/](http://css-tricks.com/stacking-order-of-multiple-backgrounds/)

[http://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-15T13:44:17.813

CSS 允许我们通过在它们之间添加一个逗号 (,) 来添加多个背景图像。HTML

```
<div class="bg-image"> 
```

CSS

```
.bg-image{
      outline: 2px solid black;
      padding:20em;
      background-image: 
          url(https://images.unsplash.com/photo-1634148739677-a5bb54df2611?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=774&q=80),

          url(add another ".svg img" or any type of image);
      background-repeat: no-repeat, repeat;
      background-position:right 20% center 0px, top left;
      background-size:auto, 10px;} 
```

# c# - 如何使用 c# windows 窗体应用程序制作计时器以关闭计算机

> ID：13543503
> 
> 赞同：-2
> 
> 时间：2012-11-24T17:11:06.030
> 
> 标签：c#

我无法找到足够的资源来创建我想要的 Windows 窗体应用程序。正如标题所说，我想创建一个应用程序，我可以在其上设置计时器以关闭计算机。任何示例或帮助将不胜感激。问候

编辑：所以我已经设法放置当前日期/时间按钮和单独的关机按钮问题是我不知道如何在程序运行期间设置关机计时器。

这是我到目前为止所说的：

公共部分类 Form1 : Form { public Form1() { InitializeComponent(); }

```
 private void buttonTimerStart_Click(object sender, EventArgs e)
    {
        timer1.Start();

    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        labelDate.Text = DateTime.Now.ToString();
    }

    private void buttonTimerStop_Click(object sender, EventArgs e)
    {
        timer1.Stop();
    }

    private void buttonShutdown_Click(object sender, EventArgs e)
    {
        Process.Start("Shutdown", "-s -t 0");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:15:02.977

我认为这会有所帮助： [如何从 C# 关闭计算机](https://stackoverflow.com/questions/102567/how-to-shutdown-the-computer-from-c-sharp)

```
Process.Start("shutdown","/s /t 0"); 
```

对于计时，请使用 Windows 表单“计时器”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:18:53.643

基本上，一种方法是执行 Windows[关闭可执行文件](http://samanathon.com/windows-tip-shutdown-your-computer-with-the-command-prompt/)，并将 C# 程序中所需的任何计时器参数传递给它。要从 C# 程序中执行任何外部程序，包括这个程序，您必须创建一个进程，为该进程分配一个可执行文件并启动它，如下所示：

```
string path =  @" C:\Windows\System32";
string shut_args =  " ";

process1.StartInfo.FileName =  " shutdown.exe";
process1.Start(); 
```

这是一个非常详细的教程，它准确地显示了您想要做什么：http: [//www.codeproject.com/Articles/22718/Shutdown-Remote-Using-Shutdown-exe](http://www.codeproject.com/Articles/22718/Shutdown-Remote-Using-Shutdown-exe)

# c++ - 使用另一个程序将参数传递给一个程序

> ID：13543505
> 
> 赞同：1
> 
> 时间：2012-11-24T17:11:08.607
> 
> 标签：c++, createprocess

我创建了两个接受命令行参数的可执行文件。现在，我想使用 C++（在 Windows 上执行）将参数传递给可用的可执行文件。最好的方法是什么？

我用过 `CreateProcess()`；它适用于静态输入，但我想通过 CLI 动态输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:28:35.037

我通常使用`system(const char*)`它，它对我有用:)

当您在命令行中键入它时，您会传递一个包含命令的字符串。在您的情况下，这意味着 exe 文件的路径和它所采用的参数，两者之间只有空格。它运行指定的进程，就好像它是从命令行运行的一样。

欲了解更多信息：[http ://www.cplusplus.com/reference/cstdlib/system/](http://www.cplusplus.com/reference/cstdlib/system/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:14:43.870

命令行（带参数）是 CreateProcess() 的参数之一。只需将您想要传递给子可执行文件的任何参数放在那里。

非静态输入有什么问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T18:24:41.113

`CreateProcess`听起来好像您已经了解可以在启动时发送字符串参数。如果您想在运行时继续发送数据，您有几个选择。

1.  使用控制台重定向。由于您已经在使用 Win32 API，因此在启动子进程后写入子进程的 cin 并不太难。请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499%28v=vs.85%29.aspx)。我认为这可能是您所说的“*通过 CLI 动态输入*”的意思

2.  使用某种[IPC](http://en.wikipedia.org/wiki/Inter-process_communication)。有 Win32 方法可以做到这一点，例如[消息队列](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644928%28v=vs.85%29.aspx)，以及更多独立于平台的方法，例如[Protocol Buffers](http://code.google.com/p/protobuf/)、[Thrift](http://thrift.apache.org/)或[Boost.Interprocess](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess.html)。

在 IPC 方面，实际上有不止一种方法可以给猫剥皮，您的目标是进行研究并确保您在早期就流程的通信方式做出正确的设计决策。

如果您决定使用更成熟的 IPC 而不是控制台重定向之类的东西来解决较小的问题，您应该问自己的一些问题是：

*   我可以使用这种类型的 IPC 发送所有类型的数据吗？
*   这种通信是否需要跨越网络边界？

而且，总是出现的两个大问题是：

*   这在未来的可维护性如何？
*   这段代码是否必须在另一个平台上运行？

希望这个回答对您的问题不会过分。

# android - 创建客户 ID 时：“发生意外错误。我们正在调查。”

> ID：13543506
> 
> 赞同：2
> 
> 时间：2012-11-24T17:11:13.193
> 
> 标签：android, google-drive-api

我收到“发生意外错误。我们正在调查。” 创建客户 ID 时

以前没有发生过。

但是最近我按照斯蒂芬怀利的新指南，删除了整个项目并重新开始

前 2 次我删除并创建新的 API 项目，没关系。

但是今天我再试一次，错误出现了。我现在不能继续。

另一个问题，Android 官方样本什么时候发布？它已经承诺了几个月。与 dropbox、box、skydrive 不同，它们都有非常好的示例，可以让人们在几个小时甚至不到半小时内集成到他们的应用程序中，如果你有经验的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:00:57.907

包名称/签名证书指纹 (SHA1) 对必须是唯一的，并且包括已删除的项目。如果您需要创建一个新的 API 项目并且不想更改包名称，您还可以生成一个新的密钥库文件来对您的应用程序进行签名，并使用其签名证书指纹代替之前的签名。

# eclipse - 保存时 Google App Engine servlet 未更新？

> ID：13543509
> 
> 赞同：1
> 
> 时间：2012-11-24T17:11:37.140
> 
> 标签：eclipse, google-app-engine, eclipse-plugin

每当我运行 Google App Engine 时，它​​似乎运行的 servlet 版本比我保存的最后一个版本要旧。

这是怎么回事？我怎样才能解决这个问题？

我正在使用 GAE Eclipse 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:48:58.057

我认为这是一个常见的陷阱。我也遇到过几次。您应该删除`cookies`和`cache`from `Chrome`。

如果这不起作用，那么`terminate and restart`当您修改服务器端代码时，您应该始终在 eclipse 中使用服务器。

# jsf - JSF2/PrimeFaces 中的命名容器

> ID：13543510
> 
> 赞同：12
> 
> 时间：2012-11-24T17:11:40.417
> 
> 标签：jsf, primefaces

PrimeFaces 中可能的命名容器有哪些？当我们想使用 更新表单上的某些 UI 控件时，为什么需要为 Ajax 更新调用附加命名容器 ID `update=":mainForm:MainAccordian:userNameTextbox"`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-24T20:07:40.223

> Prime 面孔中可能的命名容器是什么

在 JSF 中，命名容器派生自[UINamingContainer](http://docs.oracle.com/javaee/7/api/javax/faces/component/NamingContainer.html)。

> 当我们想使用 update=":mainForm:MainAccordian:userNameTextbox" 更新表单上的某些 UI 控件时，为什么需要为 Ajax 更新调用附加命名容器 ID

可以说，如果您在页面中`<h:outputText value="test1" id="userNameTextbox" />`添加另一个`<h:outputText value="test2" id="userNameTextbox" />`，您将收到一个错误，指出您有**一个重复的 ID**。您可以在 JavaDoc 中查找[UIComponent.setId(String)](http://docs.oracle.com/javaee/7/api/javax/faces/component/UIComponent.html#setId%28java.lang.String%29)：

> 设置此 UIComponent 的组件标识符（如果有）。组件标识符必须遵守以下语法限制： 不能是长度为零的字符串。第一个字符必须是字母或下划线 (' *')。后续字符必须是字母、数字、下划线 ('* ') 或破折号 ('-')。

..此外，对您很重要：

> 指定的标识符必须在作为最近的祖先 UIComponent 的后代的所有组件（包括构面）中是**唯一**的，或者在整个组件树的范围内（如果没有这样的祖先是 NamingContainer）**。**

Means that you cannot have two components with the same ID under the same NamingContainer (if you have no NamingContainer at all, the entire tree is counted as NamingContainer). Therefore you need to add a NamingContainer, like a `<h:form id="myNamingContainer" />`

Lets take following example:

```
<h:outputText value="test1" id="userNameTextbox" />
<h:form id="container1">
  <h:outputText value="test2" id="userNameTextbox" />
</h:form>
<h:form id="container2">
  <h:outputText value="test3" id="userNameTextbox" />
</h:form> 
```

.. and you want to do an update to *userNameTextbox*. Which *userNameTextbox* are you refering to because there are 3?

The first one? Then update **userNameTextbox**

The second one? Then update **container1:userNameTextbox**

The third one? Then update **container2:userNameTextbox**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-11T21:41:17.780

After having IntelliJ scan all my JARs for implementations of `javax.faces.component.NamingContainer` here is what I found:

## From PrimeFaces 5.3

*   AccordionPanel
*   Carousel
*   Columns
*   DataGrid
*   DataList
*   DataScroller
*   DataTable
*   Page
*   Ring
*   SubTable
*   Subview
*   TabView
*   TreeTable
*   UIData
*   UITabPanel

## From MyFaces 2.1

*   HtmlDataTable
*   HtmlForm
*   UITree
*   UIForm

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-14T23:40:15.200

## Naming Containers in Prime Faces

As we can see in [JSF Reference](https://javaserverfaces.java.net/docs/2.2/javadocs/javax/faces/component/NamingContainer.html)

> NamingContainer is an interface that must be implemented by any UIComponent that wants to be a naming container. Naming containers affect the behavior of the UIComponent.findComponent(java.lang.String) and UIComponent.getClientId() methods;

So to find Naming Containers in PF you need to check hierarchy of `NamingContainer` interface. In Eclipse you can do this for example by `Ctrl`+`T` shortcut on `NamingContainer`.

In PF 5.3 there are for example: `AccordionPanel`, `Carousel`, `Columns`, `DataGrid`, `DataList`, `DataScroller`, `DataTable`, `Ring`, `SubTable`, `TabView`, `Tree`, `TreeTable`.

## Naming Container influence on component id

1.  Default behavior

Naming Container provide a naming scope for its child components. So it always add prefix to his children id. So id of child component is: `parent_component_id".concat(":").concat("component_id")`. There is one pro tip that I had read in [JavaServer Faces 2.0, The Complete Reference](https://rads.stackoverflow.com/amzn/click/com/0071625097) that even if you not add NamingContainer to your page it is always automatically added by JSF itself :) There also exist special algorith of this creation (Chapter 11: Building Custom UI Component -> Box called "Rules for Creating the Top-Level Component for a Composite Component"). Of course when you don't set id, it will be generate automatically (for example j_idt234). So full component id may look like this: "j_idt123:j_idt234:j_idt345".

2.  Change component name separator (since JSF 2.x)

There is a way to override default component name separator (":"). You can define it in web.xml as context-param with name `javax.faces.SEPARATOR_CHAR`. For example:

```
<context-param>
    <param-name>javax.faces.SEPARATOR_CHAR</param-name>
    <param-value>-</param-value>
</context-param> 
```

3.  UIForm attribute "prependId"

To avoid adding scope to child component there is an attribute (only in UIForm component). But this is not recommended solution. Take a look for example at [uiform-with-prependid-false-breaks-fajax-render](https://stackoverflow.com/questions/7415230/uiform-with-prependid-false-breaks-fajax-render)

## Component id usage (for example in "update", "process")

1.  Whole id

You can use whole id: "componentParent:component". This is not recommended (code will be fragile; any id changes will cause need to change ids in many places).

2.  Relative ids in same level of naming container

Inside one naming container you can use simple component id.

3.  PrimeFaces Search Expression Framework

If you don't know this feature please take a look in PrimeFaces documentation. Prime Faces provide Search Expression Framework with couple of very usefull mechanism.

You can search by keywords.

> Keywords are the easier way to reference components, they resolve to ids so that if an id changes, the reference does not need to change. Core JSF provides a couple of keywords and PrimeFaces provides more along with composite expression support.

Examples: `@this` (current component), `@form` (closest ancestor form), `@namingcontainer` (closest ancestor naming container), `@parent`, `@widgetVar(name)`. You can also mixed those keywords in quite complex paths (Composite Expressions) for example: `@form:@parent`, `@this:@parent:@parent`

The second posibility PF gives you are PrimeFaces Selectors (PFS).

> PFS integrates jQuery Selector API with JSF component referencing model so that referencing can be done using jQuery Selector API instead of core id based JSF model.

So you can for example:

*   update all form elements by `update="@(form)"`
*   update all datatables by `update="@(.ui-datatable)"`
*   update all components that has styleClass named "myStyle" by `update="@(.myStyle)"`

Quite a powerful tool.

# android - 如何在线性布局中创建可扩展列表

> ID：13543513
> 
> 赞同：0
> 
> 时间：2012-11-24T17:12:04.223
> 
> 标签：android, android-linearlayout, expandablelistview, expandable

我在滚动视图中定义了三个主要的线性布局。

单击此布局之一时，我想扩展具有不同选项的列表。怎么做？

我有这样的事情：

目前我有：

主.java：

```
linlayout1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {..../ go to a new inntent}
 } 
```

主要.xml：

```
Layout1
Layout2
Layout3 
```

单击 Layout1 时，我想看到：

```
Layout1
 Option1 
 Option2
 Option3
Layout2
Layout3 
```

有人可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:21:40.823

您可以将本教程用于您的规范。这是一个链接，[点击这里](http://androidtrainningcenter.blogspot.in/2012/07/android-expandable-listview-simple.html)

# c++ - 如何将 D3D9 表面的 D3DPOOL 类型从 D3DPOOL_DEFAULT 转换为 D3DPOOL_SYSTEMMEM？

> ID：13543514
> 
> 赞同：2
> 
> 时间：2012-11-24T17:12:13.593
> 
> 标签：c++, memory, directx, direct3d9

我有一个 D3DPOOL_DEFAULT 类型的表面，我想将其转换为 D3DPOOL_SYSTEMMEM。我知道 UpdateSurface 正好相反。

# ios - 在 iOS 6 中使用 SLRequest 将视频上传到 facebook 的示例（无对话框）

> ID：13543515
> 
> 赞同：0
> 
> 时间：2012-11-24T17:12:27.950
> 
> 标签：ios, facebook, video, ios6

我正在寻找一个使用 iOS 6 和 SLRequest 将视频发布到 facebook 的示例。我已经有了用于上传照片的代码。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-11T12:06:12.360

分享视频到 FB :

*   在 developer.facebook.com 上创建一个应用程序
*   在 appName-info.plist 中提及 AppId
*   在 iOS 平台下您的应用页面的 develper.facebook.com 中提及应用 BundleID

然后在编码：

我们必须请求读取权限然后写入权限。

```
-(void)shareOnFB
{
      __block ACAccount * facebookAccount;
      ACAccountStore *accountStore = [[ACAccountStore alloc] init];
      NSDictionary *emailReadPermisson = [[NSDictionary alloc] initWithObjectsAndKeys:
                                    FB_APP_ID,ACFacebookAppIdKey,
                                    @[@"email"],ACFacebookPermissionsKey,
                                    ACFacebookAudienceFriends,ACFacebookAudienceKey,
                                    nil];

      NSDictionary *publishWritePermisson = [[NSDictionary alloc] initWithObjectsAndKeys:
                                       FB_APP_ID,ACFacebookAppIdKey,
                                       @[@"publish_stream"],ACFacebookPermissionsKey,
                                       ACFacebookAudienceFriends,ACFacebookAudienceKey,
                                       nil];

     ACAccountType *facebookAccountType = [accountStore
                                      accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
      //Request for Read permission

    [accountStore requestAccessToAccountsWithType:facebookAccountType options:emailReadPermisson completion:^(BOOL granted, NSError *error) {

    if (granted)
    {
        //Request for write permission
        [accountStore requestAccessToAccountsWithType:facebookAccountType options:publishWritePermisson completion:^(BOOL granted, NSError *error) {

        if (granted)
        {
             NSArray *accounts = [accountStore
                                     accountsWithAccountType:facebookAccountType];
             facebookAccount = [accounts lastObject];
             NSLog(@"access to facebook account ok %@", facebookAccount.username);
             [self uploadWithFBAccount:facebookAccount];
        } 
        else 
        {
             NSLog(@"access to facebook is not granted");
               // extra handling here if necesary
             dispatch_async(dispatch_get_main_queue(), ^{
                 // Fail gracefully...
                NSLog(@"%@",error.description);
                [self errorMethodFromFB:error];
                });
         }
      }];
    }
    else
    {
       [self errorMethodFromFB:error];
    }
  }];
} 
```

然后处理来自facebook的错误方法

```
-(void)errorMethodFromFB:(NSError *)error
{

    NSLog(@"access to facebook is not granted");
   // extra handling here if necesary

  dispatch_async(dispatch_get_main_queue(), ^{

      // Fail gracefully...
      NSLog(@"%@",error.description);

      if([error code]== ACErrorAccountNotFound)
          [self throwAlertWithTitle:@"Error" message:@"Account not found. Please setup your account in settings app."];
      if ([error code] == ACErrorAccessInfoInvalid)
          [self throwAlertWithTitle:@"Error" message:@"The client's access info dictionary has incorrect or missing values."];
     if ([error code] ==  ACErrorPermissionDenied)
          [self throwAlertWithTitle:@"Error" message:@"The operation didn't complete because the user denied permission."];
     else
          [self throwAlertWithTitle:@"Error" message:@"Account access denied."];
  });
} 
```

然后消息提醒

```
-(void)throwAlertWithTitle:(NSString *)title message:(NSString *)msg
{
     [[[UIAlertView alloc]initWithTitle:title message:msg delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil]show];
} 
```

处理上传方法

```
-(void)uploadWithFBAccount:(ACAccount *)facebookAccount
{
    ACAccountCredential *fbCredential = [facebookAccount credential];
    NSString *accessToken = [fbCredential oauthToken];

    NSURL *videourl = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/me/videos?access_token=%@",accessToken]];

    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString* foofile = [documentsDirectory stringByAppendingPathComponent:@"me.mov"];
    BOOL fileExists = [fileManager fileExistsAtPath:foofile];
   if (fileExists) 
   {
       NSLog(@"file saved");
   }
   NSString *filePath = foofile;
   NSURL *pathURL = [[NSURL alloc]initFileURLWithPath:filePath isDirectory:NO];
   NSData *videoData = [NSData dataWithContentsOfFile:filePath];
   NSDictionary *params = @{
                         @"title": @"Me  silly",
                         @"description": @"Me testing the video upload to Facebook with the new Social Framework."
                         };

   SLRequest *uploadRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                              requestMethod:SLRequestMethodPOST
                                                        URL:videourl
                                                 parameters:params];
  [uploadRequest addMultipartData:videoData
                       withName:@"source"
                           type:@"video/quicktime"
                       filename:[pathURL absoluteString]];

    uploadRequest.account = facebookAccount;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) {
        [uploadRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
            NSDictionary *responseDictionary = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];
            NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

           if(error)
           {
                 NSLog(@"Error %@", error.localizedDescription);
           }
           else
           {
                [[[UIAlertView alloc]initWithTitle:@"Congratulations!" message:@"Your video is suucessfully posted to your FB newsfeed" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil]show];
                NSLog(@"%@", responseString);
           }
       }];
   });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:47:21.473

查看这篇文章：[使用 SLRequest 上传视频](https://stackoverflow.com/questions/12861615/upload-video-to-facebook-using-facebook-new-sdk-on-ios-6-0)

它清楚地指出了如何将它与集成在 iOS 6 中的社交框架 (SLRequest) 一起使用，甚至还指出了如何使用 Facebook 的 SDK。

# java - 检查 ace 是否存在以及点数是否 >21

> ID：13543516
> 
> 赞同：0
> 
> 时间：2012-11-24T17:12:28.700
> 
> 标签：java

在我的二十一点计划中，我有：

```
Card c = dealCard(deck); //deals the card
updatePoints(players[i], c); // calls updatePoints below. 
```

updatePoints 函数如下所示：

```
public static void updatePoints(Player player,  Card c){

        int point = c.getValue();
        if(player.getPoints() + point >21 && (player.ace1 == 11 || player.ace2 == 11 || player.ace3 == 11 || player.ace4 == 11)){
            player.points -= 10;
            player.setPoints(point);
            if (player.ace1 == 11){
                player.ace1 = 1;
            }else if(player.ace2 == 11){
                player.ace2 = 1;
            }else if(player.ace3 == 11){
                player.ace3 = 1;
            }else if (player.ace4 == 11){
                player.ace4 = 1;
            }
        }
        if (point == 1){
            //default value for player.ace1 .. player.ace4 is 0

            if(player.ace1 == 0){
                player.ace1 = 11;
                player.setPoints(11);
            }else if (player.ace2 == 0){
                player.ace2 = 11;
                player.setPoints(11);
            }else if (player.ace3 == 0){
                player.ace3 = 11;
                player.setPoints(11);
            }else if(player.ace4 == 0){
                player.ace4 = 11;
                player.setPoints(11);
            }

        }else{
            player.setPoints(point);
        }
        return;
    } 
```

由于某种原因，当点数超过 21 时，这不会改变 ace 值，也不会调整 ace。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:42:32.867

您的代码似乎太复杂了。无需为每个 ace 设置一个变量，只需*计算*您尚未减少到 a 的 ace 数量`1`：

```
private int fullAceCount; 
```

更新假设`11`为王牌，但也更新王牌计数：

```
if (points == 11) { // if it's an ace
    fullAceCount++; // save it for later deduction
} 
```

然后在更新任何卡后，检查是否需要扣除`10`

```
if (total > 21 && fullAceCount > 0) {
    total =- 10;
    fullAceCount--; // record that you've used up one of your aces
} 
```

你就完成了。

# jquery-ui - JQuery 手风琴在具有动态数据的函数内不起作用

> ID：13543524
> 
> 赞同：1
> 
> 时间：2012-11-24T17:13:18.047
> 
> 标签：jquery-ui, jquery-ui-accordion

在我的 asp.mvc 项目中，我有以下视图文件。我通过 WEB API 调用获取手风琴数据，将其格式化为“div”、“p”标签并能够附加到现有的 div 标签“accapis”。最后，当我尝试使用 ("#idaccapis").accordion(); 它抛出一个错误，“对象不支持这个属性或方法'手风琴'。请帮助我解决我遗漏或做错的事情。

我认为脚本包含没有任何问题，因为如果我放置静态内容，那么 ("#idaccapis").accordion() 工作正常。

```
@{
    ViewBag.Title = ">Help";
        Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>Web API Help</h2> 
    <div class="accapis" id="idaccapis"> 
    </div> 
<script>
    $(document).ready(function () {
        $.getJSON("/api/Help",
                    function (data) {
                        $.each(data, function (key, val) {
                            $('<h3/>', { text: val.ControllerName }
                            ).appendTo('.accapis');
                                    $('<div />', { "class":     
val.ControllerName }).appendTo            ($('.accapis'));
                            $.each(val.Path, function (k, v) {
                                $('<p/>', { text: v }).appendTo($("." + val.ControllerName));
                            });
                        });
                    })
                    .complete(function () {
                        alert($("#idaccapis").html()); //able to see the html generated, they     look fine
                        $("#idaccapis").accordion(); //ERROR
                    });
    });
</script> 
```

# php - PHP OOP 正确的类通信

> ID：13543525
> 
> 赞同：1
> 
> 时间：2012-11-24T17:13:25.833
> 
> 标签：php, oop, class, communication

有没有一种***很好的实践***方式来进行班级之间的交流？

例如，我正在开发一个 CMS。在**主**类中，它实例化了两个新类***ThemeManager***和***ModuleManager***。现在，我需要我的*主题管理器*能够访问*模块管理器*，以便它可以读取加载的模块并在页面中打印它们的内容。

这*行*吗？使这两个类成为**主**类的公共属性。这使我能够进行双向通信（在这种情况下我不一定需要）：

```
class MainClass {
    public $ThemeManager;
    public $ModuleManager;

    ..........

    function instantiate_managers() {
         $this->ThemeManager = new ThemeManager($this);
         $this->ModuleManager = new ModuleManager($this);
    }
} 
```

还是这样更好？将已经实例化的一个传递给另一个，因为单向通信*可以满足*我的目的：

```
class MainClass {
    private $ThemeManager;
    private $ModuleManager;

    ..........

    function instantiate_managers() {
         $this->ModuleManager = new ModuleManager();
         $this->ThemeManager = new ThemeManager($this->ModuleManager);
    }
} 
```

请注意，无论哪种方式，我都必须将这些引用进一步传递给*Module*类和*Theme* -> *Layout*类。

也许在全局范围内声明**ThemeManager**和**ModuleManager**会更好，因为它们只会被实例化一次，并且省去了通过每个**__*构造***传递它们的引用的麻烦？我在某处读到这在 OOP 中是不好的做法，我试图避免它，但在这样的情况下，这似乎是*最*简单的方法。

有没有第 4 种好方法来处理我没有考虑过的沟通？

# 回答

我最终使用[Pimple](http://pimple.sensiolabs.org/)进行**依赖注入**方法，因为它感觉最*自然*，并且在两个答案中都被建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:44:32.860

您要求的是进行[依赖注入](https://en.wikipedia.org/wiki/Dependency_injection)的最佳方法。

有很多方法可以解决它，但在您的具体情况下，我会说：选择选项#2。由于您的主题需要了解模块，而不是相反，这将以最简单的方式解决您的问题。

但是：不要认为这是未来依赖问题的“一般答案”。考虑它的最佳方式是单独处理每个案例。

还有两种方法可以做到这一点：

1.  您可以创建单独的 set 方法，而不是在构造函数中传递东西。（例如：）`setModuleManager`。
2.  您还可以使用依赖注入容器。

当您了解时，第二个可能看起来很有吸引力。它简单而集中；但我仍然会保持警惕。这有点像大锤，实际上可能会导致您创建过于紧密的依赖关系。（松耦合被认为是一件非常好的事情）。

setter 方法或构造函数参数迫使你非常明确，我觉得这是学习这些东西的最好方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-24T17:30:06.880

你所有的方法听起来都很糟糕。我可以详细说明这一点，但老实说，我认为你最好通过阅读一本关于 OOP 的书来学习，然后开始使用像 ZF2 这样的现代 PHP（5.3+）框架，以了解它是如何完成的。

**依赖注入**、高度模块化、MVC，都在里面供你学习。

但是，在您最初设计的限制范围内，我会这样做：

![在此处输入图像描述](../Images/5f17c817cb726a576acb0130874b39a8.png)

一个`Application`对象协调其余组件的位置。请注意`Application::render()`可以返回页面生成的整个 html 的方法。

尽管我重复一遍，但当您说“模块”或“主题”时，我认为您*的意思并不正确。*你真的应该看看现代 PHP 框架（PHP 5.3+），看看软件工程师是如何选择设计这些东西的。

例如，您缺少*路由*的概念。

# objective-c - 将事件处理程序添加到可可按钮

> ID：13543529
> 
> 赞同：1
> 
> 时间：2012-11-24T17:13:39.900
> 
> 标签：objective-c, xcode, button, interface-builder, iboutlet

我有一个用 XCode 4 构建的非常简单的 Mac 应用程序（现在只是一个空白表格）。现在，我通过 Interface Builder 添加了一个按钮，并为我的 AppDelegate 添加了一个方法：

```
-(IBAction) btnScanClicked
{
    NSLog(@"Hello!");
} 
```

当我启动我的应用程序时，我收到以下消息：

> 无法将操作 btnScanClicked: 连接到 AppDelegate 类的目标

这是否意味着我不能向我的 AppDelegate 添加任何事件处理程序？我还能把它们放在哪里，我将如何使用 Interface Builder 进行设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T17:32:32.780

问题是您没有正确声明操作方法。将定义替换为：

```
-(IBAction) btnScanClicked:(id)sender { 
```

请注意错误消息如何指出它无法连接到`btnScanClicked:`末尾的冒号不是标点符号 - 它表示该消息带有一个参数。

与`UIKit`动作方法不同，需要采用以下形式：

```
- (void)methodName:(id)sender 
```

`IBAction`只是解析为`void`，但它向 Interface builder 指示它是一种可以通过上下文拖动连接的方法。

# string - 在c ++中对大尺寸（10 ^ 8）的大量字符串（10 ^ 8）进行排序

> ID：13543532
> 
> 赞同：0
> 
> 时间：2012-11-24T17:14:04.990
> 
> 标签：string, sorting

谁能告诉我如何在 C++ 中对大尺寸的大量字符串进行排序。我无法建立任何逻辑。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:24:53.433

这可能是对指向字符串的指针进行排序的情况。您没有指定很多有助于提供良好解决方案的信息。如果字符串在磁盘上，则解决方案可能与字符串在内存中的情况不同。何时以及是否移动字符串可能取决于它们的位置以及访问要求。

合并排序算法往往适用于大型集合。对于较大的键大小，对键的前缀进行排序可以获得更容易/更快排序的集合。对所有以开头的键进行排序`a`比对所有键进行排序要容易得多。如果您正在使用具有相同前缀的集合，则可以跳过前缀并在键的下一部分进行排序。当所有前缀集的大小为 1 时，您就完成了。

# c# - 从 C# 中的数组读取

> ID：13543534
> 
> 赞同：0
> 
> 时间：2012-11-24T17:14:34.333
> 
> 标签：c#, arrays, textbox

我真的很接近让它正常工作，但我只是错过了一些东西。这可能很简单。我对 C# 很陌生。我有一个名为的文本框`txtState`，您可以在其中输入一个城市（我知道），以查看您是否访问过这个城市。`txtAnswer`当您单击`btnVisited`按钮时，它会向另一个文本框输出响应。现在它只是将我输入的任何内容输入到`txtState`框中并说它是数组中的 0 位置。我忘了提到我需要在数组中包含这个城市的位置，并将其输出到文本框。这是我的代码：

```
namespace Test
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        txtAnswer.Text = "";
        txtState.Text = "";
    }

    private void button3_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void btnVisited_Click(object sender, EventArgs e)
    {
        string[] CityName = {"Columbus", "Bloomington", "Indianapolis",
        "Fort Wayne", "Greensburg", "Gary", "Chicago", "Atlanta", "Las Vegas"};
        bool visitedbool;
        int subscript;
        subscript = 0;
        visitedbool = false;
        string QueryCity;
        QueryCity = txtState.Text.ToUpper();
        do 
        {
            subscript += 0;
            if (subscript == 0)
                txtAnswer.Text = "You have visited" + " " + QueryCity + " " + "It is the" + " " + subscript + " " + "city you have visited.";

            else if (subscript == 1)
                txtAnswer.Text = "You have visited" + " " + QueryCity + " " + "It is the" + " " + subscript + " " + "st city you have visited.";

            else if (subscript == 2)
                txtAnswer.Text = "You have visited" + " " + QueryCity + " " + "It is the" + " " + subscript + " " + "nd city you have visited.";

            else if (subscript == 3)
                txtAnswer.Text = "You have visited" + " " + QueryCity + " " + "It is the" + " " + subscript + " " + "rd city you have visited.";

            else if (subscript == 4 - 8)
                txtAnswer.Text = "You have visited" + " " + QueryCity + " " + "It is the" + " " + subscript + " " + "th city you have visited.";

            else
                txtAnswer.Text = "You have not visited this city.";
        }
        while (visitedbool == true);       
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:18:22.133

**您的代码的第一个问题：**

这不起作用：`else if (subscript == 4 - 8)`

试试这个：`else if (subscript >= 4 && subscript <= 8)`

**第二：**

`subscript += 0;`是相同的`subscript = subscript + 0;`

如果您将下标用作某种计数器，则它将不起作用，因为您只是在添加`0`

**第三：**

`visitedbool`永远都是`false`。您的循环只会运行一次，因为您从未设置`visitedbool`为`true`

# qt - 在发布模式下运行 QML 桌面应用程序时出错

> ID：13543535
> 
> 赞同：0
> 
> 时间：2012-11-24T17:14:38.203
> 
> 标签：qt, dll, desktop, qml

我用 Qt 和 c++ 编写了一个 QML 桌面应用程序，并使用 Qt Quick Desktop Components 来实现 UI 功能。（Windows 7）。我已经根据[这些](https://stackoverflow.com/questions/6298584/installing-qt-quick-components-for-desktop-for-use-with-qt-creator)说明（第一个答案）安装了组件，一次使用命令：qmake、jom debug、jom install，一次使用：qmake、jom release、jom install。

我有 styleplugin.dll 和 styleplugind.dll（用于发布模式和调试模式），但是当我在发布模式下运行我的应用程序时，我收到了这个错误：

> 为模块“Qt.labs.components”加载：插件“C:/QtSDK/Desktop/Qt/4.7.4/mingw/imports/Qt/labs/components/plugin/styleplugin.dll”使用不兼容的Qt库。预期的构建密钥“Windows mingw release full-config”，得到“Windows mingw debug full-config”导入Qt.labs.components 0.1 ^

你知道这种情况的任何原因吗？

任何答案将不胜感激！

# javascript - Event_calendar gem 没有“观察”方法

> ID：13543536
> 
> 赞同：1
> 
> 时间：2012-11-24T17:14:39.463
> 
> 标签：javascript, ruby-on-rails, calendar, gem

我正在使用 gem 在网站上实现事件日历。它是[event_calendar gem](https://github.com/elevation/event_calendar)。

我在 chrome 中收到以下错误：

```
Uncaught TypeError: Object function Event() { [native code] } has no method 'observe' 
```

它在 event_calendar.js 的第 6 行生成：

```
Event.observe(window, "load", function() { 
```

关于什么是错的任何想法？

* * *

我有一个名为 Event 的模型，所以我怀疑它可能会以某种方式干扰 JS，但我无法在我的代码中的任何地方找到它。

我觉得奇怪的是事件日历适用于事件和所有内容。这可能是重复的问题吗？同样，我找不到任何迹象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:55:26.180

对不起，我可能有点晚了，我刚刚遇到了同样的问题并设法解决了这个错误。

event_calendar gem 为不同的 Javascript 库实现了几个不同的实现。默认情况下，当您运行

```
rails generate event_calendar 
```

它不会生成您的 rails 应用程序最有可能使用的 jquery 实现。

Event.observe 模式是一个prototype.js 函数。除非您的 Rails 应用程序在 event_calendar gem 之前首先包含了prototype.js，否则它将中断。

要解决您的问题，如果您使用 jquery 作为默认 javascript 库，您可以运行

```
1\. rails generate event_calendar --use-jquery

2\. then replace the app/assets/javascripts/event_calendar.js with the generated public/javascripts/event_calendar.js. 
```

希望能帮助到你。

# ruby-on-rails - Rails 模型可能有_一种不同类型的模型

> ID：13543538
> 
> 赞同：1
> 
> 时间：2012-11-24T17:14:47.723
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

这个问题的最佳解决方案是什么：

我有一个 Ticket 模型，其中包含源点和目标点。来源可以是地址、火车站、机场，每个都有自己的字段（地址有城市和地址字段，火车站有火车站和车号字段等）。与目的地相同。我需要实现票证来源和目的地类型的动态选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T17:23:50.733

Rails 有一个很棒的方法。它称为[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。浏览文档。

# android - 当前位置 GPS，程序意外关闭

> ID：13543546
> 
> 赞同：1
> 
> 时间：2012-11-24T17:15:27.347
> 
> 标签：android, geolocation, gps

我正在尝试通过 GPS 获取当前位置。但我的应用程序意外关闭。我无法得到原因。我在 AndroidManifest.xml 中添加了权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

我正在尝试的代码如下：

公共类 MainActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void getLoc()
{
    LocationManager manager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);          
    LocationListener listener = new MyLocationListener();
    manager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 5000, 10, listener);
}

public class MyLocationListener implements LocationListener    {
@Override

public void onLocationChanged(Location loc) 
{
    loc.getLatitude();
    loc.getLongitude();
    String Text = "My current location is: " + "Latitude = " + loc.getLatitude() + "Longitude = " + loc.getLongitude();
    Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();
}

@Override

public void onProviderDisabled(String provider)
{
    Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
}

@Override

public void onProviderEnabled(String provider)
{
    Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();
}

@Override

public void onStatusChanged(String provider, int status, Bundle extras)
{        }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:12:30.437

试试这个，它可能对你有帮助

```
LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
   LocationListener mlocListener = new MyLocationListener();

 mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
        mlocListener);

public class MyLocationListener implements LocationListener {

@Override
public void onLocationChanged(Location loc) {
    loc.getLatitude();
    loc.getLongitude();

    Geocoder gcd = new Geocoder(getApplicationContext(),
            Locale.getDefault());
    try {
        mAddresses = gcd.getFromLocation(loc.getLatitude(),
                loc.getLongitude(), 1);

    } catch (IOException e) {

    }

    String cityName = (mAddresses != null) ? mAddresses.get(0)
            .getLocality() : TimeZone.getDefault().getID();
    String countryName = (mAddresses != null) ? mAddresses.get(0)
            .getCountryName() : Locale.getDefault().getDisplayCountry()
            .toString();

    mCurrentSpeed.setText(loc.getSpeed());
}

@Override
public void onProviderDisabled(String provider) {
    Toast.makeText(getApplicationContext(), "Gps Disabled",
            Toast.LENGTH_SHORT).show();
}

@Override
public void onProviderEnabled(String provider) {
    Toast.makeText(getApplicationContext(), "Gps Enabled",
            Toast.LENGTH_SHORT).show();
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:30:49.673

尝试这个。首先使这段代码简单。

在 onCreate 中添加这一行，因为我没有看到在 onCreate 中调用的任何 getloc 方法

```
LocationManager manager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);          
    LocationListener listener = new MyLocationListener();
    manager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 5000, 10, listener); 
```

并为了测试将这些值更改为 0

```
manager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, listener); 
```

并使用此方法更改 onLocationChange。

```
public void onLocationChanged(Location location) {
    int lat = (int) (location.getLatitude());
    int lng = (int) (location.getLongitude());
    latituteField.setText(String.valueOf(lat));
    longitudeField.setText(String.valueOf(lng));
  } 
```

或试试这个[链接](http://www.hrupin.com/2011/04/android-gps-using-how-to-get-current-location-example)

# mysql - MySQL加入不适用于子查询

> ID：13543548
> 
> 赞同：1
> 
> 时间：2012-11-24T17:15:42.097
> 
> 标签：mysql, join, subquery

这是我的数据库：

![在此处输入图像描述](../Images/fc25f96352c3253fb9dcda6aa4c8673f.png)

此查询选择所有补充：

```
SELECT a.id, a.name, a.image, a.url_segment, COUNT(b.id) AS reviews_count, ROUND(AVG(b.rating), 2) AS reviews_rating, (((SELECT COUNT(*) FROM reviews) * (SELECT AVG(rating) FROM reviews)) + (COUNT(b.id) * AVG(b.rating))) / ((SELECT COUNT(*) FROM reviews) + COUNT(b.id)) AS bayesian_rating
FROM (`supplements` AS a)
LEFT JOIN `reviews` AS b ON `b`.`supplements_id` = `a`.`id`
GROUP BY `a`.`id`
ORDER BY `bayesian_rating` DESC 
```

而这个，来自一个子类别的所有补充（在这种情况下，id = 1）：

```
SELECT a.id, a.name, a.image, a.url_segment, COUNT(b.id) AS reviews_count, ROUND(AVG(b.rating), 2) AS reviews_rating, (SELECT text FROM reviews WHERE supplements_id = a.id ORDER BY id DESC LIMIT 1) AS reviews_latest_text, (((SELECT COUNT(*) FROM reviews LEFT JOIN supplements ON (supplements.id = reviews.supplements_id AND supplements.subcategories_id = 1)) * (SELECT AVG(rating) FROM reviews LEFT JOIN supplements ON (supplements.id = reviews.supplements_id AND supplements.subcategories_id = 1))) + (COUNT(b.id) * AVG(b.rating))) / ((SELECT COUNT(*) FROM reviews LEFT JOIN supplements ON (supplements.id = reviews.supplements_id AND supplements.subcategories_id = 1)) + COUNT(b.id)) AS bayesian_rating
FROM (`supplements` AS a)
LEFT JOIN `reviews` AS b ON `b`.`supplements_id` = `a`.`id`
WHERE `a`.`subcategories_id` =  '1'
GROUP BY `a`.`id`
ORDER BY `bayesian_rating` DESC 
```

相同补充的贝叶斯评级在每个查询中应该不同，但在两个查询中返回相同。

这是我在第一个查询中计算贝叶斯评级的部分：

```
(((SELECT COUNT(*) FROM reviews) * (SELECT AVG(rating) FROM reviews)) + (COUNT(b.id) * AVG(b.rating))) / ((SELECT COUNT(*) FROM reviews) + COUNT(b.id)) AS bayesian_rating 
```

在第二个：

```
(((SELECT COUNT(*) FROM reviews LEFT JOIN supplements ON (supplements.id = reviews.supplements_id AND supplements.subcategories_id = 1)) * (SELECT AVG(rating) FROM reviews LEFT JOIN supplements ON (supplements.id = reviews.supplements_id AND supplements.subcategories_id = 1))) + (COUNT(b.id) * AVG(b.rating))) / ((SELECT COUNT(*) FROM reviews LEFT JOIN supplements ON (supplements.id = reviews.supplements_id AND supplements.subcategories_id = 1)) + COUNT(b.id)) AS bayesian_rating 
```

由于某种原因，连接对结果没有任何影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:31:21.263

由于评论是补充品的孩子，加入补充品不会返回任何不同的评论。

我认为这*两个*查询返回相同的结果。

此外，根据 的数学定义`AVG`，术语

```
(SELECT COUNT(*) FROM reviews) * (SELECT AVG(rating) FROM reviews) 
```

等同于

```
(SELECT SUM(rating) FROM reviews) 
```

因此您可以简化（并加快）您的查询，但将其替换为。

# javascript - 如何强制javascript函数同步/顺序执行？

> ID：13543553
> 
> 赞同：1
> 
> 时间：2012-11-24T17:16:06.410
> 
> 标签：javascript, jquery, html, asynchronous

我正在创建一个实用方法，它有助于使用 jQuery 顺序淡化元素。正如您在下面的代码中看到的那样，我添加了一个额外的类作为`alreadyFadedIn`标志。在方法调用结束时，`sequentiallyFadeIn(...)`我想执行`cleanUp`我想删除我在`sequentiallyFadeIn(...)`方法内的选定元素中添加的标志类的位置。

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function() {

    function sequentialFadeIn(selectorText, speed, display, callBack) {

        display = typeof display !== 'undefined' ? display : "block";

        function helper() {
            nextElementToFadeIn = $(selectorText).not(".alreadyFadedIn").first();
            nextElementToFadeIn.fadeIn(speed, function() {
                $(this).addClass("alreadyFadedIn");
                helper();
            }).css("display", display);
        }
        helper();

        callBack(selectorText);      
    }
    sequentialFadeIn(".toBeFaddedIn", "slow", "inline-block",function cleanUp(selectorText1){
            $(selectorText1).removeClass("alreadyFadedIn");
            console.log("Clean up has been performed.");
                    console.log("Selector Text: " +selectorText1);

        } );

});

</script>

</head>
<body><style media="screen" type="text/css">
.hello {
    background-color: blue;
    height:50px;
    width: 50px;
    display: none;

}
</style>

<div class="hello toBeFaddedIn"></div>
<div class="hello toBeFaddedIn"></div>
<div class="hello toBeFaddedIn"></div>
<div class="hello toBeFaddedIn"></div>
<div class="hello toBeFaddedIn"></div>

</body></html> 
```

在查看检查元素时，我注意到该类`alreadyFadedIn`没有被删除。在我看来，原因是 cleanUp 方法`sequentiallyFadeIn`与`helper()`. 您还可以注意到日志消息“已执行清理”。甚至在 div 完成淡入之前就被打印出来。

如何`cleanUp`在方法中的主要逻辑完成后执行调用`sequentiallyFadedIn`？有什么建议么？

jsfiddle 上的代码：http: [//jsfiddle.net/BztLx/11/](http://jsfiddle.net/BztLx/11/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T17:25:27.937

您需要检查是否有任何元素需要淡入。如果没有元素剩余，请调用清理回调。以下是我的实现方式：

```
 if ($(selectorText).is(":not(.alreadyFadedIn)")) {

        //Your main logic
        nextElementToFadeIn = $(selectorText).not(".alreadyFadedIn").first();
        nextElementToFadeIn.fadeIn(speed, function() {
            $(this).addClass("alreadyFadedIn");
            helper();
        }).css("display", display);

    } else {

        //No elements remain, cleanup time
        callBack(selectorText);
    } 
```

在外部条件中，我检查是否至少有一个元素没有淡入，否则我调用回调。

演示：http: [//jsfiddle.net/BztLx/12/](http://jsfiddle.net/BztLx/12/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T17:52:48.227

如果你只是像这样重写你的代码，更容易，更干净，更快......

```
$(document).ready(function() {

    function sequentialFadeIn(selectorText, speed, display, callBack) {

        display = display || "block";

        var els = $(selectorText),
              i = 0;

        (function helper() {
            els.eq(i++).fadeIn(speed, helper).css("display", display);
            if (callback && i === els.length)
                callback(selectorText); // Not really needed any more
        })();
    }

    sequentialFadeIn(".toBeFaddedIn", "slow", "inline-block", function cleanUp(selectorText1){
        // not really needed any more
       //  $(selectorText1).removeClass("alreadyFadedIn");
    });
}); 
```

* * *

***演示：http:*** [//jsfiddle.net/BztLx/15/](http://jsfiddle.net/BztLx/15/)

你做*的*DOM 选择比需要的多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T18:11:15.977

为了扩展我的评论，这是一个不使用附加类的简化版本：

```
function fadeThenNext(element){
    element.fadeIn("fast", function() {
        element=element.next(".toBeFaddedIn");
        if (element.length) fadeThenNext(element);
    });
}
fadeThenNext($(".toBeFaddedIn").first()); 
```

演示：http: [//jsfiddle.net/BztLx/17/](http://jsfiddle.net/BztLx/17/)

**[更新]**如果元素不是同级元素，则使用更通用的版本：

```
function fadeSequence(elements){
    elements.first().fadeIn("fast", function() {
        fadeSequence(elements.slice(1));
    });
}
fadeSequence($(".toBeFaddedIn")); 
```

小提琴：http: [//jsfiddle.net/BztLx/22/](http://jsfiddle.net/BztLx/22/)

# c - 如何在 C 中使用原始套接字接收 ICMP 请求

> ID：13543554
> 
> 赞同：5
> 
> 时间：2012-11-24T17:16:27.713
> 
> 标签：c, sockets, network-programming

这是一项任务，它必须与原始套接字一起使用。我需要编写一个简单的 icmp ping。我以此为基础[http://www.pdbuchan.com/rawsock/icmp4.c](http://www.pdbuchan.com/rawsock/icmp4.c)。第 127 行是 wlan0，我使用的是 eth0。在第 290 行，我编写了以下代码：

```
struct sockaddr_in rec;

unsigned char * pkt = (unsigned char *) malloc (IP_MAXPACKET * sizeof (unsigned char));

if (recvfrom (sd, (void*)pkt, IP4_HDRLEN + ICMP_HDRLEN+datalen , 0, NULL, (socklen_t*)sizeof (struct sockaddr)) < 0)  {
  perror ("recvfrom() failed ");
  exit (EXIT_FAILURE);
}
struct ip *ip = (struct ip *)pkt;
struct icmphdr *icmp = (struct icmphdr *)(pkt + IP4_HDRLEN);

printf("%s %s %d\n",(char*)inet_ntoa(*(struct in_addr*)&ip->ip_dst),
        (char*)inet_ntoa(*(struct in_addr*)&ip->ip_src),
        icmp->type);
free (pkt); 
```

问题是 ip_dst 和 ip_src 显示为我机器的 IP，icmp 类型为 0 而不是 8。Wireshark 显示 icmp 回复和请求。可能我的 recvfrom 是错误的，但我听说 linux 自己的 TCP/IP 可能正在处理数据包。如果这是真的，那么解决方法是什么？

编辑：我检查了这个[原始套接字侦听器](https://stackoverflow.com/questions/13082023/raw-socket-listener)，但它没有解决我的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T05:35:37.140

我认为您在使用 IPPROTO_RAW 时无法得到回复。

你必须使用

```
socket (AF_INET, SOCK_RAW, IPPROTO_ICMP); 
```

使用 IPPROTO_ICMP 您只能发送一个 ICMP 数据包，而不是整个 IP 数据包。

然而，在接收时，您将获得整个 IP 数据包，并且必须提取 ICMP 回复。请注意，您将获得发送到主机的所有 ICMP 数据包的副本，因此您必须过滤它们。

# python - GAE：用户名/正则表达式

> ID：13543558
> 
> 赞同：2
> 
> 时间：2012-11-24T17:16:48.270
> 
> 标签：python, regex, google-app-engine, web-applications, web

> **可能重复：**
> [如何使用 Google App Engine 进行不区分大小写的过滤器查询？](https://stackoverflow.com/questions/3289781/how-to-make-case-insensitive-filter-queries-with-google-app-engine)

目前在我的网络应用程序上，

如果我输入 www.website.com/Rohit ，它会将我带到我想要的个人资料页面。

但是如果我输入 www.website.com/rohit ，它不会带我到那里，它会被发送到 404 错误。

基本上，我的用户名存储为：Rohit

并且任何给定用户的个人资料页面都应该是：www.website.com/username

但我希望网站不关心大写字母。

**更新**

我现在知道了，感谢 Martijn，我的正则表达式没问题。这是我用来检查 Google App Engine 以查看用户名是否已存在的代码：

```
u = User.all().filter('username =', username).get() 
```

^如何使这个大写友好（大写字母没有区别？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:33:18.197

用于`filter('username =', username.lower())`预先转换为小写。

并且您需要转换您的数据库，将所有用户名也更改为小写：

```
users = User.all().fetch(1000000)
for user in users :
    if user.username != user.username.lower() :
        user.username = user.username.lower()
        user.put()  # save back to db only if changed 
```

您可以从交互式控制台运行它，`fetch(offset,count)`用于调整一次运行中转换的用户数量。

# mysql - 如何在 MYSQL 中编写可以从触发器和存储函数调用的信号函数？

> ID：13543559
> 
> 赞同：4
> 
> 时间：2012-11-24T17:16:58.047
> 
> 标签：mysql, stored-procedures, triggers, stored-functions, mysql-5.0

在我的数据库中，我有一个**表**：`Employee`通过递归关联，员工可以成为其他员工的老板。

表说明：

```
mysql> DESC Employee;
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| SSN         | varchar(64)  | NO   | PRI | NULL    |       |
| name        | varchar(64)  | YES  |     | NULL    |       |
| designation | varchar(128) | NO   |     | NULL    |       |
| MSSN        | varchar(64)  | NO   | MUL | NULL    |       |
+-------------+--------------+------+-----+---------+-------+ 
```

员工表的当前状态是：

```
mysql> SELECT * FROM Employee;
    +-----+------+-------------+------+
    | SSN | name | designation | MSSN |
    +-----+------+-------------+------+
    | 1   | A    | OWNER       | 1    |
    | 2   | B    | BOSS        | 1    |  
    | 3   | C    | WORKER      | 2    |  
    | 4   | D    | BOSS        | 2    |  
    | 5   | E    | WORKER      | 4    |   
    | 6   | F    | WORKER      | 1    |  
    | 7   | G    | WORKER      | 4    |  
    +-----+------+-------------+------+
    7 rows in set (0.00 sec) 
```

以下是表中各行之间的层次关系：

```
 A
    / \
   B   F
  / \
 c   D
    / \
   G   E 
```

**我想对 INSERT 施加以下约束**：

*   员工不能对自己进行 BOSS。这仅适用于 OWNER。因此查询之类的。
    `INSERT INTO Employee VALUES ("8", "H", "BOSS", "8");` 应该拒绝。
*   `OWNER`可以插入 新的新的。

因为我正在使用 5.5 之前的 MYSQL 版本（不支持信号）。
所以我使用了一个**my_singal()**一个存储过程。

写成这样：

> ```
> CREATE PROCEDURE `my_signal`(in_errortext VARCHAR(255))
> BEGIN
>     SET @sql=CONCAT('UPDATE `', in_errortext, '` SET x=1');
>     PREPARE my_signal_stmt FROM @sql;
>     EXECUTE my_signal_stmt;
>     DEALLOCATE PREPARE my_signal_stmt;
> END// 
> ```

并**应用约束**，我`written a Trigger`知道了`check constraints are not yet implemented in MySQL`！

> ```
> DELIMITER $$
> CREATE
>   TRIGGER `employee_before_insert` BEFORE INSERT
>     ON `Employee`
>     FOR EACH ROW BEGIN
>       CASE
>        WHEN NEW.designation = 'OWNER'  THEN
>           CALL my_signal('Error: can not insert new OWNER !');
> 
>        WHEN NEW.SSN = NEW.MSSN THEN
>           CALL my_signal('Error: Row can not reference itself!');
>       END CASE; 
>   END$$   
> DELIMITER ; 
> ```

它已成功编译并加载到数据库中。但是当我尝试插入时：

```
mysql> INSERT INTO Employee VALUES ("12", "K", "BOSS",   "12");
ERROR 1336 (0A000): Dynamic SQL is not allowed in stored function or trigger 
```

我在 [这里](http://dev.mysql.com/doc/mysql-reslimits-excerpt/5.1/en/stored-program-restrictions.html)和[这里学习](https://stackoverflow.com/questions/12568577/what-is-the-workaround-for-using-dynamic-sql-in-a-stored-procedure)

*   SQL 准备语句（PREPARE、EXECUTE、DEALLOCATE PREPARE）可用于存储过程，但不能用于存储函数或触发器。因此，存储函数和触发器不能使用**动态 SQL**（您将语句构造为字符串然后执行它们）。

经过一番努力，我可以编写另一个触发器，如下所示。按照我的要求**工作正常。**

> ```
> mysql> CREATE
>     -> TRIGGER `employee_before_insert` BEFORE INSERT
>     ->     ON `Employee`
>     ->     FOR EACH ROW BEGIN
>     ->      IF UCASE(NEW.designation) = 'OWNER'  THEN  /*UCASE*/
>     ->        UPDATE `Error: can not insert new OWNER !` set x=1; 
>     ->      END IF;
>     ->      IF (NEW.SSN = NEW.MSSN) THEN
>     ->        UPDATE `Error: Row can not reference itself!` set x=1;
>     ->      END IF;
>     -> END$$
> Query OK, 0 rows affected (0.08 sec)
> 
> mysql> DELIMITER ;
> mysql> INSERT INTO Employee VALUES ("12", "K", 'owner',   "11");
> ERROR 1146 (42S02): Table 'dumy.Error: can not insert new OWNER !'
>   doesn't exist
> mysql> INSERT INTO Employee VALUES ("12", "K", 'Ajay',   "12");
> ERROR 1146 (42S02): Table 'dumy.Error: Row can not reference itself!' 
>   doesn't exist 
> ```

因为我已经`my_signal()` 在许多过程中使用，我需要编写许多新的存储函数和触发器，我需要`my_signal()`再次使用函数。

`It would also good for easy manipulation if sometime MYSQL version upgraded to 5.5(+)`.

**有人可以建议我以其他方式编写 my_signal() 来打印自定义错误消息吗？**

我尝试如下：

> ~~分隔符 $$~~
> ~~创建过程`my_signal`（in_errortext VARCHAR(255)）~~
> ~~声明 sql varchar(512);~~
> ~~开始~~
> ~~SET sql=CONCAT('UPDATE `', in_errortext, '`SET x=1');~~
> ~~更新 sql 设置 x =1;~~
> ~~结束$$~~

但没用:(。

请帮助我。我将非常感激！

我特别不擅长MYSQL @Stored Procedures。

如果您想在[此处尝试您的系统，您可以快速找到](https://stackoverflow.com/questions/13487010/how-to-update-same-table-on-deletion-in-mysql)构建此数据库的命令。

**编辑 ~** MySQL 解释器充当编译器！

我们不能从触发器和存储函数中调用**动态 SQL**语句。

为了在所有存储的例程中保持相同的接口 my_signal() 我修改了 my_signal(); 添加`Static SQL`语句`Dynamic SQL`并确保它不会从触发器执行。我认为应该允许`because MySQL is an interpreter not a compiler`。

**新的 my_signal()**

```
DELIMITER $$
CREATE PROCEDURE `my_signal`(in_errortext VARCHAR(255))
BEGIN

    IF in_errortext = 'ERROR_INSERT_OWNER' THEN  /* Static SQL*/
        UPDATE `Error: can not insert new OWNER !` set x=1; 
    END IF;

    IF in_errortext = 'ERROR_INSERT_SELF_REFERENCE' THEN /* Static SQL*/
        UPDATE `Error: Row can not reference itself!` set x=1;

    ELSE /* Dynamic SQL*/    
        SET @sql=CONCAT('UPDATE `', in_errortext, '` SET x=1');
        PREPARE my_signal_stmt FROM @sql;
        EXECUTE my_signal_stmt;
        DEALLOCATE PREPARE my_signal_stmt;
    END IF;
END$$ 
```

**新触发器**

```
DELIMITER $$
CREATE
    TRIGGER `employee_before_insert` BEFORE INSERT
    ON `Employee`
    FOR EACH ROW BEGIN
        CASE
         WHEN UPPER(NEW.name) = 'OWNER'  THEN
            CALL my_signal('ERROR_INSERT_OWNER');

         WHEN NEW.SSN = NEW.MSSN THEN
            CALL my_signal('ERROR_INSERT_SELF_REFERENCE');
        END CASE; 
    END$$   
DELIMITER ; 
```

希望我尝试插入：

```
mysql> INSERT INTO Employee VALUES ("9", "X", "WOKER", "9" );
ERROR 1336 (0A000): Dynamic SQL is not allowed in stored function or trigger
mysql> INSERT INTO Employee VALUES ("9", "X", "OWNER", "9" );
ERROR 1336 (0A000): Dynamic SQL is not allowed in stored function or trigger 
```

哎呀！它的行为类似于编译器，而不是解释器。不是吗？

**编辑**：回答

幸运的是，我在编辑问题时得到了[RolandoMySQLDBA](https://dba.stackexchange.com/users/877/rolandomysqldba)的回答。
答案在[**这里**](https://dba.stackexchange.com/questions/321/dynamic-sql-in-mysql-stored-routines/1906#1906)
最后：我可以理解**我们不能在触发器中执行动态 SQL。**我可能不得不求助于对 my_signal() 进行编码。MySQL 现在还没有其他选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:14:46.667

Unfortunately, prior to MySQL 5.5 the only way to force a `ROLLBACK` from within a trigger is to generate an error just like you did intentionally.

This causes two problems.

1.  the error message is very confusing for the developer since you can't return a custom error message
2.  If a "real" error would be caused by the manipulating statment, under some circumstances you might even overwrite this and make debugging even harder.

This is from the view of a developer - I had a lot of discussions with our DBA concerning this.. but even a well done database - especially if built on MySQL - sometimes must rely on the application. :)

# c# - 具有两个 DataContext 的 ComboBox

> ID：13543560
> 
> 赞同：1
> 
> 时间：2012-11-24T17:17:02.590
> 
> 标签：c#, wpf, mvvm-light

我有一个用户控件，`ItemTemplate`属性内有一个 ListView 有一个 ComboBox 我需要为这个 ComboBox 使用两个数据上下文

1.  来自 UserControl 的 ItemsSource DataContext
2.  ListViewItem 中的 SelectedItem DataContext

## 如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:29:32.140

您可以`RelativeSource`在绑定中使用来遍历可视树以找到`DataContext for UserControl`.

而对于`ListViewItem`，您不需要 RelativeSource ，因为`Combobox will inherit the DataContext of its parent which is ListViewItem`它本身。你的结构看起来有点像这样 -

```
<UserControl>
   <ListView>
       <ListView.ItemTemplate>
           <DataTemplate>
               <ComboBox ItemsSource="{Binding DataContext.CollectionSource,
                          RelativeSource={RelativeSource FindAncestor, 
                                           AncestorType=UserControl}}"
                         SelectedItem="{Binding YourItemHere}"/>
           </DataTemplate>
       </ListView.ItemTemplate>
   </ListView>
</UserControl> 
```

# c - TCP 网络吞吐量测量

> ID：13543565
> 
> 赞同：1
> 
> 时间：2012-11-24T17:17:44.657
> 
> 标签：c, sockets, tcp

我正在编写一个小程序来测试网络吞吐量作为练习的一部分，并且需要将发送和接收缓冲区增加到 256 KB（以尝试提高 TCP 性能）。我正在使用`setsockopt()`SO_SNDBUF/SO_RCVBUF 选项执行此操作，并且还增加了 'net.core.rmem_max' 和 'net.core.wmem_max' 值。

getsockopt() 确认缓冲区大小的增加（256KB 值的两倍）所以我知道这很好。但是，当我将 256KB 的数据从一台主机发送到另一台主机时，接收器总是以多次读取的形式接收数据，每次读取的大小各不相同（形成 20 到 40 次读取，接收字节数从 1448 到 18824 不等），直到它接收到所有数据. 在这一点上我很困惑，主要是这些问题，

1.  随着缓冲区大小的增加，它不应该在一次读取中接收它吗？
2.  另外，为什么每次读取的字节数差异如此之大（它们不应该更不恒定）？
3.  有什么方法可以确保一次读取就收到 256KB 吗？

下面是显示读取部分的接收端片段，

```
 while(1) {
    memset(&client_addr, 0, sizeof(client_addr));
    if ((connfd = accept(listenfd, (struct sockaddr*)&client_addr, &socklen)) <= 0) {
      perror("accept()");
      exit(EXIT_FAILURE);
    }

    while ((n = recv(connfd, &buff[0], BUFF_SIZE, 0/*MSG_WAITALL*/)) > 0) {
      totalBytes += n;
      ++pktCount;
      printf("Received(%d): %d bytes\n", pktCount, n);
    }

    if (n == 0) {
      printf("Connection closed (Total: %lu bytes received)\n", totalBytes);
    }

    close(connfd);
    connfd = -1;
    totalBytes = 0;
    pktCount = 0;
  } 
```

任何帮助都会很棒。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:30:37.253

> 随着缓冲区大小的增加，它不应该在一次读取中接收它吗？

不是。TCP/IP 是一种流式传输协议，将数据分段为更小的数据包。缓冲区大小主要影响底层网络层实现可以使用多少内存（Linux 通常将您设置的内存加倍），但不能保证接收将接收与发送方发送数据完全相同大小的数据块（之后所有，当您调用时`send()/write()`，实际上并不意味着数据包已发送。此外，由于[MTU](http://en.wikipedia.org/wiki/Maximum_transmission_unit) ，您很可能无论如何都会拆分数据包。

> 另外，为什么每次读取的字节数差异如此之大（它们不应该更不恒定）？

您可能想调试为什么会发生这种情况。有数百个因素——使用的 NIC、它的设置、它的驱动程序、TCP/IP、TCP、以太网网络层设置、发送方和接收方之间的东西（即交换机）等。但是，嘿，当你的操作系统有更多数据进来时并且应用程序正在处理前一个块。鉴于将数据从 NIC 传递到用户空间应用程序的成本相对较高，因此数据被缓冲并且您​​获得不同大小的数据也就不足为奇了。

> 有什么方法可以确保一次读取就收到 256KB 吗？

可能有。人们可能会使用阻塞`read()`并要求操作系统仅在收到至少 256KB 或发生错误时才唤醒进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T17:30:44.823

您将有大约 180 个数据包要发送，这远不及大量数据。[Nagle](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)将导致任意数量的数据包在发送和接收时被任一操作系统缓冲。

何时将呈现任何缓冲数据包的触发器`recv()`取决于实现。它很可能会在一定时间后或达到一定数量的内部缓冲区大小后呈现所有数据包。在某些操作系统上，您可以使用`SO_RCVLOWAT`套接字选项更改这些级别。

# android - Android：将列表中的选定项目限制为 ListView 中的 1

> ID：13543567
> 
> 赞同：3
> 
> 时间：2012-11-24T17:17:59.197
> 
> 标签：android, android-listview, android-arrayadapter

我有一个 ListView，我想从列表中选择一项并将背景颜色更改为灰色。目前，如果我从列表中选择一个，我还可以选择另一个...我想将我的选择限制为 1，当我选择一个项目时，我将无法选择另一个项目。

这是我的代码：

```
myadapter =  new MyAdapter(Main.this, object_list);
mylist.setAdapter(myadapter);

mylist.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                view.setBackgroundColor(Color.LTGRAY);

            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:22:31.847

添加`android:choiceMode="singleChoice"`到您`ListView`的 layout-xml 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:27:19.707

我认为您正在使用自定义适配器，因此您可以使用`isEnabled(int position)`baseadapter 类的方法并使单击的项目启用，其余的禁用。但我想知道使其他项目不适合选择的原因是什么。

# c++ - 宏和包含的 QObject 错误

> ID：13543572
> 
> 赞同：4
> 
> 时间：2012-11-24T17:18:26.903
> 
> 标签：c++, qt, qobject

我想在我的程序中使用信号和插槽，为此我被告知需要添加 Q_OBJECT，如下所示。

好吧，我有一堂课：

```
class A
{
    Q_OBJECT
public:
    A();
}; 
```

这会给出一个错误，上面写着“Q_OBJECT 没有命名类型”。如果我添加 #include 它会给出错误“未定义的对 A 的 vtable 的引用”

那么这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T17:24:55.243

该`Q_OBJECT`宏适用于 a 的子类`QObject`（或其他子类）。如果您希望您的班级使用信号和插槽，它也是必需的。

```
class A 
    : public QObject
{
    Q_OBJECT

 public:
    A(QObject *parent = 0);
}; 
```

* * *

[Q_OBJECT](http://doc.qt.digia.com/qt/qobject.html#Q_OBJECT)

> Q_OBJECT 宏必须出现在声明自己的信号和槽或使用 Qt 元对象系统提供的其他服务的类定义的私有部分中。
> ...
> **注意：**
> 这个宏要求类是 QObject 的子类。...

# java - AWT 字符串宽度取决于 DPI

> ID：13543575
> 
> 赞同：2
> 
> 时间：2012-11-24T17:18:50.587
> 
> 标签：java, fonts, awt

我们正在开发一个打印应用程序。使用 AWT 以两种不同分辨率的模式呈现相同的文本 - 屏幕（小 DPI）和打印（300 DPI）。

问题是文本布局取决于 DPI。而且这种依赖是非线性的。有例子：

![在此处输入图像描述](../Images/8116ac2ee26a4bd8e173ff8dc9190449.png) 宽度：200 像素，字体大小：10 磅

![在此处输入图像描述](../Images/261521d472b79886e175c2aefe6a3715.png) 宽度：400 像素，字体大小：20 磅

![在此处输入图像描述](../Images/9dc799c8cec99e72f1d08566cf8c2bd9.png) 宽度：600 像素，字体大小：30 磅

从第一张图像到第三张图像，矩形宽度和字体大小按比例增加。但是在第一张图片上我们只有“lazy”，第二张我们有“lazy do”，第三张只有“lazy d”。

有没有办法在增加总图像大小（以像素为单位）的同时限制文本布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:59:41.623

```
graphics.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:16:10.937

SVG 渲染器可能更适合您，因为您可以构建单个矢量图像并以任意像素密度渲染它。

[蜡染](http://xmlgraphics.apache.org/batik/)可能有用，虽然我从来没有用过。

# java - Android：资源中的翻译

> ID：13543579
> 
> 赞同：4
> 
> 时间：2012-11-24T17:19:13.887
> 
> 标签：java, android, xml

我已经为我的应用程序完成了翻译。文件夹“res/values-ru”、“res/values”、“res/values-rs”、“res/values-sp”、“res/values-cn”等文件夹中的翻译。

但是当我在手机上切换语言时，我的应用程序中的语言只有英语或俄语。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:29:35.557

中文和西班牙文的正确后缀是“-zh”和“-es”

附言。德语是“-de”，以防您以后需要它。

# android - Android AVD 未将 Google API 检测为目标

> ID：13543588
> 
> 赞同：4
> 
> 时间：2012-11-24T17:20:24.653
> 
> 标签：android, api, avd

我已经安装了 Google API 并在 Eclipse 中创建了一个特定于 Google API 的项目。虽然当我去创建一个目标设置为 Google API 的新 AVD 时，我只有 Android 4.2 - API 级别 17 的选项。如何让 Google API 显示以便我可以选择它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-27T01:48:31.367

确保在下载 Google API 后重新启动 Eclipse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:11:07.653

我会仔细检查您是否下载了 Google API，而不仅仅是 Android API。它们都将具有相同的 API 编号。使用 SDK 管理器，您将看到各种下载选项。确保除了“SDK 平台”之外，您还下载了“Google API”。

如果您没有下载 Google 部分，您会看到这种行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T03:52:09.717

转到 Android SDK 管理器，然后下载创建新 AVD**所需的一切。**

下载完成后，您可以使用刚刚下载的内容创建 AVD。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T10:19:12.353

也许您需要检查 SDK 位置的路径，它可能指向仅安装 Android 4.2-API Level 17 的其他 SDK 位置。

您可以通过转到 Window -> Preferences（在您的 Eclipse 中），在 Preferences goto Android 中执行此操作，在 Android 中您将看到 SDK Location。浏览并将 SDK Location 更改为安装 Android SDK 工具的 SDK 位置。例如：C:\Program Files (x86)\Android\android-sdk

# c# - 使用 Microsoft Outlook 14.0 对象库 DLL 的安全性

> ID：13543589
> 
> 赞同：1
> 
> 时间：2012-11-24T17:20:39.570
> 
> 标签：c#, dll, vbscript, outlook, compatibility

在我的 C# 程序中，我最初调用了一个外部 VBS 脚本来运行一些 Outlook 操作（将 vCard 导入 Outlook）。我决定将其更改为直接的 C# 代码，因为使用 VBS 的不优雅，以及难以确定的错误。

首先，我使用了 Microsoft Outlook 11.0 对象库。这在 Windows 7 上看起来很棒，但是当我尝试在 Windows XP 上运行以下代码行时，它崩溃了`var outlook = new Microsoft.Office.Interop.Outlook.Application();`：显然，我确保 Microsoft.Office.Interop.Outlook.dll 和 Office.dll 文件与 C# exe 一起位于用户的文件夹中，但这并没有帮助。请记住，这是一个 .NET 3.5 Client Profile 应用程序。

因此，我尝试使用 14.0 对象库而不是 11.0（我从另一台安装了 Outlook 2010 而不是我的第一台 PC 上的 Outlook 2003（版本 11）的计算机上获得了版本 14）。我现在没有使用 MSOUTL.OLB，而是直接引用了前面提到的两个 DLL。即使在 XP 上，它也可以工作，或者现在看起来工作得很好。

一些问题：

1：我可以合法地重新分发 Microsoft.Office.Interop.Outlook.dll 和 Office.dll 以及我的程序（与 exe 相同的文件夹），如果是这样，除了压缩之外，还有什么方法可以将大小从大约 1.5meg 减少？

2：走这条路（使用 Microsoft Outlook 14.0 对象库）是否安全，并且可能比在最终用户的 PC 上使用 VBS 更安全？

3：边问：引用MSOUTL.OLB（即引用时的COM菜单）和直接引用两个DLL（Microsoft.Office.Interop.Outlook.dll和Office.dll）有什么区别。它们似乎都在做同样的工作（以前的 OLB 无论如何都会创建 DLL）。

# android - Android上的全球数据库

> ID：13543591
> 
> 赞同：1
> 
> 时间：2012-11-24T17:21:12.180
> 
> 标签：android, database

我没有服务器。我想在全球免费托管一个简单的小型数据库。有没有提供这种服务的网站？

如果是这样，并且如果我成功上传了我的数据库，是否有人尝试在 android 的全局数据库中添加和获取条目？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:28:25.600

不要托管，而是将您的数据库包含在您的应用程序中。当您进行更改时，发布应用程序的新版本。谷歌应用商店将负责全球范围内的免费分发。

# django - Django 模板回显空属性

> ID：13543602
> 
> 赞同：3
> 
> 时间：2012-11-24T17:22:09.090
> 
> 标签：django, django-templates

我搜索但找不到类似的问题，所以如果已经回答，我很抱歉。现在让我们进入主题。我有一个带有 @property 值的模型（其中 3 个）。所有这些都有效，一个只是返回空，我找不到问题。这是模型的一部分：

```
@property
def case_number(self):
    '''
    An formatted number officially designating this case.
    '''
    s = u'%012d' % self.pk
    return s[:3] + '-' + s[3:6] + '-' + s[6:9] + '-' + s[9:]

@property
def case_id(self):
    '''
    An formatted string, consisting of the prefix NCDAC- and the case 
    number, officially designating this case.
    '''
    return 'NCDAC-' + self.case_number

@property
def due_date(self):
    margin = self.report_date + datetime.timedelta(days=30);
    if timeuntil(margin) <= datetime.timedelta(days=1):
        return 'today'
    elif timeuntil(margin) < 0:
        return 'overdue'
    else:
        return timeuntil(margin).split(', ')[0] 
```

这是以行显示数据库结果的模板部分：

```
 {% for case in sent_cases %}
    <tr>
        <td>
            <a href="{% url "case-detail" case.pk %}">
                {{ case.case_number }}
            </a>
        </td>
        <td>{{ case.get_agency_display }}</td>
        <td>{{ case.report_date }}</td>
        <td>
            {% if case.status == "D" %}
            <i class="icon-minus-sign"></i> No
            {% else %}
            <i class="icon-ok-sign"></i> {{ case.ts_submitted|date:"d M Y" }}
            {% endif %}
        </td>
        <td>{{ case.due_date }}</td>
    </tr>
    {% endfor %} 
```

除 {{ case.due_date }} 外，一切正常。它只是一个空块。知道为什么会这样吗？

谢谢。

**更新：**好的，我试图返回“某物”并且它正在工作。我在下面有一个错误-由于某种原因它不会出现异常。`self.report_date`被定义为`report_date = models.DateField(verbose_name='Report Date')`，我试图得到多少天，直到report_date + 30days。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:34:43.550

下面的功能应该可以工作。我首先移动了逾期支票，因为今天的支票也适用于那些日期，因为低于 0 天也低于 1 天。我还删除了 timeuntil 的使用，因为你写了你想要几天。

```
def due_date(self):
    margin = self.report_date + datetime.timedelta(days=30)
    time_left = margin - datetime.datetime.now()

    if time_left < datetime.timedelta(days=0, hours=0, minutes=0):
        return 'overdue'
    elif time_left <= datetime.timedelta(days=1):
        return 'today'
    else:
        return '%s days' % time_left.days 
```

# c# - WCF OperationContract WebInvoke POST 数据为空

> ID：13543603
> 
> 赞同：0
> 
> 时间：2012-11-24T17:22:25.420
> 
> 标签：c#, wcf, post

我一直在`OperationContract`关注我的 WCF 服务；我`HttpContext.Current.Request.Form["param"]`用来检索提交的数据。

```
 [OperationContract]
 [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json)]
 public string authenticateUser() 
```

我的 service.svc 文件包含`<%@ ServiceHost Language="C#" Debug="true" Service="service.login" Factory="System.ServiceModel.Activation.WebScriptServiceHostFactory" %>`

现在 POST 参数显示为空。我已经使用提琴手检查了请求。

这种方法对我有用了数周，直到我迁移到 VS 2012（这是我所做的唯一更改）并且我托管的 Azure 应用程序也可以正常工作。

还有其他方法可以获取 POST 数据吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:37:46.440

2 对此的想法

1）你为什么不像这样为你的方法传递参数？

```
[OperationContract]
[WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json)]
public string authenticateUser(string param) 
```

或者

2）如果这不是您的选择，我想知道放置此属性是否可以启用正常的 ASP.NET 管道，以便表单变量可用

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)] 
```

# php - Mysql：ON DUPLICATE KEY UPDATE 抛出错误

> ID：13543604
> 
> 赞同：0
> 
> 时间：2012-11-24T17:22:29.660
> 
> 标签：php, mysql, mysqli

我有一个漫画网站，我正在尝试实现一个喜欢/不喜欢的系统。每个用户只能对特定漫画投票一次。漫画存储在“漫画”表中，艺术品存储在“艺术作品”中，我有一个带有列（ip、table_name、imgid）的“投票”表。

当有人投票时，我想将他们的 IP 与该图像 ID 和表存储在“投票”表中。如果他们再次尝试投票，它将检查该表以查看他们是否已投票。

另外，我想做一个 ON DUPLICATE KEY UPDATE，如果具有该 IP 的人再次尝试投票，它将更新投票表中的主键“ip”。

```
include 'dbconnect.php';
$site = $_GET['_site'];
$imgid = intval($_GET['_id']);
$input = $_GET['_choice'];

if ($site == "artwork") {
$table = "artwork";
}
else {
$table = "comics";
}

$result = $mysqli->query("SELECT like_count, dislike_count FROM $table WHERE id = $imgid");

list($likes, $dislikes) = $result->fetch_array(MYSQLI_NUM);

$sql = "INSERT INTO 
            votes (ip, table_name, imgid) 
        VALUES 
            (\"".$_SERVER['REMOTE_ADDR']."\", \"$table\", $imgid)
        ON DUPLICATE KEY UPDATE
            ip = VALUES(ip),
            table_name = VALUES(table_name),
            imgid = VALUES(imgid)";

if (!$mysqli->query($sql)) printf("Error: %s\n", $mysqli->error); 

$sql = "SELECT ip FROM votes WHERE ip = '".$_SERVER['REMOTE_ADDR']."' AND table_name = '$table' AND imgid = $imgid";

if ($result = $mysqli->query($sql)) {

    if ($result->num_rows == 0) { 
        if ($input == "like") {
            $sql = "UPDATE $table SET like_count = like_count + 1 WHERE id = $imgid";
            $mysqli->query($sql);           
            $likes++;
        }
        else if ($input == "dislike") {
            $sql = "UPDATE $table SET dislike_count = dislike_count + 1 WHERE id = $imgid";
            $mysqli->query($sql);
            $dislikes++;        
        }
    echo "Likes: " . $likes . ", Dislikes: " . $dislikes;
    }
    else {
        echo "You have already voted";
    }
}
else { 
    printf("Error: %s\n", $mysqli->error); 
}
mysqli_close($mysqli); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:25:57.407

`table`是[MySQL 中的保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。如果要使用它，则必须将其括在反引号中。但是，在您的情况下，我认为您打算`table_name`改用：

```
$sql = "INSERT INTO 
            votes (`ip`, `table_name`, `imgid`) 
        VALUES 
            (\"".$_SERVER['REMOTE_ADDR']."\", \"$table\", $imgid)
        ON DUPLICATE KEY UPDATE
           `ip` = VALUES(`ip`),
           `table_name` = VALUES(`table_name`),
           `imgid` = VALUES(`imgid`)"; 
```

从查询的语法中，您应该考虑使用[`REPLACE`](http://dev.mysql.com/doc/refman/5.1/en/replace.html)：

> REPLACE 的工作方式与 INSERT 完全相同，只是如果表中的旧行与 PRIMARY KEY 或 UNIQUE 索引的新行具有相同的值，则在插入新行之前删除旧行。

因此，您的查询将解决此问题：

```
$sql = "REPLACE INTO 
            votes (`ip`, `table_name`, `imgid`) 
        VALUES 
            (\"".$_SERVER['REMOTE_ADDR']."\", \"$table\", $imgid)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:29:47.257

```
 $sql = "INSERT INTO 
            votes (ip, table_name, imgid) 
        VALUES 
            (\"".$_SERVER['REMOTE_ADDR']."\", \"$table\", $imgid)
        ON DUPLICATE KEY UPDATE
            ip = VALUES(ip),
            table = VALUES(table),
            imgid = VALUES(imgid)"; 
```

您的列是“ip”、“table_name”和“imgid”，因此当您设置 VALUES 时，除了列名作为 VALUES() 的参数 + 您编写了“table = VALUES(table)”并且您的列名是“table_name” . 列“表”在这里不存在。只需将其更改为“table_name = VALUES(table_name)”。

# java - AudioInputSream 给出 nullPointerException

> ID：13543605
> 
> 赞同：0
> 
> 时间：2012-11-24T17:22:31.020
> 
> 标签：java, javasound

我正在尝试用java制作音乐播放器。我已经访问了许多网站并查看了资源以了解它是如何工作的，但是 AudioInputStream 在我最不期望的地方给了我一个 nullPointerException ！似乎以前没有人问过这个问题（此外，我没有足够的代表发表评论，所以我不得不将它作为一个单独的问题），所以我将向您展示出错的代码：

```
Clip clip = AudioSystem.getClip();
AudioInputStream ais = AudioSystem.getInputStream(new File("mywav.wav"));
clip.open(ais);
clip.start(); 
```

我用 Thread 包围了它并启动了 Thread，所以它应该可以充分发挥作用。但是，我在“AudioInputStream ais = AudioSystem.getInputStream(...."

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:16:12.727

1) 你可以从任何地方加载你的声音。名为“声音”的文件夹只是一种方便，例如用于艺术图形的名为“图像”的文件夹。

2）我认为，如果您使用 URL 而不是文件作为输入源，您的运气会更好。

因此：

```
URL url = this.getClass().getResource("mywav.wav");
AudioInputStream aiStream = AudioSystem.getAudioInputStream(url); 
```

出现的一个晦涩难懂的问题（我已经帮助了大约十几个人犯了同样的错误）是，当您按照自己的方式进行操作时，您会创建一个存在 InputStream 的中间步骤。如果您检查 JavaDocs 中的 AudioSystem.getAudioInputStream(url) 与 AudioSystem.getAudioInputStream(inputStream)，您将看到 InputStream 必须是“可标记”文件，并且不能保证这一点。使用 URL 表单，没有这样的测试或要求。

以下是链接，方便阅读。 [http://docs.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream(java.net.URL](http://docs.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream(java.net.URL) ) [http://docs.oracle.com/javase/6/ docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream(java.io.InputStream](http://docs.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream(java.io.InputStream) )

似乎在 Java 7 之前，由于某种原因，系统“知道”如何处理 wav 文件有一个默认值，但是这个默认值不再存在，许多人使用你的方式从 InputStream 获取他们的 AudioInputStream突然发现他们的声音密码坏了。甚至还有一个官方的 Oracle 错误报告：#7095006

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:02:46.877

试试这个

```
private AudioClip clip;
clip = getAudioClip(getCodeBase(), "sounds/mywav.wav");
clip.loop(); 
```

您将需要创建一个名为声音的新文件夹。然后将您的声音文件放在文件夹中。请注意，您所有的声音都必须是 .wav

# iphone - 从 UIColor 获取线性 CGGradient

> ID：13543607
> 
> 赞同：0
> 
> 时间：2012-11-24T17:22:44.340
> 
> 标签：iphone, ios, core-graphics, gradient

我有一个`UIColor`对象，它将成为条形图中条形的颜色。我想把这种颜色变成一个线性渐变，从颜色变为该颜色的较浅版本，然后回到初始颜色。我认为`CGGradientCreateWithColorComponents`是这个功能，但我不知道如何使用它......我如何获得我的颜色的较浅版本？并在渐变中使用它。我对核心图形相当陌生。

谢谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:52:59.803

我`CAGradientLayer`在 Quartz Core 框架中使用。`CGColorRef`它接受可用于形成渐变的颜色数组。`UIColor`下面显示了一些用于处理in的示例代码`color`。您可以修改亮度或其他 HSB 参数以达到您想要的效果。

```
CGFloat hue;
CGFloat saturation;
CGFloat brightness;
CGFloat alpha;
[ color getHue:&hue saturation:&saturation brightness:&brightness alpha:&alpha ]

CAGradientLayer *gradient = [ CAGradientLayer layer ];
gradient.frame = self.bounds;
gradientColorsArray = [ NSArray arrayWithObjects:
    (id) [[ UIColor colorWithHue:1.0 saturation:1.0 brightness:1.0 alpha:1.0 ] CGColor],
    (id) [[ UIColor colorWithHue:1.0 saturation:1.0 brightness:0.75 alpha:1.0 ] CGColor],
     nil ];
gradient.colors = gradientColorsArray;
gradient.startPoint = CGPointMake(0.5f, 0.0f);
gradient.endPoint = CGPointMake(0.5f, 1.0f);
[ self.layer addSublayer:gradient ]; 
```

# android - ListView 项目布局性能

> ID：13543610
> 
> 赞同：-1
> 
> 时间：2012-11-24T17:23:20.117
> 
> 标签：android, android-relativelayout

我需要您可以在图片中看到的视图顺序。我的 XML 布局文件如下。`TextView`with ID`eqlr_tv_question_comment`接管所有可用空间，其他视图不可见。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg_list_row_9patch" >

    <TextView
        android:id="@+id/eqlr_tv_question"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/eqlr_tv_question_comment"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:paddingBottom="@dimen/fifteen_dp"
        android:paddingLeft="@dimen/ten_dp"
        android:paddingTop="@dimen/fifteen_dp"
        android:textColor="@android:color/white"
        android:textSize="@dimen/list_row_text_size" />

    <ImageButton
        android:id="@+id/eqlr_bt_create_comment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/eqlr_tv_question_comment"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:background="@drawable/bg_write_comment"
        android:contentDescription="@string/write_comment"
        android:paddingRight="@dimen/twenty_dp" />

    <TextView
        android:id="@id/eqlr_tv_question_comment"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="@drawable/bg_comment_9patch"
        android:textColor="@android:color/white"
        android:textSize="@dimen/comment_text_size" />

</RelativeLayout> 
```

![所需的视图顺序](../Images/6d263d4fbb75056c51967716cb979532.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:14:29.487

这两个命令是互斥的：

```
 android:layout_above="@+id/eqlr_tv_question_comment"
    android:layout_centerVertical="true" 
```

删除这两个`android:layout_centerVertical="true"`属性。

`centerVertical`优先并被`above`完全忽略。由于`eqlr_tv_question_comment`TextView 是添加的最后一个视图，因此它可能位于其他两个视图之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T09:52:23.253

我之前的想法很糟糕，因为

*   使用嵌套布局会导致 UI 性能不佳，
*   `android:drawableRight``ImageView`如果一个小图标应该位于文本的右侧（除非该图标是可点击的），应该使用该图标来代替

```
<TextView
    android:id="@+id/question"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg_list_row"
    android:drawablePadding="20dp"
    android:drawableRight="@drawable/btn_go"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:textColor="@android:color/white"
    android:textSize="24sp"
    android:textStyle="bold" />

<TextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/question"
    android:background="@drawable/comment"
    android:paddingLeft="10dp"
    android:paddingRight="75dp"
    android:text="@string/short_text"
    android:textColor="@android:color/white"
    android:textSize="15sp" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T18:32:13.047

我更喜欢 2`LinearLayout`比 1 `RelativeLayout`。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/bg_list_row_9patch"
        android:paddingBottom="@dimen/fifteen_dp"
        android:paddingLeft="@dimen/ten_dp"
        android:paddingRight="@dimen/ten_dp"
        android:paddingTop="@dimen/fifteen_dp" >

        <TextView
            android:id="@+id/eqlr_tv_question"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_gravity="center_vertical"
            android:layout_weight="@dimen/exercise_list_row_tv_weight"
            android:textColor="@android:color/white"
            android:textSize="@dimen/list_row_text_size" />

        <ImageView
            android:id="@+id/eqlr_bt_create_comment"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_gravity="center_vertical"
            android:layout_weight="@dimen/exercise_list_row_iv_weight"
            android:background="@drawable/bg_write_comment"
            android:contentDescription="@string/write_comment" />
    </LinearLayout>

    <TextView
        android:id="@+id/eqlr_tv_question_comment"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/bg_comment_9patch"
        android:text="@string/test_indicator_descr"
        android:textColor="@android:color/white"
        android:textSize="@dimen/comment_text_size" />

</LinearLayout> 
```

# html - 带有列表的数据图标

> ID：13543611
> 
> 赞同：1
> 
> 时间：2012-11-24T17:23:30.073
> 
> 标签：html, css, icons

当我使用 data-icon 属性时，我的 css 有点问题。

我使用 :before 属性来做到这一点，我的图标显示在它的顶部，而不是像我想要的那样在左侧。

![在此处输入图像描述](../Images/4693d77a6f973c7c26f671176e9decc6.png)

CSS：

```
[data-icon]:before {
    font-family: 'icons';
    content: attr(data-icon);
    speak: none;
    font-weight: normal;
    -webkit-font-smoothing: antialiased;
} 
```

HTML：

```
<ul class="tags" data-icon="&#x54;">
    <li>Petrole</li>
    <li>Gazoil</li>
    <li>BP</li>
    <li>Car</li>
</ul> 
```

希望你能想通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:55:38.647

您可以绝对相对于其元素定位图标：

```
[data-icon] {
    padding-left: 20px; /* Horizontal space for icon and some gap. */
    position: relative;
    min-height: 14px; /* Height of icon. */
}

[data-icon]:before {
    position: absolute;
    left: 0;
    top: 0;
} 
```

另一种可能的方法是使用`display: inline`或`display: inline-block`为项目和生成的伪元素图标：

```
[data-icon]:before,
[data-icon] > LI {
    display: inline;
} 
```

# php - 为什么在使用移动网络时无法加载 PHP 页面？

> ID：13543619
> 
> 赞同：0
> 
> 时间：2012-11-24T17:24:39.497
> 
> 标签：php, codeigniter-2

这属于那些“奇怪或什么”的情况之一。我已经使用 codeigniter（一个非常轻量级的 MVC php 框架）构建了一个订单处理系统。在许多事情中，它会为订单生成发票。它在硬线互联网连接上完美运行。

但是，如果我通过移动 3G 连接运行我的发票页面，则***只有当页面上有 5 个或更多行项目时，***发票页面才会显示。我得到的错误信息是：

> 由于解析回复时出错，请求的内容 www.mysite/index.php/invoices 无法处理

但是，如果有 4 个或更少的项目，它运行良好.....奇怪还是什么？

我已经用谷歌搜索了所有内容，只能找到对此错误消息的少量引用。

有没有人最模糊的想法可能出了什么问题？或者也许我还能在哪里谷歌？

非常感谢 ！

# ruby-on-rails - rails 3.2.8 验证错误未显示在视图中

> ID：13543632
> 
> 赞同：0
> 
> 时间：2012-11-24T17:25:30.043
> 
> 标签：ruby-on-rails, validation

无法弄清楚如何让验证错误显示在创建或编辑视图中。

在我的模型中，我有：

```
 class Person < ActiveRecord::Base
   attr_accessible :first_name, :last_name

 belongs_to :organization

   validates_presence_of :first_name,  :message => "First name can't be blank"
   validates_presence_of :last_name,  :message => "Last name can't be blank" 
```

在我的控制器中，我有

```
def update
    @person = Person.find(params[:id])
        if @person.update_attributes(params[:person])
       redirect_to(:action => 'list')
    else
      render('edit')
    end
  end 
```

在我看来我有

```
<div>
<%= form_for(:person, :url => {:action => 'update', :id => @person.id}) do |f| %>
<%= f.errors %>

<table>

    <tr>
        <th>First Name:</th>
        <td><%= f.text_field(:first_name) %></td>
    </tr>
    <tr>
        <th>Last Name:</th>
        <td><%= f.text_field(:last_name) %></td>
    </tr>
</table>

    <div>
    <%= submit_tag("Update Person") %>
       </div>
<% end %>
</div> 
```

当我在浏览器中通过将名字字段留空来测试验证时，它不会保存记录并重定向到编辑，但不会显示任何验证错误。但是，当我在控制台中尝试使用时：

```
f = Person.find(1)
#returns record
f.first_name = “”
#returns “”
f.save
#returns false 
f.errors
#returns @message = (:first_name => [“First name can't be blank”]) 
```

所以它在控制台中有效，但在浏览器中无效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T21:20:43.953

在 lynda.com 和 K. Skoglund 的帮助下，我想出了如何修复这些错误。首先，我创建了一个部分来处理错误消息

```
<% if object && object.errors.size > 0 %>
    <div>
        <h2><%= pluralize(object.errors.size, "error") %> 
        prohibited this record from being saved</h2>
        <p>There were problems with the following fields:</p>
        <ul>
        <% object.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
     <% end %> 
```

然后我创建了一个辅助方法来调用表单

```
def error_messages_for (object)
  render(:partial => 'shared/error_messages', 
  :locals => {:object => object})
end 
```

最后，我将辅助方法添加到我创建的用于编辑和新模板的表单部分的顶部：

```
<%= error_messages_for(@person) %>
<table>
    <tr>
        <th>First Name:</th>
        <td><%= f.text_field(:first_name) %></td>
    </tr>
    <tr>
        <th>Last Name:</th>
        <td><%= f.text_field(:last_name) %></td>
    </tr>

    </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:17:22.407

虽然这不能直接回答您的问题，但我强烈建议您停止编写“使用 Rails 进行敏捷开发”类型的代码。熟悉优秀的宝石，例如：

*   体面的曝光
*   简单的模式
*   铁轨

并停止编写大量样板代码来做简单的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:35:35.047

您使用错误的方式显示错误消息。它是`<%= f.error_messages %>`和不是`<%= f.errors %>`。看看这个链接 [rails_rendering_errors](http://guides.rubyonrails.org/active_record_validations_callbacks.html#displaying-validation-errors-in-the-view)

# eclipse - 运行家庭网络中可见的动态 Java 项目

> ID：13543636
> 
> 赞同：0
> 
> 时间：2012-11-24T17:26:29.030
> 
> 标签：eclipse, dynamic

我已经在 Eclipse 中使用 Tomcat 7 实现了 Java 动态项目。我可以在 localhost 上运行它，也可以在 localhost 上从客户端连接。现在，我想将其配置为能够从我家庭网络中的其他机器连接。

我该怎么做？

提前致谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:32:41.377

1）如果您可以从其他机器“ping”您的服务器，那么您应该能够连接到它。

2）通过“Java 动态项目”，我假设您的意思是“网络项目”。

我假设您现在使用“http://localhost:8080/YOUR_URL”在本地连接

3）在另一台机器上试试这个：

a) 从命令行：`ping SERVER_NAME`

b) 从浏览器：`http://SERVER_NAME:8080/YOUR_URL`

4）如果连接失败，请确保您的服务器没有防火墙阻止端口 8080：

*   [http://anythingsimple.blogspot.com/2011/09/windows-firewall-blocks-access-to.html](http://anythingsimple.blogspot.com/2011/09/windows-firewall-blocks-access-to.html)

# c# - XmlSerializer 和 xsi:type

> ID：13543643
> 
> 赞同：4
> 
> 时间：2012-11-24T17:27:19.827
> 
> 标签：c#, .net, xml, serialization

我有以下课程，请注意`B`继承`A`：

```
[XmlInclude(typeof(B))]
public class A
{...}

public class B : A
{...} 
```

当 的实例`B`被序列化时，`xsi:type`会添加属性：

```
<A xsi:type="B"> 
```

为什么会这样？结果应该是公正的`<B>`。

这是序列化的代码：

```
var b = new B();
using (var writer = new XmlTextWriterFull(stream, Encoding.UTF8))
{
    writer.Formatting = Formatting.Indented;
    var s = new XmlSerializer(typeof(B));
    s.Serialize(writer, b);
} 
```

我序列化的其他类不会发生这种情况。是因为这些类位于不同的命名空间中吗？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:48:07.970

试试这个方法：

```
 B b = new B();
    byte[] data = SerializeObject(b);
    File.WriteAllBytes("test.xml", data); 
```

这是序列化的代码

```
 /// <summary>
    /// Serialize object
    /// </summary>
    /// <param name="data"></param>
    /// <returns></returns>
    internal static byte[] SerializeObject(object data)
    {
        XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
        //empty namespace...
        ns.Add("", "");
        XmlSerializer xmlSerializer = new XmlSerializer(data.GetType());
        MemoryStream memStream = new MemoryStream();
        xmlSerializer.Serialize(memStream, data, ns);
        byte[] result = memStream.ToArray();
        memStream.Dispose();
        return result;
    } 
```

序列化的结果是：

```
<?xml version="1.0"?>
<B>
</B> 
```

# objective-c - NSMutableDictionary 为零

> ID：13543646
> 
> 赞同：0
> 
> 时间：2012-11-24T17:27:47.547
> 
> 标签：objective-c, ios6, nsmutabledictionary

所以我创建了一个简单`UITableViewController`的推到`NavigationController`. 我创建了一个`initWithPList`方法，该方法读取 a`plist`并将值存储到`NSMutableDictionary`in a 中的`items` `@property`a`class`中`Settings`。

在方法`NSMutableDictionary`中正确填充`initWithStyle`。但在`viewDidLoad`，是`NSMutableDictionary` `items` `@property`的。`Settings` `NSObject``nil`

我不确定我在做什么错任何想法？？？？

这是一些代码：

**显示** `ViewController`：

```
TestViewController *settingsViewController = [[TestViewController alloc] initWithStyle:UITableViewStyleGrouped]; 
[[self navigationController] pushViewController:settingsViewController animated:YES] 
```

**初始化** `TestViewController`：

```
- (id)initWithStyle:(UITableViewStyle)style{

       if (self = [super initWithStyle:style]) {

           // Init settings property here
           settings = [[Settings alloc] initWithPList];
           // settings.items has a count of 5 here....which is correct
       }
       return self;
  } 
```

`viewDidLoad` **为了** `TestViewController`

```
- (void)viewDidLoad
{
     [super viewDidLoad];

      // Check settings object here to see if it still has items

      // settings.items is nil here for somereason??

      NSLog(@"%i", [settings.items count]); // now it's nil here?

 } 
```

**`Settings` `NSObject`：**_****

 **```
#import <Foundation/Foundation.h>

@interface Settings : NSObject {

    NSMutableDictionary *items;
    NSString *path;
}

@property(nonatomic, retain) NSMutableDictionary *items;
@property(nonatomic, retain) NSString *path;

-(id)initWithPList;

@end 
```

**的片段** `@implementation`：

```
@synthesize items;
@synthesize path;

-(id) initWithPList {

    path = [[self documentsDirectory]stringByAppendingPathComponent:@"Settings.plist"];

    if(![[NSFileManager defaultManager]fileExistsAtPath:path])
    {
        [[NSFileManager defaultManager]copyItemAtPath:[[NSBundle mainBundle]pathForResource:@"Settings" ofType:@"plist"] toPath:path error:nil];
    }

    items = [NSMutableDictionary dictionaryWithContentsOfFile:path];   
    return self;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:14:41.850

```
@synthesize items; 
```

通过这种方式合成，该属性的支持 ivar 被命名为`items`. 所以当你说

```
 items = [NSMutableDictionary dictionaryWithContentsOfFile:path]; 
```

您直接分配给 ivar。在 ARC 之前的手动内存管理中，对 ivar 的任何直接操作都与“保留”属性无关。在 ivar 级别保留/释放完全取决于您。

现在因为您正在通过调用创建字典`+dictionaryWithContentsOfFile:`，所以字典是自动释放的。所以你给了一个持久变量（`items`ivar）一个瞬态对象。噗，没了！

解决方案是取得字典的所有权。一些方便的方法没有非自动释放等价物，所以我们必须`retain`给它们添加一个。但在这种情况下，有一个等效的初始化程序：

```
 items = [[NSMutableDictionary alloc] initWithContentsOfFile:path]; 
```

你拥有所有权。问题解决了。（这也避免了向自动释放池添加任何内容。）

**额外：** 对于与财产同名的 ivar，这仍然是令人困惑的危险。每当您看到 时，很容易误以为您正在获取属性的属性`items`。首先，让我们摆脱 ivars 的显式声明。属性不需要它们。

```
@interface Settings : NSObject

@property(nonatomic, retain) NSMutableDictionary *items;
@property(nonatomic, retain) NSString *path;

- (id)initWithPList;

@end 
```

Apple 的惯例是在 ivars 前加上下划线。如果您使用的是 Xcode 4.5，只需`@synthesize`完全省略该语句即可。对于早期的 Xcode，更改 synthesize 以使用稍微不同的 ivar 名称：

```
@synthesize items = _items; 
```

然后`initWithPlist`可以说

```
 _items = [[NSMutableDictionary alloc] initWithContentsOfFile:path]; 
```

下划线作为提醒：“这是 ivar！内存管理是你的问题！” （所以，你`release`在`dealloc`方法中尽职尽责。）**

# java - 转换时找不到 XML 文件

> ID：13543650
> 
> 赞同：2
> 
> 时间：2012-11-24T17:28:18.453
> 
> 标签：java, xml, dom

我试图通过使用 DOM 修改 xml 文件，这发生了：

```
javax.xml.transform.TransformerException: java.io.FileNotFoundException: file:\D:\myproject\build\web\xml\myFile.xml (The filename, directory name, or volume label syntax is incorrect)
        at org.apache.xalan.transformer.TransformerIdentityImpl.createResultContentHandler(TransformerIdentityImpl.java:263)
        at org.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:296)
        at utils.UpdateUtils.BookUpdate(UpdateUtils.java:36) 
```

这是我的代码

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();

        Document doc = db.parse(f);
        searchAndModify(doc); //modify xml's contents

        Source source = new DOMSource(doc);
        Result result = new StreamResult(f);
        TransformerFactory tff = TransformerFactory.newInstance();
        Transformer trans = tff.newTransformer();
        trans.transform(source, result); 
```

f 是我的 xml，生成的。它解析为 Document doc 就好了。但是，在转换时，会引发异常。

我试图解析到一个新的xml，相同的文件夹，但无济于事：

```
Result result = new StreamResult(new File(path, "newFile.xml"));

javax.xml.transform.TransformerException: java.io.FileNotFoundException: file:\D:\myProject\build\web\newFile.xml (The filename, directory name, or volume label syntax is incorrect) 
```

有人遇到过这个问题或有解决方案吗？请帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-12T05:41:52.333

`StreamResult result = new StreamResult(new File(filepath).getAbsolutePath());`

正在为`file not found exception`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:06:40.037

看来问题出在这里：

```
java.io.FileNotFoundException: file:\D:\myProject\build\web\newFile.xml 
```

在我看来，您的文件名以六个字符开头`file:\`。确保您的文件名以`D:`.

如果您碰巧更喜欢使用 URL 而不是使用文件名，请注意上述不是有效的 URL，因为`/`在所有平台上都要求 URL 使用正斜杠 ( )。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T18:18:17.797

您应该为您的 xml 文件提供正确的文件路径。似乎您正在尝试访问 Web 应用程序中的文件，因此您可以在 web.xml 中指定您的应用程序资源路径

```
<context-param>
  <param-name>xmlPath</param-name>
  <param-value>D:\somefolder\</param-value>
</context-param> 
```

然后使用

```
String xmlFilePath = new File(e.getServletContext().getInitParameter("xmlPath"));
File customerDataFile = new File(xmlFilePath , "newFile.xml"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-16T11:23:10.003

我遇到了同样的问题，我相信我知道它是什么。

对我来说，我有：

```
 // Make a string stream out of the xml.
  Source source = new StreamSource(new ByteArrayInputStream(xml.toString().getBytes("UTF-8")));
  FileOutputStream stream = new FileOutputStream(file);
  StreamResult result = new StreamResult(stream);
  transformer.transform(source, result);
  stream.close(); 
```

效果很好

然后我用

```
 // Make a string stream out of the xml.
  Source source = new StreamSource(new ByteArrayInputStream(xml.toString().getBytes("UTF-8")));
  // Transform it straight into the output file.
  StreamResult result = new StreamResult(file);
  transformer.transform(source, result); 
```

这在我的开发机器上也可以正常工作。

不幸的是，当我在现场安装它时它就坏了。事实证明，`xalan`现场版本比我的测试设置旧。`xalan`旧版本的直接写入`File`s似乎有问题。

@VGR 的[想法](https://stackoverflow.com/a/13545618/823393)似乎很接近。

需要注意的微妙点是*file:\D:\...*实际上应该读取*file:/D:/...*这是 xalan 早期版本的问题。

# android - VFY：无法解析虚方法

> ID：13543653
> 
> 赞同：14
> 
> 时间：2012-11-24T17:28:29.560
> 
> 标签：android, jackson, dalvik

我在我的安卓应用程序中使用杰克逊。

我在构建路径中添加了这两个 jar：

```
jackson-core-asl-1.0.0.jar
jackson-mapper-asl-1.0.0.jar 
```

但是，我一直在我的 Logcat 中看到这个：

```
11-24 18:25:15.093: I/dalvikvm(28842): Could not find method org.codehaus.jackson.map.ObjectMapper.getTypeFactory, referenced from method org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.getJavaType
11-24 18:25:15.093: W/dalvikvm(28842): VFY: unable to resolve virtual method 17967: Lorg/codehaus/jackson/map/ObjectMapper;.getTypeFactory ()Lorg/codehaus/jackson/map/type/TypeFactory; 
```

只能用那个方法。我在 StackOverflow 上搜索过类似的错误，但它们都是：

*   库错误的版本（我的是正确的）
*   不在 /libs 中但在 /lib 中的库（我在 /libs 中有它们）

我的安卓版本是 4.0.3。我将它与`Spring Android`库结合使用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T00:12:46.940

我有类似的问题；假设您使用的是 Eclipse，请尝试以下操作：

1.  右键单击您的项目
2.  转到构建路径>配置构建路径...
3.  单击“订购和导出”选项卡
4.  选中 jar 旁边的框，然后单击 OK
5.  清理并构建您的项目，然后查看它是否有效。

希望这行得通。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-18T02:01:51.290

如果您有当前设备操作系统版本中不存在的代码调用方法，也会发生这种情况。

例如，如果您调用的应用程序中的某个位置（`Settings.Global.getFloat(String)`在 api 17 中添加）并且当前设备正在运行 api 15，您将在日志中看到此警告。

如果您实际尝试调用此方法，将会发生崩溃。不调用这个方法是没有问题的。因此，请确保在调用它之前始终检查当前版本。

```
 private float getAnimationSetting(ContentResolver contentResolver,
                                      String setting) throws Settings.SettingNotFoundException {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
            return getAnimationSettingJB(contentResolver, setting);
        } else {
            return getAnimationSettingLegacy(contentResolver, setting);
        }
    }

    private float getAnimationSettingLegacy(ContentResolver contentResolver,
                                            String setting) throws Settings.SettingNotFoundException {
        return Settings.System.getFloat(contentResolver, setting);
    }

    @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)
    private float getAnimationSettingJB(ContentResolver contentResolver,
                                        String setting) throws Settings.SettingNotFoundException {
        return Settings.Global.getFloat(contentResolver, setting);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-17T07:23:33.137

就我而言，此解决方案无法正常工作。
检查jar文件的代码格式是否适合JDK 1.6，
我通过将我的lib代码格式从1.7更改为1.6发现了这个问题，这个问题将得到解决。

1.  要在 Eclipse 上为 Android 项目添加一个外部 jar，我们可以这样做：
    。项目属性 -> Java Build Path -> Libraries 然后添加那些外部 Jar 文件。
    . Project properties -> Java Build Path -> Order & Export 然后检查那些外部 Jar 文件。
    您可以清理并重新构建目标项目以查看 apk 文件大小并在外部 jar 中测试这些功能。

2.  要在 Eclipse 上为 Android 项目添加一个外部 jar，我们可以这样做：
    。将jar文件复制到android项目的libs中，然后完成。

    对于#1，很容易为一个库处理多个项目。
    对于＃2，它易于使用且无需配置。

    就这样。

# javascript - 无法使用 python cgi 将 javascript 发送的文本写入 .txt 文件

> ID：13543660
> 
> 赞同：2
> 
> 时间：2012-11-24T17:28:58.827
> 
> 标签：javascript, python, xmlhttprequest, cgi

我在尝试将从 javascript 发送的字符串变量写入 cgi 中的 .txt 文件时遇到错误。这是带有错误的python cgi代码：

```
 1  #!/usr/bin/python
          2
          3 import cgi, cgitb
          4 cgitb.enable()
          5
          6 print "Content-type: text/html"
          7 print
          8
          9 print "<html><head><title>Nimed</title></head><br/>"
         10  
         12 formdata = cgi.FieldStorage()
         13 tulemused = formdata.getvalue('tulemused')
         14 f = open('/home/t103692/public_html/prax3/tulemused.txt', 'a')
    =>   15 f.write(tulemused)
         16 f.close()
    f = <open file '/home/t103692/public_html/prax3/tulemused.txt', mode 'a'>, f.write =      <built-in method write of file object>, tulemused = None

    <type 'exceptions.TypeError'>: expected a character buffer object 
          args = ('expected a character buffer object',) 
          message = 'expected a character buffer object' 
```

这是 javascript 代码，我在其中发送变量：

```
 function saadaTulemused() {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("POST","http://dijkstra.cs.ttu.ee/~t103692/cgi-bin/save.py", true);
    xmlhttp.setRequestHeader("content-type","application/x-www-form-urlencoded");
    xmlhttp.send(tulemused);
    } 
```

“tulemused”是字符串变量，它已经包含一些没有空格的文本。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:30:31.500

`tulemused`是`None`并且您不能将其写入文件。

您需要`x-www-form-urlencoded`从 JavaScript 处理程序实际发送数据；目前你只发送价值，没有别的。

为字符串加上前缀`'tulemused='`应该就足够了：

```
xmlhttp.send("tulemused=" + tulemused); 
```

# actionscript-3 - Flash Actionscript 3“限制转弯”

> ID：13543661
> 
> 赞同：-1
> 
> 时间：2012-11-24T17:29:03.927
> 
> 标签：actionscript-3, flash

我正在构建一个随机拼写测验，它工作正常。为了使它更好，我想添加很多单词，但如果我这样做十个，我只希望用户正确拼写其中的 10 个单词。我的问题是我从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T21:56:30.110

假设你有你的话在一个列表中：

```
var words:Array = ['chicken', 'pig', 'cow', 'sheep']; 
```

* * *

## 随机排列单词列表

[Fisher-Yates](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)实现取自[http://bost.ocks.org/mike/shuffle/](http://bost.ocks.org/mike/shuffle/)

```
function shuffle(array) {
  var m = array.length, t, i;

  // While there remain elements to shuffle…
  while (m) {

    // Pick a remaining element…
    i = Math.floor(Math.random() * m--);

    // And swap it with the current element.
    t = array[m];
    array[m] = array[i];
    array[i] = t;
  }

  return array;
}

var shuffledWords:Array = shuffle(words);
trace(shuffledWords); // Prints ['sheep', 'chicken', 'cow', 'pig'] 
```

## 取一片

```
var selectedWords = shuffledWords.slice(0, 2);
trace(selectedWords); // Prints ['sheep', 'chicken'] 
```

* * *

在这种情况下，切片仅包含两个元素，但您可以将其更改为 10 或您想要的任何数字。

现在您可以使用单词 in`selectedWords`来进行拼写测验。

# assembly - 装配 at&t 从用户那里获得 2 个不同的 int 并打印它们似乎无法正常工作。插入它打印第二个数字的两倍

> ID：13543662
> 
> 赞同：1
> 
> 时间：2012-11-24T17:29:12.670
> 
> 标签：assembly, user-input, att

示例输入输出：

```
input

34 54

expected output:

54
34

output:

54 54 
```

这是带注释的代码！

```
#This is a simple "matematical function" program
.section    .rodata #read only data section
str:    .string "Input :\n"

input_format: .string  "%d"
output_format: .string  "%d\n"
.section .bss
input1:  .long
input2:  .long
########
.section  .text     #the beginnig of the code
.globl  main    #the label "main" is used to state the initial point of this program
.type   main, @function # the label "main" representing the beginning of a function
main:   # the main function:

   pushl    %ebp    #save the old frame pointer
   movl %esp,   %ebp    #create the new frame pointer
   #firs number input
   pushl    $input1    # push the ADDRESS of input to have the value stored in it
   pushl    $input_format   # give scanf the ADDRESS of the format string
   call scanf    # call scanf to get number from the user
   addl $8, %esp # clean up the stack
   #second number input
   pushl    $input2    # push the ADDRESS of input to have the value stored in it
   pushl    $input_format   # give scanf the ADDRESS of the format string
   call scanf    # call scanf to get number from the user
   addl $8, %esp # clean up the stack
   # Note the return value of scanf is passed through eax 
   #print the second number
   pushl    input2    # pass the number to printf BY VALUE
   pushl    $output_format  # pass the ADDRESSS of the output format string to printf
   call printf   #call the printf function

   #return from printf:
   movl $0, %eax    #return value is zero (just like in c - we tell the OS that this program finished seccessfully)
   movl %ebp,   %esp    #restore the old stack pointer - release all used memory.

   #print the firs number
   pushl    input1    # pass the number to printf BY VALUE
   pushl    $output_format  # pass the ADDRESSS of the output format string to printf
   call printf   #call the printf function
   #return from printf
   movl $0, %eax    #return value is zero (just like in c - we tell the OS that this program finished seccessfully)
   movl %ebp,   %esp    #restore the old stack pointer - release all used memory
   #end the program
   popl %ebp    #restore old frame pointer (the caller function frame)
   ret  #return to caller function (OS) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T23:52:42.083

像这样更改代码：

```
#This is a simple "matematical function" program
.section    .rodata #read only data section
str:    .string "Input :\n"

input_format: .string  "%d"
output_format: .string  "%d\n"
.section .bss
input1:  .long 24 # CHANGE HERE 
input2:  .long 28 # CHANGE HERE
########
.section  .text     #the beginnig of the code
.globl  main    #the label "main" is used to state the initial point of this program
.type   main, @function
main:   

   pushl    %ebp   
   movl %esp,   %ebp
   andl $-16, %esp # ADD THIS LINE
 ...
 ... 
```

# android - 在 Sherlockfragment 选项卡中处理按钮单击

> ID：13543667
> 
> 赞同：1
> 
> 时间：2012-11-24T17:29:48.967
> 
> 标签：android, android-fragments, actionbarsherlock

希望你们能帮忙，我有一个有标签的活动，每个标签都是一个片段。我正在使用 Sherlockfragment 库并试图弄清楚如何处理片段布局中的按钮。我目前的代码是：

将选项卡添加到选项卡

```
 mTabsAdapter.addTab(mTabHost.newTabSpec("1").setIndicator("Page 1"),1.Fragment.class, null); 
```

片段类：

```
 public class 1 extends SherlockFragmentActivity {

     public static class Fragment extends SherlockFragment {
            Fragment newInstance(int num) {
            Fragment f = new Fragment();
            return f;
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

        }

        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.1, container, false);
            return v;
        }
    }

} 
```

那么布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" >
        <ScrollView xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="wrap_content">
        <LinearLayout android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="wrap_content" xmlns:android="http://schemas.android.com/apk/res/android">
            <TextView android:text="@string/page1" android:layout_width="wrap_content"  android:layout_height="wrap_content"  />
        </LinearLayout>
        </ScrollView>
<ImageButton
        android:id="@+id/btn_1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:src="@drawable/bt1" />
</RelativeLayout> 
```

我在 Sherlock 样本中找不到任何有用的样本，但如果有我错过的样本，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:34:46.007

在片段的 onCreateView() 中，您可以使用 findViewById() 访问片段布局中的不同视图，并为它们分配不同的侦听器，调用相应的方法，例如 setOnClickListener()。您还可以将不同视图的引用存储为片段内的私有变量，以供以后使用。

# python - 使用 Python 将文本数据插入 SQLite 会在字符串格式化...时产生 TypeError。为什么？

> ID：13543669
> 
> 赞同：2
> 
> 时间：2012-11-24T17:30:00.773
> 
> 标签：python, sqlite, newsgroup

我正在尝试搜索新闻组以测试一些基于文本的分组算法，获取成批的新闻组标题并将它们粘贴到 SQLite 数据库中。数据库尽可能简单，所有数据都有文本列，Python 的 nntp 库获取的标头数据始终为每个标头提供 8 个值。除了其中一个之外，所有这些都是字符串，我在将数据插入数据库之前将唯一的非字符串转换为字符串。尽管如此，Python 还是出现了相当无用的“TypeError：并非所有参数在字符串格式化期间转换”错误，这只是说“错误：祝你好运，你靠你自己”的一个边际步骤。

了解字符串到字符串的字符串格式如何出错的人是否比我知道以下代码中出了什么问题更好？

```
import nntplib, sqlite3

# newsgroup settings (modify so that this works for you =)
server = 'news.yournewsgroup.com'
port = 119
username = 'your name here'
password = 'your password here'

# set up the newsgroup and sqlite connections
connection = nntplib.NNTP(server, port, username, password)
newsgroup = "comp.graphics.algorithms"
connection.group(newsgroup)
database = sqlite3.connect(newsgroup + ".db")

# create a table definition if it doesn't exist yet
try:
  # SQLite doesn't actually have data types. Everything as stored as plain text.
  # And so is newsgroup data. Bonus!
  database.execute("""CREATE TABLE headers (articleNumber text, subject text,
                                            poster text, date text, id text,
                                            references text, size text,
                                            lines text)""")
except:
  # table definition already exists. Not actually an error.
  pass

# Get the group meta-data, and set up iterator values for running
# through the header list.
resp, count, first, last, name = connection.group(newsgroup)
total = int(last) - int(first)
step = 10000
steps = total / step;
articleRange = first + '-' + str(int(first)+step)

# grab a batch of headers
print "[FETCHING HEADERS]"
resp, list = connection.xover(first, str(int(first)+step))
print "done."

# process the fetched headers
print "[PROCSSING HEADERS]"
for entry in list:
  # Unpack immutable tuple, mutate (because the references list
  # should be a string), then repack.
  articleNumber, subject, poster, date, id, references, size, lines = entry
  argumentList = (articleNumber, subject, poster, date, id, (",".join(references)), size, lines)

  try:
    # try to chronicle the header information. THIS WILL GO WRONG AT SOME POINT.
    database.execute("""INSERT INTO headers (articleNumber, subject, poster,
                                             date, id, reference, size, lines)
                                    VALUES ('?', '?', '?',
                                            '?', '?','?', '?', '?')"""
                                    % argumentList)

  except TypeError as err:
    # And here is an irking point with Python in general. Something went
    # wrong, yet all it tells us is "not all arguments converted during
    # string formatting". Despite that error being generated at a point
    # where the code knows WHICH argument was the problem.
    print err
    print type(argumentList[0]), argumentList[0]
    print type(argumentList[1]), argumentList[1]
    print type(argumentList[2]), argumentList[2]
    print type(argumentList[3]), argumentList[3]
    print type(argumentList[4]), argumentList[4]
    print type(argumentList[5]), argumentList[5]
    print type(argumentList[6]), argumentList[6]
    print type(argumentList[7]), argumentList[7]
    # A quick print set shows us that all arguments are already of type
    # "str", and none of them are empty... so it would take quite a bit
    # of work to make them fail at being legal strings... Wat?
    exit(1)
print "done."

# cleanup
database.close()
connection.quit() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:38:16.550

该错误告诉您的是，您为字符串格式 ( `%`) 提供了 n 个值，但格式字符串预期小于 n 个值。具体来说，这个字符串：

```
"""INSERT INTO headers (articleNumber, subject, poster,
                        date, id, reference, size, lines)
          VALUES ('?', '?', '?',
                  '?', '?','?', '?', '?')""" 
```

不期望-style 字符串格式的*任何*值。`%`里面没有`%d`，没有`%s`，什么都没有。相反，`?`占位符用于 DB API 的参数替换。您不需要使用`%`操作员调用它（这里根本不需要它）。而是将值序列作为第二个参数传递给`execute`调用。此外，您需要从占位符中删除引号，以表明它们应该是占位符，而不是恰好包含单引号字符的字符串文字。总之：

```
database.execute("""
    INSERT INTO headers (articleNumber, subject, poster,
                         date, id, reference, size, lines)
    VALUES (?, ?, ?, ?, ?, ?, ?, ?)""", # note: comma, not %
     argumentList) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:33:23.903

您不想那样做 - 它不安全且容易出错。

您需要使用以下模式：

```
argumentList = [1, 2, 3, 4, 5, 6, 7, 8] # or whatever
insert_stament = """INSERT INTO headers (articleNumber, subject, poster,
                                         date, id, reference, size, lines)
                                VALUES (?, ?, ?,
                                        ?, ?, ?, ?, ?)"""

cursor.execute(insert_statement, argumentList) 
```

# javascript - 不安全的 javascript 尝试访问框架（使用 jQuery）

> ID：13543672
> 
> 赞同：0
> 
> 时间：2012-11-24T17:30:14.010
> 
> 标签：javascript, jquery, google-chrome

网站在这里[http://thomaspalumbo.com/tests/](http://thomaspalumbo.com/tests/)

代码：

```
 <script type="text/javascript"   src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
    <script  type="text/javascript" src="jquery.jplayer.min.js"></script> 

    <script type="text/javascript">
    function playSound() {
    var sounds = new Array(
                "bells.mp3"
                  );
 $('#soundDiv').html("<embed src=\""+sounds[Math.floor(Math.random()*         (sounds.length+1))]+"\" hidden=\"true\" autostart=\"true\" />");
return false;
};

</script>

</head>

<body>

<button onclick="javascript:playSound()">Button</button>
 <div id="soundDiv"></div> 
```

有什么帮助吗？当我单击按钮并且声音仍在播放时，我通常会收到此错误。此外，如果不重新加载页面，我也无法获得执行该功能的按钮。换句话说，我不希望页面重新加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:45:42.537

看起来您的网站已被 劫持`dsnextgen.com`，因此您必须先修复该问题。这是控制台错误...

> 不安全的 JavaScript 尝试 从 URL [http://dsnextgen.com/?domainname=thomaspalumbo.com&a_id=101686&session_token=AG06ipBDokkZI0hxmF11k0IzVtiy5sNPSQoTCJHXlb-U6LMCFXPptgodkXEANRgEcTdmdWKwLMCHoDevy的框架访问具有 URL](http://dsnextgen.com/?domainname=thomaspalumbo.com&a_id=101686&session_token=AG06ipBDokkZI0hxmF11k0IzVtiy5sNPSQoTCJHXlb-U6LMCFXPptgodkXEANRgEcTdmdWKwHHoDeMvy4LMC) [http://thomaspalumbo.com/tests/](http://thomaspalumbo.com/tests/)的框架 。域、协议和端口必须匹配。

由于此错误仅在多次单击该按钮时才会弹出，因此我会尝试使用不同的`mp3`文件来查看此错误是否消失。

更多信息： [http ://www.microsoft.com/security/portal/threat/encyclopedia/Entry.aspx?Name=Trojan:JS/IframeRef](http://www.microsoft.com/security/portal/threat/encyclopedia/Entry.aspx?Name=Trojan%3aJS/IframeRef)

* * *

顺便说一句：它是 jQuery，所以我会利用这种能力来摆脱内联 JavaScript。

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.jplayer.min.js"></script>  
    <script type="text/javascript">

        function playSound() {
            var sounds = new Array(
                "bells.mp3"
            );
            $('#soundDiv').html("<embed src=\""+sounds[Math.floor(Math.random()* (sounds.length+1))]+"\" hidden=\"true\" autostart=\"true\" />");
            return false;
        };

        $(document).ready(function() {
            $('button').click(function() {
                playSound();
            });
        });

    </script>

</head>
<body>

    <button>Button</button>
    <div id="soundDiv"></div> 
```

# javascript - 使用 PageMethod 更新下拉列表

> ID：13543674
> 
> 赞同：0
> 
> 时间：2012-11-24T17:30:35.217
> 
> 标签：javascript, drop-down-menu, pagemethods

我需要使用从服务器端方法返回的对象列表填充 DropDownList。由于这不应该导致页面刷新，我正在使用 PageMethods。当我调试时，我可以看到 onSuccess 函数正在被调用，但下拉列表没有被填充。对象列表也从服务器端方法成功传递。我不知道出了什么问题。

```
 function onsuccess(studList)
    {

            var ddl = document.getElementById('ddlStud');
            var count = ddl.options.length;
            while (ddl.options.length > 0)
            {
                ddl.options.remove(0);
            }

            for (var i = 0; i < studList.length; i++)
            {

                var option = document.createElement('<option value="' + studList[i].id + '">');
                document.getElementById('ddlStud').options.add(option);
                option.innerText = studList[i].StudName;

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:06:57.657

将您的 for 循环更新为：

```
 for (var i = 0; i < studList.length; i++)
        {
            var option = document.createElement('option');
            option.value= studList[i].id;
            option.innerText = studList[i].StudName;
            document.getElementById('ddlStud').options.add(option);
        } 
```

# ios - IOS自定义定价？

> ID：13543679
> 
> 赞同：-1
> 
> 时间：2012-11-24T17:30:49.610
> 
> 标签：ios, customization

我们是否仅限于定价层中的价格？例如 1.99 美元、2.99 美元、3.99 美元？我看不到任何地方可以进行自定义定价。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:32:48.537

是的，您受限于 Apple 定价矩阵。请参阅下面的链接，了解您选择的定价层级直接获得的收益有多少，以及有关不同定价层级的一些其他信息：

[http://www.app-machine.com/hmcms_media/public/files/ApplePreis_Matrix.pdf](http://www.app-machine.com/hmcms_media/public/files/ApplePreis_Matrix.pdf)

# android - 向右对齐视图不起作用

> ID：13543680
> 
> 赞同：0
> 
> 时间：2012-11-24T17:30:55.010
> 
> 标签：android, user-interface, textview, alignment

我正在尝试将**相对布局**中的两个文本视图设置在右侧，但没有运气..它们位于布局的左侧：

```
 <LinearLayout
            android:id="@+id/top_lay2"
            android:layout_width="fill_parent"
            android:layout_marginTop="10dp"
            android:orientation="vertical"
            android:layout_height="wrap_content"
            android:background="@drawable/customrect"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp">

<TextView
            android:id="@+id/font"
            android:layout_marginTop="6dp"
            android:textSize="36sp"
            android:layout_gravity="center"
            android:gravity="center"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="@color/white1"
            android:text="AllAroundMe"
            style="@style/shadow"
         />
        <RelativeLayout 
            android:background="@drawable/roundedbutton"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="4dp"
            android:layout_marginRight="4dp">

                <TextView

            android:id="@+id/desc1"
            android:color="@color/white1"
            android:gravity="right"
            android:layout_alignParentRight="true"
            android:layout_gravity="right"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/desc1"
            android:textColor="@color/tabDark"
            android:padding="6dip"

    />
        <TextView
                    android:id="@+id/desc2"
                    android:color="@color/white1"
                    android:gravity="right"
                    android:layout_below="@id/desc1"
            android:layout_alignParentRight="true"
            android:layout_gravity="right"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/desc2"
            android:textColor="@color/tabDark"
            android:textStyle="bold"
            android:padding="6dip"/>

           <ImageButton

            android:id="@+id/login"
             android:layout_below="@id/desc2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:src="@drawable/facebooklogin"
             android:onClick="LoginClick"
             android:background="@null"
             android:layout_centerHorizontal="true"/>
                </RelativeLayout>
            <View
                android:layout_below="@id/top_lay2"
                    android:layout_width="fill_parent"
        android:layout_height="5dip"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:51:19.157

嗯，我将您的布局复制到布局设计器并删除了一些不可用的可绘制对象并用普通文本替换了不可用的字符串，它看起来很好（至少右对齐）：

![在此处输入图像描述](../Images/29c7c118bf23af9f021c693b5d0fe897.png)

这是我的整个布局 xml（请注意 LinearLayout 中的 xmlns:android，这在您的代码中丢失了，也许这会有所不同？）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/top_lay2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="10dp"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/font"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="6dp"
        android:gravity="center"
        android:text="AllAroundMe"
        android:textColor="#ffffffff"
        android:textSize="36sp" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp" >

        <TextView
            android:id="@+id/desc1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_gravity="right"
            android:gravity="right"
            android:padding="6dip"
            android:text="desc1"
            android:textColor="#ff888888"
            android:color="#ffffffff" />

        <TextView
            android:id="@+id/desc2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@id/desc1"
            android:layout_gravity="right"
            android:gravity="right"
            android:padding="6dip"
            android:text="desc2"
            android:textColor="#ff888888"
            android:textStyle="bold"
            android:color="#ffffffff" />

        <Button
            android:id="@+id/login"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/desc2"
            android:layout_centerHorizontal="true"
            android:text="Login"
            android:onClick="LoginClick" />
    </RelativeLayout>

    <View
        android:layout_width="fill_parent"
        android:layout_height="5dip"
        android:layout_below="@id/top_lay2" />

</LinearLayout> 
```

# c - 组装模数

> ID：13543683
> 
> 赞同：3
> 
> 时间：2012-11-24T17:31:24.900
> 
> 标签：c, assembly, modulo

我已经尝试了 3 个多小时来弄清楚下一个程序出了什么问题。我要做的就是将x除以y，然后打印除法和模数的结果。此外，模数的 printf 和里面的 % 都搞砸了。有谁知道如何解决这个问题？我正在组装 IA32。假设我已经从用户那里得到了 x 和 y。

```
.section    .rodata
format1:    .string "Div : %d / %d = %d\n"
format2:    .string "Mod : %d % %d = %d\n"

    .text
.globl  main    
    .type   main, @function 

# operation divide
movl    x,  %eax
cltd
idivl   y
pushl   %eax
pushl   y
pushl   x
pushl   $format1
call    printf

# operation modulo
pushl   %edx
pushl   y
pushl   x
pushl   $format2
call    printf 
```

我知道模数应该保存在 %edx 寄存器中，为什么它不起作用？非常感谢！丁：

编辑：好的，所以我将 %edx 保存在 %ebx 中，现在模可以正常工作。（如果我打印 %edx 中的内容，它会给出正确的模数）但是打印到屏幕上仍然不是我想要的。这是 x=2, y=4 的输出：

```
Divide : 2 / 4 = 0
Modulo : 2 %d = 4 
```

我希望它看起来像这样：

```
Divide : 2 / 4 = 0.50
Modulo : 2 % 4 = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:45:17.260

EAX、ECX 和 EDX 是调用者保存的寄存器，这意味着**您**必须在调用之前保存它们`printf`，这可以随意更改这些寄存器中的任何一个而不恢复它们。

另一方面，EBX、ESI 和 EDI 是被调用者保存的，这意味着每个函数都需要将它们恢复到调用前的原始内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T17:46:03.583

根据[Intel386 的 System V ABI](http://www.sco.com/developers/devspecs/abi386-4.pdf)，允许使用函数`%ecx`并将`%edx`其作为临时寄存器，并且被调用者不必为调用者保留它们的值。这意味着，`printf`允许覆盖 的值`%edx`，从而破坏 reminer 的值。您可以通过转移`%edx`to`%esi`或的值来保存它`%edi`，根据规范，它们的值必须由被调用者保留（它们“属于”调用者）。

这就是说，你有一个错误`format2`。您应该将其更改为：

```
format2:    .string "Mod : %d %% %d = %d\n" 
```

字面`%`量必须按照`%%`格式字符串的形式写入，否则将被 . 解释为格式说明符`printf`。

# ruby - 可以将 Ruby HTTPI 库配置为遵循重定向吗？

> ID：13543685
> 
> 赞同：4
> 
> 时间：2012-11-24T17:31:37.893
> 
> 标签：ruby, savon, httpi

我正在使用[Savon](http://savonrb.com/)库，该库又使用[HTTPI](https://github.com/savonrb/httpi)，但*HTTPI*仅将 HTTP 状态代码 200..299 视为成功。不幸的是，我连接的 SOAP 服务器使用*HTTP 302 Found*将其客户端重定向到其他 URL。有没有办法可以配置*HTTPI*以遵循 HTTP 重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-17T04:19:45.493

尝试在请求对象上使用“follow_redirect=true”。

```
 request = HTTPI::Request.new
    request.follow_redirect= true
    ... 
```

我自己也有同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:25:22.987

阅读芥末代码我发现[了这条线](https://github.com/savonrb/wasabi/blob/2739bab71bfe4e8de51e62ca9309bc214c309ddc/lib/wasabi/resolver.rb#L38)，它调用[了这条线](https://github.com/savonrb/httpi/blob/bd2981d3a9d24c0263e341ce7c4ad2f689cef726/lib/httpi/response.rb#L29)，它调用[了这条线](https://github.com/savonrb/httpi/blob/bd2981d3a9d24c0263e341ce7c4ad2f689cef726/lib/httpi/response.rb#L16)，所以我认为你可以用一个残酷但有效的常量重新定义来解决：

```
HTTPI::Response::SuccessfulResponseCodes = HTTPI::Response::SuccessfulResponseCodes.to_a << 302 
```

您可以放心地忽略不断的重新定义警告（您可以使用`Kernel.silence_warnings{ ... }`）。

无论如何，我建议您向[httpi](https://github.com/savonrb/httpi)提出问题；我认为这应该是预期的行为

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-29T15:33:32.243

对于像我从谷歌搜索中一样来到这里的任何人。Savon 2.11 通过客户端上的全局配置值支持这一点：

```
follow_redirects: true 
```

# c++ - 当一个对象的死亡使另一个对象生病时如何保持封装

> ID：13543687
> 
> 赞同：1
> 
> 时间：2012-11-24T17:31:39.287
> 
> 标签：c++, design-patterns, encapsulation

当一个对象在`b`内部引用并使用一个`a`不属于它的对象时，死亡`a`会让人`b`生病。这是一个最小的例子来说明这一点：

```
#include <iostream>

const int my_int = 5;

class A {
  private:
    int n_;
  public:
    int n() const { return n_; }
    A(int);
};

A::A(int n__) : n_(n__) {}

class B {
  private:
    const A *ap_;
  public:
    int m() const { return 1 + ap_->n(); }
    explicit B(const A *);
};

B::B(const A *const ap__) : ap_(ap__) {}

int main()
{
    std::cout << "Will put an unnamed A on the heap.\n";
    A *const p = new A(my_int);
    std::cout << "Have put an unnamed A on the heap.\n";
    std::cout << "p->n() == " << p->n() << "\n";
    B b(p);
    std::cout << "b. m() == " << b. m() << "\n";
    std::cout << "Will delete  the unnamed A from the heap.\n";
    delete p;
    std::cout << "Have deleted the unnamed A from the heap.\n";
    std::cout << "b. m() == " << b. m() << "\n"; // error
    return 0;
} 
```

当然，可以通过`b`保留副本`a`而不是指向它的指针来解决此问题，但假设它`b`不希望保留副本（因为`a`占用大量内存或出于其他原因）。假设`b`更喜欢仅引用现有的`a`. 当`a`悄悄地死去时，`b`永远不会注意到。然后，当`b`尝试使用时`a`，会产生不可预测的行为。

在我的电脑上，该示例的输出恰好是这样的：

```
Will put an unnamed A on the heap.
Have put an unnamed A on the heap.
p->n() == 5
b. m() == 6
Will delete  the unnamed A from the heap.
Have deleted the unnamed A from the heap.
b. m() == 1 
```

但是，在您的计算机上，结果可能是段错误或谁知道。

我的示例的问题似乎在于示例间接打破了 的封装`b`，让程序员记住 的持续有效性`b`取决于 的持续存在`a`。当程序员忘记时，程序就会中断。*因此，即使类型 A 本身并不关心类型 B ，*受骚扰的程序员`b`在工作时也必须牢记。如您所知，面向对象的程序员宁愿不必记住这些琐事，如果他们可以提供帮助的话。`a`

 *我在编程时时不时地以更复杂的形式遇到这个问题。我今天又遇到了。有人认为，不知何故，应该存在一种优雅的设计模式来维护对 的适当封装，将记住 对 存在的依赖`b`的责任从程序员转移到编译器——并且该模式从根本上应该包含更少的东西比智能指针和成熟的引用计数更详细。然而，也许我错了。也许这正是它们引用计数的智能指针的用途。无论哪种方式，我都不知道解决问题的正确模式，也不知道修复代码的最佳方法。`b``a`

如果你知道，你会告诉它吗？

[这](https://stackoverflow.com/a/1351283/1275653)是我在 Stackoverflow 上注意到的最相关的答案；但是，除了使用我不理解的一两个词之外，无论如何，那个答案似乎并没有回答这个问题。

（我的编译器仍然不能很好地支持 C++11，但是如果 C++11 带来了专门用于解决我的问题的功能，那么我当然应该有兴趣了解它。但是，诚然，我的问题主要是关注 OO/作用域基础。这个问题对底层设计模式甚至比对最新编译器的这个或那个新特性更感兴趣。）

**读者须知**

一些很好的答案为这个问题增光添彩。如您所知，在 Stackoverflow 上，提问者有责任*接受*最佳答案，以便（当您在数月或数年后阅读此书时）您不必搜索它。

然而，最能回答这个问题的是两个答案的组合。你应该同时阅读：

*   @MatthieuM. 的[回答](https://stackoverflow.com/a/13543871/1275653)重新共享所有权和观察者模式；和
*   @JamesKanze 的[回答](https://stackoverflow.com/a/13543914/1275653)关于为什么以及何时可能首选观察者模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T17:53:38.680

这取决于为什么要删除第一个对象。如果只是因为有人认为没有人在使用它，那么你也许可以避免智能指针的问题——你仍然需要注意循环，但如果使用动态分配的原因仅仅是为了避免过于昂贵的副本，该对象可能只是纯数据，并且没有任何指针，因此您很安全。

当然，更多时候，对象被删除的原因是程序逻辑需要它，而通过某种智能指针延迟删除会破坏程序逻辑。在这种情况下，必须通知具有指向该对象的指针的类该对象已被删除，这是一个后果。在这种情况下，观察者模式是标准解决方案；你的对象`b`会在该`A` 对象上注册，被告知它的消亡，然后做它必须做的任何事情。如果我们采取简单的情况，您的`B`班级是`Session`，`A`班级是`Connection`。如果实际连接断开，则`Connection`班级将被告知，并自毁。这样做时（在其析构函数中），它会通知所有向它注册的对象。如果您在服务器上，`Session`该类可能会记录问题并自毁——断开的连接会终止会话。但是，在客户端中，`Session`该类可能会尝试创建一个新的`Connection`，并且只有在失败时才中止会话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T17:35:59.890

聪明的解决方案是使用智能指针，如果你真的只需要保留一个对象，而不是多个副本！

C++11 为您提供[多种选择](http://en.cppreference.com/w/cpp/memory)：

*   `std::unique_ptr`
*   `std::shared_ptr`
*   `std::weak_ptr`

就您而言，我认为您需要第二个：`std::shared_ptr`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T17:49:41.687

我可以想到两个特定的解决方案：

*   共享所有权
*   观察者模式

在共享所有权的解决方案中， 的生命周期`a`是由*所有者*数量的计数器决定的，只有在没有所有者的情况下`a`， 的生命周期才会结束。这通常使用`std::shared_ptr<A>`.

在观察者解决方案中，当`a`被传递给时`b`，`a`记住`b`持有对它的引用。然后，当`a`死亡时，它要么立即通知，要么`b`留下一个“令牌”，`b`以便在下一次访问尝试时得到通知。

直接通知通常通过维护当前引用者列表并在销毁时调用它们中的每一个来处理（因此它们可以删除它们的引用）。这是典型的观察者模式。

间接通知通常是通过一个代理对象来处理的`a`。当`a`代理死亡时通知（O（1））并且当`b`尝试访问`a`它时必须通过代理。自己实现这一点有很多困难，因此更好的方法是使用标准设施：`std::shared_ptr`这次结合`std::weak_ptr`.

最后，这些解决方案是不等价的。

*   共享所有权意味着活着时`a`不能死，`b`而观察者计划允许`a`先死
*   直接通知可以`b`立即对`a`' 的死亡做出反应，但同时可能会使程序更加脆弱（在`a`' 的析构函数执行期间，您不应抛出任何异常）

选择你自己的毒药:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T17:47:47.393

您正在寻找的模式是“如果您拥有一个对象，请不要放弃对它的非拥有引用然后销毁它。” 我不认为它有更好的名字，但它真的只是很好的 C++ 礼仪。如果您放弃指向可以保留它的对象的指针，您需要知道该对象可能依赖于保持有效的指针。在这种情况下，您只需确保对象的生命周期超过非拥有对象的生命周期。

如果您要传递给一个函数，并且您可以假设该函数不使用全局状态，那么我不会担心它 - 一旦函数返回，您应该假设它是使用该指针完成的。

正如 Nawaz 所说，停止担心这一点的真正方法是使用具有适当所有权语义的智能指针。如果要将所有权转移给另一个对象，请使用`std::unique_ptr`. 如果要共享所有权，请使用`std::shared_ptr`. 如果您想使用非拥有的原始指针，我不会说*不要*，但至少要知道它可能导致的问题。

* * *

为了避免过早意外删除对象，您*可以*执行以下操作：

```
const std::unique_ptr<A> p(new A(my_int));
B b(p.get());
// the A object will be destroyed at the end of the current scope 
```

在这里，您没有`std::shared_ptr`. 我不确定我真的会推荐它。完全智能比半智能要好得多。与`const std::unique_ptr`a 具有相似的所有权语义`boost::scoped_ptr`：它表示“我拥有这个，其他人永远不会拥有”。不同之处在于您将无法像`reset`在.`const std::unique_ptr``boost::scoped_ptr`*

# android - 在列表顶部添加持久部分的方法是什么？

> ID：13543689
> 
> 赞同：2
> 
> 时间：2012-11-24T17:31:48.067
> 
> 标签：android, listview

我真的不确定如何解决这个问题。我想在我的列表顶部有 3 - 4 个“列表项”，它们永远不会改变，但随着列表滚动。列表的其余部分使用 ListAdapter 填充并且可以完美运行。

人们以什么方式做到这一点？我考虑过使用 ScrollView 而不是 List，但代码似乎比应有的更长和更难。据我所知，您也不能在 ScrollView 中有 ListView。我是否需要更改我的适配器，以便如果我在位置 < 4 的情况下调用“getView”，那么我会传递与列表其余部分无关的视图之一？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:23:52.783

我认为您应该使用ListView 中的[addHeaderView()](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)方法。您可以添加许多不同的标题，并且标题始终随列表滚动。所以只需尝试添加四个标题。

# codeigniter - 如何在codeigniter中管理多模板？

> ID：13543691
> 
> 赞同：0
> 
> 时间：2012-11-24T17:31:51.317
> 
> 标签：codeigniter

我正在开发支持 codeigniter 模板的网站。就像 joomla / drupal 我该怎么做？我当前的站点结构是每个控制器都有自己的模板。页眉和页脚模板是单独的文件。谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:57:28.197

这是在 codeigniter 中进行模板化的一种简单灵活的方法（通过 jeffrey 方式，nettuts ）所以在你的控制器中，在方法的最后......

```
 $data['content01'] = 'aboutus';
 $data['content02'] = 'contactform';
 $this->load->view( 'template_web', $data ); 
```

next 在您的视图文件夹中，在此示例中，该文件称为：template_web.php

```
 <?php 
        // sample header
            // you can also use to load nav bars, etc 
        $this->load->view('header'); 

            // check if unique content has been passed to template
            // you can have as many of these as you need
        if(isset($content01))
        $this->load->view($content01);

        if(isset($content02))
        $this->load->view($content02);

        if(isset($content03))
        $this->load->view($content03);

        // sample for a default footer
        $this->load->view('footer'); 
```

所以我们正在加载一个默认的页眉和页脚，然后内容来自控制器

很酷的是，如果您需要，您可以使用相同的设置从控制器中快速调用不同的模板

```
 $data['content01'] = 'contactform';
 $this->load->view( 'template_admin', $data ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:33:52.550

看看 Phil Sturgeon 的 CodeIgniter-Template。

> CodeIgniter-Template 是一个模板库，可帮助您使用 CodeIgniter 构建复杂的视图。它具有使用主题和模块的逻辑，并有助于添加您的标题、元数据、面包屑和部分视图。

[https://github.com/philsturgeon/codeigniter-template](https://github.com/philsturgeon/codeigniter-template)

# google-chrome-extension - 如何使用 Chrome 内容脚本，匹配 URL 查询参数的模式？

> ID：13543693
> 
> 赞同：2
> 
> 时间：2012-11-24T17:31:52.453
> 
> 标签：google-chrome-extension, content-script

我正在尝试制作带有内容脚本的 Chrome 扩展程序，仅匹配 Google-Images 搜索结果页面。
它们（据我所知）`&tbm=isch`在 URL 参数中被标识。但是，匹配模式似乎只在路径上起作用。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T02:45:50.203

有两种方法：
（1）您可以使用[manifest 中](http://developer.chrome.com/extensions/content_scripts.html#match-patterns-globs)[的`include_globs`](http://developer.chrome.com/extensions/content_scripts.html#match-patterns-globs)属性。像这样的东西应该工作：

```
{
    "content_scripts": [ {
        "exclude_globs":    [  ],
        "include_globs":    [ "https://www.google.com/search*tbm=isch*" ],
        "js":               [ "YOUR_SCRIPT.user.js" ],
        "matches":          [ "https://www.google.com/search*"
                            ]
    } ],
    ... ... 
```

(2) 您可以在内容脚本的顶部放置这样的测试：

```
if ( ! /\btbm=isch\b/i.test (location.search) ) {
    return;
} 
```

* * *

前者可能更有效，但可能更难调整。
您也可以使用这些方法的组合。

# c# - 正则表达式匹配和子字符串合二为一？

> ID：13543695
> 
> 赞同：0
> 
> 时间：2012-11-24T17:31:54.013
> 
> 标签：c#, regex

我有一个 HTML 源作为输入，想知道网站是用什么 CMS 制作的。许多 CMS 将他们的名字留在元标记中，如下所示：

```
<meta name="Generator" content="MY CMS" /> 
```

我可以得到这样的结果：

```
 Match match = Regex.Match(html, ".*(?i)meta.*generator.*");
        match = Regex.Match(match.ToString(), "content.*\".*\"");
        match = Regex.Match(match.ToString(), "\".*\""); 
```

给我“我的 CMS”

但是有没有办法将它缩短为一个 Regex.Match？

请注意，元标记可能是这样的：

```
<meta content="MY CMS" name="Generator" /> 
```

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:36:45.657

```
var regex = new Regex(@"<meta\s+name=""Generator""\s+content=""([^""]+)""", RegexOptions.IgnoreCase);
var match = regex.Match(html);
var generator = match.Groups[1].Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:37:00.417

尝试以下操作：

```
Regex regex = new Regex(@"<meta[^>]+content\s*=\s*['"]([^'"]+)['"][^>]*>");
Match match = regex.Match(input); 
```

该值在第 1 组中。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T17:54:44.670

正则表达式不是解析 HTML 文件的好选择。

HTML 并不严格，其格式也不规则。

使用[htmlagilitypack](http://htmlagilitypack.codeplex.com/)

正则表达式用于**正**则表达式而不是**不规则**表达式

您可以使用此代码来检索它`HtmlAgilityPack`

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(html);

var content= doc.DocumentNode
                .SelectSingleNode("//meta[@name='Generator']")
                .Attributes["content"].Value; 
```

# ruby-on-rails - ruby assembla api - 不采用提供的身份验证详细信息。- INVALID AUTH 错误（我使用了 req.basic_auth(key,pwd)

> ID：13543699
> 
> 赞同：-1
> 
> 时间：2012-11-24T17:32:20.503
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

```
 require 'net/http'
    uri = URI("https://api.assembla.com/v1/activity.json")
    req = Net::HTTP::Get.new(uri.request_uri)
    req.basic_auth "api key", "api secret"

    res = Net::HTTP.start(uri.host, uri.port, :use_ssl => uri.scheme == 'https') { |http|
        http.request(req)
    }

    puts res.body 
```

输出 ：

```
 {"error":"invalid_auth","error_description":"Please provide authentication data (API key/secret pair or a valid access token)"} 
```

此外，从活动 api 中，我们可以添加 from、to、space_id 等参数。但是，只有在使用单个参数时才能获得正确的结果。当我想获得特定日期的结果时，我需要同时使用 from 和 to ，我这样使用：“url?from=frmdate&to=todate”，但没有根据参数获得正确的输出。（用 curl 试过这个，但是由于我无法正确发送身份验证数据，ruby 根本无法工作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:48:53.880

```
 req.basic_auth "api key", "api secret" 
```

删除上面的行并添加下面的行，上面的行用于身份验证，如方法名称所述。：

```
 req.add_field 'X-Api-Key', 'your key'
   req.add_field 'X-Api-Secret', 'your secret' 
```

在这里，您必须将这些键作为标题发送。

[http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTPHeader.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTPHeader.html)

# javascript - 如何避免使用 parent() 函数

> ID：13543705
> 
> 赞同：-1
> 
> 时间：2012-11-24T17:32:49.303
> 
> 标签：javascript, html, parent-child

我正在尝试从具有以下结构`$('.sent_comment_action')`的元素向上移动：`.message_to_comment`

```
<div class="replay_comment_container">
    <input type="hidden" class="message_to_comment" name="message_to_comment" value="1234" />
    <a class="new_comment_action" href="#">Add Comment</a>
    <div class="comment_form">
        <form>
            <textarea class="comment_field" name="comment_body"></textarea>
            <input class="sent_comment_action" type="submit" value="Send" />
            <div class="error"></div>
        </form>
    </div>                    
</div> 
```

仅仅因为标记可以在同一页面中重复，仅获取消息的 id 来评论是不够的，如下所示：

```
var message_id = $('.message_to_comment').val(); 
```

正如我`$('.sent_comment_action')`将要评论的消息的上下文一样，我可以使用：

```
//button in question
var message_id = button.parent().parent()... find('.message_to_comment').val(); 
```

但我不喜欢拥有一千个 parent() 函数的想法。所以，我的第二次尝试是使用如下`closest()`功能：

```
var message_id = button.closest('.message_to_comment').val(); 
```

当我测试上面的代码时，似乎`.message_to_comment`永远找不到该元素，因为它返回一个“未定义”。因此，请指导正确的方向以获得更好的解决方案，而不是使用 parent() 函数（如果存在另一种方式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:35:10.017

带有类的输入`message_to_comment`不是按钮的父级。

看来你可以使用

```
button.closest('replay_comment_container').find('.message_to_comment').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:37:02.740

这就是您要查找的内容，您要查找的元素不是按钮的父元素，它实际上是最接近的兄弟元素`.comment_form`

```
button.closest('.replay_comment_container').children('.message_to_comment').val(); 
```

你也可以试试

```
button.closest('.comment_form').prevAll('.message_to_comment').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:39:50.123

如何使用while循环：

```
function getValue(element) 
{
   var parent = element;

   do 
   {
      parent = parent.parent();
      element = parent.find('.message_to_comment');
   }
   while (!element && parent)

   return element ? element.val() : null;
} 
```

然后你可以使用：

```
var myValue = getValue(valbutton); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T17:53:17.070

简单地回答你的问题， .prev(); ：对于先前的元素是您正在寻找的方法。但我建议您稍微更改一下您的代码，以便更轻松地使用 jQuery 选择器查找元素。

```
<div class="replay_comment_container">
<a class="new_comment_action" href="#">Add Comment</a>
<div class="comment_form">
    <form name="form1" method="POST">
        <input type="hidden" class="message_to_comment" name="message_to_comment" value="1234" />
        <textarea class="comment_field" name="comment_body"></textarea>
        <input class="sent_comment_action" type="submit" value="Send" />
        <div class="error"></div>
    </form>
</div>                    
</div> 
```

现在为您的 jQuery 选择器

```
$('.send_comment_action').click(function(){
    /*prevent form submitting */
    event.preventDefault();
    /* selector for multiple .replay_comment_container's */
    var value = $(this).prev().prev().val();
    /*a prev method I haven't tried but i believe is the best and correct method */
    var value = $(this).prev('.message_to_send').val();
    /* selector for single .replay_comment_container */
    var value = $('input[name="message_to_comment"]','.replay_comment_container').val();
}); 
```

# jquery - 使用 jQuery 和 CSS、HTML 创建像行号这样的文本编辑器

> ID：13543713
> 
> 赞同：0
> 
> 时间：2012-11-24T17:33:40.873
> 
> 标签：jquery, html, css, jquery-ui, jquery-plugins

我只是想知道是否有任何这样的事情是可能的/可用的

对于我的 HTML 页面中的每一行，我希望在页面的最左侧显示一个行号，就像许多编程编辑器一样。你知道任何这样的插件或设计可以实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:00:22.490

为了简单起见，我整理了一些粗略的东西，欢迎您对其进行扩展：

[http://jsfiddle.net/L4MEu/2/](http://jsfiddle.net/L4MEu/2/)

HTML：

```
<div id="linenum"></div>
<div id="content">
    test<br/>
    one<br>
    two

</div>​ 
```

CSS：

```
#linenum
{
    width: 5%;
    background-color: blue;
    color: #FFF;
    position: absolute;
    top: 0px;
    bottom: 0px;            
}
#content
{
    position: relative;
    left: 7%;
}
body
{
    overflow-x: hidden;
} 
```

查询：

```
$(document).ready(function(){
      var splitCondition = new RegExp("<br/?>");
      var lines = $("#content").html().split(splitCondition);

      for(var i = 1; i <= lines.length; i++)
      {
        $("#linenum").append("&nbsp;" + i + ".<br/>");
      }
​
}); 
```

​</p>

# java - Java 数字格式困境

> ID：13543714
> 
> 赞同：2
> 
> 时间：2012-11-24T17:33:49.493
> 
> 标签：java

我对这段代码有问题！我正在尝试在 java 中运行代码，但答案似乎很奇怪。

```
float a=0.1F;
float b=0.2F;
if((a+b)==0.3){
System.out.println("True");
}
else{
System.out.println("False");
} 
```

答案是：False 但理论上应该返回 True。如果我们使用 a 和 b 的值，例如 0.15 和 0.15 或 0.05 和 0.25，则该函数返回 True。我很困惑。我在某处读过 Java/JavaScript 等语言实现了 IEEE-754 数字格式！如果是这样，那么这种格式是什么，代码有什么问题？有没有办法改变数字格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T17:36:39.173

`a+b`浮点数 ( ) 和双精度数 ( )之间的精度差异`0.3`导致条件为假。您可以改为使用`(a+b)==0.3F`. IE

```
float a = 0.1F;
float b = 0.2F;
if ((a + b) == 0.3F) {  // notice the "F"
    System.out.println("True");
} else {
    System.out.println("False");
} 
```

```
真的

```

* * *

***编辑***：在这种情况下，即使你使用`double`s 条件将是`false`：

```
double a = 0.1;
double b = 0.2;
if ((a + b) == 0.3) {
    System.out.println("True");
} else {
    System.out.println("False");
} 
```

```
错误的

```

打印`0.1 + 0.2`将揭示原因（数字无法完美表示）：

```
0.30000000000000004

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:36:52.630

`(a + b)`是一个浮点数，而 0.3 是一个`double`. 您应该将其与相同的类型进行比较：

```
if ((a + b) == 0.3F) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T17:37:00.247

只需将*f*添加到数字的末尾即可使编译器区分 a`double`和 a `float`：

```
float a=0.1F;
float b=0.2F;
if((a+b)==0.3f){
System.out.println("True");
}
else{
System.out.println("False");
} 
```

更新：

也看到这个类似的问题：

*   [在 Java 中使用 == 比较浮点数有什么问题？](https://stackoverflow.com/questions/1088216/whats-wrong-with-using-to-compare-floats-in-java)

最佳答案表明您应该使用以下方法检查 loat ewuality：

```
if(Math.abs((a+b) - 0.3F) < epsilon) 
```

其中 epsilon 是一个非常小的数字，例如 0.00000001，具体取决于所需的精度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T17:47:00.343

切勿将 Float/Double 与 == 符号进行比较。

即使您在数字后加上“f”，这也不起作用。这里的问题不是格式，而是数据丢失。由于将 10 碱基转换为 2 碱基而发生数据丢失也会使条件为假。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T17:42:30.940

```
float a=0.1F;
float b=0.2F;
if((a+b)==0.3){
System.out.println("True");
}
else{
System.out.println("False");
} 
```

.3 默认是双精度类型。您确实将其视为 .3 ，但对于计算机而言，其确切值为 .2999998 ......某物。因此差异。

如果您明确告诉编译器 .3 是浮点数，那么您的类比将成立。

所以

```
float a=0.1F;
float b=0.2F;
if((a+b)==0.3F){
System.out.println("True");
}
else{
System.out.println("False");
} 
```

关注[这个](https://stackoverflow.com/questions/7289361/double-arithmetic-and-equality-in-java)话题，满足你对“双重”问题的渴望

# c# - 以恒定频率处理串行数据

> ID：13543718
> 
> 赞同：0
> 
> 时间：2012-11-24T17:34:01.403
> 
> 标签：c#, signal-processing, wiimote

大家好，我正在用 C# 编写一个应用程序，它从加速度计（在 wiimote 内部）获取数据，然后对其进行处理和绘制图形。我正在使用[Brian Peek 的 Wiimote 库](http://www.brianpeek.com/page/wiimotelib)，所以我正在使用事件处理程序来获取数据：

```
void wiimote_WiimoteChanged(object sender, WiimoteChangedEventArgs e)
{
    X = e.WiimoteState.AccelState.Values.X;
    Y = e.WiimoteState.AccelState.Values.Y;
    Z = e.WiimoteState.AccelState.Values.Z;          

} 
```

我想以 100Hz 的速率绘制/保存/处理数据，所以我创建了一个计时器对象（WiiTimer），将其“Tick Interval”设置为 10ms，然后在计时器的每个滴答声中存储/处理数据：

```
private void WiiTimer_Tick(object sender, EventArgs e)
{

   //Signal Processing (Some median and low pass filtering etc.) Ive removed the code for that since it is irrelevant here

    sw.WriteLine((X * 9.8).ToString() + ", " + (Y * 9.8).ToString() + ", " + (Z*9.8).ToString() );
  //Write Processed Data to file            

} 
```

现在的问题是，数据实际上并没有以 100Hz 的频率保存，因为信号处理需要一些时间，所以计时器不能每 10 毫秒调用一次它的 OnTick 事件处理程序。因此，数据存储速率取决于您在机器上运行代码的速度、您运行的其他程序数量等。

我该如何解决这个问题？我曾想过在单独的线程上运行计时器，但这会导致其他问题，正如有人在此处的另一个问题上指出的那样：“您的计时器事件可能想要从另一个线程访问对象。但这样做会导致比赛条件。”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:52:57.573

计时器并不是特别精确，因此如果您实际上想要每秒 100 个样本，最好的方法是这样的：

```
private class Result
{
    public double X { get; set; }
    public double Y { get; set; }
    public double Z { get; set; }
}

private Result lastResult;

void wiimote_WiimoteChanged(object sender, WiimoteChangedEventArgs e)
{
    Result newResult = new Result {
        X = e.WiimoteState.AccelState.Values.X,
        Y = e.WiimoteState.AccelState.Values.Y,
        Z = e.WiimoteState.AccelState.Values.Z,
    } 

    lastResult = newResult;
}

void MainLoop()
{
    DateTime nextResultTime = DateTime.Now.AddMilliseconds(10);

    while(true)
    {
        if (DateTime.Now >= nextResultTime)
        {
            AddResult(lastResult);
            nextResultTime = nextResultTime.AddMilliseconds(10);
        }
        else
        {
            Thread.Sleep(1);
        }
    }
} 
```

只需在后台线程上运行 MainLoop（如果 wii 事件在后台线程上触发，这可能不是必需的）。

这将使您每秒准确地获得 100 个样本，除非机器无法处理这么快的 AddResult。在这种情况下，我认为您必须减轻 AddResult 内部的负载并在捕获数据后进行一些后处理 - 机器足够快以实时执行，或者它不是。

# java - Ant 构建文件中的 GWT 编译器错误

> ID：13543719
> 
> 赞同：0
> 
> 时间：2012-11-24T17:34:06.747
> 
> 标签：java, gwt, ant, gwt-compiler

我有以下 Ant 目标：

```
<target name="gwtc" depends="main-compile">
    <java failonerror="true" fork="true" classname="com.google.gwt.dev.Compiler">
        <classpath refid="gwtc.path"/>

        <!-- Provision GWT Compiler with necessary memory. -->
        <jvmarg value="-Xmx256M"/>

        <!-- Command-line arguments to the GWT Compiler. -->
        <!-- Log everything for debugging & auditing purposes. -->
        <arg line="-logLevel"/>
        <arg value="ALL"/>

        <!-- Maximize JavaScript optimization (range is [0,9]). -->
        <arg line="-optimize"/>
        <arg value="9"/>

        <!-- Generate a Story of Your Compile (SOYC) report for auditing purposes. -->
        <arg line="-compileReport"/>

        <!-- Specify the GWT Modules to compile -->
        <arg line="${src.dir}/com/myapp/WebModule"/>
    </java>
</target> 
```

当我从 Ant 命令行运行它时，我收到以下错误：

```
gwtc:
    [java] Checking for updates
    [java] [ERROR] Invalid module name: 'src/com/myapp/WebModule'
    [java]    First launch was 13ac843ee4b

BUILD FAILED
/home/myuser/sandbox/workbench/eclipse/workspace/myapp/build/targets.xml:243: Java returned: 1 
```

实际上，我想将几​​个 GWT 模块传递给 GWT 编译器，而不仅仅是`WebModule`. 如何调整 Ant XML 以向 GWT 编译器提供所需的内容？最好有一种方法可以指定`com.myapp`包内的所有模块，然后将其作为参数传递。这样，每次我添加一个模块时，我都不需要记得返回并更改构建 XML。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T23:57:43.423

您必须将*模块名称*传递给编译器，而不是文件路径。即`com.myapp.WebModule`。`${src.dir}`必须在编译器的类路径中，以便它可以找到模块和 Java 源文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:40:34.717

从[http://code.google.com/p/google-web-toolkit/downloads/list](http://code.google.com/p/google-web-toolkit/downloads/list)下载 GWT 后，从 zip 文件夹中提取内容。请参考 GWT 团队在“示例”文件夹项目中提供的构建脚本“build.xml”，例如“Hello”。

对于 GWT 中的多模块项目。参考 - [http://turbomanage.wordpress.com/2009/11/19/tips-on-organizing-gwt-modules/](http://turbomanage.wordpress.com/2009/11/19/tips-on-organizing-gwt-modules/)

* * *

此外，开发编译器只需要一个“最终”主模块。

# javascript - 为什么我们在 javascript 中使用构造函数

> ID：13543720
> 
> 赞同：1
> 
> 时间：2012-11-24T17:34:07.100
> 
> 标签：javascript

> **可能重复：**
> [`constructor` 属性真正用于什么？](https://stackoverflow.com/questions/12622137/what-is-the-constructor-property-really-used-for)

我想了解，究竟为什么我们在 javascript 中使用构造函数。在哪种情况下我们使用构造函数。

我知道构造函数属性是对创建对象的函数的引用，但需要一个简单的实时示例。

提前致谢

# vb.net - “未处理 OleDbException ... From 子句中的语法错误”

> ID：13543722
> 
> 赞同：1
> 
> 时间：2012-11-24T17:34:14.883
> 
> 标签：vb.net, ms-access

我收到这个错误说

> OleDbException 未处理...From 子句中的语法错误

我的登录代码如下。

```
Imports System.Data.OleDb

Public Class Login

Dim con As New OleDbConnection
Dim dt As New DataTable
Dim ds As New DataSet

Private Sub Login_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    con.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\Project work\anshu\fitness_0.1\Fitness.accdb"
End Sub
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btncancel.Click
    Me.Close()

End Sub

Private Sub btnlogin_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnlogin.Click

    If check() = True Then
        Main.Show()
        Me.Hide()
    Else
        MsgBox("Enter vailid Username and Password", MsgBoxStyle.Information, "Login Validation Information")
    End If

End Sub

Public Function check()
    ds.Tables.Add(dt)
    con.Open()
    Dim da As New OleDbDataAdapter("select * from User", con)
    da.Fill(dt) ---->here is the error!

    For Each DataRow In dt.Rows
        If txtname.Text = DataRow(1) And txtpass.Text = DataRow(2) Then
            con.Close()
            Return True

        End If
    Next
    con.Close()
    Return False

End Function

End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T17:54:16.027

user 是[保留字](http://support.microsoft.com/kb/321266)，必须用方括号括起来：

```
"select * from [User]" 
```

# c - MPI_Isend 分段错误

> ID：13543723
> 
> 赞同：4
> 
> 时间：2012-11-24T17:34:27.447
> 
> 标签：c, mpi

我在执行 MPI 非阻塞发送时遇到问题，它会导致机器因分段错误而崩溃。所有机器都正确接收到数据，但是id为0的机器在`MPI_Waitall()`运行过程中崩溃了。任何人都可以确定导致问题的原因吗？谢谢！

这是程序的源代码和我在运行它时得到的错误报告：

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

#define BLOCK_LOW(id,p,n) ((id)*(n)/(p))
#define BLOCK_HIGH(id,p,n) (BLOCK_LOW((id)+1,p,n)-1)
#define BLOCK_SIZE(id,p,n) (BLOCK_HIGH(id,p,n)-BLOCK_LOW(id,p,n)+1)
#define BLOCK_OWNER(id,p,n) (((p)*((id)+1)-1)/(n))

#define LENGTH 100

int main(int argc, char *argv[]) {
    int id, p, i;
    MPI_Request* sendRequests;
    MPI_Status* sendStatuses;
    MPI_Request receiveRequest;
    MPI_Status receiveStatus;

    int array[LENGTH];
    int array2[LENGTH];

    MPI_Init(&argc, &argv);
    MPI_Barrier(MPI_COMM_WORLD);

    for (i = 0; i < LENGTH; i++) {
        array[i] = i * 5;
        array2[i] = 0;
    }

    MPI_Comm_rank(MPI_COMM_WORLD, &id);
    MPI_Comm_size(MPI_COMM_WORLD, &p);

    if (id == 0) {
        sendRequests = malloc((p-1) * sizeof(MPI_Request));

        for (i = 1; i < p; i++) {
            MPI_Isend(array + BLOCK_LOW(i-1, p-1, LENGTH), BLOCK_SIZE(i-1, p-1, LENGTH), MPI_INT, i, 0, MPI_COMM_WORLD, &sendRequests[i-1]);
        }

        MPI_Waitall(p-1, sendRequests, sendStatuses);
    } else {
        MPI_Recv(array2, BLOCK_SIZE(id-1, p-1, LENGTH), MPI_INT, 0, 0, MPI_COMM_WORLD, &receiveStatus);

        for (i = 0; i < BLOCK_SIZE(id-1, p-1, LENGTH); i++) {
            printf("Element %d (%d): %d\n", i, i + BLOCK_LOW(id-1, p-1, LENGTH), array2[i]);
        }
    }

    MPI_Barrier(MPI_COMM_WORLD);
    MPI_Finalize();
    return 0;
} 
```

这是我运行代码时遇到的错误：

```
[lin12p5:13467] *** Process received signal ***
[lin12p5:13467] Signal: Segmentation fault (11)
[lin12p5:13467] Signal code: Invalid permissions (2)
[lin12p5:13467] Failing at address: 0x400f30
[lin12p5:13467] [ 0] /lib/libpthread.so.0(+0xeff0) [0x7fa96ab4eff0]
[lin12p5:13467] [ 1] /usr/lib/libmpi.so.0(+0x37f01) [0x7fa96bad5f01]
[lin12p5:13467] [ 2] /usr/lib/libmpi.so.0(PMPI_Waitall+0xb3) [0x7fa96bb06b73]
[lin12p5:13467] [ 3] mpi-test(main+0x232) [0x400da6]
[lin12p5:13467] [ 4] /lib/libc.so.6(__libc_start_main+0xfd) [0x7fa96a7fcc8d]
[lin12p5:13467] [ 5] mpi-test() [0x400ab9]
[lin12p5:13467] *** End of error message ***
--------------------------------------------------------------------------
mpirun noticed that process rank 0 with PID 13467 on node lab12p5 exited on signal 11     (Segmentation fault).
--------------------------------------------------------------------------

[lin13p5][[33088,1],1][../../../../../../ompi/mca/btl/tcp/btl_tcp_frag.c:216:mca_btl_tcp_frag_recv] mca_btl_tcp_frag_recv: readv failed: Connection reset by peer (104) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T17:40:35.417

您没有为`sendStatuses`. 你需要`malloc()`一些空间，就像你为`sendRequests`. 您还应该`free()`在完成时使用这些以防止内存泄漏。

# ios - 切换标签时弹出键盘，破坏一切

> ID：13543726
> 
> 赞同：0
> 
> 时间：2012-11-24T17:35:03.267
> 
> 标签：ios, keyboard, uitableview, uitabbar

我有一个基于选项卡的应用程序，其中每个选项卡都将您带到 UITableViews 的导航堆栈。莫名其妙地，切换标签偶尔会导致键盘出现。

这特别奇怪，因为它总是在切换到第一个选项卡时发生，其中 UITableView 没有 UITextViews 或 UITextFields，或者任何需要键盘的东西；它只是一个香草字幕单元格的表格。

这也特别烦人，因为用户无法关闭键盘或切换选项卡！她无法切换选项卡，因为它们被覆盖了，并且没有 TextViews/TextFields 可以将光标放入然后关闭键盘。因此该应用程序被有效禁用并且必须重新启动。

我会分享一些代码，除了这里的关键组件都是在 Storyboard 中创建的。

以前有人听说过这样的事吗？知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:12:21.243

想通了：如果键盘正在显示并且视图以编程方式从导航堆栈中弹出而不关闭键盘，当您切换到另一个选项卡然后返回时，键盘会重新出现在弹出显示的视图上。

我看不出这应该发生的任何原因，所以它可能是一个错误。显然，在某种程度上，键盘一直“在那里”，直到你切换回来才可见。

无论如何，这可以通过在弹出导航堆栈之前关闭键盘来避免。

# c++ - 如何让 Clang Complete 显示函数参数？

> ID：13543730
> 
> 赞同：4
> 
> 时间：2012-11-24T17:35:10.157
> 
> 标签：c++, function, vim, parameters, clang

当使用 Clang Complete 自动完成时，我想让它也显示函数签名。

例如，如果我声明以下函数：

```
int add(int a, int b) {
    int result = a + b;

    return result;
} 
```

当我启动 Clang Complete 时，我不仅希望在自动完成结果中弹出函数名称，而且还希望它是参数：`add(int a, int b)`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T06:21:54.233

试试这个

```
set conceallevel=2
set concealcursor=vin
let g:clang_snippets=1
let g:clang_conceal_snippets=1
" The single one that works with clang_complete
let g:clang_snippets_engine='clang_complete'

" Complete options (disable preview scratch window, longest removed to aways
" show menu)
set completeopt=menu,menuone

" Limit popup menu height
set pumheight=20

" SuperTab completion fall-back 
let g:SuperTabDefaultCompletionType='<c-x><c-u><c-p>' 
```

# c++ - 初始化列表和 std::forward

> ID：13543731
> 
> 赞同：1
> 
> 时间：2012-11-24T17:35:12.817
> 
> 标签：c++, constructor, move, forward

我是否正确地假设

```
class D { /* ... */ };

int f (const D & t) { return /* something calculated from t */; }

template<class T>
class C {
private:
    int m_i;
    T m_t;
    // or first m_t, then m_i -- careless order of declarations
public:
    template<class T_>
    C (T_ && t) : m_t (std::forward<T_> (t)), m_i (f (t)) {
    }
};

C<D> c (D ()); 
```

可能会导致错误，因为调用`t`时的值已被移走`f(t)`？`m_i`除了 (i) 使用工厂函数或 (ii) 引入对声明和的顺序的依赖关系之外，还有什么方法可以避免这个问题`m_t`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:57:56.613

第一件事是初始化列表的评估顺序由类定义中成员的顺序决定，所以在你的情况下，它将是：

```
template<class T_>
C (T_ && t) 
  : m_i (f (t)), m_t (std::forward<T_> (t)) {
} 
```

所以在你的情况下它很好。如果您重新排序成员以便**在之前**`m_t`声明并在初始化中使用它也可以： **`m_i``m_t`**

 **```
T m_t;
int m_i;
template<class T_>
C (T_ && t) 
  : m_t (std::forward<T_> (t)), m_i (f (m_t))  {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T17:58:05.800

成员`m_i`首先被初始化，然后值显然不会被移动，也不会被移动。当您初始化时，`m_t(std::forward<T>(t))`您隐含地承诺您不会使用`t`s 值（至少，在您给它一个新值之前）。

通常，执行顺序很重要，对于成员初始化器列表也是如此。也就是说，在引入成员之间的依赖关系时，需要注意声明成员的顺序。**

# css - 如何更改 Yii 引导 CSS 寄存器的位置？

> ID：13543734
> 
> 赞同：2
> 
> 时间：2012-11-24T17:35:53.677
> 
> 标签：css, twitter-bootstrap, yii

我正在使用 Yii Bootstrap 2.2 和 Yii 1.1.10。我还在我的站点中使用来自[http://www.cniska.net/yii-bootstrap的 yii-bootstrap 扩展。](http://www.cniska.net/yii-bootstrap)我在其他站点中使用过类似的配置，在这种情况下，Bootstrap CSS 是在主布局中声明的 CSS 之后加载的。

但在这种情况下，Bootstrap CSS 加载在 head 标签之上，在任何其他 CSS 之前。这导致我漂亮的 Boostrap 按钮以稀有的颜色显示。

问题是，有没有办法改变加载这个引导扩展的顺序，以便像以前一样在标题中加载我的自定义类？

引导程序加载良好，没有 JS 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:53:57.810

> 首先：boostrap.php 下面命令这个函数

```
public function registerYiiCss() {Yii::app()->clientScript->registerCssFile($this->getAssetsUrl().'/css/bootstrap-yii.css');} 
```

> 第二：views/layout/main.php

```
$cssUrl = Yii::app()->boostrap->getAssetsUrl().'/css/bootstrap-yii.css'); 
```

上面的 cssUrl 你可以放在 head 标签下面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:06:27.483

您必须在标签之前添加您的 css 代码`<title>...</title>`，它将在其他注册文件之前加载...

```
<head>
...
<link rel="stylesheet" type="text/css" href="<?php echo Yii::app()->request->baseUrl; ?>/css/main.css" />
<title><?php echo CHtml::encode($this->pageTitle); ?></title>
...
</head> 
```

# php - qTip inline onClick 在 AJAX 内容上触发两次

> ID：13543735
> 
> 赞同：0
> 
> 时间：2012-11-24T17:35:54.470
> 
> 标签：php, ajax, qtip

我有一个使用 AJAX 和 PHP 的数据库填充的页面。有一个“将项目添加到列表”的链接，当您单击该链接时，会弹出一个 qTip 框，确认它已被添加。但是，当我尝试使用 qTip 执行此操作时**，我用来添加项目的 onClick 事件会触发两次。**

这是 AJAX 的响应函数，它填充页面，然后为新创建的 div 初始化工具提示。

```
xmlhttp.onreadystatechange=function() {
      if (xmlhttp.readyState==4 && xmlhttp.status==200) { document.getElementById("contentdiv").innerHTML=xmlhttp.responseText; updateTooltip();}
} 
```

这是我的工具提示初始化函数

```
function updateTooltip() {  
    $(".Tooltip").qtip({
       content: "<a href='blah.html' target='_blank'>Item Added</a>",
       show: 'click',
       hide: 'none',
       style: { 
           width: 500,
           height: 12,
           name: 'light'
       },
       position: {
            corner: {
                target: 'center',
                tooltip: 'center'
            }
        }
     });     
} 
```

这是使用 onClick 事件生成链接的 PHP 代码

```
echo "<a class='Tooltip' target='_blank' onClick='addItem();'> Add To List </a>"; 
```

当我使用 qTip 时，onClick 只会触发两次。否则，当您单击一次时 addItem() 仅触发一次，它工作得很好。

# python - 从 CSV 文件中查找列中出现频率最高的记录

> ID：13543738
> 
> 赞同：1
> 
> 时间：2012-11-24T17:36:02.927
> 
> 标签：python, csv

我有一个巨大的 CSV，其中每一行都有一个用户 ID。我想找到整个集合中出现频率最高的用户 ID。

我已经`DictReader`从`csv`模块中读取了 csv，因为我认为这对于以后操作单个记录最有用。

我找不到在我创建的字典中搜索键“UserID”的各种值并找到最常见值的方法。

任何帮助将不胜感激！

到目前为止，这是我的代码：

```
import csv
from time import time
start = time()
myData=open("myCSV.csv", "rb" )
csvReader= csv.DictReader(myData)

# declare counters
volume = 0

#sum all data usage
for data in csvReader:
    volume += float(data["volume_total"])
print "Total : %f" %volume

#calculate processing time
elapsed = time() - start
print "Processing time: %f seconds" %elapsed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:00:37.573

或者，您可以使用 numpy loadtxt

```
 from numpy import loadtxt
  a,b = loadtxt("filename.csv", usecols=(0,1), unpack=True) 
```

然后你可以使用列表理解创建一个字典（它更快！）

```
 a = [1,1,1,1,2,2,2,2,3,3,4,5,5]
  d = {x:a.count(x) for x in a} 
```

参考这个[问题](https://stackoverflow.com/questions/2161752/how-to-count-the-frequency-of-the-elements-in-a-list)。

要查找最常见的用户 ID：

```
 user_id_list = d.keys()
  frequency = d.values()
  index = frequency.index(max(frequency))
  famous_user = user_id_list[index] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:49:42.017

创建一个字典“usersOccurences”，键是 UserId，值是遇到计数。使用 DictReader 遍历 csv 文件中的所有记录。

对于您找到的每个 UserId - 尝试在 usersOccurences 字典中找到相应的出现次数并将其递增，如果当前 UserId 在此字典中不存在 - 将其添加到起始编号 1。

迭代后，您可以浏览 usersOccurences 字典并找到具有最大数量的 UserId。

# javascript - 如何使用 JavaScript 从选项列表中选择选项

> ID：13543739
> 
> 赞同：1
> 
> 时间：2012-11-24T17:36:03.567
> 
> 标签：javascript

当我想为文本字段设置一个值时，我这样做：

```
document.getElementById("some-textfield").value = "BlahBlahBlah"; 
```

但是如何从下拉选项列表中选择一个选项：

```
<select tabindex = "11" name="b_month">
 <option value="">---</option>
 <option value="1">Jan</option>
 <option value="2">Feb</option>
 <option value="3">Mar</option> 
```

我正在尝试这样的事情：

```
document.getElementByName("b_month").options[2] 
```

但它不起作用。我再次想在网站中更改它，所以当我在控制台中输入它时，我会看到结果。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:39:57.657

`getElementByName`不是函数。您需要使用`getElementsByName`（注意多个），然后从返回的集合中选择适当的元素：

```
document.getElementsByName("b_month")[0].options[2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:40:48.067

```
document.getElementsByName("b_month")[0].selectedIndex = 2; 
```

# objective-c - 多个表仅区分数据

> ID：13543740
> 
> 赞同：0
> 
> 时间：2012-11-24T17:36:15.827
> 
> 标签：objective-c, ios, xcode, uitableview

我有一个标签栏应用程序。其中三个选项卡（收藏夹、书签、顶部）是 UITableViewControllers，并且使用相同的表格外观（它是带有作者、姓名、书籍封面等的书籍列表），只是数据不同。我已经在 xib 文件中有一个自定义单元格，我将其加载到控制器的 tableView 中。什么是最好的层次结构？

我应该制作一个 UITableView 并从中继承，甚至是一个共享的 UITableViewController 吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:59:41.830

听起来你可以有一个自定义`UITableViewController`使用你的`UITableViewCell`. 创建类，例如：“BookViewController”、“NameViewController”和“AuthorViewController”，它们是您自定义的子类`UITableViewController`。

简单地说，您可以创建一个`UITableViewController`您提供通用方法来获取数据并显示它的方法。然后，您将创建它的实例（或子类）并将数据传递给它。您甚至可以让抓取数据方法成为 init 的一部分。这样做你会有一个`initWithData`方法，它会在该选项卡中提供你需要的数据。

# php - WordPress 自定义选项页面

> ID：13543741
> 
> 赞同：0
> 
> 时间：2012-11-24T17:36:17.043
> 
> 标签：php, wordpress, api, post, options

我需要在 WordPress 中创建一个选项页面，允许为同一个键输入多个值。为了让它按我想要的方式工作，我需要对选项表单发送的 $_POST 数据进行一些自定义处理。我还需要使用自定义 HTML 创建选项表单，而不是由设置 API 生成。

制作选项页面的正常过程是使用 注册选项页面`add_options_page()`，注册设置并让 WordPress 为您生成一个表单`do_settings_sections()`。然后该`<form>`标签有一个属性`action="options.php"`。

我的问题是：我可以改变它的工作方式吗？例如，我可以让回调看起来像这样：

```
<?php
add_options_page( 
    'My plugin Options', 
    'My plugin Options', 
    'administrator', 
    'MYPLUGIN_plugin_options', 
    'MYPLUGIN_options' 
);

function MYPLUGIN_options()
{
    if ( 'update' == $_POST['action'] ) // Do some updating
    else // Generate form
} 
```

这行得通吗？这是实现我想要的可接受的方式吗？如果没有，我还能怎么做？我无法在 WordPress 文档中找到这样做的“合法”方式。也许你们中的一个人已经找到了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:57:10.297

我不知道这是否真的是您正在寻找的答案。该脚本创建一个插件 index.php 和 parameter-options.php 。index.php 将一个名为“Your options-pagename”的新页面添加到 wordpress 设置选项卡。在那里，您可以通过向表单添加新的输入值来管理选项。您应该将大写的 NAMESPACE 文本替换为您自己的项目名称。另外：此脚本未经测试。

plugindir/yourpluginname/index.php

```
 /*
Plugin Name: Your options page
Plugin URI: http://www.yourdomain.de
Description: descriptiontext
Author: authorname
Version: v1.0
Author URI: your uri
  */

 if( ! function_exists('NAMESPACE_add_admin_menu_items')):
    function NAMESPACE_add_admin_menu_items() {

    // add parameter options page to wp admin
    add_options_page('Your options-pagename', 'Parameter', 'manage_options', 'NAMESPACE-parameter-settings', 'NAMESPACE_display_parameter_options_page');
}

endif;

 add_action('admin_menu', 'NAMESPACE_add_admin_menu_items');

 if( ! function_exists('NAMESPACE_display_parameter_options_page') ):

function NAMESPACE_display_parameter_options_page() {
    require_once 'parameter-options.php';
}

endif; 
```

plugindir/yourpluginname/parameter-options.php

```
$aPosts = $_POST;
if( ! empty($aPosts)) {

    foreach($aPosts as $cKey => $aPost) {
        update_option($cKey, $aPost);
    }

}
 <div class="wrap nosubsub">
<div class="icon32" id="icon-edit"><br></div>
<h2><?php echo __('Hello, i am the optionspage', 'NAMESPACE'); ?></h2>

<form method="post">
    <table class="form-table">
        <tbody>
            <?php
                $aYourOptionsArray = get_option('YourOptionsArray');
            ?>
            <tr valign="top">
                <th scope="row" colspan="2"><b><?php echo __('Some Description', 'NAMESPACE'); ?></b></th>
            </tr>
            <tr valign="top">
                <th scope="row"><?php echo __('Value 1', 'NAMESPACE'); ?></th>
                <td><input name="YourOptionsArray[value_1]" class="regular-text" type="text" value="<?php echo (isset($aYourOptionsArray['value_1']) ? $aYourOptionsArray['value_1'] : ''); ?>" /></td>
            </tr>
            <tr valign="top">
                <th scope="row"><?php echo __('Value 2', 'NAMESPACE'); ?></th>
                <td><input name="YourOptionsArray[value_2]" class="regular-text" type="text" value="<?php echo (isset($aYourOptionsArray['value_2']) ? $aYourOptionsArray['value_2'] : ''); ?>" /></td>
            </tr>
                            <!-- more options here -->
             </table>
       </form>
   </div> 
```

# java - 旋转缓冲图像的锻炼区域

> ID：13543744
> 
> 赞同：0
> 
> 时间：2012-11-24T17:36:39.510
> 
> 标签：java, rotation, area

在使用仿射平移旋转它后，我正在尝试计算缓冲图像的边界，如下所示：

```
AffineTransform at = new AffineTransform();
at.translate(x, y);
at.translate(0.5*image.getHeight(), 0.5*image.getWidth());
at.rotate(Math.PI/3);
at.translate(-0.5*image.getWidth(), -0.5*image.getHeight());
AffineTransformOp op = new AffineTransformOp(at, AffineTransformOp.TYPE_BILINEAR); 
BufferedImage anotherImage = op.filter(image, null);
AffineTransform at = new AffineTransform();

       at.translate(x, y);
       at.translate(0.5*image.getHeight(), 0.5*image.getWidth());
       at.rotate(Math.PI/3);
       at.translate(-0.5*image.getWidth(), -0.5*image.getHeight());
        AffineTransformOp op = new AffineTransformOp(at, AffineTransformOp.TYPE_BILINEAR); 
       BufferedImage anotherImage = op.filter(image, null); 
```

翻译后如何计算边界，以便我可以在 BufferedImage 周围绘制一个矩形？我正在尝试创建一个碰撞检测系统，以便计算出缓冲图像的边界，以便我可以判断它是否与任何其他对象发生碰撞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:40:38.990

如果你想倾斜，那么可以这样做：

```
public static BufferedImage tilt(BufferedImage image, double angle, GraphicsConfiguration gc) {
    double sin = Math.abs(Math.sin(angle)), cos = Math.abs(Math.cos(angle));
    int w = image.getWidth(), h = image.getHeight();
    int neww = (int) Math.floor(w * cos + h * sin), newh = (int) Math.floor(h * cos + w * sin);
    int transparency = image.getColorModel().getTransparency();
    BufferedImage result = gc.createCompatibleImage(neww, newh, transparency);
    Graphics2D g = result.createGraphics();
    g.translate((neww - w) / 2, (newh - h) / 2);
    g.rotate(angle, w / 2, h / 2);
    g.drawRenderedImage(image, null);
    return result;
} 
```

然后使用这个调用上面的函数：

```
/**
 * Takes an image and tilts it by angle. Positive angle implies tilt in
 * clock-wise direction. Negative angle implies in anti-clockwise. Returns
 * null if invalid file.
 *
 *
 * @param image image to be tilted. It assumes that the image is of valid
 * image format and not some random file.
 * @param angle Angle to be rotate clockwise. Ex: Math.PI/2, -Math.PI/4
 * @retun file after tilting angle. Null if not an image
 */
public static File tiltImageByAngle(File image, double angle, BufferedImage original) {
GraphicsConfiguration gc = getDefaultConfiguration();
    BufferedImage rotated1 = tilt(original, angle, gc);
    try {
        //write iamge
        File ans = new File(System.getProperty("java.io.tmpdir")+"temp"+angle+"."+getFileExtension(image.getName())); 
                //new File("temp" + (int) (Math.random() * 100000) + "." + getFileExtension(image.getName()));
        ImageIO.write(rotated1, getFileExtension(image.getName()), ans);
        return ans;
    } catch (IOException ex) {
        ImageRename.LOG.log(Level.SEVERE, null, ex);
        return null;
    }
} 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:10:05.850

您应该能够使用与旋转图像相同的 AffineTransform 对象：

*   构造一个与图像大小相同的 Rectangle2D；
*   在 AffineTransform 对象上调用**createTransformedShape()**，传入矩形；
*   在返回的 Shape 上调用**getBounds() 。**

因此，一个示例测试用例：

```
 AffineTransform at = AffineTransform.getRotateInstance(0.1);
    Rectangle2D r = new Rectangle2D.Double(0, 0, 256, 256);
    Shape rotatedShape = at.createTransformedShape(r);
    Rectangle boundsOfRotatedShape = rotatedShape.getBounds();
    System.out.println("Bounds: " + boundsOfRotatedShape); 
```

请注意，对于碰撞检测，您可以使用**rotateShape.contains()**查看旋转后的图像/矩形是否实际包含该点。

# android - 加载图像时显示微调器

> ID：13543748
> 
> 赞同：3
> 
> 时间：2012-11-24T17:36:47.253
> 
> 标签：android, android-imageview

![微调器](../Images/bfacef7bfe9d1f7e747aaf94b09e0bad.png)

我想在 Imageview 中显示这个图像作为默认值。我将它设置为位图，但它没有旋转。

请帮我展示旋转图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T19:20:51.207

在 FrameLayout 中有 ImageView 和 ProgressBar。在你的 OnCreate() 方法中添加这个，

```
progressBar.setVisibility(View.VISIBLE);
imageView.setVisibility(View.INVISIBLE); 
```

立即加载您的图像。加载后，调用它：

```
progressBar.setVisibility(View.INVISIBLE);
imageView.setVisibility(View.VISIBLE); 
```

进度条

```
 <ProgressBar
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     style="@android:style/Widget.ProgressBar.Small"
     /> 
```

# objective-c - 散列文件路径

> ID：13543754
> 
> 赞同：0
> 
> 时间：2012-11-24T17:37:12.620
> 
> 标签：objective-c

我想对文件路径进行哈希处理并使用生成的哈希值保存文件。

什么是目标 C 中的轻量级哈希方法，使用哈希值保存文件会在提取后保留文件格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:41:00.003

? 散列是一种单向过程。它既不是加密操作也不是压缩，因此不能“提取”

*   轻量级哈希：例如使用 [NSString hashValue]
*   压缩使用 zip
*   并用于 crpting CommonCrypto

# assembly - 在 MIPS 中使用系统调用 8 验证用户输入

> ID：13543755
> 
> 赞同：1
> 
> 时间：2012-11-24T17:37:17.800
> 
> 标签：assembly, mips, mars-simulator

我正在努力寻找一种有效的方法来检查用户是否使用系统调用 8 输入了只有数字（0~9）的有效输入

输入是 4 个字节长（1 个字），
我需要检查每个字节（char）是否是数字，

我想过尝试运行一个循环并检查它的 ascii 值是否低于 48（'0' ascii 十进制值），
或高于 57（'9' ascii 十进制值），

这是一种有效的方法吗？
如果是这样，在 MIPS 中实现这种 if 语句的正确方法是什么？
例如

```
if (x < 48) or (x > 57) {...} 
```

*注意：假设我确实有一个标志知道在哪里停止循环

*编辑：这是代码的一部分，以使其更清晰：

```
.data

    number:
    .word w1

.text

.globl main

main:

    la $a0, number      # read the number input from user
    li $a1, 6           # buffer set to max of 4 bytes (32 bits),
                       # assuming the input is no more than the length of a word,
                       # + 2 reserved bytes
    li $v0, 8
    syscall 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T22:14:55.233

试试这个：

```
 lbu   $t0, x        # read next byte
    sltiu $t1, $t0, 48  # t1 = (x < 48) ? 1 : 0
    bnez  $t1, fail
    sltiu $t1, $t0, 58  # t1 = (x < 58) ? 1 : 0
    beqz  $t1, fail
    # we now know that 48 <= $t1 <= 57
    . . .
    . . .
fail: # input byte was not a digit if we get to here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-31T21:28:22.023

**用于范围检查的无符号比较技巧在这里很好，只使用 sub/sltiu/beq 完成工作，并为您提供 ASCII->integer 数字值作为其中的一部分**。

[x86 示例](https://stackoverflow.com/questions/5196527/double-condition-checking-in-assembly/5197264#5197264)。就像检查字母字符一样，请参阅[^= 32 背后的想法是什么，它将小写字母转换为大写字母，反之亦然？](https://stackoverflow.com/questions/54536362/what-is-the-idea-behind-32-that-converts-lowercase-letters-to-upper-and-vice/54585515#54585515)

零扩展或符号扩展一个字符（一个字节）到一个 32 位寄存器；任何一个都有效，因为 ASCII 0..9 数字范围是有符号的，并且此范围检查正确地排除了所有其他 32 位数字。

```
 #  lbu  $t0, x    # for example
  # ASCII character in $t0

  addiu  $t0, $t0, -0x30         # subtract '0' : range shift from '0'..'9' to 0..9
  sltiu  $t1, $t0, 10            # t1 = c < 10  unsigned
  beqz   $t1, non_digit          # jump if c>=10
# fall through: it was a digit, 0..9 value in $t0

 ...
non_digit: 
```

**输入太低意味着`t0 -= '0'`包装到一个大的无符号值。输入太高意味着`9`减去后它在上面（无符号）。**

如果您想保留原始字符值及其整数数字值（如果它是数字），请选择不同的寄存器。

不幸的是，MARS 不支持方便的 ASCII 字符常量作为数字表达式的一部分，因此它不能组装`addiu $t0, $t0, -'0'`为减法`'0'`。

您可以将`sltiu`/写`beqz`为`bgeu $t0, 10, non_digit`伪指令。

您可以编写`bgtu $t0, 9, non_digit`，但不要编写，因为 MARS 将其组装为 3 个机器指令（包括`addi`在`9`寄存器中实现 +`sltu`两个 regs 之间），而不是 2。您无法通过在循环之前使用寄存器保持`9`或设置来保存任何内容，`10`两者之一：MIPS 分支条件仅与零比较，eq / ne 除外。 `blt $t1, $t9, non_digit`也将是一个伪指令。

在具有分支延迟槽的真实 MIPS 上，只分支一次当然是非常好的。

* * *

您当然可以将其用作循环条件，直到遇到非数字为止。

# c# - 如何在浏览器中显示动态生成的 bmp

> ID：13543759
> 
> 赞同：0
> 
> 时间：2012-11-24T17:37:46.767
> 
> 标签：c#, asp.net

在 .aspx 页面上，我正在使用 System.Drawing 命名空间创建 bmp。当 bmp 完成后，我将使用以下命令将其发送到浏览器：

```
using (MemoryStream ms = new MemoryStream())
            {
                bmp.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);
                byte[] buffer = ms.GetBuffer();
                HttpContext.Current.Response.OutputStream.Write(buffer, 0, buffer.Length);
                HttpContext.Current.Response.Flush();
            } 
```

这似乎只是将 bmp 发送到呈现它的浏览器 - 但不是作为 html 页面。您无法查看源代码 - 它似乎只是一个位图。

我希望将 bmp 发送到浏览器，但作为 html 页面的正文标记的“内容”。

这样做是将bmp保存（写入）到磁盘然后将该文件用作图像标签的src的唯一方法是什么？或者有没有办法将它直接呈现到浏览器但仍然作为 html 页面的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:41:33.307

最简单的解决方案是使用这样的两个页面：

一个.aspx：

```
<img src="b.aspx" /> 
```

b.aspx：

```
using (MemoryStream ms = new MemoryStream())
{
    bmp.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);
    byte[] buffer = ms.GetBuffer();
    HttpContext.Current.Response.OutputStream.Write(buffer, 0, buffer.Length);
    HttpContext.Current.Response.Flush();
} 
```

# java - 在文件中逐个字符读取

> ID：13543760
> 
> 赞同：-3
> 
> 时间：2012-11-24T17:37:49.967
> 
> 标签：java, string, file, project, bufferedreader

我目前正在为一个班级项目制作一个原始蚂蚁大战僵尸游戏。我们将读入一个“部落”文件，该文件包含与将要入侵的僵尸相对应的字符和一个整数（包括 1-9），它表示先前僵尸字符的倍数。我遇到的问题是区分文件字符串中的 int 和 char 以及如何根据 int 创建多个对象。这是我到目前为止所拥有的：

```
public void readHordeFile(String filename){
    try {
        file = new FileReader(filename);
    } catch (FileNotFoundException e) {
        System.out.println("File not found " + e.getMessage());
    }
    buf = new BufferedReader(file);
    try {
        zombieString = buf.readLine();
        for(int i = 0; i < zombieString.length(); i++){
            if(zombieString.charAt(i) == 'S'){
                horde.add(new ZombieScientist());
            }else if(zombieString.charAt(i) == 'Z'){
                horde.add(new StandardZombie());
            }else if(zombieString.charAt(i) == 'I'){
                horde.add(new InfectedZombie());    
            }else if(zombieString.charAt(i) == 1){

            }
        }
    } catch (IOException e) {   
        e.getMessage();
    }

} 
```

示例文件包含：SZI1

我正在考虑对每个数字进行硬编码，但我仍然遇到不知道如何添加同一对象的倍数的问题。我真的很感激任何帮助。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:50:17.720

您仍然可以像这样检查 char 格式的整数。

```
else if(zombieString.charAt(i) == '1'){

        } 
```

如果是 1,2 或 3，你可以这样检查。

如果要添加多个对象，可以创建对象列表并添加到“部落”对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:52:00.833

要判断字符串中的代码点是否为数字，请使用 Character.isDigit 方法；要将字符串的一部分放入 int 中，请使用 Integer.parseInt 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:54:54.233

一些东西; 这是未经测试的代码，所以把它当作一个提示；

您可能应该首先将僵尸创建分解为自己的方法，因此您的循环看起来像；

```
zombieString = buf.readLine();
for(int i = 0; i < zombieString.length(); i++){
    Character ch = zombieString.charAt(i);
    addZombie(horde, ch);
} 
```

然后您可以将最新创建的僵尸保存在状态变量中；

```
Character previousZombie = ' ';
zombieString = buf.readLine();
for(int i = 0; i < zombieString.length(); i++){
    Character ch = zombieString.charAt(i);
    previousZombie = ch;        
    addZombie(horde, ch);
} 
```

...并检查下一个字符是否是数字，如果是，则添加前一个僵尸的正确数字。

```
Character previousZombie = ' ';
zombieString = buf.readLine();
for(int i = 0; i < zombieString.length(); i++){
    Character ch = zombieString.charAt(i);
    if(!Character.isDigit(ch))
    {
        previousZombie = ch;
        addZombie(horde, ch);
    }
    else
    {
        for(int j='1'; j<ch; j++)
            addZombie(horde, previousZombie);
    }
} 
```

# django - 模板中的 i18n_patterns 和链接

> ID：13543761
> 
> 赞同：1
> 
> 时间：2012-11-24T17:37:55.380
> 
> 标签：django, internationalization

我实际上已经解决了这个问题，但是到目前为止我发现的所有解决方案都只是棘手的解决方法。

我正在玩 i18n_patterns，除了链接外一切正常。

例如，href="contacts" 将用户重定向到“/en/contacts”或“/it/contatti”，但在页面源中它仍然是“contacts”。

出于 SEO 优化目的，我想查看 href="/en/contacts"

不写代码可以吗？

干杯，

戴维德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T17:57:15.227

如果您使用 url 模板标签，这应该会自动处理。

```
<a href"{% url view_name %}">Link</a> 
```

来自 django 文档：

> 如果本地化的 URL 在模板中被反转，它们总是使用当前语言。要链接到另一种语言的 URL，请使用语言模板标签。

[在 django 文档中阅读有关本地化 url 模式的更多信息](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#translating-url-patterns)

# java - 使用 php (java, php) 将 java 中的编码数据保存到文件中

> ID：13543762
> 
> 赞同：0
> 
> 时间：2012-11-24T17:38:08.593
> 
> 标签：java, php, file-io, byte, fwrite

我想将文件数据从 Java 发送到 PHP，然后 php 将数据保存到文件中。这是我的代码：java代码：

```
 byte[] data=...
 str = new String(data,"ISO-8859-1"); //convert data to String .
// send(str); 
```

这是php脚本：

```
$data = // get the data from java .  
fwrite($fr1,$data); 
```

问题是该脚本仅适用于文本文件，不适用于图像文件和 Zip 文件。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:53:18.710

你能说清楚吗？..您想阅读图像或 zip 文件...还是想发送它们。

在我看来，发送要在 PHP 中读取的图像和 zip 文件的路径会是更好的方法。不会有任何降低图像质量或提取 zip 文件等问题的机会。

以下链接可能对您有所帮助：

[http://blog.joa-ebert.com/2006/05/01/save-bytearray-to-file-with-php/](http://blog.joa-ebert.com/2006/05/01/save-bytearray-to-file-with-php/)
[使用从 Flex Air 应用程序接收的 php 保存字节数组](https://stackoverflow.com/questions/5554374/saving-a-bytearray-with-php-received-from-flex-air-app)

# java - 验证 Swing GUI 中的所有字段

> ID：13543766
> 
> 赞同：9
> 
> 时间：2012-11-24T17:38:37.890
> 
> 标签：java, swing, validation

我有个问题。我创建了一个 Swing GUI 表单。此表单包含 JTextFields、JComboBox 组件。

现在我想做的是，当用户按下**完成**按钮时，我想验证 JTextFields 和 JComboBox 组件。我想为所有 JTextField 编写通用方法，为 JComboBoxes 编写另一个通用方法。有人知道验证 API 吗？

**我不需要一一验证所有字段。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T17:54:27.510

这里的一种选择是使用 Swing's`InputVerifier`来验证每个`JComboBox`&`JTextField`使用的输入。您可以在组件之间共享通用验证器：

```
 public class MyNumericVerifier extends InputVerifier {
        @Override
        public boolean verify(JComponent input) {
           String text = null;

           if (input instanceof JTextField) {
             text = ((JTextField) input).getText();
           } else if (input instanceof JComboBox) {
             text = ((JComboBox) input).getSelectedItem().toString();
           }

           try {
              Integer.parseInt(text);
           } catch (NumberFormatException e) {
              return false;
           }

           return true;
        }

        @Override
        public boolean shouldYieldFocus(JComponent input) {
           boolean valid = verify(input);
           if (!valid) {
              JOptionPane.showMessageDialog(null, "Invalid data");
           }

           return valid;
       }
    }

InputVerifier verifier = new MyNumericVerifier()
comboBox.setInputVerifier(verifier); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T17:44:23.593

如果“验证”意味着“检查所有字段”......那么，是的 - 您的“验证”例程将一一检查所有字段:)

您也可以“即用即验证”。有很多方法可以做到这一点，包括：

*   [Kenai 简单验证 API](http://kenai.com/projects/simplevalidation/pages/Home)

*   [输入验证器](http://www.javalobby.org/java/forums/t20551.html)

*   [http://www.java2s.com/Code/Java/Swing-Components/InputVerifierExample.htm](http://www.java2s.com/Code/Java/Swing-Components/InputVerifierExample.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T17:46:21.750

有一些第三方 api 可用。您可以开发自己的

1.  必填项目，
2.  电子邮件验证，
3.  最大和最小长度等，

[这是使用 InputVerifier 构建 Swing 验证包](http://www.javalobby.org/java/forums/t20551.html)的示例教程

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-24T17:42:49.617

那是不可能的。相反，您将必须创建一个继承 JTextField 的新类，然后将`validate()`函数作为`private`or `protected`，并在每次您`getText()`（这意味着您必须`@Override`）从中调用它。

另一种方法是使用`Container.getComponent()`并检查`instanceof`然后分别验证每个字段。然而，这违背了你的要求。

# javascript - 使用 jQuery off() 删除事件

> ID：13543767
> 
> 赞同：1
> 
> 时间：2012-11-24T17:38:44.467
> 
> 标签：javascript, jquery

几乎完成了我的第一个 jQuery 插件。它需要一个 HTML 表格，并保持标题固定，并使列可排序。Demo 位于[http://tapmeister.com/test/sortfixedtable/index.html](http://tapmeister.com/test/sortfixedtable/index.html)（点击 Create 启动插件）。

我添加了一个旨在删除插件的 destroy() 方法。问题是它不会删除事件。

在第 70 行，我使用类似于以下内容添加事件：

```
$(this).on('click.sortfixedtable',methods.sortClick); 
```

在第 151 行，我尝试使用类似于以下内容的内容删除事件：

```
$(this).off('.sortfixedtable'); 
```

然而，off() 方法并没有删除点击事件。谁能告诉我我在哪里搞砸了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:03:30.027

所以请执行以下操作

```
$(this).on('click','.sortfixedtable',methods.sortClick); 
```

和

```
$(this).off('click','.sortfixedtable'); 
```

不行？第二个基本上说

> 使用类“sortfixedtable”从**this**内部的元素中删除 click 事件处理程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:08:02.937

您将事件处理程序绑定到`<th>`元素，但尝试将其从`<table>`元素中删除。相反，将其从`<th>`具有处理程序绑定的相同元素中删除：

```
t_head.find('th').off(".sortfixedtable"); 
```

# html - iOS webapp加载图像未显示

> ID：13543768
> 
> 赞同：1
> 
> 时间：2012-11-24T17:39:05.847
> 
> 标签：html, ios

因此，您可以在下面找到我在标题中的代码。

当我将它作为 web 应用程序保存到我的主屏幕并从那里打开它时，应该会出现一个加载屏幕......

在 iPad 2 上，纵向和横向模式都像魅力一样工作。

但不是在我的4s上...

有什么想法吗？

编辑：是的，我确实检查了图像尺寸和 dpi 等。

```
<link rel="apple-touch-startup-image" media="(device-width: 320px)" href="../img/ios/startup320x460.png" /> <!-- iPhone -->
<link rel="apple-touch-startup-image" media="(device-width: 320px) and (-webkit-device-pixel-ratio: 2)" href="../img/ios/startup640x960png.png" /> <!-- iPhone Retina -->
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (orientation: portrait)" href="../img/ios/startup768x1004.png" /> <!-- iPad Portrait -->
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (orientation: landscape)" href="../img/ios/startup1024x748.png" /> <!-- iPad Landscape -->
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" href="../img/ios/startup1536x2008.png" /> <!-- iPad Landscape Retina -->
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" href="../img/ios/startup1496x2048.png" /> <!-- iPad Landscape Retina --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:34:16.277

如果您的文件名确实代表图像大小，那么您的 iPhone 视网膜图像的大小为 640 x 960 像素，而它应该是 640 x 920。iOS 对此*非常*挑剔。

# objective-c - 如何检查设备是否是Ipad mini

> ID：13543773
> 
> 赞同：8
> 
> 时间：2012-11-24T17:39:31.227
> 
> 标签：objective-c, ios, ipad

> **可能重复：**
> [处理 iPad Mini 屏幕大小](https://stackoverflow.com/questions/13036745/dealing-with-ipad-mini-screen-size)
> [是否可以在运行时检测到您的 iOS 应用程序正在 iPad mini 上运行？](https://stackoverflow.com/questions/13366976/is-it-possible-to-detect-that-your-ios-app-is-running-on-an-ipad-mini-at-runtime)

`iPad mini``iPad 1(2)`具有与( **1024x768** )相同的分辨率。

但`iPad mini`有`7,9`英寸和`iPad 1(2) - 9,7`英寸。

所以问题是如何检查设备是否是 Ipad mini。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-24T18:37:42.120

[此答案](https://stackoverflow.com/a/1561920/1187415)包含指向实用程序方法的链接，以获取可用于识别各种 iOS 设备的“平台字符串”。为了您的方便，我在这里复制主要方法：

```
#include <sys/types.h>
#include <sys/sysctl.h>

- (NSString *) platform {
    size_t size;
    sysctlbyname("hw.machine", NULL, &size, NULL, 0);
    char *machine = malloc(size);
    sysctlbyname("hw.machine", machine, &size, NULL, 0);
    NSString *platform = [NSString stringWithUTF8String:machine];
    free(machine);
    return platform;
} 
```

根据[Models - The iPhone Wiki](http://theiphonewiki.com/wiki/index.php?title=Models)， 的返回值`platform`是其中之一

*   iPad2,5
*   iPad2,6
*   iPad2,7

对于 iPad mini。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:35:34.620

苹果的观点可能是你不需要知道这一点。:( 您的应用在 iPad 1 或 2 屏幕和 iPad mini 屏幕上的行为在各个方面都完全相同。就像素而言，它们的大小相同。

并且设备的每个其他方面，例如它的硬件功能（例如它是否有相机？）都可以通过适当的 API 以使用该硬件的正常方式进行检查。

# php - 每 10 秒刷新多个表列

> ID：13543775
> 
> 赞同：0
> 
> 时间：2012-11-24T17:39:39.247
> 
> 标签：php, ajax

我有一个数据表，需要每 10 秒刷新一次，而无需重新加载页面。但是只有表中的某些列需要刷新，而不是表中的所有数据。我用 PHP 编写应用程序。我怎样才能做到这一点？这是使用 ajax 长轮询的正确方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:41:58.890

当您需要立即刷新表时，您需要长轮询。你说 10 秒是可以的，所以你不需要长时间的汇集。只需使用 ajax 异步调用。

# css - 如何设置 Django 表单字段的样式？

> ID：13543776
> 
> 赞同：0
> 
> 时间：2012-11-24T17:39:48.453
> 
> 标签：css, django, django-forms

我有一个大小合适的 Django 项目。我有很多模型，因此也有很多`modelForms`. 在这个项目中，我有超过 50-60 个表格，每个表格都有 5 到 30 个字段（快速数学：总共大约 250-500 个字段）。

现在，我想对所有这些表单字段进行样式设置，以便在我的项目中具有连贯的、非标准的样式。我不想为输入字段、下拉菜单和按钮等保留标准的 Web 样式。我知道我可以使用`attrs={'class':'my_class'}`. 但是，这需要我将类分配给每个表单的每个字段。因此，非常乏味和*大量*重复。

鉴于我有超过 500 个字段，我应该如何设置所有这些字段的样式？能够在一处更改样式并将其反映在任何地方都很棒。

我正在考虑使用`jQuery`来查找所有`<input>`字段并在加载页面时添加一个 CSS 类。但是，我不禁认为应该有一种更简单的 Django 风格的方法来实现这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:43:25.387

您不必使用类来使用 css 设置样式，在这种情况下也不需要 jQuery。

假设您在某处有一些全局样式表，您可以这样做

```
input[type="text"]{
    border: 1px solid #f0f;
} 
```

这将为文本类型的所有输入设置样式。

# php - Codeigniter - 在此服务器上找不到请求的 URL

> ID：13543779
> 
> 赞同：1
> 
> 时间：2012-11-24T17:39:56.080
> 
> 标签：php, codeigniter, codeigniter-url

在过去的几天里，我的挫败感上升到了新的高度。我试图在 codeigniter 中做一个简单的登录系统，但我无法让它正常工作。

提交登录表单时出现以下错误：

在此服务器上找不到请求的 URL /wishlist/login_controller/login。

这是表格：

```
<form method="post" action="<?php echo base_url()?>login_controller/login">
<input type="text"placeholder="E-mail" id="email" name="email">
<input type="password" placeholder="Password" id="password" name="password">
<input class="btn btn-primary span2" type="submit" id="sign-in" value="Sign In">
</form> 
```

这是我在 login_controller 中的登录功能：

```
class Login extends CI_Controller {

function login() {

    $data['error'] = 0;

    if ($_POST) {

        $this->load->model('user_model');
        $email = $this->input->post('email', true);
        $password = $this->input->post('password', true);
        $user = $this->user_model->login($email, $password);

        if (!$user) {
            $data['error'] = 1;
        } else {
            $this->session->set_userdata('userID', $user['userID']);
            $this->session->set_userdata('firstname',    $user['firstname']);

            redirect(base_url().'admin_controller');

        }
    }

    $this->load->view('home_view');
} 
```

我在本地主机上使用 wampserver。这是它尝试访问的 url：localhost/wishlist/login_controller/login

我是否正确假设 base_url() 之后的第一部分是控制器，第二部分是该控制器中的函数？

配置文件夹中的一些设置。

```
$config['base_url'] = '';
$config['index_page'] = 'index.php';
$route['default_controller'] = "site_controller"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:44:28.530

请重命名您的控制器

```
class Login extends CI_Controller { 
```

至

```
class Login_Controller extends CI_Controller { 
```

那么你可以做

```
<form method="post" action="<?php echo site_url('login_controller/login'); ?>">
<input type="text"placeholder="E-mail" id="email" name="email">
<input type="password" placeholder="Password" id="password" name="password">
<input class="btn btn-primary span2" type="submit" id="sign-in" value="Sign In">
</form> 
```

然后使用这个：

```
$config['base_url'] = 'http://localhost/wishlist/';
$config['index_page'] = ''; 
```

和 htacees：

```
RewriteEngine On
RewriteBase /wishlist
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /wishlist/index.php/$1 [L] 
```

如果还不够，请在以下行切换 config.php 文件：

```
| URI PROTOCOL
|--------------------------------------------------------------------------
|
| This item determines which server global should be used to retrieve the
| URI string.  The default setting of 'AUTO' works for most servers.
| If your links do not seem to work, try one of the other delicious flavors:
|
| 'AUTO'            Default - auto detects
| 'PATH_INFO'       Uses the PATH_INFO
| 'QUERY_STRING'    Uses the QUERY_STRING
| 'REQUEST_URI'     Uses the REQUEST_URI
| 'ORIG_PATH_INFO'  Uses the ORIG_PATH_INFO
|
*/
$config['uri_protocol'] = 'AUTO'; 
```

我使用 AUTO 也许你需要 QUERY_STRING 或 REQUEST_URI 选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:04:37.910

将您的 login() 方法更改为 user_login 之类的方法，因为如果您不将该方法用作构造函数，则对类和方法使用相同的名称是不正确的。

尝试像这样访问您的网址

```
http://localhost/wishlist/index.php/login/user_login 
```

由于您没有更改任何 sttting 并且没有添加 htaccess 文件，因此您的代码应该可以正常访问，因此 codeiginter 具有访问 url 之类的模式

```
http://localhost/folder_name/index.php/controller_name/method_name 
```

并且您的访问 URL 似乎不正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T18:51:41.723

你同时有2个问题：

1.  您的表单指向“login_controller”，而您的控制器被称为“登录”（这已经得到回答）。

2.  您**不能**有一个与您的控制器以相同方式命名的方法。

    此类方法（除非您的类在命名空间中，但 CodeIgniter 不是这种情况）作为类构造函数执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T18:07:52.637

`action="<?php echo base_url()?>login_controller/login">`当控制器的名称为`"login"`and时，您调用`method "login"`。

您需要致电 `base_url('login/login');` 并确定，设置`base_url`in `config.php`，您已设置 index_page 。

也许你没有`.htaccess`，那么你需要打电话`mysite.com/index.php/login/login/`

# javascript - 使用 Jquery 读取 JSON 值

> ID：13543782
> 
> 赞同：1
> 
> 时间：2012-11-24T17:40:23.763
> 
> 标签：javascript, jquery, json

我正在尝试从 JSON 提要创建 2 个数组，然后计算两者的平均值。首先，我将数组的方式是这样的：

```
$.getJSON('jasonfile.json', function(rawdata) {
  var array_one = [];
  var array_two = [];

  $.each(rawdata, function(i, entry) {
    if(entry["geslacht"] == "Man") {
      array_one.push(entry["key"]);
    else {
      array_two.push(entry["key"]);
    }
  )};
)}; 
```

这很好用，除非我查看我的控制台`array_one`似乎是某种对象数组，而 `array_two 似乎是一个普通数组。因此，当我尝试像这样计算两者的平均值时：

```
var array_one_total = 0;
$.each(array_one, function() {
  array_one_total += this;
});

array_one_average = array_one_total/array_one.length; 
```

我得到一个正确和错误的价值。`array_one`在我的控制台中像这样记录“NaN”，而 array_two 显示正确的平均值：

![Javascript奇怪的结果在控制台](../Images/276c5907896e03e2247061ca680a41fb.png)

这似乎是数组格式的问题，但我不明白为什么返回第二个值是正确的，因为我对它们都使用了相同的方法。

如果我将两个数组都直接记录到控制台会发生什么，您可以看到它们的不同显示方式：

![控制台日志](../Images/1135f9fb62a5c18dc044f61fe14981d8.png)

好吧，我收到很多回复，要求我提供整个代码，数组的数量使其更难阅读，但这里是：

```
$.getJSON('propedeuse201112.json', function(rawdata) {
  var ucd_male = [];
  var ucd_female = [];
  var internetstandaarden_male = [];
  var internetstandaarden_female = [];
  var understanding_design_male = [];
  var understanding_design_female = [];
  var taal_in_context_male = [];
  var taal_in_context_female = [];
  var vormgeving_male = [];
  var vormgeving_female = [];
  var marketing_male = [];
  var marketing_female = [];
  var h_en_c_male = [];
  var h_en_c_female = [];
  var programmeren_male = [];
  var programmeren_female = [];
  var m_en_i_male = [];
  var m_en_i_female = [];
  var mediageschiedenis_male = [];
  var mediageschiedenis_female = [];
  var business_mapping_male = [];
  var business_mapping_female = [];
  var plug_and_play_male = [];
  var plug_and_play_female = [];
  var slc_male = [];
  var slc_female = [];

  $.each(rawdata, function(i, entry) {
    if(entry["geslacht"] == "Man") {
      ucd_male.push(entry["ucd"]);
      internetstandaarden_male.push(entry["internetstandaarden"]);
      understanding_design_male.push(entry["understanding design"]);
      taal_in_context_male.push(entry["Taal in context"]);
      vormgeving_male.push(entry["Vormgeving"]);
      marketing_male.push(entry["Marketing"]);
      h_en_c_male.push(entry["H&C"]);
      programmeren_male.push(entry["Programmeren"]);
      m_en_i_male.push(entry["M&I"]);
      mediageschiedenis_male.push(entry["Mediageschiedenis"]);
      business_mapping_male.push(entry["Business Mapping"]);
      plug_and_play_male.push(entry["Plug & Play"]);
      slc_male.push(entry["SLC"]);
    } else {
      ucd_female.push(entry["ucd"]);
      internetstandaarden_female.push(entry["internetstandaarden"]);
      understanding_design_female.push(entry["understanding design"]);
      taal_in_context_female.push(entry["Taal in context"]);
      vormgeving_female.push(entry["Vormgeving"]);
      marketing_female.push(entry["Marketing"]);
      h_en_c_female.push(entry["H&C"]);
      programmeren_female.push(entry["Programmeren"]);
      m_en_i_female.push(entry["M&I"]);
      mediageschiedenis_female.push(entry["Mediageschiedenis"]);
      business_mapping_female.push(entry["Business Mapping"]);
      plug_and_play_female.push(entry["Plug & Play"]);
      slc_female.push(entry["SLC"]);
    }

  });

  var ucd_male_total = 0;
  $.each(ucd_male, function(index,item) {
    ucd_male_total += parseInt(item);
  });
  ucd_male_average = ucd_male_total/ucd_male.length;

  var ucd_female_total = 0;
  $.each(ucd_female, function(index,item) {
    ucd_female_total += parseInt(item);
  });
  ucd_female_average = ucd_female_total/ucd_female.length;

  console.log(ucd_male);
  console.log(ucd_female);  

}); 
```

下面的结构`rawdata`（这是一个条目）：

```
[{"id":1,"geslacht":"Vrouw","totaal punten":60,"project      1":9,"ucd":6,"internetstandaarden":7,"understanding design":7,"Teamproject deel 1":6,"Taal in context":6,"Vormgeving":7,"Marketing":6,"Students in Motion":7,"Teamproject deel 2":7,"H&C":6,"Programmeren":7,"M&I":7,"Project 3":6,"Mediageschiedenis":6,"Business Mapping":7,"Plug & Play":7,"SLC":7,"Studieregie":8,"plaats":"JOPPE","geboortejaar":1990,"vooropleiding":"HAVO","vooropleiding afgerond in":2009}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:48:02.730

看起来您的代码包含一些拼写错误。

```
var array_one_total = 0;
$.each(array_one, function() {
  array_one += this;
}); 
```

它只是行不通。我想你想这样做：

```
var array_one_total = 0;
$.each(array_one, function(index, value) {
  array_one_total += value;
}); 
```

你谈到了一个，`array_two`但我只看到一个关于这个的代码行`array_two`。所以我不明白怎么`array_two`能包含任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:50:25.340

您的代码中有几个严重的拼写错误

```
 $.each(rawdata, function(i, entry) {
    if(entry["geslacht"] == "Man") {
      array_one.push(entry["key"]);
    else {
      array_one.push(entry["key"]); /* <===== should be array_two*/
    }
  )};

var array_one_total = 0;
$.each(array_one, function() {
  array_one += this;/* <===== should be array_one_total*/
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:46:46.960

似乎问题出在`this`. 尝试跟随。

```
$.each(array_one, function(index,item) {
     array_one += parseInt(item);
}); 
```

还要在除法之前检查 array_one 是否为 NAN。

# c# - 将 .dll 嵌入 .exe

> ID：13543783
> 
> 赞同：5
> 
> 时间：2012-11-24T17:40:27.243
> 
> 标签：c#, dll, embed, dotnetzip

> **可能重复：**
> [在 c# .exe 中嵌入 .net dll](https://stackoverflow.com/questions/4043522/embed-net-dll-in-c-sharp-exe)

我一直在尝试将 .dll（特别是 Ionic.Zip.dll）嵌入到我的应用程序中，然后使用 CodeDom 编译一个新的 .exe 并需要 Ionic.Zip.dll。我希望能够分发我的程序而无需任何额外的 .dll。如果工作目录中有DLL，则程序和编译后的程序运行良好。我没有使用 ILMerge，因为编译后的程序需要 .dll，我不能强迫用户获取 ILMerge。但是，如果没有 .dll，我会收到此错误。

原始程序不会编译出现此错误的代码

```
error CS0006: Metadeta file 'Ionic.Zip.dll" could not be found. 
```

编译后的程序（在原程序工作目录下有dll时编译）

```
Description:
Stopped working

Problem signature:
Problem Event Name: CLR20r3
Problem Signature 01:   scrub.exe
Problem Signature 02:   0.0.0.0
Problem Signature 03:   50b0f364
Problem Signature 04:   Scrub
Problem Signature 05:   0.0.0.0
Problem Signature 06:   50b0f364
Problem Signature 07:   1
Problem Signature 08:   38
Problem Signature 09:   System.IO.FileNotFoundException
OS Version: 6.1.7601.2.1.0.256.48
Locale ID:  1033 
```

调试错误

```
Could not load file or assembly 'Ionic.Zip, Version=1.9.1.8, Culture=neutral, PublicKeyToken=edbe51ad942a3f5c' or one of its dependencies. The system cannot find the file specified. 
```

在 CodeDom 编译器中，我使用了以下代码：

```
Params.ReferencedAssemblies.Add("Ionic.Zip.dll"); 
```

为了解决这个问题，我已经尝试过并尽可能地关注它。[http://adamthetech.com/2011/06/embed-dll-files-within-an-exe-c-sharp-winforms/](http://adamthetech.com/2011/06/embed-dll-files-within-an-exe-c-sharp-winforms/)

这是我在原始应用程序中的代码：

```
 public MainWindow()
    {
        AppDomain.CurrentDomain.AssemblyResolve += (sender, args) =>
        {
            string resourceName = new AssemblyName(args.Name).Name + ".dll";
            string resource = Array.Find(this.GetType().Assembly.GetManifestResourceNames(), element => element.EndsWith(resourceName));

            using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(resource))
            {
                Byte[] assemblyData = new Byte[stream.Length];
                stream.Read(assemblyData, 0, assemblyData.Length);
                return Assembly.Load(assemblyData);
            }
        };

        InitializeComponent();

        inniZip();
     }

    private void inniZip()
    {
        Ionic.Zip.ZipOption test = new Ionic.Zip.ZipOption();
    } 
```

我也在编译的程序源中放入了类似的代码。我已经被这个错误困住了一段时间，我似乎无法弄清楚。

提前致谢，

# python - 如何以小写形式存储所有用户名？

> ID：13543785
> 
> 赞同：0
> 
> 时间：2012-11-24T17:40:30.300
> 
> 标签：python, google-app-engine, web-applications

```
username = db.StringProperty(required = True) 
```

^如何使用 GAE 以小写形式存储用户名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:53:52.320

`my_string.lower()`将 python 字符串转换为全部小写

# java - Android SDK：如何获取日历事件的不在办公室状态？

> ID：13543793
> 
> 赞同：5
> 
> 时间：2012-11-24T17:41:43.220
> 
> 标签：java, android, events, calendar

Galaxy S3、ICS、Java：对于即将到来的 CalendarContract 事件，我如何确定该事件是否会离开办公室，例如即将到来的假期？使用 CalendarContract.Events 我可以成功读取日历事件信息，包括可用性（忙碌、空闲、暂定）。我的手机将即将到来的假期显示为不在办公室，因此我希望找到一种方法来检索事件的状态，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:48:50.343

作为路障的解决方法，您可以尝试比较事件的位置。要么让用户设置他们的工作地点，要么从办公室活动中读取它。然后所有带有位置的东西！=您可以显示为不在办公室的办公室位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-24T14:37:10.107

使用当前的 Android SDK（29 级），日历提供程序似乎没有透露此信息。根据[文档](https://developer.android.com/reference/android/provider/CalendarContract.EventsColumns#AVAILABILITY)：

> 可用性（在 API 级别 14 中添加）
> 
> 如果此事件算作忙碌时间或仍然是可以安排的空闲时间。列名。
> 
> 类型：整数（AVAILABILITY_BUSY、AVAILABILITY_FREE、AVAILABILITY_TENTATIVE 之一）

但是，由于存在日历应用程序可以正确地将不在办公室显示为忙碌状态，我假设这些应用程序实现了自己的日历同步并且不依赖于[Android Calendar Provider](https://developer.android.com/guide/topics/providers/calendar-provider)。

# android - 从 ListView 获取检查项目时，获取 SparseBooleanArray.size() 始终为 0

> ID：13543799
> 
> 赞同：4
> 
> 时间：2012-11-24T17:42:17.383
> 
> 标签：android, listview

我在列表视图中使用复选框，并希望在列表视图中获取所选项目。问题是即使在列表视图中选中复选框，SparseBooleanArray.size() 始终保持为 0。我搜索了很多但问题仍然存在同样。这是我正在使用的代码：

```
checked = lvShowContacts.getCheckedItemPositions();
if(checked != null)
{
    for (int i=0; i<checked.size(); i++) {
        if (checked.valueAt(i)) {
            String item = lvShowContacts.getAdapter().getItem(
                    checked.keyAt(i)).toString();
            Log.v("Message",item + " was selected");
        }
    }
    Log.v("Message","checked.size() is "+ checked.size());
    //  else
    //the item is not checked, do something else
} 
```

在这里我总是得到`checked.size()`。`0`请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-12T16:24:48.630

使用 SparseBooleanArray 的一些提示：

设 sba 为 SparseBooleanArray 对象。

`sba.size()`返回 Array 中的项目总数。现在数组包含一个整数值到位置的映射，在这种情况下，所选列表视图项的位置被映射到相应的布尔状态。用于`sba.keyAt(i)`查找布尔数组的整数值，然后用于`sba.get(sba.keyAt(i))`查找映射到整数键的相应布尔值。

您可以像这样循环遍历数组：

```
SparseBooleanArray sba= getListView().getCheckedItemPositions();
    for(int i=0;i<sba.size();i++){
        Log.i("SparseBoolaeanArray","Element "+sba.keyAt(i)+":status::"+sba.get(sba.keyAt(i))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T02:07:50.650

对我来说，checked.size() 总是返回 0 并且值似乎首先达到 12，但具有正确的键/值对。所以我只是使用 ListView 的 getCount 来获取迭代的限制，并在遇到 IndexOutOfBoudsException 时完成。丑得要命，但到目前为止它有效。

```
SparseBooleanArray checked = this.list.getCheckedItemPositions();
            ArrayList<String> ids = new ArrayList<String>();

            try {
                for (int i = 0; i < this.list.getCount(); i++){
                    if (checked.valueAt(i)){                        
                        Object r = this.list.getItemAtPosition(checked.keyAt(i));
                        ids.add(r.getId());                 
                    }               
                }
            } catch (IndexOutOfBoundsException e) {
                Log.e(TAG, e.getMessage(),e);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T12:46:22.027

如果要循环选择的行

```
int len = listView.getCount();
SparseBooleanArray checked = listView.getCheckedItemPositions();
for (int i = 0; i < len; i++)
 if (checked.get(i)) {    
  /* do whatever you want with the checked item */
 } 
```

您将在此线程中找到此答案：[如何从多选列表视图中获取所选项目](https://stackoverflow.com/questions/4590856/how-to-get-selected-items-from-multi-select-list-view#answer-4590897)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-17T08:24:50.327

您可以通过将 sparsebooleanarray 转换为字符串，然后将其拆分为“，”来获取其大小。但是让我告诉你，这不是一个非常值得信赖的方法，据我所知，起初它只获取检查的项目，它存储：`{0=true, 1=true, 2=true}`但假设你以某种方式保存了它的状态（使用共享首选项等）然后取消选中选中的项目，然后返回， `{0=true, 1=true, 2=false},ie, this time the size of the array will be 3 even when true state is only carried by 2.` 所以在依赖 sparsebooleanarray 的大小时要小心，即使它返回一个计数。

# c# - 引用精灵类时 System.NullReferenceException 错误（XNA C#）

> ID：13543803
> 
> 赞同：0
> 
> 时间：2012-11-24T17:42:35.357
> 
> 标签：c#, xna, nullreferenceexception

构建代码时，它构建得很好，但不会运行。每当精灵使用精灵类中的变量时，调试它会导致 Nullreferenceexception 错误（Setup() 中的第一个实例

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace BilliardsEngine2D
{
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        Sprite CueBall;
        Sprite DirectionArrow;
        Sprite RedBall;

        SpriteFont myFont;

       //SoundEffect HitCue;
       //SoundEffect Collision;

        int ScreenWidth, ScreenHeight;

        float distance = 0.0f;
        public static float MasterVolume { get; set; }

        KeyboardState oldState;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
            graphics.PreferredBackBufferHeight = 500;
            graphics.PreferredBackBufferWidth = 750;
        }

        protected override void Initialize()
        {
            Setup();
            SoundEffect.MasterVolume = 0.01f;
            base.Initialize();
        }

        private void Setup()
        {
            ScreenHeight = graphics.GraphicsDevice.Viewport.Height;
            ScreenWidth = graphics.GraphicsDevice.Viewport.Width;
            CueBall.Rotation = 0.0f;
            DirectionArrow.Rotation = CueBall.Rotation;
            CueBall.Velocity = Vector2.Zero;
            CueBall.Position = new Vector2(ScreenWidth / 2, ScreenHeight / 2);
            DirectionArrow.Position = CueBall.Position;
        }

        protected override void LoadContent()
        {
            spriteBatch = new SpriteBatch(GraphicsDevice);

            CueBall = new Sprite(Content.Load<Texture2D>("Sprites/CueBall"));
            DirectionArrow = new Sprite(Content.Load<Texture2D>("Sprites/Arrow"));
            RedBall = new Sprite(Content.Load<Texture2D>("Sprites/RedBall"));

            myFont = Content.Load<SpriteFont>("LucidaSans");
        }

        protected override void Update(GameTime gameTime)
        {
            KeyboardState newState = Keyboard.GetState();

            if (newState.IsKeyDown(Keys.Escape)) //Pause
            {
                Exit();
            }

            if (newState.IsKeyDown(Keys.Left)) //Rotate Left
            {
                CueBall.Rotation -= 0.05f;
                DirectionArrow.Rotation = CueBall.Rotation;
            }

            if (newState.IsKeyDown(Keys.Right)) //Rotate Right
            {
                CueBall.Rotation += 0.05f;
                DirectionArrow.Rotation = CueBall.Rotation;
            }

            if (newState.IsKeyDown(Keys.Space) && oldState.IsKeyUp(Keys.Space)) //Power Up
        {
        }

        if (newState.IsKeyUp(Keys.Space) && oldState.IsKeyDown(Keys.Space)) //Fire
        {
            HitCueBall();
        }

        oldState = newState;

        SideCollision();
        //BallCollision();

        base.Update(gameTime);
    }

    private void AccelerateCueBall() //
    {
        CueBall.Velocity += new Vector2(
            (float)(Math.Cos(CueBall.Rotation - MathHelper.PiOver2) * 0.05f),
            (float)((Math.Sin(CueBall.Rotation - MathHelper.PiOver2) * 0.05f)));

        if (CueBall.Velocity.X > 7.5f)
        {
            CueBall.Velocity = new Vector2(5.0f, CueBall.Velocity.Y);
        }
        if (CueBall.Velocity.X < -7.5f)
        {
            CueBall.Velocity = new Vector2(-5.0f, CueBall.Velocity.Y);
        }
        if (CueBall.Velocity.Y > 7.5f)
        {
            CueBall.Velocity = new Vector2(CueBall.Velocity.X, 5.0f);
        }
        if (CueBall.Velocity.Y < -7.5f)
        {
            CueBall.Velocity = new Vector2(CueBall.Velocity.X, -5.0f);
        }
    }

    public void SideCollision()
    {
        CueBall.Position += CueBall.Velocity;

        if (CueBall.Position.X + CueBall.Width < 0)
        {
            CueBall.Position = new Vector2(ScreenWidth, CueBall.Position.Y);
        }
        if (CueBall.Position.X - CueBall.Width > ScreenWidth)
        {
            CueBall.Position = new Vector2(0, CueBall.Position.Y);
        }
        if (CueBall.Position.Y + CueBall.Height < 0)
        {
            CueBall.Position = new Vector2(CueBall.Position.X, ScreenHeight);
        }
        if (CueBall.Position.Y - CueBall.Height > ScreenHeight)
        {
            CueBall.Position = new Vector2(CueBall.Position.X, 0);
        }
    }

    private bool CheckBallCollision(Sprite CueBall, Sprite RedBall)
    {
        Vector2 position1 = CueBall.Position;
        Vector2 position2 = RedBall.Position;

        float Cathetus1 = Math.Abs(position1.X - position2.X);
        float Cathetus2 = Math.Abs(position1.Y - position2.Y);

        Cathetus1 *= Cathetus1;
        Cathetus2 *= Cathetus2;

        distance = (float)Math.Sqrt(Cathetus1 + Cathetus2);
        if ((int)distance < CueBall.Width)
            return true;

        return false;
    }

    private void HitCueBall()
    {

        Vector2 Velocity = new Vector2(
            (float)Math.Cos(CueBall.Rotation - (float)MathHelper.PiOver2),
            (float)Math.Sin(CueBall.Rotation - (float)MathHelper.PiOver2));

        Velocity.Normalize();
        Velocity *= 6.0f;
        CueBall.Velocity = Velocity;
        CueBall.Position = CueBall.Position + CueBall.Velocity;
    }

    protected override void UnloadContent()
    {

    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Green);

        spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend);

        spriteBatch.Draw(CueBall.Texture, CueBall.Position, null, Color.White, CueBall.Rotation, CueBall.Center, CueBall.Scale, SpriteEffects.None, 1.0f);
        spriteBatch.Draw(DirectionArrow.Texture, DirectionArrow.Position, null, Color.White, DirectionArrow.Rotation, DirectionArrow.Center, 
            DirectionArrow.Scale, SpriteEffects.None, 1.0f);

        spriteBatch.End();
        base.Draw(gameTime);
    }
} 
```

精灵类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework;

namespace BilliardsEngine2D
{
class Sprite
{
    Texture2D texture;

    Vector2 position;
    Vector2 center;
    Vector2 velocity;

    float rotation;
    float scale;

    public Sprite(Texture2D texture)
    {
        this.texture = texture;

        position = Vector2.Zero;
        center = new Vector2(texture.Width / 2, texture.Height / 2);
        velocity = Vector2.Zero;

        Rotation = 0.0f;
        Scale = 1.0f;
    }

    public Texture2D Texture
    {
        get { return texture; }
    }

    public Vector2 Position
    {
        get { return position; }
        set { position = value; }
    }

    public Vector2 Center
    {
        get { return center; }
    }

    public Vector2 Velocity
    {
        get { return velocity; }
        set { velocity = value; }
    }

    public float Rotation
    {
        get { return rotation; }
        set
        {
            rotation = value;
            if (rotation < -MathHelper.TwoPi)
                rotation = MathHelper.TwoPi;
            if (rotation > MathHelper.TwoPi)
                rotation = -MathHelper.TwoPi;
        }
    }

    public float Scale
    {
        get { return scale; }
        set { scale = value; }
    }

    public int Width
    {
        get { return texture.Width; }
    }

    public int Height
    {
        get { return texture.Height; }
    }
} 
```

任何想法如何解决这一问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:53:22.860

我相信您的`setup`方法在方法之前被调用`LoadContent`。

根据[此文档](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.game.loadcontent.aspx) `LoadContent`，由`Initialize`.

```
 protected override void Initialize()
    {
        Setup();
        SoundEffect.MasterVolume = 0.01f;
        base.Initialize();
    } 
```

我想说这是公平的假设这`base.Initialize()`是从哪里`LoadContent`调用的。

我相信您的代码正在破坏，因为您试图在方法中实例化您的`Sprite`类的属性**之前**`Setup()`在方法中设置它们。 **`LoadContent()`**

 **我建议您在修改 Sprite 属性的位置移动语句：

```
CueBall.Rotation = 0.0f; 
```

在你用`new Sprite()`你的`LoadContent`方法实例化它们之后。

```
CueBall = new Sprite(Content.Load<Texture2D>("Sprites/CueBall")); 
```

在你的`LoadContent`方法中

或者您可以将`Setup`呼叫移至您的`LoadContent`方法**

# android - 如何重新填充 ViewPager 中的每个片段？

> ID：13543804
> 
> 赞同：1
> 
> 时间：2012-11-24T17:42:36.737
> 
> 标签：android, android-fragments, android-viewpager

我正在创建一个应用程序，我必须在其中显示问题类别以及与每个类别相关的问题。每个问题类别都有不同数量的问题。在选择一个类别时，我必须将问题屏幕显示为滑动屏幕，这意味着用户可以通过滑动移动到下一个问题。所以，我设计了一个有两个`Fragment`. 第一个片段是一个`ListFragment`显示类别列表，另一个是`ViewPager`显示滑动问题。我能够`ViewPager`为第一个类别（包含 3 个问题）填充问题片段，但是当我从列表中选择另一个类别（包含 5 个问题）时，我无法替换前三个`Fragment`。它只是添加了最后两个问题`ViewPager`。我想`ViewPager`用新的数据集重新填充。我在下面添加了代码。

**QuestionFragmentActivity**

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.questions_activity);

        if (findViewById(R.id.question_section_fragment_container) != null) {
            /*
             * if (getIntent().getExtras() != null) { return; }
             */
            QuestionSection firstFragment = new QuestionSection();
            firstFragment.setArguments(getIntent().getExtras());
            getSupportFragmentManager()
                    .beginTransaction()
                    .add(R.id.question_section_fragment_container,
                            firstFragment).commit();
        }

        categoryPosition = 0;//static variable to hold the position of category item selected.
        CategoryVO cvo = QuestionFragmentActivity.categoryList
                .get(categoryPosition);

        if (findViewById(R.id.question_fragment_container) != null) {
            /*
             * if (getIntent().getExtras() != null) { return; }
             */
            QuestionContainer firstFragment = new QuestionContainer();
            firstFragment.setCvo(cvo);
            firstFragment.setArguments(getIntent().getExtras());
            getSupportFragmentManager()
                    .beginTransaction()
                    .add(R.id.question_fragment_container,
                            firstFragment).commit();
        }
   } 
```

**QuestionContainer.java**

```
public class QuestionContainer extends Fragment {
ViewPager mPager;
CategoryVO cvo;

public CategoryVO getCvo() {
    return cvo;
}
public void setCvo(CategoryVO cvo) {
    this.cvo = cvo;
}
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.question_container, container,
            false);
    ArrayList<QuestionFragment> fragmentList=new ArrayList<QuestionFragment>();
    for(QuestionVO qvo: cvo.getQuestionList()){
        fragmentList.add(new QuestionFragment(qvo));
    }
    mPager = (ViewPager) view.findViewById(R.id.question_viewpager);
    MyAdapter mAdapter = new MyAdapter(getActivity().getSupportFragmentManager());
    mAdapter.setFragmentList(fragmentList);
    mPager.setAdapter(mAdapter);
    return view;
}

public static class MyAdapter extends FragmentPagerAdapter {
    ArrayList<QuestionFragment> fragmentList;       

    public ArrayList<QuestionFragment> getFragmentList() {
        return fragmentList;
    }
    public void setFragmentList(ArrayList<QuestionFragment> fragmentList) {
        this.fragmentList = fragmentList;
    }
    public MyAdapter(FragmentManager fm) {
        super(fm);
    }
    @Override
    public int getCount() {
        return fragmentList.size();
    }

    @Override
    public Fragment getItem(int position) {
                    return fragmentList.get(position);
    }
    @Override
    public int getItemPosition(Object object) {
            return POSITION_NONE;
    }
}
} 
```

**问题部分**

```
public class QuestionSection extends ListFragment implements OnClickListener {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.list_fragment1, container, false);
    return view;
}
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    Button hideListSection = (Button) getActivity().findViewById(
            R.id.btn_hide_section);
    hideListSection.setOnClickListener(this);
    ListView lv = getListView();
    ArrayList<String> listItem = new ArrayList<String>();
    for (CategoryVO cvo : QuestionFragmentActivity.categoryList) {
        listItem.add(cvo.getCategoryName());
    }
    lv.setAdapter(new SectionListAdapter(getActivity(), listItem));
    lv.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int pos,
                long arg3) {
            if (pos == 1) {
                  FragmentManager fragmentManager = getFragmentManager();
                  FragmentTransaction fragmentTransaction = fragmentManager
                  .beginTransaction();
                  QuestionFragmentActivity.categoryPosition=pos; CategoryVO cvo=
                  QuestionFragmentActivity.categoryList.get(pos);

                  QuestionContainer fragment = new QuestionContainer();
                  fragment.setCvo(cvo);
                  fragmentTransaction.replace(R.id.question_fragment_container
                  , fragment); fragmentTransaction.commit();
            }
        }
    });
}   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:53:18.850

```
ViewPager.setAdapter(pager_adapter) 
```

强制重绘 ViewPager。首先进行适当的更改并执行此操作以进行刷新。

**编辑：** Adapter.notifyDataSetChanged() 使现有数据无效以准备新数据。如果您直到现在还没有使用它，请调查一下。

# javascript - 为什么facebook javascript登录停止工作

> ID：13543811
> 
> 赞同：0
> 
> 时间：2012-11-24T17:43:18.413
> 
> 标签：javascript, facebook, sdk

我已经使用 fb javascript sdk 一段时间了，通过我的移动网络应用程序登录用户。据我所知，直到大约 2 周前，它都运作良好。现在，它没有将我重定向回我的网页，而是向我显示了一个空白页面。当我使用 chrome 的 javascript 控制台进行调试时，我看到一些文件被返回，称为“permission.request”或类似的东西，就是这样。

AFAIK 我没有改变任何东西。

我的js代码是：

```
window.fbAsyncInit = function() {
    FB.init({
    appId: '#############',
        channelURL : options.webBaseUrl + 'channel.php',
        status : true,
        cookie : true,
        xfbml : true,
        oauth : true
}); 
```

稍后，登录：

```
FB.login(function(response) {
    }, {
        scope : 'user_birthday, email, publish_actions',
    redirect_uri: '<my web page url>'
    }); 
```

我正确看到登录页面，输入用户/密码，点击“登录”，然后得到空白页面。

我的应用程序未处于沙盒模式，已为 Web 和移动 Web 正确配置了域名，它运行良好，直到最近没有明显变化...

有任何想法吗？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T09:09:38.093

你在用 Chrome 吗？如果是这样，请检查您的隐私设置。如果禁用第三方 cookie，网站上的各种 js 片段都会中断。

# colors - 着色链接的一部分？

> ID：13543812
> 
> 赞同：0
> 
> 时间：2012-11-24T17:43:19.310
> 
> 标签：colors, hyperlink

我在为链接的一部分着色时遇到了一个小问题。整个链接都用图案着色，但我希望第一部分用另一种图案着色。

这是我的html

```
<div id="header-wrap">
        <div id="header">
            <nav>
           <ul>
                    <li id="mig"><a href="#mig">#Om mig</a></li>    
                    <li id="portfolio"><a href="#portfolio">#Portfolio</a></li>
                    <li id="kontakt"><a href="#kontakt">#Kontakt</a></li>
                </ul>
        </nav>
        </div>
    </div> 
```

我想用另一种模式填充的是文本其余部分前面的“#”。

这是我的CSS：

```
#header nav li {
display: inline;
font-family: 'BebasNeueRegular';
color: white;  /* Fallback: assume this color ON TOP of image */
background: url(../img/debut_light.png) repeat;
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
-moz-background-clip: text;
-moz-text-fill-color: transparent;
background-clip: text;
text-fill-color: transparent;
}

nav #hjem {
margin-right: 530px;
}

nav #mig {
margin-right: 50px;
}

nav #portfolio {
margin-right: 50px;
} 

nav #kontakt {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:45:04.207

在跨度标记之间包含哈希 #

HTML

```
<a href="#"><span>#</span>Portfolio</a> 
```

CSS

```
a span{
    color:black;
 } 
```

# xcode - Xcode 中的输出构建选项

> ID：13543816
> 
> 赞同：3
> 
> 时间：2012-11-24T17:43:28.683
> 
> 标签：xcode, cocoapods

我正在尝试调试 CocoaPods 无法正常工作的原因。

这里有一个类似的帖子对我没有用：[iOS - Build failed with CocoaPods cannot find header files](https://stackoverflow.com/questions/12002905/ios-build-fails-with-cocoapods-cannot-find-header-files)

权威的 CocoaPods 文章似乎是这样的：[https ://github.com/CocoaPods/CocoaPods/wiki/Creating-a-project-that-uses-CocoaPods](https://github.com/CocoaPods/CocoaPods/wiki/Creating-a-project-that-uses-CocoaPods)

这表明：“如果某些东西似乎不起作用，首先确保您没有完全覆盖项目构建设置中 Pods.xcconfig 文件中设置的任何选项。要从项目的构建设置中为选项添加值，请在前面添加带有 $(inherited) 的值列表。”

我不清楚“在值列表前面加上 $(inherited)”是什么意思。我认为他们的意思是在标题搜索路径前面加上我已经尝试过但没有奏效的方法。但是，我已经建立了一个全新的项目并添加了 CocoaPods，所以我假设我没有覆盖 Pods.xcconfig 文件中设置的任何选项。我想测试这些选项的值 - 例如

```
PODS_ROOT = ${SRCROOT}/Pods 
```

可能是一个很好的起点。

在构建阶段如何在控制台中输出它？或者是否有不同的方法来检查这些文件，因为当我尝试自动完成它们时文件没有出现？

例如

```
#import "AFNetworking.h" 
```

即使它已由 CocoaPods 安装和设置，也不会自动完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T22:34:53.907

正如 Bill Burgess 所说，您需要确保您的标头搜索路径包含 $(inherited)。我还将*/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include*添加到搜索路径中。我的项目为标准类和 Pod 项目中的类构建并自动完成。

希望这可以帮助。

# c# - SQLite 的 C# 包装器

> ID：13543819
> 
> 赞同：3
> 
> 时间：2012-11-24T17:44:06.533
> 
> 标签：c#, sqlite, wrapper

之前已经问过这个问题（[1](https://stackoverflow.com/questions/93654/is-there-a-net-c-wrapper-for-sqlite) , [2](https://stackoverflow.com/questions/2974058/how-to-use-sqlite-in-c-sharp-without-an-ado-wrapper)），但不幸的是，所有以前的答案都不再相关，因为它们适用于旧版本的 .NET 框架，要么不再工作，要么不受支持。

所以，我的问题是：是否有支持 .NET 4 等的 SQLite 的 C# 包装器？

我试图搜索，但我找到的所有二进制文件都不起作用，对于旧版本或商业:(

至于这个（[http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)），这似乎是我需要它给我的：

```
Could not load file or assembly 'System.Data.SQLite, Version=1.0.82.0,
Culture=neutral, PublicKeyToken=db937bc2d44ff139' or one of its dependencies.
An attempt was made to load a program with an incorrect format. 
```

我正在为 net 4 和 64 pc 使用“64 位 Windows (.NET Framework 4.0) 的预编译二进制文件”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:51:29.707

事实上，你已经找到了正确的地方。您的问题可能来自您使用了错误版本的 System.Data.SQLite.dll，因为其中有两个，一个用于 x86，一个用于 x64。

尝试使用 Nuget 而不是手动下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:49:16.313

以下库工作正常AFAIK：

*   [http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)（免费）

*   [http://www.devart.com/dotconnect/sqlite/](http://www.devart.com/dotconnect/sqlite/)（商业）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:51:08.307

综合列表位于[http://www.sqlite.org/cvstrac/wiki?p=SqliteWrappers](http://www.sqlite.org/cvstrac/wiki?p=SqliteWrappers)（在标题“.NET Framework”下）和[http://nuget.org/packages?q=sqlite](http://nuget.org/packages?q=sqlite)。不幸的是，两个页面都没有评论，所以 YMMV。

* * *

我安装了包 System.Data.SQLite (x86/x64) 但我得到了错误

> 无法加载 DLL 'SQLite.Interop.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-17T16:35:11.463

devart 解决方案有 2 个版本，一个 ($$) 支持 ef、nhiberate 等。另一个是免费的，更基本的。版本对比： http: [//www.devart.com/dotconnect/sqlite/editions.html](http://www.devart.com/dotconnect/sqlite/editions.html)

我不为他们工作，也没有使用过这个特定的产品，但我使用过他们的其他软件（mysql 工作室）并且非常满意。

# php - 如何在 wordpress 模板中获取外部链接？

> ID：13543820
> 
> 赞同：-1
> 
> 时间：2012-11-24T17:44:05.990
> 
> 标签：php, wordpress-theming, wordpress

在 single.php 中，我试图获取自定义字段的值，该字段在自定义字段“wpcf-website”中具有帖子条目的网站。所以我尝试了：

```
<?php if (get_post_meta($post->ID, 'wpcf-website', true)) { ?>
<p>Web Site: <a href="http//:<?php echo get_post_meta($post->ID, 'wpcf-website', true); ?>" target="_blank"><?php echo get_post_meta($post->ID, 'wpcf-website', true); ?></a></p>
<? }?> 
```

哪个在显示中有效，但实际链接在我的网站内，因此被破坏：

`http://mysite.com/my-post-name/http//:www.ccbtoday.org`

如何让它显示字段的值，只需在前面加上 http://？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:52:10.443

如果这是您网站上的实际代码，那么您的 http 协议中有错字。它应该是“http://”，而不是“http//:”。这将解决您看到的问题。

# php - 如何正确放大曼德布罗？

> ID：13543821
> 
> 赞同：0
> 
> 时间：2012-11-24T17:44:15.967
> 
> 标签：php, mandelbrot

我正在尝试放大我的 mandelbrot 并且我阅读了这个问题：[How to perform Simple Zoom into Mandelbrot Set](https://stackoverflow.com/questions/8381675/how-to-perform-simple-zoom-into-mandelbrot-set?rq=1)但我很难理解它并且它不起作用。当我像这样计算新的实数和复数时：

```
双 Re_factor = (MaxRe-MinRe)/(ImageWidth-1);
双 Im_factor = (MaxIm-MinIm)/(ImageHeight-1);

双 newMinRe = MinRe + (Re_factor* x1);
双 newMaxRe = MinRe + (Re_factor* x2);
双 newMinIm = MinIm + (Im_factor* y1);
双 newMaxIm = MinIm + (Im_factor* y2);

```

新的 mandelbrot 在两个轴上都有点扭曲？怎么了？这是一个示例：[http](http://www.phpdevpad.de/index.php?id=190) ://www.phpdevpad.de/index.php?id=190 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:29:52.803

显示区域失真（y 轴不够大）。你的方程很好。

# c - 从源代码编译 gtk

> ID：13543823
> 
> 赞同：1
> 
> 时间：2012-11-24T17:44:25.233
> 
> 标签：c, build, compilation, gtk, gtk3

我正在尝试编译`gtk+-3.2.0`，但我收到一条错误消息`./configure`：

```
checking for GLIB - version >= 2.29.14... 
*** 'pkg-config --modversion glib-2.0' returned 2.32.4, but GLIB (2.34.0)
*** was found! If pkg-config was correct, then it is best
*** to remove the old version of GLib. You may also be able to fix the error
*** by modifying your LD_LIBRARY_PATH enviroment variable, or by editing
*** /etc/ld.so.conf. Make sure you have run ldconfig if that is
*** required on your system.
*** If pkg-config was wrong, set the environment variable PKG_CONFIG_PATH
*** to point to the correct configuration files
no
configure: error: 
*** GLIB 2.29.14 or better is required. The latest version of
*** GLIB is always available from ftp://ftp.gtk.org/pub/gtk/. 
```

我真的有 GLIB 2.34.0（我也从源代码编译过），但我不知道如何 gtk 知道这个库。我已将 PKG_CONFIG_PATH 更改为指向新 glib 安装所在的路径，`ldconfig`但没有区别。通过修改 /etc/ld.so.conf 我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:05:46.447

`PKG_CONFIG_PATH`应包含您要使用的 GLib 版本的 .pc 文件所在目录的路径。

否则，请使用您的包管理器来检测哪个包安装了您不想使用的 .pc 文件。并删除该包。例如，在基于 rpm 的发行版上，运行：

```
strace -eopen pkg-config --modversion glib-2.0 2>&1 | grep "\.pc" 
```

它将返回 pkg-config 检测到的 .pc 文件的位置。

```
open("/usr/lib64/pkgconfig/glib-2.0.pc", O_RDONLY) = 3 
```

然后检测这个文件属于哪个包：

```
rpm -qf /usr/lib64/pkgconfig/glib-2.0.pc 
```

这是我的 Mageia 2 系统上的结果：

```
lib64glib2.0-devel-2.32.4-1.1.mga2 
```

删除此软件包将删除妨碍您的 .pc。`PKG_CONFIG_PATH`但是，如果删除包也会尝试删除您仍想使用的其他依赖项，您应该更喜欢该方法。

# javascript - 在 Angular js ng-repeat 之后重新绑定 jquery

> ID：13543829
> 
> 赞同：3
> 
> 时间：2012-11-24T17:45:01.003
> 
> 标签：javascript, jquery, angularjs, binding, angularjs-ng-repeat

我`$http.get()`通过调用rest api使用服务填充angularJS中的数组。该数组使用 显示`ng-repeat`。有 Jquery 代码可以在悬停在每个`<li>`标签上时显示一个按钮。`$http`导致获取数据的延迟，此时 Jquery 将完成绑定。所以悬停功能不起作用。有什么解决方法吗？

```
<!doctype html>
<html ng-app>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script src="angular.js"></script>
<script src="jquery.js"></script>
<script>
$(document).ready(function() {
    myFunction();
});
var myFunction= function(){
$("#orders ul li").hover(
        function() {
            $(this ).find(".butt-view").show();
        },
        function() {
            $(this ).find(".butt-view").hide();
        });
}
</script>
<script>
function PhoneListCtrl($scope) {
    $scope.phones = $http.get(url);
}
</script>
<style>
ul{list-style-type:none;}
ul li{background-color:#e1eff2; padding:5px 6px;}
ul li:hover{background-color:#fff;}
.butt-view{background-color:#feb801; border-radius:4px; color:#fff; font: bold 12px Arial, Helvetica, Sans-serif; padding:5px 7px; margin-top:3px; width:40px }
</style>
</head>
<body ng-controller="PhoneListCtrl">
<div id="orders">
<ul>
<li ng-repeat="phone in phones" >
  {{phone.name}}
  <p>{{phone.snippet}}</p>
  <p class="butt-view">View</p>
</li>
</ul>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-24T20:28:15.660

虽然 jQuery 方法可能工作正常，但这并不是真正的 AngularJS 解决问题的方法。

AngularJS 提倡以声明方式表达的 UI（换句话说，我们确实描述了一个期望的效果，而不是指示为了实现效果而要采取的每一个小步骤）。**使用指令我们可以告诉 AngularJS 我们希望我们的 UI 看起来如何以响应模型突变。因此，使用 AngularJS，我们更专注于在模板中以声明方式描述 UI，然后通过模型突变来驱动这个 UI**。AngularJS 将完成剩下的繁重工作。

这一切听起来可能有点神秘，所以这里是 AngularJS 解决的问题（模型不会改变，只有模板会改变）：

```
<ul>
<li ng-repeat="phone in phones" ng-mouseenter="showView=true" ng-mouseleave="showView=false">
  {{phone.name}}
  <p>{{phone.snippet}}</p>
  <p class="butt-view" ng-show="showView">View</p>
</li>
</ul> 
```

请注意，这就是使其工作所需的*全部*内容：无需向 DOM 元素添加 id，也无需编写*任何*JavaScript 代码。**它允许我们删除 14 行 JavaScript 代码并完全删除对 j​​Query 的依赖**。甜，不是吗？

最后这里是一个工作 jsFiddle：http: [//jsfiddle.net/GBwLN/4/](http://jsfiddle.net/GBwLN/4/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-24T17:48:35.363

使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)，这是新`.on()`jQuery 方法引入的更好方法，只需替换以下代码即可：

```
$("#orders ul li").hover(
        function() {
            $(this ).find(".butt-view").show();
        },
        function() {
            $(this ).find(".butt-view").hide();
        }); 
```

对于这个：

```
$("#orders").on('mouseenter mouseleave', 'li', function(event) {
     if (event.type == 'mouseenter') {
         $(this ).find(".butt-view").show();
     } else  {
         $(this ).find(".butt-view").hide();
     }
}); 
```

这样，您将事件处理程序附加到您的`#orders`div，而不是单个`li`元素，当一个`li`元素悬停时，事件将冒泡直到到达您的处理程序`#orders`。这种方法更有效，适用于动态添加的新 li。

顺便说一句，我使用的 `mouseenter mouseleave`事件等同`hover`于我认为更具可读性的事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-15T20:27:58.710

您应该使用事件委托，但是您也可以使用指令来实现这一点：

HTML：

```
<li ng-repeat="phone in phones" awesome-item>
  {{phone.name}}
  <p>{{phone.snippet}}</p>
  <p class="butt-view">View</p>
</li> 
```

指示：

```
angular.module('darthvader', [])
  .directive('awesomeItem', function() {
    return function($scope, element, attrs) {
        element.hover(function() {
            $(this).find(".butt-view").show();
        },
        function() {
            $(this).find(".butt-view").hide();
        });
    };
  }); 
```

# android - Android片段：显示片段时*总是*调用生命周期方法？

> ID：13543835
> 
> 赞同：6
> 
> 时间：2012-11-24T17:45:56.600
> 
> 标签：android, android-fragments

每当向用户显示片段时，我都需要执行一些代码。

通过 API 查看我能看到的最接近的钩子方法是 onResume。但是，通过我的代码进行调试，当用户选择后退按钮返回到先前显示的片段时，似乎**没有调用 onResume。**

只是为了澄清我看到的行为：

我有一个“父”活动，它在 ActionBar 中配置选项卡......以及 2 个片段 F1 和 F2。

用户选择一个选项卡并将 F1 加载到活动中。按下按钮后，用户可以导航到 F2。这不是一个单独的选项卡... F2 被交换到布局中。

添加日志语句，我可以看到当用户在 F2 上选择后退按钮时，会发生以下情况......

1) onPause() 在 F2 上被调用。2) F1 被加载到活动中......但**没有调用F1 上的 onResume()**

目前日志中没有错误。

有什么想法我在这里做错了吗？

提前致谢，

尼尔。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T21:00:01.183

好吧，这似乎是飞行员失误。我在活动中的片段之间切换的原始代码是......

```
public void switchFragment(Fragment newFragment, String tag) {
    getSupportFragmentManager()
            .beginTransaction()
            .add(android.R.id.content, newFragment)
            .addToBackStack(tag)
            .commit();
} 
```

上面代码中对add()的调用其实应该是replace()。似乎不替换活动中的片段会与后退按钮行为混淆。

必须诚实并承认我不能 100% 确定为什么会发生这种情况。但是，在进行更改后，一旦调用后退按钮，就会在目标片段上调用 ​​onResume() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:55:38.277

这个有点奇怪的问题，因为当该特定方法被设计为调用的事件发生并且满足所有条件时，保证调用任何现有的类方法。选择任何适合您最想完成的任务。[在此处](http://developer.android.com/guide/components/fragments.html)查看文档

![在此处输入图像描述](../Images/02393432aa924f59cbb1af1c40996690.png)

# assembly - 创建后汇编 32 位写入文件

> ID：13543837
> 
> 赞同：0
> 
> 时间：2012-11-24T17:46:03.017
> 
> 标签：assembly, output, masm, 32-bit, irvine32

好吧，我想我在创建文件后没有得到写入文件的过程。我是这方面的初学者，所以这项任务的帮助对我来说是巨大的。

> 说明（对称加密）： 1\. 编码 a. 要求用户键入一些文本 b. 要求用户键入此范围 [1-255] 内的私钥。执行范围有效性检查。C。使用提供的私钥加密输入文本，将密文放在用户命名的文件中。2\. 解码 要求用户指定要解码的文件。湾。从该文件加载密文并尝试对其进行解密，而不假设私钥与编码中使用的密钥相同。C。将所有试验结果放在一个由用户命名的单独文件中。d。找出最合理的结果（或原始明文）是什么。

```
INCLUDE Irvine32.inc
BUFMAX = 128                    ; maximum buffer size
KEYMAX = 128                    ; maximum buffer size
BUFFER_SIZE = 5000

.data
sPrompt BYTE        "Enter some text message:       ", 0
keyPrompt   BYTE        "Enter a private key [1-255]:       ", 0
cFile   BYTE        "Enter a filename for cypher text: ", 0
sEncrypt    BYTE        "Cypher text                    ", 0
sDecrypt    BYTE        "Decrypted:                 ", 0
error   BYTE        "The key must be within 1 - 255!    ", 0
buffer  BYTE         BUFMAX + 1 DUP(0)
bufSize DWORD    ?
keyStr  BYTE         KEYMAX + 1 DUP(0)
keySize DWORD    ?
key     DWORD    ?
filename    BYTE        "newfile.txt                    ", 0
fileHdl DWORD   ?
bufFile BYTE        BUFFER_SIZE DUP (?)
textMsg DWORD   ?

.code main PROC
call InputTheString             ; input the plain text
call InputTheKey                ; input the security key
call CypherFile             ; input a cypher filename
;call TranslateBuffer           ; encrypt the buffer
;mov edx, OFFSET sEncrypt           ; display encrypted message
;call DisplayMessage
;call TranslateBuffer           ; decrypt the buffer
;mov edx, OFFSET sDecrypt           ; display decrypted message
;call DisplayMessage
exit

main ENDP

InputTheKey PROC
pushad                      ; save 32-bit registers

LK: mov edx, OFFSET keyPrompt ; display a prompt call WriteString ; Enter a private key [1-255] call Crlf ; start a new line call ReadInt ; read int into system mov key, eax ; store int into keyStr cmp eax, 255 ; compare newly read int ja LC ; jump if above 255 to LC cmp eax, 1 ; compare newly read int jb LC ; jump if below 1 to LC jmp LR ; if between range jump to LR LC: mov edx, OFFSET error ; The key must be within 1 - 255! call WriteString ; Display the error call Crlf ; start a new line loop LK ; loop back to enter the security key LR: popad ; restore the registers ret InputTheKey ENDP

CypherFile PROC pushad mov edx, OFFSET cFile ; "Enter a filename for cypher text call WriteString ; Enter a name for encrypted file call Crlf ; Start a new line mov edx, OFFSET bufFile mov ecx, BUFMAX call ReadString ; Store the filename in eax mov edx, OFFSET bufFile call CreateOutputFile ;pop eax mov eax, fileHdl mov edx, OFFSET textMsg ;mov ecx, BUFFER_SIZE call WriteToFile popad call CloseFile ret
;mov filename, eax
;mov edx, OFFSET filename
;push eax
;mov eax, fileHdl
;mov edx, OFFSET bufFile
;mov ecx, BUFFER_SIZE
;mov edx, "C:\outputtext.txt"

;mov edx, OFFSET filename
;mov ecx, SIZEOF filename
;push eax
;mov eax, bufSize
;call WriteToFile

CypherFile ENDP

InputTheString PROC
pushad                      ; save 32-bit registers
mov edx, OFFSET sPrompt         ; display a prompt
call WriteString                ; "Enter some text message"
call Crlf                       ; start a new line
mov ecx, BUFMAX             ; maximum character count
mov edx, OFFSET buffer          ; point to the buffer
call ReadString             ; input the string
mov textMsg, eax
mov bufSize, eax                ; save the length
popad
ret

InputTheString ENDP

DisplayMessage PROC
pushad
call WriteString
mov edx, OFFSET buffer          ; display the buffer
call WriteString
call Crlf
call Crlf
popad
ret

DisplayMessage ENDP

TranslateBuffer PROC
pushad
mov ecx, bufSize                ; loop counter
mov esi, 0                  ; index 0 in buffer
mov edi, 0                  ; index 0 in the key

L1: mov al, keyStr[edi] ; get a character from encryption key xor buffer[esi], al ; translate a byte inc esi ; point to next byte inc edi ; go to next position in key cmp edi, keySize ; compare if equal to size of the key jb L2 mov edi, 0 ; reset to beginning of the key L2: loop L1 popad ret TranslateBuffer ENDP

END main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:19:59.753

看起来你只是盲目地把东西放在一起。

Irvine 包含了他所有函数的源代码，它们包括关于它们采用什么参数的注释。 `WriteToFile`接受 3 个参数 - `eax`== 要写入的文件句柄 `edx`== 指向包含要写入文件的数据的缓冲区的指针 == 要写入文件 `ecx`的数据长度。

`CreateOutputFile`已经返回了一个文件句柄，`eax`但是你正在正确`mov eax, fileHdl` 设置它`edx`，现在要写入的数据大小，`ReadString`返回这个`eax` 你也有`popad`错误的地方。

```
call    ReadString ; Store the filename in eax 
push    eax                 ; save string length

mov     edx, OFFSET bufFile 
call    CreateOutputFile 
mov     hFile, eax          ; save file handle
pop     ecx                 ; restore string length into ecx
mov     edx, OFFSET textMsg 
call    WriteToFile 

mov     eax, hFile          ; move hfile into ecx
call    CloseFile 
popad 
ret 
```

看到不同？

你还有其他问题。你的密码不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T04:08:45.910

猜猜你没有让它工作？好吧，我很无聊，所以清理了你的代码，并修复了一些东西。不过，我并没有那么容易让你离开，我在代码中的某个地方添加了一个小错误，因此你无法提交正确的代码/输出文件。

Kip，为初学者写了一本好书。他虽然没有使用 MASM 的全部功能。对于初学者来说，MASM 的伟大之处在于它的`invoke`宏。它会检查调用的 proc 参数并捕获许多错误。

在您的另一篇文章中，您缺少调用参数吗？好吧，如果您使用 invoke with `WriteToFile`，那么 MASM 会抓住并告诉您。但我猜他没有表现出来？

Anywhoo，试试这个：

```
INCLUDE d:\irvine32\Irvine32.inc
includelib d:\irvine32\irvine32.lib
includelib d:\irvine32\kernel32.lib
includelib d:\irvine32\user32.lib
BUFMAX = 128                                ; maximum buffer size
BUFFER_SIZE = 5000

.data
sPrompt     BYTE    "Enter some text message: ", 0
keyPrompt   BYTE    "Enter a private key [1-255]: ", 0
cFile       BYTE    "Enter a filename for cypher text: ", 0
sEncrypt    BYTE    "Cypher text: ", 0
sDecrypt    BYTE    "Decrypted: ", 0
error       BYTE    "The key must be within 1 - 255!", 0

.data?
bufSize     DWORD   ?
key         DWORD   ?
bufFile     BYTE    BUFFER_SIZE DUP (?)
buffer      BYTE    BUFMAX + 1 DUP (?)

.code 
main PROC
    call    InputTheString                  ; input the plain text
    call    InputTheKey                     ; input the security key

    call    TranslateBuffer                 ; encrypt the buffer

    mov     edx, offset sEncrypt
    call    WriteString

    mov     edx, OFFSET buffer              ; display encrypted message
    call    WriteString
    call    Crlf

    call    CypherFile 

    call    TranslateBuffer                 ; decrypt the buffer

    mov     edx, offset sDecrypt
    call    WriteString

    mov     edx, OFFSET buffer              ; display encrypted message
    call    WriteString
    call    Crlf

    call    WaitMsg
    exit

main ENDP

InputTheString PROC
    mov     edx, OFFSET sPrompt             ; display a prompt
    call    WriteString                     ; "Enter some text message"

    mov     ecx, BUFMAX                     ; maximum character count
    mov     edx, OFFSET buffer              ; point to the buffer
    call    ReadString                      ; input the string

    push    offset buffer
    call    Str_length
    mov     bufSize, eax                    ; save the length   
    ret
InputTheString ENDP

InputTheKey PROC

PromptForKey:
    mov     edx, OFFSET keyPrompt           ; display a prompt 
    call    WriteString                     ; Enter a private key [1-255] 
    call    ReadInt                         ; read int into system 
    test    eax, eax
    jz      BadKey
    cmp     eax, 255
    jg      BadKey

    mov     key, eax
    ret

BadKey:
    mov     edx, OFFSET error               ; The key must be within 1 - 255! 
    call    WriteString  
    call    Crlf
    jmp     PromptForKey
InputTheKey ENDP

CypherFile PROC 
    mov     edx, OFFSET cFile               ; "Enter a filename for cypher text 
    call    WriteString                     ; Enter a name for encrypted file 

    mov     edx, OFFSET bufFile 
    mov     ecx, BUFMAX 
    call    ReadString                      ; Store the filename in eax 

    mov     edx, OFFSET bufFile 
    call    CreateOutputFile 
    push    eax                             ; save file handle

    mov     ecx, bufSize      
    sub     ecx, 5         
    mov     edx, OFFSET buffer 
    call    WriteToFile 

    pop     eax                             ; restore file handle
    call    CloseFile 
    ret
CypherFile ENDP

TranslateBuffer PROC
    mov     ecx, bufSize
    mov     eax, key
    xor     esi, esi
XorByte:
    xor     buffer[esi], al
    inc     esi
    cmp     esi, ecx
    jne     XorByte
    ret
TranslateBuffer ENDP

DisplayMessage PROC

    mov     edx, OFFSET buffer          ; display the buffer
    call    WriteString
    call    Crlf
    call    Crlf
    ret

DisplayMessage ENDP
END main 
```

# java - 区域设置 en_GB 的包“（默认包）”中缺少键“registration.jsp.title”的消息

> ID：13543842
> 
> 赞同：1
> 
> 时间：2012-11-24T17:46:50.433
> 
> 标签：java, web-applications, struts

我完全是新手`Struts 1.3.10`，我正在尝试实现一个简单的注册应用程序，但是每次我尝试运行该死的东西时，我都会收到以下消息：

```
org.apache.jasper.JasperException: javax.servlet.ServletException: javax.servlet.jsp.JspException: Missing message for key "registration.jsp.title" in bundle "(default bundle)" for locale en_GB
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:491) 
```

我的`registration.jsp`文件包含以下标记库引用：

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib uri="/tags/struts-bean" prefix="bean" %>
<%@ taglib uri="/tags/struts-html" prefix="html" %>
<%@ taglib uri="/tags/struts-logic" prefix="logic" %>

<html:html>

<head>
    <title><bean:message key="registration.jsp.title"/></title>
    <style type="text/css">
        .error { color: red; font-weight:bold }
    </style>
</head> 
```

而且我相信通过 URI 引用可以正确找到标记库`web.xml`，如下所示：

```
<taglib>
    <taglib-uri>/tags/struts-bean</taglib-uri>
    <taglib-location>/WEB-INF/tags/struts-bean.tld</taglib-location>
  </taglib> 
```

所以我假设问题与`Application.properties`包含消息的我的文件的位置有关。

谁能告诉我这应该放在哪里？目前它位于一个名为 resources 的文件夹中，与 一样`WEB-INF`，它是`Web pages`.

我正在使用 NetBeans 7.2 并将`Struts 1.3.10`框架导入到我的项目中，并且正在使用 Tomcat 6.X。

# java - Java中的随机枢轴快速排序

> ID：13543843
> 
> 赞同：6
> 
> 时间：2012-11-24T17:46:55.390
> 
> 标签：java, random, pivot, quicksort

> **可能重复：**
> [在 Java 中使用随机枢轴进行快速排序](https://stackoverflow.com/questions/3358034/quick-sort-with-random-pivot-in-java)

下面编写的快速排序代码使用数组的第一个元素作为枢轴，然后对数组进行排序。现在我想随机选择枢轴而不是第一个，然后对数组进行排序，我被卡住了，请告诉我我可以在下面的代码中进行哪些更改以获得完美的结果。

```
import java.util.*;
import javax.swing.JOptionPane;

public class Quicksort {

public static void main(String[] args) {
    String arraylength = JOptionPane.showInputDialog("Enter the length of the array.");

    int a = Integer.parseInt(arraylength);
    if (a == 0) {
        System.out.println("Null Length");
    } else {
        int[] list = new int[a];

        for (int i = 0; i < a; i++) {
            String input = JOptionPane.showInputDialog("Input the number.");
            int c = Integer.parseInt(input);
            list[i] = c;
        }

        System.out.println("Before");
        for (int i = 0; i < list.length; i++) {
            System.out.print(list[i] + " ");
        }
        partition(list, 0, list.length - 1);

        System.out.println("\nAfter partitionaing");
        for (int i = 0; i < list.length; i++) {
            System.out.print(list[i] + " ");
        }
        quickSort(list, 0, list.length - 1);

        System.out.println("\nAfter Sorting");
        for (int i = 0; i < list.length; i++) {
            System.out.print(list[i] + " ");
        }
    }
}

private static int partition(int[] list, int first, int last) {
    int pivot = list[first];
    int low = first + 1;
    int high = last;

    while (high > low) {

        while (low < high && list[low] < pivot) {
            low++;
        }

        while (low < high && list[high] >= pivot) {
            high--;
        }

        if (high > low) {
            int temp = list[high];
            list[high] = list[low];
            list[low] = temp;
        }
    }
    while (high > first && list[high] >= pivot) {
        high--;
    }

    if (pivot > list[high]) {
        list[first] = list[high];
        list[high] = pivot;
        return high;
    } else {
        return first;
    }

}

private static void quickSort(int[] list, int first, int last) {
    if (last > first) {
        int pivotIndex = partition(list, first, last);
        quickSort(list, first, pivotIndex - 1);
        quickSort(list, pivotIndex + 1, last);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T17:49:02.360

您可以使用 java 中的[Random 类](http://docs.oracle.com/javase/8/docs/api/java/util/Random.html)：

```
Random rand = new Random();
int num = begin_sub_array + rand.nextInt(end_sub_array - begin_sub_array); 
```

这将从子数组的开头（begin_sub_array）到子数组的结尾（end_sub_array）生成一个值。您只需要获取变量`num`，并将其作为快速排序算法中的枢轴传递即可。

```
int pivot = list[num]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T18:12:02.170

使用`int rand = (int) (st + (Math.random()*((end-st)+1)));` 下面是代码

```
private E[] tofind;
private int sameCounter=0;
private int comparisions;
public void quickSort()
{
    quickInnerSort(0, tofind.length-1);
    System.out.println("jatin");
}
    /**
 * 
 * @param st index of the starting point of the array
 * @param end index of the ending point of the array
 * @param k rank of the element to be found out
 */
private void quickInnerSort(int st, int end)
{
    if(st>end)   
        return;

    //printWithComparisions();
    int cut = partition(st,end);        
    //check k lies in which partition

    quickInnerSort(st,cut-1);
    quickInnerSort(cut+1,end);

}

/**
 * 
 * @param st index of the array from where to partition
 * @param end index of the array till where to partition
 * @return index of the random number chosen to calculate
 */
private int partition(int st, int end)
{

    int rand = (int) (st + (Math.random()*((end-st)+1)));
    //System.out.println("rand ="+tofind[rand]+" index at "+rand);
    E x = tofind[rand];
    sameCounter=0;
    swap(end,rand);
    E x = tofind[end];
    int i = st-1;
    for(int j=st;j<=end-1;j++)
    {
        if(tofind[j].compareTo(x)==0)
            sameCounter++;
        if(tofind[j].compareTo(x)<0)
        {
            i = i+1;
            swap(i,j);
        }

    }
    swap(i+1,end);        
    return i+1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T17:53:06.183

尝试这样的事情： -

```
 int pivot = arr[left + rnd.nextInt(right - left)]; //rnd is a class Random object, which you could set as a private static final field.

  import java.util.Random;

  public class QuickSort {

/**
 * @param args
 */
public static void main(String[] args) {

      int i;
      int array[] = {10,9,1,2,3,4,100,200,300,400};  
      System.out.println(" Quick Sort\n\n");
      System.out.println("Values Before the sort:\n");
      for(i = 0; i < array.length; i++)
      System.out.print( array[i]+"  ");
      System.out.println();
      quickSort(array,0,array.length-1);
      System.out.print("Values after the sort:\n");
      for(i = 0; i <array.length; i++)
      System.out.print(array[i]+"  ");
      System.out.println(); 

}

public static int partition(int arr[], int left, int right)
{
      int i = left, j = right;
      int tmp;

      int pivot = arr[left + rnd.nextInt(right - left)];

      while (i <= j) {
            while (arr[i] < pivot)
                  i++;
            while (arr[j] > pivot)
                  j--;
            if (i <= j) {
                  tmp = arr[i];
                  arr[i] = arr[j];
                  arr[j] = tmp;
                  i++;
                  j--;
            }
      };

      return i;
}

public static void quickSort(int arr[], int left, int right) {
      int index = partition(arr, left, right);
      if (left < index - 1)
            quickSort(arr, left, index - 1);
      if (index < right)
            quickSort(arr, index, right);
}

 } 
```

# objective-c - 不涉及 cocos2d 的 Chipmunk / Box2D 教程

> ID：13543845
> 
> 赞同：0
> 
> 时间：2012-11-24T17:46:59.697
> 
> 标签：objective-c, ios, game-physics, box2d-iphone, chipmunk

我正在尝试对 UIKit 组件（例如 UIButtons）进行物理处理，并且我决定使用 Box2D 或 Chipmunk 将是最简单的方法。

然而，我发现的每一个危险教程都将它们与 cocos2d 结合使用，作为一个相对较新的程序员，我发现很难确定哪些部分适用于我的代码（没有 cocos2d），哪些不适用.

任何人都知道我的应用程序在 iOS6 中可以遵循的任何这些物理引擎的良好初学者教程吗？作为一个新的编码员，我的 C/C++ 知识也不是很好，这无济于事:(

实际上，我需要做的就是让一个 UIKit 组件（图像、按钮等）用我的手指四处移动并从屏幕边缘反弹。如果我能拥有其中两个，并让它们相互反弹，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:30:12.130

我们最近做了一些新的示例项目。其中之一是一个颜色匹配游戏，它有 Cocos2D 和 UIkit 的变体，都有 Chipmunk 和 Chipmunk Pro 的变体： [https ://github.com/slembcke/ChipmunkColorMatch](https://github.com/slembcke/ChipmunkColorMatch)

还没有完成编写所有变体的教程，但是代码的注释很好而且很短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T23:09:57.987

Chipmunk 网站上有两个专门使用 UIKit。SimpleObjectiveChipmunk 和 iPhoneSnap。 [http://chipmunk-physics.net/documentation.php](http://chipmunk-physics.net/documentation.php)

两者都使用 Objective-Chipmunk 包装器，但主要是为了利用内存管理并更好地适应 UIKit。C API 非常相似，因此不会有任何意外。网站上还有其他 C/OpenGL 示例。

# xaml - 为 ItemsControl 的项目设置 Canvas.Left

> ID：13543848
> 
> 赞同：2
> 
> 时间：2012-11-24T17:47:30.243
> 
> 标签：xaml, datatemplate, winrt-xaml

我正在开发一个 Windows 8 应用程序。我必须在画布内放置几个控件（图像、矩形）。如果我直接这样做，那么当我在子级（提到的控件）上使用“Canvas.Left”附加属性时一切都很好。但是，我想使用 MVVM。因此，我现在使用这样的 ItemsControl：

```
 <ItemsControl ItemsSource="{Binding MyObjects}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Canvas />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <Image Source="{Binding Image}" Visibility="{Binding IsImage, Converter={StaticResource boolConverter}}" />
                    <Rectangle Canvas.Left="{Binding Left}" Canvas.Top="{Binding Top}" Width="{Binding Width}" Height="{Binding Height}" Fill="{Binding Fill}" Visibility="{Binding IsNoImage, Converter={StaticResource boolConverter}}" />
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

除了附加的 Canvas 属性外，绑定正在工作。经过一番研究，我发现这是因为 ItemsControl 用 ContentPresenter 包装了它的孩子。因此，我尝试使用在 stackoverflow 上找到的解决方案，但没有成功：

```
<ItemsControl.ItemContainerStyle>
   <Style TargetType="ContentPresenter">
       <Setter Property="Canvas.Left" Value="{Binding Left}" />
   </Style>
</ItemsControl.ItemContainerStyle> 
```

添加此代码不会设置 Canvas.Left 属性（即使在从 DataTemplate 中删除绑定之后）。

我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:56:18.827

您的初始代码片段应该可以在不设置 contentpresenter 的情况下工作，因为“ItemTemplate”不需要 contentpresenter 来呈现。我建议检查您的 ViewModel 和“MyObjects”中保存的对象是否正在实现 IPropertyNotifyChanged。还要检查输出窗口以查看是否报告了任何绑定问题。

在没有看到有关如何设置视图模型的代码以及其中的代码的情况下，我无法提供进一步的帮助。

此外，虽然不在您的问题中，但您似乎正在 ViewModel 中设置查看特定属性。不是一个好主意 - 视图模型应该与查看相关问题无关。使用 MVVM 并不意味着在任何地方都使用绑定，并且应该在控件的 xaml 或引用样式中明确设置诸如设置 UI 控件布局之类的内容。

# sml - 由于类型不匹配，SML 中的打印错误

> ID：13543863
> 
> 赞同：0
> 
> 时间：2012-11-24T17:49:05.777
> 
> 标签：sml, smlnj, ml

我试图在 SML 中打印类型值但没有成功。请查看下面的代码，让我知道我需要做什么才能解决此问题。谢谢。

```
(* Language Definition *)
datatype = Id of string;

(* Expression Definition *)
datatype expr = 
Var of ident 
| Num of int 
| Plus of expr * expr
| Paren of expr;

val p = Id "x";
val p = Var p;
print(p); 
```

**这是我的错误：**

```
stdIn:175.1-175.9 Error: operator and operand don't agree [tycon mismatch]
  operator domain: string
  operand:         expr
  in expression:
    print p 
```

我尝试了很多组合和铸件，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T19:21:30.610

正如编译器所说，`print`只能用于打印字符串。如果您希望能够打印您的特定类型，则需要针对您的数据类型量身定制的打印功能。很痛苦，我知道。

试试这个：

```
fun print_expr (Var (Id name)) = print name
    | print_expr (Num n) = print (Int.toString n)
    | print_expr (Plus (lhs, rhs)) = (print_expr lhs; print " + "; print_expr rhs)
    | print_expr (Paren e) = (print "("; print_expr e; print ")")
print_expr p; 
```

# r - 获取一个向量在另一个向量中的索引

> ID：13543866
> 
> 赞同：0
> 
> 时间：2012-11-24T17:49:22.047
> 
> 标签：r

我有一个关于如何按列名填充矩阵的问题。我认为下面的例子可以清楚地说明我想要什么。

```
mat <- matrix(NA, nrow = 10, ncol = 5)
colnames(mat) <- c("Apple", "Orange", "Pear", "Grape", "Mango") 
```

现在我有一个新矩阵，其行名是 中列名的子集`mat`，并且具有任意顺序。

```
jmat <- matrix(rnorm(4), nrow = 4, ncol = 1)
rownames(jmat) <- sample(c("Apple", "Orange", "Grape", "Mango")) 
```

我想`mat`用 中的相应值填充 的第一行`jmat`。中的“Apple”的值`jmat`应该在中的“Apple”列中`mat`，等等。因为中没有“Pear”行`jmat`，所以中的“Pear”列`mat`仍然会是a `NA`。最简单的方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:55:37.793

外联：

```
merge(mat, t(jmat),all=T)
      Apple    Orange      Grape      Mango Pear
1  2.372201 0.8330786 -0.4295133 -0.8425752   NA
2        NA        NA         NA         NA   NA
3        NA        NA         NA         NA   NA
4        NA        NA         NA         NA   NA
5        NA        NA         NA         NA   NA
6        NA        NA         NA         NA   NA
7        NA        NA         NA         NA   NA
8        NA        NA         NA         NA   NA
9        NA        NA         NA         NA   NA
10       NA        NA         NA         NA   NA
11       NA        NA         NA         NA   NA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:23:04.387

我发现该`match`函数可以在另一个向量中给出一个向量的索引。

```
> jmat
             [,1]
Grape  -0.2728387
Apple   2.2843550
Mango  -1.3079324
Orange -0.6129420
> match(rownames(jmat), colnames(mat))
[1] 4 1 5 2
> ind <- match(rownames(jmat), colnames(mat))
> mat[1, ind] <- jmat[, 1]
> mat
         Apple    Orange Pear      Grape     Mango
 [1,] 2.284355 -0.612942   NA -0.2728387 -1.307932
 [2,]       NA        NA   NA         NA        NA
 [3,]       NA        NA   NA         NA        NA
 [4,]       NA        NA   NA         NA        NA
 [5,]       NA        NA   NA         NA        NA
 [6,]       NA        NA   NA         NA        NA
 [7,]       NA        NA   NA         NA        NA
 [8,]       NA        NA   NA         NA        NA
 [9,]       NA        NA   NA         NA        NA
[10,]       NA        NA   NA         NA        NA 
```

# iphone - OGL_ES 2.0：使用多个纹理单元与为单独的着色器重新绑定纹理

> ID：13543868
> 
> 赞同：3
> 
> 时间：2012-11-24T17:49:26.417
> 
> 标签：iphone, ios, optimization, opengl-es, textures

在我目前制作的游戏中，我有两个着色器：

*   一个用于纹理图集上的精灵和
*   一个单独加载的粒子形状纹理。（我决定将此纹理保留在图集中，因为我的生成器中的粒子是 GL_POINTS）。

目前，我将它们中的每一个绑定到一个单独的纹理单元，然后将每个着色器的统一设置为相应的纹理单元。我发现以这种方式绑定纹理一次是干净的，但想知道是否有任何理由说明这是一种不好的方法。

我已经广泛搜索了有关此方法的任何讨论，但似乎没有多少人这样做，我自己对它的安全性产生了怀疑。

有没有人自己使用过这种方法，或者知道为什么它可能不是一个好主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:29:25.260

间接地，是的，我使用这种方法并且它是安全的。但这是渲染引擎级别优化的副作用。

如果您避免多次绑定相同的纹理，您可以（也许）获得一些性能。在我的引擎中，在渲染某些东西之前，我只绑定尚未绑定的材质纹理。（按材质和纹理对实体进行分类后效率高）

因为可以同时使用多个纹理单元，所以测试是在纹理单元级别进行的。

这种优化对于大场景来说是值得的。（数百个绘图调用，至少有 30 个纹理）。

在您的情况下，因为只有两个纹理和两个着色器，您为什么要尝试删除一些纹理绑定？你能衡量你赢得了多少表现吗？你是否为此牺牲了灵活性？

薇薇安

# javascript - 函数外的全局变量返回未定义

> ID：13543869
> 
> 赞同：0
> 
> 时间：2012-11-24T17:49:34.713
> 
> 标签：javascript, global-variables

我尝试了很多不同的方法来避免从全局变量中获取 undefined ，但它会弄乱其余的代码。除了少数之外，我可以在所有函数中调用变量 this.userHunger。我知道我一定在某个地方出错了：

```
<html>
<head>
<script>
function user() 
{
    this.userHunger = 100;
    this.userHealth = 100;
    this.userFoodNumber = 10;

    this.checkForHungerHealthData = function() 
    {
        document.getElementById('userHealthDisplay').innerHTML = "Your Health:" + this.userHealth;
        document.getElementById('HungerBarVisual').innerHTML = "Your Hunger" + this.userHunger;
        document.getElementById('amountOfFood').innerHTML = "Amount of food" + this.userFoodNumber;
    }

    this.signInButton = function()
    {
        document.getElementById('myButtonSignIn').style.visibility="hidden";
        this.checkForHungerHealthData(); // displays current hunger and health
    }

    this.eatFood = function() 
    {
        if(this.userFoodNumber  > 0) 
        {
            this.userHealth = this.userHealth + 10;
            this.userHunger = this.userHunger + 50;
            this.userFoodNumber--;
            document.getElementById('amountOfFood').innerHTML = "Amount of food:" + this.userFoodNumber;
            document.getElementById('userHealthDisplay').innerHTML = "Your Health:" + this.userHealth;
            document.getElementById('HungerBarVisual').innerHTML = "Your Hunger is currently " + this.userHunger + "%";
        }
    }

    this.start=function()
    {
        this.hungerClockStart();
    }

    this.hungerClockStart=function()
    {
        this.setUserHungerClock(setInterval(this.updateHungerScreen,1000));
    }

    this.updateHungerScreen=function()
    {
        alert(this.userHunger); //Returns undefined
        if(this.userHunger >= 0) 
        {
            var subtractAmount=1;
            document.getElementById('HungerBarVisual').innerHTML = "Hunger is Currently at: " + this.userHunger + "%";
            this.userHunger--;
        }
    }
}

var user1 = new user();

</script>
</head>
<h1 id = "userHealthDisplay">Your Health:<br></h1>
<h1 id = "HungerBarVisual">Your Hunger:<br></h1>

<input id="myButtonSignIn" style="visibility:visible" type="button" value="Sign in" onclick="user1.signInButton(); user1.hungerClockStart()">

<body>
<h1 id = 'Notifyer1'><br></h1>
<h1 id = 'Notifyer2'><br></h1>
<h1 id = 'amountOfFood'>Amount of Food:</h1>
<input id="eatFoodButton" style="visibility:visible" type="button" value="Eat some food!" onclick="user1.eatFood()">

</body>
</html> 
```

我在 this.hungerScreenUpdate 中不断收到错误，不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:56:02.817

```
this.setUserHungerClock(setInterval(this.updateHungerScreen,1000)); 
```

需要是

```
this.setUserHungerClock(setInterval(this.updateHungerScreen.bind(this),1000)); 
```

在 JavaScript 中，`this`它是动态的，而不是词法的，因此`this`可以根据调用方式而改变。当您这样做时`setInterval(this.updateHungerScreen,1000)`，它不会`updateHungerScreen`以正确的`this`值调用。您可以使用`bind`将函数绑定到特定上下文。

* * *

正如评论者所建议的那样，如果您需要它在 IE8 及更低版本上工作，您需要填充`bind`或使用 Phrogz 的存储`this`为变量的技术。

* * *

## 更新

`this`有关JavaScript 工作原理的概述，请参阅[https://stackoverflow.com/a/13373383/1662998](https://stackoverflow.com/a/13373383/1662998)

就个人而言，我建议在`bind`IE8 及以下版本中进行填充。这样您就可以继续使用新功能，同时保持与旧浏览器的向后兼容性。只需将其添加到页面顶部的脚本中，就可以了：

```
if (!Function.prototype.bind)
    Function.prototype.bind = function(context/*, ...preArgs */) {

        var f = this,
            preArgs = Array.prototype.slice.call(arguments, 1);

        if (typeof f != 'function')
            throw new TypeError('Function expected.');

        if (context != null)
            context = Object(context);

        return function bound(/* ...args */) {
            var args = Array.prototype.slice.call(arguments);
            return f.apply(context, preArgs.concat(args));
        };

    }; 
```

# regex - 用正则表达式匹配“小于”或“小于或等于”符号

> ID：13543870
> 
> 赞同：0
> 
> 时间：2012-11-24T17:49:40.040
> 
> 标签：regex, sed

我无法将此模式 <= 与 sed 中的正则表达式匹配。我真正需要的是类似 [<|<=] 或类型匹配的东西。我可以让它与 .* 一起使用，但这偶尔会在该行的其余部分产生其他问题。示例行将是：

```
for (int j = 0 j < nspec ++j) 
```

或者

```
for (int j = jmin j <= jmax ++j) 
```

以下（部分）命令作为示例。

```
sed -n '/for (int *\([[:graph:]]\) *= *\([[:graph:]]\) *\1 *</p' filename 
```

会找到第一个模式，但是

```
sed -n '/for (int *\([[:graph:]]\) *= *\([[:graph:]]\) *\1 *<=/p' filename 
```

找不到第二个。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:52:43.637

字符类只匹配*一个*字符。（这意味着`|`被解释为文字管道字符，而不是交替）

您需要替换`[]`为`()`：

`(<|<=)`或者：`<=?`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:53:51.320

在 RegEx 中`?`，前一个元素是[可选](http://www.regular-expressions.info/optional.html)的。所以`<=?`意思是“给我小于，如果你有就等于”。

我不确定是否`?`需要在 sed 中转义，所以尝试两种方式，当你发现时请告诉我/更新:-)

# ios - 有没有办法从 iOS 中的 CLLocation 获取街道名称？

> ID：13543876
> 
> 赞同：2
> 
> 时间：2012-11-24T17:50:21.680
> 
> 标签：ios

在我的应用程序中，我需要知道用户所在街道的名称。目前我只知道获取用户位置和`CLLocationManger`对象并将其显示在 a`MKMapView`但我找不到任何方法来获取用户所在街道的名称。

有没有办法在有或没有 iOS sdk 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:22:47.137

从 iOS 5 及更高版本开始，您可以使用`CLGeocoder`. [我强烈建议您在此处](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html)查看位置感知编程指南。

为了获得街道，您应该使用`reverseGeocodeLocation:completionHandler:`. 在该完成处理程序中，您将收到一个对象数组`CLPlacemark`。要获取街道，只需使用键从`addressDictionary`CLPlacemark 对象中的字典中提取对象。`kABPersonAddressStreetKey`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T14:15:45.230

简单扩展：

```
import CoreLocation

typealias StreetNameHandler = (String?) -> Void

extension CLLocation {

    func streetNameWithCompletionBlock(completionBlock: StreetNameHandler) {

        CLGeocoder().reverseGeocodeLocation(self) { placemarks, error in

            if let addressDictionary = placemarks?.first?.addressDictionary, street = addressDictionary["Street"] as? String {
                completionBlock(street)
            }
        }
    }
} 
```

简单用法：

```
location.streetNameWithCompletionBlock { street in
    print("street \(street)")
} 
```

# java - Thymeleaf 中的模块化模板解析器

> ID：13543877
> 
> 赞同：3
> 
> 时间：2012-11-24T17:50:24.363
> 
> 标签：java, spring, spring-mvc, thymeleaf

我正在阅读[Thymeleaf + Spring 3 教程](http://www.thymeleaf.org/thymeleafspring3.html)并尝试构建模块化应用程序。我的目标是能够从类路径中的 Jars 加载百里香模板。

为此，我`SpringTemplateEngine`在下一个 xml 中配置了一个：

```
<bean id="templateEngine" class="org.thymeleaf.spring3.SpringTemplateEngine">
    <property name="templateResolvers">
        <util:set>
            <ref bean="servletContextTemplateResolver" />
            <ref bean="classpathPluginTemplateResolver" />
        </util:set>
    </property>
</bean>

<bean id="classpathPluginTemplateResolver"
    class="org.mael.codex.arcana.web.thymeleaf.templates.ClasspathPluginTemplateResolver">
    <property name="prefix" value="/META-INF/codexarcana/plugin/views" />
    <property name="suffix" value=".html" />
    <property name="templateMode" value="HTML5" />
</bean> 
```

和 ClasspathPluginTemplateResolver 代码：

```
public class ClasspathPluginTemplateResolver extends TemplateResolver {

public ClasspathPluginTemplateResolver() {
    super();
    super.setResourceResolver(new ClasspathTemplateResolver());
}

@Override
public void setResourceResolver(IResourceResolver resourceResolver) {
    throw new ConfigurationException("Cannot set a resource resolver on "
            + this.getClass().getName() + ". If "
            + "you want to set your own resource resolver, use "
            + TemplateResolver.class.getName() + "instead");
}
} 
```

和 ClasspathTemplateResolver：

```
public class ClasspathTemplateResolver implements IResourceResolver {

@Override
public String getName() {
    return this.getClass().getSimpleName();
}

@Override
public InputStream getResourceAsStream(
        TemplateProcessingParameters templateProcessingParameters,
        String resourceName) {

    if (resourceName == null || resourceName.isEmpty()) {
        throw new IllegalArgumentException("Resource name cannot be null");
    }

    try {
        return new ClassPathResource(resourceName).getInputStream();
    } catch (IOException e) {
        throw new RuntimeException("Cannot open resource '" + resourceName
                + "'", e);
    }
} 
```

}

如何避免 ClasspathPluginTemplateResolver 解析的模板中的名称冲突？

例子：

假设我有 2 个具有此目录结构的插件：

```
codexarcana-poll-plugin.jar
    ----/META-INF/codexarcana/plugin/views/wizard.html 
```

和

```
codexarcana-gravatar-plugin.jar
    ----/META-INF/codexarcana/plugin/views/wizard.html 
```

在这种情况下，我相信 ClasspathTemplateResolver 会返回错误的视图，或者会出现解决此类问题的冲突。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T11:54:18.617

`ITemplateResolver`扩展基类的接口的实现`org.thymeleaf.templateresolver.AbstractTemplateResolver`（就像所有开箱即用的实现一样）有一个`resolvablePatterns`属性，允许您指定一系列模式，这些模式将用于确定哪些视图将被该特定模板视为*可解析*引擎。这应该可以帮助您避免碰撞。

在那里您可以指定通配符模式，例如`admin/*`,`user/*/create`等。

请记住，这些模式适用于**视图名称**，而不是模板文件名本身。例如，如果您的模板是`/WEB-INF/templates/index.html`并且您的视图解析器添加了前缀`/WEB-INF/templates/`和后缀`.html`，那么您的*视图名称*是`index`，因此像这样的*可解析模式*`*.html`永远不会匹配。

此外，还有一个`order`属性确定了要求模板解析器解析视图的顺序。

免责声明，根据 StackOverflow 规则的要求：我是 Thymeleaf 的作者。

# python - 即使满足条件，如果在 for 循环中也不起作用

> ID：13543881
> 
> 赞同：1
> 
> 时间：2012-11-24T17:51:03.660
> 
> 标签：python

运行以下代码以将文本文件列中的值与给定数字进行比较，在本例中为 440

```
with open('test.txt', 'a+') as input:
 for line in input:
  columns = line.split(" ")
  print columns[5] #test
  if columns[5] == '440':
   print 'match' 
```

test.txt 只是：

```
0 0 0 0 0 1
0 0 0 0 0 440
0 0 0 0 0 1   
0 0 0 0 0 440
0 0 0 0 0 1
0 0 0 0 0 1 
```

print columns[5] 位从 txt 文件中打印出正确的值，但即使匹配 440，for 循环中的 if 也不起作用

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T17:53:09.367

由于您的 440 是最后一行，`column[5] == '440\n'`

您需要在比较之前去除这些值。

```
if columns[5].strip() == '440': 
```

或先剥离它：

```
columns = line.strip().split(" ") 
```

或使用一般拆分，它将拆分所有空格：

```
columns = line.split() 
```

或者做一个实际的数字比较

```
if int(columns[5]) == 440: 
```

# google-app-engine - GooglePlaces 自动完成 - 多个输入

> ID：13543888
> 
> 赞同：0
> 
> 时间：2012-11-24T17:51:37.667
> 
> 标签：google-app-engine, google-places-api

我正在使用自动完成 API Google。我想要3个输入：

*   国家
*   城市
*   省

是否有可能在同一页面上实现这 3 个输入，每个输入都有自动完成功能？有了一个，一切都完美无缺。但是不止一个，代码不能正常工作（没有任何错误）。有什么限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:00:45.067

请使用一个输入（无论如何谁可以同时将数据输入到 3 个输入？），当您获得完整的自动完成结果时，将结果拆分为单独的（不可编辑的）字段。

# javascript - 如何将 codecogs 方程式按钮添加到 aloha 编辑器工具栏？

> ID：13543890
> 
> 赞同：0
> 
> 时间：2012-11-24T17:51:40.397
> 
> 标签：javascript, button, plugins, customization, aloha-editor

我已经安装并运行了 aloha 编辑器。现在我想在工具栏中创建一个自定义按钮。单击它会打开[codecogs equation editor 弹出窗口](http://www.codecogs.com/latex/install.php)。在没有 aloha 的情况下我通常会这样做的方式是添加弹出脚本并调用此函数

```
<p><a href="javascript:OpenLatexEditor('target','html','')"> 
     Launch CodeCogs Equation Editor</a></p> 
```

但我宁愿在工具栏中有一个按钮，然后在每个可编辑之后有一个链接。我阅读了 aloha-editor 的插件文档。

这是我到目前为止所拥有的：

```
define([
    'aloha',
    'jquery',
    'aloha/plugin',
    'ui/ui',
    'ui/button'

], function(Aloha,
        jQuery,
        Plugin,
        Ui,
        Button) {
'use strict';

var GENTICS = window.GENTICS;
return Plugin.create('equationButton', {
    init: function () {
       var that = this;

        this._insertEquation = Ui.adopt("insertEquation", Button, {
            iconOnly: true,
            icon: 'aloha-icon-equation',
            click: function(){
                that.insertEQ();
            }
        });
    },
    insertEQ: function() {
        var self = this;

        if(Aloha.activeEditable) {
            window.location = OpenLatexEditor('target','html','');
        }
    }
});
}); 
```

但是，如何在[此处](http://latex.codecogs.com/editor3.js)包含公式编辑器弹出窗口的脚本。这是我应该如何使用 Window.location 还是只需要原始 url 字符串？

谢谢，吉达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:50:09.557

在 aloha 编辑论坛中询问后，我收到了其中一位员工的回答，并且成功了，答案如下：

看看[metaview 插件](https://github.com/alohaeditor/Aloha-Editor/blob/dev/src/plugins/extra/metaview/lib/metaview-plugin.js)——这是一个非常小/简单的插件。有“buttonClick”方法，您可以在其中添加单击按钮时应执行的代码。您可以复制 metaview 插件，重命名它并根据需要调整其余部分。一定要添加/调整toolbar.tab设置。（我想范围应该是你的情况： "Aloha.continuoustext" ）

# sql - 使用 MIN 和 COUNT

> ID：13543891
> 
> 赞同：0
> 
> 时间：2012-11-24T17:51:47.200
> 
> 标签：sql, oracle, aggregate-functions, oracle-sqldeveloper, top-n

你能给我一个在同一个查询中使用 min 和 count 的例子吗？例如，在这张表上，我想知道具有奇数代码（1 和代码 5）的工人数量较少。

```
 Table Workers
      Code
       1
       2
       2
       2
       3
       3
       1
       5 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:36:28.847

另一种使用窗口函数并保留所有绑定结果的解决方案。如果在有联系时您不想要很多结果（但只是任意一个），请使用`ROW_NUMBER()`代替`RANK()`：

```
SELECT code
FROM
  ( SELECT code 
         , RANK() OVER (ORDER BY COUNT(*)) AS rnk
    FROM workers
    WHERE MOD(code, 2) = 1
    GROUP BY code 
  ) tmp
WHERE rnk = 1 ; 
```

在 (Oracle 11g2) 中测试：**[SQL-Fiddle](http://sqlfiddle.com/#!4/71220/6)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:38:08.360

这是为了**`ORACLE`**解决您的问题。

```
with newt as
  (  select code, count(*) cnt
     from workers
     where mod(code, 2) = 1
     group by code)
select * 
from newt
where cnt in (select min(cnt) 
              from newt) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T17:57:04.077

您需要一个子查询来找到最小值，然后使用它再次查询计数：

```
select code, count(*)       -- get the count for the code found in the subquery
from workers
where code = (
    select min(code)        -- return the minimum code found
    from workers
    where mod(code, 2) = 1) -- only odd codes
group by code;              -- group by the non-aggregated column(s0 
```

## 编辑：

从评论中，您似乎想要工人最少的奇怪代码：

```
select code, count(*)
from workers
where mod(code, 2) = 1
group by code
order by 2
limit 1; 
```

您没有说您使用的是哪个数据库，因此“仅返回第一行”的语法可能与“LIMIT 1”不同，这是 mysql 的执行方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T18:01:56.140

```
select Code, count(*) MinCount
from Workers
where mod(code, 2) = 1
group by Code
order by MinCount
limit 1 
```

[SqlFiddle](http://www.sqlfiddle.com/#!2/022ce/3)

请注意，如果有多个代码具有最小计数，这将任意选择其中一个。如果您想要所有这些，这会使事情变得复杂，您需要一个带有子查询的连接。这是那个查询：

```
SELECT w.Code, CodeCount
FROM (SELECT Code, count(*) CodeCount
      FROM Workers
      WHERE mod(code, 2) = 1
      GROUP BY Code) w
JOIN (SELECT Code, count(*) MinCount
      FROM Workers
      WHERE mod(code, 2) = 1
      GROUP BY Code
      ORDER BY MinCount
      LIMIT 1) MinQuery
ON CodeCount = MinCount 
```

[SqlFiddle](http://www.sqlfiddle.com/#!2/62e88/2)

# iphone - 将不同的数组加载到一个 UITableView

> ID：13543897
> 
> 赞同：0
> 
> 时间：2012-11-24T17:52:21.113
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我有一个`storyboard`基于应用程序的应用程序，我想将不同的应用程序加载`NSArray`到单个应用程序`UITableView`中，但我不知道如何在我的应用程序中实现它...

目前我的应用程序的结构如下所示：

标签栏控制器->导航控制器-添加->添加拍卖视图控制器（UITextfield在哪里添加带有下一步按钮的拍卖名称->我加载的TableView控制器`NSArray`。

基于用户从第一个应用程序的选择`NSArray`，将根据他的选择在同一个`didSelectRowAtIndexPath`应用程序中加载另一个不同的数据。`NSArray``UITableViewController`

我想实现的示例：

选择“汽车”将加载`NSArray`汽车列表 - 再次选择“汽车”类别将加载汽车品牌`NSArray`等等......

[示例表视图流程](http://farm9.staticflickr.com/8201/8214481162_119ea066b4_c.jpg)

我想存储用户选择，`NSArray`然后在所有步骤中显示所有选择的选项 new `UITableView Controller`。

到目前为止，我设法创建了允许设置拍卖名称并首先加载的应用程序`NSArray`。
我需要帮助来进行下一步并`NSArray`根据用户的选择加载新的`UITableView Controller`

我的文件：

**SelectClassTableViewController.h**

```
#import <UIKit/UIKit.h>

@interface SelectClassTableViewController : UITableViewController <UITableViewDataSource, UITableViewDataSource>

@property (strong, nonatomic) IBOutlet UITableView *Classes;

@end 
```

**SelectClassTableViewController.h**

```
#import "SelectClassTableViewController.h"

@interface SelectClassTableViewController ()
{
    NSArray *ClassesArray;
}

@end

@implementation SelectClassTableViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    ClassesArray = [[NSArray alloc] initWithObjects:@"Cars", @"Motorcycles", @"Boats", @"Planes", @"Other", nil];
    self.Classes.delegate = self;
    self.Classes.dataSource = self;

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Number of sections in TableView
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return ClassesArray.count;
}

// Set name of grouped table view
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    return @"Select Car Type:";
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ClassesCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Configure the cell...

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Sets 
    cell.textLabel.text = [ClassesArray objectAtIndex:indexPath.row];
    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

.

我知道可以使用`UITableViewDataSource`，但我不知道如何在我的应用程序中实现这个协议。我仍在学习 Objective-C，因此我将不胜感激任何有关我的代码的建议或帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:22:47.777

在头文件中创建一个 NSString。在 viewDidLoad 中，将 NSString 设置为`@"Main"`. 在`didSelectRowAtIndexPath`中，将 NSString 设置为您要显示的任何数组（数组 1、数组 2、数组 3...），然后重新加载表。

在`cellForRowAtIndexPath`中，通过使用 if 语句检查 NSString 的值来检测哪个数组是焦点。

```
if ([string isEqualToString: @"Main"]) {

    //show main array

} else if ([string isEqualToString: @"Cars"]) {

    //show cars array...

} 
```

# python - 在python中写入和读取文件

> ID：13543898
> 
> 赞同：0
> 
> 时间：2012-11-24T17:52:27.690
> 
> 标签：python, python-2.3

我将不胜感激我的家庭作业 - 这是一个简单的课程程序，应该检查文件，如果它存在，它会读取文件，并将数据加载到程序中，这样你就可以列出分数，并添加更多。它*应该*只保留前5名的分数。

然后，当您关闭程序（通过选择选项 0）时，它应该将前 5 个分数写入`scores.txt`文件。我想我让它正常工作，我只是无法让程序`scores`正确读取和填充文件。

到目前为止，这是我的代码：

```
scores = []

#Check to see if the file exists
try:
    file = open("scores.txt")
    for i in range(0, 5):
        name = file.readline()
        score = file.readline()
        entry = (score, name)
        scores.append(entry)
        scores.sort()
        scores.reverse()
        scores = scores[:5]
    file.close()
except IOError:
    print "Sorry could not open file, please check path."

choice = None
while choice != "0":

    print    """
    High Scores 2.0

    0 - Quit
    1 - List Scores
    2 - Add a Score
    """

    choice = raw_input("Choice: ")
    print ""

    # exit
    if choice == "0":
        print "Good-bye."
        file = open("scores.txt", "w+")
        #I kinda sorta get this now... kinda...
        for entry in scores:
            score, name = entry
            file.write(name)
            file.write('\n')
            file.write(str(score))
            file.write('\n')
        file.close()

    # display high-score table
    elif choice == "1":
        print "High Scores\n" 
        print "NAME\tSCORE" 
        for entry in scores:
            score, name = entry    
            print name, "\t", score

    # add a score
    elif choice == "2":
        name = raw_input("What is the player's name?: ")
        score = int(raw_input("What score did the player get?: "))
        entry = (score, name)
        scores.append(entry)
        scores.sort()
        scores.reverse()
        scores = scores[:5]     # keep only top 5 scores

    # some unknown choice
    else:
        print "Sorry, but", choice, "isn't a valid choice." 

raw_input("\n\nPress the enter key to exit.") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:08:40.280

您应该尝试将文件写入[逗号分隔值 (CSV)](http://en.wikipedia.org/wiki/Comma-separated_values)中。虽然该术语使用“逗号”一词，但该格式实际上仅表示任何类型的一致字段分隔符，每条记录位于一行。

Python 有一个[csv 模块](http://docs.python.org/2/library/csv.html)来帮助读写这种格式。但我将忽略这一点，并出于家庭作业的目的手动完成。

假设您有一个这样的文件：

```
Bob,100
Jane,500
Jerry,10
Bill,5
James,5000
Sara,250 
```

我在这里使用逗号。

```
f = open("scores.txt", "r")
scores = []
for line in f:
    line = line.strip()
    if not line:
        continue
    name, score = line.strip().split(",")
    scores.append((name.strip(), int(score.strip())))

print scores
"""
[('Bob', 100),
 ('Jane', 500),
 ('Jerry', 10),
 ('Bill', 5),
 ('James', 5000),
 ('Sara', 250)]
""" 
```

您不必每次阅读和追加时都对列表进行排序。你可以在最后做一次：

```
scores.sort(reverse=True, key=lambda item: item[1])
top5 = scores[:5] 
```

我意识到`lambda`对你来说可能是新的。它是一个匿名函数。我们在这里使用它来告诉排序函数在哪里可以找到比较的键。在这种情况下，我们说对于分数列表中的每个项目，使用分数字段（索引 1）进行比较。

# inno-setup - 如何在卸载过程中删除文件夹？

> ID：13543901
> 
> 赞同：15
> 
> 时间：2012-11-24T17:52:56.070
> 
> 标签：inno-setup

我的程序在`c:\Users\GameDev\AppData\Local\<my game folder>`. 是否可以在卸载过程中告诉 InnoSetup 删除整个文件夹，即使安装程序没有把它放在那里？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-24T18:40:10.330

要删除与您的安装程序无关的某些文件夹（因为，如果您没有明确指定，所有文件和目录都会被创建的卸载程序删除），请使用该[`[UninstallDelete]`](http://jrsoftware.org/ishelp/topic_uninstalldeletesection.htm)部分。在那里，您可以为您的案例指定类似的内容：

```
[UninstallDelete]
Type: filesandordirs; Name: "{localappdata}\<my game folder>" 
```

# php - 将 PHP 回显转换为 if/else

> ID：13543905
> 
> 赞同：1
> 
> 时间：2012-11-24T17:53:11.063
> 
> 标签：php

我有一个这样的 PHP 回显，代码如下：

```
<?php echo($row['buildingdesignsvo']); ?> 
```

如何根据回声的内容将其转换为 If/Else？例如，如果回显是 value1 或 value2，它会显示一个像这样的链接，`<a href="">Link</a>`如果它不包含任何一个值，它就会显示 Nothing found。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T17:55:58.813

```
if ($row['buildingdesignsvo'] == 'value1') {
  // do something
  echo '<a href="">Link</a>';
} else {
  // do something else
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:00:08.953

你应该使用三元运算符

```
echo ($row['buildingdesignsvo'] == 'value1')?( '<a href="">Link</a>'):(); 
```

我没有测试它，但不知何故像这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:56:16.307

我假设你会呼应一些价值

```
echo $value
if($value==something){
  echo 'this';
}else{
  echo 'that';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T17:57:23.330

```
<?php echo(in_array($row['buildingdesignsvo'], ['value1','value2'])? '<a href="">Link</a>': "Nothing Found" ); ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T17:57:57.507

根据您的问题，我假设您要检查是否`$row['buildingdesignsvo']`等于两个变量（`$value1`和`$value2`）中的 1 ，`echo`如果不等于则“未找到”...

一个简单的`if`声明：

```
<?php 
if($row['buildingdesignsvo'] == $value1){
    echo "<a href='link1.php'>Link 1</a>";
}
else if($row['buildingdesignsvo'] == $value2){
    echo "<a href='link2.php'>Link 2</a>";
}
else{
    echo "Nothing found";
}

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T18:00:21.110

```
<?php 
    if($row['buildingdesignsvo'] == 'value1'){
        echo '<a href="#">Link1</a>';
    }
    else{
        echo 'default value';
    }
?> 
```

使用函数甚至开关盒可能会更好。

```
<?php
    function check(){
       if($row['buildingdesignsvo'] == 'value1'){
            $data = '<a href="#">Link1</a>';
        }
        else{
            $data = 'default value';
        }
        return $data;
    }
    $check = check();
    echo $check;
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-24T18:03:02.227

您实际上并不想对 echo 的内容执行 if else，而是希望对数组的内容执行此操作：

```
<?php
if ($row['buildingdesignsvo'] == $value1){
    //If first value - Echo link
}
else if($row['buildingdesignsvo'] == $value2){
    //If second value - Echo link
}
else{
    //Doesn't match so echo 'Nothing Found'
}  
?> 
```

如果这两种情况的链接相同，您可以通过将前两种情况与 OR 组合来进一步简化它

```
<?php
if (($row['buildingdesignsvo'] == $value1) || ($row['buildingdesignsvo'] == $value2)) {
    //If first or second value - Echo link
}
else{
    //Doesn't match so echo 'Nothing Found'
} 
?> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-24T17:58:23.057

首先将其存储在 Var 中，然后检查它的值，如果是，则回显它..

```
<?php 
$var = $row['buildingdesignsvo'];
if ($var == 'value'){
    echo $var;
}else { 
    //something to do;
 }
 ?> 
```

编辑：编辑后：P

要检查它是否包含字符串，请使用 strstr() 或 stristr() 不区分大小写。

```
<?php 
$var = $row['buildingdesignsvo'];
if (stristr($var, 'value')){
    echo "<a href=''>link</a>";
}else { 
   echo "not foundr";
 }
 ?> 
```

# playframework - Play2 模板找不到模型类

> ID：13543910
> 
> 赞同：-1
> 
> 时间：2012-11-24T17:53:27.310
> 
> 标签：playframework, playframework-2.0

我正在阅读 play2 教程（http://www.playframework.org/documentation/2.0.4/JavaTodoList），但我的模板找不到我的模型类（我称之为 Check，而不是教程。这是我得到的：

```
Compilation error

not found: type Check 
```

我也尝试为我的班级添加一个导入（@import model.Check），但我得到了这个：

```
Compilation error

not found: value model 
```

有任何想法吗？我一遍又一遍地完成了这些步骤，但我一定还是遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T17:58:14.497

我将我的 Check 类放在“模型”中，而不是“模型”中。

# c# - 将对象引用传递给数据结构

> ID：13543911
> 
> 赞同：0
> 
> 时间：2012-11-24T17:53:31.957
> 
> 标签：c#

我怎么可能做到以下几点：

```
OrderedDictionary<string, object> bag = new OrderedDictionary<string, object>();

public void Add(string str,ref object obj) {
    bag.Add(str,**ref obj**);
} 
```

因此，无论何时我想访问“bag”中的特定“obj”，它都会引用参数中传递的“obj”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T17:57:21.250

对象已经是引用类型。访问字典中的对象将修改原始 obj。

您所拥有的是对内存中同一对象的多次引用。因此，修改或复制或类似的操作将正常工作并保留在同一个对象中。但请记住，如果您想将对象**设置**为其他值（如 null），它只会将当前引用设置为 null，而不是实际对象。

另一方面， ref 对于将实际**引用**作为参数而不是内存中的对象传递很有用。以此为例：

```
void SomeMethod(object obj)
{
    obj = null;
}

void SomeRefMethod(ref object obj)
{
    obj = null;
} 
```

通过此调用：

```
object obj1 = new object();

Console.WriteLine(obj1 == null); //False

SomeMethod(obj1);
Console.WriteLine(obj1 == null); //False

SomeMethodRef(ref obj1);
Console.WriteLine(obj1 == null); //True 
```

在这种情况下，`obj1`仍然会`non-null`在调用 to 之后`SomeMethod`，并且会`null`在调用 to 之后`SomeMethodRef`。

# xcode - 如何在界面生成器中调整元素的大小？

> ID：13543918
> 
> 赞同：-1
> 
> 时间：2012-11-24T17:54:03.123
> 
> 标签：xcode, interface, resize, builder

我正在使用 XCOde 和界面生成器处理我的项目，但是界面生成器中元素周围的小点不再显示。我无法调整任何内容。我创建了第二个 xib 文件，它们出现在那个文件上，这怎么可能？我觉得我现在被困住了，我必须创建一个新项目......或者它是一个“隐藏”xib 中所有元素的边界框的设置？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:24:06.683

我刚刚重新创建了项目，它似乎是一个损坏的 XIB 文件。下次我会不时备份我的整个项目（我想我应该使用 SVN）

# android - android布局标题重力小问题

> ID：13543920
> 
> 赞同：0
> 
> 时间：2012-11-24T17:54:18.413
> 
> 标签：android, layout

我有两个项目的布局标题。使用 TextView 和 Button。但我不能让他们保持正确的对齐方式。我试图在元素中使用 android:gravity="..." 和 layout_gravity="..." ，但它只是没有任何效果。

只有当我在此代码中应用额外的 LinearLayout 时，我才能使它们居中。但我仍然不能让 TextView 成为“中心”和按钮“正确”。

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="match_parent"
android:layout_height="40dip"
android:gravity="center_vertical"    
android:id="@+id/customLayout"
android:background="#708090"
>

    <LinearLayout  android:gravity="center" android:layout_gravity="center"
android:layout_width="fill_parent"
android:layout_height="wrap_content">

<TextView
    android:id="@+id/header"
    android:textSize="40px"
    android:text="Yolo"
        android:layout_gravity="center"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

<ImageButton
    android:id="@+id/mapButton"
    android:layout_gravity="right"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/map"
    android:gravity="right"
     />

     </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:00:04.903

使用 RelativeLayout 而不是 LinearLayout。对于 TextView，将“android:gravity”和“android:layout_gravity”都设置为“center”。对于 ImageView，只需将其“android:layout_alignParentRight”设置为“true”。

# php - 后缀错误将邮件发送到垃圾邮件

> ID：13543921
> 
> 赞同：2
> 
> 时间：2012-11-24T17:54:25.920
> 
> 标签：php, smtp

我有一个 redmine 实例使用 GMail 帐户发送电子邮件，我意识到电子邮件被 gmail 识别为垃圾邮件。使用 postfix 作为中继，我可以通过控制台发送电子邮件（使用“邮件”命令），但 redmine 仍然被标记为垃圾邮件，

这是我的邮件详细信息

```
Delivered-To: abc@example.com
Received: by 10.114.29.166 with SMTP id l6csp194412ldh;
        Fri, 23 Nov 2012 03:10:39 -0800 (PST)
Received: by 10.58.162.130 with SMTP id ya2mr5620087veb.2.1353669038834;
        Fri, 23 Nov 2012 03:10:38 -0800 (PST)
Return-Path: <redmine@example.com>
Received: from domU-12-31-39-03-7D-77.compute-1.internal (ec2-xxx-xx-xxx-xx.compute-1.amazonaws.com. [xxx.xx.xxx.xx])
        by mx.google.com with ESMTP id y12si5657502vco.81.2012.11.23.03.10.38;
        Fri, 23 Nov 2012 03:10:38 -0800 (PST)
Received-SPF: neutral (google.com: xxx.xx.xxx.xx is neither permitted nor denied by best guess record for domain of redmine@example.com) client-ip=xxx.xx.xxx.xx;
Authentication-Results: mx.google.com; spf=neutral (google.com: xxx.xx.xxx.xx is neither permitted nor denied by best guess record for domain of redmine@example.com) smtp.mail=redmine@example.com
Received: by domU-12-31-39-03-7D-77.compute-1.internal (Postfix, from userid 0)
    id 3FDD638407; Fri, 23 Nov 2012 11:10:38 +0000 (UTC) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T21:11:05.677

您的后缀没有任何问题。您需要设置`SPF`和`DKIM`记录`reverse PTR`邮件服务器`IP`。您可以谷歌“如何设置 SPF 和 DKIM”。

我关注了 Jeff Atwood 的[这篇文章](http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html)，并理解了为什么需要它以及如何设置。

# linux - mspdebug 收不到数据

> ID：13543927
> 
> 赞同：1
> 
> 时间：2012-11-24T17:55:11.423
> 
> 标签：linux, ubuntu, microcontroller, ubuntu-12.04, msp430

我正在尝试学习对微控制器进行编程。我从 msp430 开始，我已经安装了 mspdebug 0.18 和 mspgcc 4.5.3。我想将一个简单的程序加载到设备上进行测试，但是 mspdebug 无法通过擦除设备。

```
Device: MSP-EXP430FR5739  
Computer OS: Ubuntu 12.04 LTS  

Error Messages:  
Trying to program device:  
(mspdebug) prog led.elf  
Erasing...  
rf2500: can't receive data: Resource temporarily unavailable  
fet: erase command failed  

Trying solely to erase device
(mspdebug) erase  
Erasing...  
rf2500: can't receive data: Resource temporarily unavailable  
fet: erase command failed  

Output of dmesg after unplugging and plugging in the device:  
[ 1537.370302] usb 3-2: USB disconnect, device number 3  
[ 1544.276180] usb 3-2: new full-speed USB device number 4 using ohci_hcd  
[ 1544.476821] cdc_acm 3-2:1.0: This device cannot do calls on its own. It is not a modem.  
[ 1544.476838] cdc_acm 3-2:1.0: No union descriptor, testing for castrated device  
[ 1544.476903] cdc_acm 3-2:1.0: ttyACM0: USB ACM device 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:49:27.500

这与在 FRAM 芯片上擦除不工作（或至少不正常工作）有关。您应该更新到最新版本的 mspdebug ( [http://mspdebug.sourceforge.net/](http://mspdebug.sourceforge.net/) ) 来解决这个问题。

# ios - SKPSMTPMessage 电子邮件

> ID：13543933
> 
> 赞同：0
> 
> 时间：2012-11-24T17:55:37.833
> 
> 标签：ios, objective-c, cocoa

我正在使用 SKPSMTPMessage 将电子邮件发送到电子邮件列表。由于用户从他的联系人中选择电子邮件的数量，他可以选择 1 和 200。我想知道，如果我使用这个库来发送电子邮件，当用户关闭应用程序时，或者只是让它在后台运行，该应用程序是否会继续发送电子邮件，就像电子邮件 Apple 应用程序一样？

# wordpress - add posts and make searchable

> ID：13543936
> 
> 赞同：-1
> 
> 时间：2012-11-24T17:55:48.713
> 
> 标签：wordpress

I have created a wrodpress site. I would like to have a page where I can post recipes. The page should only show 5 recipes at a time but let the user navigate between all recepies. Something like this:

```
Recipe 1
 Recipe 2
 Recipe 3
 Recipe 4
 Recipe 5
<Prev  2 3 4 5 .. Next> 
```

I also want visitors to be able to search for a recipe. Not like the normal search that search the whole page but only recipe posts.

Any recommendations on plugins that can achieve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:56:18.347

A great way to do this would be to use Custom Post Types. This tutorial explains almost exactly what you want to do, including the fact that it's based on recipes: [http://wpmu.org/easy-guide-to-displaying-custom-post-types-in-your-wordpress-theme/](http://wpmu.org/easy-guide-to-displaying-custom-post-types-in-your-wordpress-theme/)

As far as a search limited to only that custom post type goes, you could modify or duplicate searchform.php like so without having to use a plugin at all:

```
<form role="search" method="get" id="searchform" action="<?php echo home_url( '/' ); ?>" >
        <input type="text" name="s" id="s" value="Enter keywords ..."/>
        <input type="hidden" name="post_type" value="recipes" />
        <input type="submit" id="searchsubmit" value="Search Recipes" />
</form> 
```

If you have trouble getting this to work, make sure the following is included at the top of search.php :

```
<?php
global $query_string;

$query_args = explode("&", $query_string);
$search_query = array();

foreach($query_args as $key => $string) {
    $query_split = explode("=", $string);
    $search_query[$query_split[0]] = $query_split[1];
} // foreach

$search = new WP_Query($search_query);
?> 
```

# symfony - Symfony2 中的查询生成器，已知函数 Month 错误

> ID：13543937
> 
> 赞同：1
> 
> 时间：2012-11-24T17:55:54.293
> 
> 标签：symfony, doctrine-orm, customization, dql, query-builder

我对 Symfony2 QueryBuilder 有疑问。

我有以下引发错误的代码

```
$repositorio= $em->getRepository('SingUserBundle:Data');
$consulta= $repositorio->createQueryBuilder('d')
    ->where('d.usuario = :usuario')
    ->andWhere ('MONTH(d.fecha) = :mesActual')
    ->setParameter('usuario', $usuario->getId())
    ->setParameter('mesActual', $mesActual)
    ->getQuery();
$totaldatos= $consulta->getSingleResult(); 
```

错误是：

```
[Syntax Error] line 0, col 80: Error: Expected known function, got 'MONTH' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-24T20:01:19.040

正如**Gremo**在他的回答中所报告的那样，没有内置`month`函数。因此，您必须扩展 DQL 以具有月份功能。

如果你不熟练或者你没有时间，我建议安装[DoctrineExtensions Mysql Function Pack](https://github.com/beberlei/DoctrineExtensions)，它可以在 Gitbub 存储库中免费获得。它包含了许多有用的**DQL**函数，甚至包含了该`month`函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T18:40:18.970

正如消息所说：查询生成器不支持`MONTH`功能。要么编写[用户定义的函数](http://docs.doctrine-project.org/en/2.0.x/cookbook/dql-user-defined-functions.html)，要么使用[带有结果集映射的本机 SQL](http://docs.doctrine-project.org/en/latest/reference/native-sql.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:19:18.313

最后我解决了我的问题！最后我没有使用 MONTH

```
$fecha=new \DateTime("now");
            $fecha->setDate(DATE_FORMAT($fecha, 'Y'),DATE_FORMAT($fecha, 'm'),01);

            $qb= $this->createQueryBuilder('ud')
                ->where('ud.usuario = :identifier')
                ->andWhere('ud.fecha >= :identifier2')
               ->setParameters(array('identifier'=>$user,'identifier2'=> $fecha)); 
```

一个月后我拿了日期并做了查询。

我希望能帮助别人！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-11T16:56:22.950

至少对我来说，这是解决这个问题的简单方法：

```
$month= 04;
$qb = $this->getEntityManager()->createQueryBuilder();
$result = $qb->select('yd')
->from('RocketSellerTwoPickBundle:YearDates','yd')
->where($qb->expr()->like('yd.date', ':month'))
->setParameter('month', '%-' . $month . '-%')
->getQuery()
->getResult(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-06T13:43:02.857

我遇到了同样的问题，我使用以下代码解决了：

```
 $qb = $this->getEntityManager()->createQueryBuilder();

    $startDate = date( 'Y-m-' ) . '01'; // First day in current month
    $endDate   = date( 'Y-m-t' ); // Last day in current month

    $qb
        ->addSelect( 'l' )
        ->from( 'BackendBundle:Local', 'l' )
        ->join('l.inscriptions', 'i')
        ->where( 'i.date >= :startDate' )
        ->andWhere( 'i.date <= :endDate' )
        ->setParameter('startDate', $startDate)
        ->setParameter('endDate', $endDate)
    ;

    $query = $qb->getQuery();
    $query->setQueryCacheLifetime( 3600 );
    $query->setResultCacheLifetime( 3600 );
    $query->useQueryCache( true );

    return $query->getResult(); 
```

至少对我有用，希望你能找到有用的。

# object - VBScript 中的对象/类字典

> ID：13543942
> 
> 赞同：3
> 
> 时间：2012-11-24T17:56:31.743
> 
> 标签：object, dictionary, vbscript

是否可以在 vbscript 中有一个对象/类的字典？

例如：

```
Class employeeclass
    Public first, last, salary
End Class
Dim employeedict: Set employeedict = CreateObject("Scripting.Dictionary")

'Loop would be here
Dim employee: Set employee = new employeeclass
With employee
    .first = "John"
    .last = "Doe"
    .salary = 50000
End With
employeedict.Add "1", employee 
```

编辑**以上确实有效**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T23:59:02.843

（回答自己的问题）

是的，可以在 VBScript 中使用对象/类的字典。以下是感兴趣的人的示例：

```
Class employeeclass
    Public first, last, salary
End Class
Dim employeedict: Set employeedict = CreateObject("Scripting.Dictionary")

Dim employee: Set employee = new employeeclass
With employee
    .first = "John"
    .last = "Doe"
    .salary = 50000
End With
employeedict.Add "1", employee

Set employee = new employeeclass
With employee
    .first = "Mary"
    .last = "Jane"
    .salary = 50000
End With
employeedict.Add "3", employee

Dim employeedetails: Set employeedetails = employeedict.Item("1")
WScript.StdOut.WriteLine("Name:" & employeedetails.first & " " & employeedetails.last & " $" & employeedetails.salary )
WScript.StdOut.WriteLine(employeedict.Item("3").first & " " & employeedict.Item("3").last & " makes $" & employeedict.Item("3").salary) 
```

打印出来：

```
Name:John Doe $50000 
Mary Jane makes $50000 
```

# asp.net - 如何为 ASP.Net Gridview 或 Listview 的编辑模板启动引导模式？

> ID：13543943
> 
> 赞同：3
> 
> 时间：2012-11-24T17:56:45.043
> 
> 标签：asp.net, twitter-bootstrap

我知道有一个 ajax 模态弹出扩展器，但这并不是我真正想要的。我已经成功地将令人难以置信的 DataTables 插件连接到网格模式下的 ASP.Net ListView 设置并对其进行了样式化，坦率地说，它很糟糕。

我为编辑和删除添加了 2 个额外的列，并且编辑按钮适用于编辑模板，但我想启动 twitter 引导弹出模式并让用户在那里编辑项目。

我在每一行中放入图标以弹出模式应该没有问题，但我对如何从列表视图行中获取值感到困惑。

**是否可以将整个编辑模板作为模式对话框启动？**

我使用 ASP.NET Listview 和 Fancybox 实现了这一点，但我最终在模式中启动了一个新页面，该页面采用了正在编辑的项目 ID 的查询字符串，并使用数据库调用填充了所有内容。这是超级矫枉过正，我真的不想依赖它。

我需要的是帮助获取编辑模板所做的信息。我想我可以使用 item_command 事件作为起点。

请帮忙。这是我的简单演示列表视图的片段。

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="SqlDataSource1">
  <ItemTemplate>
      <tr>
        <td>
          <asp:Label ID="NameLabel" runat="server" 
                      Text='<%# Eval("Name") %>' />
        </td>
        <td>
          <asp:Label ID="ItemTypeLabel" runat="server" 
                      Text='<%# Eval("ItemType") %>' />
        </td>
        <td>
          <asp:Label ID="DescriptionLabel" runat="server" 
                      Text='<%# Eval("Description") %>' />
        </td>
        <td>
          <asp:Label ID="PriceLabel" runat="server"
                      Text='<%# Eval("Price","{0:C}") %>' />
        </td>
          <td>
          <asp:LinkButton ID="EditButton" CommandName="Edit" 
                          runat="server">Edit</asp:LinkButton>
        </td>
        <td>
          <asp:LinkButton ID="DeleteButton" CommandName="Delete"    
                          runat="server">Delete</asp:LinkButton>
        </td>
      </tr>
  </ItemTemplate>
  <EditItemTemplate>
    <tr>
      <td>
        <asp:TextBox ID="NameTextBox" runat="server" Text='<%# Bind("Name") %>' />
      </td>
      <td>
        <asp:TextBox ID="ItemTypeTextBox" runat="server" 
                      Text='<%# Bind("ItemType") %>' />
      </td>
        <td>
        <asp:TextBox ID="DescriptionTextBox" runat="server" 
                      Text='<%# Bind("Description") %>' />
      </td>
      <td>
        <asp:TextBox ID="PriceTextBox" runat="server" Text='<%# Bind("Price") %>' />
      </td>
        <td>
          <asp:LinkButton ID="UpdateButton" CommandName="Update" 
                          runat="server">Update</asp:LinkButton>
      </td>
      <td>
        <asp:LinkButton ID="CancelButton" CommandName="Cancel" 
                        runat="server">Cancel</asp:LinkButton>
      </td>
    </tr>
  </EditItemTemplate>
  <LayoutTemplate>
      <table id="myTable" border="0">
        <thead>
          <tr>
            <th>Name</th>
            <th>ItemType</th>
            <th>Description</th>
            <th>Price</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr id="itemPlaceholder" runat="server">
          </tr>
        </tbody>
      </table>
  </LayoutTemplate>
</asp:ListView>

<asp:Content ContentPlaceHolderID="CPscript" Runat="Server">
  <script type="text/javascript">
    $(document).ready(function () {
      // for datatables
      $('#myTable').dataTable({
        "aaSorting": []
      });
      // for watermark (targets all textboxes inside datatable div)
      $("#DataTable :input:text").watermark("Search for Data").addClass("watermark");
    });
  </script>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:08:56.537

虽然这已经很晚了，但我刚刚实现了类似的东西，并且也使用 Twitter Bootstrap 实现了它。

主要技巧是使用类似于*Click*事件的事件，`EditButton`然后使用所选行的*DataKey*将数据拉入单独`ListView`的*模式*框中。

如果以这种方式更容易获取值，则可以将记录的 ID 放入`EditButton` *CommandArgument中。*

然后在获取数据后，在回发后使用*RegisterStartupScript显示**模态。*您不能在所有客户端都执行此操作并且必须回发，因为您需要触发事件并获取行的 ID 并将数据从该 ID 绑定到 second 。*`ListView`*

 *我在下面放置了大部分工作的代码，只是一些次要的伪代码点。

```
<asp:ListView ID="ListView1" runat="server"
    DataKeyNames="ItemID"
    DataSourceID="SqlDataSource1">
    <ItemTemplate>
        <tr>
            <td><asp:Label ID="NameLabel" runat="server" Text='<%# Eval("Name") %>' /></td>
            <td><asp:Label ID="ItemTypeLabel" runat="server" Text='<%# Eval("ItemType") %>' /></td>
            <td><asp:Label ID="DescriptionLabel" runat="server" Text='<%# Eval("Description") %>' /></td>
            <td><asp:Label ID="PriceLabel" runat="server" Text='<%# Eval("Price","{0:C}") %>' /></td>
            <td><asp:LinkButton ID="EditButton" CommandName="Edit" runat="server" OnClick="EditButton_Click">Edit</asp:LinkButton></td>
            <td><asp:LinkButton ID="DeleteButton" CommandName="Delete" runat="server">Delete</asp:LinkButton></td>
        </tr>
    </ItemTemplate>
    <LayoutTemplate>
        <table id="myTable" border="0">
        <thead>
            <tr>
                <th>Name</th>
                <th>ItemType</th>
                <th>Description</th>
                <th>Price</th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr id="itemPlaceholder" runat="server"></tr>
        </tbody>
        </table>
    </LayoutTemplate>
</asp:ListView> 
```

用 a`DataSource`获取多条记录

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:MyConnectionString %>" 
    SelectCommand="ItemSelectAll" SelectCommandType="StoredProcedure">
</asp:SqlDataSource> 
```

创建*模态*框以显示编辑版本

```
<div id="item-detail" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>My Record</h3>
    </div>
    <div class="modal-body">
        <asp:ListView ID="ListView2" runat="server"
            DataKeyNames="ItemID"
            DataSourceID="SqlDataSource2">
            <EditItemTemplate>
                <tr>
                    <td><asp:TextBox ID="NameTextBox" runat="server" Text='<%# Bind("Name") %>' /></td>
                    <td><asp:TextBox ID="ItemTypeTextBox" runat="server" Text='<%# Bind("ItemType") %>' /></td>
                    <td><asp:TextBox ID="DescriptionTextBox" runat="server" Text='<%# Bind("Description") %>' /></td>
                    <td><asp:TextBox ID="PriceTextBox" runat="server" Text='<%# Bind("Price") %>' /></td>
                    <td><asp:LinkButton ID="UpdateButton" CommandName="Update" runat="server">Update</asp:LinkButton></td>
                    <td><asp:LinkButton ID="CancelButton" CommandName="Cancel" runat="server">Cancel</asp:LinkButton></td>
                </tr>
            </EditItemTemplate>
            <LayoutTemplate>
                <table id="myTable" border="0">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>ItemType</th>
                        <th>Description</th>
                        <th>Price</th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="itemPlaceholder" runat="server"></tr>
                </tbody>
                </table>
            </LayoutTemplate>
        </asp:ListView>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
    </div>
</div> 
```

带有单独`DataSource`的编辑版本

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
    ConnectionString="<%$ ConnectionStrings:MyConnectionString %>" 
    SelectCommand="ItemSelectByItemID" SelectCommandType="StoredProcedure"
    UpdateCommand="ItemUpdate" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:Parameter Name="ItemID" Type="Int32" />
    </SelectParameters>
    <UpdateParameters>
        <%-- your parameters --%>
    </UpdateParameters>
</asp:SqlDataSource> 
```

然后在`EditButton_Click`事件中，您获取*ItemID*并提取记录`ListView2`。我对从 a获取*DataKey*不太熟悉，`ListView`所以那里有评论。

```
protected void EditButton_Click(Object sender, EventArgs e) 
{
    // get datakey
    string ItemID = ... // get datakey of selected row
    // Set the value to the datasource
    SqlDataSource2.SelectParameters["ItemID"].DefaultValue = ItemID;

    // toggle to edit mode on the only row displayed
    ListView2.EditIndex = 0;

    // Now use jQuery to display the modal box AFTER postback.
    // You need to do it after the postback, otherwise you'll
    // never get to this event to get the ItemID
    String csname1 = "PopupScript";
    Type cstype = this.GetType();

    // Get a ClientScriptManager reference from the Page class.
    ClientScriptManager cs = Page.ClientScript;

    // Check to see if the startup script is already registered.
    if (!cs.IsStartupScriptRegistered(cstype, csname1))
    {
        // In my experience, the jQuery file must be included at the top
        // of the page for this to work. Oterwise you get '$ not found' error.
        StringBuilder cstext1 = new StringBuilder();
        cstext1.Append("<script type=text/javascript>$(document).ready(function() { $('#user-detail').modal('show')}); </");
        cstext1.Append("script>");
        cs.RegisterStartupScript(cstype, csname1, cstext1.ToString());
    }
} 
```

一个小提示：根据我的经验，jQuery 文件必须包含在页面顶部才能使此方法起作用。否则，即使使用*$(document).ready() ，也会出现“$ not found”错误**

# ios - ios Coreplot 正在复制数据

> ID：13543945
> 
> 赞同：0
> 
> 时间：2012-11-24T17:57:07.377
> 
> 标签：ios, arrays, core-plot

我有一个计时器，它正在更新我的 coreplot 数据，以产生实时统计数据的错觉。当计时器触发时，它会向数组添加一个值并刷新散点图。这很好用，但是一旦我绘制了大约 10 个数据点，我想开始删除第一个点并只显示最后 10 个数据点。但是当我尝试删除一个点时，它会在彼此的顶部显示旧的和新的数据点。我不明白为什么会这样。我试图清除数组并重置它，但都无济于事。关于为什么会发生这种情况的任何想法。这是一些代码：

```
//START GRAPHING
  self.count = 0;
  if (numberOfPackets == 1){ //on the first packet
          [self.repeatingTimer invalidate];
          self.repeatingTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateArray:) userInfo:nil repeats:YES];
          self.arrayII = [[NSMutableArray alloc] init];
          [self initPlot];
   }

-(void) updateArray:(NSTimer *)timer{
    self.count++;
   // self.arrayII sources scatter plot data.
    if (self.count < [dataPacketArray count]){
        if (self.count > 5){
            [self.arrayII removeObjectAtIndex:0]; //if I don't include this it works flawlessly.
        }
        [self.arrayII addObject:[dataPacketArray objectAtIndex:self.count]];
    }
    [self.view reloadInputViews];
    [self configurePlots];
}

-(void) initPlot {
    [self configureHost];
    [self configureGraph];
    [self configurePlots];
    [self configureAxes];
} 
```

我从[本教程](http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2)中得到了所有的 init plot 内容。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:12:05.353

我发现并不是数组把所有东西都扔掉了。散点图不会删除以前的图，而只是添加图。看起来它是相同的情节，因为它只是添加点并在旧点之上重新绘制它。一旦你删除一个点，那么他们就不会排队。然后下一个问题是你如何消除旧情节......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:27:00.490

我假设该`-configurePlots`方法是将绘图添加到图表中的方法。不要在每次数据更改时调用该方法。使用`-reloadData`绘图上的方法强制它重新加载所有数据。

*Plot Gallery*示例应用程序中的“Real-Time Plot”显示了一种更新数据的更好方法。它会删除过期的数据点并仅添加新数据，而不是在每次更新时重新加载所有内容。只有 10 个数据点，这可能无关紧要，但如果您有更大的数据数组，则仅更新更改的数据可以提高性能。

# android - android地图禁用移动

> ID：13543948
> 
> 赞同：2
> 
> 时间：2012-11-24T17:57:13.853
> 
> 标签：android, google-maps

我想用手指在谷歌地图上画一个叠加层。我已经完成了线的绘制..但是地图也用我的手指移动，所以我不能画得很好，因为当地图也移动时，我只能在我的手指周围画一个小圆圈......

如何禁用地图的移动（拖动）并仍然能够用我的手指绘制和显示叠加层？

我当前的代码如下所示：

```
public class OverlayMap extends Overlay {
    private List<MapGeoLine> geoLines = new ArrayList<MapGeoLine>();
    private List<GeoPoint> geoPoints;
    private boolean isTouched = false;

    @Override
    public boolean onTouchEvent(MotionEvent motionEvent, MapView mapView) {

        if(motionEvent.getAction() == MotionEvent.ACTION_DOWN){ 
            geoPoints = new ArrayList<GeoPoint>();
            geoPoints.add(mapView.getProjection().fromPixels((int)motionEvent.getX(),(int)motionEvent.getY()));
            isTouched = true;
        }

        if(motionEvent.getAction() == MotionEvent.ACTION_MOVE){
            if(isTouched){
                geoPoints.add(mapView.getProjection().fromPixels((int)motionEvent.getX(),(int)motionEvent.getY()));
            }
        }

        if(motionEvent.getAction() == MotionEvent.ACTION_UP){
            if(isTouched){
                geoPoints.add(mapView.getProjection().fromPixels((int)motionEvent.getX(),(int)motionEvent.getY()));
            }           
            isTouched = false;
        }   

        return super.onTouchEvent(motionEvent, mapView);
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {  

        if(geoPoints != null && geoPoints.size() > 1 && !isTouched){
            Paint mPaint = new Paint();
            mPaint.setStrokeWidth(2); 
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setAntiAlias(true); 

            Projection projection = mapView.getProjection();

            Point from = new Point();   
            Point to = new Point();
            Path p = new Path();

            projection.toPixels(geoPoints.get(0), from);            

            for(int i = 1; i < geoPoints.size(); i++){          
                projection.toPixels(geoPoints.get(i), to);
                p.moveTo(from.x, from.y);
                p.lineTo(to.x, to.y);
                from.set(to.x, to.y);               
            }  

            canvas.drawPath(p, mPaint);
            mapView.invalidate();
        }

        super.draw(canvas, mapView, shadow);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:34:09.477

`onTouchEvent()`您需要从处理时返回 true`MotionEvent`并且不希望它被其他任何人处理。

否则，您返回 false，并且该事件将由`MapView`导致地图移动的结果进行处理。

问候。

# java - 获取 xml 元素的字节/字符

> ID：13543952
> 
> 赞同：4
> 
> 时间：2012-11-24T17:57:32.227
> 
> 标签：java, xml, xml-parsing, lucene

我想知道 java 中的哪个 XML 解析器（如果有的话）可以为我提供它解析的 xml 元素的字节偏移量。

我正在使用 Lucene 来索引我的 XML 文件，当我搜索特定单词时，我需要输出包含 XML Element 、文件名以及字节偏移量，以便我可以快速找到该偏移量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T18:10:24.260

看看 VTD-XML： http: [//vtd-xml.sourceforge.net](http://vtd-xml.sourceforge.net)，它`VTDNav.getContentFragment()`编码了元素的偏移量和长度：[javadoc](http://vtd-xml.sourceforge.net/javadoc/com/ximpleware/VTDNav.html#getContentFragment%28%29)。

您可以通过将其转换为 int 来获得偏移量`(int) VTDNav.getContentFragment()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T18:20:19.043

考虑 StAX (javax.xml.stream)，这是一个开始的示例：

```
 XMLInputFactory f = XMLInputFactory.newInstance();
    XMLStreamReader xr = f.createXMLStreamReader(new FileReader("test.xml"));
    while (xr.hasNext()) {
        int n = xr.next();
        Location l = xr.getLocation();
        switch (n) {
        case XMLStreamReader.START_ELEMENT:
            System.out.println(l.getColumnNumber());
            System.out.println(l.getLineNumber());
                                ... more 
            break;
        }
    } 
```

# java - 我无法让它工作，方法和实例变量

> ID：13543953
> 
> 赞同：6
> 
> 时间：2012-11-24T17:57:34.433
> 
> 标签：java, variables, methods, instance

我是编程新手，如果这是一个愚蠢的错误，我很抱歉，但我不断收到这个错误，`"CompanyAddress.java:11: error: cannot find symbol System.out.println(testObject.getName(CompanyName));"`我不知道我做错了什么。

主要的。

```
import java.util.Scanner;
public class CompanyAddress
{
  public static void main(String[] args)
  {
     Scanner scan = new Scanner(System.in);
     test testObject = new test();
     System.out.println("Enter name: ");
     String input = scan.nextLine();
     testObject.getName(input);
     System.out.println(testObject.getName(CompanyName));
  }
} 
```

我的 test.java

```
import java.util.Scanner;
public class test 
{
    String Name;

    public String getName(String CompanyName) 
    {
        Name = CompanyName;
        return Name;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:58:28.997

您必须声明变量`CompanyName`。像这样的东西：

```
String CompanyName = "CompanyName1";
System.out.println(testObject.getName(CompanyName)); 
```

由于您正在修改变量，因此您应该这样做：

```
public class test
{
       String Name;

        public void setName(String CompanyName) {this.Name = CompanyName;}

        public String getName()                 {return Name;} 
```

}

该方法`getName`将返回“公司”`setName`的名称，并将修改“公司”的名称。这样你就可以**分离不同的关注点**。

此外，您将来可以在不修改公司实际名称的情况下调用方法 getName。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T17:59:40.247

```
System.out.println(testObject.getName(CompanyName)); 
```

这是什么`CompanyName`？它是未知的符号。它可能是`System.out.println(testObject.getName("CompanyName"));`

或者

```
String CompanyName ="name";
System.out.println(testObject.getName(CompanyName); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T18:00:17.227

**首先，**您需要在将变量`companyName`传递给您的方法之前声明您的变量。

**其次，**你的方法： -

```
public String getName(String CompanyName) 
{
    Name = CompanyName;
    return Name;
} 
```

对我来说似乎很奇怪。您使用的方法与`getter and setter`.

你应该有`separate setter and getter`： -

```
public void setName(String companyName) {
    name = companyName;
}

public String getName() {
    return name;
} 
```

并分别调用它们。

```
testObject.setName(companyName);

System.out.println(testObject.getName()); 
```

**只是一个建议：-**

遵循 Java 命名约定。字段名称和方法名称应以小写字母开头。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-24T18:05:06.967

我认为您希望您的程序执行以下操作。一个`setName()`将传递的值设置为 name 的函数，一个`getName()`将返回 name 的值的函数。

```
import java.util.Scanner;
public class test 
{
    String Name;

    public String getName()
    {
        return Name;
    }

    public String setName(String companyName)
    {
        this.Name=companyName;
    }
} 
```

现在

```
public class CompanyAddress
{
  public static void main(String[] args)
  {
     Scanner scan = new Scanner(System.in);
     test testObject = new test();
     System.out.println("Enter name: ");
     String input = scan.nextLine();
     testObject.setName(input);
     System.out.println(testObject.getName());
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T18:01:15.680

将您的“getName”重命名为“setName”（因为它是一个 setter）并在您的类中添加一个适当的 getter 并使用它：

```
public class test 
{
    String Name;

    public void setName(String CompanyName) 
    {
        Name = CompanyName;
    }

    public String getName() {
        return Name;
    }
} 
```

然后：

```
 System.out.println(testObject.getName()); 
```

此外，如果您遵守标准命名约定，它将对您有所帮助：

*   类名以大写字母开头
*   方法、变量和参数名称以小写字母开头

# performance - r 矩阵乘积元素

> ID：13543954
> 
> 赞同：1
> 
> 时间：2012-11-24T17:57:37.067
> 
> 标签：performance, r, matrix, product

我有3个矩阵：

```
 A (n by K), 

 B (L by m) and 

 C (L by K) 
```

并想产生第四个矩阵

```
D (n by m) 
```

有元素

```
D(i,j) = sum(B[,i,drop=FALSE]%*%A[j,,drop=FALSE] * C) 
```

（请注意，B[,i,drop=FALSE]%*%A[j,,drop=FALSE] 是 (L × 1) 矩阵与 (1 × K_ 矩阵) 的乘积，因此是 (L × K )，就像 C 一样。“sum”对结果矩阵的所有元素求和)

一种方法是创建一个网格作为 expand.grid(1:n,1:m) 并为每个元素计算 D(.,.)。关于如何在 R 中更快地做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:15:17.377

```
library(reshape2)
library(plyr)  
m <- 100;n <- 100;K <- 100;L <- 100
A <- matrix(sample(1:n),nrow=n,ncol=K)
B <- matrix(sample(1:L),nrow=L,ncol=m)
C <- matrix(sample(1:L),nrow=L,ncol=K)

h <- ddply(expand.grid(1:m,1:n),.(Var1,Var2),
           f <- function(i) {sum(B[,i$Var1,drop=FALSE]%*%A[i$Var2,,drop=FALSE]*C)})
D <- acast(h, Var2 ~ Var1) 
```

# mysql - mysql命令行非终止语句

> ID：13543961
> 
> 赞同：0
> 
> 时间：2012-11-24T17:58:21.100
> 
> 标签：mysql, unix

有时我从命令行的查询永远不会终止。我觉得它好像也是随机发生的。

这不仅仅是为了显示警告......它也适用于选择。

```
mysql> show warnings
    -> ;
    -> ;
    -> 
    -> 
    -> psaef 
    -> p[wkt 0=23kit 0
    -> -=13i t0=13i -=13i  1- 1  -   1 
```

刚刚又做了...

```
mysql> select trigger_schema, trigger_name, action_statement from information_schema.triggers ;
    -> 
    -> 
    -> 
    -> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T22:56:01.077

确保您最终获取的脚本是：

```
DELIMITER ; 
```

如果您不确定，请在采购后自行输入。

# android - 具有圆形颜色、背景图像和选择器的 android 按钮

> ID：13543967
> 
> 赞同：2
> 
> 时间：2012-11-24T17:58:49.567
> 
> 标签：android, button

现在按钮是圆角，未按下时填充为实心绿色，按下时变为实心蓝色圆角。编码如下：

我想问如果我愿意，如何修改以下内容

1.  为按钮设置按下和未按下的背景图像，而不是纯蓝色和绿色
2.  我怎么能在按钮上添加填充，因为现在所有按钮都互相粘在一起。我已经在 xml 中声明了填充，但没有成功

## 在 xml 中：

```
 <Button
        android:id="@+id/buttonC"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_span="4"
        android:background="@drawable/story_btn"
        android:onClick="buttonC_click"
        android:padding="2dp"
        android:text="abc"
        android:textSize="20dp" /> 
```

## 在story_btn.xml

```
<item android:state_pressed="true" >         
    <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
        <stroke android:width="5dp" android:color="@color/red" />
        <solid android:color="@color/blue"/>
        <padding android:left="5dp" android:top="2dp" 
            android:right="5dp" android:bottom="2dp" /> 
        <corners android:radius="15dp" /> 
    </shape>    
</item>

<item>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
        <stroke android:width="2dp" android:color="@color/black" />
        <solid android:color="@color/green"/>
        <padding android:left="5dp" android:top="2dp" 
            android:right="5dp" android:bottom="2dp" /> 
        <corners android:radius="15dp" /> 
    </shape>
</item> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:05:11.043

1.  在你的 story_btn.xml 中，不要为每个项目指定一个形状，而是指定一个像 android:drawable="@drawable/activity_active" 这样的可绘制对象。
2.  使用 Layout_margin 指定按钮之间的边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T00:48:02.580

您可以放置​​圆形颜色图像本身，无需创建圆形颜色。然后您可以应用样式`state:pressed`并`state:selected`放置您想要的图像，默认情况下您在项目标签中有另一个图像

# javascript - 更改匿名函数的名称？

> ID：13543968
> 
> 赞同：5
> 
> 时间：2012-11-24T17:58:54.433
> 
> 标签：javascript, anonymous-function

函数对象有一个名为 name 的非标准属性。有谁知道改变它的方法吗？或任何其他方式来更改匿名函数的名称？如果 JavaScript 可以创建动态命名的变量会很好，但它似乎只能创建公共对象属性名称。
我想做什么？
我正在努力实现这样的目标。

```
// o - literal object, or json
// c - string
function givemeConstructor(o, c, a}){
    var a = a || 'Object';
    // check other variables
    var cons;

    if(a === 'Object'){
        cons = function(){};
        for(p in o) cons.prototype[p] = o[p];
        cons.name = c;
    }
    else{
        // a way to create a constructor that inherits from a
        // adds object as new prototype
    }

    return cons;            
}

var cons = givemeConstructor({x:1,y:1, toString:function(){return '['+ x + ','+ y+'']'}, 'Point'}) 
```

最终得到一个可自省的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:10:29.420

我不清楚您在这里使用的模式，但混淆似乎是向`name`构造函数添加属性不允许您以我的名字引用它。它的“名称”是您分配给它的任何变量。

根据你到目前为止所做的，我认为这会给你你想要的 -

```
function givemeConstructor ( proto ){
    var tmp = function(){};
    tmp.prototype = proto;
    return tmp;
}

var Point = givemeConstructor( {x:1 ,y:1, toString:function(){return '['+ this.x + ','+ this.y +']' } } );
var p = new Point; 
```

笔记：

1.  您的函数需要使用`this.x`和`this.y`访问原型中的变量
2.  如果你这样做，你的构造函数不能接受`x`和参数`y`
3.  您可以检查`Point.prototype`或实例化和检查`p`
4.  设置`Function.name`为`Point`非常没有意义，并且不会改变构造函数的引用方式。

# excel - 使用 ADDRESS() 返回从另一个公式 (Excel) 中找到的单元格

> ID：13543972
> 
> 赞同：-1
> 
> 时间：2012-11-24T17:59:18.257
> 
> 标签：excel

我有一列城市名称与一行相同城市名称的电子表格，其中的单元格具有它们之间的距离。因此，您可以想象一条由零组成的对角线，其中每个城市将经过零距离到达自身，对角线两侧的两个三角形是它们所持有数据的镜像。

现在我想要实现的是找到离另一个城市最近的城市。所以目前我可以成功地找到从一个城市到下一个城市的最小距离：“{=MIN(IF(B2:B19>0,B2:B19))}”

这让我得到了最小的零距离，但我也想要城市名称，它出现在最左边的列中。

我试过用这个：“{=OFFSET(INDIRECT(ADDRESS(ROW(),COLUMN())),0,X)}

其中 X = 到达左侧城市名称列表所需的列偏移量。我已尝试按照 ROW() 和 COLUMN() 函数开头所述放入 MIN 函数，但这会导致错误并且不起作用。

基本上对于我发现的距离，我想获得与该距离相关的最左侧列的城市名称。如果有人能看到我接下来应该看哪里或哪里出错了，将不胜感激。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:12:23.723

您可以尝试改用`INDEX`公式（作为数组输入，就像您之前所做的那样）：

```
=INDEX($B$1:$D$1,1,MATCH(MIN(IF(B2:D2>0,B2:D2)),B2:D2,0)) 
```

这与您上面的公式具有相同的警告`MIN`- 它将匹配找到的第一个值。（注意：@barryhoudini 下面的公式 ( `=INDEX($B$1:$D$1,MATCH(SMALL(B2:D2,2),B2:D2,0))`) 实际上会为您节省数组条目，并且也更简洁）。

![在此处输入图像描述](../Images/4cd9e0f89657ee4e321cd89f355688c0.png)

如果你想使用`INDIRECT`，你可以使用（也作为数组输入）：

```
=INDIRECT(ADDRESS(ROW($1:$1),MATCH(MIN(IF(B2:D2>0,B2:D2)),A2:D2,0))) 
```

![在此处输入图像描述](../Images/45e3e89e4f1d3600e94e2dbd636d0b95.png)

这使用第一行作为 的`row_num`参数`ROW`，匹配`MIN`值并返回`ADDRESS`匹配值处第一行中单元格的 。地址将类似于`$D$1`，`INDIRECT`并将返回该值。

# python - Python：是否存在已经找到角度和两点之间距离的模块？

> ID：13543977
> 
> 赞同：2
> 
> 时间：2012-11-24T17:59:48.933
> 
> 标签：python, math, geometry, trigonometry

首先，我很抱歉发布这个简单的问题。可能有一个模块可以计算两点之间的角度和距离。

*   A = (560023.44957588764,6362057.3904932579)
*   B = (560036.44957588764,6362071.8904932579)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T18:06:16.130

给定

![在此处输入图像描述](../Images/1f182db138e2e2071146dce5b5d00c69.png)

您可以计算角度 ,`theta`和 A 和 B 之间的距离：

```
import math
def angle_wrt_x(A,B):
    """Return the angle between B-A and the positive x-axis.
    Values go from 0 to pi in the upper half-plane, and from 
    0 to -pi in the lower half-plane.
    """
    ax, ay = A
    bx, by = B
    return math.atan2(by-ay, bx-ax)

def dist(A,B):
    ax, ay = A
    bx, by = B
    return math.hypot(bx-ax, by-ay)

A = (560023.44957588764, 6362057.3904932579)
B = (560036.44957588764, 6362071.8904932579)
theta = angle_wrt_x(A, B)
d = dist(A, B)
print(theta)
print(d) 
```

产生

```
0.839889619638  # radians
19.4743420942 
```

`atan2`（编辑：由于您正在处理平面中的点，因此它比点积公式更易于使用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T18:07:44.927

当然，`math`模块有`atan2`. 是一个`math.atan2(y, x)`角度`(0, 0)`。`(x, y)`

也是`math.hypot(x, y)`距离`(0, 0)`形式`(x, y)`。

# python - PyQt4 & Windows 7 缩略图工具栏

> ID：13543978
> 
> 赞同：12
> 
> 时间：2012-11-24T17:59:52.380
> 
> 标签：python, pyqt, aero

如何在不使用本机代码的情况下使用 PyQt4 添加一些**缩略图工具栏**按钮`QMainWindow`（ctypes 和类似的很好，但不能从另一种语言创建 DLL）？

我更喜欢一个不会​​破坏我的应用程序平台独立性的解决方案（即在 Linux 上它应该什么都不做）。

[![缩略图工具栏](../Images/cc554854be72c1168e8d946ef76b4dfd.png)](https://i.stack.imgur.com/mvCTu.png)
[（来源：[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC420540.png)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T12:50:16.630

你应该阅读这个网页

[http://nicug.blogspot.com.br/2011/03/windows-7-taskbar-extensions-in-qt.html](http://nicug.blogspot.com.br/2011/03/windows-7-taskbar-extensions-in-qt.html)

祝你好运

# struts2 - 如何在struts2 jquery对话框上显示错误消息

> ID：13543982
> 
> 赞同：2
> 
> 时间：2012-11-24T18:00:14.880
> 
> 标签：struts2, struts2-jquery

我在 Struts2 jquery 对话框中打开了一个表单。当用户提交此表单时，我想 在同一个打开的对话框本身上显示服务器端错误消息*（例如，用户名存在，请选择另一个） 。*

我怎样才能做到这一点？任何提示或建议！请分享。

index.jsp（点击一个按钮会打开下面的表单）

```
`<s:actionerror/>
 <s:form action="testError" id="form3" theme="simple"/> 
     <s:textfield name="quantity" value="1""/>
 <s:form> 
 <sj:submit formId="form3" value="true"/>` 
```

动作.java

```
public String execute()
{   
     addActionError("Error message is blah blah");
      return ERROR;
    } 
```

Struts.xml

```
<action name="testError" class="com.Action">  
 <result name="error">index.jsp</result> 
</action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:20:35.713

试试这个：

```
<s:if test="hasErrors()">
    <sj:dialog title="error message">
        <s:actionerror/>
    </sj:dialog>
</s:if> 
```

# jquery - jquery：将新的动态元素绑定到已定义的函数

> ID：13543996
> 
> 赞同：1
> 
> 时间：2012-11-24T18:02:00.513
> 
> 标签：jquery, function, dynamic, bind

在我的页面上我有

```
$(function()
{
  $('.load').click(function()
  { 
  var val =  $(this).attr('value'); //get value of the button that called this function
  //do stuff});
}); 
```

以及在初始 html 上定义的一些按钮：

```
<input type="button" value="getData1" class="load" /> 
```

如果我稍后添加更多相同类的按钮，并希望它们以相同的方式操作，我如何将它们绑定到原始功能？

我在看，`.on`但它似乎定义了一个新功能。我希望有一种方法可以使用已经定义的方法。

或者我应该单独定义函数并从两个地方调用它？如果是这样，我如何将调用该函数的元素作为参数传递？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T18:04:56.870

`on`正如你所提到的，这就是目的。On 允许您将侦听器附加到包含要监视的元素的文档部分。

```
$(document).on('click', '.load', function() { 
    var val =  $(this).attr('value');
}); 
```

使用`document`不是最好的，因此理想情况下，您应该在其中放置一些选择器，以匹配围绕所有按钮的元素，包括当前和未来。

`document`调用后添加到内部的按钮也`on`将触发此处理程序，即使它们是稍后添加的。

# ruby-on-rails - 在 Rails 中重新创建模型

> ID：13543998
> 
> 赞同：0
> 
> 时间：2012-11-24T18:02:10.363
> 
> 标签：ruby-on-rails

我已经在 Rails 应用程序上工作了一段时间，并且想要重新创建模型而不经历所有迁移阶段（即从头开始），因为我终于有了我希望如何构建它的最终设计。

如何在不必重新创建整个项目的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T18:56:18.197

如果我正确理解你想要什么，

```
rake db:reset 
```

将从您的 db/schema.rb 重新创建您的数据库。确保在运行之前已运行所有迁移。

但是，rails 使用 db/migrate 中的迁移文件管理数据库。每次对数据库进行更改时，都需要通过它们进行更改，否则会遇到麻烦。这些文件应该被保留，每当您将应用程序部署到新机器时，运行 db:migrate 应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:07:49.430

我不确定这是否是您想要的，但您可以删除所有迁移文件并将所有内容从 db/schema.rb 复制到新的迁移。