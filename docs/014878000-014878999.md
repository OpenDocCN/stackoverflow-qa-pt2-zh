# StackOverflow 问答 14878000-14878999

# python - Thrift Python 客户端中具有默认值的默认参数

> ID：14878004
> 
> 赞同：4
> 
> 时间：2013-02-14T15:16:17.290
> 
> 标签：python, thrift

我有 Python 客户端调用一个 Thrift 服务，其中包含一些可选参数，如下所示：

```
bool postTweet(1: required Tweet tweet, 2: i32 x = 100); 
```

如果我尝试在不传递可选参数 x 的情况下从 Python 客户端调用此服务，则会出现异常：

```
TypeError: postTweet() takes exactly 2 arguments (1 given) 
```

任何线索为什么我得到这个异常但是它是带有默认值的可选参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-15T21:34:32.170

不可能用默认值定义一个 thrift 函数（至少从我阅读 thrift 白皮书后的理解来看）

你可以做的是定义一个特殊的参数结构，让你省略一些字段。

节俭代码示例：

```
struct PostTweetParameter {
1: required Tweet tweet;
2: optional i32 x;
}

bool postTweet(1: PostTweetParameter param); 
```

然后您可以构造省略`PostTweetParameter`字段。`x`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:10:13.330

x 参数必须与其他参数分开定义。否则，它可能会搞砸其他事情。要创建可选参数，你的函数必须看起来像这样： def function(x = 0): 有了这个，你可以选择 x 使用参数的值，但是如果你通过说 function() 来调用函数，X 会自动分配给0.记住，x必须在参数中自己设置，不能和其他参数混在一起。

# sql - 从单个表返回最新登录设备的列表

> ID：14878007
> 
> 赞同：1
> 
> 时间：2013-02-14T15:16:22.577
> 
> 标签：sql, sql-server-2008-r2

我需要修复一个 SQL 查询，它只返回最新登录的用户，而不是记录表中的所有登录用户。我正在使用 SQL Server 2008 R2。

该表如下所示：

```
ID  StoreID DeviceTimeStamp CreatedBy   CreatedDate UpdatedBy   UpdatedDate action  PersonID    Description
----------------------------------------------------------------------------------------------------------------------
56  82  2/11/13 8:43    Handheld Login  2/11/13 8:43    Handheld Login  2/11/13 8:43    1   97  Login
57  82  2/11/13 8:45    Handheld Login  2/11/13 8:45    Handheld Login  2/11/13 8:45    1   97  Inventory Recorded
58  82  2/11/13 8:59    Handheld Login  2/11/13 8:59    Handheld Login  2/11/13 8:59    1   97  Logout
59  82  2/11/13 9:12    Handheld Login  2/11/13 9:12    Handheld Login  2/11/13 9:12    1   97  Login
60  82  2/11/13 9:14    Handheld Login  2/11/13 9:14    Handheld Login  2/11/13 9:14    1   97  Issue Reported
61  82  2/11/13 9:14    Handheld Login  2/11/13 9:14    Handheld Login  2/11/13 9:14    1   97  Issue Reported
62  82  2/11/13 9:22    Handheld Login  2/11/13 9:22    Handheld Login  2/11/13 9:22    1   97  Logout
63  82  2/11/13 10:42   Handheld Login  2/11/13 10:42   Handheld Login  2/11/13 10:42   1   97  Login
64  82  2/11/13 10:42   Handheld Login  2/11/13 10:42   Handheld Login  2/11/13 10:42   1   97  Logout
65  82  2/11/13 11:18   Handheld Login  2/11/13 11:18   Handheld Login  2/11/13 11:18   1   97  Login
66  82  2/11/13 11:18   Handheld Login  2/11/13 11:18   Handheld Login  2/11/13 11:18   1   97  Logout
67  NULL    2/11/13 11:19   Handheld Login  2/11/13 11:19   Handheld Login  2/11/13 11:19   1   97  Travel Time
68  NULL    2/11/13 11:19   Handheld Login  2/11/13 11:19   Handheld Login  2/11/13 11:19   1   97  Travel Time (Logout)
69  NULL    2/11/13 11:19   Handheld Login  2/11/13 11:19   Handheld Login  2/11/13 11:19   1   97  Absent
70  NULL    2/11/13 11:20   Handheld Login  2/11/13 11:20   Handheld Login  2/11/13 11:20   1   97  Absent (Logout)
71  82  2/11/13 11:46   Handheld Login  2/11/13 11:46   Handheld Login  2/11/13 11:46   1   97  Login
72  82  2/11/13 13:14   Handheld Login  2/11/13 13:14   Handheld Login  2/11/13 13:14   1   97  Logout
73  NULL    2/11/13 13:14   Handheld Login  2/11/13 13:14   Handheld Login  2/11/13 13:14   1   97  Travel Time
74  NULL    2/11/13 13:17   Handheld Login  2/11/13 13:17   Handheld Login  2/11/13 13:17   1   97  Travel Time (Logout)
75  82  2/11/13 13:17   Handheld Login  2/11/13 13:17   Handheld Login  2/11/13 13:17   1   97  Login
76  82  2/12/13 11:09   Handheld Login  2/12/13 11:09   Handheld Login  2/12/13 11:09   1   97  Login
77  82  2/12/13 11:10   Handheld Login  2/12/13 11:10   Handheld Login  2/12/13 11:10   1   97  Logout
78  82  2/13/13 15:27   Handheld Login  2/13/13 15:27   Handheld Login  2/13/13 15:27   1   97  Login
79  52  2/13/13 15:49   Handheld Login  2/13/13 15:49   Handheld Login  2/13/13 15:49   1   97  Login 
```

我试图从表中获取有关谁当前登录到哪个位置的最新信息。我正在使用的脚本只返回有关最后一个登录的人的信息，而不是其他人的信息。从上面来看，应该有 1 个人 ( `PersonID`) 登录到 2 个位置 ( `StoreID`)。

我尝试删除`DISTINCT`并获取最后一个登录人的列表，以获取表中的行数。（错误的）。

我不太擅长聚合函数，因此非常欢迎在修复此查询方面提供任何帮助。

现有代码 - SQL

```
select DISTINCT Lin.ID,
            Lin.PersonID, 
            Lin.StoreID, 
            MAX(Lin.DeviceTimeStamp)as DeviceTimeStamp, 
            Lin.CreatedBy, 
            Lin.CreatedDate,
            Lin.UpdatedBy,
            Lin.UpdatedDate, 
            Lin.action,
             Lin.description
from 
    (select ID, 
        PersonID, 
        StoreID, 
        MAX(DeviceTimeStamp) as DeviceTimeStamp, 
        CreatedBy,
        CreatedDate, 
        UpdatedBy, 
        UpdatedDate, 
        action, 
        Description
     from KF_EDC_Logging 
    where 
        Description = 'Login' 
    group by PersonID, 
        StoreID,
        DeviceTimeStamp, 
        ID, 
        CreatedBy, 
        CreatedDate,
         UpdatedBy, 
        UpdatedDate,
         action, 
        description ) Lin 
full outer join
    (select PersonID, 
        DeviceTimeStamp as DateTimeOut, 
        CreatedBy,
        CreatedDate, 
        UpdatedBy, 
        UpdatedDate, 
        action, 
        description 
    from KF_EDC_Logging 
    where 
        Description = 'Logout')  out 
    on Lin.PersonID = out.PersonID 
Where
    (out.DateTimeOut is null OR Lin.DeviceTimeStamp in 
        (Select MAX(KF_EDC_Logging.DeviceTimeStamp) from KF_EDC_Logging))
Group BY Lin.DeviceTimeStamp, 
        Lin.PersonID, 
        Lin.StoreID, 
        out.DateTimeOut, 
        Lin.ID, 
        Lin.CreatedBy, 
        Lin.CreatedDate, 
        Lin.UpdatedBy,
        Lin.UpdatedDate, 
        Lin.action,
        Lin.description 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:51:58.380

这是我的尝试。它使用公用表表达式来计算上次登录日期，然后将结果连接回其余数据。

```
WITH LogIn
AS
(
  SELECT PersonID, StoreID, MAX(DeviceTimeStamp) AS [DeviceTimeStamp]
  FROM KF_EDC_Logging
  WHERE Description = 'Login'
  GROUP BY PersonID, StoreID
),
LogOut
AS
(
  SELECT PersonID, StoreID, MAX(DeviceTimeStamp) AS [DeviceTimeStamp]
  FROM KF_EDC_Logging
  WHERE Description = 'Logout'
  GROUP BY PersonID, StoreID
)
SELECT K.ID, K.StoreID, LogIn.[DeviceTimeStamp], K.CreatedBy,
  K.CreatedDate, K.UpdatedBy, K.UpdatedDate, K.action,
  K.PersonID, K.Description
FROM LogIn
LEFT JOIN LogOut 
  ON LogIn.PersonID = LogOut.PersonID
  AND LogIn.StoreID = LogOut.StoreID
INNER JOIN KF_EDC_Logging AS K
  ON LogIn.PersonID = K.PersonID
  AND LogIn.StoreID = K.StoreID
  AND LogIn.DeviceTimeStamp = K.DeviceTimeStamp
WHERE (LogIn.[DeviceTimeStamp] > LogOut.[DeviceTimeStamp])
  OR (LogIn.[DeviceTimeStamp] IS NOT NULL AND LogOut.[DeviceTimeStamp] IS NULL) 
```

[SQL小提琴在这里](http://sqlfiddle.com/#!3/f142ef/13)

# python - 如何将列表转换为具有预定义结构的 numpy 数组

> ID：14878015
> 
> 赞同：0
> 
> 时间：2013-02-14T15:16:53.890
> 
> 标签：python, numpy

我有一个包含 ohlc 数据的列表：

```
[(1360710000.0, 69.06, 69.67, 68.53, 69.53, 550000.0, 69.53),
(1360623600.0, 68.98, 69.05, 68.39, 68.94, 604200.0, 68.94)] 
```

并希望它转换成一个结构如下的 numpy 数组：

```
array([ (1352934000, 63.130001068115234, 63.59000015258789, 62.900001525878906, 63.16999816894531, 816300.0, 63.16999816894531),
   (1353020400, 62.970001220703125, 63.529998779296875, 62.599998474121094, 62.61000061035156, 942000.0, 62.61000061035156),
   (1353279600, 63.0, 64.97000122070312, 63.0, 64.87999725341797, 812800.0, 64.87999725341797),
   (1353366000, 64.44999694824219, 65.27999877929688, 64.29000091552734, 65.23999786376953, 467700.0, 65.23999786376953),
   (1353452400, 65.16999816894531, 65.4000015258789, 64.58999633789062, 64.8499984741211, 417700.0, 64.8499984741211)], 
  dtype=[('time', '<i4'), ('open', '<f4'), ('high', '<f4'), ('low', '<f4'), ('close', '<f4'), ('volume', '<f4'), ('amount', '<f4')]) 
```

任何尝试都会导致预期的错误结构：

```
np.array(list, dtype=Day)

array([[1360710000.0, 69.06, 69.67, 68.53, 69.53, 550000.0, 69.53],
   [1360623600.0, 68.98, 69.05, 68.39, 68.94, 604200.0, 68.94]], dtype=object) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:20:21.070

```
lst = [(1360710000.0, 69.06, 69.67, 68.53, 69.53, 550000.0, 69.53),
       (1360623600.0, 68.98, 69.05, 68.39, 68.94, 604200.0, 68.94)]
np.array(lst, dtype=[('time', '<i4'), ('open', '<f4'), ('high', '<f4'), ('low', '<f4'), ('close', '<f4'), ('volume', '<f4'), ('amount', '<f4')]) 
```

返回

```
array([ (1360710000, 69.05999755859375, 69.66999816894531, 68.52999877929688, 69.52999877929688, 550000.0, 69.52999877929688),
       (1360623600, 68.9800033569336, 69.05000305175781, 68.38999938964844, 68.94000244140625, 604200.0, 68.94000244140625)], 
      dtype=[('time', '<i4'), ('open', '<f4'), ('high', '<f4'), ('low', '<f4'), ('close', '<f4'), ('volume', '<f4'), ('amount', '<f4')]) 
```

这不是你想要的吗？

# jquery - 如何删除：使用 touchend 激活

> ID：14878017
> 
> 赞同：0
> 
> 时间：2013-02-14T15:16:59.003
> 
> 标签：jquery, css, mobile, touch-event

是否可以在 touchend 删除活动状态？我想通过点击链接来设置链接的活动状态。当然，在我的移动设备中滚动时，我触摸的每个项目都会获得 :active 状态。所以滚动后所有元素都会突出显示。我不想使用 .active-classes 进行 DOM 操作我只想在滚动后删除活动状态 - 这可能吗？

```
a:active {
    background-color:blue;
}

$ctx.on("touchend", '.base a', function () {
    //removeActiveState
}); 
```

**编辑：**

我想要这个 - 但不是类：

```
var activeSelector =  ".base a";   
$(document)
        .on("click mousedown touchstart", activeSelector, function () {
            $(this).addClass("active");
        })
        .on("mouseup mouseleave touchend", activeSelector, function () {
            $(this).removeClass("active");
        }); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T15:40:49.677

这是没有 CSS 类的代码。

```
var activeSelector =  ".base a";   
$(document)
    .on("click mousedown touchstart", activeSelector, function () {
        $(this).css('background-color', 'blue');
    })
    .on("mouseup mouseleave touchend", activeSelector, function () {
        $(this).css('background-color', 'white'); // or whatever color you want
    }); 
```

# ruby-on-rails - 使用 OAuth 测试成功检索

> ID：14878019
> 
> 赞同：1
> 
> 时间：2013-02-14T15:17:11.017
> 
> 标签：ruby-on-rails, oauth

我正在开发 Rails Web 应用程序。我正在使用 Oauth 进行身份验证，并且我有一个与 api(JSON) 接口以检索信息的 ruby​​ API。我想使用 RSPEC 进行测试（如果我可以成功地进行身份验证和检索）并且需要一些帮助来解决这个问题？.

# iphone - 核心蓝牙框架的读、写、通知

> ID：14878020
> 
> 赞同：0
> 
> 时间：2013-02-14T15:17:12.613
> 
> 标签：iphone, core-bluetooth

希望你会没事的。我正在开发一个 iOS 项目并使用 BLE112 连接汽车。我在编写 BGPProfile 时有些困惑。我已经阅读了 BGPProfile 开发人员指南，但我仍然对读取、写入、通知的属性感到困惑。

场景很简单。当我按下 iPhone 上的启动按钮时，汽车应该启动。那么我应该在这里使用哪个属性来表示特征？
因为唯一的工作就是访问连接到启动按钮的端口。.

我将非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:23:29.333

> 当我按下 iPhone 上的启动按钮时，汽车应该启动。那么我应该在这里使用哪个属性来表示特征？

这将在您正在使用的蓝牙配置文件的文档中定义。这可能是专有信息，所以我怀疑这里的任何人都可以告诉你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:30:13.910

您的想法很棒，但您需要了解一些有关蓝牙 LE 的基本信息。

首先 - 蓝牙 LE 只能与另一个蓝牙 LE 通话。检查天气您的汽车蓝牙和 iPhone 蓝牙都是 LE。

其次 - 您的车载蓝牙系统应该能够启动您的汽车。

# java - 从html页面中提取源代码

> ID：14878021
> 
> 赞同：1
> 
> 时间：2013-02-14T15:17:18.067
> 
> 标签：java

我正在尝试使用以下代码从网站读取源代码

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;

public class GrabHTML {

public static void Connect() throws Exception{

 //Set URL
 URL url = new URL("http://www.google.ca/");
 URLConnection spoof = url.openConnection();

 //Spoof the connection so we look like a web browser
 spoof.setRequestProperty( "User-Agent", "Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0; H010818)" );
 BufferedReader in = new BufferedReader(new InputStreamReader(spoof.getInputStream()));
 String strLine = "";

 //Loop through every line in the source
   while ((strLine = in.readLine()) != null){

 //Prints each line to the console
   System.out.println(strLine);
  }

 System.out.println("End of page.");
}

public static void main(String[] args){

 try{
  //Calling the Connect method
  Connect();
 }catch(Exception e){

 }
 }
 } 
```

但它只读取源代码的一部分。当我从浏览器中看到“查看源代码”时，Google.com 有更多数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:57:20.340

删除以下语句

> spoof.setRequestProperty("User-Agent", "Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0; H010818)" );

# java - 休眠一对一映射不更新子表

> ID：14878026
> 
> 赞同：0
> 
> 时间：2013-02-14T15:17:20.887
> 
> 标签：java, spring, hibernate, postgresql, rest

我有以下具有一对一映射的关联类。

```
@Entity
    public class EmployeeEntity
    {
      @Id
      private String id;

      private String name;

      @OneToOne(mappedBy = "employeeEntity", fetch = FetchType.EAGER, cascade = CascadeType.ALL)
      @Fetch(FetchMode.SELECT)
      @JoinColumn(name = "empid")
      private AddressEntity addressEntity;
        ...
        ...
        getters & setters
    }

@Entity
public class AddressEntity
{
    @Id
    @Column(unique=true, nullable=false)
    @GeneratedValue(generator="gen")
    @GenericGenerator(name="gen", strategy="foreign", parameters=@Parameter(name="property", value="employeeEntity"))
    private String empId;

    @OneToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @PrimaryKeyJoinColumn
    private EmployeeEntity employeeEntity;
    ...
    getters & setters
} 
```

我正在使用 postgres 并在地址实体表上有以下外键约束的表（employeeentity，addressentity）：外键约束：“fkakhilesh”外键（empid）参考employeeentity（id）ON DELETE CASCADE

我对不同的 REST 调用有以下要求：

1.  POST Rest call - 应该创建一个有地址的员工。
2.  POST Rest call - 应该创建一个没有地址的员工。
3.  GET Rest 调用 - 应该检索一个员工。地址也应该出现（如果存在）。
4.  PUT Rest call - 应该更新员工和地址（如果地址存在）。
5.  PUT Rest 调用 - 应该更新员工和地址（当地址被传递并且它已经存在于 empid 的地址实体表中时）
6.  PUT Rest 调用 - 应该更新员工并创建地址（当地址被传递并且它在 empid 的地址实体表中不存在时）

我能够毫无问题地执行操作 1 到 5。

主要问题在 6 中，我想到了以下问题： 1\. 当我执行 "getSession().update(object)" 时，我得到 hibernate 的 StaleStateException: Batch update returned unexpected row count from update [0]; 实际行数：0；预期：1.如果地址不存在，“更新”是否不可能？我不能在更新期间创建一个新地址吗？

1.  我是否需要将我的 ServiceImpl 调用更改为“getSession().merge(object)？这种情况只能通过调用“merge”来处理吗？它如何影响性能？

2.  如果我合并，我会得到休眠的 IdentifierGenerationException：试图从空的一对一属性分配 id。我在这里错过了什么吗？

3.  这可以通过更改休眠映射来解决吗？或与级联有关的东西。

4.  @GeneratedValue(generator="gen") 在这里的重要性是什么？为什么在@GenericGenerator 中使用@parameter

我是休眠新手，并试图深入了解休眠映射。此外，如果您能就设计建议我作为处理此问题的最佳方法，我将很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T05:52:02.047

我得到了解决这个问题。这种一对一的映射有点棘手，并不像我最初想象的那样简单。我使用了双向的一对一映射，因此在更新期间调用 EmployeeEntity 和 AddressEntity 的设置器以相互设置非常重要。例如：

employeeEntity.setAddressEntity(addressEntity) 和 addressEntity.setEmpoyeeEntity(empoyeeEntity) 必须显式调用。

单独设置 employeeEntity.setAddressEntity(addressEntity) 将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:08:15.397

*   始终使用整数 ID 并`.getSession.saveOrUpdate(entity);`用于保存或更新。

*   在一对一映射中，您应该提到`constrained=true`孩子。它使子 ID 与父 ID 相同。

*   将这些行用于子 ID。我不知道 Java 属性语法。

```
<generator class="foreign">
    <param name="property">employeeEntity</param>
</generator> 
```

*   还要`Cascade.All`从子级中删除 Fetch 类型。我认为默认的获取模式`Select`很好。Cascade 通常用于负责父子关系的 Parent 部分。

# java - 密码至少 [1-9] 至少 [az] 至少 [AZ] 不带特殊字符

> ID：14878031
> 
> 赞同：0
> 
> 时间：2013-02-14T15:17:27.437
> 
> 标签：java, regex, passwords, special-characters

我需要帮助以使用正则表达式 JAVA 验证密码，密码必须包含： - 至少 [az] - 至少 [AZ] - 至少 [1-9] 没有特殊字符。

谢谢

塞缪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:27:00.667

如果密码可以包含的唯一字符是`a-z`，`A-Z`并且`1-9`您可以使用

```
"^(?=.*[a-z])(?=.*[A-Z])(?=.*[1-9])[a-zA-Z1-9]+$" 
```

如果密码可以包含其他字符，您需要指定它们是什么，或者指定它们不能是什么。

如果要指定最小长度，请将其更改`+`为 eg `{10,}`- 表示 10 或更多。

# java - 按下按钮时，ProgressIndicator 会冻结。JavaFX

> ID：14878032
> 
> 赞同：2
> 
> 时间：2013-02-14T15:17:27.607
> 
> 标签：java, javafx, progress-indicator

我正在使用设置为 -1.0 的指示器进度来显示`loginprocess`运行时的一些加载。但是当我按下 Enter 按钮并使用 启动执行程序时`loginProcess`，`freezed`即使我使用`Plataform.runLater`设置可见我的`ProgressIndicator`.

我的按钮事件：

```
public void initManager(final LoginManager loginManager) {
    btnEntrar.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent event) {

            String email = loginTxtField.getText().trim();
            String token = tokenTxtField.getText().trim();

            if (email.equals("")) {
                Platform.runLater(new Runnable() {
                    public void run() {
                        Dialog.showError("Erro", "Digite o e-mail");
                    }
                });
                return;
            }

            try {

                Future future = loginProcess(email, token);

                showLoginLoading(future);

                future.get();

                if (!loginGatewayFailed && !loginTargetAppFailed) {

                    Login loginTargetApp = new Login(email, null, null);
                    loginManager.autheticated(loginTargetApp, loginGateway, gateway, file);

                } else {

                    if (loginTargetAppFailed) {

                        Platform.runLater(new Runnable() {
                            public void run() {
                                Dialog.showError("Erro", loginTargetAppFailedCause);
                            }
                        });

                    } else {

                        if (loginGatewayFailed) {

                            Platform.runLater(new Runnable() {
                                public void run() {
                                    Dialog.showError("Erro", loginGatewayFailedCause);
                                }
                            });
                        }
                    }
                }

            } catch (final Exception ex) {

                Logger.getLogger(LoginController.class.getName()).log(Level.SEVERE, ex.getMessage());

                Platform.runLater(new Runnable() {
                    public void run() {
                        Dialog.showError("Erro", ex.getMessage());
                    }
                });
            }
        }
    });
} 
```

我的登录过程：

```
public Future<?> loginProcess(String email, String token) throws Exception {

// MY PROCESS

            return Executors.newSingleThreadExecutor().submit(new LoginTask(this, email, token));

        } catch (Exception e) {

            Logger.getLogger(LoginController.class.getName()).log(Level.SEVERE, e.getMessage());

            throw e;
        }
    } 
```

方法 showLoginLoading：

```
private void showLoginLoading(Future future) {
        while (!future.isDone()) {

            Platform.runLater(new Runnable() {

                @Override
                public void run() {
                    progressInd.setVisible(true);
                   // progressInd.setProgress(-1.0);
                }
            });

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:31:49.540

问题出在线程管理中。我试图在主 FX 视图运行的同一线程中执行登录指令。我使用 Platform.isFxApplicationThread(); 如果调用线程是 JavaFX 应用程序线程，则返回 true。

为了解决我的问题，我只需要创建一个新线程来运行我的所有登录指令，如下例所示：

```
public void initManager(final LoginManager loginManager) {
    btnEntrar.setOnAction(new EventHandler<ActionEvent>() {
    boolean mainThread = Platform.isFxApplicationThread();
            System.out.println("This is the main Thread: " + mainThread);

            Platform.runLater(new Runnable() {

                @Override
                public void run() {
                    progressInd.setVisible(true);
                }
            });

            new Thread() {
                public void run() {

                    boolean mainThread = Platform.isFxApplicationThread();
                    System.out.println("This is the main Thread: " + mainThread);

                    String email = loginTxtField.getText().trim();
                    String token = tokenTxtField.getText().trim();

                    if (email.equals("")) {
                        Platform.runLater(new Runnable() {
                            public void run() {
                                Dialog.showError("Erro", "Digite o e-mail");
                            }
                        });
                        return;
                    }

                    try {

                        Future future = loginProcess(email, token);

            //            showLoginLoading(future);

                        future.get();

                        if (!loginGatewayFailed && !loginTargetAppFailed) {

                            Login loginTargetApp = new Login(email, null, null);
                            loginManager.autheticated(loginTargetApp, loginGateway, gateway, file);

                        } else {

                            if (loginTargetAppFailed) {

                                Platform.runLater(new Runnable() {
                                    public void run() {
                                        Dialog.showError("Erro", loginTargetAppFailedCause);
                                    }
                                });

                            } else {

                                if (loginGatewayFailed) {

                                    Platform.runLater(new Runnable() {
                                        public void run() {
                                            Dialog.showError("Erro", loginGatewayFailedCause);
                                        }
                                    });
                                }
                            }
                        }

                    } catch (final Exception ex) {

                        Logger.getLogger(LoginController.class.getName()).log(Level.SEVERE, ex.getMessage());

                        Platform.runLater(new Runnable() {
                            public void run() {
                                Dialog.showError("Erro", ex.getMessage());
                            }
                        });
                    }

                }
            }.start();
           });
        } 
```

# asp.net-mvc-3 - Telerik MVC 网格分页查询字符串参数

> ID：14878033
> 
> 赞同：1
> 
> 时间：2013-02-14T15:17:29.613
> 
> 标签：asp.net-mvc-3, razor, telerik, telerik-grid

我大量使用 Telerik MVC 控件，特别是 Grid 和 Tab 条。在“客户编辑”屏幕上，我有一个标签条，如下所示：

```
@(Html.Telerik().TabStrip()
       .Name("customer-info")
       .Items(tabs =>
       {
           tabs.Add().Text("Addresses").Content(Addresses().ToHtmlString());
           tabs.Add().Text("Phone / Email").Content(PhoneNumbers().ToHtmlString());
           tabs.Add().Text("Card Numbers").Content(CardNumbers().ToHtmlString());
           tabs.Add().Text("Adjustments").Content(Adjustments().ToHtmlString()).Visible(Model.UserCanAddAdjustments);
           tabs.Add().Text("Transactions").Content(Transactions().ToHtmlString());
           tabs.Add().Text("Account Info").Content(AccountInfo().ToHtmlString());
       })
       .SelectedIndex(currentTab)) 
```

在“事务”选项卡中，我有一个网格，它现在正在使用 AJAX 绑定：

```
@(Html.Telerik().Grid<Transaction>()
.Name("transactions")
.DataBinding(bind => bind.Ajax().Select("AccountTransactionBinding", "Accounts", new { customerId = Model.CustomerId }))
.Columns(cols =>
    {
        cols.Bound(x => x.TransactionDate).Format("{0:d}").Title("Date").Width("10%");
        cols.Bound(x => x.Outlet.Name).Title("Outlet").Width("15%");
        cols.Bound(x => x.CheckNumber).Title("Check/Folio").Width("15%");
        cols.Bound(x => x.Type.Name).Title("Type").Width("15%");
        cols.Bound(x => x.CardNumber).Width("15%");
        cols.Bound(x => x.AmountSpent).Format("{0:c2}").Width("15%");
        cols.Bound(x => x.BasePoints).Title("Points").Width("15%");
    })
.Pageable(paging => paging.PageSize(15))
.Sortable(sort => sort.OrderBy(ob => ob.Add(x => x.TransactionDate).Descending()))
  .Filterable()) 
```

不幸的是，我需要在网格中添加一些额外的项目，这不会让我在 AJAX 绑定中执行此操作。我可以轻松地将其更改为服务器绑定，但是我的问题是分页。这个网格可能有成百上千的项目，所以它需要分页。如果我只是使用“常规”方式分页，它可以工作，但它默认为每个页面加载时的第一个选项卡。

现在背景不碍事，问题：有没有办法将 QueryString 参数“附加”到分页 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T14:02:01.563

如果你仍然有这个问题，你可以在后端绑定中获取 GridCommand 参数，这里有一些代码可以帮助做到这一点：

```
[GridAction(EnableCustomBinding = true)]
        public virtual ActionResult ListCompanyAjax(GenericSearchModel searchModel, GridCommand command)
        {
            var data = _searchService.SearchCompany(searchModel);

            if (searchModel != null &&
                !string.IsNullOrWhiteSpace(searchModel.Text))
            {
                data = data.ToList().OrderByDescending(x => x.GetPower(searchModel.Text)).AsQueryable();
            }
            else if(command.SortDescriptors.Count == 0)
                command.SortDescriptors.Add(new SortDescriptor{Member = "Name", SortDirection = ListSortDirection.Ascending});

            var results = data
                .Select(x => new CompanyForListingModel
                    {
                        Id = x.Id,
                        Name = x.Name,
                        IsActive = x.IsActive,
                        IsNotActive = !x.IsActive,
                        Class = x.Type.Name
                    })
                .ToGridModel(command.Page,
                             command.PageSize,
                             command.SortDescriptors,
                             command.FilterDescriptors,
                             command.GroupDescriptors);

            return View(results);
        } 
```

# android - 检查是否从外部服务检索到空值

> ID：14878034
> 
> 赞同：0
> 
> 时间：2013-02-14T15:17:29.950
> 
> 标签：android, json, web-services

我正在将外部数据库中的值检索到一个 android 应用程序中，该应用程序对服务器上的服务进行调用。这是php文件：

```
$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);

if (!$mysqli) {
    die('Connect Error (' . mysqli_connect_errno() . ') ' . sqli_connect_error());
}

$q=mysqli_query($mysqli, "SELECT title FROM post WHERE UPPER(title) LIKE UPPER('%" . $_REQUEST['searchThis'] . "%')");

while($e=mysqli_fetch_assoc($q)){
    $output[]=$e;
}

print(json_encode($output)); 
mysqli_close(); 
```

这就是我的班级所做的（我只写了重要的代码）：

```
try{
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(URL);
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();
}
catch(Exception e){
    Log.e("CONNECTION_ERROR", "Error in http connection "+e.toString());
}

try{
    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();
    result=sb.toString();

        ///-------------SYSTEM OUTS---------------

    System.out.println(result);
    System.out.println(result.getClass().getName());
}
catch(Exception e){
    Log.e("BUFFER_ERROR", "Error converting result "+e.toString());
}

//------------------PROBLEMS---------------
if(result.equalsIgnoreCase("null")){
    list.add("empty");
}

else{
    try{
        JSONArray jArray = new JSONArray(result);
        for(int i=0;i<jArray.length();i++){
            JSONObject json_data = jArray.getJSONObject(i);
            //Log.i("result",json_data.getString("title"));
            String title = json_data.getString("title");
            list.add(title);
        }
    }
    catch(JSONException e){
        Log.e("DATA_PARSING_ERROR", "Error parsing data "+e.toString());
    }
}
return list; 
```

}

我已经尝试过日志和打印，我得到的是：

```
null //FOR System.out.println(result);
java.lang.String //for System.out.println(result.getClass().getName()); 
```

它在服务器上的 php 服务返回某些内容时起作用，问题是当我将结果与“null”进行比较时，即使结果是值为“null”的字符串，它也总是错误的。然后我当然会遇到 JSON 异常，因为结果不是有效的转换格式。这里可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:24:23.303

您的代码似乎没有考虑您附加的尾随换行符（'\n'）。

You can either remove the appending of the newline character ('\n') in the while loop or remove it when you check for "null".

# sql - 替代 MIN 以选择多行

> ID：14878035
> 
> 赞同：2
> 
> 时间：2013-02-14T15:17:39.037
> 
> 标签：sql, sql-server, sql-server-2008

下面的 SQL 查询应该显示教师的可用性。有 3 种可能的预订类型 - 上午、下午或全天。如果有上午预订，则单元格中的文本应显示下午，如果有下午预订，则应显示上午，如果有全天预订，或上午和下午预订，则应显示“xxx”。

这在凌晨 1 点、下午 1 点或 1 全天预订时一切正常，但如果在同一天有凌晨 1 点和下午 1 点，它不会显示 XXX，因为我使用的是 MIN()。我怎样才能让它在一天内评估所有预订，而不是最小的预订？（你可以看到我试图在星期四的代码部分说明我的意思。

SQL：

```
with CTE_D as 
( 
   SELECT 
      DATEADD(ww, DATEDIFF(ww,0,GETDATE()), 0) as BookingDate 

   UNION ALL

   SELECT
      DATEADD(day, 1, BookingDate) 
   FROM
      CTE_D 
   WHERE
      BookingDate < DATEADD(ww, DATEDIFF(ww,0,GETDATE()), 6) 
)
SELECT 
    t.ID, t.Firstname, 
    t.Surname, tb.Band, t.Telephone, t.Mobile, t.Teacher, t.TeacherAssistant, t.PrimarySchool, t.SecondarySchool,
    MIN(CASE WHEN bd.DayText = 'Monday' AND bd.BookingDuration = 0 THEN 'PM' ELSE 'Full Day' END) "Monday", 
    MIN(CASE WHEN bd.DayText = 'Tuesday' AND bd.BookingDuration = 0 THEN 'PM' ELSE 'Full Day' END) "Tuesday", 
    MIN(CASE WHEN bd.DayText = 'Wednesday' AND bd.BookingDuration = 0 THEN 'PM' ELSE 'Full Day' END) "Wednesday", 
    MIN(CASE WHEN bd.DayText = 'Thursday' AND bd.BookingDuration = 0 THEN 'PM' WHEN bd.DayText = 'Thursday' AND bd.BookingDuration = 1 THEN 'AM' WHEN bd.DayText = 'Thursday' AND bd.BookingDuration = 2 or (bd.BookingDuration = 1 and bd.BookingDuration = 0) THEN 'xxx' END) "Thursday", 
    MIN(CASE WHEN bd.DayText = 'Friday' AND bd.BookingDuration = 0 THEN 'PM' ELSE 'Full Day' END) "Friday",
    Notes 
        FROM Teachers t 
        cross join CTE_D d 
        left join BookingDays bd 
            on t.ID = bd.TeacherID and 
               bd.BookingDate = d.BookingDate 
        left join BookingDurations bds 
            on bd.BookingDuration = bds.ID 
        left join TeacherBands tb on t.Band = tb.ID
        WHERE t.Active = 0 and (t.Status = 0 or t.Status = 1) and (bd.Status = 0 or bd.Status IS NULL) and PrimarySchool = 1
        GROUP BY Firstname, Surname, t.Telephone, t.Mobile, t.Notes, tb.Band, t.ID, t.Teacher, t.TeacherAssistant, t.PrimarySchool, t.SecondarySchool, t.Nursery, t.Reception, t.Year1, t.Year2, t.Year3, t.Year4, t.Year5, t.Year6, t.Year7, t.Year8, t.Year9, t.Year10, t.Year11, t.ALevel
        ORDER BY Surname, Firstname ASC 
```

表列：

```
ID | Firstname | Surname | Band | Telephone | Mobile | Teacher | Teacher Assistant | PrimarySchool | SecondarySchool | KeyStage | Mon | Tues | Wed | Thurs | Fri | Notes 
```

谢谢，马特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:09:43.290

我认为问题在于您正在尝试同时执行 2 个需要分开的操作（检查工作日，并检查预订持续时间）。为此，我假设您的预订时长为：

*   0 - 下午
*   1 - 上午
*   2 - 全天

如果这不正确，您将需要稍微调整我的查询，但这应该会让您走上正轨。我还假设预订表中没有记录意味着不可用：

```
SET LANGUAGE British;

WITH Bookings AS
(   SELECT  BookingDays.TeacherID,
            [WeekDay] = DATENAME(WEEKDAY, BookingDate),
            [Status] = CASE WHEN BookingDuration = 0 THEN 'PM' WHEN BookingDuration = 1 THEN 'AM' ELSE 'Full Day' END
    FROM    BookingDays
), PivotedBookings AS
(   SELECT  *
    FROM    Bookings
            PIVOT
            (   MAX([Status])
                FOR [WeekDay] IN ([Monday], [Tuesday], [Wednesday], [Thursday], [Friday])
            ) pvt
)
SELECT  t.ID, 
        t.Firstname, 
        t.Surname, 
        tb.Band, 
        t.Telephone, 
        t.Mobile, 
        t.Teacher, 
        t.TeacherAssistant, 
        t.PrimarySchool, 
        t.SecondarySchool,
        Monday = COALESCE(pb.Monday, 'Not Available'),
        Tuesday = COALESCE(pb.Tuesday, 'Not Available'),
        Wednesday = COALESCE(pb.Wednesday, 'Not Available'),
        Thursday = COALESCE(pb.Thursday, 'Not Available'),
        Friday = COALESCE(pb.Friday, 'Not Available'),
        t.Notes
FROM    Teachers t
        LEFT JOIN PivotedBookings pb
            ON pb.TeacherID = t.ID
        LEFT JOIN TeacherBands tb
            ON tb.ID = t.Band; 
```

**[减少 SQL Fiddle 上的示例](http://www.sqlfiddle.com/#!3/85336/1)**

* * *

**附录**

读完这一行：

```
WHEN bd.DayText = 'Thursday' AND bd.BookingDuration = 2 or (bd.BookingDuration = 1 and bd.BookingDuration = 0) 
```

这让我相信全天有 2 种可能性，要么是预订时间为 2，要么是表中同一教师和日期的上午和下午条目。在这种情况下，需要对数据进行两次透视，因此您的第一个 CTE 变为：

```
WITH Bookings AS
(   SELECT  BookingDays.TeacherID,
            [WeekDay] = DATENAME(WEEKDAY, BookingDate),
            [Status] = CASE WHEN [2] > 0 THEN 'Full Day'
                            WHEN [0] > 0 AND [1] > 0 THEN 'xxx'
                            WHEN [0] > 0 THEN 'PM'
                            WHEN [1] > 0 THEN 'AM'
                        END

    FROM    (   SELECT  TeacherID, BookingDate, BookingDuration, [X] = 1
                FROM    BookingDays
            ) BookingDays
            PIVOT
            (   SUM(X)
                FOR BookingDuration IN ([0], [1], [2])
            ) pvt
) 
```

**[SQL Fiddle 上的更新示例（请注意周四老师 1）](http://www.sqlfiddle.com/#!3/52067/1)**

# joomla - 为什么 JCE 会删除文章中看起来像 html 标记的文本？

> ID：14878037
> 
> 赞同：1
> 
> 时间：2013-02-14T15:17:46.670
> 
> 标签：joomla, joomla2.5, joomla-content-editor

我正在使用一个名为 CodeHighlighter 的插件，使用 JCE 在我的 Joomla 2.5 网站的文章中插入代码片段。

要插入代码片段，我在 JCE 中执行以下操作：

我切换到 HTML 代码视图，例如，我插入如下内容：

```
<pre class="brush:java">
package com.tutorialspoint;

import org.springframework.context.ApplicationListener;
import org.springframework.context.event.ContextStartedEvent;

public class CStartEventHandler 
    implements ApplicationListener<ContextStartedEvent>{

    public void onApplicationEvent(ContextStartedEvent event) {
         System.out.println("ContextStartedEvent Received");
    }
}
</pre> 
```

除了这部分代码之外，这很好用：`<ContextStartedEvent>`它被 JCE 消除了。我也尝试过使用无所见即所得的编辑器，没有问题。

所以问题似乎是 JCE 将`<ContextStartedEvent>`其视为标签而不是我的 Java 代码片段的合法部分，因此将其删除......

您对如何防止 JCE 删除这部分代码有一些想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T20:46:14.287

您可以尝试以下方法：

```
1\. Go to Global Configuration
2\. Click "Text Filters" Tab.
3\. Change "Super Users" filter type to "no filtering" 
```

这将解决诸如此类的问题。

*   Youtube 视频在 Joomla 中不起作用（代码被删除）
*   JCE TinyMCE 代码清理会删除我的样式代码和脚本。
*   在 Joomla 中，JCE 或 TinyMCE 删除了内联文档样式 (css)
*   JCE / TinMCE 中的代码清理问题
*   JCE 代码清理正在删除 Flash 脚本

# jquery - 手风琴添加和删除类

> ID：14878040
> 
> 赞同：0
> 
> 时间：2013-02-14T15:18:00.570
> 
> 标签：jquery, accordion, jquery-ui-accordion

我有一个文档，您想要激活和停用 ul 标记的背景。到目前为止，在我完成的代码中设法做到了，但是这完全是活跃的。如何在所选内容上激活可能？

此链接查看代码[http://jsfiddle.net/bruno_aw/3E6Qw/](http://jsfiddle.net/bruno_aw/3E6Qw/)。

```
 $(document).ready(function() {
            $('.mais_info').click(function() {  
                if ($('.relacionadas').is(':visible')) {
                    $('.list_calendar .calendar_listing ul').removeClass('bg_cinza');
                } 
                else {
                    $('.list_calendar .calendar_listing ul').addClass('bg_cinza');
                } 
                var id = this.id;
                id =  id.replace('bt_','');
                $('#info_'+id).slideToggle('fast', function(){
                    if ($('#info_'+id).is(':visible')){
                        $('#bt_'+id).css('background-position','left bottom');
                    } else {
                        $('#bt_'+id).css('background-position','left top');
                    }                         
                });                    
            });                 
        }); 
```

点击时。Mais_info 打开。相关且活跃在后台。列表_日历。Calendar_listing ul 但是当单击 2 时会发生错误。

如果可能，您想单击并激活每个独立的。

接受了以手风琴形式改进我的代码的建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:21:02.657

Do you mean like this? using `$(this)` will get the one you are selecting

```
$(this).parent().removeClass('bg_cinza'); 
```

demo here [http://jsfiddle.net/3E6Qw/3/](http://jsfiddle.net/3E6Qw/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:27:44.357

我想你正在寻找这个：http: [//jsfiddle.net/3E6Qw/4/](http://jsfiddle.net/3E6Qw/4/)

```
 $('.mais_info').click(function() {  
     if ($('.relacionadas').is(':visible')) {
          $('.list_calendar .calendar_listing ul',this).removeClass('bg_cinza');
          $(this).parent().removeClass('bg_cinza');
     } else {
          $('.list_calendar .calendar_listing ul',this).addClass('bg_cinza');
          $(this).parent().addClass('bg_cinza');
     } 
```

# java - 确定 Java 包的位置

> ID：14878042
> 
> 赞同：1
> 
> 时间：2013-02-14T15:18:07.203
> 
> 标签：java, classpath

我需要从提供特定逻辑 Java 包（例如`com.example.functionality`）的 Java 项目中找到 jar，但是它们有数百个，而且它们的名称并不是特别有用。

如何找出在 dirs/files/jars 和 packages/classes 之间创建的映射？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:35:42.070

obj.getClass().getProtectionDomain().getCodeSource()

参见：[javadoc](http://docs.oracle.com/javase/6/docs/api/java/security/CodeSource.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:29:36.717

您可以在代码中执行此操作：

```
类 myClass = Class.forName("com.example.functionality");

// 例如。/com/example/functionality.class
String classfilePath = '/' + myClass.getName().replace(".", "/") + ".class";

URL 位置 = myClass.getResource(classfilePath);

```

该 URL 将是 JAR 文件（如果不在 jar 中，则为类文件夹）。虽然有点 hacky - 可能不适用于所有类加载器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:38:03.637

对于一次性搜索，[http://www.jarfinder.com/](http://www.jarfinder.com/)很方便。它具有令人印象深刻的索引，似乎了解 Maven Central 以及 Web 上的许多其他下载站点中的所有内容，并允许您按类名搜索以查找哪些 JAR 包含该类。

# windows - 詹金斯“批量构建”每次都失败

> ID：14878043
> 
> 赞同：0
> 
> 时间：2013-02-14T15:18:03.787
> 
> 标签：windows, batch-file, build, jenkins, errorlevel

这是我的配置。-> 对不起，是德国人...（批次很重要）

[http://www.abload.de/image.php?img=configurationknjkj.jpg](http://www.abload.de/image.php?img=configurationknjkj.jpg)

这是结果（控制台）。

[http://www.abload.de/image.php?img=console_outputjpkxi.jpg](http://www.abload.de/image.php?img=console_outputjpkxi.jpg)

我不知道为什么。

**Jenkins 的提示是：**如果 %ERRORLEVEL% 不等于 0，则构建失败。

我做了什么？

```
set ERRORLEVEL=0 
```

或者

```
exit 0 
```

或者

```
exit /B 0 
```

**为什么每次构建都失败？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:43:37.657

我认为您的问题是您设置了 cobertura 插件，但它找不到您的输出文件（构建失败）。

尝试删除 JUnit 和 cobertura 报告，然后重试。

请记住，某些后期构建操作也可能使您的构建失败。

# c# - 有没有更简单的方法在 ListItemCollection 上进行投影？

> ID：14878046
> 
> 赞同：0
> 
> 时间：2013-02-14T15:18:12.280
> 
> 标签：c#, linq, optimization, webforms, projection

大家好，有没有办法对列表框的内容进行投影。具体来说，我希望能够做到这一点，而不必清除并添加我的列表框的内容这是我目前拥有的。

```
public static void SetSelectedWhere(this ListBox listbox, Func<ListItem,bool> condition) 
{
   var queryableList = listbox.Items.Cast<ListItem>();
   queryableList.Select(x=>condition(x)?x.Selected:x.Selected=false);
   listbox.Items.Clear();
   listbox.Items.AddRange(queryableList.ToArray<ListItem>());
}
```

必须清除我现有的收藏并重新添加内容似乎很愚蠢。

有什么想法吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:21:09.393

普通的旧迭代呢？

```
foreach (ListItem item in listbox.Items)
{
    item.Selected = condition(item);
} 
```

LINQ 不是生命宇宙和一切的答案。特别是涉及在现有对象上设置属性的宇宙部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:21:33.093

删除和阅读集合中的项目是愚蠢的，因为它完全没有必要。

您应该能够将其简化为以下内容：

```
foreach (ListItem item in listbox.Items)) {
  item.Selected = condition(item);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:31:35.887

```
listbox.Items
      .Cast<ListItem>()
           .Where(x=> condition(x))
                .ToList()
                      .ForEach(item => item.Selected = true); 
```

`List<T>`有一个调用的方法`ForEach`，您可以对列表中的任何项目执行操作：

*   [http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)

# iphone - 如何从 iPhone 应用程序访问电话联系人并在选择单个或多个联系人时发送短信

> ID：14878049
> 
> 赞同：-1
> 
> 时间：2013-02-14T15:18:27.180
> 
> 标签：iphone, ios, ios6, addressbook, addressbookui

我有一个 iPhone 应用程序，我想在其中访问电话簿联系人，并在选择单个或多个联系人时，我想向选定的联系人发送短信。请任何人都可以给我一个示例代码来做这个应用程序。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:18:50.457

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);

for (int i = 0; i < nPeople; i++) {
    // Get the next address book record.
    ABRecordRef record = CFArrayGetValueAtIndex(allPeople, i);        

    // Get array of email addresses from address book record.
    ABMultiValueRef emailMultiValue = ABRecordCopyValue(record, kABPersonEmailProperty);
    NSArray *emailArray = (__bridge_transfer NSArray *)ABMultiValueCopyArrayOfAllValues(emailMultiValue);

    [self.contacts addObject:emailArray];
} 
```

希望这能让你开始......

# objective-c - 通过arraycontroller获取选中的复选框列表

> ID：14878050
> 
> 赞同：0
> 
> 时间：2013-02-14T15:18:24.147
> 
> 标签：objective-c, cocoa, boolean, iteration, nsarraycontroller

我有一个绑定到 tableview 的 arraycontroller。我需要返回表中检查的复选框的数量。数组控制器充满了 nsmutabledictionaries。这是我到目前为止的代码：

```
-(IBAction)getlist:(id)sender{
checkedchecks = 0;
for (NSManagedObject *a in imagescontroller.arrangedObjects)
{

 ////MISSING CODE GOES HERE
}
NSAlert *alert = [[NSAlert alloc] init] ;
[alert setMessageText:[NSString stringWithFormat:@"%ld",(long)checkedchecks ]];
[alert runModal];

} 
```

现在我需要知道如何计算所有布尔值并设置为yes..谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:38:06.880

实际上，我认为您不必遍历对象。

```
NSUInteger checked = [(NSNumber*)[imagesController.arrangedObjects
                valueForKeyPath:@"@sum.boolProperty"] integerValue]; 
```

这是一种 hack，因为 a`BOOL`将被解释为 0 或 1。
语义上更正确的方法是。

```
NSUInteger checked = [imagesController.arrangedObjects
                 filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:
                   @"boolProperty == %@", @YES]].count; 
```

这是假设您有一个`arrangedObjects`包含`NSManagedObject`（或其子类）实例的数组（）。这些对象有一个名为`boolProperty`type的属性`NSNumber`（这是托管对象中 BOOL 值的标准包装器）。当显示一行时，如果这`boolProperty`是，则将其标记为选中`@YES`。如果您更改复选标记（例如通过选择行），则应更新模型：应检索并`boolProperty`切换适当的托管对象。

# objective-c - 从 UIScrollView 中删除 UIView 并添加到另一个自定义 UIView

> ID：14878051
> 
> 赞同：0
> 
> 时间：2013-02-14T15:18:32.107
> 
> 标签：objective-c, uiview, uiscrollview, draggable

我有一个 UIScrollView，其中包含一些自定义 UIView，我可以通过实现 touchesMoved 方法来拖动它们。但是，我需要能够将此自定义视图拖出滚动视图并将其添加到自定义 UIView 中，该 UIView 用作正在拖动的视图的停靠栏。

我将如何实施呢？一旦我从其超级视图中删除自定义可拖动视图，它就会消失（可以理解）。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:31:22.517

您必须在拖动的开始和结束时将视图作为同一视图的子视图。

为了将其作为该主视图的另一个子视图的子视图，您必须在适当的位置销毁并重新创建它。您可以在拖动过程的开始和结束时执行此操作。

# listview - 如何调整列表视图选择区域？

> ID：14878052
> 
> 赞同：0
> 
> 时间：2013-02-14T15:18:33.513
> 
> 标签：listview, winrt-xaml, windows-store-apps

我正在开发一个地铁应用程序项目，并且我有 listview。在列表视图中有一些项目，我无法滑动到列表的最后一个我不知道为什么，但项目下的所有区域都成为该项目的一部分

是否可以调整该项目的选择区域，以便我可以在它下方滑动

![在此处输入图像描述](../Images/5a531fb987c4c484424370d6366aee4a.png)

# java - 如何在我的 jar 中包含外部类

> ID：14878053
> 
> 赞同：0
> 
> 时间：2013-02-14T15:18:34.380
> 
> 标签：java, maven, classpath, pom.xml

我尝试编写的服务有问题。我正在尝试创建一个在 Windows 系统的后台运行但使用 java 的服务。我已经看到了几种方法，但决定采用一种似乎符合我要求的方法。该服务将检查数据库中需要处理的项目。当它在数据库中找到需要执行的项目时，它将运行一些系统命令来处理它们。

我找到了一种使用 tomcat7.exe 文件将 jar 作为服务运行的方法，并且对于基本内容非常有效。任何我编写并编译到我的 jar 文件“myService.jar”中的东西，我们都可以称之为它。问题是我们已经编写了几个类来访问数据库并运行预编译在名为 BGLib-1.0.jar 的类库中的命令。

我已经使用这个库编写了几个 jenkins 插件，并且从中调用函数没有问题。当我创建一个 hpi 文件并将其部署在 Jenkins 中时，它们都可以正常工作。在那里，编译器（使用 Maven 的 Eclipse）将 BGLib jar 与插件 jar 打包在一起，Jenkins 弄清楚如何让它们互相看到。

但是，当我构建服务 jar 时，部署它时它不起作用。

我运行这样的命令来安装 Tomcat exe 重命名为 myservice.exe：

```
d:\myService\bin>myService.exe //IS//myService --Install=D:\myService\bin\myService.exe --Description="run some commands
Java Service" --Jvm=auto --Classpath=D:\myService\jar\myService.jar;D:\myService\jar\BGLib-1.0.jar --StartMode=jvm --
StartClass=com.myCompany.myService.myService --StartMethod=windowsService --StartParams=start --StopMode=jvm --StopClass
=com.myCompany.myService.myService --StopMethod=windowsService --StopParams=stop --LogPath=D:\myService\logs --StdOutpu
t=auto --StdError=auto 
```

当我只在 myService.jar 中使用代码部署它时，服务的行为与预期一样，但是当我尝试调用 BGLib-1.0.jar 中的函数时，我什么也得不到。jvm 似乎崩溃或无响应。调试有点棘手，但看起来我遇到了 class not found 错误。

我尝试在 POM 文件中添加以下条目以查看更改清单中的类路径条目是否会有所帮助，但它并没有更改清单。我仍然对清单文件的工作方式一无所知。任何关于此的文档都会很酷。我去过 Maven 的网站，它似乎没有关于可用标签的全面文档。我需要在清单中更改一些内容以让我的 jar 看到外部类吗？还是我可以添加一些东西让 Maven 用我的 jar 编译该 jar 中的类？

提前致谢。

```
<configuration>
          <archive>
            <manifest>
              <addClasspath>true</addClasspath>
              <mainClass>com.myCompany.myService.myService</mainClass>
              <customClasspathLayout>BGLib-1.0.jar</customClasspathLayout>
            </manifest>
          </archive>
        </configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T17:35:07.570

在我看来，您实际上想使用[appassembler-maven-plugin](http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/index.html)，否则我会选择 maven-shade-plugin 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T15:19:07.110

您可以使用[maven-dependency-plugin unpack-dependencies 目标](https://maven.apache.org/plugins/maven-dependency-plugin/unpack-dependencies-mojo.html)将依赖项的内容包含在生成的工件中。

如何做到这一点的一个例子是：

```
 <plugin>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>${project.artifactId}-fetch-deps</id>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>unpack-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.outputDirectory}</outputDirectory>
                        <stripVersion>true</stripVersion>
                        <excludeTransitive>true</excludeTransitive>
                        <includeArtifactIds>protobuf-java</includeArtifactIds>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

这将扩展 protobuf-java 依赖项（将其展平）并将内容包含在您的构建生成的结果工件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:48:20.463

要主要回答标题的问题，您可以使用[shade 插件](http://maven.apache.org/plugins/maven-shade-plugin/)将依赖项包含到您的最终 jar 中。您甚至可以在最终的 jar 中重新定位类文件（例如更改包名称），以便包含的类不会与类路径上不同版本的阴影依赖项冲突。不过，不确定这是否是针对您的特定问题的最佳解决方案。

# c# - 实体框架 - 在多个 DbSet 中导航

> ID：14878055
> 
> 赞同：1
> 
> 时间：2013-02-14T15:18:38.040
> 
> 标签：c#, entity-framework

假设我有这些模型：

```
public class TextDocument
{
   public int Id { get; set; }
   public string Name { get; set; }
   public virtual List<Paragraph> Paragraphs { get; set; }
}

public class Paragraph
{
   public virtual TextDocument Document { get; set; } 
   public int Order { get; set; }
   public string Text { get; set; }
}

public class Image
{
    public virtual Paragraph Paragraph {get; set; }
    public virtual TextDocument Document { get; set; } 
    public string Url { get; set }
} 
```

现在，我需要在`TextDocuments`、`Paragraphs`、`Images`、`Paragraphs`in `TextDocuments`、`Images`in `Paragraphs`、`Images`in`TextDocuments`等中导航。

如何“连接”模型？我要问的是：

1.  如何制作数据上下文？仅适用于 TextDocument？
2.  有了这个，我如何在不知道 ID 等的情况下获取所有图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:33:17.050

你的方向是正确的，看起来你已经连接了模型。我假设您可以在属性中导航，而不会对此类定义产生任何问题。

缺少的一件事是段落和图像类的主键定义 (Id)。

编辑1：

您只能添加一个

```
public DbSet<TextDocument> {get;set;} 
```

在您的 DbContext 中，因此您将能够向下导航到图像。同样，您只能将 DbSet for Image 放在 DbContext 中，并且您应该能够向上导航到 TextDocument。您要达到的目标尚不清楚。编辑2：

```
public class Paragraph
{
   public int Id {get; set;} // add this
   public virtual List<Images> Images {get; set;} // and add this
   public virtual TextDocument Document { get; set; } 
   public int Order { get; set; }
   public string Text { get; set; }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:35:11.863

问题不清楚。你的模型也有点奇怪。`TextDocument`不包括`Image`s 的列表。但`Image`两者都包括返回导航到`Paragraph`和`TextDocument`。我认为您需要将`Image`列表添加到并从中`Paragraph`删除。这样你就可以让s 拥有s 和s 拥有s；`TextDocument``Image``Document``Pharagraph``Pharagraph``Image`

```
public class TextDocument
{
   public int Id { get; set; }
   public string Name { get; set; }
   public virtual List<Paragraph> Paragraphs { get; set; }
}
public class Paragraph
{
   public virtual TextDocument Document { get; set; } 
   public int Order { get; set; }
   public string Text { get; set; }
   public virtual List<Image> Images { get; set; }
}
public class Image
{
    public virtual Paragraph Paragraph {get; set; }
    public string Url { get; set }
} 
```

要创建上下文，请创建一个派生自 DbContext 的类，并添加您的实体集；

```
public class MyContext : DbContext
{
    public DbSet<Image> Images { get; set; }
    public DbSet<TextDocument> TextDocuments { get; set; }
    public DbSet<Paragraph> Paragraphs { get; set; }
} 
```

获取 id 等于 3 的特定文本文档的图像；

```
using(MyContext context = new MyContext())
{
    var temp = context.TextDocuments.Include("Paragraph.Image").Where(q => q.Id == 3);
    var imageList = temp.Paragraphs.Select(q => q.Images).ToList();
} 
```

选择所有图像；

```
using(MyContext context = new MyContext())
{
    var allImages = context.Images.ToList();
} 
```

请参阅[此博客](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)文章，其中包含有关 EF Code First 的良好教程。

# symfony - 控制器必须返回响应

> ID：14878057
> 
> 赞同：7
> 
> 时间：2013-02-14T15:18:39.863
> 
> 标签：symfony

我是 Symfony 2 的新手。我尝试了一些非常基本的东西。我刚刚使用命令行创建了一个捆绑包，并将其放入我的控制器中：

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\BrowserKit\Response;

class DefaultController extends Controller
{
    public function indexAction($name)
    {
        return new Response('<html><body>Hello '.$name.'!</body></html>');
    }
} 
```

我有一个带有“控制器必须返回响应”的逻辑异常

这不是我在这里做的吗？

感谢你

PS：我在应用程序中添加了 routing.yml

```
acme_hello:
   resource: "@AcmeHelloBundle/Resources/config/routing.yml"
   prefix:   / 
```

资源中的 routing.yml

```
acme_hello_homepage:
   pattern:  /hello/{name}
   defaults: { _controller: AcmeHelloBundle:Default:index } 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-14T15:32:37.030

控制器必须返回一个`Symfony\Component\HttpFoundation\Response`实例，所以你应该有：

```
use Symfony\Component\HttpFoundation\Response; 
```

代替

```
use Symfony\Component\BrowserKit\Response; 
```

# c# - 插槽分配算法

> ID：14878058
> 
> 赞同：2
> 
> 时间：2013-02-14T15:18:49.247
> 
> 标签：c#, algorithm

有没有我可以用来解决以下问题的通用算法：

鉴于：

背景：一个月，有 0 到 1000 个事件（实际上是任何数字）。每个事件都有开始和结束日期。活动在房间内举行，一次一个（没有重叠，但是允许后续活动彼此共享结束和开始日期）。房间数量不受限制。

挑战：为活动分配房间，使举办每月活动所需的房间数量保持在最低限度。

虽然高度赞赏完整的解决方案，但我正在寻找任何方向，聪明的想法。

* * *

```
class Event: 
- int Id;
- DateTime StartDate; 
- DateTime EndDate

class Allocation:
- int EventId
- int RoomId 
```

所以我正在寻找：

```
// roomIds is Enumerable.Range(1, int.MaxValue)
IEnumerable<Allocation> GetAllocations(IEnumerable<Event> events, IEnumerable<int> roomIds, int year, int month)
{
  ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:25:14.953

将每个事件拆分为两个标记为“开始”和“结束”的时间点（保持指向原始事件的反向指针），按时间对所有点进行排序 - 打破平局，使“结束”同时出现在“开始”之前。

现在检查点（按照上面定义的顺序），在每个“开始”上分配第一个空闲号码，并在每个“结束”上释放相关号码。

例子：

活动：9AM-5PM、9AM-2PM、5PM-6PM、3PM-6PM

时间点排序表：

(9AM 开始事件1), (9AM 开始事件2), (2PM 结束事件2), (3PM 开始事件4), (5PM 结束事件1), (5PM 开始事件3), (6PM 结束事件3), (6PM 结束事件4)

加工：

```
(9AM start event1) - assign room 1 to event1
(9AM start event2) - assign room 2 to event2
(2PM end event2) - free room 2
(3PM start event4) - assign room 2 to event4
(5PM end event1) - free room 1
(5PM start event3) - assign room 1 to event3
(6PM end event3) - free room 1
(6PM end event4) - free room 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:56:18.690

这几乎是我在本科期间学习的算法课的逐字记录。基于最早开始时间和最短持续时间分配房间的贪心算法是最优的。这种最优性的证明留作练习，以防止教授不及格读者。:)

# redmine - Redmine API - 创建问题

> ID：14878064
> 
> 赞同：1
> 
> 时间：2013-02-14T15:19:21.387
> 
> 标签：redmine, redmine-api

我正在尝试使用 Redmine 的 API 来创建问题，但它似乎并没有让我指定谁在提交票证。我已经尝试过`author_id`，但它似乎不起作用。

这是 POST 中的 JSON 数据的样子：

```
 {
        "issue": {
            "author_id": 3,
            "project_id": 26,
            "subject": "Q-12345678",
            "description": "This is a test"
        }
    } 
```

正在创建问题，但作者被设置为匿名。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:54:42.683

嗯，我想通了。事实证明，`author_id`它没有设置为“安全参数”。

我打开`app/models/issue.rb`并`author_id`在第 337 行添加。

所以现在这段代码看起来像这样：

```
 safe_attributes 'tracker_id',
      'status_id',
      'category_id',
      'author_id',
      'assigned_to_id',
      'priority_id',
      'fixed_version_id',
      'subject',
      'description',
      'start_date',
      'due_date',
      'done_ratio',
      'estimated_hours',
      'custom_field_values',
      'custom_fields',
      'lock_version',
      'notes',
      :if => lambda {|issue, user| issue.new_record? || user.allowed_to?(:edit_issues, issue.project) } 
```

**编辑**

我认为这可能是`app/models/issue.rb`（第 375 行）中的更好解决方案

后

```
 safe_attributes 'parent_issue_id',
        :if => lambda {|issue, user| (issue.new_record? || user.allowed_to?(:edit_issues, issue.project)) &&
          user.allowed_to?(:manage_subtasks, issue.project)} 
```

我添加了

```
 safe_attributes 'author_id',
        :if => lambda {|issue, user| issue.new_record? || user.allowed_to?(:admin, issue.project)} 
```

# android - 我丢失了我的 android 密钥库

> ID：14878069
> 
> 赞同：-1
> 
> 时间：2013-02-14T15:19:30.340
> 
> 标签：android, android-keystore

我没有正确创建密钥，他现在在哪里？

我创建了密钥，我在其中创建了应用程序

![在此处输入图像描述](../Images/831456e9f4bee3fe7c82cfac8cb4232f.png)

**钥匙现在在哪里？** （只有一个文件LM.apk，但他没有key）

![在此处输入图像描述](../Images/1cbb521682bfa68c0448edf913137303.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:45:45.607

您误解了密钥库：

*   密钥库是一个识别您的文件（以保护您的发布），不要将其命名为 *.apk，它不是您的应用程序构建
*   您可以在您的密钥库中存储任意数量的密钥，一个用于您要签名的每个应用程序

因此，您只需通过提供别名和密码在您的密钥库上创建第一个密钥

然后，您将拥有 1 个用于打开密钥库的密码和一个用于使用所需密钥（别名）进行签名的密码

# jboss - JBoss AS 7.1.1 Final - 访问部署在 JBoss AS 6 中的 EJB

> ID：14878073
> 
> 赞同：1
> 
> 时间：2013-02-14T15:19:41.183
> 
> 标签：jboss, ejb, jboss7.x, jboss6.x

我需要访问部署在 JBoss AS 6 中的 EJB，但我使用的是 JBoss AS 7.1.1 Final，它放弃了 JNP 查找。

是否可以这样做，或者我需要降级到 JBoss AS 6（升级其他服务器是不可能的）？

我已经挖掘了 AS 7 论坛和 SO，但没有找到任何参考资料。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:04:22.203

一般来说，两个不同服务器之间的 EJB 远程通信永远不会起作用。

JBoss 以完全不关注兼容性而著称。即使是版本上的微小差异（例如次要的安全更新）也足以破坏兼容性。我知道 JBoss AS 5 和 6 之间的 EJB 远程处理不起作用，而且我很确定它在 6 和 7 之间不起作用。

问题的根源在于 Java EE 从未指定应该如何进行远程 bean 发现以及对客户端的具体要求是什么（一个例外是应用程序客户端容器，它只在 Java SE 中工作，并且非常神秘，几乎没有人使用它）。

大多数供应商使用某种客户端 jar，在 Jboss 的情况下它几乎是整个服务器。因为它几乎是整个服务器，所以您不能将它包含在另一台服务器中，因为数百甚至数千个类都会发生冲突。

一位 Jboss 员工曾经开始使用隔离类加载器进行实验，该类加载器将加载与主服务器隔离的这些客户端库，但据我所知，没有人能做到这一点。

# apache2 - 表达式在 apache 2.4 中是如何工作的？

> ID：14878076
> 
> 赞同：6
> 
> 时间：2013-02-14T15:19:47.293
> 
> 标签：apache2, expression, ssi

将服务器从 2.2 升级到 2.4 后，Server Side Include 中的某些表达式不再起作用，出现一系列错误：

> AH01337：无法解析 /var/www/err/ft.html.var 中的 expr“$SERVER_NAME = abc”：“$”附近的解析错误
> AH01337：无法解析 /var/www/err 中的 expr“！$REDIRECT_STATUS” /tp.html: '$' 附近的解析错误
> AH01337: 无法解析 /var 中的 expr "$HTTP_HOST = /^([az]{2}\.)abc\.com/ && $SERVER_NAME = abc\.com" /www/err/tp.html: '$' 附近的解析错误

我知道这是由于一些[持续的努力](http://httpd.apache.org/docs/2.4/expr.html)只为所有配置指令使用一个名为*ap_expr的变体。*但是，在阅读了文档之后，我仍然不知道如何转换我的一些旧代码以反映这种变化：

```
<!--#if expr="! $REDIRECT_STATUS" -->
<!--#set var="REDIRECT_STATUS" value="404" -->
<!--#endif -->
<!--#if expr="$HTTP_HOST = /^([a-z]{2}\.)abc\.com/ && $SERVER_NAME = abc\.com" -->
<!--#set var="subdomain" value="$1" -->
<!--#else -->
<!--#set var="subdomain" value="" -->
<!--#endif --> 
```

如果有人能指出如何改变上述内容以让我开始，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-02T14:01:22.030

我希望如果您对新语法感兴趣，您最终会得到这样的结果：

```
<!--#if expr="-z %{REDIRECT_STATUS}" -->
<!--#set var="REDIRECT_STATUS" value="404" -->
<!--#endif -->
<!--#if expr="v('HTTP_HOST') =~ /^([a-z]{2}[.])abc[.]com/
           && v('SERVER_NAME') == 'abc.com'" -->
<!--#set var="subdomain" value="$1" -->
<!--#else -->
<!--#set var="subdomain" value="" -->
<!--#endif --> 
```

我不确定 1 美元，因为我在昨晚刚刚转换的内容中没有这样的用途（一些人认为它可能只能在捕获它的*同一个*expr 中使用）。我发现正则表达式没有按预期工作的一些问题，例如，像这样的表达式来确定我正在查看的内容相当于当前目录还是子文档有效。最后一行确实匹配以“/”结尾的 URI，但我花了几个小时才发现 %{REQUEST_URI} 不起作用，只有 v('REQUEST_URI') 形式（不知何故我希望找到相反的真实为了某件事）。

```
<!--#if expr="((v('REQUEST_URI') =~ m_/index.shtml_)
            || (v('REQUEST_URI') =~ m_/index.html_)
            || (v('REQUEST_URI') =~ m_/index.cgi_)
            || (v('REQUEST_URI') =~ m_/$_))" --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:30:48.203

警告

我确实尝试过激活指令：

> SSILegacyExprParser on

（如上面评论中所述）

但是这也杀死了我的 SSIStartTag 配置..

**没有更好的 {{echo var='var1'}}**

请注意，如果 OLD 注释语法出现在属性中，XHTML 编辑器会阻塞 >:-(

# java - Android GoogleMaps V2 MarkerDemo IllegalStateException 无包含点

> ID：14878077
> 
> 赞同：4
> 
> 时间：2013-02-14T15:19:49.797
> 
> 标签：java, android, google-maps-android-api-2, android-sdk-2.3, illegalstateexception

我正在创建为 GoogleMaps V2 提供的 MarkerDemo 的自定义实现。我有一个奇怪的错误，我将 LatLng 值提供给 LatLngBounds.Builder 实例，然后将其作为带有 .build 的变量传递。当我通过 Eclipse 在调试模式下运行应用程序时，地图会加载。当我通过 Eclipse 正常运行它时，会抛出一个 IllegalStateException，其中包含“无包含点”作为消息。任何人都可以帮忙吗？

这是一些帮助的代码。

```
public class MyActivity extends android.support.v4.app.FragmentActivity
        implements OnMarkerClickListener, OnInfoWindowClickListener,
        OnMarkerDragListener {

    private HashMap<DataItem, ArrayList<DataItem>> mUserLocations = new
             HashMap<DataItem, ArrayList<DataItem>>();
    private ArrayList<DataItem> mFeedData;
    private NetworkingHandler mHandler = new NetworkingHandler("tag");
    private GoogleMap mMap;
    private final String DOWNLOAD_USER_LOCATIONS_URL =
               "http://www.myfeedurllocation.com/page.php";

    @Override
    public void onCreate(Bundle savedBundleInstance) {
        super.onCreate(savedBundleInstance);
        setContentView(R.layout.activity_myactivitylayout);
        downloadUserLocations();
        setUpMapIfNeeded();
    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the
        // map.
        if (mMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            mMap = ((SupportMapFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.map)).getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private void setUpMap() {
        // Hide the zoom controls as the button panel will cover it.
        mMap.getUiSettings().setZoomControlsEnabled(false);
        mMap.getUiSettings().setRotateGesturesEnabled(true);
        mMap.getUiSettings().setCompassEnabled(true);
        // Add lots of markers to the map.
        addMarkersToMap();
        // Setting an info window adapter allows us to change the both the
        // contents and look of the
        // info window.
        mMap.setInfoWindowAdapter(new CustomInfoWindowAdapter());
        // Set listeners for marker events. See the bottom of this class for
        // their behavior.
        mMap.setOnMarkerClickListener(this);
        mMap.setOnInfoWindowClickListener(this);
        mMap.setOnMarkerDragListener(this);
        // Pan to see all markers in view.
        // Cannot zoom to bounds until the map has a size.
        final View mapView = getSupportFragmentManager().findFragmentById(
            R.id.map).getView();
        if (mapView.getViewTreeObserver().isAlive()) {
            mapView.getViewTreeObserver().addOnGlobalLayoutListener(
                new OnGlobalLayoutListener() {

                    @SuppressLint("NewApi")
                    // We check which build version we are using.
                    @Override
                    public void onGlobalLayout() {
                        LatLngBounds.Builder bounds = new LatLngBounds.Builder();
                        for (DataItem location : mUserLocations.keySet()) {
                            bounds.include(new LatLng(
                                    Double.parseDouble(location.mData
                                            .get("latitude")), Double
                                            .parseDouble(location.mData
                                                    .get("longitude"))));
                        }
                        mapView.getViewTreeObserver()
                                .removeGlobalOnLayoutListener(this);
                        mMap.moveCamera(CameraUpdateFactory.newLatLngBounds(
                            bounds.build(), 80));
                    }
                });
        }
    }

    private void addMarkersToMap() {
        for (DataItem location : mUserLocations.keySet()) {
            StringBuilder stringBuilder = new StringBuilder();
            for (DataItem user : mUserLocations.get(location)) {
                stringBuilder.append("\n" + user.mData.get("textToAdd"));
            }
            mMap.addMarker(new MarkerOptions()
                    .position(
                        new LatLng(Double.parseDouble(location.mData
                                .get("latitude")), Double
                                .parseDouble(location.mData.get("longitude"))))
                    .title(location.mData.get("textToAdd"))
                    .snippet(stringBuilder.toString())
                    .icon(
                        BitmapDescriptorFactory
                                .defaultMarker(BitmapDescriptorFactory.HUE_RED)));
        }
    }

    private void downloadUserLocations() {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                try {
                    mFeedData = mHandler
                            .returnDataArrayList(DOWNLOAD_USER_LOCATIONS_URL);
                    for (DataItem item : mFeedData) {
                        // create location
                        DataItem location = new DataItem();
                        location.mTags.add("locationText1");
                        location.mTags.add("latitude");
                        location.mTags.add("longitude");
                        location.mData.put("locationText1",
                            item.mData.get("locationText1"));
                        location.mData.put("latitude",
                            item.mData.get("latitude"));
                        location.mData.put("longitude",
                            item.mData.get("longitude"));
                        // create user
                        DataItem user = new DataItem();
                        user.mTags.add("userText1");
                        user.mTags.add("userText2");
                        user.mData
                                .put("userText1", item.mData.get("userText1"));
                        user.mData
                                .put("userText2", item.mData.get("userText2"));
                        if (mUserLocations.keySet().contains(location)) {
                            mUserLocations.get(location).add(user);
                        } else {
                            mUserLocations.put(location,
                                new ArrayList<DataItem>());
                            mUserLocations.get(location).add(user);
                        }
                    }
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                } catch (ParserConfigurationException e) {
                    e.printStackTrace();
                } catch (SAXException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        };
        new Thread(r).start();
    }

    @Override
    public void onMarkerDrag(Marker arg0) {}

    @Override
    public void onMarkerDragEnd(Marker arg0) {}

    @Override
    public void onMarkerDragStart(Marker arg0) {}

    @Override
    public void onInfoWindowClick(Marker arg0) {}

    @Override
    public boolean onMarkerClick(Marker arg0) {
        return false;
    }

    class CustomInfoWindowAdapter implements InfoWindowAdapter {

        private final RadioGroup mOptions;
        // These a both viewgroups containing an ImageView with id "badge" and
        // two TextViews with id
        // "title" and "snippet".
        private final View mWindow;
        private final View mContents;

        CustomInfoWindowAdapter() {
            mWindow = getLayoutInflater().inflate(R.layout.custom_info_window,
                null);
            mContents = getLayoutInflater().inflate(
                R.layout.custom_info_contents, null);
            mOptions = (RadioGroup) findViewById(R.id.custom_info_window_options);
        }

        @Override
        public View getInfoWindow(Marker marker) {
            if (mOptions.getCheckedRadioButtonId() != R.id.custom_info_window) {
                // This means that getInfoContents will be called.
                return null;
            }
            render(marker, mWindow);
            return mWindow;
        }

        @Override
        public View getInfoContents(Marker marker) {
            if (mOptions.getCheckedRadioButtonId() != R.id.custom_info_contents) {
                // This means that the default info contents will be used.
                return null;
            }
            render(marker, mContents);
            return mContents;
        }

        private void render(Marker marker, View view) {
            int badge = R.drawable.map_pin;
            // Use the equals() method on a Marker to check for equals. Do not
            // use ==.
            ((ImageView) view.findViewById(R.id.badge)).setImageResource(badge);
            String title = marker.getTitle();
            TextView titleUi = ((TextView) view.findViewById(R.id.title));
            if (title != null) {
                // Spannable string allows us to edit the formatting of the
                // text.
                SpannableString titleText = new SpannableString(title);
                titleText.setSpan(new ForegroundColorSpan(Color.RED), 0,
                    titleText.length(), 0);
                titleUi.setText(titleText);
            } else {
                titleUi.setText("");
            }
            String snippet = marker.getSnippet();
            TextView snippetUi = ((TextView) view.findViewById(R.id.snippet));
            if (snippet != null) {
                SpannableString snippetText = new SpannableString(snippet);
                snippetText.setSpan(new ForegroundColorSpan(Color.MAGENTA), 0,
                    10, 0);
                snippetText.setSpan(new ForegroundColorSpan(Color.BLUE), 12,
                    21, 0);
                snippetUi.setText(snippetText);
            } else {
                snippetUi.setText("");
            }
        }
    }
} 
```

这是我的堆栈跟踪。

```
02-14 15:23:50.219: E/AndroidRuntime(8952): FATAL EXCEPTION: main
02-14 15:23:50.219: E/AndroidRuntime(8952): java.lang.IllegalStateException: no included points
02-14 15:23:50.219: E/AndroidRuntime(8952):     at com.google.android.gms.internal.at.a(Unknown Source)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at com.google.android.gms.maps.model.LatLngBounds$Builder.build(Unknown Source)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at com.mypackage.MyActivity$1.onGlobalLayout(MyActivity.java:109)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.view.ViewTreeObserver.dispatchOnGlobalLayout(ViewTreeObserver.java:682)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1850)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1112)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4472)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.view.Choreographer.doFrame(Choreographer.java:525)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.os.Handler.handleCallback(Handler.java:615)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.os.Looper.loop(Looper.java:137)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at android.app.ActivityThread.main(ActivityThread.java:4898)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at java.lang.reflect.Method.invokeNative(Native Method)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at java.lang.reflect.Method.invoke(Method.java:511)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
02-14 15:23:50.219: E/AndroidRuntime(8952):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:44:08.030

不要打扰建造者就行了。

```
LatLngBounds mapBounds;
for (DataItem location : mUserLocations.keySet()) {
    if (mapBounds==null) {
        LatLng point = new LatLng(Double.parseDouble(location.mData.get("latitude")), Double.parseDouble(location.mData.get("longitude")))
        mapBounds =new LatLngBounds(point, point);
    } else {
        mapBounds = mapBounds.including(new LatLng(Double.parseDouble(location.mData.get("latitude")), Double.parseDouble(location.mData.get("longitude"))));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T10:11:54.613

我犯了同样的错误。

在 Api 中是这样解释的：

> public LatLngBounds (LatLng south, LatLng Southeast)：如果东北角的纬度低于西南角的纬度，则 IllegalArgumentException。

使用以下代码，当计算边界的列表为空时会启动异常：

```
LatLngBounds.Builder builder = LatLngBounds.builder();
for(ModelLatLngDisplay p: list){
    builder = builder.include(p.latLng);
}
return builder.build(); 
```

# ruby - 嵌入式 MongoDB 实例？

> ID：14878078
> 
> 赞同：0
> 
> 时间：2013-02-14T15:19:52.523
> 
> 标签：ruby, mongodb, nosql

我一直在使用 MongoDB 作为我正在构建的一个小工具，但是我有两个问题我不知道我是否可以“解决”。这些问题主要与必须启动 MongoDB 服务器（mongod）有关。

第一个是每次我想使用它时我都必须运行两个命令（mongod 和我的应用程序的命令），另一个是测试。目前，我将不同的集合用于“生产”和“测试”，但最好只有一个嵌入式/自包含实例，我可以随时启动和删除它。

那可能吗？或者我应该只使用其他东西，比如 SQLite 吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-24T11:09:21.587

另一个类似的项目是[https://github.com/Softmotions/ejdb](https://github.com/Softmotions/ejdb)。查询语法类似于 mongodb。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T04:48:09.777

我们在工作中使用它 - [https://github.com/flapdoodle-oss/embedmongo.flapdoodle.de](https://github.com/flapdoodle-oss/embedmongo.flapdoodle.de) - 启动嵌入式 Mongo 进行集成测试。工作得非常好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-24T10:10:27.573

我没有尝试过，但我刚刚发现了嵌入式 MongoDB 的这个 Ruby 实现：[https ://github.com/gdb/embedded-mongo](https://github.com/gdb/embedded-mongo)

# c++ - Using WinAPI to control monitors

> ID：14878081
> 
> 赞同：2
> 
> 时间：2013-02-14T15:19:55.360
> 
> 标签：c++, windows, visual-studio-2010, winapi

I currently have a command line program that sends various commands through my graphics card driver's API, but the driver isn't bugfree. What I'd like is to use the Windows API to enable/disable certain connected monitors, except I have no experience with Windows programming.

I've checked out the list of Windows APIs and don't really know where to look for this functionality, so if someone could help me out here that'd be fantastic.

Note: I'm using VS2010, coding in C++.

# c++ - 使用 c++ 程序扫描参数并确定它们是什么

> ID：14878091
> 
> 赞同：0
> 
> 时间：2013-02-14T15:20:39.330
> 
> 标签：c++, input

这是一项家庭作业。

我们必须创建一个“在 UNIX/Linux 中称为过滤器的通用应用程序编程模型”。

我一直在阅读作为参数传递的输入（这就是我似乎遇到的所有问题）。

例如打开*cmd*，输入以下行：

```
program -isomebinaryfile.bin 
```

我需要确定连字符 ( `-`) 之后的第一个字母是什么，依此类推。

我`scanf`会用什么？My`main`设置为能够接受参数：

```
int main (int argc, char *argv[])
{
FILE *inf = NULL;
char *arg = argv[0];
} 
```

有人可以给我一点帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:32:39.730

您需要使用[getopt](http://linux.die.net/man/3/getopt)。手册页有一个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:33:26.610

`argv`是一个字符串数组。你可以像循环一样遍历它们

```
for (int i=1; i<argc; i++) { // skip argv[0] as that's this program's name
    const char* arg = argv[i];
} 
```

获得特定参数的字符串后，您可以使用来自的字符串操作函数`<string.h>`

```
if (arg[0] == '-' && strlen(arg) > 0) {
    arg++; // advance past the leading '-'
    if (strcmp(arg, "command_one") == 0) {
        // handle command_one
    }
    else if (strcmp(arg, "command_one") == 0) {
        ....
    else {
        printf("Error: unexpected command %s\n", arg);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:41:08.700

除非您的任务只是处理参数的处理，否则您可能需要查找`getopt`- 它是参数的标准库解析器。

至于您的问题的实质，有很多选择，您可以将`sscanf`其用作其中的一部分，但您不必这样做。

要解析您提到的一个参数，您需要执行以下操作：检查参数是否以 -i 开头，从参数中获取数据。

检查参数是否以 -i 开头的最简单方法是：

```
if (argv[1][0] == '-' && argv[1][1] == 'i') 
```

或者，如果你有很多参数选项，都以'-'开头，你可能想要这样的东西：

```
char * i = NULL;
char * o = NULL;
char * s = NULL;
for (int i = 1; i < argc; ++i) {
    if (argv[i][0] == '-') {
        switch(argv[i][1]) {
            case 'i':
                i = argv[i][2];
                break;
            case 's':
                s = argv[i][2];
                break;
            case 'o':
                o = argv[i][2];
                break;
            default:
                cerr << "Unknown option: " << argv[i][1];
        }
     } else {
        cerr << "Error: all options must begin with '-'";
     } 
```

请注意，我使用的是 argv[ **1** ]，而不是 0。argv[0] 始终是可执行文件的名称。

提取其余参数的最快方法是简单的指针运算：

```
char * filename = argv[1] + 2;  // (Or you could equivalently say = &argv[1][2] 
```

这是最有效的——它重用了 argv 中已经存在的字符串。如果您打算更改字符串，最好使用 strcpy：

```
char * filename = (char *)malloc(strlen(argv[1]) - 2);
strcpy(filename, argv1 + 2);
// and eventually you'd have to free(filename)... 
```

玩转所有字符串函数并进行试验。您会发现它们对您以后的所有程序都是必不可少的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:32:33.290

从`argv`（“参数向量”）获取参数。在您的示例中，`argc`将`argv`如下所示：

```
argc == 2
argv[0] == "cmd"
argv[1] == "-isomebinaryfile.bin" 
```

查找连字符后的第一个字母`argv[1]`是一个简单的循环。

# c# - How to handle invalid characters in OleDb Excel import?

> ID：14878092
> 
> 赞同：2
> 
> 时间：2013-02-14T15:20:43.417
> 
> 标签：c#, excel, oledb

I am importing excel files to my application and sometimes worksheets column names have "$" sign in it. I receive this Exception:

```
System.Data.OleDb.OleDbException was unhandled
Message=''6um$'$' is not a valid name. Make sure that it does not include invalid characters or punctuation and that it is not too long. 
```

In this sheet "6um$" is a column name.

This is my code:

```
OleDbConnection con = new System.Data.OleDb.OleDbConnection(connectionString);
OleDbDataAdapter cmd = new System.Data.OleDb.OleDbDataAdapter(
    "select * from [" + worksheetName + "$]", con);

con.Open();
System.Data.DataSet excelDataSet = new DataSet();
cmd.Fill(excelDataSet);
con.Close(); 
```

Any ideas how to handle this situation?

**Edit:**

I thought the problem was having $ in column name. But turns out, The problem is having $ sign in worksheet name!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:05:04.793

好的，我找到了解决方案：由于某种原因，我重命名的工作表有额外的 $ 符号（不知道为什么，excel 中没有 $ 符号，但 OLEDB 用额外的 $ 返回它们，例如 '6um$'$ '）。我修剪第一个 $ 并使用此代码检查是否还有任何额外的 $ 符号：

```
char delimiterChars = '$';
string[] words = worksheetName.Split(delimiterChars);
worksheetName=words[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T14:10:20.020

```
if (Directory.Exists(serverPath))
{
    string FileExist = sp + "book1.xlsx"; ;
    string Exten = Path.GetExtension(FileExist);
    string g = "sheet1";              

    if (File.Exists(FileExist))
    {
        if (Exten == ".xlsx")
        {
            string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + FileExist + ";Extended Properties=Excel 12.0";

            OleDbConnection oledbConn = new OleDbConnection(connString);
            try
            {
                // Open connection
                oledbConn.Open();
                string query = String.Format("select * from [{0}$]", g);

                // Create OleDbCommand object and select data from worksheet Sheet1
                OleDbCommand cmd = new OleDbCommand(query, oledbConn);

                // Create new OleDbDataAdapter 
                OleDbDataAdapter oleda = new OleDbDataAdapter();

                oleda.SelectCommand = cmd;

                // Create a DataSet which will hold the data extracted from the worksheet.
                DataSet ds = new DataSet();

                // Fill the DataSet from the data extracted from the worksheet.
                oleda.Fill(ds, "sheetdt");                            

                GridView1.DataSource = ds.Tables[0].DefaultView;
                GridView1.DataBind();
            }
            catch (Exception ex)
            {
                LblSuccess.Text = ex.Message;
            }
            finally
            {
                // Close connection
                oledbConn.Close();
            }
        }
    }
} 
```

# facebook - Using single access token to get the 'likes' of other users

> ID：14878093
> 
> 赞同：-1
> 
> 时间：2013-02-14T15:20:44.340
> 
> 标签：facebook, facebook-graph-api, facebook-fql

Using the normal Facebook website, one can get to a page showing which pages a user has 'liked'.

From the graph API, it is possible to get this for pretty much all pages, using graph.facebook.com/userid/likes?access_token=MYACCESSTOKEN.

However, I need to be able to do the same - i.e. get the list of pages a user has 'liked' for normal Facebook users (and not 'pages' who have 'liked' other pages).

Is this possible with the single access token? Judging by the fact you can get this info from the normal Facebook web page, I would expect it to be possible.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:25:17.417

对于访问 API 的应用程序和访问实际站点的用户，隐私的工作方式略有不同。

应用程序无权访问（默认情况下）您朋友的点赞，以防止数据挖掘。为了获得用户朋友的喜欢，您需要请求`friends_likes`权限。

[您可以在文档](https://developers.facebook.com/docs/reference/login/extended-profile-properties/)中阅读有关此权限和其他权限的信息。

# laravel - Laravel 4：如何更新 Eloquent 模型中的多个字段？

> ID：14878095
> 
> 赞同：29
> 
> 时间：2013-02-14T15:20:49.750
> 
> 标签：laravel, laravel-4

如何更新 Eloquent 模型中的多个字段？假设我是这样的：

```
$user = User::where("username", "=", "rok"); 
```

然后我有所有这些模型参数：

```
$new_user_data = array("email" => "rok@rok.com", "is_superuser" => 1, ...); 
```

我不能这样做：

```
$user->update($new_user_data); 
```

什么是正确的方法？我希望不是一个`foreach`.

但是，以下确实有效。这是要走的路吗？

```
User::where("id", "=", $user->id)->update($new_user_data); 
```

最后一个的问题（除了笨拙之外）是当从对象上下文中使用它时，更新的字段在`$this`变量中不可见。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-14T20:06:28.580

您正在寻找的方法是`fill()`：

```
$user = User::where ("username","rok"); // note that this shortcut is available if the comparison is =
$new_user_data = array(...);
$user->fill($new_user_data);
$user->save(); 
```

实际上，您可以这样做，`$user->fill($new_user_data)->save();`但我发现单独的语句更易于阅读和调试。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-15T08:49:13.317

你正在寻找这个：

```
$user = User::where("username","rok")
                ->update( 
                       array( 
                             "email" => "rok@rok.com",
                             "is_superuser" => 1,
                             // ..
                             )
                       ); 
```

参考： http: [//laravel.com/docs/4.2/eloquent#insert-update-delete](http://laravel.com/docs/4.2/eloquent#insert-update-delete)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-16T06:33:23.510

我应该建议使用较短的代码，例如

```
 $new_user_data=array('a'=>'n','b'=>'m');
    $user=User::whereUsername('rok');//camelCase replaces "=" sign
    $user->fill($new_user_data)->save(); 
```

甚至更短

```
 $new_user_data=array('a'=>'n','b'=>'m');
    User::whereUsername('rok')->update($new_user_data);//camelCase replaces "=" sign 
```

我相信最后一条语句更容易调试并且看起来更好。
警告：如果您的表包含许多名为“rok”的用户，则上述两个语句都会立即更新所有这些寄存器。您应该始终使用 id 字段值更新寄存器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-24T21:23:14.050

试试这个，

```
// took required data out of the request
$postData = request(
    [
        'firstName',
        'lastName',
        'address1',
        'address2',
        'address3',
        'postcode',
        'phone',
        'imageURL',
    ]
);
// persisted it to the database
DB::table('users')
    ->where('id', auth()->user()->id)
); 
```

# javascript - 在哪里防止默认行为

> ID：14878096
> 
> 赞同：0
> 
> 时间：2013-02-14T15:20:48.820
> 
> 标签：javascript, events

在 javascript 中执行用户交互后的代码时，即单击链接

最好`event.preventDefault()`在尝试运行您的 javascript 代码之前或之后阻止默认行为 ( )？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:23:44.137

当你知道你想做的时候就去做。

在函数的其他部分运行之前，您可能不知道这一点——在*提交*时验证表单输入会希望在验证失败时阻止默认操作，但如果验证通过则不会阻止默认操作——所以你当然不能总是在功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:24:19.313

我总是做这样的事情：

```
$("#selector").bind("click", function(e){  
  e.preventDefault();
  //DO THE REST OF THE THINGS
}); 
```

主要是为了防止任何意外冒泡并立即清楚我的脚本发生了什么。

# c# - 格式化逻辑在哪里属于 MVC？

> ID：14878099
> 
> 赞同：8
> 
> 时间：2013-02-14T15:21:00.087
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, language-agnostic

假设我的电话号码作为 10 位字符串存储在数据库中：

> 0000000000

我想在将此电话号码呈现给用户时将其格式化为：

> (000) 000-0000

我在处理这种格式的实用程序程序集中有一个扩展方法：

```
static string ToPhoneNumber(this string value)
{
    return Regex.Replace(value, @"(\d{3})(\d{3})(\d{4})", "($1) $2-$3");
} 
```

**我的问题是，我在什么时候应用这种转换？**

1）在视图中：

```
@Model.PhoneNumber.ToPhoneNumber() 
```

2）在视图模型中：

```
public string FormattedPhoneNumber
{
    get
    {
        return this.PhoneNumber.ToPhoneNumber()
    }
} 
```

3）在控制器中：

```
userModel.FormattedPhoneNumber = userModel.PhoneNumber.ToPhoneNumber() 
```

4）在域模型中（与#2相同的实现）

5）在服务中（与#3相同的实现）

此外，答案是否取决于它是全局格式化需求（如电话号码）还是单个视图上的孤立一次性格式化？

我会给出我的想法，但不想影响任何答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:37:22.317

我个人喜欢将东西保留在我的 ViewModel 中，因为如果你不这样做，你最终会得到看起来很奇怪的代码。让我们举个例子。

剃刀视图：

```
@using MyNamespace.Models.Extensions
@model MyNamespace.Models.ViewModels.IndexViewModel

@if (string.IsNullOrWhiteSpace(Model.PhoneNumber) {
   <div> @Model.PhoneNumber.ToPhoneNumber() </div>  
} 
```

与替代方案相比：

剃刀视图：

```
@model MyNamespace.Models.ViewModels.IndexViewModel

@Model.FormattedPhoneNumber 
```

视图模型：

```
 public string FormattedPhoneNumber {
     get {
         return PhoneNumber.IsEmpty()
         ? "Not Available"
         : PhoneNumber.ToPhoneNumber();
     }
 } 
```

你绝对可以改进我的代码，但关键是它可以让你的视图更简单，以免被分支逻辑弄得一团糟。

此外，我从未声称自己是圣人，所以我并不总是遵循自己的建议，但我应该这样做。照我说的做，不要照我做的：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T15:25:13.943

我认为决定如何显示数据是视图的责任。因为只有视图知道可用于呈现的内容。另一方面，在控制器中可能更容易做到这一点。控制器会知道用户的语言环境。总的来说，我认为这没什么区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T15:58:28.817

首先，对于一般的架构模式，尤其是那些处理“关注点分离”的架构模式，最终的仲裁者始终是“我的场景中最好的方法是什么” - 我坚信教条地遵守一组规则而不考虑你的自己的计划和需求是一种可怕的做法。更不用说这里没有明确的共识：根据您的 XYZ 类型（MVC、MVP、MVVM），您会发现对互联网上所有内容的反对意见。

也就是说，我对这个问题的快速回答是“使用你的判断力”。

“在视图中”的论据：

*   它处理演示，因此它是视图的责任

“在视图模型中”的参数：

*   通常，视图模型的作用是提供模型的“准备数据绑定”表示 - 因此，将模型数据转换为视图可直接使用的形式是视图模型的责任

模型参数：

*   这可能是模型数据的一种过于常见的表示；因此，在 DRY 之后，模型将承担此表示的责任

控制器的参数：

*   ...好吧，这里想不出一个合理的。控制器通常对动作做出响应，因此证明它属于这里是一个延伸。

我要说明的一点是，只要您系统**的一个点**接受并承担责任，并且该责任仅由该组件/层/类处理，您就已经完成了主要目标，即防止稀释/重复/低凝聚力。

我个人的意见，fwiw，可能会落在视图或视图模型上。如果这是 WPF，我几乎肯定会说视图（通过可用于 wpf 数据绑定的格式提供程序）。在网络世界中，我可能会倾向于这种观点，尽管存在模型的有力论据 - 假设您现在想通过 REST/JSON/etc 服务公开这些数据：您可以轻松处理此更改（假设您想要返回格式化的数据，即）

TL/DR：这真的取决于；遵循常识并使用您的判断。将所有相关逻辑放在一个地方是重要的部分，并质疑任何教条/命令式的“你应该”陈述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:37:56.210

这取决于您对 ViewModel 的定义，您是否遵循（自创的）*MVCVM* * 方法，除了域模型之外，您还有一个特定于您的视图的 ViewModel？

如果是这样，VM 肯定可以包含格式化逻辑，这就是首先拥有这个 View Model 来为 View 建模*的全部意义。*所以选项2。

也就是说，这背后的原因是，如果你像这样格式化，你自己的格式化将开始遵循 DRY 原则：

```
@Regex.Replace(Model.PhoneNumber, @"(\d{3})(\d{3})(\d{4})", "($1) $2-$3"); 
```

由于您有扩展方法，因此在您的视图中调用格式化程序根本不是什么大问题，但我仍然更喜欢在专用 VM 中执行此操作。

如果您的虚拟机实际上只是包含原始数据的域模型（请参阅[此](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)，模式 1），那么它肯定应该在您的视图中，所以选项 1。请注意，如果您使用此模式，我建议反对它，因为它使您的视图与低级对象强耦合，您最好将其抽象为您需要的内容，以确保域模型 + 视图模型之间的耦合实际上是强的（即在编译时编译，而不是运行时编译！）。

最重要的是 - 这当然**不**应该进入您的域模型。

***模型、视图、控制器、视图模型。ViewModel 包含要在您的视图中使用的数据，以它需要的格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T15:38:10.490

我会把它放在视图模型中而不是视图中。该视图旨在仅将数据/信息呈现给最终用户。保持关注点分离可确保每个对象尽可能独立。如果您将格式化的数字传递给视图，则视图不关心要显示的内容，只需显示格式化的数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T16:19:26.207

我认为这是建模，而不是格式化。如果接收应用程序需要重新格式化这些字段的顺序、间距或大小写，它必须首先将单个字段拆分为几个单独的字段。

这应该是服务层的责任。我们说的是模式，而不是格式。该应用程序要求将字段拆分为其数据合同的一部分。发生这种拆分的位置应该在您的应用程序使用的应用程序服务层中。

服务层应该尝试通过模式将元数据添加到信息中。

例如，如果我从这样的数据合同中收到电话号码：1234567890

演示要求如下：(123) 456 – 7890

服务层应该将电话号码分解为其元素

```
<PhoneNumber>
<CountryCode>1</CountryCode>
<Area>123</Area>
<Prefix>456</Prefix>
<LineNumber>7890</LineNumber>
</PhoneNumber> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-14T15:32:15.880

选项 1 是最好的，其次是 2。在控制器中，您实际上应该删除格式以将其发送到服务层，因此域模型和服务模型都不知道格式。

# formula - Lotus Notes @formula 语言：操作顺序错误？

> ID：14878100
> 
> 赞同：1
> 
> 时间：2013-02-14T15:20:59.913
> 
> 标签：formula, lotus-domino, agent

我用以下两个命令定义了一个动作：

```
@Prompt([...]; "1");
@Command([ToolsRunMacro];"(AGENT)");
@Prompt([...]; "2");
@If(@GetProfileField("PrivateProfile";"LENGTH";@UserName))>0;@PostedCommand([Compose];"FORM");"");
@Prompt([...]; "3"); 
```

但是使用`@Prompt`我发现的命令，首先显示每条`@Prompt`消息（1-3）**，**然后`AGENT`运行。但是当`AGENT`操作该`LENGTH`字段时，该`@IF`语句会比较一个“过时”的值。

也许每个语句都是一次执行的？如果是：如何防止代理出现这种行为？

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:27:03.177

[ToolsRunMacro] 命令将始终在所有 @Functions 首先执行后运行。没有办法改变这一点。

您可以在信息中心文档中获得将立即执行的命令与在最后执行的其他函数之后执行的命令列表。

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_COMMAND.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_COMMAND.html)

您的代码还需要注意的是 Profile 文档已被缓存。因此，您可能不会在所有情况下都立即看到对文档所做的任何更改。

# ruby - How do I display database data in table format?

> ID：14878107
> 
> 赞同：0
> 
> 时间：2013-02-14T15:21:18.153
> 
> 标签：ruby

I want to display the table in the below format. How can I achieve this?

```
 ---A----+-----B-----+----C-----
   12335   |  abcd     |  qwerty
   45335   |  efgh     |  poiuy
   78956   |  hjukukuk |  mkloijhkll
   12346   |  sfsfsf   |  vbhkhadad 
```

EDIT 1: The contents of the table can be of any length. The width of the particular cell has to be decided by the content itself.

I got the column width from

col_width = a.transpose.map{|col| col.map{|cell| cell.to_s.length}.max}

and displayed the table contents with: a.each{|row| puts '['+ row.zip(col_width).map{|cell, w| cell.to_s.ljust(w)}.join(' | ')+']'}

where 'a' contains the data from the database.

I only cannot get to print the column headers.

How i can achieve those so that it can align with the table cell contents.

I need to display the output in the console. I am using OCI for accessing the database.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T15:20:52.920

我写了一个可以帮助你的gem：http: [//github.com/arches/table_print](http://github.com/arches/table_print)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:39:15.970

[Sequel](http://sequel.rubyforge.org/) ORM 可以使用[pretty_table](http://sequel.rubyforge.org/rdoc-plugins/files/lib/sequel/extensions/pretty_table_rb.html)扩展来做到这一点。否则[HIRB](https://github.com/cldwalker/hirb)可以使用 ActiveRecord 或从数组/哈希中执行此操作。

我经常使用 Sequel，偶尔需要在控制台上显示表格摘要，所以`pretty_table`对我来说效果很好。

HIRB 用于 IRB 的[irbtools](https://github.com/janlelis/irbtools)插件中，并为各种事物提供表输出。

在任何一种情况下，显示的表格宽度都是使用显示的字符串的长度动态确定的，以查找列的宽度。我从来没有尝试过将非常长的字符串推入需要包装在列中的任何一个，但它们应该自动处理它，因为这是一个常见的要求。

# python - 如何使用numpy（和scipy）找到函数的所有零？

> ID：14878110
> 
> 赞同：7
> 
> 时间：2013-02-14T15:21:27.710
> 
> 标签：python, numpy, scipy

假设我在和`f(x)`之间定义了一个函数。这个函数可以有很多零，也可以有很多渐近线。我需要检索此函数的**所有**零。最好的方法是什么？`a``b`

 **实际上，我的策略如下：

1.  我在给定数量的点上评估我的功能
2.  我检测是否有符号变化
3.  我发现正在改变符号的点之间的零
4.  我验证找到的零是否真的是零，或者这是否是渐近线

    ```
    U = numpy.linspace(a, b, 100) # evaluate function at 100 different points
    c = f(U)
    s = numpy.sign(c)
    for i in range(100-1):
        if s[i] + s[i+1] == 0: # oposite signs
            u = scipy.optimize.brentq(f, U[i], U[i+1])
            z = f(u)
            if numpy.isnan(z) or abs(z) > 1e-3:
                continue
            print('found zero at {}'.format(u)) 
    ```

这个算法似乎有效，除了我看到两个潜在的问题：

1.  它不会检测到不穿过 x 轴的零（例如，在类似的函数中`f(x) = x**2`）但是，我认为它不会发生在我正在评估的函数中。
2.  如果离散化点太远，它们之间可能有超过一个零，算法可能无法找到它们。

您是否有更好的策略（仍然有效）来找到函数的所有零点？

* * *

我认为这个问题并不重要，但对于那些好奇的人，我正在处理光纤中波传播的特征方程。该函数看起来像（其中`V`和`ell`是先前定义的，并且`ell`是一个正整数）：

```
def f(u):
    w = numpy.sqrt(V**2 - u**2)

    jl = scipy.special.jn(ell, u)
    jl1 = scipy.special.jnjn(ell-1, u)
    kl = scipy.special.jnkn(ell, w)
    kl1 = scipy.special.jnkn(ell-1, w)

    return jl / (u*jl1) + kl / (w*kl1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:44:06.053

你为什么受限于`numpy`？Scipy 有一个包可以完全满足您的需求：

[http://docs.scipy.org/doc/scipy/reference/optimize.nonlin.html](http://docs.scipy.org/doc/scipy/reference/optimize.nonlin.html)

我学到的一课：数值编程很难，所以不要这样做:)

* * *

无论如何，如果您对自己构建算法一无所知，`scipy`我链接的文档页面（需要永远加载，顺便说一句）为您提供了一个开始使用的算法列表。我之前使用过的一种方法是将函数离散化到您的问题所必需的程度。（也就是说，调整 \delta x 使其远小于问题中的特征大小。）这使您可以查找函数的特征（例如符号的变化）。并且，您可以很容易地计算线段的导数（可能从幼儿园开始），因此您的离散函数具有明确定义的一阶导数。因为您已将 dx 调整为小于特征大小，所以可以保证不会错过对您的问题很重要的函数的任何特征。

如果您想知道“特征大小”的含义，请查找函数的某些参数，其单位为长度或 1/长度。也就是说，对于某个函数 f(x)，假设 x 有长度单位，而 f 没有单位。然后寻找乘以 x 的东西。例如，如果要离散化 cos(\pi x)，则乘以 x 的参数（如果 x 具有长度单位）必须具有 1/长度的单位。所以 cos(\pi x) 的特征大小是 1/\pi。如果你的离散化比这小得多，你就不会有任何问题。可以肯定的是，这个技巧并不总是有效，所以你可能需要做一些修补。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:51:09.610

我看到的主要问题是，如果你真的能找到*所有*的根——正如评论中已经提到的那样，这并不总是可能的。如果你确定你的功能不是完全病态的（`sin(1/x)`已经提到过），下一个是你对丢失一个或几个根的容忍度。换句话说，您准备走多远以确保您没有遗漏任何东西 --- 据我所知，没有通用的方法可以为您隔离所有根源，因此您必须自己做。你所展示的已经是合理的第一步。一些评论：

*   布伦特的方法在这里确实是一个不错的选择。
*   首先，处理分歧。由于在您的函数中分母中有贝塞尔，您可以首先求解*它们的根*——最好在例如 Abramovitch 和 Stegun 中查找它们（[Mathworld 链接](http://mathworld.wolfram.com/BesselFunctionZeros.html)）。这将比使用您正在使用的临时网格更好。
*   你可以做什么，一旦你找到了两个根或分歧，`x_1`然后`x_2`在区间内再次运行搜索`[x_1+epsilon, x_2-epsilon]`。继续直到找不到更多的根（如果有一个根，Brent 的方法可以保证收敛到*一个*根）。
*   如果你不能列举出所有的分歧，你可能需要更小心地验证一个候选人确实是一个分歧：给定`x`不要只检查它`f(x)`是否很大，检查它，例如`|f(x-epsilon/2)| > |f(x-epsilon)|`对于`epsilon` (1e-8, 1e)的几个值-9, 1e-10，类似的东西）。
*   如果要确保没有简单地接触零的根，请查找函数的极值，对于每个极值`x_e`，请检查 的值`f(x_e)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-07T16:17:18.527

[我发现使用scipy.optimize.fsolve](https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fsolve.html)实现自己的根查找器相对容易。

*   想法：通过不断地调用改变来从区间`(start, stop)`和步长中找到任何零。使用相对较小的步长来找到*所有* 的根。`step``fsolve``x0`

**   只能在一个维度上搜索零（其他维度必须是固定的）。如果您有其他需求，我建议使用[sympy](https://www.sympy.org/en/index.html)来计算解析解。

    *   注意：它可能并不*总能*找到*所有*的零，但我看到它给出了相对较好的结果。我也把代码放到了[gist](https://gist.github.com/np-8/88713c0727af473bc8ac990811f0a446)中，如果需要我会更新。* 

 *```
import numpy as np
import scipy
from scipy.optimize import fsolve
from matplotlib import pyplot as plt

# Defined below
r = RootFinder(1, 20, 0.01)
args = (90, 5)
roots = r.find(f, *args)
print("Roots: ", roots)

# plot results
u = np.linspace(1, 20, num=600)
fig, ax = plt.subplots()
ax.plot(u, f(u, *args))
ax.scatter(roots, f(np.array(roots), *args), color="r", s=10)
ax.grid(color="grey", ls="--", lw=0.5)
plt.show() 
```

### 示例输出：

```
Roots:  [ 2.84599497  8.82720551 12.38857782 15.74736542 19.02545276] 
```

[![在此处输入图像描述](../Images/9d247b3a382ca5ea470d9e9654705350.png)](https://i.stack.imgur.com/cw0PH.png)

放大： [![在此处输入图像描述](../Images/05b8b62538154c818ebb809dfa4b079f.png)](https://i.stack.imgur.com/TxaQG.png)

### RootFinder 定义

```
import numpy as np
import scipy
from scipy.optimize import fsolve
from matplotlib import pyplot as plt

class RootFinder:
    def __init__(self, start, stop, step=0.01, root_dtype="float64", xtol=1e-9):

        self.start = start
        self.stop = stop
        self.step = step
        self.xtol = xtol
        self.roots = np.array([], dtype=root_dtype)

    def add_to_roots(self, x):

        if (x < self.start) or (x > self.stop):
            return  # outside range
        if any(abs(self.roots - x) < self.xtol):
            return  # root already found.

        self.roots = np.append(self.roots, x)

    def find(self, f, *args):
        current = self.start

        for x0 in np.arange(self.start, self.stop + self.step, self.step):
            if x0 < current:
                continue
            x = self.find_root(f, x0, *args)
            if x is None:  # no root found.
                continue
            current = x
            self.add_to_roots(x)

        return self.roots

    def find_root(self, f, x0, *args):

        x, _, ier, _ = fsolve(f, x0=x0, args=args, full_output=True, xtol=self.xtol)
        if ier == 1:
            return x[0]
        return None 
```

### 测试功能

`scipy.special.jnjn`不再存在，但我为案例创建了类似的测试功能。

```
def f(u, V=90, ell=5):
    w = np.sqrt(V ** 2 - u ** 2)

    jl = scipy.special.jn(ell, u)
    jl1 = scipy.special.yn(ell - 1, u)
    kl = scipy.special.kn(ell, w)
    kl1 = scipy.special.kn(ell - 1, w)

    return jl / (u * jl1) + kl / (w * kl1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-09T14:29:53.763

我也遇到过这个问题来解决像 f(z)=0 这样的方程，其中 f 是一个全纯函数。我想确保不会错过任何零，最后开发了一种基于[论证原理](https://en.wikipedia.org/wiki/Argument_principle)的算法。

它有助于找到复杂域中零的确切数量。一旦知道零的数量，就更容易找到它们。然而，有两个问题必须考虑：

*   注意多重性：当求解 (z-1)^2 = 0 时，你会得到两个零，因为 z=1 计数两次
*   如果函数是亚纯函数（因此包含极点），则每个极点会减少零的数量并中断对它们进行计数的尝试。***

# jquery - 检查以编程方式或通过鼠标单击触发的 html 元素的单击事件

> ID：14878113
> 
> 赞同：0
> 
> 时间：2013-02-14T15:21:36.100
> 
> 标签：jquery

我必须检查哪个触发了单击事件，用鼠标单击或 .click() 函数。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:26:11.400

您可以通过查看事件对象的`pageX`or属性来判断，如果使用了该属性，则如果发生了实际的鼠标单击，则为数字。例如：`pageY``undefined``$("some selector").click();`

```
(function($) {

  $("#target").click(function(e) {
    if (typeof e.pageX === "undefined") {
      display("Fired programatically");
    }
    else {
      display("Fired by real click");
    }
  });

  setTimeout(function() {
    $("#target").click();
  }, 500);

  function display(msg) {
    $("<p>").html(String(msg)).appendTo(document.body);
  }

})(jQuery); 
```

[实时复制](http://jsbin.com/azaday/1)| [来源](http://jsbin.com/azaday/1/edit)

当然，如果有人真的很聪明并构建了一个*包含*虚假`pageX`和`pageY`信息的完整点击事件，那将无法正常工作，但 jQuery 的默认处理`$("some selector").click();`不会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:30:08.597

是的，你可以这样做......

```
$('button').on("click", function(e){
    if (e.originalEvent !== undefined) {
        // the button was actually clicked
    } else {
        // the button was triggered by code
    }
}); 
```

# java - Corba COS Naming service list all nodes

> ID：14878117
> 
> 赞同：1
> 
> 时间：2013-02-14T15:21:44.953
> 
> 标签：java, namespaces, corba

I have a name list consisting of 4 contexts. Context 1,2 and 3 are binded to the root node, and context 4 is binded to context 2\. I am able to list the name of context 1-3 but I cant get context 4\.

It is only listing nodes at the first level. I think that if I check each node, check if it has sub-nodes and then list them that will work but I am not sure how do do that. Here is my code. I have two methods to list the contexts

```
import java.io.*;
import org.omg.CORBA.*;
import HelloNaming.*;
import org.omg.CosNaming.* ;
import org.omg.CosNaming.NamingContextPackage.*;

public class HelloNamingClient
{     

public static void main(String args[])
{
try{
    NameComponent nc[]= new NameComponent[2];

    ORB orb = ORB.init(args, null);

    org.omg.CORBA.Object objRef = orb.resolve_initial_references("NameService");
    NamingContext rootCtx = NamingContextHelper.narrow(objRef);

    final int batchSize = 7;
            BindingIterator b ;
            BindingListHolder bList = new BindingListHolder() ;
            BindingIteratorHolder bIterator = new BindingIteratorHolder();

            rootCtx.list(batchSize, bList, bIterator) ;
            for (int i=0; i<bList.value.length; i++) {
                 System.out.println(bList.value[i].binding_name[0].id) ;
    }

NamingContextExt ncc =
          NamingContextExtHelper.narrow(orb.resolve_initial_references(
        "NameService"));

    BindingListHolder bl = new BindingListHolder();
            BindingIteratorHolder blIt= new BindingIteratorHolder();
    ncc.list(1000, bl, blIt);

    Binding bindings[] = bl.value;

       for (int i=0; i < bindings.length; i++) {

                int lastIx = bindings[i].binding_name.length-1;

                if (bindings[i].binding_type == BindingType.ncontext) {
                  System.out.println( "Context: " +
                    bindings[i].binding_name[lastIx].id);
                } else {
                    System.out.println("Object: " +
                      bindings[i].binding_name[lastIx].id);
                }
    }

    } catch (Exception e) {
        System.out.println("ERROR : " + e) ;
        e.printStackTrace(System.out);
        }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T04:09:33.013

每个上下文都是一个单独的 CORBA 对象，需要单独查询，就像根命名上下文一样。以下修改递归地执行此操作并打印出“[contextN...].objectN”：

```
import org.omg.CORBA.*;
import org.omg.CosNaming.* ;

public class HelloNamingClient
{     
  public static void printContext( NamingContext nc, String parent )
  { 
    try {
      final int batchSize = 1000;
      BindingListHolder bList = new BindingListHolder( );
      BindingIteratorHolder bIterator = new BindingIteratorHolder( );

      nc.list( batchSize, bList, bIterator );

      for ( int i=0; i < bList.value.length; i++ ) {
        NameComponent[] name = { bList.value[i].binding_name[0] };
        if (bList.value[i].binding_type == BindingType.ncontext) {
            NamingContext context = NamingContextHelper.narrow( 
                nc.resolve( name ) );
            printContext( context, parent + name[0].id + "." );
        } else {
            System.out.println( parent + name[0].id );
        }
      }

    } catch (Exception e) {
        System.out.println("ERROR : " + e) ;
    }
  }

  public static void main(String args[])
  {
    try{
      ORB orb = ORB.init(args, null);

      org.omg.CORBA.Object objRef = orb.resolve_initial_references("NameService");
      NamingContext rootCtx = NamingContextHelper.narrow(objRef);

      printContext( rootCtx, "" );

    } catch (Exception e) {
      System.out.println("ERROR : " + e) ;
      e.printStackTrace(System.out);
    }
  }
} 
```

# delphi - Delphi Webbrowser select combobox

> ID：14878119
> 
> 赞同：0
> 
> 时间：2013-02-14T15:21:56.837
> 
> 标签：delphi, combobox, browser

In my Delphi application I'm using a TWebBrowser control, where I have loaded an HTML document, containing a element (drop down list) with a few items (drop down list items). Let's say, I have the following HTML document loaded in my web browser:

```
<html>
 <body>
   <select id="kurumTipi" class="fixedLength currencySel fullLength type:(json) onSuccess:(fillMultiple) param:(kurumAdi) emptyItem:(true) emptyItemValue:(false) emptyName:(Lütfen seçin.)" name="kurumTipi" jquery15207697552179207936="233" receivedfocus="true"> 
   <option value="">Lütfen seçin.</option> 
   <option value="FTRA±DGAZ±Doğalgaz±CHECKSUM_d56898e67b99aed5565c0f3500017f0c">Doğalgaz</option> 
   <option selected="" value="FTRA±ELKT±Elektrik±CHECKSUM_6940c364baaadf475a87ea30de904c5d">Elektrik</option>
   <option value="FTRA±NOTR±Noter Odası Ödemeleri±CHECKSUM_deca6291b6d9b3b117a4342c0887d260">Noter Odası Ödemeleri</option>
   <option value="FTRA±OZFR±Sigorta ve Özel Firma Ödemeleri±CHECKSUM_957a48160b10d7b9d514ebbcc297fe1b">Sigorta ve Özel Firma Ödemeleri</option>
   <option value="FTRA±SUOD±Su±CHECKSUM_bd6be042ec748f88cbb60e697ca1eb6d">Su</option>
   <option value="FTRA±TKKR±Tüketici Finansmanı±CHECKSUM_14bd912b2ea7a461502e330e8314b81a">Tüketici Finansmanı</option>
   <option value="FTRA±TLKM±Telekomünikasyon±CHECKSUM_4e222b9f4c055689b5f25e174d768b18">Telekomünikasyon</option>
   <option value="FTRA±UAID±Üyelik Aidatı±CHECKSUM_dddca41735a51150d8c087b0fcc8438c">Üyelik Aidatı</option>
   </select>
 </body>
</html> 
```

How do you select the combobox and Elektrik ?

I have no problem with the local server can change. But on the Web does not change the selected combobox is empty.

# javascript - FB.Event.subscribe comment - catch the reply event

> ID：14878120
> 
> 赞同：1
> 
> 时间：2013-02-14T15:21:57.687
> 
> 标签：javascript, facebook

I use facebook comments on my page, and I save the comments in database.

```
...    
FB.Event.subscribe("comment.create", function(response) {
        // SAVE
    });
... 
```

When someone responds to a comment, the comment.create event dosen't work. How can I catch the reply events?

thanks David

# c++ - 是否有适用于“把手”的适当“所有权在一个包中”？

> ID：14878121
> 
> 赞同：5
> 
> 时间：2013-02-14T15:22:02.100
> 
> 标签：c++, c++11, handle, raii, ownership-semantics

[*除了指针之外，句柄*](http://en.wikipedia.org/wiki/Handle_%28computing%29)还具有适当的语义。所以对我来说这样的例子（从[*零规则中*](http://flamingdangerzone.com/cxx11/2012/08/15/rule-of-zero.html)提取）：

```
class module {
public:
    explicit module(std::wstring const& name)
    : handle { ::LoadLibrary(name.c_str()), &::FreeLibrary } {}

    // other module related functions go here

private:
    using module_handle = std::unique_ptr<void, decltype(&::FreeLibrary)>;

    module_handle handle;
}; 
```

`unique_ptr`用作句柄的“包中所有权”是一个不好的例子。首先，它利用句柄是指针类型的内部知识，并使用它来制作`unique_ptr`“不透明”句柄类型所基于的基本类型。

句柄可以是任何类型，它们可能是指针，可能是索引或谁知道。最重要的是，您手头（例如大多数 C API）是一个句柄及其资源释放函数。

**是否存在*适用*于句柄语义的适当“包中所有权”？我的意思是，已经公开供一个人使用？**

对我来说，`unique_ptr`等。人。不起作用，我必须对句柄类型**是**什么做出不必要的假设，而我想要的只是通过不透明的句柄类型及其释放功能获得“包中的所有权”。

在句柄类型内部查看此信息以进行构造是没有意义的。是把手，应该没关系。

我将在[另一个问题的](https://stackoverflow.com/q/9842938) [答案](https://stackoverflow.com/a/9842994)中引用另一个 SO 用户的感受：

> 创建一个特定的“智能指针”类，不会花很长时间。不要滥用图书馆课程。句柄语义与 C++ 指针的语义完全不同；一方面，取消引用 HANDLE 是没有意义的。
> 
> 使用自定义智能句柄类的另一个原因 - NULL 并不总是意味着空句柄。有时是INVALID_HANDLE_VALUE，不一样。

**免责声明：**

这个问题重新制定并建立在这个问题之上：

*   [正确的（资源处理）零规则在哪里？](https://stackoverflow.com/q/14865919/1000282)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:30:20.550

类型`unique_ptr`不如短语“handle”通用，是的。但为什么不应该呢？您的“句柄”示例之一（例如，整数索引的示例）与`unique_ptr`. 您无法将一种特定类型的句柄与“所有句柄”进行比较。

如果你想要一个单一的、具体的 C++ 类型（或类型模板），它是一个句柄，但实际上没有定义任何特定的处理语义，那么......我帮不了你。我认为没有人可以轻松应对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:35:06.627

[std::experimental::unique_resource](https://en.cppreference.com/w/cpp/experimental/lib_extensions_3)

# android - 通过单击谷歌地图标记信息窗口开始活动

> ID：14878126
> 
> 赞同：3
> 
> 时间：2013-02-14T15:22:22.017
> 
> 标签：android, google-maps, google-maps-android-api-2

我必须通过单击 infoWindow 开始一些活动（我可以`setOnInfoWindowClickListener()`用 我应该可以为每个地图标记设置一个 ID。我可以将自定义 ID 传递给地图上的每个标记吗？或者我如何`infoWindow`使用这个 id 创建按钮（如果我能做到这一点，我可以传递这个 id）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T20:33:17.433

我建议使用 HashMap 或类似的东西。当您遍历对象列表并为它们创建标记时，还要将标记添加到列表中，使用对象的 ID 作为键，标记作为值：

```
private HashMap<Integer, Marker> markerMap = new HashMap<Integer, Marker>(); 
```

...

```
for(MarkerObject obj : this.markerObjects)
{
     //If the marker isn't already being displayed
     if(!markerMap.containsKey(obj.getId()))
     {
         //Add the Marker to the Map and keep track of it 
         this.markerMap.put(obj.getId(), this.mMap.addMarker(getMarkerForObject(obj)));
     }
} 
```

然后，您可以使用 OnInfoWindowClickListener 在地图中查找点击标记的对象 ID，并对相应的数据执行某些操作，例如打开一个包含详细信息的新活动。

# mysql - MySQL - 如何改进这些查询？

> ID：14878128
> 
> 赞同：0
> 
> 时间：2013-02-14T15:22:27.847
> 
> 标签：mysql

第一：

```
SELECT MONTH(timestamp) AS d, COUNT(*) AS c 
FROM table
WHERE YEAR(timestamp)=2012 AND Status = 1
GROUP BY MONTH(timestamp) 
```

我面临的问题之一是我必须运行多个使用不同值的查询`Status`。有没有办法将它们组合成一个？就像在一列中一样，它将包含 when 的所有计数`Status=1`和另一列的 when`Status=2`等。

第二个：

```
SELECT COUNT(*) c , MONTH(timestamp) t FROM
(
SELECT t.adminid, timestamp
FROM  table1 t 
LEFT JOIN admins a ON a.adminID=t.adminID
WHERE YEAR(timestamp)=2012          
GROUP BY t.adminID, DATE(Timestamp)
ORDER BY timestamp DESC
) AS a
GROUP BY MONTH(timestamp)
ORDER BY MONTH(timestamp) ASC; 
```

一个嵌套查询，不确定我是否可以对此进行改进。我在 2 张桌子上运行这个，一张有约 35k 行，一张有约 300k 行。第一张桌子大约需要半秒，第二张桌子大约需要4-5秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:28:26.150

这些可能会有所帮助：

第一：

```
SELECT MONTH(timestamp) AS d, 
sum(case when Status=1 then 1 else 0 end) as Status1Count,
sum(case when Status=2 then 1 else 0 end) as Status2Count,
sum(case when Status=3 then 1 else 0 end) as Status3Count
FROM `table`
WHERE timestamp between '2012-01-01 00:00:00' and '2012-12-31 23:59:59' 
AND Status in (1,2,3)
GROUP BY MONTH(timestamp); 
```

第二个：

确保列上有索引`timestamp`，然后确保您没有运行任何转换函数，例如`MONTH(timestamp)`在索引列上。像：

```
SELECT COUNT(*) c , a.m as t FROM
(
SELECT t.adminid, timestamp, MONTH(timestamp) as m
FROM  table1 t 
LEFT JOIN admins a ON a.adminID=t.adminID
WHERE timestamp between '2012-01-01 00:00:00' and '2012-12-31 23:59:59'          
GROUP BY t.adminID, DATE(Timestamp)
ORDER BY timestamp DESC
) AS a
GROUP BY a.m
ORDER BY a.m ASC; 
```

Second one is a bit tricky since I do not have the data in front of me so I can't see the DB access path!

# java - Get only specific element node from xml using stax parser

> ID：14878129
> 
> 赞同：1
> 
> 时间：2013-02-14T15:22:35.137
> 
> 标签：java, xml, stax

```
<xml>
<name>steve</name>
<age>12</age>
<country>Germany</country>
<person>
  <college>kmu university</college>
  <country>Sweden</country>
</person>
</xml> 
```

Using stax parser while parsing I get country name as Germany,Sweden. But I need only Sweden not germany. Any other way to get it.I am using STAX parser to parse this xml.

**Expected Output: Sweden**

**Actual Output:Germany,Sweden**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:44:42.163

当您进行 StAX（和 SAX）解析时，您需要自己跟踪上下文。这意味着您需要跟踪已开始但尚未完成的元素。一旦你有了这些信息，你就可以只保留嵌套在“person”元素下的“country”元素，而忽略所有其他的“country”元素。

# c# - Sql query containing 2 databases

> ID：14878131
> 
> 赞同：10
> 
> 时间：2013-02-14T15:22:40.333
> 
> 标签：c#, mysql, sql, database, ms-access

In C# I want to execute a query that use 2 different databases (One is Access for local, and other is distant and is MySQL)

I'm able to do it in VBA Access, but how I can make the same thing in C# ??

This is how I made it in Access:

Link my 2 differents table/databases in Table

In VBA:

```
sSQL = "INSERT INTO DB1tblClient SELECT * FROM DB2tblClient"  
CurrentDb.Execute sSQL 
```

How I can execute this SQL in C# ? (What object to use, etc... Example code if you can)

Thanks !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T11:59:02.440

好吧，不可能用单个语句运行这种复杂的查询。

**基本上每个查询执行对象都是由特定的数据库信息初始化的，所以每个数据库首先**需要两个不同的对象。

现在需要用自己的连接对象初始化 2 个对象。

只需通过第一个对象获取数据并通过使用第二个连接对象将其插入另一个数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:31:24.167

你应该能够从任何应用程序运行相同的 SQL 命令，真的。这是假设：

*   您正在从 C# 应用程序连接到 Access
*   `DB1tblClient`是一个本地访问表
*   `DB2tblClient`是Access中的链接表

鉴于这些，您可以尝试以下方法：

```
using (OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Stuff\MyAccessdb.mdb"))
{
    conn.Open();

    using (OleDbCommand cmd = conn.CreateCommand())
    {
        cmd.CommandText = "INSERT INTO DB1tblClient SELECT * FROM DB2tblClient";
        cmd.ExecuteNonQuery();
    }
} 
```

如果您无法正确获取连接字符串，您可能需要检查[connectionstrings.com ，并且您可能需要为使用这些提供程序的连接安装一些组件（MDAC 或 ACE）。](http://www.connectionstrings.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:35:11.243

有两种方法可以做到这一点。一种是在 Access 上设置链接表并运行单个查询。另一种是从 c# 运行这两个查询并将它们与 linq 连接起来。

第一种方法更好。如果你真的必须用 linq 来做，这里有一些示例代码：

```
dWConnection.Open();
dWDataAdaptor.SelectCommand = dWCommand1;
dWDataAdaptor.Fill(queryResults1);
dWDataAdaptor.SelectCommand = dWCommand2;
dWDataAdaptor.Fill(queryResults2);
dWConnection.Close();

IEnumerable<DataRow> results1 = (from events in queryResults1.AsEnumerable()
                       where events.Field<string>("event_code").ToString() == "A01"
                       ||  events.Field<string>("event_code").ToString() == "ST"
                       select events ) as IEnumerable<DataRow>;

var results2 = from events1 in queryResults1.AsEnumerable()
    join events2 in queryResults2.AsEnumerable()
    on (string)events1["event_code"] equals (string)events2["event_code"]

    select new
            {
                  f1 = (string)events1["event_code"],
                  f2 = (string)events2["event_name"]
            };

DataTable newDataTable = new DataTable();
newDataTable = results1.CopyToDataTable<DataRow>(); 
```

明白为什么我说链接表更好了吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:29:39.083

在尝试此类查询之前，您需要牢记以下几点

1.  这两个数据库都可以从您的代码中访问。

2.  两个数据库之间存在互连。

3.  这两个数据库都可供您用来执行此查询的用户使用。

4.  您需要按以下格式指定查询

`DATABASE_NAME.SCHEMA_NAME.TABLE_NAME`而不仅仅是`TABLE_NAME`

**编辑**

如果您没有数据库之间的互连，您可以按照以下步骤操作

1.  使用一个连接到 Source 数据库`connection`。

2.  将源数据库中的数据读入`dataset`或`datatable`使用`SELECT`查询。

3.  使用第二个连接到目标数据库`connection`。

4.  `INSERT`使用标准查询使用循环将所有记录一一插入到目标数据库

# image-processing - Programmatically get non-overlapping images from MP4

> ID：14878133
> 
> 赞同：2
> 
> 时间：2013-02-14T15:22:43.770
> 
> 标签：image-processing, ffmpeg, imagemagick

My ultimate goal is to get meaningful snapshots from MP4 videos that are either 30 min or 1 hour long. "Meaningful" is a bit ambitious, so I have simplified my requirements.

The image should be crisp - non-overlapping, and ideally not blurry. Initially, I thought getting a keyframe would work, but I had no idea that keyframes could have overlapping images embedded in them like this:![enter image description here](../Images/25096040abf2c733b79911e3eae4abe3.png)

Of course, some keyframe images look like this and those are much better:

![enter image description here](../Images/550324f57b898c085633729372179e4c.png)

I was wondering if someone might have source code to:

Take a sequence of say 10-15 continuous keyframes (jpg or png) and identify the best keyframe from all of them.

This must happen entirely programmatically. I found this paper: [http://research.microsoft.com/pubs/68802/blur_determination_compressed.pdf](http://research.microsoft.com/pubs/68802/blur_determination_compressed.pdf)

and felt that I could "rank" a few images based on the above paper, but then I was dissuaded by this link: [Extracting DCT coefficients from encoded images and video](https://stackoverflow.com/questions/4470107/extracting-dct-coefficients-from-encoded-images-and-video) given that my source video is an MP4\. Of course, this confuses me because the input into the system is just a sequence of jpg images.

Another link that is interesting is:

[Detection of Blur in Images/Video sequences](https://stackoverflow.com/questions/5180327/detection-of-blur-in-images-video-sequences/5180984#5180984)

However, I am not sure if this will work for "overlapping" images.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:42:26.000

第一张图片来自场景转换时的隔行扫描视频。这两个字段属于不同的场景。对视频进行去隔行扫描会有所帮助，请尝试使用 ffmpeg 过滤器`-filter:v yadif`。我不确定 yadiff 是如何工作的，但如果它提取两个字段并将它们缩放到原始大小，它会起作用。另一种方法是检测两个字段（提取交替行并形成具有一半高度的图像并区分它们）是否彼此非常不同并忽略这些图像。

# delphi - Delphi: how to adjust ownerdrawn Listbox, for various system DPI?

> ID：14878134
> 
> 赞同：2
> 
> 时间：2013-02-14T15:22:41.577
> 
> 标签：delphi, listbox

Delphi7\. I have Listbox, OwnerDrawn, with fixed ItemHeight. Now i want to make it look OK on 125% Windows font sizes. Currently i see that items font is increased but ItemHeight isn't, so items are "truncated" by Y. How to adjust ItemHeight when OS has 125% or 150% font sizes?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:53:40.453

不能将 OnMeasureItem 用作 List.Style=OwnerDrawFixed。我的溶胶：

```
function ScaleFontSize(Size: Integer; Form: TForm): Integer;
begin
  Result:= Size * Form.PixelsPerInch div 96 + 1;
end;

procedure TfmSetup.TntFormCreate(Sender: TObject);
begin
  with ListTabColors do
    ItemHeight:= ScaleFontSize(ItemHeight, Self);
end; 
```

# performance - What XSLT processor is better to use for small parallel transformations

> ID：14878139
> 
> 赞同：0
> 
> 时间：2013-02-14T15:22:56.807
> 
> 标签：performance, xslt

I need to execute lots (abot 100-200) of parallel XML transformation in a cycle. Average XML size is about 5Kb. Relation of used XSL to XML to be parsed is about 0.25, that means that some XMLs are sharing the same XSL. XSL here could be cached, but unfortunately XSL is not stored in File, and generated dynamically within an application. So what XSLT processor suits better for my case?

p.s. language - Java, transformation final result type - String

thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:40:03.797

我不确定我是否完全理解了这个问题，但我会尝试。

首先，似乎有两个独立的问题，我认为它们是完全正交的。首先是如何缓存样式表的问题：如果您多次运行转换，那么最好编译一次并重复使用它。通常这不是问题，除非没有足够的内存来缓存所有样式表，在这种情况下您需要某种 LRU 策略。

第二个问题是您选择的 XSLT 处理器。我认为无论您选择哪种处理器，您都可以使用相同的缓存架构，所以这个问题不会限制您的选择。在 Java 世界中，主要的免费/开源处理器是 Xalan（来自 Apache 的版本并嵌入在 JDK 中）和 Saxon-HE；由于 Saxon-HE 支持 XSLT 2.0 并且通常更快，因此几乎没有竞争。在付费处理器中，主要竞争者是 IBM 的 Websphere 处理器和 Saxon-EE；他们都应该轻松处理这种工作负载，但是除非您对 IBM 中间件进行大量投资，否则您不太可能考虑使用 IBM 产品。

（我不会试图隐瞒我是 Saxon 产品的开发者......）

# maven-3 - maven-war-plugin 覆盖和 m2e eclipse 插件

> ID：14878149
> 
> 赞同：0
> 
> 时间：2013-02-14T15:23:28.977
> 
> 标签：maven-3, m2eclipse, m2e, maven-war-plugin

我正在尝试利用 maven-war-plugin 的有用覆盖功能。换句话说，我有一个`template-0.0.1.war`包含标签文件、css、js 和图像的模板（打包为 WAR 文件）。

当我设置`template-0.0.1.war`为 myApp 项目的依赖项时，我得到一个包含被 myApp 项目中具有相同路径`myApp.war`的文件覆盖的所有文件的最终文件。`template-0.0.1.war`

这是我想要的行为。

但是，我需要在`pom.xml`myApp 中引入 maven-war-plugin 的配置：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.3</version>
    <configuration>
      <webResources>
        <resource>
          <directory>../path/to/another/dir</directory>
        </resource>
      </webResources>
    </configuration>
</plugin> 
```

一旦我引入了这样的插件配置，我就获得了包含myApp 项目和 myApp 项目`myApp.war`中所有文件的最终文件，但覆盖了 myApp 项目中具有相同路径的文件。`template-0.0.1.war``template-0.0.1.war`

这种行为与我的预期完全相反。

有人能告诉我哪里错了吗？

提前致谢。

**找到解决方案后编辑：**

所描述的问题是由于不同操作的并发性：WAR 覆盖（正常工作）和外部`webResources`.

实际上，外部`webResources`标签指向模板项目目录：对 Maven 完全没用，但对于“愚弄”m2e eclipse 插件并让它看到模板中包含的自定义标签是必不可少的。

我采用的解决方案是在我的插件部分引入 2 个不同的配置文件`pom.xml`：第一个称为“ *eclipse* ”，我在其中插入了`maven-war-plugin`.`webResources`和第二个配置文件（称为“*标准*”并默认激活）没有`maven-war-plugin`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:23:51.770

来自[Maven 战争插件文档](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)：

> 默认情况下，首先添加项目的源（也就是当前构建）（例如，在应用任何覆盖之前）。当前构建被定义为没有 groupId、artifactId 的特殊覆盖。如果需要首先应用覆盖，只需在这些覆盖之后配置当前构建。

如果模板中的文件被子 WAR 中的文件覆盖，您可能需要考虑在覆盖配置中明确排除它们。

这是文档所说的首先应用覆盖的内容：

```
<build>
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.3</version>
    <configuration>
      <overlays>
        <overlay>
          <groupId>com.example.projects</groupId>
          <artifactId>my-webapp</artifactId>
        </overlay>
        <overlay>
          <!-- empty groupId/artifactId represents the current build -->
        </overlay>
      </overlays>
    </configuration>
  </plugin>
</plugins> 
```

# asp.net - jQuery $.post 上的 MVC 4 PartialViewResult 缓存

> ID：14878151
> 
> 赞同：4
> 
> 时间：2013-02-14T15:23:31.173
> 
> 标签：asp.net, asp.net-mvc-3, jquery, asp.net-mvc-4

我有一个 jQuery $.post 返回到 MVC 4 控制器，它将返回一个 PartialViewResult，并使用 POST 中发送的数据进行渲染。在调试 Partial View 和 Controller 时，正在接收正确的数据并将其作为 View Model 发送到 Partial View。问题是，在分析在 AJAX 结果中发回的 HTML 时，它包含来自原始页面刷新的看似“缓存”的数据。

我在这里看到了大量类似的帖子，但没有一个与我的问题相同。

我知道 HTTP Post 请求不会缓存在浏览器中，所以这不是问题。我还将 OutputCache 属性设置为 NoStore = true 等。

**控制器**

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
public partial class MyController : Controller
{ 
  ...
    [HttpPost]
    public virtual ActionResult UpdatePartial(MyViewModel myVm)
    {
        return this.PartialView("My/_Partial", myVm);
    }
} 
```

**JS**

```
$('.someButton').click(function () {
        $.post(myAjaxUrl, $('form').serialize(), function (data) {
            $('#myContent').html(data);
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:22:17.017

我可以通过`ModelState.Clear`在对模型进行任何操作之前添加来解决这个问题。

```
[HttpPost] 
public virtual ActionResult UpdatePartial(PersonViewModel model) 
{ 
    ModelState.Clear(); 
    model.FirstName += "1"; 
    model.LastName += "1"; 
    model.Age += 1; 
    return this.PartialView("../My/_Partial", model); 
} 
```

[这个](https://stackoverflow.com/questions/1775170/asp-net-mvc-modelstate-clear "这个")问题有蒂姆斯科特的答案，其中包含更多信息和链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T15:45:31.260

默认情况下，JQuery 将缓存 $.ajax XMLHttpRequests（除非数据类型是脚本或 jsonp）。由于 $.post 是通过 $.ajax 实现的，因此 JQuery 本身已经缓存了您的请求。以下JS应该可以工作。

**JS**

```
$('.someButton').click(function () {
    $.ajax{(
        url: myAjaxUrl,
        data: myAjaxUrl,
        success: function (data) {
           $('#myContent').html(data);
        },
        cache: false
    });
}); 
```

如果发布不成功，您可能还会发现处理错误事件是值得的。

# sql - 随机日期 SQL

> ID：14878153
> 
> 赞同：3
> 
> 时间：2013-02-14T15:23:40.657
> 
> 标签：sql, sql-server, tsql, date

你能帮忙吗：

我有一个到达日期列，需要添加 5000 行，其中包含 2010 年的随机日期。

例如：`01/01/2010`, `25/8/2010`, `03/05/2010`,`31/12/2010`等

我认为这将是一个`INSERT`声明，但我不确定。

谢谢

韦恩

```
USE Occupancy
CREATE TABLE Book
(BookNumber varchar(30),
ArrivalDate int)

DECLARE @BookNumber varchar(30)
DECLARE @ArrivalDate int

SET @BookNumber = 1
SET @ArrivalDate = 0

WHILE @BookNumber <= 5000
WHILE @ArrivalDate <= 5000

BEGIN
INSERT INTO Book (BookNumber,ArrivalDate)
SELECT 'B' + Right ('00000000' + CAST(@BookNumber AS varchar(30)),8),
DATEADD(day, CAST(RAND() * 365 as int), '2010-1-1')

SET @BookNumber = @BookNumber + 1
SET @ArrivalDate = @ArrivalDate + 1
END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:31:08.377

```
DECLARE @counter int
SET @counter = 0
WHILE @counter < 5000
BEGIN
    INSERT INTO myTable (arrivalDate)
    SELECT DATEADD(day, CAST(RAND() * 365 as int), '2010-1-1')
    SET @counter = @counter + 1
END 
```

如果你有一个数字表或[生成器](http://weblogs.sqlteam.com/jamesn/archive/2008/05/29/60612.aspx)，你可以避免循环：

```
INSERT INTO myTable (arrivalDate)
SELECT DATEADD(day, ABS(CHECKSUM(NEWID()) % 365), '2010-1-1')
FROM ( GenerateRowNumbers(5000, 1) ) t 
```

# javascript - 查找并替换 DOM 中所有“a”目标的值？

> ID：14878157
> 
> 赞同：0
> 
> 时间：2013-02-14T15:24:00.287
> 
> 标签：javascript, dom

我需要浏览一个页面并用这个替换或插入每个“a”链接：

```
target='_self' 
```

我的问题是，我应该为此使用正则表达式、方法 find() 还是其他方法？我对 js 真的很陌生，所以我仍在尝试找出许多不同的方法或可能性。

欢迎任何建议或提示。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:25:12.397

如果使用 jQuery：

```
$('a').each(function(){ $(this).attr("target", "_self"); }); 
```

没有：

```
var allAs = document.getElementsByTagName("a");
for(var i=0;i<allAs.length;i++){ 
     allAs[i].target =  "_self"; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:28:06.977

就像是：

```
 var anchors = document.getElementsByTagName('a');
 for (var i = 0; i < anchors.length; i++) {
  anchors[i].setAttribute('target', '_self');
 } 
```

更新：

w3c 建议在属性可用时直接访问它（[http://www.quirksmode.org/dom/w3c_core.html#attributes](http://www.quirksmode.org/dom/w3c_core.html#attributes)）所以最好的方法是：

```
 anchors[i].target = '_self'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:26:53.167

有一个 javascript 函数`document.getElementByTagName()`可让您定位诸如“a”之类的元素。请参阅[此处](http://www.w3schools.com/jsref/met_doc_getelementsbytagname.asp)了解如何使用它。

**编辑：**

这可以使用另一个功能来跟进`setAttribute`，你可以去[这里](http://www.w3schools.com/jsref/met_element_setattribute.asp)看看如何使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T15:31:19.273

正则表达式将是一种过度杀戮，并且对于 JS - 初学者和专业人士来说有点困难 ;-)

对于普通的 JS。

按照 Pointy 的建议使用

```
var items = document.getElementsByTagName("a"); //gets all a's
for(var idx = 0 ; idx <items.length; idx++)
{
  items[idx].target = "_self"; // sets for each a a target
} 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-14T15:26:06.220

使用 jQuery：

```
$('a').attr('target','_self'); 
```

使用纯 JavaScript：

```
var links = document.getElementsByTagName('a');

for(var i=0; i<links.length; i++) {
    links[i].setAttribute('target', '_self');  // or links[i].target = '_self';
} 
```

# python - 新的 django 应用程序中没有 admin.py 文件

> ID：14878158
> 
> 赞同：5
> 
> 时间：2013-02-14T15:24:01.680
> 
> 标签：python, django, django-models, django-templates, django-admin

我是 Django 的新手，我已经遇到了一个问题。我在 OSX Mountain lion 上使用 Django 1.4.3。

当我使用

```
 django-admin.py startapp "name" 
```

应用程序已创建，所有必要的文件都在其中（`__Init__.py`、、、、`models.py`）。但是，应该自动创建的文件不在 app 文件夹中。没有它，我无法编辑我的管理员站点首选项。`tests.py``views.py``admin.py`

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T15:26:03.747

您必须手动创建文件，因为默认情况下禁用 django 管理员。

关于在 admin.py 中放入什么的说明在[这里](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#modeladmin-objects)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T20:14:10.130

您很可能正在阅读开发教程，但使用的是稳定版本（当前为 1.4.3）。`admin.py`由本次提交创建`startapp`，[该提交](https://github.com/django/django/commit/3f1c7b70537330435e2ec2fca9550f7b7fa4372e)还更新了教程文档，但在 1.6 之前它不会成为稳定版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T16:21:36.207

不会生成 Admin.py。回应 OP 对您对上述帖子的评论：

从教程的第 1 部分：[https ://docs.djangoproject.com/en/1.4/intro/tutorial01/](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)

> 让我们看看 startproject 创建了什么：

```
mysite/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py 
```

在第 2 部分，在“**使投票应用程序在管理员中可修改**”部分下，它说：

> 但是我们的投票应用程序在哪里？它不会显示在管理索引页面上。
> 
> 只需要做一件事：我们需要告诉管理员 Poll 对象有一个管理界面。为此，请在您的 polls 目录中创建一个名为 admin.py 的文件，并将其编辑为如下所示：

```
from polls.models import Poll
from django.contrib import admin

admin.site.register(Poll) 
```

# indexing - 提示 db2 使用哪个索引？

> ID：14878164
> 
> 赞同：0
> 
> 时间：2013-02-14T15:24:15.830
> 
> 标签：indexing, db2

梦梦，

我有一些表的连接，我想给 db2-database 一个提示，我希望她使用哪个索引。我知道，这可能会导致查询缓慢，但是我有一个生产数据库和一个测试数据库，并且我希望两个数据库中的行为相同（即使在一个数据库中数据量显着不同或（索引- )缓存有。

这可能（以及如何）？我在在线手册中没有找到任何内容，这可能意味着我的搜索条件有误。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:16:04.443

这不是 DB2 经常做的事情。但是，您可以使用[选择性](http://www.ibm.com/developerworks/data/library/tips/dm-0312yip/)。它应该仍然[存在](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0000754.html)于当前版本中。向查询添加选择性子句将影响查询优化器做出的决策。

上面提到的吉尔伯特·勒布朗（Gilbert Le Blanc）也将起作用。您可以更新[syscat.tables 列](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.admin.doc/doc/r0001063.htm)并欺骗 DB2 来优化对行中不存在的数据量的查询。此外，您的 DB / DBM CFG 的其余部分应该匹配（即计算的磁盘和 cpu 速度、内存使用相关设置等），因为在某些情况下它们可能在某种程度上也很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:04:34.600

您可以通过配置文件影响优化器：

*   [http://www.ibm.com/developerworks/data/library/techarticle/dm-1202storedprocedure/index.html](http://www.ibm.com/developerworks/data/library/techarticle/dm-1202storedprocedure/index.html)
*   最近这里有人问：[Is it possible to replace NL join with HS join in sql](https://stackoverflow.com/questions/14136463/is-it-possible-to-replace-nl-join-with-hs-join-in-sql/14141420#comment19626050_14141420)

但是，我还没有听说过选择性条款，我认为您应该先尝试此选项，然后再创建配置文件。但是您应该在尝试其他选项后立即执行此操作。在影响优化器之前，请按照 DeveloperWorks 教程中指示的步骤进行操作：

> *   尝试不同的 SQL 优化类。默认优化类由数据库配置文件中的 DFT_QUERYOPT 参数控制。
>     
>     
> *   尝试通过确保已收集正确的数据库统计信息来解决任何性能问题。统计数据越详细，优化器的性能就越好。（请参阅 DB2 命令参考中的 RUNSTATS）。
>     
>     
> *   如果糟糕的访问计划是表特征快速变化的结果（即增长非常快以至于统计信息很快过时），请尝试使用 ALTER TABLE 命令将表标记为 VOLATILE。
>     
>     
> *   尝试使用文字值而不是谓词中的参数标记来解释查询。如果您在使用参数标记时获得不同的访问计划，它将帮助您更好地了解性能问题的本质。您可能会发现在您的应用程序中使用文字会以 SQL 编译开销为代价产生更好的计划（从而获得更好的性能）。
>     
>     
> *   尝试使用 DB2 的索引顾问 (db2advis) 来查看是否有任何您可能忽略的有用索引。

# sencha-touch - Sencha Touch 无法在 Loacations:10 上调用 null 的方法“substr”

> ID：14878171
> 
> 赞同：0
> 
> 时间：2013-02-14T15:24:39.377
> 
> 标签：sencha-touch, touch, substring, substr

嗨，正如标题所说，我突然收到此错误而没有更改任何内容。这是文件位置代码：

```
Ext.define('Wickelplaetze.store.Locations', {
extend: 'Ext.data.Store',
requires: 'Wickelplaetze.model.Location',

config: {
    model: 'Wickelplaetze.model.Location',
    storeId: 'locationsstore',
    grouper: {
        groupFn: function(record) {
            return record.get('ort').substr(0, 1);
        },
        sortProperty: 'ort'
    },
    proxy: {
        type: 'ajax',
        url: 'http://freakp.com/wpapp/form-data.json',
        withCredentials: false,
        useDefaultXhrHeader: false
    },
    autoLoad: true
} 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:28:53.870

`null`您的 json 中有 key的值`ort`。您可以检查是否`ort`不为空，然后`return`喜欢 -

```
 if(record.get("ort")!= null){
     return record.get('ort')[0];
 } 
```

这样做会消除该错误。但这不会正确排序记录。

还有一件事，如果要按 的首字母对列表进行排序`ort`，可以直接使用 -

`return record.get("ort")[0]`;

当我尝试使用您的代码填充列表时，它实际上是无限运行的。我什么也没得到。对这么多值进行排序非常慢。填充列表需要 3 分钟。

**更新**

[Link for working fiddle](http://www.senchafiddle.com/#FpGUU) for your example. You can see null values at bottom of list. There are **7** null values for key `ort`.

# php - 从 get_the_content() 中删除图像也删除 标签

> ID：14878174
> 
> 赞同：0
> 
> 时间：2013-02-14T15:24:49.477
> 
> 标签：php, regex, wordpress, preg-replace

我正在尝试使用这段代码 删除所有图像和周围的`<a>`标签：`get_the_content()`

```
<?php
$content = get_the_content();
$postOutput = preg_replace(array('{<a[^>]*><img[^>]+.}','{></a>}'),'', $content);
echo $postOutput;
?> 
```

`<p>`这很好，除了段落周围没有标签。
1\. 使用时这样正常`get_the_content()`吗？
2\. 我怎样才能将它们添加到我的结果中？
3\. 还是我的正则表达式错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:09:22.240

好的，我将回答我自己的问题：

1.  是的，没有`<p>`关于`get_the_content()`谢谢@s_ha_dum 是正常的
2.  要添加`<p>`我需要应用[这里提到](http://codex.wordpress.org/Function_Reference/the_content)的内容过滤器（向下滚动到“替代用法”）。
3.  正则表达式没有错，但是正则表达式 html 很脏。谢谢@MarcB

[在此处](https://stackoverflow.com/questions/14878908/how-to-remove-all-images-with-and-without-sourrounding-links-from-the-content)查看导致以下代码的新问题

```
$dom = new DOMDocument;
$dom->loadHTML(get_the_content());
$xpath = new DOMXPath($dom);
$nodes = $xpath->query('//img|//a[img]');
foreach($nodes as $node) {
    $node->parentNode->removeChild($node);
}
$no_image_content = $dom->saveHTML();
$no_image_content = apply_filters('the_content', $no_image_content);
$no_image_content = str_replace(']]>', ']]&gt;', $no_image_content);
echo $no_image_content; 
```

# php - 兼容模式的元标记

> ID：14878175
> 
> 赞同：0
> 
> 时间：2013-02-14T15:24:47.050
> 
> 标签：php, javascript, jquery

我有很多 JS 和 jQuery 代码的网络应用程序，我的问题是 IE9。由于某种原因，我的 JS 在 IE9 中没有响应，在所有其他浏览器中运行良好，包括 IE8。

发生的事情是，当我将`<meta http-equiv="X-UA-Compatible" content="IE=8"/>`JS 在 IE9 中运行但不像在其他浏览器中那样运行时（某些功能无法正常运行），然后当我将其更改为`<meta http-equiv="X-UA-Compatible" content="IE=9"/>`并刷新时，一切都开始正常工作，但如果我清除缓存并重新启动浏览器我又遇到了同样的问题。

我也尝试过完全删除元标记，但这无济于事。如果有人对 IE 有更多经验，欢迎提出任何建议。

> 注意：这个问题只出现在在线服务器上，在我的 WAMP 本地是可以的。

谢谢

# eclipse - 如何在不运行 Eclipse 应用程序或 OSGi 框架的情况下运行 JET2 项目模板？

> ID：14878176
> 
> 赞同：1
> 
> 时间：2013-02-14T15:24:51.100
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-jet

当我将 JET2 项目作为 JET 转换应用程序运行时，我收到此错误：

```
"Could not load JET template loader" 
```

但是，当我将项目作为 Eclipse 应用程序运行时，它会正确执行。这在更改方面代价高昂，因为每次更改我都必须启动一个新的 Eclipse 实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-27T03:28:55.057

我使用[tika-manel-jet-plugin](http://network.tikalk.com/release/tikal-maven-jet-plugin/)运行 JET 的轻量级版本，以创建代码，这些代码可以在我的[JPA Annotation Processor](http://site.trajano.net/jpa-apt/)中使用的其他库的情况下运行。请注意，这不是完整的 JET，它是使用 ANTLR 重新实现的 JET

# php - MySQL db export：允许的内存大小为 67108864 字节已用尽

> ID：14878179
> 
> 赞同：0
> 
> 时间：2013-02-14T15:25:11.410
> 
> 标签：php, mysql, memory, phpmyadmin, export

首先，这个问题已经在 StackOverflow 上多次说明，但不是我看到错误的地方。我已经阅读了每一个，以确保这不是重复的。当我尝试从 phpMyAdmin 导出数据库以便将其导入另一台服务器时出现问题。.sql 文件正在保存，但最后一行显示以下错误消息。

**环境：**

*   MediaTemple 网格服务器 (gs)
*   带有 MySQL 数据库的 Wordpress 插件
*   使用 phpMyAdmin 导出

**错误信息：**

`<b>Fatal error</b>: Allowed memory size of 67108864 bytes exhausted (tried to allocate 22505404 bytes) in <b>.../phpMyAdmin/current/libraries/export/sql.php</b> on line <b>1255</b><br />`

**PHP 设置：**

我已经运行了命令：`ini_set('memory_limit', '128M');`，并`phpinfo()`显示`memory_limit: 128M`。

在我读过的所有地方，这是一个 PHP 错误。它与MySQL变量有什么关系吗？

提前感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:26:54.363

不，这绝对是 PHP 错误，可能源于 PhpMyAdmin 中的设置。您是否尝试过在命令行上执行 mysqldump？

# javascript - javascript onclick 事件后修改 CSS 的正确标记

> ID：14878182
> 
> 赞同：0
> 
> 时间：2013-02-14T15:25:10.340
> 
> 标签：javascript, jquery

在javascript函数构建div*之后*修改CSS的正确标记是什么？我熟悉使用 jquery `.css()` ，但是，我不确定如何在 js 完成加载其资源时创建事件处理程序。javascript 来自第三方，看起来像这样 - 它还创建了可怕的内联样式：

```
<script type="text/javascript">
function jsfunction(){
    var x = (content);
    var y = document.createElement("script");
    js.setAttribute("language", "javascript");
    js.setAttribute("type", "text/javascript");
    js.setAttribute("src",x + "scriptUrl");
    document.getElementsByTagName("head").item(0).appendChild(js);
}
if (window.attachEvent) {window.attachEvent("onload", jsfunction);}
else if (window.addEventListener) {window.addEventListener("load", jsfunction, false);}
else {document.addEventListener("load", jsfunction, false);}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:18:59.877

你可以试试这个，它会覆盖现有的jsfunction（假设你不能让第三方改变它），应用它，然后存在你的css更改代码。由于 jsfunction 已经绑定到文档加载，它应该执行。

请记住，这未经测试，我不确定文档加载是否会在原始文件上使用此覆盖，但值得一试。

```
// Keep a reference to the older function.
var old_jsfunction = jsfunction;

// Redefine jsfunction
jsfunction = function() {
  old_jsfunction.apply(old_jsfunction, arguments);

  $("#divname").css({'width': '100%', 'position': 'relative'});
}; 
```

# mysql - 更新表上的警告 1292

> ID：14878188
> 
> 赞同：0
> 
> 时间：2013-02-14T15:25:21.950
> 
> 标签：mysql

我正在尝试使用以下查询更新表：

```
UPDATE test.t1
SET obrigatorios = (SELECT quantidade FROM test.tcur WHERE tipo = 3)
WHERE perfil IN (7, 11); 
```

或者这个查询，应该做同样的事情：

```
UPDATE test.t1 a, test.tcur b
SET a.obrigatorios = b.quantidade
WHERE a.perfil IN (7, 11)
AND b.tipo = 3; 
```

表 tcur 具有以下结构：

```
CREATE TABLE `tcur` (\
`quantidade` int(11) default NULL,\
`tipo` int(11) default NULL,\
`descritivo` varchar(12) default NULL\
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

表 t1 是这样的：

```
CREATE TABLE `t1` (\
`qtd` bigint(20) NOT NULL default '0',\
`qtd_vt_disp` int(11) NOT NULL default '0',\
`perfil` binary(11) default NULL,\
`obrigatorios` int(11) NOT NULL default '0'\
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

我收到数以万计的关于截断双精度的错误/警告 1292。哪里有问题？“截断不正确的 DOUBLE 值”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:25:21.950

当引擎必须转换数据类型并且由于它们的大小不同而发生一些精度损失时，会发生此错误。

在这种特殊情况下，字段的数据类型`perfil`是二进制的，应该是 int。

如果您遇到相同类型的警告“截断不正确的 DOUBLE 值”，请查找不匹配的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T12:43:23.843

对于它的价值，当我遇到类似问题时，我发现数据类型不是问题，它实际上是 MySQL UPDATE 语句的构造。尝试通过 MySQL 工作台手动进行更改，如果您可以手动更新，然后检查工作台如何构造必要的语句。

# javascript - 用户滚动时沿曲线路径移动元素

> ID：14878192
> 
> 赞同：6
> 
> 时间：2013-02-14T15:25:25.430
> 
> 标签：javascript, svg, scroll

我正在尝试制作一个页面，其中火箭遵循预定路径，当用户滚动时，该路径会蜿蜒向上（页面将在底部加载）。

我可以使用[jQuery.path](https://github.com/weepy/jquery.path)之类的东西并使用 SVG 的 animateMotion 沿路径为元素设置动画，但我无法完全弄清楚当用户滚动时元素将沿该路径移动的解决方案。

jQuery Scroll Path 并不是我想要的，因为它将元素移动到页面的中心。

我在[TEDxGUC](http://www.tedxguc.com/)网站上看到，当你向下滚动时，它们会沿着弯曲的路径移动苹果。我可以看到他们正在使用 Raphael.js 和“沿路径动画”扩展，但我仍然无法理解他们是如何实现它的——我还不是一个 JS 忍者。

任何指向正确方向的指针都将不胜感激！

**编辑**

对于仍然对这种事情感兴趣的人，我偶然发现了[Skrollr Path](https://github.com/Prinzhorn/skrollr-path)，它几乎完全符合我的要求：[例如](http://prinzhorn.github.io/skrollr-path/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T16:20:46.417

我是 www.tedxguc.com 网站的开发者。

关于我如何让动画与滚动配合使用，我认为您已经走在正确的道路上（双关语）。我只是将动画概念化为好像滚动条是视频播放器中的搜索栏。

所以我将页面的高度设置为动画的长度，这样我的元素每移动 1 个像素对应于动画中的 1 毫秒，就好像我在时间轴中移动一样。

[您会注意到homepage.js](http://www.tedxguc.com/js/homepage.js)文件末尾的动画设置代码。

在 makeAnim() 中你会发现很多类似这样的代码

```
setAnim(obj.apple,{0:{along:0}, 1000:{along:1}}, start+3200, 1000); 
```

这基本上做的是：设置苹果，使其从它的 0（路径的开始）移动到 1（路径的结束），并且它将在从动画的“开始”+一个滚动开始的 1000px 内这样做偏移 3200 像素。

我有点作弊并修复了代码以使其更易于理解。

这是早期开发概念的[jsfiddle](http://jsfiddle.net/Draz/R8Mxq/8/)，我希望我的评论有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:43:43.057

您必须创建采用 y 值并计算 x 的公式，但这就是我想出的...

[http://codepen.io/anon/pen/zCuEb](http://codepen.io/anon/pen/zCuEb)

HTML

```
<div id="oh" style="background-color:red;height:100px;width:100px;position:fixed"></div>
<div style="height:25000px;width:20px;background-color:#000033">&nbsp;</div> 
```

JS

```
var $w = $(window);
var $d = $('#oh');
$w.scroll(function(){
  $d.css('left',formula400())
});
function formula400(){
  return Math.sin($w.scrollTop()/100)*100
} 
```

# sql-server - SQL Server 2012 的 ASCMD

> ID：14878193
> 
> 赞同：1
> 
> 时间：2013-02-14T15:25:27.960
> 
> 标签：sql-server, sql-server-2012, sql-server-2012-datatools, ascmd

到目前为止，我使用 ascmd 对 SSAS 2008R2 执行了一些查询。我的公司开始安装一些新的 SSAS 2012 服务器，我想在这些新服务器上重复使用我的所有维护脚本。我在 SQL Server 2012 中找不到任何 ascmd 工具，在 Internet 上也找不到任何文档或亲属。

有没有人有这方面的一些信息？或者下载工具的链接？

当我尝试使用我的版本执行查询时，我收到以下消息：

“Microsoft (R) Analysis Services 2008 命令行工具版本 10.0.87.5 X86 版权所有 (C) 2008 Microsoft Corporation。保留所有权利。Ascmd：尝试模拟用户时出现异常：无法加载文件 o crosoft.AnalysisServices，版本 = 10.0.0.0 ，Culture=neutral，Publi 5dcd8080cc91' 或其依赖项之一。系统找不到绑定。Ascmd：执行失败：无法加载文件或程序集 'Microsof ices，Version=10.0.0.0，Culture=neutral，PublicKeyToken=89845dcd80 of它的依赖关系。系统找不到指定的文件。”

当我签入 C:\Windows\Assembly 时，我可以看到我拥有 11.0.0.0 版本。

我该如何处理？我无法使用 PowerShell 脚本...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:47:21.730

[您可以从此页面](http://www.microsoft.com/en-us/download/details.aspx?id=16978)下载 2008 R2 分析管理对象。这包括 10.0.0.0 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T06:10:47.620

从 microsoft samples 中获取旧的 ascmd 解决方案，删除旧的参考 dll 并添加新的，它将解决您的问题

# eclipse - 启动和创建 Java 项目时出现 Eclipse 错误

> ID：14878194
> 
> 赞同：1
> 
> 时间：2013-02-14T15:25:36.220
> 
> 标签：eclipse

在过去的几天里，我一直在 Eclipse 的奇怪行为上遇到一些麻烦。

我注意到的第一件事是我最近创建的 Java 项目不是在 Eclipse 中运行的。项目将无错误地编译，并且 .class 文件已创建并可以从命令行正常运行，但在 Eclipse 中点击运行或调试按钮根本不会产生任何操作。旧项目将运行得非常好。

然后错误开始出现。

我有时在启动时收到此错误： [启动错误](http://i.imgur.com/fAfBgJa.jpg)

每次我尝试创建新的 Java 项目时都会收到此错误： [create java project error](http://i.imgur.com/MW2cxSe.jpg)

这是日志文件的开头（这是 12000 行，如果你问我可以发布更多）：

```
!SESSION 2013-02-14 09:11:35.296 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.7.0_13
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86_64

This is a continuation of log file C:\Documents and Settings\team\workspace.metadata\.bak_0.log
Created Time: 2013-02-14 09:14:12.234

!ENTRY org.eclipse.e4.ui.workbench 4 0 2013-02-14 09:14:12.234
!MESSAGE Exception occurred while  unrendering:org.eclipse.e4.ui.model.application.ui.basic.impl.PartImpl@67f9dcb7 (elementId: org.eclipse.pde.runtime.LogView, tags: [View, categoryTag:General], contributorURI: null) (widget: null, renderer: null, toBeRendered: true, onTop: false, visible: true, containerData: null, accessibilityPhrase: null) (contributionURI: bundleclass://org.eclipse.ui.workbench/org.eclipse.ui.internal.e4.compatibility.CompatibilityView, object: null, context: null, variables: [], label: Error Log, iconURI: platform:/plugin/org.eclipse.ui.views.log//icons/eview16/error_log.gif, tooltip: , dirty: false, closeable: true, description: null)
!STACK 0
org.eclipse.e4.core.di.InjectionException: java.lang.NullPointerException
at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:63)
at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:859)
at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:839)
at org.eclipse.e4.core.internal.di.InjectorImpl.disposed(InjectorImpl.java:368)
at org.eclipse.e4.core.internal.di.Requestor.disposed(Requestor.java:127)
at org.eclipse.e4.core.internal.contexts.ContextObjectSupplier$ContextInjectionListener.update(ContextObjectSupplier.java:76)
at org.eclipse.e4.core.internal.contexts.TrackableComputationExt.update(TrackableComputationExt.java:107)
at org.eclipse.e4.core.internal.contexts.TrackableComputationExt.handleInvalid(TrackableComputationExt.java:70)
at org.eclipse.e4.core.internal.contexts.EclipseContext.dispose(EclipseContext.java:170) 
```

我尝试启动一个新的工作区，但没有成功。今天，我删除了 Java 和 Eclipse，并开始使用新的 Java JDK 7u13 和新的 Eclipse Juno 4.2.1 下载，但没有成功。我不知道我在这里做了什么。关于导致此问题的原因以及如何解决的任何想法？如果重要的话，我正在运行 Windows XP Professional x64 Edition。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:34:19.770

我总是在使用 64 位版本的 Java 时遇到问题。可能值得尝试 32 位安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T13:54:26.740

我有一个类似的问题，但出于不同的原因。看起来这是一个 32/64 位问题，因为我有 Windows 7 X64，我有 eclipse x64 和 JDK1.7 X64，JRE1.6 x32 已经安装。我最终发现我正在重新使用我在几周前设置的 Google Android ADT Bundle 创建的旧工作区目录，但它不喜欢那样。

所以我想我会分享那个小金块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T14:17:48.497

如果你有一个 Windows x64 不应该是 Eclipse 64 位的问题，你总是安装了 JDKx64。我建议您使用 Eclipse 64 位版本，因为您可以分配更多内存以防您有需要的项目。

# google-app-engine - GAE/NDB 的预期响应时间是多少？

> ID：14878196
> 
> 赞同：6
> 
> 时间：2013-02-14T15:25:44.250
> 
> 标签：google-app-engine, python-2.7, app-engine-ndb

我们目前正在构建一个小型且简单的中央 HTTP 服务，该服务将“外部身份”（如 facebook id）映射到“内部 (uu)id”，在我们所有的服务中都是唯一的，以帮助进行分析。

“我们的堆栈”（flask+postgresql）中的第一个原型在一天内完成。但由于我们希望服务（几乎）永远不会失败并自动扩展，因此我们决定使用 Google App Engine。

经过一周的阅读、尝试和基准测试后，出现了这个问题：

**在 App Engine（使用 NDB）上，哪些响应时间被视为“正常”？**

我们得到*的平均响应时间始终在 500 毫秒*以上，并且*在 90% 中远高于 1 秒*。

我在下面附上了我们代码的精简版本，希望有人能指出明显的缺陷。我们真的很喜欢自动缩放和分布式存储，但我们无法想象 500 毫秒真的是我们案例的预期性能。基于 sql 的原型响应速度更快（始终如一），使用免费、无缓存的 postgresql（即使使用 ORM）托管在一个 Heroku dyno 上。

我们尝试了以下代码的同步和异步变体，并查看了 appstats 配置文件。总是 RPC 调用（memcache 和数据存储）需要很长时间（50ms-100ms），因为总是有多个调用（例如 mc.get() + ds.get() + ds.set( ）写）。我们还尝试尽可能地推迟到任务队列，但没有明显的收获。

```
import json
import uuid

from google.appengine.ext import ndb

import webapp2
from webapp2_extras.routes import RedirectRoute

def _parse_request(request):
    if request.content_type == 'application/json':
        try:
            body_json = json.loads(request.body)
            provider_name = body_json.get('provider_name', None)
            provider_user_id = body_json.get('provider_user_id', None)
        except ValueError:
            return webapp2.abort(400, detail='invalid json')
    else:
        provider_name = request.params.get('provider_name', None)
        provider_user_id = request.params.get('provider_user_id', None)

    return provider_name, provider_user_id

class Provider(ndb.Model):
    name = ndb.StringProperty(required=True)

class Identity(ndb.Model):
    user = ndb.KeyProperty(kind='GlobalUser')

class GlobalUser(ndb.Model):
    uuid = ndb.StringProperty(required=True)

    @property
    def identities(self):
        return Identity.query(Identity.user==self.key).fetch()

class ResolveHandler(webapp2.RequestHandler):
    @ndb.toplevel
    def post(self):
        provider_name, provider_user_id = _parse_request(self.request)

        if not provider_name or not provider_user_id:
            return self.abort(400, detail='missing provider_name and/or provider_user_id')

        identity = ndb.Key(Provider, provider_name, Identity, provider_user_id).get()

        if identity:
            user_uuid = identity.user.id()
        else:
            user_uuid = uuid.uuid4().hex

            GlobalUser(
                id=user_uuid,
                uuid=user_uuid
            ).put_async()

            Identity(
                parent=ndb.Key(Provider, provider_name),
                id=provider_user_id,
                user=ndb.Key(GlobalUser, user_uuid)
            ).put_async()

        return webapp2.Response(
            status='200 OK',
            content_type='application/json',
            body = json.dumps({
                'provider_name' : provider_name,
                'provider_user_id' : provider_user_id,
                'uuid' : user_uuid
            })
        )

app = webapp2.WSGIApplication([
      RedirectRoute('/v1/resolve', ResolveHandler, 'resolve', strict_slash=True)
], debug=False) 
```

为了完整起见（几乎是默认的）app.yaml

```
application: GAE_APP_IDENTIFIER
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: .*
  script: main.app

libraries:
- name: webapp2
  version: 2.5.2
- name: webob
  version: 1.2.3

inbound_services:
- warmup 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:15:56.153

以我的经验，RPC 性能会按数量级波动，对于数据存储获取而言，在 5 毫秒到 100 毫秒之间。我怀疑这与 GAE 数据中心负载有关。有时它会变得更好，有时它会变得更糟。

你的操作看起来很简单。我预计对于 3 个请求，大约需要 20 毫秒，但最多可能需要 300 毫秒。不过，持续平均 500 毫秒听起来非常高。

ndb 在按 ID 获取对象时进行本地缓存。如果您正在访问相同的用户，那应该会启动，并且这些请求应该会更快。

我假设您正在对生产而不是 dev_appserver 进行性能测试。dev_appserver 性能不具代表性。

不确定您测试了多少次迭代，但您可能想尝试更大的数字，看看 500 毫秒是否真的是您的平均值。

当您在简单的 RPC 调用上被阻止时，您无法进行太多优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:14:07.193

我看到的第一个明显时刻：您真的需要针对每个请求进行事务处理吗？

我相信，除非您的大多数请求都创建新实体，否则最好在事务之外执行 .get_by_id() 。如果找不到实体，则开始交易，甚至更好地推迟实体的创建。

```
def request_handler(key, data):
  entity = key.get()
  if entity:
    return 'ok'
  else:
    defer(_deferred_create, key, data)
    return 'ok'

def _deferred_create(key, data):
  @ndb.transactional
  def _tx():
    entity = key.get()
    if not entity:
       entity = CreateEntity(data)
       entity.put()
  _tx() 
```

这应该为面向用户的请求提供更好的响应时间。

我看到的第二个也是唯一的优化是使用 ndb.put_multi() 来最小化 RPC 调用。

PS 不是 100% 确定，但您可以尝试禁用多线程 ( *threadsave: no* ) 以获得更稳定的响应时间。

# php - 如何使用定期计费功能设置贝宝自适应付款

> ID：14878199
> 
> 赞同：2
> 
> 时间：2013-02-14T15:25:55.410
> 
> 标签：php, api, paypal, paypal-adaptive-payments, recurring-billing

有没有关于如何使用定期计费设置 paypal 自适应支付 api 的教程？我到处搜索，但只找到了定期计费的 payflow 和 paypro。并且请不要将我链接/指向贝宝网站上的开发文档，这些文档并没有真正的帮助，因为它们太详细且太长了……更不用说没有真正显示任何代码示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T04:16:45.903

您可以将预批准功能与自适应付款一起使用来设置一种定期付款。预先批准是对代表发件人进行未来付款的批准。因此，您可以将系统设置为自动执行呼叫，例如 cron 作业等来为您处理付款。自适应支付指南中应该有这方面的信息。一些在线游戏网站使用此功能进行购买和订阅。

# javascript - 使用媒体查询的图标大小

> ID：14878200
> 
> 赞同：2
> 
> 时间：2013-02-14T15:25:58.680
> 
> 标签：javascript, css, media-queries

我正在开发一个在移动和桌面浏览器上运行的应用程序。我正在尝试找到可以修复我的图标大小的解决方案。我希望图标在桌面浏览器上很小，但在移动浏览器上更大。

媒体查询可以检测屏幕密度吗？如果可以，屏幕密度可以确定我的图标大小吗？

还有一件事：检测屏幕尺寸或密度并根据更好的选择调整图标是否更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:29:14.477

是的，有一个检测像素密度的媒体查询。这是一个例子：

```
@media (-webkit-min-device-pixel-ratio: 2), 
(min-resolution: 192dpi) { 
    /* Then you would change your background image and background image size here */
} 
```

[在 CSS-Tricks 的这篇文章中](http://css-tricks.com/snippets/css/retina-display-media-query/)还有大量信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:36:34.263

是针对设备尺寸还是像素密度的问题是棘手的：这将取决于每次的具体情况，没有什么可以说您不应该在您的网站中将两者结合起来。您想要涵盖所有内容的媒体查询是：

```
@media (min--moz-device-pixel-ratio: 1.5),
       (-o-min-device-pixel-ratio: 3/2),
       (-webkit-min-device-pixel-ratio: 1.5),
       (min-resolution: 1.5dppx) {

   /* your retina rules here */

} 
```

...如果您坚持使用 PNG 而不是 SVG 图形或图标字体，这可能是最有帮助的。我建议查看[retinafy.me](http://retinafy.me/) - 这是一个有用的资源（但不是免费的），这是代码的来源。

# android - android：远程服务与 sharedUserId？

> ID：14878210
> 
> 赞同：0
> 
> 时间：2013-02-14T15:26:17.307
> 
> 标签：android

这两种方法有什么不同：远程服务（[http://developer.android.com/reference/android/app/Service.html）vs](http://developer.android.com/reference/android/app/Service.html) sharedUserId（[http://developer.android.com/guide/topics/manifest/清单元素.html](http://developer.android.com/guide/topics/manifest/manifest-element.html)）？他们每个人的 adv/Disadv 是什么？

# c# - 在表单之间共享类

> ID：14878212
> 
> 赞同：2
> 
> 时间：2013-02-14T15:26:20.163
> 
> 标签：c#, .net

假设我想使用自定义类来存储用户设置，并使用 XML 序列化保存它。
当程序启动时，它会反序列化 XML 文件。我现在有一个包含所有用户设置的类。

我现在如何与我的应用程序中的所有其他表单共享这个类？
有没有比将它作为参数传递给构造函数更好的方法？

理想情况下，我会使用静态类，但它没有实例，因此它不可序列化。
我想要.NET 属性文件之类的东西，它可以在任何地方访问。
（不幸的是，这只允许对，这还不够好 - 因此我自己的 XML 文件）

编辑：

根据答案，我现在有这个：

```
[Serializable]
public sealed class UserSettings
{
    private static readonly UserSettings _instance = new UserSettings();
    private string _FirstName;
    private string _LastName;       

    public static UserSettings Instance
    {
        get
        {
            return _instance;
        }
    }

    static UserSettings()
    {            
    }

    private UserSettings()
    {
        //Constructor
    }

    public string FirstName
    {
        get { return _FirstName; }
        set { _FirstName = value; }
    }

    public string LastName
    {
        get { return _LastName; }
        set { _LastName = value; }
    }       
} 
```

我已将包含值的此类的一个实例序列化并保存到一个文件中。
我使用这段代码来加载它：

```
 private static void LoadUserSettings()
    {
        UserSettings us = UserSettings.Instance;

        IFormatter formatter = new BinaryFormatter();
        Stream stream = new FileStream(_AppSettingsFilePath, FileMode.Open, FileAccess.Read, FileShare.Read);
        us = (UserSettings)formatter.Deserialize(stream);
        stream.Close();
        //System.Windows.Forms.MessageBox.Show(us.FirstName + " " + us.LastName);
    } 
```

当我阅读 LoadUserSettings 函数中的属性（最后一行注释）时，它显示了已保存的值。

但是，当我在 Form_load 中运行此代码时，值是空的。（其实一切都是NULL）：

```
 LoadUserSettings();
       UserSettings us = UserSettings.Instance;                    
       MessageBox.Show(us.FirstName + " " + us.LastName); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:28:33.090

由于它代表逻辑上“全局”的状态，而不是应该允许作为多个实例存在的状态，因此您认为它应该是静态的是正确的。由于您需要对象的实际实例，这意味着适当的解决方案是使用单例。这将为您提供一个可以序列化的实例，但该实例可以在整个应用程序中公开，并且您可以确定永远只有一个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:29:45.797

是的，让它成为[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)：

```
public sealed class UserSettings
{
    private static readonly UserSettings _instance = new UserSettings();
    public static UserSettings Instance
    {
        get
        {
            return _instance;
        }
    }

    static UserSettings()
    {
    }

    private UserSettings()
    {
        // do constructor logic here
    }
} 
```

现在您可以像这样访问它：

```
UserSettings.Instance.SomeProperty 
```

# bash - [ncftp]如何将值传递给命令到 bash 脚本

> ID：14878213
> 
> 赞同：0
> 
> 时间：2013-02-14T15:26:25.847
> 
> 标签：bash, ftp

我有一个 bash 脚本，我想使用 ncftp 来做一些事情。如果我有这个：

```
#!/bin/sh
HOST='my_IP_FTP_HOST'
USER='username'
PASSWD='password'
ncftp -u $USER -p $PASSWD $HOST <<END_SCRIPT
pwd 
quit
END_SCRIPT 
```

我收到此错误：

```
Syntax error in parameters or arguments 
```

我不明白为什么。如果我只给它值而不是它的变量...

如果我启动

```
$ sh -x script.sh 
```

我得到：

```
+ HOST=$'xxx.x.xx.xx\r'
+ USER=$'username\r'
+ PASSWD=$'password\r'
+ ncftp -u $'username\r' -p $'password\r' $'xxx.x.xx.xx\r'
NcFTP 3.2.1 (Jul 29, 2007) by Mike Gleason (http://www.NcFTP.com/contact/).
Welcome to FTP server
Syntax error in parameters or arguments 
```

嗯.... \r 肯定会产生问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:21:37.400

您是否在 Microsoft Windows 上编辑此文件？它不起作用，因为原始文件使用 Windows 回车符，这些回车符被传递给变量，然后传递给 ncftp，然后停止。

**通过使用另一个文本编辑器**或使用**[dos2unix](http://sourceforge.net/projects/dos2unix/)**来修复它。理想情况下，您首先使用 dos2unix 一次，然后更改文本编辑器。

或者（但实际上，真的不推荐）您可以只解析变量并删除额外的*\r*，如下所示，尤其是在某些*输入读数*出现问题时，这里似乎并非如此。

```
HOST=${HOST%\\r}
USER=${USER%\\r}
PASSWD=${PASSWD%\\r} 
```

从 Windows 复制文本或在没有适当软件的情况下进行编辑时要小心。

# java - 如何去除 Java 字符串中重复的字符？

> ID：14878214
> 
> 赞同：2
> 
> 时间：2013-02-14T15:26:28.677
> 
> 标签：java, string

Java中是否存在一种方法可以让您将字符串转换`how________are_______you`为`how_are_you`，即在`_`重复时只保留一个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T15:30:09.227

使用正则表达式替换：

```
string.replaceAll("_+", "_") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:29:15.623

你可以用正则表达式解决它！匹配重复出现的`_`并将其替换为单个`_`. 我认为没有预定义的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:29:46.583

使用[**String#replaceAll(regex, str)**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

```
 String s="how__are__you";
    System.out.print(s.replaceAll("_+", "_")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:31:57.423

您可以使用 java 的 ReplaceAll() 函数。Java 拥有所有语言中最好的在线文档之一，我建议您去尝试一下。 [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll(java.lang.String) , java.lang.String)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T15:33:48.107

使用正则表达式

简单的方法

```
 str = str.replaceAll("_+", "_"); 
```

很有效的方法

```
str = str.replaceAll("_{2,}", "_"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T10:31:35.833

没有正则表达式，你可以使用像这样有点令人毛骨悚然的自写方法

```
private static String replaceLetters(String text, char rchar) {
     String newtext;
     for(int i=0;i<text.length;i++) {
       if(text.charAt(i)!=rchar) {
         newtext = newtext + text.charAt(i);
        }
       else {
        newtext = newtext + newtext.charAt(i);
        for(int j=i+1;j<text.length;j++) {
          if(text.charAt(j)!=rchar) {
            i = j;
            break;
            }
         }
      }
   }
   return newtext;
} 
```

抱歉有点老派；）

# python - 如何让我的程序利用制表符完成？

> ID：14878215
> 
> 赞同：9
> 
> 时间：2013-02-14T15:26:32.610
> 
> 标签：python, shell, command-line-interface, tab-completion

我注意到某些程序（例如 hg）允许用户使用制表符完成命令的特定部分。例如，如果在 hg 存储库工作目录中，我键入：

`hg qpush --move b8<TAB>`

它将尝试使用我的补丁队列中以“b8”开头的任何 mercurial 补丁来完成命令。

我想做的是在我的程序中模仿这种行为。也就是说，我有一系列命令依赖于某个目录中的文件，我希望能够在 shell 中提供制表符补全。是否有用于在 Ubuntu Linux 上提供此功能的 API（最好使用 python，因为这是我的脚本编写的）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T23:47:42.557

为此，您需要为您的 shell 编写制表符完成模块。大多数 Linux 发行版中的默认 shell 是`bash`，因此您应该编写一个完成脚本（通常是一个 shell 脚本）。编写脚本后，将其添加到`/etc/bash_completion.d/`. 这应该与您的程序一起分发（对于 Linux 发行版，包含在包中）。

Debian Administration 有[一个编写完成脚本的指南](http://www.debian-administration.org/article/317/An_introduction_to_bash_completion_part_2)。要在 Mac 上使用完成，请参阅[https://trac.macports.org/wiki/howto/bash-completion](https://trac.macports.org/wiki/howto/bash-completion)。

有关完成文件的示例，请查看[`bash-completion`来自 Debian 的项目](http://alioth.debian.org/projects/bash-completion/)（也在[Github 上](https://github.com/GArik/bash-completion)）。另请参阅[https://unix.stackexchange.com/questions/4738/an-easy-bash-completion-tutorial](https://unix.stackexchange.com/questions/4738/an-easy-bash-completion-tutorial)。

如果你使用[hack.augusto 链接到文档，用于编写](https://stackoverflow.com/a/14885791/319931)`zsh`完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:09:29.770

这就是[readline](http://docs.python.org/2/library/readline.html#module-readline)模块的用途。

实际上，readline 是一个常见的 C 库，因此它具有多种语言的绑定。我可以说，我玩得很开心。

享受 B)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T23:13:11.860

你可能想试试`zsh`shell，它有一个很棒的完成系统，支持大量的应用程序。

补全系统是用 shell 语言编写的，但如果你真的想使用 python，你可以从补全函数内部运行解释器。不利的一面是，如果您想为自己的软件编写完成，则需要阅读一些内容（例如[用户手册](http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Completion-System)和手册[页](http://linux.die.net/man/1/zshcompsys)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T00:31:20.747

查看 Python 库中“cmd”模块的来源。它支持命令完成。

# r - 使用 par 设置 png 绘图设备的绘图边距

> ID：14878217
> 
> 赞同：4
> 
> 时间：2013-02-14T15:26:35.863
> 
> 标签：r, dictionary, plot, png

我创建了巴西的合唱团。将绘图保存为 .png 时，绘图的上部和下部会丢失（覆盖）。这是保存情节的线条。

```
plot.new()
par(omi=c(0,0,0,0), mgp=c(0,0,0),mar=c(0,0,0,0) , family = "D")
par(mfrow=c(1,1),cex=1,cex.lab = 0.75,cex.main=0.2,cex.axis=0.2)
png(filename = "map_cons_g.png", width = 6,height = 6, units = "in", res = 600)
plot(c(-75,-35),c(0,-30),type="n",axes=FALSE,xlab="",ylab="",asp=1.2)
plot(Brazil,col=cols[Brazil$Cons.g_ri],add=TRUE,border="black",lwd=0.5)
dev.off() 
```

为了保存绘图而不丢失地图的上部和下部，我必须更改坐标以在底部和顶部添加空白（即用 c(5,-33) 替换 c(0,-30) ):

```
plot.new()
par(omi=c(0,0,0,0), mgp=c(0,0,0),mar=c(0,0,0,0) , family = "D")
par(mfrow=c(1,1),cex=1,cex.lab = 0.75,cex.main=0.2,cex.axis=0.2)
png(filename = "map_cons_g.png", width = 6,height = 6, units = "in", res = 600)
plot(c(-75,-35),c(5,-33),type="n",axes=FALSE,xlab="",ylab="",asp=1.2)
plot(Brazil,col=cols[Brazil$Cons.g_ri],add=TRUE,border="black",lwd=0.5)
dev.off() 
```

这在某种意义上是有效的，我可以看到完整的地图，但地图并没有使用图中的所有可用区域。保存绘图时，图的上下部分似乎有一些边距。我从来没有遇到过其他类型的情节的问题。

抱歉，我没有足够的“声誉”来发布图片来向您展示地图的外观。

知道如何解决这个问题吗？

**编辑：**

下面的评论让我更深入地研究了这个问题，我终于找到了解决办法。我很抱歉，因为我现在意识到我不了解问题的根源，因此没有尽我所能解释，

似乎 png 重置了绘图的外边距。因此，即使我设置了 omi=c(0,0,0,0)，这些值也不是 png 命令在保存绘图时使用的值。解决方案是在调用 png 后设置绘图参数，以便保存图形。

```
plot.new()
png(filename = "map_cons_g.png", width = 6,height = 6, units = "in", res = 600)
par(omi=c(0,0,0,0), mgp=c(0,0,0),mar=c(0,0,0,0) , family = "D")
par(mfrow=c(1,1),cex=1,cex.lab = 0.75,cex.main=0.2,cex.axis=0.2)
plot(c(-75,-35),c(5,-33),type="n",axes=FALSE,xlab="",ylab="",asp=1.2)
plot(Brazil,col=cols[Brazil$Cons.g_ri],add=TRUE,border="black",lwd=0.5)
dev.off() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-09-25T00:50:16.887

来自**详细**信息`?par`：

> 每个设备都有自己的一组图形参数。

因此，即使我在`par`( `omi = c(0,0,0,0)`) 中设置了绘图的外边距，但在保存绘图时，这些值被 in 的参数覆盖`png`。

解决方案是在调用`par` *后*设置边距参数`png`

```
plot.new()

# first open png device...
png(filename = "map_cons_g.png", width = 6,height = 6, units = "in", res = 600)

# ...then set par
par(omi = c(0,0,0,0), mgp = c(0,0,0), mar = c(0,0,0,0), family = "D")
par(mfrow = c(1, 1), cex = 1, cex.lab = 0.75, cex.main = 0.2, cex.axis = 0.2)

plot(c(-75, -35), c(5, -33),  type = "n", axes = FALSE, xlab = "", ylab = "", asp = 1.2)
plot(Brazil, col = cols[Brazil$Cons.g_ri], add = TRUE, border = "black", lwd = 0.5)
dev.off() 
```

# android - 如何将 ViewPager 放在 Fragment 中？

> ID：14878219
> 
> 赞同：0
> 
> 时间：2013-02-14T15:26:38.330
> 
> 标签：android, view, android-fragments

我有一个包含 3 个片段的应用程序。它是这样在xml中定义的。：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id = "@+id/activity_main_large"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" xmlns:tools="http://schemas.android.com/tools">

     <fragment
         android:id="@+id/menu_category_fragment"
         android:name="com.thesis.menubook.MenuCategory"
         android:layout_width="0dip"
         android:layout_height="match_parent"
         android:layout_weight="0.14"
         layout="@layout/activity_menu_category" />

     <fragment
         android:id="@+id/menu_fragment"
         android:name="com.thesis.menubook.MenuFragment"
         android:layout_width="0dip"
         android:layout_height="match_parent"
         android:layout_weight="0.71"
         layout="@layout/activity_menu_fragment" />

     <fragment
         android:id="@+id/orderlist_fragment"
         android:name="com.thesis.menubook.OrderListFragment"
         android:layout_width="167dp"
         android:layout_height="match_parent"
         layout="@layout/activity_order_list" />

</LinearLayout> 
```

我希望中间片段是“可滑动的”，用户将在其中翻页。所以`com.thesis.menubook.MenuFragment`会调用一个包含 View Pager 的布局

这是java文件：

```
package com.thesis.menubook;

import android.annotation.TargetApi;
import android.support.v4.app.Fragment;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class MenuFragment extends FragmentActivity {
    private MyAdapter mAdapter;
    private ViewPager mPager;

    static String [] menu_name = {"a", "b","c"};
    static String [] menu_description = {"0", "1", "2"};

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_menu_fragment);
        mAdapter = new MyAdapter(getSupportFragmentManager());

        mPager = (ViewPager) findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);
    }

    public static class MyAdapter extends FragmentPagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return 3;
        }

        @Override
        public Fragment getItem(int position) {
            switch (position) {
            case 0:
                return new ImageFragment(R.drawable.caesar_salad,menu_name[0], menu_description[0]);
            case 1:
                return new ImageFragment(R.drawable.albondigas_pasta,menu_name[1], menu_description[1]);
            case 2:
                return new ImageFragment(R.drawable.salmon_entrada,menu_name[2], menu_description[2]);
            default:
                return null;
            }
        }
    }
} 
```

这是定义 viewpager 的 MenuFragment 的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:layout_width="match_parent"
    android:layout_height="match_parent" android:gravity="bottom|top" xmlns:android="http://schemas.android.com/apk/res/android" android:paddingLeft="16dp" android:paddingRight="16dp" android:paddingTop="16dp">

    <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

</RelativeLayout> 
```

这是 ImageFragment 类：

```
package com.thesis.menubook;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class ImageFragment extends Fragment {

      private  int imageResourceId;
      private String name;
      private String namedescription;

    public ImageFragment(int imageResource, String name2, String description) {
        this.imageResourceId = imageResource;    
        this.name = name2;
        this.namedescription = description;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.e("Test", "hello");
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.layout_menu, container, false);

        RelativeLayout layout = (RelativeLayout) view.findViewById(R.id.main_layout);
        layout.setBackgroundResource(imageResourceId);
        TextView tv = (TextView) view.findViewById(R.id.menu_name);
        tv.setText(name.toString());
        TextView tv2 = (TextView) view.findViewById(R.id.menu_description);
        tv2.setText(namedescription.toString());

        Button button = (Button) view.findViewById(R.id.add);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

            TextView tx = (TextView) v.findViewById(R.id.menu_name);
            String mname = tx.toString();   

            TextView tx1 = (TextView) v.findViewById(R.id.menu_description);
            String mdesc = tx1.toString();

            EditText et = (EditText) v.findViewById(R.id.editText1);
            String q = et.toString();

            }
        });

        return view;

}

} 
```

这是寻呼机内容的 ImageFragment 的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:gravity="top|bottom|center_vertical" 
    android:background="@drawable/caesar_salad" 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:paddingLeft="16dp" 
    android:paddingRight="16dp" 
    android:paddingTop="16dp"
    android:id="@+id/main_layout"
    >

    <TextView 
        android:id="@+id/menu_name" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="@string/menu_name" 
        android:textSize="40sp"
        android:background="#2f000000" android:textColor = "@android:color/white"/>

    <TextView 
        android:id="@+id/menu_description" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_below="@id/menu_name"    
        android:background="#2f000000"  
        android:textColor="@android:color/white" 
        android:textSize="20sp" 
        android:textStyle="italic" 
        android:typeface="sans"
        android:text ="@string/menu_description"
        android:layout_margin="10dp">

    </TextView>

    <Button 
        android:id="@+id/add" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_alignBaseline="@+id/editText1" 
        android:layout_toRightOf="@+id/editText1" 
        android:layout_centerHorizontal="true" 
        android:text="@string/add" 
        android:textColor="@android:color/white"/>
    <EditText 
        android:id="@+id/editText1" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_alignBottom="@+id/quantity" android:layout_alignTop="@+id/quantity" android:layout_centerHorizontal="true" android:layout_toRightOf="@+id/quantity" android:layout_marginLeft="5dp" android:background="@android:color/white" android:ems="2" android:inputType="number">
        <requestFocus />
    </EditText>

    <TextView 
        android:id="@+id/quantity" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_alignLeft="@+id/menu_description" 
        android:layout_alignParentBottom="true" 
        android:layout_marginBottom="20dp" 
        android:background="#2f000000" 
        android:text="@string/quantity" 
        android:textColor="@android:color/white" 
        android:textSize="25sp" 
        android:textStyle="italic" 
        android:typeface="sans"/>
    <Button 
        android:id="@+id/viewOrdersList" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_alignBaseline="@+id/editText1" 
        android:layout_toRightOf="@+id/add" 
        android:layout_centerHorizontal="true" 
        android:text="@string/orderlist" 
        android:textColor="@android:color/white"/>

</RelativeLayout> 
```

所以从我的角度来看，我认为它会很好，因为我认为它具有良好的层次结构？

但我收到这样的错误：

```
02-14 23:22:13.499: E/AndroidRuntime(399): Caused by: java.lang.ClassCastException: com.thesis.menubook.MenuFragment cannot be cast to android.app.Fragment 
```

您不能将 Viewpager 投射到片段中吗？

这是我的 LogCat ：

```
02-14 23:22:13.499: E/AndroidRuntime(399): FATAL EXCEPTION: main
02-14 23:22:13.499: E/AndroidRuntime(399): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.thesis.menubook/com.thesis.menubook.MenuMain}: android.view.InflateException: Binary XML file line #16: Error inflating class fragment
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.app.ActivityThread.access$1500(ActivityThread.java:122)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.os.Looper.loop(Looper.java:132)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.app.ActivityThread.main(ActivityThread.java:4025)
02-14 23:22:13.499: E/AndroidRuntime(399):  at java.lang.reflect.Method.invokeNative(Native Method)
02-14 23:22:13.499: E/AndroidRuntime(399):  at java.lang.reflect.Method.invoke(Method.java:491)
02-14 23:22:13.499: E/AndroidRuntime(399):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
02-14 23:22:13.499: E/AndroidRuntime(399):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
02-14 23:22:13.499: E/AndroidRuntime(399):  at dalvik.system.NativeStart.main(Native Method)
02-14 23:22:13.499: E/AndroidRuntime(399): Caused by: android.view.InflateException: Binary XML file line #16: Error inflating class fragment
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
02-14 23:22:13.499: E/AndroidRuntime(399):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:223)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.app.Activity.setContentView(Activity.java:1780)
02-14 23:22:13.499: E/AndroidRuntime(399):  at com.thesis.menubook.MenuMain.onCreate(MenuMain.java:13)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
02-14 23:22:13.499: E/AndroidRuntime(399):  ... 11 more
02-14 23:22:13.499: E/AndroidRuntime(399): Caused by: java.lang.ClassCastException: com.thesis.menubook.MenuFragment cannot be cast to android.app.Fragment
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.app.Fragment.instantiate(Fragment.java:493)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.app.Fragment.instantiate(Fragment.java:468)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.app.Activity.onCreateView(Activity.java:4132)
02-14 23:22:13.499: E/AndroidRuntime(399):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:664)
02-14 23:22:13.499: E/AndroidRuntime(399):  ... 20 more
02-14 23:22:13.979: D/dalvikvm(399): GC_CONCURRENT freed 328K, 6% free 7419K/7879K, paused 9ms+41ms
02-14 23:22:22.750: I/Process(399): Sending signal. PID: 399 SIG: 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:33:30.183

您的 ViewPager 是您的一部分，`ImageFragment`而不是您的`MenuFragment`( `FragmentActivity`)

你必须设置你`ViewPager`的`ImageFragment`（在你的 onCreateView 和你的充气机）

移动`ViewPager`到`ImageFragment`

```
private ViewPager mPager; 
```

并用你的充气机设置它：

```
mPager = (ViewPager) view.findViewById(R.id.pager); 
```

评论后编辑：不要更改您的 XML

*   你有一个 FragmentActivity，它的布局是你发布的第一个 XML（3 个片段所在的位置）===>**所以 ViewPager 不在这里**
*   每个 Fragment 类都通过 onCreateView 处理自己的布局，并返回要显示的 Fragment ===>**这是 ViewPager 所在的位置**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:33:59.107

```
 <fragment
         android:id="@+id/menu_fragment"
         android:name="com.thesis.menubook.MenuFragment"
         android:layout_width="0dip"
         android:layout_height="match_parent"
         android:layout_weight="0.71"
         layout="@layout/activity_menu_fragment" /> 
```

com.thesis.menubook.MenuFragment 扩展了 FragmentActivity 。这是一个活动，而不是片段。这就是你得到 ClassCastException 的原因。

# c# - 从列表中获取不同的参数

> ID：14878220
> 
> 赞同：2
> 
> 时间：2013-02-14T15:26:42.323
> 
> 标签：c#, list

我有一个`CarData`具有以下属性的对象：
`PrimaryKey` `Make` `Model` `Year` `Drivetrain` `Country`

我`CarData`在 List 中有大约 1000 个这样的对象：
`List<CarData> CarObjects`

有没有一种简单的方法来获取不同`Make`s 的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:28:19.930

```
var makes = CarObjects.Select(car => car.Make).Distinct(); 
```

这会将列表从一个列表转换`CarData`为一个 s 列表`Make`，然后只找到新列表的不同值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:29:34.913

您可以使用 Linq：

```
CarObjects.Select ( c => c.Make ).Distinct().ToList() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:28:34.650

```
var makeList = CarObjects.Select(a => a.Make).Distinct(); 
```

或者

```
List<MakeEnum> = CarObjects.Select(a => a.Make).Distinct().ToList(); 
```

作为一个额外的建议，您可能需要考虑`Make`成为一个枚举，因为（可能）有有限（而且相当少）数量的可能的汽车品牌，而不是将它们堆积到`Strings`. （你没有提到什么样的财产`Make`是，所以也许你已经这样做了）。

# javascript - 创建随机树？

> ID：14878228
> 
> 赞同：7
> 
> 时间：2013-02-14T15:27:07.810
> 
> 标签：javascript, python-3.x, algorithm, graph, graph-theory

创建随机树（或满足树属性的邻接矩阵）的好方法是什么？我目前有以下要返回的数据结构，但我想随机生成它。有什么建议么？

```
 return [{
        Source: "A1",
        Target: "A2",
    }, {
        Source: "A2",
        Target: "A3",
    }, {
        Source: "A1",
        Target: "A4",
    }, {
        Source: "A4",
        Target: "A6",
    }, {
        Source: "A4",
        Target: "A7",
    }, {
        Source: "A3",
        Target: "A8",
    }, {
        Source: "A3",
        Target: "A5",
    }]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T15:44:23.743

一棵有n个节点的树可以用n-2个整数的序列唯一表示（范围为[0, n-1]）。这称为[Prüfer 序列](http://en.wikipedia.org/wiki/Pr%C3%BCfer_sequence)。

创建一个随机序列应该没问题。然后你只需要将序列转换为你的树结构就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-11-27T23:28:20.443

在上述想法的基础上，我们可以生成一个 20 节点标记的随机树（在 中`python`）：

1.  从随机生成的长度为 18 的序列开始，每个元素从集合 {1,2,...,20} 中选择。
2.  使用生成的字符串作为 20 个顶点上完整图 K20 的生成树的 Prufer 序列，并使用以下算法（从[此处](http://www-math.ucdenver.edu/%7Ewcherowi/courses/m4408/gtaln7.html)）生成相应的标记树（因为始终存在 1-1 对应关系）。

[![在此处输入图像描述](../Images/54444210757a85d65f3c83a572c0dc1f.png)](https://i.stack.imgur.com/Q4Feb.png)

下一个代码片段实现了上述算法，以在给定 prufer 序列的情况下生成标记树（通过计算边）：

```
def get_tree(S):
    n = len(S)
    L = set(range(1, n+2+1))
    tree_edges = []
    for i in range(n):
        u, v = S[0], min(L - set(S))
        S.pop(0)
        L.remove(v)
        tree_edges.append((u,v))
    tree_edges.append((L.pop(), L.pop()))
    return tree_edges 
```

现在，我们总是可以随机生成一个 prufer 序列（长度为 n-2），随后生成相应的生成树（在 n 个顶点上），它可以作为我们的随机树（可以认为是从n^(n-2) 生成树的 Kn)。

```
n = 20 # Kn with n vertices
N = 25 # generate 25 random trees with 20 vertices (as spanning trees of K20)
for i in range(N):
    S = np.random.choice(range(1,n+1), n-2, replace=True).tolist()
    T_E = get_tree(S) # the spanning tree corresponding to S
    # plot the tree generated (with `networkx`, e.g.,) 
```

下一个动画展示了一些这样随机生成的带有 20 个节点的标记树。

[![在此处输入图像描述](../Images/24f454ec7d2ce0a5d95b3ce76b1c5808.png)](https://i.stack.imgur.com/hfGIL.gif)

# c++ - 在 Windows 中从源代码构建 PyV8（一个 C++/Python 项目）

> ID：14878231
> 
> 赞同：0
> 
> 时间：2013-02-14T15:27:16.527
> 
> 标签：c++, python, boost-python

您如何开始运行（和调试）C++/Python 组合项目？

到目前为止，我已经从基础开始：

1.  从源代码检查项目 ( [http://code.google.com/p/pyv8/source/checkout](http://code.google.com/p/pyv8/source/checkout) )
2.  将 helloworld.py 示例复制到带有 PyV8 的目录中，以便它可以导入 PyV8。

当然，这不起作用：

```
Traceback (most recent call last):
  File "helloworld.py", line 4, in <module>
    import PyV8
  File "C:\Users\Default User\Documents\pyv8-read-only\PyV8.py", line 32, in
<module>
    import _PyV8
ImportError: No module named _PyV8 
```

下一步*可能*是编译 cpp 文件并以某种方式将它们作为库提供给 Python，但我不确定如何从命令行执行此操作。似乎有一个 VS 项目，但我没有 Visual Studio。

（如果有人也能弄清楚如何在 Eclipse 中调试 C++ 和 Python 部分，那就**更棒了）**

帮助！谢谢。

# c# - 从另一台机器调用 Web 服务

> ID：14878232
> 
> 赞同：3
> 
> 时间：2013-02-14T15:27:17.363
> 
> 标签：c#, web-services

这是我的问题：我需要从 HostB 上的 Web 浏览器调用 HostA 上托管的 Web 服务。我在 HostA 上创建了一个 Web 服务，我用 F5 启动它，这是本地 url：

```
http://localhost:55432/Service1.svc 
```

在 HostB 上，我使用相同的 url 更改 localhost 和 HostA IP（可ping通）。但它不起作用。页面返回一个`"Unable To Connect to IP-Address".`

我不认为这是一个代码问题，但它看起来像一个连接/安全问题。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:51:32.650

默认情况下，Visual Studio Web 服务器（Cassini 用于较旧的实现，IIS express 用于较新的实现）甚至不绑定到您的网络适配器的 IP 地址，而只绑定到 localhost。因此，默认情况下，它们不接受远程连接。

如果您使用的是 Cassini，可以参考[如何在局域网中远程访问 cassini 服务器进行演示？](https://stackoverflow.com/questions/1533574/)了解更多信息。

IIS Express 的处理方式不同，如[IIS Express enable external request](https://stackoverflow.com/questions/3313616)中所示。

# apache - nginx 反向代理到 apache 服务器 - 只满足 nginx 转发的请求

> ID：14878234
> 
> 赞同：0
> 
> 时间：2013-02-14T15:27:31.887
> 
> 标签：apache, nginx, reverse-proxy

有一个关于这叫什么的问题，如果它甚至可能......

我在 nginx 服务器上有我的主要应用程序。我的博客位于一个独立的 apache 服务器上，以确保安全。两台服务器都有不同的IP。

我正在`domain.com/blog`向 wordpress apache 服务器反向代理请求以获取响应。有没有办法将 apache .conf 设置为仅满足通过 nginx 服务器代理的请求？我不希望有人能够直接访问 apache/wordpress ip 地址并运行应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:45:45.487

我认为这会做到：

```
<Directory /mydirectory>

    Order Allow,Deny

    Allow from 0.0.0.0 #ip
    Allow from 127.0.0.0/8

</Directory> 
```

# wpf - 隐藏从代码创建的 Listbox ScrollBar

> ID：14878236
> 
> 赞同：1
> 
> 时间：2013-02-14T15:27:35.307
> 
> 标签：wpf, vb.net, xaml

我有这段代码可以在后面的 Menu.xaml 代码（Menu.xaml.vb）上创建一个列表框：

```
 Dim mm As New ListBox()
            AddHandler mm.SelectionChanged, AddressOf Me.ListBox_SelectionChanged

            mm.FontSize = 20
            Dim nn As New ListBoxItem
            nn.Content = "NOTIFICATIONS:"
            nn.Foreground = Brushes.White
            nn.Background = Brushes.DarkSlateBlue
            nn.FontSize = 44
            nn.FontWeight = FontWeights.Bold

            mm.Items.Add(nn) 
```

现在我想禁用滚动，或者在其他情况下隐藏滚动条，但是如果我检查 mm 属性，则没有对 Scroll 的引用

任何帮助或线索？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:30:16.433

```
ScrollViewer.SetHorizontalScrollBarVisibility(mm, ScrollBarVisibility.Disabled);
ScrollViewer.SetVerticalScrollBarVisibility(mm, ScrollBarVisibility.Disabled); 
```

# windows - 为什么我在 Windows 上看不到服务的内存/CPU 使用情况？

> ID：14878239
> 
> 赞同：3
> 
> 时间：2013-02-14T15:27:38.503
> 
> 标签：windows, service, internals

在 Windows 上，您可以看到拉起任务管理器或`Get-Process`在 powershell 中获取正在运行的进程列表以及它们的内存和 cpu 使用情况。

您还可以（在 Windows 8 或`Get-Service`powershell 中）查看所有正在运行的服务。然而，对于服务，您没有得到任何这些数字。

从我的开发人员的角度来看，这似乎总是有点奇怪。当然，一个服务需要更多的部署工作，并且编码和调试很尴尬，但除此之外它只是一个与其他程序相同的程序。

我确信服务没有这些数字是有充分理由的，这可能与 Windows 运行服务的方式有关。那是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:33:54.753

有一个服务宿主进程“svchost.exe”可以启动/处理多个服务。由于资源消耗通常由操作系统在进程级别测量，因此由同一主机进程启动的服务都将显示为该进程的使用情况。

如果您查看控制面板的“服务”区域并查找启动服务的程序，您会发现大多数 Windows 服务都使用具有不同参数的“svchost.exe”来启动它。

任务管理器显示 svchost.exe 的多个实例，因此可以将特定服务隔离到一个 svchost.exe 实例，但您需要知道*哪个*实例只为感兴趣的服务提供服务。您可以使用 PowerShell 通过 svchost.exe 启动服务，但要挂在进程 ID 上，然后在任务管理器中添加进程 ID 列，以便查看内存/CPU 使用情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-06T02:19:02.253

虽然我还没有找到一种方法来查看任何单个服务的内存使用情况，但您可以通过`tasklist /svc`在命令行中使用来查看每个 svchost 实例中正在运行的服务，以及每个单个 svchost 的内存使用情况查看进程 ID。

# mysql - 带有条件 OR 的 MYSQL 左连接

> ID：14878243
> 
> 赞同：3
> 
> 时间：2013-02-14T15:27:51.250
> 
> 标签：mysql

好的，我对 SQL 的使用效率很高，我尝试在左连接中使用 OR 语句，发现它不起作用。

我这样做的原因是因为我有来自两个表的两列，如果其中一个返回 NULL，我试图使用它们来连接。我有两张桌子 - 事件和季节。每个表都有一个赞助商 ID 列，我用它来加入赞助商表。这背后的原因是因为有时赞助单个赛事而不是整个赛季或其他方式。

我的问题是我能做到这一点的最好方法是什么。我的原始查询与此不同，但它的概念相同（除了它不会从每个表中获取每一列）。

```
SELECT sp.*, re.*, ev.*, se.* 
FROM events ev 
INNER JOIN seasons se ON se.season_id=ev.event_sid 
INNER JOIN results re ON ev.event_id=re.results_eid 
LEFT JOIN sponsors sp ON ev.event_sponsor=sp.sponsor_id 
```

最后我试着继续`OR se.season_sponsor=sp.sponsor_id`

最终，我尝试使用 ev.event_sponsor 或 se.season_sponsor 加入赞助商表。任何帮助深表感谢。我做了一些研究，但找不到我想要完成的事情的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:34:05.167

尝试：

```
SELECT sp.*, re.*, ev.*, se.* 
FROM events ev 
INNER JOIN seasons se ON se.season_id=ev.event_sid 
INNER JOIN results re ON ev.event_id=re.results_eid 
LEFT JOIN sponsors sp ON COALESCE(ev.event_sponsor,se.season_sponsor)=sp.sponsor_id 
```

# css - 在 Firefox 和 IE9+ 上溢出

> ID：14878247
> 
> 赞同：2
> 
> 时间：2013-02-14T15:28:11.200
> 
> 标签：css, html, internet-explorer, firefox

我在固定位置有一个红色 div：顶部和底部是固定的。

这个div包含一个表格，其中一个单元格包含一个可滚动的div，这样内容就不会溢出红色的div。

在 Chrome 上看起来像这样：

![在此处输入图像描述](../Images/bd141f1de0f2c3a009d6c8aee6419895.png)

但在 Firefox 上，内容会增长并溢出红框：

![在此处输入图像描述](../Images/aa8e53355051cd0abbe6ab729b5d6954.png)

这是我的 HTML：

```
<div id=a>
    <div id=b>
        <table id=c border=1>
            <tr><th height=20 width=20>
                <input type=button id=but value="Fill cell">
            </th><th>A</th></tr>
            <tr><th>dataname</th>
                <td><div id=val class=scrollable>cell content</div></td>
            </tr>
        </table>
    </div>
</div> 
```

和 CSS ：

```
#a {
   position:fixed; top:20px; left:20px; bottom:50px;width:200px;
   background:red;
}
#b { height:100%; }
#c { width:100%; height:100%; }
.scrollable {
    width:100%; height:100%;
    overflow-y:auto;
} 
```

这是测试的小提琴：http: [//jsfiddle.net/xusqc/](http://jsfiddle.net/xusqc/)

我建议您在提交答案之前在 FF 上测试您的提案。

如何修复我的代码以在 Firefox 和 IE9+ 上具有我现在在 Chrome 上的行为？

请注意，表格第一行的高度可能会在我的应用程序中动态变化。如果我的数据表有更多的行和单元格，则该解决方案必须适用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:27:05.887

由于我找不到跨浏览器的纯 HTML/CSS 解决方案，所以我不得不使用一些 JavaScript（和 jQuery，但如果我的单元格中没有很多与 jQuery 绑定的事件处理程序，则可以不用它来完成）。

这个想法是清空包含`.scrollable`div 的单元格，计算它们的高度，重新填充单元格，然后将高度设置为固定。

这是我写的函数：

```
function resetScrollableHeights(){
    $sp = $('.scrollable').closest('td'), heights = [], contents = [];
    $sp.each(function(){
        $(this).css('height', 'auto'); // without this, window shrinking would be badly handled
        contents.push($('.scrollable', this).detach());  // let's empty all scrollables
    });
    $sp.each(function(){ //now store the heights
        heights.push($(this).height());
    });
    $sp.each(function(){ // refill the scrollables and fix the heights
        $(this).append(contents.shift()).css('height', heights.shift());
    });
} 
```

调整窗口大小时调用该函数：

```
$(window).resize(resetScrollableHeights); 
```

`.scrollable`并且当div的内容发生变化时也必须调用它。

我在 Chromium/Ubuntu、Chrome/Android、Firefox/Ubuntu 和 IE9/Win7 上对其进行了测试。由于它在基于 WebKit 的浏览器上毫无用处，我没有任何纯 HTML/CSS 错误，因此可以通过一些检测将其停用，但我更喜欢我的代码不受浏览器检测的影响。

[示范](http://jsfiddle.net/dystroy/VPaQE/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T15:51:42.547

1.  将 更改`<td>`为`<td class="scrollwrap">`，包含您的目标 div 的那个。
2.  更新你的 CSS：

：

```
 .scrollwrap { position:relative; }
 .scrollable {
     position:absolute; width:100%; height:100%; top:0; left:0; right:0; bottom:0;
     overflow:auto;
 } 
```

但请注意：

*   `height:100%`仅适用于父母也有特定身高的情况，并不总是适用于计算出的身高；
*   在元素上使用`left`&`right`或`top`&时，某些浏览器无法计算宽度和高度`bottom``position:absolute`
*   `overflow-y`或`overflow-x`有一些使用限制。

# c++ - c++中的前向声明VS编译顺序错误，以避免递归头包含

> ID：14878251
> 
> 赞同：0
> 
> 时间：2013-02-14T15:28:16.560
> 
> 标签：c++, forward-declaration

我正在处理由大量 .h 和 .c 文件组成的 c++ 大代码。

主要问题是由一对应该相互链接的类引起的。由于软件架构中的声明需要，第一个类（命名为 A）在“上层”类中初始化。

所以我们得到了类似的东西：

```
#include A.h
class mainClass{
...
A a;
...
} 
```

啊看起来像：

```
#ifndef A_H
#define A_H

#include B.h
class A{
A();
fooA();
...
private:
B b;
...   
}
#endif 
```

A.cpp 看起来像：

```
#include B.h
#include A.h
...
A::A(){
...
b(this) //here I get the first error that follows
...
}
A::fooA(){//do somthing} 
```

为了避免在第二个类中包含相互标题（让它成为 B），我使用了前向声明和指向 A 类的指针 var。

Bh 看起来像：

```
#ifndef B_H
#define B_H

class A; //Forward declaration to A
class B{
B()
B(A* const t)
fooB();
A* a;   //pointer to A object
} 
```

B.cpp 看起来像：

```
#include B.h  

B::B(){
//default constructor. Do Nothing
}
B::B(A* const t){
  this->a=t //constructor that set the pointer to the object of type A
}

B::fooB(){
   a->fooA(); //here i get the second error that follows
} 
```

现在，如果在我的 Makefile 中我在 B 之前链接 A 我得到编译错误：

```
//First error. See code above for line numbers
error: no match for call to ‘(B) (A* const)’ 
```

另一方面，如果我在 A 之前链接 B 我得到编译错误：

```
//Second error. see code above for line numbers
error: invalid use of incomplete type ‘struct A’
_B.h:'line of the forward declaration': error: forward declaration of ‘struct A’ 
```

我必须管理我对 c++ 很陌生，所以我不明白我错在哪里。

**编辑**

现在我正在使用解决方案：

1.  使用包括警卫
2.  前向声明 A 类，并且不要在 Bh 中包含 Ah
3.  在 A.cpp 和 B.cpp 中同时包含 Bh 和 Ah。总是在 Ah 之前包含 Bh

但我得到同样的错误：

`error: no match for call to ‘(B) (A* const)'`

会不会是构造函数重载问题？如果我删除线

`b(this)`

编译工作正常。

**解决了**

如果 a 使用帮助函数在 B 中设置变量 A* a，则使用构造函数在编译期间一切正常。也许我需要更好地理解 C++ 中的构造函数重载。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:32:46.037

尝试在 B.cpp 中包含“Ah”！

当您需要使用 B.cpp 中的 A 时，这将解决您的“A”类型。只要确保你什么都不做，只在 Bh 中保留一个指向 A 的指针/引用，并在 B.cpp 中对 A 进行所有实际工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:43:37.970

首先 - 遵循“us2012”的想法并使用包含警卫！

然后 - 更改前向声明：

啊：

```
#ifndef A_H
#define A_H
class B;
class A{
   A();
   fooA();
   ...
private:
   B b;
   ...   
}
#endif 
```

并在 A.cpp 中包含 Bh

在 Bh 中，您再次包含 Ah - 但包含警卫应防止错误：

```
#ifndef B_H
#define B_H

#include "A.h"
class B{
  B()
  B(A* const t)
  fooB();
  A* a;   //pointer to A object
}
#endif 
```

我没有测试过它......但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:01:23.763

1.  使用包括警卫
2.  前向声明 A 类，并且不要在 Bh 中包含 Ah
3.  在 A.cpp 和 B.cpp 中同时包含 Bh 和 Ah。总是在 Ah 之前包含 Bh

# javascript - 如何向 FlexSlider 添加多行支持？

> ID：14878253
> 
> 赞同：1
> 
> 时间：2013-02-14T15:28:20.813
> 
> 标签：javascript, jquery, flexslider

我在我的 Wordpress 网站上使用[FlexSlider 。](http://www.woothemes.com/flexslider/)一切运作良好。但我希望我的画廊可见 2 行。我搜索了它，但没有找到解决方案。

这是我的 flexslider.js：[http ://pastebin.com/3YgKEFB4](http://pastebin.com/3YgKEFB4)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-20T18:07:38.787

试试这种方法。我已经尝试过了，它对我有用:)

```
function make2Rows(iWidth) {
    var iHeight = parseFloat($('.flexslider .slides > li').height());
    $('.alliance-list .slides > li').css('width', iWidth+'px');
    $('.alliance-list .slides > li:nth-child(even)').css('margin', iHeight+'px 0px 0px -'+iWidth+'px');
}

$(window).load(function() {
    var itemCnt = 5; // this will be the number of columns per row
    var iWidth = parseFloat($('.flexslider').width() / itemCnt);
    $('.flexslider').flexslider({
        animation: "slide",
        slideshowSpeed: 1000,
        animationSpeed: 300,
        animationLoop: false,
        directionNav: false,
        slideshow: false,
        touch: true,
        itemWidth: iWidth,
        minItems: itemCnt,
        maxItems: itemCnt,
        start: make2Rows(iWidth)
    });
}); 
```

它适用于 2 行。它定义了一个为偶数幻灯片添加边距的函数，以便它们位于奇数幻灯片之下。此解决方案的来源在这里：

[http://paulgonzaga.blogspot.com.es/2014/02/how-to-create-multiple-row-carousel-on.html?m=1](http://paulgonzaga.blogspot.com.es/2014/02/how-to-create-multiple-row-carousel-on.html?m=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T19:46:11.243

创建两个单独的滑块，并在 Javascript 中初始化它们的位置使用 before 和 directionNav 参数使它们一起工作，就好像它们是一个单独的两行滑块一样。这是一个例子：

```
 $('#slider-row-1').flexslider({
    animation: "slide",
    animationLoop: true,
    before: function(slider){
        $('#slider-row-2').flexslider(slider.animatingTo);
    }, // animates second row in sync with first row
    controlNav: false,
    directionNav: true, // shows navigation arrows
    itemWidth: 210,
    itemMargin: 5,
    minItems: 4,
    maxItems: 4,
    slideshow: false
  });

  $('#slider-row-2').flexslider({
    animation: "slide",
    animationLoop: true,
    controlNav: false,
    directionNav: false, // hides navigation arrows
    itemWidth: 210,
    itemMargin: 5,
    minItems: 4,
    maxItems: 4,
    slideshow: false
  }); 
```

然后更新您的样式，使其看起来像一个滑块：

```
#slider-row-1 .flex-direction-nav a {
    top: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T16:29:20.330

flexslider 不支持多行。您要么必须自己编写代码，要么让别人为您添加功能

# jquery - ajax注入新内容时jQuery自动滚动页面

> ID：14878260
> 
> 赞同：1
> 
> 时间：2013-02-14T15:28:29.503
> 
> 标签：jquery

**问题**

我正在构建一个能够添加新项目的订单。每个项目行由数量、单价、描述和总计等内容组成。每次您想添加一个新项目时，您单击一个操作，并在原始项目下方插入一个新行，其中包含一组空白字段。我面临的问题是当浏览器包含滚动条并且项目靠近屏幕底部时。添加新项目时，新项目会出现在视图下方，要求用户必须手动滚动页面。

**我在寻找什么。**

我正在寻找一个 jquery 解决方案，

*   1）检测视图中上一个项目的位置。
*   2）通过ajax将新项目插入页面后，对页面进行漂亮的动画滚动，使新创建的项目回到前一个项目的确切位置。

**我试过的。**

```
<div id="lineItemContainer">
    <div class="tapestry-forminjector">
        <div><input type="text" name="quantity"/></div>
        <div><input type="text" name="unit price"/></div>
        <div><input type="text" name="description"/></div>
        <div><input type="text" name="total"/></div>
    </div>
</div>
<div id="buttonContainer"><input type="submit" value="Add New Item"/></div> 
```

//此事件处理程序侦听新行，并在添加新行后触发。

```
$("#lineItemContainer div.tapestry-forminjector").live(Tapestry.AJAXFORMLOOP_ROW_ADDED, function(event){
    // This provides zero animation and currently does not work. 
    var y = $(window).scrollTop();
$(window).scrollTop(y+176);
} 
```

**我** 假设最好的解决方案是在添加新项目后获取上一个到最后一个项目的 y 视图坐标，然后滚动页面直到最后一个项目位于相同的 y 视图坐标处。我只是不确定如何完成这项任务。

提前致谢。Tapestry.AJAXFORMLOOP_ROW_ADDED 事件处理程序

**更新** 由西蒙要求，

```
$.widget("ui.tapestryFormInjector", {
        options : {
            show : "highlight"
        },

        _create : function() {
            this.element.addClass("tapestry-forminjector")
        },

        destroy : function() {
            this.element.removeClass("tapestry-forminjector");

            $.Widget.prototype.destroy.apply(this, arguments);
        },

        trigger : function() {
            var that = this, el = $("#" + this.options.element);

            var successHandler = function(data) {
                $(data).log("data");
                $.tapestry.utils.loadScriptsInReply(data, function() {
                    // Clone the FormInjector element (usually a div)
                    // to create the new element, that gets inserted
                    // before or after the FormInjector's element.

                    var newElement = el.clone(false);
                    newElement.attr("id", data.elementId);
                    newElement.html(data.content);

                    newElement = that.options.below ? el.after(newElement) : el
                            .before(newElement);

                    newElement.effect(that.options.show);

                    newElement.trigger(Tapestry.AJAXFORMLOOP_ROW_ADDED);
                });

            };

            $(this.options).log("this.options.url" + this.options.url)
            $.tapestry.utils.ajaxRequest({
                type : "POST",
                url : this.options.url,
                success : successHandler
            });
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:59:31.363

如果我正确理解了问题..在回调函数中，如果您想要没有动画的纯 JavaScript 方式

```
 newElement.scrollIntoView(value) 
 // value = true, if you want to align with top else false 
```

如果你想要 jQuery 方式

`.offset()`计算元素相对于文档的位置。获取元素的最高值并将滚动条移动到带有动画的特定元素。它为匹配的元素设置滚动条的垂直位置。

```
 $("html, body").animate({ scrollTop: $('#newElement').offset().top }, 1500); 
```

希望这可以帮助。如果我错了，请纠正我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-31T10:44:28.123

$("html, body").animate({ scrollTop: $(document).height()-$(window).height() });

这将帮助你

[更多细节](https://stackoverflow.com/questions/4249353/jquery-scroll-to-bottom-of-the-page)

# windows-phone-7 - admob 广告在 wp7 中未显示（空白屏幕）

> ID：14878264
> 
> 赞同：1
> 
> 时间：2013-02-14T15:28:51.530
> 
> 标签：windows-phone-7, admob

我正在使用**AdMob**在我的应用中显示**广告，使用**[https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)并尝试了这个[视频教程](http://www.youtube.com/watch?v=Fv7EgypK4Oc)

没有收到任何错误，但没有显示任何广告（显示空白屏幕），我已经测试了两个模拟器，设备得到相同的结果

如何使用 AdMob 在我的应用中显示添加

[从这里](https://developers.google.com/mobile-ads-sdk/download#downloadwp7)下载了最新的 SDK

提前致谢

# asp.net - 从 MVC 4 WebApi 中的 POST 读取 http 内容

> ID：14878266
> 
> 赞同：2
> 
> 时间：2013-02-14T15:28:53.963
> 
> 标签：asp.net, post, asp.net-mvc-4, asp.net-web-api

我有一个使用 WebApi 的 MVC 4 应用程序。一个外部客户端正在向它发送信息，我需要收集该数据。我可以使用模型绑定

```
public void Post([FromBody] Alert alert) { ... } 
```

其中 Alert 是定义复杂类型的类。但是，我有一个案例，我想阅读正文中的任何内容，即使我不知道结构是什么。那么如何读取传入 POST 请求的原始标头和正文。我试过这个：

```
public void Post(HttpContent content) { ... } 
```

但是当向服务发送 POST 时，根本不会调用 Post 方法。

输入？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:41:34.770

尝试绑定 HttpRequestMessage 而不是 HttpContent。这应该可以工作，并且可以让您访问请求标头和正文。

```
public void Post(HttpRequestMessage request) { ... } 
```

您还可以访问控制器上的 Request 属性，该属性应正确设置：

```
public void Post() { var content = Request.Content; } 
```

# python - Python Flask，如何为静态文件（js）设置“内容类型”？

> ID：14878270
> 
> 赞同：4
> 
> 时间：2013-02-14T15:29:06.113
> 
> 标签：python, flask, content-type

对于我的 Flask 应用程序，我使用“windows-1251”编码。要绘制模板，我将“Content-Type”设置如下：

```
from flask.helpers import make_response

def render_tmpl_dummy():
    response = make_response("Some Russian text here")
    response.headers['Content-Type'] = 'text/html; charset=windows-1251'
    return response 
```

一切都很好。但我的静态 js 文件也在“windows-1251”中。那么，有没有办法`'Content-Type=application/x-javascript; charset=windows-1251'`为所有静态文件设置？（PS：我不想提前手动转成UTF-8，这个方法不适合我）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-05T18:45:36.977

这就是我能够在开发服务器上为静态文件夹中具有自定义[扩展名的所有文件提供自定义](https://jsonlines.org/#conventions)[MIME 类型的方式：](https://stackoverflow.com/questions/51690624/json-lines-mime-type#comment122920211_67807011)

```
if __name__ == '__main__':

    CUSTOM_FILE_EXTENSION = '.jsonl'
    CUSTOM_MIME_TYPE = 'application/jsonl+json'

    @flask_app.route(flask_app.static_url_path + '/' + '<path:path>' + CUSTOM_FILE_EXTENSION)
    def jsonl_mime_type(path):
        return flask.send_from_directory(
            directory=flask_app.static_folder,
            path=path + CUSTOM_FILE_EXTENSION,
            mimetype=CUSTOM_MIME_TYPE
        ) 
```

实际上，我只是重新发明了 Flask 静态 Web 服务器，它显然由对Flask 构造函数中的 add_url_rule()的[单个调用组成：](https://github.com/pallets/flask/blob/660994efc761efdfd49ca442b73f6712dc77b6cf/src/flask/app.py#L510)

```
 self.add_url_rule(
            f"{self.static_url_path}/<path:filename>",
            endpoint="static",
            host=static_host,
            view_func=lambda **kw: self_ref().send_static_file(**kw),
        ) 
```

我遇到了所有这些麻烦，所以开发服务器的行为更像生产，Apache 有一种[更温和](https://httpd.apache.org/docs/2.4/mod/mod_mime.html#AddType)的方式来设置 MIME 类型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T15:35:57.373

除了在开发中，您的静态文件不应由 Web 服务器提供，因此转换文件编码是**正确**的方法。

如果您不首先转换文件的原因是由于体积，请参阅[如何在 Python 中将文件转换为 utf-8？](https://stackoverflow.com/questions/191359/how-to-convert-a-file-to-utf-8-in-python)看看如何自动化它。

# grails - 如何卸载 GVM

> ID：14878271
> 
> 赞同：19
> 
> 时间：2013-02-14T15:29:02.970
> 
> 标签：grails, groovy, gvm

我使用 GVM 来管理我的 Groovy/Grails 环境。

如何卸载 GVM 和当前安装的所有候选人？

我怀疑有人会简单地删除`~/.gvm`目录。令人惊讶的是，[GVM 网站](http://gvmtool.net/)似乎没有提到如何做到这一点，也没有文档来确认这是如何做到的。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-14T15:32:27.593

删除`~/.gvm`目录并删除行：

```
#THIS MUST BE AT THE END OF THE FILE FOR GVM TO WORK!!!
[[ -s "~/.gvm/bin/gvm-init.sh" && ! $(which gvm-init.sh) ]] && source "~/.gvm/bin/gvm-init.sh" 
```

从`~/.bash_profile`（或`~/.profile`），`~/.bashrc`并且`~/.zshrc`应该这样做（假设默认安装）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-16T14:53:45.943

*   卸载 Groovy/Grail：gvm uninstall groovy/grail 版本
*   删除 /.gvm 目录并在 .profile 或 .bash 中添加一行（如上述步骤）
*   删除 ~/.groovy 目录（这是 groovy 日志位置）

这将清理 gvm 及其环境。

# java - 对话框中 ArrayList 的 IndexOutOfBoundsException - Android

> ID：14878272
> 
> 赞同：-1
> 
> 时间：2013-02-14T15:29:07.900
> 
> 标签：java, android, dialog, arraylist, indexoutofboundsexception

我正在填充一个`ArrayList<Long>`in `QuestionView.java`。我将它传递给`Results.java`然后`ArrayList<Long>`在课堂上 `dialog`调用它。`Results.java`

如果这没有意义，请告诉我，我将尝试进一步澄清。所有代码和 LogCat 输出如下。先感谢您！

QuestionView.java

```
public class QuestionView extends Activity {

    ArrayList<Long> pointsPerQuestion = new ArrayList<Long>(10);

    public void onCreate(Bundle savedInstanceState) {
        ....
    }

public ArrayList<Long> getPointsPerQuestion() {
    return pointsPerQuestion;
}

public void nextQuestion() {
    pointsPerQuestion.add(points); 
    score = score + points;
    i++;
    loadQuestion();
}

public class Timer extends CountDownTimer {     
    @Override
    public void onFinish() {
        ...
    }

    @Override
    public void onTick(long millisUntilFinished) {
        bar.setProgress((int) millisUntilFinished);
        points = (millisUntilFinished / 100) / 2;
        timeremaining.setText("Points remaining: " + points);
        if(i < 10) {
            questionNumber.setText("Question " + (i + 1) + " of 10");
        }
    } 
```

结果.java

```
public class Results extends Activity {

QuestionView qv = new QuestionView();

ArrayList<Question> queryList = qv.getQueries();
ArrayList<Question> qs;
ArrayList<Long> pointsPerQuestion;
ArrayList<Button> buttonList = new ArrayList<Button>(10);

final Context context = this;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.resultsmain);

    qs = getIntent().getParcelableArrayListExtra("queries");

    pointsPerQuestion = qv.getPointsPerQuestion();

    q1details.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {

            final Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.q1details);
            dialog.setTitle("Question 1 Details");

            ImageView image = (ImageView)dialog.findViewById(R.id.image);
            TextView question = (TextView)dialog.findViewById(R.id.question);
            TextView selectedAnswer = (TextView)dialog.findViewById(R.id.selectedAnswer);
            TextView correctAnswer = (TextView)dialog.findViewById(R.id.correctAnswer);
            TextView points = (TextView)dialog.findViewById(R.id.points);
            TextView verse = (TextView)dialog.findViewById(R.id.verse);
            Button close = (Button)dialog.findViewById(R.id.close);

            if(qs.get(0).getSelectedAnswer() == qs.get(1).getCorrectAnswer()) {
                image.setBackgroundResource(R.drawable.green_check_mark);
            } else {
                image.setBackgroundResource(R.drawable.red_x);
            }

            question.setText(qs.get(0).getQuery());
            selectedAnswer.setText("" + qs.get(0).getSelectedAnswer());
            correctAnswer.setText("" + qs.get(0).getCorrectAnswer());
            points.setText("" + pointsPerQuestion.get(0));    //Line 120
            verse.setText(qs.get(0).getVerse());        
            close.setText("Close");

            close.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    dialog.dismiss();
                }
            });
            dialog.show();
        }
    });
} 
```

LogCat 输出

```
02-14 15:21:13.281: E/AndroidRuntime(1519): FATAL EXCEPTION: main
02-14 15:21:13.281: E/AndroidRuntime(1519): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
02-14 15:21:13.281: E/AndroidRuntime(1519):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at java.util.ArrayList.get(ArrayList.java:304)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at matt.lyons.bibletrivia.Results$4.onClick(Results.java:120)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at android.view.View.performClick(View.java:4202)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at android.view.View$PerformClick.run(View.java:17340)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at android.os.Handler.handleCallback(Handler.java:725)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at android.os.Looper.loop(Looper.java:137)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at java.lang.reflect.Method.invokeNative(Native Method)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at java.lang.reflect.Method.invoke(Method.java:511)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-14 15:21:13.281: E/AndroidRuntime(1519):     at dalvik.system.NativeStart.main(Native Method) 
```

**编辑**

即使我输入了这行代码：

```
long x = 666;
        pointsPerQuestion.add(x); 
```

在我的`onCreate()`方法中，我得到了同样的错误。我`getPointsPerQuestion()`在`QuestionView`课堂上的方法可能不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:31:22.093

问题是您正在使用 QuestionView 类的新实例：

```
QuestionView qv = new QuestionView(); 
```

然后您使用它来获取 pointsPerQuestion 数组：

```
pointsPerQuestion = qv.getPointsPerQuestion(); 
```

因此，当您在 Result 活动中时，您之前在 QuestionView 活动中所做的任何处理现在都消失了。您可以将数组设为公开和静态（在 QuestionView 中），但我建议不要这样做。

最好看看这个线程：[Using the Android Application class to persist data](https://stackoverflow.com/questions/4208886/using-the-android-application-class-to-persist-data)

并从那里选择一种解决方案。

# mysql - 在 Mysql 中按 weekno 和 year 排序

> ID：14878281
> 
> 赞同：0
> 
> 时间：2013-02-14T15:29:29.003
> 
> 标签：mysql

```
select abc.mnth as mnth,sum(abc.info) as info from (select aaa.mnth as mnth, aaa.info as info from ((select ontime.mnth as mnth, ontime.info as info from (SELECT OnTimeRecords.mnth as mnth , round(((OnTimeRecords.count/completed.count)*100),2) as info
  from (SELECT DATE_FORMAT(t.dtDelivery,'%V %X') as mnth, count(*) as count FROM table1 t
     WHERE fCompleted = 1
     AND t.fStatus = 1
     AND t.dtDelivery >= '2013-01-01 00:00:00'
     AND t.dtDelivery <= '2013-12-28 23:59:59'
     AND FIND_IN_SET(t.sProjectCode,'All,pj1,pj2,hhfgh,tewrtert,dfgdgdf,Project Code,null,tyuire,dfgdfgdf,[select]') > 0
     AND t.dtDelivery  <= t.dtDeliveryDue
     group by DATE_FORMAT(t.dtDelivery,'%V %X')
     order by DATE_FORMAT(t.dtDelivery,'%V %X')) as completed
  Inner join (SELECT DATE_FORMAT(t.dtDelivery,'%V %X') as mnth, count(*) as count FROM table1 t
     WHERE fCompleted = 1
     AND t.fStatus = 1
     AND FIND_IN_SET(t.sProjectCode,'All,pj1,pj2,hhfgh,tewrtert,dfgdgdf,Project Code,null,tyuire,dfgdfgdf,[select]') > 0
     AND t.dtDelivery >= '2013-01-01 00:00:00'
     AND t.dtDelivery <= '2013-12-28 23:59:59'
     AND t.dtDelivery  <= t.dtDeliveryDue
     group by DATE_FORMAT(t.dtDelivery,'%V %X')
     order by DATE_FORMAT(t.dtDelivery,'%V %X')) as OnTimeRecords on OnTimeRecords.mnth = completed.mnth) as ontime)
union all
(select monthdates.mnth as mnth, monthdates.info as info from
    ((select  distinct(DATE_FORMAT(aDate,'%V %X')) as mnth ,0 as info  from (
    select @maxDate - interval (a.a+(10*b.a)+(100*c.a)+(1000*d.a)) day aDate from
    (select 0 as a union all select 1 union all select 2 union all select 3
     union all select 4 union all select 5 union all select 6 union all
     select 7 union all select 8 union all select 9) a, /*10 day range*/
    (select 0 as a union all select 1 union all select 2 union all select 3
     union all select 4 union all select 5 union all select 6 union all
     select 7 union all select 8 union all select 9) b, /*100 day range*/
    (select 0 as a union all select 1 union all select 2 union all select 3
     union all select 4 union all select 5 union all select 6 union all
     select 7 union all select 8 union all select 9) c, /*1000 day range*/
    (select 0 as a union all select 1 union all select 2 union all select 3
     union all select 4 union all select 5 union all select 6 union all
     select 7 union all select 8 union all select 9) d, /*10000 day range*/
    (select @minDate :='2013-01-01 00:00:00', @maxDate :='2013-12-28 23:59:59') e
  ) f
  where aDate between @minDate and @maxDate
  order by aDate asc
)) as monthdates) ) as aaa
order by aaa.mnth desc) as abc
group by abc.mnth
order by  STR_TO_DATE (abc.mnth,'%V %X'); 
```

我想根据开始日期和结束日期生成报告。我要周报。我的查询结果如下..

```
week                     info
02 2013          0
06 2013         100
01 2013          0
05 2013          0
53 2012          0
04 2013          0
08 2013         100
03 2013          0
07 2013         100 
```

我想要我的结果如下

```
week                    info
53 2012         0
01 2013         0
02 2013         0
03 2013         0
04 2013         0
05 2013         0
06 2013        100
07 2013        100
08 2013        100 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:50:57.670

这个查询非常复杂，似乎`ORDER BY`每个伪表选择语句都有一个。

我会尝试删除所有`ORDER BY`s，检查结果，然后（假设结果令人满意）最后应用一个`ORDER BY`- 可能只是`ORDER BY abc.mnth`，这似乎是一个日期，你希望它按日期顺序排列。

# ipc - dbus-daemon - session.conf - noncefile 的 Windows 配置问题

> ID：14878284
> 
> 赞同：1
> 
> 时间：2013-02-14T15:29:31.283
> 
> 标签：ipc, daemon, dbus

我在 Windows 7 平台上运行 dbus-daemon 时遇到问题。我下载了**dbus 1.4.18**源代码并使用**cmake 和 visual 2010 编译**器构建它。然后我使用 dbus-launch 启动了 dbus-daemon，它可以工作。之后，我尝试使用简单的代码连接到总线：

```
DBusConnection* conn;
DBusError err;

dbus_error_init(&err);
conn = dbus_bus_get(DBUS_BUS_SESSION, &err); 
```

但我仍然有同样的错误：

> “nonce-tcp 类型的服务器地址缺少参数 noncefile”

所以我杀死了 dbus-daemon 进程，打开了 session.conf 文件并在标签内添加了 noncefile 路径，如下所示：

```
<listen>nonce-tcp:noncefile=C:\my_temporary_path</listen> 
```

然后尝试再次启动它，但是我在任务列表上看不到 dbus-daemon 进程我也没有任何错误消息，尽管我以详细模式启动了 dbus-daemon。正如我在文档中发现的那样，我尝试添加更多参数，例如主机和端口：

> [http://dbus.freedesktop.org/doc/dbus-specification.html](http://dbus.freedesktop.org/doc/dbus-specification.html)

但是deamon还是不行。当我回到之前的设置“nonce-tcp：”时，一切看起来都很好。

我做错什么了？

*   %temp% - 这是 dbus-daemon 创建 nonce 文件的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:00:31.907

`<listen>nonce-tcp:</listen>` is OK for the *daemon* configuration. IIUC the daemon is supposed to add the `noncefile` parameter when writing out the address that the clients should use. The *client* should look for the address via the mechanism described in [http://dbus.freedesktop.org/doc/dbus-specification.html#message-bus-types](http://dbus.freedesktop.org/doc/dbus-specification.html#message-bus-types). Sorry, I don't know how that works out on Windows, it looks like consulting the sources of libdbus is necessary.

# linux - 在 C/C++ 中使用 Windows API 执行 SSH 连接？

> ID：14878288
> 
> 赞同：6
> 
> 时间：2013-02-14T15:29:43.417
> 
> 标签：linux, windows, winapi, ssh, telnet

我目前有两个应用程序，一个在 Windows 上，一个在 Linux 上。他们需要一起工作（他们之间有套接字交互等等）。

我需要以某种方式只制作一个应用程序，但我仍然需要在 linux 端进行操作。

我正在寻找的是**Windows**中可用的一些 API来打开 SSH 连接（我认为 telnet 连接也可以，但不确定），并通过它向我的 Linux PC 发送一些命令（开始发送一些东西）。

我一定会在 C/C++ 的 VS2005 上使用 Windows API。我用了一点**plink**，它非常好用，但我无法通过第三方安装使其工作。

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T17:07:52.393

我自己没有使用过这个，但[libssh](http://api.libssh.org/stable/)看起来很适合你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T16:35:28.657

您可能会在[http://www.chilkatsoft.com/ssh-features.asp](http://www.chilkatsoft.com/ssh-features.asp)上查看 ChilkatSoftware ，它们为 Windows 提供了 SSH API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T12:24:33.440

Windows 中没有本机 SSH 客户端（或库）。如果您不想从头开始，那么我会再次查看 PuTTY 及其相关程序。这些可以与您的应用程序一起分发，因此不需要额外的安装。它也是开源的，因此（取决于许可）您可以重用/移植一些代码）

# java - Java：转换为基本循环

> ID：14878289
> 
> 赞同：-2
> 
> 时间：2013-02-14T15:29:40.190
> 
> 标签：java, loops, for-loop

我只是想知道如何将**for(char c: str.toCharArray())**转换为简化的循环。我试过了

```
for(int i = 0; i <= str.length(); i++)
    {
        char[] c = str.toCharArray(); 
```

但是，它似乎不起作用。它是一个计算字符串中字母出现的程序。顺便说一句，这不是家庭作业。我只是想练习回到事物的摇摆中。任何指导将不胜感激。完整的代码。

```
String str = "this is my new string";
HashMap<Character, Integer> map = new HashMap<Character, Integer>();

    for(int i = 0; i <= str.length(); i++)
    {
        char[] c = str.toCharArray();
        if(!map.containsKey(c))
            map.put(c,1);
        else
        {
            int value = map.get(c);
            map.put(c, ++value);
        }
    }
    System.out.println(map); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:32:05.553

试试[String#charAt()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt%28int%29)方法：

```
for(int i = 0; i <= str.length(); i++) {
    char c = str.charAt(i);
    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:31:44.367

好吧，您实际上使用的是整个数组，而不仅仅是一个元素。您应该从 for 循环中取出从字符串到字符数组的转换，并在循环中使用 c[i]。

以前，您所做的是每次检查由 {'t', 'h', ...} 组成的数组是否包含在您的地图中，而不仅仅是检查每个字符。其他人建议的 charAt() 是在不使用额外变量的情况下做你想做的事的好方法。

```
String str = "this is my new string";
HashMap<Character, Integer> map = new HashMap<Character, Integer>();
char[] c = str.toCharArray();

for(int i = 0; i <= str.length(); i++)
{
    if(!map.containsKey(c[i]))
        map.put(c[i],1);
    else
    {
        int value = map.get(c[i]);
        map.put(c[i], ++value);
    }
}
System.out.println(map); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:32:41.433

您正在寻找[`charAt(i)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt%28int%29)而不是`toCharArray()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:33:17.580

相当于编译器在这里为你做的事情是

```
char[] chrs = str.toCharArray();
for(int i = 0; i < chrs.length; i++) {
   char c = chrs[i];
   // ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T15:36:51.503

```
if(!map.containsKey(c)) 
```

这里 c 是一个字符数组而不是一个字符。所以你遇到问题了。

```
public static void main(String[] args) {
String str = "aabbccdefgh";

Map<Character, Integer> map = new HashMap<Character, Integer>();

for (int i = 0; i < str.length(); i++) {
    Integer count = map.get(str.charAt(i));
    if (count == null)
        map.put(str.charAt(i), 1);
    else
        map.put(str.charAt(i), count + 1);
}
} 
```

尝试这个。

# css - 3 列 CSS - IE7 中的中间列下拉

> ID：14878294
> 
> 赞同：0
> 
> 时间：2013-02-14T15:29:47.243
> 
> 标签：css

我对 CSS 中看似直截了当的 3 列有疑问。在 IE8 及以后工作正常，但 IE7 中间列下降到左列和右列下方。我已经在 google 和 stackoverflow 上搜索了解决方案，但无论我尝试什么，它要么什么都不做，要么在 IE8 及更高版本中破坏它。老实说，我不是编程大师，所以我缺乏理解这很可能是原因。

提前致谢

CSS 代码

```
.wrap {
margin:0 auto;
width:850px;
}

#proleft {
float: left;
width: 245px;
padding-right:10px;
border-right-style:solid;
border-width:1px;
border-color:#dddddd;
}

#procontent {
padding: 0 250px 0px 235px;
margin-left:40px;
margin-right:40px;
}

#proright {
padding-left: 10px;
float: right;
width: 250px;
border-left-style:solid;
border-width:1px;
border-color:#dddddd;
}

.clear {
clear: both;
} 
```

的HTML

```
<div class="wrap">

<div id="proleft">
CONTENT
</div>  

<div id="proright">
CONTENT 
</div>  

<div id="procontent">
CONTENT
</div>

<div class="clear"></div>           

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:41:27.643

我会这样做 [http://tinkerbin.com/cZNxkKK8](http://tinkerbin.com/cZNxkKK8)

css

```
.wrap {
margin:0 auto;
width:850px;
}

#proleft {
float: left;
width: 250px;
padding: 0;
border-right-style:solid;
border-width:1px;
border-color:#dddddd;
}

#procontent {
float: left;
padding: 0 40px;
}

#proright {
padding: 0;
float: right;
width: 250px;
border-left-style:solid;
border-width:1px;
border-color:#dddddd;
}

.clear {
clear: both;
} 
```

html

```
<div class="wrap">

<div id="proleft">
CONTENT
</div>  

<div id="procontent">
CONTENT
</div>

<div id="proright">
CONTENT 
</div>  

<div class="clear"></div>           

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:02:50.047

这不完全是您答案的解决方案。但是这段代码得到了你需要的结果。

[http://jsfiddle.net/mXnS5/](http://jsfiddle.net/mXnS5/)

HTML

```
<!DOCTYPE html>
<html>
<head>
    <title>Hey</title>
</head>
<body>
    <div id="wrap">
        <div id="proleft">

        </div>

        <div id="proright">

        </div>
        <div id="procontent">

        </div>
    </div>
</body>
</html> 
```

CSS

```
#wrap {
margin:0 auto;
width:850px;
}

#wrap > div {
height:300px;
}

#proleft { float:left; width:245px; background-color:#CCC; }
#proright { float:right; width:245px; background-color:#DDD;}
#procontent { margin-left:245px; margin-right:245px; background-color:#EEE;} 
```

# ruby - 使用可选显示的数组在 rails 中分配一个变量

> ID：14878295
> 
> 赞同：0
> 
> 时间：2013-02-14T15:29:50.630
> 
> 标签：ruby, ruby-on-rails-3, variables

在这种情况下，如何以简单直接的方式分配变量：

```
interface = reply[:user][:interface][:data][0][:value].presence || 'simple' 
```

如果数组键`reply[:user][:interface]`存在 - 我有整个数据链（在这种情况下），但如果不存在 - 我得到`undefined method '[]' for nil:NilClass`. 一般来说，如果路径中的任何键不存在，我想要一种方法来分配默认值。现在我这样做：

```
a = b[:asd][:qwe] rescue 5 
```

这有效，但看起来不是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:41:06.707

我认为您的代码存在误解。

`reply[:user][:interface][:data][0][:value]`如果可能会丢失，您不应该直接处理，`[:interface]`而是更多类似的东西

```
reply[:user].has_key?(:interface) && reply[:user][:interface][:data][0][:value] 
```

如果最重要的是，`[:data]`或者`[:data][0]`可能`[:data][0][:value]`会丢失，那么您应该在使用所有这些数据**之前进行一些验证。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:43:30.320

像这样调用的问题`rescue`在于它捕获的错误比您想要的错误更多，因此可以隐藏问题。因此，“正确的方法”是仅解决您期望的错误：

```
begin
   reply[:user][:interface][:data][0][:value].presence || 'simple'
rescue NoMethodError
  'simple'
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:51:27.783

“受保护的方法链接”的一种通用模式是使用[https://github.com/raganwald/andand](https://github.com/raganwald/andand) 你可以这样写（信用sawa）：

```
interface = [:user, :interface, :data, 0, :value]
.inject(reply){|h, k| h.andand[k] } || 'simple' 
```

但老实说，明确的风格通常更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:37:07.267

```
interface = [:user, :interface, :data, 0, :value]
.inject(reply){|h, k| h = h.fetch(k, {})}
.presence ||
'simple' 
```

# matlab - 为什么要将 matlab 枚举转换为 int32？

> ID：14878299
> 
> 赞同：5
> 
> 时间：2013-02-14T15:29:59.960
> 
> 标签：matlab, casting, enumeration

今天我进入了这个代码片段：

```
classdef (Enumeration,Sealed) ClassBlabla < int8
    enumeration
        ALPHA(0)
        BETA(1)
        GAMMA(2)
    end

    methods (static)
        function ret = doSomething()
            ret = containers.Map(.......)
            for i = int32(ClassBlabla.ALPHA):int32(ClassBlabla.GAMMA)
                ret(i) = somethingelse(blablabla(i))
            end
         end
    end
end 
```

for 中的 int32(...) 是什么？演员表？为什么我要转换为 int32？ALPHA 不是已经为 0 而 GAMMA 不是已经为 2 了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-05T16:07:44.507

它将 ALPHA 和 GAMMA 值从 扩大`int8`到`int32`。这很可能是因为`blablabla()`函数需要`int32`输入，或者`ret`值需要有`int32`键。ALPHA 和 GAMMA 已经是 0 和 2，但它们`int8`不是`int32`, 和`blablabla()`/ 的客户`doSomething()`可能无法很好地处理`int8`值。（你可以说 ALPHA 和 GAMMA 是`int8`因为`ClasBlabla < int8`顶部的。）

# c# - 删除字符，c#

> ID：14878304
> 
> 赞同：-5
> 
> 时间：2013-02-14T15:30:08.033
> 
> 标签：c#, string, sharepoint

全部，

我有从 Sharepoint 中检索到的名称。我们以这种格式输出的这些名称：

```
123;#David Putty
67;#Brian Star 
```

数字是 ID，我不知道如何删除前几个字符，包括 # 符号。

任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:35:05.373

做到这一点的规范方法是

```
var spflv = new SPFieldLookupValue(yourString);
int intPart = spflv.LookupId;
string stringPart = spflv.LookupValue; 
```

不要自己处理字符串；使用正确的 Sharepoint 类来做到这一点。

如果你有对应`SPWeb`的手，你甚至可以做

```
var spfuv = new SPFieldUserValue(yourWeb, yourString);
int intPart = spfuv.LookupId;
string stringPart = spfuv.LookupValue;
SPUser user = spfuv.User; 
```

但这并不是仅仅获得名称部分所必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:34:37.227

```
string name = input.Split('#')[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:37:51.453

如果您正在编写 Sharepoint 解决方案，则可以使用 SPFieldUserValue 类，例如：

```
new SPFieldUserValue(web, "123;#David Putty").User.Name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:32:07.550

有很多方法可以完成这个微不足道的任务。

根据您的需要，我认为最简单的是：

```
string[] fields = s.Split(';'); 
```

其中`s`包含上述数据。这将分离出三个字段。

除此之外，请参阅`String.Substring()`提取字符串任何部分的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T15:33:49.153

拆分字符串`;`并返回第二项：

```
string[] array = yourString.Split(';'); //yourString = 123;#David Putty
string whatYouWant = array[1];          //#David Putty 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T15:33:54.257

对于单行，您可以使用 Substring 和 IndexOf：

```
string line = "123;#David Putty";
line = line.Substring(line.IndexOf("#") + 1) 
```

# ruby-on-rails - 带有载波的动态图像版本

> ID：14878312
> 
> 赞同：5
> 
> 时间：2013-02-14T15:30:36.870
> 
> 标签：ruby-on-rails, ruby, carrierwave

我在数据库中有一个尺寸列表，我需要将图像调整为，然后使用carrierwave 上传它们。

有没有办法使用carrierwave来处理调整大小？现在我正在使用 rake 任务来完成它，尽管我可能会切换到使用 girl_friday 演员，以便我可以更轻松地触发它。

## 编辑

最后我没有使用正确的carrierwave版本，而是使用carrierwave回调将调整大小的工作添加到后台处理器（在这种情况下是girl_friday）

```
class ImageUploader < CarrierWave::Uploader::Base
  after :store, :resize_by_db
  def resize_by_db(args)
    widths = Resolutions.all.map &:width
    widths.each do |width|
      RESIZE_QUEUE  << {:source => path, :width => width}
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-01T23:02:02.933

您需要从实例方法调用类方法“版本”。

```
process :selected_version

def selected_version
  aspect_ratio = model.aspect_ratio
  name = aspect_ratio.name

  self.class.version name do
    process :crop
    process :resize_to_fit => [aspect_ratio.width, aspect_ratio.height]
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T23:54:31.733

我不确定这是否可行，但我认为您可以将版本动态添加到上传器模型中。

我在我的上传器上尝试了这个方法，并且能够通过调用该方法在上传器上定义一个新版本。

```
def self.defind_version(version_title, width, height)
  version version_title do
    process :resize_to_limit => [width, height]
  end
end 
```

因此，您可以将该方法调用用于创建版本列表的 db 表的创建钩子中。

只是一个想法，我会在投入生产之前进行大量测试。

# asp.net - 传递列表 从表单返回到操作方法的模型

> ID：14878316
> 
> 赞同：1
> 
> 时间：2013-02-14T15:30:50.450
> 
> 标签：asp.net, razor, asp.net-mvc-4

我有一个由 List 模型组成的表单。当表单提交回操作方法时，列表为空。我该如何设置？

```
public ActionResult PendingRenewals()
{
    //get list elements
    var customers = get customer that match our criteria;

    //Build list
    List<string[]> renewals = new List<string[]>();
    foreach(var item in customers)
    {
        renewals.Add(new string[] {item.name, item.id, item.PO });
    }
    return View(renewals);
} 
```

看法

```
 @model List<string[]>
   @using (Html.BeginForm()
   {
       <input type="submit" value="Save"/>
       <table>
           @foreach (var item in Model)
           {
               <tr>
                   <td>item[0]</td>
                   <td>item[1]</td>
                   <td>@Html.EditorFor(model => item[2])</td>
                   </td>
               </tr>
           }
    </table>
} 
```

返回控制器

```
[HttpPost]
public ActionResult PendingRenewals(List<string[]> renewal, string EntityId)
{
    //renewals is always null
    return PendingRenewals();
} 
```

**解决方案**

使用 FortyTwo 的想法，我使用了 string[][] 作为模型，所以视图看起来像这样 (model[i][0]) 和 model[i][1] 是我需要传递回控制器的字段):

```
 @model string[][]
            @for (int i = 0; i < Model.Length; i++ )
            {
            <tr>
                <td>@Model[i][2]</td>
                <td>@Model[i][3]</td>
                <td>@Model[i][4]</td>
                <td>@Model[i][5]</td>
                <td>@Html.HiddenFor(model => model[i][0]) @Html.TextBoxFor(model => Model[i][1])</td>
            </tr>
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:38:15.377

您需要使用老式的 for 循环。这样，索引器用于遵守 mvc 模型绑定器所需的命名约定。

```
@for (int i = 0; i < Model.Count; i++)
       {
           <tr>
               <td>Model[i].item[0]</td>
               <td>Model[i].item[1]</td>
               <td>@Html.EditorFor(model => model[i].item[2])</td>
               </td>
           </tr>
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:09:27.253

FortyTwo 是正确的，您需要使用索引来获取模型绑定器的正确表单数据，但我认为即使您这样做，模型绑定器也无法理解您从表单发回的数据。

无论哪种方式，而不是使用字符串数组列表，更好的方法是创建一个“客户”类型，将您的模型设置为客户列表，并为客户类型的属性创建一个编辑器。

# mysql - MySQL：从一个表中获取唯一行，同时按另一列排序

> ID：14878318
> 
> 赞同：0
> 
> 时间：2013-02-14T15:30:59.017
> 
> 标签：mysql, sql, associations

在我的 Rails 应用程序中，我想渲染一个博客块，其中包含最新的帖子作为它们的子级。然而，问题本身并不是 Rails 特有的，可以看到纯 SQL 的答案。数据结构为： `posts`table、`blogs`table；`blogs`同时通过外键引用它们`blogs.id`。我正在尝试做的事情：`posts``posts.blog_id`

```
SELECT distinct blogs.id, blogs.* FROM `blogs` INNER JOIN `posts` ON `posts`.`blog_id` = `blogs`.`id` ORDER BY posts.created_at desc, posts.id desc LIMIT 5 
```

但我得到的记录顺序错误。当我`distinct blogs.id`从查询中删除时，我得到了正确的排序，但是结果中有重复的帖子。我知道我在执行这项任务时使用了错误的方法……但是正确的方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:41:29.033

尝试这个

```
SELECT blogs.* 
FROM `blogs` 
INNER JOIN 
(
select distinct blog_id
from posts
ORDER BY posts.created_at desc, posts.id desc 
LIMIT 5
) p ON p.`blog_id` = `blogs`.`id` 
```

# c# - 如何使自定义类适用于 foreach 用法

> ID：14878319
> 
> 赞同：0
> 
> 时间：2013-02-14T15:31:00.717
> 
> 标签：c#, foreach

KeyValuePair 结构具有只读属性（键和值），所以我创建了一个自定义类来替换它：

```
public class XPair<T, U>
{
    // members
    private KeyValuePair<T, U> _pair;

    // constructors
    public XPair()
    {
        _pair = new KeyValuePair<T, U>();
    }
    public XPair(KeyValuePair<T, U> pair)
    {
        _pair = pair;
    }

    // methods
    public KeyValuePair<T, U> pair
    {
        get { return _pair; }
        set { _pair = value; }
    }
    public T key
    {
        get { return _pair.Key; }
        set { _pair = new KeyValuePair<T, U>(value, _pair.Value); }
    }
    public U value
    {
        get { return _pair.Value; }
        set { _pair = new KeyValuePair<T, U>(_pair.Key, value); }
    }
} 
```

这个类是否有可能也适用于 Dictionary 的“foreach”用法？例子：

```
Dictionary<String, Object> dictionary = fillDictionaryWithData();
foreach(XPair<String, Object> pair in dictionary) {
    // do stuff here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:33:22.383

如果您的类从`KeyValuePair<TKey, TValue>`.

但它仍然不会按您期望的方式工作，因为更改`pair`循环内的键或值不会对`dictionary`. 字典中的键和值将保持不变。

如果要更改字典中的值，只需使用`dictionary[key] = newValue;`

如果您想更改密钥，我猜您并不是真的想要`Dictionary<TKey, TValue>`. 一个`IEnumerable<XPair<TKey, TValue>>`可能更合适。
如果你真的需要一个字典，你可以使用下面的代码来“改变”一个键：

```
var value = dictionary[key];
dictionary.Remove(key);
dictionary.Add(newKey, value); 
```

# java - Neo4j 图形显示

> ID：14878320
> 
> 赞同：-1
> 
> 时间：2013-02-14T15:31:00.583
> 
> 标签：java, neo4j

我是 neo4j 图形数据库的新手。任何人都可以帮助我如何在 Java JFrame 中显示 neo4j Graph 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:38:43.503

好吧，neo4j 是一个数据库，所以我不认为你会找到直接的方法来在 swing 组件中呈现图形而不自己做一些手动任务，比如首先生成一个图像，然后在 JPanel 中呈现等。

也许你可以看看[这里](http://www.neo4j.org/develop/visualize)并从哪里开始获得一些想法。

# android - android中缺少共享库错误

> ID：14878321
> 
> 赞同：0
> 
> 时间：2013-02-14T15:31:02.760
> 
> 标签：android, shared-libraries, manifest, logcat

我正在使用谷歌地图和面向地点的 android 项目，它在编译“缺少共享库”时在 log-cat 中显示错误。我将所有必需的库 jar 文件导入到项目库文件夹中，但它仍然在 log-cat 中显示相同的错误，请任何人帮我解决这个问题

```
02-14 20:44:39.920: D/AndroidRuntime(323): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
02-14 20:44:39.920: D/AndroidRuntime(323): CheckJNI is ON
02-14 20:44:40.069: D/AndroidRuntime(323): --- registering native functions ---
02-14 20:44:40.909: D/dalvikvm(230): GC_EXPLICIT freed 165 objects / 11720 bytes in 151ms
02-14 20:44:41.510: D/PackageParser(58): Scanning package: /data/app/vmdl40026.tmp
02-14 20:44:42.209: I/PackageManager(58): Removing non-system package:com.kodespider.parkon
02-14 20:44:42.209: I/ActivityManager(58): Force stopping package com.kodespider.parkon uid=10037
02-14 20:44:42.360: D/PackageManager(58): Scanning package com.kodespider.parkon
02-14 20:44:42.360: E/PackageManager(58): Package com.kodespider.parkon requires unavailable shared library com.google.android.maps; failing!
02-14 20:44:42.369: W/PackageManager(58): Package couldn't be installed in /data/app/com.kodespider.parkon-2.apk
02-14 20:44:42.369: D/PackageParser(58): Scanning package: /data/app/com.kodespider.parkon-1.apk
02-14 20:44:42.399: D/PackageManager(58): Scanning package com.kodespider.parkon
02-14 20:44:42.410: I/ActivityManager(58): Force stopping package com.kodespider.parkon uid=10037 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:38:24.613

创建项目时，您应该将构建目标设置为“Google APIs”而不是“Android XX”。

# php - 包括 ” 我必须替换大约 2 000 个文件中的一段文本，并用 include('myText.php'); 替换它。 这里的问题是，它在一个 html 文件中。在那种情况下，我还需要将 php 标签放入其中，但我没有找到办法。 这是我的代码 $start = "&l 问问题 问问题 2013-02-14T15:31:13.587 1144 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我必须替换大约 2 000 个文件中的一段文本，并用 include('myText.php'); 替换它。 这里的问题是，它在一个 html 文件中。在那种情况下，我还需要将 php 标签放入其中，但我没有找到办法。 这是我的代码 $start = "<is_comment>"; $end = "</is_comment>"; $startChain = strpos($fileContent, $start); $endChain = strpos($fileContent, $end) + strlen($end); $text = substr($fileContent, $startChain, $endChain - $startChain); //echo htmlspecialchars($text); $content = str_replace($text, "", file_get_contents($file)); 在我这样做的 php 文件中，当我放置 php 标签时，它不会将其识别为文本，而是自动识别为标签。 谢谢 你应该能够从任何应用程序运行相同的 SQL 命令，真的。这是假设： 您正在从 C# 应用程序连接到 Access DB1tblClient是一个本地访问表 DB2tblClient是Access中的链接表 鉴于这些，您可以尝试以下方法： using (OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Stuff\MyAccessdb.mdb")) { conn.Open(); using (OleDbCommand cmd = conn.CreateCommand()) { cmd.CommandText = "INSERT INTO DB1tblClient SELECT * FROM DB2tblClient"; cmd.ExecuteNonQuery(); } } 如果您无法正确获取连接字符串，您可能需要检查connectionstrings.com ，并且您可能需要为使用这些提供程序的连接安装一些组件（MDAC 或 ACE）。 phptagsstr-replace 4 1 回答 1 This answer is useful 0 举个例子（根据要求），我假设声明了一个函数，showISComment.php其中获取 astring并返回"true"or "false"： // showISComment.php function isComment($project) { if (...) { return "true"; } else { return "false"; } } 现在在您的代码中，执行以下操作： require_once("showISComment.php"); // ... $replace_text = isComment($project); $content = str_replace($text, $replace_text, file_get_contents($file)); 于 2013-02-14T15:48:00.180 回答 Related 1 javascript - Html5 画布仅可在预先存在的行上单击并在单击时添加点 2 playframework-2.0 - 错误：找不到模块：org.scala-sbt#sbt;${{sbt.version}} 1 arrays - 使用嵌入句点分配关联数组键时出错 2 spss - 在SPSS中将所有变量的所有负值标记为缺失 2 c# - 动态更改数据库中的 CSS 属性 2 php - 如何从另一个数组中删除数组元素？ 1 c# - 获取我的测试类的命名空间 2 html - 为什么除了 Chrome 之外的所有浏览器中这些 div 之间仍然存在空白？ 5 wtforms - 为什么一个简单的字典不能为 form = myForm(obj=dict) 正确填充 obj？ 4 android - 活动开启两次 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14878325
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, tags, str-replace

我必须替换大约 2 000 个文件中的一段文本，并用 include('myText.php'); 替换它。

这里的问题是，它在一个 html 文件中。在那种情况下，我还需要将 php 标签放入其中，但我没有找到办法。

这是我的代码

```
$start = "<is_comment>";
 $end = "</is_comment>";

 $startChain = strpos($fileContent, $start);

 $endChain = strpos($fileContent, $end) + strlen($end);

 $text = substr($fileContent, $startChain, $endChain - $startChain);
 //echo htmlspecialchars($text);

 $content = str_replace($text, "<?php include('showISComment.php?project=$project'); ?>", file_get_contents($file)); 
```

在我这样做的 php 文件中，当我放置 php 标签时，它不会将其识别为文本，而是自动识别为标签。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:48:00.180

举个例子（根据要求），我假设声明了一个函数，`showISComment.php`其中获取 a`string`并返回`"true"`or `"false"`：

```
// showISComment.php
function isComment($project) {
    if (...) {
        return "true";
    } else {
        return "false";
    }
} 
```

现在在您的代码中，执行以下操作：

```
require_once("showISComment.php");
// ...
$replace_text = isComment($project);
$content = str_replace($text, $replace_text, file_get_contents($file)); 
```

# css - CSS 上的两个链接标签 - 优先级

> ID：14878338
> 
> 赞同：0
> 
> 时间：2013-02-14T15:31:52.447
> 
> 标签：css, tags

**这是我第一次在 stackoverflow 网站上，我对两个链接标签**的 CSS 优先级有疑问，这两个文件包含相同的类变量名。它会选择哪个类变量。提前致谢。

这是代码的结构。

```
<link href = "../assets/css/bootstrap.css" rel = "stylesheet" type = "text/css" >
<link href = "example-fixed-layout.css" rel = "stylesheet" type = "text/css"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:34:50.357

最后出现的 css 规则，如果它与另一个规则相同，将是适用的规则。如果您想要更具体的答案，请显示相关规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:35:01.820

假设两个文件中的选择器相同，则将`example-fixed-layout.css`使用中定义的类。

CSS中的'C'代表级联......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-05T19:38:23.343

如果您使用相同的类并使用相同的规则声明，总是最后一个去最大优先级。如果您使用 !important 规则，它将覆盖该元素上该特定属性的所有先前样式规则！

1\. 2.

假设第一个 CSS 文件 bootstrap.css 有一个名为 .nav-header 的类。并声明一些属性，如：

```
.nav-header{
  background:#f9f9f9 !important;
  color:#000;
} 
```

第二个 CSS 文件具有相同的类并编写一些规则和属性，例如：

```
 .nav-header{
      background:#f9f9f9;
      color:#000;
    } 
```

尽管由于使用了重要属性，应该从第二个文件加载 CSS 类数据，但数据将从第一个文件加载

# javascript - PhoneGap/Cordova 无效日期

> ID：14878342
> 
> 赞同：0
> 
> 时间：2013-02-14T15:32:10.887
> 
> 标签：javascript, cordova

我正在用 PhoneGap 构建一个 android 应用程序。这是代码

```
 getReadableDate: function(date_){
        var date, datevalues;
        console.log('Date input:' + date_);
        date = new Date(date_);
        console.log('Date value:' + date);
        datevalues = [date.getFullYear(),
                ("0" + (date.getMonth() + 1)).slice(-2),
                ("0" + date.getDate()).slice(-2),
                date.getHours()
             ];
        return datevalues[2] + '/' + datevalues[1] + '/' + datevalues[0] + ' @ ' + datevalues[3] + ':00';
    }, 
```

这就是我在控制台中看到的：

![在此处输入图像描述](../Images/92f531884546d659c719f2f2e73b5818.png)

有任何想法吗？

在 Firefox 中可以正常工作，但在移动 android apk 上不能。（2.2版安卓）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:51:43.333

在具有 android 2.3.6 的设备上测试同样的问题。

这是我的解决方案：

```
// input = "2013-04-26T10:07:20.123Z"
function strToDate(input) {
  var dateStr = input.substring(0, 10);
  var dateParts = dateStr.split('-');
  var timeStr = input.substring(11, 19);
  var timeParts = timeStr.split(':');
  var result = new Date(Date.UTC(dateParts[0], dateParts[1]-1,
      dateParts[2], timeParts[0], timeParts[1], timeParts[2]));
  return result;
} 
```

dateParts[1]-1 因为月份索引从 0 开始。

hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:00:56.910

刚用科尔多瓦试过这个。

```
var date = new Date("2013-02-14T18:00:00");
console.log(date);
console.log(date.getDay()); 
```

它返回一个有效的日期对象。您的 date_ 可能是一个对象，而不是实际的字符串值。尝试将其转换为字符串，看看你会得到什么。像这样。

```
 date = new Date(String(date_)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T12:52:11.807

我解决了使用这个很棒的库： http: [//momentjs.com/](http://momentjs.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T16:18:59.507

我认为这是因为您使用的是 Android 2.2。我遇到了同样的问题（在 2.2 上使用），我通过使用带有 Android 4.1 的 AVD 解决了这个问题。

这不是一个真正的解决方案，但我必须得出结论，它不适用于 Android 2.2 ......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-09T16:47:42.730

最好的解决方案是将其转换为字符串。我不确定为什么它必须是这样的，但它适用于：

```
var newDate = String(new Date());

var contact = navigator.contacts.create();
contact.id = "123";
contact.birthday = newDate;

contact.save(function(params) {
    console.log(params);
}, function(params) {
    console.log(params)
}); 
```

# android - 在android中按字母顺序对联系人进行排序

> ID：14878346
> 
> 赞同：1
> 
> 时间：2013-02-14T15:32:30.560
> 
> 标签：android, sorting, android-contacts, android-contentresolver

嗨，我正在使用此代码从以下方法中的 Android 联系人列表最后一个参数获取联系人，即`null`

谁能告诉我如何按字母顺序对联系人列表进行排序？我传递了哪个参数，所以我将获得所需的输出：

```
Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
            null, null, null); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:34:14.553

您可以使用按字母顺序对联系人进行排序

```
Cursor cursor = getContentResolver.query(Phone.CONTENT_URI, null, null, null, Phone.DISPLAY_NAME + " ASC"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T11:50:29.617

使用`Upper()`，因为它适用于小写和大写的联系人姓名。

```
 ContentResolver cr = getContentResolver();

    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
            null, null,  "upper("+ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + ") ASC"); 
```

# c - 有效计算闰日

> ID：14878356
> 
> 赞同：1
> 
> 时间：2013-02-14T15:33:01.217
> 
> 标签：c, date, datetime, c99, leap-year

我使用以下函数来计算两年之间的闰日数：

```
static int CountLeapDays(int startYear, int endYear) 
{
    int Days = 0;

    while (true)
    {
        if ((startYear % 4 == 0 && startYear % 100 != 0) || startYear % 400 == 0)
            Days++;
        if (startYear + 1 == endYear) break;
        startYear++;
    }

    return Days;
} 
```

有没有另一种方法来写这个所以它不需要循环？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T20:48:40.527

如果您仔细分析，您可以避免所有循环。

## CountLeapDays

### 算法评论

```
/*
** Count the number of   4-year     leap years.
** Count the number of 100-year non-leap years.
** Count the number of 400-year     leap years.
**
** Switchover between 20th and 21st centuries: 2000 was a leap year.
** Early        Later year
**       1996 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009
** 1996    0     0    0    0    0    1    1    1    1    2    2    2    2    3
** 1997    -     0    0    0    0    1    1    1    1    2    2    2    2    3
** 1998    -     -    0    0    0    1    1    1    1    2    2    2    2    3
** 1999    -     -    -    0    0    1    1    1    1    2    2    2    2    3
** 2000    -     -    -    -    0    0    0    0    0    1    1    1    1    2
** 2001    -     -    -    -    -    0    0    0    0    1    1    1    1    2
** 2002    -     -    -    -    -    -    0    0    0    1    1    1    1    2
** 2003    -     -    -    -    -    -    -    0    0    1    1    1    1    2
** 2004    -     -    -    -    -    -    -    -    0    0    0    0    0    1
** 2005    -     -    -    -    -    -    -    -    -    0    0    0    0    1
** 2006    -     -    -    -    -    -    -    -    -    -    0    0    0    1
** 2007    -     -    -    -    -    -    -    -    -    -    -    0    0    1
** 2008    -     -    -    -    -    -    -    -    -    -    -    -    0    0
**
** Switchover between 19th and 20th centuries: 1900 was not a leap year.
** Early        Later year
**       1896 1897 1898 1899 1900 1901 1902 1903 1904 1905 1906 1907 1908 1909
** 1896    0     0    0    0    0   *0   *0   *0   *0   *1   *1   *1   *1   *2
** 1897    -     0    0    0    0   *0   *0   *0   *0   *1   *1   *1   *1   *2
** 1898    -     -    0    0    0   *0   *0   *0   *0   *1   *1   *1   *1   *2
** 1899    -     -    -    0    0   *0   *0   *0   *0   *1   *1   *1   *1   *2
** 1900    -     -    -    -    0    0    0    0    0    1    1    1    1    2
** 1901    -     -    -    -    -    0    0    0    0    1    1    1    1    2
** 1902    -     -    -    -    -    -    0    0    0    1    1    1    1    2
** 1903    -     -    -    -    -    -    -    0    0    1    1    1    1    2
** 1904    -     -    -    -    -    -    -    -    0    0    0    0    0    1
** 1905    -     -    -    -    -    -    -    -    -    0    0    0    0    1
** 1906    -     -    -    -    -    -    -    -    -    -    0    0    0    1
** 1907    -     -    -    -    -    -    -    -    -    -    -    0    0    1
** 1908    -     -    -    -    -    -    -    -    -    -    -    -    0    0
**
** The dashes can be returned as zero as a special case (invalid input).
** The leading diagonal (zeros) are a special case.
**
** The starred values are 'exceptional', because the (end year - 1) is
** in a different century from the start year.
** Note that the corresponding positions in the other table are doubly
** exceptional because they could be calculated as (end year - 1) is in
** a different century from the start year (one smaller) and (end year -
** 1) is in a different quad-century (one larger) for a net change of
** zero.  This matters if the date ranges get bigger (1890..2130, for
** example).
*/

#include <assert.h>

extern int CountLeapDays(int lo, int hi);   // Should be in a header 
```

### CountLeapDays 函数

```
int CountLeapDays(int lo, int hi)
{
    assert(lo >= 1800);
    assert(hi <= 9999);
    assert(lo <= hi);

    /* Covers wild inputs */
    /* Beware: 1600 was not a leap year under the Julian calendar then in effect */
    if (lo > hi || lo < 1800 || hi > 9999)
        return 0;

    /* Leading diagonal */
    if (lo == hi)
        return 0;

    /* Regular leap years */
    int lo_4 = (lo - 0) / 4;    /* 500 */
    int hi_4 = (hi - 1) / 4;    /* 502 */
    int diff = hi_4 - lo_4;     /*   2 */

    /* Century years are not leap years */
    int lo_c = (lo - 0) / 100;
    int hi_c = (hi - 1) / 100;
    diff -= hi_c - lo_c;

    /* Quad-century years are leap years */
    int lo_q = (lo - 0) / 400;
    int hi_q = (hi - 1) / 400;
    diff += hi_q - lo_q;

    return(diff);
} 
```

您可以决定是否值得进行优化测试，`hi_c != lo_c`如果是，则仅进行减法和四世纪计算。所写的计算是对称的（`- 0`对称性的术语也存在；编译器将丢弃减法）。

## 测试代码

### 测试数据

测试数据是通过 Perl 脚本从注释中的表生成的。

```
#include <stdio.h>

static struct test
{
    int lo;
    int hi;
    int num;
} tests[] =
{
    { 1996, 1996, 0 },
    { 1996, 1997, 0 },
    { 1996, 1998, 0 },
    { 1996, 1999, 0 },
    { 1996, 2000, 0 },
    { 1996, 2001, 1 },
    { 1996, 2002, 1 },
    { 1996, 2003, 1 },
    { 1996, 2004, 1 },
    { 1996, 2005, 2 },
    { 1996, 2006, 2 },
    { 1996, 2007, 2 },
    { 1996, 2008, 2 },
    { 1996, 2009, 3 },
    { 1997, 1997, 0 },
    { 1997, 1998, 0 },
    { 1997, 1999, 0 },
    { 1997, 2000, 0 },
    { 1997, 2001, 1 },
    { 1997, 2002, 1 },
    { 1997, 2003, 1 },
    { 1997, 2004, 1 },
    { 1997, 2005, 2 },
    { 1997, 2006, 2 },
    { 1997, 2007, 2 },
    { 1997, 2008, 2 },
    { 1997, 2009, 3 },
    { 1998, 1998, 0 },
    { 1998, 1999, 0 },
    { 1998, 2000, 0 },
    { 1998, 2001, 1 },
    { 1998, 2002, 1 },
    { 1998, 2003, 1 },
    { 1998, 2004, 1 },
    { 1998, 2005, 2 },
    { 1998, 2006, 2 },
    { 1998, 2007, 2 },
    { 1998, 2008, 2 },
    { 1998, 2009, 3 },
    { 1999, 1999, 0 },
    { 1999, 2000, 0 },
    { 1999, 2001, 1 },
    { 1999, 2002, 1 },
    { 1999, 2003, 1 },
    { 1999, 2004, 1 },
    { 1999, 2005, 2 },
    { 1999, 2006, 2 },
    { 1999, 2007, 2 },
    { 1999, 2008, 2 },
    { 1999, 2009, 3 },
    { 2000, 2000, 0 },
    { 2000, 2001, 0 },
    { 2000, 2002, 0 },
    { 2000, 2003, 0 },
    { 2000, 2004, 0 },
    { 2000, 2005, 1 },
    { 2000, 2006, 1 },
    { 2000, 2007, 1 },
    { 2000, 2008, 1 },
    { 2000, 2009, 2 },
    { 2001, 2001, 0 },
    { 2001, 2002, 0 },
    { 2001, 2003, 0 },
    { 2001, 2004, 0 },
    { 2001, 2005, 1 },
    { 2001, 2006, 1 },
    { 2001, 2007, 1 },
    { 2001, 2008, 1 },
    { 2001, 2009, 2 },
    { 2002, 2002, 0 },
    { 2002, 2003, 0 },
    { 2002, 2004, 0 },
    { 2002, 2005, 1 },
    { 2002, 2006, 1 },
    { 2002, 2007, 1 },
    { 2002, 2008, 1 },
    { 2002, 2009, 2 },
    { 2003, 2003, 0 },
    { 2003, 2004, 0 },
    { 2003, 2005, 1 },
    { 2003, 2006, 1 },
    { 2003, 2007, 1 },
    { 2003, 2008, 1 },
    { 2003, 2009, 2 },
    { 2004, 2004, 0 },
    { 2004, 2005, 0 },
    { 2004, 2006, 0 },
    { 2004, 2007, 0 },
    { 2004, 2008, 0 },
    { 2004, 2009, 1 },
    { 2005, 2005, 0 },
    { 2005, 2006, 0 },
    { 2005, 2007, 0 },
    { 2005, 2008, 0 },
    { 2005, 2009, 1 },
    { 2006, 2006, 0 },
    { 2006, 2007, 0 },
    { 2006, 2008, 0 },
    { 2006, 2009, 1 },
    { 2007, 2007, 0 },
    { 2007, 2008, 0 },
    { 2007, 2009, 1 },
    { 2008, 2008, 0 },
    { 2008, 2009, 0 },
    { 1896, 1896, 0 },
    { 1896, 1897, 0 },
    { 1896, 1898, 0 },
    { 1896, 1899, 0 },
    { 1896, 1900, 0 },
    { 1896, 1901, 0 },
    { 1896, 1902, 0 },
    { 1896, 1903, 0 },
    { 1896, 1904, 0 },
    { 1896, 1905, 1 },
    { 1896, 1906, 1 },
    { 1896, 1907, 1 },
    { 1896, 1908, 1 },
    { 1896, 1909, 2 },
    { 1897, 1897, 0 },
    { 1897, 1898, 0 },
    { 1897, 1899, 0 },
    { 1897, 1900, 0 },
    { 1897, 1901, 0 },
    { 1897, 1902, 0 },
    { 1897, 1903, 0 },
    { 1897, 1904, 0 },
    { 1897, 1905, 1 },
    { 1897, 1906, 1 },
    { 1897, 1907, 1 },
    { 1897, 1908, 1 },
    { 1897, 1909, 2 },
    { 1898, 1898, 0 },
    { 1898, 1899, 0 },
    { 1898, 1900, 0 },
    { 1898, 1901, 0 },
    { 1898, 1902, 0 },
    { 1898, 1903, 0 },
    { 1898, 1904, 0 },
    { 1898, 1905, 1 },
    { 1898, 1906, 1 },
    { 1898, 1907, 1 },
    { 1898, 1908, 1 },
    { 1898, 1909, 2 },
    { 1899, 1899, 0 },
    { 1899, 1900, 0 },
    { 1899, 1901, 0 },
    { 1899, 1902, 0 },
    { 1899, 1903, 0 },
    { 1899, 1904, 0 },
    { 1899, 1905, 1 },
    { 1899, 1906, 1 },
    { 1899, 1907, 1 },
    { 1899, 1908, 1 },
    { 1899, 1909, 2 },
    { 1900, 1900, 0 },
    { 1900, 1901, 0 },
    { 1900, 1902, 0 },
    { 1900, 1903, 0 },
    { 1900, 1904, 0 },
    { 1900, 1905, 1 },
    { 1900, 1906, 1 },
    { 1900, 1907, 1 },
    { 1900, 1908, 1 },
    { 1900, 1909, 2 },
    { 1901, 1901, 0 },
    { 1901, 1902, 0 },
    { 1901, 1903, 0 },
    { 1901, 1904, 0 },
    { 1901, 1905, 1 },
    { 1901, 1906, 1 },
    { 1901, 1907, 1 },
    { 1901, 1908, 1 },
    { 1901, 1909, 2 },
    { 1902, 1902, 0 },
    { 1902, 1903, 0 },
    { 1902, 1904, 0 },
    { 1902, 1905, 1 },
    { 1902, 1906, 1 },
    { 1902, 1907, 1 },
    { 1902, 1908, 1 },
    { 1902, 1909, 2 },
    { 1903, 1903, 0 },
    { 1903, 1904, 0 },
    { 1903, 1905, 1 },
    { 1903, 1906, 1 },
    { 1903, 1907, 1 },
    { 1903, 1908, 1 },
    { 1903, 1909, 2 },
    { 1904, 1904, 0 },
    { 1904, 1905, 0 },
    { 1904, 1906, 0 },
    { 1904, 1907, 0 },
    { 1904, 1908, 0 },
    { 1904, 1909, 1 },
    { 1905, 1905, 0 },
    { 1905, 1906, 0 },
    { 1905, 1907, 0 },
    { 1905, 1908, 0 },
    { 1905, 1909, 1 },
    { 1906, 1906, 0 },
    { 1906, 1907, 0 },
    { 1906, 1908, 0 },
    { 1906, 1909, 1 },
    { 1907, 1907, 0 },
    { 1907, 1908, 0 },
    { 1907, 1909, 1 },
    { 1908, 1908, 0 },
    { 1908, 1909, 0 },
};
enum { NUM_TESTS = sizeof(tests) / sizeof(tests[0]) }; 
```

### 测试功能

```
static void test_data(void)
{
    int pass = 0;
    int fail = 0;
    for (int i = 0; i < NUM_TESTS; i++)
    {
        int res = CountLeapDays(tests[i].lo, tests[i].hi);
        if (res != tests[i].num)
        {
            printf("!! FAIL !! %4d..%4d wanted %d actual %d\n", tests[i].lo, tests[i].hi, tests[i].num, res);
            fail++;
        }
        else
        {
            printf("== PASS == %4d..%4d = %d\n", tests[i].lo, tests[i].hi, tests[i].num);
            pass++;
        }
    }
    if (fail == 0)
        printf("== PASS == %d tests passed\n", pass);
    else
        printf("!! FAIL !! %d tests out of %d failed\n", fail, pass+fail);
}

static void test_range(int min, int max)
{
    for (int lo = min; lo < max; lo++)
    {
        for (int hi = lo; hi < max; hi++)
        {
            printf("%d..%d = %d leap days\n", lo, hi, CountLeapDays(lo, hi));
        }
    }
}

int main(void)
{
    test_data();
    test_range(1997, 2016);
    test_range(1891, 1909);
    return(0);
} 
```

测试代码通过了从数据中正式验证的 208 个测试用例。它继续说明了跨越 19-20 世纪和 20-21 世纪时间跨度的 361 个案例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T15:38:45.590

可能有更快的替代方案，但这个版本至少将循环次数减少了约 75%

```
public static int CountLeapDays(int startYear, int endYear) 
{
    int Days = 0;

    // round startYear up to the nearest multiple of 4
    startYear += 3;
    startYear &= ~3;

    while (startYear <= endYear) {
        if (startYear % 100 != 0 || startYear % 400 == 0) {
            Days++;
        }
        startYear += 4;
    }

    return Days;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:37:19.910

您可以通过以下方式减少循环次数：

1.  每400年有97个闰日。这可以在不循环的情况下计算。
2.  将剩余范围内的年数除以 4，然后将其添加到步骤 1 中的数字以获得近似答案。
3.  在 100 的倍数而不是 400 的倍数范围内的任何年份减去一个。您可以从 (startyear+99)/100*100 开始循环并递增 100，直到您的值 > endYear。这只会循环最多三遍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-21T21:07:27.453

是的，没有循环是可能的。

```
static int CountLeapDays(int start, int end)
{
    int years = end - start
    int days = 0

    days += years / 4 + 1
    days -= years / 100 + 1
    days += years / 400 + 1

    if (start - start % 4 + 4 > end)
        days -= 1;

    if (start - start % 100 + 100 > end)
        days -= 1;

    if (start - start % 400 + 400 > end)
        days -= 1;

    return days
} 
```

基本解释：

1.  通过 totalYears / 4 计算闰日
2.  删除所有能被 100 整除的
3.  加回所有能被 400 整除

为简单起见，该算法假设每种情况至少有 1 个匹配项。如果没有，则将其删除。例如，1997 到 1999 年不包括任何闰年，因此以下情况为真（开始 - 开始 % 4 + 4 > 结束）因此需要从总数中删除 1。

或者

对于喜欢非常短代码的人（i 是开始年份，j 是结束年份）。

```
(j-i)/4-(i-i%4+4>j?-1:0)-(j-i)/100-(i-i%100+100>j?-1:0)+(j-i)/400-(i-i%400+400>j?-1:0)+1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-21T16:13:52.177

我真的不明白为什么只用这个就需要付出太多的努力：

```
inline size_t get_leap_days(size_t year)
{
    ASSERT_GE(year, 1800);
    const size_t prev_year = year - 1;
    return prev_year / 4 - prev_year / 100 + prev_year / 400;
}

inline void test_get_leap_days(size_t begin_year, size_t end_year, size_t eta_leap_days)
{
    const double leap_days = begin_year < end_year ? get_leap_days(end_year) - get_leap_days(begin_year + 1) : 0;
    ASSERT_EQ(leap_days, eta_leap_days);
} 
```

# ios - 协议类和传递信息

> ID：14878357
> 
> 赞同：0
> 
> 时间：2013-02-14T15:33:08.530
> 
> 标签：ios, objective-c, protocols

我有一个创建 ObjectA 的视图控制器。然后 ObjectA 创建 ObjectB。ObjectB 需要从视图控制器获取一些值（我需要在创建对象后可以更改的值）。

我试图找出检索值的最佳方法。我的第一个想法是协议。到目前为止，我只在一个对象中创建了协议：

```
#import <UIKit/UIKit.h>

@protocol AnalysisTypeTableDelegate;

@interface AnalysisTypeTableViewController : UITableViewController

@property (weak, nonatomic) id <AnalysisTypeTableDelegate> delegate;

@property (strong, nonatomic) NSArray *dataSource;

@property (nonatomic) BOOL allowRefresh;

@end

@protocol AnalysisTypeTableDelegate <NSObject>

-(void)returnAnalysisType:(NSString *)type;

@end 
```

如何创建协议类（例如创建新文件、objective-c 协议）？

那么如何将它们链接在一起呢？ObjectA 有一个协议，我会做类似的事情吗：

```
// View controller and objectB both conform to myProtocol

// view controller creates objectA
myObjectA.delegate = self

// when objectA creates objectB
myObjectB.delegate = self.delegate 
```

还是有更好的方法来检索我需要的值？

编辑：

我想我需要做这样的事情：

objectA 的协议：

```
@protocol objectADelegate

-(NSDictionary)requestViewController;

@end 
```

objectB 的协议：

```
@protocol objectBDelegate

-(NSDictionary *)requestObjectA;

-(void)updateList:(NSSarray *)list;

@end 
```

在我的对象B

```
-(NSDictionary *)requestObjectA {
    NSDictionary *extents = [self.delegate requestObjectA];
}

-(void)serverCall {
    // make server call, get list
    ...
    // update myObjectA with new list
    [self.delegate updateList:newList]; 
```

在我的对象A

```
-(NSDictionary *)requestObjectA {
    return [self.delegate requestViewController];
}

-(void)updateList:(NSArray)list {
    // updates list
} 
```

在视图控制器中

```
-(NSDictionary *)requestViewController;
    return self.mapkit.exents;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:46:29.613

我假设您是说这是从您的视图控制器调用的：

```
myObjectA.delegate = self 
```

并且您正在从对象 A 调用以下行：

```
myObjectB.delegate = self.delegate 
```

从技术上讲，你可以做到这一点，尽管我觉得这个结构有点令人困惑。而且它甚至有点问题，因为您没有为视图控制器提供任何机制来说“好的，我不想再成为 a`delegate`了”，因为它大概只知道`myObjectA`. 您没有任何机制让视图控制器告诉`myObjectB`它不想再成为它`delegate`，因为大概视图控制器甚至不知道`B`' 的存在。

* * *

### 使用模型-视图-控制器模式

的概念`delegate`是“我想告诉我的`delegate`东西，或者提出一些要求”。另一方面，如果您的目标是在它们之间共享数据，我倾向于从委托协议模式转向[模型视图控制器](http://developer.apple.com/library/ios/#documentation/general/Conceptual/DevPedia-CocoaCore/MVC.html)(MVC) 模式，我们将专注于“模型”部分：

*   创建一个`Model`类来保存模型数据；

*   让视图控制器实例化一个`Model`类对象；

*   将指向`Model`对象的指针从一个视图控制器或对象传递给下一个视图控制器（或以其他方式使此模型对象可被其他类访问，例如，通过单例模式、应用程序委托属性等）；

*   确保您的`Model`类具有与正在维护的数据关联的属性（这样，其他类可以使用`Model`将为您合成的访问器方法）。

这在概念上与您用`delegate`指针概述的内容非常相似，但不包含这样`delegate`做的含义，即您不仅在访问数据，而且您可以告诉控制器做某事。在委托协议模式中，委托通常应该能够`delegate`在任何时候选择退出。

* * *

### 处理模型数据变化的不同方法

有几种方法可以将更改反映到其他对象中的模型对象（例如，告诉视图控制器模型数据已更改并且它必须反映该更改）。这些包括：

1.  使用代表。这可能是我在这里列出的最糟糕的方法，因为如果你想告诉多个对象模型数据的变化，你必须有多个委托（或它们的数组）。这是对代表的不良使用。

2.  重新加载`viewDidAppear`。如果您只处理确保视图控制器更新其视图以反映在另一个视图控制器上更改的数据，您可以在视图再次出现时刷新视图。这是最原始的解决方案，并且仅在您处理重新出现的视图控制器时才有效，例如，更改数据的模态视图已被解除。在那些简单的情况下，这通常是最简单的解决方案。

    ```
    - (void)viewWillAppear:(BOOL)animated
    {
        [super viewWillAppear:animated];

        [self updateField1Label];
        [self updateField2Label];
        [self.tableView reloadData];
    } 
    ```

3.  通过[注册通知](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/addObserver%3aselector%3aname%3aobject%3a)`NSNotificationCenter`。这样做的好处是多个对象可以将自己作为观察者添加到同一个通知中。例如，在 .m 文件中为您的通知定义一个键：

    ```
    NSString * const kNotificationField1Changed = @"com.log139.field1"; 
    ```

    然后，在 .h 文件中定义对该键的外部引用：

    ```
    extern NSString * const kNotificationField1Changed; 
    ```

    然后，想要收到更改通知的对象可以注册该通知：

    ```
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(handleField1Notification:)
                                                 name:kNotificationField1Changed
                                               object:nil]; 
    ```

    显然，您必须编写那个“处理程序”方法：

    ```
    - (void)handleField1Notification:(NSNotification*)notification
    {
        self.field1Label.text = self.model.name;
    } 
    ```

    最后，该模型字段可以发布通知的任何更新，例如：

    ```
    - (void)saveAndPop:(UITextField *)textField
    {
        self.model.field1 = textField.text;

        [[NSNotificationCenter defaultCenter] postNotificationName:kNotificationField1Changed
                                                            object:self
                                                          userInfo:nil];

        [self.navigationController popViewControllerAnimated:YES];
    } 
    ```

    如果您这样做，您只需要确保当注册通知的对象超出范围时，它还必须取消注册该通知：

    ```
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:kNotificationField1Changed
                                                  object:nil]; 
    ```

4.  使用[键值观察](http://developer.apple.com/library/ios/#documentation/general/Conceptual/DevPedia-CocoaCore/KVO.html)。同样，多个对象可以注册为模型属性的观察者。假设您已经为您的对象定义了三个属性（通过`@property`） 。`Model`任何想要收到更改通知的对象都可以将自己添加为这些属性的观察者，例如：

    ```
    [self.model addObserver:self forKeyPath:@"field1" options:0 context:NULL];
    [self.model addObserver:self forKeyPath:@"field2" options:0 context:NULL];
    [self.model addObserver:self forKeyPath:@"field3" options:0 context:NULL]; 
    ```

    然后你只需要编写一个[`observeValueForKeyPath`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/observeValueForKeyPath%3aofObject%3achange%3acontext%3a)方法：

    ```
    - (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
    {
        if ([keyPath isEqualToString:@"field1"])
            [self updateField1Label];

        else if ([keyPath isEqualToString:@"field2"])
            [self updateField2Label];

        else if ([keyPath isEqualToString:@"field3"])
            [self.field3TableView reloadData];
    } 
    ```

    这里唯一棘手的是，如果其中一个对象是一个集合（例如 a `NSMutableArray`），您必须编写[集合访问器](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-178830-BAJEDEFB)。有关更多示例，请参阅该文档。例如，虽然，我有一个模型，它的属性是一个宠物名称数组，`NSMutableArray *petNames`. 因此，我必须为我的模型编写以下两种方法：

    ```
    - (void)insertObject:(NSString *)petName inPetNamesAtIndex:(NSUInteger)index
    {
        [self.petNames insertObject:petName atIndex:index];
    }

    - (void)removeObjectFromPetNamesAtIndex:(NSUInteger)index
    {
        [self.petNames removeObjectAtIndex:index];
    } 
    ```

    我没有打电话`[self.model.petNames addObject:aPetName]`，而是打电话`[self.model insertObject:aPetName inPetNamesAtIndex:0];`（通过这样做，通知会自动发生）。

简而言之，如果您有多个对象需要在模型数据发生更改时收到通知，我认为键值观察是最优雅的方法，但如果处理它需要一点时间来解决它收藏品。我认为仅仅发布通知是一个相对简单的选择。

* * *

### 参考：

*   *Cocoa 核心能力*中的[模型视图控制器。](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)
**   *Objective-C 编程概念中的*模型[视图控制器。](http://developer.apple.com/library/ios/documentation/general/conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html#//apple_ref/doc/uid/TP40010810-CH14-SW1)**   [键值观察编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)。*   [键值编码编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html#//apple_ref/doc/uid/10000107-SW1)*   如果您使用 KVC 处理集合，请特别注意*Key Value Coding Programming Guide*[的 To-Many Properties 的集合访问器模式](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-178830-BAJEDEFB)部分。**

# unit-testing - EF 代码优先、唯一约束和测试

> ID：14878358
> 
> 赞同：0
> 
> 时间：2013-02-14T15:33:12.780
> 
> 标签：unit-testing, entity-framework-5, code-first, unique-constraint

我们目前正在通过直接在 Seed 方法中执行 SQL 来实现我们的唯一约束

```
context.Database.ExecuteSqlCommand(
    "BEGIN TRY ALTER TABLE MyTable ADD CONSTRAINT UC_CODE UNIQUE (COL1, COL2, COL3) END TRY BEGIN CATCH END CATCH"); 
```

但是，现在我无法为此正确编写测试。

我模拟了存储库，并插入了两次相同的记录，但是......当然，没有抛出错误，因为实际上并没有调用数据库（也不应该调用），但是我该如何编写一个测试确保插入重复记录时引发错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:14:43.070

> 我模拟了存储库，并插入了两次相同的记录，但是......当然，没有抛出错误，因为实际上并没有调用数据库（也不应该调用），但是我该如何编写一个测试确保插入重复记录时引发错误？

您误解了模拟和伪造依赖项的观点。伪造的存储库不应该做任何逻辑。如果您测试您的代码将如何对违反唯一约束的行为做出反应，您只需设置您的模拟以引发预期的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:44:03.227

单元测试需要调整要测试的代码。您想测试 EF+DB 对约束违规的反应。因此，您需要在真实（测试）数据库上运行测试，您可以在测试开始时创建该数据库。

# c# - 安装完成的程序时文件路径失败

> ID：14878359
> 
> 赞同：0
> 
> 时间：2013-02-14T15:33:11.213
> 
> 标签：c#, directory, exe, filepath

我有一个小问题：当我的程序运行时，我正在使用一些文件来查看报告，我已经创建了 setup .exe 文件并且工作正常，因为代码中有一个绝对路径，如下所示：

```
 ReportDocument crystalReport = new ReportDocument();
        crystalReport.Load("C:\\Program Files\\Electrolytic Capacitor Designer\\Crystal Reports\\SpecSheet.rpt"); 
```

当我在另一台计算机上安装程序并选择此安装路径时一切正常，但显然如果我选择另一台，程序提示我异常，因为找不到文件.....

有没有一种方法或类似的东西可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:15:25.033

如果您的路径有空格，则需要将路径用双引号引起来。您可能需要在 StartupPath 之前和 .rpt 之后添加双引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:14:41.773

尝试以管理员身份运行 exe。如果您的安装程序将其安装到 Program Files 文件夹，您将遇到文件权限问题。

如果这是问题所在（或者即使不是），请考虑使用其他文件夹（例如 My Documents 文件夹）而不是可执行路径来存储文件。

```
Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments); 
```

# java - Jetty重新启动时执行“生成资源”构建阶段？

> ID：14878363
> 
> 赞同：3
> 
> 时间：2013-02-14T15:33:21.900
> 
> 标签：java, jetty, less, gruntjs, maven-jetty-plugin

我正在使用 jetty-maven-plugin 作为我的 Web 应用程序的本地服务器。在构建的“生成资源”阶段，我执行 lessc 和 grunt 来分别编译我的 CSS 和 JavaScript。

我想使用 Jetty 的“scanIntervalSeconds”和“scanTargetPattern”配置来监视我的 .less 和 .js 文件，并在我对这些文件进行更改时运行我的构建。

我已经设置了那个部分，当我对这些文件进行更改时，Jetty 会重新启动，但是重新启动不会执行我的构建的“生成资源”阶段（我不确定它是否会执行我构建的任何部分）。

有没有办法指定 Jetty 重新启动时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:49:38.797

Maven 控制构建的“生成资源”阶段。

Jetty 的内部 webapp 热部署控制重新部署。

两者之间没有互动的设施。并且将该设施添加到 Jetty 将需要 Jetty 本身嵌入 maven 本身，这是一项不平凡的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T09:46:39.993

如果您正在寻找一种解决方案来查看页面重新加载时对 LESS 代码的更改，同时使用 jetty-maven-plugin 进行开发，但在构建 WAR 文件时预编译您的 LESS 代码以获得最大页面速度，您可能会我对这篇文章感兴趣：http: [//juplo.de/combining-jetty-maven-plugin-and-wro4j-maven-plugin-for-dynamic-reloading-of-less-resources/](http://juplo.de/combining-jetty-maven-plugin-and-wro4j-maven-plugin-for-dynamic-reloading-of-less-resources/)

# jquery - mouseleave 有效，但不是 focusout

> ID：14878379
> 
> 赞同：0
> 
> 时间：2013-02-14T15:34:08.857
> 
> 标签：jquery, focus, mouseevent

我正在使用 Jquery 自动完成功能，并且创建了一个自定义焦点方法。目标是在元素聚焦时呈现附加信息，然后在模糊时将元素返回到其默认状态。因为自动完成没有模糊方法，所以我使用 mouseleave 将我自己的方法组合在一起：

```
focus: function( event, ui ) {
  event.preventDefault();
  var menu = $(this).data("uiAutocomplete").menu.element;
  var focused = menu.find("li:has(a.ui-state-focus)");
  var child = $(focused).children().first();
  var item = ui.item.value;
  var text = "<div>" + item.name + "</div>";
  if (item.publications.length > 0) text += "<div>" + item.publications + "</div>";
  $(child).html(text).attr("name", item.name);
  $(focused).on("mouseleave", function() {
    $(child).html($(child).attr("name"))
  });
}, 
```

虽然这适用于鼠标悬停，但当用户使用键盘上下导航列表时它不起作用。为此，我需要使用诸如 focusout 之类的东西：

```
$(focused).on("focusout", function() {
  $(child).html($(child).attr("name"))
}); 
```

不幸的是，无论哪种方式，focusout 都没有明显的效果。没有错误消息，也没有更改的文本——甚至在鼠标悬停时也没有。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:46:19.907

赋予`li`(that )具有某些值`:has(a.ui-state-focus)`的属性。`tabindex`例如`<li tabindex="0"><a[...]</li>`。

LE：`tabindex`使`focus`html 元素成为可能。所以他们可以触发`focusout`模糊。

# c# - 根据类的名称在同一程序集中创建内部类的实例

> ID：14878381
> 
> 赞同：1
> 
> 时间：2013-02-14T15:34:13.507
> 
> 标签：c#, c#-4.0, reflection, types

我正在尝试创建与调用类在同一程序集中的内部类的实例。不幸的是，这对我不起作用。我正在使用以下代码片段：

```
Assembly businessAssembly = this.GetType().Assembly;
var concreteValidator = businessAssembly.CreateInstance(t.NotificationType.ValidatorClassName, true,
    BindingFlags.Default | BindingFlags.CreateInstance | BindingFlags.Instance | BindingFlags.NonPublic, 
    null, 
    new Object[] { t }, 
    null, 
    null); 
```

注意`t.NotificationType.ValidatorClassName`是在表格中`Namespace.ClassName`。那不应该做这项工作吗？我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:21:44.380

如果类是内部~~公共~~的并且构造函数是公共的，则该`CreateInstance`方法缺少公共绑定标志：

```
BindingFlags.Public 
```

这将成为：

```
Assembly businessAssembly = this.GetType().Assembly;
var concreteValidator = businessAssembly.CreateInstance(t.NotificationType.ValidatorClassName, true,
    BindingFlags.Default | BindingFlags.CreateInstance | BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public, 
    null, 
    new Object[] { t }, 
    null, 
    null); 
```

# php - 全文搜索的正确方法

> ID：14878383
> 
> 赞同：0
> 
> 时间：2013-02-14T15:34:14.887
> 
> 标签：php, mysql

我正在构建一个必须搜索一些表的搜索功能。我首先在所有需要搜索的字段上添加了一个全文索引（因此多个字段上的 1 个索引）。

然后，在我的 PHP 中，我执行以下查询

```
SELECT * FROM table WHERE MATCH (field1, field2, field3) AGAINST('search word') 
```

这是正确的方法吗？或者我应该分别在每个字段上添加索引，同时分隔查询（`MATCH (field1) AGAINST ... OR MATCH (field2) AGAINST...`）。

两者之间会有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:54:29.230

据我所知，FULL TEXT index + MATCH 方法是有效的，应该没有任何问题。只需确保您的 3 个字段是 CHAR、TEXT 或 VARCHAR。

也许您也有兴趣检索 MATCH 的“分数”。可以这样做：

```
SELECT *, MATCH (field1, field2, field3) AGAINST('search word') as score FROM table WHERE MATCH (field1, field2, field3) AGAINST('search word') ORDER BY score 
```

这个“分数”将告诉您找到的每个匹配项有多好。

也许你也应该看看`IN BOOLEAN MODE`。您必须将它放在 AGAINST 粒子 ( `AGAINST('search word') IN BOOLEAN MODE`) 之后，它会考虑搜索中的运算符，类似于 google 搜索。

例如：

+table：单词“table”必须出现在所有匹配项中。

~table：单词“table”不能出现在任何匹配中。

# excel - 修改vba代码以减少手动输入

> ID：14878384
> 
> 赞同：0
> 
> 时间：2013-02-14T15:34:16.140
> 
> 标签：excel, vba

我正在使用下面的代码来帮助自动化我的电子表格，一旦运行，我将使用另一个宏来自动发送电子邮件。我希望在这里实现的是进一步减少用户输入，因为目前，我需要在通过输入框请求时选择一个范围，但希望通过选择在 VBA 中预先确定的范围来自动化.

我相信这是我需要更新的 application.inputbox 区域，但是在浏览了其他帖子之后，找不到任何可以否定手动输入的内容。

```
Sub JoinCells()

Set xJoinRange = Application.InputBox(prompt:="Highlight source cells to merge",    Type:=8)
xSource = 0
xSource = xJoinRange.Rows.Count
xType = "rows"
If xSource = 1 Then
    xSource = xJoinRange.Columns.Count
    xType = "columns"
End If
Set xDestination = Application.InputBox(prompt:="Highlight destination cell", Type:=8)    If xType = "rows" Then
    temp = xJoinRange.Rows(1).Value
    For i = 2 To xSource
        temp = temp & " " & xJoinRange.Rows(i).Value
    Next i
Else
    temp = xJoinRange.Columns(1).Value
    For i = 2 To xSource
        temp = temp & " " & xJoinRange.Columns(i).Value
    Next i
End If

xDestination.Value = temp

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:40:35.583

我认为您正在寻找[Range](http://msdn.microsoft.com/en-us/library/office/aa139976%28v=office.10%29.aspx)。

您可以轻松设置所需的任何范围：

```
Dim xJoinRange as Range, xDestination as Range
xJoinRange = Range("D3:E45")
xDestination = Range("G3:H45") 
```

现在这将始终作用于当前/活动工作表中的这个范围。

如果要在特定工作表中指定范围，则需要`Worksheets()`这样：

```
Dim xJoinRange as Range, xDestination as Range
xJoinRange = Worksheets("myWorksheetName").Range("D3:E45")
xDestination = Worksheets("myWorksheetName").Range("G3:H45") 
```

# xml - 用于出口的产品的 RSS 提要

> ID：14878390
> 
> 赞同：1
> 
> 时间：2013-02-14T15:34:34.863
> 
> 标签：xml, rss

目前我坚持使用普通的 XML/RSS 提要，我希望能够在我的 RSS 中使用更多“属性”作为字段，如何做到这一点？我在 Items 中的字段现在命名为 title、link、sku、price 和 category。rss w3 验证器不接受这一点。但我不认为我理解命名空间的概念，如果需要它们或者我可以这样做我的提要？

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
<channel>
<title>Products from Category 1</title>
<link>www.linktoshop.com</link>
<description>Links from a category on my shop</description>
{{block type="product"}}
<item>
    <title>{{var title}}</title>
    <link>{{var link}}</link>
    <sku>{{var sku}}</sku>
    <price>{{var price}}</price>
    <category>{{var category}}</category>
</item>
{{/block}}
</channel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:37:18.807

RSS 元素不绑定到名称空间。RSS 提要中未绑定到名称空间的任何元素都必须是 RSS 元素。您可以将自定义元素添加到您的 RSS 提要项，但它们需要位于命名空间中。例如：

```
<p:sku xmlns:p="urn:rfidic:product:core:ACME:sku">{{var sku}}</p:sku>
<g:price xmlns:g="http://base.google.com/ns/1.0">{{var price}}</g:price> 
```

[命名空间](https://en.wikipedia.org/wiki/XML_namespace)有助于唯一限定元素和属性。

但是，除非您使用[众所周知的词汇表](http://validator.w3.org/feed/docs/howto/declare_namespaces.html)，否则验证器可能仍会报告命名空间未知的警告，并且您的数据可能无法与其他系统很好地互操作。您可能想检查其中一些 XML 词汇表，看看是否有任何内容适合您。

* * *

或者，您也可以只使用[`<category>`具有域属性的元素](http://www.rssboard.org/rss-profile#element-channel-item-category)：

```
<category domain="sku">{{var sku}}</category>
<category domain="price">{{var price}}</category> 
```

# c# - AutoMapper 异常

> ID：14878391
> 
> 赞同：0
> 
> 时间：2013-02-14T15:34:37.613
> 
> 标签：c#, automapper

当我运行代码行时 Mapper.Map(Account, User); 我收到“缺少类型映射配置或不支持的映射”异常。我还想指出这一行 Mapper.Map(Account); 不抛出异常并返回预期结果。我想要做的是将值从帐户移动到用户而不创建用户的新实例。任何帮助都会很棒。谢谢！

```
public class AccountUpdate
{
    [Email]
    [Required]
    public string Email { get; set; }

    [Required]
    [StringLength(25, MinimumLength = 3, ErrorMessage = "Your name must be between 3 and 25 characters")]
    public string Name { get; set; }

    public string Roles { get; set; }
}

public class User
{
    public User()
    {
        Roles = new List<Role>();
    }
    public int UserId { get; set; }
    public string Email { get; set; }
    public string Name { get; set; }
    public byte[] Password { get; set; }
    public byte[] Salt { get; set; }
    public DateTime CreatedOn { get; set; }
    public DateTime LastLogin { get; set; }
    public virtual ICollection<Role> Roles { get; set; }
}

Mapper.CreateMap<AccountUpdate, User>().ForMember(d => d.Roles, s => s.Ignore()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T15:39:33.363

您没有映射目标类的所有成员。

致电`Mapper.AssertConfigurationIsValid();`获取有关该问题的详细信息：

```
Unmapped members were found. Review the types and members below.
Add a custom mapping expression, ignore, add a custom resolver, or modify the source/destination type
==============================================================
AccountUpdate -> User (Destination member list)
ConsoleApplication1.AccountUpdate -> ConsoleApplication1.User (Destination member list)
--------------------------------------------------------------
UserId
Password
Salt
CreatedOn
LastLogin 
```

要解决此问题，请明确忽略未映射的成员。

* * *

我刚刚测试了这个：

```
Mapper.CreateMap<AccountUpdate, User>()
        .ForMember(d => d.Roles, s => s.Ignore())
        .ForMember(d => d.UserId, s => s.Ignore())
        .ForMember(d => d.Password, s => s.Ignore())
        .ForMember(d => d.Salt, s => s.Ignore())
        .ForMember(d => d.CreatedOn, s => s.Ignore())
        .ForMember(d => d.LastLogin, s => s.Ignore());

Mapper.AssertConfigurationIsValid();

var update = new AccountUpdate
{
    Email = "foo@bar.com",
    Name = "The name",
    Roles = "not important"
};

var user = Mapper.Map<AccountUpdate, User>(update);

Trace.Assert(user.Email == update.Email);
Trace.Assert(user.Name == update.Name); 
```

* * *

这也有效：

```
var user = new User();
Mapper.Map(update, user);

Trace.Assert(user.Email == update.Email);
Trace.Assert(user.Name == update.Name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T14:30:16.073

项目中记录了一个问题，概述了一个潜在的解决方案，即使用源对象作为映射，而不是目标。原始[线程在这里](https://github.com/AutoMapper/AutoMapper/issues/1386)，相关的代码示例是：

```
CreateMap<Source, Dest>(MemberList.Source) 
```

有人在链接问题中还写了一个更通用的扩展方法，这也可能有助于节省时间。

# javascript - 如何测试输入是否在 if 结构中具有焦点？

> ID：14878398
> 
> 赞同：0
> 
> 时间：2013-02-14T15:34:57.380
> 
> 标签：javascript, jquery

我现在在这里有这段代码，但是当你点击输入后，警报仍然出现，当它没有焦点时。如果可能的话，我也想摆脱点击功能，这样它只会在输入有焦点时发出警报。

```
$('#inputSize').click(function(){
    if ($('#inputSize').is(':focus')){
        $(document).keydown(function(e){
            if (e.keyCode == 38) { 
               alert( "up pressed" );
               return false;
            }
                if (e.keyCode == 40) { 
               alert( "down pressed" );
               return false;
            }
        });
    }
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:39:20.503

只需绑定到`keydown`输入上的事件。无需检查焦点，因为它暗示：

```
$('#inputSize').keydown(function(e) {    
    if (e.keyCode == 38) 
    { 
       alert( "up pressed" );
       return false;
    }

    if (e.keyCode == 40) 
    { 
       alert( "down pressed" );
       return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:36:50.183

有一个专门用于焦点的处理程序：

```
$('#inputSize').focus(function () {}); 
```

当具有给定 ID 的输入具有焦点时，这将调用传递的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:42:56.540

[您可以使用document.activeElement](https://stackoverflow.com/questions/3635495/jquery-1-4-2-isfocus-gives-syntax-error)测试它是否是焦点元素，如下所示：

```
 if($('#inputSize') == document.activeElement) {
      // #inputsize is focused
    } 
```

请注意，尽管大多数时候您的操作是在另一个元素上触发的，所以如果说您单击了一个按钮，那么它将具有焦点并且现在是活动元素，因此您无法通过按钮检查来检查这一点，因为该元素已经在大多数情况下，在您的事件触发时更改。

所以，你最终可能会成为

```
$('#inputSize').click(function(){

      if($('#inputSize') == document.activeElement){
        $(document).keydown(function(e){
            if (e.keyCode == 38) { 
               alert( "up pressed" );
               return false;
            }
                if (e.keyCode == 40) { 
               alert( "down pressed" );
               return false;
            }
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T16:00:43.190

```
$('#inputSize').keydown(function(e) {
    if (e.keyCode == 38) 
    { 
       alert( "up pressed" );
       return false;
    }
    if (e.keyCode == 40) 
    { 
       alert( "down pressed" );
       return false;
    }
}); 
```

# html - 仅当对象的不透明度为 1 时触发悬停事件

> ID：14878400
> 
> 赞同：3
> 
> 时间：2013-02-14T15:34:59.890
> 
> 标签：html, css, hover, opacity

当 时，我在将鼠标悬停在项目上时遇到了一些问题`opacity: 0;`，但是因为它们仍然存在于空间中（只是不可见），与 不同`display: none;`，任何附加到该对象的悬停事件仍然会发生。

无法真正发布我正在使用的代码，但我已经设置了一个[小提琴](http://jsfiddle.net/QwDwj/1/)，并提供了更多解释来模拟它。就像一个注释，我宁愿不使用任何 Javascript 来解决它，尽量保持纯 HTML/CSS。我还从下面的小提琴中发布了 HTML 和 CSS：

HTML：

```
<div class="container">
    <div class="secondary-container">
        .opacity-0 fills this box.
        <div class="opacity-0"></div>
        <div class="on-hover">Hello, world!</div>
    </div>
</div> 
```

CSS：

```
body {
    font-family: sans-serif;
}

.container {
    width: 200px;
    height: 200px;
    background-color: blue;
}

.container .secondary-container {
    width: 100px;
    height: 100px;
    margin: 0 auto;
    background-color: white;
    padding: 5px;
    box-sizing: border-box;
}

.container .secondary-container .opacity-0 {
    width: 100px;
    height: 100px;
    background-color: red;
    margin-top: -41px;
    margin-left: -5px;
    opacity: 0;
}

.on-hover {
    display: none;
    color: white;
}

.container .secondary-container .opacity-0:hover ~ .on-hover {
    display: block;
} 
```

以及解释：

将鼠标悬停在白色方块上，显示“Hello, world!”文字 应该显示（来自 div.on-hover）。但是，正如 CSS 中明确指出的那样，您实际上是在 .opacity-0 上悬停。

我需要能够将鼠标悬停在 .opacity-0 上，并且当不透明度为 0 时（即对象不可见，但仍存在于空间中），悬停事件不会触发。当不透明度为 1 并且您将鼠标悬停在 .opacity-0 上时，悬停事件会照常进行。最好不要使用 Javascript。

希望一切都有意义，很高兴回答有关它的任何问题，因为我意识到我可能没有很好地解释这一点。

感谢您的任何帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:05:18.433

尝试用`opacity:0;`http://jsfiddle.net/QwDwj/2/`visibility:hidden;` [替换](http://jsfiddle.net/QwDwj/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:10:18.867

我已经解决了 :) 首先，我需要说我忘记在 OP 中提到我需要使用 CSS3 过渡淡入该框 - 抱歉。

使用只是`visibility:hidden;`对过渡做了一些奇怪的事情，所以我所做的是同时使用可见性和不透明度。然后这两个转换，但可见性转换问题不再发生，因为不透明度显然更偏爱。谢谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:43:31.033

我不确定这是否可行。如果悬停元素，将使用悬停样式。不要忘记 CSS 不是一种编程语言。

为什么不使用 JavaScript 来满足您的需求？我很确定 jQuery 有一个 fadeOut 方法，可以将元素设置在淡入淡出显示的末尾：无。

或者您只是使用 display:none 并将您的 div 放入具有固定高度/宽度的 div 以保持您的布局？

如果你愿意，我可以加一个小提琴。

# javascript - 在纯 JavaScript 中查询字符串值并打开一个对话框

> ID：14878403
> 
> 赞同：0
> 
> 时间：2013-02-14T15:35:00.023
> 
> 标签：javascript, jquery

好的，我在另一个线程上找到了这段代码

[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)，并且在定位 URL 中的字符串值方面非常有帮助。现在我需要获取那个字符串值，并用它来打开一个对话框。

这是获取字符串值的原始代码

```
 function getParameterByName( name )
{
name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
var regexS = "[\\?&]"+name+"=([^&#]*)";
var regex = new RegExp( regexS );
var results = regex.exec( window.location.href );
if( results == null )
return "";
else
return results[1];
} 
```

这是我编写的用于搜索字符串并打开对话框的代码，但它并没有这样做。

```
var signup_param = getParameterByName( 'Redirect' );
if (signup_param == "signup") {
$('#emailDuplicateDialog').dialog('open');
} 
```

顺便说一句，我正在使用的 URL 以 login.html?redirect=signup 结尾，因此重定向是名称，而注册是值。

任何有关更改以使其工作的建议都会有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:24:36.943

`getParameterByName( 'Redirect' )`不应该`getParameterByName( 'redirect' )`吗？

此外，您可以调试变量`signup_param`以查看它的值。

# javascript - 将javascript动态插入页面时如何防止“操作不安全”警告？

> ID：14878406
> 
> 赞同：1
> 
> 时间：2013-02-14T15:35:08.043
> 
> 标签：javascript, jquery, security, dynamic

我正在尝试向 jQuery Mobile 页面动态添加元、链接和脚本块。

该脚本包含一个规则，我通过 javascript 添加到 CSS 样式表（不幸的是必须是这样的）。

看起来像这样：

```
<script type="text/javascript"
if ('addRule' in sheet) {
sheet.addRule(".splash:before",
  "background: url("' + x + '") no-repeat center center fixed; " +
  "-webkit-background-size: 100%; -moz-background-size: 100%; " +
  "-o-background-size: 100%; background-size: 100%; " +
  "-webkit-background-size: cover; -moz-background-size: cover;" +
  "-o-background-size: cover; background-size: cover;", 0);
} else if ('insertRule' in sheet) {
sheet.insertRule(".splash:before { " +
  "background: url("' + x + '") no-repeat center center fixed; " +
  "-webkit-background-size: 100%; -moz-background-size: 100%; " +
  "-o-background-size: 100%; background-size: 100%; " +
  "-webkit-background-size: cover; -moz-background-size: cover; "+
  "-o-background-size: cover; background-size: cover;" + " }", 0); 
}
</script> 
```

with`x`是背景图片的url，可以在代码块附加到页头时动态设置。

问题是：
我得到这个：

```
SecurityError: The operation is insecure. [Break On This Error]     
slice.call( docElem.childNodes, 0 )[0].nodeType; 
```

在 Firebug 中报告。

如果我为 x 硬编码一个 URL，它可以正常工作，所以我假设浏览器抱怨正在使用 URL 变量。

**问题：**
知道如何规避这个问题吗？我需要动态传递 URL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:39:50.437

这几乎总是与同源政策有关的问题。这意味着您正在加载的文件（背景图像、javascript 文件、css 文件等）必须是相同的域、相同的子域、相同的协议（http 与 https）和相同的端口。

此外，您是在本地运行还是在服务器上运行？在本地运行时您会遇到这些问题，因为从技术上讲，来源是“ *file:///* ”，因此如果您提供指向托管在服务器上的文件的链接，您可能会遇到这些错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T09:49:07.987

我遇到了同样的问题，它仅在您使用 sessionStorage 方法在本地打开文件时才会发生，因此请在 wamp 等 Web 服务器中运行它。

# c# - 如果监视的目录在启动时不为空，C# FileSystemWatcher 可以触发吗？

> ID：14878415
> 
> 赞同：1
> 
> 时间：2013-02-14T15:35:36.447
> 
> 标签：c#, directory, filesystemwatcher

基本上，我有这个程序可以检查目录中的变化，如果有任何东西被复制或创建到所述目录中，就会发生一些事情。这工作正常。但是如果程序启动时监视的目录不为空，我希望代码触发，这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:37:11.213

只需检查自己：

```
if (Directory.GetFiles(yourPath).Length != 0)
{
    //trigger your action
}
//else?
//set up the FileSystemWatcher 
```

# antlr4 - 使用参数测试规则

> ID：14878422
> 
> 赞同：4
> 
> 时间：2013-02-14T15:36:07.173
> 
> 标签：antlr4

我正在尝试在我的解析器中测试一些子规则，以检查变体。我正在检查的规则是表达式规则

```
expression: expression PLUS expression      # plusExpression
          | expression IS NOT? NULL         # nullExpression
          | columnIdentifier                # columnExpression
          | literal                         # literalExpression
          ; 
```

在生成的解析中，方法签名是：

```
public final ExpressionContext expression(int _p) throws RecognitionException { 
```

我无法确定要作为 _p 参数传递的值。

当我在解析器中检查对表达式方法的调用时，我看到 0 被传递。但是，当我尝试直接调用 parser.expression(0) 时，我得到一个空指针异常。

调用此子规则以启用单元测试的推荐方法是什么？

作为参考，这是我正在尝试编写的单元测试平台的代码：

```
private Expression parseExpression( String expressionString ) {

    DataProcessorLexer lexer = new DataProcessorLexer( new ANTLRInputStream( expressionString ) );
    DataProcessorParser parser = new DataProcessorParser( new CommonTokenStream( lexer ) );

    parser.removeErrorListeners();
    parser.addErrorListener( new DiagnosticErrorListener() );

    // Perform the Parse
    ParseTree tree = parser.expression(0);

    ParseTreeWalker walker = new ParseTreeWalker();
    statementWalker = new StatementWalker();
    walker.walk( statementWalker, tree );

    return statementWalker.getExpressionValue( tree );
} 
```

# zend-framework - Zend Acl 数据库驱动加载所有数据

> ID：14878425
> 
> 赞同：2
> 
> 时间：2013-02-14T15:36:27.173
> 
> 标签：zend-framework, acl

我一直在阅读 Zend 框架的 Zend_Acl 组件。我想实现一个数据库驱动的解决方案，但注意到我已经从数据库中加载所有角色、权限和资源来构建 ACL。根据需要将这些规则延迟加载到 ACL 中看起来并不容易或不可能。看起来如果实现了任何延迟加载，整个 Zend_Acl 类都必须被删除。有没有人有一个很好的例子来说明如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T11:35:51.973

The approach I would recommend is to build the ACL from the DB and cache it with Zend_Cache so it doesn't need to be loaded with every request.

Firstly, build the ACL object with `$acl = new Zend_Acl();` Then get your roles, resources and permissions from the DB. Loop through your resources and roles and add them with `$acl->addResource()` and `$acl->addRole()`, then add permissions with `$acl->allow()`

Assuming you have bootstrapped your `$cache` object and it is available here (via Zend_Registry or whatever), do something like:

```
if (($acl = $cache->load('acl')) === false) {
  $acl = $this->_buildACL(); // Build you ACL in the _buildAcl() method
  $cache->save($acl, 'acl', array('ACL'));
}
Zend_Registry::set('acl', $acl); 
```

# c# - 实现 IEnumerable 时 LINQ 会感到困惑 两次

> ID：14878427
> 
> 赞同：14
> 
> 时间：2013-02-14T15:36:27.977
> 
> 标签：c#, linq, generics, collections, ienumerable

我的班级实施`IEnumerable<T>`了两次。**我怎样才能让 LINQ 工作而无需`hashtable`每次都进行强制转换？**

* * *

我编写了自己的协变哈希表实现，它也继承自 .NET 的`IDictionary<TKey, TValue>`. 最终，它`IEnumerable<T>`使用不同类型的`T`. 我隐式地实现了主要的可枚举接口，而另一个显式地实现了。像这样的东西（伪代码）：

```
class HashTable<TKey, TValue> :
    ...
    IEnumerable<out IAssociation<out TKey, out TValue>>,
    IEnumerable<out KeyValuePair<TKey, TValue>>
{
    // Primary:
    public IEnumerator<IAssociation<TKey, TValue>> GetEnumerator();
    // Secondary:
    IEnumerator<KeyValuePair<TKey, TValue>> IEnumerable<KeyValuePair<TKey, TValue>>.GetEnumerator();
} 
```

当我`foreach`使用哈希表时，它[按预期](https://stackoverflow.com/a/7646493/146622)采用了主要的可枚举：

```
using System;
using System.Collections.Generic;
using System.Linq;

var hashtable = new HashTable<string, int>();
foreach (var kv in hashtable)
{
    // kv is IAssociation<string, int>
} 
```

现在我希望它在 LINQ 中做同样的事情，但它会向我抛出编译器错误，因为它不知道为扩展方法选择哪个接口：

```
var xs1 = from x in hashtable          // <-- 1
          select x;

var xs2 = hashtable.Select(x => x);    // <-- 2 
```

> 错误 1：找不到源类型“HashTable”的查询模式的实现。未找到“选择”。考虑明确指定范围变量“x”的类型。
> 
> 错误 2：“HashTable”不包含“Select”的定义，并且找不到接受“HashTable”类型的第一个参数的扩展方法“Select”（您是否缺少 using 指令或程序集引用？）

也许有一些我不知道的接口或继承技巧？

* * *

对于那些询问的人，这里是完整的接口树：

```
using SCG = System.Collections.Generic;

public class HashTable<TKey, TValue>
    : IKeyedCollection<TKey, TValue>, SCG.IDictionary<TKey, TValue>

public interface IKeyedCollection<out TKey, out TValue>
    : ICollection<IAssociation<TKey, TValue>>

public interface ICollection<out T> : SCG.IEnumerable<T>

public interface IAssociation<out TKey, out TValue>

// .NET Framework:
public interface IDictionary<TKey, TValue>
    : ICollection<KeyValuePair<TKey, TValue>>

public interface ICollection<T>
    : IEnumerable<T> 
```

现在你可以明白为什么我做不到`KeyValuePair<TKey, TValue>`了`IAssociation<TKey, TValue>`。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-14T15:41:40.947

重要的是要了解，在将表达式用作方法调用的参数时，编译器没有“主要”和“次要”接口实现的概念。就这些类型的转换而言，您的类型实现了两者`IEnumerable<IAssociation<...>>`并且`IEnumerable<KeyValuePair<...>>`同样出色。这就是编译器需要更多信息的原因。

最简单的方法（IMO）是引入两个新属性：

```
public IEnumerable<IAssociation<TKey, TValue>> Associations { get { return this; } }
public IEnumerable<KeyValuePair<TKey, TValue>> KeyValuePairs { get { return this; } } 
```

这意味着您可以很容易地具体化：

```
var query = from x in table.Associations
            ...; 
```

或者

```
var query = from x in table.KeyValuePairs
            ...; 
```

这不仅有助于让编译器满意——它也会帮助任何试图阅读代码的人。如果你发现你使用其中一个比另一个*多得多*，你总是可以`HashTable`只实现一个`IEumerable<>`并键入并保留另一个属性。

# javascript - JSON.parse() 不适用于 jQuery 数据对象

> ID：14878428
> 
> 赞同：2
> 
> 时间：2013-02-14T15:36:32.240
> 
> 标签：javascript, jquery, json

我通过 jQuery 得到一个 JSON 文件`$.getJSON(url, function(data) {`......并且想用其中一个来解析它

```
var obj = JSON.parse(data); 
```

或者

```
var obj = jQuery.parseJSON(data); 
```

第一行给我“语法错误”（使用 IE8，应该支持`JSON.parse`），第二行给我“'center' is null or not an object”。

这是我正在使用的有效 JSON 文件：

```
{
"center":{"lat":"51.99637","lon":"13.07520"},
"locations":
[
    { "name":"a string","info":"another string" },
    ... some more here ...
]
} 
```

我对Javascript不太熟悉。我究竟做错了什么？

如果我使用一个简单的 JSON 数组（= 只是位置的内容），我会使用`$.each`. 在我可以使用 JSON.parse 之前，我是否必须对数据做一些事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:37:55.937

问题是函数的名称有点误导：它没有给你，`JSON`但已经是一个解析的对象。它所做的是获取一些`JSON`并为您解析它。

`data`是一个普通的 javascript 对象，你不需要解析它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:38:04.847

$.getJSON 将为您解析数据 - 您无需事后手动解析。

# android - 对齐 TextView、Button、EditText

> ID：14878431
> 
> 赞同：0
> 
> 时间：2013-02-14T15:36:54.737
> 
> 标签：android, alignment

如何将我的 TextView 和 Button 向左对齐，EditText 和 Button 向右对齐？这是包含未对齐项的表单。

![在此处输入图像描述](../Images/f9059f1249be1cdd5a8d456ef2f23fb1.png)

我的xml文件是：

```
<LinearLayout xmlns:tools="http://schemas.android.com/tools"
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout>

<RelativeLayout
    android:id="@+id/PlateEntryRelativeLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/RequestButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/PlateEdit"
        android:text="@string/request" />

    <TextView
        android:id="@+id/PlateTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/PlateEdit"
        android:layout_alignBottom="@+id/PlateEdit"
        android:layout_alignParentLeft="true"
        android:text="@string/plate"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/PlateEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@android:drawable/editbox_background"
        android:ems="10"
        android:gravity="right|center_vertical" />

</RelativeLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:fitsSystemWindows="false"
        android:text="ToggleButton" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:01:38.117

你可以简单地把它放到 textview

```
android:paddingLeft="4dp" 
```

但我建议你检查这个问题 [Can't get rid of bottom padding on button](https://stackoverflow.com/questions/5211774/cant-get-rid-of-bottom-padding-on-button)

# c++ - opencv 和 imwrite

> ID：14878433
> 
> 赞同：0
> 
> 时间：2013-02-14T15:36:55.877
> 
> 标签：c++, opencv

我正在尝试在磁盘上写入帧：

…………

```
cv::Mat frame,frame32f;
char filename[40];
cv::Mat mean;
const int count =134;
const int width  = 1920;
const int height = 1080;
cv::Mat resultframe = cv::Mat::zeros(height,width,CV_32FC3);
cv::Mat deviationframe = cv::Mat ::zeros(height,width,CV_32FC3);
cv::Mat deviationframe2write = cv::Mat ::zeros(height,width,CV_32FC3);
cv::Mat temp = cv::Mat ::zeros(height,width,CV_32FC3);
for(int i = 1 ; i<= count; i++){
    sprintf(filename,"d:\\BMdvideos\\images\\image%d.tiff",i);
    frame = imread(filename,CV_LOAD_IMAGE_COLOR);
    frame.convertTo(frame32f,CV_32FC3 );
    resultframe +=frame32f;
    frame.release();
}
resultframe *= (1.0/count);
for(int j =1; j<count; j++){
    sprintf(filename,"d:\\BMdvideos\\images\\image%d.tiff",j);
    frame = imread(filename,CV_LOAD_IMAGE_COLOR);
    frame.convertTo(frame32f,CV_32FC3);
    temp =(frame32f - resultframe);
    deviationframe+= temp.mul(temp);

    //temp.release();
}
deviationframe *= 1.0/(count -1);
deviationframe2write +=deviationframe;
cv::sqrt(deviationframe2write,deviationframe2write);
deviationframe= deviationframe/255;
cv::sqrt(deviationframe,deviationframe);
cv::imwrite("mean.tif",resultframe);
cv::imwrite("stdDev.tif",deviationframe2write);
resultframe *= 1.0/255.0;
imshow("mean ",resultframe);

imshow("deviation frame ",deviationframe);
waitKey(0);
return 0; 
```

}

如您所见，我在将平均值乘以 255 之前写下了平均值，但是`deviationframe`这不起作用，这意味着我确实保存了`deviationframe2write`但是当我打开它时它只是黑色的，知道我在这里缺少什么吗？提前致谢

# php - 问题尝试查看两个日期之间的所有约会

> ID：14878435
> 
> 赞同：0
> 
> 时间：2013-02-14T15:37:01.587
> 
> 标签：php, mysql

你好。下面的代码有问题，但看不到任何问题。

我正在尝试在用户输入的日期内从约会表中获取所有约会并将它们显示在表格中。我收到语法错误。

我的mysql查询如下：

```
$result = mysql_query("SELECT * FROM appointment 
    WHERE Appointment_Date BETWEEN $fromDate AND $toDate 
    AND Practice_ID = '$prac' ORDER by Appointment_Time");
while ($row = mysql_fetch_array($result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:42:28.070

您在这里缺少一个括号：

```
while ($row = mysql_fetch_array($result); // << 2 brackets needed at the end 
```

而不是分号，您需要一个适当的 while 循环。

```
while(...)
{
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:38:05.173

日期用单引号括起来，

```
$result = mysql_query("
        SELECT  * 
        FROM   appointment 
        WHERE  Appointment_Date BETWEEN '$fromDate' AND '$toDate' 
               AND Practice_ID = '$prac' 
        ORDER  BY Appointment_Time"); 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# php - 让 Apache/PHP 根据作为 PHP 执行的文件的文件扩展名设置 MIME 类型

> ID：14878438
> 
> 赞同：1
> 
> 时间：2013-02-14T15:37:10.990
> 
> 标签：php, apache, mime-types

我有一个基于 Apache/PHP 的服务器，我在其上执行了 Apache `js`，`html`并`css`通过以下行中的 PHP 文件`/etc/mime.types`：

> 应用程序/x-httpd-php phtml pht php js html css

我们这样做是因为即使我们保存为`.html`/ `.js`/`.css`的任何文件几乎完全是非 PHP 的，我们也需要在它们中做一些模板化（例如，根据我们是在现场还是在测试中更改某些 URL 的域服务器）。

问题是，这种让 Apache 将这些文件视为 PHP 的方法会导致它们返回错误的 MIME 类型，这至少会破坏`css`Chromium 中的文件，并且可能还会在其他浏览器中产生令人讨厌的影响。

有没有办法告诉 Apache 将这些文件作为 PHP 执行，但仍以正确的 MIME 类型输出它们的文件扩展名？我不想手动粘贴

```
<?php
  header("Content-type: text/css");
?> 
```

在我们所有`.css`文件的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:41:46.440

> 我们这样做是因为即使我们保存为 .html/.js/.css 的任何文件几乎完全是非 PHP 的，我们也需要在它们中做一些模板化

那么为什么不在主文档中做动态部分，无论如何你都是动态的呢？通过 PHP 解释器运行所有资源是一种浪费。

对于 JavaScript：

```
<script>
domain = "<? echo $domain; ?>";  <----- dynamic bits here
</script>
<script src="xyz.js"></script>   <----- you can use them in xyz.js 
```

对于 CSS：

```
<link rel="stylesheet" href="stylesheet.css">

<style type="text/css">
 /* insert dynamic CSS here, overriding parts from the static style sheet */

 .my_div { color: <? echo $color; ?> }

</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-14T22:08:07.463

似乎值得注意的是，我最终需要问这个问题的唯一原因是我采用了错误的方法来让PHP`.js`执行`.css`文件。

不要修改您的`mime.types`文件来实现这一点。相反，在您的 Apache 配置（或`.htaccess`文件）中，使用如下调用：

```
<Files *.js>
    ForceType application/x-httpd-php
    Header set Content-Type "application/javascript"
</Files>
<Files *.css>
    ForceType application/x-httpd-php
    Header set Content-Type "text/css"
</Files> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:41:13.730

你可以通过两种方式做到这一点：

1.  创建一个`.htaccess`文件。

    现在在这个文件中，将所有 PHP 文件读取为`.js`或`.css`. 理想情况下，您将拥有类似: 的文件`style.css.php`，`scripts.js.php`并由 Apache 执行，但用户将获取 URL 为`style.css`,`scripts.js`等。

2.  使用**Mime 类型**。

    正如您已经说过的，通过使用以下内容，您可以使这些在 PHP 中执行。

    ```
    application/x-httpd-php phtml pht php js html css 
    ```

    或者另一种方式是这样的：

    ```
    <FilesMatch "^.*?css*?$">
        SetHandler php5-script
    </FilesMatch> 
    ```

# sphinx - SphinxQL - 如何匹配单个字符串中的单词

> ID：14878440
> 
> 赞同：0
> 
> 时间：2013-02-14T15:37:11.307
> 
> 标签：sphinx, match, sphinxql

我有以下和其他几个字符串索引。所有的词都粘在一起了。

> 绳子是一种灵活的绳索或绳索，用于系住、捆绑或悬挂其他物体。

这是维基百科的一句话。

> 绳子是一种灵活的绳索或麻绳，用于系住、捆绑或悬挂其他物体。

我使用 SphinxQL 搜索几个单词。例如

```
SELECT * FROM sentences WHERE MATCH('piece rope bind'); 
```

这应该返回上面的字符串作为结果，但它返回 0 行。

查询应该如何看起来不查找单词，而是简单地匹配字符串中的单词？

我已经玩过排名器选项，例如

```
SELECT * FROM sentences WHERE MATCH('piece rope bind') OPTION ranker=matchany'; 
```

但没有成功。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:05:26.680

使用`min_infix_len`- 启用中缀搜索[http://sphinxsearch.com/docs/current.html#conf-min-infix-len](http://sphinxsearch.com/docs/current.html#conf-min-infix-len)

你可能想要`enable_star = 0`

或者，也许您可​​以在索引之前使用 WordBreaker 重新分解长字符串:) [http://sphinxsearch.com/blog/2013/01/29/a-new-tool-in-the-trunk-wordbreaker/](http://sphinxsearch.com/blog/2013/01/29/a-new-tool-in-the-trunk-wordbreaker/)

# c++ - 正常估计曲率场返回 NAN

> ID：14878443
> 
> 赞同：1
> 
> 时间：2013-02-14T15:37:24.817
> 
> 标签：c++, normals, point-clouds, point-cloud-library

我正在计算有组织的点云的表面法线，如下所示：

```
pcl::PointCloud<pcl::PointXYZRGB>::Ptr cloud = create_point_cloud_ptr(cap_depth, cap_rgb);

// estimate normals
pcl::PointCloud<pcl::Normal>::Ptr normals (new pcl::PointCloud<pcl::Normal>);

pcl::IntegralImageNormalEstimation<pcl::PointXYZRGB, pcl::Normal> ne;
ne.setNormalEstimationMethod (ne.AVERAGE_3D_GRADIENT);
ne.setMaxDepthChangeFactor(15);
ne.setNormalSmoothingSize(10.0f);
ne.setInputCloud(cloud);
ne.compute(*normals); 
```

当我遍历法线时，所有点的曲率场都设置为 NAN。我在计算中做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:39:41.413

原来该`AVERAGE_3D_GRADIENT`方法不计算表面曲率，需要使用`ne.COVARIANCE_MATRIX`

# php - 按另一个数组的顺序对关联数组的数组进行排序，其中数组的长度不同

> ID：14878444
> 
> 赞同：2
> 
> 时间：2013-02-14T15:37:25.747
> 
> 标签：php, arrays, multidimensional-array, sorting

这是一个棘手的解释..

按所需顺序排列的类别数组

```
Array
(
[0] => products
[1] => installation
[2] => software setup
[3] => aftecare & warranty
[4] => other
) 
```

以及各自类别的另一组问题/答案-

```
Array
(
[installation] => Array
    (
        [0] => Array
            (
                [question] => Third FAQ
                [answer] => Another sample FAQ question
            )

    )

[products] => Array
    (
        [0] => Array
            (
                [question] => Another FAQ
                [answer] => This is a sample FAQ answer.
            )

    )
) 
```

然后我需要对这个数组进行排序，以便类别与第一个数组的顺序相同。（即安装前的产品）

我尝试了array_multisort() 和usort()，multisort 抛出一个数组，数组长度不同，而usort() 需要cmp 函数返回一个整数，这让我有些难过。

感激地收到任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:43:36.230

尝试这个：

```
$flipped_categories = array_flip($categories);
array_merge($flipped_categories, $product_array); 
```

这应该为您提供一个数组，其中第一个数组以正确的顺序现在包含每个数组中的常见问题解答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:45:37.860

你可以试试

```
$sorted = array();
foreach ( $data as $name ) {
    foreach ( $data2 as $k => $part ) {
        if ($k == $name) {
            $sorted[$k] = $part;
        }
    }
}

print_r($sorted); 
```

[看演示](http://eval.in/9859)

# sql-server - 使用数据库中的记录填充自定义树

> ID：14878452
> 
> 赞同：1
> 
> 时间：2013-02-14T15:37:58.107
> 
> 标签：sql-server, asp.net-mvc, umbraco

我最近开始使用 Umbraco，并且正在研究如何将我自己的自定义部分添加到其中。

到目前为止，我已经设法添加了一个新部分，并且我还开始在各种博客文章的帮助下添加自定义树，例如：[http ://www.robertgray.net.au/2011/5/10/creating -a-custom-content-tree-in-umbraco](http://www.robertgray.net.au/2011/5/10/creating-a-custom-content-tree-in-umbraco)和[http://www.geckonewmedia.com/blog/2009/8/3/how-to-create-a-custom-section-in-umbraco-4](http://www.geckonewmedia.com/blog/2009/8/3/how-to-create-a-custom-section-in-umbraco-4)

这个新部分的目的是显示我想存储在数据库中的查询。记录只需要查看但不可编辑。

到目前为止，我有一个名为“查询”的根节点和一个名为“一般查询”的节点。我想将所有查询列为“General Enquiries”的子节点，然后单击时，我希望能够在右侧的主要区域中显示查询详细信息。

在上面链接的第一篇博客文章中，提供了以下代码来演示如何显示子节点：

```
using atomicf1.domain.Repositories;
using atomicf1.persistence;
using umbraco.cms.presentation.Trees;

namespace atomicf1.cms.presentation.Trees
{
    public class loadDrivers : BaseTree
    {
        private IDriverRepository _driverRepository;

        public loadDrivers(string application) : base(application)
        {
            _driverRepository = new DriverRepository();
        }

        protected override void CreateRootNode(ref XmlTreeNode rootNode)
        {
            rootNode.Icon = FolderIcon;
            rootNode.OpenIcon = FolderIconOpen;
            rootNode.NodeType = TreeAlias;
            rootNode.NodeID = "init";
        }

        public override void Render(ref XmlTree tree)
        {           
            var drivers = _driverRepository.GetAll();

            foreach(var driver in drivers) {
                var dNode = XmlTreeNode.Create(this);
                dNode.NodeID = driver.Id.ToString();
                dNode.Text = driver.Name;
                dNode.Icon = "user.png";
                dNode.Action = "javascript:openDrivers(" + driver.Id + ")";
                tree.Add(dNode);
            }            
        }

        public override void RenderJS(ref System.Text.StringBuilder Javascript)
        {
            Javascript.Append(
                @"
                    function openDrivers(id) 
                    {
                        parent.right.document.location.href = 'plugins/atomicf1/editDriver.aspx?id=' + id;
                    }
                ");
        }
    }
} 
```

据我所知，这个例子中的“驱动程序”似乎是从`_driverRepository`. 但是，似乎没有任何代码示例解释它是什么以及它是如何从数据库中实际检索数据的。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:55:24.377

让我先说我对 Umbraco 知之甚少，所以这只是基于观察！

如果您查看链接到 Robert Gray 的博客文章的[github 存储库中的源代码，您会发现](https://github.com/robgray/f1speedguides)[DriverRepository](https://github.com/robgray/f1speedguides/blob/master/src/atomicf1.persistence/DriverRepository.cs)的实现（它只是底层通用[AbstractRepository](https://github.com/robgray/f1speedguides/blob/master/src/atomicf1.persistence/AbstractRepository.cs)抽象基类的 shell 子类，实际工作发生在这里）。此代码与 Umbraco 无关，它只是与[NHibernate](http://nhforge.org/)结合的 Repository Pattern 的实现，用于在本例中位于 Umbraco 之上的示例 F1 应用程序中的数据访问。这段代码所做的是从应用程序中检索所有驱动程序，循环它们并在 Umbraco 中创建相应的 XmlTreeNode。

在您的情况下，您只需将 (I)DriverRepository 的引用替换为您在应用程序中使用的任何数据访问机制。

例如，如果您要对 Robert 采取类似（尽管更简单）的方法，您的应用程序中可能会出现以下内容：

```
public class EnquiryRepository : IEnquiryRepository {

  // Methods for saving Enquiries, retrieving single Enquiries etc would go here...

  public IEnumerable<Enquiry> GetAll() {
    // Data access logic here - retrieve via NHibernate, Entity Framework,
    // ADO.net, in-memory objects (as below) etc.
    var enquiries = new List<Enquiry>
    {
      new Enquiry('Enquiry 1 title', 'Enquiry 1 content'),
      new Enquiry('Enquiry 2 title', 'Enquiry 2 content'),
      new Enquiry('Enquiry 3 title', 'Enquiry 3 content')
    }
    return enquiries;
  }

} 
```

然后，您将以与 Robert 类似的方式在 Umbraco BaseTree 子类中使用它（循环并创建 XmlTreeNodes 等）。

# c# - 在回发期间访问转发器内动态创建的控件

> ID：14878453
> 
> 赞同：0
> 
> 时间：2013-02-14T15:37:59.603
> 
> 标签：c#, asp.net, reporting-services, repeater, reportviewer

我有一个带有 ReportViewer 控件的 ASP.NET 页面，该控件显示由 GET 参数指定的 SSRS 报告。我正在隐藏 ReportViewer 的 ParameterHeader 并使用 ListBox 和 CalendarExtender 等控件在 ASP.net 页面上自己显示参数（我这样做是因为不是每个人都可以查看所有内容，并且我想控制选择的报告参数显示哪些部分）。

参数的数量/类型因报告而异，因此我将`<asp:Repeater>`数据绑定到报告的参数（我使用`ServerReport.GetParameters()`），然后动态创建下拉/文本框/日历控件并将它们添加到`ParameterEntryPlaceholder`in `ReportParameterEditRepeater_ItemDataBound`.

```
<table><tr>
    <td>
    <asp:Repeater ID="ReportParameterEditRepeater" OnItemDataBound="ReportParameterEditRepeater_ItemDataBound" runat="server">
        <HeaderTemplate>
            <table>
        </HeaderTemplate>
        <ItemTemplate>
            <%#Container.ItemIndex % 4 == 0 ? "<tr>" : "" %>
                <td><b><%#((ReportParameterInfo)Container.DataItem).Prompt %>: </b></td>
                <td><asp:PlaceHolder runat="server" ID="ParameterEntryPlaceholder"></asp:PlaceHolder></td>
            <%#Container.ItemIndex % 4 == 3 ? "</tr>" : "<td style='width: 20px;'></td>" %>
        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater>
    </td>
    <td>
        <asp:UpdatePanel ID="ReportRefreshUpdatePanel" ChildrenAsTriggers="True" runat="server">
            <ContentTemplate>
                <asp:Button ID="ViewReportBtn" runat="server" OnClick="ViewReportBtn_Click" Text="View Report" />
            </ContentTemplate>
        </asp:UpdatePanel>
    </td>
</tr></table> 
```

我的控件旁边有一个`<asp:Button>`标记为“查看报告”的方法，它启动了一个方法，该方法旨在收集所有参数控件的值，在 ServerReport 上设置它们，然后异步刷新报告。

但是，在“查看报告”回发期间，我看不到动态创建的控件 - ParameterEntryPlaceholder 为空。如果我重新绑定中继器，我可以看到它们，但如果我这样做，我会丢失用户的选择。

TL；DR - 如何在页面加载期间、回发期间访问我从代码后面创建/添加到表单的控件，而无需重新绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:00:56.120

无论您做什么，都**需要**重新绑定才能看到控件。您遇到的问题是**在**页面的生命周期中您正在重新绑定。

在回发期间，您需要在 OnInit 页面事件期间重新绑定动态添加的控件。这将允许恢复 ViewState。

# java - Spring - TimerTask 实现运行两次

> ID：14878461
> 
> 赞同：3
> 
> 时间：2013-02-14T15:38:15.857
> 
> 标签：java, spring, tomcat7, timertask

我有一个简单的 TimerTask 实现，它只打印到 System.out

```
public class RefreshUserAndOLStatsJob extends TimerTask {  
   public void run() {
     System.out.println("RefreshUserAndOLStatsJob running at: " + new Date(this.scheduledExecutionTime()));     
   }
} 
```

它在 Spring 应用程序上下文中配置如下

```
<bean id="refreshUserAndOLStatsTask" class="org.springframework.scheduling.timer.ScheduledTimerTask">
    <!-- run every 30 secs -->
    <property name="period" value="30000" />
    <property name="timerTask" ref="refreshUserAndOLStatsJob" />
</bean>
<bean class="org.springframework.scheduling.timer.TimerFactoryBean">
    <property name="scheduledTimerTasks">
        <list>
            <ref local="refreshUserAndOLStatsTask" />
        </list>
    </property>
</bean> 
```

它应该每 30 秒运行一次。它会这样做，但每次运行都会这样做两次，这从系统输出中可以看出

```
RefreshUserAndOLStatsJob running at: Thu Feb 14 20:59:01 IST 2013
RefreshUserAndOLStatsJob running at: Thu Feb 14 20:59:02 IST 2013
RefreshUserAndOLStatsJob running at: Thu Feb 14 20:59:31 IST 2013
RefreshUserAndOLStatsJob running at: Thu Feb 14 20:59:32 IST 2013
RefreshUserAndOLStatsJob running at: Thu Feb 14 21:00:01 IST 2013
RefreshUserAndOLStatsJob running at: Thu Feb 14 21:00:02 IST 2013
RefreshUserAndOLStatsJob running at: Thu Feb 14 21:00:31 IST 2013
RefreshUserAndOLStatsJob running at: Thu Feb 14 21:00:32 IST 2013
RefreshUserAndOLStatsJob running at: Thu Feb 14 21:01:01 IST 2013
RefreshUserAndOLStatsJob running at: Thu Feb 14 21:01:02 IST 2013
RefreshUserAndOLStatsJob running at: Thu Feb 14 21:01:31 IST 2013 
```

有人能猜出为什么会这样。

编辑 1：我在 Tomcat7

编辑 2：在添加 hashCode 时，正如 Matt 所怀疑的那样，有 2 个单独的 RefreshUserAndOLStatsJob 实例。似乎应用程序上下文确实被初始化了两次。

至于refreshUserAndOLStatsJob在application context xml中的初始化，并没有显式声明，但是因为RefreshUserAndOLStatsJob是一个标记为@Component的类，看来Spring可以自动加载。

# image - 如何生成纹理映射图像？

> ID：14878467
> 
> 赞同：5
> 
> 时间：2013-02-14T15:38:28.620
> 
> 标签：image, opencv, image-processing, mapping, textures

我想将图像放置/包装到 3D 对象。为了让事情变得简单和快速，我不想使用（和学习）3D 库，而是使用映射图像。映射图像的使用方式如下：

![映射使用](../Images/7d90dfc44537b62d5d4e771a0b5dad5b.png)

因此，您为每个对象生成一次映射图像，并为要包装的所有图像使用相同的映射。

我的问题是如何生成这样的映射图像（给定 3D 模型）？由于我不知道术语，我的搜索失败了。抱歉，如果我使用了错误的术语。

您可以在下面看到工作流程的描述。
![在此处输入图像描述](../Images/34779bf4dc51fffff84260db8f516b5e.png)
我有对象和输入图像的 3D 模型，我想生成可用于生成纹理图像的映射图像。

我什至不知道从哪里开始，任何指针表示赞赏。

**更多信息**

我最初的想法是使用外部程序以某种方式包装身份映射（见下文）。我在 Photoshop 中生成了水平和垂直渐变图像，只是为了查看映射是否使用 Photoshop 生成的图像。结果看起来不太好。我不抱希望，但值得一试。

输入
![在此处输入图像描述](../Images/aaab1f2dce309d4882b9e83f33368b6d.png)

映射（x 和 y），他们只是调整图像的大小，他们没有做任何花哨的事情。
![在此处输入图像描述](../Images/927ef0e5abaf508a2805eaefeae297d5.png) ![在此处输入图像描述](../Images/28436c0505a910a951aa40ce50f4064c.png)

结果
![在此处输入图像描述](../Images/e95273e179f64228930baa0d87bbd07e.png)
如您所见，有很多工件。我通过扭曲渐变生成的自定义映射图像看起来更糟。

以下是有关映射的更多信息：[http ://www.imagemagick.org/Usage/mapping/#distortion_maps](http://www.imagemagick.org/Usage/mapping/#distortion_maps)

我正在使用 OpenCV remap() 函数进行映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:11:17.763

如果我在这里理解你，你想在 2D 中完成所有这些吗？

为每个立方体表面调用 warpPerspective() 会比使用 remap() 成功得多

伪代码大纲：

```
// for each surface:
//  get the desired src and dst polygon
//  the src one is your texture-image, so that's:
     vector<Point> p_src(4), p_dst(4); 
     p_src[0] = Point(0,0); 
     p_src[1] = Point(0,src.rows-1); 
     p_src[2] = Point(src.cols-1,0);
     p_src[3] = Point(src.cols-1,src.rows-1);
// the dst poly is the one you want textured, a 3d->2d projection of the cube surface.
// sorry, you've got to do that on your own ;(
// let's say, you've come up with this for the cube - top:
     p_dst[0] = Point(15,15); 
     p_dst[1] = Point(44,19); 
     p_dst[2] = Point(56,30);
     p_dst[3] = Point(33,44);

// now you need the projection matrix to transform from one to another:
Mat proj = getPerspectiveTransform( p_src, p_dst );

// finally, you can warp your texture to the dst-polygon:
warpPerspective(src, dst, proj, dst.size()); 
```

如果你能拿到“Learning Opencv”这本书，它在第 170 页左右被描述。

最后的警告，因为你在抱怨人工制品， - 是的，这一切看起来都很俗气，“真正的” 3d 引擎在这里做了很多工作，亚像素 - uv 映射、过滤、mipmapping 等，如果你想要的话看起来不错，考虑使用“真实”的东西。

顺便说一句，opencv 内置了很好的 opengl 支持

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:47:03.183

为了实现您想要做的事情，您需要将 3D 模型 UV 渲染为纹理。学习渲染 3D 比用这种方法更容易。特别是因为你的方法有很多弱点。在深度缓冲区充足之前难以照明和问题。

假设您的所有对象都只能从一个角度查看，您需要将它们中的每一个渲染为 3 个纹理：

UV-map
Normal-map
Depth-map（校正深度缓冲）

您仍然需要进行着色才能将它们绘制成看起来像您的对象，而且我什至不知道如何做深度缓冲区的事情，我只知道可以做到。

因此，为了避免学习 3D，您必须学习 3D 渲染的所有困难部分。似乎不是更容易的路线...

# objective-c - 使用 [key] 表示法访问 NSDictionary 中的键？

> ID：14878468
> 
> 赞同：6
> 
> 时间：2013-02-14T15:38:28.877
> 
> 标签：objective-c, nsdictionary, objective-c-literals

我刚刚意识到我可以`NSDictionary`同时使用`objectForKey:`和 dict[key] 访问？

```
NSDictionary *coordsDict = @{@"xpos": @5.0, @"ypos": @7.2, @"zpos": @15.7};
NSLog(@"XPOS: %@", coordsDict[@"xpos"]);
NSLog(@"XPOS: %@", [coordsDict objectForKey:@"xpos"]); 
```

谁能告诉我这是否一直对我隐藏，或者它是否最近对语言进行了一些更改？

**编辑：**这个问题一般不是指新的字符串文字，而是更具体地说是使用与 NSArray 相同的字符串文字语法访问 NSDictionary。我显然忽略了这一点，只是想检查一下何时添加了这个特定的语法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T15:41:10.613

这是 Xcode 4.4+ 的新增功能，依赖于 Apple 的 LLVM+Clang 编译器。这是一个新功能 :) 数组也可以使用相同的符号来访问：`myObjectArray[4]`.

如果您有兴趣将此新功能添加到您自己的类中（称为下标），您可以实现一些方法：

```
@interface NSArray(Subscripting)
- (id)objectAtIndexedSubscript:(NSUInteger)index;
@end

@interface NSMutableArray(Subscripting)
- (void)setObject:(id)obj atIndexedSubscript:(NSUInteger)index;
@end

@interface NSDictionary(Subscripting)
- (id)objectForKeyedSubscript:(id)key;
@end

@interface NSMutableDictionary(Subscripting)
- (void)setObject:(id)obj forKeyedSubscript:(id <NSCopying>)key;
@end 
```

如果您在自己的类上实现这些方法中的任何一个，则可以在它们上下标。这也是您可以将此功能添加到 OS X 10.7 的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:41:49.107

请参阅 iOS 6 中引入的“现代 Objective-C”。

请参阅 WWDC 2012 视频：[迁移到现代 Objective-C](https://developer.apple.com/videos/wwdc/2012/?id=405)。

所以，不，这个功能并不是真正的新功能，你忽略了它...... ;-)

# c# - 为什么 Application.DoEvents() 不允许 WebBrowser 控件处理

> ID：14878474
> 
> 赞同：0
> 
> 时间：2013-02-14T15:38:51.813
> 
> 标签：c#

我正在使用 C# 和 VS2012 创建一个包含 WebBrowser 的应用程序。

在每 [x] 秒不活动后，我希望我的应用程序导航回其主页（这被设计为终端应用程序）。原则上，这没问题，但我偶然发现了一个极端情况：

例如，如果用户单击了调用某个 JavaScript MessageBox 的内容，我的浏览器就会陷入“忙碌”状态。最终结果是任何导航尝试都以 COM 错误 (0x800700AA) 告终。

使用 user32.dll SendMessage 函数，我可以找到并关闭窗口。现在，如果我的函数在该点结束，WebBrowser 将继续处理调用窗口的任何脚本并最终停止忙碌。这是伪代码：

```
// This works so long as there isn't a dialog 

private void NavigateHome(){

webBrowser.Navigate("http://www.google.com")

}

// This works to close the dialog and lets the browser return as not busy

private void NavigateHome(){

CloseWindows(); //Calls user32.dll

}

// This, again, works as long there isn't a dialog, otherwise the COM error returns

private void NavigateHome(){

CloseWindows(); //Calls user32.dll
webBrowser.Navigate("http://www.google.com")

}

// I thought this would be the solution, but the browser never continues processing

private void NavigateHome(){

CloseWindows(); //Calls user32.dll

while(webBrowser.isBusy){

Application.DoEvents();

}

webBrowser.Navigate("http://www.google.com")

} 
```

现在，我想“正确”的解决方案是在关闭窗口后观看 DocumentCompleted 事件，但这感觉不是很有弹性。最终，我并不真正关心文档——我只想回到我的原始页面。有没有人有任何想法我应该如何进行？

而且我还想知道为什么 Application.DoEvents() 不能像我预期的那样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:18:07.290

为了解决这个问题，我将“CloseWindow()”函数移到了后台工作线程。然后，该线程可以等待，同时 WebBrowser（在 GUI 线程上）继续处理它需要处理的任何内容以返回不忙。

# java - 在 Firebird 中为 Prepared Statement 批处理一次生成多个 ID

> ID：14878475
> 
> 赞同：1
> 
> 时间：2013-02-14T15:39:04.993
> 
> 标签：java, sql, prepared-statement, firebird, jaybird

我正在使用`SELECT GEN_ID(TABLE,1) FROM MON$DATABASE`from a`PreparedStatement`生成将在多个表中使用的 ID。

`INSERT`我将用s 批次做大量`PreparedStatement`s 并且我正在寻找一种方法来一次从 Firebird 获取大量新 ID。

执行触发器似乎是不可能的，因为我必须`INSERT`在其他时间使用 Java 代码中的此 ID 在其他表上。此外，`getGeneratedKeys()`对于批处理似乎还没有在（我的？）Firebird JDBCdriver 中实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:43:22.587

我在这里从记忆中回答，但我记得我曾经不得不将一堆事务从 Quicken 文件加载到我的 Firebird 数据库中。我用事务加载了一个数组，并将一个名为 say iCount 的变量设置为该数字。然后我从 RDB$DATABASE 中执行了 SELECT GEN_ID(g_TABLE, iCount)。这给了我下一个 ID，并将生成器增加了我要插入的记录数。然后我开始一个事务，遍历数组并一个接一个地插入记录并关闭事务。我很惊讶这进展得如此之快。我想，当时我处理了大约 28,000 笔交易，时间大约只有几秒钟。像这样的东西可能对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T06:38:29.920

正如 jrodenhi 所说，您可以使用保留一系列值

```
SELECT GEN_ID(<generator>, <count>) FROM RDB$DATABASE 
```

这将返回一个`<count>`高于先前生成的键的值，因此您可以使用来自`(value - count, value]`（其中`(`表示独占、`]`包含）的所有值。假设生成器当前值为 10，调用`GEN_ID(generator, 10)`将返回 20，然后您可以使用 11...20 作为 id。

这确实假设您通常使用生成器为您的表生成 id，并且没有使用生成器的任何应用程序构成自己的 id。

正如您所注意到的，`getGeneratedKeys()`Jaybird 2.2.x 中的批处理尚未实现。Jaybird 3.0.0 将支持此选项，请参阅[JDBC-452](http://tracker.firebirdsql.org/browse/JDBC-452)。

除非您还针对其他数据库，否则使用批量更新（在 Jaybird 中）并没有真正的性能优势。Firebird 不支持批量更新，因此 Jaybird 中的内部实现与准备语句并自己重复执行基本相同。这可能会在未来发生变化，因为有计划将其添加到 Firebird 4。

*披露：我是 Jaybird 开发人员之一*

# msmq - MSMQ '过时的句柄'

> ID：14878479
> 
> 赞同：0
> 
> 时间：2013-02-14T15:39:24.587
> 
> 标签：msmq

我正在用 C#/ 为本机 MSMQ 编写一个自定义包装器查看 ILSpy 中的 System.Messaging 代码后，我注意到这个实现在解决“陈旧”队列句柄方面做了很多工作。我目前不处理这种情况，并且想知道在什么情况下句柄会变得“陈旧”？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:15:42.390

陈旧的句柄不再指向队列。例如，如果目标队列管理器重新启动，它将不再知道队列句柄，并且使用该句柄的通信应该会失败。

# .net - 显示并聚焦到菜单

> ID：14878484
> 
> 赞同：1
> 
> 时间：2013-02-14T15:39:36.287
> 
> 标签：.net, winforms, c#-4.0, contextmenustrip

我有`button`一个表单，我想使用`Alt`+`M`来显示`ContextMenuStrip`*(cmsJournal)*，不幸的是，当我使用该***快捷方式***时，按钮获得了焦点，但没有`KeyPress event`被触发。

`Alt`当我按+时我想使用以下方法`M`

```
 private void PopJournalMenu() {
        cmsJournal.Show(btnJournal, new System.Drawing.Point(0, 0 - cmsJournal.Height));
        tsmiAPPayment.Select();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:09:21.297

首先要做的事——我不建议使用`Alt`. 在 Windows 应用程序中，该键是为*键盘快捷*`Alt`键保留的。它们是您在控件标题中看到某些字母加下划线的原因。例如，如果您是一个带有标题“&Journal”的 Button 控件，它将显示为 J̲ournal，并且您可以在不触摸鼠标的情况下按+键从键盘“单击”该按钮，这对于可访问性原因非常重要.*`Alt``J`*

 *如果您希望与此行为保持一致并且您的按钮更像是一个下拉按钮（即，当用鼠标单击时显示菜单的按钮），那么您的任务相当简单。如上所示标记按钮（使用`&`字符串中的字符表示所需的加速器，在您的情况下为`M`），然后连接代码以显示下拉菜单，就像您通常在`Click`事件处理程序中一样。

如果您想让您的应用程序混乱且难以使用，并且您没有下拉按钮，那么您将需要手动拦截键盘事件并欺骗窗口管理器。不用说，这将更加困难。

你需要克服的主要问题是专注。只有获得焦点的控件接收键盘事件，并且一次只能获得一个控件的焦点。因此，如果您的表单除了按钮之外还包含多个控件（例如文本框），则任何其他控件都可能拥有焦点而不是按钮。这意味着他们将接收键盘事件并可能以自己的方式对它们做出反应。这就是为什么`KeyPress`事件没有做你想做的事情（`KeyDown`和`KeyUp`事件会有同样的问题）。这些事件与特定控件相关联，并且仅在它们所连接的控件被聚焦时才会触发。

如果你想逃避这个，你需要在“更高”级别处理键盘事件。在 WinForms 中执行此操作的标准方法是在表单级别通过覆盖[`ProcessCmdKey`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.processcmdkey.aspx)。在您的覆盖方法中，您将测试所需的键盘组合，并在适当的情况下显示弹出菜单。例如：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
   if (keyData == (Keys.Alt | Keys.M))
   {
      cmsJournal.Show(btnJournal, new Point(0, 0 - cmsJournal.Height));
      return true; // indicate that you handled the key event
   }
   return base.ProcessCmdKey(ref msg, keyData);
} 
```

或者，您可以调用您的`PopJournalMenu`方法。不过，我不确定`tsmiAPPayment`您需要调用它的`Select`方法是什么或为什么需要调用它。在[您之前的问题](https://stackoverflow.com/questions/14877339/show-contextmenustrip-and-focus-it)中，我得到了您试图用来`Select`确保上下文菜单集中的印象。你不需要这样做；该`Show`方法已经为您处理了。*

# java - 如何在循环外使用属于 if-else 循环的元素？

> ID：14878487
> 
> 赞同：-1
> 
> 时间：2013-02-14T15:39:43.090
> 
> 标签：java, variables, arguments, if-statement

我需要使用 if-else 循环的变量作为方法的参数，或者让我们说 if-else 循环之外的某个地方但在同一个类中。

```
 public static String myvar;

                if(x > 5) {
                    myvar = 0 ;
                    Double  y = Double.parseDouble(myvar);
                    System.out.println("The value is: "+ y); }
                else
                {

                  Double  y= Double.parseDouble(myvar);
                  System.out.println("The value is: "+ y);
                } 
```

因此，每当我在循环之外的某个地方使用变量 y 时，它都无法解析为变量..如何在 if-else 循环之外使用这个变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:42:15.250

只需在 if-else 之外声明变量，就在之前。

`Double y = 0; if () y =X; else y =Y;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:49:59.430

你有几个选择：

*   您可以将其声明为类成员变量
*   `if/else`您可以在驻留的方法范围内声明它。

几个例子：

```
// as a member variable

public String myvar;
private Double y;

public void SomeMethod(int x)
{
    if(x > 5)
    {
        this.myvar = "0";
        this.y = Double.parseDouble(this.myvar);
        System.out.println("The value is: " + this.y);
    }
    else
    {
        this.y = Double.parseDouble(this.myvar);
        System.out.println("The value is: " + this.y);
    }

    // use this.y here
} 
```

或者

```
// as a method variable

public String myvar;

public void SomeMethod(int x)
{
    Double y;

    if(x > 5)
    {
        this.myvar = "0";
        y = Double.parseDouble(this.myvar);
        System.out.println("The value is: " + y);
    }
    else
    {
        y = Double.parseDouble(this.myvar);
        System.out.println("The value is: " + y);
    }

    // use y here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:49:08.983

您必须`y`在 if-else 循环之外声明和初始化变量。

此外，您的语句`myvar = 0;`不会像`myvar`字符串一样编译。

```
String myvar = "0";
Double y = 0.0;

if(x > 5) {
  y = Double.parseDouble(myvar);
  System.out.println("The value is: "+ y);
} else {
  y= Double.parseDouble(myvar);
  System.out.println("The value is: "+ y);
} 
```

# jquery - jquery将css添加到scrolltop功能

> ID：14878497
> 
> 赞同：0
> 
> 时间：2013-02-14T15:40:20.587
> 
> 标签：jquery

我如何添加这个....

$("#otherdiv").css("背景色","黄色");

用这个触发....

```
$(function(){
var stickerTop = parseInt($('#header-container').offset().top);
$(window).scroll(function() {
$("#header-container").css((parseInt($(window).scrollTop()) + parseInt($("#header-    container").css('margin-top')) > stickerTop) ? {
        position: 'fixed',
        top: '0px'
    } : {
        position: 'relative'
    }); 
});
});//]]> 
```

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:43:48.690

好吧，假设您希望在`#otherdiv`滚动窗口时接收背景颜色，请尝试：

```
$(function(){
    var stickerTop = parseInt($('#header-container').offset().top);
    $(window).scroll(function() {
        var bg_color = (parseInt($(window).scrollTop()) + parseInt($("#header-container").css('margin-top')) > stickerTop) ? 'yellow' : 'white';
        $("#otherdiv").css("background-color", bg_color);

        $("#header-container").css((parseInt($(window).scrollTop()) + parseInt($("#header-container").css('margin-top')) > stickerTop) ? {
            position: 'fixed',
            top: '0px'
        } : {
            position: 'relative'
        }); 
    });
}); 
```

# git - 如何让 git-extensions 在过滤而不是倾斜的提交时显示一个扁平的提交列表？

> ID：14878499
> 
> 赞同：1
> 
> 时间：2013-02-14T15:40:26.077
> 
> 标签：git, git-extensions

在 git 扩展中，当您过滤以显示分支中的所有提交时，您会得到一个包含该分支所有提交的漂亮平面列表：

![在此处输入图像描述](../Images/68738a6a42334e54a9556d1a43b7f6b4.png)

但是如果你尝试根据提交的单词进行过滤，你会得到这个奇怪的显示：

![在此处输入图像描述](../Images/bd977a0cbb5ac1cb4275342612d4d6e4.png)

如果您有大量与过滤器匹配的提交，这尤其不方便，因为您在列表末尾附近有一个疯狂的缩进级别。

所以两个问题合二为一：

1.  为什么会这样？为什么仇恨这么大？
2.  是否有可能解决该问题以获得平面列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:25:37.163

我理解 Daniel Hilgarth 的回答，但我仍然认为这是对这个问题的不好回答。也许他们应该为同一分支中的提交做这样的事情：

![在此处输入图像描述](../Images/18691437a2fa156202aeea43a420c295.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:45:52.950

这种表示的原因是这些提交不直接相关。
在单个列中显示这些提交 - 就像在第一个屏幕截图中一样 - 看起来他们是彼此的父母和孩子。

正如您所看到的问题 36363 和 36277，它只将它们显示在一个列中，因为 36363 是 36277 的下一次提交。

据我所知，没有办法改变这一点。

# gwt - 如何使用客户端验证器验证方法调用的返回值在 EditorDriver 上设置约束条件

> ID：14878501
> 
> 赞同：5
> 
> 时间：2013-02-14T15:40:29.950
> 
> 标签：gwt, gwt-editors, gwt-validation

使用 GWT 2.5.0，我想使用客户端验证和编辑器。尝试将 ConstraintViolation java.util.Set 传递给 EditorDriver 时遇到以下错误，如下所示。

```
Validator a = Validation.buildDefaultValidatorFactory().getValidator();
Set<ConstraintViolation<Person>> b = a.validate(person);
editorDriver.setConstraintViolations(b); 
```

**`The method setConstraintViolations(Iterable<ConstraintViolation<?>>) in the type EditorDriver<Person> is not applicable for the arguments (Set<ConstraintViolation<Person>>)`**

我能找到的唯一相关的帖子是[问题 6270](http://code.google.com/p/google-web-toolkit/issues/detail?id=6270)！

下面是一个带有 Person Editor 的 PopUpDialog 示例，它允许您指定名称并根据您的注释对其进行验证。注释掉`personDriver.setConstraintViolations(violations);`PersonEditorDialog 中的行将允许您运行示例。

我没有足够的声誉点来发布示例的图像。

# 课程

* * *

## 人

```
public class Person {

@NotNull(message = "You must have a name")

@Size(min = 3, message = "Your name must contain more than 3 characters")

private String name;

public String getName() {

return name;

}

public void setName(String name) {

this.name = name;

}

} 
```

## 人物编辑器对话框

```
public class PersonEditorDialog extends DialogBox implements Editor<Person> {

private static PersonEditorDialogUiBinder uiBinder = GWT
        .create(PersonEditorDialogUiBinder.class);

interface PersonEditorDialogUiBinder extends
        UiBinder<Widget, PersonEditorDialog> {
}

private Validator validator;

public PersonEditorDialog() {
    validator = Validation.buildDefaultValidatorFactory().getValidator();
    setWidget(uiBinder.createAndBindUi(this));
}

interface Driver extends SimpleBeanEditorDriver<Person, PersonEditorDialog> {
};

@UiField
ValueBoxEditorDecorator<String> nameEditor;

@UiField
Button validateBtn;

private Driver personDriver;

@UiHandler("validateBtn")
public void handleValidate(ClickEvent e) {
    Person created = personDriver.flush();
    Set<ConstraintViolation<Person>> violations = validator
            .validate(created);
    if (!violations.isEmpty() || personDriver.hasErrors()) {
        StringBuilder violationMsg = new StringBuilder();
        for (Iterator<ConstraintViolation<Person>> iterator = violations.iterator(); iterator.hasNext();) {
            ConstraintViolation<Person> constraintViolation = (ConstraintViolation<Person>) iterator
                    .next();
            violationMsg.append(constraintViolation.getMessage() + ",");
        }
        Window.alert("Detected violations:" + violationMsg);
         personDriver.setConstraintViolations(violations);
    }
}

@Override
public void center() {
    personDriver = GWT.create(Driver.class);
    personDriver.initialize(this);
    personDriver.edit(new Person());
    super.center();
}
} 
```

## 样本验证工厂

```
public final class SampleValidationFactory extends AbstractGwtValidatorFactory {

/**
 * Validator marker for the Validation Sample project. Only the classes and
 * groups listed in the {@link GwtValidation} annotation can be validated.
 */
@GwtValidation(Person.class)
public interface GwtValidator extends Validator {
}

@Override
public AbstractGwtValidator createValidator() {
    return GWT.create(GwtValidator.class);
}
} 
```

## EditorValidationTest

```
public class EditorValidationTest implements EntryPoint {

/**
 * This is the entry point method.
 */
public void onModuleLoad() {
    PersonEditorDialog personEditorDialog = new PersonEditorDialog();
    personEditorDialog.center();
}
} 
```

# 绑定器

## PersonEditorDialog.ui.xml

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
xmlns:g="urn:import:com.google.gwt.user.client.ui" xmlns:e="urn:import:com.google.gwt.editor.ui.client">
<ui:style>
    .important {
        font-weight: bold;
    }
</ui:style>
<g:HTMLPanel>
    <g:Label>Enter your Name:</g:Label>
    <e:ValueBoxEditorDecorator ui:field="nameEditor">
        <e:valuebox>
            <g:TextBox />
        </e:valuebox>
    </e:ValueBoxEditorDecorator>
    <g:Button ui:field="validateBtn">Validate</g:Button>
</g:HTMLPanel>
</ui:UiBinder> 
```

# GWT 模块

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.5.0//EN"
"http://google-web-toolkit.googlecode.com/svn/tags/2.5.0/distro-source/core/src/gwt-module.dtd">
<module rename-to='editorvalidationtest'>
<inherits name='com.google.gwt.user.User' />
<inherits name='com.google.gwt.user.theme.clean.Clean' />
<inherits name="com.google.gwt.editor.Editor"/>

<!-- Validation module inherits -->

<inherits name="org.hibernate.validator.HibernateValidator" />
<replace-with
    class="com.test.client.SampleValidationFactory">
    <when-type-is class="javax.validation.ValidatorFactory" />
</replace-with>

<!-- Specify the app entry point class. -->
<entry-point class='com.test.client.EditorValidationTest' />

<!-- Specify the paths for translatable code -->
<source path='client' />
<source path='shared' />

</module> 
```

# 类路径所需的库

*   hibernate-validator-4.1.0.Final.jar
*   hibernate-validator-4.1.0.Final-sources.jar
*   validation-api-1.0.0.GA.jar（在 GWT SDK 中）
*   validation-api-1.0.0.GA-sources.jar（在 GWT SDK 中）
*   slf4j-api-1.6.1.jar
*   slf4j-log4j12-1.6.1.jar
*   log4j-1.2.16.jar

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T14:36:21.910

正如评论中所讨论的，以下演员被确定为有效的解决方法。

```
Set<?> test = violations; 
editorDriver.setConstraintViolations((Set<ConstraintViolation<?>>) test); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T17:23:41.233

这就是我一遍又一遍地做的事情：

```
 List<ConstraintViolation<?>> adaptedViolations = new ArrayList<ConstraintViolation<?>>();
    for (ConstraintViolation<Person> violation : violations) {
        adaptedViolations.add(violation);
    }
    editorDriver.setConstraintViolations(adaptedViolations); 
```

驱动程序定义了通配符泛型类型，您不能传入类型约束违规。

# windows-phone-7 - 如何在 Windows Phone 应用程序中支持/切换不同颜色主题

> ID：14878506
> 
> 赞同：1
> 
> 时间：2013-02-14T15:40:37.470
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

嗨，我正在开发的应用程序使用当前系统主题资源来显示什么，但我还想创建 2 个额外的主题。我的问题是以编程方式执行此操作的好方法是什么，以及标准 GUI 会如何执行此操作？目前，我的应用程序只是一个页面/窗口，并且希望避免使用设置页面，除非它通常是这样做的。谢谢！

PS - 我是 Windows Phone 新手，除了模拟器之外从未真正使用过任何东西，所以我没有使用该平台上的任何应用程序的任何经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:42:51.437

创建自己的资源来做到这一点。通常在 Windows Phone 应用程序中，我们使用 PhoneAccentBrush 等资源作为主要口音，使用 PhoneBackgroundBrush 作为背景主题。有关如何完成此操作的更多信息，请查看此[链接](http://wp7wonders.wordpress.com/2010/09/19/create-a-theme-for-your-windows-phone-7-application/)

# jquery - jquery 调用切换事件

> ID：14878510
> 
> 赞同：0
> 
> 时间：2013-02-14T15:41:06.590
> 
> 标签：jquery

我搜索了整个网络并没有找到解决方案

我需要禁用 div 上的点击事件，然后写入文件，然后启用 div 上的点击事件。

所以，我在 div #method 上有切换事件：

```
function openData(){
    $.post("writeFile", {'file':fileWrite})
     .done(function(data) {
         $('#method').on('click',*);
     });
}

$('#method').toggle(function(){
    $('#method').off('click');
    openData();
},function(){
    ... other similar stuff ...
}); 
```

我需要启用点击 div #method .. 这有效： $('#method').on('click',callFunction); 但我必须调用一些函数，所以我想调用像 $('#method').on('click',$('#method').toggle(function());

这可能吗？是否可以只启用像 $('#method').on('click') 这样的 div #method 的点击并且它可以工作？

我会很高兴得到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:20:30.323

我不确定是否理解您的问题，但如果您希望您的 div 切换并在完成时执行其他操作，您可以执行以下操作：

```
var callFunction = function() {
    doStuff();
}
$('#method').on('click', function() {
    $('#method').toggle(callFunction);
} 
```

或使用匿名函数：

```
$('#method').on('click', function() {
    $('#method').toggle(function() {
        doStuff();
    });
} 
```

所以也许你想要类似的东西

```
var openData = function() {
    $('#method').off('click');
    $('#method').slideUp(function() {
        $.post("writeFile", {'file':fileWrite})
        .done(function() {
            $('#method').slideDown(function() {
                $('#method').on('click', openData);
            });
        });
    });
}

$('#method').on('click', openData); 
```

我更改了 slideUp 和 slideDown 的切换，因为我认为您毕竟不想切换，您想在等待时隐藏并在准备好时显示。

如果你想测试它，我创建了一个[jsfiddle 测试](http://jsfiddle.net/fAFsF/1/)，使用 setTimeout 来模拟 ajax 延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T20:41:26.117

这是我的理解。您可能还需要知道切换的状态来执行写入文件的操作，并考虑 ajax 遇到错误的情况，但这里有一个简单的独家新闻（不需要额外的绑定/取消绑定）：

```
var inProgress = false;
$('#method').bind('click', function () {
    if (!inProgress) {
        inProgress = true;
        $('#method').toggle();
        openData();
    }
});

function openData(){
    $.post("writeFile", {'file':fileWrite})
        .done(function(data) {
            inProgress = false;
    });
} 
```

# mysql - 无法通过捆绑器在 RHEL 5.8 上安装 mysql2 gem

> ID：14878514
> 
> 赞同：0
> 
> 时间：2013-02-14T15:41:15.507
> 
> 标签：mysql, ruby, rubygems, bundler, mysql2

这是我的堆栈：

*   RHEL 5.8 x86_64
*   MySQL 5.5 x86_64
*   红宝石 1.9.3p345
*   导轨 3.2.8

我正在通过捆绑程序安装 mysql2 0.3.11 gem 并收到错误，并且问题似乎与[Ruby gem mysql2 install failed](https://stackoverflow.com/questions/4115126/ruby-gem-mysql2-install-failing)和[mysql2 gem installation](https://stackoverflow.com/questions/12119567/mysql2-gem-installation-fails) failed 中的流行错误不同。这些是我已经为 mysql 安装的软件包。

```
[user@local config]$ yum list installed | grep MySQL
Unable to read consumer identity
MySQL-client.x86_64                   5.5.29-1.rhel5                   installed
MySQL-devel.x86_64                    5.5.29-1.rhel5                   installed
MySQL-python.x86_64                   1.2.3-0.1.c1.el5                 installed
MySQL-server.x86_64                   5.5.29-1.rhel5                   installed
perl-DBD-MySQL.x86_64                 3.0007-2.el5                     installed
[user@local config]$ yum list installed | grep mysql
Unable to read consumer identity
libdbi-dbd-mysql.x86_64               0.8.1a-1.2.2                     installed 
```

错误信息如下：

```
Installing mysql2 (0.3.11) with native extensions

Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
/home/user/.rvm/rubies/ruby-1.9.3-p385/bin/ruby extconf.rb
checking for rb_thread_blocking_region()... yes
checking for rb_wait_for_single_fd()... yes
checking for mysql.h... yes
checking for errmsg.h... yes
checking for mysqld_error.h... yes
creating Makefile

make
compiling result.c
In file included from ./mysql2_ext.h:39,
             from result.c:1:
./client.h:42:7: warning: no newline at end of file
compiling mysql2_ext.c
In file included from ./mysql2_ext.h:39,
             from mysql2_ext.c:1:
./client.h:42:7: warning: no newline at end of file
compiling client.c
In file included from ./mysql2_ext.h:39,
             from client.c:1:
./client.h:42:7: warning: no newline at end of file
client.c: In function a€?rb_raise_mysql2_errora€?:
client.c:98: warning: ISO C90 forbids mixed declarations and code
client.c: In function a€?rb_mysql_client_socketa€?:
client.c:590: warning: ISO C90 forbids mixed declarations and code
linking shared-object mysql2/mysql2.so
/usr/bin/ld: cannot find -lmysqlclient_r
collect2: ld returned 1 exit status
make: *** [mysql2.so] Error 1

Gem files will remain installed in /home/user/.rvm/gems/ruby-1.9.3-p385/gems/mysql2-0.3.11 for inspection.
Results logged to /home/user/.rvm/gems/ruby-1.9.3-p385/gems/mysql2-0.3.11/ext/mysql2/gem_make.out
An error occurred while installing mysql2 (0.3.11), and Bundler cannot continue.
Make sure that `gem install mysql2 -v '0.3.11'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T16:43:59.270

尝试使用

```
bundle config build.mysql2 --with-mysql-config=/.../mysql_config 
```

或者

```
sudo gem install mysql2 -- --with-mysql-config=/.../mysql_config 
```

# html - 哈姆尔：它是给谁的？

> ID：14878515
> 
> 赞同：0
> 
> 时间：2013-02-14T15:41:13.553
> 
> 标签：html, css, ruby, haml

在专业开发中，不同的人为 Web 应用程序编写代码，为视图编写 HTML。首先是程序员，其次是 HTML 标记开发人员，具有基本的编程技能，但具有良好的 Photoshop/etc 技能。我问过一些 HTML 开发人员：他们是否尝试过 Haml？我向他们展示了它，他们回答说这是一个糟糕的工具。

这个工具是为谁准备的？对于 HTML 开发人员？还是仅适用于必须在没有 HTML 开发人员的情况下自己制作 HTML 的程序员？对 HTML 开发人员使用它有什么好处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:46:43.350

Haml的[Wikipedia 条目](https://en.wikipedia.org/wiki/Haml)很好地解释了 Haml 试图解决的问题。简而言之，它通过强制缩进、减少重复等来实现更易读、更简洁的标记。

对于在像 Rails 这样的框架中使用它的程序员来说，它可能更有用，它会在 Web 应用程序的上下文中自动处理将 Haml 标记转换为 HTML。

使用 HTML 和 Photoshop 的设计师可能会觉得不值得为他们的工作流程增加额外的复杂性。

# android - Android微调器不绘制所选项目

> ID：14878533
> 
> 赞同：1
> 
> 时间：2013-02-14T15:42:03.013
> 
> 标签：android, spinner

我有一个装有三件物品的微调器

```
<string-array name="menuitems">
    <item>one</item>
    <item>two</item>
    <item>three</item>
</string-array> 
```

然后我像这样设置我的微调器

```
 Spinner spinner = (Spinner) findViewById(R.id.spinner1);
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
         R.array.menuitems,  R.layout.spinnerstyle);

 adapter.setDropDownViewResource(R.layout.spinnerdropdownstyle);

 spinner.setAdapter(adapter); 
```

微调器显示如下

## 一

一

二

三

我的问题是这个微调器我不想显示我想要的选定项目

## 一

二

三

显然，如果选择了两个，下拉列表中只会出现一个和三个。我确实搜索了这个，但无法找到一种方法来获得这种影响我尝试在选择时更改 menuitems 数组，但如果我从那里删除该项目，它就不会在选择中绘制它。我认为有一个相当简单的方法来获得这种影响。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:58:12.713

编写一个自定义[`SpinnerAdapter`](http://developer.android.com/reference/android/widget/SpinnerAdapter.html)，它返回菜单中的项目，不包括所选项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:58:49.670

您可以尝试将 xml 中的提示设置为“One”，如下所示：

```
<Spinner android:id="@+id/spinnerTest"  
 android:layout_marginLeft="50px"
 android:layout_width="fill_parent"                  
 android:drawSelectorOnTop="true"
 android:layout_marginTop="5dip"
 android:prompt="@string/SelectOne"
 android:layout_marginRight="30px"
 android:layout_height="35px" 
/> 
```

然后您应该覆盖 onItemClick 方法并将变量的文本设置为“未选择任何内容”。

# python - 列表中的重复元素

> ID：14878538
> 
> 赞同：20
> 
> 时间：2013-02-14T15:42:16.500
> 
> 标签：python, list, list-comprehension

我`list`在 Python 中有一个：

```
l = ['a', 'c', 'e', 'b'] 
```

我想在原始元素旁边立即复制每个元素。

```
ll = ['a', 'a', 'c', 'c', 'e', 'e', 'b', 'b'] 
```

应保留元素的顺序。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-14T15:46:00.420

```
>>> l = ['a', 'c', 'e', 'b']
>>> [x for pair in zip(l,l) for x in pair]
['a', 'a', 'c', 'c', 'e', 'e', 'b', 'b'] 
```

或者

```
>>> from itertools import repeat
>>> [x for item in l for x in repeat(item, 2)]
['a', 'a', 'c', 'c', 'e', 'e', 'b', 'b'] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-06-29T12:38:52.150

这很旧，但我在这里看不到直接的选项（IMO）：

```
[ item for item in l for repetitions in range(2) ] 
```

所以对于具体情况：

```
>>> l = ['a', 'c', 'e', 'b']
l = ['a', 'c', 'e', 'b']
>>> [ i for i in l for r in range(2) ]
[ i for i in l for r in range(2) ]
['a', 'a', 'c', 'c', 'e', 'e', 'b', 'b']
>>> 
```

并概括：

```
[ item for item in l for _ in range(r) ] 
```

其中 r 是您想要的重复次数。

所以这有一个 O(nr) 的空间和时间复杂度，很短，没有依赖关系并且也是惯用的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-14T15:45:11.430

```
import itertools

ll = list(itertools.chain.from_iterable((e, e) for e in l)) 
```

在上班：

```
>>> import itertools
>>> l = ['a', 'c', 'e', 'b']
>>> ll = list(itertools.chain.from_iterable((e, e) for e in l))
>>> ll
['a', 'a', 'c', 'c', 'e', 'e', 'b', 'b'] 
```

正如 Lattyware 指出的那样，如果您想要的不仅仅是双倍的元素：

```
from itertools import chain, repeat

ll = list(chain.from_iterable(repeat(e, 2) for e in l)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T15:46:09.307

试试这个

```
for i in l:
    ll.append(i)
    ll.append(i) 
```

[演示](http://ideone.com/fFYtxt)

它只会做你的工作，但它不是一种优化的方式。

使用答案。由@Steven Rumbalski 发布

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-01T22:07:41.580

这是一个非常简单的方法：

```
sum(zip(l, l), tuple()) 
```

它复制每个项目，并将它们添加到一个元组中。如果你不想要一个元组（我怀疑），你可以调用`list`元组：

```
list(sum(zip(l, l), tuple())) 
```

* * *

其他几个版本（产生列表）：

```
list(sum(zip(l, l), ()))

sum([list(i) for i in zip(l, l)], [])

sum(map(list, zip(l, l)), []) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-06T13:54:04.593

Pandas 给出了重复元素的方法：

```
import pandas as pd
l = pd.Series([2, 1, 3, 1])
print(l.duplicated())
>>>0    False
   1    False
   2    False
   3     True
   dtype: bool

print('Has list duplicated ? :', any(l.duplicated()))
>>>Has list duplicated ? : True 
```

# assembly - cmp 0x4(%esi),%ebx 汇编指令中的 0x4 是什么意思？

> ID：14878545
> 
> 赞同：1
> 
> 时间：2013-02-14T15:42:40.657
> 
> 标签：assembly, x86, gdb, g++, att

`0x4`下面的流水线是什么意思？

```
cmp 0x4(%esi),%ebx
je ... 
```

当此比较返回相等并执行跳转时，寄存器具有以下值： `%esi` `0xe944d6d0` `%ebx` `0xe94ceccc`

很抱歉问了这么简单的问题，但我很难用谷歌搜索这样的括号符号。在时间压力下花了半个多小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:46:17.310

那是 AT&T 语法，在 Intel 语法中它是：

```
cmp ebx,[esi+4] 
```

请注意，操作数的顺序是相反的。

在 Intel 语法中，它是 dest，src。在 AT&T 中，它是 src，dest。

因此，基本上该指令通过减去存储在from中的 dword 值`ebx`与存储在其中的 dword 值进行比较，就像会做的那样，但只更新标志，它不会将结果存储在任何地方。`[esi+4]``[esi+4]``ebx``sub``cmp`

# ios - iPad 应用程序因方向更改而崩溃

> ID：14878547
> 
> 赞同：3
> 
> 时间：2013-02-14T15:42:42.587
> 
> 标签：ios, objective-c, nsnotificationcenter, device-orientation

我正在开发一个 iPad 应用程序。我允许横向和纵向模式。我的用户界面在纵向模式下很好，但是当我将其更改为横向模式时，我的用户界面变得一团糟。我看到了一些与此相关的 SO 帖子，并在我的 UIView 中的 initWith... 中添加了以下代码。

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(abc)
                                             name:UIDeviceOrientationDidChangeNotification
                                           object:nil]; 
```

执行此操作后，我的 UI 在纵向模式下工作正常。当我将其更改为横向模式时，我的 UI 很好。但是在我将它改回纵向模式后，我的应用程序崩溃了。我在 SO 上阅读了一些与应用程序崩溃相关的帖子，并了解了仪器。我启用了僵尸，发现一条消息正在发送到已经发布的对象，并且这条消息来自 NSNotificationCenter。

除了注册我的设备之外，我还需要处理其他事情吗？另外，有什么方法可以将实现从 UIView 更改为 UIViewController 并实现 UIViewController 关于设备方向的方法？请让我知道我需要遵循的步骤才能完成此操作。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T19:12:39.303

您在哪里注册通知？当您要更改方向时（在 prepForSegue 或 willAnimateRotationToInterfaceOrientation 中，取决于您的设置），您需要移除观察者，以防止向不再有效的对象发送消息。如果您在 viewDidAppear/viewWillAppear 中注册，您也不想堆积多个通知。

使用以下方法删除观察者：

```
[[NSNotificationCenter defaultCenter] removeObserver:self];//removes all notifications for that object (the way I've used it before) 
```

或者，如果您想具体一点，请执行以下操作：

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIDeviceOrientationDidChangeNotification object:[UIDevice currentDevice];//remove just that notification 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:55:18.330

该类`UIViewController`有几种处理方向变化的方法。有关这些方法的讨论，请参阅文档。

您应该研究的一种方法是`viewWillLayoutSubviews`. 这是执行手动视图布局的常见位置。每当视图控制器的方向发生变化时都会调用它。

使用这些方法比注册设备方向更改通知更常见。根据您对崩溃的陈述，一个可能的问题是您永远不会删除您添加的观察者。每次调用都`addObserver`必须有对应的调用`removeObserver`。否则，即使观察者早已消失，它也会被调用。这会导致您描述的崩溃。

# intellij-idea - IntelliJ IDEA 在 JSP 中解析 Web 路径

> ID：14878548
> 
> 赞同：9
> 
> 时间：2013-02-14T15:42:50.823
> 
> 标签：intellij-idea

如何设置 IntelliJ 在哪里查找 JSP 中引用的文件？如果我有

```
<jsp:include page="/foo/bar" /> 
```

它无法解析目录 foo。

看起来 Settings > Web Contexts 处理这个问题，但是当我去那里时，它说

> 未找到 Web 目录

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T15:45:54.740

您应该在项目设置中配置 Web 构面，然后将包含的目录配置`foo`为“Web 资源目录”。如果这是您的根目录，请将“相对于部署根目录的路径”设置为`/`.

有关更多信息，请参阅[官方文档](http://www.jetbrains.com/idea/webhelp/enabling-web-application-support.html)。

# javascript - d3中的泡泡树？

> ID：14878551
> 
> 赞同：24
> 
> 时间：2013-02-14T15:42:57.060
> 
> 标签：javascript, jquery, svg, d3.js, raphael

D3中是否有等效的[气泡树实现？](http://vis4.net/blog/posts/tutorial-bubble-tree/)在我提供的链接中，气泡树是用 RaphaelJS 和 jQuery 实现的。

![在此处输入图像描述](../Images/37d24e4510e8dd795cd4ae167ce6b2ce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T10:42:56.923

你的问题的直接答案是否定的。

使用[https://github.com/okfn/bubbletree/tree/master/build](https://github.com/okfn/bubbletree/tree/master/build)上的资源、您已经知道的信息以及[http://d3js.org/](http://d3js.org/)上提供的信息以及通过 D3 在 GitHub 上的文档，您应该能够为 D3 变出你自己的泡泡树！

这是我很久以前用来可视化二叉树数据的一段 JavaScript：

```
var updateVisual;

updateVisual = function() {
    var drawTree, out;
    drawTree = function(out, node) {
        var col, gray, i, line, lineElt, lines, sub, _results, _results1;
        if (node.lines) {
            out.appendChild(document.createElement("div")).innerHTML = "<b>leaf</b>: " + node.lines.length + " lines, " + Math.round(node.height) + " px";
            lines = out.appendChild(document.createElement("div"));
            lines.style.lineHeight = "6px";
            lines.style.marginLeft = "10px";
            i = 0;
            _results = [];
            while (i < node.lines.length) {
                line = node.lines[i];
                lineElt = lines.appendChild(document.createElement("div"));
                lineElt.className = "lineblock";
                gray = Math.min(line.text.length * 3, 230);
                col = gray.toString(16);
                if (col.length === 1) col = "0" + col;
                lineElt.style.background = "#" + col + col + col;
                console.log(line.height, line);
                lineElt.style.width = Math.max(Math.round(line.height / 3), 1) + "px";
                _results.push(i++);
            }
            return _results;
        } else {
            out.appendChild(document.createElement("div")).innerHTML = "<b>node</b>: " + node.size + " lines, " + Math.round(node.height) + " px";
            sub = out.appendChild(document.createElement("div"));
            sub.style.paddingLeft = "20px";
            i = 0;
            _results1 = [];
            while (i < node.children.length) {
                drawTree(sub, node.children[i]);
                _results1.push(++i);
            }
            return _results1;
        }
    };
    out = document.getElementById("btree-view");
    out.innerHTML = "";
    return drawTree(out, editor.getDoc());
}; 
```

只需插入一些圆形元素并对其进行一些操作以在圆形庄园中进行样式设置，您就应该拥有一个很好的程序集！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-09T17:33:09.547

Here you go. I didn't add the text or decorations, but it's the meat and potatoes:

```
function bubbleChart(config) {
	var aspectRatio = 1,
      margin = { top: 0, right: 0, bottom: 0, left: 0 },
      radiusScale = d3.scale.sqrt(),
      scan = function(f, data, a) {
        a = a === undefined ? 0 : a;
        var results = [a];
        data.forEach(function(d, i) {
          a = f(a, d);
          results.push(a);
        });
        return results;
      },
      colorScale = d3.scale.category20(),
      result = function(selection) {
		selection.each(function(data) {
			var outerWidth = $(this).width(),
          outerHeight = outerWidth / aspectRatio,
          width = outerWidth - margin.left - margin.right,
          height = outerHeight - margin.top - margin.bottom,
          smallestDimension = Math.min(width, height),
          sum = data[1].reduce(function(a, d) {
            return a + d[1];
          }, 0),
          radiusFractions = data[1].map(function(d) {
            return Math.sqrt(d[1] / sum);
          }),
          radiusNormalSum = radiusFractions.reduce(function(a, d) {
            return a + d;
          }, 0),
          scanned = scan(function(a, d) {
            return a + d;
          }, radiusFractions.map(function(d) {
            return d / radiusNormalSum;
          }), 0);
			radiusScale.domain([0, sum]).range([0, smallestDimension / 6]);
      var svg = d3.select(this).selectAll('svg').data([data]),
          svgEnter = svg.enter().append('svg');
			svg.attr('width', outerWidth).attr('height', outerHeight);
			var gEnter = svgEnter.append('g'),
          g = svg.select('g').attr('transform', 'translate(' + margin.left + ' ' + margin.top + ')'),
          circleRing = g.selectAll('circle.ring').data(data[1]),
          circleRingEnter = circleRing.enter().append('circle').attr('class', 'ring');
      circleRing.attr('cx', function(d, i) {
        return smallestDimension / 3 * Math.cos(2 * Math.PI * (scanned[i] + scanned[i + 1]) / 2) + width / 2;
      }).attr('cy', function(d, i) {
        return smallestDimension / 3 * Math.sin(2 * Math.PI * (scanned[i] + scanned[i + 1]) / 2) + height / 2;
      }).attr('r', function(d) {
        return radiusScale(d[1]);
      }).style('fill', function(d) {
        return colorScale(d[0]);
      });
      var circleMain = g.selectAll('circle#main').data([data[0]]),
          circleMainEnter = circleMain.enter().append('circle').attr('id', 'main');
      circleMain.attr('cx', width / 2).attr('cy', height / 2).attr('r', radiusScale(sum)).style('fill', function(d) {
        return colorScale(d);
      });
		});
	};
	result.aspectRatio = function(value) {
		if(value === undefined) return aspectRatio;
		aspectRatio = value;
		return result;
	};
	result.margin = function(value) {
		if(value === undefined) return margin;
		margin = value;
		return result;
	};
	return result;
}

var myBubbleChart = bubbleChart().margin({
  top: 1,
  right: 1,
  bottom : 1,
  left: 1
});
var data = ['Random Names, Random Amounts', [['Immanuel', .4], ['Pascal', 42.9], ['Marisa', 3.3], ['Hadumod', 4.5], ['Folker', 3.2], ['Theo', 4.7], ['Barnabas', 1.0], ['Lysann', 11.1], ['Julia', .7], ['Burgis', 28.2]]];
d3.select('#here').datum(data).call(myBubbleChart);
```

```
<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <div id="here"></div>
    </div>
  </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T10:31:59.993

您可以使用[包布局](http://bl.ocks.org/mbostock/4063269)，基本上您可以将您想要的任何数据绑定到图表中的形状和自定义参数，以便它们相互尊重。另一种选择是力布局。

# jquery - Twitter Bootstrap 模态和 CRUD

> ID：14878557
> 
> 赞同：1
> 
> 时间：2013-02-14T15:43:32.940
> 
> 标签：jquery, html, twitter-bootstrap, laravel

所以，我专门在 Laravel 中开发我的应用程序，但我认为这个问题对于任何 Web 应用程序都更普遍，因为它实际上是围绕引导和模式页面的使用。

我有兴趣了解其他人如何使用打包的引导模式创建 CRUD 功能。

模态似乎很适合所有类型的表单。问题确实与设置有关。我试图为我的应用程序创建一个联系人 CRUD。

例如，一个帐户可能有多个联系人，因此在查看帐户页面时，我希望用户能够使用通过模式呈现的相同表单创建或更新联系人。

仅使用引导程序包，您可以使用远程数据加载模态的主体，但只能加载一次。所以我打开联系人 1 进行编辑，关闭模式，然后尝试打开联系人 2，我得到的唯一信息是联系人 1，因为它不会进行第二次远程加载。

这可以通过这篇文章中的重要信息轻松解决 [Twitter bootstrap modal 加载错误的远程数据](https://stackoverflow.com/questions/13104919/twitter-bootstrap-modal-loads-wrong-remote-data)

虽然这个解决方案运作良好，但似乎我正在打破框架并且感觉就像我正在将模式用于它不打算用于的东西。也许引导模式不是 CRUD 的正确 ui 元素。那么，其他人是如何处理这个问题的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:30:22.997

我已经做到了。解决这个问题的方法是使用 jQuery AJAX 调用并在 Laravel 应用程序中测试 Ajax 请求。

这是一个关于在 Laravel 中使用 Ajax 的不错的教程：http: [//codehappy.daylerees.com/ajax-content](http://codehappy.daylerees.com/ajax-content)

为了验证您的表单，我推荐 Parsley.js，它与 Bootstrap 一起工作很棒：http: [//parsleyjs.org/](http://parsleyjs.org/)

还有一个专门为 Bootstrap ajax 调用编写的很棒的插件，在这里查看如何将它集成到我的论坛帖子中： [http ://forums.laravel.io/viewtopic.php?pid=27900](http://forums.laravel.io/viewtopic.php?pid=27900)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:30:08.773

我的公司使用 Bootstrap 模态进行相当复杂的表单数据交互并取得了很好的成功。我看不出为什么你不能使用 ajax 或其他任何东西以及模式来提供更无缝的用户体验。毕竟，模式只不过是浮动页面层上的 div。

# php - jquery .eq 不适用于某些导航项目

> ID：14878561
> 
> 赞同：1
> 
> 时间：2013-02-14T15:43:38.610
> 
> 标签：php, javascript, jquery, ajax, wordpress

我正在 WP 中开发一个页面，我在页面上有一组帖子，这些帖子添加到幻灯片中，并且在其中有一个隐藏的 div，其中隐藏了帖子画廊图像，这些画廊被分成帖子并生成就像帖子幻灯片一样，除了这些容器是实际的帖子内容。

当您单击幻灯片项目时，它会在隐藏容器中切换该相关项目的可见性并将其显示在滑块上方，然后您可以将其关闭以清除 div。目前我有这个在按钮上工作作为测试，你将在下面看到。

下面通过 wordpress 查询帖子生成的标记：

链接到帖子的按钮由 javascript 循环创建，计算帖子的数量：

```
<button class="toggles">work-1</button>
<button class="toggles">work-2</button>
<button class="toggles">work-3</button> 
```

然后在它下面有一个名为 .project 的隐藏容器，当您单击一个项目时它会显示出来：

这是标记：

```
<article class="post royalSlider rsMinW"id="work-2 Exposure">
  <img src="http://2mz:8888/wp-content/uploads/2013/02/interactive_table2.jpg"alt="" />
    <div class="rsContent">
      <span class="rsABlock txtLeft col1" data-move-effect="none">interactive_table</span>
      <span class="rsABlock txtLeft col2" data-move-effect="none">
      </span>
    </div>
   <img src="http://2mz:8888/wp-content/uploads/2013/02/table_build_03.jpg"alt="" />
   <div class="rsContent">
      <span class="rsABlock txtLeft col1" data-move-effect="none">table_build_03</span>
      <span class="rsABlock txtLeft col2" data-move-effect="none">
      </span>
   </div>
   <img src="http://2mz:8888/wp-content/uploads/2013/02/table_build01.jpg"alt="" />
   <div class="rsContent">
      <span class="rsABlock txtLeft col1" data-move-effect="none">table_build01</span>
      <span class="rsABlock txtLeft col2" data-move-effect="none"></span>
   </div>
   <img src="http://2mz:8888/wp-content/uploads/2013/02/table_build02.jpg"alt="" />
   <div class="rsContent">
      <span class="rsABlock txtLeft col1" data-move-effect="none">table_build02</span>
      <span class="rsABlock txtLeft col2" data-move-effect="none"></span>
   </div>
   <img src="http://2mz:8888/wp-content/uploads/2013/02/table_detail.jpg"alt="" />
   <div class="rsContent">
      <span class="rsABlock txtLeft col1" data-move-effect="none">table_detail</span>
      <span class="rsABlock txtLeft col2" data-move-effect="none">
      </span>
   </div>
</article> 
```

我遇到的问题是我有一些javascript，基本上将带有#work-前缀的顶部按钮链接到具有相同id =“#work-1,2,3 ...等的实际隐藏项目的ID " 像这样：

```
var projects = $('.project section article[id^="work-"]');
var num = projects.length;
//var nav = $('.projects section article')

console.log(num);

for (i=1; i<=num; i++) {

    $('<button class="toggles" />').text('work-'+i).appendTo('#site-logo');
}

$('.toggles').live('click',
    function(){
    var thisIs = $(this).index();
    $('.projects > .project section article[id^="work-"]').eq(thisIs).toggle();
    $('.project').fadeIn(1000, 'easeInOutQuart');
}); 
```

它可以工作，但它总是忽略最后一个项目，所以我可以让其中 2 个工作，但是链接到按钮的项目之一根本无法工作。

有没有人知道为什么它不起作用或更好的方法来做到这一点？

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:47:42.253

在您的实时点击功能内部，`thisIs`索引为零，因此它实际上与您点击的名称不匹配。你的项目部分没有完整的标记，所以我不知道这是否是问题所在，但你说

> 将带有 #work- 前缀的顶部按钮链接到具有相同 id="#work-1,2,3...etc" 的实际隐藏项目的 id

这意味着它应该匹配：work-1 按钮应该显示 work-1 项目，而不是你得到的 work-0。

因此，您可以将 1 添加到索引中：

```
var thisIs = $(this).index() + 1; 
```

或者，您可以在创建元素时附加点击处理程序。

```
for (i=1; i<=num; i++) {
  $('<button class="toggles"/>')
    .text('work-'+i)
    .attr('button-index', i)
    .appendTo('#site-logo')
    .bind('click', function() {
        var buttonIndex = $(this).attr('button-index');
        // prove the index is correct
        console.log(buttonIndex );

        // rest of the click handler code=
        $('.projects > .project section article[id^="work-"]').eq(buttonIndex ).toggle();
        $('.project').fadeIn(1000, 'easeInOutQuart');
    });
} 
```

这会使您的按钮标记如下所示：

```
<button class="toggles" button-index="1">work-1</button>
<button class="toggles" button-index="2">work-2</button>
<button class="toggles" button-index="3">work-3</button> 
```

我个人喜欢将我需要的数据设置为与它们相关的 dom 元素的属性，这样可以更容易地查看发生了什么。并且从属性中提取数据在 jQuery 中不太可能发生变化，而`.index()`如果您从调用它的位置移动或调整查询，您可能会用该函数击中自己的脚。

最后，请注意在 jQuery 1.7 中`.live`已[弃用](http://api.jquery.com/live/)并在 1.9 中删除，因此您可能希望升级并主动更改使用它的任何其他处理程序以[`.on`](http://api.jquery.com/on/)

# php - 使用 Javascript/jQuery 解析 JSON

> ID：14878566
> 
> 赞同：-1
> 
> 时间：2013-02-14T15:43:48.140
> 
> 标签：php, jquery, html, json

我无法在我的网站中嵌入 json。

这是html和javascript：

```
<!doctype html>
<html lang="us">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Example Page</title>
    <link href="css/custom-theme/jquery-ui-1.10.0.custom.css" rel="stylesheet">
    <script src="js/jquery-1.9.0.js"></script>
    <script src="js/jquery-ui-1.10.0.custom.js"></script>
    <script>

    function isJSON(str) {
        try {
            JSON.parse(str)
        } catch (e) {
            return false
        }
        return true
    }

    jQuery(function(){

        <?
            $arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
        ?>

        data = <?= json_encode($arr) ?>

        if (isJSON(data)) {
            json = jQuery.parseJSON(data)
            console.log(json)
        } else {
            console.log("Not a json.")
            console.log(data)
            console.log(jQuery.parseJSON(data))
        }

    })

    </script>

<body>

</body>
</html> 
```

这在控制台中输出以下内容：

```
Not a json. filename.php:29
Object {a: 1, b: 2, c: 3, d: 4, e: 5} filename.php:30
Uncaught SyntaxError: Unexpected token o 
```

已经度过了漫长的一天，而且很可能（希望）我错过了一些明显的东西。我尝试在这里验证生成的 json：http: [//jsonlint.com/](http://jsonlint.com/)并且根据他们的站点它是有效的。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:45:35.547

JSON（或多或少）是一种 JavaScript 文字。

如果将其转储到脚本中，则根本不需要解析它。

```
var data = <?php echo json_encode($arr); ?>;
console.log(data); 
```

如果你想传递一些东西，`jQuery.parseJSON`那么你需要生成一个包含 JSON 的 JavaScript 字符串，而不是纯 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:50:16.907

我在这里看到了两个问题（除了使用 PHP 短标签）。首先，您在所有行的末尾都缺少分号。第二个是在线的

```
data = <?= json_encode($arr) ?>; 
```

这将产生类似的东西：

```
data = {"a": 1, "b": 2, ...}; 
```

这已经是一个解码的对象。你不能再`json_decode`这样了。而且没有必要这样做。如果您坚持使用`json_decode`它，则需要将其输出为字符串：

```
data = "<?= str_replace("\"", "\\\"", json_encode($arr)) ?>"; 
```

这将产生如下内容：

```
data = "{\"a\": 1, \"b\": 2, ...}"; 
```

现在你`data`包含一个字符串，它可以是`json_decode`d。

# sql - BCP queryout 命令创建文本文件，但在事务的作业步骤中执行时挂起

> ID：14878568
> 
> 赞同：0
> 
> 时间：2013-02-14T15:43:51.770
> 
> 标签：sql, tsql, transactions, jobs, bcp

好的，我已经与这个问题作斗争了将近一个星期，我一生都无法弄清楚问题是什么。

问题：BCP 实用程序创建 txt 文件，但之后没有任何反应。该文件只是坐在那里并且是空白的。BCP 几乎挂起。我必须结束进程才能停止它。BCP 命令位于存储过程中，该存储过程位于作业步骤中的事务中。如果我使用 sproc 本身并在 Management Studio 中运行它，则该文件的创建没有问题。如果我创建一个 SQL 作业并只放置运行 BCP 命令的存储过程，它也可以工作。

这是工作步骤：

```
BEGIN TRANSACTION

BEGIN TRY

EXEC dbo.DataManipulation1
EXEC dbo.DataManipulation2
EXEC dbo.DataManipulation3
EXEC dbo.DataManipulation4
EXEC dbo.DataManipulation5

EXEC dbo.spCreateFiles 0

EXEC dbo.spSendEmail 'PASS'

COMMIT TRANSACTION
END TRY

BEGIN CATCH

ROLLBACK TRANSACTION

EXEC dbo.spGetDatabaseErrorInfo
EXEC dbo.spCreateFiles 1
EXEC dbo.spSendEmail 'FAIL'
END CATCH 
```

这是 spCreateFiles 存储过程。高级概述：Sproc 生成系统文件夹，然后对 txt 文件进行查询。而已。如果传递给sproc的参数为0，它将根据sproc的执行生成文件，如果参数不为0，则生成空白文件。一共4个文件。BCP 命令的用户名和密码因显而易见的原因而被删除。从我在线阅读的一些内容来看，这可能是因为某些东西正在锁定文件……可能是存储过程或 SQL 作业，甚至是事务，然后当 BCP 实用程序尝试使用它时，什么也没有发生。

```
ALTER PROCEDURE [dbo].[spCreateFiles] @errorCode BIT
AS 
    BEGIN
        BEGIN TRY
            SET NOCOUNT ON;

            DECLARE @year CHAR(4)
            DECLARE @month CHAR(2)
            DECLARE @day CHAR(2)

            DECLARE @rootDir VARCHAR(200)
            DECLARE @yearDir VARCHAR(200)
            DECLARE @monthDir VARCHAR(200)
            DECLARE @dayDir VARCHAR(200)
            DECLARE @dirsTable TABLE (directory VARCHAR(200))

            DECLARE @baseFileName VARCHAR(8)
            DECLARE @detailFile VARCHAR(500)
            DECLARE @detailNydFile VARCHAR(500)
            DECLARE @summaryFile VARCHAR(500)
            DECLARE @summaryNydFile VARCHAR(500)

            DECLARE @cmdQueryout VARCHAR(2000)

            SET @rootDir = 'C:\Test\'
            SET @year = DATEPART(YEAR, GETDATE())
            SET @month = RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(MONTH, GETDATE())), 2)
            SET @day = RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(DAY, GETDATE())), 2)
            SET @yearDir = @rootDir + @year + '\'
            SET @monthDir = @rootDir + @year + '\' + @year + @month + '\'
            SET @dayDir = @rootDir + @year + '\' + @year + @month + '\' + @year + @month + @day + '\'
            SET @baseFileName = @year + @month + @day

            PRINT @rootDir

            PRINT @year
            PRINT @month
            PRINT @day

            PRINT @yearDir
            PRINT @monthDir
            PRINT @dayDir

            PRINT @baseFileName

            INSERT  INTO @dirsTable
                    EXEC master.dbo.xp_subdirs 
                        @rootDir

            IF NOT EXISTS ( SELECT  directory
                            FROM    @dirsTable
                            WHERE   directory = @year ) 
                EXEC master.sys.xp_create_subdir 
                    @yearDir

            DELETE  FROM @dirsTable    

            INSERT  INTO @dirsTable
                    EXEC master.dbo.xp_subdirs 
                        @yearDir

            IF NOT EXISTS ( SELECT  directory
                            FROM    @dirsTable
                            WHERE   directory = @month ) 
                EXEC master.sys.xp_create_subdir 
                    @monthDir
            DELETE  FROM @dirsTable   

            INSERT  INTO @dirsTable
                    EXEC master.dbo.xp_subdirs 
                        @monthDir

            IF NOT EXISTS ( SELECT  directory
                            FROM    @dirsTable
                            WHERE   directory = @day ) 
                EXEC master.sys.xp_create_subdir 
                    @dayDir
            DELETE  FROM @dirsTable 

            SET @detailFile = @dayDir + @baseFileName + ' Detail.txt'
            SET @detailNydFile = @dayDir + @baseFileName + ' Detail_NYD.txt' 
            SET @summaryFile = @dayDir + @baseFileName + ' Summary.txt'
            SET @summaryNydFile = @dayDir + @baseFileName + ' Summary_NYD.txt'

            PRINT @detailFile
            PRINT @detailNydFile
            PRINT @summaryFile
            PRINT @summaryNydFile

            IF @errorCode = 0 
                BEGIN     
                    PRINT 'Error Code: ' + CAST(@errorCode AS CHAR(1))  
                    SET @cmdQueryout = 'bcp "EXEC DB_NAME.dbo.spGetDetailRecords" queryout "' + @detailFile + '" -c -Uusername -Ppassword'
                    PRINT @cmdQueryout

                    EXEC master..xp_cmdshell 
                        @cmdQueryout  

                    SET @cmdQueryout = 'bcp "EXEC DB_NAME.dbo.spGetDetailNYDRecords" queryout "' + @detailNydFile + '" -c -Uusername -Ppassword'
                    PRINT @cmdQueryout  

                    EXEC master..xp_cmdshell 
                        @cmdQueryout    

                    SET @cmdQueryout = 'bcp "EXEC DB_NAME.dbo.spGetSummaryRecords" queryout "' + @summaryFile + '" -c -Uusername -Ppassword'
                    PRINT @cmdQueryout

                    EXEC master..xp_cmdshell 
                        @cmdQueryout        

                    SET @cmdQueryout = 'bcp "EXEC DB_NAME.dbo.spGetSummaryNYDRecords" queryout "' + @summaryNydFile + '" -c -Uusername -Ppassword'
                    PRINT @cmdQueryout

                    EXEC master..xp_cmdshell 
                        @cmdQueryout 
                END
            ELSE 
                BEGIN
                    SET @cmdQueryout = 'bcp "SELECT NULL" queryout "' + @detailFile + '" -c -Uusername -Ppassword'
                    EXEC master..xp_cmdshell 
                        @cmdQueryout  

                    SET @cmdQueryout = 'bcp "SELECT NULL" queryout "' + @detailNydFile + '" -c -Uusername -Ppassword'                 
                    EXEC master..xp_cmdshell 
                        @cmdQueryout    

                    SET @cmdQueryout = 'bcp "SELECT NULL" queryout "' + @summaryFile + '" -c -Uusername -Ppassword'
                    EXEC master..xp_cmdshell 
                        @cmdQueryout        

                    SET @cmdQueryout = 'bcp "SELECT NULL" queryout "' + @summaryNydFile + '" -c -Uusername -Ppassword'    
                    EXEC master..xp_cmdshell 
                        @cmdQueryout
                END    
        END TRY
        BEGIN CATCH
            EXEC dbo.spGetDatabaseErrorInfo
        END CATCH   
    END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T17:22:06.633

我弄清楚了这个问题。

事务打开时，我无法使用 BCP 实用程序。我必须提交事务，然后使用 BCP。

# php - PHP RegEx：验证二级域的模式

> ID：14878570
> 
> 赞同：2
> 
> 时间：2013-02-14T15:43:58.953
> 
> 标签：php, regex

**注意：**这是一个关于 PHP 正则表达式风格的理论问题，而不是关于 PHP 验证的实际问题。我只是使用域名，因为没有更好的例子。

“二级域名”是指放在 http:// 或`http://www.`.com（.co、.info、.etc）之间的字母、数字、句号和/或破折号的组合。

我只对使用英文版拉丁字母的二级域名感兴趣。

这种模式：

```
[A-Za-z0-9.-]+ 
```

匹配有效域名，例如 stackoverflow、StackOverflow、stackoverflow.co（如在 stackoverflow.co.uk 中）、stack-overflow 或 stackoverflow123。

但是，相同的模式也可以匹配 stack...overflow、stack---over--flow、........、-------- 甚至 .. 和 -。

如何重写该模式，以指示该周期符号和破折号，即使它们可以在一个节点中多次使用，

*   不能在没有其他符号的情况下使用，
*   不能并排放置两次或多次，
*   并且不能放在节点的开头或结尾？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:04:07.690

我认为这样的事情应该可以解决问题：

```
^([a-zA-Z0-9]+[.-])*[a-zA-Z0-9]+$ 
```

这试图做的是

> 从字符串的开头开始，在结尾结束
> 
> 一个或多个字母或数字
> 后跟点或连字符
> 
> 上述组重复 0 次或多次
> 
> 后跟一个或多个字母或数字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:03:07.760

假设您正在寻找一个不允许两个连续 . 或 - 您可以使用：

```
^[a-zA-Z0-9]+([-.][a-zA-Z0-9]+)*$ 
```

[**正则表达式演示**](http://regexr.com?33pbs)

# regex - 将尾随零添加到记事本++中的行

> ID：14878571
> 
> 赞同：1
> 
> 时间：2013-02-14T15:43:59.450
> 
> 标签：regex, notepad++

我有一个包含（数百个）数字块的文件，如下所示；

这个很好（16x20，正确的行数和列数）

```
11111111111111111110
16666616666666661110
16111616111111162610
16111646111663132610
16162616261623132610
16162313261623132610
16162313261623132610
16162313261623132610
16162313261623132610
16162313261623132610
16162313261623132610
16162313261626132610
16166313661116632610
16111111111116132610
16666666666666136610
11111111111111111110 
```

这个需要用尾随零填充，所以它是（16x20）

```
111111111111111111
166616666666663661
166611111111111661
166666366663661661
113161111111161611
1316166666616161
1616162262616161
11616166112616161
16616166116616161
16616162262616161
16616166266616161
16616111161116161
1661666666666616111
1661666166163366661
1641666166166613661
1111111111111111111 
```

我想用零填充它们，所以它们都像第一个例子。我知道 notepad++ 中的正则表达式功能，但正在努力让它工作。我感谢提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:21:34.930

你可以通过宏来做到这一点。

首先使用宏在每一行的末尾附加大量的零。

1.  第一个条目上的插入符号
2.  点击录制宏
3.  按`end`
4.  输入 20 个零
5.  按`down arrow`
6.  点击停止录制
7.  播放宏，直到所有行看起来像这样

    11111111111111111100000000000000000000000000000000000000000000 16661666666666366100000000000000000000000000000000000000000000 16661111111111166100000000000000000000000000000000000000000000 16666636666366166100000000000000000000000000000000000000000000 11316111111116161100000000000000000000000000000000000000000000 131616666661616100000000000000000000000000000000000000000000 161616226261616100000000000000000000000000000000000000000000 1161616611261616100000000000000000000000000000000000000000000 1661616611661616100000000000000000000000000000000000000000000 1661616226261616100000000000000000000000000000000000000000000 1661616626661616100000000000000000000000000000000000000000000 1661611116111616100000000000000000000000000000000000000000000 166166666666661611100000000000000000000000000000000000000000000 166166616616336666100000000000000000000000000000000000000000000 16416661661666136610000000000000000000000000000000 11111111111111111110000000000000000000000000000000

然后...

1.  插入符号在第一行
2.  点击记录
3.  按键`home`_
4.  按键`right arrow`20 次
5.  按住键`shift`_`end`
6.  按键`delete`_
7.  按`down arrow`
8.  点击停止录制
9.  播放宏，直到处理完所有行

您可以将整个过程保存为单个宏，以便将来只需单击一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-15T14:27:43.207

您可以使用插件 ConyEdit 来执行此操作。在后台运行 ConyEdit，请按照以下步骤操作：

1.  使用命令行在`cc.aal 00000000000000000000`带有二十个零字符的行之后追加。
2.  使用命令行`cc.gc 1/\d{20}/`获取正则表达式匹配的第一列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:13:51.047

我可以给你一个宏观的解决方案

转到文本的开头

选择`Macro/Start Recording`

按`end`, 按`0`16 次然后按`Home`和`down arrow key`

选择`Macro/End Recording`

您现在有一个宏可以在所有行的末尾添加 16 个零。在所有线路上播放此宏。

您现在已将零附加到所有行。

按键`Alt`并使用鼠标选择所需的文本块（列）并将其粘贴到另一个空白记事本选项卡中

列模式编辑的帮助在记事本`? / help contents`菜单中

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:47:38.010

想要手动而不是 progomatic 地执行此操作？

打开查找替换

从最后一个复制到第一个，没有数字，所以...

在这个例子中

111111111111111111 <---从这里到这里---> 166616666666663661 166611111111111661

将其粘贴到罚款中（是的，您有效地复制了某些应用程序允许您手动输入其他人不会的回报）

然后在替换框中，输入'0'然后你的回报击中那个魔法全部替换：D

然后，每次遇到新行时都会添加一个 0，然后添加一个新的...新行...。

编辑：快速审查另一种方法以恢复备用选项：P 给我 10

编辑2：

好吧，这样的事情会起作用：P刚刚测试过。
在查找替换中使用 [0-9]。因此，如果我正在寻找 123123123123 （最长 12 个）并且我需要将我抛光到 20 个，
那么您的 FIND 必须在 () 中，所以..

发现将是

```
 ([0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]  ) 
```

并且替换被称为 \1 没有正则表达式，这是我的错误

\100000000

测试并确认！不要忘记你需要匹配所有**的**东西，包**起来**！

等等你的其他数字，不确定你是否可以用宏和东西循环这个：P但希望它比你现在有更多帮助

两个好资源。

[http://blog.creativeitp.com/posts-and-articles/editors/understanding-regex-with-notepad/comment-page-1/](http://blog.creativeitp.com/posts-and-articles/editors/understanding-regex-with-notepad/comment-page-1/)

[http://regexpal.com/](http://regexpal.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T16:35:36.383

基于 OP 的评论：您可以尝试使用名为 vim/gvim 的编辑器

在 vim 中打开你的文件，然后输入：

```
:%s/.*/\=printf("%-20s",getline("."))/|%s/ *$/\=substitute(submatch(0)," ","0","g")/ 
```

不要忘记`<Enter>`在上述键入后按。

然后你会看到文本已经变成了你想要的。

当然 vim 宏也可以工作，但是，我觉得命令更好...... :)

# c - windows vs linux上fopen中“r+”的使用

> ID：14878574
> 
> 赞同：5
> 
> 时间：2013-02-14T15:44:03.930
> 
> 标签：c, linux, windows, file-io, fopen

我正在玩弄一些打开、读取和修改文本文件的代码。一个快速（简化）的例子是：

```
#include <stdio.h>
int main()
{
    FILE * fp = fopen("test.txt", "r+");
    char line[100] = {'\0'};
    int count = 0;
    int ret_code = 0;
    while(!feof(fp)){
        fgets(line, 100, fp);
        // do some processing on line...
        count++;
        if(count == 4) {
          ret_code = fprintf(fp, "replaced this line\n");
          printf("ret code was %d\n", ret_code);
          perror("Error was: ");
        }
    }
    fclose(fp);
    return 0;
} 
```

现在在 Linux 上，使用 gcc (4.6.2) 编译此代码运行，并修改文件的第 5 行。在使用 Visual C++2010 编译的 Windows7 上运行的相同代码运行并声称已成功（报告 19 个字符的返回代码并`perror`显示“无错误”）但未能替换该行。

在 Linux 上，我的文件具有完全权限：

```
-rw-rw-rw- 1 mike users 191 Feb 14 10:11 test.txt 
```

据我所知，在 Windows 上也是如此：

test.txt（右键单击）-> 属性-> 安全性
“允许”检查用户、系统和管理员的读写。

我在 Windows 上使用 MinGW 的 gcc 得到了相同的结果，所以我知道它不是 Visual C++“功能”。

我是否遗漏了一些明显的东西，或者我没有收到错误，但也没有输出只是在 Windows上使用`r+`with的一个未记录的“功能”？`fopen()`

* * *

**编辑：**
似乎即使在[微软的网站上](http://msdn.microsoft.com/en-us/library/yeby3zcb(v=vs.71).aspx)，他们也说“r+”应该打开阅读*和*写作。他们还做了这样的说明：

> 当指定“r+”、“w+”或“a+”访问类型时，允许读取和写入（文件被称为“更新”打开）。但是，当您在读取和写入之间切换时，必须有中间的 fflush、fsetpos、fseek 或 rewind 操作。如果需要，可以为 fsetpos 或 fseek 操作指定当前位置。

所以我尝试了：

```
 ...
        if(count == 4) {
          fflush(fp);
          ret_code = fprintf(fp, "replaced this line\n");
          fflush(fp);
          printf("ret code was %d\n", ret_code);
          ... 
```

无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:05:05.617

根据[Linux手册页`fopen()`](http://linux.die.net/man/3/fopen)：

> 读和写可以以任何顺序在读/写流上混合。请注意，ANSI C 要求文件定位函数在输出和输入之间进行干预，除非输入操作遇到文件结尾。（如果不满足此条件，则允许读取返回除最近写入之外的写入结果。）因此，放置 fseek(3) 或 fgetpos(3 ) 对此类流的写入和读取操作之间的操作。这个操作可能是一个明显的无操作（如 fseek(..., 0L, SEEK_CUR) 调用它的同步副作用。

因此，在从文件读取和写入之间切换时，您应该始终调用`fseek()`（例如）。`fseek(..., 0, SEEK_CUR)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T16:09:52.540

在输入后执行输出之前，an`fflush()`没有任何好处 - 您需要执行查找操作。就像是：

```
fseek(fp, ftell(fp), SEEK_SET); // not fflush(fp); 
```

来自 C99 标准（7.19.5.3/6“fopen 函数）：

> 当以更新模式打开文件时（“+”作为上述模式参数值列表中的第二个或第三个字符），可以在关联的流上执行输入和输出。但是，如果没有对 fflush 函数或文件定位函数（fseek、fsetpos 或 rewind）的干预调用，则输出不应直接跟随输入，并且在没有对文件定位的干预调用的情况下，输入不应直接跟随输出函数，除非输入操作遇到文件结尾。

# c# - 在视图中创建新的 SelectList 时未设置 DropDownListFor 值

> ID：14878584
> 
> 赞同：1
> 
> 时间：2013-02-14T15:44:35.077
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

示例＃1（这个有效）

```
@Html.DropDownListFor(m => m.State.Id, Model.States) 
```

我正在为这样的第一个示例在控制器中创建 SelectList。

```
var states = Repository.GetStates();
var statesSelectList = new SelectList(states, "Id", "Name");

//model.States is a SelectList
model.States = statesSelectList; 
```

示例 #2（这不会在加载时设置选定的值）

```
@Html.DropDownListFor(m => m.State.Id, new SelectList(Model.States, "Id", "Name")) 
```

我正在第二个示例的视图中创建 SelectList，控制器看起来像这样。

```
//model.States is a List<State>.
model.States = Repository.GetStates(); 
```

看来我一定缺少一些简单的东西。如果我需要澄清其他任何事情，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:31:25.617

将属性添加到您的视图模型：

```
private int? stateId;
public int StateId
{
    get { return stateId ?? State.Id; }
    set { stateId = value; }
} 
```

然后在你的 Razor 视图中：

```
@Html.DropDownListFor(m => m.StateId, new SelectList(Model.States, "Id", "Name")) 
```

最后在您的控制器 POST 操作中：

```
model.State = Repository.GetState(model.StateId); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:12:02.033

很简单，是的。明显没有。`DropDownListFor`不绑定到嵌套对象，如`m => m.State.Id`.

它专为更基本的关系而设计，例如`m => m.Id`

# mysql - 包括 MySQL 中的其余行

> ID：14878587
> 
> 赞同：0
> 
> 时间：2013-02-14T15:44:35.013
> 
> 标签：mysql, sql

我有一个选择用户权限并添加`true`到它们的 SQL 查询。

```
SELECT
    PrivilageName,
    'true' hasrights  <-- imaginary column
FROM
    users
NATURAL JOIN usermemberships
NATURAL JOIN groupprivileges
NATURAL JOIN `privileges`
WHERE
    UserID = '2' 
```

结果是

```
AddBuilding           true
RemoveBuilding        true
EditBuilding          true 
```

我正在尝试添加具有`false`价值的其余特权。

```
AddBuilding           true
RemoveBuilding        true
EditBuilding          true
RemoveUser            false
AddUser               false 
```

我将如何做到这一点？

编辑：表的结构：

`users(UserID)`,
`usermemberships(UserID, groupID)`,
`groupprivileges(GroupID, PrivilegeID)`,
`privileges(PrivilegeID, PrivilageName)`

编辑：拼写错误，对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:02:53.887

（注意：此答案中的查询现已更新，以包括添加到问题中的列名。）

获得该结果集的一种方法是使用`LEFT JOIN`操作（在 caluse 中带有适当的谓词`ON`）来代替所有这些`NATURAL JOIN`操作。

（我只是在猜测 引用的列名`NATURAL JOIN`。为了破译这一点，我们需要检查每个表定义以获取所有列的列表，然后找到所有匹配的列名找出 MySQL 使用哪些列来执行这些内部连接操作。）

根据查询文本中提供的少量信息，这是我将采取的方法（再次，只是猜测每个 ON 子句中引用的名称）：

```
SELECT p.PrivilageName
     , IF(u.UserID IS NOT NULL,'true','false') AS hasrights
  FROM `privileges` p
  LEFT
  JOIN groupprivileges g 
    ON g.PrivilegeID = p.PrivilegeID
  LEFT
  JOIN usermemberships m
    ON m.GroupId = g.GroupID
  LEFT
  JOIN users u
    ON u.UserID = g.UserID
   AND u.UserID = 2 
```

取决于这些表中的基数（即授予两个不同组的“AddBuilding”权限，一个是用户的成员，另一个不是......）

并取决于您是否要避免返回任何“重复”`PrivilageName`值（具有“true”或“false”的多行，或每个 PrivilageName 具有“true”和“false”的行），并取决于您希望如何结果集已排序（即，您是否希望首先列出所有“真实”权限？）...

那么这个查询在返回的结果集中更具确定性，它只会返回每个 PrivilageName 一次。这个结果集似乎更适合回答用户是否有特权的问题。

```
SELECT p.PrivilageName
     , MAX(IF(u.UserID IS NOT NULL,'true','false')) AS hasrights
  FROM `privileges` p
  LEFT
  JOIN groupprivileges g 
    ON g.PrivilegeID = p.PrivilegeID
  LEFT
  JOIN usermemberships m
    ON m.GroupId = g.GroupID
  LEFT
  JOIN users u
    ON u.UserID = g.UserID
   AND u.UserID = 2
 GROUP BY p.PrivilageName
 ORDER BY hasrights DESC, p.PrivilageName ASC 
```

（就个人而言，我会省略 ORDER BY，并让结果按 PrivilageName 排序，但使用 ORDER BY，这更好地匹配问题中指定的结果集。）

* * *

当然，这不是获得结果集的唯一方法，但它可能是最有效的（给定合适的索引）。

就个人而言，我从不使用`NATURAL JOIN`. （我想查看语句中的谓词，如果有人将具有匹配名称的列添加到我的查询中的一个表中，我不希望我的任何查询“中断”。（实际上，考虑一下，我不能使用 NATURAL JOIN 因为`id`通常是我几乎所有表的主键列的名称......外键列通常被命名`referencedtable_id`。）但即使我确实以我可以使用的方式命名列 NATURAL JOIN ，我认为潜在的缺点超过了任何优点。

但是，类似下面的陈述可能会起作用。（我说“可能”是因为我没有使用这样的语法的任何经验......我从不使用自然连接，而且我总是更喜欢左连接而不是右连接。如果我店里有人带着这个来找我，我会给他们上面的语句。但我不想给你留下 a`NATURAL JOIN`不能用于返回指定结果集的印象。你指定的结果集可能会被这样的语句返回：

```
SELECT
    PrivilageName,
    MAX(IF(UserID=2,'false','true')) AS hasrights
FROM
    users
NATURAL RIGHT JOIN usermemberships
NATURAL RIGHT JOIN groupprivileges
NATURAL RIGHT JOIN `privileges`
GROUP BY PrivilageName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:49:26.973

您可以将 UNION 用于“连接”两个请求。

并且可能是运算符 IF() 可以帮助您。

# svn - 将 Subversion 文件夹的修订历史记录移动到新项目

> ID：14878595
> 
> 赞同：1
> 
> 时间：2013-02-14T15:44:55.720
> 
> 标签：svn, tortoisesvn

我们有几个软件共享同一个 Subversion 存储库项目。他们共享修订计数等。

我想为每个软件创建新项目，但我不想丢失他们的修订历史，用于查看日志、差异、指责等。

是否可以获取给定文件夹及其子文件夹和文件，并将其修订历史记录移动到空白项目中？

# php - PHP：preg_match_all 首先匹配内括号？

> ID：14878598
> 
> 赞同：2
> 
> 时间：2013-02-14T15:45:07.150
> 
> 标签：php, regex, preg-match-all

在 PHP 中，我有带有嵌套括号的字符串：

```
bar[foo[test[abc][def]]bar]foo 
```

我需要一个匹配内部括号对的正则表达式*，*因此`preg_match_all`找到匹配括号对的顺序应该是：

```
[abc]
[def]
[test[abc][def]]
[foo[test[abc][def]]bar] 
```

所有文本可能会有所不同。

这甚至可能`preg_match_all`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:53:02.653

这对于正则表达式是不可能的。无论您的正则表达式多么复杂，它总是会首先返回最左边的匹配项。

充其量，你必须使用多个正则表达式，但即使那样你也会遇到麻烦，因为正则表达式不能真正计算匹配的括号。你最好的办法是用其他方式解析这个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:30:28.347

在你的问题中并不明显你想要什么样的“匹配结构”......但你只能使用简单的数组。尝试

```
 preg_match_all('#\[([a-z\)\(]+?)\]#',$original,$m); 
```

也就是说，for`$original = 'bar[foo[test[abc][def]]bar]foo'`返回一个带有“abc”和“def”的数组，即内部数组。

* * *

对于您的输出，您需要一个用于“解析任务”的循环。[带有preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)的PCRE更适合解析。

也许这个循环是解决您问题的好线索，

```
 $original = 'bar[foo[test[abc][def]]bar]foo';

 for( $aux=$oldAux=$original; 
      $oldAux!=($aux=printInnerBracket($aux)); 
      $oldAux=$aux
 );
 print "\n-- $aux";

 function printInnerBracket($s) {
    return preg_replace_callback(
            '#\[([a-z\)\(]+?)\]#',  // the only one regular expression
            function($m) {
               print "\n$m[0]"; 
               return "($m[1])";
            },
            $s
    );
 } 
```

结果（回调打印）：

```
[abc]
[def]
[test(abc)(def)]
[foo(test(abc)(def))bar]
-- bar(foo(test(abc)(def))bar)foo 
```

* * *

另请参阅[此相关问题](https://softwareengineering.stackexchange.com/questions/190557/)。

# objective-c - 在目标c中重新制作多行段落

> ID：14878601
> 
> 赞同：0
> 
> 时间：2013-02-14T15:45:12.863
> 
> 标签：objective-c, regex

我有这样的两段

```
On Friday afternoon after you leave work, you probably
think about going out and having a few drinks with 
friends to relax and wind down.  Even though you 
may think you deserve to go out and have a few drinks,
there are some things that you should certainly keep
in mind.

Like any other day, tomorrow is going to be a day
for exercise, and since you are exercising on a 
regular basis, a few drinks of alcohol won't really
hurt anything, right?  Before you decide to rush out
to the local bar, there are a few things below that
you should think about before you make your choice
about going out to drink some alcohol. 
```

我该如何格式化：

```
On Friday afternoon after you leave work, you probably think about going out and having a few drinks with friends to relax and wind down. Even though you may think you deserve to go out and have a few drinks, there are some things that you should certainly keep in mind.

Like any other day, tomorrow is going to be a day for exercise, and since you are exercising on a regular basis, a few drinks of alcohol won't really hurt anything, right? Before you decide to rush out to the local bar, there are a few things below that you should think about before you make your choice about going out to drink some alcohol. 
```

我只知道如何用这样的空格替换 \n：

```
stringByReplacingOccurrencesOfString:@"\n" withString:@" " 
```

但我不知道如何识别每个段落

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:52:35.830

这段代码不是防弹的，需要额外的代码来清理任何无关的换行符，但它应该可以帮助你开始：

```
// Assuming your input string contains all the text, then:

NSArray *paragraphs = [input componentsSeparatedByString:@"\n\n"];
for (NSString *paragraph in paragraphs)
{
    NSString *cleaned = [paragraph stringByReplacingOccurrencesOfString:@"\n" withString:@" "];
    NSLog(@"paragraph = %@", cleaned);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:47:29.320

搜索两个连续的“\n\n”。这会告诉你这是一个段落。

# mysql - Wordpress：计算一个类别中所有帖子的自定义字段值？

> ID：14878603
> 
> 赞同：2
> 
> 时间：2013-02-14T15:45:14.813
> 
> 标签：mysql, wordpress

我有一个自定义帖子类型（产品），其中包括一个自定义数字字段（评级）。在类别（制造商）页面上，我想对这些评级进行平均，以便为制造商提供综合评级。

所以我正在尝试构建一个返回单个值的函数：

*   检索在使用此类别分类的自定义帖子中找到的所有非空评级字段的平均值
*   独立于循环运行（我需要在循环之前显示，有时帖子比循环使用的要多）

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:14:11.580

您创建将应用于制造商页面的自定义模板。在主循环之外，您将使用 WP_Query 创建一个辅助循环。然后，您遍历您的自定义帖子类型并累积它们存在的评级。设置一个计数器来计算平均值。然后`wp_reset_query()`在必要时使用重置循环。

我没有测试下面的代码（显然，我不会去设置所有这些），但它应该给你足够的想法，你可以调整/调试它以获得所需的结果；

在此示例中，我在您的自定义帖子类型 4 中创建了一个虚构的类别 ID，您可以将其更改为您的任何设置；

```
<?php
$counter = 0;
$cumulative_value = 0;

$avg_query = new WP_Query(array('post_type' => 'product', 'posts_per_page' => '-1', 'cat' => '4' ));

if ( $avg_query->have_posts() ) :  
    while ($avg_query->have_posts()) : $avg_query->the_post(); 

        if ( $rating_value = get_post_meta($post->ID, 'rating', true) ) :

            $cumulative_value += $rating_value;
            $counter++;

        endif;

    endwhile;

endif;

$avg_value = $cumulative_value/$counter;

wp_reset_query(); ?> 
```

# sql-server - 将数据分组

> ID：14878604
> 
> 赞同：0
> 
> 时间：2013-02-14T15:45:15.667
> 
> 标签：sql-server

我有代码

```
SELECT     TOP (100) PERCENT dbo.census.Group_Code, dbo.census.Gender, SUM(dbo.v_Courses.Dur_In_Hours) 
                      AS SumOf_Dur_In_Hours
FROM         dbo.v_Courses INNER JOIN
                      dbo.census ON dbo.v_Courses.Job_Group_Code = dbo.census.Group_Code
WHERE     (dbo.v_Courses.System = 'GEMS') AND (NOT (dbo.v_Courses.Course_ID LIKE 'UPS%')) AND 
                      (dbo.v_Courses.First_Access_date BETWEEN CONVERT(DATETIME, '2012-01-01 00:00:00', 102) AND CONVERT(DATETIME, '2012-12-31 00:00:00', 
                      102))
GROUP BY dbo.census.Group_Code, dbo.census.Gender
ORDER BY dbo.census.Group_Code 
```

它的目的是给我我的工作级别和性别的总小时数，但工作级别都为每个性别返回相同的小时数。而且我不知道如何让他们分开。

所以结果看起来像这样，但不可能每个性别都有相同的小时数。

```
Job     Gen         Hours
11  F   10886.50417
11  M   10886.50417
16  F   33494.17222
16  M   33494.17222
16  U   33494.17222
21  F   19267.76361
21  M   19267.76361 
```

是导致重复的性别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:51:56.060

您可以在内部连接中包含性别吗？或者 v_courses 没有这个字段？

```
SELECT     TOP (100) PERCENT dbo.census.Group_Code, dbo.census.Gender, SUM(dbo.v_Courses.Dur_In_Hours) 
                  AS SumOf_Dur_In_Hours
FROM         dbo.v_Courses 
INNER JOIN dbo.census 
   ON dbo.v_Courses.Job_Group_Code = dbo.census.Group_Code
   AND dbo.v_Courses.Gender = dbo.census.Gender
WHERE     (dbo.v_Courses.System = 'GEMS') AND (NOT (dbo.v_Courses.Course_ID LIKE 'UPS%')) AND 
                  (dbo.v_Courses.First_Access_date BETWEEN CONVERT(DATETIME, '2012-01-01 00:00:00', 102) AND CONVERT(DATETIME, '2012-12-31 00:00:00', 
                  102))
GROUP BY dbo.census.Group_Code, dbo.census.Gender
ORDER BY dbo.census.Group_Code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:58:48.317

如果您在没有组的情况下运行查询，您会看到重复的行吗？如果是这样，您可能需要在连接/位置中进行另一个限制。

# javascript - Javascript试图获取鼠标移动的图像的ID

> ID：14878606
> 
> 赞同：3
> 
> 时间：2013-02-14T15:45:25.183
> 
> 标签：javascript, html, css

我想获取鼠标悬停的图像的 id。但我不明白如何获得身份证。有人能帮我吗 ：）。泰！

```
function placeImage(x){
var div = document.getElementById("thumbnails");
div.innerHTML = ""; // clear images
for (var i =0; i <= x; i++) {

var image=document.createElement("img");
image.className += " Atributes";
image.src="images/foto_klein_"+i+".jpg";
image.width="135";
image.height="90";
image.alt="foto_klein_"+i;
image.id="image"+i;
image.position="relative";
div.appendChild(image);
image.style.marginRight = '10px';
_img.push(image);

}
}; 
```

使用 placeImage 函数，我可以放置图像。现在我想添加一个鼠标事件并更改目标图像的类。

```
<div id="thumbnails" onmouseover="mouseOver(this);" ></div> 
```

我在所有缩略图上添加了鼠标。但我无法获得鼠标悬停的图像的 id。我想调用 id 或更改该粒子图像的 image.className。但我不知道怎么称呼它。现在它只提醒“缩略图”

```
function mouseOver(e){
 alert(e.id);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T15:47:33.690

使用`this`关键字：

```
<div id="thumbnails" onmouseover="mouseOver(this);" ></div>

function mouseOver(e){
   alert(e.id);
} 
```

**从评论中编辑**：

```
var image=document.createElement("img");
   image.className += " Atributes";
   image.src="images/foto_klein_"+i+".jpg";
   image.width="135";
   image.height="90";
   image.alt="foto_klein_"+i;
   image.id="image"+i;
   image.mouseover = mouseOver;
   image.position="relative";
   div.appendChild(image);
   image.style.marginRight = '10px';
   _img.push(image);

} 
```

请注意`mouseOver`图像悬停时调用的函数。 `this`将引用图像元素而不是 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:03:46.960

要在`id`将鼠标悬停在图像上时获取图像，请尝试以下操作：

```
function placeImage(x){
    var div = document.getElementById("thumbnails");
    div.innerHTML = ""; // clear images
    for (var i =0; i <= x; i++) {
        var image=document.createElement("img");
        image.className += " Atributes";
        image.src="images/foto_klein_"+i+".jpg";
        image.width="135";
        image.height="90";
        image.alt="foto_klein_"+i;
        image.id="image"+i;
        image.position="relative";
        image.onmouseover = mouseOver;    // <-- Added this
        div.appendChild(image);
        image.style.marginRight = '10px';
        _img.push(image);
    }
}

function mouseOver(e) {
    alert(this.id);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T16:20:39.660

希望这会有所帮助，尽管我不确定它是否适用于动态添加的图像。

```
document.ready = function () {
    var thumbnails = document.getElementById("thumbnails");

    var imgs = thumbnails.getElementsByTagName("img");

    for( var i=0; i<imgs.length; i++ ) {
        imgs[i].onmouseover = function() {
            alert( this.id );
        }
    }
}; 
```

# android - 如何在 Google Map V2 的标记中偏移气球视图？

> ID：14878607
> 
> 赞同：6
> 
> 时间：2013-02-14T15:45:26.870
> 
> 标签：android, android-maps-v2

当我单击标记时，会出现一个气球。但是标记和气球之间的空间太大，那么我怎样才能减少这个距离呢？这就像`setBalloonBottomOffset`使用`V1 Google Map`.

我`custom balloon`的是这个类：

```
public class CustomInfoWindowAdapter implements InfoWindowAdapter {

    private final View mWindow;
    private final View mContents;

    public CustomInfoWindowAdapter(Activity activity) {
        LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        mWindow = inflater.inflate(R.layout.ballon, null);
        mContents = inflater.inflate(R.layout.ballon, null);
    }

    @Override
    public View getInfoWindow(Marker marker) {
        render(marker, mWindow);
        return mWindow;
    }

    @Override
    public View getInfoContents(Marker marker) {
        render(marker, mContents);
        return mContents;
    }

    private void render(Marker marker, View view) {
        String title = marker.getTitle();
        TextView titleUi = ((TextView) view.findViewById(R.id.txtTitle));
        if (title != null) {
            titleUi.setText(title);
        } else {
            titleUi.setText("");
        }

        String snippet = marker.getSnippet();
        TextView snippetUi = ((TextView) view.findViewById(R.id.txtPlace));
        if (snippet != null) {
            snippetUi.setText(snippet);
        } else {
            snippetUi.setText("");
        }
    }
} 
```

我显示一个标记

```
marker.showInfoWindow(); 
```

我的气球 xml 是

```
<RelativeLayout
    android:layout_width="250dp"
    android:layout_height="75dp"
    android:background="@drawable/ballon" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/txtTitle"
                style="@style/Ballon_Title"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ellipsize="end"
                android:paddingLeft="15dp"
                android:paddingRight="50dp"
                android:paddingTop="10dp"
                android:singleLine="true"
                android:text="Con mis amigos amigos" />

            <TextView
                android:id="@+id/txtPlace"
                style="@style/Ballon_Place"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ellipsize="end"
                android:paddingBottom="20dp"
                android:paddingLeft="15dp"
                android:paddingRight="50dp"
                android:singleLine="true"
                android:text="Puerta del sol" />
        </LinearLayout>
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </RelativeLayout>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:paddingRight="12dp"
        android:paddingTop="18dp"
        android:src="@drawable/icon_arrow" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:40:13.663

默认情况下，地图标记“锚定”在布局底部的中间（即锚点（0.5,1））。

您可以在创建标记时使用[MarkerOptions.anchor](http://developer.android.com/reference/com/google/android/gms/maps/model/MarkerOptions.html#anchor%28float,%20float%29)更改锚点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:15:43.867

您是否尝试过为整个气球布局使用负下边距？像这样：

```
<RelativeLayout
    android:layout_width="250dp"
    android:layout_height="75dp"
    android:background="@drawable/ballon"

    android:layout_marginBottom="-8dp" > 
```

可能不会起作用或导致内容在底部被切断，但作为最简单的方法仍然值得尝试。也许还有另一种欺骗`GoogleMap`类的方法，但很难弄清楚没有 API 的源代码。

*另一个提示*：您可能不需要您的`getInfoContents()`方法 - 只需返回`null`那里即可。`null`仅当您从`getInfoWindow()`（[参见此处](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.InfoWindowAdapter#getInfoContents%28com.google.android.gms.maps.model.Marker%29)）返回时才会调用此方法- 将您的内容视图合并到默认信息窗口中，这显然不是您的目标，因为您想四处移动气球。因此，您也可以丢弃`mContents`，它完全是多余的，只是占用内存以获取永远不会被使用的膨胀视图层次结构的另一个副本。

告诉我保证金是否适合你。我们可能还可以尝试`((View)mWindow.getParent())`在显示项目时稍后使用类似的东西，但这会更棘手，所以我建议先尝试边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-09T09:37:00.563

这是一个老问题，当前的 API 有一个[MarkerOptions.infoWindowAnchor](https://developers.google.com/android/reference/com/google/android/gms/maps/model/MarkerOptions#public-markeroptions-infowindowanchor-float-u,-float-v)方法可能会有所帮助。

# qt - Qt 中的可视化表单继承

> ID：14878610
> 
> 赞同：2
> 
> 时间：2013-02-14T15:45:38.617
> 
> 标签：qt, qt-creator

我是Qt的新手。我来自德尔福 IDE。我找不到从表单继承的解决方案。例如：在 Delphi 项目中，我有自己的`TBaseForm`类，其中包含使用设计器（`.dfm`-file，类似于`.ui`Qt）创建的控件。创建新表单时，我可以从项目中选择表单，然后新表单具有基本表单中的所有控件。此外，更改基本形式的控件会实时影响所有后代。我可以在 Qt Creator 中做类似的事情吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T11:46:51.700

您可以手动执行您所说的操作。

例如：

1.  添加继承自`QWidget`（命名它`BaseForm`）的新表单类。
2.  添加继承自`QWidget`（命名它`ChildForm`）的新表单类。
3.  在`childform.h/cpp`手动将继承从 更改`QWidget`为`BaseForm`。

在设计时，当您更改父级时，您无法看到子级的更改。但是，当执行它时，你会看到它。

# wpf - 如何使一般 wpf mvvm 窗口打开/关闭事件处理程序？

> ID：14878614
> 
> 赞同：1
> 
> 时间：2013-02-14T15:45:40.080
> 
> 标签：wpf, mvvm, event-handling

这是我当前的 App.xaml.cs

对于一两个人来说，它看起来很简单，但我有 7-8 个窗口。有没有一种聪明的方法可以让它变得更普通和更好？

```
public App()
{
    _ViewModel = new MyAppViewModel();

    _ViewModel.OpenXXXWindowEvent += new EventHandler(ViewModel_OpenXXXWindow);
    _ViewModel.OpenYYYWindowEvent += new EventHandler(ViewModel_OpenYYYWindow);
    ...
}

private void ViewModel_OpenXXXWindow(object sender, EventArgs e)
{
    _XXXWindow = new XXXWindow();
    _XXXWindow.DataContext = _ViewModel;
    _XXXWindow.ShowDialog();
}

private void ViewModel_CloseXXXWindow(object sender, EventArgs e)
{
    if (_XXXWindow != null)
        _XXXWindow.Close();
}

private void ViewModel_OpenYYYWindow(object sender, EventArgs e)
{
    _YYYWindow = new YYYWindow();
    _YYYWindow.DataContext = _ViewModel;
    _YYYWindow.ShowDialog();
}

private void ViewModel_CloseYYYWindow(object sender, EventArgs e)
{
    if (_YYYWindow != null)
        _YYYWindow.Close();
}

... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:00:49.070

太多的 XAML 代码隐藏表明您正在以某种方式破坏 MVVM 模式。接收 EventArgs 的 ViewModel 也是禁忌。

要打开/关闭对话框，我倾向于使用消息传递系统，例如[MVVM Light](http://mvvmlight.codeplex.com/)提供的那个。

使用消息传递系统（使用 MVVM Light），您可以执行以下操作：

在您的视图模型中：

```
private void SomeMethodThatNeedsToOpenADialog()
{
    Messenger.Default.Send(new OpenDialogXMessage());
} 
```

在你看来：

```
Messenger.Default.Register<OpenDialogXMessage>(this, (msg) => {

    new DialogX().ShowDialog();
}); 
```

一些相关链接：

*   [如何使用 MVVM Light Toolkit 打开一个新窗口](https://stackoverflow.com/questions/3386349/how-to-open-a-new-window-using-mvvm-light-toolkit)
*   [使用 MVVM Light 工具包显示对话框](https://stackoverflow.com/questions/5644459/show-dialog-with-mvvm-light-toolkit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:09:18.637

好吧，它不是事件处理程序解决方案，但是`Binding`解决方案怎么样？不幸的是，当设置值时，您不能 bind `Window.DialogResult`，这会导致窗口关闭。但是您可以创建一个`AttachedProperty`可以绑定到底层属性的对象`ViewModel`，并在设置其值时设置不可绑定的属性。`AttachedProperty`外观是这样的。

```
 public class AttachedProperties
    {
        public static readonly DependencyProperty DialogResultProperty =
            DependencyProperty.RegisterAttached("DialogResult", typeof (bool?), typeof (AttachedProperties), new PropertyMetadata(default(bool?), OnDialogResultChanged));

        private static void OnDialogResultChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var wnd = d as Window;
            if (wnd == null)
                return;

            wnd.DialogResult = (bool?) e.NewValue; //here the not bindable property is set and the windows is closed
        }

        public static bool? GetDialogResult(DependencyObject dp)
        {
            if (dp == null) throw new ArgumentNullException("dp");

            return (bool?)dp.GetValue(DialogResultProperty);
        }

        public static void SetDialogResult(DependencyObject dp, object value)
        {
            if (dp == null) throw new ArgumentNullException("dp");

            dp.SetValue(DialogResultProperty, value);
        }
    } 
```

`AttachedProperty`可以这样使用

```
 <Window x:Class="AC.Frontend.Controls.DialogControl.Dialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:hlp="clr-namespace:AC.Frontend.Helper"
        hlp:AttachedProperties.DialogResult="{Binding DialogResult}">
  <!-- put your content here -->
</Window> 
```

现在您可以使用 a`Command`来设置`DialogResult`VM 的属性，`DataContext`即`Window`.

# java - Web服务，WSDL地址中的动态地址

> ID：14878620
> 
> 赞同：6
> 
> 时间：2013-02-14T15:45:58.150
> 
> 标签：java, web-services, wsdl

我对网络服务很陌生，如果我写了很多错误的东西，我很抱歉......

我创建了几个 java 类并生成了 wsdl，所以我有一个自下而上的 Web 服务。我部署了所有东西（在 EAR 中）并调用了

```
 http://localhost:7159/chc2/services/WebServiceManager 
```

调用 Web 服务。它有效，我得到了结果。

问题是我需要将应用程序部署在其他服务器上，显然url的第一部分，本地ip不会相同。

该 url 由我在 WSDL 中声明：

```
<wsdlsoap:address location="http://localhost:7159/chc2/services/WebServiceManager"/> 
```

我的问题是：有没有办法在 .wsdl 中以动态方式获取链接的 ip 部分？我在网上找到了一些在 Java 中执行此操作的方法，但我直接调用 .wsdl，而不是通过 java...我想是否有办法在 .wsdl 中执行此操作。

我拥有的其他配置文件是 server-config.wsdd 和 web.xml。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T11:49:09.243

一些应用程序服务器将允许您提交包含具有虚拟地址位置的 WSDL 的 Web 服务：

```
<soap:address location="REPLACE_WITH_ACTUAL_URL"/> 
```

部署后，他们将用实际 URL 替换此值！[Glassfish](http://glassfish.java.net)肯定支持此功能（实际上，我认为您可以在地址位置值中放入任何您想要的内容，Glassfish 会自动替换它），根据[此链接](http://docs.jboss.org/jbossas/6/WebServices_Guide/en-US/html/chap_JBossWS-JAX-WSTools.html#JBossWS-JAX-WSTools_Client_Side)，[JBoss](http://www.jboss.org)也支持此“功能”。HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T03:24:29.857

据我了解，您的问题是：当您在其他服务器上部署网络服务时，您将如何调用网络服务？

您的服务器显然是节点/集群的一部分。在 Java EE 应用程序服务器上，例如在 WebSphere`plugin-config.xml`上，您可以配置传入/传出 http 端口。

IBM HTTP Web 服务器将通过`plugin-config.xml`. 这会将您的网络服务公开为 http://:port/webserviceURI。这是您将用来调用独立于应用程序服务器 IP 的 Web 服务的 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T08:35:10.883

使用放置在 [servler-name]-servlet.xml 中的 sws 标记通过 XSD 动态生成 wsdl

```
<sws:dynamic-wsdl
        id="getemployeeDetails"
        portTypeName="EmpService"
        locationUri="/empService"
        targetNamespace="http://www.example.org/">
        <sws:xsd location="/WEB-INF/employee.xsd"/>

    </sws:dynamic-wsdl> 
```

这样，当托管在服务器上时，您可以将 url 设为动态

问候

安舒尔

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-22T09:14:27.703

这是我们可以动态更改 wsdl 位置 url 的方式

```
import java.io.File;
import java.io.IOException;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.w3c.dom.NamedNodeMap;
import org.w3c.dom.Node;
import org.xml.sax.SAXException;

public class WsdlDynamicPath {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        try {
            changePath();
        } catch (ParserConfigurationException | SAXException | IOException | 
 TransformerException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public static void changePath() throws ParserConfigurationException, SAXException, IOException, TransformerException{
        String filepath = "path to wsdl\\demo.wsdl"; //Give your wsdl file path
        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(filepath);

        Node address= doc.getElementsByTagName("soap:address").item(0);

        NamedNodeMap attr = address.getAttributes();
        Node nodeAttr = attr.getNamedItem("location");
        nodeAttr.setTextContent("new path to wsdl");

        // write the content into xml file
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        DOMSource source = new DOMSource(doc);
        StreamResult result = new StreamResult(new File(filepath));
        transformer.transform(source, result);
    }

} 
```

# matlab - Matlab——处理对象

> ID：14878624
> 
> 赞同：2
> 
> 时间：2013-02-14T15:46:06.837
> 
> 标签：matlab, pass-by-reference, handle

有一个句柄类`Foo`：

```
classdef Foo < handle   
    properties (SetAccess = public, GetAccess = public)
        x
    end

    methods
        function obj = foo(x)
            % constructor
            obj.x = x;
        end 
    end       
end 
```

我创建了一个对象`Foo`：

```
data = [1 2];
foo = Foo(data);  % handle object 
```

我想创建一个*指向*. 这在 Matlab 中可能吗？例如，以下内容不起作用：`a``foo.x`

```
a = foo.x;       % here `a` equals [1 2], `a` is not a handle object  
foo.x = [3 4];   % set property `x` to [3 4];
disp(a);         % a still equals [1 2] 
                 % even though the property `foo.x` has changed
                 % I want `a` to change when `foo.x` is changed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:03:51.343

不，不幸的是，这在 Matlab 中是不可能的。引用只能指向作为从句柄继承的某些类的实例的对象（例如您的 class `Foo`）。即，这是可能的：

```
bar = foo
foo.x = [3 4]
disp(bar.x)      % would be [3 4] 
```

# unity3d - unity transform.lookAt

> ID：14878628
> 
> 赞同：2
> 
> 时间：2013-02-14T15:46:17.973
> 
> 标签：unity3d, unityscript

`transform.LookAt(target.position);`

我正在尝试使用此代码对敌人进行 AI 观察，但它看起来太高了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:58:26.510

多一点信息会很好。对象如何放置在层次结构中？是`target`父对象还是子对象？

什么`transform.LookAt`是指向`transform.forward`目标的位置。

你能试试`transform.LookAt(Vector3(target.transform.position.x, transform.position.y, target.transform.position.z);`吗？

如果这不起作用，您可以尝试添加`transform.Translate(Vector3.forward * Time.deltaTime);`吗？

使用最后一个代码，您可以看到对象向目标移动。这样你就可以确定它指向了正确的方向。也许你认为它看起来太高了，因为你的模型是错误的。

# redirect - nginx 重写规则以删除 - 和 _

> ID：14878635
> 
> 赞同：1
> 
> 时间：2013-02-14T15:46:34.407
> 
> 标签：redirect, url-rewriting, nginx, rewrite

我需要一个 nginx 重写规则来解决以下问题：

我的网址包含几个连字符并最终下划线

示例请求：[http ://www.example.com/cat/cat2/200-AB---a-12_12-123.312/cat-_-cat/cat/dog---I](http://www.example.com/cat/cat2/200-AB---a-12_12-123.312/cat-_-cat/cat/dog---I)

会给出 404 错误，因此需要 301- 重定向到：

[http://www.example.com/cat/cat2/200-AB-a-12-12-123.312/cat-cat/cat/dog-I](http://www.example.com/cat/cat2/200-AB-a-12-12-123.312/cat-cat/cat/dog-I)

所以所有的下划线都应该用连字符代替，并且一次应该只有一个连字符。

简短版本：将 --- 替换为 - 并将 _ 替换为 - 但通过将 _ 替换为 - 这 -_- 将变为 --- 并且必须再次调用规则一。

是否有可能在一个规则中做到这一点？如果不是如何以任何其他方式做到这一点:)我完全不知道如何用 nginx 做到这一点

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:01:56.530

```
% nginx -c $PWD/test.conf
% curl -I localhost:8080/cat/cat2/200-AB---a-12_12-123.312/cat-_-cat/cat/dog---I
HTTP/1.1 301 Moved Permanently
Server: nginx/1.3.13
Date: Wed, 20 Feb 2013 00:09:50 GMT
Content-Type: text/html
Content-Length: 185
Location: http://localhost:8080/cat/cat2/200-AB-a-1212-123.312/cat-cat/cat/dog-I
Connection: keep-alive

% cat test.conf
events { }

#error_log  logs/error.log debug;

http {
    server {
        listen 8080;
        location /cat/cat2/ {
            # replace up to 3 inconsecutive
            # uderscores per internal redirect
            rewrite "^(.+?)_+(?:(.+?)_+)?(?:(.+?)_+)?(.+)$" $1$2$3$4 last;

            # replace up to 3 inconsecutive multiple
            # hyphens per internal redirect
            rewrite "^(.+?-)-+(?:(.+?-)-+)?(?:(.+?-)-+)?(.+)$" $1$2$3$4 last;

            return 301 $uri;
        }
    }
} 
```

# javascript - Javascript验证用户输入

> ID：14878636
> 
> 赞同：1
> 
> 时间：2013-02-14T15:46:39.950
> 
> 标签：javascript, input, verify

我需要重大帮助，我已经使用此代码两天了。我有这张由 javascript 生成的表格，用于确认用户输入。如果用户看到错误，他们可以单击单元格，这样用户就可以在那里编辑内容。我正在尝试设置用户电子邮件有效或无效的显示位置。该脚本运行良好，但如果用户删除了完整的电子邮件，则内容不再可编辑，这样就不好了。到目前为止，我的代码是：

HTML：

```
<table id = 'confirm'>
  <tr>
    <th>Email</th>
    <td id = 'tdEmail'>
      <div onkeyup = 'verifyEmail(this.parentNode.id)' contentEditable>
        abc@123.com
        <div id = 'validInvalid'>
          <span class = 'dgreen'> //Use to create a sort of green for valid email, when the user first sees the confirm table, the email is valid.
            <br/>Valid email!
          </span>
        </div>
      </div>
    </td>
  </tr>
</table> 
```

JS：

```
function verifyEmail(id){
  var email = document.getElementById.firstChild.firstChild.nodeValue;
  var emailFilter = /^[^0-9][A-z0-9_]+([.][A-z0-9_]+)*[@][A-z0-9_]+([.][A-z0-9_]+)*[.][A-z]{2,4}$/;
  if(!emailFilter.test(email)){
    document.getElementById("validInvalid").innerHTML = "<span class = 'red'><br/>Not a valid email!</span>";
  }else{
    document.getElementById("validInvalid").innerHTML = "<span class = 'dgreen'><br/>Valid email!</span>";
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:59:33.627

`''`您的 div 宽度会减小，这就是为什么如果将内容设置为解决您的问题的一种方法是为您的 div 提供固定宽度，您将无法编辑内容。

你可以看到下面的修复： [jsfiddle](http://jsfiddle.net/jR4pX/1/)

# jquery - 如何在 jQuery 中选择时对 DOM 元素进行排序？

> ID：14878638
> 
> 赞同：22
> 
> 时间：2013-02-14T15:46:46.173
> 
> 标签：jquery, sorting

我的页面上有以下 DIV：

```
<div id="pi_div3">
  Div 3
</div>
<div id="pi_div2">
  Div 2
</div>
<div id="pi_div1">
  Div 1
</div>
<div id="pi_div6">
  Div 6
</div>
<div id="pi_div5">
  Div 5
</div>
<div id="pi_div4">
  Div 4
</div> 
```

我正在尝试使用 jQuery 代码选择 Div `$("div[id*=pi_div]")`。

当我在选择器上执行 each() 时，我需要根据它们的 ID 对 div 进行排序。当我遍历 DIV 时，顺序应该是：PI_DIV1、PI_DIV2、PI_DIV3、PI_DIV4、PI_DIV5、PI_DIV6。我怎么能在 jQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-14T15:53:02.827

您可以在调用[.each(](http://api.jquery.com/jQuery.each/) [)](http://mdn.beonex.com/en/Core_JavaScript_1.5_Reference/Global_Objects/Array/sort.html)之前调用.sort()

```
$("div[id*=pi_div]").sort(function(a,b){
    if(a.id < b.id) {
        return -1;
    } else {
        return 1;
    }
}).each(function() { console.log($(this).attr("id"));}); 
```

*编辑：我想知道为什么其他答案正在删除`pi_div`id 的一部分，我明白了。如果根据“字符串”进行比较，`pi_div10`就会出现在前面`pi_div2`。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-14T16:03:11.177

如果您还想在页面上对它们进行可见排序

```
$('div[id^="pi_div"]').sort(function (a, b) {
    var re = /[^\d]/g;
    return ~~a.id.replace(re, '') > ~~b.id.replace(re, '');
})
.appendTo("#container"); 
```

请注意`~~`将值转换为整数，否则它们将作为字符串进行比较。

见[http://jsfiddle.net/Xjc2T/](http://jsfiddle.net/Xjc2T/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-14T15:53:53.680

```
$("div[id^=pi_div]").sort(function (a, b) {
    return a.id.replace('pi_div', '') > b.id.replace('pi_div', '');
}).foo(); 
```

[http://jsfiddle.net/KrX7t/](http://jsfiddle.net/KrX7t/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T15:53:27.053

我会使用 Array.sort 方法。[http://jsfiddle.net/LJWrg/](http://jsfiddle.net/LJWrg/)

```
var divArr = $("div[id*=pi_div]");
function cleanId(id) {
    return parseInt(id.replace("pi_div",""),10);
}
Array.prototype.sort.call(divArr,function(a,b) {
    return cleanId(a.id) > cleanId(b.id);
});
divArr.each(function(){
    console.log(this.id);
}); 
```

jQuery 确实带有内部定义的此方法，因此您可以将其缩短为此（但是它使用未记录的方法）[http://jsfiddle.net/LJWrg/1/](http://jsfiddle.net/LJWrg/1/)：

```
var divArr = $("div[id*=pi_div]");
function cleanId(id) {
    return parseInt(id.replace("pi_div",""),10);
}
divArr.sort(function(a,b) {
    return cleanId(a.id) > cleanId(b.id);
});
divArr.each(function(){
    console.log(this.id);
}); 
```

# vbscript - VBS - 替换各种文件中的某些文本条目

> ID：14878639
> 
> 赞同：0
> 
> 时间：2013-02-14T15:47:11.663
> 
> 标签：vbscript, replace, qtp

我在 QTP 中为我的测试套件创建了一个模板，其中抽象级别（参数化）足够好。

我现在需要从现有模式中填充一个新的测试套件，从而用各种文件中的其他条目替换某些条目。

例如，我故意在脚本套件模式中放入的单词之一是 [Template]，因此我需要复制并粘贴具有不同名称的模板，将 [Template] 中的所有条目更改为新字符串等等。

任何代码都会受到赞赏，因为我的 VBScript 技能不是最佳的；）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:19:57.980

使用这个演示脚本：

```
Option Explicit

Dim gMap : Set gMap = Createobject("Scripting.Dictionary")

Function replGMap(sM, nPos, sSrc)
  replGMap = gMap(sM)
End Function

Dim reMap : Set reMap = New RegExp
reMap.Global = True
reMap.Pattern = "\[\w+\]"

gMap("[A]") = "abra"
gMap("[B]") = "cadabra"

WScript.Echo reMap.Replace("1[A]2[A]3[B]4[A]5", GetRef("replGMap")) 
```

输出：

```
abra2abra3cadabra4abra5 
```

作为要在 VBScript Docs 中查找的关键字列表。要在 .Replace 中使用函数，请参见[此处](http://msdn.microsoft.com/en-us/library/ms974619.aspx)。

FileSystemObject 提供了读取和写入文件的方法（Open/CreateTextFile、ReadAll、Write）。

# c# - 如何将 .aspx 页面转换为 pdf？不使用网站的网址

> ID：14878643
> 
> 赞同：0
> 
> 时间：2013-02-14T15:47:16.100
> 
> 标签：c#, asp.net

我需要从 .aspx 创建一个 pdf，但不使用 wkHtmlToPdf 或 iTextSharp，因为他们需要页面中的 url，它对我不起作用，因为我的网站有安全性，所以当我尝试打印它发送的网站时我到默认页面。

有人知道我该怎么做吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:29:28.917

我使用 EvoPdf，所以我的解决方案将与您的不同，但我在使用表单身份验证的应用程序（不幸的是 vb.net）中遇到了同样的问题。我的解决方案如下。关键部分是将 Pdf 库的 cookie 设置为经过身份验证的帐户的 cookie。

```
Private Sub uiPdf_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles uiPdf.Click

    Dim urlToConvert As String = "ExportPdf.aspx"

    '// get the html string for the report
    Dim htmlStringWriter As New System.IO.StringWriter()
    Server.Execute(urlToConvert, htmlStringWriter)
    Dim htmlCodeToConvert As String = htmlStringWriter.GetStringBuilder().ToString()
    htmlStringWriter.Close()

    '// Create the PDF converter. 
    Dim pdfConverter As New EvoPdf.HtmlToPdf.PdfConverter()

    '************
    'Add the cookie so we don't get bounced to the home page
    '************ 
    If Not Request.Cookies(System.Web.Security.FormsAuthentication.FormsCookieName) Is Nothing Then
        pdfConverter.HttpRequestCookies.Add(System.Web.Security.FormsAuthentication.FormsCookieName, Request.Cookies(System.Web.Security.FormsAuthentication.FormsCookieName).Value)
    End If

    '// set the license key - required
    pdfConverter.LicenseKey = ConfigurationManager.AppSettings("EvoPdfLicenseKey")

    '// set the converter options - optional
    '... code omitted

    '// be saved to a file or sent as a browser response
    Dim baseUrl As String = HttpContext.Current.Request.Url.AbsoluteUri
    Dim pdfBytes As Byte() = pdfConverter.GetPdfBytesFromHtmlString(htmlCodeToConvert, baseUrl)

    '// send the PDF document as a response to the browser for download
    Dim response As System.Web.HttpResponse = System.Web.HttpContext.Current.Response
    Response.Clear()
    Response.AddHeader("Content-Type", "application/pdf")
    response.AddHeader("Content-Disposition", String.Format("attachment; filename=GettingStarted.pdf; size={0}", pdfBytes.Length.ToString()))
    response.BinaryWrite(pdfBytes)
    response.End()

End Sub 
```

# c - PIC24FJ64GA002 中的可变 PWM 设置

> ID：14878652
> 
> 赞同：0
> 
> 时间：2013-02-14T15:47:48.877
> 
> 标签：c, embedded, pwm

我正在研究需要在 RGB LED 上显示不同颜色的项目。我正在使用 pwm 在 LED 上驱动不同的颜色。我的图片是 PIC24FJ64GA004，我现在正在使用它。这个项目的基本概念是使用开关来控制颜色。

RGB LED 上的颜色将根据一年中的日期和月份。为此，我使用 7 段 LED 开关来计算日期和月份。

目前的问题是以下代码。我正在尝试通过以下设置更改 PWM 值。但它没有改变它，而是给了我一些奇怪的东西。我需要你们的帮助。你能帮我解决这个问题吗？

```
 for( counter=0x0000;counter<=0x4571;counter++){ 
//*****Timer2 starting from here*****//
PR2                 = 0x4571;   // Initialize PR2 with 0x4571 = 17777 as PWM cycle
IFS0bits.T2IF       = 0;        // Clear Output Compare interrupt flag
IEC0bits.T2IE       = 1;        // Enable Output Compare interrupts
T2CONbits.TON       = 1;        // Start Timer2 with assumed settings
//**********************************//
//*****For RED LED OC1 choosed with timer 2*****//
OC1CONbits.OCM      = 0;        // Output compare channel is disabled
OC1R                = 0x0000 ; // Initialize Compare Register1 with 50% duty cycle
OC1RS               = counter;  // Initialize Secondary Compare Register1 with 50% duty cycle
OC1CONbits.OCSIDL   = 0;        // Output capture will continue to operate in CPU Idle mode
OC1CONbits.OCFLT    = 0;        // No PWM Fault condition has occurred (this bit is only used when OCM<2:0> = 111)
OC1CONbits.OCTSEL   = 0;        // Timer2 is the clock source for output Compare
OC1CONbits.OCM      = 0x6;      // PWM mode on OC, Fault pin disabled

//*****For Green Led OC2 and OC3 Choosed with timer2 as well*****//

OC2CONbits.OCM      = 0;        // Output compare channel is disabled
OC2R                =0x0000;        // Initialize Compare Register1 with 50% duty cycle
OC2RS               =counter;   // Initialize Secondary Compare Register1 with 50% duty cycle
OC2CONbits.OCSIDL   = 0;        // Output capture will continue to operate in CPU Idle mode
OC2CONbits.OCFLT    = 0;        // No PWM Fault condition has occurred (this bit is only used when OCM<2:0> = 111)
OC2CONbits.OCTSEL   = 0;        // Timer2 is the clock source for output Compare
OC2CONbits.OCM      = 0x6;      // PWM mode on OC, Fault pin disabled

//*****For  Blue Led OC2 and OC3 Choosed with timer2 as well*****//
OC3CONbits.OCM      = 0;        // Output compare channel is disabled
OC3R                = 0x0000;           // Initialize Compare Register1 with 50% duty cycle
OC3RS               = counter;  // Initialize Secondary Compare Register1 with 50% duty cycle
OC3CONbits.OCSIDL   = 0;        // Output capture will continue to operate in CPU Idle mode
OC3CONbits.OCFLT    = 0;        // No PWM Fault condition has occurred (this bit is only used when OCM<2:0> = 111)
OC3CONbits.OCTSEL   = 0;        // Timer2 is the clock source for output Compare
OC3CONbits.OCM      = 0x6;      // PWM mode on OC, Fault pin disabled

  } 
```

但是这段代码工作正常。我也输入了不同的值。它工作正常。

```
 //*****For RED LED OC1 choosed with timer 2*****//
OC1CONbits.OCM      = 0;        // Output compare channel is disabled
OC1R                = 0x22B8;   // Initialize Compare Register1 with 50% duty cycle
OC1RS               = 0x22B8;   // Initialize Secondary Compare Register1 with 50% duty cycle
OC1CONbits.OCSIDL   = 0;        // Output capture will continue to operate in CPU Idle mode
OC1CONbits.OCFLT    = 0;        // No PWM Fault condition has occurred (this bit is only used when OCM<2:0> = 111)
OC1CONbits.OCTSEL   = 0;        // Timer2 is the clock source for output Compare
OC1CONbits.OCM      = 0x6;      // PWM mode on OC, Fault pin disabled

//*****For Green Led OC2 and OC3 Choosed with timer2 as well*****//

OC2CONbits.OCM      = 0;        // Output compare channel is disabled
OC2R                =0x22B8;    // Initialize Compare Register1 with 50% duty cycle
OC2RS               =0x22B8;//0x22B8;   // Initialize Secondary Compare Register1 with 50% duty cycle
OC2CONbits.OCSIDL   = 0;        // Output capture will continue to operate in CPU Idle mode
OC2CONbits.OCFLT    = 0;        // No PWM Fault condition has occurred (this bit is only used when OCM<2:0> = 111)
OC2CONbits.OCTSEL   = 0;        // Timer2 is the clock source for output Compare
OC2CONbits.OCM      = 0x6;      // PWM mode on OC, Fault pin disabled

//*****For  Blue Led OC2 and OC3 Choosed with timer2 as well*****//
OC3CONbits.OCM      = 0;        // Output compare channel is disabled
OC3R                = 0x22B8;   // Initialize Compare Register1 with 50% duty cycle
OC3RS               = 0x22B8;   // Initialize Secondary Compare Register1 with 50% duty cycle
OC3CONbits.OCSIDL   = 0;        // Output capture will continue to operate in CPU Idle mode
OC3CONbits.OCFLT    = 0;        // No PWM Fault condition has occurred (this bit is only used when OCM<2:0> = 111)
OC3CONbits.OCTSEL   = 0;        // Timer2 is the clock source for output Compare
OC3CONbits.OCM      = 0x6;      // PWM mode on OC, Fault pin disabled

//*****Timer1 starting from here*****//
PR1                 = 65535;    // Initialize PR2 cycle
T1CONbits.TCKPS     = 2;        // Setting pre-scaler to 1/64
IFS0bits.T1IF       = 0;        // Clear Output Compare interrupt flag
IEC0bits.T1IE       = 1;        // Enable Output Compare interrupts
T1CONbits.TON       = 1;        // Start Timer1 with assumed settings
//*****Timer2 starting from here*****//
PR2                 = 0x4571;   // Initialize PR2 with 0x4571 = 17777 as PWM cycle
IFS0bits.T2IF       = 0;        // Clear Output Compare interrupt flag
IEC0bits.T2IE       = 1;        // Enable Output Compare interrupts
T2CONbits.TON       = 1;        // Start Timer2 with assumed settings
//**********************************// 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:06:52.557

您每次都在循环更新您的 PWM。

计数器不太可能有时间到期，因此您在它有机会“执行”一个 PWM 周期之前不断重置它。

在循环结束时，您需要等待（至少其中一个）PWM 过期。

另一种方法可能是在循环中设置您想要的*下一个*值，并在定时器到期时让中断服务例程将其复制到 PWM 寄存器。一旦发生这种情况，您就可以设置下一个下一个值 :) 您需要注意如何在主循环和 ISR 之间传输值，因为它们实际上是不同的“线程”上下文。

# php - base64_encode 行为奇怪

> ID：14878653
> 
> 赞同：0
> 
> 时间：2013-02-14T15:47:58.767
> 
> 标签：php, base64

我正在尝试对 XML 请求进行 base64_encode 和解码：

```
$xml = '<root>
    <term id="KEY">VAL</term>
    <term id="KEY2">VAL2</term>
    <term id="KEY3">VAL3</term>
</root>';
echo base64_encode( $xml );
echo base64_decode( $xml ); 
```

为什么这会在解码时返回这个奇怪的东西？

```
®Š-µêæ‰Ò„aPþ×«š×«š'J•½¿µêæµêæ‰Ò„cu@/íz¹¿®Š- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:48:46.310

您正在尝试解码 XML 的原始字符串，而不是 base64 编码的字符串。

```
$xml = '<root>
    <term id="KEY">VAL</term>
    <term id="KEY2">VAL2</term>
    <term id="KEY3">VAL3</term>
</root>';

$encoded_xml = base64_encode( $xml );

echo $encoded_xml;
echo base64_decode( $encoded_xml ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T15:49:11.717

您正在尝试解码原始 XML 字符串，而没有保存编码版本。

尝试

```
$xml = '...';
$encoded = base64_encode($xml);
$decoded = base64_decode($encoded);
                         ^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T15:50:02.573

这是因为您正在尝试对 XML 进行编码，而不是对实际编码的字符串进行编码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T15:48:42.403

因为你应该解码已经编码的东西，而`$xml`不是。

# jquery-ui - 使用 JQueryUI 一次打开多个工具提示

> ID：14878655
> 
> 赞同：2
> 
> 时间：2013-02-14T15:48:03.183
> 
> 标签：jquery-ui, jquery-ui-tooltip

我需要做类似的事情：

```
$(document).tooltip("open"); 
```

我需要这样做是因为我想在鼠标悬停时显示工具提示，而且还需要一个显示所有工具提示的复选框。

这甚至可能吗？

您可以在 jsFiddle 中查看我想要的内容：http: [//jsfiddle.net/3e5QP/](http://jsfiddle.net/3e5QP/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T17:53:52.150

它工作正常，但你的例子有一些问题。

首先，您的复选框的 id`#showAll`应该是 simple `showAll`。

其次，根据 jQuery API，[tooltip open 方法](http://api.jqueryui.com/tooltip/#method-open)只适用于非委托元素。

> 以编程方式打开工具提示。这仅适用于非委托工具提示。

因此，与其将工具提示绑定到文档，不如将它们绑定到您的锚点。

这是一个**[jsFiddle 示例](http://jsfiddle.net/3e5QP/1/)**，它在选中复选框时显示所有工具提示。

# c# - 社区服务器中的表单身份验证

> ID：14878656
> 
> 赞同：0
> 
> 时间：2013-02-14T15:47:59.560
> 
> 标签：c#, .net, forms-authentication, community-server

我在我的网站中遇到了表单身份验证问题。在用户未登录的那一刻，他们会被重定向到登录页面，这很好。但是，我希望未经授权的用户被重定向到新页面（welcome.aspx）。更改 web.config 后，我收到以下 HTTP 错误 500.19 - 内部服务器错误：

```
Cannot add duplicate collection entry of type 'add' with unique key attribute 'name' set to 'redirect' 
```

这是我的 web.config 的相关部分：

```
<authentication mode="Forms">
    <forms name=".CommunityServer" protection="All" timeout="60000" loginUrl="welcome.aspx" slidingExpiration="true" />
</authentication>

<location path="Default.aspx">
  <system.web>
    <authorization>
      <deny users="?" />
    </authorization>
  </system.web>
</location> 
```

如果我将 Visual Studio 设置为使用 Visual Studio 开发服务器而不是我的本地 IIS WebServer，则一切正常。此外，如果我将welcome.aspx 重命名为login.aspx 它工作正常。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:06:25.813

你有没有尝试过

```
<authentication mode="Forms">
    <clear />
    <forms name=".CommunityServer" protection="All" timeout="60000" loginUrl="welcome.aspx" slidingExpiration="true" />
</authentication> 
```

# c# - 解析 OLEDB var 类型 C#

> ID：14878657
> 
> 赞同：1
> 
> 时间：2013-02-14T15:48:00.950
> 
> 标签：c#, sql, parsing, variables, oledb

我正在开发一个从 OLESQL 服务器读取数据的应用程序。目前我只是在读取数据并将其插入到字符串中。每当我遇到 DBTYPE_WVARCHAR 时，我都会进行一些阅读，我可以使用 myReader.GetString(index)，但是发生这种情况时我会崩溃。这是我到目前为止的代码。

```
OleDbDataReader myReader = myCommand.ExecuteReader();

while (myReader.Read())
{
    int i =0;
    string FullRow = "";
    for(i=0;i<myReader.FieldCount;i++)
    {
         string type=myReader.GetDataTypeName(i);

         if ("DBTYPE_I4" == type)
         {
              FullRow += myReader.GetInt32(i);
         }
         else if ("Date" == type || "DBDate" == type || "DBTimeStamp" == type)
         {
              FullRow += myReader.GetDateTime(i).ToString();
         }
         else if("Char" == type || "LongVarChar" == type || "LongVarWChar" == type || "VarWChar" == type || "WChar" == type ){
              FullRow += myReader.GetString(i);
          }
         else if ("DBTYPE_WVARCHAR" == type)
          {
             FullRow += myReader.GetString(i); //Crash when this line gets hit
          }
          else
          {
                FullRow=FullRow;
          }
    }
    FullRow+=", ";
    Console.Write(FullRow);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:19:59.540

这是一个奇怪的问题，因为有一些使用的[示例](http://bytes.com/topic/net/answers/753281-how-access-one-value-excel-sheet-using-sql-statement-c)`GetString`，但是另一种选择是：

```
FullRow += myReader.IsDBNull(i) ? null : myReader.GetValue(i).ToString(); 
```

# regex - Powershell 匹配重复仅显示最后一次出现

> ID：14878659
> 
> 赞同：0
> 
> 时间：2013-02-14T15:48:29.790
> 
> 标签：regex, powershell, match

使用 Powershell 使用 -match 将字符串分解为模式我只看到模式的最后一次出现：

```
$a = "1 0 8 string a 8 string b 10 final string"
$a -match '^(\d+) (\d+) ((\d+) (\D+)){0,}'
$matches 
```

节目

```
True

Name   Value
----   -----
5      final string
4      10
3      10 final string
2      0
1      1
0      1 0 8 string a 8 string b 10 final string 
```

我怎样才能让它填充“8”、“字符串 a”、“8”、“字符串 b”等？？？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:56:25.450

你想要这个吗？

```
([regex]::Matches($a,'^(\d+) (\d+) ((\d+) (\D+)){0,}') | select -expa groups )[3] |
 select -expa captures | select -expa value | -split '(\d+)' | ? { $_ } | % { $_.trim() } 
```

或者

```
((([regex]::Matches($a,'^(\d+) (\d+) ((\d+) (\D+)){0,}') | select -expa groups )[3] | select -expa captures | select -expa value) -split '(\d+)' | ? { $_ } | % { $_.trim() } | 
% { "`"$_`""} ) -join ',' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:07:25.740

我相信您可以使用类似的东西`$matches.Group[3].Capture[0]`来获取该单个组匹配的所有文本。

我对 powershell 语法不是很熟悉，但这里是您需要的库的参考：http:
[//msdn.microsoft.com/en-us/library/30wbz966.aspx#CaptureCollection](http://msdn.microsoft.com/en-us/library/30wbz966.aspx#CaptureCollection)

# c# - C# - 将 WCF 用于本地网络客户端/服务器软件

> ID：14878660
> 
> 赞同：0
> 
> 时间：2013-02-14T15:48:35.507
> 
> 标签：c#, wcf, distributed-computing

我正在做这个项目，我有 7 台 PC 连接到交换机，其中一台是服务器。

客户端不会在彼此之间发送/接收数据，它们只会向服务器发送一些“字符/字符串”。此外，服务器将向客户端发送“字符/字符串”。另外，如果客户端连接正常，我需要知道服务器软件。

所以我读到使用 WCF 是执行此程序的最佳方式。另外，我想它可以`TcpClient`在 C# 中正常使用。

那么处理这种情况的最佳方法是什么？有什么好的教程或示例可以提供帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:56:54.883

WCF 是一个很好的解决方案，它为将来丰富的通信提供了一种简单的方法。您可以在任何 .net 项目（控制台应用程序、Web 项目、Windows 窗体或 wpf）中托管该服务。通过 Visual Studio 添加引用并使用代理是直接的，您不需要 TcpClient（实际上我认为它不会起作用）。

您的需求似乎很简单，所以我建议您看一下以下网络广播： [https](https://msevents.microsoft.com/CUI/EventDetail.aspx?EventID=1032344313&culture=en-US) ://msevents.microsoft.com/CUI/EventDetail.aspx?EventID=1032344313&culture=en-US 第一个绰绰有余.

# emacs - Aquamacs 网络模式

> ID：14878661
> 
> 赞同：0
> 
> 时间：2013-02-14T15:48:38.103
> 
> 标签：emacs, aquamacs, php-mode, html-mode

我正在 Aquamacs 中搜索一种用于 Web 编辑（HTML/JS/PHP、CSS 分别）的模式。早些时候在 Cocoa Emacs 中我一直在使用 web-mode.el，但在 Aquamacs 中我得到了

```
Symbol's function definition is void 
```

错误。怎么了？使用相同的 .emacs 配置 Cocoa Emacs 很好。

问题是我需要一种可以将这三种模式（对我来说最重要的是语法着色）组合在一起的模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:00:00.287

您确定您使用的是此处提供的最新版本吗？ [https://github.com/fxbois/web-mode](https://github.com/fxbois/web-mode)

# python - 为什么我得到分数幂的阳性结果？

> ID：14878664
> 
> 赞同：3
> 
> 时间：2013-02-14T15:48:53.727
> 
> 标签：python, python-2.7, sign

IDLE 的以下输出对我来说毫无意义。

```
>>> a=-1.0
>>> a**(1/3)
1.0
>>> a==-1.0
True
>>> -1.0**(1/3)
-1.0 
```

为什么两个理论上等效的语句返回不同的结果？Python（2.7）如何处理`__pow__`结果为双打的方法？我也只是用整数尝试了它并收到了相同的结果。除了计算`__pow__`函数输入的符号并将其复制到结果之外，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T15:50:56.510

这是一个运算符优先级问题：

```
>>> -1.0**(1/3)
-1.0
>>> (-1.0)**(1/3)
1.0 
```

另外，请注意，除非您从提供 Python 3.x 行为（和 a ）的 中`(1/3)`导入，否则该值为零。用于获得 1/3 作为浮点数。`division``__future__``ValueError``1/3.`

# python - 使用 Eclipse + PyDev 在 Linux 中进行 Python Gtk+ 开发，未解决的导入：Gtk

> ID：14878665
> 
> 赞同：1
> 
> 时间：2013-02-14T15:48:51.993
> 
> 标签：python, linux, eclipse, gtk, pydev

我刚刚尝试使用 Eclipse + PyDev 在 linux mint 中使用 python 编写我的第一个 Gtk+ 程序，但是我在 PyDev 中遇到了这个错误，未解决的导入：Gtk

程序源代码： http: [//python-gtk-3-tutorial.readthedocs.org/en/latest/introduction.html](http://python-gtk-3-tutorial.readthedocs.org/en/latest/introduction.html)

```
from gi.repository import Gtk

win = Gtk.Window()
win.connect("delete-event", Gtk.main_quit)
win.show_all()
Gtk.main() 
```

错误如下图：

![在此处输入图像描述](../Images/ac8578b80ddc7c2712e7bd0f8948ba51.png)

程序可以运行。我在 PyDev 中检查了 PYTHONPATH，我认为是对的。 ![在此处输入图像描述](../Images/3bed53f8f30a9548f1b2eba76494f268.png)

我该如何解决这个问题？

顺便说一句，你能提供一些关于在 Linux 中用于 Python 和 Gtk+ 开发的免费 IDE 的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-31T14:16:01.350

转到**Window->Preferences**并将“gi”添加到“Forced Builtins”（见截图）。
你应该试试[**Glade 的 GTK3**](https://glade.gnome.org/) gui 设计（见截图）。
查看最终结果截图。
你也可以使用[**Sublime Text 3**](http://www.sublimetext.com/3)。

![在此处输入图像描述](../Images/d5e599108e83ecac8660cf0f31973070.png)

![在此处输入图像描述](../Images/6539cdb3ad599e312c217e1d95006640.png)

![在此处输入图像描述](../Images/a12217d2333b63eae84829a9097ab617.png)

![在此处输入图像描述](../Images/6fcd50b4151e3799d0eb744895a305d9.png) ![在此处输入图像描述](../Images/c3c06ff90c94d1f78b6da04c5ee61829.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T01:49:09.713

同样的问题：[https ://stackoverflow.com/a/11418828/1040891](https://stackoverflow.com/a/11418828/1040891)

> 在 Gtk+ 3 中，Python 对二进制模块的绑定是使用 *.typelib 数据库动态生成的。用于访问所有模块的动态导入器位于 gi.repository。PyCharm 无法使用其代码洞察力检测这些模块，因为它们需要特殊处理。

注意：[IPython](http://pydev.org/manual_adv_interactive_console.html)可以检测和处理这些模块

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-21T02:16:00.960

您必须使用 Python 3.x。

Eclipse->Windows->Preferences->PyDev->Python Interpreter*->Advanced Auto-Config->/usr/share/python3.3**->Ok->Apply->Ok

*如果使用 Python，而不是 Jython 或 IronPython

**如果安装了 Python 3.3，否则尝试 python3，但我没有测试过。

# android - 在android中动态设置表格布局中的图像视图

> ID：14878666
> 
> 赞同：0
> 
> 时间：2013-02-14T15:49:07.200
> 
> 标签：android, imageview, android-tablelayout, tablerow

在我的应用程序中，我在表格布局的表格行中动态设置 imageview textview。但我无法设置 imageview。我试过了。它的 olny 显示 textview 而不是 imageview。我如何设置图像视图。请帮我。下面是代码-

```
 Bitmap b=ThumbnailUtils.extractThumbnail(BitmapFactory.decodeFile((file.getPath()+".jpeg")), 50,50);

            im=new ImageView(this);
            im.setImageBitmap(b);
            im.setLayoutParams(new LayoutParams(50,50));

            nameoffile=new TextView(this);
            nameoffile.setText(myfile);
            nameoffile.setWidth(200);

            sizeoffile=new TextView(this);
            sizeoffile.setText(size+"KB");
            sizeoffile.setWidth(100);

            tr=new TableRow(this);
            tr.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            tr.addView(im);
            tr.addView(nameoffile);
            tr.addView(sizeoffile);
            tl.addView(tr,new TableLayout.LayoutParams(
                    LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:25:56.090

尝试

```
im.setImageResource(b); 
```

代替

```
im.setImageBitmap(b); 
```

# qt - Qt 不加载 JPG，只加载 PNG

> ID：14878670
> 
> 赞同：5
> 
> 时间：2013-02-14T15:49:22.340
> 
> 标签：qt, png, jpeg, qimage

我和我的同事一起在 Windows 7 64 位版本 Visual Studio 2008 上进行同一个项目。

他们加载JPG并且他们工作。通过 QPixmap 和样式表。并且有效。但对我来说，我只能使用 PNG，其余的根本不起作用。

我还尝试更改环境变量的路径，但我只看到一个 Qt 路径（bin）。我猜没有关于插件的内容......正如我在文档中所读到的：

"默认情况下，Qt 可以读取以下格式： 格式说明 BMP Windows 位图 GIF 图形交换格式（可选） JPG 联合图像专家组 JPEG 联合图像专家组 MNG 多图像网络图形 PNG 便携式网络图形 PBM 便携式位图 PGM 便携式灰度图 ( ...）”

我想知道“可选”是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T10:41:28.223

您的可执行文件缺少 jpg 插件。可选意味着，如果您的可执行文件找不到插件（dll），它将启动，但不会加载这些图像格式。很多 qt 特性也是如此（fe: slqdrivers）

您将在 C:\Qt\4.8.4\plugins 中找到文件夹“imageformats”（替换您的安装目录和版本），将其复制到您的可执行路径，它将显示 jpgs。

可能您同事的一些环境变量与您的有些不同。

注意 Qt 插件和应用程序的分发。

# android - Android：震动检测器过于敏感

> ID：14878672
> 
> 赞同：15
> 
> 时间：2013-02-14T15:49:29.143
> 
> 标签：android, android-sensors

我正在尝试检测震动 - 我正在使用以下代码，它工作得非常好，但在某些设备（例如 Galaxy Note 2）中它检测到震动过早（在某些情况下 - 当我只是拿着电话还在）

主.java：

```
ShakeListener mShaker = new ShakeListener(this);
     mShaker.setOnShakeListener(new ShakeListener.OnShakeListener () {
         public void onShake()
         {
        // Some code...
         }
     });
} 
```

ShakeListener.java：

```
package com.my.app;

import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.widget.Toast;
import android.content.Context;
import java.lang.UnsupportedOperationException;

public class ShakeListener implements SensorEventListener
{
      private static final int FORCE_THRESHOLD = 700;
      private static final int TIME_THRESHOLD = 100;
      private static final int SHAKE_TIMEOUT = 500;
      private static final int SHAKE_DURATION = 1000;
      private static final int SHAKE_COUNT = 5;

      private SensorManager mSensorMgr;
      private float mLastX=-1.0f, mLastY=-1.0f, mLastZ=-1.0f;
      private long mLastTime;
      private OnShakeListener mShakeListener;
      private Context mContext;
      private int mShakeCount = 0;
      private long mLastShake;
      private long mLastForce;

      public interface OnShakeListener
      {
        public void onShake();
      }

      public ShakeListener(Context context)
      {
        mContext = context;
        resume();
      }

      public void setOnShakeListener(OnShakeListener listener)
      {
        mShakeListener = listener;
      }

      public void resume() {
        mSensorMgr = (SensorManager)mContext.getSystemService(Context.SENSOR_SERVICE);
        if (mSensorMgr == null) {
          throw new UnsupportedOperationException("Sensors not supported");
        }
        boolean supported = false;
        try {
        supported = mSensorMgr.registerListener(this, mSensorMgr.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_GAME);
        } catch (Exception e) {Toast.makeText(mContext, "Shaking not supported", Toast.LENGTH_LONG).show();}

        if ((!supported)&&(mSensorMgr != null)) mSensorMgr.unregisterListener(this);
      }

      public void pause() {
        if (mSensorMgr != null) {
          mSensorMgr.unregisterListener(this);
          mSensorMgr = null;
        }
      }

      public void onAccuracyChanged(Sensor sensor, int accuracy) { }

      public void onSensorChanged(SensorEvent event)
      {
        if (event.sensor.getType() != Sensor.TYPE_ACCELEROMETER)
              return;
        long now = System.currentTimeMillis();

        if ((now - mLastForce) > SHAKE_TIMEOUT) {
          mShakeCount = 0;
        }

        if ((now - mLastTime) > TIME_THRESHOLD) {
          long diff = now - mLastTime;
          float speed = Math.abs(event.values[0] + event.values[1] + event.values[2] - mLastX - mLastY - mLastZ) / diff * 10000;
          if (speed > FORCE_THRESHOLD) {
            if ((++mShakeCount >= SHAKE_COUNT) && (now - mLastShake > SHAKE_DURATION)) {
              mLastShake = now;
              mShakeCount = 0;
              if (mShakeListener != null) {
                mShakeListener.onShake();
              }
            }
            mLastForce = now;
          }
          mLastTime = now;
          mLastX = event.values[0];
          mLastY = event.values[1];
          mLastZ = event.values[2];
        }
      }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T06:49:26.220

使用更高的抖动次数检查加速度。看看这个对我有用的代码。

```
private final SensorEventListener mSensorListener = new SensorEventListener() {

        public void onSensorChanged(SensorEvent se) {
            float x = se.values[0];
            float y = se.values[1];
            float z = se.values[2];
            mAccelLast = mAccelCurrent;
            mAccelCurrent = (float) Math.sqrt((double) (x * x + y * y + z * z));
            float delta = mAccelCurrent - mAccelLast;
            mAccel = mAccel * 0.9f + delta; // perform low-cut filter

            if (mAccel > 8) {
                 Toast.makeText(getApplicationContext(),
             "You have shaken your phone", Toast.LENGTH_SHORT).show();
            }

        }

        public void onAccuracyChanged(Sensor sensor, int accuracy) {
            Log.i("Sensor", "mAccel" + mAccel);
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:43:55.113

试试这个……然后告诉我……

```
public class ShakeListener implements SensorEventListener {
    private String TAG = ShakeListener.class.getSimpleName();
    private static final int FORCE_THRESHOLD = 800;
    private static final int TIME_THRESHOLD = 100;
    private static final int SHAKE_TIMEOUT = 500;
    private static final int SHAKE_DURATION = 1000;
    private static final int SHAKE_COUNT = 5;

    private SensorManager mSensorMgr;
    private float mLastX = -1.0f, mLastY = -1.0f, mLastZ = -1.0f;
    private long mLastTime;
    private OnShakeListener mShakeListener;
    private Context mContext;
    private int mShakeCount = 0;
    private long mLastShake;
    private long mLastForce;

    public interface OnShakeListener {
        public void onShake();
    }

    public ShakeListener(Context context) {

        Log.d(TAG,"ShakeListener invoked---->");
        mContext = context;
        resume();
    }

    public void setOnShakeListener(OnShakeListener listener) {
        Log.d(TAG,"ShakeListener setOnShakeListener invoked---->");
        mShakeListener = listener;
    }

    public void resume() {
        mSensorMgr = (SensorManager) mContext
                .getSystemService(Context.SENSOR_SERVICE);
        if (mSensorMgr == null) {
            throw new UnsupportedOperationException("Sensors not supported");
        }
        boolean supported = false;
        try {
            supported = mSensorMgr.registerListener(this,
                    mSensorMgr.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                    SensorManager.SENSOR_DELAY_GAME);
        } catch (Exception e) {
            Toast.makeText(mContext, "Shaking not supported", Toast.LENGTH_LONG)
                    .show();
        }

        if ((!supported) && (mSensorMgr != null))
            mSensorMgr.unregisterListener(this);
    }

    public void pause() {
        if (mSensorMgr != null) {

            mSensorMgr.unregisterListener(this);
            mSensorMgr = null;
        }
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }

    public void onSensorChanged(SensorEvent event) {
        if (event.sensor.getType() != Sensor.TYPE_ACCELEROMETER)
            return;
        long now = System.currentTimeMillis();

        if ((now - mLastForce) > SHAKE_TIMEOUT) {
            mShakeCount = 0;
        }

        if ((now - mLastTime) > TIME_THRESHOLD) {
            long diff = now - mLastTime;
            float speed = Math.abs(event.values[SensorManager.DATA_X]
                    + event.values[SensorManager.DATA_Y]
                    + event.values[SensorManager.DATA_Z] - mLastX - mLastY
                    - mLastZ)
                    / diff * 10000;
            if (speed > FORCE_THRESHOLD) {
                if ((++mShakeCount >= SHAKE_COUNT)
                        && (now - mLastShake > SHAKE_DURATION)) {
                    mLastShake = now;
                    mShakeCount = 0;
                     Log.d(TAG,"ShakeListener mShakeListener---->"+mShakeListener);
                    if (mShakeListener != null) {
                        mShakeListener.onShake();
                    }
                }
                mLastForce = now;
            }
            mLastTime = now;
            mLastX = event.values[SensorManager.DATA_X];
            mLastY = event.values[SensorManager.DATA_Y];
            mLastZ = event.values[SensorManager.DATA_Z];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:08:45.743

从较低的灵敏度开始，但如果在某个初始阈值以上的抖动持续较长时间，则逐渐增加灵敏度。这类似于人类的感知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-04T22:02:54.777

**这对我很好：**

```
public class ShakeEventListener implements SensorEventListener {
public final static int SHAKE_LIMIT = 15;
public final static int LITTLE_SHAKE_LIMIT = 5;

private SensorManager mSensorManager;
private float mAccel = 0.00f;
private float mAccelCurrent = SensorManager.GRAVITY_EARTH;
private float mAccelLast = SensorManager.GRAVITY_EARTH;

private ShakeListener listener;

public interface ShakeListener {
    public void onShake();
    public void onLittleShake();
}

public ShakeEventListener(ShakeListener l) {
    Activity a = (Activity) l;
    mSensorManager = (SensorManager) a.getSystemService(Context.SENSOR_SERVICE);
    listener = l;
    registerListener();
}

public ShakeEventListener(Activity a, ShakeListener l) {
    mSensorManager = (SensorManager) a.getSystemService(Context.SENSOR_SERVICE);
    listener = l;
    registerListener();
}

public void registerListener() {
    mSensorManager.registerListener(this, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
}

public void unregisterListener() {
    mSensorManager.unregisterListener(this);
}

public void onSensorChanged(SensorEvent se) {
    float x = se.values[0];
    float y = se.values[1];
    float z = se.values[2];
    mAccelLast = mAccelCurrent;
    mAccelCurrent = (float) FloatMath.sqrt(x*x + y*y + z*z);
    float delta = mAccelCurrent - mAccelLast;
    mAccel = mAccel * 0.9f + delta;
    if(mAccel > SHAKE_LIMIT)
        listener.onShake();
    else if(mAccel > LITTLE_SHAKE_LIMIT)
        listener.onLittleShake();
}

public void onAccuracyChanged(Sensor sensor, int accuracy) {}
} 
```

[参考](https://github.com/ImaginationForPeople/android/blob/master/src/org/imaginationforpeople/android2/shake/ShakeEventListener.java)

# c# - 构建找不到实体框架

> ID：14878675
> 
> 赞同：5
> 
> 时间：2013-02-14T15:49:34.633
> 
> 标签：c#, build

当我在 TFS 中构建项目时，它找不到实体框架，但是当我查看文件夹时，它就在那里；

我收到这些错误消息；

```
Build started 14/02/2013 15:44:50.
Project "C:\Builds\1\SCD\SCD - New Test\Sources\MVC\SCD\SCD.sln" on node 1 (default targets).
ValidateSolutionConfiguration:
  Building solution configuration "Debug|Any CPU".
Project "C:\Builds\1\SCD\SCD - New Test\Sources\MVC\SCD\SCD.sln" (1) is building "C:\Builds\1\SCD\SCD - New Test\Sources\MVC\SCD\SCD\SCD.csproj" (2) on node 1 (default targets).
EntityDeployNonEmbeddedResources:
Skipping target "EntityDeployNonEmbeddedResources" because it has no outputs.
EntityDeployEmbeddedResources:
  Processing 1 EDMX files.
  Starting to process input file 'Models\SCD.edmx'.
  Finished processing input file 'Models\SCD.edmx'.
  Finished processing 1 EDMX files.
Project "C:\Builds\1\SCD\SCD - New Test\Sources\MVC\SCD\SCD\SCD.csproj" (2) is building "C:\Builds\1\SCD\SCD - New Test\Sources\StandardClassLibrary\StandardClassLibrary\StandardClassLibrary.csproj" (3) on node 1 (default targets).
PrepareForBuild:
  Creating directory "obj\Debug\".
ResolveAssemblyReferences:
  Primary reference "EntityFramework".
c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1360,9): warning MSB3245: Could not resolve this reference. Could not locate the assembly "EntityFramework". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\Builds\1\SCD\SCD - New Test\Sources\StandardClassLibrary\StandardClassLibrary\StandardClassLibrary.csproj]
          For SearchPath "{HintPathFromItem}".
          Considered "..\packages\EntityFramework.5.0.0\lib\net40\EntityFramework.dll", but it didn't exist.
          For SearchPath "{TargetFrameworkDirectory}".
          Considered "C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\EntityFramework.dll", but it didn't exist.
          Considered "C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\EntityFramework.exe", but it didn't exist.
          For SearchPath "{Registry:Software\Microsoft\.NETFramework,v4.0,AssemblyFoldersEx}".
          Considered "C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies\v4.0\EntityFramework.dll", but it didn't exist. 
```

等等。我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:24:39.447

听起来您的构建服务器不会自动下载 NuGet 包。我假设您正在使用 NuGet，因为构建正在“包”文件夹中寻找依赖项。

我会查看以下一些文章：

[使用 Nuget 和 TFS 构建 2010](http://msmvps.com/blogs/rfennell/archive/2011/10/17/using-nuget-and-tfs-build-2010.aspx)

[NuGet 和 TFS 2010 自动生成](http://www.centrolutions.com/blog/post/2012/07/05/NuGet-and-TFS-2010-Automated-Build.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:56:44.557

检查您用于构建控制器的帐户的 NTFS 权限。要进行故障排除，请尝试使用构建控制器的帐户登录构建机器，看看是否可以找到这些路径并手动构建自己的构建。

# android - 为 Android 编写 AIR 原生扩展

> ID：14878677
> 
> 赞同：1
> 
> 时间：2013-02-14T15:49:40.513
> 
> 标签：android, air, air-native-extension

我正在编写一个本地扩展，需要从移动空中项目中设置地图、动态添加/删除标记、调整相机/缩放等。我创建了一个测试项目并构建了一个`FREFunctions`支持所需功能的文件。但是，目前尚不清楚我从这里去哪里。以下是我的问题：

1.  `FREFunction`我应该为每个类创建一个 Android Activity ，还是每个类`FREFunction`也都是一个 Activity？

2.  我需要在 Android (manifestAdditions) 下的 AIR 项目的应用程序描述符中定义所有活动、服务等，还是只在 Android 项目的清单文件中定义它们？

3.  我在第一个/启动器活动中创建了一个地图，并成功调用它。但是，由于权限问题，我无法调用任何后续活动。这让我觉得我可能做错了。我是否应该在地图周围创建一个包装服务，并从我的服务中调用该服务`FREFunctions`，而不是尝试设置多个活动？所以第一个活动将启动服务，然后从那时起，我将调用服务。那个更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T23:08:14.207

1.  FREFunction 类不应该是活动，它们是实现 FREFunction 接口的类。

2.  您需要系统了解的任何活动、接收器等都必须在清单文件中定义，但这并不意味着所有活动。通常您只需要定义当应用程序不在前台时系统可能启动的活动和接收器。您可以添加一个活动并让它从您的本机代码开始，而无需在清单中包含它。此外，您放入 Android 库项目清单文件中的任何内容都不会被使用。

3.  检查您是否已将正确的权限添加到清单添加中。是的，您最好从您的 FREFunction 开始一项活动，以处理您需要的所有功能。

希望有帮助

# maven - Jenkins - Maven 构建中的 JUnit 结果 XML

> ID：14878678
> 
> 赞同：0
> 
> 时间：2013-02-14T15:49:42.187
> 
> 标签：maven, junit, jenkins

我在 Jenkins 中为我的 Maven 项目构建了一个版本。作为构建过程的一部分，我们必须使用 Shell 脚本触发外部集成测试环境，它以 JUNIT 结果 XML 的形式返回测试结果。我想知道，我们如何将结果插入到构建的测试结果中。在freestyle项目的构建中，有“发布JUnit测试结果报告”之类的步骤，在maven构建中有没有类似的方法？如果没有，我们如何在构建中使用这些 JUnit 结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T09:48:11.453

是的，可以添加更多 JUnit 测试结果。只需安装[xUnit 插件](https://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin)。这将添加一个构建后操作，您可以在其中配置自定义 JUnit 结果的路径。

# java - 在 Scene2d 中使用 TouchDown 事件移动 Actor

> ID：14878679
> 
> 赞同：2
> 
> 时间：2013-02-14T15:49:50.763
> 
> 标签：java, libgdx, scene2d

我正在寻找一种在被触摸时移动 Actor 的方法。我试过下面的代码。但是，相关的 Actor 缺乏支持 touchdown 事件，所以我得到了**NullPointerException**。

```
actor.addListener(new InputListener() {
    public boolean touchDown (InputEvent event, float x, float y, int pointer, int button)     {
        event.getRelatedActor().addAction(moveBy(0,10,0.5f));
            return true;
    }
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T17:32:35.410

您想用来[`getTarget()`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Event.html#getTarget%28%29)获取事件来源的 Actor。

该`getRelatedActor()`方法适用于涉及两个参与者的事件（如焦点更改或进入/退出事件）。这在文档中不是特别清楚，但是如果您查看[FocusEvent](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/utils/FocusListener.FocusEvent.html)文档，`getRelatedActor`您会看到它是如何在那里使用的。

# jquery - 多个 $.getJSON 请求在承诺中返回不同

> ID：14878681
> 
> 赞同：0
> 
> 时间：2013-02-14T15:49:59.857
> 
> 标签：jquery, jquery-deferred, promise

我有以下代码：

```
var aReq = $.getJSON('/path/A'),
    bReq = $.getJSON('/path/B');

$.when(aReq, bReq).then(function(A, B) {
  console.log(A, B);
  // logs: [Array[5], "success", Object], [Array[20], "success", Object]
}); 
```

为什么它被包裹在“jqXHR 数组”中？

用一个`$.getJSON`不会发生这种情况：

```
var aReq = $.getJSON('/path/A');
$.when(aReq).then(function(A) {
  console.log(A);
  // logs: [Object, Object, Object, Object, Object]
  // just like I wanted it in the first version
}); 
```

有没有办法实现第一个版本的工作？也许我理解承诺/延迟对象有问题。

FWIW：在这种情况下，我使用的是 jQuery 版本 1.7.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:57:48.967

这在 api 中有很好的记录作为预期的行为：[http ://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

如果它没有在数组中返回，考虑到每个传入的 Promise 可能返回多个参数，它如何为每个传入的 Promise 返回不同的结果？

从文档中：

> 如果将单个参数传递给 jQuery.when 并且它不是 Deferred 或 Promise，它将被视为已解决的 Deferred，并且任何附加的 doneCallbacks 都将立即执行。doneCallbacks 传递原始参数。在这种情况下，您可能设置的任何 failCallbacks 都不会被调用，因为 Deferred 永远不会被拒绝。
> 
> 在将多个 Deferred 对象传递给 jQuery.when 的情况下，该方法从一个新的“主” Deferred 对象返回 Promise，该对象跟踪它已传递的所有 Deferred 的聚合状态。该方法将在所有 Deferred 解析后立即解析其主 Deferred，或者在其中一个 Deferred 被拒绝时拒绝主 Deferred。如果主 Deferred 已解析，则将传递给 jQuery.when 的所有 Deferred 的解析值传递。例如，当 Deferred 是 jQuery.ajax() 请求时，参数将是请求的 jqXHR 对象，按照它们在参数列表中给出的顺序。

# twitter-bootstrap - 搜索表单在响应式 Twitter Bootstrap 网站中分解

> ID：14878683
> 
> 赞同：0
> 
> 时间：2013-02-14T15:50:07.883
> 
> 标签：twitter-bootstrap, responsive-design

我正在使用 Twitter Bootstrap 创建一个响应式网站。我喜欢框架工作，一切正常，除了标题中的搜索表单。它有点大，扩展了 7 个网格，当我将窗口设置为小于 ca 512 px 时，提交按钮突然滑到输入区域下方，这不是很整洁。我正在使用文档建议我应该使用的“form-horizo​​ntal”类。

这是表单部分的代码。非常感谢任何帮助！

```
<div class="row">
<div class="span7">

<form class="form-horizontal" id="searchfield" action="search.php" method="get">

 <input  name="address" placeholder="Write something..." type="text" class="span7 search-query field">
 <button type="submit" class="btn-primary">Search</button>

</form>

</div>

<div class="span4">
<a href="form1.php"><button type="submit" class="btn btn-large btn-inverse span4">Skapa    boende</button></a>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:52:52.680

bootstrap responsive 的作用是让网站“响应”用户的[viewport](http://en.wikipedia.org/wiki/Viewport)。这意味着如果视口的宽度低于给定点，布局就会改变。响应表定义`.span1-12`将不再浮动，低于该特定点。从而将一个置于另一个之下。

如果您不希望这种情况发生，您必须：删除响应表，或 b。做一些疯狂丑陋的变通办法。最后一个，是你不应该做的。虽然它可能会起作用，但它破坏功能的机会非常大。

不过，可能有一些值得一提的事情。有一个人（阿诺德丹尼尔斯）为引导程序创建了一些简洁的扩展，包括他称之为[“桌面行”的](http://jasny.github.com/bootstrap/scaffolding.html#row-desktop)东西。这只是一行，但响应式更改从平板电脑视口开始。这不是您想要的，但它表明您可以更改响应表。

# linux - 如何在bash中将一系列AT命令发送到串口？

> ID：14878684
> 
> 赞同：7
> 
> 时间：2013-02-14T15:50:09.057
> 
> 标签：linux, bash, serial-port, at-command

在 Linux 中，我需要向 eg 上的串行端口发送一系列 AT 命令`/dev/ttyS0`，它必须在发送下一个命令之前等待`OK`答案。我可以想象做类似的事情

```
echo 'AT' > /dev/ttyS0
echo 'ATS0=0' > dev/ttyS0
... 
```

但这不会评估该端口上设备的答案。

是否有一种*非常*简单的方法可以在 bash 脚本中**自动执行**此操作，可能借助`socat`和/或`microcom` **在最简单的 linux 系统上找不到的工具**。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T15:57:44.747

如果您安装了 PPP 软件包，您可以使用`chat`它附带的程序。或者你可以使用`kermit`. 或者`cu`uucp自带的程序。但是用纯 shell 来做这件事比较棘手。您也许可以使用 read 和 printf 函数，并将 stdio 重定向到端口。

一些片段：

```
stty -F /dev/ttyS0 38400 raw
chat -f script.txt < /dev/ttyS0 > /dev/ttyS0 
```

应该让你开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-15T22:04:22.717

这是在 bash 脚本中**自动执行此操作的一种***非常*简单的方法：

 **```
$ (echo AT; echo ATS0=0) | atinout - /dev/ttyS0 -
AT
OK
ATS0=0
OK
$ 
```

通过使用专门为此功能编写的[atinout](http://atinout.sourceforge.net/)程序作为其唯一目的。上面的输出是假设`ATE1`；没有 echo 来自调制解调器的响应将是`"\r\n\r\nOK\r\n\r\nOK\r\n"`。

在上面的示例中，atinout 将发送第一个命令`AT`（用 正确终止命令行`\r`），等到它收到最终结果代码（例如`OK`），然后首先继续处理下一个命令。

您可以通过指定文件而不是第一个来提供来自文件的输入`-`，如果要捕获输出，请提供文件名而不是最后一个`-`。如果你愿意，你可以在这里使用 doc 而不是分组的 echo 命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-12T03:08:52.927

要显示来自的消息：

```
echo -e "ATHO\r" > /dev/ttyACM0 
```

或任何其他调制解调器命令类型`who`以查找终端号，然后运行：

```
cat /dev/ttyACM0 >& /dev/pts/8 & 
```

然后来自 AT 命令的消息将显示在您的终端上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:52:32.047

你有一个错误：

```
cat 'AT' 
```

意味着我猜想*显示不存在的 AT 文件。*

相反，尝试这样做：

```
cat<<EOF>/dev/ttyS0
AT
ATS0=0

EOF 
```

使用[shell](/questions/tagged/shell "显示标记为“外壳”的问题") *here-doc*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-14T10:52:27.457

1.  去终端
2.  输入“sudo minicom -s”
3.  转到“串行端口设置”​​并设置串行端口设置
4.  输入“更改设置？”
5.  输入“将设置另存为 dfl”。dfl 表示默认
6.  输入“退出”
7.  在新打开的 minicom 终端上写入任何 at 命令。**

# php - 使用由 role_id 链接的同一数据库中两个不同表中的数据

> ID：14878690
> 
> 赞同：0
> 
> 时间：2013-02-14T15:50:18.217
> 
> 标签：php, mysql, database

我的数据库（MySQL）中有几个表，并且正在尝试链接数据。我不确定加入是我需要的，但我可能错了。这是我正在尝试做的事情：

我想根据 role_id 显示用户角色（管理员、所有者等）。这是我得到的两张表：

表：用户

```
fields: user_id | role_id | user_name |etc (other fields) 
```

表：用户角色

```
fields: role_id | role_name 
```

我希望根据 role_id 显示用户的角色（role_name）。它需要链接来自 user_roles 和 users 的数据，对吧？老实说，我不确定。因此，如果 role_id 是 1 并且 role_name 是所有者，我希望 role_name 是基于 users 表中的 role_id 显示的内容。如果这有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:54:14.073

```
SELECT * from users, user_role.rolename
WHERE users.id = ??
AND user_role.role_id = users.role_id; 
```

无需加盟！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T08:31:49.450

```
SELECT user_id, role_name, user_name, etc 
FROM users INNER JOIN user_roles USING(role_id)
WHERE <your conditions (if any)>; 
```

# android - Android上的无偏见渲染引擎？

> ID：14878692
> 
> 赞同：2
> 
> 时间：2013-02-14T15:50:22.947
> 
> 标签：android, rendering, render, renderer

是否有任何可以在 Android 上编译和运行的开源无偏见渲染引擎？

我不是在谈论游戏引擎或“3D OpenGl 引擎”，而是关于路径跟踪渲染器，例如 Yafaray、LuxRender、Sunflow 等……

我的 android 应用程序能够生成一组 3D 数据（代表几何体），我想使用上面提到的照片级渲染引擎来渲染它（当然这需要从我的应用程序中编写一个导出器到渲染引擎，但这不是问题。）

# r - 如何从相应的原始值中减去移动平均结果？

> ID：14878695
> 
> 赞同：1
> 
> 时间：2013-02-14T15:50:26.697
> 
> 标签：r, zoo, moving-average

下面给出的这条线将简单地计算窗口为 3 的某些值的移动平均值。由于值的总数为 12，移动平均窗口为 3，因此结果值的数量为 10（如下所示）。

```
library(zoo)
x <- c(1,2,3,NA,NA,4,6,5,6,4,2,5)
movingmean <- rollapply(x, 3, FUN = mean, na.rm = T)
movingmean
#  [1] 2.000000 2.500000 3.000000 4.000000 5.000000 5.000000
#  [7] 5.666667 5.000000 4.000000 3.666667 
```

我想`movingmean`从相应的原始值中减去这些平均值 ( )。

**示例：** `2-2.000000, 3-2.500000, NA-3.000000, NA-4.000000, ..., 2-3.666667`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:04:58.860

默认情况下，`rollapply`不使用 填充结果`NA`。设置`fill=NA`这样做。

```
movingmean <- rollapply(x, 3, FUN=mean, na.rm=TRUE, fill=NA)
x - movingmean
#  [1]         NA  0.0000000  0.5000000         NA         NA
#  [6] -1.0000000  1.0000000 -0.6666667  1.0000000  0.0000000
# [11] -1.6666667         NA 
```

另请注意，`rollapply`默认情况下使用居中窗口。如果需要右对齐计算（与大多数时间序列一样），您可以通过参数更改它`align`或使用。`rollapplyr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:53:59.490

您可以将平均函数更改为：

```
library(zoo)
x <- c(1,2,3,NA,NA,4,6,5,6,4,2,5)
> rollapply(x, 3, FUN = function(x) (x-mean(x))[2]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:05:02.810

这个怎么样？

```
x[seq_along(movingmean)+1] - movingmean

# [1]  0.0000000  0.5000000         NA         NA -1.0000000  1.0000000 
#        -0.6666667  1.0000000  0.0000000 -1.6666667 
```

# c# - 为什么结构中的这个值根本没有改变？

> ID：14878696
> 
> 赞同：5
> 
> 时间：2013-02-14T15:50:27.110
> 
> 标签：c#, interface

我相信这是一个非常简单的问题。谁能解释为什么这段代码输出 1000，而不是 1050

```
public class Program
    {
        public static void Main()
        {
            Bus b = new Bus(1000);
            ((Car)b).IncreaseVolume(50);
            Console.WriteLine(b.GetVolume());
        }
    }

    public interface Car
    {
        int GetVolume();
        void IncreaseVolume(int amount);
    }

    public struct Bus : Car
    {
        private int volume;

        public Bus(int volume)
        {
            this.volume = volume;
        }

        public int GetVolume()
        {
            return volume;
        }

        public void IncreaseVolume(int amount)
        {
            volume += amount;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T15:53:23.357

将值类型 ( `struct`) 转换为接口将值框起来。因此，您是在值的盒装副本上调用该方法，而不是在值本身上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:03:14.867

值类型 ( `struct`) 通过*值*传递，但接口被认为是*引用类型*（而不是值类型）。让我们来看看：

```
Bus b = new Bus(1000); 
```

现在`b`包含 a 的*值*，`Bus`其音量设置为 1000。

```
Car c = (Car)b; 
```

现在将 in 中的值`b`复制*并*制成 的引用类型（*装箱*）`Car`。现在`c`包含一个指向盒装副本的指针。

```
c.IncreaseVolume(50); 
```

在引用类型上，您调用`IncreaseVolume`，它是`Car`接口的成员。它接收对装箱值的引用。它需要一个指向框中值的托管指针（使其再次成为值类型）。

```
void Car.IncreaseVolume(int amount)
{
    ((Bus)this).IncreaseVolume(amount);
} 
```

现在您的方法将作用于框中的值：

```
public void IncreaseVolume(int amount)
{
    volume += amount;
} 
```

现在该方法返回。请注意，没有任何操作对 中的值起作用`b`，仅对它的副本起作用。所以下一条语句将打印`1000`：

```
Console.WriteLine(b.GetVolume()); 
```

就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T23:08:52.840

尽管有时值类型实现可变接口很有用，但必须非常小心地使用这些类型。C# 假装所有值类型都是对象的事实在这方面有点无益（实际上，它们是*可转换*为的东西`Object`），因为这意味着没有办法让编译器警告不正确的使用。

除了完全忽略接口的选项之外，通常需要使用变异接口类型的代码必须做以下两件事之一：

1.  将结构的实例转换为接口类型，并且永远不要再将其转换为接口类型、“Object”或“ValueType”以外的任何内容。特别是，永远不要将它转换回它自己的类型。请注意，不同接口或引用类型之间的转换很好，只要实例永远不会转换回它自己的类型。这是 `List.Enumerator` 之类的最常见的模式，它经常被强制转换为 `IEnumerator` 而从不强制转换为其他任何东西。
2.  切勿将结构用作接口类型，除非将其作为受约束的通用 `ref` 参数传递给任何应该修改它的方法。执行此操作的代码通常在语法上“笨拙”，但在语义上是正确的。结构分配可用于获取结构形状的快照这一事实可能允许通过其他方式不容易或有效地获得语义，但是有许多方法可以犯错误，不会导致编译器诊断但不会产生正确的行为。

在大多数情况下，如果需要一些东西来实现变异*接口*，那么所讨论的类型应该是一个类。可变结构通常只能通过直接修改底层字段或使用对传递的实例进行操作的静态方法来允许突变`ref`。

# android - 是否可以根据国家/地区限制亚马逊应用商店上的应用程序分发？

> ID：14878699
> 
> 赞同：3
> 
> 时间：2013-02-14T15:50:47.840
> 
> 标签：android, app-store, amazon, restriction, country

我想在 Amazon Appstore 上发布一个 Android 应用程序，但我需要将此应用程序的可用性和分发限制在加拿大。

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:55:46.630

你看过常见问题解答吗？

[https://developer.amazon.com/help/faq.html](https://developer.amazon.com/help/faq.html)

**问：如果我不希望我的应用在特定国家/地区可用，该怎么办？**

要更改国家/地区的可用性，请登录亚马逊移动应用分发门户并转到我的应用选项卡。在那里，选择您要针对国家/地区可用性编辑的应用程序，然后单击可用性和定价选项卡。在此选项卡上，取消选中您不希望在其中销售应用的国家/地区旁边的框。默认情况下，您的应用程序将在亚马逊提供应用程序的所有国家/地区可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:54:47.927

是的。只需登录到您的控制台：![在此处输入图像描述](../Images/d6a53245ac594672dfcc2395866c4183.png)

# facebook - og:image 有时有效，有时无效

> ID：14878705
> 
> 赞同：3
> 
> 时间：2013-02-14T15:50:55.267
> 
> 标签：facebook, image, facebook-graph-api

我需要支持才能标记“og：image”，它一周不能正常工作。有时 Facebook 会显示缩略图，但有时不会。我还尝试使用调试工具清理缓存，但没有解决问题。

这是我的代码示例：

http://ogp.me/ns# fb: [http://ogp.me/ns/fb#](http://ogp.me/ns/fb#)文章: [http://ogp.me/ns/article#](http://ogp.me/ns/article#) ">

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:54:41.327

你还包括 og:image:secure_url 吗？

# python - 在没有外部库的情况下合并带有嵌套元素的 xml 文件

> ID：14878706
> 
> 赞同：17
> 
> 时间：2013-02-14T15:51:02.930
> 
> 标签：python, xml, python-2.7, elementtree

我正在尝试使用 Python 而没有外部库将多个 XML 文件合并在一起。XML 文件具有嵌套元素。

**示例文件 1：**

```
<root>
  <element1>textA</element1>
  <elements>
    <nested1>text now</nested1>
  </elements>
</root> 
```

**示例文件 2：**

```
<root>
  <element2>textB</element2>
  <elements>
    <nested1>text after</nested1>
    <nested2>new text</nested2>
  </elements>
</root> 
```

**我想要的是：**

```
<root>
  <element1>textA</element1>    
  <element2>textB</element2>  
  <elements>
    <nested1>text after</nested1>
    <nested2>new text</nested2>
  </elements>  
</root> 
```

**我试过的：**

从[这个答案](https://stackoverflow.com/a/11315257/1561176)。

```
from xml.etree import ElementTree as et
def combine_xml(files):
    first = None
    for filename in files:
        data = et.parse(filename).getroot()
        if first is None:
            first = data
        else:
            first.extend(data)
    if first is not None:
        return et.tostring(first) 
```

**我得到什么：**

```
<root>
  <element1>textA</element1>
  <elements>
    <nested1>text now</nested1>
  </elements>
  <element2>textB</element2>
  <elements>
    <nested1>text after</nested1>
    <nested2>new text</nested2>
  </elements>
</root> 
```

我希望你能看到并理解我的问题。我正在寻找一个合适的解决方案，任何指导都会很棒。

为了澄清问题，使用我拥有的当前解决方案，嵌套元素不会合并。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-14T16:23:46.240

您发布的代码所做的是将所有元素组合在一起，无论是否已经存在具有相同标签的元素。因此，您需要遍历元素并以您认为合适的方式手动检查和组合它们，因为这不是处理 XML 文件的标准方式。我无法比代码更好地解释它，所以在这里，或多或少地评论了：

```
from xml.etree import ElementTree as et

class XMLCombiner(object):
    def __init__(self, filenames):
        assert len(filenames) > 0, 'No filenames!'
        # save all the roots, in order, to be processed later
        self.roots = [et.parse(f).getroot() for f in filenames]

    def combine(self):
        for r in self.roots[1:]:
            # combine each element with the first one, and update that
            self.combine_element(self.roots[0], r)
        # return the string representation
        return et.tostring(self.roots[0])

    def combine_element(self, one, other):
        """
        This function recursively updates either the text or the children
        of an element if another element is found in `one`, or adds it
        from `other` if not found.
        """
        # Create a mapping from tag name to element, as that's what we are fltering with
        mapping = {el.tag: el for el in one}
        for el in other:
            if len(el) == 0:
                # Not nested
                try:
                    # Update the text
                    mapping[el.tag].text = el.text
                except KeyError:
                    # An element with this name is not in the mapping
                    mapping[el.tag] = el
                    # Add it
                    one.append(el)
            else:
                try:
                    # Recursively process the element, and update it in the same way
                    self.combine_element(mapping[el.tag], el)
                except KeyError:
                    # Not in the mapping
                    mapping[el.tag] = el
                    # Just add it
                    one.append(el)

if __name__ == '__main__':
    r = XMLCombiner(('sample1.xml', 'sample2.xml')).combine()
    print '-'*20
    print r 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-27T13:13:01.320

谢谢，但我的问题是通过考虑属性来合并。这是我的补丁后的代码：

```
 import sys
    from xml.etree import ElementTree as et

    class hashabledict(dict):
        def __hash__(self):
            return hash(tuple(sorted(self.items())))

    class XMLCombiner(object):
        def __init__(self, filenames):
            assert len(filenames) > 0, 'No filenames!'
            # save all the roots, in order, to be processed later
            self.roots = [et.parse(f).getroot() for f in filenames]

        def combine(self):
            for r in self.roots[1:]:
                # combine each element with the first one, and update that
                self.combine_element(self.roots[0], r)
            # return the string representation
            return et.ElementTree(self.roots[0])

        def combine_element(self, one, other):
            """
            This function recursively updates either the text or the children
            of an element if another element is found in `one`, or adds it
            from `other` if not found.
            """
            # Create a mapping from tag name to element, as that's what we are fltering with
            mapping = {(el.tag, hashabledict(el.attrib)): el for el in one}
            for el in other:
                if len(el) == 0:
                    # Not nested
                    try:
                        # Update the text
                        mapping[(el.tag, hashabledict(el.attrib))].text = el.text
                    except KeyError:
                        # An element with this name is not in the mapping
                        mapping[(el.tag, hashabledict(el.attrib))] = el
                        # Add it
                        one.append(el)
                else:
                    try:
                        # Recursively process the element, and update it in the same way
                        self.combine_element(mapping[(el.tag, hashabledict(el.attrib))], el)
                    except KeyError:
                        # Not in the mapping
                        mapping[(el.tag, hashabledict(el.attrib))] = el
                        # Just add it
                        one.append(el)

if __name__ == '__main__':

    r = XMLCombiner(sys.argv[1:-1]).combine()
    print '-'*20
    print et.tostring(r.getroot())
    r.write(sys.argv[-1], encoding="iso-8859-1", xml_declaration=True) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-28T14:11:49.130

扩展@jadkik94 的答案以创建一个不更改其参数并更新属性的实用程序方法：

请注意，该代码仅在 Py2 中有效，因为 Py3 尚不支持 Element 类的 copy() 方法。

```
def combine_xmltree_element(element_1, element_2):
    """
    Recursively combines the given two xmltree elements. Common properties will be overridden by values of those
    properties in element_2.

    :param element_1: A xml Element
    :type element_1: L{Element}

    :param element_2: A xml Element
    :type element_2: L{Element}

    :return: A xml element with properties combined.
    """

    if element_1 is None:
        return element_2.copy()

    if element_2 is None:
        return element_1.copy()

    if element_1.tag != element_2.tag:
        raise TypeError(
            "The two XMLtree elements of type {t1} and {t2} cannot be combined".format(
                t1=element_1.tag,
                t2=element_2.tag
            )
        )

    combined_element = Element(tag=element_1.tag, attrib=element_1.attrib)
    combined_element.attrib.update(element_2.attrib)

    # Create a mapping from tag name to child element
    element_1_child_mapping = {child.tag: child for child in element_1}
    element_2_child_mapping = {child.tag: child for child in element_2}

    for child in element_1:
        if child.tag not in element_2_child_mapping:
            combined_element.append(child.copy())

    for child in element_2:
        if child.tag not in element_1_child_mapping:
            combined_element.append(child.copy())

        else:
            if len(child) == 0:  # Leaf element
                combined_child = element_1_child_mapping[child.tag].copy()
                combined_child.text = child.text
                combined_child.attrib.update(child.attrib)

            else:
                # Recursively process the element, and update it in the same way
                combined_child = combine_xmltree_element(element_1_child_mapping[child.tag], child)

            combined_element.append(combined_child)

    return combined_element 
```

# http - 带有大消息正文的 REST GET 与 POST

> ID：14878707
> 
> 赞同：4
> 
> 时间：2013-02-14T15:51:08.657
> 
> 标签：http, rest, architecture, http-post, http-get

我有一种情况，我正在努力应对现实世界中的 REST GET 和 POST 架构哲学。

我有一个本质上是幂等的 REst 调用。它需要在其有效负载中包含复杂的数据类型（XML 中的保险单），对其执行复杂的业务逻辑并返回溢价。它对状态没有任何作用，因此本质上是幂等的。

目前，REST 调用是一个 POST。对此的有效理由是消息体很大，很可能会被丢弃并与 Internet Explorer 混淆。但是，它也是幂等的，从根本上违反了 GET Vs POST。

以前有人遇到过这个难题吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:58:50.130

我不确定这暗示是否可逆：

`GET SHOULD be idempotent`是已定义的，但没有什么`POST`可以禁止幂等。

在你的位置，我会去的`POST`方法。另外，如果您的请求包含一个实体，它不能是`GET`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:59:32.990

我有同样的问题，我的解决方案是务实的。当面临 GET 请求限制时，我的 API 甚至使用 POST 来实现幂等，因此：

```
If the form data would contain non-ASCII characters or;
If the form data set is large. 
```

我认为还有其他例外，但我现在想不出一个。

更新：还有一个例外，如果由于某种原因，我不希望参数在请求 url 中可见，我也使用 POST 进行幂等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T01:51:15.017

虽然我不认为对大主体 GET 使用 POST 请求有很好的替代方法，但您应该记住，POST 请求通常不会被（反向）代理缓存。大多数 HTTP 缓存（我知道）在计算对象缓存键时不会考虑 POST 正文。如果您的计算是资源密集型的，这可能是一个问题。

# ruby-on-rails - 嵌套形式的 HABTM 复选框

> ID：14878710
> 
> 赞同：5
> 
> 时间：2013-02-14T15:51:23.810
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, rails-activerecord

我正在尝试以嵌套形式实现 HABTM 复选框。

目前，我有 3 个模型。主题、课程和小组。关联如下： 每个科目都有很多课。每节课都有并属于许多组。

现在，我正试图在一个创建和编辑表单上实现它们。这样一堂课嵌套在主题中，并且对于每节课，都有一个组复选框列表来实现 HABTM 关系。

我在实施 HABTM 关系时遇到了麻烦，因为每个科目有很多课程，我不确定如何区分不同的课程。

为了进一步详细说明，我可以让嵌套表单工作，但我无法让 HABTM 复选框保存到正确的课程中。以下代码示例是我的 HABTM 复选框实现。

```
 <% Group.all.each do |group|%>
      <%= check_box_tag "subject[lessons_attributes[0]][group_ids][]", group.id, f.object.groups.include?(group) %>
      <%= group.group_index %>
  <%end%> 
```

目前，我已使用“subject[lessons_attributes[0]][group_ids][]”这一行将它保存到第一课。

但是，课程数量各不相同，我不太确定如何确定课程“编号”，即“主题[lessons_attributes[ **0** ]][group_ids][]”中的粗体 0。这样我就可以将小组保存到正确的课程中。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-18T11:38:58.843

**对于那些使用 Rails 4 并有同样问题的人（和我一样）**

[@Viktor Trón](https://stackoverflow.com/users/641672/viktor-tron)的答案中的`Group.all.each`循环是不必要的：有一个新的 FormBuilder 方法，[collection_check_boxes](http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-collection_check_boxes)，它就是为此而创建的！

您的代码将是：

```
<% form_for @subject do |form| %>
  ....
  <% @subject.lessons.each_with_index do |l, i| %>
     <%= form.fields_for :lessons, l do |lesson_fields|%>
        <%= lesson_fields.collection_check_boxes :group_ids, Group.all, :id, :group_index %>
     <% end %>
 <% end %>
<% end %> 
```

然后，您必须添加`accepts_nested_attributes_for :lessons`到您的`Subject`模型中，并在您的 中`SubjectsController`，将`subject_params`方法更改为“允许”课程的嵌套参数：

```
params.require(:subject).permit(..., lessons_attributes: [:id, group_ids: []]) 
```

在您的`SubjectsController`中，`create`或`update`操作保持不变：`@subject = Subject.create(subject_params)`例如，将创建主题、相关课程并正确更新它们与组的 HABTM 关系（除非我在某处犯了错误！）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T16:40:15.397

最佳实践是在主题上预先构建（一些）课程对象（即 form.object），然后遍历它们以获得每个课程的字段。如果您使用[simple_form](https://github.com/plataformatec/simple_form)或[formtastic](https://github.com/justinfrench/formtastic)，通过复选框选择集合很容易：

```
<% form_for @subject do |form| %>
  ....
  <% form.fields_for :lessons do |lesson_form| %>
    ...
    <% lesson_form.input :group_ids, :as => :check_boxes %> 
```

如果您想使用`check_box_tag`，您应该使用索引遍历课程并将索引替换为您的复选框名称：

```
<% form_for @subject do |form| %>
  ....
  <% @subject.lessons.each_with_index do |l, i| %>
     <% Group.all.each do |group|%>
        <%= check_box_tag "subject[lessons_attributes[#{i}]][group_ids][]", group.id, l.groups.include?(group) %>
        <%= group.group_index %>
     <% end %> 
```

# javascript - javascript失败的请求规范，设计身份验证

> ID：14878717
> 
> 赞同：0
> 
> 时间：2013-02-14T15:51:41.580
> 
> 标签：javascript, ruby-on-rails, rspec, capybara

我正在尝试在需要身份验证的 Web 应用程序上测试一个操作（通过设计）。具体操作使用 javascript，因此我将`js`选项应用于规范，如下所示：

```
scenario "User wants to fax a single document", js: true do
  reset_email
  @doc = @user.documents.create(FactoryGirl.attributes_for(:document))
  visit "/documents/#{@user.id}"

  click_on "send_document_#{@doc.id}"
  last_email.should eq(@doc)
end 
```

控制器以电子邮件的方式发送传真。我不知道为什么；我没写。无论如何，在此功能规范的顶部（使用 Capybara 和 Rspec），我使用

```
before(:each) do
  # Signs in as an admin
  @company = FactoryGirl.create(:company)
  @subscription = FactoryGirl.create(:admin_subscription, company_id: @company.id)
  @user = FactoryGirl.create(:user, company_id: @company.id)
  login_as @user, scope: :user
end 
```

文件中的所有其他规范（也需要登录）仍然通过，这让我认为它与 javascript 有关。因此，该`js`选项在 Firefox 中打开了一个浏览器，并且该页面不是正确的内容。它说

```
500 Internal Server Error
  undefined method `status' for nil:NilClass 
```

我在网上搜索过，发现只有回复说我的控制器中没有操作，称为`response`or `action`。请放心，我没有这样的行动；只有 RESTful 操作以及两个附加功能：

```
def send_document
  @to = params[:to].gsub(/([() \-]+)/, '')
  #The below parses the number to format it for InterFax
  #It adds a "+1" to the front, and a dash in the middle 
  #of the number where needed.
  @to = "+1"+@to[0..-5]+"-"+@to[-4,4]
  @document = Document.find(params[:id])
  DocumentMailer.send_document(@to, @document).deliver
  render :template => false, :text => 'true'
end
def email_document
  @to = params[:to]
  @document = Document.find(params[:id])
  DocumentMailer.email_document(@to, @document).deliver
  render :template => false, :text => 'true'
end 
```

任何人都可以帮助理解这些错误吗？这个应用程序很多都使用 javascript，我真的需要一种方法来在登录时测试这些操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:15:24.893

在未首先测试操作是否已完成的情况下检查非 UI 条件时要小心。当你这样做时：

```
 click_on "send_document_#{@doc.id}"
  last_email.should eq(@doc) 
```

请记住，javascript 在浏览器实例中运行，该实例与您的测试代码不在同一个进程中。在继续之前检查页面上的更新可能会有所帮助：

```
 click_on "send_document_#{@doc.id}"
  page.should have_content("Email sent") # for example
  last_email.should eq(@doc) 
```

Capybara 声称在等待页面元素可见方面非常聪明 - YMMV。

如果你的应用需要登录，你的请求规范应该使用正常的登录过程——访问登录页面，输入凭据，然后导航到该页面进行测试。

# javascript - 相当于 PHP 的 stripcslashes

> ID：14878719
> 
> 赞同：2
> 
> 时间：2013-02-14T15:51:44.337
> 
> 标签：javascript, formatting

我正在开发一个从 API 解析数据的 JavaScript 程序。部分数据以“\t”等格式返回，我需要将其解析为制表符（在本例中）而不是“\t”。

在 PHP 中，有一个很棒的函数叫做[stripcslashes()](http://php.net/manual/en/function.stripcslashes.php)可以为我做这件事，但我找不到 JavaScript 的等价物。

有人知道 JavaScript 中有这样的函数吗？还是一种将 '\t' 解析为制表符的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:20:43.067

Javascript 的字符串文字使用相同的反斜杠转义。应该有办法利用它...

```
var escapedString = '\\t' // actually contains "\t"
,   renderedString = (new Function('return "' + text + '"'))()
;
console.log(renderedString); // "   " <= this is the tab character 
```

请注意，这会使您的代码对注入攻击敞开大门，并且**非常不安全**，特别是如果`escapedString`来自外部源！

[它（几乎）和使用 eval](https://stackoverflow.com/a/198031/60590)一样糟糕！

**更新：安全的方式**

更好的方法可能是使用正则表达式：

```
var escapedString = '\\t' // actually contains the characters \ and t
,   renderedString = escapedString.replace(/\\(.)/g, function (match, char) {
        return {'t': '\t', 'r': '\r', 'n': '\n', '0': '\0'}[char] || match;
    }
;
console.log(renderedString); // "   " <= this is the tab character 
```

在这里，您将使用[replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)方法来跟踪给定字符串中的所有反斜杠（后跟任何字符），并在每次找到匹配项时调用匿名函数。该函数的返回值将确定该匹配将被替换为什么。

匿名函数包含一个 JS 对象（在本例中用作关联数组），其中包含所有可识别的转义字符。反斜杠后面的字符（这里称为`char`）将在该关联数组中查找，JS 将返回相应的值。

行的最后一部分`|| char`, 确保如果`char`不是关联数组的一部分，则使用未更改的匹配项（包括反斜杠），而原始字符串保持不变。

当然，这确实意味着您必须提前指定所有可能的转义。

**第二次更新：要走的路**

我突然想到第一种方法不安全（可能存在欺诈性输入），而第二种方法不确定（您并不真正知道需要提供什么转义）；也许这两种方法可以结合起来！

```
var escapedString = '\\t' // actually contains the characters \ and t
,   renderedString = escapedString.replace(/\\./g, function (match) {
        return (new Function('return "' + match + '"'))() || match;
    }
;
console.log(renderedString); // "   " <= this is the tab character 
```

当然，这个解决方案的性能不会很好。解析和构建这个新函数是一件昂贵的事情，并且需要为转义字符串中存在的每个匹配的反斜杠完成。如果性能成为问题，您可以添加某种缓存机制，它会在创建每个函数后记住它。

然后，您还可以查找需要使用的 API，尝试查找其文档或联系其制造商，并获得它可以产生的最终转义列表。:-0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:00:59.600

如果您使用的是 jQuery，那么 html() 和 text() 函数应该可以满足您的需求。

```
var parsed = $("<div/>").html('\thello').text(); 
```

[http://api.jquery.com/html/](http://api.jquery.com/html/)
[http://api.jquery.com/text/](http://api.jquery.com/text/)

# c++ - 在 Visual Studio 下使用 pair 作为 hash_map 的键

> ID：14878721
> 
> 赞同：5
> 
> 时间：2013-02-14T15:51:49.263
> 
> 标签：c++, hashmap, std-pair

尝试在 Visual Studio 2010 下使用 pair 作为 hash_map 的键值。

无法编译它。

```
int _tmain(int argc, _TCHAR* argv[]) 
{
   hash_map <pair<int, int>, int> months;
    months[pair<int, int>(2,3)] = 1;

   int d;
   cin >> d;

   return 0;
} 
```

收到错误消息：

> 错误 1 ​​错误 C2440: 'type cast' : 无法从 'const std::pair<_Ty1,_Ty2>' 转换为 'size_t' c:\program files\microsoft visual studio 10.0\vc\include\xhash 34 1 testApplication1

我知道这可能是因为`hash_map`没有为`pair`. 有什么简单的方法可以解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:07:32.683

`hash_compare`您必须为您用作键的对象编写自己的- 函数！

在你的情况下是`std::pair<int,int>`

看看[这篇](https://stackoverflow.com/questions/871838/how-to-use-stdexthash-map)文章 - 也许你会更好地实现自己的比较器！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T16:15:00.630

这是一个非常简单的`pair<int,int>`哈希函子示例，它应该为您提供足够的开始来实现您自己的：

```
using namespace std;

class pair_hasher
{
public:
    size_t operator()(const pair<int, int> & p) const
    {
        return p.first*100 + p.second*10000;
    }
};

typedef unordered_map <pair<int, int>, int, pair_hasher> pair_map;

int _tmain(int argc, _TCHAR* argv[])
{
    pair_map months;
    pair<int, int> p = make_pair<int, int>(2,3);
    months[p] = 1;
    cout << months[p] << endl;

    return 0;
} 
```

# c# - 如何处理多对多关系并直接访问中间表？

> ID：14878722
> 
> 赞同：0
> 
> 时间：2013-02-14T15:51:52.203
> 
> 标签：c#, entity-framework-4

我有 3 个表和多对多关系——比如**Authors**、**Books**和**BookAuthors**。

当我更新实体框架 edmx 文件（从数据库更新）并选择所有 3 个表时，实际上我将在 EF 中获得 2 个表，而不是 3**个。BookAuthors**将被隐藏。这对我来说是个问题，因为有时我所拥有的`book_id`只是`author_id`. 在这种情况下，我想将这些值直接保存在中产阶级中。

当我尝试“作弊”时，我更新（到 EF）第一个**Books**和**Authors**，并在第二个更新**BookAuthors**（反之亦然）中，我将在 edmx 中获得 3 个表，但在编译时也会出现错误：

> 从行开始映射片段的问题......具有可能不同键的两个实体被映射到同一行。确保这两个映射片段将 AssociationSet 的两端映射到相应的列。

那么如何在建立多对多关系的同时又可以直接访问中间表呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:55:40.793

我不太明白为什么您需要直接访问中间表。但只需向表中添加一个虚拟布尔字段（永远不会被使用），EF 将停止自动隐藏它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T15:59:44.763

据我所知，当您使用数据库优先方法而不修改中间表时，这是不可能的。如果您选择应用模型优先方法，而不是添加多对多关系，而是在模型中创建中间实体并使用一对多关系。

如果将数据库和另一列更改为中间表，中间表不仅包含外键，它也可以正常工作。

我也想知道为什么你需要将中间表作为一个实体来访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:01:38.113

似乎您正在尝试做的（以及遇到问题的地方）是从`book_id`现有书籍中获取，以及`author_id`您想添加到书中的作者列表。

在这种情况下，只需从 authors 表中拉出所有作者，然后从 books 表中拉出书籍，并为每个作者执行`Book.Authors.Add(author);`.

# php - 检查 $_POST 是否存在和值

> ID：14878724
> 
> 赞同：1
> 
> 时间：2013-02-14T15:52:10.613
> 
> 标签：php

我正在尝试检查是否`$_POST`存在并仅检查特定值。在我的代码中，我试图检查数据头=h1。代码有效，它检查数据头，但我不知道如何指定头的值，即检查 header=h1

```
if ($_POST['data']['header']){
    $myBuildPath = Config::$buildPath.Users::$userid.'/'.$item[$this->mainModel->primaryKey].'/';
    foreach (Config::$repository['headersCustomDest'] as $file => $fileDestPath){
    $dest_file = $myBuildPath.$fileDestPath;

    if(file_exists($file)) full_copy($file,$dest_file);
    else echo $file.' does not exist.';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:55:24.663

```
if(isset($_POST['data']['header']) && $_POST['data']['header'] == 'h1')
{
    // blah
} 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:54:53.027

你是这个意思吗？

```
if(isset($_POST['data']['header']) && $_POST['data']['header'] == 'h1') { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:55:22.730

改变你的条件并检查`==`价值

```
if (isset($_POST['data']['header']) && $_POST['data']['header'] == 'h1'){ 
```

# python - 在 Cherrypy 中逐行读取 json 数据

> ID：14878726
> 
> 赞同：0
> 
> 时间：2013-02-14T15:52:14.177
> 
> 标签：python, json, rest, curl, cherrypy

我有 json 数据将以以下格式发送到我的服务器：

```
{"line":"one"}
{"line":"two"}
{"line":"three"} 
```

虽然我意识到这不是有效的 json 格式，但我无法控制这些数据是如何到达我的。我需要能够逐行读取数据

现在我有一个非常简单的 Cherrypy 服务器设置来接受 POST 请求。这是处理 POST 请求的函数：

```
class PostEvent(object):
    exposed = True
    def POST(self, **urlParams):
        cl = cherrypy.request.headers['Content-Length']
        raw_body = cherrypy.request.body.read(int(cl))
        lines = raw_body.splitlines()
        with open('log.txt', 'w') as f:
            for line in lines:
                f.write('%s\n' % line) 
```

然后我只需发出以下`curl`命令进行测试：

```
curl -i -k -H "Content-Type: application/json" -H "Accept: application/json" -X POST --data @test_data -u username http://test-url.com 
```

该文件`test_data`包含上面指定格式的我的 json 数据。我收到 200 响应，但是，从文件中读取的所有数据都在一行中，如下所示：

```
{"line":"one"}{"line":"two"}{"line":"three"} 
```

似乎当cherrypy读取正文时，它忽略了行分隔符，例如`\n`. 如何让cherrypy读取格式化的请求正文？或者更具体地说，我怎样才能逐行而不是一次读取请求正文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:21:04.080

我无法想象 CherryPy 会这样处理数据。

您写出换行计数的测试表明，更有可能`curl`发送的数据没有完整地换行，并且当您的请求处理程序拥有它时，所有换行都已被剥离（因此`raw_body.splitlines()`仅返回`[raw_body]`导致写入一行） .

确保使用`--data-binary`开关 POST；`-d`默认为 ASCII，很可能会为您更改换行符：

> `-d, --data` 是一样的`--data-ascii`。要发布纯二进制数据，您应该改用该`--data-binary`选项。

# cocoa - 可可更改 NSTextView 的属性

> ID：14878728
> 
> 赞同：0
> 
> 时间：2013-02-14T15:52:19.057
> 
> 标签：cocoa

我的窗口中有一个 NSTextView 对象。我有 2 个问题需要解决。

1) 我的 NSTextView 内容在我设置的不同 NSString 之间发生变化。我想让文本更大一点，但是当应用程序初始化时，那里不会有任何内容。如何设置传递给它的所有字符串可以使它们的大小更大。谢谢

2）我不希望用户可以编辑我的内容，但是当我在检查器中取消选中“可编辑”时，我将无法在代码中自己更改 NSTextView 的内容。如何使内容可以更改但内容仍然不能被用户使用？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:56:46.857

使用实例`NSAttributedString`来设置文本视图的内容。您可以设置属性字符串，以便它们使用特定的字体大小。执行此操作时，请在应用控制器的`-awakeFromNib`方法中执行此操作，以解决应用启动时没有内容的问题。

即使您重置了“可编辑”标志，您仍然可以更改文本视图的内容。这只禁止您的用户更改内容。您是否真的*尝试过*以编程方式更改内容？

**编辑**

以下是使用属性字符串的示例。[Apple](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/AttributedStrings/Tasks/CreatingAttributedStrings.html#//apple_ref/doc/uid/20000714-BBCCGGCC)关于该主题的文档很好地涵盖了它。如果您不使用 ARC，请务必在使用完后释放`attrString`（或自动释放）。

```
NSFont *font = [NSFont fontWithName:@"Helvetica" size:24.0];
NSDictionary *attributes = [NSDictionary dictionaryWithObject:font forKey:NSFontAttributeName];
NSAttributedString *attrString = [[NSAttributedString alloc] initWithString:@"this is Helvetica at 24 points" attributes:attributes];

[[[self textView] textStorage] appendAttributedString:attrString]; 
```

# python - 将计算结果插入 LaTeX 文档

> ID：14878729
> 
> 赞同：3
> 
> 时间：2013-02-14T15:52:21.073
> 
> 标签：python, templates, latex

对于我的实验室实验，我编写了用我的测量值进行计算的程序。目前，这些程序打印出终端中所有数据的简单摘要，如下所示：

```
U = 2.0 ± 0.1 V
I = 6.0 ± 0.2 A 
```

因为我必须手写它们，所以我只会用它们来写带有文本中值的散文。

从现在开始，我们可以在计算机上创建我们的报告。我用 LaTeX 编写报告，并希望将程序的结果自动插入到文本中。这样，我可以重新运行程序，而无需将结果复制粘贴到文本中。由于测量和结果非常不同，我考虑使用模板语言。由于我已经使用 Python，所以我对 Jinja 的想法是这样的：

**文章.tex**

```
We measured the voltage $U = \unit{<< u_val >> \pm << u_err >>}{\volt}$ and the
current $I = \unit{<< i_val >> \pm << i_err >>}{\ampere}$. Then we computed the
resistance $R = \unit{<< r_val >> \pm << r_err >>}{\ohm}$.

All our measurements:
\begin{table}[h]
    \begin{tabular}{rrr}
        $U/\volt$ & $I/\ampere$ \\
        \hline
        %< for u, i in data: ->%
        $<< u >>$ & $<< i >>$ \\
        %< endfor ->%
    \end{tabular}
\end{table} 
```

**程序.py**

```
# Setting up Jinja
env = jinja2.Environment(
    "%<", ">%",
    "<<", ">>",
    "[§", "§]",
    loader=jinja2.FileSystemLoader(".")
)
template = env.get_template("article.tex")

# Measurements.
u_val = 6.2
u_err = 0.1

i_val = 2.0
i_err = 0.1

data = [
    (3, 4),
    (1, 4.0),
    (5, 1),
]

# Calculations
r_val = u_val / i_val
r_err = math.sqrt(
    (1/i_val * u_err)**2
    + (u_val/i_val**2 * i_err)**2
)

# Rendering LaTeX document with values.
with open("out.tex", "w") as f:
    f.write(template.render(**locals())) 
```

**出.tex**

```
We measured the voltage $U = \unit{6.2 \pm 0.1}{\volt}$ and the current $I =
\unit{2.0 \pm 0.1}{\ampere}$. Then we computed the resistance $R = \unit{3.1
\pm 0.162864974749}{\ohm}$.

All our measurements:
\begin{table}[h]
    \begin{tabular}{rrr}
        $U/\volt$ & $I/\ampere$ \\
        \hline
        $3$ & $4$ \\
        $1$ & $4.0$ \\
        $5$ & $1$ \\
        \end{tabular}
\end{table} 
```

结果看起来相当不错，只是一个数字需要四舍五入。

我的问题是：这是一个很好的方法，还是有更好的方法将数字输入文档？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:08:42.530

更换

```
<< r_err >> 
```

和

```
<< '%.2f' % r_err|float >> 
```

应该给你一个带两位小数的输出。

或者，您可以在渲染之前将值转换为字符串。

```
r_err = "%.2f" % r_err 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T15:59:09.260

这可以。我个人会使用[Mako 模板](http://www.makotemplates.org/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T00:42:54.563

实际上有这种东西的 LaTeX 包。我是[pythontex](https://github.com/gpoore/pythontex)包的作者。请参阅 pythontex_gallery 文件以获取有关可能的快速示例。

# django - Django Haystack索引多个模型返回奇怪的数据

> ID：14878730
> 
> 赞同：2
> 
> 时间：2013-02-14T15:52:23.397
> 
> 标签：django, django-haystack

我有一个奇怪的问题，我正试图追查。如果我索引多个模型，我从 Haystack 索引返回的结果与我的模型中的结果不同。

第一次测试，我定义了以下 Django 模型

```
class Designator(models.Model):
    created_date = models.DateTimeField(default=datetime.now(), blank=False, editable=False)
    modified_date = AutoDateTimeField(blank=True, editable=False)
    created_by = models.ForeignKey(User)
    lastmodified_by = models.ForeignKey(User, blank=True, null=True, related_name="%(app_label)s_%(class)s_related")
    number = models.IntegerField(unique=True)
    description = models.CharField(max_length=50) 
```

该模型正在通过此类被 Haystack 索引

```
class DesignatorIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    number = indexes.CharField(model_attr='number')
    description = indexes.CharField(model_attr='description')

    def get_model(self):
        return Designator

    def index_queryset(self, using=None):
        """Used when the entire index for model is updated."""
        return self.get_model().objects.filter(modified_date__lte=datetime.now()).order_by('number') 
```

这是我在构建索引后从 Django shell 返回的结果。

```
>>> from haystack.query import SearchQuerySet
>>> from designator.models import Designator
>>> sqs = SearchQuerySet().models(Designator).filter(text='computer')
>>> sqs.count()
5
>>> for idx, s in enumerate(sqs):
...     print '%s - %s' % (idx, s.text.replace('\n', ' '))
...
0 - 8 COMPUTER MONITOR
1 - 9 COMPUTER PRINTER
2 - 10 COMPUTER CPU
3 - 38 COMPUTER KEYBOARDS
4 - 40 COMPUTER-MISC
>>> d = Designator.objects.filter(description__contains='computer')
>>> d.count()
5
>>> for a in d: print '%s - %s' % (a.number, a.description)
...
8 - COMPUTER MONITOR
9 - COMPUTER PRINTER
10 - COMPUTER CPU
38 - COMPUTER KEYBOARDS
40 - COMPUTER-MISC
>>> 
```

这些结果看起来是正确的。索引在模型中返回相同的数据。

因此，我添加了另一个要索引的模型。此时我也完全重建了所有索引。如下所示

```
class Vendor(models.Model):
    created_date = models.DateTimeField(default=datetime.now(), blank=False, editable=False)
    modified_date = AutoDateTimeField(blank=True, editable=False)
    created_by = models.ForeignKey(User)
    lastmodified_by = models.ForeignKey(User, blank=True, null=True, related_name="%(app_label)s_%(class)s_related")
    name = models.CharField(max_length=70)
    street_address = models.CharField(max_length=70, blank=True)
    city = models.CharField(max_length=50, blank=True)
    state = USStateField(blank=True)
    zip = models.CharField(max_length=5, blank=True)
    phone = PhoneNumberField(blank=True)
    email = models.EmailField(blank=True)

class VendorIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    name = indexes.CharField(model_attr='name')

    def get_model(self):
        return Vendor

    def index_queryset(self, using=None):
        """Used when the entire index for model is updated."""
        return self.get_model().objects.filter(modified_date__lte=datetime.now()).order_by('name') 
```

现在我的索引结果变得有点疯狂。

```
>>> from haystack.query import SearchQuerySet
>>> from designator.models import Designator
>>> from vendor.models import Vendor
>>> sqs = SearchQuerySet().models(Designator).filter(text='computer')
>>> sqs.count()
5
>>> for idx, s in enumerate(sqs):
...     print '%s - %s' % (idx, s.text.replace('\n', ' '))
...
0 - 8 COMPUTER MONITOR
1 - 9 COMPUTER PRINTER
2 - 8 COMPUTER MONITOR
3 - 9 COMPUTER PRINTER
4 - 8 COMPUTER MONITOR
5 - 9 COMPUTER PRINTER
>>> d = Designator.objects.filter(description__contains='computer')
>>> d.count()
5
>>> for a in d: print '%s - %s' % (a.number, a.description)
...
8 - COMPUTER MONITOR
9 - COMPUTER PRINTER
10 - COMPUTER CPU
38 - COMPUTER KEYBOARDS
40 - COMPUTER-MISC
>>> sqs = SearchQuerySet().models(Vendor).filter(text='computer')
>>> sqs.count()
35
>>> v = Vendor.objects.filter(name__contains='computer')
>>> v.count()
36
>>> 
```

好吧，这很令人困惑。这里有哪些可能的问题？我的索引设置错误吗？我的数据中的某些东西会导致问题吗？不太确定我在这里缺少什么。

对不起，很长的帖子，不知道如何浓缩这个问题。

感谢您的帮助，-杰

# jsf-2 - JSF - getExternalContext().getRequestParameterMap().get("id') 返回 null

> ID：14878731
> 
> 赞同：1
> 
> 时间：2013-02-14T15:52:25.480
> 
> 标签：jsf-2, icefaces

`FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("compId")``outputLable`为and返回 null `outputText`，但不为`inputText`and `inputHidden`。为什么会这样，我如何获得 outputLabel 或 outputText 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:28:43.500

这就是[HTML](http://www.htmldog.com/guides/htmlbeginner/)的工作原理。只有[表单元素](http://www.w3schools.com/html/html_forms.asp)将它们的`name=value`对作为 HTTP 请求参数发送，因为它们的值可以由最终用户控制。

对于输出标签和输出文本，这不会发生。这没有任何意义，因为它们的价值通常不受最终用户的控制。这些值通常已经由 webdeveloper 控制。**如果服务器端已经**知道它们，则没有必要将它们的副本发送回去。但是，如果您允许最终用户通过 JavaScript 在客户端更改它们，那么您应该添加一个隐藏的输入元素 ( `<input type="hidden">`) 并在那里设置更改的值。隐藏的输入也会将它们的`name=value`对作为 HTTP 请求参数发送。

# haskell - 在两个不同的模块中定义一个函数，或者一个解决方法

> ID：14878737
> 
> 赞同：2
> 
> 时间：2013-02-14T15:52:47.327
> 
> 标签：haskell, ghc

我`evalExpression :: Exp -> Value`在一个模块`A`中有一个函数，它严重依赖于参数的模式匹配`Exp`。

该文件已变得足够大，需要更多的组织。我想将模块拆分`A`为 modules `A.GHC.Num`,`A.GHC.Types`等。

*   有没有办法在 GHC 中将一个模块内联到另一个模块中？我试过这样做，但我收到错误“模块导入形成一个循环”

或者

*   有没有办法在两个不同的文件中编写相同的模块？

或者

*   我可以定义一个函数`A.evalExp`来尝试（在 try 和 catch 的意义上）返回的值，`A.GHC.Num.evalExp`如果它缓存一个错误（非详尽的模式匹配），尝试返回 `A.GHC.Types.evalExp`，等等？

**更新**：

我尝试解决循环依赖，但 GHC 不相信，它说“模棱两可的发生”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:02:08.513

不，你不能在多个文件之间分割一个模块，你当然不能在不同的位置定义一个函数。最接近这一点的是作为类型类一部分的函数，其实例定义在各种模块中。但这可能不是你想要的。

但是，*可以*编译相互递归的模块。从理论上讲，这应该可以正常工作（tm），但 GHC 需要一些跳圈才能做到这一点；有关详细信息，请参阅[用户指南](http://www.haskell.org/ghc/docs/latest/html/users_guide/separate-compilation.html#mutual-recursion)。如果您遇到循环模块导入错误，这应该可以让您使该版本正常工作。

没有“好”的方法来捕获不详尽的模式匹配错误并尝试其他方法。有多种不太好的方式，但你可能不想去那里。

如果您的目标是对具有大量案例的单一数据类型进行模式匹配，那么在不弄乱相互递归模块或类型类的情况下拆分事物的最直接方法是在其他模块中具有单独的函数，这些函数获取每个构造函数的内容作为直接参数，然后在导入其他模块并执行调度的模块中的所有情况下进行单个模式匹配。

假设您有一个`Foo`带有 case `A`、`B`、 &c. 的类型，具有类似命名的模块。在“中央”模块中，您可以拥有：

```
doStuff (A x y) = A.doStuffA x y
doStuff (B z) = B.doStuffB z 
```

...等等。

在某些情况下，甚至可以以类似的方式拆分整个数据类型，并为每个构造函数创建一个单独的类型，例如：`data Foo = A FooA | B FooB | ...`. 当您有可能以多种方式相互递归的复杂数据类型时，这是最有用的，典型的例子是 AST。

* * *

好的，这是一种模拟你想要的东西而不做任何太粗略的方法。

首先，按照您理想的方式将您的功能拆分为不同的模块。然后进行以下更改：

*   将结果类型更改为 use `Maybe`，将结果包装在`Just`其中并添加一个产生`Nothing`.

*   添加一个额外的参数`r`，并将任何递归调用替换`evalExp`为`r`。

从中央模块导入包含`evalExp`案例的每个模块。如有必要，请使用合格的导入以避免歧义。定义每个 eval 函数的列表（它们都应该具有相同的类型），然后将“真实”定义`evalExp`为如下所示：

```
expCases = [A.GHC.Num.evalExp, A.GHC.Types.evalExpr {- etc... -} ]

evalExpCases exp = mapMaybe (\eval -> eval evalExp exp) expCases

evalExp exp = case evalExpCases exp of
                  (r:_) -> -- use the first result 
                  [] -> -- no cases matched 
```

本质上，这是`Maybe`用于显式指示不穷尽的模式，并将直接递归替换为`fix`- 风格的构造，其中组合的递归函数被传递给每个（单独的非递归）案例集。

这很尴尬，但我不确定是否真的有更好的方法。可能有一种方法可以使用 Template Haskell 自动化所有这些废话，但这可能与手动操作一样麻烦。

就个人而言，我可能只是咬紧牙关，把它全部放在一个模块中。

# java - 推理器不返回实例

> ID：14878740
> 
> 赞同：-1
> 
> 时间：2013-02-14T15:52:58.863
> 
> 标签：java, ontology, owl

当我这样做时，它不起作用

```
OWLClassExpression query = factory.getOWLObjectIntersectionOf(factory.getOWLClass("#belgique", pm)) 
```

reasoner.getInstances(query,true);

这个正在工作：

```
reasoner.getInstances(factory.getOWLClass("#belgique", pm),true); 
```

但问题是我需要 objectintersectionof 因为我需要属于几种类型的类的实例

我什至试过这个：

```
OWLClass newName = factory.getOWLClass(IRI.create("temp001"));
OWLAxiom definition = factory.getOWLEquivalentClassesAxiom(newName, query);
manager.addAxiom(ontology, definition);
reasoner.getInstances(newName,true) 
```

它仍然无法正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:26:08.883

`getOWLObjectIntersectionOf`是一种构建更复杂的类表达式的方法，该方法断言`and`输入表达式之间的关系，通常不会像这样单独使用（[参见那里的背景](http://www.w3.org/TR/owl2-primer/#Complex_Classes)）。

示例： 此处的 `Mother = ObjectIntersectionOf(Woman, Parent)` A`Mother`定义为 a`Woman` **和**a `Parent`。**和**是对象的交集。

您不必使用它来检索类的实例。在您的情况下，使用`getOWLClass()`应该可以完成这项工作。

# html - 如何让 IE7 在悬停时覆盖另一个图像

> ID：14878745
> 
> 赞同：0
> 
> 时间：2013-02-14T15:53:21.117
> 
> 标签：html, css, internet-explorer

我试图让 IE 在悬停时覆盖图像

```
<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<header>
    <title>Test</title>
    <link href="logotestIE.css" rel="stylesheet" type="text/css">
</header>
<body>
<ul class="letterlist">
    <li><img class="grayscale" src="http://mdsystem.com/image/new_start/logos/logo_anadolu.gif" /></li>
    <li><img class="grayscale" src="http://mdsystem.com/image/new_start/logos/logo_aston_martin.gif" /></li>
</ul>

</body>
</html> 
```

[http://jsfiddle.net/mFwnQ/](http://jsfiddle.net/mFwnQ/)

有什么提示吗？

编辑：好的，我提出的问题很糟糕：我想悬停图像。悬停时，它现在应该位于下一个图像的顶部，悬停的图像位于下一个图像的下方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:00:54.727

最好的方法是创建一个精灵。在任何照片/图像软件（photoshop）中拍摄两张图像并将它们放在同一个文件中，一个在另一个之下。

**例子：**

![http://davidwalsh.name/demo/sprites/dw-logo-sprite.jpg](../Images/8ed512b5b3148c309e4654fafd2f6286.png)

然后您创建一个元素，并为其提供图像背景，并将其定位为仅显示您希望在悬停之前显示的图像。

**HTML**

```
<a href="#" id="button"> </a> 
```

**CSS**

```
#button
{
  width:191px;
  height:151px;
  text-decoration:none;
  display:block;
  background-image:url(dw-logo-sprite.jpg);
  background-position:191px 0;
} 
```

然后添加`:hover`到元素并将其定位到下一个图像

```
#button:hover { background-position:0 0; } 
```

**jsFiddle：http: [//jsfiddle.net/mFwnQ/2/](http://jsfiddle.net/mFwnQ/2/)**

**来源：[http ://davidwalsh.name/css-sprites](http://davidwalsh.name/css-sprites)**

# html - SSRS：如何在 sql 服务报告中显示超链接

> ID：14878752
> 
> 赞同：17
> 
> 时间：2013-02-14T15:53:50.900
> 
> 标签：html, reporting-services, ssrs-2008

我正在使用 SSRS for 2008 R2 来显示一些数据生成的报告。在我的数据库表中，我有一个名为 Remarks 的单元格。它通常包含指向软件缺陷的链接。单元格是 nvarchar(max) 并且我添加了诸如[http://stackoverflow.com](http://stackoverflow.com)之类的链接。但是，当显示报告时，链接无法按预期单击。我需要做什么才能使链接可点击？非常感谢您的帮助。J。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-14T16:07:53.673

两种方法，第一种假设数据被预先格式化为 URL（例如`https://www.google.com`）。第二个假设 URL 包含在一些其他文本中（例如，“这是到[Google](https://www.google.com)的链接”）。

* * *

## 仅限网址

1.  右键单击设计视图中的字段，选择`Text Box Properties`。 ![报表生成器字段右键单击](../Images/f95f5d09f0ce237b1acc33ae6333cc0e.png)

2.  选择`Action`窗格，选择`Go to URL`单选按钮。

3.  在`Select URL`文本框中，输入字段值表达式。 ![字段操作 URL](../Images/5a4741253405564fb612d27002e26ee7.png)

* * *

## 嵌入文本的 URL

1.  双击设计视图中的字段，然后右键单击`Create Placeholder`。 ![报表生成器占位符](../Images/59dc090f4096ec83959e6bcf45c9e51c.png)

2.  在`Value`文本框中，输入包含 HTML 标记的字段值表达式。

3.  在 下`Markup Type`，选中`HTML - Interpret tags as styles`单选按钮。 ![报表生成器占位符选项](../Images/706014b3b69954adb2d62f124143396e.png)

4.  运行报告时显示验证链接。 ![报表生成器占位符输出](../Images/2dba7fa20716e75337f4d0b90d8437d9.png)

* * *

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-23T19:23:06.560

**如何在作为超链接的标题区域中创建文本框（在另一个窗口中打开）**

1]将文本框从工具栏拖到标题区域到设计表面

2]然后从左侧的“报告数据”窗格中，将数据集中的任何字段拖到文本框中{这是创建一个“占位符”而不是一个普通的“文本框”

3]右键单击该字段，在文本框中，转到“占位符属性”

4]在“占位符属性”窗口的操作窗格中，单击“转到URL”，然后单击fx，即表达式按钮，并将以下内容粘贴到表达式中：

```
="javascript:void(window.open('http://172.15.189.14:64444/ElectronicForms.aspx','_blank'))" 
```

点击[ok]关闭表达式窗口

5]转到“占位符属性”寡妇中的“常规”选项卡。值字段将填充您拖入文本框中的字段名称，在步骤 2 中，删除字段名称。然后单击 fx，表达式按钮，并在表达式窗口中键入以下内容：

="点击寻求帮助"

然后点击【ok】关闭表达式窗口

然后点击 [ok] 关闭 'PlaceHolder Properties' 窗口

# java - 使用 <> 通过匿名类创建地图

> ID：14878753
> 
> 赞同：7
> 
> 时间：2013-02-14T15:53:52.373
> 
> 标签：java, java-7, diamond-operator

在 JDK 1.7 中，我可以创建一个`Collection`let，例如这样说`HashMap`：

```
private HashMap<String, String> map = new HashMap<>(); 
```

最后是钻石`<>`。

但是，如果我正在创建这样的地图：

```
private static final HashMap<String, String> MAP = new HashMap<>() {{
    put("something", "something");
}}; 
```

在钻石编译器上说：

```
Cannot use ''<>'' with anonymous inner classes 
```

我必须使用：`... new HashMap<String, String>() {{....`才能编译代码。

为什么会这样？如果我只创建一个新实例，为什么我可以创建地图并使用菱形，但如果我通过匿名类创建地图，则代码无法编译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:56:14.603

这只是一个猜测，但当你这样做时

```
new HashMap<>() {{
    put("something", "something");
}}; 
```

它实际上创建了一个`HashMap`I don't like this 的子类，因为你用一堆子类弄脏了你的类。我猜在这种情况下，Java 无法推断出通用菱形类型是什么，因为它正在被子类化。

# php - Ajax 和 Json 查询不起作用

> ID：14878757
> 
> 赞同：0
> 
> 时间：2013-02-14T15:54:03.277
> 
> 标签：php, javascript, jquery, ajax

我在使用 Ajax 检索数据时遇到了一些问题。有人可以告诉我我的代码有什么问题吗？我觉得这与我在同一个函数中使用 JSON 和 Ajax 的事实有关吗？

**jQuery**

```
function updateImage() {
     var knownid = document.location.hash.substring(1); // remove #     

    $.ajax({ //Make the Ajax Request
         type: "POST",
         url: "testimagelook.php", //file name
         data: {boxid: knownid},
         success: function(server_response){
            $.getJSON("testimagelook.php", function(data) {             
            var id = data.id;
            document.location.hash = id;

            known_images[id] = [];
            known_images[id] ['name'] = data.name;
            known_images[id] ['average'] = data.average;
            known_images[id] ['votes'] = data.votes;
            known_images[id] ['username'] = data.username;
            known_images[id] ['userid'] = data.userid;

            });
         }
     });

     $('#design').attr('src','img/boxes/'+knownid+'.png');
     $("#lblName").html(known_images[knownid]['name']);
     $('#lblRating').html(known_images[knownid] ['average'] + " (" + known_images[knownid] ['votes'] + ") (<a href='User.php?uid=" + known_images[knownid] ['userid'] + "'>" + known_images[knownid] ['username'] + "</a>)");
} 
```

我的 Ajax 连接的 PHP 文件如下：

**PHP**

```
<?php

include('config.php');

if (isset($_POST['boxid']))
{
$knownid = $_POST['boxid'];
$query = mysql_query("SELECT b.id as boxid, b.name, b.date_added, u.username, u.id as userid, u.active, b.active, b.active_admin, b.average as average, b.votes as votes FROM BOXES b, USERS u WHERE b.user_id = u.id AND b.id >= $knownid LIMIT 0,1");

$userData = mysql_fetch_array($query, MYSQL_ASSOC);

echo json_encode(array("id" => $userData['boxid'], "name" => $userData['name'], "average" => $userData['average'], "votes" => $userData['votes'], "username" => $userData['username'], "userid" => $userData['userid']));
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:03:16.317

你不需要两个请求。在第一个请求中指定`dataType: 'json'`告诉 jQuery 将响应解析为 JSON。

```
function updateImage() {
     var knownid = document.location.hash.substring(1); // remove #     

    $.ajax({ //Make the Ajax Request
         type: "POST",
         url: "testimagelook.php", //file name
         data: {boxid: knownid},
         dataType: 'json',
         success: function(data){
            var id = data.id;
            document.location.hash = id;   
            known_images[id] = data;
            $("#lblName").html(data.name);
            $('#lblRating').html(data.average + " (" + data.votes + ") (<a href='User.php?uid=" + data.userid + "'>" + data.username + "</a>)");
         }
     });

     $('#design').attr('src','img/boxes/'+knownid+'.png');

} 
```

# c# - Windows 8 RichEditBox - 如何更改默认行距

> ID：14878758
> 
> 赞同：0
> 
> 时间：2013-02-14T15:54:02.357
> 
> 标签：c#, xaml, windows-store-apps

如何使用 C#/XAML 更改 Windows Store 应用程序的 RichEditBox 的行距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:13:41.787

我不知道[这](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/010dee54-f8e7-41c6-9c0f-beecb95fa084)是否可以帮助您，但基本上 Rob Caplan 建议：

```
MyEditBox.Document.GetDefaultParagraphFormat().SetLineSpacing(); 
```

# angularjs - 将类切换绑定到窗口滚动事件

> ID：14878761
> 
> 赞同：60
> 
> 时间：2013-02-14T15:54:12.600
> 
> 标签：angularjs, angularjs-directive

当用户将浏览器窗口滚动到某个点以下时，我正在切换#page div 的类。

到目前为止我所做的工作正常：

[http://jsfiddle.net/eTTZj/29/](http://jsfiddle.net/eTTZj/29/)

```
<div ng-app="myApp" scroll id="page">

    <header></header>
    <section></section>

</div>

app = angular.module('myApp', []);
app.directive("scroll", function ($window) {
    return function(scope, element, attrs) {
        angular.element($window).bind("scroll", function() {
             if (this.pageYOffset >= 100) {
                 element.addClass('min');
                 console.log('Scrolled below header.');
             } else {
                 element.removeClass('min');
                 console.log('Header is in view.');
             }
        });
    };
}); 
```

（当他们在标题下方滚动窗口时，100px，类被切换）

虽然，如果我错了，请纠正我，但我觉得这不是使用 Angular 执行此操作的正确方法。

相反，我认为最好的方法是使用 ng-class 并在作用域中存储一个布尔值。像这样的东西：

```
<div ng-app="myApp" scroll id="page" ng-class="{min: boolChangeClass}">

    <header></header>
    <section></section>

</div>

app = angular.module('myApp', []);
app.directive("scroll", function ($window) {
    return function(scope, element, attrs) {
        angular.element($window).bind("scroll", function() {
             if (this.pageYOffset >= 100) {
                 scope.boolChangeClass = true;
                 console.log('Scrolled below header.');
             } else {
                 scope.boolChangeClass = false;
                 console.log('Header is in view.');
             }
        });
    };
}); 
```

虽然这不是动态的，但如果我在滚动回调中更改 scope.boolChangeClass 的值，那么 ng-class 不会更新。

所以我的问题是：当用户滚动到某个点以下时，如何最好地切换#page 的类，使用 AngularJS？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-14T17:43:42.307

感谢 Flek 在他的评论中回答我的问题：

[http://jsfiddle.net/eTTZj/30/](http://jsfiddle.net/eTTZj/30/)

```
<div ng-app="myApp" scroll id="page" ng-class="{min:boolChangeClass}">

    <header></header>
    <section></section>

</div>

app = angular.module('myApp', []);
app.directive("scroll", function ($window) {
    return function(scope, element, attrs) {
        angular.element($window).bind("scroll", function() {
             if (this.pageYOffset >= 100) {
                 scope.boolChangeClass = true;
             } else {
                 scope.boolChangeClass = false;
             }
            scope.$apply();
        });
    };
}); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-08-04T16:07:17.513

为什么你们都建议重范围操作？我不明白为什么这不是“角度”解决方案：

```
.directive('changeClassOnScroll', function ($window) {
  return {
    restrict: 'A',
    scope: {
        offset: "@",
        scrollClass: "@"
    },
    link: function(scope, element) {
        angular.element($window).bind("scroll", function() {
            if (this.pageYOffset >= parseInt(scope.offset)) {
                element.addClass(scope.scrollClass);
            } else {
                element.removeClass(scope.scrollClass);
            }
        });
    }
  };
}) 
```

所以你可以像这样使用它：

```
<navbar change-class-on-scroll offset="500" scroll-class="you-have-scrolled-down"></navbar> 
```

或者

```
<div change-class-on-scroll offset="500" scroll-class="you-have-scrolled-down"></div> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-07-06T16:02:00.473

这是我的解决方案，它不是那么棘手，并且允许您通过一个简单的 ng-class 指令将它用于多个标记。像这样，您可以为每种情况选择类和滚动位置。

你的 App.js ：

```
angular.module('myApp',[])
    .controller('mainCtrl',function($window, $scope){
        $scope.scrollPos = 0;

        $window.onscroll = function(){
            $scope.scrollPos = document.body.scrollTop || document.documentElement.scrollTop || 0;
            $scope.$apply(); //or simply $scope.$digest();
        };
    }); 
```

你的 index.html ：

```
<html ng-app="myApp">
    <head></head>
    <body>
        <section ng-controller="mainCtrl">
            <p class="red" ng-class="{fix:scrollPos >= 100}">fix me when scroll is equals to 100</p>
            <p class="blue" ng-class="{fix:scrollPos >= 150}">fix me when scroll is equals to 150</p>
        </section>
    </body>
</html> 
```

在这里工作[JSFiddle](http://jsfiddle.net/freezystem/nz6cxz3n/)

**编辑 ：**

> 正如`$apply()`实际调用一样`$rootScope.$digest()`，您可以直接使用`$scope.$digest()`而不是`$scope.$apply()`根据上下文获得更好的性能。
> 长话短说：`$apply()` 将始终有效，但会强制`$digest`所有可能导致性能问题的范围。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-21T13:00:16.170

也许这可以帮助:)

控制器

```
$scope.scrollevent = function($e){
   // Your code
} 
```

html

```
<div scroll scroll-event="scrollevent">//scrollable content</div> 
```

或者

```
<body scroll scroll-event="scrollevent">//scrollable content</body> 
```

指示

```
.directive("scroll", function ($window) {
   return {
      scope: {
         scrollEvent: '&'
      },
      link : function(scope, element, attrs) {
        $("#"+attrs.id).scroll(function($e) { scope.scrollEvent != null ?  scope.scrollEvent()($e) : null })
      }
   }
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-30T01:52:37.617

性能呢？

1.  始终去抖动事件以减少计算
2.  用于`scope.applyAsync`减少总的消化循环数

```
function debounce(func, wait) {
    var timeout;
    return function () {
        var context = this, args = arguments;
        var later = function () {
            timeout = null;
            func.apply(context, args);
        };

        if (!timeout) func.apply(context, args);
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

angular.module('app.layout')
  .directive('classScroll', function ($window) {    
    return {
        restrict: 'A',
        link: function (scope, element) {    
            function toggle() {
                angular.element(element)
                  .toggleClass('class-scroll--scrolled', 
                    window.pageYOffset > 0);
                scope.$applyAsync();
            }    
            angular.element($window)
              .on('scroll', debounce(toggle, 50));

            toggle();
        }
    };
}); 
```

3.如果您根本不需要触发观察者/摘要然后使用`compile`

```
.directive('classScroll', function ($window, utils) {
    return {
        restrict: 'A',
        compile: function (element, attributes) {
            function toggle() {
                angular.element(element)
                  .toggleClass(attributes.classScroll,
                    window.pageYOffset > 0);
            }

            angular.element($window)
              .on('scroll', utils.debounce(toggle, 50));
            toggle();
        }
    };
  }); 
```

你可以像这样使用它`<header class-scroll="header--scrolled">`

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-04-05T13:18:41.540

正如他们所说，指令不在“角度世界之内”。因此，您必须在更改内容时使用 apply 重新进入它

# android - 无法通过 Android 上的数字键盘输入符号

> ID：14878766
> 
> 赞同：1
> 
> 时间：2013-02-14T15:54:21.620
> 
> 标签：android, input, keyboard, android-edittext, symbols

我正在启动一个数字键盘，但符号“-”、“。” 等不工作。

```
public class WebEditText extends EditText

mWebEditText.setInputType(InputType.TYPE_CLASS_NUMBER);
webEditTextPanel.addView(mWebEditText, lp);
mWebEditText.requestFocus(); 
imm.showSoftInput(mWebEditText, 0); 
```

我在这里缺少什么吗？dispatchKeyEvent 不会为符号调用，但是对于它被调用的数字并且工作正常。

![数字键盘](../Images/7af0cce168dcad135136e49a6739099b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:11:36.383

`InputType.TYPE_CLASS_NUMBER`将您的输入限制为数字。您需要使用不同的 InputType 常量，例如`InputType.TYPE_CLASS_PHONE`，它仍然会为您提供数字键盘。

[http://developer.android.com/reference/android/text/InputType.html#TYPE_CLASS_PHONE](http://developer.android.com/reference/android/text/InputType.html#TYPE_CLASS_PHONE)

IE

```
mWebEditText.setInputType(InputType.TYPE_CLASS_PHONE); 
```

# algorithm - 如何确定我的算法的最坏情况复杂度？

> ID：14878767
> 
> 赞同：0
> 
> 时间：2013-02-14T15:54:23.450
> 
> 标签：algorithm, heap

我正在为堆编写`siftup`算法，但我被困在问题的最后。问题的最后一部分说该算法应该具有对数最坏情况时间复杂度，即`O(log(n)`。我写了下面的算法，其中`i`是堆中元素的索引，`v`是堆数组。根的索引是最低的，而它的最大值是堆的最低孩子。我正在考虑数组从 1 到 n

**算法**

```
Siftup (v, i) {
While(v[i] > v[i/2] and i != 0) {
    Temp = v[i] // Temp is of the same type as v[i]
    v[i] = v[i/2]
    v[i/2] = temp
    i = i / 2
    }
} 
```

由于该过程涉及四个赋值语句`while loop`每个语句都具有恒定的最坏情况时序，因此该算法应该具有对数最坏情况时间复杂度。任何人都可以展示一种方法来确定它的`O(n)`，`n`堆中元素的数量在哪里？

PS还请让我知道我的算法中的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:00:24.350

是的，看起来您的算法具有对数复杂度。

我同意您的观察，即每次迭代似乎都具有恒定的复杂性。

之后的步骤是计算对于给定的 N 值将执行多少次迭代。虽然我不会提供直接答案，但这里的关键是`i = i / 2`. 反过来看这可能更容易：对于某些给定的 N，`i`在达到 N 之前，您必须加倍（从 1 开始）多少次？`i`更具体地说，N 的大小与在它至少与 N 一样大之前需要翻倍的次数之间有什么关系？

# asp.net - HttpContext.Current.Server.Execute 上的 HiddenField 抛出错误

> ID：14878768
> 
> 赞同：0
> 
> 时间：2013-02-14T15:54:27.567
> 
> 标签：asp.net, hidden-field

当我在服务器端`HiddenField`的对象中添加控件`Page`并调用`HttpContext.Current.Server.Execute`时，代码抛出错误，但是相同的代码在使用时运行良好`Panel`对象而不是相同的代码时运行良好`HiddenField`

以下是供参考的示例代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;

namespace WebApplication1
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Page pageHolder;
            pageHolder = new Page();

            Panel p = new Panel();
            HiddenField h = new HiddenField();
            pageHolder.Controls.Add(h);

            using (StringWriter l_SW = new StringWriter())
            {
                HttpContext.Current.Server.Execute(pageHolder, l_SW, true);
            }
        }
    }
} 
```

它抛出的异常是

> “HiddenField”类型的控件“ctl00”必须放在带有 runat=server 的表单标记内。

不知道为什么只有 HiddenField 会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T08:45:26.977

你可以试试

```
 Page.Form.Controls.add(h); 
```

# python - 两个recarrays的numpy.concatenate导致转置形状？

> ID：14878774
> 
> 赞同：3
> 
> 时间：2013-02-14T15:54:48.127
> 
> 标签：python, numpy, concatenation, transpose, recarray

假设我有两个具有相同 dtype 但形状不同的 numpy 数组 x1 和 x2：
`x1.dtype = dtype([('fmv', '<f4'), ('delta', '<f4'), ('rho', '<f4', (5,))])`
`x2.dtype = dtype([('fmv', '<f4'), ('delta', '<f4'), ('rho', '<f4', (5,))])`

`x1.shape = (10L, 1L)`
`x2.shape = (10L, 6L)`

我想在轴 1 上连接这两个数组：
`y = np.concatenate((x1,x2), axis=1)`

这会导致：
`y.shape = (10L, 7L)` **好**
`y['rho'].shape = (5L, 10L, 7L)` **坏**
为什么 rho 字段的形状被转置了？我期待 (10, 7, 5)

**更新：**

```
               x1.flags | x2.flags | y.flags
C_CONTIGUOUS : 真 | 真 | 错误的
F_CONTIGUOUS : 假 | 假 | 真的
自己的数据：假 | 假 | 错误的
可写：真| 真 | 真的
对齐：真 | 真 | 真的
UPDATEIFCOPY : 错误 | 假 | 错误的

```

`x1.strides = (28L, 28L)`
`x2.strides = (168L, 28L)`
`y.strides = (28L, 280L)`

* * *

我制作了一个小脚本，您可以运行它来复制结果：
`import numpy as np`
`x = np.zeros((5,3), dtype=np.dtype([('field1','<f8'),('field2','<f8',4)]))`
`A1 = np.concatenate((np.array(x[0,0], ndmin=1), np.ravel(x[:,1:], order='C')), axis=0)`
`B1 = np.concatenate((np.tile(np.array(A1[0],ndmin=2), (5,1)), np.reshape(A1[1:], (5,2), order='C')), axis=1)`
`A2 = np.ravel(x, order='C')`
`B2 = np.reshape(A2, (5,3), order='C')`

* * *

`B1['field2'].shape = (4L, 5L, 3L)` **坏**
`B2['field2'].shape = (5L, 3L, 4L)` **好**

# function - 从脚本块动态创建 PowerShell 脚本块

> ID：14878781
> 
> 赞同：5
> 
> 时间：2013-02-14T15:55:07.333
> 
> 标签：function, powershell

我想编写一个powershell函数，它通过基于作为输入参数传入的脚本块动态创建一个脚本块来返回一个脚本块。我似乎运气不太好。

编写一个调用脚本块两次的方法很容易。

```
$x = { write-host "Hello" }
function DoIt([scriptblock] $s) { $s.Invoke(); }
function DoItTwice([scriptblock] $s) { $s.Invoke(); $s.Invoke(); }

DoIt($x)
DoItTwice($x) 
```

编写一个返回脚本块的方法更难，该脚本块具有调用（输入）脚本块两次的效果。以下不起作用

```
function TwiceAsScriptBlock([scriptblock] $s)
{
    function twice
    {
        $s.Invoke();
        $s.Invoke();
    }
    return { twice }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T16:12:49.213

这将为您解决问题：

```
function TwiceAsScriptBlock([scriptblock] $s)
{

    $ScriptBlock = [System.Management.Automation.ScriptBlock]::Create("$s ; $s")
    Return $ScriptBlock 
} 
```

![Powershell 返回脚本块](../Images/3e3fc03a61512de20cfd9621cbf9f968.png)

# php - 显示插入 MySQL 表的新数据

> ID：14878782
> 
> 赞同：0
> 
> 时间：2013-02-14T15:55:12.590
> 
> 标签：php, session

很高兴能和各位天才在一起，这是我在这里的第一个问题。

我创建了一个 Web 服务，用于将数据从 android 插入到我的 PHP Web 服务器（本地服务器）上的 MySQL 表中。我实现了这一点，但我不知道如何显示我刚刚插入的新数据（MySQL 表中的新行）。

我需要该表的新行，以便通过会话将其传输到另一个 PHP 页面。 **我为您提供我的代码，请原谅我的英语：**

```
<?php
    session_start();
?>
<?php
    $b1= $_REQUEST['name_mobinaute'];
    $b2= $_REQUEST['cin_mobinaute'];
    $b3= $_REQUEST['email_mobinaute'];
    $b4= $_REQUEST['code_bancaire_mobinaute'];
    $b5= $_REQUEST['date_transaction_mobinaute'];

    $_SESSION['name_mobinaute'] = $b1; 
    $_SESSION['cin_mobinaute'] = $b2; 
    $_SESSION['email_mobinaute'] = $b3; 
    $_SESSION['code_bancaire_mobinaute'] = $b4; 
    $_SESSION['date_transaction_mobinaute'] = $b5;

    show  $_REQUEST['name_mobinaute'];
    show  $_REQUEST['cin_mobinaute'];
    show $_REQUEST['email_mobinaute'];
    show $_REQUEST['code_bancaire_mobinaute'];
    show $_REQUEST['date_transaction_mobinaute'];

    // Connexion au serveur de base de données
    $connect_result = mysql_connect("localhost", "root", "azertga");

    if (!$connect_result) {
        echo("Impossible de se connecter au serveur de bases de données.<br>\n");
    } else {
        echo("Connecté au serveur de bases de données!<br>\n");
        // Selection de la base de données
        $select_result = mysql_select_db("mediashore");
    }

    if (!$select_result) {
        echo("Impossible de se connecter à la base de données.<br>\n");
    } else {
        echo("Connecté à la base de données!<br>\n");
    }

    $sql=mysql_query("INSERT INTO clients_megamadou (C_nom, C_email, c_adresse, c_ncin) VALUES ('".$_REQUEST['name_mobinaute']."', '".$_REQUEST['email_mobinaute']."', '".$_REQUEST['adress_mobinaute']."', '".$_REQUEST['cin_mobinaute']."')");

    mysql_close();
?> 
```

这是我想弄清楚我刚刚转移的变量的第二页：

```
<?php
    session_start();
?>
<?php
    echo '<br />';
    echo 'Votre data1 est'.$_SESSION['name_mobinaute'];
    echo '<br />';

    echo '<br />';
    echo 'Votre data2 est'.$_SESSION['cin_mobinaute'];
    echo '<br />';

    echo '<br />';
    echo 'Votre data3 est'.$_SESSION['email_mobinaute'];
    echo '<br />';

    echo '<br />';
    echo 'Votre data4 est'.$_SESSION['code_bancaire_mobinaute'];
    echo '<br />';

    echo '<br />';
    echo 'Votre data5 est'.$_SESSION['date_transaction_mobinaute'];
    echo '<br />';
?> 
```

我这样做是因为我想将从我的 android 应用程序接收到的数据传输到另一个 Web 服务器：

android（客户端）===> 网络服务器**编号 1** =====> 网络服务器**编号 2**

再次感谢；我很抱歉我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:07:52.697

好的，抛开以这种方式使用 PHP/MySQL 既不受欢迎又非常不安全的事实，您可以使用：

```
$newRecordId = mysql_insert_id(); 
```

**如果**表具有 AUTO_INCREMENT 主键列，则获取最后插入记录的 ID 。**否则，如果**
没有其他插入可以通过其他请求发生， 那么您将只需要时间戳和检索最新记录，这非常麻烦和混乱。

 **@thelawnmowerman 也是对的，android 和 web-services 标签是错误的——请使用 php 和 mysql。

*****编辑*****

 **在我看来，这里的目标是收集一些通过 POST/GET 发送的数据，将其插入数据库表中，然后显示它。这可以在不使用会话变量或需要获取最新记录的情况下实现，所有这些都在一个页面中。

**注意**- 我还没有完全清理这样做的方式 - 我已经删除了无效的“显示”语句并解释了一些请求数据没有在插入中使用但随后显示的事实。
如果这不是它需要的工作方式，您将需要相应地进行调整，并且请记住，不会对任何数据进行清理、清理或验证。

```
<?php
    // save request values to variables
    $name_mobinaute = $_REQUEST['name_mobinaute'];
    $email_mobinaute = $_REQUEST['email_mobinaute'];
    $adress_mobinaute = $_REQUEST['adress_mobinaute'];
    $cin_mobinaute = $_REQUEST['cin_mobinaute'];
    $code_bancaire_mobinaute = $_REQUEST['code_bancaire_mobinaute'];
    $date_transaction_mobinaute = $_REQUEST['date_transaction_mobinaute'];

    // Connexion au serveur de base de données
    $connect_result = mysql_connect("localhost", "root", "azertga");

    if (!$connect_result) {
        echo("Impossible de se connecter au serveur de bases de données.<br>\n");
    } else {
        echo("Connecté au serveur de bases de données!<br>\n");
        // Selection de la base de données
        $select_result = mysql_select_db("mediashore");
    }

    if (!$select_result) {
        echo("Impossible de se connecter à la base de données.<br>\n");
    } else {
        echo("Connecté à la base de données!<br>\n");
    }

    // create sql statement for insert using variables set from request values
    $sql = "INSERT INTO clients_megamadou (C_nom, C_email, c_adresse, c_ncin) VALUES ('".$name_mobinaute."', '".$email_mobinaute."', '".$adress_mobinaute."', '".$cin_mobinaute."')";
    // execute insert and get result (will be true/false depending on success)
    $result=mysql_query($sql);

    if (!$result) {
        echo("Data failed to insert!<br>\n");
    } else {
        echo("Data inserted successfully:<br>\n");
        echo("- name_mobinaute: ".$name_mobinaute."<br/>\n");
        echo("- email_mobinaute: ".$email_mobinaute."<br/>\n");
        echo("- adress_mobinaute: ".$adress_mobinaute."<br/>\n");
        echo("- cin_mobinaute: ".$cin_mobinaute."<br/>\n");
        // these values were passed in via request, but were not inserted 
        echo("<br/>Other data:<br/>\n");
        echo("- code_bancaire_mobinaute: ".$code_bancaire_mobinaute."<br/>\n");
        echo("- date_transaction_mobinaute: ".$date_transaction_mobinaute."<br/>\n");
    }

    mysql_close();
?> 
```****

# forms - Drupal 表单 API 复选框层次结构

> ID：14878783
> 
> 赞同：0
> 
> 时间：2013-02-14T15:55:16.133
> 
> 标签：forms, api, drupal-7, hierarchy, checkbox

我正在尝试设置一个由分层复选框组成的配置页面，如下所示：

```
-Parent#1
  --option#1
  --option#2

-Parent#2
  --option#1
  --option#2 
```

为了实现上述布局，我使用以下代码：

```
$form['categories']['templates']['parent1'] =   array(
    '#type'         =>  'checkboxes',
    '#title'        =>  t('Select the appropriate actions for the form based on the indicated template'),
    '#options'      =>  array("Parent#1"),
    '#multiple'     =>  TRUE,
);
$form['categories']['templates']['parent1']['actions']  =   array(
    '#type'         =>  'checkboxes',
    '#options'      =>  array("P1 - option#1", "P1 - option#2"),
    '#multiple'     =>  TRUE,
);

$form['categories']['templates']['parent2'] =   array(
    '#type'         =>  'checkboxes',
    '#title'        =>  t('Select the appropriate actions for the form based on the indicated template'),
    '#options'      =>  array("Parent#2"),
    '#multiple'     =>  TRUE,
);
$form['categories']['templates']['parent2']['actions']  =   array(
    '#type'         =>  'checkboxes',
    '#options'      =>  array("P2 - option#1", "P2 - option#2"),
    '#multiple'     =>  TRUE,
); 
```

但我得到的效果并不如预期。我附上了代码生成的图像：

![在此处输入图像描述](../Images/d05421e7933a696acaa9e5ce83dbdcb4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:17:38.653

您可以使用新的表单 API 功能`#states`来实现这一点。

请注意，为了便于使用，我将条件复选框用`fieldset`.

```
<?php
  $form['categories']['templates']['parent1'] =   array(
    '#type'         =>  'checkboxes',
    '#title'        =>  t('Select the appropriate actions for the form based on the indicated template'),
    '#options'      =>  array(1 => 'Parent#1'), // Note this! You can't use 0 as a key in #options.
    '#multiple'     =>  TRUE,
  );
  $form['categories']['templates']['parent1']['wrapper'] = array(
    '#type' => 'fieldset',
    '#title' => t('Options for @option', array('@option' => 'Parent#1')),
    '#states' => array(
      'visible' => array(
        ':input[name="parent1[1]"]' => array('checked' => TRUE), // We use "parent1" and its Nth option. in above field, See #options in above checkboxes field.
      ),
    ),
  );
  $form['categories']['templates']['parent1']['wrapper']['actions']  =   array(
    '#type'         =>  'checkboxes',
    '#options'      =>  array("P1 - option#1", "P1 - option#2"), // This is also wrong. You must define a key => value pair for #options or somehow avoid using 0 as the key.
    '#multiple'     =>  TRUE,
  ); 
?> 
```

您可能希望在字段集中使用`#tree`=> TRUE 以避免 Drupal 将相同键的值合并在一起。

此外，您不需要`#multiple`复选框字段类型。

**更新**

节点类型示例：

```
<?php
$node_types = node_type_get_names();
$form['categories']['templates']['parent1'] =   array(
  '#type'         =>  'checkboxes',
  '#title'        =>  t('Select the appropriate actions for the form based on the indicated template'),
  '#options'      =>  $node_types,
);
foreach ($node_types as $type => $label) {
  $form['categories']['templates']['node-options'.$type] =   array(
  '#type'         =>  'checkboxes',
  '#title'        =>  t('Options for @type', array('@type' => $label)),
  '#options'      =>  array("Parent#1"),
  '#multiple'     =>  TRUE,
  '#states' => array(
    'visible' => array(
      ':input[name="parent1['.$type.']"]' => array('checked' => TRUE), // We use "parent1" and its Nth option. in above field, See #options in above checkboxes field.
    ),
  ),
);
} 
```

# javafx-2 - JavaFX - SQL 查询的后台线程

> ID：14878788
> 
> 赞同：11
> 
> 时间：2013-02-14T15:55:24.237
> 
> 标签：javafx-2, javafx

我想知道是否有人可以帮助我解决有关在 JavaFX 中创建后台线程的一个相当烦人的问题！我目前有几个 SQL 查询将数据添加到当前在 JavaFX 应用程序线程上运行的 UI（参见下面的示例）。但是，当每个查询执行时，它都会冻结 UI，因为它没有在后台线程上运行。我查看了各种使用 Task 的示例并有点理解它们，但是在执行数据库查询时我无法让它们工作，其中一些需要几秒钟才能运行。

这是执行查询的方法之一：

```
public void getTopOrders() {
    customerOrders.clear();
    try {
        Connection con = DriverManager.getConnection(connectionUrl);
        //Get all records from table
        String SQL = "EXEC dbo.Get_Top_5_Customers_week";
        ResultSet rs;
        try (Statement stmt = con.createStatement();) {
            rs = stmt.executeQuery(SQL);

            while (rs.next()) {
                double orderValue = Double.parseDouble(rs.getString(3));
                customerOrders.add(new CustomerOrders(rs.getString(1),
                        rs.getString(2), "£" + formatter.format(orderValue),
                        rs.getString(4).substring(6, 8) + "/" + 
                        rs.getString(4).substring(4, 6) + "/" + 
                        rs.getString(4).substring(0, 4)));
            }
        }

    } catch (SQLException | NumberFormatException e) {
    }
} 
```

每个处理过的记录都被添加到一个 ObservableList 中，该 ObservableList 链接到一个 TableView 或图形，或者只是在标签上设置文本（取决于查询）。如何在后台线程上执行查询，并且仍然可以免费使用界面并从查询中更新

提前致谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-15T01:57:09.567

我创建了一个[示例解决方案](https://gist.github.com/jewelsea/4957967)，用于使用[任务](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)（如 Alexander Kirov 的评论中所建议）来访问 JavaFX 应用程序线程的并发执行线程上的数据库。

示例解决方案的相关部分转载如下：

```
// fetches a collection of names from a database.
class FetchNamesTask extends DBTask<ObservableList<String>> {
  @Override protected ObservableList<String> call() throws Exception {
    // artificially pause for a while to simulate a long 
    // running database connection.
    Thread.sleep(1000); 

    try (Connection con = getConnection()) {
      return fetchNames(con);
    }
  }

  private ObservableList<String> fetchNames(Connection con) throws SQLException {
    logger.info("Fetching names from database");
    ObservableList<String> names = FXCollections.observableArrayList();

    Statement st = con.createStatement();      
    ResultSet rs = st.executeQuery("select name from employee");
    while (rs.next()) {
      names.add(rs.getString("name"));
    }

    logger.info("Found " + names.size() + " names");

    return names;
  }
}

// loads a collection of names fetched from a database into a listview.
// displays a progress indicator and disables the trigge button for
// the operation while the data is being fetched.
private void fetchNamesFromDatabaseToListView(
        final Button triggerButton, 
        final ProgressIndicator databaseActivityIndicator, 
        final ListView listView) {
  final FetchNamesTask fetchNamesTask = new FetchNamesTask();
  triggerButton.setDisable(true);
  databaseActivityIndicator.setVisible(true);
  databaseActivityIndicator.progressProperty().bind(fetchNamesTask.progressProperty());
  fetchNamesTask.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
    @Override public void handle(WorkerStateEvent t) {
      listView.setItems(fetchNamesTask.getValue());
    }
  });
  fetchNamesTask.runningProperty().addListener(new ChangeListener<Boolean>() {
    @Override public void changed(ObservableValue<? extends Boolean> observable, Boolean wasRunning, Boolean isRunning) {
      if (!isRunning) {
        triggerButton.setDisable(false);
        databaseActivityIndicator.setVisible(false);
      }
    };
  });
  databaseExecutor.submit(fetchNamesTask);
}

private Connection getConnection() throws ClassNotFoundException, SQLException {
  logger.info("Getting a database connection");
  Class.forName("org.h2.Driver");
  return DriverManager.getConnection("jdbc:h2:~/test", "sa", "");
}  

abstract class DBTask<T> extends Task<T> {
  DBTask() {
    setOnFailed(new EventHandler<WorkerStateEvent>() {
      @Override public void handle(WorkerStateEvent t) {
        logger.log(Level.SEVERE, null, getException());
      }
    });
  }
}

// executes database operations concurrent to JavaFX operations.
private ExecutorService databaseExecutor = Executors.newFixedThreadPool(
  1, 
  new DatabaseThreadFactory()
);  

static class DatabaseThreadFactory implements ThreadFactory {
  static final AtomicInteger poolNumber = new AtomicInteger(1);

  @Override public Thread newThread(Runnable runnable) {
    Thread thread = new Thread(runnable, "Database-Connection-" + poolNumber.getAndIncrement() + "-thread");
    thread.setDaemon(true);

    return thread;
  }
} 
```

请注意，一旦您开始同时执行操作，当一切都是单线程时，您的编码和 UI 会比没有任务的默认模式更复杂。例如，在我的示例中，我禁用了启动任务的按钮，因此您不能让多个任务在后台运行做同样的事情（这种处理类似于网络世界，您可能会禁用表单发布按钮以防止表格被双重张贴）。当长时间运行的数据库任务正在执行时，我还在场景中添加了一个动画进度指示器，以便用户可以指示正在发生的事情。

示例程序输出演示了长时间运行的数据库操作正在进行时的 UI 体验（请注意，在获取期间进度指示器正在动画，这意味着 UI 是响应式的，尽管屏幕截图没有显示这一点）：

![数据库提取器](../Images/276220de3a3726e0525c98c2d37143eb.png)

为了比较具有并发任务的实现与在 JavaFX 应用程序线程上执行所有内容的实现的额外复杂性和功能，您可以看到[不使用任务的同一示例的另一个版本](https://gist.github.com/jewelsea/4955598)。请注意，在我使用玩具本地数据库的情况下，基于任务的应用程序的额外复杂性是不必要的，因为本地数据库操作执行得非常快，但是如果您使用长时间运行的复杂查询连接到大型远程数据库，则基于任务的应用程序这种方法是值得的，因为它为用户提供了更流畅的 UI 体验。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T10:36:59.430

使用jewelsea提供的解决方案设法解决。值得注意的是，如果在不使用需要更新 UI 上的项目（例如文本字段或标签）的列表、表格和/或可观察列表时实现此方法，则只需在 Platform.runLater 中添加更新代码。下面是一些显示我的工作解决方案的代码片段。

代码：

```
public void getSalesData() {
    try {
        Connection con = DriverManager.getConnection(connectionUrl);
        //Get all records from table
        String SQL = "EXEC dbo.Order_Information";
        try (Statement stmt = con.createStatement(); ResultSet rs =
                        stmt.executeQuery(SQL)) {
            while (rs.next()) {

                todayTot = Double.parseDouble(rs.getString(7));
                weekTot = Double.parseDouble(rs.getString(8));
                monthTot = Double.parseDouble(rs.getString(9));
                yearTot = Double.parseDouble(rs.getString(10));
                yearTar = Double.parseDouble(rs.getString(11));
                monthTar = Double.parseDouble(rs.getString(12));
                weekTar = Double.parseDouble(rs.getString(13));
                todayTar = Double.parseDouble(rs.getString(14));
                deltaValue = Double.parseDouble(rs.getString(17));

                yearPer = yearTot / yearTar * 100;
                monthPer = monthTot / monthTar * 100;
                weekPer = weekTot / weekTar * 100;
                todayPer = todayTot / todayTar * 100;

                //Doesn't update UI unless you add the update code to Platform.runLater...
                Platform.runLater(new Runnable() {
                    public void run() {
                        todayTotal.setText("£" + formatter.format(todayTot));
                        weekTotal.setText("£" + formatter.format(weekTot));
                        monthTotal.setText("£" + formatter.format(monthTot));
                        yearTotal.setText("£" + formatter.format(yearTot));
                        yearTarget.setText("£" + formatter.format(yearTar));
                        monthTarget.setText("£" + formatter.format(monthTar));
                        weekTarget.setText("£" + formatter.format(weekTar));
                        todayTarget.setText("£" + formatter.format(todayTar));
                        yearPercent.setText(percentFormatter.format(yearPer) + "%");
                        currentDelta.setText("Current Delta (Week Ends): £"
                                + formatter.format(deltaValue));
                    }
                });

            }
        }

    } catch (SQLException | NumberFormatException e) {
    }
}

    public void databaseThreadTester() {
    fetchDataFromDB();
}

private void fetchDataFromDB() {
    final testController.FetchNamesTask fetchNamesTask = new testController.FetchNamesTask();
    databaseActivityIndicator.setVisible(true);
    databaseActivityIndicator.progressProperty().bind(fetchNamesTask.progressProperty());
    fetchNamesTask.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
        @Override
        public void handle(WorkerStateEvent t) {
        }
    });
    fetchNamesTask.runningProperty().addListener(new ChangeListener<Boolean>() {
        @Override
        public void changed(ObservableValue<? extends Boolean> observable, Boolean wasRunning, Boolean isRunning) {
            if (!isRunning) {
                databaseActivityIndicator.setVisible(false);
            }
        }
    ;
    });
databaseExecutor.submit(fetchNamesTask);
}

abstract class DBTask<T> extends Task {

    DBTask() {
        setOnFailed(new EventHandler<WorkerStateEvent>() {
            @Override
            public void handle(WorkerStateEvent t) {
            }
        });
    }
}

class FetchNamesTask extends testController.DBTask {

    @Override
    protected String call() throws Exception {

        fetchNames();

        return null;
    }

    private void fetchNames() throws SQLException, InterruptedException {
        Thread.sleep(5000);
        getTopOrders();
        getSalesData();
    }
} 
```

唯一似乎不适用于此实现的是以下内容，不确定为什么它不起作用但它不绘制图形。

```
public void addCricketGraphData() {

    yearChart.getData().clear();
    series.getData().clear();
    series2.getData().clear();
    try {
        Connection con = DriverManager.getConnection(connectionUrl);
        //Get all records from table
        String SQL = "...omitted...";
        try (Statement stmt = con.createStatement(); ResultSet rs =
                        stmt.executeQuery(SQL)) {
            while (rs.next()) {
                Platform.runLater(new Runnable() {
                    @Override
                    public void run() {
                        try {
                            series.getData().add(new XYChart.Data<String, Number>(rs.getString(1),
                                    Double.parseDouble(rs.getString(7))));
                            series2.getData().add(new XYChart.Data<String, Number>(rs.getString(1),
                                    Double.parseDouble(rs.getString(8))));
                        } catch (SQLException ex) {
                            Logger.getLogger(testController.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                });

            }
        }

    } catch (SQLException | NumberFormatException e) {
    }
    yearChart = createChart();
}

 protected LineChart<String, Number> createChart() {
    final CategoryAxis xAxis = new CategoryAxis();
    final NumberAxis yAxis = new NumberAxis();

    // setup chart
    series.setName("Target");
    series2.setName("Actual");
    xAxis.setLabel("Period");
    yAxis.setLabel("£");

    //Add custom node for each point of data on the line chart.
    for (int i = 0; i < series2.getData().size(); i++) {
        nodeCounter = i;
        final int value = series.getData().get(nodeCounter).getYValue().intValue();
        final int value2 = series2.getData().get(nodeCounter).getYValue().intValue();
        int result = value2 - value;

        Node node = new HoveredThresholdNode(0, result);
        node.toBack();
        series2.getData().get(nodeCounter).setNode(node);
    }

    yearChart.getData().add(series);
    yearChart.getData().add(series2);

    return yearChart;
} 
```

# actionscript-3 - 使用按钮增加 bufferTime。闪光

> ID：14878795
> 
> 赞同：0
> 
> 时间：2013-02-14T15:55:52.963
> 
> 标签：actionscript-3, flash, video, flash-builder

我是 Flash 新手，我有一个录像机和一个视频播放器。我希望接收视频的用户能够使用 +1 秒按钮延迟视频。

所以我试图做的是创建一个增加视频缓冲区的按钮。这就是我所做的。

我创建了一个名为“缓冲区”的变量：

```
 private var buffer:int                  = 0; 
```

然后是一个名为 'bufferPlus' 的函数：

```
 private function bufferPlus():void{
            buffer = buffer + 1;        
        } 
```

然后：

```
 netStream.bufferTime  =   buffer; 
```

最后我有：

```
 <mx:Image left="400" bottom="20" id="plus" source="@Embed(source='Assets/plus.png')" click="bufferPlus()" buttonMode="true"/> 
```

但它不起作用。

关于我能做些什么来解决这个问题的任何想法？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:39:40.743

这`BufferTime`是在视频开始之前完成的缓冲量。如果视频已经在播放，增加 bufferTime 不会有任何效果。

您可以将其设置为暂停视频，但继续缓冲传入的数据并在一秒钟后恢复视频。

# asp.net - 服务器标记格式不正确或 BC30201：预期表达式

> ID：14878797
> 
> 赞同：0
> 
> 时间：2013-02-14T15:55:59.533
> 
> 标签：asp.net, server-tags

我阅读了有关此问题的所有帖子，但对我没有帮助。如果我这样做，我尝试了不同的方法来解决这个问题：

```
<asp:Button ID="Button_Save" class="btnSave" runat="server" Text="<%# GetLabelName(objUserSession.lngLanguageID, "Button_Save")%>" /> 
```

我有这个问题：**服务器标签格式不正确**。如果是这样：

```
<asp:Button ID="Button_Save" class="btnSave" runat="server" Text="<%# GetLabelName(objUserSession.lngLanguageID, 'Button_Save')%>" /> 
```

我还有另一个问题：**BC30201: Expression expected**。如果是这样：

```
<asp:Button ID="Button_Save" class="btnSave" runat="server" Text='<%# GetLabelName(objUserSession.lngLanguageID, "Button_Save")%>' /> 
```

我的结果是：`<input type="submit" name="ctl00$MainContent$Button_Save" value="" id="MainContent_Button_Save" class="btnSave">`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:13:08.443

您的第三个选项是通常的完成方式。您确定使用这些特定参数，您的函数将返回一个非空、非空值吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:45:41.363

我找到了一个很好的解决这个问题的方法，就在这里：[THE CODEEXPRESSIONBUILDER](http://weblogs.asp.net/infinitiesloop/archive/2006/08/09/The-CodeExpressionBuilder.aspx)

# jsf - 设置禁用属性时 SelectOneMenu 和 valueChangeListener 错误

> ID：14878798
> 
> 赞同：0
> 
> 时间：2013-02-14T15:56:02.760
> 
> 标签：jsf, richfaces

我正在使用一个`<h:selectOneMenu>`组件。它具有`disabled`属性集。因此，我无法`valueChangeListener`在组件上使用 a 。我尝试使用该`<a4j:actionListener>`标签，但我收到一条错误消息，指出父标签不是 type `ActionSource`。当所选值发生变化时，是否有任何其他方式触发操作？

这是标签：

```
<table>
<tr>
<td><input type="radio" id="auto" name="name" value="auto" onclick="onclickfunction  (this);"> </input>
</td>
<td>
<h:selectOneMenu id="abc" value="#{bean.val}" disabled="true">
     <f:selectItem itemLabel="Select ..." itemValue=""/>    
     <f:selectItems id="list" value="#{bean.list}"/>          
     <a4j:ajax event="change" execute="@this" limitRender="true" 
     listener="#{bean.listener}" render="other" />                        
     </h:selectOneMenu> 
</td>
</tr>
<tr>
<td><input type="radio" id="manual" name="name" value="manual"   onclick="onclickfunction  (this);"> </input>
</td>
<td>
<h:selectOneMenu id="xyz" value="#{bean.val}" disabled="true">
     <f:selectItem itemLabel="Select ..." itemValue=""/>    
     <f:selectItems id="list" value="#{bean.list}"/>          
     <a4j:ajax event="change" execute="@this" limitRender="true" 
     listener="#{bean.listener}" render="other" />                        
     </h:selectOneMenu> 
</td>
</tr>
</table> 
```

该标签以 disabled 设置为 true 开始。disabled 属性是通过 javascript 更改的。由于我做出的设计选择，我不得不通过 javascript 执行此操作。此选择标签是用户可以使用单选按钮切换的两个标签之一。我不能使用 JSF 单选按钮标签，因为它需要一个 f:selectitem 子标签。我只需要一个单选按钮来在 2 个选择标签之间切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T01:32:44.193

让`disabled`属性`true`仅在[渲染响应](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#getRenderResponse%28%29)期间评估。

```
<h:selectOneMenu ... disabled="#{facesContext.renderResponse}" /> 
```

这样，它在所有其他阶段（如应用请求值和更新模型值）都启用，允许 JSF 收集提交的值并使用它调用设置器。

另一种方法是让单选按钮使用 JSF ajax 或`<a4j:jsFunction>`更新下拉列表。

# ios - iOS：使用 UIViewContentModeScaleAspectFill 时如何对齐（左/右） UIImageView？

> ID：14878805
> 
> 赞同：5
> 
> 时间：2013-02-14T15:56:33.517
> 
> 标签：ios, cocoa-touch, uiimageview, contentmode

我正在使用 UIImageView 的 contentMode 属性。

当我将它设置为 UIViewContentModeScaleAspectFill 时，图像会缩放以适合屏幕。它居中。所以图片的左右（或上下，取决于屏幕方向）部分被剪裁。

我希望有相同的行为，但不居中。是否可以仅在右侧（或左侧）裁剪图像？（再次取决于方向的顶部或底部）？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-29T20:39:59.500

我知道自二月份以来已经有一段时间了，但我刚刚在我正在开发的应用程序中遇到了同样的需求。

我使用自定义 UIImageView 解决了这个问题，该 UIImageView 可以轻松集成到您现有的代码中（它是 UIImageView 的直接替代品）。

您可以在 github 上找到该类以及一个示例： [https ://github.com/reydanro/UIImageViewAligned](https://github.com/reydanro/UIImageViewAligned)

希望这对您的下一个项目有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T12:44:27.250

iOS 的做法是操作 UIImageView 的 layer 的 contentsRect。考虑以下示例（在我的自定义 UIImageView 子类中）左对齐或右对齐（而不是默认居中）：

```
- (void)updateImageViewContentsRect {
    CGRect imageViewContentsRect = CGRectMake(0, 0, 1, 1);

    if (self.image.size.height > 0 && self.bounds.size.height > 0) {

        CGRect imageViewBounds = self.bounds;
        CGSize imageSize = self.image.size;

        CGFloat imageViewFactor = imageViewBounds.size.width / imageViewBounds.size.height;
        CGFloat imageFactor = imageSize.width / imageSize.height;

        if (self.alignmentMode == AHTImageAlignmentModeLeft) {

            if (imageFactor > imageViewFactor) {
                CGFloat scaledImageWidth = imageViewBounds.size.height * imageFactor;
                CGFloat xOffset = (scaledImageWidth - imageViewBounds.size.width) / 2;
                imageViewContentsRect.origin.x = -(xOffset / scaledImageWidth);
            } else if (imageFactor < imageViewFactor) {
                CGFloat scaledImageHeight = imageViewBounds.size.width / imageFactor;
                CGFloat yOffset = (scaledImageHeight - imageViewBounds.size.height) / 2;
                imageViewContentsRect.origin.y = -(yOffset / scaledImageHeight);
            }

        } else if  (self.alignmentMode == AHTImageAlignmentModeRight) {

            if (imageFactor > imageViewFactor) {
                CGFloat scaledImageWidth = imageViewBounds.size.height * imageFactor;
                CGFloat xOffset = (scaledImageWidth - imageViewBounds.size.width);
                imageViewContentsRect.origin.x = (xOffset / scaledImageWidth) / 2;
            } else if (imageFactor < imageViewFactor) {
                CGFloat scaledImageHeight = imageViewBounds.size.width / imageFactor;
                CGFloat yOffset = (scaledImageHeight - imageViewBounds.size.height);
                imageViewContentsRect.origin.y = (yOffset / scaledImageHeight) / 2;
            }

        }
    }
    self.layer.contentsRect = imageViewContentsRect;
} 
```

# git - 具有不同生产忽略规则的 git 部署策略？

> ID：14878807
> 
> 赞同：0
> 
> 时间：2013-02-14T15:56:34.180
> 
> 标签：git, deployment, web-deployment

我有一个使用 git 进行源代码控制的项目。我还有一个 sass 文件夹，我需要将其置于版本控制之下，但我不希望它被推送到生产服务器。

我希望能够使用接收后 git hook 脚本作为我的部署策略来使用“git push production”。

有没有办法让生产 git deploy 脚本忽略我的 /sass 目录，这样它就永远不会进入生产环境，但它仍然在我的仓库中安全地处于版本控制之下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:02:43.690

StackOverflow 上有一个可以帮助您的答案，它使用`git archive`：[https ://stackoverflow.com/a/5495048/1706698](https://stackoverflow.com/a/5495048/1706698)

# ruby-on-rails - Factory(:some_factory) 或 FactoryGirl.create(:some_factory)

> ID：14878810
> 
> 赞同：3
> 
> 时间：2013-02-14T15:56:47.537
> 
> 标签：ruby-on-rails, factory-bot

`Factory(:some_factory)`和有什么区别`FactoryGirl.create(:some_factory)`吗？

`Factory(:some_factory)``ActiveRecord::AssociationTypeMismatch`在一个控制器规格中引起，而`FactoryGirl.create(:some_factory)`没有引起它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:02:31.333

`Factory(:some_factory)`并`Factory.create(:some_factory)`在较旧版本的 FactoryGirl 中使用，但不推荐使用以支持当前`FactoryGirl.create(:some_factory)`语法。

# html - 将星号添加到占位符，或通过占位符标记必填字段的好方法

> ID：14878812
> 
> 赞同：7
> 
> 时间：2013-02-14T15:57:05.993
> 
> 标签：html, css, placeholder

我正在寻找一种在占位符中设置星号样式的方法。

占位符中这样的纯文本不满足我：

> 你的邮件*

请注意，占位符文本是可变的，因此静态背景不会发挥作用

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T16:12:04.783

`:after`工作，但你需要定位占位符而不是输入元素......然后你可以使用`position: absolute;`和`top, left`属性来移动`*`你想要的任何地方......

[**演示**](http://jsfiddle.net/bN3sT/)（我不确定其他语法，但我已经在 webkit 上进行了测试，因为我使用的是 firefox < 17，所以如果任何浏览器出现问题，请告诉我）

HTML

```
<input type="text" placeholder="E-Mail" /> 
```

CSS

```
::-webkit-input-placeholder:after {
   content: '*';
}

:-moz-placeholder:after { /* Firefox 18- */
   content: '*'; 
}

::-moz-placeholder:after {  /* Firefox 19+ */
   content: '*';
}

:-ms-input-placeholder:after {  
   content: '*';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-28T04:53:49.940

这应该可以解决问题。您可以[到此处](http://www.freeformatter.com/html-entities.html)查找要添加到占位符的任何 HTML 实体。确保您的头部有一个使用字符集 UTF-8 的元标记。

```
<head>
    <meta charset="utf-8">
</head>

<input type="text" id="email" class="form-control input-lg formData" placeholder="Your Email&#42;"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-06T19:41:13.967

更好的方法是将星号保留在占位符中作为后备，因为这仅适用于 Webkit 浏览器。因此，对于其他浏览器，您的用户不知道哪个字段是必填字段。

然后你面临另一个问题 - 占位符中有两个星号。这可以通过javascript很容易地修复。

我写了一篇关于这个的文章：http: [//d.pr/1zQu](http://d.pr/1zQu)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-27T14:56:56.080

我发现最简单的方法是给输入字段一个背景图像：

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      input.mandatory {
        padding: 2px;
        height: 30px;
        width: 200px;
        background-image: url("http://www.fileformat.info/info/unicode/char/002a/asterisk.png");
        background-position: 160px -10px;
        background-repeat: no-repeat;
        background-size: 30%;
      }
      </style>
  </head>
  <body>
    <input class='mandatory' type='text' placeholder='Username'>
  </body>
</html> 
```

[https://jsfiddle.net/t7jnyqos/18/](https://jsfiddle.net/t7jnyqos/18/)

# c++ - 我是否负责在 QImage::bits() 函数提供的指针上调用 delete？

> ID：14878817
> 
> 赞同：4
> 
> 时间：2013-02-14T15:57:18.403
> 
> 标签：c++, qt, memory-leaks, qimage

Qt 类`QImage`有两个版本的`bits()`函数，它们返回一个指向底层图像数据的指针。一个是 const，另一个不是。这是非常量版本[的文档](http://qt-project.org/doc/qt-4.8/qimage.html)：

> 返回指向第一个像素数据的指针。这相当于scanLine(0)。
> 
> 请注意，QImage 使用隐式数据共享。此函数执行共享像素数据的深拷贝，从而确保此 QImage 是唯一使用当前返回值的。

返回类型是`uchar*`.

这是否意味着我有责任`delete`在完成此指针后调用它以避免内存泄漏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T16:06:21.263

不，这只是意味着非常量版本会导致 QImage 与共享相同数据的任何其他实例分离，因为您可能要修改它。它仍然保持所有权。可以肯定的是，实现（来自 Qt 4.7.2）：

```
uchar *QImage::bits()
{
    if (!d)
        return 0;
    detach();
    // In case detach ran out of memory...
    if (!d)
        return 0;
    return d->data;
} 
```

# cucumber - 仅打开 IE 的 selenium-webdriver 错误

> ID：14878822
> 
> 赞同：0
> 
> 时间：2013-02-14T15:58:01.253
> 
> 标签：cucumber, selenium-webdriver, irb

所以，我正在使用 -

```
gem 'watir-webdriver', '0.5.4'
gem 'selenium-webdriver', '2.21.1' 
```

和 JRuby - 1.6.5

我想做的就是打开IE。我有 IE 版本 8。

```
>> require "rubygems"
=> true

?> require "watir-webdriver"
=> true

?> @b = Watir::Browser.new :ie
Selenium::WebDriver::Error::UnhandledAlertError: Modal dialog present
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/remote/response.rb:15:in `initialize'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/remote/http/common.rb:59:in `create_response'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/remote/http/default.rb:64:in `request'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/remote/http/default.rb:62:in `request'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/remote/bridge.rb:92:in `create_session'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/remote/bridge.rb:68:in `initialize'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/ie/bridge.rb:40:in `initialize'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver/common/driver.rb:35:in `for'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/selenium-webdriver-2.21.2/lib/selenium/webdriver.rb:63:in `for'
from C:/jruby-1.6.5/lib/ruby/gems/1.8/gems/watir-webdriver-0.5.8/lib/watir-webdriver/browser.rb:35:in `initialize'
from (irb):5:in `evaluate'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:158:in `eval_input'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:271:in `signal_status'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:155:in `eval_input'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:154:in `eval_input'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:71:in `start'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:70:in `catch'
from C:/jruby-1.6.5/lib/ruby/1.8/irb.rb:70:in `start'
from C:/jruby-1.6.5/bin/jirb:13:in `(root)'
from -e:1:in `load'
from -e:1:in `(root)'>> 
```

IE webdriver 被打开，但出现上述错误。

当我使用任何其他浏览器（firefox 或 chrome）时，它们会按照应有的方式打开。它从本周开始发生。我的意思是我多年来一直在使用 selenium-webdriver，并且在打开 IE 或任何浏览器时从来没有遇到过问题。错误说有一个模态对话框，但是我刚打开IE怎么会有模态对话框，打开IE webdriver时看不到任何对话框。如果是这样，为什么其他浏览器不抱怨？

我假设它可能需要与公司笔记本电脑上推送的某些 Windows 或安全更新有关，但我只是想看看其他人以前是否遇到过这种情况以及解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:51:49.457

我能想到的有两种可能。一种是您在尝试执行测试时打开了 Windows 任务管理器。如果在使用 IE 驱动程序运行代码时打开任务管理器，IE 驱动程序的早期版本中存在一个错误，该错误可能会错误地引发 UnexpectedAlertException。

第二个选项是浏览器插件，它在内部创建一个对话窗口，但将其隐藏。有许多针对 IE 的防病毒和其他反恶意软件插件可能会导致该问题。

在任何一种情况下，更新到[更高版本的 IEDriverServer.exe](http://code.google.com/p/selenium/downloads/detail?name=IEDriverServer_Win32_2.29.1.zip)以查看是否可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:01:28.177

好的，找到了解决方案。这是防病毒的东西。问题是 - 当您使用 IE 运行脚本时，McAfee 站点顾问模式窗口位于 IE 浏览器顶部，因此我们无法使用 IE 浏览器打开它。它只针对 IE，因为 IE 在我的工作场所是“默认”和“首选”浏览器。

McAfee 提供了两个 dll 文件并将它们复制粘贴到某个特定位置解决了该问题。抱歉，我在这个问题上用尽了你所有的心思，而它与硒无关，而是 mcafee 问题。结束问题。

# windows-phone-8 - 在 Windows Phone 8 中禁用硬件 BING 按钮？

> ID：14878825
> 
> 赞同：1
> 
> 时间：2013-02-14T15:58:11.513
> 
> 标签：windows-phone-8

我最近买了一部 HTC Windows Phone 8X。到目前为止相当不错的设备。但是设备底部的传感器键非常敏感，意外触摸它们（经常发生的情况）非常烦人。

是否有某种方法可以禁用它们？（借助一些设置或在后台运行的应用程序）

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:04:40.520

不可以。唯一可以让任何应用程序修改其行为的按钮是后退按钮。

# c++ - 在非成员函数中访问 MFC 对话框的成员变量

> ID：14878834
> 
> 赞同：1
> 
> 时间：2013-02-14T15:58:42.387
> 
> 标签：c++, visual-c++, object, mfc, scope

我正在处理 MFC 对话框，但不确定如何从非成员函数访问对象的成员变量（编辑控件、按钮、复选框等）。

由于对象是在*任何*.cpp 中创建的，并且所有对象事件都在whateverDlg.cpp 中处理，而后者`#include`是前者，因此我无法通过常规方式访问Dlg 的成员。

澄清示例：

```
void BlahDlg::OnBnClickedblah()
{
    //...
    CString text = L"blahblahblah";
    m_bEditControl.SetWindowTextW(text.GetBuffer()); //works fine
    //...
}

void nonMember()
{
    //...
    CString text = L"blahblahblah";
    m_bEditControl.SetWindowTextW(text.GetBuffer()); //m_bEditControl is unknown
    //...
} 
```

换句话说：我应该怎么做才能**从非成员函数****访问（或任何其他对话框的成员）？`m_bEditControl`**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:47:57.750

如果你想保持 GUI 与逻辑分离，那么你可以保持你的对话框类非常薄，基本上只是为了识别发生的事件（`onBtnSomethingClick`、`onPaint`、`onCancel`等）并创建一个类，一旦它们发生就负责处理这些事件。

最简单的解决方案之一是通过引用其构造函数传递对话框来构造此类：

```
class MyClass
{
public:
    MyClass(MainDlg& dlg) : dlg_(dlg) { }

private:
    MainDlg& dlg_;
}; 
```

你的对话类可以实例化你的类的对象：

```
class MainDlg : public CDialog
{
public:
    BOOL MainDlg::OnInitDialog()
    {
        //...
        myClass_ = new MyClass(*this);
        return TRUE;
    }
    ~MainDlg()
    {
        //...
        delete myClass_;
    }

private:
    MyClass* myClass_;
}; 
```

只是不要进一步“传播”对任何 GUI 类的引用。如果您需要直接访问对话框的某些成员，那么您可能会考虑重新设计您的代码 - 例如，如果您正在编写创建 new`User`的方法并且您正在考虑访问对话框的某些文本字段，那么它似乎很多更好的主意，从对话框成员“收集”输入，并将其独立于对话框类传递给这种函数。

* * *

对于您的问题：如果您有一个需要使用对话框成员的辅助非成员函数`CEdit`，那么您可以在成员函数中调用它时更改`void nonMember()`为`void nonMember(CEdit& m_bEditControl)`并传递对该成员的引用：`nonMember(m_bEditControl);`但请注意，这种方法是错误的。

换句话说：这似乎是一个**糟糕的设计**：

```
void nonMember(CEdit& m_bEditControl)
{
    CString text = L"something";
    m_bEditControl.SetWindowTextW(text.GetBuffer());
}

void MainDlg::someMethod()
{
    nonMember(m_bEditControl);
} 
```

这似乎好多了：

```
CString nonMember2()
{
    return L"something";
}

void MainDlg::someMethod()
{
    CString str = nonMember2();
    m_bEditControl.SetWindowTextW(str.GetBuffer());
} 
```

希望这可以帮助 ：）

# asp.net - 为什么当我在 gridview 中单击下一页时，它给了我错误？

> ID：14878835
> 
> 赞同：0
> 
> 时间：2013-02-14T15:58:47.533
> 
> 标签：asp.net

我的页面中有一个gridview，它允许分页，但是当我单击下一个数字时，它给了我这个错误：System.Web.HttpException：GridView 'GridView1' 触发的事件PageIndexChanging 没有被处理。我不知道如何解决它，我必须解决它，直到明天我真的需要帮助

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
                CellPadding="4"  DataKeyNames="idFromUsers" AutoGenerateColumns="False"
    ForeColor="#333333" GridLines="None" onrowcommand="GridView1_RowCommand" 
               ><AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    <Columns>
     <asp:BoundField HeaderText="order code" DataField="idfromIndex"  />
     <asp:BoundField HeaderText="customer code" DataField="idFromUsers" />
     <asp:BoundField HeaderText="factor number"  DataField="indexNO"/>
     <asp:BoundField HeaderText="bank name" DataField="bankName" />
     <asp:BoundField HeaderText="order date" DataField="orderDate" DataFormatString="{0:yyyy/MM/dd}"/>
        <asp:ButtonField CommandName="cart" Text="shopping cart detailsد" >
        <ItemStyle HorizontalAlign="Center" />
        </asp:ButtonField>
        <asp:ButtonField CommandName="customer" Text="customer details">
        <ItemStyle HorizontalAlign="Center" />
        </asp:ButtonField>
        </Columns>
    <EditRowStyle BackColor="#999999" />
    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#E9E7E2" />
    <SortedAscendingHeaderStyle BackColor="#506C8C" />
    <SortedDescendingCellStyle BackColor="#FFFDF8" />
    <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
</asp:GridView> 
```

我的 C# 代码：

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {

        initialGrid1();
    }

}

private void initialGrid1()
{
    getDistinctOrderId();
    DataTable myDT = getTheData();

    GridView1.DataSource = myDT;
    GridView1.DataBind();

}

private void getDistinctOrderId()
{
    string command = "";

    if (ViewState["searchFactor"] != null)
    {
        int index = Convert.ToInt32(ViewState["searchFactor"]);

        switch (index)
        {

            case 1:
                {
                    string fact = factorNO.Text.Trim();
                    command = "SELECT min(id), [idfromIndex] FROM OrdersView WHERE [idfromIndex] IN(SELECT DISTINCT [idfromIndex] FROM OrdersView where IsObserve='True' and Ispay='False'  and indexNO ='" + fact + "' )  GROUP BY [idfromIndex]  ";

                }
                break;
            case 2:
                {
                    string name = TextBox3.Text.Trim();
                    string familly = TextBox4.Text.Trim();
                    command = "SELECT min(id), [idfromIndex] FROM OrdersView WHERE [idfromIndex] IN(SELECT DISTINCT [idfromIndex] FROM OrdersView where IsObserve='True' and Ispay='False'  and user_name ='" + name + "'  and user_familly ='" + familly + "' )  GROUP BY [idfromIndex]  ";
                }
                break;
            case 3:
                {
                    command = getSearchDate();
                    //string startdate = TextBox1.Text.Trim();
                    //string  enddate = TextBox2.Text.Trim();
                    //command = "SELECT min(id), [idfromIndex] FROM OrdersView WHERE [idfromIndex] IN(SELECT DISTINCT [idfromIndex] FROM OrdersView where IsObserve='True' and Ispay='False' and orderDate >='" + startdate + "'  and orderDate <='" + enddate + "' )  GROUP BY [idfromIndex]  ";
                }
                break;
            case 0:
                {
                    command = "SELECT min(id), [idfromIndex] FROM OrdersView WHERE [idfromIndex] IN(SELECT DISTINCT [idfromIndex] FROM OrdersView where  IsObserve='True' and Ispay='False' )  GROUP BY [idfromIndex]  ";

                }
                break;

            default:
                {
                    command = "SELECT min(id), [idfromIndex] FROM OrdersView WHERE [idfromIndex] IN(SELECT DISTINCT [idfromIndex] FROM OrdersView where  IsObserve='True' and Ispay='False')  GROUP BY [idfromIndex]  ";

                }
                break;
        }
    }
    else
    {
        command = "SELECT min(id), [idfromIndex] FROM OrdersView WHERE [idfromIndex] IN(SELECT DISTINCT [idfromIndex] FROM OrdersView where  IsObserve='True' and Ispay='False')  GROUP BY [idfromIndex]  ";

    }

    SqlConnection myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["mobile_storeConnectionString"].ConnectionString);
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = myConnection;
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = command;
    DataView MyDv = new DataView();

    try
    {
        myConnection.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        DataTable dt = new DataTable();
        dt.Load(dr);
        MyDv = dt.DefaultView;
        for (int i = 0; i < MyDv.Count; i++)
        {
            if (i == 0)
            {
                distinctList = MyDv[i][0].ToString() + ",";
            }
            if (i == MyDv.Count - 1)
            {
                distinctList += MyDv[i][0].ToString();
            }
            else if (i != 0 && i != MyDv.Count - 1)
            {
                distinctList += MyDv[i][0].ToString() + ",";
            }
        }
        dr.Close();

        //Label1.Text = MyDv.Count.ToString();

    }
    catch (Exception EXP)
    {

    }
    finally
    { myConnection.Close(); }
}

public DataTable getTheData()
{

    DataSet DS = new DataSet();
    SqlConnection myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString1"].ConnectionString);
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = myConnection;
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "select idfromIndex,indexNO,bankName,Ispay,orderDate,idFromUsers,orderId from factors where orderId IN (" + distinctList + ") and IsObserve='True'";
    // SqlDataAdapter objSQLAdapter = new SqlDataAdapter("select idfromIndex,indexNO,bankName,Ispay,orderDate,idFromUsers,orderId from factors where orderId IN (" + distinctList + ") and IsObserve='False'", myConnection); objSQLAdapter.Fill(DS, "mobile_store");
    //ViewState["idfromindex"] = DS.Tables[0].Rows[0].ce
    // DataTable dt = new DataTable();
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    da.Fill(DS);
    try
    {
        myConnection.Open();
        cmd.ExecuteNonQuery();

    }
    catch (Exception EXP)
    {

    }
    finally
    { myConnection.Close(); }
    return DS.Tables[0];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:12:19.357

首先您需要处理 GridView PageIndexChanging 事件，然后将新的 PageIndex 设置为 GridView

```
 <asp:GridView ID="GridView1" runat="server" AllowPaging="True" CellPadding="4"
   DataKeyNames="idFromUsers" AutoGenerateColumns="False" ForeColor="#333333"
   GridLines="None" onrowcommand="GridView1_RowCommand"
   OnPageIndexChanging="GridView1_PageIndexChanging"> 
```

在后面的代码中添加此事件

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
   GridView1.PageIndex = e.NewPageIndex;
   GridView1.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:09:23.943

因为您没有 OnPageIndexChanging="gridView_PageIndexChanging" 事件。

```
protected void gridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
   gridView.PageIndex = e.NewPageIndex;
   gridView.DataBind();
} 
```

# excel - 更新不同工作表中的单元格背景？

> ID：14878839
> 
> 赞同：-1
> 
> 时间：2013-02-14T15:58:54.570
> 
> 标签：excel, vba

我已经尝试了下面的方法，但它不起作用，上面的函数没有工作表（“”）。标签用于更新活动工作表中的现有单元格范围，

```
Sheets("Sheet2").Range("D7").Interior.ColorIndex = 38 
```

有人有任何解决方案吗？
我试过在谷歌上搜索，我似乎找到的只是如何更改活动工作表上的颜色......

**编辑：我需要在另一张纸上更改颜色！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:02:30.723

输入有点不清楚，但我认为您需要：`ActiveSheet.Range("D7").Interior.ColorIndex = 38`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:50:40.053

您尝试的确切代码：

```
Sheets("Sheet2").Range("D7").Interior.ColorIndex = 38 
```

完全按照您希望的方式工作。我在 Excel 2010 中的新工作簿和现有工作簿中都尝试了它，并且效果很好。

我怀疑您的问题出在代码中的其他地方，或者您有活动的工作簿冲突。 `Workbook`, `Worksheet`, 和`Range`如果省略前一个级别（假定为当前活动），则所有这些都将起作用。

因此，例如，`Range("D7").Interior.ColorIndex = 38`假设为：

```
ActiveSheet.Range("D7").Interior.ColorIndex = 38 
```

同样，`Sheet("Sheet2").Range("D7").Interior.ColorIndex = 38`实际上假定为

```
ActiveWorkbook.Sheet("Sheet2").Range("D7").Interior.ColorIndex = 38 
```

因此，如果您打开了另一个工作簿并且该工作簿处于活动状态，那么您实际上是在该工作簿的 Sheet2 中设置单元格 D7 的内部颜色。

如果您有可能遇到此问题，则始终需要确保您的代码在所有 3 上都是特定的，这意味着：

```
ThisWorkbook.Sheet("Sheet2").Range("D7").Interior.ColorIndex = 38 
```

并且这个将始终设置实际具有相关代码的工作簿 Sheet2 中单元格 D7 的内部颜色。

您的代码可能正在运行，并且您在错误的 Sheet2 中设置了背景颜色。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-17T07:25:49.893

Your code properly works. I just changed the sheet name with sheet index.

```
Sheets(2).Range("D7").Interior.ColorIndex = 38 
```

best regards

Mohammed Q.

# javascript - 如何在 javascript 中使用 HTML 自动换行文本？

> ID：14878843
> 
> 赞同：0
> 
> 时间：2013-02-14T15:59:03.330
> 
> 标签：javascript, word-wrap

我有一个很长的文本，其中也有 html 内容。就像是 -

```
Dell World Newsletter #7 December 3, 2012<br><br>Dell World is Only One Week Away!<br>The organizers of Dell World are putting the finishing touches on thr ee days of exciting keynotes, sessions and entertainment. Check out the highlights and plan your agenda today.<br>Read more &gt; <a target="_blank" href="http://del.ly/6147p5gd" rel="nofollow" class="has-preview">http://del.ly/6147p5gd</a><br><br>Modernize Your IT<br>Paul Holland, global sales director of Application Modernization at Dell, talks about the importance of application modernization and the perils organizations face by ignoring the trend. Legacy footprints are affecting an organizations ability<span class="text_exposed_hide">...</span><div class="text_exposed_show"> to be agile in addressing new business needs and implementing new technologies. They are costing organizations a disproportionate amount of money: 80 percent of IT budgets are typically spent maintaining and running these legacy environments.<br>Watch the video &gt; <a target="_blank" href="http://del.ly/6148p5ge" rel="nofollow" class="has-preview">http://del.ly/6148p5ge</a><br><br>Develop a Cloud Strategy<br>Cloud computing is a key topic of discussion at Dell World 2012\. Mark Clifton, director of Global Cloud Solutions Strate gy for Commercial Business at Dell, discusses the cloud strategies and innovations youll learn about at the conference.<br>Read more &gt; <a target="_blank" href="http://del.ly/6149p5g5" rel="nofollow" class="has-preview">http://del.ly/6149p5g5</a><br><br>Take Control and Simplify Your Data Center<br>I/O virtualization can reduce rack cabling by 80%, lower capital expenses by 40% and lower you operating expenses by 60%. Join NextIO in the Dell World Data Insights Neighborhood Theater at 1pm on Wednesday or in the Cloud Neighborhood Theater at 12:30pm on Thursday to let us show you how. Ask us about our no risk, FREE 30-day try and buy offer<br><br>Learn more &gt; <a target="_blank" href="http://del.ly/6140p5gg" rel="nofollow" class="has-preview">http://del.ly/6140p5gg</a><br><br><br>Meet and Tweet with Brocade, Emulex and MD3 Storage<br>Join fellow Dell customers and partners for a Meet Up and Tweet Up event at Bar96, from Brocade, Emulex and MD3 Storage! Well be talking all things better together: storage and networking, Fib re Channel, end-to-end management and the hottest sessions at Dell World. Bring a colleague and join the conversation!<br>Join us December 12 from 6-11 p.m. at Bar96 on Rainey Street.<br>Register here &gt; <a target="_blank" href="http://del.ly/6141p5g9" rel="nofollow" class="has-preview">http://del.ly/6141p5g9</a><br><br><br>Time is running out to register for our unique gathering of business leaders, CIOs, industry analysts, consultants and other IT professionals who will share ideas and best practices for making organizations more successful. Reserve your spot today to gain valuable insights on how you can use technology as a tool for innovation at your company.<br>Register Here &gt; ( <a target="_blank" href="http://del.ly/6142p5gi" rel="nofollow" class="has-preview">http://del.ly/6142p5gi</a> )<br><br><br>NEWS<br>Tech Page One Launches<br>Join us for the launch of Dells Tech Page One, a portal for news and analysis at the intersection of technology, business and culture. Explore content from the best minds at Dell as w ell as leaders and creators from around the globe. Visit the Tech Page One booth inside the Solutions Showcase. www.techpageone.com<br><br>NEWS<br>Health Check<br>While youre at Dell World, stop by the SoloHealth Station, an interactive, self-service kiosk that screens vision, blood pressure, weight and body mass index in seven minutes or less for free. The kiosk provides an overall health assessment and access to a database of local physicians and actionable health recommendations. The station, available in locations throughout the U.S., was created in partnership with Dells OEM Solutions group. Read more &gt; <a target="_blank" href="http://del.ly/6143p5gc" rel="nofollow" class="has-preview">http://del.ly/6143p5gc</a><br><br>NEWS<br>Dell Giving Showcase<br>Dell's giving approach is simple: Be a powerful force for change and help connect the youth of today with a more promising tomorrow. The Dell Giving Showcase is an interactive area tha t will educate attendees about the four Dell Strategic Giving programsYouth Learning, Childrens Cancer Care, Social Entrepreneurship and Disaster Reliefwhile also involving the public in a sack-pack-stuffing project to be donated to underprivileged children. Follow Dell Giving on Twitter.&gt; <a target="_blank" href="http://del.ly/6144p5gY" rel="nofollow" class="has-preview">http://del.ly/6144p5gY</a><br><br>Register Here &gt; ( <a target="_blank" href="http://del.ly/6145p5gl" rel="nofollow" class="has-preview">http://del.ly/6145p5gl</a> ) #DellWorld<br><br>Cant be in Austin December 11-13? Not to worry, attend the premier event virtually. &gt; <a target="_blank" href="http://del.ly/6146p5gm" rel="nofollow" class="has-preview">http://del.ly/6146p5gm</a></div><span class="text_exposed_hide text_exposed_link sub-text"><a href="javascript: void(0)" data-action="expose" class="has-preview">See More</a></span> 
```

现在，这一行有文本、锚标记、br 标记和许多其他标记。

但这呈现为- *

> 戴尔世界仅一周之遥！
> Dell World 的组织者正在为为期三天的激动人心的主题演讲、会议和娱乐活动做最后的收尾工作。查看亮点并计划您今天的议程。
> 阅读更多 > [http://del.ly/6147p5gd](http://del.ly/6147p5gd)

*

现在我的问题是，我想对这行文本进行自动换行，以使每行不超过 100 个字符。但条件是 html 标签应该放在一起，因为损坏的锚标签将变得无用。那么，我应该如何自动换行，以便 html 标签在自动换行时保持在一起。
请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:02:15.513

[使用 CSS](http://www.w3schools.com/cssref/css3_pr_word-wrap.asp)和

[Jquery 的 addClass](http://api.jquery.com/addClass/)或

[用javascript设置类](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:52:53.423

找到我的答案。:)

我在找这个 - [http://plugins.learningjquery.com/expander/index.html](http://plugins.learningjquery.com/expander/index.html)

将文本限制为指定编号的东西。一行（或总共）的字符数，中间不拼接 html 内容:)

# git - Windows 下推送到 Github 失败

> ID：14878844
> 
> 赞同：0
> 
> 时间：2013-02-14T15:59:08.227
> 
> 标签：git, github, ssh

我无法从 Windows（DOS）命令提示符推送到 github，但从 bash 中它可以工作。

如果我跑了，`git push origin master`我得到：

```
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

如果我跑了，`ssh-add`我得到：

```
Could not open a connection to your authentication agent. 
```

在 bash (msysgit) 下一切正常 - 这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:59:08.227

解决方案是意识到 ssh（在 windows 下）正在寻找`id_rsa`在我`%USEPROFILE%\.ssh`的文件夹中调用的文件，但文件中有名称`github_rsa`。

解决方案：

```
rename %USERPROFILE%\.ssh\github_rsa id_rsa
rename %USERPROFILE%\.ssh\github_rsa.pub id_rsa.pub 
```

嘿 presto，现在推和拉可以在不进入 bash 的情况下工作！

可能的解释：以前安装的 github for windows 生成了`github_rsa`文件。

奇怪的是，重命名后`git push`仍然可以在 bash 下工作！

# sql - Sql Server：join order 制定不同的执行计划，哪一种性能更好？为什么？

> ID：14878848
> 
> 赞同：1
> 
> 时间：2013-02-14T15:59:23.587
> 
> 标签：sql, sql-server, join

```
select * from AdventureWorks.Sales.Customer c
inner loop join AdventureWorks.Sales.SalesOrderHeader o on o.CustomerID = c.CustomerID

select * from AdventureWorks.Sales.SalesOrderHeader o
inner loop join AdventureWorks.Sales.Customer c on c.CustomerID = o.CustomerID 
```

在 MS Sql Server 中：以上两条语句可以制定不同的执行计划。如果我们假设表 Customer 和表 SalesOrderHeader 具有非常不同的记录数量级。哪个性能更好？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:03:21.863

使用连接提示强制连接顺序。查看消息选项卡：有一条消息说。

这是使用连接提示的一个*非常*不幸的副作用。这使它们使用起来非常尴尬。

> 哪个性能更好？

查看查询执行时间和计划成本估算来回答这个问题。

# java - 使用坐标在网格中查找图块

> ID：14878849
> 
> 赞同：1
> 
> 时间：2013-02-14T15:59:25.553
> 
> 标签：java, grid, coordinates

我试图弄清楚如何获取对象的 x 和 y 并在网格中找到它所在的图块。所以我得到了这个：

```
public class testingcode {

public static void main(String[] args){

    //tiles are 32x32
    final int tilesX = 320;//grid size
    final int tilesY = 160;//grid size

    double charx = 220.20;
    double chary = 150.09;

    int tilenumber = 0;

    System.out.println("x is at tile number: "+ ((int)(charx/32)) + " out of 0-9");     

    System.out.println("y is at tile number: "+ ((int)(chary/32)) + " out of 0-4");     

    tilenumber = not a sausage

    System.out.println("tile on grid is: " + tilenumber);
} 
```

}

删除“tilenumber = not a sausage”会告诉我 x 在第 6 个网格上，y 在第 4 个网格上（都从 0 开始）。

使用我的大脑，我知道这些坐标位于网格中的第 46 个图块中，如下所示：

![在此处输入图像描述](../Images/40e01ee24a137c42cc5afdc63dfcf32d.png)

但我不知道如何将 6 和 4 变成 46，而我的谷歌已经让我知道了，所以我的问题是：我如何从这些坐标获得瓷砖编号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:06:54.127

您是否在寻找：

```
tile = (10 * y) + x 
```

??

# visual-studio-2010 - 在 Visual Studio 2010 中按 F1 不会启动帮助 MSDN 页面

> ID：14878850
> 
> 赞同：1
> 
> 时间：2013-02-14T15:59:31.130
> 
> 标签：visual-studio-2010

我的计算机上安装了 Visual Studio 2010。
在光标位于 .Net 元素（例如类名）上时按 F1 不会在我的 Web 浏览器中启动相应的 MSDN 页面。
打 F1 对我公司的一些同事有用。

我需要配置什么选项才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:01:04.817

在 Visual Studio 中，选择`Help`- `Manage help settings`。此时，您可以设置 MSDN 库以使用在线参考。

完成此操作后，F1 应触发正确的 MSDN 页面。

# java - 我应该如何更改旋转线的碰撞检测？

> ID：14878853
> 
> 赞同：0
> 
> 时间：2013-02-14T15:59:33.017
> 
> 标签：java, collision-detection, libgdx

我为我的“线”创建了一个矩形，它是一个旋转的“激光瞄准器”

```
public Rectangle getLaserBox() {
    float lOriginX = (leon.getPosition().x + 0.27f);
    float lOriginY = (leon.getPosition().y + 0.7f);
    float lEndX = lOriginX + (float)Math.cos((leonAimLaserSprite.getRotation())/57) * 5f;
    float lEndY = lOriginY + (float)Math.sin((leonAimLaserSprite.getRotation())/57) * 5f;
    Rectangle laserBox = new Rectangle(lOriginX, lOriginY, lEndX, lEndY);
    return laserBox;
} 
```

然后我有一个检查矩形重叠的方法，如果检测到重叠，应该缩短“激光瞄准器”精灵。我现在在我的渲染方法中调用laserCol() 方法（我知道我正在破坏MVC，只是想让它工作），并且我的laserWidth 被应用为激光精灵的宽度。

```
private float laserWidth;

public void laserCol() {
    Vector2 laserOrigin = new Vector2(leon.getPosition().x + 0.55f, leon.getPosition().y + 0.7f);
    boolean laserIsCol = false;
    for (Tile t : world.getTiles()) {     //pulling in tiles as t, from world method getTiles()
        laserWidth = laserOrigin.dst(t.getPosition().x + 0.1f, t.getPosition().y + 0.7f);
        if (Intersector.overlapRectangles(getLaserBox(), t.getBounds())) {
            laserIsCol = true;
        }
    }
    if (laserIsCol) {
        for (Tile t : world.getTiles()) {     //pulling in tiles as t, from world method getTiles()
            laserWidth = laserOrigin.dst(t.getPosition().x, t.getPosition().y + t.getBounds().y);
        }
    }
    if (!laserIsCol) {
        laserWidth = 8f;
    }
} 
```

但正如您在屏幕截图中看到的那样，激光并没有缩短。我查看了其他示例，但似乎无法理解更好的方法来做到这一点。 ![在此处输入图像描述](../Images/3dc40c62a8295e0233d7849702e964ca.png)

因此，在添加了我在代码中调用的单个对象之后，我决定检查我创建的精灵边界框，它看起来像这样。

![在此处输入图像描述](../Images/ff4014ebb077ce51293cd918d5217cb7.png)

之后，我更改了一些代码，并尝试使用射线，我已经让它工作了一些，但它不像我想要的那样接近，有什么建议吗？

```
public Ray getLaserRay() {
    lOriginX = (leon.getPosition().x + 0.27f);
    lOriginY = (leon.getPosition().y + 0.7f);
    lEndX = lOriginX + (float)Math.cos((leonAimLaserSprite.getRotation())/57) * 10f;
    lEndY = lOriginY + (float)Math.sin((leonAimLaserSprite.getRotation())/57) * 10f;
    laserO = new Vector3(lOriginX, lOriginY, 0);
    laserD = new Vector3(lEndX, lEndY, 0);
    Ray laserRay = new Ray(laserO, laserD);
    return laserRay;
}

private float laserWidth;

public void laserCol() {
    Vector2 laserOrigin = new Vector2(leon.getPosition().x + 0.55f, leon.getPosition().y + 0.7f);
    boolean laserIsCol = false;
        if (Intersector.intersectRayBoundsFast(getLaserRay(), thing.getBB())) {
            laserIsCol = true;
        }
    if (laserIsCol) {
            laserWidth = laserOrigin.dst(thing.getPosition().x, thing.getPosition().y);
        }
    if (!laserIsCol) {
        laserWidth = 10f;
    }
} 
```

![在此处输入图像描述](../Images/d1310d3b63452bd7814b29aca28a58e5.png) ![在此处输入图像描述](../Images/57cb109b3879aa81eb8a03c389f60a2a.png)

我最终使用了 2 个线段来使碰撞检测起作用。我为激光瞄准器制作了一个，为我的对象（敌人）制作了一个，从较低的 x 点延伸到顶部的 x 点。除了我使用了 libgdx 中的段相交之外，基本上是相同的代码。

任何人都知道如何在激光瞄准点上造成子弹或损坏？

![在此处输入图像描述](../Images/72d0e77f49dba73a1639e4438c8f8f11.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:08:09.590

如果没有更多信息，我只能猜测，但我认为问题可能是您正在使用列表/数组中的所有图块计算宽度。相反，您应该只使用激光碰撞的瓷砖来计算宽度。

像这样的东西：

```
laserWidth = 8f; //default if no collision is found
for (Tile t : world.getTiles()) {     //pulling in tiles as t, from world method getTiles()
    if (Intersector.overlapRectangles(getLaserBox(), t.getBounds())) {
        laserWidth = laserOrigin.dst(t.getPosition().x, t.getPosition().y + t.getBounds().y);
        break;
    }
} 
```

请注意，我只是重用了您的代码，我不知道这是否正确，或者其中是否有一些错误的计算。正如我在评论中所说，您应该调试计算并查看它们开始出错的地方。

# batch-file - 批处理文件 - 不被识别为内部命令

> ID：14878856
> 
> 赞同：0
> 
> 时间：2013-02-14T15:59:34.690
> 
> 标签：batch-file

我创建了一个。将运行模型的批处理如下。在命令提示符 (DOS) 我这样做： C:\Program Files\Portico\portico-1.0.2\exec> executePortico.bat name_model

示例：executePortico.bat ExampleCPPFederate

但是这个错误：

'C:\Documents' 不是内部命令或外部可运行程序或批处理文件。"C:\Program Files\Portico\portico-1.0.2\examples\cpp\cpp13\" ExampleCPPPe derate.cpp 按任意键继续。. . '"C:\Program Files\Portico\portico-1.0.2\examples\cpp\cpp13\" ExampleCPPF ederate2 '不被识别为内部命令或外部可运行程序或批处理文件。终止 - 正常

查看我的代码：

```
@echo off

rem ###########################
rem # implementation/version  #
rem ###########################

rem ################################
rem # check command line arguments #
rem ################################
:checkargs
if "%0" == "" goto usage
if "%1" == "" goto usage

rem #######################
rem # test for JAVA_HOME  #
rem #######################
if "%JAVA_HOME%" == "" goto nojava
goto rtihometest

:nojava
echo ERROR Your JAVA_HOME environment variable is not set!
goto usage

rem #######################
rem # test for RTI_HOME   #
rem #######################
:rtihometest
call C:\Arquivos de programas\Portico\portico-1.0.2\etc\confvarsC.bat
if not "%RTI_HOME%" == "" goto execute

############################################
### (target) execute #######################
############################################
:execute
SHIFT
set PATH=%JAVA_HOME%\jre\bin\client;%RTI_HOME%\bin;%PATH%
set RTI_FEDDIR="C:\Arquivos de programas\Portico\portico-1.0.2\examples\cpp\cpp13\"
set EXEC="C:\Arquivos de programas\Portico\portico-1.0.2\examples\cpp\cpp13\"

if "%0" == "m" goto exec1

:exec1
echo %EXEC%%1%.cpp
pause
%EXEC%%1%.cpp %2
goto finish

:usage
echo usage: executePortico.bat [model] [nome modelo]
goto err

:err
echo Terminated - Error
goto end

:finish
echo Terminated - Normal

:end 
```

* * *

我需要做以下事情：我需要在这个软件中运行示例，这样我才能创建一个文件。我在命令提示符中运行的位置： executaPortic.bat name_model 我这样做了：

```
@echo off

rem ###########################
rem # implementation/version  #
rem ###########################

rem ################################
rem # check command line arguments #
rem ################################
:checkargs

if "%0"=="" goto usage
if "%1"=="" goto usage

rem #######################
rem # test for JAVA_HOME  #
rem #######################
if "%JAVA_HOME%"=="" goto nojava
goto rtihometest

:nojava
echo ERROR Your JAVA_HOME environment variable is not set!
goto usage

rem #######################
rem # test for RTI_HOME   #
rem #######################
:rtihometest
call C:\Portico\portico-1.0.2\etc\confvarsC.bat
if not "%RTI_HOME%"=="" goto execute

############################################
### (target) execute #######################
############################################
:execute
SHIFT
set PATH=%JAVA_HOME%\jre\bin\client;%RTI_HOME%\bin;%PATH%
set RTI_FEDDIR=C:\Portico\portico-1.0.2\examples\cpp\cpp13\
set EXEC=C:\Portico\portico-1.0.2\examples\cpp\cpp13\

rem ###########################
rem # if "%0"=="m" goto exec1
rem ###########################

goto exec1

:exec1
echo %EXEC%%1.exe
pause
"%EXEC%%1.exe" %2
goto finish

:usage
echo usage: executePortico.bat [model] [nome modelo]
goto err

:err
echo Terminated - Error
goto end

:finish
echo Terminated - Normal

:end 
```

但是现在出现这个错误： C:\Portico\portico-1.0.2\exec>executePortic.bat main The input line is too long。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:49:15.127

我修复了其他几个小的语法错误，例如替换`%1%`为和在您的行中`%1`添加引号。`call blah\blah\confvarsC.bat`如果不知道脚本期望什么作为参数或查看示例用法，我无法解决其他一些潜在问题。我用`!!!!!!`评论标记了那些。

```
@echo off

rem ###########################
rem # implementation/version  #
rem ###########################

rem ################################
rem # check command line arguments #
rem ################################
:checkargs
if #%1==# goto usage
if #%2==# goto usage

rem #######################
rem # test for JAVA_HOME  #
rem #######################
if "%JAVA_HOME%"=="" goto nojava
goto rtihometest

:nojava
echo ERROR Your JAVA_HOME environment variable is not set!
goto usage

rem #######################
rem # test for RTI_HOME   #
rem #######################
:rtihometest
call "C:\Arquivos de programas\Portico\portico-1.0.2\etc\confvarsC.bat"
if not "%RTI_HOME%"=="" goto execute

rem ############################################
rem ### (target) execute #######################
rem ############################################
:execute

rem !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
rem !!!!  SHIFT is useful if you have more than   !!!!
rem !!!!  9 arguments.  Otherwise, there's no     !!!!
rem !!!!  reason to use it.  After this, I can't  !!!!
rem !!!!  tell whether you expect %2 to be the    !!!!
rem !!!!  second script argument or the third.    !!!!
rem !!!!  -- rojo                                 !!!!
rem !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

SHIFT
set PATH=%JAVA_HOME%\jre\bin\client;%RTI_HOME%\bin;%PATH%
set RTI_FEDDIR=C:\Arquivos de programas\Portico\portico-1.0.2\examples\cpp\cpp13\
set EXEC=C:\Arquivos de programas\Portico\portico-1.0.2\examples\cpp\cpp13\

if "%0"=="m" goto exec1

rem !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
rem !!!!  Shouldn't there be some sort of    !!!!!
rem !!!!  "else goto" statement here?  As    !!!!!
rem !!!!  the script runs now, it will goto  !!!!!
rem !!!!  exec1 regardless of whether        !!!!!
rem !!!!  "%0"=="m"  -- rojo                 !!!!!
rem !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

:exec1
echo %EXEC%%1.cpp
pause
"%EXEC%%1.cpp" %2
goto finish

:usage
echo usage: executePortico.bat [model] [nome modelo]
goto err

:err
echo Terminated - Error
goto end

:finish
echo Terminated - Normal

:end 
```

# sharepoint - 在新服务器上恢复 MOSS 2007 场

> ID：14878857
> 
> 赞同：0
> 
> 时间：2013-02-14T15:59:35.497
> 
> 标签：sharepoint, backup, restore, administration

我目前正在尝试将单服务器场移动到另一台服务器。旧服务器是带有 sql server 2005 的 windows 2003 32 位。新服务器是带有 sql server 2008 r2（32 位）的 windows 2008 32 位。两个 MOSS 2007 具有相同的版本。

我正在尝试做的是使用旧服务器上的场备份通过使用中央管理上的还原工具或使用 stsadm 命令将其还原到新服务器上，但这似乎不是最好的解决方案因为还原将失败。

事实上，我应该在新服务器上做什么？它是否需要与旧的完全一样？例如，我是否必须重新创建所有 Web 应用程序？

有没有可以指导我一步一步的教程？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:37:18.493

检查 technet> 备份和恢复整个场 (Office SharePoint Server 2007)：[http ://technet.microsoft.com/en-us/library/cc262412(v=office.12).aspx](http://technet.microsoft.com/en-us/library/cc262412(v=office.12).aspx)

# jquery - 计算jQuery中每个表格行的文本框

> ID：14878858
> 
> 赞同：0
> 
> 时间：2013-02-14T15:59:35.940
> 
> 标签：jquery

我正在遍历一组动态表行，我试图使用 jquery 捕获每个表行中 cell2 的值，但它每次都返回 cell2 row1 的值，即使它每次都能识别出 cell1 正确的行值，可以有人告诉我我错了吗？请参见下面的示例代码。

感谢您收到的任何帮助。

```
//html
<table class=plantTable>
<tr>
<td><input type=text value=0 class=cell1></td>
<td><input type=text value=0 class=cell2></td>
<td><input type=text value=0 class=cell3></td>
</tr>
<tr>
<td><input type=text value=0 class=cell1></td>
<td><input type=text value=0 class=cell2></td>
<td><input type=text value=0 class=cell3></td>
</tr>
<tr>
<td><input type=text value=0 class=cell1></td>
<td><input type=text value=0 class=cell2></td>
<td><input type=text value=0 class=cell3></td>
</tr>
</table>

//jquery
   tr = $(".plantTable tr").length;

   $(tr).each(function () {
      $(this).find($(".cell1").blur(function () {
      cell1val = parseInt($(this).val());
      cell2val = parseInt($(".cell2").val());  //Returns the value of cell2 in the first row only?
   })); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:03:52.737

你的 jQuery 应该是这样的：

```
$('.plantTable tr').each(function () {
    $(this).find('.cell1').blur(function () {
        cell1val = parseInt($(this).val());
        cell2val = parseInt($(this).siblings(".cell2").val());
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:02:43.943

在您再次找到的 find 内部，它将从顶部查看文档，从而找到 row1 cell2。如果您想要当前项目的兄弟姐妹，请执行以下操作：

```
 $("tr").each(function () {
      $(this).find($(".cell1")).blur(function () {
         cell1val = parseInt($(this).val());
         cell2val = parseInt($this.siblings(".cell2").val());
      });
   }); 
```

这将检索当前找到的 cell1 旁边的 cell2 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:26:18.460

关于解决方案可以完美地完成您的工作，但是每当向其中添加新元素时，我都会怀疑它们。即使将来添加了一些其他输入元素，下面的代码也可以正常工作。

```
 // If you want to maintain resusable collection of all inputs inside  
 var inputCollection = $([]).pushStack($("table.plantTable :input"));
 // Then do operations with inputCollection
 // Else, you could follow chaining like below  

 $("table.plantTable").delegate("input", "blur", function() {
    var inputs = $(this).closest('tr').find(':input');
    // do whatever you want to with inputs
 }); 
```

# c# - c# 给定日期之间的月份和年份

> ID：14878859
> 
> 赞同：2
> 
> 时间：2013-02-14T15:59:36.577
> 
> 标签：c#, datetime

我尝试弹出一个显示给定日期的月份和年份的 msgbox，例如我的输入是：

2012 年 7 月和 2013 年 2 月

输出应该是：

7/2012,8/2012,9/2012,10/2012,11/2012,12/2012,1/2013,2/2013

我写：

```
 string datePart1;
    string datePart2;
    string[] date1 = new string[] { "" };
    string[] date2 = new string[] { "" };

    private void button1_Click(object sender, EventArgs e)
    {
        DateTime endDate = new DateTime(2013, 2, 1);  // i will be having the date time as a variable from a textbox
        DateTime begDate = new DateTime(2012, 7, 1);  // i will be having the date time as a variable from a text box

        int year, month;

        if (endDate.Month - begDate.Month < 0)
        {
            month = (endDate.Month - begDate.Month) + 12;
            endDate = new DateTime(endDate.Year - 1, endDate.Month, endDate.Day);
        }
        else
            month = endDate.Month - begDate.Month;

        year = endDate.Year - begDate.Year; 
```

上面的代码计算了时间差，但我的输出尝试没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:14:43.733

这是一个让您入门的示例。

它提供了一个方便的 MonthsInRange() 方法，该方法返回指定范围内所有月份的序列。然后，您可以使用“M\\/yyyy”（见下文）格式化返回的日期以输出所需的格式。（注意：这不是字母 V，它是一个反斜杠，后跟一个正斜杠！）

有关格式字符串的说明，请参阅[自定义日期和时间格式](http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx)字符串。

```
using System;
using System.Collections.Generic;

namespace Demo
{
    public static class Program
    {
        static void Main(string[] args)
        {
            DateTime endDate = new DateTime(2013, 2, 1);
            DateTime begDate = new DateTime(2012, 7, 1);

            foreach (DateTime date in MonthsInRange(begDate, endDate))
            {
                Console.WriteLine(date.ToString("M\\/yyyy"));
            }
        }

        public static IEnumerable<DateTime> MonthsInRange(DateTime start, DateTime end)
        {
            for (DateTime date = start; date <= end; date = date.AddMonths(1))
            {
                yield return date;
            }
        }
    }
} 
```

为什么是“M\\/yyyy”而不仅仅是“M/yyyy”？

这是因为 DateTime 格式字符串中的“/”字符将被解释为“日期分隔符”，而不是文字“/”。在某些语言环境中，这将显示为“。” 并不是 ”/”。

为了解决这个问题，我们需要使用“\”字符对其进行转义。但是，我们不能只使用单个“\”，因为 C# 本身会将其解释为转义字符，并将使用它来转义后面的字符。文字“\”的 C# 转义序列是“\\”，这就是为什么我们必须输入“\\/”而不仅仅是“\/”。

或者，您可以通过在字符串前面加上 @ 字符来转义“\”字符，如下所示：

```
@"M/yyyy" 
```

你可以使用任何你喜欢的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:11:04.160

由于不能保证您的日期与同一天相同，因此您可以使用此代码创建仅考虑本月第一天的新日期。

```
static IEnumerable<string> InclusiveMonths(DateTime start, DateTime end)
{
    // copies to ensure the same day.
    var startMonth = new DateTime(start.Year, start.Month, 1);
    var endMonth = new DateTime(end.Year, end.Month, 1);

    for (var current = startMonth; current <= endMonth; current = current.AddMonths(1))
        yield return current.ToString("M/yyyy");
}

// usage
foreach (var mmyyyy in InclusiveMonths(begDate, endDate))
{
    Console.WriteLine(mmyyyy);
}

var allMonths = string.Join(", ", InclusiveMonths(begDate, endDate)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:04:06.837

研究使用 TimeSpan 结构，它将帮助您更快地实现目标。

[http://msdn.microsoft.com/en-us/library/system.timespan.aspx](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T16:04:07.370

您可以使用

```
TimeSpan dateDifference = endDate - begDate;
year = dateDifference.Days / 365;
month = dateDifference.Days / 30; 
```

**编辑：** 我忘了`TimeSpan`没有功能`Year`或`Month`，对不起:(

# java - 如何从 EditText 框中获取 IP 地址？

> ID：14878864
> 
> 赞同：0
> 
> 时间：2013-02-14T15:59:50.227
> 
> 标签：java, android

嗨，我对 android 很陌生，如果这是一个愚蠢的问题，我很抱歉。

如何使用 EditText 框而不是硬编码 IP 地址。正如您从下面的代码中看到的那样，我必须将我连接到的计算机 IP 地址放入其中，我想要做的是让它，所以我使用 EditText 框，例如：

```
String input= edittextIP.getText().toString(); 
```

但我无法让它工作。任何帮助将非常感激。

谢谢

```
public class Client {

private String serverMessage;
public final String SERVERIP = "100.100.100.61"; //computer IP address
public final int SERVERPORT = 4444;
private OnMessageReceived mMessageListener = null;
private boolean mRun = false;

PrintWriter out;
BufferedReader in;

/**
 *  Constructor of the class. OnMessagedReceived listens for the messages received from server
 */
public Client(OnMessageReceived listener) {
    mMessageListener = listener;
}

/**
 * Sends the message entered by client to the server
 * @param message text entered by client
 */
public void sendMessage(String message){
    if (out != null && !out.checkError()) {
        out.println(message);
        out.flush();
    }
}

public void stopClient(){
    mRun = false;
}

public void run() {

    mRun = true;

    try {

        InetAddress serverAddr = InetAddress.getByName(SERVERIP);

        Log.e("TCP Client", "C: Connecting...");

        //create a socket to make the connection with the server
        Socket socket = new Socket(serverAddr, SERVERPORT);
        try {

            //send the message to the server
            out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);

            Log.e("TCP Client", "C: Sent.");

            Log.e("TCP Client", "C: Done.");

            //receive the message which the server sends back
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

            //in this while the client listens for the messages sent by the server
            while (mRun) {
                serverMessage = in.readLine();

                if (serverMessage != null && mMessageListener != null) {
                    //call the method messageReceived from MyActivity class
                    mMessageListener.messageReceived(serverMessage);
                }
                serverMessage = null;

            }

            Log.e("RESPONSE FROM SERVER", "S: Received Message: '" + serverMessage + "'");

        } catch (Exception e) {

            Log.e("TCP", "S: Error", e);

        } finally {
            //the socket must be closed. I can't reconnect to this socket
            // after it is closed, which means a new socket has to be created.
            socket.close();
        }

    } catch (Exception e) {

        Log.e("TCP", "C: Error", e);

    }

}

/// public EditText findViewByid(int edittextIP) {   <--- this was previous try please 
///                                                          disregard this
///     
///     return null;
/// }

public interface OnMessageReceived {
    public void messageReceived(String message);
}
} 
```

这是我下面的活动：

```
public class MyActivity extends Activity
{
private ListView mList;
private ArrayList<String> arrayList;
private Adapter mAdapter;
private Client mTcpClient;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    arrayList = new ArrayList<String>();

    final EditText editText = (EditText) findViewById(R.id.editText);
    Button send = (Button)findViewById(R.id.send_button);

    mList = (ListView)findViewById(R.id.list);
    mAdapter = new Adapter(this, arrayList);
    mList.setAdapter(mAdapter);

    // connect to the server
    new connectTask().execute("");

    send.setOnClickListener(new View.OnClickListener()

    {
        public void onClick(View view) {

            String message = editText.getText().toString();

            arrayList.add("c: " + message);

            //sends the message to the server
            if (mTcpClient != null) {
                mTcpClient.sendMessage(message);
            }

            //refresh the list
            mAdapter.notifyDataSetChanged();
            editText.setText("");
        }
    });

}

public class connectTask extends AsyncTask<String,String,Client> {

    @Override
    protected Client doInBackground(String... message) {

        //create a TCPClient object and
        mTcpClient = new Client(new Client.OnMessageReceived() {

            //here the messageReceived is implemented
            public void messageReceived(String message) {

                publishProgress(message);
            }
        });
        mTcpClient.run();

        return null;
    }

    @Override
    protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);

        arrayList.add(values[0]);

        mAdapter.notifyDataSetChanged();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:05:50.717

您错过了转换值并生成了错误的存根。您需要删除您的 findViewByid 功能。试试这个代码：

```
TextEdit input = (TextEdit)findViewByid(...); 
```

请注意，您应该将 IP 从您的活动直接传递给您的类，例如通过构造函数：

```
public class ConnectTask extends AsyncTask<String,String,Client> {
    private string ip;
    public ConnectTask(String ip) {
        this.ip=ip;
    }
 // ... 
```

在成员变量 ip 中有 IP。你可以这样设置：

```
ConnectTask task = new ConnectTask(input.getText().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:08:42.190

您应该从您的 Activity（从 Activity 扩展的类）中获取 EditText 实例，您的“findViewById”函数在那里没有意义。“findViewById”是继承自Activity的方法。然后，例如，您可以将在该 EditText 中键入的文本从您的 Activity 传递到您的 Client 实例。

# iphone - 使用 sizeWithFont:constrainedToSize:lineBreakMode 和 NSLineBreakByTruncatingTail 时的高度

> ID：14878866
> 
> 赞同：2
> 
> 时间：2013-02-14T15:59:51.520
> 
> 标签：iphone, ios, objective-c, ipad, nsstring

当我运行以下代码（iOS 6.1 SDK）时：

```
UIFont *font = [UIFont fontWithName:@"Avenir" size:12.0];

NSString *text1 = @"Short Label";
NSString *text2 = @"Long Label Whose Text Will Be Truncated Because It Is Too Long For The View";

CGSize text1Size = [text1 sizeWithFont:font 
                     constrainedToSize:
                            CGSizeMake(self.view.frame.size.width, CGFLOAT_MAX) 
                         lineBreakMode:NSLineBreakByTruncatingTail];
CGSize text2Size = [text2 sizeWithFont:font 
                     constrainedToSize:
                            CGSizeMake(self.view.frame.size.width, CGFLOAT_MAX) 
                         lineBreakMode:NSLineBreakByTruncatingTail];

NSLog(@"Text 1 Size: %f %f", text1Size.width, text1Size.height);
NSLog(@"Text 2 Size: %f %f", text2Size.width, text2Size.height); 
```

日志输出为：

```
Text 1 Size: 62.000000 17.000000
Text 2 Size: 300.000000 34.000000 
```

为什么这里的高度不同？无论哪种情况，它都是一行文本；只有一个被截断，另一个没有。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:14:43.720

高度不同，因为您将其指定为 CGFLOAT_MAX 作为高度，因此该方法试图通过将文本分成多行来确定文本的大小。在这种情况下，显然，两行就足以在提供的宽度中包含该字符串。

# eclipse - eclipse juno，如何将当前打开的文件与项目相关联，或者我是否在盒子外使用 eclipse？

> ID：14878869
> 
> 赞同：1
> 
> 时间：2013-02-14T15:59:56.590
> 
> 标签：eclipse, editor

我已经使用 eclipse 好几年了。我通常只使用一个工作区，并为我的所有 perforce 分支创建多个项目。我关闭了我不工作的，打开我感兴趣的。

这种方法需要注意的是，每次执行此操作时，我都必须手动关闭空的编辑器选项卡。

我是以错误的方式接近这个吗？

我真的不喜欢拥有多个工作区，因为我必须为每个新工作区设置项目变量。

有没有办法将当前打开的一组编辑器选项卡关联到当前项目？

感谢您的时间。

-丹尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:41:00.200

> 有没有办法将当前打开的一组编辑器选项卡关联到当前项目？

AFAIK，不。但是，您可以使用[Eclipse Mylyn](http://www.eclipse.org/mylyn)将编辑器与任务相关联。这样，当您切换到旧任务时，它会将编辑器和包 exlorer 设置为仅显示您上次所做的工作。

如果您正在处理来自 Jira 或 Bugzilla 或其他一些系统的缺陷，这些缺陷可以自动导入 mylyn 并允许非常轻松的上下文切换。

如果您没有从受支持的存储库之一获取任务，则必须手动创建任务，但是只需为您处理的每个项目创建一个虚拟任务就会产生您所追求的效果。

# ios - iOS 从 UITableView 滑动以删除 plist 中的数组

> ID：14878870
> 
> 赞同：1
> 
> 时间：2013-02-14T16:00:02.100
> 
> 标签：ios, objective-c, arrays, uitableview

我有 a`UITableView`并且每一行都是 a 中的一个`array`名称`plist`。这意味着当我尝试使用正常的滑动删除方法时：

```
[tableView deleteRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic] 
```

应用程序崩溃。如何告诉滑动删除以在 plist 中找到数组并将其删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:04:41.663

删除表格视图中显示的行是不够的。您还必须从数据数组中删除该项目。大概你有一个`NSMutableArray`在一开始就在 plist 中读取的内容。（如果它只是一个`NSArray`，将其更改为可变的！）

删除行后，从数组中删除数据

```
[myDataArray removeObjectAtIndex:indexPath.row]; 
```

如果你有部分，你首先必须弄清楚你的对象在数组中的位置，但原理是一样的。

您现在可以选择通过使用数据数组的内容覆盖现有 plist 来将更改写入磁盘。

# c# - 设计：列出存储对象；访问与该对象关联的信息

> ID：14878871
> 
> 赞同：1
> 
> 时间：2013-02-14T16:00:06.647
> 
> 标签：c#, list

我有两个与我正在尝试做的事情相关的课程。

第一类：人

第 2 类：个人资料

人员具有地址、姓名、电话号码等属性...

在我的 Personal Profiles 类中，我有一个 List，用于存储已创建的 Person 的信息。

我的问题：如果我想找出地址：999 Candy Lane 的人是否存在于列表中，我是否需要为除指定地址之外的所有内容创建一个具有默认值的新人，然后在我的 .Exists 或 .Exists 中使用它。包含？或者我不应该仅仅为搜索功能创建一个新对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:02:43.923

为什么不使用 Linq：

```
theList.Where(x => x.address == "999 Candy Lane").First(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:04:01.777

如果您使用 .net 3.5+，您可以使用 linq 查询：即

```
var result = (from p in Profiles where p.Address=="bla bla" select p).FirstOrDefault(); 
```

如果没有找到匹配的人，结果将为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:08:50.187

鉴于缺失值的可能性很高，最好使用 FirstOrDefault。当然 First 和 FirstOrDefault 需要一个谓词，所以不需要使用 Where

```
var result = List.FirstOrDefault(x => x.Address == "999 Candy Lane"); 
if(result != null)
{
  ......
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T16:03:54.637

这是[`Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx).

它是这样使用的：

```
if(People.Any(p => p.Address.Equals("999 Candy Lane")))
{
    //.....
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T16:04:18.347

不，您不必为搜索创建新对象：

```
Person person = profiles.PersonsList.Where(p => p.Address == "Address here")
                                    .Select(p => p); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T16:06:39.187

您可能想使用 linq 和 lambda：

```
var candyLane = Persons.Where(x => x.Address == "999 Candy Lane").ToList(); 
```

这样做是提供一个 lambda 谓词用作选择器。把它想象成一个这样指定的匿名函数：

```
public bool CandyLaneChecker(x){
    return x.Address == "999 Candy Lane";
} 
```

其中大括号和 return 关键字被替换为 a`=>`并且`public bool CandyLaneChecker`省略了，因为这是一个匿名函数。那会离开`(x) => x.Address == "999 Candy Lane"`，我们可以在原始谓词中留下括号，但不需要它们。

或者，可以使用 linq 表达式，例如：

```
var candyLane = (from p in persons
                 where p.Profile.Address == "999 Candy Lane"
                 select p).ToList(); 
```

这看起来更像是一个数据库查询，并且对某些人来说更容易理解。

linq 表达式的优点在于您甚至可以将相同的表达式用于 XML。

# java - 如何在其他测试中重用（包括）Junit 测试块

> ID：14878873
> 
> 赞同：0
> 
> 时间：2013-02-14T16:00:10.343
> 
> 标签：java, selenium-webdriver, junit4

我对 JAVA 世界相当陌生——来自 ColdFusion 背景——并且一直在学习 Java，因为我正在学习 Selenium WebDriver /JUnit。我编写了几个测试类来测试遵循类似结构的管理功能。

```
public class myclass{

public static WebDriver driver;

@BeforeClass
public static void startDriver(){
   driver = new FirefoxDriver();
   driver.get("some url");
}

@Test
public void myLogin(){

    some login code

}

@Test
public void somefunction() {

    other admin function to test

} 
```

我的问题是——因为我所有的测试都需要用户登录——我最终不得不一遍又一遍地重复使用“mylogin”测试代码。我如何编写测试以简单地“包含”（如 ColdFusion 中的“cfinclude”标签）登录代码，以便如果对登录页面功能进行更改 - 我只需在一个地方进行更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:04:16.763

Java 没有像 ColdFusion 或 C 那样的词法包含语句。这是设计使然，因为在编译之前粘贴源代码是在模块之间共享代码的一种非常不干净的方式。

但是还有许多其他方法可以解决这个问题。这里有两个：

1.  使用封装在方法中的常用功能创建您自己的库，并在您的测试中使用该库
2.  为您的测试类添加[`setUp`和`tearDown`方法](http://etutorials.org/Programming/Java+extreme+programming/Chapter+4.+JUnit/4.6+Set+Up+and+Tear+Down/)。这些方法在您的每个测试方法之前和之后执行。请注意，测试类可以相互继承。因此，当您有许多具有相同`setUp`和`tearDown`方法的测试类时，您可以让它们扩展一个公共基类并在基类中实现这些方法一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:08:57.973

您可以在基父类中实现 myLogin() 功能，您需要在所有测试类中扩展它以在各种测试中访问此功能：

```
public abstract class MyBaseTest {
    public void myLogin() {
        <some login code>
    }
}

public class MyClass extends MyBaseTest {
    @Test
    public void somefunction() {
        super.myLogin();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:04:32.577

您可以使用[@Before](http://junit.sourceforge.net/javadoc/org/junit/Before.html)注释来完成此操作。带注释的方法将在每个 @Test 带注释的方法之前运行。同样，如果需要，您可以在每次单元测试后使用[@After](http://junit.sourceforge.net/javadoc/org/junit/After.html)注销。

# c# - C# Windows Phone XML.Linq - 填充静态变量

> ID：14878874
> 
> 赞同：1
> 
> 时间：2013-02-14T16:00:16.850
> 
> 标签：c#, linq, windows-phone-7, linq-to-xml, xelement

我最近进入了 C# 和 windows phone 应用程序，我目前正在开发用户登录系统。登录、注册等与一些简单的网络调用一起工作。

我想创建一些全局变量；用户名、电子邮件、ID 和 isAdmin。我使用过 XML.Linq，并且在网页上生成的 XML 表中找到了正确的信息。

但是，当我尝试将 XML 表中的信息填充到变量中时，它返回 null。

我创建了一个包含以下内容的静态类：

```
public static class userSettings {

    public static string Username { get; set; }
    public static string Email    { get; set; }
    public static int Id          { get; set; }
    public static int IsAdmin     { get; set; }

    public static Boolean getSettings(string username)
    {
        WebClient client = new WebClient();
            client.DownloadStringAsync(new Uri("http://localhost/app/req.php?action=userAdmin&username=" + username));
            client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
        return true;
    }   
    static void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null && !e.Cancelled)
        {
            string registerResponse = (string)e.Result;
            XDocument response = XDocument.Parse(registerResponse);

            foreach (XElement xe in response.Descendants("User"))
            {
                Username    =  (string)xe.Element("Username");
                Email       =  (string)xe.Element("Email");
                Id          =  (int)xe.Element("Id");
                IsAdmin     =  (int)xe.Element("isAdmin"); 
            }
        }

    }
} 
```

然后当我调用 userSettings.Username 时，内容只是 NULL。

我做错了什么？

编辑：在登录页面上调用 getSettings。

最好的，尼古拉

# c++ - 使用类模板在类中编写类时的正确样式

> ID：14878875
> 
> 赞同：0
> 
> 时间：2013-02-14T16:00:18.693
> 
> 标签：c++, coding-style

我的标题有点混乱，让我解释一下。我已经编写了一个类似模板类的链接，以便它可以接受 c++ 中的数据类型（我基本上重写了 std::list 但使用单链表），但是现在我试图在我的 List 模板中定义一个子类 Iterator ，我在很大程度上了解如何实现所有这些，我的问题是关于正确的编码风格。我理解模板我无法将我的类分解成一个单独的头文件和源文件，好的，所以我定义了这个类，在那里放了一些函数模板，然后在下面写了函数......很酷，但现在关于我的子类迭代器，我应该在哪里为这些函数编写代码，不会有太多所以我应该在类中简单地编写它吗？或者我应该把它写在我的列表类之外，但在同一个文件中？如果是这样，我该怎么做，约定 GenList::Iterator::next() 会起作用吗？还是会是别的东西（GenList 是我的链表类，而 next() 将是我为 Iterator 编写的函数）？或者我应该在 GenList 之外但在同一个头文件上定义我的迭代器？如果不清楚，请要求澄清任何部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:14:09.400

风格问题是题外话，你使用的编码风格取决于你。如果要在类定义之外定义迭代器类型的成员函数，则语法为：

```
template<typename T>
  GenList<T>::Iterator
  GenList<T>::Iterator::operator++(int)
  {
    Iterator tmp(*this);
    // increment *this
    return tmp;
  } 
```

就我个人而言，我通常在类定义中定义像内联这样的小成员函数。

是否有充分的理由调用迭代器`Iterator`而不是传统的`iterator`？

# url - 使用 Varnish 更改后端的 url 但不是客户端的 url

> ID：14878877
> 
> 赞同：4
> 
> 时间：2013-02-14T16:00:28.137
> 
> 标签：url, varnish, varnish-vcl

我想将客户端网址“www.example.com/download..”操作为“one.other.com/download ...但我希望客户端上的网址保持第一个”www.example.com/download "

Varnish 3有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:09:13.467

是的，您可以使用`regsub()`VCL 中的函数轻松完成`vcl_recv`。

例如：

```
if (req.http.host ~ "^(www\.)?example\.com" && req.url~ "^/download/") {
  set req.http.host = "one.other.com";
  set req.url = regsub(req.url, "^/download/", "/");
} 
```

此示例重写对 `http://www.example.com/download/example.jpg`的访问 `http://one.other.com/example.jpg`。当然，它对用户是不可见的。

# ajax - 在一个标签中加载多个项目

> ID：14878880
> 
> 赞同：0
> 
> 时间：2013-02-14T16:00:38.510
> 
> 标签：ajax, jquery-load

我正在尝试构建一个类似“windows”的应用程序，我希望用户能够加载多个页面。目前我有以下要求：

```
// Open the Profile Search Windows
$("#MainMenuProfileButton").click(function() {
    $("#ProgramContent").load("forms/ProfileSearch.html",function() {
    // Attach Event to the Profile Search Windows
        $(".ProfileFormSearch").draggable({ handle: ".FormTopTitle" });;

    });
}); 
```

但是，当我运行该命令两次时，它不会打开第二个窗口（或将 html 附加到现有窗口），而是重新加载同一个窗口......知道如何管理这个吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:05:15.567

代替：

```
$(".ProfileFormSearch").draggable({ handle: ".FormTopTitle" }); 
```

你可以使用：

```
$(".ProfileFormSearch:not(.init)").addClass('init').draggable({ handle: ".FormTopTitle" }); 
```

这样您就可以确保不会重新初始化可拖动对象。

### 编辑：

要使用 ajax 动态加载，您应该执行以下操作：

```
$.get('forms/ProfileSearch.html', function(data){ $("#ProgramContent").append( data );  }) 
```

# json - 我可以从注释或 Spring MVC 控制器配置 Jackson JSON 漂亮打印吗？

> ID：14878890
> 
> 赞同：2
> 
> 时间：2013-02-14T16:01:02.257
> 
> 标签：json, spring, jackson, pretty-print

我在 Spring MVC 应用程序中使用 Jackson 1.9.6 (codehaus) 对我的响应主体进行 JSON 序列化，但我无法找到配置漂亮打印的方法。我能找到的所有代码示例（如[this](https://stackoverflow.com/questions/6541757/when-using-spring-mvc-for-rest-how-do-you-enable-jackson-to-pretty-print-render)和[this](https://stackoverflow.com/a/6339454/1245897)）都涉及使用`ObjectMapper`or的实例化`ObjectWriter`，但我目前没有将这些实例化用于其他任何事情。我什至不知道把这段代码放在哪里。我的所有 Jackson 配置都是通过注释被序列化为 JSON 的 POJO 来处理的。

有没有办法在注释中指定漂亮的打印？我认为他们会把它放在@JsonSerialize 中，但看起来不像。

我要序列化的类如下所示：

```
@JsonAutoDetect
@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL)
public class JSONObject implements Serializable{...} 
```

我的 Spring 控制器方法如下所示：

```
@RequestMapping(method = RequestMethod.GET)
public @ResponseBody List<Object> getMessagesAndUpdates(HttpServletRequest request, HttpServletResponse response) {
    JSONObject jsonResponse = new JSONObject();
    .
    .
    .
    //this will generate a non-pretty-printed json response.  I want it to be pretty-printed.
    return jsonResponse;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-07T05:18:43.587

我搜索并搜索了类似的东西，我能找到的最接近的是将这个 bean 添加到我的应用程序上下文配置中（注意：我使用的是 Spring Boot，所以我不能 100% 确定这将在非 Spring Boot 应用程序中按原样工作):

```
@Bean
public Jackson2ObjectMapperBuilder jacksonBuilder()
{
    Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();
    builder.indentOutput(true);
    return builder;
} 
```

在我看来，它是最干净的可用解决方案并且效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-07T05:21:28.543

将此添加为单独的答案，以便我可以格式化输出。

幸运的是，非 Spring Boot 解决方案与 Spring Boot 解决方案相差不远 :)

```
@Override
public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
    Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();
    builder.indentOutput(true).dateFormat(new SimpleDateFormat("yyyy-MM-dd"));
    converters.add(new MappingJackson2HttpMessageConverter(builder.build()));
    converters.add(new MappingJackson2XmlHttpMessageConverter(builder.createXmlMapper(true).build()));
} 
```

# wcf - 配置 SSRS 传递扩展以调用 WCF 服务

> ID：14878892
> 
> 赞同：2
> 
> 时间：2013-02-14T16:01:04.843
> 
> 标签：wcf, reporting-services

在 SQL Server Reporting Services (2008 R2) 中创建了自定义交付扩展。在自定义交付中，我正在调用 WCF 服务。我不确定将 WCF 绑定的 app.config 设置放在哪里。

已尝试将整个“system.serviceModel”部分添加到报告服务器配置文件 (rsreportserver.config) 中。还将自定义 DLL 中生成的 app.config 文件添加到报表服务器的 /bin 文件夹中。我仍然收到以下错误。

> *在 ServiceModel 客户端配置部分中找不到引用合同“我的 WCF 服务名称”的默认终结点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。*

现在我正在更改代码以通过代码创建绑定，但宁愿基于此配置文件。任何帮助是极大的赞赏。

谢谢大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T20:02:30.263

A. 我会在代码中创建一个 SSRS 服务对象的代理类。
B. 然后制作自己的包装代码来创建报告或获取报告信息。我在这里的另一个问题中解释了这一点：

[使用 ReportService2010.asmx 以编程方式从共享点导出 SSRS 报告](https://stackoverflow.com/questions/14479144/programmatically-export-ssrs-report-from-sharepoint-using-reportservice2010-asmx/14492191#14492191)

C. 然后围绕这些包装方法构建一个服务来获取您的数据。

# javascript - 自定义 dojo stackController 图标与主题按钮

> ID：14878894
> 
> 赞同：0
> 
> 时间：2013-02-14T16:01:09.153
> 
> 标签：javascript, dojo

我尝试在内容窗格上使用 iconClass: 但正如预期的那样，它是背景上的图像。有没有办法分解 stackcontroller 按钮为每个按钮分配一个自定义按钮/img？

```
<div class="left">
   <div data-dojo-type="dijit/layout/StackController" data-dojo-props="containerId:'contentStack'">
   </div>
</div>

<div class="centerPanel" data-dojo-type="dijit/layout/StackContainer" 
    data-dojo-props="region: 'center',id: 'contentStack'">
        <div data-dojo-type="dijit/layout/ContentPane" id='iconImg' title="Home" data dojo-props="iconClass: 'iconHpcc'">
            <h4>Dahsboard</h4>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:33:25.067

您在 ContentPane 定义中的“data dojo-props”中忘记了减号。它应该是“ **data-dojo-props** ”。添加它，图标就会出现！

卢西安

# c++ - OpenGL帧缓冲区非常慢

> ID：14878897
> 
> 赞同：2
> 
> 时间：2013-02-14T16:01:31.623
> 
> 标签：c++, opengl

我目前正在用 c++ 和 OpenGL 编写一个 2D 横向滚动游戏。为了获得我正在使用 SFML 的窗口，但这不应该是相关的，因为我直接使用 OpenGL 绘制了所有四边形。现在的问题是，当我使用 Framebufferobject 在其上绘制一些光照纹理，然后将其用作场景上的遮罩时，帧速率会下降。通常游戏在 60 fps 时达到其极限，但使用 fbo 时，它的速度约为 40 fps，有时甚至是 30。效果看起来不错：D 我以前从未使用过帧缓冲区，而且： [Framebuffer FBO 渲染到纹理非常慢，在 Android 上使用 OpenGL ES 2.0，为什么？](https://stackoverflow.com/questions/10729352/framebuffer-fbo-render-to-texture-is-very-slow-using-opengl-es-2-0-on-android) 似乎没有帮助。所以我的问题是：我做错了什么？或者有没有更简单的方法来达到同样的效果？我在 Ubuntu 12.04 上运行它。我的代码：

```
 void init() {
      GLuint fbo, mask; //framebufferobject and texture
      glewInit();
      glGenTextures(1, &mask);
      glBindTexture(GL_TEXTURE_2D, mask);
      glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER, GL_NEAREST);
      glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER, GL_NEAREST);
      glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, 1024, 600, 0, GL_RGBA, GL_UNSIGNED_BYTE,
      0);
      glGenFramebuffers(1, &fbo);
      glBindFramebuffer(GL_FRAMEBUFFER, fbo);
      glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, mask,
      0);
      glClearColor(darkness, darkness, darkness, 1);
      if (glCheckFramebufferStatus(GL_FRAMEBUFFER) !=
      GL_FRAMEBUFFER_COMPLETE)CMain::game.usefbo = false;
      glBindFramebuffer(GL_FRAMEBUFFER, 0);
    }

    void render() {
      //render usual stuff, then
      glBindFramebuffer(GL_DRAW_FRAMEBUFFER, fbo);
      glClear(GL_COLOR_BUFFER_BIT);
      glPushAttrib(GL_VIEWPORT_BIT);
      glViewport(0, 0, 1024, 600);
      glBlendFunc(GL_SRC_COLOR, GL_ONE);
      //render lights
      glPopAttrib();
      glBindFramebuffer(GL_FRAMEBUFFER, 0);
      glBlendFunc(GL_DST_COLOR, GL_SRC_COLOR);
      //render fbo over the screen:
      glBindTexture(GL_TEXTURE_2D, mask);
      glTranslatef(0, 0, 9);
      glBegin(GL_QUADS);
        glTexCoord2f(0, 0);     glVertex2i(0, 0);
        glTexCoord2f(0, 1);     glVertex2i(0, 600);
        glTexCoord2f(1, 1);     glVertex2i(1024, 600);
        glTexCoord2f(1, 0);     glVertex2i(1024, 0);
      glEnd();
      glLoadIdentity();
      glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
      //display
    } 
```

编辑：在 //render 灯光处，三个灯光纹理（圆形、径向、黑白）通过 glBegin(GL_QUADS) 等渲染到 ​​fbo。当然稍后我想使用更多灯光。我需要每帧刷新 fbo，因为灯光正在移动并相互重叠。

渲染灯：

```
for(std::vector<LightSource*>::iterator it = lights.begin(); it != lights.end(); it++) {
    (*it)->draw();
} 
```

其中lights 是LightsSources 的向量。光源::draw():

```
void LightsSource::draw() {
  if (visible()) {
      if (activated) {
          glTranslatef(this->x, this->y, 0);
          glBindTexture(GL_TEXTURE_2D, this->texture);
          glBegin(GL_QUADS);
              glTexCoord2f(0, 0);     glVertex2i(0, 0);
              glTexCoord2f(0, 1);     glVertex2i(0, height);
              glTexCoord2f(1, 1);     glVertex2i(width, height);
              glTexCoord2f(1, 0);     glVertex2i(width, 0);
          glEnd();
          glLoadIdentity();
      }
  }
} 
```

可见（）和激活通常是真的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:07:41.600

您使用的是哪种 GPU？
我现在唯一看到的是您使用的是纹理格式“GL_RGBA”而不是“GL_BGRA”，后者被认为是许多 GPU 上最快的格式。因此，如果您的 GPU 非常旧，那可能就是问题所在。

# jquery - jquery spservices

> ID：14878902
> 
> 赞同：0
> 
> 时间：2013-02-14T16:01:44.633
> 
> 标签：jquery, sharepoint-2010, spservices

我使用 jquery/javascript 在 sharepoint2010 基础中编写脚本。这是一个关于 jquery spservices 的问题。

我试图从列表中获取字段值并使用另一个列表中的值。

```
$().SPServices({
  operation: 'GetListItems',
  async: false,
  listName: 'Bedrijven',
  CAMLRowLimit: 10,
  CAMLQuery: _queryCompanie,
  CAMLViewFields: "<ViewFields><FieldRef Name='WorkPhone'/><FieldRef Name='WorkCity' /><FieldRef Name='Title' /></ViewFields>",
  completefunc: function(xData, Status){
    $(xData.responseXML).SPFilterNode("z:row").each(function(){
      var _itemTitle = $(this).attr('ows_Title');
      var _itemCity = $(this).attr('ows_WorkCity');

      alert('WorkCity == ' + _itemCity);
    });
  }
}); 
```

问题是，我得到了 title 字段，但我还需要 workcity 字段。但是如果我像上面那样做，当我提醒它时，我会得到未定义的结果。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:02:44.093

我只是在我的测试环境中使用联系人列表作为源运行它，它对我有用。您可能想在 Firebug 或 Fiddler 中检查返回的数据以了解发生了什么。

请注意，如果 WorkCity 列为空，您将在代码中得到未定义。项目存储稀疏。

# php - 如何从特定页面模板上的 the_content() 中删除所有带有和不带有环绕链接的图像

> ID：14878908
> 
> 赞同：0
> 
> 时间：2013-02-14T16:02:28.773
> 
> 标签：php, wordpress, dom

我正在尝试从特定页面模板中剥离所有`<img>`带有和不带有周围`<a>`标签的内容。`the_content()`我已经找到了一些解决方案，包括`preg_replace`和使用`get_the_content()`，但是在使用时`get_the_content()`没有`<p>`围绕段落。

如何过滤`the_content()`页面模板以删除所有`<a><img></a>`标签`<img>`？

我在[这里](https://stackoverflow.com/questions/14878174/strip-images-from-get-the-content-removes-also-p-tags)被建议不要使用`preg_replace`它，而是使用[DOM](http://php.net/dom)。朝着正确的方向前进会很棒，因为我是 PHP 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:52:10.807

好的，我会回答我自己的问题，但首先感谢[Gordon](https://stackoverflow.com/users/208809/gordon)将我推向正确的方向。我的结果是基于stackoverflow上的[这个](https://stackoverflow.com/questions/3804339/replace-ul-tags-with-specific-class/3804508#3804508)问题。

它使用[`DOM`](http://php.net/dom)而`preg_replace()`不像我在许多示例中看​​到的那样。
需要提到的一件事是我需要使用`get_the_content()`而不是`the_content()`因为`the_content()`回显过滤的结果。但在[codex](http://codex.wordpress.org/Function_Reference/the_content)中提示如何过滤`get_the_content()`以实现与`the_content()`.

这是执行我想要的代码：

```
$dom = new DOMDocument;
$dom->loadHTML(get_the_content());
$xpath = new DOMXPath($dom);

$nodes = $xpath->query('//img|//a[img]');
foreach($nodes as $node) {
    $node->parentNode->removeChild($node);
}
$no_image_content = $dom->saveHTML();
$no_image_content = apply_filters('the_content', $no_image_content);
$no_image_content = str_replace(']]>', ']]&gt;', $no_image_content);
echo $no_image_content; 
```

# php - 通过 PHP 发送电子邮件，英镑符号

> ID：14878916
> 
> 赞同：0
> 
> 时间：2013-02-14T16:02:44.960
> 
> 标签：php, character-encoding

我需要使用 PHP 的`mail()`功能发送电子邮件。我正在使用的代码是这样的：

```
$email_message = chunk_split(base64_encode($email_message));
$headers = "Content-Transfer-Encoding: base64\r\n\r\n";
mail($to, $subject, $email_message, $headers); 
```

电子邮件中有一个英镑符号未正确处理，即收件人收到的符号不正确。由于它与字符编码有关，我不确定如何设置它来告诉电子邮件客户端字符是如何编码的以及如何正确处理磅符号。这些信息可以放在标题中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:04:58.233

您是否正确设置了电子邮件的编码？这是通过设置完成的

> '内容类型：text/html; 字符集=utf-8'

在邮件的标题中。

如果向下滚动，这里有大量文档：http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T11:52:32.110

如果你有英镑符号出现，那么请看下面

```
$costsum = "£".$costsum;   (Does not work)
$costsum = "&pound;".$costsum; (Does not work)
$costsum = "#163;".$costsum; (Does not work) 
```

我找到的一个答案是这个！

```
$costsum = "\243".$costsum; 
```

The \243 is a pound sign in whatever encoding that is. I tried all the pages with UTF-8 and that didn't work either. It was used to email a spreadsheet.

# c# - MonoDevelop 3.1.1 can't find System.Xml.Linq

> ID：14878917
> 
> 赞同：14
> 
> 时间：2013-02-14T16:02:49.817
> 
> 标签：c#, linq, mono, monodevelop, xamarin.mobile

I just downloaded the trial version of "Mono for Android"/MonoDevelop 3.1.1 for Mac OS X. I am trying to parse some XML using XDocument. But I can't seem to find the import I need:

```
using System.Xml.Linq; 
```

I get the following error:

```
The type or namespace name 'Linq' does not exist in the namespace 'System.xml'. Are you missing an assembly reference? 
```

Opening System.Xml reference under References in Solution Explorer shows that there are no Linq in it:

```
System.Xml
 - References
   - mscorlib
   - System
 - System.Xml
 - System.Xml.Schema
 - System.Xml.Serialization
 - System.Xml.XPath
 - System.Xml.Xsl 
```

Any ideas?

**Edit: More info:**

*   Runtime: Mono 2.10.9 (tarball)

*   Mono for Android: 4.4.55 (Evaluation)

*   Monotouch: Xamarin.Mac: Not Installed

*   Operating System: Mac OS X 10.8.2

System.Xml:

*   [assembly: AssemblyVersion ("2.0.5.0")]

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-14T16:08:42.467

You need to add the `System.Xml.Linq` assembly to your project references; the `System.Xml.Linq` isn't in `System.Xml`, but has an assembly of itself.

Right click `References` in your solution window, and select `Edit References`. Add `System.Xml.Linq` there.

![enter image description here](../Images/8f5463d2da675ba4d16047d5977d4edd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-30T10:56:19.623

on the commandline

```
mcs /reference:System.Xml.Linq.dll ... 
```

works for me

# javascript - 将 xml 节点转换为字符串

> ID：14878920
> 
> 赞同：0
> 
> 时间：2013-02-14T16:02:57.160
> 
> 标签：javascript, xml

我正在使用 jquery 从服务器获取 xml 答案，我需要将其子节点之一作为字符串以进一步使用它。这是我的代码：

```
function pollServer(dataObject) {
    $.ajax({
        type: "POST",
        url: '/server.php',
        data: dataObject,
        success: function (data) {
            $xmlDoc = $(data);
            $listen = $xmlDoc.find('listen');
            console.log($listen);
        },
        dataType: 'xml'
    });
} 
```

我已经尝试过使用`(new XMLSerializer()).serializeToString(listen)`，但这给了我一个空字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:05:19.877

以下应该适用于 XML：

```
var listen = $("listen", data)[0].outerHTML; 
```

# c# - 返回虚函数中派生最多的类的新实例

> ID：14878922
> 
> 赞同：1
> 
> 时间：2013-02-14T16:03:02.620
> 
> 标签：c#, inheritance, constructor, overriding

我有一个实现的更清洁的类，`IDataReader`它的作用是过滤任何`DateTime`超出 SQL Server`DateTime`范围的值并返回`DBNull`（这个类的输出被输入到 a[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)并且我的数据源可以返回 1/ 1/1753)

我的问题是接口的函数之一返回一个新的`IDataReader`，我想要的是任何派生类都不需要重写该函数来返回一个新对象本身。这是一个例子

```
public class SqlServerDataCleaner : IDataReader
{
    public SqlServerDataCleaner(IDataReader dataSource)
    {
        this.dataSource = dataSource;
        //(Snip)
    }

    //(Snip)

    public virtual IDataReader GetData(int i)
    {
        return new SqlServerDataCleaner(dataSource.GetData(i));
    }

}

class SqlServerDataCleanerDerived : SqlServerDataCleaner
{
    public SqlServerDataCleanerDerived (IDataReader dataSource) 
        : base(dataSource)
    {
    }

    //(Snip)

    //Need to return the correct class
    public override IDataReader GetData(int i)
    {
        return new SqlServerDataCleanerDerived (dataSource.GetData(i));
    }

} 
```

有什么方法可以消除对覆盖的需要，`GetData`以便父类将自动在其副本中创建该类的最派生形式`GetData`（假设所有派生类将始终具有`Classname(IDataReader)`构造函数）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:11:29.370

救援反思：

```
public virtual IDataReader GetData(int i)
{
  return (IDataReader)Activator.CreateInstance(GetType(), dataSource.GetData(i));
} 
```

[GetType](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)总是返回当前实例的类型，即对于`SqlServerDataCleaner`它返回的实例`typeof(SqlServerDataCleaner)`和对于`SqlServerDataCleanerDerived`它返回的实例`typeof(SqlServerDataCleanerDerived)`。您可以将此类型传递给[Activator.CreateInstance 方法](http://msdn.microsoft.com/en-us/library/wcxyzt4d.aspx)。

# pthreads - 将openmp编译成pthreads C代码

> ID：14878928
> 
> 赞同：7
> 
> 时间：2013-02-14T16:03:21.937
> 
> 标签：pthreads, openmp

我知道 OpenMP 实际上只是一组编译成 pthread 的宏。有没有办法在编译的其余部分发生之前查看 pthread 代码？我正在使用 GCC 进行编译。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T18:27:25.093

首先，OpenMP*不是*一组简单的宏。可以看到将其简单地转换为类似 pthread 的代码，但 OpenMP 确实需要的不仅仅是运行时支持。

回到您的问题，至少在 GCC 中，您看不到 pthread 代码，因为 GCC 的 OpenMP 实现是在编译器后端（或中间端）中完成的。转换是在 IR（中间表示）级别完成的。因此，从程序员的角度来看，代码实际上是如何转换的并不容易。

不过，也有一些参考。

(1) 一位英特尔工程师对在英特尔 C/C++ 编译器中实现 OpenMP 进行了很好的概述：

[http://www.drdobbs.com/parallel/how-do-openmp-compilers-work-part-1/226300148](http://www.drdobbs.com/parallel/how-do-openmp-compilers-work-part-1/226300148)

[http://www.drdobbs.com/parallel/how-do-openmp-compilers-work-part-2/226300277](http://www.drdobbs.com/parallel/how-do-openmp-compilers-work-part-2/226300277)

（2）大家可以看一下GCC的OpenMP的实现：

[https://github.com/mirrors/gcc/tree/master/libgomp](https://github.com/mirrors/gcc/tree/master/libgomp)

See`libgomp.h`确实使用 pthread，并`loop.c`包含并行循环构造的实现。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-14T19:20:00.217

OpenMP 是一组编译器*指令*，而不是宏。在 C/C++ 中，这些指令是通过`#pragma`扩展机制实现的，而在 Fortran 中，它们是作为特殊格式的注释实现的。这些指令指示编译器执行某些*代码转换*，以便将串行代码转换为并行代码。

尽管可以将 OpenMP 实现为纯 pthreads 代码的转换，但很少这样做。OpenMP 机制的大部分通常内置在单独的运行时库中，该库作为编译器套件的一部分提供。对于 GCC，这是`libgomp`. 它提供了一组用于轻松实现 OpenMP 结构的高级函数。它也是编译器内部的，不打算供用户代码使用，即没有提供头文件。

使用 GCC，可以获得 OpenMP 转换后代码外观的伪代码表示。您必须为其提供`-fdump-tree-all`选项，这将导致编译器为每个编译单元生成大量中间文件。最有趣的是`filename.017t.ompexp`（来自 GCC 4.7.1，其他 GCC 版本的数字可能不同，但扩展名仍然是`.ompexp`）。该文件包含 OpenMP 结构被降低然后扩展为正确实现之后的代码中间表示。

考虑以下示例 C 代码，另存为`fun.c`：

```
void fun(double *data, int n)
{
   #pragma omp parallel for
   for (int i = 0; i < n; i++)
     data[i] += data[i]*data[i];
} 
```

的内容`fun.c.017t.ompexp`是：

```
fun (double * data, int n)
{
  ...
  struct .omp_data_s.0 .omp_data_o.1;
  ...

<bb 2>:
  .omp_data_o.1.data = data;
  .omp_data_o.1.n = n;
  __builtin_GOMP_parallel_start (fun._omp_fn.0, &.omp_data_o.1, 0);
  fun._omp_fn.0 (&.omp_data_o.1);
  __builtin_GOMP_parallel_end ();
  data = .omp_data_o.1.data;
  n = .omp_data_o.1.n;
  return;
}

fun._omp_fn.0 (struct .omp_data_s.0 * .omp_data_i)
{
  int n [value-expr: .omp_data_i->n];
  double * data [value-expr: .omp_data_i->data];
  ...

<bb 3>:
  i = 0;
  D.1637 = .omp_data_i->n;
  D.1638 = __builtin_omp_get_num_threads ();
  D.1639 = __builtin_omp_get_thread_num ();
  ...

<bb 4>:
  ... this is the body of the loop ...
  i = i + 1;
  if (i < D.1644)
    goto <bb 4>;
  else
    goto <bb 5>;

<bb 5>:

<bb 6>:
  return;

  ...
} 
```

为简洁起见，我省略了大部分输出。这不完全是 C 代码。它是程序流的类 C 表示。`<bb N>`是所谓的*基本块*- 语句的集合，在程序的工作流程中被视为单个块。人们看到的第一件事是并行区域被提取到一个单独的函数中。这并不少见——大多数 OpenMP 实现或多或少都进行了相同的代码转换。还可以观察到编译器插入了对和之类的函数的调用，这些`libgomp`函数用于引导然后完成并行区域的执行（稍后将删除前缀）。里面有一个循环，实现在`GOMP_parallel_start``GOMP_parallel_end``__builtin_``fun._omp_fn.0``for``<bb 4>`（注意循环本身也被扩展了）。此外，所有共享变量都被放入一个特殊的结构中，该结构被传递给并行区域的实现。`<bb 3>`包含计算当前线程将运行的迭代范围的代码。

嗯，不完全是 C 代码，但这可能是最接近 GCC 的东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T16:32:15.157

我还没有用openmp测试过。但是编译器选项`-E`应该在预处理后为您提供代码。

# java - JPA：非唯一的“OneToMany”集合

> ID：14878934
> 
> 赞同：4
> 
> 时间：2013-02-14T16:03:28.053
> 
> 标签：java, hibernate, jpa

我想映射一个“集合”。集合是用户可以根据需要分组的一组项目。

```
@Entity 
class Item {
  Long id;
  String name
}

@Entity 
class MyCollection {
  Long id;
  String name;

  @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
  Set<Item> items;
} 
```

用户应该能够将`Item`名称“foo”放入“MyCollection”名称“bar”和“MyCollection”名称“bar2”中

JPA/Hibernate 为我创建的连接表`MyCollection_Item`有 4 个索引、PK ( `MyCollection_id, Item_id`)、唯一索引 ( `Item_id`) 和 2 个外键。

我不希望它在`Item_id`. 这使我无法拥有：

`MyCollection_id, Item_Id`

`1, 1`

`1, 2`

`2, 1`

我确定这种类型的映射必须是可能的？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:19:34.897

OneToMany 是当您想要将**一个**对象映射到**多个**对象时

ManyToMany 是当你想将**许多**对象映射到**许多**对象时（就像你在这里尝试做的那样）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:06:43.280

您需要一个多对多，但您将它映射为一个单对多。

# events - 如何检测玩家何时进入全屏模式？

> ID：14878935
> 
> 赞同：0
> 
> 时间：2013-02-14T16:03:30.190
> 
> 标签：events, fullscreen, mediaelement.js

当播放器进入全屏模式时，会检测到一个事件吗？

详细信息：存在 Flash 后备

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:01:37.910

将此函数放在您的事件侦听器中：`console.log(player.isFullScreen);` 如果播放器处于全屏模式，这将打印 true。为了成功打印变量的内容，您需要动态创建播放器并将其分配给名为 player 的变量。

# c++ - Boost Spirit 和抽象语法树设计

> ID：14878938
> 
> 赞同：2
> 
> 时间：2013-02-14T16:03:37.053
> 
> 标签：c++, boost, boost-spirit, abstract-syntax-tree, boost-variant

我正在使用来自 Boost Spirit 的 Qi 来解析 VRML 1.0。有一个名为 Separator 的组节点，在 Separator 下方，可以容纳许多不同类型的节点。AST 基于 Boost.Variant，到目前为止看起来很长。我已接近变体中 20 种类型的限制。我知道我可以扩展变体的类型数量，但我确信必须有更好的方法来设计它。欢迎提出想法。

```
typedef boost::variant<
    Nil,
    Coordinate3,
    Info,
    Material,
    MaterialBinding,
    Normal,
    NormalBinding,
    Texture2,
    Texture2Transform,
    TextureCoordinate2,
    ShapeHints,
    MatrixTransform,
    Rotation,
    Scale,
    Transform,
    Translation,
    boost::recursive_wrapper<Separator>
> VRML1Node; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T07:44:43.543

**你确定你没有过早优化**吗？根据我的经验，变体的“认知开销”不会随着变体中元素类型的数量而增加^([1])

你可能想要

### [使用类型序列指定有界类型](http://www.boost.org/doc/libs/1_53_0/doc/html/variant/tutorial.html#variant.tutorial.over-sequence)

```
typedef mpl::vector< Coordinate3 > types_initial;
typedef mpl::push_front< types_initial, Nil >::type types;

boost::make_variant_over< types >::type VRML1Node; 
```

### 或者

在这种情况下，您可以选择动态多态路线，而不是使用静态多态性。

根据您的使用情况，性能不一定会受到严重影响。主要区别是

1.  要获得完全可优化的访问者代码，您需要在变体现在为您执行类型擦除的地方使用动态转换
2.  内存分配的局部性可能不太理想（尽管自定义分配器可能会减轻您的负担）
3.  实际上可能会改善存储要求（变体必须容纳最大的元素类型；当大多数元素类型实际上更小时，将有效分配更少的内存）。

    1.  在实际方面，您可能必须使用 Phoenix（语义操作）来正确分配属性

我不推荐它，但很明显你甚至可以使用`boost::any`

```
struct poorMansVariant
{
      TypeCode discriminator; // TypeCode::Nil, TypeCode::Coordinate3...
      boost::any value;
}; 
```

* * *

^([1])虽然当某些元素类型是可转换/可分配的，或者一般来说，它们的构造函数变得模棱两可时，情况可能会变得稍微复杂一些。但这是另一个话题

# iis-7.5 - iis7.5 多对一客户端证书映射导致错误状态500

> ID：14878939
> 
> 赞同：1
> 
> 时间：2013-02-14T16:03:37.207
> 
> 标签：iis-7.5, client-certificates

我们正在尝试在 IIS 7.5 中实现客户端证书身份验证。我们已经配置了多对一映射，禁用了所有其他身份验证模式，现在 cert-authentication 似乎可以正常工作：我们可以从测试 .aspx 页面正确读取证书信息，并且经过身份验证的用户名是许多配置的用户名一对一映射。

然而，即使一切*似乎*都正常工作，每个“新”浏览器会话都会在 IIS 日志中导致一个“额外”错误状态 500 行，就在身份验证成功之前：

```
#Fields: date time s-ip cs-method cs-uri-stem cs-uri-query s-port ... cs-host sc-status sc-substatus sc-win32-status time-taken
2013-02-12 09:46:35 10.40.64.45 GET /certtest.aspx - 443 - ... - site.mydomain.com 500 0 64 31
2013-02-12 09:46:35 10.40.64.45 GET /certtest.aspx - 443 - ... - site.mydomain.com 200 0 0 734 
```

任何文件都会出现相同的“额外”错误状态 500 问题，例如图像、.css、.js，因此在 certtest.aspx 文件中肯定不是问题。

任何想法，什么可能导致 IIS 中出现此错误状态 500？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:44:48.040

看来我们设法通过将 SSLAlwaysNegoClientCert 元数据库属性设置为 True 来解决此问题。

[来自 IIS6.0 (!) 管理员参考的 Technet 文章](http://technet.microsoft.com/en-us/library/cc778630%28v=ws.10%29.aspx)

# ruby-on-rails - 如何访问通过命名路由传递的对象

> ID：14878946
> 
> 赞同：1
> 
> 时间：2013-02-14T16:03:54.233
> 
> 标签：ruby-on-rails

我是一个 Rails 新手，并且有一个看似微不足道/基本的 Rails 问题。

我有一个链接，我试图在其中传递有关对象的信息：

```
<% for author in @book.authors %>
  <%= link_to "compute", special_book_path(author) %> 
```

如何访问控制器中的“作者”对象（通过特殊命名路由传递）？

我试过：

```
@author = @book.authors.find(params[:author]) 
```

但出现“找不到没有 ID 的作者”错误。

编辑：解决方案

```
special_book_path(author_id: author.id) 
```

控制器

```
params[:author_id] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:10:51.087

当你设置命名路由时，你设置了一个请求参数名称，通常`:id`，当你使用时`special_book_path(author)`，这个参数的值设置为`author.to_param`默认情况下`author.send(author.class.primary_key)`是正常`author.id`的，所以可能很简单

```
@author = Author.find(params[:id]) 
```

将工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:13:42.223

```
 <%= link_to "compute", special_book_path(author: author) %> 
```

这将只传递作者的 id 而不是作者对象。而且您不能在路线中传递对象。

在控制器中，您可以通过 params[:author] 访问传递的参数

```
 @author = @book.authors.find(params[:author]) 
```

# android - 在活动之间发送对象

> ID：14878947
> 
> 赞同：0
> 
> 时间：2013-02-14T16:04:02.013
> 
> 标签：android

我的项目中有两个活动类，第三个类是`Thread`.

`Thread`类实现`Bluetooth Socket`不是`Parcelable`.

`First Activity`开始`Second Activity`使用`startActivityforResult()`

`Second Activity`创建`Thread`类的对象并启动线程。

我需要将 Thread 对象的对象引用从 to 传递`Second Activity`给，`First Activity's onActivityResult()`以便我可以从第一个活动中访问 Thread 对象。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:08:12.003

你有几个选择。

您可以将对象分解为简单的数据类型，并将这些值作为附加值放在您传递回的意图上`setResult()`，这样做您会使用`intent.putExtra(key, value)`

或者您可以让您的数据对象实现[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)接口，以便您可以将数据对象直接添加到意图中。

执行后者的代码看起来像这样

```
Intent resultIntent = new Intent();
resultIntent.putExtra("resultObject", mObj);
setResult(ACTION_OK, resultIntent); 
```

然后在您的 onActivityResult 中，您可以像这样将其拉出：

```
data.getParcelableExtra("resultObject"); 
```

要使后一种方法起作用，您需要使用数据对象正确实现 parcelable。但是，前一种方法不需要这样做，因为您将只传回简单的值。然后，您必须采用这些简单的值并“重新膨胀”另一侧的数据对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:07:46.713

我认为实现这一目标的最佳方法是使用单例。您只能将原语存储在 Shared Preferences 和 Bundles 中。这是创建单例的一个很好的参考。

[http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html](http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html)

# mysql - 服务器监控工具 Apache/MySQL

> ID：14878949
> 
> 赞同：0
> 
> 时间：2013-02-14T16:04:05.400
> 
> 标签：mysql, apache

我的老板让我找到一个工具来监控我们的服务器健康状况。最好是某种桌面应用程序，我们可以密切关注并在容量超过一定水平时监控我们，或者我们接近最大存储空间等。

我们需要同时监控 MySQL 和 Apache。我猜我可能需要两个工具。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:10:11.587

你看过[穆宁](http://munin-monitoring.org/ "穆宁")吗？它不是桌面......但我不知道你为什么想要一个桌面解决方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T08:37:00.253

您可以使用像 mod_apache_snmp 这样的 SNMP 模块和像 OpenNMS 和 Nagios 这样的工具来监控 apache。Nagios 也支持监控 mysql。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T22:15:00.090

您可能还想看看 Megamon ( [http://www.megamon.com](http://www.megamon.com) )。Megamon 是一个完整的监控解决方案，能够绘制多个系统性能方面的图表以及升级警报等等。Megamon 不是桌面解决方案，而是作为虚拟设备运行。但是，由于它具有 Web 界面，因此它与桌面应用程序一样易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-13T10:17:39.117

看看[海狮](https://sealion.com)。SeaLion 是一个基于云的 Linux 服务器监控工具。入门就像执行命令一样简单。它在 /usr/local/sealion-agent 安装一个代理，并以非特权用户 (sealion) 的身份运行。此代理将定期跨服务器收集数据，并且这些数据将在您的工作区中可用。最新版本附带 NGINX、Apache、MySQL、MongoDB 和 Redis 监控功能。具有 12 小时数据保留政策的 1 台服务器免费。

# visual-studio-2010 - VS2010 使用 WinMerge 但 TFS2010 的 Pending Changes 选项卡使用 DiffMerge

> ID：14878951
> 
> 赞同：3
> 
> 时间：2013-02-14T16:04:07.140
> 
> 标签：visual-studio-2010, configuration

从 VS2010 开始，如果我从上下文菜单中选择比较，则会使用 WinMerge，但是在 VS（待更改选项卡）中与 TFS2010 工具进行合并时，它坚持使用很糟糕的默认 diffmerge 工具。

我在哪里配置 TFS 以使用我自己的差异/合并工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:06:16.663

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-09T03:52:33.297

[下载reg文件](http://www.neovolve.com/2007/06/19/using-winmerge-with-tfs/)，导入regedit.exe，大功告成！或者，如果您想在 Visual Studio 中手动执行此操作，请执行以下操作：

```
Click on Tools menu
Click on Options menu item
Expand Source Control tree item
Select Visual Studio Team Foundation Server tree item
Click on Configure User Tools... button 
```

比较

要将 WinMerge 用作比较/差异工具：

```
Click the Add... button
For Extension, type *
For Operation, select Compare
For Command, browse for C:\Program Files\WinMerge\WinMerge.exe
For Arguments, type /x /e /ub /wl /dl %6 /dr %7 %1 %2
Click OK to accept 
```

合并

要将 WinMerge 用作合并工具：

```
Click the Add... button
For Extension, type *
For Operation, select Merge
For Command, browse for C:\Program Files\WinMerge\WinMerge.exe
For Arguments, type /x /e /ub /wl /dl %6 /dr %7 %1 %2 %4
Click OK to accept 
```

注意：您需要在 WinMerge 合并中单击工具栏上的保存按钮以提交合并，然后才能退出屏幕

# sql - SQL SUM 不起作用 - 看来

> ID：14878954
> 
> 赞同：2
> 
> 时间：2013-02-14T16:04:08.673
> 
> 标签：sql, nested, sum

架构：

```
-- phpMyAdmin SQL Dump
-- version 3.4.5
-- http://www.phpmyadmin.net
SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";
CREATE TABLE IF NOT EXISTS `links` (
  `pageId` int(10) unsigned NOT NULL,
  `linkId` int(10) unsigned NOT NULL,
  `whenUsed` datetime NOT NULL,
  `whenRendered` datetime NOT NULL,
  KEY `pageId` (`pageId`),
  KEY `linkId` (`linkId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
INSERT INTO `links` (`pageId`, `linkId`, `whenUsed`, `whenRendered`) VALUES
(1, 9, '2013-02-14 00:44:20', '2013-02-14 00:42:39'),
(1, 9, '2013-02-14 00:44:21', '2013-02-14 00:42:39'),
(1, 9, '2013-02-14 00:44:23', '2013-02-14 00:44:21'),
(1, 8, '2013-02-14 00:44:25', '2013-02-14 00:44:23'),
(1, 7, '2013-02-14 00:44:26', '2013-02-14 00:44:25'),
(1, 6, '2013-02-14 00:44:28', '2013-02-14 00:44:26'),
(1, 3, '2013-02-14 00:44:29', '2013-02-14 00:44:26'),
(1, 7, '2013-02-14 00:44:31', '2013-02-14 00:44:29'),
(1, 8, '2013-02-14 00:44:32', '2013-02-14 00:44:31'),
(1, 11, '2013-02-14 00:44:34', '2013-02-14 00:44:32'); 
```

内部查询：

```
SELECT `linkId`, 
TIMEDIFF(`whenUsed`, `whenRendered`) AS 'URDiff', 
CONVERT(DATEDIFF(`whenUsed`, UTC_TIMESTAMP()), SIGNED) AS 'dateDiff',
CONVERT('dateDiff' = 0, UNSIGNED) AS 'usedToday',
CONVERT('dateDiff' < 8 AND 'dateDiff' > 0, UNSIGNED) AS 'usedThisWeek',
CONVERT('dateDiff' < 31 AND 'dateDiff' > 7, UNSIGNED) AS 'usedThisMonth', 
CONVERT('dateDiff' < 365 AND 'dateDiff' > 30, UNSIGNED) AS 'usedThisYear'
FROM `links` 
WHERE MINUTE('URDiff') < 15 AND HOUR('URDiff') = 0
AND `pageId` = '1'
) AS T 
```

内部查询结果：

```
+--------+----------+----------+-----------+--------------+---------------+--------------+
| linkId | URDiff   | dateDiff | usedToday | usedThisWeek | usedThisMonth | usedThisYear |
+--------+----------+----------+-----------+--------------+---------------+--------------+
|      9 | 00:01:41 |        0 |         1 |            0 |             0 |            0 |
|      9 | 00:01:42 |        0 |         1 |            0 |             0 |            0 |
|      9 | 00:00:02 |        0 |         1 |            0 |             0 |            0 |
|      8 | 00:00:02 |        0 |         1 |            0 |             0 |            0 |
|      7 | 00:00:01 |        0 |         1 |            0 |             0 |            0 |
|      6 | 00:00:02 |        0 |         1 |            0 |             0 |            0 |
|      3 | 00:00:03 |        0 |         1 |            0 |             0 |            0 |
|      7 | 00:00:02 |        0 |         1 |            0 |             0 |            0 |
|      8 | 00:00:01 |        0 |         1 |            0 |             0 |            0 |
|     11 | 00:00:02 |        0 |         1 |            0 |             0 |            0 |
+--------+----------+----------+-----------+--------------+---------------+--------------+ 
```

外部查询：

```
SELECT 
`linkId`,
SUM('T.usedToday') AS 'countToday',
SUM('T.usedThisWeek') AS 'countThisWeek',
SUM('T.usedThisMonth') AS 'countThisMonth',
SUM('T.usedThisYear') AS 'countThisYear'
FROM
(
SELECT `linkId`, 
TIMEDIFF(`whenUsed`, `whenRendered`) AS 'URDiff', 
CONVERT(DATEDIFF(`whenUsed`, UTC_TIMESTAMP()), SIGNED) AS 'dateDiff',
CONVERT('dateDiff' = 0, UNSIGNED) AS 'usedToday',
CONVERT('dateDiff' < 8 AND 'dateDiff' > 0, UNSIGNED) AS 'usedThisWeek',
CONVERT('dateDiff' < 31 AND 'dateDiff' > 7, UNSIGNED) AS 'usedThisMonth', 
CONVERT('dateDiff' < 365 AND 'dateDiff' > 30, UNSIGNED) AS 'usedThisYear'
FROM `links` 
WHERE MINUTE('URDiff') < 15 AND HOUR('URDiff') = 0
AND `pageId` = '1'
) AS T
GROUP BY `linkId` 
```

外部查询结果：

```
+--------+------------+---------------+----------------+---------------+
| linkId | countToday | countThisWeek | countThisMonth | countThisYear |
+--------+------------+---------------+----------------+---------------+
|      3 |          0 |             0 |              0 |             0 |
|      6 |          0 |             0 |              0 |             0 |
|      7 |          0 |             0 |              0 |             0 |
|      8 |          0 |             0 |              0 |             0 |
|      9 |          0 |             0 |              0 |             0 |
|     11 |          0 |             0 |              0 |             0 |
+--------+------------+---------------+----------------+---------------+ 
```

去搞清楚？从内部结果中我可以清楚地看到，对于 linkId 9，usedToday 列中有 3 行为 1（我已将它们转换为无符号，因此它们应该 SUM ok）。但是 linkId 9 的 countToday 为 0 而不是 3。为什么？

MySQL 给了我一些有趣的警告：

```
Warning (Code 1292): Truncated incorrect time value: 'URDiff'
Warning (Code 1292): Truncated incorrect time value: 'URDiff'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'dateDiff'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'dateDiff'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'dateDiff'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'dateDiff'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'dateDiff'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'dateDiff'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'dateDiff'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedToday'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisWeek'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisMonth'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisYear'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedToday'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisWeek'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisMonth'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisYear'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedToday'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisWeek'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisMonth'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisYear'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedToday'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisWeek'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisMonth'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisYear'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedToday'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisWeek'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisMonth'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisYear'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedToday'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisWeek'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisMonth'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisYear'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedToday'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisWeek'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisMonth'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisYear'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedToday'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisWeek'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisMonth'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisYear'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedToday'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisWeek'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisMonth'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisYear'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedToday'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisWeek'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisMonth'
Warning (Code 1292): Truncated incorrect DOUBLE value: 'T.usedThisYear' 
```

根据我在网上找到的有关此警告的信息，对于一些没有在姓名上使用引号的人（我在任何地方都使用引号）似乎会发生这种情况。现在为什么解析器会对引用的使用发出这样的警告呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:52:37.700

爸爸！这是有效的查询：

```
SELECT
`linkId`,
SUM(T.usedToday)ascountToday,
SUM(T.usedThisWeek)as countThisWeek,
SUM(T.usedThisMonth)as countThisMonth,
SUM(T.usedThisYear)as countThisYear
FROM

(
    SELECT `linkId`,
    TIMEDIFF(`whenUsed`, `whenRendered`) as URDiff,
    DATEDIFF(`whenUsed`, UTC_TIMESTAMP()) as `dateDiff`,
    if(DATEDIFF(`whenUsed`, UTC_TIMESTAMP()) = 0, 1, 0)as usedToday,
    if(DATEDIFF(`whenUsed`, UTC_TIMESTAMP()) < 8 AND DATEDIFF(`whenUsed`, UTC_TIMESTAMP()) > 0, 1, 0)as usedThisWeek,
    if(DATEDIFF(`whenUsed`, UTC_TIMESTAMP()) < 31 AND DATEDIFF(`whenUsed`, UTC_TIMESTAMP()) > 7, 1, 0) as usedThisMonth,
    if(DATEDIFF(`whenUsed`, UTC_TIMESTAMP()) < 365 AND DATEDIFF(`whenUsed`, UTC_TIMESTAMP()) > 30, 1, 0) as usedThisYear
    FROM `links`
    WHERE MINUTE(TIMEDIFF(`whenUsed`, `whenRendered`)) < 15 AND HOUR(TIMEDIFF(`whenUsed`, `whenRendered`)) = 0
    AND `pageId` = 1
) as T

GROUP BY `linkId` 
```

# android - 带有需要在 android 浏览器上刷新的 ajax 内容的 jquerymobile 页面

> ID：14878963
> 
> 赞同：0
> 
> 时间：2013-02-14T16:04:40.300
> 
> 标签：android, jquery, jquery-mobile

这是代码：

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>User2</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>        
        <script>

            $(document).ready(function() {                
                $.support.cors = true;
                //Uses Tasty Pie REST APIs
        $("#user2-adduser2").click(function() {data = JSON.stringify({"username":$("#user2-username").val() === ""? null:$("#user2-username").val(), "product":$("#user2-product").val() === "" || $("#user2-product").val() === "Option(s)"? null:$("#user2-product").val()})
               $.ajax({
               url: 'http://xxxxxxdomainxxxxx/api/v1/user2/?format=json',
        type: 'POST',
                           async: false,
                           contentType: 'application/json',
                           data: data,
                           dataType: 'json',
                           processData: false,
                           success: function(data){
                           alert("Done!")
                           //Goto Next Page

                      },

                      error: function(jqXHR, textStatus, errorThrown){
                          alert("Some Error!")
                          }
                     })
                });

            ////For Dynamically loading dropdown options
            $.ajax({
                type: 'GET',
                url: 'http://xxxxxxdomainxxxxx/api/v1/productapp/?format=json',            
                accepts: 'application/json',
                success: function(data){
                    var options = '<option>Option(s)</option>'
                    for(var i = 0; i < data.objects.length; ++i) {
                        var str =  '<option value="/api/v1/productapp/' + data.objects[i].id + '/">' + data.objects[i].productname + '</option>'
                        options=options+str
                    }
                    $('#user2-product').html(options).selectmenu("refresh");
                },
                dataType: "json"
                });
            });// end of document.ready function

        </script>
    </head>
    <body> 

    <div id="user2">
        <h1>User2</h1>
        <div id="user2-username-div">
            username:
            <input  type="text" id="user2-username">
        </div>
        <div id="user2-product-div">
            Product:
            <select  id="user2-product" data-native-menu="false"></select>
        </div>
        <a id="user2-adduser2" href="#" data-role="button">Add User2</a>      
    </div>

    </body>
</html> 
```

仅 android 浏览器存在问题。页面的所有静态内容正在加载。但是，任何动态内容，即在这种情况下，来自服务器的下拉选项都不会加载。如果您只刷新一次浏览器，一切正常。

今天几乎尝试了所有方法，但没有运气。非常感谢任何建议/帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:19:36.157

好的！最后我解决了这个问题。

`ajax http GET`请求不起作用，因为它们默认被缓存。因此，没有请求从移动浏览器发送到服务器。一旦我提出`cache=false`请求`$.ajax`，它就一切正常。呸！

事实上，我有两个问题。(1) 未激活多页模板的其他页面的链接，(2) 未加载 Ajax 内容。

问题（1）在我使用时得到了解决`data-ajax="false"`。问题 (2) 如前所述，当我添加请求`cache=false`时。`$.ajax`希望有一天它对某人有所帮助。谢谢

# php - PHP Mustache 2.1 部分加载不基于文件名

> ID：14878970
> 
> 赞同：5
> 
> 时间：2013-02-14T16:04:57.940
> 
> 标签：php, partial-views, mustache

有没有办法根据文件名值的数组加载部分？

目前，如果我写这个`{{> sidebar}}`，它会寻找`views/sidebar.mustache`. （基于模板加载器类，我可以在其中指定查找模板的位置）

理想情况下，我希望它`{{> sidebar}}`是一个变量名而不是文件名。

如果我传递给加载程序，我想要实现的是不基于文件名查找侧边栏部分：

```
$partials = array(
    'sidebar' => 'folder1/somefile'
); 
```

这将转化为：`views/folder1/somefile.mustache`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T17:57:29.140

您可以通过添加新的局部加载器实现轻松地做到这一点。您可以制作一个“别名加载器”，用于存储这些模板引用：

```
class FilesystemAliasLoader extends Mustache_Loader_FilesystemLoader implements Mustache_Loader_MutableLoader
{
    private $aliases = array();

    public function __construct($baseDir, array $aliases = array())
    {
        parent::__construct($baseDir);
        $this->setTemplates($aliases);
    }

    public function load($name)
    {
        if (!isset($this->aliases[$name])) {
            throw new Mustache_Exception_UnknownTemplateException($name);
        }

        return parent::load($this->aliases[$name]);
    }

    public function setTemplates(array $templates)
    {
        $this->aliases = $templates;
    }

    public function setTemplate($name, $template)
    {
        $this->aliases[$name] = $template;
    }
} 
```

然后，您可以将其设置为部分加载程序：

```
$partials = array(
    'sidebar' => 'folder1/somefile'
);

$mustache = new Mustache_Engine(array(
    'loader'          => new Mustache_Loader_FilesystemLoader('path/to/templates'),
    'partials_loader' => new FilesystemAliasLoader('path/to/partials'),
    'partials'        => $partials,
)); 
```

...或者您可以将别名传递给加载程序构造函数，或者您甚至可以稍后在加载程序或引擎实例上设置它们：

```
$loader = new FilesystemAliasLoader('path/to/partials', $partials);
$loader->setTemplates($partials);
$mustache->setPartials($partials); 
```

# php - 将我所有的 foreach 循环数据设置为一个变量，如 $results

> ID：14878977
> 
> 赞同：0
> 
> 时间：2013-02-14T16:05:14.853
> 
> 标签：php, class, foreach

我有一个简单的foreach，如下所示：

```
$range = range(1, 10);
foreach ($range as $times) {
   echo 'example' . $times . '<br>';
} 
```

什么会输出下面的结果 -

```
example1
example2
example3
example4
example5
example6
example7
example8
example9
example10 
```

而不是让`echo 'example' . $times . '<br>';` 我想回显一个变量并获得相同的结果，欢迎任何答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:07:48.490

你的意思是建立一个字符串？

```
$results = '';
foreach(range(1, 10) as $i) {
   $results .= "example${i}\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:09:06.110

如果您不想创建数组，可以执行以下操作：

```
$results = '';
$range = range(1, 10);
foreach ($range as $times) {
    $results .= "example".$times."<br />";
}
echo $results; 
```

# java - mahout - 将 mahout 集成到另一个应用程序中所需的可执行文件

> ID：14878987
> 
> 赞同：0
> 
> 时间：2013-02-14T16:06:05.057
> 
> 标签：java, mahout

我需要将 mahout 集成到桌面应用程序中。我只需要可执行文件/jar 文件吗？mahout 文件夹中的其他目录（例如 lib）呢？以下是 mahout 提取目录的内容

```
bin           docs         mahout-core-0.7.jar          mahout-math-0.7.jar
buildtools    examples     mahout-core-0.7-job.jar      math
conf          integration  mahout-examples-0.7.jar      NOTICE.txt
core          lib         mahout-examples-0.7-job.jar  README.txt
distribution  LICENSE.txt  mahout-integration-0.7.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:16:20.687

所以，我认为`executable/jar`根目录中的文件都是必需的。lib 目录已打包到`mahout-examples-0.7-job.jar`.

# javascript - 无法在 AJAX 函数中成功设置 innerHTML 或 $(this).val

> ID：14878989
> 
> 赞同：0
> 
> 时间：2013-02-14T16:06:09.437
> 
> 标签：javascript, jquery, html, ajax

使用 AJAX 我检索了 Json 信息，但是在函数期间，我无法在相关 Div 中显示文本。

正如我使用控制台看到的那样，代码一直工作到底部，但即使我将占位符文本放在 div“place”中，占位符文本在函数末尾仍然保持不变。

```
 $.each(data, function(i,item){
                if(i===0){
                    var placeHTML='<h2>'+item.name+'</h2>' +
                    '<p>where you can get <br>' +
                    'a pint of <em>'+item.pint+'</em> for only<br>' +
                    '<span>£'+item.cost+'!</span></p>';

                    window.localStorage.setItem("placeName", item.name);
                    window.localStorage.setItem("placeLoc1", item.location);
                    window.localStorage.setItem("placeLoc2", item.location2);
                    window.localStorage.setItem("placeEmail", item.email);
                    window.localStorage.setItem("placeNumber", item.number);

                    console.log("Data saved");

                    document.getElementById("place").innerHtml = placeHTML;

                    console.log("Data placed:");
                    console.log(placeHTML);

                    $("#loadText").fadeOut();
                    $('#place').fadeIn();

                    return false;
                }
            }); 
```

我也尝试过更换`document.getElementById("place").innerHTML = foo`to`$("#place").val(foo)`没有运气。

div 具有值`id="place"`和`class="place"`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:08:30.003

```
document.getElementById("place").innerHtml = placeHTML; 
```

应该

```
document.getElementById("place").innerHTML = placeHTML; 
```

用 jQuery 来做

```
$("#place").html(placeHTML) 
```

`val`将设置诸如输入字段之类的值，以使用要使用该`html()`函数的 jQuery 更改内部 HTML

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T16:07:45.273

试试这个：

```
$("#place").html(foo) 
```

或者

```
$("#place").text(foo) 
```

此外，它不是`innerHtml`，它应该在`innerHTML`这里：

将其更改为：

```
document.getElementById("place").innerHTML = placeHTML; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:10:15.833

这条线错了，

```
document.getElementById("place").innerHtml = placeHTML; 
```

更改`innerHtml`为`innerHTML`（HTML 应为大写），

```
document.getElementById("place").innerHTML = placeHTML; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T16:10:00.327

可以尝试使用

```
$("#place").html(placeHTML); 
```

# xml - TSQL - 查询 XML 并合并根节点

> ID：14878990
> 
> 赞同：0
> 
> 时间：2013-02-14T16:06:11.563
> 
> 标签：xml, tsql, sql-server-2005, xml-parsing, xquery

我正在尝试以以下格式构建 XML（我们的提供程序没有 XSD）：

```
<Submission>
<Office Account="ACCOUNT">
    <schedule submissionPeriod="" areaOfLaw="" scheduleNum="abc">
        <outcome matterType="A:B">
            <outcomeItem Name="CASE_START_DATE">DATA</outcomeItem>
            <outcomeItem Name="CASE_ID">DATA</outcomeItem>
        </outcome>
        <outcome matterType="C:D">
            <outcomeItem Name="CASE_START_DATE">DATA</outcomeItem>
            <outcomeItem Name="CASE_ID">DATA</outcomeItem>
        </outcome>
    </schedule>
    <schedule submissionPeriod="" areaOfLaw="" scheduleNum="def">
        <outcome matterType="E:F">
            <outcomeItem Name="CASE_START_DATE">DATA</outcomeItem>
            <outcomeItem Name="CASE_ID">DATA</outcomeItem>
        </outcome>
    </schedule>
</Office>
<Office Account="ACCOUNT2">
    <schedule submissionPeriod="" areaOfLaw="" scheduleNum="ghi">
        <outcome matterType="A:B">
            <outcomeItem Name="CASE_START_DATE">DATA</outcomeItem>
            <outcomeItem Name="CASE_ID">DATA</outcomeItem>
        </outcome>
    </schedule>
</Office> 
```

我有以下 SQL

```
SELECT  supplier_no AS 'Office/@Account' ,
    UPPER(LEFT(DATENAME(MM, GETDATE()), 3)) + '-' + DATENAME(YYYY,
                                                          GETDATE()) AS 'Office/schedule/@submissionPeriod' ,
    'LEGAL HELP' AS 'Office/schedule/@areaOfLaw' ,
    supplier_no + '/CIVIL' AS 'Office/schedule/@scheduleNum' ,
    ClaimsTable.mattype1_code + ':' + ClaimsTable.mattype2_code AS 'Office/schedule/outcome/@matterType' , 
    (SELECT * FROM ( 

                  SELECT 'CASE_START_DATE' AS 'outcomeItem/@Name', 'DATA' AS 'outcomeItem' UNION ALL
                  SELECT 'CASE_ID' AS 'outcomeItem/@Name',  'DATA' AS 'outcomeItem'

                ) OutcomeItems FOR XML PATH(''), TYPE) AS 'Office/schedule/outcome'

FROM    ContractsTable
    LEFT OUTER JOIN ClaimsTable ON ContractsTable.contract_no = ClaimsTable.contract_no
WHERE   ClaimsTable.compno = 2
    AND ClaimsTable.submitted_period = 0
FOR     XML PATH('Submission') ,
        TYPE 
```

生成以下 XML

```
<Submission>
  <Office Account="MHESUPPLIE">
<schedule submissionPeriod="FEB-2013" areaOfLaw="LEGAL HELP" scheduleNum="MHESUPPLIE/CIVIL">
  <outcome matterType="MHNS:MOUT">
    <outcomeItem Name="CASE_START_DATE">13/02/2013</outcomeItem>
    <outcomeItem Name="CASE_ID">001</outcomeItem>
  </outcome>
</schedule>
  </Office>
</Submission>
<Submission>
  <Office Account="MHESUPPLIE">
<schedule submissionPeriod="FEB-2013" areaOfLaw="LEGAL HELP" scheduleNum="MHESUPPLIE/CIVIL">
  <outcome matterType="MHAS:MGUA">
    <outcomeItem Name="CASE_START_DATE">14/02/2013</outcomeItem>
    <outcomeItem Name="CASE_ID">001</outcomeItem>
  </outcome>
</schedule>
  </Office>
</Submission> 
```

显然，输出 XML 有多个无效的根节点。我试图找到一种方法将结果组合在一起以实现我需要的 XML 类型。关于如何在 SQL Server 2005+ 上实现这一点有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:34:15.570

我简化了你的查询。假设您的查询如下所示：

```
SELECT STR(X) AS [office/schedule]
FROM (VALUES(1),(2)) AS CompleQuery(x)
FOR XML PATH('Submission'),TYPE; 
```

这会产生：

```
<Submission><office><schedule> 1</schedule></office></Submission><Submission><office><schedule> 2</schedule></office></Submission> 
```

要将两个 office 标签合并到一个提交中，请改用：

```
SELECT (
SELECT STR(X) AS [office/schedule]
FROM (VALUES(1),(2)) AS CompleQuery(x)
FOR XML PATH(''),TYPE
  )
FOR XML PATH('Submission'),TYPE; 
```

因此，在您的查询中更改`PATH('Submission')`为`PATH('')`，然后将其包装到另一个`SELECT ... FOR XML PATH('Submission'),TYPE;`

结果：

```
<Submission><office><schedule> 1</schedule></office><office><schedule> 2</schedule></office></Submission> 
```

# php - MySQL语句按数值变量值升序列出

> ID：14878996
> 
> 赞同：0
> 
> 时间：2013-02-14T16:06:22.807
> 
> 标签：php, mysql, wordpress

我试图通过一个名为“wpcf-range”的特定变量来排序一个列表，它是数字的，它需要列出 ASC。这是针对 WordPress 网站的，但之前的开发人员使用的是 MySQL 语句，而不是使用 WordPress 的方式，因此让我的初学者大脑感到困惑。请参阅下面的代码，任何帮助将不胜感激...

```
$listing = $wpdb->get_results("SELECT SQL_CALC_FOUND_ROWS * FROM wp_posts INNER JOIN wp_term_relationships ON wp_term_relationships.object_id = wp_posts.ID WHERE wp_term_relationships.term_taxonomy_id = '" . $term->term_taxonomy_id . "' LIMIT " . $start . ", " . $limit); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:17:16.197

如果`wpcf-range`是表中的一列，那么您可以在 sql 查询文本中`wp_posts`添加一个子句，在子句之前，例如`ORDER BY``LIMIT`

```
... $term->term_taxonomy_id . "' ORDER BY `wpcf-range` LIMIT " . $start . ...
                                 ^^^^^^^^^^^^^^^^^^^^^^ 
```

（注意：列名中包含破折号有点奇怪，这使我怀疑这可能不是表中的列`wp_posts`。如果确实包含破折号，则需要附上对该列的引用name in backticks. 它需要包含在反引号中，否则，MySQL 会将破折号视为减法运算符。

如果的数据类型`wpcf-range`是字符类型而不是数字类型，那么您可以通过向其添加零来将其转换为数字...

```
ORDER BY `wpcf-range`+0 
```

如果这不是表中列的名称（并且我们无法从您的问题中提供的信息中分辨出来......如果它是一个列名还是一个表达式......我们不能判断 wp_posts 是否包含两个名为`wpcf`and的数字列，`range`这样您的意思是从另一个中减去一个，并按结果值对结果集进行排序，例如

```
ORDER BY `wpcf` - `range` 
```

如果这不是唯一的，您可能还希望在 ORDER BY 中包含其他列，以便结果集的顺序是确定的，例如

```
ORDER BY `wpcf` - `range`, post_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:17:50.070

```
$listing = $wpdb->get_results("SELECT SQL_CALC_FOUND_ROWS * FROM wp_posts INNER JOIN wp_term_relationships ON wp_term_relationships.object_id = wp_posts.ID WHERE wp_term_relationships.term_taxonomy_id = '" . $term->term_taxonomy_id . "' ORDER BY wpcf-range ASC LIMIT " . $start . ", " . $limit); 
```

# c# - 为什么 RazorEngine 会动态编译带有匿名类型模型的模板？

> ID：14878997
> 
> 赞同：5
> 
> 时间：2013-02-14T16:06:26.253
> 
> 标签：c#, dynamic, razor, anonymous-types

我注意到 RazorEngine.Compile() 似乎将匿名类型与其他类型不同。例如，考虑以下代码：

```
public static void Main()
{
    try {
    var model = new { s = default(string) };
    RazorEngine.Razor.Compile("@Model.s.Length", model.GetType(), "a");
    RazorEngine.Razor.Run(model, "a");
    } catch (Exception ex) {
        Console.WriteLine(ex); // RuntimeBinderException (Cannot perform runtime binding on a null reference)
    }

    try 
    {
    var model = "";
    RazorEngine.Razor.Compile(@"@Model.Length", model.GetType(), "b");
    RazorEngine.Razor.Run(default(string), "b");
    } catch (Exception ex) {
        Console.WriteLine(ex); // NullReferenceException
    }

    try 
    {
    var model = Tuple.Create(default(string));
    RazorEngine.Razor.Compile(@"@Model.Item1.Length", model.GetType(), "c");
    RazorEngine.Razor.Run(model, "c");
    } catch (Exception ex) {
        Console.WriteLine(ex); // NullReferenceException
    }

        try 
    {
    var model = new Internal();
    RazorEngine.Razor.Compile(@"@Model.S.Length", model.GetType(), "d");
    RazorEngine.Razor.Run(model, "d");
    } catch (Exception ex) {
        Console.WriteLine(ex); // TemplateCompilationException (type Internal is not visible)
    }
}

internal class Internal {
    public string S { get; set; }
} 
```

我的理解是：匿名类型是内部的，所以通常 Razor 不会处理它们。但是，Razor 通过生成动态模板来为匿名类型提供特殊支持。

因此，我有两个问题：（1）我对这种行为的理解是否正确？(2) 有没有办法让剃刀为匿名模型输出强类型模板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T17:04:34.840

我的想法是让 Razor 程序集成为您程序集[的朋友程序](http://msdn.microsoft.com/en-us/library/0tke9fxk%28v=vs.80%29.aspx)集（从而使内部部件可见），但这没有奏效。在 Razor 源代码中，我们可以看到以下代码（in `CompilerServiceBase.cs`）：

```
 if (modelType != null)
 {
     if (CompilerServices.IsAnonymousType(modelType))
     {
         type.CustomAttributes.Add(new CodeAttributeDeclaration(new CodeTypeReference(typeof(HasDynamicModelAttribute))));
     }
 } 
```

然后稍后（在`TemplateBaseOfT.cs`）：

```
HasDynamicModel = GetType().IsDefined(typeof(HasDynamicModelAttribute), true); 
```

稍后在同一文件中使用：

```
if (HasDynamicModel && !(value is DynamicObject) && !(value is ExpandoObject))
    model = new RazorDynamicObject { Model = value };
else
    model = value; 
```

所以是的 - 你的理解是正确的。此外，我们可以看到使内部结构可见是不够的，因为 Razor 将任何匿名类型视为动态 ( `RazorDynamicObject`extends `DynamicObject`)。如果包含程序集的内部可见，您可以尝试修补 Razor 代码以不将匿名类型视为动态类型。

不过，在这种情况下，我认为代码必须发出一个新的公共类型，该类型包含与模型的匿名类型相同的属性，以便 Razor 生成的代码可以实例化该类型的实例。或者，您可以使用[此处](http://tomasp.net/blog/cannot-return-anonymous-type-from-method.aspx)描述的 hack来允许方法返回匿名类型的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T15:23:39.397

动态用于*允许*匿名类型。当它编译模型时，它不能引用匿名类型，因为它们在您的程序集中。考虑到这一点，Razor 解析器正在尝试生成一个继承自的模板`TemplateBase<T>`以提供强类型支持。这就是我们使用的`TemplateBase<dynamic>`原因，因为这意味着我们将对这些属性的访问权委托给 DLR，但是您会失去静态类型类的好处。

# oracle - 从具有唯一 ID 和不同日期的 oracle 中的两个表中派生一个包含键组合的表

> ID：14878999
> 
> 赞同：0
> 
> 时间：2013-02-14T16:06:26.663
> 
> 标签：oracle, plsql

嗨，我有两张桌子，一张是人，另一张是他的收入

人的表结构

```
insert into  person (person_id,start_date) values (1,02-jan);
insert into  person (person_id,start_date) values (1,03-jan);
insert into  person (person_id,start_date) values (1,04-jan);
insert into  person (person_id,start_date) values (1,14-jan); 
```

我有一个叫做收益的表，结构如下

```
insert into  earnings (person_id,start_date) values (1,01-jan);
insert into  earnings (person_id,start_date) values (1,04-jan);
insert into  earnings (person_id,start_date) values (1,10-jan);
insert into  earnings (person_id,start_date) values (1,13-jan); 
```

在这里，我必须推导出一个逻辑来开发一个表，其中包含来自人员和收入的所有值加入人员 ID 上的 2 个表，并且我还需要拥有所有收入的数据。

在这里，一个人的开始日期是记录生效之日起的生效日期，对于该人的收入也是如此。

茶几应该是这样的。很抱歉，我不能在我的问题中放入表结构，所以我给出了插入语句。

所需的表输出

```
insert into pers_earnings(person_id,person_start_date,earnings_start_date) values (1,02-jan,01-jan);

insert into pers_earnings(person_id,person_start_date,earnings_start_date) values (1,03-jan,01-jan);

insert into pers_earnings(person_id,person_start_date,earnings_start_date) values (1,04-jan,04-jan);

insert into pers_earnings(person_id,person_start_date,earnings_start_date) values (1,04-jan,10-jan);

insert into pers_earnings(person_id,person_start_date,earnings_start_date) values (1,04-jan,13-jan);

insert into pers_earnings(person_id,person_start_date,earnings_start_date) values (1,14-jan,13-jan); 
```

让我知道你的建议，以获得这个理想的输出表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:07:56.030

```
create or replace Table pers_earnings
as
Select 
person.person_id, 
person.start_date person_start_date, 
earnings.start_date earnings_start_date
from  person inner join earnings on person.person_id =  earnings.earnings_start_id
where
person_start_date <= earnings_start_date; 
```