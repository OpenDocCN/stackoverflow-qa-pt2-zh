# StackOverflow 问答 15097000-15097999

# android - XAPK 文件验证失败 - APK 扩展文件

> ID：15097004
> 
> 赞同：5
> 
> 时间：2013-02-26T18:51:45.167
> 
> 标签：android, apk, apk-expansion-files

我正在使用 sdks 中给出的扩展文件演示，并将 obb 文件放在 SD 卡上的以下位置：

```
/Android/obb/package-name/package-name/main.versioncode.package-name.obb 
```

但我收到以下错误：

> XAPK 文件验证失败

* * *

为了生成`.obb`文件，这是我遵循的程序：

1）将所有图像复制到一个名为的文件夹`main.versioncode.package-name.obb`，然后压缩该文件。

2）删除 .zip 文件扩展名并将其放在此`/Android/obb/package-name/myobbfile.obb`

这是正确的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-26T07:04:17.170

这是您需要完成的方法

1）您可以将图像放在您想要的任何自定义命名文件夹中。例如`myimages`。

2) 将所有这些图像放入一个 zip 存档中，完成后将该存档重命名为`main.versioncode.package-name.obb`

3）将该`.obb`文件放在目录中 `sdcar/Android/obb/package-name/main.versioncode.package-name.obb`

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T22:29:28.647

OBB 文件是***未压缩***的ZIP 文件，因此请确保在未压缩的情况下对其***进行压缩***。

每个 ZIP 实用程序都应该有某种压缩级别选项。

以下屏幕截图是开源的[7-ZIP](http://www.7-zip.org/) gui，`Add to Archive`我添加了一个突出显示以显示`Compression Level`设置为`Store`.

[![在此处输入图像描述](../Images/04359409a00459adeab9d996682ac01b.png)](https://i.stack.imgur.com/RnYd9.png)

* * *

另一种方法是使用[`jobb`](https://developer.android.com/tools/help/jobb.html)

> ### 用法
> 
> 运行jobb的语法如下：
> 
> ```
> jobb [-d <directory>][-o <filename>][-pn <package>][-pv <version>] \
>  [-k <key>][-ov][-dump <filename>][-v][-about] 
> ```
> 
> 您可以使用 jobb 工具创建 OBB 文件或提取现有 OBB 的内容。以下示例命令从源文件创建 OBB 文件。
> 
> ```
> $ jobb -d /temp/assets/ -o my-app-assets.obb -k secret-key -pn com.my.app.package -pv 11 
> ```
> 
> 此示例显示如何转储（提取）现有 OBB 文件的内容：
> 
> ```
> $ jobb -d /temp/obb-output/ -o my-app-assets.obb -k secret-key 
> ```

# emacs - 如何防止 Emacs 设置撤消边界？

> ID：15097012
> 
> 赞同：10
> 
> 时间：2013-02-26T18:51:59.423
> 
> 标签：emacs, elisp, undo

我编写了一个 Emacs Lisp 函数，它调用一个 shell 命令来处理给定的字符串并返回结果字符串。这是一个简化的示例，它只是调用`tr`将文本转换为大写：

```
(defun test-shell-command (str)
  "Apply tr to STR to convert lowercase letters to uppercase."
  (let ((buffer (generate-new-buffer "*temp*")))
    (with-current-buffer buffer
      (insert str)
      (call-process-region (point-min) (point-max) "tr" t t nil "'a-z'" "'A-Z'")
      (buffer-string)))) 
```

该函数创建一个临时缓冲区，插入文本，调用 `tr`，用结果替换文本，并返回结果。

上述函数按预期工作，但是，当我围绕该函数编写一个包装器以将命令应用于该区域时，将两个步骤添加到撤消历史记录中。这是另一个例子：

```
(defun test-shell-command-region (begin end)
  "Apply tr to region from BEGIN to END."
  (interactive "*r")
  (insert (test-shell-command (delete-and-extract-region begin end)))) 
```

当我调用 时`M-x test-shell-command-on-region`，该区域被替换为大写文本，但是当我按下`C-_`( `undo`) 时，撤消历史记录中的第一步是删除文本的状态。后退两步，恢复原文本。

我的问题是，如何防止将中间步骤添加到撤消历史记录中？我已经阅读了[有关 undo 的 Emacs 文档](http://www.gnu.org/software/emacs/manual/html_node/emacs/Undo.html)，但据我所知，它似乎没有解决这个问题。

这是一个函数，它通过调用内置的 Emacs 函数来完成同样的事情`upcase`，就像以前一样：在结果上 `delete-and-extract-region`，结果被传递给 `insert`：

```
(defun test-upcase-region (begin end)
  "Apply upcase to region from BEGIN to END."
  (interactive "*r")
  (insert (upcase (delete-and-extract-region begin end)))) 
```

调用`M-x test-upcase-region`时，正如预期的那样，撤消历史记录中只有一步。因此，调用似乎是 `test-shell-command`创建撤消边界的情况。可以以某种方式避免吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T11:36:31.160

关键是缓冲区名称。请参阅[维护撤消](http://www.gnu.org/software/emacs/manual/html_node/elisp/Maintaining-Undo.html#Maintaining-Undo)：

> 在新创建的缓冲区中记录撤消信息通常可以开始；但如果**缓冲区名称以空格开头，撤消记录最初是禁用的**。您可以使用以下两个函数显式启用或禁用撤消记录，或者自己设置 buffer-undo-list。

`with-temp-buffer`创建一个名为`␣*temp*`（注意前导空格）的缓冲区，而您的函数使用`*temp*`.

要删除代码中的撤消边界，请使用带有前导空格的缓冲区名称，或者使用`buffer-disable-undo`.

但一般来说，使用`with-temp-buffer`，真的。这是 Emacs 中此类事情的标准方式，让任何阅读您的代码的人都清楚您的意图。此外，`with-temp-buffer`努力正确清理临时缓冲区。

* * *

至于为什么临时缓冲区中的撤消会在当前缓冲区中创建撤消边界：如果先前的更改是可撤消的并且是在其他缓冲区（本例中为临时缓冲区）中进行的，则会创建隐式边界。来自[`undo-boundary`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Undo.html#Undo)：

> 每当在**其他缓冲区**中进行先前的可**撤消更改**时，所有缓冲区修改都会**添加一个边界**。这是为了确保每个命令在它进行更改的每个缓冲区中都有一个边界。

 ****因此，在临时缓冲区中禁止撤消也将删除当前缓冲区中的撤消边界：先前的更改根本无法再撤消，因此不会创建隐式边界。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-10T08:57:05.500

在许多情况下使用临时缓冲区是不切实际的。例如，很难调试正在发生的事情。

在这些情况下，你可以 let-bind`undo-inhibit-record-point`阻止 Emacs 决定在哪里放置边界：

```
(let ((undo-inhibit-record-point t))
  ;; Then record boundaries manually
  (undo-boundary)
  (do-lots-of-stuff)
  (undo-boundary)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T19:52:49.947

在这种情况下，解决方案是使用创建临时输出缓冲区`with-temp-buffer`，而不是使用 显式创建一个 `generate-new-buffer`。第一个函数的以下替代版本不会创建撤消边界：

```
(defun test-shell-command (str)
  "Apply tr to STR to convert lowercase letters to uppercase."
  (with-temp-buffer
    (insert str)
    (call-process-region (point-min) (point-max) "tr" t t nil "'a-z'" "'A-Z'")
    (buffer-string))) 
```

我无法确定是否`generate-new-buffer`确实创建了撤消边界，但这解决了问题。 `generate-new-buffer`调用`get-buffer-create`，这是在 C 源代码中定义的，但我无法快速确定在撤消历史方面发生了什么。

我怀疑这个问题可能与[Emacs Lisp 手册条目中的以下段落有关`undo-boundary`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Undo.html)：

> 每当在其他缓冲区中进行先前的可撤消更改时，所有缓冲区修改都会添加一个边界。这是为了确保每个命令在它进行更改的每个缓冲区中都有一个边界。

尽管`with-temp-buffer`宏`generate-new-buffer` 在原始函数中调用得很多，但文档 `with-temp-buffer`声明没有保存撤消信息（即使 Emacs Lisp 源代码中没有任何内容表明会出现这种情况）：

> 默认情况下，撤消（请参阅撤消）不会记录在此宏创建的缓冲区中（但如果需要，主体可以启用它）。****

# android - 解决 Drive 和 Dropbox 依赖冲突的安全方法？

> ID：15097015
> 
> 赞同：6
> 
> 时间：2013-02-26T18:52:12.583
> 
> 标签：android, google-drive-api

我想将我的应用程序与各种文件存储服务集成。我按照 Drive sdk 的快速入门说明进行操作，它将一堆 jars 添加到我的项目 libs 目录中。此外，Dropbox sdk 需要以下 jar 列表：

*   commons-logging-1.1.1.jar
*   dropbox-android-sdk-1.5.3.jar
*   httpclient-4.0.3.jar
*   httpcore-4.0.1.jar
*   httpmime-4.0.3.jar
*   json-simple-1.1.jar

一旦所有这些都添加到我的项目中，当我尝试运行时出现以下错误：

> Dex Loader] 无法执行 dex：多个 dex 文件定义 Lorg/apache/http/entity/mime/FormBodyPart；

如果我删除为 Dropbox 添加的 httpmime jar，我的项目运行良好。但这是解决冲突的安全方法吗？是否有另一种方法可以构建我的项目并包含所有必需的 jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:13:04.997

假设没有版本冲突，这将正常工作。将 httpmime-4.0.3.jar 与 Drive 添加到您的 libs 目录的 httpmime jar 进行比较。如果它们相同，那很好。如果它们不同，那么您必须找出两者之间的差异并确保它们不会破坏更改。作为最后的手段，您还可以将其中一个 SDK 及其所需版本的 httpmime 重新打包到一个用 ProGuard 选择性地混淆的 jar 中，尽管这很麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:32:06.990

如果您使用 Eclipse 进行开发，请考虑使用 Google Plugin for Eclipse。它提供了一种将任何 Google 的 SDK 添加到您的应用程序的方法。所有的罐子都是自动添加的。

# java - HBase：什么是 NotServingRegionException？

> ID：15097022
> 
> 赞同：8
> 
> 时间：2013-02-26T18:52:28.193
> 
> 标签：java, hadoop, nosql, database-connection, hbase

`NotServingRegionException`HBase 中有什么？

我的 HBase 集群一直运行良好，但在过去的几天里，不断弹出如下奇怪的错误消息：

> 180 次操作失败：NotServingRegionException：180 次，有问题的服务器：xyza:60020，

我正在使用 Thrift 将数据插入 HBase。看起来大多数数据插入正常，但作业仍然抛出这个“错误”。

在网上搜索发现这个异常可能与区域拆分有关，但是如何修复 HBase 或我的脚本，以便不再抛出这个异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-19T18:05:33.140

如果您经常看到这种情况，看起来您的区域在区域服务器之间被分割/移动的频率太高了。

考虑预先创建区域或使用自定义区域拆分策略。

请注意默认区域分割策略从 HBase 0.94 开始更改，我花了一些时间来了解这个问题。这是[正确的文章](http://hortonworks.com/blog/apache-hbase-region-splitting-and-merging/)，您需要“自动拆分”章节。

# asp.net-mvc - 无法单击要接受的按钮

> ID：15097027
> 
> 赞同：0
> 
> 时间：2013-02-26T18:52:41.223
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我目前有以下形式的链接：

```
<a href="javascript:changeNumbers('Numbers', '@Url.Action("ChangeNumbers")')">Change</a> 
```

为了适应我添加此链接的网站的外观，我想将其更改为按钮输入，如下所示：

```
<input type="button" value="Change" onclick="changeNumbers('Numbers', '@Url.Action("ChangeNumbers")')" /> 
```

但是，我遇到了第二种形式的障碍：周围的单引号`@Url.Action("ChangeNumbers")`被标记为`Unterminated string constant`. 谁能告诉我我做错了什么以及如何解决？

**编辑**

我没有想到只是尝试该页面 - 看起来第二种形式有效。所以现在我的问题是 - 为什么 Visual Studio 将其标记为不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:01:32.163

您本身并没有做任何“不正确”的事情，只是 Razor 并不完美，引号中的引号之类的东西往往会导致它发疯。

一种快速解决方法是将 URL 存储在变量中，然后使用该变量：

```
@{ var url = Url.Action("ChangeNumbers"); }
<input type="button" value="Change" onclick="changeNumbers('Numbers', '@url')" /> 
```

但是，更好的解决方法是根本不使用该`onclick`属性。把它放在它所属的地方：在 JS 中。

```
<script>
    $('#myButton').on('click', function () {
        changeNumbers('Numbers', '@Url.Action("ChangeNumbers")');
    });
</script> 
```

*上面使用了 jQuery，因为它默认包含在 MVC 中*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T22:40:30.250

我发现要让 Visual Studio 在这种情况下满意，最简单的方法就是将`<input />`元素更改为`<button></button>`元素，错误就会自行解决：

```
<button type="button" onclick="changeNumbers('Numbers', '@Url.Action("ChangeNumbers")')">Change</button> 
```

否则，要继续使用`<input />`标记将需要更改为以下内容：

```
<input type="button" value="Change" onclick="@("changeNumbers('Numbers', '" + Url.Action("ChangeNumbers") + "')")" /> 
```

# video - Youtube播放器代码识别

> ID：15097030
> 
> 赞同：0
> 
> 时间：2013-02-26T18:52:57.650
> 
> 标签：video, youtube-api, embed, playlist, shockwave

我需要修改以下代码以适应另一个 Youtube 播放列表或一组视频。所有 API 选项都请注意 youtube.com/v/ 或仅使用 iframe。此代码与 Youtube 一致，如何修改信息以显示我选择的视频分组？

`<object width="746" height="413" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="src" value="http://www.youtube.com/cp/vjVQa1PpcFNjzNDvQMfltuY8R7M_XEXZ7YRz2wgBe1I=" /><embed width="746" height="413" type="application/x-shockwave-flash" src="http://www.youtube.com/cp/vjVQa1PpcFNjzNDvQMfltuY8R7M_XEXZ7YRz2wgBe1I=" /></object>`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:35:19.560

您使用的是 YouTube 自定义播放器。这已经被弃用了几年：[http ://apiblog.youtube.com/2011/06/sunsetting-custom-player.html](http://apiblog.youtube.com/2011/06/sunsetting-custom-player.html)

该博客文章中还提到了其他一些用于共享播放列表的选项。

# ruby-on-rails - Rails：想根据其ID显示子类的内容

> ID：15097032
> 
> 赞同：0
> 
> 时间：2013-02-26T18:53:01.740
> 
> 标签：ruby-on-rails, subclass, matching

我已将我的代码更新如下：

```
class CreateAddresses < ActiveRecord::Migration
 def self.up
 create_table :addresses do |t|
  t.integer :address_type_id
  t.text :street
  t.string :city
  t.string :state, :limit => 2
  t.integer :zip
  t.references :entry

  t.timestamps
 end
  add_index :addresses, :entry_id
...

class CreateAddressTypes < ActiveRecord::Migration
  def self.up 
  create_table :address_types do |t|
  t.string :name
end 
```

我的模型：

```
class AddressType < ActiveRecord::Base 
 has_many :addresses 
 attr_accessible :name 
end

class Entry < ActiveRecord::Base
  has_many :addresses
  attr_accessible :email, :first_name, :last_name
end
class Address < ActiveRecord::Base
  belongs_to :entry
  belongs_to :address_type
  attr_accessible :city, :state, :street, :zip
end 
```

还有我的 _form 文件：

```
 ...
 .form-inputs
= f.collection_select (:address_type_id, AddressType.all, :id, :name)
= f.input :street
= f.input :city 
```

在我点击“创建”后，错误提示“无法批量分配受保护的属性：address_type_id”。我知道我必须在某个地方犯一些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:59:56.937

根据您的对象关系，您可以执行以下操作：

```
# in view (HAML)
%th Address Type
%td= address.address_type.name 
```

也许（取决于您希望它如何工作）有时一个地址不会有与之链接的地址类型。为了支持这一点并防止出现 Nil 异常，您可以执行以下操作：

```
# in view (HAML)
%th Address Type
%td= address.address_type.try(:name) 
```

该`try`方法的名称是明确的：它将尝试调用该方法（此处`name`）到 AddressType 对象。如果此方法`nil`响应或不响应该`name`方法，它将返回`nil`并且不会为 Nil:NilClass 引发 NoMethodError。

**您的关系设置不正确：**

一个地址只能有一个（最大）地址类型。另一方面，地址类型可以设置为零、一个或多个地址。这意味着，在 Rails 中（以及通用语言，易于阅读和理解）：

*   一个地址`belongs_to`一个地址类型
*   AddressType`has_many`地址

这些关系可以设置如下：（我去掉了不相关的其他语句）

```
class Address < ActiveRecord::Base
   belongs_to :address_type
end

class AddressType < ActiveRecord::Base
    has_many :addresses # note: Rails need plural relations for has_many
end 
```

这意味着地址表将有一个名为的列，该列`address_type_id`将引用特定的地址类型（家庭、工作或其他）。（您可能必须运行迁移才能破坏 AddressType 中的前一列并在 Address 表中添加一列）。

**编辑**：

我已将我的代码更新如下：

```
class CreateAddresses < ActiveRecord::Migration
   def self.up
     create_table :addresses do |t|
      t.integer :address_type_id
      t.text :street
      t.string :city
      t.string :state, :limit => 2
      t.integer :zip
      t.references :entry

      t.timestamps
    end
     add_index :addresses, :entry_id
 ...

 class CreateAddressTypes < ActiveRecord::Migration
  def self.up 
    create_table :address_types do |t|
    t.string :name
  end 
```

我的模型： class AddressType < ActiveRecord::Base has_many :addresses attr_accessible :name end

```
class Entry < ActiveRecord::Base
    has_many :addresses
    attr_accessible :email, :first_name, :last_name
end
class Address < ActiveRecord::Base
    belongs_to :entry
    belongs_to :address_type
    attr_accessible :city, :state, :street, :zip
end 
```

还有我的 _form 文件：

```
 ...
 .form-inputs
= f.collection_select (:address_type_id, AddressType.all, :id, :name)
= f.input :street
= f.input :city 
```

在我点击“创建”后，错误提示“无法批量分配受保护的属性：address_type_id”。我知道我必须在某个地方犯一些错误？

# keytool - 如何导入 .pem 文件？

> ID：15097033
> 
> 赞同：1
> 
> 时间：2013-02-26T18:53:02.423
> 
> 标签：keytool

我有确切的问题报告

[Jarsigner：找不到证书链](https://stackoverflow.com/questions/3255836/jarsigner-certificate-chain-not-found-for)

我的出发点是一个 .pem 文件。我的感觉是这也有私钥。我使用以下命令将其导入密钥库：

keytool -importcert -alias myalias -file myfile.pem

对于“信任此证书？[否]”，如果我选择“否”，则导入失败。所以，我选择了“是”。导入确实成功。我的

密钥工具列表

产生类似于 Jarsigner: certificate chain not found for 中列出的输出。

我的感觉是我确实有正确的证书位，但没有正确导入。换句话说，我怀疑正在创建“受信任的证书条目”而不是“密钥条目”，但不知道如何强制 keytool 创建“密钥条目”。

我怎么解决这个问题？

附加信息：

经过进一步的工作，我倾向于与上述结论完全相反的结论。我现在认为我的 pem 文件有问题。我查看了一个带有过期密钥的先前密钥库条目。它清楚地说明了 PrivateKeyEntry，而我的导入说明了trustedCertEntry。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T22:22:07.680

您可以尝试从包含整个证书链的文件中创建 pkcs12。您需要公共证书和根 CA 证书。命令是这样的：

```
openssl pkcs12 -export -inkey file.pem -in file.crt -out file.p12 \
-CAfile root-CA.pem -chain -name mykey 
```

拥有整个 file.p12 文件后，您可以将完整的证书导出为 pem 格式：

```
openssl pkcs12 -in file.p12 -out new-cert.pem -nodes -clcerts 
```

或者，如果要导出为具有整个链的 Java 密钥库格式，命令是：

```
keytool -importkeystore -srcstoretype pkcs12 -srckeystore file.p12 \
-srcstorepass <password> -keystore keystore.jks 
```

# javascript - 基于 jquery 的独立端口敲击器

> ID：15097036
> 
> 赞同：2
> 
> 时间：2013-02-26T18:53:08.133
> 
> 标签：javascript, jquery, ssh, port

我正在做一个小项目，需要为我的团队成员提供一种替代方法来端口敲击非生产服务器并为 SSH 流量打开端口 22（访问在 10 分钟后再次关闭）。由于某些敲门方法不适用于不同设备上的不同用户，因此我们需要创建一个“最后的敲门客户端”，它可以作为独立网页打开并启动敲门序列。当然，出于安全原因，这个文件永远不会放在网络服务器上。

我是 jQuery、javascript 和 CSS 的新手，但能够让它工作。但是，它并不适用于所有浏览器，有时如果它不再在特定机器上运行，我们必须重新启动。

经过大量搜索，我真的不确定如何改进我的代码，同时将所有功能都包含在一个 html 文件中。我真的很感激一些意见。

```
<!DOCTYPE HTML>
<html>
<head>
<title>Gain Access- Beta version 1.0</title>
<style>
* {
    font-family: Verdana, Arial, Sans-Serif;
}
#top{
    margin-left:80px;
}
#heading {
    margin-left: 0px;
    font-size:22px;
    font-weight:bold;
}
#subhead {
    margin-left: 10px;
    font-size:12px;
}
button {
    font-size:16px;
    margin-left:100px;
}
#button {
    font-size: 12px;
    font-family: Verdana, Arial, Sans-Serif;
    position: absolute;
    margin-left: 100px;
    margin-top: 50px;
}
#status {
    margin-left:90px;
    margin-top: 80px;
    position: absolute;
    font-size:16px;
    font-weight:bold;
}
#knocks {
    margin-left:110px;
    margin-top: 100px;
    position: absolute;
    font-size:14px;
    color:blue;

}
#portals {
    position: absolute;
    margin-left: 110px;
    margin-top: 155px;
    display:none;
}
.tinyimg {
    width: 1px;
    height: 1px;
}

</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script type="text/javascript">

$(document).ready(function(){
$('button').click(function(){
    $('#knocks').append('<p>Knocking...</p>');
    setTimeout(function(){
        $('#portals').append('<img class="tinyimg" src="https://some.url.com:1111/test/url.jpg/" />');
        $('#knocks').append("<p>Knock 1 of 5 complete...</p>");
        }, 500);    
    setTimeout(function(){
        $('#portals').append('<img class="tinyimg" src="https://some.url.com:2222/test/url.jpg/" />');
        $('#knocks').append("<p>Knock 2 of 5 complete...</p>");
        }, 3500);
    setTimeout(function(){
        $('#portals').append('<img class="tinyimg" src="https://some.url.com:3333/test/url.jpg" />');
        $('#knocks').append("<p>Knock 3 of 5 complete...</p>");
        }, 6500);
    setTimeout(function(){
        $('#portals').append('<img class="tinyimg" src="https://some.url.com:4444/test/url.jpg" />');
        $('#knocks').append("<p>Knock 4 of 5 complete...</p>");
        }, 9500)
    setTimeout(function(){
        $('#portals').append('<img class="tinyimg" src="https://some.url.com:5555/test/url.jpg/" />');
        $('#knocks').append("<p>Knock 5 of 5 complete...</p>");
        }, 12000);
    setTimeout(function(){
        $('#knocks').append("<p>Knocking is complete... <br>Proceed to site: <a href='http://secureurl.someurl.com'>http://secureurl.someurl.com/a></p>");
        }, 13000);
});
});

</script>

</head>
<body>
<div id="top">
<p><span id="heading">Gain Access</span><br><span id="subhead">Beta version 1.0</span></p>
</div>
<button type="button">Click to Knock</button>
<div id="portals"></div> <!--The image references created by the port knocks land in this div.-->
<p id="status">Status:</p>
<div id="knocks"><p>Click button to knock</p></div> <!--The status updates generated concurrently with each port knock are displayed here.-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:15:42.117

您正在使用`GET`对图像的请求来端口敲击您的服务器。我假设服务器不回复这些请求，甚至过滤它们，所以它们最终会超时。

如果之前的尝试超时，某些浏览器可能不愿意执行相同的请求。他们也可能实现一个队列并且同时只发送几个请求，如果这些请求在你必须发送下一部分敲门时仍然挂起（标准 TCP 超时为 30 秒），这可能会导致问题。

如果可能的话，用[WebSockets](http://dev.w3.org/html5/websockets/)重新实现你的敲门协议。

如果您对图像感到困惑，请尝试附加`"?" + $.now()`到您的 URL，以便它们对于每个请求都是唯一的。它可能有助于防止浏览器放弃特定请求。

# javascript - 用户在字段中键入内容时如何更新字段

> ID：15097039
> 
> 赞同：0
> 
> 时间：2013-02-26T18:53:22.073
> 
> 标签：javascript, jquery

我用这段代码创建了一个字段

```
<tr><td> <input type="text" value="good"  onfocus="if (this.value == 'good') {this.value=''}" onblur="if(this.value == '') { this.value='good'}" name="name" maxlength="254" class="required" /></td></tr> 
```

当用户单击字段时，我们有明确和空的字段。如果用户将字段为空，我们会写回这个`good`值。但这不是我想要的，我正在寻找类似 facebook 中的用户注册表单的方式，然后如果用户输入一个字符我们清除值，如果用户将字段保留为空，我们将使用默认值填写此字段..有人可以帮我处理这个 javascript 或 jquery 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:09:24.477

您可以只使用该`placeholder`属性

```
<tr>
    <td>
        <input type="text" placeholder="good" name="name" maxlength="254" class="required" />
    </td>
</tr> 
```

只要用户没有输入文本，这就会显示出来，但不会更改`value`属性。

[JSFiddle](http://jsfiddle.net/LTzf8/1/)用于测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:10:57.863

尝试将您的输入更改为：

```
<tr>
    <td>
        <input type="text" value="good" placeholder="good" name="name" maxlength="254" class="required defaultText" />
    </td>
</tr> 
```

并添加一些 jQuery 代码：

```
$(document).ready(function() {
    $(".defaultText").focus(function(srcc) {
        if ($(this).val() == $(this)[0].placeholder) {
            $(this).val("");
        }
    });

    $(".defaultText").blur(function() {
        if ($(this).val() == "") {
            $(this).val($(this)[0].placeholder);
        }
    });

    $(".defaultText").blur();        
}); 
```

样式类，`defaultText`用于选择 html 元素，`placeholder`元素中的 为它定义默认值。

**编辑：**更改`title`为`placeholder`，这样它将与 html5 或以前的版本兼容

[示例来自这里。](http://www.dailycoding.com/Posts/default_text_fields_using_simple_jquery_trick.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:12:19.260

如果占位符属性不可行，您可以使用 onkeydown 事件而不是 onfocus。

# java - 如果父类/接口发生变化，类的字节码会改变吗？

> ID：15097041
> 
> 赞同：7
> 
> 时间：2013-02-26T18:53:23.753
> 
> 标签：java, class, bytecode

我正在尝试确定是否需要在我们的构建链中重新编译一些 jar，例如，如果我有以下结构，jar 1 在其源更改时编译，jar 2 在其源更改或 jar 1 重新编译时编译.

罐子 1：

```
public class Foo /* impl*/ 
```

罐子 2：

```
public class Bar extends Foo /*impl*/ 
```

**假设两个班级之间的合同没有改变**，即。添加抽象方法或将方法添加到接口等。

我需要重新编译 jar 2 吗？IE。如果对 Foo 中的私有方法进行了一些更改，是否需要重新编译 Bar？

我尝试通过在更改一堆后比较两个类的字节码来测试这一点，并且正如预期的那样它没有改变。然而，我的同事坚持认为，他们遇到过这样的情况，即使合同没有改变，他们也必须重新编译所有内容才能使其工作，但是他们不记得原因是什么......所以举证责任在我身上证明那不应该是必要的。**是否存在对超类进行更改需要重新编译子类的情况，即使两者之间的接口保持不变？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T19:04:40.630

假设`Foo`是由一个开源组织发布的；并且有数以千计的`Foo`不同公司实施的子类。

现在，如果对`Foo`. 当然不是。（好吧，我们确实一直在重新编译所有代码，但这不是必需的——新的 jar`Foo`可以简单地放入而不会造成任何问题）

这是二进制兼容性的问题，您可以检查规范以确保更改`Foo`为安全。请参阅[http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:02:48.103

在一般情况下，您必须重新编译依赖类。但是，如果您没有更改`Foo`所使用的任何方法或字段，则在更改时`Bar`不必重新编译。`Bar``Foo`

例如，如果调用`Foo`了方法，但您将其签名更改为或将其可见性更改为您必须重新编译。在这种情况下无法编译：您必须更改其代码。`protected int foo()``Bar``protected String foo()``private``Bar``Bar`

但是，如果`Bar`不使用方法`foo()`或仅更改了实现细节，则无需重新编译`foo()`即可使用。`Bar`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T19:04:36.393

绝对不会。您可以使用打包在 jar 文件中的框架（包含许多具有类似 Foo 的合同的类），而无需从源代码编译它们。但是您需要绝对确定合同没有直接间接更改。一些间接变化的例子：

```
public class Foo { //v1
    public static final int CONSTANT = 1;         
}

public class Foo { //v2
    public static final int CONSTANT = 2;         
}

public class Bar extends Foo {
    private int a(int value) {
        switch (value) {
            case CONSTANT:
                return 1;
        }
        return 2;
    }
} 
```

如果您不重新编译类 Bar，它仍将使用值 1。

# actionscript-3 - AS3 中的 Foo 是什么？

> ID：15097042
> 
> 赞同：5
> 
> 时间：2013-02-26T18:53:23.493
> 
> 标签：actionscript-3, flash

我在[AS3: How to convert a Vector to an Array](https://stackoverflow.com/questions/1107809/as3-how-to-convert-a-vector-to-an-array)中见过很多次，但从未在任何教程中真正了解过它。

甚至在谷歌上搜索并没有得到任何结果 - [http://www.google.co.uk/search?hl=en&q=Foo+in+AS3&meta=](http://www.google.co.uk/search?hl=en&q=Foo+in+AS3&meta=)

是我一直缺少的某种对象或变量类型吗？

或者它是一些外部库附带的东西？

当我用 Foo 编译我的代码时，我得到

```
Type was not found or was not a compile-time constant: Foo. 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T19:02:55.093

它不是一个实际的类型，只是一个用于举例的占位符。有时称为[元句法](http://catb.org/jargon/html/F/foo.html)类型。

因此，您必须在尝试编译代码时替换实际**类型**`Foo`，否则显然无法编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:11:17.953

Foo 只是程序员俚语中用于变量示例的术语，当名称并不重要或表示不重要的值时。

[您可以在http://www.ietf.org/rfc/rfc3092.txt](http://www.ietf.org/rfc/rfc3092.txt)阅读有关“Foo”一词的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T23:24:46.473

[**Foobar** - 维基百科](http://en.wikipedia.org/wiki/Foobar)：

> foo 在编程环境中的使用通常归功于大约 1960 年的 Tech Model Railroad Club (TMRC)。但是，这些术语的确切关系尚不确定，并且已经提出了一些轶事理论来识别它们。

# javascript - 通过 javascript/jquery 访问网络摄像头

> ID：15097049
> 
> 赞同：0
> 
> 时间：2013-02-26T18:53:51.400
> 
> 标签：javascript, jquery, html

对于我即将进行的项目，我想知道是否有解决方案可以在没有好的旧闪存的情况下访问网络摄像头。是否可以在 javascript、jquery 或任何其他框架中做到这一点。也许您有解决方法或其他方法！

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:56:07.490

使用 API 在 HTML5 中是可能的`getUserMedia()`，但目前浏览器支持非常有限。

有关详细信息，请参阅[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)。

请注意，用户*必须*明确允许访问摄像头和麦克风，以防止非法窥探。

# php - Oracle PHP " " 变成 "??" 更新时

> ID：15097052
> 
> 赞同：0
> 
> 时间：2013-02-26T18:53:53.700
> 
> 标签：php, html, oracle

我有一个将 html 模板保存为 oracle DB 中的 clob 的应用程序。
当我**更新**以前保存的 HTML时，`&nbsp;`会变成`??`.

```
$sql = "UPDATE headers 
        SET header_code = :HEADER_CODE
        WHERE header_ID = :HEADER_ID ";
...

oci_bind_by_name($stid, ':HEADER_CODE', $form_qs['HEADER_CODE']); 
oci_bind_by_name($stid, ':HEADER_ID', $form_qs['HEADER_ID']); 
... 
```

> oracle 版本信息：
> Oracle 数据库 10g 企业版版本 10.2.0.4.0 - 64bi
> PL/SQL 版本 10.2.0.4.0 - 用于 Solaris 的生产
> “CORE 10.2.0.4.0 生产”
> TNS：版本 10.2.0.4.0 - 生产
> NLSRTL版本 10.2.0.4.0 - 生产
> 
> PHP 版本 5.2.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:01:36.617

好的，在 datasage 让我意识到这是一个编码问题而不是数据库问题之后，我重新关注我的谷歌搜索，发现它是文本框（以及我的 enctype）正在转换   变成 2 个字符的 Unicode（我回显了 strlen($form_qs['HEADER_CODE'])）。

话虽如此，我现在将 & 替换为 & 所以文本框将显示   不是空格。我希望解决方案不会把其他事情搞砸，但时间会证明一切。

```
str_replace('&','&amp;',$form_qs['HEADER_CODE']); 
```

（感谢 DoSparKot 和 nickb 的格式化帮助）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:02:55.900

我不确定您的代码中是否存在语法错误，但是您可以使用`oci_new_descriptor()`它为 CLOB 打开一个新描述符

```
<?php
$clob = oci_new_descriptor ($conn, OCI_D_LOB);
oci_bind_by_name ($stid, ':HEADER_CODE', $clob, -1, OCI_B_CLOB);
$clob->write  ($form_qs['HEADER_CODE']);

oci_bind_by_name($stid, ':HEADER_ID', $form_qs['HEADER_ID']);

//after execution/commit
$clob->free();
?> 
```

`OCI_D_LOB`：LOB类型的数据

`OCI_B_CLOB`: CLOB 类型的绑定

# git - cygwin git下的KDiff3不会调用

> ID：15097053
> 
> 赞同：3
> 
> 时间：2013-02-26T18:53:54.387
> 
> 标签：git, cygwin, kdiff3

为了与互联网上发布的许多解决方案保持一致，我安装了 KDiff3 并进行`.gitconfig`了如下修改以使用它。尽管如此，当我`git diff HEAD^ HEAD`在存储库中运行以测试它时，我得到了默认工具执行的差异。我在 Windows7-64 上运行 cygwin git。谁能解释为什么不调用KDiff3？

```
[diff]
    tool = kdiff3
[merge]
    tool = kdiff3

[difftool "kdiff3"]
    path = \"D:/Program Files (x86)/KDiff3/kdiff3.exe\"
    keepBackup = false
    trustExitCode = false

[mergetool "kdiff3"]
    path = \"D:/Program Files (x86)/KDiff3/kdiff3.exe\"
    keepBackup = false
    trustExitCode = false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-14T02:05:05.590

实际上，不需要包装脚本。如果 kdiff3.exe 不在您的路径中，则需要在 cmd 中提供完整路径为`cmd = /cygdrive/c/apps/KDiff3/kdiff3 ...`

我的 .gitconfit

```
[diff]
    tool = kdiff3
[merge]
    tool = kdiff3
[difftool "kdiff3"]
    cmd = kdiff3 \"$(cygpath -wla $LOCAL)\" \"$(cygpath -wla $REMOTE)\"
    trustExitCode = false
[mergetool "kdiff3"]
    cmd = kdiff3 \"$(cygpath -wla $BASE)\" \"$(cygpath -wla $LOCAL)\" \"$(cygpath -wla $REMOTE)\" -o \"$(cygpath -wla $MERGED)\"
    keepBackup = false
    trustExitCode = false
[mergetool]
    prompt = false
[difftool]
    prompt = false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:15:24.847

用于`git difftool`调用配置的差异工具，而不是`git diff`.

由于您似乎使用的是 cygwin git，而是本机 kdiff3，因此您可能还需要调用包装脚本，而不是直接调用 kdiff3，以使用`cygpath`从 cygwin 形式到本机形式的转换路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-06T06:46:18.003

```
git config --global merge.tool kdiff3
git config --global mergetool.kdiff3.path "C:/Program Files/KDiff3/kdiff3.exe"
git config --global mergetool.kdiff3.keepbackup=false
git config --global mergetool.kdiff3.trustexitcode=false 
```

请检查配置：`git config --global -l`

这在 cywin 64bit 上工作正常

# entity-framework - 添加对象时的实体框架，然后添加其引用或什么

> ID：15097054
> 
> 赞同：0
> 
> 时间：2013-02-26T18:53:56.307
> 
> 标签：entity-framework

这个问题可能听起来很傻，但我试图找出一种通过 EF 完成批量操作的方法。我知道这不是一个好习惯。

在搜索过程中，我发现了这个链接 [https://github.com/geersch/EntityFrameworkBulkCopy](https://github.com/geersch/EntityFrameworkBulkCopy)

它给出了一个例子

```
 for (int i=0; i<1000; i++)
    {
        var entity = new Contact
                            {
                                CustomerId = Guid.NewGuid(),
                                FirstName = "Ruben",
                                LastName = "Geers",
                                EmailAddress = "geersch@gmail.com"
                            };

        context.Contacts.AddObject(entity);
    }
    context.SaveChanges(); 
```

如您所见，我的问题是在循环中添加对象，据我说，每次创建新对象时，对象都是引用指针

```
 var entity = new Contact 
```

不会造成麻烦意味着您添加了对象的引用，然后重新创建它。

有点糊涂...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:09:08.383

您实际上并没有重新创建对象。

```
 for (int i=0; i<1000; i++)
    {

      var entity = new Contact

     //rest of code omnitted 
```

注意引用实体是*在 for 循环的范围内声明的*

这意味着每次迭代都会声明一个*新*对象。它与它的前辈同名，但指针不同。

我不知道 - 但我很确定变量的名称没有直接用作内存指针。（这是一个猜测）

# ios - iOS 通用 App 发布，但首次发布仅限 iPad

> ID：15097059
> 
> 赞同：2
> 
> 时间：2013-02-26T18:54:17.273
> 
> 标签：ios, universal

我看过博客说我们可以先发布适用于 iPhone 的通用 App，然后再添加对 iPad 的支持。我想它应该以另一种方式正常工作？即首先为 iPad 发布它，然后再添加 iPhone 支持？有没有人这样做，Apple会签署该应用程序吗？我正处于发布的最后阶段，iPhone 不会及时准备好，所以希望提前发布 iPad 版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:02:03.977

是的，您可以在将应用程序作为 iPad 应用程序在 App Store 中发布后使其成为通用应用程序。当您准备好发布通用版本时，只需更新二进制文件。

# php - 我应该避免一长串 IF 语句吗？

> ID：15097061
> 
> 赞同：0
> 
> 时间：2013-02-26T18:54:25.247
> 
> 标签：php, optimization, if-statement

我应该避免在我的代码中包含一长串序列化的 IF 语句吗？有时这似乎是不可避免的，但我想知道这是否只是我的经验不足。

例如，如果您正在处理用户上传的图像 - 并且您希望对任何错误提供准确的反馈 - 您可能会遇到以下情况：

```
if($file["size"] == 0) { 
    throw new Exception("ERROR: File was empty");
}

if (($file["type"] != "image/gif")
|| ($file["type"] != "image/jpeg")
|| ($file["type"] != "image/pjpeg")
|| ($file["type"] != "image/png")) {
    throw new Exception("ERROR: Image must be either GIF, PNG or JPEG!");
}

if ($file["size"] > 2000000) {
    throw new Exception("ERROR: Image must be than less 2MB!");
}

    if ($file["error"] > 0) {
    throw new Exception("UNKNOWN ERROR: ".$file['error']);
}

$imgDetails = getimagesize($file["tmp_name"]);

if($imgDetails['channels'] != 3){
    throw new Exception("ERROR: Image must be RGB.)";
}

if($imgDetails['0'] < 50 && $imgDetails['1'] < 50) {
    throw new Exception("ERROR: Image must be larger then 50 x 50.)";           
} 
```

等等等等等等，直到最终文件通过所有测试并被处理。

这是“坏习惯”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:02:47.750

您可以使用`in_array`来缩短类型检查，但通常这是一种很好的形式，除了直接从这个函数中推送输出。如果这是通过类完成的，您可能希望使用异常而不是直接推送错误输出。

早返，常返。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:57:00.027

您可以创建一个限制集合并为您编写一个查看该集合的代码，而不是列出任意限制。

虽然我忘记了在 javascript 中执行此操作的方法，但类似于 [如何检查数组是否包含 JavaScript 中的对象？](https://stackoverflow.com/questions/237104/array-containsobj-in-javascript)

希望这有点帮助>.>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:01:17.740

我发现通常你所说的那种 if 链可以变形为函数的哈希图，其中一些选择器作为它们的键。

如果您有一个哈希映射，就像`$processImage = { "image/gif" => function processGIF(){blah} }`您可以访问 O(1) 中的每个函数而不是 O(n/2) 平均值（假设调用的正态分布也是不准确的）。众所周知，除非它经常发生，否则这并不重要。

然后你可以使用调用该函数`$processImage["image/gif"]();`（我认为这是有效的语法，近年来我做的 JS 比 php 多得多。）

不过，我确实发现 hashmap 方法也非常可扩展和可读，所以它可以做到这一点。

当然，重构这些是有好处的。但在许多情况下，这样做的好处是微乎其微的。

# android - Dropbox Api AccessToken 已更改

> ID：15097062
> 
> 赞同：0
> 
> 时间：2013-02-26T18:54:27.213
> 
> 标签：android, authentication, file-upload, dropbox-api

我正在开发一个有可能提供大量统计信息的 android 应用程序。我想将此数据保存在我的 Dropbox 中以供以后分析。

所以我使用 AuthActivity 来获取我自己帐户的密钥和秘密，然后我对其进行硬编码以获取 AcessTokenPair 实例：

```
 AcessTokenPair tokenPair = new AccessTokenPair("key", "secret");
    mDBApi.getSession().setAccessTokenPair(tokenPair); 
```

然后我使用下面的 AsyncTask 将文件发送到我的保管箱：

```
 private class SendToDropbox extends AsyncTask<String, Void, String> {

        @SuppressWarnings("deprecation")
        @Override
        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub

            String timestamp = new Date().toString();
            FileInputStream inputStream = null;
            DisplayMetrics dm = new DisplayMetrics();
            win.getDefaultDisplay().getMetrics(dm);
            double x = Math.pow(dm.widthPixels / dm.xdpi, 2);
            double y = Math.pow(dm.heightPixels / dm.ydpi, 2);
            double screenInches = Math.sqrt(x + y);
            File sdcard = new File(Environment.getExternalStorageDirectory()
                .getPath());
            File session = null;

            try {
                 session = File.createTempFile("analytics_" + timestamp, ".txt", sdcard);

                if (session.exists()) {
                    PrintStream ps = new PrintStream(session);
                    ps.println("Screen Size: " + screenInches);
                    ps.println("Device: " + android.os.Build.MODEL);
                    ps.println("Carrier: " + android.os.Build.BRAND);
                    ps.println("Locale: " + Locale.getDefault().toString());
                    ps.println("OS: " + android.os.Build.VERSION.SDK);
                    ps.println("${EOF}");

                    ps.checkError();
                    ps.close();

                    inputStream = new FileInputStream(session);
                    com.dropbox.client2.DropboxAPI.Entry newEntry = mDBApi
                        .putFile("Analytics" + File.separator
                                + session.getName(), inputStream,
                                session.length(), null, null);
                    if (session.delete()) {
                    } else {
                        session.deleteOnExit();
                    }
                    Log.i("DbExampleLog", "The uploaded file's rev is: "
                        + newEntry.rev);
                } else {
                Log.e("DropBoxFile", "SD NOT MOUNTED!!");
                }

            } catch (DropboxUnlinkedException e) {
                // User has unlinked, ask them to link again here.
                Log.e("DbExampleLog", "User has unlinked.");
            } catch (DropboxException e) {
                Log.e("DbExampleLog", "Something went wrong while uploading.");
            } catch (FileNotFoundException e) {
                Log.e("DbExampleLog", "File not found.");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally {
                if (inputStream != null) {
                    try {
                        inputStream.close();
                    } catch (IOException e) {
                    }
                }
            }

          return null;
    } 
```

这段代码的唯一问题是它只能工作几周，可能是访问令牌更改前的一个月。这意味着我必须每隔几周手动更新一次 apk，这不太可行。相反，我想将密钥存储在可以通过 http 访问的网站或在线文件中。

是否有任何不需要帐户访问权限并允许您在网络上上传和编辑 .txt 文件的免费程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T21:59:33.797

访问令牌当前不会过期，但将来可能会发生变化。但是，您需要非常小心，切勿将您的应用程序与用于生成令牌的帐户取消链接，因为这会使硬编码到您的应用程序中的令牌无效。

不过，出于安全原因，我不能推荐这个。对应用程序进行逆向工程的人可以发现嵌入到您的应用程序中的令牌。拥有该令牌的任何人不仅可以读取，还可以写入该令牌有权访问的 Dropbox（或 App 文件夹），这样做可能会搞砸您应用的其他用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T17:12:56.500

来自 Dropbox 最佳实践：[最佳实践](https://www.dropbox.com/developers/core/bestpractices)

> 您的应用应采取预防措施，以防访问权限被撤销。访问令牌可能会被用户禁用（从帐户页面），在滥用情况下被 Dropbox 管理员撤销，或者只是随着时间的推移而过期。
> 
> 在令牌不再被授权的情况下，REST API 将返回 HTTP 错误 401 Unauthorized 响应。iOS SDK 会为您检测 401，并会在会话的委托上调用 sessionDidReceiveAuthorizationFailure: 方法来通知您授权已被撤销。Android、Python、Ruby 和 Java SDK 都会在您可以捕获和检查的服务器错误上引发异常。重新认证通常是重新获得访问权限所必需的。

所以访问令牌肯定会随着时间而改变。你必须足够灵活来处理它。

# html - 在导航离开时继续上传文件

> ID：15097064
> 
> 赞同：0
> 
> 时间：2013-02-26T18:54:35.637
> 
> 标签：html, forms, file-upload, multipartform-data

这可能是一个长镜头，但我想我应该问。我的网站上有一个文件上传表单，有些文件很大并且需要很长时间才能上传，有什么方法可以让用户离开包含 multipart/form-data 表单的页面而不导致上传流结束?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T18:52:24.647

考虑在另一个窗口中打开上传，因为据我所知，在用户离开时继续上传文件的唯一方法是不离开

1.  你可以通过完整的 ajax 导航来做到这一点（你甚至可以使用[pushState](https://developer.mozilla.org/en-US/docs/Web/API/History_API)）
2.  通过将用户在 iframe 中使用的页面保持为窗口大小
3.  使用[web-workers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers)，他们通过创建一个在后台运行的进程来工作。

# c# - 在域实体中使用 DescriptionAttribute

> ID：15097065
> 
> 赞同：1
> 
> 时间：2013-02-26T18:54:40.883
> 
> 标签：c#, .net, oop, attributes, domain-driven-design

我目前正在开发一个需要在运行时公开其一些元数据/文档的系统。我知道有一些方法可以使用 XML 注释并通过自研的反射扩展方法将数据带回应用程序。

我觉得使用 System.ComponentModel 命名空间中的 description 属性可能更容易（但位于 System 程序集中）。这样我和其他开发人员就可以使用常规反射来获取字段的描述。我宁愿使用它而不是使用自定义属性。这种方法有什么缺点？

例子：

```
public Customer
{
    public int Id { get; set; }
    [Description("The common friendly name used for the customer.")]
    public string Name { get; set; }
    [Description("The name used for this customer in the existing Oracle ERP system.")]
    public string ErpName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:18:30.553

我正在做同样的事情（同样使用 ERP 软件！）并且没有遇到任何缺点。根据您的体系结构，您可能会认为在您的情况下存在的一个缺点是许多文档工具直接或间接地基于 XML 注释。他们可能无法获取描述属性。但是在我们的架构中，描述属性代码实际上并不是文档的主/源代码。我们有一个定义和描述每个属性的元数据数据库。我们可以生成 XML 注释*和*来自同一来源的描述属性。实际上，在我们的例子中，我们根本不生成 XML 注释，而是直接生成通常由 XML 注释直接生成的 XML 文件。这是我们使用的文档工具使用的文件。如果您想使用依赖于 xml 注释输出的 xml 文件的文档工具，如果它不能直接接受 Decribiton 属性，您可能会编写一个简单的实用程序来将描述属性提取到类似的 XML 文件中。

# javascript - 使用 canvas.toDataURL() 的 Canvas HTML5 JavaScript 代码不起作用

> ID：15097068
> 
> 赞同：0
> 
> 时间：2013-02-26T18:54:46.917
> 
> 标签：javascript, html, canvas

我未能使此代码正常工作：

```
(function() {
    // Creates a new canvas element and appends it as a child
    // to the parent element, and returns the reference to
    // the newly created canvas element

    function createCanvas(parent, width, height) {
        var canvas = {};
        canvas.node = document.createElement('canvas');
        canvas.context = canvas.node.getContext('2d');
        canvas.node.width = width || 100;
        canvas.node.height = height || 100;
        parent.appendChild(canvas.node);
        return canvas;
    }

    function init(container, width, height, fillColor) {
        var canvas = createCanvas(container, width, height);
        var ctx = canvas.context;
        // define a custom fillCircle method
        ctx.fillCircle = function(x, y, radius, fillColor) {
            this.fillStyle = fillColor;
            this.beginPath();
            this.moveTo(x, y);
            this.arc(x, y, radius, 0, Math.PI * 2, false);
            this.fill();
        };
        ctx.clearTo = function(fillColor) {
            ctx.fillStyle = fillColor;
            ctx.fillRect(0, 0, width, height);
        };
        ctx.clearTo(fillColor || "#ddd");

        // bind mouse events
        canvas.node.onmousemove = function(e) {
            if (!canvas.isDrawing) {
               return;
            }
            var x = e.pageX - this.offsetLeft;
            var y = e.pageY - this.offsetTop;
            var radius = 10; // or whatever
            var fillColor = '#ff0000';
            ctx.fillCircle(x, y, radius, fillColor);
        };
        canvas.node.onmousedown = function(e) {
            canvas.isDrawing = true;
        };
        canvas.node.onmouseup = function(e) {
            canvas.isDrawing = false;
        };
    }

    var container = document.getElementById('canvas');
    init(container, 200, 200, '#ddd');

})();

function hi(){
var canvas = document.getElementsByTagName('canvas');
var imageData = canvas.toDataURL();
    document.getElementById("his").innerHTML=imageData;
} 
```

这是一段 JavaScript 代码，它`div`在`id`.`canvas`

而且，我正在尝试保存图像，并`div`使用保存`id`的`his`图像写入 a 。现在这就是代码停止工作的地方......非常感谢您的帮助，谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:10:09.717

[`document.getElementsByTagName('canvas')`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)返回 a `NodeList`，而不是单个元素。所以使用

```
function hi(){
    var canvas = document.getElementsByTagName('canvas')[0];
    imageData = canvas ? canvas.toDataURL() : "could not find a <canvas> element";
    document.getElementById("his").textContent = imageData;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:02:44.373

图像数据 URL 属于图像`src`属性。图片没有`innerHTML`。

# entity-framework - EF POCO 无法更新导航属性

> ID：15097072
> 
> 赞同：0
> 
> 时间：2013-02-26T18:54:53.147
> 
> 标签：entity-framework

我正在使用带有 MVC 和 POCO 的 EF5，需要一点帮助

我有一个更新功能，它传递了一个断开连接的 POCO。POCO 有一个“导航属性”集合，例如：Provider has

`public virtual ICollection<Company> Companies { get; set; }`

当 Provider 被加载（并且旧的上下文关闭）时，它有两个 Company 对象，现在它有四个，我想更新。

我认为下面的代码可能有效，但**公司没有更新**（但提供者的非导航属性（如字符串名称 {get;set} 仍然更新正常）**并且没有错误**

```
public void Update(Provider entity)
{                        
            // Existing entity
            _context.Entry(entity).State = EntityState.Modified;

            if (entity.Companies.Any())
            {
                //try to tell EF about the companies
                foreach (var company in entity.Companies)
                {
                    //the company exists already - let the context know....                        
                    _context.Entry(company).State = EntityState.Modified;
                    _context.Companies.Attach(company);
                }
            }                    
} 
```

... 然后：`_unitOfWork.SaveChanges();`

对于插入的 Provider with Companies 我已成功使用：

```
if (entity.Companies.Any())
{
    //these are not to be created - they exist - 
    //I want EF to add them as nav properties
    foreach (var company in entity.Companies)
    {
        //the company exists already - let the context know....
        _pvpContext.Companies.Attach(company);
    }
}

// New entity
_pvpContext.Entry(entity).State = EntityState.Added; 
```

我要去阅读 Julia Lerman 的书，因为 EF 正在杀死我 - 但我非常感谢在此期间更新“公司”的任何帮助 - Thx

编辑：我尝试了@Manos 的善意建议：

```
List<Company> companies = new List<Company>();
if (entity.Companies != null && entity.Companies.Any())
{
    //pull out the Companies from the POCO
    companies = entity.Companies.ToList();

    //remove them
    entity.Companies = new Collection<Company>();
    entity.Companies.Clear();
}

// pass existing entity to the context, tagged as modified
_pvpContext.Entry(entity).State = EntityState.Modified;

if (companies.Any())
{
    //now re-add the companies while the context is listening. ffs.
    foreach (var company in companies)
    {
        entity.Companies.Add(company);
    }
} 
```

如果我将 Provider.Companies 添加到上下文中（如插入），我会得到：

> 违反主键约束“PK__tmp_ms_x__679519B7F943FD8D”。无法在对象“dbo.ProviderCompany”中插入重复键。重复键值为 (5, 3)

*   这很奇怪，因为 (provider 5, company 3) 没有复合键 - 所以它可能试图在这里添加两次？

如果我不预先添加 Provider.Companies 我得到：

> 在 System.Data.Entity.Internal.InternalContext.SaveChanges() 在 System.Data.Entity.Internal.LazyInternalContext.SaveChanges() 在 System.Data.Entity.DbContext.SaveChanges()

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T19:15:25.597

我只有 4.1 来测试，但试试这个作为基本逻辑：

```
public void Update(Provider entity)
{                        
    // Existing entity
    Provider contextProvider = _context.Entry(entity);
    contextProvider.Companies.Clear();        

    foreach (var company in entity.Companies)
    {
        contextProvider.Companies.Add(company);
    }

} 
```

这需要稍微改进，以便只添加新公司，而不是完全删除和恢复，但它应该可以工作。

**编辑以回应评论：**

尝试使用以下内容捕获 SaveChanges() 引发的异常：

```
try {
    _unitOfWork.SaveChanges();
} catch (System.Data.Entity.Validation.DbEntityValidationException e) {
    foreach (var k in e.EntityValidationErrors) {
        foreach (var e1 in k.ValidationErrors) {
            Console.WriteLine("{0} - {1}", e1.PropertyName, e1.ErrorMessage);
        }
    }
} 
```

它应该为您提供更多信息。

# functional-programming - 在 ocaml 中实现快速排序有什么更好的方法吗？

> ID：15097077
> 
> 赞同：1
> 
> 时间：2013-02-26T18:55:19.307
> 
> 标签：functional-programming, ocaml

我`quicksort`在 OCaml 中实现。这是代码：

* * *

```
let shuffle d =
    let nd = List.map (fun c -> (Random.bits (), c)) d in
    let sond = List.sort compare nd in
    List.map snd sond;;

let partition = function
  | [] -> ([], [], [])
  | pivot::tl ->
    let rec p (left, right) = function
      | [] -> (left, right, [pivot])
      | first::rest ->
    let c = compare pivot first
    in 
    if c > 0 then
      p (first::left, right) rest
    else 
      p (left, first::right) rest
    in
    p ([], []) tl;;

let quicksort l =
  let sl = shuffle l 
  in
  let rec qs = function
    | [] -> []
    | l ->
      let (left, right, pivot) = partition l
      in 
      (qs left) @ pivot @ (qs right)
  in 
  qs sl;; 
```

* * *

**首先**，我认为也许有更好的方法来实现分区。`List.partition`我想到了，但我只是想自己实现关键部分

**其次**，我`@`在排序中使用了很多，`inefficient`对吧？

**有什么建议么？**

* * *

**编辑**

另一个需要考虑的问题是是否`3-way quicksort`会影响 OCaml 中的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:49:42.067

`p`函数缩进严重；说到缩进，我倾向于认为`in`在下一行有 a 的风格对于单行声明来说太过分了，所以我宁愿把它们放在单行声明的末尾。

更重要的是，它不需要将列表元组作为参数，使用两个单独的（咖喱）参数，您将在语法上更轻松。您还可以使用`List.partition`标准库的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:58:58.393

您可以尝试的微优化是 `List.concat[[qs left]; [pivot]; [qs right]]`一次附加列表，但您需要运行一些基准测试来验证这是否有帮助。

# c# - 查询日期范围

> ID：15097078
> 
> 赞同：-1
> 
> 时间：2013-02-26T18:55:21.040
> 
> 标签：c#, asp.net, .net, linq, entity-framework

我想知道如何在此示例中进行查询：

我有一个包含 UserID、UserName、DateRegistered 和角色的用户表。我想通过选定的两个组合框进行查询，每个组合有： -Period Register User（当月，上个月，当前 15 天，过去 15 天，今年和去年） -Roles（不同的角色）

我想在网格中显示使用所选`combobox`项目引用的结果查询。例如：用户在过去 15 天内向状态管理员注册。

我知道该怎么做，但我想做一些一般性的事情，而不是根据时期做这么多的查询。我使用实体框架。

这不是代码只是我认为应该是的示例，因为我不知道转换周期以及如何比较以防万一不是当前的最后 15 天。

```
 string period = dropDownList.SelectedValue.ToString();
    DateTime StarPeriode= new DateTime();
    switch (option.ToUpper())
    {
        case "0":
            // CURRENT 15 days
            StarPeriode = DateTime.Now.Subtract(-15);
            break;
        case "1":
            // LAST 15 days
            StarPeriode = DateTime.Now.Subtract(-30);
            break;
        case "2":
            // CURRENT MONTH
            break;
        case "3":
            // LAST MONTH
            break;
        case "4":
            // CURRENT YEAR
            break;
        case "5":
            // LAST YEAR
            break;
        default:
            break;
    }

    var _db = new Project.Models.UserContext();
    IQueryable<User> query = _db.User.GetUser;

    query = query.Where(p => p.User.RegisterDate <= StarPeriode ||        p.User.RegisterDate>DateTime.Now); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:52:00.210

只需在每种情况下设置一个 startDate 和 endDate 变量，然后在语句上使用相同的 where`LINQ`子句

```
var startDate = DateTime.Today;
var endDate = DateTime.Today;
var now = DateTime.Today;

switch (option.ToUpper())
{
    case "0":
        // CURRENT 15 days
        startDate = now.AddDays(-15);
        endDate = now;
        break;
    case "1":
        // LAST 30 days
        startDate = now.AddDays(-30);
        endDate = now;
        break;
    case "2":
        // CURRENT MONTH
        startDate = new DateTime(now.Year, now.Month, 1);
        endDate = new DateTime(now.Year, now.Month, DateTime.DaysInMonth(now.Year, now.Month));
        break;
    case "3":
        // LAST MONTH
        var lastMonth = now.AddMonths(-1);
        startDate = new DateTime(lastMonth.Year, lastMonth.Month, 1);
        endDate = new DateTime(lastMonth.Year, lastMonth.Month, DateTime.DaysInMonth(lastMonth.Year, lastMonth.Month));
        break;
    case "4":
        // CURRENT YEAR
        startDate = new DateTime(now.Year, 1, 1);
        endDate = new  DateTime(now.Year, 12, 31);
        break;
    case "5":
        // LAST YEAR
        var lastYear = now.AddYears(-1);
        startDate = new DateTime(lastYear.Year, 1, 1);
        endDate = new  DateTime(lastYear.Year, 12, 31);
        break;
    default:
        break;
}

var users = Users.Where(u => u.RegisterDate >= startDate && u.RegisterDate <= endDate); 
```

根据您存储 RegisterDate 值的方式，您将需要观察边缘情况，因为我的示例假设所有时间部分都是上午 12:00:00。

# typescript - VS 2012 web express 不会在现有的 ASP MVC 项目上编译打字稿文件

> ID：15097085
> 
> 赞同：0
> 
> 时间：2013-02-26T18:55:47.117
> 
> 标签：typescript

所以我设置了 VS 2012 web express 通过安装 microsoft 0.8.2 扩展来编译打字稿，但保存时没有任何反应，即没有生成 .js 文件或源映射文件。

```
 <Target Name="BeforeBuild">
<Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\tsc&quot; -module amd -target ES5 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" IgnoreExitCode="true" /> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:38:27.163

您可以使用命令提示符手动运行命令吗？这是测试命令的最佳方式...

```
"c:\Program Files (x86)\Microsoft SDKs\TypeScript\tsc" --module amd --target ES5 YourFile.ts 
```

（注意标志通常是双虚线）

您应该发现以下其中一项...

*   TypeScript 编译器与您正在使用的编译器位于不同的位置
*   存在阻止生成 JavaScript 文件的编译器错误

# android - 在 Android 中处理序列化的 JSV 类型

> ID：15097086
> 
> 赞同：4
> 
> 时间：2013-02-26T18:55:48.853
> 
> 标签：android, servicestack, ormlite-servicestack

我有一个在 ServiceStack ORMLite 中生成的现有 SQLite 数据库。它有一个字段，表示 C# 中 Dictionary 类型的属性。

ServiceStack 将其作为 JSV 序列化到数据库中，这对于我们当前在所有 .NET 中运行的系统来说工作得很好。

我正在使用现有的数据库进行 Android 实现。单声道（不幸的是）不是一种选择。

我想知道是否有一种方法可以强制 ORMLite 对实际编写自定义 DialectProvider 之外的字段使用 JSON 序列化。这将允许我使用可用的 JSON 解析器轻松解析该字段。

或者，Java 中的 JSV 解析器也可以解决问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:18:12.120

[OrmLite 中用于序列化复杂类型](https://github.com/ServiceStack/ServiceStack.OrmLite#pluggable-complex-type-serializers)的复杂类型序列化器是可插拔的：

```
//ServiceStack's JSON and JSV Format
SqliteDialect.Provider.StringSerializer = new JsvStringSerializer();       
PostgreSqlDialect.Provider.StringSerializer = new JsonStringSerializer();
//.NET's XML and JSON DataContract serializers
SqlServerDialect.Provider.StringSerializer = new DataContractSerializer();
MySqlDialect.Provider.StringSerializer = new JsonDataContractSerializer();
//.NET XmlSerializer
OracleDialect.Provider.StringSerializer = new XmlSerializableSerializer(); 
```

您还可以通过实现[IStringSerializer](https://github.com/ServiceStack/ServiceStack.Text/blob/master/src/ServiceStack.Text/IStringSerializer.cs)来提供自定义序列化策略。

默认情况下，所有方言都使用现有的`JsvStringSerializer`，除了 PostgreSQL，由于其对 JSON 的内置支持，默认情况下使用 JSON 格式。

* * *

据我所知，没有[JSV 格式](https://github.com/ServiceStack/ServiceStack.Text/wiki/JSV-Format)的 Java 实现，但我们确实[在 JavaScript 中有一个幼稚的实现，](https://github.com/ServiceStack/ServiceStack/blob/master/release/latest/js/JSV.js)如果有人希望将其移植到 Java，它应该提供一个很好的起点。

# android - Android autocompletetextview 有两个适配器用于建议

> ID：15097088
> 
> 赞同：0
> 
> 时间：2013-02-26T18:55:56.483
> 
> 标签：android, adapter, autocompletetextview

我`AutoCompleteTextView`在这种模式中提出建议时遇到问题 [action actionFromContact]（这些是 2 个适配器）ex call michael（其中“call”来自 action 适配器，“michael”来自 actionFromContact 适配器这些以下代码首先将适配器设置`AutoCompleteTextView`为项目，当文本更改为调用它时，重置为从名称联系数据库，所以它就像调用 michael， **问题**项目数组太大，所以我不能使用替换的东西，第二个替换删除第一个条目，当第二个条目即名称被选择时下拉菜单，因为它已被空格替换

```
 private AutoCompleteTextView mEditText;
        private TextWatcher mTextWatcher;
        private ContactPickerAdapter contactPickerAdapter;
        String item[] = { "Call", "Call back"};

    @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            mEditText = (WithSomeOneAutoCompleteTextView) findViewById(R.id.editTextTest);
            contactPickerAdapter = new ContactPickerAdapter(this,
                    android.R.layout.simple_dropdown_item_1line,
                    ContactQuery.getContacts(this, false));
            mEditText.setAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_dropdown_item_1line, item));

    mTextWatcher = new TextWatcher() {

                @Override
                public void onTextChanged(CharSequence s, int start, int before,
                        int count) {

                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {

                }

                @Override
                public void afterTextChanged(Editable s) {

                    String t = s.toString().replace("call ",");

                    contactPickerAdapter.getFilter().filter(t);
                    if (s.toString().equalsIgnoreCase("call ")) {

                        Toast.makeText(MainActivity.this, "CALL",
                                Toast.LENGTH_SHORT).show();

                        mEditText.setAdapter(contactPickerAdapter);
                    }
                    if (s.toString().equalsIgnoreCase("Call back")) {
    //                  t.replace("call back ", "");
    //                  System.out.println("t is: " + t);
    //                  contactPickerAdapter.getFilter().filter(t);
                        Toast.makeText(MainActivity.this, "Launch",
                                Toast.LENGTH_SHORT).show();
                    }

                }
            };

} 
```

这是 ContactPickerAdapter

```
public class ContactPickerAdapter extends ArrayAdapter<Contact> implements
        Filterable {

    private ArrayList<Contact> contactList, cloneContactList;
    private LayoutInflater layoutInflater;
    private Context mContext;

    public ContactPickerAdapter(Context context, int textViewResourceId,
            ArrayList<Contact> contactList) {
        super(context, textViewResourceId);
        this.contactList = contactList;
        this.cloneContactList = (ArrayList<Contact>) this.contactList.clone();
        layoutInflater = (LayoutInflater) context
                .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {

        return contactList.size();
    }

    @Override
    public Contact getItem(int position) {

        return contactList.get(position);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        Holder holder;
        if (convertView == null) {
            convertView = layoutInflater.inflate(
                    R.layout.withsomeone_contact_list_item, null);
            holder = new Holder();
            holder.name = (TextView) convertView.findViewById(R.id.name);
            holder.phone = (TextView) convertView.findViewById(R.id.phone);
            convertView.setTag(holder);
        } else {
            holder = (Holder) convertView.getTag();
        }

        Contact contact = getItem(position);
        holder.name.setText(contact.contactName);
        holder.phone.setText(contact.num);
        return convertView;
    }

    @Override
    public Filter getFilter() {
        Filter contactFilter = new Filter() {

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint,
                    FilterResults results) {
                if (results.values != null) {
                    contactList = (ArrayList<Contact>) results.values;
                    notifyDataSetChanged();
                }

            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                // CharSequence t = "";
                System.out.println("contraints is equal: " + constraint);
                // if (constraint.toString().contains("call ")) {
                // // constraint = "";
                // System.out.println("contraints now: "
                // + constraint.toString().replace("call ", ""));
                // t = constraint.toString().replace("call ", "");
                // }
                // } else if
                // (constraint.toString().equalsIgnoreCase("call back ")) {
                // // constraint = "";
                // System.out.println("contraints now: " + constraint);
                // t = constraint.toString().replace("call back ", "");
                //
                // }
                // System.out.println("clone is equal: " + t);
                String sortValue = constraint == null ? "" : constraint
                        .toString().toLowerCase();
                FilterResults filterResults = new FilterResults();
                if (!TextUtils.isEmpty(sortValue.trim())) {
                    ArrayList<Contact> sortedContactList = new ArrayList<Contact>();
                    for (Contact contact : cloneContactList) {
                        if (contact.contactName.toLowerCase().contains(
                                sortValue)
                                || contact.num.toLowerCase()
                                        .contains(sortValue))
                            sortedContactList.add(contact);
                    }

                    filterResults.values = sortedContactList;
                    filterResults.count = sortedContactList.size();

                }
                return filterResults;
            }

            @Override
            public CharSequence convertResultToString(Object resultValue) {
                // need to save this to saved contact
                return ((Contact) resultValue).contactName;
            }
        };

        return contactFilter;
    }

    @SuppressWarnings("unchecked")
    public void setContactList(ArrayList<Contact> contactList) {
        // this isn't the efficient method
        // need to improvise on this
        this.contactList = contactList;
        this.cloneContactList = (ArrayList<Contact>) this.contactList.clone();
        notifyDataSetChanged();
    }

    public static class Holder {
        public TextView phone, name;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:25:41.580

仍然有点不清楚你想要实现什么。

反正。

作为第一步，我会将 TextWatcher 附加到 mEditText

```
mEditText.addTextChangedListener(mTextWatcher); 
```

然后我会删除

```
contactPickerAdapter.getFilter().filter(t); 
```

看看情况如何。

我建议您也发布您的代码`contactPickerAdapter`。

# php - 从 SQL Server 2008 返回数据 使用 PHP v. 5.4 用户定义的表类型

> ID：15097090
> 
> 赞同：0
> 
> 时间：2013-02-26T18:55:59.020
> 
> 标签：php, sql-server-2008

使用 PHP v. 5.4，我正在尝试连接到 SQL 2008 数据库并插入并返回 SQL 用户定义的表类型中的数据。

SQL表数据类型定义如下：
`create type ScreensTableType as table(ElementCode decimal(6,2), ElementYear int, MinimumValue float, MaximumValue float, AndOr bit)`

我的 PHP 代码的精简版是：

```
<?php
$sqlStr='';
$serverName = "Server"; //serverName\instanceName
$connectionInfo = array( "Database"=>"Db");
$conn = sqlsrv_connect( $serverName, $connectionInfo);

if(!$conn ) {
     echo "Connection could not be established.<br />";
     die( print_r( sqlsrv_errors(), true));
}    
$sqlStr="declare @ScreensParam [ScreensTableType] insert @ScreensParam values (5101.00,2011,0,100,1),(5103.00,2011,0,100,1) select * from @ScreensParam";
  // print $sqlStr;
$getFormData=sqlsrv_query($conn, $sqlStr);

if( $getFormData === false )
{
      if( ($errors = sqlsrv_errors() ) != null)
      {
         foreach( $errors as $error)
         {
            echo "SQLSTATE: ".$error[ 'SQLSTATE']."\n";
            echo "code: ".$error[ 'code']."\n";
            echo "message: ".$error[ 'message']."\n";
         }
      }
}

     while( $row = sqlsrv_fetch_array( $getFormData, SQLSRV_FETCH_ASSOC) ) {
       print '####'.$row['ElementCode'];

     }
?> 
```

连接正常，没有返回错误。然而，什么都没有返回。如果我在 Management Studio 中打印并运行 $sqlStr ，它可以正常工作。如果我将 $sqlStr 更改为`"select top 10 * from someExistingDbTable"`然后我会返回数据。

有人对如何做到这一点或我可能做错了什么有任何想法吗？

非常感谢，

担

**第 2 部分**
这是我正在尝试做的 - sp 从 Web 表单返回请求的财务数据。用户从表单中选择以下选项：

```
"financial item", "financial year", "minimum value", "maximum value", "and/or"  
Revenue, 2010, 1000000, 10000000, 'and'  
EPS, 2011, 0.5, 1.5, 'or' 
```

根据用户的要求，可能有 1 行或 50 行。我想将这些项目加载到 UDTT 中。在存储过程中，我创建了一个动态查询。游标遍历 UDTT 的行并在动态查询的 where 子句中创建条件。然后返回数据。

我遇到的问题是，当我使用 UDTT 时，我似乎无法让 PHP 返回任何结果。我只是使用上面的简化示例来查看是否有人可以返回数据。

我应该补充一点，当我打印从 PHP 传递到 SQL 的“真实”字符串时，存储过程确实会返回数据。而且我与 SQL 的连接很好。

**第三部分也是最后一部分** 我应该在原始问题的开头说我是 PHP 的新手。不过在 SQL 方面还不错。

好的，这是我尝试过的：

没有 UDTT 的 SQL

```
drop procedure testUDTT

go

create PROCEDURE [testUDTT]
as
SET NOCOUNT ON
select XmlRequest = '###Data Returned###'

go 
```

如果我运行以下 PHP 代码，则返回数据：

```
$select="exec testUDTT";
$sqlResponse=sqlsrv_query($conn, $select);
while( $row = sqlsrv_fetch_array( $sqlResponse, SQLSRV_FETCH_ASSOC) ) {
  print '####'.$row['XmlRequest'];
  } 
```

如果我将 $select 更改为：

```
$select="declare @ScreensParam [ScreensTableType] exec testUDTT"; 
```

返回数据。

但是，如果我将 $select 更改为：

```
$select="declare @ScreensParam [ScreensTableType] insert @ScreensParam values (5101.00,2011,0,100,1),(5103.00,2011,0,100,1) exec testUDTT"; 
```

**没有**数据返回，也没有错误？？？。我怀疑 SQL 希望在“insert”和“exec”语句之间有一个“GO”，尽管当我从 SSMS 运行时这工作正常。

我也在考虑另一种方式。如果上述存储过程有一个像 int 这样的输入参数，例如：

```
create PROCEDURE [testUDTT]
@InputInt int
as
SET NOCOUNT ON
if @InputInt > 0
  select XmlRequest = '###Data Returned###' 
```

我的 PHP 代码可能类似于：

```
$inputInt=1;
$select="exec testUDTT @InputInt=?";
$params = array(
  array($inputInt, SQLSRV_PARAM_IN)
  );
$sqlResponse=sqlsrv_query($conn, $select, $params); 
```

现在，如果我有这个使用 UDTT 的存储过程：

```
create PROCEDURE [testUDTT]
@ScreensParam ScreensTableType READONLY
as
SET NOCOUNT ON
select XmlRequest = '###Data Returned###'
from @ScreensParam

go 
```

我尝试将 PHP 对 sql 的调用分成两部分（不确定这是否正确，但试了一下）：

```
$add='declare @ScreensParam [ScreensTableType] insert @ScreensParam values (5101.00,2011,0,100,1),(5103.00,2011,0,100,1)';
$select='exec testUDTT @ScreensParam='.$screensParam;

sqlsrv_query($conn, $add);
$sqlResponse=sqlsrv_query($conn, $select); 
```

我收到以下错误：`SQLSTATE: 42000 code: 137 message: [Microsoft][SQL Server Native Client 11.0][SQL Server]Must declare the scalar variable "@ScreensParam".`因为我猜 UDTT 不在范围内。另外我想知道在数组中传递 @ScreensParam 的 PHP 语法应该是什么？$select 会变成`exec testUDTT @ScreensParam=?`where `"?" = '@ScreensParam'`。不知道？

所以我找到了一个创建 XML 而不是使用 UDTT 的解决方案，这是可以接受的。我已经花了足够多的时间试图让它发挥作用。我有一个偷偷摸摸的怀疑，我想做的事情目前不能用 PHP 完成。

如果有人有/找到解决方案，我很想知道。

感谢模糊按钮的帮助。尝试很有趣。

使用 PHP v. 5.4，我正在尝试连接到 SQL 2008 数据库并插入并返回 SQL 用户定义的表类型中的数据。

SQL表数据类型定义如下：
`create type ScreensTableType as table(ElementCode decimal(6,2), ElementYear int, MinimumValue float, MaximumValue float, AndOr bit)`

我的 PHP 代码的精简版是：

```
<?php
$sqlStr='';
$serverName = "Server"; //serverName\instanceName
$connectionInfo = array( "Database"=>"Db");
$conn = sqlsrv_connect( $serverName, $connectionInfo);

if(!$conn ) {
     echo "Connection could not be established.<br />";
     die( print_r( sqlsrv_errors(), true));
}    
$sqlStr="declare @ScreensParam [ScreensTableType] insert @ScreensParam values (5101.00,2011,0,100,1),(5103.00,2011,0,100,1) select * from @ScreensParam";
  // print $sqlStr;
$getFormData=sqlsrv_query($conn, $sqlStr);

if( $getFormData === false )
{
      if( ($errors = sqlsrv_errors() ) != null)
      {
         foreach( $errors as $error)
         {
            echo "SQLSTATE: ".$error[ 'SQLSTATE']."\n";
            echo "code: ".$error[ 'code']."\n";
            echo "message: ".$error[ 'message']."\n";
         }
      }
}

     while( $row = sqlsrv_fetch_array( $getFormData, SQLSRV_FETCH_ASSOC) ) {
       print '####'.$row['ElementCode'];

     }
?> 
```

连接正常，没有返回错误。然而，什么都没有返回。如果我在 Management Studio 中打印并运行 $sqlStr ，它可以正常工作。如果我将 $sqlStr 更改为`"select top 10 * from someExistingDbTable"`然后我会返回数据。

有人对如何做到这一点或我可能做错了什么有任何想法吗？

非常感谢，

担

**第 2 部分**
这是我正在尝试做的 - sp 从 Web 表单返回请求的财务数据。用户从表单中选择以下选项：

```
"financial item", "financial year", "minimum value", "maximum value", "and/or"  
Revenue, 2010, 1000000, 10000000, 'and'  
EPS, 2011, 0.5, 1.5, 'or' 
```

根据用户的要求，可能有 1 行或 50 行。我想将这些项目加载到 UDTT 中。在存储过程中，我创建了一个动态查询。游标遍历 UDTT 的行并在动态查询的 where 子句中创建条件。然后返回数据。

我遇到的问题是，当我使用 UDTT 时，我似乎无法让 PHP 返回任何结果。我只是使用上面的简化示例来查看是否有人可以返回数据。

我应该补充一点，当我打印从 PHP 传递到 SQL 的“真实”字符串时，存储过程确实会返回数据。而且我与 SQL 的连接很好。

**第三部分也是最后一部分** 我应该在原始问题的开头说我是 PHP 的新手。不过在 SQL 方面还不错。

好的，这是我尝试过的：

没有 UDTT 的 SQL

```
drop procedure testUDTT

go

create PROCEDURE [testUDTT]
as
SET NOCOUNT ON
select XmlRequest = '###Data Returned###'

go 
```

如果我运行以下 PHP 代码，则返回数据：

```
$select="exec testUDTT";
$sqlResponse=sqlsrv_query($conn, $select);
while( $row = sqlsrv_fetch_array( $sqlResponse, SQLSRV_FETCH_ASSOC) ) {
  print '####'.$row['XmlRequest'];
  } 
```

如果我将 $select 更改为：

```
$select="declare @ScreensParam [ScreensTableType] exec testUDTT"; 
```

返回数据。

但是，如果我将 $select 更改为：

```
$select="declare @ScreensParam [ScreensTableType] insert @ScreensParam values (5101.00,2011,0,100,1),(5103.00,2011,0,100,1) exec testUDTT"; 
```

**没有**数据返回，也没有错误？？？。我怀疑 SQL 希望在“insert”和“exec”语句之间有一个“GO”，尽管当我从 SSMS 运行时这工作正常。

我也在考虑另一种方式。如果上述存储过程有一个像 int 这样的输入参数，例如：

```
create PROCEDURE [testUDTT]
@InputInt int
as
SET NOCOUNT ON
if @InputInt > 0
  select XmlRequest = '###Data Returned###' 
```

我的 PHP 代码可能类似于：

```
$inputInt=1;
$select="exec testUDTT @InputInt=?";
$params = array(
  array($inputInt, SQLSRV_PARAM_IN)
  );
$sqlResponse=sqlsrv_query($conn, $select, $params); 
```

现在，如果我有这个使用 UDTT 的存储过程：

```
create PROCEDURE [testUDTT]
@ScreensParam ScreensTableType READONLY
as
SET NOCOUNT ON
select XmlRequest = '###Data Returned###'
from @ScreensParam

go 
```

我尝试将 PHP 对 sql 的调用分成两部分（不确定这是否正确，但试了一下）：

```
$add='declare @ScreensParam [ScreensTableType] insert @ScreensParam values (5101.00,2011,0,100,1),(5103.00,2011,0,100,1)';
$select='exec testUDTT @ScreensParam='.$screensParam;

sqlsrv_query($conn, $add);
$sqlResponse=sqlsrv_query($conn, $select); 
```

我收到以下错误：`SQLSTATE: 42000 code: 137 message: [Microsoft][SQL Server Native Client 11.0][SQL Server]Must declare the scalar variable "@ScreensParam".`因为我猜 UDTT 不在范围内。另外我想知道在数组中传递 @ScreensParam 的 PHP 语法应该是什么？$select 会变成`exec testUDTT @ScreensParam=?`where `"?" = '@ScreensParam'`。不知道？

所以我找到了一个创建 XML 而不是使用 UDTT 的解决方案，这是可以接受的。我已经花了足够多的时间试图让它发挥作用。我有一个偷偷摸摸的怀疑，我想做的事情目前不能用 PHP 完成。

如果有人有/找到解决方案，我很想知道。

感谢模糊按钮的帮助。尝试很有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:24:49.950

好的，在切换到 XML 解决方案后，我正在寻找如何在 PHP 中做其他事情，并且偶然发现了一个关于在 PHP 中使用 SQL 临时表的问题，并且响应使用了 sqlsrv_next_result() 函数。所以这现在很好用：

```
$sqlStr=
  <<<SQL
    declare @ScreensParam [ScreensTableType]
    insert @ScreensParam values (5101.00,2011,-1000,1000,1),(5103.00,2011,0,100,1)
    exec xml_testIndustry '1,2', 2009, 2011, @ScreensParam
  SQL;

$getFormData=sqlsrv_query($conn, $sqlStr);
echo "Rows affected: " . sqlsrv_rows_affected($getFormData).'<br/>';

$next_result = sqlsrv_next_result($getFormData);
if( $next_result ) {
   while( $row = sqlsrv_fetch_array( $getFormData, SQLSRV_FETCH_ASSOC)){
      echo $row['XmlRequest'].": <br />"; 
   }
} elseif( is_null($next_result)) {
     echo "No more results.<br />";
} else {
     die(print_r(sqlsrv_errors(), true));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:34:11.777

我一直在考虑这个。

首先，我玩过
`$sqlStr="DECLARE @test varchar(max) SET @test='123' SELECT * from table";`
并且可以确认多个语句确实可以运行正常:)

第二...

**编辑在**[http://sqlfiddle.com/#!3/b1596/73](http://sqlfiddle.com/#!3/b1596/73)
中播放更多内容，您似乎可以将值表作为定义的表类型传递给 SQL 命令，并使用临时表作为参数执行 SP。 .. *（进行了大量的实验，但我最终发现 sqlfiddle 对分号非常挑剔，有时不会将注释视为注释！）*

 *```
create type ScreensTableType1 as table
 (ElementCode decimal(6,2), ElementYear int, MinimumValue float,
  MaximumValue float, AndOr bit); 
```

一个用于演示表参数的 SP，它输出传入的内容：

```
CREATE PROCEDURE testSP
  ( @ParamTab ScreensTableType1 Readonly )
AS 
begin
  SELECT * FROM @ParamTab
end; 
```

应该能够在 PHP 中将多行数据加载到 SP...
一种方法：使用 CTE：

```
DECLARE @S1 as ScreensTableType1
With data_in as
(
 SELECT
   5101.00 as ElementCode, 2011 as ElementYear,
   0 as MinimumValue, 100 as MaximumValue, 1 as AndOr
 UNION ALL 
 SELECT 5103.00,2011,0,100,1
)
INSERT @S1 SELECT * from data_in
Exec testSP @S1 
```

.. 或多个 INSERT：

```
DECLARE @S2 as ScreensTableType1
insert @S2 values (5199.00,2011,0,100,1)
insert @S2 values (5177.00,2011,0,100,1)
EXEC testSP @S2 
```*

# android - 获取 32px favicon.ico

> ID：15097092
> 
> 赞同：2
> 
> 时间：2013-02-26T18:56:02.173
> 
> 标签：android, httprequest, user-agent, favicon

我试图获取网站的 32px favicon.ico，但它获得的响应是​​ 16px 的 favicon，我想是因为我试图通过智能手机获取它，但我尝试更改 http 请愿的用户代理这里没有结果是我的代码：

```
DefaultHttpClient client = new DefaultHttpClient();
            String baseUrl = getBaseUrl(url);
            HttpGet httpGet = new HttpGet(baseUrl + "/favicon.ico");
            httpGet.setHeader("User-Agent", "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.45 Safari/535.19");
            HttpResponse httpResponse = null;
            try {
                httpResponse = client.execute(httpGet);
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }catch (NullPointerException e) {
                e.printStackTrace();
            }
            InputStream is = null;
            try {
                is = (java.io.InputStream) httpResponse.getEntity().getContent();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } catch (NullPointerException e) {
                e.printStackTrace();
            }
            Drawable favicon = Drawable.createFromStream(is, "src");
            final BitmapDrawable bd = (BitmapDrawable) favicon; 
```

知道如何得到它吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T10:21:41.357

一个`.ico`文件可以包含多张图片。因此，`favicon.ico`您得到的文件很可能包含一张 16x16 的图片*和*一张 32x32 的图片。

您可以使用`icotool`命令行工具来分析`.ico`文件：

```
# On Ubuntu
sudo apt-get install icoutils
icotool -l favicon.ico
--icon --index=1 --width=16 --height=16 --bit-depth=32 --palette-size=0
--icon --index=2 --width=32 --height=32 --bit-depth=32 --palette-size=0
--icon --index=3 --width=48 --height=48 --bit-depth=32 --palette-size=0
# 3 pictures in this favicon.ico file 
```

在 Windows 上，当您`.ico`使用默认查看器（只需双击文件）打开文件时，查看器可让您浏览文件中包含的多张图片。它不会打印他们的分辨率，但至少你知道你的奇怪行为发生了什么。

![在此处输入图像描述](../Images/c869ae596bc3929f89eaf34a2180756e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T23:13:56.320

智能手机无法做到这一点。实际上在某些网站图标大小为 16 像素，而其他网站图标大小为 32 像素。像 facebook、google、twitter 有 16px 的 favicon 和 yahoo、google plus 有 32 px 的 favicon...

# android - 如何通过蓝牙正确地将数据流式传输到 Android

> ID：15097094
> 
> 赞同：8
> 
> 时间：2013-02-26T18:56:06.453
> 
> 标签：android, bluetooth, serial-communication, data-stream

我正在开发一个应用程序，该应用程序从通过蓝牙传输数据的 DAQ 读取数据。数据包大小可以改变，采样率（1Hz - 512Hz）也可以改变，我可以使用缓冲区循环并从设备读取数据。

我的问题是，当数据包大小和采样率存在这样的变量时，如何正确处理数据？如何确定缓冲区大小？

目前我只是打开一个套接字，打开一个输入流，然后使用 while 循环（当套接字打开 == true 时）从流中读取，并处理数据（简单解码，而不是无关的任务）。

例如，一个数据包中有 23 个字节，而我目前的采样率非常低，为 1Hz。我有一个 256 字节的缓冲区，这意味着它不会在缓冲区的末尾容纳一个完整的数据包，我已经编写了代码让它运行到下一个缓冲区。读取数据后，从缓冲区中抓取一个数据包，解码并存储它，执行下一个数据包，等等。

我应该如何正确传输和处理数据？最终，我将在 512Hz 的 44 个数据包区域中抓取一些东西，正好处于蓝牙传输限制，我希望能够尽可能有效地处理它，并在过程中丢弃数据包时显示错误等。

TL；DR：我如何使用缓冲区和/或中断正确地流式传输数据。

# powershell - 找不到路径？

> ID：15097096
> 
> 赞同：0
> 
> 时间：2013-02-26T18:56:07.547
> 
> 标签：powershell, powershell-3.0

我正在尝试使用 Powershell 3.0 针对 multilpe 服务器运行以下命令，但由于某种原因，我发现路径不存在......即使它存在？

有任何想法吗？

代码：

```
clear
$computer = Get-Content -path c:\temp\servers.txt

foreach ($computer1 in $computer){

Write-Host $computer1
Get-Content -Path '\\$computer1\C$\Program Files\BMC Software\BladeLogic\RSCD\rscd.log' -Tail 10

} 
```

错误：

> SV191267 获取内容：找不到路径“\$computer1\C$\Program Files\BMC Software\BladeLogic\RSCD\rscd.log”，因为它不存在。在 C:\Users\gaachm5\AppData\Local\Temp\e4651274-dcab-4a87-95a6-0f11437a7187.ps1:7 char:1 + Get-Content -Path '\$computer1\C$\Program Files\BMC Software\ BladeLogic\RSCD\rs ... + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : ObjectNotFound: (\$computer1\C $...c\RSCD\rscd.log:String) [Get-Content], ItemNotFoundException + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetContentCommand
> 
> SV193936 获取内容：找不到路径“\$computer1\C$\Program Files\BMC Software\BladeLogic\RSCD\rscd.log”，因为它不存在。在 C:\Users\gaachm5\AppData\Local\Temp\e4651274-dcab-4a87-95a6-0f11437a7187.ps1:7 char:1 + Get-Content -Path '\$computer1\C$\Program Files\BMC Software\ BladeLogic\RSCD\rs ... + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : ObjectNotFound: (\$computer1\C $...c\RSCD\rscd.log:String) [Get-Content], ItemNotFoundException + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetContentCommand

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:00:05.347

尝试：

```
"\\$computer1\C`$\Program Files\BMC Software\BladeLogic\RSCD\rscd.log" -Tail 10 
```

在单引号`'`中，变量不会被扩展，而是被视为文字`$computer1`，`$`for`$admin share`必须用反引号 ` 转义

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T21:44:40.647

找不到的路径前面只有一个\，UNC共享必须以两个\开头。我可以从您的代码中看到，您似乎在为两个 \ 加上前缀，但看起来并没有被延续。

正如已经指出的那样，我会使用双引号而不是单引号，如果你这样做，那么你也不应该需要转义 $ 字符。

假设本地计算机上的 C:\temp 文件夹中存在一个名为 file.txt 的文件。

这失败了：

```
$computer1 = "localhost"
Test-Path '\\$computer1\c$\temp\file.txt' 
```

这有效：

```
$computer1 = "localhost"
Test-Path "\\$computer1\c$\Temp\file.txt" 
```

# vba - MS Word 宏 - 查找文本模式并应用样式

> ID：15097098
> 
> 赞同：2
> 
> 时间：2013-02-26T18:56:14.980
> 
> 标签：vba, ms-word

我正在研究一个可以找到文本模式并应用样式的宏。

文件内容：

> Start-Style1Test HeadingEnd-Styles1Start-Style2 - 这是段落。End-Styles2

在这里，我的宏将搜索“Start-Style1 * End-Style1”并应用 style1。在我们的例子中，“测试标题”将应用 style1。同样，它也会对 style2 做同样的事情。如果我的标题和上下文在不同的行中，我的宏工作正常。

但如果是同一行。仅应用一种样式。在深入研究这个问题时，我发现这是由于两种样式的样式类型都是“段落”。

如果我将其更改为“字符”作为样式类型，我可以获得预期的输出。我想在不更改样式类型的情况下应用样式。如果可能的话，请告诉我。

这是我的代码：

```
Application.ScreenUpdating = False
Dim RngStory As Range
Dim StrStart
Dim StrEnd
Dim Styles
StrStart = Array("Start-Style1", "Start-Style2")
StrEnd = Array("End-Style1", "End-Style2")
Styles = Array("Style1", "Style1")
For i = 0 To 1
Set RngStory = ActiveDocument.Range
With RngStory.Find

  .ClearFormatting
  .Text = StrStart(i) & "*" & StrEnd(i)
  .Forward = True
  '.Wrap = wdFindStop
  .MatchCase = False
  .MatchWholeWord = False
  .MatchWildcards = True
  .MatchSoundsLike = False
  .MatchAllWordForms = False
  .Replacement.Text = ""
  Do While .Execute
    With RngStory.Duplicate
      .Start = .Start + Len(StrStart(i))
      .End = .End - Len(StrEnd(i))
      .Style = ActiveDocument.Styles(Styles(i))
       .End = .End - Len(StrEnd(i))
      .Collapse (wdCollapseEnd)
    End With
  Loop
End With
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T01:16:37.693

在同一行结合两种样式是我们在法律文件中经常做的事情。示例：标题 1 到标题 9 将链接到编号。此外，标题 2 样式可能需要使用我们称为“前导强调”（也称为“在标题中运行”）的格式进行设置。最后，段落的其余部分将由正文样式组成。为了实现这种格式，我们将使用 (1) 正文样式中的样式分隔符或 (2) 使用隐藏属性格式化的段落标记。下面是这种格式的一个例子：

```
 Article I <--Heading 1 style 
```

第 1.1 节介绍：第 1.1 节的编号是使用 Heading 2 样式实现的，但本段的剩余文本实际上是正文文本样式。

第 1.2 节更多文本：第 1.2 节的编号是通过标题 2 样式实现的，但本段的剩余文本实际上是正文文本样式。

```
 Article II <--Heading 1 style 
```

第 2.1 节引入强调：第 2.1 节的编号是通过标题 2 样式实现的，但该段落的剩余文本实际上是正文文本样式。

第 2.2 节更多文本：第 2.1 节的编号是通过标题 2 样式实现的，但本段的其余文本实际上是正文文本样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:46:04.700

不幸的是，在同一行（实际上是一个段落或其中的一部分）中组合两种不同样式类型的唯一方法是使用一种`character`样式，但这不太可能是您想要的。

在 Word 文档中，您通常将段落样式用于文本的主要部分，例如标题，以及段落，然后在需要时在段落样式之上使用字符样式。例如，内置的 Word 字符样式用于脚注和页码。

您可以在此处阅读更多信息：http: [//office.microsoft.com/en-us/word-help/understanding-paragraph-character-list-and-table-styles-HA001187614.aspx](http://office.microsoft.com/en-us/word-help/understanding-paragraph-character-list-and-table-styles-HA001187614.aspx)

你有理由想在同一条线上组合不同的风格吗？

# grails - Lucene Grails Searchable plugin build index for part of the table

> ID：15097102
> 
> 赞同：1
> 
> 时间：2013-02-26T18:56:33.510
> 
> 标签：grails, lucene, searchable, compass-lucene

我有一个可搜索的域类映射到具有标志列的表。目前，当 Lucene 创建索引时，它会生成这样的查询（返回表中的所有数据）：

```
 select this_.id as id0_0_, 
               this_.flag as flag2_0_0_, 
               this_.email as email0_0_, this_.first_name as first6_0_0_, this_.last_name as last8_0_0_ 
        from ais_person this_ 
        order by this_.id asc 
```

是否可以仅为那些包含特定标志值的行构建索引，以便生成的查询如下所示：

```
 select this_.id as id0_0_, 
           this_.flag as flag2_0_0_, 
           this_.email as email0_0_, this_.first_name as first6_0_0_, this_.last_name as last8_0_0_ 
    from ais_person this_ 
    where this_.flag = 'Y' 
    order by this_.id asc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:40:51.980

是的，我认为你可以做到这一点。以下是伪代码。

```
 Document doc = new Document();
doc.add(Field.Text("flag", Y)); 
```

# android - 如何使用正文执行 HTTP DELETE 请求？

> ID：15097104
> 
> 赞同：1
> 
> 时间：2013-02-26T18:56:39.150
> 
> 标签：android, rest, http, http-delete

我想在正文（不是表单）中使用 xml 执行 HTTP DELETE 请求。如何执行此 HTTP DELETE 请求？

我试过了，[`HttpURLConnection`](http://developer.android.com/reference/java/net/HttpURLConnection.html)但[它有一些限制](https://stackoverflow.com/q/9100776/842697)。

我也尝试过使用apache [`HttpClient`](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)。但是我不知道如何在没有`application/x-www-form-urlencoded`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-10T10:06:17.707

这段代码将使它：

```
try {
        HttpEntity entity = new StringEntity(jsonArray.toString());
        HttpClient httpClient = new DefaultHttpClient();
        HttpDeleteWithBody httpDeleteWithBody = new HttpDeleteWithBody("http://10.17.1.72:8080/contacts");
        httpDeleteWithBody.setEntity(entity);

        HttpResponse response = httpClient.execute(httpDeleteWithBody);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

要访问响应，您只需执行以下操作：`response.getStatusLine();`

这是 HttpDeleteWithBody 类定义：[HttpDeleteWithBody](https://github.com/loopj/android-async-http/issues/290)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T09:31:08.940

为什么不使用 HttpClient 执行此操作

```
class MyDelete extends HttpPost{
    public MyDelete(String url){
        super(url);
    }
    @Override
    public String getMethod() {
        return "DELETE";
    }

} 
```

它运作良好。

# r - ggplot2中因子均值之间的连接线

> ID：15097107
> 
> 赞同：0
> 
> 时间：2013-02-26T18:56:56.860
> 
> 标签：r, ggplot2, linegraph

我试图创建一个简单的均值和交互折线图。我在 y 轴上有一个 DV（阅读时间），在 x 轴上有一个因子（长度），另一个作为分组变量（位置）。

我使用的语法如下。对于两个长度条件中的每一个，数据都绘制为一条线上的单个点，但没有与两个长度条件之间的线连接。我在语法方面缺少什么？

我正在使用 R i386 2.15.2，并在上周更新了 ggplot2。

这是一个可重现的示例

```
SubjectID <- c(101,101,101,101,101,101,101,101,102,102,102,102,102,102,102,102,
        201,201,201,201,201,201,201,201,202,202,202,202,202,202,202,202)
Group <- c("PWA","PWA","PWA","PWA","PWA","PWA","PWA","PWA","PWA","PWA","PWA",
        "PWA","PWA","PWA","PWA","PWA","Control","Control","Control",
        "Control","Control","Control","Control","Control","Control",
        "Control","Control","Control","Control","Control","Control",
        "Control")
Length <- c(1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2)
Pos <- c(1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2,1,1,2,2)
ReadT <- c(6.7,7.6,6.4,7.9,5.4,6.4,6.3,7.4,6.9,7.2,6.7,7.4,5.7,6.1,6.5,7.8,
        6.1,5.7,4.9,6.1,4.7,6.5,6.1,6.2,6.9,5.9,4.8,6.5,4.6,6.3,6.7,6.6)

data <- data.frame (SubjectID, Group,Length,Pos,ReadT)
data$Length <- factor(data$Length, order = TRUE,
        levels = c(1,2),
        labels = c("Length 1", "Length 2"))
data$Pos <- factor(data$Pos, order = TRUE,
        levels = c(1,2),
        labels = c("Position 1", "Position 2"))

qplot(Length, data=data, ReadT, geom=c("point", "line"), 
    stat="summary", fun.y=mean, group=Pos, colour=Pos, 
    facets = ~Group) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:49:07.297

我认为您没有重现任何不一致之处，但是通过尝试将所有内容压缩到单个`qplot`调用中，您的问题部分被蒙上了阴影。

您的`x`变量`Length`是一个因素，因此`ggplot`明智地考虑`Length 1`并`Length 2`保持独立，并且不会连接线。

其次，如果不强迫这些成为一个因素（因此是独立的），您将无法使用`stat_summary`您的价值观进行总结。`x`

我发现预先汇总数据而不依赖 ggplot 最容易。

例如

```
library(plyr)
data.means <- ddply(data, .(Group, Pos, Length), summarize, ReadT = mean(ReadT)) 
```

`ggplot`然后使用not构建绘图`qplot`，为您提供所需的灵活性（和透明度）。

连接线路的技巧是`x`在调用中考虑数字，例如[在这里](https://stackoverflow.com/questions/12504721/connect-mean-points-of-error-bars/12504848#12504848)`geom_line`查看

```
ggplot(data.means, aes(x= Length, y= ReadT, colour = Pos)) + 
 geom_point() +
 geom_line(aes(x=as.numeric(Length))) +
 facet_grid(~Group) 
```

* * *

如果你坚持使用原始数据和`stat_xxxx`函数，你也可以复制它`stat_smooth`来估计平均值（这将保持`x`分类为数字）

```
ggplot(data, aes(x = Length, y= ReadT, colour = Pos)) + 
 stat_summary(fun.y = 'mean', geom = 'point')+
 stat_smooth(method = 'lm', aes(x=as.numeric(Length)), se = FALSE) +
 facet_grid(~Group) 
```

# dotnetnuke - DotNetNuke 在多个编辑模块之间切换

> ID：15097111
> 
> 赞同：1
> 
> 时间：2013-02-26T18:57:06.147
> 
> 标签：dotnetnuke, dotnetnuke-module

我在 DNN 7 中有一个自定义模块，它有一个数据结构，其中项目属于类别（称为“部分”，不是 DNN 分类，只是一个简单的部分名称列表）。模块编辑屏幕的工作原理是，在视图控件上，您可以单击每个类别的编辑链接，这会加载类别编辑屏幕（传递类别 ID）。这很好用，当您保存时，我`Globals.NavigateURL()`会返回查看屏幕。这一切都按预期工作。

在每个类别编辑屏幕上，我还有该类别中的项目列表，每个项目都有一个编辑链接。单击编辑链接打开项目编辑屏幕，传递正确的项目 ID，并允许我编辑该项目。这一切都很好，直到你保存。保存工作正常，但是当我想将用户发送回该类别的编辑屏幕时，它不起作用。当我使用：

```
Response.Redirect(EditUrl("SectionId", sectionid.ToString(), "EditSections"), true); 
```

...什么都没发生。它根本不会重定向到任何地方。这与我最初用于访问类别编辑页面的 URL 完全相同：

```
EditUrl("SectionId", Eval("SectionId").ToString(), "EditSections") 
```

然后我使用类似的 URL 进入项目编辑页面：

```
EditUrl("ItemId", Eval("ItemId").ToString(), "EditItems") 
```

我不明白为什么使用相同的 URL 导航到我已经导航到的同一页面根本不会做任何事情。现在我将它们一直发送回视图，但是如果您需要将多个项目添加到同一类别中，必须导航回该类别并添加另一个项目，然后才被发送回视图，这会很痛苦。

以前有人见过这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:46:53.227

您是否尝试过使用 NavigateUrl 的重载而不是 EditUrl？

```
Globals.NavigateURL(TabId, "EditSections", "mid", ModuleId.ToString(), "SectionId", Eval("SectionId").ToString()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:25:20.937

我自己还没有看到，但我不得不假设 EditURL 以某种方式丢失了上下文，因此您没有被发送到正确的位置。

我建议你尝试两件事之一（或两者）。

1.  调试 EditURL 返回的 URL，看看是否能找到不同之处。
2.  对所有链接使用 NavigateURL，并将模块 ID 的 MID=## 作为查询字符串参数传递，以确保传递正确的值。

更新：如果您尝试拥有多个编辑视图并在它们之间移动，您可能会考虑使用“加载器”而不是为编辑控件使用单独的模块定义。基本上定义了一个 Edit.ascx 文件，它在其中加载其他 ASCX 文件，注入到面板中。[此模块http://dnnsimplearticle.codeplex.com/](http://dnnsimplearticle.codeplex.com/)上的 View 控件可以做到这一点，但我之前没有尝试过使用编辑控件。

# sql - 使用 sql join 更新表

> ID：15097112
> 
> 赞同：0
> 
> 时间：2013-02-26T18:57:24.287
> 
> 标签：sql, join, sql-update

我正在尝试根据另一个表中的某个值是否为“999”来更新一个表。下面是代码。我正在跨数据库，所以我对语法有点困惑。

我收到此错误：SQL 错误：关键字“left”附近的语法不正确。

```
 declare @ProcessDate datetime
set @ProcessDate=getdate()

update ${BccrDatabase}..ReturnsHeader
  left join ${JdeDatabase}.f47011 poh on --Temp Header
    poh.SYEDOC = ReturnsHeader.DocumentNumber and poh.SYEDCT = 'EP'
  left join ${JdeDatabase}.f4201 soh on --Prod Header
    soh.SHKCOO = poh.SYEKCO 
    and soh.SHDOCO = poh.SYDOCO
    and soh.SHDCTO = poh.SYEDCT
  left join ${JdeDatabase}.f4211 sod on --Production Detail
    sod.SDKCOO = soh.SHKCOO
    and sod.SDDOCO = soh.SHDOCO
    and sod.SDDCTO = soh.SHDCTO 
  left join jde_crp.crpdta.f42119 hist on --History Detail
    hist.sddoco = soh.SHDOCO and
    hist.sdkcoo = soh.SHKCOO and
    hist.sddcto = soh.SHDCTO
 set
  SentToEdiDate=@ProcessDate
where 
  SentToEdiDate is null 
  and ApprovalStepID=4 -- Complete
  and DocumentBranchPlant=@BranchPlant
  and sod.SDNXTR is not null or hist.SDNXTR is not null 
  and sod.SDNXTR = '999' or hist.SDNXTR = '999' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:02:09.450

如果我理解正确你的代码应该是这样的：

```
declare @ProcessDate datetime
set @ProcessDate=getdate()

update ${BccrDatabase}..ReturnsHeader
set SentToEdiDate=@ProcessDate
FROM ${BccrDatabase}..ReturnsHeader
    left join ${JdeDatabase}.f47011 poh on --Temp Header
        poh.SYEDOC = ReturnsHeader.DocumentNumber and poh.SYEDCT = 'EP'
    left join ${JdeDatabase}.f4201 soh on --Prod Header
        soh.SHKCOO = poh.SYEKCO 
        and soh.SHDOCO = poh.SYDOCO
        and soh.SHDCTO = poh.SYEDCT
    left join ${JdeDatabase}.f4211 sod on --Production Detail
        sod.SDKCOO = soh.SHKCOO
        and sod.SDDOCO = soh.SHDOCO
        and sod.SDDCTO = soh.SHDCTO 
    left join jde_crp.crpdta.f42119 hist on --History Detail
        hist.sddoco = soh.SHDOCO and
        hist.sdkcoo = soh.SHKCOO and
        hist.sddcto = soh.SHDCTO
where 
    SentToEdiDate is null 
    and ApprovalStepID=4 -- Complete
    and DocumentBranchPlant=@BranchPlant
    and sod.SDNXTR is not null or hist.SDNXTR is not null 
    and sod.SDNXTR = '999' or hist.SDNXTR = '999' 
```

一般结构是：

```
UPDATE a
    SET a.YourColumn = newValue
FROM Table1 AS a
JOIN Table2 AS b
    ON a.JoinColumn = b.JoinColumn
WHERE ... 
```

# c# - 是否可以模拟/伪造以使丢失的锁导致测试失败？

> ID：15097113
> 
> 赞同：12
> 
> 时间：2013-02-26T18:57:38.733
> 
> 标签：c#, unit-testing, thread-safety, locking, mocking

我正在围绕字典编写一个薄包装器，该包装器设计为线程安全的。因此，需要一些锁，并且大部分逻辑是围绕确保正确锁定事物并以线程安全的方式访问。

现在，我正在尝试对其进行单元测试。我想单元测试的一件大事是锁定行为，以确保它是正确的。但是，我从来没有在任何地方看到过这种情况，所以我不知道该怎么做。另外，我知道我可以用一堆线把东西扔到墙上，但是通过这种类型的测试，不能保证它出错时会失败。这取决于操作系统定义的线程调度行为。

有什么方法可以确保我的锁定行为在单元测试中是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:03:49.430

锁定只是一个实现细节。您应该模拟竞争条件本身并测试数据是否在测试中没有失去其完整性。

如果您决定更改字典的实现并使用其他同步原语，这将是一个好处。

测试锁定将证明您正在调用您期望的锁定语句。虽然使用模拟的比赛条件进行测试可能会发现您没想到会同步的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:29:48.550

我基本上最终做了@Alexei所说的。更具体地说，这就是我所做的：

1.  制作一个`PausingDictionary`基本上只有每个方法的回调，否则只是传递给常规字典
2.  抽象我的代码（使用 DI 等），以便在测试时可以使用 PausingDictionary 而不是常规 Dictionary
3.  在我的单元测试中添加了两个 ConcurrentDictionaries。一种称为“Accessed”，一种称为“GoAhead”。thisis 的关键是`"action"+Thread.GetHashCode().ToString()`（其中每个回调的操作不同）的组合
4.  将所有内容初始化为 false 并添加了一些扩展方法以使其更容易使用
5.  设置字典的回调以将线程的 Accessed 设置为 true，但它会在回调中等待直到 GoAhead 为 true
6.  从单元测试中启动了两个线程。一个线程会访问字典，但因为`GoAhead`该线程是错误的，所以它会坐在那里。然后第二个线程也将尝试访问字典
7.  我会断言该`Accessed`线程是错误的，因为我的代码应该将其锁定。

不止于此。我还需要模拟一个 IList，但我想我不会。这些单元测试虽然很有价值，但绝对不是世界上最容易编写的东西。除了设置代码和假接口实现等之外，每个测试最终都是大约 25 行非样板代码。锁定很难。证明你的锁定是有效的更加困难。但令人惊讶的是，这种模式可以让您测试几乎任何场景。但是，它非常冗长，不能进行漂亮的测试

因此，尽管编写测试很困难，但它可以完美运行。当我删除一个锁时总是失败，当我重新添加锁时，它总是通过。

编辑：

我认为这种“控制线程交错”的方法也可以测试线程安全性，因为您为每个可能的交错编写了一个测试。使用一些代码这是不可能的，但我只想说这绝不仅限于锁定代码。你可以用同样的方法来持续复制一个线程安全的失败，比如`foo.Contains(x)`然后`var tmp=foo[x]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:17:34.393

我不认为`Dictionary`你自己可以实现可靠的测试 - 你的目标是进行 2 次调用以并行运行，这不会可靠地发生。

您可以尝试使用自定义字典（即从常规字典派生）并为所有 Get/Add 方法添加回调。比您可以根据需要延迟 2 个线程中的调用......您需要在 2 个线程之间单独同步，以使您的测试代码以您想要的方式运行，而不是一直死锁。

# emacs - 如何获得 org-mode 导出的智能报价？

> ID：15097114
> 
> 赞同：14
> 
> 时间：2013-02-26T18:57:41.180
> 
> 标签：emacs, org-mode, typography, smart-quotes, smartypants

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-02-06T15:00:38.850

```
#+LANGUAGE: de
#+OPTIONS: ':t 
```

also does the right thing now

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-27T18:11:36.907

This is now built into org-mode 8.x. To activate it, add the following to your Emacs configuration file:

```
(setq org-export-with-smart-quotes t) 
```

It works for single quotes, double quotes, and apostrophes.

Source: @Ista

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-27T03:12:48.050

This is only available in very recent versions of org-mode. If you are not already running the latest git version see [http://orgmode.org/worg/org-faq.html#keeping-current-with-Org-mode-development](http://orgmode.org/worg/org-faq.html#keeping-current-with-Org-mode-development) for instructions on upgrading. Then `(setq org-export-with-smart-quotes t)` will do what you want with quotes, and m-dashes will also be exported correctly.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-03-29T18:50:25.980

A way to insure that smart quotes are entered in your org file is to insert the code at the following url into your init.el file. Then type M-x smart-quotes-mode and your all set.

[https://github.com/gareth-rees/smart-quotes/blob/master/smart-quotes.el](https://github.com/gareth-rees/smart-quotes/blob/master/smart-quotes.el)

MNH

# java - apache http客户端中的异常

> ID：15097115
> 
> 赞同：2
> 
> 时间：2013-02-26T18:57:44.390
> 
> 标签：java

我使用eclipse ide，当我运行我的程序时一切正常，但是当我在服务器上运行相同的程序时，它给了我这个异常，我已经把我所有的远文件以及我的lib文件夹，请帮我做短解决这个问题。

```
java.lang.ClassNotFoundException: org.apache.http.HttpRequest
    在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
    在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
    在 java.lang.ClassLoader.defineClass1（本机方法）
    在 java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    在 java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    在 org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2836)
    在 org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1160)
    在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1668)
    在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
    在 org.controller.KeyRank.doPost(KeyRank.java:41)
    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    在 org.apache.catalina.core.StandardWrapperValve.invoke（StandardWrapperValve.java:224）
    在 org.apache.catalina.core.StandardContextValve.invoke（StandardContextValve.java:169）
    在 org.apache.catalina.authenticator.AuthenticatorBase.invoke（AuthenticatorBase.java:472）
    在 org.apache.catalina.core.StandardHostValve.invoke（StandardHostValve.java:168）
    在 org.apache.catalina.valves.ErrorReportValve.invoke（ErrorReportValve.java:98）
    在 org.apache.catalina.valves.AccessLogValve.invoke（AccessLogValve.java:927）
    在 org.apache.catalina.core.StandardEngineValve.invoke（StandardEngineValve.java:118）
    在 org.apache.catalina.connector.CoyoteAdapter.service（CoyoteAdapter.java:407）
    在 org.apache.coyote.http11.AbstractHttp11Processor.process（AbstractHttp11Processor.java:987）
    在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    在 java.lang.Thread.run(Thread.java:722)
```

这是我的代码：

```
   public String readGoogle（字符串关键字，int page）{
        HttpClient 客户端 = 新 DefaultHttpClient();  

        // 创建一个方法实例
        关键字 = 关键字.trim();
        关键字 = 关键字.replaceAll(" ", "+");

        字符串 url = "http://www.google.com/search?q="+keyword+"&start="+page+"&btnG=Google+Search&aq=f&oq=";
        字符串响应体 = "";
        HttpGet 方法 = 新的 HttpGet(url);  

        //提供自定义重试处理程序是必要的  
        //:OC:method.getParams().setParameter(HttpConnectionParams.RETRY_HANDLER, new DefaultHttpRequestRetryHandler(3, false));  

        尝试{  
        //执行方法  

            System.out.println("执行请求" + method.getURI());  

            // 创建响应处理程序  
            ResponseHandler responseHandler = new BasicResponseHandler();  
            responseBody = client.execute(method, responseHandler);  
            System.out.println("----------------------------------------");  
            System.out.println(responseBody);  
            System.out.println("----------------------------------------");  

            } 捕捉（HTTPException e）{  

                    System.err.println("致命的协议违规：" + e.getMessage());  
                    e.printStackTrace();  

                } 捕捉（IOException e）{  

                    System.err.println("致命的传输错误：" + e.getMessage());  
                    e.printStackTrace();  
                } 最后 {  

                    //释放连接  
              方法.releaseConnection();  

        }
        返回响应体；

    }
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-09T07:00:50.893

将 Http core jar 添加到您的构建路径中，从该 url 中找到所需的 jar。[http://www.java2s.com/Code/Jar/h/Downloadhttpcorejar.htm](http://www.java2s.com/Code/Jar/h/Downloadhttpcorejar.htm)

部署jar然后编译，您的错误将得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:01:02.500

如果您`classpath configuration`不了解将应用程序部署到的 Web 服务器，则很难提供帮助，但从外观上看，您似乎缺少`HttpCore`部署环境中的 jar。

在那个 jar 中找到了缺少的类。

# tcpdf - 表格边框在 tcpdf 中消失

> ID：15097117
> 
> 赞同：5
> 
> 时间：2013-02-26T18:57:45.563
> 
> 标签：tcpdf

我正在设置 tcpdf 为客户即时生成发票，但是当我添加图像时，边框从我的桌子上消失了。这是代码：

```
/*
if ($status == "Paid") {
    $pdf->Image("/wp-content/themes/Feather/images/Paid.jpg", 10, 60, 190, '', '', '', 'T', false, "300", '', false, false, 0, false, false, false);
} elseif ($status == "Overdue") {
     $pdf->Image("/wp-content/themes/Feather/images/Overdue.jpg", 10, 60, 190, '', '', '', 'T', false, "300", '', false, false, 0, false, false, false);
} elseif ($status == "Cancelled") {
     $pdf->Image("/wp-content/themes/Feather/images/Void.jpg", 10, 60, 190, '', '', '', 'T', false, "300", '', false, false, 0, false, false, false);
}
*/
$pdf->SetXY($x=20, $y=30);
$pdf->writeHTML($html, true, false, true, false, '');
$pdf->lastPage(); 
```

这是我正在使用的 HTML：

```
$html = $html . '
<br/><br/><br/>
<table width="600px" cellspacing="1" cellpadding="4" border="1">
<tr>
    <th width="200px">Product</th>
    <th width="65px">Code</th>
    <th width="65px">Quantity</th>
    <th width="65px">Unit Price</th>
    <th width="65">VAT Rate</th>
    <th width="65">VAT Amount</th>
    <th width="65">Line Total</th>
</tr>';
foreach ($inv_lines as $inv_line) {
$html = $html .
        '<tr>
        <td>' . $inv_line['item_desc'] . '</td>
        <td>' . $inv_line['item_no'] . '</td>
        <td>' . $inv_line['quantity'] . '</td>
        <td>' . $inv_line['unit_price'] . '</td>
        <td>' . $inv_line['vat_rate'] . '</td>
        <td>' . ($inv_line['quantity'] * $inv_line['vat_rate'] * $inv_line['unit_price'] * 0.01) . '</td>
        <td>' . $inv_line['line_total'] . '</td>
    </tr>'; 
```

使用上面的代码，表格看起来很好，但是一旦我取消注释图像位，图像就会出现，但表格边框会消失。我尝试向单个单元格添加内联边框，但这不会产生任何影响。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T06:59:18.170

首先，绝对确定你总是包含结束表标签。TCPDF 的 html 解析器可能对开始和结束标记很挑剔。（我之所以这么说，是因为问题中缺少它。）它依赖于正确的标记才能正常运行。

现在我不确定仅通过查看您的坐标，但表格是否与图像重叠？如果是这样，并且您希望在图像顶部绘制边框，则需要`setPageMark`在绘制图像后调用。如果不这样做，无论您调用 Image 和 writeHTML 的顺序如何，边框都将绘制在图像下方。

```
<?php
//In my test PDF I had to do something like this as some of my borders
//were disappearing underneath my test image.
$pdf->Image(...);
$pdf->setPageMark();
$pdf->setXY(...)
$pdf->writeHTML(...); 
```

如果边框仍然不存在，这不是上述帮助，您可能想在放置图像后尝试设置绘制颜色。我不确定这是否会做任何事情，但值得一试。

当然，请确保您使用的是更新版本的 TCPDF，根据您的版本，可能会有边框渲染修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-04T05:26:26.917

始终使用`"1"`（双引号）而不是单引号`border='1'`作为表格边框值。

# jakarta-ee - 如何在 Java 持久性查询中减去日期？

> ID：15097122
> 
> 赞同：0
> 
> 时间：2013-02-26T18:58:09.620
> 
> 标签：jakarta-ee, persistence, ejb-3.0, jpql

我正在寻找一种方法来使用 Java Peristence Query 列出所有 10 天的旧项目（例如，我的案例将是阈值的参数）。

我的查询

```
SELECT DISTINCT item
FROM Item item
INNER JOIN item.flags flag
WHERE flag.tspDate ............ :intDaysThreshold 
```

我希望能够做一些类似于我们在 PostgreSQL 中使用 INTERVAL 可以做的事情。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:19:31.620

这不能在 JPQL 查询中完成，因为它不支持任何类型的日期算术。后备选项包括：

1.  本机 SQL 查询
2.  使用可能在实现中可用的扩展（例如EclipseLink中的[FUNC ）](http://wiki.eclipse.org/EclipseLink/Release/2.1.0/JPAQueryEnhancements)
3.  在 Java 中查询更大的数据集并执行计算
4.  通常（如果条件与当前日期相关）可以以这种形式构造查询，该参数可以在 Java 端计算（例如过去 10 天的日期）。

# android - 使用 PendingIntent 接收位置更新是否存在安全风险？

> ID：15097139
> 
> 赞同：2
> 
> 时间：2013-02-26T19:00:14.710
> 
> 标签：android

在 Reto Meiers 博客文章[A Deep Dive Into Location](http://android-developers.blogspot.dk/2011/06/deep-dive-into-location.html) on the Android 博客中，以及在他的演讲中，他建议使用 a[`PendingIntent`](http://developer.android.com/reference/android/app/PendingIntent.html)来接收来自[`LocationManager`](http://developer.android.com/reference/android/location/LocationManager.html). 由于您不能[`LocalBroadcastManager`](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)使用 PendingIntent 创建仅限本地的意图广播（参见 参考资料），那么几乎任何人都可以将这些广播发送到您的应用程序，对吗？这不会有安全风险吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T16:30:49.633

让在清单中注册的接收器接收 PendingIntent - 根据需要启用和禁用`PackageManager`- 指定无意图过滤器 - 接收器将是隐式的`android:exported=false`，因此除了您的应用程序之外没有人能够唤醒他。同样[`setComponent()`](http://developer.android.com/reference/android/content/Intent.html#setComponent%28android.content.ComponentName%29)，您传递给 PendingIntent 的意图仅由您的接收者处理

# ruby-on-rails - Rails，根据参数是否为 nil 应用范围

> ID：15097142
> 
> 赞同：9
> 
> 时间：2013-02-26T19:00:31.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scope

我已经多次遇到这个问题：我想在查询上应用范围，但前提是传递给范围的参数不为空。所以

```
tags = Tag.where(name: params[:name]) if params[:name] 
```

但是，这样做有两个问题。一种是 Rails 会立即评估查询，所以如果我想对它应用更多条件，比如说

```
tags.where(location: params[:place]) if params[:place] 
```

它将再次查询数据库。第二个问题是它看起来不太好，我试图用类方法来解决这个问题。

```
 class Tag < ActiveRecord::Base
    def self.name_like this_name
      if !this_name.blank?
        where("name ILIKE '%#{this_name}%'")
      else
        #what do I put here? `all` does not work
      end
    end
  end 
```

但是，我不能简单地放在`all`那里，因为它会评估一个查询。有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T19:06:59.067

在这里您可以使用 lambda 范围，并使用`self`to 调用`self.all`：

```
 class Tag < ActiveRecord::Base

    scope :named_like, (lambda do |name| 
      if name.present?
        where("name ILIKE ?", "%#{name}%")
      else
        scoped # does not apply a where clause
      end
    end)

  end 
```

对于一个非常基本的范围来说，这需要太多的行，这是压缩版本：

```
class Tab < ActiveRecord::Base

  scope :named_like, lambda{ |name| self.where("name ILIKE ?", "%#{name}%") if name.present? }

end 
```

还：

*   **切勿**在 Where子句中使用直接**字符串插值：http:** [//blog.presidentbeef.com/blog/2013/02/08/avoid-sql-injection-in-rails/](http://blog.presidentbeef.com/blog/2013/02/08/avoid-sql-injection-in-rails/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:24:48.913

据我所知（以及这里写的内容：[ActiveRecord::Relation](http://guides.rubyonrails.org/active_record_querying.html#retrieving-objects-from-the-database)），实际上只有在迭代结果时才会执行查询。因此，当您编写以下内容时：

```
tags = Tags.where(name: params[:name])
# other stuff here
tags = tags.where(location: params[:place]) 
```

在此代码段中，不执行任何查询。

```
tags.each { # do something } 
```

但它就在那里！当然只有一次。
首先，标签是一个 ActiveRecord::Relation 对象，因此您可以链接`where`您喜欢的程度。

# windows - 检测进程中的多个窗口

> ID：15097143
> 
> 赞同：0
> 
> 时间：2013-02-26T19:00:37.107
> 
> 标签：windows, batch-file, cmd

我一直在为一项任务而苦苦挣扎。我正在尝试使用该`tasklist`命令检测进程中的多个窗口。

解释一下：如果您打开了“notepad.exe”并单击“*文件”→* “打开”，“notepad.exe”进程中将有 2 个窗口。（主窗口：“无标题 - 新文本文档”和名为“打开”的子窗口。

但是，当我运行时，`tasklist /fi "windowtitle eq Open`我没有得到任何结果。

是否有另一种方法可以批量检测子窗口或 VBScript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:51:20.520

您需要与 Windows API 交谈。

Autohotkey 非常擅长快速执行此类操作，并且可以从批处理脚本中调用。

它包括一个名为 WinGet 的命令，可用于迭代打开的窗口。

[http://www.autohotkey.com/docs/commands/WinGet.htm](http://www.autohotkey.com/docs/commands/WinGet.htm)

以下是文档中用于迭代所有打开的窗口的示例。

```
; Example #2: This will visit all windows on the entire system and display info about each of them:
WinGet, id, list,,, Program Manager
Loop, %id%
{
    this_id := id%A_Index%
    WinActivate, ahk_id %this_id%
    WinGetClass, this_class, ahk_id %this_id%
    WinGetTitle, this_title, ahk_id %this_id%
    MsgBox, 4, , Visiting All Windows`n%a_index% of %id%`nahk_id %this_id%`nahk_class %this_class%`n%this_title%`n`nContinue?
    IfMsgBox, NO, break
} 
```

# html - HTML5 媒体元素 - SEEKABLE 和 BUFFERED 之间的区别？

> ID：15097147
> 
> 赞同：2
> 
> 时间：2013-02-26T19:00:41.107
> 
> 标签：html, buffered

`media.seekable`我想知道 HTML5 媒体元素和之间有什么区别`media.buffered`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-12T17:19:04.787

我相信先前接受的答案实际上并没有澄清问题，所以即使这么晚也可能值得一提。

TimeRanges 对象 Buffered 说明已下载（并且仍然保留）的内容的开始和结束。TimeRanges 对象 Seekable 说明当前可播放的内容的开始和结束，即使它没有被下载。一旦第一个媒体数据附加到媒体资源中，就会计算 Seekable，然后，它可以通知所有可用的内容（这将取决于媒体资源能够提取多少信息）。持续时间可以通过视频元素对象进行修改。

还有另一个名为 Played 的 TimeRanges 对象，它更容易掌握，因为它包含已经播放过的范围。

进一步阅读[https://developer.mozilla.org/en-US/Apps/Fundamentals/Audio_and_video_delivery/buffering_seeking_time_ranges](https://developer.mozilla.org/en-US/Apps/Fundamentals/Audio_and_video_delivery/buffering_seeking_time_ranges)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T19:14:28.107

Seekable 是用户可以搜索的时间范围，允许您在媒体内容中选择特定时间。[https://developer.mozilla.org/en-US/docs/HTML/Using_HTML5_audio_and_video](https://developer.mozilla.org/en-US/docs/HTML/Using_HTML5_audio_and_video)

Buffered 返回一个时间范围，允许您在访问 media.buffered 属性时知道有多少视频已缓冲。 [https://developer.mozilla.org/en-US/docs/DOM/HTMLMediaElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLMediaElement)

最后一页还有一个表格，概述了可查找和缓冲属性的浏览器兼容性。

希望这可以帮助！

# solr - Solrnet 等效于 frange 在距离的方面查询中

> ID：15097151
> 
> 赞同：1
> 
> 时间：2013-02-26T19:00:59.467
> 
> 标签：solr, spatial, solrnet, spatial-query

我已经实现了空间搜索，需要在 Solr 中为距离的范围或“桶”生成构面：以下链接在这里帮助了我 - [http://wiki.apache.org/solr/SpatialSearch#How_to_facet_by_distance](http://wiki.apache.org/solr/SpatialSearch#How_to_facet_by_distance)

我发现以下问题的解决方案在 [solr 中对距离进行分面 - 如何生成在给定距离范围内搜索的链接](https://stackoverflow.com/questions/6035270/faceting-on-distance-in-solr-how-to-generate-links-that-search-withing-a-given)很有帮助。

我正在使用 Solrnet 从基于 .NET 的站点生成 Solr 查询。我找不到可以帮助我生成查询的边框部分（*斜体*）的链接，如下所示。请帮助指向我使用 solrnet 生成此代码的代码。

&q= *:* &sfield=store&pt=45.15,-93.85**&facet.query={!frange l=0 u=5}geodist()&facet.query={!frange l=5.001 u=3000}geodist()**.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:55:11.337

我假设您已经在使用`ExtraParams`设置 sField & pt 参数。您应该也可以向其中添加 facet.query 参数。

```
var results = solr.Query(SolrQuery.All, new QueryOptions
{
    ExtraParams = new Dictionary<string, string> {
                { "sfield", "store" } , 
                { "pt", "45.15,-93.85" }
                { "facet.query", "{!frange l=0 u=5}geodist()" } ,
                { "facet.query", "{!frange l=5.001 u=3000}geodist()" } ,
            }
 });

return results; 
```

此外，您也许可以`SolrFacetQuery`结合使用`LocalParams`来构建方面查询。检查以下链接以获取一些示例：

*   [https://code.google.com/p/solrnet/wiki/Facets](https://code.google.com/p/solrnet/wiki/Facets)
*   [如何将空间 Solr 添加到 Solrnet 查询](https://stackoverflow.com/questions/2788450/how-to-add-spatial-solr-to-a-solrnet-query)

**更新：** 如评论中所述，`ExtraParams`由于它是字典对象，因此无法使用，因此不允许使用多个 facet.query 参数。但是，我能够使用上面链接的 SolrNet Facet Wiki 页面中描述的 Facet 查询来创建以下内容：

```
var facet1 = new SolrFacetQuery(new SolrQuery("{!frange l=0 u=5}geodist()}"));
var facet2 = new SolrFacetQuery(new SolrQuery("{!frange l=5.001 u=3000}geodist()}"));
var results = solr.Query(SolrQuery.All, new QueryOptions
    {
        ExtraParams = new Dictionary<string, string>
            {
                {"sfield", "store"},
                {"pt", "45.15,-93.85"}
            },
        Facet = new FacetParameters
            {
                Queries = new[]
                    {
                        facet1, facet2
                    }
            }
    });
return results; 
```

# django - Django Apache mod_wsgi 500

> ID：15097155
> 
> 赞同：11
> 
> 时间：2013-02-26T19:01:06.617
> 
> 标签：django, apache, mod-wsgi

我在 CentOS 上部署了一个 Django 应用程序。这是我的 httpd.conf 文件的样子：

```
WSGISocketPrefix /var/run/wsgi
<VirtualHost *:80>

    WSGIDaemonProcess safe python-path=/usr/lib/python2.6/site-packages
    WSGIProcessGroup safe
    WSGIScriptAlias / /opt/safe/safe/wsgi.py

    <Directory /opt/safe/safe/>
        Order deny,allow
        Allow from all
     </Directory>
</VirtualHost> 
```

编辑：这是我的`TEMPLATE_DIRS`

```
TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    "/opt/safe/static/templates",
    "/var/www/html/static/templates",
) 
```

编辑：这是我的管理员/电子邮件设置：

```
ADMINS = (
# ('Your Name', 'your_email@example.com'),
('David', 'david@localhost'),
)

SEND_BROKEN_LINK_EMAILS = True

DEFAULT_FROM_EMAIL = 'david@localhost'
SERVER_EMAIL = DEFAULT_FROM_EMAIL 
```

在我的模板目录中，我定义了一个自定义`500.html`文件。当我将 my 设置`settings.py`为 have`DEBUG = False`时，如果没有看到此自定义 500.html 页面，我将无法进入我的网站。

更奇怪的是日志文件中没有错误 - 所以我不确定在哪里查看或如何继续。由于我的自定义 500.html 文件，我知道它可以看到模板，但我不确定是什么导致了 500 内部服务器错误。

编辑：进一步配置后，我设法得到了一些错误输出（感谢@Matt Stevens），这是日志输出：

```
Traceback (most recent call last):
File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py", line 89, in get_response
response = middleware_method(request)
File "/usr/lib/python2.6/site-packages/django/middleware/common.py", line 55, in process_request
host = request.get_host()
File "/usr/lib/python2.6/site-packages/django/http/__init__.py", line 223, in get_host
"Invalid HTTP_HOST header (you may need to set ALLOWED_HOSTS): %s" % host)
SuspiciousOperation: Invalid HTTP_HOST header (you may need to set ALLOWED_HOSTS): [my ip address] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T14:13:48.767

原来我需要将我的 IP 地址添加到`settings.py`文件中的“ALLOWED_HOSTS”中。感谢错误记录，我终于能够看到这一点。

实际代码：

```
ALLOWED_HOSTS = ['my.server.ip.address'] 
```

Apache 重启后，现在一切正常！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-26T22:17:18.113

您可以尝试将所有内容记录到文件中以确定原因。

在系统上为 django 添加日志文件：

```
sudo mkdir /var/log/django
sudo touch /var/log/django/error.log
sudo chown <user>:<user> /var/log/django/error.log
chmod 600 /var/log/django/error.log 
```

然后将其添加到`settings.py`：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        },
        'logfile': {
            'class': 'logging.handlers.WatchedFileHandler',
            'filename': '/var/log/django/error.log'
        },
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
        'django': {
            'handlers': ['logfile'],
            'level': 'ERROR',
            'propagate': False,
        },
    }
} 
```

瞧！只需运行您的 django 服务器并`less /var/log/django/error.log`告诉您出了什么问题。

# ember.js - 过滤 Ember 结果

> ID：15097156
> 
> 赞同：2
> 
> 时间：2013-02-26T19:01:10.427
> 
> 标签：ember.js, ember-data

我可以使用 Ember.js(rc0) 和 Rails，并有一个简单的应用程序按我的预期工作，但我想专注于一个特定的故事：

作为用户，我想在表单中输入“过滤器”文本，然后让我的 ArrayController 只显示那些与过滤器匹配的项目。例如，考虑一个联系人应用程序，该应用程序显示名称为“Ya%”的人......

警告：假设数据库拥有数千条联系人记录。我不想在客户端过滤这些联系人，在服务器上这样做更有意义。

问题：如何在 ember.js/ember-data 中执行此操作？在服务器上，我可以轻松地允许在我的索引 URL 中使用搜索参数来过滤数据，因此它是一个易于管理的列表，甚至可以将响应限制为 20 个项目。

我也可以使用视图来访问我的控制器中的过滤器文本，但接下来我该去哪里呢？如何将该过滤器传递到服务器上？

更新：

我能够在模型对象上使用“查找”，并且 ember（ember 数据）去服务器获取新数据——因为客户端只有所有联系人记录的一个子集。它没有过滤客户端上的内容，而是自动推迟到服务器......这很好。

```
App.ContactIndexController = Ember.ArrayController.extend
 search_term: null
 submit: (view) ->
   this.set('content', App.Contact.find({search: "#{view.search_term}"})) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:15:54.957

这是一个很好的用例`findQuery`。例如：

```
store.findQuery(App.Contact, {q: queryString}) 
```

这将依次调用`findQuery`适当的适配器，如果成功，将返回的记录加载到存储中并返回一个`DS.AdapterPopulatedRecordArray`.

请注意，您可以完全自定义查询对象以包含与您的服务器端点匹配的参数。

* * *

*更新*：正如迈克尔在评论中指出的那样，以上等同于：

```
App.Contact.find({q: queryString}) 
```

...这当然是一种更清洁的解决方案，尤其是在没有直接进入商店的情况下。

# c# - 如果位置发生变化，ListView 不会自动滚动到所选项目

> ID：15097157
> 
> 赞同：0
> 
> 时间：2013-02-26T19:01:10.950
> 
> 标签：c#, winforms, listview, .net-3.5

我有一个包含大约 100 个项目的 ListView。我从过去选择了一些项目，现在我需要向下滚动以找到另一个项目，但在那个时候 - 刷新发生并且它只是自动滚动回最后一个选定的项目。

如果我目前正在滚动，是否有可能将其关闭或最好不要滚动？

感谢您的回复:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:33:06.113

我不知道这是否会有所帮助，但这里的设置在添加和排序新项目时不会出现滚动回所选项目的问题。但是，我使用排序设置并且不调用排序或刷新。

创建一个新表单并将 ListView 和 Timer 放在那里。在 ListView 上仅更改这些属性。

*   将视图设置为详细信息
*   单击列添加单个列（调整宽度使其更宽）
*   将排序设置为升序
*   将定时器 Enabled 设置为 true
*   将间隔设置为 2000（2 秒）
*   双击 Tick 事件以创建处理程序

现在添加以下代码

```
public Form1()
{
    InitializeComponent();

    for (int x = 0; x < 100; x++)
    {
        listView1.Items.Add("Item #" + x);
    }
}

private int y = 10;
private void timer1_Tick(object sender, EventArgs e)
{
    listView1.Items.Add("Item #" + y + "b");
    y += 10;
} 
```

现在，当您运行它时，您可以选择任何项目并在任何地方滚动，并且在添加新项目时它不会跳回到所选项目。但是，如果它添加的项目在上方，它将向下滚动一行……

也许这让你足够接近，你可以进一步使用它来获得你需要的东西。

但这是我能做的最好的事情，而无需以某种方式使用 Win32 API 对 ListView 控件进行子类化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T16:31:40.117

这是一种迂回的解决方案（可能有点晚），但它似乎有效。我在最近添加的项目上使用 EnsureVisible() 以进行自动滚动，这在 timer1_Tick 方法中调用。但是我使用了一个“inspectingList”标志，当你点击一个列表项时，它会阻止自动滚动发生。当焦点从列表视图移开时，滚动继续正常进行。

部分解决方案是 jross 所说的，即创建一个虚拟表单进行测试：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        listView1.Columns.Add("Scroll Control", 100);

        for(int i = 0; i < 100; i++)
        {
            listView1.Items.Add(string.Format("Item #{0:000}", i));
        }

        timer1.Interval = 1000;
        timer1.Start();
    }

    private int newItem = 10;
    private bool inspectingList = false;

    private void timer1_Tick(object sender, EventArgs e)
    {
        listView1.Items.Add(string.Format("Item #{0:000}", newItem));
        newItem += 10;

        if (!inspectingList)
        {
            listView1.Items[listView1.Items.Count - 1].EnsureVisible();
        }
        listView1.Refresh();
    }

    private void listView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        inspectingList = true;
        if (listView1.SelectedIndices.Count > 0)
        {
            listView1.Items[listView1.SelectedIndices[0]].EnsureVisible();
        }
    }

    private void listView1_Leave(object sender, EventArgs e)
    {
        inspectingList = false;
    } 
```

# jquery - 删除加载新图像后，它会出现以前的图像 - jQuery File Upload

> ID：15097158
> 
> 赞同：2
> 
> 时间：2013-02-26T19:01:14.640
> 
> 标签：jquery, file-upload

删除加载新图像后，它会出现以前的图像（已删除）。
如何清除 jquery 或 php 中的缓存或 cookie？应该有出现新的画面吧。

见图片： ![在此处输入图像描述](../Images/f1989912935ec20967755a9b5d94e973.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:05:49.877

为了防止您的图像被缓存，您可以将服务器端随机字符串附加到图像 SRC：

```
<img src="images/image.jpg?5888279301" alt="Hello Areku" /> 
```

或服务器时间字符串

# string - 在R中将字符串拆分为多行

> ID：15097162
> 
> 赞同：4
> 
> 时间：2013-02-26T19:01:31.707
> 
> 标签：string, r, reshape

这已在各个地方询问过 SQL，但在 R 中找不到简单的方法

我有一个这样的数据集

```
 Ids    v1  v2  v3  v4  v5
548|14721,678|17604,716|18316,732|18505,745|18626,752|18716 9186    639 9045    316 28396
548|14721,678|17603,716|18316,732|18507,745|18626,752|18716 9041    598 8897    283 28054
548|14722,678|17603,716|18316,732|18507,745|18626,752|18716 8799    588 8669    246 27433
548|14721,678|17603,716|18316,732|18505,745|18626,752|18715 8914    614 8765    273 27347
716|18316,745|18626                                         4113    497 4050    270 27267
548|14722,678|17604,716|18316,732|18507,745|18626,752|18716 8829    589 8713    254 25270 
```

我想根据逗号上的第一列进行拆分，并为每个条目创建一行，在其余行中重复这些条目。

我写的功能是

```
split.data <- function(data, split = ",") {
  y <- NULL
  for( i in 1:nrow(data)){
    y <- rbind(y,cbind(data.frame(unlist(strsplit(as.character(data[i,1]), split = split))),data[i,-1]))
  }
  names(y) <- names(data)
  y <- sapply(y,as.character)
  return(as.data.frame(y))
} 
```

这有效，但速度极慢。有没有办法对其进行矢量化并使其更快。我拥有的文件有超过 5000 行这样的行，需要一段时间才能运行。

我为 SQL 找到的相关文章： [Split values over multiple rows](https://stackoverflow.com/questions/13159526/split-values-over-multiple-rows) [Turning a Comma Separated string into individual rows](https://stackoverflow.com/questions/5493510/turning-a-comma-separated-string-into-individual-rows)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T19:15:27.670

### 更新答案（2013 年 10 月 21 日）

`concat.split.multiple`如果您从我的“splitstackshape”包中使用这些步骤，则可以组合使用。这个函数`count.fields`自动使用，所以它不应该遇到评论中提到的问题：

```
library(splitstackshape)
out <- concat.split.multiple(mydf, "Ids", seps=",", "long")
head(out)
#     v1  v2   v3  v4    v5 time       Ids
# 1 9186 639 9045 316 28396    1 548|14721
# 2 9041 598 8897 283 28054    1 548|14721
# 3 8799 588 8669 246 27433    1 548|14722
# 4 8914 614 8765 273 27347    1 548|14721
# 5 4113 497 4050 270 27267    1 716|18316
# 6 8829 589 8713 254 25270    1 548|14722
tail(out)
#      v1  v2   v3  v4    v5 time       Ids
# 31 9186 639 9045 316 28396    6 752|18716
# 32 9041 598 8897 283 28054    6 752|18716
# 33 8799 588 8669 246 27433    6 752|18716
# 34 8914 614 8765 273 27347    6 752|18715
# 35 4113 497 4050 270 27267    6      <NA>
# 36 8829 589 8713 254 25270    6 752|18716 
```

* * *

### 原始答案（2013 年 2 月 27 日）

您需要先拆分“Ids”字符串，然后再“重塑”您的数据（如果我正确理解您的目标）。

我没有像你那样分裂，而是继续利用`read.csv`和争论`fill = TRUE`。请注意，如果您的“Ids”列中的值是当前因素，则需要使用`text = as.character(mydf$Ids)`。

以下是我将如何进行：

```
mydf2 <- cbind(read.csv(text = mydf$Ids, fill = TRUE, header = FALSE), mydf[-1])
mydf2
#          V1        V2        V3        V4        V5        V6   v1  v2   v3  v4    v5
# 1 548|14721 678|17604 716|18316 732|18505 745|18626 752|18716 9186 639 9045 316 28396
# 2 548|14721 678|17603 716|18316 732|18507 745|18626 752|18716 9041 598 8897 283 28054
# 3 548|14722 678|17603 716|18316 732|18507 745|18626 752|18716 8799 588 8669 246 27433
# 4 548|14721 678|17603 716|18316 732|18505 745|18626 752|18715 8914 614 8765 273 27347
# 5 716|18316 745|18626                                         4113 497 4050 270 27267
# 6 548|14722 678|17604 716|18316 732|18507 745|18626 752|18716 8829 589 8713 254 25270 
```

该数据目前采用“宽”格式。让我们把它变成一个“长”的格式。该`reshape`函数需要一些关于如何进行的信息。特别是，它需要知道：

*   哪些列表示“id”变量。*与*数据集中的名称相反，这些*不是*来自原始“Ids”变量的值，而是存在的其他变量。（“mydf2”数据集中位置 7 到 11 处的“v1”-“v5”（小写“v”））。显然，对于您的实际数据，您需要指定要被视为`idvar`s 的实际列。
*   哪些列“变化”并且需要以“长”格式“堆叠”。在这种情况下，它是我们使用时创建的新变量，`read.csv`通过手动检查它们的索引，我们可以看到它们位于位置 1 到 6。显然，您需要从实际数据集中指定列号。

对于您提供的示例数据集，我们将使用`reshape`如下：

```
mydf3 <- reshape(mydf2, direction = "long", idvar=7:ncol(mydf2), 
                 varying=1:6, sep = "")
rownames(mydf3) <- NULL 
```

这是结果的`head`and ：`tail``data.frame`

```
> head(mydf3)
    v1  v2   v3  v4    v5 time         V
1 9186 639 9045 316 28396    1 548|14721
2 9041 598 8897 283 28054    1 548|14721
3 8799 588 8669 246 27433    1 548|14722
4 8914 614 8765 273 27347    1 548|14721
5 4113 497 4050 270 27267    1 716|18316
6 8829 589 8713 254 25270    1 548|14722
> tail(mydf3)
     v1  v2   v3  v4    v5 time         V
31 9186 639 9045 316 28396    6 752|18716
32 9041 598 8897 283 28054    6 752|18716
33 8799 588 8669 246 27433    6 752|18716
34 8914 614 8765 273 27347    6 752|18715
35 4113 497 4050 270 27267    6          
36 8829 589 8713 254 25270    6 752|18716 
```

* * *

这一切都假设我们从一个名为“mydf”的对象开始，如下所示：

```
mydf <- structure(list(Ids = c("548|14721,678|17604,716|18316,732|18505,745|18626,752|18716", 
  "548|14721,678|17603,716|18316,732|18507,745|18626,752|18716", 
  "548|14722,678|17603,716|18316,732|18507,745|18626,752|18716", 
  "548|14721,678|17603,716|18316,732|18505,745|18626,752|18715", 
  "716|18316,745|18626", "548|14722,678|17604,716|18316,732|18507,745|18626,752|18716"
  ), v1 = c(9186L, 9041L, 8799L, 8914L, 4113L, 8829L), v2 = c(639L, 
  598L, 588L, 614L, 497L, 589L), v3 = c(9045L, 8897L, 8669L, 8765L, 
  4050L, 8713L), v4 = c(316L, 283L, 246L, 273L, 270L, 254L), v5 = c(28396L, 
  28054L, 27433L, 27347L, 27267L, 25270L)), .Names = c("Ids", "v1", 
  "v2", "v3", "v4", "v5"), class = "data.frame", row.names = c(NA, 
  -6L)) 
```

# shell - 如何使用命令行创建输出文件？

> ID：15097165
> 
> 赞同：1
> 
> 时间：2013-02-26T19:01:47.153
> 
> 标签：shell, command-line, ssh, command

我正在使用此命令删除所有重复的行：

```
sort file.txt | uniq -u 
```

但它只显示终端中的所有唯一行。我需要更改什么以使其创建一个名为 newfile.txt 的新文件，所有唯一行都在其中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:03:06.360

只是重定向到一个文件

> 排序文件.txt | uniq -u > newfile.txt

# php - 如何从表中的 z 列发布最后 x 行的数据？(MYSQL/PHP)

> ID：15097166
> 
> 赞同：0
> 
> 时间：2013-02-26T19:01:47.857
> 
> 标签：php, mysql, post, rows

在数据库中，是一个表，table，有 3 列，id（自动递增）、title 和 description。

如何获取表中的最后 6 行并将数据发布如下：

```
<div class="myclass">
   <h1>Title</h1>
   <p>Description</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:04:02.363

您正在寻找的 SQL 是这样的：

```
SELECT Title, Description
FROM aTable
ORDER BY ID Desc
LIMIT 6 
```

`ORDER BY`ID 然后使用`LIMIT`.

# delphi - 排序 TObjectList 相同比较值集群中的问题

> ID：15097175
> 
> 赞同：0
> 
> 时间：2013-02-26T19:02:13.517
> 
> 标签：delphi, generics, sorting, tobjectlist

我想`TObjectList<T>`使用我自己的比较器函数对下面显示的比较器函数代码进行排序。

我希望我的 ObjectList 能够在升序和降序两个方向上进行排序以实现这一点，我使用具有两个参数 S1 和 S2 的 SysUtil.CompareText 并以降序方式排序，我正好与 CompareText 结果的符号相反。我不知道是否存在另一种解决方案，如果 s1 大于 S2 则一切都很好，反之亦然，但是如果 s1 = s2 在正常情况下，列表中没有重新索引，因为列中的所有元素都是相同的，但是相反的发生 TObjectList 排序列表好像 s1 > s2 或 s1 < s2..

我的问题是如何实现支持平等和差异的比较器？

```
TPerson = class
private
  FName: string;
  FId: string;
public
  property Name: string read FName write FName;
  property ID: string read FID write FID;
end;

TPersons = class(TObjectList<TPerson>)
public
  constructor Create();
  procedure Sort(Direction: string); reintroduce;
end;

procedure TForm4.Button1Click(Sender: TObject);
var
  PersonsList: TPersons;
  I: Integer;
begin
  PersonsList := TPersons.Create;
  PersonsList.Sort('Ascending');
  for I := 0 to PersonsList.Count - 1 do
    ShowMessage(PersonsList[i].Name);
end;

{ TPersons }

constructor TPersons.Create;
var
  Person: TPerson;
begin
  Person := TPerson.Create;
  Person.Name := 'fateh';
  Person.ID := '1';
  Self.Add(Person);

  Person := TPerson.Create;
  Person.Name := 'mohamed';
  Person.ID := '1';
  Self.Add(Person);

  Person := TPerson.Create;
  Person.Name := 'oussama';
  Person.ID := '1';
  Self.Add(Person);
  // all ids are identical
end;

procedure TPersons.Sort(Direction: string);
var
  Comparer   : IComparer<TPerson>;
  Comparison : TComparison<TPerson>;
begin
  if Direction = 'Ascending' then

    Comparison := function(const Person1, Person2 : TPerson): Integer
                  begin
                    result := CompareText(Person1.ID, Person2.ID);
                  end;

  if Direction = 'Descending' then

    Comparison := function(const Person1, Person2 : TPerson): Integer
                  begin
                    result := - CompareText(Person1.ID, Person2.ID);
                  end;

    Comparer := TComparer<TPerson>.Construct(Comparison);

    inherited Sort(Comparer);
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:00:20.243

> 如果 s1 = s2 在正常情况下，列表中没有重新索引，因为列中的所有元素都是相同的

那是错误的想法。计算机应该按照您说的去做——但仅此而已。如果您告诉计算机这些对象是相等的（换句话说，比较器函数返回零）-那么计算机有权将它们放在适合其内部排序实现的任何顺序中。

如果您确实想要具有相同 ID 的对象集群之间的特定顺序 - 这仅意味着具有相同 ID 的对象并不真正相等，至少不是所有这些对象。

当然，如果 ID 不同 - 那么对象也一样。但即使这些 ID 相同 - 只要您关心排序，这只是证明这些对象仍然与您不同，并且 ID 相等性不足以指定对象完全相等。这意味着您应该使用嵌套、级联比较器，使用越来越多的细粒度测试，直到发现差异。

```
Comparison := function(const Person1, Person2 : TPerson): Integer
  begin
     Result := CompareText(Person1.ID, Person2.ID);
     if Result <> 0 then exit;

     Result := CompareText(Person1.Name, Person2.Name);
     if Result <> 0 then exit;

     Result := Person1.Age - Person2.Age;
     if Result <> 0 then exit;

     Result := GenderCompare(Person1.Sex, Person2.Sex);
     if Result <> 0 then exit;

     Result := Person1.Salary - Person2.Salary;
     if Result <> 0 then exit;

     ...et cetera
  end; 
```

比较是一种数学，一种代数。你证明了一些公理，然后一些理论开始起作用。但仅在公理证明之后，不超过实际定理项。

您关心具有相同 ID 的对象的顺序这一事实表明该公理是错误的。比较过程比单​​独的 ID 更复杂。您必须制作一个仅在真正相等的对象上返回零的比较器，换句话说，您绝对不关心的对象的相应顺序。

尝试阅读[http://www.howzatt.demon.co.uk/articles/2011-05-equality.html](http://www.howzatt.demon.co.uk/articles/2011-05-equality.html)

# android - 如何读取 Android 设备的 FrameBuffer 来制作系统截图？

> ID：15097177
> 
> 赞同：1
> 
> 时间：2013-02-26T19:02:16.920
> 
> 标签：android, screenshot, inputstream, capture, framebuffer

我会知道如何获取 Android 设备的系统屏幕截图（不是整个系统的活动）。我试图：使用 OpenGL 库，但我找不到完整的代码......使用一个过程，像这样：

```
process = Runtime.getRuntime().exec("su -c cat /dev/graphics/fb0");
InputStream is = process.getInputStream(); 
```

但是，在那之后我应该如何继续？如何使用 cat 命令读取之前拍摄的图像？我试图这样做：

```
in.read(byteArray); 
```

但是方法不起作用，不要在字节数组中放任何东西......请帮助我，我伤了我的大脑！

# enthought - 循环遍历值时延迟 on_trait_change() - 仅在未单击鼠标时执行

> ID：15097187
> 
> 赞同：1
> 
> 时间：2013-02-26T19:03:12.410
> 
> 标签：enthought

如果你有 Range trait 设置，你如何让它只在用户停止在范围内移动时才执行更改？

IE。一些范围发生了变化：

```
some_trait_changed(self):
    wait for user to finish selection
    complex calculation. 
```

每次用户拖动范围工具时，它都会为范围内的每个值计算一个新值。我只希望它在他们确定一个值后运行......即一旦鼠标“未点击”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:12:11.053

使用`Range(..., auto_set=False)`. `auto_set`关键字被传递给which将`RangeEditor`适当地配置滑块。

# php - 如何在 64 位系统上将 dll 与 php 和 iis 一起使用

> ID：15097191
> 
> 赞同：2
> 
> 时间：2013-02-26T19:03:20.693
> 
> 标签：php, iis, com

我正在构建一个需要一些 com 组件的新应用程序，但每次我尝试代码

```
$obj = new com("Excel.Application") or die("Unable to create com object"); 
```

或者

```
$obj = new com("zkemkeeper.ZKEM.1") or die("Unable to create com object"); 
```

或者

```
$obj = new com("Bullzip.PDFPrinterSettings") or die("Unable to create com object"); 
```

我总是收到这样的回复

```
Fatal error: Uncaught exception 'com_exception' with message 'Failed to create COM object `X.X':
Access is denied. ' in C:\inetpub\wwwroot\XXXX\XXXX.php:X 
Stack trace: 
#0 C:\inetpub\wwwroot\XXXX\XXXX.php(X): com->com('Excel.Applicati...') 
#1 {main} thrown in C:\inetpub\wwwroot\XXXX\XXXX.php on line X 
```

已经验证了目录、dcom、应用程序等设置以允许使用这些组件，已经注册并安装了所需的应用程序等等，但最后我无法让这个东西运行。

这些组件已安装并且对应用程序“可见”，已经尝试使用 java、vb、c# 并且这些 com 工作正常，但使用 php 无法正常工作。

服务器的规格是这个

*   PHP 5.4.9
*   IIS 7.5.7600
*   Windows 7 Ultimate 64bit/Windows Server 2008 R2 64bit（在两台服务器上都试过）

有任何想法吗？

更新，最后一些com组件像excel和bullzip一样工作，zkemkeeper仍然无法工作，找不到有关该dll的任何有用信息，我所找到的只是一个解决方案编辑注册表并将guid和clsid添加到wow6432但没有工作对我来说，有人用过那个组件吗？（我的意思是 zkemkeeper）

# php - php ldap 搜索查找属性

> ID：15097196
> 
> 赞同：1
> 
> 时间：2013-02-26T19:03:47.430
> 
> 标签：php, search, attributes, ldap

我有一个查询 LDAP 服务器的 php 应用程序。使用 LDAP Browser 桌面应用程序，我可以看到以下用户：cn=joebloe,ou=users,ou=people,o=cuid

具有以下属性：“departmentNumber”、“loginDisabled”等。

在我的 php 应用程序中，我有以下代码：

```
$sr = ldap_search($ds, "o=$o", "cn=joebloe,ou=users,ou=people,o=cuid"); 
```

但是那个代码我错了，只是返回一个资源链接；如果我能得到“loginDisabled”属性的值就好了。

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:08:01.137

看看[http://es2.php.net/manual/en/function.ldap-search.php](http://es2.php.net/manual/en/function.ldap-search.php)和[http://es2.php.net/manual/es/function.ldap-get-entries.php](http://es2.php.net/manual/es/function.ldap-get-entries.php)

```
<?php
// $ds is a valid link identifier for a directory server

// $person is all or part of a person's name, eg "Jo"

$dn = "o=My Company, c=US";
$filter="(|(sn=$person*)(givenname=$person*))";
$justthese = array("ou", "sn", "givenname", "mail");

$sr=ldap_search($ds, $dn, $filter, $justthese);

$info = ldap_get_entries($ds, $sr);

echo $info["count"]." entries returned\n";
?> 
```

从 PHP 手册复制的片段

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:13:00.013

如果您想获得有关 的信息`joebloe`，那么您应该搜索他。我认为您的基本 DN 字符串有点过于具体。

试试这个：

```
$search = ldap_search($ds, "ou=users,ou=people,o=cuid", "cn=joeblow"); 
$results = ldap_get_entries($ds, $search);
var_dump($results);

// Print Department Number
echo "Department Number = ".$results[0]['departmentNumber'][0]; 
```

# linux - 如何找出 Arduino 插入的端口号是什么

> ID：15097198
> 
> 赞同：0
> 
> 时间：2013-02-26T19:03:58.367
> 
> 标签：linux, arduino

我需要在[http://playground.arduino.cc/Interfacing/Java](http://playground.arduino.cc/Interfacing/Java)代码中将其指定为 PORT_NAMES。/jre/lib/ 和 /jre/lib/ext 目录在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T19:10:52.347

控制面板，系统，您应该在硬件列表中看到您的 Arduino。右键单击并检查属性。连接的端口在那里。

# jquery - 使用 Asp.net mvc 格式化日期

> ID：15097199
> 
> 赞同：1
> 
> 时间：2013-02-26T19:03:59.573
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, telerik, telerik-grid

我正在使用下面的代码在我的网格中显示更新日期。但是当我这样给出时，我得到的日期格式是这样的

```
9/3/2012 6:14:51 PM

  columns.Bound(o => o.Datetime_Updated).Title("Update Date").Width(160); 
```

但是我的代码格式只需要几个小时和分钟，就像这样

```
9.3.2012 6:14 PM 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:14:49.543

试试这个：

```
columns
  .Bound(o => o.Datetime_Updated)
  .Title("Update Date")
  .Width(160)
  .Format("{0:MM.dd.yyyy hh:mm tt}"); 
```

[参考](http://www.telerik.com/community/forums/aspnet-mvc/grid/date-time-format-on-grid.aspx)

# ruby - Ruby：如果为真或获取价值

> ID：15097201
> 
> 赞同：3
> 
> 时间：2013-02-26T19:04:05.427
> 
> 标签：ruby

我可以像这样使用三元运算符：

```
a.empty? ? a : b 
```

如果`a`只是一个短变量，则可以。如果我不想使用变量，但是，例如，我在一个复杂的数组函数链中，我没有临时变量，如何在不必重复链的情况下做到这一点？在我看来，这似乎只适用于我可以使用的 nil 值 `or`

```
a.filter { bla bla bla }.map { bla bla bla }.reduce { bla bla } || b 
```

但是对于任何其他类型的检查如何做到这一点？

```
a.filter { bla bla bla }.map { bla bla bla }.reduce { bla bla }.empty? ? a.filter { bla bla bla }.map { bla bla bla }.reduce { bla bla } : b 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:13:14.057

这个问题被反复问过：

```
a
.filter{bla bla bla}
.map{bla bla bla}
.reduce{bla bla}
.tap{|a| break a.empty? ? a : b} 
```

或者，或者（不推荐）：

```
a
.filter{bla bla bla}
.map{bla bla bla}
.reduce{bla bla}
.instance_eval{empty? ? self : b} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:09:01.597

您可以将第一部分中的值分配给变量，然后在第二部分中使用它：

```
(temp = a.filter { bla bla bla }.map { bla bla bla }.reduce { bla bla }).empty? ? b : temp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T22:56:13.180

使用（或复制）精确定义的[`presence`](http://apidock.com/rails/Object/presence)：`active_support`

```
a.filter{ bla bla bla }
 .map { bla bla bla }
 .reduce{ bla bla }
 .presence || b 
```

# opencv - JavaCV创建和绘制灰度单通道直方图

> ID：15097206
> 
> 赞同：0
> 
> 时间：2013-02-26T19:04:24.530
> 
> 标签：opencv, histogram, javacv, grayscale

我是这个网站的新手，如果我的帖子有任何错误，请告诉我。我有一些关于在 javacv 中计算和绘制直方图的问题。以下是我根据搜索的一些信息编写的代码：

我得到了这个错误：*OpenCV 错误：参数之一在未知函数中超出范围（索引超出范围），文件......\src\opencv\modules\core\src\array .cpp，第 1691 行*

```
private CvHistogram getHistogram(IplImage image) {//get histogram data, input has been converted to grayscale beforehand 

    IplImage[] hsvImage1 = {image};
    //bins and value-range
    int numberOfBins = 256;
    float minRange = 0.0f;
    float maxRange = 255.0f;
    // Allocate histogram object
    int dims = 1;
    int[] sizes = new int[]{numberOfBins};
    int histType = CV_HIST_ARRAY;
    float[] minMax = new float[]{minRange, maxRange};
    float[][] ranges = new float[][]{minMax};
    CvHistogram hist = cvCreateHist(dims, sizes, histType, ranges, 1); 
    cvCalcHist(hsvImage1, hist, 0, null);
    return hist;
}

private IplImage DrawHistogram(CvHistogram hist, IplImage image) {//draw histogram
    int scaleX = 1;
    int scaleY = 1;
    int i;
    float[] max_value = {0};
    int[] int_value = {0};
    cvGetMinMaxHistValue(hist, max_value, max_value, int_value, int_value);//get min and max value for histogram

    IplImage imgHist = cvCreateImage(cvSize(256, image.height() ),IPL_DEPTH_8U,1);//create image to store histogram
    cvZero(imgHist);
    CvPoint pts = new CvPoint(5);

    for (i = 0; i < 256; i++) {//draw the histogram 
        float value = opencv_legacy.cvQueryHistValue_1D(hist, i);
        float nextValue = opencv_legacy.cvQueryHistValue_1D(hist, i + 1);

        pts.position(0).x(i * scaleX).y(image.height() * scaleY);
        pts.position(1).x(i * scaleX + scaleX).y(image.height() * scaleY);
        pts.position(2).x(i * scaleX + scaleX).y((int)((image.height() - nextValue * image.height() /max_value[0]) * scaleY));
        pts.position(3).x(i * scaleX).y((int)((image.height() - value * image.height() / max_value[0]) * scaleY));
        pts.position(4).x(i * scaleX).y(image.height() * scaleY);
        cvFillConvexPoly(imgHist, pts.position(0), 5, CvScalar.RED, CV_AA, 0);
    }
    return imgHist;
} 
```

我尝试搜索我在底部提供的几个链接，但是，每个链接都使用不同的语言，因此我不确定我是否已将它们正确转换为 java。老实说，我怀疑的事情很少，如果可以提供任何建议，我会很高兴，例如：

1.  浮动[] 最大值 = {0}; // 我参考了互联网，它帮助我解决了 cvGetMinMaxHistValue() 中的语法错误，不确定它是否会导致逻辑错误

2.  pts.position(3).x(i * scaleX).y((int)((image.height() - value * image.height() / max_value[0]) * scaleY)); // 我把int降为pts会识别的类型，还有一件事是max_value[0]是0，想知道会不会因为除法而导致逻辑错误

使用的链接：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:43:59.460

//使用这个public CvHistogram getHistogram(IplImage image) {//获取直方图数据，输入事先已经转灰度

```
IplImageArray hsvImage1 = splitChannels(image);
//bins and value-range
int numberOfBins = 256;
float minRange = 0.0f;
float maxRange = 255.0f;
// Allocate histogram object
int dims = 1;
int[] sizes = new int[]{numberOfBins};
int histType = CV_HIST_ARRAY;
float[] minMax = new float[]{minRange, maxRange};
float[][] ranges = new float[][]{minMax};

CvHistogram hist = cvCreateHist(dims, sizes, histType, ranges, 1); 
cvCalcHist(hsvImage1, hist, 0, null);
return hist; 
```

}

```
private IplImageArray splitChannels(IplImage hsvImage) {
    CvSize size = hsvImage.cvSize();
    int depth = hsvImage.depth();
    IplImage channel0 = cvCreateImage(size, depth, 1);
    IplImage channel1 = cvCreateImage(size, depth, 1);
    IplImage channel2 = cvCreateImage(size, depth, 1);
    cvSplit(hsvImage, channel0, channel1, channel2, null);
    return new IplImageArray(channel0, channel1, channel2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T13:34:43.700

您的错误在这部分：

```
for (i = 0; i < 256; i++) {//draw the histogram 
    float value = opencv_legacy.cvQueryHistValue_1D(hist, i);
    float nextValue = opencv_legacy.cvQueryHistValue_1D(hist, i + 1); 
```

你使用`i+1`它会导致错误超出范围，你可以使用你的`for`直到`255`来纠正它。

我希望我对你有所帮助。总帐

# grails - 未打印 Grails 和 JBoss AS/EAP 日志记录

> ID：15097210
> 
> 赞同：2
> 
> 时间：2013-02-26T19:04:40.243
> 
> 标签：grails, logging, jboss

我正在尝试在 JBoss EAP 上部署 grails 应用程序，问题是除了 stdout 和 stderr 之外，没有记录我的应用程序的输出。我真的不明白在这种情况下日志是如何工作的，因为 jboss 使用一些内部日志系统而 grails 使用 log4j。

这是我在standalone.xml 中的日志配置：

```
 <subsystem xmlns="urn:jboss:domain:logging:1.1">
        <console-handler name="CONSOLE">
            <level name="INFO"/>
            <formatter>
                <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
            </formatter>
        </console-handler>
        <periodic-rotating-file-handler name="FILE">
            <formatter>
                <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
            </formatter>
            <file relative-to="jboss.server.log.dir" path="server.log"/>
            <suffix value=".yyyy-MM-dd"/>
            <append value="true"/>
        </periodic-rotating-file-handler>
        <logger category="com.arjuna">
            <level name="WARN"/>
        </logger>
        <logger category="org.apache.tomcat.util.modeler">
            <level name="WARN"/>
        </logger>
        <logger category="sun.rmi">
            <level name="WARN"/>
        </logger>
        <logger category="jacorb">
            <level name="WARN"/>
        </logger>
        <logger category="jacorb.config">
            <level name="ERROR"/>
        </logger>
        <root-logger>
            <level name="INFO"/>
            <handlers>
                <handler name="CONSOLE"/>
                <handler name="FILE"/>
            </handlers>
        </root-logger>
    </subsystem> 
```

这是默认的。

这个 log4j 配置在我的 Config.groovy 中：

```
// log4j configuration
log4j = {
    // Example of changing the log pattern for the default console appender:
    //
    //appenders {
    //    console name:'stdout', layout:pattern(conversionPattern: '%c{2} %m%n')
    //}

    error  'org.codehaus.groovy.grails.web.servlet',        // controllers
           'org.codehaus.groovy.grails.web.pages',          // GSP
           'org.codehaus.groovy.grails.web.sitemesh',       // layouts
           'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
           'org.codehaus.groovy.grails.web.mapping',        // URL mapping
           'org.codehaus.groovy.grails.commons',            // core / classloading
           'org.codehaus.groovy.grails.plugins',            // plugins
           'org.codehaus.groovy.grails.orm.hibernate',      // hibernate integration
           'org.springframework',
           'org.hibernate',
           'net.sf.ehcache.hibernate'

    all additivity: false, console: [
            'grails.app.controllers.com.redhat.theses',
            'grails.app.domain.your.com.redhat.theses',
            'grails.app.services.com.redhat.theses',
            'grails.app.taglib.com.redhat.theses',
            'grails.app.conf.com.redhat.theses',
            'grails.app.filters.com.redhat.theses'
    ]
} 
```

我真的不明白这个日志记录的东西，它太令人困惑了，我只想记录至少所有的错误，对于初学者来说。有人会认为这样一个关键功能默认情况下是有效的。

如果我在启动 JBoss 时设置此属性：

```
./standalone.sh -Dorg.jboss.as.logging.per-deployment=false 
```

它完全按照我的意愿工作。但一切都好吗？为什么我必须设置这个属性才能获得像日志记录这样的关键功能，真的吗？

非常感谢您的帮助，如果我听起来有点自大，我很抱歉，我已经尝试了好几个小时，但我仍然在最初的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-26T01:23:06.493

org.jboss.as.logging.per-deployment 环境变量，AKA 主机属性，AKA 环境属性告诉 JBoss 使用哪个日志配置。将其设置为 true 会告诉 JBoss 在正在部署的应用程序中使用日志记录配置。我不知道如何在 Grails Config.groovy 中进行设置。将该主机属性设置为 false 后，我在 JBoss 中进行配置。False 表示使用 JBoss 中的日志记录配置。

在 JBoss 中将该属性设置为 false，然后创建一个 grails.app 类别并将其记录到文件处理程序中。这适用于我在域模式下运行的 Grails 和 EAP 6.0。

# javascript - 在时间范围对象中显示最后添加的元素（HTML5 视频相关）

> ID：15097211
> 
> 赞同：1
> 
> 时间：2013-02-26T19:04:40.090
> 
> 标签：javascript, jquery, html, video

HTML5 中有一个函数可以显示视频中缓冲时间范围的范围。我想展示最后添加的“缓冲”部分，但事实证明这非常困难。

基本上，当您单击视频中的某个时间（比如说 00:16）时，如果视频还没有缓冲，它就会开始缓冲。因此，随着视频的加载，我们最终会得到一个 16s-18s、16s-20s 等的缓冲区。现在假设我们在视频中没有缓冲的地方点击之前的其他地方。所以我点击 00:05。“缓冲”数组将有 16-20s 和 5s-6s 或加载多少。

但是，5s-6s 将在时间范围数组中的 16s-20s 之前添加。这意味着我们不能只选择数组的最后一个元素作为最新的缓冲部分，而是必须选择第一个元素。然后，如果您在 5s 标记之前单击其他位置，您最终会得到数组的第一部分是不同的值。由于它们是以这种方式添加的，我找不到添加的最新缓冲区部分。

找到这个的最好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:10:05.113

最简单的方法是在每次将新内容添加到缓冲区时复制属性中的`TimeRanges`对象。`buffer`然后，您可以使用此“历史记录”来查找添加时间范围的顺序。

例如，使用 jQuery：

```
var history = [];
$(yourvideo).on("seeked",function(){
    history.push(jQuery.extend({}, this.buffered));
}); 
```

# c# - 在单独的 EF 项目中将 DataAnnotations 添加到生成的类 - 使用伙伴类

> ID：15097214
> 
> 赞同：1
> 
> 时间：2013-02-26T19:04:47.000
> 
> 标签：c#, entity-framework

使用多层概念，我`EMDX`在一个项目/库中拥有我的和实体，而我的主要应用程序在另一个项目中，那里是伙伴类的最佳位置，这样我就可以将“干净”的显示名称附加到模型的字段中。

我创建了一个部分类

```
[MetadataType(typeof(ReportColumnMD))]
public partial class ReportColumn
{ }

public class ReportColumnMD
{
    public int GroupID { get; set; }
    [Display(Name = "Value")]
    public string ColumnValue { get; set; }
    [Display(Name = "Description")]
    public string ColumnDescription { get; set; }
    public int ID { get; set; }
    [Display(Name = "Group Description")]
    public string GroupDescription { get; set; }
    [Display(Name = "Default State")]
    public Nullable<bool> DefaultState { get; set; }
    [Display(Name = "Enabled")]
    public Nullable<bool> IsActive { get; set; }
} 
```

在我的应用程序项目中。一切都编译得很好，但显示名称仍然是原始数据库列名。这个部分类是否需要驻留在 EF 项目中？在同一个命名空间下？

我的偏好是将其保留在应用程序项目中。

有什么建议或想法吗？

**更新

我已将部分类移动到 EF 项目并更改了命名空间。这可行，但我仍然想找到一种方法将其保留在我的应用程序项目中。

***更新

我基本上采取了在我的 EF 项目中创建一个 Metadata 文件夹并将我的数据注释伙伴类放在那里的策略。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:02:39.750

我基本上采用了第二次更新中解释的策略，并放弃了尝试将伙伴课程保留在单独的项目中。

# url - 高级 URL 和 URL 重写

> ID：15097216
> 
> 赞同：0
> 
> 时间：2013-02-26T19:04:59.557
> 
> 标签：url, url-rewriting

前几天我正在访问网站 asos.com。如果您在他们的网站上搜索“tshirt”，则结果 URL 是“ [http://www.asos.com/search/tshirt?q=tshirt](http://www.asos.com/search/tshirt?q=tshirt) ”。有谁知道他们使用哪种技术使现场看起来生成一个名为“tshirt”的页面，该页面基本上需要任何扩展？

此外，如果您选择产品，则 URL 将变为：' [http://www.asos.com/ralph_lauren/polo/product.aspx](http://www.asos.com/ralph_lauren/polo/product.aspx) ' 我知道他们没有每个品牌和项目的文件和文件夹，所以如何浏览器可以跟随这个网址吗？

我不是在寻找任何代码，只是提示如何谷歌以获取更多信息。

希望这听起来不会太无知！

许多拉加德，
安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:22:02.220

在大多数情况下，这种功能（通常称为干净 URL、用户友好 URL 或蜘蛛友好 URL）是通过服务器端重写来实现的。将特定已知结构的所有请求指向单个后端脚本进行处理。

现在，在我看来，您提到的这些特定 URL 并不是干净 URL 的最佳示例。然而，我将给你一个例子，说明如何使用 Apache mod_rewrite 来实现这样一个干净的 URL（因为 Apache 非常受欢迎）。

以一个 URL 为例`http://somedomain.com/product/ralph_lauren/polo`

你也许可以在 mod_rewrite 中做这样的事情

```
RewriteEngine On
RewriteRule /?product/(.*)/(.*) /product.php?cat=$1&subcat=$2 [L] 
```

这将静默地（对最终用户）将对结构的任何 URL 的传入请求重定向`/product/*/*`到名为 的脚本，并将 URL 的第二和`/product.php`第三部分作为要由脚本评估的参数传递。`cat``subcat`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:11:34.280

我不确定我是否理解您的要求，但是在您引用的示例中，它使用的是查询字符串，该字符串是“？”之后的所有内容 在网址中。

在后端服务器上，它使用查询字符串中传递的变量来确定返回给您的内容。

# html - 如果这两种样式具有相同的 css 属性，为什么会呈现不同的样式？

> ID：15097218
> 
> 赞同：0
> 
> 时间：2013-02-26T19:05:10.677
> 
> 标签：html, css, fonts

[你可以在这里](http://trufavarela.com/uruware/servicios/)看到一个现场演示。

问题如下，`h3`和`title-azul mas-grande`：

```
h3{
    color:#109de9;
    font-size:28px;
    margin-bottom:15px;
    margin-top:15px;
} 
```

和

```
.title-azul{
    color:#109de9;
    font-size:20px;
    margin-bottom:6px;
}

.mas-grande{
    font-size:28px;
    margin-bottom:15px;
    margin-top:15px;
} 
```

据我所知，它应该呈现相同，但`title-azul mas-grande`呈现更小：

![在此处输入图像描述](../Images/0d76ee84561a9c7dc28d7863dcb1022a.png)

当我检查 chrome 中的元素时，计算的样式完全相同，只是`font-weight: normal;`没有出现在类中`title-azul mas-grande`：

```
-webkit-border-image: none;
border-bottom-color: rgb(16, 157, 233);
border-bottom-style: none;
border-bottom-width: 0px;
border-left-color: rgb(16, 157, 233);
border-left-style: none;
border-left-width: 0px;
border-right-color: rgb(16, 157, 233);
border-right-style: none;
border-right-width: 0px;
border-top-color: rgb(16, 157, 233);
border-top-style: none;
border-top-width: 0px;
color: rgb(16, 157, 233);
display: block;
font-family: omnes;
font-size: 28px;
font-weight: normal; #This does not appear when I inspect the div with the class title-azul mas-grande
height: 28px;
line-height: 28px;
margin-bottom: 15px;
margin-left: 0px;
margin-right: 0px;
margin-top: 15px;
padding-bottom: 0px;
padding-left: 0px;
padding-right: 0px;
padding-top: 0px;
vertical-align: baseline;
width: 750px; 
```

这很奇怪，因为所需的字体粗细实际上是`normal`，但这是我能找到的唯一明显的区别。

你能指出问题出在哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:09:41.280

我认为这只是一种光学效应。我更改了标题文本，它们呈现相同。(efecto óptico ;))

# android - 从另一个加载器启动加载器。对还是错？

> ID：15097221
> 
> 赞同：0
> 
> 时间：2013-02-26T19:05:20.073
> 
> 标签：android, android-asynctask, android-loadermanager

我有通过 CursorLoader 填充的列表视图。CursorLoader 由 LoaderManager.LoaderCallback 的 createLoader 方法创建。我对此没有任何问题。问题在于我想在列表视图填充完成后开始另一个任务并用其他数据填充列表视图。我目前的解决方案是在 onLoadFinished 方法中启动另一个加载器。

这是正确的解决方案还是可以以更优雅和有效的方式完成？你能给一些建议吗，因为我在android开发方面没有太多经验。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:17:53.763

从中加载`onLoadFinished`将没有问题。我在我的一个宠物项目中做了类似的事情。我从自己的 ContentProvider 加载数据，然后从手机的 Contact ContentProvider 加载联系人数据。我的数据库中的每个条目都可以引用多个联系人，因此我必须在知道要加载哪些联系人信息之前加载我的项目。当我第一次收到我的项目数据时，我将 init/restart LoaderManager 调用链接到`onLoadFinished`. 它工作得很好，之后我将联系人数据用作列表。当然，我没有使用这种方法将数据加载到现有列表视图项内的视图中。我在我的项目的详细视图中使用了它自己的列表中的数据。它应该仍然可以与您想要做的事情一起工作，但是将数据附加到视图和诸如此类的东西可能会变得混乱，特别是因为视图“生命周期”超出了您的控制范围。

IMO 更好的方法是编写自定义 CursorAdapter 代码，该 CursorAdapter 将使用 AsyncTask 或 AsyncQueryHandler 在创建视图时获取额外数据。确保在列表滚动时缓存数据以供后续使用。第二种方法的好处是独立于外部/辅助加载程序。它封装了显示所需数据所需的所有逻辑，包括加载缺失的部分。它使视图数据和显示逻辑保持一致，安全地隐藏在可重用模块中。

# jquery - 选择导航列表项时需要切换“活动”类

> ID：15097223
> 
> 赞同：1
> 
> 时间：2013-02-26T19:05:30.827
> 
> 标签：jquery

我正在使用 twitter 引导程序并尝试在选择列表项时使用 jquery 将“活动”类设置为导航列表项。

下面是我的代码

```
 <ul class="nav nav-pills pull-right">
              <li id="home"><a href="/">Home</a></li>
              <li id="gadget"><a href="/category/gadgets"><span>Gadgets + Geeky</span></a></li>
              <li id="toys"><a href="/category/toys"><span>Toys</span></a></li>
              <li id="wearables"><a href="/category/wearables"><span>Wearables</span></a></li>
              <li id="home_office"><a href="/category/home-office"><span>Home + Office</span></a></li>
              <li id="food_drinks"><a href="/category/food-drinks"><span>Food + Drinks</span></a></li>
              <li id="kids"><a href="/category/kids"><span>Kids Stuff</span></a></li>
            </ul>
            <script>
              $( document ).ready(function() {
                 $('ul li').click(function() {
                    // remove classes from all
                    $('li').removeClass('active');
                    // add class to the one we clicked
                    $(this).addClass("active");
                 });
              });
            </script> 
```

但是，当我单击列表项时，导航项上设置了临时活动类，但页面正在刷新并显示当前单击的列表项而没有活动类。

[我已按照使用 JQuery 在导航栏中切换活动类中](https://stackoverflow.com/questions/6459581/toggle-active-class-in-nav-bar-with-jquery)提到的说明进行操作 ，但没有成功。

有人可以指出我缺少什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:19:11.467

*此脚本在重定向发生后运行，因此这应该适合您。我们正在向活动链接添加一个虚拟类“activeLink”，并根据该活动链接选择列表。*

```
 $(function(){
        $('ul li a').removeClass('activeLink');
        var url = window.location.pathname, 
            // create regexp to match current url pathname also to match the home link
            urlRegExp = new RegExp(url == '/' ? window.location.origin + '/?$' : url.replace(/\/$/,'')); 
            // now grab every link from the navigation
            $('.ul li a').each(function(){
                // and test its normalized href against the url pathname regexp
                if(urlRegExp.test(this.href.replace(/\/$/,''))){
                    $(this).addClass('activeLink');
                }
            });

           $('li').removeClass('active');
           $('a.activeLink').closest('li').addClass('active');
    }) 
```

;

# laravel - Laravel 4 模块是否可以通过其他模块（如 Drupal）默认扩展（核心功能）？

> ID：15097224
> 
> 赞同：0
> 
> 时间：2013-02-26T19:05:32.447
> 
> 标签：laravel, laravel-4

例如，在 Drupal 中有一个名为**Views**的模块，您需要该模块来运行名为**Views Slideshow**的模块（因为它需要使用来自 Views 模块控制器/模型等的一些方法），并且您需要这两个来运行**Views Slideshow Extra Effects**模块（这个模块使用前两个的东西，并以特定的方式扩展它等）

这些模块的名称只是虚构的例子，我不再使用 Drupal，但我非常喜欢它的模块架构。

那么，当我只是复制一个具有类似结构的模块时，L4 能否为我提供这种模块环境（此结构用于 CodeIgniter 的 MX HMVC：

```
modules/
             views/
                 controllers/
                     views.php
                 models/
                     views_model.php
                 views/
                     display.php
             views_slideshow/
                 controllers/
                     views_slideshow.php
                 models/
                     views_slideshow_model.php
                 views/
                     display.php
             views_slideshow_extra_effects/
                 controllers/
                     views_slideshow_extra_effects.php
                 models/
                     views_slideshow_extra_effects_model.php
                 views/
                     display.php 
```

还有一个重要的问题： **是否可以在不使用 composer 并将我的模块包含在某些配置文件等的情况下完成所有这些工作？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:42:29.310

我不明白你为什么不只使用作曲家？这正是它的设计初衷——它将允许您开发自己的库/模块并将它们“插入”到您的 Laravel 4 应用程序中，而无需更改核心代码等。

注意 - 作曲家模块可以是您计算机上的私有库 - 它们不必上传到 packagist.org 即可使用。我什至将我的私人作曲家库存储在私人 github 存储库中，这些存储库会自动拉入我的项目中。

# asp.net - 分页 GridView 问题

> ID：15097227
> 
> 赞同：0
> 
> 时间：2013-02-26T19:05:44.907
> 
> 标签：asp.net, gridview, pagination

刚看了几篇文章，`paging gridview`没看懂。。。

有我完整的gridview的代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" style="font-family: Verdana, Arial, Sans-Serif;" 

            CssClass="gridview" OnSorting="GridView_Sorting"
            DataKeyNames="id"
            AllowSorting ="True" BackColor="#CCCCCC"
            BorderStyle="Inset" BorderWidth="2px" BorderColor="GrayText"
            CellPadding="1"
            CellSpacing="5"
            HeaderStyle-HorizontalAlign="Center"
            OnRowDataBound="GridView1_RowDataBound"
            ForeColor = "Black" RowStyle-CssClass="gridview" 
            OnRowCommand="GridView1_RowCommand" AllowPaging="True" 
            OnPageIndexChanging="GridView1_PageIndexChanging" PageSize="5">            
            <AlternatingRowStyle BackColor="#CCCCCC" />
                <columns>

                    <asp:BoundField HeaderText="ID" DataField="id"  />
                    <asp:BoundField HeaderText="PRIORIDADE" DataField="prioridade" 
                        ItemStyle-HorizontalAlign="Center">
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>
                    <asp:BoundField  HeaderText="SITUAÇÃO"  DataField="situacao" ItemStyle-HorizontalAlign="Center" >
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>
                    <asp:BoundField HeaderText="RESPONSAVEL" DataField="responsavel" HeaderStyle-Width="65px" ItemStyle-HorizontalAlign="Center">
                    <HeaderStyle Width="65px" />
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>
                    <asp:BoundField HeaderText="DATA DE CADASTRO" DataField="dt_cadastro" DataFormatString="{0:dd/MM/yyyy}" HeaderStyle-Width="60px" SortExpression="dt_cadastro"
                    ItemStyle-HorizontalAlign="Center" >
                    <HeaderStyle Width="60px" />
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>
                    <asp:BoundField HeaderText="PREVISÃO DE TÉRMINO" DataField="previsao_termino" DataFormatString="{0:dd/MM/yyyy}" HeaderStyle-Width="60px"
                    ItemStyle-HorizontalAlign="Center">
                    <HeaderStyle Width="60px" />
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>
                    <asp:BoundField HeaderText="PROJETO" DataField="projeto"  ItemStyle-HorizontalAlign="Center">
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>
                    <asp:BoundField HeaderText="FUNCIONALIDADE" DataField="funcionalidade" 
                        ItemStyle-HorizontalAlign="Center" >
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>
                    <asp:BoundField HeaderText="CLUBE" DataField="clube"  
                        ItemStyle-HorizontalAlign="Center" >
                    <ItemStyle HorizontalAlign="Center" />
                    </asp:BoundField>

                    <asp:TemplateField HeaderStyle-Width="70px" HeaderText="VISUALIZAR" >
                        <ItemTemplate>
                            <asp:Button ID="Btn_Visualizar" runat="server" Text="VISUALIZAR" CssClass="Btn_Grid"  Font-Size="7pt" Font-Names="Verdana, Arial"  OnClick="Btn_Visualizar_Click"
                            CommandName="visualizar" CommandArgument="<%# ((GridViewRow)Container).RowIndex %>" />                            
                        </ItemTemplate>
                        <HeaderStyle Width="70px" />
                    </asp:TemplateField>
                    <asp:TemplateField HeaderStyle-Width="66px" HeaderText="ALTERAR">
                        <ItemTemplate>
                            <asp:Button ID="Btn_Alterar" runat="server" Text="ALTERAR" CssClass="Btn_Grid" Font-Size="7pt" Font-Names="Verdana, Arial"
                            CommandName="editar" CommandArgument="<%# ((GridViewRow)Container).RowIndex %>" />
                        </ItemTemplate>
                        <HeaderStyle Width="66px" />
                    </asp:TemplateField>
                    <asp:TemplateField HeaderStyle-Width="66px" HeaderText="FEEDBACK">
                        <ItemTemplate>
                            <asp:Button ID="Btn_Feedback" runat="server" Text="ADICIONAR" CssClass="Btn_Grid" Font-Size="7pt" Font-Names="Verdana,Arial"
                            CommandName="feedback" CommandArgument="<%# ((GridViewRow)Container).RowIndex %>" />
                        </ItemTemplate>
                        <HeaderStyle Width="66px" />
                    </asp:TemplateField>

                </columns>
            <EditRowStyle ForeColor="Black" CssClass="GridViewEditRow" />
            <FooterStyle BackColor="#CCCCCC" />
            <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" BorderColor="White" BorderStyle="Solid" BorderWidth="1px" />
            <PagerSettings Mode="NumericFirstLast" FirstPageText="First" LastPageText="Last" PageButtonCount="5" />
            <PagerStyle BackColor="#CCCCCC" ForeColor="Black" HorizontalAlign="Left" />
            <RowStyle BackColor="White" />
            <SelectedRowStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />
            </asp:GridView> 
```

代码隐藏：

```
public partial class TodosChamados : System.Web.UI.Page
  {
    BDUsuarios usr = new BDUsuarios();
    BDFuncionalidades func = new BDFuncionalidades();
    BDChamados ch = new BDChamados();

protected void Page_Load(object sender, EventArgs e)
  {
    if (!IsPostBack)
       {
          GridView1.DataSource = ch.BuscaTodosChamados();
          GridView1.DataBind();
        }
  }

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            if (e.Row.Cells[1].Text == "ALTA")
            {
                e.Row.Cells[1].BackColor = System.Drawing.Color.Red;
                e.Row.ControlStyle.Font.Bold = true;
            }
        }
        if (e.Row.Cells[0].Visible = e.Row.RowType == DataControlRowType.Pager)
        {
            e.Row.Cells[0].Visible = false;
        }
    }

protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
 {
    if (e.CommandName != "Sort")
       {
          if (e.CommandName == "visualizar")
                {
                 Session["id"] = GridView1.Rows[Convert.ToInt32(e.CommandArgument.ToString())].Cells[0].Text;
                    Session["editar"] = null;
                }
                else if (e.CommandName == "editar")
                {
                    Session["id"] = GridView1.Rows[Convert.ToInt32(e.CommandArgument.ToString())].Cells[0].Text; //Grava o ID do chamado da linha correspondente.
                    Session["editar"] = 1; // 1 - Editar   2 - Não Editar .
                }

                else if (e.CommandName == "feedback")
                {
                    Session["id"] = GridView1.Rows[Convert.ToInt32(e.CommandArgument.ToString())].Cells[0].Text; //Grava o ID do chamado da linha correspondente.                
                    Response.Redirect("~/Adm/Feedback.aspx");
                }
                Response.Redirect("~/Adm/DetalhesChamado.aspx");
            }
        }

protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
  {
      GridView1.PageIndex = e.NewPageIndex;
      GridView1.DataSource = ch.BuscaTodosChamados();
      GridView1.DataBind();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:11:23.693

**更新 2**

现在我希望找到了您的寻呼机未显示的原因。您正在使第一列不可见，即使对于 pager-row in 也是如此`RowDataBound`，但默认情况下寻呼机位于第一个单元格中：

```
e.Row.Cells[0].Visible = false; 
```

您必须检查正确的`RowType`：

```
e.Row.Cells[0].Visible = e.Row.RowType == DataControlRowType.Pager; 
```

甚至在 aspx 标记上更好：

```
<asp:BoundField HeaderText="ID" DataField="id" Visible="False" /> 
```

* * *

一个愚蠢的问题，你设置`AllowPaging`为true吗？

```
<asp:GridView Id="GridView1" runat="server" AllowPaging="True" >
    <PagerSettings Mode="NumericFirstLast" FirstPageText="First" LastPageText="Last" PageButtonCount="5" />
</asp:gridview> 
```

[GridView.AllowPaging 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.allowpaging.aspx)

`true`如果启用了寻呼功能；否则，`false`。默认值为**`false`**.

您还应该仅在启用 viwstate`GridView`时才进行数据绑定（默认）。`if(!IsPostBack)`

因此，将（我猜）中的数据绑定代码包装`Page_Load`到此检查中：

```
protected void Page_Load(Object sender, EventArgs e)
{
    if(!IsPostBack)
    {
         GridView1.DataSource = ch.BuscaTodosChamados();
         GridView1.DataBind();
    }
} 
```

否则不会触发事件，并且当您在回发时重新加载数据时，更改将被覆盖。

**更新**根据您的上次编辑：

我认为你`RowCommand`是这个问题的原因。它在事件之前被调用，`PageIndexChanging`并且在页面更改时也会触发（如果我没记错的话）。所以看看你`Response.Redirect`会发生什么，当没有`if/else-if`人会抓住它时，似乎是这样。

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName != "Sort")
    {
        if (e.CommandName == "visualizar")
        {
            // ..
        }
        else if (e.CommandName == "editar")
        {
           //..
        }

        else if (e.CommandName == "feedback")
        {
           //..
        }
        Response.Redirect("~/Adm/DetalhesChamado.aspx");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:15:36.537

`OnPageIndexChanging`您必须在 .aspx 中指定事件。它应该是：

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
        OnPageIndexChanging = "GridView1_PageIndexChanging" 
        AutoGenerateColumns="False" DataKeyNames="LastName,FirstName"
        EnablePersistedSelection="True" SelectedRowStyle-BackColor="Yellow" 
        DataSourceID="SqlDataSource1" AllowSorting="True"> 
```

你可能在[这里遇到同样的问题](https://stackoverflow.com/questions/15077864/nothing-happens-when-i-click-on-page-on-gridview-with-paging)

**更新**

确保绑定到 的数据`GridView`超过 5，因为`PageSize="5"`. 如果行数小于 5，则不会显示寻呼机。

# java - 如何检查当前设备上是否存在前置摄像头？

> ID：15097231
> 
> 赞同：2
> 
> 时间：2013-02-26T19:05:53.920
> 
> 标签：java, android

我使用以下代码来处理相机：

```
mMediaRecorderVideo=new MediaRecorder();
mCamera=Camera.open();      
mCamera.setDisplayOrientation(90);
mCamera.unlock();
mMediaRecorderVideo.setCamera(mCamera);
mMediaRecorderVideo.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
mMediaRecorderVideo.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
mMediaRecorderVideo.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH)); 
```

所以，我使用设备的默认摄像头，但如果可能的话，我需要设置前置摄像头。请告诉我，我该如何检查它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T19:09:58.910

```
int numCameras= Camera.getNumberOfCameras();
for(int i=0;i<numCameras;i++){
    Camera.CameraInfo info = new CameraInfo();
    Camera.getCameraInfo(i, info);
    if(CAMERA_FACING_FRONT == info.facing){
        return true;
    }
}
return false; 
```

如果要获取前置摄像头的编号，请返回 i 并在未找到时返回 0。

# c++ - C++ WebSocket 服务器实现（接受密钥不匹配）

> ID：15097232
> 
> 赞同：1
> 
> 时间：2013-02-26T19:05:55.823
> 
> 标签：c++, websocket

我尝试搜索但没有找到任何答案。我正在用 c++ 制作一个 websocket 服务器，但我无法让接受密钥工作。

这是我的代码：

```
std::string magicKey = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
key.append(magicKey);   
unsigned char* sha_str = SHA1(reinterpret_cast<const unsigned char*>(key.c_str()), key.length(), nullptr);
std::string final = base64_encode(reinterpret_cast<const unsigned char*>(sha_str), strlen((char*)sha_str)); 
```

我正在使用 openssl/sha.h

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:27:29.960

你在最后连接“=”吗？

相等的perl代码是为了验证你是否需要

```
 use Digest::SHA qw(sha1_base64);
    my $clientKey="xyz";
    my $specifcationGUID = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
    my $fullWebSocketKey = "$clientKey$specifcationGUID";

    # dGhlIHNhbXBsZSBub25jZQ==258EAFA5-E914-47DA-95CA-C5AB0DC85B11
    #print "Fill socket key is $fullWebSocketKey\n";
    # 0xb3 0x7a 0x4f 0x2c 0xc0 0x62 0x4f 0x16 0x90 0xf6 0x46 0x06 0xcf 
    # 0x38 0x59 0x45 0xb2 0xbe 0xc4 0xea
    print sha1_base64($fullWebSocketKey) . "="; 
```

# java - 使用 Arrays.binarySearch 将字符串与对象进行比较

> ID：15097233
> 
> 赞同：0
> 
> 时间：2013-02-26T19:05:56.543
> 
> 标签：java, string, types, compare, comparator

我正在研究用于加快短语搜索的后缀数组的实现。

我有一个“后缀”对象数组，这是后缀数组。每个 Suffix-object 都有两个值，document 和 position。

我有一个比较器，它根据使用两个值文档和位置在字符串字典中的查找对该数组进行排序。（例如，一个后缀为 document=1，position=5 的对象指向“fish”，另一个对象指向“cake”。“Cake”将排在“fish”前面。这样就可以了，并且后缀数组按字典顺序按预期排序

但是，现在我想在这个后缀数组中进行二分查找，这次的输入是一个字符串。如何使用 Arrays.binarySearch() 和我制作的 Comparator 来比较字符串键（我正在搜索的短语）来搜索后缀数组？如果 binarySearch() 方法能让我在 Comparator 中以某种方式进行比较，那么将 String 与 Suffix 对象进行比较将是微不足道的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:45:26.460

不知道我是否完全理解，但这是我的想法：

**在您的类中修改您的`compareTo`方法，如下所示：**

```
class Suffix implements Comparable<Object>
{
   /* ... */

   int getDocumentId() { /* ... */ }
   int getPosition() { /* ... */ }

   @Override
   public int compareTo(Object o)
   {
      if (o.getClass() == String.class)
      {
         /* Derived from compare code comment */
         String key = dictionary.getDocument(getDocumentId()).getData();
         String suffix = (getPosition() == 0) ? key : key.substring(getPosition());

         suffix.compareTo((String)o);
      }
      else
      {
         /* same as original comparison */
      }
   }
} 
```

**然后你可以这样做：**

```
Arrays.binarySearch(yourArray, yourString); 
```

# sql - 层次结构选择在 Visual Studio / SQL Server 2012 中不起作用

> ID：15097235
> 
> 赞同：1
> 
> 时间：2013-02-26T19:06:11.893
> 
> 标签：sql, function, sql-server-2012

此功能适用于我朋友的 Visual Studio 和 SQL Server 2021，但不适用于我的。

它在以下位置返回错误`WITH Result (ID)`：

> *“结果”附近的语法不正确，应为 AW_CHANGE_TRACKING_CONTEXT、AW_ID、AW_XMLNAMESPACES、QUOTED_ID*

任何解决方案..？

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE FUNCTION [dbo].[hierarchySelect]
(
@CategoryID int
)
RETURNS @Result TABLE (ID int) AS BEGIN

WITH Result (ID)
AS
(
    SELECT ID
    FROM Categories
    WHERE ID = @CategoryID
    UNION ALL
    SELECT C.ID FROM Categories C
    INNER JOIN Result R ON C.parentID = R.ID
)
INSERT INTO @Result
SELECT ID
FROM Result

RETURN

END
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:10:52.347

我想通了，它应该是结果而不是结果，但那是有线的，因为它在我的朋友 sql server 上工作，我不知道如何。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE FUNCTION [dbo].[hierarchySelect]
(
@CategoryID int
)
RETURNS @Result TABLE (ID int) AS BEGIN

WITH Result (ID)
AS
(
SELECT ID
FROM Categories
WHERE ID = @CategoryID
UNION ALL
SELECT C.ID FROM Categories C
INNER JOIN Results R ON C.parentID = R.ID
)
INSERT INTO @Result
SELECT ID
FROM Results

RETURN

END
GO 
```

# wpf - WPF xaml 将 ComboBox 背景颜色绑定到 SelectedItem 的颜色

> ID：15097236
> 
> 赞同：0
> 
> 时间：2013-02-26T19:06:16.633
> 
> 标签：wpf, xaml, binding, combobox, selecteditem

我已经创建了一个 ComboBox 类来启用命令，并且我想将 ComboBox 的背景颜色作为 CommandParameter 发送。我想将 ComboBox 的背景绑定到 SelectedItem 的背景颜色。

对于绑定并发送我拥有的 CommandParameter 的 ComboBox Style

```
 <Style x:Key="colorComboBox" TargetType="{x:Type local:ColorComboBox}" BasedOn="{StaticResource AnnotationToolbarComboBox}">
        <Setter Property="Background" Value="***SOME BINDING HERE???***"/>
        <Setter Property="Command" Value="{Binding ChangeColor, Mode=OneWay}"/>
        <Setter Property="CommandParameter" Value="{Binding Mode=OneWay, RelativeSource={RelativeSource Self}, Path=Background}"/>
        <Setter Property="CurrentColor" Value="{Binding CurrentColor, Mode=OneWay}"/>
    </Style> 
```

对于带有 ComboBoxItems 的 ComboBox。我想绑定到这些 ComboBoxItems 的背景。

```
 <local:CommandableComboBox Background="Red">
            <ComboBoxItem Width="50" Height="50" Background="Blue"/>
            <ComboBoxItem Width="50" Height="50" Background="Green"/>
            <ComboBoxItem Width="50" Height="50" Background="Red"/>
        </local:CommandableComboBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:15:39.483

尝试：

```
<Setter Property="Background" Value="{Binding SelectedItem.Background, RelativeSource={RelativeSource Self}}"/> 
```

# java - 尝试从不同类传递颜色参数时获取 NullPointerException

> ID：15097238
> 
> 赞同：0
> 
> 时间：2013-02-26T19:06:28.390
> 
> 标签：java, nullpointerexception, color-scheme

基本上我正在制作一个你用鼠标绘制的画板；有一组颜色按钮可供选择，它们是在自定义类 ColoredButton 中制作的，颜色参数由 setColor(int r,g,b) 设置。

因此，在 ColourToolbar 类中，当您单击其中一个 ColoredButtons 时，它会将全局变量 selectedCOlor 设置为该按钮中设置的颜色（如上所述），然后 DrawBoard 类使用 getColor() 获取“selectedCOlor”中的颜色ColourToolbar 类中的变量。

*   我遇到的问题是我在 DrawBoard 中得到了 NullPointerException，所以颜色参数永远不会到达那里，我现在尝试了代码中显示的类似方法，但都显示 NullPointerException。

这是课程（我取出了不需要的代码）：

```
public class ColoredButton extends JButton {

   public Color color;

   public ColoredButton(ImageIcon img){

       super(img);
   }

   public void setColor(int r, int g, int b){

       this.color = new Color(r,g,b);
   }

   public Color getColor(){

       return this.color;
   }

} 
```

下一节课：

```
public class ColourToolbar extends JPanel implements ActionListener{

public Color selectedColor;
public boolean colorSelected = false;

public ColoredButton pink,black,blue,green,orange,yellow,darkp,red,white;

public ColourToolbar(){

    setBackground(Color.DARK_GRAY);

    setLayout(new GridBagLayout());

    Dimension size = getPreferredSize();
    size.setSize(1024,80); //w, h
    setPreferredSize(size);

    // NOTE: There are 8 more blocks of codes like the one below, left for example.

    ImageIcon blackicon = new ImageIcon(getClass().getResource("Icons/Colours/Black.png"));
        black = new ColoredButton(new ImageIcon(blackicon.getImage().getScaledInstance(width, height, java.awt.Image.SCALE_SMOOTH)));
        gbc.gridx = 7;
        gbc.gridy = 0;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.weightx = 0.5;    
        black.setColor(255, 255, 255);
        black.setOpaque(false);
        black.setContentAreaFilled(false);
        black.setBorderPainted(false);
        black.setActionCommand("orange");
        black.addActionListener(this);
        gbc.insets = new Insets(0,0,0,0); //top, left, bottom, right
        add(black, gbc);

}

@Override
public void actionPerformed(ActionEvent e){

    // all colors: black, blue, green, orange, *pink, yellow, darkpink, *red, white

    if("black".equalsIgnoreCase(e.getActionCommand())){

        this.selectedColor = black.getColor();
        System.out.println("black= " + selectedColor.toString());
        this.colorSelected = true;
    }      
}

public Color getCurrColor(){

    return this.selectedColor;
}

} 
```

我得到 NullPointerException 的最后一堂课：

```
public class DrawBoard extends JPanel implements MouseListener, MouseMotionListener{

public JLabel status;
private JLabel imgLabel; // this is where the drawing happens
private List<Point> points = new ArrayList<Point>();
private List<BufferedImage> lines = new ArrayList<BufferedImage>();

private static final int BI_WIDTH = 1024;
private static final int BI_HEIGHT = 800;

private BufferedImage bImage = new BufferedImage(BI_WIDTH, BI_HEIGHT,
        BufferedImage.TYPE_INT_ARGB);

public Color currentColor;

public DrawBoard(){  

   Graphics2D g2d = bImage.createGraphics();
   g2d.dispose();

    Dimension size = getPreferredSize();
    size.setSize(1024,800); //w, h
    setPreferredSize(size);
    status =  new JLabel("default");
    add(status, BorderLayout.SOUTH);
    addMouseListener(this);
    addMouseMotionListener(this);  

     imgLabel = new JLabel(new ImageIcon(bImage)) {
     @Override
     protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        paintInLabel(g);
     }
   };
     imgLabel.setOpaque(false);
     setOpaque(false);
      add(imgLabel, BorderLayout.CENTER);

}

private void paintInLabel(Graphics g) {
  Graphics2D g2d = (Graphics2D) g;
  g2d.setColor(getColor()); // this colour is when mouse is pressed
  g2d.setStroke(new BasicStroke(5));
  if (points.size() < 2) {
     return;
  }
  for (int i = 1; i < points.size(); i++) {
     int x1 = points.get(i - 1).x;
     int y1 = points.get(i - 1).y;
     int x2 = points.get(i).x;
     int y2 = points.get(i).y;
     g2d.drawLine(x1, y1, x2, y2);
  }
}

// Where the drawing happens
@Override
public void mousePressed(MouseEvent e) {
    status.setText("you pressed down the mouse");
    this.pstart = e.getPoint();
    points.add(e.getPoint());

}

@Override
public void mouseDragged(MouseEvent e) {
  status.setText("you draged the mouse");
  points.add(e.getPoint());
  imgLabel.repaint();
}

@Override
public void mouseReleased(MouseEvent e) {
    status.setText("you release the mouse click");
    Graphics2D g2d = bImage.createGraphics();
    g2d.setColor(getColor()); // this is the final colour - 
    g2d.setStroke(new BasicStroke(5));

     if (points.size() >= 2) {
        for (int i = 1; i < points.size(); i++) {
           int x1 = points.get(i - 1).x;
           int y1 = points.get(i - 1).y;
           int x2 = points.get(i).x;
           int y2 = points.get(i).y;
           g2d.drawLine(x1, y1, x2, y2);
        }
     }
     g2d.dispose();

     points.clear();
     imgLabel.repaint();

}
// End of where the drawing happens

// BELOW IN THIS METHOD IS WHERE it gets the NullPointerException
private Color getColor() {
    ColourToolbar ct = new ColourToolbar();
    System.out.println(ct.getCurrColor().toString());

    return  ct.getCurrColor();
}

private void setColor(Color col){

    this.currentColor = col;
}

} 
```

错误堆栈跟踪在这里：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at gui.DrawBoard.getColor(DrawBoard.java:162)
    at gui.DrawBoard.paintInLabel(DrawBoard.java:78)
    at gui.DrawBoard.access$000(DrawBoard.java:32)
    at gui.DrawBoard$1.paintComponent(DrawBoard.java:67)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JLayeredPane.paint(JLayeredPane.java:585)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5228)
    at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent.paint(JComponent.java:1040)
    at java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:39)
    at sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:78)
    at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:115)
    at java.awt.Container.paint(Container.java:1967)
    at java.awt.Window.paint(Window.java:3877)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:781)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T19:11:57.300

好的，这就是问题所在：

```
ColourToolbar ct = new ColourToolbar();
System.out.println(ct.getCurrColor().toString()); 
```

`getCurrColor()``selectedColor`在 ... 内返回，`ColourToolbar`但您没有... 构造函数没有将其设置为任何*内容*。`selectedColor`所以值为`null`，当你打电话时`toString()`你会得到异常。

在您的描述中，您说：

> 它设置了一个全局变量 selectedCOlor

但`selectedColor`不是“全局”变量——它是一个*实例*变量；每个`ColourToolbar`实例都有一个单独的`selectedColor`变量。

*你为什么要在新* 的上做这个`ColourToolbar`？您真的不想从*现有*工具栏中获取所选颜色吗？或者，如果您真的希望它是全局的（ick），它应该是一个*静态*变量，由*静态*方法获取，而您根本不需要创建新实例。

# node.js - NODEJS dns.lookup

> ID：15097240
> 
> 赞同：0
> 
> 时间：2013-02-26T19:06:28.243
> 
> 标签：node.js

我正在尝试从终端读取站点名称并执行 dnslookup 以在屏幕上打印其 IP，但以下代码由于某种原因引发错误，这是代码

```
process.stdout.write('Enter the website name:<www.sitename.com>: ');
process.stdin.resume();
var dns = require('dns');
process.stdin.on('data',function(site) {

var lookup = site.toString('utf-8');
console.log(lookup);
dns.lookup(lookup,function(err,ip) {
    if (err) throw err;
    console.log(ip);
       });

}); 
```

错误是 if (err) throw err; ^ 错误：getaddrinfo ENOENT at errnoException (dns.js:31:11) at Object.onanswer [as oncomplete] (dns.js:123:16)

为什么代码不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T19:39:34.547

*stdin*上的**数据**为您提供带有尾随回车的主机。此尾随 CR 导致 getaddrinfo ENOENT 异常。

 *修改你的代码

```
var lookup = site.toString('utf-8').trim(); 
```*

# sockets - 命令行发送 msg 像 java socket

> ID：15097252
> 
> 赞同：-1
> 
> 时间：2013-02-26T19:07:06.537
> 
> 标签：sockets, command-line, telnet

我们可以使用 java socket 将 msg 从客户端发送到服务器，有没有办法像使用 telnet 或 ssh 一样做到这一点？（在 Linux 中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:21:23.487

不，不是`telnet`，你想要的是[netcat](http://en.wikipedia.org/wiki/Netcat)

示例也在维基百科页面上，因此我将它们保存在这里。

# jquery - 如何为文章边框设置动画

> ID：15097258
> 
> 赞同：0
> 
> 时间：2013-02-26T19:07:29.457
> 
> 标签：jquery, html

我有`<article id="why-me" style="">text</article>`带有样式的简单文章元素：

```
article {
    background: none repeat scroll 0 0 #000000;
    border: 2px solid #353535;
    box-shadow: 0 0 5px black;
    opacity: 0.8;
}

section#content article {
    background: none repeat scroll 0 0 #050505;
    border-radius: 3px 3px 3px 3px;
    margin-bottom: 20px;
    padding: 10px;
    position: relative;
    z-index: 5;
} 
```

所以我试图做闪光边框`jQuery('#why-me').animate({'borderColor': '#717171'});`，但什么也没发生......问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:12:14.467

默认情况下，彩色动画不是 jQuery 的一部分。你需要一个插件：

[http://www.bitstorm.org/jquery/color-animation/](http://www.bitstorm.org/jquery/color-animation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:11:24.697

如果包含 jquery，则必须指定动画的持续时间：

```
jQuery('#why-me').animate({'borderColor': '#717171'},fast); 
```

# android - 有没有办法覆盖 WebView 的行为？

> ID：15097264
> 
> 赞同：5
> 
> 时间：2013-02-26T19:07:53.310
> 
> 标签：android, android-webview

我`WebView`从我的布局中得到：

```
 WebView webView = (WebView) rootView.findViewById(R.id.myWebView); 
```

我想覆盖`onKeyDown`. 通常，我可以通过子类化来覆盖它。

```
 WebView webView = new WebView(this) {

        @Override
        public boolean onKeyDown (int keyCode, KeyEvent event) {
        // Do my stuff....
        }
} 
```

但是，由于我通过 using 获得了 WebView `findViewById`，有没有办法覆盖该方法？

PS：这实际上是一个复杂得多的情况，我不能 Override `onKeyDown`in `MainActivity`，因为它首先调用`onKeyDown`in `WebView`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T20:43:32.427

如果要覆盖某些方法，则必须创建一个自定义`WebView`类，其中`extends WebView`.

它看起来像这样：

```
public class CustomWebView extends WebView {

    public CustomWebView(Context context) {
        this(context, null);
    }

    public CustomWebView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public CustomWebView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        /* any initialisation work here */
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        /* your code here */
        return super.onKeyDown(keyCode, event);
    }

} 
```

为此，您必须相应地更改您的 XML 布局文件：

```
<com.example.stackoverflow.CustomWebView
    android:id="@+id/webview"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

此外，当您为 充气时`WebView`，请确保将其转换为正确的类型，即`CustomWebView`.

```
CustomWebView webView = (CustomWebView) findViewById(R.id.webview); 
```

否则，您将获得一个`java.lang.ClassCastException`.

# wordpress - Wordpress 在哪里获取标准帖子类型的格式

> ID：15097271
> 
> 赞同：1
> 
> 时间：2013-02-26T19:08:20.190
> 
> 标签：wordpress

我想更改标准帖子类型的格式，但似乎找不到修改格式的位置。这是继承形式 wp-includes 还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:02:34.680

尝试使用此简码：

（将此代码粘贴到functions.php的末尾）

```
function my_formatter($content) 
{
    $new_content = '';
    $pattern_full = '{(\[raw\].*?\[/raw\])}is';
    $pattern_contents = '{\[raw\](.*?)\[/raw\]}is';
    $pieces = preg_split($pattern_full, $content, -1, PREG_SPLIT_DELIM_CAPTURE);

    foreach ($pieces as $piece) {
        if (preg_match($pattern_contents, $piece, $matches)) {
            $new_content .= $matches[1];
        } else {
            $new_content .= wptexturize(wpautop($piece));
        }
    }

    return $new_content;
} 
```

用法：在管理面板中，转到帖子并在“[raw]”和“[/raw]”之间键入内容。[raw] 你的内容 [/raw]

# ruby-on-rails - 如何在方法中创建动态连接语句？

> ID：15097273
> 
> 赞同：1
> 
> 时间：2013-02-26T19:08:43.830
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一组需要加入的表：

```
tables = ["users","cars"] 
```

但是，我正在尝试加入这些：

```
joins(:users,:cars) 
```

代码不起作用。在我的模型中，我有一个定义，我在其中传递表格：

```
def conditions(tables)
    joins(tables.map { |t| t.to_sym }.join(","))
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T19:13:45.943

对于 splat 运算符，此方法将是一个很好的候选者。

`.joins`接受未定义数量的参数，因此您需要一种将数组解构为参数的方法。`.join(",")`会将它变成一个字符串，这不是它所期望的。但是，这：`joins(*tables.map(&:to_sym))`应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:13:53.613

您编写的方法是传递一个 string `"users, cars"`，这将引发错误。使用 splat( `*`) 运算符：

```
def conditions(tables)
  joins *tables.map(&:to_sym)
end 
```

[http://endofline.wordpress.com/2011/01/21/the-strange-ruby-splat/](http://endofline.wordpress.com/2011/01/21/the-strange-ruby-splat/)

# azure - 将 URL 参数从 Azure ACS 传递到我的自定义身份提供程序？

> ID：15097275
> 
> 赞同：0
> 
> 时间：2013-02-26T19:08:51.947
> 
> 标签：azure, wif, identity, acs

我们正在开发一个自定义身份提供者 (STS) 来验证我们的应用程序。在这个项目中，我们使用 Azure 访问控制服务 2.0，我们的身份提供者是一个 wsfederation。

因此，在启动项目时，azure ACS 有一个名为 wctx 的 url 参数，该参数用于传递任何内容，并且 ACS 在 de ACS 重定向到身份提供者时保留该参数，但是现在该参数的值在登录页面时被加密是开放的，所以我们无法阅读。

我想传递一种文化以及谁在调用登录页面。

有人有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:57:17.833

`wctx`您的身份提供者不应使用该参数。此参数的目的是让您的 RP 存储它需要的任何数据，当 ACS 发送 WS-Federation 登录响应时，这些数据将与令牌一起返回给它。如果您想向您的身份提供者发送消息，最简单的方法是托管您自己的 HRD 页面，[如此 MSDN 页面](http://msdn.microsoft.com/en-us/library/gg185963.aspx)的“选项 2：托管自定义登录页面”部分。下载您命名空间中的链接示例作为起点，然后修改以下代码：

```
 // Sets a cookie to remember the chosen identity provider and navigates to it.
    function IdentityProviderButtonClicked() {
        SetCookie(this.getAttribute("name"));

        // Add any extra query parameters you want before redirecting.
        window.location = this.getAttribute("id") + "&extraParameter=value";
        return false;
    } 
```

您想要传递的任何额外参数都可以通过这种方式添加，并将其提供给您的身份提供者。

# java - 同步发送视频到 AppSink

> ID：15097282
> 
> 赞同：0
> 
> 时间：2013-02-26T19:09:24.737
> 
> 标签：java, gstreamer, java-gstreamer

我正在使用 gstreamer-java 通过自定义 AppSink 通过 UDP 发送数据。以下是它的有效设置方式：

`fileSrc ! streamTee ! displayQueue ! tsdemux ! demuxQueue ! (mpeg2dec || h264dec) ! videosink`

和

`streamTee ! sendQueue ! udpSink`

我想以模拟实时流的方式发送数据。我假设这样做的唯一方法是通过 videoSink 将发送与播放同步。即以 1.0x 播放速度发送。

但是，设置 udpSink 的`sync`属性似乎并没有改变任何东西。我已经验证了由于 sendQueue 的原因，数据包会尽可能快地发送出去。

我需要在其他元素之间添加 streamTee 吗？我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:42:42.343

将 streamTee 移到 displayQueue 之后似乎已经解决了这个问题。同步属性似乎没有做任何事情。

UDP 数据包似乎比 videoSink 显示的视频提前一点点发送出去，但在任何长度的任何视频结束时总是提前 0.5-1.0 秒。所以看起来它已经足够同步了。

# java - “未处理的事件循环异常”java.lang.NullPointerException

> ID：15097284
> 
> 赞同：1
> 
> 时间：2013-02-26T19:09:38.077
> 
> 标签：java, eclipse, plugins

我在 Eclipse 上创建了一个“带视图的插件”，后来我使用在互联网上找到的教程对其进行了修改。我可以打开它并将其添加到 Java 透视图中，但是当我尝试将它移动到我透视图中的另一个位置时，视图关闭并且我得到一个“未处理的事件循环异常”。

这是堆栈跟踪：

```
java.lang.NullPointerException
    at org.eclipse.ui.internal.FastViewPane.hideView(FastViewPane.java:582)
    at org.eclipse.ui.internal.Perspective.hideFastView(Perspective.java:571)
    at org.eclipse.ui.internal.Perspective.setActiveFastView(Perspective.java:1933)
    at org.eclipse.ui.internal.Perspective.setActiveFastView(Perspective.java:1952)
    at org.eclipse.ui.internal.Perspective.toggleFastView(Perspective.java:2365)
    at org.eclipse.ui.internal.WorkbenchPage.toggleFastView(WorkbenchPage.java:3972)
    at org.eclipse.ui.internal.WorkbenchPage.hideFastView(WorkbenchPage.java:3960)
    at org.eclipse.ui.internal.FastViewPane$2.dragStart(FastViewPane.java:156)
    at org.eclipse.ui.internal.FastViewPane$2.dragStart(FastViewPane.java:136)
    at org.eclipse.ui.internal.presentations.util.TabbedStackPresentation$1.handleEvent(TabbedStackPresentation.java:118)
    at org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:269)
    at org.eclipse.ui.internal.presentations.util.AbstractTabFolder.fireEvent(AbstractTabFolder.java:282)
    at org.eclipse.ui.internal.presentations.util.AbstractTabFolder.handleDragStarted(AbstractTabFolder.java:366)
    at org.eclipse.ui.internal.presentations.util.AbstractTabFolder$2.handleEvent(AbstractTabFolder.java:67)
    at org.eclipse.ui.presentations.PresentationUtil.handleMouseMove(PresentationUtil.java:110)
    at org.eclipse.ui.presentations.PresentationUtil.access$4(PresentationUtil.java:95)
    at org.eclipse.ui.presentations.PresentationUtil$2.handleEvent(PresentationUtil.java:63)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

几个小时前，我没有这个错误了，现在又出现了。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-29T06:17:07.497

确保正确实现了 View 的 setFocus() 方法，即，您必须调用 setFocus() 以获得作为 View 一部分的 SWT 控件。这是一个典型的例子，假设“text”是一个声明为字段的 SWT Text 小部件：

```
 @Override
    public void setFocus() {
        text.setFocus();
    } 
```

另见：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=110354#c15](https://bugs.eclipse.org/bugs/show_bug.cgi?id=110354#c15)

# ruby-on-rails - Rails 中的主从视图，带有一个 SQL 查询

> ID：15097288
> 
> 赞同：0
> 
> 时间：2013-02-26T19:10:02.567
> 
> 标签：ruby-on-rails, activerecord, partial-views, master-detail

目前我有以下结构的 JSON 视图（.json.erb）：

```
[
<% @master_entities.each do |master| %>
  {
   "attr1": <%= master.attr1 %>,
   "attr2": <%= master.attr2 %>,
   "attr3": <%= master.attr3 %>,
   "attr4": <%= master.attr4 %>,
   "details1": <%= render 'detail_view1', {master: master} %>,
   "details2": <%= render 'detail_view2', {master: master} %>
  },
<% end %>
] 
```

详细视图具有以下结构：

```
[
<% Detail_entity1.find_all_by_master_id(master.id).each do |detail1| %>
  {
   "attr1": <%= detail1.attr1 %>,
   "attr2": <%= detail1.attr2 %>,
   "attr3": <%= detail1.attr3 %>
  },
<% end %>
] 
```

这会导致对每个主实体的额外查询。

我不喜欢我在视图中查询详细信息模型的事实。

我可以对 master 和 details 执行一个可靠的查询，但起初我担心它会消耗大量内存，其次 - 如何使用 Ruby on Rails 为 master 分组条目意味着？以及如何通过 master.id 从整个数组中提取详细信息？

或者可能有另一种有效地完成任务的方法？

# windows - Perl：如何“启动 perl.exe “不同于”perl.exe "

> ID：15097289
> 
> 赞同：3
> 
> 时间：2013-02-26T19:10:04.597
> 
> 标签：windows, perl, cmd

我对 perl 很陌生，我已经问过一个朋友，他说了一些关于“客厅执行”的事情。这是什么意思？

编辑：

这是在命令提示符下

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T19:20:11.450

`start`导致 Windows 创建一个新的命令提示符窗口来运行命令，从而释放原始提示符。例如，打开命令提示符并`ping -t 8.8.8.8`与`start ping -t 8.8.8.8`.

# .htaccess - 删除 URL 中的 .php 扩展名但使用子目录

> ID：15097294
> 
> 赞同：0
> 
> 时间：2013-02-26T19:10:16.983
> 
> 标签：.htaccess, subdirectory, redirect

我想将 URL 重定向到子目录中的 php 文件，但无法做到。我尝试了一切，但无法让它工作。我应该写`.htaccess`什么？

实际上我想这样做： URL`http://example.org/sub1/sub2/page`应该访问文件`http://example.org/sub1/sub2/page.php`，并且我想让它成为通用的，因为我有多个这样的 URL 来重定向到 PHP 文件。

基本上我想`.php`从我的 URL 中删除扩展名。

# python - Python 名称可见性

> ID：15097303
> 
> 赞同：1
> 
> 时间：2013-02-26T19:10:59.890
> 
> 标签：python, wxpython

我正在阅读一些 wxPython 代码来学习一些 Python。请记住，我真的是一个初学者，所以我的问题对你来说很明显，但对我来说，这很神秘，它可能会教会我很多东西来完全理解这个问题。

这里的代码：

```
class MainFrame(wx.Frame):

    TITLE = "Frame"
    POSITION = wx.DefaultPosition
    SIZE = wx.DefaultSize
    STYLE = wx.DEFAULT_FRAME_STYLE
    LAYOUT_MANAGER = wx.GridBagSizer()

    def __init__(
            self,
            parent = None,
            id = wx.ID_ANY,
            title = TITLE,
            pos = POSITION,
            size = SIZE,
            style = STYLE,
            name = wx.FrameNameStr
            ):
        super(MainFrame, self).__init__(parent, id, title, pos, size, style,
                                        name)
        self.SetSizerAndFit(self.LAYOUT_MANAGER)
        self.panel = MainPanel(parent=self) 
```

`NameError: global name 'LAYOUT_MANAGER' is not defined`我的问题很简单：如果我按如下方式引用 LAYOUT_MANAGER为什么会得到：

```
self.SetSizerAndFit(LAYOUT_MANAGER) 
```

删除`self`引用，即。

为什么我很困惑？仅仅因为在此方法中，对 , 等字段的引用`POSITION`没有`SIZE`任何前缀`self`，但如果我使用字段 LAYOUT_MANAGER 作为方法的参数，则需要引用`SetSizerAndFit`...

是什么赋予了？！

我可能忘记了这里语言最自然的范围/可见性规则..但鉴于我知道的很少，能够写`size = SIZE`（没有`self.`）但不能写只是没有意义`LAYOUT_MANAGER`，并且要求`self.LAYOUT_MANAGER`？ ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:22:15.263

你说：

> 仅仅因为在此方法中，对诸如 POSITION、SIZE 等字段的引用没有任何前缀 self，但如果我使用字段 LAYOUT_MANAGER 作为方法 SetSizerAndFit 的参数，则需要引用...

Technically, no. The references to POSITION, SIZE, etc. are not made *inside* the method, they are made in the `def` line. The `def` line itself has access to the enclosing scope, so it can see the variables `POSITION` and `SIZE` because they exist in that enclosing scope (which is the class body). However, the actual body of the method does not have access to this scope, so you need to use self.

This difference in scope parallels the difference in when the two are executed. The `def` statement defines the function, and is executed right when it happens in the source file. The body of the `def` is not executed until you actually call the function.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:23:38.867

默认参数在声明时在其封闭范围内进行评估，而方法本身在不同的范围内进行评估。

# c# - 动作方法的细粒度访问控制

> ID：15097306
> 
> 赞同：2
> 
> 时间：2013-02-26T19:11:12.840
> 
> 标签：c#, asp.net-mvc

假设我们有一个像这样的动作方法：

```
public ActionResult SomeMethod(int a, int b) 
```

为了实现一些细粒度的授权，可以实现一个从 ActionFilterAttribute 继承并使用以下参数访问上述参数的操作：

```
filterContext.RouteData.Values 
```

在 OnActionExecuting 期间。这是好习惯吗？这种细粒度的授权有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:30:48.267

> 这是好习惯吗？

当然，这是一个安全风险。依赖客户端可能发送的参数是危险的。请记住，客户端可以向您发送他想要的任何值作为参数。无论您在服务器上实施过滤器、操作、活页夹还是其他任何东西，您的安全都会受到损害。永远不要依赖客户端发送的参数来实现任何安全性。

但是如果你想实现一些安全检查，这些检查绝对应该在 custom 中完成`IAuthorizationFilter`，而不是在 action 过滤器中。授权过滤器在执行管道中比操作过滤器运行得更早。

例如：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            // no authenticated user => no need to go any further
            return false;
        }

        var routeData = httpContext.Request.RequestContext.RouteData;
        // get the username of the currently authentciated user
        string username = httpContext.User.Identity.Name;

        // Get the a parameter
        string a = routeData.Values["a"] as string;

        // Get the b parameter
        string b = routeData.Values["b"] as string;

        return IsAuthorized(username, a, b);
    }

    private bool IsAuthorized(string username, string a, string b)
    {
        // TODO: you know what to do here => hit the database to check
        // whether the user is authorized to work with a and b
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:28:23.800

特别是，如果这是一个安全检查，建议实现一个`IAuthorizationFilter`，而不是等待 OnActionExecuting，后者在请求的后面。

# python - 在 python 2.7 [windows - 64 位] 上安装 xlwt 模块

> ID：15097309
> 
> 赞同：2
> 
> 时间：2013-02-26T19:11:17.423
> 
> 标签：python, module, installation

我已经安装了 win 7 64 位和 python 2.6、2.7、3.3。当我下载并解压 xlwt 0.7.4 ( [https://pypi.python.org/pypi/xlwt](https://pypi.python.org/pypi/xlwt) ) 时，自述文件要求：将 *.zip 文件放入合适的目录，chdir 到该目录，然后执行“python setup.py安装”。*

chdir 有必要吗？你怎么做到这一点？当我运行 setup.py 时，出现黑色命令提示符，并且没有任何反应。无论如何，我仍然得到 ImportError: No module named 'xlwt' 在尝试导入时。

任何人都可以编写一个快速入门的分步指南来安装这个有用的模块（Windows 7 - 8 位）吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-03T04:26:49.037

首先下载并解压 xlwt 文件夹到 python/any 目录

如果您将 chdir 设置为 Xlwt 文件夹，那么 python 将只查看该文件夹，因此要从 python 主目录查看 xlwt 目录，只需在开始时将这两行添加到您的程序中。

1.  `import sys`
2.  `sys.path.insert(0,new_path) where new_path is the path of xlwt folder`

现在您可以使用 import xlwt ，它可以正常工作。

```
import sys

sys.path.insert(0,'C:/Python27/xlwt-0.7.5') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:21:32.187

1.  下载 xlwt 文件夹并将其提取到任何目录中
2.  打开 Python/PyScripter
3.  添加以下 3 行： import os os.chdir("your/xlwt/directory") ex。os.chdir("C:/Python27/xlwt-0.7.4") ，确保你使用的是 /，而不是 \ import xlwt 现在应该可以工作了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-09T03:22:49.300

这是一个老问题......但让我放弃这个以防万一有人在未来需要帮助。首先：您必须按住windows键+ r在cmd中键入按住shift键加回车单击yes以管理员身份运行然后粘贴以下代码行。py -m pip install --user xlwt 完成。在 ig 上关注我以获得更多帮助。@brainyjosh

# javascript - 使用 javascript 更改 onClick 属性

> ID：15097315
> 
> 赞同：50
> 
> 时间：2013-02-26T19:11:36.223
> 
> 标签：javascript, html, function

这是我的函数，它应该改变 HTML 输入的 onClick 属性，但如果我使用

```
document.getElementById('buttonLED'+id).onclick = "writeLED(1,1)"; 
```

它根本不起作用，但如果我使用

```
document.getElementById('buttonLED'+id).onclick = writeLED(1,1); 
```

该函数自行执行！任何想法在单击按钮之前，我必须使用什么代码来更改 onCLick 属性而不执行该函数？
如果重要的话，这是完整的功能：

```
function showLED(id){
    if(color == 0){
        document.getElementById('buttonLED'+id).onclick = "writeLED(1,1)";
        document.getElementById('buttonLED'+id).value="light is on";
        //document.getElementById('buttonLED'+id).disabled = false;
    }else{
        document.getElementById('buttonLED'+id).onclick = "writeLED(1,0)";
        document.getElementById('buttonLED'+id).value="light is off";
        //document.getElementById('buttonLED'+id).disabled = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2014-05-01T17:17:12.283

好吧，只要这样做，你的问题就解决了：

```
document.getElementById('buttonLED'+id).setAttribute('onclick','writeLED(1,1)') 
```

祝你有美好的一天XD

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-02-26T19:12:56.297

您想要这样做 - 设置一个将被执行以响应 onclick 事件的函数：

```
document.getElementById('buttonLED'+id).onclick = function(){ writeLED(1,1); } ; 
```

你正在做的事情不起作用，因为：

1.  onclick 事件处理程序期望有一个函数，在这里您要分配一个字符串

    ```
    document.getElementById('buttonLED'+id).onclick = "writeLED(1,1)"; 
    ```

2.  在此，您将执行 writeLED(1,1) 函数的结果分配为 ​​onclick 事件处理程序：

    ```
    document.getElementById('buttonLED'+id).onclick = writeLED(1,1); 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-02T18:21:14.303

该行 `onclick = writeLED(1,1)`表示您要*立即*执行带有参数 1, 1 的函数 writeLED(arg1, arg2) 并分配返回值；您需要创建一个将使用这些参数执行并分配它的函数。最上面的答案给出了一个例子 - 另一个是使用 bind() 函数，如下所示：

```
 var writeLEDWithSpecifiedArguments = writeLED.bind(this, 1,1);
    document.getElementById('buttonLED'+id).onclick = writeLEDWithSpecifiedArguments; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-15T08:00:18.953

使用 Jquery 而不是 Javascript，使用`'attr'`属性而不是`'setAttribute'`

像

```
$('buttonLED'+id).attr('onclick','writeLED(1,1)') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T19:15:16.533

您实际上并没有更改功能。

`onClick`被分配给一个函数（这是对某物的引用，在这种情况下是一个函数指针）。传递给它的值无关紧要，**不能**以任何方式使用。

另一个问题是您的变量`color`似乎无处不在。

理想情况下，你应该把这个逻辑放在函数内部，让它弄清楚要写什么。（开/关等）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-05T11:08:17.457

另一种解决方案是将“onclick”属性设置为返回 writeLED 函数的函数。

```
document.getElementById('buttonLED'+id).onclick = function(){ return writeLED(1,1)}; 
```

当您在 JavaScript 中创建尚未在浏览器中绘制的元素时，这对于其他情况也很有用。

# ruby-on-rails - Rails - 使用设计的辅助身份验证？

> ID：15097317
> 
> 赞同：0
> 
> 时间：2013-02-26T19:11:46.127
> 
> 标签：ruby-on-rails, security, authentication, devise

我需要为特殊的访问区域做一个二级身份验证层。因此，在登录后，用户可能会再次登录。我已经在使用 Devise 进行普通身份验证，所以我不能再使用密码字段，也不能使用 has_secure_password Rails bultin 功能。

除了100％手动方式之外还有其他选择吗？

我进行了一项研究并找到了 BCrypt 的替代方案。但我看到它需要一个密码盐场。有没有不需要盐场的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:24:38.080

为什么不向您的用户模型添加角色-此处的选项 2 [https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-Role](https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-Role)

如果您真的需要 2 次登录，您可以拥有 2 个完全不同的设计模型 - 请参阅自述文件中的配置多个模型[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

# iphone - AVCaptureSession 暂停和恢复录制

> ID：15097320
> 
> 赞同：5
> 
> 时间：2013-02-26T19:11:51.550
> 
> 标签：iphone, ios, objective-c, avfoundation

我正在使用 AVCaptureSession 为 iOS 5.0 制作电影应用程序。我让用户能够开始-暂停-开始-停止录制电影

我定义的三个按钮是

*   开始录制

*   停止录制

*   暂停录音

我能够成功开始和停止录制。我无法做的是暂停录音，然后再次恢复。我看了这个关于堆栈溢出的问题/答案，但我不知道他们是如何暂停和恢复视频的？我确实在这里找到了其他一些帖子，但没有一个有任何示例代码可供我试用。如果 AVAssetWrtier 是要走的路，你如何将它与 AVCaptureSession 一起使用？

[ios - 暂停视频录制](https://stackoverflow.com/questions/14748031/ios-pause-video-recording)

[在 iOS 中使用 AVFoundation 暂停和恢复相同文件的视频捕获](https://stackoverflow.com/questions/14905892/pause-resume-video-capture-for-same-file-with-avfoundation-in-ios)

这是我的三个按钮的代码

```
 -(IBAction) makeMovieNow
        {
            NSLog(@"makeMovieNow ...");

[session startRunning];
            [movieFileOutput startRecordingToOutputFileURL:movieURL recordingDelegate:self];

        }

    -(IBAction) makeMovieStop
    {
        NSLog(@"makeMovieStop ...");

        //stop recording
        [session stopRunning];
    }

    -(IBAction) makeMoviePause
    {
        NSLog(@"makeMoviePause ...");

        //pause video??? How?

    }

//********** DID FINISH RECORDING TO OUTPUT FILE AT URL **********
- (void)captureOutput:(AVCaptureFileOutput *)captureOutput
didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL
      fromConnections:(NSArray *)connections
                error:(NSError *)error
{

    NSLog(@"didFinishRecordingToOutputFileAtURL - enter");

    BOOL RecordedSuccessfully = YES;
    if ([error code] != noErr)
    {
        NSLog(@"ERROR RECODING MOVIE!!! - enter");

        // A problem occurred: Find out if the recording was successful.
        id value = [[error userInfo] objectForKey:AVErrorRecordingSuccessfullyFinishedKey];
        if (value)
        {
            RecordedSuccessfully = [value boolValue];
        }
    }
    if (RecordedSuccessfully)
    {
        //----- RECORDED SUCESSFULLY -----
        NSLog(@"didFinishRecordingToOutputFileAtURL - success");

        UISaveVideoAtPathToSavedPhotosAlbum(videoPath2, self, nil, nil);    

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T17:55:47.317

[在http://www.gdcl.co.uk/2013/02/20/iPhone-Pause.html](http://www.gdcl.co.uk/2013/02/20/iPhone-Pause.html)有一个示例 iPhone正是这样做的。它使用数据输出而不是电影文件输出，以便将数据传递给应用程序。如果启用了录制，则应用程序会将样本传递给 AVAssetWriter，并且在暂停/恢复之后，会调整时间戳以消除暂停。

G

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:06:58.847

我最终创建了两个文件并将它们合并在一起。这是示例代码和教程

[http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)

# cuda - 使用 new 和双指针在全局内核中创建一个类对象

> ID：15097322
> 
> 赞同：0
> 
> 时间：2013-02-26T19:11:59.727
> 
> 标签：cuda

我有以下全局内核：

```
__global__ void pdegpu(PDE_ParabolicD1_Num_GPU **pdes)
{    
    PDE_ParabolicD1_Num_GPU *loc;
    loc = new PDE_ParabolicD1_Num_GPU();
    loc->Setup();
    delete loc;
    //above code was just an example to show that new and delete work fine

    *pdes = new PDE_ParabolicD1_Num_GPU();   //error occurs here
    (*pdes)->Setup();
} 
```

我调用它来创建 PDE_ParabolicD1_Num_GPU 类型的对象并设置它。在 main() 中，我将使用同一个对象，这就是我在函数参数中使用双指针的原因。在 main() 中，我执行以下操作：

```
PDE_ParabolicD1_Num_GPU pdes_host;
PDE_ParabolicD1_Num_GPU *pdes_dev=0;
pdegpu<<<1,1>>>(&pdes_dev);
cudaStatus = cudaMemcpy(&pdes_host, pdes_dev, sizeof(PDE_ParabolicD1_Num_GPU), cudaMemcpyDeviceToHost);
...
delete [] pdes_dev; 
```

但是，我收到代码中显示的错误，该错误的 CUDA Memory Checker 输出如下：

```
Memory Checker detected 1 access violations.
error = access violation on store (global memory)
gridid = 16
blockIdx = {0,0,0}
threadIdx = {0,0,0}
address = 0x0018f420
accessSize = 4
error MemoryChecker: #misaligned=0  #invalidAddress=1 
```

据我了解，该错误是由于无效地址引起的。
谁能帮我解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:18:11.220

`pdes_dev`是主机指针。设备代码无法访问主机指针。如果要创建在设备上可修改的指针，请执行以下操作：

```
PDE_ParabolicD1_Num_GPU **pdes_dev=0;
cudaMalloc((void ***) &(pdes_dev), sizeof(PDE_ParabolicD1_Num_GPU *));
pdegpu<<<1,1>>>(pdes_dev); 
```

因为，使用内核分配`new`会创建一个指向[设备堆](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#dynamic-global-memory-allocation-and-operations)的指针，所以这样的指针不能用于`cudaMemcpy`将存储在那里的数据返回到主机的操作中。然后，您必须进行设备到设备的复制，以将内核修改的数据移动到适合传输回主机的缓冲区中。因此，更好的方法可能是从主机为对象分配设备存储空间：

```
PDE_ParabolicD1_Num_GPU *pdes_dev=0;
cudaMalloc((void **) &(pdes_dev), sizeof(PDE_ParabolicD1_Num_GPU));
pdegpu<<<1,1>>>(pdes_dev); 
```

并且您的内核代码必须相应地更改：

```
__global__ void pdegpu(PDE_ParabolicD1_Num_GPU *pdes)
{    

    pdes->Setup();
} 
```

请注意，我尚未编译和测试此代码，因此可能会出现错误，但这概述了我认为可行的方法。你可能也对我对[这个问题的回答感兴趣](https://stackoverflow.com/questions/13630817/cuda-version-not-working-while-serial-working/13652988#13652988)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:12:08.323

您应该首先通过 cudaMalloc 分配内存。目前您的设备代码正在尝试写入主机内存。

# xcode - 在 OSX 上构建时的 Oracle Instant Client 链接错误

> ID：15097326
> 
> 赞同：0
> 
> 时间：2013-02-26T19:12:16.017
> 
> 标签：xcode, macos, oracle, gcc

我正在尝试在 OS X 上编译一个简单的 Oracle 应用程序并遇到链接问题。任何帮助，将不胜感激。

```
#include <iostream>
#include <occi.h>

using namespace std;
using namespace oracle::occi;

Environment * env;
Connection * conn;

int main(int argc, char ** argv)
{
    env = Environment::createEnvironment(Environment::OBJECT);
    conn = env->createConnection("scott", "tiger", "//lcoalhost:1521/xe");
    Statement *stmt = conn->createStatement("SELECT COUNT(*) FROM TAB");
    ResultSet *rs=stmt->executeQuery();
    rs->next();
    string ntabs=rs->getString(1);
    cout << "Number of tables " << ntabs << endl;
    conn->terminateStatement(stmt);
    // Close connection etc
    env->terminateConnection(conn);
    Environment::terminateEnvironment(env);
    return 0;
} 
```

我安装了 x64 oracle 即时客户端`~/oracle_client`。`sqlplus`我可以使用和连接到数据库`python (cx_Oracle)`。

我正在使用以下命令编译文件

```
gcc main.cpp -I ~/oracle_client/sdk/include/ -L ~/oracle_client -locci -lclntsh 
```

以下是`ld`我收到的错误：

```
ld: warning: ignoring file <ORACLE_HOME >/libclntsh.dylib, file was built for unsupported file format ( 0x62 0x6f 0x6f 0x6b 0x 0 0x 0 0x 0 0x 0 0x6d 0x61 0x72 0x6b 0x 0 0x 0 0x 0 0x 0 ) which is not the architecture being linked (x86_64): <ORACLE_HOME>/libclntsh.dylib
Undefined symbols for architecture x86_64:
"std::allocator::allocator()", referenced from:
_main in ccWf4dno.o
"std::allocator::~allocator()", referenced from:
_main in ccWf4dno.o
"std::basic_ostream >::operator >& (*)(std::basic_ostream >&))", referenced from:
_main in ccWf4dno.o
"std::basic_string, std::allocator >::basic_string(char const*, std::allocator const&)", referenced from:
_main in ccWf4dno.o
"std::basic_string, std::allocator >::~basic_string()", referenced from:
_main in ccWf4dno.o
"std::ios_base::Init::Init()", referenced from:
__static_initialization_and_destruction_0(int, int)in ccWf4dno.o
"std::ios_base::Init::~Init()", referenced from:
___tcf_0 in ccWf4dno.o
"std::cout", referenced from:
_main in ccWf4dno.o
"std::basic_ostream >& std::endl >(std::basic_ostream >&)", referenced from:
_main in ccWf4dno.o
"std::terminate()", referenced from:
_main in ccWf4dno.o
"std::basic_ostream >& std::operator >(std::basic_ostream >&, char const*)", referenced from:
_main in ccWf4dno.o
"std::basic_ostream >& std::operator, std::allocator >(std::basic_ostream >&, std::basic_string, std::allocator > const&)", referenced from:
_main in ccWf4dno.o
"___gxx_personality_v0", referenced from:
Dwarf Exception Unwind Info (__eh_frame) in ccWf4dno.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:41:09.370

```
Undefined symbols for architecture x86_64:
"std::allocator::allocator()", referenced from:
_main in ccWf4dno.o
[...] 
```

所有这些未定义的符号都是 C++ 运行时支持库函数，与 Oracle 无关。让 GCC 引入这些的最简单和最好的方法是将 C++ 代码与`g++`命令链接，而不是`gcc`：

```
g++ main.cpp -I ~/oracle_client/sdk/include/ -L ~/oracle_client -locci -lclntsh 
```

*链接器关于libclntsh.dylib*的架构警告只是警告，因此您安装的即时客户端可能包含正确的架构以及它所抱怨的内容。无论如何，在摆脱了这些虚假的 C++ 运行时链接问题之后，您将能够更好地调试任何剩余的 Oracle 链接问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:52:45.037

乍一看，您要么安装了 32 位即时客户端，在这种情况下，您只能构建 32 位二进制文​​件，因此需要在 ; 中添加一个`-m32`标志`gcc`。或者您安装了 64 位即时客户端并且`gcc`由于某种原因（例如别名）默认为 32 位，在这种情况下您可以使用`-m64`标志覆盖。

无论哪种方式，您的即时客户端*似乎*是错误的架构......实际上从`x86_64`您的错误消息中，您正在以 64 位模式构建，因此您似乎已经安装了 32 位即时客户端。但是您在问题中说您确实安装了 64 位版本，您可以通过以下方式验证（您可能知道）：

```
$ file ~/oracle_client/libclntsh.dylib.11.1 
```

...`x86_64`如果它是 64 位，它将以结束。由于它没有抱怨`libocci.dylib`它似乎能够应付，建议一种混合安装。大概您已经为完整版本创建了符号链接`libclntsh.dylib`并`libocci.dylib`指向完整`.11.1`版本。是否有可能`libclntsh.dylib`指向另一个目录中的 32 位版本？或者您将它作为 32 位复制到该名称，然后将所有内容替换为 64 位版本并错过了手动复制的文件？这显示了什么架构：

```
$ file ~/oracle_client/libclntsh.dylib 
```

它仍然无法编译，但据我所知，其余错误与 Oracle 无关……正如 John Marshall 指出的那样，只需将命令从 切换到`gcc`即可`g++`解决剩余问题。

```
g++ -m32 main.cpp ... 
```

`a.out`...如果 32 位即时客户端已正确安装/链接，则创建一个。

只是为了比较，使用带有 64 位构建的 32 位客户端会失败：

```
$ g++ -m64 main.cpp -I ~/oracle_client32/sdk/include/ -L ~/oracle_client32 -locci -lclntsh
ld: warning: ignoring file /Users/alex/oracle_client32/libocci.dylib, file was built for unsupported file format ( 0xce 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 0 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (x86_64): /Users/alex/oracle_client32/libocci.dylib
ld: warning: ignoring file /Users/alex/oracle_client32/libclntsh.dylib, file was built for unsupported file format ( 0xce 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 0 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (x86_64): /Users/alex/oracle_client32/libclntsh.dylib
Undefined symbols for architecture x86_64:
  "oracle::occi::Environment::createEnvironment(oracle::occi::Environment::Mode, void*, void* (*)(void*, unsigned long), void* (*)(void*, void*, unsigned long), void (*)(void*, void*))", referenced from:
      _main in ccWD5dXB.o
  "oracle::occi::Environment::terminateEnvironment(oracle::occi::Environment*)", referenced from:
      _main in ccWD5dXB.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

使用具有 32 位构建的 64 位客户端失败：

```
$ g++ -m32 main.cpp -I ~/oracle_client64/sdk/include/ -L ~/oracle_client64 -locci -lclntsh
ld: warning: ignoring file /Users/alex/oracle_client64/libocci.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): /Users/alex/oracle_client64/libocci.dylib
ld: warning: ignoring file /Users/alex/oracle_client64/libclntsh.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): /Users/alex/oracle_client64/libclntsh.dylib
Undefined symbols for architecture i386:
  "oracle::occi::Environment::createEnvironment(oracle::occi::Environment::Mode, void*, void* (*)(void*, unsigned long), void* (*)(void*, void*, unsigned long), void (*)(void*, void*))", referenced from:
      _main in ccuBypLo.o
  "oracle::occi::Environment::terminateEnvironment(oracle::occi::Environment*)", referenced from:
      _main in ccuBypLo.o
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status 
```

但请注意，两者都抱怨这两个库，而不仅仅是`libclntsh`. 使用 32 位客户端和 32 位构建，或 64 位客户端和 64 位构建，两者都可以工作：

```
$ g++ -m32 main.cpp -I ~/oracle_client32/sdk/include/ -L ~/oracle_client32 -locci -lclntsh
$ file a.out
a.out: Mach-O executable i386

$ g++ -m64 main.cpp -I ~/oracle_client64/sdk/include/ -L ~/oracle_client64 -locci -lclntsh
$ file a.out
a.out: Mach-O 64-bit executable x86_64 
```

# mysql - 从 ZF2 中的 mysql 查询中获取结果

> ID：15097328
> 
> 赞同：1
> 
> 时间：2013-02-26T19:12:23.737
> 
> 标签：mysql, frameworks, zend-framework2

这是我的模型：

```
<?php

namespace Object\Model;

use Zend\Db\TableGateway\TableGateway;
use Zend\Db\Sql\Sql;

class SiteVisitsTable {

protected $tableGateway;
protected $sql;

public function __construct(TableGateway $tableGateway) {
    $this->tableGateway = $tableGateway;
    $this->sql = new Sql($this->tableGateway->adapter);
}

public function getVisits($field = '', $value = '') {
    if ($field = '' || $value = ''):
        $rowset = $this->tableGateway->select(array($field => $value));
    else:
        $rowset = $this->tableGateway->select();
    endif;

    $row = $rowset->current();
    return $row;
}

public function getAllVisits() {
    $adapter = $this->tableGateway->adapter;

    $select = $this->sql->select();
    $select->from($this->tableGateway->getTable());
    $select->columns(array(
        new \Zend\Db\Sql\Expression('SUM(`unique`) as `unique`'),
        new \Zend\Db\Sql\Expression('SUM(`impressions`) as `impressions`'),
    ));

    $selectString = $this->sql->getSqlStringForSqlObject($select);
    $resultSet = $adapter->query($selectString, $adapter::QUERY_MODE_EXECUTE);

    return $resultSet;
}

public function addVisit($date) {
    $currentVisits = $this->getVisits('date', $date);
    if ($currentVisits) {
        $data = array(
            'unique' => $currentVisits + 1,
        );

        $this->tableGateway->update($data, array('date' => $date));
    } else {
        $data = array(
            'unique' => 1,
            'impressions' => 1,
        );

        $this->tableGateway->insert($data);
    }
}
} 
```

在 getAllVisits 公共方法中，我有一个 SELECT CUM MySQL 查询。查询本身一切正常，但我无法打印查询中的值。这是 $resultSet 的转储：

```
Zend\Db\ResultSet\ResultSet Object
(
[allowedReturnTypes:protected] => Array
    (
        [0] => arrayobject
        [1] => array
    )

[arrayObjectPrototype:protected] => ArrayObject Object
    (
        [storage:ArrayObject:private] => Array
            (
            )

    )

[returnType:protected] => arrayobject
[buffer:protected] => 
[count:protected] => 1
[dataSource:protected] => Zend\Db\Adapter\Driver\Pdo\Result Object
    (
        [statementMode:protected] => forward
        [resource:protected] => PDOStatement Object
            (
                [queryString] => SELECT SUM(`unique`) as `unique`, SUM(`impressions`) as `impressions` FROM `site_visits`
            )

        [options:protected] => 
        [currentComplete:protected] => 
        [currentData:protected] => 
        [position:protected] => -1
        [generatedValue:protected] => 0
        [rowCount:protected] => 1
    )

[fieldCount:protected] => 2
[position:protected] => 
) 
```

您可能会看到 queryString 键，当我在 phpmyadmin 中执行“原始”查询时，它会显示 MySQL 数据库中的值，但是当尝试在 ZF2 中显示它们时，它似乎不起作用。

这是我的控制器：

```
 return new ViewModel(array(
                'todayVisits' => $this->getSiteVisitsTable()->getVisits('date', date('Y-m-d')),
                'allVisits' => $this->getSiteVisitsTable()->getAllVisits(),
                'yesterdayVisits' => $this->getSiteVisitsTable()->getVisits('date', ''),
                'inactiveBlogs' => $this->getBlogsTable()->getInactiveBlogs(),
                'inactiveUsers' => $this->getUsersTable()->getUsers('is_active', '0'),
                'notes' => $this->getAdminNotesTable()->getAllNotes(),
                'form' => $form,
            )); 
```

而我的观点：

```
<article class="stats_overview">
<div class="overview_today">
    <p class="overview_day">Днес</p>
    <p class="overview_count"><?php echo $todayVisits->unique; ?></p>
    <p class="overview_type">посещения</p>
    <p class="overview_count"><?php echo $todayVisits->impressions; ?></p>
    <p class="overview_type">импресии</p>
</div>
<div class="overview_previous">
    <p class="overview_day">Общо</p>
    <p class="overview_count"><?php echo $allVisits->unique; ?></p>
    <p class="overview_type">посещения</p>
    <p class="overview_count"><?php echo $allVisits->impressions; ?></p>
    <p class="overview_type">импресии</p>
</div>
</article> 
```

PS 我对 JOIN 查询有同样的问题！：） 提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T05:03:51.720

你可以看到我的模型：

```
<?php

namespace Home\Model;

use Zend\Db\TableGateway\AbstractTableGateway;
use Zend\Db\Adapter\Adapter;
use Zend\Db\ResultSet\ResultSet;
use Zend\Db\Sql\Select;

class VisitTable extends AbstractTableGateway {

    protected $table = 'counter';

    public function __construct(Adapter $adapter) {
        $this->adapter = $adapter;
        $this->resultSetPrototype = new ResultSet();
        $this->resultSetPrototype->setArrayObjectPrototype(new Visit());

        $this->initialize();
    }

    public function sumVisit(Select $select = null) {
        if (null === $select)
            $select = new Select();
        $select->from($this->table)->columns(array(new \Zend\Db\Sql\Expression('SUM(`luongtruycap`) as `luongtruycap`')));
        $resultSet = $this->selectWith($select);
        $row = $resultSet->current();
        return $row;
    }

} 
```

和控制器：

```
$visit = $this->getVisitTable()->sumVisit();
return new ViewModel(array(
                'allVisits' => $visit->luongtruycap,

            )); 
```

看法：

```
<p class="overview_count"><?php echo $this->allVisits; ?></p> 
```

此致，

恩戈通

# facebook - 如何自定义动态消息中打开图形对象的描述位置？

> ID：15097329
> 
> 赞同：3
> 
> 时间：2013-02-26T19:12:23.540
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

在新闻提要中，图像以 200x200 呈现，我希望描述显示在右侧而不是图像下方。

这是我所拥有的：

![在此处输入图像描述](../Images/5599b3c3030193da444ce93fcf410a57.png)

描述很长，并且被剪辑在那个小的单行空间中。这就是为什么我希望它位于图像的右侧。

这是我配置渲染的方式，但它似乎只配置了用户墙的外观，而不是其他墙的新闻源：

![在此处输入图像描述](../Images/979671f7d866dbf101dc489257893680.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:42:14.253

不幸的是，Facebook 目前不支持在大图像格式故事的右侧显示描述。

如果需要更突出地显示描述，您需要将图像尺寸减小到 200x200 以下，以强制 Facebook 使用标准故事格式。

# java - Delphi字节操作和Java

> ID：15097330
> 
> 赞同：0
> 
> 时间：2013-02-26T19:12:27.190
> 
> 标签：java, delphi, porting

我在 Delhpi 中有这个函数，可以计算传输消息的 CRC。此函数应返回 2 字节的 CRC，但对于某些消息，CRC 的长度为 3 字节。

这里有几个例子：

消息 0588080168F8 --> CalculateCRC(0588080168F8,5)=083D9B (3 bytes)

消息 0588080168F0 --> CalculateCRC(0588080168F0,5)=BC93 (2 bytes)

这是原始的delphi代码：

```
procedure CalculateCRC(var Message: TMessage);
var
  counter: byte;
  counter1: byte;
begin
  for counter := 1 to Message.MessageLength + 1 do
  begin
    if counter = 1 then
      Message.CRC := 0 xor (word(Message.MessageLength) shl 8)
    else
      Message.CRC := Message.CRC xor (word(Message.Data[counter-1]) shl 8);

    for counter1 := 1 to 8 do
    begin
      if (Message.CRC and $8000) = $8000 then
        Message.CRC := (Message.CRC shl 1) xor $1021
      else
        Message.CRC := Message.CRC shl 1;
    end;
  end;
end; 
```

这是我的 Java 函数：

```
 public static byte[] calculateCRC(byte[] msg, int len)
  {
    int crc=0;

    for(int i=1; i<=len+1;i++)
    {
      if(i==1)
        crc= 0 ^ (len<<8);
      else
        crc=crc ^ ((msg[i-1] & 0xff) << 8);

      for(int j=1; j<=8;j++)
      {
        if((crc & 0x8000) == 0x8000)
          crc= (crc <<1 ) ^ 0x1021;
        else
          crc= (crc <<1 ) ;
      }
    }

    return new byte[] {(byte)((crc >>16) & 0xff),(byte) ((crc>>8) & 0xff),(byte)(crc & 0xff)};
  } 
```

使用这种方法，我将 HEX 字符串转换为字节数组：

```
 private static byte[] hexToBytes(String s) 
  {
   int len = s.length();
   byte[] data = new byte[len / 2];
   for (int i = 0; i < len; i += 2) 
   {
    data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4) + Character.digit(s.charAt(i+1), 16));
   }
   return data;
  } 
```

我的代码适用于 2 字节 CRC，但未能在 3 字节消息上给出正确的 CRC……有什么帮助或想法吗？谢谢，佩德罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:31:21.137

在这部分 Delphi 代码中：

```
for counter := 1 to Message.MessageLength + 1 do
  begin
    if counter = 1 then
      Message.CRC := 0 xor (word(Message.MessageLength) shl 8)
    else
      Message.CRC := Message.CRC xor (word(Message.Data[counter-1]) shl 8); 
```

您从 1 数到 MessageLength+1。而且逻辑似乎暗示 Message.Data 中的第一个索引是 1。所以我猜这段代码是基于 Delphi 中的字符串索引从 1 开始的事实。但在 Java 中并非如此，它们从 0 开始。所以您可能应该以这种方式重写您的 Java 方法：

```
 for (int i = 0; i <= len; i++)
    {
        if (i == 0)
            crc = 0 ^ (len << 8);
        else
            crc = crc ^ ((msg[i - 1] & 0xff) << 8); 
```

# sql - 计算折扣

> ID：15097334
> 
> 赞同：1
> 
> 时间：2013-02-26T19:12:38.890
> 
> 标签：sql

我有一个像这样的客户折扣表： ![在此处输入图像描述](../Images/e66517325559bb981432c6c464b0151a.png)

我有一个名为 @Total 的 deeared varialbe 来存储总金额

```
declare @Total numeric (12,2)

set @Total = (select Sum(LaborAmt) from #Data
              group by Co) 
```

我需要编写一个查询来根据@Total 获得更正的 discountRate。这意味着如果我的总金额为 3500000，它应该返回 2

```
SELECT     dbo.budCustomerDisc.Customer, dbo.budCustDiscRate.DiscountRate
FROM         dbo.budCustDiscRate INNER JOIN
                  dbo.budCustomerDisc ON dbo.budCustDiscRate.DiscountID = dbo.budCustomerDisc.DiscountId AND dbo.budCustDiscRate.JBCo = dbo.budCustomerDisc.JBCo
WHERE     (dbo.budCustomerDisc.Customer = 165) ......... 
```

对不起，我只是不知道必须写它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:19:15.520

```
SELECT    budCustomerDisc.Customer, budCustDiscRate.DiscountRate
FROM      budCustDiscRate 
INNER JOIN dbo.budCustomerDisc ON dbo.budCustDiscRate.DiscountID = dbo.budCustomerDisc.DiscountId AND dbo.budCustDiscRate.JBCo = dbo.budCustomerDisc.JBCo
WHERE     budCustomerDisc.Customer = 165 
             And BegBillAmt <= @Total
             And EndBillAmt >= @Total 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:19:17.097

这里的关键是当@Total 介于 BegBillAmt 和 EndBillAmt 之间时，您正在寻找它返回一个值。您希望它返回正确的 DiscountRate。为此，我们需要一个 BETWEEN 语句或两个语句，一个检查 BegBillAmt，一个检查 EndBill Amt。我将说明两者：

首先使用 BETWEEN：

```
 SELECT     dbo.budCustomerDisc.Customer, dbo.budCustDiscRate.DiscountRate
 FROM         dbo.budCustDiscRate INNER JOIN
              dbo.budCustomerDisc ON dbo.budCustDiscRate.DiscountID = dbo.budCustomerDisc.DiscountId AND dbo.budCustDiscRate.JBCo = dbo.budCustomerDisc.JBCo

 WHERE (dbo.budCustomerDisc.Customer = 165) AND @TOTAL BETWEEN BegBillAmt AND EndBillAmt 
```

有时 BETWEEN 不清楚（哎呀，我不确定它在 SQL Server 之外是否受支持，或者在它们是数据库字段而不是静态变量的情况下）。所以这里有两个检查：

```
 SELECT     dbo.budCustomerDisc.Customer, dbo.budCustDiscRate.DiscountRate
 FROM         dbo.budCustDiscRate INNER JOIN
              dbo.budCustomerDisc ON dbo.budCustDiscRate.DiscountID = dbo.budCustomerDisc.DiscountId AND dbo.budCustDiscRate.JBCo = dbo.budCustomerDisc.JBCo

 WHERE  (dbo.budCustomerDisc.Customer = 165) AND BegBillAmt >= @Total AND EndBillAmt <= @Total 
```

希望这有助于为您澄清事情。

# objective-c - 在 Mac OS X 上录制屏幕视频

> ID：15097339
> 
> 赞同：4
> 
> 时间：2013-02-26T19:13:02.290
> 
> 标签：objective-c, macos, cocoa, avfoundation, screen-recording

我正在与 AVFoundation 一起录制屏幕或部分屏幕。这是我工作的 2 个代码示例。

1\. [http://developer.apple.com/library/mac/#samplecode/AVScreenShack/Listings/AVScreenShack_AVScreenShackDocument_m.html](http://developer.apple.com/library/mac/#samplecode/AVScreenShack/Listings/AVScreenShack_AVScreenShackDocument_m.html)

2\. [http://developer.apple.com/library/mac/#qa/qa1740/_index.html](http://developer.apple.com/library/mac/#qa/qa1740/_index.html)

简单的全屏录制或使用裁剪矩形录制就好了，但是当我在录制时尝试更改矩形时，我收到错误：

> 由于错误 Error Domain=AVFoundationErrorDomain Code=-11806 "Recording Stopped" UserInfo=0x13a07f9e0 {AVErrorRecordingSuccessfullyFinishedKey=true, NSLocalizedDescription=Recording Stopped, NSLocalizedRecoverySuggestion=再次尝试录制，是否已完成录制到 file://localhost/Users/Shared/screenMovie.mp4 .}

Apple 文档说明了代码 -11806 的错误：

> AVErrorSessionConfigurationChanged 录制停止，因为媒体源和目标的配置发生了变化。

我在文档中找不到任何关于它的信息。我有建议，我不能在录制时更改矩形。但与此同时，我找不到任何证据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:48:09.087

当您在录制时更改矩形时，录制格式会发生变化，并且无法继续录制到相同的输出。但是，您可以继续录制到新文件。

```
- (void)captureOutput:(AVCaptureFileOutput *)captureOutput didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL fromConnections:(NSArray *)connections error:(NSError *)error {

// Check for error
// If an error occurred and AVErrorRecordingSuccessfullyFinishedKey is YES, then
// start recording to a new file here

} 
```

# c++ - 模板类中的双嵌套类前向声明

> ID：15097340
> 
> 赞同：2
> 
> 时间：2013-02-26T19:13:05.660
> 
> 标签：c++, templates, compiler-errors, declaration

使用 g++ 4.6.2 编译下一个代码时出现“15:14：错误：模板参数列表太少”

```
template <class T>
class A
{
public:
    class B
    {
    public:
        class C; //forward declaration
    };
    class D
    {
    //using B
    };

    class B::C // error here
    {
    //using D
    };
//using B::C
};

/* works fine, but required into "A"
template <class T>
class A<T>::B::C
{
public:
};
*/ 
```

如何在不改变声明顺序的情况下解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:44:10.383

正如您所发现的，您没有在内部范围内定义前向声明的类，您必须在相应的外部范围内进行。您的“工作正常”代码似乎可以使用 g++ 4.5 正常编译。您是说当您尝试“工作正常”的方式时，第 19 行会出错？那是因为它缺少一个终止的`;`.

# cassandra - 在 priam 集群上没有看到其他节点

> ID：15097341
> 
> 赞同：1
> 
> 时间：2013-02-26T19:13:05.660
> 
> 标签：cassandra, cluster-computing, netflix, priam

     我正在使用 cassandra 1.2.1，我正在尝试在 AWS 上设置一个具有两个节点的 Priam 集群。但是，由于一个奇怪的错误（至少对我而言），我无法让两个节点都启动并运行。当我启动两个节点时，它们都能够相互连接并进行一些通信。但是，几秒钟后，我只看到`Java.lang.RuntimeException: No other nodes seen!`，所以他们断开连接并死亡。我试图测试两个节点之间的所有端口（7000、9160 和 7199）并且没有防火墙。在第二个节点上，在上述异常之前，我得到了一个损坏的管道，如下所示。有什么提示吗？ 

```
DEBUG 18:54:31,776 attempting to connect to /10.224.238.170
DEBUG 18:54:32,402 Reseting version for /10.224.238.170
DEBUG 18:54:32,778 Connection version 6 from /10.224.238.170
DEBUG 18:54:32,779 Upgrading incoming connection to be compressed
DEBUG 18:54:32,779 Max version for /10.224.238.170 is 6
DEBUG 18:54:32,779 Setting version 6 for /10.224.238.170
DEBUG 18:54:32,780 set version for /10.224.238.170 to 6
DEBUG 18:54:33,455 Disseminating load info ...
DEBUG 18:54:59,082 Reseting version for /10.224.238.170
DEBUG 18:55:00,405 error writing to /10.224.238.170
java.io.IOException: Broken pipe
    at sun.nio.ch.FileDispatcher.write0(Native Method)
    at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:29)
    at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:72)
    at sun.nio.ch.IOUtil.write(IOUtil.java:43)
    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:334)
    at java.nio.channels.Channels.writeFullyImpl(Channels.java:59)
    at java.nio.channels.Channels.writeFully(Channels.java:81)
    at java.nio.channels.Channels.access$000(Channels.java:47)
    at java.nio.channels.Channels$1.write(Channels.java:155)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
    at org.xerial.snappy.SnappyOutputStream.flush(SnappyOutputStream.java:272)
    at java.io.DataOutputStream.flush(DataOutputStream.java:106)
    at org.apache.cassandra.net.OutboundTcpConnection.writeConnected(OutboundTcpConnection.java:189)
    at org.apache.cassandra.net.OutboundTcpConnection.run(OutboundTcpConnection.java:143)
DEBUG 18:55:01,405 attempting to connect to /10.224.238.170
DEBUG 18:55:01,461 Started replayAllFailedBatches
DEBUG 18:55:01,462 forceFlush requested but everything is clean in batchlog
DEBUG 18:55:01,463 Finished replayAllFailedBatches
 INFO 18:55:01,472 JOINING: schema complete, ready to bootstrap
DEBUG 18:55:01,473 ... got ring + schema info
 INFO 18:55:01,473 JOINING: getting bootstrap token
ERROR 18:55:01,475 Exception encountered during startup
java.lang.RuntimeException: No other nodes seen!  Unable to bootstrap.If you intended to start a single-node cluster, you should make sure your broadcast_address (or listen_address) is listed as a seed.  Otherwise, you need to determine why the seed being contacted has no knowledge of the rest of the cluster.  Usually, this can be solved by giving all nodes the same seed list. 
```

在第一个节点上：

```
DEBUG 18:54:30,833 Disseminating load info ...
DEBUG 18:54:31,532 Connection version 6 from /10.242.139.159
DEBUG 18:54:31,533 Upgrading incoming connection to be compressed
DEBUG 18:54:31,534 Max version for /10.242.139.159 is 6
DEBUG 18:54:31,534 Setting version 6 for /10.242.139.159
DEBUG 18:54:31,534 set version for /10.242.139.159 to 6
DEBUG 18:54:31,542 Reseting version for /10.242.139.159
DEBUG 18:54:31,791 Connection version 6 from /10.242.139.159
DEBUG 18:54:31,792 Upgrading incoming connection to be compressed
DEBUG 18:54:31,792 Max version for /10.242.139.159 is 6
DEBUG 18:54:31,792 Setting version 6 for /10.242.139.159
DEBUG 18:54:31,793 set version for /10.242.139.159 to 6
 INFO 18:54:32,414 Node /10.242.139.159 is now part of the cluster
DEBUG 18:54:32,415 Resetting pool for /10.242.139.159
DEBUG 18:54:32,415 removing expire time for endpoint : /10.242.139.159
 INFO 18:54:32,415 InetAddress /10.242.139.159 is now UP
DEBUG 18:54:32,789 attempting to connect to ec2-75-101-233-115.compute-1.amazonaws.com/10.242.139.159
DEBUG 18:54:58,840 Started replayAllFailedBatches
DEBUG 18:54:58,842 forceFlush requested but everything is clean in batchlog
DEBUG 18:54:58,842 Finished replayAllFailedBatches
 INFO 18:54:58,852 JOINING: schema complete, ready to bootstrap
DEBUG 18:54:58,853 ... got ring + schema info
 INFO 18:54:58,853 JOINING: getting bootstrap token
java.lang.RuntimeException: No other nodes seen!  Unable to bootstrap.If you intended to start a single-node cluster, you should make sure your broadcast_address (or listen_address) is listed as a seed.  Otherwise, you need to determine why the seed being contacted has no knowledge of the rest of the cluster.  Usually, this can be solved by giving all nodes the same seed list.
    at org.apache.cassandra.dht.BootStrapper.getBootstrapSource(BootStrapper.java:154)
    at org.apache.cassandra.dht.BootStrapper.getBalancedToken(BootStrapper.java:135)
    at org.apache.cassandra.dht.BootStrapper.getBootstrapTokens(BootStrapper.java:115)
    at org.apache.cassandra.service.StorageService.joinTokenRing(StorageService.java:620)
    at org.apache.cassandra.service.StorageService.initServer(StorageService.java:508)
    at org.apache.cassandra.service.StorageService.initServer(StorageService.java:406)
    at org.apache.cassandra.service.CassandraDaemon.setup(CassandraDaemon.java:282)
    at org.apache.cassandra.service.CassandraDaemon.init(CassandraDaemon.java:315)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.commons.daemon.support.DaemonLoader.load(DaemonLoader.java:212)
Cannot load daemon
Service exit with a return value of 3 
```

更新：在两个节点上添加了 cassandra 配置

节点 1 上的 Cassandra 配置：

```
cluster_name: dmp_cluster
initial_token: null
hinted_handoff_enabled: true
max_hint_window_in_ms: 8
hinted_handoff_throttle_in_kb: 1024
max_hints_delivery_threads: 2
authenticator: org.apache.cassandra.auth.AllowAllAuthenticator
authorizer: org.apache.cassandra.auth.AllowAllAuthorizer
partitioner: org.apache.cassandra.dht.RandomPartitioner
data_file_directories:
- /var/lib/cassandra/data
commitlog_directory: /var/lib/cassandra/commitlog
disk_failure_policy: stop
key_cache_size_in_mb: null
key_cache_save_period: 14400
row_cache_size_in_mb: 0
row_cache_save_period: 0
row_cache_provider: SerializingCacheProvider
saved_caches_directory: /var/lib/cassandra/saved_caches
commitlog_sync: periodic
commitlog_sync_period_in_ms: 10000
commitlog_segment_size_in_mb: 32
seed_provider:
- class_name: com.netflix.priam.cassandra.extensions.NFSeedProvider
  parameters:
  - seeds: 127.0.0.1
flush_largest_memtables_at: 0.75
reduce_cache_sizes_at: 0.85
reduce_cache_capacity_to: 0.6
concurrent_reads: 32
concurrent_writes: 32
memtable_flush_queue_size: 4
trickle_fsync: false
trickle_fsync_interval_in_kb: 10240
storage_port: 7000
ssl_storage_port: 7001
listen_address: null
start_native_transport: false
native_transport_port: 9042
start_rpc: true
rpc_address: null
rpc_port: 9160
rpc_keepalive: true
rpc_server_type: sync
thrift_framed_transport_size_in_mb: 15
thrift_max_message_length_in_mb: 16
incremental_backups: true
snapshot_before_compaction: false
auto_snapshot: true
column_index_size_in_kb: 64
in_memory_compaction_limit_in_mb: 128
multithreaded_compaction: false
compaction_throughput_mb_per_sec: 8
compaction_preheat_key_cache: true
read_request_timeout_in_ms: 10000
range_request_timeout_in_ms: 10000
write_request_timeout_in_ms: 10000
truncate_request_timeout_in_ms: 60000
request_timeout_in_ms: 10000
cross_node_timeout: false
endpoint_snitch: org.apache.cassandra.locator.Ec2Snitch
dynamic_snitch_update_interval_in_ms: 100
dynamic_snitch_reset_interval_in_ms: 600000
dynamic_snitch_badness_threshold: 0.1
request_scheduler: org.apache.cassandra.scheduler.NoScheduler
index_interval: 128
server_encryption_options:
  internode_encryption: none
  keystore: conf/.keystore
  keystore_password: cassandra
  truststore: conf/.truststore
  truststore_password: cassandra
client_encryption_options:
  enabled: false
  keystore: conf/.keystore
  keystore_password: cassandra
internode_compression: all
inter_dc_tcp_nodelay: true
auto_bootstrap: true
memtable_total_space_in_mb: 1024
stream_throughput_outbound_megabits_per_sec: 400
num_tokens: 1 
```

节点 2 上的 Cassandra 配置：

```
cluster_name: dmp_cluster
initial_token: null
hinted_handoff_enabled: true
max_hint_window_in_ms: 8
hinted_handoff_throttle_in_kb: 1024
max_hints_delivery_threads: 2
authenticator: org.apache.cassandra.auth.AllowAllAuthenticator
authorizer: org.apache.cassandra.auth.AllowAllAuthorizer
partitioner: org.apache.cassandra.dht.RandomPartitioner
data_file_directories:
- /var/lib/cassandra/data
commitlog_directory: /var/lib/cassandra/commitlog
disk_failure_policy: stop
key_cache_size_in_mb: null
key_cache_save_period: 14400
row_cache_size_in_mb: 0
row_cache_save_period: 0
row_cache_provider: SerializingCacheProvider
saved_caches_directory: /var/lib/cassandra/saved_caches
commitlog_sync: periodic
commitlog_sync_period_in_ms: 10000
commitlog_segment_size_in_mb: 32
seed_provider:
- class_name: com.netflix.priam.cassandra.extensions.NFSeedProvider
  parameters:
  - seeds: 127.0.0.1
flush_largest_memtables_at: 0.75
reduce_cache_sizes_at: 0.85
reduce_cache_capacity_to: 0.6
concurrent_reads: 32
concurrent_writes: 32
memtable_flush_queue_size: 4
trickle_fsync: false
trickle_fsync_interval_in_kb: 10240
storage_port: 7000
ssl_storage_port: 7001
listen_address: null
start_native_transport: false
native_transport_port: 9042
start_rpc: true
rpc_address: null
rpc_port: 9160
rpc_keepalive: true
rpc_server_type: sync
thrift_framed_transport_size_in_mb: 15
thrift_max_message_length_in_mb: 16
incremental_backups: true
snapshot_before_compaction: false
auto_snapshot: true
column_index_size_in_kb: 64
in_memory_compaction_limit_in_mb: 128
multithreaded_compaction: false
compaction_throughput_mb_per_sec: 8
compaction_preheat_key_cache: true
read_request_timeout_in_ms: 10000
range_request_timeout_in_ms: 10000
write_request_timeout_in_ms: 10000
truncate_request_timeout_in_ms: 60000
request_timeout_in_ms: 10000
cross_node_timeout: false
endpoint_snitch: org.apache.cassandra.locator.Ec2Snitch
dynamic_snitch_update_interval_in_ms: 100
dynamic_snitch_reset_interval_in_ms: 600000
dynamic_snitch_badness_threshold: 0.1
request_scheduler: org.apache.cassandra.scheduler.NoScheduler
index_interval: 128
server_encryption_options:
  internode_encryption: none
  keystore: conf/.keystore
  keystore_password: cassandra
  truststore: conf/.truststore
  truststore_password: cassandra
client_encryption_options:
  enabled: false
  keystore: conf/.keystore
  keystore_password: cassandra
internode_compression: all
inter_dc_tcp_nodelay: true
auto_bootstrap: true
memtable_total_space_in_mb: 1024
stream_throughput_outbound_megabits_per_sec: 400
num_tokens: 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:31:15.730

您将两台机器上的种子都设置为 127.0.0.1，因此两台机器都无法看到另一台机器。您还拥有 null 的 listen 和 rpc 地址，如果您的主机配置不正确，这可能会出现问题。我的建议是设置监听地址和 rpc 地址，然后将两个节点的种子设置为您首先开始的任何一个。

# html - Safari 中的 HTML5 视频播放问题

> ID：15097344
> 
> 赞同：1
> 
> 时间：2013-02-26T19:13:11.157
> 
> 标签：html, google-chrome, safari, html5-video, playback

我需要一些帮助。

我在[这里](http://sailingroundtheisland.williamchanter.co.uk/)有这个网站，如果你在 Chrome 中查看它，那么视频适合屏幕，但在 Safari 中它不适合:(

这是问题吗？我要合身！！！

这是html 5视频代码...

```
<video id="top" class="video" width="100%" height="100%" poster="te/wave.jpg" preload="auto" muted="muted" autoplay="autoplay" loop="loop" >
    <source src="te/wave.mp4" type="video/mp4" />
    <source src="te/wave.ogv" type="video/ogg" />
</video> 
```

任何帮助都会很好

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:44:17.527

没有办法告诉视频明确忽略纵横比，但请尝试将其添加为 CSS。它可能工作...

```
<style>
video { 
  -webkit-transform: scaleX(2); 
  -moz-transform: scaleX(2);
}
</style> 
```

# inheritance - ORM 继承 (JPA) 背后的基本原理

> ID：15097347
> 
> 赞同：0
> 
> 时间：2013-02-26T19:13:25.453
> 
> 标签：inheritance, jpa, architecture, orm

我在 JPA 中遇到过 ORM 继承，并且一直想知道其背后的设计原则。

我发现该框架支持在关系数据库中对表建模的两个类之间的继承关系很脏——在大多数现实世界的情况下，Liskov 替换原则都消失了，除了示例和教程。

在什么情况下*想要/需要*使用继承？从定义上讲，这不是一个糟糕的设计吗？在这些情况下，连接不会达到目的吗？

我认为为 ORM 提出继承的人考虑到了这一点，尽管存在设计缺陷（至少在我看来），但在 ORM 中启用继承*一定是压倒一切的需要。*那是什么需求？为什么 ORM 中还会存在这种有缺陷的继承设计理念？

JPA 中的 ORM 继承参考 --> [http://en.wikibooks.org/wiki/Java_Persistence/Inheritance](http://en.wikibooks.org/wiki/Java_Persistence/Inheritance)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:16:39.977

如果您的类需要继承概念，您可以在类中使用继承。您（几乎总是）不会围绕您选择的持久性解决方案能够处理的内容设计模型。ORM（应该）与该选择无关。ORM 只是具有持久化继承树的方法。

# java - 如何执行我的程序？

> ID：15097353
> 
> 赞同：0
> 
> 时间：2013-02-26T19:13:50.163
> 
> 标签：java, html, eclipse

下面是我的程序的代码。我想从 linux 服务器复制一个 html 文件并将该 html 文件作为电子邮件正文发送。我正在使用 CLASSPATH 导入我的 jar 文件并成功完成编译，但在运行程序时出错。以下是从 Linux 服务器执行时的错误。也从 Eclipse 运行时出错。

```
import java.io.*;
import java.util.*;
//import java.sql.*;
import javax.mail.*;
import javax.mail.internet.*;
public class SendTable1 {

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception, IOException{
            try {
                    String host = "127.0.0.1";
                    String from = "ychilukuri@zetainteractive.com";
                    String to = "supalerts@zetainteractive.com";
                    Properties properties = System.getProperties();
                    properties.setProperty("mail.smtp.host",host);
                    Session session = Session.getDefaultInstance(properties);
                    MimeMessage message = new MimeMessage(session);
                    message.setFrom(new InternetAddress(from));
                    message.addRecipient(Message.RecipientType.TO, new InternetAddress(to));
                    message.setSubject("DataBase table");
                    FileInputStream fst = new FileInputStream("abuses.html");
            int cnt = 0;
                    StringBuffer buffer = new StringBuffer();
                    while ((cnt = fst.read()) != -1 )
                {
                       buffer.append((char) cnt);
                    }
                    message.setText("" +buffer.toString() ,"text/plain");
                    Transport.send(message);
                    System.out.println("message send......");
            }
            catch(Exception ex)  {
            ex.printStackTrace();
            System.out.println("Error :" +ex.getMessage());
            }
        }
    } 
```

汇编：

```
javac -classpath /home/ebiz40/product/6.1.0/zemo/webapps/zetamobile/WEB-INF/lib/mail.jar /home/ebiz40/SendTable1.java

~]$ java -classpath /home/ebiz40/product/6.1.0/zemo/webapps/zetamobile/WEB-INF/lib/mail.jar /home/ebiz40/SendTable1
Error: Could not find or load main class .home.ebiz40.SendTable1
~]$ java -classpath .:. /home/ebiz40/product/6.1.0/zemo/webapps/zetamobile/WEB-INF/lib/mail.jar  /home/ebiz40/SendTable1
Error: Could not find or load main class .home.ebiz40.product.6.1.0.zemo.webapps.zetamobile.WEB-INF.lib.mail.jar
~]$ java -classpath .  /home/ebiz40/product/6.1.0/zemo/webapps/zetamobile/WEB-INF/lib/mail.jar  /home/ebiz40/SendTable1
Error: Could not find or load main class .home.ebiz40.product.6.1.0.zemo.webapps.zetamobile.WEB-INF.lib.mail.jar 
```

以下是来自 Eclipse 的错误：

```
javax.mail.MessagingException: Could not connect to SMTP host: 127.0.0.1, port: 25;
  nested exception is:
      java.net.ConnectException: Connection refused: connectError :Could not connect to SMTP host: 127.0.0.1, port: 25

      at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1706)
      at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:525)
      at javax.mail.Service.connect(Service.java:291)
      at javax.mail.Service.connect(Service.java:172)
      at javax.mail.Service.connect(Service.java:121)
      at javax.mail.Transport.send0(Transport.java:190)
      at javax.mail.Transport.send(Transport.java:120) 
```

请让我们知道我在哪里出错？如何解决？

# asp.net-mvc - 自定义授权属性 - 我可以为以后存储一个值吗？

> ID：15097356
> 
> 赞同：0
> 
> 时间：2013-02-26T19:13:57.007
> 
> 标签：asp.net-mvc, c#-4.0, asp.net-mvc-4, custom-attributes

我有一个自定义的授权属性，它基本上只是验证一个 cookie 是随请求一起发送的，并且它有一个分配的值。

```
 public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (filterContext == null)
            throw new ArgumentNullException("filterContext");

        bool skipAuthorization = filterContext.ActionDescriptor.IsDefined(typeof(AllowAnonymousAttribute), inherit: true)
                      || filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AllowAnonymousAttribute), inherit: true);

        if (skipAuthorization) return;

        var cookie = filterContext.HttpContext.Request.Cookies[FormsAuthentication.FormsCookieName];

        if (cookie != null)
        {
            var decCookie = FormsAuthentication.Decrypt(cookie.Value);

            if(decCookie != null)
            {
                if (!string.IsNullOrEmpty(decCookie.UserData))
                {
                    return;
                }
            }
        }

        HandleUnauthorizedRequest(filterContext);
    } 
```

这可以满足我的需要，但是我是否可以将 decCookie.UserData 存储在可以在控制器操作中访问的某个位置？我做了一个扩展方法，无论如何都会从请求中在控制器中检索它，但它实际上只是属性已经完成的内容的副本。

那么，有没有一种方法可以让我摆脱没有扩展方法，而只需将 UserData 存储在某个地方以供以后直接从属性中使用到控制器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:47:28.370

使用自定义主体和身份，并在身份上存储您想要的任何数据。请参阅[MVC 3.0、Razor、自定义主体和身份](http://rizzo7.blogspot.com/2012/04/mvc-30-razor-custom-principal-and.html)。为了一个好的介绍。只需忽略有关 using的部分`Application_AuthenticateRequest`，这就是您的`Authorize`属性的用途。

# java - Android布局，拖动还是滑动？

> ID：15097357
> 
> 赞同：0
> 
> 时间：2013-02-26T19:13:57.750
> 
> 标签：java, android, android-2.2-froyo

现在，我知道这听起来完全是愚蠢的。但是，当您拥有智能手机或平板电脑并在屏幕上拖动手指以将应用程序向下移动以访问更多在屏幕上无法访问的元素时，这叫什么？

我问的原因是因为我 dl'd eclipse 并在前几天开始学习 android java。这很棒，很有趣。但是，我实际上已经设法将一个不错的小应用程序放在一起。问题是，当我在一些模拟器中测试它时；屏幕对于应用程序来说太小了，我无法访问最后几个输入和提交按钮。我不知道这些东西叫什么，也不知道我什至可以用谷歌搜索什么来试图弄清楚如何让屏幕向下移动以访问它们。

拜托，我是认真的。任何帮助或方向将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:31:34.060

看看[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)。它支持像网站一样的滚动行为，允许布局“大于”物理屏幕尺寸。

需要注意的一件事；A`ScrollView`只能包含一个直接子级。因此，如果您的布局包含多个`Views`，例如`TextViews`and `Buttons`，您必须将它们全部包装在`LinearLayout`or`RelativeLayout`中。

有很多孩子的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">    

    <LinearLayout id="@+id/wrapper_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">     

        <TextView />

        <EditText />

        <Button />
     </LinearLayout>
</ScrollView 
```

当您只有一个孩子时，您不需要“包装器”布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView id="@+id/lots_of_text_that_need_scrolling" />
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:30:09.123

您需要将布局放在 ScrollView 中。然后，当您向上滑动手指以显示屏幕底部时，屏幕将能够滚动。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T19:22:05.567

我相信您正在寻找的词是滑动。

# google-chrome-devtools - Chrome Canary - 当开发人员工具打开时不会出现悬停状态

> ID：15097362
> 
> 赞同：1
> 
> 时间：2013-02-26T19:14:24.113
> 
> 标签：google-chrome-devtools

不确定这是否是一个错误，或者我是否有一些设置问题，但我最近注意到，当我使用 Chrome Canary [版本 27.0.1423.0 canary] 并打开开发者工具时，我无法再激活在任何网站上悬停状态。如果我关闭开发者工具，我可以再次激活悬停状态。

我已经在最新版本的 Chrome [版本 25.0.1364.97 m] 上对此进行了测试，当我打开开发者工具时，我仍然可以激活悬停状态。

我做了一些研究，没有发现任何人报告类似的问题，所以我想我会在这里问。这是错误还是配置问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:49:12.197

听起来像[https://code.google.com/p/chromium/issues/detail?id=177612](https://code.google.com/p/chromium/issues/detail?id=177612)。请检查您没有打开`Settings`- `Overrides`-`Emulate touch events`复选框。它最近开始禁止 mousemove/mouseover/mouseout 事件，以便页面行为更类似于启用触摸（== 无指针）设备上的行为。

# node.js - Mongoose（node.js 模块）导致 CPU 使用率高

> ID：15097375
> 
> 赞同：6
> 
> 时间：2013-02-26T19:14:59.933
> 
> 标签：node.js, mongodb, mongoose

我正在使用 nodetime 来分析我的 node.js 应用程序的高 CPU 使用率。超过 30% 的 CPU 使用率来自 Mongoose：

![在此处输入图像描述](../Images/a074741b3ca20738c3de21256fd31dd4.png)

下一个最大的罪魁祸首是垃圾收集器，仅占 5%。

我***相信***我之前听说过 Mongoose 会导致 CPU 使用率过高，最好跳过它并直接使用 Mongo 驱动程序。这是准确的吗？

这是“Geocode.decodeMnay”函数，触发了这个特定的热点......

```
Geocode.prototype.decodeMany = function(strs, callback)
{
    var or = [],
        map = {},
        fields = {'woeid': 1, 'matched_queries': 1, 'latitude': 1, 'longitude': 1, 'radius': 1, 'name': 1},
        unique = [];

    strs = _.uniq(strs);
    for(var k=0; k<strs.length; k++)
        or.push({'matched_queries':strs[k].trim()});    

    this.model.find({$or: or}, fields, (function(e,matches){
        // ... excluded for brevity
    }).bind(this));
}; 
```

我还能如何加速这个热点？

**请注意**，正如您所见，不是查询需要很长时间，而是 Mongo 驱动程序需要很长时间来处理结果（并且在此过程中消耗大量 CPU）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T19:29:35.367

对于 Mongoose，对于具有大型结果集的查询使用[精益](http://mongoosejs.com/docs/api.html#query_Query-lean)选项很重要，在这些查询中，除了纯 JavaScript 文档本身之外不需要任何东西。这应该提供与直接使用本机驱动程序相当的性能。

例如，在上述情况下，它将是：

```
this.model.find({$or: or}, fields).lean().exec(function(e, matches) {
    // ... excluded for brevity
}).bind(this)); 
```

# java - 如何从 system.in 公开变量

> ID：15097376
> 
> 赞同：0
> 
> 时间：2013-02-26T19:15:01.213
> 
> 标签：java, if-statement

在我检查以确保变量的值是正确的形式，然后声明变量之后，我怎样才能将它公开，所以我不必嵌套我的所有代码？例如

```
public class Universalgravitation {
    static Scanner userInput = new Scanner(System.in);
    public static void main(String[] args)
    {           
        double G = .00000000006667;
        System.out.println("Keep in mind the upper limit for all of the values is 2 billion ");
        System.out.print("What is the mass of the first object? ");
        if(userInput.hasNextInt())
        {               
            int Mass1 = userInput.nextInt();
            System.out.print("What is the mass of the second object? ");
        if(userInput.hasNextInt())
        {               
            int Mass2 = userInput.nextInt();
            System.out.print("What is the radial distance between the two objects? ");
        if(userInput.hasNextInt())
        {               
            int Dist = userInput.nextInt();
            System.out.println("The gravitational force in newtons is: " + (G * Mass1 * Mass2) / (Dist * Dist));
        }
        }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:25:12.427

[这](http://www.java2s.com/Tutorial/Java/0020__Language/VariableScopeinablock.htm)是描述 Java 范围的快速链接。[这个](http://www.java-made-easy.com/variable-scope.html)链接描述得更清楚一点，但第一个更接近你正在寻找的东西。

一个简短的例子：

```
class Something{
    public void example(){
        int value=1;
        System.out.println("value from before a block: "+value);
            {
                value=2;
                System.out.println("value from inside a block: "+value);
            }
        System.out.println("value from after a block: "+value);
    }
} 
```

另外，我不想冒险让你感到困惑，或者跳过你在课堂上学到的东西，所以我主要提出这个以供将来参考，但要考虑的另一件事是将值存储在对象中。

例如，您可以执行以下操作：

```
class Foo{
    static final double G = .00000000006667;
    private int Mass1;
    private int Mass2;
    private int Dist=1;//defaulting to avoid division by zero

    public int getMass1(){return mass1;}
    public void setMass1(int mass1){this.mass1=mass1;}
    ....

    public double getGravitationalForce(){
        return (G * Mass1 * Mass2) / (Dist * Dist);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:32:28.710

如果您想拥有本质上具有某种全局性的不变值，请将它们声明为 final 并在声明或构造函数中对其进行初始化。另外，请尝试使用有意义的名称（我在下面的示例中选择的名称可能不正确）。例如

```
public class blammy
{
  private static final double coefficientOfGravity = .00000000006667;

 ... blah blah ...

 System.out.println("blammy: " + (coefficientOfGravity * mass1 * mass2) / (dist * dist));

... blah blah ...
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T19:22:12.737

将您的变量声明为静态全局变量，然后像这样为它们赋值。

```
public class Universalgravitation {
    static Scanner userInput = new Scanner(System.in);

    static double G

    static int Mass1;
    static int Mass2;
    static int Dist;

    public static void main(String[] args)
    {           
        G = .00000000006667;
        System.out.println("Keep in mind the upper limit for all of the values is 2 billion ");
        System.out.print("What is the mass of the first object? ");
        if(userInput.hasNextInt())
        {               
            Mass1 = userInput.nextInt();
            System.out.print("What is the mass of the second object? ");
            if(userInput.hasNextDouble())
            {               
                Mass2 = userInput.nextInt();
                System.out.print("What is the radial distance between the two objects? ");
                if(userInput.hasNextDouble())
                {               
                    Dist = userInput.nextInt();
                    System.out.println("The gravitational force in newtons is: " + (G * Mass1 * Mass2) / (Dist * Dist));
                }
            }
        } 
```

# asp.net - 如何将动态加载的 web 表单用户控件转换为 mvc razor

> ID：15097377
> 
> 赞同：3
> 
> 时间：2013-02-26T19:15:07.777
> 
> 标签：asp.net, asp.net-mvc, razor

我将以 Web 表单编写的现有自定义 CMS 移植到 MVC4，理想情况下保持 CMS 数据库架构和数据完好无损。我正在使用 url 来确定请求哪个页面，以及使用哪个模板。模板主要用于不同的布局和内容“字段”。

在我的网络表单应用程序中，我有一个基类`PageTemplate : UserControl`

我有一个 default.aspx，它查看请求的路径，从数据库中提取它，然后使用 TemplateId 属性动态加载用户控件，将数据库内容添加到属性，然后添加到页面上的占位符

```
p = CMSPage.Select(fullPath);
myTemplate = LoadControl("~/templates/template_" + p.TemplateId.ToString + ".ascx");
myTemplate.Content = p;
phTemplate.Controls.Add(myTemplate); 
```

在 usercontrols`Init`事件中，我使用来自 CMS 的内容填充 Literal 标签——这意味着我可以拥有服务器控制按钮和交互并且仍然处理回发——所有这些都封装在 usercontrol 中

我有大约 20 个模板，大多数只是渲染，有些是交互式的。我想迁移到 Razor 作为视图引擎。

1）基于动态内容加载部分视图并将CMS内容作为模型传递给视图的最佳MVC方式是什么？它是单个 CMSpage 控制器，每个模板都有部分吗？还是每个模板的控制器？

2）从模板部分中处理帖子的最结构化的MVC方法是什么：单个CMS控制器上的方法？每个模板的控制器？

3）欢迎使用伪代码！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:36:24.703

1.  您可以遵循与用户控制方法类似的方法。重定向到一个操作方法，该方法根据模板 ID 选择要返回的部分视图。action 方法可以取部分 ID 并执行`return PartialView("View" + templateID.ToString());`。也可以从使用的视图中动态加载部分视图`Html.Action`。如果您需要动态内容加载，也可以使用 $.ajax 使用 JQuery 加载部分视图并将其流式传输到客户端。
2.  要么在局部视图中定义表单，要么拥有一个接受 FormCollection 的全局局部视图（一种引用回发表单的通用方式）。您可以使用一些回传的 ID 来确定模板响应。如果可以，在模板中包含表单可能会更好且更易于配置。但是，后者会更复杂，但如果您想要一个通用的 CMS 解决方案，后者是一种实现方式。

对此没有一刀切的解决方案。仅对产品一瞥就很难提供建议。

# android - 在android活动中实现退出对话框

> ID：15097379
> 
> 赞同：0
> 
> 时间：2013-02-26T19:15:12.917
> 
> 标签：android

当他按下后退按钮时，我试图向用户实现一个退出对话框，但是当他按下它时，它会将他发送到先前的活动而不显示对话框。

这是`onBackPressed():`

```
 @Override
        public void onBackPressed() {
        new AlertDialog.Builder(this)
            .setIcon(android.R.drawable.ic_dialog_alert)
            .setTitle("Closing Activity")
            .setMessage("Are you sure you want to close this activity?")
            .setPositiveButton("Yes", new DialogInterface.OnClickListener()
        {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                finish();    
            }

        })
        .setNegativeButton("No", null)
        .show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:24:37.013

只需添加`.Create()`并且只是添加`super.finish()`退出父 Activity 的建议。

```
public void onBackPressed() {
 new AlertDialog.Builder(this)
        .setIcon(android.R.drawable.ic_dialog_alert)
        .setTitle("Closing Activity")
        .setMessage("Are you sure you want to close this activity?")
        .setPositiveButton("Yes", new DialogInterface.OnClickListener()
       {
        @Override
        public void onClick(DialogInterface dialog, int which) {
           super.finish();    
        }

        })
      .setNegativeButton("No", null)
      .create().show();
} 
```

# javascript - Javascript - 选择与当前数组相同的随机数组，然后选择另一个

> ID：15097388
> 
> 赞同：0
> 
> 时间：2013-02-26T19:15:40.087
> 
> 标签：javascript, random, repeat

我的目标：

我正在尝试在我的网站上创建一小部分用于推荐。

我有 1 个推荐，当点击按钮时，当前的推荐消失，一个新的随机推荐出现在框中。这工作正常。但是...我注意到随机选择器抛出了重复的推荐（显示了推荐 1，单击了按钮并且仍然偶然出现了推荐 1）

我正在尝试编写一个命令，上面写着：如果新数组与前一个数组相同，则重复随机选择过程（重做数学），否则写入（innerHTML）新的推荐。

我的问题是我不知道 IF 部分的编码（我在其中潦草地写着“与当前消息相同”）

下一阶段将是“开始脚本”部分（重做数学）

如果有人可以在这里帮助我，我将不胜感激，因为我有点笨拙！

先感谢您

```
function quotes() {
    //Define and populate the array 
    var aquote = new Array;
    aquote[0] = "\"Your cakes are fantastic, beautiful designs and taste gorgeous!\"";
    aquote[1] = "\"I can’t believe how beautiful the cake was and how much detail there was on it.  My mum cried when she saw it and didn’t want to cut it up but we eventually persuaded her and it was really tasty.\" Sasha – Rothwell";
    aquote[2] = "\"Thank you for our wedding cake.  The fruit cake was absolutely delicious and so moist.  The flowers you made were beautiful and exactly as we imagined they would be.  We have kept the flowers and they are a great reminder of our wonderful day.\" Paul & Jane – Rutland"
    aquote[3] = "\"My husband said that the cupcakes you made for his birthday are the best he has tasted and your buttercream is divine – I have to agree!\" Dawn – Cambridgeshire"
    aquote[4] = "\"Thank you Bumble Cottage Cakes for My son’s birthday cake it was fantastic as usual I will be back soon and I can’t wait for the next one.\"Liz  – Desborough"

    //Generate a random number then print the quote from that array index
    rdmQuote = Math.floor(Math.random() * aquote.length);
    if (rdmQuote = aquote[SAME AS CURRENT MESSAGE]) {
        alert('quote is same as current')
    } else {
        document.getElementById("randomtestimonial").innerHTML = aquote[rdmQuote];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:23:30.040

我将定义数组，使其仅初始化一次。然后我会选择一个介于 0 和 n-2 之间的随机条目 m（其中 n 是数组大小）并将第 m 个条目与 n-1 条目交换并显示该条目。因此，新选择永远不会选择当前显示的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:22:38.873

一种方法是将元素的内容与随机选择的新内容进行比较，并使用循环选择新内容，直到它们不同为止。

```
var currentContent = document.getElementById("randomtestimonial").innerHTML;
do {
  rdmQuote = aquote[Math.floor(Math.random()*aquote.length)];
} while(currentContent == rdmQuote);
document.getElementById("randomtestimonial").innerHTML = rdmQuote; 
```

这段代码可以改进，因为如果`aquote.length`曾经为 1，那么这将是一个无限循环。但是，希望这是一个很好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:25:05.513

存储最后一个报价的索引并进行比较。

**[jsFiddle 示例](http://jsfiddle.net/j08691/uDWAb/)**

```
var lastQuote = -1;
function quotes() {
    //Define and populate the array 
    var aquote = new Array;
    aquote[0] = "\"Your cakes are fantastic, beautiful designs and taste gorgeous!\"";
    aquote[1] = "\"I can’t believe how beautiful the cake was and how much detail there was on it.  My mum cried when she saw it and didn’t want to cut it up but we eventually persuaded her and it was really tasty.\" Sasha – Rothwell";
    aquote[2] = "\"Thank you for our wedding cake.  The fruit cake was absolutely delicious and so moist.  The flowers you made were beautiful and exactly as we imagined they would be.  We have kept the flowers and they are a great reminder of our wonderful day.\" Paul & Jane – Rutland"
    aquote[3] = "\"My husband said that the cupcakes you made for his birthday are the best he has tasted and your buttercream is divine – I have to agree!\" Dawn – Cambridgeshire"
    aquote[4] = "\"Thank you Bumble Cottage Cakes for My son’s birthday cake it was fantastic as usual I will be back soon and I can’t wait for the next one.\"Liz  – Desborough"
    //Generate a random number then print the quote from that array index
    var rdmQuote = Math.floor(Math.random() * aquote.length);   
    if (rdmQuote == lastQuote) {
        alert('quote is same as current')
    } else {
        document.getElementById("randomtestimonial").innerHTML = aquote[rdmQuote];
        lastQuote = rdmQuote;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T19:21:40.760

我只会缓存当前的选择。

```
 <!-- Hide the script from old browsers //-->
 var _cache="";
 function quotes(){
 //Define and populate the array 
 var aquote = new Array;
   // all your quotes

 //Generate a random number then print the quote from that array index
 rdmQuote = Math.floor(Math.random()*aquote.length);

 if (_cache == rdmQuote) 
     {
         alert('quote is same as current')
     }
     else
     {
       document.getElementById("randomtestimonial") .innerHTML=aquote[rdmQuote];
 }
 _cache  = rdmQuote;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T19:22:26.267

只需使用一个变量来存储当前的报价索引。

```
var current = -1;

function quotes() {

    //Define and populate the array 
    var aquote = new Array;
    aquote[0] = "\"Your cakes are fantastic, beautiful designs and taste gorgeous!\"";
    aquote[1] = "\"I can’t believe how beautiful the cake was and how much detail there was on it.  My mum cried when she saw it and didn’t want to cut it up but we eventually persuaded her and it was really tasty.\" Sasha – Rothwell";
    aquote[2] = "\"Thank you for our wedding cake.  The fruit cake was absolutely delicious and so moist.  The flowers you made were beautiful and exactly as we imagined they would be.  We have kept the flowers and they are a great reminder of our wonderful day.\" Paul & Jane – Rutland"
    aquote[3] = "\"My husband said that the cupcakes you made for his birthday are the best he has tasted and your buttercream is divine – I have to agree!\" Dawn – Cambridgeshire"
    aquote[4] = "\"Thank you Bumble Cottage Cakes for My son’s birthday cake it was fantastic as usual I will be back soon and I can’t wait for the next one.\"Liz  – Desborough"

    //Generate a random number then print the quote from that array index
    rdmQuote = Math.floor(Math.random() * aquote.length);
    if (rdmQuote == current) {
        alert('quote is same as current')
    } else {
        document.getElementById("randomtestimonial").innerHTML = aquote[rdmQuote];
        current = rdmQuote;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T19:27:58.057

你的工作比你的问题标题所暗示的要容易。您正在寻找从数组中选择一个随机**字符串，如果它与当前****字符串**相同，请选择另一个。

你也已经知道如何访问这个字符串了

```
rdmQuote = Math.floor(Math.random() * aquote.length);
if (rdmQuote == document.getElementById("randomtestimonial").innerHTML]) {
    alert('quote is same as current')
} else {
    document.getElementById("randomtestimonial").innerHTML = aquote[rdmQuote];
} 
```

请注意，我使用了双等号，而不是您使用的单等号。= 是赋值。== 和 === 是相等比较。这仍然会给您留下一个问题，即如果相同，该怎么办（警报除外）。您需要`do/while`控制命令。

```
var quote = "";
do {
    rdmQuote = Math.floor(Math.random() * aquote.length);
    quote = aquote[rdmQuote];
} while (quote == document.getElementById("randomtestimonial").innerHTML;
document.getElementById("randomtestimonial").innerHTML = quote; 
```

# c# - 将 xml 示例更改为 xmldocument

> ID：15097396
> 
> 赞同：0
> 
> 时间：2013-02-26T19:16:04.570
> 
> 标签：c#, xml

我有一个程序可以读取制表符分隔的文件并构建一个示例 xml 文件。

```
\t\t\troot
\t\t\t\tnode1 
```

输出：

```
<root><node1></node1></root> 
```

我想更改程序的逻辑以构建构建 xmldocument 的字符串表示形式，**而不是 c# 构建 xmldocument 以实现自动化目的的 xml**。

例如（文档的实际文本）

```
"XmlElement XElemRoot = xDoc.CreateElement("root");

XmlElement XElemSecond = xDoc.CreateElement("node1");

XElemRoot.AppendChild(XElemSecond);" 
```

当前代码：

```
 string[] files = System.IO.File.ReadAllLines(@"C:\dell\test\xmlsamplemaker\xmlsampler\xmlsampler\bin\Debug\textofxml.txt");
 string newXml = string.Empty;string[] xmlHolder;
 List<int> levels = new List<int>();
        var lastlevel = 0;

        Stack<String> stack = new Stack<String>();

        for (int lines = 0; lines < files.Length; lines++)  //start
        {
            var firstNode = files[lines].TrimEnd('\t');
            levels.Add(TextTool.CountStringOccurrences(firstNode, "\t"));  //first count
            if (lines == 0)
            {
                newXml += "<" + files[lines].Replace("\t", "") + ">" + System.Environment.NewLine;
                stack.Push(files[lines].Replace("\t", ""));
            }
            else{
                if (levels[levels.Count - 1] == levels[levels.Count - 2])
                {
                    newXml += "</" + stack.Pop() + ">" + System.Environment.NewLine;
                    newXml += "<" + files[lines].Replace("\t", "") + ">" +System.Environment.NewLine;
                    stack.Push(files[lines].Replace("\t", ""));
                }
                else if (levels[levels.Count - 1] > levels[levels.Count - 2])
                {
                    newXml += "<" + files[lines].Replace("\t", "") + ">" + System.Environment.NewLine;
                    stack.Push(files[lines].Replace("\t", ""));
                }
                else
                {
                    newXml += "</" + stack.Pop() + ">" + System.Environment.NewLine;
                    newXml += "</" + stack.Pop() + ">" + System.Environment.NewLine;
                    newXml += "<" + files[lines].Replace("\t", "") + ">" + System.Environment.NewLine;
                    stack.Push(files[lines].Replace("\t", ""));
                }
            }
        }
        var size = stack.Count;
        for (int j = 0; j < size; j++)
        {
            newXml += "</" + stack.Pop() + ">" + System.Environment.NewLine;
        }

        System.IO.File.WriteAllText(@"C:\dell\xmlsample.xml", newXml); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:35:22.573

我建议使用`XmlWriter`- 然后：

```
newXml += "<" + files[lines].Replace("\t", "") + ">" + System.Environment.NewLine; 
```

变成

```
writer.WriteStartElement(files[lines].Replace("\t", "") ); 
```

和

```
newXml += "</" + stack.Pop() + ">" + System.Environment.NewLine; 
```

变成

```
writer.WriteEndElement(); 
```

等等 -实例在`writer`哪里。`XmlWriter`请注意，通过这种方式，您不再需要在堆栈中保留打开元素的名称 - 编写器会为您执行此操作（您可以使用简单的计数器来跟踪有多少打开元素）。

一旦您的代码使用了`XmlWriter`，您就可以直接转到文件、任何流、字符串（参见[此处](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.create.aspx)）或`XmlDocument`using [`XmlNodeWriter`](http://www.gotdotnet.com/Community/UserSamples/Details.aspx?SampleGuid=8F9DE8A7-FEC9-48E1-91C5-1FC569CDE11C)。

**更新**

要生成创建`XmlDocument`“优雅”的 C# 代码 - 但可能是过度的 = 解决方案是实现`XmlWriter`生成代码文本的自定义。的源代码`XmlNodeWriter`将是一个很好的起点。

否则，只需将当前代码的字符串连接替换为包含 C# 代码的类似字符串...

# git - Git：任何忽略已更改版本号的文件的方法

> ID：15097401
> 
> 赞同：1
> 
> 时间：2013-02-26T19:16:31.310
> 
> 标签：git, versioning

我正在尝试查看在名为 IP.Board 的新版本软件中所做的一些更改。但是，当我在本地存储库中运行 git show 时，它们的版本 3.4.2 和 3.4.3 之间有很多文件刚刚更新了它们的版本号。

像这样：

```
- * IP.Board v3.4.2
+ * IP.Board v3.4.3 
```

有什么简单的方法可以忽略唯一更改的文件吗？我猜他们的版本生成器会自动更新所有包含文件中的版本号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:09:01.673

这不是非常强大，但可能已经足够好了。投入`.git/config`：

```
[diff "remove-rev"]
    textconv=sed '/IP.Board v[0-9]*\\.[0-9]*\\.[0-9]*/d' 
```

然后在`.gitattributes`or`.git/info/attributes`中，输入：

```
* diff=remove-rev 
```

现在，无论何时`git-diff`运行，sed 脚本都会在 gitdiffcore 决定哪些文件对不同之前应用于文件。您可能需要调整`sed`命令以满足您的需要，但这应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:33:15.877

不。git 使用文件内容的哈希来跟踪文件的内容。当版本发生变化时，内容会发生变化，哈希也会发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:51:51.513

不，你不能。我知道这不是您想要的，但我建议您解决这个问题。

是的，这很糟糕。但是，尝试在 git 级别解决它（或减轻头痛）只会确保您能更长时间地忍受这个问题。事实是，这是设置构建时设计选择不佳的结果。

您可以忽略这些文件，但首先必须从 git 中删除它们：

1.  备份您要删除的文件
2.  `git rm <files>`
3.  犯罪
4.  恢复文件。
5.  编辑 .gitignore 并添加恢复的文件，直到 git 说你的工作树是干净的。

如果这不可行，您可以做的最好的事情是使用脚本组合作为[提交挂钩](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)，尽可能多地自动化管理这些文件的过程。它仍然会很痛苦，但不会那么痛苦。再次，我建议你不要走这条路。

更新：如果您不打算自己更改这些版本号，您还可以使用[过滤器](http://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)（一个需要两个命令的脚本 - 涂抹和清洁）。当命令被涂抹时，您的脚本将删除带有版本号的行，类似于 William 所指出的。当命令干净时，您的脚本将重新添加这些行。

请注意，这与威廉的方法之间的主要区别在于，使用它，即使您在普通文本编辑器中打开文件，您也不会看到版本行，因为这种方法实际上会修改文件的内容 - 而不是 git 的视图它。因此，这可能不是您想要的——最安全的方法是 William 所建议的，它正在改变 git 看待差异的方式。

这是[有关这两种方法的更多信息](http://git-scm.com/book/ch7-2.html)。

# php - 我如何使用 mysql 获取过去 3 个月的第一天？

> ID：15097404
> 
> 赞同：0
> 
> 时间：2013-02-26T19:16:40.183
> 
> 标签：php, mysql

我如何使用 mysql 获取前 3 个月的第一天？

我尝试使用以下 mysql 查询

```
`SELECT concat(date_format(LAST_DAY(now() - INTERVAL 90 DAY),'%Y-%m-'),'01')` 
```

这给出了`2012-11-01`......在这里我需要 2013-02-01,2013-01-01,2012-12-01 作为日期。这里将更改 90 天。根据间隔日，我如何获得前一个月第一天的数量

好心劝告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:24:20.593

这应该工作

```
SELECT 
   concat(date_format(LAST_DAY(now() - INTERVAL 1 MONTH),'%Y-%m-'),'01') AS day1,
   concat(date_format(LAST_DAY(now() - INTERVAL 2 MONTH),'%Y-%m-'),'01') AS day2,
   concat(date_format(LAST_DAY(now() - INTERVAL 3 MONTH),'%Y-%m-'),'01') AS day3 
```

# java - 如何添加使用 JAVA 而不是 odbc32.exe 连接到 MS DB 的新系统 DSN？

> ID：15097408
> 
> 赞同：0
> 
> 时间：2013-02-26T19:16:56.500
> 
> 标签：java, odbc

我正在尝试添加新的 System DSN 但我想使用 java 而不是使用 Windows `odbcad32.exe`。

我的问题是：

*   我正在创建与数据库连接的 java 应用程序，但是我在某个文件中创建了另一个数据库，而不是主数据库，这个数据库包含一些对用户隐藏的特殊信息。注意：我不使用`odbcad32.exe` use Just java 。如果不可能，还有其他建议吗？

谢谢阅读 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:41:41.413

如果可以确定调用了哪些 Win32 API 函数`odbcad32.exe`，则可以调用这些函数。

以下是执行此操作的两个选项：

1.  [JNA](https://github.com/twall/jna)似乎是您想要[的行业标准](http://en.wikipedia.org/wiki/Java_Native_Access)，“让 Java 程序可以轻松访问本地共享库（Windows 上的 DLL），而无需编写任何东西，只需要编写 Java 代码——不需要 JNI 或本地代码”

2.  还有[Java Foreign Function Interface](http://github.com/wmeissner/jffi) - [示例用法](http://github.com/wmeissner/jffi/blob/0.6/test/com/kenai/jffi/StructTest.java)

# bash - apt-get 不适用于从文件管道传输的正确包

> ID：15097412
> 
> 赞同：2
> 
> 时间：2013-02-26T19:17:12.310
> 
> 标签：bash, packages, apt, linux-mint

我在使用 apt-get 自动安装软件包时遇到了一个奇怪的问题。我在一个文件中有一个包列表，比如 packagefile.txt。我想使用这个列表来自动化安装这些包的过程`cat packagefile.txt | xargs sudo apt-get install -q -y`。但是， apt-get 在每个条目上都会告诉我`x`: `E: Unable to locate package x`。当然，我首先想到了拼写错误，但是我在文件中的任意包名上手动尝试了 apt-install -q -y ，一切正常。奇怪的是，`apt-cache search`也不起作用（根本不是一个输出）。

我在 Mate 和 Cinammon 的 LinuxMint13 上使用 GNU bash 版本 4.2.37（也都经过测试）。

任何人都可以给我一个提示可能会发生什么，请？我因尝试为什么这些东西不起作用而头疼。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:16:57.547

假设每个包都在自己的行上：

```
apt-get install -q -y $(< packagefile.txt) 
```

# ruby-on-rails - 在 heroku 上使用 wicked_pdf 生成大纲（又名 toc，又名书签）

> ID：15097416
> 
> 赞同：0
> 
> 时间：2013-02-26T19:17:32.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, wkhtmltopdf, wicked-pdf

有没有人幸运地让大纲生成与 Heroku 上的 wicked_pdf 一起工作？我在开发模式下没有问题（在 Windows 上！），但在 Heroku 上我无法制作轮廓。我在 wicked_pdf 配置中尝试了明确的 :outline => {:outline => true, :outline_level => 4} 无济于事。我怀疑这与 Heroku 需要的 wkhtmltopdf 的静态 0.9.9 amd-64 版本有关（？）。（我将再试一次，看看我是否可以获得 wkhtmltopdf 的更新版本来表现）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:45:26.433

将 wkhtmltopdf 更新到 0.11.0.rc1 似乎已经解决了一些小的分页问题。

我相信 wkhtmltopdf 0.10.0.rc？是我之前尝试过的，但在 Heroku 上不起作用。

旁注，wkhtmltopdf-heroku gem 可能适用于大多数人。但它所做的只是引入 wkhtmltopdf 二进制文件并为使用它的 pdf gem 设置配置。由于我需要在自定义控制器中设置配置以在延迟作业中使用，并且无法看到 wicked_pdf 初始化程序，因此我自己将 wkhtmltopdf 放入项目的 /bin 并根据需要设置 wicked_pdf 的 exe_path 会更容易。

# sql - SQL 命令/查询按列 ID 的平均值？

> ID：15097418
> 
> 赞同：1
> 
> 时间：2013-02-26T19:17:36.897
> 
> 标签：sql

所以我知道我可以使用 SQL avg() 函数进行平均，但是如何按列中的实际 ID 对其进行分解？

假设我有 10 个不同的 ID，我需要在一个查询中从每个 ID 中获取平均值，我将如何尽可能简单地做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T19:18:33.380

我认为这是您正在寻找的使用`AVG`and `GROUP BY`：

```
SELECT AVG(SomeColumn), ID
FROM YourTable 
GROUP BY Id 
```

# javascript - 用于检查 ul ID 并相应更改变量的 Javascript

> ID：15097419
> 
> 赞同：0
> 
> 时间：2013-02-26T19:17:44.910
> 
> 标签：javascript, html, getelementbyid

我正在创建一个允许基于精灵悬停的简单函数。我不想根据每种可能的汽车类型（紧凑型、敞篷车、suv 等）重复此代码。相反，我想要一个 if 语句来检查 ul 是否具有某个 ID，如果有，则将变量更改为所述汽车类型之一。这个变量将被放置在一个 img url 中。这是我到目前为止的javascript代码。

```
var img;
                        if (document.getElementById("car")) {
                            var img = "compact";
                        }
                        function rad_glowOn() {
                            document.getElementById("radiator").style.backgroundImage = "url(/af-demo/images/TW/"+img+"-carparts-glow.png)";
                            document.getElementById("healthAlert").style.display = "block";
                        } 
```

这是它引用的 HTML。UL 的 ID 将根据汽车而变化。还没有设置。

```
<ul id="car">
                        <li id="carLinks">
                            <div id="healthAlert">
                                <p class="healthPopup-Header">Radiator</p>
                                <p>Radiator Leaking.  Lorem Ipsum</p>
                            </div>
                            <a href="#" id="radLink" onmouseover="javascript:rad_glowOn();" onmouseout="javascript:rad_glowOff();">                                 
                            </a>
                            <a href="#" id="engLink" onmouseover="javascript:eng_glowOn();" onmouseout="javascript:eng_glowOff();">
                            </a>
                            <a href="#" id="batLink" onmouseover="javascript:bat_glowOn();" onmouseout="javascript:bat_glowOff();">
                            </a>
                            <a href="#" id="frontWheel" onmouseover="javascript:mec_glowOn();" onmouseout="javascript:mec_glowOff();">
                            </a> 
                            <a href="#" id="backWheel" onmouseover="javascript:mec_glowOn();" onmouseout="javascript:mec_glowOff();">
                            </a>
                            <a href="#" id="passSeat" onmouseover="javascript:mec_glowOn();" onmouseout="javascript:mec_glowOff();">
                            </a>
                            <a href="#" id="driverSeat" onmouseover="javascript:mec_glowOn();" onmouseout="javascript:mec_glowOff();">
                            </a>
                        </li>
                        <li id="radiator">                                        
                        </li>
                        <li id="engine">                                        
                        </li>
                        <li id="battery">                                        
                        </li>
                        <li id="mechanical">    
                        </li>
                    </ul> 
```

汽车类型不是实际的 ID 或类别。我有一个图像列表，变量是图像的第一部分，反映在：

```
style.backgroundImage = "url(/af-demo/images/TW/"+img+"-carparts-glow.png)"; 
```

现在我必须直接指定该图像标签：

```
.style.backgroundImage = "url('/af-demo/images/TW/compact-carparts.png')" 
```

我的目标是有一个简单的 if 语句来检查 ul 的 ID 并为 img 变量分配一个值，该值将反映到上面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:28:49.370

```
function rad_glowOn() {
    var thing = this.id.split('Link')[0];
    ...
} 
```

# android - Android Maps API 示例不起作用？

> ID：15097422
> 
> 赞同：1
> 
> 时间：2013-02-26T19:17:56.557
> 
> 标签：android, google-maps, android-maps-v2

我尝试了来自谷歌 API 网站的官方示例代码： [https ://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

这和他们的 SDK 代码都没有编译没有错误..

举个简单的例子，它说*“错误膨胀类片段”*

我看到很多人都在做*“MainActivity 扩展片段”*，但在这个例子中没有，所以我想尝试这种方式。

也不要提到你必须在你的清单中添加一个*“活动”*标签..他们怎么能忘记？

我用了

*   Eclipse 中的 API17
*   Galaxy S2 (4.0.4) 作为测试设备。

感谢您的任何建议

编辑：我不知道为什么它现在可以工作，但它是..问题是，没有正确引用库，我也必须在“项目属性”中进行这些设置，我只需要“勾选”所有其中：

（不能发截图）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:11:31.900

您需要按照 google 示例中的说明正确安装“google play services library”和“android-support-v4.jar”

# bash - Bash 脚本：使用 $( 分配变量

> ID：15097423
> 
> 赞同：-1
> 
> 时间：2013-02-26T19:18:16.027
> 
> 标签：bash

我在使用 $( 格式在 bash shell 中设置变量时遇到了最糟糕的情况。

这是我所拥有的：

```
#!/bin/bash

var= date
echo $var

hrs="NA"
min="NA"
t="AM"
hr=12

var= date | grep -o [0-9][0-9]':'[0-9][0-9]
echo $var

if echo $var | grep -q [0-9][0-9] | > 12
then

echo $hrs
hrs=$(echo $var | grep -o "[0-9][0-9]")
echo $hrs
hrs="$hrs-$hr"
fi

echo $hrs

if $var | grep -q [0-9][0-9] | > 12
then
    t="PM"
fi

echo $t 
```

但是，当我之后回显 hrs 变量时，它是一个空字符串。有人可以解释我的作业哪里出错了吗？我知道我正在输入 if 语句，所以我认为这不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:27:51.583

我猜你想要这样的东西：

```
if [ $(echo "$var" | grep -q [0-9][0-9]) -ge 12 ]
then
    hrs=$(echo "$var" | grep -o "[0-9][0-9]")
fi 
```

在您的代码中，您应该更改

```
var= date | grep -o [0-9][0-9]':'[0-9][0-9]
#   ^                         ^ ^ 
```

为了

```
var=$(date | grep -o '[0-9][0-9]:[0-9][0-9]')
#   ^^               ^                     ^^ 
```

# php - 如何在php中对数组中的目录中的文件进行排序

> ID：15097426
> 
> 赞同：2
> 
> 时间：2013-02-26T19:18:22.053
> 
> 标签：php, file

我有以下代码：

```
$imageDir = "uploads/";
$allowedTypes = array('png', 'jpg', 'jpeg', 'gif');
$dimg = opendir($imageDir);
$images = array();

while ($imgfile = readdir($dimg)) {
    if (in_array(strtolower(substr($imgfile, -3)), $allowedTypes) || (in_array(strtolower(substr($imgfile, -4)), $allowedTypes))) {
        $images[] = $imgfile;

    }
} 
```

基本上我还需要订购 $images 数组中的图像。例如我有 image-1.png, image-2.png, image-23.png, image-3.png ，我希望它们以正确的顺序存储在我的 $images 数组 (1, 2, 3, 23)不是 (1, 2, 23, 3)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:29:35.263

您可以使用[`natsort`](http://www.php.net/manual/en/function.natsort.php)PHP 内置的函数。这会将它们从最小到最大（就数字而言）、字母前的数字等进行排序。如果您需要以相反的顺序对它们进行排序，您可以[`array_reverse`](http://www.php.net/manual/en/function.array-reverse.php)在排序后使用。

这是一个例子：

```
natsort($dirs); // Naturally sort the directories
$dirs = array_reverse($dirs); // Reverse the sorting 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:37:53.130

您需要在[`natsort`](http://php.net/manual/en/function.natsort.php)此处使用，它以人类的方式对字母数字字符串进行排序。

`.`如果您要信任文件扩展名，您还应该在最后一个拆分（但我们不要这样做。您确实应该检查 mime 类型，但这是您可以作为家庭作业做的额外工作）

```
$image_dir = "uploads/";
$allowed_types = array('png', 'jpg', 'jpeg', 'gif');
$dimg = opendir($image_dir); // I vehemently follow my own style guide.
$images = array('png' => [], 'jpg' => [], 'jpeg' => [], 'gif' => []);
// all these people using pure array() when we've had the shorthand since php4...

while ($img_file = readdir($dimg)) {
    $ext = strtolower(end(explode(".", $img_file))); // end() is fun.
    if (in_array($ext, $allowed_types)) {
        $images[$ext][] = $img_file;
    }
}
foreach ($images as &$images_) { // pass-by-reference to change the array itself
    natsort($images_);
}

// $images is now sorted 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:32:13.707

你可以试试这段代码

```
$imageDir = "uploads/";
$allowedTypes = array('png', 'jpg', 'jpeg', 'gif');
$images = scandir($imageDir);

usort($images, function($file1, $file2){
    preg_match('/^image-(\d+)\./', $file1, $num1);
    preg_match('/^image-(\d+)\./', $file2, $num2);
    return $num1 < $num2 ? -1 : 1;
});

echo '<pre>' . print_r($images, 1) . '</pre>'; 
```

# vb.net - Visual Basic .NET 中的自动更新属性

> ID：15097427
> 
> 赞同：1
> 
> 时间：2013-02-26T19:18:23.147
> 
> 标签：vb.net, events, properties, delegates, auto-update

我是一个初学者 VB.NET 程序员，我正在尝试实现一个`Principal`具有两个成员的类，这两个成员是两个不同类的实例。

当我正在学习如何使用事件和委托时，我想实现一个事件（如果这可以解决我的问题）以`objeto2._atributoC21`在分配值时进行`objeto1.atributoC11`更新，然后使用and`Principal.total`的所有成员的总和进行更新。`object1``object2`

这是一个非常粗鲁的代码，但为了使这个示例尽可能清晰：

```
Public Class Principal
    Public objeto1 As ClaseIncluida1
    Public objeto2 As ClaseIncluida2
    Public total As Integer
End Class

Public Class ClaseIncluida1
    Private _atributoC11 As Integer
    Public _atributoC12 As Integer

    Public Property atributoC11 As Integer
        Get
            Return _atributoC11
        End Get
        Set(ByVal value As Integer)
            _atributoC11 = value
        End Set
    End Property
End Class

Public Class ClaseIncluida2
    Public _atributoC21 As Integer
    Public _atributoC22 As Integer
End Class 
```

我知道如何以简单的方式使用事件和委托，但是当我尝试进行上述描述时，我发现自己陷入了死胡同。

也许事件和委托不适合`Principal`上课，但在那种情况下，我该如何实施合适的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:28:24.690

没有自动的内置方法来做这种事情。如果你想这样做，你将需要自己实施管道。执行此操作的标准方法是让“子”类（如果您愿意）实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms133020.aspx)接口。然后，“父”类可以监听他们的`PropertyChanged`事件。当任一子对象引发该事件时，父对象可以适当地处理它。在您的情况下，您希望通过更新`total`. 例如：

```
Public Class Principal
    Public WithEvents objeto1 As ClaseIncluida1
    Public WithEvents objeto2 As ClaseIncluida2
    Public total As Integer

    Private Sub PropertyChangedHandler(sender As Object, e As PropertyChangedEventArgs) Handles objeto1.PropertyChanged, objeto2.PropertyChanged
        total = ...
    End Sub
End Class

Public Class ClaseIncluida1
    Implements INotifyPropertyChanged

    Private _atributoC11 As Integer
    Public _atributoC12 As Integer

    Public Property atributoC11 As Integer
        Get
            Return _atributoC11
        End Get
        Set(ByVal value As Integer)
            _atributoC11 = value
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("atributoC11"))
        End Set
    End Property

    Public Event PropertyChanged(sender As Object, e As PropertyChangedEventArgs) Implements INotifyPropertyChanged.PropertyChanged
End Class

Public Class ClaseIncluida2
    Implements INotifyPropertyChanged

    Public _atributoC21 As Integer
    Public _atributoC22 As Integer

    'Implement raising event when properties change

    Public Event PropertyChanged(sender As Object, e As PropertyChangedEventArgs) Implements INotifyPropertyChanged.PropertyChanged
End Class 
```

# javascript - 使用 Control.Measure 时出错：没有方法“setMap”

> ID：15097430
> 
> 赞同：1
> 
> 时间：2013-02-26T19:18:43.337
> 
> 标签：javascript, openlayers

我有 OpanLayers 2.10，当我尝试添加`OpenLayers.Control.Measure`到地图控件时，我收到此错误：

```
TypeError: Object #<Object> has no method 'setMap' 
```

这是我的代码：

```
map.addControl(new OpenLayers.Control.Measure(
OpenLayers.Handler.Path, {
  persist: true
})); 
```

*注意：我认为我的问题与 相关，`OpenLayers.Handler.Path`因为在调试代码后我发现`CLASS_NAME`对象的`OpenLayers.Handler.Path`.*

我的代码有什么问题？我应该在地图中添加特定的模块/插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:51:42.247

最后我找到了解决方案。该问题与使用自定义构建和将模块添加到主 OpenLayers 文件的优先级有关。

我用`Control.Point`这种`Control.Path`方式：

1.  控制路径
2.  控制点

哪个是不正确和正确的顺序/优先级是：

1.  控制点
2.  控制路径

现在，在更改包含 OpenLayers 模块的顺序后，一切正常。

# javascript - 切换标签时Jquery闪烁

> ID：15097433
> 
> 赞同：0
> 
> 时间：2013-02-26T19:18:51.027
> 
> 标签：javascript, jquery, jquery-ui-tabs, jquery-tabs

我不知道问题出在 jquery 的加载功能还是 jquery 的选项卡（或没有），但我的问题是在 tab2 到 tab1 之间切换时（见下面的代码）选项卡内容被清除然后再次加载，这会导致眨。数据通过 load 函数动态加载到 tab1 (id : the_paragraph) 中的段落元素。从tab1切换到tab2时不会出现问题。

要重现：转到[http://mumka12345.appspot.com/](http://mumka12345.appspot.com/)，将鼠标悬停到 tab2，然后回到 tab1。我已经放置了 2 个警报来强调这个问题。

这是我的主页，有 2 个标签

```
<!DOCTYPE html>
<html>
<head>

<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'></script>
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js'></script>

<script>
    $(document).ready(function() 
    {
        $("#tabs").tabs({
        load: function(event, ui) 
        {
            $(ui.panel).delegate('a', 'click', function(event) 
            {
                $(ui.panel).load(this.href);
                event.preventDefault();
            });
        },
        event: "mouseover"
        });
    });
</script>

</head>

<body style="font-size:62.5%;">

<div id="tabs">
    <ul>
        <li><a href="/tab1"><span>tab1</span></a></li>
        <li><a href="/tab2"><span>tab2</span></a></li>        
    </ul>
</div>
</body>
</html> 
```

服务器在请求“tab1”时返回以下内容：

```
<!DOCTYPE html>
<html>
<head>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'></script>
<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js'></script>

<script>
    $(function() 
    {
        alert('ready');
        $("#the_paragraph").load("/fillParagraph" , function() 
        {
            alert('paragraph loaded');

        });
    });
</script>

</head>'

<body">    
<div id="container">
<p id="the_paragraph">
</p>    

</body>
</html> 
```

当客户端请求“tab2”时，服务器返回字符串“Hello Tab2” 当客户端请求“fillParagraph”时，服务器返回字符串“Dynamic Fill”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:28:40.060

选项卡一的响应触发了 jQuery 和 Jquery UI 的重新加载，这当然没有帮助。

从响应中删除那些脚本引用。

& 尝试使用 console.log 而不是警报。

# typescript - 如何在打字稿中初始化复杂数组

> ID：15097434
> 
> 赞同：0
> 
> 时间：2013-02-26T19:18:59.710
> 
> 标签：typescript

我正在尝试使用如下变量：

`var Storage: { Id: string; Sequence: string[]; } =???`

如果我尝试使用它而不进行初始化，则会引发未定义/空异常。如何初始化上面的？我试过类似的东西：

`var Storage: { Id: string; Sequence: string[]; } = {null;[]};`

但没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:24:37.950

试试这个：

```
var storage: { Id: string; Sequence: string[]; } = { Id: null, Sequence: [] }; 
```

# qooxdoo - 在 setModel 之后没有触发 Qooxdoo changeBubble

> ID：15097445
> 
> 赞同：0
> 
> 时间：2013-02-26T19:19:32.533
> 
> 标签：qooxdoo

在 setModel 之后不会触发 changeBubble 事件。在 createModel(true) 之后它可以工作。是否有另一种方法可以知道表格上的某些内容发生了变化？

```
var page = new qx.ui.mobile.page.NavigationPage();
page.setTitle("Login");
page.addListener("initialize", function() {
    var form = new qx.ui.mobile.form.Form();

    // User name
    var user = new qx.ui.mobile.form.TextField();
    user.setRequired(true);
    form.add(user, "Username");

    var controller = new qx.data.controller.Form(null, form);

    //var model = controller.createModel(true); This works

    var data = {
      "username": "Martin"
    };
    var model = qx.data.marshal.Json.createModel(data);
    controller.setModel(model);

    model.addListener("changeBubble", function (qxEvent) {
      alert("Changed username");
    }, this);

    // Use form renderer
    page.getContent().add(new qx.ui.mobile.form.renderer.Single(form));

},this);

this.getManager().addDetail(page);

page.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:51:18.847

您可以收听名为“changeUsername”的事件，该事件将在用户名更改后立即触发。但是，一旦您的模型中有多个属性，您就必须添加更多侦听器，每个属性一个。在这种情况下，冒泡事件无论如何都没有多大意义，因为您没有任何深层结构可以让冒泡有任何好处。

# asp.net - 如何在 ASP.net 中获得正确的 ID (html) 控件？

> ID：15097452
> 
> 赞同：1
> 
> 时间：2013-02-26T19:19:52.620
> 
> 标签：asp.net

每个人都知道，所有用户控件的 ID 在 asp.net 页面上都会更改。

```
<div id="ID-value" runat="server"></div> 
```

变成：

```
<div id="ct100$ID-value"></div> 
```

我认为这可能会让人头疼，尤其是当您尝试将对象绑定到 javascripts 时。所以。

有没有办法获得正确的 ID，因为它显示在 html 页面中？以便我可以手动将此对象绑定到 java 脚本？（换句话说：我想要“ct100$.....”）谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T19:23:50.480

你可以在javascript中像下面那样做

```
document.getElementById('<%=ID-value.ClientID%>') 
```

或在 jQuery 中

```
$('#<%=(ID-value).ClientID%>') 
```

这更好，因为您可以使用代码隐藏中的实际 id 直接访问元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:22:03.610

如果您使用的是 ASP.net 4.0 或更高版本，您可以尝试将[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)设置为静态 - 这将防止 ASP.net 写入 Id（但不会为包含在绑定多个的其他控件中的控件提供唯一 Id行）。

# grails - grails如何覆盖g消息标签

> ID：15097455
> 
> 赞同：3
> 
> 时间：2013-02-26T19:19:59.620
> 
> 标签：grails, tags, overriding, message, taglib

我是 Grails 的新手，所以你可能会觉得我的问题很幼稚。我想覆盖 g 消息标签。我想在标签的行为中添加新功能，然后从 ValidationTagLib 调用原始实现。就我而言，我可以创建自己的标签库，在其中重新定义标签。G message 是一个闭包，它实际上调用了 ValidationTaglib 中的 messageImpl 方法。我的问题是如何调用此方法？我尝试使用此代码来调用闭包，但我收到的不是消息，而是空格：

```
class MyTagLib {

    static namespace = "g"

    def message = { attrs ->
        //my changes in tag's behaviour
        def validationTagLib = grailsAttributes.applicationContext.getBean('org.codehaus.groovy.grails.plugins.web.taglib.ValidationTagLib')
        validationTagLib.message.call(attrs)
    }
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:07:49.547

您需要扩展 Grails ValidationTagLib

```
import org.codehaus.groovy.grails.plugins.web.taglib.ValidationTagLib

class MyValidationTagLib extends ValidationTagLib {

    /**
     * Resolves a message code for a given error or code from the resource bundle.
     *
     * @emptyTag
     *
     * @attr error The error to resolve the message for. Used for built-in Grails messages.
     * @attr message The object to resolve the message for. Objects must implement org.springframework.context.MessageSourceResolvable.
     * @attr code The code to resolve the message for. Used for custom application messages.
     * @attr args A list of argument values to apply to the message, when code is used.
     * @attr default The default message to output if the error or code cannot be found in messages.properties.
     * @attr encodeAs The name of a codec to apply, i.e. HTML, JavaScript, URL etc
     * @attr locale override locale to use instead of the one detected
     */
    Closure message = { attrs ->
        //my changes in tag's behaviour
        ValidationTagLib validationTagLib = grailsAttributes.applicationContext.getBean('org.codehaus.groovy.grails.plugins.web.taglib.ValidationTagLib')
        validationTagLib.message.call(attrs)
    }
} 
```

# ruby - ruby 升级后：无法构建 gem 原生扩展。（EC2 Ubuntu）

> ID：15097456
> 
> 赞同：1
> 
> 时间：2013-02-26T19:19:59.687
> 
> 标签：ruby, amazon-ec2, gem, ubuntu-12.04, idn

我尝试根据[http://lenni.info/blog/2012/05/installing-ruby-1-9-3-on-ubuntu-12-04](http://lenni.info/blog/2012/05/installing-ruby-1-9-3-on-ubuntu-12-04-precise-pengolin/)`1.8`将我的 ruby​​ 版本从（默认）切换到`1.9.3`（Pangolin 的最新版本） [-精确的企鹅/](http://lenni.info/blog/2012/05/installing-ruby-1-9-3-on-ubuntu-12-04-precise-pengolin/)。我正在使用`apt`.

SO相关问题的其他解决方案涉及`apt-get install ruby1.9.3-dev`但我肯定有。

```
$ sudo gem install idn
Building native extensions.  This could take a while...
ERROR:  Error installing idn:
        ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
checking for main() in -lidn... yes
checking for idna.h... yes
checking for punycode.h... yes
checking for stringprep.h... yes
creating Makefile

make
compiling idn.c
compiling idna.c
idna.c: In function ‘toASCII’:
idna.c:88:37: error: ‘struct RString’ has no member named ‘ptr’
idna.c: In function ‘toUnicode’:
idna.c:128:41: error: ‘struct RString’ has no member named ‘ptr’
make: *** [idna.o] Error 1

Gem files will remain installed in /var/lib/gems/1.9.1/gems/idn-0.0.2 for inspection.
Results logged to /var/lib/gems/1.9.1/gems/idn-0.0.2/ext/gem_make.out 
```

我还检查了我是否已`gcc`安装，并且再次从`apt`.

```
$ ruby -v
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:09:00.193

我可能会放弃这个。我能够安装`punycode4r`gem，这适用于我正在尝试做的事情。

# python - 如何使变量以交互方式依赖于其分配的公式

> ID：15097460
> 
> 赞同：0
> 
> 时间：2013-02-26T19:20:17.843
> 
> 标签：python, variables, storage

在下面的代码中：

```
>>> a=10
>>> b=10
>>> c=10
>>> D=a+b+c
>>> D
30
>>> a=5
>>> D
30 
```

我知道 D 在第 4 行被分配了一个值，因此它将保持该值，除非明确更改（例如`D=33`）。但我想有一个交互`D`的时候会改变`a, b,`或`c`改变。我们将如何处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:28:18.970

```
a=10
b=10
c=10

def D():
    return a+b+c

print D()

a=1

print D() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:24:58.497

我能想到的最简单的解决方案是通过一个类。这是一个适合您的问题的示例，尽管它不是很笼统：

```
class InteractiveSumOf3Variables(object):

    def __init__(self, a, b, c):
        self.a = a
        self.b = b
        self.c = c

    def get_value(self):
        return self.a+self.b+self.c

D = InteractiveSumOf3Variables(10,10,10)

print D.get_value()
>>> 30

D.a = 5

print D.get_value()
>>> 25 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:48:35.047

您可以使用生成器或函数作为命名（如前面的答案所建议）或匿名 lambda

```
>>> from itertools import count
>>> foo_D = lambda : a + b + c #Lambda
>>> gen_D = (a+b+c for _ in count()) #generator expression
>>> a = 1
>>> b = 2
>>> c = 3
>>> next(gen_D)
6
>>> c = 4
>>> next(gen_D)
7
>>> foo_D()
7
>>> c = 3
>>> foo_D()
6 
```

# java - 为什么同一个循环使用了两次&为什么数组的值减少了？

> ID：15097461
> 
> 赞同：3
> 
> 时间：2013-02-26T19:20:23.383
> 
> 标签：java

我正在关注官方的 java 教程，我想知道为什么在两个类中都重复了 for 循环。

```
public class Deck {

    public static int numSuits = 4;
    public static int numRanks = 13;
    public static int numCards = numSuits * numRanks;

    private Card[][] cards;

    public Deck() {
        cards = new Card[numSuits][numRanks];
        for (int suit = Card.DIAMONDS; suit <= Card.SPADES; suit++) {
            for (int rank = Card.ACE; rank <= Card.KING; rank++) {
                //Don't understand why rank is decreased by one
                cards[suit-1][rank-1] = new Card(rank, suit);
            }
        }
    }

    public Card getCard(int suit, int rank) {
        return cards[suit-1][rank-1];
    }
}

      public class DisplayDeck {
    public static void main(String[] args) {
        Deck deck = new Deck();
        for (int suit = Card.DIAMONDS; suit <= Card.SPADES; suit++) {
            for (int rank = Card.ACE; rank <= Card.KING; rank++) {
                Card card = deck.getCard(suit, rank);
                System.out.format("%s of %s%n",
                    card.rankToString(card.getRank()),
                    card.suitToString(card.getSuit()));
            }
        }
    }
} 
```

卡类的代码也可以在[这里](http://docs.oracle.com/javase/tutorial/java/javaOO/examples/Card.java)找到也有人能告诉我为什么甲板构造函数中的数组值减一吗？因为初始值是一，这不会导致错误吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:25:19.613

循环重复两次，因为它们的主体不同：

*   构造函数内的循环`Deck()`初始化卡片
*   里面的循环`main`打印卡片。

这两种方法以相同的顺序执行，这就是循环的标题相同的原因。

数字调整为 1，因为在 Java（以及 C、C++、C# 和许多其他语言）中，数组索引是从零开始编号的，而不是从一开始编号的。另一方面，卡片程序中的常量是从一开始的，因此您必须从它们中减去一个以使数字与数组的索引方式对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:25:29.430

我不知道您在说哪对循环，但我会尽力解决。

第一个循环组

```
 for (int suit = Card.DIAMONDS; suit <= Card.SPADES; suit++) {
        for (int rank = Card.ACE; rank <= Card.KING; rank++) {
            //Don't understand why rank is decreased by one
            cards[suit-1][rank-1] = new Card(rank, suit);
        }
    } 
```

构建甲板。外层循环遍历花色，内层循环遍历值。结果是完整的 52 张牌。每套13个值。

* * *

第二个循环组：

```
 for (int suit = Card.DIAMONDS; suit <= Card.SPADES; suit++) {
        for (int rank = Card.ACE; rank <= Card.KING; rank++) {
            Card card = deck.getCard(suit, rank);
            System.out.format("%s of %s%n",
                card.rankToString(card.getRank()),
                card.suitToString(card.getSuit()));
        }
    } 
```

以与第一个相同的方式迭代。适合外循环，值内循环。但这一次，它实际上并没有构建牌组，而是打印牌组中内容的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:33:59.990

在这两种情况下，原因都是因为您有一个二维数组。外阵是花色，内阵是军衔。使用数组，您必须使用不同的计数变量来遍历它们。例如，您希望外循环运行 4 次，但您希望内循环运行 13 次。

# javascript - LatLng 是否在多边形内

> ID：15097464
> 
> 赞同：7
> 
> 时间：2013-02-26T19:20:42.040
> 
> 标签：javascript, google-maps-api-3

我在谷歌地图上设置了一个带有一些 latLng 的典型多边形：

```
var bermudaTriangle = new google.maps.Polygon({
  paths: [
    new google.maps.LatLng(25.774252, -80.190262),
    new google.maps.LatLng(18.466465, -66.118292),
    new google.maps.LatLng(32.321384, -64.75737),
  ]
});
bermudaTriangle.setMap(map); 
```

这些是谷歌文档中的百慕大三角坐标。我也有一些随机坐标，saaay：

```
var coord1 = new new google.maps.LatLng(26.194876675795218,-69.8291015625)
var coord2 = new new google.maps.LatLng(33.194876675795218,-63.8291015625) 
```

第一个恰好在三角形内部，第二个恰好在三角形外部。这些只是示例，我需要的是一种方法来找出提供的坐标（不仅仅是这两个坐标中的一个，任何坐标）是否在多边形内部或外部（同样，并不总是百慕大三角形，甚至不是三角形- 多边形可以有任意数量的 latLng)。我查看了 Google Maps API 文档，但找不到任何可以回答这个问题的函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T19:29:18.367

使用[containsLocation(point:LatLng, polygon:Polygon)](https://developers.google.com/maps/documentation/javascript/reference#poly)方法。

> containsLocation(point:LatLng, polygon:Polygon) boolean 计算给定点是否位于指定多边形内。

[概念证明小提琴](http://jsfiddle.net/hdsgr1pd/)

**代码片段：**

```
function checkInPolygon(marker, polygon) {
  var infowindow = new google.maps.InfoWindow();
  var html = "";
  if (google.maps.geometry.poly.containsLocation(marker.getPosition(), polygon)) {
    html = "inside polygon";
  } else {
    html = "outside polygon";
  }
  infowindow.setContent(html);
  infowindow.open(map, marker);
}

var map;
var coord1 = new google.maps.LatLng(26.194876675795218, -69.8291015625);
var coord2 = new google.maps.LatLng(33.194876675795218, -63.8291015625);

function initialize() {
  var map = new google.maps.Map(
    document.getElementById("map_canvas"), {
      center: new google.maps.LatLng(37.4419, -122.1419),
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
  bermudaTriangle.setMap(map);
  var bounds = new google.maps.LatLngBounds();
  for (var i = 0; i < bermudaTriangle.getPath().getLength(); i++) {
    bounds.extend(bermudaTriangle.getPath().getAt(i));
  }
  bounds.extend(coord1);
  bounds.extend(coord2);
  var marker1 = new google.maps.Marker({
    map: map,
    position: coord1
  });
  var marker2 = new google.maps.Marker({
    map: map,
    position: coord2,
  });
  map.setCenter(bounds.getCenter());
  map.setZoom(3);
  checkInPolygon(marker1, bermudaTriangle);
  checkInPolygon(marker2, bermudaTriangle);
}
google.maps.event.addDomListener(window, "load", initialize);

var bermudaTriangle = new google.maps.Polygon({
  paths: [
    new google.maps.LatLng(25.774252, -80.190262),
    new google.maps.LatLng(18.466465, -66.118292),
    new google.maps.LatLng(32.321384, -64.75737),
  ]
});
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas"></div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:25:55.583

如果 Google Maps API 没有专门针对此的任何方法，那么您需要找到或编写自己的方法。这是计算机图形学中的一个常见问题，如果您在 Google 上搜索“多边形命中测试”，您会发现大量信息。 [这个 SO 答案](https://stackoverflow.com/questions/217578/point-in-polygon-aka-hit-test)看起来相当全面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T19:38:01.730

在 V3 API 中有 google.maps.geometry.poly.containsLocation 静态方法。

请参阅[https://developers.google.com/maps/documentation/javascript/reference#poly](https://developers.google.com/maps/documentation/javascript/reference#poly)

所以你只需要传递多边形和你想要检查它是否在多边形内的点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T19:26:02.320

看看 wikipedia [Point in polygon page](http://en.wikipedia.org/wiki/Point_in_polygon)。有几种方法可以确定该点是否在多边形内。其中之一是光线投射算法。[这个页面](http://hammerspace.co.uk/2011/10/google-maps-api-points-in-polygons)有一些关于如何在谷歌地图中实现的例子。

# sql - 根据另一列中的日期将列中的日期更改 30

> ID：15097465
> 
> 赞同：3
> 
> 时间：2013-02-26T19:20:43.987
> 
> 标签：sql, sql-server, sql-server-2005, date

我有 1 个日期列，我想根据另一列中的日期在数据库中进行更改。这是我的带有示例输出的列

```
dtexpires    dtcreated
1/1/13         1/15/13
1/1/13         1/16/13
1/1/13         2/1/13 
```

我想将“dtexpires”更改为“dtcreated”加上 30 天。

表名是“客户”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:22:13.477

您需要使用`DATEADD`：

```
UPDATE Customers
SET dtExpires = DATEADD(dd,30,dtCreated) 
```

[http://msdn.microsoft.com/en-us/library/ms186819.aspx](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:22:35.573

```
UPDATE customers
SET dtexpires = dateadd(d,30,dtcreated) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T19:23:01.517

您的示例数据看起来像您将字符串存储为日期。假设`dtcreated is a date type`字段

```
update customers
set dtexpires = dateadd(day,30, dtcreated) 
```

# delphi - 颜色检测和分析

> ID：15097466
> 
> 赞同：-1
> 
> 时间：2013-02-26T19:20:46.153
> 
> 标签：delphi, image-processing, delphi-xe3

我正在尝试分析 .Jpeg 图像 600x600，但这样做我希望它告诉我 RED 值高于 230 和 Green 值高于 200 的位置。现在我正在进行这个项目，但迭代时间太长整个图像，并得到像素颜色（`Color= + inttostr(RGB)`）的奇怪值。谁能帮我一把？

```
type
  PRGBTripleArray = ^TRGBTripleArray;
  TRGBTripleArray = array[0..4095] of TRGBTriple;

procedure TForm2.Button1Click(Sender: TObject);
var
  RGB: Byte;
  X, Y: Integer;
  R, G, B: Byte;
  Bitmap1: TBitmap;
  ColorRGB: LongInt;
  Pixels: PRGBTripleArray;
begin
  Memo1.Lines.Clear;
  Bitmap1 := TBitmap.Create;
  try
    Bitmap1.Assign(Image1.Picture.Graphic);

    for Y := 0 to Bitmap1.Height - 1 do
    begin
      Pixels:= Bitmap1.ScanLine[Y];

      Memo1.Lines.Add('======================');
      Memo1.Lines.Add('Line # ' + IntToStr(Y));
      Memo1.Lines.Add('======================');

      for X := 0 to Bitmap1.Width - 1 do
      begin
        ColorRGB := ColorToRGB(Bitmap1.Canvas.Pixels[x, y]);
        R := GetRValue(ColorRGB);
        G := GetGValue(ColorRGB);
        B := GetBValue(ColorRGB);
        RGB:= R*G*B;

        Memo1.Lines.Add(
                'line='    + IntToStr(Y)
              + ' row='    + IntToStr(X)
              + ' Colour=' + IntToStr(RGB)
              + ' Red='    + IntToStr (R) // red
              + ' Green='  + IntToStr (G) // blue
              + ' Blue='   + IntToStr (B) // green
        )
      end;
    end;
  finally
    Bitmap1.free;
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:43:54.710

If you want to log every pixel of your bitmap, which has red channel value greater than 230 and green value greater than 200, you might use the following. Don't forget to use `BeginUpdate`, `EndUpdate` pair for `TMemo.Lines` to lock potential frequent updating.

Anyway, you are still mixing two bitmap pixel access techniques together. Do not use `Canvas.Pixels` for large pixel array manipulation; it's very inefficient. Use only `ScanLine` for that:

```
type
  PRGBTripleArray = ^TRGBTripleArray;
  TRGBTripleArray = array[0..4095] of TRGBTriple;

procedure TForm1.Button1Click(Sender: TObject);
var
  C: TColor;
  X: Integer;
  Y: Integer;
  Bitmap: TBitmap;
  Pixels: PRGBTripleArray;
begin
  Bitmap := TBitmap.Create;
  try
    Bitmap.Assign(Image1.Picture.Graphic);

    Memo1.Lines.BeginUpdate;
    try
      for Y := 0 to Bitmap.Height - 1 do
      begin
        Pixels := Bitmap.ScanLine[Y];
        for X := 0 to Bitmap.Width - 1 do
        begin
          if (Pixels[X].rgbtRed > 230) and (Pixels[X].rgbtGreen > 200) then
          begin
            C := RGB(
              Pixels[X].rgbtRed,
              Pixels[X].rgbtGreen,
              Pixels[X].rgbtBlue
            );
            Memo1.Lines.Add(
              '===============' + sLineBreak +
              'Pixel[' + IntToStr(X) + '; ' + IntToStr(Y) + ']' + sLineBreak +
              'Color: ' + ColorToString(C) + sLineBreak +
              'Red channel: ' + IntToStr(Pixels[X].rgbtRed) + sLineBreak +
              'Green channel: ' + IntToStr(Pixels[X].rgbtGreen) + sLineBreak +
              'Blue channel: ' + IntToStr(Pixels[X].rgbtBlue)
            );
          end;
        end;
      end;
    finally
      Memo1.Lines.EndUpdate;
    end;
  finally
    Bitmap.Free;
  end;
end; 
```

# html - Chrome 会自动隐藏垂直滚动条

> ID：15097478
> 
> 赞同：9
> 
> 时间：2013-02-26T19:21:56.080
> 
> 标签：html, css, google-chrome, overflow

我有个问题。

基本上，我有 3 个 div，一个主容器和两个 div，这将是主容器宽度的一半，如下所示：

```
<div id="main">
    <div id="col1"></div>
    <div id="cold2"></div>
</div>

#col1 {
  overflow-y: auto;
  width: 48%
}
#main {
  width: 100%
}
#col2 {
  width: 48%
} 
```

看来，问题是每次我动态地将内容添加到 Col1 时，我期待一个滚动条，chrome 创建它，但隐藏它。所以我必须去元素并开始通过滚轮滚动才能看到它。有没有办法超越它？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-04-04T14:34:09.740

这是 Chrome 遵循的 Mac 设置。转到“系统偏好设置>常规”并将“显示滚动条”设置更改为“始终”

# javascript - Knockout.js - 停止在 foreach 循环中重新渲染元素

> ID：15097481
> 
> 赞同：2
> 
> 时间：2013-02-26T19:22:02.373
> 
> 标签：javascript, knockout.js

在我的 viewModel 上，我有一个名为“bays”的可观察数组，其中包含一个或多个“bay”对象。然后每个“bay”对象包含一个名为“products”的可观察数组，该数组可以包含“product”对象。我的标记看起来像：

```
<div data-bind="foreach: bays">
    <div class="bay" data-bind="foreach: products">
        <div class="product">
        <!-- Product innards -->
        </div>
    </div>
</div> 
```

如果产品对象从一个托架移动到另一个托架，则产品元素以及其中的所有内容似乎都被破坏然后重新创建，如以下 jfiddle 所示：http: [//jsfiddle.net/mXyzs/20 /](http://jsfiddle.net/mXyzs/20/)

由于我的应用程序可以一次在托架之间移动数百个产品，并且必须重新创建它们，这会导致性能问题。有什么方法可以让淘汰赛重新使用现有的产品 html，因为支持它们的对象没有改变，而不是破坏产品元素并重新创建它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:05:44.207

从 Knockout 版本 2.2.0 开始，`foreach`绑定将检测移动的项目，并且不会为这些项目重新渲染 UI。但是在您的情况下，您将项目从一个数组移动到另一个数组，因此此优化不适用（因为它仅适用于单个`foreach`绑定）。

为了利用`foreach`的能力，我们可以将结构展平为单个数组。

```
var result = [];
ko.utils.arrayForEach(viewModel.bays(), function(bay) {
    ko.utils.arrayForEach(bay.products(), function(product) {
        product.bay(bay);
        result.push(product);
    });
}); 
```

如果我们将 a`computed`用于展平列表，我们可以在单个`foreach`绑定中引用它。

```
<div data-bind="foreach: flattenedProducts">
    <div class="product">
    <!-- Product innards -->
    </div>
</div> 
```

使用这种方法，虽然产品会按bay排序，但所有产品`div`都是兄弟。因此，您将无法拥有`div`每个海湾。

示例：http: [//jsfiddle.net/mbest/3ZUxZ/](http://jsfiddle.net/mbest/3ZUxZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:49:12.327

从外观上看，产品元素并没有被重新创建。我向您的产品对象添加了一个 created 属性

```
var product = function (data) {
    this.name = ko.observable(data.name);  
    this.created = new Date();
}; 
```

单击“移至托架”按钮时，创建日期似乎没有改变。它只是被添加到另一个可观察数组中并且该元素被绘制。

一件事我不会经历。如果您正在执行此推送到可观察数组或从循环中的可观察数组中弹出或其他操作，则成本很高，并且您会看到性能问题。

Ryan Neimeyer 在这里谈到了这个[http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)

希望有帮助！干杯! 苏杰

# android - Android ListView：应用程序没有关闭游标或数据库对象

> ID：15097488
> 
> 赞同：1
> 
> 时间：2013-02-26T19:22:07.827
> 
> 标签：android, android-listview, cursor, android-sqlite, simplecursoradapter

我的`listview`活动不会`sName`在我的列表视图中显示特定的行（）`UI`。我可以将项目添加到我的`sqlite`数据库，但是在我的数据库更新时尝试让我`listview`刷新后，我的列表视图是空白的。

当数据为`added\updated\removed`. 我确实收到 logcat 错误，说应用程序启动时游标或数据库未关闭。“`android.database.sqlite.DatabaseObjectNotClosedException:`应用程序没有关闭这里打开的游标或数据库对象”请指教。logcat 和代码如下。

活动：

```
 public class LoginList extends Activity implements OnClickListener,    OnItemClickListener {

  private ListView loginList;
  private Button webLogin;

  private ListAdapter loginListAdapter;

  private ArrayList<LoginDetails> loginArrayList;

  List<String> arrayList = new ArrayList<String>();

 @Override 
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);

 loginListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
 setContentView(R.layout.login_listview);

 arrayList = populateList();

 loginList = (ListView)
 findViewById(R.id.loginlist);
 loginList.setOnItemClickListener(this);

 webLogin = (Button)
 findViewById(R.id.button3);
 webLogin.setOnClickListener(this);

 }

@Override
public void onClick (View v) {
Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
startActivity(webLoginIntent);

}

public List<String> populateList(){

ArrayList<LoginDetails> loginArrayList = new ArrayList<LoginDetails>();
List<String> webNameList = new ArrayList<String>();

dataStore openHelperClass = new dataStore (this);

SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null,  null, null, dataStore.COLUMN_NAME_SITE, null);

startManagingCursor(cursor);

while (cursor.moveToNext()){
String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));
String lNotes = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_NOTES));

LoginDetails lpDetails = new LoginDetails();

  lpDetails.setsName(sName);
  lpDetails.setwUrl(wUrl);
  lpDetails.setuName(uName);
  lpDetails.setpWord(pWord);
  lpDetails.setlNotes(lNotes);

  loginArrayList.add(lpDetails);
  webNameList.add(sName);
 }

 cursor.close();
 sqliteDatabase.close();
 return webNameList;
 }

@Override
protected void onResume() {
super.onResume();

arrayList.clear();

arrayList = populateList();

SimpleCursorAdapter loginListAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, null, null, null);
loginListAdapter.notifyDataSetChanged();

}

@Override
 public void onItemClick(AdapterView<?> arg0 , View arg1, int arg2, long arg3) {
 Toast.makeText(getApplicationContext(), "Selected ID :" + arg2,     Toast.LENGTH_SHORT).show();

 Intent updateDeleteLoginInfo = new Intent (this, UpdateDeleteLoginList.class);

 LoginDetails clickedObject = loginArrayList.get(arg2);

  Bundle loginBundle = new Bundle();
  loginBundle.putString("clickedWebSite",clickedObject.getsName());
  loginBundle.putString("clickedWebAddress",clickedObject.getwUrl());
  loginBundle.putString("clickedUserName",clickedObject.getuName());
  loginBundle.putString("clickedPassWord",clickedObject.getpWord());
  loginBundle.putString("clickedNotes",clickedObject.getlNotes());

  updateDeleteLoginInfo.putExtras(loginBundle);

  startActivityForResult(updateDeleteLoginInfo, 0);   
   }
  } 
```

修订活动：

```
 public class LoginList extends FragmentActivity implements OnClickListener, OnItemClickListener, LoaderManager.LoaderCallbacks<Cursor> {

 private ListView loginList;
 private Button webLogin;
 private CursorAdapter adapter;
 private static final int LOADER_ID = 0x02;

 private ArrayList<LoginDetails> loginArrayList;

@Override 
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

setContentView(R.layout.login_listview);
getSupportLoaderManager().initLoader(LOADER_ID, null, this);

loginList = (ListView)
 findViewById(R.id.loginlist);
loginList.setOnItemClickListener(this);

webLogin = (Button)
 findViewById(R.id.button3);
webLogin.setOnClickListener(this);

loginArrayList = new ArrayList<LoginDetails>();
adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, null,
new String[] { dataStore.COLUMN_NAME_SITE}, new int[]{R.id.textView1});
loginList.setAdapter(adapter);
 }

  public Loader<Cursor> onCreateLoader(int i, Bundle bundle) {
return new CursorLoader(this, Uri.parse(null), null, null, null, null);
   }
  public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor) {
adapter.swapCursor(cursor);
}
  public void onLoaderReset(Loader<Cursor> cursorLoader) {
adapter.swapCursor(null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:09:30.303

好像您在查询或编辑后忘记在光标或数据库上调用 close() 。

```
SQLiteDatabase db;//your database
//do your work...
//If you query in your database:
Cursor c=db.rawQuery(...);//or something like that
//fetch data from cursor
c.close();
db.close(); 
```

# ios6 - 如何在 uiscolview 中包含容器视图？

> ID：15097489
> 
> 赞同：0
> 
> 时间：2013-02-26T19:22:09.763
> 
> 标签：ios6, uiscrollview, xcode4.5

我在 xcode 中有一个项目，我必须在 UIScrollView 中包含一个容器视图（iOS 6）。我该怎么做？如果我将容器视图放在 UIScrollView 中，它什么也不做（它不会显示滚动条或其他东西）。如果我将 UIImageView 放入其中，它也不起作用。我的代码是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [Scroller setScrollEnabled:YES];
    [Scroller setContentSize:CGSizeMake(1024, 2304)];
// Do any additional setup after loading the view, typically from a nib.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:36:48.387

关闭自动布局，这将有所帮助

# php - mysql_num_rows() 期望参数 1 是资源但它不是假的 (??)

> ID：15097490
> 
> 赞同：-1
> 
> 时间：2013-02-26T19:22:11.717
> 
> 标签：php, mysql

我知道每天都会有人问这个问题，但我的资源**不是**假的。

```
$query = "SELECT ccnumber,CUID FROM response WHERE CUID <" . $_POST['CUID'] . " ORDER By CUID DESC LIMIT 1";
$result_prev = mysql_query( $query );

if( $result_prev === false )
{
    print 'failed: '.$result_prev;
}

if( mysql_num_rows( $result_prev ) > 0 )
{ 
```

当此代码在网站中运行时，它**不会**打印出“失败：”，当我打印 $result_prev 时，它会显示资源 ID #25。

但我似乎仍然有问题。错误日志有：

PHP 警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在

当我进入 myPHP 并运行相同的查询时，我得到了一个结果。

我有点不知道如何解决这个问题。这在同一页面上发生了 3 次。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:25:48.537

像这样写

```
$query = "SELECT ccnumber,CUID FROM response WHERE CUID <" . $_POST['CUID'] . " ORDER By CUID DESC LIMIT 1";
$result_prev = mysql_query( $query ) or die( 'Error is: ' . mysql_error() );

if( mysql_num_rows( $result_prev ) > 0 )
{
    while($row = mysql_fetch_assoc($result_prev))
    {
        echo 'ccnumber:' . $row['ccnumber'] . '<br>';
        echo 'CUID:' . $row['CUID'] . '<br><br>';
        echo '------------------------<br>';
    }
} 
```

# java - java速率限制逻辑

> ID：15097494
> 
> 赞同：1
> 
> 时间：2013-02-26T19:22:22.510
> 
> 标签：java, multithreading, performance, rate-limiting, ratelimit

我正在寻找算法来设计Java中的多线程应用程序，其中每个线程将数据写入数据库。我想控制每秒写入 db 的记录数。

应用程序获取 RPS（每秒记录数）参数并大约生成那么多负载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:31:44.250

如果您可以使用外部库，番石榴有一个[RateLimiter](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html)类，它可能会满足您的要求：

> 速率限制器通常用于限制访问某些物理或逻辑资源的速率。这与限制并发访问次数而不是速率的信号量形成对比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:28:21.350

您可以创建一个`BlockingQueue`许可对象并拥有一个额外的帮助线程，该线程每秒一次将 RPS 数量的附加许可添加到队列中。写入线程在队列上阻塞并且在它们成功地从队列顶部弹出许可之前不写入。

# xml - 如何在 XSLT 1.0 中获取当前日期？

> ID：15097495
> 
> 赞同：3
> 
> 时间：2013-02-26T19:22:25.613
> 
> 标签：xml, date, xslt, xslt-1.0

我在网上找到了一些参考资料，但没有适用于 vanilla XSLT 1.0。

有没有一种合理的方法没有扩展方法/参数来获取 XSLT 中的当前年份？

编辑：

对于其他人的参考，我使用 XSL Arguments 来实现这一点。.NET 并没有真正支持 XSLT 2.0，所以我最终使用了参数。

```
xslArg.AddParam("CurrentYear", "", DateTime.Now.Year);

<xsl:param name="CurrentYear"/>

<xsl:value-of select="$CurrentYear"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:24:09.457

不，在 XSLT 1.0 中没有获取当前日期时间的标准方法。

你需要某种扩展。

# r - 基于R中不同数据框的值的子集

> ID：15097497
> 
> 赞同：5
> 
> 时间：2013-02-26T19:22:32.777
> 
> 标签：r, dataframe

如果行中的每个值都大于不同数据框中的相应行，我想对数据进行子集化。我还需要跳过一些顶行。这些以前的问题对我没有帮助，但它是相关的：

[根据另一个数据框的内容对数据框进行子集化](https://stackoverflow.com/questions/3452205/subsetting-a-data-frame-based-on-contents-of-another-data-frame)

[使用来自不同数据框的信息的子集数据 [r]](https://stackoverflow.com/questions/8191026/subset-data-using-information-from-a-different-data-frame-r)

```
> A
     name1 name2
cond   trt  ctrl
hour     0     3
A        1     1
B       10     1
C        1     1
D        1     1
E       10    10
> B
     name1 name2
cond   trt  ctrl
hour     0     3
A        1     1
B        1    10
C        1     1
D        1     1
E        1     1 
```

我要这个。只有 A 中的所有值都大于 B 的行：

```
 name1 name2
cond   trt  ctrl
hour     0     3
E       10    10 
```

我试过这 3 行：

```
subset(A, TRUE, select=(A[3:7,] > B[3:7,]))
subset(A, A > B)
A[A[3:7,] > B[3:7,]] 
```

非常感谢。下面是生成数据的代码：

```
A <- structure(list(name1 = c("trt", "0", "1", "10", "1", "1", "10"
), name2 = c("ctrl", "3", "1", "1", "1", "1", "10")), .Names = c("name1", 
"name2"), row.names = c("cond", "hour", "A", "B", "C", "D", "E"
), class = "data.frame")
B <- structure(list(name1 = c("trt", "0", "1", "1", "1", "1", "1"), 
    name2 = c("ctrl", "3", "1", "10", "1", "1", "1")), .Names = c("name1", 
"name2"), row.names = c("cond", "hour", "A", "B", "C", "D", "E"
), class = "data.frame") 
```

############# 2/28/13 提出后续问题

[基于R中不同数据框的调整值进行子集时出错](https://stackoverflow.com/questions/15147336/error-when-subsetting-based-on-adjusted-values-of-different-data-frame-in-r)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T19:32:21.473

```
N <- nrow(A)
cond <- sapply(3:N, function(i) sum(A[i,] > B[i,])==2)
rbind(A[1:2,], subset(A[3:N,], cond)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:50:49.750

我认为最好使用 SQL 进行这种表间过滤。它干净易读（您保留规则逻辑）。

```
 library(sqldf)
sqldf('SELECT DISTINCT A.*
        FROM A,B
        WHERE A.name1   > B.name1
        AND    A.name2  > B.name2')
  name1 name2
1   trt  ctrl
2    10    10 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T19:56:23.257

必要的data.table解决方案：

```
library(data.table)

# just to preserve the order, non-alphabetically
idsA <- factor(rownames(A), levels=rownames(A))
idsB <- factor(rownames(B), levels=rownames(B))

# convert to data.table with id
ADT <- data.table(id=idsA, A, key="id")
BDT <- data.table(id=idsB, B, key="id")

# filter as needed
ADT[BDT][name1 > name1.1 & name2 > name2.1, list(id, name1, name2)] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T19:41:33.670

If I rename your matrices `amat` and `bmat`, then

```
amat[which(sapply(1:nrows(amat),function(x) prod(amat[x,]>bmat[x,]))==1),]
[1] 10 10 
```

And you can paste the 'hours' row back on if desired.

# matlab - 如何在 Matlab 中开发用于分析实时数据的 FIFO 循环缓冲区？

> ID：15097499
> 
> 赞同：1
> 
> 时间：2013-02-26T19:22:34.117
> 
> 标签：matlab, buffer

我正在使用 Polhemus Liberty 系统进行实时运动跟踪的项目。最近，我在 Matlab 的 GUIDE 中开发了一个 GUI，以 240Hz 的采样频率获取附加传感器的位置和方向。此外，我添加了一个人工神经网络 (ANN) 来实时对运动学参数进行一些预测。但是，在获得 ANN 的预测之后，我应该对多维数组进行一些数据分析。由于高维，在没有实时标准的情况下，这种特定的数据分析只能通过添加多个嵌套循环来完成。问题是，如果我在方法中添加 FOR 循环，那么实时（或接近实时）标准肯定会受到损害。为了避免添加嵌套的 FOR 循环，我想我可以创建一个缓冲区（FIFO 循环缓冲区）来临时存储预测数据并分析数据。我在以下链接下找到了一个智能解决方案：

[为连续测量创建缓冲矩阵](https://stackoverflow.com/questions/821637/create-a-buffer-matrix-for-continuous-measurements)

1) 缓冲区初始化：

```
nBuffer = 10;  % You can set this to whatever number of time points
           %   you want to store data for
nSamples = 2;  % You can set this to the number of data values you
           %   need for each point in time
centroidBuffer = zeros(nSamples,nBuffer);  % Initialize the buffer to zeroes 
```

2）连续循环，缓冲区使用：

```
keepLooping = true;
processTime = 0;
while keepLooping, 
% Capture your image
% Compute the centroid data and place it in the vector "centroidData"
centroidBuffer = [centroidBuffer(:,2:end) centroidData(:)];
processTime = processTime+1;
if (processTime == nBuffer),
 % Do whatever processing you want to do on centroidBuffer
processTime = 0;
end
% Choose to set keepLooping to false, if you want
end 
```

据我了解，上述解决方案是一种“1 帧/秒”的方法。因此，在捕获图像并定义其“质心数据”后，缓冲区机制中只会删除或扩展一列。在这种特殊情况下，这非常有效。如果采样率不是 1 个样本/秒而是 240Hz，会发生什么情况。给定一个无限的while循环，在不改变缓冲区参数的情况下，数据丢失将增加。

有人知道如何修改链接的解决方案或创建一个全新的解决方案吗？在缓冲区中，我应该有 100 个样本要分析。

让我们对此进行一些头脑风暴！我愿意有一些聪明的想法。在此先感谢，罗布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-21T15:19:24.613

```
centroidBuffer = [centroidBuffer(:,2:end) centroidData(:)]; 
```

这是一个不错且简单的解决方案，但速度很慢。每次添加新向量时，matlab 都必须复制除第一个条目之外的整个旧数据。如果您考虑实时，这不是一个好主意。

我刚刚将我的快速循环缓冲区解决方案上传到

[http://www.mathworks.com/matlabcentral/fileexchange/47025-circvbuf-m](http://www.mathworks.com/matlabcentral/fileexchange/47025-circvbuf-m)

这个循环缓冲区的主要思想是在程序中使用缓冲区时，性能恒定且快速，并且避免了复制操作：

```
% create a circular vector buffer
    bufferSz = 1000;
    vectorLen= 7;
    cvbuf = circVBuf(int64(bufferSz),int64(vectorLen));

% fill buffer with 99 vectors
    vecs = zeros(99,vectorLen,'double');
    cvbuf.append(vecs);

% loop over lastly appended vectors of the circVBuf:
    new = cvbuf.new;
    lst = cvbuf.lst;
    for ix=new:lst
       vec(:) = cvbuf.raw(:,ix);
    end

% or direct array operation on lastly appended vectors in the buffer (no copy => fast)
    new = cvbuf.new;
    lst = cvbuf.lst;
    mean = mean(cvbuf.raw(3:7,new:lst)); 
```

查看屏幕截图，如果缓冲区很大，则此循环缓冲区具有优势，但与简单的复制缓冲区相比，每次追加的数据大小很小，因为 circVBuf 的性能不依赖于缓冲区大小。

双缓冲根据在任何情况下要追加的数据来保证追加的预测时间。将来，本课程将为您提供双缓冲是或否的选择 - 如果您不需要保证时间，事情会加速。 ![在此处输入图像描述](../Images/2367192107129fdccbd247c2709711ea.png)

# c - Can Uncrustify be prevented from modifying certain sections of code?

> ID：15097501
> 
> 赞同：16
> 
> 时间：2013-02-26T19:22:35.533
> 
> 标签：c, code-formatting, uncrustify

Uncrustify is great, and does an excellent job of tidying code. However, I have some C code within a file that I don't want Uncrustify to change. Is there any way I can prevent Uncrustify from touching this, maybe by putting specific tags in comments around the code or something?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-18T08:05:00.967

```
/* *INDENT-OFF* */
int i = 0; // No uncrustify action here
/* *INDENT-ON* */ 
```

# c# - 如何让 Linq 查询根据方法签名中的参数顺序对结果进行排序

> ID：15097505
> 
> 赞同：1
> 
> 时间：2013-02-26T19:22:43.100
> 
> 标签：c#, linq, linq-to-sql

我的 Web 应用程序中有一个 linq to sql 查询。我刚刚意识到它是根据员工编号对结果进行升序排序。有没有办法让它按照提供的顺序返回结果？

我的代码如下：

```
 public static queryClass[] GetEmpData(int empID1, int empID2, int empID3, int empID4, int empID5, int empID6, int empID7, int empID8, int empID9, int empID10)
    {

        using(var context = new EmpInfoDataContext())
        {
            var query = from e in context.EmployeeMasters
                        join j in context.JobClasses on e.JobClass equals j.JobClass
                        where e.EmployeeNo == empID1 || e.EmployeeNo == empID2 || e.EmployeeNo == empID3 || e.EmployeeNo == empID4 || e.EmployeeNo == empID5 || e.EmployeeNo == empID6 || e.EmployeeNo == empID7 || e.EmployeeNo == empID8 || e.EmployeeNo == empID9 || e.EmployeeNo == empID10
                        select new queryClass{firstName = e.FirsName, lastName = e.LastName, employeeNo = e.EmployeeNo, department = j.Department};
            return query.ToArray();
        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:27:10.360

尝试执行以下操作：

```
var employeeIds = new List<int> { empID1, empID2, empID3, empID4, empID5, empID6, empID7, empID8, empID9, empID10 };

var query = from e in context.EmployeeMasters
            join j in context.JobClasses on e.JobClass equals j.JobClass
            where employeeIds.Contains(e.EmployeeNo)
            select new queryClass {
              firstName = e.FirsName, 
              lastName = e.LastName, 
              employeeNo = e.EmployeeNo, 
              department = j.Department,
              orderNum = e.EmployeeNo == empID1 ? 1 :
                         e.EmployeeNo == empID2 ? 2 :
                         e.EmployeeNo == empID3 ? 3 :
                         e.EmployeeNo == empID4 ? 4 :
                         e.EmployeeNo == empID5 ? 5 :
                         e.EmployeeNo == empID6 ? 6 :
                         e.EmployeeNo == empID7 ? 7 :
                         e.EmployeeNo == empID8 ? 8 :
                         e.EmployeeNo == empID9 ? 9 :
                         e.EmployeeNo == empID10 ? 10 : 11
            };
return query.OrderBy(x => x.orderNum).ToArray(); 
```

添加将根据参数中值的顺序设置的自定义顺序属性。有点难看，但根据您对此功能的签名满足要求（我还添加了`employeeIds` `List<int>`上述内容以使您的查询更具可读性）。

# c - 创建翻译 - 无痛

> ID：15097510
> 
> 赞同：3
> 
> 时间：2013-02-26T19:23:09.793
> 
> 标签：c, linux, translation, xgettext

我目前创建翻译目录和管理翻译的方式是：

1.  通过所有非源代码文件类型（glade、.desktop、...）生成头文件`intltool`
2.  用于`xgettext`从所有`*.[ch]`文件中收集所有字符串并生成 a`.pot`
3.  `msgmerge`为现有`.po`文件做

**有没有一种工具可以处理所有 3 个任务而无需生成中间文件？**

注意：我一直在寻找这种工具很长时间，但从未真正找到，所以如果答案是微不足道的，我深表歉意。

# javascript - ScrollLeft 滚动到错误的位置

> ID：15097511
> 
> 赞同：0
> 
> 时间：2013-02-26T19:23:14.700
> 
> 标签：javascript, jquery, scrollto

我正在做周五测验！我想使用一个 scrollLeft-jQuery 效果去下一个问题。我以前用过这个没有问题，但是现在它一直像疯了一样跳来跳去。我究竟做错了什么？

网站：www.carlpapworth.com/friday-quiz/

的HTML：

```
 <div id="qWrap">
                    <ul id="qBox">
    <!--Q1-->           <li id="q1" class="qContainer">
                        <div class="qQuestion"><?php echo $Q1; ?>
                        </div>
                        <ul class="qAnswers">
                            <li><a href="#q2" class="<?php echo $Q1aClass; ?>"><h3><?php echo $Q1a; ?></h3></a></li>
                            <li><a href="#q2" class="<?php echo $Q1bClass; ?>"><h3><?php echo $Q1b; ?></h3></a></li>
                            <li><a href="#q2" class="<?php echo $Q1cClass; ?>"><h3><?php echo $Q1c; ?></h3></a></li>
                        </ul>
                    </li>
<!--Q2-->           <li id="q2" class="qContainer">
                        <div class="qQuestion"><?php echo $Q2; ?>
                        </div>
                        <ul class="qAnswers">
                            <li><a href="#q3" class="<?php echo $Q2aClass; ?>"><h3><?php echo $Q2a; ?></h3></a></li>
                            <li><a href="#q3" class="<?php echo $Q2bClass; ?>"><h3><?php echo $Q2b; ?></h3></a></li>

                            <li><a href="#q3" class="<?php echo $Q2cClass; ?>"><h3><?php echo $Q2c; ?></h3></a></li>
                        </ul>
                    </li>
     </ul>
    </div> 
```

CSS：

```
#qWrap{
width: 480px;
height: 260px;
margin: 0 auto;
overflow: scroll;
}

#qBox{
width: 1100%;
height: 260px;
display: block;
}

li.qContainer {
position: relative;
width: 9%!important;
height: 260px!important;
padding: 0px 0px;
margin: 0 50px 0 0px;
float: left;
}

.qQuestion {
width: 480px;
height: 50px;
padding: 10px 0px;
font-family: corbel;
font-size: 28px;
text-align: center;
color: #ffffff;
} 
```

JS：

```
$(document).ready(function() {  
    $('.qAnswers li a').bind('click',function(event){
                        var $anchor = $(this);
                        $('#qWrap').stop().animate({
                            scrollLeft: $($anchor.attr('href')).offset().left
                        }, 2000);
                        event.preventDefault();
                    });
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:33:46.273

您生成的标记很糟糕。在控制台中查看源代码。伪标记如下：

```
<qwrap>
  <qbox>
    <li.qcontainer />
    <q2 />
    <li.qcontainer>
      <q3 />
    </li.qcontainer>
  </qbox>
</qwrap> 
```

如果您还运行以下查询，您将了解它们滚动到不同位置的原因。由于标记已关闭，因此`offset`根据不同`offsetParent`的问题进行计算，因此滚动不一致。

```
$('#q2').offsetParent();
$('#q3').offsetParent(); 
```

修复你的标记，你的滚动问题就会消失。

编辑：一旦你的标记是正确的，那么你可以`qWrap`通过检查`position`属性来计算滚动的距离。 `offset`是相对于文档的，而`position`将报告相对于父级的偏移量。见[http://api.jquery.com/position/](http://api.jquery.com/position/)

添加`position: relative`到 qBox。这将`position`相对于为问题滚动的框。

那么您的代码几乎就是您已经拥有的，除了更改`offset`为`position`.

```
$(document).ready(function() {  
    $('.qAnswers li a').bind('click',function(event){
                        var $anchor = $(this);
                        $('#qWrap').stop().animate({
                            scrollLeft: $($anchor.attr('href')).position().left
                        }, 2000);
                        event.preventDefault();
                    });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:32:16.040

在你的 .stop() 中，放

```
.stop(true, true).animate 
```

看看这是否对你有帮助。

# ms-access - 1 个具有多个控制源的报告

> ID：15097517
> 
> 赞同：2
> 
> 时间：2013-02-26T19:23:34.557
> 
> 标签：ms-access

我有 3 个表格（Table1、Table2、Table3）和 9 个表格（表格 1、2、3、4、5、6、7、8、9）。Form的1、2、3控件源为Table1。Form的4、5、6控制源是表2，Form的7、8、9控制源是表3。我想把9个表单都添加到1个报表中作为子表单。这可能吗，因为您只能为报告设置 1 个控制源。我花了几个小时添加子表单，直到我完成后才意识到这一点。我希望我没有白白做这一切。有谁知道我可以做到这一点，或者甚至可以使用具有不同记录源的多个子表单创建 1 个报告？

# php - 在 PHP 的 json_encode 截断之前转义 JSON 撇号？

> ID：15097518
> 
> 赞同：6
> 
> 时间：2013-02-26T19:23:36.360
> 
> 标签：php, getjson, json

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-18T20:21:13.740

For details: [json_encode](http://php.net/manual/en/function.json-encode.php)

Example:

```
echo json_encode($array, JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_QUOT | JSON_HEX_AMP | JSON_UNESCAPED_UNICODE); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T23:06:54.470

# facebook - Facebook 跨域消息助手 (xd_arbiter.php) gzip/deflate 支持

> ID：15097524
> 
> 赞同：2
> 
> 时间：2013-02-26T19:24:06.967
> 
> 标签：facebook, compression, cross-domain, gzip, deflate

# 关于

将 Facebook Like 按钮添加到我的网站并运行 Google Chrome 的 PageSpeed 后，它会为“启用压缩”类别报告以下内容。

使用 gzip 压缩以下资源可以将其传输大小减少 15.6KiB（减少 62%）。

压缩 http://static.ak.facebook.com/.../xd_arbiter.php?... 可以节省 15.6KiB（减少 62%）。

# 问题

有没有我可以添加的配置设置来请求 xd_arbiter.php 响应的压缩版本，还是不受支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T02:47:06.410

*我知道这是一个老问题，但我现在正在回答它，因为我也对此感到疑惑并进行了一些挖掘。*

截至发帖时，[http](http://static.ak.facebook.com/connect/xd_arbiter.php) ://static.ak.facebook.com/connect/xd_arbiter.php 由支持 gzip 的服务器提供，并将正确响应 [对 gzip 编码页面的 HTTP 请求][1 ]。它还设置了 [long cache expiry][1]，并由内容交付网络 (Akamai) 在其 Linux 操作系统上的专有 Web 服务器软件上提供服务。页面的源代码被缩小。

运行测试时，您的浏览器可能关闭了 gzip/deflate 压缩。大多数现代浏览器都应该检索压缩页面。有趣的是，在我自己的测试中，我发现此页面上 gzip 压缩的开销导致整体响应时间变慢 [近 500 毫秒][2]。尽管我没有用尽浏览器/平台/地理位置的变化来得出任何结论性的决定，但我多次测试了类似的结果。YMMV。虽然 Page Speed 正确地指出压缩会减少传输大小（目前从 23.9KB 到 9.0KB），但压缩一定会提高性能并不明显。尽管如此，Facebook 的 Akamai 服务器支持 gzip 编码，并且大多数现代浏览器默认请求 gzip。

[1]：响应头：

```
HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
X-Content-Type-Options: nosniff
X-XSS-Protection: 0
Content-Encoding: gzip
X-FB-Debug: ZUlg004d1ohc18J/hpYpvJFY86ckxMlwwhVTb5y01B4=
Vary: Accept-Encoding
Content-Length: 8796
Cache-Control: public, max-age=31372439
Expires: Sun, 12 Apr 2015 04:19:30 GMT
Date: Mon, 14 Apr 2014 01:45:31 GMT
Connection: keep-alive 
```

[2]：[使用 gzip 压缩](http://www.webpagetest.org/result/140414_3Y_1ZB/1/details/ "网页test.org结果页面")和[没有](http://www.webpagetest.org/result/140414_3Y_1ZB/1/details/ "网页test.org结果页面").

# r - 禁止在 tableGrob 中显示“NA”

> ID：15097529
> 
> 赞同：2
> 
> 时间：2013-02-26T19:24:38.337
> 
> 标签：r, ggplot2

我有一个表，我想使用 tableGrob 将其与 ggplot2 绘图一起绘制。出于输出目的，我想禁止打印 NA 。

例子：

```
library(RGraphics) # support of the "R graphics" book, on CRAN
library(gridExtra) 

tab <- head(iris)
tab[1,2] <- NA # set a couple values to NA for example purposes
g1 <- tableGrob(tab)

#"Sepal.Length" "Sepal.Width"  "Petal.Length" "Petal.Width"  "Species"
g2 <- qplot(Sepal.Length,  Petal.Length, data=iris, colour=Species)
grid.arrange(g1, g2, ncol=1, main="The iris data") 
```

![在此处输入图像描述](../Images/52e415e9a14d1a9fc617502fda3bcb91.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:32:47.100

您正在绘制的数据表存储在 element 中`g1$d`。

```
 g1$d
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1          NA          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa 
```

由于只是替换`NA`将`""`列转换为字符和松散格式，首先，数据框列应转换为字符，然后`NA`替换值并将数据结构转换回数据框（以摆脱引号）。

```
g1$d<-apply(g1$d,2,as.character)
g1$d[is.na(g1$d)]<-""
g1$d<-as.data.frame(g1$d)
g1$d
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1                      1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa

grid.arrange(g1, g2, ncol=1, main="The iris data") 
```

![在此处输入图像描述](../Images/7648da36fa3c4f3929f0313c31016250.png)

# probability - 如何在 HTK 中直接读取后验概率？

> ID：15097536
> 
> 赞同：0
> 
> 时间：2013-02-26T19:25:06.050
> 
> 标签：probability, htk

问候小伙伴们，

我正在拼命地尝试在 htk 3.4 中找到我必须修改的文件，以便我可以直接读取语音的音素/单音素的后验概率序列，并将它们直接转发给解码器，同时考虑到声学和语言模型。

更详细地说，我正在遵循 HTK 教程，包括第 9 步，我只想在单声道上工作。我的（自己的，特定的）特征向量是具有每个音素 3 种状态概率的向量序列，类似于

(p(aa_begin), p(aa_mid), p(aa_end), ..., p(z_begin), p(z_mid), p(z_end))

对于话语中的每一帧，其中的条目，如上所述，已经是后验概率。

知道我需要修改哪些文件才能从我的（特定）文件（自己的二进制格式）中读取这些文件，以及如何将它们直接转发到解码器吗？最好让我可以使用 HVite 和 HEResult 来获得结果？

非常感谢您的帮助，G。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-24T11:14:26.953

我认为 HVite 上的选项 -f 将按照您希望的方式呈现结果。这是我发送的命令：

> ./HVite -T 1 -f -b sil -C config -a -H model/hmm7/macros -H model/hmm7/hmmdefs -i word1.mlf -m -t 250.0 -y lab -I word.mlf -S train.scp -L 标签/ dict.list phone1.list

这里是文件 word1.mlf 的开头（s2、s3、s4 是每个音素的开始中心和结尾）

```
"mfc/dr1_fcjf0_sa1.lab"

0 100000 s2 -48.580540 sil -1204.165527 sil

100000 400000 s3 -158.456665

400000 1900000 s4 -997.128357

1900000 2000000 s2 -75.405327 SH -530.110291 SHE

2000000 2500000 s3 -306.394897

2500000 2700000 s4 -148.310074

2700000 3000000 s2 -252.779510 IY -796.414673

3000000 3300000 s3 -214.586655

3300000 3700000 s4 -329.048492 
```

# .net - nuget安装退出代码9009

> ID：15097538
> 
> 赞同：15
> 
> 时间：2013-02-26T19:25:16.283
> 
> 标签：.net, visual-studio, build, nuget

在构建我的解决方案时，出现错误：

> 错误 116 命令 "nuget install "C:\Mycode\Test\some\ClassLibs\WCF\ServiceHosts\Monitor\packages.config" -o "C:\Mycode\Test\Some\ClassLibs\WCF\ServiceHosts\Monitor\packages .config””以代码 9009 退出

我使用VS 2012，谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-09-05T13:04:25.687

为了解决“nuget exited with code 9009”错误，我下载了最新版本的 NuGet.exe ( [https://www.nuget.org/downloads](https://www.nuget.org/downloads) ) 并将其放在 C:\Windows 目录中，以便 Windows 可以找到可执行文件.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-26T19:55:44.077

错误 9009 表示 Visual Studio 找不到可执行文件 - 通常是在构建前或构建后步骤中使用的可执行文件。在这种情况下，NuGet 似乎是问题的根源。

您是否可能正在使用使用 NuGet 管理依赖项的解决方案（并且可能启用了“启用 NuGet 包还原”选项），但您尚未将 NuGet 扩展加载到 Visual Studio 2012 中？

要确认是否是这种情况，请转到“工具”菜单，然后单击“扩展和更新”，选择已安装并`nuget` `Return`在“扩展和更新”表单右上角的搜索框中键入。如果它已安装，您应该会看到它与版本号一起列出 - 例如 2.4.40116.9051，我认为这是我键入时的最新版本。如果您没有找到它，请从“扩展和更新”表单左侧的列表中选择“在线”。找到 NuGet 包管理器条目（很可能是列表中的第一项），然后单击“下载”以获取它。

# delphi - 如何从 TIdHTTPWebBrokerBridge 中的请求中接收二进制数据？

> ID：15097539
> 
> 赞同：0
> 
> 时间：2013-02-26T19:25:16.833
> 
> 标签：delphi, delphi-xe2, indy, indy10, httpserver

我正在使用 Indy 使用 HTTP 构建客户端和服务器应用程序。在客户端上，我正在使用`TIdHTTP`，而在服务器上，我正在使用`TIdHTTPWebBrokerBridge`Web 模块。我需要客户端能够通过流将任何类型的数据发布到服务器。这是通过我调用的通用命令完成的，用于身份验证的 API 密钥`/set?Key=API_KEY&Name=FILE_NAME`在哪里，并且是正在发布的文件的名称。`Key``Name`

在客户端，我发布的数据如下：

```
function TInnoCloudClient.SetData(const Name: String; AStream: TStream): Bool;
var
  U: String;
begin
  U:= FServerURL; //Base URL of Server
  if Copy(U, Length(U)-1, 1) <> '/' then
    U:= U + '/';
  U:= U + 'get?Key='+Encode(FAPIKey);
  U:= U + '&Name='+Encode(Name);
  try
    FWeb.Post(U, AStream);
  except
    on e: exception do begin
      //Handle Exception
    end;
  end;
end; 
```

这个函数应该将里面的数据保存`AStream`到服务器上的文件中，文件名为`Name`. 但是，在服务器端，在请求处理程序中，我在请求`TStream`中没有看到可以从中读取的相应属性。

在服务器中，我如何获取我作为`TStream`后代发送的数据？我不需要知道如何保存或处理请求，我只需要知道如何从 Request( `TWebRequest`) 中获取这个 Stream？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:10:15.573

使用`TWebRequest.ReadClient()`or`TWebClient.ReadString()`方法读取发布的二进制数据，或使用`TWebRequest.RawContent`属性将发布的数据检索为`AnsiString`.

像这样的东西应该工作：

```
procedure TWebModule1.GetAllDataAsStream(ARequest: TWebRequest; AStream: TMemoryStream);
var
  BytesRead, ContentLength: Integer;
  Buffer: array[0..1023] of Byte;
begin
  AStream.Clear;
  ContentLength := ARequest.ContentLength;
  while ContentLength > 0 do begin
    BytesRead := ARequest.ReadClient(Buffer[0], Min(ContentLength, SizeOf(Buffer)));
    if BytesRead < 1 then Break;
    AStream.WriteBuffer(Buffer[0], BytesRead);
    Dec(ContentLength, BytesRead);
  end;
  AStream.Position:= 0;
end; 
```

# ruby-on-rails - 如何为同一控制器中的所有操作呈现相同的视图？

> ID：15097542
> 
> 赞同：2
> 
> 时间：2013-02-26T19:25:27.193
> 
> 标签：ruby-on-rails

我想在控制器中为我的所有操作呈现相同的视图。例如，我有：

```
class FooController 
  def action1
    #action1 code
  end

  # [...]

  def actionN
    #actionN code
  end 

end 
```

然后我希望所有动作都呈现`generic_page.html`。

我试过：

```
...
after_filter :render_generic

...
private 
  def render_generic
    render 'generic_page'
  end 
```

但是`render`之前调用了方法`after_filter`并且我收到了一个`Template Missing`错误，因为它没有呈现正确的模板。有谁知道这个问题的简单解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-07T20:53:39.480

使用[rescue_from](http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html#method-i-rescue_from)

```
 class FooController
      rescue_from ActionView::MissingTemplate do
        render 'generic_page'
      end

    end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:41:58.713

I would just be explicit:

```
def action1
  #action1 code
  render_generic
end

def actionN
  #actionN code
  render_generic
end

private
  def render_generic
    render 'generic_page'
  end 
```

# html - 针对网站特定部分的移动检测

> ID：15097554
> 
> 赞同：0
> 
> 时间：2013-02-26T19:25:51.963
> 
> 标签：html, mobile, video, detection

我是 Web 开发的初学者，我无法解决这个问题。

我拍摄了一段视频并将其编码为 mp4 文件和 ism 文件。我有两个不同的视频标签——一个可以播放每个文件。对于我正在开发的网站，如果网站正在移动设备上查看，我希望它使用其中一个视频标签，如果不是，则使用另一个。目前该网站采用 HTML5 格式。感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:37:40.623

video 标签已经支持备用来源。[此处](http://www.w3schools.com/html/html5_video.asp)的文章描述了如何为视频包含多个源（因为某些浏览器不支持某些编解码器）。像这样：

```
<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
Your browser does not support the video tag.
</video> 
```

对于移动检查，您可以使用 JavaScript CSS 媒体查询：

```
function isMobile() {
    return window.matchMedia( "(max-width: 320px)" );
} 
```

看[这篇文章](http://www.sitepoint.com/javascript-media-queries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:26:27.797

您可以使用基于 UserAgent 的检测来决定显示什么（不推荐，因为您必须维护它）或`canPlayType()`使用您正在使用的编解码器来查看浏览器是否支持它（更好的选择）

# git - git subtree 可以包含子树吗？

> ID：15097555
> 
> 赞同：1
> 
> 时间：2013-02-26T19:25:54.953
> 
> 标签：git, git-subtree

我正在编写需要一些 java 类的 R 包。我们在一个 python 项目中找到了这些 java 类（许可证兼容，原作者支持）。我们不想包含整个 python 项目，只有一个子目录，幸运的是我们需要的一切。git subtree 能否以使其从原始（python）回购中推/拉成为可能的方式做这样的事情？我知道一种解决方案是将java部分分解到一个单独的项目中，并同时拥有python和R项目子树。不幸的是，我们对原始项目没有那种控制权。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:54:16.730

不，不幸的是，git 无法做到这一点——不支持在存储库的一部分中合并。但这里有一个可能的解决方法：

创建一个单独的项目**lib**，`git subtree --split`在**python**存储库上使用，并将该存储库添加到您的**R**存储库，使用`git subtree --add`. 现在，每次您想从**python**获取更新时，请`git subtree --push`在**python**存储库和`git subtree --pull`您的**R**存储库上运行。

请注意，如果您愿意，也可以使用子模块将**lib**存储库添加到您的**python**存储库中。

# android - 使用 Drawable 创建通知栏

> ID：15097560
> 
> 赞同：1
> 
> 时间：2013-02-26T19:26:07.250
> 
> 标签：android, android-notification-bar

我正在尝试使用`Drawable`对象创建自定义通知栏，但它不会`Drawable`在参数中接收，仅`Bitmap`.

## 问题：

我需要在我的通知中设置另一个应用程序的图标。我尝试使用下面的代码：

```
getPackageManager().getApplicationIcon(packageName);//Return a Drawable Object

//Problem
Notification.Builder builder = new Notification.Builder(context);
builder.setLargeIcon(Bitmap); //I don´t have this one, only a Drawable object. 
```

如你看到的。如何使用此对象放入我的通知栏？

## 预期结果：

使用另一个应用程序的图标、名称和此应用程序的操作创建一个通知栏。

**解决方案：**

谢谢，pietmau 和 kadrei。

请使用以下代码：

```
public static Bitmap drawableToBitmap(Drawable drawable) {
    if (drawable instanceof BitmapDrawable) {
        return ((BitmapDrawable) drawable).getBitmap();
    }

    int width = drawable.getIntrinsicWidth();
    width = width > 0 ? width : 1;
    int height = drawable.getIntrinsicHeight();
    height = height > 0 ? height : 1;

    Bitmap bitmap = Bitmap.createBitmap(width, height, Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
    drawable.draw(canvas);

    return bitmap;
} 
```

并完成这个：

```
Notification.Builder builder = new Notification.Builder(context);

Drawable icon = getPackageManager().getApplicationIcon(
                packageName);
Bitmap bitmapIcon = drawableToBitmap(icon);

builder.setIcon(android.R.drawable.stat_sys_download_done).//It´s necessary put a resource here. If you don´t put any resource, then the Notification Bar is not show.
setLargeIcon(bitmapIcon);

Notification notification = builder.getNotification();
notificationManager.notify(yourId, notification); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:45:27.217

也许这有帮助：

```
public static Bitmap drawableToBitmap (Drawable drawable) {
if (drawable instanceof BitmapDrawable) {
    return ((BitmapDrawable)drawable).getBitmap();
}

int width = drawable.getIntrinsicWidth();
width = width > 0 ? width : 1;
int height = drawable.getIntrinsicHeight();
height = height > 0 ? height : 1;

Bitmap bitmap = Bitmap.createBitmap(width, height, Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap); 
drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
drawable.draw(canvas);

return bitmap;
} 
```

来源： [https ://stackoverflow.com/a/9390776/1955332](https://stackoverflow.com/a/9390776/1955332)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:31:22.593

```
 Bitmap= BitmapFactory.decodeResource(context.getResources(),
                                       R.drawable.drawable); 
```

编辑 编辑 编辑

那么试试这个：

```
 public static Bitmap drawableToBitmap (Drawable drawable) {
       if (drawable instanceof BitmapDrawable) {
           return ((BitmapDrawable)drawable).getBitmap();
       }

       int width = drawable.getIntrinsicWidth();
       width = width > 0 ? width : 1;
       int height = drawable.getIntrinsicHeight();
       height = height > 0 ? height : 1;

       Bitmap bitmap = Bitmap.createBitmap(width, height, Config.ARGB_8888);
       Canvas canvas = new Canvas(bitmap); 
       drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
       drawable.draw(canvas);

       return bitmap;
    } 
```

# javascript - 限制 datalist 显示的条目总数

> ID：15097563
> 
> 赞同：22
> 
> 时间：2013-02-26T19:26:12.323
> 
> 标签：javascript, css, html, html-datalist

当数据列表中有很长的元素集时，它们都会在旁边显示一个滚动条。有没有一种简单的方法可以只显示前 5 个，而只显示其他的？

例如：http: [//jsfiddle.net/yxafa/](http://jsfiddle.net/yxafa/)

```
<input type="text" name="search" id="search" placeholder="type 'r'" list="searchresults" autocomplete="off">
<datalist id="searchresults">
    <option>Ray0</option>
    <option>Ray1</option>
    <option>Ray2</option>
    <option>Ray3</option>
    <option>Ray01</option>
    <option>Ray11</option>
    <option>Ray21</option>
    <option>Ray31</option>
    <option>Ray02</option>
    <option>Ray12</option>
    <option>Ray22</option>
    <option>Ray32</option>
    <option>Ray012</option>
    <option>Ray112</option>
    <option>Ray212</option>
    <option>Ray312</option>
    <option>Ray03</option>
    <option>Ray13</option>
    <option>Ray23</option>
    <option>Ray33</option>
    <option>Ray013</option>
    <option>Ray113</option>
    <option>Ray213</option>
    <option>Ray313</option>
    <option>Ray023</option>
    <option>Ray123</option>
    <option>Ray223</option>
    <option>Ray323</option>
    <option>Ray0123</option>
    <option>Ray1123</option>
    <option>Ray2123</option>
    <option>Ray3123</option>
</datalist> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-30T11:56:29.853

使用一些现代的 javascript 和 html，你可以做这样的事情。

这是文件：

```
<template id="resultstemplate">
    <option>Ray0</option>
    <option>Ray1</option>
    <option>Ray2</option>
    <option>Ray3</option>
    <option>Ray01</option>
    <option>Ray11</option>
    <option>Ray21</option>
    <option>Ray31</option>
    <option>Ray02</option>
    <option>Ray12</option>
    <option>Ray22</option>
    <option>Ray32</option>
    <option>Ray012</option>
    <option>Ray112</option>
    <option>Ray212</option>
    <option>Ray312</option>
    <option>Ray03</option>
    <option>Ray13</option>
    <option>Ray23</option>
    <option>Ray33</option>
    <option>Ray013</option>
    <option>Ray113</option>
    <option>Ray213</option>
    <option>Ray313</option>
    <option>Ray023</option>
    <option>Ray123</option>
    <option>Ray223</option>
    <option>Ray323</option>
    <option>Ray0123</option>
    <option>Ray1123</option>
    <option>Ray2123</option>
    <option>Ray3123</option>
</template>
<input type="text" name="search" id="search"  placeholder="type 'r'" list="searchresults" autocomplete="off" />
<datalist id="searchresults"></datalist> 
```

这是js：

```
var search = document.querySelector('#search');
var results = document.querySelector('#searchresults');
var templateContent = document.querySelector('#resultstemplate').content;
search.addEventListener('keyup', function handler(event) {
    while (results.children.length) results.removeChild(results.firstChild);
    var inputVal = new RegExp(search.value.trim(), 'i');
    var clonedOptions = templateContent.cloneNode(true);
    var set = Array.prototype.reduce.call(clonedOptions.children, function searchFilter(frag, el) {
        if (inputVal.test(el.textContent) && frag.children.length < 5) frag.appendChild(el);
        return frag;
    }, document.createDocumentFragment());
    results.appendChild(set);
}); 
```

这是一个活生生的例子：http: [//jsfiddle.net/gildean/yxafa/6/](http://jsfiddle.net/gildean/yxafa/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-15T07:23:44.730

没有javascript示例：

```
 <input list="site" name="f" minlength="2" style="height:5.1em">
  <datalist id="site" style="height:5.1em;overflow:hidden"> 
```

花了我一分钟:)

这使用 CSS 样式和 HTML 属性。PS：最小长度应防止空提交。但是，您需要选择对象，然后按退格键才能看到：|

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-02T06:07:22.433

```
var search = document.querySelector('#search');
var results = document.querySelector('#searchresults');
var templateContent = document.querySelector('#resultstemplate').content;
search.addEventListener('keyup', function handler(event) {
    while (results.children.length) results.removeChild(results.firstChild);
    var inputVal = new RegExp(search.value.trim(), 'i');
    var clonedOptions = templateContent.cloneNode(true);
    var set = Array.prototype.reduce.call(clonedOptions.children, function searchFilter(frag, el) {
 if (inputVal.test(el.textContent) && frag.children.length < 5) frag.appendChild(el);
        return frag;
    }, document.createDocumentFragment());
    results.appendChild(set);
});
```

```
<template id="resultstemplate">
    <option>Ray0</option>
    <option>Ray1</option>
    <option>Ray2</option>
    <option>Ray3</option>
    <option>Ray01</option>
    <option>Ray11</option>
    <option>Ray21</option>
    <option>Ray31</option>
    <option>Ray02</option>
    <option>Ray12</option>
    <option>Ray22</option>
    <option>Ray32</option>
    <option>Ray012</option>
    <option>Ray112</option>
    <option>Ray212</option>
    <option>Ray312</option>
    <option>Ray03</option>
    <option>Ray13</option>
    <option>Ray23</option>
    <option>Ray33</option>
    <option>Ray013</option>
    <option>Ray113</option>
    <option>Ray213</option>
    <option>Ray313</option>
    <option>Ray023</option>
    <option>Ray123</option>
    <option>Ray223</option>
    <option>Ray323</option>
    <option>Ray0123</option>
    <option>Ray1123</option>
    <option>Ray2123</option>
    <option>Ray3123</option>
</template>
<input type="text" name="search" id="search"  placeholder="type 'r'" list="searchresults" autocomplete="off" />
<datalist id="searchresults"></datalist> 
```

# javascript - 更改 jquery.cookie.js 以跨域创建 cookie (/)

> ID：15097565
> 
> 赞同：2
> 
> 时间：2013-02-26T19:26:16.937
> 
> 标签：javascript, html

我正在使用会话 cookie 将这个花式框设置为每个会话打开一次。我正在尝试在站点范围内设置它，因为目前如果我首先打开一个目录（例如/about），它将为该目录而不是整个站点设置一个：

```
<script type="text/javascript">
$(document).ready(function() {
    var check_cookie = $.cookie('disclaimer-initial');
    if(check_cookie == null){
     $("#disclaimer-initial").fancybox({
        'titlePosition'     : 'inside',
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',//added comma
        'onComplete'        : function() {
     $.cookie('disclaimer-initial', '1'); //removed '
        }
      });
     $("#disclaimer-initial").trigger('click');
  }
});
</script> 
```

这是我的 jquery.cookie.js：

```
/*!
 * jQuery Cookie Plugin
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function($) {
    $.cookie = function(key, value, options) {

        // key and at least value given, set cookie...
        if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value === null || value === undefined)) {
            options = $.extend({}, options);

            if (value === null || value === undefined) {
                options.expires = -1;
            }

            if (typeof options.expires === 'number') {
                var days = options.expires, t = options.expires = new Date();
                t.setDate(t.getDate() + days);
            }

            value = String(value);

            return (document.cookie = [
                encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),
                options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
                options.path    ? '; path=' + options.path : '',
                options.domain  ? '; domain=' + options.domain : '',
                options.secure  ? '; secure' : ''
            ].join(''));
        }

        // key and possibly options given, get cookie...
        options = value || {};
        var decode = options.raw ? function(s) { return s; } : decodeURIComponent;

        var pairs = document.cookie.split('; ');
        for (var i = 0, pair; pair = pairs[i] && pairs[i].split('='); i++) {
            if (decode(pair[0]) === key) return decode(pair[1] || ''); // IE saves cookies with empty string as "c; ", e.g. without "=" as opposed to EOMB, thus pair[1] may be undefined
        }
        return null;
    };
})(jQuery); 
```

我知道我需要将路径设置为“/”，但我不知道如何或在哪里执行此操作。提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T19:33:23.683

```
$.cookie('disclaimer-initial', '1', { path: '/' }); 
```

# c# - 接口使用说明（C#视角）

> ID：15097570
> 
> 赞同：1
> 
> 时间：2013-02-26T19:26:27.877
> 
> 标签：c#, oop, interface

我使用 C# 和 .NET 已经有一段时间了，尽管我之前一直在使用 OOP 语言（更准确地说是 Java），但在处理 .NET 应用程序时，我发现使用的接口比我使用的要多得多在 Java 中看到。我根本没有太多经验，所以我并不是说接口在 .NET 中使用得更多，但现在我觉得有必要更深入地了解接口以及让人们经常使用它们的好处是什么.

我在互联网上有一些东西，这里有一些东西，对我来说最有意义的解释是——[我怎么知道什么时候创建一个界面？](https://stackoverflow.com/questions/444245/how-will-i-know-when-to-create-an-interface).

我的问题来了。我根本不期望对接口进行一些神奇的解释，因为我已经阅读了足够多的内容，发现没有这样的东西。我希望通过经验和编码，更深层次的理解会自行产生，所以我决定尝试这个例子，指出使用链接中接受的答案中的接口的好处。我也会在这里复制粘贴：

您有 4 种不同类型的 a、b、c、d。在你的代码中，你有类似的东西：

```
a.Process();
b.Process();
c.Process();
d.Process(); 
```

为什么不让他们执行`IProcessable`，然后执行

```
List<IProcessable> list;

foreach(IProcessable p in list)
    p.Process(); 
```

当您添加例如 50 种都做同样事情的类时，这将更好地扩展。

问题是我似乎没有这个。阅读后，我打开我的 Visual Studio 2010 并尝试重新创建这样的示例 - 我创建了一个项目并创建了四个类 - `a`, `b`, `c`, `d`. 所有这些类都是相同的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class a : ITest
    {
        public void Test()
        {
            System.Console.WriteLine("Hi from a");
        }
    }
} 
```

只有 4 个不同的名称和`Test()`打印名称的方法。这是界面：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    interface ITest
    {
        public void Test();
    }
} 
```

根据我的理解，我`Program.cs`有这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        List<ITest> list;
        static void Main(string[] args)
        {
            foreach (ITest p in list)
                p.Test();
        }
    }
} 
```

好。看来我真的搞错了。我认为通过实现相同的接口，我可以自动获取所有类的列表并使用它们，例如在我上面的`Main()`方法中。但是我收到以下错误：

> *非静态字段、方法或属性需要对象引用*

好吧，有人可以降低我的水平，并根据这个例子向我解释我如何通过使用界面来获得这样的好处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:30:04.190

这里的问题与 interface 无关，而与 class 无关`Program`。字段`list`是实例成员，而方法`Main`是静态的。正如例外所说，您不能从静态方法中引用非静态成员。

此外，`list`从未实例化或初始化（至少不在您发布的片段中）。因此，即使`list`被声明为静态，您的代码也会生成一个`NullReferenceException`.

尝试将您的`Program`课程更改为：

```
class Program
{
    static List<ITest> list;
    static void Main(string[] args)
    {
        list = new List<ITest>();
        // ...
        // initialize list 
        // ...

        foreach (ITest p in list)
            p.Test();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:30:23.437

关于您的错误，它看起来`list`没有实例化，它是一个实例字段，可以从静态方法访问。

* * *

接口不是为了继承，而是为了多态。

接口不是用来保存代码的。如果您需要这样做，请使用抽象类。

接口所做的只是向编译器保证您的类将以特定方式运行。它没有指定任何有关实施的内容。

例如，您同时拥有两者`List`并且`LinkedList`实现方式不同，但它们都符合接口，因此可以在循环`IEnumberable`中迭代`foreach`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:31:01.840

您的代码在创建将实现接口的类方面看起来不错。问题似乎在于您的初始化。

正如您声明的那样，它`List<ITest> list`不是静态字段。该`Main`函数是一个静态方法，因此它只能访问其他静态字段。

如果您想继续这个基本示例，请尝试设置`list`为静态字段，或设置为 中的变量`Main`，并实例化它，在`foreach`循环中使用它之前用一些对象填充它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T19:35:18.813

接口的使用定义了对象的占位符之类的东西，它肯定会有一些特定的行为，而实际上并不知道它。例如，您可以有 A 类和 B 类，它们都实现了 IMyInterface。如果您需要 IMyInterface 的实例，您可以同时使用它们并调用接口中指定但在 A 或 B 中实现的方法。此外，IoC 容器中的接口也有很好的基于约定的用法。

# java - IntelliJ 中的属性文件问题（添加到类路径）JSP（空指针 ex）

> ID：15097571
> 
> 赞同：0
> 
> 时间：2013-02-26T19:26:29.220
> 
> 标签：java, jsp, properties, intellij-idea

尝试加载我的属性文件时，我不断收到空指针异常。这是我第一次尝试这样做，在我的研究中，我似乎需要将它添加到类路径中。这是我目前用来加载它的代码：

```
 //Set up the properties
    String filePath = "src/prop.properties";
    InputStream inputStream = this.getClass().getResourceAsStream(filePath);

    //Load the properties file
    try
    {
        properties.load(inputStream);
        logger.info("Properties file was loaded successfully.");
    }
    catch(IOException ex)
    {
        logger.severe("Properties file could not be loaded. Exception : " + ex.getMessage());
    }
    catch(NullPointerException ex)
    {
        logger.severe("Null Pointer exception occurred when attempting to load Properties file. Exception : " + ex.getMessage());
    } 
```

要测试属性文件，我只需右键单击我的项目并执行 New --> File --> prop.properties

![在此处输入图像描述](../Images/b357628ff6a04efa7c4cd9885589e6e7.png)

而且我在这里看不到它（我可能正在寻找完全错误的位置，老实说我不确定）：

![在此处输入图像描述](../Images/31fd6fc902e05c31ad26009555497b81.png)

如果我理解正确，我的 prop.properties 文件不应该出现在 src 文件夹下吗？任何有关如何完成此操作的帮助将不胜感激，我查看了其他类似的帖子无济于事。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:04:46.210

您将属性文件放入`src`（源代码文件夹）中，这意味着类路径根包。所以你应该通过`getResourceAsStream("/prop.properties")`.

# angularjs - 等待 DOM src 属性改变

> ID：15097572
> 
> 赞同：0
> 
> 时间：2013-02-26T19:26:47.453
> 
> 标签：angularjs

因此，当我单击教程导航菜单时，它会触发 ng-click="loadNewTutorial($index)" 函数，一切正常 tutorialNumber 会通过索引号更新，进而更改当前视频的 URL。唯一的问题是 video.load()/video.play() 显然会在 DOM 中发生更改之前触发，因为视频总是落后 1 次点击。我的意思是我可以单击菜单项来加载第二个教程视频，但它会加载第一个，然后我下一次单击它会加载第二个，然后如果我再次单击第一个它将卡在第二个直到我再次单击第一个。所以当前视频没有及时加载正确的 URL，总是落后 1 次！如何让 video.load() 函数等到 DOM 中的视频 src 属性发生更改后再触发？

```
<!DOCTYPE html>
<html ng-app="Tutorials">
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script> 
        <script src="./functions.js"></script>
        <script src="./tutorials.js"></script>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
        <script type="text/javascript" src="./script-ng.js"></script>   
        <link rel="stylesheet" href="main.css"></link>
    </head>
    <body ng-controller="getAnswers">
        <div id="sidebar_left"><div id="header"></div>
            <ul id="nav" ng-repeat="section in sets">
                <li  class="section_title {{section.active}}" >
                    {{section.name}}
                </li>
                <ul><li class="tutorial_title {{tutorial.active}}" ng-click="loadNewTutorial({{$index}})" ng-repeat="tutorial in section.tutorials">{{tutorial.name}}</li></ul>
            </ul><span>{{score}}</span>
            </div>
        <div id="container">
                <video id="video" controls>
                    <source src="{{videoURLs[tutorialNumber]}}.mp4"></source>
                    <source src="{{videoURLs[tutorialNumber]}}.webm"></source>
                    Your browser does not support the video tag.
                </video>
                <br />
                <button id="reset">Replay</button>
            <br />
            <div  id="pannel">
                <div id="base">{{verbs.base}}</div>
                <ul class="answers">
                    <li ng-click="checkAnswer(answer)" ng-repeat="answer in verbs.conjugations" class="{{answer.colorReveal}} answer {{answer.correct}}" id="answer{{$index}}">{{answer.text}}</li>
                </ul>
            </div>
            <br />
            <br />
            <br />
            <div id="warning"></div>
        </div>
    </body>
</html>

angular.module('Tutorials', ['functions', 'tutorials']).controller('getAnswers', function ($scope, $element) {
    $scope.sectionNumber = 0;
    $scope.tutorialNumber = 0;      
            $scope.loadNewVerbs = function () {
            $scope.verbs = conjugate(conjugationsets[$scope.tutorialNumber][$scope.questionNumber]);
            $scope.correct = $scope.verbs.conjugations[0].text;
            fisherYates($scope.verbs.conjugations);
        };
    $scope.checkAnswer = function (answer) { 
        if (false) {//wait for tutorial to pause
            $("#warning").text("Not yet!").fadeIn(300).delay(1400).fadeOut(300);
            return;
        };
        answer.colorReveal = "reveal-color";
        if (answer.text === $scope.correct) {   //if correct skip to congratulations            
            $scope.questionNumber++;
        if(sectionNumber === 0 && $scope.tutorialNumber ===0){  //if first video play congratulations etc
            congrats();
        }
        setTimeout(function () {
            $scope.loadNewVerbs();
            $scope.$digest();
        }, 2000);
        } else { //if incorrect skip to try again msg
            if(sectionNumber === 0 && $scope.tutorialNumber ===0){start(160.5); pause(163.8)}
        }
    };
    $scope.sets = [{
        active:"inactive",
        name: "Conjugation",
        tutorials: [
            {active:"inactive",name: "ㅗ and ㅏ regular"}, 
            {active:"inactive",name:"ㅜ, ㅓ and ㅣ regular"}, 
            {active:"inactive",name:"ㅏ and ㅓ reductive"},
            {active:"inactive",name: "ㅗ and ㅜ reductive"},
            {active:"inactive",name: "ㅣ reductive"}]
    }, {
        active:"inactive",
        name: "Sentence_Building",
        tutorials: [
            {active:"inactive",name:"Particles"}, 
            {active:"inactive",name:"Word Order"}]
    }];
    $scope.video = $("#video").get(0);
    $scope.videoURLs = ["ㅗㅏregular", "ㅜㅓㅣregular"];

    $scope.loadNewTutorial = function (tut) {
        $scope.score = 0;
        $scope.questionNumber = 0;
        if(tut){
            $scope.tutorialNumber = tut;
        }
        video.load();
        video.play();
        video.hasPlayed = true;
        $(video).bind('ended', endVideoHandler);

        $scope.loadNewVerbs();
    };  

    $scope.loadNewTutorial();

    var congrats = function(){
        if ($scope.questionNumber === 1) {start(164.15); pause(166.8); $scope.score++;
        } else if ($scope.questionNumber === 2) {start(167.1); pause(170); $scope.score++;
        } else if ($scope.questionNumber === 3) {
            start(171.1); $scope.score ++;$scope.questionNumber = 0;$scope.tutorialNumber++;
        }
    }   

    function endVideoHandler() {
        $(this).unbind('ended');
        if (!this.hasPlayed) {
            return;
        }
        $scope.tutorialNumber++;
        $scope.$digest();
        this.currentTime = 0;
        $scope.loadNewTutorial();
    }
});

var conjugationsets = [
    ["작다", "놀다", "닦다"],
    ["웃다", "울다", "멀다"]
];
var sectionNumber = 0;
var tutorialNumber = 0;
var questionNumber = 0;

$(function () {

    $("#nav").accordion({
        heightStyle: "content",
        header: ".section_title"
    });

    $("#reset").click(function () {
        currentTutorial.currentVideo.videoObject.currentTime = 0;
        currentTutorial.currentVideo.start();
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:31:30.857

*编辑：* 我不确定我是否理解您的代码，但是为什么 loadNewTutorial 在 $scope 已经可用时将其作为参数？我猜这是您问题的一部分，因为您无法从模板将范围传递给它。

*原文：* “loadNewTutorial({{$index}})”应该是“loadNewTutorial($index)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:59:37.610

我发现您的“loadNewTutorial”函数存在几个问题：

1.  它在不应该使用 $scope 参数时将其作为参数（函数在 $scope 内定义，因此 $scope 默认情况下可用于函数）。

2.  预计它会收到一个 $scope 作为它的第一个参数，但是在一个地方你用当前范围调用它，在另一个地方你在没有任何参数的情况下调用它，然后在视图中你在传递 $index 时调用它（解析为原始数字）作为它的第一个参数。

3.  每次调用它时，它都会重新定义“loadNewVerbs”和“checkAnswer”函数。

仅举几个。

# java - java - 如何在java中正确地将端口侦听器实现为服务？

> ID：15097574
> 
> 赞同：1
> 
> 时间：2013-02-26T19:27:05.783
> 
> 标签：java, sockets, service, listener, port

我正在尝试将端口侦听器实现为一项服务，在获取带有 te 数据的字符串后，它将执行插入数据库。我希望它在服务器上永远运行。

所以在我使用 Java Service Wrapper 之前，我想问一下我是否包装了正确的代码，所以这是我的代码，我愿意听听其他人是如何解决这个问题的。

现在我遇到了一个问题，我第一次发送数据时它工作得很好，但从第二次开始它什么也没做，希望你能帮助我。

```
public class PortToDB {
    public static void main(String[] args) throws IOException {

        ServerSocket serverSocket = null;
        DBHandler handler = new DBHandler();
        try{
            serverSocket = new ServerSocket(50000);

        } catch (IOException e){
            System.err.println("Could not listen on port: 50000\. Error: " + e);
            System.exit(1);
        }

        Socket clientSocket = null;
        try{
            clientSocket = serverSocket.accept();            
        } catch(IOException e){
            System.err.println("Accept failed. " + e);
            System.exit(1);            
        }

        //PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
        BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        String inputLine;

        while(true){
            while ((inputLine = in.readLine()) != null) {
                //out.println(inputLine);
                handler.dbInsert(inputLine);
            }   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:33:18.427

通常，这将通过线程池完成，并且该`.accept()`方法将在循环中将与新套接字的交互传递给该池中的线程。按照您上面的编码方式，它只接受一个连接，当该连接关闭时，您的`main`方法将退出。

附带说明一下，大多数人会使用现有协议而不是发明自己的协议。通过 HTTP 使用 REST 风格的服务是一种*更*受欢迎的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T08:32:45.947

这将帮助你

```
 serverSocket = new ServerSocket(50000);
                while(true) {
                    socket = serverSocket.accept();
                    socketReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                    new Thread(){
public void run(){
your_method_Name();
}}.start();
            } 
```

# html - HTML 图片按钮相互补全

> ID：15097578
> 
> 赞同：0
> 
> 时间：2013-02-26T19:27:21.053
> 
> 标签：html, css, asp.net-mvc, xhtml

我正在使用 MVC4 我想在我的页面中有地图，其中每个区域都是图像按钮。我已经将每个区域作为图像我的问题是：我如何放置区域的图像以使所有区域彼此完整？就像我在 2 个地区所拥有的一样

[http://i.stack.imgur.com/EoNQy.png](http://i.stack.imgur.com/EoNQy.png)

我有大约 6 个

# javascript - jquery中对dom的多个实时绑定

> ID：15097585
> 
> 赞同：0
> 
> 时间：2013-02-26T19:27:55.887
> 
> 标签：javascript, jquery

假设一个 dom 元素我有超过 2 个`live`绑定（或`delegate`就此而言）。（一个或多个可能来自我使用的 jquery 插件），哪一个得到偏好。

```
$(selector).live('click', function(e) {
  alert(1);
});

$(selector).live('click', function(e) {
  alert(2);
  e.stopPropagation();
  alert(3);
}); 
```

然后有人单击`selector`，显示所有 3 个警报。

有人可以解释吗？

PS：潜在的问题是当其他地方有实时绑定（读取文件）时，它们会被覆盖，还是全部被执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:29:49.057

除非您取消绑定以前的绑定，否则它只会添加一个新的事件侦听器，它们都会被执行（除非有什么东西停止执行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:32:33.950

它们都按顺序执行。~~您可以通过调用 event.stopPropagation() 来阻止随后调用的事件处理程序的发生。~~（显然不是！）奇怪的是，如果您调用`$(selector).off('click')`它，它将删除附加到`.live('click')`. `.live`实际上已被弃用，不建议您使用`.on`.

[来源](http://api.jquery.com/live/)

# iphone - iPhone 中 H 264 流的 SPS 值

> ID：15097586
> 
> 赞同：0
> 
> 时间：2013-02-26T19:27:56.933
> 
> 标签：iphone, ios, ffmpeg, avfoundation, h.264

有人可以向我指出可以帮助我为 iPhone 获得正确 SPS 和 PPS 值的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:50:35.770

问题有点不清楚...

`Picture Parameter Set`在 7.3.2.2 章节中的最新[ITU-T 标准版本中进行了描述](http://www.itu.int/rec/T-REC-H.264)

`Sequence Parameter Set`在第 7.3.2.1 章中进行了描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:01:59.667

我相信您知道，但您只能将 H264 编码的视频保存到 iOS 上的文件（.mp4、.mov）中。尚无法从代码访问编码的视频帧。因此，如果要创建具有编码视频的 mp4 文件，则需要使用 AVAssetWriter。苹果有一个很好的[示例代码](http://developer.apple.com/library/ios/#samplecode/RosyWriter/Introduction/Intro.html)来说明如何做到这一点。

我不知道有什么地方发布了不同的 SPS/PPS；因为它们会根据您的压缩设置、图像大小以及您是以纵向还是横向模式编码视频而有所不同。您可以使用上面的示例代码（RosyWriter）使用您的编码预设生成一些小的 .mp4 文件；然后我会使用十六进制编辑器手动查找 SPS/PPS。请注意，作为更大的 mp4 信息结构的一部分，SPS/PPS 将在您的 H264 流之后指向文件的末尾。您可以在线找到有关其结构的更多信息。

这是我发现对我的项目有用的一些 SPS/PPS。其中一些可能对您有用，但如果不是，您始终可以使用 H264 编码预设生成 mp4 并找到必要的 SPS/PPS。我的视频是使用 AVVideoProfileLevelH264Baseline30 编码的，这里是我需要的不同视频尺寸的 SPS/PPS：

SPS：

```
// For AVCaptureSessionPresetLow(144x192) AVCaptureSessionLandscape on Iphone4S, Iphone5
char iphone_sps[] = {0x67, 0x4D, 0x00, 0x0C, 0xAB, 0x41, 0x82, 0x74, 0xD4, 0x04, 0x04, 0x18, 0x08};

// For AVCaptureSessionPresetLow(144x192), AVCaptureVideoOrientationPortrait on all Ipads
char ipad_sps[] = {0x67, 0x4D, 0x00, 0x0C, 0xAB, 0x41, 0x23, 0x34, 0xD4, 0x04, 0x04, 0x18, 0x08};

// Iphone 4G AVCaptureSessionPresetLow (144x192), AVCaptureVideoOrientationPortrait
char iphone4g_sps[] = {0x67, 0x42, 0x00, 0x1E, 0x8D, 0x68, 0x24, 0x66, 0x9A, 0x83, 0x00, 0x83, 0x01};

// For AVCaptureSessionPreset352x288 (352x288), AVCaptureVideoOrientationLandscape 
char iphone_sps[] = {0x67, 0x42, 0x00, 0x1E, 0xAB, 0x40, 0xB0, 0x4B, 0x4D, 0x40, 0x40, 0x41, 0x80, 0x80};

// For AVCaptureSessionPreset352x288 (352x288), AVCaptureVideoOrientationPortrait
char ipad_sps[] = {0x67, 0x42, 0x00, 0x1E, 0xAB, 0x40, 0xB0, 0x4B, 0x4D, 0x40, 0x40, 0x41, 0x80, 0x80}; 
```

PP:

```
char pps[] =  {0x28, 0xCE, 0x3C, 0x80};
char iphone4g_pps[] = {0x68, 0xCE, 0x09, 0xC8}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T07:40:08.697

您可以将单个帧编码为文件，然后从该文件中提取 sps 和 pps。我有一个示例显示如何在[http://www.gdcl.co.uk/2013/02/20/iOS-Video-Encoding.html上做到这一点](http://www.gdcl.co.uk/2013/02/20/iOS-Video-Encoding.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-06T12:31:29.987

使用 VideoToolbox API。参考：[https ://developer.apple.com/videos/play/wwdc2014/513/](https://developer.apple.com/videos/play/wwdc2014/513/)

搜索关键字`print("SPS is`及`print("PPS is`以下。

```
//
//  LiveStreamSession.swift
//  LiveStreamKit
//
//  Created by Ya Wang on 6/10/21.
//

import Foundation
import AVFoundation
import VideoToolbox

public class LiveStreamSession {

    let compressionSession: VTCompressionSession

    var index = -1

    var lastInputPTS = CMTime.zero

    public init?(width: Int32, height: Int32){
        var compressionSessionOrNil: VTCompressionSession? = nil
        let status = VTCompressionSessionCreate(allocator: kCFAllocatorDefault,
                                                width: width,
                                                height: height,
                                                codecType: kCMVideoCodecType_H264,
                                                encoderSpecification: nil, // let the video toolbox choose a encoder
                                                imageBufferAttributes: nil,
                                                compressedDataAllocator: kCFAllocatorDefault,
                                                outputCallback: nil,
                                                refcon: nil,
                                                compressionSessionOut: &compressionSessionOrNil)
        guard status == noErr,
            let compressionSession = compressionSessionOrNil else {
            return nil
        }
        VTSessionSetProperty(compressionSession, key: kVTCompressionPropertyKey_RealTime, value: kCFBooleanTrue);
        VTCompressionSessionPrepareToEncodeFrames(compressionSession)

        self.compressionSession = compressionSession

    }

    public func pushVideoBuffer(buffer: CMSampleBuffer) {
        // image buffer
        guard let imageBuffer = CMSampleBufferGetImageBuffer(buffer) else {
            assertionFailure()
            return
        }

        // pts
        let pts = CMSampleBufferGetPresentationTimeStamp(buffer)
        guard CMTIME_IS_VALID(pts) else {
            assertionFailure()
            return
        }

        // duration
        var duration = CMSampleBufferGetDuration(buffer);
        if CMTIME_IS_INVALID(duration) && CMTIME_IS_VALID(self.lastInputPTS) {
            duration = CMTimeSubtract(pts, self.lastInputPTS)
        }

        index += 1
        self.lastInputPTS = pts
        print("[\(Date())]: pushVideoBuffer \(index)")

        let currentIndex = index
        VTCompressionSessionEncodeFrame(compressionSession, imageBuffer: imageBuffer, presentationTimeStamp: pts, duration: duration, frameProperties: nil, infoFlagsOut: nil) {[weak self] status, encodeInfoFlags, sampleBuffer in
            print("[\(Date())]: compressed \(currentIndex)")
            if let sampleBuffer = sampleBuffer {
                self?.didEncodeFrameBuffer(buffer: sampleBuffer, id: currentIndex)
            }
        }
    }

    deinit {
        VTCompressionSessionInvalidate(compressionSession)
    }

    private func didEncodeFrameBuffer(buffer: CMSampleBuffer, id: Int) {
        guard let attachments = CMSampleBufferGetSampleAttachmentsArray(buffer, createIfNecessary: true)
               else {
            return
        }
        let dic = Unmanaged<CFDictionary>.fromOpaque(CFArrayGetValueAtIndex(attachments, 0)).takeUnretainedValue()
        let keyframe = !CFDictionaryContainsKey(dic, Unmanaged.passRetained(kCMSampleAttachmentKey_NotSync).toOpaque())
//        print("[\(Date())]: didEncodeFrameBuffer \(id) is I frame: \(keyframe)")
        if keyframe,
           let formatDescription = CMSampleBufferGetFormatDescription(buffer) {
            // https://www.slideshare.net/instinctools_EE_Labs/videostream-compression-in-ios
            var number = 0
            CMVideoFormatDescriptionGetH264ParameterSetAtIndex(formatDescription, parameterSetIndex: 0, parameterSetPointerOut: nil, parameterSetSizeOut: nil, parameterSetCountOut: &number, nalUnitHeaderLengthOut: nil)
            // SPS and PPS and so on...
            let parameterSets = NSMutableData()
            for index in 0 ... number - 1 {
                var parameterSetPointer: UnsafePointer<UInt8>?
                var parameterSetLength = 0
                CMVideoFormatDescriptionGetH264ParameterSetAtIndex(formatDescription, parameterSetIndex: index, parameterSetPointerOut: &parameterSetPointer, parameterSetSizeOut: &parameterSetLength, parameterSetCountOut: nil, nalUnitHeaderLengthOut: nil)
//                parameterSets.append(startCode, length: startCodeLength)
                if let parameterSetPointer = parameterSetPointer {
                    parameterSets.append(parameterSetPointer, length: parameterSetLength)
                }

                //
                if index == 0 {
                    print("SPS is \(parameterSetPointer) with length \(parameterSetLength)")
                } else if index == 1 {
                    print("PPS is \(parameterSetPointer) with length \(parameterSetLength)")
                }
            }
            print("[\(Date())]: parameterSets \(parameterSets.length)")
        }
    }
} 
```

# log4net - 我应该如何配置 log4net 在 Windows XP 和 7 上写入 %LOCALAPPDATA%？

> ID：15097591
> 
> 赞同：11
> 
> 时间：2013-02-26T19:28:17.190
> 
> 标签：log4net, environment-variables

我有一个使用 log4net 进行日志记录的内部应用程序。我希望在`%LOCALAPPDATA%\Vendor\App\application.log`. 不幸的是，log4net 正在创建日志文件`%APPDATA%`。这不是一个大问题，因为我们真的不使用此处描述的漫游，但如果我可以避免的话，我不喜欢在我的代码中留下小的特质。

关于如何将文件写入我指定的位置而不以编程方式配置 log4net 和使用 pinvoke 获取 XP 路径的任何想法？

如果有帮助，这是我的配置文件的 appender 部分：

```
<appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
  <file value="${LOCALAPPDATA}\Vendor\App\application.log" />
  <appendToFile value="true" />
  <rollingStyle value="Size" />
  <maxSizeRollBackups value="10" />
  <maximumFileSize value="100KB" />
  <staticLogFileName value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %-5level %logger%newline%message%newline" />
  </layout>
</appender> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2019-04-05T16:30:43.693

在这里聚会很晚，但我刚刚遇到了这个并找到了答案。

似乎您可以使用[log4net.Util.PatternString](https://logging.apache.org/log4net/log4net-1.2.11/release/sdk/log4net.Util.PatternString.html)将环境变量插入文件路径。所以OP的例子变成了：

```
<appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
  <file type="log4net.Util.PatternString" value="%env{LOCALAPPDATA}\Vendor\App\application.log" />
  <appendToFile value="true" />
  <rollingStyle value="Size" />
  <maxSizeRollBackups value="10" />
  <maximumFileSize value="100KB" />
  <staticLogFileName value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %-5level %logger%newline%message%newline" />
  </layout>
</appender> 
```

将**type="log4net.Util.PatternString"**添加到文件元素，然后指定**%env**模式说明符，后跟大括号中的环境变量名称。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-27T13:25:13.743

如果这不起作用，则表明您的环境变量错误。

Log4net 没有任何特殊的东西来处理 appdata 或 localappdata。它所做的只是调用`System.Environment.GetEnvironmentVariables()`返回一个哈希表并根据返回的任何值执行替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-12T14:50:14.907

对于每个人来说，这和我有同样的问题：

*   即使在使用不同的情况下也无法正常工作：（例如 LocalAppData、LOCALAPPDATA、localappdata）
*   不能使用“util.PatternString”，因为配置是在代码中完成的，而不是 log4net.config 文件

这可以为您提供本地应用程序数据或您想要的任何环境变量路径。使用小写，例如“localappdata”！！找不到时返回empty.string。

```
private static string GetLocalAppDataPath()
{
    foreach (DictionaryEntry environmentVariable in Environment.GetEnvironmentVariables())
    {
        var environmentVariableString = environmentVariable.Key as string;
        if (environmentVariableString?.ToLower() == "localappdata")
            return (string) environmentVariable.Value;
    }

    return string.Empty;
} 
```

# google-apps-script - 通过 Google 脚本访问管理员审核日志

> ID：15097599
> 
> 赞同：1
> 
> 时间：2013-02-26T19:28:25.360
> 
> 标签：google-apps-script

尽管进行了热烈的搜索，但我不相信我已经得出了我需要的结果。在 Google Apps for Business 管理员控制台中，“报告”下方有“审核日志”。这个审计日志几乎显示了我需要的一切；但是，我需要文件的实际名称，而不是报告中提供的 fileID。

最终的结局是通过 Google Script 生成一份自动化的每日报告，每天将相同的数据提供给少数用户。有什么方法可以让我访问这些数据？我一直在倾注 API，也许我错过了一些东西，但我觉得我没有找到我需要的东西。

任何想法和帮助将不胜感激。感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T23:36:52.687

这可以使用[Google Apps Admin Audit API](https://developers.google.com/google-apps/admin-audit/)来实现。这使用 OAuth，有时设置起来有点棘手。您可以在我们所做的[此视频](http://www.youtube.com/watch?v=VVhsK5jH6u8&feature=player_detailpage#t=1258s)中看到设置过程。除了示例所示，在[API Console](http://developers.google.com/console)中启用 Apps Reporting 和 Audit API，而不是 YouTube API 。

我构建了一个[简单的示例](https://script.google.com/macros/s/AKfycbzcvt_jzVP78BpE8hDiHlP-gCxSsPqk0F19swlxVjrYxWfF8jAq/exec)，您可以在操作中看到它。以域管理员身份登录后访问此 URL。它会自动在您的云端硬盘中创建一个电子表格，并导出最新的审核日志。这是一个部署为“以用户身份运行”的 Web 应用程序。

![样本审计电子表格](../Images/43be509e54d1439ef0d5a1b57ce43df8.png)

我在这里开源了这个[Github](https://github.com/entaq/GoogleAppsScript/blob/master/GoogleAppsAdminAudit.gs)。您应该替换正确的 OAuth2 Client ID/Secret。该代码非常粗糙，因此您需要对其进行清理。我选择性地记录了一些列，但是如果您查看 API 文档，您还可以记录其他内容。

设置 OAuth 令牌后，只要您刷新令牌，您就可以在触发器上运行此操作。

希望这可以帮助。

# scala - 为什么scala maven工件对每个scala版本都有一个工件，而不是每个scala版本都有一个分类器？

> ID：15097600
> 
> 赞同：12
> 
> 时间：2013-02-26T19:28:27.407
> 
> 标签：scala, maven, classification

[由于您在Scala](http://www.scala-lang.org/)版本之间只有源代码兼容性，因此不幸的是，您需要为它们支持的每个 scala 版本编译像[scalatest](http://mvnrepository.com/artifact/org.scalatest)或[scalamock这样的库。](http://mvnrepository.com/artifact/org.scalamock)让我感到困惑的是，这些库提供了大量的工件（scalatest_2.9.0、scalatest_2.9.1、scalatest_2.10 等等）——每个 scala 版本都有一个，因此 maven 存储库中到处都是从构建的工件相同的来源。我的直觉告诉我宁愿为每个 scala 版本使用一个带有分类器的工件。（其实[maven pom参考](http://maven.apache.org/pom.html)提到这有时是用 jdk14 和 jdk15 分类器来完成的，这似乎和我很相似。）那么，为什么 Scala 的人选择了许多工件过度杀伤 :-) 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T09:20:39.777

我可能是错的，但如果分类器的目的是“区分由相同 POM 构建但内容不同的工件”，那么我认为有一个很好的理由**不**将它们用于 scala 版本控制：scala 版本不仅仅是二进制不兼容，它们很可能是**源不兼容**的。例如，当将 scala 从 2.7 升级到 2.8 时，我必须对代码库进行一些重大更改。如果我想同时保留 scala 2.7 和 2.8 版本，我需要创建一个并行分支，并且两个分支肯定不会有相同的源代码。

当我读到“来自同一个 POM”时，我明白它也意味着来自同一个源代码，这显然不是这两个代码分支的情况。

另一个更重要的原因是分类器本质上是一个字符串，它已经用于许多事情。或多或少的标准分类器包括“sources”、“javadoc”或“resources”。这些分类器的含义在 scala 项目中是相同的，并且与 scala 版本完全正交，正如我将尝试展示的那样。

Maven 的文档建议使用诸如“jdk15”或“jdk14”之类的分类器来表示编译二进制工件的 jvm 版本。鉴于 java 代码是向后兼容的，原则上具有两个分类器（“jdk15”或“jdk14”）的工件是从相同的源代码编译的。这就是为什么您不需要为“源”工件复制分类器的原因，或者换句话说，您**不需要**需要有一个名为“sources-jdk14”和“sources-jdk15”的分类器。但是你不能对 scala 版本应用相同的理由：假设你可能需要不同的源代码，无论你是针对 scala 2.7 还是 scala 2.8 编译，你确实需要两个不同的带有分类器的工件，例如“sources-scala2.7”或“源-scala2.8"。所以我们已经有了复合分类器。至于二进制工件，您不仅需要区分目标 jvm 版本（请记住，您可以编译 scala 代码以针对不同的 jvm 版本），还需要区分编译它的 scala 版本。所以你最终会得到类似“jdk14-scala2.7”或“jdk14-scala2.8”或“jdk15-scala2.7”或“jdk15-scala2.8”的东西。还有一组复合分类器。所以带回家的信息是，scala 版本确实是一种对工件进行分类的单独方法，它与所有现有的分类器完全正交。是的，我们真的可以像上面那样使用复合分类器（例如“sources-scala2.7”），但是我们不会使用标准分类器，这本身就很混乱，但还需要修改分类器周围的所有工具：如果我使用不了解 scala（仅 java）但知道如何自动发布“源”工件的构建工具怎么办？我是否需要修改此构建工具，以便他知道要发布“sources-scala2.7”工件？另一方面，如果我在（基本）工件名称中编码 scala 版本并将其提供给构建工具，一切都会照常工作，我会得到一个带有“源”的工件

总而言之，与直接的直觉相反，在名称中编码 scala 版本可以**更好地**集成到现有的 java 构建生态系统中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:02:10.497

Scala 仅在补丁版本（Major.Minor.Patch 版本规范的第三个组件）之间提供其字节码输出（`.class`文件）的版本间兼容性。

Maven 没有地方将其正确编码为工件的一等属性，因此必须按照名称中的约定对其进行编码。

可悲...

# jquery - 这是否需要某种解决方案

> ID：15097601
> 
> 赞同：2
> 
> 时间：2013-02-26T19:28:29.517
> 
> 标签：jquery, jquery-deferred

在为会员或客人准备特定页面之前，我正在检查用户是否已登录。如果他们有 cookie，他们就是会员，如果没有，他们就是客人。

我是否正确地做到了这一点？

```
function check_if_member(){

    var dfd = new $.Deferred();
    if (readCookie('isco')){
        //adds jquery data() element "user_information"
        //after making a jquery ajax post to retrieve it
        //and using a template to write data to the page
        //with the `success()` callback
        prepare_member('member');
    } else {
        //reveals some HTML on the page
        prepare_member('guest');
    }  
}

$(document).ready(function(){
    //before page loads, check if user is member
    $.when(check_if_member())
     .then(function(){
        console.log($('body').data('user_information'));
        return false; 
     });
}); 
```

我想我终于对延迟有所了解，但他们仍然让我感到困惑，我想知道我是否已经适当地构造了这个，或者我是否需要在我的任何 ajax 请求或行中添加解析或返回行将收集到的信息保存到 jquery`data()`中。谢谢你。

## 编辑

准备成员函数

```
function prepare_member(type) {

    if (type == 'member') {
        var user_information = readCookie('isco')

        $('body').data('user_information', user_information);

        var user_id = $('body').data('user_information').user_id;

        $.ajax({
            type: 'post',
            url: "/address.php",
            data: {
                type: "retrieve",
                user_id: user_id,
                isbilling: true
            },
            dataType: 'json',
            success: function (returnedData) {

                $('body').data('user_information').billing_information = returnedData['address_0'];

                //populate member billing fields
                $('#member_billing_container').append('<div>').children(':last')
                                                              .vkTemplate('/member_billing_template.tmpl', returnedData, function () {
                                                                  //some callback - possibly resolve promise
                                                              });
                //populate member contact fields
                $('#member_contact_container').append('<div>').children(':last')
                                                              .vkTemplate('/member_contact_template.tmpl', JSON.stringify(user_information), function () {
                                                                  //some callback - possibly resolve promise  
                                                               });
            }
        });

        $('.guest_container, .guest').hide();
        $('.member_container, .member').show();

    } else {

        $('.guest_container, .guest').show();
        $('.member_container, .member').hide();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:01:56.257

首先，由于我们谈论的是 Deferreds，所以我们不会使用`success`处理程序。[$.ajax()](http://api.jquery.com/jQuery.ajax/)返回一个 promise，所以我们可以将它链接到[done()](http://api.jquery.com/deferred.done/)并继续使用延迟模式。

然后，假设您想在成员数据可用时立即解决您的 Deferred （这实际上使答案更简单，因为它`vkTemplate()`不返回承诺，我们可能必须编写一个包装器以保持代码可读） .

结果将是这样的：

```
function check_if_member()
{
    var dfd = $.Deferred(),           // Can be called without 'new'.
        cookie = readCookie("isco");  // Avoid reading cookie twice.
    prepare_member(cookie, dfd);
    return dfd.promise();             // Return promise.
}

function prepare_member(user_information, dfd) {
    if (user_information) {
        // Member mode.
        $("body").data("user-information", user_information);
        $.ajax({
            type: "post",
            url: "/address.php",
            data: {
                type: "retrieve",
                user_id: user_information.user_id,
                isbilling: true
            },
            dataType: "json"
        }).done(function(returnedData) {
            user_information.billing_information = returnedData["address_0"];
            dfd.resolve();  // Member data is available, resolve Deferred.
            $("#member_billing_container").append("<div>").children(":last")
                .vkTemplate("/member_billing_template.tmpl", returnedData,
                    function() {
                        // Maybe chain widgets or handlers...
                    });
            $("#member_contact_container").append("<div>").children(":last")
                .vkTemplate("/member_contact_template.tmpl",
                    JSON.stringify(user_information),
                    function () {
                        // Maybe chain widgets or handlers...
                    });
        });
        $(".guest_container, .guest").hide();
        $(".member_container, .member").show();

    } else {
        // Guest mode.
        dfd.resolve();  // No member data available, resolve Deferred
                        // (synchronously here). You might also want
                        // to reject() it instead.
        $(".guest_container, .guest").show();
        $(".member_container, .member").hide();
    }
}

$(document).ready(function() {
    $.when(check_if_member())
     .then(function() {
          console.log($("body").data("user-information"));
     });
}); 
```

现在，也许您不必使用`<body>`元素的数据将用户信息传递给您的`then()`处理程序。延迟对象可以连同任何信息一起解决（或拒绝或通知），例如：

```
user_information.billing_information = returnedData["address_0"];
dfd.resolve(user_information);  // Member data is available, resolve Deferred
                                // and pass user information through promise. 
```

然后你只需要写：

```
$(document).ready(function() {
    $.when(check_if_member())
     .then(function(user_information) {
          console.log(user_information);  // Will be undefined in guest mode.
     });
}); 
```

# php - 只有第一次通过 $.ajax 登录总是失败并导致页面重新加载

> ID：15097602
> 
> 赞同：0
> 
> 时间：2013-02-26T19:28:34.093
> 
> 标签：php, jquery, ajax

我之前问过这个问题，但每次都认为其他“错误”是根本原因。不幸的是，他们不是。

当用户第一次尝试登录时，PHP 服务器返回到 jQuery $.ajax 错误块。它还强制页面重新加载，使得在 Webkit 中调试变得困难。

每次连续登录都可以完美运行，直到浏览器关闭（cookie 过期）。然后第一次登录再次失败。

这是用户登录时执行的 Javascript。

```
var form_data = {
    email:        email,
    password:     password
};

$.ajax({
    type:        'POST',
    url:         '/Login.php',
    data:         form_data,
    success:      function(jsonResponse){
        console.log('Login returned via success.'); // Always hits this AFTER first login.          

        console.dir(jsonResponse);
    },
    error: function (xhr, textStatus, error) {
        console.log('Login returned via error.');   // Hits this on first login.            

        console.log(xhr);
        console.log(textStatus);
        console.log(error);
     }
}); 
```

请注意，在 PHP 中，所有 DB 调用都具有以下语法，并且没有一个返回错误。

```
error_reporting(E_ALL);
$opt = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);
$dsn = 'mysql:host=localhost;dbname=' . $DB_Database;
$dbh = new PDO($dsn, $DB_UserName, $DB_Password, $opt);
$sth = $dbh->prepare("SELECT * FROM Users WHERE EMail=:email OR Temp_EMail=:temp_email");
$sth->bindParam(':email',      $email, PDO::PARAM_STR);
$sth->bindParam(':temp_email', $email, PDO::PARAM_STR);
$sth->execute(); 
```

这是准备和返回 JSON 的 PHP 代码段。

```
$messageList = array();

$message = array('status' => 0,  'heading' => "SUCCESS:", 'message' => "You are now logged in.");
array_push($messageList, $message);

$response = array('success' => true, 'messageList' => $messageList, 'userName' => $fullName);
$json     = json_encode($response);

dump_to_error_log($json);  

echo $json;

return; 
```

这是第一次登录时错误日志中的 JSON：

```
{"success":true,"messageList":[{"status":0,"heading":"SUCCESS:","message":"You are now logged in."}],"userName":"My Name"} 
```

这是首次登录后错误日志中的 JSON：

```
{"success":true,"messageList":[{"status":0,"heading":"SUCCESS:","message":"You are now logged in."}],"userName":"My Name"} 
```

是的。JSON 每次都是相同的。那么，为什么页面第一次重新加载？

这是我在第一次登录尝试时在控制台中看到的内容。

```
Login returned via error. script.js:3001

Object {readyState: 0, getResponseHeader: function, getAllResponseHeaders: function, setRequestHeader: function, overrideMimeType: function…}
 script.js:3002

error script.js:3003
 script.js:3004 
```

这是我在第一次登录尝试时在控制台中看到的内容。（域已编辑。）

```
XHR finished loading: "http://dev.DOMAIN.com/Login.php". jquery.min.js:3
    send jquery.min.js:3
    st.extend.ajax jquery.min.js:3
    loginButtonClicked script.js:2963
    onclick dev.DOMAIN.com:910
Login returned via success. script.js:2968
{"success":true,"messageList":[{"status":0,"heading":"SUCCESS:","message":"You are now logged in."}],"userName":"My Name"}
No Properties 
```

知道为什么第一次登录尝试行为失败吗？

谢谢！

# php - Symfony2坚持嵌入形式

> ID：15097604
> 
> 赞同：2
> 
> 时间：2013-02-26T19:28:40.083
> 
> 标签：php, symfony, doctrine-orm

我正在关注关于如何嵌入表单集合的[官方 symfony 食谱文章。](http://symfony.com/doc/master/cookbook/form/form_collections.html)我尝试使用多个 Trucs 持久化 Machin。

这是我的代码：

**机器实体**

```
namespace Tmp\TestBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Machin
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Machin
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /**
    *
    *@ORM\ManyToMany(targetEntity="Truc", cascade={"persist"})
    */ 
    protected $trucs;

    public function __construct()
    {
        $this->tags = new ArrayCollection();
    }
    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return Machin
     */
    public function setName($name)
    {
        $this->name = $name;

        return $this;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }
    public function getTrucs()
    {
        return $this->trucs;
    }

    public function setTrucs(ArrayCollection $trucs)
    {
        foreach ($trucs as $truc) {
                $truc->addMachin($this);
            }

            $this->trucs = $trucs;
    }
} 
```

**特鲁克实体**

```
namespace Tmp\TestBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Truc
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Truc
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return Truc
     */
    public function setName($name)
    {
        $this->name = $name;

        return $this;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    public function addMachin(Machin $machin)
    {
        if (!$this->machins->contains($machin)) {
        $this->machins->add($machin);
        }
    }
} 
```

**机器类型**

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class MachinType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('name');

        $builder->add('trucs', 'collection', array(
            'type' => new TrucType(),
            'allow_add' => true,
            'by_reference' => false,
            'prototype' => true));
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Tmp\TestBundle\Entity\Machin',
        ));
    }

    public function getName()
    {
        return 'machin';
    }
} 
```

**TrucType**

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class TrucType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('name');

    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Tmp\TestBundle\Entity\Truc',
        ));
    }
    public function getDefaultOptions(array $options)
    {
    return array(
    'data_class' => 'Tmp\TestBundle\Entity\Truc',
    );
}

    public function getName()
    {
        return 'truc';
    }
} 
```

**表格（我不发布 javascript 部分）**

{% 扩展 "::layout.html.twig" %}

```
{% block content %}

<form  method="POST" {{ form_enctype(form) }}>
    {# affiche l'unique champ de la tâche : description #}
    {{ form_row(form.name) }}

    <ul class="trucs" data-prototype="{{ form_widget(form.trucs.vars.prototype)|e }}">
        {# itère sur chaque truc existant et affiche son unique champ : name #}
        {% for truc in form.trucs %}
            <li>{{ form_row(truc.name) }}</li>
        {% endfor %}
    </ul>

    {{ form_rest(form) }}
    <input type="submit" class="btn btn-primary"/>
</form> 
```

**还有我的控制器**

```
namespace Tmp\TestBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
use Tmp\TestBundle\Entity\Machin;
use Tmp\TestBundle\Form\Type\MachinType;

class DefaultController extends Controller
{
    public function indexAction($name)
    {
        return $this->render('TmpTestBundle:Default:index.html.twig', array('name' => $name));
    }
    public function newAction(){
        $em = $this->getDoctrine()->getManager();
        $machin = new Machin();
        $form = $this->createForm(new MachinType(),$machin);
        $request = $this->get('request');
        if ($request->isMethod('POST')) {

              $form->bindRequest($request);
               //if ($form->isValid()) {

                $em->persist($machin);
                $em->flush();
                 return $this->redirect($this->generateUrl('tmp_list'));
               //}
           }else{

           }
        return $this->render('TmpTestBundle:Default:new.html.twig',array('form' => $form->createView()));
    }
    public function listAction(){
        $em = $this->getDoctrine()->getManager();

        $machin = $em->getRepository("TmpTestBundle:Machin")->findAll();
        return $this->render('TmpTestBundle:Default:list.html.twig',array('machins' => $machin));
    }
} 
```

当我尝试保留我的实体时，出现以下错误

> 可捕获的致命错误：传递给 Tmp\TestBundle\Entity\Machin::setTrucs() 的参数 1 必须是 Doctrine\Common\Collections\ArrayCollection 的实例，给定数组

我不知道我错过了什么，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:44:30.290

您可能已经复制/粘贴了很多示例。
您必须将`Machin`构造函数更改为：

```
public function __construct()
{
    $this->trucs = new ArrayCollection();

    //This was wrong:
    //$this->tags = new ArrayCollection();
} 
```

另请注意，在您的`MachinType`课程中，您不需要，`'prototype' => true`因为它默认为该值：[http ://symfony.com/doc/current/reference/forms/types/collection.html#prototype](http://symfony.com/doc/current/reference/forms/types/collection.html#prototype)

# javascript - javascript表单不起作用

> ID：15097607
> 
> 赞同：0
> 
> 时间：2013-02-26T19:28:50.903
> 
> 标签：javascript, forms

我试图创建一个 javascript 表单，但我无法让它工作。出现的错误是

*   邮政编码应由字母和数字组成：
*   地址应该是字母数字：
*   请将每本杂志限制在 500 份或更少

    函数 display() { var totprice; var fname、lname、fullname、addr、postocde、电子邮件、电话、lstitem、数量、性别；var prditem1，prditem2，prditem3，2012 年夏季，2012 年秋季，2012 年冬季，totqty；var orddate; fname = document.form1.fname.value; lname = document.form1.lname.value; //全名 = fname + " " + lname; 性别 = document.form1.gender.value; addr = 文档.form1.address.value; 邮政编码 = document.form1.address.value; 电子邮件 = document.form1.email.value; 电话 = document.form1.telephone.value; prditem1 = document.form1.summer.value; prditem2 = document.form1.autumn.value; prditem3 = document.form1.winter.value; summer2012 = parseInt(document.form1.summer2012.value); 秋季 2012 = parseInt(document.form1.autumn2012.value); Winter2012 = parseInt(document.form1.winter2012.value); totqty = 2012 年夏季 + 2012 年秋季 + 2012 年冬季；orddate = 新日期（）；dispdate = orddate.getMonth() + 1 + "-" + orddate.getDate() + "-" + orddate.getYear(); var alertmsg = ''; var 字母 = /^[a-zàâçéèêêëîïôûùüÿñ-]*$/i var 字母数字 = /^[a-zA-Z0-9/./,/-/\n]+$/; var addrtxt = addr.replace(/(\x0a\x0d|\x0d\x0a)/g, "\n"); var chkpostcode = /^((GIR 0AA)|((([A-PR-UWYZ][A-HK-Y]?[0-9][0-9]?)|(([A-PR-UWYZ] ][0-9] [A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRV-Y]))) [0-9][ABD-HJLNP -UW-Z]{2}))$/ var chktelephone = /^0\d{9,10}$/ var chkEmail = /^.+@.+..+$/ var chkquantity = /^([1 -9]?\d|[1-4]\d{2}|500)$/ if (chkEmail.test(email) == false) { alertmsg = alertmsg + " gender1) { alertmsg = alertmsg + "请选择您的性别\n" } if (((document.form1.summer.checked) && (summer2012 <= 0)) || ((document.form1.autumn.checked) && ( fall2012 <= 0)) || ((document.form1.winter.checked) && (winter2012 <= 0))) { alertmsg = alertmsg + "请输入数量" + "\n"; } else if (((!document.form1.summer.checked) && (summer2012 > 0)) || ((!document.form1.autumn.checked) && (autumn2012 > 0)) || ((!document.form1 .winter.checked) && (winter2012 > 0))) { alertmsg = alertmsg + "请选择产品" + "\n"; } var f = document.form1; 如果 (!f.summer.checked && !f.​​autumn.checked && !f.​​winter.checked) { alertmsg = alertmsg + " 数量[1] = parseInt(document.form1.autumn2012.value); 数量[2] = parseInt(document.form1.winter2012.value); for (i = 0; i < 3; i++) { totprice = totprice + 数量[i] * price[i]; } 返回（总价）；} }

谁能建议我做错了什么？任何帮助将不胜感激。谢谢

这是html -

```
<form name="form1" method="post">
    <fieldset id="fieldset">
       <legend id="legend">Order the latest Saraysounds Magazine</legend>

<table width="500" border=0 align="left" cellpadding="4" cellspacing="4">

        <tr>
          <td colspan="2"><div align="left">First
              Name</div></td>
          <td colspan="2"><input type="text" name="fname"/>
          </td>
        </tr>
        <tr>
          <td colspan="2"><div align="left">Second
              Name</div></td>
          <td colspan="2">
            <input type="text" name="lname"/>
         </td>
        </tr>

        <tr>
          <td colspan="2"><div align="left">Gender</div></td>
          <td colspan="2">
            <input type="radio" name="gender" value="M"/>
           Male 
            <input type="radio" name="gender" value="F"/>
            Female </td>
        </tr>

        <tr>
          <td colspan="2"><div align="left">Address</div></td>
          <td colspan="2"><textarea name="address" cols="30" rows=5 col=40 wrap=soft>     </textarea>
          </td>
          </tr>
          <tr>
           <td colspan="2"><div align="left">Postcode</div></td>
          <td colspan="2">  <input type="text" name="postcode"/>
      </td>
    </tr>

       <tr>
      <td colspan="2"><div align="left">Email</div></td>
      <td colspan="2">
        <input type="text" name="email"/>
      </td>
    </tr>

     <tr>
      <td colspan="2"><div align="left">Telephone</div></td>
      <td colspan="2">
        <input type="text" name="telephone"/>
      </td>
    </tr>

    <tr>
             <td colspan="4"><center>
               <strong>Select
               Magazine</strong>
             </center></td>
             </tr>
             <tr>
             <td width="123"><center>
               <strong>Product Name</strong>
             </center></td>
             <td width="30" ><center>
               <strong></strong>
             </center></td>
               <td ><center>
               <strong>Price</strong>
             </center></td>
               <td>
              <strong>Quantity</strong>
             </td>
             </tr>
           <tr>
             <td  align="right">Summer 2012
               </td>
             <td>
               <input type="checkbox" name="summer" value="Summer 2012"/>
           </td>
             <td align="center" width="69"><div align="right">20.00 </div></td>
             <td width="216"><input name="summer2012" type="text" size="5" value="0"/></td>
           </tr>
         <tr>
             <td align="right">Autumn 2012
             </td>
             <td>
               <input type="checkbox" name="autumn" value="Autumn 2012"/>
           </td>
             <td align="center" width="69"><div align="right">20.00 </div></td>
             <td><input name="autumn2012" type="text" size="5" value="0"/></td>
         </tr>
         <tr>
             <td align="right">Winter 2012
           </td>
             <td>
               <input type="checkbox" name="winter" value="Winter 2012"/>
          </td>
             <td align="center"  width="69"><div align="right">20.00</div></td>
             <td><input name="winter2012" type="text" size="5" value="0"/></td>
         </tr>

           <tr>
             <td align="center" colspan="4"><input name="button" type="button" onClick="javascript:display()" value="Submit"/>
              <input type="reset" value="Clear Form"/>
             </td>
           </tr>
      </table>

 </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:48:56.627

修改这些：

*脚本*

```
var alphanumeric = /^[a-zA-Z0-9\.\,\-\n]+$/;

var quantity = new Array();
 quantity[0] = parseInt(document.form1.summer2012.value);
 quantity[1] = parseInt(document.form1.autumn2012.value);
 quantity[2] = parseInt(document.form1.winter2012.value);
 if (quantity[0] > 500 || quantity[1] > 500 || quantity[2] > 500) {
     alertmsg = alertmsg + "Please limit each magazine to 500 copies or less:" + "\n";
 } 
```

*HTML*

```
<td colspan="2"><textarea name="address" cols="30" rows=5 col=40 wrap=soft></textarea> 
```

# visual-studio - 在 Visual Studio 中调试可执行文件

> ID：15097610
> 
> 赞同：28
> 
> 时间：2013-02-26T19:28:56.040
> 
> 标签：visual-studio, debugging, exe

想在调试器下调试一个可执行文件。如何在视觉工作室中做到这一点。

Windbg 有一个打开可执行文件的选项。但我发现 VS 2010 中缺少这一点。

[这个问题与Visual Studio 2010 中的 Debug exe](https://stackoverflow.com/questions/12936303/debug-exe-in-visual-studio-2010)并不完全相同， 因为我对执行图像文件来调试启动并不感兴趣。

宁愿只调试debugger下的exe，一旦坏了，想设置一些断点，了解执行流程。

尽管执行图像文件是一种解决方法。

我不确定这个问题是否幼稚；但这是一个非常直线的用例场景，我发现在 MS VS 2010 中丢失了。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-26T22:18:16.923

您没有在问题中指定它，但我假设您没有源代码。只需使用文件/打开项目/解决方案，选择 EXE 文件并打开它。然后选择调试/开始调试。另一个选项是先运行 EXE，然后选择 Debug/Attach to process。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-17T17:56:39.047

如果您要问的是如何将 VS 附加到要运行的 exe，那么您可以按照以下步骤操作：

1.  运行可执行文件
2.  在 VS 中导航到 Debug -> Attached to Process
3.  找到通过运行可执行文件创建的进程，然后单击“附加”。

但是，如果您尝试运行的可执行文件几乎立即失败或快速运行并退出，那么您可以尝试以下步骤：

1.  在代码开头设置调试点
2.  将您的构建切换到调试并运行应用程序。

如果您的应用程序在调试中运行，但在执行 exe 时失败，那么您可以尝试这些步骤来查看您的应用程序是否会在控制台窗口或其他窗口中提供更多信息。

1.  确保您的构建设置为发布。
2.  导航到调试-> 不调试就开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-22T12:41:04.570

如果你有源代码，你可以使用`Debugger.Launch();`

您将它放在代码中的任何位置，构建 .exe，然后一旦它启动（例如通过 Process.Start）并到达`Debugger.Launch();`，一个窗口将询问您要如何附加到该进程。
[![在此处输入图像描述](../Images/053cd18e0314519398c9ddf1b35ef611.png)](https://i.stack.imgur.com/Ze895.png)

通常，您将附加到某个 Visual Studio 实例，它会自动暂停`Debugger.Launch();`已放置的调试器。

然后，您可以打开项目的文件（文件 -> 打开 -> 文件...）并将断点放置在您想要的任何位置。

# html - HTML5 视频背景不起作用

> ID：15097613
> 
> 赞同：0
> 
> 时间：2013-02-26T19:29:01.297
> 
> 标签：html, video, html5-video, dreamweaver

最近我开始了一个大学项目，我将在我的 HTML5 索引页面上放一段视频作为背景。我让它与股票视频完美配合，但是当我制作自己的视频并将其转换为 .mp4、.ogv 和 .webm 时，我现在得到的只是空白的黑屏。我在代码中看不到任何错误：

```
<video id="video_background" preload="auto" autoplay="true" loop="loop" muted volume="0">
        <source src="backgroundvideo.webm" type="video/webm"/>
        <source src="backgroundvideo.ogv" type="video/ogg ogv"; codecs="theora, vorbis"/>
        <source src="backgroundvideo.mp4" type="video/mp4"/>
        Video not supported
</video> 
```

会不会是我用的电影转换器？我使用了 Miro 视频转换器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:38:02.993

如果视频与 HTML 存储在同一目录中，并且文件名正确，则应该没问题。如果您在几种不同的浏览器中尝试过（我假设您已经尝试过），那么，是的，它可能是视频编码。

# c# - 在 C# 中监视变量

> ID：15097617
> 
> 赞同：3
> 
> 时间：2013-02-26T19:29:14.280
> 
> 标签：c#, multithreading

我想知道在 C# 中监视变量的最佳方法是什么。这不是为了调试。我基本上希望程序在运行期间始终监控其变量之一。例如。我正在尝试观察 _a 是否小于 0；如果是，则程序停止。

```
 _a = _b - _c; // (_b >= _c) 
```

所以 _a 的范围在 [0 N] 内，其中 N 是一些正整数；我觉得最好是启动一个监视_a值的线程。一旦它，那么我应该回应。但我不知道如何实现它。有人有什么建议吗？一小段代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T19:31:38.413

您可以将此“变量”设置为您的类的属性，或者甚至将它的访问权限包装到设置值的方法中，而不是尝试*监视*此变量中的值。

通过使用属性或方法，您可以将自定义逻辑注入到属性设置器中，它可以做任何事情，包括“停止程序”。

就个人而言，如果目标是停止程序，我会使用一种方法：

```
private int _a;
public void SetA(int value)
{
    if (value < 0)
    { 
        // Stop program?
     }
    _a = value;
} 
```

然后通过以下方式调用：

```
yourClass.SetA(_b - _c); 
```

我更喜欢一种方法的原因是它具有明显的、戏剧性的副作用，并且期望属性设置器将是一种快速操作。但是，从技术角度来看，属性设置器也可以正常工作。

属性可以做同样的事情：

```
private int _a;
public int A
{
    get { return _a; }
    set
    {
        if (value < 0)
        {
            // Handle as needed
        }

        _a = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:33:28.440

最好的方法是用属性封装你的变量。

使用这种方法，您可以使用自定义逻辑扩展属性的设置器以验证值、记录变量的更改或变量/属性已更改的通知（事件）。

```
 private int _a;

 public int MyA {
  get{
    return _a;
  }
  set {
    _a = value;
  }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:36:02.057

你应该调查一下[`Observer Pattern`](http://msdn.microsoft.com/en-us/library/ee817669.aspx)。

请参阅[带有 IObserver(T) 的 .NET 4.0 中的](http://www.mbaldinger.com/post/Observer-in-NET-40-with-IObservable(T).aspx)观察者和[在 C# 中理解和实现观察者模式](http://www.codeproject.com/Articles/328361/Understanding-and-Implementing-Observer-Pattern-in)。

# git - 将更改从原始内容拉到 fork - bitbucket

> ID：15097619
> 
> 赞同：1
> 
> 时间：2013-02-26T19:29:25.357
> 
> 标签：git, bitbucket

我有来自原始存储库的叉子。在原始存储库中创建新分支时，如何将更新从原始存储库拉到我的 fork ？我使用 git 和 bitbucket。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:45:34.067

Github 有一个很棒的页面描述了如何做到这一点：[https ://help.github.com/articles/fork-a-repo](https://help.github.com/articles/fork-a-repo)

1.  git 远程添加上游 [your-original-repo-git-url]
2.  git 获取上游
3.  git 合并上游/主

耶！

如果您想要替代分支，在第 2 步之后，您将能够看到它们。因此，如果上游创建了 1-3-stable：

```
git checkout -b 1-3-stable  
git merge upstream/master 
```

# wpf - 如何在 mvvm 应用程序中的每个文本框焦点事件上调用事件触发器

> ID：15097620
> 
> 赞同：3
> 
> 时间：2013-02-26T19:29:26.573
> 
> 标签：wpf, mvvm

我正在开发一个触摸屏应用程序，当光标聚焦在任何文本框上时，我需要打开触摸屏键盘。我正在使用以下代码来调用视图模型中的命令。

```
 <i:Interaction.Triggers>
   <i:EventTrigger EventName="GotFocus">
     <i:InvokeCommandAction Command="{Binding openKeyboard}" />
   </i:EventTrigger>
 </i:Interaction.Triggers> 
```

当我在每个文本框上写时它工作正常......让我有多个文本框在一个表单中，有什么方法可以通用地编写它并且应该适用于我的表单（或）应用程序的所有文本框？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:52:13.153

我喜欢使用附加行为。这是我在获得焦点时在文本框中选择值的示例。这样您就可以将此行为应用于任何文本框。附加行为的一大优点是许多属性/事件位于 UIElement 级别，因此您可以跨多个控件重用某些行为。无论如何，这是我的例子：

**行为**

```
 public class SelectAllOnFocusedBehavior
{

    private static bool GetSelectAllOnFocused(TextBox textBox)
    {
        return (bool) textBox.GetValue(SelectAllOnFocusedProperty);
    }

    public static void SetSelectAllOnFocused(
        TextBox textBox, bool value)
    {
        textBox.SetValue(SelectAllOnFocusedProperty, value);
    }

    public static readonly DependencyProperty SelectAllOnFocusedProperty =
        DependencyProperty.RegisterAttached(
            "SelectAllOnFocused",
            typeof (bool),
            typeof (SelectAllOnFocusedBehavior),
            new UIPropertyMetadata(false, OnSelectAllOnFocusedChanged));

    private static void OnSelectAllOnFocusedChanged(
        DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        TextBox item = depObj as TextBox;
        if (item == null)
            return;
        if (e.NewValue is bool == false)
            return;

        if ((bool) e.NewValue)
        {
            item.PreviewMouseLeftButtonDown += item_IgnoreLeftMouseDown;
            item.GotFocus+=item_GotFocus;
        }
        else
        {
            //remove EventsHere
            item.PreviewMouseLeftButtonDown -= item_IgnoreLeftMouseDown;
            item.GotFocus -= item_GotFocus;
        }

    }

    static void item_IgnoreLeftMouseDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        // Find the TextBox
        DependencyObject parent = e.OriginalSource as UIElement;
        while (parent != null && !(parent is TextBox))
            parent = VisualTreeHelper.GetParent(parent);

        if (parent != null)
        {
            var textBox = (TextBox)parent;
            if (!textBox.IsKeyboardFocusWithin)
            {
                // If the text box is not yet focussed, give it the focus and
                // stop further processing of this click event.
                textBox.Focus();
                e.Handled = true;
            }
        }
    }

    static void  item_GotFocus(object sender, RoutedEventArgs e)
    {
         var item = e.OriginalSource as TextBox;
         if (item != null)
            item.SelectAll();
    }

    //EventHandler Here

} 
```

**对应的wpf**

```
 <TextBox x:Name="blahblah"  
                                 cmds:SelectAllOnFocusedBehavior.SelectAllOnFocused="True"
                                 cmds:NextTabItemOnEnterBehavior.NextTabItemOnEnter="True"
                                 Height="20" Width="75" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-31T09:47:43.123

如果您使用的是 Caliburn，您可以执行以下操作来触发 ViewModel 上的某些内容：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="GotFocus">
        <cal:ActionMessage MethodName="openKeyboard" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

*然后在 ViewModel 上创建一个与MethodName*同名的方法：

```
public void openKeyboard()
{
    // Do your stuff
} 
```

我希望它有所帮助。

# php - PHP Wordpress 代码回显的 slug 不是术语？

> ID：15097625
> 
> 赞同：0
> 
> 时间：2013-02-26T19:29:49.070
> 
> 标签：php, wordpress, taxonomy, custom-fields

有谁知道我如何为我的自定义分类法（在 Magic Fields 2 插件中创建）更改以下代码来解决我的问题。我希望它回`name`显所选值而不是`slug`格式。例如，我想回应`Client 1`and`Client 2`而不是`client-1`和`client-2`现在一样。

我想显示带有空格和正确大小写的多字名称，例如`Joe Bloggs Associates`not `joe-bloggs-associates`。

`project_statistics_client`是在 Magic Fields 中创建的字段的名称。自定义字段的类型是`Term`下拉列表，并使用我的自定义分类中的值填充，称为`Clients`. 该字段位于已命名的字段组内，`project_statistics`但我不确定组名是否会影响代码？

另请注意，以上所有内容都属于自定义帖子类型，称为`Projects`.

我检查了[插件](http://wiki.magicfields.org/doku.php?id=magic_fields_v2.0)帮助，但仍然不确定：

这是代码：

```
<?php $clients = get_field('project_statistics_client');
    foreach($clients as $client){
        echo '<div>' . $client . '</div>';
    } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:03:59.607

好的，过了一会儿我记得我从论坛帖子中粘贴了一些代码，这使我可以使用分类/类别选项填充术语下拉字段。我现在认为这就是问题所在，为什么它输出的是 slug 而不是名称？我还决定使用类别而不是分类，因为我想根据所选值过滤帖子循环，并且从我读到的内容来看，使用类别更容易实现。我附在我添加到functions.php的代码下方，因为a）其他人可能想将它与Magic Fields一起使用，但也b）希望有人可能知道我需要更改什么才能输出名称而不是slug？

```
/**
* Custom Taxonomy Dropdown
*/

// initialisation
global $mf_domain;

// class with static properties encapsulating functions for the field type

class term_field extends mf_custom_fields {

public $allow_multiple = TRUE;
public $has_properties = TRUE;

public function _update_description(){
global $mf_domain;
$this->description = __("This field allows to do relations with taxonomie terms",$mf_domain);
}

public function _options(){
global $mf_domain;

// Get the taxonomie as dropdownoption
$select = array();
$tax = get_taxonomies();
foreach($tax as $k => $v){
$select[] = $v;
}

$data = array(
 'option' => array(
    'term' => array(
      'type' => 'select',
      'id' => 'term',
      'label' => __('related taxonomy: ',$mf_domain),
      'name' => 'mf_field[option][term]',
      'default' => '',
      'options' => $select,
      'add_empty' => false,
      'description' => '',
      'value' => '',
      'div_class' => '',
      'class' => ''
    ),
  )
);
return $data;
}

public function display_field( $field, $group_index = 1, $field_index = 1 ) {
global $mf_domain;

// If is not required this field be added a None value
$notype = "";
if( !$field['required_field'] ) {
  $notype = ( !empty($field['options']['notype']) ) ? $field['options']['notype'] : __( "-- None --" , $mf_domain );
}

$output = '';

// Get the taxonomie as dropdownoption
$select = array();
$tax = get_taxonomies();
foreach($tax as $k => $v){
$select[] = $v;
}

$option_from_term_array = $field['options']['term'];
$options = get_terms($select[$option_from_term_array], array('hide_empty' => false));
$output = '<div class="mf-dropdown-box">';
$value = $field['input_value'];

$output .= sprintf('<select class="dropdown_mf" id="%s" name="%s" >',$field['input_id'],$field['input_name']);

if( $notype != "" ) {
  $output .= "<option value=''>$notype</option>";
}

foreach($options as $option) {

  $check = ($option->slug == $value) ? 'selected="selected"' : '';
  $output .= sprintf('<option value="%s" %s >%s</option>',
    esc_attr($option->slug),
    $check,
    esc_attr($option->name)
  );
}
$output .= '</select>';
$output .= '</div>';

return $output;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:49:36.693

```
 global $post;
    $taxonomy = 'your taxonomy';
    $terms = get_the_terms($post->ID, $taxonomy);
    if ( is_array($terms) ) {
        echo(implode(',', wp_list_pluck($terms, 'name')));
    } 
```

Magic Fields 2 只为基本的 WordPress 分类功能提供了一个不错的 GUI，因此可以使用所有 WordPress 分类功能。特别是，get_the_terms() 可用于获取帖子的类别。这将返回一个对象数组（一篇文章可能属于多个类别）。此外，您需要从对象中提取“名称”字段。

# css - 为另一个div的顶部属性自动继承div的高度？

> ID：15097627
> 
> 赞同：1
> 
> 时间：2013-02-26T19:29:51.053
> 
> 标签：css

这是我的工作示例：http:
[//jsfiddle.net/UGhKe/2/](http://jsfiddle.net/UGhKe/2/)

# CSS

```
#body {
    height: 200px;
    background: black;
    width: 100%;
}
.header {
    position: fixed;
    top: 0;
    background: #369;
    z-index: 1;
    width: 100%;
    height: 5em;
}
.content {
    position: absolute;
    top: 5em;
    overflow: hidden;
    height: 1000px;
    background: #936;
    z-index: 0;
    width: 100%;
}
.footer {
    position: fixed;
    bottom: 0;
    background: #396;
    width: 100%;
}
.large {
    font-size: 120%;
    padding: 2em;
} 
```

# HTML

```
<div id="body">
    <div class="header">
        <div class="large">Header</div>
    </div>
    <div class="content">
        Content, you should be able to see this when you scroll to top.
    </div>
    <div class="footer">
        <div class="large">Footer</div>
    </div>
</div> 
```

当您滚动顶部时，我希望内容位于标题下方（但当您向下滚动时隐藏在标题下方） - 这很好用......

但是我需要删除**top: 5em**并使用类似“继承标题的当前高度”之类的东西——没有 JS 是否可能？

如果没有 JS 真的不行，那么我可以只使用 JS，但我宁愿尝试在纯 CSS 中找到解决方案。

# 编辑：

我应该注意，我不能使用**top: 5em**的原因是因为标题没有固定的高度 - 将在文本内部使用图像（用于徽标），并将其设置为最大宽度： 100% 以便它缩小到适合 iPhone 的宽度，并且不会在 iPad 上扩展太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:50:48.130

看看这是否适合你。[http://jsfiddle.net/UGhKe/3/](http://jsfiddle.net/UGhKe/3/)

我添加了另一个`div`具有相同`height`但“非固定”的内容来模拟您的固定标题。

HTML

```
<div id="body">
    <div id="blockHeader"></div>
    <div class="header">
        <div class="large">Header</div>
    </div>
    <div class="content">
        Content, you should be able to see this when you scroll to top.
    </div>
    <div class="footer">
        <div class="large">Footer</div>
    </div>
</div> 
```

CSS

```
html, body { margin:0;  padding:0; }

#blockHeader 
{ 
    width:100%;
    height: 5em;
}

.content {
    position: absolute;
    overflow: hidden;
    height: 1000px;
    background: #936;
    z-index: 0;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:52:15.593

您可以使用变量来做到这一点（为此使用 SASS 或 LESS）。看看[笔](http://codepen.io/WiechersV/pen/DLtBI)。

代码：

```
$headerContentVariable: 5em;

#body {
    height: 200px;
    background: black;
    width: 100%;
}
.header {
    position: fixed;
    top: 0;
    background: #369;
    z-index: 1;
    width: 100%;
    height: $headerContentVariable;
}
.content {
    position: absolute;
    top: $headerContentVariable;
    overflow: hidden;
    height: 1000px;
    background: #936;
    z-index: 0;
    width: 100%;
}
.footer {
    position: fixed;
    bottom: 0;
    background: #396;
    width: 100%;
}
.large {
    font-size: 120%;
    padding: 2em;
} 
```

# ruby-on-rails - 在 Rails 3 中全局更改验证错误消息

> ID：15097629
> 
> 赞同：0
> 
> 时间：2013-02-26T19:30:02.090
> 
> 标签：ruby-on-rails, activerecord, model

我正在寻找一种干净的方法来全局更改所有模型、所有属性等的验证失败消息。在 Ruby on Rails 3 应用程序中。诸如将“不能为空白”更改为“必需”之类的内容。

我已经发现了语言环境文件，但我宁愿不必将应用程序中每个模型的每个属性都添加到列表中，然后必须对其进行维护。对于看似简单的事情来说，这听起来太复杂了。

有没有这样做的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:02:39.383

诺亚米勒在评论中提供了我的问题的答案。

看来这个问题是重复的：

[Rails 3.0 中的默认验证错误消息在哪里？](https://stackoverflow.com/questions/3808361/where-are-default-validation-error-messages-in-rails-3-0)

和

[更改 Rails 中的默认错误消息](https://stackoverflow.com/questions/1538212/changing-default-error-messages-in-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:41:14.700

i18n rails有一个[项目。](https://github.com/svenfuchs/rails-i18n)您可以按照他们页面中的说明进行操作，或者只需下载您喜欢的语言环境[yaml](https://github.com/svenfuchs/rails-i18n/tree/master/rails/locale)。

这将解决您的*Can't be blank*问题以及您将来使用该语言时遇到的所有问题。

# c# - Html.TextAreaFor 在 Chrome 和 Firefox 中插入换行符

> ID：15097631
> 
> 赞同：0
> 
> 时间：2013-02-26T19:30:07.737
> 
> 标签：c#, asp.net-mvc-3

该页面的模型有一个称为指令的字符串属性，它显示在文本区域中，无论是添加还是编辑对象，都会无缘无故地插入换行符，我找不到。

Html.TextAreaFor(m => m.Instructions) 是唯一相关的代码。在 Chrome 和 Firefox 中，文本区域中会出现换行符，但在 Internet Explorer 中不会出现。

我在这里很茫然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:45:27.337

在搜索了更多之后，我发现这与 AntiXssLibrary 有关。

这里有更多信息 [http://forums.asp.net/t/1693760.aspx/1](http://forums.asp.net/t/1693760.aspx/1)

通过阅读本文，听起来它已在 MVC 4 [http://aspnet.codeplex.com/workitem/8848中修复](http://aspnet.codeplex.com/workitem/8848)

如果您使用的是 AntiXssLibrary 和 MVC3，则必须使用 javascript 手动去除换行符。

# jquery - 单击后如何更改按钮的attr和id？使用jQuery？

> ID：15097634
> 
> 赞同：2
> 
> 时间：2013-02-26T19:30:10.410
> 
> 标签：jquery, onclick

我试图让一个按钮即时更改其 onclick 和 id 属性。但是对于一些准备好的，我只能在第一次更改这些属性。

[http://jsfiddle.net/WJTD5/1/](http://jsfiddle.net/WJTD5/1/)

```
$("#btn1").click(function () {
    window.alert("im changing id to btn2 and ho ho ho");
    $("#btn1").val("ho ho ho");
    $("#btn1").attr("id", "btn2");    
});

$("#btn2").click(function () {
    window.alert("im changing id to btn1 and hey hey");
    $("#btn2").val("hey hey");
    $("#btn2").attr("id", "btn1");    
}); 
```

这是示例。我看到id变了，但是调用了错误的onclick函数。

我想要完成的是以下内容：

*   用户在表单上输入一些东西，然后点击搜索——>应该返回一些数据
*   如果有数据，那么按钮应该改变它的 id 和 onclick
*   如果不是，保持不变

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T19:32:31.977

您在 id 更改为 之前附加事件`btn2`，因此`$("#btn2")`是一个空集合。在第一个回调中绑定点击处理程序，如下所示：

```
$("#btn1").click(function () {
    window.alert("im changing id to btn2 and ho ho ho");
    $("#btn1").val("ho ho ho");
    $("#btn1").attr("id", "btn2");

    $("#btn2").unbind("click").click(function () {
        window.alert("im changing id to btn1 and hey hey");
        $("#btn2").val("hey hey");
        $("#btn2").attr("id", "btn1");    
    });
}); 
```

这是一个演示：http: [//jsfiddle.net/73zA2/](http://jsfiddle.net/73zA2/)

或者，您可以将事件处理委托给元素的祖先：

```
$("#btn1").parent().on("click","#btn1", function () {
    window.alert("im changing id to btn2 and ho ho ho");
    $("#btn1").val("ho ho ho");
    $("#btn1").attr("id", "btn2");   
})
.on("click","#btn2",function () {
    window.alert("im changing id to btn1 and hey hey");
    $("#btn2").val("hey hey");
    $("#btn2").attr("id", "btn1");    
}); 
```

这是该方法的演示：http: [//jsfiddle.net/2YKFG/](http://jsfiddle.net/2YKFG/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:35:22.113

我建议您在更高的元素上使用委托将点击绑定到，即：

```
$("#buttonParent").on('click', '#btn1', function () {
    window.alert("im changing id to btn2 and ho ho ho");
    $("#btn1").val("ho ho ho");
    $("#btn1").attr("id", "btn2");    
});

$("#buttonParent").on('click', '#btn2', function () {
    window.alert("im changing id to btn1 and hey hey");
    $("#btn2").val("hey hey");
    $("#btn2").attr("id", "btn1");    
}); 
```

这是 jsFiddle 中的解决方案：http: [//jsfiddle.net/WJTD5/4/](http://jsfiddle.net/WJTD5/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T19:37:23.913

您是否有理由更改元素的 ID？我不会推荐它，而是选择使用类。这是一个例子：

```
$("#btn1").click(function () {
    if ($(this).hasClass("state1")){
       window.alert("im changing id to btn2 and ho ho ho");
       $(this).val("ho ho ho");
       $(this).toggleClass("state1 state2");
    } else {
        window.alert("im changing id to btn1 and hey hey");
       $(this).val("hey hey");
       $(this).toggleClass("state1 state2");   
    }
}); 
```

[http://jsfiddle.net/WJTD5/2/](http://jsfiddle.net/WJTD5/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-24T03:04:02.973

对我来说，我不得不使用下面发布的内容。使用单独的 .val() 和 .attr() 部分不会在我的代码中运行。这就是我的解决方案。

```
var clickSelectFav = true;

var one = function () {
    $("#heart").on('click', '#select_fav', function () {
        alert("changing id to delete_favorite");
        $("#select_fav").attr({id: 'del_fav', src: 'heart.png'});
    });
}

var two = function () {
    $("#heart").on('click', '#del_fav', function () {
        alert("changing id to select_favorite ");
        $("#del_fav").attr({id: 'select_fav', src: 'emptyheart.png'});
    });
}

function call(){
    if(clickSelectFav) one();
    else two();
    clickSelectFav = !clickSelectFav;
} 
```

希望这可以帮助某人。

# c# - 如何将我自己的项目添加到文本框的默认上下文菜单（剪切、复制、粘贴、 ）。

> ID：15097635
> 
> 赞同：0
> 
> 时间：2013-02-26T19:30:11.677
> 
> 标签：c#, .net, vb.net, winforms

我很惊讶找到这个问题的解决方案是多么困难。我似乎找不到其他人问它。

我的表单上有一些基本的文本框控件。除了右键单击框中的标准剪切/复制/粘贴选项外，我还想添加自己的附加项目。

知道如何实现这一目标吗？我什至不知道从哪里开始。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:34:29.173

[建议](https://stackoverflow.com/questions/1346473/add-item-to-the-default-textbox-context-menu)实现您自己的菜单；您可以[提供默认操作](http://social.msdn.microsoft.com/Forums/is/csharpgeneral/thread/30a82a3a-a085-49f4-a5aa-f2eebeeba1e5)并添加您自己的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T17:52:56.460

我建议检查名为 ContextMenuControl 的控件。此控件允许您创建一个菜单并将其分配给您希望弹出此菜单的控件。然后当用户右键单击文本框时，您的菜单将弹出。

看看这个： http: [//msdn.microsoft.com/en-us/library/aa984254 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa984254%28v=vs.71%29.aspx)

# git - git 找到丢失的代码？

> ID：15097636
> 
> 赞同：2
> 
> 时间：2013-02-26T19:30:13.310
> 
> 标签：git

我做了一个错误修复，几天后它消失了。我在分支中看不到它，并且执行 git log path/to/file 并没有显示我的更改（是否有不同分支上的代码需要的标志？）。

如果我知道我编辑的文件或日期，我如何询问 git 我的源发生了什么？由于冲突或一些奇怪的事情，它可能被忽略/删除。我只是想知道它去了哪里。它是一个 3 行修复，我很容易重做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:46:52.933

当其他一切都失败时，您可以随时尝试查看`git reflog`.

您可以将其视为 git 中构建的安全网。它跟踪您在 git 中签出或提交的所有引用。

只需键入`git reflog`并查看是否可以找到包含更改的参考。通过`git show <hash of reference>`您可以获取有关参考的更多信息或使用您最喜欢的 git gui 打开哈希。

有关 git-reflog 的更多信息：

*   [http://www.kernel.org/pub//software/scm/git/docs/git-reflog.html](http://www.kernel.org/pub//software/scm/git/docs/git-reflog.html)
*   [http://gitready.com/intermediate/2009/02/09/reflog-your-safety-net.html](http://gitready.com/intermediate/2009/02/09/reflog-your-safety-net.html)

祝你好运

# python - 烧瓶神社模板' '.join

> ID：15097637
> 
> 赞同：5
> 
> 时间：2013-02-26T19:30:18.907
> 
> 标签：python, flask, jinja2

我有一个清单：

```
list = ['var','var','var'] 
```

在我的 Jinja 模板中，我想做：

```
{{'<br>'.join(list)}} 
```

但`<br>`实际显示在页面上。有没有办法在不添加另一个的情况下做到这一点

```
{% for item in list %}
{{item}}
<br>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T19:35:06.317

如果列表中的每个元素都是**安全**的（即不包含标记，或者在插入结果之前应该转义的字符），那么您可以将其标记为：

```
{{'<br>'.join(list)|safe}} 
```

可以肯定的是，如果您想以这种方式使用它，您应该在将每个项目提供`list`给模板引擎之前对其进行转义。否则，您的页面可能会受到[HTML 注入](https://www.owasp.org/index.php/HTML_Injection)/ [XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)的攻击（尤其是如果您的列表包含用户提交的数据）。

**更新：**正如@Doobeh 所指出的，[`join`过滤器](https://jinja.palletsprojects.com/en/2.11.x/templates/#join)接受一个自定义的安全分隔符，所以你可以使用它，并且内容`list`仍然会被转义：

```
{{ list|join('<br>'|safe) }} 
```

# c# - 实体框架还是 SQL Server Management Studio？

> ID：15097640
> 
> 赞同：3
> 
> 时间：2013-02-26T19:30:31.803
> 
> 标签：c#, entity-framework, domain-driven-design

使用域驱动设计最好是做微小的步骤（更改设计或代码，单元测试......）。

1.  我认为 SQL Server Management Studio 中的 SQL Server 很好（使脚本=编写代码），但是在我们测试设计之后，最后使用 DDD 编写数据库代码。

2.  使用 c# 编写代码，然后使用 EF 创建数据库，您将经常更改 c# 代码，这会隐式更改数据库代码。

如何最好地进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:16:53.197

假设您正在从事棕地项目。然后对于给定的用户故事：

1）设计和单元测试你的领域模型。

2）然后[集成测试](https://stackoverflow.com/a/7111748/625332)您的基础设施。这包括针对为这些测试动态创建的数据库（可以是内存中的或嵌入式的）测试存储库实现。NHibernate 会自动为您生成架构，不确定 EF。与持久性无关在这里肯定会有所帮助，因为您可以针对 SQLite 进行测试，但可以针对 SQL Server 运行。

3）然后为您的生产数据库[手动编写迁移脚本。](https://rads.stackoverflow.com/amzn/click/com/0321774515)没有任何黑魔法可以帮助您完成这一步。该脚本稍后可以由[RoundhouseE](https://code.google.com/p/roundhouse/)之类的框架执行。更多信息[在这里](https://stackoverflow.com/a/7140214/625332)。

冲洗并重复。对于尚未部署的绿地项目，您可以跳过第 3 步）并在第一次生产部署时生成“基线”脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:00:59.487

DDD 宣扬对持久性的无知，它指出您的域工件（实体的类、值对象）应该不知道它们是如何持久化的。然而，技术持久性问题并不总是容易避免或延迟。因此，代码中的模型通常会受到持久性技术的约束。

您已经预示了最好的方法：微小的步骤。问题是什么构成一个步骤。初始步骤可以包括在代码中设计模型，然后实现持久性。随后的步骤重复该过程。步骤很小的事实减少了您在代码中创建设计的机会，该设计无法轻松持久化，同时优先关注模型而不是数据库。

关于 SQL Management Studio 与 EF 生成器的使用，这是一个偏好问题。我更喜欢手工编写 SQL，其他人可能会喜欢 EF 的生成功能。

# java - 我是否有 Java 安全角色映射冲突

> ID：15097641
> 
> 赞同：2
> 
> 时间：2013-02-26T19:30:34.600
> 
> 标签：java, security

我有一个具有各种 URL 的客户服务应用程序。但是，一个 URL ( **adminquery** ) 是专门为客户服务管理员保留的，而不是现场代表。但是，只有当用户同时属于**用户**组和**管理员**组时，才能访问整个应用程序。如果某人仅在**用户**组中，则他们无法访问任何资源。所以我认为我的映射中某处存在逻辑冲突，它创建了某种 AND 条件。

有人可以在这里发现我哪里出错了吗？

网页.xml：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>User</web-resource-name>
        <url-pattern>/cs/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>cs</role-name>
    </auth-constraint>
</security-constraint>

<security-constraint>
    <web-resource-collection>
        <web-resource-name>Admin</web-resource-name>
        <url-pattern>/cs/adminquery</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint> 
```

glassfish-web.xml 映射

```
<security-role-mapping>
    <role-name>cs</role-name>
    <group-name>user</group-name>
    <group-name>admin</group-name>
</security-role-mapping>

<security-role-mapping>
    <role-name>admin</role-name>
    <group-name>admin</group-name>
</security-role-mapping> 
```

# html - CSS 样式比子元素短

> ID：15097644
> 
> 赞同：2
> 
> 时间：2013-02-26T19:30:56.940
> 
> 标签：html, css, styles

我正在做一个项目来更好地了解 Spring MVC 实践。为此，我一直在创建一个非常缩小的 Twitter 版本。基本上，用户可以登录并发布一些简介，还可以查看他们以前的简介和所有追随者的简介的时间线。

我在整个页面上有一个背景图像，中间有一个带有浅蓝色背景的容器，仅用于帖子简介框和时间线。浅蓝色背景仅位于可见页面的底部。如果时间线向下滚动到您必须向下滚动的单个页面视图，则浅蓝色背景将在初始加载时可见的底部停止。

我的页面定义如下： div class=blurb 是时间线中的简介。

```
<div id="container">
    <div id="mainPanel">
        <div id="timeline">
                <div class="class="blurb"">
                    <span class="user">test</span> <span
                        class="displayName">Test User</span> <span class="bodytext">This is a small blurb.</span>
                    <span class="timestamp">1 hours ago</span>
                </div>

                <div class="blurb">
                    <span class="user">admin</span> <span
                        class="displayName">Test admin</span> <span class="bodytext">This is another small blurb.</span>
                    <span class="timestamp">1 hours ago</span>
                </div>  
        </div>
    </div>
</div> 
```

容器的 CSS 样式如下所示。

```
#container {
    width: 650px;
    height: 100%;
    margin: 0 auto;
    padding: 10px;
    background-color: #DDEEF6;
} 
```

我可以修改该容器 CSS 以使其与时间线一样长吗？时间线随着每一篇宣传帖而增长。

高度定义为 100% 的屏幕截图 ![在容器样式中定义为 100% 的高度](../Images/3a161b790c2320435e576d888238528b.png)

高度未定义的屏幕截图 ![容器样式中未定义的高度](../Images/63279dbb377d54ce5a6ec88d4a084875.png)

**更新：** 好的，所以它绝对与花车有关。感谢下面的两位评论者。#socialPanel 定义如下：

```
#socialPanel {
    width: 250px;
    float: right;
} 
```

使用 Chrome 的开发人员工具，如果我清除浮动，则将社交面板放在我的简介/推文下方，并将浅蓝色背景一直移动到简介列表的下方。

关于我可以研究什么以使 socialPanel 保持在顶部左侧浮动，但我的浅蓝色背景仍然使用所有可用高度的任何建议？非常感谢帮助我解决这个问题！

**更新二：**

我结合了下面答案中显示的方法来解决我的问题。我添加了一个类更清晰的 div，`clear:both;`然后`height: 100%;`从#container 样式中删除了。这解决了问题。

**注意：** 添加`overflow: hidden;`到我的容器样式中会使页面在浅蓝色区域之后被切断，它不会使浅蓝色区域一直向下。

非常感谢所有的帮助！我还在学习，这一切都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:59:51.897

放在. `overflow:hidden`_`#container`

**它是如何工作的？**

有人会认为将这种样式放在容器上会隐藏浮动而不是包含它们。实际发生的是`overflow:hidden`使元素建立一个新的[块格式化上下文](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)。这修复了漂浮在其中的任何子项的浮动包含。这个 CSS 修复比在 HTML 中包含一个附加元素更实用，`clear:both`并且适用于所有现代浏览器，包括 IE7+。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:34:47.863

如果您只是从 中删除高度声明 ( `height: 100%;`) `#container`，它将像其子项一样扩展（当然还有背景）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:56:38.193

您可能只需要在两个内部 div 之后添加一个清除 div。[http://jsfiddle.net/c3vTU/1/](http://jsfiddle.net/c3vTU/1/)

```
<div class="outer">
  <div class="inner-left"> Stuff on the left</div>
  <div class="inner-right">Stuff on the right <br/><br/></div>    
  <div class="clearer"> </div>
</div> 
```

**CSS**

```
.outer {
    width: 520px;
    padding: 10px;
    background-color: #eee;
}

.inner-left {
    float: left;
    width: 300px;
    background-color: red;
}

.inner-right {
    float: right;
    width: 200px;
    background-color: yellow;
}

.clearer {
      clear: both; 
```

}

正如@MichaelIrigoyen 指出的那样，您也可以将`overflow: hidden`or `overflow:auto`（我认为更有意义）添加到您的容器中。[http://jsfiddle.net/c3vTU/4/](http://jsfiddle.net/c3vTU/4/)这更干净，我喜欢它！

# facebook-apps - 在多个域上托管应用程序是否需要多个 AppID？

> ID：15097645
> 
> 赞同：2
> 
> 时间：2013-02-26T19:30:58.827
> 
> 标签：facebook-apps, app-id, multiple-domains

我有一个 Silverlight 控件，用于创作一些图形内容，我正在着手将其集成到 Facebook，以便人们可以访问他们的图片。一切运行良好，我在 Silverlight 控件的主机页面上使用 JavaScript API 与 Facebook 交互（登录/注销、身份验证等）。

当我将我的应用程序在 Facebook 注册为网络应用程序时，问题就出现了。此主机页面/Silverlight Control 托管在多个域下。据我了解，我可以使用 www.example.com 和 www.example.net 之类的域注册我的 Web 应用程序，并且类似的根目录（例如 site.example.com）也可以使用。

但不适用于 www.example2.com。为了让我的应用程序能够在该域下登录 Facebook，我需要向 Facebook 注册一个单独的 Web 应用程序，并指定第二个域，从而获得第二个 Facebook 应用程序 ID。

我理解正确吗？我有很多这样的域（10+），将来还会有更多。还有另一种（更好的方法）来处理这种情况吗？

# android - Eclipse AAndroid未找到启动器活动。启动只会同步设备上的应用包

> ID：15097646
> 
> 赞同：0
> 
> 时间：2013-02-26T19:31:01.753
> 
> 标签：android, eclipse

我想先拥有 homescreenactivity。但是 eclipe 给了我这个错误：没有找到启动器活动！启动只会同步设备上的应用程序包！我应该怎么办？

```
android:versionCode="1"
android:versionName="1" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/myicon"
    android:label="@string/title_activity_home_screen"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.FootballChants.Soundboard"
        android:label="@string/title_activity_FootballChants" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
             <activity
        android:name="com.FootballChants.HomeScreenActivity"
        android:label="@string/title_activity_home_screen" >
        <intent-filter   >
            <action android:name="android.intent.action.MAIN" />

            <catogory android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:42:10.103

This is misspelled:

```
<catogory android:name="android.intent.category.LAUNCHER" /> 
```

It should be:

```
<category android:name="android.intent.category.LAUNCHER" /> 
```

# c# - 如何在运行时获取程序集路径，在 webserver、服务或 win 应用程序中运行

> ID：15097650
> 
> 赞同：0
> 
> 时间：2013-02-26T19:31:08.057
> 
> 标签：c#, reflection, resources

我有一个资源项目用于我们产品的各个部分。为了使其更灵活，我决定将 .resx 放在使用 resgen 工具处理的 dll 的外部，以允许用户即时添加自己的语言文件。由于项目将从不同的地方访问，web、服务或独立的winForm，我怎样才能获得.dll所在的路径，以便我可以提供正确的路径

```
[global::System.ComponentModel.EditorBrowsableAttribute(global::System.ComponentModel.EditorBrowsableState.Advanced)]
    public static global::System.Resources.ResourceManager ResourceManager {
        get {
            if (object.ReferenceEquals(resourceMan, null)) {
                temp = ResourceManager.CreateFileBasedResourceManager("Resources", cwd, null); 
                resourceMan = temp;
            }
            return resourceMan;
        }
    } 
```

我可以对路径进行硬编码，并且效果很好，尽管我宁愿让它在运行时找出路径。

我尝试过这样的事情，但是没有用

```
string fullPath = System.Reflection.Assembly.GetAssembly(typeof(Resources)).Location;

//get the folder that's in
string theDirectory = Path.GetDirectoryName(fullPath); ResourceManager temp =

"Could not find any resources appropriate for the specified culture (or the neutral culture) on disk. 
```

baseName：资源位置信息：文件名：Resources.resources"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:39:13.410

找到以下工作

[如何获取代码所在程序集的路径？](https://stackoverflow.com/questions/52797/how-do-i-get-the-path-of-the-assembly-the-code-is-in)

```
string codeBase = Assembly.GetExecutingAssembly().CodeBase;
UriBuilder uri = new UriBuilder(codeBase);
var path = Uri.UnescapeDataString(uri.Path);
var theDirectory = Path.GetDirectoryName(path); 
```

# vbscript - 用于插件字段的 VBScript MS-Word 查找和替换字符

> ID：15097655
> 
> 赞同：0
> 
> 时间：2013-02-26T19:31:26.710
> 
> 标签：vbscript, ms-word

好的，我已经搜索和搜索，希望这里有人可以帮助我。

我一直在尝试让一个 VBScript 程序打开一个 word 文档，搜索一个特定的字符并将其替换为一个 Addin 字段（即 { SEQ @ } ）

到目前为止，这是我所拥有的：

```
1     Const wdReplaceAll = 2
2     Set objWord = CreateObject("Word.Application")
3     objWord.Visible = True
4     
5     Set ObjDoc = objWord.Documents.Open("C:\path\to\.doc")
6     Set objSelection = objWord.Selection
7    
8     objSelection.Find.Text = "@"
9     objSelection.Find.Forward = True
10    objSelection.MatchWholeWord = True
11   
12    objSelection.Find.Replace.Text = "replacement text"
13   
14    objSelection.Find.Execute ,,,,,,,,,,wdReplaceAll 
```

此代码适用于“查找/替换”，但不适用于字段。

很多帮助会很棒！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:40:29.140

`Replace`替换文本，但您想添加一个字段。那是完全不同的事情。我建议`Find`搜索文本（保留选定的文本）然后`Add`是字段（替换选定的文本）：

```
With objWord.Selection
  .Find.Text = "@"
  .Find.Forward = True
  .Find.MatchWholeWord = True
  .Find.Execute

  .Fields.Add .Range, -1, "SEQ @", True
End With 
```

要替换所有出现的搜索字符串，您必须创建一个循环，该循环一直执行`.Find.Execute`，直到找不到更多匹配项。该`Execute`方法的返回值指示是否找到另一个匹配项。

```
With objWord.Selection
  .Find.Text = "@"
  .Find.Forward = True
  .Find.MatchWholeWord = True

  Do
    found = .Find.Execute
    If found Then .Fields.Add .Range, -1, "SEQ @", True
  Loop While found
End With 
```

在运行上述代码之前，请确保您的光标位于文档的开头，否则您可能会错过搜索文本的出现。

# javascript - 具有固定标题/标题的多个 div 一个接一个地自动滚动

> ID：15097658
> 
> 赞同：2
> 
> 时间：2013-02-26T19:31:34.883
> 
> 标签：javascript, jquery, html, css

我有一个包含多个 div 的 HTML 页面。每个 div 都有自己的部分。我的要求是最初加载包含所有部分的页面。然后自动滚动页面，以便第一个 div 部分的标题固定并且内容滚动。在其内容的末尾，第二节标题占据了第一节标题的位置，现在第 2 节的内容滚动。然后第三部分标题代替第二部分标题和第 3 部分自动滚动的内容，依此类推。在所有部分的末尾，它再次从第 1 部分开始。有人可以帮助我如何做到这一点吗？

下面是我的代码链接， [http ://pastebin.com/EAYtsWAT](http://pastebin.com/EAYtsWAT)

我正在使用 jsscroller 进行自动内容滚动。我能够滚动内容，但我不知道如何保持标题 Activity1 固定而不是滚动其内容，然后删除该标题并将其替换为 Activity2 标题，滚动其内容等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T15:21:37.493

在对您提供的代码进行一些整理之后（并将其[移至 jsfiddle](http://jsfiddle.net/martyk/VE4sU/12/)），这就是（我认为）您想要的东西。

jscroller 的功能相对有限，所以我必须进行一些调整才能将其组合在一起：

```
function SectionManager(){
    this.currentSection = null;
    this.sections = $("#content .section");
    this.numSections = this.sections.length;

    this.transition = function (current){
            //SCROLLER CODE STARTS HERE....
             $jScroller.config.refresh = 100;
            // Add Scroller Object
            $jScroller.config.obj = [];
            $jScroller.add(
                "#content .section.active .activityTbl",
                "#content .section.active .activityTbl > table",
                "up",
                3
            );
            // Start Autoscroller
            $jScroller.start();
            $jScroller.cache.init = true;
            //SCROLLER CODE ENDS HERE....
    };
    this.callback = function (){
        this.currentSection = (this.currentSection != null)
            ? (this.currentSection + 1) % this.numSections
            : 0
        ;
        $("#content .section").removeClass("active");
        $("#content .section:eq(" + this.currentSection + ")").addClass("active");
        this.transition();
    }

    this.run = function(){
        this.callback();
    };

}

manager = new SectionManager();
manager.run(); 
```

同样值得注意的是，我必须覆盖 $jScroller.scroll 函数以包含一个异步回调，以便在到达终点时触发：这将触发管理器的回调函数并将滚动功能转移到下一部分。

**编辑：**有关详细信息，请参阅[**jsfiddle**](http://jsfiddle.net/martyk/VE4sU/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T01:31:38.330

听起来您可以使用[Scrollorama](http://johnpolacek.github.com/scrollorama/)。您可以根据滚动固定和取消固定内容，而其他元素（内容）正常滚动。

# flash - 更改数据网格中的颜色行

> ID：15097661
> 
> 赞同：0
> 
> 时间：2013-02-26T19:31:42.673
> 
> 标签：flash, apache-flex, actionscript

我有一个已经满足我的脚本，但想向我的客户发送警告信号，表明有问题 我能够将线条颜色更改为红色 我正在工作

这可能发生在不同的线路中，而不是按顺序发生。如何应用此设置？

下面的脚本：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
<mx:Script>
<![CDATA[
    import mx.controls.Alert;
    import mx.controls.TextInput;
    import mx.events.DataGridEvent;
    import mx.events.DataGridEventReason;

    [Bindable]
    var Acumula:int = 0;

    protected function checkInput(event:DataGridEvent):void
    {

        if (event.reason == DataGridEventReason.NEW_ROW || event.reason == DataGridEventReason.NEW_COLUMN)
        {
            var editor:TextInput = (event.currentTarget as DataGrid).itemEditorInstance as TextInput;
            var text:String = editor.text;
            var myEditor:TextInput =  TextInput(event.currentTarget.itemEditorInstance);

            Acumula += int(myEditor.text);
            if(int(Acumula) > int(event.itemRenderer.data.score)) 
                {                           
                    Acumula = 0;

                    event.preventDefault();

                    Alert.show(text + "ULTRAPASSOU!");

                    return;
                }

        }
    }

]]>
</mx:Script>
<mx:ArrayCollection id="arrColl">
<mx:source>
    <mx:Array>
        <mx:Object label="Student A" score="85"/>
        <mx:Object label="Student B" score="48"/>
        <mx:Object label="Student C" score="71"/>
        <mx:Object label="Student D" score="88"/>
        <mx:Object label="Student E" score="24"/>
        <mx:Object label="Student F" score="64"/>
        <mx:Object label="Student G" score="76"/>
        <mx:Object label="Student H" score="76"/>
        <mx:Object label="Student I" score="93"/>
        <mx:Object label="Student J" score="88"/>
        <mx:Object label="Student K" score="48"/>
        <mx:Object label="Student L" score="76"/>
    </mx:Array>
</mx:source>
</mx:ArrayCollection>
<mx:DataGrid x="10" y="28" dataProvider="{arrColl}" editable="true" itemEditEnd="checkInput(event)">
<mx:columns>
    <mx:DataGridColumn headerText="Column 1"  dataField="label" editable="false"/>
    <mx:DataGridColumn headerText="Column 2"  dataField="score" editable="false"/>

    <mx:DataGridColumn headerText="Column 3"  editable="true" dataField="col1">
        <mx:itemEditor>
            <mx:Component>
                <mx:TextInput restrict="0-9"/>
            </mx:Component>
        </mx:itemEditor> 
    </mx:DataGridColumn>

    <mx:DataGridColumn headerText="Column 4"  editable="true" dataField="col2">
        <mx:itemEditor>
            <mx:Component>
                <mx:TextInput restrict="0-9"/>
            </mx:Component>
        </mx:itemEditor> 
    </mx:DataGridColumn>

    <mx:DataGridColumn headerText="Column 5"  editable="true" dataField="col3">
        <mx:itemEditor>
            <mx:Component>
                <mx:TextInput restrict="0-9"/>
            </mx:Component>
        </mx:itemEditor> 
    </mx:DataGridColumn>

    <mx:DataGridColumn headerText="Column 6"  editable="true" dataField="col4">
        <mx:itemEditor>
            <mx:Component>
                <mx:TextInput restrict="0-9"/>
            </mx:Component>
        </mx:itemEditor> 
    </mx:DataGridColumn>

    <mx:DataGridColumn headerText="Column 7"  editable="true" dataField="col5">
        <mx:itemEditor>
            <mx:Component>
                <mx:TextInput restrict="0-9"/>
            </mx:Component>
        </mx:itemEditor> 
    </mx:DataGridColumn>

</mx:columns>
</mx:DataGrid>
<mx:Label x="164" y="211" text="{Acumula}"/>
</mx:Application> 
```

以测试脚本为例，第一行是默认值，在同一行填充 85 列，直到该值大于 85 才会发出警报。

这次我想把这条线的颜色改成红色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:21:28.357

使用火花数据网格，您可以对其进行皮肤处理。在您的皮肤类中，根据某些条件设置您的行背景。下面的代码闪烁一行取决于给定的条件。

```
 <fx:Component id="rowBackground">

            <s:Rect implements="spark.components.gridClasses.IGridVisualElement">
                <fx:Declarations>
                    <s:Animate id="myBlinkingEffect" 
                               repeatCount="0" 
                               repeatBehavior="reverse"
                               target="{rowBackgroundFillColor}"
                               duration="1000"
                               >
                        <s:motionPaths>
                            <s:SimpleMotionPath property="alpha"
                                                valueFrom="1"
                                                valueTo="0"
                                                />
                        </s:motionPaths>
                    </s:Animate>

                </fx:Declarations>
                <fx:Script>
                    <![CDATA[
                        import spark.components.DataGrid;
                        import spark.components.Grid;

                        /**
                         * @private
                         */  
                        public function prepareGridVisualElement(grid:Grid, rowIndex:int, columnIndex:int):void
                        {
                            const dataGrid:DataGrid = grid.dataGrid;
                            if (!dataGrid)
                                return;

                            var item:Object;
                            if (rowIndex < grid.dataProvider.length) {
                                item = grid.dataProvider[rowIndex];  // the data item from this row

                                if ( /*your condition*/ ){
                                    rowBackgroundFillColor.color = 0xFF0000;
                                    myBlinkingEffect.play();//Blinking
                                } 

                            }

                        }
                    ]]>
                </fx:Script>  
                <s:fill>
                    <!--- @private -->  
                    <s:SolidColor id="rowBackgroundFillColor" color="0xFFFFFF" alpha="0.5"/>
                </s:fill>
            </s:Rect>
        </fx:Component> 
```

# .htaccess - 如果 cookie 丢失，htaccess 重定向到文件夹

> ID：15097662
> 
> 赞同：1
> 
> 时间：2013-02-26T19:31:43.767
> 
> 标签：.htaccess, cookies

我想在 htaccess 中检查 cookie 是否具有特殊值。如果不是，我想将所有请求重定向到登录页面“/login/”。这一步工作正常。

但现在**我必须排除登录页面**以避免无休止的重定向：

```
RewriteCond %{HTTP_COOKIE} !cookie-name=test [NC]
RewriteCond %{REQUEST_URI} !^/login/?$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/login/ [NC,L] 
```

任何帮助，将不胜感激 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:31:46.833

我建议您使用特殊值**-**作为“替代”，这实际上与*不做任何事情*相同。如果用户已经在登录页面上，这将阻止进一步的重写处理。

我还删除了检查您是否在登录页面上的重写条件，因为不再需要它。我还从底部重写规则中删除了主机名，并将其替换为相对 URL `/login/`，但您可能有充分的理由按照自己的方式进行操作。

```
RewriteRule ^login/?$ - [NC,L]

RewriteCond %{HTTP_COOKIE} !cookie-name=test [NC]
RewriteRule ^(.*)$ /login/ [NC,L] 
```

# javascript - 粒子从鼠标“逃跑”

> ID：15097664
> 
> 赞同：0
> 
> 时间：2013-02-26T19:31:46.797
> 
> 标签：javascript, canvas, particles

我在画布上创建了一个简单的粒子实验。现在我希望他们从画布上的鼠标光标“逃跑”。检测与鼠标的距离不是问题，但如何编码它们的行为？

每个粒子创建如下：

```
 var particle = {
        x: Math.floor(Math.random() * width),
        y: Math.floor(Math.random() * height),
        xVel: Math.random() * 10 - 5,
        yVel: Math.random() * 10 - 5,
    } 
```

所以我假设我也应该以某种方式保存方向，如果与指针的距离 < x，则反转方向？也许也可以保存旧速度，并在离开时慢慢降低？

如何检测方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:39:42.660

您可以通过从鼠标的位置减去粒子的位置来获得向量 v，

然后你可以找到这个向量的大小我采取 sqrt(x^2 + y^2)

通过将 v 除以幅度，您可以在您希望粒子移动的方向上获得一个单位向量。

例如。

假设我在列表 U 中有 10 个粒子，每个粒子都有一个 x 和 y 场。

我可以通过设置 v = (xpart - mousepart, ypart - mousepart) 从每个粒子 v 获得它的向量

那么你需要通过 sqrt(vx^2 + vy^2) 找到幅度 vmag

然后你得到 vunit = (vx / vmag, vy / vmag)

这是“远离鼠标”的向量。

剩下的可以留给确定你想要移动的速度，并确保你反弹墙壁等。

我在 github 开源有一个类似的项目： [https ://github.com/dmitrymakhnin/JavaParticleSystem/blob/master/Main.java](https://github.com/dmitrymakhnin/JavaParticleSystem/blob/master/Main.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:59:01.507

*Velocity* (xVel, yVel, together) 是一个二维向量。鼠标和粒子之间的距离也是如此。*向量*包含方向和大小。所以你想要一个向量，它是鼠标位置和粒子位置之间的差异。

```
var posRelativeToMouse = {
  x: particle.x - mousPosX,
  y: particle.y - mousPosY
}; 
```

x 和 y 的数字太小意味着粒子离鼠标很近，而大的数字意味着它离鼠标很远。

接下来我们需要弄清楚这些数字应该如何影响粒子的速度。所以我们需要两件事。

**我们将它们推向什么方向？**

大多数情况下，我们已经有了这个。`posRelativeToMouse`是一个具有我们想要的方向的向量。我们只是对其进行归一化，这意味着将向量的长度设置为 1。为此，我们将每个分量除以向量的当前长度。这个向量的长度总是`distance`从粒子到鼠标的距离。

```
var distance = Math.sqrt(
  posRelativeToMouse.x * posRelativeToMouse.x +
  posRelativeToMouse.y * posRelativeToMouse.y
);
var forceDirection = {
  x: posRelativeToMouse.x / distance,
  y: posRelativeToMouse.y / distance,
}; 
```

**我们推动粒子的力度有多大？**

这是距离的倒数。近意味着大推，远意味着小推。所以让我们重用我们`distance`上面计算的。

```
// distance past which the force is zero
var maxDistance = 1000;

// convert (0...maxDistance) range into a (1...0).
// Close is near 1, far is near 0
// for example:
//   250 => 0.75
//   100 => 0.9
//   10  => 0.99
var force = (maxDistance - distance) / maxDistance;

// if we went below zero, set it to zero.
if (force < 0) force = 0; 
```

好的，我们有方向，我们有力量。剩下的就是将其应用于粒子速度。

```
particle.xVel += forceDirection.x * force * timeElapsedSinceLastFrame;
particle.yVel += forceDirection.y * force * timeElapsedSinceLastFrame; 
```

假设您通过 xVel/yVel 为每一帧的位置设置动画，您现在应该有粒子被鼠标推开。

# mongodb - 交易电子邮件和 Meteor

> ID：15097665
> 
> 赞同：2
> 
> 时间：2013-02-26T19:31:48.480
> 
> 标签：mongodb, meteor, procmail, transactional-email

我有一个用 PHP 编写的应用程序，我正在移植到 Meteor。这个问题实际上是两个部分：

1）目前，我的服务器将所有电子邮件转发到解析响应并将其插入数据库的 PHP 脚本，允许用户通过发送电子邮件回复+someidentifier@myapp.com 来响应消息线程。既然我正在使用 Meteor，那么完成此任务的最佳方法是什么？

2）从性能的角度来看，我是否应该在托管我的应用程序的同一台服务器上运行它。这是可扩展的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:43:52.527

我没有注意到它，但你正在使用 procmail？我以前从未这样做过，但您可以告诉 procmail 将其文件放入 Meteor 可以访问的文件夹中。然后使用`fs`npm 模块每隔几分钟解析一次并使用服务器端 js 将它们放入一个集合中。

从那里你可以制作你想用来回复/制作线程等的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:41:00.093

Meteor 使用 Mailgun [http://www.mailgun.com/](http://www.mailgun.com/)发送电子邮件。每天最多可免费发送 200 封电子邮件。

我从未尝试过，但 Mailgun 也可以接收电子邮件，然后向您的应用程序（流星）调用 HTTP POST 请求，其中包含有关邮件的信息。使用路由器包，您应该能够在服务器上处理此请求。

# google-drive-api - 需要使用 Java 将 html 转换为 google doc 原生格式

> ID：15097668
> 
> 赞同：2
> 
> 时间：2013-02-26T19:32:01.900
> 
> 标签：google-drive-api

我已经阅读了[https://developers.google.com/drive/v2/reference/](https://developers.google.com/drive/v2/reference/)上的 API 文档，但是我找不到我的问题的答案。谷歌搜索解决方案的尝试失败了。

我在 Google Drive 中有一系列以前上传的小 HTML 文件。我想做的是编写一个简短的应用程序来将这些中的每一个转换为本地 Google 文档格式（mime 类型“application/vnd.google-apps.document”）。

我想使用 Java 代码而不是 GAS 代码来做到这一点。

我使用的方法是在驱动器中查询与我要转换的项目相对应的文件对象。然后我将该文件的内容作为字符串提取。然后，我创建了一个 mime 类型的新文件“application/vnd.google-apps.document”并将其与 HTML 内容一起上传。毫不奇怪，它没有奏效。

于是我尝试了一种不同的方法：将内容上传为“text/html”，但将“convert”标志设置为“true”。好吧，我没有看到任何将转换标志设置为 true 的直接 API。所以我尝试了：

```
File oBody = new File() ;
oBody.setTitle ( sTitle ) ;
oBody.setDescription ( sDescription ) ;
oBody.setMimeType ( sMimeType ) ;
oBody.set("convert", bConvert); 
```

这没有失败。但它也没有创建 Google 文档。它只是创建了一个与原始文件相同的文本文件。

如何上传包含“text/html”内容的文档并让 Google Drive 自动将其转换为 Google 文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:56:24.360

该`convert`标志必须在`files.insert`请求中而不是`File`资源中设置。使用`files.insert`文档中的代码片段作为参考，您应该这样做：

```
...
File file = service.files().insert(body, mediaContent).setConvert(true).execute();
... 
```

# xaml - 如何在 DataTemplate 中引用绑定到 Silverlight Toolkit ListPicker 的简单字符串？

> ID：15097669
> 
> 赞同：0
> 
> 时间：2013-02-26T19:32:03.207
> 
> 标签：xaml, binding, silverlight-toolkit

我正在`ListPicker`用`DataTemplate`. 我读过的所有示例都假定 ListItem 是绑定的复杂对象，因此可以使用通常的`Binding Property`语法引用对象的属性。例如

```
this.myListPicker.Items.Add(new Profile() { Name = "Joe", 
    Occupation="Button pusher" }); 
```

在 XAML 中，

```
<DataTemplate>
    <StackPanel>
        <TextBox Text="{Binding Name}" />
        <TextBox Text="{Binding Occupation}" />
    </StackPanel>
</DataTemplate> 
```

但是，我的 ListPickers 绑定到一个`List`简单`strings`的字符串，并且字符串上似乎没有实际引用该字符串的属性。

如何获得内部字符串的句柄，`DataTemplate`以便我可以将它们分配给`TextBox`模板中的例如？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:44:46.523

在您展示的示例代码中，您确实有一个“复杂”对象、一个配置文件，并且您指定的绑定应该可以工作。

如果您真的只是将字符串作为项目，那么 ItemTemplate 中的绑定将如下所示：

```
<TextBox Text="{Binding }" /> 
```

相关细节是所有ItemsControls（和ListPicker似乎是一个）将每个项目的视图的DataContext设置为项目。上面的绑定语法意味着“绑定到源本身”，除非另有说明（如使用 Source 或 RelativeSource 等），否则任何绑定的源都是 DataContext。

MSDN[在此处](http://msdn.microsoft.com/en-us/library/ms743643.aspx#objects)有更多详细信息。

# c# - 将 Crystal Report 导出到 .csv 文件时删除行之间的空白行

> ID：15097671
> 
> 赞同：1
> 
> 时间：2013-02-26T19:32:08.823
> 
> 标签：c#, winforms, crystal-reports, crystal-reports-2008

下面是屏幕截图，一个是 Crystal Report，另一个是导出的 .csv 文件。 ![在此处输入图像描述](../Images/48bfa793f5642f94e62c2f2b9e64cf9b.png) ![在此处输入图像描述](../Images/cce2afb1089729c16c7f871e85cf606e.png)

正如您在 .csv 文件中看到的每一行之后有一个空行。我已经搜索了一个解决方案，但没有运气。谁能让我知道如何在行之间没有空行的情况下获得输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:09:06.137

当您将报告导出到 csv 时，您在报告中的行之间的垂直空间很可能被解释为空行。尝试减少垂直空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:17:19.170

Crystal Reports 导出是喜怒无常的。试试 TTX 格式。

# ios - UIDocumentInteractionController 和来自网络的文件

> ID：15097681
> 
> 赞同：7
> 
> 时间：2013-02-26T19:32:33.513
> 
> 标签：ios, xcode, cocoa-touch

我想在其他应用程序中从网络打开文件。

我的代码：

```
NSURLRequest *req = [[NSURLRequest alloc] initWithURL:url];
[NSURLConnection sendAsynchronousRequest:req queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *resp, NSData *respData, NSError *error){
    NSLog(@"resp data length: %i", respData.length);
    NSArray *names = [objDict[@"name"] componentsSeparatedByString:@"."];
    NSString *fileName = [@"downloaded." stringByAppendingString:names[names.count-1]];
    NSString * path = [NSTemporaryDirectory() stringByAppendingPathComponent:fileName];
    NSError *errorC = nil;
    BOOL success = [respData writeToFile:path 
                 options:NSDataWritingFileProtectionComplete
                   error:&errorC];

    if (success) {
        UIDocumentInteractionController *documentController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:path]];
        documentController.delegate = self;
        [documentController presentOptionsMenuFromRect:CGRectZero inView:self.view animated:YES];
    } else {
        NSLog(@"fail: %@", errorC.description);
    }
}]; 
```

它显示面板，但在单击任何按钮时崩溃（不仅仅是“取消”）。

我启用了僵尸对象，它写道：

```
-[UIDocumentInteractionController URL]: message sent to deallocated instance 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T01:57:21.073

我有一个类似的问题，但我没有在一个块内初始化我的 UIDocumentInteractionController。我使用我的接口文件中的一个属性解决了这个问题，以便该类将强烈地保留 UIDocumentInteractionController 的实例。

```
@property (nonatomic, strong) UIDocumentInteractionController *documentController; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T21:35:37.430

把你`UIDocumentInteractionController`带出`NSURLConnection` `sendAsynchronousRequest`街区。

连接完成后，文档交互控制器必须保留很长时间，但它的作用域是块。块完成后，将不再引用它，它将被释放。

# java - 从 Oracle SQL 查询中获取结果

> ID：15097682
> 
> 赞同：0
> 
> 时间：2013-02-26T19:32:40.947
> 
> 标签：java, sql, oracle, oracle11g

我有这个 Java 对象，我将使用它来存储表中的计数元素：

```
private DCDataObj dc;

    public class DCDataObj
    {

        private int datacenter;             //  Datacenters
        .............

        public DCDataObj()
        {
        }

        public DCDataObj(int datacenter..........)
        {
            this.datacenter = datacenter;
            ..........
        }

        public int getDatacenter()
        {
            return datacenter;
        }

        public void setDatacenter(int datacenter)
        {
            this.datacenter = datacenter;
        }

        ..........
    } 
```

我使用此 SQL 查询将组件计数到 Oracle 表中：

```
ps = conn.prepareStatement("SELECT COUNT(1) AS CNT FROM COMPONENTSTATS CS, COMPONENTTYPE CT "
    + " WHERE CS.COMPONENTTYPEID = CT.COMPONENTTYPEID AND CT.COMPONENTTYPEID IN ( "
    + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ? " //  10
    + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ? " //  20
    + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ? " //  30
    + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) " //  40
    + " GROUP BY CT.NAME ORDER BY CT.NAME");

ps.setInt(1, 1000);
...... 
```

我使用以下 Java 代码得到结果：

```
ResultSet result = ps.executeQuery();
while (result.next())
{

    dc = new DCDataObj(
            result.getInt(1),
            result.getInt(2),
            result.getInt(3),
            ...........
            );

} 
```

执行查询时出现此问题：

```
java.sql.SQLException: Invalid column index 
```

你能帮我解决这个问题吗？

***更新***

```
The SQL query works. I get this result:

    CNT                    
---------------------- 
1                      
1                      
1  1 
```

我怀疑问题出在返回类型上。我想我得到的结果是数组。但是我可以在不使用数组的情况下以某种方式将查询结果插入到 Java 对象中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:36:53.257

在每一行上，您都以“？”结尾 但下一行以另一个“？”开头 没有逗号。然后你会得到部分字符串看起来像“，？？”，这是无效的 JDBC 语法。您需要在所有“？”之间使用逗号。占位符。

试试这个，在“10”、“20”和“30”行的末尾添加逗号。

```
ps = conn.prepareStatement("SELECT CT.NAME AS COMPONENT_TYPE, COUNT(1) AS CNT FROM COMPONENTSTATS CS, COMPONENTTYPE CT "
    + " WHERE CS.COMPONENTTYPEID = CT.COMPONENTTYPEID AND CT.COMPONENTTYPEID IN ( "
    + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, " //  10
    + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, " //  20
    + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, " //  30
    + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) " //  40
    + " GROUP BY CT.NAME ORDER BY CT.NAME"); 
```

**编辑**

现在我看到你的数据，我看到了问题。您不能调用`getInt`引用数据，只能调用列标题名称或基于 1 的列索引。此外，您的“COMPONENT_TYPE”是字母数字，请使用`getString`而不是`getInt`. 这也意味着您必须将`DCDataObj`班级更改为拥有`String`for `datacenter`，而不是`int`.

尝试

```
dc = new DCDataObj(
   result.getString("COMPONENT_TYPE"),
   ...........
   ); 
```

或者

```
dc = new DCDataObj(
   result.getString(1),
   ...........
   ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:35:04.863

绑定变量或 INTO 规范中的冒号后跟不适当的名称，可能是保留字。您需要更改变量名称并重试该操作。您是否尝试使用 pl/sql 或 SQL plus 或您的 oracle 终端从查询中获取结果？只是为了确保您正在执行正确的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:05:10.963

SELECT 语句中没有提取名为“DATACENTER”的列。在 result.getInt 调用中，它应该是 COMPONENT_TYPE 或 CNT。

# javascript - 在 Radio Select 上，显示不同的复选框选择

> ID：15097686
> 
> 赞同：2
> 
> 时间：2013-02-26T19:32:48.003
> 
> 标签：javascript, jquery, html

我正在寻找 Javascript 或 jQuery 解决方案，两者都可以。

无论如何，当用户为单选按钮选择一个选项时，我希望显示一组不同的复选框。因此，如果用户选择按名称，则会显示名称复选框。然后当用户选择按标题时，名称复选框将消失，标题复选框将显示。

当页面加载且未选择选项时，不应出现任何复选框

这是 HTML 的样子：

```
<table>
    <tr>
        <td><input type="radio" name="selectType" value="byName" />By Name</td>
        <td><input type="radio" name="selectType" value="byTitle" />By Title</td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" name="selectName1" />Name 1</td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" name="selectName1" />Name 2</td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" name="selectTitle1" />Title 1</td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" name="selectTitle2" />Title 2</td>
    </tr>
</table> 
```

这段代码会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:44:37.160

我会使用数据属性来引用复选框组。通过这种方式，您可以使您的代码真正灵活且不引人注目：

```
$('.type-check').change(function() {
    $('.type-group').hide().filter('.type-group-' + $(this).data('type')).show();
}); 
```

HTML 示例：

```
<tr>
    <td><input type="radio" name="selectType" class="type-check" data-type="name" value="byName" /> By Name</td>
    <td><input type="radio" name="selectType" class="type-check" data-type="title" value="byTitle" /> By Title</td>
</tr> 
```

[http://jsfiddle.net/D8s9G/](http://jsfiddle.net/D8s9G/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:37:14.593

首先给你的复选框类..

```
<input type="checkbox" name="selectName1" class="name"/>Name 1
<input type="checkbox" name="selectName2" class="name"/>Name 2 
```

对标题做同样的事情，给他们一个“标题”的类名，也为你的收音机..

```
<input type="radio" name="selectType" value="byName" class="radioName" /> 
```

然后;

```
$(document).ready(function () {
   $('.radioName').click(function () {
      $('.name').show();
      $('.title').hide();
   });

   //same logic for titles..
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:42:33.083

这是一个可行的解决方案 - [http://jsfiddle.net/FloydPink/fkvSg/](http://jsfiddle.net/FloydPink/fkvSg/)

**jQuery：**

```
$('.name').closest('tr').toggle(false);
$('.title').closest('tr').toggle(false);

$('input[name=selectType]').change(function () {
    var byNameSelected = $(this).val() == 'byName';
    $('.name').closest('tr').toggle(byNameSelected);
    $('.title').closest('tr').toggle(!byNameSelected);
}); 
```

**HTML：**

```
<table>
    <tr>
        <td>
            <input type="radio" name="selectType" value="byName" />By Name</td>
        <td>
            <input type="radio" name="selectType" value="byTitle" />By Title</td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" class="name" name="selectName1" />Name 1</td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" class="name" name="selectName2" />Name 2</td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" class="title" name="selectTitle1" />Title 1</td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" class="title" name="selectTitle2" />Title 2</td>
    </tr>
</table> 
```

我已经为所有四个复选框添加了 css 类，以便可以对“名称”和“标题”复选框进行分组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T19:42:51.310

您可以选择输入及其名称并显示或隐藏相关输入：

```
 $('input[value*="byName"]').click( function() {

    $('input[name*="selectName1"]').show();
    $('input[name*="selectTitle1"]').hide();
}

    $('input[value*="byTitle"]').click( function() {

    $('input[name*="selectName1"]').hide();
    $('input[name*="selectTitle1"]').show();
} 
```

# css - CSS 过渡 - UL/LI 标签中的高度问题

> ID：15097687
> 
> 赞同：1
> 
> 时间：2013-02-26T19:32:48.910
> 
> 标签：css, hover, overflow, css-transitions

我试图让我的 CSS 过渡顺利进行，但我遇到了最后一个问题。我承认这很肤浅，但如果可能的话，我想把它“修复”。我已经在 Chrome、Firefox 和 IE 中尝试过它，它在所有浏览器中都这样做。

我正在操作的`UL`和`LI`元素是导航工具栏的一部分。工具栏可以在以下 URL 的左上角看到：http: [//fretfast.com/templates/clean/sample.php](http://fretfast.com/templates/clean/sample.php)

当您将鼠标悬停在具有可扩展列表的元素之一上时，例如`learn`、`teach`或`community`，您会看到它非常平滑地展开（当然，假设您的浏览器支持 CSS3 过渡）；但是，当您将鼠标从可扩展列表上移开时，列表顶部的边缘区域会立即消失，这会使所有后续文本上移过快。

例如，如果您将鼠标悬停在 上`learn`，将显示一个可扩展菜单，其中提供`lessons`、`questions`和选项`tips`。但是，当您将鼠标移出并且菜单折叠时，第一个选项 ( `lessons`) 会立即向上推，使其位于按钮主要文本 ( `learn`) 的正下方。

这是我用于导航栏的 CSS，但对于我的生活，我无法弄清楚为什么高度过渡只在一个方向上起作用。

```
#topNav {
    list-style-type: none; height: 25px; padding: 0; margin: 0;
}
#topNav * { font-size: 15px; }
#topNav li {
    float: left; position: relative; z-index: 1; 
    padding: 0; line-height: 23px; background: none; repeat-x 0 0;
    padding-top: 2px;
}
#topNav li:hover {
    background-color: #C0C0C0; z-index: 2;
    padding-top: 0;
    border-top: 2px solid #59B4FF;
}
#topNav li a {
    display: block; padding: 0 15px; color: #000; text-decoration: none;
}
#topNav li a:hover { color: #222222; }
#topNav li ul {
    opacity: 0; position: absolute; left: 0; width: 8em; background: #C0C0C0; 
    list-style-type: none; padding: 0; margin: 0;
}
#topNav li:hover ul { opacity: 1; }
#topNav li ul li {
    float: none; position: static; height: 0; line-height: 0; background: none;
}
#topNav li:hover ul li {
    height: 25px; line-height: 25px;
}
#topNav li ul li a { background: #C0C0C0; }
#topNav li ul li a:hover {
    text-indent: 0.3em;
    background-color: #59B4FF;
}

#topNav li {
    transition: background-color 0.2s ease;
    -o-transition: background-color 0.2s ease;
    -moz-transition: background-color 0.2s ease;
    -webkit-transition: background-color 0.2s ease;
}
#topNav li a {
    transition: all 0.2s ease;
    -o-transition: all 0.2s ease;
    -moz-transition: all 0.2s ease;
    -webkit-transition: all 0.2s ease;
}
#topNav li ul {
    transition: all 0.3s ease;
    -o-transition: all 0.3s ease;
    -moz-transition: all 0.3s ease;
    -webkit-transition: all 0.3s ease;
}
#topNav li ul li {
    transition: height 0.5s ease;
    -o-transition: height 0.5s ease;
    -moz-transition: height 0.5s ease;
    -webkit-transition: height 0.5s ease;
}
#topNav li ul li a {
    transition: all 0.3s ease;
    -o-transition: all 0.3s ease;
    -moz-transition: all 0.3s ease;
    -webkit-transition: all 0.3s ease;

    transition: text-indent 0.1s linear;
    -o-transition: text-indent 0.1s linear;
    -moz-transition: text-indent 0.1s linear;
    -webkit-transition: text-indent 0.1s linear;
} 
```

我不相信这与两者中的`padding-top`规范有任何关系`#topNav li`，因为我今天刚刚添加了边框突出显示效果，而这个问题已经持续了更长的时间。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:48:22.580

导致的属性是行高；更具体地说这个。

```
#topNav li:hover ul li {
    height: 25px; 
    line-height: 25px;
} 
```

如果您查看过渡，则仅在高度上指定。您可以将过渡更改为**all**，它似乎显示正常。如果没有，最好的办法是在非悬停属性中将行高设置为 25px，而不是在悬停时（即，使其固定）

```
#topNav li ul li {
    transition: all 0.5s ease;
} 
```

如何轻松调试与悬停相关的问题？

在 Chrome 检查器中，选择定义悬停的项目，转到**样式**选项卡，选择**切换元素状态**并检查悬停。现在状态设置为永久悬停。只需四处检查和取消检查属性，看看你哪里有问题。

# git - Phing 部署 - Git 存储库 - 脚本

> ID：15097689
> 
> 赞同：1
> 
> 时间：2013-02-26T19:33:11.270
> 
> 标签：git, deployment, remote-server, phing

我希望能够将文件从我的本地系统（git repo）部署到不同的服务器。

我有3个分支。`Mater`,`staging`和`develop`. 每个分支都应该部署到相应的服务器。

我的常数：

*   `git`未安装在任何服务器上。所以`checking out with post commit hook`解决方案不起作用
*   不想每次都检查整个文件和文件夹。只应部署来自本地分支的更新文件。
*   理想情况下，希望直接从分支中提取更新的文件并部署它们，而不是从本地文件系统复制和推送文件到服务器。
*   应该`SSH`部署。没有密码。它用`SSH Keys`
*   我安装`Phing`就是为了这个目的。但我不知道从这里到哪里去牢记上述限制。
*   `Phing`除了作为解决方案之外，我对任何其他建议持开放态度
*   请注意，部署是从`local`(Windows) 机器到`remote web server`.

您可以提供/指向的任何脚本/文章？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:18:57.417

您可以使用[scp 任务](http://www.phing.info/docs/guide/stable/chapters/appendixes/AppendixC-OptionalTasks.html#ScpTask)将文件复制到远程服务器，并使用[ssh 任务](http://www.phing.info/docs/guide/stable/chapters/appendixes/AppendixC-OptionalTasks.html#SshTask)在远程服务器上执行所需的任何操作，例如清除缓存/重新启动 apache/移动 webroot 符号链接。您上述要求的唯一缺点是它将推送所有文件，而不仅仅是已更改的文件。但是，为此，您可以查看[FileSync](http://www.phing.info/docs/guide/stable/chapters/appendixes/AppendixC-OptionalTasks.html#FileSyncTask)任务

# java - 连接两个类

> ID：15097693
> 
> 赞同：-2
> 
> 时间：2013-02-26T19:33:20.993
> 
> 标签：java, class

我被困在这个问题上，我有一门课叫书，另一门课叫作者

在图书类中，我有标题、作者、价格和 ISBN

在作者类中，我有名字、姓氏和国籍

问题是将作者类与书籍类联系起来......

测试类--------

```
public class BookTest {

    public static void main(String[] args) {    

        Author fullAuth = new Author("Bob", "Marly", "Russian");
        Book bookInf = new Book("Alice", fullAuth ,60000,2000);
        Student studInf = new Student("Ted", "21/10/1992", "Male","Simmonds Close 63","King Close 65","Computing", 12000);

        System.out.println(fullAuth.getAuNational() +" "+ fullAuth.getAuFname ());
        System.out.println(bookInf.getTitle() +" "+ bookInf.getPrice());
        System.out.println(studInf.getName() +" "+ studInf.getName ());
    }
} 
```

图书课------------

```
public class Book{

    private double price;
    private int isbn;
    private String title;
    private String author;

    public Book (String title, String author, double price, int isbn){
        this.author = author;
        this.title = title;
        this.price = price;
        this.isbn = isbn;
    }

    public void setTitleBook(String title) {
        this.title = title;
    }
    public String getTitle(){
        return title;
    }

    public void setPriceBook(double price) {
        this.price = price;
    }
    public double getPrice() {
        return price;

    }
    public void setAuthor(String author) {
        this.author = author;
    }
    public int getAuthor() {
        return isbn;
    }

    public void setIsbn(int isbn) {
        this.isbn = isbn;
    }
    public int getIsbn() {
        return isbn;
    }   
} 
```

作者类----------

```
public class Author{

    private String auFname;
    private String auSname;
    private String auNational;

    public Author (String auFname, String auSname, String auNational){

        this.auFname = auFname;
        this.auFname = auSname;
        this.auNational = auNational;
    }

    public String getAuFname() {
        return auFname;
    }
    public void setFirstName(String auFname) {
        this.auFname = auFname;
    }

    public String getAuSname() {
        return auSname;
    }
    public void setSecondName(String auSname) {
        this.auSname = auSname;
    }

    public String getAuNational() {
        return auNational;
    }
    public void setAuNational(String auNational) {
        this.auNational = auNational;
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:39:25.437

类中的构造函数`Book`应如下所示：

```
public Book (String title, Author author, double price, int isbn){
    this.author = author;
    this.title = title;
    this.price = price;
    this.isbn = isbn;
} 
```

而且主要做

```
Book bookInf = new Book("Alice", fullAuth ,60000,2000); 
```

改变

```
public int getAuthor() {
    return isbn;
} 
```

至

```
public Author getAuthor() {
    return author;
} 
```

## 完整代码

### BookTest.java

```
public class BookTest {

    public static void main(String[] args) {

        Author fullAuth = new Author("Bob", "Marly", "Russian");
        Book bookInf = new Book("Alice", fullAuth, 60000, 2000);
        //Student studInf = new Student("Ted", "21/10/1992", "Male", "Simmonds Close 63", "King Close 65", "Computing", 12000);

        System.out.println(fullAuth.getAuNational() + " " + fullAuth.getAuFname());
        System.out.println(bookInf.getTitle() + " " + bookInf.getPrice());
        //System.out.println(studInf.getName() + " " + studInf.getName());

    }
} 
```

### 图书.java

```
public class Book {

    private double price;
    private int isbn;
    private String title;
    private Author author;

    public Book(Author a) {
        author = a;
    }

    public Book(String title, Author author, double price, int isbn) {
        this.author = author;
        this.title = title;
        this.price = price;
        this.isbn = isbn;
    }

    public void setTitleBook(String title) {
        this.title = title;
    }

    public String getTitle() {
        return title;
    }

    public void setPriceBook(double price) {
        this.price = price;
    }

    public double getPrice() {
        return price;
    }

    public void setAuthor(Author author) {
        this.author = author;
    }

    public Author getAuthor() {
        return author;
    }

    public void setIsbn(int isbn) {
        this.isbn = isbn;
    }

    public int getIsbn() {
        return isbn;
    }
} 
```

### 作者.java

```
public class Author {

    private String auFname;
    private String auSname;
    private String auNational;

    public Author(String auFname, String auSname, String auNational) {
        this.auFname = auFname;
        this.auFname = auSname;
        this.auNational = auNational;
    }

    public String getAuFname() {
        return auFname;
    }

    public void setFirstName(String auFname) {
        this.auFname = auFname;
    }

    public String getAuSname() {
        return auSname;
    }

    public void setSecondName(String auSname) {
        this.auSname = auSname;
    }

    public String getAuNational() {
        return auNational;
    }

    public void setAuNational(String auNational) {
        this.auNational = auNational;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:39:44.933

改变这个：

```
Book bookInf = new Book("Alice", author ,60000,2000); 
```

对此

```
Book bookInf = new Book("Alice", fullAuth ,60000,2000); 
```

并改变这个：

```
Author a = new Author(author, author, author); 
```

对此：

```
this.author = author; //author being the parameter 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:37:03.937

您的意思是将 Author 类导入 Book 类吗？

那么它只是

导入“包”。作者；

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-26T19:36:28.357

如果您询问如何从书籍实例中检索作者信息，那么您可以使用

```
bookInf.getAuthor().getAuFname() 
```

或者

```
bookInf.getAuthor().getAuSname() 
```

但是，您必须先修改 Book 类的 getAuthor 方法，因为它返回的是 isbn 而不是 author。希望能帮助到你。

# c# - 向电子邮件中添加文本。正文与文本格式混淆

> ID：15097697
> 
> 赞同：2
> 
> 时间：2013-02-26T19:33:38.310
> 
> 标签：c#, visual-studio-2010, outlook-addin, outlook-2010

我正在尝试替换电子邮件正文中的一些文本，但每当我这样做时，似乎都会搞砸签名文本的格式。例如，如果我尝试`email.Body.Replace("Info", "Information")`然后这个文本：

> **首尾**
> **标题**
> 
> 信息
> 网站：[www.stackoverflow.com](http://stackoverflow.com)

变成：

> 首尾
> 标题
> 
> 信息
> 网站：HYPERLINK“ [http://www.stackoverflow.com/](http://www.stackoverflow.com/) ”www.stackoverflow.com

即使只是简单地添加到文本中也会发生这种情况，例如`email.Body += "text"`.

除此之外，它还将正文的字体从 Arial 10 切换到 Calabri 12（这可能与在 Arial 10 是签名字体时 Calabri 12 是默认的电子邮件文本有关）。

如何保存当前电子邮件正文的格式，以便在向其中添加文本时可以将其设置回来，或者将文本添加到正文以保持格式的最佳方法是什么？

欢迎您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:27:38.363

MailMessage.Body 可以格式化为 RTF（我认为默认情况下）或 HTML 格式。您发布的最上面的消息实际上是这样的：

```
{\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fnil\fcharset0 Calibri;}}
{\colortbl ;\red0\green0\blue255;}
{\*\generator Msftedit 5.41.21.2510;}\viewkind4\uc1\pard\sl240\slmult1\lang9\f0\fs22 First Last \par
Title \par
\par
Info \par
Website: {\field{\*\fldinst{HYPERLINK "www.stackoverflow.com"}}{\fldrslt{\ul\cf1 www.stackoverflow.com}}}\f0\fs22\par
} 
```

我假设在末尾附加“文本”会导致 RTF 消息被不正确地解析，从而导致格式丢失。

[http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.body.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.body.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:05:03.543

所以，我最终做的是使用 email.HTMLBody。我创建了一个类似于 HTML 已有的段落块。这是块：（我的HTML不是很好，所以......很多如果是复制/粘贴并进行一些编辑）

```
<p class=MsoNormal>
    <b>
        <span style='font-size:10.0pt;font-family:"Arial","sans-serif"'>Replace Text
        </span>
    </b>
</p> 
```

我将它设置为一个字符串，比如 htmlPar，然后进行替换：

`string htmlReplace = htmlPar.Replace("Replace Text", myNewText");`

这将创建一个段落块，我可以使用我的文本添加到 HTML 中。要实际将其添加到 HTMLBody 的末尾，我会执行一个 string.Replace ，如下所示：

```
string temp = email.HTMLBody.Replace("</body></html>", htmlReplace + "</body></html>");
email.HTMLBody = temp; 
```

有了这个，我能够在电子邮件的其余部分保留格式。就像我说的那样，我的 HTML 不是很好，所以我不确定这是否可以添加一般的文本，或者这样做的方法实际上有多好。

无论哪种方式，我希望这可以帮助其他人。

# android - Eclipse 和 Android 错误“parseSdkContent 失败”

> ID：15097701
> 
> 赞同：7
> 
> 时间：2013-02-26T19:33:50.617
> 
> 标签：android, eclipse, adt

自从我升级`Android Tools`到 21.1 后就出现了这个问题。当我启动 Eclipse 时，即使在干净的工作区中，我也会收到错误消息`parseSdkContent failed`，详细信息如下：

```
com.android.sdklib.devices.DeviceManager.createInstance
(Ljava/lang/String;Lcom/android/utils/ILogger;)
Lcom/android/sdklib/devices/DeviceManager; 
```

我搜索了互联网并尝试了几乎所有解决方案，但无济于事。当我转到 Android 首选项并尝试设置 SDK 的路径时，它说没有可用的目标。还有什么我可以尝试的吗？在修复之前，我无法进行任何 Android 开发。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-03-23T06:21:39.210

步骤 1\. 找到名为：`.android`

此文件夹可以位于您的 Windows 用户目录中，例如在 Windows 7 或 8 中：

```
C:\Users\YOUR_WINDOWS_USERNAME\.android 
```

步骤 2\. 删除此文件夹`.android`

步骤 3\. 重新启动 Eclipse，您的问题将得到解决。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-19T01:13:46.687

* * *

> 你不必删除任何东西

* * *

对我来说，从 ADT 插件更新 DDMS 就成功了！

在此之前，为了节省时间，我只更新了**ADT 插件**，没有像 Android DDMS，TraceView 等，所以我遇到了同样的问题。

在几次重启和谷歌搜索之后，每个人都提出了不同的解决方案。我更新了我的**Android DDMS**并重新启动了 eclipse ***，它就像一个魅力！***

我不必删除我的工作区或更新我的 .project 文件等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T20:57:09.263

好的，我刚刚删除了eclipse并重新安装。丢失了我的所有设置等，但这是我能做的。在 ADT 的升级中一定有什么东西被破坏了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T10:48:08.067

在新机器上安装 21.1 后我遇到了同样的问题。通过删除我在第一次启动期间创建的默认工作区，然后以管理员身份重新启动 ADT，重新创建工作区，解决了这个问题。以普通用户身份关闭并重新运行后，问题消失了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-07T13:23:59.850

卸载 API 21 和安装 API 19 对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-12T00:32:13.503

重新安装新版本的 ADT（当时是 ADT-23.0.3.zip（[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)））帮助我解决了同样的问题如上所述。此消息可能有点晚，但希望这也可以帮助其他人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-17T06:37:35.700

我修复了我的问题，在重新启动您的 IDE 之前，将您的活动主布局设置为当前选项卡打开，然后重新启动您的 IDE。希望能帮助到你 ：）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-04T08:39:48.840

删除“.android”暂时解决了我的问题，因为一段时间后它又开始出现了..

这是另一个可能有帮助的原因和修复.. 这是因为在同一台机器上存在 2 个版本的 SDK 但如果您只有一个版本（可能是 21），只需下载 API 20 的 SDK 平台（4.4 W）因为21的“layoutlib.jar”有问题）。开始应用以下内容：

关闭日食

导航到您的 sdk 文件夹（类似于 C:\adt-bundle-windows-x86_64-20140321\sdk）

转到平台文件夹 -> android-21 文件夹 -> 数据文件夹并重命名 layoutlib.jar（仅用于备份）

将相同的文件（layoutlib.jar）从您的 android-20 文件夹复制到此文件夹“android-21”

启动 Eclipse

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-28T09:10:01.333

**这为我做到了。**

在 Eclipse 中转到

**Project Properties** -> **Java Compiler**并将“ **Compiler Compliance Level** ”设置为 1.7

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-09T15:20:39.710

对我来说，我从 SDK 管理器中删除了已安装的 Android 5(API 21) 软件包。我正在研究 API 20（Android 4.4w.2）。它只是完全解决了我的问题。删除 .android 文件夹或其他人没有帮助我。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-26T19:56:19.117

在 Eclipse 中，使用 Help 菜单中的 Check For Updates 项来更新 Android 工具的 Eclipse 部分（称为 ADT）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-11-09T14:30:10.063

尝试转到您的 Eclipse 工作区并删除 .meta 文件夹。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-05-14T06:31:53.760

我最近遇到了同样的问题，我发现必须安装/更新与 ADT 相关的其他必要软件。假设您正在更新 ADT，那么您还必须使用它更新 DDMS。所以，最好的选择是安装所有软件您正在更新的版本的 /plugin 包。

当您卸载完整的东西并再次安装时，所有这些相关软件都会安装在同一版本中，因此它总是可以解决问题。

据我说重新安装应该是最终的解决方案。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-11-01T06:48:56.747

可能你安装了多个 android IDE，例如，你安装了 android studio 和 adt+ eclipse 全部，删除一个就可以解决这个问题

# jakarta-ee - 如何将 Jetty（inGoogle App Engine）与 JBoss AS 7.1 连接起来？

> ID：15097702
> 
> 赞同：0
> 
> 时间：2013-02-26T19:33:51.490
> 
> 标签：jakarta-ee, gwt, jboss

我想在开发人员模式下使用 Google App Engine（带有 Eclpise 插件）在 Jetty 上开发 GWT。GWT 服务/servlet 需要使用在 JBoss 服务器上运行的 EJB。这将在单台计算机上完成。谁能指出我应该如何设置它的任何方向？或者在 JBoss 上使用开发人员模式对我来说也可以。不幸的是，我放弃了[https://community.jboss.org/wiki/CreateGWTProjectsWithJBossToolsAndEclipseWTP](https://community.jboss.org/wiki/CreateGWTProjectsWithJBossToolsAndEclipseWTP)中描述的过程，因为它不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:32:53.693

您应该在外部服务器中运行开发模式。[这是描述](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#How_do_I_use_my_own_server_in_development_mode_instead_of_GWT%27s)。

顺便提一句。如果您在 JBoss 上运行，请查看[Errai](http://www.jboss.org/errai)。由于它是由 JBoss 开发的，我以某种方式期望它应该在 JBoss 中很好地运行；不过我在 OSGi 中使用了它。

# mysql - MySQL选择多个表但返回1行

> ID：15097704
> 
> 赞同：1
> 
> 时间：2013-02-26T19:34:03.073
> 
> 标签：mysql

我有一个包含多个表的数据库，这些表都由一个 ID 绑定。这些表看起来像：

```
TableA:
    user_id
    user_firstname
    user_lastname

TableB:
    user_id
    exam_result
    date_taken 
```

表 A 将只包含一行（唯一的 User_ID），但表 B 可以包含每个 User_ID 的多行。像这样的东西：

```
TableA:
    user_id = 1
    user_firstname = blah
    user_lastname = blah

    user_id = 2
    user_firstname = blah
    user_lastname = blah

TableB:
    user_id = 1
    exam_result = F
    date_taken = somedate

    user_id = 1
    exam_result = E
    date_taken = somedate

    user_id = 1
    exam_result = U
    date_taken = somedate

    user_id = 2
    exam_result = A
    date_taken = somedate

    user_id = 2
    exam_result = A
    date_taken = somedate 
```

我的问题是如何从两个表中获取数据，但每个唯一 ID 只返回 1 行...我认为它称为嵌套选择。

如果我能让结果显示如下：

```
user_id1, user_first_name1, user_lastname1, (F, somedate, E, somedate, U, somedate)
user_id2, user_first_name2, user_lastname2, (A, somedate, A, somedate) 
```

希望这是有道理的。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:38:02.217

我想你正在寻找`GROUP_CONCAT`：

```
SELECT A.User_Id, A.user_firstname, A.user_lastname,
  GROUP_CONCAT(CONCAT(B.Exam_Result,',',B.Date_Taken))
FROM TableA A
  LEFT JOIN TableB B ON A.User_Id = B.User_Id
GROUP BY A.User_Id 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/2c238/1)

如果要在结果周围加上括号，请使用另一个 CONCAT：

```
CONCAT('(',GROUP_CONCAT(CONCAT(B.Exam_Result,',',B.Date_Taken)),')') 
```

**编辑：**

我已经更新了使用 LEFT JOIN 而不是 INNER JOIN 来处理 TableB 中的 NULL 值的答案。

# c# - 使用 c# 启动和停止服务

> ID：15097705
> 
> 赞同：3
> 
> 时间：2013-02-26T19:34:08.113
> 
> 标签：c#, .net

我想停止服务，然后在服务停止后重新启动服务。我正在使用 c# 并生成了以下代码。问题是：如果服务已启动，它将停止服务但不会重新启动服务。如果下次调用该函数时服务停止，它将仅启动该服务。

```
string strCmdText1, strCmdText2;
strCmdText1 = "NET STOP \"AdmnService\"";
strCmdText2 = "NET START \"AdmnService\"";
System.Diagnostics.Process.Start("CMD.exe", "/C" + strCmdText1);
System.Diagnostics.Process.Start("CMD.exe", "/C" + strCmdText2); 
```

有没有办法将命令连接成一行？我不确定 /C 做了什么，但也许还有其他一些开关可以执行两个命令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T19:40:48.530

您可以使用[ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)（在 System.ServiceProcess .Net 4 程序集中）。这是一个简单的控制台应用程序，展示了如何：

```
 ServiceController controller = new ServiceController("AdmnService");
        controller.Stop();

        controller.WaitForStatus(ServiceControllerStatus.Stopped);
        Console.WriteLine("Service status: " + controller.Status);

        controller.Start();
        Console.WriteLine("Service status: " + controller.Status); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:38:55.150

[ServiceController.Start](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.start%28v=vs.100%29.aspx)将为您启动...此类的其他方法可让您检查状态并停止服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:39:20.670

[使用ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller%28v=vs.80%29.aspx)类可能更容易。

使用 Status 属性，您可以找出服务的状态并重新启动它或使用[WaitForStatus](http://msdn.microsoft.com/en-US/library/system.serviceprocess.servicecontroller.waitforstatus%28v=vs.80%29.aspx)方法发出信号

# facebook - Facebook 导入联系人，避免已经导入的联系人

> ID：15097706
> 
> 赞同：0
> 
> 时间：2013-02-26T19:34:14.613
> 
> 标签：facebook, import-contacts

我想编写一个应用程序来启用 Facebook（或 Gmail、Twitter 等）导入联系人。当用户第二次使用导入联系人时，我不应该显示他们已经导入的联系人。有什么有效的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:37:09.770

是的，这是可能的，但您需要自己记录已导入的联系人。Facebook/Twitter 不维护您已导入的人员的列表。

只需将它们全部导入，然后丢弃您以前见过的那些。

# javascript - 如何通过 XHR onProgress 函数使用压缩/压缩的内容？

> ID：15097712
> 
> 赞同：44
> 
> 时间：2013-02-26T19:34:35.057
> 
> 标签：javascript, jquery, xmlhttprequest, compression

我之前看到过很多与此类似的问题，但我还没有找到一个准确描述我当前问题的问题，所以这里是：

我有一个通过 AJAX 加载大型（0.5 到 10 MB 之间）JSON 文档的页面，以便客户端代码可以处理它。加载文件后，我不会遇到任何我没想到的问题。但是，下载需要很长时间，因此我尝试利用[XHR Progress API](https://dvcs.w3.org/hg/progress/raw-file/tip/Overview.html)呈现进度条，以向用户指示文档正在加载。这运作良好。

然后，为了加快速度，我尝试通过 gzip 和 deflate 压缩服务器端的输出。这也有效，取得了巨大的收益，但是，我的进度条停止工作。

我已经研究了一段时间，发现如果`Content-Length`没有与请求的 AJAX 资源一起发送正确的标头，则`onProgress`事件处理程序无法按预期运行，因为它不知道下载的进度。发生这种情况时，将在事件对象上`lengthComputable`设置一个名为的属性。`false`

这是有道理的，所以我尝试使用输出的未压缩和压缩长度显式设置标头。我可以验证是否正在发送标头，并且可以验证我的浏览器是否知道如何解压缩内容。但`onProgress`处理程序仍然报告`lengthComputable = false`。

所以我的问题是：**有没有办法使用 AJAX Progress API 压缩/压缩内容？**如果是这样，我现在做错了什么？

* * *

这是资源在 Chrome 网络面板中的显示方式，表明压缩正在工作：

[![网络面板](../Images/375fca33682f2da48a3af41f94783415.png)](https://i.stack.imgur.com/b5yoY.png)

这些是相关的**请求**标头，表明请求是 AJAX 并且`Accept-Encoding`设置正确：

```
GET /dashboard/reports/ajax/load HTTP/1.1
Connection: keep-alive
Cache-Control: no-cache
Pragma: no-cache
Accept: application/json, text/javascript, */*; q=0.01
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.99 Safari/537.22
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

这些是相关的**响应**标头，表明`Content-Length`和`Content-Type`设置正确：

```
HTTP/1.1 200 OK
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Content-Encoding: deflate
Content-Type: application/json
Date: Tue, 26 Feb 2013 18:59:07 GMT
Expires: Thu, 19 Nov 1981 08:52:00 GMT
P3P: CP="CAO PSA OUR"
Pragma: no-cache
Server: Apache/2.2.8 (Unix) mod_ssl/2.2.8 OpenSSL/0.9.8g PHP/5.4.7
X-Powered-By: PHP/5.4.7
Content-Length: 223879
Connection: keep-alive 
```

对于它的价值，我在标准 (http) 和安全 (https) 连接上都试过了，没有任何区别：内容在浏览器中加载良好，但没有被 Progress API 处理。

* * *

根据[亚当的建议](https://stackoverflow.com/a/15172401/350278)，我尝试将服务器端切换为 gzip 编码，但没有成功或更改。以下是相关的响应标头：

```
HTTP/1.1 200 OK
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Content-Encoding: gzip
Content-Type: application/json
Date: Mon, 04 Mar 2013 22:33:19 GMT
Expires: Thu, 19 Nov 1981 08:52:00 GMT
P3P: CP="CAO PSA OUR"
Pragma: no-cache
Server: Apache/2.2.8 (Unix) mod_ssl/2.2.8 OpenSSL/0.9.8g PHP/5.4.7
X-Powered-By: PHP/5.4.7
Content-Length: 28250
Connection: keep-alive 
```

重复一遍：内容正在被正确下载和解码，这只是我遇到问题的进度 API。

* * *

根据[Bertrand 的请求](https://stackoverflow.com/questions/15097712/how-can-i-use-deflated-gzipped-content-with-an-xhr-onprogress-function?noredirect=1#comment21565866_15097712)，请求如下：

```
$.ajax({
    url: '<url snipped>',
    data: {},
    success: onDone,
    dataType: 'json',
    cache: true,
    progress: onProgress || function(){}
}); 
```

这是`onProgress`我正在使用的事件处理程序（这不是太疯狂）：

```
function(jqXHR, evt)
{
    // yes, I know this generates Infinity sometimes
    var pct = 100 * evt.position / evt.total;

    // just a method that updates some styles and javascript
    updateProgress(pct);
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-09-26T17:06:06.217

您的解决方案的一个稍微更优雅的变体是在您的 HTTP 响应中设置一个像“x-decompressed-content-length”之类的标头，并使用内容的完整解压缩值（以字节为单位），并从 onProgress 中的 xhr 对象中读取它处理程序。

您的代码可能类似于：

```
request.onProgress = function (e) {
  var contentLength;
  if (e.lengthComputable) {
    contentLength = e.total;
  } else {
    contentLength = parseInt(e.target.getResponseHeader('x-decompressed-content-length'), 10);
  }
  progressIndicator.update(e.loaded / contentLength);
}; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-08T20:44:59.980

我无法解决在`onProgress`压缩内容本身上使用的问题，但我想出了这个半简单的解决方法。**简而言之**：在`HEAD`请求的同时向服务器发送`GET`请求，一旦有足够的信息就呈现进度条。

* * *

```
function loader(onDone, onProgress, url, data)
{
    // onDone = event handler to run on successful download
    // onProgress = event handler to run during a download
    // url = url to load
    // data = extra parameters to be sent with the AJAX request
    var content_length = null;

    self.meta_xhr = $.ajax({
        url: url,
        data: data,
        dataType: 'json',
        type: 'HEAD',
        success: function(data, status, jqXHR)
        {
            content_length = jqXHR.getResponseHeader("X-Content-Length");
        }
    });

    self.xhr = $.ajax({
        url: url,
        data: data,
        success: onDone,
        dataType: 'json',
        progress: function(jqXHR, evt)
        {
            var pct = 0;
            if (evt.lengthComputable)
            {
                pct = 100 * evt.position / evt.total;
            }
            else if (self.content_length != null)
            {
                pct = 100 * evt.position / self.content_length;
            }

            onProgress(pct);
        }
    });
} 
```

然后使用它：

```
loader(function(response)
{
    console.log("Content loaded! do stuff now.");
},
function(pct)
{
    console.log("The content is " + pct + "% loaded.");
},
'<url here>', {}); 
```

* * *

在服务器端，设置请求`X-Content-Length`头`GET`和`HEAD`请求头（应该代表*未压缩*的内容长度），并中止发送`HEAD`请求中的内容。

在 PHP 中，设置标头如下所示：

```
header("X-Content-Length: ".strlen($payload)); 
```

如果是`HEAD`请求，则中止发送内容：

```
if ($_SERVER['REQUEST_METHOD'] == "HEAD")
{
    exit;
} 
```

* * *

这是它的实际效果：

![截屏](../Images/bf94061dcf8398f6ebf4aa305bb5ebfb.png)

在下面的屏幕截图中需要这么长时间的原因`HEAD`是因为服务器仍然需要解析文件才能知道它有多长，但这是我绝对可以改进的地方，而且它绝对是一个改进。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T12:08:00.433

不要因为没有原生解决方案而陷入困境；一行代码可以解决您的问题，而不会弄乱 Apache 配置（在某些主机中是禁止或非常受限的）：

**PHP来救援：**

```
var size = <?php echo filesize('file.json') ?>; 
```

就是这样，你可能已经知道其余的了，但这里只是作为参考：

```
<script>
var progressBar = document.getElementById("p"),
    client = new XMLHttpRequest(),
    size = <?php echo filesize('file.json') ?>;

progressBar.max = size;

client.open("GET", "file.json")

function loadHandler () {
  var loaded = client.responseText.length;
  progressBar.value = loaded;
}

client.onprogress = loadHandler;

client.onloadend = function(pe) {
  loadHandler();
  console.log("Success, loaded: " + client.responseText.length + " of " + size)
}
client.send()
</script> 
```

**现场示例：**

另一个 SO 用户认为我在撒谎这个解决方案的有效性，所以这里是实时的：http: [//nyudvik.com/zip/](http://nyudvik.com/zip/)，它是 gzip-ed，实际文件重量为 8 MB

* * *

相关链接：

*   [SO：在 Apache 中启用 gzip 压缩时未发送 Content-Length？](https://serverfault.com/questions/183843/content-length-not-sent-when-gzip-compression-enabled-in-apache)
*   [Apache 模块 mod_deflate 文档](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)
*   [PHP filsize 函数文档](http://php.net/manual/en/function.filesize.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T08:23:07.823

**尝试将您的服务器编码更改为 gzip。**

您的请求标头显示了三种可能的编码（gzip、deflate、sdch），因此服务器可以选择这三种中的任何一种。通过响应标头，我们可以看到您的服务器选择使用 deflate 进行响应。

Gzip 是一种编码格式，除了额外的页眉和页脚（包括原始未压缩长度）和不同的校验和算法外，还包括一个 deflate 有效负载：

[维基百科上的 Gzip](http://en.wikipedia.org/wiki/Gzip)

Deflate 有一些问题。由于处理不正确的解码算法的遗留问题，deflate 的客户端实现必须通过愚蠢的检查才能确定他们正在处理的实现，不幸的是，他们经常会出错：

[为什么对 Apache 提供的文本文件使用 deflate 而不是 gzip？](https://stackoverflow.com/questions/388595/why-use-deflate-instead-of-gzip-for-text-files-served-by-apache)

在你的问题的情况下，浏览器可能会看到一个放气文件从管道中传下来，然后举起手臂说：“当我什至不知道我将如何最终解码这个东西时，你怎么能期望我担心进展是否正确，人类？”

如果您切换服务器配置以便对响应进行 gzip 压缩（即 gzip 显示为内容编码），我希望您的脚本能够像您希望/预期的那样工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-06T14:35:37.733

我们创建了一个库来估计进度并始终设置`lengthComputable`为 true。

Chrome 64 仍然存在这个问题（参见[Bug](https://bugs.chromium.org/p/chromium/issues/detail?id=463622)）

这是一个 javascript shim，您可以将其包含在您的页面中，它可以解决此问题，并且您可以`new XMLHTTPRequest()`正常使用该标准。

可以在这里找到 javascript 库：

[https://github.com/AirConsole/xmlhttprequest-length-computable](https://github.com/AirConsole/xmlhttprequest-length-computable)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-21T14:09:09.947

这个解决方案对我有用。

我增加了 deflate 缓冲区大小以覆盖我可能拥有的最大文件大小，通常会被压缩到 10mb 左右，并且在 apache 配置中它产生了从 9.3mb 到 3.2mb 的压缩，因此要返回内容长度标头而不是由于加载压缩文件超过缓冲区大小时使用的传输编码规范而被省略，有关更多信息，请参阅[https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Transfer-Encoding](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Transfer-Encoding)用于压缩的分块编码标头以及有关[https://httpd.apache.org/docs/2.4/mod/mod_deflate.html#deflatebuffersize](https://httpd.apache.org/docs/2.4/mod/mod_deflate.html#deflatebuffersize)中的 deflate 缓冲区大小的更多信息。

1-在您的 apache 配置中包含以下内容，并注意缓冲区大小值以字节为单位。

```
<IfModule mod_deflate.c>
DeflateBufferSize 10000000
</IfModule> 
```

2-重新启动apache服务器。

3- 在您的 .htaccess 文件中包含以下内容，以确保 content-length 标头暴露给 JS HTTP 请求。

```
<IfModule mod_headers.c>
    Header set Access-Control-Expose-Headers "Content-Length"
</IfModule> 
```

4- 在计算进度总百分比之前的 onDownloadProgress 事件中附加以下以检索总字节值。

```
var total = e.total;
if(!e.lengthComputable){
total = e.target.getResponseHeader('content-length') * 2.2;
} 
```

第一步是检查多个文件之间压缩的一般差异，并查看是否乘以 2 例如结果与解压缩文件大小（即原始大小）最接近的结果并相应地相乘，但通过相乘确保结果仍然更小或相等但不大于原始文件大小，因此对于加载的数据，它保证达到并且很可能在所有情况下都略超过 100。此外，此问题解决方案还有一个 hacky 增强功能，即通过将进度计算限制为 100，并且无需检查进度是否超过，同时必须解决确保达到 100% 实施的相关点。原始大小并相应地相乘，但通过相乘确保结果仍然小于或等于但不大于原始文件大小，因此对于加载的数据，它保证在所有情况下都达到并且最有可能略超过 100。此外，此问题解决方案还有一个 hacky 增强功能，即通过将进度计算限制为 100，并且无需检查进度是否超过，同时必须解决确保达到 100% 实施的相关点。原始大小并相应地相乘，但通过相乘确保结果仍然小于或等于但不大于原始文件大小，因此对于加载的数据，它保证在所有情况下都达到并且最有可能略超过 100。此外，此问题解决方案还有一个 hacky 增强功能，即通过将进度计算限制为 100，并且无需检查进度是否超过，同时必须解决确保达到 100% 实施的相关点。

在我的情况下，这使我能够知道每个文件/资源​​加载何时完成，即检查总数如下所示，其中 >= 用于考虑压缩总乘法达到解压缩后略微超过 100% 或百分比计算方法上限为 100，然后使用 == 运算符来查找每个文件何时完成预加载。另外，我考虑从根源解决这个问题，通过存储每个文件的固定解压缩加载总数，即原始文件大小，并在预加载文件期间使用它，例如在我的条件下计算进度百分比的资源。这是我的 onProgress 事件处理条件的以下片段。

```
// Some times 100 reached in the progress event more than once.
if(preloadedResources < resourcesLength && progressPercentage < 100) {
    canIncreaseCounter = true;
}
if(progressPercentage >= 100 && canIncreaseCounter && preloadedResources < resourcesLength) {
    preloadedResources++;
    canIncreaseCounter = false;
} 
```

另外，请注意预期加载的总使用量作为固定解决方案，它在所有情况下都有效，除非自己没有事先访问要预加载或下载的文件，我认为这很少发生，因为大多数时候我们知道我们想要预加载的文件因此可以在预加载之前检索其大小，也许是通过 PHP 脚本提供位于具有 HTTP 第一个请求的服务器中的感兴趣文件的大小列表，然后在第二个请求中，预加载请求将具有每个相关的原始文件大小，甚至在作为代码的一部分手动存储之前，预加载的资源在关联数组中固定解压缩大小，然后可以使用它来跟踪加载进度。

对于我的跟踪加载进度实施实例，请参阅我的个人网站[https://zakaria.website](https://zakaria.website)中的资源预加载。

最后，我不知道增加 deflate 缓冲区大小的任何不利因素，除了服务器内存的额外负载，如果有人对此问题有意见，我们将非常感激让我们知道。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T13:39:49.157

我能想到的唯一解决方案是手动压缩数据（而不是将其留给服务器和浏览器），因为这允许您使用正常的进度条，并且仍然应该比未压缩版本给您带来可观的收益。例如，如果系统只需要在最新一代的 Web 浏览器中工作，您可以在服务器端压缩它（无论您使用什么语言，我相信有一个 zip 函数或库），在客户端您可以使用[压缩包](http://gildas-lormeau.github.com/zip.js/)。如果需要更多浏览器支持，您可以查看[此 SO 答案](https://stackoverflow.com/questions/294297/javascript-implementation-of-gzip)对于许多压缩和解压缩功能（只需选择一个您正在使用的服务器端语言支持的功能）。总体而言，这应该相当容易实现，尽管它的性能会比原生压缩/解压缩更差（尽管可能仍然很好）。（顺便说一句，如果您选择适合您正在使用的数据类型并且数据足够大的压缩算法，在理论上它可以比本机版本执行得更好）

另一种选择是使用 websocket 并在加载的同时解析/处理每个部分的部分中加载数据（您不需要 websockets，但是在彼此之后执行 10 个 http 请求可能会很麻烦）。这是否可能取决于具体场景，但在我看来，报告数据是可以部分加载的数据，不需要先完全下载。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-03-08T00:11:57.487

我不清楚这个问题，它不应该发生，因为解压应该由浏览器完成。

您可能会尝试远离 jQuery 或 hack jQuery，因为 $.ajax 似乎不适用于二进制数据：

参考：[http ://blog.vjeux.com/2011/javascript/jquery-binary-ajax.html](http://blog.vjeux.com/2011/javascript/jquery-binary-ajax.html)

您可以尝试自己实现 ajax 请求请参阅：[https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest#Handling_binary_data](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest#Handling_binary_data)

您可以尝试通过 javascript 解压缩 json 内容（请参阅评论中的资源）。

*** 更新 2 ***

$.ajax 函数不支持进度事件处理程序，或者它不是 jQuery 文档的一部分（请参阅下面的评论）。

这是让这个处理程序工作的一种方法，但我自己从未尝试过： [http ://www.dave-bond.com/blog/2010/01/JQuery-ajax-progress-HMTL5/](http://www.dave-bond.com/blog/2010/01/JQuery-ajax-progress-HMTL5/)

***更新3 ***

该解决方案使用 tierce 第三方库来扩展（？）jQuery ajax 功能，所以我的建议不适用

# delphi - 如何签署在 Delphi 中构建的 .WLL 文件，以便 Microsoft Word 2013 和 Word 2010 加载它？

> ID：15097714
> 
> 赞同：3
> 
> 时间：2013-02-26T19:34:45.397
> 
> 标签：delphi, ms-word, ms-office, code-signing

我的公司编写了一个 Word 插件，它是一个 32 位 DLL，文件扩展名为“.WLL”，它是一个 Word 插件。它没有经过代码签名。

如何对用 Delphi 编写的 Win32 DLL 进行代码签名，以便 Microsoft Office 应用程序使用其“信任中心”设置信任并加载它？

我很确定我需要从某人那里购买证书，但我不知道我会从谁那里购买这样的证书。

其次，一旦我有这样一个将被微软接受的证书，我如何签署我的 Delphi 可执行文件？

（即使禁用信任中心似乎不再可能，Office 2010 的早期版本允许它，但 14.0.6129.5000 不允许）

# c# - 阻止来自 LINQ 查询的新值

> ID：15097715
> 
> 赞同：2
> 
> 时间：2013-02-26T19:34:46.703
> 
> 标签：c#, linq

我要查询的列表中有一些数据。然而，与此同时，其他用户可以添加到这个列表中，我得到错误的项目作为回报：

```
var query = from s in selected
            where s.contains("www")
            select s); 
```

然后用户可以在运行查询之前将项目添加到选定列表中，我也会得到这个。我可以防止这种行为吗？：

```
selected.add("123www")

foreach (var s in query)
/// gives me 123www 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T19:36:26.210

var“查询”只是分配给它的查询，但是当在例如 foreach 循环中访问查询时首先执行查询本身 - 因此您获得了新添加的数据。

如果你不想这样，你可以使用像“ToList()”这样的扩展方法，其中集合保持不变：

```
var queryResultList = (from s in selected
             where n.contains("www")
             select s).ToList(); 
```

这里 ToList() 立即迭代集合，您现在可以迭代 queryResultList 并获得正确的结果，即使新元素到达，输出也保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:38:07.717

查询代表一个动作，可以随时触发，如果数据源发生变化，它将产生不同的结果。

只需在您希望使用 .ToArray() 时对结果进行“快照”：

```
var query = from s in selected
                Where s.contains("www")
                Select s)
string[] snapshot = query.ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:50:03.350

当您调用`.ToList()`或`.ToArray()`执行查询时。因此，为避免您的问题，您可以编写以下代码：

```
var query = from s in selected
            where s.Contains("www")
            select s);

var result = query.ToList();
selected.Add("123www");

foreach(var item in result)
{
     /* You won't see "123www" */
} 
```

# java - 了解 Java 堆

> ID：15097719
> 
> 赞同：3
> 
> 时间：2013-02-26T19:34:55.023
> 
> 标签：java, memory, jvm, heap-memory

我有一台带有 2 个驱动器的 Windows Server 2008 机器：C:\ 和 G:\

在 G:\ 驱动器（较大的驱动器）上，我安装了一个第三方工具，用于在文件上生成 PDF。它有自己的服务器（Corda Server）来分配它的堆大小（我推到了 1.5GB）。Corda 服务器带有一个 JRE，可以在 Windows 上运行。

由于他们没有可视化工具，我需要安装 JDK 才能获得 VisualVM（我查看了堆，但他们都需要 JDK。

我在 C:\program files\java 上安装了 JDK 1.7。运行 VisualVM 后，我只看到堆大小只有 30mb。我有什么问题吗？它是否正确监控JVM？

评论中的帮助会很棒，如果不清楚，我可以澄清任何事情。

# javascript - 每 * 秒更新一次地理位置，但在纬度/经度不变时不更新

> ID：15097720
> 
> 赞同：0
> 
> 时间：2013-02-26T19:35:00.157
> 
> 标签：javascript, geolocation

好的，所以我有一些东西可以抓住用户的地理位置，因为这个用户可能正在移动它被设置为定时 setTimeout 以每 3 秒重新运行一次地理定位功能，如果他们移动将显示他们的进度，但是我想要它如果它们没有移动，例如它们的纬度和经度相同，则不要更新，因为也没有理由。

我的想法如下：

```
function startGeolocation() {
  var options;
  navigator.geolocation.getCurrentPosition(geoSuccess, geoFail, options);
}

//get various coordinates
function geoSuccess(position) {
  var gpsPosition = position;
  var coordinates = gpsPosition.coords;

//if its the first run through and myLat is empty, then continue as normal.
  if (!myLat){
  myLat = coordinates.latitude;
  myLong = coordinates.longitude;

//if its the second run through and the myLat is the same as it was before, do nothing.
    }else if ((myLat == myLatSame) && (myLong == myLongSame)){ 
    }

//else if they are different, e.g user has moved, then update.
else{
    myLat = coordinates.latitude;
    myLong = coordinates.longitude;
    setTimeout(geoSuccess, 3000);
}
myLatSame = myLat;
myLongSame = myLong;
} 
```

它似乎不起作用，并且页面完全停止加载地图。

但是，如果我回到非常基本的代码，

```
function startGeolocation() {
 var options;
 navigator.geolocation.getCurrentPosition(geoSuccess, geoFail, options);
 setTimeout(startGeolocation, 3000);
}

function geoSuccess(position) {
  var gpsPosition = position;
  var coordinates = gpsPosition.coords;
  myLat = coordinates.latitude;
  myLong = coordinates.longitude; 
```

这工作正常，每 3 秒更新一次。

我已经从长时间的 javascript 编码中断中回来了，所以我的语法和方法有点生疏。提前致谢

**编辑：**

我在代码中添加了一些警报，并在第一次运行时发生以下情况：它第一次运行所以警报（之前 if）=未定义 myLat 和 myLong。!myLat 是真的，因为它什么都没有，所以 myLat 和 myLong 充满坐标并在警报中发出警报（如果），以下警报（myLatSame + myLongSame）返回为“NaN”

else if 没有被触发，因为它们不一样，但是 else alert(else) 语句也没有被触发并且没有被看到。

```
//get various coordinates
function geoSuccess(position) {
  var gpsPosition = position;
  var coordinates = gpsPosition.coords;
alert("before if \n" + myLat + "\n" + myLong);
//if its the first run through and myLat is empty, then continue as normal.
  if (!myLat){
  myLat = coordinates.latitude;
  myLong = coordinates.longitude;
alert("in if \n" + myLat + "\n" + myLong);
alert(myLatSame + myLongSame);

//if its the second run through and the myLat is the same as it was before, do nothing.
    }else if ((myLat == myLatSame) && (myLong == myLongSame)){ 
    alert("in else if \n" + myLat + "\n" + myLong);
    }

//else if they are different, e.g user has moved, then update.
{
    myLat = coordinates.latitude;
    myLong = coordinates.longitude;
        alert("else \n" + myLat + "\n" + myLong);
    setTimeout(geoSuccess, 3000);   
}

myLatSame = myLat;
myLongSame = myLong;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:24:07.310

我建议探索使用`navigator.geolocation.watchPosition()`over`getCurrentPosition()`

如果用户发生更改，watchPosition 将触发。但是您也可以告诉函数在使用选项检查之前等待。

示例使用：

```
tracker = navigator.geolocation;

watchId = tracker.watchPosition(savePosition,  displayError, {enableHighAccuracy: true, timeout: 10000, maximumAge: 20000 }); 
```

maxiumAge 是以毫秒为单位的读数之间的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:05:33.363

是的，所以我认为错误可能是因为您的变量

```
myLatSame = myLat;
myLongSame = myLong; 
```

范围可能仅限于函数本身，而不是全局范围。价值观是否得到体现？你能提醒价值观吗？还要检查控制台是否显示任何错误，并检查您是否已关闭所有括号。从您附加的当前代码示例中，它最后缺少一个右括号。

编辑：您还需要将超时功能添加到您的第一个 IF。

```
 if (!myLat){
  myLat = coordinates.latitude;
  myLong = coordinates.longitude;
alert("in if \n" + myLat + "\n" + myLong);
alert(myLatSame + myLongSame);
setTimeout(geoSuccess, 3000);
//if its the second run through and the myLat is the same as it was before, do nothing.
    }else if 
```

# java - 通用类还是抽象类？

> ID：15097723
> 
> 赞同：1
> 
> 时间：2013-02-26T19:35:12.463
> 
> 标签：java, oop, generics, abstract-class

我的应用程序中有三个类`User`, `Group`，`Company`它们不属于同一个继承树，正如它们的名字所揭示的那样。每个类都有一个构造函数，它接收许多（不同的）参数，即：`User(String name, String password, int type)`, `Group(String name, String name)`, `Company(String name, int employees, boolean isValid)`. 对于所有类，每个构造函数所需的参数数量并不相同。我创建了一个类`ReadDataFromFile`来从 txt 文件中读取一些数据并创建新的对象，将数据作为参数传递给上述构造函数。这个类的代码对于每种类型显然都是相同的，除了一个创建对象的方法。因此，创建三个不同的类是不合适的，但我最好以更好的设计方法为目标。

我的问题是这个场合的合适设计是通用类还是抽象类并在其子类中实现不同的一种方法`createObject()`，假设来自 txt 文件的必要数据被放入具有不同长度的字符串数组中每种类型。我想遵循 Generic class: 的方法`class ReadDataFromFile<T>{}`，但我找不到应该如何处理不同的类型，因为每个类型都需要调用不同的构造函数。我应该检查类型`instanceof`吗？我应该将每个对象的类传递给方法吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:49:40.107

不明白您为什么将问题提出为“抽象*或*通用”，看起来常见的解决方案是两者兼而有之。

```
public abstract class ReadFromFile<T> {

  public T readFile(File file) {
    String[] rawInput = doSomeStuffCommonToAll();
    return constructObject(rawInput);
  }

  abstract T constructObject(String[] rawInput);
}

public class UserFileReader extends ReadFromFile<User> {

  @Override
  User constructObject(String[] rawInput) {
    return new User(rawInput[0], rawInput[1], Integer.parseInt(rawInput[2]);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:40:48.110

根据条件创建对象，例如“instanceof”验证：

```
if (objectData instanceof User){
 User = new User();
 user.setName(objectData.getString(1));
} //... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:44:28.613

我想我会选择抽象设计，例如使用抽象工厂模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T19:49:51.447

简而言之，两者都不是 :) 是的，您确实需要抽象，但它不一定是您似乎倾向于的子类形式。 [更喜欢组合而不是继承？](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)

长答案 :) 我不完全了解您的域，但根据您所写的内容，我假设您有三个文件，users.txt、groups.txt 和 Companies.txt，它们具有共享格式但具有不同的数据 - 例如CSV。所以你可以通过做这样的事情通过组合来实现抽象，即使我的假设是错误的，这也应该说明这一点。

```
public class FileReader {
    public static void read(File f, RowHandler rowHandler) {
        //read each line, convert its contents to a map, and pass it to rowHandler
    }
} 
```

在哪里

```
public interface RowHandler {
    void handle(Map<String,String> row);
} 
```

这意味着您将每行的读取和解析与对每行解析的行的操作分开。

要创建用户对象，您可以执行以下操作：

```
public class UserConstructor implements RowHandler {
    private List<User> users = new ArrayList<User);

    public void handle(Map<String,String> row) {
        users.add(new User(row.get("name"), row.get("password"), Integer.parseInt(row.get("type)));
    }

    public List<User> getUsers() {
        return users;
    }
} 
```

然后你通过做

```
UserConstructor uc = new UserConstructor();
FileReader.readFile(new File("users.txt), uc);
List<User> users = uc.users(); 
```

您使用类名 ReadDataFromFile。这个名字暗示了一个单一的目的，但你的问题表明你正在将另一个问题混入其中 - 所以它会读取文件并创建对象。ReadDataFromFile 应该只是从文件中读取数据，并将数据传递给另一个类以实现对其进行处理的策略。

这就是上述设计试图做的 - 将关注点分开。

# forms - symfony2.1类型实体集合

> ID：15097724
> 
> 赞同：1
> 
> 时间：2013-02-26T19:35:14.243
> 
> 标签：forms, symfony, collections

**我的问题**：我想知道是否可以在表单构建器中嵌入类型实体的集合。

我有两个实体：一个`Partitions`拥有许多实体的`Genrepartition`实体

```
/**
 * Partitions
 *
 * @ORM\Table(name="partitions")
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks
 */
class Partitions
{
// ...

/**
 * @var \Genrepartition
 *
 * @ORM\OneToMany(targetEntity="Genrepartition", mappedBy="idGenre")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="idGenre", referencedColumnName="idGenre")
 * })
 */
private $idgenre;

// ...

/**
 * Set idgenre
 *
 * @param \Acme\PartBundle\Entity\Genrepartition $idgenre
 * @return Partitions
 */
public function setIdgenre(\Acme\PartBundle\Entity\Genrepartition $idgenre = null)
{
    $this->idgenre = $idgenre;

    return $this;
}

/**
 * Get idgenre
 *
 * @return \Acme\PartBundle\Entity\Genrepartition
 */
public function getIdgenre()
{
    return $this->idgenre;
}

/**
 * Constructor
 */
public function __construct()
{
    $this->idgenre = new \Doctrine\Common\Collections\ArrayCollection();
}

/**
 * Add idgenre
 *
 * @param \Acme\PartBundle\Entity\Genrepartition $idgenre
 * @return Partitions
 */
public function addIdgenre(\Acme\PartBundle\Entity\Genrepartition $idgenre)
{
    $this->idgenre[] = $idgenre;

    return $this;
}

/**
 * Remove idgenre
 *
 * @param \Acme\PartBundle\Entity\Genrepartition $idgenre
 */
public function removeIdgenre(\Acme\PartBundle\Entity\Genrepartition $idgenre)
{
    $this->idgenre->removeElement($idgenre);
} 
```

在 上`PartitionsType`，我尝试了两种嵌入集合的方法，第一种是“文档样式”：

```
 ->add('idgenre', "collection", array("type" => new GenrepartitionType())) 
```

在第二个代码：

```
 ->add("idgenre", "entity", array(
      "class" => "AcmePartBundle:Genrepartition",
      "property" => "libellegenre",
      "query_builder" => function(\Doctrine\ORM\EntityRepository $er) {
                              return $er->createQueryBuilder("u");
                         } 
```

但问题是我需要一个集合的集合。

我想知道是否可以这样嵌入：

```
->add("idgenre", "collection", array("class" => "entity" ... 
```

`buildForm`目前，我在 my和 中使用第二种方法，我`Controller`自己添加了集合的集合，我尝试用 twig 渲染但没有成功。

这是我的控制器：

```
 $Partition = new \Acme\PartBundle\Entity\Partitions();

    //...
    $em = $this->getDoctrine()
         ->getRepository("AcmePartBundle:Genrepartition")->findAll();
    foreach($em as $value) $Ajouter->getIdpartition()->addIdgenre($value);
    // ... 
```

这是树枝文件：

```
 <select id=".." name="..">
         {% for elem in formPart.idpartition.idgenre %}
              <option value="{{ elem.vars.value.idgenre }}">{{ elem.vars.value.libellegenre }}</option>
         {% endfor %}
    </select> 
```

# javascript - 是否所有函数声明和表达式都是由幕后调用的 new Function() 创建的？

> ID：15097727
> 
> 赞同：2
> 
> 时间：2013-02-26T19:35:21.293
> 
> 标签：javascript, ecmascript-5, function-declaration, ecma262

我正在阅读 ECMA 262 v5 脚本中提到[Function definitions](http://www.ecma-international.org/ecma-262/5.1/#sec-13)的部分。对于函数声明和函数表达式，都提到了以下内容：

> [返回13.2](http://www.ecma-international.org/ecma-262/5.1/#sec-13.2)中指定的创建新 Function 对象的结果

13.2 节中提到的第一步是“创建一个新的原生 ECMAScript 对象...”，然后“将 F 的 [[Class]] 内部属性设置为“Function”。

由于“创建一个新的 Funciton 对象”的措辞，我想知道是否在幕后，函数声明/表达式是通过调用 new Function(....) 创建的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:26:29.783

[ECMA 脚本规范的第 15.3.2.1 节](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.2.1)谈到了 new Function(...) 表达式，并且 new Function(...) 表达式本身引用了与第 13.2 节中指定的相同的逻辑。

关于 new Function(...) 表达式的第 11 号项目符号指定...

> 返回按照 13.2 中指定的方式创建的新 Function 对象，将 P 作为 FormalParameterListopt 并将 body 作为 FunctionBody。将 Global Environment 作为 Scope 参数传入，并将 strict 作为 Strict 标志。

第 13.2 节是函数创建逻辑的单一来源，无论是创建函数表达式、函数声明还是调用 Function 构造函数。

所以回答这个问题，不。创建函数声明/表达式不会调用 new Function(...)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:44:01.440

> 由于“创建一个新的 Funciton 对象”的措辞，我想知道是否在幕后，函数声明/表达式是通过调用 new Function(....) 创建的？

不，它完全按照所说的去做，创建一个新对象并使其成为一个函数。你希望在其他的幕后发生`new Function`什么？相反，`new Function`在 13.2 中也确实调用了该函数实例化。

# c# - 与 DTO 相比，视图模型具有行为/方法，但

> ID：15097732
> 
> 赞同：0
> 
> 时间：2013-02-26T19:35:34.583
> 
> 标签：c#, viewmodel, dto

SO上的人经常说：“A`ViewModel` 持有可以由视图执行的方法，用于指示如何切换视图元素的属性等......”

当我`ViewModel`作为 WebApi 响应发送到序列化到的客户端时`JSON`，如何`ViewModel`在客户端上执行方法？

这对我来说根本不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:49:13.753

您至少可以通过两种方式理解视图模型

*   不是将您的业务对象传递给视图（例如 MVC Razor 视图），而是传递包含此视图所需属性的精简对象，仅此而已。当视图设计器使用从数据库中延迟加载的字段时，视图创建更容易并且您避免出现问题（避免[Select N+1 问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem "选择 N+1")和其他问题）

*   您可以创建将在客户端使用的视图模型（在 Javascript 中）。您在 Javascript 中将其创建为对象，因此它可以包含视图可以调用的方法。您所描述的（使用 WebAPI 发送 JSON 对象）只是将提供该视图模型的数据。例如，您可以在此处的主页上查看[knockoutjs](http://knockoutjs.com/ "淘汰赛JS")。您可以看到包含门票数组的门票视图模型。在此示例中，您可以看到在 viewmodel 中硬编码的三种票证。但是你可以像你描述的那样从 WebAPI 获取它们作为 JSON。下载它们后，只需将它们放在这个数组中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T19:50:15.637

DTO（数据传输对象）包含可消耗格式的数据。ViewModel/ActionModel 包含为 View 使用而格式化的数据。

DTO 可能如下所示：

```
public class OrderDTO
{
    public decimal Price { get; set; }
    public int Amount { get; set; }
} 
```

虽然 ViewModel 可能看起来像：

```
public class OrderViewModel
{
    public decimal Price { get; set; }
    public int Amount { get; set; }
    public string PriceBackgroundColor { get; set;}
    public Uri ImageUri { get; set; }
} 
```

# django - 如何禁用 Django 源中存在的日志消息？

> ID：15097735
> 
> 赞同：0
> 
> 时间：2013-02-26T19:35:39.250
> 
> 标签：django

例如在[https://github.com/django/django/blob/master/django/core/handlers/base.py#L133的 get_response()](https://github.com/django/django/blob/master/django/core/handlers/base.py#L133)

有一个

```
 logger.warning('Not Found: %s', request.path,
                extra={
                    'status_code': 404,
                    'request': request
                }) 
```

...我认为每次请求 404 时似乎都会记录一些内容。

这阻塞了我的日志，因为（例如）RSS 机器人在我的网站上抓取了一些旧的、无效的 URL

我想停止记录噪音，所以我在 settings.py 的 LOGGING 配置中尝试了类似下面的内容。

```
LOGGING = {
    ...

    'loggers': { 
       ...
       'django.core.handlers': {
        'handlers': ['app_logs'],
        'propagate': False,
        'level': 'ERROR'
    },
} 
```

在这里，我试图通过将 django.core.handlers 的模块日志级别设置为 ERROR 来消除 logger.warning，但它似乎不起作用。有谁知道要检查或做什么？

也许我遗漏了一些明显的东西，或者可能是完全做错了嗯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:43:30.600

正确的[记录器名称](https://github.com/django/django/blob/master/django/core/handlers/base.py#L18)是`django.request`.

# android - 视图寻呼机中的相同类/布局

> ID：15097736
> 
> 赞同：0
> 
> 时间：2013-02-26T19:35:45.147
> 
> 标签：android, android-viewpager, fragment

我正在尝试将同一类多次添加到 viewpager 以显示从 sqlite DB 读取的不同信息。问题是在创建视图时，始终覆盖当前视图中的对象、文本视图等...，而不是在每个页面的片段中。

```
 names = new ArrayList<String>();
    for (int d : descritions) {
        Description temp = DBCompanies.getDescriptionById(db_path,
                GSSettings.DBCODE, d, Locale.getDefault().getLanguage(),
                GSSettings.DEFAULTLANGUAGE, false);
        names.add(temp.getTitle());

    }
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);
    // mViewPager.setCurrentItem(0);
    mViewPager.refreshDrawableState();
... 
```

我怎样才能避免这种行为？

谢谢。

编辑：

我添加了更多代码来澄清我的问题：

框架公司100.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/ly_main"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:scrollbarDefaultDelayBeforeFade="500"
android:scrollbarFadeDuration="200"
android:scrollbarThumbVertical="@drawable/scrollbar_vertical_thumb_company" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <Gallery
        android:id="@+id/ga_image"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="2dp" />

    <RelativeLayout
        android:id="@+id/ly_details"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/ga_image" >

        <ImageView
            android:id="@+id/iv_options"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_margin="5dp"
            android:src="@drawable/ic_button_options" />

        <RelativeLayout
            android:id="@+id/ly_details_text"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginRight="5dp"
            android:layout_toRightOf="@+id/iv_options" 
            android:background="#77ffffff" >

            <TextView
                android:id="@+id/tv_address" android:text="kldfjhskdjhfksj"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:textSize="15sp" />
        </RelativeLayout>
    </RelativeLayout>

    <TextView
        android:id="@+id/tv_description"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/ly_details"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="5dp"
        android:textSize="15sp"
        android:textStyle="bold" />
</RelativeLayout> 
```

和这个布局的类：

FrameCompany100.java

```
public class FrameCompany100 extends Fragment implements OnClickListener,
    PictureUpdater, FragmentName {

private Bundle data = new Bundle();
private Gallery image;
private Description description;
private BaseAdapter adapter;
private String db_path;
private GuiParams main_params;
private Company company;
private String name = "";

@Override
public void onCreate(Bundle savedInstanceState) {
    data = this.getArguments();
    if (savedInstanceState != null)
        data = savedInstanceState;

    db_path = "/data/data/" + getActivity().getPackageName()
            + GSSettings.DB_PATH;

    description = DBCompanies.getDescriptionById(db_path,
            GSSettings.DBCODE, data.getInt("descriptionId"), Locale
                    .getDefault().getLanguage(), "es", false);
    company = DBCompanies.getCompany(db_path, GSSettings.DBCODE,
            description.getCompanyId());
    super.onCreate(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.framecompany100, container, false);
}

void init() {
    try {
        Display display = getActivity().getWindowManager()
                .getDefaultDisplay();
        int height = display.getHeight();
        final int width = display.getWidth();

        // params
        main_params = DBCompanies.getGuiParams(db_path, GSSettings.DBCODE,
                description.getCompanyId(), GSSettings.body);
        if (main_params == null || main_params.getBackgroundcolor() == null
                || main_params.getBackgroundcolor().equals("")
                || main_params.getTextcolor() == null
                || main_params.getTextcolor().equals(""))
            main_params = DBApp.getGuiParam(db_path, GSSettings.DBCODE,
                    GSSettings.body);

        // main Layout
        RelativeLayout ly_main = (RelativeLayout) getActivity()
                .findViewById(R.id.ly_main);
        try {
            ly_main.setBackgroundColor(Color.parseColor(main_params
                    .getBackgroundcolor()));
        } catch (Exception e) {
        }

        Typeface font_body = null;
        try {
            font_body = Typeface.createFromAsset(getActivity().getAssets(),
                    "fonts/" + main_params.getFont());
        } catch (Exception e) {
            font_body = Typeface.createFromAsset(
                    getActivity().getAssets(),
                    "fonts/"
                            + DBApp.getGuiParam(db_path, GSSettings.DBCODE,
                                    GSSettings.body).getFont());
        }

        TextView tv_description = (TextView) getActivity().findViewById(
                R.id.tv_description);
        try {
            tv_description.setTextColor(Color.parseColor(main_params
                    .getTextcolor()));
        } catch (Exception e) {
        }
        if (description == null) {
            tv_description.setText(R.string.nodescription);
        } else {
            tv_description.setText(description.getText());
        }

        TextView tv_address = (TextView) getActivity().findViewById(
                R.id.tv_address);
        try {
            tv_address.setTextColor(Color.parseColor(main_params
                    .getTextcolor()));
        } catch (Exception e) {
        }
.....
}

@Override
public void onResume() {
    init();
    // ((MainLayout) getActivity()).setDescription(description);
    super.onResume();
} 
```

FragmentPagerAdapter

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {
    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Description temp = DBCompanies.getDescriptionById(db_path,
                GSSettings.DBCODE, descritions[i], Locale.getDefault()
                        .getLanguage(), GSSettings.DEFAULTLANGUAGE, false);

        Fragment fragment = null;
        try {
            fragment = new CompanyLayout100();
            ((FragmentName) fragment).setName(temp.getTitle());
            Bundle bundle = new Bundle();
            bundle.putInt("descriptionId", temp.getId());
            fragment.setArguments(bundle);
        } catch (Exception e) {
        }

        return fragment;
    }

    @Override
    public int getCount() {
        return descritions.length;
        // return fragments.size();
    }

    @Override
    public CharSequence getPageTitle(int position) {
        String name = "";
        try {
            name = names.get(position);
        } catch (Exception e) {
        }
        return name;
    }
} 
```

发生的事情是，viewpager 为这些框架创建视图，但始终在可见框架中输入数据。我认为是因为 layout.xml 是相同的，所以只有一个 id 并且所有对象都指向可见布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:36:29.587

您需要一个创建实例的 FragmentPagerAdapter ...

```
public class PagerAdapter extends FragmentPagerAdapter {

    int pages;

    public PagerAdapter(FragmentManager manager) {
        super(manager);
    }

    @Override
    public int getCount() {
        return pages;
    }

    @Override
    public Fragment getItem(int position) {
        return MyFragment.newInstance(position);
    }

    public void setPages(int no) {
        pages = no;
    }
} 
```

因此，在主要活动中，您附加 PagerAdapter ...

```
 adapter = new PagerAdapter(getSupportFragmentManager());
   adapter.setPages(noPages);
   pager.setAdapter(adapter); 
```

最后，您需要包含 newInstance 方法的 Fragment。查看此[http://android-developers.blogspot.de/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.de/2011/08/horizontal-view-swiping-with-viewpager.html)了解更多信息。

干杯!

**编辑#1**：我的片段；**注意**：必须将位置作为参数传递

```
public class MyFragment extends SherlockFragment {
  private static final String KEY_POSITION="position";

  static MyFragment newInstance(int position) {
    MyFragment frag=new MyFragment();
    Bundle args=new Bundle();

    args.putInt(KEY_POSITION, position);
    frag.setArguments(args);

    return(frag);
  }

  @Override
  public View onCreateView(LayoutInflater inflater,
                           ViewGroup container,
                           Bundle savedInstanceState) {
    View result=inflater.inflate(R.layout.editor, container, false);
    EditText editor=(EditText)result.findViewById(R.id.editor);
    int position=getArguments().getInt(KEY_POSITION, -1);

    editor.setHint(String.format(getString(R.string.hint), position + 1));

    return(result);
  }
} 
```

# php - 登录表单未在 PHP 中正确提交

> ID：15097739
> 
> 赞同：0
> 
> 时间：2013-02-26T19:36:15.160
> 
> 标签：php

我是 PHP 新手，我有一个带有表单的登录页面。我想对用户进行身份验证，然后将用户重定向到具有季节值的另一个页面。当我提交页面时没有重定向，如果按 F5，页面将弹出表单的重新提交消息。这是我的代码。

```
<?php
        session_start();
         include('../includes/header.php');
           $title="Login";

?> 
<?php  

        include('../includes/authenticate.php');
        include('../includes/dbschema.php');

        //if the user has not logged in
        if(!isLoggedIn())
        {

           if($_SERVER['REQUEST_METHOD']== 'POST'){

        //include('../includes/authenticate.php');

        $username = $_POST['username'];
        $password = $_POST['password'];

        //sanitize username
    $username = mysql_real_escape_string($username);

        if(isset($_POST['username']) && isset($_POST['password'])){

        $query = "SELECT password, salt FROM user WHERE username = '$username';";

        $result = mysql_query($query);
        if(mysql_num_rows($result) < 1) //no such user exists
        {
            header('login.php');
           $errmessage = "Invalid user";
           print "<p id\"errmessage\"> $errmessage </p>";

        }

        $userData = mysql_fetch_array($result, MYSQL_ASSOC);
        $hash = hash('sha256', $userData['salt'] . hash('sha256', $password) );
        if($hash != $userData['password']) //incorrect password
        {
            header('login.php');

        }
        else
        {

            validateUser(); //sets the session data for this user

        }
        //redirect to another page or display "login success" message
         header('Location: actividades.php');

        }

        }
        else
        {
          $status = "logout";
           print  "<p id=\"usernamelink\">Bienvenido,<a id=\"usernamecolor\"> " . $_SESSION['username'] . " </a></p>";
          print  "<a id=\"logoutlink\" href=\"../includes/logout.php   \">Log out</a>";
          //page content follows
        }

          ?>

        </br>

          <div id="logindiv">
                  <?php   print "<h1 id=\"logintitle\">Login</h1>";?>
                       <form id="loginform" name="login" action="login.php" method="post" >
            Username: <input id="inplogin" type="text" name="username" />
                           <br/><br/>
            Password: <input id="inplogin" type="password" name="password" />
                    <br/>   

            <input id="btnlogin" type="submit" value="Login" />
        </form>
              </div>

<?php include('../includes/footer.php') ; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:49:40.963

你应该`exit;`在重定向之后。并将错误传递给您的登录脚本，例如：

```
if(login_fails()){
  header('Location: login.php?errorCode=1');
  exit;
} 
```

在您的`login.php`脚本中，检查是否`$_GET['errorCode']`存在并显示错误消息：

```
$errors = array(
  1 => 'Incorrect password',
);

if(isset($_GET['errorCode'])){
  $code = $_GET['errorCode'];
  print isset($errors[$code]) ? $errors[$code] : 'Unknown error';
} 
```

# c# - 用图像填充 WPF 矩形

> ID：15097742
> 
> 赞同：2
> 
> 时间：2013-02-26T19:36:18.390
> 
> 标签：c#, wpf, xna

我创建了新的 WPF 控件，向其中添加了一个 Rectangle，一切正常，它的绘制就像它应该的那样。但我不能用实际的图像绘制矩形。

```
BitmapImage bi = GetImage();
ImageBrush imgBrush= new ImageBrush(bi);

this.rectangle.Fill = imgBrush; 
```

但是这段代码只是使矩形透明，除了笔划。

这是`GetImage()`方法：

```
BitmapImage bi;

using (MemoryStream ms = new MemoryStream())
{
    bi = new BitmapImage();
    bi.CacheOption = BitmapCacheOption.OnLoad;

    texture.SaveAsPng(ms, texture.Width, texture.Height);

    ms.Seek(0, SeekOrigin.Begin);

    bi.BeginInit();
    bi.StreamSource = ms;
    bi.EndInit();

    ms.Close();
}
return bi; 
```

`texture`是一个`Texture2D`类，在此代码之前生成。

如果我`Bitmap`在这里返回 insted`BitmapImage`然后保存`Bitmap`图片是否正确绘制。

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T18:29:52.583

这是正确的转换方法`Bitmap to `BitmapImage`:`

```
using(MemoryStream memory = new MemoryStream())
{
    bitmap.Save(memory, ImageFormat.Png);
    memory.Position = 0;
    BitmapImage bitmapImage = new BitmapImage();
    bitmapImage.BeginInit();
    bitmapImage.StreamSource = memory;
    bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
    bitmapImage.EndInit();
} 
```

感谢“Pawel Lesnikowski”，他在以下主题中发布了答案：

[从 System.Drawing.Bitmap 加载 WPF BitmapImage](https://stackoverflow.com/questions/94456/load-a-wpf-bitmapimage-from-a-system-drawing-bitmap)

# c++ - 如何调用记录的模板化向量

> ID：15097744
> 
> 赞同：-2
> 
> 时间：2013-02-26T19:36:21.363
> 
> 标签：c++, templates, stl, c++11

我在正确获取语法时遇到问题，所以如果有人可以提供帮助，好吗？我有一个计时函数，它接受一个函数及其参数作为参数，但我不确定调用应该是什么样子。

```
#include <iostream>
#include <iterator>
#include <random>
#include <vector>
#include<list>
#include<deque>
#include <algorithm>
#include <chrono>
#include <functional>
#include <sstream>

using namespace std;
using namespace std::chrono;

int global_SortType = 1;

template<class F, class A, typename T>
void times(F func, A arg, int n, T typeval)    // call func(arg,n)
{
    auto t1 = system_clock::now();
    func(arg, n, typeval);
    auto t2 = system_clock::now();
    auto dms = duration_cast<milliseconds>(t2-t1);
    cout << "f(x) took " << dms.count() << " milliseconds\n";
}

template<class T>
bool Greater(const T& v1, const T& v2)
{
    return false;
}

bool Greater(const int& v1, const int& v2)
{
    return v1 > v2;
}

bool Greater(const string& v1, const string& v2)
{
    return strcmp(v1.c_str(), v2.c_str()) > 0;
}

template <class T>
struct GreaterThan: public std::binary_function<T, T, bool > {
    bool operator () ( const T &ival, const T &newval ) const {
        return Greater(ival,  newval);
    }
};

string random_gen(string& s)
{
    string Result;          // string which will contain the result
    ostringstream convert;   // stream used for the conversion
    convert << rand();
    return convert.str();
}

int random_gen(int& i){
    default_random_engine re { std::random_device()() };
     uniform_int_distribution<int> dist;
     auto r= bind(dist,re);
     int x =r();
     return x;

}

template<class T>
void print(T& val)
{
}

void print(int& val)
{
    cout << val << " ";
}

void print(string& val)
{
    cout << val.c_str() << " ";
}

struct Record
{
    int v;
    string s;

    Record(){}
    Record(int iv, string ss): v(iv), s(ss)
    {
    }
};

Record random_gen(Record& r)
{
    string stemp;
    int i = 0;
    return Record(random_gen(i), random_gen(stemp));
}

void print(Record& r)
{
    cout<<"int="<<r.v<<" string=";
    print(r.s);
}

bool Greater(const Record& r1, const Record& r2)
{
    return global_SortType == 1 ? Greater(r1.v, r2.v) : Greater(r1.s, r2.s);
}

template<typename SequenceContainer, class T>
void build_cont(SequenceContainer& seq, int n, T valtype)
{
    for(int i=0; i!=n; ++i) {
        T gen = random_gen(valtype);
        typename SequenceContainer::const_iterator it;
        it=find_if(seq.begin(), seq.end(), std::bind2nd(GreaterThan<T>(), gen));
        seq.insert(it, gen);
    }
    for(int i=n-1; i >=0; i--)
    {
        int gen = i;
        if(i > 0)
            gen = random_gen(i)%i;
        typename SequenceContainer::const_iterator it=seq.begin();
        for(int j = 0; j < gen; j++)
            it++;
        seq.erase(it);

                }
            }

int main()
{
int n=1000;
vector<int> v;
times(build_cont<std::vector<int>, int>, v, n, 0); // works

vector<string> sv;
string stemp = "";

times(build_cont<std::vector<string>, string>, sv, n, stemp); // works

    global_SortType = 1;
    vector<Record> rv;
    Record rtemp(0, "sfds");

    global_SortType = 2;
    vector<Record> rsv;
    Record rstemp(0, "sfds");

    //This one desn't work and I'm not sure of the right syntax

    times(build_cont<std::vector<Record>,Record>, sv, n, stemp); 

    return 0;
} 
```

我收到此错误 对“vector>”类型的非 const 左值引用无法绑定到不相关类型“vector, allocator>>”的值

它指向线

```
func(arg, n, typeval); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:45:40.010

在这个函数里面：

```
template<typename SequenceContainer, class T>
void build_cont(SequenceContainer& seq, int n, T valtype) 
```

您正在使用`const_iterator`s 而不是`iterator`s 来执行插入和删除。您应该按如下方式更改该函数的定义：

```
template<typename SequenceContainer, class T>
void build_cont(SequenceContainer& seq, int n, T valtype)
{
    for(int i=0; i!=n; ++i) {
        T gen = random_gen(valtype);
        typename SequenceContainer::iterator it;
        //                          ^^^^^^^^ 

        it=find_if(seq.begin(), seq.end(), std::bind2nd(GreaterThan<T>(), gen));
        seq.insert(it, gen);
    }
    for(int i=n-1; i >=0; i--)
    {
        int gen = i;
        if(i > 0)
            gen = random_gen(i)%i;
            typename SequenceContainer::iterator it=seq.begin();
            //                          ^^^^^^^^ 

        for(int j = 0; j < gen; j++)
            it++;
        seq.erase(it);
    }
} 
```

此外，您忘记了包含函数定义`#include`的标准标题。您在函数中使用该函数：`<cstring>``strcmp()``Greater()`

```
bool Greater(const string& v1, const string& v2)
{
    return strcmp(v1.c_str(), v2.c_str()) > 0;
    //     ^^^^^^
    //     You need to #include <cstring> before calling this function
} 
```

此外，您正在`times()`使用错误的参数（`sv`和`stemp`）调用函数：

```
//This one desn't work and I'm not sure of the right sytax
times(build_cont<std::vector<Record>,Record>, rsv, n, rstemp);
//                                            ^^^     ^^^^^^ 
```

# bash - bash 脚本中的多个终端

> ID：15097748
> 
> 赞同：0
> 
> 时间：2013-02-26T19:36:34.493
> 
> 标签：bash

我正在尝试编写一个 bash 脚本，但我需要其中的多个选项卡或终端。是否可以在 bash 脚本中使用它。我需要它，因为我使用了一些需要继续运行的命令。

谢谢大家，对不起我的英语！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:41:10.720

要在后台运行进程，请`&`在末尾添加。例如，它`ls`在后台运行并用于`tail`监视正在前台写入的文件。

```
ls -lR / > /tmp/ls.out &
tail -f /tmp/ls.out 
```

如果在任何时候您想等到后台进程完成后再继续 - 也许在脚本结束之前退出之前 - 使用裸`wait`命令：

```
wait 
```

# python - Django - HttpRequest 类的代码

> ID：15097754
> 
> 赞同：0
> 
> 时间：2013-02-26T19:37:06.543
> 
> 标签：python, django, python-2.7, django-views

**答案**

**（1）**对象（ ）
的`read()`方法调用其属性的方法。也就是说，是它自己的类的一个对象，并且有它自己的方法。**(2)**对象 的方法和文件对象的方法不一定相同。因此，他们可能会采取不同的论点。**(3)**必须由子类设置。**(3)** 是的。更准确地说，装饰器意味着每当我们引用 名称时都会调用该方法，例如. */感谢 Daniel Roseman 的回答。/***问题**`HttpRequest``self``read()``_stream``_stream``read()`

 **`read()``HttpRequest``_stream`
`read()`

 **`self._stream`

 **`@property`
`self.body`****** 

 *******我正在浏览`HttpRequest`Django 类的代码。

根据下面的代码，`self.body()`尝试调用`self.read()`并将其返回值分配给`self._body`.
如果没有异常，它会在 self._body 上调用 StringIO 并将其返回值分配给 self._stream。

**我有四个相关的问题：**
**（1）**
是否`self.read()`调用自身`self._stream`？还是它调用文件对象的读取方法？

**(2)**
在 的定义中包含 args 和 kwargs 的原因是`self.read`什么？

**(3)**
对于我在 HttpRequest 的定义中发现的，`self._stream`是由`self.body`方法创建的。第一次调用
时会发生什么？`self.body()`估计`self._stream`还没有创建。
要创建它，`self.body()`需要先创建`self._body`.
要创建 self._body，调用 self.read()。
但是 s `elf.read() calls .read() on self._stream`。
那么，它从哪里获得 self._stream 呢？

**（4）**
不管self.body是一个属性，还是调用self.body()方法，
它的返回值就是我们调用self.body时得到的。我对吗？

**django.http.HttpRequest**

```
class HttpRequest(object):

    #...

    def __init__(self):
        self.GET, self.POST, self.COOKIES, self.META, self.FILES = {}, {}, {}, {}, {}
        self.path = ''
        self.path_info = ''
        self.method = None
        self._post_parse_error = False

    #...

    @property
    def body(self):
        if not hasattr(self, '_body'):
            if self._read_started:
                raise Exception("You cannot access body after reading from request's data stream")
            try:
                self._body = self.read()
            except IOError, e:
                raise UnreadablePostError, e, sys.exc_traceback
            self._stream = StringIO(self._body)
        return self._body

    #...

    def read(self, *args, **kwargs):
        self._read_started = True
        return self._stream.read(*args, **kwargs)

    #... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:50:24.760

1.  不，它调用`read()`任何对象的方法`self._stream`。

2.  这是允许将任意参数（位置和关键字）传递给方法的正常模式。在这种情况下，它们直接传递给流的 read 方法。

3.  该代码上方的注释解释了发生了什么 - self._stream 必须由子类设置。

4.  是的。`@property`装饰器意味着当您简单地引用名称时调用该方法，即 as而`self.body`不是`self.body()`.*******

# javascript - Javascript styling toggle doesn't work first click

> ID：15097755
> 
> 赞同：0
> 
> 时间：2013-02-26T19:37:08.867
> 
> 标签：javascript, html, css, toggle

I'm making this little html app with a sidebar menu that pops up on click. It works fine except that it only starts to work after the second click. On the first click nothing happens.

CSS:

```
#menubalk{
   margin-left: -260px;
} 
```

HTML:

```
<div id="menubutton">
   <img src="design/images/menu.png" id="menu" onclick="toggle()" alt=""/>
</div>

<div id="menubalk">
   <h5>Menu</h5>
</div> 
```

Javascript:

```
function toggle () {
  var el = document.getElementById("menubalk");
  var kop = document.getElementById("kop");
  var pag = document.getElementById("pagina");

  if ( el.style.marginLeft=="-260px" ) {
     el.style.marginLeft="0px";
     kop.style.marginLeft="260px";
     pag.style.marginLeft="260px";
  } else {
     el.style.marginLeft="-260px";
     kop.style.marginLeft="0px";
     pag.style.marginLeft="0px";
  }
} 
```

I think I might have to set the margin somewhere in the javascript also but I can't figure it out.

All help is greatly appreciated!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:44:06.460

`style.marginLeft` is looking at your inline styles. As you haven't defined any inline style initially `style.marginLeft` is undefined.

To fix this, you could simply reverse your if/else statement:

```
if ( el.style.marginLeft=="0px" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:46:53.430

With this line

```
if(el.style.marginLeft=="-260px") { 
```

You are checking if the inline style of the element is a specific value. However, this style is set in the css. I recommend adding a className to the menu to expand it. You can check for this classname and add/remove it accordingly:

```
 if ( el.className == "expanded" ) {
     el.className = "";
  } else {
     el.className = "expanded";
  } 
```

With this addition to the css:

```
#menubalk.expanded {
    margin-left:0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:48:31.463

`element.style` only search for inline style, to get actual style you can use `getComputedStyle`

i.e.
`if ( window.getComputedStyle(el).marginLeft=="-260px" ) {...`

Reference: [https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)

Note: For IE, this only works for IE9 or above.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T19:43:08.647

You say you set the menu style in the JavaScript somewhere but I would actually recommend doing that as part of your initialisation, rather than setting the left margin with CSS.

I suspect (it's hard to see without an example) that on the first click the JavaScript is going straight to the else condition because it's not recognising that you've set the margin in CSS (or elsewhere). Then on the second click, JavaScript has been used to set the left margin so it can read it and perform accordingly.

# mysql - MATCH() AGAINST() 不匹配第二个字符串 - MySQL

> ID：15097757
> 
> 赞同：1
> 
> 时间：2013-02-26T19:37:22.247
> 
> 标签：mysql, full-text-search

我有一个名为的 MyISAM 表`links`。它有一列`searcher`有一个`FULLTEXT`索引。这是我的变量值：

1.  ft_min_word_len = 1
2.  ft_stopword_file =
3.  ft_max_word_len = 84

我需要以任何顺序匹配包含`[show]`&的行。 我运行这个查询：`[1]`

```
SELECT * FROM links WHERE MATCH(searcher) AGAINST('+[show] +[1]' IN BOOLEAN MODE) 
```

但它也匹配不包含`[1]`字符串的行。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:25:12.937

您似乎必须明确括号是搜索字符串的一部分，而不是分组表达式语法的一部分。

此查询应该适合您：

```
SELECT * FROM links WHERE MATCH(searcher) AGAINST('+"[show]" +"[1]"' IN BOOLEAN MODE) 
```

以下是一些示例小提琴：

*   [不工作](http://www.sqlfiddle.com/#!2/1cd77/2)
*   [在职的](http://www.sqlfiddle.com/#!2/1cd77/1)

# django - PostrgreSQL 数据库中的表未删除

> ID：15097759
> 
> 赞同：0
> 
> 时间：2013-02-26T19:37:25.857
> 
> 标签：django, postgresql, heroku

我想在 Heroku 上的 Postgres 数据库中删除一个表。但是我还没有完全了解 South，所以我决定编写一个函数：

```
def dropTable(request):
    cursor = connection.cursor()
    cursor.execute("DROP TABLE books_request CASCADE;")
    success = simplejson.dumps({"success":"success",})
    return HttpResponse(success, mimetype="application/json") 
```

所以现在我的`books_request table`已经被删除了。

然后我在 Heroku 上为我的应用程序进入 bash，我确实`python manage.py syncdb`希望它会重新创建表，但似乎没有。为什么？

有没有办法强制同步那个应用程序？

我还收到此错误消息，这可能是同步时问题的一部分：

```
Problem installing fixture '/app/bookstore/fixtures/initial_data.json': Traceback (most recent call last):
DatabaseError: Could not load sites.Site(pk=1): value too long for type character varying(50) 
```

更新：

我认为问题在于表格一开始并没有下降，因为当我转储数据时，我仍然可以看到表格。为什么它不能正确丢弃桌子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:56:06.327

如果您使用的是 south，则可能需要运行 migrate 命令。此外，如果它将迁移视为已应用，则不会重新运行它。尝试运行以下命令，然后添加输出：

```
heroku run python manage.py migrate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T00:17:00.750

是的，你可能没有掉表，你只是认为你有。

确保您首先通过以下方式正确引用连接：

```
from django db import connection 
```

使用 django 调试工具栏查看执行的 sql 以及发生了什么。或者可能在 heroku shell 上使用像 pudb 这样的调试程序来查看发生了什么。

# c# - 如何在同一窗口中显示弹出窗口并立即关闭它？

> ID：15097760
> 
> 赞同：0
> 
> 时间：2013-02-26T19:37:30.350
> 
> 标签：c#

我有一个大问题：

我正在加载`webBrowser`一个网站。在这个网站上，我的程序正在搜索一个按钮并单击它：

```
HtmlElementCollection classButton = webBrowser1.Document.All;
foreach (HtmlElement element in classButton)
{
    if (element.GetAttribute("className") == "single_like_button")
    {
       element.InvokeMember("click");
    }
} 
```

但它作为 IE 弹出窗口打开了一个新窗口。我想在表单中显示此窗口（用于后台工作），并在打开后立即关闭此弹出窗口（因为当您关闭弹出窗口时，站点上的脚本会继续运行）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:03:57.700

NewWindow 事件只是让您取消它。最好的办法是解析所需的元素并找出它将尝试导航到的 URL，然后根据需要使用该 URL。

这是在程序正在执行点击而不是用户的假设下进行的。

程序是用来做什么的？

# php - 在where子句中使用php变量时MySQL查询不起作用

> ID：15097762
> 
> 赞同：1
> 
> 时间：2013-02-26T19:37:36.513
> 
> 标签：php, mysql

我是 PHP 和 MySQL 的新手。我正在尝试制作一个简单的搜索表单，我希望使用它根据表单中输入的输入文本显示数据库的结果。我的代码是这样的：

表单.php

```
<!DOCTYPE html>
<html lang="en">
<html>
<head>
<title>test</title>
</head>
<body>
<form action="search.php" method="GET" id="form">
Name: <input type="text" name="name" >
Age:<input type="text" name="age">
Search<input type="submit" name="submit" id="Search" Value="Search">

</form>

</body>
</html> 
```

连接.php

```
 <?php
  $connect = mysql_connect('localhost','$user','$password'); 

  if(!$connect){
die('Could not connect'.mysql_error() );  
  }

  $db_selected = mysql_select_db('test');  

  if(!$db_selected){
die('wrong'.mysql_error() );
  }

  ?> 
```

搜索.php

```
 <?php
  include("includes/connect.php");

  $name=$_GET['name'];

  echo $name;

  $query = "SELECT * FROM `cats` WHERE name='\$name'";
  $results= mysql_query($query);

  if (!empty($results)){
echo "query successful" ;
exit;
   }
  $row=mysql_fetch_assoc($results);
  echo "Age:".$row['age'];
  echo "Name:".$row['name'];
 ?> 
```

正确地`echo $names`输出结果，也是如此`echo "query successful"`。然而

```
echo "Age:".$row['age']; 
echo "Name:".$row['name']; 
```

只回显字符串部分，查询似乎没有获取任何结果。

我尝试将`mysql_fetch_asso`c 更改为`mysql_fetch_array`，但它也没有做任何事情。谁能告诉我我在这里做错了什么。我的数据库表有两列和两行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:40:10.973

您正在`$`通过执行来逃避变量中的`\$`. 尝试：

```
$query = "SELECT * FROM `cats` WHERE name='$name'"; 
```

**编辑**

从下面的讨论。

的问题`undefined index`是，当你真正使用`$row['age']`时，数据库中的列名是`Age`. 因此，您必须`$row['Age']`在提及该项目时使用。也是如此`name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:38:56.097

```
$query = "SELECT * FROM `cats` WHERE name='" . $name . "'"; 
```

或不连接

```
$query = "SELECT * FROM `cats` WHERE name='$name'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:44:33.277

这应该有效：

$query = "SELECT * FROM `cats`WHERE name = '$name'";

此外，当您调用“退出”时；在以下块中，它将取消脚本其余部分的执行：

```
 if (!empty($results)){
     echo "query successful" ;
     exit;
    } 
```

# iphone - 哪些离线地图更适合 iPhone

> ID：15097763
> 
> 赞同：0
> 
> 时间：2013-02-26T19:37:40.303
> 
> 标签：iphone, xcode, maps, offline

我正在开发仅包含一个城市的离线地图的 iphone 应用程序

我已经搜索并找到了 mapBox 并为我路由，如果我想在地图上放置图钉并查看每个图钉的信息，哪个更好？

我可以在数据库中存储一个城市的谷歌地图并使用它吗？

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:18:30.503

MapBox、RouteMe 甚至 MapKit 都能够显示离线本地存储的地图，这三者之间的区别在于这样做所需的工作量以及它们的功能集。使用哪一个完全取决于您要实现的目标。在过去，我使用 MapKit 来显示选定区域的自定义地图（光栅、PNG 格式），地图被分割成图块，并且命名类似于谷歌图块，例如：

```
/MapTiles/Z<ZoomLevel>/<XCoord>/<YCoord>.png 
```

如果您要使用 MapKit [https://github.com/mtigas/iOS-MapLayerDemo](https://github.com/mtigas/iOS-MapLayerDemo) ，这可能会对您有所帮助。至于显示信息的图钉，MapKit 也能做到这一点。

作为比较，如果您想应用自定义样式以适应您的应用程序的外观，您很可能会使用 MapBox，突出显示对您的应用程序的使用很重要的功能。

至于谷歌地图的离线存储，虽然您在技术上可以通过 URL 检索单个图块、存储它们并离线显示它们（类似于上面），但这很可能违反了他们的服务条款。另一种方法是使用[OpenStreetMap](http://www.openstreetmap.org/)。

# java - 错误捕获/异常处理

> ID：15097767
> 
> 赞同：0
> 
> 时间：2013-02-26T19:37:48.503
> 
> 标签：java

通过使用 try/catch 块，我对错误捕获有了基本的了解，但是我的捕获方法使用户在输入无效字符后重新启动程序。

有人可以演示如何在允许程序运行的同时进行有效的错误陷阱吗？

代码 ：

```
import java.io.*; //Input/Output command; this part is ESSENTIAL

class FindingTheSurfaceAreaOfAPyramid2
{
    public static void main (String[] args) throws IOException
    {
        BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));   //Loading the Text Box

        //Defining variables and string 'nicknames'
        String stringBaseLength, stringBaseWidth, stringTriangleHeight;  //named strings for organization's sake
        double convertToNumL, convertToNumW, convertToNumH, total1, total2, total3;   //'double' is nessesary for decimal answers as they commonly happen, using 'int' will round the result; inaccurate!
        //used in 'if' statements
        boolean realNumber = true;
        boolean realNumber2 = true;
        boolean realNumber3 = true;

        //First message and notice
        System.out.println ("Note: This program is compatible with ONLY rectangular based pyramids.");

        //Question 1: Units
        System.out.println ("First off, what unit is this pyramid in? (ex. cm, mm, in, ft. etc.)");
        String Units = myInput.readLine ();

        //Question 2: Length
        System.out.println ("1) Please enter the length of the base.");
        stringBaseLength = myInput.readLine ();
        try
        {
            Integer.parseInt (stringBaseLength);
            System.out.println ("Your base length is " + stringBaseLength + " " + Units + ".");  //this line is restating the the input as well as the unit of measurement
        }
        catch (NumberFormatException e)
        {
            //If they catch anything other than numbers, it would tell the user
            System.out.println ("That was either a smart remark, a negative number or jibberish.");
            System.out.println ("As a consequence, you have to restart the program.");
            realNumber = false;

        }
        if (realNumber)
        {
            //Question 3: Width
            System.out.println ("2) Please enter the width of the base");
            stringBaseWidth = myInput.readLine ();

            try
            {
                Integer.parseInt (stringBaseWidth);
                System.out.println ("Your base width is " + stringBaseWidth + " " + Units + ".");

            }
            catch (Exception e)
            {
                System.out.println ("That was either a smart remark, a negative number or jibberish.");
                System.out.println ("As a consequence, you have to restart the program.");
                realNumber2 = false;

            }
            if (realNumber2)
            {
                //Question 4: Height
                System.out.println ("3) Please enter the height of the triangle face.");
                stringTriangleHeight = myInput.readLine ();

                try
                {
                    Integer.parseInt (stringTriangleHeight);
                    System.out.println ("Your triangle height is " + stringTriangleHeight + " " + Units + ".");
                }
                catch (Exception e)
                {
                    System.out.println ("That was either a smart remark, a negative number or jibberish.");
                    System.out.println ("As a consequence, you have to restart the program.");
                    realNumber3 = false;
                }
                if (realNumber3)
                {

                    //Converting the input to 'double' to express the answer(s) in decimal format
                    convertToNumH = Double.parseDouble (stringTriangleHeight);
                    convertToNumL = Double.parseDouble (stringBaseLength);
                    convertToNumW = Double.parseDouble (stringBaseWidth);
                    total1 = convertToNumL * convertToNumW;         //base area, length x width
                    total2 = convertToNumL * convertToNumH / 2;     //triangle area using sidelength 'length', base x height / 2
                    total3 = convertToNumW * convertToNumH / 2;     //triangle area using sidelength 'width  ,  base x height / 2

                    //Calculations and concluding sentences
                    System.out.println ("The area of the triangle with base length " + convertToNumL + " cm is " + total2 + Units + "^2.");
                    System.out.println ("The area of the triangle with base length " + convertToNumW + " cm is " + total3 + Units + "^2.");
                    System.out.println ("The base area is " + total1 + " " + Units + "^2.");
                    System.out.println ("The total surface area is " + (total1 + total2 + total2 + total3 + total3) + " " + Units + "^2.");
                }
            }
        }
    }
} //end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:42:20.720

您发布了很多代码，但是错误后继续的一种模式非常简单。在伪代码中：

```
boolean validInput = false;
while (!validInput) {
    // Read some input from the user
    // If it's of the right format, set validInput to true
    // Else print an error message, and don't change validInput
} 
```

循环将继续执行，直到用户输入有效的内容（或终止程序，当然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:40:03.423

您需要循环它直到用户输入 realNumber

```
boolean realNumber = false;
        while(!realNumber)
        {

    BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));   //Loading the Text Box

            //Defining variables and string 'nicknames'
            String stringBaseLength, stringBaseWidth, stringTriangleHeight;  //named strings for organization's sake
            double convertToNumL, convertToNumW, convertToNumH, total1, total2, total3;   //'double' is nessesary for decimal answers as they commonly happen, using 'int' will round the result; inaccurate!
            //used in 'if' statements

            boolean realNumber2 = true;
            boolean realNumber3 = true;

            //First message and notice
            System.out.println ("Note: This program is compatible with ONLY rectangular based pyramids.");

            //Question 1: Units
            System.out.println ("First off, what unit is this pyramid in? (ex. cm, mm, in, ft. etc.)");
            String Units = myInput.readLine ();

            //Question 2: Length
            System.out.println ("1) Please enter the length of the base.");
             try
                    {
                        Integer.parseInt (stringBaseLength);
                        System.out.println ("Your base length is " + stringBaseLength + " " + Units + ".");  //this line is restating the the input as well as the unit of measurement
realNumber = true;
                    }
                    catch (NumberFormatException e)
                    {
                        //If they catch anything other than numbers, it would tell the user
                        System.out.println ("That was either a smart remark, a negative number or jibberish.");
                        System.out.println ("As a consequence, you have to restart the program.");
                        realNumber = false;

                    }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:12:02.273

您需要重构代码并删除重复项。如果您与以下代码进行比较，您的代码会更加混乱并且容易出现错误。根据需要和可以重复使用的功能来减少功能。重用应该是重中之重。如何消除不必要的步骤？

```
 public class Test{

 static String Units=null;
 static BufferReader myInput 
 public static void main (String[] args){
 //Your Main function
 //Initialize the BufferReader and Read the UNITS
 // Sysouts with your questions
  convertToNumL=readDimension();
 // Sysouts with your questions
  convertToNumW=readDimension();
 // Sysouts with your questions
  convertToNumH=readDimension();

  //Your Calculations 

  }

  public static Double readDimension()
  {
      String temp=null;
      while(true) {

          temp=myInput.readLine();
          while(verifyDimension(temp)){

             return Double.parseDouble(temp);

          }

      } 

  }       

  public static boolean verifyDimension(String temp){

     boolean verify=true;

      try{

      Double.parseDouble(temp) ;

      }catch(NumberFormatException e){

        verify=false;

         //Your Statements
      }
       return verify;

  }            

 } 
```

# python - 参数化创建表时的 PL/Python 错误

> ID：15097773
> 
> 赞同：0
> 
> 时间：2013-02-26T19:38:03.977
> 
> 标签：python, psql, plpython, postgresql-8.3

我正在运行一堆按 PostgreSQL 8.3 数据库上的日期参数化的清理脚本。

我只是想用几个日期变量参数化一堆代码并测试创建表给我以下错误：

警告：无法转储无法识别的节点类型：858861618

这是导致问题的代码：

```
 CREATEOR REPLACE FUNCTION tst(
    start_day VARCHAR,
    end_day VARCHAR
)
RETURNS VOID
VOLATILE
STRICT
LANGUAGE plpythonu
AS $$
    parameters = dict(
        start_day = start_day,
        end_day = end_day )

    plpy.execute(
        """
drop table testtable cascade;

CREATE TABLE testtable (
start_time timestamp,
column2 text)
with (appendonly=true,orientation=column,compresstype=quicklz,compresslevel=1,fillfactor=95)
partition by range (start_time) 
( start ( '{start_day}'::date ) end ('{end_day}'::date) every ('1 day'::interval)
with (appendonly=true,orientation=column,compresstype=quicklz,compresslevel=1,fillfactor=95),
default partition other_dates with (appendonly=true,orientation=column,compresstype=quicklz,compresslevel=1) );

analyze dhcp.l2r_nogeo;

        """.format(**parameters))

        $$; 

```

> 如何使用 python 参数化一个简单的创建表脚本而不生成错误警告：无法转储无法识别的节点类型：858861618？

# javascript - 在淘汰赛中动态添加到可观察数组中时，“写入”不适用于 ko.computed

> ID：15097774
> 
> 赞同：1
> 
> 时间：2013-02-26T19:38:07.793
> 
> 标签：javascript, knockout.js

考虑一下[这个小提琴](http://jsfiddle.net/wV6GM/)。

我想将`ko.computed`s 添加到`ko.observableArray`动态：

```
self.items.push(ko.computed({
    read: function () {
        return items[i];
    },
    write: function (value) {
        //some write action
        alert(value);
    }
})); 
```

我需要管理从数组中的`write`函数。`ko.computed`使用此代码， read 工作得很好，但**knockout**没有调用该`write`函数，因此`alert`没有被调用。

我错过了什么吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:56:56.513

我解决了它创建另一个**ViewModel**：

```
function item(value) {
    var self = this;

    self.value = ko.observable(value);
    self.computed = ko.computed({
        read: self.value,
        write: function (value) {
            alert(value);
            self.value(value);
        }
    });
}

function header(items) {
    var self = this;

    self.items = ko.observableArray();

    for (var i = 0; i < items.length; i++) {
        self.items.push(new item(items[i]));
    }
} 
```

的HTML：

```
<ul data-bind="foreach: items">
    <li>
        <input type="text" data-bind="value: computed" />
    </li>
</ul> 
```

和[小提琴](http://jsfiddle.net/nescalante/wV6GM/2/)工作。

# c++ - 为什么 C++ STL 容器开始和结束函数按值而不是常量引用返回迭代器？

> ID：15097778
> 
> 赞同：4
> 
> 时间：2013-02-26T19:38:28.637
> 
> 标签：c++, optimization, stl, containers

当我查看不同 STL 对象和函数的标准时，对我来说没有意义的一件事是为什么容器对象的 begin() 和 end() 函数会按值而不是通过常量引用返回迭代器？在我看来，迭代器可以由容器对象在内部保存，并在容器发生变异时进行调整。这将减轻在 for 循环中创建不必要的临时对象的成本，如下所示：

```
for (std::vector<int>::iterator it=my_vec.begin(); it!=my_vec.end(); ++it){
    //do things
} 
```

这是一个有效的担忧吗？是否有关于使用对迭代器的引用使这成为一个坏主意的东西？无论如何，大多数编译器实现都会优化这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T19:42:07.290

Iterators are designed to be light-weight and copyable (and assignable). For example, for a vector an iterator might literally just be a pointer. Moreover, the whole point of iterators is to *decouple* algorithms from containers, and so the container shouldn't have to care at all what kind of iterators anyone else is currently holding

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T19:57:13.300

如果`begin`and`end`方法返回一个引用，容器将被迫将每个迭代器作为成员。人们试图为实施留下尽可能多的灵活性。

例如，您可以为一个充当标准容器且不消耗任何额外内存的数组创建一个简单的包装器。如果这个包装器需要包含迭代器，它就不会那么简单或那么小了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:58:10.940

好吧，如果你选择正确的迭代器，STL 会:-)

```
for (
    std::vector<int>::const_iterator it=my_vec.begin(), 
    end=my_vec.end(); 
    it!=end; 
    ++it)
{
    //do things
} 
```

STL 中的迭代器具有指针语义。常量迭代器具有常量指针语义。

# flash - 从 mxml 执行 Actionscript 类函数

> ID：15097781
> 
> 赞同：1
> 
> 时间：2013-02-26T19:38:47.163
> 
> 标签：flash, apache-flex, mxml, osmf

我需要使用 OSMF 创建一个视频播放器。我想将我们的 mxml 文件与 actionscript 文件分开。我怎样才能做到这一点 ？我有一个 actionscript 类文件，我想在加载 mxml 时执行它的构造函数。

我添加了 creationComplete="initApp()" 并在 initApp 上调用`var p = new myclass();`. 现在在 myclass() 我正在尝试以编程方式添加标签

```
my_player.mxml

<?xml version="1.0" encoding="utf-8"?>
<!-- controls\videoplayer\VideoPlayerSimple.mxml-->
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="initApp()"
               >
    <fx:Script>
        <![CDATA[
            public function initApp(){
                var p = new my_player("a");
            }
        ]]>
    </fx:Script>

</s:Application>

my_player.as

   package 
{
    import mx.controls.Label;
    import mx.core.Application;
    import mx.events.FlexEvent;
    import spark.components.Application;
    public class my_player extends spark.components.Application
    {
        public function convey_player(a:String){
            var label:Label = new Label();
            label.text = "Testxxx";
            addElement(label);
                    Alert.show("Hello");

        }
    }
} 
```

但是什么都没有添加到 flash 中。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:05:40.280

构造函数只会在创建对象 js 的实例时运行。如果要运行构造函数代码，则必须创建它的实例。在您的 MXML 文件中，为 creationComplete 事件添加一个事件侦听器，并在那里创建您的 ActionScript 对象的一个​​实例。

这将在 MXML 代码作为其组件生命周期的一部分完成其创建过程后有效地执行 ActionScript 类构造函数代码。

# c++ - C++11 中的值初始化对象和 std::vector 构造函数

> ID：15097783
> 
> 赞同：15
> 
> 时间：2013-02-26T19:38:50.787
> 
> 标签：c++, vector, c++11

在 C++ 中，使用 C 数组而不是`std::vector`. 至少在 C++03 中，为数不多的令人信服的原因之一是不可能使用向量来分配未初始化的对象数组。“填充”构造函数`std::vector`是：

`vector(size_type count, const T& value = T())`

意思是...

```
int* array = new array[1000000]; 
```

可能比：

```
std::vector<int> v(1000000); 
```

...因为向量构造函数必须对整数数组进行零初始化。因此，当使用 POD 向量时，没有真正的等价于`malloc`; 你能得到的最好的就是`calloc`.

C++11 似乎用“值初始化”的概念改变了这一点。在 C++11 中，`std::vector`有一个新的构造函数，它采用单个`size_type`值，没有默认参数。这“值初始化”了向量中的所有元素。C++11 标准区分“值初始化”和“零初始化”。

我的理解是“值初始化”相当于在`T`. 如果`T`是类似的 POD 类型`int`，则默认构造函数只是创建一个未初始化的整数。因此，在 C++11 中，`explicit vector::vector(size_type count)`真正等同于`malloc`if `T`is a POD。

但是，我对此的理解是基于*草案*C++11 标准，而不是最终标准。

**问题**：我的理解在这里正确吗？如果是 POD ，是否`explicit vector::vector(size_type count)`提供未初始化的数组（类似于）？`malloc``T`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-26T19:58:43.943

> **问题**：我的理解在这里正确吗？如果是 POD ，是否`explicit vector::vector(size_type count)`提供未初始化的数组（类似于）？`malloc``T`

不，C++03 和 C++11 之间是有区别的，但事实并非如此。不同之处在于，在 C++03 中，`vector<T>(N)`将默认构造 a `T`，然后`N`对其进行复制以填充向量。

而在 C++11 中，默认构造时间`vector<T>(N)`将填充向量。`T` `N`对于 POD 类型，效果是相同的。事实上，我希望几乎所有类型的效果都是相同的。然而，对于像`unique_ptr`（只移动类型）这样的东西，差异是至关重要的。C++03 语义永远不会起作用，因为您无法复制仅移动类型。

所以：

```
vector<unique_ptr<int>> v(10); 
```

创建一个包含 10 个空 unique_ptrs 的向量（它们不是彼此的副本）。

在极少数情况下它会有所作为，您需要可以通过以下方式轻松完成的 C++03 行为：

```
vector<T> v(10, T()); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T18:36:19.340

Note: the value-initialization happens in the allocator, so if you want a vector to do default initialization instead of value initialization for default constructed elements, you can do something like:

```
template<typename T>
struct DefaultInitAllocator {
    template<typename U>
    void construct(U* p)
    { ::new (static_cast<void*>(p)) U; }

    template<typename U, typename... Args>
    void construct(U* p, Args&&... args)
    { ::new (static_cast<void*>(p)) U(std::forward<Args>(args)...); }

    // ... rest of the allocator interface
};

// ...
typedef std::vector<int, DefaultInitAllocator<int>> DefaultInitVectorInt; 
```

# g++ - libdc1394 上未定义的引用

> ID：15097787
> 
> 赞同：1
> 
> 时间：2013-02-26T19:39:11.303
> 
> 标签：g++, libdc1394

我将 libdc1394-2.2 用于相机 Bumblebee2。但是，当我尝试使用以下代码释放带宽时：

```
if (dc1394_iso_release_bandwidth(camera, val)==DC1394_SUCCESS)
    printf( "Succesfully released %d bytes of bandwidth\n", val); 
```

引发下一个错误：

```
undefined reference to `dc1394_iso_release_bandwidth' 
```

但是，函数“dc1394_iso_release_bandwidth”包含在“iso.h”中，并且该头文件包含在主程序中。

有人知道如何解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-31T08:17:51.757

您是对的，该函数确实列在 dc1394-2 流`iso.h`头文件中，并且没有复杂的条件编译可能导致它不出现在您的翻译单元中。

*可能*是一个问题的一件事是相当常见的名称`iso.h`- 我会修改您的`g++`编译语句以包含一个`-H`标志，该标志应列出正在加载的标头。您正在加载的头文件可能实际上不是那个*头*文件。`iso.h``dc1394`

我知道，这是一个远射，但值得检查是否只是为了打折这种可能性。

# jquery - 使用 jquery 检测引用 URL 隐藏 DIV

> ID：15097790
> 
> 赞同：0
> 
> 时间：2013-02-26T19:39:15.207
> 
> 标签：jquery

有没有办法使用“引用 URL”，当检测到引用网站（例如来自 example.com）时，目标登录页面会隐藏页面`<div class="helloworld"></div>`上显示的内容？

```
 $(document).ready(function() {  
        if(document.referrer.indexOf(window.location.hostname) == "example.com"){  
                var referrer =  document.referrer;
                           $(".helloworld").hide();
            }
    });
<div class="helloworld">hidden when example.com is the referring URL</div> 
```

任何关于 jquery 的帮助都可以写出来

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:43:06.060

`indexOf` takes a string and searches for the first instance of that string inside the string in question. The result is a numeric value of the index, -1 if not found.

So your code should be something along the lines of:

```
$(document).ready(function() {

    var referrer =  document.referrer;
    if(!referrer) return; // no referrer

    if(referrer.toLowerCase().indexOf("example.com") !== -1){  

                       $(".helloworld").hide();
        }
}) 
```

# python - Scons 多目录复制/压缩

> ID：15097791
> 
> 赞同：0
> 
> 时间：2013-02-26T19:39:16.357
> 
> 标签：python, scons

**问题：**

我有 2 个源目录，一个在“当前”目录中，一个在其他目录中”

1: C:/somedir/dir_a/[win32, win64]/[测试, 文档, a, b]

和
2：D:/projects/project_a/api/[win32, win64]/[tests, a, b, c]

sconstruct@D:/projects/project_a/sconstruct

现在我想将两个目录都放在一个 zip 文件中，根目录为“win32”。目录 2 (D:/..) 已经在 sconstruct 中复制了它的 win32 文件夹 + 内容，这意味着 (afaik) D:/projects/project_a/api/win32 (或 win64) 就 scons 而言已经是一个目标.

**我尝试了什么：**

然后，当我尝试将目录 1 (c:/..) 复制到目录 2 时，它根本不会，因为目标已经存在。所以这已经是第一次尝试了。

第二次尝试我使用 env.Zip 来获取 Zip 中的 2 个目录，这很有效，但是它们的根源完全错误。zip 如下所示：

```
zip..somedir/dir_a/win32/[tests, documentation, a, b]
   |.api/win32/[tests, a, b, c] 
```

我想要的地方：

```
zip..win32/[tests, documentation, a, b, c] 
```

有没有办法在 Scons 中正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:07:16.640

**找到解决方案：**

大家好，

为我遇到的无根复制树问题找到了一个合适的解决方案。

[使用发现 @ http://www.scons.org/wiki/AccumulateBuilder](http://www.scons.org/wiki/AccumulateBuilder)的累加器

然后将其称为：

```
target = "dir where you want to copy contents of source"
basedir = "source dir containing content to be copied"
env.Accumulate(target, [os.path.join(basedir ,x) for x in os.listdir(basedir)]) 
```

希望这可以帮助将来遇到类似问题的其他人:)

# java - servlet 中的 hashmap 缓存

> ID：15097801
> 
> 赞同：0
> 
> 时间：2013-02-26T19:39:44.200
> 
> 标签：java, caching, servlets, hashmap

我正在尝试实现一个用于 GPS 监控的 servlet 并尝试创建简单的缓存，因为我认为它会比`SQL`对每个 Http 请求的请求更快。简单的方案：

在该`init()`方法中，我将每辆车的一个点读入`HashMap`(vehicle id = key, location in json = value) 。之后，一些请求尝试读取这一点，一些请求尝试更新（一辆车更新一项）。当然，我想尽量减少同步，所以我阅读了 javadoc： [http ://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

> 请注意，此实现不同步。如果多个线程同时访问一个哈希映射，并且至少有一个线程在结构上修改了映射，则必须在外部进行同步。（结构修改是添加或删除一个或多个映射的任何操作；仅更改与实例已包含的键关联的值不是结构修改。）

如果我是对的，我的任务中没有任何同步，因为我只做“不是结构修改==更改与实例已包含的键关联的值）”。这是一个正确的说法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:45:38.720

使用 ConcurrentHashMap 它不通过锁使用同步，而是通过原子操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:46:01.183

错误的。将项目添加到哈希映射是一种结构修改（并且要实现缓存，您必须在某个时候添加项目）。

使用 java.util.concurrent.ConcurrentHashMap。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:48:11.140

如果我理解正确，您有两种类型的请求：

*   从缓存中读取
*   写入缓存（更新值）

在这种情况下，您可能会尝试同时写入同一个地图两次，这就是文档所指的内容。

如果所有请求都通过同一段代码（例如，只能从一个线程调用的更新方法），您将不需要同步。

如果您的系统是多线程的，并且您有多个线程或一段代码写入地图，您将需要在外部同步您的地图或使用 ConcurrentHashMap。

* * *

为清楚起见，您需要同步的原因是，如果您有两个线程都试图更新同一个键的 JSON 值，那么谁赢了？这要么是偶然的，要么是导致异常，或者更糟糕的是，错误的行为。

每当您从两个线程修改相同的元素时，您都需要在该代码上进行同步，或者更好的是，如果适用的话，使用数据结构的线程安全版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:10:14.170

Caching is not an easy problem - but it is a known one. Before starting, I would carefully measure wheter you really do have a performance problem, and whether caching actually solve it. You may think it should, and you may be right. You may also be horrendously wrong depending on the situation ("Preemptive optimization is the root of all evil"), so measure.

This said, do not implement a cache yourself, use a library doing it for you. I have personnaly good experience with [ehcache](http://ehcache.org/).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T19:50:32.897

如果所有条目都被读入hashmap，`init()`然后只读取/修改 - 那么是的，*理论上*所有其他线程都不需要同步，尽管由于线程缓存值可能会出现一些问题，所以`ConcurrentHashMap`会更好。

也许不是自己实现缓存，而是使用[Guava 库中的简单实现](http://code.google.com/p/guava-libraries/wiki/CachesExplained)

# objective-c - 在 XCode 中更改项目和目标名称

> ID：15097806
> 
> 赞同：32
> 
> 时间：2013-02-26T19:40:06.110
> 
> 标签：objective-c, project, xcode4.6, targets

我创建了一个项目并完全开发了它。

我需要更改项目和目标的名称。有没有一种简单的方法可以做到这一点，还是我应该创建一个新项目并复制其中的所有项目？

谢谢

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-26T19:46:44.507

您可以通过单击左侧边栏顶部的项目名称来更改项目名称，然后在右侧边栏的 Identity 下输入新名称，最后按 Return。

# xsd - 测试是否需要 JAXB 生成的字段

> ID：15097809
> 
> 赞同：1
> 
> 时间：2013-02-26T19:40:27.730
> 
> 标签：xsd, jaxb

我有一个带有属性名称、电话、地址的 JAXB 生成类 PersonType。在 XSD 中，我定义了“电话”minoccurs="1"。如果 XSD 中是否需要属性“电话”，我如何以编程方式（即通过反射等）在 Java 代码中进行测试？

稍后编辑：JAXB 生成器创建一个没有任何“必需”等属性的类。所以类上没有注释，或者它的字段表明它是否需要。但是，在指定 XSD 等效元素的字段上有 @XmlElement 注释。所以我想唯一的解决方案是检查这个注释，然后针对 XSD 创建一个 XPath 或其他东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:29:17.680

`@XmlElement`注释有一个属性（默认为`required`false），用于指示需要 XML 元素 ( `minOccurs`> 0)。您可以使用`java.lang.reflect`API 从类中获取此值。

**XML 模式**

在下面的 XML 模式中，该`foo`元素是必需的，而该`bar`元素不是。

```
<?xml version="1.0" encoding="UTF-8"?>
<schema 
    xmlns="http://www.w3.org/2001/XMLSchema" 
    targetNamespace="http://www.example.org/schema" 
    xmlns:tns="http://www.example.org/schema" 
    elementFormDefault="qualified">

    <complexType name="root">
        <sequence>
            <element name="foo" type="string"/>
            <element name="bar" type="string" minOccurs="0"/>
        </sequence>
    </complexType>

</schema> 
```

**生成的类**

下面是从 XML 模式生成的类。我们看到该`foo`字段用`@XmlElement(required=true)`anf 注释，该`bar`字段不是。

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "root", propOrder = {
    "foo",
    "bar"
})
public class Root {

    @XmlElement(required = true)
    protected String foo;

    protected String bar;

} 
```

# php - 页面加载时提交的下拉过滤器

> ID：15097811
> 
> 赞同：0
> 
> 时间：2013-02-26T19:40:42.640
> 
> 标签：php, mysql, variables, drop-down-menu

我正在使用以下代码为查询选择一个变量。我需要在页面加载时自动选择一个值/变量。

```
$ID_SOCIEDAD = $_POST['Country'];

echo "<form name='country_list' method='POST' action='http://opben.com/colombia/familias-de-carteras' >";

echo "<select name='Country' >";

while($row = mysql_fetch_array($result))
  {

                   echo " <option selected value='". $row['Fund_Manager_Company_Code'] ."'>". $row['Fund_Manager_Company_Name'] ."</option>";

                  }
       echo "     </select>
    <input type='submit' value='Filter' />";
 echo "</form>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:46:39.870

使用此代码

```
 <?=($_POST['country']== $row['Fund_Manager_Company_Code']) ?"selected='selected'" : "" ?> 
```

或者

```
 echo ($_POST['country']== $row['Fund_Manager_Company_Code']) ?"selected='selected'" : ""; 
```

# sql-server - Linq to SQL 缺少记录

> ID：15097812
> 
> 赞同：0
> 
> 时间：2013-02-26T19:40:45.403
> 
> 标签：sql-server, linq-to-sql

我在 DBML 中使用视图，在大多数情况下，它映射到表。我有与 EVENTCODE 视图相关的 CR 视图。我将上下文设置为将 SQL 记录到 Console.Out，然后直接针对 DB 运行生成的 SQL。我拿回了 3 条记录。但是当我在 Linq to SQL 中运行选择时（在上下文中设置 LoadOptions 以绑定到 EVENTCODE 表），我在 CR.EVENTCODEs 中只有 1 条记录。视图之间的联系是正确的（与数据库中的相同）。我可以调用 context.EVENTCODEs.Where... 我也得到 3 条记录。但是通过 CR 对象拉取相关的 EVENTCODE 记录只返回 1。我还应该检查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:40:45.403

问题是在 EVENTCODE 视图中标识为主键的字段没有唯一标识视图中的记录。返回的 3 条记录都具有相同的键值，因此 EntitySet 正在添加第一条记录，而忽略后续记录，因为它们与集合中的记录具有相同的键。我将视图更改为使用组合键（跨 4 个字段），现在相关记录编号为 3。

# c++ - 如何比较字符或字符串变量是否等于某个字符串？

> ID：15097816
> 
> 赞同：1
> 
> 时间：2013-02-26T19:40:51.257
> 
> 标签：c++, comparison, string-comparison, logical-operators

我试图让这个while循环工作，但由于某种原因，它会自动“假设”用户输入错误。

`value`是字符串（应该是字符吗？） `A`,`B`是`C`字符串（应该是字符吗？）

```
void Course::set()
{
    cout << "blah blah blah" << endl;
    cout << "youre options are A, B, C" <<endl;
    cin >> value;

    while(Comp != "A" || Comp != "B" || Comp != "C") 
    {
        cout << "The character you enter is not correct, please enter one of the following: You're options are A, B, C" << endl;
        cin >> value;
    }
    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T19:42:18.863

在您的情况下，您应该使用 an`&&`而不是 an `||`。目前，您的条件*始终*为真，因为`Comp`只能等于三个常数之一，但不能同时等于三个常数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:57:47.527

作为其他已发布解决方案的替代方案，有些人可能认为这更具可读性：

```
while(! (Comp == "A" || Comp == "B" || Comp == "C"))
{
    // do something
} 
```

此外，正如其他人指出的那样，您可能打算：

```
cin >> Comp; 
```

（因为你`Comp`没有`value`在你的`while`条件下使用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:51:42.417

您在那里犯的错误是在构建块时考虑*了语言的日常使用。*`if`正如其他人回答的那样，您应该使用`&&`正确的逻辑。

# java - AlertDialog 未显示，也没有错误消息

> ID：15097818
> 
> 赞同：0
> 
> 时间：2013-02-26T19:41:01.697
> 
> 标签：java, android, cordova, android-alertdialog, phonegap-plugins

我怎么了`AlertDialog`？`Logcat`仅到达***“在构建器设置项目之后”***，然后它停止并且没有错误消息。应用程序的其余部分继续没有问题。想不通为什么`AlertDialog`不显示。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this.cordova.getActivity());
Log.d(LOG_TAG, "after new AlertDialog");
builder.setTitle(title);
Log.d(LOG_TAG, "after builder set title");
CharSequence[] choicesAsCharSeq = choices.toArray(new CharSequence[choices.size()]);
builder.setItems(choicesAsCharSeq, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        // The 'which' argument contains the index position
        // of the selected item
        Log.d(LOG_TAG, "Index #" + which + " chosen.");
        String result = "";
        result = "" + which;
        // ActionSheet.this.callbackContext.sendPluginResult(new PluginResult(PluginResult.Status.OK, result));
    }
});
Log.d(LOG_TAG, "after builder set items");
builder.show();
Log.d(LOG_TAG, "after builder show"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:47:35.193

我将插件更改为扩展 CordovaPlugin 而不是 Plugin，问题就消失了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T20:42:24.477

你必须写

```
builder.create().show(); 
```

代替

```
builder.show(); 
```

# ios - 自动布局不起作用？

> ID：15097820
> 
> 赞同：6
> 
> 时间：2013-02-26T19:41:07.923
> 
> 标签：ios, objective-c, uitableview, uisearchbar, autolayout

我在使用自动布局设置的表格视图顶部有一个搜索栏，如下所示：

```
_searchBar.translatesAutoresizingMaskIntoConstraints = NO;
_tableView.translatesAutoresizingMaskIntoConstraints = NO;

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[_searchBar]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(_searchBar)]];
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[_tableView]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(_tableView)]];

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[_searchBar][_tableView]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(_searchBar, _tableView)]]; 
```

当我运行它时，一切看起来都很好。但是当我`_searchBar.showsScopeBar = YES;`在开始编辑搜索栏之前这样做时，搜索栏和表格视图不会自动调整大小。即使我这样做`[_searchBar sizeToFit]`，表格视图也不会调整大小并向下移动。为什么？？

注意：我没有将搜索栏作为表格视图的标题；它只是一个父视图和两个子视图。注意2：我在打电话之前和之后检查了`intrinsicContentSize`，尺寸确实发生了变化。`_searchBar``_searchBar.showsScopeBar = YES;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:40:33.333

你必须`invalidateIntrinsicContentSize`：

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    searchBar.showsScopeBar = YES;
    [searchBar invalidateIntrinsicContentSize];
    [searchBar setShowsCancelButton:YES animated:YES];
}

- (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
{
    searchBar.showsScopeBar = NO;
    [searchBar invalidateIntrinsicContentSize];
    [searchBar setShowsCancelButton:NO animated:YES];
} 
```

查看[UISearchBar 的范围按钮不会显示 iOS6](https://stackoverflow.com/questions/13009095/uisearchbars-scope-button-wont-show-up-ios6)

# c# - 文本框数组 textchanged 无法正确触发

> ID：15097822
> 
> 赞同：0
> 
> 时间：2013-02-26T19:41:08.967
> 
> 标签：c#, asp.net, arrays, visual-studio-2010, text

在我的代码中，我需要做一些`textboxes[]`可以从数据库中获取一些信息的代码，但是它的工作率为 50%

```
 public static Table tableinfo = new Table();
    public static TableRow rowinfo = new TableRow();
    public static TextBox[] information = new TextBox[1000];
    public static Label[] information1 = new Label[1000];
    public static Label[] information2 = new Label[1000];
    public static Label[] information3 = new Label[1000];
    public static Label[] information4 = new Label[1000];
    public static string[] gettext = new string[1000];
    public static int textboxes;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            textboxes = 1;
            for (int i = 0; i < 1000; i++)
            {
                Array.Clear(gettext, 0, gettext.Length);
                Array.Clear(information, 0, information.Length);
            }
        }
        else
        {

        }
        tableinfo.Controls.Clear();
        tableinfo.BorderWidth = 1;
        addtextboxes();
        placeholder1.Controls.Add(tableinfo);
        makeandfilltextboxes();
    }

    public static void makeandfilltextboxes()
    {
        for (int i = 0; i < textboxes; i++)
        {
            gettext[i] = "";
        }
        for (int i = 0; i < textboxes; i++)
        {
            gettext[i] = information[i].Text;
            //go to database and fetch information
            information1[i].text = databaseinformation1[i];
            information2[i].text = databaseinformation2[i];
            information3[i].text = databaseinformation3[i];
            information4[i].text = databaseinformation4[i];
        }
    }

    static void TestForm_TextChanged(object sender, EventArgs e)
    {
        makeandfilltextboxes();
        tableinfo.Controls.Clear();
        tableinfo.BorderWidth = 1;
        textboxes++;
        addtextboxes();
    }
    public static void addtextboxes()
    {
        for (int i = 0; i < textboxes; i++)
        {
            rowinfo = new TableRow();
            TableCell cellinfo = new TableCell();
            information[i] = new TextBox();
            information[i].AutoPostBack = true;
            information[i].CausesValidation = false;
            information[i].EnableViewState = true;
            information[i].Text = gettext[i];
            information[i].TextChanged += new EventHandler(TestForm_TextChanged);
            rowinfo.Cells.Add(cellinfo);
            cellinfo.Controls.Add(information[i]);
            tableinfo.Controls.Add(rowinfo);

            TableCell cellinfo1 = new TableCell();
            information1[i] = new Label();
            information1[i].EnableViewState = true;
            information1[i].Text = databaseinformation1[i];
            rowinfo.Cells.Add(cellinfo1);
            cellinfo.Controls.Add(information1[i]);
            tableinfo.Controls.Add(rowinfo);

            TableCell cellinfo2 = new TableCell();
            information2[i] = new Label();
            information2[i].EnableViewState = true;
            information2[i].Text = databaseinformation2[i];
            rowinfo.Cells.Add(cellinfo2);
            cellinfo.Controls.Add(information2[i]);
            tableinfo.Controls.Add(rowinfo);

            TableCell cellinfo3 = new TableCell();
            information3[i] = new Label();
            information3[i].EnableViewState = true;
            information3[i].Text = datbaseinformation3[i];
            rowinfo.Cells.Add(cellinfo3);
            cellinfo.Controls.Add(information3[i]);
            tableinfo.Controls.Add(rowinfo);

            TableCell cellinfo4 = new TableCell();
            information4[i] = new Label();
            information4[i].EnableViewState = true;
            information4[i].Text = databaseinformation4[i];
            rowinfo.Cells.Add(cellinfo4);
            cellinfo.Controls.Add(information4[i]);
            tableinfo.Controls.Add(rowinfo);
        }
    } 
```

如您所见，我正在用您在信息[i] 中填写的值填充数组，如果我能找到某些东西，我正在数据库中查找。这一切都很好。唯一的问题是以`information[i].TextChanged += new EventHandler(TestForm_TextChanged);`奇怪的方式调用。

第一次输入文本框时触发第二次不触发第三次触发第四次不触发等等

如果我每次都能开火，`TestForm_TextChanged`问题就会得到解决。

我也有一些复选框，他们有 checkchanged 的​​事件处理程序，他们显示手头上的信息是否被选中，这是否会导致我在更新面板中工作时出现一些问题，并且在我的 aspx 设计器上有一个脚本管理器。是什么导致了这个问题？

使用 Google chrome 我可以使用 ENTER 并且它会一直工作。但是输入在 Internet Explorer 中不起作用。

注意：我在这里发送的代码只是一个副本，而不是真正的代码。这是由于我的实习政策。

如果您需要有关代码的更多信息，请随意询问，尽量详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:14:34.283

我解决了这个问题，显然问题是没有 ID

所以我添加了信息[i].ID = "信息" + i; 这解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:57:30.727

我认为问题在于您所有的文本框和标签都是静态的。使它们成为您`Page`实例的一部分。

# core-data - iOS 5.1 openWithCompletionHandler not suceeding

> ID：15097829
> 
> 赞同：2
> 
> 时间：2013-02-26T19:41:30.847
> 
> 标签：core-data, ios6, ios5.1, uimanageddocument

I'm attempting to make my iOS6.0 app back compatible with 5.1\. I've turned off the obvious things (e.g. autolayout) but am getting stuck at a strange stage.

My app takes data from an XML source and puts it in a core date structure. On iOS 6 this works perfectly. On iOS 5 it gets stuck here

```
else if (self.dataStorage.documentState == UIDocumentStateClosed) {
   NSLog(@"THIS FIRES = db on disk but closed");
   [self.dataStorage openWithCompletionHandler:^(BOOL success) {
      NSLog(@"THIS NEVER FIRES");
    }];
} 
```

If I look at self.datastorage it is what I would expect (a closed managed document) fileURL: file://localhost/ ..... /Library/Application%20Support/iPhone%20Simulator/5.1/Applications/E3E9192D-2DFE-4882-9041-00A1DF9E98D6/Documents/Default%20Database documentState: [Closed]

Edit: Actually works fine with iOS 5.0 or 6.0+. My problem is purely with iOS 5.1 run on the iPhone simulator. Could this just be a bug with the simulator? It will not open a closed UIManagedDocument nor create an non-existing file.

Here is the full code for completeness:

```
- (void)setDataStorage:(UIManagedDocument *)database
{
   if (_dataStorage != database) {
      _dataStorage = database;
      [self useDocument];
    }
}

-(UIManagedDocument*) initialiseDatabase {
  if (!self.dataStorage) {  
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"DefaultDatabase"];
    self.dataStorage = [[UIManagedDocument alloc] initWithFileURL:url]; // setter will create this for us on disk
  }
  return self.dataStorage;
}
- (void)useDocument {
  if (![[NSFileManager defaultManager] fileExistsAtPath:[self.dataStorage.fileURL path]]) {
    // does not exist on disk, so create it
    NSLog(@"db not on disk");
    [self.dataStorage saveToURL:self.dataStorage.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
       NSLog(@"Doesn't fire");
      }];
} else if (self.dataStorage.documentState == UIDocumentStateClosed) {
    NSLog(@"db on disk but closed");
    // exists on disk, but we need to open it
    [self.dataStorage openWithCompletionHandler:^(BOOL success) {
        NSLog(@"Doesn't fire");
    }];
} else if (self.dataStorage.documentState == UIDocumentStateNormal) {
    NSLog(@"db on disk and open");
}
} 
```

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:32:38.167

现在我已经更详细地确定了这个问题，似乎很多人以前都问过这个问题。可悲的是，从来没有一个令人满意的解决方案。但是，这只是模拟器的问题/错误，对于真实设备不应该是问题（正如我在 5.1 iPad 上测试所证实的那样）。

# html - Opening a link in a new page highjacks the referrer page

> ID：15097832
> 
> 赞同：0
> 
> 时间：2013-02-26T19:41:35.557
> 
> 标签：html

A client wishes to have a link that opens a new window and shows the website of an investment company. Pretty straight forward so far.

So I create this link

```
<a href="https://webbroker.td.com/waw/idp/login.htm" target="_blank">Click Me</a> 
```

The client then tells me that the page is acting all weird. So I test it and he's right, it's acting very strange.

Here's what my tests shows.

**Firefox mac:** Page opens, then closes itself and returns to the window with the client's website where it then changes the URL to the one that is suppose to open.

**Safari mac and Chrome mac:** Page opens, then closes itself and returns to the window with the client's website

**Client's IE:** opening and closing multiple windows (his words, didn't test it myself);

Instead of redirecting to the page itself, I changed the link to go to the homepage. User will now have to click on "Login" to access the page we wanted originally. Guess what? It does the same thing.

[Here's a simplified fiddle.](http://jsfiddle.net/wN79k/1/) You'll see it's pretty straight forward.

Now I know that the problem isn't from my side but on the investment site. They seem to dynamically add some parameters to the URL for security reasons I suppose.

My question is: how can I avoid all this non sense and simply open the page without it closing? Can someone explain to my why it's doing so?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:45:01.500

我自己尝试了登录链接（在 Chrome 中），它做同样的事情.. 自行关闭.. 您应该联系他们的网页设计师并报告问题。我成功单击停止加载按钮并浏览页面。一切都“正常”，除了它关闭的那个东西。联系他们并等待回复/修复。

# java - 是否可以在 libGDX 中禁用帧限制？

> ID：15097834
> 
> 赞同：15
> 
> 时间：2013-02-26T19:41:45.510
> 
> 标签：java, libgdx, frame-rate

更具体地说，一个桌面 libGDX-LWJGL 应用程序。有一些配置选项可以禁用 CPU 同步以及 vsyncing，但无论应用程序以 60fps 运行。

这对于所有实际用途都很好-但出于好奇，如果没有别的，我想看看帧率可以达到多高。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-01-12T00:59:32.680

[由于图书馆的变化， Rode Hyde](https://stackoverflow.com/a/15099260/1725096)的答案不再正确。试试这个：

```
LwjglApplicationConfiguration config = new LwjglApplicationConfiguration();
config.vSyncEnabled = false; // Setting to false disables vertical sync
config.foregroundFPS = 0; // Setting to 0 disables foreground fps throttling
config.backgroundFPS = 0; // Setting to 0 disables background fps throttling 
```

此外，如果可能，请确保 GPU 上的任何硬件 vsync 都已关闭，正如@RodHyde 提到的那样。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T21:06:19.773

答案很大程度上取决于您的 CPU 和显卡的速度，但是如果您在创建应用程序时尝试如下配置，并在显卡上禁用 vsync，那么这应该会非常困难。

```
LwjglApplicationConfiguration cfg = new LwjglApplicationConfiguration();
cfg.title = "Framerate test";
cfg.width = 1280;
cfg.height = 720;
cfg.fullscreen = false;  
cfg.useGL20 = false;
cfg.useCPUSynch = false;
cfg.forceExit = true;  
cfg.vSyncEnabled = false; 
```

禁用 vsync 将在您的显卡设置中的某个位置。在我的 nVidia 卡上，它在选项中显示为“垂直同步”。它被设置为“自适应”，将帧速率限制在 60fps，但在将其设置为“关闭”后，我看到 > 4000fps（由 fraps 测量[）](http://www.fraps.com/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-27T09:55:18.800

`cfg.useCPUSynch`好像已经取出来了。设置`cfg.foregroundFPS`为一些大数字反而对我有用。

# version-control - 如何让 ClearCase 识别并处理新文件？

> ID：15097838
> 
> 赞同：1
> 
> 时间：2013-02-26T19:42:00.033
> 
> 标签：version-control, clearcase, clearcase-ucm

我最近将一大堆新文件（通过 robocopy）放入文件夹树中。我如何要求 ClearCase UCM 识别这些文件并将它们置于版本控制之下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:50:06.090

一种简单的方法是使用`clearfsimport`以执行（递归）完整目录内容的导入。
请参阅“[如何使用 ClearCase 以递归方式“添加到源代码控制……”](https://stackoverflow.com/questions/138321/how-can-i-use-clearcase-to-add-to-source-control-recursively)？
它适用于 ClearCase UCM 视图以及基本 ClearCase 视图。
在执行`clearfsimport`.

这比直接在 ClearCase 目标视图中复制这些文件并尝试检测那些私有（即“尚未版本化”）文件更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:20:21.037

啊，原来有人在内部博客上发过这样的帖子。谁知道！

我拿了它然后扩展它

```
for /f %1 in ('cleartool ls -r -s -nxname -view_only ^| grep -e ^\.\\SRC_ ^| grep -e vcproj$') do @cleardlg -addtosrc -nc "%1" 
```

（是的，我已经安装了一些 unix 工具，grep 等）。

在以 .\SRC_ 开头的目录中查找所有 vcproj 文件。

# php - How to generate php files on server?

> ID：15097839
> 
> 赞同：1
> 
> 时间：2013-02-26T19:42:03.593
> 
> 标签：php, .htaccess, filenames, friendly-url, pretty-urls

I have a flash game site, which has a play.php file, which gets the game's name by `$_GET` like

```
http://host/play.php?game=free-kick-puzzle 
```

which works nicely but I think it's not so good for google bot etc. And I see that many other sites do it like

```
host/games/free-kick-puzzle.php 
```

So is there any way to "generate" this `gamename.php` file automatically? Thanks !

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:48:04.297

您不想在服务器上“生成”文件，您只想创建更好的 URL，以映射到幕后丑陋的 URL。一种方法是使用重写规则。

使用名为 的 Apache 模块[`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)，您可以使用您在`.htaccess`文件中编写的指令使 URL 对 SEO 更加友好。

在您的`.htaccess`文件中，您可以使用如下代码：

```
RewriteEngine on
RewriteRule ^games/(.*)/?$ /play.php?game=$1 
```

这只是一个示例，使用重写规则时还有许多其他选项可用。我强烈建议查看[Apache 文档中关于 mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)的文档。

在此示例中，您会在 之后找到任何内容`games/`，由括号和它们之间的 RegEx 表示。这`/?`意味着尾部斜杠是可选的。之后`$`是您真正想要为访问者服务的内容。这`$1`是放置括号之间的任何内容的位置。

# solr - Django-Haystack and Solr can not rebuild index

> ID：15097843
> 
> 赞同：1
> 
> 时间：2013-02-26T19:42:13.033
> 
> 标签：solr, django-haystack

Trying to rebuild index after switching from whoosh to Solr with no luck.

These are search_indexes.py

```
"""Haystack search index for jobs app"""

from haystack.indexes import *  #@UnusedWildImport
from haystack import site

from cthr.jobs.models import Submission

class SubmissionIndex(SearchIndex):
    """SearchIndex for job submission searching"""
    text = CharField(document=True, use_template=True)
    active = BooleanField(model_attr='active')
    submit_date = DateTimeField(model_attr='created')

    def get_queryset(self):
        """Used when the entire index for model is updated."""
        return Submission.objects.all()

    def get_updated_field(self):
        """Specify which field is used to calculate the age of a Submission for re-indexing"""
        return 'modified'

# Wire 'em up
site.register(Submission, SubmissionIndex) 
```

2nd one is this.

```
"""Haystack search index for resumes app"""

from haystack.indexes import *  #@UnusedWildImport
from haystack import site

from cthr.resumes.models import Resume

class StructuredResumeIndex(SearchIndex):
    """SearchIndex for Structured Resume searching"""
    text = CharField(document=True, use_template=True)
    employee = BooleanField(model_attr='employee')
    available = BooleanField(model_attr='available')

    def get_queryset(self):
        return Resume.objects.all()

    def get_updated_field(self):
        """Specify which field is used to calculate the age of a Submission for re-indexing"""
        return 'modified'

# Wire 'em up
site.register(Resume, StructuredResumeIndex) 
```

This is the error I get when running rebuild_index:

```
Removing all documents from your index because you said so.
DEBUG pysolr Starting request to 'http://127.0.0.1:8983/solr/update/?commit=true' (post) with body 'u'<delete>'...
INFO requests.packages.urllib3.connectionpool Starting new HTTP connection (1): 127.0.0.1
DEBUG requests.packages.urllib3.connectionpool "POST /solr/update/?commit=true HTTP/1.1" 200 None
INFO pysolr Finished 'http://127.0.0.1:8983/solr/update/?commit=true' (post) with body 'u'<delete>' in 0.357 seconds.
DEBUG pysolr Starting request to 'http://127.0.0.1:8983/solr/update/?commit=true' (post) with body 'u'<optimiz'...
INFO requests.packages.urllib3.connectionpool Starting new HTTP connection (1): 127.0.0.1
DEBUG requests.packages.urllib3.connectionpool "POST /solr/update/?commit=true HTTP/1.1" 200 None
INFO pysolr Finished 'http://127.0.0.1:8983/solr/update/?commit=true' (post) with body 'u'<optimiz' in 0.049 seconds.
All documents removed.
/usr/local/lib/python2.7/dist-packages/haystack/management/commands/update_index.py:84: UserWarning: 'SearchIndex.get_queryset' is pending deprecation & will be removed in Haystack v2\. Please rename them to 'index_queryset'.
  warnings.warn("'SearchIndex.get_queryset' is pending deprecation & will be removed in Haystack v2\. Please rename them to 'index_queryset'.")
DEBUG django.db.backends (0.002) SELECT COUNT(*) FROM "jobs_submission"; args=()
Indexing 0 submissions.
DEBUG django.db.backends (0.000) SELECT "jobs_submission"."id" FROM "jobs_submission" ORDER BY "jobs_submission"."id" ASC; args=()
DEBUG django.db.backends (0.000) SELECT COUNT(*) FROM "resumes_resume"; args=()
Indexing 3 resumes.
DEBUG django.db.backends (0.000) SELECT "resumes_resume"."id" FROM "resumes_resume" ORDER BY "resumes_resume"."id" ASC; args=()
DEBUG django.db.backends (0.000) SELECT "resumes_resume"."id", "resumes_resume"."created", "resumes_resume"."modified", "resumes_resume"."user_id", "resumes_resume"."name", "resumes_resume"."slug", "resumes_resume"."blinded_name", "resumes_resume"."blinded_slug", "resumes_resume"."overview", "resumes_resume"."objective", "resumes_resume"."title", "resumes_resume"."employee", "resumes_resume"."available", "resumes_resume"."location", "resumes_resume"."relocation_options", "resumes_resume"."clearance", "resumes_resume"."skills_text", "resumes_resume"."email", "resumes_resume"."phone_home", "resumes_resume"."phone_mobile", "resumes_resume"."phone_work", "resumes_resume"."file" FROM "resumes_resume" ORDER BY "resumes_resume"."id" ASC LIMIT 3; args=()
DEBUG django.db.backends (0.000) SELECT "resumes_skill"."id", "resumes_skill"."skill" FROM "resumes_skill" INNER JOIN "resumes_resume_skills" ON ("resumes_skill"."id" = "resumes_resume_skills"."skill_id") WHERE "resumes_resume_skills"."resume_id" = 1  ORDER BY "resumes_skill"."skill" ASC; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_skill"."id", "resumes_skill"."skill" FROM "resumes_skill" INNER JOIN "resumes_resume_skills" ON ("resumes_skill"."id" = "resumes_resume_skills"."skill_id") WHERE "resumes_resume_skills"."resume_id" = 1  ORDER BY "resumes_skill"."skill" ASC; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_affiliation"."id", "resumes_affiliation"."resume_id", "resumes_affiliation"."affiliation" FROM "resumes_affiliation" WHERE "resumes_affiliation"."resume_id" = 1 ; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_affiliation"."id", "resumes_affiliation"."resume_id", "resumes_affiliation"."affiliation" FROM "resumes_affiliation" WHERE "resumes_affiliation"."resume_id" = 1 ; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_certification"."id", "resumes_certification"."resume_id", "resumes_certification"."certification" FROM "resumes_certification" WHERE "resumes_certification"."resume_id" = 1 ; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_certification"."id", "resumes_certification"."resume_id", "resumes_certification"."certification" FROM "resumes_certification" WHERE "resumes_certification"."resume_id" = 1 ; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_education"."id", "resumes_education"."resume_id", "resumes_education"."level", "resumes_education"."honors", "resumes_education"."discipline", "resumes_education"."minor", "resumes_education"."school", "resumes_education"."location", "resumes_education"."year" FROM "resumes_education" WHERE "resumes_education"."resume_id" = 1  ORDER BY "resumes_education"."year" DESC; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_education"."id", "resumes_education"."resume_id", "resumes_education"."level", "resumes_education"."honors", "resumes_education"."discipline", "resumes_education"."minor", "resumes_education"."school", "resumes_education"."location", "resumes_education"."year" FROM "resumes_education" WHERE "resumes_education"."resume_id" = 1  ORDER BY "resumes_education"."year" DESC; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_publication"."id", "resumes_publication"."resume_id", "resumes_publication"."publication" FROM "resumes_publication" WHERE "resumes_publication"."resume_id" = 1 ; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_publication"."id", "resumes_publication"."resume_id", "resumes_publication"."publication" FROM "resumes_publication" WHERE "resumes_publication"."resume_id" = 1 ; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_jobhistory"."id", "resumes_jobhistory"."resume_id", "resumes_jobhistory"."title", "resumes_jobhistory"."company", "resumes_jobhistory"."location", "resumes_jobhistory"."date_from", "resumes_jobhistory"."date_to", "resumes_jobhistory"."description", "resumes_jobhistory"."skills_text" FROM "resumes_jobhistory" WHERE "resumes_jobhistory"."resume_id" = 1  ORDER BY "resumes_jobhistory"."date_from" DESC; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_jobhistory"."id", "resumes_jobhistory"."resume_id", "resumes_jobhistory"."title", "resumes_jobhistory"."company", "resumes_jobhistory"."location", "resumes_jobhistory"."date_from", "resumes_jobhistory"."date_to", "resumes_jobhistory"."description", "resumes_jobhistory"."skills_text" FROM "resumes_jobhistory" WHERE ("resumes_jobhistory"."resume_id" = 1  AND "resumes_jobhistory"."date_to" IS NULL) ORDER BY "resumes_jobhistory"."date_from" DESC; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_jobhistory"."id", "resumes_jobhistory"."resume_id", "resumes_jobhistory"."title", "resumes_jobhistory"."company", "resumes_jobhistory"."location", "resumes_jobhistory"."date_from", "resumes_jobhistory"."date_to", "resumes_jobhistory"."description", "resumes_jobhistory"."skills_text" FROM "resumes_jobhistory" WHERE ("resumes_jobhistory"."resume_id" = 1  AND "resumes_jobhistory"."date_to" IS NOT NULL) ORDER BY "resumes_jobhistory"."date_to" DESC; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_skill"."id", "resumes_skill"."skill" FROM "resumes_skill" INNER JOIN "resumes_jobhistory_skills" ON ("resumes_skill"."id" = "resumes_jobhistory_skills"."skill_id") WHERE "resumes_jobhistory_skills"."jobhistory_id" = 1  ORDER BY "resumes_skill"."skill" ASC; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_skill"."id", "resumes_skill"."skill" FROM "resumes_skill" INNER JOIN "resumes_jobhistory_skills" ON ("resumes_skill"."id" = "resumes_jobhistory_skills"."skill_id") WHERE "resumes_jobhistory_skills"."jobhistory_id" = 1  ORDER BY "resumes_skill"."skill" ASC; args=(1,)
DEBUG django.db.backends (0.000) SELECT "resumes_skill"."id", "resumes_skill"."skill" FROM "resumes_skill" INNER JOIN "resumes_resume_skills" ON ("resumes_skill"."id" = "resumes_resume_skills"."skill_id") WHERE "resumes_resume_skills"."resume_id" = 2  ORDER BY "resumes_skill"."skill" ASC; args=(2,)
DEBUG django.db.backends (0.000) SELECT "resumes_skill"."id", "resumes_skill"."skill" FROM "resumes_skill" INNER JOIN "resumes_resume_skills" ON ("resumes_skill"."id" = "resumes_resume_skills"."skill_id") WHERE "resumes_resume_skills"."resume_id" = 2  ORDER BY "resumes_skill"."skill" ASC; args=(2,)
DEBUG django.db.backends (0.000) SELECT "resumes_affiliation"."id", "resumes_affiliation"."resume_id", "resumes_affiliation"."affiliation" FROM "resumes_affiliation" WHERE "resumes_affiliation"."resume_id" = 2 ; args=(2,)
DEBUG django.db.backends (0.000) SELECT "resumes_certification"."id", "resumes_certification"."resume_id", "resumes_certification"."certification" FROM "resumes_certification" WHERE "resumes_certification"."resume_id" = 2 ; args=(2,)
DEBUG django.db.backends (0.000) SELECT "resumes_education"."id", "resumes_education"."resume_id", "resumes_education"."level", "resumes_education"."honors", "resumes_education"."discipline", "resumes_education"."minor", "resumes_education"."school", "resumes_education"."location", "resumes_education"."year" FROM "resumes_education" WHERE "resumes_education"."resume_id" = 2  ORDER BY "resumes_education"."year" DESC; args=(2,)
DEBUG django.db.backends (0.000) SELECT "resumes_publication"."id", "resumes_publication"."resume_id", "resumes_publication"."publication" FROM "resumes_publication" WHERE "resumes_publication"."resume_id" = 2 ; args=(2,)
DEBUG django.db.backends (0.000) SELECT "resumes_jobhistory"."id", "resumes_jobhistory"."resume_id", "resumes_jobhistory"."title", "resumes_jobhistory"."company", "resumes_jobhistory"."location", "resumes_jobhistory"."date_from", "resumes_jobhistory"."date_to", "resumes_jobhistory"."description", "resumes_jobhistory"."skills_text" FROM "resumes_jobhistory" WHERE "resumes_jobhistory"."resume_id" = 2  ORDER BY "resumes_jobhistory"."date_from" DESC; args=(2,)
DEBUG django.db.backends (0.000) SELECT "resumes_skill"."id", "resumes_skill"."skill" FROM "resumes_skill" INNER JOIN "resumes_resume_skills" ON ("resumes_skill"."id" = "resumes_resume_skills"."skill_id") WHERE "resumes_resume_skills"."resume_id" = 3  ORDER BY "resumes_skill"."skill" ASC; args=(3,)
DEBUG django.db.backends (0.000) SELECT "resumes_affiliation"."id", "resumes_affiliation"."resume_id", "resumes_affiliation"."affiliation" FROM "resumes_affiliation" WHERE "resumes_affiliation"."resume_id" = 3 ; args=(3,)
DEBUG django.db.backends (0.000) SELECT "resumes_certification"."id", "resumes_certification"."resume_id", "resumes_certification"."certification" FROM "resumes_certification" WHERE "resumes_certification"."resume_id" = 3 ; args=(3,)
DEBUG django.db.backends (0.000) SELECT "resumes_education"."id", "resumes_education"."resume_id", "resumes_education"."level", "resumes_education"."honors", "resumes_education"."discipline", "resumes_education"."minor", "resumes_education"."school", "resumes_education"."location", "resumes_education"."year" FROM "resumes_education" WHERE "resumes_education"."resume_id" = 3  ORDER BY "resumes_education"."year" DESC; args=(3,)
DEBUG django.db.backends (0.000) SELECT "resumes_publication"."id", "resumes_publication"."resume_id", "resumes_publication"."publication" FROM "resumes_publication" WHERE "resumes_publication"."resume_id" = 3 ; args=(3,)
DEBUG django.db.backends (0.000) SELECT "resumes_jobhistory"."id", "resumes_jobhistory"."resume_id", "resumes_jobhistory"."title", "resumes_jobhistory"."company", "resumes_jobhistory"."location", "resumes_jobhistory"."date_from", "resumes_jobhistory"."date_to", "resumes_jobhistory"."description", "resumes_jobhistory"."skills_text" FROM "resumes_jobhistory" WHERE "resumes_jobhistory"."resume_id" = 3  ORDER BY "resumes_jobhistory"."date_from" DESC; args=(3,)
DEBUG pysolr Starting to build add request...
Traceback (most recent call last):
  File "manage.py", line 11, in <module>
    execute_manager(settings)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 459, in execute_manager
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/haystack/management/commands/rebuild_index.py", line 16, in handle
    call_command('update_index', **options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/haystack/management/commands/update_index.py", line 193, in handle
    return super(Command, self).handle(*apps, **options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 304, in handle
    app_output = self.handle_app(app, **options)
  File "/usr/local/lib/python2.7/dist-packages/haystack/management/commands/update_index.py", line 229, in handle_app
    do_update(index, qs, start, end, total, self.verbosity)
  File "/usr/local/lib/python2.7/dist-packages/haystack/management/commands/update_index.py", line 109, in do_update
    index.backend.update(index, current_qs)
  File "/usr/local/lib/python2.7/dist-packages/haystack/backends/solr_backend.py", line 73, in update
    self.conn.add(docs, commit=commit, boost=index.get_field_weights())
  File "/usr/local/lib/python2.7/dist-packages/pysolr.py", line 740, in add
    message.append(self._build_doc(doc, boost=boost))
  File "/usr/local/lib/python2.7/dist-packages/pysolr.py", line 695, in _build_doc
    field = ET.Element('field', **attrs)
  File "lxml.etree.pyx", line 2560, in lxml.etree.Element (src/lxml/lxml.etree.c:52924)
TypeError: Element() keywords must be strings 
```

I am not sure what I am doing wrong, from what I have seen and googled it is telling me that I am passing unicode while it expects a string?

Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:42:21.010

我有这个问题，我得到了解决。

看看这个问题的答案：

[如何在 Ubuntu 上安装 lxml](https://stackoverflow.com/questions/6504810/how-to-install-lxml-on-ubuntu)

你是怎么安装的`lxml`？我所做的是我去`/usr/local/lib/python2.7/dist-packages`并删除了`lxml`目录并从上面的链接运行命令：

```
apt-get install libxml2-dev libxslt-dev 
```

然后问题就消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-10T08:32:36.190

我解决了它升级`lxml`版本：

```
pip install --upgrade lxml 
```

更多信息[在这里](https://github.com/toastdriven/pysolr/issues/72)

# facebook - 我可以取消对 Facebook 应用程序的授权并同时将用户注销吗？

> ID：15097844
> 
> 赞同：3
> 
> 时间：2013-02-26T19:42:15.257
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

### 我想将用户从我的应用程序中注销*并*删除他们的权限

*我目前正在使用 JS-SDK 并且没有服务器端逻辑。*

我知道我可以注销用户`FB.logout()`

我还可以使用`FB.api('/me/permissions', 'DELETE')`“取消授权”应用程序来撤销他们的权限

问题是，我似乎不能两者都做。每个似乎都阻止另一个工作。

**例子：**

*   打电话`FB.api('/me/permissions', 'DELETE', function(){FB.logout()});`

    *导致以下错误：*

    > “拒绝显示文档，因为 X-Frame-Options 禁止显示。”

*   来电：`FB.logout(function(){FB.api('/me/permissions', 'DELETE');})`

    *导致用户被注销，但权限仍然存在。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:58:05.907

**回答我自己的问题：**

在进行了大量的研究和实验之后，我得出的结论是没有可靠的方法可以做到这一点。

我能够确定以下代码**有效**- 尽管我不建议在生产应用程序中使用它。

```
FB.logout();
FB.api('/me/permissions', 'DELETE'); 
```

显然，一个接一个地调用它们（而不是用回调来做）。一旦它们中的任何一个完成，它就会阻止另一个启动，但是如果我快速连续地进行异步调用，它似乎让两者都成功。

# android - 适用于平板电脑和手机的 Android Fragment

> ID：15097857
> 
> 赞同：3
> 
> 时间：2013-02-26T19:42:50.580
> 
> 标签：android, android-fragments, fragment

我想做这样的事情。图片比文字更容易： ![在此处输入图像描述](../Images/dcfc477fb17ad05cea189e5addaff507.png)

当用户点击片段 B 上的按钮时，片段 B 发生了变化，但 A 没有改变。我做了两种不同的布局（肖像和陆地）。第一个有这样的布局

```
<?xml version="1.0" encoding="utf-8"?>
<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="com.my.app.ContactsFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/contacts_fragment" /> 
```

我的片段布局中有一个带有简单活动调用的按钮：

```
Intent intent = new Intent(getActivity(), NextActivity.class);
startActivity(intent); 
```

土地是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="com.my.app.ContactsFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/contacts_fragment" />

<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="com.my.app.HomeFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/fragment_container" />

</LinearLayout> 
```

我使用以下代码更改内部片段：

```
FragmentTransaction ft = getActivity().getFragmentManager().beginTransaction();
NextFragment nextFrag = new NextFragment();
ft.replace(R.id.fragment_container, nextFrag);
ft.addToBackStack(null);
ft.commit(); 
```

这部分效果很好。

我现在有两个问题：

*   怎么把这两种方式在主activity中改变内容呢？我的意思是，在主要活动中，片段应该调用第二种方式，但在正常活动中，我需要调用第一种。

*   如果我单击片段 A 中的一个项目，然后单击片段 B 中的按钮，该按钮将片段更改为 NextFragment。如果我点击另一个项目，我也会这样做。我可以回到第一个用户。单击新项目时有没有办法转储堆栈？

谢谢你的帮助。

Ps：我使用的是原生片段库而不是支持 v4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:02:24.813

我很难理解您的 2 个问题的具体细节，因为它们含糊不清并且没有提供足够的细节。

但是，由于您希望`Fragment`在运行时更改 s，**因此不应**放入`<fragment/>`布局文件。您当前的架构无法更改`Fragment`布局中的 s，这不是您想要的。

> 注意：当您通过在布局 XML 文件中定义片段来将片段添加到活动布局时，您无法在运行时删除该片段。如果您计划在用户交互期间交换片段，则必须在活动首次启动时将片段添加到活动中。

您应该在布局文件`FrameLayout`中为您的 s 使用容器，并根据容器是否存在将**单个**add s 添加到这些容器中。这将允许应用程序创建 1 个纵向和 2 个横向（假设您有每个方向的布局）。这也将允许您能够根据需要换出s，并将它们添加到后堆栈中。`Fragment` **`Activity``Fragment``FrameLayout``Fragment``Fragment``Fragment`**

 **可以在[此处找到此](http://developer.android.com/training/basics/fragments/fragment-ui.html)**Google 推荐**方法的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T11:31:47.670

[您可以从这里](http://android-er.blogspot.in/2013/04/handle-different-layout-for-phone-and.html)找到一个好的解决方案。**

# php - 将站点移动到本地主机后，Kohana css 图像没有出现，并且 href 链接不起作用

> ID：15097858
> 
> 赞同：0
> 
> 时间：2013-02-26T19:42:57.620
> 
> 标签：php, kohana

我已经从服务器下载了一个 kohana 项目到本地主机 ubuntu 系统。我在 var/www/testsite/ 中为它创建了一个文件夹我已经按照相应的建议更改了 boostrap.php 中的 Kohana::init

```
Kohana::init(array(
    'base_url'      => '/testsite/'
    , 'index_file'  => FALSE
    , 'profile'     => ! IN_PRODUCTION
    , 'caching'     => IN_PRODUCTION
)); 
```

当我在本地运行站点时， localhost/testsite/ 我看到网站正在加载，但 css 文件加载的图像没有出现。示例图像的路径如下 url("/assets/images/testsite/default/background_all.jpg") 如果我将 url 更改为 url("assets/images/testsite/default/background_all.jpg") 图像正确显示。

另外，当我单击链接时，我得到

> 未找到
> 
> 在此服务器上找不到请求的 URL /testsite/contact/info。Apache/2.2.22 (Ubuntu) 服务器在 localhost 端口 80

这就是我的 .htaccess 的构造方式，

```
# Put your installation directory here:
# If your URL is www.example.com/kohana/, use /kohana/
# If your URL is www.example.com/, use /
RewriteBase /testsite/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite to index.php/URL
RewriteRule ^(.*)$ index.php/$1 [PT,L] 
```

为什么它在服务器上而不是在我的本地主机上工作？如何在不更改 css 文件的 url 路径的情况下解决此问题？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:16:53.437

在您的`.htaccess`文件中，在开头添加这一行：`RewriteEngine On`. 这样，您将打开 URL 重写。

关于图片：

您应该通过删除来编辑图像路径`'/'`，所以您有`"assets/images/testsite/default/background_all.jpg"`. 要使其正常工作，您应该`.css`像这样包含您的文件：`URL::site('static/your.css')`. 所以你的文件夹结构是这样的： 静态文件夹包含`your.css and assets folder.`

此外，您应该使用以下方法在应用程序中加载所有图片：`URL::site('static/img/some_picture.png')`

# css - CSS Drop Down Menu disappearing

> ID：15097859
> 
> 赞同：0
> 
> 时间：2013-02-26T19:42:56.780
> 
> 标签：css, drop-down-menu

[http://nqmedia.co.uk/](http://nqmedia.co.uk/)

When i roll over personal, the option seems to disappear quite quickly.

I think its to do with the styling

Here is my code:

```
.topmenu {float: right; width: 710px; height: 45px; background-color: #3a5a93; margin-top: 50px; border-top-left-radius: 10px 15px;border-top-right-radius: 10px 15px; border-bottom-left-radius: 10px 15px; border-bottom-right-radius: 10px 15px;}
.topmenu ul li {padding-top: 10px; float: left; margin-left: 10px;}
.topmenu ul li a:link {padding: 10px 20px; font: 14px genevaregular; color: #fff; text-decoration: none;}
.topmenu ul li a:visited {padding: 10px 20px; font: 14px genevaregular; color: #fff; text-decoration: none;}
.topmenu ul li a:hover {padding: 10px 20px; font: 14px genevaregular; color: #fff; text-decoration: none;}
.topmenu ul li a:active {padding: 10px 20px; font: 14px genevaregular; color: #fff; text-decoration: none;}
.topmenu ul li.current-menu-item a {color: #fff; }
.topmenu ul ul li {background-color: #3a5a93; padding:10px;float: none;}
.topmenu ul ul li:hover {background-color: #637ead; }
.topmenu ul ul {display: none; position: absolute; margin-top: 12px;}
.topmenu ul li:hover > ul {display: block;}
.topmenu ul ul li a {padding: 10px;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:50:04.490

只需更改`position: absolute;`为`.topmenu ul ul`，`position: relative;`它就会按预期工作。

# qt - Qt: Measure event handling time

> ID：15097861
> 
> 赞同：4
> 
> 时间：2013-02-26T19:43:06.000
> 
> 标签：qt

I would like to measure which events in my application take long time to execute in main thread (blocking GUI) or at least if there are any that take more than, lets say, 10msec. I obviously use threading and concurrency for tasks that take a long time, but it's sometimes hard to draw the line between what to put in other threads and what can stay with GUI. Especially with app that runs on multiple OSes and both new and few-years old hardware.

I looked at QApplication (and QCoreApplication) but it doesn't have any "processSingleEvent" kind of function which I cloud easily override and wrap with time measurement. Event filters also doesn't do the trick because AFAIU there is no way to get a notification after event is processed.

I thought that I could call QApplication::processEvents manually (without ever invoking exec), but again it doesn't give single-event granularity and, as I read, it doesn't handle destroy events.

I looked at QCoreApplication::exec implementation, and saw that it uses QEventLoop internally, so if I wanted to add my special code to original implementation I would have to reimplement both QApplication and QEventLoop copying a lot of code from Qt source...

**Edit**: the question obviously is: *How to measure event handling time in possibly simple and "clean" way?*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T01:29:10.053

覆盖[bool QCoreApplication::notify (QObject * receiver, QEvent * event)](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#notify)：

```
class MyApplication : public QApplication
{
    QElapsedTimer t;
public:
    MyApplication(int& argc, char ** argv) : QApplication(argc, argv) { }
    virtual ~MyApplication() { }

    virtual bool notify(QObject* receiver, QEvent* event)
    {
        t.start();
        bool ret = QApplication::notify(receiver, event);
        if(t.elapsed() > 10)
            qDebug("processing event type %d for object %s took %dms",
                (int)event->type(), receiver->objectName().toLocal8Bit().data(),
                (int)t.elapsed());
        return ret;
    }
};

int main(int argc, char *argv[])
{
    MyApplication a(argc, argv);

    ... 
```

这也恰好是[*捕获所有*类型异常处理](https://stackoverflow.com/questions/1578331/qt-and-error-handling-strategy)的地方。

# javascript - Absolute center an element with child elements (containing imgs/iframes) while keeping their aspect ratio on resize

> ID：15097865
> 
> 赞同：2
> 
> 时间：2013-02-26T19:43:13.747
> 
> 标签：javascript, css, position, centering

I'm wondering how I can tackle these problems I'm facing.

**Demo**
[JS Bin Demo](http://jsbin.com/epeqar/1)

What I'm trying to achieve is this:

1.  `.display` and it's content should adapt to the size of the screen. If the viewport width is too narrow (same with viewport height) – `.display` should shrink and all enclosed items should keep their ratio.

2.  `.display` and all content should be centered, vertically and horizontally.

3.  Let vimeo items have the same aspect ratio as the images (vimeo embed forces 16x9 aspect ratio, but I'd like the height of the video to be the same as the images and let vimeo add black bars to fill out).

And on a side note, as I have absolute positioned divs above the actual content (`.cursor .left` and `.cursor .right`) controlling the vimeo video will prove to be somewhat problematic. Are there any other solutions out there that could potentially work the same way as these divs do but enable interaction with the content underneath?

Here's a site that have absolute dead center and that keeps ratio of the enclosed items when resized, this is exactly what I'm trying to achieve. I could not figure out how they made this happen other than JS is involved. [Bureau Collective](http://www.bureaucollective.ch/#!/project/66/0)

**HTML**

```
<div class="display">
    <div class="cursor left"></div>
    <div class="cursor right"></div>
    <div class="work-carousel">
        <div class="item"><img src="http://lorempixel.com/output/abstract-q-c-1080-675-7.jpg"></div>
        <div class="item"><img src="http://lorempixel.com/output/nightlife-q-c-1080-675-9.jpg"></div>
        <div class="item"><iframe src="http://player.vimeo.com/video/57840967?title=0&amp;byline=0&amp;portrait=0&amp;color=000000" width="1080" height="608" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></div>
    </div>
</div> 
```

**CSS**

```
.display {
    position: relative;
    width: 1080px;
}

.cursor.left {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 45%;
    z-index: 999;
}

.cursor.right {
    position: absolute;
    top: 0;
    right: 0;
    height: 100%;
    width: 45%;
    z-index: 999;
}

.work-carousel {
    margin:50px auto 60px;
    padding:0;
}

.work-carousel item {
    max-height: 100%;
    max-width: 100%;
    display: none;
}

.work-carousel item.first { 
    display: block 
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T20:34:37.610

我以为我永远不会使用这种技术！

诀窍在于`padding`：

```
.display {
    position: relative;
    width: 100%;
  height:0;
  padding:56.25% 0 0 0;
}
.item{
  width: 100%;
  height: 100%;
}
.item > * {
  width: 100%;
  height: 100%;
} 
```

这是演示：http: [//jsbin.com/epeqar/7/edit](http://jsbin.com/epeqar/7/edit)

# ember.js - An example of ContainerView required where childViews are binded with their respective controllers

> ID：15097868
> 
> 赞同：0
> 
> 时间：2013-02-26T19:43:27.757
> 
> 标签：ember.js

Basically I am using a ContainerView where I am rendering multple child views. I able to push/remove views in childView but unable to map any controller and route to have model binding and pull couple of variables which are declared in ContainerView

Details here: [https://github.com/emberjs/ember.js/issues/2171](https://github.com/emberjs/ember.js/issues/2171)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T20:13:06.107

这可以通过覆盖 View 的控制器属性来实现。

```
App.MetricsView = Ember.View.create({
     templateName: 'summary',
     loaded: true,
     controller: App.SummaryController.create(),
}); 
```

# django - 两个管理站点上的 grappelli 仪表板 ValueError

> ID：15097874
> 
> 赞同：0
> 
> 时间：2013-02-26T19:44:06.040
> 
> 标签：django, django-admin, django-grappelli

我想为我的项目使用两个管理站点。每个都有 grappelli 仪表板。我已经执行了这个命令：

```
python manage.py customdashboard dashboard.py
python manage.py customdashboard dashboard.py 
```

两次（一次在项目/项目中，第二次在项目/应用程序中）

```
#file system

project
  project
    dashboard.py
    urls.py
  app
    dashboard.py
    admin.py

#settings.py

GRAPPELLI_INDEX_DASHBOARD = {
    'django.contrib.admin.site': 'project.dashboard.CustomIndexDashboard',
    'app.admin.operator_site': 'app.dashboard.CustomIndexDashboard',
}

#urls.py

from django.conf.urls import patterns, url, include
from django.contrib import admin
from app.admin import admin_site
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
    url(r'^myadmin/', include(operator_site.urls)),
    url(r'^grappelli/', include('grappelli.urls')),
)

#app/admin.py

from django.contrib.admin import AdminSite

class MyAdminSite(AdminSite):
    pass

admin_site = MyAdminSite() 
```

问题是当我去 /admin/ 一切都很好，但是当我去 /myadmin/ 时，我有 ValueError

找不到匹配“{'app.admin.operator_site': 'app.dashboard.CustomIndexDashboard', 'django.contrib.admin.site': 'project.dashboard.CustomIndexDashboard'}”的仪表板

完整的错误跟踪： http: [//pastebin.com/w8W2eRPd](http://pastebin.com/w8W2eRPd)

问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:06:10.873

好的，我已经发现了。在创建实例时创建 AdminSite 的子类

```
admin_site = MyAdminSite() 
```

您应该使用自定义`name`参数（不是“管理员”）：

```
admin_site = MyAdminSite(name='myadmin') 
```

# excel - excel VBA中的停用词

> ID：15097876
> 
> 赞同：1
> 
> 时间：2013-02-26T19:44:10.453
> 
> 标签：excel, vba

我正在用excel做一个项目，我正在获取一个文本文件，读取文本文件，并尝试从文本文件中删除停用词。但我一直坚持删除 excel VBA 中的停用词。从研究中我看到它在 Java 和 PHP 中是可能的，但我无法找到一个专门用于擅长 VBA 的。是否有可以删除excel VBA中的停用词的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T14:59:06.127

```
 Const InputTxtFile As String = "C:\Temp\InTxt.txt"
 Const OutputTxtFile As String = "C:\Temp\OutTxt.txt"
 Const ListOfStopWords As String = ";CAT;DOG;FOX;"

Sub main()

Dim DataLine As String
Dim strTempLine As String

Open InputTxtFile For Input As #1   'Or FreeFile()
Open OutputTxtFile For Append As #2

While Not EOF(1)
    Line Input #1, DataLine

    Dim LineTab() As String
    LineTab = Split(DataLine, " ") 'Split readed line on space

    If UBound(LineTab) > 0 Then
        For i = 0 To UBound(LineTab)
            If (InStr(ListOfStopWords, ";" + LineTab(i) + ";") = 0) Then 'Look if not in Stop Words list
                strTempLine = strTempLine + LineTab(i) + " "
            End If
        Next
        Print #2, strTempLine 'Print to output file
        strTempLine = ""
    End If

Wend

Close #1
Close #2

End Sub 
```

'参考：[在 VBA 中逐行读取/解析文本文件](https://stackoverflow.com/questions/11528694/read-parse-text-file-line-by-line-in-vba)

# jquery - 将 ajax 变量附加到现有的选择框

> ID：15097878
> 
> 赞同：0
> 
> 时间：2013-02-26T19:44:11.093
> 
> 标签：jquery

首先，我调用一个覆盖层中的表单，如果用户对下拉列表中的选择感到满意，他们可以添加一条新记录。但如果他们想添加一个选项，他们点击“添加”，然后打开一个 javascript 提示。此提示使用 ajax 提交给 mysql，如果成功，我希望新选项成为覆盖层下拉列表中的“选定”选项。我可以让警报显示 val 但无法弄清楚如何使用这是一个新选择来更新下拉列表。选择框只是一个标准的 html `<select name="User_level" id="User_level">`

```
if(response.success == "1"){

    $(".User_level").append("<option value=\"test\">test</option>");        

} 
```

这没有用。

# c++ - 从 JSON 数据中读取相关部分

> ID：15097884
> 
> 赞同：0
> 
> 时间：2013-02-26T19:44:34.543
> 
> 标签：c++, json, qt

```
"{
   "count":100000,
   "data":[
            {
              "Project":null,
              "children":[  
                          {
                            "Project":null,
                            "title":"TEST",
                           }
                          ],
              "icon":false,
           }
        ]
 }" 
```

我想从 JSON 数据中读取 "title" : "TEST" 。有什么帮助吗？我为此使用 Qt 和 c++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:50:28.327

如果你想要一个直接与 Qt 一起工作的优秀 JSON 库，那么 QJson

[http://qjson.sourceforge.net/usage/](http://qjson.sourceforge.net/usage/)

否则我建议一些普通的 JSON 库。

[http://jsoncpp.sourceforge.net/](http://jsoncpp.sourceforge.net/)

# c# - SQL 查询超时

> ID：15097889
> 
> 赞同：1
> 
> 时间：2013-02-26T19:45:04.930
> 
> 标签：c#, sql, vb.net, sql-server-2005

我有一个运行存储函数并填充数据集的 vb.net 程序。但是，由于提取的信息量很大，有时它会在某些数据库上超时。

如何增加查询的超时时间以免超时？

在我的表单按钮中，我有以下代码不起作用（它仍然超时并且程序错误）

```
Me.1TableAdapter.Connection.ConnectionString = "Data Source=10.0.1.1;Initial Catalog=Database;Persist Security Info=True;User ID=USER;Password=PASSWORD; Connection Timeout = 120"

Me.1TableAdapter.Fill(Me.Dataset.1, TodayDt, TodayEnd)

Me.2TableAdapter.Fill(Me.Dataset.1, TodayDt, TodayEnd) 
```

我收到错误消息：

> *System.Data.SQLClient.SQLException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T19:47:26.447

连接有超时，但针对连接运行的命令也是如此。该超时是为了尝试建立连接而等待多长时间。请参阅[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx)

因此，假设您使用的是`SqlCommand`then 设置`CommandTimeout`命令的属性。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)

# mongodb - MongoDB C#驱动程序查找对象，该对象在数组中包含具有特定值且满足特定条件的Obj

> ID：15097890
> 
> 赞同：1
> 
> 时间：2013-02-26T19:45:16.570
> 
> 标签：mongodb, mongodb-.net-driver

我有一个遵循这种模式的 mongo 对象。Actions 是一个对象数组。我已经排除了不相关的字段。

```
{
  "_id" : 141,
  ...
  "Actions" : [{
      ...
      "Modified" : new Date("Thu, 29 Nov 2012 14:41:20 GMT -08:00"),
      ...
    }]
  ...
} 
```

如何查询这个，以便我可以获得一个对象列表，其中包含操作数组中的一个对象，该对象的修改属性位于使用 C# Mongo 驱动程序的日期范围之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:43:53.583

我自己想通了。

```
Query.ElemMatch("Actions",
    Query.And(
        Query.GTE("Modified", start),
        Query.LTE("Modified", end)
    )
) 
```

使用 Query.ElemMatch 对在 Query 中为子元素传递的 Actions 字段。

像魅力一样工作。

# amazon-web-services - 在 AWS autoscalegroup 上重新配置和重新部署的最佳实践

> ID：15097891
> 
> 赞同：0
> 
> 时间：2013-02-26T19:45:25.460
> 
> 标签：amazon-web-services, redeploy

我是 AWS（亚马逊网络服务）以及我们自己的基于 boto 的自定义 python 部署脚本的新手，但想就简单的配置管理任务寻求建议或最佳实践。我们有一个简单的 Web 应用程序，其中包含由命令行 -D 定义的 java 环境变量控制的几个不同后端环境的配置数据。有时，由于后端服务的维护或部署计划，我们需要从一个后端环境切换到另一个后端环境。

当前过程需要 python 脚本完全破坏和重建所有虚拟基础架构（负载均衡器、自动缩放组等），以通过更改命令行参数重新部署应用程序。在传统的服务器基础架构上，我们会登录到容器的管理控制台，更改变量，弹回容器，然后我们就完成了。

在 AWS 环境中是否有此操作的最佳实践，或者完全销毁和重建所有部分是否是在 AWS 环境中完成此任务的唯一方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:59:24.040

这取决于您必须更改哪些资源。AWS 每天都在快速发展。我建议您查看 AWS API 以了解您需要处理的资源，并检查您是否可以在不破坏资源的情况下更改资源。

例如：今天，一旦创建启动组，您就无法更改它。您必须删除它并使用新配置重新创建它。但如果您有一个自动缩放组附加到该启动组，您将不得不删除自动缩放组，依此类推。

恕我直言，您的方法没有问题，但我相信总有改进的余地，我认为您可以借助 AWS API 文档对其进行重构。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T15:38:17.377

我想我找到了自己问题的答案。我知道 AWS 的接口在不断变化，我认为 Python boto 库中尚不提供此功能，但我正在寻找的功能最好用 --user 来描述为“修改已停止实例的属性” -data 作为有问题的属性。可在此处找到使用 HTTP 请求和 AWS 命令​​行界面执行此操作的文档：http: [//docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_ChangingAttributesWhileInstanceStopped.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_ChangingAttributesWhileInstanceStopped.html)

# jquery - 如何检测 jQuery ajax 错误响应？

> ID：15097894
> 
> 赞同：1
> 
> 时间：2013-02-26T19:45:33.030
> 
> 标签：jquery, api, jsonp, http-status-codes

我能够检测到成功的响应，但无法检测到错误。我的代码：

```
$.ajax({
        url: url,
        dataType: 'jsonp',      
        success: function(data){
            $.each(data, function(a, b) { 
                if(b=="Processing post"){
                    $("#post_response").html('Your comment will be added soon...'); 
                }
                else if(b=="In moderation"){
                    $("#post_response").html('Your comment has been placed in moderation...');  
                }
            })
        },
        error: function(xhr, testStatus, error) {
            alert("error");
        }
    }); 
```

这些是我收到的回复。我可以检测到前 2 个响应，但我什至无法提醒最后一个响应的“错误”。

```
jQuery191004289518775843171_1361906819321({"Message":"Processing post","Code":202})

jQuery191006158838421090984_1361907415719({"Message":"In moderation","Code":202})

jQuery191006158838421090984_1361907415719({"Message":"Not logged in","Code":403}) 
```

你能看出我哪里错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:47:40.390

错误回调仅用于服务器错误响应（即 HTTP 状态代码 4xx/5xx 错误）。由于您的所有三个响应都是有效的（即它们返回 200 的 HTTP 状态代码），它们会触发成功回调。

# c# - Storage Client Library 2.0 - 为什么 API 不像 1.7 那样直观易用？

> ID：15097902
> 
> 赞同：4
> 
> 时间：2013-02-26T19:46:00.727
> 
> 标签：c#, .net, azure, azure-storage, azure-table-storage

我正在迁移以将新的存储客户端库用于我的 Azure 表存储。

**使用之前的*Storage Client Library 1.7*命名空间进行查询：**

```
var orders = serviceContext
                 .CreateQuery<Order>(tableName)
                 .AsTableServiceQuery<Order>()
                 .Where(e => e.PartitionKey == partitionKey && e.RowKey == rowKey) 
```

**使用新的*Storage Client Library 2.0*类进行查询：**

```
string partitionKeyFilter = TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, partitionKey);
string rowKeyFilter = TableQuery.GenerateFilterCondition("RowKey", QueryComparisons.Equal, rowKey);
string combinedFilter = TableQuery.CombineFilters(partitionKeyFilter, TableOperators.And, rowKeyFilter);

var query = new TableQuery<Order>().Where(combinedFilter);
var orders = table.ExecuteQuery<Order>(query); 
```

如果我错了，请纠正我，但 1.7 更简洁，使用强类型实体，实现 IQueryable 接口并利用 LINQ 的全部功能。2.0 版让我觉得我又在使用 ADO.NET 数据集了。

我完全错过了这里的情节吗？我知道已经有了重大的性能改进，但为什么 2.0 版感觉像 API 降级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:20:24.017

Storage Client Library 2.0 仍然在不同的命名空间中包含旧的 DataServices 实现。另一方面，与更新的 DataServices 实现和 SDK 的先前版本相比，新的表实现已显示出显着的性能改进。根据操作的不同，延迟提高了 25% 到 75%，同时系统资源利用率也显着下降。

请参阅[Windows Azure Storage Client Library 2.0 Tables Deep Dive](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/06/windows-azure-storage-client-library-2-0-tables-deep-dive.aspx)博客文章了解更多信息。正如博文中还提到的，如果您更喜欢 LINQ，您仍然可以使用已迁移到 Microsoft.WindowsAzure.Storage.Table.DataServices 命名空间的旧 DataServices 实现。

新表服务层中的 IQueryable 支持目前正在开发中。我们目前没有任何更具体的时间表细节可以分享。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-05T16:38:48.140

相关的，包含用于表服务层的 IQueryable（带有一些非常好的优化）的 2.1 RC 现在可用。看

[http://blogs.msdn.com/b/windowsazurestorage/archive/2013/07/12/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/07/12/introducing-storage-client-library-2-1-rc-for-net-and-windows-phone-8.aspx)

[http://www.nuget.org/packages/WindowsAzure.Storage](http://www.nuget.org/packages/WindowsAzure.Storage)

乔

# javascript - Js类名不起作用

> ID：15097905
> 
> 赞同：-2
> 
> 时间：2013-02-26T19:46:19.233
> 
> 标签：javascript

再次，我一直在寻找解决方案几个小时。好吧，这是我的问题 JS：`document.getElementById("wrapper").className += " js";`

HTML

```
<div id="wrapper">
.... 
</div> 
```

我得到错误：无法读取 null 的属性类名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:49:04.267

在这里暗中拍摄。您的脚本必须在div中`<head>`或*之后*`document.getElementById`才能找到该节点。我从您的问题中收集到，您的代码并非如此。

# jsf-2 - 如何在primefaces datalist中实现多项选择？

> ID：15097906
> 
> 赞同：0
> 
> 时间：2013-02-26T19:46:21.140
> 
> 标签：jsf-2, primefaces

`<p:datalist>`我正在尝试使用 a跟踪从 a 中选择的项目`<p:selectBooleanButton>`。我正在使用下面的代码片段来呈现列表。

```
<p:dataList value="#{movies.lazyModel}" var="movie" id="movies" paginator="true" rows="10"
   paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
   type="none" paginatorAlwaysVisible="false" lazy="true" rowIndexVar="currentRow" >

   <p:panel id="movieInfo">

     <!-- content markup -->

      <div id="rent">
         <p:selectBooleanButton offLabel="Add to Cart" onLabel="Remove from Cart" id="btnRent"
            value="#{movies.checkedItems[currentRow]}">
            <p:ajax update="btnRent" listener="#{movies.updateCart()}" event="click" process="btnRent"/>
         </p:selectBooleanButton>
      </div>

   </p:panel>

</p:dataList> 
```

**BackingBean**

```
@ManagedBean(name = "movies")
@ViewScoped
public class MovieListBean extends BaseBean implements Serializable
{
   private static final long serialVersionUID = -1887386711644123475L;

   ....

   private boolean[] checkedItems;

   @PostConstruct
   public void initialize() 
   {
      int totalRows = serviceLocator.getMovieService().getCatalogSize();
      checkedItems = new boolean[totalRows];
   }

   ....

   public void updateCart()
   {
      if (lazyModel != null)
      {
         int selectedIndex = lazyModel.getRowIndex();
         System.out.println("Selected row in datalist - " + selectedIndex);
         System.out.println("Object instance associated with selected row - " + lazyModel.getRowData());
         System.out.println("checkedItems[" + selectedIndex + "] - " + checkedItems[selectedIndex]);
      }
   }

   public boolean[] getCheckedItems() {
      return checkedItems;
   }

   public void setCheckedItems(boolean[] checkedItems) {
      this.checkedItems = checkedItems;
   }

} 
```

我已经看到了关于 SO 的解决方案以及通过使用演示相同的文档，`<f:setPropertyActionListener>`但它要求您使用`ActionSource`，即 commandButton 或 commandLink。此外，它们中的大多数是用于`<p:dataTable>`.

在我的示例中不是这种情况，因为我必须从集合中添加/删除对象以及更新标题文本中的计数。这将在侦听器中实现，但似乎没有被触发。

所以，我的问题是如何在仍然使用 dataList 的同时改变我的方法。使用上面的代码片段也会破坏分页。

我正在使用 JSF 2.1 (Mojarra) + PrimeFaces 3.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:59:19.060

要在 a 中启用动作组件，`<p:dataList/>`您需要将组件组包装在 a `<p:column/>`

```
 <p:dataList value="#{movies.lazyModel}" var="movie" id="movies" paginator="true" rows="10"  paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" type="none" paginatorAlwaysVisible="false" lazy="true" rowIndexVar="currentRow" >
         <p:column>
              <p:panel id="movieInfo">
                 <div id="rent">
                    <p:selectBooleanButton offLabel="Add to Cart" onLabel="Remove from Cart" id="btnRent" value="#{movies.checkedItems[currentRow]}">
                  <p:ajax update="btnRent" listener="#{movies.updateCart()}" event="click" process="btnRent"/>
                    </p:selectBooleanButton>
                 </div>
             </p:panel>
         </p:column>
     </p:dataList> 
```

# python - 如何一个接一个地执行许多功能

> ID：15097907
> 
> 赞同：1
> 
> 时间：2013-02-26T19:46:21.557
> 
> 标签：python

我想一个接一个地执行许多功能。每个函数都返回 True 或 False。因此，如果一个函数返回 True，我想执行下一个函数。ETC...

所有函数都不需要相同的参数。

现在我有类似的东西：

```
res=function1()
if res:
   res=function2()
   if res:
      res=function2() 
```

它会持续不断地进行 20 种功能。有一个更好的方法吗 ？

先感谢您...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T19:52:41.470

好吧，您可以定义自己的方式来执行此操作，但我会这样做：

```
my_functions = (
    (my_func1, [2, 5], {'kwarg1': 'val1'}),
    # ...
)

for function, args, kwargs in my_functions:
    if not function(*args, **kwargs):
        break 
```

根据评论编辑。伟大的洞察力！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T20:08:51.203

我可能会[`partial`](http://docs.python.org/2/library/functools.html#functools.partial)用来制作可以循环的零参数函数（而不是带有函数及其参数的某种结构）：

```
functions = [
    functools.partial(func1, arg1a, arg1b),
    functools.partial(func2),
    functools.partial(func3, keyword_a=kwarg3a, keyword_b=kwarg3b)
] 
```

然后，您无需将其放入 a`list`并对其进行迭代，您只需调用[`all`](http://docs.python.org/2/library/functions.html#all)：

```
retval = all(func() for func in (
    functools.partial(func1, arg1a, arg1b),
    functools.partial(func2),
    functools.partial(func3, keyword_a=kwarg3a, keyword_b=kwarg3b)
)) 
```

`False`只要其中一个函数返回`False`（或任何 false-y），它将立即返回，或者运行所有函数并`True`在它们都返回`True`（或任何 true-y）时返回。正如文档所说，它相当于：

```
def all(iterable):
    for element in iterable:
        if not element:
            return False
    return True 
```

值得将`partial`s`tuple`与另一个答案中的 s 进行比较，它们作为伪部分，无论是在它们的定义方式还是在它们的调用方式上：

```
f1 = functools.partial(func, arg1, arg2, kw1=kwarg1, kw2=kwarg2)
f2 = (func1, (arg1a, arg1b), {'kw1': kwarg1, 'kw2': kwarg2 })

f1()
f2[0](*f2[1], **f2[2]) 
```

显然，您可以（并且应该，正如 aemdy 的回答所做的那样）通过元组解包使调用更具可读性，但它仍然永远不会像使用真正的部分那样简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T19:52:22.880

您可以利用`and`运算符的短路行为：

```
function1() and function2() and function3() and ... 
```

`function2`只会在 return 时调用，只会在 if 和 returned时调用，`function1`依此类推。`True``function3``function1``function2``True`

不过，它不一定非常 Pythonic。

由于您总是分配给`res`，因此您也可以保持`if`s 平坦：

```
res = function1()

if res:
    res = function2()

if res:
    res = function3() 
```

这可能被认为更具可读性，但它确实浪费了大量的垂直空间。不过，至少你没有嵌套`if`两打深。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T22:23:20.210

没有必要变得太复杂：

```
res = function1()
res = res and function2()
res = res and function3()
... 
```

这看起来有点奇怪，但会做你想做的事，而不必将函数调用自己放入字典列表或其他东西中。这只是写 Cairnarvon 答案的更长的方式：

```
res = (
   function1() and
   function2() and
   function3() and
   ...
   ) 
```

# sql - 在 SQLite 中，我如何编写查询以在彼此相等的行中查找不同的列？

> ID：15097909
> 
> 赞同：0
> 
> 时间：2013-02-26T19:46:23.740
> 
> 标签：sql, ubuntu, sqlite

我有一个非常简单的问题，关于 SQLite，我无法理解。我正在尝试通过[阅读一本书](http://sql.learncodethehardway.com)并遵循示例来了解有关 SQL 的更多信息。其中一个练习是编写一个查询，该查询可以从宠物表中找出哪个宠物是另一只宠物的父母。pet.id 和 pet.parent 列都使用 INTEGER 数据类型。所以对于一只宠物来说，id 是 2，而另一只宠物是 3……宠物模式有宠物（id、名字、品种、父母）；结构类型。所以例如：`INSERT INTO pet VALUES(2, "scraps", "lolcat", 3);` 将使这个pet.id=2，pets.name=scraps，pet.breed=lolcat，pet.parent=3。在此表中，一些宠物也将是其他宠物的父母。所以他们的 pet.id 也会匹配其他宠物的 parent.id ......（看起来有点复杂）

我写了一个查询，我认为从那以后就可以了，但它没有返回任何结果或抛出任何错误。该查询是： `SELECT pet.name, pet.breed FROM pet WHERE pet.parent = pet.id;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:17:53.667

如果您在谈论[练习 13](http://sql.learncodethehardway.org/book/ex13.html)：它实际上是说：

> 编写一个查询，可以找到作为给定宠物的孩子的宠物。

因此，您有*一个特定*的父宠物及其 ID，并且您正在搜索以该 ID 作为其`parent`ID 的所有宠物：

```
SELECT * FROM pet WHERE parent = 3 
```

* * *

要找出孩子/父母关系中的所有宠物，您必须同时进行涉及*两个不同*宠物的查询；这需要一个**join**。在这种情况下，这些记录来自*同一个*表还有一个额外的问题，因此有必要使用别名 ( `AS`) 来重命名一个或两个表，以便我们可以明确地处理它们的列：

```
SELECT parent.name,
       parent.breed,
       child.name,
       child.breed
FROM      pet AS parent
     JOIN pet AS child
     ON parent.id = child.parent
WHERE ...    -- if needed 
```

# python - Python不匹配正则表达式

> ID：15097913
> 
> 赞同：0
> 
> 时间：2013-02-26T19:46:42.557
> 
> 标签：python, regex

```
>>> pattern = re.compile(r'(.*)\\\\(.*)\\\\(.*)')
>>> m = re.match(pattern, 'string1\string2\string3')
>>> m
>>> 
>>> m.groups
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'groups' 
```

我正在尝试在上面的正则表达式中匹配具有以下格式的字符串：`string1\string2\string3`.

以上是 Python 的输出。为什么它不返回适当的正则表达式对象？我的模式有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:48:44.987

问题在于，在您的模式中，您使用`\\\\`，它代表两个原始反斜杠，而在要匹配的文本中，您使用`\s`，实际上根本没有反斜杠（它是一个`\s`字符）。

首先，您可能希望将文本设为原始字符串，否则 Python 会将其读取为`\s`字符。

```
re.match(pattern, r'string1\string2\string3') 
```

其次，您的模式中只需要两个连续的斜杠来表示一个反斜杠：

```
pattern = re.compile(r'(.*)\\(.*)\\(.*)') 
```

最后，而不是`m.groups`，你想做的`m.groups()`（调用方法）。因此，您的代码将如下所示：

```
pattern = re.compile(r'(.*)\\(.*)\\(.*)')
m = re.match(pattern, r'string1\string2\string3')
m.groups()
# ('string1', 'string2', 'string3') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:08:08.410

问题是您试图在原始字符串中转义反斜杠。从[Python 文档](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)中，

> 当存在 'r' 或 'R' 前缀时，反斜杠后面的字符将不加更改地包含在字符串中，并且所有反斜杠都保留在字符串中。

这意味着所有 8 个反斜杠都保留在您的正则表达式中，并且每一对都匹配测试字符串中的一个反斜杠。[当您将其可视化时](http://www.debuggex.com/?re=%28.%2A%29%5C%5C%5C%5C%28.%2A%29%5C%5C%5C%5C%28.%2A%29&str=string1%5Cstring2%5Cstring3)（将滑块拖动到测试字符串上方），问题就会立即显现出来。可以通过将您的正则表达式替换为

```
r'(.*)\\(.*)\\(.*)' 
```

# .net - SQL Server SMO：删除具有依赖关系的多个对象

> ID：15097915
> 
> 赞同：0
> 
> 时间：2013-02-26T19:46:45.677
> 
> 标签：.net, sql-server, sql-server-2012, smo

给定一组对象（表、视图、过程...），我想**删除所有这些对象以及依赖它们的所有对象**。

这需要以**依赖顺序**对我想要删除的对象以及所有依赖对象执行删除操作。

如何以**干净优雅的方式**使用适用于 .NET 的**SQL Server 管理对象 (SMO)来完成这项工作？**

 **（问题背景：要删除的对象集是以编程方式生成的，不可预测。我正在构建一个内部工具。）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:46:26.530

我会研究`DependencyWalker`SMO 类 - [http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.dependencywalker_members(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.dependencywalker_members(v=sql.90).aspx)

基本上，您创建其中一个，`DiscoverDependencies()`使用 Urns/SqlSmoObjects 列表调用，然后`DependencyTree`返回。然后，您可以将此 DependencyTree 对象传递给 DependencyWalker 对象上的`WalkDependencies()`方法，并取回依赖关系的线性列表，您可以使用它来做您需要的事情。

这是一个草图，删除任意一组表（包括它们所引用的所有内容）的方法可能如下所示：

```
using (var conn = TestConnection.OpenSqlConnectionForTest())
{
    var db = SmoHelpersTest.GetDatabaseSmoObject(conn);

    var smoTables = (from Table t in db.Tables
                        where t.Name.EndsWith("-XXX")
                        select t).ToList();

    var dependencyWalker = new DependencyWalker(db.Parent);
    var dependencyTree = dependencyWalker.DiscoverDependencies(smoTables.Cast<SqlSmoObject>().ToArray(), DependencyType.Parents);
    var dependencyCollection = dependencyWalker.WalkDependencies(dependencyTree);

    foreach (DependencyCollectionNode dependencyCollectionNode in dependencyCollection.Reverse())
    {
        Console.WriteLine(dependencyCollectionNode.Urn);
        var smoObject = db.Parent.GetSmoObject(dependencyCollectionNode.Urn);
        ((dynamic)smoObject).Drop();
    }
} 
```**

# python - 如何在wxpython中传递字符'素数？

> ID：15097922
> 
> 赞同：0
> 
> 时间：2013-02-26T19:46:54.750
> 
> 标签：python, mysql, unicode, character

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:57:33.340

I assume you're using the unicode version of wxPython under Python 2 (not Python 3).

The problem arises when you're calling the `str` constructor on the result of `self.Text.GetValue()`.

wxPython accept all kind of characters and return unicode strings. In your example, `Textctrl.GetValue()` return the unicode string `u"2′BR"`

`str()` try to convert it into a string, using the default encoding, which is ascii. Ascii can only represents 128 characters. The prime character "′", is not represented in ascii. That's why you have this error.

What is the encoding of your MySQL database? If you want to use strange characters like the "′" prime, you should set your database encoding to utf-8.

Then you should be able to do:

```
cur.execute("INSERT INTO TKtable (title) VALUES (%s)", (self.Text.GetValue(),)) 
```

You won't be able to successfully insert a character that doesn't exist in your database encoding. I think the prime "′" (code 2032 in utf-8) prime doesn't even exist in latin-1.

# asp.net-mvc - Html.RenderPartial 和 Html.Render 之间的区别

> ID：15097925
> 
> 赞同：4
> 
> 时间：2013-02-26T19:46:56.423
> 
> 标签：asp.net-mvc, html.renderpartial

我是 asp.net 的新手，我有一个页面要显示为部分视图。该页面位于 div 标签中，就像这样`<div> Html.RenderPartial("view",Model)</div>` ，我对 Html.Render 做同样的事情，但它只适用于 RenderPartial。

有谁知道为什么，有什么区别？我知道 Renderpartial 更适合 Image 等。但是还有其他区别吗？？？非常感谢:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:26:01.917

[这个答案](https://stackoverflow.com/a/5248218/51)应该给你你正在寻找的东西（复制相关部分）：

Html.Partial 返回一个字符串，Html.RenderPartial 内部调用Write，返回void。用法（使用 Razor 语法）：

```
@Html.Partial("ViewName")
@{ Html.RenderPartial("ViewName");  } 
```

会做同样的事情。您可以将 Html.Partial 的输出存储在变量中，或从函数中返回。您不能使用 Html.RenderPartial 执行此操作。结果将在执行期间写入响应流。

# jquery - jQuery 性能，绑定单个 jQuery 对象数组，与通过 $().each 的单个对象？

> ID：15097927
> 
> 赞同：1
> 
> 时间：2013-02-26T19:47:08.650
> 
> 标签：jquery, performance

我正在尝试将 mouseenter 和 mouseleave 事件绑定到`<li>`容器中的每个事件，但是这两个事件共享一些我想在这两个事件之间共享的公共变量。

我知道做这样的事情会很简单：

```
$( '.nav li' )
    .on( 'mouseenter', function()
    {
        var $children   = $( this ).find( '.children' ),
            h           = $children.children().outerHeight(),
            speed       = 250;
        $children
            .stop().clearQueue()
            .animate({ height: h }, speed );
    })
    .on( 'mouseleave', function()
    {
        var $children   = $( this ).find( '.children' ),
            h           = $children.children().outerHeight(),
            speed       = 250;
        $children
            .stop().clearQueue()
            .animate({ height: 0 }, speed );
    }); 
```

但是在“每个”函数的范围内存储变量会涉及什么样的性能障碍？（为了避免在两个绑定中复制和粘贴变量）

```
$( '.nav li' ).each( function()
{
    var $children   = $( this ).find( '.children' ),
        h           = $children.children().outerHeight(),
        speed       = 250;

    $( this )
        .on( 'mouseenter', function()
        {
            $children
                .stop().clearQueue()
                .animate({ height: h }, speed );
        })
        .on( 'mouseleave', function()
        {
            $children
                .stop().clearQueue()
                .animate({ height: 0 }, speed );
        });
}); 
```

我不使用类似的原因`(function(){})()`是因为每个列表项都有自己的子项。

那么性能差异有哪些呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:10:39.610

I am confused, but why not just bind them both in the same call as it looks identical between both of them.

```
.bind('mouseenter mouseleave', function(event){
  var $children   = $( this ).find( '.children' ),
    h           = event.type == "mouseenter" ? $children.children().outerHeight() : 0,
    speed       = 250;
        $children
            .stop().clearQueue()
            .animate({ height: h }, speed );

 }) 
```

# ruby - Ruby：模块、要求和包含

> ID：15097929
> 
> 赞同：50
> 
> 时间：2013-02-26T19:47:14.430
> 
> 标签：ruby, module, mixins

我正在尝试使用 Ruby 模块（mixins）。

我有 test.rb：

```
#!/usr/bin/env ruby
require_relative 'lib/mymodule'

class MyApp
  include MyModule
  self.hallo
end 
```

和 lib/mymodule.rb：

```
module MyModule
  def hallo
    puts "hallo"
  end
end 
```

很简单的设置。但它不起作用:(:

```
ruby test.rb
test.rb:8:in `<class:MyApp>': undefined method `hallo' for MyApp:Class (NoMethodError)
        from test.rb:6:in `<main>' 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-02-26T19:58:39.667

简而言之：您需要`extend`代替`include`模块。

```
class MyApp
  extend MyModule
  self.hallo
end 
```

`include`为混合它的类提供实例方法。

`extend`为混合它的类提供类方法。

读一读。[_](http://www.railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-26T20:04:06.993

问题是您`hallo`在类定义中调用，同时将其添加为实例方法 ( `include`)。

因此，您可以使用`extend`(`hallo`将成为类方法)：

```
module MyModule
  def hallo
    puts "hallo"
  end
end

class MyApp
  extend MyModule
  self.hallo
end 
```

或者调用`hallo`MyApp 的一个实例：

```
module MyModule
  def hallo
    puts "hallo"
  end
end

class MyApp
  include MyModule
end

an_instance = MyApp.new
an_instance.hallo 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-26T19:54:56.220

您的代码正在运行 - 但包含一个模块并没有按照您的想法执行。包含模块的类将不会获得方法 - 来自此类的对象会。

所以这将起作用：

```
class MyApp
  include MyModule
end

my_app_object = MyApp.new
my_app_object.hallo # => hallo 
```

my_app_object 是 MyApp 类的对象，它具有模块 MyModule 的 mixins。看看[那里](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html)对模块和 mixin 的完整解释。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-08T07:26:02.827

```
class MyApp
  class << self
    include MyModule
  end
  self.hallo
end 
```

是相同的

```
class MyApp
  extend MyModule
  self.hallo
end 
```

extends 只是打开类对象并包含模块方法。“你好”又变成了一个类对象。MyApp 类的静态方法。

因此，“包含”将方法注入到接收器的实例中，在您的情况下是“自我”而不是对象本身。在您的情况下，“扩展”将方法注入接收器是“自我”。

```
self.include MyModule // inject the methods into the instances of self
self.extend MyModule // inject the methods into object self 
```

在类级别“self”将指向您的类对象，即 MyApp。

还要记住“include”和“extend”只是module.rb中定义的方法。“include”是一个类对象方法（静态方法），“extend”是一个实例方法。

# iphone - 找不到“segmentControl”类型对象的属性 iphone

> ID：15097930
> 
> 赞同：0
> 
> 时间：2013-02-26T19:47:16.607
> 
> 标签：iphone, uisegmentedcontrol

我已经定义了 segmentControl 按钮。

```
@property(nonatomic, strong) SegmentControl *option;
SegmentControl *result = [[SegmentControl alloc] initWithFrame:frame items:@[@"Bad", @"Good"]];

result:self.option.selectedSegmentIndex 
```

为什么我会收到此错误：在“segmentControl”类型的对象上找不到属性“selectedSegmentIndex”，

```
@class SegmentControl;
@protocol SegmentControlDelegate <NSObject>
@optional
- (void)segmentControl:(SegmentControl *)segmentControl didSelectSegment:(UIButton *)segment;

@end

@interface SegmentControl : UIView

@property(nonatomic, assign) BOOL staySelected;
@property(nonatomic, weak) id<SegmentControlDelegate> delegate;

- (id)initWithFrame:(CGRect)frame items:(NSArray *)items;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:43:41.690

您的 SegmentControl 类需要是 UISegmentControl（不是 UIView）的子类。

# c# - 使用可移植类库进行异步单元测试

> ID：15097935
> 
> 赞同：1
> 
> 时间：2013-02-26T19:47:38.663
> 
> 标签：c#, unit-testing, mstest, portable-class-library

我有一个可移植类库，至少需要针对 .net 4.5 和 Silverlight 5。我在尝试在 VS 2012 中编写 MSTest 单元测试时遇到了问题，因为我的库不使用新的异步/等待范例。有什么方法可以测试这种方法吗？

```
public static void Get(string uri, string acceptHeader, Action<string> callback)
{
    var request = (HttpWebRequest)WebRequest.Create(uri);
    request.Accept = acceptHeader;        

    request.BeginGetResponse(o =>
    {
        var r = o.AsyncState as HttpWebRequest;
        try
        {
            var response = r.EndGetResponse(o);
            using (var sr = new StreamReader(response.GetResponseStream()))
            {
                callback(sr.ReadToEnd());
            }
        }
        catch (Exception ex)
        {
            throw new WebException(string.Format("Unable to access {0}", uri), ex);
        }
    }, request);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:03:38.977

只是无法抗拒重构代码。您可以使用闭包来执行以下操作

```
public static void Get(string uri, string acceptHeader, Action<string> callback)
{
    var request = (HttpWebRequest)WebRequest.Create(uri);
    request.Accept = acceptHeader;        

    request.BeginGetResponse(o =>
    {
        try
        {
            var response = request.EndGetResponse(o);
            using (var sr = new StreamReader(response.GetResponseStream()))
            {
                callback(sr.ReadToEnd());
            }
        }
        catch (Exception ex)
        {
            throw new WebException(string.Format("Unable to access {0}", uri), ex);
        }
    }, null);
} 
```

但是在一天结束时，您可以执行以下操作

```
public async static void Get(string uri, string acceptHeader, Action<string> callback)
{
    var request = (HttpWebRequest)WebRequest.Create(uri);
    request.Accept = acceptHeader;        
    var response = await Task.Factory.FromAsync(
                             request.BeginGetRequestStream ,
                             request.EndGetRequestStream ,
                             uri,
                             null);
    using (var sr = new StreamReader(response))
    {
        callback(sr.ReadToEnd());
    }
} 
```

好的，这就是我会怎么做

```
void Main()
{
    {...}
    var request = (HttpWebRequest)WebRequest.Create(uri);
    request.Accept = acceptHeader;
    var response = await request.DownloadStringTaskAwait();
    DoSomeStuff(response);
}

// Define other methods and classes here
public static class HttpWebRequestExtension
{
    public async Task<string> DownloadStringTaskAwait(this HttpWebRequest request)
    {
        var response = await Task.Factory.FromAsync<Stream>(
                            request.BeginGetRequestStream,
                            request.EndGetRequestStream,
                            null);
                    using (var sr = new StreamReader(response))
                    {
                         return sr.ReadToEnd();
                    }
            }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:10:42.817

First, I recommend you reconsider `async`/`await`. It's the wave of the future. [Microsoft.Bcl.Async](https://nuget.org/packages/Microsoft.Bcl.Async) provides `async` support to portable libraries targeting .NET 4.5 and SL5.

But if you don't want to do that, you can still use `async` unit tests:

```
[TestMethod]
public async Task Get_RetrievesExpectedString()
{
  var tcs = new TaskCompletionSource<string>();
  var client = new ... // arrange

  client.Get(uri, acceptHeader, result =>
  {
    tcs.SetResult(result);
  });
  var actual = await tcs.Task;

  Assert.AreEqual(expected, actual);
} 
```

Or if you want, you can do it "old-school":

```
[TestMethod]
public void Get_RetrievesExpectedString()
{
  var mre = new ManualResetEvent(initialState: false);
  string actual = null;
  var client = new ... // arrange

  client.Get(uri, acceptHeader, result =>
  {
    actual = result;
    mre.Set();
  });
  mre.WaitOne();

  Assert.AreEqual(expected, actual);
} 
```

# java - 使用 jSoup 从 Android 中的外部网站接收表格数据

> ID：15097937
> 
> 赞同：0
> 
> 时间：2013-02-26T19:47:40.693
> 
> 标签：java, android, html, html-table, jsoup

在我的 Android 应用程序中，我想从外部网站接收一些表格数据。

假设网站页面 X 在其 HTML 中包含此表：

```
<table summary="Foo" border="0" bgcolor="#ffffff" cellpadding="0"> </table> 
```

我将如何接收表格第二列（从上到下）的所有单元格内的字符串？

到目前为止，我所做的如下：

1.  创建一个[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

2.  使用[jSoup](http://jsoup.org/)抓取外部网站。

我在我的 AsyncTask 中使用了以下代码：

```
ArrayList<String> list = new ArrayList<String>(); //table data
Document document = Jsoup.connect(url).get();
Elements nextTurns = document.select(":contains(Foo) td:eq(1)");            
        for (Element nextTurn : nextTurns) {
            list.add(nextTurn.text());
        } 
```

运行代码时，它似乎只是停在`document.select`语句处，GC 快疯了。很长一段时间后，它确实通过了`document.select`声明，并且确实获得了大部分数据正确，但它仍然具有来自网站的随机其他元素。

我很确定这是完全错误的：

```
Elements nextTurns = document.select(":contains(Foo) td:eq(1)"); 
```

但我不确定如何修复它，因为该表也缺少任何 ID。我发现[这个页面](http://jsoup.org/cookbook/extracting-data/selector-syntax)令人困惑。

如何修复 select 语句和/或 for 循环，以便用第二个表列中的数据填充 ArrayList？

编辑：通过删除`contains(Foo)`它现在真的很快，所以减少了 1 个问题。我仍然需要帮助将 DOM 元素遍历到表格的第二列，而无需获取网站的一堆随机部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:06:07.987

这是正确的选择，根据您的帖子猜测

```
document.select("table[summary=Foo] tr"); 
```

遍历上面的列表，并获得第二个`<td>`，它位于列表的索引 1 处。

# java - 处理超大的 json 文件。返回总是内存不足

> ID：15097939
> 
> 赞同：4
> 
> 时间：2013-02-26T19:47:43.787
> 
> 标签：java, json, stream, base64, jackson

如何将流 API json 与杰克逊一起使用？请参阅下面的代码：

```
 ObjectMapper mapper = new ObjectMapper();

    Map<String, Object> map = new HashMap<String, Object>();

    List<Object> list = new ArrayList<Object>();

    // Get images in database
    try {
            Class.forName(DRIVER);
            connection = DriverManager.getConnection(URL, USER, PASSWORD);

            Statement s = connection.createStatement();
            ResultSet r = s.executeQuery("select * from images");

            while (r.next()) {

                byte[] imageBytes = r.getBytes("image");
                String imageBase64 = DatatypeConverter.printBase64Binary(imageBytes);
                list.add(imageBase64);
            }

    } catch (SQLException e) {

    }

    map.put("images", list);

    // Stream Json API
    try {
            mapper.writeValue(new File("c:\\images.json"), map);
    } catch (JsonGenerationException e) {
            e.printStackTrace();
    } catch (JsonMappingException e) {
            e.printStackTrace();
    } catch (IOException e) {
            e.printStackTrace();
    } 
```

总是从内存中返回。我不知道将流与杰克逊一起使用。我使用超大 json，平均 2000 张图像，每个图像都有一个 imageBase64。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:34:49.187

无需将所有图像保存在内存中，只需增量读取和写入它们。可以在[此处](http://www.cowtowncoder.com/blog/archives/2009/01/entry_132.html)找到 Jackson Streaming API 的示例（“Reading and Writing Event Streams”）。

编辑：这应该很难弄清楚人们......但这是一个骨架示例：

```
// typed from memory, some methods may be off a bit
JsonFactory f = objectMapper.getFactory();
JsonGenerator gen = f.createGenerator(new File("c:\\images.json"));
gen.writeStartArray(); // to get array of objects
// get the DB connection etc
while (r.next()) {
  gen.writeFieldName("image");
  InputStream in = r.getBinaryStream("image");
  gen.writeBinary(in, -1); // length optional for JSON
  in.close();
} 
```

    gen.writeEndArray(); // 获取对象数组 gen.close();

这应该可以解决问题。

# git - 使用快进提交进行合并的 git 工作流

> ID：15097941
> 
> 赞同：1
> 
> 时间：2013-02-26T19:47:58.367
> 
> 标签：git, version-control, git-merge, git-workflow, fast-forward

我与许多开发人员一起在几个项目中使用 git。我通常的工作流程是针对特定功能/请求在本地分支，将我的更改合并到上游跟踪的本地分支作为快进合并，然后推送更改。我总是为一个单一的提交分支。我从来没有在我与其他人共享的分支上进行本地提交，所以我可以自由地在本地进行 rebase/muck，直到我将我的更改推送到上游。作为一个偏好问题，我喜欢我的合并尽可能快进提交。例如，如果一个项目的版本 1 的所有内容都由`origin/v1`分支上的所有开发人员推送，我会：

```
git checkout v1
git checkout -b feature-A
#Do work on feature-A branch.  Test, rebase --interactive to clean up 
```

最终，我想将我的更改合并到`v1`本地并推送到`origin/v1`. 我会签出`git fetch origin`的`feature-A`。如果进行更改，我将结帐`v1`并合并

```
git fetch origin
#If New changes are present checkout v1 and merge
git checkout v1
git merge origin/v1 #I could pull but I prefer to fetch, log origin/v1, and then merge 
```

现在为`feature-A`I checkout `feature-A`、rebase to `v1`、checkout `v1`、merge`feature-A`和 push `v1`back实现快进合并`origin`。

```
git checkout feature-A
git rebase v1
git checkout v1
git merge --ff-only feature-A
git push origin v1 
```

非快进提交没有错，合并提交也没有错。同样，这只是一个偏好问题。我想知道是否有更好的工作流程来完成同样的事情，而无需通过所有分支机构的结帐。可能有一个我不知道的 git 命令在我在更新的分支`feature-A`之上重新设置基础后会起作用。`v1`

[https://stackoverflow.com/a/4157106/620304](https://stackoverflow.com/a/4157106/620304)看起来可能会有所帮助。一个可能的工作流程是在我 rebase 后`v1`使用来自 origin 的最新更改进行更新并更新`v1`到本地的 HEAD ：`feature-A`

```
#Starting from feature-A currently checked out
git fetch origin
#New changes are present
git checkout v1
git merge origin/v1
git checkout feature-A
#In I didn't fetch anything from origin's v1 branch I can skip the commands between the comments
git rebase v1
git branch -f v1 feature-A
git push origin v1 
```

我确信可能有更好的方法。非常感谢任何帮助/输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:10:35.597

A workflow that uses only fast-forward merges is essentially a rebase workflow. The general rebase workflow works very similar to the example you gave, except for `git rebase origin/v1` instead of merging.

The most referenced article I've seen is Randy Fay's blog post: [A Rebase Workflow for Git](http://randyfay.com/content/rebase-workflow-git).

Be sure to read the follow-up article, linked at the start of this one, for some short-cuts to make it easy to use.

# google-chrome - 源地图是否适用于 Chrome 扩展程序？

> ID：15097945
> 
> 赞同：12
> 
> 时间：2013-02-26T19:48:11.367
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

我正在使用 Closure 编译器创建一个 Chrome 扩展，并且我想让源映射用于调试。通过将浏览器直接指向我的源代码树中的一个页面，我可以让源映射正常工作，并将特殊的 sourceMappingURL 添加到已编译的 javascript 文件的末尾（所有内容都在一个目录中）：

```
debugger;document.getElementById("hello").innerHTML="Hello, world!";
//@ sourceMappingURL=background-compiled.map 
```

但是当我作为扩展访问相同的脚本时，我只能看到已编译的 javascript 而不是原始源。我确实将 Chrome 调试器配置为在这两种情况下都启用源映射，否则它们都执行相同而没有错误。源映射是否不能在扩展中工作，或者我在设置时缺少什么？

我已经尝试过 Chrome 25 stable 和 Chrome 27 canary，两者的行为相同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2020-03-03T17:44:50.040

我遇到了同样的问题，切换到内联源映射后，一切正常。

原因是，chrome 扩展只支持内联源 mpas

所以，当你使用 webpack 时，只需添加

```
devtool: "inline-source-map" 
```

有一系列可能的选项，请参阅[此处](https://webpack.js.org/configuration/devtool/)的 webpack 文档中的表格。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-10T16:31:19.590

我知道我迟到了，但 Chrome 确实允许源映射。您可能遇到的问题是它默认拒绝加载地图。这可以通过将地图添加到 `web_accessible_resources`文件中`manifest.json`来解决。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-02T23:13:31.857

本着为[评论中解决的问题提供答案](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)的精神，Chrome 以前不支持在扩展程序中使用源映射，但自 Chrome 29 起已纠正。

感谢评论者@w00kie，他提交并跟踪了[Chromium 上的错误](https://code.google.com/p/chromium/issues/detail?id=212374)- 如果您希望因您的帮助而获得声誉，只需发布​​您自己的答案，我将删除此答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-01T23:18:44.367

Chrome 支持开箱即用的扩展源映射。无需将它们内联或将它们添加到`web_accessible_resources`您的`manifest.json`文件中。

映射文件分配在开发人员工具下“源”选项卡内的“内容脚本”选项卡下。

有所有启用的扩展的源代码，加上`webpack://`文件（如果源映射是用 Webpack 创建的）。

也可以使用 Cmd + P 查找映射文件。

[![Chrome 扩展源地图](../Images/f53b1c7aa5260ba9361e1ce2e4e6abd3.png)](https://i.stack.imgur.com/o10oH.gif)

# c++ - 在没有 C++11 的情况下初始化头文件中的数组的替代方法

> ID：15097947
> 
> 赞同：2
> 
> 时间：2013-02-26T19:48:11.303
> 
> 标签：c++, arrays, c++11, header-files

我在我的头文件中创建了一个类，它创建并填充三个数组，如下所示：

```
class ExampleClass {
private:
    string array1[5] = {"test1", "test2", "test3", "test4", "test5"};
    double array2[4] = {20.7, 26.4, 27.8, 31.1};
    double array3[4] = {19.1, 25.8, 27.3, 32.3};
}; 
```

在构建时，我收到有关此要求`-std=c++11`或`-std=gnu++11`工作的警告。它可以很好地构建并且可以按照我想要的方式工作，但是如果我要将它包含在一个 uni 项目中，我应该担心吗？

是否存在完全相同的旧替代方案，或者这只能从 C++11 中实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:07:07.650

如果您只是从数组中读取（正如您在评论中所说），请添加`const`.

**注意：**如果没有`const`并且当您开始修改值时，以下内容将无法按预期工作！

以下是我在 C++03 中能想到的最好的。虽然您*可以*将所有内容放入头文件中，但我认为这不是一个好主意。我将展示如何使用头文件和实现文件来做到这一点。如果您确实需要标头中的所有内容并且您无法弄清楚如何调整以下代码，请询问。

我们首先创建一个头文件`foo.hpp`：

```
#ifndef FOO_HPP
#define FOO_HPP

#include <string>

class ExampleClass {
private:
  const std::string (&array1)[5];
  const double (&array2)[4];
  const double (&array3)[4];

  ExampleClass(); // you need ctors to initialize the non-static members
};

#endif // FOO_HPP 
```

现在你有了标题，创建实现文件`foo.cpp`：

```
#include "foo.hpp"

namespace
{
  const std::string global_array1[5] = {"test1", "test2", "test3", "test4", "test5"};
  const double global_array2[4] = {20.7, 26.4, 27.8, 31.1};
  const double global_array3[4] = {19.1, 25.8, 27.3, 32.3};
}

// define your ctor(s)
ExampleClass::ExampleClass()
  : array1( global_array1 ),
    array2( global_array2 ),
    array3( global_array3 )
{} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:21:22.193

> 例如，如果我要将它包含在一个 uni 项目中，这是我应该担心的吗？

如果您正在为作业编写项目，则应注意作业的要求。它应该指定您的代码必须构建和运行的平台、编译器和构建标志。如果这些要求允许您使用 C++11，那么您很好，如果不允许，那么您将不得不寻找替代方案。并记住始终在评分者将使用的平台、编译器等上测试您的工作。

> 是否存在完全相同的旧替代方案，或者这只能从 C++11 中实现？

没有 C++11 之前的替代品可以做同样的事情。在 C++11 之前，不可能为成员数组指定初始化程序。您能得到的最接近的是允许发生默认初始化，然后在构造函数中重新初始化数组：

```
struct S {
    string array1[5];
    S() {
        string init_values[5] = {"test1", "test2", "test3", "test4", "test5"};
        for (int i=0; i<5; ++i) {
            array1[i] = init_values[i];
        }
    }
}; 
```

C++11 引入了统一初始化：

```
struct S {
    string array1[5];
    S() : array1{"test1", "test2", "test3", "test4", "test5"}
    {}
}; 
```

和类内初始化：

```
struct S {
    string array1[5] {"test1", "test2", "test3", "test4", "test5"};
}; 
```

# css - 如何抑制 IntelliJ Idea 12 中的错误

> ID：15097949
> 
> 赞同：6
> 
> 时间：2013-02-26T19:48:26.577
> 
> 标签：css, path, intellij-idea, error-suppression

我有很多关于 CSS 中的背景图像的错误。这是因为部署相对路径将与我的开发环境不同。

这些都是无关紧要的错误，我知道我无能为力。我想关闭对此的检查，以便再次发现真正的错误。

我检查了设置和项目结构，没有看到任何有希望的东西，但我不禁想到我以前在某处读过如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T19:48:26.577

在编写问题时找到了可能的答案：菜单--> 分析 - 分析标记了不需要的错误的文档。然后在检查结果中，单击扳手并取消选中您不想运行的检查。在我的情况下，这是在 CSS 下，取消选中未知文件或目录。

我还注意到这个图标，一个戴着圆顶礼帽的人背对着你（哇），当点击它时，可以关闭一个非常具体的错误实例的红线。这似乎也适用于项目中具有相同确切错误的任何其他文档。这是一个好处，因为我知道应该使用的路径，只需为它们关闭错误并在我奇怪的开发设置中检测到不正确的路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-16T15:01:39.460

您可以右键单击该文件和`mark as plain text`. 对第三方 css/js 库很有用。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-13T09:13:34.163

如果您对 css 文件之前的红色路径感到恼火，只需将其关闭，然后重新启动 intelliJ。intellij 有时无法识别 css 代码，所以不用担心。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-12T19:44:25.997

对我来说，我想排除该文件夹。所以将目录标记为排除，然后需要重新启动编辑器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-18T13:39:39.473

在 2020.3 版本中，圆顶礼帽男不见了（有些帖子提到了检查员赫克托）。而是这样做：

```
Select the file

Analyze --> Configure Current File Analysis... -->
    Highlighting Level for myfile.foo --> Check "None" 
```

# android - 以编程方式将 ImageView 添加到布局

> ID：15097950
> 
> 赞同：6
> 
> 时间：2013-02-26T19:48:28.327
> 
> 标签：android, android-layout, android-imageview

我想创建从屏幕上部向下的图像。

直到今天我有这个：

```
ImageView mario = (ImageView) findViewById(R.id.mario);
TranslateAnimation anim = new TranslateAnimation(0f, 0f, 0, 400);
anim.setInterpolator(new LinearInterpolator());
anim.setRepeatCount(Animation.INFINITE);
anim.setDuration(800);
mario.startAnimation(anim); 
```

问题是我必须在布局上的 xml 文件上设置 imageview，而此代码仅创建 1 张图片。

我想对应用程序进行编程以在屏幕的上部创建几个图像（例如在一个循环中）并让它们下拉屏幕。（这里我在这里使用 TranslateAnimation）。我发现了这样的事情：

```
ImageView mario = (ImageView) findViewById(R.drawable.mario); 
```

但我不知道如何设置不在 xml 文件中的 ImageView 的位置（可能吗？）。我想创建 LinearLayout 并将其添加到 ImageView。但是如何将线性布局添加到现有布局中？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T19:59:47.403

您可以使用类似的东西创建布局

```
View view = (View) findViewById(R.layout.current_layout); //the layout you set in `setContentView()`
LinearLayout picLL = new LinearLayout(CurrentActivity.this);
picLL.layout(0, 0, 100, 0);
picLL.setLayoutParams(new LayoutParams(1000, 60));
picLL.setOrientation(LinearLayout.HORIZONTAL);
((ViewGroup) view).addView(picLL); 
```

你传入的参数`layout()`显然取决于你想要什么。然后您可以单独创建`Views`以添加到`Layout`您刚刚创建的内容中。但我强烈建议通读文档以了解在这里可以做什么。

[视图组](http://developer.android.com/reference/android/view/ViewGroup.html)

[看法](http://developer.android.com/reference/android/view/View.html)

**编辑**

```
ImageView myImage = new ImageView(this);
picLL.addView(myImage);
//set attributes for myImage; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-19T12:49:04.057

使用以下代码，您可以动态添加图像

```
public class MainActivity extends Activity {

 @Override
 protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);
 ImageView imageview = new ImageView(MainActivity.this);
 RelativeLayout relativelayout = (RelativeLayout)findViewById(R.id.relativeLayout);
 LinearLayout.LayoutParams params = new LinearLayout
 .LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);

 // Add image path from drawable folder.
 imageview.setImageResource(R.drawable.demo_new_image);
 imageview.setLayoutParams(params); 
 relativelayout.addView(imageview); 

 }
} 
```

# c++ - 创建 MBed 库，错误“需要一个标识符”

> ID：15097954
> 
> 赞同：0
> 
> 时间：2013-02-26T19:48:35.110
> 
> 标签：c++, c, mbed

这是我的代码。当我尝试编译它时，出现“预期标识符”错误，我相信这与我格式化 Timer2 启动的方式有关。

我需要更改哪些内容才能编译此代码？

非常感谢。

如果需要，我可以添加头文件。

```
#include "Timer2.h"
#include "LPC17xx.h"

unsigned int _presc;

Timer2::Timer2(unsigned long pres, ClockType cs) :
{
    power(1);
    prescale(pres);
    selectClock(cs);
}

Timer2::~Timer2()
{
    power(0);
}

void Timer2::prescale(unsigned int p)
{
    _presc = p-1;
    LPC_TIM2->PR = _presc;
}

unsigned long Timer2::getPrescale()
{
    return _presc;
}

void Timer2::capture0(ChangeType change, bool interrupt)
{
    LPC_PINCON->PINSEL0 |= (0x3<<8); //setup CAP2:0 on pin P0.4 DIP 30
    if ( change == rising) {
        LPC_TIM2->CCR |= 0x1;
        LPC_TIM2->CCR |= 0x0<<1;
    } else if ( change == falling) {
        LPC_TIM2->CCR |= 0x0;
        LPC_TIM2->CCR |= 0x1<<1;
    } else if( change == changing) {
        LPC_TIM2->CCR |= 0x1;
        LPC_TIM2->CCR |= 0x1<<1;
    }
    if (interrupt == true) {
        LPC_TIM2->CCR |= 0x1<<2;
    }
}

void Timer2::capture1(ChangeType change, bool interrupt)
{
    LPC_PINCON->PINSEL0 |= (0x3<<10); //setup CAP2:1 on pin P0.5 DIP 29
    if ( change == rising) {
        LPC_TIM2->CCR |= 0x1<<3;
        LPC_TIM2->CCR |= 0x0<<4;
    } else if ( change == falling) {
        LPC_TIM2->CCR |= 0x0<<3;
        LPC_TIM2->CCR |= 0x1<<4;
    } else if( change == changing) {
        LPC_TIM2->CCR |= 0x1<<3;
        LPC_TIM2->CCR |= 0x1<<4;
    }
    if (interrupt == true) {
        LPC_TIM2->CCR |= 0x1<<5;
    }
}

void Timer2::capture0Stop()
{
    LPC_PINCON->PINSEL0 |= (0x0<<8); //stop CAP2:0
    LPC_PINCON->PINSEL0 |= (0x0<<7);
}

void Timer2::capture1Stop()
{
    LPC_PINCON->PINSEL0 |= (0x0<<10); //stop CAP2:1
    LPC_PINCON->PINSEL0 |= (0x0<<9);
}

unsigned long Timer2::time_us()
{
    return _presc * LPC_TIM2->TC /96.0;
}

void Timer2::start()
{
    LPC_TIM2->TCR |= 0x0<<1;
    LPC_TIM2->TCR |= 0x1<<0;
}

void Timer2::stop()
{
    LPC_TIM2->TCR |= 0x0<<1;
    LPC_TIM2->TCR |= 0x0<<0;
}

void Timer2::reset()
{
    LPC_TIM2->TCR |= 0x1<<1;
}

void Timer2::match0(unsigned long value, bool stop, bool interrupt, bool reset, MatchAction action = nothing)
{
    if (action == nothing) {
        LPC_PINCON->PINSEL0 |= (0x0<<12);   //Select pin p0.6 (p8)
        LPC_PINCON->PINSEL0 |= (0x0<<11);   //Select pin p0.6 (p8)
    } else if (action == set0) {
        LPC_PINCON->PINSEL0 |= (0x3<<12);   //Select pin p0.6 (p8)
        LPC_TIM2->EMR |= 0x2<<5;            //Set pin low
    } else if (action == set1) {
        LPC_PINCON->PINSEL0 |= (0x3<<12);   //Select pin p0.6 (p8)
        LPC_TIM2->EMR |= 0x1<<5;            //Set pin high
    } else if (action == toggle) {
        LPC_PINCON->PINSEL0 |= (0x3<<12);   //Select pin p0.6 (p8)
        LPC_TIM2->EMR |= 0x3<<5;            //Toggle pin
    }
    LPC_PINCON->PINSEL0 |= (0x3<<12);   //Select pin p0.6 (p8)
    LPC_TIM2->MR0 = value;
    LPC_TIM2->MCR |= 0x0<<0;
    LPC_TIM2->MCR |= 0x0<<1;
    LPC_TIM2->MCR |= 0x0<<2;
    if (interrupt == true) {
        LPC_TIM2->MCR |= 0x1<<0;
    }
    if (reset == true) {
        LPC_TIM2->MCR |= 0x1<<1;
    }
    if (stop == true) {
        LPC_TIM2->MCR |= 0x1<<2;
    }

}

void Timer2::match1(unsigned long value, bool stop, bool interrupt, bool reset, MatchAction action = nothing)
{
    if (action == nothing) {
        LPC_PINCON->PINSEL0 |= (0x0<<14);   //Select pin p0.7 (p7)
        LPC_PINCON->PINSEL0 |= (0x0<<13);   //Select pin p0.7 (p7)
    } else if (action == set0) {
        LPC_PINCON->PINSEL0 |= (0x3<<14);   //Select pin p0.7 (p7)
        LPC_TIM2->EMR |= 0x2<<7;            //Set pin low
    } else if (action == set1) {
        LPC_PINCON->PINSEL0 |= (0x3<<14);   //Select pin p0.7 (p7)
        LPC_TIM2->EMR |= 0x1<<7;            //Set pin high
    } else if (action == toggle) {
        LPC_PINCON->PINSEL0 |= (0x3<<14);   //Select pin p0.7 (p7)
        LPC_TIM2->EMR |= 0x3<<7;            //Toggle pin
    }
    LPC_TIM2->MR1 = value;
    LPC_TIM2->MCR |= 0x0<<3;
    LPC_TIM2->MCR |= 0x0<<4;
    LPC_TIM2->MCR |= 0x0<<5;
    if (interrupt == true) {
        LPC_TIM2->MCR |= 0x1<<3;
    }
    if (reset == true) {
        LPC_TIM2->MCR |= 0x1<<4;
    }
    if (stop == true) {
        LPC_TIM2->MCR |= 0x1<<5;
    }
}

void Timer2::match2(unsigned long value, bool stop, bool interrupt, bool reset, MatchAction action = nothing)
{
    if (action == nothing) {
        LPC_PINCON->PINSEL0 |= (0x0<<16);   //Select pin p0.8 (p6)
        LPC_PINCON->PINSEL0 |= (0x0<<15);   //Select pin p0.8 (p6)
    } else if (action == set0) {
        LPC_PINCON->PINSEL0 |= (0x3<<16);   //Select pin p0.8 (p6)
        LPC_TIM2->EMR |= 0x2<<9;            //Set pin low
    } else if (action == set1) {
        LPC_PINCON->PINSEL0 |= (0x3<<16);   //Select pin p0.8 (p6)
        LPC_TIM2->EMR |= 0x1<<9;            //Set pin high
    } else if (action == toggle) {
        LPC_PINCON->PINSEL0 |= (0x3<<16);   //Select pin p0.8 (p6)
        LPC_TIM2->EMR |= 0x4<<9;            //Toggle pin
    }
    LPC_TIM2->MR2 = value;
    LPC_TIM2->MCR |= 0x0<<6;
    LPC_TIM2->MCR |= 0x0<<7;
    LPC_TIM2->MCR |= 0x0<<8;
    if (interrupt == true) {
        LPC_TIM2->MCR |= 0x1<<6;
    }
    if (reset == true) {
        LPC_TIM2->MCR |= 0x1<<7;
    }
    if (stop == true) {
        LPC_TIM2->MCR |= 0x1<<8;
    }
}

void Timer2::match3(unsigned long value, bool stop, bool interrupt, bool reset, MatchAction action = nothing)
{
    if (action == nothing) {
        LPC_PINCON->PINSEL0 |= (0x0<<18);   //Select pin p0.9 (p5)
        LPC_PINCON->PINSEL0 |= (0x0<<17);   //Select pin p0.9 (p5)
    } else if (action == set0) {
        LPC_PINCON->PINSEL0 |= (0x3<<18);   //Select pin p0.9 (p5)
        LPC_TIM2->EMR |= 0x2<<11;            //Set pin low
    } else if (action == set1) {
        LPC_PINCON->PINSEL0 |= (0x3<<18);   //Select pin p0.9 (p5)
        LPC_TIM2->EMR |= 0x1<<11;            //Set pin high
    } else if (action == toggle) {
        LPC_PINCON->PINSEL0 |= (0x3<<18);   //Select pin p0.9 (p5)
        LPC_TIM2->EMR |= 0x3<<11;            //Toggle pin
    }
    LPC_TIM2->MR3 = value;
    LPC_TIM2->MCR |= 0x0<<9;
    LPC_TIM2->MCR |= 0x0<<10;
    LPC_TIM2->MCR |= 0x0<<11;
    if (interrupt == true) {
        LPC_TIM2->MCR |= 0x1<<9;
    }
    if (reset == true) {
        LPC_TIM2->MCR |= 0x1<<10;
    }
    if (stop == true) {
        LPC_TIM2->MCR |= 0x1<<11;
    }
}

void Timer2::clockReset(unsigned long time, PinName match = p5)
{
    unsigned long t = time * 96.0;
    if (match == p5) {
        match3(t,0,1,1);
    } else if (match == p6) {
        match2(t,0,1,1);
    } else if (match == p7) {
        match1(t,0,1,1);
    } else if (match == p8) {
        match0(t,0,1,1);
    }
}

void Timer2::selectClock(ClockType clock)
{
    if (clock == Clock) {
        LPC_SC->PCLKSEL1 |=0x1<<12; //PCLK_peripheral set to Clock
        LPC_SC->PCLKSEL1 |=0x0<<13;
    } else if (clock == HalfClock) {
        LPC_SC->PCLKSEL1 |=0x0<<12; //PCLK_peripheral set to Clock/2
        LPC_SC->PCLKSEL1 |=0x1<<13;
    } else if (clock == QuarterClock) {
        LPC_SC->PCLKSEL1 |=0x0<<12; //PCLK_peripheral set to Clock/4
        LPC_SC->PCLKSEL1 |=0x0<<13;
    } else if (clock == EighthClock) {
        LPC_SC->PCLKSEL1 |=0x1<<12; //PCLK_peripheral set to Clock/8
        LPC_SC->PCLKSEL1 |=0x1<<13;
    }
}

void Timer2::power(bool on)
{
    if (on == true) {
        LPC_SC->PCONP |=0x1<22; //timer2 power on
    } else {
        LPC_SC->PCONP |=0x0<22; //timer2 power off}
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:55:30.700

您的 Timer2 构造函数有一个 rogue `:`，当您有初始化列表时（即调用基类构造函数或设置类成员的值时）使用它。由于列表中没有标识符，因此您会收到错误消息。删除冒号，它应该可以工作。

# database - 什么数据库在写入磁盘时真的很快？

> ID：15097955
> 
> 赞同：1
> 
> 时间：2013-02-26T19:48:35.107
> 
> 标签：database, sqlite, database-design, kyotocabinet, hamsterdb

我正在开发一种生物学软件，该软件会生成数百万个长度通常大于 30 个字符的字符串（由核苷酸碱基组成，AGCT）。写成C。

我需要一个数据库以足够快的速度将这些数据存储在磁盘上，以免造成整个软件变慢的瓶颈，并且不会消耗过多的 RAM。此外，我需要它在我的应用程序中完全链接。我不想强迫我的用户安装 SQL 服务器或类似的东西。

我已经尝试过 hamsterDB、SQLite、Kyoto Cabinet 和 MapDB，但都没有成功。问题是我需要至少以大约 50k 操作/秒的速度从数据库中插入或更新数据。通过一些优化，我让 SQLite 变得更快。它达到 18k 操作/秒（它使用同步关闭、journal_mode 关闭、事务、ignore_check_constraints 开启、cache_size 为 500.000 和预编译语句）。

每个序列被分类为 A 或 B，我需要知道每种序列有多少。现在我正在使用序列作为键，并为 A 类型添加一个计数器，为 B 类型添加另一个计数器。在 SQLite 数据库上，我使用如下列和命令：

```
INSERT OR REPLACE INTO events (main_seq,qnt_A,qnt_B) VALUES (@SEQ,COALESCE((SELECT qnt_A FROM events WHERE main_seq=@SEQ)+1,1),(SELECT qnt_B FROM events WHERE main_seq=@SEQ)) 
```

这比简单的 INSERT INTO 慢，但如果 seq 已经存在于 DB 上，我只需要增加其中一列。

使用京都内阁我得到了非常高的速度，但它只支持字符串记录，我需要添加和更新整数来计算我有多少 A 和 B。

有谁知道另一个可以满足我对写入速度和记录灵活性的需求的好数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:01:03.347

[这份 BerkeleyDB 白皮书](http://www.oracle.com/technetwork/products/berkeleydb/learnmore/bdbvssqlite-wp-186779.pdf)说，理论上的限制是每秒 70,000 个事务。实际性能会低得多，并且它们的理论限制是基于一些假设，这些假设不适用于您的情况。但他们仍然声称 BerkeleyDB 比 SQLite 快得多。

> 如果您认为单个 BDB 写入器测量的吞吐量约为 700 TPS，那么理论上的限制将是 70,000 TPS，同时有 100 个非冲突的并发执行线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-14T11:00:04.547

以下[基准](http://symas.com/mdb/microbench/#sec4)

查找[OpenLDAP MDB](http://www.openldap.org/doc/admin24/backends.html)

以适应提交的案例，特别是对于[大型随机写入](http://symas.com/mdb/microbench/#sec4)

数据库。**13,215**个条目/秒
京都 TreeDB 。5,860 个条目/秒
LevelDB 。3,138 个条目/秒
SQLite3 。2,068 个条目/秒
BerkeleyDB 。1,952 个条目/秒

# javascript - 在 AngularJS 控制器之间共享数据，但共享数据来自 Ajax 调用

> ID：15097961
> 
> 赞同：11
> 
> 时间：2013-02-26T19:49:00.337
> 
> 标签：javascript, angularjs

在下面的人为示例中，我已经弄清楚了如何使用共享服务在两个 AngularJS 控制器之间共享数据：

（功能[小提琴](http://jsfiddle.net/antelopelovefan/pPKzW/1/)）

```
var app = angular.module('myApp', []);

app.factory('UserData', function() {
    var data = {foo: 'bar'};

    return {
        getData: function() {
            console.log('getData');
            return data;
        },
        setData: function(newData) {
            data = newData;
        }
    };
});

function MainCtrl($scope, UserData) {
    console.log('MainCtrl');
    console.log(UserData.getData());
}
MainCtrl.$inject = ['$scope', 'UserData'];

function JobListCtrl($scope, UserData) {
    console.log('JobListCtrl');
    console.log(UserData.getData());
}
JobListCtrl.$inject = ['$scope', 'UserData']; 
```

我的问题是我希望保存的数据`UserData`来自 Ajax 调用（大概使用`$http`）。

`UserData`我尝试在工厂函数中进行 Ajax 调用，但是因为它是异步运行的，`MainCtrl`并且在服务中实际包含任何数据`JobListCtrl`之前执行。`UserData`

有人可以给我一些关于如何设置的指导吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-25T01:49:42.083

我创建了这个示例，展示了如何在不同控制器之间**获取、存储和共享数据（模型），而不会丢失其可绑定功能。**

**现场示例： http:** [//pablodenadai.github.io/SharingModelsAngularJS/](http://pablodenadai.github.io/SharingModelsAngularJS/)

**源代码1：（**资源和模型抽象）[https://github.com/pablodenadai/SharingModelsAngularJS/blob/master/app/scripts/controllers/main.js](https://github.com/pablodenadai/SharingModelsAngularJS/blob/master/app/scripts/controllers/main.js)

**回购：** [https ://github.com/pablodenadai/SharingModelsAngularJS](https://github.com/pablodenadai/SharingModelsAngularJS)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T20:06:04.143

以下是一些可以帮助您的起点：

1.  如何从服务器获取数据（以及如何构建基本的“模型”服务）：[SO post](https://stackoverflow.com/questions/11850025/recommended-way-of-getting-data-from-the-server)

2.  如何在从服务器获取数据之前保持控制器执行：[来自 egghead.io 的截屏视频](http://egghead.io/video/angularjs-resolve)

# netty - 意外消息类型：DefaultHttpRequest，在 HttpClientCodec 管道上

> ID：15097966
> 
> 赞同：2
> 
> 时间：2013-02-26T19:49:10.420
> 
> 标签：netty

频道上的一秒钟`.write`，导致异常

> “io.netty.handler.codec.CodecException：java.lang.IllegalStateException：意外消息类型：DefaultHttpRequest”。

考虑到管道只有在上面，我摸不着头脑应该做些什么不同的`HttpClientCodec`事情。通过从[Github](https://github.com/cloudaloe/pipe)克隆并运行运行客户端和服务器端的 main 来重现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:59:26.920

你必须写一个`DefaultFullHttpResponse`. `DefaultHttpResponse`缺乏内容和`HttpContent`必须`LastHttpContent`遵循。我同意这确实令人困惑。

# scala - 如何从 typesafe config 配置系统属性或 logback 配置变量？

> ID：15097967
> 
> 赞同：17
> 
> 时间：2013-02-26T19:49:12.710
> 
> 标签：scala, configuration, akka, logback, typesafe-stack

我的`logback.xml`配置文件中有默认变量，我希望能够从我的类型安全配置`application.conf`文件中选择设置这些变量。

我正在使用 one-jar 部署应用程序，并且`application.conf`打包在可部署 jar 中的文件包含默认值。我传递`-Dconfig.file=foo.conf`执行以提供特定于服务器的配置文件的路径。

现在我还可以传递`-Dlog.level`和其他变量来覆盖我的默认值`logback.xml`，而且我还必须`-Dfile.encoding=UTF-8`在命令行上传递。我正在寻找一种能够在类型安全配置中而不是在命令行中指定这些属性的方法。感觉应该有办法做到这一点，但我找不到神奇的词。

**logback.xml：**

```
<configuration>
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${log.path:-logs/}/${log.file:-myLog.log}</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <!-- daily rollover -->
            <fileNamePattern>logFile.%d{yyyy-MM-dd}.log</fileNamePattern>

            <!-- keep 15 days' worth of history -->
            <maxHistory>${log.history.days:-15}</maxHistory>
        </rollingPolicy>

        <encoder>
            <pattern>%-4relative [%thread] %-5level %logger{35} - %msg%n</pattern>
        </encoder>
    </appender>

    <root level="${log.level:-INFO}">
        <appender-ref ref="FILE" />
    </root>
</configuration> 
```

**application.conf（捆绑）：**

```
akka {
    log-config-on-start = false
    event-handlers = ["akka.event.slf4j.Slf4jEventHandler"]
} 
```

**示例服务器特定的 app.conf：**

```
include "/application.conf"

akka.log-config-on-start = true

log.level = WARN // this is what I'd LIKE to be able to do 
```

**我目前如何运行该应用程序：**

```
java -Dfile.encoding=UTF-8 -Dconfig.file=myApp.conf -Dlog.level=WARN -jar myApp_2.10-0.1-one-jar.jar 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-19T14:22:13.777

你可以使用[logback 提供](http://logback.qos.ch/manual/configuration.html#definingPropsOnTheFly)`PropertyDefiner`的接口。非平凡的脚手架，但允许您使用 XML 而不是在应用程序中进行配置。例如：

```
package com.myapp;

import ch.qos.logback.core.PropertyDefinerBase;
import com.typesafe.config.ConfigFactory;

public class TypesafeConfigPropertyDefiner extends PropertyDefinerBase {

    private String propertyName;

    @Override
    public String getPropertyValue() {
        return ConfigFactory.load().getString( propertyName );
    }

    public void setPropertyName( String propertyName ) {
        this.propertyName = propertyName;
    }
} 
```

然后，在您的 logback.xml 文件中：

```
<configuration>
    <define name="loglevel" class="com.myapp.TypesafeConfigPropertyDefiner">
        <propertyName>myapp.logging.loglevel</propertyName>
    </define>
    <root level="${loglevel}">
       ...
    </root>
</configuration> 
```

现在，上面的 logback.xml 文件`myapp.logging.loglevel`将从您的类型安全配置文件中读取（例如`application.conf`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-04T06:47:06.007

我选择以编程方式配置具有类型安全配置的 logback。结果很容易。

```
def enableRemoteLogging(config: Config) = {
    val ctx = LoggerFactory.getILoggerFactory.asInstanceOf[LoggerContext]

    val gelf = new GelfAppender
    gelf.setGraylog2ServerHost(config.getString("logging.remote.server"))
    gelf.setUseLoggerName(true)
    gelf.setUseThreadName(true)
    gelf.setUseMarker(true)
    gelf.setIncludeFullMDC(true)
    gelf.setContext(ctx)
    gelf.start()

    LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME)
      .asInstanceOf[ch.qos.logback.classic.Logger]
      .addAppender(gelf)
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T21:38:43.263

我不熟悉 Logback，但一个普通的 Akka 应用程序在`reference.conf`其`application.conf`. 听起来你想添加*第三*层配置，这当然是你的权利！

我能看到的最简单的方法是更改​​您的内容`application.conf`以包含您的内容`foo.conf`，而不是相反。这样，Akka 将加载`application.conf`，然后加载`foo.conf`.

但是，如果您需要为每个 JAR 发行版使用不同名称的 conf 文件，这可能不起作用。在这种情况下，我建议您查看[Merging Config Trees](https://github.com/typesafehub/config#merging-config-trees)以编程方式加载和组合配置。实际上，从 Akka 配置文档中[的自定义位置读取配置](http://doc.akka.io/docs/akka/2.1.0/general/configuration.html#Reading_configuration_from_a_custom_location) 几乎正是您想要的，除了您希望`myConfig`从类路径资源加载而不是通过解析字符串（请参阅 Typesafe 配置文档以了解如何做到这一点） .

关于 Logback 配置，就像我说的，我不知道 Logback。[但是您可以像这样](https://github.com/typesafehub/config#api-example)从 Typesafe 配置中读取值，并且可以像[这样](https://stackoverflow.com/a/3838108/49630)设置 Logback 根记录器级别。

# jquery - 如何将我的脚本包装成一个函数？专业的方法？

> ID：15097969
> 
> 赞同：0
> 
> 时间：2013-02-26T19:49:21.320
> 
> 标签：jquery

现在我正在编写一些培训代码。试图编写一个半固定的页面元素。这是我现在的结果：

```
$(document).ready(function () {
    var elementPosition = $("#header").offset();
    var elementHeight = $("#header").outerHeight();
    $("#header").before("<div id='placeholder' style='display:none; height:" + elementHeight + "px'></div>");
    $(window).scroll(function () {
        checkAttached("#header");
    });

    function checkAttached(element) {
        var windowDepth = $(window).scrollTop();
        if (windowDepth >= elementPosition.top) {
            $(element).addClass("attached");
            $("#placeholder").css("display", "block");
        } else {
            $(element).removeClass("attached");
            $("#placeholder").css("display", "none");
        };
    };
}); 
```

[http://jsfiddle.net/9xM3W/](http://jsfiddle.net/9xM3W/)

问题是，我对解决方案不太满意。我希望它更灵活一点。我的目标是一个允许处理各种页面元素的独立函数。像这样的东西：

```
attachThis(element); 
```

现在我遇到了滚动事件的问题。我不能在函数中包含这个，可以吗？此外，我不知道不覆盖“elementPosition”的好解决方案。我目前的解决方案是在函数之外定义它。不是很干净。

当然我不指望你能提供更好的剧本，但也许你可以把我推向正确的方向并为我指出一个合适的技术？我很想知道专业人士将如何处理这项任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:55:57.197

[只需将您的代码放入函数](http://jsfiddle.net/9tNqG/)中，替换`#header`为`element`. 您的代码中没有任何内容位于全局范围内，因此这样做没有问题：

```
function attach(element){
    var el = $(element),
        elementPosition = el.offset(),
        elementHeight = el.outerHeight(),
        placeholder = $("<div style='display:none; height:" + elementHeight + "px'></div>");

    el.before(placeholder);
    $(window).scroll(function () {
        checkAttached(el);
    });

    function checkAttached(element) {
        var windowDepth = $(window).scrollTop();
        if (windowDepth >= elementPosition.top) {
            $(element).addClass("attached");
            placeholder.css("display", "block");
        } else {
            $(element).removeClass("attached");
            placeholder.css("display", "none");
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:02:03.043

你可以定义一个jquery方法

```
jQuery.fn.fix = (function($){
                    return function(){
                        var selection = this,
                            elementPosition = selection.offset(),
                            elementHeight = selection.outerHeight();
                        selection.before("<div id='placeholder" + 
                                              selection.attr('id') + 
                                           "' style='display:none;    height:"+elementHeight+"px'></div>");
                        $(window).scroll(function(){
                            var windowDepth = $(window).scrollTop();
                            if (windowDepth>=elementPosition.top) {
                      selection.addClass("attached");
                              $("#placeholder").css("display", "block");
                            } else {
                              selection.removeClass("attached");
                              $("#placeholder").css("display", "none");
                         };
                      });
                    return this;
                    };
                }(jQuery)); 
```

然后像这样使用它

```
$(function(){
    $("#header").fix();
}) 
```

# c - 常量字符 * 名称与常量字符 * 名称

> ID：15097970
> 
> 赞同：1
> 
> 时间：2013-02-26T19:49:22.163
> 
> 标签：c

有没有区别

```
const char* name = "name"; 
```

和

```
const char *name = "name"; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T19:50:35.953

不。

但是两者之间是有区别的

```
const char* name = "hello", something = "else"; 
```

这不起作用，而

```
const char *name = "hello", *something = "else"; 
```

应该

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:50:00.400

不，没有区别，两个声明是等价的。

请注意，C 风格倾向于以这种方式声明指针对象：

```
T *a; 
```

而 C++ 风格倾向于以这种方式声明指针对象：

```
T* a; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T22:33:13.023

两者都被解析为`const char (*name) = "name";`-`*`绑定到声明符，而不是类型说明符。

C 和 C++ 中的声明基于*表达式*的类型，而不是对象。如果你有一个指向某种类型的指针`T`，并且你想访问被指向的值，你可以尊重指针：

```
x = *p; 
```

*表达式* 的类型`*p`是`T`，所以指针的声明是

```
T *p; 
```

在您的情况下，`name`指向一个`char`以字符串文字开头的值。如果我们想得到字符值`'n'`，我们会写类似

```
const char start = *name; // assigns 'n' to start 
```

因此，*表达式* `*name`的类型是`const char`，所以我们通常编写声明

```
const char *name; 
```

由于 C 声明语法的工作原理，`*`标记周围的空格无关紧要。你可以把它写成

```
const char *name;
const char* name;
const       char          *                            name; 
```

或其他一些组合。我和许多其他人更喜欢第一种形式，因为它准确地反映了声明语法。有些人更喜欢第二种形式，尽管它对语法的看法有点误导，因为它强调`name`.

任何声称喜欢第三种形式的人要么是拖钓，要么是疯了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T19:52:43.490

这主要是一个品味问题。

我个人使用`const char* name`是因为我想明确指出类型是指针（a `char*`），但很多人认为更正确的是使用`const char *name`来表明它`*name`是指针（类型`char`）

# r - 计算 R 中列表的出现次数

> ID：15097971
> 
> 赞同：4
> 
> 时间：2013-02-26T19:49:33.270
> 
> 标签：r, count, group-by

我有一个列表，其中包含大约 100,000 次一起订购的项目，我已将它们粘贴到一列中，这样我就可以计算每个组合出现的次数。

```
4845   Curly Fries California Burger   1
4846   French Fries California Burger  1
4847   Hamburger California Burger     1
4848   $1 Fountain Drinks Curly Fries  1
4849   $1 Fountain Drinks Curly Fries  1
4850   California Burger Curly Fries   1
4851   Curly Fries Curly Fries         1 
```

我探索了聚合函数，它给了我以下错误：

```
aggregate(t1$count,list(t1$pc), sum) <br>
Error in sort.list(y) : 'x' must be atomic for 'sort.list'
Have you called 'sort' on a list? <br> 
```

我也尝试过 ddply 的变体：

```
ddply(t1,t1$pc,transform,occurances=sum(t1$count)) 
```

但我得到这个错误

```
Error in UseMethod("as.quoted") : 
no applicable method for 'as.quoted' applied to an object of class "c('matrix', 'list')" 
```

我假设我得到了这个，因为我试图基本上按字符值“分组”。我也探索`tapply`并`recast`基于类似问题的答案，但无济于事。

我怎样才能得到这个组合计数？

供考虑，单独列出的项目示例（再次为格式问题道歉）：

```
 Var1                     Var2 Var3
>2               Onion Rings              Onion Rings    1
>3  Pineapple Cheddar Burger              Onion Rings    1
>4               Onion Rings Pineapple Cheddar Burger    1
>5  Pineapple Cheddar Burger Pineapple Cheddar Burger    1
>5              Onion Rings              Onion Rings     1
>6  Pineapple Cheddar Burger              Onion Rings    1
>7               Onion Rings Pineapple Cheddar Burger    1
>8  Pineapple Cheddar Burger Pineapple Cheddar Burger    1
>9             Fountain Soda            Fountain Soda    1
>10             French Fries            Fountain Soda    1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:54:28.697

该`table()`功能在这里很有帮助：

```
with(t1, table(pc)) ## or equivalently table(t1$pc) 
```

这假设`pc`是您要计算其出现次数的因子变量。（如果它不是一个因素，它将被强制为一个因素。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:26:50.973

您最初的方法非常接近我认为您想要的方法。将它们组合成一个因素肯定会奏效，前提是您以相同的顺序组合它们，这样您就不会得到“薯条，汉堡”和“汉堡，薯条”。

可能有一种更简单的方法可以做你想做的事，但我没有想到那是什么。不过，我认为这可以满足您的需求：

```
# Let's assume your data looks like this:
> df
                       Var1                      Var2 Var3
1               Onion Rings               Onion Rings    1
2  Pineapple Cheddar Burger               Onion Rings    1
3               Onion Rings  Pineapple Cheddar Burger    1
4  Pineapple Cheddar Burger  Pineapple Cheddar Burger    1
5               Onion Rings               Onion Rings    1
6  Pineapple Cheddar Burger               Onion Rings    1
7               Onion Rings  Pineapple Cheddar Burger    1
8  Pineapple Cheddar Burger  Pineapple Cheddar Burger    1
9             Fountain Soda             Fountain Soda    1
10             French Fries             Fountain Soda    1

# Now, for each row
#     1\. sort the Var1 and Var2,
#     2\. combine the sorted vars, and
#     3\. convert them back into a factor

df$sortcomb <- as.factor(apply(df[,1:2], 1, function(x) paste(sort(x), collapse=", ")))

table(df$sortcomb) # then use table as per normal

ddply(df, .(sortcomb), summarize, count=length(sortcomb)) # or ddply 
```

# mysql - 即使没有值更改，mysql current_timestamp 列也会更新

> ID：15097978
> 
> 赞同：0
> 
> 时间：2013-02-26T19:49:54.497
> 
> 标签：mysql, timestamp, sql-update

我有一张通过导入长 CSV 电子表格定期更新的剧集表。通常，大多数记录保持不变，但无论如何它们都包含在 CSV 中。为了检测实际更新了哪些行，我在更新 CURRENT_TIMESTAMP 列“mtime”上添加了一个 TIMESTAMP 默认 CURRENT_TIMESTAMP。

不幸的是，每次导入的每一行的每一行的时间戳值都会被重置，即使它的值实际上都没有改变。

实际表的列多于 CSV 文件中包含的列，因此包含在 UPDATE 查询中。下面是表格布局和通过导入 CSV 文件触发的示例 UPDATE 查询。任何人都可以确定什么可能会触发 TIMESTAMP 列重置，即使这些值都没有不同？非常感谢！

```
+---------------+-----------------------+------+-----+---------------------+-----------------------------+
| Field         | Type                  | Null | Key | Default             | Extra                       |
+---------------+-----------------------+------+-----+---------------------+-----------------------------+
| id            | mediumint(7) unsigned | NO   | PRI | NULL                | auto_increment              |
| ctime         | timestamp             | NO   |     | 0000-00-00 00:00:00 |                             |
| mtime         | timestamp             | NO   |     | CURRENT_TIMESTAMP   | on update CURRENT_TIMESTAMP |
| network_id    | mediumint(7) unsigned | NO   | MUL | 0                   |                             |
| series_id     | mediumint(6) unsigned | NO   | MUL | NULL                |                             |
| season_id     | mediumint(7) unsigned | NO   | MUL | NULL                |                             |
| num           | mediumint(7) unsigned | NO   |     | NULL                |                             |
| title         | varchar(150)          | NO   |     | NULL                |                             |
| isactive      | tinyint(1)            | NO   | MUL | 1                   |                             |
| istve         | tinyint(1)            | NO   |     | 0                   |                             |
| isest         | tinyint(1)            | NO   |     | 0                   |                             |
| ismob         | tinyint(1)            | NO   |     | 0                   |                             |
| isvod         | tinyint(1)            | NO   |     | 0                   |                             |
| tve_start     | date                  | NO   |     | 0000-00-00          |                             |
| est_start     | date                  | NO   |     | 0000-00-00          |                             |
| mob_start     | date                  | NO   |     | 0000-00-00          |                             |
| vod_start     | date                  | NO   |     | 0000-00-00          |                             |
| tve_end       | date                  | NO   |     | 0000-00-00          |                             |
| est_end       | date                  | NO   |     | 0000-00-00          |                             |
| mob_end       | date                  | NO   |     | 0000-00-00          |                             |
| vod_end       | date                  | NO   |     | 0000-00-00          |                             |
| fposter       | varchar(150)          | NO   |     |                     |                             |
| iswebisode    | tinyint(1)            | NO   |     | 0                   |                             |
| date_air      | date                  | NO   |     | 0000-00-00          |                             |
| roll_start    | date                  | NO   |     | 0000-00-00          |                             |
| roll_end      | date                  | NO   |     | 0000-00-00          |                             |
| season_start  | date                  | NO   |     | 0000-00-00          |                             |
| season_end    | date                  | NO   |     | 0000-00-00          |                             |
| premier_start | date                  | NO   |     | 0000-00-00          |                             |
| premier_end   | date                  | NO   |     | 0000-00-00          |                             |
| iscore        | tinyint(1)            | NO   |     | 1                   |                             |
| note          | varchar(150)          | NO   |     |                     |                             |
| tvn_filename  | varchar(150)          | NO   |     |                     |                             |
| tve_filename  | varchar(150)          | NO   |     |                     |                             |
| repeat_start  | date                  | NO   |     | 0000-00-00          |                             |
| repeat_end    | date                  | NO   |     | 0000-00-00          |                             |
| hasedited     | tinyint(1)            | NO   |     | 1                   |                             |
| import_key    | char(32)              | NO   |     |                     |                             |
+---------------+-----------------------+------+-----+---------------------+-----------------------------+

UPDATE `episode` SET  `network_id`='25', `series_id`='321', `season_id`='6887', `num`='10', `title`='EPISODE 810', `isvod`='1', `vod_start`='2011-09-05', `vod_end`='2011-10-31', `ismob`='1', `mob_start`='2011-09-05', `isest`='1', `est_start`='2011-09-05', `note`='', `date_air`='2011-09-04', `roll_start`='0000-00-00', `roll_end`='0000-00-00', `premier_start`='2011-09-04', `premier_end`='2011-10-09', `tvn_filename`='', `tve_filename`=''   WHERE `id`='2821'

CREATE TABLE IF NOT EXISTS `episode` (
  `id` mediumint(7) unsigned NOT NULL AUTO_INCREMENT,
  `ctime` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `mtime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `network_id` mediumint(7) unsigned NOT NULL DEFAULT '0',
  `series_id` mediumint(6) unsigned NOT NULL,
  `season_id` mediumint(7) unsigned NOT NULL,
  `num` mediumint(7) unsigned NOT NULL,
  `title` varchar(150) COLLATE latin1_general_ci NOT NULL,
  `isactive` tinyint(1) NOT NULL DEFAULT '1',
  `istve` tinyint(1) NOT NULL DEFAULT '0',
  `isest` tinyint(1) NOT NULL DEFAULT '0',
  `ismob` tinyint(1) NOT NULL DEFAULT '0',
  `isvod` tinyint(1) NOT NULL DEFAULT '0',
  `tve_start` date NOT NULL DEFAULT '0000-00-00',
  `est_start` date NOT NULL DEFAULT '0000-00-00',
  `mob_start` date NOT NULL DEFAULT '0000-00-00',
  `vod_start` date NOT NULL DEFAULT '0000-00-00',
  `tve_end` date NOT NULL DEFAULT '0000-00-00',
  `est_end` date NOT NULL DEFAULT '0000-00-00',
  `mob_end` date NOT NULL DEFAULT '0000-00-00',
  `vod_end` date NOT NULL DEFAULT '0000-00-00',
  `fposter` varchar(150) COLLATE latin1_general_ci NOT NULL DEFAULT '',
  `iswebisode` tinyint(1) NOT NULL DEFAULT '0',
  `date_air` date NOT NULL DEFAULT '0000-00-00',
  `roll_start` date NOT NULL DEFAULT '0000-00-00',
  `roll_end` date NOT NULL DEFAULT '0000-00-00',
  `season_start` date NOT NULL DEFAULT '0000-00-00',
  `season_end` date NOT NULL DEFAULT '0000-00-00',
  `premier_start` date NOT NULL DEFAULT '0000-00-00',
  `premier_end` date NOT NULL DEFAULT '0000-00-00',
  `iscore` tinyint(1) NOT NULL DEFAULT '1',
  `note` varchar(150) COLLATE latin1_general_ci NOT NULL DEFAULT '',
  `tvn_filename` varchar(150) COLLATE latin1_general_ci NOT NULL DEFAULT '',
  `tve_filename` varchar(150) COLLATE latin1_general_ci NOT NULL DEFAULT '',
  `repeat_start` date NOT NULL DEFAULT '0000-00-00',
  `repeat_end` date NOT NULL DEFAULT '0000-00-00',
  `hasedited` tinyint(1) NOT NULL DEFAULT '1',
  `import_key` char(32) COLLATE latin1_general_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `season_id` (`season_id`),
  KEY `idx_series` (`isactive`,`season_id`),
  KEY `idx_master_cron` (`isactive`,`hasedited`),
  KEY `network_id` (`network_id`),
  KEY `series_id` (`series_id`),
  KEY `season_id_2` (`season_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-01T05:56:36.357

这是预期的行为。MySQL 文档中没有任何内容表明更新仅在提供新值时发生，并因此触发 ON UPDATE 处理程序。

您没有说明您的导入方法是什么，因此这可能不适用。您确实显示了由您的工具生成的更新语句。如果您对它有任何控制权，或者可以选择自己编写：通过在 where 子句中添加更多检查来进行可选更新：

```
UPDATE `episode` SET  `network_id`='25', `series_id`='321', ... 
 WHERE `id`='2821' AND `network_id`<>'25' AND `series_id`<>'321' ... 
```

这样，如果值相同，WHERE 子句将与现有行不匹配，不会发生更新，也不会触发 ON UPDATE 时间戳。

# c# - 使用 MVC 4 和 C# 从 sql 数据库动态加载数据束

> ID：15097981
> 
> 赞同：0
> 
> 时间：2013-02-26T19:50:01.800
> 
> 标签：c#, sql-server-2008, asp.net-mvc-4, entity-framework-5

我希望能够从数据库中加载 20 个视频，然后当用户单击标题为“显示更多”的按钮时，另外 20 个结果会加载到 div 中。

我怎么能这样做？我会用 AJAX 来做，但我不确定我将如何获得接下来的 20 个结果......

一个例子是谷歌图片——你搜索一张图片，在页面底部，你有一个“更多”按钮。**色情**网站通常有类似的东西。

有任何想法吗？

我正在使用 MVC 4、.Net 4.5、Entity Framework 5、C# 和 Razor 视图引擎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:01:27.933

基本上，您正在尝试创建页面，但使用不同的 UI 将第二页加载到当前页面而不是切换到下一页：

有关分页相关问题，请参阅此答案，现在只需进行 ajax 调用即可获取所需页面并将其加载到当前页面..

[如何在 ASP.NET MVC 中进行分页？](https://stackoverflow.com/questions/446196/how-do-i-do-pagination-in-asp-net-mvc)

代替：

```
<%=Html.ActionLink("next page", "Search", new {
                query, startIndex = startIndex + pageSize, pageSize }) %> 
```

你可以这样做：

```
 <%= Ajax.ActionLink("next page", "Search", 
         new { query, startIndex = startIndex + pageSize, pageSize },            
         new AjaxOptions {UpdateTargetId = "VideoContainer", InsertionMode = InsertionMode.InsertAfter})
         %> 
```

# javascript - 我应该使用什么选择器将元素添加到带有 jquery 的 iframe 正文中？

> ID：15097986
> 
> 赞同：1
> 
> 时间：2013-02-26T19:50:09.370
> 
> 标签：javascript, jquery, css

我正在尝试使用 jquery 将元素添加到 iframe 的正文中。

```
$('iframe body').prepend('<div id="shader" />'); 
```

它不起作用。这似乎与选择器有关？

# c# - 使用 spotify API 制作应用程序？

> ID：15097999
> 
> 赞同：1
> 
> 时间：2013-02-26T19:50:36.737
> 
> 标签：c#, api, spotify

我想开始使用 spotify API 制作一个简单的程序，比如在文本框中显示当前歌曲之类的简单程序。我应该从哪里开始这样做？这里有教程吗？我打算用 C# 编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:17:45.587

发行版中包含几个示例文件，旨在帮助您轻松入门。

[你可以在这里](http://developer.spotify.com/technologies/libspotify/)下载它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-08T02:21:35.210

我想说从为 Spotify 找到一个好的 C# 包装器开始，在 github 上有很多。这将通过避免手动进行 HTTP 调用和解析 JSON 来节省您的时间。

我刚刚完成了一个用于 Spotify 的小型 Rails 应用程序并使用了 rspotify gem，我知道它不在 C# 中，但它会让你大致了解我在说什么。