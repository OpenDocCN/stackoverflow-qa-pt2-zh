# StackOverflow 问答 14512000-14512999

# mysql - 如何显示mysql中不存在的记录？

> ID：14512002
> 
> 赞同：0
> 
> 时间：2013-01-24T22:29:12.073
> 
> 标签：mysql

如果我执行以下查询：
`select * from tabla where codigo in (33,34,55,10,22,50);`
msyql 向我显示与查询匹配的记录。

但是如果我想知道这个查询（33、34、55、10、22、50）中有哪些不在数据库中的记录呢？
有没有办法知道这一点而不必自己比较一条记录？

对不起，我解释得不好。这向我显示了数据库中但与查询不匹配的记录。我想知道哪些记录（33、34、55、10、22、50）不在数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:30:24.673

使用[不](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_not-in)：

```
select * from tabla where codigo NOT in (33,34,55,10,22,50); 
```

**更新**

根据这个新的解释，这样做：

```
SELECT n.id
FROM
  (SELECT 33 AS codigo
   UNION SELECT 34
   UNION SELECT 55 
   UNION SELECT 10
   UNION SELECT 22 
   UNION SELECT 50) AS n
LEFT JOIN tabla USING (codigo)
WHERE tabla.codigo IS NULL; 
```

不幸的是，MySQL（和许多其他系统）没有提供一种简单的方法来使用某个表中还没有的任意数字列表。如果您需要动态执行此操作，我建议将这些数字添加到临时表中，以代替硬编码的一批 UNION。或者生成一个可重复使用的数字表（我觉得这很有用），并使用那里的值。例如：

```
SELECT nt.id
FROM numbers_table nt
LEFT JOIN tabla ON nt.id = tabla.codigo
WHERE nt.id IN (33,34,55,10,22,50)
  AND tabla.codigo IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:52:14.180

试试这个

```
set @suggest_value:=10;   // <---10 is the lowest value
select codigo,
@suggest_value:=@suggest_value+1,
if(codigo=@suggest_value, 0, 1) as missing_value
from tabla 
```

# tomcat - tomcat 7 忽略我的 context.xml

> ID：14512008
> 
> 赞同：7
> 
> 时间：2013-01-24T22:29:31.950
> 
> 标签：tomcat, tomcat7, server.xml, context.xml

我希望这是一件愚蠢的事情。但我已经盯着它太久了。

我在 Linux 上升级到 Tomcat 7（从 6），它忽略了我的 context.xml 文件。如果我在 server.xml 中包含上下文（数据源），它工作正常。但我想最终将这些东西从 server.xml 中取出。

我有 Tomcat 7 在 Windows/Eclipse 中运行，具有分离的上下文，它工作正常。

我已经尝试过 Host copyXML 参数。即使它确实复制了 context.xml，它也不会使用它......除非我将它包含在 server.xml 的主机中。当它失败时，它抱怨它无法获取我的 MySQL 连接：“无法获取连接，数据源无效”

我确信配置的其余部分很好，因为当我将它粘贴到 server.xml 中时它可以工作......

有人可以指出我缺少什么吗？不应该这么难。谢谢！

顺便说一句：它是 CentOS 5.9 (64) 上的普通 Tomcat7（不是 rpm）、JDK-7u11。

地点：

```
/var/webapps/shop1
    query.jsp
/var/webapps/shop1/META-INF
    context.xml 
```

在 server.xml 中：

```
<Host name="dev3.domain.net" appBase="/var/webapps" 
    unpackWARs="true" autoDeploy="true">

    <Context docBase="shop1" path="" reloadable="true" />
</Host> 
```

上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
    <Resource name="jdbc/shop1db" auth="Container"
            type="javax.sql.DataSource"
            factory="org.apache.commons.dbcp.BasicDataSourceFactory"
            maxActive="50" maxIdle="25" maxWait="10000"
            username="user" password="pass"
            driverClassName="com.mysql.jdbc.Driver"
            validationQuery="SELECT 1"
            url="jdbc:mysql://localhost/shop1"
            logAbandoned="true" removeAbandoned="true" removeAbandonedTimeout="60"
    />
</Context> 
```

在 web.xml 中：

```
<context-param>
    <param-name>javax.servlet.jsp.jstl.sql.dataSource</param-name>
    <param-value>jdbc/shop1db</param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:58:38.160

这些更改是否有效？...</p>

**1：**在您的`web.xml`代码段中，仅替换`javax.servlet.jsp.jstl.sql.dataSource`为`javax.sql.dataSource`

**2：**将您的`web.xml`代码段（即整个`context-param`部分）完全替换为：

```
<resource-ref>
    <description>DB Connection</description>
    <res-ref-name>jdbc/shop1db</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

3：确保您确实有一个可用于您的 Web 应用程序的 MySQL 连接器（jar？）——例如在`WEB-INF/lib`

希望那里的东西可能会有所帮助......</p>

......鉴于这个问题现在已经有几个月了，如果您在此期间自己解决了这个问题，请在此处评论对您有用的修复程序！:-P

# html - Dart 源文件更改时自动刷新页面

> ID：14512014
> 
> 赞同：5
> 
> 时间：2013-01-24T22:30:09.197
> 
> 标签：html, refresh, dart

每当对源文件进行更改时，如何让 Dartium 自动重新加载您的 Web 客户端应用程序？

相关： [如何让 Firefox 在文件更改时自动刷新？](https://stackoverflow.com/questions/1346716/firefox-auto-refresh-on-file-change)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T22:30:09.197

**编辑：** *您也可以跳过所有这些，只需在编辑器中按**CTRL+R 。**如果您在 Dart 编辑器之外使用工具（但在构建过程中仍然依赖它）或者想要在不将焦点转移到 Dartium 窗口的情况下进行代码和预览，下面的脚本可能仍然有用。*

消除击键并使您的猴子自动化！

每当您对项目进行更改时，此技术使用 dart.build 来“触摸”您的 HTML 文件，然后依靠[LivePage](https://chrome.google.com/webstore/detail/livepage/pilnojpmdoofaelbinaeodfpjheijkbh)扩展在浏览器中刷新它。

1.  启动 Dartium 并安装 LivePage 扩展。（*设置*|*扩展*|*获取更多扩展*|*来自www.fullondesign.co.uk的LivePage* |*添加到chrome*）

2.  运行你的项目。在 Dartium 中查看页面时，单击 LivePage 图标。将出现一个红色的“实时”覆盖。这意味着 LivePage 正在监视 html 文件及其资产（例如 css 文件）的更改。

3.  测试，通过快速更改您的 html 文件并保存它。Dartium 中的页面应该更新。

4.  **在与项目的pubspec.yaml**相同的目录中创建一个**build.dart**文件。只要您在项目中进行更改（例如，当您将更改保存到任何 .dart 文件时），Dart 编辑器就会运行此文件。

***   将下面的代码放在 build.dart 中。更新`'web/yourpage.html'`以指向 LivePage 监视的 HTML 文件。

    *   现在更改您的 .dart 文件之一，保存它，然后观看神奇的展开。** 

 **简而言之：**保存代码 ▶ Dart 编辑器触发 build.dart ▶ 触摸 html 文件 ▶ LivePage 刷新 Dartium**

```
import 'dart:io';

// This number needs to be high enough to prevent the Dart Editor from going
// into an "infinite compile" loop.  If that happens, simply comment out the
// call to touch() below and save this file.
const int MIN_INTERVAL_MS = 5000;
const String HTML_FILE = 'web/yourpage.html';

void main() { 
  build(new Options().arguments, [HTML_FILE]);
  touch(HTML_FILE, new Duration(milliseconds:MIN_INTERVAL_MS));
}

/// Save a small, trivial change to the contents of [filename], unless
/// its already been modified within the last [interval].
void touch(String filename, [Duration interval]) {
  const int SPACE = 32;
  var file = new File(filename);
  if (?interval &&
      new Date.now()
      .difference(file.lastModifiedSync())
      .inMilliseconds < interval.inMilliseconds) return;
  RandomAccessFile f = file.openSync(FileMode.APPEND);
  try {
    // If the file doesn't end with a space, append one, otherwise remove it    
    int length = f.lengthSync();
    f.setPositionSync(length - 1);
    if (f.readByteSync() == SPACE) {
      f.truncateSync(length - 1);
    } else {
      f.writeByteSync(SPACE);
    }
  } finally {
    f.closeSync();
  }
} 
```

如果需要排除故障，可以从命令行运行`dart build.dart`。

该`touch()`函数在文件末尾追加或删除尾随空格。注意 如果您更改的只是修改日期，LivePage 似乎没有做任何事情。

因为 Dart 编辑器一直在监控你的文件，它会获取 build.dart 所做的更改，然后转到“嘿，这个项目刚刚更改”并再次调用 build.dart ......一次又一次......一次又一次。为了避免无限循环，脚本仅在文件陈旧至少`MIN_INTERVAL_MS`.

LivePage 有一个功能，可以在 CSS 和 Javascript 片段发生更改时不显眼地“重新注入”它们，而不会强制刷新整个页面。不幸的是，这里使用的蛮力技术（即覆盖 html 文件）覆盖了该行为。

Dart 人员还提供了一个讨论工具的[web_ui](http://www.dartlang.org/articles/dart-web-components/tools.html)页面，但请注意，您实际上并不需要安装 web_ui 包来使 build.dart 工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T04:33:47.460

根据[kragerer 的](https://stackoverflow.com/users/589059/rkagerer)回答，我已经更新了他的构建脚本以在 Dart 1.0 中工作。感谢您使用有效的（当时）解决方案回答您的问题。

*构建.dart*

```
import 'dart:io';

// This number needs to be high enough to prevent the Dart Editor from going
// into an "infinite compile" loop.  If that happens, simply comment out the
// call to touch() below and save this file.
const int MIN_INTERVAL_MS = 5000;
const String HTML_FILE = 'web/index.html';

void main() {
  touch(HTML_FILE, new Duration(milliseconds:MIN_INTERVAL_MS));
}

/// Save a small, trivial change to the contents of [filename], unless
/// its already been modified within the last [interval].
void touch(String filename, [Duration interval]) {
  const int SPACE = 32;
  var file = new File(filename);
  if (interval != null && new DateTime.now().difference(file.lastModifiedSync()).inMilliseconds < interval.inMilliseconds) return;
  RandomAccessFile f = file.openSync(mode:FileMode.APPEND);
  try {
    // If the file doesn't end with a space, append one, otherwise remove it
    int length = f.lengthSync();
    f.setPositionSync(length - 1);
    if (f.readByteSync() == SPACE) {
      f.truncateSync(length - 1);
    } else {
      f.writeByteSync(SPACE);
    }
  } finally {
    f.closeSync();
  }
} 
```**

# android - 试图让 CountDownTimer 在 15 秒后重新启动。

> ID：14512018
> 
> 赞同：0
> 
> 时间：2013-01-24T22:30:34.757
> 
> 标签：android, restart, countdowntimer

我正在做一个显示各种瑜伽姿势 60 秒的应用程序。我一直在努力让倒数计时器按我想要的方式工作。我需要计时器能够暂停，并在 15 秒后自动重新启动。Android 的 CountDownTimer 不起作用，因为它没有暂停。我尝试了 2 个不同版本的重写 Android CountDownTimer 和经典版本（Android CountDownTimer），它们似乎都有相同的错误，因为它们使用的是处理程序。

我试过这个版本：[http ://www.java2s.com/Open-Source/Android/Timer/multitimer-android/com/cycleindex/multitimer/CountDownTimerWithPause.java.htm](http://www.java2s.com/Open-Source/Android/Timer/multitimer-android/com/cycleindex/multitimer/CountDownTimerWithPause.java.htm)

我试过这个版本：[Android：CountDownTimer 跳过最后一个 onTick()！](https://stackoverflow.com/questions/8857590/android-countdowntimer-skips-last-ontick?rq=1)- 我添加了一个 onFinish 方法。

我正在尝试在 onFinish 方法中执行 Thread.sleep 15 秒，并且在进入 Thread.sleep 模式之前的最后一秒后它不会更新 UI。在以下代码中，直到 Thread.sleep 调用之后，TextView 才会更新为设置为空字符串。

```
cdt = new CountDownTimerWithPause(60000,1000,true) { 
        @Override
        public void onTick(long millisUntiFinished) { 
            tvClock.setText("Remaining:" + millisUntiFinished/1000);

        }

        @Override
        public void onFinish() {
            tvClock.setText("");
            bell.start();
            if (bAutoPlayIsOn) { 

                tvClock.setText("waiting for next pose...");
                try {

                    //15 second pauses between poses
                    Thread.sleep(15000);
                    //start over
                    listener.onForwardItemSelected();
                    ResetClocktoMaxTime(60000);
                    resume();
                } catch (InterruptedException e) {
                    Log.d("Sleep Interrupted", e.toString());
                    e.printStackTrace();
                }
                catch (Exception e) {
                    Log.d("Timer", e.toString());
                }
            }
            else { 
              tvClock.setText("Done");
                       btnStart.setText("Start ");
              bClockIsTicking = false;
              btnStart.setCompoundDrawablesWithIntrinsicBounds(null, playBtn, null, null);
            }

        }
    }; 
```

任何人都知道如何以不同的方式执行此操作（15 秒后重新启动）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:09:22.457

onFinish 方法是从接口线程调用的，因此在 onFinish 返回之前，您所做的任何接口更改实际上都不会重绘。尝试这样的事情：

```
 cdt = new CountDownTimerWithPause(60000,1000,true) {
      @Override
      public void onTick(long millisUntiFinished) {
          tvClock.setText("Remaining:" + millisUntiFinished/1000);

      }

      @Override
      public void onFinish() {
          tvClock.setText("");
          bell.start();
          if (bAutoPlayIsOn) {

              tvClock.setText("waiting for next pose...");
              (
                new Thread() {
                    public void run() {
                        try {
                            //15 second pauses between poses
                            Thread.sleep(15000);
                            getActivity().runOnUiThread
                            (
                              new Runnable() {
                                  public void run() {
                                    //start over
                                    listener.onForwardItemSelected();
                                    ResetClocktoMaxTime(60000);
                                    resume();
                                  }
                              }
                            );
                        }
                        catch (InterruptedException e) {
                            Log.d("Sleep Interrupted", e.toString());
                            e.printStackTrace();
                        }
                        catch (Exception e) {
                            Log.d("Timer", e.toString());
                        }
                    }
                }

              ).start();

          }
          else {
            tvClock.setText("Done");
            btnStart.setText("Start ");
            bClockIsTicking = false;
            btnStart.setCompoundDrawablesWithIntrinsicBounds(null, playBtn, null, null);
          }

      }
  }; 
```

# python - 如何访问和编辑python库配置文件

> ID：14512022
> 
> 赞同：0
> 
> 时间：2013-01-24T22:30:48.483
> 
> 标签：python, amazon-web-services, boto

我正在尝试`boto.cfg`为 AWS python library设置我的 AWS id 和 secret `"boto"`。我已经将它安装在我的mac上`pip install`，但我没有看到它`/etc`

我如何找到并访问它，还是必须创建它？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:45:20.130

安装程序不会为您创建配置文件。您必须手动创建一个。您可以在 /etc/boto.cfg 中创建系统范围的配置文件或在 ~/.boto 中创建个人配置文件。或者您可以在其他地方创建一个并将`BOTO_CONFIG`环境变量指向它。

# html - 用于 PC 和智能手机的时事通讯中的 CSS

> ID：14512024
> 
> 赞同：0
> 
> 时间：2013-01-24T22:30:51.323
> 
> 标签：html, css, newsletter

我正在编写 HTML 时事通讯，我必须编写一个文件，一旦发送它就会检测到设备是智能手机还是 PC。如果 PC 它显示`600px`宽度，对于智能手机它显示`300px`宽度。

那么我应该如何设置 width 属性，使它看起来像上面提到的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:51:40.160

您正在寻找[CSS Media Queries](https://www.google.com/search?q=CSS%20Media%20Queries)，这是一个可能适合您需求的基本解决方案：

```
/* ALL (Fallback), this will be used by browsers that don't support CSS Media Queries  */ 
#container{width:300px;}

/* Screen more than 600px in width */
@media only screen and (min-width: 600px){
    #container{width:600px;}
}

/* Screen less than 600px in width */
@media only screen and (max-width: 599px) {
    #container{width:300px;}
} 
```

更多示例：[https ://github.com/dhgamache/Skeleton/blob/master/stylesheets/skeleton.css#L79](https://github.com/dhgamache/Skeleton/blob/master/stylesheets/skeleton.css#L79)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:24:21.640

使用 width % 是非常糟糕的做法，因为如果页面中有图像，在大多数浏览器中这些都不会受到影响。目前还没有合适的方法为移动设备和计算机编写 EDM。电子邮件客户端和 Web 服务无法满足这一要求。

在我看来，如果你想让这两种设备都对用户友好，那么你应该创建类似于 Windows 8 界面的内容字段，这样它在计算机上仍然看起来不错，在移动设备上看起来也不错.

那么让我们来看看哪些移动设备支持媒体查询。在这个领域，这是一个巨大的打击和错过。

**支持：**
Android Mail（非常错误）、Iphone 邮件和 Ipad 邮件（>=320px <= 480px）。

这确实带来了许多元素仍然无法正确显示的风险，因为它仍然相对较新。

**不支持** Android Gmail、Iphone Gmail、Ipad Gmail 和 Blackberry 8000

对于 EDM 来说，唯一真正的选择是让它们保持静态，这意味着你永远不应该尝试让它变得流畅。EDM 基本上在其中包含一定数量的信息，然后图像会被发送，因此不需要宽度/高度是流动的。这样做只会在另一个浏览器或电子邮件客户端中运行一些东西。

# mysql - MySQL加载数据infile真的很慢/永无止境

> ID：14512027
> 
> 赞同：0
> 
> 时间：2013-01-24T22:31:00.397
> 
> 标签：mysql, ruby-on-rails, ruby

我正在使用的应用程序有问题。该应用程序允许用户上传由应用程序处理的 CSV 文件，然后将记录创建到多个表中。为了提高性能，对于其中一个表，它会生成一个新的 CSV 文件以使用 mysql`LOAD DATA INFILE`功能。

相反，它似乎增加了处理所需的时间。我正在使用`sidekiq`. 似乎创建 CSV 没有任何问题，但是当我执行`load data`查询时，它就坐在那里，我不知道它在做什么。

我的处理功能执行以下操作：

```
CSV.open(output_path, 'w+', { force_quotes: true }) do |writer|
    writer << headers

    while rows.count > 0
      ....
      data_sets.each do |ds|
        writer << [UUIDTools::UUID.random_create, resp, row[set], ds.id, now, now]
        set += 1
      end
      resp += 1
    end
end

sql = "LOAD DATA LOCAL INFILE '#{output_path}'
       INTO TABLE data_set_responses
       FIELDS TERMINATED BY ',' ENCLOSED BY '\"'
       LINES TERMINATED BY '\n'
       (id, response_number, response, data_set_id, created_at, updated_at)"

con = ActiveRecord::Base.connection
con.execute("SET autocommit = 0;")
con.execute("SET unique_checks = 0;")
con.execute("SET foreign_key_checks = 0;")
con.execute("LOCK TABLES data_set_responses WRITE;")
con.execute(sql)
con.execute("UNLOCK TABLES;")
con.execute("COMMIT;")
con.execute("SET autocommit = 1;")
con.execute("SET unique_checks = 1;")
con.execute("SET foreign_key_checks = 1;") 
```

截至目前，我的`sidekiq`进程已经运行了 22 分钟，但仍未完成。它应该插入大约 700k 行，不应该花这么长的时间！

我要插入的表有一个主键（uuid）的二进制字段，所以我不知道这是否会减慢速度？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:33:17.197

我最终将我的数据结构更改为不需要该结构所需的大量行的数据结构。我已经把它降低到几秒钟:)

# jquery - Jquery表单提交选择不起作用

> ID：14512030
> 
> 赞同：1
> 
> 时间：2013-01-24T22:31:04.070
> 
> 标签：jquery, html, asp-classic

这段 jquery 代码假设在下拉选择中执行表单提交。它适用于我们的测试站点。但是，一旦我们将其发布到我们的实时网站，它就会中断。任何人都可以看看它是否有什么问题？

（ASP/执行代码如下）页面：[http ://www.casa.gov.au/scripts/nc.dll?WCMS:PWA::pc=PC_91330](http://www.casa.gov.au/scripts/nc.dll?WCMS:PWA::pc=PC_91330)

ASP 代码：

```
<script>
    $(document).ready(function() {

              $(document).on("change","select#state",function(e){
                             $("form").submit();
                               });

     });
</script>

  <form action="avsafety.asp" method="get">

     <p>State:<br/>
      <select id="state" name="state">
        <option label="ACT" value="ACT" <%if request.querystring("state") = "ACT" then response.write("selected") %>>ACT</option>
        <option label="NSW" value="NSW" <%if request.querystring("state") = "NSW" then response.write("selected") %>>NSW</option>
        <option label="NT" value="NT"   <%if request.querystring("state") = "NT" then response.write("selected") %>>NT</option>
        <option label="QLD" value="QLD" <%if request.querystring("state") = "QLD" then response.write("selected") %>>QLD</option>
        <option label="VIC" value="VIC" <%if request.querystring("state") = "VIC" then response.write("selected") %>>VIC</option>
        <option label="SA" value="SA"   <%if request.querystring("state") = "SA" then response.write("selected") %>>SA</option>
        <option label="TAS" value="TAS" <%if request.querystring("state") = "TAS" then response.write("selected") %>>TAS</option>
        <option label="WA" value="WA"   <%if request.querystring("state") = "WA" then response.write("selected") %>>WA</option>
      </select>
      <input type="submit" value="Search" />
    </p>

  </form> 
```

实时网站上的代码：

```
<script type="text/javascript">
    $(document).ready(function() {

              $(document).on("change","select#state",function(e){
                             $("form").submit();
                               });

     });
</script>
<form action="avsafety.asp" method="get">
        <p>
                State:<br />
                <select id="state" name="state">
                        <option label="ACT" value="ACT">
                                ACT
                        </option>
                        <option label="NSW" value="NSW">
                                NSW
                        </option>
                        <option label="NT" value="NT">
                                NT
                        </option>
                        <option label="QLD" value="QLD">
                                QLD
                        </option>
                        <option label="VIC" value="VIC">
                                VIC
                        </option>
                        <option label="SA" value="SA">
                                SA
                        </option>
                        <option label="TAS" value="TAS">
                                TAS
                        </option>
                        <option label="WA" value="WA">
                                WA
                        </option>
                </select> <input type="submit" value="Search" />
        </p><input type="hidden" name="session" value="1918276309" />
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:34:53.967

您使用的是旧版本的 jQuery，`1.2.6`它没有[`.on()`](http://api.jquery.com/on/)，您需要升级到 1.7+ 版本才能使用它。此外，您可能希望在您提交的表单中更具体（比如给它一个 id），因为页面上不止一个。

# jquery - 使用 JQuery 和 HTML5 History 将历史记录绑定到 Worklight 中的后退按钮

> ID：14512036
> 
> 赞同：0
> 
> 时间：2013-01-24T22:31:46.333
> 
> 标签：jquery, load, browser-history, ibm-mobilefirst

我已经看到了一些关于此的讨论，但他们都认为页面上有一个按钮供用户返回。我正在 Worklight 中使用 jQuery 加载和卸载创建一个多页表单。对于那些熟悉 WL 的人来说，这是基于他们的多页应用程序示例。基本上，当 Web 应用程序加载时，它使用 pagePort 来显示内容：

```
function wlCommonInit(){

$("#pagePort").load("www/firstPage.html", function(){
    currentPage.init();
});
} 
```

此时用户看到的登录页面有一个继续按钮：

```
<input type="button" value="Load Page1.html" id="LoadPage1Button" onclick="currentPage.loadPage(1);" /> 
```

当用户单击按钮时，pagePort 内容将切换到下一页开始表单条目：

```
currentPage.init = function () {
  history.pushState({
    page: 2
  }, "Page2", "yourInformation");
};

currentPage.loadPage = function (pageIndex) {
  $("#pagePort").load("www/yourInformation" + ".html", function () {
    currentPage.init();
  });
}; 
```

此时，url 更改为 ../blah/firstPage.html#yourInformation，用户可以在输入信息并再次单击继续后继续进入表单的下一页。请注意，这个多页表单在每个页面上只有 1 个继续按钮，并且没有其他可用按钮......不要问我为什么......

所以他们必须返回的唯一选择是浏览器返回按钮，因为我只是使用 history.pushState 操作浏览器历史记录。但是，当我单击浏览器后退按钮时，只有 URL 会更改，但页面不会更改。

所以我的问题是......有没有一种简单的方法可以通过使用 pushState 附加 url 将后退按钮绑定到我正在创建的 URL 历史记录？我需要做的就是让用户点击后退按钮并被允许进入第一页。

用户单击继续后加载页面 yourInformation.html 页面的 firstPage.html JS 文件： currentPage = {};

```
currentPage.init = function () {
  WL.Logger.debug("firstPage :: init");
  history.pushState({
    page: 0
  }, "firstPage");
  history.back(0);
};

currentPage.loadPage = function (pageIndex) {
  $("#pagePort").load("www/yourInformation" + ".html", function () {
    currentPage.init();
  });
};
currentPage.unload = function () {
  $('#pagePort').html('');
    for (var att in currentPage) {
    delete currentPage[att];
 }
}; 
```

哦，插件不是一种选择......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:50:40.503

您可以使用`WL.App.overrideBackButton`.

```
WL.App.overrideBackButton(backFunc);
function backFunc(){
    // put your logic here.
} 
```

# jquery - Fancybox 问题：图片在新窗口中打开

> ID：14512040
> 
> 赞同：1
> 
> 时间：2013-01-24T22:31:52.450
> 
> 标签：jquery, fancybox, dreamweaver

我对 Dreamweaver 了如指掌，但在使用 Jquery 时我还是会迷路。

我一直在尝试在我的网站上实现 Fancybox，这样当我单击图像时，会在同一页面上打开放大版本。

我的问题是，当我单击较小的图像时，较大的图像会出现在新窗口中。我已经在网站上查看了类似的问题并使用了 Firequery，虽然他们给了我一些关于问题的想法，但我似乎无法解决它。主要问题似乎在第 12 行附近。

**头**

```
<link href="boxtext.css" rel="stylesheet" type="text/css">
<script src="SpryAssets/SpryMenuBar.js" type="text/javascript"></script>
<!-- Loading the css files -->
<link rel="stylesheet" type="text/css" href="_scripts/jquery.fancybox.css" />
<!-- loading the script files -->
<script type="text/javacript" language="javascript" src="_scripts/jquery-1.9.0.min.js">
</script>
<script type="text/javacript" language="javascript" src="_scripts/jquery.fancybox.js">
</script>
<script type="text/javascript" language="javascript">
 $(document).ready(function(){
 $('.fancybox').fancybox();
});
</script> 
```

**身体**

```
<div id="info">
<a class="fancybox" href="bigwhite.png"><img src="smallwhite.png" ></a>
</div> 
```

任何帮助或建议将不胜感激。

# java - Android 通过 USB 反向共享（不是 root）

> ID：14512043
> 
> 赞同：10
> 
> 时间：2013-01-24T22:32:13.930
> 
> 标签：java, android, cordova, phonegap-plugins

我正在PhoneGap中开发一个企业应用程序，我想离线处理一些数据，并通过一个插件（使用Java编写的代码）将处理后的数据通过LAN网络发送回（当检测到这一点时），但我需要一些代码示例可创建反向网络共享，无需 root 设备或使用外部应用程序。

我试图避免在 Windows 机器中创建本地组件，我想直接使用 REST 命令发送数据。

欢迎任何代码示例或建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T14:50:23.263

您是否尝试过这个简单的解决方案

对于 Windows：从 Android SDK 安装 USB 驱动程序连接 USB 电缆并激活 USB Tethering。您应该在 linux 或 windows 上看到一个新的网络接口。

在 Windows 上，桥接 2 个网络接口

设置手机的usb0接口。你有两个选择：

1.  在您的计算机上，执行：

    ./adb shell netcfg usb0 dhcp

2.  或者在手机的终端中，输入：

    su netcfg usb0 dhcp

您现在应该可以使用计算机的 Internet 连接在手机上连接到 Internet。 [http://acetips.wordpress.com/2011/10/07/reverse-usb-tethering/](http://acetips.wordpress.com/2011/10/07/reverse-usb-tethering/)和 [http://blog.mycila.com/2010/06/reverse-usb-tethering-with-android-22.html](http://blog.mycila.com/2010/06/reverse-usb-tethering-with-android-22.html)

对于从您的 android 应用程序运行 adb 命令，您可以使用

```
String exeeCmd = "netcfg usb0 dhcp";      
        Runtime runtime = Runtime.getRuntime();
        try {
            runtime.exec(exeeCmd);
        } catch (IOException e) {
            e.printStackTrace();                
        } 
```

申请所需的许可

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-22T15:04:41.820

我知道这来得太晚了，但似乎还没有找到真正的解决方案，这可能对其他读者有所帮助：

由于我自己找不到任何解决方案，我开发了一个应用程序，为运行 Android 4.0 或更高版本的无根 Android 设备提供反向网络共享。支持所有主要的桌面操作系统。

该应用可在 Google Play 上找到：https: [//play.google.com/store/apps/details?id=com.floriandraschbacher.reversetethering.free](https://play.google.com/store/apps/details?id=com.floriandraschbacher.reversetethering.free)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T06:04:32.550

也许您可以将[反向网络共享工具](http://www.androidauthority.com/how-to-use-pc-internet-connection-with-android-phone-44230/)工具集成到您的应用程序中

# java - strictfp 敏感 JVM 示例

> ID：14512044
> 
> 赞同：6
> 
> 时间：2013-01-24T22:32:16.470
> 
> 标签：java

我们几乎都知道**strictfp**是如何工作的。

像这样的东西：

```
package com.hk.basicjava.tests.strictfp;

import java.util.*;

public class StrictFP {
    public static void main(String[] argv) {
        double d = Double.MIN_VALUE; 
        System.out.println("non strictfp : " + notStrictFP(d)); // may be 4.9E-324
        System.out.println("strictfp : " + strictFP(d)); // should be 0
    }

    static double notStrictFP(double a) {
        return (a / 2 ) * 2;
    }
    static strictfp double strictFP(double a) {
        return (a / 2 ) * 2 ;
    }
} 
```

但是，是否有人知道**特定的硬件/操作系统**（可能还有 JRE）**组合**，其中有和没有**strictfp**说明符的方法返回的结果存在差异？

我尝试了几种组合，但没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-28T14:20:18.497

你得到一个双精度可以准确表示的数字：Double.MIN_VALUE; 所以我并不感到惊讶，没有区别。如果您使用的算术产生的数字无法保持其精度，那么相同的算术可能会产生两个不同的结果。在这种情况下，strictfp 可以工作，其中 JVM 两次都以相同的方式近似答案。

# c# - 使用 netduino (C#) ping 本地网络

> ID：14512052
> 
> 赞同：0
> 
> 时间：2013-01-24T22:33:01.713
> 
> 标签：c#, networking, ping, netduino

我需要使用 netduino plus ping 网络上的不同对象

关于什么代码最有效的任何建议

我正在尝试使用 System.Net.NetworkInformation；但我没有那个库可供我使用（netduino 框架的约束？）

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:06:57.880

我可能有适合你的解决方案：

[http://forums.netduino.com/index.php?/topic/2208-ping-a-host-on-the-network/page-2](http://forums.netduino.com/index.php?/topic/2208-ping-a-host-on-the-network/page-2)

我已经开始摆弄代码以使其做我想做的事，但其他人所做的工作实际上是在网络上 ping 资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:38:15.720

This is an issue in Netduino project, but meanwhile someone created a library for Netduino which pings host. You can download ICMP library for Netduino here: [http://www.blake-foster.com/projects/ICMPPing.zip](http://www.blake-foster.com/projects/ICMPPing.zip)

More information on this code is here: [http://www.blake-foster.com/project.php?p=44](http://www.blake-foster.com/project.php?p=44)

# javascript - Rails 应用程序中的 JQuery 插件 lightbox_me

> ID：14512054
> 
> 赞同：1
> 
> 时间：2013-01-24T22:33:15.090
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript, lightbox

干杯! 我正在尝试在我的 Ruby On Rails 应用程序中使用 Lightbox_me 插件实现弹出窗口。我已经下载`jquery.lightbox_me.js`，放入`app/assets/javascripts`，添加文件，并在`//= require jquery.lightbox_me`（我有 HomeController）我做这样的事情：`application.js``home.js.coffee`

```
`$(".popup-button").click (e) ->
  alert "!!!"
  $(".download_layout").lightbox_me centered: true
  e.preventDefault() 
```

警报正常显示，但 .lightbox_me 不起作用。有什么问题？

**编辑：** application.js

```
//.......
//= require jquery
//= require jquery_ujs
//= require jquery.lightbox_me
//= require bootstrap
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:56:29.373

尝试坚持 CoffeeScript 语法：

```
$(document).ready ->
  $(".popup-button").click (e) ->
    $("#download_layout").lightbox_me 
      centered: true
    e.preventDefault() 
```

编辑：不要忘记将这个非常重要的字符串放在您的顶部`.js.coffee`（我已经在我的机器上复制了您的代码并且它有效）：

```
$(document).ready -> 
```

# solr - 将数据库列拆分为多值 Solr 字段

> ID：14512055
> 
> 赞同：0
> 
> 时间：2013-01-24T22:33:28.353
> 
> 标签：solr, dih

我要疯了，试图弄清楚如何让数据导入处理程序的`splitBy`构造工作。我期待它将输入列拆分为一个多值字段。这是一个重现问题的测试用例：

```
import java.io.File;
import java.io.IOException;
import java.sql.SQLException;

import static org.junit.Assert.*;

import javax.sql.DataSource;

import org.apache.commons.dbutils.QueryRunner;
import org.apache.commons.io.FileUtils;
import org.apache.solr.client.solrj.SolrQuery;
import org.apache.solr.client.solrj.SolrServer;
import org.apache.solr.client.solrj.embedded.EmbeddedSolrServer;
import org.apache.solr.client.solrj.response.QueryResponse;
import org.apache.solr.common.SolrDocument;
import org.apache.solr.core.CoreContainer;
import org.hsqldb.jdbc.JDBCDataSource;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

public class TestSplitBy {

  SolrServer server;
  File configPath = new File(FileUtils.getTempDirectory(), Long.toString(System.nanoTime()));

  String solrconfig_xml = "<config><luceneMatchVersion>LUCENE_41</luceneMatchVersion><requestHandler name=\"search\" class=\"solr.SearchHandler\" default=\"true\"><lst name=\"defaults\"><str name=\"fl\">*</str><str name=\"df\">id</str></lst></requestHandler><requestHandler name=\"/dataimport\" class=\"org.apache.solr.handler.dataimport.DataImportHandler\"><lst name=\"defaults\"><str name=\"config\">data-config.xml</str></lst></requestHandler></config>";

  String data_config_xml = "<dataConfig>" +
      "<dataSource url=\"jdbc:hsqldb:mem:testdb\" user=\"SA\" driver=\"org.hsqldb.jdbc.JDBCDriver\" />" +
      "<document>" +
      "<entity name=\"item\" transformer=\"RegexTransformer\" query=\"SELECT * FROM test\">" +
      "<field column=\"type\" name=\"type\" splitBy=\",\" />" +
      "</entity>" +
      "</document>" +
      "</dataConfig>";

  String schema_xml = "<schema version=\"1.3\" name=\"test\">" +
      "<types>" +
      "<fieldType name=\"string\" class=\"solr.StrField\" sortMissingLast=\"true\" omitNorms=\"true\" />" +
      "</types>" +
      "<fields>" +
      "<field stored=\"true\" name=\"id\" type=\"string\" />" +
      "<field stored=\"true\" name=\"type\" type=\"string\" multiValued=\"true\"/>" +
      "</fields>" +
      "<uniqueKey>id</uniqueKey>" +
      "</schema>";

  DataSource getDataSource() {
    JDBCDataSource ds = new JDBCDataSource();
    ds.setUser("SA");
    ds.setUrl("mem:testdb");
    return ds;
  }

  void populateDb(DataSource ds) {
    QueryRunner runner = new QueryRunner(ds);
    try {
      runner.update("DROP TABLE test IF EXISTS");
      runner.update("CREATE TABLE test(id INTEGER, type VARCHAR(256));");
      runner.update("INSERT INTO test VALUES 1, 'foo,bar,baz'");
    } catch (SQLException e) {
      System.err.println(e);
    }
  }

  void writeSolrConfig() throws IOException {
    File corePath = new File(configPath, "collection1");
    corePath.mkdir();
    File confPath = new File(corePath, "conf");
    confPath.mkdir();
    FileUtils.write(new File(confPath, "data-config.xml"), data_config_xml);
    FileUtils.write(new File(confPath, "schema.xml"), schema_xml);
    FileUtils.write(new File(confPath, "solrconfig.xml"), solrconfig_xml);
  }

  void startSolr() {
    System.setProperty("solr.solr.home", configPath.getAbsolutePath());
    CoreContainer.Initializer initializer = new CoreContainer.Initializer();
    CoreContainer coreContainer = initializer.initialize();
    server = new EmbeddedSolrServer(coreContainer, "collection1");
  }

  @Before
  public void setup() throws IOException {
    populateDb(getDataSource());
    writeSolrConfig();
    startSolr();
  }

  @After
  public void tearDown() {
    server.shutdown();
    FileUtils.deleteQuietly(configPath);
  }

  @Test
  public void testSplitBy() throws Exception {
    SolrQuery query = new SolrQuery();
    query.set("qt", "/dataimport");
    query.setParam("command", "full-import");
    QueryResponse response = server.query(query);
    Thread.sleep(500);

    response = server.query(new SolrQuery("*:*"));
    for (SolrDocument doc: response.getResults()) {
      assertNotNull(doc.getFieldValues("type"));
      assertEquals(3, doc.getFieldValues("type").size());
    }
  }
} 
```

以及测试用例的 POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.example</groupId>
  <artifactId>solr</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <name>Solr Sanity</name>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
  </build>

  <dependencies>
    <dependency>
      <groupId>org.apache.solr</groupId>
      <artifactId>solr</artifactId>
      <version>4.1.0</version>
      <type>war</type>
    </dependency>
    <dependency>
      <groupId>org.apache.solr</groupId>
      <artifactId>solr-dataimporthandler</artifactId>
      <version>4.1.0</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>org.apache.solr</groupId>
      <artifactId>solr-solrj</artifactId>
      <version>4.1.0</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>commons-dbutils</groupId>
      <artifactId>commons-dbutils</artifactId>
      <version>1.5</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>org.hsqldb</groupId>
      <artifactId>hsqldb</artifactId>
      <version>2.2.9</version>
      <type>jar</type>
      <scope>runtime</scope>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.11</version>
    </dependency>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>servlet-api</artifactId>
      <version>2.5</version>
    </dependency>
  </dependencies>
</project> 
```

关于如何让这些类型正确拆分为多个值的任何见解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:10:22.523

原来这个单元测试有几个问题：

1.  HSQL 的列名区分大小写（默认为大写）。

2.  如果 Solr 字段名称和 db 列名称相同，则还会添加带有整个 db 值的额外标记。

3.  字段定义应如下所示：

```
<field column="solrField" splitBy="," sourceColName="TYPE" /> 
```

通常 - 当使用将`RegexTransformer`数据库中的单值字段与多值字段混合时：

*   如果使用，`splitBy`则该`column`属性是 Solr 字段的名称。是`sourceColName`数据库列

*   如果*不*使用，`splitBy`则该`column`属性是数据库列名，该`name`属性是 Solr 字段。

# php - PHP XPath 查询不返回任何内容

> ID：14512058
> 
> 赞同：2
> 
> 时间：2013-01-24T22:33:29.570
> 
> 标签：php, xpath, domxpath

我最近在 PHP 中使用 DOMXpath 并取得了成功，试图获得更多经验我一直在玩抓取不同站点的某些元素。我无法从[http://www.theweathernetwork.com/weather/cape0005](http://www.theweathernetwork.com/weather/cape0005)这个网站上获取天气标记。

具体我想要

```
//*[@id='theTemperature'] 
```

这是我所拥有的

```
$url = file_get_contents('http://www.theweathernetwork.com/weather/cape0005');

$dom   = new DOMDocument();
@$dom->loadHTML($url);
$xpath = new DOMXPath($dom);
$tags  = $xpath->query("//*[@id='theTemperature']");
foreach ($tags as $tag){
    echo $tag->nodeValue;
} 
```

我在这里做错了什么吗？我能够在页面上的其他标签上产生实际结果，但具体不是这个。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:11:15.163

您可能想提高您的 DOMDocument 调试技能，这里有一些提示（[Demo](http://codepad.viper-7.com/qkdlCr)）：

```
<?php
header('Content-Type: text/plain;');

$url = file_get_contents('http://www.theweathernetwork.com/weather/cape0005');

$dom   = new DOMDocument();
@$dom->loadHTML($url);
$xpath = new DOMXPath($dom);
$tags  = $xpath->query("//*[@id='theTemperature']");
foreach ($tags as $i => $tag){
    echo $i, ': ', var_dump($tag->nodeValue), ' HTML: ', $dom->saveHTML($tag), "\n";
} 
```

1.  输出找到的节点的编号，我在这里`$i`用`foreach`.
2.  `var_dump`，`->nodeValue`它有助于显示它到底是什么。
3.  利用`saveHTML`显示更好图片的功能输出HTML。

实际输出：

```
0: string(0) ""
 HTML: <p id="theTemperature"></p> 
```

您可以很容易地发现该元素是空的，因此温度必须从其他地方进入，例如通过 javascript。检查浏览器的网络工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:10:27.083

发生的事情很简单，页面包含一个空的 id="theTemperature" 元素，它是一个用 javascript 填充的占位符。file_get_contents() 只会下载页面，不执行 javascript，因此元素保持为空。尝试在禁用 javascript 的浏览器中加载页面以自己查看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T23:10:06.240

您尝试选择的元素确实是空的。该页面通过 ajax 将温度加载到该 ID 中。特别是这个脚本：

[http://www.theweathernetwork.com/common/js/master/citypage_ajax.js?cb=201301231338](http://www.theweathernetwork.com/common/js/master/citypage_ajax.js?cb=201301231338)

但是当您执行 file_get_contents 时，这些脚本显然无法解决。我会选择guido使用RSS的解决方案

# iphone - 如何更改 iOS 上后退按钮的位置？

> ID：14512065
> 
> 赞同：5
> 
> 时间：2013-01-24T22:34:05.630
> 
> 标签：iphone, ios, objective-c, uinavigationcontroller, back-button

您会看到我正在制作一个完全自定义的导航栏，当我创建后退按钮时，它不会停留在正确的位置，正如您在代码下方看到的那样。

这是我的应用程序代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if(self.navigationController.viewControllers.count > 1) {
    UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];

    [backButton setTitle:@"" forState:UIControlStateNormal];
    [backButton setBackgroundImage:[UIImage imageNamed:@"backButton.png"] forState:UIControlStateNormal];
    [backButton addTarget:self action:@selector(didTapBackButton:) forControlEvents:UIControlEventTouchUpInside];
    backButton.frame = CGRectMake(0.0f, 0.0f, 44.0f, 45.0f);
    UIBarButtonItem *backButtonItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];

    self.navigationItem.leftBarButtonItem = backButtonItem;
} 
```

}

[![图片](../Images/2ea6da0036fc5b1702f983b4acdd853f.png)](https://i.stack.imgur.com/6qPNz.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T04:47:36.380

我认为您可以修改 contentEdgeInsets 来确定按钮的位置。

像这样的东西：

> [backButton setContentEdgeInsets:UIEdgeInsetsMake(5, 0, -5, 0)];

来自[UIButton 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)

**contentEdgeInsets**

围绕所有按钮内容的矩形的内边距或外边距。

> @property(nonatomic) UIEdgeInsets contentEdgeInsets

讨论使用此属性调整按钮内容的有效绘图矩形的大小和重新定位。内容包括按钮图像和按钮标题。您可以为四个插图（上、左、下、右）中的每一个指定不同的值。正值会缩小或插入该边缘 - 将其移近按钮的中心。负值扩展或开始该边缘。使用 UIEdgeInsetsMake 函数为此属性构造一个值。默认值为 UIEdgeInsetsZero。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-24T09:54:27.383

您可以在左侧渲染具有一定间距的较大图像。

```
UIImage *origImage = [UIImage imageNamed:@"button-thin-hamburger.png"];
UIGraphicsBeginImageContextWithOptions(CGSizeMake(origImage.size.width + 10, origImage.size.height), NO, 0.0);
[origImage drawInRect:CGRectMake(10, 0, origImage.size.width, origImage.size.height)];
UIImage *buttonImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@""
                                                               style:UIBarButtonItemStylePlain
                                                              target:nil
                                                              action:nil];
self.navigationItem.backBarButtonItem = backButton;

[[UINavigationBar appearance] setBackIndicatorImage:buttonImage];
[[UINavigationBar appearance] setBackIndicatorTransitionMaskImage:buttonImage]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:37:27.280

好吧，你不能改变，你必须隐藏它。

看看这里发布的这个页面：

[http://rafaelsteil.com/2011/07/23/crappy-ios-apis-uinavigationcontroller/](http://rafaelsteil.com/2011/07/23/crappy-ios-apis-uinavigationcontroller/)

[无法更改后退按钮标题，但我可以隐藏它](https://stackoverflow.com/questions/9276002/cant-change-back-button-title-but-i-can-hide-it)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T04:28:07.890

你需要先隐藏 NavigationBar...

```
 [self.navigationController setNavigationBarHidden:YES animated:NO]; 
```

然后创建自定义 UIButton..

```
 UIButton *btn1=[UIButton  buttonWithType:UIButtonTypeCustom];
    [btn1 setFrame:CGRectMake(10, 0, 60, 40)];// Frame u want

    [btn1 setImage:[UIImage imageNamed:@"BT_ipad_P_backbward@2x.png"] forState:UIControlStateNormal];
    [btn1 addTarget:self action:@selector(Click_backward:) forControlEvents: UIControlEventTouchUpInside];
btn1.tintColor=[UIColor purpleColor];
    [self.view addSubview:btn1]; 
```

# facebook - Facebook FQL。表“列”包含错误的字段

> ID：14512069
> 
> 赞同：1
> 
> 时间：2013-01-24T22:34:17.927
> 
> 标签：facebook, facebook-fql

为什么下一个 Facebook FQL：

```
select column_name from columns where table_name = 'user' order by column_name 
```

返回的是不同的列列表，然后在 api 页面[http://developers.facebook.com/docs/reference/fql/user](http://developers.facebook.com/docs/reference/fql/user)

例如，它返回字段“can_viewer_send_poke_message”，但 facebook 告诉

```
(#602) can_viewer_send_poke_message is not a member of the user table 
```

因此，我只是尝试自动化流程以保留一些 hql 查询以及每个 hql 表的完整列列表。

**可能有没有其他方法可以将每个表格列列表作为用“，”分隔的字符串？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T21:44:04.837

这是 iPhone 官方 Poke 应用程序的 Facebook 开发人员的私有字段。它检查列出的用户（朋友）是否可以使用 poke 应用程序。

# iphone - 在不同视图中添加和删除视图时的 EXC_BAD_ACCESS

> ID：14512071
> 
> 赞同：3
> 
> 时间：2013-01-24T22:34:25.697
> 
> 标签：iphone, ios, exc-bad-access

我创建了一个带有游戏商店视图和视图控制器的游戏。可以在菜单 (ViewController.m) 和游戏结束屏幕 (GameViewController.m) 中访问商店。

我的问题是，如果我在菜单中显示了商店一次，然后玩游戏并在游戏中通过屏幕访问商店并尝试购买东西，则应用程序崩溃并出现 EXC_BAD_ACCESS 错误而没有太多信息。（打破在

```
[[SKPaymentQueue defaultQueue] addPayment:lPayment]; 
```

尝试购买 IAP 时，在我的 ShopViewController 中的 ButtonPressed 操作中添加一行。

我的视图是这样设置的：

菜单视图 -> 梯形视图 -> 游戏视图 -> 商店视图

和

菜单视图 -> 商店视图

希望你能帮我找出错误，

**编辑 - - - - - -**

看来我可以在不使用游戏视图的情况下从菜单-> Shopview 重现错误。我可以通过按“购买按钮”、按取消、导航回菜单、返回商店并重复来做到这一点。在第 3-4 次尝试时，它在同一行崩溃。这是整个按钮按下方法：

```
- (void)buyButtonPressed:(UIButton *)pButton {
    NSInteger lTag = [pButton tag];
    //////NSLog(@"Button tag: %i"), lTag;

    Reachability *lReachability = [Reachability reachabilityForInternetConnection];
    NetworkStatus lCurrentNetworkStatus = [lReachability currentReachabilityStatus];
    if (lCurrentNetworkStatus != NotReachable) {
        if ([SKPaymentQueue canMakePayments]) {
            SKPayment *lPayment = [SKPayment paymentWithProduct:[mPriceArray objectAtIndex:lTag]];
            [[SKPaymentQueue defaultQueue] addPayment:lPayment];
            [[SKPaymentQueue defaultQueue] addTransactionObserver:self];

        } else {
            [self showAlertViewWithText:@"Purchases are disabled. Please check your settings for General -> Restrictions -> In-App Purchases and try again." andTitle:@"Warning"];
        }
    } else {
        [self showAlertViewWithText:@"No network connection!" andTitle:@"Warning"];
    }
} 
```

所以看起来 lPayment 正在被解除分配。我什至试图设置

```
mProductIds = nil;
mPriceArray = nil; 
```

当我删除商店视图时，试图在我重新加载商店时强制它再次分配它，但没有任何运气。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:48:00.990

你的问题是一个悬空指针。EXC_BAD_ACCESS 是 CPU 抱怨您正在处理不存在的内存或访问权限区域之外的内存。原因是缺少对象保留，导致提前释放，然后被覆盖。在那个时候（可能会延迟），指针将指向其取消引用（类检查）导致抛出 EXC_BAD_ACCESS 的垃圾。使用@try 无法捕获此错误。这里假设堆栈本身已损坏，导致无法继续（尽管很可能不是这种情况），这将使调试器陷入困境，其当前状态输出在许多领域已经缺乏。当 CPU 重置重要寄存器并执行长跳转时，这就像无法控制的无政府状态。

考虑自动引用计数。如果您已经在那里，请考虑宿主对象不保留类似委托的属性。任何可以在逻辑上包含 self 的属性都不会保留存储在其中的任何值。ARC 不会帮助你。

在您的情况下： defaultQueue 可能很好。lPayment 可能已被解除分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:14:31.603

从提供的信息中很难判断，但可能是以下内容： 您的陈述

```
SKPayment *lPayment = [SKPayment paymentWithProduct:[mPriceArray objectAtIndex:lTag]]; 
```

实例化一个 SKPayment 对象，并将其交给当前的自动释放池。如果此池不存在（如果代码在没有明确设置自动释放池的单独线程中运行，则可能是这种情况），该对象将立即再次释放，并且您的语句

```
[[SKPaymentQueue defaultQueue] addPayment:lPayment]; 
```

访问无效内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T11:21:03.220

尝试首先启用 NSZombie 来跟踪问题。如果出现 EXC_BAD_Access 问题，有时它（NSZombie）对于跟踪已释放对象比简单猜测问题所在更有用。

# vbscript - VBS 删除文件夹和文件

> ID：14512075
> 
> 赞同：0
> 
> 时间：2013-01-24T22:34:33.067
> 
> 标签：vbscript

> **可能重复：**
> [VB 脚本 - 将修改日期超过 180 天的文件移动到另一个目录](https://stackoverflow.com/questions/5312178/vb-script-move-files-older-than-180-days-from-modified-date-to-another-directo)

我正在寻找一个 VBS scipt 来删除文件夹，包括超过 x 天的子文件夹的文件。有人可以帮忙吗？我在下面的路径下有 60 多个文件夹。

要求

C:\winnt\Temp 删除任何超过 2 天的未阻止（非活动）文件或空文件夹。D:\ 驱动器删除任何超过 2 天的未阻止（非活动）文件或空文件夹。

谢谢，桑迪

# android - Android并发修改错误MapOverlays

> ID：14512078
> 
> 赞同：0
> 
> 时间：2013-01-24T22:34:50.270
> 
> 标签：android, android-mapview, concurrentmodification

在我的应用程序中，我有一个带有自定义 MapOverlays 的 MapView。

我已经覆盖了 onDraw 方法，因此我将能够对位于同一位置的叠加项目进行聚类——而且效果很好。

我现在正在尝试添加一大堆标记，`Concurrent Modification Error`虽然我已经同步了方法和正确的对象，但我得到了一个..

我认为它与 onDraw 方法有关，该方法在每次需要时被调用多次（这在此处的某些线程中可以读取） - 它必须在尝试迭代它的同时更新 ArrayList .

我的问题是为什么？我确实同步了它......它应该被锁定..

我从 onDraw() 调用的函数：

```
private synchronized ArrayList<OverlayItem> createOverlayItems(MapView mapView)
    {
        Projection projection = mapView.getProjection();
        int minPixelDistance = app.getPixels(50); //distance allowed between 2 markers      
        synchronized (fullMapOverlays) {
            OverlayItem me = getOverlayItem(ME);
            fullMapOverlays.remove(me);
            mapOverlays.clear();
            mapOverlays.addAll(fullMapOverlays);
            Iterator<OverlayItem> overlayIterator = fullMapOverlays.iterator();
            while (overlayIterator.hasNext())
            {   
                OverlayItem item = overlayIterator.next();
                Point currentItemPoint = projection.toPixels(item.getPoint(), null);
                if (!isPointInScreen(currentItemPoint))
                    continue;
                else if (item.getTitle().equals(ME) && item.getSnippet().equals(ME))
                    continue;
                else if (!mapOverlays.contains(item))
                    continue;

                cluster.clear();
                Iterator<OverlayItem> innerIterator = mapOverlays.iterator();
                while (innerIterator.hasNext())
                {
                    OverlayItem itemToCheck = innerIterator.next();
                    Point checkingItemPoint = projection.toPixels(itemToCheck.getPoint(), null);
                    if (!isPointInScreen(checkingItemPoint))
                    {
                        innerIterator.remove();
                        continue;
                    }
                    else if (itemToCheck.getTitle().equals(ME) && itemToCheck.getSnippet().equals(ME))
                        continue;
                    else if  (itemToCheck.getTitle().equals(CLUSTER))
                        continue;               

                    if (!item.equals(itemToCheck))
                    {
                        if (getPixelsDistance(currentItemPoint, checkingItemPoint) <= minPixelDistance)
                        {
                            cluster.add(itemToCheck);
                            innerIterator.remove();
                        }
                    }
                }           
                if (cluster.size() > 0)
                {
                    mapOverlays.remove(item);
                    cluster.add(item);              
                    String itemsTitle = "";
                    for (int i=0; i<cluster.size(); i++)
                    {
                        if (i == 0)
                            itemsTitle += cluster.get(i).getTitle();
                        else
                            itemsTitle += "|" + cluster.get(i).getTitle();
                    }
                    OverlayItem clusterItem = new OverlayItem(cluster.get(0).getPoint(), CLUSTER, itemsTitle);
                    clusterItem.setMarker(boundCenterBottom(createClusterDrawable(cluster.size())));
                    mapOverlays.add(clusterItem);               
                }
            }       
            fullMapOverlays.add(fullMapOverlays.size(), me);
            mapOverlays.add(mapOverlays.size(), me);            
        }
        return mapOverlays;
    } 
```

可爱的logcat：

```
01-25 00:27:47.070: W/System.err(4676): java.util.ConcurrentModificationException
01-25 00:27:47.070: W/System.err(4676):     at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:576)
01-25 00:27:47.070: W/System.err(4676):     at com.WhosAround.Activities.Map.MapOverlay.createOverlayItems(MapOverlay.java:169)
01-25 00:27:47.070: W/System.err(4676):     at com.WhosAround.Activities.Map.MapOverlay.draw(MapOverlay.java:61)
01-25 00:27:47.070: W/System.err(4676):     at com.google.android.maps.Overlay.draw(Overlay.java:179)
01-25 00:27:47.075: W/System.err(4676):     at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:42)
01-25 00:27:47.075: W/System.err(4676):     at com.google.android.maps.MapView.onDraw(MapView.java:530)
01-25 00:27:47.075: W/System.err(4676):     at android.view.View.draw(View.java:6933)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 00:27:47.075: W/System.err(4676):     at android.view.View.draw(View.java:6936)
01-25 00:27:47.075: W/System.err(4676):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 00:27:47.075: W/System.err(4676):     at android.view.View.draw(View.java:6936)
01-25 00:27:47.075: W/System.err(4676):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 00:27:47.075: W/System.err(4676):     at android.view.View.draw(View.java:6936)
01-25 00:27:47.075: W/System.err(4676):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 00:27:47.075: W/System.err(4676):     at android.view.View.draw(View.java:6936)
01-25 00:27:47.075: W/System.err(4676):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-25 00:27:47.075: W/System.err(4676):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1917)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewRoot.draw(ViewRoot.java:1530)
01-25 00:27:47.075: W/System.err(4676):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1266)
01-25 00:27:47.080: W/System.err(4676):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1868)
01-25 00:27:47.080: W/System.err(4676):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-25 00:27:47.080: W/System.err(4676):     at android.os.Looper.loop(Looper.java:130)
01-25 00:27:47.080: W/System.err(4676):     at android.app.ActivityThread.main(ActivityThread.java:3691)
01-25 00:27:47.080: W/System.err(4676):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 00:27:47.080: W/System.err(4676):     at java.lang.reflect.Method.invoke(Method.java:507)
01-25 00:27:47.080: W/System.err(4676):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
01-25 00:27:47.080: W/System.err(4676):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
01-25 00:27:47.080: W/System.err(4676):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:01:25.680

好的，找到了，我从另一个线程更新了 MapActivity....

您必须确保从 UI 线程添加 OverlayItems。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:56:26.600

mapOverlays.remove(item); 看起来像我的罪魁祸首。如果您在迭代列表时直接删除一个项目，它将导致并发修改异常。

使用您的迭代器来删除事物，而不是直接进行。

# javascript - Javascript 定义函数

> ID：14512081
> 
> 赞同：3
> 
> 时间：2013-01-24T22:34:56.073
> 
> 标签：javascript, function, variables

我一直在可汗学院学习 Javascript。我在看：[http ://www.khanacademy.org/cs/speed-circles/964929070](http://www.khanacademy.org/cs/speed-circles/964929070)

有一行写着“var draw = function() {...}”他是在定义一个名为 draw 的函数吗？还是变量 draw 调用了某个函数（我没有看到定义）？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:36:05.270

是的，函数表达式被分配给名为 的变量`draw`。你甚至可以这样称呼它：

```
var draw = function() {
    console.log('xyz');
};

draw(); // 'xyz' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:11:38.590

在 JavaScript 中，函数是对象，就像数组和逻辑上的对象一样。您可能已经发现，这些对象可以分配给多个变量，但是一旦您更改其中一个变量，它们就会全部更改。那是因为 JS 总是按值分配，但变量从来没有直接分配给对象：它被分配*了对对象的引用*：

```
var obj = {iam: 'an object'};
var reassign = obj;
console.log(obj);//shows object
console.log(reassign);//surprize, shows the same thing
reassign.bar = 'foobar';
console.log(obj.bar);//logs foobar, the variable obj has gained the same property, because it is the same object. 
```

这同样适用于函数，作为对象，可以在各处分配给变量/属性，但它仍然是相同的对象/函数：

```
var foo = function()
{
    console.log('I am an object');
};
var second = foo;
second();//logs I am an object
console.log(second === foo);//logs true, because they both reference the same thing 
```

那么，您可能会问，为什么将*匿名*函数分配给变量，而不是像您期望的那样仅仅声明一个函数？好：

```
function foo(){} 
```

被*提升*，在运行任何代码之前，JS 将所​​有函数声明和变量声明移动到范围的最顶部，但在你的情况下，你不仅仅是定义一个函数，或者声明一个变量：JS 必须*做*一些事情，也：分配对变量的引用。该功能不会被提升：

```
var foo = function()
{
    console.log('foo');
};
foo();//logs foo
foo = function()
{
    console.log('bar');
};
foo();//logs bar now 
```

如果 foo 在分配之前未定义，你会得到一个错误。如果上面的代码之前有任何代码，JS*会*提升 foo 的变量声明，但它的值仍然是未定义的。

重点是什么？当您开始使用闭包时，或者如果您需要根据分支（`if (x){ foo = functionX} else { foo = functionY;}`）不同的函数，这将证明是有用的。这些只是您想要避免范围提升的两个原因……但所有 ATM 中最重要的原因必须是[动态重新定义功能](https://stackoverflow.com/questions/3227222/javascript-function-redefinition)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:38:44.460

请注意，在 processing.js 中（正如这个可汗学院演示所使用的那样），函数 draw 会自动调用每个帧[引用 doc](http://processingjs.org/reference/draw_/)。

这段代码覆盖了 draw 的默认（空）实现，以便每一帧都调用给定的代码。

[可汗学院在这里](http://www.khanacademy.org/cs/intro-to-animation/830742281)有一个关于这种使用绘图功能的教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T16:00:39.223

函数绘制（）{返回“样本”；};

var draw = function(){ return "示例"; };

是相同的意思。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-24T22:36:18.817

`function () { ... }`创建一个函数值。也就是说，可以像数字或 javascript 中的任何其他对象一样容易地传递的东西。

然后，他将其绑定到名称 draw 以供将来参考。

他也可以写

```
function draw() {
    ...
} 
```

出于这些目的，它们是等效的。

# ruby-on-rails - Rails 应用程序和 TimeZone

> ID：14512083
> 
> 赞同：0
> 
> 时间：2013-01-24T22:35:08.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, utc

Rail 自己处理 TimeZone 还是我们应该为它编写代码？例如，一位医生每天为纽约的一位患者订购药物 6 小时……然后飞往加利福尼亚，打开该患者在纽约就诊的图表并查看他的用药时间表……Rails 如何处理这种情况?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:58:41.027

据我了解，Rails 会将所有时间类型 ( `:datetime`, `:time`, `:timestamp`) 转换为 UTC，然后再将它们存储到数据库中。

如果您想确保始终显示当地时间，那么您需要`TimeZone#utc_to_local`在显示数据之前调用您的数据。

[http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-local](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-local)

这个问题有一些更好的背景信息：

[在 Ruby on Rails 中，DateTime、Timestamp、Time 和 Date 有什么区别？](https://stackoverflow.com/questions/3928275/in-ruby-on-rails-whats-the-difference-between-datetime-timestamp-time-and-da)

我希望这会有所帮助。

# python - 为什么python有os.path.curdir

> ID：14512087
> 
> 赞同：29
> 
> 时间：2013-01-24T22:35:22.120
> 
> 标签：python

`os.path.curdir`返回“。” 这是完全真实的，完全没有价值的。要从中获得任何有用的东西，你必须用`os.path.abspath(os.path.curdir)`

为什么在 os.path 模块中包含一个无用的变量？为什么不让 os.path.curdir 成为为您执行 os.path.abspath 的函数？

存在有什么历史原因`os.path.curdir`吗？

或许useless有点刺耳，但不是很有用似乎无力形容这一点。 [![在此处输入图像描述](../Images/e3f895731da2083b1b93250396ffb048.png)](https://i.stack.imgur.com/FqrIW.png)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-24T22:38:10.087

它是一个常数，就像`os.path.sep`.

POSIX 和 Windows 以外的平台可以使用不同的值来表示“当前目录”。`@`例如，在 Risc OS上，在旧的 Macintosh OS 上，它是`:`.

该值在整个标准库中使用以保持与平台无关。

改为使用[`os.getcwd()`](http://docs.python.org/2/library/os.html#os.getcwd)；`os.path.abspath()`无论如何，使用该功能在引擎盖下`os.path.curdir`变成当前工作目录。这是 POSIX 的实现`abspath()`：

```
def abspath(path):
    """Return an absolute path."""
    if not isabs(path):
        if isinstance(path, _unicode):
            cwd = os.getcwdu()
        else:
            cwd = os.getcwd()
        path = join(cwd, path)
    return normpath(path) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-24T22:40:41.850

的值`os.path.curdir`适用`"."`于 Linux、Windows 和 OS X。但是，它适用`":"`于旧的 Mac OS 9 系统。Python 已经存在了足够长的时间，这曾经很重要。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-24T22:39:33.100

它只是一个恒定的、依赖于平台的值。从[文档](http://docs.python.org/2/library/os.html#os.curdir)（值得一读）：

> 操作系统用来引用当前目录的常量字符串。这适用`'.'`于 Windows 和 POSIX。也可通过`os.path`.

您可以考虑[`os.getcwd()`](http://docs.python.org/2/library/os.html#os.getcwd)改用。

# form-submit - extjs 将表单内容添加到另一个表单

> ID：14512090
> 
> 赞同：0
> 
> 时间：2013-01-24T22:35:38.617
> 
> 标签：form-submit, javascript-framework, extjs3, formpanel

我有2个表格，

```
var f1 = new Ext.form.FormPanel({

      items: [{ xtype: 'label', text: 'form1'}]
});

var f2 = new Ext.form.FormPanel({

      items: [{ xtype: 'label', text: 'form2'}]
}); 
```

我想将 form1 的项目发送到 form2 以便我只需要 1 个提交调用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:54:34.397

只保留一个提交按钮，并使用卡片或边框布局添加这两个面板。单击提交时，您会收集所有详细信息，如果需要在提交按钮单击处理程序中进行任何验证，然后继续。

我不认为它那么难。查看布局示例以及如何将表单添加为项目。

# c++ - makefile 忽略 $(inputs)

> ID：14512096
> 
> 赞同：1
> 
> 时间：2013-01-24T22:36:06.907
> 
> 标签：c++, makefile

这是生成文件：

```
CC=g++
CC_FLAGS=-Wall -march=native -ffast-math -O3
CC_SOURCES=AbsNode.cpp rle16.cpp
CC_OBJECTS=AbsNode.o rle16.o

# Link command:
test : $(CC_OBJECTS)
    $(CC) $(CC_OBJECTS) -o test

# Compilation commands: 
%.o:%.cpp
    $(CC) -c $(CC_FLAGS) $(input) -o $(output) 
```

将 make 应用于此 makefile 时，我得到以下输出：

```
g++ -c -Wall -march=native -ffast-math -O3  -o
g++: arguemnt to '-o' missing 
```

为什么忽略输入和输出？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:38:39.353

您还没有定义变量`input`和`output`任何地方。电脑不是能猜出你意图的魔法盒子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:40:12.957

您的 .cpp -> .o 隐式规则不正确：

```
%.o: %.cpp
        $(CC) -c $(CC_FLAGS) $< -o $@ 
```

*   `$<`设置`make`为源文件
*   `$@`将是输出文件名

# java - 如何使用 onTouch 事件更新绘制到画布的 Android 位图的位置？

> ID：14512101
> 
> 赞同：0
> 
> 时间：2013-01-24T22:36:21.137
> 
> 标签：java, android, android-canvas, surfaceview

我正在尝试使用 onTouch 事件更新位图的位置。图像正确显示在初始位置。日志显示 onTouch 事件正在更新坐标，还显示正在调用 onDraw。

我的活动：

```
package com.miker.haminvaders;

import android.app.Activity;
import android.os.Bundle;

public class HamInvadersActivity extends Activity
{
    private DrawView drawView;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    drawView = (DrawView) findViewById(R.id.drawView);      

    }
    @Override
    public void onPause()
    {
    super.onPause();
    drawView.stopGame();

    }
    @Override
    protected void onDestroy()
    {
    super.onDestroy();
    drawView.releaseResources();
    }
} 
```

我的线程类：

```
package com.miker.haminvaders;

import android.graphics.Canvas;
import android.util.Log;
import android.view.SurfaceHolder;

public class MainThread extends Thread
{
    private boolean running;
    SurfaceHolder surfaceHolder;
    DrawView drawView;
    public void setRunning(boolean r)
    {
        this.running = r;
    }
    @Override
    public void run()
    {
        Canvas canvas = null;
        while(running)
        {
            //Log.v("HAM", "tick!");
            try
            {
                canvas = surfaceHolder.lockCanvas();
                synchronized(surfaceHolder)
                {
                    drawView.onDraw(canvas);
                    drawView.updatePositions();

                }
            }
            finally
            {
                if(canvas != null)
                    surfaceHolder.unlockCanvasAndPost(canvas);
            } 
        }
    }
    public MainThread(SurfaceHolder surface, DrawView draw)
    {
        super();
        surfaceHolder = surface;
        drawView = draw;
    }

} 
```

我的 SurfaceView 类：

```
package com.miker.haminvaders;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.graphics.BitmapFactory;
import android.util.Log;

public class DrawView extends SurfaceView implements SurfaceHolder.Callback
{
    private MainThread myThread;

    private int screenWidth;
    private int screenHeight;

    private Paint textPaint;
    private Paint backPaint;

    private float x, y;
    private Bitmap bmpHam;

    public DrawView(Context context, AttributeSet attrs)
    {
        super(context, attrs);

        SurfaceHolder holder = getHolder();
        holder.addCallback(this);

        textPaint = new Paint();
        backPaint = new Paint();

        myThread = new MainThread(holder, this);
        bmpHam = BitmapFactory.decodeResource(getResources(), R.drawable.lilhamstrich);

    }
    @Override
    protected void onSizeChanged( int w, int h, int oldw, int oldh)
    {
        super.onSizeChanged(w, h, oldw, oldh);
        screenWidth = w;
        screenHeight = h;

        textPaint.setTextSize(w/20);
        backPaint.setColor(Color.WHITE);

        newGame();
    }
    public void newGame()
    {
        x = screenWidth/2;
        y = screenHeight/2;
    }
    public void updatePositions()
    {
    }
    public void onDraw(Canvas canvas)
    {
            canvas.drawColor(Color.WHITE);
            canvas.drawBitmap(bmpHam, x, y, null);
            Log.v("HAM", "Draw! " + x + " " + y);
    }
    public void stopGame()
    {
        if(myThread != null)
            myThread.setRunning(false);
    }
    public void releaseResources()
    {
        //soundPool stuff
    }
    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)
    {

    }
    @Override
    public void surfaceCreated(SurfaceHolder holder)
    {
        myThread.setRunning(true);
        myThread.start();
    }
    @Override
    public void surfaceDestroyed(SurfaceHolder holder)
    {
        boolean retry = true;
        myThread.setRunning(false);
        while(retry)
        {
            try
            {
                myThread.join();
                retry = false;
            }
            catch(InterruptedException e)
            {

            }
        }
    }
    @Override
    public boolean onTouchEvent (MotionEvent event)
    {
    int action = event.getAction();
    if( action == MotionEvent.ACTION_DOWN)
    {

        x = event.getX();
        y = event.getY();
        Log.v("HAM","Down! " + x + " " + y);
    }
    return true;
    }

} 
```

还有什么我需要包括的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:35:53.157

调用`invalidate()`，`onTouchEvent()`它应该会导致重绘。

# python - 为什么这个斐波那契在 Python 中的计算速度比 Haskell 快得多

> ID：14512107
> 
> 赞同：2
> 
> 时间：2013-01-24T22:36:49.300
> 
> 标签：python, haskell

我有一个计算第 n 个斐波那契数的算法，在 Python 中它表示为：

```
def fib(n):
    if n == 0:
        return 1
    if n == 1:
        return 1
    else:
        return fib(n-1) + fib(n-2) 
```

在 Haskell 中：

```
fib :: Integer -> Integer
fib 0 = 1
fib 1 = 1
fib n = fib (n-1) + fib (n-2) 
```

我本来希望 Haskell 更快或几乎同时进行评估，但是如果使用上面的数字说 n=40，python 代码的评估速度要快得多（~x3）。我正在使用 GHCi 和 Ipython，但我认为这不会有所作为。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T22:39:55.130

您说您在 GHCI 中运行 Haskell 代码，这意味着您在没有优化的情况下运行它。这意味着没有进行严格性分析，所以整个事情都被懒惰地评估了，产生了很多不必要的thunk。这可以解释为什么它更慢。

同样正如 delnan 在评论中指出的那样，ghci 比使用 ghc 编译代码然后运行它要慢得多——即使没有优化。当我在我的 PC 上测试您的代码时，在没有优化的情况下编译后运行所需的时间是优化后的两倍，但仍然比运行 Python 代码的时间短。在 ghci 中运行需要的时间要长得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:47:27.197

这是我在 haskell 示例中看到最多的 fib 实现：

```
fib n = fibs!!n
fibs = 0 : 1 : zipWith (+) fibs (tail fibs) 
```

试试它与 python 代码，它可能会快得多。这不是直接翻译，但可能更惯用。

这不是一个直接的答案，但也许没有人希望有一个优化的 fib 会使用你在那里使用的幼稚实现。因此，这不是比较 python 和 haskell 性能的最佳方法。

更多关于[haskell中的Fib](http://www.haskell.org/haskellwiki/The_Fibonacci_sequence)

# java - 上传 docx、xslx、pptx 时 Sling 日志中出现 NoClassDefFoundError 错误

> ID：14512109
> 
> 赞同：0
> 
> 时间：2013-01-24T22:36:58.307
> 
> 标签：java, apache, apache-tika, sling, jackrabbit

将任何 Office 2007 文档（例如 pptx、docx、xslx）上传到 Sling 时，我收到以下多个错误（见下文 - 每个文件一个）。我正在使用**Sling 6** stable 独立版。

还有其他人遇到这种情况吗？tika 捆绑包有任何已知问题吗？

谢谢

```
23.01.2013 14:32:27.248 *WARN* [jackrabbit-pool-1] org.apache.jackrabbit.core.query.lucene.LazyTextExtractorField Failed to extract text from a binary property org.apache.tika.exception.TikaException: Unexpected RuntimeException from org.apache.tika.parser.microsoft.ooxml.OOXMLParser@5217e8de
                at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:122)
                at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:101)
                at org.apache.jackrabbit.core.query.lucene.JackrabbitParser.parse(JackrabbitParser.java:189)
                at org.apache.jackrabbit.core.query.lucene.LazyTextExtractorField$ParsingTask.run(LazyTextExtractorField.java:174)
                at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
                at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
                at java.util.concurrent.FutureTask.run(FutureTask.java:138)
                at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
                at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
                at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
                at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
                at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.poi.POIXMLException: java.lang.reflect.InvocationTargetException
                at org.apache.poi.xwpf.usermodel.XWPFFactory.createDocumentPart(XWPFFactory.java:60)
                at org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:256)
                at org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:196)
                at org.apache.poi.xwpf.usermodel.XWPFDocument.<init>(XWPFDocument.java:94)
                at org.apache.poi.xwpf.extractor.XWPFWordExtractor.<init>(XWPFWordExtractor.java:45)
                at org.apache.poi.extractor.ExtractorFactory.createExtractor(ExtractorFactory.java:111)
                at org.apache.poi.extractor.ExtractorFactory.createExtractor(ExtractorFactory.java:86)
                at org.apache.tika.parser.microsoft.ooxml.OOXMLParser.parse(OOXMLParser.java:47)
                at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:120)
                ... 11 more
Caused by: java.lang.reflect.InvocationTargetException
                at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
                at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
                at org.apache.poi.xwpf.usermodel.XWPFFactory.createDocumentPart(XWPFFactory.java:58)
                ... 19 more
Caused by: java.lang.NoClassDefFoundError: org/openxmlformats/schemas/wordprocessingml/x2006/main/SettingsDocument$Factory
                at org.apache.poi.xwpf.usermodel.XWPFSettings.readFrom(XWPFSettings.java:129)
                at org.apache.poi.xwpf.usermodel.XWPFSettings.<init>(XWPFSettings.java:43)
                ... 24 more
Caused by: java.lang.ClassNotFoundException: org.openxmlformats.schemas.wordprocessingml.x2006.main.SettingsDocument$Factory not found by org.apache.tika.bundle [63]
                at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:787)
                at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)
                at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)
                at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
                ... 26 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:39:37.830

这是由于 tika 0.6 捆绑包中缺少/不正确的依赖项。

我必须使用以下更改重新编译 tika 0.6 才能正常工作。然后我替换了 sling 独立 jar 文件中的 tika 包。请让我知道是否有更好的方法来做到这一点，因为我是一个 java 初学者。谢谢

对 tika-0.6.tika-parsers.pom.xml 所做的更改：

添加：

```
<dependency>
      <groupId>org.apache.poi</groupId>
      <artifactId>ooxml-schemas</artifactId>
      <version>1.1</version>
    </dependency>
    <dependency>
      <groupId>org.apache.poi</groupId>
      <artifactId>poi-ooxml-schemas</artifactId>
      <version>${poi.version}</version>
    </dependency> 
```

删除：

```
<dependency>
      <groupId>org.apache.geronimo.specs</groupId>
      <artifactId>geronimo-stax-api_1.0_spec</artifactId>
      <version>1.0.1</version>
    </dependency> 
```

# java - JScrollBar 在 JTextPane 中突出显示选定文本的位置

> ID：14512110
> 
> 赞同：0
> 
> 时间：2013-01-24T22:37:00.017
> 
> 标签：java, swing, jscrollpane, jscrollbar

我有`JTextPane`里面`JScrollPane`。当我在文本窗格中突出显示某些单词时，我希望突出显示它们的位置`JScrollBar`（类似于在 Eclipse 中突出显示源代码中的错误）。

Swing 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:55:10.543

您遇到的“直接”问题是滚动窗格不支持“行页脚”的概念，这将在滚动窗格的右侧为您提供一个区域，您可以使您突出显示点

![在此处输入图像描述](../Images/f86220a616ff2868b6f8f4811912a460.png)

## 选择#1

你需要的是一个可以做到的实现。您可以查看[`JideScrollPane`](http://www.jarvana.com/jarvana/view/com/jidesoft/jide-oss/2.1.1/jide-oss-2.1.1-sources.jar!/com/jidesoft/swing/JideScrollPane.java?format=ok)它不仅支持行页脚，还支持列页脚。

从那里开始，这是一个使用与装饰普通滚动窗格（行和列标题）相同的概念的简单案例。

查看[提供定制装饰](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#decorations)以获取一些提示。

## 选择#2

另一种选择（我能想到的）是使用 a将法线放置`JScrollPane`到 a 上，以便滚动窗格占据中心位置。然后，这将允许您将自定义组件放置到充当“标记”窗格的位置。`JPanel``BorderLayout``EAST`

这稍微简单一些，因为它不需要进行很多额外的更改。然后，您需要计算视口中文本的位置占其高度的百分比，这将允许您将其转换回“标记”窗格

# java - 使用准备好的语句执行更新查询

> ID：14512115
> 
> 赞同：0
> 
> 时间：2013-01-24T22:37:14.760
> 
> 标签：java, mysql, sql

```
 int selectie = toernooienUitvoer.getSelectedRow();
        int selectiec = toernooienUitvoer.getSelectedColumn();
        String primarykey =  (String) toernooienUitvoer.getValueAt(selectie, 0).toString();
        String waarde = toernooienUitvoer.getValueAt(selectie, selectiec).toString();

        String columnaam = toernooienUitvoer.getModel().getColumnName(selectiec).toString();
        String input = JOptionPane.showInputDialog("wijzig geselecteerde data", waarde);
        toernooienUitvoer.setValueAt(input, selectie, selectiec);   

PreparedStatement stat = con.prepareStatement("UPDATE fullhouse.toernooi SET ? = ? WHERE toernooi.T_code = ?");
        stat.setString(1, columnaam);
        stat.setString(2, input);
        stat.setString(3, primarykey); 
```

伙计们，如果我输入值，我知道查询是正确的。我猜我的错误是在preparedstatement中的某个地方我得到了一个MySQLSyntaxErrorException：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:38:49.750

我认为您不能使用占位符来动态传递列名，您的查询应该是：

```
"UPDATE fullhouse.toernooi SET colname = ? WHERE toernooi.T_code = ?" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:42:21.847

如其他答案所述，占位符`?`只能用于值，不能用于表名和列名。由于您没有重复使用，`PreparedStatement`这很简单。

从改变

```
PreparedStatement stat = con.prepareStatement("UPDATE fullhouse.toernooi SET ? = ? WHERE toernooi.T_code = ?") 
```

到

```
PreparedStatement stat = con.prepareStatement("UPDATE fullhouse.toernooi SET " + columnName + " = ? WHERE toernooi.T_code = ?") 
```

并调整`setString`调用中的索引参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:40:30.977

当您使用绑定变量时，这意味着该语句已预编译，并且在下一次执行时，它会更快。您试图将列的名称设为绑定变量，这是不可能的。

因为您显然需要更新几个不同的列，为了达到一定的速度，您应该声明几个准备好的语句，每列一个。把它们放在一个`HashMap<String, PreparedStatement>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T22:42:30.713

准备好的语句的列名不能是动态的，因为根据列名，查询计划会有很大的不同（例如，有时表扫描最快，有时使用索引，有时甚至更深奥）。

如果 SQL 不能依赖某个计划是最快的，那么它每次都需要提出一个新的计划——这意味着编写一个准备好的语句是没有意义的，这就是你不能这样做的原因。

# css - CSS：移动一个元素，覆盖它在 HTML 中的位置

> ID：14512119
> 
> 赞同：0
> 
> 时间：2013-01-24T22:37:38.570
> 
> 标签：css

假设我有这个 HTML 页面：

```
<body>
<p id="alice">Alice</p>
<p id="bob">Bob</p>
</body> 
```

这个假装的 CSS 语法：

```
p#alice:before { p#bob } 
```

换句话说，我想使用 CSS 覆盖 HTML，将 Bob 元素放在 Alice 元素之上。为什么？因为就我而言，我可以编辑 CSS，但无法编辑 HTML。

Bob 在 DOM 中不必实际出现在 Alice 之前，但它确实需要在视觉上出现在 Alice 之上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T01:33:27.343

使用完全灵活的纯 CSS 执行此操作的唯一方法是使用 flexbox。

[http://jsfiddle.net/S9L3r/](http://jsfiddle.net/S9L3r/)（不包括前缀）

```
body {
    display: flex;
    flex-flow: column nowrap;
}

#alice {
    order: 2;
} 
```

[http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:48:03.310

如果您能够添加代码，您始终可以使用 jQuery 来执行此操作。

```
$('#bob').insertBefore('#alice'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:42:50.533

这很容易但很难看，你不应该这样做。

然而，这里是如何做到这一点：

[http://jsbin.com/azevet/2/edit](http://jsbin.com/azevet/2/edit)

```
<div class="first-in-dom">
  Im first in DOM
  </div>
<div class="second-in-dom">
  Im second in DOM
  </div>

div {
  height:100px;
  border:solid;
}
.first-in-dom, .second-in-dom {
  position:relative;
}
.first-in-dom {
  margin-bottom:-100px;
    top:110px;

} 
```

# json.net - Incorrect date time format when writing out large files

> ID：14512134
> 
> 赞同：0
> 
> 时间：2013-01-24T22:38:46.640
> 
> 标签：json.net

I read large json file, change certain things and then write it back to disk:

```
using (var reader = new StreamReader(filePath))
        {
            var log = (JObject)JToken.ReadFrom(new JsonTextReader(reader));
            //log = UpdateOneLog(log);
            using (var writer = new StreamWriter(updateFilePath))
            {
                log.WriteTo(new JsonTextWriter(writer));
                writer.Close();
            }
            reader.Close();
        } 
```

or even

```
JObject o1 = JObject.Parse(File.ReadAllText(inputFile));
File.WriteAllText(outputFile, o1.ToString()); 
```

Weird things happen for certain files and I believe it has something to do with file size. The date time should be startedDateTime":"2013-01-17T11:00:40.000-06:00" but it gets written to the file as startedDateTime":"2013-01-17T11:00:40-06:00" (note that fractions of the second "000" is missing). I even commented out my update logic as shown above. All I am doing is reading file and writing it back but the date gets garbled..

Am I doing something wrong?

-Stan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:14:48.930

由于我仍然不清楚的原因（这可能是一个错误），Json.Net 有时会错误地解析日期/时间的毫秒部分。因此，例如在字符串“2013-01-17T11:00:40.230-06:00”中，毫秒部分“230”被删除，字符串变为“2013-01-17T11:00:40-06:00”是无效的。我发现的解决方法是在保存时遍历所有令牌并将毫秒替换为某个值，如下所示。

```
 [TestMethod]
    public void LoadAndSave()
    {
        var directory = @"..\..\Files";
        var inputFile = Path.Combine(directory, "LargeFile.har");
        var outputFile = Path.Combine(directory, "LargeFileResult.har");

        if (File.Exists(outputFile))
            File.Delete(outputFile);

        StreamWriter sw = null;
        JsonTextWriter jTextWriter = null;
        StreamReader sr = null;
        JsonTextReader jTextReader = null;
        try
        {
            sw = new StreamWriter(outputFile);
            jTextWriter = new JsonTextWriter(sw);
            sr = new StreamReader(inputFile);
            jTextReader = new JsonTextReader(sr);
            while (jTextReader.Read())
            {
                var tokenType = jTextReader.TokenType;
                var tokenValue = jTextReader.Value;
                var tokenString = jTextReader.Value as string;
                switch (tokenType)
                {
                    case JsonToken.Boolean:
                    case JsonToken.Bytes:
                    case JsonToken.Float:
                    case JsonToken.Integer:
                    case JsonToken.String:
                          jTextWriter.WriteValue(tokenValue);
                        break;                        
                    case JsonToken.Comment:
                        jTextWriter.WriteComment(tokenString);
                        break;
                    case JsonToken.Date:
                        DateTime date = (DateTime)tokenValue;
                        DateTime dateWrite = new DateTime(date.Year, date.Month, date.Day, date.Hour, date.Minute, date.Second, 100, date.Kind);
                        jTextWriter.WriteValue(dateWrite);
                        break;
                    case JsonToken.EndArray:
                        jTextWriter.WriteEndArray();
                        break;
                    case JsonToken.EndConstructor:
                        jTextWriter.WriteEndConstructor();
                        break;
                    case JsonToken.EndObject:
                        jTextWriter.WriteEndObject();
                        break;                        
                    case JsonToken.None:                                
                        break;
                    case JsonToken.Null:
                        jTextWriter.WriteNull();
                        break;
                    case JsonToken.PropertyName:
                        jTextWriter.WritePropertyName(tokenString);
                        break;
                    case JsonToken.Raw:
                        jTextWriter.WriteRaw(tokenString);
                        break;
                    case JsonToken.StartArray:
                        jTextWriter.WriteStartArray();
                        break;
                    case JsonToken.StartConstructor:
                        jTextWriter.WriteStartConstructor(tokenString);
                        break;
                    case JsonToken.StartObject:
                        jTextWriter.WriteStartObject();
                        break;                        
                    case JsonToken.Undefined:
                        jTextWriter.WriteUndefined();
                        break;
                    default:
                        break;
                }                                            
            }
        }
        finally
        {
            jTextReader.Close();
            sr.Close();
            jTextWriter.Close();
            sw.Close();               
        } 
```

# javascript - 骨干如何处理具有多个视图的相同模型

> ID：14512136
> 
> 赞同：1
> 
> 时间：2013-01-24T22:39:05.397
> 
> 标签：javascript, backbone.js

编辑：我可以将参数传递给新的视图声明吗？所以像

```
new articleView({
    template: "my desired template",
}) 
```

假设我有一个对象数组，其中每个对象代表一个主题并包含一些属性：标题、模板类型和文章数组。所有主题呈现几乎相同减去一些模板差异。

我正在使用主干，我有一个一般性问题：每个“主题”是否应该是同一集合类型的单独实例？我将在哪里声明要用于每个主题的模板类型？集合是否应该具有可变模板类型属性？

```
var topics = [
    {
        title: "Topic One",
        template: "detailedView",
        articles: [
            {
                 title: "A very good article",
                 timestamp: "2013-01-24"
            },
            {
                 //more articles here
            }
        ]
    },
    {
         //another topic here...
    }  

]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:18:41.337

要回答您的第一个问题，您当然可以在实例化新视图时传递参数。[文档](http://backbonejs.org/#View-constructor)的相关部分内容如下：

> 创建新视图时，您传递的选项（在合并到视图上已存在的任何默认选项后）将作为 this.options 附加到视图以供将来参考。

因此，您的`template`参数将在您的`view`实例中可用，如下所示：

```
var template = this.options.template; 
```

为了回答您的一般问题，我认为您的意思是我应该定义一个包含相同`model`类型的单独实例的单个集合来表示每个主题吗？在这种情况下，根据您对数据结构的描述，我建议这是一个很好的方法。主题`model`当然可以包含一个属性来标识它的模板。

# wpf - 如何使 WPF 视觉项目在宽度上延伸，但以最小宽度显示水平滚动条？

> ID：14512139
> 
> 赞同：1
> 
> 时间：2013-01-24T22:39:08.873
> 
> 标签：wpf, scrollviewer

我想要这种行为：

*   在 ScrollViewer 中有一个可视项（例如 Grid）
*   这个项目有一个 MinimunWidth 并且滚动查看器启用了水平滚动条
*   我希望该项目的宽度（容器的宽度）被拉伸，但是当该项目获得最小宽度时，将显示水平滚动条，然后当容器提供的宽度大于该项目的最小宽度时，该项目将再次拉伸。

实际行为：

这里的问题是，当显示水平滚动条时，视觉项目不再拉伸，并且无论容器大小都保持相同的宽度。请问，有人知道如何改变这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:51:21.147

此示例演示了您想要的行为：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
        <Grid MinWidth="200" MinHeight="200" Background="Red" />
    </ScrollViewer>
</Grid> 
```

# android - 在 webview 中，点击链接会在新活动中打开链接，但仍会在第一个活动中加载它

> ID：14512140
> 
> 赞同：0
> 
> 时间：2013-01-24T22:39:17.033
> 
> 标签：android, android-activity, sdk

我尝试包括相关位。我是这方面的新手，并且正在使用现有代码。我希望有人能指出我正确的方向。

基本上，假设我的网站是 www.mywebsite.com（我们称之为“A”，因为我只能发布两个超链接）并且您决定进行搜索，所以现在 URL 如下所示：

www.mywebsite.com/?s=notes（称之为“B”）

然后，您将获得带有搜索结果的 SearchPage 活动。现在假设我点击搜索结果中的链接。例子：

上面的网址/category/easy-news/（称之为'C'）

网站“C”应该在 PageActivity 中加载（它确实如此），但仍会在最初显示“B”的 SearchPageActivity 中加载。

最重要的是，似乎还有第三个 PageActivity（尽管它看起来不像第三次打开）。一个也再次加载“C”的。如前所述，它仍然是 PageActivity。按返回关闭 PageActivity 并显示另一个带有 URL 'C' 的 PageAccticity。

关闭第二次将我带回 SearchPageActivity，使用相同的 URL“C”，最初是“B”。再按一次让我回到同一活动中的“B”。

MainActivity 似乎没有这个问题，只是在 SearchPage 活动中。在 MainActivity 中，一切正常。下面的代码来自 SearchPage 活动。

对不起，冗长的消息。我希望有人能帮帮忙。谢谢。

谢谢。

```
private boolean isAppOrGamePage(String paramString) {
        if ((paramString == null)
                || paramString.length() < 24
                || (!paramString.substring(0, 24).equals(
                        "http://www.mywebsite.com")))
            return false;

        String str1 = paramString.substring(24);
        String str2 = str1.substring(0, 1 + str1.indexOf('/', 2));
        if ((!mAppIdentifiers.contains(str2))
                && (!mGameIdentifiers.contains(str2)))
            return false;
        return true;
    }

    public boolean shouldOverrideUrlLoading(WebView paramWebView,
            String paramString) {

        if (MainActivity.DEBUG)
            Log.e("shouldOverride", paramString);
        if (Uri.parse(paramString).getHost() != null
                && (!Uri.parse(paramString).getHost()
                        .equals("myspace.com"))
                && (!paramString.contains("facebook.com"))
                && (!Uri.parse(paramString).getHost()
                        .contains("twitter.com"))
                && (!Uri.parse(paramString).getHost()
                        .equals("goo.gl"))
                && (!Uri.parse(paramString).getHost().contains("bit.ly"))
                && (!Uri.parse(paramString).getHost()
                        .contains("plus.google.com"))
                && (!Uri.parse(paramString).getHost()
                        .contains("youtube.com")))
            if (isAppOrGamePage(paramString)) {
                final Intent intent = new Intent(SearchActivity.this,
                        PageActivity.class);
                intent.putExtra("app_url", paramString);
                startActivity(intent);
            } else
                return false;
        return false;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:43:52.690

当您打开其他活动时返回 true。您需要使用该调用。

Returning true tells the webview that you have handled it, and don't want it to do anything with it.

# c++ - C++ 三元组查找容器

> ID：14512141
> 
> 赞同：2
> 
> 时间：2013-01-24T22:39:24.883
> 
> 标签：c++, boost, stl

我想为枚举创建一个查找容器，其中每个条目都有三个字段，它们是：1）枚举值 2）人类可读的字符串 3）数据库字符串

这是我设想的每个枚举的声明：

```
namespace MyNameSpace
{
    enum Enum 
    {
        One,
        Two,
        Three
    };

    LOOKUP_MAP_BEGIN
        (One, "One", "1")
        (Two, "Two", "2")
        (Three, "Three", "3")
    LOOKUP_MAP_END
} 
```

诚然，我不是宏的忠实拥护者，但在这种情况下，它可以很好地清理事物，并有助于将映射条目保持在枚举附近，以帮助确保对枚举的更改得以延续。

假定所有条目都是唯一的。我希望能够使用三个字段中的任何一个作为键进行查找并检索其他两个字段中的任何一个。如果它能让事情变得更简单，我可以通过使用字符串字段作为键来限制查找以仅返回相应的枚举值而不是其他字符串来使其工作。

是否有一个现有的容器可以完成这样的事情，或者我是否正在考虑管理几个单独的（以某种方式）链接的地图/矢量/列表？我确实可以访问 Boost 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:46:47.877

boost multi_index 可能是您正在寻找的。

如果你想自己做，你可能会使用三个映射， 1`map<Enum, TUPLE_TYPE*>`和 2 `map<String, TUPLE_TYPE*>`，封装到它自己的类中，这样你就可以实现理智的破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:44:18.893

您可以使用内部数据库。将所有这些数据放入一个表中并进行查询。

# php - php script for geting form data in mysql db and displaying data on the page doesnt work in cyrillic

> ID：14512147
> 
> 赞同：0
> 
> 时间：2013-01-24T22:39:45.347
> 
> 标签：php

Again problem with script when i use cyrillic letters. I have simple php script witch gathers data from form, sets that in mysql db, and displays that data on the web page. The script is the simpliest as it can be. Im new in php programming so i watch many tuts, so to set story short, its simple script. It works ok when i use latin letters. BUT. When i use the same script (which obviously works) for inputs in cyrillic letters it shows error on "mysql_fetch_error"!? I red many coments about similar problem on internet, and theres no simple answer. Collation is ok, i tried with utf8-unicode, utf8-general and utf8-bin, again nothing.

```
 <?php
 if(isset($_POST['submit'])){
$con=mysql_connect('x','x','x');
    if(!$con){
    die("Cant connect:".mysql_error());
 }
 mysql_query('SET NAMES "UTF8"');

 mysql_select_db("x",$con);
 $ins = sprintf('INSERT INTO x  (`Име_и_презиме`,`Датум_рођења`,`Занимање`,`Град`,`Земља`,`Имејл`,`Скајп`) VALUES 
("%s", "%s", "%s", "%s", "%s", "%s", "%s")', 
mysql_real_escape_string($_POST['ime']),
mysql_real_escape_string($_POST['datum']),
mysql_real_escape_string($_POST['zanimanje']),
mysql_real_escape_string($_POST['grad']),
mysql_real_escape_string($_POST['zemlja']),
mysql_real_escape_string($_POST['email']),
mysql_real_escape_string($_POST['skype'])
);
mysql_query($ins,$con);
mysql_close($con);
}
?>

<?php
$con=mysql_connect('x','x','x');
if (!$con){
die("Cant connect:" . mysql_error());
}
mysql_query('SET NAMES "UTF8"');

mysql_select_db ("x",$con);
$sql="SELECT * FROM x"; 
$myData=mysql_query($sql,$con);
echo "<table border=1>
<tr>
<td>Име и презиме</td>
<td>Датум рођења</td>
<td>Занимање</td>
<td>Град</td>
<td>Земља</td>
<td>Email</td>
<td>Skype</td>
 </tr>";
 while($record=mysql_fetch_assoc($myData)){
 echo "<tr>";
 echo "<td>" . htmlspecialchars($record['Име_и_презиме']) . "</td>";
 echo "<td>" . htmlspecialchars($record['Датум_рођења']) . "</td>";
 echo "<td>" . htmlspecialchars($record['Занимање']) . "</td>";
 echo "<td>" . htmlspecialchars($record['Град']) . "</td>";
 echo "<td>" . htmlspecialchars($record['Земља']) . "</td>";
 echo "<td>" . htmlspecialchars($record['Имејл']) . "</td>";
 echo "<td>" . htmlspecialchars($record['Скајп']) . "</td>";

 echo "</tr>";}
 echo "</table>";   

 mysql_close($con);  
 ?> 
```

ERROR: Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in /home/xyz/public_html/form.php on line 46

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:02:54.637

将您的 php 文件设置为 UTF-8，尝试：

```
<?php

if(isset($_POST['submit'])){
    $con = mysql_connect('x','x','x');
    if(!$con){
        die("Cant connect:".mysql_error());
    }
    mysql_query('SET NAMES "UTF8"');

    mysql_select_db("x",$con);
    $ins = sprintf('INSERT INTO ДБ (`Име_и_презиме`,`Датум_рођења`,`Занимање`,`Град`,`Земља`,`Имејл`,`Скајп`) VALUES ("%s", "%s", "%s", "%s", "%s", "%s", "%s")', mysql_real_escape_string($_POST[ime]),mysql_real_escape_string($_POST[datum]),mysql_real_escape_string($_POST[zanimanje]),mysql_real_escape_string($_POST[grad]),mysql_real_escape_string($_POST[zemlja‌]),mysql_real_escape_string($_POST[email]),mysql_real_escape_string($_POST[skype])
);
    mysql_query($ins,$con);
    mysql_close($con);
}
?> 
```

请改用 mysqli 扩展...

# haskell - Haskell: Algebraic data type from List?

> ID：14512151
> 
> 赞同：1
> 
> 时间：2013-01-24T22:40:01.923
> 
> 标签：haskell

Assume I have a list [A, B, C]. Is there any way I can declare an algebraic data type based on that list with the following semantics:

```
data V = A | B | C 
```

Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:52:45.290

您想要的是动态生成的抽象数据类型，这在任何带有 ADT 的语言中听起来都相当不标准。

您可以做的是拥有一个具有单个构造函数的数据类型，然后是一个所谓的*smart-constructor*，它对可以传递给构造函数的值施加了一些逻辑。

```
data PermList a = PermList ([a] -> Bool) [a]

permList :: ([a] -> Bool) -> [a] -> PermList a
permList f xs | f xs      = PermList f xs
              | otherwise = undefined 
```

# java - Passing a local new object to a thread, thread safe?

> ID：14512152
> 
> 赞同：10
> 
> 时间：2013-01-24T22:40:04.160
> 
> 标签：java, multithreading, concurrency, thread-safety

I have a method (example below) which creates a new list, puts some stuff into it, and passes it along to another thread to operate on.

This seems thread safe. The list is local to the method which creates it. The method operates on the list and doesn't pass it to another thread until it is done operating on it.

But this *feels* wrong, because the list is accessed in two separate threads but it is not synchronized.

Is this acceptable thread-safe code?

```
class App
{
  public static void main(String[] args)
  {
    final ArrayList<Integer> list = new ArrayList<Integer>();
    list.add(4);
    list.add(5);

    final ExecutorService es = Executors.newSingleThreadExecutor();
    es.execute(new Runnable() {
        @Override public void run()
        {
          for (Integer i : list)
            System.out.println(i);
        }});
    es.shutdown();
  }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T22:44:29.987

这是安全的，因为一个线程写入列表，然后另一个线程从列表中读取，并且执行器服务在您提交任务时保证发生之前的关系。

[从文档中](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)引用：

> java.util.concurrent 及其子包中所有类的方法将这些保证扩展到更高级别的同步。尤其是：
> 
> [...]
> 
> 在将 Runnable 提交给 Executor 之前，线程中的操作发生在其执行开始之前。对于提交给 ExecutorService 的 Callables 也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:44:50.350

这是线程安全的，是的，因为它`main`正在*创建*这个线程，因为它正在构建启动底层线程的执行器，并且因为它通过一个`BlockingQueue`同步的。

你需要注意的是：

1.  将列表传递给对象构造函数内部的线程，因为 JIT 能够优化构造函数*外部*的字段初始化。

2.  将列表传递给另一个线程*而不进行*同步。例如，如果一个线程初始化列表，然后将其设置在可从另一个线程访问的本地字段上。

# codedom - How to get EnvDTE.CodeTypeRef from PropertyInfo.PropertyType (System.CodeDom.CodeTypeReference)

> ID：14512159
> 
> 赞同：1
> 
> 时间：2013-01-24T22:40:49.500
> 
> 标签：codedom, envdte

I am trying to get an `EnvDTE.CodeTypeRef` from a `PropertyInfo.PropertyType`.

I have tried the following

```
(EnvDTE.CodeTypeRef)(new CodeTypeReference(prop.PropertyType,CodeTypeReferenceOptions.GenericTypeParameter)) 
```

but get the following error message:

> Running transformation: System.InvalidCastException: Unable to cast object of type 'System.CodeDom.CodeTypeReference' to type 'EnvDTE.CodeTypeRef'.

So, basically my question is how do I take a `PropertyInfo.PropertyType` and get an `EnvDTE.CodeTypeRef` from it?

# hibernate - Hibernate Could not determine type for user type after migrate from session to entitymanager

> ID：14512161
> 
> 赞同：1
> 
> 时间：2013-01-24T22:40:56.780
> 
> 标签：hibernate, hibernate-mapping, entitymanager, usertype

I'm doing a migration from Session to JPA use, so I have most of the Mapping definitions in hbm.xml files. For this to work I create a persistence.xml file and reference my hibernate.cfg.xml from there . I also refactor my HibernateUtil and replace the use of SessionFactory and Session by EntityManagerFactory and EntityManager. Everything looks fine, so I start running test to see if I could build my EntityManagerFactory. Doing this I found that all my hbm.xml files are processing ok, but hibernate could not determine the type for User Types. How this User Types definition use to work with old hibernate.cfg.xml and SessionFactory, well I have a tag **typedef** on any hbm.xml file where I defined this like:

```
<typedef class="com.mycompany.myproduct.hibernate.MyUserType" name="my_type"/> 
```

And then I used in multiple hbm.xml files like this:

```
<property name="code" column="cod" type="my_type"/> 
```

So I have it defined once in some hbm.xml file but I could used on any other hbm.xml file only referenced by the alias. Now with JPA EntityManagerFactory it doesn't work in the same way, I mean I need to define the **typedef** tag on each hbm.xml file I want to use it or I will received an exception:

```
Caused by: org.hibernate.MappingException: Could not determine type for: my_type, at table: mytable, for columns ..... 
```

Question are:

*   Is this the expected behavior with EntityManagerFactory, or maybe I'm doing something wrong?
*   Is there any way I could define a typedef only once and used everywhere?

Thanks for your comments. Daniel

# c++ - 使用带模数的不同值时的速度差异

> ID：14512162
> 
> 赞同：0
> 
> 时间：2013-01-24T22:40:56.723
> 
> 标签：c++, c, gcc

我正在使用 gcc 4.6.3 并创建大量随机短裤。我使用以下语句生成它们：

```
val = SHRT_MAX; //as defined by limits.h
while(array<end) {
    *array++ = rand() % val;
} 
```

这是一个相当快的操作，即使对于多达 5,000,000 个元素的数组也几乎可以立即完成。我对数字变化较小的排序效率感到好奇，并将其更改为：

```
val = 3; 
```

这导致了相当大的速度差异，它的运行速度比原始语句慢得多。是什么导致了如此大的速度差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:04:05.960

`SHRT_MAX`很可能大于或等于`RAND_MAX`。该声明：

```
*array++ = rand() % val; 
```

可以优化为：

```
int rand_value= rand();
if (rand_value==RAND_MAX) rand_value= 0;
*array++= rand_value; 
```

这更快，因为它用分支替换了模数。第二个版本，其中`val`3，不能优化为一个没有模数的更简单的版本。

`% SHRT_MAX`不能简化为按位运算。但是结合如何`rand()`指定的知识，编译器当然可以优化处理`rand()`大于或等于的值的语句`RAND_MAX`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:52:48.940

编译器可以优化模数 (a%B) 的计算，其中 B 是一个常数。它用更简单的算术运算代替了实际的模数。[详细信息在诸如“在 C 中计算模数的最优化方法”](https://stackoverflow.com/questions/2661697/most-optimized-way-to-calculate-modulus-in-c)之类的主题中进行了解释。然而，对于某些 B 值，这种优化比其他值更快。

甚至 CPU 除法/模指令也可以完成不同数量的周期（至少在某些 CPU 上）。在此处查看 x86 的数字：http: [//gmplib.org/~tege/x86-timing.pdf](http://gmplib.org/~tege/x86-timing.pdf)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T00:12:41.597

SHRT_MAX 是一个`2^n-1`值，可以针对除法进行优化。除以 3 要困难得多，因此编译器很可能会决定除以 3（或者执行一些其他比`2^n-1`变体慢的魔术操作。

您可以使用的最快模数是 for `2^n`，可以用单个 and-instruction 替换，对于正值：`x % 256`与 相同`x & 255`。不幸的是，当值可能是负数时，这并不那么容易......

# java - Google云端硬盘更新时的GCM通知？

> ID：14512163
> 
> 赞同：0
> 
> 时间：2013-01-24T22:41:00.467
> 
> 标签：java, android, google-drive-api

我有一个 Android 应用程序，可将用户特定数据存储到用户 Google Drive 帐户，以便可以跨多个设备同步。这很好用，除非一台设备上传更改而另一台设备尚未检查更改。我想挂上 Google Cloud Messaging 来发送一条消息，通知其他设备他们应该提取新数据。现在，如果我正在管理后端服务器，这将很容易，但我无权访问 Drive 服务来包含它。目前有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T06:16:55.183

目前正在处理通过 webhook 推送通知。如果您想访问，您应该申请[Google Drive Early Access Program](https://developers.google.com/drive/earlyaccess)。

最初，仅支持通过 POST 向 Web 服务器发送通知，但您可以使用它来代理 Android 通知。稍后，预计将支持第一方 Android 通知。

# javascript - 用 Javascript 动画算法

> ID：14512164
> 
> 赞同：1
> 
> 时间：2013-01-24T22:41:00.933
> 
> 标签：javascript, jquery, animation, d3.js

我试图弄清楚如何为 JavaScript 中的算法制作动画。更一般地说，算法动画是如何用其他语言（即 Java）完成的？动画方面是否与算法逻辑分开？因此，例如，我有我的排序算法工作，我会有一个特殊的动画对象，它只是“观察”有问题的列表的状态是否有任何变化，或者是通知动画对象的算法逻辑中的片段修改列表，并调用必要的动画方法？

回到 JavaScript，在可能的情况下，我已经实现了一个有效的 Huffman 编码算法；我唯一想做的就是制作一个伴随动画来展示它实际在做什么。到目前为止，我的方法是使用[d3](http://mbostock.github.com/d3/)库或 jquery 来制作动画，我唯一坚持的是如何从我的算法代码中实际调用任何动画例程。

我意识到在 JavaScript 中不可能在一行代码处暂停执行（或等待）以完成动画。

有关解决此问题的最佳方法的任何建议？

**编辑：** 例如，下面的代码构建了一个元素队列，我想为正在构建的队列设置动画：

```
var i,j;
var input = $('#input').val();
var input_array = input.split('');
for (i=0; i<input_array.length; i++){
    var temp = new Node(input_array[i], 1);
    for (j=i+1; j<input_array.length; j++) {
        if (input_array[j] == input_array[i]) {
            temp.frequency++;
            input_array.splice(j, 1);
         }
     }
     Queue.push(temp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:51:11.560

要在 Javascript 中模拟动画，您可以随时间修改内联样式属性。

例如，要使 div 元素线性向右移动，您可以执行以下操作：

```
var div = document.getElementById("some-div");

//This would normally be done elsewhere
div.style.position = "absolute";
div.style.width = "100px;"
div.style.height = "100px;"
div.style.left = "0px";

//Called every 30 milliseconds
function animate() {
    div.style.left = (parseInt(div.style.left,10) + 5) + "px";
    setTimeout(function() {
       animate();
    }, 30);
}
animate(); 
```

但是，我建议您考虑使用 CSS3[过渡](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions)或[动画](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations)，因为它将站点逻辑与演示文稿分开并且使用的代码要少得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:05:57.353

现在这是一个非常广泛的问题要回答，但我会尝试涵盖它的某些方面..

我喜欢从动画的创作开始..

通常你会操纵某个元素的 css 使它看起来像一个动画。 .. 此外，复杂的动画涉及更多方面.. JQuery 库为您提供了一些非常酷的开箱即用动画，还有更高级的可以看到这里是一个简单的淡出动画，如果我不打算使用 jquery fadeOut （） 功能

```
var op = 1; // set opacity to one 

setInterval(function(){
  op = op - 0.1 // decrease the opacity by 0.1
  $('div').css({opacity : op  }); // selecting the element an apply the css on it 
},50) // over an interval of 50 ms 
```

现在关于停止动画或暂停它，没有什么是不可能的......以前的动画是一个例子.. [http://jsfiddle.net/9SaKL/1/](http://jsfiddle.net/9SaKL/1/)

可以做更多更酷的事情..但这只是一个蹩脚的例子（不要将它应用于现实生活中的项目哈哈）

请注意，重新邀请轮子没有用，只需使用基本的动画并组合在一起即可完成大量动画

```
I realize that its not really possible in JavaScript to pause execution at a line of code (or wait) for an animation to complete. 
```

完全错误，链接基本上是等待一个功能完成，然后再做另一个......清除间隔正在停止......

在现实生活中，如果有时间并且可以按时完成某些事情，那么您可以加快速度或减慢速度，或者您可以停止它，（时间除外，嗯？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:15:23.123

> 无法在一行代码处暂停执行或等待动画完成。

是的，这是真的，因为 JS 中的动画是异步的。您有 2 个选择：

*   使您的算法也异步。这将是一个函数，它获取算法的当前状态并在一个步骤后返回状态（和/或可能是步骤本身，因此可以选择匹配的单个动画）。然后每次都会从动画循环中调用 step 函数。
*   维护一个动画队列（我猜你的库有帮助函数）。然后按原样运行您的算法，并在每个步骤链中，在队列末尾执行另一个动画。算法运行后，启动动画队列。

选项 #1 更优雅，但当然更复杂 - 所有循环都需要成为递归函数等。但是，如果您的算法是非终止的，或者选项 #2 的动画队列会变得太长，这是唯一的可能性（和记忆吞噬）。

# file-upload - upgraded to IIS 7 and now large uploads are failing

> ID：14512165
> 
> 赞同：0
> 
> 时间：2013-01-24T22:41:13.177
> 
> 标签：file-upload, iis-7

I recently moved my classic ASP application from IIS 6 to IIS 7.5 and then received a lot of complaints when users tried to upload a lot of files or a large file.

After doing some research, I changed the maxRequestEntityAllowed, using the following command,

```
appcmd.exe set config -section:system.webServer/asp/limits.maxRequestEntityAllowed:"2147483647" /commit:apphost 
```

That immediately solved the issue. The problem is, it stops working at some point and the errors come back. It's as though the settings gets overwritten in the metabase but when I check the limits section in the ASP > Limits section, the new value is stil recorded.

If I re-enter the large valure again, the uploads work again. How is this being overwritten?

I have made sure that the this new value is set in the web.config file and the app.config file too. I have restarted IIS several time and event used the above appcmd when IIS was in a shutdown state.

Any help would greatly be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:52:34.333

原来是一个 404.15 错误的问题 - 查询字符串太长，并且有很多巧合。

# java - org.hibernate.TransientObjectException:Hibernate

> ID：14512167
> 
> 赞同：0
> 
> 时间：2013-01-24T22:41:24.113
> 
> 标签：java, hibernate

I am farily new to Hibernate and here i am stuck with a transientexception. Please help.

Exception occured while saving the object `Location` object references an unsaved--transient instance - save the transient instance before flushing: `<City object>; nested exception is org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing`

I am getting above exeption when i am trying to save data into my location table which has a City object with all its elements referring to null.

```
Location object       
   private String LocationAddress;  
   @ManyToOne
   @JoinColumn(name = "CITYID")
   private City city;

City
   private String cityName;
   private int cityId; 
```

In Location table `CityID` is nullable field because `city` is not a required field. And we have a city table which is a static table so we dont want to insert data in City table. Now when we are storing Location object. It stores data fine if City object has some values like some city. But throws exception when object contains a blank object(`cityName` and `cityId` are null)

Please help.

Example scenario

```
Successful
      Location 
       locationAddress = "test Address"
        city 
           cityId="1"
           cityName="testCity"

Failure
      Location 
           locationAddress = "test Address"
           city 
               cityId=null
               cityName=null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:06:47.537

如果您尝试保存一个`Location`实际引用**no** `City`的实例，那么您应该`Location.City`引用`null`，而不是创建`City`字段为 的实例`null`。

（ Hibernate 认为`City`哪些字段的实例`null`就像您想要在`cities`表中的哪些列值的新记录一样`null`- 这没有多大意义）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:52:28.937

如果没有看到您的代码，很难确定，但听起来您在保存课程`City`之前没有保存您的代码`Location`。您有两个持久化选项：

您可以使用`@Cascade`注释将插入从父级级联到子级。这样做，你可以坚持这个`Location`类，而 Hibernate 会处理剩下的事情。

```
@ManyToOne
@JoinColumn(name = "CITYID")
@Cascade(CascadeType.PERSIST)  //Or ALL if you want Updates, Deletes to go to
private City city; 
```

更多关于`@Cascade` [这里](http://docs.oracle.com/javaee/5/api/javax/persistence/CascadeType.html)。

如果您不想这样做，则需要`City`在保存`Location`.

# php - Magento：显示所有类别但无法获得关联图像

> ID：14512171
> 
> 赞同：0
> 
> 时间：2013-01-24T22:41:48.017
> 
> 标签：php, magento, magento-1.7

我遇到了一个奇怪但可能很容易解决的情况。

我在一个块中有以下代码：

```
<div class="home-categories">
    <?php $_helper = Mage::helper('catalog/category') ?>
    <?php $_categories = $_helper->getStoreCategories() ?>
    <?php foreach($_categories as $_category): ?>
        <a href="<?php echo $_helper->getCategoryUrl($_category) ?>">
            <img src="<?php echo $_category->getStoreIds(); ?>"/>
            <div class="category-title">
                <p><?php echo $_category->getName(); ?></p>
            </div>
        </a>
      <?php endforeach; ?>
</div> 
```

我得到的结果 HTML 返回了所有正确的细节，但 img src。我这样做正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T04:29:22.810

您没有获得图像 url 的原因是，默认情况下，Magento 模型不会加载所有属性。这样您就可以只加载您需要的属性，并且您的数据库查询不会那么昂贵。以下将解决问题。

```
$_helper = Mage::helper('catalog/category');
$_categories = $_helper->getStoreCategories(false, true, false);
$_categories->addAttributeToSelect('image'); 
```

看一下 getStoreCategories 的方法定义：

```
getStoreCategories($sorted=false, $asCollection=false, $toLoad=true) 
```

您希望该方法返回尚未加载的集合，因此返回 false、true、false 参数。在循环浏览要确保加载图像属性的类别之前，这就是 addAttributeToSelect('image') 调用的用途。

这比 $_category->load( $_category->getId()); 更有效。因为我们没有加载整个实体。现在，当您遍历类别时，您可以执行以下操作，并且您应该在图像标签中拥有图像 URL。

```
<img src="<?php echo $_category->getImageUrl(); ?>"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:57:51.787

原因是加载的类别集合不包含类别属性，而仅包含基本类别数据。您必须自己加载它们或在加载之前将它们添加到集合中（没有查看辅助函数，所以我不能确定在调用它之后是否可以这样做......）。

最简单的解决方案是更换线路

```
<img src="<?php echo $_category->getStoreIds(); ?>"/> 
```

和

```
<img src="<?php $_category->load( $_category->getId()); echo  $_category->getImageUrl(); ?>"/> 
```

# neural-network - One formula for Neural Network Design

> ID：14512180
> 
> 赞同：0
> 
> 时间：2013-01-24T22:42:07.317
> 
> 标签：neural-network

There is a famous formula (used e.g. in many Metatrader's MQL bound FANN derivatives)

n, n, n/2+1, 1

describing 4-layer (two hidden layers) network. Here n is the number of neurons in an input layer, the first hidden layer has n, the second n/2+1, and the output is a boolean.

Does anybody know the origin of this formula?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:36:54.977

3 层 MLP 可以逼近连续函数。

4 层 MLP 更加通用，可以处理不连续的函数（想想 step 或 Heaviside 函数）。

拓扑没有特别的韵律或原因，但有四层增强了适用性。

# opengl - OpenGL - Changing window size with object

> ID：14512181
> 
> 赞同：0
> 
> 时间：2013-01-24T22:42:09.103
> 
> 标签：opengl

I'm new with OpenGL and I read codes from different sources. I don't understand what function provide the change of object size with window.

Code 1 -> [http://codepad.org/1kSTAMOF](http://codepad.org/1kSTAMOF)

Code 2 -> [http://codepad.org/Gs7CeBW2](http://codepad.org/Gs7CeBW2)

math3d header for Code 2 ->http://codepad.org/Ptz3XBkp

Code 3 ->http://codepad.org/rFMWUktw

For example; the Code 1 and Code 2 create triangles and their sizes change with window size. However the Code 3 creates lines and their sizes doesn't change with changing window size. I don't understand which line of codes provide these properties and what must I do for provide same property for Code 3?(I couldn't share all links as link format because I'm not allowed)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:55:21.290

宽度为 1.0 的线总是光栅化 1 像素宽。无论窗口大小如何，使用`glLineWidth`都会将绘制的所有线条的宽度更改为相同大小。

要获得随窗口大小（或更准确地说是视口大小）变化而缩放的线条，您需要将它们渲染为填充图元（即 OpenGL 或 OpenGL ES 中的 GL_TRIANGLES 或 GL_TRIANGLE_STRIP）。[此处](https://stackoverflow.com/questions/14514543/opengl-es-2-0-dynamically-change-line-width/14515510#14515510)描述了您的问题的解决方案。它有点先进，但希望它对你有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:07:59.330

问题是，无论您放大多少或更改窗口大小，线的宽度都不会改变。使用 glLineWidth(width) 使线宽随窗口大小而变化

# php - 如何在 PHP 中创建 websockets 服务器

> ID：14512182
> 
> 赞同：111
> 
> 时间：2013-01-24T22:42:14.240
> 
> 标签：php, javascript, websocket

我正在寻找一个简单的代码来创建一个 WebSocket 服务器。我找到了 phpwebsockets，但它现在已经过时并且不支持最新的协议。我尝试自己更新它，但它似乎不起作用。

```
#!/php -q
<?php  /*  >php -q server.php  */

error_reporting(E_ALL);
set_time_limit(0);
ob_implicit_flush();

$master  = WebSocket("localhost",12345);
$sockets = array($master);
$users   = array();
$debug   = false;

while(true){
  $changed = $sockets;
  socket_select($changed,$write=NULL,$except=NULL,NULL);
  foreach($changed as $socket){
    if($socket==$master){
      $client=socket_accept($master);
      if($client<0){ console("socket_accept() failed"); continue; }
      else{ connect($client); }
    }
    else{
      $bytes = @socket_recv($socket,$buffer,2048,0);
      if($bytes==0){ disconnect($socket); }
      else{
        $user = getuserbysocket($socket);
        if(!$user->handshake){ dohandshake($user,$buffer); }
        else{ process($user,$buffer); }
      }
    }
  }
}

//---------------------------------------------------------------
function process($user,$msg){
  $action = unwrap($msg);
  say("< ".$action);
  switch($action){
    case "hello" : send($user->socket,"hello human");                       break;
    case "hi"    : send($user->socket,"zup human");                         break;
    case "name"  : send($user->socket,"my name is Multivac, silly I know"); break;
    case "age"   : send($user->socket,"I am older than time itself");       break;
    case "date"  : send($user->socket,"today is ".date("Y.m.d"));           break;
    case "time"  : send($user->socket,"server time is ".date("H:i:s"));     break;
    case "thanks": send($user->socket,"you're welcome");                    break;
    case "bye"   : send($user->socket,"bye");                               break;
    default      : send($user->socket,$action." not understood");           break;
  }
}

function send($client,$msg){
  say("> ".$msg);
  $msg = wrap($msg);
  socket_write($client,$msg,strlen($msg));
}

function WebSocket($address,$port){
  $master=socket_create(AF_INET, SOCK_STREAM, SOL_TCP)     or die("socket_create() failed");
  socket_set_option($master, SOL_SOCKET, SO_REUSEADDR, 1)  or die("socket_option() failed");
  socket_bind($master, $address, $port)                    or die("socket_bind() failed");
  socket_listen($master,20)                                or die("socket_listen() failed");
  echo "Server Started : ".date('Y-m-d H:i:s')."\n";
  echo "Master socket  : ".$master."\n";
  echo "Listening on   : ".$address." port ".$port."\n\n";
  return $master;
}

function connect($socket){
  global $sockets,$users;
  $user = new User();
  $user->id = uniqid();
  $user->socket = $socket;
  array_push($users,$user);
  array_push($sockets,$socket);
  console($socket." CONNECTED!");
}

function disconnect($socket){
  global $sockets,$users;
  $found=null;
  $n=count($users);
  for($i=0;$i<$n;$i++){
    if($users[$i]->socket==$socket){ $found=$i; break; }
  }
  if(!is_null($found)){ array_splice($users,$found,1); }
  $index = array_search($socket,$sockets);
  socket_close($socket);
  console($socket." DISCONNECTED!");
  if($index>=0){ array_splice($sockets,$index,1); }
}

function dohandshake($user,$buffer){
  console("\nRequesting handshake...");
  console($buffer);
  //list($resource,$host,$origin,$strkey1,$strkey2,$data) 
  list($resource,$host,$u,$c,$key,$protocol,$version,$origin,$data) = getheaders($buffer);
  console("Handshaking...");

    $acceptkey = base64_encode(sha1($key . "258EAFA5-E914-47DA-95CA-C5AB0DC85B11",true));
  $upgrade  = "HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: $acceptkey\r\n";

  socket_write($user->socket,$upgrade,strlen($upgrade));
  $user->handshake=true;
  console($upgrade);
  console("Done handshaking...");
  return true;
}

function getheaders($req){
    $r=$h=$u=$c=$key=$protocol=$version=$o=$data=null;
    if(preg_match("/GET (.*) HTTP/"   ,$req,$match)){ $r=$match[1]; }
    if(preg_match("/Host: (.*)\r\n/"  ,$req,$match)){ $h=$match[1]; }
    if(preg_match("/Upgrade: (.*)\r\n/",$req,$match)){ $u=$match[1]; }
    if(preg_match("/Connection: (.*)\r\n/",$req,$match)){ $c=$match[1]; }
    if(preg_match("/Sec-WebSocket-Key: (.*)\r\n/",$req,$match)){ $key=$match[1]; }
    if(preg_match("/Sec-WebSocket-Protocol: (.*)\r\n/",$req,$match)){ $protocol=$match[1]; }
    if(preg_match("/Sec-WebSocket-Version: (.*)\r\n/",$req,$match)){ $version=$match[1]; }
    if(preg_match("/Origin: (.*)\r\n/",$req,$match)){ $o=$match[1]; }
    if(preg_match("/\r\n(.*?)\$/",$req,$match)){ $data=$match[1]; }
    return array($r,$h,$u,$c,$key,$protocol,$version,$o,$data);
}

function getuserbysocket($socket){
  global $users;
  $found=null;
  foreach($users as $user){
    if($user->socket==$socket){ $found=$user; break; }
  }
  return $found;
}

function     say($msg=""){ echo $msg."\n"; }
function    wrap($msg=""){ return chr(0).$msg.chr(255); }
function  unwrap($msg=""){ return substr($msg,1,strlen($msg)-2); }
function console($msg=""){ global $debug; if($debug){ echo $msg."\n"; } }

class User{
  var $id;
  var $socket;
  var $handshake;
}

?> 
```

和客户：

```
var connection = new WebSocket('ws://localhost:12345');
connection.onopen = function () {
  connection.send('Ping'); // Send the message 'Ping' to the server
};

// Log errors
connection.onerror = function (error) {
  console.log('WebSocket Error ' + error);
};

// Log messages from the server
connection.onmessage = function (e) {
  console.log('Server: ' + e.data);
}; 
```

如果我的代码有任何问题，你能帮我解决吗？Firefox 中的 Concole 说

> Firefox 无法与位于 ws://localhost:12345/ 的服务器建立连接。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-01-25T04:11:22.737

我最近和你在同一条船上，这就是我所做的：

1.  我使用[phpwebsockets](http://socketo.me/)代码作为如何构建服务器端代码的参考。（您似乎已经这样做了，正如您所指出的，由于各种原因，该代码实际上并不能正常工作。）

2.  我使用 PHP.net 阅读了有关phpwebsockets 代码中使用的[每个套接字函数的详细信息。](https://www.php.net/manual/en/ref.sockets.php)通过这样做，我终于能够从概念上理解整个系统是如何工作的。这是一个相当大的障碍。

3.  我阅读了实际的[WebSocket 草案](https://www.w3.org/TR/websockets/)。在它最终开始深入理解之前，我不得不读了很多遍。在整个过程中，你可能不得不一次又一次地回到这个文档，因为它是一个具有正确、最新的权威资源有关 WebSocket API 的信息。

4.  我根据#3 中草稿中的说明编写了正确的握手程序。这还不错。

5.  握手后，我不断收到从客户端发送到服务器的一堆乱码文本，直到我意识到数据已编码并且必须取消屏蔽，我才弄清楚为什么。以下链接在这里帮助了我很多：（~~原[链接](http://srchea.com/blog/2011/12/build-a-real-time-application-using-html5-websockets/)坏了~~)[存档副本](https://web.archive.org/web/20120918000731/http://srchea.com/blog/2011/12/build-a-real-time-application-using-html5-websockets/)。

    请注意，此链接上提供的代码存在许多问题，如果不进一步修改将无法正常工作。

6.  然后我遇到了以下 SO 线程，它清楚地解释了如何正确编码和解码来回发送的消息：[如何在服务器端发送和接收 WebSocket 消息？](https://stackoverflow.com/questions/8125507/how-can-i-send-and-receive-websocket-messages-on-the-server-side)

    这个链接真的很有帮助。我建议在查看 WebSocket 草案时查阅它。这将有助于更好地理解草案所说的内容。

7.  此时我几乎完成了，但是我使用 WebSocket 制作的 WebRTC 应用程序出现了一些问题，所以我最终在 SO 上提出了自己的问题，我最终解决了这个问题：[WebRTC 候选信息末尾的这些数据是什么？](https://stackoverflow.com/q/14425382/8112776)

8.  在这一点上，我几乎已经完成了所有工作。我只需要添加一些额外的逻辑来处理连接的关闭，我就完成了。

这个过程总共花了我大约两周时间。好消息是我现在非常了解 WebSocket，并且我能够从头开始制作我自己的客户端和服务器脚本，它们运行良好。希望所有这些信息的高潮将为您提供足够的指导和信息来编写您自己的 WebSocket PHP 脚本。

*祝你好运！*

* * *

**编辑**：这个编辑是在我最初的回答之后的几年，虽然我仍然有一个可行的解决方案，但它还没有真正准备好分享。幸运的是，GitHub 上的其他人的代码与我的几乎相同（但更简洁），因此我建议使用以下代码作为有效的 PHP WebSocket 解决方案：
[https ://github.com/ghedipunk/PHP-Websockets/blob/master/ websockets.php](https://github.com/ghedipunk/PHP-Websockets/blob/master/websockets.php)

* * *

**编辑#2**：虽然我仍然喜欢将 PHP 用于许多与服务器端相关的事情，但我不得不承认我最近对 ​​Node.js 非常感兴趣，主要原因是因为它的设计更好比 PHP（或任何其他服务器端语言）更能处理 WebSocket。因此，我最近发现在您的服务器上设置 Apache/PHP 和 Node.js 并使用 Node.js 运行 WebSocket 服务器和使用 Apache/PHP 运行其他一切要容易得多。如果您处于无法安装/使用 Node.js for WebSocket 的共享托管环境中，您可以使用[Heroku等免费服务](https://www.heroku.com/free)设置 Node.js WebSocket 服务器并从您的服务器向它发出跨域请求。只要确保您这样做是为了将您的 WebSocket 服务器设置为能够处理跨域请求。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-25T11:27:04.353

据我所知，[Ratchet](http://socketo.me/)是目前最好的 PHP WebSocket 解决方案。由于它是[开源](https://github.com/cboden/Ratchet)的，您可以看到作者是如何使用 PHP 构建这个 WebSocket 解决方案的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-01-30T23:19:28.873

我已经在几个小时内搜索了可能执行 PHP + WebSockets 的最小解决方案，直到找到这篇文章：

[超级简单的 PHP WebSocket 示例](https://medium.com/@cn007b/super-simple-php-websocket-example-ea2cd5893575)

它不需要任何第三方库。

下面是如何做到这一点：创建一个`index.html`包含这个：

```
<html>
<body>
    <div id="root"></div>
    <script>
        var host = 'ws://<<<IP_OF_YOUR_SERVER>>>:12345/websockets.php';
        var socket = new WebSocket(host);
        socket.onmessage = function(e) {
            document.getElementById('root').innerHTML = e.data;
        };
    </script>
</body>
</html> 
```

并在浏览器中打开它，就在你`php websockets.php`在命令行中启动之后（是的，这将是一个事件循环，不断运行 PHP 脚本），带有这个[`websockets.php`](https://gist.githubusercontent.com/cn007b/4e9cc1f4fe7d9393c6a0a07747fc78fe/raw/e8f6b404d404deab81d23753ad84b68ed671163d/websockets.php)文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-11T09:12:01.037

需要在 base64_encoding 之前将密钥从十六进制转换为十进制，然后发送以进行握手。

```
$hashedKey = sha1($key. "258EAFA5-E914-47DA-95CA-C5AB0DC85B11",true);

$rawToken = "";
    for ($i = 0; $i < 20; $i++) {
      $rawToken .= chr(hexdec(substr($hashedKey,$i*2, 2)));
    }
$handshakeToken = base64_encode($rawToken) . "\r\n";

$handshakeResponse = "HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: $handshakeToken\r\n"; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-22T15:52:04.217

我在你的鞋子里呆了一段时间，最后最终使用了 node.js，因为它可以做混合解决方案，比如将 Web 和套接字服务器合二为一。所以php后端可以通过http向节点web服务器提交请求，然后用websocket广播它。非常有效的方法。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2013-11-30T15:21:10.073

```
<?php

// server.php

$server = stream_socket_server("tcp://127.0.0.1:8001", $errno, $errorMessage);

if($server == false) {
    throw new Exception("Could not bind to socket: $errorMessage");

}

for(;;) {
    $client = @stream_socket_accept($server);

    if($client) {
        stream_copy_to_stream($client, $client);
        fclose($client);
    }
} 
```

从一个终端运行：php server.php

从另一个终端运行：echo "hello woerld" | 数控 127.0.0.1 8002

# ruby-on-rails - Thinking Sphinx hangs while indexing

> ID：14512189
> 
> 赞同：1
> 
> 时间：2013-01-24T22:42:30.600
> 
> 标签：ruby-on-rails, sphinx, thinking-sphinx

I'm using Thinking Sphinx to index a single table with 43,000 records. When I try to index it, the process runs very slowly and freezes after 36,000.

I assumed that there was some problem with the data and tried to discover which index caused the problem. After removing all but 11 indexes, I still consistently see the error. But here's the rub: no single index appears to be the culprit. If I remove any one of the last 11, the process finishes without freezing. If I add it back, the problem comes back. (Though I have noticed that when I remove one of these indexes, the process still slows down a lot at 39,000.)

So now I'm stumped. I have plenty of ram and disk space, so that's not the issue. I set sql_range_step to 15000 and mem_limit to 2047M. Nothing helps.

Here is my pared-down list of indexes:

```
 define_index do
    indexes :email
    has :id, :as => :code
    has :premium_school_id
    has :current_employer_account_id
    has :years_experience_id
    has :user_status_id
    has practice_areas(:id), :as => :practice_area_ids
    has languages(:id), :as => :language_ids
    has preferred_employer_types(:id), :as => :preferred_employer_type_ids
    has geographical_regions(:id), :as => :geographical_region_ids
    has workflow_events(:id), :as => :workflow_event_ids
  end 
```

Any ideas are welcome.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T04:35:35.337

Pat Allan 最近为我回答了一个类似的问题，可能值得在这个线程上阅读，看看它是否有帮助。

基本上它与来自 has_and_belongs_to_many 关系的大量连接以及 Thinking Sphinx 生成结果 SQL 的方式有关。

[https://groups.google.com/d/msg/thinking-sphinx/CBdWy-RivaU/tBRlLci83IkJ](https://groups.google.com/d/msg/thinking-sphinx/CBdWy-RivaU/tBRlLci83IkJ)

# php - 如何在 wordpress 循环中仅获取图像 src

> ID：14512196
> 
> 赞同：1
> 
> 时间：2013-01-24T22:43:03.627
> 
> 标签：php, image, wordpress, loops, responsive-design

我正在制作一个响应式 WordPress 作品集网站 (www.jasongilmour.co.uk)，但我对 WP 主题开发知之甚少，所以我真的被一些 PHP 困住了。我希望通过为不同的设备加载不同的图像来使我的网站真正响应，但无法获得正确的代码......

我现在拥有的是从 maximage2 幻灯片的帖子中获取完整尺寸的图像。

```
<div id="maximage">
        <?php if ( have_posts() ) : while ( have_posts() ) : the_post();    

            $args = array(
                'post_type' => 'attachment',
                'numberposts' => -1,
                'post_status' => null,
                'post_parent' => $post->ID
            );

            $attachments = get_posts( $args );
                if ( $attachments ) {
                foreach ( $attachments as $attachment ) {
                echo wp_get_attachment_image( $attachment->ID, 'full' );
                }
            }

        endwhile; endif; ?>
    </div> 
```

我试图将它嵌入到`<picture>`标签中并只回显 src 但是当我使用`wp_get_attachment_image_src`它时返回 HTML“ `ArrayArrayArrayArray`”。我也试过把`echo wp_get_attachment_image( $attachment->ID, 'full', 'src'`，但这并没有改变返回的 HTML。

我不太了解 WP 文档，无法使其在...循环或数组中工作我认为这被称为？所以这对我来说不是很好。

这是我网站的一个非常重要的部分，因为我使用大量图像来保持我的设计理念，并且它使网站在缓存之前非常慢。

附言

虽然在过去的几周里我学到了很多东西，但我仍然不明白我在用 PHP 做什么......我只是一个平面设计专业的学生。

我也可能使主题开源，所以如果有人有兴趣获得副本，请告诉我。

在我满意之前，我还需要对平板设备上的鼠标悬停菜单问题进行排序，但我也不明白我在那里做什么。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:52:03.640

> 但是当我使用 wp_get_attachment_image_src 它返回 HTML

这是因为该函数根据[源](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)返回一个数组，其中包含图像 URL、宽度和高度。

所以：

```
list($url, $width, $height) = wp_get_attachment_image_src($attachment->ID, 'full');
printf('<img src="%s" width="%d" heigt="%d"', $url, $width, $height);

// or vprintf and directly pass the function call... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:25:28.000

好吧，它不像我希望的那样干净，但它确实有效，该网站现在快了一百万倍。Javascript 只是在某些屏幕尺寸下注释掉不需要的 HTML，这样我就可以获得我需要的所有图像尺寸，这意味着 PHP 没有改变。

```
<script>
document.write("<!--");
if (screen.width <= '400') {document.write(" good -->");}
</script>
<div id="maximage">
        <?php if ( have_posts() ) : while ( have_posts() ) : the_post();    

        $args = array(
            'post_type' => 'attachment',
            'numberposts' => -1,
            'post_status' => null,
            'post_parent' => $post->ID
        );

        $attachments = get_posts( $args );
            if ( $attachments ) {
            foreach ( $attachments as $attachment ) {
            echo wp_get_attachment_image( $attachment->ID, 'full' );
            }
        }

    endwhile; endif; ?>
</div>
<script>
 if (screen.width <= '400') {document.write("<!-- good ");}
</script>
-->

<script>
document.write("<!--");
if ((screen.width >= '401') && (screen.width <= '800')) {document.write(" good -->");}
</script>
<div id="maximage">
        <?php if ( have_posts() ) : while ( have_posts() ) : the_post();    

        $args = array(
            'post_type' => 'attachment',
            'numberposts' => -1,
            'post_status' => null,
            'post_parent' => $post->ID
        );

        $attachments = get_posts( $args );
            if ( $attachments ) {
            foreach ( $attachments as $attachment ) {
            echo wp_get_attachment_image( $attachment->ID, 'full' );
            }
        }

    endwhile; endif; ?>
</div>
<script>
 if ((screen.width >= '401') && (screen.width <= '800')) {document.write("<!-- good ");}
</script>
-->

<script>
document.write("<!--");
if ((screen.width >= '801') && (screen.width <= '1280')) {document.write(" good -->");}
</script>
<div id="maximage">
        <?php if ( have_posts() ) : while ( have_posts() ) : the_post();    

        $args = array(
            'post_type' => 'attachment',
            'numberposts' => -1,
            'post_status' => null,
            'post_parent' => $post->ID
        );

        $attachments = get_posts( $args );
            if ( $attachments ) {
            foreach ( $attachments as $attachment ) {
            echo wp_get_attachment_image( $attachment->ID, 'large' );
            }
        }

        endwhile; endif; ?>
</div>
<script>
 if ((screen.width >= '801') && (screen.width <= '1280')) {document.write("<!-- good ");}
</script>
-->

<script>
document.write("<!--");
if (screen.width >= '1281'){document.write(" good -->");}
</script>
<div id="maximage">
        <?php if ( have_posts() ) : while ( have_posts() ) : the_post();    

        $args = array(
            'post_type' => 'attachment',
            'numberposts' => -1,
            'post_status' => null,
            'post_parent' => $post->ID
        );

        $attachments = get_posts( $args );
            if ( $attachments ) {
            foreach ( $attachments as $attachment ) {
            echo wp_get_attachment_image( $attachment->ID, 'full' );
            }
        }

        endwhile; endif; ?>
</div>
<script>
 if (screen.width >= '1281') {document.write("<!-- good ");}
</script>
--> 
```

# c++ - linux中的taskset到底是做什么的？

> ID：14512197
> 
> 赞同：1
> 
> 时间：2013-01-24T22:43:06.177
> 
> 标签：c++, linux, tbb

我有一个程序在使用 Intel TBB 的 32 核系统上运行。我遇到的问题是，当我将程序设置为使用 32 个线程时，与 16 个线程相比，性能没有获得足够的提升（仅提升 50%）。但是，当我使用：

```
taskset 0xFFFFFFFF ./foo 
```

这会将进程锁定到 32 个核心，性能要好得多。

我有以下两个问题：

1.  为什么？默认情况下，操作系统无论如何都会将所有 32 个内核用于 32 线程程序。
2.  我假设即使使用`taskset`，操作系统也被允许（将）交换虚拟线程和物理线程，即线程没有被固定。我对吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:45:16.173

操作系统可能会选择使用较少的内核来进行缓存。想象一下，如果应用程序使用相同的内存集，那么每次写入都会导致缓存失效。强制锁定本质上是您告诉操作系统并发缓存开销不值得，继续使用所有内核。

您还必须记住还有其他进程要运行（例如内核中的 kthreads 和后台进程。）并且在内核之间迁移线程的成本很高，并且如果您的线程没有完成均匀的工作量，可能会导致不平衡。

还要记住，操作系统会尝试在所有进程的核心上平均分配工作，而不仅仅是您的进程。这意味着负载均衡器可能会选择不将您的进程放在所有 32 个内核上，因为当前还有其他进程正在运行，并且迁移成本可能很高，或者均匀分布您的进程可能会导致 cpu 内核之间的负载不平衡。操作系统力求最佳系统性能，不一定是每个应用程序性能最佳。

# php - 在 codeigniter 中包含文件

> ID：14512202
> 
> 赞同：0
> 
> 时间：2013-01-24T22:43:29.420
> 
> 标签：php, codeigniter

我正在使用 codeigniter 创建一个网站，并且我想包含菜单（选项）文件，这样我就可以节省我所有的时间来独立地将代码粘贴到我需要的每个视图上。或者即使有一个自定义函数的通用文件，我也可以在其中放置代码并调用函数。任何帮助。我的菜单选项如下。

```
 <h5>Admin Options</h5>
            <ul>
                <li><a href="">Portfolio</a>
                    <ul>
                        <li> <a href="category/addCategory">Add a Category</a></li>
                        <li> <a href="category/updateCategory">Edit/Delete Category</a></li>
                        <li> <a href="link/addLink">Add a Link</a></li>
                        <li> <a href="link/updateLink">Edit/Delete Link</a></li>
                    </ul>
                </li>

                <li>First</li>
                <li>First</li>
                <li>First</li>
                <li>First</li>

            </ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:46:16.583

只需将您的 HTML 放在视图文件“options_view.php”中，然后在您想要包含此 HTML 片段的任何地方加载该视图：

```
<?php $this->load->view('options_view') ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:47:41.323

请参阅[CodeIgniter 的文档](http://ellislab.com/codeigniter/user-guide/general/views.html)和[PHP 文档](http://dk1.php.net/manual/en/language.control-structures.php)。

对于自主学习，有话要说。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T22:47:56.273

模板化将是这个问题的答案。由于开箱即用 CI 将任何视图本质上视为其自己的页面，因此用户可以逐步加载其他视图或将除作为字符串加载的视图之外的所有视图包装到公共模板中。这里只是一个实现这一点的库：

[http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html](http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html)

就我个人而言，我不会像 Wolf 所说的那样逐步加载所有视图。除了它可能导致可维护性问题之外，这并没有什么问题。我会根据需要创建尽可能多的模板——例如，有些可能不需要选项视图——并为每种方法加载正确的模板。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T23:24:49.657

正如您从答案中看到的那样，有很多方法可以做到这一点，但老实说，我在模板库中没有看到这一点，因为您自己做相对容易。我为我的整个网站使用模板，因为这意味着我不必继续重写代码。下面是我的做法。

Template.php 这个文件加载模板的其他部分，它加载取决于用户是否登录的标题，因此我可以轻松添加用户菜单。

```
 <?php 
        if($this->session->userdata('is_logged_in'))
        {
            $this->load->view('templates/header-admin', $title);
        } else {
            $this->load->view('templates/header', $title);
        }
        $this->load->view('templates/sidebar',$sidebar_content);
        $this->load->view('pages/'.$main_content);
        $this->load->view('templates/footer'); 
    ?> 
```

这些页面中的每一个都是一个静态 html 文件，或者就主要内容和 sidebar_content 而言，它们是变量。因此，然后从控制器中加载我的视图（这是一个基本页面）

```
public function welcome()
{
    $data['main_content'] = 'welcome';
    $this->load->model('someModel');
    $data['someArray'] = $this->someModel->someFunction();
    $data['title']='Welcome to example.com';
    $data['sidebar_content'] = 'sidebar/no_sidebar';
    $data['additionalHeadInfo'] ='';
    $this->load->view('templates/template',$data);  
} 
```

所以上面发生的是第一行是加载到主要内容的实际视图，这是一个 php 页面，其中只有站点的中间内容。标题填写标题中的标题标签。侧边栏内容加载适当的 sidebar.php 页面（在这种情况下它是一个空文件）。额外的头部信息是这样我可以加载特定于单个视图的库或 css 页面。最后一行将所有内容结合在一起。

编辑 - 我添加了两行用于添加变量数据。因此，您可以像往常一样调用您的模型并返回数据，但将其返回到 $data 数组中的数组。然后在您的视图中，您将像这样访问它（变量显然是例如，您将使用模型返回的任何变量：

```
echo $someArray['userName']; 
```

为了记录正常的 PHP 包含语句在 CI 中工作得很好，它只是比创建模板更没有意义。

# wordpress - Wordpress 自定义分类移动 meta_box

> ID：14512203
> 
> 赞同：2
> 
> 时间：2013-01-24T22:43:30.567
> 
> 标签：wordpress

我有一个自定义元框（分类法），位于我的自定义帖子的一侧。我想将它移动到正常位置，但是当我删除它（remove_meta_box）并重新添加（add_meta_box）时，我只得到 bar，没有选择任何东西的选项。我想我没有写正确的 $callback，但我尝试了很多变体，但没有任何线索。

```
function create_isotope_taxonomies()
{
  $labels = array(
    'name' => _x( 'Select Category', 'taxonomy general name' ),
    'singular_name' => _x( 'Category', 'taxonomy singular name' ),
    'search_items' =>  __( 'Search Categories' ),
    'popular_items' => __( 'Popular Categories' ),
    'all_items' => null,
    'parent_item' => null,
    'parent_item_colon' => null,
    'edit_item' => __( 'Edit' ),
    'update_item' => __( 'Update' ),
    'add_new_item' => __( 'Add New' ),
    'new_item_name' => __( 'New Category' ),
    'separate_items_with_commas' => __( 'Separate writers with commas' ),
    'add_or_remove_items' => __( 'Add or remove categories' ),
    'choose_from_most_used' => __( 'Choose from the most used categories' ),
    'menu_name' => __( 'Categories' ),
  );

  register_taxonomy('fzisotope_categories','fzisotope_post',array(
    'hierarchical' => true,
    'labels' => $labels,
    'show_ui' => true,
    'show_admin_column' => true,
    'update_count_callback' => '_update_post_term_count',
    'query_var' => true,
    'rewrite' => array( 'slug' => 'fzisotope_categories' ),
  ));
}

function fzisotope_categories_meta_box(){
remove_meta_box('fzisotope_categoriesdiv', 'fzisotope_post', 'side');
        add_meta_box( 'fzisotope_categoriesdiv', 'Select Category', 'fzisotope_categories_meta_box', 'fzisotope_post', 'normal', 'high');
        //print '<pre>';print_r( $wp_meta_boxes['post'] );print '<pre>';
}
add_action( 'admin_init', 'fzisotope_categories_meta_box', 0 ); 
```

谢谢阅读

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:31:07.227

您必须使用： post_categories_meta_box 用于具有层次结构的分类法。

```
remove_meta_box('fzisotope_categoriesdiv', 'fzisotope_post', 'side');
add_meta_box( 'fzisotope_categoriesdiv', 'XXXXXXXXXXX', 'post_categories_meta_box', 'post', 'normal', 'high', array( 'taxonomy' => 'fzisotope_categories' )); 
```

# java - 无法修复 Java 中的 NoClassDefFound 错误

> ID：14512204
> 
> 赞同：0
> 
> 时间：2013-01-24T22:43:36.860
> 
> 标签：java, swing, applet, noclassdeffounderror, japplet

我在 Eclipse 中构建项目 - swing 小程序，现在我正试图在浏览器中运行它。

我有 3 个包，假设它们被称为：带有 .class 文件的“pkgApplet”、“pkgFirst”、“pkgSecond”。在 pkgApplet 我有 class "main" with method `main()`。无论我做什么，我都无法在浏览器中运行这个小程序。目前我的 html 代码看起来像这样

```
<applet code="bin/pkgApplet/main" height="1000" width="1000"/> 
```

无论我如何修改小程序标签，浏览器每次都会出现此错误：

```
NoClassDefFoundError with message bin/pkgApplet/main(wrong name: applet/main) 
```

我尝试使用`codebase`属性，将小程序打包到 .jar 文件中并使用`archive`属性，但似乎没有任何效果。你知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T22:47:18.957

Your applet format should be:

```
<applet codebase="bin" code="pkgApplet.main" height="1000" width="1000"></applet> 
```

`bin` is the default target directory (for Eclipse) so will require the codebase attribute as shown above. For this to work, your `HTML` file needs to be located in your project directory.

Note classes in Java start with uppercase, while package names are lowercase. Also its helpful to name classes describing what they do. You could have instead:

```
<applet codebase="bin" code="pkgapplet.MyMainApplet" height="1000" width="1000"></applet> 
```

Do you realize that nothing in `main` will be called by your applet client? Any startup functionality should be placed in the `init` method.

# sql - 将一批记录插入到 SQL Server 2008 中的一个表中，其中包含复合键

> ID：14512210
> 
> 赞同：1
> 
> 时间：2013-01-24T22:44:02.287
> 
> 标签：sql, sql-server, sql-server-2008, sts-springsourcetoolsuite

我是 Spring Source 和 SQL Server 的新手，很抱歉这个问题。我正在尝试将行插入表 ( `IN136_DMV_USED_CAR_SALES`)。这个表有一个复合键，它连接到另一个父表`EXT_INF_LOAD`。

到目前为止，我能够从输入文件中读取所有行并将所有行加载到`IN136_DMV_USED_CAR_SALES`具有两个键的表中：`EXT_INF_LOAD_ID`并`IN136_ID`使用以下 SQL 语句：

插入语句：

```
 String sql = "insert into dbo.IN136_DMV_USED_CAR_SALES (EXT_INF_LOAD_ID, IN136_ID, " + 
              "DEALER_NUM, " +
            "VSL_PURCHASE_DATE," +
                    "OWNERSHIP_ISSUED_DATE, " +
        "LAST_TRANSFER_DATE, " +
        "ODOMETER_CURRENT_DATE, " +
        "WORK_DATE, " +
                          "PURCHASE_PRICE, " +
        "VIN_HIN, " +
        "CURRENT_LICENSE, " +
        "REG_OWNER_NAME, " +
        "REG_OWNER_ADDRESS2, " +
        "REG_OWNER_ADDRESS3, " +
        "REG_OWNER_CITY_OR_STATE," +
        "LEGAL_OWNER_NAME," +
        "LEGAL_OWNER_ADDRESS2," +
        "LEGAL_OWNER_ADDRESS3," +
        "LEGAL_OWNER_CITY_OR_STATE," +
        "MAKE_BUILDER," +
        "YEAR_MODEL," +
        "VLF_CLASS," +
        "IRP_ACCOUNT_MX_NUM," +
        "IRP_ACCOUNT_NUM," +
        "IRP_ACCOUNT_USDOT_NUM," +
        "IRP_FLEET_MX_NUM," +
        "IRP_FLEET_NUM," +
        "IRP_FLEET_USDOT_NUM," +
        "IRP_VEH_MX_NUM," + 
        "IRP_VEH_USDOT_NUM) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";

JdbcTemplate jdbctempl = new JdbcTemplate(dataSource);
jdbctempl.update(sql, new Object[] {id1, id2++, 
        rec.getDealerNum(),
              rec.getVslPurchaseDate(),
              rec.getOwnershipIssueDate(), 
              rec.getLastTransferDate(), 
        rec.getOdometerCurrentDate(),
        rec.getWorkDate(), 
        rec.getPurchasePrice(), 
        rec.getVinHin(),
        rec.getCurrentLicense(),
        rec.getRegOwnerName(),
        rec.getRegOwnerAddress2(),
        rec.getRegOwnerAddress3(),
        rec.getRegOwnerCityOrState(),
        rec.getLegalOwnerName(),
        rec.getLegalOwnerAddress2(),
        rec.getLegalOwnerAddress3(),
        rec.getLegalOwnerCityOrState(),
        rec.getMakeBuilder(),
        rec.getYearModel(),
        rec.getVlfClass(),
        rec.getIrpAccountMxNum(),
        rec.getIrpAccountNum(),
        rec.getIrpAccountUsdotNum(),
        rec.getIrpFleetMxNum(),
        rec.getIrpFleetNum(),
        rec.getIrpFleetUsdotNum(),
        rec.getIrpVehMxNum(),
        rec.getIrpVehUsdotNum()}); 
```

我的问题是在`IN136_DMV_USED_CAR_SALES`（子表）中，复合键（）的列之一`EXT_INF_LOAD_ID`连接到`EXT_INF_LOAD`父表。

所以，我想我真正需要做的（但我不知道怎么做）是：

1.  有关的信息`EXT_INF_ID`将通过参数传递（我现在称其为“计数器”）。我将不得不阅读`EXT_INF`表格，看看是否能找到匹配项 ( `Counter = EXT_INF_ID`)。所以现在我在`EXT_INF`表中找到了行，我可以获取`EXT_INF_NAME`要填充到`EXT_INF_LOAD`表（`EXT_INF_FILE_NAME`列）中的列的值。

2.  由于我知道该行存在于`EXT_INF`表中，因此我可以先将新行插入父表 ( `EXT_INF_LOAD`)，然后再开始将新行添加到子表 ( `IN136_DMV_USED_CAR_SALES`) 中。
    要插入父表的新行将具有以下值：
    2.a `EXT_INF_ID = Counter`，
    2.b `EXT_INF_FILE_NAME = EXT_INF_NAME`（来自`EXT_INF`表）
    2.c `EXT_INF_LOAD_DATE`= todays-date
    2.d 但是 for`EXT_INF_FILE_NAME`呢？

3.  `IN136_DMV_USED_CAR_SALES`这样，当它们出现时，我将能够继续将其他新输入文件添加到表中。只要我对（父表）和（子表） `EXT_INF_LOAD_ID`都使用相同的值，对吗？`EXT_INF_LOAD``IN136_DMV_USED_CAR_SALES`

但后来我意识到 (2.d) 也不能通过另一个`counter2`参数传递，例如，因为`EXT_INF_ID`and的值`EXT_INF_LOAD_ID`必须是唯一的，即不允许重复...

我希望有人可以帮助我找到创建所有必需 SQL 语句的正确方法，因为我遇到了很多问题/异常错误。（我也是 SQL Server 的新手）

提前感谢您对此事的关注。抱歉，无法上传表格的图片，但以下是所有 3 个表格的 SQL 语句：

表 1：**EXT_INF**

```
SELECT [EXT_INF_ID]
      ,[EXT_INF_NAME]
      ,[EXT_INF_DESC]
  FROM [boeafspdev1].[dbo].[EXT_INF]
 where EXT_INF_ID = counter 
```

表 2：

```
SELECT [EXT_INF_ID]
  ,[EXT_INF_LOAD_ID]
  ,[EXT_INF_FILE_NAME]
  ,[EXT_INF_LOAD_DATE]
  ,[EXT_INF_COMMENTS]
FROM [boeafspdev1].[dbo].[EXT_INF_LOAD]
where EXT_INF_ID = counter 
```

# ios - 正确删除视图

> ID：14512214
> 
> 赞同：0
> 
> 时间：2013-01-24T22:44:11.190
> 
> 标签：ios, ios6

我有这段代码，它适用于 iPhone 4S 及更低版本。现在使用 iPhone 5s 4 英寸屏幕会引发错误。我可以通过评论来解决它，`[appDel.navController.view removeFromSuperview];`但我认为这不是正确的方法。我认为这也不是，如果有人能对此有所了解，那就太好了。

谢谢

代码：

```
[appDel.tabController setSelectedIndex:0];
[appDel.window addSubview:appDel.tabController.view];
[appDel.window bringSubviewToFront:appDel.navController.view];
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.6];
[UIView setAnimationDelegate:self];

[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:appDel.navController.view.superview cache:NO];
[appDel.navController.view removeFromSuperview]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:58:44.493

当您通过多个访问器引用某个对象时，例如“ `appDel.navController.view`”（我正在尝试为此考虑正式的 Objective C 名称，也许有人在路上看到我的答案会提醒我），很可能您可能会因结果与您期望的结果不同而被烧毁。

在我自己的代码中，我尝试进行尽可能多的错误检查。

下面的代码可能会帮助您隔离问题。实际上，您不需要这么多代码行，但这可能会帮助您了解这里可能出了什么问题。

```
if(appDel)
{
    if(appDel.navController)
    {
        if(appDel.navController.view)
        {
            [appDel.navController.view removeFromSuperview];
        } else {
            NSLog( @"the view of navController is NULL" );
        }
    } else {
        NSLog( @"navController is NULL" );
    }
} else {
    NSLog( @"appDel is NULL" );
} 
```

# php - 来自Mozilla的用户提交充满随机换行符

> ID：14512215
> 
> 赞同：0
> 
> 时间：2013-01-24T22:44:12.457
> 
> 标签：php, sql, firefox, line-breaks

我一直在建立一个网站，用户可以在其中提交日志和概要。这通过一个然后使用 $_POST 提交，并使用 SQL 查询将其放入 SQL 表中来工作。出于某种原因，仅在 MOZILLA FIREFOX 中（我已经在 chrome、IE、safari 甚至在 ipad（再次是 Safari）上进行了测试），当它到达 SQL 表时，它充满了随机换行符。当在站点的不同部分查看提交时，无论有什么换行符，所以肯定是Mozilla的提交步骤有问题。

那么Mozilla的问题是什么？我希望能提供任何帮助以防止这种情况发生，以下是提交的内容（删节以包括相关部分）：

用户在这种文本区域中输入值：

```
<form id="submitform" name="submitform" action="submit.php" onsubmit="return validateSubmitForm(event)" method="post">

    // some code

        <textarea style="height:300px;width:800px;font-family:Arial;border:1px solid #a6a6a6;
                         background-color:#fff9eb;resize:none" 
                  wrap="hard" size="1500" placeholder="1500 character limit..." maxlength="1500"
                  id="submitsummary" name="submitsummary" type="text"></textarea>

    // some code

</form> 
```

然后，在表单作为 $_POST 提交后，我基本上使用以下 SQL 查询将其输入到数据表中：

```
"INSERT INTO table (userid, header, synopsis) 
VALUES(1, 1, " . htmlspecialchars($_POST["submitsummary"]) . ")" 
```

关于为什么只有 Mozilla 存在问题的任何想法？另外，关于如何解决它的任何想法？非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:49:15.047

`wrap="hard"`已知 Firefox 存在问题。删除它并检查随机换行符是否消失。

还要`cols and rows attributes`为文本框设置 Firefox 也使用它来确定正确的换行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:51:50.567

I suspect your issue is wrap="hard". This requires you to use the cols attribute and it inserts newlines at the wrap points of text in the textarea.

Removing the wrap or setting wrap="soft" will result in the submitted data only having newlines where the user hit enter (or if the user pasted, only where the pasted data had newlines).

# html - HTML5 是一种编程语言吗？

> ID：14512218
> 
> 赞同：11
> 
> 时间：2013-01-24T22:44:25.510
> 
> 标签：html

如今，我们可以使用 HTML5 来制作应用程序，如 android、firefox os、iPhone、Blackberry 等。但是，我听说 HTML 是一种标记语言，不是用于编程的。即使有了 App 功能，HTML 仍然**只是**一种标记语言？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T22:45:51.560

编程语言具有 HTML5 所缺乏的某些特性，例如分支、循环等。HTML5 为一些交互特性定义了标记，但标记几乎完全是静态的（在元素的定义等中隐含了*一些交互）。*`select`您听到的许多“HTML5”功能根本不是 HTML5，而是您可以在功能适中的浏览器中使用 JavaScript（一种编程语言）执行的操作。

HTML5 越来越多地接管（或*已经*接管）定义网页结构*和*API 以从编程语言与它们交互的角色。在 DOM 规范中，这曾经是完全独立的，但现在很多都被合并到 HTML5 规范中。但同样，这只是定义 API。使用这些 API 的实际编码需要（在几乎所有情况下）实际的编程语言。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-24T23:53:55.830

**简短的回答：**没有。

**长答案**：不，不是。标准定义的 HTML 只是一种标记语言，与之前的版本完全一样。

*但是，这是什么意思？*这意味着它应该*构造*您的数据，允许您还使用标记定义语义，但它不能像使用编程语言那样处理或修改您的数据。此外，它没有*输入*或*输出*的概念，就像编程语言中的情况一样，您可以通过输入来分析和产生输出。

顺便说一句，HTML5 的出现伴随着对 Web 的更广泛兴趣以及更强大的技术（例如更新版本的 javascript 和 css），这使得新的 Web 应用程序更加强大和无限。

请阅读[这个很棒的资源](http://diveintohtml5.info/)以了解有关 HTML5 的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T22:52:46.103

HTML5 被认为是一种技术。是的，有第 5 版 HTML 标记语言，但您可能不是这个意思。

HTML5 更多地被认为是一种技术，包括 HTML、CSS3 和 javascript 以及它们在浏览器等工具中的大部分支持。所以事实上它可以被认为是需要编程的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-08T20:10:23.663

Programming do not means Turing Complete Language. It's a linguistic problem, programing means to plan something, and this Html does very well.

program (n.)

1630s, "public notice," from Late Latin programma "proclamation, edict," from Greek programma "a written public notice," from stem of prographein "to write publicly," from pro "forth" (see pro-) + graphein "to write" (see -graphy).

The meaning "written or printed list of pieces at a concert, playbill" is recorded by 1805 and retains the original sense. The sense of "broadcasting presentation" is from 1923.

The general sense of "a definite plan or scheme, method of operation or line of procedure prepared or announced beforehand" is recorded from 1837\. The computer sense of "series of coded instructions which directs a computer in carrying out a specific task: is from 1945.

The sense of "objects or events suggested by music" is from 1854 (program music is attested by 1877). Spelling programme, established in Britain, is from French in modern use and began to be used early 19c., originally especially in the "playbill" sense.

[source](https://www.etymonline.com/word/program#:%7E:text=program%20(n.),%22%20(see%20-graphy))

# asp.net-mvc - ASP MVC3 使用图像作为链接到不同的视图/控制器

> ID：14512220
> 
> 赞同：0
> 
> 时间：2013-01-24T22:44:32.873
> 
> 标签：asp.net-mvc, asp.net-mvc-3

抱歉，如果这是一个良性问题，但对于 ASP MVC3 来说仍然是新问题 - 使用图像作为链接的最佳语法是什么？它需要导航到`Index.cshtml`另一个控制器（称为`Home`）的页面。

我在下面的内容导致图像完全消失：

```
<a href="@Url.Action("Index", "Home")><img src="@Url.Content("~/Content/images/Monet3.png")" id="MonetSig" /></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:53:01.033

我认为可能是问题`"`后缺少一个关闭`@Url.Action("Index", "Home")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:59:39.160

我会使用 CSS 给锚点一个背景图像。通过这种方式，您可以轻松更改手机或平板电脑的图像：

CSS：

```
#MonetSig {
    display: block;
    width:100px; /* change this to your image width and height */
    height:100px;
    background: url('../images/Monet3.png') no-repeat;
} 
```

html:

```
<a id="MonetSig" href="@Url.Action("Index", "Home")"></a> 
```

# python - 使用 IN 子句替换 SQLAlchemy 原始 SQL 参数

> ID：14512228
> 
> 赞同：20
> 
> 时间：2013-01-24T22:45:06.680
> 
> 标签：python, sqlalchemy

我有一条 SQL 语句，`SELECT foo FROM bar WHERE id IN %s`. 我有一个整数列表，例如`[1, 2, 3]`，我希望它变成一个看起来像`SELECT foo FROM bar WHERE id IN (1, 2, 3)`.

我使用 SQLAlchemy Core 进行连接池，并使一些带有多个`VALUES`子句的插入更易于编写和维护。我更喜欢用原始 SQL 编写大部分查询。

要在 Pyscopg2 中执行此操作，我会执行`cursor.execute('SELECT .. WHERE IN %s', (tuple(my_list),))`. 但是，我无法在 SQLAlchemy 中完成这项工作。

`engine.execute('SELECT ... WHERE IN %s', tuple(my_list))`引发异常：TypeError：并非所有参数都在字符串格式化期间转换。如果我只传递列表而不是包含在元组中，则会引发同样的异常。

如果我使用像我这样的命名参数，`engine.execute('SELECT ... WHERE id IN :ids', ids=my_list)`我会得到一个`ProgrammingError`异常，因为 SQLAlchemy 创建了不正确的 SQL：（`SELECT * FROM foo WHERE id IN :ids`它不会用 :ids 值代替我的变量）。如果我传递一个元组，也会引发同样的异常。

如何`WHERE IN()`在 SQLAlchemy 中使用原始 SQL 的子句？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T23:17:13.883

这是一种仅由某些 DBAPI 支持的不寻常格式，因为它将项目元组呈现为单独的 SQL 表达式，包括在参数之间呈现逗号等，因此像这样的语句`execute("select * from table where value in %s", (somelist, ))`在数据库级别扩展为`select * from table where value in (1, 2, 3)`.

SQLAlchemy 并不期待这种格式 - 它已经对传入参数进行了一些检查，因为它涉及将参数路由到 DBAPI`execute()`或`executemany()`方法中，并且还接受一些不同的样式，这种转换的结果是这里的元组变平。您可以通过再添加一个元组来使您的元组通过此解析：

```
from sqlalchemy import create_engine

engine = create_engine("postgresql://scott:tiger@localhost/test", echo=True)

with engine.connect() as conn:
    trans = conn.begin()

    conn.execute("create table test (data integer)")
    conn.execute(
            "insert into test (data) values (%s)",
            [(1, ), (2, ), (3, ), (4, ), (5, )]
        )

    result = conn.execute(
                "select * from test where data in %s",
                (
                    ((1, 2, 3),),
                )
            )

    print result.fetchall() 
```

上述样式仅适用于某些 DBAPI。快速测试确认它适用于 psycopg2 和 MySQLdb，但不适用于 sqlite3。它更多地与 DBAPI 用来向数据库发送绑定参数的底层系统有关；psycopg2 和 MySQLdb 都做 Python 字符串插值和它们自己的转义，但是像 cx_oracle 这样的系统会将参数单独传递给 OCI，所以这种事情在那种情况下是行不通的。

SQLAlchemy 在使用 SQL 表达式结构时当然提供了[in_()](http://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html#sqlalchemy.sql.operators.ColumnOperators.in_)运算符，但这不适用于直接字符串。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-04-08T04:27:39.300

我使用 SQLAlchemy 0.9.8、python 2.7、MySQL 5.X 和 MySQL-Python 作为连接器，在这种情况下，需要一个元组。我的代码如下：

```
id_list = [1, 2, 3, 4, 5] # in most case we have an integer list or set
s = text('SELECT id, content FROM myTable WHERE id IN :id_list')
conn = engine.connect() # get a mysql connection
rs = conn.execute(s, id_list=tuple(id_list)).fetchall() 
```

希望一切都适合你。

# cakephp - CakePHP：缓存视图的内容类型标头

> ID：14512230
> 
> 赞同：0
> 
> 时间：2013-01-24T22:45:10.750
> 
> 标签：cakephp, cakephp-2.3

在 CakePHP 中，我有一个 rss 视图，它在`http://example.com/file.rss`. 因为`Router::parseExtensions('rss')`内容被正确处理为 xml/rss。

现在我`$this->cacheAction`用来缓存请求。一切正常：生成 rss 内容并在第一次请求后创建缓存文件。

但是会出现以下问题：第一个请求返回一个header `Content-type: application/rss+xml`（这是正确的）。第二个请求（这是缓存视图的结果）返回一个完全不同的 header `Content-type: text/html`。但为什么？如何确保始终获得 rss 标头？

我正在使用最新版本的 CakePHP 2.3。

我已经尝试`default.ctp`通过添加在 rss 布局文件中设置标题

```
// ...
?><!--nocache--><?php
header('Content-type: application/rss+xml');
?><!--/nocache--><?php
// ... 
```

和类似的代码片段，但没有成功。响应头仍然是 html 内容类型。

# ios - UIView 项目不会出现在 iOS 模拟器中

> ID：14512233
> 
> 赞同：0
> 
> 时间：2013-01-24T22:45:27.947
> 
> 标签：ios, uiview, ios-simulator, uitableview, uistoryboard

创建了一个 LocationDetailsViewController（UITableViewController 的子类）并在 Storyboard 中完成了一些布局工作。这个类是另一个导航控制器的一部分，它有两个条形按钮：取消和标记！

我的问题是，当我运行程序时，作为 LocationDetailsViewController 一部分的布局项都没有出现在视图中。标题和栏按钮看起来不错；但没有出现任何属于 LocationDetailsViewController 的内容。

知道为什么吗？

# javascript - 我的 Greasemonkey 脚本如何找到具有特定模式的链接？

> ID：14512236
> 
> 赞同：2
> 
> 时间：2013-01-24T22:45:45.153
> 
> 标签：javascript, html, hyperlink, greasemonkey

我的目标页面有一些链接，如：

```
http://example.com/ref.php?564646 
```

数字变化的地方。

如何使用 Greasemonkey 脚本找到这些链接并在页面顶部显示它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:17:54.737

要搜索 link 的任意模式，请使用*jQuery*和*正则表达式*(RegEx)`href`的强大功能。

 **然后使用 jQuery 添加克隆的链接并使用`GM_addStyle()`来定位和设置所有内容。

这是显示该过程**的完整脚本。**您还可以[**在 jsFiddle 上查看运行中的代码。**](http://jsfiddle.net/d4HuZ/1/)：

```
// ==UserScript==
// @name     Use jQuery and RegEx to match arbitrary links
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==

//--- Add a custom, regex-aware href selector
jQuery.extend (
    jQuery.expr[':'].hrefMatch = function (elem, J, Mtch, candidateNodeArry) {
        if (elem.hasAttribute ("href") ) {
            var zRegExp = new RegExp (Mtch[3], 'i');

            return zRegExp.test (elem.href);
        }

        return false;
    }
);

//-- Find links that match "ref.php?{some integer}"
matchedLinks = $("a:hrefMatch('ref\\.php\\?\\d+(?!\\w)')");

//-- Now add the links to the top of the page.
$("body").append ('<div id="gmMatchedLinks"></div>');
matchedLinks.clone (true, false). appendTo ("#gmMatchedLinks");

//-- Position the new links and style to taste.
GM_addStyle ( "                                 \
    #gmMatchedLinks a {                         \
        margin-right: 2em;                      \
    }                                           \
    #gmMatchedLinks {                           \
        position:   fixed;                      \
        top:        0px;                        \
        left:       0px;                        \
        background: orange;                     \
        padding:    1em;                        \
        z-index:    555;                        \
    }                                           \
" ); 
```**

# performance - 在 fortran (+openmp) 中尽可能快地找到随机列表之间的匹配项

> ID：14512237
> 
> 赞同：0
> 
> 时间：2013-01-24T22:45:47.350
> 
> 标签：performance, loops, fortran, openmp

我有两个列表，我需要将一个中的元素与另一个进行匹配，并将这些元素输出到一个新的矩阵（输出）中。Fortran 中最快的方法是什么？到目前为止的蛮力：

```
do i = 1,Nlistone
   do j = 1,Nlisttwo
     if A(i).eq.B(j) then
        output(i) = B(j)
     end if
   end do
end do 
```

openmp版本：

```
!$OMP PARALLEL PRIVATE(i,j)
do i = 1,NA
   do j = 1,NB
     if A(i).eq.B(j) then
        filtered(i) = A(j)
     end if
   end do
end do
!$OMP END PARALLEL DO 
```

肯定有更好的方法可以做到这一点，并且在这里排序不是一个选项抱歉（+向量元素没有任何特定的顺序）。是否有类似于`mask`python 的布尔参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:55:59.440

`ANY`使用类似这样的内在函数可能会更快

```
do i = 1,Nlistone
     if (any(B==A(i))) output(i) = A(i)
end do 
```

但我不会打赌这种改进的性能，我会测试两个版本。您应该能够安全地将其包装在`!$OMP PARALLEL DO`构造中，因为 的每个元素`output`仅由一个线程写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:36:11.737

You can also include the condition testing in a `forall` or (newer) `do concurrent` construct, which both use the same syntax:

```
do concurrent(i = 1:Nlistone, any(a(i) == b)) 
  output(i) = a(i)
end do 
```

This might be faster than your code listing, depending on the nature `A` and `B`. But it still has the same time complexity of O(n^2), while sorting can be O(n*log(n)). If `Nlistone /= Nlisttwo`, you could gain a factor equal to the ratio of these sizes, by only looping through the shorter array and matching its elements to the longer one.

# svn - 回滚树干然后分支

> ID：14512245
> 
> 赞同：0
> 
> 时间：2013-01-24T22:46:27.770
> 
> 标签：svn, tortoisesvn

我们的一位开发人员向主干添加了新功能，而不是创建分支。我们目前在修订版 3966 中作为 HEAD。该功能的工作从 3875 开始。使用 TortoiseSVN，完成以下任务的最佳方法是什么？

1.  将主干回滚到 3875。
2.  从修订版 3876-3966 创建分支
3.  完成该功能的开发后，重新集成回主干

这可以通过 TortoiseSVN 执行以下操作来最好地完成吗？

1.  在主干的工作副本上更新修订版本并返回 3875，提交这些更改。
2.  在 Repo Browser 中，右键单击 3966 版本并创建一个分支

...或者有其他方法吗？

我们的流程通常是这样工作的：

1.  主干仅用于次要/单个错误修复和集成分支
2.  分支用于包含错误修复的功能和/或冲刺，在集成到主干之前必须对其进行审查
3.  一旦分支完成并经过 QA/审查，它就会集成到主干中。
4.  一旦对错误修复的冲刺进行了 QA/审查，它就会集成到主干中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:57:52.463

您需要进行反向合并。[http://svnbook.red-bean.com/en/1.1/ch04s04.html#svn-ch-4-sect-4.2](http://svnbook.red-bean.com/en/1.1/ch04s04.html#svn-ch-4-sect-4.2)

我现在只需从主干创建一个分支，反向合并主干，然后将新分支合并到主干。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:04:10.977

虽然@j-set 是正确的，但我想在细节上不同意他的观点：我更喜欢看到未更改（未折叠）的修订历史，只更改修订必须在分支的“挂载点”

我下令得到它

1.  使用 Repo-browser|Log 从修订版 3875 创建分支，该分支必须是分支的起点 (fe FEATURE-X)（如果`svn diff -c 3875`将确认此修订版中的更改与功能相关）并且在 repo 中有两个 URL，稍后使用（repo/主干和回购/分支机构/FEATURE-X） ![回购浏览器日志](../Images/f9623ba5ad129f23592b871ee997570f.png)
2.  在修订版 REV+1 (3876) 中将主干检出到新的临时 WC
3.  切换到 repo/branchs/FEATURE-X
4.  提交，从原始版本重复日志消息（`svn log repo/trunk -r 3876-3966`寻求帮助）
5.  切换回 repo/trunk
6.  更新到历史上的下一个版本
7.  返回步骤 3，同时 r3966 不处理
8.  当所有与分支相关的修订将被克隆到分支时 - 反向合并从主干转移的修订并终止临时 WC

# postgresql - 用于具有大量更新的长期运行事务的数据库

> ID：14512250
> 
> 赞同：3
> 
> 时间：2013-01-24T22:46:49.357
> 
> 标签：postgresql, transactions, isolation-level, mvcc

我构建了一个用于数据提取和转换的工具。典型用例 - 以事务方式处理大量数据。

数字是 - 大约 10 秒 - 5 分钟的持续时间，200-10000 行更新（长时间不是由数据库本身而是由事务期间使用的外部服务引起的）。

访问数据库的代理有两种类型 - 多个读取代理和只有一个写入代理（因此，永远不会有多个并发写入）。

交易期间：

*   读取代理应该能够读取数据库并在当前状态下查看它。
*   写代理应该能够读取数据库（它可以在事务期间读取和写入）并在新的（尚未提交的）状态下看到它。

对于这种类型的负载，PostgreSQL 是一个不错的选择吗？我知道它使用 MVCC - 所以一般来说应该没问题，但是可以广泛使用长而大的交易吗？

还有哪些开源**事务**数据库可能是不错的选择（我不限于 SQL）？

附言

我不知道分片是否会影响性能。数据库将被分片。对于每个分片，将有多个读取器和一个写入器，但可以同时写入多个不同的分片。

我知道在交易期间最好不要使用外部服务，但在这种情况下 - 这是目标。该数据库用作一些重型、巨大、缓慢和最终一致的数据处理工具的可靠和一致的索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:17:12.730

*巨大的免责声明：一如既往，只有现实生活中的测试才能告诉你真相。*

但是，我认为 PostgreSQL 不会让你失望，如果你使用最新版本（至少 9.1，更好的 9.2）并适当地调整它。

我的服务器中的负载有些相似，但 R/W 比稍差：大约 10:1。事务的范围从几毫秒到 1 小时（有时甚至更长），一个事务可以插入或更新多达 10 万行。具有长事务的并发写入者总数可以达到 10 甚至更多。到目前为止一切顺利 - 我真的没有任何严重的问题，性能很棒（当然不会比我预期的差）。

真正有帮助的是我的热工作数据集几乎适合可用内存。

所以，试一试，它应该非常适合您的负载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:54:33.430

看看这个链接。[PostgreSQL 中的最大事务大小](https://stackoverflow.com/questions/709708/maximum-transaction-size-in-postgresql)

Basically there can be some technical limits on the software side to how large your transaction can be.

# java - 将 String 转换为 2D int 数组

> ID：14512251
> 
> 赞同：1
> 
> 时间：2013-01-24T22:46:53.990
> 
> 标签：java, multidimensional-array, type-conversion

我在从 String 转换为二维 int 数组时遇到问题。
假设我有：

```
String x = "1,2,3;4,5,6;7,8,9" 
```

（在我的程序中，它将是来自文本区域的字符串。）我想创建数组`n x n`

```
int[3][3] y = {{1,2,3},{4,5,6},{7,8,9}} 
```

（下一阶段所必需的。）我尝试拆分字符串并创建一维数组，但我不知道下一步该做什么。

* * *

正如您建议的那样，我首先尝试使用`;`then 进行拆分，`,`但我的解决方案不是很好。它仅在有`3 x 3`桌子时才有效。如何创建一个循环制作字符串数组？

```
public int[][] RunMSTFromTextFile(JTextArea ta)
    {
        String p = ta.getText();
        String[] tp = p.split(";");

        String tpA[] = tp[0].split(",");
        String tpB[] = tp[1].split(",");
        String tpC[] = tp[2].split(",");

        String tpD[][] = {tpA, tpB, tpC};

        int matrix[][] = new int[tpD.length][tpD.length];

        for(int i=0;i<tpD.length;i++)
        {
            for(int j=0;j<tpD.length;j++)
            {
                matrix[i][j] = Integer.parseInt(tpD[i][j]);
            }
        }
        return matrix;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:00:17.817

1.  拆分`;`以获取行。
2.  循环它们，增加一个计数器（例如`x`）
    1.  拆分`,`以获取每行的值。
    2.  循环这些值，增加一个计数器（例如`y`）
        *   解析每个值（例如使用 的`parseInt`方法之一`Integer`）并将其添加到`x,y`数组中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:50:50.193

If you have already created an `int[9]` and want to split it into `int[3][3]`:

```
for (int i = 0; i < 3; i++) {
  for (int j = 0; j < 3; j++) {
    toArray[i][j] = fromArray[(3*i) + j);
  }
} 
```

Now, if the 2-dimensional array is not rectangular, i.e. the size of inner array is not same for all outer arrays, then you need more work. You would do best to use a `Scanner` and switch between `nextString` and `next`. The biggest challenge will be that you will not know the number of elements (columns) in each row until you reach the row-terminating semi-colon

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T23:00:10.360

使用 split 后，看一下`Integer.parseInt()`以获取数字。

```
String lines[] = input.split(";");
int width = lines.length;
String cells[] = lines[0].split(",");
int height = cells.length;
int output[][] = new int[width][height];

for (int i=0; i<width; i++) {
    String cells[] = lines[i].split(",");
    for(int j=0; j<height; j++) {
        output[i][j] = Integer.parseInt(cells[j]);
    }
} 
```

然后你需要决定如何处理`NumberFormatExceptions`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T23:02:41.353

使用 2 个拆分的解决方案：

```
String input = "1,2,3;4,5,6;7,8,9";

String[] x = input.split(";");

String[][] result = new String[x.length][];
for (int i = 0; i<x.length; i++) {
    result[i] = x[i].split(",");
} 
```

这给出了一个二维字符串数组，您需要在之后解析这些整数，这取决于您对这些数字的用途。以下解决方案显示了如何在构建结果时解析它们：

```
String input = "1,2,3;4,5,6;7,8,9";

String[] x = input.split(";");

int[][] result = new int[x.length][];

for (int i = 0; i < x.length; i++) {
    String[] row = x[i].split(",");
    result[i] = new int[row.length];

    for(int j=0; j < row.length; j++) {
        result[i][j] = Integer.parseInt(row[j]);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-23T05:30:00.073

超级简单的方法！！！

```
package ADVANCED;
import java.util.Arrays;
import java.util.Scanner;

public class p9 {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Scanner sc=new Scanner(System.in);

        String x=sc.nextLine();
        String[] array = x.split(",");
        int length_x=array.length;
        int[][] two=new int[length_x/2][2];

        for (int i = 0; i <= length_x-1; i=i+2) {
            two[i/2][0] = Integer.parseInt(array[i]);
        }

        for (int i = 1; i <= length_x-1; i=i+2) {
            two[i/2][1] = Integer.parseInt(array[i]);
        }   
    }
} 
```

# php - Reversing the order of displayed data from a SELECT query

> ID：14512257
> 
> 赞同：0
> 
> 时间：2013-01-24T22:47:34.687
> 
> 标签：php, mysql

My website (thanks to help from many of you here on SO) is set up to display a fixed number of updates (52) where each Friday, one rotates out, and a new one rotates in. The 52 updates are displayed 4 per page across 13 pages. It works perfectly.

However, the new update appears at the END of the displayed updates. I would like the new update to be the first one people will see.

Here is my query:

```
$conn = dbConnect('query');
$updates = "SELECT update_id, update_title, update_desc, path
    FROM updates
    WHERE flag_live = ?
    ORDER BY update_id DESC
    LIMIT ?, ?";
$stmt = $conn->prepare($updates);
$stmt->bind_param('sii', $uLive, $offset, $limit);
$stmt->bind_result($uId, $uTitle, $uDesc, $uPath);
$stmt->execute();
$stmt->store_result();
$stmt->fetch(); 
```

I want the items to display in reverse order as they currently do. If I change the `ORDER BY` from `DESC` to `ASC` it picks a different set of data which I do not want. Thus, from my research I have seen that either `array_reverse()` or `rsort` would do the trick. I need to know what syntax is correct to use `array_reverse()` properly here.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:45:57.063

我和 PHP 相处得不太好，但是像这样？

```
$results = $stmt->fetchAll();
$results = array_reverse( $results );
foreach ($results as $row)
{
  /* $row will contain each row in the reversed array one at a time. do your usual process-one-row logic here */
} 
```

顺便说一句，当你不知道调用 PHP 函数时返回什么时，有一个非常有用的调试函数 var_dump。你可以在任何东西上调用它，它会递归地打印它的组成部分。

[http://au1.php.net/manual/en/function.var-dump.php](http://au1.php.net/manual/en/function.var-dump.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:54:08.593

也许尝试这样的事情：

```
$results = $stmt->fetchAll();
$results = array_reverse( $results ); 
```

下一部分可以通过几种不同的方式完成，因此这实际上取决于您将如何使用结果并对它们进行分页。

您可以使用`for`循环：[http](http://us3.php.net/manual/en/control-structures.for.php)
://us3.php.net/manual/en/control-structures.for.php 或`foreach`：[http ://us3.php.net/manual/en/control-structures.foreach.php](http://us3.php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:09:34.450

好的，经过大量的头撞后，我能够完成这项任务，尽管不是以我发布这个问题时考虑的方式。我最终做的是编写一个子查询，它允许我颠倒每个页面上显示的更新的顺序，正如你所知，这只会颠倒页面上可见的四个更新的顺序，而不是整体顺序选择的 52 个（见原始问题）。

下一步是“反转”我的分页系统......这不是一项小任务......重写逻辑，测试代码等。因此，通过使用子查询反转事物并反转我的分页，我实现了我的目标。

你所有的建议她都对最终结果有所帮助，尽管不是以预期的方式。如果这不像回答我自己的问题那样简洁，我提前道歉。

# php - PHP require failing even though is_file and is_readable works using absolute paths

> ID：14512258
> 
> 赞同：0
> 
> 时间：2013-01-24T22:47:37.630
> 
> 标签：php, require

I was having issues with another piece of code so I broke out this very simple part and put it in a new file:

Test file Location/Name

> /var/www/html/php/tst/test.php

Test file Content

```
<?php

if(is_readable('/var/www/html/php/put/json_load.php')){echo('Worked');}
if(is_readable('/var/www/html/php/put/cr_query.php')){echo('Worked2');}
if(is_readable('/var/www/html/php/put/json_crdata_decode.php')){echo('Worked3');}

require '/var/www/html/php/put/json_load.php';

echo('Worked4');

?> 
```

The output I get from this is

> WorkedWorked2Worked3

It seems to be stopping execution at require. I am fairly new to PHP, and have searched long and hard for a solution. Any help is appreciated.

If any more information is needed I'd be glad to provide it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:04:17.483

有三种可能：

*   json_load.php 通过调用 exit() 或 die() 停止脚本执行
*   json_load.php 触发错误。您的 display_error 设置为 0，因此您不会遇到任何反馈
*   分段故障

我怀疑选项 2。编辑您的 php.ini 并将 display_errors 设置为 1，然后重新启动服务器。如果你不知道 php.ini 在哪里运行 phpinfo() 函数，它会告诉你。

# php - php glob 不读取垂直图像

> ID：14512270
> 
> 赞同：-3
> 
> 时间：2013-01-24T22:48:07.443
> 
> 标签：php

有人知道如何编辑以下代码以准确显示目录中的垂直图像吗？默认似乎是水平的。非常感谢。

```
<?php
$files = glob("images/*.*");
for ($i=0; $i<count($files); $i++)
{
$num = $files[$i];
echo '<img src="'.$num.'" alt="">'."<br>
<br>
<br>
";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:34:02.273

即使我不明白您所说的“垂直图像”是什么意思，在您的情况下，仅从目录中获取图像更简单；

```
$images = glob('/path_of_images/*.{jpeg,jpg,png,gif}', GLOB_BRACE);
foreach ($images as $image) {
    // so you can check the current image is image that you are looking for
    $image_data = exif_read_data($image);
    if ($image_data that im looking for)
        printf('<img src="path_of_images/%s" alt=""><br>', basename($image));
    // or check size
    $image_size = getimagesize($image);
    if ($image_size[0] > $image_size[1]) {
        // this is landscape??? 
```

在此处查看更多详细信息：http: [//php.net/manual/en/function.exif-read-data.php](http://php.net/manual/en/function.exif-read-data.php)

# ruby - 在 Ubuntu Precise 中安装 ruby -gsl

> ID：14512274
> 
> 赞同：0
> 
> 时间：2013-01-24T22:48:20.400
> 
> 标签：ruby, ubuntu-12.04, lapack, blas, gsl

我有 Ubuntu Precise，但在软件仓库中找不到任何 lapack 或 blas。当我跑

```
sudo gem install gsl 
```

我得到一个错误输出。我有gsl 1.15。输出如下

```
Building native extensions.  This could take a while...
ERROR:  Error installing gsl:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.8 extconf.rb
checking gsl version... 1.15
checking gsl cflags... -I/usr/include
checking for main() in -lcblas... no
checking gsl libs... -L/usr/lib -lgsl -lgslcblas -lm
checking for round()... no
checking for rngextra/rngextra.h... no
checking for qrngextra/qrngextra.h... no
checking for ool/ool_version.h... no
checking for tensor/tensor.h... no
checking for jacobi.h... no
checking for gsl/gsl_cqp.h... no
checking for gsl/gsl_multimin_fsdf.h... no
checking for gsl_poly_solve_quartic() in -lgsl... no
checking for gsl_eigen_francis() in -lgsl... yes
checking for ndlinear/gsl_multifit_ndlinear.h... no
checking for alf/alf.h... no
checking rb-gsl version...1.14.7
checking ruby version... 1.8.7
checking for graph... yes
NOTE: Gem.searcher is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.searcher called from extconf.rb:245.
NOTE: Gem::GemPathSearcher#initialize is deprecated with no replacement. It will be removed on or after 2011-10-01.
Gem::GemPathSearcher#initialize called from /usr/lib/ruby/vendor_ruby/1.8/rubygems.rb:951.
NOTE: Gem::GemPathSearcher#find is deprecated with no replacement. It will be removed on or after 2011-10-01.
Gem::GemPathSearcher#find called from extconf.rb:245.
checking for narray.h... yes
checking for tamu_anova/tamu_anova.h... no
checking for main() in -ltamuanova... no
creating Makefile

make
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c sf_zeta.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c histogram3d.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c matrix.c
In file included from matrix.c:31:0:
matrix_source.c: In function ‘rb_gsl_matrix_to_s’:
matrix_source.c:878:11: warning: variable ‘min’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c siman.c
siman.c: In function ‘rb_gsl_siman_solver_solve’:
siman.c:572:38: warning: variable ‘ppp’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c deriv.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c sort.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c sf_dilog.c
sf_dilog.c: In function ‘rb_gsl_sf_complex_dilog_e’:
sf_dilog.c:29:7: warning: variable ‘status’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c const_additional.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c nmf_wrap.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c sf_airy.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c bspline.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c matrix_double.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c sf_mathieu.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c const.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c dht.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c root.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c signal.c
signal.c: In function ‘rb_gsl_fft_conv_corr’:
signal.c:108:28: warning: variable ‘stride3’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c ool.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c gsl.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c fft.c
fft.c: In function ‘rb_fft_complex_trans’:
fft.c:466:17: warning: variable ‘status’ set but not used [-Wunused-but-set-variable]
fft.c: In function ‘rb_gsl_fft_complex_transform’:
fft.c:500:17: warning: variable ‘status’ set but not used [-Wunused-but-set-variable]
fft.c: In function ‘rb_gsl_fft_complex_transform2’:
fft.c:520:17: warning: variable ‘status’ set but not used [-Wunused-but-set-variable]
fft.c: In function ‘rb_fft_real_trans’:
fft.c:669:17: warning: variable ‘status’ set but not used [-Wunused-but-set-variable]
fft.c: In function ‘rb_fft_halfcomplex_trans’:
fft.c:733:17: warning: variable ‘status’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c stats.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c rng.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c randist.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c oper_complex_source.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c multiset.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c sf_lambert.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c histogram_oper.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c alf.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c array.c
array.c: In function ‘cvector_set_from_narray’:
array.c:260:7: warning: variable ‘size’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c sf_coulomb.c
sf_coulomb.c: In function ‘rb_gsl_sf_hydrogenicR_e’:
sf_coulomb.c:38:7: warning: variable ‘status’ set but not used [-Wunused-but-set-variable]
sf_coulomb.c: In function ‘rb_gsl_sf_coulomb_wave_FG_array’:
sf_coulomb.c:90:16: warning: variable ‘stride’ set but not used [-Wunused-but-set-variable]
sf_coulomb.c: In function ‘rb_gsl_sf_coulomb_wave_FGp_array’:
sf_coulomb.c:115:16: warning: variable ‘stride’ set but not used [-Wunused-but-set-variable]
sf_coulomb.c: In function ‘rb_gsl_sf_coulomb_CL_array’:
sf_coulomb.c:168:7: warning: variable ‘status’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c sf_debye.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c multimin_fsdf.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c sf_elementary.c
sf_elementary.c: In function ‘rb_gsl_sf_multiply_e’:
sf_elementary.c:19:7: warning: variable ‘status’ set but not used [-Wunused-but-set-variable]
sf_elementary.c: In function ‘rb_gsl_sf_multiply_err_e’:
sf_elementary.c:31:7: warning: variable ‘status’ set but not used [-Wunused-but-set-variable]
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c poly2.c
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -DHAVE_NARRAY_H  -I/var/lib/gems/1.8/gems/narray-0.6.0.4/. -I/usr/local/lib/site_ruby/1.8/x86_64-linux -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC  -Wall -I../include  -I/usr/include  -c blas1.c 
```

有没有人建议我缺少什么或如何安装 ruby​​-gsl 并使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:05:32.540

这家伙有一个类似的问题：[安装 gsl gem的问题](https://stackoverflow.com/questions/7379729/problems-installing-gsl-gem)

从上面的答案看来，gsl 1.15 与 ruby​​-gsl 不兼容，是否有必要恢复到 1.14 版？您提到您在帖子中使用 gsl 1.15，所以也许这是您的问题？

# python - python中的面向对象设计问题，has-a vs. is-a

> ID：14512277
> 
> 赞同：0
> 
> 时间：2013-01-24T22:48:25.493
> 
> 标签：python, oop, class, inheritance

我仍然在 OOP 中找到自己的立足点，我对如何进行设计感到困惑。我有一些文件。他们都有标题，他们都有数据。有几种（25 种左右）文件类型。每种文件类型都有：名称、标题类型、数据格式和数据读取器（即我将编写的用于读取特定文件类型数据的方法）。特定的“数据阅读器”可能会从多个文件类型中读取数据。

最终，我需要数据集。一个数据集具有上述所有属性以及：从源文件中读取的所有数据，以及一些其他信息，例如文件名。

就像我说的，我将拥有 25 种左右的文件类型，运行代码可能会处理几百个数据集。文件类型将非常稳定。随着时间的推移，可能会添加更多内容，但现有文件类型的属性几乎不会改变，当然也不会在运行过程中改变。在数据集中，实际数据可能会随着处理而改变，但其关联文件类型的属性不会。

处理文件的第一步是读取它的标题并确定它属于什么文件类型。接下来，将通过调用适当文件类型的数据读取器来构造数据集。

现在，我被困在将文件类型属性放入数据集中的最佳方法上。说一个数据集是一个“文件类型”并让数据集继承自（或只是简单地实例化）文件类型会更可行，还是说一个数据集有一个文件类型并让文件类型更好？是数据集属性吗？我必须在 python 中执行此操作。在回答这个问题时是否有任何特定于 python 的注意事项。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:05:13.727

如果我理解正确，您有几种类型的文件或不同的文件格式。这些文件具有数据集，并且这些数据集的格式并不特定于给定类型。

在这种情况下，我将有一个类来推断文件类型并推断数据格式。一旦推断出文件类型和文件格式，您就可以创建适当的文件类型和数据格式对象。

```
class Detector(object):
    @classmethod
    def detect(cls, filename):
       """Return a file object"""
       pass

    @classmethod
    def infer_filetype(cls, header):
       pass

    @classmethod
    def infer_data_format(cls, contents):
       pass

class File(object):

    def __init__(self, reader)
        pass

    def data(self):
       pass
    ...
    # Other attributes.

class Reader(object)
    """An iterable to read the contents""" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:02:23.757

如果我理解正确，我会这样做：

```
class DataReader: #Your base for all readers
    @classmethod
    def read (_, file): pass #magic happens here

class DataReaders:
    def __init__ (self):
        self.__readers = # something like {FileType1: reader1, FileType2: reader1, FileType3: reader3}
    def __getitem__ (self, fileType): return self.__readers [fileType]

class DataSet:
    def __init__ (self, file, readers):
        self.__file = file
        self.readFileType ()
        self.data = readers [self.__fileType].read (file)

    def readFileType (self):
        self.__fileType = #parse the header of the file or whatever

readers = DataReaders ()
ds1 = DataSet (file1, readers)
ds2 = DataSet (file2, readers) 
```

# c - C中的二维数组和指针

> ID：14512278
> 
> 赞同：0
> 
> 时间：2013-01-24T22:48:28.330
> 
> 标签：c, pointers

使用指针处理二维数组是个好主意吗？

```
for( p = &a[0][0]; p < &a[N][N]; p++){
    *p = 0;
} 
```

还是使用索引更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:55:35.300

您表示数组的方式并不能保证指针算术始终有效。鉴于您声明二维数组的方式，这可能不是问题，但它肯定不是好的风格。

然而，想象一下这个数组是动态分配的。像这样的东西：

```
int **p = malloc(ARR_SIZE * sizeof(*p));
for (i = 0; i < ARR_SIZE; i++) {
    p[i] = malloc(ARR_SIZE * sizeof(**p));
} 
```

这是一个二维数组（排序），但不能保证分配的内存是连续的，因此会破坏你的循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:51:16.073

You should alway use indexing, unless you are absolutely sure that you know what you are doing, and have some very good reason why you don't want to use indexing for array

It is much easier to understand and maintain. If someone else is looking at your code it will be easier for them, also it is more resistant to errors. Pointers are great thing, but lot of people use them in wrong way and abuse them, making programs difficult to understand, maintain and find and solve bugs in them. From my professional experience it is much better not to create "magic" with pointers unless you really have to and are absolutely sure that you know what you are doing.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:56:13.457

不，**这不是**因为数据可能不会被同时存储（上面的代码假定行的第一个元素正好在前一行的最后一个元素之后开始）。

# javascript - 如何阻止网站加载但仍访问其文档属性。

> ID：14512279
> 
> 赞同：1
> 
> 时间：2013-01-24T22:48:42.277
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我正在开发一个 FF 插件 - 对于它的特殊功能，我需要当前加载在活动选项卡上的网站的正文代码。为此，我通常去所需的网站并单击小部件....我可以通过以下代码执行此操作

```
tabs.activeTab.attach({
contentScript: 'self.postMessage(document.body.innerHTML);',
onMessage: function (message) {
console.log(message); 
```

这只有在加载网页时才有可能。在标签上加载网页之前，我可以访问它的 body.innerHTML 吗？

# php - 为什么我仍然没有完成这段代码？

> ID：14512281
> 
> 赞同：-5
> 
> 时间：2013-01-24T22:48:54.557
> 
> 标签：php

我已经尝试过更改引号、点，但仍然出现错误。找不到错误！

```
$Title .= '
        <meta property="og:description" content="<?php
  if ( function_exists('wpseo_get_value') ) {
    echo wpseo_get_value('metadesc');
  } else {
    echo $post->post_excerpt;
  }
?>"/>
    '; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:50:02.360

你得到一个错误，因为你没有在其他事情中转义你的引号。你需要的是：

```
$Title .= '<meta property="og:description" content="';
if ( function_exists('wpseo_get_value') ) {
    $Title .= wpseo_get_value('metadesc');
} else {
    $Title .= $post->post_excerpt;
}
$Title .= '"/>'; 
```

# batch-file - CMD：`DIR *.ext` 和 `FOR ... (*.ext)` 匹配太多

> ID：14512282
> 
> 赞同：1
> 
> 时间：2013-01-24T22:49:07.020
> 
> 标签：batch-file, cmd

在 Windows Command Shell 中，如何获得 FOR 循环或 DIR 命令以*仅*匹配提供的文件扩展名模式？或者换一种说法，如何进行非贪心扩展匹配？

比如一个目录包含`floo.tif`, `floorbar.tiff`,`floormatic.tifw`我只想操作`floo.tif`

```
for %%a in (floo*.tif) do @echo %%a 
```

结果是：

```
floo.tif
floorbar.tiff
floormatic.tifw 
```

这是期望的结果：

```
floo.tif 
```

`dir *.tif`有相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:46:51.363

我想到的是：

```
dir /b | findstr /i "^floo.*\.tif$" 
```

或者

```
dir /b floo*.tif | findstr /i "tif$" 
```

两者都将阻止匹配 .tiff 和 .tifw，从而为您提供预期的结果。

的正则表达式词汇量`findstr`非常有限。例如，您无法`\w`匹配单词字符，并且`(foo|bar|baz)`不支持表示法。但至少它提供了比标准通配符匹配更精细的控制。执行`findstr /?`以查看支持的语法。

```
for /f "delims=:" %%I in ('dir /b floo*.tif ^| findstr /i "tif$"') do (
    rem process each %%I match
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:10:43.347

```
for /f "eol=: delims=" %%a in (
  'dir /b /a-d floo*.tif^|findstr /ix "floo.*\.tif"'
) do echo %%a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T00:54:06.870

我有一个 Win32 命令行实用程序，用于查找我很久以前编写的文件名，并且由于它与长文件名匹配，因此不会遇到该问题： [vfind.exe](http://david.tribble.com/programs.html#vfind)。（源代码也可用于它。）

我这样使用它：

```
for /f "delims=" %%i in ('vfind floo*.tif') do @echo %%a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T20:26:24.080

这就是我最终为手头的项目所做的，不过下次我会考虑使用@dbenham 和@rojo 推荐的@Loadmaster 的vfind 或findstr。

```
for %%a in (*.tif) do (
  if /i "%%~xa"==".tif" @echo Doing something to %%a...
  ) 
```

优点`if`是不需要运行任何其他程序，因此它更快，更紧凑，更容易在以后进行心理解码。vfind 的优点是它完全直接和清晰，而 findstr 在模式匹配中提供了更多的控制。

# entity-framework-4.1 - 实体框架 - 有没有办法在没有 Include() 的情况下自动预加载子实体？

> ID：14512285
> 
> 赞同：79
> 
> 时间：2013-01-24T22:49:27.227
> 
> 标签：entity-framework-4.1, entity, code-first, entity-framework-4.3

有没有办法装饰你的 POCO 类来自动加载子实体，而不必`Include()`每次加载它们时都使用它们？

假设我有一辆汽车，具有轮子、门、发动机、保险杠、窗户、排气等复杂类型的属性。在我的应用程序中，我需要从我的 DbContext 20 个不同的地方加载我的汽车，并使用不同的查询等。我不想每次我想装载我的汽车时都指定我想包含所有属性。

我想说

```
List<Car> cars = db.Car
                .Where(x => c.Make == "Ford").ToList();

//NOT .Include(x => x.Wheels).Include(x => x.Doors).Include(x => x.Engine).Include(x => x.Bumper).Include(x => x.Windows)

foreach(Car car in cars)
{

//I don't want a null reference here.

String myString = car.**Bumper**.Title;
} 
```

我可以以某种方式装饰我的 POCO 类或在我的`OnModelCreating()`或在 EF 中设置一个配置，告诉它在我装载汽车时只装载我汽车的所有部件吗？我很想这样做，所以我的理解是让我的导航属性虚拟化已经过时了。我知道 NHibernate 支持类似的功能。

只是想知道我是否遗漏了什么。提前致谢！

干杯，

弥敦道

我喜欢下面的解决方案，但**想知道是否可以嵌套对扩展方法的调用。**例如，假设我对 Engine 有类似的情况，它有很多我不想在任何地方都包含的部分。我可以做这样的事情吗？（我还没有找到一种可行的方法）。这样，如果以后我发现Engine需要FuelInjectors，我可以只在BuildEngine中添加它，而不必在BuildCar中也添加它。**另外，如果我可以嵌套调用，如何嵌套调用集合？想从我的 BuildCar() 中为我的每个轮子调用 BuildWheel()？**

```
public static IQueryable<Car> BuildCar(this IQueryable<Car> query) {
     return query.Include(x => x.Wheels).BuildWheel()
                 .Include(x => x.Doors)
                 .Include(x => x.Engine).BuildEngine()
                 .Include(x => x.Bumper)
                 .Include(x => x.Windows);
}

public static IQueryable<Engine> BuildEngine(this IQueryable<Engine> query) {
     return query.Include(x => x.Pistons)
                 .Include(x => x.Cylendars);
}

//Or to handle a collection e.g.
 public static IQueryable<Wheel> BuildWheel(this IQueryable<Wheel> query) {
     return query.Include(x => x.Rim)
                 .Include(x => x.Tire);
} 
```

这是另一个非常相似的线程，以防在这种情况下对其他人有帮助，但它仍然无法处理对扩展方法的下一个调用。

[实体框架 linq 查询 Include() 多个子实体](https://stackoverflow.com/questions/3356541/entity-framework-linq-query-include-multiple-children-entities)

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-25T11:31:16.757

不，您[不能在 mapping 中这样做](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/2766643-provide-mechanism-to-statically-define-eager-loadi)。典型的解决方法是简单的扩展方法：

```
public static IQueryable<Car> BuildCar(this IQueryable<Car> query) {
     return query.Include(x => x.Wheels)
                 .Include(x => x.Doors)
                 .Include(x => x.Engine)
                 .Include(x => x.Bumper)
                 .Include(x => x.Windows);
} 
```

现在，每次您想查询`Car`所有关系时，您只需执行以下操作：

```
var query = from car in db.Cars.BuildCar()
            where car.Make == "Ford"
            select car; 
```

编辑：

您不能以这种方式嵌套调用。包含适用于您正在使用的核心实体 - 该实体定义了查询的形状，因此在您调用后您`Include(x => Wheels)`仍在使用`IQueryable<Car>`并且您不能调用扩展方法`IQueryable<Engine>`。您必须再次开始`Car`：

```
public static IQueryable<Car> BuildCarWheels(this IQuerable<Car> query) {
    // This also answers how to eager load nested collections 
    // Btw. only Select is supported - you cannot use Where, OrderBy or anything else
    return query.Include(x => x.Wheels.Select(y => y.Rim))
                .Include(x => x.Wheels.Select(y => y.Tire));
} 
```

你会以这种方式使用该方法：

```
public static IQueryable<Car> BuildCar(this IQueryable<Car> query) {
     return query.BuildCarWheels()
                 .Include(x => x.Doors)
                 .Include(x => x.Engine)
                 .Include(x => x.Bumper)
                 .Include(x => x.Windows);
} 
```

该用法不会调用`Include(x => x.Wheels)`，因为它应该在您请求急切加载其嵌套实体时自动添加。

当心由这种复杂的急切加载结构产生的复杂查询。这可能会导致性能非常差，并从数据库中[传输大量重复数据](https://stackoverflow.com/questions/5521749/how-many-include-i-can-use-on-objectset-in-entityframework-to-retain-performance/5522195#5522195)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-09-18T17:31:43.650

遇到了同样的问题，并看到了另一个提到`Include`属性的链接。我的解决方案假定您创建了一个名为`IncludeAttribute`. 使用以下扩展方法和[实用方法](https://stackoverflow.com/a/8728686/1677829)：

```
 public static IQueryable<T> LoadRelated<T>(this IQueryable<T> originalQuery)
    {
        Func<IQueryable<T>, IQueryable<T>> includeFunc = f => f;
        foreach (var prop in typeof(T).GetProperties()
            .Where(p => Attribute.IsDefined(p, typeof(IncludeAttribute))))
        {
            Func<IQueryable<T>, IQueryable<T>> chainedIncludeFunc = f => f.Include(prop.Name);
            includeFunc = Compose(includeFunc, chainedIncludeFunc);
        }
        return includeFunc(originalQuery);
    }

    private static Func<T, T> Compose<T>(Func<T, T> innerFunc, Func<T, T> outerFunc)
    {
        return arg => outerFunc(innerFunc(arg));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-19T18:33:38.527

如果您真的需要包含所有导航属性（您可能会遇到性能问题），您可以使用这段代码。
如果您还需要急切地加载集合（即使是最糟糕的想法），您可以删除代码中的 continue 语句。
上下文是您的上下文（如果您在上下文中插入此代码）

```
 public IQueryable<T> IncludeAllNavigationProperties<T>(IQueryable<T> queryable)
    {
        if (queryable == null)
            throw new ArgumentNullException("queryable");

        ObjectContext objectContext = ((IObjectContextAdapter)Context).ObjectContext;
        var metadataWorkspace = ((EntityConnection)objectContext.Connection).GetMetadataWorkspace();

        EntitySetMapping[] entitySetMappingCollection = metadataWorkspace.GetItems<EntityContainerMapping>(DataSpace.CSSpace).Single().EntitySetMappings.ToArray();

        var entitySetMappings = entitySetMappingCollection.First(o => o.EntityTypeMappings.Select(e => e.EntityType.Name).Contains(typeof(T).Name));

        var entityTypeMapping = entitySetMappings.EntityTypeMappings[0];

        foreach (var navigationProperty in entityTypeMapping.EntityType.NavigationProperties)
        {
            PropertyInfo propertyInfo = typeof(T).GetProperty(navigationProperty.Name);
            if (propertyInfo == null)
                throw new InvalidOperationException("propertyInfo == null");
            if (typeof(System.Collections.IEnumerable).IsAssignableFrom(propertyInfo.PropertyType))
                continue;

            queryable = queryable.Include(navigationProperty.Name);
        }

        return queryable;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-08T12:12:32.913

进一步研究 Lunyx 的答案，我添加了一个重载以使其与字符串集合一起使用（其中字符串是属性名称，例如 "propertyA" 或 "propertyA.propertyOfAA" ）：

```
 public static IQueryable<T> LoadRelated<T>(this IQueryable<T> originalQuery, ICollection<string> includes)
    {
        if (includes == null || !includes.Any()) return originalQuery;

        Func<IQueryable<T>, IQueryable<T>> includeFunc = f => f;
        foreach (var include in includes)
        {
            IQueryable<T> ChainedFunc(IQueryable<T> f) => f.Include(include);
            includeFunc = Compose(includeFunc, ChainedFunc);
        }

        return includeFunc(originalQuery);
    } 
```

# git - git svn clone 打印数百个“错误：svn-remote.svn.added-placeholder 的匹配项太多”

> ID：14512292
> 
> 赞同：4
> 
> 时间：2013-01-24T22:49:52.333
> 
> 标签：git, git-svn

我运行以下命令来克隆一个 SVN 存储库：

```
git svn clone -s --preserve-empty-dirs --username=my_svn_username https://svn.repo/path projectname 
```

这成功运行了几个小时，但现在每个修订版都打印了很多次以下消息：

```
error: too many matches for svn-remote.svn.added-placeholder 
```

克隆过程似乎还在继续；我可以看到这些消息之间的日志中出现了修订。但是，打印此错误的次数似乎在增加。第一次有问题的修改导致错误被打印了 39 次；接下来的 78 个；然后是 117 - 撰写本文时的最新版本导致上述错误被打印 13,604 次。

我从头开始克隆这个存储库，因为我已经成功工作了好几个月的现有存储库也遇到了这个错误。一切都很好，直到我执行了一个`git svn fetch`我相信会导致 git svn 发现一个提示此错误的新分支。

使用 SVN 时，我可以检查显示此错误的第一个版本，并且可以成功地逐个版本更新。

有没有人见过这个？任何解决错误的线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:11:48.157

今天早上解决了问题。

config.c 中有定义#define MAX_MATCHES 512，它将空目录限制为 512。

将其更改为更大的内容并使用“make”和“make install”命令编译并再次将 git 安装到计算机上。

代码可见： [https ://github.com/git/git/blob/master/config.c](https://github.com/git/git/blob/master/config.c)

# email - SMTP 与 POP3。为什么要使用 POP3？

> ID：14512294
> 
> 赞同：0
> 
> 时间：2013-01-24T22:50:12.503
> 
> 标签：email, smtp, pop3

我的问题是，当 SMTP 可以发送和接收时，为什么要使用 SMTP 发送和 POP3 接收消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T22:52:19.467

这是因为 SMTP 要求收件人准备好在邮件发送后直接接收邮件，POP3 能够将邮件临时存储在其他地方，直到收件人准备好接受邮件。

# dsl - 在命令行上编译用 Xtext 和 Xpand 开发的 DSL

> ID：14512295
> 
> 赞同：1
> 
> 时间：2013-01-24T22:50:15.097
> 
> 标签：dsl, xtext, xpand

似乎在*Xtext*和*Xpand*中开发的 DSL（域特定语言）与 Eclipse 非常绑定。有什么方法可以在命令行上编译我的 DSL，就像编译 Java 代码一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:27:46.193

如果你有一个 mwe 工作流来执行你的生成器，它也可以从命令行执行。寻找 Mwe2Launcher 类 (http://git.eclipse.org/c/emf/org.eclipse.mwe.git/tree/plugins/org.eclipse.emf.mwe2.launch/src/org/eclipse/emf/ mwe2/launch/runtime/Mwe2Launcher.java）了解详情。

如果您已经从 Java 执行了 Xpand 生成器，那么您必须简单地将其调用包装到可执行的命令行应用程序中。

在这两种情况下，您都可以通过定义一个包含 Xtext、Xpand、您的插件（如果需要，还有 mwe）的 Eclipse 产品来创建一个具有所有依赖项的 Eclipse 应用程序。

# sql - SQL 触发器触发但未插入原始值

> ID：14512298
> 
> 赞同：0
> 
> 时间：2013-01-24T22:50:27.080
> 
> 标签：sql, sql-server-2005, triggers

我正在将我的数据库从以太平洋时间存储日期时间转换为 UTC，但不会同时更改所有代码。

我正在尝试编写一个触发器，该触发器将更新在任一列中输入的时间并将它们转换并将它们插入到另一列中。

前任。如果我在 OriginalTime 列中插入太平洋时间，它应该将时间转换为 UTC 并使用 UTC 时间更新 NewTime 列。相反，如果我在 NewTime 中插入/更新值，它应该将时间转换回太平洋并将其放入 OriginalTime。

我是在循环错误还是什么？

```
ALTER TRIGGER tr_Calls_CreateDate ON Calls
AFTER INSERT, UPDATE
AS
BEGIN
SET NOCOUNT ON

DECLARE
    @CallId INT,
    @CreateDate DATETIME,
    @CreateDateUTC DATETIME

--Create cursor
DECLARE CreateDate_Cursor CURSOR LOCAL FOR
    SELECT CallId, CreateDate, CreateDateUTC FROM Inserted

OPEN CreateDate_Cursor;

-- Get First Row
FETCH NEXT FROM CreateDate_Cursor INTO @CallId, @CreateDate, @CreateDateUTC;

WHILE @@FETCH_STATUS = 0
BEGIN
    IF UPDATE ([CreateDate])
    BEGIN
        UPDATE Calls
        SET CreateDateUTC = dbo.ConvertPacificTimeToUTC(@CreateDate)
        WHERE CallId = @CallId
    END

    IF UPDATE ([CreateDateUTC])
    BEGIN
        UPDATE Calls
        SET CreateDate = dbo.ConvertUTCTimeToPacific(@CreateDateUTC)
        WHERE CallId = @CallId
    END

    FETCH NEXT FROM CreateDate_Cursor INTO @CallId, @CreateDate, @CreateDateUTC;
END

-- Free Up Cursor
CLOSE CreateDate_Cursor;
DEALLOCATE CreateDate_Cursor;
END 
```

出于某种原因，我当前的触发器正在正确输入转换后的值，但导致触发器触发的插入似乎失败了。

如果我插入一个值：

```
INSERT INTO Calls (CreateDate)
VALUES (GETDATE()) -- getdate currently outputs in pacific time 
```

我得到了触发结果，但没有得到插入的值：

```
+-----------------+--------------------------+
|   CreateDate    |      CreateDateUTC       |
+-----------------+--------------------------+
|       NULL      | 2013-01-24 20:27:13.510  |
+-----------------+--------------------------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T23:10:24.897

插入`UPDATE(column)`对所有列都为真。这就是您的第二次更新将 null 写入 CreateDate 列的原因。

因此，您需要创建两个触发器，一个处理代码中的更新，一个处理插入。如果只重视 CreateDate，则 CreateDateUTC 为 NULL，您可以检查它。

此外，您真的不应该为此使用游标。改用这样的东西：

```
UPDATE c SET
  CreateDate = ISNULL(CreateDate, dbo.ConvertUTCTimeToPacific(i.CreateDateUTC)),
  CreateDateUTC = ISNULL(CreateDateUTC, dbo.ConvertPacificTimeToUTC(i.CreateDate))
FROM dbo.Calls AS c
JOIN INSERTED AS i
ON i.CallId = c.CallId; 
```

也就是说，对于插入触发器。对于 UPDATE 你可以使用这样的东西：

```
UPDATE c SET
  CreateDate = CASE WHEN UPDATE ([CreateDateUTC]) THEN CreateDate
                  ELSE dbo.ConvertUTCTimeToPacific(i.CreateDateUTC)
               END,
  CreateDateUTC = CASE WHEN UPDATE ([CreateDate]) THEN CreateDateUTC
                    ELSE dbo.ConvertPacificTimeToUTC(i.CreateDate)
                  END
FROM dbo.Calls AS c
JOIN INSERTED AS i
ON i.CallId = c.CallId; 
```

这都是未经测试的代码，但它应该可以工作。

* * *

编辑：请参阅下面我更长的评论，了解为什么您真的应该将其包装`UPDATE`在`IF`语句中。

# codeigniter - 错误号：1054 数据库表插入的未知列问题

> ID：14512299
> 
> 赞同：0
> 
> 时间：2013-01-24T22:50:26.910
> 
> 标签：codeigniter

我在使用以下代码将记录添加到 CodeIgniter 中的“offer”数据库表时遇到问题。

数据库表（mySQL）：

```
1  ID           int(11)                                 No         
 2  OfferName   varchar(150)    latin1_swedish_ci       No             
 3  OfferLength varchar(150)    latin1_swedish_ci       No  
 4  OfferTitle  varchar(150)    latin1_swedish_ci       No  
 5  OfferDescription    varchar(300)    latin1_swedish_ci   No  
 6  OfferURL    varchar(150)    latin1_swedish_ci       No  
 7  OfferContent    varchar(300)    latin1_swedish_ci       No  
 8  Key varchar(10) latin1_swedish_ci       Yes NULL 
```

模型中的方法（offer_model.php）：

```
public function entry_insert(){

      $data = array(
            'OfferName' => $this->input->post('OfferName'),
            'OfferLength' => $this->input->post('OfferLength'),
            'OfferTitle' => $this->input->post('OfferTitle'),
            'OfferDescription' => $this->input->post('OfferDescription'),
            'OfferURL' => $this->input->post('OfferURL'),
            'OfferContent' => $this->input->post('OfferContent'),
        );

$this->db->insert('offers',$data);

 } 
```

控制器：

```
function addOffer() {
    //if the form is submitted
    if ($this->input->post('mysubmit')) {
        //insert data into db using offer_model model

        $this->offer_model->entry_insert();

    } 
```

视图中的表格：

```
<div class="form">
            <?php echo form_open('newOffer/addOffer'); ?>
            <legend>Please enter details for your new offer</legend>

            <label for="OfferName">Offer Name:  <span class="required">*</span></label>
            <input type="text" name="OfferName" id="Offer Name" placeholder="Please enter the name of your offer"/>
            <label for="OfferLength">Offer length:</label>
            <input type="text" name="OfferLength" id="OfferLength" placeholder="Please enter the length of your offer"/>
            <label for="OfferTitle">Offer title:</label>
            <input type="text" name="OfferTitle" id="OfferTitle" placeholder="Please enter the title of your new offer"/>
            <label for="OfferDescription">Offer description: </label>
            <input type="text" name="OfferDescription" id="OfferDescription" placeholder="Please enter a description of your new offer"/>
            <label for="OfferURL">Offer link URL:</label>
            <input type="text" name="OfferURL" id="OfferURL" placeholder="Please enter the URL of your new offer"/>
            <label for="OfferContent">Offer content:</label>
            <input type="text" name="OfferContent" id="OfferContent" placeholder="Please enter the content for your new offer"/>
            <fieldset class="submit_field">
                <?php echo form_submit('mysubmit', 'Submit Form'); ?>
            </fieldset>

        </div><!-- end of form div --> 
```

提交表单会导致：

错误号：1054 '字段列表'中的未知列 'OfferName'

只是无法弄清楚，因为表在那里并且字段名称似乎匹配？任何帮助将非常感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T19:36:20.630

迟到的答案，但可能会帮助其他人前进。

我在其中一个查询中遇到了这个 1054 错误。我的查询是一行：

```
$q = $this->db->get('table'); 
```

但由于某种原因，我得到的 DB 错误包含一个带有 28 个 null where 语句的查询，其中包含的字段不仅没有从查询中调用，而且在该表中不存在（因此出现了 db 错误）。

我做了一个 $this->db 的转储：

```
 var_dump($this->db); 
```

...它向我展示了 CI ar_where var 确实充满了这个奇怪的 where 数据。我意识到这是来自之前在页面上执行的唯一其他查询，然后才意识到原因。先前的 db 调用是从库中进行的，因此使用了：

```
$this->CI->db->get('someTable'); 
```

所以之前的数据没有被清除。在从第一个库函数的末尾手动清除该数据后，一切都再次正常工作，并且 1054 错误消失了。

此外，为了解决 shomz 的建议，如果出现查询错误，您的 last_query() 将永远不会执行，因为它会在成功查询之后执行。在该行可以执行之前执行停止并出现 db 错误。在这种情况下，它也没有帮助我。但是 var_dump($this->db) 确实为此提供了帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:00:52.540

`echo $this->db->last_query();`将在许多情况下挽救您的生命。您的模型中还存在语法错误（尾随逗号）：

`'OfferContent' => $this->input->post('OfferContent'),`

此外，您在第一段中写道，该表已被调用，`offer`但您正在插入`offers`. 确保你也把它清理干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-27T11:43:57.187

像这样写一个查询：- $this->db->query("insert into users (username,password) values('$username','$lastname')");

**变量名应该用单引号括起来。**

# .net - Using C# API (2.0) doing upload returns "Metadata part is too large"

> ID：14512300
> 
> 赞同：0
> 
> 时间：2013-01-24T22:50:42.690
> 
> 标签：.net, youtube-api

using the Google.YouTube.YouTubeRequest.Upload(Video v) api call then I get:

GDataRequestException with a response string "Metadata part is too large".

This direct upload call works on my personal development machine, but I get that exception on our QA machine.

any ideas?

EDIT here is the code: so the only metadata that is added is title,description and tags (same metadata on both machines and same video).

```
 public void Add(InternalVideo video)
           {
           var youtubeVideo = ConvertVideo(video);
               var v = _request.Upload(youtubeVideo);
            }
    private Video ConvertVideo(InternalVideo video)
    {
        var youTubeVideo = new Video();

        youTubeVideo.Title = video.Title;
        youTubeVideo.Description = video.Description;
        AddTags(video, youTubeVideo);

        string contentType = MediaFileSource.GetContentTypeForFileName(video.URL);
        byte[] imageData = DownloadData(video.URL);
        File.WriteAllBytes(_tempVideoFileName, imageData);

        youTubeVideo.MediaSource = new MediaFileSource(_tempVideoFileName, contentType);
        var link = new AtomLink("http://uploads.gdata.youtube.com/resumable/feeds/api/users/default/uploads");
        link.Rel = ResumableUploader.CreateMediaRelation;
        youTubeVideo.YouTubeEntry.Links.Add(link);
        youTubeVideo.Private = false;

        return youTubeVideo; 
```

}

```
 private void AddTags(InternalVideo video, Video youTubeVideo)
    {
        var category = video.Client.ClientSyndicationProviders[0].SyndicationProvider.Category;
        youTubeVideo.Tags.Clear();
        youTubeVideo.Tags.Add(new MediaCategory(category, YouTubeNameTable.CategorySchema));
        youTubeVideo.Keywords = video.Tags;
    } 
```

EDIT 2: This code works: _resumableUploader = new ResumableUploader(25); WebResponse r = _resumableUploader.Insert(_youTubeAuthenticator, youtubeVideo.YouTubeEntry);

I'm not sure why I had to use the resumeable uploader to make this work. The only difference between machines is that that the QA machine is windows server 2003 R2, while the development machine is a windows 7 professional.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T05:24:07.500

为我工作......我添加了 HKEY_CLASSES_ROOT .flv 和 .mp4，然后我在 IIS 中回收了应用程序池并工作了！谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:02:27.637

我遇到了同样的问题（win 7 pro 和 server 2008）并且得到了同样的无用错误信息。在将 GoogleApi\core\mediaservice.cs、EntrySend 函数中的 outputStream 的内容写入本地机器和服务器上的日志文件后，我终于弄明白了。我没有在服务器上注册我尝试上传的 mp4 文件类型。一旦我在服务器上注册了文件类型，它就可以工作了。

如果其他人需要这样做，只需在您的客户端上的 HKEY_CLASSES_ROOT 下找到文件扩展名密钥，然后右键单击它并单击导出。然后将创建的 .reg 文件移动到您的服务器并双击它以获取添加到您的服务器的值。我还在 IIS 中的 MIME 类型中添加了文件类型，但我认为这不是必需的，并且在安装注册表项之前，我还在 IIS 中回收了我的应用程序池，然后再次测试它。

# c++ - 当我只清理一个项目时，Visual Studio 为什么仍然重建整个解决方案？

> ID：14512301
> 
> 赞同：-1
> 
> 时间：2013-01-24T22:50:43.717
> 
> 标签：c++, visual-studio-2010

我注意到，当我清理解决方案中的项目时（该项目不是父项目。也就是说，没有项目依赖它），我仍然看到 Visual Studio 重建了整个解决方案。

你们看到类似的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:09:34.893

Visual Studio 中的“清理”会清理与目标项目的构建相关的*任何内容。*因此，构建该特定项目所需的所有东西都必须重新构建。

编辑：此宏可能会或可能不会为您提供满足您需求的解决方案：http: [//support.microsoft.com/kb/318651#appliesto](http://support.microsoft.com/kb/318651#appliesto)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:18:40.737

由于您的一个项目发生了变化，因此依赖它的项目也发生了变化，因此需要重建也是可以理解的。

如果您只更改顶级项目，则依赖项不会被弄乱，因此不需要重新构建它们。你全错了。

# c# - Accessing RadComboBox in codebehind from a RadGrid

> ID：14512302
> 
> 赞同：0
> 
> 时间：2013-01-24T22:50:47.487
> 
> 标签：c#, asp.net, sharepoint-2010, telerik, telerik-grid

I´m having trouble grabbing RadComboBox when editing inline from a RadGrid. When I try to find the correct control through this GridEditableItem I always receive null. Can anyone throw me some pointers in how to access the RadCombobox from my code below?

**My ascx.cs file:**

```
<telerik:RadGrid runat="server" ID="grid_AccessRecords"
    AllowPaging="True"
    AllowSorting="True"
    Visible="False" 
    Width="100%"
    PageSize="25" 
    OnItemCommand="AccessRecordsGridOnItemCommand"
    OnNeedDataSource="AccessRecordGridNeedDataSource">
    <PagerStyle Position="TopAndBottom" />
    <ClientSettings EnableRowHoverStyle="true" />  
    <MasterTableView DataKeyNames="Id" AutoGenerateColumns="False" EditMode="EditForms">
        <Columns>
            <telerik:GridTemplateColumn HeaderText="Eign" UniqueName="tmp_AccessGroup">
                <ItemTemplate>
                    <asp:label runat="server" ID="lbl_accessGroupName" Text='<%# Eval("AccessGroupName") %>' />
                </ItemTemplate>
                <EditItemTemplate>
                    <telerik:RadComboBox runat="server" ID="combo_editAccessGroup"></telerik:RadComboBox>
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridEditCommandColumn UniqueName="EditCommandColumn" EditText="edit" ButtonType="ImageButton" EditImageUrl="/_layouts/images/AFLSharepoint2010/Edit.gif" />
            <telerik:GridButtonColumn CommandName="Delete" Text="delete" ConfirmText="Are you sure?" ConfirmDialogType="RadWindow" ConfirmTitle="Delete"
                ButtonType="ImageButton" UniqueName="DeleteColumn" ImageUrl="/_layouts/images/AFLSharepoint2010/Delete.gif" />
        </Columns>
        <EditFormSettings ColumnNumber="1" CaptionDataField="Id" CaptionFormatString="derp">
        EditColumn ButtonType="ImageButton" InsertText="Save" UpdateText="Save" UniqueName="EditCommandColumn" CancelText="Cancel" />
        </EditFormSettings>
    </MasterTableView>
</telerik:RadGrid> 
```

The my cs file:

```
 protected void AccessRecordsGridOnItemCommand(object sender, GridCommandEventArgs e)
    {
        GridEditableItem editableItem = e.Item as GridEditableItem;

        if (editableItem != null)
        {
            RadComboBox comboEditAccessGroup = (RadComboBox) editableItem.FindControl("combo_editAccessGroup");
            //TODO: find out why always null???
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:19:55.573

`OnItemCreated`如果您改用该方法，您应该能够访问您的组合框：

```
protected void AccessRecordsGrid_OnItemCreated(object sender, Telerik.Web.UI.GridItemEventArgs e)
{

    if (e.Item is GridEditableItem && e.Item.IsInEditMode)
    {
        //the item is in edit mode    
        GridEditableItem editedItem = e.Item as GridEditableItem;

        RadComboBox comboEditAccessGroup = (RadComboBox)editedItem.FindControl("combo_editAccessGroup");

    }
} 
```

# python - Python Cocos2d: tiles show up only once

> ID：14512306
> 
> 赞同：1
> 
> 时间：2013-01-24T22:51:07.770
> 
> 标签：python, python-2.7, pyglet, cocos2d-python

I'm working on a custom tiled map loader. Seems to work fine, I don't get any errors, but the screen only shows up 1 tile of each type.

this is the file structure:

```
/main.py 
/other/render2.py 
/other/render.py 
```

here's the render2.py file:

```
import pyglet, json
from pyglet.window import key
from pyglet.gl import *
from ConfigParser import SafeConfigParser
from cocos.layer import *
from cocos.batch import *
from cocos.sprite import Sprite

class renderer( Layer ):
    #init function
    def __init__(self):
        super( renderer, self ).__init__()

    #call function, returns the map as a list of sprites, and coordinates
    def __call__(self, mapname):

        #runs the map file parser
        parser = SafeConfigParser()

        #reads the map file
        try:
            world = parser.read('maps/'+mapname+'.txt')
            print world
        except IOError:
            return

        #These variables the config from the map file
        tileSize = int(parser.get('config', 'tilesize'))
        layers = int(parser.get('config', 'layers'))

        mapList = []

        #the super mega advanced operation to render the mapList
        for i in range(0,layers):
            layer = json.loads(parser.get('layer'+str(i), 'map'))
            tileType = parser.get('layer'+str(i), 'tiletype')
            nTiles = int(parser.get('layer'+str(i), 'tiles'))
            tileSet  = []

            #this over here loads all 16 tiles of one type into tileSet
            for n in range(0, nTiles):
                tileSet.append(Sprite("image/tiles/"+tileType+"/"+str(n)+".png", scale = 1, anchor = (0,0)))

            for x in range(0, len(layer)):
                for y in range(0, len(layer[x])):
                    X = (x*tileSize)
                    Y = (y*tileSize)
                    total = [tileSet[layer[x][y]], i, X, Y]
                    print layer[x][y], tileSet[layer[x][y]]
                    mapList.append(total)
        return mapList 
```

This is an example of what this returns :

```
 [<cocos.sprite.Sprite object at 0x060910B0>, 0, 0,0 ]
 [<cocos.sprite.Sprite object at 0x060910B0> , 0, 64,64 ] 
```

It returns a huge list with a lot of sublists like these in it.

when I call it from the main.py file, it only draws the last tile of each kind. here's the main.py file:

```
import sys, os
sys.path.insert(0, os.path.join(os.path.dirname(__file__), '..'))

import pyglet
import threading,time
from pyglet import clock
from pyglet.gl import *
from cocos.director import *
from cocos.menu import *
from cocos.scene import *
from cocos.layer import *
from cocos.actions import *
from cocos.batch import *
from cocos.sprite import Sprite
from other.render2 import renderer
import random; rr = random.randrange
class Background(ScrollableLayer):
    def __init__(self):
        super(Background, self).__init__()
        world = renderer()
        bg = world('sampleidea')

        batch = BatchNode()
        for i in range(0, len(bg)):
            l= bg[i][1]
            x= bg[i][2]
            y= bg[i][3]

            spr = bg[i][0]
            spr.position =(x,y)
            batch.add(spr, z = l)

        self.add(batch)
class Menu(Layer):
    def __init__(self):
        super(Menu, self).__init__()
        title = Sprite('image/title.png' )
        title.position = (400,520)
        self.add( title )

def start():
    director.set_depth_test()
    background = Background()
    menu = Menu()
    scene = Scene(background, menu)
    return scene

def init():
    director.init( do_not_scale=True, resizable=True, width=1280, height=720)
def run(scene):
    director.run( scene )

if __name__ == "__main__":
    init()
    s = start()
    run(s) 
```

What am I doing wrong? I have an older render.py, which does work, but I remade it since it loaded each sprite file for each tile. That took way to long to load on big maps.

This is the old render.py I've been using before. It's quite different since it used different map files too.

```
import pyglet, json
from pyglet.window import key
from pyglet.gl import *
from ConfigParser import SafeConfigParser
from cocos.layer import *
from cocos.batch import *
from cocos.sprite import Sprite

class renderer( Layer ):
    def __init__(self):
        super( renderer, self ).__init__()
    def __call__(self, mapname):
        parser = SafeConfigParser()
        try:
            world = parser.read('maps/'+mapname+'.txt')
            print world
        except IOError:
            print("No world file!")
            return

        tilesize = json.loads(parser.get('data', 'tilesize'))
        world = json.loads(parser.get('data', 'world'))

        maplist = []
        for l in range(len(world)):

            for x in range(len(world[l])):

                for y in range(len(world[l][x])):
                    if world[l][x][y] != None:
                        foldername = str(world[l][x][y][0])
                        imagename = str(world[l][x][y][1])

                        spr = Sprite("image/tiles/"+foldername+"/"+imagename+".png", scale = 1, anchor = (0,0))

                        X = (x*tilesize)
                        Y = (y*tilesize)

                        total = [spr, l, X, Y]

                        maplist.append(total)

        return maplist 
```

Is it possible to make the new "render" to work?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:47:44.610

问题是我新优化的“渲染器”创建了一堆 **cocos.sprite.Sprite**对象，而不是像我想象的那样仅仅加载图像文件。我的问题中的代码只是以这种方式一遍又一遍地重新定位同一个精灵对象。为了解决这个问题，方法是使用**pyglet.image.load()**打开图像，并用它创建精灵对象。例子：

```
f = pyglet.image.load('sprite.png')
batch = CocosNode()
batch.position = 50, 100
add(batch)
for i in range(0, 200):
    test = Sprite(f)        
    test.position = i*10,i*10
    batch.add( test ) 
```

# php - 从 Javascript 调用 PHP 文件

> ID：14512315
> 
> 赞同：1
> 
> 时间：2013-01-24T22:51:42.687
> 
> 标签：php, javascript, html, function, domdocument

当 HTML 页面成功加载时，我能否帮助我通过 Javascript 调用 PHP 文件。

这是我的代码：

```
 <script class="code" type="text/javascript">

        $(document).ready(function(){
            //Call fb_marketing.php 
        });

    </script> 
```

PHP 文件的名称是“fb_marketing.php”。我可以请一些帮助以使此代码正常工作吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:58:49.567

正如 Musa 所说，您可以在 AJAX 中调用此文件。这是一个示例代码，说明了我的意思：

```
 <script class="code" type="text/javascript">

    $(document).ready(function(){
        $('#div').load('fb_marketing.php');
    });

</script> 
```

在此代码中，#div 调用您要放置 PHP 文件的位置。您可以使用`this`而不是`'#div'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:04:57.480

你必须观察你期望从 php 得到的结果，一种方法是使用 JSON 表示法来快速读取数据。为此，我们必须将相应的标头放入我们的 php 文件中，该文件将返回结果。

# libreoffice - apply template in LibreOffice Writer to existing document

> ID：14512318
> 
> 赞同：7
> 
> 时间：2013-01-24T22:51:57.900
> 
> 标签：libreoffice

is there a way to apply a template to an existing document?

It only seems to work when I create a completely new document, and i don't want to copy&paste everything.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T09:14:41.033

我正在寻找相同的解决方案。我唯一发现的是一个 LibreOffice 扩展来做这件事。我刚刚对其进行了测试并且它有效，只是我必须在下载后添加 .oxt 扩展名。

[模板更换器](https://extensions.libreoffice.org/extensions/template-changer)

ps 由于这不是编程问题，因此可能不适合本网站。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-14T15:10:53.160

无需安装扩展的简单解决方案：

在所需模板中创建一个新文档。

从菜单中，选择插入 -> 文件中的文本 ...，然后选择要传输到新模板的文档。

然后旧文档出现在新模板中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-09T07:54:35.293

LaTechneuse 的答案似乎不再适用（2020-08-09，v. 5.4.4.2）。“插入”下没有这样的选项...

但是有一个选项插入-> 文档。这似乎做同样的事情。毫无疑问，菜单命令的名称已更改，因为 LibreOffice 用户觉得它太容易了。永远不要浪费机会不必要地混淆人们并导致他们浪费时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-16T13:43:06.287

模板更换器都不起作用，我也找不到应该驻留在 Insert->... 中的选项之一

但是，我使用管理模板来导入新模板，然后在演示文稿中进行更改，在侧边栏中的主幻灯片视图中。它奏效了！

# jquery - Server side script to get facebook access token

> ID：14512319
> 
> 赞同：0
> 
> 时间：2013-01-24T22:51:59.613
> 
> 标签：jquery, facebook, perl, facebook-graph-api, oauth

Apologies if this was asked before, I had a look but couldn't quite find any posts that answer my question (at least in a way I understood).

This question is about the Facebook API and authentication.

I have created a script using JQuery which loads a public stream or wall or whatever its called using the Graph API. It connects using an access key which I created by registering an App and authenticating it so that it had permission for offline access and to read a stream only and NOT publish it or access anything else really.

I did this using the following authentication address:

```
http://www.facebook.com/dialog/oauth/?
client_id=YOUR_APP_ID
&redirect_uri=YOUR_REDIRECT_URL
&scope=read_stream,offline_access 
```

Where the App ID is the one I got when registering an APP and the redirect URL is app domain / "website with Facebook login" site url. (I don't plan on using the facebook login for the site)

So, while I have obtained an access token using the above information which is due to expire in 60 days, my question is, Is there some server side script I can use to either renew the access token (from what I've read there isn't?) or obtain a new one.

As it stands, everything works but I don't want to upload this website and then have to renew an access token every 60 days so it functions properly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:40:42.023

[您可以使用应用程序访问令牌](https://developers.facebook.com/docs/howtos/login/login-as-app/)获得对公共流的几乎永久访问权。

# python - matplotlib.PatchCollection always getting drawn last

> ID：14512323
> 
> 赞同：0
> 
> 时间：2013-01-24T22:52:08.257
> 
> 标签：python, matplotlib, plot, draw, patch

I have a `matplotlib.PatchCollection` that I want to add to a plot. But I also have Text and other Patches I am adding straight onto the plot. So it looks like this:

```
node.shape = RegularPolygon((node.posX, node.posY),
                            6,
                radius = node.radius,
                                    edgecolor = 'none',
                                    facecolor = node.fillColor,
                                    zorder = node.zorder)

self.patches.append(node.shape)
self.p = PatchCollection(self.patches, edgecolor = 'none', match_original=True )       
self.plotAxes.add_collection(self.p) 

#Two previously instantiated patches (they are visible)
self.plotAxes.add_artist(selectionRect)
self.plotAxes.add_artist(brushShape)

self.plotCanvas.draw() 
```

I want my Patches in the collection to be drawn first and then the `selctionRect` and `brushShape` to be drawn afterwards because they can overlap the Patches in the collection. If they do, they should be visible. However, my plot always shows the Patches in the collection as if they've been drawn last. How can I get around this? Any help is appreciated.

**Edit:** One thing that appears to work is to keep 2 PatchCollections. However, when I do this, it seems that I can never set the visibilities to false. Does the `PatchCollection` set the reset the values or something?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:47:26.350

正如亚当在你想要设置的评论中所说的那样，`zorder`当它们被绘制在彼此之上时，它设置了什么顺序的东西，高的`zorder`东西将与低的东西重叠`zorder`。

一切都有一个 default `zorder`，但是您可以通过将`zorder`kwarg 添加到函数调用来覆盖该值。这是一个`Artist`kwarg，所以基本上任何绘图函数都应该尊重它（如果你发现一个没有向 github 站点提交错误报告的函数）

前任

```
plt.figure()
ax = plt.gca()
ax.plot(range(5), zorder=2, lw=10)
ax.plot(range(5)[::-1], zorder=1, lw=10) 
```

对比

```
plt.figure()
ax = plt.gca()
ax.plot(range(5), zorder=1, lw=10)
ax.plot(range(5)[::-1], zorder=2, lw=10) 
```

[zorder 演示](http://matplotlib.org/examples/pylab_examples/zorder_demo.html)

# sql-server - Sql Server 同步替代方案

> ID：14512324
> 
> 赞同：3
> 
> 时间：2013-01-24T22:52:13.663
> 
> 标签：sql-server, database-replication, microsoft-sync-framework

我们有两个 Sql 2008 R2 数据库。第一个也是主要的一个是我们的库存管理和会计系统使用的内部部署。第二个是我们的网站，它位于第 3 方托管公司，该数据库通过标准 XML 文件操作手动更新（从本地数据库创建 XML，将其发送到 Web 服务器，从 XML 文件读取并插入/更新/删除网络数据库）

我们需要摆脱手动 XML 操作并自动同步这两个数据库，但问题是我们的托管公司不允许在其“Sql Server”系统上使用“复制”或“链接服务器”设施。这样我们就无法将数据库与这些“Sql Server”工具同步。

我正在尝试在不更改托管系统的情况下找出该场景的同步替代方案。

我们可以使用哪些选项？

Microsoft Sync Framework 是否可以用于这种情况？（我不确定它是否仅适用于 Microsoft Azure Sql 系统）

谢谢……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:28:38.547

如果你的编码很好，那么 Sync Framework 可以做到这一点。

Sync Framework 可以同步 SQL Compact、Express、Server、Azure 或 LocalDB

但请记住，Sync Framework 需要在您的数据库上创建一些与 Sync 相关的对象（触发器、存储过程、表等...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:13:24.130

听起来您需要提供这些服务的托管服务提供商。

托管服务提供商通常会按需或始终提供从客户端位置到托管位置服务器的生产服务器的 VPN 连接。在线系统的支持通常需要这样的服务。如果您有这样的连接，那么让 SQL Server 进行同步就没有问题。

任何主要的（机架空间、Peer1 等）供应商都可以建立这样的系统。

它可能不会像您当前的提供商那样便宜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T04:25:28.410

好吧，如果更改供应商不是一种选择，在短期内列出并且您现在需要一些东西，您总是可以自动化部分或所有当前流程。

为此，您至少可以使用：

*   PowerShell（甚至是普通的旧 cmd.exe）脚本（批处理）和 bcp.exe 用于在两端导出和导入文件，PowerShell 和 ftp 用于将文件从一台服务器传输到另一台服务器。
*   本地 SQLServer 集成服务，可通过 ftp 将文件导出并发送到您的托管位置。和 SSIS 在您的托管位置抓取和导入这些文件。

# apache - .htaccess 基于 HTTP_REFERER 为空的重定向

> ID：14512328
> 
> 赞同：0
> 
> 时间：2013-01-24T22:52:24.450
> 
> 标签：apache, .htaccess, rewrite

我正在尝试在 WP 博客安装上设置重定向，该重定向将检测到任何人从无处进入（即不是来自另一个站点）。这个想法是捕获一些将预先构建的 URL 插入系统以创建评论/帖子的垃圾邮件机器人。我想如果他们没有引荐网站，我可以将它们弹回主页（www.domain.com/index.php 或只是 www.domain.com），这应该会与机器人混淆，但不会与真人混淆.

我知道推荐人可以伪造，但希望它至少可以阻止愚蠢。

我对 .htaccess 重写规则知之甚少（我为自己是菜鸟而道歉），但是尽管进行了多次搜索，但我在现有答案或在线其他任何地方都找不到这样做的。要么没有人这样做，要么我的措辞不正确。

任何帮助表示赞赏。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:35:45.020

我建议不要这样做。通过这样做，您可能会惹恼和疏远一部分潜在用户：例如，我的浏览器设置为不报告推荐人信息，其他人使用匿名网络。您可以通过匹配他们报告的用户代理字符串来捕获转储机器人（如此处所示[）](http://www.askapache.com/htaccess/blocking-bad-bots-and-scrapers-with-htaccess.html)。

否则很简单：匹配 RewriteCond 中的 HTTP_REFERER 环境变量：

```
RewriteCond %{HTTP_REFERER} ^$
RewriteRule .* http://example.com/ 
```

RewriteCond 检查referer 是否为空字符串；RewriteRule 将所有内容重定向到[http://example.com/](http://example.com/)根目录。这是一个硬重定向，这意味着服务器将发出一个 R=301 永久移动的标头。如果您只是想偷偷地提供另一个资源，请通过指定相对 URL 来使用软重定向，例如`RewriteRule .* index.php`. 但是，对于不报告推荐人信息的人来说，将他们重定向到一个页面可能会更友好，比如“如果您想阅读此页面，您应该启用推荐人报告”。

有关此类事情的更多示例，请参阅[手册](http://httpd.apache.org/docs/2.4/rewrite/access.html#blocked-inline-images)。那里有一个非常相似的防止盗链方法。

# r - 使用 WinBUGS/R2WinBUGS 的 Logit 回归未收敛到似然估计

> ID：14512329
> 
> 赞同：1
> 
> 时间：2013-01-24T22:52:25.107
> 
> 标签：r, bayesian, winbugs, r2winbugs

我是 R 2.15.2 的 Win-7 用户

有人可以帮我为什么下面的模型不能很好地接近简单的 logit 模型估计吗？

**已编辑**

```
 Mydata <- structure(list(gg = c(13.659955, 6.621436486, 3.017166776, 2.516795069, 
3.928538296, 4.211960532, 3.235445955, 5.152860411, 18.96466673, 
5.904678823, 4.987622293, 1.170687541, 3.088224149, 4.738065529, 
3.263022593, 6.050017999, 5.650762257, 2.058924721, 3.138591919, 
7.169083435, 11.30381738, 3.036991188, 4.559013218, 3.978760664, 
3.617455798, 2.430111184, 4.440319959, 2.200267742, 6.003166495, 
3.114161526, 3.812363457, 11.12816724, 15.6564348, 13.50562576, 
5.154056904, 6.26451889, 1.849669635, 1.816757851, 3.861868285, 
2.884542233, 2.993444924, 2.724235493, 2.694159089, 1.973597356, 
4.371300647, 3.559035718, 3.59124243, 6.587196681, 10.03402072, 
4.805158339, 4.491460392, 1.627936721, 1.278291553, 0.978710462, 
3.08635052, 2.58594947, 2.354973563, 1.657519171, 2.946994656, 
2.110549733, 6.095182338, 6.000660354, 6.691960157, 1.796172588, 
2.531234555, 2.992017156, 2.882403206, 6.066420081, 5.930524609, 
5.972280022, 0.915755208, 2.398369176, 2.614677323, 3.904309459, 
2.120045842, 2.643895472, 4.756728133, 4.420426549, 5.787620043, 
10.14764507, 10.17993063, 4.529582451, 2.132173713, 3.573017249, 
2.749427487, 5.79057317, 3.30235352, 2.248377801, 3.37704153, 
3.270636543, 8.070781663, 10.63482235, 11.91206431, 2.030994094, 
3.843890691, 11.08130402, 10.56164432, 2.476733196, 2.672953595, 
4.73313584, 2.577761507, 4.397950314, 16.02648073, 1.979318271, 
4.124346958, 18.95385675, 5.364182526, 3.964093091, 4.985103684, 
5.887163026, 6.302977032, 3.594056904, 2.1592159, 2.506654073, 
2.739740977, 5.840023906, 14.66431143, 1.453209431, 1.405915159, 
6.133806412, 14.46294647, 15.7475232, 13.91882816, 3.667160495, 
2.472826568, 2.208138746, 2.313856848, 6.677046217, 5.960024468, 
2.647365332, 1.960115215, 2.392076123, 2.796502016, 2.147861348, 
3.825593606, 2.427949377, 3.111598763, 5.248771445, 3.333653698, 
3.937363645, 1.98551364, 4.090444736, 1.897938127, 3.772878129, 
1.708975251, 2.149179807, 1.985344614, 3.445809412, 1.537484672, 
3.210425705, 3.635236243, 3.340757476, 2.426647042, 16.65453923, 
2.207695228, 17.05735446, 9.148235024, 3.289077716, 2.534469392, 
1.827870535, 2.952377144, 2.218054092, 3.787767414, 1.862731602, 
6.699397675, 2.572247774, 2.42783988, 3.429506609, 2.152120465, 
6.651671979, 3.389825443, 1.787049217, 2.368181588, 2.358737508, 
3.470515609, 1.693830224, 4.124049967, 2.894483735, 1.90612459, 
3.447950783, 11.73691853, 12.78330833, 3.860448673, 2.571402925, 
2.66582863, 3.206179619, 2.546483922, 3.047299616, 2.052597638, 
4.894592388, 2.869309084, 2.851843536, 1.729619574, 2.276794788, 
12.68354926, 3.318892896, 10.71333438, 3.318892896, 10.71333438, 
1.908315292, 3.111350542, 1.847059969, 1.835544656, 2.618919198, 
2.341098688, 2.920079188, 1.830521448, 4.95152276, 10.18359208, 
11.37645094, 3.44132725, 11.51865833, 14.45180625, 12.61570573, 
10.80784104, 7.814012406, 14.48656688, 1.019333021, 2.816970615, 
7.101350458, 1.764183823, 4.821036885, 2.251823823, 1.569206635, 
1.791906542, 3.114256927, 2.496611198, 2.776086885, 2.477500021, 
4.801364906, 3.642995521, 4.279315979, 4.956759854, 3.710843927, 
15.75846719, 3.032181385, 11.60129177, 3.443892792, 2.642908469, 
5.329881656, 2.303688396, 2.681312552, 2.12796449, 2.773085833, 
4.189449094, 3.521328188, 1.761418094, 2.455309406, 2.526749219, 
10.27017188, 11.70942021, 6.537176688, 3.665906281, 4.212212875, 
7.625210531, 10.74009115, 10.74009115, 10.58339073, 11.77831083, 
2.604995813, 4.744413865, 7.29975851, 1.740470719, 1.112195677, 
2.604728, 2.58798274, 1.059064521, 4.349711208, 2.392650167, 
2.699035417, 2.153652521, 3.151369396, 3.414949031, 2.581368219, 
2.234642333, 2.392818135, 6.51472726, 2.648815969, 15.47915854, 
3.258030083, 1.990451802, 2.6811855, 2.440177469, 2.925240396, 
3.668138604, 2.917453344, 1.9656045, 2.452494323, 4.299348479, 
4.765304604, 16.62252406, 12.88866406, 2.488524583, 1.916951229, 
1.714486281, 2.816999552, 1.784181771, 2.585827844, 2.720170823, 
2.186287625, 3.07640024, 4.327105385, 4.086370688, 4.592656531, 
2.571516719, 6.396392573, 18.74246573, 14.24556208), ss = c(-7.707850005, 
-15.40300834, -49.84338333, -50.96595763, -33.57927065, -29.26871379, 
-31.13757476, -38.9446836, -18.60621918, -12.25557326, -17.3340105, 
-49.04469485, -33.97249836, -24.13226024, -23.37858067, -24.07898472, 
-32.68854786, -35.16417362, -30.17502297, -38.58802006, -13.44056998, 
-45.62119153, -30.10387457, -21.92073966, -30.01274679, -30.10716134, 
-29.60556014, -33.1849011, -24.07374895, -36.78247492, -34.72067685, 
-41.96947502, -9.624331958, -10.03069504, -41.01141746, -35.72784007, 
-50.94674135, -49.91973751, -51.05524609, -50.47122434, -46.90646667, 
-42.70813537, -50.7377332, -51.01120184, -51.0932699, -35.37166589, 
-39.92974313, -29.5446461, -8.1278036, -24.74676854, -36.47346677, 
-40.92182994, -49.92750914, -49.02615356, -35.42230149, -38.96690541, 
-35.20704603, -39.31404894, -31.98014625, -38.22213743, -25.34981719, 
-14.02261648, -20.16701322, -48.09641042, -34.72517484, -50.17069654, 
-40.66006187, -44.93973938, -43.63455705, -50.96538014, -49.74130308, 
-34.21321834, -43.03926971, -26.14166307, -51.01781663, -46.38799194, 
-51.07775476, -51.09319771, -44.82805756, -40.02547202, -15.16109778, 
-23.15247117, -41.51283866, -39.06283772, -43.02607856, -38.197886, 
-45.18138933, -50.9752189, -50.55407144, -49.39313584, -33.4766776, 
-13.54483547, -12.00068998, -33.6073029, -20.23229774, -32.90792069, 
-16.32554139, -25.90690728, -43.18838286, -51.0203703, -45.17489885, 
-50.00289866, -29.7772429, -36.57372832, -51.02230524, -50.7863748, 
-24.23635605, -44.15949002, -39.39035061, -36.81914971, -26.99636543, 
-18.03405081, -49.68132933, -32.0432924, -21.71221224, -45.80810068, 
-33.70033655, -41.01746977, -44.9545008, -40.45390925, -33.26664292, 
-9.718327927, -9.277726352, -31.89539233, -50.26845505, -50.90332052, 
-50.55203806, -49.13701041, -36.73852817, -35.43596888, -38.08838755, 
-41.12237836, -40.41028312, -37.69615075, -35.55166964, -36.72707884, 
-29.55487485, -46.23696728, -21.60602981, -47.63092247, -47.00620137, 
-42.59296241, -50.71814475, -45.10917784, -51.02946189, -20.89401331, 
-48.86575795, -36.89427487, -40.16853942, -51.00840255, -51.0075457, 
-45.30865098, -46.05110903, -35.31902034, -44.80360176, -37.35104715, 
-13.84902784, -39.74186369, -31.01123746, -35.21037218, -35.0202728, 
-48.39866317, -32.74663729, -50.90494703, -41.74675073, -27.83560326, 
-37.14191338, -39.24284429, -50.24699166, -41.91108934, -44.47568388, 
-35.2452714, -34.49466485, -31.56238493, -33.86060467, -39.88969345, 
-50.92874004, -50.61210368, -33.35654261, -49.73027655, -25.53924159, 
-8.408177651, -44.11358958, -42.78740696, -38.98041905, -50.93700572, 
-50.78977219, -47.03148495, -48.05189369, -36.41525546, -41.82258554, 
-48.0012309, -50.65991657, -34.58154214, -35.59513453, -51.08074135, 
-50.85366938, -51.08074135, -50.85366938, -50.69545917, -22.14701885, 
-43.04649469, -40.17308802, -42.42595479, -39.31338521, -40.29414865, 
-46.82535656, -38.09278958, -35.71546021, -38.48812479, -40.15711031, 
-41.26210979, -25.71862146, -26.0133424, -26.7382999, -27.87618542, 
-17.20437385, -50.21773375, -50.43229958, -51.10613073, -44.76030594, 
-24.495235, -40.8543576, -49.56576271, -50.8176775, -33.32086031, 
-34.70547198, -36.75163896, -50.58161188, -35.58172323, -50.78794125, 
-40.18822771, -34.27604302, -48.19352396, -51.01194635, -43.13363927, 
-45.60329094, -27.14570313, -39.71587979, -35.66745896, -49.72861292, 
-50.98749646, -36.75274792, -51.06588781, -50.65578125, -50.87232552, 
-51.08351406, -51.10034323, -30.78426354, -51.11306302, -19.71852042, 
-18.5394999, -51.0472551, -51.0868051, -47.5098225, -17.50247563, 
-17.50247563, -17.86539229, -16.16612115, -30.19224563, -28.90203208, 
-48.59109542, -50.87648281, -47.88816083, -28.53676927, -48.9707774, 
-50.57288479, -51.07964656, -37.37621177, -49.56755563, -50.76012125, 
-47.20241073, -51.01347313, -50.82764219, -50.78897458, -50.83598677, 
-51.11415594, -49.00892, -33.5060326, -28.38547938, -48.05074729, 
-50.29370125, -50.83504219, -50.80333563, -51.03403729, -51.0421874, 
-50.76831146, -50.87043604, -51.08487479, -51.01771458, -36.0702924, 
-20.78084771, -49.44148479, -39.28489156, -50.94829448, -51.01100906, 
-50.76106125, -50.92056417, -51.04772927, -37.12336448, -50.6384801, 
-31.84211313, -49.48543917, -51.05363948, -28.35589769, -40.21823813, 
-51.0574976, -39.4211176), dd = c(154.4236993, 149.5832755, 220.5376676, 
188.1301303, 193.4423268, 180.786566, 147.6809975, 294.3175776, 
517.5095247, 106.0196438, 126.7522827, 84.12371801, 153.8300366, 
167.6862942, 111.8452798, 213.6434143, 270.8933346, 105.7571576, 
138.8542046, 405.7345177, 222.8295022, 203.1856754, 201.2825818, 
127.8993813, 159.2263148, 107.2677566, 192.7990438, 107.0794478, 
211.9558545, 167.9804162, 194.1213087, 684.9904472, 220.9984063, 
198.6784757, 310.0050436, 328.2581513, 138.2133496, 132.9782976, 
289.1817849, 213.5229493, 205.9192931, 170.6115496, 200.483163, 
147.652789, 327.5662511, 184.6250023, 210.3079779, 285.4338146, 
119.6048186, 174.3630449, 240.233224, 97.64322396, 93.5913059, 
70.31214681, 160.2304584, 147.7143808, 121.5668885, 95.49747258, 
138.205053, 118.2084279, 226.6079498, 123.4014062, 197.9286116, 
126.6151589, 128.7066092, 220.1513453, 171.8320615, 399.8383894, 
379.5150089, 446.4220118, 66.78233993, 120.2137058, 165.0139027, 
149.6845692, 158.637227, 179.8320709, 356.3473798, 331.2533515, 
380.5121027, 595.6989688, 226.3574763, 153.7853848, 129.7965126, 
204.6755039, 173.477482, 324.3927627, 218.8154401, 168.0964657, 
250.3859192, 236.9220868, 396.2428049, 211.2501547, 209.6575701, 
100.0337171, 114.0287522, 534.8363364, 252.8850567, 93.47141464, 
169.2018281, 354.1812225, 167.0160495, 322.5169401, 699.927721, 
106.0177501, 308.6366926, 1411.84738, 190.5941033, 256.7291835, 
287.9890035, 317.9030093, 249.5487016, 94.82178213, 157.3068154, 
117.7808006, 85.46573263, 392.3572701, 724.8147089, 87.31754945, 
92.59793475, 363.9298959, 705.6552358, 224.452264, 189.3891441, 
171.4922284, 182.3002062, 164.8533233, 171.5477266, 481.1937846, 
321.1358114, 137.5508765, 109.432054, 144.223193, 165.7262492, 
118.6953876, 199.4566326, 130.7380613, 134.8405831, 355.9356426, 
105.5132727, 275.0446049, 136.8457579, 255.506731, 141.1784194, 
249.5957908, 127.9098903, 65.54666729, 142.2750164, 186.4378832, 
90.52911409, 240.1828537, 271.9479516, 221.9813631, 163.8951252, 
862.7211025, 145.0432736, 934.4263336, 185.813134, 191.6960064, 
115.1740602, 94.3482938, 151.5457861, 157.4328115, 181.8996531, 
139.0691666, 410.1901284, 104.873104, 132.2095716, 197.3701322, 
158.5931377, 408.8709478, 221.1149527, 92.28489547, 119.7748008, 
109.1577013, 172.347586, 99.0082713, 308.0480454, 214.8575513, 
93.23180651, 251.3186275, 439.633449, 157.6421674, 249.7593794, 
161.3505953, 152.2448205, 239.5266898, 189.6886754, 210.1612637, 
144.5761132, 261.4069935, 175.9787194, 200.7477829, 128.5085872, 
115.4151402, 662.1582919, 248.6459146, 799.002826, 248.6459146, 
799.002826, 141.8859927, 100.0343638, 116.5021167, 108.026373, 
162.9137625, 134.8998615, 172.545199, 125.597699, 276.6302083, 
533.4431354, 642.188624, 202.6657, 697.0803198, 545.1278615, 
481.3199646, 423.8338427, 319.4693844, 365.5350729, 75.06200271, 
208.3551844, 532.2892583, 115.6034833, 173.1313906, 134.4010906, 
114.0157948, 133.5525719, 152.0830708, 126.9199573, 149.5574833, 
183.7883156, 250.5106854, 271.3588146, 252.2147146, 249.1717438, 
262.2825646, 1178.945583, 191.7794198, 775.945224, 137.0065938, 
153.8710573, 278.8008677, 167.9884, 200.5136229, 114.6238458, 
207.6997042, 311.252324, 262.7331438, 131.9810083, 184.0258792, 
112.6623184, 770.1853177, 338.6306063, 177.741876, 274.4640479, 
315.6091333, 531.3221333, 275.6941573, 275.6941573, 277.3068708, 
279.2577229, 114.9657708, 201.0928177, 520.2239594, 129.8706885, 
77.96273083, 108.235849, 185.6859594, 78.54580635, 325.8620802, 
130.7865177, 196.174249, 160.3316583, 218.100225, 255.507301, 
192.4301396, 166.4553438, 178.4062406, 488.3921406, 190.3591188, 
760.6767625, 135.469474, 140.0819813, 197.7584458, 181.9313792, 
217.9605552, 274.5590406, 218.4073167, 146.3560396, 182.9803677, 
322.1222083, 356.5695281, 879.3790313, 392.8225521, 180.428799, 
110.1808227, 128.1094563, 210.7529375, 132.8284542, 193.1165542, 
203.6622229, 118.8509177, 228.4791198, 202.0587625, 296.5748396, 
343.8937052, 102.326891, 377.2940917, 1403.520031, 823.6412771
), OutCome = c(1L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 
0L, 0L, 0L, 1L, 0L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 1L, 1L, 1L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 1L, 1L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 1L, 0L, 0L, 0L, 0L, 1L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 1L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 1L, 
1L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 1L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 1L, 1L, 1L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 1L, 
1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 1L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 1L, 0L, 1L, 1L, 1L, 1L, 1L, 1L, 0L, 0L, 1L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 1L, 0L, 
1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 1L, 1L, 
0L, 0L, 1L, 1L, 1L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L, 0L, 1L, 0L, 1L)), .Names = c("gg", "ss", "dd", 
"OutCome"), class = "data.frame", row.names = c(1L, 2L, 3L, 4L, 
5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 
19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 
32L, 33L, 34L, 35L, 36L, 37L, 38L, 39L, 40L, 41L, 42L, 43L, 44L, 
45L, 46L, 47L, 48L, 49L, 50L, 51L, 52L, 53L, 54L, 55L, 56L, 57L, 
58L, 59L, 60L, 61L, 62L, 63L, 64L, 65L, 66L, 67L, 68L, 69L, 70L, 
71L, 72L, 73L, 74L, 75L, 76L, 77L, 78L, 79L, 80L, 81L, 82L, 83L, 
84L, 85L, 86L, 87L, 88L, 89L, 90L, 91L, 92L, 93L, 94L, 95L, 96L, 
97L, 98L, 99L, 100L, 101L, 102L, 103L, 104L, 105L, 106L, 107L, 
108L, 109L, 110L, 111L, 112L, 113L, 114L, 115L, 116L, 117L, 118L, 
119L, 120L, 121L, 122L, 123L, 124L, 125L, 126L, 127L, 128L, 129L, 
130L, 131L, 132L, 133L, 134L, 135L, 136L, 137L, 138L, 139L, 140L, 
141L, 142L, 143L, 144L, 145L, 146L, 147L, 148L, 149L, 150L, 151L, 
152L, 153L, 154L, 155L, 156L, 157L, 158L, 159L, 160L, 161L, 162L, 
163L, 164L, 165L, 166L, 167L, 168L, 169L, 170L, 171L, 172L, 173L, 
174L, 175L, 176L, 177L, 178L, 179L, 180L, 181L, 182L, 183L, 184L, 
185L, 186L, 187L, 188L, 189L, 190L, 191L, 192L, 193L, 194L, 195L, 
196L, 197L, 198L, 199L, 200L, 201L, 202L, 203L, 204L, 205L, 206L, 
207L, 208L, 209L, 210L, 211L, 212L, 233L, 234L, 235L, 236L, 237L, 
238L, 239L, 240L, 241L, 242L, 243L, 244L, 245L, 246L, 247L, 248L, 
249L, 250L, 251L, 252L, 253L, 254L, 255L, 256L, 257L, 258L, 259L, 
260L, 261L, 262L, 263L, 264L, 265L, 266L, 267L, 268L, 269L, 270L, 
271L, 272L, 273L, 274L, 275L, 276L, 277L, 278L, 279L, 280L, 281L, 
282L, 283L, 284L, 285L, 286L, 287L, 288L, 289L, 290L, 291L, 292L, 
293L, 294L, 295L, 296L, 297L, 298L, 299L, 300L, 301L, 302L, 303L, 
304L, 305L, 306L, 307L, 308L, 309L, 310L, 311L, 312L, 313L, 314L, 
315L, 316L, 317L, 318L, 319L, 320L, 321L, 322L, 323L, 324L, 325L, 
326L, 349L, 350L)) 
```

似然估计的模型代码：

```
Simplelogit <- glm(OutCome ~ gg+ss+dd, data = Mydata, family = "binomial") 
```

**使用R2WinBUGS**的模型代码：（已编辑）

```
model1 ="
model
{
  # likelihood
  for(i in 1:N)
    {
    Y[i] ~ dbin(p[i],N)
    logit(p[i])<- beta1[1]+beta1[2]*X[1]+beta1[3]*X[2]+beta1[4]*X[3]
    }

    #prior
    beta1[1]~dnorm(1,1.0E-02)
    beta1[2]~dnorm(1,1.0E-02)
    beta1[3]~dnorm(1,1.0E-02)
    beta1[4]~dnorm(1,1.0E-02)
}
"
writeLines(model1,con='Model.txt')

x1 <- unlist(Mydata$gg)
x2 <- unlist(Mydata$ss)
x3 <- unlist(Mydata$dd)
N=c(nrow(Mydata))
datalist <- list(N=N,Y=c(Mydata$OutCome),X=c(x1,x2,x3))
inits <- function() list(beta1=c((Simplelogit$coefficients[,1])))
MyPara <- c("beta1")

require(R2WinBUGS)
BayesianModel <- bugs(datalist,inits,MyPara,model.file='Model.txt',n.chains=1,n.iter=54000,n.burnin=4000,n.sim=50000,program=c('WinBUGS'),debug=FALSE,codaPkg=FALSE,save.history=TRUE,bugs.directory='C:/Program Files/WinBUGS14/',working.directory = getwd()) #,over.relax=TRUE

as.numeric(BayesianModel$summary[c(1:4)),1])
#results:
-48.63550   3.47384  -0.69866   0.09043 
```

然后使用传统方法/不使用贝叶斯方法

```
Simplelogit <- glm(OutCome ~ gg+ss+dd, data = Mydata, family = "binomial")
c(as.matrix(Simplelogit$coefficients[c(1:4),1]))
# result is:
-20.71281   3.47408  -0.31233  -0.03906 
```

请建议我是否需要使用不同的模型来更改先验或语法...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T07:36:44.913

我还没有运行代码，但我可以发现两个错误：

没有Mydata$yy，所以向量太短（只有616，应该是3*308）。应该是`x3<-unlist(Mydata$dd)`。

而且您没有注意到错误，因为 logit 行中的索引是错误的。应该是这样的

`logit(p[i])<- beta1[1]+beta1[2]*X[i]+beta1[3]*X[i+2*N]+beta1[4]*X[i+3*N]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T17:22:16.853

使用 stan 的另一种解决方案

```
load("mydata.rdata")
library(rstan)
library(ggmcmc)
library(coda)

model1 ="
data {
  int<lower=0>  N;
  int<lower=0,upper=1> Y[N];
  real gg[N];
  real ss[N];
  real dd[N];
}
parameters{
  real  beta0;
  real  betagg;
  real  betass;
  real  betadd;
}
model
{
  #prior
  beta0 ~ normal(-2,30);
  betagg ~ normal(20,30);
  betass ~ normal(-3,30);
  betadd ~ normal(-10,40);

# likelihood
  for(i in 1:N)
  {
    Y[i] ~ bernoulli(inv_logit(beta0+betagg*gg[i]+betass*ss[i]+betadd*dd[i]));
  }

}
"

MyPar = scale(Mydata[,-4])
datalist <- list(N=nrow(Mydata),
                 Y=as.numeric(Mydata$OutCome),
                 gg=MyPar[,"gg"],ss=MyPar[,"ss"],dd=MyPar[,"dd"])

m <- stan(model_code=model1,iter=20000,data= datalist,n.chains=4)

ggmcmc(ggs(m))
print(m) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T11:19:10.410

jags 版本（我讨厌安装 RWinBugs）

```
# Assuming your data have been saved in mydata.rdata
load("mydata.rdata")
library("rjags")

model1 ="
model
{
  # likelihood
  for(i in 1:N)
  {
    logit(p[i])<- beta0+betagg*gg[i]+betass*ss[i]+betadd*dd[i];
    Y[i] ~ dbin(p[i],N); # Should be dbern probably
  }

  #prior
  beta0~dnorm(1,1.0E-02);
  betagg~dnorm(1,1.0E-02);
  betass~dnorm(1,1.0E-02);
  betadd~dnorm(1,1.0E-02);
}
"
writeLines(model1,con='Model.txt')

datalist <- with(Mydata, list(N=nrow(Mydata),Y=as.numeric(OutCome),gg=gg,ss=ss,dd=dd))
# A bit of cheating: initial values adapted after first run
inits <- list(beta0=-8,betagg=0.2,betass=0.05,betadd=0.002)

m <- jags.model("Model.txt",datalist,init=inits)
update(m, 1000)
x <- coda.samples(m, c("beta0","betagg","betass","betadd"), n.iter=10000)
plot(x) # Well, not prettty, but acceptable 
```

# javascript - 是否可以在 javascript 弹出窗口中显示 iframe？

> ID：14512334
> 
> 赞同：0
> 
> 时间：2013-01-24T22:52:40.543
> 
> 标签：javascript, email, iframe, popup

Noob here... 尝试在用户退出时在 javascript 弹出窗口中显示 iframe。iframe 应该首先被看到（在浏览器提示中）并且应该允许用户提交他们的电子邮件地址。

我在参考[这个想法](http://kbeezie.com/cross-browser-exit-pop/)方面取得了一些成功，但我意识到 iframe 仅在用户选择留在页面上后才会显示。这是我想 *对*代码执行的操作：

```
function PopIt() { 
    $("a#trigger").trigger('click');
    window.onbeforeunload = UnPopIt;
    return <iframe src="http://moneymappress.com/pro/su/pop_signup2.html">Your Browser doesn't support iframes</iframe>; 
} 
```

在阅读了 iframe 和 javascript 的一些安全问题之后，这似乎是一个问题，但我想获得第二个意见。我也知道代码不能按原样工作，但认为这是最简单的交流方式

如果是无法显示 iframe 的情况，那么下一个最佳选择是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:58:31.463

你不能这样做[`onbeforeunload`](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)：

```
window.onbeforeunload = funcRef 
```

> *   `funcRef`是对函数或函数表达式的引用
>     
>     
> *   该函数应为 Event 对象的 returnValue 属性分配一个字符串值并返回相同的字符串
>     
>     
> 
> **笔记**
> 
> *   当此事件返回非空值时，将提示用户确认页面卸载。在大多数浏览器中，事件的返回值显示在此对话框中。

这就是在您引用的示例中首先显示提示的原因。

# ios - 将 C 指针复制到 NSMutableDictionary

> ID：14512335
> 
> 赞同：0
> 
> 时间：2013-01-24T22:52:43.980
> 
> 标签：ios, xml, tbxml

我有一个通过 iOS 中的 XML 文件解析的类。

您可以以`TBXMLElement*`.

我想遍历 XML 并制作深层副本`TBXMLElements`并将它们存储在`NSMutableDictionary`类变量中。

我怎样才能：

`myClassDict addObject:(TBXMLElement*)element?`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:17:16.223

您可以将指针放在 NSValue 中。你打算用什么钥匙？

```
// Save the TBXMLElement*
NSMutableDictionary *dict = [NSMutableDictionary dictionary];
[dict setValue:[NSValue valueWithPointer:element] forKey:@"whatKey"];

…

// Get the TBXMLElement*
TBXMLElement *el = (TBXMLElement *)[[dict valueForKey:@"whatKey"] pointerValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:15:32.693

就像评论中所说的那样，您必须`TBXMLElement*`将`NSObject`. 大概是这样的：

```
@interface MyXMLElement {
TBXMLElement* _xmlElement;
}

-(void)setXMElement:(TBXMLelement*)element;

@end 
```

然后，您可以填充元素：

```
MyXMLElement *elmt = [[MyXMLElement alloc] init];

[emlt setXMLElement:pointerToTBXMLElement];

[someArray addObject:elmt]; 
```

# yii - 如何使用 Yii.ActiveRecord 查找不相关的记录？

> ID：14512337
> 
> 赞同：2
> 
> 时间：2013-01-24T22:52:46.290
> 
> 标签：yii

我有两个有关系的模型：

```
class Model1 extends CActiveRecord
public function relations()
{
  return array(
    'relation' => array(self::HAS_MANY, 'Model2', 'id_model1'),
  )
} 
```

**我想通过 CListView 查看模型 1 中与模型 2无关**的那些记录。很明显，我可以使用类似的东西

```
$criteria->condition = 'id NOT IN (SELECT DISTINCT id_model1 FROM model2_tbl)' 
```

然后将此 $criteria 发送到 ActiveDataProvider。但我寻找更聪明、更“yii-way”的解决方案。它存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:45:23.403

[关系查询选项](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-options) `'joinType' = 'RIGHT OUTER'`，`'condition'=>'left_table.join_field IS NULL'`可能会成功。

# c++ - 返回非常量左值引用

> ID：14512343
> 
> 赞同：1
> 
> 时间：2013-01-24T22:53:14.413
> 
> 标签：c++, constants

我正在尝试使用**交互式计算机图形学 - 自上而下的方法**这本书来学习计算机图形学，示例代码[在此链接中](http://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/SIXTH_EDITION/)

有一个名为“mat.h”的头库，它提供了一些矩阵实用程序，但是当我尝试使用 Xcode 编译时，会抛出以下错误：

**对“Angel::mat2”类型的非 const 左值引用不能绑定到“Angel::mat2”类型的临时对象**

引发该错误的代码是：

```
mat2& operator /= ( const GLfloat s ) {
#ifdef DEBUG
    if ( std::fabs(s) < DivideByZeroTolerance ) {
        std::cerr << "[" << __FILE__ << ":" << __LINE__ << "] "
                  << "Division by zero" << std::endl;
        return mat2();
    }
#endif // DEBUG 
```

我只是将它注释掉，因为它只是在调试应用程序时被编译，但我想知道问题是什么以及如何解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T23:16:04.303

严格来说，虽然错误的正式原因是尝试将*非常量*引用绑定到临时对象，但这里真正的问题是尝试返回*引用*，即对临时对象的*任何引用。*引用是否为 const 无关紧要。

临时对象将在 return 语句完成后立即销毁，从而返回绑定到现在已销毁对象的悬空引用。换句话说，即使我们试图通过将返回类型更改为 const 引用来“修复”这段代码，它仍然无法正常工作。

此外，根据设计，该函数似乎*应该*返回一个非常量引用，这意味着更改该函数的返回类型不是一种选择。非常量引用是复合赋值运算符通常返回的内容。在“除以零”的情况下，调试分支应该提前终止（当然，返回一些东西，只是为了使代码编译）。

实现这一点的一种方法是声明一个独立的类型对象`mat2`（例如，作为 class 的静态成员`mat2`）并返回对它的引用。即声明

```
class mat2 {
  ...
#ifdef DEBUG
  static mat2 bad_result;
#endif // DEBUG
}; 
```

定义它

```
#ifdef DEBUG
mat2 mat2::bad_result;
#endif // DEBUG 
```

然后做

```
return bad_result; 
```

每当检测到错误时。

或者（更容易），您可以在该语句之前在本地声明`return`它

```
#ifdef DEBUG
    if ( std::fabs(s) < DivideByZeroTolerance ) {
        std::cerr << "[" << __FILE__ << ":" << __LINE__ << "] "
                  << "Division by zero" << std::endl;
        static mat2 bad_result;
        return bad_result;
    }
#endif // DEBUG 
```

当然，这种设计有一个明显的缺陷，因为外部代码将能够修改返回的对象，这是不可取的。但是，最有可能的想法是，一旦将错误消息打印到 ，就不能保证程序的行为`std::err`，这意味着在这种情况下，返回值的可修改性不应该成为问题。

考虑到最后一点，我们甚至可以使用非静态局部变量作为返回值

```
#ifdef DEBUG
    if ( std::fabs(s) < DivideByZeroTolerance ) {
        std::cerr << "[" << __FILE__ << ":" << __LINE__ << "] "
                  << "Division by zero" << std::endl;
        mat2 bad_result;
        return bad_result;
    }
#endif // DEBUG 
```

返回对局部变量的引用与返回对临时变量的引用一样错误（原因大致相同）。但是，在“出错后不保证”的方法中，它将“起作用”，这意味着它将修复错误消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:55:38.613

问题是非`const`左值引用不能绑定到临时值，即*右值*。只有`const`左值引用（在 C++98 和 C++11 中）或右值引用（仅在 C++11 中）可以。此运算符试图返回一个左值引用，该引用指向从函数返回时创建的临时对象：

```
 mat2& operator /= ( const GLfloat s ) {
//  ^^^^^
//  RETURNS A NON-CONST LVALUE REFERENCE
        ...
        return mat2(); // <--- CREATES A TEMPORARY (RVALUE)
    } 
```

# ssl - Openssl tls srp

> ID：14512344
> 
> 赞同：2
> 
> 时间：2013-01-24T22:53:15.070
> 
> 标签：ssl, openssl, single-responsibility-principle

我想在我当前的项目中使用 srp。但是我对如何用openssl实现它有点茫然。我让客户端运行，但我不知道如何编写服务器端。我也找不到任何文档或使用的示例实现。我想要的是将登录信息存储在数据库中，然后在需要时检索该数据。我在大部分网络部分都使用 poco，因此编写客户端相当容易，并且我成功地针对其他服务器对其进行了测试。因此，我将不胜感激有关如何实现服务器端的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T03:43:07.627

`ssl/ssltest.c`在 OpenSSL 存档中的文件中有一个如何执行此操作的示例。

在较高级别上，您注册身份验证回调。此回调在 ) 期间根据需要自动调用`SSL_Accept(`以验证您的用户。

从`ssltest.c`示例回调看起来如下所示：

```
static int MS_CALLBACK ssl_srp_server_param_cb(SSL *s, int *ad, void *arg)
    {
    SRP_SERVER_ARG * p = (SRP_SERVER_ARG *) arg;

    if (strcmp(p->expected_user, SSL_get_srp_username(s)) != 0)
        {
        fprintf(stderr, "User %s doesn't exist\n", SSL_get_srp_username(s));
        return SSL3_AL_FATAL;
        }
    if (SSL_set_srp_server_param_pw(s,p->expected_user,p->pass,NULL)<0)
        {
        *ad = SSL_AD_INTERNAL_ERROR;
        return SSL3_AL_FATAL;
        }
    return SSL_ERROR_NONE;
    } 
```

要注册，请致电

```
SSL_CTX_set_srp_username_callback(s_ctx, ssl_srp_server_param_cb); 
```

回调函数的`arg`参数是传递给您的回调的 void 指针，以便您可以从回调中引用应用程序中任何必要的应用程序上下文。

设置 arg 参数调用`SSL_CTX_set_srp_cb_arg(s_ctx, mypointer)`；

这真的很容易。确保 SRP 密码包含在您的密码列表中。

有一种方法可以获取有关认证失败的反馈，可用于实施针对高速率在线词典攻击的对策。

做这个调用`SSL_CTX_set_info_callback(s_ctx,mynotifycallback)`来注册你的回调。成功使用以下条件过滤不相关的通知。

```
void mynotifycallback(const SSL *s, int reason, int ret)
{
if (reason & SSL_CB_ALERT && ret & SSL3_AD_BAD_RECORD_MAC && SSL_get_srp_username((SSL *)s))
// authentication failure
} 
```

# eclipse - Eclipse JSDT javascript编辑器中的内容辅助使用对象表示法失败

> ID：14512345
> 
> 赞同：0
> 
> 时间：2013-01-24T22:53:18.440
> 
> 标签：eclipse, content-assist, jsdt

我正在使用 eclipse JSDT，并且我有一个如下所示的 javascript 对象声明：

```
var rs1 = {};
rs1.person1 = {};
rs1.person1.phone = "hg";
rs1.person1.name = "lk"; 
```

如果我将其添加到项目中的文件中，内容辅助将在编辑器中提取 rs1 属性 ( **rs1.person1.name** ) javascript 包含路径用户库，但以下符号

```
var rs1 = {person1:{ phone:"hg", name:"lk"}}; 
```

那么内容辅助将仅到达**rs1.person**并停止。如果我直接在我的 javascript 中使用相同的 JSON 表示法，那么内容辅助将按预期工作。当我将它添加到项目包含路径时它只是不起作用。

我已经为此苦苦挣扎了几天，但我找不到使它起作用的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:24:49.737

看来这可能是 linux 上的 eclipse 的问题（我正在运行 ubuntu）。我下载了一份新的 indigo 副本，以确保不是某个第三方插件导致了问题，但内容辅助仍然无法正常工作。

今天早上刚刚在 Windows 盒子上试了一下，内容辅助按预期工作。

# java - 游戏设计 - 玩家数据 - 我这样做对吗？

> ID：14512348
> 
> 赞同：0
> 
> 时间：2013-01-24T22:53:26.380
> 
> 标签：java, database, jdbc, game-engine

我使用 JDBC/Derby 来存储我正在编写的益智游戏的高分数据。由于游戏的性质，能够根据过滤器查看高分数据将很有用（即显示我在此级别上的最高分，显示我在这台计算机上的最高分等）

该游戏还具有“战役”模式，玩家朝着目标努力并解锁成就。

目前，活动数据存储在一个可序列化的 java 文件中，我将其写入磁盘。

但是，由于高分数据存储在数据库中，并且由于高分表中的 PlayerID 将链接到活动文件，所以感觉我也应该将活动数据存储在数据库中。

我面临的问题是我根本无法分解数据。在我看来，“玩家”表将有一百多个宽，每一列代表一个目标或成就的状态。

我不是数据库专家。我不知道这是否是糟糕的设计。我已阅读有关正常表格 1-5 的内容，并且我相信我遵守了每个表格，但我怀疑我做错了什么。

我真的想要数据库中的高分，它们非常适合。然而，作为副作用，我感到强烈推动将竞选布尔值/其他信息也存储在数据库中。将一些数据写入文件，而将其他数据写入数据库，感觉很奇怪，尤其是当这两个东西相互引用时。

难道我做错了什么？只要它实际上遵守正常形式，就可以有一个有一百或两列的表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:01:13.947

如果 Player 表中的大多数列表示目标或成就的状态，您可以考虑重复数据并将其建模在子表中。

```
Player Table
PlayerId (primary key)
PlayerName

Goals Table
GoalId (primary key)
GoalName

PlayerGoals Table
GoalId (primary key, foreign key to Goal)
PlayerId (primary key, foreign key to Player) 
```

该`Goals`表是一个主列表，您在编写游戏时设置一次。当玩家取得成就时，您将一行插入`PlayerGoals`.

您应该根据预期的用例对数据进行建模。以这种方式建模（与多`Players`列表相比）将使这些类型的查询更容易编写：-

*   列出球员以及他们完成了多少目标
*   哪个目标完成的玩家最多？
*   一般处理目标的任何其他查询

It would be easier to add a goal because it becomes a matter of inserting a row into the `Goals` table rather than adding a column. However, maybe you need to write a bunch of code anyway and this is of no significance.

On the other hand, these types of queries will be easier if you have one big flat Player table with many columns:-

*   Get me everything about a particular Player
*   List every player that has completed Goal X
*   List every player that has completed Goal X and not Goal Y

In the end, you need to choose if you want to make the concept of `Goals` something that you model explicitly in the database or not. What is right and wrong depends on your priorities.

# android - 如何从列表布局中的文本视图中获取总和？

> ID：14512349
> 
> 赞同：1
> 
> 时间：2013-01-24T22:53:27.427
> 
> 标签：android, android-listview, android-arrayadapter

我在编码如何计算用户在 ListView 中 TextView 中插入的所有数字时遇到问题...

这是我的应用程序...我现在需要做的就是如何从列表视图中的行中获取总和并在另一个文本视图中显示它们：

![在此处输入图像描述](../Images/f0a2e555d1f6d5edabb07db02f21d0ff.png)

这是我的主要活动：

```
public class MainActivity extends Activity {
    private Adapter adapter;
    private ArrayList<Ruka> fetch = new ArrayList<Ruka>();
    Button bt;
    EditText et;
    TextView tv;
    TextView mi;
    TextView vi;
    ListView lv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Inflate the menu; this adds items to the action bar if it is present.
        bt = (Button) findViewById(R.id.button1);
        et = (EditText) findViewById(R.id.editText1);
        tv = (TextView) findViewById(R.id.textView1);
        mi = (TextView) findViewById(R.id.textViewMi);
        vi = (TextView) findViewById(R.id.textViewVi);
        lv = (ListView) findViewById(R.id.lista);

        // final String input = et.getText().toString();

        bt.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                if (et.getText().length() == 0) {
                    Toast.makeText(this, "test",
                            Toast.LENGTH_SHORT).show();
                    return;
                }
                if (Float.valueOf(et.getText().toString()) >= 12) {
                    Toast.makeText(this,
                            "test2", Toast.LENGTH_SHORT)
                            .show();
                    return;
                }

                String input = et.getText().toString();
                if (null != input && input.length() > 0) {
                    String maxpunti = "11";
                    int a = Integer.parseInt(maxpunti);
                    int b = Integer.parseInt(input);
                    int c = a - b;
                    String input2 = String.valueOf(c);
                    Ruka one = new Ruka(input, input2);
                    fetch.add(one);
                    et.setText("");
                    adapter = new Adapter(MainActivity.this, R.id.lista, fetch);
                    lv.setAdapter(adapter);

                }

            }
        });

    }
} 
```

这是我的适配器：

```
public class Adapter extends ArrayAdapter<Ruka>{
    private ArrayList<Ruka> entries;
    private Activity activity;

    public Adapter(Activity a, int textViewResourceId, ArrayList<Ruka> entries) {
        super(a, textViewResourceId, entries);
        this.entries = entries;
        this.activity = a;
    }

    public static class ViewHolder{
        public TextView item1;
        public TextView item2;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        ViewHolder holder;
        if (v == null) {
            LayoutInflater vi =
                (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.row, null);
            holder = new ViewHolder();
            holder.item1 = (TextView) v.findViewById(R.id.textView1);
            holder.item2 = (TextView) v.findViewById(R.id.textView2);
            v.setTag(holder);
        }
        else
            holder=(ViewHolder)v.getTag();

        final Ruka custom = entries.get(position);
        if (custom != null) {
            holder.item1.setText(custom.getFirst());
            holder.item2.setText(custom.getSecond());
        }
        return v;
    }

} 
```

更新

这里是`Ruka.java`：

```
public class Ruka {
private String customBig;
private String customSmall;

public Ruka(String string, String string2) {
this.customBig = string;
this.customSmall = string2;
}
public String getFirst() { return customBig; }
public void setcustomBig(String getFirst) { this.customBig = getFirst; }

public String getSecond() { return customSmall; }
public void setcustomSmall(String getSecond) { this.customSmall = getSecond; }
} 
```

如果有人能找到解决方案...请...任何人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:08:15.830

我会说向您的适配器添加一个方法来执行此操作：

```
public int getSum(){
  int sum;
  for(Ruka ruka: entries){
    sum += ruka.getFirst();
  }
} 
```

假设 ruka.getFirst() 是一个数值。

# python - 使用 Python 和 Celery 进行多模块日志记录

> ID：14512351
> 
> 赞同：2
> 
> 时间：2013-01-24T22:53:31.527
> 
> 标签：python, celery, celery-task

我已经实现了一个 Celery 任务，它使用了一些外部库。

假设任务代码是这样的：

```
# mypackage.tasks
import logging
from extpackage1 import module1
from extpackage2 import module2

from celery import Celery
from celery.utils.log import get_task_logger

celery = Celery('tasks', broker='amqp://user:pass@host/vhname')

logger = get_task_logger(__name__)

@celery.task
def my_task(my_job_id):
    logger.info('My task executed with my_job_id=%s' % my_job_id)
    module1.func1()
    module2.func2() 
```

而我导入的 2 个模块基本上是：

```
# extpackage1.module1
import logging

logger = logging.getLogger(__name__)    

def func1():
    # let's do something here ...
    logger.info('Logging inside module1') 
```

和：

```
# extpackage2.module2
import logging

logger = logging.getLogger(__name__)    

def func2():
    # let's do something here ...
    logger.info('Logging inside module2') 
```

我想获得一个日志文件，其中包含`my_job_id`每行中的正确值，具体取决于执行的任务。

它会是这样的：

```
[1][...other info..] My task executed with my_job_id=1
[1][...other info..] Logging inside module1
[1][...other info..] Logging inside module2
[2][...other info..] My task executed with my_job_id=2
[2][...other info..] Logging inside module1
[2][...other info..] Logging inside module2 
```

我可以轻松地将 的值包含`my_job_id`到任务记录器中，正确获取我从任务函数内部记录的行（如`[1][...other info..] My task executed with my_job_id=1`和`[2][...other info..] My task executed with my_job_id=2`）。

但是外部库呢？是否有一种优雅的方式来“包装”外部脚本生成的日志并根据我的要求对其进行格式化？

# javascript - Javascript onclick 事件

> ID：14512352
> 
> 赞同：-2
> 
> 时间：2013-01-24T22:53:33.863
> 
> 标签：javascript, jquery, html

我想通过单击它来模糊我的图像。为此，我在点击事件上使用了 javascript。但它并没有完全按照我的意愿工作。我的代码如下：

```
<script>
$(document).ready(function(){

  $(".ww").click(function(){
    $(this).css("opacity","0.2");
  });
});
</script>

<div class="bg">
    <div class="img ww1"><center><img src="img.jpg" /></center></div>
    <div class="canname"><center>GHULAM MUSTAFA</center></div>
    <div class="partyname"><center>JATOI &nbsp;&nbsp; <span style="color:#CCC;">NPP</span></center></div>
</div>

<div class="bg">
    <div class="img ww2"><center><img src="img.jpg" /></center></div>
    <div class="canname"><center>GHULAM MUSTAFA</center></div>
    <div class="partyname"><center>JATOI &nbsp;&nbsp; <span style="color:#CCC;">NPP</span></center></div>
</div> 
```

我希望当我单击第一张图像时，它的不透明度会设置。并且当我单击第二张图像时，第一张图像的不透明度将完成，第二张图像将设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:56:29.683

因为选择器`.ww`不匹配`ww1`and `ww2`。

你可以看到

```
console.log($(".ww").length); 
```

使用普通类`img`或添加类`ww`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:25:09.017

正如其他人已经尝试解释的那样，您必须使用实际选择两个元素的选择器，因为您希望将事件处理程序绑定到它们。`$('.ww')`不会选择您发布的代码中的任何元素。

使用类时可以更轻松地切换不透明度：

```
.selected {
    opacity: 0.2;
} 
```

将类添加到单击的元素，并将其从当前具有该类的元素中删除：

```
$(".img").click(function(){
    $('.img.selected').add(this).toggleClass('selected');
}); 
```

看看这个[**演示**](http://jsfiddle.net/fkling/aZjP7/)。这应该为您提供足够的信息以将其应用于您的情况。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T22:59:56.200

```
<html>
  <head>
    <script type="text/javascript" src="js/jquery-1.3.2.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){

                $('#my').toggle(
                  function(event) {
                    $(event.target).css('opacity',0.4);
                  },
                  function(event) {
                    $(event.target).css('opacity',1.0);
                  }
                );

        });
    </script>

  </head>
  <body>
    <body>
        <div id="my">asdf</div>
    </body>
</html> 
```

# binary-search-tree - 求FOSS二叉搜索树库

> ID：14512353
> 
> 赞同：-1
> 
> 时间：2013-01-24T22:53:46.197
> 
> 标签：binary-search-tree

我正在为一个爱好项目寻找搜索树软件。它需要支持可变长度的键和数据以及数百万个项目。它不需要支持删除，只要可以丢弃整个树以开始新的树。树应该是平衡的。

如果我不需要使用 autotools 来使用它会是最好的，这样我就不必学习如何在这样的环境中进行开发，至少现在还没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T08:52:47.133

It's quite late answer, but try to use code from projects:

[http://www.codeproject.com/Articles/334773/Graphical-BinaryTrees](http://www.codeproject.com/Articles/334773/Graphical-BinaryTrees)
[http://sourceforge.net/projects/binarytreeanim/](http://sourceforge.net/projects/binarytreeanim/)

# regex - 为什么这个 grep 命令会抛出错误？

> ID：14512355
> 
> 赞同：1
> 
> 时间：2013-01-24T22:53:56.580
> 
> 标签：regex, grep

如果我使用这个命令，它可以按我的需要工作：

```
grep -o -e "{{ *[-_[:alnum:]]\+" 
```

但是如果我使用这个它会抛出错误

```
grep -o -e "{{ *[_-[:alnum:]]\+" 
```

和这个一样：

```
grep -o -e "{{ *[[:alnum:]-_]\+" 
```

还有这个：

```
grep -o -e "{{ *[[:alnum:]-\_]\+" 
```

似乎正则表达式中的 [] 不能以 _ 开头或结尾

为什么？

错误是：

> grep：无效的范围结束

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:57:52.637

该错误与 hypen `-`:`0-9`表示有关`0123456789`。但 是什么意思`_-[:alnum:]`？Put`-`作为第一个字符会禁用此特殊含义，因此第一个正则表达式按预期工作。

# actionscript-3 - 带有 if 语句的未定义属性或对象仍然给出错误

> ID：14512356
> 
> 赞同：2
> 
> 时间：2013-01-24T22:54:04.527
> 
> 标签：actionscript-3, flash

例子：

```
if (foo) {}

if (foo != undefined) {}

if (foo != null) {}

try {foo} catch(e:Error) {} 
```

给出编译器错误。我该如何防止这种情况？

**答案（感谢戳）：**

```
// declare the variable first   
var foo:DisplayObject;

if (foo == null) {
    trace('foo is null') // traces  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:59:57.323

ActionScript 3 是[静态类型](http://en.wikipedia.org/wiki/Static_typing#Static_typing)的。这意味着必须先声明每个变量，然后才能以任何方式使用它。声明一个变量与变量第一次取值的初始化无关；很多时候，两者都是同时完成的，尽管做了类似的事情`var myVar:uint = 2`（这将变量声明`myVar`为`uint`并用 value 初始化它`2`）。

因此，在您的情况下，您会收到一个错误，因为您正在访问一个尚未声明的变量，因此编译器不知道您尝试访问的名称。因此，您需要确保在使用变量之前实际声明了您的变量。

# jquery - 如何隐藏html表单选择选项？

> ID：14512357
> 
> 赞同：1
> 
> 时间：2013-01-24T22:54:05.520
> 
> 标签：jquery, forms

我有一个非常简单的表单，当另一个选择字段对其进行优化时，我想隐藏选择选项。

目前我已经尝试`dispay: none`在我的选项中作为内联样式，但它并没有隐藏它。

我正在使用 chrome，这需要适用于所有浏览器。任何人都可以解释一下，因为我似乎在谷歌上找不到太多东西。

请在这里查看我的问题... [http://jsfiddle.net/3vPgY/5/](http://jsfiddle.net/3vPgY/5/)

这里是我当前的代码......

```
<form>
    <select id="refine">
        <option class="default" value="0">Please refine...</option>
        <option value="green">Green</option>
        <option value="blue">Blue</option>
        <option value="red">Red</option>
    </select>
    <select id="everything" disabled="disabled">
        <option class="default" value="">Please select</option>
        <option class="green" value="green-sel">Show only if Green selected</option>
        <option class="green" value="green-sel">Show only if Green selected</option>
        <option class="green" value="green-sel">Show only if Green selected</option>
        <option class="blue" value="blue-sel">Show only if Blue selected</option>
        <option class="blue" value="blue-sel">Show only if Blue selected</option>
        <option class="blue" value="blue-sel">Show only if Blue selected</option>
        <option class="red" value="red-sel">Show only if Red selected</option>
        <option class="red" value="red-sel">Show only if Red selected</option>
        <option class="red" value="red-sel">Show only if Red selected</option>
    </select>
</form> 
```

我的 jquery 脚本应该过滤第二个下拉列表...

```
$('#refine').change(function () {

    var refine = $('option:selected', this).val().replace(/ /g, "-");

    if (refine != 0) {

        $('#everything').removeAttr('disabled');
        $('#everything option:not(.default)').css('display', 'none');
        $('#everything .' + refine).css('display', 'block');

    } else {

        $('#everything').attr('disabled', 'disabled');
        $('#everything option:not(.default)').css('display', 'none');

    }

}); 
```

如您所见，我只想隐藏选项，而不是删除。如果第一个下拉选项发生变化，我可以以某种方式将它们带回来。

任何建议都是最有帮助的——或者可能是一种解决方法。

谢谢

[http://jsfiddle.net/3vPgY/5/](http://jsfiddle.net/3vPgY/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:09:09.307

我认为完成您的想法的更简单方法是使用三个不同的下拉列表代替第二个下拉列表。然后，第一个下拉菜单可以根据其价值选择要显示的其中一个。

简单得多。

通过该更改，您可以简单地进行回调：

```
$('#refine').change(function () {
    var refine = $('option:selected', this).val().replace(/ /g, "-");

    $('.refined').removeClass('hidden').addClass('hidden');
    $('#'+refine).removeClass('hidden').removeAttr('disabled');
}); 
```

编辑：我[叉了你的小提琴](http://jsfiddle.net/thruq/)（也许编辑了你的原件？）。它有我建议的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:56:45.410

最后我使用了[jquery clone](http://api.jquery.com/clone/)，这似乎可以解决问题。

[http://jsfiddle.net/3vPgY/10/](http://jsfiddle.net/3vPgY/10/)

```
var everything = $('#everything').clone(true);

$('#refine').change(function () {

    var selectColour = $('option:selected', this).val().replace(/ /g, "-");

    if (refine != 0) {

        var everythingRefined = everything.clone(true).find('.default,.'+selectColour);

        $('#everything').removeAttr('disabled');
        $('#everything').empty().append(everythingRefined);

    } else {

        $('#everything').attr('disabled', 'disabled');

    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T23:33:14.293

这不是最好的做事方式，最好动态构建您的选择。但是，如果您必须这样做，请使用以下代码：

```
 $('#refine').change(function () {

        var selected = $(this).val();
        $("#everything option").wrap("<span style='display:none' />");
        $("#everything option." + selected).unwrap();
        $("#everything").attr('disabled',false);

}); 
```

我在这里分叉：http: [//jsfiddle.net/AyX9Q/](http://jsfiddle.net/AyX9Q/)

请记住，代码很少，只是为了向您展示如何将选项包装在跨度中并隐藏它们。如果您在第一次选择时恢复为“请选择”，则不会执行任何逻辑来显示所有选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T23:02:19.453

您不能隐藏/删除单个选项，只能`disabled`对它们应用属性。它们将显示为灰色，但无法选择。

您可以以编程方式保留一个变量对象，该对象具有选择的默认配置的所有数据。然后，当您需要删除选项时，您可以但仍然有办法知道当您的所有条件都对齐时需要进入选择中的内容。

# regex - 如何在正则表达式模式中包含变量

> ID：14512359
> 
> 赞同：3
> 
> 时间：2013-01-24T22:54:14.747
> 
> 标签：regex, vba

我正在研究一个 vba 宏，它使用正则表达式在另一个字符串中搜索字符串模式。

正则表达式模式包括一个不同的字符串（下面代码中的 APR24）。我需要知道如何在模式中包含一个变量。任何人都可以帮忙。

我的代码如下

```
Public Function Regexsrch(ByVal str2bsrchd As String, ByVal str2srch As String) As Boolean
Dim Regex As New VBScript_RegExp_55.RegExp
Dim matches, s
Regex.Pattern = "(\.|\s)APR24(,|\s|\()"
Regex.IgnoreCase = True
    If Regex.Test(str2bsrchd) Then
         Regexsrch = True
Else
        Regexsrch = False
End If
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:13:49.103

那么 str2srch 是“APR24”还是一些变体？如果是这种情况，您只需使用连接来构建您的模式字符串。

```
Public Function Regexsrch(ByVal str2bsrchd As String, ByVal str2srch As String) As Boolean
Dim Regex As New VBScript_RegExp_55.RegExp
Dim matches, s
Regex.Pattern = "(\.|\s)" + str2srch + "(,|\s|\()"
Regex.IgnoreCase = True
    If Regex.Test(str2bsrchd) Then
         Regexsrch = True
Else
        Regexsrch = False
End If
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:05:51.400

您可以指定您想要的任何模式`str2srch`，然后将其分配给`Regex.Pattern`

例如

```
Sub Sample()
    Debug.Print Regexsrch("APR24ddd", "APR24")  '<~~ Returns True
    Debug.Print Regexsrch("APR277ddd", "APR24") '<~~ Returns False
End Sub

Public Function Regexsrch(ByVal str2bsrchd As String, ByVal str2srch As String) As Boolean
    Dim Regex As New VBScript_RegExp_55.RegExp
    Dim matches, s

    Regex.Pattern = str2srch
    Regex.IgnoreCase = True

    If Regex.Test(str2bsrchd) Then
         Regexsrch = True
    Else
        Regexsrch = False
    End If
End Function 
```

**跟进**

即使它是动态的，您也可以始终将模式传递为

`Debug.Print Regexsrch("APR24ddd", "(\.|\s)" & VARIABLE & "(,|\s|\()")`.

这使您可以灵活地使用要传递给函数的任何模式，并且您不仅限于一种模式...

# jquery - 获取 jquery 解析 url，将 url 与导航菜单项进行比较并添加到类中

> ID：14512362
> 
> 赞同：0
> 
> 时间：2013-01-24T22:54:33.303
> 
> 标签：jquery, html

请善待。我是菜鸟。仅仅因为我没有在这里发布大量代码并不意味着我没有做过“研究”。事情是我只是在寻找方向。

我正在寻求知识渊博的人的帮助，了解如何使用 jquery 来：

1.  解析一个网址
2.  将该网址与导航菜单选择进行比较
3.  然后，如果有匹配项，则向该导航菜单项添加一个类。

看起来很简单，我偶然发现了几页，只是想知道我是否朝着正确的方向前进。

这些中的任何一个都是正确的方法吗？

[https://github.com/allmarkedup/jQuery-URL-Parser](https://github.com/allmarkedup/jQuery-URL-Parser)

[用 jquery/javascript 解析 URL？](https://stackoverflow.com/questions/6644654/parse-url-with-jquery-javascript)

谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:04:11.460

看看这里，它可能正是你想要做的：

[http://gnuvance.wordpress.com/2007/09/14/a-django-template-tag-for-the-current-active-page/](http://gnuvince.wordpress.com/2007/09/14/a-django-template-tag-for-the-current-active-page/)

# ruby - 用于抓取的 Node.js 或 Ruby

> ID：14512364
> 
> 赞同：1
> 
> 时间：2013-01-24T22:54:49.607
> 
> 标签：ruby, ruby-on-rails-3, node.js, web-scraping, screen-scraping

我正在尝试制作一个需要从多个网站抓取大量数据的应用程序。我尝试使用 Ruby 抓取网站，但像 Mechanize 这样的 gem 似乎只抓取静态页面而不是动态内容。我有几个关于我应该在这个项目中使用哪种语言或任何其他语言的问题（我正在考虑使用 Node，因为应用程序中的很多元素必须是实时的）。

1.  是否可以使用 Ruby 和/或 Node 来抓取动态内容？如果是这样，具体应该使用哪些工具？
2.  如果多个用户要从多个站点进行抓取，您建议使用哪种语言？
3.  在一个稍微无关的注释中，是否可以将 Node 和 Rails 结合起来？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T23:42:06.870

您可以利用`capybara`gem 使用 ruby​​ 抓取 javascript 网站。

`selenium`这样做的好处是可以通过驱动程序使用实际的浏览器，例如 Firefox、Chrome 和 IE 。或者您可以使用无头浏览器，例如 webkit（通过 capybara-webkit）或 phantomjs（通过 poltergeist）。

当您使用 capybara 时，请务必使用启用 javascript 的驱动程序，例如 selenium 或 capybara-webkit。我今天的司机是恶作剧。

[在他们的自述](https://github.com/jnicklas/capybara#calling-remote-servers)文件中有一些关于如何在远程站点上使用 capybara 的说明。

Node vs. Ruby 是一个非常开放的问题。我在这里的回答是建议使用 Ruby，因为这是我的经验和偏好。“组合”它们可能意味着很多事情，它们可以协同使用，发挥各自的优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:27:56.193

当您说 mechanize 无法抓取动态内容时，您的真正意思是要确定需要发出哪些 ajax 请求并制作它们需要更多的工作。另一方面，一旦你这样做了，你通常会得到一个很好的 json 响应，而且很容易处理。Mechanize 也比完整的浏览器解决方案快得多，所以我认为它通常值得额外的工作。

就 Node 而言，它是有潜力的，也许一旦它出现了一段时间，就会有一些很棒的库可用，但我还没有看到任何可以弥补我所怀念的 ruby​​ 东西的东西。

# ruby - Ruby 生成器冲突

> ID：14512369
> 
> 赞同：0
> 
> 时间：2013-01-24T22:55:11.593
> 
> 标签：ruby, gem, bundler

我有一个一直在工作的小型 ruby​​ 应用程序。我现在遇到与 builder 的冲突错误。看起来我更新了我的宝石，现在它发生了冲突。我在 Gemfile 中设置了它以使用 v2.1.2。但这也行不通。感谢你给与我的帮助。

宝石文件

```
gem 'builder', '2.1.2' 
```

捆绑器输出

```
$ bundle
Using builder (2.1.2) 
Using bundler (1.2.3) 

$ bundle show builder
/Users/covard/.rvm/gems/ruby-1.9.3-p327/gems/builder-2.1.2 
```

冲突消息

```
`raise_if_conflicts': Unable to activate actionpack-3.2.11, because rack-1.5.0 conflicts with rack (~> 1.4.0), builder-3.1.4 conflicts with builder (~> 3.0.0) (Gem::LoadError) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:53:04.377

弄清楚我的问题是什么，即使我有我的 Gemfile 我没有使用它。由于 rails 会自动处理，我不知道我必须添加一个 require 才能使用它。将其添加到我的 ruby​​ 文件后，它运行良好。

```
require "bundler/setup" 
```

# python - 使用 Python 导出维基百科

> ID：14512372
> 
> 赞同：1
> 
> 时间：2013-01-24T22:55:19.653
> 
> 标签：python, mediawiki, python-requests

我正在尝试按照[http://www.mediawiki.org/wiki/Manual:Parameters_to_Special:Export](http://www.mediawiki.org/wiki/Manual:Parameters_to_Special:Export)从土耳其语维基百科页面导出一个类别。这是我正在使用的代码；

```
# -*- coding: utf-8 -*-
import requests
from BeautifulSoup import BeautifulStoneSoup
from sys import version

link = "http://tr.wikipedia.org/w/index.php?title=%C3%96zel:D%C4%B1%C5%9FaAktar&action=submit"

def get(pages=[], category = False, curonly=True):
    params = {}
    if pages:
        params["pages"] = "\n".join(pages)
    if category:
        params["addcat"] = 1
        params["category"] = category

    if curonly:
        params["curonly"] = 1

    headers = {"User-Agent":"Wiki Downloader -- Python %s, contact: Yaşar Arabacı: yasar11732@gmail.com" % version}
    r = requests.post(link, headers=headers, data=params)
    return r.text

print get(category="Matematik") 
```

因为我试图从土耳其维基百科获取数据，所以我使用了它的 url。其他事情应该是不言自明的。我正在获取可用于导出数据而不是实际 xml 的表单页面。谁能看到我在这里做错了什么？我也尝试过提出获取请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:00:26.450

没有参数named `category`，类名应该在`catname`参数中。

但Special:Export 不是为机器人构建的，它是为人类构建的。因此，如果您使用`catname`正确，它将再次返回表单，这次将填写类别中的页面。然后您应该再次单击“提交”，这将返回您想要的 XML。

我认为在代码中这样做太复杂了。如果你改用 API 会更容易。有一些 Python 库可以帮助您：[Pywikipediabot](http://www.mediawiki.org/wiki/Manual%3aPywikipediabot)或[wikitools](http://code.google.com/p/python-wikitools/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:36:19.137

抱歉，我原来的答案存在严重缺陷。我误解了最初的意图。

我做了一些更多的实验，因为我很好奇。您上面的代码似乎不一定不正确，实际上，特殊导出文档具有误导性。该文档指出使用`catname`并将`addcat`类别添加到输出中，但它仅列出指定范围内的页面和类别`catname`在 html 表单中。似乎维基百科实际上要求明确指定您希望下载的页面。诚然，那里的文档在这个问题上似乎并不十分详尽。我建议您解析该类别中页面的页面，然后使用您的脚本明确下载这些页面。我确实看到这种方法在效率方面存在问题。由于维基百科数据的性质，你会得到很多页面，它们只是其他页面的类别页面。

顺便说一句，使用 Wikipedia 中可供下载的实际数据语料库可能会更快。

祝你好运！

# sublimetext2 - 标签和元素快捷方式 - Sublime Text 2

> ID：14512373
> 
> 赞同：2
> 
> 时间：2013-01-24T22:55:21.763
> 
> 标签：sublimetext2, shortcuts

有没有一种方法可以为您的标签创建自己的快捷方式，例如如果我输入“li”它会自动输入 li type="square"，而我所要做的就是按 Enter 键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:05:51.240

您是否尝试过制作自己的片段？

**在Tools** -menu 中尝试**New Snippet**命令并添加以下内容并保存：

 **```
<snippet>
    <content><![CDATA[
<li type="square">${1:Item} ${2:}
]]></content>
    <tabTrigger>li</tabTrigger>
</snippet> 
```

如果您键入然后按，这将`<li>`在当前文件中输入一个-tag 。您还可以添加标签以将其限制为 HTML 文件。`li``Tab``<scope>`

从[非官方文档](http://docs.sublimetext.info/en/latest/index.html)：

> 片段可以存储在任何包的文件夹下，但是为了在您学习时保持简单，您可以将它们保存到您的 Packages/User 文件夹**

# c# - Dispatcher 的 PriorityQueue 导致“内存泄漏”

> ID：14512374
> 
> 赞同：6
> 
> 时间：2013-01-24T22:55:25.037
> 
> 标签：c#, wpf, listview, memory-leaks, virtualization

我在 WPF 中构建的 UI 框架中遇到垃圾收集问题。我在引号中使用内存泄漏，因为我认为我理解这个问题，但没有解决方案或某种解决方法。

当我创建 UIElements 但不显示它们时会出现此问题。从 UI 的角度来看，我使用的是虚拟化列表视图 (GridView)。所以所有的行都不会一次显示。在我的一个用例中，我创建了一个导出行功能，它能够将所有行导出到 csv。通常，行中的单元格由字符串或整数等基元组成。

棘手的地方是一些单元格本身就是 UIElements，这也是列表被虚拟化的原因之一（制作一些单元格的成本非常耗时，并且可能会占用内存）。所以我只在被问到时创建 UIElements，然后我什至不缓存它们（使它们有资格被收集）。

当我通过行提供程序枚举时访问属性时会出现此问题。创建并返回 UIElement，从中提取数据，写入 csv，然后查看下一行。在这个循环中，没有对这些行（ViewModel 类）的引用，因此人们会认为它们有资格进行垃圾收集。情况似乎并非如此。使用.Net Memory Profiler，我推断出我的“内存不足异常”是UIElements被PriorityQueue中的DispatcherOperation（来自Dispatcher）保留在内存中的结果。我认为这是因为它们正在等待显示（但从不显示）。

如果我没有得到内存不足的异常，最终这些 UIElements 似乎是通过 PriorityQueue 处理的（我猜它放弃了）并且被垃圾收集。这是最好的情况。当我处理少量行时，这似乎很好。但是当我们进入 50,000 - 100k 级别时，情况就不同了。我可以向您保证，没有其他对这些 ViewModel 或 UIElements 本身的引用（在 DispatcherOperation 之外）。

关于如何解决此问题或解决此问题的任何想法？有没有办法阻止这些未显示且很快将被使用的 UIElements 的排队？

编辑 01/25/2013：我意识到我可能需要专门清理内存中保存的内容。行对象，因为它们没有对 UIElement 的引用，它们没有保存在内存中（这很好）。只有通过 Get 访问器访问的 UIElement 会留在内存中。对它们的唯一引用是 PriorityQueue 而不是我自己的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-12-24T22:16:32.640

好吧，我不是垃圾收集专家，但我知道两件事：

1.  您几乎不必关心垃圾收集
2.  您几乎不必手动进行垃圾收集

这就是我不太了解它的原因，我也不需要了解太多。

所以除此之外，这里是垃圾收集如何工作的粗略概述。

想象一下有这个代码：

```
class Program
{
    class Something
    {
        public string name { get; set; }
    }

    class Container
    {
        List<Something> myList = new List<Something>();

        public void AddNewSomething()
        {
            Something mySomething = new Something() { name = "test" };
            myList.Add(mySomething);
        }
    }

    public static void Main(string[] args)
    {
        Container myContainer = new Container();
        myContainer.AddNewSomething();

        while (true)
        {
            Console.WriteLine("Something will always be in Memory");
        }
    }
} 
```

垃圾收集是关于被引用的对象。所以看方法：`AddNewSomething`。`mySomething`方法完成后是否需要局部变量？该对象可以被垃圾收集吗？答案是否定的，因为该对象`mySomething`现在被`myList`.

由于存在一个无限循环 in`Main` `myList`不能被垃圾回收，并且由于它包含 的对象`MySomething`，因此该对象也不能被垃圾回收，否则它将从列表中消失。

说得通？但愿如此。

鉴于 UIElements，我相信他们总是有父母吗？一个容纳它们的容器。该父级通常是一个具有子级列表的对象，就像在我的示例中一样。因此，除非父级不能被垃圾收集器处理，因为它有一个引用（例如它需要显示在窗口中），否则子级不能被垃圾收集器处理掉。因此，您添加的 UIElement 越多，孩子的列表就会变得越来越大。您必须主动将它们从父级中删除。缺少一些代码，所以我不能给出一个明确的例子，但你正在寻找类似的东西：

```
someParent.Children.Remove(noLongerRequiredUiElement); 
```

但除此之外，你为什么要创建和添加你从未展示过的 UIElement？看起来您只是在处理一些数据，这些数据可以驻留在一个与 UI 完全无关的单独类中。鉴于您的问题，我并不完全清楚您为什么这样做。但我认为您可能会再次考虑您的类架构。这样您就可以在[Queue](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.queue-1?view=net-5.0)中拥有项目，并在处理完它们后立即将它们一一删除。

# ruby - 在 Ruby + TinyTDS 中参数化 SQL 查询

> ID：14512378
> 
> 赞同：13
> 
> 时间：2013-01-24T22:55:32.133
> 
> 标签：ruby, sql-injection, tiny-tds

我试图弄清楚如何在将 SQL 字符串交给执行之前对其进行参数化，但遗憾的是我在互联网上找到了很多[这样的东西：](http://evilmathemagician.blogspot.com/2011/08/ruby-tutorial-sql-query-to-console-ie.html)

```
sql = "SELECT * FROM table_name WHERE thing LIKE '%#{input}%'" 
```

这是一件坏事……但是，在底层[Sequel](http://sequel.rubyforge.org/rdoc/files/doc/prepared_statements_rdoc.html)库中可以使用参数化 sql 查询，这是 TinyTDS 构建的基础。所以我知道这是可能的。我只是很难弄清楚。

我真的希望它可以像[这样](http://rosettacode.org/wiki/Category%3aRuby)简单：

```
@client = TinyTds::Client.new(
      :adapter => 'sqlserver',
      :host => host,
      :database => db,
      :username => username,
      :password => password)

sql = "SELECT * FROM table_name WHERE thing LIKE ?"
safe_sql = @client.prepare(sql, input)
result = @client.execute(safe_sql) 
```

我似乎[`Dataset`](https://github.com/jeremyevans/sequel/blob/master/lib/sequel/adapters/tinytds.rb#L258)在源代码中找到了一个叫做类的东西，它有一个准备方法。问题是，我该如何使用它？在将它交给对象中的`execute()`方法之前，我是否需要创建另一个`@client`对象？我找不到一个`initialize`或一个`new`方法，所以简单的实例化似乎是错误的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-13T14:53:06.207

我使用 TinyTds 作为适配器实现了 Sequel gem。这允许您参数化 SQL 查询。请参见下面的示例：

```
require "tiny_tds"
require 'sequel' 

DB = Sequel.connect(
    adapter: 'tinytds', 
    host: "dataserver", 
    database: "database", 
    user: "username", 
    password: "password"
) 
```

然后，我能够使用我的值参数化创建一个 SQL 插入语句。

```
posts_table = DB[:posts]
posts_table.insert(:author => 'John Smith', :title => 'How to parametrize sql queries') 
```

我正在连接到 MS SQL 数据库。

# r - 为什么 geom_tile 会绘制我的数据子集，而不是更多？

> ID：14512381
> 
> 赞同：4
> 
> 时间：2013-01-24T22:55:59.047
> 
> 标签：r, ggplot2

我正在尝试绘制地图，但我无法弄清楚为什么以下内容不起作用：

这是一个最小的例子

```
testdf <- structure(list(x = c(48.97, 44.22, 44.99, 48.87, 43.82, 43.16, 38.96, 38.49, 44.98, 43.9), y = c(-119.7, -113.7, -109.3, -120.6,  -109.6, -121.2, -114.2, -118.9, -109.7, -114.1), z = c(0.001216,  0.001631, 0.001801, 0.002081, 0.002158, 0.002265, 0.002298, 0.002334, 0.002349, 0.00249)), .Names = c("x", "y", "z"), row.names = c(NA, 10L), class = "data.frame") 
```

这适用于 1-8 行：

```
ggplot(data = testdf[1,], aes(x,y,fill = z)) + geom_tile()
ggplot(data = testdf[1:8,], aes(x,y,fill = z)) + geom_tile() 
```

但不适用于 9 行：

```
ggplot(data = testdf[1:9,], aes(x,y,fill = z)) + geom_tile() 
```

最终，我正在寻找一种在非常规网格上绘制数据的方法。我使用 geom_tile 不是必需的，但是任何点上的空间填充插值都可以。

### 完整的数据集可作为[gist](https://gist.github.com/raw/4635980/f657dcdfab7b951c7b8b921b3a109c7df1697eb8/test.csv)

`testdf`以上是完整数据集的一小部分，美国的高分辨率栅格（>7500 行）

```
require(RCurl) # requires libcurl; sudo apt-get install libcurl4-openssl-dev
tmp <- getURL("https://gist.github.com/raw/4635980/f657dcdfab7b951c7b8b921b3a109c7df1697eb8/test.csv")
testdf <- read.csv(textConnection(x)) 
```

### 我试过的：

1.  使用 geom_point 有效，但没有达到预期的效果：

    ```
    ggplot(data = testdf, aes(x,y,color=z)) + geom_point() 
    ```

2.  如果我将x 或 y 转换为 1:10 的向量，则绘图按预期工作*：*

    ```
    newdf <- transform(testdf, y =1:10)

    ggplot(data = newdf[1:9,], aes(x,y,fill = z)) + geom_tile()

    newdf <- transform(testdf, x =1:10)
    ggplot(data = newdf[1:9,], aes(x,y,fill = z)) + geom_tile() 
    ```

* * *

```
sessionInfo()R version 2.15.2 (2012-10-26) Platform: x86_64-pc-linux-gnu (64-bit)

> attached base packages: [1] stats     graphics  grDevices utils    
> datasets  methods   base     

> other attached packages: [1] reshape2_1.2.2 maps_2.3-0    
> betymaps_1.0   ggmap_2.2      ggplot2_0.9.3 

> loaded via a namespace (and not attached):  [1] colorspace_1.2-0   
> dichromat_1.2-4     digest_0.6.1        grid_2.15.2        
> gtable_0.1.2        labeling_0.1         [7] MASS_7.3-23        
> munsell_0.4         plyr_1.8            png_0.1-4          
> proto_0.3-10        RColorBrewer_1.0-5  [13] RgoogleMaps_1.2.0.2
> rjson_0.2.12        scales_0.2.3        stringr_0.6.2      
> tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T00:30:44.050

您不能使用的原因`geom_tile()`（或更合适`geom_raster()`的原因是因为这两个`geoms`依赖于您的图块是均匀分布的，而事实并非如此。您需要将数据强制转换为点，然后将它们重新采样为均匀分布的栅格，您可以然后用 绘图`geom_raster()`。您将不得不接受您需要稍微重新采样原始数据才能按照您的意愿绘制它。

您还应该阅读有关地图投影的更多信息`raster:::projection`。`rgdal:::spTransform`

```
require( RCurl )
require( raster )
require( sp )
require( ggplot2 )
tmp <- getURL("https://gist.github.com/geophtwombly/4635980/raw/f657dcdfab7b951c7b8b921b3a109c7df1697eb8/test.csv")
testdf <- read.csv(textConnection(tmp))
spdf <- SpatialPointsDataFrame( data.frame( x = testdf$y , y = testdf$x ) , data = data.frame( z = testdf$z ) )

# Plotting the points reveals the unevenly spaced nature of the points
spplot(spdf) 
```

![在此处输入图像描述](../Images/4a379bb983eaa717ec0e64638034fdfe.png)

```
# You can see the uneven nature of the data even better here via the moire pattern
plot(spdf) 
```

![在此处输入图像描述](../Images/c18ebd2675efb04cb075a01aa16c60b6.png)

```
# Make an evenly spaced raster, the same extent as original data
e <- extent( spdf )

# Determine ratio between x and y dimensions
ratio <- ( e@xmax - e@xmin ) / ( e@ymax - e@ymin )

# Create template raster to sample to
r <- raster( nrows = 56 , ncols = floor( 56 * ratio ) , ext = extent(spdf) )
rf <- rasterize( spdf , r , field = "z" , fun = mean )

# Attributes of our new raster (# cells quite close to original data)
rf
class       : RasterLayer 
dimensions  : 56, 135, 7560  (nrow, ncol, ncell)
resolution  : 0.424932, 0.4248191  (x, y)
extent      : -124.5008, -67.13498, 25.21298, 49.00285  (xmin, xmax, ymin, ymax)

# We can then plot this using `geom_tile()` or `geom_raster()`
rdf <- data.frame( rasterToPoints( rf ) )    
ggplot( NULL ) + geom_raster( data = rdf , aes( x , y , fill = layer ) ) 
```

![在此处输入图像描述](../Images/ce8f69f2e8be12261eb0e4d298e3c64b.png)

```
# And as the OP asked for geom_tile, this would be...
ggplot( NULL ) + geom_tile( data = rdf , aes( x , y , fill = layer ) , colour = "white" ) 
```

![在此处输入图像描述](../Images/ce4ec3237690e1edc5c1b9f9650ff3b1.png)

当然我要补充一点，这个数据毫无意义。您真正必须做的是获取 SpatialPointsDataFrame，为其分配正确的投影信息，然后通过 spTransform 转换为 latlong 坐标，然后对转换后的点进行栅格化。确实，您需要了解有关栅格数据的更多信息。你在这里得到的是一个近似值，但最终它并不是数据的真实反映。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-11T17:56:53.370

这不是`geom_tile()`问题的答案，而是另一种绘制数据的方法。

由于您有 30 公里网格的 x 和 y 坐标（我假设在该网格的中间），因此您可以使用`geom_point()`和绘制数据。您应该选择适当`shape=`的值。形状 15 将绘制矩形。

另一个问题是 x 和 y 值 - 在绘制数据时，它们应该被绘制为`x=y`并`y=x`对应于纬度和经度。

`coord_equal()`将确保有正确的纵横比（我在网上找到了这个以比例为例的解决方案）。

```
ggplot(data = testdf, aes(y,x,colour=z)) + geom_point(shape=15)+
  coord_equal(ratio=1/cos(mean(testdf$x)*pi/180)) 
```

![在此处输入图像描述](../Images/35871533a630f641cf79a0e0ccc5adb4.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T23:00:37.427

回答：

数据被绘制但非常小。

* * *

[从这里：](http://svitsrv25.epfl.ch/R-doc/library/ggplot2/html/geom_tile.html)

```
"Tile plot as densely as possible, assuming that every tile is the same size. 
```

考虑这个情节

```
ggplot(data = testdf[1:2,], aes(x,y,fill = z)) + geom_tile() 
```

![在此处输入图像描述](../Images/568600825b92b22a8afdc83299b04553.png)

上图中有两个图块。`geom_tile`考虑到每个图块的大小相同，正在尝试使图尽可能密集。在这里，我们可以制作两个这么大的瓷砖而不会重叠。为 4 块瓷砖腾出足够的空间。

试试下面的图，看看结果图告诉你什么：

```
df1 <- data.frame(x=c(1:3),y=(1:3))
#     df1
#  x   y
#1 1   1
#2 2   2
#3 3   3
ggplot(data = df1[1,], aes(x,y)) + geom_tile()   
ggplot(data = df1[1:2,], aes(x,y)) + geom_tile() 
ggplot(data = df1[1:3,], aes(x,y)) + geom_tile() 
```

与此示例进行比较：

```
 df2 <- data.frame(x=c(1:3),y=c(1,20,300))
 df2
 # x   y
#1 1   1
#2 2  20
#3 3 300

 ggplot(data = df2[1,], aes(x,y)) + geom_tile()
 ggplot(data = df2[1:2,], aes(x,y)) + geom_tile()
 ggplot(data = df2[1:3,], aes(x,y)) + geom_tile() 
```

请注意，前两个图是相同的`df1`，`df2`但第三个图`df2`是不同的。这是因为我们可以制作的最大瓷砖在 (`x[1],y[1])`和 (之间`x[2],y[2])`。任何更多它们会重叠，这在这两个瓷砖和最后第三个瓷砖之间留下了很多空间`y=300`。

尽管我不确定这在这里有多合理，但还有一个`width`参数。`geom_tile`你确定你不喜欢这种稀疏数据的另一种选择吗？

（您的完整数据仍在绘制中：请参阅`ggplot(data = testdf, aes(x,y)) + geom_tile(width=1000)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T19:21:27.723

如果你想使用 geom_tile 我认为你需要先聚合：

```
# NOTE: tmp.csv downloaded from https://gist.github.com/geophtwombly/4635980/raw/f657dcdfab7b951c7b8b921b3a109c7df1697eb8/test.csv
testdf <- read.csv("~/Desktop/tmp.csv") 

# combine x,y coordinates by rounding
testdf$x2 <- round(testdf$x, digits=0)
testdf$y2 <- round(testdf$y, digits=0)

# aggregate on combined coordinates
library(plyr)
testdf <- ddply(testdf, c("x2", "y2"), summarize,
                z = mean(z))

# plot aggregated data using geom_tile
ggplot(data = testdf, aes(y2,x2,fill=z)) +
  geom_tile() +
  coord_equal(ratio=1/cos(mean(testdf$x2)*pi/180)) # copied from @Didzis Elferts answer--nice! 
```

一旦我们完成了所有这些，我们可能会得出结论 geom_point() 更好，正如@Didzis Elferts 所建议的那样。

# 3d - 关于模型的顶点缓冲区和索引缓冲区的混淆

> ID：14512385
> 
> 赞同：0
> 
> 时间：2013-01-24T22:56:12.030
> 
> 标签：3d, xna, content-pipeline

我有一个模型文件，其中包含多个网格（即：一棵树、一辆车……），用作我们游戏的静态背景。我的目标是将模型的顶点和索引存储为两个缓冲区，并将这些缓冲区分配给 GPU。然而，我在去的路上有点迷茫。

这个[Riemer 的 XNA 教程](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2/Loading_a_Model.php)指出模型本身有一个大顶点缓冲区和一个大索引缓冲区，其中包含所有网格（和网格部分）的信息，但似乎无法访问这些缓冲区。但是，可以访问 ModelMeshParts 的缓冲区，但我不能将它们全部连接到一个缓冲区中。

我的猜测是扩展模型处理器以在运行时将模型顶点和索引存储在数组中。有没有更简单的方法，因为 Riemer 说这些缓冲区已经定义？我对这种说法感到困惑。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:20:46.850

实际上，整个模型只有 1 个顶点缓冲区和 1 个索引缓冲区。在任何 ModelMeshPart 中公开的顶点缓冲区是整个模型的顶点缓冲区，它与在任何其他 MMP 中公开的缓冲区相同。无需连接它们，整个缓冲区在每个 MMP 中。

每个 MMP 都有自己的缓冲区起始索引，每个 MMP 都有自己的变量，用于描述从用于该特定 MMP 的起始索引连续的顶点数。

![在此处输入图像描述](../Images/c311b8ca6b80afd2aebadf04263d6591.png)

所以在这个模型的VB图中，`ModelMesh[1]->ModelMeshPart[1]`开始索引是300，它的顶点数是75。这样，当绘制MMP时，设备知道只使用整个VB的那几个顶点。

# python - 使用列表中的 url 抓取文本 (BeautifulSoup4)

> ID：14512386
> 
> 赞同：0
> 
> 时间：2013-01-24T22:56:13.187
> 
> 标签：python, python-2.7, beautifulsoup, urllib2

我已经从一个 URL 获得了有效的文本抓取工具。问题是我需要再抓取 25 个网址。这些网址几乎相同，唯一的区别是最后一个字母。这是更清晰的代码：

```
import urllib2
from bs4 import BeautifulSoup

f = open('(path to file)/names', 'a')
links = ['http://guardsmanbob.com/media/playlist.php?char='+ chr(i) for i in range(97,123)]

response = urllib2.urlopen(links[0]).read()
soup = BeautifulSoup(response)

for tr in soup.findAll('tr'):
    if not tr.find('td'): continue
    for td in tr.find('td').findAll('a'):
        f.write(td.contents[0] + '\n') 
```

我不能让这个脚本一次性运行列表中的所有 url。我设法得到的只是每个网址的第一首歌曲名称。对不起我的英语不好。我希望你能理解我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:43:00.717

`I can't make this script to run all urls from list in one time.`

将您的代码保存在具有一个参数的方法中，`*args`（或任何您想要的名称，只是不要忘记`*`）。将`*`自动解压缩您的列表。没有正式名称`*`，但是，有些人（包括我）喜欢称它为[splat 运算符](https://stackoverflow.com/questions/2322355/proper-name-for-python-operator)。

```
def start_download(*args):
    for value in args:
        ##for debugging purposes
        ##print value

        response = urllib2.urlopen(value).read()
        ##put the rest of your code here

if __name__ == '__main__':
    links = ['http://guardsmanbob.com/media/playlist.php?char='+ 
              chr(i) for i in range(97,123)]

    start_download(links) 
```

**编辑：** 或者您可以直接遍历您的链接列表并下载每个链接。

```
 links = ['http://guardsmanbob.com/media/playlist.php?char='+ 
              chr(i) for i in range(97,123)]
    for link in links:
         response = urllib2.urlopen(link).read()
         ##put the rest of your code here 
```

**编辑2：**

为了获取所有链接，然后将它们保存在文件中，这是带有特定注释的整个代码：

```
import urllib2
from bs4 import BeautifulSoup, SoupStrainer

links = ['http://guardsmanbob.com/media/playlist.php?char='+ 
          chr(i) for i in range(97,123)]

    for link in links:
         response = urllib2.urlopen(link).read()
         ## gets all <a> tags
         soup = BeautifulSoup(response, parse_only=SoupStrainer('a'))
         ## unnecessary link texts to be removed
         not_included = ['News', 'FAQ', 'Stream', 'Chat', 'Media',
                    'League of Legends', 'Forum', 'Latest', 'Wallpapers',
                    'Links', 'Playlist', 'Sessions', 'BobRadio', 'All',
                    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J',
                    'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T',
                    'U', 'V', 'W', 'X', 'Y', 'Z', 'Misc', 'Play',
                    'Learn more about me', 'Chat info', 'Boblights',
                    'Music Playlist', 'Official Facebook',
                    'Latest Music Played', 'Muppets - Closing Theme',
                    'Billy Joel - The River Of Dreams',
                    'Manic Street Preachers - If You Tolerate This 
                     Your Children Will Be Next',
                    'The Bravery - An Honest Mistake', 
                    'The Black Keys - Strange Times',
                    'View whole playlist', 'View latest sessions', 
                    'Referral Link', 'Donate to BoB', 
                    'Guardsman Bob', 'Website template', 
                    'Arcsin']

         ## create a file named "test.txt"
         ## write to file and close afterwards
         with open("test.txt", 'w') as output:
             for hyperlink in soup:
                if hyperlink.text:
                    if hyperlink.text not in not_included:
                        ##print hyperlink.text
                        output.write("%s\n" % hyperlink.text.encode('utf-8')) 
```

这是保存在的输出`test.txt`：

![在此处输入图像描述](../Images/c459904002e7d8c1131d8a4a5f49d4b7.png)

我建议您`test.txt`每次循环链接列表时更改为不同的文件名（例如 S 歌曲标题），因为它会覆盖前一个。

# bytearray - image.jpg 字节数组通过 base64 WP8 到 writeablebitmap

> ID：14512390
> 
> 赞同：0
> 
> 时间：2013-01-24T22:56:27.187
> 
> 标签：bytearray, jpeg, windows-phone-8, writeablebitmapex

我正在尝试将 .jpg 或 .png 文件转换为可写位图。我在另一个源中获取图像并转换为 base64 编码。去掉包装后，我有一个宽度、高度和base64数据。然后我使用：

```
var base64 = dataurl.Substring(dataurl.IndexOf("base64,") + 7);
binData = Convert.FromBase64String(base64); 
```

这给了我图像的二进制数据。问题真的在于我正在为 windows phone 8 编写这个，所以我可以使用的库和方法受到限制。显而易见的选择是：

```
using (var stream = new MemoryStream(binData, 0, binDta.Length, true, true))
{
    var wbp = new WriteableBitmap(1,1).LoadJpeg(stream);
} 
```

但我从 WriteableBitmap 库中获得了 System.ArgumentException。任何适用于 Windows Phone 8 的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:24:30.320

您应该确保 base64 解码数据确实是 JPG 和 PNG 等有效格式。然后我建议您尝试[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/) FromStream 方法：

```
var wbp  = new WriteableBitmap(1, 1).FromStream(stream); 
```

# image - 简单的 css 文本图像布局

> ID：14512392
> 
> 赞同：0
> 
> 时间：2013-01-24T22:56:29.170
> 
> 标签：image, text

我无法将一些文本放在图像旁边。我在一个网站上工作：http: [//puckpros.edkatzman.com/](http://puckpros.edkatzman.com/)

但不是另一个： http: [//petra.edkatzman.com/](http://petra.edkatzman.com/)

我看不出有什么区别。另一双眼睛能帮上忙吗？

这是 jsfiddle：http: [//jsfiddle.net/tangobango/rK2mG/](http://jsfiddle.net/tangobango/rK2mG/)

HTML：

```
 <div id="primary" class="content-area">
        <div id="content" class="site-content" role="main">
            <div id="front-page">
                <div id="owner-photo ">
                    <img src="http://petra.edkatzman.com/wp-content/uploads/2013/01/Ed-headshot-small.jpg" alt="Ed Katzman" >
                </div>
                <div id="owner-description ">

                        <h1><span class="drop-cap">Hi! </span>My name is Michael Jennings, 
                        the owner and master craftsman of Petra Stoneworks. I have over 25 
                        years experience working with a wide range of both valuable and everyday stone pieces.</h1>

                    <h3>We specialize in the expert repair of stone objects and the creation 
                    of original pieces. Have a look at the portfolio of our work and contact 
                    us with any questions or to start a discussion of how we might help you.</h3>
                </div>
            </div>
        </div><!-- #content .site-content -->
    </div><!-- #primary .content-area --> 
```

CSS：

```
#front-page {
    background-color:#ffffff;
    padding-left: 10px;
    padding-right: 10px;
    padding-bottom: 10px;
    padding-top:10px;
    overflow: hidden;

}

#owner-photo {
    width:246px;
    height:246px;
    float:left;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:12:56.610

感谢您包含 jsFiddle。这很有帮助。你的问题是一个简单的错字。

```
<div id="owner-photo "> 
```

id 属性中有一个空格。删除该空间，div 应该浮动。

我不确定您的页面前景如何，但您可能希望将所有者照片 ID 移动到图像本身并从代码中删除可能不必要的 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:14:42.553

区别在于：

首先，将 float:left 放入 id="owner-photo"

```
<div id="owner-photo " style="float: left;">
<img src="http://petra.edkatzman.com/wp-content/uploads/2013/01/Ed-headshot-small.jpg" alt="Ed Katzman">
</div> 
```

第二：

我不知道为什么，但是不要使用 <-h1>，使用 <-p>。

在[http://puckpros.edkatzman.com/的例子中](http://puckpros.edkatzman.com/)

首先是：

```
<img class="left_image" src="http://puckpros.edkatzman.com/wp-content/themes/PuckPros/images/services.png"> 
```

接着：

```
<p>something</p> 
```

这是结果：

![在此处输入图像描述](../Images/92468d86d4edd576e469eeeb1385f319.png)

希望能帮助到你 ：）

# sql - 在 AFTER INSERT 触发器 SQL 中检索初始表

> ID：14512395
> 
> 赞同：0
> 
> 时间：2013-01-24T22:56:31.677
> 
> 标签：sql, sql-server, triggers, insert

我使用此代码检查新条目的元素是否等于先前插入的数据的元素。

```
CREATE TRIGGER trig1 ON Table1

AFTER INSERT

AS

DECLARE trigcursor CURSOR FOR
SELECT Name FROM INSERTED

DECLARE @Name1 varchar(80)

OPEN trigcursor;

FETCH NEXT FROM trigcursor INTO @Name1

WHILE @@FETCH_STATUS = 0
BEGIN
IF EXISTS(SELECT * FROM Table1 WHERE Name= @Name1)
BEGIN 
    ...
    END
    FETCH NEXT FROM trigcursor INTO @Name1
END 
```

问题是由于某种原因，新条目也存在于表 Table1 中，而不仅仅是在 INSERTED 中。所以条件总是为真。你能帮我为什么会这样吗？有没有办法只检索没有新条目的初始表？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:58:40.003

你的触发器`AFTER INSERT`在桌子上`Table1`。`BEFORE INSERT`如果您不希望在表中找到记录，则应该是这样。

替代方案：使用 INSTEAD OF INSERT 触发器。

或者

添加另一个接受 null 的列。让它成为一个数字列，这样它会很快。不要在插入时在其中插入任何值。然后，在 AFTER INSERT TRIGGER 中，该列为空的行是新行。列中填满东西的是旧的。然后用值更新空列。

eg：添加列`mark` 插入后，查找名称：

```
SELECT * FROM Table1 WHERE Name= @Name1 and mark is not null 
```

一旦您发现它以前是否存在，请使用以下内容更新所有内容：

```
update table1 set mark = 1 where mark is null 
```

# eclipse - Ubuntu Linux 12.10 上的 App Engine 和 Eclipse

> ID：14512399
> 
> 赞同：2
> 
> 时间：2013-01-24T22:56:46.843
> 
> 标签：eclipse, google-app-engine, ubuntu

我将 Ubuntu 从 12.04 更新到 12.10。

它也将我的 Eclipse 从 3.7 升级到了 3.8。

事实证明，Google App Engine 没有 3.8 的插件。只有 3.7 和 4.2。

所以我将 Eclipse 升级到 4.2。

当我上传我的项目时，它说它不能因为 java-7 标志。我在这里找到了一个帖子，描述了我如何更改标志，但这没关系，因为我不是“受信任的测试人员”，所以他们无论如何都不会允许这样做。

我尝试更改项目的构建路径以包含 OpenJDK 6 和 1.6 的编译器级别

我收到此项目错误“Java 编译器级别与安装的 Java 项目方面的版本不匹配。”

我查了一下，在 StackOverflow 上找到了一条消息，但我不知道我正在使用哪些方面，或者该解决方案是否适用。

是否可以使用 Eclipse 4.2 和 App Engine 1.7.4 将项目上传到 App Engine？

如何让它使用 Java6？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:35:29.137

**是否可以使用 Eclipse 4.2 和 App Engine 1.7.4 将项目上传到 App Engine？**

是的，这就是我使用的。将jdk设置为6后，您是否尝试过创建新项目？起初我遇到了同样的问题，一旦我得到了正确的 jdk，就只需要创建一个新项目。

# javascript - 从 html 表中获取数据

> ID：14512400
> 
> 赞同：0
> 
> 时间：2013-01-24T22:57:07.330
> 
> 标签：javascript, python, sql, html-table

我需要从几个页面中获取数据。数据存储在 html 表中。我想生成 SQL 文件，将它们保存到我的数据库中。我的目标之一就是[这些结果](http://www.diamondleague-birmingham.com/Live-StartlistsResults/Overview/200m/)。

处理网站最简单的方法可能是 JavaScript，但如何在每个网站上运行脚本并将结果写入我的硬盘驱动器？

我还可以使用 wget 下载所有需要的站点并使用 Python 处理它们，如果它有必要的库来处理 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:05:51.470

如果我正确理解，您基本上必须从网络上抓取一些内容并将其存储在数据库中。

我可能会选择一个 Python 脚本，它通过使用`urllib2`库来抓取网页，然后根据所需的内容（正则表达式、BeautifulSoup 等）以某种方式对其进行解析。

看看这个问题：[Web scraping with Python](https://stackoverflow.com/questions/2081586/web-scraping-with-python)

# java - 如何从二维数组中获取第一列的内容

> ID：14512407
> 
> 赞同：2
> 
> 时间：2013-01-24T22:57:31.977
> 
> 标签：java, arrays, 2d

如何从二维数组中提取第一列？我正在用这样的方法初始化我的数组

```
//Initialise the array with the values from the file
public static float[][] data(float[][] data, Scanner scan){
    int count = 0; 

    for (int i=0;i<data.length;i++){
        for (int j=0;j<data[0].length;j++){
            count++;    
            if(count<data.length*data[0].length){
                for(int k=0;k<2; k++){

                    data[i][j] = (float)   IOUtil.skipToDouble(scan); 
                    System.out.print(data[i][j] + "  ");    
                }

            System.out.println();
            }   
        }

    }
    return data;    

} 
```

这是我的测试文件的内容。（请记住文件可以是任意长度）

```
13.97  2.2  
12.05  1.9  
9.99  1.5  
8.0  1.3  
6.0  0.9  
4.0  0.6  
2.0  0.3  
0.0  0.0  
-2.0  -0.3  
-4.0  -0.6  
-6.02  -0.9  
-8.0  -1.3  
-9.99  -1.6  
-12.03  -1.9  
-13.98  -2.2 
```

在终端上，但问题是当我尝试调用左列时，我得到的是右列。我不确定这是否是因为右侧的值是唯一被存储的值。

```
 //should print x but actually prints y 
   public static void printX(float[][] data){

        for (int i=0;i<data.length;i++){
            for (int j=0;j<data[0].length;j++){

                System.out.println(data[i][j]);
            }
        }
    } 
```

哪个输出

```
2.2
1.9
1.5
1.3
0.9
0.6
0.3
0.0
-0.3
-0.6
-0.9
-1.3
-1.6
-1.9
-2.2
0.0 
```

谁能澄清我如何才能最好地从二维数组中获取左侧列上的数据？或者如果有其他方法可以实现这种事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T23:04:59.610

您需要在 IDE 上使用调试器并单步执行代码以查看到底发生了什么。对我的简短回答看起来像你在 k=0 和 k=1 的情况下两次读取数据来破坏同一个字段。

**编辑**

同样在您的更新中，我认为您正在第二个打印循环中寻找这个（没关系，可能很容易成为 2，但这是更好的 IMO）：

```
for (int j=0;j<data[i].length;j++){ 
```

**编辑**这是我认为你想要明确的代码：

```
//Only print X
public static void printX(float[][] data){

    for (int i=0;i<data.length;i++){
       System.out.println(data[i][0]);
    }
}

//Only print Y
public static void printY(float[][] data){
    for (int i=0;i<data.length;i++){
       System.out.println(data[i][1]);
    }
}

//Print both
public static void printBoth(float[][] data){
    for (int i=0;i<data.length;i++){
       System.out.println(data[i][0] + ", " + data[i][1]);
    }
}

//Print any number in array:
public static void printAll(float[][] data){
    for (int i=0;i<data.length;i++){
        for (int j=0;j<data[i].length;j++){
            System.out.print(data[i][j];
            if (j+1 < data[i].length) {
                System.out.print(", ");
            } else {
                System.out.println();
            }
        }
    }
} 
```

最后，您的数组初始化不正确，这就是您遇到这么多麻烦的原因：您实际上是在将两个值都写入 X 组件，所以第一次在 k 中循环时，您将 X 值写入 i,j （例如`data[0][0]`）并打印出来。第二次循环 k 时，您将 Y 值再次写入相同的 i,j（例如`data[0][0]`）并打印出来。这看起来像您正在打印您想要的数组，但实际上您正在将两个值写入同一列。你真的想要没有 k 循环的东西：

```
//Initialise the array with the values from the file
public static float[][] data(float[][] data, Scanner scan){
    int count = 0; 

    for (int i=0;i<data.length;i++){
        for (int j=0;j<data[0].length;j++){
            count++;    
            if(count<data.length*data[0].length){
                data[i][j] = (float)   IOUtil.skipToDouble(scan); 
                System.out.print(data[i][j] + "  ");
            }    
        }
        System.out.println();
    }
    return data;    
} 
```

如果您想强制执行我认为 k 正在执行的 2 列，例如：

```
public static float[][] data(float[][] data, Scanner scan){
    for (int i=0;i<data.length;i++){
        for (int j=0;j<2;j++){
            data[i][j] = (float)   IOUtil.skipToDouble(scan); 
            System.out.print(data[i][j] + "  ");
        }
        System.out.println();
    }
    return data;    
} 
```

`count`也是不必要的，因为它只是控制它已经处理/限制的数组总大小的另一种方式，方法是通过`data.length`/`data[0].length`

编辑由 OP 添加：

为了向那些仍然不明白的人澄清一下，他们可能对我曾经遇到的同一件事感到困惑：我误解了值的存储位置，所以这就是为什么我把问题设置错了，而且所有简短的答案都没有任何意义。

假设 value[here][] 保存了第一列中的值，而 value[][here] 保存了第二列中的值，我对整个事情的理解有点过分了。

我不确定我为什么坚持这一点，但我认为这与我使用一维数组的方式有关（不需要告诉他们有一个列）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T23:04:40.893

不明白你的代码，但我希望这会有所帮助：

```
float[][] data = new float[10][2];
// ... fill the array with data
// print 'left' column:
for (int i = 0; i < data.length; i++) {
    System.out.println(data[i][0]);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T16:55:33.910

你想用你的这部分代码做什么？

```
for(int k=0;k<2; k++){
    data[i][j] = (float)   IOUtil.skipToDouble(scan); 
    System.out.print(data[i][j] + "  ");    
} 
```

您正在写入`data[i][j]`两次，因此覆盖了返回的第一个值

```
(float) IOUtil.skipToDouble(scan); 
```

如果没有看到您的输入文件，很难判断代码应该是什么，但我认为您正在寻找这样的东西：

```
public static float[][] data(float[][] data, Scanner scan){
    for (int i = 0; i < data.length; i++) {
        for (int j = 0; j < data[i].length; j++) {
            data[i][j] = (float) IOUtil.skipToDouble(scan); 
            System.out.print(data[i][j] + "  ");    
        }
        System.out.println();
    }
    return data;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T20:59:07.307

> 在将数据放入二维数组时，您将在 for 循环中两次覆盖数组的内容`for(int k=0;k<2; k++)`。例如：考虑 i = 0 的情况：
> 
> 1.  在 k = 0 时，数据[0][0] = 13.97
> 2.  在 k = 1 时，data[0][0] = 2.2（覆盖 13.97）而您想要的结果是 data[0][0] = 13.97 和 data[0][1]=2.2

您应该使用以下代码来填充二维数组：

```
public static float[][] data(float[][] data, Scanner scan){
    int count = 0; 

    for (int i=0;i<data.length;i++){
        for (int j=0;j<data[0].length;j++){
            count++;    
            if(count<data.length*data[0].length){
                for(int k=0;k<2; k++){

                    data[i][j] = (float)   IOUtil.skipToDouble(scan); 
                    System.out.print(data[i][j] + "  ");    
                    j = j+1;
                }

            System.out.println();
            }   
        }

    }
    return data;    

} 
```

并按照代码读取数据：

```
public static void printX(float[][] data)
{
    for (int i=0;i<data.length;i++)
    {
        System.out.println(data[i][0]);
    }
} 
```

> **此外**，如果条件对于 then`if(count<data.length*data[0].length)`的某个值失败，`i`那么在这种情况下，您将拥有 data[i][0] = 0 和 data[i][1] = 0 。您还应该考虑这个事实，并且应该期待 `0`printX 的一些输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-21T10:03:29.663

检查此解决方案

```
public static void main(String[] arg) {
    int a[][] = { { 1, 2, 3 }, { 4, 9, 6 }, { 5, 7, 9 } };// new int[3][3];

    for(Values val:getValues(a, 1)){
        fillRow(a, val.row);
        fillCol(a, val.col);
    }

   printAll(a);
}

private static List<Values> getValues(int a[][], int ele){
    List<Values> list = new ArrayList<Values>();
    for(int i=0;i<a.length;i++){
        for(int j=0;j<a[i].length;j++){
            if(a[i][j] == ele){
                list.add(new Values(i,j));
            }
        }
    }
    return list;
}

private static class Values{
    public Values(int i, int j) {
        row = i;
        col = j;
    }
    int row;
    int col;
}

private static void printAll(int a[][]){
    for(int i[]:a){
        for(int j:i){
            System.out.print(" "+j);
        }
        System.out.println("\n");
    }
}

private static void fillRow(int a[][], int row){
    for(int i=0;i<a.length;i++){
        a[i][row] = 0;
    }
}

private static void fillCol(int a[][], int col){
    for(int i=0;i<a.length;i++){
        a[col][i] = 0;
    }
} 
```

# c# - IL 到 c# 的转换

> ID：14512412
> 
> 赞同：1
> 
> 时间：2013-01-24T22:58:00.427
> 
> 标签：c#, reflection, delegates, il, mono.cecil

我正在开发一个项目，该项目的测试方式很少，并且最近更改了大量代码。特别是代码已从使用一个数据提供程序移植到另一个数据提供程序，并且 DataSet 已被 DTO 替换。

我现在想尽可能多地对此进行测试，但实际上无法为许多人在所需时间范围内所做的所有更改创建测试。

使用 Mono.cecil 我已经能够编写一个测试来查找所有数据库调用和相关的存储过程名称，并将 c# 中定义的参数与数据库中的参数进行比较。

我想更进一步并实际调用该方法，即使所有参数都是默认值。这样，虽然 DataReader 可能没有任何行，但我可以发现架构并尝试将其与静态映射器方法进行比较。

例如

```
var reader = cmd.ExecuteReader();
var Divisions = (from IDataRecord record in reader.GetRows() 
select RecordMapper.GetDivisionFromRecord(record)).ToList(); 
```

其中 GetRows() 是一个简单的扩展方法，而 GetDivisionFromRecord 是静态方法，看起来有点像这样

```
public static Division GetDivisionFromRecord(record)
{
  return new Division
  {
       Id = record.GetValueOrDefault<long?>("id"),
       Name = record.GetValueOrDefault<string>("name")
  };
} 
```

不幸的是，我不知道如何将 IL 引用转换为缓存的静态委托，并转换回映射器类中静态方法的名称。如果我能找到方法名称，那么我可以使用 Cecil 来获取方法并找到 GetValueOrDefault 的 callvirt 操作码，这样我就可以构建数据库别名和类型的集合。

IL 看起来像这样。

```
IL_0025: callvirt instance class [System.Data]System.Data.IDataReader IOracleHelper::ExecuteReader(class OracleCommandWrapper)
IL_002a: stloc.0
IL_002b: ldloc.0
IL_002c: call class [mscorlib]System.Collections.Generic.IEnumerable`1<class [System.Data]System.Data.IDataRecord> NullSafeExtensions::GetRows(class [System.Data]System.Data.IDataReader)
IL_0031: call class [mscorlib]System.Collections.Generic.IEnumerable`1<!!0> [System.Core]System.Linq.Enumerable::Cast<class [System.Data]System.Data.IDataRecord>(class [mscorlib]System.Collections.IEnumerable)
IL_0036: ldsfld class [System.Core]System.Func`2<class [System.Data]System.Data.IDataRecord, class [Services.Common]Division> DataDao::'CS$<>9__CachedAnonymousMethodDelegate17'
IL_003b: brtrue.s IL_0050
IL_003d: ldnull
IL_003e: ldftn class [Services.Common]Division DataDao::'<GetAlDivisions>b__16'(class [System.Data]System.Data.IDataRecord)
IL_0044: newobj instance void class [System.Core]System.Func`2<class [System.Data]System.Data.IDataRecord, class [Services.Common]Division>::.ctor(object, native int)
IL_0049: stsfld class [System.Core]System.Func`2<class [System.Data]System.Data.IDataRecord, class [Services.Common]Division> DataDao::'CS$<>9__CachedAnonymousMethodDelegate17'
IL_004e: br.s IL_0050
IL_0050: ldsfld class [System.Core]System.Func`2<class [System.Data]System.Data.IDataRecord, class [Services.Common]Division> DataDao::'CS$<>9__CachedAnonymousMethodDelegate17'
IL_0055: call class [mscorlib]System.Collections.Generic.IEnumerable`1<!!1> [System.Core]System.Linq.Enumerable::Select<class [System.Data]System.Data.IDataRecord, class [Services.Common]Division>(class [mscorlib]System.Collections.Generic.IEnumerable`1<!!0>, class [System.Core]System.Func`2<!!0, !!1>)
IL_005a: call class [mscorlib]System.Collections.Generic.List`1<!!0> [System.Core]System.Linq.Enumerable::ToList<class [Services.Common]Division>(class [mscorlib]System.Collections.Generic.IEnumerable`1<!!0>) 
```

我同时使用了 cecil 和反射，并且可以将 CachedAnonymousDelegates 视为私有静态字段。但我可以看到如何获得实际的方法调用。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:59:03.430

最后，我使用 ICSharpCode.Decompiler 和 ICSharpCode.NRefactory 中的 AstBuilder 将相关 IL 从 Mono.cecil 转换回 c#，这样我就可以使用正则表达式来发现映射器。

使用这种方法，我使用所有这些元数据来生成数百个测试，这些测试应该首先完成。

# asp.net-mvc - RedirectToAction html属性重载

> ID：14512413
> 
> 赞同：1
> 
> 时间：2013-01-24T22:58:02.440
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我想在新选项卡中打开 RedirectToAction。不幸的是，没有像 ActionLink 那样采用 htmlAttribute 的重载

```
@Html.ActionLink("Text", "Action", new { parameters }, new { target="_blank" }) 
```

是否可以为 RedirectToAction 编写重载以从 Action 执行此操作。如果是这样，请您发布超载的工作代码。

我想从操作中以编程方式打开新选项卡，而不是必须单击的链接。因此，请不要回答如何使用操作链接进行操作。我已经说过我知道该怎么做。

谢谢，

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:28:59.183

不幸的是，没有机制服务器端可以打开一个新的选项卡/窗口。这必须在客户端完成。服务器只是简单地向浏览器发送一个 http 响应，并且在 http 协议中没有特殊的消息来打开一个新的选项卡/窗口。有人为 ASP.NET 编写了一个解决方法，它基本上在重定向后执行客户端脚本，你可以看看[这里](http://weblogs.asp.net/infinitiesloop/archive/2007/09/25/response-redirect-into-a-new-window-with-extension-methods.aspx)

# c++ - 移动时 unique_ptr 的不同行为？

> ID：14512414
> 
> 赞同：2
> 
> 时间：2013-01-24T22:58:10.670
> 
> 标签：c++, move, unique-ptr

我有如下代码

```
std::vector<std::unique_ptr<int>> v;
std::unique_ptr<int> a(new int(0));
std::unique_ptr<int>& b = a;
v.insert(v.begin(), std::move(b)); //ok 
```

但是，如果我在第三条语句中添加 const

```
const std::unique_ptr<int>& b = a;
v.insert(v.begin(), std::move(b)); //Compiler error, cannot access ptr private member 
```

为什么编译器显示它不能访问唯一指针的私有成员，除了不能将 const 转换为非常量？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:15:40.727

您不能移动`const`对象。移动意味着**更改**您从中移动的对象的状态（无论该对象是什么类型），并将其声明为`const`保证您不会更改该状态。因此，移动一个`const`物体是一个矛盾的术语。

尽管能够移动`const`对象的期望可能确实有某种理由（例如，您可能希望对象`const` *只要您使用它就可以*，然后在完成时摆脱它并*转移*它的胆量而不是复制它 - 顺便说一句，a 是不可能的`unique_ptr`），实际上允许这样做会产生许多非常不切实际的语义后果（例如，它会允许*交换*两个`const`对象）。

因此，即使该语言在技术上确实允许从`const`对象移动（接受`const`RRef 的移动构造函数是*合法*的），但没有任何类型的标准库实际上为您提供这种可能性，包括`unique_ptr`，并且您不应该编写任何这样做的 UDT。

从概念上讲，将移动视为**更改状态的操作**非常重要，这与修饰符*不*兼容。`const`

# ruby-on-rails - Rails 2 + Delayed_job 2.0.7：自动化工人开始工作的最佳方式？

> ID：14512418
> 
> 赞同：0
> 
> 时间：2013-01-24T22:58:43.990
> 
> 标签：ruby-on-rails

我正在研究并发现很难找到一种主流方式来启动延迟工作宝石的工作人员。到目前为止，我有一个使用 Capistrano 的解决方案：

```
# add this to config/deploy.rb
namespace :delayed_job do
  desc "Start delayed_job process"
  task :start, :roles => :app do
    run "cd #{current_path}; script/delayed_job start #{rails_env}"
  end

  desc "Stop delayed_job process"
  task :stop, :roles => :app do
    run "cd #{current_path}; script/delayed_job stop #{rails_env}"
  end

  desc "Restart delayed_job process"
  task :restart, :roles => :app do
    run "cd #{current_path}; script/delayed_job restart #{rails_env}"
  end
end

after "deploy:start", "delayed_job:start"
after "deploy:stop", "delayed_job:stop"
after "deploy:restart", "delayed_job:restart" 
```

但显然在某些情况下，Apache 用户与 Rails 应用程序用户不同，这会导致问题吗？有没有更好的方法来自动化工作流程，这样我就不必坐在我的电脑前打字了

```
$ RAILS_ENV=production script/delayed_job start
$ RAILS_ENV=production script/delayed_job stop 
```

一整天都在控制台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-20T08:11:58.690

我创建了一个 rake 任务来每天运行一次“rake:jobs workoff”。您可以根据需要经常设置。我使用了heroku调度程序。

# android - LinearLayout layout_weight 和 weight_sum 用于调整大小？

> ID：14512420
> 
> 赞同：1
> 
> 时间：2013-01-24T22:59:05.497
> 
> 标签：android, android-layout, android-layout-weight

我有 5 个线性布局。为了便于书写和理解，我将它们称为视图 A - E。

视图 A 是视图 B、C、D 和 E 的父视图。

我已将视图 A 的 layout_weight 设置为 8.0f，将视图 B - E 的权重分别设置为 1.0f、3.0f、1.0f、3.0f。

我知道这是为了管理父视图中的空白空间，但我希望调整我的视图和子视图的大小以拥有屏幕的百分比，而不是仅仅争夺可用空间。

但是，这一切都是以编程方式完成的，所以我应该将 LinearLayouts 的高度设置为`getHeight()`其父级（视图 A）的方法/访问器的系数吗？如果是这样，那么如果尚未将视图添加到其父级，我如何获得父级的高度，这将使用 MATCH_PARENT 设置其高度？

由于该`getHeight()`方法将为 , 和 first 返回 0 `onCreate`，`onStart`因此`onResume`我不得不继续寻找答案。我找到了`ViewTreeObserver`and `OnGlobalLayoutListener`，它会让我知道什么时候`Layout`s 已经设置好了。但是，我真的很感激在任何绘图发生之前有高度。那不可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:48:30.867

如果您不需要以编程方式执行此操作，则可以在 xml 中执行此操作。为了让子 LinearLayouts 占据父 LinearLayout (LinearLayout A) 的百分比，那么您需要设置父级的 weightSum=(子 LinearLayouts 的总 layout_weight)，然后将子 LinearLayouts 的宽度/高度属性设置为“0dip”和将它们的 layout_weight 设置为所需的百分比。

垂直方向的示例代码为：

```
<LinearLayout
     android:id="@+id/A"
     android:layout_height="fill_parent"
     android:layout_width="fill_parent"
     android:weightSum="8.0"
     android:orientation="vertical">
     <LinearLayout
          android:id="@+id/B"
          android:layout_height="0dip"
          android:layout_width="fill_parent"
          android:layout_weight="1.0"/>
     <LinearLayout
          android:id="@+id/C"
          android:layout_height="0dip"
          android:layout_width="fill_parent"
          android:layout_weight="3.0"
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:40:45.687

不幸的是，在绘制视图之前不可能获得视图的大小（除非有我不知道的黑客攻击）。在准备好布局之前，视图不会保存有关其大小的任何信息。如果在未来的版本中，他们设计的系统在绘制视图之前保存视图尺寸，那就太好了。

您可以创建一个自定义类，扩展 View 类，然后覆盖系统调用的方法，并将尺寸返回到您的活动中的对象引用。但是，这可能更令人头疼，而不是帮助，并且不会真正给您带来任何真正的优势。

我建议使用 ViewTreeObserver 和 OnGlobalLayoutListener。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T01:30:14.107

如上所述，这是使用 Fragments 执行此操作的方法。

首先在 onAttach 方法中保存对上下文的引用（无论如何，您可能希望设置对活动的回调：

```
Context context;

@Override
public void onAttach(Activity activity){
    super.onAttach(activity);

    context = activity;

} 
```

然后在 onViewCreate 中进行测量并使用它们：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    Display display = ((WindowManager)
        context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    DisplayMetrics metrics = new DisplayMetrics();
    display.getMetrics(metrics);

    float pixHeight = metrics.heightPixels;
    float pixWidth = metrics.widthPixels;
    float density  = context.getResources().getDisplayMetrics().density;
    float dpHeight = pixHeight / density;
    float dpWidth  = pixWidth / density;

    // make various layouts using your measurements, send the
    // measure of each parent to each custom drawn child, or 
    // send the bounds of each child as determined by the size of each parent

    return someView;
} 
```

# php - 在不同机器上创建图片时生成不同的内容

> ID：14512427
> 
> 赞同：0
> 
> 时间：2013-01-24T22:59:39.473
> 
> 标签：php

我想从传递的二进制字符串创建图片：

```
$fileName = uniqid().".".$imgType;
$fileName = "../tmp/".$fileName;
$f = fopen($fileName,'wb');
$picture =  mb_convert_encoding($picture, "UUENCODE", "UTF-8");

fwrite($f, $picture);

fclose($f); 
```

这在一台装有 PHP 5.3.10-1ubuntu3.4 的机器上运行良好。图片已正确创建。如果在另一台使用 PHP 5.3.19 的机器上尝试，输出会很奇怪。例如，如果您使用`less`then 打开文件，您将找到`\0`而不是所需的`^@`字符。

**为什么会这样？**

二进制字符串是来自网站的发布请求的一部分，该网站使用在两种情况下都使用 UTF-8 编码的 HTML5 Formdata。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:39:44.737

```
$picture = convert_uudecode($picture); 
```

# c# - 如何将不连续的单元格传递给 Excel UDF

> ID：14512428
> 
> 赞同：1
> 
> 时间：2013-01-24T22:59:41.330
> 
> 标签：c#, excel, excel-udf

在 myUDF 中，我可以引用一系列单元格，如“A1：A12”，但如何引用非连续单元格，如“A1，B4，H3”等。
我使用 ExcelDNA，参数类型是对象，但它似乎会取字符串和一系列单元格，而不是不连续的单元格

```
[ExcelArgument(AllowReference = true, Name = "Relations", Description = "a set of relations")]object rels 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-24T18:53:31.147

听起来您正在从代码中将公式及其参数输入到工作表中，并且您希望用户随后能够在 Excel 的公式栏中正常编辑公式。那是对的吗？

如果是这样，***请将参数括在 parens 中***。例如，对于这样的 UDF...

```
Public Function MyUDF(my_param As Range)
    'concatenate all cell values in a non-contiguous range:
    Dim rgCell As Range, rgArea As Range
    For Each rgArea In my_param.Areas
        For Each rgCell In rgArea
            MyUDF = MyUDF & CStr(rgCell.Value)
        Next rgCell
    Next rgArea
End Function 
```

...在工作表单元格中输入它，如下所示：

```
=MyUDF((A1,A3,A7:A11,C8:E10)) 
```

请注意，与使用 SUM 等内置函数相比，额外的一组括号。

顺便说一句，您可能已经知道，在遍历非连续范围时，您必须遍历该范围的区域，然后遍历每个区域中的单元格；循环遍历范围内的单元格只会为您提供第一个区域中的单元格。

# python - 检测到未处理的 Python 异常

> ID：14512430
> 
> 赞同：1
> 
> 时间：2013-01-24T22:59:52.747
> 
> 标签：python, linux, web-services, nginx, webserver

```
abrt: detected unhandled Python exception in '/usr/local/cpanel/hooks/addondomain/addaddondomain' 
```

代码：

```
#!/usr/bin/env python
import subprocess
import sys
import os
import yaml
from xml.dom import minidom
sys.path.append('/scripts')
import createvhosts
doc = minidom.parse(sys.stdin)

resulttaglist = doc.getElementsByTagName('result')
resultlist =[]

if resulttaglist[1].childNodes[0].toxml() == 0:
        sys.exit
else:
        subdomaintaglist = doc.getElementsByTagName('subdomain')
        subdomain = subdomaintaglist[0].childNodes[0].toxml()
        maindomaintaglist = doc.getElementsByTagName('DOMAIN')
        maindomain = maindomaintaglist[0].childNodes[0].toxml()
        domain =  subdomain + '.' + maindomain
        usertaglist = doc.getElementsByTagName('USER')
        user = usertaglist[0].childNodes[0].toxml()
        docroot, yip, alias = createvhosts.getvars(domain)
        serverip = createvhosts.getmainip()
                if yip == serverip:
                        createvhosts.writeconfshared(user, domain, docroot, yip, alias)
                else:
                        createvhosts.writeconfded(user, domain, docroot, yip, alias)
        proc = subprocess.Popen("/etc/init.d/nginx restart > /dev/null 2>&1", shell=True) 
```

我只是想知道这可能是python版本问题吗？

```
ls /usr/bin | grep python*
abrt-action-analyze-python*
python*
python2@
python2.6*
python2.6-config*
python-config@ 
```

我假设我使用的是 python 2.6？

**编辑** 这也从未发生过。我注意到的另一件事是该过程不会消失，并且会在你这样做时保持可见`ps -ef`

# ipad - 将 iPad 上的相机共享到 Windows 应用程序 RemoteDesktop

> ID：14512431
> 
> 赞同：1
> 
> 时间：2013-01-24T22:59:55.323
> 
> 标签：ipad, camera, tablet

我在我的 iPad 上使用 RDP 应用程序来处理我的台式电脑。有没有办法为我在台式计算机上运行的应用程序共享 iPad 上的相机？

# javascript - 谷歌地图控件

> ID：14512449
> 
> 赞同：0
> 
> 时间：2013-01-24T23:01:14.400
> 
> 标签：javascript, html, google-maps-api-3

我发现了这样的问题[动态填充的谷歌地图侧边栏](https://stackoverflow.com/questions/3704292/dynamically-populated-google-maps-sidebar)

他们有一个侧边栏。但没有一个真正做我想要的。他们都引用了这样的东西： http: [//econym.org.uk/gmap/example_map2.htm](http://econym.org.uk/gmap/example_map2.htm)

但我需要的是另一边的侧边栏，即“google ui”，我可以将 html 添加到。

[就像https://maps.google.co.nz/](https://maps.google.co.nz/)上的侧边栏一样，您可以在其中单击箭头并将其隐藏。

有没有关于如何做到这一点的例子？整个侧边栏会是一个控件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:17:14.900

Google 实现此功能的方式是添加一个包含侧边栏 html 样式的`<div>`元素。`position: absolute;`它们包括一个用于切换的按钮，只需将面板移出屏幕即可。以下 jsFiddle 应该让您开始您想要做的事情：http: [//jsfiddle.net/x8rfd/4/](http://jsfiddle.net/x8rfd/4/)

我没有让它看起来漂亮；这只是展示使用 Google 地图显示/隐藏面板的一种方法。您可以根据自己的喜好定位和设置按钮样式，并在面板中放置您想要的任何内容。

Google Maps API CSS 成功的关键：记住您的地图画布需要一个高度和一个宽度：

```
#map-holder {
    position: absolute;
    height:300px;
    width:100%;
}
#map {
    width: 100%;
    height: 100%;
} 
```

回答：

这是一个可以在两个元素上运行并同时调整它们大小的函数

```
/*
* @param el1 the jQuery element to move (not null)
* @param el1 the jQuery element to resize (not null)
* @param pos the position to move it (not null)
* @param dur the duration to move it (not null)
* @param shw show or hide
* @param f1 function to call every x loops
* @param x see above
* @param f2 function to call once done
*/
Maps.ui.slide = function(el1, el2, pos, dur, shw, f1, x, f2){
    shw = (shw===null)?false:shw;
    x = (x===null)?1:x;
    f1 = (f1===null)?new function(){}:f1;
    f2 = (f2===null)?new function(){}:f2;
    dur = (dur===null)?1000:dur;
    dur = dur/pos;
    var p = pos/100;
    var t = 0;
    var r = x;
    var to = function(){
        if(!shw && t < 100){
            t += p;
            t = (t > 100)?100:t;
            el1.css("left", "-" + pos - (pos * t/100));
            el2.css("left", pos - (pos * t/100) );
            if(r == 0){f1();r=x;}else r-=1;
            setTimeout(to, dur);
        }else if(shw && t < 100){
            t += p;
            t = (t > 100)?100:t;
            el1.css("left",  pos - (pos * t/100));
            el2.css("left", (pos * t/100));
            if(r == 0){f1();r=x;}else r-=1;
            setTimeout(to, dur);
        }else if(t >= 100){f1();f2();}
    }
    setTimeout(to, dur);
}; 
```

# ruby-on-rails - ruby on rails if(@cgi.path_info == '/

> ID：14512450
> 
> 赞同：1
> 
> 时间：2013-01-24T23:01:16.067
> 
> 标签：ruby-on-rails, ruby

我像这样在我的网站上使用以下代码

```
<% if(@cgi.path_info == '/' || @cgi.path_info == '/index') %>
<!--
<% end %>

ANYTHING HERE WHICH SHOULDN'T BE ON THE MAIN PAGE BUT ON ALL OTHER PAGES

<% if(@cgi.path_info == '/' || @cgi.path_info == '/index') %>
-->
<% end %> 
```

这包含在我的网站标题中，它允许我在我的网站主页上隐藏某些代码，但在其余部分显示。

问题是自从将 Apache 升级到 2.4 版后，这不再有效。

任何人都可以建议一种替代方法或为我提供替代代码吗？最好的解决方案是使用 if 语句，但可以使用一些帮助/示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:35:53.363

如果问题出在注释掉的方法上，您可以选择渲染内容：

```
<% unless %w( / /index ).include?(@cgi.path_info) %>

  ANYTHING HERE WHICH SHOULDN'T BE ON THE MAIN PAGE BUT ON ALL OTHER PAGES

<% end %> 
```

如果问题出在@cgi 上，请查看以下问题： [如何在 Rails 中找出当前路线？](https://stackoverflow.com/questions/1203892/how-can-i-find-out-the-current-route-in-rails)

使用嵌套布局也可能更优雅，如本指南中所述：http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-nested-layouts](http://guides.rubyonrails.org/layouts_and_rendering.html#using-nested-layouts)

# php - 卡在php mysql中的搜索查询中

> ID：14512454
> 
> 赞同：-2
> 
> 时间：2013-01-24T23:01:56.487
> 
> 标签：php

我正在为购物车中的商品编写搜索查询。问题是我没有得到预期的结果。这是代码：

```
$here = explode(" ",$sarc);
$query = "SELECT * FROM 126link WHERE (";
foreach($here as $each){
    $i++;
    if($i==1)
        $query.="title LIKE '%$each%') AND loginid = '$myid' ";
    else
        $query.="OR title LIKE '%$each%') AND loginid = '$myid' ";
}
$ritw = mysql_query($query);
$sup = @mysql_num_rows($ritw);
$query.="ORDER BY idl LIMIT 40";
$query = mysql_query($query);
$numrows = @mysql_num_rows($query); 
```

我想在这个查询中添加一个 AND 条件，它将搜索 if `idcolumn(in table) = '$id'`，但我不知道把它放在哪里。

上面的代码显示了*所有*购物车的结果，我试图将其限制为一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:27:50.133

您需要更好地理解操作的顺序：

[http://dev.mysql.com/doc/refman/5.5/en/operator-precedence.html](http://dev.mysql.com/doc/refman/5.5/en/operator-precedence.html)

`AND`之前进行了评估，`OR`因此在不提供整个条件集的括号的`OR`情况下，您最终将只评估最后一个`LIKE`条件和 id 过滤器，然后让所有其他行满足您的 OR 条件。

即使不考虑运算符的优先级，最好将您的操作进行逻辑分组，使其对试图阅读代码的人（包括您自己）更有意义。

因此，您的 WHERE 条件应如下所示：

```
WHERE (title LIKE %value% OR title LIKE %other value% ...) AND loginid = ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:57:47.233

这段代码应该可以工作。

```
$here = explode(" ",$sarc);
$query = "SELECT * FROM 126link WHERE loginid = '$myid'  AND title '".implode('|',$here)."';" ;

$ritw = mysql_query($query);
$sup = @mysql_num_rows($ritw);
$query.="ORDER BY idl LIMIT 40";
$query = mysql_query($query);
$numrows = @mysql_num_rows($query); 
```

要学习 REGEXP，请访问[http://www.go4expert.com/forums/showthread.php?t=2337](http://www.go4expert.com/forums/showthread.php?t=2337)

要学习正则表达式，请访问[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T23:06:51.307

加在最后？

```
$id=$_SESSION['id'];
$query = "SELECT * FROM table WHERE ";
foreach($here as $each){
    $i++;
    if($i==1)
        $query.="title LIKE '%$each%' ";
    else
        $query.="OR title LIKE '%$each%' ;
}
$query .= " AND something IN ($id)"; 
```

如果您想要更好的答案，您需要提供包含示例数据和所需结果的表结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T23:23:19.220

更快的方法：

```
$here = explode(" ",$sarc);
$id=$_SESSION['id'];
$query  = "SELECT * FROM table WHERE title REGEXP '" . implode('|',$here) . "'";
$query .= " AND something IN ($id)"; 
```

对此有另一个问题

[Mysql 喜欢多个值](https://stackoverflow.com/questions/4172195/mysql-like-multiple-values)

# sql - 超灵活的Oracle存储过程/动态SQL？

> ID：14512458
> 
> 赞同：1
> 
> 时间：2013-01-24T23:02:17.020
> 
> 标签：sql, oracle, stored-procedures, dynamic-sql

我需要为知道自己在做什么的内部用户构建极其灵活的存储过程。这些人整天生活在 SQL*Plus 窗口中，突然被迫使用 Web 表单。

这些用户将获得一个通过检查过程元数据创建的表单，他们将能够在其中执行如下所示的存储过程：

```
create or replace 
PROCEDURE DEV_UPDATE_TABLE_FOO 
(
  SET_FIELD IN VARCHAR2  
, SET_VALUE IN VARCHAR2  
, WHERE_CLAUSE IN VARCHAR2   
) AS 
BEGIN
  UPDATE foo
  SET <SET_FIELD>=<SET_VALUE>
  where <WHERE_CLAUSE>;
END DEV_UPDATE_TABLE_FOO; 
```

通过一些快速搜索，我没有看到这可能不会导致问题的“提供的表单，通过检查过程元数据创建”部分出现问题。

基本上鼓励 SQL 注入。这意味着，我们希望这些人能够使用他们选择的值和他们创建的 set 子句来更新他们选择的单个字段。他们必须引用值为 VARCHAR2 等的字符串。

然而，所有可用于绘制表单的 UI 都是元数据。其他存储过程将更加静态和明智。这些很容易。

有任何想法吗？显而易见的答案是“让他们访问 sql*plus 或 sqldeveloper 等。不幸的是，这是不可能的。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:05:30.490

采用

```
EXECUTE IMMEDIATE dynamic_string 
```

文档在[这里](http://docs.oracle.com/cd/B10500_01/appdev.920/a96624/11_dynam.htm)

# mysql - 将 2 个 MySQL 选择合并到一个查询中

> ID：14512468
> 
> 赞同：-2
> 
> 时间：2013-01-24T23:02:53.217
> 
> 标签：mysql

我在获取满足我需求的正确查询时遇到了一些问题

```
SELECT tbl_participants.name, 
       tbl_transactions.consumer_rfid, 
       tbl_transactions.trans_price 
FROM   tbl_participants, 
       tbl_transactions 
WHERE  tbl_participants.id = tbl_transactions.trader_id 
```

我拥有的是 2 个简单的表：一个存储参与者（交易者/消费者），另一个存储交易（从交易者到消费者）。我试图带回以下信息：交易者姓名、消费者姓名和交易价格

tbl_participants 有 id（唯一），名称（参与者） tbl_transactions 有 trader_id（取自上表），消费者 rfid（取自上表）

我的查询应该返回交易者姓名（基于 id）、消费者姓名（基于 rfid）和交易价值

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:15:33.317

阅读评论只是一个半疯狂的猜测：

```
SELECT tbl_participants.name AS consumer,
       tbl_transactions.trans_price AS price
FROM   tbl_participants,
       tbl_transactions
WHERE  tbl_participants.id = tbl_transactions.trader_id; 
```

我无法弥补你的意思`name | consumer name | price`...

**编辑**：在获得更多信息后，这就是我想出的：

```
SELECT p1.name AS name,
       p2.name AS consumer_name,
       t.trans_price AS price
FROM   tbl_participants p1,
       tbl_participants p2,
       tbl_transactions t
WHERE  p1.id = t.trader_id
AND    p2.card_rfid = t.consumer_rfid; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T23:12:12.163

试试这个：

```
 SELECT tbl_participants.name AS consumer, 
           tbl_transactions.consumer_rfid, 
           tbl_transactions.trans_price 
    FROM   tbl_participants, 
           tbl_transactions 
    WHERE  tbl_participants.id = tbl_transactions.trader_id 
```

我不明白您使用相同的两个表的问题。所以可以毫无问题地进行选择。

**编辑**如果您不想要 consumer_rfid 只需将其删除。

```
 SELECT tbl_participants.name AS consumer,
    tbl_transactions.trans_price 
    FROM   tbl_participants,tbl_transactions
    WHERE  tbl_participants.id = tbl_transactions.trader_id 
```

# c++ - Netbeans 和存储库

> ID：14512470
> 
> 赞同：0
> 
> 时间：2013-01-24T23:03:01.197
> 
> 标签：c++, netbeans, netbeans-7

我正在 Netbeans 中开发一个 C++ 项目。我的项目现在存储在存储库中，但这些天我在不同的 PC 站工作。一个具有旧的 32 位架构，一个工作在 64 位。

站的makefile是不同的！如何实现独立于 PC 架构的 NetBeans 项目？如果我想在第三站使用我的项目，我不想担心计算机架构的问题。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:59:21.907

如果您使用 C/C++ 存储库，我的提示是：不要签入 makefile。它们取决于您的机器，它们是*自动*生成的！所以不需要他们。

通常，您可以从**`nbproject`**目录中排除以下部分：

*   完整目录 `private`
*   所有 makefiles / bashes（= 以`.bash`or结尾的所有内容`.mk`）

--> 只签入`configurations.xml`和`project.xml`从`nbproject`.

# php - 尝试使用 imagecreate 为图像添加边框

> ID：14512476
> 
> 赞同：0
> 
> 时间：2013-01-24T23:03:25.100
> 
> 标签：php, html, image

我是 imagecreate()、imagefilledrectangle 等的新手……试图创建一个带有边框的图像，但我似乎无法弄清楚我错过了什么。

这是我的代码：

```
$im =  imagecreate (200,150);

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
$blue = imagecolorallocate($im, 0, 105, 179);
$background = imagecolorallocate($im, 255, 255, 255);

imagefilledrectangle($im, 0, 0, 200, 150, $background); 
```

新的假设我想在它周围放置一个 1 px 的蓝色边框，由上面的 $blue 定义。

我需要在此处添加什么才能放置此边框？

一如既往地提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:06:11.687

```
imagerectangle($im, 0, 0, 199, 149, $blue); 
```

# c++ - 从 vector[] 得到的不可变项

> ID：14512478
> 
> 赞同：0
> 
> 时间：2013-01-24T23:03:48.223
> 
> 标签：c++, pointers, vector, reference, g++

我对 C++ 中的向量 [] 运算符有疑问。

```
vector<stack<T>> myStackVec;
ops...
...
... 
```

此代码不修改`myStackVec`：

```
stack<T> temp = myStackVec.at(stackPos);
cout << "removing " << temp.top() << endl; 
```

此代码确实通过修改`myStackVec`进行修改`temp`：

```
stack<T> *temp = &myStackVec[stackPos];
temp->push(item); 
```

[] 运算符返回一个引用，为什么代码片段 1 不起作用？`temp`代码1中有副本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:08:40.073

```
stack<T> temp = myStackVec.at(stackPos); 
```

将制作堆栈的副本，​​然后`temp.push_back`将对复制的堆栈进行操作，您需要参考：

```
stack<T> &temp = myStackVec.at(stackPos);
temp.push_back(item); 
```

或者简单地说：

```
myStackVec.at(stackPos).push_back(item); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:05:50.943

> `temp`代码1中有副本吗？

是的。

让它成为这个工作的参考。

```
stack<T> &temp = myStackVec.at(stackPos);
cout << "removing " << temp.top() << endl; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T23:06:02.390

想一想什么是类型`stack<T> temp`。提示：它*不是*参考。

# java - Java Android Eclipse R.id

> ID：14512483
> 
> 赞同：0
> 
> 时间：2013-01-24T23:04:10.810
> 
> 标签：java, android, eclipse, r.java-file

我想使用蓝牙为 Android 制作一个简单的应用程序。所以我在网上看了一些例子，我找到了一个。但是我的`MainActivity.java`. 只有一个错误，但在“控制台”中没有注意到；它只是用红色下划线。由于这个问题，我无法运行该项目。

这是我的主要内容：

```
package com.testbluetooth;

import android.os.Bundle;
import com.testbluetooth.R;
import android.app.Activity;
import android.view.Menu;
import java.util.Set;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.widget.TextView;

public class MainActivity extends Activity 
{
    TextView out;

    // Called when the activity is first created. 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

   @Override
public boolean onCreateOptionsMenu(Menu menu)
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;

    //------here the error underlined by Eclipse: -------
    out = (TextView) findViewById(R.id.out);

    // Getting the Bluetooth adapter
    BluetoothAdapter adapter = BluetoothAdapter.getDefaultAdapter();
    out.append("\nAdapter: " + adapter);

    // Check for Bluetooth support in the first place 
    // Emulator doesn't support Bluetooth and will return null
    if(adapter==null) 
    { 
        out.append("\nBluetooth NOT supported. Aborting.");
        //return;
    }

    // Starting the device discovery
    out.append("\nStarting discovery...");
    adapter.startDiscovery();
    out.append("\nDone with discovery...");

    // Listing paired devices
    out.append("\nDevices Pared:");
    Set<BluetoothDevice> devices = adapter.getBondedDevices();
    for (BluetoothDevice device : devices) 
    {
        out.append("\nFound device: " + device);
    }
}
} 
```

这是布局中的 *activity_main.xml* ：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/out"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/app_name" />

</RelativeLayout> 
```

*R.java*中的 id 类：

```
public static final class id {
    public static final int menu_settings=0x7f070001;
    public static final int out=0x7f070000;
 } 
```

所以这*`out = (TextView) findViewById(R.id.out);`*是我有问题的线路。我已经清理了项目，我尝试在布局中创建一个新的 xml 文件，更改了名称，但没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:10:40.003

移动`return true;`到`onCreateOptionsMenu()`方法的最后，使其位于右大括号*之前。*Eclipse 一定是在抱怨无法访问的代码。

我还建议**不要**在 中做任何其他事情`onCreateOptionsMenu()`，这应该仅用于制作选项菜单，而不是修改 Activity 布局的 UI 元素部分（在本例中为您的`out`TextView）。

# tsql - 无法解决等于操作中“SQL_Latin1_General_CP1_CI_AS”和“Latin1_General_CI_AS”之间的排序规则冲突

> ID：14512487
> 
> 赞同：1
> 
> 时间：2013-01-24T23:04:33.527
> 
> 标签：tsql, error-handling, inner-join, temp

我真的被难住了。当我运行以下查询的**--join--**部分时，我收到标题错误消息：

```
---Create temp table to hold data---
CREATE TABLE #Address(

[LINE1] nvarchar(256),
[CONTACTID] nvarchar(256),
[COMPANYNAME] nvarchar(256))

GO

INSERT INTO #Address
SELECT DISTINCT ([LINE1]), [CONTACTID], [COMPANYNAME] 

FROM [TBL_CONTACT]
WHERE [LINE1] IS NOT NULL

GO

ALTER TABLE #Address
ADD [AddressID] int identity(1000,1)

GO

--join--
UPDATE [TBL_CONTACT]
SET [TBL_CONTACT].[PrimaryID] = #ADDRESS.[AddressID]
FROM #ADDRESS 
INNER JOIN [TBL_CONTACT]
ON [TBL_CONTACT].[LINE1] = #ADDRESS.[LINE1] 
```

我过去做过类似的事情（主要是不同的列名和不同的表名），没有错误，所以我不确定问题出在哪里。值得注意的是，我正在使用与以前完全不同的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:16:57.380

在列的创建上设置排序规则

[创建表 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms174979%28v=SQL.110%29.aspx)

```
CREATE TABLE #Address(

[LINE1] nvarchar(256) COLLATE sameAsTBL_CONTACT,
[CONTACTID] nvarchar(256),
[COMPANYNAME] nvarchar(256))

GO 
```

# java - 带有反向引用的 Java replaceAll

> ID：14512488
> 
> 赞同：7
> 
> 时间：2013-01-24T23:04:33.853
> 
> 标签：java, regex, replaceall

> **可能重复：**
> [String.replaceAll() 异常与正则表达式中的贪婪量词](https://stackoverflow.com/questions/8604286/string-replaceall-anomaly-with-greedy-quantifiers-in-regex)

我正在编写使用`Matcher#replaceAll`并发现以下结果非常令人困惑的代码：

```
Pattern.compile("(.*)").matcher("sample").replaceAll("$1abc"); 
```

现在，我希望输出是`sampleabc`但是 Java 会向我抛出`sampleabcabc`。

有人知道为什么吗？

现在，当然，当我锚定模式 ( `^(.*)$`) 时，问题就消失了。我仍然不知道为什么地狱会`replaceAll`做这样的双重替换。

并且雪上加霜，下面的代码：

```
Pattern.compile("(.*)").matcher("sample").replaceFirst("$1abc") 
```

按预期工作，仅返回`sampleabc`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T23:09:42.030

出于某种原因，它看起来与输入末尾的空字符串匹配。（我知道它为什么会匹配；我很感兴趣它匹配*一次*且仅一次。）

如果换成`replaceAll("$1abc")`结果`replaceAll("'$1'abc")`是`'sample'abc''abc`。

请注意，如果您更改`(.*)`为`(.+)`then 它可以正常工作，因为它必须匹配至少一个字符。

此代码确认诊断：

```
Matcher matcher = Pattern.compile("(.*)").matcher("sample");

while (matcher.find()) {
    System.out.printf("%d to %d\r\n", 
                      matcher.start(), 
                      matcher.end());
} 
```

...输出：

```
0 to 6
6 to 6 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T23:10:23.193

这里有两件事可以解释为什么会发生这种情况：

*   `(.*)`将成功匹配空字符串。
*   一场比赛成功后，将在上一场比赛结束后的一个位置尝试另一场比赛。

因此，在匹配整个字符串`"sample"`之后，会在 . 之后尝试另一个匹配`e`。即使没有剩余字符，匹配也会成功并发生第二次替换。

不会发生其他替换，因为正则表达式引擎将始终向前移动。就在最后一个字符是有效的起始索引之后，因此空字符串将匹配一次，但在匹配空字符串之后，正则表达式引擎不再有有效的起始位置来尝试匹配。

作为向正则表达式添加字符串锚点开头的替代方法，您可以修改正则表达式，使其匹配一个或多个字符，方法是更改`(.*)`​​为`(.+)`.

# java - Thrift TSimpleServer 在多次成功请求后变得无响应

> ID：14512489
> 
> 赞同：7
> 
> 时间：2013-01-24T23:04:36.607
> 
> 标签：java, .net, tcp, thrift

我有一个从 Linux 上运行的 Java 应用程序提供的 Thrift API。我正在使用 .NET 客户端连接到 API 并执行操作。

对服务的前几次调用工作正常，没有错误，但随后（似乎是随机的）调用将“挂起”。如果我强制退出客户端并尝试重新连接，则服务会再次挂起，或者我的客户端出现以下错误：

```
Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at Thrift.Transport.TStreamTransport.Read(Byte[] buf, Int32 off, Int32 len) 
   (etc.) 
```

当我使用 JConsole 获取线程转储时，服务器已开启`accept()`

```
"Thread-1" prio=10 tid=0x00002aaad457a800 nid=0x79c7 runnable [0x00000000434af000]
   java.lang.Thread.State: RUNNABLE
    at java.net.PlainSocketImpl.socketAccept(Native Method)
        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
    - locked <0x00000005c0fef470> (a java.net.SocksSocketImpl)
    at java.net.ServerSocket.implAccept(ServerSocket.java:462)
    at java.net.ServerSocket.accept(ServerSocket.java:430)
    at org.apache.thrift.transport.TServerSocket.acceptImpl(TServerSocket.java:113)
    at org.apache.thrift.transport.TServerSocket.acceptImpl(TServerSocket.java:35)
    at org.apache.thrift.transport.TServerTransport.accept(TServerTransport.java:31)
    at org.apache.thrift.server.TSimpleServer.serve(TSimpleServer.java:63) 
```

`netstat`在服务器上显示与服务端口的连接，这些连接`TIME_WAIT`在我强制退出客户端几分钟后最终消失（正如预期的那样）。

设置 Thrift 服务的代码如下：

```
 int port = thriftServicePort;
        String host = thriftServiceHost;
        InetAddress adr = InetAddress.getByName(host);
        InetSocketAddress address = new InetSocketAddress(adr, port);
        TServerTransport serverTransport = new TServerSocket(address);
        TServer server = new TSimpleServer(new TServer.Args(serverTransport).processor((org.apache.thrift.TProcessor)processor));

        server.serve(); 
```

请注意，我们正在使用`TServerTransport`带有显式主机名或 IP 地址的构造函数。我怀疑我应该将其更改为采用仅指定端口（最终绑定到`InetAddress.anyLocalAddress()`）的构造函数。或者，我想我可以将服务配置为绑定到“通配符”地址（“0.0.0.0”）。

我应该提一下，该服务不是托管在开放的 Internet 上的。它托管在专用网络中，我正在使用 SSH 隧道来访问它。因此，服务绑定的主机名无法在我的本地网络中解析（尽管我可以通过隧道建立初始连接）。我想知道这是否类似于[RMI TCP 回调问题](https://forums.oracle.com/forums/thread.jspa?threadID=1179067&tstart=24600 "RMI TCP回调问题")？

是否有关于正在发生的事情的技术解释（如果这是一个常见问题），或者我可以采取的其他故障排除步骤？

**更新**

今天遇到了同样的问题，但这一次`jstack`表明 Thrift 服务器永远阻塞了从输入流中读取：

```
"Thread-1" prio=10 tid=0x00002aaad43fc000 nid=0x60b3 runnable [0x0000000041741000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
            at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:127)
        at org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)
        at org.apache.thrift.protocol.TBinaryProtocol.readAll(TBinaryProtocol.java:378)
        at org.apache.thrift.protocol.TBinaryProtocol.readI32(TBinaryProtocol.java:297)
        at org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:204)
        at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:22)
        at org.apache.thrift.server.TSimpleServer.serve(TSimpleServer.java:70) 
```

所以我们需要在`TServerSocket`构造函数中设置一个“客户端超时”。但是为什么这会导致应用程序在阻塞时也拒绝连接`accept()`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T21:44:44.867

从您的堆栈跟踪来看，您似乎正在使用 TSimpleServer，其[javadocs 说](http://people.apache.org/~thejas/thrift-0.9/javadoc/org/apache/thrift/server/TSimpleServer.html)，

> 用于测试的简单单线程服务器。

您可能想要使用的是[TThreadPoolServer](http://people.apache.org/~thejas/thrift-0.9/javadoc/org/apache/thrift/server/TThreadPoolServer.html)。

最有可能发生的事情是 TSimpleServer 的单线程被阻塞，等待死客户端响应或超时。而且因为 TSimpleServer 是单线程的，所以没有线程可用于处理其他请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T07:51:34.503

我有一些建议。您提到对服务器的前几次调用有效，然后出现挂起。这是一个线索。发生这种情况的一种情况是**客户端没有将字节完全发送到服务器**。我不熟悉 TSimpleServer，但我假设它侦听端口并具有一些二进制协议，并希望任何客户端都能在该协议中与之交谈。您的 .net 客户端通过发送字节与该服务器通信。如果它没有正确刷新其输出缓冲区，那么它可能不会将所有字节发送到服务器，从而挂起服务器。

在 Java 中，这可能发生在客户端，如下所示：

```
BufferedOutputStream stream = new BufferedOutputStream(socket.getOutputstream()) //get the socket stream to write 
stream.write(content);//write everything that needs to be written 
stream.flush();//if flush() is not called, could result in server getting incomplete packets resulting in hangs!!! 
```

建议：

a) 浏览您的 .net 客户端代码。查看实际与服务器通信的代码的任何部分是否正确调用了等效的 flush() 或 cleanup 方法。注意：我从他们的文档中看到他们的传输层定义了一个 flush()。您应该扫描您的 .net 代码，看看它是否使用传输方法。[http://thrift.apache.org/docs/concepts/](http://thrift.apache.org/docs/concepts/)

b) 为了进一步调试，您可以尝试编写一个模拟您的 .net 客户端的小型 Java 客户端。在您的 linux 机器（运行 TSimpleServer 的同一台机器）上运行 java 客户端。看看它是否会导致同样的问题。如果是这样，您可以调试您的 java 客户端并找到根本原因。如果没有，您可以在 .net 客户端运行的地方运行它，看看是否有任何问题并从那里获取。

编辑 :c) 我可以在这里看到**Java中的示例节俭****客户端**代码：[https](https://chamibuddhika.wordpress.com/2011/10/02/apache-thrift-quickstart-tutorial/) ://chamibuddhika.wordpress.com/2011/10/02/apache-thrift-quickstart-tutorial/ 我注意到 transport.open(); //做一些代码 transport.close(); 正如 a) 中所建议的，您可以查看您的 .net 客户端代码，看看您是否在完成时调用了传输方法 flush() 和 close()

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T20:36:12.273

将 Thrift 服务投标到通配符地址（“0.0.0.0”）解决了问题，不再挂起。

使用多线程服务器将使应用程序更具响应性，但仍会导致请求挂起/不完整。

如果有人偶然发现这个问题并且可以提供更完整的解释以及它与 Java RMI TCP 回调问题（我在我的问题中链接到）的关系，请为你投票。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-16T07:00:20.143

我有一个类似的 c++ 服务器/客户端环境。

c++ 客户端调用一个方法（attributeDefinitionsAliases）并等待响应。

c++ 服务器开始写入套接字但锁定。Wireshark 捕获：

[![在此处输入图像描述](../Images/4f67c021a6726fd2e286a00e1aa331d7.png)](https://i.stack.imgur.com/1mtLo.png) 在c++服务器上关闭c++客户端后，出现异常：

> Thrift 内部消息：TSocket::write_partial() send() : errno = 10054
> 
> Thrift 内部消息：TConnectedClient 死了：write() send(): errno = 10054

**编辑1：** 这不是一个节俭的问题。服务器启动/启动的方式似乎有问题。[我有一个应用程序（启动器应用程序），它使用 QProcess （ https://doc.qt.io/archives/qt-4.8/qprocess.html](https://doc.qt.io/archives/qt-4.8/qprocess.html) ）启动/启动服务器，使用 popen**工作正常**。**

# php - PayPal API：购物车项目总金额与订单金额不匹配

> ID：14512491
> 
> 赞同：5
> 
> 时间：2013-01-24T23:04:40.870
> 
> 标签：php, api, paypal

有很多关于这个错误的帖子，但它们都不适用于我。我真的不明白为什么金额不匹配。我有与 AMT0 * QTY0 匹配的 ITEMAMT。AMT 匹配 ITEMAMT + SHIPPINGAMT。我一遍又一遍地检查文档，它确实应该以这种方式工作。当我完全删除它的运输时，它就起作用了......

结帐网址中的 AMT 也是 73.9。

我真的希望有人熟悉这个非常令人困惑的错误，并且知道我做错了什么......

提前致谢

```
Array
(
    [TIMESTAMP] => 2013-01-24T22:56:09Z
    [CORRELATIONID] =>
    [ACK] => Failure
    [VERSION] => 62.0
    [BUILD] => 4181146
    [L_ERRORCODE0] => 10413
    [L_SHORTMESSAGE0] => Transaction refused because of an invalid argument. See additional error messages for details.
    [L_LONGMESSAGE0] => The totals of the cart item amounts do not match order amounts.
    [L_SEVERITYCODE0] => Error
)
Array
(
    [PAYMENTREQUEST_0_PAYMENTACTION] => Sale
    [L_PAYMENTREQUEST_0_NAME0] => XXXX
    [L_PAYMENTREQUEST_0_NUMBER0] => 30533
    [L_PAYMENTREQUEST_0_DESC0] => XXXX
    [L_PAYMENTREQUEST_0_AMT0] => 30.95
    [L_PAYMENTREQUEST_0_QTY0] => 2
    [PAYMENTREQUEST_0_ITEMAMT] => 61.9
    [PAYMENTREQUEST_0_TAXAMT] => 0
    [PAYMENTREQUEST_0_SHIPPINGAMT] => 12
    [PAYMENTREQUEST_0_INSURANCEAMT] => 0
    [PAYMENTREQUEST_0_AMT] => 73.9
    [PAYMENTREQUEST_0_CURRENCYCODE] => USD
    [REQCONFIRMSHIPPING] => 1
    [PAYMENTREQUEST_0_SHIPTOSTREET] => XXXX
    [PAYMENTREQUEST_0_SHIPTOCITY] => XXXX
    [PAYMENTREQUEST_0_SHIPTOSTATE] => XX
    [PAYMENTREQUEST_0_SHIPTOCOUNTRYCODE] => XX
    [PAYMENTREQUEST_0_SHIPTOZIP] => XXXXXX
    [PAYMENTREQUEST_0_SHIPTOPHONENUM] => XXXXXXXX
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:23:01.347

您发送的货币必须保留 2 个小数位。看来您只提供 1 个。

```
$amt = 61.9;
$amt = sprintf("%.2f",$amt); // 61.90 
```

Paypal 将返回此错误，因为金额格式不正确：

看看行`Table A.2`下`AMT`：

> [http://www.paypalobjects.com/en_US/ebook/PP_NVPAPI_DeveloperGuide/Appx_fieldreference.html](http://www.paypalobjects.com/en_US/ebook/PP_NVPAPI_DeveloperGuide/Appx_fieldreference.html)

每次设置“金钱”参数时都应应用此规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:51:21.263

我的问题的答案可能对大多数路过的人没有帮助。但我的一件物品在描述中包含一个 & (L_PAYMENTREQUEST_0_DESC0)。'&' 转义了通过 CURL 传递的数据。这造成了错误（完全关闭）。请记住，当您在 URL 被编码时输入任何包含 & 的字符时也会发生这种情况，例如 é 将变为`&eacute;`

我很抱歉从我的第一篇文章中删除了项目描述，但由于有关金额的错误消息，我不知道这与它有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:35:17.773

几天前我在尝试交流时也遇到了同样的问题，然后我才意识到这些订单总数并不真正匹配，有一些小数位。如果您尝试使用一些整数（如 50）进行通信，如 item amt 和 total（没有任何进动），那么它不会给出任何错误。我也打破了我的头，虽然贝宝有一些问题。（但我真的是）所以你最好检查计算并注意贝宝将接受最多只有 2 位进动或小数位的金额。我同意塞缪尔所说的话。

即使是运费，您最好将它们发送为 12.00 而不是 12 和其他数字，如 61.90、73.90 ...

# matlab - 在 MATLAB 中创建一条从三个输入点通过 3D 空间的半椭圆路径，然后输入 Visual Studio 并最终输入机械臂

> ID：14512520
> 
> 赞同：4
> 
> 时间：2013-01-24T23:07:01.127
> 
> 标签：matlab, math, geometry, robotics, coordinate-systems

首先，关于我的设置：我有一个机械臂，可以将点和运动模式编程到其中。目标是让它根据我们投入的输入以某种方式移动。

与机械臂同在一张桌子上的是另一只手臂，它在人力的作用下移动，可以感知它在太空中的位置。这两个手臂已经共享一个坐标系，但是我在进行特定计算时遇到了麻烦，这让我很头疼。

当前的目标是专门用传感臂取三个点，然后将其转换为穿过这三个点的半椭圆弧。这条弧线应该从第一个点开始，在第二个点达到顶点，在第三个点结束，必要时穿过所有三个维度。这三个点通过 Visual Studio 输入，然后被放入 MATLAB 并变成一个 99 xyz 坐标的数组。

除了 MATLAB 函数之外，我们每个步骤都在工作。这些点与实际坐标相去甚远，尽管它们之间的关系似乎还不错。谁能告诉我代码有什么问题？

以下是我们目前所拥有的：

```
function P = getEllipticalPath(h0,hl,hr)
%define center of ellipse
center = (hl+hr)/2;

%want everything centered at (0,0,0)
h0 = h0 - center;
hl = hl - center;
hr = hr - center;

%xz plane direction between h0 and center
d = [h0(1),0,0]/49;

%now get the major/minor axis of the ellipse
%minor axis(along z axis)
a = h0(3);
b = hr(2);%arbitrary with hr

%set increment of orbit
incr = (pi)/99;

%by symmetry, only need to compute first half of orbit
%allocation
Pf = zeros(99,3);
for i=1:99
    if(i < 50)
       newpt = [0, b*cos(i*incr), a*sin(i*incr)] + (i*d);
    else 
        newpt = [0, b*cos(i*incr), a*sin(i*incr)] + (99 - i)*d;
    end 

    Pf(i,:) = [newpt(1), newpt(2), newpt(3)];
end
P = addOffset(Pf,-h0);

end

%simply adds a fixed translational offset to the given list of vectors
%(n*3 matrix). Assumes a matrix that is longer than 3.

function P = addOffset(points,offset)
newpoints = zeros(length(points),3);
for i=1:length(points);

    newpoints(i,:) = points(i,:) + offset;
end
P = newpoints;
end 
```

编辑：忘记输入输出信息；这是一个例子：

输入：

```
>> h0 = [-10.06   14.17   0.53 ]

h0 =

  -10.0600   14.1700    0.5300

>> hl = [-45.49   7.87   1.07 ]

hl =

  -45.4900    7.8700    1.0700

>> hr = [-4.52   -20.73   1.02 ]

hr =

   -4.5200  -20.7300    1.0200

>> P = getEllipticalPath(h0,hl,hr) 
```

输出：

![这与期望非常不同。 我们希望它从 hl 开始，以增量移动到 h0 并在 hr 结束，但我们得到了这个。](../Images/0562085c5205e4ac83ccde254733bcf6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:36:51.243

我认为你用所有的抵消和东西把事情复杂化了。我想你想要做的是：

*   得到椭圆的中心顶点 C 为 (hl+hr)/2

*   获取长轴向量 B 为 (center-hl)

*   将短轴向量 A 设为 (h0-center)

*   获取角度增量浮点 INCR 为 (pi)/99

*   现在您可以计算 PF 中从 i = 1 到 99 的每个顶点为`center *(vertex)* + B*cos(i*incr) *(vector)* + A*sin(i*incr) *(vector)*`

基本上你从中心开始，根据角度的 cos 向 hr 或 hl 移动，并作为角度的 sin 向 h0 移动，使用这些向量来控制你移动的距离和方向。

# hive - Hive 中的嵌套选择

> ID：14512521
> 
> 赞同：2
> 
> 时间：2013-01-24T23:07:17.553
> 
> 标签：hive

我可以`select`在 Hive 中嵌套不同的条件吗？例如

如果我有以下两个 Hive 查询：

```
select percentile(x, 0.95)
from t1
where y = 1;

select percentile(x, 0.95)
from t1
where y = 2; 
```

我可以在一个查询中选择上面的两个百分位数吗——比如（它不起作用）：

```
select
  (select percentile(x, 0.95)
    from t1
    where y = 1),
  (select percentile(x, 0.95)
    from t1
    where y = 2)
from t1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:35:08.027

您可以使用 来执行此操作`UNION ALL`，例如：

```
select * from
  (select percentile(x, 0.95)
    from t1
    where y = 1
   union all
   select percentile(x, 0.95)
    from t1
    where y = 2) x; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T17:54:21.600

我认为您希望避免对表进行多次扫描，如果它非常大的话。

```
select percentile( if( y = 1 , x, 0 ), 0.95 ) as percentile_1
       percentile( if( y = 2 , x, 0 ), 0.95 ) as percentile_2
from t1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T20:24:49.200

也可以试试：

```
select percentile( case when y=1 then x else null end, 0.95) as p95_1
     , percentile( case when y=2 then x else null end, 0.95) as p95_2
from table; 
```

percentile() 将忽略空值。

# ckeditor - ckeditor 无法使用自定义配置文件

> ID：14512522
> 
> 赞同：0
> 
> 时间：2013-01-24T23:07:35.917
> 
> 标签：ckeditor

我已经下载了最新的 ckeditor 版本 4.0.1。我正在使用以下代码来设置我的自定义配置文件。

```
 CKEDITOR.replace( textAreaId,
        {
            customConfig : 'suConfig.js',
            width : width,
            height : height,
        } 
```

它没有考虑配置文件，并且在没有编辑器的情况下渲染我的文本框是空的。但是，如果我使用默认配置文件，它可以工作

# javascript - 来自 JSON 的 D3 节点和链接以及嵌套的子数组

> ID：14512523
> 
> 赞同：2
> 
> 时间：2013-01-24T23:07:38.457
> 
> 标签：javascript, d3.js, visualization, data-visualization

我有一个如下所示的 JSON 文件：

```
{
    Object: {
        children: Array[4]
        ...
    Object: {
        children: Array[1]
            Object: {
                 children: Array[3]
                 ...
            },
            Object: {
                 children: Array[1]
                 ...
            },
        ...
    }
    ...
} 
```

该数组是一组具有子数组的对象，这些子数组包含深入几级的子数组。

我的问题是，当我尝试将其转换为一组用于 d3 强制布局的节点和链接时，我无法正确显示它。我尝试使用 array.map 或 forEach 递归地遍历所有对象并自己创建链接，但这似乎过于乏味。

有没有更简单的方法可以让这些数据准备好以强制布局显示？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:09:17.140

您可能希望[在 D3.js 中使用 Reingold-Tilford 树，](http://bl.ocks.org/4063550)而不是强制导向布局。这样你的数据已经是正确的格式，布局也可能会更好。

如果您确实想使用真正的力导向布局，那么您将不得不将数据重写为D3 期望的格式`nodes`。`links`无论如何，这是网络图的标准逻辑结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:55:26.090

我找到了一个包含我需要的代码的示例。此函数将数据展平。它在 Coffeescript 中，因为这就是我使用的。

```
flatten: (root) =>
    nodes = []
    i = 0
    recurse = (node) =>
        if node.children
            node.size = node.children.reduce(
                (p, v) -> p + recurse(v)
            , 0)
        if !node.id
            node.id = ++i
        nodes.push(node)
        node.size
    root.size = recurse(root)
    nodes 
```

在我这样做之后，我可以运行 tree.layout().links() 来生成链接，而无需手动执行。

```
@nodes = @flatten(@root)
@links = d3.layout.tree().links(@nodes) 
```

希望对某人有所帮助，因为文档或维基中没有记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T05:13:39.297

javascript函数将是：

```
function flatten(root) {    
var nodes = [], i = 0;

function recurse(node) {
    if (node.children) 
        node.size = node.children.reduce(function(p, v) { return p + recurse(v); }, 0);
    if (!node.id) 
        node.id = ++i;
    nodes.push(node);
    return node.size;
}

root.size = recurse(root);
return nodes;
} 
```

# dns - 将子域转发到我自己的名称服务器 Names.co.uk

> ID：14512525
> 
> 赞同：0
> 
> 时间：2013-01-24T23:07:55.153
> 
> 标签：dns, active-directory, subdomain

我有一个域（例如 test.example.com），我希望将其转发到我自己的网络以用于 Active Directory。网络已经有一个静态 IP 地址和一个 DNS 服务器设置，它在内部成功地处理域控制器的请求。我不知道如何设置它，以便我可以从本地网络外部连接到域控制器。我们使用 Names.co.uk 进行托管，我已经搞砸了大约一周的 DNS 设置，但名称无法解析。谁能解释我需要做什么？

仅供参考，我已尝试将 SRV 记录添加到 names.co.uk DNS 服务器，但它们无法解析回 DC，我还尝试为 names.co.uk DNS 服务器添加 NS 记录以获取我的DNS 来解决它，但这似乎也不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T23:05:52.270

DNS 使用层次结构解析名称，每个级别都需要列出低级别的 NS 记录。例如 test.example.com：“com”区域有“example.com”域名服务器的 NS 记录，“example.com”区域有“test.example.com”域名服务器的 NS 记录。

所以，不知道你的域名，我无法检查它是如何解析的。但我可以说，为了让它对世界其他地方可见，你需要在父域中创建指向你自己的名称服务器的 NS 记录（它还应该包含你的域的 NS 记录以指向它们自己）。

# android - Android 布局图标、文本和潜台词

> ID：14512527
> 
> 赞同：0
> 
> 时间：2013-01-24T23:08:08.597
> 
> 标签：android, android-layout, android-xml

我正在尝试创建一个列表视图，该列表视图将在一行中有一个图标和一个文本，而在另一行中有一个子文本。![例如](../Images/2871a495fc193e2b2669cf1af853b7d0.png)

我创建了一个自定义适配器来支持这一点，我确实得到了一个图像、一个文本和一个潜文本，但是每个都在前一个之下。例如图像 IMDB 帐户

我的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp">

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imgIcon"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_marginBottom="5dp"
            android:layout_marginRight="15dp"
            android:layout_marginTop="5dp"
            android:gravity="center_vertical" />

         <TextView
            android:id="@+id/txtTitle"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginBottom="5dp"
            android:layout_marginTop="5dp"
            android:gravity="center_vertical"
            android:textColor="#000000"
            android:textSize="20sp"
             />

        <TextView
            android:id="@+id/subString"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
             />
    </LinearLayout>

</LinearLayout> 
```

我试图将图像和文本移动到第一个线性布局下，但随后一切都变得疯狂，我再也看不到文本或潜台词任何想法？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:11:07.717

使用一个 RelativeLayout 可能更容易，但这应该会为您提供图像中的布局：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp">

    <ImageView
        android:id="@+id/imgIcon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginBottom="5dp"
        android:layout_marginRight="15dp"
        android:layout_marginTop="5dp"
        android:gravity="center_vertical" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/txtTitle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="5dp"
            android:layout_marginTop="5dp"
            android:gravity="center_vertical"
            android:textColor="#000000"
            android:textSize="20sp" />

        <TextView
            android:id="@+id/subString"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

    </LinearLayout>

</LinearLayout> 
```

或者你想要你描述的布局，而不是显示？无论如何，对于您发布的布局，您只能看到 ImageView，因为嵌套的 LinearLayout 具有垂直方向，并且 ImageView 的高度设置为`fill_parent`......所以 TextViews 被推离布局的底部。

# javascript - 使用javascript从html5中的下拉列表中选择一个值

> ID：14512529
> 
> 赞同：0
> 
> 时间：2013-01-24T23:08:26.063
> 
> 标签：javascript, html

我是新来的 HTML。我必须从不同的区域（例如下拉列表、日期输入类型、时间输入类型等）选择许多值并将它们与表格进行比较。它选择了正确的值，但它只在屏幕上出现一秒钟然后消失！看来我的 Chrome 刷新了！这就是我到目前为止所做的......

//在javascript里面

```
function Searching()
    {
        var a=document.getElementById('movies');
        var selMov=a.options[a.selectedIndex].value;
        var b=document.getElementById('areas');
        var selAr=b.options[b.selectedIndex].value;
        var c=document.getElementById('dat').type='date';
        var d=document.getElementById("tim").type='time';
        var rows=document.getElementById('dataProgram').getElementsByTagName('tr');
        document.getElementById("demo").innerHTML=selMov;

    } 
```

我有这个`<p id="demo"></p>`出现的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:11:31.617

您不会取消触发该功能的事件。所以页面正在重新加载。

您需要`return false`或致电[`event.preventDefault()`](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)

编辑：

根据评论

```
<button type="submit" id="but" onclick="Searching(); return false;">Search</button> 
```

# android - 在片段中单击按钮后填充 ListView

> ID：14512544
> 
> 赞同：1
> 
> 时间：2013-01-24T23:09:23.880
> 
> 标签：android, android-listview, android-fragments, android-button, android-listfragment

因此，在单击另一个片段中的按钮后，在 EditText 字段中添加文本后，我尝试在一个片段中填充 ListView。

我的 Java 编码技能很差，所以任何代码建议都会对我有很大帮助。

我希望这是有道理的。

这是我的代码。

```
public class FieldsActivity extends FragmentActivity {
private static final int NUMBER_OF_PAGES = 3;
ViewPager mPager;
MyFragmentPagerAdapter mMyFragmentPagerAdapter;
ArrayList<String>siteList = new ArrayList<String>();
CustomAdapter ca = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.fields);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.topbar);
    mPager = (ViewPager) findViewById(R.id.fieldspager);
    mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
    mPager.setAdapter(mMyFragmentPagerAdapter);
    mPager.setCurrentItem(1);
} 
```

我的 ListView 在哪里。

```
public  class AddSite extends Fragment {
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        RelativeLayout mRelativeLayout = (RelativeLayout) inflater.inflate(R.layout.add_site, container, false);
        Button addSiteButton = (Button) mRelativeLayout.findViewById(R.id.addSiteButton);
        addSiteButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                 mPager.setCurrentItem(2, true);
             }
        });

        ListView lv = (ListView) findViewById(android.R.id.list);
        CustomAdapter ca = new CustomAdapter();
        lv.setAdapter(ca);
        return mRelativeLayout;
    }

    class CustomAdapter extends ArrayAdapter<String> {
        CustomAdapter() {
            super(FieldsActivity.this, android.R.layout.simple_list_item_1, siteList);
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            View row = convertView;

            if (row == null) {
                LayoutInflater inflater=getLayoutInflater();
                row = inflater.inflate(R.layout.list_row, null);
            }
           ((TextView)row.findViewById(R.id.textViewId)).setText(siteList.get(position));
        }
        return row;
    }
} 
```

Button 和 EditText 在哪里。

```
public class CreateSite extends Fragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        RelativeLayout mRelativeLayout = (RelativeLayout) inflater.inflate(R.layout.main, container, false);
        final EditText siteEditText = (EditText)findViewById(R.id.siteEditText);
        Button signInButton = (Button) mRelativeLayout.findViewById(R.id.sign_in_button);
        signInButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {    //Click this button and add to ListView in class AddSite
                siteList.add(0, siteEditText.getText().toString());
                ca.notifyDataSetChanged(); //(Bundle) cannot be applied
                siteEditText.setText("");
                mPager.setCurrentItem(1, true);
            }
        });
        return mRelativeLayout;
    }
} 
```

虽然都在 FragmentPagerAdapter

```
private class MyFragmentPagerAdapter extends FragmentPagerAdapter {

    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);
    }
    @Override
    public Fragment getItem(int position) {
         switch (position) {
            case 0: return new SettingFields();
            case 1: return new AddSite();
            case 2: return new CreateSite();
        }
       return null;
    }
    @Override
    public int getCount() {

        return NUMBER_OF_PAGES;
    }
}

} 
```

所以我评论了显示的错误。

希望这是有道理的。如果您需要查看其他内容，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:14:08.387

您的片段不应该直接相互交谈。相反，每个片段都应该报告 Activity，而 Activity 可以决定如何处理该操作。

执行此操作的正常方法是让 Fragment 定义一个接口，并让 Activity 实现该接口。然后在Activity上有一个Fragment可以调用的方法。然后 Activity 可以调用另一个 Fragment 上的方法来使其执行某些操作。

请参阅有关[片段通信](http://developer.android.com/training/basics/fragments/communicating.html)的文档。

# backbone.js - 骨干console.log返回集合和未定义

> ID：14512551
> 
> 赞同：0
> 
> 时间：2013-01-24T23:09:50.293
> 
> 标签：backbone.js, requirejs, amd

我的 Backbone 项目发生了一些奇怪的事情。我正在将它重建为 AMD，我必须更改一些变量名才能让它再次工作。我有一个要传递给视图`console.log`的集合，但是当我收集时，我得到了对象和 null。

这是我的看法：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/tableModel',
    'collections/tablesCollection',
    'views/tablesView',
    'views/tableView'
],
function($, _, Backbone, tableModel, tablesCollection, tableView) {
    var tv = Backbone.View.extend({
        tagName: 'div',
        initialize: function() {
            console.log(this.collection);
            this.collection.on('reset', this.render, this);
            this.template = this.options.template;
            this.url = this.collection.url;

        },
        render: function() {
            //tablesCollection.collection.each(this.addOne, this);
            return this;
        },
        addOne: function(model) {
            var t = new tableView({ model: model, template: this.template, url: this.url });
            this.$el.append(t.render().el);
            return this;
        },
        stripQueryString: function(url) {
            return url.split('?')[0];
        }
    });

    return tv;
}); 
```

您将在项目中看到 console.log 几行。这是我在 Firebug 中得到的结果：

![在此处输入图像描述](../Images/e68ba8a1c7cd6e4d19e51a502b8e6193.png)

两者都引用相同的行号。这是对象中的内容：

![在此处输入图像描述](../Images/da0bb3d17445140bb66bbf47d0112dfd.png)

这里发生了什么？为什么我会为同一件事得到两个结果？其中一个是我想要的，另一个不是。

编辑：这是我实例化视图的地方：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/tableModel',
    'collections/TablesCollection',
    'views/tablesView',
    'views/tableView'
], function($, _, Backbone, TableModel, tablesCollection, tablesView, tableView) {
    var t = new tablesCollection(null, { url: 'main-contact'} );
    var tables = new tablesView({ collection: t, template: 'main-contact-template'});
    $('#web-leads').html(tables.render().el);

}); 
```

这是我的收藏：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/tableModel'
],
function($, _, Backbone, tableModel) {
    var tablesCollection = Backbone.Collection.extend({
        url: this.url,
        model: tableModel,
        initialize: function(models, options) {
            if (options && options.url) {
                this.url = options.url;
            }
            this.fetch({
                success: function(data, options) {

                }
            });
        }
    });

    return tablesCollection;
}); 
```

另外两个文件：

```
// Filename: app.js
define([
    'jquery',
    'underscore',
    'backbone',
    'router' // Request router.js
], function($, _, Backbone, Router){
    var initialize = function(){
    // Pass in our Router module and call it's initialize function
    Router.initialize();
};

return {
    //initialize: initialize  <--This is where the second init call was happening.
};
}); 
```

主.js：

```
 require.config({
        paths: {
            //jquery: 'libs/jquery/jquery-1.8.3.min',
            underscore: 'libs/underscore/underscore-min',
            backbone: 'libs/backbone/backbone-min'
        }
    });

    if ( typeof define === "function" && define.amd && define.amd.jQuery ) {
      define( 'jquery', [], function () { return jQuery; } );
    }

    //the "main" function to bootstrap your code
    require(['jquery', 'underscore', 'backbone', 'app'],
        function () {
            var App = require('app');
            App.initialize();
            // console.log($);
            // console.log(_);
            // console.log(Backbone);
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:48:49.623

您之前的代码版本比这个编辑的版本更有意义，因为在之前的版本中，您实际上是推送到`console.log`给问题的对象

```
// contents of 'that/view/that/gives/me/problems.js'
define([
    'jquery',
    'underscore',
    'backbone',
    'models/tableModel',
    'collections/tablesCollection',
    'views/tablesView',
    'views/tableView'
],
function($, _, Backbone, tableModel, tablesCollection, tableView) {
    console.log("factory", tablesCollection.collection); // <- you did not have this line. my addition
    var tv = Backbone.View.extend({
        tagName: 'div',
        initialize: function() {
            console.log("init", tablesCollection.collection); // <- your prior version. Point of your error
            this.collection.on('reset', this.render, this);
            this.template = this.options.template;
            this.url = this.collection.url;

        }
        // ...
    });

    return tv;
}); 
```

现在你让它显示两次的原因是因为你在上面定义的视图在**某处被初始化了两次**。

第一次初始化时，它会显示您所看到的值。指针周围的第二次`tablesCollection`被某些东西清理了，因此，您遇到了该错误。

现在清理了什么`tablesCollection`以及为什么我在您提供的代码中看不到任何地方。它可能与在代码中某处重新需要“collections/tablesCollection”模块有关。正如我从您的“collections/tablesCollection”模块代码中看到的那样，您在每次工厂调用时都重新定义了输出。我要做的是计算一次并缓存服务：

```
// contents of 'collections/tablesCollection.js'
;(function(){

    var mythings = {}

    function initializer($, _, Backbone, tableModel){
        return Backbone.Collection.extend({
            url: 'url',
            model: tableModel,
            initialize: function(models, options) {
                // ...
            }
        });
    }

    define([
        'jquery',
        'underscore',
        'backbone',
        'models/tableModel'
    ],
    function($, _, Backbone, tableModel) {
        if (!mythings.tablesCollection){
            // this will be done on first run.
            mythings.tablesCollection = initializer($, _, Backbone, tableModel)
        }
        // all others will just return same exact instance of collection class
        return mythings.tablesCollection
    })

})(); 
```

编辑：

[询问 AMD 规范组是否有可能](https://groups.google.com/forum/?fromgroups=#!topic/amd-implement/IPpUuSV3OII)在每次需要时重新运行“工厂”功能。即时回答是“不太可能”，但长期回答是“可能（如果以不同的名字询问）”

我在上面的代码片段中添加了注释行，指示它们是什么文件。

我还在第一个片段中添加了一个 console.log 行，它应该可以帮助您了解您遇到的问题与 AMD 加载程序无关。您只需在某处将视图**初始化**两次。

当您使用顶部代码段中的注释行运行代码时，您将看到`factory`日志行仅显示一次并显示`init`两次，就像在您的原始错误屏幕截图中一样。

您需要跟踪使用该`tv`变量中返回的视图的位置。您正在启动它两次。

至于在第二次运行中（清除）引用会发生什么，`tablesCollection`我不知道也看不到您提供的片段中的任何地方。

# c# - 当 UI 函数空闲时 Control.BeginInvoke 不调用委托

> ID：14512561
> 
> 赞同：1
> 
> 时间：2013-01-24T23:10:57.857
> 
> 标签：c#, controls

我正在修改一个适用于某些外部硬件的 Windows 桌面应用程序。当用户从应用程序激活硬件时，会启动一个进度 (UI) 表单。这种形式创建了一个线程来执行硬件的所有工作。当我尝试将进度报告回 UI 线程时，问题就出现了。看来我的第一个 Control.BeginInvoke （“协商消息”）工作正常。但是，第二个（对进度条的第一次调整）似乎从未将其称为委托，因此应用程序锁定在后续的 endinvoke 上。我认为问题在于 GUI 现在处于空闲状态，但我不确定如何解决这种情况。任何帮助，将不胜感激。代码如下：

在 UI 加载方法线程中：

```
 private void frmTwainAquire_Load(object sender, EventArgs e)
    {
        try
        {
            //Show the GUI
            this.Visible = showGUI;
            pbScanningProgress.Value = 0;
            btnCancel.Enabled = false;
            btnCancel.Visible = false;

            // Set the delegates.
            SetScanMessageDelegate = new SetScanMessage(this.SetScanMessageMethod);
            SetRegistrationMessageDelegate = new SetRegistrationMessage(this.SetRegistrationMessageMethod);
            AddScanProgressDelegate = new AddScanProgress(this.AddScanProgressMethod);
            AddRecogProgressDelegate = new AddRecogProgress(this.AddRecogProgressMethod);

            // Set progress bars.
            pbScanningProgress.Value = 0;
            pbRecognition.Value = 0;
            abortScan = false;

            // Create thread here!
            twainInstance = new rScan.Twain();
            rScanning = new rScanThread(this, twainInstance);

            // Start the thread.
            rScanning.tScan = new Thread(rScanning.Scan);
            rScanning.tScan.Start();

        }
        catch (Exception ex)
        {
            // Error checking here.
        }
    } 
```

委托方法：

```
public void SetScanMessageMethod(string scanMessage)
    {
        this.lblScanMessage.Text = scanMessage;
    }

    public void SetRegistrationMessageMethod(string recogMessage)
    {
        this.lblRecognition.Text = recogMessage;
    }

    public void AddScanProgressMethod(int progress)
    {
        this.pbScanningProgress.Value += progress;
    }

    public void AddRecogProgressMethod(int progress)
    {
        this.pbRecognition.Value += progress;
    } 
```

给出问题的线程方法。请注意，线程与前两个代码块（都在 UI 类中）位于不同的类中： public class rScanThread : IMessageFilter

```
public void Scan()
    {
        // Set progress bar message.
        IAsyncResult result;
        if (frmTwainAquireInstance.lblScanMessage.IsHandleCreated && frmTwainAquireInstance.lblScanMessage.InvokeRequired)
        {
            result = frmTwainAquireInstance.lblScanMessage.BeginInvoke(frmTwainAquireInstance.SetScanMessageDelegate, "Negotiating Capabilities with Scanner.");
            frmTwainAquireInstance.lblScanMessage.EndInvoke(result);
        }
        else
        {
            frmTwainAquireInstance.lblScanMessage.Text = "Negotiating Capabilities with Scanner.";
        }

        // Start the intialization of the rScan process.
        bool intializeSuccess = twainInstance.Initialize(frmTwainAquireInstance.Handle);

        // If the process could not be started then quit.
        if (!intializeSuccess)
        {
            frmTwainAquireInstance.Close();
            return;
        }

        if (frmTwainAquireInstance.pbScanningProgress.IsHandleCreated && frmTwainAquireInstance.pbScanningProgress.InvokeRequired)
        {
            result = frmTwainAquireInstance.pbScanningProgress.BeginInvoke(frmTwainAquireInstance.AddScanProgressDelegate, 33);
            frmTwainAquireInstance.pbScanningProgress.EndInvoke(result);  // Lock up here.
        }
        else
        {
            frmTwainAquireInstance.pbScanningProgress.Value += 33;
        }

      // Do more work after.  The code never makes it this far.

    } // End of rScanThread.Scan() 
```

# android - proguard.cfg 文件丢失

> ID：14512562
> 
> 赞同：25
> 
> 时间：2013-01-24T23:11:05.627
> 
> 标签：android, proguard

阅读 proguard 上的文档。. . [安卓文档](http://developer.android.com/tools/help/proguard.html)

我应该有一个 ProGuard.cfg，因为它说...“当您创建 Android 项目时，会在项目的根目录中自动生成一个 proguard.cfg 文件。”

如果我用谷歌搜索这个问题，到处都有答案，他们中的大多数人都说要修改一个以不要修改文件的警告开头的文件。

文档过时了吗？如何为发布版本启用此功能？谢谢，加里

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-25T02:54:05.143

如果您使用的是[ADT 17 或更新版本](http://tools.android.com/recent/proguardimprovements)，则文档会有些不准确。生成的文件`proguard-project.txt`将位于项目的根目录中。

要启用 Proguard，您需要忽略`project.properties`以下行中的“请勿修改”警告并取消注释：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

Android 工具链有时会更改`project.properties`，但您的 Proguard 路径将被保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-05T05:31:48.687

就我而言，错误中指定的位置缺少整个 Proguard 文件夹。确保该文件夹存在。

# joomla - Joomla 网站中的 Jquery 错误

> ID：14512571
> 
> 赞同：0
> 
> 时间：2013-01-24T23:11:39.573
> 
> 标签：joomla, joomla2.5, joomla-extensions

我在我的 joomla 网站上遇到 jquery 错误，在该网站上我正在使用美德集市，但我正在从 jqueryLoadPlugin 加载一个 jquery，以避免 jquery 冲突并禁用美德集市 jquery 它运行良好，但是当我启用滚动条时它再次给我错误。

下面我提到了页面的链接，在这些链接上我收到了滚动条的 jquery 错误。请指导我如何避免这种冲突。 `Jquery.noconflict();`已在页面上调用。

请需要你的帮助:(

**链接：**

（在选项卡上，当您单击 LAtest Projects 时，您会看到一个卡住的滑块。）

[http://ple-intl.com/NewUpgrade/](http://ple-intl.com/NewUpgrade/)

* * *

（我在文章中将模块称为它在哪里不起作用）

[http://ple-intl.com/NewUpgrade/index.php/service.html](http://ple-intl.com/NewUpgrade/index.php/service.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:06:49.330

您可以尝试做一些事情来使其正常工作。

1.  确保您的脚本被拉入页面，一种检查方法是使用 Chrome 调试器中的“源”选项卡并在 html 头部分中搜索其他文件

2.  确保在包含 jQuery 之后包含了其他脚本，因为它肯定依赖于它。

3.  检查是否正确包含 jQuery，并且只包含一次。

4.  注意 jQuery 冲突。还有一些其他库覆盖了 $，因此您的代码无法正常工作，因为 $ 不再是 jQuery 的别名。您可以使用它`jQuery.noConflict()`来避免与页面上使用相同变量 $ 的其他库发生冲突。

尝试使用[jQuery Easy](http://extensions.joomla.org/extensions/core-enhancements/performance/jquery-scripts/18327)。

# android - 从 Intent（或从 SL4A）开始 Android 测试？

> ID：14512572
> 
> 赞同：2
> 
> 时间：2013-01-24T23:11:49.340
> 
> 标签：android, automation, android-testing, sl4a

我想运行一些 android 测试，但我想安排或延迟这些测试的执行。我正在尝试从 SL4A 执行此操作。这个想法是安装 SL4A 从我的笔记本电脑启动服务器，运行一个特殊的 python 脚本，它将休眠大约 20 秒，然后唤醒并启动测试。我正在执行一些相当复杂的自动化，需要在我安装它们并断开 USB 电缆后运行我的测试。我知道我可以从 SL4A 发出意图，但我正在寻找相当于：

```
adb shell am instrument \
     -e class MyInstrumentationTestCase \
     -w MyInstrumentationTestRunner 
```

这可以通过意图来完成吗？我应该发送广播还是使用启动活动功能？

我尝试使用此脚本从 Python 直接在设备上运行系统命令，但出现“权限被拒绝”错误：

```
from subprocess import call
call(["am", "instrument", "-e", "class", "com.example.android.app.test.TestContactList", "-w", "com.example.app.test/com.zutubi.android.junitreport.JUnitReportTestRunner"]) 
```

**更新** 我也尝试使用 os.system 来运行命令（见下面的修改），这给出了一个不同的错误：soinfo_link_image(linker.cpp:1635): could not load library "libanroid_runtime.so" required by "app_process"; 由所以 info_relocate(linker.cpp:975) 引起：无法找到“lib android_runtime.so”引用的符号“sqlite3_stmt_readonly”...无法链接可执行文件

```
import os
#from subprocess import call
#call(["am", "instrument", "-e", "class", "com.example.android.app.test.TestContactList", "-w", "com.example.android.app.test/com.zutubi.android.junitreport.JUnitReportTestRunner"])
os.system('echo "Running tests"')
os.system('am instrument -e class com.example.android.app.test.TestContactList -w com.example.android.app.test/com.zutubi.android.junitreport.JUnitReportTestRunner') 
```

还有什么其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:30:47.970

我有以下函数，它将作为一个单独的进程从 Python SL4A 脚本中启动任何 SL4A 脚本。你不能`subprocess`用于这种类型的东西。

你也许可以从中推断出你需要什么。

```
from android import Android
droid = Android()

def launch_script(path, visible=False):

    visibilty   = 'FORE' if visible else 'BACK'
    activity    = 'com.googlecode.android_scripting.action.LAUNCH_{0}GROUND_SCRIPT'.format(visibilty)
    extras      = {'com.googlecode.android_scripting.extra.SCRIPT_PATH': path}
    packagename = 'com.googlecode.android_scripting'
    classname   = 'com.googlecode.android_scripting.activity.ScriptingLayerServiceLauncher'
    intent      = droid.makeIntent(activity, None, None, extras, None, packagename, classname).result
    droid.startActivityIntent(intent) 
```

# meteor - 脚本标签内的流星模板

> ID：14512577
> 
> 赞同：3
> 
> 时间：2013-01-24T23:12:06.937
> 
> 标签：meteor

我想`script type="text/html`用 Meteor 模板填充标签。

所以，这是一件很奇怪的事情，我知道。我想这样做的一半原因是因为 Cloud9 无法区分 JS 脚本标签和 HTML 脚本标签，当您尝试在`script`标签中编写 HTML 时，它的语法高亮和标签补全会中断。我的另一半只是好奇这是否可能，因为存在一种丑陋的解决方法。

所以这：

```
<body>
    <script type="text/html" id="test">
        {{> test}}
    </script>
</body>

<template name="test">
    <span>Test</span>
</template> 
```

产生这个：

```
<script type="text/html" id="test">
    <!--label:YRgyaMH8-->
</script> 
```

任何人都有办法强制它呈现模板，而不是看起来像评估名称作为评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:06:52.087

提交另一个答案 b/c 我想保留我以前的答案，仅作记录。我认为这种方法会更好。

在您的 html 中，您将定义两个部分。第一个是您要放置模板代码的位置。它将进入一个普通 div 标签内的评论。第二个是放置模板以供 Knockout 使用的位置。它看起来像这样：

```
<template name="koTemplate">
    <div id="myTemplate">
        <span>Here is my template <a href="#">with children</a></span>
    </div>

    <script type="text/html" id="test"></script>
</template> 
```

然后在您的客户端 JS 代码中，您将添加[一个回调以在模板渲染时运行](http://docs.meteor.com/#template_rendered)

```
Template.koTemplate.rendered = function () {
  // Get the first node, then get the content inside of it
  var templateHtml = this.firstNode.innerHTML;

  // Remove the element so it doesn't get rendered
  this.firstNode.parentNode.removeChild(this.firstNode);
  // another option is to surround the contents inside the template w/comments, but that loses syntax highlighting

  // Get the target node for placing the template in
  var templateNode = this.lastNode;

  // place the content from the original node to the target node
  templateNode.innerHTML = templateHtml;
}; 
```

这基本上将获取模板的内容，删除模板，然后将其放在脚本标签中。结果将如下所示：

```
<script type="text/html" id="test">
    <span>Here is my template <a href="#">with children</a></span>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:31:04.810

我建议不要使用 script 标签，而是使用 Cloud9 不会将其视为 JS 并且 Meteor 不会捏造的其他通用标签。使用我对该问题的评论中的示例，它看起来像这样：

```
<div id="template">
  <!--<span>test</span>-->
</div> 
```

在您的 JS 中，您将解析：

```
var template = document.getElementById('template').firstChild.nodeValue,
    result = parseTemplate(template, values); 
```

这是基本的想法。获得结果后，您必须将其转换为 Knockout 的模板解析。

# angularjs - 如何使用 AngularJS 生成 url 编码的锚链接？

> ID：14512583
> 
> 赞同：76
> 
> 时间：2013-01-24T23:12:59.290
> 
> 标签：angularjs, anchor, urlencode

```
<a href="#/search?query={{address}}" ng-repeat="address in addresses">
  {{address}}
</a> 
```

如果我理解正确，生成不是 url 编码的链接。什么是正确的编码方式`#/search?query={{address}}`？

示例地址是`1260 6th Ave, New York, NY`。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-01-24T23:49:55.447

您可以`encodeURIComponent`在 javascript 中使用本机。此外，您可以将其制成字符串过滤器以使用它。

这是制作`escape`过滤器的示例。

js：

```
var app = angular.module('app', []);
app.filter('escape', function() {
  return window.encodeURIComponent;
}); 
```

html:

```
<a ng-href="#/search?query={{address | escape}}"> 
```

（更新：适应使用`ng-href`而不是 plain的 Karlies 的回答`href`）

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-07-22T09:49:06.937

`#/search?query=undefined`如果`address`未定义，@Tosh 的解决方案将返回

```
<a ng-href="#/search?query={{address | escape}}"> 
```

如果您希望获得一个空字符串而不是查询，则必须将解决方案扩展到

```
var app = angular.module('app', []);
app.filter('escape', function() {
    return function(input) {
        if(input) {
            return window.encodeURIComponent(input); 
        }
        return "";
    }
}); 
```

`#/search?query=`如果`address`未定义，这将返回。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-01-30T13:24:37.760

您可以使用 encodeUri 过滤器：[https ://github.com/rubenv/angular-encode-uri](https://github.com/rubenv/angular-encode-uri)

1.  将 angular-encode-uri 添加到您的项目中：

    `bower install --save angular-encode-uri`

2.  将其添加到您的 HTML 文件中：

    `<script src="bower_components/angular-encode-uri/dist/angular-encode-uri.min.js"></script>`

3.  将其作为应用程序模块的依赖项引用：

    `angular.module('myApp', ['rt.encodeuri']);`

4.  在您的视图中使用它：

    `<a href="#/search?query={{address|encodeUri}}">`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-02-26T16:29:07.743

Tosh 的答案完全正确。我建议这样做。但是，如果你这样做，你应该使用**"ng-href"**而不是**"href"**，因为在绑定解析之前跟随 "href" 可能会导致错误的链接。

筛选：

```
'use strict';

angular.module('myapp.filters.urlEncode', [])

/*
 * Filter for encoding strings for use in URL query strings
 */
.filter('urlEncode', [function() {
  return window.encodeURIComponent;
}]); 
```

看法：

```
<a ng-href="#/search?query={{ address | urlEncode }}" ng-repeat="address in addresses">
  {{address}}
</a> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-06-26T13:28:15.467

这是一个工作代码示例：

```
app.filter('urlencode', function() {
  return function(input) {
    return window.encodeURIComponent(input);
  }
}); 
```

在模板中：

```
<img ng-src="/image.php?url={{item.img_url|urlencode}}" 
```

# javascript - Ember 数据：预加载关系

> ID：14512584
> 
> 赞同：0
> 
> 时间：2013-01-24T23:13:09.023
> 
> 标签：javascript, ember.js, ember-data

我想做的是非常基本的，但我的运气很少......

很简单，在某个 Ember Data 模型属性完全加载之前，我不想显示一大段 HTML。

正如您从[jsfiddle](http://jsfiddle.net/zfkNp/4/)中看到的那样，父模型：`App.Person`被加载到 DOM 中，并且它还为其 hasMany 属性加载了 3 个占位符`belts`。

然后它执行请求以填充`App.Belt`并填充占位符。

虽然这通常没问题，但例如在尝试构建 SVG 时会造成很大的麻烦。由于周围的`<svg>`标签会立即附加到 DOM 中，然后在一段时间后（一旦异步请求返回数据），内部`svg`组件将被添加到标签之间。这通常会导致浏览器呈现错误。

**TL;DR**
在示例中，如何推迟将`<h3>...</h3>`模板部分添加到 DOM**直到**模型数据及其关系 ( `belts`) 完全加载？这样一来，所有东西都会在视觉上和物理上一次添加到 DOM 中。

**JS：**

```
// Create Ember App
App = Ember.Application.create();

// Create Ember Data Store
App.store = DS.Store.create({
    revision: 11,
    //Exagerate latency to demonstrate problem with relationships being loaded sequentially.
    adapter: DS.FixtureAdapter.create({latency: 5000})
});

// Create parent model with hasMany relationship
App.Person = DS.Model.extend({
    name: DS.attr( 'string' ),
    belts: DS.hasMany( 'App.Belt' )
});

// Create child model with belongsTo relationship
App.Belt = DS.Model.extend({
    type: DS.attr( 'string' ),
    parent: DS.belongsTo( 'App.Person' )
});

// Add Parent fixtures
App.Person.FIXTURES = [{
    "id" : 1,
    "name" : "Trevor",
    "belts" : [1, 2, 3]
}];

// Add Child fixtures
App.Belt.FIXTURES = [{
    "id" : 1,
    "type" : "leather"
}, {
    "id" : 2,
    "type" : "rock"
}, {
    "id" : 3,
    "type" : "party-time"
}];

// Set route behaviour
App.IndexRoute = Ember.Route.extend({
  model: function() {
    return App.Person.find();
  },
  renderTemplate: function() {
    this.render('people');
  }
}); 
```

**HTML/哈佛商学院：**

```
<script type="text/x-handlebars">
    <h1>Application</h1>
    {{outlet}}
</script>

<script type="text/x-handlebars" id="people">
    <h3>Don't load this header until every belt defined in App.Person.belts is loaded</h3>
    <ul>
    {{#each controller}}
        {{debugger}}
        <li>Id: {{id}}</li>
        <li>Name: {{name}}</li>
        <li>Belt types:
            <ul>
            {{#each belts}}
                <li>{{type}}</li>
            {{/each}}
            </ul>
        </li>
    {{/each}}
    </ul>
</script> 
```

**小提琴：http:** [//jsfiddle.net/zfkNp/4/](http://jsfiddle.net/zfkNp/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:33:50.063

检查 controller.content.length 和 belts.isLoaded，请参阅[jsfiddle](http://jsfiddle.net/ZSEpE/)以获得解决方案。

```
<script type="text/x-handlebars" id="people">
    {{#if controller.ready}}
    <h3>Don't load this header until every belt defined in App.Person.belts is loaded</h3>
    {{/if}}
    <ul>
    {{#each controller}}
        {{debugger}}
        {{#if belts.isLoaded}}
        <li>Id: {{id}}</li>
        <li>Name: {{name}}</li>
        <li>Belt types:
            <ul>
            {{#each belts}}
                <li>{{type}}</li>
            {{/each}}
            </ul>
        </li>
        {{/if}}
    {{/each}}
    </ul>
</script>

App.IndexController = Ember.ArrayController.extend({
    content: null,        
    ready:function() {
        return this.get('content.length')>0        
    }.property('content.length')
}); 
```

# grails - 将 Groovy 标记包裹在自定义标记周围

> ID：14512585
> 
> 赞同：0
> 
> 时间：2013-01-24T23:13:09.570
> 
> 标签：grails

本质上，我正在尝试找到一种 DRYer 方法来表示此代码：

```
<li><g:link controller="ActivityDashboard" action="summary">Summary</g:link></li>
<li><g:link controller="ActivityDashboard" action="user_details">User Details</g:link></li>
<li><g:link controller="ActivityDashboard" action="groups_monitors">Groups & Monitors</g:link></li>
<li><g:link controller="ActivityDashboard" action="Top Content">Top Content</g:link></li>
<li><g:link controller="ActivityDashboard" action="embedded_components">Embedded Components</g:link></li>
<li><g:link controller="ActivityDashboard" action="customer_summary">Customer Summary</g:link></li> 
```

正如你所看到的，有很多重复，所以我创建了如下的 a 标签：

```
def navLink = { attrs, body ->
  out << "<li>"
  out << "<g:link controller='ActivityDashboard' action='${attrs.action}'>${attrs.title}"
  out << "</g:link></li>"
} 
```

但是，输出 html 正是：

```
<g:link action="summary" controller="ActivityDashboard">Summary</g:link> 
```

我怎样才能像这样渲染：

```
<a href="/engagementlevels/activityDashboard/summary">Summary</a> 
```

奖励积分：我可以从标签访问页面的 actionName 属性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:28:20.433

您需要使用标签的 g.link() 版本，以便 GString 解析它并按照您的需要呈现输出。

```
out << g.link(attrs.title, controller: 'ActivityDashboard', action: attrs.action) 
```

# html - hotmail 电子邮件通讯中带图像的行之间的空间

> ID：14512586
> 
> 赞同：0
> 
> 时间：2013-01-24T23:13:09.967
> 
> 标签：html, css, newsletter

我正在制作仅使用 HTML 和 CSS 的电子邮件通讯。它都在表格中，没有 div 或副本、边距或填充。它在 gmail 中运行良好，但在 hotmail 中进行测试时，行之间有一个空格。我所有的行在其单元格中都有图像，其中大多数链接到一个站点。我尝试了不同的 CSS，例如 display:block 和 collapsing 但没有运气......有什么想法吗？

这是我的代码：

```
<style type="text/css">
/* Client-specific Styles */
#outlook a{padding:0;} /* Force Outlook to provide a "view in browser" button. */
body{width:100% !important;} .ReadMsgBody{width:100%;} .ExternalClass{width:100%;} /* Force Hotmail to display emails at full width */
body{-webkit-text-size-adjust:none;} /* Prevent Webkit platforms from changing default text sizes. */

/* Reset Styles */
*, body {
    padding:0;
    margin:0;
    border:0;
    border:none;
    outline:none;
    font-size: 0px;
}
img, a img  {
    border:0;
    border:none;
    text-decoration: none;
    padding:0;
    margin:0;
    display:block;
}
table tr, table td, table th { border: 0; margin: 0; padding: 0; }
table, table td {
    border-collapse: collapse;
}
#backgroundTable {
    height: 100% !important;
    margin: 0;
    padding: 0;
    width: 100% !important;
}
p {
   margin: 1em 0;
}
h1, h2, h3, h4, h5, h6 {
   color: black !important;
   line-height: 100% !important;
}

h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
   color: blue !important;
}

h1 a:active, h2 a:active,  h3 a:active, h4 a:active, h5 a:active, h6 a:active {
       color: red !important; /* Preferably not the same color as the normal header link color.  There is limited support for psuedo classes in email clients, this was added just for good measure. */
   }

h1 a:visited, h2 a:visited,  h3 a:visited, h4 a:visited, h5 a:visited, h6 a:visited {
   color: purple !important; /* Preferably not the same color as the normal header link color. There is limited support for psuedo classes in email clients, this was added just for good measure. */
}
   table td {
   border-collapse:collapse;
}
.yshortcuts, .yshortcuts a, .yshortcuts a:link,.yshortcuts a:visited, .yshortcuts a:hover, .yshortcuts a span { color: black; text-decoration: none !important; border-bottom: none !important; background: none !important;} 

/* Template Styles */
body, #backgroundTable {
    background-color: #000000;
}

</style>
</head>
<body leftmargin="0" marginwidth="0" topmargin="0" marginheight="0" offset="0">
<center>
<table border="0" cellpadding="0" cellspacing="0" height="100%" width="100%" id="backgroundTable">
<tr>
<td align="center" valign="top"><table border="0" cellpadding="0" cellspacing="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<table border="0" cellpadding="0" cellspacing="0" width="600" id="templateHeader">
<tr>
<td align="center" valign="top" border="0" cellpadding="0" cellspacing="0" width="600"><a href="#" target="_blank"><img style="display:block; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border:0; border:none;" border="0" src="images/TEMPLATE-HEADER.png" alt="Header" /></a></td>
  </tr>
  <tr>
<td align="center" valign="top" border="0" cellpadding="0" cellspacing="0" width="600"><a href="#" target="_blank"><img style="display:block; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border:0; border:none;" border="0" src="images/TEMPLATE-PROMO.png" alt="Content" /></a></td>
  </tr>

  <tr>
<td align="center" valign="top" border="0" cellpadding="0" cellspacing="0" width="600"><a href="#" target="_blank"><img style="display:block; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border:0; border:none;" border="0" src="images/TEMPLATE-NOTE.png" alt="Note" /></a></td>
  </tr>
    </table></td></tr>
  <tr>
<td align="center" valign="top" border="0" cellpadding="0" cellspacing="0" width="600"><table style="display: inline-table;" border="0" cellpadding="0" cellspacing="0" width="600">
      <tr>
<td align="center" valign="top" border="0" cellpadding="0" cellspacing="0" width="469"><img style="display:block; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border:0; border:none;" border="0" src="images/TEMPLATE-FOLLOW.png" alt="Follow Us" /></td>
       <td align="center" valign="top" border="0" cellpadding="0" cellspacing="0" width="30"><a href="#" target="_blank"><img style="display:block; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border:0; border:none;" border="0" src="images/TEMPLATE-FACEBOOK.png" alt="Facebook" /></a></td>

       <td align="center" valign="top" border="0" cellpadding="0" cellspacing="0" width="33"><a href="#" target="_blank"><img style="display:block; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border:0; border:none;" border="0" src="images/TEMPLATE-TWITTER.png" alt="Twitter" /></a></td>

       <td align="center" valign="top" border="0" cellpadding="0" cellspacing="0" width="30"><a href="#" target="_blank"><img style="display:block; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border:0; border:none;" border="0" src="images/TEMPLATE-YOUTUBE.png" alt="YouTube" /></a></td>

       <td align="center" valign="top" border="0" cellpadding="0" cellspacing="0" width="38"><img style="display:block; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border:0; border:none;" border="0" src="images/TEMPLATE-SPACE02.png"  alt="Follow Us" /></td>
      </tr>
    </table></td>
  </tr>
  <tr>
<td align="center" valign="top" border="0" cellpadding="0" cellspacing="0" width="600"><img style="display:block; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border:0; border:none;" border="0" src="images/TEMPLATE-RIGHTS.png" alt="Copyright" /></td>
  </tr>
   </td>
  </tr> 
  </table>
  </td>
  </tr>
</table>
</center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:13:08.477

当我遇到类似问题时，我添加到*td*：

```
valign="top" align="left" 
```

和*img*：

```
style="border:none; vertical-align:top" 
```

这是一个例子：

```
<td valign="top" align="left"><a href="#"><img style="border:none; vertical-align:top" src="#" /></a></td> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T00:01:06.557

I have checked your code and there have been a few things i would like to flag for you that you should have a look at.

**Property**, **Support/Unsupported clients**

1.  width CSS property **RISKY** Outlook 07, Notes 6, Eudora
2.  background-color CSS property **POOR** Notes 6, Eudora
3.  margin CSS property **RISKY** AOL 9, Notes 6, Eudora, Live Mail, Hotmail
4.  padding CSS property **POOR** Notes 6, Eudora
5.  border CSS property **POOR** Notes 6, Eudora
6.  border-collapse CSS property **RISKY** Entourage 2004, Notes 6, Eudora
7.  height CSS property **RISKY** Outlook 07, Notes 6, Eudora, Old GMail
8.  display CSS property **POOR** Outlook 07, Eudora

I would suggest you remove all your embedded styles as some are not picked up in various browsers/email clients and place them inline. Inline styles work better and are more stable for cross browser use, and seems email templates are generally only used once or altered slightly for varying EDM's. This means that is is very safe to put al your styles inline:

e.g.

```
<div style="color:red; width:100px; border:1px solid green;"></div> 
```

Hope this helps.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T23:32:35.040

scrappedcola 是对的……您需要为 eDM 使用内联样式。

此处列出了有关不同电子邮件客户端支持的一些有用信息：http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

您可能还需要运行石蕊测试以确保您的电子邮件对于所有主要电子邮件客户端都正确显示：http: [//litmus.com/](http://litmus.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T16:12:28.527

编写内联 css 而不是将其放在样式标签中会更好。IE 会去掉标题并在渲染过程中添加它自己的元素。类似 1990 年的代码。一个很好的测试方法是在 Outlook 中打开您的电子邮件，然后“另存为”一个网页并在浏览器中打开。你可以确切地看到前景所造成的破坏。

msdn.microsoft.com/en-us/library/office/... 关于如何在 Outlook 中使用 css 的官方说法（又名“MSFT 多么讨厌 Web 开发人员”）

# actionscript-3 - 羽毛 UI 渲染器列表 selectedIndex -1

> ID：14512587
> 
> 赞同：1
> 
> 时间：2013-01-24T23:13:11.443
> 
> 标签：actionscript-3, starling-framework

我在 AS3 中使用 Feathers UI 和 Starling 构建了一个 itemRenderer 来显示项目列表。当用户单击项目时，我会显示一个包含多个选项的对话框，例如删除项目、查看项目、取消

如果我单击取消，我将返回整个列表完好无损的屏幕，但是我无法选择相同的列表项。有没有办法将所选项目重置为 -1，以便我可以重新选择相同的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:51:32.433

如果您想取消选择列表中的当前项目，您可以完全按照您的说明进行操作。

```
list.selectedIndex = -1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:31:51.007

我认为您最好将其发布在 Feathers 论坛上，因为 Josh 可能知道答案。

我也看到了这个问题，尽管设置 list.selectedIndex = -1 相同的项目无法重新选择。我认为我的解决方案是在您返回列表时刷新列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:12:33.107

我有类似的麻烦：

```
list.selectedIndex = -1; // visual deselect not occur 
```

对我来说，下一个“黑客”工作：

```
_list.selectedIndex = -1;
_list.isSelectable = false;
_list.validate();
_list.isSelectable = true; 
```

我知道 - 这不好，但它有效。

# matlab - MATLAB，GUIDE，查看 dicom 堆栈上的切片编号

> ID：14512588
> 
> 赞同：2
> 
> 时间：2013-01-24T23:13:12.837
> 
> 标签：matlab, matlab-guide

我想通过一个简单的上一个/下一个切片 GUI 查看我正在检查的切片的编号。我存储了正在查看的切片的编号，`handles.index`并且可以通过上一个、下一个按钮对其进行更新。

我在编辑文本回调函数上写了以下内容：

```
function edit2_Callback(hObject, eventdata, handles)
handles.output=hObject
set (edit2.handles,'Tag', handles.index); %also tried with the 'String' property and failed 
```

代码运行时，属性不会更新。它仍然是“编辑文本”，这里有什么问题？

[完整代码](https://www.dropbox.com/s/2gidpsqt36rqph9/PREVIOUS_NEXT_GUI.m)，[Dicom 文件](https://www.dropbox.com/s/91eha9wlkg5cdwa/TumorSimOutput2_T1.dcm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:01:41.507

Duh, I made the update on the pushbutton callbacks, and it works fine :)

```
% --- Executes on button press in pushbutton2.
function pushbutton2_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton2 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
handles.output = hObject;
handles.index = handles.index+1;
Cek (hObject, eventdata, handles);
imshow(handles.image_data(:,:,handles.index),'DisplayRange',[]); 
set (handles.edit2,'String', handles.index); 
```

# c# - 从window1触发事件到主窗口c#

> ID：14512589
> 
> 赞同：0
> 
> 时间：2013-01-24T23:13:13.360
> 
> 标签：c#, .net-4.0

> **可能重复：**
> [在另一个表单中发生事件后更新一个表单](https://stackoverflow.com/questions/14470150/updating-one-form-after-event-occurs-in-another-form)

相关信息：使用 WPF 应用程序、C#、Visual Studio 2010、.Net 4

我有两个窗口：Window1 和 MainWindow。在 Window1 中，我有一个复选框，选中该复选框后，会将 MainWindow 中的 label1 设置为不可见。我该怎么办？

我不能这样做`MainWindow newWindow = new MainWindow()`，因为我不想创建一个新的主窗口。我尝试了以下代码，但抛出异常：{“对象引用未设置为对象的实例。”}`。

```
private void checkBox4_Checked(object sender, RoutedEventArgs e)
{
   if (checkBox4.IsChecked == true)
   {
       (Application.Current.MainWindow as MainWindow).label1.Visibility = 
                   Visibility.Hidden;
   }
   else
   {
       (Application.Current.MainWindow as MainWindow).label1.Visibility = 
                   Visibility.Visible;
   }
} 
```

解决此问题的最佳方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:27:00.173

将事件添加到`Window1`：

```
public event Action<bool> SomethingChecked; //TODO rename to indicate what was checked 
```

当复选框被选中时，引发该事件：

```
private void checkBox4_Checked(object sender, RoutedEventArgs e)
{
    if(SomethingChecked != null)
        SomethingChecked(checkBox4.IsChecked);
} 
```

然后从主窗体添加一个事件处理程序：

```
Window1 other = new Window1();
other.SomethingChecked += checked => label1.Visibility = 
    checked ? Visibility.Visible : Visibility.Hidden; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:29:16.483

在 Window1 中创建一个事件，在 MainWindow 中处理该事件。

只是下面的一个例子，不是真正的工作代码......

```
MainWindow
{
    private void SomeStuff()
    {
        Window1 window = new Window1();
        window.CheckBoxClick += new OnCheckBoxClick(SomeMethod);
    }

    private void SomeMethod(bool state)
    {
         // use state;
    }
} 
```

# ios - Xcode 允许我在没有警告的情况下定义两次相同的函数

> ID：14512593
> 
> 赞同：0
> 
> 时间：2013-01-24T23:14:24.457
> 
> 标签：ios, xcode

刚刚在一个未调用委托函数的 iOS 项目中遇到问题。无法弄清楚为什么它没有被触发。

该函数位于 UITableViewController 子类中。

`- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath`

原来我已经用我自己的代码手动添加了这个函数，但它已经作为 XCode 自动生成代码的一部分存在于源文件的更深处。

XCode 似乎对函数在同一个源文件中存在两次这一事实没有问题。

为什么 XCode 没有为此显示警告？

有什么方法可以配置它以显示这种情况下的警告？

**编辑：**我正在使用 XCode 4.5.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:17:26.143

您确定其中一种方法不在类别中吗？这将是合法的，因为该类别将覆盖子类的方法。我刚刚使用 Xcode 4.5.2 进行了测试，当我尝试使用相同的方法名称两次时立即收到警告。

# python - Writelines() 不写

> ID：14512594
> 
> 赞同：0
> 
> 时间：2013-01-24T23:14:28.057
> 
> 标签：python, python-2.7

运行此代码会按预期创建 file2.txt，但该文件为空。（注意：file1.txt 中只有一首诗。）为什么会这样？如何让它将数组 a2 写入文本文件？

```
import copy

#Open input file, read it into an array, and remove the every other line.
f = open('file1.txt','r')
a1 = f.readlines()
a2 = copy.deepcopy(a1)
f.close
for n in range(len(a1)):
    if n%2 == 0:
        a2.remove(a1[n])

# Open output file and write array into it.
fo = open('file2.txt','w')
fo.writelines(a2)
fo.close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:17:19.693

你需要一个`()`之后`close`：

```
fo.close() 
```

还可以考虑[`with`](http://preshing.com/20110920/the-python-with-statement-by-example)在处理文件时使用该语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:17:42.687

您确实意识到最好将其写为：

```
from itertools import islice
with open('input') as fin, open('output','w') as fout:
    every_other = islice(fin, None, None, 2)
    fout.writelines(every_other) 
```

推理：

*   文件无缘无故没有加载到内存中
*   `islice`可用于为每隔一行创建一个生成器
*   ...然后可以传递给输出的`.writelines()`
*   该`with`语句（上下文管理器）之后会自动关闭文件
*   （恕我直言）更容易阅读和理解意图是什么

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T23:17:37.603

正如评论所说，您忘记关闭文件，因此缓冲区永远不会被刷新。

代替

```
fo.close 
```

和

```
fo.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T23:17:30.973

“关闭”是一种方法——即。使用 fo.close() 代替 fo.close

# yii - 在 Yii 中验证 renderPartial 中的数据

> ID：14512597
> 
> 赞同：1
> 
> 时间：2013-01-24T23:14:49.910
> 
> 标签：yii

我刚刚创建了一个 renderPartial()：

renderPartial('/users/_form', array('model'=>new Users), true, true); ?>

输入的数据未验证的问题。

我错过了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:18:20.957

从您的问题中不清楚您想要验证的确切时间。

如果在客户端，您需要这样的东西：

```
<?php $form=$this->beginWidget('CActiveForm', array(
  'id'=>'your-form',
  'enableAjaxValidation'=>true,
  'clientOptions' => array(
    'validateOnSubmit'=>true,
  ), 
)); ?> 
```

在您的控制器中的 post 操作中加上这个： $this->performAjaxValidation($model); 连同一个控制器方法，如：

```
/** 
 * Performs the AJAX validation.
 * @param CModel the model to be validated
 */
protected function performAjaxValidation($model)
{
  if(isset($_POST['ajax']) && $_POST['ajax']==='saferides-registered-form')
  {   
    echo CActiveForm::validate($model);
    Yii::app()->end();
  }   
} 
```

如果您只想在帖子上进行验证，则可以在处理帖子的控制器操作中使用类似这样的内容：

```
if ( $model->validate() && $model-save() )
{
  ..redirect to your view
} 
```

另请参阅[文档](http://www.yiiframework.com/doc/guide/1.1/en/form.model)

# asp.net-mvc - 带有连字符的 ASP.NET MVC 动态操作

> ID：14512599
> 
> 赞同：0
> 
> 时间：2013-01-24T23:14:51.043
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我正在开发一个 ASP.NET MVC 项目。我需要能够映射这样的路线：

[http://www.mysite.com/Products/网球鞋](http://www.mysite.com/Products/Tennis-Shoes)

URL（网球鞋）的“动作”部分可能是可能性列表之一。我不想在我的控制器中为每个方法创建一个单独的动作方法。我想将它们全部映射到一个操作方法，我将处理从那里显示的视图。

通过添加路线映射，我可以正常工作。但是，有些“操作”需要在其中包含连字符。ASP.NET MVC 路由在我可以将它发送到我的操作之前尝试解析该连字符。我试图创建自己的自定义路由处理程序，但它甚至从未被调用过。一旦我有一个连字符，所有的路线都会被忽略，即使是我的自定义路线。

有什么建议么？有关连字符情况的详细信息？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:39:11.357

查看 URL 并阅读您的描述，`Tennis-Shoes`在您的示例中听起来不应该是一个动作，而是一个 Route 参数。假设我们有以下控制器

```
public class ProductsController : Controller
{
    public ActionResult Details(string product)
    {
        // do something interesting based on product...

        return View(product);
    }
} 
```

该`Details`操作将按照以下方式处理任何 URL

```
http://www.mysite.com/Products/{product} 
```

使用以下路线

```
routes.MapRoute(
   null,
   "Products/{product}",
   new
   {
       controller = "Products", 
       action = "Details"
   }); 
```

您可能会决定根据`product`字符串使用不同的视图，但这只是一个基本示例。

# javascript - Javascript 'div empty' 事件监听器

> ID：14512601
> 
> 赞同：0
> 
> 时间：2013-01-24T23:15:05.230
> 
> 标签：javascript, events, listener

有没有办法让 div 元素为空时监听？

```
 $('#myDiv').emptyEvent(function(){

)}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:19:40.117

您应该在事件处理程序中运行 David 的代码，例如`DOMNodeInserted`、`DOMCharacterDataModified`或`DOMSubtreeModified`。后者是最推荐的。例如：

```
$('#myDiv').bind("DOMSubtreeModified", function(){
   if ( $('#myDiv').html() == "" ) {

   }
)}; 
```

**编辑：**但是，如评论中所述，*不推荐使用*此类实现。正如 david 所建议的，另一种实现如下：

```
// select the target node
var target = $("#myDiv")[0];

// create an observer instance
var observer = new MutationObserver(function(mutations) {
   mutations.forEach(function(mutation) {
      if($("#myDiv").html() == ""){
         // Do something.
      }
   });    
});

// configuration of the observer:
var config = { attributes: true, childList: true, characterData: true };

// pass in the target node, as well as the observer options
observer.observe(target, config); 
```

# java - Java LDAP 优雅断开连接

> ID：14512602
> 
> 赞同：5
> 
> 时间：2013-01-24T23:15:05.267
> 
> 标签：java, connection, ldap

目前从 java 我正在使用以下代码连接到 LDAP，非常典型的示例：

```
 Hashtable<String, String> env = new Hashtable<String, String>();

    env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    env.put(Context.PROVIDER_URL, url);
    env.put(Context.SECURITY_AUTHENTICATION, "simple");
    env.put(Context.SECURITY_PRINCIPAL, user);
    env.put(Context.SECURITY_CREDENTIALS, password);

    LdapContext ctx = null;

    try
    {
        ctx = new InitialLdapContext(env, null);
        return true;
    }
    catch (NamingException ex)
    {
        return false;
    }
    finally
    {
        if (ctx != null)
        {
            try {
                ctx.close();
            } catch (NamingException e) {
                log.warn(e.getMessage());
            }
        }
    } 
```

这适用于对用户进行身份验证。但是，LDAP 管理员告诉我，当绑定不成功时，我没有正常断开连接。LDAP 端的错误是（例如）：

> [24/Jan/2013:13:20:44 -0500] conn=249 op=-1 msgId=-1 - 从 [ipaddress]:44724 关闭 - A1 - 客户端中止连接 -

他还说，当身份验证成功时，断开连接是优雅的。我想这是因为我`ctx.close()`在那种情况下这样做。

但是，当身份验证失败时，实际上会从`new InitialLdapContext(env, null)`线路中抛出一个异常。因此不会返回任何上下文，并且不会在任何上下文上调用关闭。

有没有办法在尝试身份验证之前检索某种连接对象，以便我可以在之后关闭它，无论身份验证是否成功？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:57:46.217

他为什么要在优雅和不优雅的收场之间在意？显然，您的收盘是在唯一相关的情况下执行的：您成功的情况。在另一种情况下，没有什么可以关闭，所以你什么都不能调用。在另一种情况下，JNDI LDAP 提供者将其关闭，很明显，它正在执行中止关闭。这一切都在 JNDI LDAP 提供者的底层。你无能为力。我建议他找点别的事情来担心，这实际上很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-24T12:54:48.937

搜索 LDAP 正常返回

```
NamingEnumeration<SearchResult> results 
```

您还需要关闭（）：

```
} finally {
            if(results != null) {
                try {
                    results.close();
                } catch (NamingException e) {
                    LOG.error("Error closing LDAP results", e);
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T01:24:43.970

在添加任何身份验证详细信息之前构造上下文对象。然后，使用 addToEnvironment 添加凭据。最后，执行一个非常简单的搜索（我的方法是查找用户名的 distinctName 属性）。如果凭据不好，搜索将失败，并且您仍然需要关闭上下文对象。

这种方法的另一个好处是：您可以维护一个上下文对象池，并避免不断地连接/断开连接以执行身份验证。

```
Hashtable<String,String> environment = new Hashtable<String,String>();
environment.put("java.naming.provider.url", url);
environment.put("java.naming.factory.initial", "com.sun.jndi.ldap.LdapCtxFactory");

InitialLdapContext context = new InitialLdapContext(environment, null);

...

context.addToEnvironment("java.naming.security.principal", principal);
context.addToEnvironment("java.naming.security.credentials", credentials);

...

// execute some kind of search, based on your needs 
```

# datagrid - 过滤数据网格

> ID：14512606
> 
> 赞同：1
> 
> 时间：2013-01-24T23:15:20.867
> 
> 标签：datagrid, web, usability, datalist

在一个简单的场景中，有一个包含 2 列的数据网格的网页；名字和国家。网格上设置了一个过滤器来过滤掉所有澳大利亚人。同一页面上有一个用于添加新记录的表单，用户决定添加来自澳大利亚的某人。此记录不符合过滤条件，因此不会正常显示。但是，从用户的角度来看，这可能会造成混淆，因为他们可能不相信此人已成功添加，或者忘记了过滤器将意味着不显示新条目。

从可用性的角度来看，处理这个问题的最佳方法是什么？：

1.  显示新条目但使列表处于与过滤条件不一致的状态？
2.  过滤掉新条目但冒着混淆用户的风险？
3.  向用户提供记录已成功添加但可能被过滤出列表的反馈？
4.  ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T21:59:34.060

我使用的三个工具，Mingle、Jira 和 Quicken，非常有效地使用了这个实现；对您的数字 3 稍作修改：

向用户提供记录已成功添加但不会显示的反馈，并使用记录标识符（记录编号 + 标题）**提供指向记录的链接。**

# javascript - 为什么在javascript中填充二维数组失败？

> ID：14512608
> 
> 赞同：0
> 
> 时间：2013-01-24T23:15:29.067
> 
> 标签：javascript, arrays, multidimensional-array

我想填充一个二维数组，我在 javascript 中有这段代码：

```
n=2; //rows
m=3; //columns
z=0;
array1=[];
for(i=0;i<n;i++){
    for(j=0;j<m;j++){
        array1[i]=[];
        array1[i][j] = z;
        console.log(i+","+j+"="+z); //debug
        z++;
    }

}

console.log(array1); 
```

但是没有得到这个预期的结果；

```
[[0, 1, 2], [3, 4, 5]] 
```

我得到：

```
[[undefined, undefined, 2], [undefined, undefined, 5]] 
```

为什么！？我不明白为什么我对每个“内部”数组中的所有项目都*没有定义*，除了最后一个是正确的（这里是 2 和 5）。

我做了一个调试步骤，记录了每一`i,j`对和分配的`z`值，我每次都得到正确的对值`(i,j=z)`：

```
0,0=0
0,1=1
0,2=2
1,0=3
1,1=4
1,2=5 
```

所以，我认为我`arr[i][j]=z`每次都正确地填充了数组，那么为什么对于这些​​情况它会得到未定义呢？我也尝试在这两种情况下使用`arr=new Array()`而不是`arr=[]`语法，但结果相同。

有任何想法吗？我几乎可以肯定这将是一个微不足道的错误，但我找不到问题所在！

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T23:17:13.367

您在每次循环迭代中重新初始化空数组：

```
array1[i]=[]; 
```

当每个`i`. 将初始化移出最内层循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:17:19.523

应该是这样的

```
n=2; //rows
m=3; //columns
z=0;
array1=[];
for(i=0;i<n;i++){
    array1[i]=[];
    for(j=0;j<m;j++){
        array1[i].push(z); // Here is my change
        console.log(i+","+j+"="+z); //debug
        z++;
    }

} 
```

# perl - perl中删除通配符

> ID：14512612
> 
> 赞同：0
> 
> 时间：2013-01-24T23:16:02.527
> 
> 标签：perl, wildcard

我是 Perl 的新手，但我认为以下应该可行。我有一个更大的 perl 脚本的以下片段

```
@mylist = ("${my_dir}AA_???_???.DAT", "${my_dir}AA???.DAT");

foreach my $list (@mylist) {
    if (-e $list) {
        system ("cp ${list} ${my_other_dir}");
    }
} 
```

上面的代码片段无法找到那些通配符，`AA_???_???.DAT`但它确实能够找到带有通配符的文件名`AA???.DAT`

我也尝试将文件删除`AA??_???.DAT`为

```
unlink(glob(${my_dir}AA_???_???.DAT")) 
```

但脚本只是挂断了。但它可以使用以下方法删除匹配的文件`AA???.DAT`：

```
unlink(glob("${my_dir}AA???.DAT)) 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:25:51.270

`-e $list`检查文件是否存在，因此对两者都返回 false`AA_???_???.DAT`或`AA???.DAT`（除非您实际上有确切命名的文件）。一个有效而另一个无效，这不是真的。

`unlink(glob(${my_dir}AA_???_???.DAT"))`挂起也不是真的。对于初学者，它甚至无法编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:15:59.943

我会使用`opendir`和`readdir`内置函数（从文档示例修改）：

```
opendir(my $dh, $some_dir) || die "can't opendir $some_dir: $!";
@mylist = grep { /^(.AA_..._...\.DAT|AA...\.DAT)$/ && -f "$some_dir/$_" } readdir($dh);
closedir $dh; 
```

然后你可以插入你的原始代码：

```
foreach my $list (@mylist) {
    if (-e $list) {
        system ("cp $some_dir/${list} ${my_other_dir}/");
    }
} 
```

对于目录递归文件操作，我真的很喜欢使用 File::Find CPAN 模块。这将遍历子目录，将每个文件传递给指定的子例程以处理该文件。举个例子：

```
#! /usr/bin/perl

use strict;
use warnings;
use File::Find;

my @dirs='/path/to/dir';
my $my_other_dir='/path/to/otherdir';

find(&process_files, @dirs);

sub process_files {
    my($file) = $_;
    my($fullpath) = $File::Find::name;

    return if($file !~ /^AA_..._...\.DAT$/ and
        $file !~ /^AA...\.DAT$/);

    system ("cp $fullpath $my_other_dir/");
} 
```

# jquery - 在jQuery中遍历这个节点

> ID：14512614
> 
> 赞同：1
> 
> 时间：2013-01-24T23:16:07.217
> 
> 标签：jquery, ajax

我正在尝试遍历从 AJAX 调用返回的此节点，但这样做时遇到问题。我正在尝试访问`name`位于`facet/#/@attributes/name`. 我目前处于该`#`级别，但对如何访问该`@ attributes`级别感到困惑。

```
console.log(data.categories); //outputs what you see below.
$(data.categories.facet).each( function(key, value) {
    console.log(key + ' : ' + value.attributes); //outputs undefined
}); 
```

![在此处输入图像描述](../Images/011d72d07806927b3536f20a3217df91.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:27:36.577

您必须使用方括号表示法`[]`来访问包含特殊字符（如`@`in ）的对象的属性`@attributes`。

```
console.log(key + ' : ' + value['@attributes'].name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:20:28.560

我不习惯我认为是 chrome 的控制台。

但是 facet[0].name 不返回“评级”吗？

# animation - Adobe Edge - 成长圈动画

> ID：14512616
> 
> 赞同：0
> 
> 时间：2013-01-24T23:16:18.977
> 
> 标签：animation, text, adobe-edge

我正在 Adob​​e Edge 中制作产品网站。我有一个圆形 div，需要在鼠标悬停时在 2 秒内增长。然后必须出现一个文本。当鼠标移出时，文本必须消失并做反向动画回到正常大小。圆圈也必须从它的中心开始，而不是从左上角开始。我一直在尝试使用 jquery 和 css3 动画来做这几个小时，但未能得到令人满意的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:23:34.127

边缘动画很容易做到这一点。

1.  制作你的圆圈元素。
2.  在时间轴上的 00:00 处为圆圈的宽度和高度设置一个关键帧。
3.  按 Q（变换工具）或选择屏幕左上角箭头右侧的图标。
4.  变换工具根据原点缩放事物，原点是可重新定位的，但会自动位于所选对象的中心。
5.  转到时间轴上的 02:00。
6.  调整你的圈子。
7.  将文本的关键帧设置为 0 不透明度。
8.  在时间线上前进。
9.  为您的文本设置另一个关键帧，不透明度为 100%。
10.  将圆圈和文本分组到一个 div 中。
11.  右键单击该 div，然后按“转换为符号”。
12.  点击预览窗口左上角的“舞台”返回舞台。
13.  选择要用于触发动画的对象。
14.  打开该对象的操作。
15.  将以下代码粘贴到鼠标悬停事件中： var mySymbolObject = sym.getSymbol("INSERT THE NAME OF YOUR SYMBOL").play();
16.  现在创建一个 mouseout 事件并粘贴以下代码： var mySymbolObject = sym.getSymbol("INSERT THE NAME OF YOUR SYMBOL").playReverse();

现在应该发生的是 onMouseOver，该符号的时间线正向播放，onMouseOut，该符号的时间线反向播放。这样，如果动画进行到一半并且鼠标移开，它将从原来的位置反转到开始处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T22:28:40.410

如果您将文本 div 嵌套在圆形 div 中，您可能还想使用 mouseenter/mouseleave 事件而不是 mouseover/mouseout。

[http://www.bennadel.com/blog/1805-jQuery-Events-MouseOver-MouseOut-vs-MouseEnter-MouseLeave.html](http://www.bennadel.com/blog/1805-jQuery-Events-MouseOver-MouseOut-vs-MouseEnter-MouseLeave.html)

# jsf - Ejb 动作事件更新

> ID：14512619
> 
> 赞同：0
> 
> 时间：2013-01-24T23:16:29.493
> 
> 标签：jsf, ejb

我有两页，一页有一个命令按钮（第 1 页），带有一个更新数据库的支持操作事件。另一页有一个数据表，显示该数据库的值。（第 2 页）

当我在第 1 页触发该命令并导航到第 2 页时，数据表没有更新。我正在使用 primeface (jsf) 和 ejb。

所以我想知道是否`Requestcontext.update(":page2:datatable")`会更新第二页上的数据表，或者是否有更好的方法来更新数据表。

# python - 有没有办法覆盖 Python 中任意对象的双下划线（魔术）方法？

> ID：14512620
> 
> 赞同：6
> 
> 时间：2013-01-24T23:16:36.497
> 
> 标签：python, object, magic-methods, getattr, getattribute

我想编写一个包装类，它接受一个值并且除了添加一个“原因”属性外，它的行为就像它一样。我有这样的想法：

```
class ExplainedValue(object):
    def __init__(self, value, reason):
        self.value = value
        self.reason = reason

    def __getattribute__(self, name):
        print '__getattribute__ with %s called' % (name,)
        if name in ('__str__', '__repr__', 'reason', 'value'):
            return object.__getattribute__(self, name)
        value = object.__getattribute__(self, 'value')
        return object.__getattribute__(value, name)

    def __str__(self):
        return "ExplainedValue(%s, %s)" % (
            str(self.value),
            self.reason)
    __repr__ = __str__ 
```

但是，双下划线函数似乎没有被捕获`__getattribute__`，例如：

```
>>> numbers = ExplainedValue([1, 2, 3, 4], "it worked")
>>> numbers[0]

Traceback (most recent call last):
  File "<pyshell#118>", line 1, in <module>
    numbers[0]
TypeError: 'ExplainedValue' object does not support indexing
>>> list(numbers)
__getattribute__ with __class__ called

Traceback (most recent call last):
  File "<pyshell#119>", line 1, in <module>
    list(numbers)
TypeError: 'ExplainedValue' object is not iterable 
```

我认为以上两个最终应该这样做：

```
>>> numbers.value[0]
__getattribute__ with value called
1

>>> list(numbers.value)
__getattribute__ with value called
[1, 2, 3, 4] 
```

为什么这没有发生？我怎样才能让它发生？（在实际代码中实际使用这可能是一个可怕的想法，但我现在对技术问题很好奇。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T23:37:36.703

正如 millimoose 所说，一个隐式`__foo__`调用永远不会通过`__getattribute__`。您唯一能做的就是将适当的函数添加到您的包装类中。

```
class Wrapper(object):
    def __init__(self, wrapped):
        self.wrapped = wrapped

    for dunder in ('__add__', '__sub__', '__len__', ...):
        locals()[dunder] = lambda self, __f=dunder, *args, **kwargs: getattr(self.wrapped, __f)(*args, **kwargs)

obj = [1,2,3]
w = Wrapper(obj)
print len(w) 
```

类主体是像任何其他块一样执行的代码（好吧，除了`def`）；你可以把循环和任何你想要的东西放在里面。它们的神奇之处在于将整个本地范围传递到`type()`块的末尾以创建类。

`locals()`这也许是分配到甚至远程有用的唯一情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T19:42:20.827

为了后代，这就是我想出的：

```
class BaseExplainedValue(object):
    def __init__(self, value, reason):
        self.value = value
        self.reason = reason

    def __getattribute__(self, name):
        if name in ('value', 'reason'):
            return object.__getattribute__(self, name)
        value = object.__getattribute__(self, 'value')
        return object.__getattribute__(value, name)

    def __str__(self):
        return "<'%s' explained by '%s'>" % (
            str(self.value),
            str(self.reason))
    def __unicode__(self):
        return u"<'%s' explained by '%s'>" % (
            unicode(self.value),
            unicode(self.reason))
    def __repr__(self):
        return "ExplainedValue(%s, %s)" % (
            repr(self.value),
            repr(self.reason))

force_special_methods = set(
    "__%s__" % name for name in (
        'lt le eq ne gt ge cmp rcmp nonzero call len getitem setitem delitem iter reversed contains getslice setslice delslice' + \
        'add sub mul floordiv mod divmod pow lshift rshift and xor or div truediv' + \
        'radd rsub rmul rdiv rtruediv rfloordiv rmod rdivmod rpow rlshift rrshift rand rxor ror' + \
        'iadd isub imul idiv itruediv ifloordiv imod ipow ilshift irshift iand ixor ior' + \
        'neg pos abs invert complex int long float oct hex index coerce' + \
        'enter exit').split(),
)

def make_special_method_wrapper(method_name):
    def wrapper(self, *args, **kwargs):
        return getattr(self, method_name)(*args, **kwargs)
    wrapper.__name__ = method_name
    return wrapper

def EXP(obj, reason="no reason provided"):
    if isinstance(obj, BaseExplainedValue):
        return obj

    class ThisExplainedValue(BaseExplainedValue):
        pass
    #special-case the 'special' (underscore) methods we want
    obj_class = obj.__class__
    for method_name in dir(obj_class):
        if not (method_name.startswith("__") and method_name.endswith("__")): continue
        method = getattr(obj_class, method_name)
        if method_name in force_special_methods:
            setattr(ThisExplainedValue, method_name, make_special_method_wrapper(method_name))

    ThisExplainedValue.__name__ = "%sExplainedValue" % (obj_class.__name__,)
    return ThisExplainedValue(obj, reason) 
```

用法：

```
>>> success = EXP(True, "it went ok")
>>> if success:
        print 'we did it!'

we did it!
>>> success = EXP(False, "Server was on fire")
>>> if not success:
        print "We failed: %s" % (EXP(success).reason,)

We failed: Server was on fire 
```

解释的值可以与它们包装的值互换使用：

```
>>> numbers = EXP([1, 2, 3, 4, 5], "method worked ok")
>>> numbers
ExplainedValue([1, 2, 3, 4, 5], 'method worked ok')
>>> numbers[3]
4
>>> del numbers[3]
>>> numbers
ExplainedValue([1, 2, 3, 5], 'method worked ok') 
```

它甚至愚弄`isinstance`（[这里](https://stackoverflow.com/questions/14529190/why-does-overriding-getattribute-to-proxy-a-value-screw-up-isinstance)解释）：

```
>>> isinstance(EXP(False), bool)
True
>>> isinstance(EXP([]), list)
True 
```

# mysql - 根据另一个 MySQL 表的信息显示一个表的结果

> ID：14512622
> 
> 赞同：0
> 
> 时间：2013-01-24T23:16:48.587
> 
> 标签：mysql, sql

我已经尝试解决这个问题很长时间了，我放弃了。我从一张桌子上获取信息，没问题。但我需要根据另一个表中的信息排除一些结果。

* * *

```
querylist

id | artist         | title 
1  | Kelly Clarkson | Catch My Breath
2  | Nicki Minaj    | Va Va Voom
3  | Jingle         | Jingle100 
```

* * *

```
songlist

id | artist         | title           | songtype
1  | Kelly Clarkson | Catch My Breath | S
2  | Nicki Minaj    | Va Va Voom      | S
3  | Jingle         | Jingle100       | I 
```

* * *

当我从查询列表表中获得结果时，我想从歌曲列表表中排除所有没有歌曲类型 S 的歌曲。

我有这个，我如何才能获得只有歌曲类型 S 的歌曲？

```
$result = mysql_query("SELECT * FROM queuelist q LEFT JOIN requestlist r ON q.requestid = r.id LEFT JOIN songlist s ON q.songid = s.id ORDER BY q.sortID ASC LIMIT 5 ",$dbcon);

 echo "<table>\n";
 if ($myrow = mysql_fetch_array($result)){
    do{
      $artist = $myrow["artist"]; 
      $title = $myrow["title"];
      echo "<tr><td>$artist - $title</td>";
      echo "</tr>\n";

   }while($myrow = mysql_fetch_array($result));
 }
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:19:19.363

为了清楚起见：添加：WHERE s.songtype='S'

```
SELECT * FROM queuelist q 
LEFT JOIN requestlist r ON q.requestid = r.id 
LEFT JOIN songlist s ON q.songid = s.id  
WHERE s.songtype='S' 
ORDER BY q.sortID ASC LIMIT 5 
```

# mongodb - 如何指定从查询中排除文档的条件？

> ID：14512634
> 
> 赞同：4
> 
> 时间：2013-01-24T23:17:28.313
> 
> 标签：mongodb

这似乎是一个足够简单的问题，但我还没有找到答案：我正在使用 MongoDB，我想执行一个提供搜索条件的查询，但我也想排除基于某些文档被排除的例外情况关于标准。例如，想象一个包含字段`name`和`age`的集合`gender`。

检索特定年龄以下的所有人？简单：`<collection>.find({'age':{'$lt':<maxAge>}})` 检索所有低于特定年龄的女性？小菜一碟：`<collection>.find({'gender':female, 'age':{'$lt':<maxAge>}})`

但是如果他们是[女性且低于一定年龄？]，那么检索每个人怎么样。您可以使用 '$ne' 运算符轻松否定特定字段，但是如何否定符合一组条件的每个人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:24:33.000

您必须应用布尔逻辑将 AND 分别反转为每个术语的否定的 OR：

```
collection.find({$or: [{age: {$gte: maxAge}}, {gender: {$ne: 'female'}}]}) 
```

或者

```
collection.find({$or: [{age: {$not: {$lt: maxAge}}}, {gender: {$ne: 'female'}}]}) 
```

# java - 使用 s:iterator ognl.Noconversionpossible 问题的 Java Struts2 复选框

> ID：14512637
> 
> 赞同：2
> 
> 时间：2013-01-24T23:17:40.887
> 
> 标签：java, struts2, iterator, ognl

我在动作类中有 list.add(int,String) 。我在我的jsp页面中得到这个列表

```
<s:iterator value="list" var="emc" status="status">
  <s:checkbox name="selectedCoverage" fieldValue="%{#emc.dataId}" />
  <s:label value="%{#emc.PersonName}" />
</s:iterator> 
```

现在我有三个复选框，用户没有选择任何复选框并点击提交，这应该会引发验证错误。我在动作类中有此复选框的获取器和设置器。

当我调试代码并查看 selectedCoverage 的值时，它向我显示的是 ognl.NoConversionPossibe 而不是 null。有什么问题，我哪里出错了？

# javascript - 删除以前的元素后如何动画元素向上移动？

> ID：14512639
> 
> 赞同：0
> 
> 时间：2013-01-24T23:17:53.860
> 
> 标签：javascript, jquery, css

所以我有这个示例代码：

```
<ul>
  <li class="class1">row1</li>
  <li class="removeme">row2</li>
  <li class="removeme">row3</li>
  <li class="removeme">row4</li>
  <li class="class1">row5</li>
</ul>

//Javascript
$('.removeme').remove(); 
```

删除所有 removeme 元素后，如何使 row5 元素向上移动？我的 css3 过渡也设置好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:23:37.883

我不确定你在 css3 中设置了什么，但下面是你可以用 jQuery 做什么。

```
$('.removeme').animate({height: 0}, 2000, function () {
    $(this).remove();
}); 
```

**演示：http:** [//jsfiddle.net/MwYH5/](http://jsfiddle.net/MwYH5/)

如果您希望将其**一一**删除，则可以像下面这样链接。

# **演示：http:** [//jsfiddle.net/MwYH5/1/](http://jsfiddle.net/MwYH5/1/)

```
(function removeNext(jq) {
    jq.eq(0).animate({height: 0}, 1000, function () {
        $(this).remove();
        (jq = jq.slice(1)).length && removeNext(jq);            
    });
})($('.removeme')) 
```

**参考： http:** [//paulirish.com/2008/sequentially-chain-your-callbacks-in-jquery-two-ways/#comment-24910](http://paulirish.com/2008/sequentially-chain-your-callbacks-in-jquery-two-ways/#comment-24910)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:23:45.120

您可以将“删除我”的 li 放在一个容器中（如跨度）并折叠该容器。

```
$(container).fadeTo(200,0).animate({height: 0}); 
```

类似的东西。

# android - Android：String [] 数组，迭代并匹配存储在 String [] 中的答案

> ID：14512640
> 
> 赞同：0
> 
> 时间：2013-01-24T23:18:02.923
> 
> 标签：android, arrays

应用程序的用户提交一个字符串数组。我想将数组与预定义的 id 列表进行匹配。并将其存储在一个新数组中。任何人都知道如何做到这一点:)？

ID 必须预先定义。并且需要匹配正确的“字符串数组名”。就像在示例中一样，如果用户选择 1，则最终 String 数组中的输出必须是 id_1。所以我需要根据 ID 数组检查用户选择，以确定选择了什么，之后我需要将原始选择转换为正确的 ID。

**像这样 ：**

```
//User chose these items from a listview.
String [] choices = { "1","2","3" };

// Predefined values.
String id_1 = "1";
String id_2 = "2";
String id_3 = "3";

//Sorts out, and switches the choices with the id.
Some code to do this; 

String [] sorted_choices = {"id_1","id_2", "id_3"}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:53:56.640

如果 ListView 中的项目与其 id 的顺序相同，则可以使用[getCheckedItemPosition()](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemPosition%28%29)来检索 id 的值。（您可能需要添加 1。文档没有说明返回值是从 0 开始还是从 1 开始。）

如果这是不可能的，那么您将需要使用一些数据结构将 id 与 ListView 中的项目相关联。听起来`Map`可能是适合您情况的正确工具。

# c++ - boost ptr_map 替换值

> ID：14512642
> 
> 赞同：4
> 
> 时间：2013-01-24T23:18:20.153
> 
> 标签：c++, boost

给定一个键，我试图替换一个值。对于不使用指针的常规地图，我只是使用了以下调用

```
iter->second = object; //Where object was passed in by reference 
```

如何使用 boost::ptr_map 实现相同的效果？这里的概念是我们使用derived_object替换整个类

```
iter->second = derived_object; //derived_object is a base_object pointer 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T00:54:17.820

这可以解决问题：

```
the_map.replace(iter, derived_object); 
```

哪里，当然`the_map`是地图分成了哪些`iter`点。

请注意，它`ptr_map<K,V>::replace`返回 a `ptr_map<K,V>::auto_type`，因此您可以根据需要获取替换的对象。当然，如果你忽略它，它会自动销毁，你永远不需要知道它在那里。

# java - 绑定netbeans组合框选定项时出现Java PropertyResolutionException

> ID：14512654
> 
> 赞同：0
> 
> 时间：2013-01-24T23:19:36.647
> 
> 标签：java, swing, user-interface, netbeans, jcombobox

我有一个`JComboBox`我在 Netbeans GUI 设计器中设计的。我已成功地将框的“元素”绑定到 an`ArrayList<String>`以便框正确填充。但是，它当前会自动将列表的第一个元素显示为`selectedItem`.

起初我试图将其绑定`selectedItem`到一个`int`，认为它只会在指定的索引处显示该项目。不去。我有一个我不明白的巨大异常。

然后，我注意到在“绑定”窗口中，它说元素必须是`Object`. 因此，我将它绑定到 a `String`，认为它会找到与该字符串匹配的元素并显示该元素。没有骰子。现在我得到某种“ `PropertyResolutionException`”。我什至尝试使用具有相同结果的 Integer 对象。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:09:26.397

没有你的[sscce](http://sscce.org/)，很难说哪里出了问题。作为参考，本[示例](https://stackoverflow.com/a/11949899/230513)[`setSelectedItem()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#setSelectedItem%28java.lang.Object%29)中宣传的作品按名称选择 L&F。

![图片](../Images/f689e0e8073fc99a1806ee2fe771f8fa.png)

# c# - 我应该 * 真的 * 调用 DataBind() 吗？

> ID：14512657
> 
> 赞同：1
> 
> 时间：2013-01-24T23:19:54.580
> 
> 标签：c#, asp.net, data-binding, lifecycle

我有一个 CustomControl，当在页面上使用时，它需要将来自服务器端值的值作为属性。我试过这个...

```
<MyControl runat="server"
           ID="MyControl1"
           ContainerId="<%= this.ClientID %>" /> 
```

现在，当运行时（为了解释起见，假设我知道它的值`this.ClientID`是“ctl00_MyControl1”），如果我在客户端测试它的值`ContainerId`返回为“<%= this.ClientID %>” .

在没有真正理解原因的情况下，我尝试了这个......

```
<MyControl runat="server"
           ID="MyControl1"
           ContainerId="<%# this.ClientID %>" /> 
```

但测试 的值`ContainerId`显示该值为空！

更多阅读使我看到 <%# %> 机制是用于数据绑定的，但很明显，我的控件没有这样做（假设我的 CustomControl 继承自 TextBox）。

因此，我添加了对`DataBind()`包含`OnLoad`我的 CustomControl 的 UserControl 事件的调用。

耶！有效。但是，在处理 Page 上的某些事件时，对 的调用会`DataBind()`产生异常。异常发生在另一个控件中，该控件包含在与 相同的 UserControl 容器中`MyControl1`。

消息是

```
Selection out of range
Parameter name: value 
```

堆栈跟踪像这样完成......

```
 at Telerik.Web.UI.RadComboBox.PerformDataBinding(IEnumerable dataSource)
   at Telerik.Web.UI.RadComboBox.OnDataSourceViewSelectCallback(IEnumerable data)
   at System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback)
   at Telerik.Web.UI.RadComboBox.OnDataBinding(EventArgs e)
   at Telerik.Web.UI.RadComboBox.PerformSelect()
   at System.Web.UI.WebControls.BaseDataBoundControl.DataBind()
   at Telerik.Web.UI.RadComboBox.DataBind()
   at System.Web.UI.Control.DataBindChildren()
   at System.Web.UI.Control.DataBind(Boolean raiseOnDataBinding)
   at System.Web.UI.Control.DataBind() 
```

现在，我**不是**在寻找解决此异常的方法。我把它包括在内是为了证明我相信我的呼召`DataBind()`不一定是正确的事情。

所以，问题：

1.  为什么 <%= %> 在运行时没有给出我期望的值？
2.  `DataBind()`每当 UserControl 的`OnLoad`事件触发正确的事情以在运行时获取我的值时调用，如果是，
3.  在打电话之前我应该​​检查哪些条件`DataBind()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:43:02.237

```
"`<%= this.ClientID %>`" 
```

在渲染时调用并且当时`ClientID`尚未设置。

```
"`<%# this.ClientID %>`" 
```

在控件或页面期间调用`DataBind()`。如果您要使用最后一个，那么您确实应该调用`DataBind()`并修复您的异常。

# symfony - 如何以编程方式对用户进行身份验证

> ID：14512664
> 
> 赞同：4
> 
> 时间：2013-01-24T23:21:21.753
> 
> 标签：symfony

我有一个控制器，它应该通过一个简单的表单添加用户，但我无法让用户进行手动身份验证。

```
use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken    

public function addAction($user)
    {
           $token =new UsernamePasswordToken(
                    $user->getUsername(),
                    $user->getPassword(),
                    'secured_area',
                   $user->getRoles()
                    );

           $this->get('security.context')->setToken($token);
           // as suggested in some other answers

           $request->getSession()->set('_security_secured_area', serialize($token));
           // as suggested in http://techblog.zabuchy.net/2012/manually-authenticate-symfony-2-user/

            return $this->redirect($this->generateUrl('acme_project_secure_show' )
                    );
        }
    } 
```

重定向到安全路由有效，但是由于身份验证设置不`$this->getUser()`正确，该 方法返回 null [...](http://symfony.com/doc/current/book/security.html#retrieving-the-user-object)`$user= $this->get('security.context')->getToken();``$user= $this->get('security.context')->getToken()->getUser();``$this->getUser()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T22:43:47.153

问题已解决 - 缺少两点：1) 有必要`InteractiveLoginEvent`为链接发送 -thanks mpm 2) 此控制器的路由不在`secured_area`防火墙下 - 谢谢 Florian ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:56:40.903

你可以试试这个

```
use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken

$token = new UsernamePasswordToken($user, $user->getPassword(), "firewallname", $user->getRoles()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T09:19:40.143

正如@user19340357 所说，您可以手动实例化令牌。

他忘记说的是你应该在安全上下文中设置它：

```
use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken

$token = new UsernamePasswordToken($user, $user->getPassword(), "firewallname", $user->getRoles());
$securityContext = $this->container->get('security.context'); // do it your way
$securityContext->setToken($token); 
```

# php - IF 语句不适用于 OR

> ID：14512665
> 
> 赞同：0
> 
> 时间：2013-01-24T23:21:23.087
> 
> 标签：php

出于某种奇怪的原因，我无法终生调试它.. $this->input->post('post_page') = 10...。我回显了变量，它确实在屏幕上打印了 10。当它应该是真的时，这会一直返回假......所以......有人可以帮我解决这个问题吗？我尝试在每个检查周围加上单独的括号并更改 || 到 OR.. 还是什么都没有。

这是我的代码：

```
if($this->input->post('post_page') <> 10 
                || $this->input->post('post_page') <> 25 
                || $this->input->post('post_page') <> 50 
                || $this->input->post('post_page') <> 75) {
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T23:22:24.380

<> 等价于不等于。

10 不等于 25，因此它将进入 if 语句并返回 false；

事实上，它总是会输入那个 if 语句，不管数字是多少

你可以这样做：

```
if($this->input->post('post_page') <> 10 
                && $this->input->post('post_page') <> 25 
                && $this->input->post('post_page') <> 50 
                && $this->input->post('post_page') <> 75) {
            return false;
        } 
```

在伪代码中：

```
IF 
MY NUMBER IS NOT 10 
AND IT IS NOT 25
AND IT IS NOT 50 
AND IT IS NOT 75
    RETURN FALSE 
```

甚至更好：

```
$allowedNumbers =  array(10,25,50,75);
if(!in_array($this->input->post('post_page'), $allowedNumbers)) {
    return false;
} 
```

也更容易将新项目添加到列表中。您添加到数组中的任何数字都不会返回 false。

这个伪代码：

```
ALLOWED NUMBERS ARE 10,25,50,75
IF(MYNUMBER IS NOT IN THE LIST OF ALLOWED NUMBERS)
    RETURN FALSE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:29:38.027

我认为你应该使用

```
if(!($this->input->post('post_page') == 10 
                || $this->input->post('post_page') == 25 
                || $this->input->post('post_page') == 50 
                || $this->input->post('post_page') == 75)) {
            return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T23:24:03.463

翻译成布尔值：假或真或真或真。表达式为真，因此它返回假。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T23:29:46.397

```
(                          #
   (A is not B)            #  IS ALWAYS TRUE
   OR (A is not C)         #  --------------------------
   OR (A is not D)         #  Unless 2 conditions (AND):
   OR (A is not E)         #    . A is not B
)                          #    . B = C = D = E 
```

所以是的，在你的情况下，这将永远是 FALSE，对不起。

# algorithm - 算法：如何在每周时间配额内/从每周时间配额内安排/分配时间？

> ID：14512671
> 
> 赞同：3
> 
> 时间：2013-01-24T23:22:04.170
> 
> 标签：algorithm, date, math, time

如果我有 5days*(8hourWorkday-2hoursForUnexpectedWork) = 每周 30 小时的使用时间，我如何以编程方式安排任务来填补这 30 小时？

例如，我有 5 个任务，我估计每个任务将花费以下时间：

```
#1:  2h
#2:  4h
#3:  6h
#4:  8h
#5: 10h 
```

我该如何分类说：

```
M: #1 @ 2h + #2 @ 4h
T: #3 @ 6h
W: #4 @ 6h
H: #4 @ 2h + #5 @ 4h
F: #5 @ 6h 
```

换句话说，如何解释“迭代和容器溢出”？

最终，我还需要能够考虑超出一周的任务，例如，如果前面的示例我有一个任务`#6: 40h`（本身比一周多 10 小时，并且将每周总和额外增加 40 小时，这将需要溢出前两周）。

# 编辑：

第二个更复杂的例子，同样有 5 个任务，这次有（可选的）星期几要求：

```
#1:  2h, W[0][M]
#2:  4h, W[0][T]
#3:  6h, W[0][M]
#4:  8h, W[0][F]
#5: 40h, W[0][F] 
```

我该如何排序，比如说，

```
W[-1][M]: #5 @ 6h
W[-1][T]: #5 @ 6h
W[-1][W]: #5 @ 6h
W[-1][H]: #5 @ 6h
W[-1][F]: #3 @ 2h + #5 @ 4h
W[ 0][M]: #1 @ 2h + #3 @ 4h
W[ 0][T]: #2 @ 4h + #5 @ 2h
W[ 0][W]: #5 @ 6h
W[ 0][H]: #4 @ 2h + #5 @ 4h
W[ 0][F]: #4 @ 6h 
```

![插图#1](../Images/f5eee6d9f8ad1e9507d3d6a6c9e80f7f.png)

最好的情况实际上是 #3 将 #1 推后一天，如下所示： ![插图#2](../Images/c29cee635c8f81d7728464e4b6cc6c29.png)

## 进一步澄清：

*   对于一周中的每个指定日期 (MTWHF)，最多填写 6 个小时的时间。
*   如果有溢出，溢出到前一天。
*   理想情况下，这种溢出将以背包或类似优化的方式发生，这样 6 小时将尽可能完全地被整个/不间断的任务填满。
*   同样，对于溢出的日子，他们也应该将溢出调整为不破坏整个任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:42:09.760

除非我遗漏了什么，否则这似乎是一个已解决的问题。如果任务是动态分配的（这在现实环境中似乎很可能），那么只要利用率保持可控，[最早截止日期优先调度就可以满足所有截止日期。](http://en.wikipedia.org/wiki/Earliest_deadline_first_scheduling)由于只有在新工作出现时才会抢占工作，因此这应该会降低上下文切换开销和相当好的工作连续性。这是一个简单的启发式算法，在文献中受到了一些关注，因此很多猜测都被排除在外了。

编辑：示例。

```
#1:  2h, W[0][M]
#2:  4h, W[0][T]
#3:  6h, W[0][M]
#4:  8h, W[0][F]
#5: 40h, W[0][F]

EDF order: #1, #3, #2, #4, #5.

Schedule: 113333332222444444445555555555555555555555555555555555555555

In days: 113333 332222 444444 445555 555555 555555 555555 555555 555555 555555 
```

请注意，通过采用此先验调度并对 EDF 调度的结果进行后处理，我们可以在连续性方面做得更好。假设我们在一天开始时以及每当数字发生变化时都有一些上下文切换开销，那么这个时间表会产生 13 个上下文切换，其中只有 10 个是强制性的。使用时间表#3、#1、#2、#4、#5，我们得到 12 个上下文切换。我知道这个问题最初是想最小化上下文切换。然而，在这方面的最佳调度算法只会比 EDF 做得更好，因为它会将真正的上下文切换隐藏在强制性的上下文切换中（在一天开始时发生）。如果可以按时完成，EDF 的优势在于保证您始终按时完成任务。这是一个权衡，但我认为 EDF 应该点头。

还要考虑[速率单调调度](http://en.wikipedia.org/wiki/Rate-monotonic_scheduling)（以您的截止日期为周期），这可能更适合静态确定的调度，特别是如果分配的任务有任何规律性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:26:55.863

听起来像[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)。wiki 为这个问题提供了一些解决方案，但大多是通过动态编程解决的。

# sublimetext2 - 代码的配色方案不起作用 - Sublime Text 2

> ID：14512672
> 
> 赞同：7
> 
> 时间：2013-01-24T23:22:04.637
> 
> 标签：sublimetext2, color-scheme

有时 Sublime Text 2 会用它的配色方案识别我的代码，有时它不会。我做了很多将代码粘贴到代码编辑器中并对其进行编辑的工作，但我很少在其中编写代码，主要是编辑我的旧代码。配色方案真的很有帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-04T11:53:24.270

您还可以通过单击右下角的“纯文本”打开一个可供选择的语言列表来设置编码语言。单击相关语言，Sublime 将根据您的选择进行着色。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T17:01:57.213

如果您只是打开新文件并粘贴文本，则默认语法为“纯文本”，因此不会突出显示。您可以通过打开命令面板并搜索“Set Syntax:”来设置缓冲区中的语法。如果这不是正在发生的事情，请尝试提供更多信息。

-斯库罗达

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-22T16:18:40.280

转到彩色页面并仅复制 < ? 和顶部的 php。转到白色文本页面并突出显示/粘贴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-26T11:14:01.323

这对我有用。我在使用 Arduino 颜色编码时遇到了问题，但现在我借助这个技巧解决了这个问题。您还可以通过单击右下角的“纯文本”打开一个可供选择的语言列表来设置编码语言。单击相关语言，Sublime 将根据您的选择进行着色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-04T12:44:07.973

Javascript 语法对我不起作用，所以改为 Java。出现色差。

# android - 带有 PlayN 的运行时资源文件

> ID：14512673
> 
> 赞同：1
> 
> 时间：2013-01-24T23:22:11.860
> 
> 标签：android, mobile, playn

开发一款允许用户使用 PlayN 选择不同角色皮肤的游戏（以 Android 作为第一平台）。但是这些角色皮肤将在稍后提供（并且由于它们的大小，玩家可能不想下载所有皮肤）。因此，与其创建一个包含所有皮肤的大包，PlayN 有没有办法在运行时访问不同的资源文件？我们可以为玩家设置一个服务器后端来浏览最新的可用皮肤。

非常感谢任何帮助/指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:26:26.867

您可以使用`Assets.getRemoteImage`远程加载图像。

目前没有办法缓存下载的图像，这使得这对您的目的来说不是最佳的，但我将添加对缓存下载图像的支持，如果您使用纹理图集并且不使用它，它应该可以很好地工作有大量的图像要下载。

如果您确实需要一口气下载数十或数百张图像，那么您需要编写自定义的每个后端代码来处理它（并且您将不得不放弃使用 HTML 后端，因为它不能做任何事情比如下载一个 zip 文件并将其解压缩到本地存储中）。

# c++ - Eclipse 自动在 main 方法添加断点

> ID：14512674
> 
> 赞同：1
> 
> 时间：2013-01-24T23:22:24.013
> 
> 标签：c++, eclipse, breakpoints

> **可能重复：**
> [如何阻止 GDB 在 Eclipse 中默认执行“break main”？](https://stackoverflow.com/questions/4278532/how-to-stop-gdb-from-executing-break-main-by-default-in-eclipse)

我决定学习 C++（因为 Java 在某些方面并不擅长）所以我写了一个（非常）简单的程序。

```
#include <iostream>
using namespace std;

int main() {
    cout << "This is a test" << endl;
    int test = 100;
    cout << test << endl;
    return 0;
} 
```

它按预期工作，但 Eclipse 似乎在该`main`方法中添加了一个自动断点：

![http://i.imgur.com/HD1KxlX.png](../Images/c4ee7919c2dc3d0af2d453be35913bc4.png)

如何停止此自动断点插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:25:30.127

调试配置中有一个选项允许您*在启动时停止*（或类似），默认情况下启用。禁用它。

# scala - akka 以哪种方式实时？

> ID：14512677
> 
> 赞同：7
> 
> 时间：2013-01-24T23:22:27.687
> 
> 标签：scala, real-time, akka, actor, definition

在一些地方，akka 以某种方式是“实时的”。例如：

[http://doc.akka.io/docs/akka/2.0/intro/what-is-akka.html](http://doc.akka.io/docs/akka/2.0/intro/what-is-akka.html)

不幸的是，我无法找到更深入的解释，akka 是“实时”的。所以这是一个问题：

**akka 以哪种方式实时？**

我假设 akka 在以下定义的意义上并不是真正的实时计算系统，不是吗？：[https ://en.wikipedia.org/wiki/Real-time_computing](https://en.wikipedia.org/wiki/Real-time_computing)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T23:29:18.933

*除非*它使用支持实时扩展（并利用它们）的 JVM，否则构建在 JVM 上的任何语言都不能是实时的，因为它可以保证在一定时间内做出反应。这在技术上是不可能的——Akka 也不例外。

但是，与可能的情况相比，Akka 确实提供了对快速运行事物的支持，并且具有相当好的时机。在文档中，实时的其他定义（意味着在线、运行时、具有良好的平均延迟、足够快的你不会注意到延迟等）可能偶尔使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T13:04:01.083

由于akka是一个消息驱动的系统，实时的使用涉及到你提到的维基百科文章的定义之一`in the domain of data transfer, media processing and enterprise systems, the term is used to mean 'without perceivable delay'.`

“实时”在这里等同于“顺其自然”：事件/消息在产生时被有效地处理/消费（与“批处理”相反）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T15:58:43.463

Akka 可以作为*软实时*系统的基础，但不能作为硬实时系统的基础，因为 JVM 的限制。如果您在 Wikipedia 文章中向下滚动一点，您会发现“实时计算标准”部分，并且对不同的“实时性”标准有很好的解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:40:55.473

> 受“实时约束”约束的系统——例如从事件到系统响应的操作期限。

[en.wikipedia.org/wiki/Real-time_computing](https://en.wikipedia.org/wiki/Real-time_computing)

akka 家伙可能会提到像`future`s 这样的功能，这些功能允许您对计算的期望添加时间约束。

此外，akka 的聚类模型可以用来表示一个实时的在线系统（抽象以便看起来像它在本地运行）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T10:07:13.223

我的看法是，Akka 平台可以通过使用（我在这里引用）提供响应式应用程序来支持一种形式的实时约束：

*   异步、非阻塞和高性能的事件驱动编程模型
*   通过具有“让它崩溃”语义的主管层次结构容错
*   响应交付中超时策略的定义

如前所述，所有这些特性的结合为平台提供了某种形式的响应时间保证，特别是与当今 JVM 上可用的主流应用程序和工具相比。

根据维基百科的定义，声称 Akka 可以*严格*定义为*实时计算系统仍然是有争议的。*
要证明此类说法，您最好参考 Akka 团队本身。

# android - AndEngine 混淆取消注册 IUpdateHandler

> ID：14512678
> 
> 赞同：3
> 
> 时间：2013-01-24T23:22:33.420
> 
> 标签：android, andengine

如果这个问题有点新手，我很抱歉。我正在使用 AndEngine，我的问题是针对该框架的。假设我创建一个 IUpdateHandler 如下：

```
 this.registerUpdateHandler(new IUpdateHandler() {

        @Override
        public void onUpdate(float pSecondsElapsed) {
            doUpdate(pSecondsElapsed);
        }

        @Override
        public void reset() {
            // TODO Auto-generated method stub
        }
    }); 
```

在我的 doUpdate() 方法中，我有一些我需要的信息来确定是时候取消注册 IUpdateHandler 了。有一个方法，unRegisterUpdateHandler()，听起来很适合这个目的，但是为了使用它，我需要传递一些对 updatehandler 的引用，而我没有这样的引用。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:26:54.320

`IUpdateHandler`您提供的代码会创建您没有参考的匿名实例。相反，您应该首先将 created 存储`IUpdateHandler`在某个变量中，例如`IUpdateHandler myHandler = new IUpdateHandler() {...});`，然后使用`this.registerUpdateHandler(myHandler)`. 参考处理程序后，您可以使用您提到的方法取消注册它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:28:37.720

如果你在 updatehandler 里面，你可以通过这个取消注册它。如果您的更新处理程序已注册到场景

```
this.registerUpdateHandler(new IUpdateHandler() {

    @Override
    public void onUpdate(float pSecondsElapsed) {
        doUpdate(pSecondsElapsed);
    }

    @Override
    public void reset() {
         if (something) Scene.this.unregisterUpdateHandler(this);
    }
}); 
```

# asp.net-mvc - Asp.net MVC3 在 razor 和 aspx 视图引擎上并行工作

> ID：14512680
> 
> 赞同：0
> 
> 时间：2013-01-24T23:22:42.430
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

当我们使用新版本的 MVC 前进时，我想将我的视图从 aspx 视图引擎转换为剃须刀，但是很难一次性转换所有内容，因为它真的很大，是否可以并行进行。

我的意思是 MVC 是否允许很少有剃刀视图以及 aspx 视图并且运行时没有任何问题？或者有什么解决方法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:26:41.720

是的，MVC 允许您在一个项目中混合使用 ASPX 视图和 Razor 视图。

该框架非常灵活。我参与了几个同时使用 aspx 和 Razorviews 的网站。原因总是他们从一个转移到另一个。

在这些情况下，aspx 页面不会被大量更改。新页面普遍是 Razor，而 aspx 页面只有在已经对其进行了认真的工作或重新工作时才会被转换。

**跟进**

有很多 aspx 到 Razor 转换器。我不推荐这种方法，但请注意这是 Microsoft 的转换应用程序。

[http://visualstudiogallery.msdn.microsoft.com/d2bfd1ca-9808-417c-b963-eb1ea4896790](http://visualstudiogallery.msdn.microsoft.com/d2bfd1ca-9808-417c-b963-eb1ea4896790)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:27:56.997

你试过[http://razorconverter.codeplex.com/](http://razorconverter.codeplex.com/)吗？

看起来很有希望。

前段时间包含的控件有一些问题，但我不会更新。

# c++ - Alpha 级别为 0% 的 QPushButton 在鼠标悬停时变为实心。如何使用 C++ 修复 Qt（使用样式表？）

> ID：14512682
> 
> 赞同：1
> 
> 时间：2013-01-24T23:22:46.917
> 
> 标签：c++, qt, stylesheet, qpushbutton

我在 Qt Designer 中设计了两种不同的 QPushButton。一个是默认的，另一个我想清楚。在 QT Designer 中，我设置了后者的初始样式表，如下所示：

```
background-color: rgba( 35, 35, 35, 0% ); 
```

我希望按钮有一个边框并且清晰（内部颜色并不是很重要；这恰好与配色方案相匹配）。当我将鼠标悬停在按钮上时，我希望它保持清除，但是它变成了 35/35/35 的纯灰色。

当按钮收到信号按下时，我希望它变成半透明的绿色：

```
 background-color: rgba( 0, 255, 0, 50% ); 
```

在我意识到鼠标悬停会成为问题之前，我已经编写了以下代码：

```
QString MyPanel::FillInvisibleButton(bool activeButton)
{
  QString invisibleButton;

  if (activeButton) {
     invisibleButton = "QPushButton{background-color: rgba(0, 255, 0, 50%);}";
  } else {
     invisibleButton = "QPushButton{background-color: rgba(35, 35, 35, 0%);}";
  }
  return invisibleButton;
}

//Signals
void MyPanel::MyButtonPressed()
{
   m_ui->myButton->setStyleSheet(FillInvisibleButton(true));
}

void MyPanel::MyButtonReleased()
{
   m_ui->myButton->setStyleSheet(FillInvisibleButton(false));
} 
```

就在按下清除按钮时使清除按钮变为透明绿色而言，这非常有效......但是当它被鼠标悬停时，它上面有一个灰色的不透明大块，我想离开！

我试过这个：

```
 QString MyPanel::FillInvisibleButton(bool activeButton)
{
  QString invisibleButton;

  if (activeButton) {
     invisibleButton = "QPushButton{background-color: rgba(0, 255, 0, 50%);} QPushButton:hover{background-color: rgba(35, 35, 35, 0%);}";
  } else {
     invisibleButton = "QPushButton{background-color: rgba(35, 35, 35, 0%);} QPushButton:hover{background-color: rgba(35, 35, 35, 0%);}";
  }
  return invisibleButton;
} 
```

它根本不起作用。他们仍然将鼠标悬停在灰色上，现在他们根本不会变成绿色。

我的语法错了吗？或者？？我是 Qt 新手，对 C++ 非常生疏。我没有嫁给样式表。如果有更好的方法来完成它，那就太好了。请记住，我不能对所有按钮都这样做；只是其中几个。

谢谢！

ETA：我相信我正在使用 4.5.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:47:20.933

您不需要使用信号，样式表就足够了。试试这个：

```
QPushButton {
    background-color: rgba( 35, 35, 35, 0% );
    border: 1px solid black;
}

QPushButton:pressed {
    background-color: rgba( 0, 255, 0, 50% );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:08:27.083

在您的样式表中，您可以使用“悬停”伪状态：

```
button->setStyleSheet("QPushButton:hover { ... }"); 
```

# android - Android 服务如何接收按钮和操纵杆运动事件？

> ID：14512683
> 
> 赞同：0
> 
> 时间：2013-01-24T23:22:48.520
> 
> 标签：android, input, android-service

我希望能够从我正在开发的应用程序外部检测到控制器（按钮和操纵杆）的使用。像**[这样](https://play.google.com/store/apps/details?id=com.poke64738.usbjoy&hl=en)**的应用程序能够拦截操纵杆事件，所以我知道这是可能的。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:05:18.490

没有这样的方法可以从应用程序外部检测对控制器的任何使用。您所说的可能是单击它或某些操作时发送广播。然后你可以注册一个 BroadcastReceiver 来检测它。

# .net - WPF RichTextBox 中不同的字符间距

> ID：14512687
> 
> 赞同：1
> 
> 时间：2013-01-24T23:23:07.490
> 
> 标签：.net, wpf, xaml, kerning

我有一个自定义控件。它扩展了 RichTextBox。

我有设置文档宽度的代码，以便限制字符数。（我使用的是 Courier New，所以我有一个固定宽度的字体。）

这一切都很好。

但是，一旦我将控件放入我的应用程序中，限制就会开始失效。在比较了两者之后，我注意到我的测试应用程序和我的实际应用程序之间的间距是不同的。

这是一个例子：

![在此处输入图像描述](../Images/a90f38abbbfd9bb0eb9484dea67d3353.png)

如您所见，我的测试应用程序间距大于真实应用程序的间距。

我在任何一个应用程序中都没有任何间距、字距调整、排版或字形设置（我可以找到）。另外，我检查了以“Font”（FontSpacing，FontSize ...）开头的每个设置，它们都完全相同。

**还有什么可能导致文本在一个应用程序中应用不同的间距而不是另一个？**

笔记：

如果相关，将控件插入我的测试应用程序的 xaml 与将控件插入我的真实应用程序的 xaml 相同。如果有人想看，我会发布它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:28:35.970

[它可能与Ideal 和 Display TextFormatting Modes](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.media.textformattingmode%28v=vs.100%29.aspx)之间的差异有关。请参阅这个[SO Question](https://stackoverflow.com/q/13140431/479512)以获得 Hans 的一个很好的解释。

# php - 为什么在使用值之前检查值是否存在是一种好的编程习惯？

> ID：14512695
> 
> 赞同：-1
> 
> 时间：2013-01-24T23:23:50.650
> 
> 标签：php

假设使用 isset() 函数，在将 ID 分配给变量或在后面代码中的某个位置使用它之前，我们检查了 ID 是否确实存在或用户确实提交了 ID。

```
 <?php

        if(isset($_GET['Id']))
    {

     $Id=$_GET['Id'];
    }
?> 
```

现在我明白了，这样做很好

1）所以代码按照预期的行为，即做它预期完成的事情。例如 - 如果要在某个查询中使用 id，该查询将基于该 id 返回一行，则提供一个有效的 id 以确保查询确实返回一行作为结果总是一个好主意......这个如果没有提供有效的 id，可以避免查询失败的意外行为。

2）很明显，最大限度地减少我们的代码可能产生的任何运行时错误。

因此，我正在寻找更多相关的示例和上下文，以了解为什么这始终是一种很好的编程实践。

基本上更多的例子可以帮助我理解为什么这样做真的很好......非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:30:48.660

想想未来。

如果您`$id = $_GET['id']`稍后简单地声明并使用该变量，您的应用程序可能会以意想不到的方式运行。

假设下周你回来写一些使用那个方便`$id`变量的代码。通过浏览文件，您会看到它在其他地方使用，并且不打算不设置它。该代码在您快速测试时有效，但在实际使用中失败。也许它出错了，也许它吐出了一个管理页面，也许它爆炸并杀死了小狗，*谁知道呢？*

如果您更加小心，并执行以下操作：

```
$id = 0; //default document
if (isset($_GET['id'])
{
  $id = $_GET['id'];
} 
```

您的代码将始终可以`$id`使用。请注意那里的小补充，在我将它的值分配给另一个变量之前，我并没有简单地确保它`$_GET['id']`存在，我已经确保`$id`/always/ 有一个值。

如果我聪明一点，我可能会做这样的事情：`if (isset($_GET['id'] && ctype_digit($_GET['id']) && isValidId($_GET['id']))`

# html - 显示两个内联跨度，每个跨度都有一堆复选框

> ID：14512696
> 
> 赞同：0
> 
> 时间：2013-01-24T23:23:51.567
> 
> 标签：html, css

我遇到了一些显示两个跨度的 UI 问题，每个跨度都有一堆复选框。HTML 看起来像：

```
<strong>Areas Impacted</strong>
<div class="arealist">
  <span class="group"><label><input type="checkbox" />Select All</label></span>
  <span class="areas">
    <label><input type="checkbox" />Item 1</label>
    <label><input type="checkbox" />Item 2</label>
    <label><input type="checkbox" />Item 3</label>
    <label><input type="checkbox" />Item 4</label>
    <label><input type="checkbox" />Item 5</label>
    <label><input type="checkbox" />Item 6</label>
    <label><input type="checkbox" />Item 7</label>
  </span>
</div> 
```

我有以下CSS：

```
div.arealist { display: block; clear: both; margin-top: 40px; }
div.arealist>span { display: inline; padding: 25px; }
div.arealist>span label { display: inline; }
div.arealist>span.group { width: 75px; border: 1px solid #d0d0d0; }
div.arealist>span.areas { width: 300px; border: 1px solid #d0d0d0; } 
```

它看起来像这样：

![在此处输入图像描述](../Images/b4135b682c37fd9e37dbb6e80b1a43c5.png)

这有两个问题。首先，右侧的复选框与边框一起渗入左侧框*。**Select All*文本应在其自己的范围内，并且项目列表将全部位于右侧框中。第二个问题是*第 4 项*复选框被分成两行。我想将`<label>`标签视为一个单元，永远不要跨越多行。

[小提琴样本](http://jsfiddle.net/y3JnZ/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:04:45.737

据我所知，您的两个问题都源于将您的内容放入内联元素中。当浏览器变得太小而无法`<span>`在宽度上容纳两者的内容时，第二个跨度中的内容会简单地环绕到下一行，就像其中的所有元素`<span>`都在一条直线上时一样。您可以使用 span 元素周围的边框来可视化此效果。

第二个问题是同样的问题 - 浏览器将每个标签项视为只是一行文本，因此如果浏览器窗口不够大，无论一个标签从哪里开始，另一个标签从哪里开始，它都会环绕到下一行开始。

只需将这两个都更改为 inline-blocks 就可以了：

```
div.arealist>span { display: inline-block; padding: 25px; }
div.arealist>span label { display: inline-block; } 
```

（当然，现在每个内部的元素`<span>`都换成了两行，因为现在 inline-block 元素实际上遵循了你给它们的宽度设置，所以你必须稍微摆弄一下。

# mp3 - 未压缩的 MP3 文件是什么格式的？

> ID：14512700
> 
> 赞同：0
> 
> 时间：2013-01-24T23:24:19.833
> 
> 标签：mp3, file-format, compression

我已经看到，除了标题和其他结构数据之外，压缩文件格式在其主要数据中仍然具有一些结构，并且可以将其与另一种未压缩格式进行比较。

例如，如果 GIF 文件的图像日期被解压缩，它基本上与索引 BMP 文件相同（使用调色板和索引调色板偏移的像素），并且由于 BMP 规范，可能行垂直反转，但是基本相同的数据序列。

**那么，如果 MP3 被解压缩，它会以什么文件格式表示呢？一个WAV文件，还是别的什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:34:25.143

你得到的是原始样品。您可以在 WAV 文件中轻松地编写这些（即简单地转储它们），尽管您仍然必须手动输出 WAV 标头。

# iphone - 为什么有自动布局时有 2 个故事板？

> ID：14512701
> 
> 赞同：9
> 
> 时间：2013-01-24T23:24:23.000
> 
> 标签：iphone, ios, objective-c, uistoryboard, autolayout

iOS6 有 AutoLayout，这是一个基于约束的布局系统。我想它在某种程度上可以与 Android 灵活的 XML 布局相媲美。

我正在启动一个 iOS6 项目并希望您使用 AutoLayout。这个应用程序将是通用的。它将有一些在 2 个设备系列之间极为相似的视图。iPad 上的其他视图将是 iPhone 视图中的 2 个或更多控制器。

据我了解，UIViewControllers 可以与其他子 UIViewControllers 一起设置。这意味着在这两种设备中构建通用视图有两个要素。

所以我的问题是，为什么需要 2 个故事板？我可以看到 iPad 故事板有一些额外的控件等。在两种设备类型之间也存在缩放字体大小和其他变量的问题。任何人都可以就如何在 2 个故事板上不重复视图并有效地使用 AutoLayout 来实现一个好的通用应用程序提供建议吗？

非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-01T13:19:28.823

iPad UI 往往不是 iPhone UI 的简单放大版。有更多的屏幕空间可供使用，并且有自定义的仅限 iPad 的界面元素（例如 UISplitViewController）。

如果在您的情况下，不同的设备具有非常相似的布局，那么是的，您可以只使用一种带有自动布局的布局，它可以正常工作。但是，在大多数情况下，我建议不要这样做。更清楚的是只有两种布局，一种用于每种设备。

最终决定权在你。也许您可以尝试使用自动布局的单一布局策略，看看您是否遇到任何特定问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T22:58:12.093

根据我的经验，您可能更容易不使用情节提要并以编程方式制作所有内容，但这更多是基于意见。

您的问题有点含糊，但我的意见是按照您提到的那样设置具有自动布局的视图，然后有一个使用这些视图的控制器。最终会发生的是，您将在控制器内的视图中拥有视图，这将允许您控制所有布局，同时能够根据设备选择去哪里。

如果你给出一个更具体的例子来运行它可能会有所帮助。不过说实话，这也是我感兴趣的事情，我期待看到其他想法。

# algorithm - 二叉搜索树（BST）的最大子树

> ID：14512704
> 
> 赞同：3
> 
> 时间：2013-01-24T23:24:42.097
> 
> 标签：algorithm, data-structures, binary-tree, binary-search-tree

> 给定一棵二叉树，我想找出其中最大的子树是 BST。

这个问题与[Find the maximum subtree in a BST](https://stackoverflow.com/questions/2336148/finding-the-largest-subtree-in-a-bst)重复，其中 1337c0d3r 通过自下而上遍历树给出 O(n) 解决方案。有两行代码让我感到困惑。谁能帮我解释一下？

```
// Find the largest BST subtree in a binary tree.
// If the subtree is a BST, return total number of nodes.
// If the subtree is not a BST, -1 is returned.
int findLargestBSTSubtree(BinaryTree *p, int &min, int &max,
                   int &maxNodes, BinaryTree *& largestBST) {
  if (!p) return 0;
  bool isBST = true;
  int leftNodes = findLargestBSTSubtree(p->left, min, max, maxNodes, largestBST);
  int currMin = (leftNodes == 0) ? p->data : min;
  if (leftNodes == -1 ||
     (leftNodes != 0 && p->data <= max))
    isBST = false;
  int rightNodes = findLargestBSTSubtree(p->right, min, max, maxNodes, largestBST);
  int currMax = (rightNodes == 0) ? p->data : max;
  if (rightNodes == -1 ||
     (rightNodes != 0 && p->data >= min))
    isBST = false;
  if (isBST) {
    min = currMin;
    max = currMax;
    int totalNodes = leftNodes + rightNodes + 1;
    if (totalNodes > maxNodes) {
      maxNodes = totalNodes;
      largestBST = p;
    }
    return totalNodes;
  } else {
    return -1;   // This subtree is not a BST
  }
}

BinaryTree* findLargestBSTSubtree(BinaryTree *root) {
  BinaryTree *largestBST = NULL;
  int min, max;
  int maxNodes = INT_MIN;   // INT_MIN is defined in <climits>
  findLargestBSTSubtree(root, min, max, maxNodes, largestBST);
  return largestBST;
} 
```

我对以下两行代码感到困惑。根据我的常识，递归遍历左树后，`max`变量应该更新，为什么`int currMin = (leftNodes == 0) ? p->data : min;`递归遍历左树后放右？
同样的问题`int currMax = (rightNodes == 0) ? p->data : max;`

```
...
int currMin = (leftNodes == 0) ? p->data : min;
...
int currMax = (rightNodes == 0) ? p->data : max; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:11:07.447

请记住，该算法自下而上遍历树。访问一个节点的左子树后，以下情况之一为真：

1.  左子树不是 BST => 当前树不是 BST
2.  左子树是 BST => 当前树中的最小值是`min`
3.  左子树没有节点 => 当前树中的最小值是当前节点的值

同理，遍历右子树后，当前树中的最大值要么是当前节点的值，要么是右子树中的最大值（`max`）

因此，该行 `int currMin = (leftNodes == 0) ? p->data : min;` 测试条件 2 或 3 是否为真，并`min`相应地更新 的值，以便该值对于测试树中当前节点上方的节点是正确的。

# command-line - 这个 Findstr 命令缺少什么？

> ID：14512707
> 
> 赞同：2
> 
> 时间：2013-01-24T23:24:56.040
> 
> 标签：command-line, dos, findstr

这个 Findstr 命令缺少什么？

```
X:\Admin>findstr /s/i/c:"permission denied" *.*
FINDSTR: // ignored
FINDSTR: // ignored

X:\Admin>findstr -s-i-c:"permission denied" *.*
FINDSTR: /- ignored
FINDSTR: /- ignored

X:\Admin> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:29:34.170

在参数之间添加空格：

```
findstr /s /i /c:"permission denied" *.* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:29:46.310

您应该在选项之间留一个空格

```
 findstr /s /i /c:"permission denied" *.* 
```

# .net - 工作流 4.0 缓存元数据 v/s 缓存完整活动对象

> ID：14512710
> 
> 赞同：2
> 
> 时间：2013-01-24T23:25:17.887
> 
> 标签：.net, workflow-foundation-4

我试图理解

1.  CacheMetadata 和在我自己的缓存中缓存完整活动对象之间的区别（一些集合）
2.  无论如何我可以提高基于 xaml 的工作流程的性能。

我们有类似...

```
公共类 BusinessRule
    {
        公共动态活动活动{获取；私人套装；}
        公共业务规则（字符串规则SetAsXaml）
        {
            流流 = new MemoryStream(ASCIIEncoding.Default.GetBytes(ruleSetAsXaml));
            this.Activity = ActivityXamlServices.Load(stream) as DynamicActivity;
        }

 `public void Execute(data objData)
    {
        Dictionary<string, object> inArgs = new Dictionary<string, object>();
        inArgs.Add("data", objData);

        if (this.Activity != null)
        {
            WorkflowInvoker invoker = new WorkflowInvoker(this.Activity);
            outArgs = invoker.Invoke(inArgs);
        }
    }
}` 

我们有很多这样的业务规则。xamls 存储在数据库中，所有这些规则都被实例化一次并保存在一个集合中（在内存中）。这些在需要时使用 Execute() 方法调用（带有附加参数）。

现在我的问题......无论如何我可以做得`WorkflowInvoker.Invoke()`更快吗？目前，它正在`00:00:00.1214497`处理每个调用，CPU 利用率为完整进程的 25%（在这条线上）。还可能注意到我在 xaml 中没有做任何棘手的事情。

我在这里做错什么了吗？我需要缓存元数据吗？

            回答 #1

赞同：2

时间：2013-01-25T00:43:00.077

1)

CacheMetadata 不是你想象的那样。它*总是*在执行之前被调用，并用于构建您的活动的“表示”以使其准备好运行。这也是进行验证以防止执行时出错的地方。设计师使用 CacheMetadata 来显示您在可视化编辑工作流时看到的所有错误。

CacheMetadata 已经优化为不在同一个工作流实例上调用构建逻辑的某些部分。当然，每次运行都会调用它，主要是出于验证目的，但这是 WF4 的特性。

2)

如果您真的在缓存业务规则实例，那么您将无法大幅缩短该时间。您已经在阻止 XAML 解析/读取，这实际上是所有事情中最劳动密集型的部分。

If you're using VB expressions on your workflows they've to be compiled, and that takes time. In WF4.5 you can use C# expressions which have to be actively compiled prior to execution, which is a plus. Check more info [here](http://msdn.microsoft.com/en-us/library/jj591618.aspx). This is really the only thing that comes to my mind right now.

```

# c# - 您可以在 Metro Winstore 应用程序中存储整个页面而不是状态吗？

> ID：14512712
> 
> 赞同：0
> 
> 时间：2013-01-24T23:25:24.303
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps

LayoutAwarePage 助手有虚拟方法来保存/加载页面状态，以便在从另一个页面导航后恢复它。

我只有 2 页，其中一页有我想要维护的真实状态。

通过专门保存/加载数据（状态）来正确完成它似乎真的很容易出错。

我宁愿存储整个页面，然后将其推送到需要的地方..

不幸的是，Winstore 应用程序使用了我不熟悉的新范例。

**任何人都可以帮忙 - 我可以保存什么对象以及它必须设置在哪里才能正确显示**（在silverlight中我只是缓存UserControl对象，然后在App中将它设置为Root）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:38:31.127

显然它是通过使用完成的：

```
this.NavigationCacheMode = Windows.UI.Xaml.Navigation.NavigationCacheMode.Enabled; 
```

在需要缓存的页面的构造函数中。

# c# - 在 MVC 中使用 ASP.NET 成员表

> ID：14512713
> 
> 赞同：1
> 
> 时间：2013-01-24T23:25:26.737
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-membership

我有一个在 .NET 4 Web 表单中创建的“用户管理门户”。该门户允许管理员向特定应用程序添加和编辑用户（新用户获得一个随机生成的密码，该密码使用任何 Web 表单进行加密）。

我想建立一个对这些用户名和密码进行身份验证的 MVC 4 网站。我知道 SimpleMembership 是 ASP Membership 的一部分，但我不确定如何使用默认创建的网站来验证 webforms 用户名和密码。只是在web.config中设置机器密钥并将DB更改为会员DB并不是那么简单。

例如：

*   用户 A 在 Web 表单应用程序中创建，密码为 1234567
*   用户 A 单击默认 MVC 应用程序上的登录按钮并使用密码 1234567（MVC 应用程序默认连接字符串设置为 Web 表单应用程序数据库）

有没有人有这方面的教程或能够提供帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:56:57.780

我相信`SimpleMembership`您可以定义“用户配置文件”表，但是它会创建自己的表以用于密码。

例如，您可以获取任何 Model 类并使用`[Table("UserProfile")]`To get对其进行注释`SimpleMemebrship`以将其用作配置文件表。

此外，这个答案[实体框架代码优先问题（SimpleMembership UserProfile 表）](https://stackoverflow.com/questions/12502004/entity-framework-code-first-issues-simplemembership-userprofile-table)`SimpleMemberhip`在修改以使用我的表方面帮助了我很多。

我认为这可能接近您所寻找的：http: [//blog.spontaneouspublicity.com/includes-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model](http://blog.spontaneouspublicity.com/including-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model)我认为这显示了如何设置默认使用的其他表`SimpleMembership`

# neo4j - Neo4 / Cypher ：删除节点的所有关系

> ID：14512716
> 
> 赞同：3
> 
> 时间：2013-01-24T23:25:30.580
> 
> 标签：neo4j, cypher

我想删除节点的所有关系（传入和传出）（关系可以在许多不同的节点上进行）

就像是 ：

开始 n=node:(1000) MATCH n<-[r]->anynode DELETE r

不起作用，因为这里的“anynode”被解释为匹配的“第一个”链接节点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T02:13:43.497

你要：

```
start n=node(1000) 
match n-[r]-() 
delete r; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T23:38:17.737

在尝试删除所有关系作为更大更新操作的一部分时，我使用@eve-freeman 的解决方案遇到了一个问题（即删除现有关系，然后创建新关系，以及更新节点属性）：

```
MATCH (n:Node { uuid: '1' })
OPTIONAL MATCH (n)-[r]-()
DELETE r
WITH n
MATCH (f:Foo { uuid: '2' })
CREATE (n)-[:LIKES]->(f)
WITH n
MATCH (b:Bar { uuid: '3' })
CREATE (n)<-[:LOVES]-(b)
SET n.name = 'Howard'
RETURN n 
```

由于某种原因，它创建了一个重复的条目（我很想知道为什么会发生这种情况）：

```
"n"
{"name":"Howard","uuid":"1"}
{"name":"Howard","uuid":"1"}
Set 2 properties, deleted 2 relationships, created 4 relationships, started streaming 2 records after 6 ms and completed after 6 ms. 
```

使用以下（`COLLECT`然后`FOREACH`）似乎有效：

```
MATCH (n:Node { uuid: '1' })
OPTIONAL MATCH (n)-[r]-()
WITH n, COLLECT (r) AS rels
FOREACH (r IN rels | DELETE r)
WITH n
MATCH (f:Foo { uuid: '2' })
CREATE (n)-[:LIKES]->(f)
WITH n
MATCH (b:Bar { uuid: '3' })
CREATE (n)<-[:LOVES]-(b)
SET prd.name = 'Howard'
RETURN n 
```

回报：

```
"n"
{"name":"Howard","uuid":"1"}
Set 1 property, deleted 2 relationships, created 2 relationships, started streaming 1 record after 3 ms and completed after 3 ms. 
```

* * *

**更新（2020 年 8 月 14 日）：**

> 它创建了一个重复的条目

这是不正确的。它实际上并没有创建重复的条目，只是重复的结果。`(n)-[:LIKES]->(f)`但是，它确实会创建和`(n)<-[:LOVES]-(b)`关系的副本。

这是由于与其他节点之间存在多个预先存在的关系`(n)`（在上述场景中，`(n)`与其他两个节点有关系）。

接下来`OPTIONAL MATCH (n)-[r]-()`，查询处理两行：一个用于已匹配的每个关系（每行还包括`(n)`节点本身）。

`DELETE r`然后删除每一行中包含的关系。

在`WITH n`命令中，`n`将仍然表示两行结果，即使关系已被删除，所以每行现在只包含`(n)`节点（每行都相同）。

这会导致为每一行运行后续命令，从而创建重复的关系和重复的结果。

解决方案是确保在删除行后只保留不同的行，这是通过使用来实现的`WITH DISTINCT n`，例如

```
MATCH (n:Node { uuid: '1' })
OPTIONAL MATCH (n)-[r]-()
DELETE r
WITH DISTINCT n
MATCH (f:Foo { uuid: '2' })
CREATE (n)-[:LIKES]->(f)
WITH n
MATCH (b:Bar { uuid: '3' })
CREATE (n)<-[:LOVES]-(b)
SET n.name = 'Howard'
RETURN n 
```

这和上面的`COLLECT`/`FOREACH`方法都将达到相同的效果。

# nested - 任何滑块嵌套示例

> ID：14512717
> 
> 赞同：0
> 
> 时间：2013-01-24T23:25:33.233
> 
> 标签：nested, anythingslider

我一直在尝试使用任何滑块找到滑块内滑块（嵌套）的示例。

到目前为止，stackoverflow 上的所有旧示例都已链接到似乎不再起作用的 jsfiddle 示例：jsfiddle.net/Mottie/S8Je5/217/

有没有人可以与社区分享任何嵌套的工作示例？

# javascript - 显示/隐藏切换和添加类

> ID：14512719
> 
> 赞同：0
> 
> 时间：2013-01-24T23:25:40.860
> 
> 标签：javascript

我正在创建一个常见问题解答页面。

我想打开和关闭答案。我有使用jquery的工作。

我还想向“打开”的选择器添加一个类（.active）。我可以将类添加到父级。

我的问题是：我需要使用未分类的元素，因为最终用户不会理解添加类。它需要是无样式的块元素。所以它看起来像这样：

```
<h3 class="active">Activator</h3>
  <p>show</p>
<h3>Activator</h3>
  <p>hide</p>
<h3>Activator</h3>
  <p>hide</p>
etc... 
```

当脚本将 .active 类添加到单击的 h3 时，它会将 .active 类添加到所有 h3 标记。

这是我的代码：

```
$(document).ready(function() {
    $('.content p').hide();
    $('h3').click(function(){
        $(this).next("p").toggle(250);
    });
    $(".content h3").click(function(){
        $(".content h3").toggleClass("active");
    });
}); 
```

链接：[工作演示/网站](http://www.wo.redpointdesign.ca/about/faq/) 在此先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:27:57.380

这是因为您正在使用 选择`click`处理程序中的所有元素`$(".content h3")`。相反，您需要引用`this`来获取被点击的元素：

```
$(document).ready(function() {
    $('.content p').hide();
    $('h3').click(function(){
        $(this).next("p").toggle(250);
    });
    $(".content h3").click(function(){
        $(this).toggleClass("active");
    });
}); 
```

**编辑：**一个不错的技巧是像这样设置你的CSS：

```
.content p
{
    display: none;
}
.content h3.active + p
{
    display: block;
} 
```

通过使用相邻的同级组合符 ( )，您可以根据您是否处于活动状态`+`来控制 的显示。然后，您可以简化 JavaScript：`<p>``<h3>`

```
$(document).ready(function() {
    $(".content h3").click(function() {
        $(this).toggleClass("active");
    });
}); 
```

以这种方式丢失了动画，但随后您可以使用 CSS3 过渡将其重新添加。

**编辑：**如果高度不固定，过渡高度很棘手。可以通过 transitioning 来完成`max-height`，但是当 collapsed 时，可能会有延迟。您可以使用这些值来获得效果很好的东西。这是我想出的：[jsfiddle.net/FsVPn](http://jsfiddle.net/FsVPn/)

# ruby-on-rails - JBuilder中未定义的局部变量或方法“json”

> ID：14512720
> 
> 赞同：30
> 
> 时间：2013-01-24T23:25:50.167
> 
> 标签：ruby-on-rails, json, jbuilder

当我尝试获取所有类别（索引操作）时出现错误：

```
undefined local variable or method `json' 
```

但在表演中一切​​都很好。所有文件都有 .jbuilder 扩展名。这是控制器代码：

```
def index
  @categories = Category.all
end

# GET /categories/1
# GET /categories/1.json
def show
  @category = Category.find(params[:id])
end 
```

堆栈跟踪：

> app/views/categories/index.json.builder:1:in `_app_views_categories_index_json_builder___502133872307116590_70140532925300' actionpack (3.2.11) lib/action_view/template.rb:145:in`block in render '
> activesupport (3.2.11) lib/active_support/notifications.rb:125:in render'`instrument'
> actionpack (3.2.11) lib/action_view/template.rb:143:in`

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-03-18T11:59:59.113

尝试将您的文件重命名`index.json.builder`为`index.json.jbuilder`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T17:27:58.043

您也可以将其重命名为`index.json.jpbuilder`并使用此 gem：[https](https://github.com/bigjason/jpbuilder) ://github.com/bigjason/jpbuilder （如果您想要 JSONP）

# objective-c - 如何在 XCode 中启用/禁用宏扩展？

> ID：14512723
> 
> 赞同：1
> 
> 时间：2013-01-24T23:25:58.297
> 
> 标签：objective-c, c, xcode

我们办公室的一些机器在 XCode 中编译项目时会标记构建错误，因为它们正在进行宏扩展并查找合法错误。其他机器不进行扩展，也不会捕获这些错误。必须有一个选项来启用/禁用 XCode 中的某处。找不到啊，有谁知道的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:08:41.493

这是我的错，这是因为预处理器 def。在一种情况下，宏将扩展为类型化的常量，而在另一种情况下，我大部分时间使用宏扩展为以常量作为字符串参数的函数调用。因此，在一种情况下`int myConstant`，如果出现问题，我会得到编译器将标记的情况。在另一种情况下，它`myFunc("myConstant")`不会标记编译器错误。

# php - 我怎样才能让卷曲得到饼干

> ID：14512724
> 
> 赞同：1
> 
> 时间：2013-01-24T23:26:04.397
> 
> 标签：php

> **可能重复：**
> [如何将 php curl 中的 cookie 获取到变量中](https://stackoverflow.com/questions/895786/how-to-get-the-cookies-from-a-php-curl-into-a-variable)

我正在运行下面的代码，它的作用是使用 curl 获取网页。我的问题是当它获取网页时，它没有从网站获取 cookie。

```
 $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, ''.$stuff_link[0].'');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_AUTOREFERER, false);
    $html = curl_exec($ch);
    curl_close ( $ch );
    echo $html; 
```

我尝试了一些没有奏效的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T01:22:17.500

```
$ch = curl_init('http://www.google.com/');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
// get headers too with this line
curl_setopt($ch, CURLOPT_HEADER, 1);
$result = curl_exec($ch);
// get cookie, all cos sometime set-cookie could be more then one
preg_match_all('/^Set-Cookie:\s*([^\r\n]*)/mi', $result, $ms);
// print_r($result);
$cookies = array();
foreach ($ms[1] as $m) {
    list($name, $value) = explode('=', $m, 2);
    $cookies[$name] = $value;
}
print_r($cookies); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:28:40.637

尝试这个：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "HTTP://URLHERE.COM");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_AUTOREFERER, false);
$html = curl_exec($ch);
preg_match('/^Set-Cookie: (.*?);/m', curl_exec($ch), $m);
var_dump(parse_url($m[1]));
curl_close ( $ch );
echo $html; 
```

重复的问题几乎来自： [如何从 php curl 中获取 cookie 到变量中](https://stackoverflow.com/questions/895786/how-to-get-the-cookies-from-a-php-curl-into-a-variable)

# css - 响应式绝对定位背景叠加

> ID：14512725
> 
> 赞同：0
> 
> 时间：2013-01-24T23:26:05.083
> 
> 标签：css, responsive-design, background-image, css-position

我有一个正在加载的背景图像，但我想用一个 CSS 覆盖使其变暗。我的网站是响应式的，所以我不知道如何让绝对定位的深色叠加层具有响应式宽度。这甚至可能吗？

这是我当前的代码。更改预览的宽度将向您展示深色覆盖如何停止覆盖较小宽度的图像，其中标题文本环绕增加横幅的整体高度。

[http://jsfiddle.net/4CG32/](http://jsfiddle.net/4CG32/)

感谢您的任何提示/帮助！

主要css代码：

```
.index-panel {
   position: relative;
   background: #333 url('http://images.alphacoders.com/285/285391.jpg') no-repeat;
   background-size: cover;
   padding: 70px 0 55px; 
```

}

```
 .index-panel .background {
    width: 100%;
    height: 356px;
    position: absolute;
    top: 0;
    left: 0;
    background: rgba(0, 0, 0, 0.23);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:35:45.860

你的身高是固定的。

你为什么不放： `.index-panel .background { height: 100%; }`

# mysql - 从一个 tbl 中选择一列并插入到另一个表的另一列中

> ID：14512739
> 
> 赞同：0
> 
> 时间：2013-01-24T23:27:40.193
> 
> 标签：mysql

谁能告诉我我的查询有什么问题？我有两个表事件和客户，我想从客户表中选择客户 ID 并将其插入到事件表的 customer_id 列中。这只是客户表中的登录 ID 与登录用户 ID 相同的情况

```
$insEvent_sql = "INSERT INTO event(customer_id, videography_package, event_type, event_shortdesc, event_vanue, event_start) 
VALUES(customer-id,'".$safe_videography_package."', '".$safe_event_type."', '".$safe_event_shortdesc."','".$safe_event_vanue."',  '".$event_date."') SELECT customer_id  FROM 'customer' WHERE login_id = ".$_SESSION['SESS_LOGIN_ID'].";"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:39:14.297

试试这个

```
 $insEvent_sql = "INSERT INTO event(customer_id, videography_package, event_type, event_shortdesc, event_vanue, event_start) 
   VALUES((select customer-id from 'customer' WHERE login_id = ".$_SESSION['SESS_LOGIN_ID']."),'".$safe_videography_package."', '".$safe_event_type."', '".$safe_event_shortdesc."','".$safe_event_vanue."',  '".$event_date."') "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:45:18.460

*   for 的语法`INSERT`需要`VALUES`子句或 a`SELECT`作为行的来源，但不能同时使用。

*   您对 的表名使用单引号`SELECT`，但单引号仅用于字符串文字或日期文字。

*   你没有使用查询参数，所以你有丑陋的代码来管理引用的变量。我假设`$safe_`意味着您已经转义了变量，因此至少您可能很少有 SQL 注入的机会。

我会以这种方式用 PDO 编写语句：

```
$cust_sql = "SELECT customer_id FROM customer WHERE login_id = :login_id";
$stmt = $pdo->prepare($cust_sql);
// test if $stmt is false
$result = $stmt->execute(array(":login_id" => $_SESSION['SESS_LOGIN_ID']));
// test if $result is false
while ($row = $result->fetch()) {
  $customer_id = $row["customer_id"];
}

$insEvent_sql = "INSERT INTO event(customer_id, videography_package, event_type,
    event_shortdesc, event_vanue, event_start) 
  VALUES (:customer_id, :videographer_package, :event_type, 
   :event_shortdesc, :event_vanue, :event_start)";
$stmt = $pdo->prepare($cust_sql);
// test if $insEvent_stmt is false
$result = $insEvent_stmt->execute(array(
  ":customer_id"         => $customer_id,
  ":videographer_package"=> $videography_package,
  ":event_type"          => $event_type,
  ":event_shortdesc"     => $event_shortdesc,
  ":event_vanue"         => $event_vanue,
  ":event_start"         => $event_date
));
// test if $result is false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T23:33:21.420

您不能`INSERT`在一行后跟一个`SELECT`. 一种解决方法是将您的行添加到`SELECT`：

```
$insEvent_sql = "INSERT INTO event 
            (customer_id, 
             videography_package, 
             event_type, 
             event_shortdesc, 
             event_vanue, 
             event_start) 
SELECT 'customer-id'                        AS customer_id, 
       '" . $safe_videography_package . "'  AS videography_package, 
       '" . $safe_event_type . "'           AS event_type, 
       '" . $safe_event_shortdesc . "'      AS event_shortdesc, 
       '" . $safe_event_vanue . "'          AS event_venu, 
       '" . $event_date . "'        AS event_start 
UNION ALL 
SELECT customer_id, NULL, NULL, NULL, NULL, NULL
FROM   customer 
WHERE  login_id = " . $_SESSION['SESS_LOGIN_ID']; 
```

使用样本数据：

```
$safe_videography_package = 'package1';
$safe_event_type = 'type1';
$safe_event_shortdesc = '简短描述';
$safe_event_vanue = '某个地方';
$event_date = '2012-05-05';
$_SESSION['SESS_LOGIN_ID'] = 1;
```

将产生：

```
插入事件
            （客户ID，
             videography_package,
             事件类型，
             event_shortdesc,
             event_vanue,
             事件开始）
选择“客户 ID”作为客户 ID，
       'package1' AS videography_package,
       'type1' 作为 event_type，
       '简短描述' AS event_shortdesc,
       'some venu' AS event_venu,
       '2012-05-05' 作为 event_start
联合所有
选择客户 ID，空，空，空，空，空
来自客户
在哪里 login_id = 1
```

# python - Pyaudio、portaudio 和 mac 10.7.5

> ID：14512741
> 
> 赞同：5
> 
> 时间：2013-01-24T23:27:47.213
> 
> 标签：python, macports, portaudio, pyaudio

我无法正确安装 pyaudio。我为该项目设置了一个 virtualenv。我首先尝试安装portaudio：

```
sudo port install portaudio 
```

返回：

```
--->  Cleaning portaudio
--->  Scanning binaries for linking errors: 100.0%
--->  No broken files found. 
```

我认为这意味着它运行良好。然后我尝试了：

```
pip install pyaudio 
```

返回：

```
Downloading/unpacking pyaudio
Running setup.py egg_info for package pyaudio

warning: no files found matching '*.c' under directory 'test'
Installing collected packages: pyaudio
Running setup.py install for pyaudio
building '_portaudio' extension
gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -isysroot /Developer/SDKs/MacOSX10.6.sdk -arch i386 -arch x86_64 -g -O2 -DNDEBUG -g -O3 -DMACOSX=1 -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/_portaudiomodule.c -o build/temp.macosx-10.6-intel-2.7/src/_portaudiomodule.o -fno-strict-aliasing
src/_portaudiomodule.c:29:23: error: portaudio.h: No such file or directory
src/_portaudiomodule.c:33:25: error: pa_mac_core.h: No such file or directory
... 
```

第一个警告有问题吗？我有点惊讶它说 portaudio.h 没有文件或目录。我必须做一些特别的事情来启用我的端口音频 macport 安装吗？

感谢任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-18T04:42:42.407

```
$ brew install portaudio
$ pip install pyaudio 
```

portaudio 提供的一些缺少的库等。适用于 Python 2.7（不确定其他版本）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-28T12:07:24.647

以下情况如何：

```
$ sudo port install py27-pyaudio
Warning: port definitions are more than two weeks old, consider using selfupdate
--->  Computing dependencies for py27-pyaudio
--->  Fetching archive for py27-pyaudio
--->  Attempting to fetch py27-pyaudio-0.2.7_0.darwin_12.x86_64.tbz2 from http://lil.fr.packages.macports.org/py27-pyaudio
--->  Attempting to fetch py27-pyaudio-0.2.7_0.darwin_12.x86_64.tbz2.rmd160 from http://lil.fr.packages.macports.org/py27-pyaudio
--->  Installing py27-pyaudio @0.2.7_0
--->  Activating py27-pyaudio @0.2.7_0
--->  Cleaning py27-pyaudio
--->  Updating database of binaries: 100.0%
--->  Scanning binaries for linking errors: 100.0%
--->  No broken files found.
$ python -c "import pyaudio"
$ 
```

这至少对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T19:47:48.270

根据我上面的评论，这与[此](https://stackoverflow.com/questions/2893193/building-portaudio-and-pyaudio-on-mac-running-snow-leopard-arch-issues)答案类似，但由于 OP 不清楚，我将再试一次。（这基本上只是我在做这件事时给自己做的一些笔记的剪切和粘贴。）

1.  这是针对 32 位的构建。
2.  下载 pyaudio 和 portaudio（我用的是 0.2.4，v19）。
3.  cd portaudio
4.  打扫干净
5.  CC="gcc -arch i386" ./configure -enable-static
6.  制作
7.  sudo make install （如果你静态链接到它可能不需要）。
8.  将 portaudio 移到 PyAudio 目录下，即：
    1.  cd ..（出portaudio）
    2.  mv portaudio PyAudio/portaudio-v19（注意这里需要 v19）
9.  cd 进入 PyAudio 并运行：
    1.  确保您在虚拟环境中，即`source bin/activate`
    2.  python setup.py build --static-link
    3.  python setup.py 安装

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-03T07:10:10.563

创建一个虚拟环境，激活它：

```
virtualenv env
env/bin/activate 
```

下载 PyAudio（当时最新）：

```
wget -c http://people.csail.mit.edu/hubert/pyaudio/packages/pyaudio-0.2.8.tar.gz
tar zxf pyaudio-0.2.8.tar.gz
cd PyAudio-0.2.8/ 
```

在 PyAudio 文件夹中解压 portaudio，将其重命名为 portaudio-v19 并构建它：

```
wget -c http://www.portaudio.com/archives/pa_stable_v19_20140130.tgz
tar zxf pa_stable_v19_20140130.tgz
mv portaudio portaudio-v19
cd portaudio-v19
./configure
make
cd ../ 
```

返回 PyAudio 目录：

```
export CFLAGS="-I `pwd`/portaudio-v19/include/ -L `pwd`/portaudio-v19/lib/.libs/"
python setup.py build --static-link
python setup.py install 
```

就这样！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-20T16:07:44.300

这将安装 pyaudio 所需的 portaudio：

```
sudo port install portaudio 
```

接下来，为您的 python 版本寻找合适的 pyaudio macport

```
port search pyaudio 
```

假设您使用的是 python27，请按如下方式安装 pyaudio：

```
sudo port install py27-pyaudio 
```

参考：

[如何在 Mac OS X 10.7 上的 virtualenv 中安装 PyAudio](https://stackoverflow.com/q/13491401/1463143)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-06T23:20:57.620

您可以使用 $ sudo port install portaudio 安装 portaudio

[您可以使用来自http://people.csail.mit.edu/hubert/pyaudio/](http://people.csail.mit.edu/hubert/pyaudio/)的 mac 安装程序安装 pyaduio

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-20T03:52:57.283

关键是这个命令：</p>

```
export CFLAGS="-I `pwd`/portaudio-v19/include/ -L `pwd`/portaudio-v19/lib/.libs/" 
```

这避免了没有这样的文件错误。

这解决了我的问题，非常感谢@tuxdna。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-05T08:54:33.677

我遇到了同样的问题。[对我来说，我从portaudio](http://files.portaudio.com/download.html)官方网站下载了源代码。

编译安装后，将头文件`pa_mac_core.h`从复制`<source code folder>/include`到`/usr/local/include`. 问题终于解决了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-17T04:12:09.360

问题是`pyaudio`安装脚本 ( `setup.py`) 假定所有必要的标头都在`/usr/include`. 这就是为什么它可以与 HomeBrew 一起使用，而不是 MacPorts，后者通常（并且干净地）将所有内容放在`/opt/local`.

PyAudio 维护者依赖于 HomeBrew，目前没有选项组合可以说明在哪里可以找到标头。在撰写本文时，`setup.py` [源代码](https://github.com/jleb/pyaudio/blob/fc7bd1d/setup.py)仅支持 Mac OS X 的默认值。

要使用 MacPorts，虽然很麻烦，但创建两个链接进行编译就足够了：

```
port install portaudio
sudo ln -s /opt/local/include/portaudio.h /usr/include
sudo ln -s /opt/local/include/pa_mac_core.h /usr/include
pip install --user pyaudio # Should now compile fine. 
```

安装结束后可能应该删除这些链接。

在安装了 MacPorts 的 Python 2.7 的 Mac OS X 10.10 上进行了测试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-28T04:43:27.470

我最近需要这个，因为我想使用 Google Cloud API 从麦克风转录音频。我的 Mac 中安装了 Python 3.7。

i386 支持在最近的 OSx 版本中已弃用，因此解决此问题需要修改配置文件。

1.  下载portaudio源代码[http://www.portaudio.com/download.html](http://www.portaudio.com/download.html)
2.  下载MacOSX10.12.sdk [https://github.com/phracker/MacOSX-SDKs/releases](https://github.com/phracker/MacOSX-SDKs/releases)并复制到/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs
3.  将此行添加到 portaudio 配置文件中，以包含 MacOSX10.13.sdk 和 MacOSX10.14.sdk，这样它就不会失败

    ```
     elif xcodebuild -version -sdk macosx10.13 Path >/dev/null 2>&1 ; then
             mac_version_min="-mmacosx-version-min=10.4"
             mac_sysroot="-isysroot `xcodebuild -version -sdk macosx10.13 Path`"
          elif xcodebuild -version -sdk macosx10.14 Path >/dev/null 2>&1 ; then
             mac_version_min="-mmacosx-version-min=10.4"
             mac_sysroot="-isysroot `xcodebuild -version -sdk macosx10.14 Path`"              
          else
             as_fn_error $? "Could not find 10.5 to 10.14 SDK." "$LINENO" 5
          fi 
    ```

4.  从您的 portaudio 文件夹中

    ```
    ./configure && make
    sudo make install 
    ```

5.  下载 PyAudio 源码（无轮）[https://pypi.org/project/PyAudio/#files](https://pypi.org/project/PyAudio/#files)

6.  在 .bash_profile 中添加环境 PORTAUDIO_PATH 以及下载的 portaudio 源代码的完整路径。

    ```
    PORTAUDIO_PATH=/full/path/portaudio
    export PORTAUDIO_PATH 
    ```

7.  在您下载的 PyAudio 源中修改 setup.py 以使用 portaudio 重命名文件夹 portaudio-v19

    ```
    portaudio_path = os.environ.get("PORTAUDIO_PATH", "./portaudio") 
    ```

8.  安装

    ```
    python3 setup.py install --static-link 
    ```

# android - 简单的 Android 测试 - 只想运行 Activity 并具有非零代码覆盖率

> ID：14512745
> 
> 赞同：0
> 
> 时间：2013-01-24T23:28:03.210
> 
> 标签：android, testing, junit

我是 Android 测试的新手（一般来说）。我只想生成一个非零的 Emma 代码覆盖率报告。

这是我的主要项目： http: [//pastebin.com/PzS4mYMb](http://pastebin.com/PzS4mYMb)

这是我的测试项目： http: [//pastebin.com/7ZqTjF0g](http://pastebin.com/7ZqTjF0g)

我在做什么错 - 为什么代码覆盖率为零？

我正在使用 Monkey 尝试生成事件，希望这会启动活动，但仍然没有。

# assembly - 来自 x86 程序集的 BIOS 版本

> ID：14512746
> 
> 赞同：3
> 
> 时间：2013-01-24T23:28:06.813
> 
> 标签：assembly, x86, bios

有没有办法可以在 DosBOX 中使用 x86 程序集找到 BIOS 的版本和其他信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:41:53.900

要获取 BIOS 信息，请使用 int 15h, AH = C0h 调用。例如：

```
mov ah, C0h
int 15h
;Use info here 
```

[这](http://www.oldlinux.org/Linux.old/docs/interrupts/int-html/rb-1594.htm)是有关表格格式的一些文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T23:38:51.463

在 dosbox 中，您只能访问模拟的 bios。如果您需要有关真实硬件的信息，请使用一些依赖于操作系统的方式。例如，在 linux 上，您可以使用该程序`dmidecode`。它通过读取 BIOS`/dev/mem`等方式收集信息。

# tsql - T-SQL UDF 标量函数返回可变长度的字符

> ID：14512749
> 
> 赞同：0
> 
> 时间：2013-01-24T23:28:16.987
> 
> 标签：tsql, char, variable-length

我希望编写一个用户定义的函数，它将返回一个根据输入参数调整大小的 char 值。我不确定这是否可能，但我想我还是会问。

所以我有一个看起来像这样的查询：

```
SELECT 
Convert(char(10), SUBSTRING('Field1', 1, 10)) AS Field1,
Convert(char(20), SUBSTRING('Value2', 1, 20)) AS Field2 
```

我想写一个函数，可以这样写：

```
SELECT 
fn_ConvertAndPad('Field1', 10) AS Field1,
fn_ConvertAndPad('Field2', 20) AS Field2 
```

有没有办法将输出指定为 char(10) 或 char(20)？

这是我（显然失败）的尝试：

```
ALTER FUNCTION [dbo].[fn_ConvertAndPad] 
(
    -- Add the parameters for the function here
    @input varchar(100),
    @length int
)
RETURNS char
AS
BEGIN
    -- Declare the return variable here
    DECLARE @Result char

    -- Add the T-SQL statements to compute the return value here
    DECLARE @blanks char(100)
    SET @blanks = ' '
    SELECT @Result = SUBSTRING(@input + @blanks, 1, @length)

    -- Return the result of the function
    RETURN @Result
END 
```

不，我不能只返回一个 varchar，我需要一个填充字符串来输出纯文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:54:11.460

我不确定您是否可以使用用户函数来执行此操作，因为我估计您将需要执行动态 SQL 来获得您想要的，即在操作期间定义返回类型。据我所知，您可以在过程中执行此操作，但不能在函数中执行此操作。

```
create proc [dbo].[p_ConvertAndPad] 
(
    @input varchar(100),
    @length int
)
AS

BEGIN

    declare @SQL varchar(256);

    set @SQL =  'DECLARE @Result char(' + cast(@length as varchar) + ');

SELECT @Result = SUBSTRING(''' + @input + ''', 1, ' +  cast(@length as varchar) + ')

Select @Result as [char(' + cast(@length as varchar) + ')]'

    Exec (@SQL)
END
GO

exec p_ConvertandPad 'Whoa I can change dynamically',  10  -- Change number to any number you want and it should change the return type. 
```

编辑不确定这是否对您来说足够明确但关闭：

```
create function [dbo].[f_ConvertAndPad] ( @string varchar(256), @len int)
returns sql_variant
as 

BEGIN
  declare @var sql_variant;

  select @var = cast(left(@string, cast(SQL_VARIANT_PROPERTY(@len,'maxlength') as int)) as char);

  return @var

END
GO

select [dbo].[f_ConvertAndPad]('Hey what are you looking at', 3), sql_variant_property([dbo].[f_ConvertAndPad]('Hey what are you looking at', 3), 'basetype') 
```

# cocoa - 如何使我的 NSCollectionView 项目可选择？

> ID：14512751
> 
> 赞同：0
> 
> 时间：2013-01-24T23:28:24.577
> 
> 标签：cocoa, binding

在`awakeFromNib`我有：

```
[projectArrayController addObserver:self
                    forKeyPath:@"selectionIndexes"
                       options:NSKeyValueObservingOptionNew
                       context:nil]; 
```

我有：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object
                        change:(NSDictionary *)change context:(void *)context {
    NSLog(@"%@ forObject: %@",keyPath, object);
    if([keyPath isEqualTo:@"selectionIndexes"]){
        NSUInteger numberOfSelected = [[projectArrayController selectedObjects] count];
        if(numberOfSelected >0){
            if (numberOfSelected == 1){
                ProjectModel *pm =  (ProjectModel *)[[projectArrayController selectedObjects] objectAtIndex:0];
                [pm setSelected:YES];
            }
        }
    }
} 
```

其中记录：`selectionIndexes forObject: <NSArrayController: 0x1001cb6e0>[object class: ProjectModel, number of selected objects: 1]`

但是当我运行我的程序时，我实际上不能点击其他任何东西。为什么是这样？我应该使用什么类型的委托？到目前为止，我尝试使用 tableview 委托和 collectionview 委托。

或者，我怎样才能让我的 NSCollectionView 成为第一响应者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:01:38.933

我得到了这个工作，但这并不容易。您必须将集合视图的子视图子类化，它是 NSView 的子类。这是我的子类的样子......

```
@implementation GiggleCollectionSubView
@synthesize itIsSelected;

- (id)initWithFrame:(NSRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        itIsSelected = NO;
    }
    return self;
}

- (void)dealloc {
    [super dealloc];
}

- (void)awakeFromNib {

}

- (void)drawRect:(NSRect)rect {
    [[NSColor clearColor] set];
    if (self.itIsSelected) {
        [NSGraphicsContext saveGraphicsState];
        NSSetFocusRingStyle(NSFocusRingAbove);
        [[NSBezierPath bezierPathWithRect:NSInsetRect([self bounds], 2, 2)] fill];
        [NSGraphicsContext restoreGraphicsState];
    } else {
        [[NSBezierPath bezierPathWithRect:[self bounds]] fill];
    }
}

- (void)mouseDown:(NSEvent *)theEvent {
    if ([theEvent clickCount]==1) {
        if (![self itIsSelected]) {
            [[[NSApp delegate] giggleWindowController] clearCollectionView];
            [self setItIsSelected:YES];
            [self setNeedsDisplay:YES];
            [[[NSApp delegate] giggleWindowController] updateSelectionIndexes];
            [[[NSApp delegate] giggleWindowController] showSelectedImage];
        }
    }
}

@end 
```

所以你可以看到我有一个名为 itIsSelected 的实例变量。这是关键。我手动管理使一切正常的变量。首先在 drawRect 方法中，它确定子视图是否绘制了焦点环以指示选择了子视图。mouseDown: 方法中的 Next 是我检测用户何时单击子视图以选择它的位置。在那里我手动管理数组控制器的 selectionIndexes 并手动管理所有子视图的 itIsSelected 实例变量。所以首先我将方法 clearCollectionView 中的所有子视图的 itIsSelected 设置为 NO。接下来，我将单击的子视图的 itIsSelected 设置为 YES。然后我更新数组控制器的 selectionIndexes，然后根据 selectedObject 做一些事情（例如在 showSelectedImage 中）。这是这两种方法。

```
-(void)clearCollectionView {
    NSArray* cvViews = [artistImagesCV subviews];
    for (GiggleCollectionSubView* aView in cvViews) {
        if ([aView itIsSelected]) {
            [aView setItIsSelected:NO];
            [aView setNeedsDisplay:YES];
        }
    }
}

-(void)updateSelectionIndexes {
    NSArray* cvViews = [artistImagesCV subviews];
    NSMutableIndexSet* indexes = [NSMutableIndexSet indexSet];

    NSUInteger counter = 0;
    for (GiggleCollectionSubView* aView in cvViews) {
        if ([aView itIsSelected]) [indexes addIndex:counter];
        counter++;
    }
    [googleImagesArrayController setSelectionIndexes:(NSIndexSet*)indexes];
} 
```

注意：在我的子视图中，我也有一个图像视图。我必须对其进行子类化并在其 mouseDown 方法中执行类似操作。

无论如何，我希望这会有所帮助。我无法使用您尝试的方法使其正常工作，因此我按照说明手动进行了操作。祝你好运。

# wcf - 简单的 WCF SSL Web 服务

> ID：14512757
> 
> 赞同：1
> 
> 时间：2013-01-24T23:29:11.230
> 
> 标签：wcf, ssl, x509

我正在我的机器上创建一个 WCF Web 服务，这是此框中的第一个此类服务。
我已经有一个运行在我的机器上的 .NET 2.0 企业应用程序，它运行着许多 SOA SSL 服务。

我有一个内部 SSL 服务器授权，它为我的计算机创建了 SSL x509 证书。我还有许多由同一证书颁发机构创建的用于测试的客户端证书。所有这些证书都适用于我当前的应用程序。

我正在编写一个 WCF SSL Web 服务来接受纯 XML 消息，现在，为每个请求吐出每个存在的 HTTPHeader。

我在设置东西时遇到了一些问题。我让它在没有 SSL 的情况下工作。

当我使用 WCF 服务 (https) 时，它会下载并创建对象并正常修改 app.config，它还会提示我有关服务器证书的信息。但是，当我向该 WCF 服务发送消息时，它会出错。

我机器上的服务 URL：

```
 https://8KZVJS1/HeaderIntercept/HeaderIntercept.svc 
```

当我尝试提交消息时，我开始收到错误：

**客户端身份验证方案“匿名”禁止 HTTP 请求。**

我尝试修改我的 app.config 但现在我只得到：

**提供的 URI 方案“https”无效；预期的“http”。参数名称：via**

更新：做了一些编辑，我现在得到： **没有`https://8kzvjs1/headerintercept/HeaderIntercept.svc`可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。**

我需要通过一个简单的 .NET 客户端来完成这项工作，然后推送它，以便我们可以使用 Apache 反向代理将原始 SOAP 消息传递给它。

有什么想法吗？

Windows 7 - 64 位。

## **IIS**

SSL - 不需要，但可以接受

匿名访问 - 已启用。

配置编辑器 - system.webServer/security/access Ssl、SSLNegotiateCert、SSL128 检查

**WCF Web 服务 web.config**

```
 <system.serviceModel>        
    <bindings>    
      <wsHttpBinding>
        <binding name="wsHttpEndpointBinding">
          <security>
            <message clientCredentialType="Certificate" />
          </security>
        </binding>
      </wsHttpBinding>
  </bindings>
    <services>
      <service name="HeaderIntercept">           
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="wsHttpEndpointBinding" contract="WCFServiceCertificate.IService1" />
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior>
                      <serviceMetadata httpsGetEnabled="true"/>

          <serviceDebug includeExceptionDetailInFaults="false"/>
          <serviceCredentials>
              <clientCertificate>
                <authentication certificateValidationMode="PeerTrust"/>
              </clientCertificate>
              <serviceCertificate findValue="8KZVJS1" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>

  </system.webServer> 
```

**客户端 app.config**

```
 <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="wsHttpEndpointBinding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="52428800"  maxReceivedMessageSize="65536000" >
          <security mode="Transport">
            <transport clientCredentialType="Certificate" proxyCredentialType="None" realm=""/>
            <message clientCredentialType="Certificate" algorithmSuite="Default" />
          </security>
        </binding>

      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://8KZVJS1/HeaderIntercept/HeaderIntercept.svc"
          binding="wsHttpBinding" bindingConfiguration="wsHttpEndpointBinding"
          contract="HeaderIntercept.IHeaderIntercept" name="wsHttpEndpointBinding">
        <identity>
          <dns value="8KZVJS1"/>
        </identity>
      </endpoint>
    </client>
  </system.serviceModel> 
```

**IHeaderIntercept.cs**

```
[ServiceContract]
public interface IHeaderIntercept
{

    [OperationContract]
    XElement MCCI_IN200100BC(XElement xml);

} 
```

**HeaderIntercept.svc**

```
namespace WCF_Header_Intercept
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
    // NOTE: In order to launch WCF Test Client for testing this service, please select Service1.svc or Service1.svc.cs at the Solution Explorer and start debugging.
    public class HeaderIntercept : IHeaderIntercept
    {
        public XElement MCCI_IN200100BC(XElement xml)
        {
            StringBuilder sb = new StringBuilder();

            WebHeaderCollection headers = WebOperationContext.Current.IncomingRequest.Headers;
            foreach (string key in headers.Keys) {
                sb.AppendLine("header " + key + "=" + headers[key]);
            }

            OperationContext.Current.IncomingMessageHeaders.AsParallel().ForAll(h => sb.AppendFormat("Name={0}, IsReferenceParameter={1}, MustUnderstand={2}, Namespace={3}, Relay={4}, Actor={5}.{6}", h.Name, h.IsReferenceParameter, h.MustUnderstand, h.Namespace, h.Relay, h.Actor, Environment.NewLine));

            System.Diagnostics.Debug.Write(sb.ToString());
            return XElement.Parse("<data>" + sb.ToString() + "</data>");
        }     
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:57:32.857

弄清楚了。与我的合同匹配时，我的 web.config 绑定错误。我删除了命名空间以使事情变得更简单，并让它工作。

感谢托马斯的洞察力。希望我可以将其标记为答案：\

**网络配置：**

```
 <system.serviceModel>
    <services>
      <service name="HeaderIntercept" >
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="wsHttpEndpointBinding" contract="IHeaderIntercept">
          <identity>
            <dns value="CGI-8KZVJS1"/>            
          </identity>
        </endpoint>

      </service>
    </services>

    <bindings>
      <wsHttpBinding>
        <binding name="wsHttpEndpointBinding">
          <security mode="Transport">
            <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
            <message clientCredentialType="Certificate" algorithmSuite="Default" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- Add the following element to your service behavior configuration. -->
          <serviceMetadata httpsGetEnabled="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

**应用程序配置**

```
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
          <binding name="WSHttpBinding_IHeaderIntercept" >
            <security mode="Transport">
              <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
              <message clientCredentialType="Certificate" algorithmSuite="Default" />
            </security>
          </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="https://cgi-8kzvjs1/HeaderIntercept/HeaderIntercept.svc"
            binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IHeaderIntercept"
            contract="HeaderIntercept.IHeaderIntercept" name="WSHttpBinding_IHeaderIntercept">
            <identity>
                <servicePrincipalName value="host/CGI-8KZVJS1" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

# javascript - 点击 JQuery 下一个类

> ID：14512758
> 
> 赞同：0
> 
> 时间：2013-01-24T23:29:12.300
> 
> 标签：javascript, jquery

在给定的课程之后，有没有办法抢到第一堂课？

下面的代码只选择第一类（我知道什么`first`），但我希望它在每一个`.FAQAnswers`之后先选择每一个，`FAQName`这可能吗？

```
 $(".FAQName").click(function () {
    $('.FAQAnswers').first().toggle(200);
 });

<div class="FAQName">Question</div>
...
<div class="FAQAnswers">Answer</div>

<div class="FAQName">Question</div>
...
<div class="FAQAnswers">Answer</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:30:06.737

您需要找到所需的元素[`nextUntil`](http://api.jquery.com/nextUntil/)：

```
$(".FAQName").click(function() {
    $(this).nextUntil(".FAQAnswers").next().toggle(200);
}); 
```

# c# - 在 VS 2010 中调试时修改代码而无需重新构建

> ID：14512759
> 
> 赞同：1
> 
> 时间：2013-01-24T23:29:12.360
> 
> 标签：c#, visual-studio-2010, debugging

首先，我知道[在 VS 2010 中调试时修改代码](https://stackoverflow.com/questions/6138723/modifying-the-code-while-debugging-in-vs-2010)和其他类似问题，但这对我没有帮助。

我知道什么是 Edit&Continue，但我必须使用 x64 代码，所以 E&C 不是一个选项：c + E&C 有一些限制，比如创建循环等。

我想要的——只允许我修改代码，但像文件没有改变一样执行调试。仅在下一次构建时重新编译（类似于我们在 C++ 中的内容）

例如，我想添加一些评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:15:46.527

您不想修改调试器用于源视图的文件，因为这会弄乱符号信息（行号）。

在另一个目录中复制源代码并编辑该副本。使用任何版本控制系统在两个副本之间同步更改。

# javascript - 使用 url 的下拉选项值提交表单重定向

> ID：14512766
> 
> 赞同：2
> 
> 时间：2013-01-24T23:29:38.063
> 
> 标签：javascript, forms, html-select, onsubmit

我在下面的表格中遇到了问题。它只包含一个`<select>`下拉菜单和一个`submit`按钮。如果用户选择一个选项并提交表单，则内联 javascript 应该获取相应的值并相应地重定向用户。我尝试使用下面的内联 javascript，但我不知道如何选择表单内的下拉列表，可能不使用类或 id。

```
<form onsubmit="var sel = select; window.location.replace = sel.options[sel.selectedIndex].value; return false;">
    <select>
        <option>Menu</option>
        <option value="http://someurl...">Label</option>
        <option value="http://someurl...">Label</option>
        <option value="http://someurl...">Label</option>
        <option value="http://someurl...">Label</option>
        <option value="http://someurl...">Label</option>
    </select>
    <input class="btn" type="submit" value="Go">
</form> 
```

笔记：

*   我在同一页面上可能有多个这样的表单，我想使用许多 id 或类 - 我只想在内联 javascript 所在的表单内使用 select。
*   我知道这可以通过使用`select`and `onchange`来完成（我做到了，但我认为可用性选项最好包含一个按钮）。
*   我知道这可以使用 POST 而没有 javascript 来完成（例如 [http://css-tricks.com/unobtrusive-page-changer/](http://css-tricks.com/unobtrusive-page-changer/)但我想用 javascript 来完成）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:40:42.323

由于您在表单的 onsubmit 属性中，您可以通过 访问它`this`，然后使用它`getElementsByTagName`来选择`select`元素。

```
var sel = this.getElementsByTagName('select')[0]; 
```

# intellij-idea - Intellij Idea 运行/调试配置

> ID：14512768
> 
> 赞同：0
> 
> 时间：2013-01-24T23:29:44.920
> 
> 标签：intellij-idea

在 Idea（我使用的是 12.0）中，我可以选择部署 war 文件或展开的 war 文件。

我有一个正在开发的 Spring MVC/Maven 项目（尚未打包用于生产）。有人可以教育我应该选择哪一个，为什么？目前我对最快和最方便的方法感兴趣，因为我只是在开发中。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:03:47.510

您应该在开发时使用`exploded war`更快的[更新](http://www.jetbrains.com/idea/webhelp/updating-a-running-java-ee-application.html)（无需重新部署）。

`war`当您要准备应用程序以在生产服务器上部署时，应使用。

# postgresql - 如何将 PostgreSQL 字符串迁移到文本类型？

> ID：14512771
> 
> 赞同：11
> 
> 时间：2013-01-24T23:30:02.150
> 
> 标签：postgresql, jpa

我们正在使用一个看起来像这样的 JPA 注释类型（groovy 代码）：

```
@Entity
@EqualsAndHashCode
class TextNote extends Serializable {
    @Id Long id
    String text
} 
```

第一次编写它时，我对 JPA 非常陌生，首先编写了 SQL，然后使带注释的类与 SQL 匹配。在 PostgreSQL 上阅读，似乎下面是我想要的表：

```
CREATE TABLE textnote (
    id bigint NOT NULL,
    text text
); 
```

这很有效，我们的表格看起来像这样：

```
 id  |          text
-----+------------------------
 837 | really long text here 
```

我现在想要做的是正确的 JPA 实体看起来像这样：

```
@Entity
@EqualsAndHashCode
class TextNote extends Serializable {
    @Id Long id
    @Lob String text
} 
```

通过添加`@Lob`注释，JPA 提供程序（在我的例子中是休眠）可以为我正确生成 DDL，以防我们想要换出数据库。它还准确记录了我想要的文本字段。现在，当创建笔记时，我会看到如下内容：

```
 id  |          text
-----+------------------------
 837 | 33427 
```

这对于新笔记来说很好，因为当我使用 String getText() 在代码中阅读它时，它会返回非常长的文本。老实说，我不知道 PostgreSQL 是如何实现该`text`类型的，理论上我也不需要。然而，我们的生产数据库已经使用旧代码存储了许多没有注释的`@Lob`注释。在现有数据库上运行新代码会产生如下问题：

```
org.springframework.dao.DataIntegrityViolationException: Bad value for type long : not a number this time; SQL [n/a]; nested exception is org.hibernate.exception.DataException: Bad value for type long : not a number this time 
```

对于现有笔记，SQL 中有没有办法迁移旧笔记以正确使用`@Lob`和`text`键入？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T00:10:32.213

根据[Postgres 大对象文档](http://www.postgresql.org/docs/9.2/static/lo-funcs.html)，您似乎必须将每个文本块写入文件并单独导入。这不是你应该在 SQL 中做的事情。

我对JPA一无所知，但是`@Lob`与DDL或切换数据库有什么关系？您已经完全改变了列的类型；Postgres 的`text`类型有什么问题？

* * *

在这里关闭循环，这样评论就不会丢失：

真正的问题是`@Lob`创建了一个 Postgres`text`列，但[Hibernate 将其](http://www.shredzone.de/cilla/page/299/string-lobs-on-postgresql-with-hibernate-36.html)视为一个本地 Postgres“大对象”，它将数据存储在其他地方并且只在表中留下一个 oid（然后根据列类型存储为文本）。这通常不是您想要的文本。

OP 的解决方案是`@Type(type="org.hibernate.type.StringClobType")`强制 Hibernate 存储常规文本。

Postgres 通常不将文本存储为五位整数。:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-25T12:19:13.887

我使用 JPA 来注释我的实体并使用休眠来持久化它们。但我不想向我的实体添加特定于休眠的注释。因此，我有一个包含实体 + 注释的数据 jar。然后在我的实现中，我指定了 persistence.xml 并添加了一个“CustomTypes.hbm.xml”。通过persistence.xml 中的mapping-file 标签自动扫描或添加。

此映射包含我想从 basictyperegistry 覆盖的类型。在这种情况下，使用 materialized_clob 类型。这是我不想要的，因为当我使用查询工具浏览我的数据库时，我希望能够直接查看实际内容。所以我补充说：

```
<typedef name="materialized_clob" class="org.hibernate.type.TextType" /> 
```

强制对所有 clob 使用指定的类型，而无需在我的数据包中添加特定的注释。

您可以通过在 DEBUG 级别记录 org.hibernate.type.BasicTypeRegistry 来查看映射。

我花了一些时间来解决这个问题，我希望这能帮助任何面临同样问题的人。因为这可能也会解决您的问题，所以我认为可能值得在这里发布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-07T05:22:27.493

我相信它已经晚了，但是对于将来遇到同样问题的任何人。

我也遇到了类似的问题，我在文本列中有旧数据，而不是 OID。当我尝试将这些数据与升级的应用程序一起使用时，我也得到了

```
Bad value for type long 
```

为了解决这个问题，我创建了[这个脚本](https://github.com/tyagiakhilesh/miscellaneous/blob/master/dataMigration.sql)。也许它可以在将来帮助某人。

[我从这里](https://stackoverflow.com/questions/10139077/convert-a-bytea-column-to-oid-while-retaining-values)的这篇文章中得到了很大的帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T11:19:06.583

如果使用 spring 你可以创建`LocalSessionFactoryBean`后代来注入 Hibernate 类型覆盖。参见示例：

```
 public class CustomSessionFactoryBean extends LocalSessionFactoryBean {

    @Override
    protected SessionFactory buildSessionFactory(LocalSessionFactoryBuilder sfb) {
        // To store @Lob annotated Strings in TEXT fields.
        // By default for Postgres generated TEXT column, but stored OID of Postgres LOB object
        sfb.registerTypeOverride(new TextType() {
            @Override
            public String getName() {
                return StandardBasicTypes.MATERIALIZED_CLOB.getName();
            }
        });
        sfb.registerTypeOverride(new NTextType() {
            @Override
            public String getName() {
                return StandardBasicTypes.MATERIALIZED_NCLOB.getName();
            }
        });

        super.buildSessionFactory(sfb);
    }
 } 
```

您不需要使用 Hibernate 特定的注解`@Type`，只需使用`@Lob`和使用对 String 属性进行注解即可`CustomSessionFactoryBean`

# ruby-on-rails - Heroku 调度程序：在 Rake 任务失败时发送电子邮件

> ID：14512774
> 
> 赞同：5
> 
> 时间：2013-01-24T23:30:16.803
> 
> 标签：ruby-on-rails, heroku

作为 Rails 应用程序的一部分，我正在使用调度程序插件在 Heroku 上运行 Rake 任务。如果任务失败（即引发异常），是否有一种简单的方法来获取通知电子邮件？理想情况下，电子邮件将包括堆栈跟踪以及该任务在该点之前生成的任何输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:26:55.700

我最终通过为 Rake 任务编写 exception_notification 扩展来更全面地解决我的问题，称为[notification_exception-rake](https://github.com/nikhaldi/exception_notification-rake)。我还专门写了[一篇](http://blog.nikhaldimann.com/2013/02/19/failure-notifications-for-rake-tasks-on-the-heroku-scheduler/)关于如何在 Heroku 上使用它的博客文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:33:40.140

有一个很棒的附加组件[Airbrake](https://www.airbrake.io/pages/home)，您可能想研究一下。除了任务生成的输出之外，它会执行您要求的所有操作。[您可以使用Papertrail](https://papertrailapp.com/)等其他插件获得 rake 任务输出。

# foursquare - Foursquare 探索 API 半径参数不起作用

> ID：14512776
> 
> 赞同：3
> 
> 时间：2013-01-24T23:30:46.267
> 
> 标签：foursquare

当您指定半径时，使用带有 near vs ll 的 explore 端点会给出不同的结果。

使用 ll 时，半径按预期工作。但是当查询在附近使用时，它似乎忽略了半径参数。

我的查询（没有客户 ID 和秘密）： [https ://api.foursquare.com/v2/venues/explore?near=Menlo%20Park%20California&radius=250§ion=coffee&v=20130101](https://api.foursquare.com/v2/venues/explore?near=Menlo%20Park%20California&radius=250&section=coffee&v=20130101)

[https://api.foursquare.com/v2/venues/explore?ll=37.45383,-122.18219&radius=250§ion=coffee&v=20130101](https://api.foursquare.com/v2/venues/explore?ll=37.45383,-122.18219&radius=250&section=coffee&v=20130101)

第一个覆盖半径参数，并在响应中显示“suggestedRadius”：7924 第二个返回“suggestedRadius”：250，如预期的那样。

难道我做错了什么？有没有其他人看到过这种行为？
有没有办法可以正确使用“near”参数和半径？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:48:50.377

与 一起使用时，该`radius`参数无效`near`。例如，此查询[https://api.foursquare.com/v2/venues/explore?near=Menlo%20Park%20California& **radius=10** §ion=coffee&v=20130101](https://api.foursquare.com/v2/venues/explore?near=Menlo%20Park%20California&radius=10&section=coffee&v=20130101)或完全不带参数运行它`radius`仍然返回与您的相同的结果原始查询。

`near`如果您想达到类似的效果，也许可以通过提供邮政编码等操作来缩小您的参数范围。

# lua - 为什么 Lua 禁止 goto 覆盖本地 var 定义？

> ID：14512778
> 
> 赞同：6
> 
> 时间：2013-01-24T23:30:50.937
> 
> 标签：lua

我从手册[http://lua-users.org/wiki/GotoStatement中读到了这个](http://lua-users.org/wiki/GotoStatement)

我在循环中有一个类似的代码块：

```
while true do
  if someCond == nil then
      goto f  -- invalid (forward jump into scope of local definition)
  end

  local x = 1
   -- do something with x
  ::f::
end 
```

这将失败并显示“...跳转到本地 x 的范围”

但为什么？如果在使用本地 x 之后执行跳转 - 它不再被触及 - 因此这里不再需要“本地 x”

当我只用 x = 1 （在全局中制作）切换本地 x 时，它工作正常。

这是疏忽还是缺少优化？例如，也许他们总是假设在跳转到标签后可以使用本地变量

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T23:53:33.970

我不太确定本地人是如何注册的，但它们是通过数字索引引用的。据推测，如果使用 a`goto`跳过本地定义，则永远不会创建本地，因此任何试图在标签之后访问本地的人都会尝试使用无效索引。

你是对的，理论上，如果 local 在标签之后从未使用过，那么它不一定要阻止跳转，但在实践中，lua local 一直存在到其范围的末尾，而不是在它的最后一个之后死亡用法。任何类型的动态代码执行都要求这是真的。

但是，您可以使用`do`-block 来限制本地人的范围。使用您的代码，您可以将其重写为

```
while true do
  if someCond == nil then
      goto f
  end

  do
      local x = 1
       -- do something with x
  end -- x is now gone
  ::f::
end 
```

# android - 如何选择性地使缓存的图库图像无效？

> ID：14512782
> 
> 赞同：0
> 
> 时间：2013-01-24T23:31:16.427
> 
> 标签：android

我的 Android 应用程序中有一个[画廊](http://developer.android.com/reference/android/widget/Gallery.html)小部件，显示汽车的图像（它不是真正的汽车，但汽车作为示例）。画廊在画廊中为每个项目显示一个汽车模型，所以我们可能有一个类似的画廊：

1.  福特 T 型车
2.  保时捷 911
3.  福特野马

当用户长按图库中的一个项目时，他们可以为相关汽车选择一个新图像——因此，如果用户长按福特野马图像，他们会看到一个新的福特野马图片库，他们可以选择他们真正想在主画廊中看到的图像（也许他们想看到红色而不是黄色）。

这在代码中工作得很好——我只有一个整数数组，其中每个汽车模型的数组中有一个整数，每个整数代表图像的索引。

用户选择一个新图像，然后日志显示：

```
MoreCarImagesGallery：用户为 ID 为 219（福特野马）的汽车选择了图像 3
MainGalleryAdapter：为位置 2 的汽车设置选定图像 (3)

```

[适配器](http://developer.android.com/reference/android/widget/BaseAdapter.html)getView() 然后执行：

```
Image img = imageLookup.getImageForCar(car.id, selectedImageIndexes[position]); 
```

然而！当我回到主画廊时，之前显示的有关汽车的图像仍在显示。但！当我从显示的汽车向左或向右滚动一些项目，然后滚动回该汽车时，图像会更新为“新”（用户选择的）图像。

所以很明显画廊正在对我的适配器中的图像进行一些缓存。我可能希望这种情况继续发生，因为我认为如果没有缓存，画廊在速度较慢的手机上会非常滞后。

如何使我的画廊中的图像无效以强制我的适配器 getView() 返回“新”图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:34:03.133

假设您实际上已经更新了图库适配器背后的数据，您可以在更改数据后在主图库的适配器上调用 notifyDatasetChanged()。

[http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged) ()

# linux - 截断的 find ./ 命令

> ID：14512785
> 
> 赞同：1
> 
> 时间：2013-01-24T23:31:22.873
> 
> 标签：linux, unix, find

如果我这样做`find ./`，我会得到类似的结果：

```
/Volumes/FulfilmentArray//.Trashes/1060/ffmpeg2pass-0.log.mbtree.temp 
```

有没有办法执行`find ./`命令只返回文件名和容器文件夹？在上述情况下，它将是：

```
1060/ffmpeg2pass-0.log.mbtree.temp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:38:16.717

```
find ./ | rev | cut -d/ -f-2 | rev 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:54:50.530

```
find ./ | rev | cut -d/ -f-2 | rev 
```

一点解释可能会有很长的路要走。使用的命令：

*   rev：反转每一行中的字符顺序。（[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?rev)）
*   cut：从文件的每一行中删除部分。（[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?cut)）

所以前面的代码是用一个例子做的：

1.  打印出相对于当前目录的所有文件的路径

    ```
    ./Machine Learning - Stanford/Self-notes/08-10.txt 
    ```

2.  反转路径字符串

    ```
    txt.01-80/seton-fleS/drofnatS - gninraeL enihcaM/. 
    ```

3.  在第二个正斜杠处剪切字符串，留下第一部分（因此包括文件名和包含文件夹，相对于执行 find 的文件夹的位置）

    ```
    txt.01-80/seton-fleS --separated here-- /drofnatS - gninraeL enihcaM/. 
    ```

4.  反转结果

    ```
    Self-notes/08-10.txt 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T23:42:53.437

我敢肯定 awk 可以换成 sed。自从您说文件名以来，我添加了“-type f”标志，但是如果您也想要目录，只需将其删除即可。

```
find ./ -type f|awk -F'/' '{ print $(NF-1)"/"$NF }' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T23:45:37.583

这可能是一种解决方法：

```
find . | awk -F "/" '{ if (NF > 2) { print $(NF-1) "/" $NF; } else { print $NF; }}' 
```

# assembly - MARS 中的 MIPS 汇编语言 - 如何更改文件指针？

> ID：14512786
> 
> 赞同：-1
> 
> 时间：2013-01-24T23:31:23.497
> 
> 标签：assembly, mips

我需要 MIPS 汇编语言方面的帮助。我正在为我的大学项目做口译员，但遇到了下一个问题：

我需要阅读一个文本文件。我已经为此编写了所有函数。问题是：读取文件的第一行后文件指针没有改变。

代码：

```
# Get file name from user
jal getFileName
# Open file in read mode
la  $a0, szFilename
li  $a1, 0  # open for reading
jal fopen
# Save file handler
la  $a0,    hFile
sw  $v0, ($a0)
######### MAIN INTERPRETER CODE ########### 

la  $a0, hFile
lw  $a0, ($a0)  # $a0 = file handler
la  $a1, line       # $a1 = address of line
li  $a3, 255        # $a3 = length of line
jal readLine

la  $a0, line
jal puts

# try to read next line

la  $a0, hFile
lw  $a0, ($a0)  # $a0 = file handler
la  $a1, line       # $a1 = address of line
li  $a3, 255        # $a3 = length of line
jal readLine

la  $a0, line
jal puts 
```

我的文件内容：

```
vAr A;
var b = false; 
```

输出是：

```
Enter filename: code.txt
var a;var a; 
```

PS我的函数readLine将文本从大写转换为小写

我怎么解决这个问题？

我的功能代码：

```
getFileName:
sub $sp, $sp, 4 # allocate memory in stack to strore 4 bytes
sw  $ra, ($sp)      # save return address to stack
# display message
la  $a0, szEnterFilename
jal puts
#############
# get filename from console
la  $a0, szFilename
li  $a1, 16
jal gets
###############
la  $a0, szFilename
li  $a1, '\n'
li  $a2, 0
jal strrep
###############
lw  $ra, ($sp)      # get return address from stack
addi    $sp, $sp, 4 # clear reserved bytes
jr  $ra         # return to caller

# Open file for reading
# $a0 - address of filename
# $a1 - mode (flags are 0: read, 1: write)
# Return value: $v0 - file handler
fopen:
    li  $v0, 13                  # system call for open file 
    li  $a2, 0                  # mode is ignored
    syscall                             # open a file (file descriptor returned in $v0)
    jr  $ra

# Reads one line from file
# $a0: file handler
# $a1: address of line
# $a3: line length
# Return value:
#   $v0 : number of characters read (0 if EOF, negative if error)
readLine:
    li  $t0, 0  # we will store here total bytes read before \n
rl_read:
    li  $a2, 1  # max number of character to read
    li  $v0, 14 # code to read from file
    syscall     # read from file
    add     $t0, $t0, $v0
    lb  $t1, ($a1)
    beq $t1, '\r', rl_end
    beq $t1, '\n', rl_end
    beq  $t1, $zero, rl_end
    or  $t1, $t1, 0x20
    sb  $t1, ($a1)
    addi    $a1, $a1, 1
    j   rl_read
rl_end:
    sb  $zero, ($a1)
    jr  $ra

# Read string from console
# $a0 - address of line
# $a1 - length of line
gets:
    li  $v0, 8
    syscall
    jr  $ra 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:07:49.973

我很失望你仍然无法发布完整的代码。我们在这里为您提供帮助，但请尊重我们，不要浪费我们的时间。

我已经填写了我认为合适的其余细节，然后代码在`SPIM`我使用的模拟器中运行：

![在此处输入图像描述](../Images/48c536a5abdaee9c57b0c9a604d5aa16.png)

我测试的代码：

```
main:
sub $sp, $sp, 4 # allocate memory in stack to strore 4 bytes
sw  $ra, ($sp)      # save return address to stack
# Get file name from user
jal getFileName
# Open file in read mode
la  $a0, szFilename
li  $a1, 0  # open for reading
jal fopen
# Save file handler
la  $a0,    hFile
sw  $v0, ($a0)
######### MAIN INTERPRETER CODE ###########

la  $a0, hFile
lw  $a0, ($a0)  # $a0 = file handler
la  $a1, line       # $a1 = address of line
li  $a3, 255        # $a3 = length of line
jal readLine

la  $a0, line
jal puts

# try to read next line

la  $a0, hFile
lw  $a0, ($a0)  # $a0 = file handler
la  $a1, line       # $a1 = address of line
li  $a3, 255        # $a3 = length of line
jal readLine

la  $a0, line
jal puts
lw  $ra, ($sp)      # get return address from stack
addi    $sp, $sp, 4 # clear reserved bytes
jr $ra

getFileName:
sub $sp, $sp, 4 # allocate memory in stack to strore 4 bytes
sw  $ra, ($sp)      # save return address to stack
# display message
la  $a0, szEnterFilename
jal puts
#############
# get filename from console
la  $a0, szFilename
li  $a1, 16
jal gets
###############
la  $a0, szFilename
li  $a1, 10
li  $a2, 0
jal strrep
###############
lw  $ra, ($sp)      # get return address from stack
addi    $sp, $sp, 4 # clear reserved bytes
jr  $ra         # return to caller

# Open file for reading
# $a0 - address of filename
# $a1 - mode (flags are 0: read, 1: write)
# Return value: $v0 - file handler
fopen:
    li  $v0, 13                  # system call for open file
    li  $a2, 0                  # mode is ignored
    syscall                             # open a file (file descriptor returned in $v0)
    jr  $ra

# Reads one line from file
# $a0: file handler
# $a1: address of line
# $a3: line length
# Return value:
#   $v0 : number of characters read (0 if EOF, negative if error)
readLine:
    li  $t0, 0  # we will store here total bytes read before \n
rl_read:
    li  $a2, 1  # max number of character to read
    li  $v0, 14 # code to read from file
    syscall     # read from file
    add     $t0, $t0, $v0
    lb  $t1, ($a1)
    beq $t1, 13, rl_end
    beq $t1, 10, rl_end
    beq  $t1, $zero, rl_end
    or  $t1, $t1, 0x20
    sb  $t1, ($a1)
    addi    $a1, $a1, 1
    j   rl_read
rl_end:
    sb  $zero, ($a1)
    jr  $ra

# Read string from console
# $a0 - address of line
# $a1 - length of line
gets:
    li  $v0, 8
    syscall
    jr  $ra

puts:
    li $v0, 4
    syscall
    li $v0, 11
    li $a0, 10
    syscall
    jr $ra

strrep:
    lb $t0, ($a0)
    beq $t0, $zero, strrep_end
    bne $t0, $a1, strrep_next
    sb $a2, ($a0)
strrep_next:
    addiu $a0, $a0, 1
    b strrep
strrep_end:
    jr $ra

.data
hFile: .word 0
szEnterFilename: .asciiz "Enter filename: "
szFilename: .space 80
line: .space 255 
```

# php - 如何知道从列表中选择了哪个成员并显示正确的信息（SQL/PHP/JS）

> ID：14512788
> 
> 赞同：0
> 
> 时间：2013-01-24T23:31:48.630
> 
> 标签：php, javascript, sql

我有一个数据库，其中的成员的名字显示在我页面的列表中。每个成员名称都是一个链接，将用户带到一个新页面，该页面显示有关该所选成员的信息。我有文件`data.php`，`members.php`并且`profiles.php`

这是从数据库（data.php）中获取成员的代码：

```
$query = "SELECT name FROM members";
$result = mysql_query($query);

if (!$result) die ("Database access failed: " . mysql.error());

$rows = mysql_num_rows($result);

for($j=0; $j<$rows; $j++){
echo '<li><a href="profiles.php">' . mysql_result($result,$j, 'name') . '</a></li>';
} 
```

Javascript (members.php):

```
<script type="text/javascript">
$.get("data.php", function(data) {
    $('#result').html(data);
});
</script> 
```

HTML (members.php):

```
<fieldset data-role="controlgroup">
<p>Search for members of QRFC.</p>
<ul data-role="listview" data-theme="c" data-filter="true" id="result">
</ul>
</fieldset> 
```

所以名称显示正确，现在我希望我的页面`profiles.php`显示成员信息。我处于停顿状态，不知道从哪里开始。

非常感谢您朝正确的方向踢球！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:42:12.350

在 url 中传递用户 ID：

```
echo '<li><a href="profiles.php?memberId=' . $row['id'] . '">' . $row['name'] . '</a></li>'; 
```

在profiles.php 文件上进行如下查询：

```
$query = "SELECT * FROM members WHERE memberId = '".$_GET['memberId']."'";
$result = mysql_query($result) or die(mysql_error()); 
```

之后，如您所知，用于获取成员信息的 while 循环......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:50:19.070

在我看来，您需要执行以下操作：

1 - 当您获取成员时，还要获取他们的成员 ID（假设您有一个）。如果不是，我猜你可以使用他们的名字，假设它们是独一无二的。

2 - 将该 id 添加到您的 href 链接：`<a href="profiles.php?memberId=' . mysql_result($result,$j, 'memberid') . '">`

3 - 在您的profiles.php页面上，请求memberId - 这是一篇关于在php页面中请求变量的帖子：[PHP Request.QueryString - $_GET with conditions not sure how to](https://stackoverflow.com/questions/4546374/php-request-querystring-get-with-conditions-not-sure-how-to)

4 - 最后查询您的数据库以获取有关所请求用户的其他信息。

希望这有助于您入门。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T01:41:52.230

您的 members.php 文件可以正常工作。

data.php （清理你的语法以不那么复杂）

```
$query = "SELECT name FROM members";
$result = mysql_query($query);

if (!$result) die ("Database access failed: " . mysql.error());

while ($row = mysql_fetch_assoc($result)):
  echo '<li><a href="profiles.php?memberId=' . urlencode($row['name']) . '">' . $row['name'] . '</a></li>';
endwhile; 
```

**重要提示**：通过查询字符串传递字符串时，分别使用`urlencode`和`urldecode`。

profile.php（至少查询检索部分）

```
$name = urldecode(trim($_GET['memberId'));
$query = "SELECT * FROM members WHERE memberId = '$name'"; 
```

**另一个注意事项**：如果您传递 ID 以从数据库中检索记录，最好使用数值而不是文本。这有助于减少 sql 注入。这里还有很多东西要学，但你必须从某个地方开始。

# c - 将寄存器转储到堆栈中以进行保守的堆栈扫描

> ID：14512790
> 
> 赞同：8
> 
> 时间：2013-01-24T23:31:56.787
> 
> 标签：c, garbage-collection, stack, compiler-optimization, cpu-registers

我正在用 C 编写一个非侵入性的保守 GC，我对它的堆栈扫描阶段的正确性有些担心。

具体来说，在没有启用编译器优化的情况下，它可以正常工作，因为每个局部变量（指向一个对象）都“可预测地”分配在堆栈上。在`-O3`中，GC 遗漏了一些有效的引用，我认为这是因为编译器选择使用寄存器（而不是 GC 扫描的堆栈）来传递一些变量和函数参数，而 GC 不是（还) 被编程来处理。（如果您怀疑这仍然不应该发生并且我误读了问题的根源，请告诉我。）

除了一些基本要求（必须使用 a`GC_malloc`而不是`malloc`GC 对象，不从非 GC 堆指向 GC 堆，当然，不显式调用`free`），GC 不应该有来自客户端的任何更多要求代码或编译器。因此，不能从客户端代码中要求任何其他特殊模式。同样，强制使用此 GC 的程序使用特殊的编译器标志（抑制堆栈优化）编译应该是最后的选择，充其量是。解决了这两个问题，这是我的问题的基础。

我正在尝试找到一种方法让 GC`-O3`无缝处理这种情况（通过堆栈优化）。这是我的思路（更准确地说是假设）：

1.  无论 GCC（或任何有效的编译器）在优化方面走多远，它都不会走得太远以至于会损害程序的正确性。
2.  如果 [1] 成立，我相信（至少在 C 的实际实现中）如果**一个可访问**（在任何调用级别分配为本地）**变量**将完全保持可访问，它**必须要么在堆栈上，要么在当前的寄存器集**，但在其他任何地方都没有。
3.  如果 [2] 成立，这*应该*意味着在 GC 周期开始时简单地将所有寄存器转储到堆栈中将保证后续堆栈扫描现在也能找到先前丢失的引用。
4.  此外，如果 [1] 和 [2] 成立，那么如果编译器允许任何变量被覆盖（大多数情况下是基于寄存器的变量），这意味着它已经执行了某种程度的代码分析，并且已经证明该变量未在该函数的其他任何地方使用。所以，从这个意义上说，如果我们在堆栈或寄存器转储中看不到变量，即使它仍在范围内（理论上），这不应该成为警报的原因（对我来说），因为编译器有只是通过摆脱死引用来帮助 GC。

**问题 #1：我的***所有*4 个假设都正确吗？

**问题 #2：**强制寄存器转储的最便携方式是什么？我发现一些消息来源声称一个简单的`setjmp`调用就会产生这种效果。它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:44:25.713

Q1。是的，我相信您的所有四个陈述都是正确的（至少如果我们忽略编译器错误！）

Q2。setjmp 将保存一些寄存器，但不一定是所有寄存器。但是，它应该足以满足您的目的，因为任何未由 setjmp 保存的寄存器都应该保存在堆栈中。

我想如果有人在某处的缓冲区中存储看起来像地址的东西，即使不是，你的方案可能会出错。

您还必须记住，有时人们会用指针做“有趣”的事情。例如

```
struct blah
{
    size_t size;
    char *file;
    int line;
};

struct blah *p = malloc(sizeof(struct blah) + size); 
... more lines of code goes here to fll in size, file and line in blah. 
void *np = (p+1); 
```

这意味着您存储的指针根本不指向块的开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:25:13.200

The big problem with #1 is programs that do things that are undefined (or questionable), but that generally work. Things like using pointers as magic constants that get stored in files or sent across network connections and generally forgotten about locally, but then they might come back (from the file or network) and be dereferenced later. Or the old "xor prev and next pointers" trick for a linked list with only one pointer of overhead per node.

# vb.net - 使用内部和外部 for 循环填充 datagridview 的困难

> ID：14512791
> 
> 赞同：1
> 
> 时间：2013-01-24T23:32:00.967
> 
> 标签：vb.net

我一直在寻找我的问题的答案，但不幸的是没有任何成功。

首先，这是我的代码：

```
 For x = 0 To (NumberOfRows - 1)
        For y = 0 To (NumberOfColumns - 1)
            DataGridView1.Rows(x).Cells(y).Value = TrimmedData(ArrayIndex)
            ArrayIndex = ArrayIndex + 1
        Next
    Next 
```

我已经为datagridview预先设置了列数和行数。然后，上面的代码循环通过两个 for 循环，以尝试使用字符串数组中的数据填充 datagridview。

问题是这里的这一行：

```
DataGridView1.Rows(x).Cells(y).Value = TrimmedData(ArrayIndex) 
```

当我有变量 x 和 y（以确定行和单元格位置）时它不喜欢它，如果我只有变量 x 或只有变量 y（另一个是固定数字，例如这段代码）它工作正常很好：

```
DataGridView1.Rows(x).Cells(0).Value = TrimmedData(ArrayIndex) 
```

任何人都可以帮助我如何在这样的循环中填充数据吗？

先感谢您。

编辑，这是完整的子程序代码：

```
 Private Sub ExtractData()
    Dim x As Decimal = 0
    Dim y As Decimal = 0
    Dim GetData As String = " StartOfData ,10,03,John Smith,8207176,a,c,d,b,d,a,b,d,c,b,Bill McBill,8109871,b,d,c,b,a,d,c,b,d,a,Amy Bunton,8212345,a,d,c,a,d,b,c,d,b,c, EndOfData "
    Dim TrimmedData() As String = GetData.Split(",")
    ' we need to find where the start of our data is (we do this because we may have recieved the same data, multiple times.)
    While TrimmedData(x) <> " StartOfData "
        x = x + 1
    End While
    Dim StartOfArrayData As Decimal = (x + 1)  'we have just found where StartOfData is written, so we add one to go to the actual start of our data
    Dim ArrayIndex As Decimal = StartOfArrayData
    Dim NumberOfColumns As Decimal = TrimmedData(ArrayIndex) + 2  'the first number in the array tells us how many questions there are in the exam. We add 2 because we need the student name and ID number
    ArrayIndex = ArrayIndex + 1 ' now we are at the location where it tells us how many students there are.
    Dim NumberOfRows As Decimal = TrimmedData(ArrayIndex) + 1   ' we need to add one extra row because we have a certain number of rows for our student names + one extra for the headings
    ArrayIndex = ArrayIndex + 1
    DataGridView1.ColumnCount = NumberOfColumns
    DataGridView1.RowCount = NumberOfRows
    ' and now we need to know where the end of our data is
    While TrimmedData(x) <> " EndOfData "
        x = x + 1
    End While
    Dim EndOfArrayData As Decimal = (x - 1)  'we have just found where EndOfData is written, so we minus one to go to the actual end of our data
    For x = 0 To (NumberOfRows - 1) ' we minus one because we are starting from 0 and not 1
        For y = 0 To (NumberOfColumns - 1)  ' we minus one because we are starting from 0 and not 1
            DataGridView1.Rows(x).Cells(y).Value = TrimmedData(ArrayIndex)
            ArrayIndex = ArrayIndex + 1
        Next
    Next
End Sub 
```

背景信息 - 我刚开始制作一个考试系统，学生有一个小型无线设备，上面有五个标记为 ABCD 和 SUBMIT 的按钮，学生将在数据投影仪上显示问题，然后他们按下 ABCD 按钮之一然后提交。该答案将发送到连接到计算机的基于微控制器的设备。一旦提交了所有问题的所有答案，它就会将数据串行发送到计算机程序（即我正在处理的这个 Visual Basic 程序），这些数据将在我的代码中使用 - 目前我只是通过输入来测试它在一些默认数据 IE

```
Dim GetData As String = " StartOfData ,10,03,John Smith,8207176,a,c,d,b,d,a,b,d,c,b,Bill McBill,8109871,b,d,c,b,a,d,c,b,d,a,Amy Bunton,8212345,a,d,c,a,d,b,c,d,b,c, EndOfData " 
```

希望有帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:22:56.873

您已指定；

```
Dim x As Decimal = 0
Dim y As Decimal = 0 
```

将其更改为；

```
Dim x As Integer = 0
Dim y As Integer = 0 
```

这将解决缩小转换错误...但是，您可能需要查看数学以获取数据...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:17:28.707

从最简单的事情开始，所有硬编码值。如果可行，请逐渐添加动态内容。

我猜它可能在你的数组中，尝试删除它并使用像“我的数据”这样的字符串。另外，您在gridview 中有页眉或页脚吗？现在也删除那些。抱歉，我输入了这个作为答案，但我认为我还不能发表评论。

# ios - 将 CocoaPods 与 iOS 逻辑测试一起使用时找不到库

> ID：14512792
> 
> 赞同：150
> 
> 时间：2013-01-24T23:32:02.620
> 
> 标签：ios, unit-testing, cocoapods

我正在尝试针对我的项目中的类编写一些 iOS 逻辑测试，这些类使用我的 podspec 中某些库的功能。我正在使用 Xcode 中提供的标准单元测试包（虽然不是应用程序测试，只是单元测试）。

例如，我使用 Magical Record，并且在我的 podspec 中链接了该库。它存在于我工作区的 Pods 项目中，当应用程序在模拟器或设备上运行时，它可以按预期工作。但是，当我尝试链接到使用 Magical Record 的测试对象时，我收到一个链接器错误，指出它无法从 Magical Record 中找到选择器。我尝试在我的逻辑测试包中更新我的 HEADER_SEARCH_PATH，甚至将其硬编码到 CocoaPods 创建的 headers 目录中，但没有运气。

我可以毫无问题地针对不使用 CocoaPods 库的类运行单元测试。

我要解决这个问题了吗？我应该做其他事情来让编译器看到 CocoaPods 库吗？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2013-07-26T16:00:22.067

CocoaPods 1.0 改变了它的语法。现在看起来像这样：

```
def shared_pods
    pod 'SSKeychain', '~> 0.1.4'
    ...
end

target 'Sail' do
    shared_pods
end

target 'Sail-iOS' do
    shared_pods
end 
```

* * *

Pre CocoaPods 1.0 答案

您要使用的内容[`link_with`](https://guides.cocoapods.org/syntax/podfile.html#link_with)来自您的`Podfile`. 就像是：

```
link_with 'MainTarget', 'MainTargetTests' 
```

然后`pod install`再次运行。

* * *

## 回答 #2

> 赞同：174
> 
> 时间：2013-01-25T02:58:22.703

我通过查看我的应用程序的主要目标是如何从 CocoaPods 库接收设置来弄清楚这一点。CocoaPods 包含一个名为 Pods.xcconfig 的 .xcconfig 文件。此文件包含所有标题搜索路径。

如果您在项目导航器中查看您的项目并单击信息选项卡，您将在顶部看到您的构建配置。如果您为不同的配置打开显示三角形，您将看到主要目标下列出的 Pod。我还必须单击下拉菜单并将 Pod 添加到逻辑测试目标。

![配置快照](../Images/31c0a4dd772ff345f8334c5d1dd4c242.png)

我还必须复制我的主要目标的设置`$(inherited)`并将`${PODS_HEADERS_SEARCH_PATHS}`它们复制到构建设置/HEADER_SEARCH_PATHS 下的逻辑测试目标。

最后，我必须在 Link Binary with Libraries 构建阶段为我的逻辑测试目标添加 libPods.a。

希望这能够帮助别人。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2013-05-21T08:12:31.467

我在这里找到了一个解决方案[Unit Tests With CocoaPods](http://samwize.com/2012/10/01/unit-tests-with-cocoapods/)：

在 Xcode 中打开项目文件，然后选择 Project（不是目标），在右侧面板中，有一个名为 Configurations 的部分。在“基于配置文件”列中为您的测试目标选择 Pod。

![在此处输入图像描述](../Images/f5eddab426c672e888cc2abc4e8d378a.png)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-11-27T07:19:51.307

我同意其他答案，即有必要将库链接到测试目标。然而，到目前为止，没有任何建议对我有帮助。正如@fabb 在评论中所写：“在测试时，`isSubclassOfClass:`调用返回 NO，它们应该返回 YES。我可以解释的唯一原因是依赖项确实链接到主目标和测试目标，以及当测试目标的包loader 加载主包，它无法决定采用哪个类。” 我对这个线程中所有以前的建议都遇到了同样的问题。

我开始工作的解决方案是更新我的 Podfile 以为我的主要目标和测试目标定义特定的 Pod：

```
target 'MyTarget' do
   pod 'AFNetworking', '~> 2.5.0'
   pod 'Mantle', '~> 1.5'
end

target 'MyTargetTests' do
   pod 'OCMockito', '~> 1.3.1'
end 
```

即使我没有使用任何特定于测试的 Pod，也有必要为我的测试目标指定一个Pod *。*否则 CocoaPods 不会在我的项目中插入必要的链接逻辑。

[这个链接](https://github.com/CocoaPods/CocoaPods/issues/1411)帮助我得出这个结论。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-12-01T06:26:39.210

我添加`:exclusive => true`以避免应用程序测试目标中出现重复的符号错误。

```
target 'myProjectTests', :exclusive => true do
   pod 'OCMock', :head
   pod 'XCTAsyncTestCase', :git => 'https://github.com/iheartradio/xctest-additions.git'
end

link_with 'myProject', 'myProjectTests' 
```

当我将应用程序测试目标更改为逻辑单元测试时，会出现链接器错误。删除后`:exclusive => true`，一切都恢复正常。

```
target 'myProjectTests', do
   pod 'OCMock', :head
   pod 'XCTAsyncTestCase', :git => 'https://github.com/iheartradio/xctest-additions.git'
end

link_with 'myProject', 'myProjectTests' 
```

`:exclusive => true`声明外部的所有内容`do...end`都不应链接到`myProjectTests`，这在应用程序测试目标中是合理的，但它会导致逻辑测试目标中的链接器错误。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-01-21T21:30:57.020

您可以根据@Keith Smiley 解决方案使用 link_with 。

如果您有共同的 pod 和每个目标的细节，您可能希望使用“def”选项来定义 pod 组。并稍后在独占目标中使用“def”。

```
def import_pods
    pod 'SSKeychain'
end

target 'MyProjectTests', :exclusive => true do
  import_pods
end

target 'MyProject', :exclusive => true do
  import_pods
  pod 'Typhoon'
end 
```

在上面的示例中，我将“SSKeychain”添加到两个目标，而“Typhoon”仅添加到“MyProject”目标

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-07-25T12:59:30.073

我对这个问题的解决方案是更改我的 Podfile 以将库包含在两个目标中，就像这样

```
target "MyApp" do  
    pod 'GRMustache', '~> 7.0.2'
end

target "MyAppTests" do
    pod 'GRMustache', '~> 7.0.2'
end 
```

而且由于我使用的是 swift 我还必须配置测试目标以包含该`MyApp-Bridging-Header.h`文件。（在 Build Settings 选项卡下的 Swift Compiler 组中）

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-03-05T16:54:44.070

当我在某些版本控制期间丢失了一些库文件时，我也遇到了类似的情况。我仍然在我的 Pod 中看到了库文件，但是由于缺少实际代码，XCode 说它已经消失了。令我沮丧的是，运行“pod install”并没有立即恢复丢失的文件。

我必须通过执行以下操作手动移除和更换 pod：

1.  从 Podfile 中删除库
2.  运行“pod install”以完全删除库
3.  将库放回 Podfile
4.  再次运行“pod install”

这应该使图书馆恢复其原始形式。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-04-16T00:56:57.600

还值得注意的是，如果你`libPods.a`添加了两次，你会得到一些像这样的讨厌的错误：

```
232 duplicate symbols for architecture i386 
```

要修复它，只需删除`libPods.a`Project Explorer 中的一个引用。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-09-12T12:06:05.047

试试这个它对我有用，

我们需要在 Configurations 中设置 Pod，

**Xcode 项目（您的项目）中的 Project->Info->Configurations**应设置为主项目“Pods”以进行调试、发布（以及您拥有的其他内容）。请参阅[“未找到标题 - 不包括搜索路径”](https://github.com/CocoaPods/CocoaPods/issues/670)

[![在此处输入图像描述](../Images/3d7bf8c0eefa5bda9c684a4a997c1192.png)](https://i.stack.imgur.com/3a5PH.png)

希望这对某人有所帮助。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-11-29T13:16:53.857

从 CocoaPods 1.x 开始，有一种新方法可以在目标和相应的测试目标之间声明共享依赖项。到目前为止，我一直在使用 Mark Struzinski 接受的解决方案，但是在运行我的测试时使用这种方法会产生大量警告：

```
Class SomeClass is implemented in both /Path/To/Test/Target and /Path/To/App/Target. One of the two will be used. Which one is undefined. 
```

使用 CocoaPods 1.x，我们可以将 -Test 目标声明为通过父目标的搜索路径继承，如下所示：

```
target 'MyApp' do
    pod 'aPod'
    pod 'anotherPod'
    project 'MyApp.xcodeproj'
end
target 'MyAppTests' do
    inherit! :search_paths
    project 'MyApp.xcodeproj'
end 
```

这将导致 -Test 目标可以访问应用程序目标的依赖项，而无需多个二进制副本。这大大加快了我的测试构建时间。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-08-27T20:37:59.567

我正在使用我的 Swift 应用程序在 iOS 上使用 GoogleMaps Objective-C POD 集成，因此对我来说，问题是测试目标在构建设置中没有对桥头文件 ( **SWIFT_OBJC_BRIDGING_HEADER ) 的引用。**确保您的应用程序和测试应用程序目标都指向该目标，以便可以在 swift 单元测试中使用第 3 方 API 调用（地图 API 等）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-10T18:38:38.343

我在 XCTest 下使用 OpenCV 时遇到问题。它给了我`Undefined symbols for architecture arm64`像`cv::Mat`. 我正在使用`pod 'OpenCV', '~> 2.0'`主要目标下通过 CocoaPods 安装 OpenCV。无论我多么努力地将 OpenCV 依赖项放在测试目标下或使用`inherit! :search_paths`它都不起作用。解决方案是创建一个`abstract_target`这样的：

```
# Uncomment the next line to define a global platform for your project
platform :ios, '6.1.6'

abstract_target 'Shows' do
  pod 'RMVision', path: '../..'
  pod 'RMShared', path: '../../../RMShared'
  pod 'OpenCV', '~> 2.0'

  target 'RMVisionSample' do
    # Uncomment the next line if you're using Swift or would like to use dynamic frameworks
    # use_frameworks!

    # Pods for RMVisionSample
  end

  target 'RMVisionSampleTests' do
    # inherit! :search_paths
    # Pods for testing
  end

  target 'RMVisionBenchmarks' do
    # inherit! :search_paths
    # Pods for testing
  end

end 
```

`pod deintegrate`&命令也很有用，`pod clean`它有助于清理项目并确保您在测试时重新开始。您可以使用`[sudo] gem install cocoapods-deintegrate cocoapods-clean`.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-04-14T02:57:45.593

下一个语法为我提供了最好的结果（在 cocoapod v.1.2.1 下测试）：

[https://github.com/CocoaPods/CocoaPods/issues/4626#issuecomment-210402349](https://github.com/CocoaPods/CocoaPods/issues/4626#issuecomment-210402349)

```
 target 'App' do
    pod 'GoogleAnalytics' , '~> 3.0'
    pod 'GoogleTagManager' , '~> 3.0'

     pod 'SDWebImage', '~>3.7'
     platform :ios, '8.0'
     use_frameworks!

     target 'App Unit Tests' do
         inherit! :search_paths
     end
 end 
```

如果没有这个，我在测试运行时会收到有关重复符号的警告。

在此警告消失后。

# netbeans - TortoiseSVN 有什么不能通过 Netbeans 完成的吗？

> ID：14512793
> 
> 赞同：0
> 
> 时间：2013-01-24T23:32:15.820
> 
> 标签：netbeans, tortoisesvn

我正在阅读[Netbeans IDE 具有内置的 Subversion 支持](http://dev.umpirsky.com/eclipse-vs-netbeans-for-php-development/#attachment_394)。我还看到[了一起使用 Netbeans 和 Subversion 的参考](https://stackoverflow.com/questions/9233864/keeping-tortoisesvn-netbeans-ide-in-sync-at-all-times)。但我是 Tortoise 的老用户，我知道它会降低 Windows shell 的速度。如果您使用的是 NetBeans，安装 TortoiseSVN 是否多余？**TortoiseSVN 有什么不能通过 Netbeans 完成的吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:06:29.560

我在 NetBeans 用户论坛中针对[http://forums.netbeans.org/viewtopic.php?p=142473#142473](http://forums.netbeans.org/viewtopic.php?p=142473#142473)提出了相同的问题。

第一[响应者](http://forums.netbeans.org/post-142473.html#142473)表示，NetBeans subversion 插件不允许“忽略”添加的项目文件，可能还有其他 SVN 任务无法通过 NetBeans 完成，但可以通过 TortoiseSVN 完成。

# c++ - C++ 未定义的引用？

> ID：14512794
> 
> 赞同：2
> 
> 时间：2013-01-24T23:32:27.757
> 
> 标签：c++, dev-c++

所以这是我程序的一部分，我无法调用这些函数，我真的需要一些帮助。基本上是选择任一功能并输入数据，然后打印该数据。做错了什么？请帮助，我不断得到

> "[Linker] 引用`Customer_Record()'" , [Linker error] undefined reference to` `Car_Record()`' 和 "ld 返回 1 个退出状态"

```
 #include <stdio.h>
 #include <string.h>  
 #include <stdlib.h>
 #include <windows.h>  
 #include <conio.h>

void Customer_Record(), Car_Record();
int num;

struct Customer {
    char customer_ID[20];
    int license;
    char address[20];
    int phone;
    char email[20];
} cust;

struct car {

    int regno[20];
    char model[20];
    char colour[10];
} car;

main() {
    printf("               Enter 1 to go to Customer Record \n\n");
    printf("               Enter 2 to go to Car Record \n\n");
    scanf("%d", &num);
    if (num = 1) {
        Customer_Record();
    } else if (num = 2) {
        Car_Record();
    } else {
        printf("Invalid Number");
    }

    system("cls");

    void Customer_Record(); {
        printf("********CUSTOMER RECORD********"); /* accepts into*/
        printf("\nEnter the name of the customer ");
        scanf("%s", &cust.customer_ID);
        printf("Enter the license number of the customer ");
        scanf("%d", &cust.license);
        printf("Enter the address of the customer ");
        scanf("%s", &cust.address);
        printf("Enter the cell phone number of the customer ");
        scanf("%d", &cust.phone);
        printf("Enter the email address of the customer ");
        scanf("%s", &cust.email);
    }

    void Car_Record(); {
        printf("********CAR RECORD********");
        printf("\nEnter the car's registration number ");
        scanf("%d", &car.regno);
        printf("Enter the car's model ");
        scanf("%s", &car.model);
        printf("Enter the colour of the car ");
        scanf("%s", &car.colour);
    }
    getchar();
    getchar();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T23:33:59.030

不要像那样嵌套你的函数。`Customer_Record()`和的定义`Car_Record()`应该*在*. `main()`您还需要`;`取消这些函数的定义。

尝试更好地格式化您的代码 - 从长远来看，这将有很大帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:37:00.460

1.  您在 main 末尾缺少一个 }，编译器认为您的函数声明在 main 函数中。

2.  从您的函数中删除尾随分号。前任：

    ```
    void Car_Record();
    { 
    ```

    至

    ```
     void Car_Record()
     { 
    ```

那个分号不是必须的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T01:58:57.120

我已经编制了一份您的程序存在的所有问题的清单。这里是：

*   您的 if 语句在`=`应该使用比较运算符时使用了赋值运算符`==`。例如，更改以下内容：

    ```
    if (num = 1) { 
    ```

    至

    ```
    if (num == 1) { 
    ```

    这也出现在你的`else`陈述中。

*   在 main 中定义函数也是不正确的。您必须在主子句*之外*定义这些块。您已经对 main 上方的函数进行了原型化，现在您必须在 main 下方定义它们。另外，定义函数时，参数列表后面不应该有分号；这在语法上是错误的。

以下是建议。您正在将此代码编译为 C++，但这是使用 C 函数/头文件编写的。为了将其转换为 C++，请进行以下更改：

*   **更改标题：** stdio.h、conio.h、stdlib.h；这些都是 C 风格的标题。基本上所有以“.h”结尾的标题都是 C 风格的标题。C++ 有自己的 I/O 库，因此它的 C 等效项已经过时。包括以下标题：

    ```
    #include <iostream>
    #include <cstdlib> 
    ```

    我省略了额外的标题，因为您似乎只使用`printf`/`scanf`和`system`，C++`iostream`和`cstdlib`标题已经拥有的等价物。例如，`std::cout`对于`std::cin`iosteam。等价于`getchar`std::cin.get()`。

*   **Main 返回 int：**在标准 C++ 中，您不能省略返回类型。将 main 的返回类型指定为`int`，但您不必放在`return 0`最后（这是隐式的）。

如果您想查找 C++ 函数和容器（如`std::cout`/ `std::cin`），[此参考](http://cppreference.com)很有帮助。

# php - 1、php和js使用ajax上传文件成功后如何设置flag增加？

> ID：14512799
> 
> 赞同：0
> 
> 时间：2013-01-24T23:32:43.943
> 
> 标签：php, jquery, ajax

尝试使：用户上传文件成功后显示img（通过`$filetype_accept`语句），
添加attr `id=1`，`.upload_img`每次上传文件id增加1 `id=2, id=3..`。
只有刷新页面，然后清除容器并重新计数。

我设置了标志`$layer`来计算有多少 img 上传成功，但是在上传第二个 img 之后 attr 仍然`id=1`。
下面是我的代码，有什么建议可以让它工作吗？

谢谢。

php

```
$filename = $_FILES['file_upload_tmp']['name'];
$filetmp_name = $_FILES['file_upload_tmp']['tmp_name'];
$filetype = $_FILES['file_upload_tmp']['tmp_name'];
$filetype_accept = $filetype == 'image/jpg';

$layer = 0;
if($_FILES){
    if($filetype_accept){
        move_uploaded_file($filetmp_name, 'upload/tmp/'.$filename);
        $layer = $layer + 1;
        print"
            <div class=\"img_wp\">
                <div class=\"upload_img\" id=\"$layer\">
                    <img src=\"upload/tmp/$filename\">
                </div>
            </div>
        ";
        return $layer;
    }
    else{
        print"upload file error, plz upload file type: $filetype";
    }
}
else{
    print"
        <div class=\"upload\">
            <form enctype=\"multipart/form_data\">
                <input type=\"file\" name=\"file_upload_tmp\">
                <input type=\"submit\" value=\"upload\" class=\"btn\">
            </form>
        </div>
        <div class=\"container\"></div>
    ";
} 
```

js

```
$('.btn').click(function(e){
    e.preventDefault();
    var uf = $('.upload form');
    var fd = new FormData(uf[0]);
    $.ajax({
        type: "POST",
        url: "upload.php",
        data: fd,
        processData: false,
        contentType: false,
        success: function(html){
            var img = $(html).filter('.img_wp').html();
            $('.container').append(img);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:38:59.440

您将数据发送到服务器，`fd.append('layer', $('.upload_img').attr('id'));`然后在服务器上处理它`$layer = (int)$_POST['layer'];`。

# regex - 仅从 URL 获取 URI 段

> ID：14512800
> 
> 赞同：0
> 
> 时间：2013-01-24T23:33:06.457
> 
> 标签：regex, url

我正在尝试使用正则表达式获取 URI 段。

示例 URI：

```
http://abc.com/hello/hi/bye?humm/ok=hi&ya=yaya/wow/waaah
               ^^^^^ ^^ ^^^                    ^^^ ^^^^^ 
```

我在尝试：

```
/(?<=\/)[\w-]+(?=(\/|$|\r|\?))/g 
```

但它不能正常工作。查询字符串未被排除 ( `wow/waaah`)。

因此，当我尝试以下操作时，一切都被排除在外：

```
/(?<!?.+)(?<=\/)[\w-]+(?=(\/|$|\r|\?))/g 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:53:56.960

您忘记在`?`第二个正则表达式中转义第二个。它应该是：

`/(?<!\?.+)(?<=\/)[\w-]+(?=(\/|$|\r|\?))/g`

注意：您可以通过使用如下字符类来改进正则表达式：

`/(?<!\?.+)(?<=\/)[\w-]+(?=[/\r\n?]|$)/g`

**编辑：**

对于满足所有不同风格的正则表达式的最低公分母解决方案，您需要一个两步过程：

*   删除尾随`?`和所有后续字符（如果存在）：

    `^[^/]+//[^/]+([^?]+)`

    将返回的字符串保留在捕获组 1 中。

*   通过循环提取 URI 段：

    `/([\w-]+)`

    段在捕获组 1 中返回。

# android - 睡眠期间未收到警报

> ID：14512806
> 
> 赞同：1
> 
> 时间：2013-01-24T23:33:26.007
> 
> 标签：android, android-intent, android-alarms, android-broadcast

睡眠期间未收到警报。

我将闹钟设置为午夜，以便在闹钟响起后更新我的视图。当设备处于唤醒状态时，警报会起作用 - 已经通过将时间更改为午夜等进行了测试。但是在我的手机上进行测试时，它在睡眠期间不起作用。我在午夜前几个小时让手机处于睡眠状态，然后在早上 8 点左右检查了应用程序。但是视图没有更新，所以我认为没有收到警报。

我在模拟器上尝试了以下操作 - 让设备在午夜之前进入睡眠状态，然后在午夜之后唤醒设备。但是我可以看到正在更新的数据，并且在我的日志中收到了警报。

关于我在下面的代码中做错了什么的任何想法？

活动：

```
@Override
    protected void onResume(){
        super.onResume();
        updateReceiver = new AlarmReceiver(new AlarmReceiverCallback(){
            @Override 
            public void onAlarmReceived(Intent intent) {
                //update view code
            }
        });
        IntentFilter updateIntentFilter = new IntentFilter("alarm");
        registerReceiver(updateReceiver,updateIntentFilter);
    }

    @Override
    protected void onPause(){
        super.onPause();
        if(this.updateReceiver!=null){
            unregisterReceiver(updateReceiver);
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //set up view 

        setRecurringDailyAlarm();
    }

    private void setRecurringDailyAlarm(){

        Calendar updateTime = Calendar.getInstance();
        updateTime.setTimeInMillis(System.currentTimeMillis());

        //daily alarm at midnight
        updateTime.set(Calendar.HOUR_OF_DAY,00);
        updateTime.set(Calendar.MINUTE,00);
        updateTime.set(Calendar.SECOND,00);
        Log.d(TAG, "Alarm time is: " + updateTime.getTime());
        Intent myIntent = new Intent();
        myIntent.setAction("alarm");
        PendingIntent recurringAlarm = PendingIntent.getBroadcast(MainActivity.this, ALARM_ID, myIntent, 
                PendingIntent.FLAG_CANCEL_CURRENT);
        AlarmManager alarms = (AlarmManager)getSystemService(Context.ALARM_SERVICE);

        alarms.setRepeating(AlarmManager.RTC_WAKEUP, updateTime.getTimeInMillis(), 
                AlarmManager.INTERVAL_DAY, recurringAlarm);

    } 
```

显现：

```
 <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

<receiver android:name=".receiver.BootUpReceiver" android:enabled="true" android:exported="false" 
    android:permission="android.premission.RECEIVE_BOOT_COMPLETED">
    <intent-filter>
    <action android:name="android.intent.action.BOOT_COMPLETED" />
    <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</receiver>
 <receiver android:name="com.test.receiver.RestartReceiver" android:enabled="true" android:process=":remote"></receiver> 
```

==编辑

如果我将代码更改为`Intent myIntent = new Intent(this, AlarmReceiver.class);`

这将在我的应用程序中引发错误，因为我已按如下方式实现了警报接收器。我正在使用“回调”来更新我的 UI

报警接收器类：

```
 interface AlarmReceiverCallback{
    public void onAlarmReceived(Intent intent);
}

public class AlarmReceiver extends BroadcastReceiver{

    private AlarmReceiverCallback callback;

    public AlarmReceiver(AlarmReceiverCallback callback){
        this.callback = callback;
    }
    @Override
    public void onReceive(Context context, Intent intent) {
        callback.onAlarmReceived(intent);
    }
} 
```

错误日志：

```
01-25 16:05:38.655: D/dalvikvm(810): newInstance failed: no <init>()
01-25 16:05:38.686: D/AndroidRuntime(810): Shutting down VM
01-25 16:05:38.686: W/dalvikvm(810): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
01-25 16:05:38.785: E/AndroidRuntime(810): FATAL EXCEPTION: main
01-25 16:05:38.785: E/AndroidRuntime(810): java.lang.RuntimeException: Unable to instantiate receiver com.test.receiver.AlarmReceiver: java.lang.InstantiationException: can't instantiate class com.test.receiver.AlarmReceiver; no empty constructor
01-25 16:05:38.785: E/AndroidRuntime(810):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2357)
01-25 16:05:38.785: E/AndroidRuntime(810):  at android.app.ActivityThread.access$1500(ActivityThread.java:141)
01-25 16:05:38.785: E/AndroidRuntime(810):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1310)
01-25 16:05:38.785: E/AndroidRuntime(810):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-25 16:05:38.785: E/AndroidRuntime(810):  at android.os.Looper.loop(Looper.java:137)
01-25 16:05:38.785: E/AndroidRuntime(810):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-25 16:05:38.785: E/AndroidRuntime(810):  at java.lang.reflect.Method.invokeNative(Native Method)
01-25 16:05:38.785: E/AndroidRuntime(810):  at java.lang.reflect.Method.invoke(Method.java:511)
01-25 16:05:38.785: E/AndroidRuntime(810):  at 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:47:46.610

您应该在清单中注册用于捕获警报的接收器以及其他接收器。然后创建启动 AlarmReceiver 的意图。

当您在代码中执行此操作时，它在 中未注册`onPause`，因此如果警报触发时您的活动不在前台，它不会捕捉到它。

显现：

```
<receiver android:name="com.test.receiver.AlarmReceiver"
/> 
```

代码：

```
private void setRecurringDailyAlarm(){

    Calendar updateTime = Calendar.getInstance();
    updateTime.setTimeInMillis(System.currentTimeMillis());

    //daily alarm at midnight
    updateTime.set(Calendar.HOUR_OF_DAY,00);
    updateTime.set(Calendar.MINUTE,00);
    updateTime.set(Calendar.SECOND,00);
    Log.d(TAG, "Alarm time is: " + updateTime.getTime());

    Intent myIntent = new Intent( this, AlarmReceiver.class );
    PendingIntent recurringAlarm = PendingIntent.getBroadcast( MainActivity.this, ALARM_ID, myIntent, PendingIntent.FLAG_CANCEL_CURRENT);
    AlarmManager alarms = (AlarmManager)getSystemService(Context.ALARM_SERVICE);

    alarms.setRepeating(AlarmManager.RTC_WAKEUP, updateTime.getTimeInMillis(), 
            AlarmManager.INTERVAL_DAY, recurringAlarm);
} 
```

# javascript - 正则表达式手机和固定电话号码

> ID：14512810
> 
> 赞同：1
> 
> 时间：2013-01-24T23:33:44.710
> 
> 标签：javascript, jquery

我想要这种格式的手机号码 (021)123-4567 或 (027)123-4567 或这种格式的固定电话号码 (04)970-0676。我有一个正则表达式，它不包含“-”，并且前 3 或 2 位数字包含在大括号 (027) 或 (04) 字符中。
我还想要在括号之后是在第三个数字之后有一个连字符，例如 (04)970- < 或 (027)635- <

这就是我所拥有的。

```
(^\([0][2]\d{1}\))(\d{6,8}$) 
```

或者这个显示电话号码中可能的代码和可能的字符数的这个是我想要的，除了缺少连字符。

```
'/^(\((03|04|06|07|09)\)\d{7})|(\((021|022|025|027|028|029)\)\d{6,8})|((0508|0800|0900)\d{5,8})$/' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:39:47.390

尝试：

```
/^\(0\d{1,2}\)\d{3}-\d{4}$/ 
```

正则表达式值得学习[http://www.regular-expressions.info/](http://www.regular-expressions.info/)。

# c++ - 在 Linux 上使用 C++ 访问 Sony Playstation SixAxis 控制器

> ID：14512813
> 
> 赞同：5
> 
> 时间：2013-01-24T23:33:57.923
> 
> 标签：c++, linux, bluetooth, playstation, input-devices

我在 Linux（特别是 Ubuntu 12.04）上使用 C++ 进行编码，并且想使用 PlayStation SixAxis 控制器（PS3 附带的类型）作为输入设备，最好是通过蓝牙。

我的应用程序将无头运行。目标平台上没有运行窗口管理器。目标是一个运行 Ubuntu Server 12.04 的[小型机器人](http://www.robotis.com/xe/darwin_en)，尽管我正在桌面上进行开发。

我可以使用任何库或技术吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-07T04:16:21.993

我目前的解决方案涉及在 ubuntu 12.04 上使用这个 ppa

```
sudo apt-add-repository ppa:falk-t-j/qtsixa
sudo apt-get update
sudo apt-get install sixad -y
# plug controller into machine (via wire)
sudo sixpair
# unplug controller
sixad --start
# hold PS button 
```

然后我找到了你的[c++ 库](https://github.com/drewnoakes/joystick)，它工作得很好。我现在有六轴控制机器人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-06T22:10:24.500

```
pkg-config opencv –libs –cflags
 run script for local-dir
t-j/qtsixa
sudo apt-get update
sudo apt-get install sixad -y
# plug controller into machine (via wire)
sudo sixpair
# unplug controller 
```

# c++ - CSV 文件中的 Unordered_map 值

> ID：14512818
> 
> 赞同：1
> 
> 时间：2013-01-24T23:34:05.850
> 
> 标签：c++, csv, c++11, unordered-map

我找到了一个我正在尝试实现的类似示例：

```
std::unordered_map<std::string,std::string> mymap = {
  {"us","United States"},
  {"uk","United Kingdom"},
  {"fr","France"},
  {"de","Germany"}
}; 
```

但是，我拥有的值位于 CSV 文件中。

我是否需要将这些值插入到不同的容器中，然后将它们添加到 unordered_map 或者是否可以直接从文件中添加它们？

我正在努力弄清楚，所以目前我只是将文件内容写到屏幕上：

```
int menuLoop = 1;
int userChoice;
string getInput;

while(menuLoop == 1)
{
    cout << "Menu\n\n" 
         << "1\. 20\n"
         << "2\. 100\n"
         << "3\. 500\n"
         << "4\. 1000\n"
         << "5\. 10,000\n"
         << "6\. 50,000\n\n";
    cin >> userChoice;

    if(userChoice == 1)
    {
        cout << "\n20\n\n";
        string getContent;
        ifstream openFile("20.txt");
        if(openFile.is_open())
        {
            while(!openFile.eof())
            {
                getline(openFile, getContent);
                cout << getContent << endl;
            }
        }
        system("PAUSE"); 
    }
} 
```

文件内容：

```
Bpgvjdfj,Bvfbyfzc
Zjmvxouu,Fsmotsaa
Xocbwmnd,Fcdlnmhb
Fsmotsaa,Zexyegma
Bvfbyfzc,Qkignteu
Uysmwjdb,Wzujllbk
Fwhbryyz,Byoifnrp
Klqljfrk,Bpgvjdfj
Qkignteu,Wgqtalnh
Wgqtalnh,Coyuhnbx
Sgtgyldw,Fwhbryyz
Coyuhnbx,Zjmvxouu
Zvjxfwkx,Sgtgyldw
Czeagvnj,Uysmwjdb
Oljgjisa,Dffkuztu
Zexyegma,Zvjxfwkx
Fcdlnmhb,Klqljfrk
Wzujllbk,Oljgjisa
Byoifnrp,Czeagvnj 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:43:06.547

要提取数据，请使用 CSV 解析器库或使用逗号作为分隔符手动拆分文件的每一行。CSV 文件与文本文件没有什么不同；他们只是遵循独特的数据格式。

不需要中间数据结构。假设您的数据格式为，请[在此处](http://www.cplusplus.com/reference/unordered_map/unordered_map/operator%5B%5D/)`[key],[value]`使用 unordered_map 的 C++ 文档正确插入您的数据。

例子：

```
string line;
getline(file, line);

// simple split (alternatively, use strtok)
string key = line.substr(0,line.find(','));
string value = line.substr(line.find(',')+1);

unordered_map<string,string> mymap;
mymap[key] = value; 
```

编辑：us2012 的带分隔符的[getline方法也特别有用。](http://www.cplusplus.com/reference/istream/istream/getline/)还要记住，在读取带有分隔符作为数据的 CSV 时必须注意，通常用引号括起来的值表示：

```
"hello, world","hola","mundo" 
```

可以在[此处](http://en.wikipedia.org/wiki/Comma-separated_values)找到有关 CSV 格式的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:57:23.477

您可以直接在`getline`.

```
 while(true)
        {
            string key, value;
            //try to read key, if there is none, break
            if (!getline(openFile, key, ',')) break;
            //read value
            getline(openFile, value, '\n');
            mymap[key] = value;
            cout << key << ":" << value << endl;
        } 
```

请注意，您当前的循环检查您是否在文件末尾为时已晚，并且将产生一个空的键值对。这在上面得到了纠正。

# python - python 属性错误

> ID：14512819
> 
> 赞同：0
> 
> 时间：2013-01-24T23:34:17.373
> 
> 标签：python, function, attributeerror

我有三个 python 文件

`one.py`, `two.py`,`three.py`

`one.py`

从`one.py`我打电话

```
import two as two  
    two.three() 
```

在`two.py`我有

```
def two():
    "catch the error here then import and call three()"
    import three as three 
```

在`three.py`我有

```
def three():
    print "three called" 
```

所以我很自然地得到：

> AttributeError：“函数”对象没有属性“三”

我的问题是：

有没有办法`two.py`捕获错误然后导入`three.py`然后调用`three()`？

****__ *_* __ *_* __ *_* __ *_* __***编辑****_* __ *_* __ *_* __ *_* __ *_* __** _V
我可以这样称呼它：**

 **```
two().three()

def two():
    import three as three
    return three 
```

但我想这样称呼它：

```
two.three() 
```

所以本质上它会自动执行 def two()：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:00:13.640

Here's the solution I came up with. I confess that I was inspired by your question to try to figure this out, so I don't completely understand it myself. The magic happens in two.py where the attempt to access and then call the `three` method of `two` is handled by the `__getattr__` method of the `method_router` class. It uses `__import__` to import the indicated module by name (a string), and then imitates the `from blah import blah` by calling `getattr()` again on the imported module.

one.py

```
from two import two
two.three() 
```

two.py

```
class method_router(object):
    def __getattr__(self, name):
        mod = __import__(name)
        return getattr(mod, name)

two = method_router() 
```

three.py

```
def three():
    print("three called") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:59:20.573

当您调用一个模块时，被调用的模块无法自行检查它是否具有功能，如果没有则遵循替代路径。您可以将 two.three() 包裹在 try except 子句中以捕获属性错误。

```
try:
   two.three()
except AttributeError:
   three.three() 
```**

# python - 迭代 Python 对象

> ID：14512822
> 
> 赞同：2
> 
> 时间：2013-01-24T23:34:28.263
> 
> 标签：python, algorithm

我正在尝试编写一个基于邮政编码、纬度和 lng 计算某个公式的程序。

我最初的想法是为每个邮政编码创建一个对象。

```
class destination():
def __init__(self, zipcode, count):
    self.zipcode = zipcode
    self.count = count

def getCount(self):
    return self.count

def getZip(self):
    return self.zipcode

def getLatitude(self):
    return self.lat 

def getLongitude(self):
    return self.lng 

def __str__(self):
    return "%s at %s , %s" % (self.zipcode, self.lat, self.lng)

def getCoords(self):
    '''
    Must be called before getLatitude or get Longitude
    '''
    self.place, (self.lat, self.lng) = gn.geocode(str(self.zipcode))  
    self.city = self.place.split(",",1)
    self.name =  self.city[0]
    self.value = str(count)+","+self.name

    return self.value 
```

这很好用，因为我可以成功地遍历列表并创建对象并从中提取必要的信息

```
zipList = ['54971','46383','90210']

for i in zipList:
    i = destination(i,count)
        count += 1 
```

将返回

```
1,Ripon
-88.8359447
43.8422049
2,Valparaiso
-87.0611412
41.4730948
3,Beverly Hills
-118.4003563
34.0736204 
```

我似乎无法理解的是如何设置程序，以便它遍历调用具有每个项目的正确信息的 hasrsine 函数的列表。

```
def haversine(latStart,lonStart,latEnd,lonEnd): 
```

示例：如果我的列表是

```
zipList = ['54971','46383','90210'] 
```

然后它将对 54971 到 46383、54971 到 90210 和 46383 到 90210 进行计算

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:44:24.517

询问列表中的所有邮政编码对，并使用它们：

```
import itertools

for start, stop in itertools.combinations(zipList, 2):
    print start, stop
    # now pass start, stop to your function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T23:42:14.017

尝试使用 itertools，[组合功能](http://docs.python.org/2/library/itertools.html#itertools.combinations)可能是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T23:50:20.127

您可以创建目标对象列表并获取创建列表的组合，并通过 hasrsine 函数迭代返回的生成器。

```
dests = []
for i in zipList:
    dests.append(destination(i,count))
    count += 1

dests_gen = itertools.combinations(dests, 2)
for dest_typle in dests_gen:
    pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T00:05:08.920

简短的回答：

```
for a, b in ( (a, b) for a in zipList for b in zipList):
    print (a, b, distance (a, b) ) 
```

一些评论：如果您将其设为类变量，则无需手动控制“计数”。您可以根据需要使用属性来定位您的点（即首次访问纬度或经度时）。如果属性是公开的（除非 API 要求这样做），您实际上并不需要 getter 方法。也许是这样的。

```
#! /usr/bin/python3.2

def haversine (latStart,lonStart,latEnd,lonEnd): return 42

class Destination():
    count = 0

    def __init__(self, zipcode):
        self.zipcode = zipcode
        self.count = self.__class__.count
        self.__class__.count += 1
        self.__coords = None

    @property
    def latitude (self):
        if not self.__coords: self.__locate ()
        return self.__coords [0]

    @property
    def longitude (self):
        if not self.__coords: self.__locate ()
        return self.__coords [1]

    def __str__(self):
        return "%s at %s , %s" % (self.zipcode, self.latitude, self.longitude)

    def __locate (self):
        '''
        Will be called automatically before getLatitude or get Longitude
        '''
        self.place, self.__coords = gn.geocode (str (self.zipcode) )  
        self.city = self.place.split (",",1)
        self.name =  self.city [0]

    def distance (self, other):
        return haversine (self.latitude, self.longitude, other.latitude, other.longitude) 
```

# php - PHP退出forloop的正确方法

> ID：14512823
> 
> 赞同：2
> 
> 时间：2013-01-24T23:35:19.510
> 
> 标签：php, foreach, while-loop

我有一段这样的 PHP 代码：

```
 while($attempts < $cycles) {

        foreach($player_array as $player) {
                if(isset($player['results']) && $player['results'] == 1) {
                        $player['results'] = player_search($f, $s, $t);
                }
        }
} 
```

这个想法是为数组中的每个项目调用一个搜索函数。如果搜索没有任何内容，则返回 false，这应该通过更改 'results' 的值来阻止它调用其余循环的搜索。

我假设设置`$player['results']`为 false 实际上并没有设置正确的变量，因为它在下一次迭代中将其拉入。

我应该如何更改我的代码以使其正常工作？

编辑：

我是否可以明确指出，如果函数中的搜索未返回任何结果，我不希望再次调用该函数，但是如果其他搜索仍有结果，我希望将相同的函数用于其他搜索。显然，一旦所有玩家搜索都没有结果，我也希望打破 while 循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T23:38:54.350

用于`break 2;`退出 the`foreach`和 the`while`

```
while($attempts < $cycles) {
    foreach($player_array as $player) {
        if(isset($player['results']) && $player['results'] == 1) {
            $player['results'] = player_search($f, $s, $t);
            break 2;
        }
    }
} 
```

PHP手册中的示例：http: [//php.net/manual/en/control-structures.break.php](http://php.net/manual/en/control-structures.break.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:37:33.597

[`break`](http://php.net/manual/en/control-structures.break.php)在找到（或没有？）匹配后使用。

并停止 while 循环：`break 2;`

如果这是代码在函数内并且您没有其他任何内容，那么您不妨返回结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T23:38:48.300

我不确定 $attempts 和 $cycles 发生了什么，因为它们似乎没有从循环内更改，但是如果您真的想更改 $player_array 中包含的 $player 中的值，您应该这样做

```
foreach($player_array as &$player) {
    if(!isset($player['results'])) {
        $player['results'] = player_search($f, $s, $t);
    }
} 
```

请注意，我更改`$player`为`&$player`使其成为参考而不是副本

我还更改了您的 isset，以便仅在结果尚未存储在结果中时才进行搜索

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T23:40:06.450

它不设置变量的原因是因为您只设置了一个 $player，结果为 1 或 0（或真/假）。下一次在循环中，$player 变量与之前的不一样。为什么不做这样的事情？

```
while($attempts < $cycles) {
  foreach($player_array as $player) {
    if(isset($player['results']) && $player['results'] == 1) {
      if(!player_search($f, $s, $t)) break;
      else //something here
    }
  }
} 
```

如果你也想跳出 while 循环，你总是可以这样做`break 2;`

# jquery - 即兴 .. 使用 jquery 1.9 - browser.msie 出错

> ID：14512826
> 
> 赞同：10
> 
> 时间：2013-01-24T23:35:25.297
> 
> 标签：jquery, impromptu

在最新的 jquery 1.9 下运行时，我收到了即兴版本 4.1 的错误

未捕获的类型错误：无法读取未定义的属性“msie”

以前版本的 jquery 不是这种情况。

即兴的违规行是第 20 行：

```
var ie6 = ($.browser.msie && $.browser.version < 7); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-24T23:44:42.203

您可以修补*Impromptu*替换此行：

```
var ie6 = ($.browser.msie && $.browser.version < 7); 
```

...通过这个：

```
var ie6 = ( navigator.userAgent.match(/msie/i) && navigator.userAgent.match(/6/) ); 
```

...所以现在它可以与 jQuery v1.9.0+ 一起使用。或者，您可以回滚到 jQuery v1.8.3

**编辑**（2013 年 3 月 12 日）

感谢@johntrepreneur 的评论，你是对的。**两个注意事项**：

1.  此编辑行：

    ```
    var ie6 = ( navigator.userAgent.match(/msie/i) && navigator.userAgent.match(/6/) ); 
    ```

    ...应该被这个替换：

    ```
    var ie6 = ( navigator.userAgent.match(/msie [6]/i) ); 
    ```

    ...我的错，我急于写补丁。这应该够了吧。

2.  *Impromptu在他们的***[最后一次提交](https://github.com/trentrichardson/jQuery-Impromptu/commit/fe0dc99c92ca106c866c6a5b521c36ae43d50c9e)**中完全删除了 IE6 支持（在 2013 年 3 月 25 日发布此原始帖子之后）。OP 带来的问题是*Impromptu*确实与 jQuery v1.9+ 发生了冲突……将***Impromptu*** **js 文件****更新到[最新版本](https://github.com/trentrichardson/jQuery-Impromptu)也解决了这个问题***。*

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T11:10:56.787

我更喜欢这个目标范围，将只在 < IE9 & jQuery 1.9+ 上运行代码

```
if (/msie [1-8]./.test(navigator.userAgent.toLowerCase()))
{
    //code here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T15:01:03.727

自从 Jquery 弃用 $.browser 功能以来，我发现最简单的方法就是在 javascript 中创建一个全局变量

```
var LTE_IE9 = false; 
```

和使用条件 HTML IE 选择器

```
<!--[if lte IE 9]>
<script>LTE_IE9 = true;</script>
<![endif]--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-12T16:58:16.453

正如这里所说，**$.browser**在 jQuery 中不再存在，因为版本**1.9**。

所以在更新到 jQuery 1.9.1 后检查[browser.msie 错误](https://stackoverflow.com/questions/14892095/browser-msie-error-after-update-to-jquery-1-9-1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-09T13:59:22.580

我用这个。

```
 var browser = $.browser;
    if ( ! browser ) {
       var ua = navigator.userAgent.toLowerCase();
       var m = /(msie) ([\w.]+)/.exec( ua ) || ! /compatible/.test(ua) && /(mozilla)/.exec( ua ) || [];
       browser = { version: m[2] };
       browser[ m[1] ] = true;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-27T07:33:01.603

添加`Jquery migrate`插件

//cdnjs.cloudflare.com/ajax/libs/jquery-migrate/1.2.1/jquery-migrate.min.js

`$.browser.msie`从 > jquery 1.9.X 中删除

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-23T12:10:05.463

因为 $.browse 自 jQuery V. 1.4 以来已被弃用，并在 jQuery V. 1.9 之后被删除

您仍然可以通过这行代码解决此问题（适用于所有浏览器）

```
jQuery.browser = {};
jQuery.browser.mozilla = /mozilla/.test(navigator.userAgent.toLowerCase()) && !/webkit/.test(navigator.userAgent.toLowerCase());
jQuery.browser.webkit = /webkit/.test(navigator.userAgent.toLowerCase());
jQuery.browser.opera = /opera/.test(navigator.userAgent.toLowerCase());
jQuery.browser.msie = /msie/.test(navigator.userAgent.toLowerCase()); 
```

对我来说很好；*

# yii - 在 Yii Memcache 中缓存整页、部分或键缓存

> ID：14512827
> 
> 赞同：0
> 
> 时间：2013-01-24T23:35:27.633
> 
> 标签：yii, memcached

我创建了这个过滤器

```
return array(
    array(
        'CHttpCacheFilter + View',
        'lastModified'=>Yii::app()->db->createCommand(
             "SELECT MAX(`date_taken`) FROM image")->queryScalar(),
    ),
); 
```

`actionView`它在 php Yii 中缓存所有数据

问题是我在页面上有需要动态的区域。

我查看了该页面上的部分缓存。这并没有带来性能优势。主要权重是 sql 查询。我尝试将数据添加到缓存键。但是数据超过 1 mb，所以这不太好。任何人都知道最好的解决方法

```
/**
 * View for a Image
 * @param string $alias_title the image a user would like to view   
 */        
public function actionView($alias_title)
{
    $associated_image_details =  Image::getImageFromAliasTitle($alias_title);
    $image = Utils::getArrayOrNull($associated_image_details, 0);
    $album = Utils::getArrayOrNull($associated_image_details, 1);
    $tag= Utils::getArrayOrNull($associated_image_details, 2);
    $comment= Utils::getArrayOrNull($associated_image_details, 3);
    $media_set= Utils::getArrayOrNull($associated_image_details, 4);
    $media_gallery= Utils::getArrayOrNull($associated_image_details, 5);
    $media_group= Utils::getArrayOrNull($associated_image_details, 6);

    $this->render('view', array(
        'image' => $image, 
        'album'=>$album,
        'comment'=>$comment,
        'tag'=>$tag,
        'media_set'=>$media_set,
        'media_gallery'=>$media_gallery,
        'media_group'=>$media_group
    ));
} 
```

# javascript - 使用 Javascript 替换选择框中的金额

> ID：14512829
> 
> 赞同：2
> 
> 时间：2013-01-24T23:35:29.900
> 
> 标签：javascript

好的，所以我在网络表单上比较了 2 个值，一个是文本值，一个是选择元素中的值。当文本值小于下拉列表时，我需要将下拉列表更改为低于文本框中的最大值。

例如，如果用户在下拉列表中选择 2000，然后在文本字段中输入 1100，我需要弹出窗口返回 1000。

我写了一些我认为可行的东西的开头，但我不知道是否应该将返回命令与下拉字段名称结合使用，或者类似字段名称（弹出窗口）是 < 文本数量。

这是我到目前为止所拥有的。如果有人能指出我正确的方向，我将不胜感激。

```
function compareAmts () {
    if ($("#TCA_Field1").val() < ("#TCA_Field2").val ) {
        ($("#TCA_Field2").val() ==
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:04:29.400

我建议使用纯 JavaScript 来遍历选项并选择一个合适的选项：

```
function adjustMaxDropdownValue($dropdown, $input)
{
    var element = $dropdown.get(0),
    options = element.options,
    i = element.selectedIndex,
    atMost = +$input.val(); // cast to number

    while (i >= 0 && options[i].value >= atMost) {
        --i;
    }

    element.selectedIndex = i;
} 
```

这假设您的下拉值从低到高排序。

致电：

```
adjustMaxDropdownValue($("#TCA_Field1"), $("#TCA_Field2")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:09:32.633

```
//Functions

function compareAmts($FIELDSwitchText, $FIELDSwitchPull)
{
var SwitchAdv = 0;
temp = $("#FIELD_SwitchPull").val();
var SwitchComm = parseInt(temp.replace(/\,/g,''));

if($("#FIELD_SwitchText").val()!=""){
    SwitchAdv = parseInt($("#FIELD_SwitchText").val());
}

var element = $FIELDSwitchText.get(0),
options = element.options,
i = element.selectedIndex,
atMost = +$FIELDSwitchPull.val(); // cast to number

while (i >= 0 && options[i].value >= atMost) {
    --i;
}

element.selectedIndex = i; 
```

}

# c# - 在 C# datagridview 中处理行和列

> ID：14512831
> 
> 赞同：0
> 
> 时间：2013-01-24T23:35:41.913
> 
> 标签：c#, datagridview, northwind

我正在处理一些 dataGridView 表单，但我有一些我不太了解的问题

所以，这就是我所缺少的。

![在此处输入图像描述](../Images/7dce6e155b95c9935450f284cb27af9a.png)

如何在这些列中显示数据 - 客户、员工和托运人？

它是 Northwind DB 和带有经典 datagridview 的简单表单。

函数返回数据库中所有订单的列表。我知道如何删除列，但在这种情况下，我需要显示其中的所有数据。

我是否需要使用我的查询或表单 C# 代码？

抱歉，代码如下：

询问

```
public static List<Orders> getAllOrd()
{
  var query = (from o in Model.DM_Class.dc.Orders
               select o).ToList();
  return query;
} 
```

形式

```
private void frm_Orders_Load(object sender, EventArgs e)
        {
            dgv_Orders.DataSource = OrdersService.getAllOrd();
        } 
```

如何管理该列中的那些也显示它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:15:42.163

我的查询是这样的：

```
public static List<Orders> getAllOrd()
{
    var query = (from o in Model.DM_Class.dc.Orders
                 select o).ToList();
    return query;
} 
```

而且我没有在客户、员工和托运人列中获得任何数据。

我重新编写了这样的查询：

```
public static List<Orders> getAllOrd()
{
    var query = (from o in Model.DM_Class.dc.Orders
                 join e in Model.DM_Class.dc.Employee on o.employeeID equals e.employeeID
                 select new {
                     // name all desired columns here and separate with comma 
                  }).ToList();
    return query;
} 
```

之后，我得到了所有列中的数据。

# python - 两只乌龟在同一位置，如何确定？

> ID：14512845
> 
> 赞同：1
> 
> 时间：2013-01-24T23:36:46.050
> 
> 标签：python, turtle-graphics

所以这是我的代码，有没有办法编写代码，以便当国际空间站和火箭相遇（在同一位置）破坏窗口并创建一个新的 Tkinter 窗口？

```
from turtle import *

def move(thing, distance):
    thing.circle(250, distance)

def main():
    rocket = Turtle()
    ISS = Turtle()
    rocket.speed(10)
    ISS.speed(10)
    counter = 1
    title("ISS")
    screensize(750, 750)
    ISS.hideturtle()
    rocket.hideturtle()
    ISS.penup()
    ISS.left(90)
    ISS.fd(250)
    ISS.left(90)
    ISS.showturtle()
    ISS.pendown()
    rocket.penup()
    rocket.fd(250)
    rocket.left(90)
    rocket.showturtle()
    rocket.pendown()

    while counter == 1:
        move(ISS, 3)
        move(rocket, 4) 
```

谢谢你！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:52:02.873

[http://docs.python.org/2/library/turtle.html#turtle.position](http://docs.python.org/2/library/turtle.html#turtle.position)

“返回海龟的当前位置 (x,y)（作为 Vec2D 向量）。”

但是，由于浮点错误，即使它们之间的距离非常小，您也应该将它们视为重叠，例如

```
epsilon = 0.000001

if abs(ISS.xcor() - rocket.xcor()) < epsilon and abs(ISS.ycor() - rocket.ycor()) < epsilon:
    do stuff 
```

如果您想假装它们是圆并且国际空间站的半径为 r1 而火箭的半径为 r2，那么您可以像这样测量距离：

```
sqrt((ISS.xcor() - rocket.xcor())**2 + (ISS.ycor() - rocket.ycor())**2) < (r1 + r2) 
```

如果这是真的，它们是重叠的圆圈。

# wordpress - 删除谷歌地图 iframe 地址弹出窗口

> ID：14512854
> 
> 赞同：9
> 
> 时间：2013-01-24T23:37:35.347
> 
> 标签：wordpress, google-maps, iframe

我在 Wordpress 中并将这个 iframe 插入到文本小部件中。但是，我无法让地址弹出窗口消失。

我都试过了`iwloc=near`（`iwlock=NoSuchMarker`在第五行结束一个href）

```
<iframe width="295" height="250" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=3904+Washington+Parkway,+Idaho+Falls,+Idaho&amp;aq=0&amp;oq=3904+washington+parkway+idah&amp;sll=41.833733,-87.731964&amp;sspn=0.929078,2.113495&amp;ie=UTF8&amp;hq=&amp;hnear=3904+Washington+Pkwy,+Idaho+Falls,+Bonneville,+Idaho+83404&amp;t=p&amp;ll=43.466874,-111.993513&amp;spn=0.015573,0.025406&amp;z=14&amp;iwloc=A&amp;output=embed">
</iframe>
<br />
<small>
<a href="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=3904+Washington+Parkway,+Idaho+Falls,+Idaho&amp;aq=0&amp;oq=3904+washington+parkway+idah&amp;sll=41.833733,-87.731964&amp;sspn=0.929078,2.113495&amp;ie=UTF8&amp;hq=&amp;hnear=3904+Washington+Pkwy,+Idaho+Falls,+Bonneville,+Idaho+83404&amp;t=p&amp;ll=43.466874,-111.993513&amp;spn=0.015573,0.025406&amp;z=14&amp;iwloc=near">
</a>
</small> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T23:43:47.550

以下对我有用。我将 iwloc=A 更新为 iwloc=near。**您在 iframe之后**的标签中添加了该代码，而不是在 iframe src 本身中。

```
<iframe width="295" height="250" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=3904+Washington+Parkway,+Idaho+Falls,+Idaho&amp;aq=0&amp;oq=3904+washington+parkway+idah&amp;sll=41.833733,-87.731964&amp;sspn=0.929078,2.113495&amp;ie=UTF8&amp;hq=&amp;hnear=3904+Washington+Pkwy,+Idaho+Falls,+Bonneville,+Idaho+83404&amp;t=p&amp;ll=43.466874,-111.993513&amp;spn=0.015573,0.025406&amp;z=14&amp;iwloc=near&amp;output=embed">
</iframe>
<br />
<small>
<a href="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=3904+Washington+Parkway,+Idaho+Falls,+Idaho&amp;aq=0&amp;oq=3904+washington+parkway+idah&amp;sll=41.833733,-87.731964&amp;sspn=0.929078,2.113495&amp;ie=UTF8&amp;hq=&amp;hnear=3904+Washington+Pkwy,+Idaho+Falls,+Bonneville,+Idaho+83404&amp;t=p&amp;ll=43.466874,-111.993513&amp;spn=0.015573,0.025406&amp;z=14&amp;iwloc=near">
</a>
</small> 
```

# mysql - 我不小心删除了 phpMyAdmin 中的管理员帐户。如何重新授予 root@localhost 权限？

> ID：14512855
> 
> 赞同：3
> 
> 时间：2013-01-24T23:37:35.437
> 
> 标签：mysql

我不小心删除了我的 phpMyAdmin 中的管理员帐户。现在，我什么都做不了。但是，我可以访问控制台，它允许我登录。如何重新授予 root@localhost 权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-08T19:34:57.250

有一种简单易行的方法可以解决这个问题。您需要停止 mysql 并转到 xampp 文件夹中的 mysql 文件夹。然后在您的命令提示符下运行以下命令。

> c:\xampp\mysql> resetroot.bat

如果您没有那个 resetroot.bat，那么在此处复制该内容表单。

```
@echo off
echo USE mysql; >resetroot.sql
echo. >>resetroot.sql
echo REPLACE INTO user VALUES ('localhost', 'root', '', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', '', '', '', '', 0, 0, 0, 0, '', ''); >>resetroot.sql
echo REPLACE INTO user VALUES ('127.0.0.1', 'root', '', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', '', '', '', '', 0, 0, 0, 0, '', ''); >>resetroot.sql
echo REPLACE INTO user VALUES ('localhost', 'pma', '', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', ''); >>resetroot.sql

bin\mysqld.exe --no-defaults --bind-address=127.0.0.1 --bootstrap --console --standalone <resetroot.sql >nul
del resetroot.sql
echo.
echo Passwoerter fuer Benutzer "root" und "pma" wurden geloescht.
echo Passwords for user "root" and "pma" were deleted.
echo.
pause 
```

将此文件用作 resetroot.sql

使用 mysql；

```
REPLACE INTO user VALUES ('localhost', 'root', '', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', '', '', '', '', 0, 0, 0, 0, '', ''); 
REPLACE INTO user VALUES ('127.0.0.1', 'root', '', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', 'Y', '', '', '', '', 0, 0, 0, 0, '', ''); 
REPLACE INTO user VALUES ('localhost', 'pma', '', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', 'N', '', '', '', '', 0, 0, 0, 0, '', ''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:39:53.393

来自 mysql 文档

创建帐户并授予特权

```
mysql> CREATE USER 'monty'@'localhost' IDENTIFIED BY 'some_pass';
mysql> GRANT ALL PRIVILEGES ON *.* TO 'monty'@'localhost'
    ->     WITH GRANT OPTION;
mysql> CREATE USER 'monty'@'%' IDENTIFIED BY 'some_pass';
mysql> GRANT ALL PRIVILEGES ON *.* TO 'monty'@'%'
    ->     WITH GRANT OPTION;
mysql> CREATE USER 'admin'@'localhost';
mysql> GRANT RELOAD,PROCESS ON *.* TO 'admin'@'localhost';
mysql> CREATE USER 'dummy'@'localhost'; 
```

[添加用户](http://dev.mysql.com/doc/refman/5.5/en//adding-users.html)

**更新**：

尝试从这个答案运行脚本：
[Restored Deleted 'Root' User and Password For MySQL](https://stackoverflow.com/a/6085548/560299)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T23:51:52.097

该手册介绍了在删除（或忘记）它时如何设置或重置 root 帐户的密码：

[http://dev.mysql.com/doc/refman/5.5/en/resetting-permissions.html](http://dev.mysql.com/doc/refman/5.5/en/resetting-permissions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-29T03:54:03.767

这对我有用

1.  下载您的 xampp 服务器的相关可移植版本
2.  找到`xampp/mysql/data/mysql`目录并将其替换为 protable 版本（zip 文件）中的目录

我认为这会重置`mysql`数据库。所以这不会影响任何其他数据库或您的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-10T13:35:49.273

我不小心删除了 xampp 上的 root（管理员）帐户并失去了权限。最后，我找到了出路：

*   卸载 xampp
*   安装另一个版本的 xampp。

答对了！再次设置您的 root 权限。

注意：您无法取回已删除的 root (admin) 帐户的旧数据库。需要安装另一个版本。重新安装相同版本的 xampp 不会有任何作用。

# android - 平板电脑上的并排碎片

> ID：14512860
> 
> 赞同：0
> 
> 时间：2013-01-24T23:37:56.717
> 
> 标签：android, android-fragments

我有一个显示地图的应用程序。当用户按下其中一个操作栏时，会出现另一个列表视图片段，其中显示项目列表。

当应用程序在平板电脑上运行时，我试图让列表视图出现在地图的左侧，但是我遇到了困难。

我目前有一个管理片段的活动。

我尝试了在 StackOverflow 上找到的解决方案，但它不起作用。

这是用于大型布局和标准布局的布局 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/myFragment"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<ViewGroup
    android:id="@+id/leftContainer"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1" />

<ViewGroup
    android:id="@+id/rightContainer"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="2" />

</LinearLayout> 
```

这是活动的 onCreate 代码： super.onCreate(savedInstanceState); setContentView(R.layout.activity_main);

```
 FragmentManager fm = getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();

ft.add(R.id.leftContainer, loadRoutesFragment);
ft.add(R.id.rightContainer, viewModeFragment);
ft.hide(loadRoutesFragment);
ft.commit(); 
```

我一开始就隐藏了 loadRoutesFragment，但是当按下按钮时，我使用了 show 方法，该方法应该使 Fragment 出现。

应用程序崩溃`setContentView(R.layout.activity_main);` 以下是例外情况：

```
01-24 23:25:56.889: E/AndroidRuntime(20746): FATAL EXCEPTION: main
01-24 23:25:56.889: E/AndroidRuntime(20746): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.srose.cyclopathed/com.srose.cyclopathed.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class android.view.ViewGroup
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.os.Looper.loop(Looper.java:137)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at java.lang.reflect.Method.invokeNative(Native Method)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at java.lang.reflect.Method.invoke(Method.java:511)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at dalvik.system.NativeStart.main(Native Method)
01-24 23:25:56.889: E/AndroidRuntime(20746): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class android.view.ViewGroup
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:643)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at com.srose.cyclopathed.MainActivity.onCreate(MainActivity.java:90)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.app.Activity.performCreate(Activity.java:5104)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-24 23:25:56.889: E/AndroidRuntime(20746):    ... 11 more
01-24 23:25:56.889: E/AndroidRuntime(20746): Caused by: java.lang.InstantiationException: can't instantiate class android.view.ViewGroup
01-24 23:25:56.889: E/AndroidRuntime(20746):    at java.lang.reflect.Constructor.constructNative(Native Method)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
01-24 23:25:56.889: E/AndroidRuntime(20746):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
01-24 23:25:56.889: E/AndroidRuntime(20746):    ... 26 more 
```

有人知道为什么吗？

谢谢

当前的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/myFragment"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<fragment
    android:id="@+id/leftContainer"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1" />

<fragment
    android:id="@+id/rightContainer"
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="2" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:50:11.680

LogCat 显示：

```
Caused by: java.lang.InstantiationException: can't instantiate class android.view.ViewGroup 
```

这意味着您不能在布局中创建通用 ViewGroup。一种常见的替代方法是`<fragment />`在属性中使用具有类的元素，`name`或者您可以使用特定的 ViewGroup，如 FrameLayout 或 LinearLayout。开发人员指南中有一些关于[片段](https://developer.android.com/guide/components/fragments.html)的示例。

# coldfusion - ColdFusion 图表无效颜色名称：白色

> ID：14512861
> 
> 赞同：1
> 
> 时间：2013-01-24T23:37:59.040
> 
> 标签：coldfusion, coldfusion-9, cfchart

我在包含 cfchart 和 cfchartseries 的 CF 页面上收到无效颜色错误。我还没有重现这个问题，但是当用户遇到它时我们会收到电子邮件通知。我无法隔离问题，所以我必须提供完整的代码块。任何帮助，将不胜感激。

代码：

```
 <cfchart format="png" chartwidth="270" xaxistitle="Visits last 7 Days" show3d="no" foregroundcolor="##333333" showborder="no" fontbold="yes" tipStyle="none" url="" showLegend="true"> 
        <cfchartseries type="line" query="chartData" itemcolumn="dateRange" valuecolumn="FLASHvisits" datalabelstyle="none" seriesLabel="FloorPlan">
        <cfif chartData.showVTS><cfchartseries type="line" query="chartData" itemcolumn="dateRange" valuecolumn="VTSvisits" seriesColor="blue"  datalabelstyle="none" seriesLabel="IDS"></cfif>
        <cfif chartData.showMobile><cfchartseries type="line" query="chartData" itemcolumn="dateRange" valuecolumn="MOBILEvisits" seriesColor="red"     datalabelstyle="none" seriesLabel="Mobile"></cfif>
    </cfchart>

  <!---
    The line that the stack trace says it's erroring on is:
    <cfif chartData.showMobile><cfchartseries type="line" query="chartData" itemcolumn="dateRange" valuecolumn="MOBILEvisits" seriesColor="red"   datalabelstyle="none" seriesLabel="Mobile"></cfif>
  ---> 
```

堆栈跟踪：

> org.xml.sax.SAXParseException：无效的颜色名称：com.gp.xml.util.XmlHandler.throwSAXException(XmlHandler.java:279) 处的白色 com.gp.xml.util.XmlHandler.setValue(XmlHandler.java:169) ) 在 com.gp.xml.parser.XmlParser.parseXmlToken(XmlParser.java:202) 在 com.gp.xml.parser.XmlParser 的 com.gp.xml.util.XmlHandler.startElement(XmlHandler.java:85)。 com.gp.xml.parser.XmlParser.parse(XmlParser.java:92) 的 parseToken(XmlParser.java:119) com.gp.xml.XmlReader.read(XmlReader.java:63) 的 com.gp.xml .XmlReader.read(XmlReader.java:55) 在 com.gp.api.styles.MxWidgetStyle.read(MxWidgetStyle.java:221) 在 com.gp.api.styles.MxWidgetStyle.read(MxWidgetStyle.java:210) 在Coldfusion.graph.Chart.getWebChartsStyleXml(Chart.java:183) 在coldfusion.tagext.io.ChartTag._getGraphStyle(ChartTag.java:531) 在coldfusion.tagext.io.ChartTag。在coldfusion.tagext.io.ChartTag.doEndTag(ChartTag.java:558) 的getGraphStyle(ChartTag.java:452)

**编辑：**我还应该提到我们在 Windows Server 2008 R2 6.1 之上运行 CF 9.0.1.274733、JRun4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:32:11.167

由于错误

```
Invalid color name: white at com.gp...... 
```

将指示您提供的代码中未引用的颜色，我猜您提供的代码实际上并没有导致问题。它可能在查询中或 cfchart 标记周围的某些代码中，但看起来错误不在图表本身中

# c++ - 首次使用对象后调用的全局对象构造函数

> ID：14512863
> 
> 赞同：0
> 
> 时间：2013-01-24T23:38:11.890
> 
> 标签：c++, gcc, constructor, global

据我所知，在任何人尝试使用这些对象之前，都需要调用全局对象的构造函数。但是在我的程序中似乎并非如此。这是我的简化代码（我用 gcc 版本 4.6.3-1ubuntu5 编译它）

```
#include <iostream>

using namespace std;

struct type_data
{
    int id;

    type_data()
        : id(-1) // set some invalid id
    {
        cout << "creating a new type data" << endl;
    }
};

template <typename T>
struct type_data_for_type
{
    static type_data data;
};
template <typename T>
type_data type_data_for_type<T>::data;

struct type_registry
{
    static type_registry& instance()
    {
        static type_registry i;
        return i;
    }

    void register_type(type_data& t)
    {
        cout << "registering a type" << endl;
        t.id = last_id++;
    }

    int last_id;
};

template <typename T>
struct registrator
{
    registrator()
    {
        type_registry::instance().
            register_type(type_data_for_type<T>::data);
    }

    int unused;
    static registrator payload;
};
template <typename T>
registrator<T> registrator<T>::payload;

class foo {};

inline void register_foo()
{
    registrator<foo>::payload.unused = 1;
}

int main()
{
    cout << type_registry::instance().last_id << endl;
    cout << type_data_for_type<foo>::data.id << endl;
    return 0;
} 
```

基本上它通过 register_foo 全局注册类型 foo。我希望输出是：

```
creating a new type data
registering a type
1
0 
```

但相反的是：

```
registering a type
creating a new type data
1
-1 
```

这意味着我在`type_data`调用其构造函数之前设置了对象的 id。

那么，这是一个编译器错误吗？我错过了什么吗？我可以做这个工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:54:20.840

我相信在这种情况下你不能依赖类模板的静态成员变量的初始化顺序。

此处相关的是 C++ 标准的第 3.6.2/2 节：

*“具有静态存储持续时间的非局部变量的动态初始化是有序的或无序的。明确专门化的类模板静态数据成员的定义已有序初始化。**其他类模板静态数据成员（即，隐式或显式实例化的特化）**有无序初始化****。”*

当然还有第 9.4.2/6 节，它指的是上述规则：

*“静态数据成员的初始化和销毁​​与非局部变量（3.6.2、3.6.3）完全一样。”*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:27:58.233

正在发生的事情是`registrator<foo>::payload`在`type_data_for_type<foo>::data`. `registrator<foo>`然而，的构造函数使用`type_data_for_type<foo>::data`.

您不能依赖以任何特定顺序调用静态初始化程序，并且在您的情况下，与您想要的顺序相比，它的发生顺序完全错误。

不过，我认为根本问题是您的解决方案过于复杂。你真的需要区分`type_data_for_type`and`registrator`吗？类型数据对象不能注册自己吗？

# c++ - C++ - 持续读取实时日志文件的最新行

> ID：14512866
> 
> 赞同：1
> 
> 时间：2013-01-24T23:38:19.930
> 
> 标签：c++, file, io

我编写了以下方法，该方法基本上从另一个线程连续写入的日志文件中读取最新行。此代码在不同的线程上运行并由计时器驱动（每 5 秒触发一次）。这很简单。这是它的样子：

```
void FileManager::ReadFile()
{
    std::vector<std::string> vecLines;
    std::string line;

    m_InputStream.clear();

    while (std::getline(m_InputStream, line))
    {
        vecLines.push_back(line);
    }

    if (! vecLines.empty())
    {
        OnFileUpdate(vecLines);
    }
} 
```

我的问题，这段代码安全吗？基本上，我执行的算法是提前打开输入流并查找文件末尾。然后当这个方法被调用时，如果有任何新的行要读取，那么它们将被读取到这里。如果有任何新行，则将通知该类的任何感兴趣的客户（通过 OnFileUpdate() 调用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:55:54.570

这需要在后台挂起一个线程。

我要做的是创建一个类来处理您的所有错误/事件日志记录，如下所示。您可以将所有内容设为静态，然后您可以从多个位置访问它 优点：没有额外的文件 I/O 没有辅助线程 缺点：没有锁就不是多核安全的

```
class EventLogger {
  public:
    EventLogger();
    ~EventLogger();
    void LogEvent(const std::string &event) {
      //Handle output to file here
      OnFileUpdate(event);
    }
  private: 
    void OnFileUpdate(const std::string &event) {
      //DoWorkHere
    }
} 
```

# regex - 来自 readlines() 的 Groovy 正则表达式匹配列表

> ID：14512867
> 
> 赞同：4
> 
> 时间：2013-01-24T23:38:20.507
> 
> 标签：regex, groovy, readlines

我正在尝试读取文本文件并返回所有不以 # 开头的行。在 python 中，我可以很容易地使用列表理解列表

```
with open('file.txt') as f:
     lines = [l.strip('\n') for l in f.readlines() if not re.search(r"^#", l)] 
```

我想通过 Groovy 完成同样的事情。到目前为止，我有以下代码，非常感谢任何帮助。

```
lines = new File("file.txt").readLines().findAll({x -> x ==~ /^#/ }) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T23:55:37.207

在 groovy 中，您通常必须使用`collect`来代替列表推导。例如：

```
new File("file.txt").readLines().findAll({x -> x ==~ /^#/ }).
    collect { it.replaceAll('\n', '') } 
```

请注意，`readLines()`已经去掉了换行符，所以在这种情况下没有必要。

对于搜索，您还可以使用以下`grep()`方法：

```
new File('file.txt').readLines().grep(~/^#.*/) 
```

# java - 在 jar 文件中加载 Slick2D 纹理

> ID：14512869
> 
> 赞同：0
> 
> 时间：2013-01-24T23:38:35.010
> 
> 标签：java, slick2d

我将我的游戏导出为 jar，纹理加载将不再起作用。我有一个类将 Spritesheet 作为静态变量提供

```
public static Texture SPRITESHEET = loadTexture("res/texture/spritesheet.png");

public static Texture loadTexture(String path) {

    try {
        return TextureLoader.getTexture("PNG",new FileInputStream(path));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return null; 
```

当我尝试运行 jar 时出现异常：java.io.FileNotFoundException: res\texture\spritesheet.png（系统找不到指定的路径）

我解压缩了 jar 以检查 res 文件夹是否在其中。我是否必须进行特定设置才能告诉程序从哪里开始查找文件夹？

我使用 JarSplice 为 lwjgl 和 slick 构建了一个胖罐。

# java - CardLayout + 并发

> ID：14512870
> 
> 赞同：1
> 
> 时间：2013-01-24T23:38:35.360
> 
> 标签：java, swing, concurrency, cardlayout

我对 SWING 很陌生，经过一些测试后，我决定使用 CardLayout 来编写一个非常简单的程序：我有 3 张卡片（一张用于登录，一张用于添加数据，另一张用于显示）。问题是我有一个在这些卡之间共享的列表（通过了引用），并且可以被不止一张卡修改。出于某种原因，在我玩了一会儿之后，程序在尝试迭代列表时中断，如下面的错误所示：

```
Exception in thread "AWT-EventQueue-0" java.util.ConcurrentModificationException
at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819) 
```

除了修改列表或其他任何东西之外，没有任何线程，所以我不确定为什么会出现异常。我什至尝试同步在列表上运行但没有好的结果的部分代码。我不完全确定我是否说清楚了，请随时提出问题。（没有提供代码，因为它不仅仅是一个片段，但如果有人觉得有必要，我会放上来）。

提前致谢。

-- 编辑 -- 这是代码： 主类：

```
package cantodasletras.br.views;

import java.awt.CardLayout;

public class CantoDasLetrasMain {

private JFrame frmCantodasletras;
private static int DEBUG = 0;
private final String LOGINMENU = "The user login view";
private final String MENUVIEW = "The user menu view";
private final String SEARCHVIEW = "The search view";
private final String ADDNEWVIEW = "The create new order view";

private ArrayList<Order> listOfOrders = null;

private JPanel renderPanel;

/**
 * Launch the application.
 */
public static void main(final String[] args) {
EventQueue.invokeLater(new Runnable() {
  public void run() {
    if (args.length > 0) 
        DEBUG = 1;

    try {
      CantoDasLetrasMain window = new CantoDasLetrasMain();
      window.frmCantodasletras.setVisible(true);
    }
    catch (Exception e) {
      e.printStackTrace();
    }
  }
});
}

/**
 * Create the application.
 */
public CantoDasLetrasMain() {
  initialize();
}

/**
 * Initialize the contents of the frame.
 */
private void initialize() {

listOfOrders = new ArrayList<Order>();

UIManager.put("Button.defaultButtonFollowsFocus", Boolean.TRUE);
frmCantodasletras = new JFrame();
frmCantodasletras.setTitle("CantoDasLetras 1.0");
frmCantodasletras.setBounds(100, 100, 754, 530);
frmCantodasletras.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frmCantodasletras.getContentPane().setLayout(null);

renderPanel = new JPanel();
renderPanel.setBounds(0, 0, 738, 472);
frmCantodasletras.getContentPane().add(renderPanel);
renderPanel.setLayout(new CardLayout(0, 0));
CardLayout cl = (CardLayout) renderPanel.getLayout();

//Inicializar todas as views

LoginView lv = new LoginView(cl,renderPanel);
renderPanel.add(lv, LOGINMENU);

MenuView mv = new MenuView(cl, renderPanel);
renderPanel.add(mv,MENUVIEW);

SearchView sv = new SearchView(cl,renderPanel,listOfOrders);
renderPanel.add(sv,SEARCHVIEW);

AddNewView anv = new AddNewView(cl, renderPanel,listOfOrders);
renderPanel.add(anv,ADDNEWVIEW);

  }
} 
```

这是卡片：

```
package cantodasletras.br.views;

import java.awt.CardLayout;

public class AddNewView extends JPanel {

  private final String MENUVIEW = "The user menu view";
  private JTextField fieldNome;
  private JTextField fieldTelefone;
  private JTextField fieldLivro;
  private JTextField fieldQuantidade;
  private JTextField fieldData;
  private JComboBox cBSit;
  private JTextArea fieldObs;

  /**
   * Create the panel.
   */
  public AddNewView(final CardLayout cl, final JPanel renderPanel,
    final ArrayList<Order> orders) {
    setLayout(null);

    JButton btnNewButton = new JButton("Cancelar");
    btnNewButton.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e) {
        cl.show(renderPanel, MENUVIEW);
      }
    });
    btnNewButton.setBounds(541, 429, 89, 33);
    add(btnNewButton);

    JButton btnCadastrar = new JButton("Cadastrar");
    btnCadastrar.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e) {

        String nome = fieldNome.getText();
        String livro = fieldLivro.getText();
        String telefone = fieldTelefone.getText();
        String situacao = (String) cBSit.getSelectedItem();
        Integer quantidade = Integer.parseInt(fieldQuantidade.getText());
        String obs = fieldObs.getText();
        String data = fieldData.getText();

        fieldNome.setText("");
        fieldLivro.setText("");
        fieldTelefone.setText("");
        cBSit.setSelectedIndex(0);
        fieldQuantidade.setText("");
        fieldObs.setText("");
        fieldData.setText("");

        orders.add(new Order(nome, data, livro, telefone, situacao, quantidade,
          obs));

        cl.show(renderPanel, MENUVIEW);

        return;

      }
    });
    btnCadastrar.setBounds(424, 429, 89, 33);
    add(btnCadastrar);

    JLabel lblNome = new JLabel("Nome:");
    lblNome.setBounds(44, 64, 46, 14);
    add(lblNome);

    JLabel lblTelefone = new JLabel("Telefone:");
    lblTelefone.setBounds(44, 108, 46, 14);
    add(lblTelefone);

    JLabel lblLivro = new JLabel("Livro:");
    lblLivro.setBounds(44, 150, 46, 14);
    add(lblLivro);

    fieldNome = new JTextField();
    fieldNome.setBounds(108, 61, 498, 20);
    add(fieldNome);
    fieldNome.setColumns(10);

    fieldTelefone = new JTextField();
    fieldTelefone.setBounds(108, 105, 498, 20);
    add(fieldTelefone);
    fieldTelefone.setColumns(10);

    fieldLivro = new JTextField();
    fieldLivro.setBounds(108, 147, 498, 20);
    add(fieldLivro);
    fieldLivro.setColumns(10);

    JLabel lblSituao = new JLabel("Situa\u00E7\u00E3o:");
    lblSituao.setBounds(44, 186, 46, 14);
    add(lblSituao);

    JLabel lblNewLabel = new JLabel("Quantidade:");
    lblNewLabel.setBounds(44, 224, 60, 14);
    add(lblNewLabel);

    fieldQuantidade = new JTextField();
    fieldQuantidade.setBounds(108, 221, 498, 20);
    add(fieldQuantidade);
    fieldQuantidade.setColumns(10);

    JLabel lblObs = new JLabel("Obs:");
    lblObs.setBounds(44, 300, 46, 14);
    add(lblObs);

    JLabel lblCadastroDeNovo = new JLabel("Cadastro de Novo Pedido");
    lblCadastroDeNovo.setFont(new Font("Tahoma", Font.PLAIN, 17));
    lblCadastroDeNovo.setBounds(253, 21, 190, 20);
    add(lblCadastroDeNovo);

    cBSit = new JComboBox();
    cBSit.setModel(new DefaultComboBoxModel(new String[] { "A pedir",
        "Pedido Feito", "Avisado", "ND", "Esgotado", "Fora de Cat\u00E1logo",
        "N\u00E3o Encontrado", "Lan\u00E7amento Previsto", "Entregue",
        "Desisdente" }));
    cBSit.setSelectedIndex(0);
    cBSit.setBounds(108, 183, 498, 20);
    add(cBSit);

    JLabel lblData = new JLabel("Data:");
    lblData.setBounds(44, 261, 46, 14);
    add(lblData);

    fieldData = new JTextField();
    fieldData.setBounds(108, 261, 498, 20);
    add(fieldData);
    fieldData.setColumns(10);

    fieldObs = new JTextArea();
    fieldObs.setText("Sem obs;");
    fieldObs.setBounds(108, 300, 498, 96);
    add(fieldObs);

  }
} 
```

最后一个：

```
package cantodasletras.br.views;

import java.awt.BorderLayout;

public class SearchView extends JPanel {
  private final String MENUVIEW = "The user menu view";
  private JTable table;
  private JTextField textField_1;

  /**
   * Create the panel.
   */
  public SearchView(final CardLayout cl, final JPanel renderPanel,
    final ArrayList<Order> orders) {
    GridBagLayout gridBagLayout = new GridBagLayout();
    gridBagLayout.columnWidths =
      new int[] { 0, 0, 17, 224, 66, 333, 77, 0, 0, 0, 0, 0, 0, 0, 0 };
    gridBagLayout.rowHeights = new int[] { 0, 0, 0, 0, 0, 0, 0 };
    gridBagLayout.columnWeights =
      new double[] { 0.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0,
          0.0, 0.0, 0.0, Double.MIN_VALUE };
    gridBagLayout.rowWeights =
      new double[] { 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, Double.MIN_VALUE };
    setLayout(gridBagLayout);

    JLabel lblBuscarCadastro = new JLabel("Buscar Cadastro");
    lblBuscarCadastro.setFont(new Font("Tahoma", Font.PLAIN, 17));
    GridBagConstraints gbc_lblBuscarCadastro = new GridBagConstraints();
    gbc_lblBuscarCadastro.insets = new Insets(0, 0, 5, 5);
    gbc_lblBuscarCadastro.gridx = 5;
    gbc_lblBuscarCadastro.gridy = 0;
    add(lblBuscarCadastro, gbc_lblBuscarCadastro);

    JLabel lblFiltro = new JLabel("Filtro:");
    GridBagConstraints gbc_lblFiltro = new GridBagConstraints();
    gbc_lblFiltro.anchor = GridBagConstraints.SOUTH;
    gbc_lblFiltro.insets = new Insets(0, 0, 5, 5);
    gbc_lblFiltro.gridx = 3;
    gbc_lblFiltro.gridy = 1;
    add(lblFiltro, gbc_lblFiltro);

    JComboBox comboBox = new JComboBox();
    comboBox.setModel(new DefaultComboBoxModel(new String[] { "Nome", "Livro",
        "A pedir", "Pedido Feito", "Avisado", "ND", "Esgotado",
        "Fora de Cat\u00E1logo", "N\u00E3o Encontrado",
        "Lan\u00E7amento Previsto", "Entregue", "Cancelado" }));
    GridBagConstraints gbc_comboBox = new GridBagConstraints();
    gbc_comboBox.insets = new Insets(0, 0, 5, 5);
    gbc_comboBox.gridx = 3;
    gbc_comboBox.gridy = 2;
    add(comboBox, gbc_comboBox);

    textField_1 = new JTextField();
    GridBagConstraints gbc_textField_1 = new GridBagConstraints();
    gbc_textField_1.insets = new Insets(0, 0, 5, 5);
    gbc_textField_1.fill = GridBagConstraints.HORIZONTAL;
    gbc_textField_1.gridx = 5;
    gbc_textField_1.gridy = 2;
    add(textField_1, gbc_textField_1);
    textField_1.setColumns(10);

    JButton btnProcurar = new JButton("Procurar");
    btnProcurar.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e) {
        DefaultTableModel dm = (DefaultTableModel) table.getModel();
        dm.setRowCount(0);
        initTable(orders);
      }
    });
    GridBagConstraints gbc_btnProcurar = new GridBagConstraints();
    gbc_btnProcurar.insets = new Insets(0, 0, 5, 5);
    gbc_btnProcurar.gridx = 7;
    gbc_btnProcurar.gridy = 2;
    add(btnProcurar, gbc_btnProcurar);

    JButton btnVoltar = new JButton("Voltar");
    btnVoltar.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e) {
        cl.show(renderPanel, MENUVIEW);

      }
    });
    GridBagConstraints gbc_btnVoltar = new GridBagConstraints();
    gbc_btnVoltar.insets = new Insets(0, 0, 5, 5);
    gbc_btnVoltar.gridx = 9;
    gbc_btnVoltar.gridy = 2;
    add(btnVoltar, gbc_btnVoltar);

    JPanel panel_1 = new JPanel();
    GridBagConstraints gbc_panel_1 = new GridBagConstraints();
    gbc_panel_1.gridheight = 3;
    gbc_panel_1.gridwidth = 9;
    gbc_panel_1.insets = new Insets(0, 0, 5, 5);
    gbc_panel_1.fill = GridBagConstraints.BOTH;
    gbc_panel_1.gridx = 3;
    gbc_panel_1.gridy = 3;
    add(panel_1, gbc_panel_1);

    JComboBox combo = new JComboBox();
    combo.setModel(new DefaultComboBoxModel(new String[] { "A pedir",
        "Pedido Feito", "Avisado", "ND", "Esgotado", "Fora de Cat\u00E1logo",
        "N\u00E3o Encontrado", "Lan\u00E7amento Previsto", "Entregue",
        "Desisdente" }));
    combo.setSelectedIndex(0);

    panel_1.setLayout(new BorderLayout());
    table = new JTable();
    table
      .setModel(new DefaultTableModel(new Object[][] {},
        new String[] { "Telefone", "Nome", "Data", "Livro", "Quantidade",
            "Situacao", "Obs" }));

    table.getColumn(table.getColumnName(5)).setCellEditor(
      new javax.swing.DefaultCellEditor(combo));

    table.getModel().addTableModelListener(new TableModelListener() {

      public void tableChanged(TableModelEvent e) {

        if (!(table.getModel().getRowCount() > 0))
          return;

        if (e.getType() == TableModelEvent.UPDATE) {

          int col = e.getColumn();
          int row = e.getFirstRow();

          String telefone = (String) table.getValueAt(row, 0);
          String nome = (String) table.getValueAt(row, 1);
          String data = (String) table.getValueAt(row, 2);
          String livro = (String) table.getValueAt(row, 3);
          String quantidade = (String) table.getValueAt(row, 4);
          String situacao = ((String) table.getValueAt(row, 5));
          String obs = (String) table.getValueAt(row, 6);

          Order nOrd =
            new Order(nome, data, livro, telefone, situacao, Integer
              .parseInt(quantidade), obs);

          if (col == 0 || col == 1) {
            int result =
              JOptionPane
                .showConfirmDialog(
                  (Component) null,
                  "Alterar o nome ou telefone de um cadastro irá gerar um novo cadastro. Deseja continuar?",
                  "Alerta!", JOptionPane.OK_CANCEL_OPTION);

            if (result == 0) {

              if (!orders.contains(nOrd))
                orders.add(nOrd);

            }
            return;
          }

          for (Order or : orders) {

            if (or.equals(nOrd))
              orders.remove(or);
            orders.add(nOrd);

          }
        }

      }
    });

    JScrollPane tableContainer = new JScrollPane(table);

    panel_1.add(tableContainer, BorderLayout.CENTER);

  }

  void initTable(ArrayList<Order> orders) {
    // Initialize table

    DefaultTableModel dtm = (DefaultTableModel) table.getModel();

    for (Order order : orders) {

      dtm.addRow(new Object[] { order.getTelefone(), order.getNome(),
          order.getData(), order.getLivro(), order.getQuantidade().toString(),
          order.getSituacao(), order.getObs() });

    }

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:06:25.210

由于您没有提供完整的堆栈跟踪，并且代码无法编译（如发布的那样），因此很难理解错误发生在哪里。

但是，在迭代时从列表 (in) 中删除元素的方式`SearchView`是不正确的，可能是导致异常的原因：

```
 for (Order or : orders) {
    if (or.equals(nOrd))
      orders.remove(or);
  } 
```

您应该使用迭代器及其[remove()](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#remove%28%29)方法。例如：

```
for (Iterator<Order> iterator = orders.iterator(); iterator.hasNext();) {
    Order order = iterator.next();
    if (order.equals(nOrd)) {
        iterator.remove();
    }
} 
```

有关详细信息，请参阅[集合接口](http://docs.oracle.com/javase/tutorial/collections/interfaces/collection.html)。它指出：

> 请注意， Iterator.remove 是在迭代期间修改集合的唯一安全方法；如果在迭代过程中以任何其他方式修改了基础集合，则行为未指定。
> 
> 需要时使用 Iterator 而不是 for-each 构造：
> 
> 删除当前元素。for-each 构造隐藏了迭代器，因此您不能调用 remove。

# python - Django DetailView with a form

> ID：14512871
> 
> 赞同：1
> 
> 时间：2013-01-24T23:38:38.707
> 
> 标签：python, django-forms

I am working on a Todo list and was wondering the best way to add a form to a DetailView. I am now assuming from reading around that I need to make a function to do it but was curious if I could use a CBV.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:52:17.513

You could use `FormView` for this task.

Please look up the [Django doc](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-editing/#formview) for usages.

I used this CBV a lot in my project and found it greatly separate the logics.

# php - 将 XML 字符串解析为 PHP 数组？

> ID：14512872
> 
> 赞同：0
> 
> 时间：2013-01-24T23:38:46.767
> 
> 标签：php, arrays, cakephp-2.0

我正在创建一个 RESTful 网络服务，现在我正面临着新资源（`Season`资源）的插入。这是 POST 请求的正文：

```
<request>
   <Season>
      <title>new title</title>
   </Season>
</request> 
```

这是有效执行插入的控制器：

```
public function add() {
    // i feel shame for this line
    $request = json_decode(json_encode((array) simplexml_load_string($this->request->input())), 1);

    if (!empty($request)) {
        $obj = compact("request");
        if ($this->Season->save($obj['request'])) {
            $output['status'] = Configure::read('WS_SUCCESS');
            $output['message'] = 'OK';
        } else {
            $output['status'] = Configure::read('WS_GENERIC_ERROR');
            $output['message'] = 'KO';
        }
        $this->set('output', $output);
    }
    $this->render('generic_response');
} 
```

代码运行良好，但正如我在上面的代码片段中所写，我认为控制器的第一行真的很丑，所以问题是：如何将 XML 字符串解析为 PHP 数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:08:52.613

这对我有用，试试吧；

```
<request>
   <Season>
      <title>new title</title>
   </Season>
   <Season>
      <title>new title 2</title>
   </Season>
</request> 
```

.

```
$xml = simplexml_load_file("xml.xml");
// print_r($xml);
$xml_array = array();
foreach ($xml as $x) {
    $xml_array[]['title'] = (string) $x->title;
    // or 
    // $xml_array['title'][] = (string) $x->title;
}
print_r($xml_array); 
```

结果;

```
SimpleXMLElement 对象
(
    [季节] => 数组
        (
            [0] => SimpleXMLElement 对象
                (
                    [标题] => 新标题
                )

            [1] => SimpleXMLElement 对象
                (
                    [标题] => 新标题 2
                )

        )

)
大批
(
    [0] => 数组
        (
            [标题] => 新标题
        )

    [1] => 数组
        (
            [标题] => 新标题 2
        )

)
// 或者
大批
(
    [标题] => 数组
        (
            [0] => 新标题
            [1] => 新标题 2
        )

)

```

# html - 为什么线性渐变不能正常工作？

> ID：14512874
> 
> 赞同：1
> 
> 时间：2013-01-24T23:38:49.697
> 
> 标签：html, css, twitter-bootstrap

当它开始加载页面时，我会在它呈现内容之前看到这张图片。
我怎样才能解决这个问题？

我需要检查什么？

我正在使用 twitter-bootstrap。
有导航、井和流体。

![在此处输入图像描述](../Images/672b63f58c8f0d1f0f2ec6a38af23fa2.png)

**CSS**

```
body { 
    min-width: 350px;
    padding-top: 50px;
    padding-bottom: 50px;
    padding-left: 20px;
    padding-right: 20px;
    background-color: rgb(49, 57, 68);
    background-image: linear-gradient(to bottom, rgb(49, 57, 68), rgb(32, 37, 44));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:44:42.693

添加：

```
background-repeat: no-repeat; 
```

渐变就像背景图像一样，默认情况下重复是打开的。

PS：您拥有的样式更适合您的导航元素，而不是身体

# javascript - CSS 下拉菜单在 IE8 中不起作用

> ID：14512877
> 
> 赞同：0
> 
> 时间：2013-01-24T23:38:56.793
> 
> 标签：javascript, css, drop-down-menu, internet-explorer-8

我需要一些帮助。

我正在优化我为注册协会制作的主页。

我想支持IE8和IE7。

我正在使用下拉导航。如果我将鼠标悬停在“Verein”上，下拉菜单应该会向下滑动，内容为“Vorstand, Satzung, ...”。

现在这是我的问题：下拉菜单适用于 IE9、IE10、Firefox、Chrome 和 Safari。但是，如果我将鼠标悬停在 IE8 中的“Verein”上，子菜单将不会向下滑动。它似乎是看不见的。

我知道它有很多代码，所以我做了一个 jsFiddle 示例（简化的代码），如 millimoose 建议的： [示例](http://jsfiddle.net/uPLSD/)

jsFiddle 在 IE7 中对我来说很好用，所以我相信它有一些与 css 相关的东西。

这是该网站的一个活生生的例子：[geschichtsverein-bademstal.de](http://geschichtsverein-bademstal.de)

这里的html结构：

```
<section id="navigation">
    <!-- Navigation Oben -->    
    <div id="navigation_bg"></div>
    <ul id="nav" class="nav">
        <li class="kontakt"><a href="#">Top</a>
            <ul class="sub">
                <li><a href="#">Sub 1</a></li>
                <li><a href="#">Sub 2</a></li>
            </ul>
        </li>
    </ul>
</section> 
```

这是我的CSS：

```
ul.nav {
  position: relative;
  float: right;
  margin: -260px 10px 0 0;
  font-size: 12px;
  -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)"; /* IE 8 */
  filter: alpha(opacity=80); /* IE 5-7 */
  z-index: 200;
}

ul.nav li {
  position: relative;
  display: block;
  float: left;
}

/* Text Navileiste */
ul.nav a {
  display: block;
  padding: 4px 10px 5px 10px;
  color: #FFFFFF;
  text-decoration: none;
  vertical-align: middle;
  font-weight: bold;
}

ul.nav li:hover {
  background: #FFFFFF;
}

ul.nav li:hover a {
  color: #000000;
}

/* Dropdown Navileiste */
ul.nav ul {
  position: absolute;
  display: none;
  width: 140px;
  padding: 0;
  background-color: #FFFFFF;
  z-index: 9999;
}

ul.nav ul li {
  float: none;
}

/* Text Dropdown Navileiste */
ul.nav ul a {
  text-align: left;
  color: #000000;
  font-weight: normal;
  width: 140px;
}

/* Hovereffekt */
ul.nav ul li:hover > a {
  background-color: #CCCCCC;
  -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)"; /* IE 8 */
  filter: alpha(opacity=80); /* IE 5-7 */
}

/* Dropdown > Ebene 1 */
ul.nav ul ul{
  position: absolute;
  top: 0;
  left: 100%;
  border-left: 1px solid #4C4C4C;
}

/* Pfeilsymbol Dropdown */
ul.nav span {
  display: block;
  overflow: visible;
  background-position: right center;
  background-repeat: no-repeat;
}

ul.nav ul span {
  background-image:url("../../img/icons/arrowsub.png");
} 
```

这里是 JS：

```
 /* Subnav Ebene 1 */
$('.nav').children('li').each(function(){
    $(this).bind('mouseenter',function(){
        $(this).find('.sub').slideDown(300);
    }).bind('mouseleave',function(){
        $(this).find('.sub').stop(true,true).hide();
    });
});

/* Subnav Ebene 2*/
$('.nav li ul').children('li').each(function(){
    $(this).bind('mouseenter',function(){
        $(this).find('.sub_2').slideDown(300);
    }).bind('mouseleave',function(){
        $(this).find('.sub_2').stop(true,true).hide();
    });
});

/* Subnav Ebene 3 */
$('.nav li ul ul').children('li').each(function(){
    $(this).bind('mouseenter',function(){
        $(this).find('.sub_3').slideDown(300);
    }).bind('mouseleave',function(){
        $(this).find('.sub_3').stop(true,true).hide();
    });
}); 
```

编辑：解决了我的问题

刚刚删除了我的css中的以下代码，现在它可以工作了。

```
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)"; /* IE 8 */  
filter: alpha(opacity=80); /* IE 5-7 */ 
```

感谢每一个有用的评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:09:53.577

您已为弹出窗口分配了一个 KONTAKT 类，但我在上面的代码中没有看到它。

我指的是这条线...

```
<li class="kontakt"> 
```

问题可能出在那儿吗？

# lucene - 有没有办法删除弹性搜索中字段长度规范的计算？

> ID：14512885
> 
> 赞同：6
> 
> 时间：2013-01-24T23:39:39.733
> 
> 标签：lucene, elasticsearch

**`lengthNorm`是计算字段范数的三个因素之一。**

在弹性搜索中，可以关闭场法线`"omit_norms" : true`

不幸的是，这会导致在查询此类字段时不会应用索引时间提升。

**有没有办法严格关闭计算`lengthNorm`？**

我需要字段级索引时间提升，但我真的需要字段的长度无关紧要。

[**参考**](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/Similarity.html)

![在此处输入图像描述](../Images/9af90bcec5f8bfea740a90e77c0b3141.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:39:53.707

正如您所说，lengthNorm 和字段级别提升都存储在`norm`. 所以不，你不能没有另一个。

但是您实际上并不需要在索引时进行字段提升。相反，您可以在搜索时应用它，这样您以后想要调整提升级别时就有更大的灵活性。

不仅如此，通过设置`omit_norms`，您可以将索引时必须存储的数据量减少很多，因此建议在适当的情况下（例如在您的情况下）。

# c# - 基于多对多关系的结果

> ID：14512892
> 
> 赞同：0
> 
> 时间：2013-01-24T23:40:05.097
> 
> 标签：c#, entity-framework, asp.net-mvc-4, many-to-many

我不完全确定这个问题的标题是什么，这是我要解决的问题。

我有两张表，它们之间存在多对多关系，Fight 和 Fighter。一个战士可以参加很多战斗，一个战斗有很多战士（2个战士）。这些映射得很好，但我想做的是在战斗表中有一个列，我可以在其中设置谁赢得了两个战士之间的战斗。最好的方法是什么？

在此先感谢您，如果您不明白，我会尝试以更好的方式进行解释。

```
public class Fight
{
    [Key]
    public int FightId { get; set; }

    [Key, ForeignKey("FightCard")]
    public int CardId { get; set; }

    public virtual ICollection<Fighter> Fighters { get; set; }

    }

public class Fighter
{
    [Key]
    public int FighterID { get; set; }

    [Required]
    [DisplayName("First Name")]
    public string FirstName { get; set; }

    [Required]
    [DisplayName("Last Name")]
    public string LastName { get; set; }

    [DisplayName("Nickname")]
    public string NickName { get; set; }

    [Required]
    public string Nationality { get; set; }

    public static String[] WeightClassOptions
    {
        get
        {
            return new String[] { "Heavyweight", "Light Heavyweight", "Middleweight", "Welterweight", "Lightweight", "Featherweight", "Bantamweight", "Flyweight" };
        }
    }

    [DisplayName("Weight Class")]
    public string WeightClass { get; set; }

    public string Height { get; set; }

    [Required]
    [DisplayName("Date of Birth")]
    [DataType(DataType.Date)]
    public DateTime DateOfBirth { get; set; }

    // Fight Record:
    public int Wins { get; set; }
    public int Loss { get; set; }
    public int Draw { get; set; }
    public int NoContest { get; set; }

    public String Picture { get; set; }

    public virtual ICollection<Fight> Fight { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:42:51.350

`Fight`您可以创建从到`Fighter`被调用的一对多关系`Winner`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:43:17.870

您应该有一个连接表来映射 Fighters 和 Fights 表之间的多对多关系。我们称这个联结表`FightersFights`。

在`FightersFights`中，您可以添加一列，指示每个加入的战斗是赢还是输。像这样的东西

```
| Fighters |         | FightersFights |             | Fights |
------------         ------------------             ----------
| Id       |         | FighterId      |             | Id     |
| Name     | 1     n | FightId        | n         1 | Name   |
|          |---------| Winner         |-------------|        | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T23:45:52.000

或者，您可以`idWinner`在表中添加一个对`Fight`获胜者的 id 的引用，这样可以避免创建另一个表。您还可以添加一个`winner`包含 1 或 2 的字段，具体取决于哪个战斗机获胜，但这很混乱

# c# - 如何比较 DropDown 值和 GridView 列值，如果它们不同则隐藏

> ID：14512895
> 
> 赞同：0
> 
> 时间：2013-01-24T23:40:20.417
> 
> 标签：c#, gridview, dropdownlistfor

如何比较 DropDownList 值和 GridView 列值，如果不同则隐藏？

我有 5 列。第一个和第二个是来自 DropdownList 的值，其他是来自某些 DMX 查询的结果。如果它们与用户在 DropDownList 中选择的值不同，我应该隐藏第三列中的值

我尝试了许多解决方案，但它们不起作用。最后，我尝试了这个功能。先感谢您！

私人无效 GenerateUniqueData() {

```
 for (int i = 0; i < GridView1.Rows.Count; i++)
    {

        DataControlFieldCell cell = GridView1.Rows[i].Cells[2] as DataControlFieldCell;
        if (cell.Text!=DropDownList6.SelectedItem.Value)
            GridView1.Rows[i].Visible = false;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:58:57.680

看看这篇文章。这里要介绍的太多了：http: [//www.codeproject.com/Articles/43727/Show-Hide-GridView-Columns-in-ASP-NET](http://www.codeproject.com/Articles/43727/Show-Hide-GridView-Columns-in-ASP-NET)

编辑：让我们在普通的 ASP.NET 中尝试一下，后面有代码：首先要检查，你是否打开了 DropDownList上的**AutoPostBack ？**如果没有到服务器的往返行程，则您的代码都没有任何区别，它将不会被执行。

```
<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True">
</asp:DropDownList> 
```

这是一个工作示例... HTML：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="DataGridTest.aspx.cs" Inherits="DataGridTest" %>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" 
            onselectedindexchanged="DropDownList1_SelectedIndexChanged">
        </asp:DropDownList>
        <br />
        <br />
        <asp:GridView ID="GridView1" runat="server">
        </asp:GridView>
    </div>
    </form>
</body>
</html> 
```

代码背后：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;

public partial class DataGridTest : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            List<string> ddData = new List<string>();
            ddData.Add("Col 21");
            ddData.Add("Col 22");
            ddData.Add("Col 23");

            this.DropDownList1.DataSource = ddData;
            this.DropDownList1.DataBind();

            DataTable gridData = new DataTable();
            gridData.Columns.Add("Description");
            gridData.Columns.Add("Column 1");
            gridData.Columns.Add("Column 2");
            gridData.Columns.Add("Column 3");

            gridData.Rows.Add("Row 1", "Col 11", "Col 21", "Col 31");
            gridData.Rows.Add("Row 2", "Col 12", "Col 22", "Col 32");
            gridData.Rows.Add("Row 3", "Col 13", "Col 23", "Col 33");
            gridData.Rows.Add("Row 3", "Col 14", "Col 22", "Col 34");

            this.GridView1.DataSource = gridData;
            this.GridView1.DataBind();
        }
    }

    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        for (int i = 0; i < this.GridView1.Rows.Count; i++)
        {
            this.GridView1.Rows[i].Visible = true;

            string cellvalue = GridView1.Rows[i].Cells[2].Text;
            if (cellvalue.TrimEnd() != this.DropDownList1.SelectedItem.Value.TrimEnd())
                GridView1.Rows[i].Visible = false;
        }
    }
} 
```

# java - 使用 POST 将数据从 Java(Android) 发送到 PHP

> ID：14512901
> 
> 赞同：0
> 
> 时间：2013-01-24T23:41:11.543
> 
> 标签：java, php, android

我在 Android 中有一个应用程序，女巫拍照并需要使用 php 将其上传到服务器。

一开始没有问题，可以上传，但是现在需要把上传图片的路径传到服务器。当我尝试发送两个值时，问题就来了。

我正在使用以下代码：

```
private  void httpPostFileUpload(String fpath, String uPath){
        HttpURLConnection connection = null;
        DataOutputStream outputStream = null;
        DataInputStream inputStream = null;

        //Path where to upload
        String uploadPath = uPath;

        String pathToOurFile = fpath;
        Log.v("file path",fpath.toString());
        String urlServer = "http://leojg.alwaysdata.net/tests/androidConnect/handle_upload.php";

        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary =  "*****";
        String fname = "";

        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1*1024*1024;

        try
        {
            File f = new File(pathToOurFile);
            fname =  f.getName();

            FileInputStream fileInputStream = new FileInputStream(f);

            URL url = new URL(urlServer);
            connection = (HttpURLConnection) url.openConnection();

            // Allow Inputs & Outputs
            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);

            // Enable POST method
            connection.setRequestMethod("POST");

            connection.setRequestProperty("Connection", "Keep-Alive");
            connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

            outputStream = new DataOutputStream( connection.getOutputStream() );
            outputStream.writeBytes(twoHyphens + boundary + lineEnd);

            Log.d("path file", pathToOurFile);
            Log.d("path up", uploadPath);

        outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile + "\"" + lineEnd);
            outputStream.writeBytes(lineEnd);

            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];

            // Read file
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);

            while (bytesRead > 0)
            {
                outputStream.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }

            outputStream.writeBytes(lineEnd);
            outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

            // Responses from the server (code and message)
            int serverResponseCode = connection.getResponseCode();
            String serverResponseMessage = connection.getResponseMessage();

            Log.d("amanda", "upload async finished, server response : " + serverResponseMessage);

            fileInputStream.close();
            fileInputStream = null;
            outputStream.flush();
            outputStream.close();
            outputStream = null;
            f= null;

            parent.invokeJs("pictureUploadEnded('" + fname + "')");
            this.delete(fpath);

        }
            catch (Exception ex)
        {
                Log.d("amanda", "exception uploading image : " + ex.getMessage());
        }     
} 
```

我很确定问题出在这一行

```
outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile + "\"" + lineEnd); 
```

这是制作帖子主体的那个。我不知道在哪里附加**uploadPath**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:45:05.870

很好地为我工作：

```
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;
import android.os.Environment;
import android.util.Log;

public class HttpPictureUpload implements Runnable {
private String TAG = "HTTPFILEUPLOAD";
private URL connectURL;
private FileInputStream fileInputStream = null;
private String pictureFileName;
private String myName;

public HttpPictureUpload(String urlString, String pictureFileNameString,
        String myNameString) {
    try {
        connectURL = new URL(urlString);

        pictureFileName = pictureFileNameString;
        myName = myNameString;

    } catch (Exception ex) {
        Log.i(TAG, "URL Malformatted");
    }
}

public void SendPictureNow() {

    Sending();
}

private void Sending() {
    int maxBufferSize = 1 * 1024*1024*1024;
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";

    try {

        fileInputStream = new FileInputStream(Environment
                .getExternalStorageDirectory().toString()
                + "/Picture/"
                + pictureFileName);

        Log.e(TAG, "Starting Http File Sending to URL");

        // Open a HTTP connection to the URL
        HttpURLConnection conn = (HttpURLConnection) connectURL
                .openConnection();
        conn.setChunkedStreamingMode(maxBufferSize);
        // conn.setchu

        // Allow Inputs
        conn.setDoInput(true);

        // Allow Outputs
        conn.setDoOutput(true);

        // Don't use a cached copy.
        conn.setUseCaches(false);

        // Use a post method.
        conn.setRequestMethod("POST");

        conn.setRequestProperty("Connection", "Keep-Alive");

        conn.setRequestProperty("Content-Type",
                "multipart/form-data;boundary=" + boundary);

        DataOutputStream dos = new DataOutputStream(conn.getOutputStream());

        // sending appid
        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"my_name\""
                + lineEnd);
        dos.writeBytes(lineEnd);
        dos.writeBytes(myName);
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + lineEnd);

        dos.writeBytes("Content-Disposition: form-data; name=\"file\";filename=\""
                + System.currentTimeMillis() + "\"" + lineEnd);
        dos.writeBytes(lineEnd);

        int bytesAvailable = fileInputStream.available();

        byte[] buffer = new byte[bytesAvailable];

        int bytesRead = fileInputStream.read(buffer, 0, bytesAvailable);

        while (bytesRead > 0) {
            dos.write(buffer, 0, bytesAvailable);
            bytesAvailable = fileInputStream.available();
            bytesAvailable = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bytesAvailable);
        }
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        fileInputStream.close();

        dos.flush();

        Log.e(TAG,
                "File Sent, Response: "
                        + String.valueOf(conn.getResponseCode()));

        InputStream is = conn.getInputStream();

        // retrieve the response from server
        int ch;

        StringBuffer b = new StringBuffer();

        while ((ch = is.read()) != -1) {
            b.append((char) ch);

        }

        String s = b.toString();

        Log.i("Response", s);
        dos.close();
    } catch (MalformedURLException ex) {
        Log.e(TAG, "URL error: " + ex.getMessage(), ex);
    }

    catch (IOException ioe) {
        Log.e(TAG, "IO error: " + ioe.getMessage(), ioe);
    }
}

@Override
public void run() {
    // TODO Auto-generated method stub
}
 } 
```

以上类可用于发送图片文件或任何其他文件和一个任何字符串。
要在上面使用：

```
HttpPictureUpload uploadPicture=new HttpPictureUpload("http://serverurl.com/webservice.php", "tux.png", "my name is john");
uploadPicture.SendPictureNow(); 
```

# android - Android Facebook SDK 3.0 登录错误 - 发生错误。请稍后再试

> ID：14512902
> 
> 赞同：3
> 
> 时间：2013-01-24T23:41:18.843
> 
> 标签：android, facebook-login, facebook-android-sdk

我按照本教程[https://developers.facebook.com/docs/howtos/androidsdk/3.0/native-login/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/native-login/) 进行登录过程。它正在运行 facebook 本机应用程序，但没有本机应用程序，首先它显示一个错误，然后我单击确定，然后再次单击登录按钮，它正在工作。我不明白为什么第一次不起作用？

![安卓脸书登录错误](../Images/c99bfbec735dfb488e09d4b4116d2249.png)

我不明白有什么问题？是虫子吗？

更新：这是代码。

```
 btnFacebook.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            Session session = Session.getActiveSession();

            if (!session.isOpened() && !session.isClosed()) {
                session.openForRead(new Session.OpenRequest(
                        UserLoginActivity.this).setPermissions(
                        Arrays.asList("basic_info", "email")).setCallback(
                        statusCallback));
            } 
            else {
                Session.openActiveSession(UserLoginActivity.this, true,
                        statusCallback);
            }
        }
    });

        private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state,
            Exception exception) {
        if (session.isOpened()) {
            final String token = session.getAccessToken();
            Request.executeMeRequestAsync(session,
                    new Request.GraphUserCallback() {
                        @Override
                        public void onCompleted(GraphUser user,
                                Response response) {
                            if (user != null) { 
                                new AsyncFaceLogin(UserLoginActivity.this)
                                .execute(user.getId(),user.getFirstName(),user.getLastName(),(String)user.getProperty("email"),token);
                            }
                        }
                    });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:54:40.837

在您的 Facebook Developers 应用仪表板页面上，确保沙盒模式已禁用。此外，您可能需要确保在代码中正确设置了您的 App ID 和 API 密钥。

# c# - Jquery Ajax 导致奇怪的行为。需要建议

> ID：14512911
> 
> 赞同：0
> 
> 时间：2013-01-24T23:42:18.107
> 
> 标签：c#, jquery, ajax, wcf

我对我的 WCF 服务进行了 ajax 调用，该服务将所有点击记录到服务器中。我的与我的服务通信的 jquery 代码如下

```
function recordClick(message)
{

     var a =  $.ajax({
            type: "GET",
            url: "http://10.4.201.39:8011/MyService.svc/AddTimeStampToFile" ,
            data: {videoName: message},
            dataType: "json",
            success: serviceSuccess,
            error: errorMessage
     });
     alert(a); ????? // If I delete this line My service always return Error

 }

 function serviceSuccess(data) {
     alert("Click Recorded");  
 }
 function errorMessage () {
     alert("Click Recording Error");
 } 
```

现在，当我删除该行时，我不确定我是否遗漏了什么，或者有很多程序员有类似的经验

```
alert (a); 
```

在我的 recordClick 函数中，它总是抛出错误。这告诉我，我将对结果做一些事情，在这种情况下我不想做任何事情。

如果这可能有帮助：我的 AddTimeStamp WCF 服务返回一个我主要用于测试目的的 int。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:47:13.357

您错误地调用了单击事件，请改用：

```
$('#linkName').click(function() {
  var a =  $.ajax({
         type: "GET",
         url: "http://10.4.201.39:8011/MyService.svc/AddTimeStampToFile" ,
         data: {videoName: message},
         dataType: "json",
         success: serviceSuccess,
         error: errorMessage
  });
  alert(a); ????? // If I delete this line My service always return Error

 });

function serviceSuccess(data) {
  alert("Click Recorded");    
 }  

 function errorMessage () {
  alert("Click Recording Error");  
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:54:04.983

尝试将您的`recordClick`功能更改为：

```
function recordClick(message) {
    $('#linkName').click(); //fire the click event handler for #linkName
    $.ajax({
        "type": "GET",
        "url": "http://10.4.201.39:8011/MyService.svc/AddTimeStampToFile" ,
        "data": {
            "videoName": message
        },
        "dataType": "json",
        "success": function (data, textStatus, jqXHR) {
            alert(data);
        },
        "error": function (jqXHR, textStatus, errorThrown) {
            alert(textStatus + ':' + errorThrown);
        }
    });
} 
```

你得到什么错误？

# regex - 正则表达式：用它的长度替换匹配的模式

> ID：14512912
> 
> 赞同：3
> 
> 时间：2013-01-24T23:42:28.433
> 
> 标签：regex, r

假设我有一个这样的字符串：

```
> x <- c("16^TG40") 
```

我试图`c(16 2 40)`在`2`. `length(^TG)-1`例如，我可以通过以下方式找到这种模式：

```
> gsub("(\\^[ACGT]+)", " \\1 ", x)
[1] "16 ^TG 40" 
```

但是，我无法`length-1`直接用它替换这个字符串。有没有更简单的方法用长度替换匹配的模式？

经过相当多的搜索（这里是 SO 和 google 搜索），我最终得到了`stringr`包，我认为这很棒。但是，这一切都归结为找到该模式的位置（使用`str_locate_all`），然后用任何想要的值替换子字符串（使用`str_sub`）。我有超过 100,000 个字符串，这非常耗时（因为该模式也可能在字符串中出现多次）。

我目前正在并行运行以补偿速度缓慢，但我很高兴知道这是否可能直接（或快速）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T23:54:43.183

**(1) gsubfn**该`gsubfn`语句将 ^... 部分替换为由空格包围的长度，并`strapply`从该字符串中提取数字并将它们转换为数字。省略`strapply`if 字符输出就足够了。

```
> library(gsubfn)
> xx <- gsubfn("\\^[ACGT]*", ~ sprintf(" %s ", nchar(x) - 1), x)
> strapply(xx, "\\d+", as.numeric)
[[1]]
[1] 16  2 40 
```

**(2) 循环通过一组长度**

这假设每个 ACGT 序列中的字符数介于 mn 和 mx 之间，并且它只是使用 gsub 在循环中进行替换 ACGT 序列 i long 为 i 。如果只有几个可能的长度，则只有少数迭代，所以它会很快，但如果字符串可能有许多不同的长度，它会很慢，因为需要更多的循环迭代。下面我们假设 ACGT 序列的长度为 2、4 或 6，但这些可能需要调整。该解决方案的一个可能缺点是需要假设一组可能的序列长度。

```
x <- "4^CG5^CAGT656"

mn <- 2
mx <- 6
y <- x
for(i in seq(mn, mx, 2)) {
   pat <- sprintf("\\^[ACGT]{%d}(\\d)", i)
   replacement <- sprintf(" %d \\1", i)
   y <- gsub(pat, replacement, y)
} 
```

**(3) 循环遍历 ACGT 序列**

这个循环遍历 ACGT 序列，用它的长度替换一个，直到一个都没有。如果有少量的 ACGT 序列，它可能会很快，因为会发生很少的迭代，但如果有很多 ACGT 序列，由于迭代次数较多，它会很慢。

```
x <- "4^CG5^CAGT656"
y <- x
while(regexpr("^", y, fixed = TRUE) > 0) {
    y <- sprintf("%s %d %s", sub("\\^.*", "", y),
        nchar(sub("^[0-9 ]+\\^([ACGT]+).*", "\\1", y)),
        sub("^[0-9 ]+\\^[ACGT]+", "", y))
} 
```

**基准**

这是一个基准。请注意，在上面的一些解决方案中，我将字符串转换为数字（这当然需要额外的时间），但为了使基准具有可比性，我比较了在没有任何数字转换的情况下创建字符串的速度。

```
x <- "4^CGT5^CCA656"
library(rbenchmark)
benchmark(order = "relative", replications = 10000,
   columns = c("test", "replications", "relative", "elapsed"),
   regmatch = {
      pat <- "(\\^[ACGT]+)"
      x2 <- x
      m <- gregexpr(pat, x2)
      regmatches(x2, m) <- sapply(regmatches(x2, m), modFun)
      x2
   },
   gsubfn = gsubfn("\\^[ACGT]*", ~ sprintf(" %s ", length(x) - 1), x),
   loop.on.len = {
    mn <- 2
    mx <- 6
    y <- x
    for(i in seq(mn, mx, 2)) {
       pat <- sprintf("\\^[ACGT]{%d}(\\d)", i)
       replacement <- sprintf(" %d \\1", i)
       y <- gsub(pat, replacement, y)
    }
   },
   loop.on.seq = {
    y <- x
    while(regexpr("^", y, fixed = TRUE) > 0) {
        y <- sprintf("%s %d %s", sub("\\^.*", "", y),
            nchar(sub("^[0-9 ]+\\^([ACGT]+).*", "\\1", y)),
            sub("^[0-9 ]+\\^[ACGT]+", "", y))
    }
  }
) 
```

结果如下所示。这两个循环解决方案在所示输入上是最快的，但它们的性能会根据需要多少次迭代而有所不同，因此实际数据可能会有所不同。loop.on.len 解决方案的缺点是 ACGT 长度必须在假设集合中。来自 Josh 的 regmatch 解决方案不涉及循环，而且速度很快。gsubfn 解决方案的优点是它只有一行代码并且特别直接。

```
 test replications relative elapsed
4 loop.on.seq        10000    1.000    1.93
3 loop.on.len        10000    1.140    2.20
1    regmatch        10000    1.803    3.48
2      gsubfn        10000    7.145   13.79 
```

**更新** 添加了两个循环解决方案，并删除了之前帖子中不处理多个 ACGT 序列的解决方案（基于澄清问题的评论）。还重新进行了基准测试，仅包括处理多个 ACGT 序列的解决方案。

**更新**删除了一个不适用于多个 ^... 序列的解决方案。它以前已从基准测试中删除，但代码尚未删除。改进了（1）中的解释。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-24T23:56:57.850

这是一个base-R方法。

语法远非直观，但通过密切关注此模板，您可以执行所有方式的操作和匹配子字符串的替换。（请参阅`?gregexpr`一些更复杂的示例。）

```
x2 <- x <- c("16^TG40", "16^TGCT40", "16^TG40^GATTACA40")

pat <- "(\\^[ACGT]+)"              ## A pattern matching substrings of interest
modFun <- function(ss) {           ## A function to modify them
    paste0(" ", nchar(ss) - 1, " ")
}

## Use regmatches() <- regmatches(gregexpr()) to search, modify, and replace.
m <- gregexpr(pat, x2)
regmatches(x2, m) <- sapply(regmatches(x2, m), modFun)
x2
## [1] "16 2 40"      "16 4 40"      "16 2 40 7 40" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T00:02:14.987

我投票支持令人难以置信的巧妙`gsubfn`答案，但因为我已经有了这个笨重的代码：

```
mod <- gsub("(\\^[ACGT]+)", " \\1 ", x)
locs <- gregexpr(" ", mod , fixed=TRUE)[[1]]
paste( substr( x, 1, locs[1]-1), 
       diff(locs)-2, 
       substr(mod, locs[2]+1, nchar(mod) ) , sep=" ")
#[1] "16 2 40" 
```

# internet-explorer - window.open 没有打开正确的 url 文件

> ID：14512913
> 
> 赞同：0
> 
> 时间：2013-01-24T23:42:31.053
> 
> 标签：internet-explorer

我有这个产品信息页面，当用户选择此选项时，我有自定义尺寸选项，会打开一个新的弹出窗口。这个弹出窗口在 Firefox 中打开得很好，但在使用 IE 时没有加载正确的文件。在 Firefox 中打开的文件是[http://www.gagatrendsonline.com/custom_size.php](http://www.gagatrendsonline.com/custom_size.php)但是当点击 IE 中的相同链接时，它会打开[http://www.gagatrendsonline.com/product/custom_size.php](http://www.gagatrendsonline.com/product/custom_size.php)这是错误的 URL . 请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:45:44.460

设置 URL 时，在 url 字符串的开头放置一个斜杠“/”... 示例：

```
window.open('/custom_size.php'); 
```

这样，您将强制 url 转到根目录。

# asp.net - 多窗格网页

> ID：14512914
> 
> 赞同：0
> 
> 时间：2013-01-24T23:42:43.680
> 
> 标签：asp.net, iframe, webforms, frameset, multiview

制作多窗格网页的最佳做法是什么？

例如，我有一个这样划分的网页：

![在此处输入图像描述](../Images/930909b69061e91b1d637751692035c6.png)

此页面适用于一个非常旧的内部应用程序，我正在对其进行非常需要的改造。它是使用早已被弃用的框架集完成的。我的问题是用类似的分离感觉重新设计它的最佳方法是什么？请记住，左侧的“菜单栏”基本上是静态的，而右侧的主视口是所有内容的加载位置。

我想出的选项是：

1.  ASP.NET MultiView（x2，一个用于侧边栏，一个用于主要内容）
2.  iframe（x4，每个视图一个）

我确定我错过了其他选择。考虑到功能要求，这种布局的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:47:02.043

我会使用母版页并为每个面板使用单独的 web 控件。

如果您在最左侧面板中的内容没有改变，那么母版页应该没问题，而且可能也很容易。

我在下面为您粗略地制作了一个示例，因为我可能不是最擅长仅用文字解释事物的人。

在示例中，我使用了 7 个项目，如下所示。

核心部分 1\. MasterPage 2\. QuickLinks（您最上面的面板在左侧，带有 a...b...c.. 等） 3\. LeftNavMain（您在左侧的中间面板也带有 a...b... c...等） 4\. SearchPanel（您的底部面板在左侧返回搜索/搜索）

内容

1.  默认主页）
2.  Page_A（在这种情况下为“A”索引的通用内容页面
3.  搜索（搜索页面）

希望当您单击链接时，实际页面应该能更好地解释您会明白我的意思。

# 母版

```
<%@ Master Language="VB" %>
<%@ Register src="QuickLinksPanel.ascx" tagname="QuickLinksPanel" tagprefix="uc1" %>
<%@ Register src="LeftNavMain.ascx" tagname="LeftNavMain" tagprefix="uc2" %>
<%@ Register src="SearchPanel.ascx" tagname="SearchPanel" tagprefix="uc3" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<script runat="server">
  'Server side code here
</script>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
  <title></title>
  <asp:ContentPlaceHolder id="head" runat="server">
  </asp:ContentPlaceHolder>
    <style type="text/css">
      .QuickLinks
      {
        font-family: Tahoma,;
        font-size: 12pt;
        text-align: center;
        vertical-align: middle;
      }
    .MainItemsOrLinks
    {
        font-family: Tahoma,;
        font-size: 14pt;
        text-align: left;
        vertical-align: middle;
        padding-left: 8px;
    }
  </style>
</head>
<body>
  <form id="form1" runat="server">
    <div style="text-align: center; vertical-align: middle; height: 100%; width: 100%;">
      <table style="width: 100%; height: 100%; border-collapse: collapse; border-style: none;">
        <tr>
          <td style="width: 30%; text-align: left; vertical-align: top; height: 15%;">
            <uc1:QuickLinksPanel ID="QuickLinksPanel1" runat="server" />
          </td>
          <td style="width: 70%; padding: 24px; height: 80%; text-align: left; vertical-align: top; border-left-style: solid; border-left-width: 8px; border-left-color: #CCCCCC;" rowspan="3">
            <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">
            </asp:ContentPlaceHolder>
          </td>
        </tr><tr>
          <td style="width: 30%; text-align: left; vertical-align: top; margin-left: 40px; border-top-style: solid; border-bottom-style: solid; border-top-width: 8px; border-bottom-width: 8px; border-top-color: #CCCCCC; border-bottom-color: #CCCCCC;">
            <uc2:LeftNavMain ID="LeftNavMain1" runat="server" />
          </td>
        </tr><tr>
          <td style="width: 30%; text-align: left; vertical-align: top; height: 5%;">
            <uc3:SearchPanel ID="SearchPanel1" runat="server" />
          </td>
        </tr>
      </table>
    </div>
  </form>
</body>
</html> 
```

# 快速链接（左上角

```
<%@ Control Language="VB" ClassName="QuickLinksPanel" %>
<script runat="server">
'Server side code here
</script>
<table style="width: 100%;">
  <tr>
    <td class="QuickLinks"><a href="Page_A.aspx">A</a></td>
    <td class="QuickLinks">B</td>
<td class="QuickLinks">C</td>
<td class="QuickLinks">D</td>
<td class="QuickLinks">E</td>
<td class="QuickLinks">F</td>
<td class="QuickLinks">G</td>
<td class="QuickLinks">H</td>
<td class="QuickLinks">I</td>
<td class="QuickLinks">J</td>
<td class="QuickLinks">K</td>
  </tr><tr>
    <td class="QuickLinks">L</td>
    <td class="QuickLinks">M</td>
    <td class="QuickLinks">N</td>
    <td class="QuickLinks">O</td>
    <td class="QuickLinks">P</td>
    <td class="QuickLinks">Q</td>
    <td class="QuickLinks">R</td>
    <td class="QuickLinks">S</td>
    <td class="QuickLinks">T</td>
    <td class="QuickLinks">U</td>
    <td class="QuickLinks">V</td>
  </tr><tr>
    <td class="QuickLinks">W</td>
    <td class="QuickLinks">X</td>
    <td class="QuickLinks">Y</td>
    <td class="QuickLinks">Z</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table> 
```

# 搜索面板（左下）

```
<%@ Control Language="VB" ClassName="SearchPanel" %>
<script runat="server">
'Server side code here
</script>
<p><a href="search.aspx">Return To Search Page</a></p> 
```

# LEFTNAV（左中）

```
<%@ Control Language="VB" ClassName="LeftNavMain" %>
<script runat="server">
'Server side code here
</script>
<table style="width: 100%;">
  <tr>
    <td class="MainItemsOrLinks"><a href="page_a.aspx">A Something</a></td>
  </tr><tr>
    <td class="MainItemsOrLinks">B Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">C Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">D Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">E Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">F Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">G Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">H Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">I Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">J Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">K Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">L Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">M Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">N Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">O Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">P Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">Q Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">R Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">S Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">T Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">U Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">V Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">W Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">X Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">Y Something</td>
  </tr><tr>
    <td class="MainItemsOrLinks">Z Something</td>
  </tr>
</table> 
```

# 默认页面（主页内容）

```
<%@ Page Title="" Language="VB" MasterPageFile="~/MasterPage.master" %>
<script runat="server">
'Server side code here
</script>
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
  <h1>Home</h1>
</asp:Content> 
```

# SEARCH PAGE（搜索页面内容）

```
<%@ Page Title="" Language="VB" MasterPageFile="~/MasterPage.master" %>
<script runat="server">
'Server side code here
</script>
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
  <h1>Search</h1>
</asp:Content> 
```

# PAGE_A PAGE（通用页面内容）

```
<%@ Page Title="" Language="VB" MasterPageFile="~/MasterPage.master" %>
<script runat="server">
'Server side code here
</script>
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
  <h1>Page_A</h1>
</asp:Content> 
```

嗯，就是这样，希望这能更好地解释我无法用语言解释的东西。

# javascript - Ajax 后重新绑定 Menu Js

> ID：14512917
> 
> 赞同：0
> 
> 时间：2013-01-24T23:42:53.747
> 
> 标签：javascript, jquery, ajax

我正在构建一个在线 URL 拍卖工具。下面是用户输入购买网址后的结果页面。当调用此结果页面时，正在创建其他 2 个结果页面，但是它们需要一段时间，所以我要做的是设置菜单栏以读取两个按钮上的“正在加载”，并将 href 设置为 #。然后我使用 setInterval 每 2 秒轮询一次，检查是否已创建第二个文件。一旦完成，成功回调将按钮重新加载到活动的 href 并将它们标记为 ['Find Out Whois' 和 'Appraisal'] 而不是 'Loading'。

**问题：**如何重新绑定菜单栏 js，使其在 ajax 调用后工作？我正在阅读关于这个确切主题的 SO，但未能使用[.live](https://stackoverflow.com/questions/2722921/loading-javascripts-in-ajax-callbacks?rq=1) [()](https://stackoverflow.com/questions/8594408/jquery-reload-javascript-file-after-an-ajax-request)、[.on()](https://stackoverflow.com/questions/10380005/reload-document-readyfunction-after-ajax-page-is-reloaded)、 [display()](https://stackoverflow.com/questions/392658/jquery-ajax-calling-javascript-function)等等……

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>Domain Auctions R US</title>
        <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen"/>
        <style>
            body{
                background-repeat:no-repeat;
                background-color:#fff;
            }

            span.reference{
                position:fixed;
                left:10px;
                bottom:10px;
                font-size:12px;
            }
            span.reference a{
                color:#aaa;
                text-transform:uppercase;
                text-decoration:none;
                text-shadow:1px 1px 1px #000;
                margin-right:30px;
            }
            span.reference a:hover{
                color:#ddd;
            }
            ul.sdt_menu{
                margin-left:auto;
                margin-right:auto;
                margin-top:0px;
            }

        </style>
    </head>
<body>
<br/><br/><br/><br/>
        <div class="content" id="content">
            <ul id="sdt_menu" class="sdt_menu">
                <li>
                    <a href="#"><!-- When the other two results pages are ready, this needs to be a real link -->
                        <img src="../images/googleMap.jpg" alt=""/>
                        <span class="sdt_active"></span>
                        <span class="sdt_wrap">
                            <span class="sdt_link">Loading</span>
                            <span class="sdt_descr">Page not yet available</span>
                        </span>
                    </a>
                </li>
                <li>
                    <a href="worth.html">
                        <img src="../images/pawnShop.jpg" alt=""/>
                        <span class="sdt_active"></span>
                        <span class="sdt_wrap">
                            <span class="sdt_link">Loading</span>
                            <span class="sdt_descr">Page not yet available</span>
                        </span>
                    </a>
                </li>   
            </ul>
        </div>

        <h1>The URL you are searching for is currenly TAKEN.</h1>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="../js/jquery.easing.1.3.js"></script>
        <script type="text/javascript">
            $(function() {
                $('#sdt_menu > li').bind('mouseenter',function(){ //LINE SWITCH 1
                    var $elem = $(this);
                    $elem.find('img')
                         .stop(true)
                         .animate({
                            'width':'170px',
                            'height':'170px',
                            'left':'0px'
                         },400,'easeOutBack')
                         .andSelf()
                         .find('.sdt_wrap')
                         .stop(true)
                         .animate({'top':'140px'},500,'easeOutBack')
                         .andSelf()
                         .find('.sdt_active')
                         .stop(true)
                         .animate({'height':'170px'},300,function(){
                        var $sub_menu = $elem.find('.sdt_box');
                        if($sub_menu.length){
                            var left = '170px';
                            if($elem.parent().children().length == $elem.index()+1)
                                left = '-170px';
                            $sub_menu.show().animate({'left':left},200);
                        }   
                    });
                }).bind('mouseleave',function(){ //LINE SWITCH 2
                    var $elem = $(this);
                    var $sub_menu = $elem.find('.sdt_box');
                    if($sub_menu.length)
                        $sub_menu.hide().css('left','0px');

                    $elem.find('.sdt_active')
                         .stop(true)
                         .animate({'height':'0px'},300)
                         .andSelf().find('img')
                         .stop(true)
                         .animate({
                            'width':'0px',
                            'height':'0px',
                            'left':'85px'},400)
                         .andSelf()
                         .find('.sdt_wrap')
                         .stop(true)
                         .animate({'top':'25px'},500);
                });
            });

                var myVar=setInterval(function(){ajax_request()},2000);
                  function ajax_request() {
                  $.ajax({
                  type: "GET",
                  url: "http://exampleServer/urlID/4b49d2/index.html",
                  dataType: "script",
                  success: function() {
                  $('#conn').load("ajax-loader.html");

                  clearInterval(myVar);
                  },
                  error: function() {
                    alert("error");
                  }
                });
                }
        </script>

</body>
</html> 
```

**ajax-loader.html**

```
<ul id="sdt_menu" class="sdt_menu">
                <li>
                    <a href="../map.html">
                        <img src="../images/googleMap.jpg" alt=""/>
                        <span class="sdt_active"></span>
                        <span class="sdt_wrap">
                            <span class="sdt_link">Find out Whois</span>
                            <span class="sdt_descr">Map of Who Owns Domain</span>
                        </span>
                    </a>
                </li>
                <li>
                    <a href="worth.html">
                        <img src="../images/pawnShop.jpg" alt=""/>
                        <span class="sdt_active"></span>
                        <span class="sdt_wrap">
                            <span class="sdt_link">Appraisal</span>
                            <span class="sdt_descr">Real Time Value of Domain</span>
                        </span>
                    </a>
                </li>   
            </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:55:47.763

这应该很简单，使用`.on()`而不是`.bind()`：

```
$('#content')
    .on('mouseenter', '.sdt_menu > li', function() {
    })
    .on('mouseleave', '.sdt_menu > li', function() {
    }) 
```

请注意，`.bind()`and`.on()`的工作方式不同，简单的重命名不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:49:42.150

您可以使用委托将事件绑定到所有当前和未来的元素：

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

# php - 为什么从 Json 对象插入数据不起作用？

> ID：14512918
> 
> 赞同：0
> 
> 时间：2013-01-24T23:42:56.697
> 
> 标签：php, mysql, json, object, pdo

我不知道为什么在我的表中插入值不能使用 foreach 遍历 Json 对象。当我看到表时，字段是空的。

**Json 对象（来自 jquery.ajax）**

```
[{"marca":"Cisco","producto":"UCS","subproducto":"Nexus"},"marca":"Citrix","producto":"Networking","subproducto":"Netscaler"}] 
```

**打印_r（$数据）**

```
Array
(
[0] => Array
    (
        [marca] => Cisco
        [producto] => UCS
        [subproducto] => Nexus
    )

[1] => Array
    (
        [marca] => Citrix
        [producto] => Networking
        [subproducto] => Netscaler
    )

) 
```

**PHP代码**

```
$data = json_decode($this->dataNewPoliza['alcances'], true);

$marca;
$producto;
$subproducto;

$sqlAlc = "INSERT INTO t_poliza_alcanceproductos VALUES (:idp,:m,:p,:s)";
$resultAlc = $this->dbConnect->prepare($sqlAlc) or die ($sqlAlc);

foreach ($data as $key => $value) {
    foreach ($value as $mps => $valuemps) {
            if($mps == 'marca') {
            $marca = $valuemps;
        }

        if($mps == 'producto') {
            $producto = $valuemps;
        }

        if($mps == 'subproducto') {
            $subproducto = $valuemps;
        }
    }

    $resultAlc->bindValue(':idp',$id_poliza,PDO::PARAM_INT);
    $resultAlc->bindValue(':m',$marca,PDO::PARAM_INT);
    $resultAlc->bindValue(':p',$producto,PDO::PARAM_INT);
    $resultAlc->bindValue(':s',$subproducto,PDO::PARAM_INT);

    if(!$resultAlc->execute()) {
        return false;
    } else {
        return true;
    }
} 
```

希望能得到一些帮助。

**解决了**

问题是我不能在 foreach 中返回 false 或 true ，正如@zerkms 所说，我不需要嵌套循环，这是最终结果：

```
$data = json_decode($this->dataNewPoliza['alcances'], true);

$sqlAlc = "INSERT INTO t_poliza_alcanceproductos VALUES (:idp,:m,:p,:s)";

$resultAlc = $this->dbConnect->prepare($sqlAlc) or die ($sqlAlc);

foreach ($data as $key => $value) {
    $resultAlc->bindValue(':idp',$id_poliza,PDO::PARAM_INT);
    $resultAlc->bindValue(':m',$value['marca'],PDO::PARAM_INT);
    $resultAlc->bindValue(':p',$value['producto'],PDO::PARAM_INT);
    $resultAlc->bindValue(':s',$value['subproducto'],PDO::PARAM_INT);

    $resultAlc->execute();
}

return true; 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:05:30.903

PDOStatement::bindValue 数据类型错误，$marca、$product、$subproducto 是字符串而不是整数。

```
$resultAlc->bindValue(':m',$marca,PDO::PARAM_STR); 
```

也许你应该看看[PDOStatement::bindValue](http://php.net/manual/en/pdostatement.bindvalue.php)

# r - 我无法使用 R 创建 PDF 输出。只有空页面。(Linux)

> ID：14512922
> 
> 赞同：3
> 
> 时间：2013-01-24T23:43:06.213
> 
> 标签：r, pdf, plot, output

如果我想将图表绘制为 pdf，它不起作用。我只得到一个空的pdf页面。这是一个小例子。

```
> pdf("try.pdf")
> plot(x=c(1,2,4,2,5))
> dev.off() 
```

我还尝试了 print() 命令。但没有运气：

```
> print(plot(x=c(1,2,4,2,5)))
NULL            # <- is this an error? 
```

我的操作系统是 Ubuntu 12.10 64 位。我的 R 版本是 2.15.2。

其他输出格式正在工作（例如 jpeg()、png()）。这是我第一次在 Ubuntu 中使用 pdf 输出（我之前在 Win 上工作过没有问题）。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:47:49.210

我的电脑重新启动解决了这个问题。但我不能说为什么它昨天没有工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T09:57:25.927

老问题，但我刚才遇到了同样的问题，我很困惑。

就我而言，结果表明 /tmp 目录已满。删除不需要的 tmp 文件后，一切恢复正常。我遇到的其他问题：调用任何函数的帮助（例如“help（mean）”）只返回空页面。

# css - 使用 :after 伪元素在 IE8 中加载 PNG 24 位透明度

> ID：14512927
> 
> 赞同：1
> 
> 时间：2013-01-24T23:43:57.470
> 
> 标签：css, internet-explorer-8, pseudo-element

我的同事写了一些 CSS 来在图像上放置一个带有透明背景的小 PNG 箭头。但是，他将其应用于锚标记的 :after 伪元素。

这适用于除 IE8 之外的所有现代浏览器。他声称这在 IE8 中有效，但我们都无法弄清楚为什么这不再有效。

HTML

```
<html>
<head>
<title>IE8 PNG transparency test with :after</title>
</head>
<body>
<div id="channel-feat-lists" class="feat-lists feat-stories is-invisible mod with-border">
<h4>TOP 3 STORIES</h4>
<ul class="tout-stack">
<li id="c1" class="tout">
   <div class="tout-image size-160x165"><a href="#" class="video-link"><img src="http://img4.realsimple.com/images/home-organizing/decorating/0812/boy-tunnel-fort-ictcrop_160.jpg"
              alt="#"
              width="160"
              height="165" /></a></div>
   <h6><a href="#" class="has-number"><span class="tout-title-number">7 </span><span class="tout-title-remainder">Ideas for Kids' Forts</span></a></h6>
   <div class="tout-dek">Want to create a fortress mighty enough to withstand any big bad wolf's huffs and puffs? Get inspired by these seven creations.</div>
   <div class="tout-jump"><a class="jump">SEE MORE FUN VIDEOS</a></div>
</li>
<li id="c2" class="tout">
   <div class="tout-image size-160x165"><a href="#"><img src="http://img4.realsimple.com/images/home-organizing/decorating/0812/boy-tunnel-fort-ictcrop_160.jpg"
              alt="#"
              width="160"
              height="165" /></a></div>
   <h6><a href="#" class="has-number"><span class="tout-title-number">8 </span><span class="tout-title-remainder">Ideas for Kids' Forts</span></a></h6>
   <div class="tout-dek">Want to create a fortress mighty enough to withstand any big bad wolf's huffs and puffs? Get inspired by these seven creations.</div>
   <div class="tout-jump"><a class="jump" href="#">SEE MORE FUN VIDEOS</a></div>
</li>
<li id="c3" class="tout">
   <div class="tout-image size-160x165"><a href="#"><img src="http://img4.realsimple.com/images/home-organizing/decorating/0812/boy-tunnel-fort-ictcrop_160.jpg"
              alt="#"
              width="160"
              height="165" /></a></div>
   <h6 class="has-no-number"><a href="#">Example numberless title</a></h6>
   <div class="tout-dek">Want to create a fortress mighty enough to withstand any big bad wolf's huffs and puffs? Get inspired by these seven creations.</div>
   <div class="tout-jump"><a class="jump" href="#">SEE MORE FUN VIDEOS</a></div>
</li>
<li id="c4" class="tout">
   <div class="tout-image size-160x165"><a href="#"><img src="http://img4.realsimple.com/images/home-organizing/decorating/0812/boy-tunnel-fort-ictcrop_160.jpg"
              alt="#"
              width="160"
              height="165" /></a></div>
   <h6><a href="#" class="has-number"><span class="tout-title-number">8 </span><span class="tout-title-remainder">Ideas for Kids' Forts</span></a></h6>
   <div class="tout-dek">Want to create a fortress mighty enough to withstand any big bad wolf's huffs and puffs? Get inspired by these seven creations.</div>
   <div class="tout-jump"><a class="jump" href="#">SEE MORE FUN VIDEOS</a></div>
</li>
</ul>
</div>
</body>
</html> 
```

CSS

```
.feat-lists .tout { min-height: 165px; margin-top: 14px; }
.feat-lists .tout + .tout { border-top: 1px dotted #7f7f7f; padding-top: 14px; }  
.feat-lists .tout-image { float: left; margin-left: 7px; }
.feat-lists .tout-image a { display: block; position: relative; }
.feat-lists .video-link:after { background: transparent url('http://img4.realsimple.com/static/i/play-overlay.png') 0 0; content: ''; height: 24px; left: 70px; position: absolute; top: 70px; width: 19px; }
.feat-lists h6 { margin-left: 181px; }
.feat-lists h6 a { color: #333333; font: normal 1.8em Georgia, sans-serif; }
.feat-lists h6 a.has-number:hover { text-decoration: none; }
.feat-lists h6 a.has-number:hover .tout-title-remainder { text-decoration: underline; }
.feat-lists .tout-title-number { color: #999999; display: block; font: normal 2.777em Georgia, sans-serif; margin-bottom: -4px; position: relative; top: -6px; } /* 2.777 x 1.8 = 5 = 50px */
.feat-lists .tout-dek { color: #666666; font: normal 1.3em Georgia, sans-serif; margin: 5px 0px 5px 181px; }
.feat-lists .tout-jump { margin-left: 181px; }
.feat-lists h6.has-no-number { padding: 2.5em 0 0 0; } 
```

这是 JSFiddle 版本：http: [//jsfiddle.net/tangst/gByMb/](http://jsfiddle.net/tangst/gByMb/)

第一个图像应该具有该叠加层。

我[在 IE8 的 PNG 透明度问题中](https://stackoverflow.com/questions/1251416/png-transparency-problems-in-ie8)尝试了一些解决方案，但它们不起作用。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:48:26.367

问题不是 PNG，而是 IE8 对 :after/:before 伪元素的支持。

在这里查看支持的浏览器列表： http: [//css-tricks.com/browser-support-pseudo-elements/](http://css-tricks.com/browser-support-pseudo-elements/)

显然 IE8 有“部分支持”：

“不尊重 z-index，必须使用 doctype，如果使用 :hover:after/:hover:before 则必须声明 :hover 状态”

# ruby - Ruby 中的时代差异

> ID：14512928
> 
> 赞同：1
> 
> 时间：2013-01-24T23:44:05.637
> 
> 标签：ruby, activesupport

我试图找出当前时区内两次之间的差异。我试图弄清楚是否要在两次之间拨打支持电话号码。即，我正在使用`active_support`宝石，我想做类似的事情

*   `t`= 当前时间
*   `o`= 根据当前日期的开放时间（上午 9 点）
*   `c`= 根据当前日期的关闭时间 (5PM)
*   `call_open`= 我们开门了吗？

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:47:26.243

我相信你能做到

`call_open = t.between?(o, c)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:48:53.353

```
t = Time.zone.now
o = Time.zone.today + 8.hours
c = Time.zone.today + 17.hours
call_open = t <= c && t >= o 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T00:12:53.100

您可以使用 Time 来创建范围，这样可以轻松测试包含性：

```
t1 = Time.now
sleep 1
t2 = Time.now
sleep 1
t3 = Time.now

(t1.to_i .. t3.to_i) === t2.to_i # => true
(t1.to_f .. t3.to_f) === t2.to_f # => true
(t1.to_f .. t2.to_f) === t3.to_f # => false 
```

您可以使用解析来弄清楚：

```
starttime = Time.parse('2013/01/24 9AM')                               # => 2013-01-24 09:00:00 -0700
endtime = Time.parse('2013/01/24 5PM')                                 # => 2013-01-24 17:00:00 -0700
(starttime.to_f .. endtime.to_f) === Time.parse('2013/01/24 3PM').to_f # => true 
```

而且您只能使用小时数，这使得它与日期无关：

```
(t1.hour .. t3.hour) === t2.hour # => true 
```

# asp.net-mvc - MVC.ApiExplorer 未发现的有效路由

> ID：14512934
> 
> 赞同：9
> 
> 时间：2013-01-24T23:44:43.540
> 
> 标签：asp.net-mvc, asp.net-web-api, asp.net-mvc-routing, asp.net-mvc-apiexplorer

使用**ASP.NET Web API 帮助页面**和相关的**MVC.ApiExplorer 时**，我有可通过 http 访问但 ApiExplorer 未发现的有效路由。只有在使用通用路由规则时才能找到这些路由。使用更具体的规则（与一般规则一起）似乎隐藏了 ApiExplorer 的路线。

在三个规则的示例情况下，两条路由与控制器方法上的 GET 和 POST 操作相关，它们不采用查询参数进入 MIA。

```
public class SomeControllerController : ApiController
{
    [HttpPost] public HttpResponseMessage Post(PostObject value) { ... }
    [HttpGet] public IEnumerable<DisplayObject> GetAll() { ... }
    [HttpGet] public DisplayObject GetById(string id) { ... }
} 
```

使用路由规则时

```
routes.MapHttpRoute(
    name: "ApiDefault",
    routeTemplate: "api/{controller}/{id}",
    defaults: new
              {
                  id = RouteParameter.Optional
              }
    ); 
```

路由由 Api Explorer 适当地发现为

*   发布：api/SomeController
*   获取：api/SomeController
*   获取：api/SomeController/{id}

然而，当添加不太通用且更有意义的规则时

```
routes.MapHttpRoute(
    name: "ApiSomeControllerDefault",
    routeTemplate: "api/somecontroller/{id}",
    defaults: new
              {
                controller = "SomeController",
                id = RouteParameter.Optional
              }
    );

routes.MapHttpRoute(
    name: "ApiDefault",
    routeTemplate: "api/{controller}/{id}",
    defaults: new
              {
                  id = RouteParameter.Optional
              }
    ); 
```

Api Explorer 只返回

*   获取：api/somecontroller/{id}

是什么导致我的某些路线找不到？

**编辑** [ApiExplorer 项目页面上问题报告的链接](https://bitbucket.org/millionbonus/mvc.apiexplorer/issue/11/valid-routes-not-discovered-by-apiexplorer)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T19:28:05.813

虽然 ASP.NET Web API 团队没有修复这个错误，但我正在使用我自己的愚蠢修复。

我的扩展方法与类`IApiExplorer`中的原始`ApiDescriptions`实现执行相同的操作`ApiExplorer`，但不是删除不同路由的重复操作，而是返回具有不同 ID 的操作（HTTP 方法 + 路由）。所以它返回所有声明的动作，不管路由计数。

而且，是的，它无耻地使用反射来调用私有方法。

```
public static class WebApiExtensions
{
    public static Collection<ApiDescription> GetAllApiDescriptions(this IApiExplorer apiExplorer, HttpConfiguration httpConfig)
    {
        if (!(apiExplorer is ApiExplorer))
        {
            return apiExplorer.ApiDescriptions;
        }

        IList<ApiDescription> apiDescriptions = new Collection<ApiDescription>();
        var controllerSelector = httpConfig.Services.GetHttpControllerSelector();
        var controllerMappings = controllerSelector.GetControllerMapping();

        if (controllerMappings != null)
        {
            foreach (var route in httpConfig.Routes)
            {
                typeof(ApiExplorer).GetMethod("ExploreRouteControllers",
                    bindingAttr: BindingFlags.Instance | BindingFlags.NonPublic,
                    binder: null,
                    types: new[] {typeof(IDictionary<string, HttpControllerDescriptor>), typeof(IHttpRoute), typeof(Collection<ApiDescription>)},
                    modifiers: null
                ).Invoke(apiExplorer, new object[] {controllerMappings, route, apiDescriptions});
            }

            apiDescriptions = apiDescriptions
                .GroupBy(api => api.ID.ToLower())
                .Select(g => g.First())
                .ToList();
        }

        return new Collection<ApiDescription>(apiDescriptions);
    }
} 
```

它易于使用：

```
var apiDescriptions = apiExplorer.GetAllApiDescriptions(httpConfig); 
```

`HttpConfiguration`为可测试性添加的参数。如果你不关心它，删除参数，`GlobalConfiguration.HttpConfiguration`直接在扩展方法中使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T01:51:24.133

我相信您所看到的是 ApiExplorer 的一个已知错误。发生的事情是 ApiExplorer 遍历路由集合中的*每个*路由并检查控制器及其操作是否可以解决。

在这种情况下，例如，操作“GetById”可以通过上述两种路由进行探索，ApiExplorer 错误地认为由于不明确的匹配而导致冲突，并尝试过滤掉重复的操作，在这种情况下导致所有要过滤/删除的操作。由于这个错误在 ApiExplorer（它是主要 WebAPI 核心的一部分）中，恐怕我们不能很快修复它。

# java - 在java中模拟私有方法下的外部调用

> ID：14512935
> 
> 赞同：1
> 
> 时间：2013-01-24T23:44:46.727
> 
> 标签：java, mocking, powermock, private-methods

我想测试`ClassToTest`该类的方法`methodToTest`。但是我无法使它成为`anotherMethod`被调用的私有方法与单例类使用其公共方法`methodToTest`返回的值有一些依赖关系。`SingletonClass``getName`

我尝试使用 powermock 的 privateMethod 模拟和静态方法模拟等等，但没有帮助。
有没有人有这种情况的解决方案？

```
Class ClassToTest{
    public void methodToTest(){
        ...
        anotherMethod();
        ...
    }

    private void anotherMethod(){
        SingletonClass singletonObj = SingletonClass.getInstance();
        String name = singletonObj.getName();
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:12:27.203

使用`mockStatic`（见[http://code.google.com/p/powermock/wiki/MockitoUsage13#Mocking_Static_Method](http://code.google.com/p/powermock/wiki/MockitoUsage13#Mocking_Static_Method)）

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({SingletonClass.class})
public class ClassToTestTest {
    @Test
    public void testMethodToTest() {
        SingletonClass mockInstance = PowerMockito.mock(SingletonClass.class);
        PowerMockito.mockStatic(SingletonClass.class);
        PowerMockito.when(SingletonClass.getInstance()).thenReturn(mockInstance);
        PowerMockito.when(mockInstance.getName()).thenReturn("MOCK NAME");

        //...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:29:17.507

You should be able to use a partial mock to deal with this situation. It sounds like you want to create an instance of the object, but you just want to see if the object calls the anotherMethod() method without actually doing any of the logic in the other method. If I'm understanding correctly, the following should accomplish your goal.

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({ClassToTest.class})
public class ClassToTestTest {
    @Test
    public void testMethodToTest() {
        ClassToTest mockInstance = 
                   PowerMock.createPartialMock(SingletonClass.class,"anotherMethod");
        PowerMock.expectPrivate(mockInstance, "anotherMethod");
        PowerMock.replay(mockInstance);
        mockInstance.methodToTest();
        PowerMock.verify(mockInstance);
    }
} 
```

# python - 使用 Python 3.3 编译

> ID：14512936
> 
> 赞同：2
> 
> 时间：2013-01-24T23:44:48.850
> 
> 标签：python, command-line, cx-freeze

首先让我说我最近才开始编程。我不知道如何使用 cx_freeze 脚本。我不知道如何让“python”这个词在命令行中工作。我只是在寻找有关如何将 .py 文件制作成无需 Python 即可工作的 .exe 文件的完整和详细说明。我对 cx_freeze 没有运气，而且似乎没有其他东西适用于 3.3。谁能告诉我从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:50:43.067

不幸的是，据我所知，cx_freeze 是唯一的方法。

也许您只是在使用 cx_freeze 时运气不佳。在 .bat 文件中试试这个。

```
@echo off
<python path>\python <python path>\scripts\cxfreeze <script .py file>
exit 
```

Python 路径很可能是 C:\python33。

# c# - 如何将像素数组转换为 dds

> ID：14512937
> 
> 赞同：2
> 
> 时间：2013-01-24T23:45:01.543
> 
> 标签：c#, xna, sharpdx

我有一个像素数组（WriteableBitmap.Pixels），我需要将它保存为 DDS 图像。

有人对如何做到这一点有任何建议吗？我看过 Humus 图像转换器以及 DevIL，但我只是不知道......

我觉得应该有一些内置的东西来做到这一点。

我正在使用 c#/SharpDX/可能是 XNA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T04:01:25.457

SharpDX.Toolkit.Image.Save 实际上是提供 DDS 保存。将像素从 WriteableBimap.Pixels 移动到 Image.Pixels 应该不是问题。

Image.Save 唯一没有提供的是格式转换。例如，您不能保存压缩格式（来自 DXGI 的 BCm 格式）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:59:05.393

如果您将像素数据存储在缓冲区中，您可以获取 DDS 文件格式参考并自己写出数据。

[http://msdn.microsoft.com/en-us/library/bb943991.aspx](http://msdn.microsoft.com/en-us/library/bb943991.aspx)

# android - 尝试从 SQLite 读取时出现 NullPointerException 错误

> ID：14512944
> 
> 赞同：0
> 
> 时间：2013-01-24T23:45:19.413
> 
> 标签：android, database, sqlite

我从教程中找到了这个源代码，但是当我运行它时它崩溃了。

我的日志猫：

```
01-25 00:26:30.898: E/AndroidRuntime(2762): FATAL EXCEPTION: main
01-25 00:26:30.898: E/AndroidRuntime(2762): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pinchtapzoom/com.pinchtapzoom.AssignmentTracker}: java.lang.NullPointerException
01-25 00:26:30.898: E/AndroidRuntime(2762):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at android.os.Looper.loop(Looper.java:137)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at android.app.ActivityThread.main(ActivityThread.java:4441)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at java.lang.reflect.Method.invokeNative(Native Method)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at java.lang.reflect.Method.invoke(Method.java:511)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at dalvik.system.NativeStart.main(Native Method)
01-25 00:26:30.898: E/AndroidRuntime(2762): Caused by: java.lang.NullPointerException
01-25 00:26:30.898: E/AndroidRuntime(2762):     at com.pinchtapzoom.AssignmentTracker.onCreate(AssignmentTracker.java:70)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at android.app.Activity.performCreate(Activity.java:4465)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-25 00:26:30.898: E/AndroidRuntime(2762):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-25 00:26:30.898: E/AndroidRuntime(2762):     ... 11 more 
```

这是代码开始崩溃的地方：

`//---retrieves all the records---`

 ````
public Cursor getAllRecords() 
{
    db = DBHelper.getWritableDatabase();
     Cursor mCursor = db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
            KEY_DUEDATE, KEY_COURSE, KEY_NOTES}, null, null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
````  `和

`//---get all Records---`

 ````
 db.open();
    Cursor c = db.getAllRecords();
    startManagingCursor(c);
    if (c.moveToFirst())
    {
        do {          
            DisplayRecord(c);
        } while (c.moveToNext());
    }
    db.close(); 
````  `这是 AssignmentTracker.java 的代码：

```
<code> 

package com.pinchtapzoom;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.Toast;

public class AssignmentTracker extends Activity {

        /** Called when the activity is first created. */
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.main);

            Button addBtn = (Button)findViewById(R.id.add);
            addBtn.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent i = new Intent(AssignmentTracker.this, addassignment.class);
                    startActivity(i);
                }
            });

            try {           
                String destPath = "/data/data/" + getPackageName() + "/databases/AssignmentDB.db";
                File f = new File(destPath);            
                if (!f.exists()) {          
                    CopyDB( getBaseContext().getAssets().open("mydb"), 
                        new FileOutputStream(destPath));
                }
            } catch (FileNotFoundException e) {         
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            DBAdapter db = new DBAdapter(this); 
            //---add an assignment---

            db.open();        
            long id = db.insertRecord("Hello World", "2/18/2012", "DPR 224", "First Android Project");        
            id = db.insertRecord("Workbook Exercises", "3/1/2012", "MAT 100", "Do odd numbers");
            db.close();

            //---get all Records---

            db.open();
            Cursor c = db.getAllRecords();
            startManagingCursor(c);
            if (c.moveToFirst())
            {
                do {          
                    DisplayRecord(c);
                } while (c.moveToNext());
            }
            db.close();
            /*

            //---get a Record---
            db.open();
            Cursor c = db.getRecord(2);
            if (c.moveToFirst())        
                DisplayRecord(c);
            else
                Toast.makeText(this, "No Assignments found", Toast.LENGTH_LONG).show();
            db.close();
            */

            //---update Record---
            /*
            db.open();
            if (db.updateRecord(1, "Hello Android", "2/19/2012", "DPR 224", "First Android Project"))
                Toast.makeText(this, "Update successful.", Toast.LENGTH_LONG).show();
            else
                Toast.makeText(this, "Update failed.", Toast.LENGTH_LONG).show();        
            db.close();
            */

            /*
            //---delete a Record---
            db.open();
            if (db.deleteRecord(1))
                Toast.makeText(this, "Delete successful.", Toast.LENGTH_LONG).show();
            else
                Toast.makeText(this, "Delete failed.", Toast.LENGTH_LONG).show();            
            db.close();
            */
        }

        private class DBAdapter extends BaseAdapter {
            private LayoutInflater mInflater;
            public DBAdapter(AssignmentTracker assignmentTracker) {
                // TODO Auto-generated constructor stub
            }

            public Cursor getAllRecords() {
                // TODO Auto-generated method stub
                return null;
            }

            public Cursor getAllRecords(int i, int j) {
                // TODO Auto-generated method stub
                return null;
            }

            //private ArrayList<>

            public void close() {
                // TODO Auto-generated method stub

            }

            public long insertRecord(String string, String string2, String string3,
                    String string4) {
                // TODO Auto-generated method stub
                return 0;
            }

            public void open() {
                // TODO Auto-generated method stub

            }

            @Override
            public int getCount() {

                return 0;
            }

            @Override
            public Object getItem(int arg0) {

                return null;
            }

            @Override
            public long getItemId(int arg0) {

                return 0;
            }

            @Override
            public View getView(int arg0, View arg1, ViewGroup arg2) {

                return null;
            }

        }

        public void CopyDB(InputStream inputStream, OutputStream outputStream) 
        throws IOException {
            //---copy 1K bytes at a time---
            byte[] buffer = new byte[1024];
            int length;
            while ((length = inputStream.read(buffer)) > 0) {
                outputStream.write(buffer, 0, length);
            }
            inputStream.close();
            outputStream.close();
        }

        public void DisplayRecord(Cursor c)
        {
            Toast.makeText(this, 
                    "id: " + c.getString(0) + "\n" +
                    "Title: " + c.getString(1) + "\n" +
                    "Due Date:  " + c.getString(2),
                    Toast.LENGTH_SHORT).show();        
        } 

        public void addAssignment(View view)
        {

            Intent i = new Intent("com.pinchtapzoom.addassignment");
            startActivity(i);
            Log.d("TAG", "Clicked");
        }

    } 
```

这是 DBAdapter.java 的代码：

```
package com.pinchtapzoom;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
    public static final String KEY_ROWID = "id";
    public static final String KEY_TITLE = "title";
    public static final String KEY_DUEDATE = "duedate";
    public static final String KEY_COURSE = "course";
    public static final String KEY_NOTES = "notes";
    private static final String TAG = "DBAdapter";

    private static final String DATABASE_NAME = "AssignmentsDB.db";
    private static final String DATABASE_TABLE = "assignments";
    private static final int DATABASE_VERSION = 2;

    private static final String DATABASE_CREATE =
        "create table if not exists assignments (id integer primary key autoincrement, "
        + "title VARCHAR not null, duedate date, course VARCHAR, notes VARCHAR );";

    private final Context context;    

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx) 
    {

        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);

        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            try {
                db.execSQL(DATABASE_CREATE);    
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS contacts");
            onCreate(db);
        }
    }    

    //---opens the database---
    public DBAdapter open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---    
    public void close() 
    {
        DBHelper.close();
    }

    //---insert a record into the database---
    public long insertRecord(String title, String duedate, String course, String notes) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_TITLE, title);
        initialValues.put(KEY_DUEDATE, duedate);
        initialValues.put(KEY_COURSE, course);
        initialValues.put(KEY_NOTES, notes);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //---deletes a particular record---
    public boolean deleteContact(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    //---retrieves all the records---
    public Cursor getAllRecords() 
    {
        db = DBHelper.getWritableDatabase();
         Cursor mCursor = db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
                KEY_DUEDATE, KEY_COURSE, KEY_NOTES}, null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---retrieves a particular record---
    public Cursor getRecord(long rowId) throws SQLException 
    {
        Cursor mCursor =
                db.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
                KEY_TITLE, KEY_DUEDATE, KEY_COURSE, KEY_NOTES}, 
                KEY_ROWID + "=" + rowId, null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---updates a record---
    public boolean updateRecord(long rowId, String title, String duedate, String course, String notes) 
    {
        ContentValues args = new ContentValues();
        args.put(KEY_TITLE, title);
        args.put(KEY_DUEDATE, duedate);
        args.put(KEY_COURSE, course);
        args.put(KEY_NOTES, notes);
        return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
    }
} 
```

教程是：[这里](http://www.youtube.com/watch?v=j-IV87qQ00M)

当我取消注释代码时它停止工作。关于这个问题有很多问题，但没有明确的解决方案。我刚开始学习 SQLite，所以需要一些帮助来找到解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:02:36.147

The problem is that you have *two* classes named `DBAdapter` and you are using the wrong one...
Simply remove the entire DBAdapter class that starts with:

```
private class DBAdapter extends BaseAdapter { 
```

This `DBAdapter` inside AssignmentTracker does nothing anyway.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:52:50.517

logcat 会告诉你究竟是哪一行导致了异常，但它可能是

```
Cursor mCursor = db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
        KEY_DUEDATE, KEY_COURSE, KEY_NOTES}, null, null, null, null, null); 
```

因为您没有检查`getWritableDatabase()`返回的数据库并且不为空，或者

```
if (c.moveToFirst()) 
```

因为您没有检查`db.getAllRecords();`返回的游标而不是空值。``

# sql - 慢查询 - 旋转导致问题

> ID：14512945
> 
> 赞同：0
> 
> 时间：2013-01-24T23:45:23.863
> 
> 标签：sql, oracle11g, aggregate

我有一个大约需要 4 分钟才能运行的查询，并且确实需要对此进行改进。我基本上是将数据旋转到列中。知道如何改进此查询吗？我主要加入索引。导致问题的是聚合

有没有更好的方法来像这样旋转数据？

```
SELECT
    SKU.SKUIDX,
    CTYPE_STYLE.ARRCZIDX ARRCZ,
    MAX(IMPCOST.PURRATE) AS PURRATE,
    MAX(IMPCOST.PURCURR) AS PURCURR,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Purchase Cost' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS PURCHASE_COST,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Trim Fee' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS TRIM_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Hanger Fee' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS HANGER_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Duty Rate' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS DUTY_RATE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Duty Fees' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS DUTY_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Freight Fee' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS FREIGHT_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Agent Rate' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS AGENT_RATE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Agent Fees' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS AGENT_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Clearance Rate' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS CLEARANCE_RATE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Clearance Fee' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS CLEARANCE_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Finance Rate' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS FINANCE_RATE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Finance Fee' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS FINANCE_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Fabric Testing Rate' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS FABRIC_TESTING_RATE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Fabric Testing Fee' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS FABRIC_TESTING_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'PickPack Fee' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS PICK_PACK_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Local Processing Fee' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS LOCAL_PROCESSING_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Rework Fee' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS REWORK_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Wastage Rate' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS WASTAGE_RATE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Wastage Fee' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS WASTAGE_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Total Landed Cost' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS TOTAL_LANDED_COST,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Wholesale Price' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS WHOLESALE_PRICE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'First Margin%' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS FIRST_MARGIN,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Royalty Rate' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS ROYALTY_RATE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Royalty Fee' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS ROYALTY_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Second Margin%' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS SECOND_MARGIN,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'CODB %' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS CODB_RATE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'CODB' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS CODB_FEE,
    MAX(CASE WHEN COSTFORM.DESCRIP = 'Third Margin%' THEN CTYPE_COSTSHT.COST ELSE NULL END) AS THIRD_MARGIN
  FROM
    AP21.SKU
  INNER JOIN
    AP21.IMPCOST_CLR ON
    IMPCOST_CLR.CLRIDX = SKU.CLRIDX
  INNER JOIN
    AP21.CLR ON
    CLR.CLRIDX = IMPCOST_CLR.CLRIDX
  INNER JOIN
    AP21.IMPCOST ON
    IMPCOST.ICIDX = IMPCOST_CLR.ICIDX
  INNER JOIN
    AP21.CTYPE_STYLE ON
    CTYPE_STYLE.STYLEIDX = CLR.STYLEIDX
    AND CTYPE_STYLE.CSIDX = IMPCOST.BSCSIDX
    AND CTYPE_STYLE.ACTIVE = 1
  INNER JOIN
    AP21.CTYPE_COSTSHT ON
    CTYPE_COSTSHT.CSIDX = CTYPE_STYLE.CSIDX
    AND CTYPE_COSTSHT.SKUIDX = SKU.SKUIDX
  INNER JOIN
    AP21.COSTLABL ON
    COSTLABL.COSTIDX = CTYPE_STYLE.COSTIDX
    AND COSTLABL.LABNUM = CTYPE_COSTSHT.LABNUM
  INNER JOIN
    AP21.COSTFORM ON
    COSTFORM.COSTIDX = CTYPE_STYLE.COSTIDX
    AND COSTFORM.POS = COSTLABL.POS
  WHERE
    SKU.ACTIVE = 1
  GROUP BY
    SKU.SKUIDX,
    CTYPE_STYLE.ARRCZIDX,
    IMPCOST.PURRATE,
    IMPCOST.PURCURR 
```

我的解释计划：

```
PLAN_TABLE_OUTPUT                                                                                                                                                                                                                                                                                          
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Plan hash value: 2077781369                                                                                                                                                                                                                                                                                  

------------------------------------------------------------------------------------------------------                                                                                                                                                                                                       
| Id  | Operation                            | Name          | Rows  | Bytes | Cost (%CPU)| Time     |                                                                                                                                                                                                       
------------------------------------------------------------------------------------------------------                                                                                                                                                                                                       
|   0 | SELECT STATEMENT                     |               |     1 |   427 |    96   (4)| 00:00:02 |                                                                                                                                                                                                       
|   1 |  HASH GROUP BY                       |               |     1 |   427 |    96   (4)| 00:00:02 |                                                                                                                                                                                                       
|   2 |   NESTED LOOPS                       |               |       |       |            |          |                                                                                                                                                                                                       
|   3 |    NESTED LOOPS                      |               |     1 |   427 |    96   (4)| 00:00:02 |                                                                                                                                                                                                       
|   4 |     VIEW                             | VW_GBC_37     |     1 |   416 |    94   (4)| 00:00:02 |                                                                                                                                                                                                       
|   5 |      HASH GROUP BY                   |               |     1 |   107 |    94   (4)| 00:00:02 |                                                                                                                                                                                                       
|   6 |       NESTED LOOPS                   |               |       |       |            |          |                                                                                                                                                                                                       
|   7 |        NESTED LOOPS                  |               |     1 |   107 |    93   (3)| 00:00:02 |                                                                                                                                                                                                       
|   8 |         NESTED LOOPS                 |               |     1 |    85 |    90   (3)| 00:00:02 |                                                                                                                                                                                                       
|   9 |          NESTED LOOPS                |               |     1 |    69 |    86   (3)| 00:00:02 |                                                                                                                                                                                                       
|* 10 |           HASH JOIN                  |               |     1 |    55 |    84   (3)| 00:00:02 |                                                                                                                                                                                                       
|* 11 |            HASH JOIN                 |               |  1122 | 50490 |    27   (4)| 00:00:01 |                                                                                                                                                                                                       
|* 12 |             HASH JOIN                |               |  1122 | 28050 |     9  (12)| 00:00:01 |                                                                                                                                                                                                       
|  13 |              TABLE ACCESS FULL       | IMPCOST       |   776 | 12416 |     5   (0)| 00:00:01 |                                                                                                                                                                                                       
|  14 |              TABLE ACCESS FULL       | IMPCOST_CLR   |  1122 | 10098 |     3   (0)| 00:00:01 |                                                                                                                                                                                                       
|* 15 |             TABLE ACCESS FULL        | CTYPE_STYLE   |  8121 |   158K|    18   (0)| 00:00:01 |                                                                                                                                                                                                       
|  16 |            TABLE ACCESS FULL         | CLR           | 17469 |   170K|    56   (0)| 00:00:01 |                                                                                                                                                                                                       
|* 17 |           TABLE ACCESS BY INDEX ROWID| SKU           |     4 |    56 |     2   (0)| 00:00:01 |                                                                                                                                                                                                       
|* 18 |            INDEX RANGE SCAN          | SKU2IDX       |     4 |       |     1   (0)| 00:00:01 |                                                                                                                                                                                                       
|  19 |          TABLE ACCESS BY INDEX ROWID | CTYPE_COSTSHT |     1 |    16 |     4   (0)| 00:00:01 |                                                                                                                                                                                                       
|* 20 |           INDEX RANGE SCAN           | SYS_C006104   |     1 |       |     3   (0)| 00:00:01 |                                                                                                                                                                                                       
|* 21 |         INDEX RANGE SCAN             | CF1IDX        |    19 |       |     1   (0)| 00:00:01 |                                                                                                                                                                                                       
|  22 |        TABLE ACCESS BY INDEX ROWID   | COSTFORM      |     3 |    66 |     3   (0)| 00:00:01 |                                                                                                                                                                                                       
|* 23 |     INDEX RANGE SCAN                 | SYS_C006080   |     1 |       |     1   (0)| 00:00:01 |                                                                                                                                                                                                       
|* 24 |    TABLE ACCESS BY INDEX ROWID       | COSTLABL      |     1 |    11 |     2   (0)| 00:00:01 |                                                                                                                                                                                                       
------------------------------------------------------------------------------------------------------                                                                                                                                                                                                       

Predicate Information (identified by operation id):                                                                                                                                                                                                                                                          
---------------------------------------------------                                                                                                                                                                                                                                                          

10 - access("CLR"."CLRIDX"="IMPCOST_CLR"."CLRIDX" AND                                                                                                                                                                                                                                                        
"CTYPE_STYLE"."STYLEIDX"="CLR"."STYLEIDX")                                                                                                                                                                                                                                                                   
11 - access("CTYPE_STYLE"."CSIDX"="IMPCOST"."BSCSIDX")                                                                                                                                                                                                                                                       
12 - access("IMPCOST"."ICIDX"="IMPCOST_CLR"."ICIDX")                                                                                                                                                                                                                                                         
15 - filter("CTYPE_STYLE"."ACTIVE"=1)                                                                                                                                                                                                                                                                        
17 - filter("SKU"."ACTIVE"=1)                                                                                                                                                                                                                                                                                
18 - access("IMPCOST_CLR"."CLRIDX"="SKU"."CLRIDX")                                                                                                                                                                                                                                                           
20 - access("CTYPE_COSTSHT"."CSIDX"="CTYPE_STYLE"."CSIDX" AND                                                                                                                                                                                                                                                
"CTYPE_COSTSHT"."SKUIDX"="SKU"."SKUIDX")                                                                                                                                                                                                                                                                     
filter("CTYPE_COSTSHT"."SKUIDX"="SKU"."SKUIDX")                                                                                                                                                                                                                                                              
21 - access("COSTFORM"."COSTIDX"="CTYPE_STYLE"."COSTIDX")                                                                                                                                                                                                                                                    
23 - access("COSTLABL"."COSTIDX"="ITEM_2" AND "ITEM_3"="COSTLABL"."POS")                                                                                                                                                                                                                                     
filter("ITEM_3"="COSTLABL"."POS")                                                                                                                                                                                                                                                                            
24 - filter("COSTLABL"."LABNUM"="ITEM_1")                                                                                                                                                                                                                                                                    

 49 rows selected 
```

# actionscript-3 - 从播放 h.264 (mp4) 视频的视频显示器中捕获 bitmapData

> ID：14512956
> 
> 赞同：5
> 
> 时间：2013-01-24T23:46:16.873
> 
> 标签：actionscript-3, air

我有一个在 Android air 应用程序中播放的视频文件。我正在尝试使用 捕获帧`bitmapData.Draw(video)`，但它仅适用于 .flv 视频。

视频在本地播放 - 没有互联网或服务器。

一旦我将视频更改为 .mp4，它就会在舞台上播放，但在调用绘图函数后会有一个空白的 bitmapData。我没有说任何错误。

如何从播放的 .mp4 视频中捕获帧？

注意 - 这是一个 Video 组件，而不是一个`StageVideo`，因为我知道它是不可能的`StageVideo`.

网络流初始化。我还添加了`checkPolicyFile = true`- 它没有帮助。

```
my_nc.connect(null);
my_nc.client = this;

_ns = new NetStream(my_nc);
_ns.client = this;
_ns.useHardwareDecoder = true;
_ns.checkPolicyFile = true; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:22:42.920

UPD：似乎没有办法通过 ActionScript 在 android 设备上的位图中绘制 h.264 视频。我在移动 FlashPlayer 11.1 和 AIR 3.5 应用程序的 mp4 容器中使用[这个](https://dl.dropbox.com/u/77217007/stackoverflow/h264draw_test/big_buck_bunny_trailer_480p_high.mp4)h.264 编码的视频文件（它的[来源）测试了这个](http://ie.microsoft.com/testdrive/graphics/videoformatsupport/default.html)[演示](https://dl.dropbox.com/u/77217007/stackoverflow/h264draw_test/index.xhtml)（[源](https://dl.dropbox.com/u/77217007/stackoverflow/h264draw_test/videotest.as)），但它们都失败了。我在所有渲染模式（直接、cpu 和 gpu）中都有黑色矩形。

可能的解决方法是编写本机扩展制作屏幕截图（我找到[了这个](https://github.com/abhisek-mishra/ScreenShot)，但据报道可能会使您的应用程序崩溃，但来源可能会有所帮助）并通过已知矩形裁剪视频。这不是一个漂亮的解决方案，但我暂时看不到其他变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:30:09.613

我曾经遇到过类似的事情。你有没有试过把视频合成放在一个空的精灵中并从中绘图。即来自视频的父母，而不是直接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T11:13:26.097

试试[**这个链接**](http://gamespoweredby.com/blog/2014/11/netstream-playnull-bitmapdata-workaround/)中显示的概念。

它建议如何绘制视频像素的容器（一个*graphicsData*对象）。

```
myBitmap.bitmapData = GraphicsBitmapFill(vidContainer.graphics.readGraphicsData()[0]).bitmapData; 
```

# cocoa - NSTableViewCell 上的自定义背景图像

> ID：14512957
> 
> 赞同：2
> 
> 时间：2013-01-24T23:46:44.817
> 
> 标签：cocoa, nstableview

我有一个基于视图的表格视图，其中有一个自定义单元格，上面有一堆标签和一个图像。我想为每个单元格添加背景图像。首先，我尝试向单元格添加一个图像视图，但这掩盖了选择突出显示。然后我尝试设置 tableview 的背景，但是在调整视图大小时图像会移动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:01:38.013

感谢boyfarrell，我能够弄清楚。我按照他的建议做了，并将 NSTableRowView 子类化并`drawBackgroundInRect:`像这样添加了背景：

```
- (void)drawBackgroundInRect:(NSRect)dirtyRect
{    
    NSImage *backgroundImage = [NSImage imageNamed:@"plaincellbg.png"];
    [backgroundImage drawInRect:self.bounds fromRect:NSZeroRect operation:NSCompositeCopy fraction:1.0];
} 
```

调整窗口大小时，图像会填充单元格并拉伸。

# javascript - 在javascript中连接比较

> ID：14512958
> 
> 赞同：1
> 
> 时间：2013-01-24T23:46:47.287
> 
> 标签：javascript, comparison-operators

这更多是出于好奇，但是否可以在 javascript 中连接比较？

**例子：**

```
var foo = 'a',
    bar = 'b';
if (foo === ('a' || bar)) {
    console.log('yey');
} 
```

反对...

```
var foo = 'a',
    bar = 'b';
if (foo === 'a' || foo === bar)) {
    console.log('yey');
} 
```

* * *

PS：当您在多个条件下比较同一变量时，这可能非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:47:53.240

您可以使用[`Array.indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
if (["a", "b"].indexOf(foo) > -1) {
    console.log("yey");
} 
```

尽管某些旧浏览器不支持此方法，但请查看**MDN**中的兼容性问题——提供了一个简单的[shim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf#Compatibility)。

[@Pointy](https://stackoverflow.com/questions/14512958/concatenating-comparisons-in-javascript/#comment20232504_14512973)在评论中建议的另一种方法是检查对象中是否存在属性：

```
if (foo in {a: 1, b: 1}) {  // or {a: 1, b: 1}[foo]
    console.log("yey");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T23:47:51.080

有几种不同的方法可以做到这一点。我最喜欢的是将数组与[indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)结合使用。

```
if ( ['a', 'b'].indexOf(foo) > -1 ) {
    console.log('yey');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T23:50:38.857

[数组 indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)是一种解决方案

另一种选择是[switch 语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)

```
switch (foo) {
   case "a":
   case "b":
      console.log("bar");
      break;
   case "c":
      console.log("SEE");
      break;
   default:
      console.log("ELSE");
} 
```

其他解决方案也可以是对象查找或正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T23:52:21.557

通常我会为此使用正则表达式：

```
if (^/a|b$/i.test(foo)) {
  ...
} 
```

# cordova - 制作从网站读取页面的phonegap应用程序

> ID：14512959
> 
> 赞同：0
> 
> 时间：2013-01-24T23:46:51.860
> 
> 标签：cordova

我想创建一个“shell”phonegap 应用程序来显示来自另一个网站的内容。例如，我想从我们现有的 Intranet 中获取内容并将其显示在已部署的 phonegap 应用程序中。这可能吗？

（所以当用户点击页面上的链接时，它只是在 shell 内导航到下一页）。我想这就像在常规浏览器中使用 phonegap 作为 iframe。

这可能吗？（原因：我们有现有的 Intranet，需要通过 phonegap 应用程序访问）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:40:34.227

是的，这是可能的，只需在网站上进行 ajax 调用，然后将数据放入手机间隙应用程序的 html 元素中。

# css - Outlook 中的左对齐表格蒸发父 div 容器边框

> ID：14512960
> 
> 赞同：0
> 
> 时间：2013-01-24T23:46:55.493
> 
> 标签：css, html-table, html-email, outlook-2007

我正在尝试升级我的 HTML 电子邮件，以便每篇文章中的图像允许以下段落的文本环绕它。我读到最好在表格中包含这样的图像`align="left"`，而不是将该属性放在暴露的`img`元素上。

我已经让它适用于所有非 Outlook 电子邮件客户端，但是一旦将该`align="left"`属性添加到图像的表格容器中`div`，包含对齐表格和包装文本（单个`p`元素）的属性就会呈现为没有边框-**但仅在对齐的表格似乎与之相邻**的地方（左侧和上方缺少边框部分）。

这很奇怪。正如您在 Outlook 之前/之后看到的那样，`div`当表格未左对齐时，容器上的边框样式呈现良好。

我可以做些什么来阻止对齐的表格杀死容器 div 的边框样式？我希望避免将 HTML 扩展到更多表格或使用图像分隔符；如果不是因为这个晦涩的问题，我的`div`CSS 如您所见，它在 Outlook 中运行良好。

**例如，所需**内容的屏幕截图以及在 Apple Mail 中呈现的代码外观（添加黄色表格背景颜色以强调和表示`td`填充）：

![根据需要正确呈现代码](../Images/e198b7691ea66344d048dec48b241a60.png)

将属性添加到表**之前**的Outlook '07 ：`align="left"`

![左对齐前的 Outlook '07](../Images/7dc3670947d121c1448667c9769b3d4e.png)

将属性添加到表**后**的Outlook '07 ：`align="left"`

![左对齐后的 Outlook '07](../Images/91595822117a71f69de5dd1c2c079cde.png)

不用多说，**XHT​​ML 1.0 Strict 代码***：

```
<div class="content" style="border-left-width: 8px; border-left-style: solid; border-top: 1px dotted #bababa; padding-left: 17px; padding-bottom: 15px; padding-top:25px; border-left-color: #0c63b8;">
  <table bgcolor="yellow" width="160" cellpadding="0" cellspacing="0">
    <tr>
      <td width="160" style="padding-right: 20px; padding-bottom: 20px;">
        <a href="#"><img src="http://www.eastendhouse.org/sites/default/files/imagecache/eNews-small-160/images/news/IMG_1547.JPG" alt="" title="" width="160" height="120" border="0" style="vertical-align: bottom;" /></a>
      </td>
    </tr>
  </table>
  <p style="margin: 0; padding: 0; margin-bottom: 13px; margin-top: 0px !important;">Et quinta decima eodem modo, typi qui nunc nobis videntur parum clari fiant sollemnes in. Quam littera gothica quam nunc putamus parum claram anteposuerit litterarum formas humanitatis per seacula quarta decima. Tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim. Typi non habent claritatem insitam est, usus legentis in iis. Sit amet consectetuer adipiscing elit sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna. Claritatem Investigationes demonstraverunt lectores legere me lius quod ii legunt saepius! Eu feugiat nulla, facilisis at vero eros et accumsan et iusto odio. Praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi nam liber assum qui.</p>
</div> 
```

*- 此代码不包含`<h2>`元素上方的`div.content`元素，但如果有帮助，我可以稍后包含。*

* * *

## 扩展解决方案

在被@john 引导下将文本放入与左对齐图像相同的表格单元格中之后，我描述的包含的奇怪问题`div`消失了，并且文本正确包装：

![应用接受的答案代码后](../Images/84f3ea690567b5f4d769366a6d8bb036.png)

请注意，尽管新的包含表在右侧添加了奇数空间（表右侧虚线顶部边框下的白色列），但我无法使用此解决方案进行更正。

此外，由于接受的答案不包括图像周围的链接或`p`包含包装文本的标签，我遇到了一个问题，即在图像顶部和文本开头之间出现一个空行 - 任何包含的块元素包装的文本导致链接图像出现此问题：

![链接图像和段落的问题](../Images/29e0983ebf1b118838c00e37247c2542.png)

通过实验性地将图像本身嵌套在它自己的单单元格表中并将其对齐*到*左侧，我能够用一块石头杀死两只鸟（不幸的是，还有很多额外的 HTML）。我还将一些容器`div`填充/边框样式移动到新的包含`table`：

![工作，所需的布局和间距](../Images/5834d2865c7d787cec9247c9f0626297.png)

这阻止了包含表在副本右侧添加空间，并允许我使用图像的包含`td`填充样式（绿色）来为我提供图像周围所需的清晰空间。我承认在原始图像中而不是在 HTML 中添加空间是最干净的，但由于这是一个动态生成的电子邮件，它与它的父网站共享图像，在这种情况下这不是一个选项。

这是在@john 的帮助下**的最终工作代码：**

```
<div class="content" style="border-left-width: 8px; border-left-style:solid; padding-bottom: 15px; border-left-color: #0c63b8;">
  <table width="392" border="0" cellpadding="0" cellspacing="0" bgcolor="yellow" style="border-top: 1px dotted #bababa;">
    <tr>
      <td width="392" style="padding-top: 25px; padding-left: 17px;">
        <table align="left" cellpadding="0" cellspacing="0" border="0" bgcolor="green">  
          <tr>
            <td style="padding-right: 20px; padding-bottom: 10px;">
              <a href="#"><img style="margin: 0; border: 0; padding: 0; display: block;" align="left" src="http://www.eastendhouse.org/sites/default/files/imagecache/eNews-small-160/images/news/IMG_1547.JPG" alt="" title="" width="160" height="120" /></a>
            </td>
          </tr>
        </table>
        <p style="margin: 0; padding: 0; margin-bottom: 13px; margin-top: 0px !important;">Lorem ipsum dolor sit amet consectetuer Vestibulum felis tristique morbi eget. Vel leo felis id egestas Vestibulum Fusce lobortis enim netus rutrum. Urna Aliquam dis consequat neque orci leo pellentesque semper leo accumsan. Est lacus Vestibulum rutrum id libero dui consequat ligula interdum Maecenas. In molestie risus iaculis libero turpis faucibus ipsum tincidunt In enim. Consectetuer Donec at tellus mus Pellentesque wisi vitae Maecenas augue tellus. Integer.</p>
      </td>
    </tr>
  </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:51:33.400

也许您尝试添加边距：8px；归因于 TABLE 样式？

8px 只是一个例子，我应该认为 2px 一样好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:50:22.773

我将提供一个我知道可行的解决方案，而不是尝试调试：

```
<!-- Text Padding -->
                          <table width="580" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="005288">
                            <tr>
                              <td width="30">
                              </td>
                              <td width="520">
<!-- Floating Image -->
<img style="margin: 0; border: 0; padding: 0; display: block;" align="left" src="Images/.png" width="250" height="200"
alt="">

<font style="font-family: Helvetica, Arial, sans-serif; font-size: 14px; line-height: 18px; color: #FFFFFF;">
Lorem ipsum dolor sit amet consectetuer Vestibulum felis tristique morbi eget. Vel leo felis id egestas Vestibulum Fusce lobortis enim netus rutrum. Urna Aliquam dis consequat neque orci leo pellentesque semper leo accumsan. Est lacus Vestibulum rutrum id libero dui consequat ligula interdum Maecenas. In molestie risus iaculis libero turpis faucibus ipsum tincidunt In enim. Consectetuer Donec at tellus mus Pellentesque wisi vitae Maecenas augue tellus. Integer.
<br><br>
Sed id facilisis ipsum enim suscipit Aenean ut lacus euismod cursus. Fermentum Phasellus Ut et nec molestie Quisque enim Vestibulum quis a. Maecenas condimentum Phasellus Nam fringilla aliquet Phasellus malesuada Cum egestas quis. Nibh justo fames ac ante at dolor facilisi vel Nulla et. Laoreet ut laoreet Curabitur libero dictumst cursus Nunc vitae sem orci. Pellentesque convallis pretium wisi vel interdum morbi Pellentesque et.
<br><br>
Hendrerit quam dui sapien est auctor at ante pretium id interdum. Quis lacus habitant elit non felis Curabitur congue lacus dui Curabitur. Elit dui a ac risus iaculis risus justo condimentum Vestibulum habitasse. Curabitur sed neque tempus congue tortor rutrum Donec et vitae congue. Tellus ipsum mi semper netus egestas Sed laoreet netus Proin elit. Ac sed Morbi.
</font>

                              <td width="30">
                              </td>
                            </tr>
                          </table> 
```

您可以在图像上使用 padding-right 和 padding-bottom，但为简单起见，在我的示例中，我在 png 图像中放置了一个透明的“填充”。

# php - 使用 PHP Codeigniter 访问 Google Contact API

> ID：14512961
> 
> 赞同：1
> 
> 时间：2013-01-24T23:46:56.633
> 
> 标签：php, codeigniter, google-contacts-api

是否有任何关于使用 CodeIgniter 框架访问 Google Contact API 的帖子/教程？
我用谷歌搜索了很多，发现只有一篇使用`Zend`带有 Codeigniter 的库的帖子。
经历了一些联系 API 的 PHP 实现。但他们都在使用`Curl`与 API 对话。
我可以使用与 Codeigniter 模型类相同的方式吗？还是我应该考虑使用 javascript 访问 gmail 联系人？

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:11:55.393

我将 oauth 库用于 codeigniter [http://getsparks.org/packages/oauth2/versions/HEAD/show](http://getsparks.org/packages/oauth2/versions/HEAD/show)

在 spark->oauth->libries->provider->google 中设置范围

```
public function __construct(array $options = array()) {
    // Now make sure we have the default scope to get user data
    empty($options['scope']) and $options['scope'] = array(
        'https://www.googleapis.com/auth/userinfo.profile',
        'https://www.googleapis.com/auth/userinfo.email',
        'https://www.google.com/m8/feeds',
    ); 
```

在同一文件中添加以下代码

```
public function curl_file_get_contents($email, OAuth2_Token_Access $token) {
    $url = "https://www.google.com/m8/feeds/contacts/$email/full?max-results=" . 25 . "&oauth_token=" . $token->access_token;
    $curl = curl_init();
    $userAgent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322)';
    curl_setopt($curl, CURLOPT_URL, $url); //The URL to fetch. This can also be set when initializing a session with curl_init().
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE); //TRUE to return the transfer as a string of the return value of curl_exec() instead of outputting it out directly.
    curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 5); //The number of seconds to wait while trying to connect. 

    curl_setopt($curl, CURLOPT_USERAGENT, $userAgent); //The contents of the "User-Agent: " header to be used in a HTTP request.
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, TRUE); //To follow any "Location: " header that the server sends as part of the HTTP header.
    curl_setopt($curl, CURLOPT_AUTOREFERER, TRUE); //To automatically set the Referer: field in requests where it follows a Location: redirect.
    curl_setopt($curl, CURLOPT_TIMEOUT, 10); //The maximum number of seconds to allow cURL functions to execute.
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0); //To stop cURL from verifying the peer's certificate.
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);

    $contents = curl_exec($curl);
    curl_close($curl);

    return $contents;
} 
```

然后将此代码用于控制器中的google contant

```
public function google() {
        $this->load->helper('url_helper');
        $this->load->spark('oauth2');
        $provider = $this->oauth2->provider('google', array(
            'id' => GOOGLE_APP_ID,
            'secret' => GOOGLE_APP_SECRET,
                ));

        if (!$this->input->get('code')) {
            // By sending no options it'll come back here
            $provider->authorize();
        } else {
            // Howzit?
            try {
                $token = $provider->access($_GET['code']);

                $user = $provider->get_user_info($token);
                $email = $user['email'];

                $xmlresponse = $provider->curl_file_get_contents($email, $token);
                if ((strlen(stristr($xmlresponse, 'Authorization required')) > 0) && (strlen(stristr($xmlresponse, 'Error ')) > 0)) {
                    echo "<h2>OOPS !! Something went wrong. Please try reloading the page.</h2>";
                    exit();
                }
                $xml = new SimpleXMLElement($xmlresponse);
                $xml->registerXPathNamespace('gd', 'http://schemas.google.com/g/2005');
                $result = $xml->xpath('//gd:email');
                $this->data['email_address'] = $result;
print_r($result);exit;
            } catch (OAuth2_Exception $e) {
                show_error('That didnt work: ' . $e);
            }
        }

    } 
```

# c++ - 在 C++ 中使用 DirectShow 解码带有 H.264 流的 MP4 视频

> ID：14512963
> 
> 赞同：3
> 
> 时间：2013-01-24T23:47:01.520
> 
> 标签：c++, directshow, h.264, mp4

我有一个包含单个 H.264 流且没有音频流的 MP4 视频。我想使用 DirectShow 和 C++ 来解码视频，但我在设置 DirectShow 过滤器时遇到了麻烦，希望有人能提供帮助？

这是我使用 DirectShow 解码 WMV3 流的设置代码，我运行良好：

```
hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, IID_IGraphBuilder, (void**)&m_pGraph);

if (SUCCEEDED(hr))      hr = CoCreateInstance(CLSID_VideoMixingRenderer9, NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter, (void**)&m_pFilter);
if (SUCCEEDED(hr))      hr = m_pFilter->QueryInterface(IID_IVMRFilterConfig9, reinterpret_cast<void**>(&filterConfig));
if (SUCCEEDED(hr))      hr = filterConfig->SetRenderingMode( VMR9Mode_Renderless );
if (SUCCEEDED(hr))      hr = filterConfig->SetNumberOfStreams(2);
if (SUCCEEDED(hr))      hr = SetAllocatorPresenter( m_pFilter, g_pMainWindow );
if (SUCCEEDED(hr))      hr = m_pGraph->AddFilter(m_pFilter, L"Video Mixing Renderer 9");
if (SUCCEEDED(hr))      hr = m_pGraph->QueryInterface(IID_IMediaControl, reinterpret_cast<void**>(&m_pMediaControl));
if (SUCCEEDED(hr))      hr = m_pGraph->QueryInterface(IID_IBasicAudio, reinterpret_cast<void**>(&m_pBasicAudio));
if (SUCCEEDED(hr))      hr = m_pGraph->RenderFile( lpFilename, NULL ); 
```

但是，我无法弄清楚解码 MP4 的正确设置。我已经安装了在其他帖子中发现的 3ivx 和 ffdshow，现在 GraphEdit 可以打开我的文件并显示正确的图表（想 - 我在 64 位机器上，当我运行 GraphEdit 的 64 位版本时，这个 DOESN '行不通，但 32 位的可以......这可能与它有关吗？）。VLC 可以很好地播放我的视频。

我已经在整个互联网上搜索特定于此的示例，但找不到任何示例。

我的视频文件格式如下（ffmpeg 输出）：

```
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: mp42mp41
    creation_time   : 2013-01-16 19:14:52
  Duration: 00:05:25.62, start: 0.033367, bitrate: 3396 kb/s
    Stream #0:0(eng): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 3393 kb/s, 29.97 fps, 29.97 tbr, 30k tbn, 59.94 tbc
    Metadata:
      creation_time   : 2013-01-16 19:14:52
      handler_name    : ?Mainconcept Video Media Handler 
```

任何帮助将不胜感激！

问候，格雷厄姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:56:49.280

Windows 中没有标准/默认 MP4 解复用器，因此您必须安装一个扩展 DirectShow 以覆盖 MP4。

*   您需要安装适当位数的解复用器（32 位与 64 位）以匹配您的代码/应用程序（或 GraphEdit）的位数
*   VLC 无关紧要，因为它内置了自己的解复用器
*   您还需要 H.264 解码器，而且您似乎已经有了一个

您的代码是正确的，但是这种图形构建方法不太可行。首先，您需要查看是否收到任何有用的错误代码（您可能正在`RenderFile`通话中）。

如果 GraphEdit Win32 在这个系统上工作，所有必需的组件（过滤器）都应该可用。不同之处在于 GraphEdit 不会按照您的方式构建图形。相反，它使用`IGraphBuilder::AddSourceFilter`给定文件添加起始过滤器，然后呈现其引脚。如果您采用相同的方法，并在最后一步添加您的 VMR 过滤器以进行视频演示，那么效果会很好。

# ruby-on-rails - 如何覆盖 rails route helpers 中的方法（PUT vs GET）？

> ID：14512975
> 
> 赞同：0
> 
> 时间：2013-01-24T23:48:18.287
> 
> 标签：ruby-on-rails, nested-resources

所以我用范围路由和form_for遇到了这个问题：[form_for和范围，rails 3](https://stackoverflow.com/questions/3741979/form-for-and-scopes-rails-3)

我的问题更糟，因为我不只是想限定所有方法，我希望所有方法都在“/admin”下，除了 GET/show。

所以我的 routes.rb 有这样的东西：

```
scope '/admin' do
  resources 'lessons', except: [:show]
end
get "lessons/:id" => "lessons#show", :as => "lesson" 
```

运行 rake routes 实际上确实显示了我想要的，其中两个版本的课程路径仅在方法上有所不同，PUT 与 GET。因此，其他人提供的解决方案在您执行以下操作时提供：

```
url = @lesson.persisted? ? lesson_path(@lesson) :  lessons_path
form_for @lesson, url: url do 
```

对我不起作用，因为 course_path(@lesson) 将始终返回没有 /admin 前缀的 GET 路径，这仍然会破坏我的表单。

所以我想不通的是，我可以在 rails path helper 中指定方法，以便它使用以 /admin 开头的路由吗？还是有完全不同的方法来解决这个问题？我知道我可以通过更改来消除歧义并消除歧义：

```
get "lessons/:id" => "lessons#show", :as => "lesson" 
```

至

```
get "lessons/:id" => "lessons#show", :as => "show_lesson" 
```

但在这一点上，我只是想知道这是否可能，如果是的话，什么是“正确”的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:02:47.433

我认为您正在寻找这种语法：

```
<%= form_for [:admin, @lesson] do |f| %>
  # form goes here
<% end %> 
```

这将构建一个名为`admin_lesson_path`if `@lesson`is`persisted?`或`admin_lessons_path`if it's not 的多态路由助手。助手将`admin_lesson_path`传递`@lesson`对象，因此路线将类似于`admin/lessons/1`. `admin_lessons_path`会产生`/admin/lessons`. 然后表单将知道是否使用`POST`或`PUT`取决于记录是否保留。

您可以像这样在您的路由文件中定义路由助手：

```
 namespace :admin do
   resources :lessons
 end 
```

通过命名这个控制器，它有几个优点。其中之一是您可以将所有管理员内容放在单个命名空间后面，然后使该命名空间中的所有内容都从基本控制器继承：

```
 module Admin
   class LessonsController < BaseController 

   end
 end 
```

然后将包含用于限制用户是否可以在该控制器中执行操作`BaseController`的逻辑（作为 a ）。`before_filter`

通过将您所有的管理员内容放在这些命名空间控制器中，您可以将所有管理员操作保存在一个位置，并将所有面向用户的操作保存在另一个位置。如果您听说过“关注点分离”，那么这是一个很好的例子。

# regex - 雅虎管道正则表达式 Youtube 链接

> ID：14512980
> 
> 赞同：0
> 
> 时间：2013-01-24T23:49:02.713
> 
> 标签：regex, youtube, pipe

我有一个在我的管道中导入 youtube 视频链接的提要，但是 youtube 链接自然会以各种格式显示......

```
http://youtube.com/onmdclU47Us
http://youtu.be/onmdclU47Us
http://www.youtube.com/watch?feature=player_detailpage&amp;v=onmdclU47Us 
```

以及带有 url 参数的各种其他变体。我正在尝试解析每个链接并获取视频的嵌入链接。这基本上是使用正则表达式函数并将其换成 youtube.com/embed/{video_ID} 。

然而，这并不适用于所有情况......这就是我所拥有的，有什么帮助吗？

```
.+watch\?v=([0-9a-zA-Z-]+)

&amp;([a-zA-Z0-9_-]+)?=([a-zA-Z0-9_-]+)?.([a-zA-Z0-9_-]+)?

.watch?feature=player_embedded&v=([0-9a-zA-Z-]+)

http://youtu.be/([0-9a-zA-Z-]+) 
```

这些是对的，还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:25:15.497

**上一个答案已删除**

我刚刚花了一个多小时查看 SO 上的*许多*“提取 YouTube ID”帖子。我想我已经想出了一个几乎防弹的正则表达式来提取与我发现的完全不同的 id。它也适用于拇指 URL。

首先需要注意的是：

1.  该 URL 被假定为有效的 youtube 之一。
2.  其实，就是这样。没有另一个。

然后是这样：

`(?:/favicon|%3D|[/=])([\w-]{11})[^\w-]`

而已。很简单。看看 - 没有环顾四周。

**笔记：**

1.  ID 在捕获组 1 中返回。
2.  将正则表达式添加到前面以实际检测 youtube url 应该不会太难。

# c++ - C++ - 接受多个客户端

> ID：14512981
> 
> 赞同：0
> 
> 时间：2013-01-24T23:49:22.667
> 
> 标签：c++, multithreading, sockets, winsock

我真的很难接受多个客户端进入 Socket 服务器。目前，允许一个客户端。当下一个客户端尝试加入时，应用程序冻结并且什么都不做。

过去一周我对此进行了大量研究，但似乎没有什么能让我满意。我看过关于多线程的教程，但我没有得到足够的关于函数的信息来实际使用它（是的，我是一个非常直观的学习者，这不是编程的最佳选择）。

所以我只是想知道我是否可以得到一个关于如何做到这一点的体面到很好的解释。如果可能的话，甚至可以在那里举一个例子。

我也看到了这个`select()`函数，我也没有得到足够的信息。

尽管我确实有一个正在运行且工作的服务器，但多线程真的开始让我头疼，我对这种情况及其工作方式感到非常困惑。

所以如果能给我一个解释和例子，那就太好了！

这是我当前的服务器代码，我将如何启用多个客户端？

```
#include <iostream>
#include <winsock2.h>
#include <vector>

bool gamerunning = true;
bool srvr_connect = false;
int srvr_rec = 0;

int main() {
    WSAData wsa;
    WORD Version = MAKEWORD(2, 1);

    WSAStartup(Version, &wsa);

    SOCKET Listen;
    SOCKET Connect;

    Listen = socket(AF_INET, SOCK_STREAM, 0);
    Connect = socket(AF_INET, SOCK_STREAM, 0);

    SOCKADDR_IN Server;

    Server.sin_addr.s_addr = inet_addr("192.168.2.4");
    Server.sin_family = AF_INET;
    Server.sin_port = htons(100);

    bind(Listen, (SOCKADDR*)&Server, sizeof(Server));

    listen(Listen, 4);

    int size = sizeof(Server);

    std::cout << "Your server has been started!\nConnecting...\n";

    Connect = accept(Listen, (SOCKADDR*)&Server, &size);

    while (gamerunning) {
        if (Connect != NULL) {
            srvr_connect = true;
            std::cout << "Welcome to player: " << srvr_rec << "\n";
            srvr_rec +=1;
        }
        if (srvr_connect == true) {
            if (test_frame == 0) {
                std::cout << "Connection Sent!\nConnection Has Been Breached!\nPlayers Are Now Able to Join Your Server!\n";
                test_frame +=1;
            }
        }
    }
    std::cin.get();
    return 0;
} 
```

如您所见，这对我的客户非常有用。但只接受一个。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:15:02.470

```
// define a list of sockets
// create the socket you are going to accept on and add the socket to the list
while( true ) {
    // use the list to build the read set
    select( .. read-set .. )
    for( all sockets in the read-set ) {
         if( socket == accept-socket ) {
               // do accept
               // add the new socket to the list
         } else {
               // read data from the socket
         }
    }
} 
```

你像这样使用 select()

```
fd_set readfds;
fd_set writefds;
fd_set exceptfds;
FD_ZERO( readfds );
FD_ZERO( writefds );
FD_ZERO( exceptfds );
int nfds = 0;
for( all socket x in socket list ) {
    FD_SET( x, readfds )
    nfds++;
}
int rc = select( nfds, & readfds, & writefds, & exceptfds, 0 );
for( all socket x in socket list ) {
    if( FD_ISSET( x, readfds ) ) {
        // socket x has something to read or accept
    }
} 
```

# cordova - 在加载时使 phonegap 应用程序加载 index.html

> ID：14512982
> 
> 赞同：0
> 
> 时间：2013-01-24T23:49:34.137
> 
> 标签：cordova

假设我刚刚通过命令行创建了一个新项目。

如何从显示 Hello World, ProjectName 的新项目转到在应用程序打开时显示 assets/www/index.html 的新项目？

（很抱歉这个菜鸟问题，但由于某种原因我找不到关于它的文档，即使它应该到处都是..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:56:10.107

[http://cleancodedevelopment-qualityseal.blogspot.com/2012/12/first-phonegap-app-with-android-using.html](http://cleancodedevelopment-qualityseal.blogspot.com/2012/12/first-phonegap-app-with-android-using.html)

将声明的文件复制到项目中。

# ruby-on-rails - 为什么要使用一对一 (has_one) 关联？

> ID：14512983
> 
> 赞同：0
> 
> 时间：2013-01-24T23:49:40.173
> 
> 标签：ruby-on-rails, ruby, relational-database, rails-activerecord

当我`has_one`可以嵌入关联对象并使用`composed_of`和/或`serialize`. 在我总是加入关联对象并且不需要复杂查询的情况下。例如：

狗（颜色，重量）`has_one :head`头（牙齿数量，眼睛颜色）

我可以用 Dog(color,weight,head_teeth_count,head_eye_color) 替换并使用“计算属性”或值对象，例如

`composed_of :head, mapping: [%w(head_teeth_count teeth_count), %w(head_eye_color eye_color)]`

更少的表，更简单，更清晰的代码，更少的模型，没有意外的额外查询，更好的性能。

另一个例子：

用户（电子邮件）`has_many :roles`角色（姓名）

转换为用户（电子邮件，角色）

`serialize :roles, Array`

在这些情况下我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:52:15.107

语义，这实际上是编写优秀软件的一个非常重要的部分。

一本书不是由作者组成的。一本书*有*一个作者。

我还要争辩说，您的示例更简单或更清晰的代码非常错误。性能改进值得商榷，而且可能微不足道。

你的最后一个案例特别糟糕。如果要搜索特定角色的所有用户怎么办？实例化所有用户，反序列化并一次检查一个？

# c# - 隔离存储和流程提升

> ID：14512987
> 
> 赞同：2
> 
> 时间：2013-01-24T23:49:59.667
> 
> 标签：c#, .net, uac, isolatedstorage

我已经构建了一个包含内置更新程序的程序。更新程序将文件下载到独立存储，然后以提升的权限重新启动它自己以复制文件。我的问题是，当程序运行提升时，隔离存储给出的位置不同，而当它不是这样时，它看不到要复制的文件。有没有办法让隔离存储不改变高架和非高架之间的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T11:22:41.407

.Net 隔离存储是应用程序和用户特定的，提升权限会更改用户以及隔离存储的位置。更好的解决方案是在下载更新之前提升权限。

# http - RESTful API 检查用户是否有活动订阅

> ID：14512990
> 
> 赞同：0
> 
> 时间：2013-01-24T23:50:11.170
> 
> 标签：http, rest

我正在构建一个 RESTful API，其中一部分将检查用户是否有有效的订阅。我正在考虑这样做：

```
GET https://api.example.org/subscriptions/me?username=johndoe&password=abc123&apikey=somekey HTTP/1.1
Host: api.example.org
Accept: application/json

HTTP/1.1 200 OK
Content-Type: application/json

{
    "username": "johndoe",
    "id": 5152,
    "valid": true,
    "valid_until": "2013-01-01 00:00:00",
    "account_level": "basic"
} 
```

系统将返回以下状态代码：

*   如果用户有有效的订阅，则为 200
*   如果省略了用户名或密码参数，则为 400
*   如果用户凭据无效，则为 401
*   如果用户没有有效的订阅，则为 402。
*   403 如果用户的 API 密钥无效
*   404 如果是无效用户
*   429 如果客户端发出了太多的 API 请求

这是 RESTful API 设计吗？能不能做得更好？HTTP 403 是对无效 API 密钥的良好响应吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:05:03.050

我个人会以用户为基础。用户有订阅。

我建议不要在 GET 请求中传递密码。没有人喜欢将明文密码存储在他们的历史记录中。您应该执行 POST /login 并设置适当的会话，这样就不需要对每个请求进行身份验证。如果您希望它完全无状态，请使用基本 HTTP 身份验证。

要求：

```
GET /users/5152
Accept: application/json
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

回复正文：

```
{
    "username": "johndoe",
    "password": "9b71d224bd62f3785d96d46ad3ea3d73319bfbc2890c"
    "id": 5152,
    "valid": true,
    "valid_until": "2013-01-01 00:00:00",
    "account_level": "basic"
} 
```

状态码：

*   如果用户存在，则为 200。检查下标状态客户端。
*   如果省略了用户名或密码参数，则为 401
*   如果用户凭据无效，则为 401
*   --- 如果用户没有有效的订阅。客户端错误
*   404如果用户不存在
*   429 如果客户端发出了太多的 API 请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T11:52:32.203

向任何经过身份验证的用户发送任意用户密码哈希并不是一个好主意。

# ruby-on-rails - 使用 SoundCloud API 创建动态播放列表

> ID：14512998
> 
> 赞同：0
> 
> 时间：2013-01-24T23:50:36.340
> 
> 标签：ruby-on-rails, api, soundcloud

我正在为学校开发一个 Rails 网络应用程序，它允许用户将歌曲添加到播放列表中，然后邀请其他用户对队列中的歌曲进行投票。

我试图弄清楚 SoundCloud API 是否具有执行此操作所需的工具。基本上，我有一个按投票索引的歌曲列表（及其对应的 SoundCloud 曲目 ID）。我希望播放器在每次歌曲完成时播放列表顶部的歌曲，以便按顺序播放歌曲。

我考虑过使用 SoundCloud 播放列表，但我认为我不能动态修改播放列表中歌曲的顺序。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:22:25.487

我们最终做的是使用 soundclouds 事件侦听器和 ajax 来实现流式传输。我们有一个用户可以支持/反对投票的歌曲列表（队列）。当启动事件触发时，我们将歌曲标记为已播放并将其从队列顶部弹出。当完成事件被触发时，我们加载现在位于队列顶部的歌曲并播放。

我们的实现存在一些问题，因为开始事件对应于按下播放按钮（不仅仅是第一次开始的歌曲）。因此，每次用户暂停一首歌曲然后再次按下播放时，位于队列顶部的歌曲就会弹出并标记为已播放。