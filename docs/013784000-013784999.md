# StackOverflow 问答 13784000-13784999

# sql - 左外连接 SQL Server

> ID：13784000
> 
> 赞同：0
> 
> 时间：2012-12-09T02:10:26.107
> 
> 标签：sql, sql-server-2005, outer-join

我对为什么这不起作用感到困惑，我已经多次使用过这种类型的语法，但这种语法让我把头发拉了出来。

我有两张桌子；

**表A**

```
regId name    regStatus
1     George  1
2     Jenny   1
3     Penny   1
4     James   1
5     Preston 1
6     Jamie   0 
```

**表B**

```
activeRegId passiveRegID Status
1            2           1
1            3           1
1            4           0
6            1           1 
```

我要做的是返回所有行，`tableA`不包括那些 where`(tableA.regstatus = 0)`和`(tableB.status = 1 for a user regid = 1)`.

我想避免不得不使用`NOT IN (select ...)`.

到目前为止我的查询：

```
 select top 10 
        tA.regId, tA.name
    from 
        tableA tA 
    left OUTER JOIN 
        tableB tB ON tB.activeRegId = tA.regid AND tB.passiveRegID <> 1 
                     AND tB.status <> 1 AND tB.passiveRegID IS NULL
    where 
        tA.regStatus = 1
        and tA.regid <> 1 
```

我所期待的应该如下，但是，`tableA`除了 Jamie，我让所有用户都参与进来。

```
regId name
4     James
5     Preston 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T02:25:28.550

我认为您需要将一些谓词移出 LEFT OUTER JOIN 的 ON 子句，而是将它们作为 WHERE 子句中的谓词。

根据您提供的数据，我不能确定谓词到底应该是什么，但是您在 LEFT OUTER JOIN 的 ON 子句中包含的任何谓词仅用于从表 B 中排除行，*而不是*从表 A 中排除行。

使用 LEFT OUTER JOIN，您仍将获得表 A 的所有记录，除非它们被 WHERE 子句中的谓词排除。

**编辑** 根据评论，我认为这会起作用，其中“loggedInUserId”是登录用户表 A 中的 regId：

```
SELECT top 10
   tA.regId,
   tA.name
FROM tableA tA1
JOIN tableA tA2
ON (tA1.regId <> tA2.regId
    AND tA2.regStatus <> 0)
LEFT OUTER JOIN tableB tB
ON (tA1.regId = tB.activeRegId
    AND tA2.regId = tB.passiveRegID
    AND tB.Status <> 0)
WHERE tA1.regId = 'loggedInUserId'
AND tB.activeRegId IS NULL 
```

还要排除那些阻止登录用户的人：

```
SELECT top 10
   tA.regId,
   tA.name
FROM tableA tA1
JOIN tableA tA2
ON (tA1.regId <> tA2.regId
    AND tA2.regStatus <> 0)
LEFT OUTER JOIN tableB tB
ON (
    --finding blocked users
    (tA1.regId = tB.activeRegId
     AND tA2.regId = tB.passiveRegID
     AND tB.Status <> 0)
    OR
    --finding blocking users
    (tA2.regId = tB.activeRegId
     AND tA1.regId = tB.passiveRegId
     AND tB.Status <> 0)
    )
WHERE tA1.regId = 'loggedInUserId'
AND tB.activeRegId IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:06:27.913

如果你不想使用`NOT IN`，那么使用`EXCEPT`来排除那些你不想要的呢？

```
SELECT regId
  FROM tableA
EXCEPT
SELECT tA.regId
  FROM tableA tA
  JOIN tableB tB ON (tB.activeRegId = tA.regid AND tB.passiveRegID = 1 AND tB.status = 1)
  WHERE tA.regStatus = 0 
```

# python - 使用python将字符串中的单词替换为列表中的单词

> ID：13784006
> 
> 赞同：0
> 
> 时间：2012-12-09T02:11:26.230
> 
> 标签：python, string, list, replace

我正在用 Python 创建一个词云程序，但我被困在一个词替换功能上。我正在尝试用有序列表中的单词替换 html 文件中的一组数字（所以我正在使用字符串）。所以`000`将替换为列表中的第一个单词，替换为第二个单词`001`，依此类推。

所以在下面我让它选择`w`要正确替换的单词，但我不能让它用字符串中的单词正确替换它。任何帮助表示赞赏。谢谢！

```
def replace_all():  
  text = '000 001 002 003 '
  word = ['foo', 'bar', 'that', 'these']
  for a in word:    
    y = -1
    for w in text:     
      y = y + 1
      x = "00"+str(y)
      w = {x:a}      
      for i, j in w.iteritems():
        text = text.replace(i, j)
  print text 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T02:13:36.247

这实际上是一个非常简单的[列表理解](http://www.youtube.com/watch?v=pShL9DCSIUw)：

```
>>> text = '000 001 002 003 '
>>> words = ['foo', 'bar', 'that', 'these']
>>> [words[int(item)] for item in text.split()]
['foo', 'bar', 'that', 'these'] 
```

编辑：如果您需要保留其他值，则可以满足以下要求：

```
def get(seq, item):
    try:
        return seq[int(item)]
    except ValueError:
        return item 
```

然后简单地使用类似的东西- 自然，如果字符串中会有其他数字可能会被意外替换，则`[get(words, item) for item in text.split()]`可能需要进行更多测试。`get()`（编辑结束）

我们所做的是将文本拆分为单独的数字，然后将它们转换为整数并使用它们来索引您提供的列表以查找单词。

至于为什么您的代码不起作用，主要问题是您正在循环字符串，这将为您提供字符，而不是单词。但是，这不是解决任务的好方法。

还值得一提的是，当您循环遍历值并希望索引与它们一起使用时，您应该使用[内置`enumerate()`函数](http://docs.python.org/3.3/library/functions.html#enumerate)而不是使用计数变量。

例如：而不是：

```
y = -1
for w in text:
    y = y + 1
    ... 
```

利用：

```
for y, w in enumerate(text):
    ... 
```

这更具可读性和 Pythonic。

您现有代码的另一件事是：

```
w = {x:a}      
for i, j in w.iteritems():
    text = text.replace(i, j) 
```

如果您考虑一下，可以简化为：

```
text = text.replace(x, a) 
```

您正在设置`w`为一个项目的字典，然后循环遍历它，但您知道它只会包含一个项目。

更接近您的方法的解决方案将是这样的：

```
words_dict = {"{0:03d}".format(index): value for index, value in enumerate(words)}
for key, value in words_dict.items():
    text = test.replace(key, value) 
```

我们创建一个从零填充数字字符串（使用[`str.format()`](http://docs.python.org/3.3/library/string.html#formatexamples)）到值的字典，然后替换每个项目。请注意，当您使用 2.x 时，您会想要`dict.iteritems()`，如果您是 2.7 之前的版本，请`dict()`在元组生成器上使用内置函数，因为不存在 dict 理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T02:37:49.010

在处理文本时，显然必须考虑正则表达式。

```
import re

text = text = ('<p><span class="newStyle0" '
               'style="left: 291px; '
               'top: 258px">000</span></p> <p>'
               '<span class="newStyle1" '
               'style="left: 85px; '
               'top: 200px">001</span></p> <p>'
               '<span class="newStyle2" '
               'style="left: 580px; '
               'top: 400px; width: 167px; '
               'height: 97px">002</span></p> <p>'
               '<span class="newStyle3" '
               'style="left: 375px; top: 165px">'
               '003</span></p>')

words = ['XXX-%04d-YYY' % a for a in xrange(1000)]

regx = re.compile('(?<=>)\d+(?=</span>)')

def gv(m,words = words):
    return words[int(m.group())]

print regx.sub(gv,text) 
```

# ios - Xcode中的iPad segue错误

> ID：13784009
> 
> 赞同：2
> 
> 时间：2012-12-09T02:12:14.233
> 
> 标签：ios, xcode, ipad, segue, master-detail

Noob Xcode 问题在这里。

我有一个基本的主从设置。

当我在主列表中选择一个项目时，它会带来第二个带有详细信息的“主”侧边栏，而不是更新详细信息页面。

所以我从这个开始： ![](../Images/dcd50a71ca949269a0c024c1c611a741.png)

我点击“尼克琼斯”并得到这个： ![在此处输入图像描述](../Images/602745131215f60f41a03a0008da5ef6.png)

故事板如下所示： ![在此处输入图像描述](../Images/2df5219d8056ed9b55ca15d596b275e1.png)

但是，如果我单击主视图控制器，详细视图控制器将大小更改为： ![在此处输入图像描述](../Images/3126f6d202dd09e16441aa9ce18a694e.png)

我正在尝试将教程“您的第二个 iOS 应用程序”教程改编为 iPad（而不是 iPhone）。关键的 segue 页面在[这里](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CustomizingDetailView/CustomizingDetailView.html)。我已经在导航控制器和详细视图控制器之间重新建立了一个 segue 链接，因为没有它它根本无法工作，但我显然做错了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T03:19:42.033

几点观察：

1.  明显的问题是从主视图控制器到详细视图控制器的转场类型。它应该是一个“替换”segue，当您选择该 segue 并单击属性检查器时，请确保您指定了“详细拆分”的目标：

    ![细节分割](../Images/eb8dc739a1e21c16d5ac1a5203f08e2f.png)

2.  顺便说一句，故事板在 UI 上有点混乱的原因是，您在该细节视图控制器中有两个 segue，一个来自拆分视图控制器的细节视图（因此细节的方形形状场景），另一个来自主视图控制器（因此是细节场景的不正确的狭窄形状）。可怜的 Interface Builder 可能正坐在那里想“嘿，你想让我使用这个场景作为拆分视图的细节，还是作为主视图控制器的替代品？！？” 我之前的观点解决了这个冲突，但这解释了为什么在您当前的故事板中，细节场景的形状会根据您当前选择的场景而变化。

3.  如果您打算这样做，我建议您可能希望从主场景到细节场景的转场实际上是从主场景到导航控制器场景，而不是到细节场景本身：

    ![转到导航控制器](../Images/00d0fd9073d77bc38476a22a88d19eab.png)

4.  不过，坦率地说，在描述了如何修复 segue 之后，*您不应该使用 segue！*创建一个空白的新“主从”项目，看看它做了什么。你会注意到它看起来更像：

    ![在此处输入图像描述](../Images/152809facc32008d3abdce613e5ddd2c.png)

*如果您将*细节视图控制器更改为不同的场景，您真的只想要从主场景到细节场景的转场。但你没有那样做。您可能只想告诉细节视图控制器它正在查看的对象已更改并且应该更改`reloadData`。鉴于您的详细信息视图控制器本身是一个表格视图，主视图控制器将有一个方法可以执行以下操作：（a）告诉详细信息视图控制器它正在查看的详细信息项；(b) 告诉它`reloadData`。所以它可能看起来像：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSDate *object = _objects[indexPath.row];
    self.detailViewController.detailItem = object;

    [self.detailViewController.tableView reloadData];
} 
```

你可以让它工作，但我认为后一种方法可能更有意义。

# ruby - ruby define_method 动态块

> ID：13784013
> 
> 赞同：0
> 
> 时间：2012-12-09T02:12:47.983
> 
> 标签：ruby, metaprogramming

我已经动态地创建了一个类，并且正在尝试向该类添加方法。假设一个字符串表示需要通过此方法评估的命令。

```
 a = "puts x"

    myobject.metaclass.send(:define_method, k){|x|
         // cannot do this, obviously 
         eval(a)
    } 
```

谢谢您的帮助。

编辑：

k 也来自文件，只用 ruby​​ 编写类而不是将替代文件格式作为类读取是微不足道的，但我想让创建模板尽可能简单。看起来像……

```
generic

do_something:
  environment1:    
    foo arg1 arg2
  environment2:
    bar arg
    baz arg 
```

我知道该方法被称为什么以及该方法需要做什么。我在运行时为每个类实例确定了适当的环境，我似乎无法动态地将语句添加到方法中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T02:25:55.100

您可以使用`class_eval`.

```
a = <<-CODE
  def foo(x)
    puts x
  end
CODE

myobject.class.class_eval a 
```

**更新**

你能做这样的事情吗？

```
new_method = <<-CODE
  def #{k}(*args)
    #{a}
  end
CODE 
```

myobject.class.class_eval new_method

假设你有：

```
k = some_method
a = puts args

new_method = <<-CODE
      def #{k}(*args)
        #{a}
      end
    CODE

myobject.class.class_eval new_method
myobject.some_method 1, "foo", "bar" 
```

然后它会输出：

```
1
foo
bar 
```

# java - Drools Guvnor 的本地版本

> ID：13784016
> 
> 赞同：0
> 
> 时间：2012-12-09T02:13:16.793
> 
> 标签：java, drools, rule-engine, drools-guvnor

我读过很多关于 Drools Guvnor 以及与 Drools Planner 交互的资料。无需编码即可创建和更改规则非常有用。但我读过 Guvnor 是一个网络应用程序。

**是否有将 Guvnor 作为本地桌面应用程序运行的解决方案？**

我想在我的桌面上使用它而不启动应用程序服务器左右。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T11:53:26.217

目前没有（有一个[旧的 Esteban 概念证明](https://stackoverflow.com/questions/10301052/stripped-down-drools-guvnor)，但那是一个原型）。对于 uberfire 和 guvnor 6，我认为他们正在接受这个要求，但它可能只会制作 guvnor 6.1（manstis 可能能够详细说明）。

无论如何，一旦您从 guvnor 获得 RuleBase/KnowledgeBase/KieBase，只需遵循[文档第 5.3.4.2.2 节即可。一个 RuleBase（可能由 Guvnor 定义）](http://docs.jboss.org/drools/release/5.5.0.Final/drools-planner-docs/html_single/index.html#d0e3759)。对于 Planner 6.0，我正在考虑让 RuleBase/KnowledgeBase/KieBase 的[铸造痛苦](https://stackoverflow.com/questions/11017613/live-rule-creation-in-drools-planner)消失。

# objective-c - Mac OS X 应用程序通过 wi-fi 远程控制相机

> ID：13784017
> 
> 赞同：5
> 
> 时间：2012-12-09T02:13:18.373
> 
> 标签：objective-c

我想为 Mac OS X 构建一个程序来远程控制我的 DSLR 相机。我的相机有一个 WiFi 适配器，所以我希望通过 WiFi 进行控制。我对C有很好的了解，Objective C / Xcode的基本中级知识但没有WiFi经验我应该使用哪个框架来连接相机以及相机与计算机之间的通信？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:24:19.210

如果您指的是 PTP over IP (PTP/IP)，据我了解，这仅用于将媒体传输到相机/从相机传输（不确定可以使用哪些远程控制功能），它基本上是 TCP/ IP 连接。您需要建立 TCP 连接。正如 NSBum 所建议的那样，这将需要 NSInputStream 和 NSOutputStream，以及作为 NSStreamDelegate 的类来处理流事件，例如与计算机通信的相机。

至于实际的协议，这应该由您下载的 SDK 处理，如果不是这里的一些文档可以帮助您入门：[gPhoto PTP/IP Documentation](http://gphoto.sourceforge.net/doc/ptpip.php)

还有一些显示 NSInputStream 和 NSOutputStream 的代码：

```
// This would either be part of a Class init method or called at some point after
CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"192.168.1.2", 1234, &readStream, &writeStream);
    inputStream = (__bridge NSInputStream *)readStream;
    outputStream = (__bridge NSOutputStream *)writeStream;

[inputStream setDelegate:self];
[outputStream setDelegate:self];

[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

[inputStream open];
[outputStream open]; 
```

并以写入 outputStream 作为一般示例：

```
// data is of class NSData, the following writes the data bytes to the outputStream
[outputStream write:[data bytes] maxLength:[data length]]; 
```

您的 NSStreamDelegate 还需要提供此方法的实现：

```
- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent 
```

文档：[NSStreamDelegate 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSStreamDelegate_Protocol/Reference/Reference.html)（左侧边栏上还有指向 Stream Programming Guide 的链接）

# android - 通过代码创建 android 视图

> ID：13784021
> 
> 赞同：0
> 
> 时间：2012-12-09T02:13:58.690
> 
> 标签：android, android-layout

我需要创建文本视图（或类似的），我是新手，我需要你的帮助。这些是从网络服务接收的参数

```
String jacuzzi=yes   
String estacionamiento = no   
String peli= yes   
String cable=yes  
String roomservice= no  

i need to create them when the (variable == "yes") 
```

我一直在寻找答案，但我不明白我不知道
我是否真的需要创建一个新的布局，
我真的是 android的新手

在这里我把我的 android xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:orientation="vertical"
    android:background="#ccccfe"  >

 <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="match_parent"
        android:layout_height="45dp" >

      <ImageView
        android:id="@+id/imageView0"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:background="#ffd7bd"
       android:orientation="vertical"
       android:layout_marginLeft="-200dp "

        android:textStyle="bold"
   android:textColor="#000000" android:shadowColor="#8a6603"
   android:shadowDx="3" android:shadowDy="2" android:shadowRadius="1.8"
        android:src="@drawable/muestra2" />

    </TableRow>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="60dp"
        android:layout_marginTop="10dp"
        android:text="Motel: "
        android:textColor="#303f46"
        android:textSize="21sp"
        android:textStyle="bold" />

    <ImageView
        android:id="@+id/imagen"
        android:layout_width="fill_parent"
        android:layout_height="250dp"

        android:background="#ccccfe"
        android:scaleType="fitXY"
        android:padding="1dp"/>

<TableLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <TableRow >
        <TextView />
        <TextView />
    </TableRow>

    <TableRow >

    <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Dirección: "
        android:textColor="#303f46"
        android:textSize="15sp"
        android:textStyle="bold"
        android:width="90dp" />

    <TextView 
        android:id="@+id/textView2"
        android:text=""
        android:textSize="14sp"
        android:layout_width="wrap_content"
        android:textColor="#373737"/>              

 </TableRow>

  <TableRow >
    <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#303f46"
      android:textSize="15sp"
        android:textStyle="bold"
        android:width="90dp"
        android:text="Comuna: " />

     <TextView 
         android:id="@+id/textView3"
        android:text=""
        android:textSize="14sp"
        android:layout_width="wrap_content"
        android:textColor="#373737" />

    </TableRow>

  <TableRow >
    <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#303f46"
        android:textSize="15sp"
        android:textStyle="bold"
         android:width="90dp"
        android:text="Descripcion: " />

     <TextView 
         android:id="@+id/desc"
        android:text=""
        android:textSize="14sp"
        android:layout_width="wrap_content"
        android:textColor="#373737" />

    </TableRow>

  <TableRow >

     <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#303f46"
        android:textSize="15sp"
        android:textStyle="bold"
        android:text="Telefono: "
          android:width="90dp" />

      <TextView 
         android:id="@+id/telefono"
        android:text=""
        android:textSize="14sp"
        android:layout_width="wrap_content"
        android:textColor="#373737" />

     </TableRow>

   <TableRow >
      <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#303f46"
        android:textSize="15sp"
        android:textStyle="bold"
        android:text="Correo: " 
        android:width="90dp"/>

       <TextView 
         android:id="@+id/correo"
        android:text=""
        android:textSize="14sp"
        android:layout_width="wrap_content"
        android:textColor="#373737" />

     </TableRow> 
     <TableRow>
       <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#303f46"
        android:textSize="15sp"
        android:textStyle="bold"
        android:text="SitioWeb:" 
        android:width="90dp" />

        <TextView 
         android:id="@+id/sitio"
        android:text=""
        android:textSize="14sp"
        android:layout_width="wrap_content"
        android:textColor="#373737" />
        </TableRow>
</TableLayout>

</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T02:33:20.933

如果不需要，最好创建它们并删除它们，而不是相反，如下所示。

首先

```
boolean jacuzzi = true;
boolean estacionamiento = false;  
boolean peli = true; 
boolean cable = true;  
boolean roomservice = false; 
```

使用布尔值而不是字符串。布尔值可以是真或假。使用“是”或“否”更容易使用。

// 如果必须使用字符串

利用

```
if (jacuzzi.contentEquals("yes") 
```

而不是下面的布尔值。

//

我将向您展示按摩浴缸，对所有人使用相同的技术。

```
TextView tv = (TextView) findViewById(R.id.textView1); 
```

我把它叫做电视，但你可以把它叫做任何东西。至于 R.id.textView1 - 这是在您的 XML 代码中引用您的 TextView，android 自动调用 textView1 但您可以通过更改 ID 来更改它。

```
if(jacuzzi == false)
{tv.setVisibility(View.GONE);} 
```

这读取如果按摩浴缸是假的然后使 TextView 消失。你也可以使用

```
if(!jacuzzi)
{tv.setVisibility(View.GONE);} 
```

因为他们的意思是一样的。

否则对于动态编码，这要困难得多。您需要通过 findViewById 引用您的线性布局，类似于我执行 textview 的方式。然后你需要创建一个新的文本视图。如果你觉得你真的想学习如何做到这一点，那就更难了，但只要问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T02:28:15.877

这是使用代码而不是 XML 动态创建布局的方法。

首先，您应该在 xml 中为您的 LinearLayout 提供一个 id：

```
<LinearLayout android:id="@+id/myLayout"> 
```

然后在您的代码中：

```
LinearLayout myLayout = (LinearLayout) findViewById(R.id.myLayout);

if (variable.contentEquals("yes")) {
    TextView jacuzzi = new TextView(this);
    jacuzzi.setText("jacuzzi");
    myLayout.addView(jacuzzi);
} 
```

但是避免使用字符串并将它们设置为是。请改用布尔值。

# c++ - VC++ System::ComponentModel::Container 用法和 Controls 变量

> ID：13784022
> 
> 赞同：2
> 
> 时间：2012-12-09T02:14:16.397
> 
> 标签：c++, winforms, visual-c++, components, containers

1-我制作了一个简单的 Windows 窗体应用程序，发现生成了这一行：

```
System::ComponentModel::Container ^components; 
```

这在形式的析构函数中：

```
if (components)
        {
            delete components;
        } 
```

但是，当我评论他们两个时，根本没有区别。您能否告诉我它在我的代码中的用法和/或它的用法示例？

在此先感谢，这是完整的代码..只是一个非常简单的表格，我删除了很多不必要的行，这些行指定了我的东西的绘制

```
#pragma once

namespace PC2newversion {

using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

/// <summary>
/// Summary for SignUp
/// </summary>
public ref class SignUp : public System::Windows::Forms::Form
{
public:
    SignUp(void)
    {
        InitializeComponent();
        //
        //TODO: Add the constructor code here
        //
    }

protected:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~SignUp()
    {
        if (components)
        {
            delete components;
        }
    }
private: System::Windows::Forms::Label^  label8;
protected: 
private: System::Windows::Forms::TextBox^  textBox8;
private: System::Windows::Forms::TextBox^  textBox7;
private: System::Windows::Forms::Label^  label7;
private: System::Windows::Forms::Label^  label6;
private: System::Windows::Forms::TextBox^  textBox6;
private: System::Windows::Forms::Label^  label5;
private: System::Windows::Forms::TextBox^  textBox5;
private: System::Windows::Forms::Button^  button1;
private: System::Windows::Forms::TextBox^  textBox4;
private: System::Windows::Forms::TextBox^  textBox3;
private: System::Windows::Forms::TextBox^  textBox2;
private: System::Windows::Forms::TextBox^  textBox1;
private: System::Windows::Forms::Label^  label4;
private: System::Windows::Forms::Label^  label3;
private: System::Windows::Forms::Label^  label2;
private: System::Windows::Forms::Label^  label1;

private:
    /// <summary>
    /// Required designer variable.
    /// </summary>
    System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        this->label8 = (gcnew System::Windows::Forms::Label());
        //Deleted many unnecessary lines here

        // 
        // SignUp
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(379, 266);
        this->Controls->Add(this->label8);
        this->Controls->Add(this->textBox8);
        this->Controls->Add(this->textBox7);
        this->Controls->Add(this->label7);
        this->Controls->Add(this->label6);
        this->Controls->Add(this->textBox6);
        this->Controls->Add(this->label5);
        this->Controls->Add(this->textBox5);
        this->Controls->Add(this->button1);
        this->Controls->Add(this->textBox4);
        this->Controls->Add(this->textBox3);
        this->Controls->Add(this->textBox2);
        this->Controls->Add(this->textBox1);
        this->Controls->Add(this->label4);
        this->Controls->Add(this->label3);
        this->Controls->Add(this->label2);
        this->Controls->Add(this->label1);
        this->Name = L"SignUp";
        this->Text = L"SignUp";
        this->ResumeLayout(false);
        this->PerformLayout();

    }
#pragma endregion
};
} 
```

2- 在

```
this->Controls->... 
```

Controls 不应该是一个变量（指针或句柄）吗？那么，它是在哪里声明的呢？

# javascript - 如何在 Clojure 中编写一个保持状态的闭包？

> ID：13784031
> 
> 赞同：3
> 
> 时间：2012-12-09T02:16:34.743
> 
> 标签：javascript, clojure, closures

我想在 Clojure 中编写一个闭包来模拟以下 JavaScript 代码：

```
var nextOdd = function () {
    var x = 1;
    return function () {
        var result = x;
        x += 2;
        return result;
    }
}();
nextOdd(); //1
nextOdd(); //3
nextOdd(); //5 
```

我知道 Clojure 支持闭包，所以我可能会写类似的东西

```
(defn plusn [x]
    (fn [y] (+ x y)))
(def plus2 (plusn 2))
(plus2 3) 
```

但是我每次调用函数时都需要能够保持状态（即下一个奇数的状态）的东西......然后在 Clojure 中就有了整个不变性......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T02:27:47.530

这在clojure中是等价的

```
(def next-odd (let [x (atom -1)]
                (fn []
                  (swap! x + 2))))

(next-odd)
-> 1
(next-odd)
-> 3
(next-odd)
-> 5
(next-odd)
... 
```

如果您需要奇数序列，请添加到 dAni 的示例：

```
(def odd-numbers (iterate (partial + 2) 1))

(take 5 odd-numbers)
-> (1 3 5 7 9) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-09T02:34:31.513

mobyte 的答案是正确的，但是您如何尝试用无限的惰性赔率序列来解决您的问题？`(take 10 (filter odd? (range)))`. 也许你不需要状态。

# r - VIM 中的哪个插件负责屏幕底部的日期时间和“打开的选项卡”信息？

> ID：13784038
> 
> 赞同：0
> 
> 时间：2012-12-09T02:18:21.490
> 
> 标签：r, vim

我正在尝试按照[此处](http://equation85.github.com/blog/vim-working-env/)的说明（中文）在 Linux Mint 环境下创建 R IDE 。

我按照指示安装了 and ，暂时跳过`NERDTree`了and 。`vim-r-plugin``vcscommand``fuzzyfinder`

该页面显示了 IDE 的输出：

![在此处输入图像描述](../Images/4e8b7c0338412f3c6f89d1b8ce260597.png)

这对我来说几乎没问题，但我想知道为什么我看不到输出中显示的最后一行，即打开的日期时间和选项卡名称的行。我怎样才能显示这条线？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T06:15:06.770

看起来这实际上来自[gnu-screen](/questions/tagged/gnu-screen "显示标记为“gnu-screen”的问题")。

该图像似乎显示了一个屏幕会话，当前屏幕窗口分为两个窗格。顶部窗格包含 vim，它本身分为 3 个 vim 窗口，底部窗格正在运行我假设是 R 解释器。图像的最后一行是屏幕状态行。

[tmux](/questions/tagged/tmux "显示标记为“tmux”的问题")可能实际上是用来代替屏幕的。

# javascript - Jquery 仅适用于 IE（高级滑块）

> ID：13784041
> 
> 赞同：1
> 
> 时间：2012-12-09T02:18:35.000
> 
> 标签：javascript, jquery, html, css, drupal

有人可以帮助我让[这个滑块](http://dev.jagmit.co.uk/my-house)适用于 IE。

我收到一条错误消息（仅在 IE 版本上），指出 jquery 文件 Row 1, Column 1 of [this file](http://dev.jagmit.co.uk//sites/all/themes/purcouk/slider/js/jquery.advancedSlider.min.js)中有一条错误消息。

现在，我检查了其他已购买的脚本，它们可以在 IE 上运行。但是，我的只是不断崩溃。当我按照文档中所述的所有说明进行操作时，有人可以告诉我它有什么问题。（适用于 Firefox、Chrome、Safari、Opera）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:47:23.387

这并不完全是一个答案，而更像是一个有根据的猜测。

如果您确实可以在某个地方访问 IE9，则可以将文档模式设置为 IE8 或 IE7，然后在“脚本”选项卡下应该有一个“开始调试”按钮。设置为IE8或IE7时，有一条语句高亮显示`d[f]=c`，通过settinc可以看到`d`是a `DispHTMLStyle` (一些DOM节点的样式对象(like`div`什么的)，`f`是`String` `width`，`c`是`Number`with值`NaN`(“Not a Number”的缩写) “）。您还有一个调用堆栈，在其中我看到（重新格式化）

```
jQuery(document).ready(function ($) {
    $('#my-slider').advancedSlider({
        width: '100%',
        height: 225,
        skin: 'minimal-small',
        slideButtonsNumber: true,
        effectType: 'scale',
        slicePattern: 'topToBottom',
        sliceDuration: 9000,
        timerAnimationControls: false,
        slideLoop: true,
        slideArrows: false,
        overrideTransition: true,
        shadow: false,
        timerAnimation: false,
        keyboardNavigation: true,
        pauseSlideshowOnHover: true,
        lightbox: false,
        thumbnailLightboxIcon: false,
        preloadNearbyImages: true,
        allowScaleUp: true,
        captionBackgroundOpacity: 0.90,
        slideProperties: {
            0: {
                captionPosition: 'custom',
                captionShowEffect: 'slide',
                captionHeight: 170,
                captionTop: 29,
                captionLeft: 630,
                slideshowDelay: 25000,
                captionBackgroundColor: '#ffffff'
            },
            1: {
                captionPosition: 'custom',
                captionShowEffect: 'slide',
                captionHeight: 170,
                captionTop: 29,
                captionLeft: 630,
                slideshowDelay: 10000,
                captionBackgroundColor: '#ffffff'
            }
        }
    });
});

//@ sourceURL=/inline-13b6e3cdf71.js 
```

请注意，您已在文档中准备好此设置！CSS 可能还没有加载！

~~我怀疑将宽度设置为实际数值可能会解决您的问题。~~

在加载所有样式规则之前，通常不能保证html 页面上的*任何内容*都具有宽度。甚至内联样式也可以被否决。因此使用 a `width`of`100%`可能是荒谬的。我认为这完全取决于您的浏览器如何解释该值。

~~您也可以尝试将它从您的文档`ready`处理程序移动到一个窗口`load`处理程序，看看会发生什么。通过这样做，您还可以获得手动触发一些 jQuery 以获取某个对象的宽度并使用该值（如果您想保持对样式规则的依赖）的能力。当然，缺点是您可能会在滑块加载之前显示一些不需要的内容或一些其他工件。~~

所以，长话短说，通过手动为该宽度编码一个固定值来尝试它，然后从那里决定。

编辑：好的，对不起，没有用。我可以清楚地看到来源不同，但它也是同一种错误（`d[f]=c`与以前相同类型的对象/值的语句。）

进一步检查，在调用堆栈中我们有这个语句`c.css("width",parseInt(c.data("width")));`。局部变量`c`似乎是一个 jQuery 对象，其中包含一个带有“滑动按钮”类的 div。我似乎记得前面提到的声明，但没有像我需要的那样深入研究它。所以我的第二个猜测是它与他们有关（不知何故）。

我还四处搜索，发现[http://codecanyon.net/item/advanced-slider-jquery-xml-slider/132618](http://codecanyon.net/item/advanced-slider-jquery-xml-slider/132618)，我假设你正在使用它，虽然我没有看到任何明确的文档（我想，这对于按使用付费的插件是有意义的），我确实在评论部分看到人们使用`width: '100%'`没有投诉的值和演示[http://bqworks.com/products/advanced-slider/ responsive.html](http://bqworks.com/products/advanced-slider/responsive.html)确实在 IE8 浏览器模式下运行并`jQuery(document).ready(...)`初始化滑块......所以几乎击落了我以前所有的其他理论（对不起！）。但我确实认为滑动按钮需要宽度。该`c.css("width",...)`行周围的“美化”代码如下（我的注释是关于我的*想法*正在发生）：

```
c = M.find(".slide-buttons");  //jquery find under M something with class slide buttons
//if the element doesn't have "width data"
//grab values from the style rules using jQuery .css http://api.jquery.com/css/
if (!c.data("width"))
{
    c.data("width", parseInt(c.css("width")));
    c.data("height", parseInt(c.css("height")))
}
//find other things (odd, why is there no period?)
d = c.find("buttons-middle");
f = d.find("buttons-inner");
//directly assign back those same values possibly obtained earlier 
c.css("width", parseInt(c.data("width")));
c.css("height", parseInt(c.data("height"))); 
```

当调用该代码时，c.css("width") 返回“auto”，这显然不能作为数字解析。当然，问题变成了，为什么 IE8 及以下版本会返回类似“auto”之类的东西，而其他浏览器却没有？答案可能是“这正是旧 IE 版本在那种情况下所做的。”。

我还注意到该演示也不使用滑块按钮，因此您可能正在使用此小部件的开发人员在您获得此小部件的源代码文件时可能没有找到并发布干净解决方案的场景。

因此，如果您不想阅读我刚刚添加的所有内容，您可以尝试添加一个 CSS 规则，例如

```
.advanced-slider .slide-buttons {
    width: 400px;
} 
```

或任何可行的方法。

# python - python + appengine + oauth2 + 谷歌联系人 api

> ID：13784043
> 
> 赞同：2
> 
> 时间：2012-12-09T02:19:21.180
> 
> 标签：python, google-app-engine, oauth-2.0, google-contacts-api

所以我很困惑。主要是关于拥有在 python 应用程序引擎上运行的 Web 应用程序的“正确”方式，该应用程序可以与用户交谈以让他们通过 oauth2 权限接受，以便我的应用程序引擎应用程序可以读取/写入他们的联系人数据库。我有一些类似的东西（基于[http://code.google.com/p/google-api-python-client/](http://code.google.com/p/google-api-python-client/)上的应用引擎示例，特别是[http://code.google.com/ p/google-api-python-client/source/browse/#hg%2Fsamples%2Fappengine](http://code.google.com/p/google-api-python-client/source/browse/#hg%2Fsamples%2Fappengine) )

我已将 SCOPES 修改为

```
SCOPES = (
          'https://www.google.com/m8/feeds','https://www.googleapis.com/auth/plus.me'
          ) 
```

但我得到的问题是我不想跑

```
 http = decorator.http()
        user = service.people().get(userId='me').execute(http=http) 
```

但类似的东西

```
 http = decorator.http()
        user = service.contacts().get(userId='*').execute(http=http) 
```

但是对于我的生活，我不知道在服务之后要放什么......功能......当然我不知道如何用谷歌搜索这个......好吧我不知道我在谷歌搜索什么术语.

我试过修改服务构造函数..但我又不知道该放什么。

```
service = build("plus", "v1", http=http)  ### works for g+
contact_service = build("m8","v3",http=http) ### doesn't work for toffee 
```

我确实在这里看到了这种努力：[Retrieving contacts with gdata.contacts.client and oauth2](https://stackoverflow.com/questions/11381550/retrieving-contacts-with-gdata-contacts-client-and-oauth2)但宁愿使用“stock google”解决方案，因为他们倾向于维护这些..（通常）

好的..所以我发现了这个有用的元 API 调用：

[https://www.googleapis.com/discovery/v1/apis/](https://www.googleapis.com/discovery/v1/apis/)

其中绝对没有提到联系人 api。我是否认为这种方法不合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:15:00.227

当前版本的联系人 API (v3) 使用较旧的[gdata-python-client 库](http://code.google.com/p/gdata-python-client/)，而不是新的[google-api-python-client](http://code.google.com/p/google-api-python-client/)。可以在此[博客条目](http://googleappsdeveloper.blogspot.com/2011/09/python-oauth-20-google-data-apis.html)中找到将 OAuth 2.0 与 gdata Python API 结合使用的详细信息。博客调用日历和文档客户端 API，但联系人应该非常相似。

# eclipse - Eclipse：缺少“运行配置”按钮？（命令组可用性没有帮助）

> ID：13784044
> 
> 赞同：0
> 
> 时间：2012-12-09T02:19:39.073
> 
> 标签：eclipse, button, run-configuration

我有一个奇怪的问题。我正在使用 Eclipse 用 PyDev 在 Python 中制作一些东西。美好的。但是有一天，“运行配置”按钮决定消失；现在我无法从 Eclipse 中运行我的程序！转到 Window -> Customize Perspective -> Command Groups Availability 没有帮助，因为由于某种原因缺少 Launch Command Group！我不知道是什么原因造成的。我正在使用 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:52:08.633

作为天才，我从没想过简单地删除我的 Eclipse 配置。对于 Linux 用户，这是在`/<your workspace>/.metadata`.

# php - PHP MySQL 二进制选择

> ID：13784046
> 
> 赞同：0
> 
> 时间：2012-12-09T02:20:06.010
> 
> 标签：php, mysql, binary, sha1

我已经搜索了一个小时，但我无法让它工作。

我有一个名为`user`2 列的表`username varchar(64)`，并且`password binary(20)`. 我正在使用 SHA1 加密，因为我想让它变得又快又脏。

```
mysql> describe user;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| username | varchar(64) | NO   | PRI | NULL    |       |
| password | binary(20)  | NO   |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+ 
```

当我想验证用户的密码时，我遇到了一些麻烦。我没有得到二进制的结果密码。有什么建议么？谢谢。

```
$username = mysql_real_escape_string($_POST['username']);
$password = sha1(mysql_real_escape_string($_POST['password']));
$binPass = pack("H*", $password);
$query = "SELECT * FROM `user` WHERE `username` = '$username' AND `password` = $binPass;"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:34:51.410

计算 sql 转义密码的校验和是没有意义的。您想要计算原始密码的校验和，并且由于您在查询中使用二进制数据，因此必须在将`mysql_real_escape_string`其包含在查询中之前对其进行转义，否则您会得到意想不到的结果。

```
$username = mysql_real_escape_string($_POST['username']);
$password = sha1($_POST['password']);
$binPass = mysql_real_escape_string(pack("H*", $password));
$query = "SELECT * FROM `user` WHERE `username` = '$username' AND `password` = '$binPass'" 
```

通过将其以二进制形式存储在数据库中，您将节省 50% 的空间，但性能提升最多是最小的。您应该考虑只将十六进制校验和存储在数据库中。

# mysql - 来自逗号字段内爆的 Mysql Like

> ID：13784051
> 
> 赞同：0
> 
> 时间：2012-12-09T02:20:56.977
> 
> 标签：mysql

如果我写：

```
SELECT * FROM users WHERE themes LIKE '%3%' 
```

从字段主题='1、2、3、4、5'，如何写正确'%3'或'3%'或'%3%'

只是为了检查用户是否选择了这些主题之一

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T02:24:11.857

利用`FIND_IN_SET`

```
SELECT * 
FROM users 
WHERE FIND_IN_SET(3, themes) <> 0 
```

*   [FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

# ruby-on-rails - SimpleForm Rails：为复选框指定选中和未选中的值

> ID：13784052
> 
> 赞同：0
> 
> 时间：2012-12-09T02:21:44.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我需要使用rails中的简单表单为复选框设置默认的选中/未选中值，假设我有一个具有“订阅”属性的用户模型。所以在他的个人资料页面上，我想输出一个复选框，如果它被选中，它将传递“是”值。到目前为止，我有：

```
= simple_form_for @user do |user|
= user.input :subscribed, as: :boolean, label: false, inline_label: 'Do you want to subscribe?', value: "yes" 
```

但它仍然显示 1 作为复选框的值...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:31:18.063

对于类似的布尔属性`:subscribed`，您确实应该**将值存储为布尔值**。存储`'yes'`或`'no'`不是最好的主意。*我的回答将反映这种更好的做法。*

要获取默认`true`值（默认选中该框），您可以为模型中的`:subscribed`属性提供默认值`User`

```
after_initialize do
  subscribed = true if subscribed.nil?
end 
```

这将导致未明确取消订阅的用户默认选中该复选框。

# java - 在java中计算一个bigdecimal的sigmoid值

> ID：13784056
> 
> 赞同：1
> 
> 时间：2012-12-09T02:22:30.657
> 
> 标签：java

在这里提出问题，如果您能提供帮助，将不胜感激。

我正在尝试使用与我用于双精度值的代码行类似的东西来计算 bigdecimal 的 sigmoid 值

```
double a = 1 / (1 + Math.exp("a")); 
```

但是我想对 bigdecimal 数据类型执行相同的操作，但我找不到可以为 bigdecimal 执行此操作的代码

```
Math.exp(x) 
```

是否有任何简短的代码可以在 bigdecimal 上提供这个 sigmoid 值

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T02:31:35.147

看看使用[泰勒公式的贝叶斯 MCMC](http://en.wikipedia.org/wiki/Taylor%27s_theorem) [BigDecimalUtils.exp()](http://code.google.com/p/beast-mcmc/source/browse/trunk/src/dr/math/BigDecimalUtils.java?r=3502)。

```
BigDecimal exponential = BigDecimalUtils.exp(BigDecimal.valueOf(3.2), 4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T02:27:29.653

`Math.exp(x)`您可以使用 Taylor/Maclaurin 级数展开近似指数函数：

`exp(x) = sum_n=0^infinity x^n / (n!)`这等于：

`exp(x) = 1 + x + (x^2)/2! + (x^3)/3! + (x^4)/4! + ...`

虽然这是无数项的总和，但您可以在前几项之后停下来获得近似解，尽管添加的项越多，答案就越接近。

在上面的表达式中，`x!`表示 的阶乘`x`：`x! = x * (x - 1) * (x - 2) * ... * 1`

所有必要的操作（`add`, `divide`, `pow`）都是为 定义的`BigDecimal`。

*编辑*：事实证明，Sigmoid 函数有自己的[Maclaurin 级数近似](http://mathworld.wolfram.com/SigmoidFunction.html)：

`1/(1 + exp(-x)) = 1/2 + 1/4 * x - 1/48 * x^3 + 1/480 x^5 - ...`

# api - 如何在 Steam WebAPI 中获取应用程序的价格？

> ID：13784059
> 
> 赞同：23
> 
> 时间：2012-12-09T02:23:36.553
> 
> 标签：api, steam, steam-web-api

是否有可能通过 WebAPI 从 Steam 获取游戏价格？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-03-10T01:23:06.830

目前，我们有一个 API 调用。这意味着我们可以使用[`JSON`](http://php.net/manual/en/book.json.php)它：

Appid 57690 = Tropico 4

*   [http://store.steampowered.com/api/appdetails?appids=57690](http://store.steampowered.com/api/appdetails?appids=57690)

部分回复：

```
"price_overview":{
    "currency":"EUR",
    "initial":2999,
    "final":2999,
    "discount_percent":0
} 
```

价格看起来您应该将 2999 转换为 29.99

完整回复：

```
{
   "57690":{
      "success":true,
      "data":{
         "type":"game",
         "name":"Tropico 4: Steam Special Edition",
         "steam_appid":"57690",
         "required_age":0,
         "dlc":[
            "205630",
            "205636",
            "205635",
            "205637",
            "205638",
            "205634",
            "205633",
            "205632",
            "57697",
            "57695",
            "57696"
         ],
         "detailed_description":"<h1>Sonderedition<\/h1><p>...inklusive einer exklusiven Insel (Isla Nublar), einem El Presidente Avatar-Kost\u00fcm (Luchador) und 50 Steam-Errungenschaften. El Presidente ist zur\u00fcck um alles zu beherrschen!<\/p><br><h1>\u00dcber das Spiel<\/h1>Die Zeiten \u00e4ndern sich! Gro\u00dfm\u00e4chte kommen und gehen und der Weltmarkt wird von neuen Global Playern beherrscht, mit neuen Anforderungen und Angeboten \u2013 und auch El Presidente muss sich neuen Herausforderungen stellen. Wenn Sie \u00fcber die Neinsager triumphieren wollen, m\u00fcssen Sie so viel Unterst\u00fctzung vom Volk bekommen, wie m\u00f6glich. Ihre Entscheidungen werden die Zukunft Ihrer Nation bestimmen und, noch viel wichtiger ist, die Gr\u00f6\u00dfe Ihres ausl\u00e4ndischen Bankverm\u00f6gens!\r<br>Tropico 4 bietet Ihnen erweiterte politische M\u00f6glichkeiten sowie zus\u00e4tzliche Superm\u00e4chte, mit denen Sie verhandeln k\u00f6nnen. Au\u00dferdem setzen Sie nun Minister ein, um Ihre etwas \u201eumstritteneren\u201c Vorhaben durchzusetzen. Aber denken Sie daran: Halten Sie Ihre Freunde nahe, aber Ihre Feinde noch n\u00e4her! Ihr politischer Eifer wird auf den Pr\u00fcfstand gestellt. Neue Naturkatastrophen sorgen daf\u00fcr, dass sich Ihr Volk nach Hilfe von Ihnen und Ihrem Kabinett gegen den Unmut von Mutter Natur sehnt.\r<br>Mit Facebook- und Twitter-Einbindung (nur auf Windows PC) hebt Tropico 4 auch die Interaktion auf ein neues Level. Verfassen Sie Kommentare f\u00fcr Twitter direkt aus dem Spiel heraus und versenden Sie automatisch Updates, wenn Sie Missionen abschlie\u00dfen oder neue Achievements freischalten. Au\u00dferdem k\u00f6nnen Sie Screenshots Ihres wachsenden Inselstaates machen und die Bilder Ihrer traumhaften Kreation auf Ihrer Tropico 4 Facebook-Seite posten sowie Ihre Diktator-Wertung auf den interaktiven Online-Ranglisten mit der von anderen Spielern vergleichen.<h2 class=\"bb_tag\">Eigenschaften:<\/h2><ul class=\"bb_ul\"><li>Umfangreiche Kampagne mit 20 Missionen und 10 neuen Karten \r<br><\/li><li>20 neue Geb\u00e4ude \u2013 B\u00f6rse, Einkaufszentrum, Wasserpark, Mausoleum etc.\r<br><\/li><li>Neue interaktive Desaster wie Vulkanausbr\u00fcche, D\u00fcrren oder Tornados \r<br><\/li><li>Der Ministerrat \u2013 berufen Sie ausgew\u00e4hlte Einwohner in den Ministerrat, um schwierige Entscheidungen &quot;durchzudr\u00fccken&quot; \r<br><\/li><li>National Agenda \u2013 erhalte Zielvorgaben von anderen Fraktionen oder ausl\u00e4ndischen Regierungen, die sich auf aktuelle Ereignisse beziehen\r<br><\/li><li>Facebook &amp; Twitter Integration \u2013 ver\u00f6ffentlicht Live-Tweeds direkt aus dem Spiel; speichert und zeigt Errungenschaften auf einer Tropico-4-Facebook-Seite an; Vergleiche deinen El Presidente mit dem von anderen Spielern (PC) \r<br><\/li><li>Screenshot Gallerie \u2013 Nehmen Sie Screenshots Ihrer tropischen Paradiesinseln auf und ver\u00f6ffentlichen Sie sie auf Ihrer Facebook Seite.\r<br><\/li><li>Neues Handels-System \u2013 Import und Export von Waren von anderen Nationen<\/li><\/ul>",
         "about_the_game":"Die Zeiten \u00e4ndern sich! Gro\u00dfm\u00e4chte kommen und gehen und der Weltmarkt wird von neuen Global Playern beherrscht, mit neuen Anforderungen und Angeboten \u2013 und auch El Presidente muss sich neuen Herausforderungen stellen. Wenn Sie \u00fcber die Neinsager triumphieren wollen, m\u00fcssen Sie so viel Unterst\u00fctzung vom Volk bekommen, wie m\u00f6glich. Ihre Entscheidungen werden die Zukunft Ihrer Nation bestimmen und, noch viel wichtiger ist, die Gr\u00f6\u00dfe Ihres ausl\u00e4ndischen Bankverm\u00f6gens!\r<br>Tropico 4 bietet Ihnen erweiterte politische M\u00f6glichkeiten sowie zus\u00e4tzliche Superm\u00e4chte, mit denen Sie verhandeln k\u00f6nnen. Au\u00dferdem setzen Sie nun Minister ein, um Ihre etwas \u201eumstritteneren\u201c Vorhaben durchzusetzen. Aber denken Sie daran: Halten Sie Ihre Freunde nahe, aber Ihre Feinde noch n\u00e4her! Ihr politischer Eifer wird auf den Pr\u00fcfstand gestellt. Neue Naturkatastrophen sorgen daf\u00fcr, dass sich Ihr Volk nach Hilfe von Ihnen und Ihrem Kabinett gegen den Unmut von Mutter Natur sehnt.\r<br>Mit Facebook- und Twitter-Einbindung (nur auf Windows PC) hebt Tropico 4 auch die Interaktion auf ein neues Level. Verfassen Sie Kommentare f\u00fcr Twitter direkt aus dem Spiel heraus und versenden Sie automatisch Updates, wenn Sie Missionen abschlie\u00dfen oder neue Achievements freischalten. Au\u00dferdem k\u00f6nnen Sie Screenshots Ihres wachsenden Inselstaates machen und die Bilder Ihrer traumhaften Kreation auf Ihrer Tropico 4 Facebook-Seite posten sowie Ihre Diktator-Wertung auf den interaktiven Online-Ranglisten mit der von anderen Spielern vergleichen.<h2 class=\"bb_tag\">Eigenschaften:<\/h2><ul class=\"bb_ul\"><li>Umfangreiche Kampagne mit 20 Missionen und 10 neuen Karten \r<br><\/li><li>20 neue Geb\u00e4ude \u2013 B\u00f6rse, Einkaufszentrum, Wasserpark, Mausoleum etc.\r<br><\/li><li>Neue interaktive Desaster wie Vulkanausbr\u00fcche, D\u00fcrren oder Tornados \r<br><\/li><li>Der Ministerrat \u2013 berufen Sie ausgew\u00e4hlte Einwohner in den Ministerrat, um schwierige Entscheidungen &quot;durchzudr\u00fccken&quot; \r<br><\/li><li>National Agenda \u2013 erhalte Zielvorgaben von anderen Fraktionen oder ausl\u00e4ndischen Regierungen, die sich auf aktuelle Ereignisse beziehen\r<br><\/li><li>Facebook &amp; Twitter Integration \u2013 ver\u00f6ffentlicht Live-Tweeds direkt aus dem Spiel; speichert und zeigt Errungenschaften auf einer Tropico-4-Facebook-Seite an; Vergleiche deinen El Presidente mit dem von anderen Spielern (PC) \r<br><\/li><li>Screenshot Gallerie \u2013 Nehmen Sie Screenshots Ihrer tropischen Paradiesinseln auf und ver\u00f6ffentlichen Sie sie auf Ihrer Facebook Seite.\r<br><\/li><li>Neues Handels-System \u2013 Import und Export von Waren von anderen Nationen<\/li><\/ul>",
         "supported_languages":"Englisch<strong>*<\/strong>, Franz\u00f6sisch<strong>*<\/strong>, Deutsch<strong>*<\/strong>, Italienisch<strong>*<\/strong>, Spanisch<strong>*<\/strong>, Koreanisch<br><strong>*<\/strong>Sprachen mit voller Audiounterst\u00fctzung",
         "reviews":"\u201cWillkommen im Paradies.\u201d\r<br>\u2013 <a href=\"http:\/\/www.gamesradar.com\/pc\/tropico-4\/preview\/e3-2011-tropico-4-preview-volcanoes-assassinations-and-oil-spills-welcome-to-paradise\/a-20110615155511892017\/g-20110202164557738087\" target=\"_blank\"  >Gamesradar<\/a>\r<br>\u201cDiese Fortsetzung wird auf dem aufbauen, was man in Haemimont's Tropico 3 genossen hat und mehr davon anbieten.\u201d\r<br>\u2013 <a href=\"http:\/\/gdc.gamespot.com\/story\/6302598\/spotlight-on-tropico-4-at-gdc-2011\" target=\"_blank\"  >GameSpot<\/a>",
         "header_image":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/header.jpg?t=1387657216",
         "website":"http:\/\/www.worldoftropico.com\/",
         "pc_requirements":{
            "minimum":"<ul class=\"bb_ul\"><li><strong>Betriebssystem:<\/strong> Windows XP SP3 (32-bit), Vista \/ 7 (32 oder 64-bit)\r<br><\/li><li><strong>Prozessor:<\/strong> 2 GHz Dual Core CPU\r<br><\/li><li><strong>Speicher:<\/strong> 1 GB RAM\r<br><\/li><li><strong>Grafik:<\/strong> Shadermodel 3.0 (Geforce 6600 oder h\u00f6her, Radeon X1600-Serie), 256 MB, DirectX 9.0c\r<br><\/li><li><strong>DirectX\u00ae:<\/strong> 9.0c\r<br><\/li><li><strong>Festplatte:<\/strong> 5 GB freier Festplattenspeicher\r<br><\/li><li><strong>Sound:<\/strong> DirectX kompatibel\r<\/li><\/ul>",
            "recommended":"<ul class=\"bb_ul\"><li><strong>Betriebssystem:<\/strong> Windows Vista \/ 7 (32 oder 64-bit)\r<br><\/li><li><strong>Prozessor:<\/strong> 2 GHz Quad Core CPU\r<br><\/li><li><strong>Speicher:<\/strong> 2 GB RAM\r<br><\/li><li><strong>Grafik:<\/strong> Shadermodel 3.0 (Geforce 8800 oder h\u00f6her, Radeon HD4000-Serie oder h\u00f6her), 512 MB, DirectX 9.0c\r<br><\/li><li><strong>DirectX\u00ae:<\/strong> 9.0c\r<br><\/li><li><strong>Festplatte:<\/strong> 5 GB freier Festplattenspeicher\r<br><\/li><li><strong>Sound:<\/strong> DirectX kompatibel\r<\/li><\/ul>"
         },
         "mac_requirements":[

         ],
         "linux_requirements":[

         ],
         "drm_notice":"Requires a free Kalypso account",
         "developers":[
            "Haemimont Games"
         ],
         "publishers":[
            "Kalypso Media Digital"
         ],
         "demos":[
            {
               "appid":"57750",
               "description":""
            }
         ],
         "price_overview":{
            "currency":"EUR",
            "initial":2999,
            "final":2999,
            "discount_percent":0
         },
         "packages":[
            "11400",
            "19282",
            "1891",
            "2128"
         ],
         "package_groups":[
            {
               "name":"default",
               "title":"Tropico 4: Steam Special Edition kaufen",
               "description":"",
               "selection_text":"Kaufoption ausw\u00e4hlen",
               "save_text":"",
               "display_type":"0",
               "is_recurring_subscription":"false",
               "subs":[
                  {
                     "packageid":"11400",
                     "percent_savings_text":"",
                     "percent_savings":0,
                     "option_text":"Tropico 4 - 29,99\u20ac ",
                     "option_description":""
                  },
                  {
                     "packageid":"19282",
                     "percent_savings_text":"",
                     "percent_savings":0,
                     "option_text":"Tropico 4 Collector's Bundle - 39,99\u20ac ",
                     "option_description":""
                  },
                  {
                     "packageid":"1891",
                     "percent_savings_text":"",
                     "percent_savings":0,
                     "option_text":"Tropico Reloaded - 6,99\u20ac ",
                     "option_description":""
                  },
                  {
                     "packageid":"2128",
                     "percent_savings_text":"",
                     "percent_savings":0,
                     "option_text":"Tropico 3 - 9,99\u20ac ",
                     "option_description":""
                  }
               ]
            }
         ],
         "platforms":{
            "windows":true,
            "mac":false,
            "linux":false
         },
         "metacritic":{
            "score":78,
            "url":"http:\/\/www.metacritic.com\/game\/pc\/tropico-4"
         },
         "categories":[
            {
               "id":"2",
               "description":"Einzelspieler"
            },
            {
               "id":"29",
               "description":"Steam-Sammelkarten"
            }
         ],
         "genres":[
            {
               "id":"28",
               "description":"Simulation"
            },
            {
               "id":"2",
               "description":"Strategie"
            }
         ],
         "screenshots":[
            {
               "id":0,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_833be037c67d21af2777a0066d278891d0f2adbb.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_833be037c67d21af2777a0066d278891d0f2adbb.1920x1080.jpg?t=1387657216"
            },
            {
               "id":1,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_8b9cb3571d92cbe2efbf091a6c192c366dd81a74.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_8b9cb3571d92cbe2efbf091a6c192c366dd81a74.1920x1080.jpg?t=1387657216"
            },
            {
               "id":2,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_8b95fda44ffdbb4fb76b1629fdd1d0cc4bf288dd.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_8b95fda44ffdbb4fb76b1629fdd1d0cc4bf288dd.1920x1080.jpg?t=1387657216"
            },
            {
               "id":3,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_850d6465eef278d3a4dc44121b25d338720ff35d.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_850d6465eef278d3a4dc44121b25d338720ff35d.1920x1080.jpg?t=1387657216"
            },
            {
               "id":4,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_c65dcb77d525880ed5c99b58a07d8c27d44f8c0d.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_c65dcb77d525880ed5c99b58a07d8c27d44f8c0d.1920x1080.jpg?t=1387657216"
            },
            {
               "id":5,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_3f5971572fdd8f31f738121df95d51fcb2cfa14f.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_3f5971572fdd8f31f738121df95d51fcb2cfa14f.1920x1080.jpg?t=1387657216"
            },
            {
               "id":6,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_171d661336b3761a3f1ace44af0e198ce16ffdd0.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_171d661336b3761a3f1ace44af0e198ce16ffdd0.1920x1080.jpg?t=1387657216"
            },
            {
               "id":7,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_705c724eae6f1abc743d1ae6deff66722cd57f50.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_705c724eae6f1abc743d1ae6deff66722cd57f50.1920x1080.jpg?t=1387657216"
            },
            {
               "id":8,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_e8d28c65adc8c7659377db890d98748dc835d3fa.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_e8d28c65adc8c7659377db890d98748dc835d3fa.1920x1080.jpg?t=1387657216"
            },
            {
               "id":9,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_3017c40b6c0dff7fcb1abea515627e4a2c813ad9.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_3017c40b6c0dff7fcb1abea515627e4a2c813ad9.1920x1080.jpg?t=1387657216"
            },
            {
               "id":10,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_f435b4376629784b5d4cd8657f7eb2a9883d554c.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_f435b4376629784b5d4cd8657f7eb2a9883d554c.1920x1080.jpg?t=1387657216"
            },
            {
               "id":11,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_eeb9d00e103d98a1edee392e633d88a88f2d10c2.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_eeb9d00e103d98a1edee392e633d88a88f2d10c2.1920x1080.jpg?t=1387657216"
            },
            {
               "id":12,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_7214b3771fd452007a4c7a36b46abba453c8b835.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_7214b3771fd452007a4c7a36b46abba453c8b835.1920x1080.jpg?t=1387657216"
            },
            {
               "id":13,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_99e847d54bafb0b7c56402851ce55493dc7de593.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_99e847d54bafb0b7c56402851ce55493dc7de593.1920x1080.jpg?t=1387657216"
            },
            {
               "id":14,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_480451bdd44a1d900dd200d467164d753bde2163.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_480451bdd44a1d900dd200d467164d753bde2163.1920x1080.jpg?t=1387657216"
            },
            {
               "id":15,
               "path_thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_01eeca8397b145c18f170ccb47d7a8cc228daad1.600x338.jpg?t=1387657216",
               "path_full":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/57690\/ss_01eeca8397b145c18f170ccb47d7a8cc228daad1.1920x1080.jpg?t=1387657216"
            }
         ],
         "movies":[
            {
               "id":"80906",
               "name":"Tropico 4 Coming Soon Trailer",
               "thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/80906\/movie.293x165.jpg?t=1379336376",
               "webm":{
                  "480":"http:\/\/media3.steampowered.com\/steam\/apps\/80906\/movie480.webm?t=1379336376",
                  "max":"http:\/\/media3.steampowered.com\/steam\/apps\/80906\/movie_max.webm?t=1379336376"
               },
               "highlight":true
            },
            {
               "id":"2029441",
               "name":"Tropico 4 Gameplay Trailer",
               "thumbnail":"http:\/\/cdn4.steampowered.com\/v\/gfx\/apps\/2029441\/movie.jpg?t=1379337116",
               "webm":{
                  "480":"http:\/\/media3.steampowered.com\/steam\/apps\/2029441\/movie480.webm?t=1379337116",
                  "max":"http:\/\/media3.steampowered.com\/steam\/apps\/2029441\/movie_max.webm?t=1379337116"
               },
               "highlight":true
            }
         ],
         "recommendations":{
            "total":7374
         },
         "achievements":{
            "total":0
         },
         "release_date":{
            "coming_soon":false,
            "date":"1 Sep. 2011"
         },
         "support_info":{
            "url":"",
            "email":"support@kalypsomedia.com"
         }
      }
   }
} 
```

但免责声明：这不是官方的公共 API。这是 Steam 大画面模式的一种实现，可以随时更改。

您可以使用此 API 获取所有应用程序（游戏）及其 ID：

*   [http://api.steampowered.com/ISteamApps/GetAppList/v0001/](http://api.steampowered.com/ISteamApps/GetAppList/v0001/)

您将获得几乎所有关于游戏所需的信息（包括屏幕截图）。

**货币代码和语言**

您可以通过添加参数来更改货币代码`cc`。可以使用参数更改语言`l`。

例如：

*   [http://store.steampowered.com/api/appdetails?appids=57690&cc=us&l=en](http://store.steampowered.com/api/appdetails?appids=57690&cc=us&l=en)
*   [http://store.steampowered.com/api/appdetails?appids=57690&cc=gb&l=en](http://store.steampowered.com/api/appdetails?appids=57690&cc=gb&l=en)
*   [http://store.steampowered.com/api/appdetails?appids=57690&cc=de&l=de](http://store.steampowered.com/api/appdetails?appids=57690&cc=de&l=de)

重要的：

如果它似乎没有改变任何东西，您很可能在当前浏览器中使用您的用户帐户登录了 Steam。使用另一个。

**文档**

这是一个非官方链接，描述了当前已知的 Store API（仍然不公开，可以随时更改！）：

*   [https://wiki.teamfortress.com/wiki/User:RJackson/StorefrontAPI#Known_methods](https://wiki.teamfortress.com/wiki/User:RJackson/StorefrontAPI#Known_methods)

# java - 从微调器启动活动和新活动不会启动另一个 - Android 开发

> ID：13784060
> 
> 赞同：1
> 
> 时间：2012-12-09T02:23:44.530
> 
> 标签：java, android, android-intent, spinner, manifest

我已经关注了其他一些问题并将其拼凑起来得到这个：

```
 public class FbFPS extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fbhtf);

        ArrayAdapter<CharSequence> adapter = ArrayAdapter
                .createFromResource(this, R.array.spagesarray,
                        android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        Spinner s = (Spinner) findViewById(R.id.spages);

        s.setAdapter(adapter);

        s.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id) {
                // Display Selected option
                if (parent.getItemAtPosition(pos).toString()
                        .equals("Under 16s Reccommended Settings")) {
                    Intent i = new Intent(getApplicationContext(),
                            FbU16RS.class);
                    startActivity(i);
                    finish();
                }

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

            }

        });

        s.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id) {
                // Display Selected option
                if (parent.getItemAtPosition(pos).toString()
                        .equals("Recommended Privacy Settings")) {
                    Intent i = new Intent(getApplicationContext(), FbRS.class);
                    startActivity(i);
                    finish();
                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

            }

        });

    }
} 
```

还有两个类似的活动，但它们指向剩余的两个活动。所以基本上是这样的：

```
s.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                int pos, long id) {
            // Display Selected option
            if (parent.getItemAtPosition(pos).toString()
                    .equals("Recommended Privacy Settings")) {
                Intent i = new Intent(getApplicationContext(), FbRS.class);
                startActivity(i);
                finish();
            }
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {

        }

    }); 
```

每次活动两次。清单中提到了它们，并且 xml 是正确的。虽然它打开了最后一个选项，但确实打开了另一个选项，但它真的很奇怪。当在那个开始的时候，它不会打开任何......

我哪里错了？我也愿意接受任何更简单的方法。：） 提前致谢。

**编辑：**

好的，我已经在所有 3 个活动上进行了更改，现在它似乎在我选择的任何内容上都打开了相同的活动。这是代码：

```
 public class FbRS extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fbhtf);

        final Intent iFbHTF = new Intent(FbRS.this, FbHTF.class);
        final Intent iFbU16RS = new Intent(FbRS.this, FbU16RS.class);

        ArrayAdapter<CharSequence> adapter = ArrayAdapter
                .createFromResource(this, R.array.spagesarray,
                        android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        Spinner s = (Spinner) findViewById(R.id.spages);

        s.setAdapter(adapter);

        s.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id) {
                if (parent.getItemAtPosition(pos).toString()
                        .equals("Finding Privacy Settings")) {
                    startActivity(iFbHTF);
                    finish();
                } else if (parent.getItemAtPosition(pos).toString()
                        .equals("Under 16s Recommended Privacy Settings")) {
                    startActivity(iFbU16RS);
                    finish();
                }

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

            }

        });

    }
} 
```

这里还有清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.timmo.isp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.timmo.isp.Home"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.timmo.isp.FbHTF"
            android:label="@string/titleFbHTF"
            android:parentActivityName="com.timmo.isp.Home" >
        </activity>
        <activity
            android:name="com.timmo.isp.FbU16RS"
            android:label="@string/titleFbU16RS"
            android:parentActivityName="com.timmo.isp.Home" >
        </activity>
        <activity
            android:name="com.timmo.isp.FbRS"
            android:label="@string/titleFbRS"
            android:parentActivityName="com.timmo.isp.Home" >
        </activity>
        <activity
            android:name="com.timmo.isp.FYMNK"
            android:label="@string/titlefymnk"
            android:parentActivityName="com.timmo.isp.Home" >
        </activity>
    </application>

</manifest> 
```

我认为它到达那里希望感谢 AndroidPenguin 和 kongkea 的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T02:45:31.910

下面是您想要的代码，尽管括号可能太多或太少。基本上只有一个 onitemselectedlistener 会被调用。所以把两者放在一个。

```
public class FbFPS extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.fbhtf);

ArrayAdapter<CharSequence> adapter = ArrayAdapter
        .createFromResource(this, R.array.spagesarray,
                android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

Spinner s = (Spinner) findViewById(R.id.spages);

s.setAdapter(adapter);

s.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> parent, View view,
            int pos, long id) {
        // Display Selected option
        if (parent.getItemAtPosition(pos).toString()
                .equals("Under 16s Reccommended Settings")) {
            Intent i = new Intent(getApplicationContext(),
                    FbU16RS.class);
            startActivity(i);
            finish();
        } else if (parent.getItemAtPosition(pos).toString()
                .equals("Recommended Privacy Settings")) {
            Intent i = new Intent(getApplicationContext(), FbRS.class);
            startActivity(i);
            finish();
        }

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {

    }

});

}
} 
```

如果您愿意，您还可以使用 id/位置编号和开关和大小写来清理您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T02:48:51.960

FBFPS 活动

`Intent i = new Intent(FBFPS.this, FbU16RS.class);`

在上面的 onClickListener 上。像 FBFPS 活动一样做。设置活动的当前名称 `Intent i = new Intent(your current activity name.this, FbRS.class);`

在 Manifest 中，在应用程序标签中添加所有 Activity 类名称

```
<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".ToDoListActivity" // Main activity
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name=".your activity name">
    </activity>
    <activity 
        android:name=".your activity name>
    </activity>

</application> 
```

# c++ - 将文件转换为字符串数组 C++

> ID：13784062
> 
> 赞同：1
> 
> 时间：2012-12-09T02:23:50.287
> 
> 标签：c++

我需要读取一个文件并将其转换为一个字符串数组，但是当它读取文件时它不会在数组中放入任何内容。这是我当前的代码：

```
string code[200];
string name;
int lines;
string filename;
int readfile(){
  ifstream inFile;
  int counter = 0;
  cout << "Which file would you like to open?\n";
  cin >> filename;
  countlines();//counts total lines of file
  inFile.open(filename);
  if(inFile.fail())
  {
    cout << "File did not open correctly, please check it\n";
    system("pause");
    exit(0);
    //return 1;
  }
  inFile >> name;
  for (int i=0;i < lines; i++)
  {
    inFile >> code[i];
    if (!inFile)
      cout << "Error" << endl;
    break;
  }
  inFile.close();
  cout << "Now opened: " << name << endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T02:47:47.630

```
#include <vector>
#include <string>
#include <fstream>
#include <iostream>

using namespace std;

vector<string> lines;

bool readFile(string filename){
    ifstream file;
    string line;

    file.open(filename.c_str());

    if(!file.is_open()){
        return false;
    }

    while (getline(file, line)) {
        lines.push_back(line);
    }

    return true;
}

int main(){
    readFile("test.txt");

    for(int i = 0; i < lines.size(); ++i){
        cout << lines[i] << endl;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T02:40:45.333

这是一个更简单的行读取实现，如果文件超过 200 行，它不会崩溃：

```
vector<string> code;
string s;
while (getline(inFile, s)) {
    code.push_back(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T02:56:18.083

你需要改变

```
inFile.open(filename); 
```

到：

```
inFile.open(filename.c_str()); 
```

# html - 调整窗口大小时 HTML 类改变位置

> ID：13784072
> 
> 赞同：1
> 
> 时间：2012-12-09T02:25:50.607
> 
> 标签：html, css, web

我正在尝试设计一个简单的网页，其设计看起来像[这样](http://i.stack.imgur.com/OLLfS.jpg)。

但是我也试图让网站适合几乎任何大小的窗口，当发生这种情况时，当窗口大小小于这两个窗口的宽度时，`.gameInfo`类会跳到类的顶部，所以结果最终看起来`.playerList`像[这样](http://i.stack.imgur.com/APHBk.png)。

显然，这看起来很丑陋，我的目标是尽可能地`.gameInfo`平行`.playerList`。我的以下代码如下所示：

**索引.html**：

```
 <body>
    <div id="container">
        <div class="gameState">
        </div>

        <div class="gameInfo">
        </div>

        <div class="playerList">
        </div>
    </div>
</body> 
```

**样式.css**

```
body{
    background-color: #FAF7F8;
    font-family: "Calibri",  sans-serif;
    margin: 0px;
    padding: 0px;
}

#container{
    width: 89%;
    margin: 0 auto;
}

.playerList{
    float: right;
    background-color: #EDEDED;
    border: 1px solid;
    border-color: #D4D4D4;
    width: 123px;
    height: 340px;
    text-align: center;
    font-size: 45px;
    color: black;
}

.gameInfo{
    float: left;
    width: 89%;
    background-color: #EDEDED;
    border: 1px solid;
    border-color: #D4D4D4;
    height: 340px;
}

.gameState{
    background-color: #EDEDED;
    margin: 12px auto 12px auto;
    border: 1px solid;
    border-color: #D4D4D4;
    width: 100%;
    height: 64px;
    text-align: center;
    font-size: 45px;
    color: black;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T02:32:55.323

好吧，你混合了固定宽度和基于百分比的宽度，所以我认为这是一种预期的行为。

如果`.gameInfo`有 89% 的页面，那么`.playerList`最多会得到 11%。问题是它`.playerList`有一个固定的宽度（123px），所以，当它大于页面的 11% 时，`.gameInfo`它不会与它并排放置。

**编辑：** 这是一个适当的流体固定布局：

```
<body>
    <div id="container">
        <div class="gameState"></div>
        <div class="playerList"></div>
        <div class="gameInfo"></div>
    </div>
</body>​

body{
    background-color: #FAF7F8;
    font-family: "Calibri",  sans-serif;
    margin: 0px;
    padding: 0px;
}

#container{
    width: 89%;
    margin: 0 auto;
}

.playerList{
    float: right;
    background-color: #EDEDED;
    border: 1px solid;
    border-color: #D4D4D4;
    width: 123px;
    height: 340px;
    text-align: center;
    font-size: 45px;
    color: black;
}

.gameInfo{
    margin-right: 130px;
    background-color: #EDEDED;
    border: 1px solid;
    border-color: #D4D4D4;
    height: 340px;
}

.gameState{
    background-color: #EDEDED;
    margin: 12px auto 12px auto;
    border: 1px solid;
    border-color: #D4D4D4;
    width: 100%;
    height: 64px;
    text-align: center;
    font-size: 45px;
    color: black;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T02:37:52.320

如果您希望页面响应，您可以使用@media 查询来解决此问题。

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

这样，您可以设置或更改浏览器在一定尺寸下的尺寸和位置。这很容易，也是当今的趋势之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T02:39:34.587

问题是你混合了两种宽度，像素和百分比。当你缩放浏览器窗口和容器 div 时，你留给你的 11%`.playerList`会比`123px`某个时候少。

我要说的最简单的解决方案是给`.gameInfo`a (由于边框而`margin-right:30px;`比宽度多一点，并在它们之间留一点空间。您还必须删除 的 width 和 float 属性，以便它出现在下一个并占用所有水平可用的空间（并且您必须使浮动在html中排在第一位）。`.playerInfo``.gameInfo``.playerInfo``.playerInfo`

在此处查看您提到的更改的代码：http: [//jsfiddle.net/qyKny/7/](http://jsfiddle.net/qyKny/7/)

编辑：一分钟前与 rdiazv 相同的解决方案，但我将把它留在这里以获得更广泛的解释和 jsfiddle 链接。

# c# - 通过 WCF Web 服务将数据设置到 ADO 数据库

> ID：13784075
> 
> 赞同：2
> 
> 时间：2012-12-09T02:26:22.617
> 
> 标签：c#, wcf, exception-handling, insert, ado.net

我正在尝试创建一个应用程序，我可以在其中通过 Web 服务将数据插入数据库。我与我的 ADO 数据库有良好的连接，但是当我尝试将信息从我的主应用程序发送到我的 Web 服务时，我收到以下错误。

> 在 ServiceModel 客户端配置部分中找不到引用合同“MathServiceReference.IMathService”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此协定匹配的端点元素。

我的主应用

```
protected void btnMultiply_Click(object sender, EventArgs e)
{
    ServiceReference1.MathServiceClient client = new ServiceReference1.MathServiceClient();
    txtSvar.Text = client.Multiply(int.Parse(txtTal2.Text)).ToString();
} 
```

我的 Wwb 服务班

```
public int Multiply(int box2)
{
    if (box2 == null)
    {
        return 1;
    }
    else
    {
        koppling db = new koppling();
        var testet = new tests();
        testet.namn = box2.ToString();
        db.tests1.AddObject(testet);
        db.SaveChanges();
        return 2;
    }
} 
```

我的 WCF 配置：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T09:09:05.187

您的 WCF 配置缺少端点，至少一个，例如：

```
<system.serviceModel>
    <services>
        <service name="MathService">
            <endpoint binding="netTcpBinding" contract="MathServiceReference.IMathService" />
        </service>
    </services>
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T02:37:30.370

请参见以下代码示例：

```
var jokeService = new JokeOfTheDayServiceClient();
jokeService.GetJokeCompleted += (s,e) =< jokeService_GetJokeCompleted;

private void jokeService_GetJokeCompleted(object sender, GetJokeCompletedEventArgs e)
{
    if (!e.Cancelled)
    {
        jokeTextBlock.Text = e.Result;
    }
} 
```

看来您的问题是您需要在客户端完成通信时调用“已完成”功能。如果您尝试立即访问它，网络可能尚未完成信息通信。

# sql - 无法重现此 [ODBC Microsoft Access Driver] 语法错误

> ID：13784077
> 
> 赞同：1
> 
> 时间：2012-12-09T02:26:25.223
> 
> 标签：sql, ms-access, coldfusion, coldfusion-9

这个让我难住了。我的三个客户收到了这个错误，但我无法重现它！

> [Macromedia][SequeLink JDBC Driver][ODBC Socket][Microsoft][ODBC Microsoft Access Driver] INSERT INTO 语句中的语法错误。

**一般来说**，什么会导致谁收到这种数据库错误的差异，什么样的问题会阻止我最终复制它？

这是我认为导致错误的代码位：

```
<cfquery 
name="rsAddSKUs" 
datasource="#request.dsn#" 
username="#request.dsnUsername#" 
password="#request.dsnPassword#">
    INSERT INTO 
    tbl_orderskus 
        ( orderSKU_OrderID
        , orderSKU_SKU
        , orderSKU_Quantity
        , orderSKU_UnitPrice
        , orderSKU_SKUTotal
        , orderSKU_Picked
        , orderSKU_TaxRate
        , orderSKU_DiscountID
        , orderSKU_DiscountAmount)
    VALUES 
        ('#var.ThisOrderID#'
        , #rsGetCart.SKU_ID#
        , #rsGetCart.Qty#
        , #rsGetCart.SKU_Price#
        , #SKUTotal#
        , 0
        , #var.thisProductTax#
        , #var.thisDiscountID#
        , #var.thisdiscountAmount#)
</cfquery> 
```

谢谢，比斯科蒂

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T02:28:42.963

您能否将“插入”命令记录到日志文件中，然后让您的客户让他们向您发送日志文件以查看有问题的插入命令是什么？

我在想如果插入命令取决于用户输入，那么他们可能会输入一些奇怪的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T03:20:23.163

我的第一个倾向是其中一个数字字段是空白的，并且插入语句试图插入一个 , 而不是一个值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T03:47:30.183

将所有数值包装起来，[`val()`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6e64.html)以便获得 0 而不是空字符串。

# python - Twitter API获取大量关注者ID，而不会出错

> ID：13784078
> 
> 赞同：2
> 
> 时间：2012-12-09T02:26:32.070
> 
> 标签：python, ruby, twitter, mysql-python

[我使用 Python 和 ruby​​ gem twurl 来请求 OAuth。]

我正在尝试从 Twitter 获取 @BarackObama 的关注者 ID，他目前拥有 24,265,751 名关注者。从数学上讲，24,265,751 /5000/350 需要 13.8 小时来收集，如果我们给它一个小时的余量，这大约是 14-15 小时。

每次我尝试用我的代码收集它时，它都会在分页时出现错误。当我收到错误后重新开始收集时，它会查看不同的页面，因此它收集的内容比我预期的要多。

我想知道我的工作是否有问题，或者我的代码架构有缺陷。这是我要使用的功能；

```
def request_followers(namevar, name, candidate_id, id_str):
    next_cursor = -1
    cmd = 'twurl "/1/followers/ids.json?cursor=-1&screen_name=' + namevar + '"'
    data = fol_req(cmd)

    /*code to add data into database as soon as it gets the data.*/

    try:
        if (data.get('ids')):
        while (len(data.get('ids')) == 5000):
        next_cursor = data['next_cursor']
        followers_request = 'twurl "/1/followers/ids.json?cursor=' + str(next_cursor) + '&screen_name=' + namevar+'"'
        try:
            data = fol_req(followers_request)
            /*code to add data into database as soon as it gets the data.*/
            except:
            time.sleep(5)
            continue # if error, retry after 5 sec.
    except:
        print "error on", followers_request
        check_list.append(followers_request) 
```

这是要有分页，并且

```
def fol_req(followers_request):
    request_limit = remainingHits()
    attempt = 0
    data = {}
    while (attempt < request_limit-1) and not(data.get('ids')):
        try:
            attempt += 1
            (status, output) = commands.getstatusoutput(followers_request)
            if status:
                sys.stderr.write(output)
                sys.exit(1)
            data = json.loads(output)
        except:
            continue
        break
    else:
        request_limit = remainingHits()
        time.sleep(1200)
        data = fol_req(followers_request)   
    return data 
```

这是使用 twurl 和 python sys 请求的。

我的架构在某些方面是错误的吗？

# jquery - 用户端数据的 Ajax 请求侦听器

> ID：13784082
> 
> 赞同：3
> 
> 时间：2012-12-09T02:27:21.853
> 
> 标签：jquery, mysql, ajax, listener

我正在创建一个聊天程序。这个聊天程序有两个方面（客户端和用户）。所有数据都进入数据库（mysql）。目前，聊天工作正常。每一面类型，我都有一个侦听器函数，它使用 ajax 每秒或每两秒钟将数据库文件加载到窗口中。

问题是，这占用了太多带宽！

我正在考虑在设定的持续时间后终止聊天，或者我在想有一种方法可以仅在事件发生时更新。

理想情况下，这在我看来效果最好：

如果用户输入了新数据，那么客户端会检测到它，然后它会激活仅在那个时候更新聊天窗口的功能。

在 ajax/jquery/javascript 中是否存在这样的东西来监听？

这是我目前用来收听的代码：

```
/* set interval of listener */ 

 setInterval(function() {
listen()
}, 2500);

 /* actual listener */

 function listen(){
    /* send listen via post ajax */
    $.post("listenuser.php", {
        chatsession: $('#chatsession').val(),       
/* Do some other things after response and then update the chat window with response content from database window */
    }, function(response){
        $('#loadingchat').hide();
         $('#chatcontent').show();
        $('#messagewindow').show();
        setTimeout("finishAjax('messagewindow', '"+escape(response)+"')", 450);
    });
    return false; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T04:23:30.883

有很多方法可以做到这一点，但看看你的设计，我建议使用一种称为 Comet 的技术，基本上是一种让 Web 服务器“发送”数据到客户端而无需客户端请求它的方法。根据我的观点，如果您阅读代码，那是一种黑客行为。但这里有一个例子，我发现如何使用一个简单的文本文件来实现这个：

服务器

```
<?php

  $filename  = dirname(__FILE__).'/data.txt';

  // store new message in the file
  $msg = isset($_GET['msg']) ? $_GET['msg'] : '';
  if ($msg != '')
  {
    file_put_contents($filename,$msg);
    die();
  }

  // infinite loop until the data file is not modified
  $lastmodif    = isset($_GET['timestamp']) ? $_GET['timestamp'] : 0;
  $currentmodif = filemtime($filename);
  while ($currentmodif <= $lastmodif) // check if the data file has been modified
  {
    usleep(10000); // sleep 10ms to unload the CPU
    clearstatcache();
    $currentmodif = filemtime($filename);
  }

  // return a json array
  $response = array();
  $response['msg']       = file_get_contents($filename);
  $response['timestamp'] = $currentmodif;
  echo json_encode($response);
  flush();

?> 
```

客户：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Comet demo</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="prototype.js"></script>
</head>
<body>

<div id="content">
</div>

<p>
<form action="" method="get" onsubmit="comet.doRequest($('word').value);$('word').value='';return false;">
    <input type="text" name="word" id="word" value="" />
    <input type="submit" name="submit" value="Send" />
</form>
</p>

<script type="text/javascript">
    var Comet = Class.create();
    Comet.prototype = {

        timestamp: 0,
        url: './backend.php',
        noerror: true,

        initialize: function() { },

        connect: function()
        {
            this.ajax = new Ajax.Request(this.url, {
                method: 'get',
                parameters: { 'timestamp' : this.timestamp },
                onSuccess: function(transport) {
                    // handle the server response
                    var response = transport.responseText.evalJSON();
                    this.comet.timestamp = response['timestamp'];
                    this.comet.handleResponse(response);
                    this.comet.noerror = true;
                },
                onComplete: function(transport) {
                    // send a new ajax request when this request is finished
                    if (!this.comet.noerror)
                    // if a connection problem occurs, try to reconnect each 5 seconds
                        setTimeout(function(){ comet.connect() }, 5000);
                    else
                        this.comet.connect();
                    this.comet.noerror = false;
                }
            });
            this.ajax.comet = this;
        },

        disconnect: function()
        {
        },

        handleResponse: function(response)
        {
            $('content').innerHTML += '<div>' + response['msg'] + '</div>';
        },

        doRequest: function(request)
        {
            new Ajax.Request(this.url, {
                method: 'get',
                parameters: { 'msg' : request
                });
        }
    }
    var comet = new Comet();
    comet.connect();
</script>

</body>
</html> 
```

我希望它有所帮助。

这是一个包含更多示例和一些文档的 URL（我从这里获得了示例）： [http ://www.zeitoun.net/articles/comet_and_php/start](http://www.zeitoun.net/articles/comet_and_php/start)

# android - 以编程方式设置 PopupMenu 菜单项

> ID：13784088
> 
> 赞同：77
> 
> 时间：2012-12-09T02:28:28.640
> 
> 标签：android, android-menu

我有一个`PopupMenu`并且我知道将菜单与其关联的通常方法是使用`popup.getMenuInflater().inflate(R.menu.my_menu, popup.getMenu());`或类似的东西。我的问题是，我在菜单中有一组我想要的项目，我需要能够在 Java 中以编程方式更改它们。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-12-09T02:53:37.600

刚刚想通了；对于遇到同样问题的任何人，您只需执行以下操作：

```
popup.getMenu().add(groupId, itemId, order, title); 
```

对于`MenuItem`您要添加的每个。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-01-12T09:11:40.333

只需创建弹出菜单，注册弹出窗口将在下面显示的视图，然后使用 getMenu() 方法添加值。不要忘记调用 show();

```
PopupMenu menu = new PopupMenu(this, view);

menu.getMenu().add("titleRes");
menu.show(); 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-12-07T04:39:46.493

尝试这个：

```
Dynamic_PopUpMenu.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        PopupMenu menu = new PopupMenu(DialogCheckBox.this, v);
        menu.getMenu().add("AGIL");         
        menu.getMenu().add("AGILarasan");
        menu.getMenu().add("Arasan");
        menu.show();
    }
}); 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-12-28T14:24:16.760

在 popupmenu.xml 中定义 id

```
<?xml version="1.0" encoding="utf-8"?>
    <menu xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto">

        <item
            android:id="@+id/slot1"
            app:showAsAction="ifRoom|withText"
            android:title="Movies"
            android:visible="true"/>
        <item
            android:id="@+id/slot2"
            app:showAsAction="ifRoom|withText"
            android:title="Music"
            android:visible="true"/>
        <item
            android:id="@+id/slot3"
            app:showAsAction="ifRoom|withText"
            android:title="Comedy"
            android:visible="true"/>

</menu> 
```

```
PopupMenu popupMenu = new PopupMenu(FullMenuActivity.this, view);                      
popupMenu.setOnMenuItemClickListener(FullMenuActivity.this);
popupMenu.getMenu().add(1, R.id.slot1, 1, "slot1");
popupMenu.getMenu().add(1,R.id.slot2,2,"slot2");
popupMenu.getMenu().add(1,R.id.slot3,3,"slot3");
popupMenu.show(); 
```

```
 @Override
    public boolean onMenuItemClick(MenuItem item) {

        switch (item.getItemId()) {
            case R.id.slot1:
                SessionManager.selected_slot = item.getTitle().toString();
                Toast.makeText(this, "slot1 Clicked", Toast.LENGTH_SHORT).show();
                return true;
            case R.id.slot2:
                SessionManager.selected_slot = item.getTitle().toString();
                Toast.makeText(this, "slot2 Clicked", Toast.LENGTH_SHORT).show();
                return true;
            case R.id.slot3:
                SessionManager.selected_slot = item.getTitle().toString();
                Toast.makeText(this, "slot3 Clicked", Toast.LENGTH_SHORT).show();
                return true;
            default:
                return true;
        }
    } 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-09-18T15:40:24.113

这是一个设置和处理 ID 的完整解决方案：

```
 this.findViewById(R.id.hamburger_menu).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
            PopupMenu menu = new PopupMenu(getApplicationContext(), v);
            menu.getMenu().add(Menu.NONE, 1, 1, "Share");
            menu.getMenu().add(Menu.NONE, 2, 2, "Comment");
            menu.show();

            menu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
                @Override
                public boolean onMenuItemClick(MenuItem item) {

                    int i = item.getItemId();
                    if (i == 1) {
                        //handle share
                        return true;
                    } else if (i == 2) {
                        //handle comment
                        return true;
                    } else {
                        return false;
                    }
                } 

            });
         }
     }); 
```

**注意：**例如分享和评论，也可以为数字 1,2 放置常量，以使代码更具可读性。

另外，我放`Menu.NONE`是因为我不关心对菜单项进行分组。如果您想让组设置组 id = 1、2 等...

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-09-06T08:16:31.473

@Voora Tarun 给出了一个很好的答案，我的答案基于它：首先使用假`mune.xml`资源，我认为更好的方法是创建`ids`文件：

`ids.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item name="menuGroup" type="id"/>
    <item name="menu1" type="id"/>
    <item name="menu2" type="id"/>
    <item name="menu3" type="id"/>
</resources> 
```

然后你可以做这样的事情：

```
private void showPopup(final View anchor) {
        PopupMenu popupMenu = new PopupMenu(anchor.getContext(), anchor);
        popupMenu.getMenu().add(R.id.menuGroup, R.id.menu1, Menu.NONE, "slot1");
        popupMenu.getMenu().add(R.id.menuGroup, R.id.menu2, Menu.NONE,"slot2");
        popupMenu.getMenu().add(R.id.menuGroup, R.id.menu3, Menu.NONE,"slot3");
        popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
            @Override
            public boolean onMenuItemClick(MenuItem item) {
                Toast.makeText(anchor.getContext(), item.getTitle() + "clicked", Toast.LENGTH_SHORT).show();
                return true;
            }
        });
        popupMenu.show();
    } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-09-17T10:13:44.813

**在java中**

```
 private void getPopup(Activity sContext,TextView textView, ArrayList<String> arrayList) {
            final PopupMenu popupMenu = new PopupMenu(sContext, textView);
            for (int i = 0; i < arrayList.size(); i++) {
                popupMenu.getMenu().add(i, Menu.FIRST, i, arrayList.get(i));
            }
            popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
                @Override
                public boolean onMenuItemClick(MenuItem item) {
                    textView.setText(item.getTitle());
                    return false;
                }
            });
            popupMenu.show();
        } 
```

**在科特林**

```
private fun getPopup(
    sContext: Activity,
    textView: TextView,
    arrayList: ArrayList<String>
) {
    val popupMenu = PopupMenu(sContext, textView)
    for (i in 0 until arrayList.size) {
        popupMenu.getMenu().add(i, Menu.FIRST, i, arrayList[i])
    }
    popupMenu.setOnMenuItemClickListener(object : 
        PopupMenu.OnMenuItemClickListener {
        override fun onMenuItemClick(item: MenuItem): Boolean {
            textView.setText(item.getTitle())
            return false
        }
    })
    popupMenu.show()
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-21T04:09:25.230

如果您正在寻找带有回调的生成弹出项目，请使用此。

**爪哇**

```
public static void popupMenu(final Context context, View anchor, final LinkedHashMap<String,IPopupMenu> options){
        PopupMenu popupMenu = new PopupMenu(context, anchor);
        for(String key : options.keySet()){
            popupMenu.getMenu().add(key);
        }
        popupMenu.getMenuInflater().inflate(R.menu.popup_menu,popupMenu.getMenu());
        popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
            @Override
            public boolean onMenuItemClick(MenuItem menuItem) {

                options.get(menuItem.getTitle()).onClick();
                return true;
            }
        });

        popupMenu.show();
    }

public interface IPopupMenu{
        void onClick();
    } 
```

**XML**

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">

</menu> 
```

**例子**

```
LinkedHashMap<String,IPopupMenu> menu_items = new LinkedHashMap<>();
menu_items.put("Item Name", new Utils.IPopupMenu() {
         @Override
         public void onClick() {
            //do your code
         }
});
menu_items.put("My Item", new Utils.IPopupMenu() {
         @Override
         public void onClick() {
            //do code
         }
});

//you can anchor the popup menu to whatever you like. i.e Button, TextView, View.
popupMenu(context,button,menu_items); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-17T12:55:37.663

来自字符串数组资源

**值 > 字符串.xml**

```
<string-array name="MainCategories">
        <item>Crop</item>
        <item>Animals</item>
        <item>Equipment</item>
        <item>Other</item>
    </string-array> 
```

**Java代码：**

```
 String []categories=getResources().getStringArray(R.array.MainCategories);
    PopupMenu popupMenu=new PopupMenu(MainActivity.this,sortExpenseBtn);

                for(String item: categories)
                    popupMenu.getMenu().add(item);

                popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
                    @Override
                    public boolean onMenuItemClick(MenuItem item) {
                        String selected = item.getTitle();
                        return true;
                    }
                });
                popupMenu.show(); 
```

# javascript - 实现一个异步加载和呈现的列表

> ID：13784091
> 
> 赞同：0
> 
> 时间：2012-12-09T02:28:51.073
> 
> 标签：javascript, jquery, ajax, node.js, express

**我必须在我的网站中实现一个列表，其行为如下：**

**1.**　在主页中，呈现一个列表并仅显示前 12 项，然后是“加载更多...”按钮。

**2.**　页面加载完成后，接下来的12个数据应该被预*加载*。

**3.**　当点击“加载更多”时，加载的12个被*渲染*，紧接着下一个被预*加载*，以此类推……

**我的应用程序正在使用 node.js、express.js、jQuery、ejs 和 bootstrap。**

**现在**，我的服务器逻辑成功生成了数据列表，然后我使用 ejs 模板来渲染整个大列表。

我对如何使用 ajax 将其更改为动态列表感到非常困惑。

“第一次渲染”是否仍应使用来自服务器的 ejs 完成，然后任何添加的列表项都将使用 ejs 再次渲染，但这次是从客户端？实现我需要的行为的最佳/简单方法是什么？顺便说一句-每个列表项都包含一个直接指向唯一图像的 img 标签-在使用 JSON 时这不是问题...吗？

*任何帮助或有用示例的链接 - 将不胜感激。谢谢。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:23:15.317

据我所知，您的 AJAX 调用有两种选择。一种是将 JSON 返回到浏览器并使用客户端模板库来呈现数据。另一种选择是仅在服务器上呈现列表并将 HTML 返回到浏览器，然后您可以将其直接插入 DOM。

您将需要在 express 中设置不同的路由，以便它仅返回列表项的 JSON 或 HTML，而不是第一次加载时的整个 HTML 文档。

将 HTML 返回到浏览器的优点是您不需要在浏览器上加载模板引擎或在浏览器和服务器中都有模板逻辑，这可以减少代码大小并保持一切干燥。但是，如果您需要将数据存储在浏览器内存中以执行其他操作，那么 JSON 是您最好的选择。

我很高兴扩展您需要使事情更清楚的任何一点。

# php - 在我刷新之前，Codeigniter 中上传和调整大小的照片不可用。我的视图加载“太快”了吗？

> ID：13784092
> 
> 赞同：2
> 
> 时间：2012-12-09T02:29:15.770
> 
> 标签：php, codeigniter

我在使用 Codeigniter 中的照片上传系统时遇到问题。

我在控制器中注册期间上传并调整照片大小，一旦完成，我会加载一个“上传成功”视图，我想再次显示照片。

问题是，

*   我进入了一个实际上似乎没有失败的“失败”循环

*和*

*   第一次加载视图时，照片没有显示（尽管它已上传、调整大小并且路径在我的数据库中）。但是如果我刷新页面，它会正确显示。

这是控制器..检查靠近底部的评论，因为顶部基本上只是调整大小的逻辑并且（虽然现在有点难看）它确实有效

```
public function do_upload()
{
    $config['upload_path'] = './upload_pic/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '100';
    $config['max_width']  = '1200';
    $config['max_height']  = '768';
    $_maxResizedWidth = '242';

    $this->load->library('upload', $config);

    if ( $this->upload->do_upload() )
    {
        $this->data['upload_data'] = $this->upload->data();
        $this->data['title'] = "Upload Successful";

         switch($this->data['upload_data']['file_type']){
            case "image/jpg":
                $_file_suffix = ".jpg";
                break;
            case "image/jpeg":
                $_file_suffix = ".jpg";
                break;
            case "image/png":
                $_file_suffix = ".png";
                break;
            case "image/gif":
                $_file_suffix = ".gif";
                break;
            case "image/pjpeg":
                $_file_suffix = ".jpg";
                break;
         }

        $_fileName = $this->data['upload_data']['file_name']; 
        $_oldUploadPath = $config['upload_path'] . $_fileName;
        $_random_key = strtotime(date('Y-m-d H:i:s'));
        $_newUploadPath = $config['upload_path'] . 'resize_' . $_random_key . $_file_suffix;
        rename( $_oldUploadPath, $_newUploadPath );

        $_oldSize = getimagesize($_newUploadPath);
        $_oldWidth = $_oldSize[0];

        if($_oldWidth > $_maxResizedWidth){
            $_scale = $_maxResizedWidth/$_oldWidth;
            $_oldHeight = $_oldSize[1];
            $_imageType = image_type_to_mime_type($_oldSize[2]);
            $_newWidth = $_oldWidth * $_scale;
            $_newHeight = $_oldHeight * $_scale;
            $_resizedImage = imagecreatetruecolor($_newWidth, $_newHeight);
            switch($_imageType) {
                case "image/gif":
                    $_source=imagecreatefromgif($_newUploadPath); 
                    break;
                case "image/pjpeg":
                case "image/jpeg":
                case "image/jpg":
                    $_source=imagecreatefromjpeg($_newUploadPath); 
                    break;
                case "image/png":
                case "image/x-png":
                    $_source=imagecreatefrompng($_newUploadPath); 
                    break;
            }
            imagecopyresampled($_resizedImage, $_source, 0, 0, 0, 0, $_newWidth, $_newHeight, $_oldWidth, $_oldHeight);
            switch($_imageType) {
                case "image/gif":
                    imagegif($_resizedImage,$_newUploadPath); 
                    break;
                case "image/pjpeg":
                case "image/jpeg":
                case "image/jpg":
                    imagejpeg($_resizedImage,$_newUploadPath,90); 
                    break;
                case "image/png":
                case "image/x-png":
                    imagepng($_resizedImage,$_newUploadPath);  
                    break;
            }
        }

        $_newUploadPathWithoutDot = substr($_newUploadPath,1);

        $this->load->model('Member_model');
        $ID = $this->the_user->id;

             /// ****************************************************************************
             /// I step into this next if loop even though the upload_photo method does work.  
            /// In my view I get the "there was a problem" .. but the DB has been correctly updated

        if(!$this->Member_model->upload_photo( $ID, $_newUploadPathWithoutDot));
        {
            $uploadData = $this->upload->data();
            $this->data['message'] = "There was a problem entering your photo in the database ==";
        };

              /// And this is the view that's called
        $this->load->view('upload_big_success_view', $this->data);
    }
    else
    {
        $this->data['message'] = "there was a problem " . $this->upload->display_errors() . dirname(__FILE__);
        $this->data['title'] = "Upload Unsuccessful";
        $this->load->view('profile_photo_view', $this->data);
    }
} 
```

（我知道那里有很多乱七八糟的东西，我会给它一个重构）。

当视图第一次加载时，几乎看起来图像“尚未准备好”，即使一切正常 - 上传、调整大小、文件路径已输入到数据库中......直到它到达最后一个都没有抛出任何错误循环，它似乎认为“->upload_photo()”没有失败。然后当我第一次调用视图时，我的..

```
<img src"<?php echo $the_user->large_image_location; ?>" > 
```

.. 不产生任何输出。但经过简单的刷新后，它确实如此。尽管“出现问题消息”仍显示在视图中。

顺便说一句 - 这是模型。没有什么花哨。

```
public function upload_photo($ID, $_newUploadPath)
{
    $sql = "UPDATE users SET large_image_location=? WHERE id=?";
    $query = $this->db->query($sql, array($_newUploadPath, $ID));
    return $query;  
} 
```

那么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:51:22.477

Codeigniter 在加载视图时不会刷新页面，因此它永远不会加载图像，而是需要使用该`redirect()`函数告诉 Codeigniter 刷新页面。`do_upload()`您应该重定向到您的成功页面，而不是在方法结束时加载成功视图。

我会创建一个`upload_big_success()`方法，为您加载`upload_big_success_view`，然后重定向到该方法。

替换您的以下行`do_upload()`：

`$this->load->view('upload_big_success_view', $this->data);`

和：

`redirect(upload_big_success, 'location');`

然后在同一个控制器中为您的成功页面创建一个方法。

```
public function upload_big_success() {
   // And this is the view that's called
   $this->load->view('upload_big_success_view');
} 
```

# python - 安装 psycopg2

> ID：13784095
> 
> 赞同：0
> 
> 时间：2012-12-09T02:29:56.093
> 
> 标签：python, macos, psycopg2

尝试安装 psycopg2 时出现以下错误

> 构建“psycopg2._psycopg”扩展
> 
> clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes - Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DPSYCOPG_DEFAULT_PYDATETIME=1 -DPSYCOPG_VERSION="2.4.5 (dt dec pq3 ext)" -DPG_VERSION_HEX= 0x090104 -DPSYCOPG_EXTENSIONS=1 -DPSYCOPG_NEW_BOOLEAN=1 -DHAVE_PQFREEMEM=1 -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I。-I/usr/include -I/usr/include/postgresql/server -c psycopg/psycopgmodule.c -o build/temp.macosx-10.8-intel-2.7/psycopg/psycopgmodule.o
> 
> 无法执行clang：没有这样的文件或目录
> 
> 错误：命令“clang”失败，退出状态为 1

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T02:43:30.887

从错误消息中，您缺少用于编译 psycopg2 的 clang 包。

从问题的标签中，我认为您在 osx 上，也许以下链接将帮助您获取和安装它： [http ://woss.name/2012/01/24/how-to-install-a-working -set-of-compilers-on-mac-os-x-10-7-lion/](http://woss.name/2012/01/24/how-to-install-a-working-set-of-compilers-on-mac-os-x-10-7-lion/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:15:51.530

要获得 clang，首先安装 Xcode，然后从 Xcode 中安装命令行工具。

这是关于它的stackoverflow[帖子](https://stackoverflow.com/questions/9329243/xcode-4-4-command-line-tools)。

# c - 传递和编辑字符串中的特定字符

> ID：13784099
> 
> 赞同：0
> 
> 时间：2012-12-09T02:30:55.290
> 
> 标签：c

我正在尝试将内存引用传递给字符串中的字符，并使用 C 在函数中对其进行编辑。代码如下：

```
void EditChar(char *input) {
printf("# %s #",*input);
*input = *input << 1
    }

int main() {
char *string ="aaaa";
EditChar(&string[2]);
printf("%s",string);
} 
```

我可以很好地打印函数内的字符，我认为它一定意味着它跟随指针，那么为什么我无法编辑该字符的指针位置，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:41:02.997

缺少一个；第 3 行将导致问题开始。

您在第 2 行传递一个字符而不是字符指针。

在我的 Mac 上，一旦你解决了这些问题，你会在第 3 行遇到总线错误，因为你试图更改只读内存。

字符 *string =strdup("aaaa");

现在它可以工作了。

此外，如问题评论中所述，您可能希望使用

字符字符串 [] = "aaaa";

# php - 在php中使用正则表达式提取字符串的两部分

> ID：13784105
> 
> 赞同：1
> 
> 时间：2012-12-09T02:32:30.340
> 
> 标签：php, regex

我有这个字符串：

```
 &lt;img src=images/imagename.gif alt='descriptive text here'&gt; 
```

我试图把它分成以下两个字符串（两个字符串的数组，不管怎样，刚刚分解）。

```
 imagename.gif
  descriptive text here 
```

请注意，是的，它实际上是`&lt;`and not `<`。与字符串的结尾相同。

我知道正则表达式是答案，但我在正则表达式方面还不够好，不知道如何在 PHP 中实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T02:37:43.130

尝试这个：

```
<?php

$s="&lt;img src=images/imagename.gif alt='descriptive text here'&gt;";

preg_match("/^[^\/]+\/([^ ]+)[^']+'([^']+)/", $s, $a);

print_r($a); 
```

输出：

```
Array
(
    [0] => &lt;img src=images/imagename.gif alt='descriptive text here
    [1] => imagename.gif
    [2] => descriptive text here
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T04:58:12.407

更好的使用`DOM xpath rather than regex`

```
<?php
$your_string = html_entity_decode("&lt;img src=images/imagename.gif alt='descriptive text here'&gt;");
$dom = new DOMDocument;
$dom->loadHTML($your_string);
$x = new DOMXPath($dom); 

foreach($x->query("//img") as $node) 
{
    echo $node->getAttribute("src");
    echo $node->getAttribute("alt");
}

?> 
```

# php - 将附加信息保存到 MYSQL 数据库并使用简单查询，还是使用复杂查询？

> ID：13784108
> 
> 赞同：0
> 
> 时间：2012-12-09T02:33:27.617
> 
> 标签：php, mysql

我有一个 drupal 站点，正在尝试使用 php 从我的数据库中获取一些数据。我需要做的是在用户的个人资料中显示他们是第一个评论场地的人有多少次（就像 Yelp 的“第一”计数一样）。我正在考虑两种选择，并试图确定哪种方法更好。

**第一个选项：**第一次审查场地时，将审查者的用户 ID 的值保存到数据库中的表中。该表将专用于存储第一个用户的 UID 以查看每个场地。然后，使用一个简单的查询在用户的个人资料中显示他们的 UID 在此表中出现的次数。

**第二种选择：**使用一组更复杂的查询来显示用户配置文件中的计数，而不在数据库中存储任何额外数据。这将依赖于几个查询，这些查询必须按照以下方式做一些事情：

1.  查找用户创建的每条评论的 ID
2.  检查每个评论中包含的场地ID
3.  根据评论中存储的场地 ID 对每个场地进行第一次审核
4.  获取作者的 User ID 进行第一次审核
5.  检查这些作者 UID 中的哪些（如果有）与当前用户的 UID 匹配

我假设这将涉及在第一步中创建一个 ID 数组，然后以某种方式为数组中的每个项目执行每个步骤。查询中还会涉及 3 或 4 个不同的表。

我对编写 SQL 查询比较陌生，所以我想知道执行一组可能更长的查询是否会更好，或者使用小型数据库并使用小得多的计数查询来代替。有什么方法可以比较两者的优势，还是比较苹果和橘子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:32:07.333

存储的额外数据量可以忽略不计；处理的简化将很重要。数据不会改变（第一个查看场地的人不会改变），因此更新负担可以忽略不计。使用额外的数据和更简单的查询。

# java - 修改器问题

> ID：13784109
> 
> 赞同：0
> 
> 时间：2012-12-09T02:33:28.640
> 
> 标签：java, events

我正在使用基于此问题中的建议的事件系统：[在 Java 中创建自定义事件](https://stackoverflow.com/questions/6270132/create-a-custom-event-in-java)

我在一个组件中实现了它来处理和传递来自组件上的按钮的事件。我将组件放入它自己的 jar 文件中。然后我在另一个项目中使用了组件和 jar 文件，当我尝试运行我用它创建的程序时，它给了我以下错误：

> java.lang.IllegalAccessException：Eventing.EventHandler 类无法访问带有修饰符“public”的类 suit.proto.frmDo$1 的成员

这是我写的 EventHandler 类的代码：

```
public class EventHandler<T> {
    private ArrayList<T> listenerPool = new ArrayList<>();

    public void addListener(T listener){
        listenerPool.add(listener);
    }

    public void raiseEvent(Object eventData){
        for (T listener : listenerPool){
                    try {
                        if (eventData != null) {
                            listener.getClass().getDeclaredMethods()[0].invoke(listener, eventData);
                        } else {
                            listener.getClass().getDeclaredMethods()[0].invoke(listener);
                        }
                    } catch (IllegalAccessException | IllegalArgumentException | InvocationTargetException ex) {
                        Logger.getLogger(EventHandler.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            }
        } 
```

这就是我在组件上设置 EventHandler 类的方式：

```
EventHandler<EventListener> _loginEvent = new EventHandler<>();

public EventHandler<EventListener> loginEvent(){
    return _loginEvent;
}

loginButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            _loginEvent.raiseEvent(null);
        }
}); 
```

这就是我在 frmDo 上捕捉事件所做的：

```
 this.component2.loginEvent().addListener(new EventAdapter() {
       @Override
       public void executeResult() {

       }
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:56:56.080

基于[这个](http://en.wikipedia.org/wiki/Observer_pattern)关于观察者模式的维基百科条目，我让事件系统工作！正如我怀疑的那样，Java 有一些预定义的系统来处理这类事情。

# java - 通过静态方法修改数组大小

> ID：13784111
> 
> 赞同：0
> 
> 时间：2012-12-09T02:33:40.127
> 
> 标签：java, arrays, static

我正在尝试通过将每个方法调用的数组大小加 1 来调整数组的大小。
我创建了一个静态方法，它以数组作为参数。

```
public static void addArray(int arrayName[]) {
    int tempNum[] = new int[arrayName.length]; // save the numbers before add array size
    for (int i = 0; i < arrayName.length; i++) { // because by adding/removing array size, it would clear element array
        tempNum[i] = arrayName[i];
    }
    arrayName = new int[arrayName.length + 1]; // adds array size by 1
    for (int i = 0; i < arrayName.length - 1; i++) { // sets all the saved numbers to the new element in the array
        arrayName[i] = tempNum[i];   // stops at (length - 1) because I want to leave it blank at the last element
    }
} 
```

（对不起，如果代码搞砸了，我不知道如何在此处正确发布代码）

总的来说，我这样做；

```
public static void main(String[] args) {

    int num[] = {0, 1, 2, 3, 4};

    addArray(num);

    System.out.println(num.length);  
} 
```

如您所见，默认数组大小（长度）应为 5，但无论我调用该方法多少次，它始终打印为 5。
现在我开始认为静态方法不允许来自 main 的数组要调整大小？
如果不能，您是否有另一种方法来专门使用静态方法来调整数组的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:52:14.527

您需要从函数返回数组：

```
public static int[] addArray(int arrayName[]) {
    ...
    arrayName = new int[arrayName.length + 1]; // adds array size by 1
    ...
    return arrayName;
}

public static void main(String[] args) {
    int num[] = {0, 1, 2, 3, 4};
    num = addArray(num);
    System.out.println(num.length);  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T02:44:18.910

你可以简单地这样做：

```
int num[] = {0, 1, 2, 3, 4};
num = Arrays.copyOf(num, num.length + 1);
System.out.println(num.length); 
```

这应该打印 6。

您的代码的问题是，当您调用方法时，该方法会收到引用的*副本*。因此，该方法无法更改调用方法中的变量所引用的对象。

另一种方法是制作`num`一个静态字段::

```
static int num[] = {0, 1, 2, 3, 4};
public static void main(String[] args) {

    addArray(); // or use Arrays.copyOf() as above

    System.out.println(num.length);  
}

public static void addArray() {
    int tempNum[] = new int[num.length + 1];
    System.arraycopy(num, 0, tempNum, 0, num.length);
    num = tempNum;
} 
```

您不能做的（没有复杂的反射代码）是将变量名称传递给方法并让它更改具有该名称的数组的长度。

# php - 使用内置 PHP Web 服务器设置环境变量

> ID：13784116
> 
> 赞同：36
> 
> 时间：2012-12-09T02:34:25.087
> 
> 标签：php, environment-variables, embeddedwebserver

PHP 5.4 支持用于开发目的的[内置 Web 服务器。](http://php.net/manual/en/features.commandline.webserver.php)我们正在开发的应用程序是通过环境变量配置的。

使用 Apache，您可以这样做：

```
SetEnv FAVORITE_COLOR white 
```

使用普通 CLI，您可以执行以下操作：

```
$ export FAVORITE_COLOR=black
$ php -a
php > echo $_SERVER['FAVORITE_COLOR']; 
```

有没有办法为内置的 Web 服务器设置这些变量？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-29T09:47:07.817

看起来 E 被排除在运行内置服务器的 variable_order 设置之外。如果将 E 添加到 variable_order 设置，它会起作用：

测试.php

```
<?php
var_dump($_ENV['FOO']); 
```

壳：

```
FOO=BAR php -d variables_order=EGPCS -S localhost:9090 /tmp/test.php 
```

输出：

```
string 'BAR' (length=3) 
```

在 PHP 5.4.12 上测试

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-07-10T16:46:32.180

在 Windows 上：

```
SET FOO=BAR
php -s localhost:9090 
```

# joomla2.5 - 使用 K2 组件在 Joomla 中进行分类项目布局

> ID：13784117
> 
> 赞同：4
> 
> 时间：2012-12-09T02:34:29.310
> 
> 标签：joomla2.5, joomla-k2

我是 Joomla 中 K2 组件的新手，并且遇到了类别布局网格的问题。

我正在使用 K2 内容模块从特定类别中提取项目。类别布局网格设置需要前导、主要和次要部分的三列。然而，显示仍然在一列中。

事实上，该模块似乎根本没有响应类别布局设置的变化，因为无论设置如何，图像都保持相同的大小。

以下是类别和模块页面的屏幕截图：

![在此处输入图像描述](../Images/e1e5e58994720caffcdead79e778e40e.png) ![K2 内容模块](../Images/f282ded066f59631e98d86d9db90cc8b.png)

我看过几个关于这个问题的视频并搜索了这个网站，但我无法弄清楚我做错了什么。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T18:47:09.553

问题是你不知道你实际设置了什么。

类别设置（主要、主要...文章的数量及其布局等，请参见您的第一个屏幕截图）**根本不适**用于 K2 内容模块布局。这是正确的。

为什么？类别设置仅适用于通过 Joomla 管理 -> 菜单创建的页面。您必须创建一个项目类型为“K2 类别”的菜单，这将创建一个将应用您的类别设置的页面。除此页面外，您的类别设置不会影响其他页面。

K2 内容模块布局只能通过 CSS 及其可以`/modules/mod_k2_content/tmpl/Default/default.php`在您的服务器上找到的模板来更改。在模块本身的设置中，没有您在第二个屏幕截图中看到的布局设置。

如果要修改 K2 内容模块布局，请按照以下步骤操作：

1.  确保首先覆盖模块的模板。只需将包括其 default.php 文件在内的整个“默认”文件夹复制到其中 `/templates/your_template/html/mod_k2_content/`，您就可以开始了。
2.  *多个模块模板和布局的可选步骤*- 您可以将“默认”文件夹名称重命名为“news_template”。现在，在模块设置中，看到“选择子模板选项”——你可以选择你新创建的一个。
3.  在`default.php`文件中，根据您的布局需要更改 HTML。
4.  为模块更改或编写自己的 CSS。您可以通过 k2.css 文件或您的自定义模板样式表来完成。

没有“点击方式”来选择 K2 内容模块的布局，抱歉 - 这是唯一的方式。

**// 更新**

我没有注意到这是一个如此古老的问题，但没有得到正确的回答——所以最后，这就是答案。问题仍然存在，K2 仍然被广泛使用，这适用于从 1.5 到 3.x 的所有 Joomla 版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:46:29.737

如果网站上启用了缓存清除缓存并查看。还要检查为显示类别而创建的菜单项。

# linux - 为什么我的 NFS 服务器可以在没有端口映射的情况下运行？

> ID：13784119
> 
> 赞同：0
> 
> 时间：2012-12-09T02:34:43.103
> 
> 标签：linux, nfs

我从这个[Linux NFS-HOWTO](http://nfs.sourceforge.net/nfs-howto/ar01s03.html)了解到，为了设置 NFS 服务器，必须首先运行守护程序端口映射。

但是为什么我找不到任何使用`ps aux | grep`.

[我的系统是 Ubuntu 12.10，我根据SettingUpNFSHowTo](https://help.ubuntu.com/community/SettingUpNFSHowTo)的说明设置了 NFS 服务器 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T07:55:34.207

Ubuntu 12.10 上的端口映射进程称为“rpcbind”。它通常在 111 端口上运行。您也可以使用“rpcinfo”命令对其进行查询。希望有帮助。

# javascript - 是否可以仅通过复制 DOM、JS 和 CSS 来共享某人的屏幕？

> ID：13784121
> 
> 赞同：0
> 
> 时间：2012-12-09T02:34:54.367
> 
> 标签：javascript, html, css, screen

是否可以通过首先复制 HTML、JS、CSS 和其他相关内容然后将所有这些内容推送到查看者的屏幕来从本质上共享某人的屏幕？我正在考虑一个实现，我将我的 JavaScript 注入我想要共享的页面，打开一个 Websocket 到我的服务器，并将事件附加到 DOM 以记录对 DOM 的更改以通过套接字推送。这种方法是否存在任何性能问题？

# php - 函数内的 MySQL 查询

> ID：13784123
> 
> 赞同：0
> 
> 时间：2012-12-09T02:35:23.907
> 
> 标签：php, function, mysqli

我有那个代码：

```
$mysqli = new mysqli($dbhost, $dbuser, $dbpass, $dbname);

$result = $mysqli->query("SELECT id FROM User");
echo("users: " . $result->num_rows ."<br/>");

function echoUserNum()
{
    $result = $mysqli->query("SELECT id FROM User");
    echo("users: " . $result->num_rows ."<br/>");
}
echoUserNum(); 
```

它只打印一次用户数（第一次回声呼叫）。问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T02:37:58.253

`$mysqli`超出了函数的范围`echoUserNum`。尝试全局，或通过连接

```
function echoUserNum()
{
    global $mysqli;
    $result = $mysqli->query("SELECT id FROM User");
    echo("users: " . $result->num_rows ."<br/>");
} 
```

或者

```
function echoUserNum($mysqli)
{
    $result = $mysqli->query("SELECT id FROM User");
    echo("users: " . $result->num_rows ."<br/>");
}
echoUserNum($mysqli); 
```

# symfony - Symfony ACL => ObjectIdentity() 已经与 ACL 关联

> ID：13784129
> 
> 赞同：2
> 
> 时间：2012-12-09T02:37:27.643
> 
> 标签：symfony, acl, symfony-2.1, fixtures

我想将 ACL 与 Symfony 2 一起使用并将它们加载到我的装置中。

以下代码完美运行，但如果我取消注释，则会`array('myprivateroom', 'user1', 'view'),`收到以下错误：

```
[Symfony\Component\Security\Acl\Exception\AclAlreadyExistsException]  ObjectIdentity(1, Acme\RoomBundle\Entity\Room) is already associated with an ACL. 
```

我认为问题就在这里，`$acl = $aclProvider-createAcl(ObjectIdentity::fromDomainObject($room));`但我不知道如何解决。

```
public function load(ObjectManager $manager)
{
    $datas = array(
        array('myprivateroom', 'admin', 'owner'),
        //array('myprivateroom', 'user1', 'view'),
        array('mypublicroom', 'user1', 'owner'),
    );

    foreach ($datas as $data) {
        // creating the ACL
        $room = $this->getReference($data[0]);
        $aclProvider = $this->container->get('security.acl.provider');
        $objectIdentity = ObjectIdentity::fromDomainObject($room);
        //problem here when I uncomment array('myprivateroom', 'user1', 'view'),
        $acl = $aclProvider->createAcl(ObjectIdentity::fromDomainObject($room));

        // retrieving the security identity of the user
        $user = $this->getReference($data[1]);
        $securityIdentity = UserSecurityIdentity::fromAccount($user);

        //create mask
        $builder = new MaskBuilder();
        $builder->add($data[2]);
        $mask = $builder->get();

        // grant owner access
        $acl->insertObjectAce($securityIdentity, $mask);
        $aclProvider->updateAcl($acl);
    }
} 
```

# 谢谢

更新：如果我做 2 个数组，比如

```
$datas = array(
    array('myprivateroom', 'admin', 'owner'),
    array('mypublicroom', 'user1', 'owner'),
);

$datas2 = array(
    array('myprivateroom', 'user1', 'view'),
); 
```

和 2 foreach 但是，在第二个中，我替换`$acl = $aclProvider->createAcl(ObjectIdentity::fromDomainObject($room));`为`$acl = $aclProvider->findAcl($objectIdentity);`，它工作得很好，但我认为这不是正确的方法，以下不起作用。

```
try {
    $acl = $aclProvider->findAcl($objectIdentity);
} catch (AclNotFoundException $e) {
    $acl = $aclProvider->createAcl($objectIdentity);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-15T14:12:39.953

我遇到了和你完全一样的问题，我已经这样解决了。

```
try {
    $acl = $this->get('security.acl.provider')->findAcl($idObjeto);
} catch (\Symfony\Component\Security\Acl\Exception\AclNotFoundException $e) {
    $acl = $this->get('security.acl.provider')->createAcl($idObjeto);
} 
```

我没有很好地解释为什么。唯一不同的是“\Symfony\Component\Security\Acl\Exception\AclNotFoundException”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T00:18:38.837

我来晚了，但以防有人需要了解您的代码发生了什么。如果你遍历这个数组：

```
$datas = array(
    array('myprivateroom', 'admin', 'owner'),
    array('myprivateroom', 'user1', 'view'),
    array('mypublicroom', 'user1', 'owner'),
); 
```

你将使用：

```
 $acl = $aclProvider->createAcl(ObjectIdentity::fromDomainObject($room)); 
```

在第一个和第二个循环上。它将尝试创建访问控制列表 (ACL)`'myprivateroom'`两次。这就是为什么它会抛出一个错误，说你已经有了这个 Room 实体的列表。

```
ObjectIdentity(1, Acme\RoomBundle\Entity\Room) is already associated with an ACL 
```

解决它的一个好方法是尝试它是否有 ACL，如果没有则创建它（@JGrinon 提供的答案）。否则，您可以将数据组织在多维数组中并循环遍历它：

```
// PHP array but you could use a JSON array to be clearer
$datas = array(
    array('myprivateroom',
        array(
            array('admin', 'owner'),
            array('user1', 'view1')
        )
    ),
    array('mypublicroom',
        array(
            array('user1', 'owner'),
        )
    ),
);

// Call ACL Provider service before the loop
$aclProvider = $this->container->get('security.acl.provider');

// Loop through the array
foreach ($datas as $data) {
    // Get the room name
    $room = $this->getReference($data[0]);
    $objectIdentity = ObjectIdentity::fromDomainObject($room);
    // The list is created only once for each room
    $acl = $aclProvider->createAcl(ObjectIdentity::fromDomainObject($room));

    // Loop through the list of users and associated rights
    $list = $this->getReference($data[1]);
    foreach ($list as $row) {
        // Retrieving the security identity of the user
        $user = $row[0];
        $securityIdentity = UserSecurityIdentity::fromAccount($user);

        // Create Mask
        $builder = new MaskBuilder();
        $builder->add($row[1]);
        $mask = $builder->get();

        // Grant access
        $acl->insertObjectAce($securityIdentity, $mask);
    };

    // Update Access Control List
    $aclProvider->updateAcl($acl);
} 
```

希望这可以帮助 ;）

# ruby-on-rails-3 - 安装 sqlite3 gem 在我的 Linux Mint x64 上不起作用

> ID：13784132
> 
> 赞同：0
> 
> 时间：2012-12-09T02:37:43.543
> 
> 标签：ruby-on-rails-3, sqlite, rhomobile

我发现了很多这样的问题，但没有一个给出的解决方案有效。我也没有看到提到x64，所以也许这是相关的。

问题是这样的：

```
Building native extensions.  This could take a while...
ERROR:  Error installing sqlite3:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
/usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
    from /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from extconf.rb:3:in `<main>' 
```

到目前为止我已经尝试过：

*   安装`sqlite3`&`libsqlite3-dev`通过apt
*   [使用来自http://www.sqlite.org/](http://www.sqlite.org/)`sqlite3`的最新二进制文件安装
*   指定 sqlite3-dir ( `gem install sqlite3 -- --with-sqlite3-dir=/usr/local/lib`)

在这一点上，我有点绝望。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:34:49.163

> /usr/local/lib/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': 无法加载此类文件 -- mkmf (LoadError)

这表示它找不到文件`mkmf`。该文件带有`-dev`ruby​​ 版本。因为`ruby1.9.1`就像你的错误信息说你正在运行，你需要`ruby1.9.1-dev`安装

```
sudo aptitude install ruby1.9.1-dev 
```

* * *

Mint 只是 Ubuntu 的衍生产品，因此值得您花时间搜索运行 Ubuntu 的人也遇到此类问题。例如：[`require': 没有要加载的文件 -- mkmf (LoadError)](https://stackoverflow.com/questions/7645918/require-no-such-file-to-load-mkmf-loaderror)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T01:44:47.943

您需要安装 sqlite3-ruby gem。

# javascript - Django Ajax 登录表单

> ID：13784136
> 
> 赞同：8
> 
> 时间：2012-12-09T02:37:55.290
> 
> 标签：javascript, ajax, django, jquery

我正在尝试使用 ajax 提交登录表单。我对应该如何处理异常/成功响应感到困惑。我从服务器收到 200 OK 并且表单通过密码/用户名字段返回错误。如何根据服务器响应显示错误消息或将用户重定向到适当的页面？

**查询：**

```
56 $(window).load(function(){                                                                                                                  
57 $('#login_form').submit(function(e){                                                                                                        
58             e.preventDefault();                                                                                                             
59     var request_url = document.getElementById('next').value                                                                             
60          $.ajax({                                                                                                                           
61             type:"POST",                                                                                                                    
62             url: $(this).attr('action'),                                                                                                    
63             data: $('#login_form').serialize(),                                                                                             
64             success: function(response){ $('#msg').text(response);                                                                          
65             console.log(response);                                                                                                          
66             },                                                                                                                              
67             error: function(xhr, ajaxOptions, thrownError){ alert( $('#login_error').text('Username already taken. Please select another one.')}, 
68           });                                                                                                                               
69     });                                                                                                                                     
70 }); 
```

**查看：已更新**

```
51 def login(request):                                                                                                                         
52     if request.method == 'POST':                                                                                                            
53         request.session.set_test_cookie()                                                                                                   
54         login_form = AuthenticationForm(request, request.POST)                                                                              
55         if login_form.is_valid():                                                                                                           
56             if request.is_ajax:                                                                                                             
57                 user = django_login(request, login_form.get_user())                                                                         
58                 if user is not None:                                                                                                        
59                     return HttpResponseRedirect(request.REQUEST.get('next', '/'))
           **else:**                                                                                                                               
61                **return HttpResponseForbidden() # catch invalid ajax and all non ajax**                                        
60     else:                                                                                                                                   
61         login_form = AuthenticationForm(request)                                                                                            
62                                                                                                                                             
63     c = Context({                                                                                                                           
64         'next': request.REQUEST.get('next'),                                                                                                
65         'login_form': login_form,                                                                                                           
66         'request':request,                                                                                                                  
67     })                                                                                                                                      
68     return render_to_response('login.html', c, context_instance=RequestContext(request)) 
```

**形式：**

```
7   <tt id="login_error"></tt>                                                                                                                            
8   <form id="login_form" action="" method="post">                                                                                            
9                                                                                                                                             
10     {{ login_form }}                                                                                                                        
11     <input type="submit" value="login"/>                                                                                                    
12     <input type="hidden" id="request_path" name="next" value="/"/>                                                                          
13   </form>                                                                                                                                   
14 <p>{{ request.get_full_path }}</p>                                                                                                          
15 <tt id='msg'></tt> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T06:39:59.750

尽管使用 json 执行此操作肯定是更好的做法，但假设您并没有真正从服务器传回太多信息，您也可以不用。在 django 方面`HttpResponseRedirect`，`HttpResponse`使用重定向 URL 作为您的消息交换。还为ajax登录失败的情况添加一个`HttpResponseForbidden`。

```
def login(request):                                                                                                                         
    if request.method == 'POST':                                                                                                            
        request.session.set_test_cookie()                                                                                                   
        login_form = AuthenticationForm(request, request.POST)                                                                              
        if login_form.is_valid():                                                                                                           
            if request.is_ajax:                                                                                                             
                user = django_login(request, login_form.get_user())                                                                         
                if user is not None:                                                                                                        
                    return HttpResponse(request.REQUEST.get('next', '/'))   
        return HttpResponseForbidden() # catch invalid ajax and all non ajax                                                        
    else:                                                                                                                                   
        login_form = AuthenticationForm()                                                                                                                                        
    c = Context({                                                                                                                           
        'next': request.REQUEST.get('next'),                                                                                                
        'login_form': login_form,                                                                                                                         
        'request':request,                                                                                                                  
    })                                                                                                                                      
    return render_to_response('login.html', c, context_instance=RequestContext(request)) 
```

然后在 javascript 端，检查响应的状态码。如果是 200，那么这就是你的`HttpResponse`- 你想重定向到响应消息中的 url。如果是 403，那么这就是您的 HttpResponseForbidden - 登录失败。您可以摆脱标准的“登录失败”错误消息。

```
$.ajax({                                                                                                                           
    type:"POST",                                                                                                                    
    url: $(this).attr('action'),                                                                                                    
    data: $('#login_form').serialize(),  
    // the success function is called in the case of an http 200 response                                                                                  
    success: function(response){ 
        // redirect to the required url
        window.location = response;                                                                                                     
     },                                                                                                                              
    error: function(xhr, ajaxOptions, thrownError){
        alert('login failed - please try again'); 
    }, 
}); 
```

恐怕我还没有测试过这个，但它应该给你一个想法。

有关更多信息，请查看[django 的 HttpResponse objects 的文档](https://docs.djangoproject.com/en/1.4/ref/request-response/)。然后查看[jquery ajax 文档](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T04:07:32.107

```
return HttpResponseRedirect(request.REQUEST.get('next', '/')) 
```

如果您正在执行 ajax ，您显然不能使用它，客户端必须负责重定向/显示/在 Ajax 响应中发回的任何内容。如果登录成功，发送一个 JSON 响应告诉客户端重定向自己（使用 javascript 重定向），如果不是，发送一个带有错误列表的 JSON 响应并使用 javascript 显示它们。

# php - 如何使用php在三列中显示列表？

> ID：13784137
> 
> 赞同：7
> 
> 时间：2012-12-09T02:37:54.853
> 
> 标签：php, html, html-table

在过去的几个小时里，我一直没有成功地试图找出 php 代码以在三列中显示一个列表，以便它具有这个顺序

```
A D G
B E H
C F I 
```

但我真的迷路了。谁能帮我这个？我目前只有按此顺序列出的代码

```
A B C
D E F
G H I 
```

这是我当前的代码：

```
echo '<table><tr>';
foreach ($categories as $k => $category) {
    if ($k % 3 == 0 && $k ! = 0) {
        echo '</tr><tr>';
    }
    echo '<td><a href="category.php?category='.$category["id"].'">'.$category["category"].'</a></td>';
}
echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T03:38:14.960

尝试这个：

```
$columns = 3;
$rows = ceil(count($categories) / $columns);

echo '<table>';

for ($row = 0; $row < $rows; $row++) {
    echo '<tr>';

    foreach ($categories as $k => $category) {
        if ($k % $rows == $row) {
            echo '<td><a href="category.php?category='.$category["id"].'">'.$category["category"].'</a></td>';
        }
    }

    echo '</tr>';
}

echo '</table>'; 
```

这不是很有效，但现在我想不出更好的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T09:30:18.153

如果您希望按照指示在列中*呈现*列表，您可以按逻辑顺序生成它，并仅使用 CSS`columns`属性在列中进行设置：

```
ul {
  -moz-column-count: 2;
  -webkit-column-count: 2;
  column-count: 2;
} 
```

坏消息是 IE 9 及更早版本不支持此功能，但像[css3-multi-column.js](http://www.csscripting.com/css-multi-column/)这样的 Columns polyfill在简单的情况下可能工作得足够好（尽管它们存在局限性和问题）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-12T03:03:24.623

我遇到了同样的问题，出于以下原因，我发布了对这个老问题的回答：

1.  我的回答更笼统，更容易让其他人适应。
2.  我的数组是关联的，带有一个字符串键。顺便说一句，我的答案适用于关联数组和索引数组。
3.  我不想要一个复杂的 CSS 解决方案，就像这个主题的其他一些答案一样。实际上，我想出的解决方案非常简单——在一张巨大的桌子内使用多个 style="float:left" 的标签。虽然我怀疑在单个表中包含多个 tbody 标记是否会通过 HTML 验证，但实际上它确实通过且没有错误。

需要注意的一些事项：

*   **$numCols**是您想要的列数。
*   由于我们是浮动项目，您可能需要根据您的情况设置父元素的宽度和最小宽度和/或添加一些 <br style="clear: both" />。
*   有关替代排序方法，请参阅[http://php.net/manual/en/array.sorting.php](http://php.net/manual/en/array.sorting.php)

这是我的完整答案：

```
function sortVertically( $data = array() )
{
    /* PREPARE data for printing */
    ksort( $data );     // Sort array by key.
    $numCols    = 3;    // Desired number of columns
    $numCells   = is_array($data) ? count($data) : 1 ;
    $numRows    = ceil($numCells / $numCols);
    $extraCells = $numCells % $numCols;  // Store num of tbody's with extra cell
    $i          = 0;    // iterator
    $cCell      = 0;    // num of Cells printed
    $output     = NULL; // initialize 

    /* START table printing */
    $output     .= '<div>';
    $output     .= '<table>';

    foreach( $data as $key => $value )
    {
        if( $i % $numRows === 0 )   // Start a new tbody
        {
            if( $i !== 0 )          // Close prev tbody
            {
                $extraCells--;
                if ($extraCells === 0 )
                {
                    $numRows--;     // No more tbody's with an extra cell
                    $extraCells--;  // Avoid re-reducing numRows
                }
                $output .= '</tbody>';
            }

            $output .= '<tbody style="float: left;">';
            $i = 0;                 // Reset iterator to 0
        }
        $output .= '<tr>';
            $output .= '<th>'.$key.'</th>';
            $output .= '<td>'.$value.'</td>';
        $output .= '</tr>';

        $cCell++;                   // increase cells printed count
        if($cCell == $numCells){    // last cell, close tbody
            $output .= '</tbody>';
        }

        $i++;
    }

    $output .= '</table>';
    $output .= '</div>';
    return $output;
} 
```

我希望你觉得这个答案有用。

# c++ - IplImage 与 CvMat

> ID：13784139
> 
> 赞同：4
> 
> 时间：2012-12-09T02:37:58.113
> 
> 标签：c++, c, opencv, matrix, iplimage

我知道很多人对和之间的**技术差异**感兴趣。（是的，不是(*)，但是。）所以，让我们以实际的重点来清除差异。`IplImage``CvMat``cv::Mat``CvMat`

是`CvMat`refcounted 版本`IplImage`吗？`CvMat`只有一个包装吗`IplImage`？如果是这样，为什么他们也发展了`CvMat`？

我问这些问题是因为**我发现`IplImage`它在整体搜索中[最受欢迎](http://www.google.com/trends/explore#q=IplImage%2C%20cv%3A%3AMat%2C%20cvMat&cmpt=q)**，而且我认为它的帖子也最多。

**仍然使用 IplImage**而不是较新的结构有什么好处？

(*)（我在这里也放了 c++ 标签，因为很多人也将它与 c++ 一起使用，而且还有一些库更喜欢`IplImage`。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:16:19.767

我建议您阅读[Learning OpenCV](http://www.cse.iitk.ac.in/users/vision/dipakmj/papers/OReilly%20Learning%20OpenCV.pdf)一书中的**OpenCV Primitive Data Types**段落。关于这两种数据类型之间的差异有一个很好的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T15:42:43.373

回答你的问题：

> 仍然使用 IplImage 而不是较新的结构有什么好处？

也许没有。由于某种原因，它已被开发人员弃用，我猜你仍然发现它的原因是遗留代码；因为人们仍然遵循旧代码示例而不知道该结构已被弃用，并且因为“学习 OpenCV**第一版**”在 opencv 函数签名和数据结构方面已经过时，但仍然有很多人从 opencv 开始。

作为参考，[Learning OpenCV 第 2 版](http://shop.oreilly.com/product/0636920022497.do)应该会在 2013 年 3 月发布，但不要引用我的话；）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T09:23:33.797

`IplImage`根据文档，来自英特尔图像处理库：http: [//opencv.willowgarage.com/documentation/basic_structures.html#iplimage](http://opencv.willowgarage.com/documentation/basic_structures.html#iplimage)

这个问题也解决了`CvMat`结构，你可能会注意到： [OpenCV的cvMat的内存结构是什么？](https://stackoverflow.com/questions/1712899/what-is-the-memory-structure-of-opencvs-cvmat)

至于哪个更有益：虽然在任何一种情况下`CvMat`或`IplImage`在各种情况下，这里或那里可能会有轻微的速度差异——这取决于你想做什么。例如，您需要在内存中共享矩阵结构吗？您是否需要有效地序列化或搜索等？申请很重要。

（从理论上讲，它提供的一个优势`IplImage`是，由于它的血统，它通常与现有的实现更兼容，正如您所指出的。）

# ruby-on-rails - Capybara 测试在使用 Google 地图时在第一次测试中失败并出现 Timeout::Error

> ID：13784140
> 
> 赞同：21
> 
> 时间：2012-12-09T02:38:23.957
> 
> 标签：ruby-on-rails, selenium, google-maps-api-3, rspec, capybara

我正在使用 RSpec + Capybara + Selenium (Firefox) 进行测试。无论我运行验收测试的哪个子集，第一个测试都会失败（下一个测试可以正常工作），原因如下：

```
 Failure/Error: visit '/'
 Timeout::Error:
   Timeout::Error 
```

我的应用程序严重依赖 GoogleMaps 和 BackboneJS。当我运行测试时，页面没有完成加载并且“从 maps.googleapis.com 传输数据”消息停留在 Firefox 窗口的左下角，但是页面看起来加载正确（存在地图和其他内容）。我已经将超时设置为 60 秒以排除任何慢速网络问题。并且所有后续测试都运行得非常快（例如正确的 Google 脚本已被提取并已被缓存）。此外，当我在开发环境中启动服务器并访问它时（`localhost:3000`）一切正常。

火狐 17.0.1。我的一些宝石：

```
capybara (2.0.1)
database_cleaner (0.9.1)
mongoid (3.0.13)
rspec (2.12.0)
rspec-core (2.12.1)
rspec-expectations (2.12.0)
rspec-mocks (2.12.0)
rspec-rails (2.12.0)
selenium-webdriver (2.26.0) 
```

您知道为什么会发生这种情况以及如何预防吗？

编辑：

`spec/spec_helper.rb`：

```
# 当你运行 'rails generate rspec:install' 时，这个文件被复制到 spec/
ENV["RAILS_ENV"] ||= '测试'
需要 File.expand_path("../../config/environment", __FILE__)
需要'rspec/rails'
需要'rspec/autorun'

# 需要支持带有自定义匹配器和宏等的 ruby​​ 文件，
# 在 spec/support/ 及其子目录中。
目录[Rails.root.join("spec/support/**/*.rb")].each {|f| 要求 f}

RSpec.configure 做 |config|
  config.include FactoryGirl::Syntax::Methods
  config.treat_symbols_as_metadata_keys_with_true_values = true
  config.infer_base_class_for_anonymous_controllers = false
  #config.order = "随机"
结尾

```

`spec/features/features_spec_helper.rb`：

```
require_relative "../spec_helper"

需要“水豚/rspec”

Capybara.default_driver = :硒
Capybara.default_wait_time = 60

```

编辑2：

它以前可以正常工作（几周前；该项目当时停止了）。 ~~可以通过从 2.11 升级到 2.12 的 RSpec 引入（我在几周前做过），但我刚刚尝试降级它并且确实发生了同样的事情。~~ 我已将整个代码库恢复到一个月前的时间点，以排除可能的 gem 回归。问题仍然存在。

编辑3：

我刚刚发现，如果我注释掉负责从 Google 附加地图的行：

```
new google.maps.Map($("#map")[0], mapOptions) 
```

然后一切都像魅力一样。

编辑4：

示例应用源代码：[https ://github.com/skalee/capybara-google-maps-failure](https://github.com/skalee/capybara-google-maps-failure)

运行所有规范将导致第一个中出现 Timeout::Error （至少对我而言）。但是，在以下情况下，所有规范都将通过：

1.  您删除[了初始化 Geocoder](https://github.com/skalee/capybara-google-maps-failure/blob/master/app/assets/javascripts/rmcs.js.coffee#L7)的行（它没有在示例应用程序中使用，但我在我的应用程序中使用它）。
2.  您删除[初始化 Map 的行](https://github.com/skalee/capybara-google-maps-failure/blob/master/app/assets/javascripts/views/offers_on_map.js.coffee#L13)。
3.  最让我惊讶的是，当您提供琐碎的样式表时，仅此而已：

```
#map{ 宽度：600px ; 高度：600px }
```

宝石与我在应用程序中使用的宝石完全相同。中有一些 3rd 方脚本`/vendor/assets`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T15:47:29.203

您不应该依赖外部服务进行测试。这是一个策略：

[http://robots.thoughtbot.com/post/34761570235/using-capybara-to-test-javascript-that-makes-http](http://robots.thoughtbot.com/post/34761570235/using-capybara-to-test-javascript-that-makes-http)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:40:59.390

您是否尝试过更改 GemFile 以拥有一个组 :production ？

您是否将整个脚本加载到正确的位置？

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"> 
```

此示例用于引导程序：

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE"
type="text/javascript">
</script> 
```

# php - 使用 javascript/php 的动态链接/重定向

> ID：13784142
> 
> 赞同：0
> 
> 时间：2012-12-09T02:38:48.643
> 
> 标签：php, javascript, redirect, href

有一个烦人的小问题。找不到有效的解决方案，我尝试了从这里和谷歌搜索中找到的所有东西。

这样做的目的是将它们传递到先前创建的“房间”中。

似乎我尝试什么都没关系，我无法使用带有href的onclick将它加载到另一个页面中。而且我知道它很容易解决它只是我想不到的愚蠢。

抱歉，如果我没有正确地发布我的代码，这是我第一次问一个问题，我通常只是潜伏在周围寻找答案。

```
//..Left out <?php and my connect info but it is in my script
//--CLEANUP MY MESS
$sql = "SHOW TABLES";
$result = mysql_query($sql) or die('err11');
while ($row = mysql_fetch_row($result)) $testing[$row[0]] = true;// Gets a list of tables in the database and turns them into a handy format
if ($testing['prim']){// Checks to see if table prim exists
    $sql = "SELECT * FROM prim"; // Pulling all info again after cleaning
    $result = mysql_query($sql) or die('err11');
    $_e = '';
    while ($row = mysql_fetch_assoc($result)){// Cycle through enteries to see what rooms are up
        $_e = $_e . "<a href='' onclick='join(" . $row['room'] . ");'>" . $row['teach'] ."</a><br>";
    }
}else $_e = "Sorry no rooms are open";
mysql_close($con);
?>
<!DOCTYPE html>
<html>
<head>
<script>
function join(er) {
    alert('ffs is this even firing');//this is a debug statement i was using... it was firing
    //THE LINE BELOW DOES NOT SEEM TO WORK
    document.location = "http://***late edit to get rid of the web address lol sorry***start.php?name=" + document.getElementById("name").value + "&room=" + er;
    //THE LINE ABOVE DOES NOT WORK
}
</script>
<title>Portal</title>
</head>
<body>
Name:<input type="text" id='name' name="name"><br><?php echo $_e ?>
</body>
</html> 
```

我尝试了许多不同的小变化，比如 window.location window.location.href 等等等等。也弄乱了退货，只是让我发疯 感谢任何帮助，你们度过了愉快的一天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T02:42:02.440

第一手我想试试

```
<a href='#' onclick=... 
```

但我会进一步调查。

我的想法是尝试以下方法，看看它是否有效。

```
<a href="#" onclick="alert('hi');">hello</a> 
```

那么至少这会告诉你javascript是否在你的浏览器等上正常工作。

您可以尝试将其从 join 重命名为另一个名称，因为 join 是一个 javascript 函数（在数组上操作），也许它有冲突？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T02:43:46.777

`window.open`将为您打开一个新窗口。（见[http://www.javascript-coder.com/window-popup/javascript-window-open.phtml](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)）

或者，您可以设置 href 并使用`target="_blank"`. 这样您就不必使用 javascript，因此更易于访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T03:12:42.583

尝试以下方法并告诉我它是否有效。然后尝试在顶部添加一些 PHP 代码，看看它是否仍然有效。

```
<script>
function test()
{
alert("testing");
document.location = "http://location_edited_out/provingground/start.php?name=abcd&room=1";
}
</script>
<a href="#" onclick="test()">hi</a> 
```

您可以尝试的一件事是将脚本移出“头部”部分并进入正文。

例如：

```
<html>
<head><title>Portal</title>
</head><body>
<script>
function join(er) {
alert('ffs is this even firing');//this is a debug statement i was using... it was firing
//THE LINE BELOW DOES NOT SEEM TO WORK
document.location = "http://***late edit to get rid of the web address lol sorry***start.php?name=" + document.getElementById("name").value + "&room=" + er;
//THE LINE ABOVE DOES NOT WORK
}
</script>
Name:<input type="text" id='name' name="name"><br><?php echo $_e ?>
</body>
</html> 
```

您也可以尝试将脚本放在正文的末尾（在 php echo 命令之后）。

您也可以尝试将它分成两个语句，也许它不喜欢在一行中这样做：

```
var url = "http://webaddr.com/start.php?name=" + document.getElementById("name").value + "&room=" + er;
document.location = url; 
```

[http://www.webmasterworld.com/javascript/3285118.htm](http://www.webmasterworld.com/javascript/3285118.htm)

尝试 window.location.href 或简单地， location.href top.location

?

以下适用于 Internet Explorer，有一个按钮而不是“a href”。

```
<html>
<body>
<script>
function test()
{
alert("testing");
window.location.assign("http://location_edited_out/provingground/start.php?name=abcd&room=1")
}
</script>

<input type='button' value='Load new document' onclick='test()'>
</body></html> 
```

不确定这是否是一个选项？

所以代码是：

```
while ($row = mysql_fetch_assoc($result)){// Cycle through enteries to see what rooms are up
    $_e = $_e . "<input type='button' onclick='join(" . $row['room'] . ");' value='" . $row['teach'] ."'><br>";
}
...
function join(er) {
    alert('ffs is this even firing');//this is a debug statement i was using... it was firing
    window.location.assign( "http://***late edit to get rid of the web address lol sorry***start.php?name=" + document.getElementById("name").value + "&room=" + er);
} 
```

让我知道它是否有效。

# php - 我需要从文件中获取变量的名称

> ID：13784144
> 
> 赞同：-3
> 
> 时间：2012-12-09T02:39:18.153
> 
> 标签：php

正如标题所说，我需要一种根据图片名称设置变量名称的方法（我得到了 100 多张不同的图片）

因为我在另一个 php 文件中为每张图片（如标签）获取了自定义类，例如：

```
$picture1 = "hillside sunset";
$picture2 = "beach cyprus"; 
```

依此类推，所以我需要为每张图片获取每个变量

这是 div 类将成为每个图片名称的当前循环（$PICTURENAME 只是定义此代码的去向，并且与代码无关）：

```
<?php
foreach (glob("img/*.jpg") as $filename)
{
$path = $filename;
$file = basename($path);
$file = basename($path, ".jpg");
echo '<a href="?image='.$file.'"><div class="'.$PICTURENAME.'" id="'.$file.'"><img src="'.$filename.'"> '.$file.' </div></a>';
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T03:02:27.293

不要使用 100 多个变量。使用数据库会更有意义，但如果你不想学习（不过你应该），使用数据结构仍然更有意义。

您可以创建*一个*数组（并将其用作地图），并将文件名作为键，值将是标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:07:05.920

在 PHP 中，您可以使用另一个变量来寻址一个变量：

```
$name = "foo";
${$name} = "bar";

echo $foo; // prints "bar"
echo ${$name}; // the same as above 
```

但是，正如 Kitsune 已经建议的那样，您最好使用其他东西，例如数组。

# c++ - std::exception 没有被捕获？

> ID：13784151
> 
> 赞同：2
> 
> 时间：2012-12-09T02:40:37.023
> 
> 标签：c++, exception

对 glewInit() 的调用失败（据记录，我对此都没有答案，但是....）并引发异常。

不幸的是，它没有被我的任何捕获物捕获，甚至没有（...）。

我究竟做错了什么？

```
try {

   // Initialize GLEW
    if (glewInit() != GLEW_OK)
        throw std::exception("Failed to initialize GLEW\n");

} catch ( std::system_error const& err) {
    fprintf(stdout, "System Error: %s", err.what());
    glfwTerminate(); // Free glfw if it has been allocated
    // Try Again
    this->InitWithSize(_width, _height);
} catch( std::exception const& err) {
    fprintf(stdout, "Exception Found: %s", err.what());
} catch ( ... ) {
    fprintf(stdout,"Unknown Exception Occured\n");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T03:14:48.830

> “我究竟做错了什么？”

好吧，关于所谓的异常没有出现，我没有提出任何假设。

但是这里有一些你做错的事情：

*   将字符串传递给`std::exception`构造函数。那是一个非标准的扩展；[`std::exception`](http://en.cppreference.com/w/cpp/error/exception/exception)没有接受字符串参数的构造函数。如果要传递异常文本，请使用`std::runtime_error`.

*   在可能的抛出之后没有正常的语句意味着您不能确定是否抛出了异常。

*   在异常消息中有换行符。非常有问题的约定。其他来源的例外不会有最后的换行符。

*   报告错误`stdout`。用于`stderr`此。这就是它的用途。

*   释放`catch`子句中的资源。一般来说，会造成狂野的混乱。不要，为此使用析构函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T02:46:10.857

你怎么知道没抓到？

我猜它实际上是被`catch( std::exception const& err)`子句捕获的。但是您忘记`\n`在打印字符串的末尾添加，因此它不会立即出现在行缓冲输出设备上。您的代码中的所有其他`fprintf`s 都有 that `\n`，但这个特定的没有。

将`\n`或 输出添加到`stderr`.

您可能希望这`fprintf`最终看起来像

```
fprintf(stdout, "Exception Found: %s", err.what()); 
```

这意味着`\n`异常文本内部应作为终止符`\n`。如果是这样，那就这样做吧。但是您当前拥有的内容不会立即出现在屏幕上，导致您认为异常没有被捕获。

# ruby-on-rails - Ruby on Rails，如何使用 has_many 名称向 users/show.html.erb 添加项目：通过蓝图

> ID：13784154
> 
> 赞同：0
> 
> 时间：2012-12-09T02:41:54.547
> 
> 标签：ruby-on-rails, templates, activerecord

对于用户拥有蓝图的每个项目，我想显示项目名称和指向 project_path 的链接。谢谢。

这些是我的 ActiveRecords

```
class User < ActiveRecord::Base
  attr_accessible :id, :name
  has_many :blueprints
  has_many :projects, :through => :blueprints
end

class Project < ActiveRecord::Base
  attr_accessible :id, :name
  has_many :blueprints
  has_many :users, :through => :blueprints
end

class Blueprint < ActiveRecord::Base
  attr_accessible :id, :name, :project_id, :user_id
  belongs_to :user
  belongs_to :project
end 
```

我的用户显示控制器

```
def show
  @user = User.find(params[:id])
  @project = Project.find(params[:id])
  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @user }
  end
end 
```

我的视图/用户/Show.html.erb 表

```
 <table>
      <tr>
        <% @projects.each do |p| %>
          <td><%= p.name %></td>
        <% end %>
      </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:27:47.783

> 对于用户拥有蓝图的每个项目，我想显示项目名称和指向 project_path 的链接。

对于这些要求，您可以`@project`从您的操作中删除分配。您需要查看 的`blueprints`关系`@user`，并获取其中`project`每个的关联`blueprints`。

```
<table>
  <tbody>
    <% @user.blueprints.each do |blueprint| %>
      <tr>
        <td><%= link_to blueprint.project.name, project_path(blueprint.project) %></td>
      </tr>
    <% end %>
  </tbody>
</table> 
```

# python - 从 ruby python 调用标准 python 函数

> ID：13784160
> 
> 赞同：0
> 
> 时间：2012-12-09T02:42:30.483
> 
> 标签：python, ruby, rubypython

我正在尝试使用 ruby​​python gem。不知道如何调用像 len 和 set 这样的标准 python 函数。在 python 示例中，我看到了 len(text3) 和 set(text3)。

我如何在 ruby​​python 中调用这些？

[这是 ruby​​python 的链接： http:](http://rubypython.rubyforge.org/) //rubypython.rubyforge.org/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:35:23.750

好吧，我的 Ruby 知识是有限的，我对`rubypython`gem 的知识是不存在的。但是，我确实知道您引用模块的一部分的标准函数，该`__builtin__`模块会自动导入到 python 命名空间中。幸运的是，没有什么可以阻止您再次显式导入它（这在 Python 中是完全安全的）。然后你*也许*可以做类似的事情`__builtin__.set()`。不过，没有保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T01:07:07.310

RubyPython::PyMainClass 有一个公共实例方法 builtin() 您可以使用它来调用标准函数。

# rest - JAXB Jackson - 如何处理地图？

> ID：13784163
> 
> 赞同：2
> 
> 时间：2012-12-09T02:43:08.260
> 
> 标签：rest, jaxb, jackson

我有一个 Web 应用程序，我在其中从我的域对象生成 POJO。我的一个域对象包含一个映射，JAXB 生成以下模式：

```
<xs:element name="persons">
  <xs:complexType>
      <xs:sequence>
          <xs:element name="entry" minOccurs="0" maxOccurs="unbounded">
              <xs:complexType>
                 <xs:sequence>
                    <xs:element name="key" minOccurs="0" type="xs:string"/>
                    <xs:element name="value" minOccurs="0" type="person"/>
                 </xs:sequence>
              </xs:complexType>
          </xs:element>
      </xs:sequence>
   </xs:complexType>
</xs:element> 
```

这是从`HashMap<String, Person>`人员产生的：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "personConfiguration", propOrder = {
    "persons",
})
@XmlRootElement(name = "personConfiguration")
public class PersonConfiguration
{

    @XmlElement(required = true)
    protected PersonConfiguration.Persons persons;

    /**
     * Gets the value of the persons property.
     * 
     * @return
     *     possible object is
     *     {@link PersonConfiguration.Persons }
     *     
     */
    public PersonConfiguration.Persons getPersons() {
        return persons;
    }

    /**
     * Sets the value of the persons property.
     * 
     * @param value
     *     allowed object is
     *     {@link PersonConfiguration.Persons }
     *     
     */
    public void setPersons(PersonConfiguration.Persons value) {
        this.persons = value;
    }

    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "entry"
    })
    public static class Persons
    {

        protected List<PersonConfiguration.Persons.Entry> entry;

        /**
         * Gets the value of the entry property.
         * 
         * <p>
         * This accessor method returns a reference to the live list,
         * not a snapshot. Therefore any modification you make to the
         * returned list will be present inside the JAXB object.
         * This is why there is not a <CODE>set</CODE> method for the entry property.
         * 
         * <p>
         * For example, to add a new item, do as follows:
         * <pre>
         *    getEntry().add(newItem);
         * </pre>
         * 
         * 
         * <p>
         * Objects of the following type(s) are allowed in the list
         * {@link PersonConfiguration.Persons.Entry }
         * 
         * 
         */
        public List<PersonConfiguration.Persons.Entry> getEntry() {
            if (entry == null) {
                entry = new ArrayList<PersonConfiguration.Persons.Entry>();
            }
            return this.entry;
        }

        @XmlAccessorType(XmlAccessType.FIELD)
        @XmlType(name = "", propOrder = {
            "key",
            "value"
        })
        public static class Entry
        {

            protected String key;
            protected Person value;

            /**
             * Gets the value of the key property.
             * 
             * @return
             *     possible object is
             *     {@link String }
             *     
             */
            public String getKey() {
                return key;
            }

            /**
             * Sets the value of the key property.
             * 
             * @param value
             *     allowed object is
             *     {@link String }
             *     
             */
            public void setKey(String value) {
                this.key = value;
            }

            /**
             * Gets the value of the value property.
             * 
             * @return
             *     possible object is
             *     {@link Person }
             *     
             */
            public Person getValue() {
                return value;
            }

            /**
             * Sets the value of the value property.
             * 
             * @param value
             *     allowed object is
             *     {@link Person }
             *     
             */
            public void setValue(Person value) {
                this.value = value;
            }

        }

    }

} 
```

正如所见，JAXB 添加了这一额外级别的间接条目 -> 键、值。难题的其他部分是 Spring MVC，使用 JSON 对象的 REST 调用。

现在基于 XML 的 REST 调用在上面的对象模式下工作得很好，但是当使用具有相同模式的 JSON 消息发送相同的调用时，我得到一个 JSONMappingException。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:29:23.943

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

当使用不同的 XML 和 JSON 绑定提供程序时，很难保持 XML 和 JSON 表示的一致。下面是一个示例，说明如何使用 MOXy 作为 XML 和 JSON 提供程序，所有映射信息作为 JAXB 注释提供。

**根**

下面是一个示例域对象，其中该`persons`字段将根据您的问题生成 XML 模式片段。

```
package forum13784163;

import java.util.Map;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    Map<String, Person> persons;

} 
```

**人**

以下是您的`Person`班级可能看起来的示例。请注意我是如何将该`id`字段映射到 XML 属性的。

```
package forum13784163;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Person {

    @XmlAttribute
    int id;

    String name;

    int age;

} 
```

**jaxb.properties**

要将 MOXy 作为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**输入.json**

如果 MOXy 用作您的 JSON 绑定提供程序，下面是 JSON 表示的样子。

```
{
   "persons" : {
      "entry" : [ {
         "key" : "Jane",
         "value" : {
            "id" : 123,
            "name" : "Jane",
            "age" : 30
         }
      } ]
   }
} 
```

**演示**

在下面的演示代码中，JSON 被解组为对象，然后这些相同的对象被编组为 XML。这是通过`JAXBContext`包含一组元数据的一个来完成的。

```
package forum13784163;

import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.UnmarshallerProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        unmarshaller.setProperty(UnmarshallerProperties.MEDIA_TYPE, "application/json");
        unmarshaller.setProperty(UnmarshallerProperties.JSON_INCLUDE_ROOT, false);
        StreamSource json = new StreamSource("src/forum13784163/input.json");
        Root root = unmarshaller.unmarshal(json, Root.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输出**

下面是生成的 XML。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <persons>
      <entry>
         <key>Jane</key>
         <value id="123">
            <name>Jane</name>
            <age>30</age>
         </value>
      </entry>
   </persons>
</root> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

# javascript - 动态生成表格后点击时难以调用 JavaScript 函数

> ID：13784169
> 
> 赞同：1
> 
> 时间：2012-12-09T02:45:04.883
> 
> 标签：javascript, jquery, ajax

我很难在动态生成的表格中创建一个可点击的按钮，该按钮将发送特定于被点击的表格单元格的数据。

每当用户使用此 AJAX 调用在搜索框中键入内容时，都会生成和修改我的表：

```
 $(document).ready(function(){
        $("#data").keyup(function () {
            $.ajax({
                type: "POST",
                dataType: "JSON",
                data: "data=" + $("#data").val(),
                url: "search1.php",
                success: function(msg){
                    var output = "";
                    for(var i = 0; i < msg.length; i++) {
                        output += '<tr onmouseover=this.style.backgroundColor="#ffff66"; onmouseout=this.style.backgroundColor="#F0F0F0";>';
                        output += '<td>';
                        if (msg[i].website != ''){ output += '<a href = ' + msg[i].website + ' target = "_blank">' + msg[i].name + '</a></td>';}
                        else output += msg[i].name + '</td>';
                        output += '<td class="description">' + msg[i].description + '</td>';
                        output += '<td><input type="button" onclick=' + submit() + ' value=' + msg[i].id + '></td></tr>'; // Here is where I'd like to put in a clickable button 
                    }
                    $("#content").html(output);
                    $("#myTable").trigger("update");
                }
            });
        });
    }); 
```

如果我`submit()`简单地说，它会在为调用`alert("hello")`的每个实例加载页面时运行。有人可以向我解释如何使提交仅在单击其按钮而不是在页面加载时被调用。提前致谢。`onclick``submit()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T02:50:49.717

您必须将`submit()`调用放在带引号的字符串中。msg[i].id 也是如此。HTML 中的所有值都应该被引用。

```
output += '<td><input type="button" onclick="submit()" value="' + msg[i].id + '"></td></tr>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T02:50:55.690

您正在尝试分配`submit()`给按钮的`onclick`，但实际上是在生成 string 时调用该函数`output`。它需要在字符串内的引号中，而不是串联。

```
 output += '<td><input type="button" onclick="submit()" value="' + msg[i].id + '"></td></tr>';
 //----------------------------------------^^^^^^^^^^^^ 
```

更好的策略是完全省略`onclick`属性，并使用 jQuery`.on()`动态分配方法。通常认为动态绑定事件而不是将它们硬编码到 HTML 属性中是一种更好的做法。

```
// No onclick attribute in the string:
 output += '<td><input type="button" value="' + msg[i].id + '"></td></tr>';

// And a call to .on() in the $(document).ready()
$('input[value="'+msg[i]+'"]').on('click', function() {
  submit();
}); 
```

# firefox - XUL listbox.insertItemAt 在几次打开和关闭后失败

> ID：13784170
> 
> 赞同：1
> 
> 时间：2012-12-09T02:45:12.830
> 
> 标签：firefox, firefox-addon, xul

我正在开发一个侧边栏扩展。我遇到的问题是，当打开那个侧边栏时，它会进行一些初始化。这需要填充一个列表。我有一个对象，它具有以下一些功能：

```
 var intializeSidear = {
 initSidebar: function(){
 var listbox_to_init = document.getElementById('generic-list-box'); 
 for(var i = 0; i < 10; i++){
 listbox_to_init.appendItem("Test", i);
 }
 }
 .... 
```

发生的事情是我第一次打开侧边栏时，一切正常。下次我打开它时，它会给出“listbox_to_init.appendItem 不是函数”的错误。（我把它包裹在一个 try/catch 块中）。

为什么会发生这种情况有什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:45:59.013

看来，为了使其正确触发，需要将事件侦听器绑定到窗口加载事件：

```
window.addEventListener("load", function load(event){
window.removeEventListener("load", load, false); //remove listener, no longer needed
    init();
},false); 
```

我不确定为什么会这样。当我警告我从列表框上的 document.getElementById() 检索到的变量时，它显示它是一个 [Xul 对象]，它就是。那么为什么它会做出这样的决定，但为了实际操作 xul 对象，我需要等待窗口加载？

如果有人能提供解释，那就太好了。同时，如果我的代码仍然存在问题或没有其他人回答我的新问题，我将尝试研究并返回这里。

# android - 在按钮上结合背景图像、背景可绘制样式

> ID：13784176
> 
> 赞同：8
> 
> 时间：2012-12-09T02:46:15.450
> 
> 标签：android, android-layout, layout

我想知道是否可以将按钮上的图像和使用可绘制源以及上面的文本结合起来？

我目前在 drawable/red_btn.xml 中使用它作为我的按钮样式

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" >
        <shape>
            <solid
                android:color="#ef4444" />
            <stroke
                android:width="1dp"
                android:color="#992f2f" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
    <item>
        <shape>
            <gradient
                android:startColor="#ef4444"
                android:endColor="#992f2f"
                android:angle="270" />
            <stroke
                android:width="1dp"
                android:color="#992f2f" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
</selector> 
```

然后我的按钮

```
 <Button
                android:id="@+id/testButton"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Income"
                android:textSize="15dip"
                android:background="@drawable/red_btn"
    android:textColor="#fff"
     android:textStyle="bold" /> 
```

看起来像这样

![在此处输入图像描述](../Images/02d7c2a4e631b366ae3668aac7901026.png)

现在我想在这个按钮上方添加另一个.png图像（arrow.png），像这样

![在此处输入图像描述](../Images/6f3af9131a5228723abf35c91a884568.png)

这是可能的，如果，我该怎么做？

提前致谢。 **__________________________________________________________________________________________________________________________________________**

**编辑**

在遵循下面**Luksprog 的**建议后，我现在在 drawable 中有**“red_btn_normal.xml”**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" >
        <shape>
            <solid
                android:color="#ef4444" />
            <stroke
                android:width="1dp"
                android:color="#992f2f" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
    <item>
        <shape>
            <gradient
                android:startColor="#ef4444"
                android:endColor="#992f2f"
                android:angle="270" />
            <stroke
                android:width="1dp"
                android:color="#992f2f" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>

</selector> 
```

和**red_btn_pressed.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:state_pressed="true">
        <shape>
            <solid android:color="#ef4444" />

            <stroke
                android:width="1dp"
                android:color="#992f2f" />

            <corners android:radius="3dp" />

            <padding
                android:bottom="10dp"
                android:left="10dp"
                android:right="10dp"
                android:top="10dp" />
        </shape>
    </item>
    <item>
        <bitmap
            android:gravity="right"
            android:src="@drawable/arrow" />
    </item>

</layer-list> 
```

然后我像这样“red_btn.xml”创建我的按钮

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/red_btn_pressed" android:state_pressed="true"></item>
    <item android:drawable="@drawable/red_btn_normal"></item>

</selector> 
```

最后是我的按钮

```
 <Button
                android:id="@+id/testButton"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Income"
                android:textSize="15dip"
                android:background="@drawable/red_btn"

    android:textColor="#fff"
     android:textStyle="bold" /> 
```

问题是它只在我**单击**按钮时显示白色箭头，而在**未按下时不**显示。代码有什么问题？=)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-09T09:23:02.580

> 我想知道是否可以将按钮上的图像和使用可绘制源以及上面的文本结合起来？

是的，这是可能的。您的选择器将变为：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/red_btn_pressed" android:state_pressed="true"></item>
    <item android:drawable="@drawable/red_btn_normal"></item>

</selector> 
```

其中两个drawables是两个`layer-list`drawables，第一个项目是初始选择器中的项目，第二个是`.png`包装为位图drawbale的图像。例如，`red_btn_pressed.xml`您将拥有：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
        <shape>
            <solid android:color="#ef4444" />

            <stroke
                android:width="1dp"
                android:color="#992f2f" />

            <corners android:radius="3dp" />

            <padding
                android:bottom="10dp"
                android:left="10dp"
                android:right="10dp"
                android:top="10dp" />
        </shape>
    </item>
    <item>
        <bitmap
            android:gravity="right"
            android:src="@drawable/arrow" />
    </item>

</layer-list> 
```

将`red_btn_normal.xml`是：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
        <shape>
            <gradient
                android:angle="270"
                android:endColor="#992f2f"
                android:startColor="#ef4444" />

            <stroke
                android:width="1dp"
                android:color="#992f2f" />

            <corners android:radius="3dp" />

            <padding
                android:bottom="10dp"
                android:left="10dp"
                android:right="10dp"
                android:top="10dp" />
        </shape>
    </item>
    <item>
        <bitmap android:src="@drawable/allowed" android:gravity="right"/>
    </item>

</layer-list> 
```

**请记住，只有**当 的大小允许时，箭头图像才会位于文本的右侧`Button`（作为其`Button`背景的一部分）。如果您试图在 的文本和该箭头图像之间施加某种定位关系，`Button`那么您需要扩展`Button`该类并自己做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T12:16:01.400

我选择了简单的

```
<Button
                android:id="@+id/testButton"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Income"
                android:textSize="15dip"
                android:background="@drawable/red_btn"
android:drawableRight="@drawable/arrow"
    android:textColor="#fff"
     android:textStyle="bold" /> 
```

# php - 登录失败时删除此 URL 字符串并简单地显示 div 错误

> ID：13784177
> 
> 赞同：0
> 
> 时间：2012-12-09T02:46:19.023
> 
> 标签：php, zend-framework

我的开发人员根据 URL 中的字符串构建了我们的注册页面，以便在登录失败时显示一个 div。

当登录失败时，这将添加到 URL`/login?msg=invalid`

我 login.phtml 中基于 msg= 参数显示错误消息的 PHP 是

```
<?php 
$msg = "";
$msg = $_GET['msg'];
if($msg==""){ $showMsg = ""; }
elseif($msg=="invalid"){ $showMsg = '            <div class="alert alert-error">
        <a class="close" data-dismiss="alert">×</a>
        <strong>Error!</strong> Login or password is incorrect!
    </div>'; }
elseif($msg=="disabled"){ $showMsg = "Your account has been disabled."; }
elseif($msg==2){ $showMsg = "Your account is not activated. Please check your email."; }
?> 
```

在控制器中，重定向到该 URL 是

```
 else //email id does not exist in our database
        {
            //redirecting back with invalid email(invalid) msg=invalid.
            $this->_redirect($url."?msg=invalid");
        } 
```

我知道禁用帐户等还有一些其他验证类型。我正在重新设计整个界面，并希望摆脱这种验证，以便在登录失败时显示 div 标签但不显示 URL字符串。

如果重要的话，我要显示的新 div 是

```
<div class="alert alert-error alert-login">
    Email or password incorrect
</div> 
```

我想在我的 login.phtml 和控制器中替换我自己的 php，但不是一个好的程序员。我可以用什么替换`$this->_redirect($url."?msg=invalid");`以便没有字符串添加到 URL 并显示适当的 div 标签？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:01:42.300

在你的控制器的 loginAction 中改变它

```
$this->_redirect($url."?msg=invalid"); 
```

至

```
$this->view->message = $msg; 
```

然后将您的代码添加到 login.phtml

```
<?php if ($this->message) :?>
  <div class="alert alert-error alert-login">
  Email or password incorrect
  </div>
<? endif; ?>
... your form code there 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T03:49:46.567

`msg`通过参数传递 a`GET`对我来说有点奇怪。

请参阅此线程，讨论其他向页面发送消息的方法，使用`sessions`或`cookies`，`database`在[这里](https://stackoverflow.com/questions/6021520/cookie-vs-session-based-flash-message)。

我不熟悉 zend 框架，但必须有一种方法可以通过会话设置“flash”消息。

# jquery - 如何在这个 jQuery Slider 插件中为图像创建链接

> ID：13784178
> 
> 赞同：2
> 
> 时间：2012-12-09T02:46:31.537
> 
> 标签：jquery, css, hyperlink, slider, image

好的，所以我正在尝试在滑块中添加指向我的每张照片的链接。我已经在其他 2 个网站上完成了它，但是当我添加锚标记时，这个编码与其他 2 个不同。

```
<a href="http://www.google.com 
```

我尝试将它放在 HTML 模板的不同部分，但它不起作用，所以这是我的编码。我知道它可能是我想念的简单的东西？

```
<div class="pad-slider">
        <div class="main-slider">
            <ul class="items">
                <li>
                    <img src="images/slide1.jpg" alt="" />
                    <div class="slider-banner"><span>The Next Level of Your Success</span></div>
                </li>
                <li>
                    <img src="images/slide2.jpg" alt="" />
                    <div class="slider-banner"><span>We offer Different Ways of Problem Solving</span></div>
                </li>
                <li>
                    <img src="images/slide3.jpg" alt="" />
                    <div class="slider-banner"><span>We craft practical solutions</span></div>
                </li>
            </ul>
        </div>
    </div> 
```

如果您需要更多信息，请告诉我。这是我与在主页上实时看到的滑块一起使用的模板网站：[**链接**](http://livedemo00.template-help.com/wt_pro_2.0_free_sample_template/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T03:50:19.480

您使用的特定**jQuery**滑块名为**[TMSlider 0.4.1](http://livedemo00.template-help.com/wt_pro_2.0_free_sample_template/js/tms-0.4.x.js)**，如果您正确设置 HTML，它允许 SPAN 文本成为链接。

此外，如果您希望实际图像成为链接（可能与上述链接相同或不同），则添加一个额外`div`的 CSS 来实现该功能。

[**jsFiddle 演示**](http://jsfiddle.net/WuUKH/)

HTML部分：

```
<div class="pad-slider">
    <div class="main-slider">
        <ul class="items">
            <li>
              <img src="http://img186.imageshack.us/img186/1866/halo3wallpaper1024copy9yf1.jpg" alt="" />
              <div class="slider-banner">
                <div class="imageLink" title="Click here to open Google IMAGES website." onclick="window.open('http://images.google.com/'); return true;"></div>
                <a href="http://www.google.com">
                  <span>Click here to open Google MAIN website.</span>
                </a>
              </div>
            </li>
            <li>
              <img src="http://img91.imageshack.us/img91/6278/telagawarnalakewallpapew.jpg" alt="" />
              <div class="slider-banner">
                <div class="imageLink" title="Click here to open Bing IMAGES website."  onclick="window.open('www.bing.com/images/'); return true;"></div>
                <a href="http://www.bing.com">
                  <span>Click here to open Bing MAIN website.</span>
                </a>
              </div>
            </li>
            <li>
              <img src="http://img393.imageshack.us/img393/9093/sky04jr4.jpg" alt="" />
              <div class="slider-banner">
                <div class="imageLink" title="Click here to open AltaVista IMAGES website"  onclick="window.open('http://images.search.yahoo.com/'); return true;"></div>
                  <a href="http://us.altavista.com/">
                    <span>Click here to open AltaVista MAIN website.</span>
                  </a>
                </div>
            </li>
        </ul>
    </div>
</div> 
```

CSS部分：

```
.imageLink {
  width: 950px;
  height: 440px;
  margin-top: -440px;
  cursor: pointer;
} 
```

调整添加的 CSS 的宽度和高度，使其与您的 Sliders 大小匹配，但使用负值`margin-top`.

**备用链接格式：**如果您希望点击的图像不打开单独的选项卡/窗口，那么您可以使用此语法让 onclick 事件使用相同的浏览器窗口。

```
onclick="window.location.href = 'http://www.bing.com/images/'; return true;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T05:28:06.717

一个老问题，但可能对其他试图解决相同问题的人有所帮助。

只需在 li 标签中添加一个链接：

```
<li>
 <img src="banner.jpg" border="0" alt=""/>
 <div class="banner"> </div><a href="http://www.google.com" class="banner"></a>
</li> 
```

在 css 中，添加：

```
a.banner {width:100%; height:100%; position:absolute} 
```

来源：[http ://www.youtube.com/watch?v=0CyCyJkOD9Q&noredirect=1](http://www.youtube.com/watch?v=0CyCyJkOD9Q&noredirect=1)

# ios - 使用缩放的 Objective-C iOS 裁剪图像？

> ID：13784182
> 
> 赞同：4
> 
> 时间：2012-12-09T02:47:29.063
> 
> 标签：ios, zooming, crop

我正在尝试使用此代码来允许用户在我的应用程序中缩放和裁剪他们的图像： [https ://github.com/iosdeveloper/ImageCropper/tree/master/Classes/ImageCropper](https://github.com/iosdeveloper/ImageCropper/tree/master/Classes/ImageCropper)

代码片段

```
float zoomScale = 1.0 / [scrollView zoomScale];

CGRect rect;
rect.origin.x = [scrollView contentOffset].x * zoomScale;
rect.origin.y = [scrollView contentOffset].y * zoomScale;
rect.size.width = [scrollView bounds].size.width * zoomScale;
rect.size.height = [scrollView bounds].size.height * zoomScale;

CGImageRef cr = CGImageCreateWithImageInRect([[imageView image] CGImage], rect);

UIImage *cropped = [UIImage imageWithCGImage:cr];

CGImageRelease(cr);

[delegate imageCropper:self didFinishCroppingWithImage:cropped]; 
```

但它没有考虑旋转的图像（我猜这是 iPhone 图像上的某种元数据）。我不想让用户画一个矩形来裁剪，因为我更喜欢这个界面。

有人能告诉我如何让它不旋转我的图像吗？

如果有帮助，我将在 iOS 5 和 6 中构建。

[编辑] 此外，这在 Game Center 应用程序中很好地完成了上传您的个人资料图片。有谁知道我在哪里可以找到它的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:15:17.367

我在这里找到了一个答案，可以帮助我做我想要 [的 iOS：裁剪从 UIImagePickerController 相机抓取的静态图像，并带有叠加层](https://stackoverflow.com/questions/8494798/ios-cropping-a-still-image-grabbed-from-a-uiimagepickercontroller-camera-with-o?rq=1)

有兴趣的人的代码片段

```
float zoomScale = 1.0 / [scrollView zoomScale];

CGRect rect;
NSLog(@"contentOffset is :%f,%f",[scrollView contentOffset].x,[scrollView contentOffset].y);
rect.origin.x = fabsf([scrollView contentOffset].x * zoomScale);
rect.origin.y = fabsf([scrollView contentOffset].y * zoomScale);
rect.size.width = fabsf([scrollView bounds].size.width * zoomScale);
rect.size.height = fabsf([scrollView bounds].size.height * zoomScale);

UIGraphicsBeginImageContextWithOptions( CGSizeMake( rect.size.width,
                                                   rect.size.height),
                                       NO,
                                       0.);
[[imageView image] drawAtPoint:CGPointMake( -rect.origin.x, -rect.origin.y)
            blendMode:kCGBlendModeCopy
                alpha:1.];
UIImage *croppedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# c# - 如果需要“虚拟”以允许派生类覆盖它，为什么我需要“密封”方法？

> ID：13784191
> 
> 赞同：0
> 
> 时间：2012-12-09T02:50:22.163
> 
> 标签：c#, .net, oop

还是我在这里遗漏了一些基本的东西？？

因为密封方法避免它在派生类中被覆盖，而虚拟方法允许它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T03:07:10.653

`sealed`用于防止子类覆盖`virtual`您覆盖的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T03:08:51.520

1.  该`virtual`关键字将允许您（或使用您的代码的人）用他们自己的逻辑覆盖给定的方法。

2.  该`abstract`关键字将迫使您（或使用您的代码的其他人）用您自己的逻辑覆盖它。

3.  该`sealed`关键字将让您（或使用您的代码的人）阻止对方法的任何进一步修改。

**如果您不添加“密封”，则可以再次覆盖被覆盖的方法。**

当您想到这些关键字时，请考虑两种情况：您可以自己编写代码，也可以创建 DLL 和代码库供他人使用。后一种情况通常需要使用密封的、抽象的和虚拟的。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T03:04:59.967

方法**不要**是`sealed`or `virtual`。您不需要指定任何内容，这反过来**又不**会让派生类覆盖它们。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-09T02:53:50.233

~~方法可以是虚拟的，但只有类可以密封。~~ 密封类不能被继承。

资料来源：http: [//msdn.microsoft.com/en-us/library/88c54tsw (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/88c54tsw(v=vs.71).aspx)

编辑：好的，我错了，可以密封一个方法，但只有一个已经覆盖另一个，然后关键字阻止进一步覆盖该方法。

来源： http: [//msdn.microsoft.com/en-us/library/aa645769 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645769(v=vs.71).aspx)

# python - 创建一个空的 Pandas DataFrame，然后填充它？

> ID：13784192
> 
> 赞同：725
> 
> 时间：2012-12-09T02:50:38.060
> 
> 标签：python, dataframe, pandas

我从这里的熊猫 DataFrame 文档开始：http: [//pandas.pydata.org/pandas-docs/stable/dsintro.html](http://pandas.pydata.org/pandas-docs/stable/dsintro.html)

我想用时间序列计算中的值迭代地填充 DataFrame。所以基本上，我想用列 A、B 和时间戳行来初始化 DataFrame，全为 0 或全为 NaN。

然后我会添加初始值并检查这些数据，从之前的行计算新行，比如说`row[A][t] = row[A][t-1]+1`左右。

我目前正在使用下面的代码，但我觉得它有点难看，必须有一种方法可以直接使用 DataFrame 来做到这一点，或者一般来说只是一种更好的方法。注意：我使用的是 Python 2.7。

```
import datetime as dt
import pandas as pd
import scipy as s

if __name__ == '__main__':
    base = dt.datetime.today().date()
    dates = [ base - dt.timedelta(days=x) for x in range(0,10) ]
    dates.sort()

    valdict = {}
    symbols = ['A','B', 'C']
    for symb in symbols:
        valdict[symb] = pd.Series( s.zeros( len(dates)), dates )

    for thedate in dates:
        if thedate > dates[0]:
            for symb in valdict:
                valdict[symb][thedate] = 1+valdict[symb][thedate - dt.timedelta(days=1)]

    print valdict 
```

* * *

## 回答 #1

> 赞同：685
> 
> 时间：2019-06-25T02:51:37.393

# 永远不要增长 DataFrame！

> TLDR；（只需阅读粗体字）

这里的大多数答案都会告诉你如何创建一个空的 DataFrame 并填写它，但没有人会告诉你这是一件坏事。

这是我的建议：**在列表中累积数据，而不是 DataFrame。**

使用列表收集数据，然后在准备好时初始化 DataFrame。list-of-lists 或 list-of-dicts 格式都可以使用，`pd.DataFrame`两者都接受。

```
data = []
for a, b, c in some_function_that_yields_data():
    data.append([a, b, c])

df = pd.DataFrame(data, columns=['A', 'B', 'C']) 
```

这种方法的优点：

1.  **一次性追加到列表并创建一个 DataFrame 总是**比创建一个空的 DataFrame（或 NaN 之一）并一遍又一遍地追加到它更便宜。

2.  **列表还占用更少的内存，并且是一种更轻的数据结构，可以使用**、追加和删除（如果需要）。

3.  **`dtypes`被自动推断**（而不是分配`object`给所有这些）。

4.  **A`RangeIndex`会自动为您的数据创建**，而您不必小心为每次迭代时附加的行分配正确的索引。

如果您还不相信，[文档](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.append.html)中也提到了这一点：

> 迭代地将行附加到 DataFrame 可能比单个连接的计算密集度更高。更好的解决方案是将这些行附加到列表中，然后将列表与原始 DataFrame 一次性连接起来。

### 但是，如果我的函数返回需要合并成一个大数据帧的较小数据帧怎么办？

没关系，您仍然可以通过增长或创建较小 DataFrame 的 python 列表，然后调用`pd.concat`.

```
small_dfs = []
for small_df in some_function_that_yields_dataframes():
    small_dfs.append(small_df)

large_df = pd.concat(small_dfs, ignore_index=True) 
```

或者，更简洁地说：

```
large_df = pd.concat(
    list(some_function_that_yields_dataframes()), ignore_index=True) 
```

* * *

* * *

# 这些选项太可怕了

### `append`或`concat`在循环内

这是我从初学者那里看到的最大错误：

```
df = pd.DataFrame(columns=['A', 'B', 'C'])
for a, b, c in some_function_that_yields_data():
    df = df.append({'A': i, 'B': b, 'C': c}, ignore_index=True) # yuck
    # or similarly,
    # df = pd.concat([df, pd.Series({'A': i, 'B': b, 'C': c})], ignore_index=True) 
```

`append`为您拥有的每个或`concat`操作重新分配内存。将此与循环结合起来，您就有了**二次复杂度运算**。

与此相关的另一个错误`df.append`是用户倾向于忘记**append 不是就地函数**，因此必须将结果分配回。您还必须担心 dtypes：

```
df = pd.DataFrame(columns=['A', 'B', 'C'])
df = df.append({'A': 1, 'B': 12.3, 'C': 'xyz'}, ignore_index=True)

df.dtypes
A     object   # yuck!
B    float64
C     object
dtype: object 
```

处理对象列从来都不是一件好事，因为 pandas 无法对这些列进行矢量化操作。你需要这样做来修复它：

```
df.infer_objects().dtypes
A      int64
B    float64
C     object
dtype: object 
```

### `loc`在一个循环内

我还看到`loc`用于附加到创建为空的 DataFrame：

```
df = pd.DataFrame(columns=['A', 'B', 'C'])
for a, b, c in some_function_that_yields_data():
    df.loc[len(df)] = [a, b, c] 
```

和以前一样，您没有预先分配每次所需的内存量，因此**每次创建新行时内存都会重新增长**。它和 一样糟糕`append`，甚至更丑陋。

### NaN 的空 DataFrame

然后，创建一个 NaN 的 DataFrame，以及与之相关的所有注意事项。

```
df = pd.DataFrame(columns=['A', 'B', 'C'], index=range(5))
df
     A    B    C
0  NaN  NaN  NaN
1  NaN  NaN  NaN
2  NaN  NaN  NaN
3  NaN  NaN  NaN
4  NaN  NaN  NaN 
```

它创建一个对象列的 DataFrame，就像其他列一样。

```
df.dtypes
A    object  # you DON'T want this
B    object
C    object
dtype: object 
```

附加仍然具有上述方法的所有问题。

```
for i, (a, b, c) in enumerate(some_function_that_yields_data()):
    df.iloc[i] = [a, b, c] 
```

* * *

* * *

# 证据就在布丁里

对这些方法进行计时是查看它们在内存和效用方面有多大差异的最快方法。

[![在此处输入图像描述](../Images/0f59961086a724c74f86b91d7e829a1c.png)](https://i.stack.imgur.com/sGIV6.png)

[基准代码供参考。](https://gist.github.com/Coldsp33d/ea080f580ab3a3b75c2f40c201d50164)

* * *

## 回答 #2

> 赞同：410
> 
> 时间：2012-12-09T09:40:46.303

这里有几个建议：

用于[`date_range`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.date_range.html)索引：

```
import datetime
import pandas as pd
import numpy as np

todays_date = datetime.datetime.now().date()
index = pd.date_range(todays_date-datetime.timedelta(10), periods=10, freq='D')

columns = ['A','B', 'C'] 
```

*注意：我们可以简单地通过编写来创建一个空的 DataFrame（带`NaN`s）：*

```
df_ = pd.DataFrame(index=index, columns=columns)
df_ = df_.fillna(0) # with 0s rather than NaNs 
```

要对数据进行这些类型的计算，请使用 numpy 数组：

```
data = np.array([np.arange(10)]*3).T 
```

因此我们可以创建 DataFrame：

```
In [10]: df = pd.DataFrame(data, index=index, columns=columns)

In [11]: df
Out[11]: 
            A  B  C
2012-11-29  0  0  0
2012-11-30  1  1  1
2012-12-01  2  2  2
2012-12-02  3  3  3
2012-12-03  4  4  4
2012-12-04  5  5  5
2012-12-05  6  6  6
2012-12-06  7  7  7
2012-12-07  8  8  8
2012-12-08  9  9  9 
```

* * *

## 回答 #3

> 赞同：218
> 
> 时间：2017-01-08T04:18:18.757

如果您只是想创建一个空数据框并稍后用一些传入的数据框填充它，请尝试以下操作：

```
newDF = pd.DataFrame() #creates a new dataframe that's empty
newDF = newDF.append(oldDF, ignore_index = True) # ignoring index is optional
# try printing some data from newDF
print newDF.head() #again optional 
```

在这个例子中，我使用[这个 pandas 文档](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html)来创建一个新的数据框，然后使用[append](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.append.html)将 oldDF 中的数据写入 newDF。

如果我必须不断将来自多个 oldDF 的新数据附加到这个 newDF 中，我只需使用 for 循环来迭代 [pandas.DataFrame.append()](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.append.html)

* * *

## 回答 #4

> 赞同：157
> 
> 时间：2018-04-23T05:29:03.840

**用列名初始化空框架**

```
import pandas as pd

col_names =  ['A', 'B', 'C']
my_df  = pd.DataFrame(columns = col_names)
my_df 
```

**将新记录添加到框架**

```
my_df.loc[len(my_df)] = [2, 4, 5] 
```

您可能还想传递字典：

```
my_dic = {'A':2, 'B':4, 'C':5}
my_df.loc[len(my_df)] = my_dic 
```

**将另一个框架附加到现有框架**

```
col_names =  ['A', 'B', 'C']
my_df2  = pd.DataFrame(columns = col_names)
my_df = my_df.append(my_df2) 
```

* * *

**性能注意事项**

如果要在循环中添加行，请考虑性能问题。对于前 1000 条记录，“my_df.loc”性能更好，但随着循环中记录数量的增加，它会逐渐变慢。

如果您打算在一个大循环内进行精简（比如 10M‌ 记录左右），最好将这两者混合使用；用 iloc 填充数据框，直到大小达到 1000 左右，然后将其附加到原始数据框，并清空临时数据框。这将使您的性能提高大约 10 倍。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-19T16:59:51.653

简单地：

```
import numpy as np
import pandas as pd

df=pd.DataFrame(np.zeros([rows,columns]) 
```

然后填充它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-29T11:06:28.697

假设有 19 行的数据框

```
index=range(0,19)
index

columns=['A']
test = pd.DataFrame(index=index, columns=columns) 
```

保持 A 列不变

```
test['A']=10 
```

将 b 列保持为循环给出的变量

```
for x in range(0,19):
    test.loc[[x], 'b'] = pd.Series([x], index = [x]) 
```

您可以将第一个 x 替换为`pd.Series([x], index = [x])`任何值

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-24T14:30:46.207

这是我用循环从多个列表制作动态数据框的方法

```
x = [1,2,3,4,5,6,7,8]
y = [22,12,34,22,65,24,12,11]
z = ['as','ss','wa', 'ss','er','fd','ga','mf']
names = ['Bob', 'Liz', 'chop'] 
```

一个循环

```
def dataF(x,y,z,names):
    res = []

    for t in zip(x,y,z):
        res.append(t)

    return pd.DataFrame(res,columns=names) 
```

结果

```
dataF(x,y,z,names) 
```

[![在此处输入图像描述](../Images/0f21604446f9ee7e02025ba6f231d8cf.png)](https://i.stack.imgur.com/VbKSg.png)

# android - AVD 缺少 Google Play 服务

> ID：13784198
> 
> 赞同：18
> 
> 时间：2012-12-09T02:51:08.573
> 
> 标签：android, google-play-services

我最近开始为 Android 开发，在我的应用程序中尝试使用谷歌地图时遇到了麻烦。我下载了适用于 Android 的 Google Maps API v2，并且已经根据 Google Developers Site 执行了所有必需的步骤。

我的问题是，虽然应用程序运行，但在应该显示地图的地方有一条文字说我的设备缺少 Google Play 服务。

我已经从 SDK 下载了 Google Play 服务，将库导入到我的项目中，还导入了 .JAR 文件。

我使用的是 Netbeans，而不是 Eclipse，所以我在网上找到的许多解决方案对我没有用。我希望你能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-01T23:27:56.670

遗憾的是，您不能使用模拟器运行使用 Google Play 服务的应用程序。来自[http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)：*“Android 模拟器不支持 Google Play 服务 - 要使用 API 进行开发，您需要提供开发设备，例如 Android手机或平板电脑。”*

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-17T12:06:48.617

来自谷歌自己的网站[http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

> 如果您想在模拟器上测试您的应用程序，请展开 Android 4.2.2 (API 17) 或更高版本的目录，选择 Google APIs，然后安装它。然后创建一个以 Google API 作为平台目标的新 AVD。注意：只有 Android 4.2.2 及更高版本的 Google API 平台包含 Google Play 服务。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-13T22:38:46.543

我遇到了同样的问题并找到了[解决方案](https://stackoverflow.com/a/17873912/1627688)：

这里是更新的[gms](https://www.dropbox.com/s/3nhea18k7ic2gpb/com.google.android.gms-20130716.apk)和[vending](https://www.dropbox.com/s/hznsfc03shud2l9/com.android.vending-20130716.apk)文件。与以前相同的说明：使用任何 cpu/abi、非 google-api 目标（版本 10-17 工作）和 gpu 仿真打开或关闭创建一个新模拟器，然后安装文件：

```
adb install com.android.vending-20130716.apk 
adb install com.google.android.gms-20130716.apk 
```

如果您要升级现有的模拟器，那么您可能需要通过以下方式卸载以前的版本：

```
adb uninstall com.android.vending
adb uninstall com.google.android.gms 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-02T09:05:51.350

波纹管链接包含适用于 Android 4.2.2 或更高版本的解决方案

[如何在 Android 模拟器中安装 Google Play 服务](http://hintdesk.com/how-to-install-google-maps-in-android-emulator-and-use-it-in-intellij-idea/)

> 1.1 启动你的模拟器。断开任何其他 Android 设备（例如您的智能手机）与计算机的连接。1.2 下载这两个文件
> 
> com.android.vending-19032013.apk：[http](http://www.mediafire.com/download.php?7jfar2v1bzx6v59) ://www.mediafire.com/download.php? 7jfar2v1bzx6v59 com.google.android.gms-19032013.apk：[http ://www.mediafire.com/download.php ?4o9fz413uavlblf](http://www.mediafire.com/download.php?4o9fz413uavlblf)
> 
> 1.3 打开命令控制台，进入\platform-tools
> 
> 用命令安装上面的两个文件
> 
> adb install \com.android.vending-19032013.apk adb install \com.google.android.gms-19032013.apk

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T12:41:06.717

是的，您可以在模拟器上使用 Google 地图。但是，它不受官方支持，因此需要一些工作。按照此[链接](https://stackoverflow.com/a/14271933/2050917)上的信息，我取得了最大的成功。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-20T09:28:10.807

我找到了这个，希望对你有帮助；）

[在 Android 模拟器上安装 Google Play](http://piotrbuda.eu/2012/05/installing-google-play-on-android-emulator.html)

[在您的模拟器中运行 Google Play 服务](http://blog.apkudo.com/2012/08/08/run-google-play-on-an-emulator-and-pretend-to-be-any-device/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-08T02:21:23.127

如果有人仍然遇到此问题，请首先尝试使用 Google API 作为平台目标来创建您的模拟器。这样做之后，我注意到我的 Google Play 服务不是模拟器上的正确版本。

在尝试破解解决方案时，我偶然发现了[这里](https://developers.google.com/android/reference/com/google/android/gms/common/GoogleApiAvailability)`GoogleApiAvailability`的课程。谷歌在处理兼容性问题方面做得非常出色。

`GoogleApiAvailability.isGooglePlayServicesAvailable(Context)`返回一个整数状态码，可以直接输入`getErrorDialog(Activity, errorCode, requestCode)`它返回一个`Dialog`开箱即用的完美工作。如果您的 Play 服务已过期，该对话框会将您重定向到更新程序...如果它们丢失，它会将您重定向到安装程序等...

我想我会分享这个很棒的功能，以防有人正在寻找可以在生产代码和测试中工作的修复程序。

# android - 如何在android上存储数据以便快速检索

> ID：13784199
> 
> 赞同：1
> 
> 时间：2012-12-09T02:51:36.173
> 
> 标签：android

我正在尝试编写一个应用程序来检索用户存储的数据。什么是存储这些数据的最佳方式。数据有大量行，但每个字段的数据很少。最初我正在考虑使用 Sqlite ，但我认为读取调用非常慢，需要根据[Vogella 的线程](http://www.vogella.com/articles/AndroidSQLite/article.html)在后台线程中实现。

我需要极快的检索速度。

我还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T02:54:21.657

SQLite 并不慢。对于我的包含数千个条目的测验应用程序来说，这几乎是即时的。

阅读[此](http://developer.android.com/guide/topics/data/data-storage.html)内容以了解有关它们的选项和详细信息。

# python - 如何为所有子图设置一个颜色条

> ID：13784201
> 
> 赞同：304
> 
> 时间：2012-12-09T02:52:45.657
> 
> 标签：python, matplotlib, subplot, colorbar

我花了很长时间研究如何让两个子图共享相同的 y 轴，并在 Matplotlib 中两者之间共享一个颜色条。

发生的事情是，当我在or中调用该`colorbar()`函数时，它会自动缩放绘图，以便颜色条加上绘图将适合“子图”边界框，导致两个并排的图是两个非常不同的尺寸。`subplot1``subplot2`

为了解决这个问题，我尝试创建第三个子图，然后我破解了它以仅显示颜色条来渲染任何图。唯一的问题是，现在两个地块的高度和宽度是不均匀的，我不知道如何让它看起来不错。

这是我的代码：

```
from __future__ import division
import matplotlib.pyplot as plt
import numpy as np
from matplotlib import patches
from matplotlib.ticker import NullFormatter

# SIS Functions
TE = 1 # Einstein radius
g1 = lambda x,y: (TE/2) * (y**2-x**2)/((x**2+y**2)**(3/2)) 
g2 = lambda x,y: -1*TE*x*y / ((x**2+y**2)**(3/2))
kappa = lambda x,y: TE / (2*np.sqrt(x**2+y**2))

coords = np.linspace(-2,2,400)
X,Y = np.meshgrid(coords,coords)
g1out = g1(X,Y)
g2out = g2(X,Y)
kappaout = kappa(X,Y)
for i in range(len(coords)):
    for j in range(len(coords)):
        if np.sqrt(coords[i]**2+coords[j]**2) <= TE:
            g1out[i][j]=0
            g2out[i][j]=0

fig = plt.figure()
fig.subplots_adjust(wspace=0,hspace=0)

# subplot number 1
ax1 = fig.add_subplot(1,2,1,aspect='equal',xlim=[-2,2],ylim=[-2,2])
plt.title(r"$\gamma_{1}$",fontsize="18")
plt.xlabel(r"x ($\theta_{E}$)",fontsize="15")
plt.ylabel(r"y ($\theta_{E}$)",rotation='horizontal',fontsize="15")
plt.xticks([-2.0,-1.5,-1.0,-0.5,0,0.5,1.0,1.5])
plt.xticks([-2.0,-1.5,-1.0,-0.5,0,0.5,1.0,1.5])
plt.imshow(g1out,extent=(-2,2,-2,2))
plt.axhline(y=0,linewidth=2,color='k',linestyle="--")
plt.axvline(x=0,linewidth=2,color='k',linestyle="--")
e1 = patches.Ellipse((0,0),2,2,color='white')
ax1.add_patch(e1)

# subplot number 2
ax2 = fig.add_subplot(1,2,2,sharey=ax1,xlim=[-2,2],ylim=[-2,2])
plt.title(r"$\gamma_{2}$",fontsize="18")
plt.xlabel(r"x ($\theta_{E}$)",fontsize="15")
ax2.yaxis.set_major_formatter( NullFormatter() )
plt.axhline(y=0,linewidth=2,color='k',linestyle="--")
plt.axvline(x=0,linewidth=2,color='k',linestyle="--")
plt.imshow(g2out,extent=(-2,2,-2,2))
e2 = patches.Ellipse((0,0),2,2,color='white')
ax2.add_patch(e2)

# subplot for colorbar
ax3 = fig.add_subplot(1,1,1)
ax3.axis('off')
cbar = plt.colorbar(ax=ax2)

plt.show() 
```

* * *

## 回答 #1

> 赞同：386
> 
> 时间：2012-12-09T05:20:00.423

只需将颜色条放在它自己的轴上并使用`subplots_adjust`它为它腾出空间。

举个简单的例子：

```
import numpy as np
import matplotlib.pyplot as plt

fig, axes = plt.subplots(nrows=2, ncols=2)
for ax in axes.flat:
    im = ax.imshow(np.random.random((10,10)), vmin=0, vmax=1)

fig.subplots_adjust(right=0.8)
cbar_ax = fig.add_axes([0.85, 0.15, 0.05, 0.7])
fig.colorbar(im, cax=cbar_ax)

plt.show() 
```

![在此处输入图像描述](../Images/b4552ac447062c54ccf308bb6d6550e6.png)

`im`请注意，即使值的范围由`vmin`和设置，颜色范围也将由绘制的最后一张图像（产生）设置`vmax`。例如，如果另一个图的最大值更高，则值高于最大值的点`im`将以统一颜色显示。

* * *

## 回答 #2

> 赞同：184
> 
> 时间：2014-05-22T00:19:07.927

您可以使用带有轴列表的`ax`参数来简化 Joe Kington 的代码。`figure.colorbar()`从[文档中](https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html?highlight=colorbar#matplotlib.figure.Figure.colorbar)：

> 斧头
> 
> > 无 | 父坐标轴对象，新颜色条坐标轴的空间将从该对象中被盗。如果给出了轴列表，它们都将被调整大小，以便为颜色条轴腾出空间。

```
import numpy as np
import matplotlib.pyplot as plt

fig, axes = plt.subplots(nrows=2, ncols=2)
for ax in axes.flat:
    im = ax.imshow(np.random.random((10,10)), vmin=0, vmax=1)

fig.colorbar(im, ax=axes.ravel().tolist())

plt.show() 
```

![1](../Images/dc1dd2444f8c9bcf0f4567da5acf08d9.png)

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2016-08-14T08:09:36.850

此解决方案不需要手动调整轴位置或颜色条大小，适用于多行*和*单行布局，并且适用于`tight_layout()`. 它改编自一个[画廊示例](http://matplotlib.org/examples/axes_grid/demo_axes_grid2.html)，使用`ImageGrid`matplotlib 的[AxesGrid 工具箱](http://matplotlib.org/mpl_toolkits/axes_grid/users/overview.html)。

```
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.axes_grid1 import ImageGrid

# Set up figure and image grid
fig = plt.figure(figsize=(9.75, 3))

grid = ImageGrid(fig, 111,          # as in plt.subplot(111)
                 nrows_ncols=(1,3),
                 axes_pad=0.15,
                 share_all=True,
                 cbar_location="right",
                 cbar_mode="single",
                 cbar_size="7%",
                 cbar_pad=0.15,
                 )

# Add data to image grid
for ax in grid:
    im = ax.imshow(np.random.random((10,10)), vmin=0, vmax=1)

# Colorbar
ax.cax.colorbar(im)
ax.cax.toggle_label(True)

#plt.tight_layout()    # Works, but may still require rect paramater to keep colorbar labels visible
plt.show() 
```

[![图像网格](../Images/f8cbb3525f69775a5e9dcd80cbf97c71.png)](https://i.stack.imgur.com/ElmDT.png)

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2014-01-23T09:22:27.947

使用`make_axes`更容易，效果更好。它还提供了自定义颜色条位置的可能性。还要注意`subplots`共享 x 和 y 轴的选项。

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl

fig, axes = plt.subplots(nrows=2, ncols=2, sharex=True, sharey=True)
for ax in axes.flat:
    im = ax.imshow(np.random.random((10,10)), vmin=0, vmax=1)

cax,kw = mpl.colorbar.make_axes([ax for ax in axes.flat])
plt.colorbar(im, cax=cax, **kw)

plt.show() 
```

![](../Images/9c67031f49f6bb2db9d44b5330b04808.png)

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2016-10-05T10:54:45.053

作为一个偶然发现这个线程的初学者，我想添加一个 python-for-dummies 改编**abevieiramota**的非常简洁的答案（因为我处于必须查找“ravel”才能弄清楚什么的水平他们的代码在做）：

```
import numpy as np
import matplotlib.pyplot as plt

fig, ((ax1,ax2,ax3),(ax4,ax5,ax6)) = plt.subplots(2,3)

axlist = [ax1,ax2,ax3,ax4,ax5,ax6]

first = ax1.imshow(np.random.random((10,10)), vmin=0, vmax=1)
third = ax3.imshow(np.random.random((12,12)), vmin=0, vmax=1)

fig.colorbar(first, ax=axlist)

plt.show() 
```

对于像我这样的新手来说，更容易看到这里实际发生的事情。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2017-08-11T12:01:13.430

正如在其他答案中指出的那样，这个想法通常是为颜色栏定义一个轴。有多种方法可以这样做；尚未提及的一种方法是在子图创建时直接指定颜色条轴`plt.subplots()`。优点是不需要手动设置轴位置，并且在所有自动方面的情况下，颜色条将与子图的高度完全相同。即使在许多使用图像的情况下，结果也会令人满意，如下所示。

使用 时`plt.subplots()`，使用`gridspec_kw`参数允许使颜色条轴比其他轴小得多。

```
fig, (ax, ax2, cax) = plt.subplots(ncols=3,figsize=(5.5,3), 
                  gridspec_kw={"width_ratios":[1,1, 0.05]}) 
```

例子：

```
import matplotlib.pyplot as plt
import numpy as np; np.random.seed(1)

fig, (ax, ax2, cax) = plt.subplots(ncols=3,figsize=(5.5,3), 
                  gridspec_kw={"width_ratios":[1,1, 0.05]})
fig.subplots_adjust(wspace=0.3)
im  = ax.imshow(np.random.rand(11,8), vmin=0, vmax=1)
im2 = ax2.imshow(np.random.rand(11,8), vmin=0, vmax=1)
ax.set_ylabel("y label")

fig.colorbar(im, cax=cax)

plt.show() 
```

[![在此处输入图像描述](../Images/cd1dc4d9740858beaf66f58c87d85712.png)](https://i.stack.imgur.com/fRzZK.png)

如果绘图的纵横比是自动缩放的，或者图像由于宽度方向的纵横比而缩小（如上所示），则此方法效果很好。但是，如果图像宽然后高，结果将如下所示，这可能是不希望的。

[![在此处输入图像描述](../Images/2a7cdb88fc57eda980d0f47d2dcfc4dd.png)](https://i.stack.imgur.com/BUrXg.png)

**将颜色条高度固定为子图高度**的解决方案是用于`mpl_toolkits.axes_grid1.inset_locator.InsetPosition`设置相对于图像子图轴的颜色条轴。

```
import matplotlib.pyplot as plt
import numpy as np; np.random.seed(1)
from mpl_toolkits.axes_grid1.inset_locator import InsetPosition

fig, (ax, ax2, cax) = plt.subplots(ncols=3,figsize=(7,3), 
                  gridspec_kw={"width_ratios":[1,1, 0.05]})
fig.subplots_adjust(wspace=0.3)
im  = ax.imshow(np.random.rand(11,16), vmin=0, vmax=1)
im2 = ax2.imshow(np.random.rand(11,16), vmin=0, vmax=1)
ax.set_ylabel("y label")

ip = InsetPosition(ax2, [1.05,0,0.05,1]) 
cax.set_axes_locator(ip)

fig.colorbar(im, cax=cax, ax=[ax,ax2])

plt.show() 
```

[![在此处输入图像描述](../Images/a952089a26c320fa268b1a80b39d22f8.png)](https://i.stack.imgur.com/0qZ8G.png)

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2020-11-06T00:06:31.367

# 共享颜色图*和*颜色条

这是针对更复杂的情况，其中值不仅在 0 和 1 之间；需要共享 cmap 而不是仅使用最后一个。

```
import numpy as np
from matplotlib.colors import Normalize
import matplotlib.pyplot as plt
import matplotlib.cm as cm
fig, axes = plt.subplots(nrows=2, ncols=2)
cmap=cm.get_cmap('viridis')
normalizer=Normalize(0,4)
im=cm.ScalarMappable(norm=normalizer)
for i,ax in enumerate(axes.flat):
    ax.imshow(i+np.random.random((10,10)),cmap=cmap,norm=normalizer)
    ax.set_title(str(i))
fig.colorbar(im, ax=axes.ravel().tolist())
plt.show() 
```

[![](../Images/4bcca9230b1046cc484fe6ae8fac99fd.png)](https://i.stack.imgur.com/cxdGV.png)

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2016-08-14T06:53:07.067

**正如评论中所指出的，在您只使用一行图像之前，使用abevieiramota**的轴列表的解决方案效果很好。使用合理的纵横比来获得`figsize`帮助，但仍远非完美。例如：

```
import numpy as np
import matplotlib.pyplot as plt

fig, axes = plt.subplots(nrows=1, ncols=3, figsize=(9.75, 3))
for ax in axes.flat:
    im = ax.imshow(np.random.random((10,10)), vmin=0, vmax=1)

fig.colorbar(im, ax=axes.ravel().tolist())

plt.show() 
```

[![1 x 3 图像阵列](../Images/77cb59bb27d2990d6a35fb538e0c842a.png)](https://i.stack.imgur.com/3H7s7.png)

[colorbar 函数](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.colorbar)提供了一个参数，`shrink`它是颜色条轴大小的比例因子。它确实需要一些手动试验和错误。例如：

```
fig.colorbar(im, ax=axes.ravel().tolist(), shrink=0.75) 
```

[![具有缩小颜色条的 1 x 3 图像阵列](../Images/4da4a8d029a978f082e59101195325e5.png)](https://i.stack.imgur.com/OhAry.png)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2019-01-10T17:41:42.353

要添加到@abevieiramota 的出色答案，您可以使用 constrained_layout 获得tight_layout 的等价物。如果你使用 1:1 的纵横比，你仍然会得到很大`imshow`的`pcolormesh`水平间隙`imshow`。

```
import numpy as np
import matplotlib.pyplot as plt

fig, axes = plt.subplots(nrows=2, ncols=2, constrained_layout=True)
for ax in axes.flat:
    im = ax.pcolormesh(np.random.random((10,10)), vmin=0, vmax=1)

fig.colorbar(im, ax=axes.flat)
plt.show() 
```

[![在此处输入图像描述](../Images/d3134d2b68d24a04aad9bc6cbabf52d5.png)](https://i.stack.imgur.com/MxorU.png)

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2021-07-28T01:55:27.373

## matplotlib 3.4.0 中的新功能

现在可以使用**子图实现共享颜色条：**

> 新的[`Figure.subfigures`](https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure.subfigures)并[`Figure.add_subfigure`](https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure.add_subfigure)允许...仅与每个子图相关的**本地化图形艺术家（例如，**颜色条和字幕）。

matplotlib 库包含有关[如何绘制子图](https://matplotlib.org/stable/gallery/subplots_axes_and_figures/subfigures.html)的演示。

这是一个包含 2 个子图的最小示例，每个子图都有一个共享的颜色条：

[![子图颜色条](../Images/0460680e6c9c55393619bee7c4f65e21.png)](https://i.stack.imgur.com/qPuza.png)

```
fig = plt.figure(constrained_layout=True)
(subfig_l, subfig_r) = fig.subfigures(nrows=1, ncols=2)

axes_l = subfig_l.subplots(nrows=1, ncols=2, sharey=True)
for ax in axes_l:
    im = ax.imshow(np.random.random((10, 10)), vmin=0, vmax=1)

# shared colorbar for left subfigure
subfig_l.colorbar(im, ax=axes_l, location='bottom')

axes_r = subfig_r.subplots(nrows=3, ncols=1, sharex=True)
for ax in axes_r:
    mesh = ax.pcolormesh(np.random.randn(30, 30), vmin=-2.5, vmax=2.5)

# shared colorbar for right subfigure
subfig_r.colorbar(mesh, ax=axes_r) 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-10-16T14:05:41.907

我注意到几乎每个发布的解决方案都涉及`ax.imshow(im, ...)`并且没有标准化显示到多个子图的颜色条的颜色。可`im`映射对象取自最后一个实例，但如果多个`im`-s 的值不同怎么办？（我假设这些可映射对象的处理方式与处理轮廓集和表面集的方式相同。）我有一个使用下面的 3d 表面图的示例，它为 2x2 子图创建两个颜色条（每行一个颜色条）。虽然这个问题明确要求不同的安排，但我认为这个例子有助于澄清一些事情。`plt.subplots(...)`不幸的是，由于 3D 轴，我还没有找到一种方法来使用它。

[![示例图](../Images/690e3d54b55cd4a72b73f5e2008e3e2c.png)](https://i.stack.imgur.com/EMxZ1.png)

如果我能以更好的方式定位颜色条……（可能有更好的方法可以做到这一点，但至少应该不会太难遵循。）

```
import matplotlib
from matplotlib import cm
import matplotlib.pyplot as plt
import numpy as np
from mpl_toolkits.mplot3d import Axes3D

cmap = 'plasma'
ncontours = 5

def get_data(row, col):
    """ get X, Y, Z, and plot number of subplot
        Z > 0 for top row, Z < 0 for bottom row """
    if row == 0:
        x = np.linspace(1, 10, 10, dtype=int)
        X, Y = np.meshgrid(x, x)
        Z = np.sqrt(X**2 + Y**2)
        if col == 0:
            pnum = 1
        else:
            pnum = 2
    elif row == 1:
        x = np.linspace(1, 10, 10, dtype=int)
        X, Y = np.meshgrid(x, x)
        Z = -np.sqrt(X**2 + Y**2)
        if col == 0:
            pnum = 3
        else:
            pnum = 4
    print("\nPNUM: {}, Zmin = {}, Zmax = {}\n".format(pnum, np.min(Z), np.max(Z)))
    return X, Y, Z, pnum

fig = plt.figure()
nrows, ncols = 2, 2
zz = []
axes = []
for row in range(nrows):
    for col in range(ncols):
        X, Y, Z, pnum = get_data(row, col)
        ax = fig.add_subplot(nrows, ncols, pnum, projection='3d')
        ax.set_title('row = {}, col = {}'.format(row, col))
        fhandle = ax.plot_surface(X, Y, Z, cmap=cmap)
        zz.append(Z)
        axes.append(ax)

## get full range of Z data as flat list for top and bottom rows
zz_top = zz[0].reshape(-1).tolist() + zz[1].reshape(-1).tolist()
zz_btm = zz[2].reshape(-1).tolist() + zz[3].reshape(-1).tolist()
## get top and bottom axes
ax_top = [axes[0], axes[1]]
ax_btm = [axes[2], axes[3]]
## normalize colors to minimum and maximum values of dataset
norm_top = matplotlib.colors.Normalize(vmin=min(zz_top), vmax=max(zz_top))
norm_btm = matplotlib.colors.Normalize(vmin=min(zz_btm), vmax=max(zz_btm))
cmap = cm.get_cmap(cmap, ncontours) # number of colors on colorbar
mtop = cm.ScalarMappable(cmap=cmap, norm=norm_top)
mbtm = cm.ScalarMappable(cmap=cmap, norm=norm_btm)
for m in (mtop, mbtm):
    m.set_array([])

# ## create cax to draw colorbar in
# cax_top = fig.add_axes([0.9, 0.55, 0.05, 0.4])
# cax_btm = fig.add_axes([0.9, 0.05, 0.05, 0.4])
cbar_top = fig.colorbar(mtop, ax=ax_top, orientation='vertical', shrink=0.75, pad=0.2) #, cax=cax_top)
cbar_top.set_ticks(np.linspace(min(zz_top), max(zz_top), ncontours))
cbar_btm = fig.colorbar(mbtm, ax=ax_btm, orientation='vertical', shrink=0.75, pad=0.2) #, cax=cax_btm)
cbar_btm.set_ticks(np.linspace(min(zz_btm), max(zz_btm), ncontours))

plt.show()
plt.close(fig)
## orientation of colorbar = 'horizontal' if done by column 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-03-25T14:54:40.733

这个主题已经很好地涵盖了，但我仍然想以*稍微*不同的理念提出另一种方法。

设置有点复杂，但它允许（在我看来）更多的灵活性。例如，可以使用每个子图/颜色条的各自比率：

```
import matplotlib.pyplot as plt
import numpy as np
from matplotlib.gridspec import GridSpec

# Define number of rows and columns you want in your figure
nrow = 2
ncol = 3

# Make a new figure
fig = plt.figure(constrained_layout=True)

# Design your figure properties
widths = [3,4,5,1]
gs = GridSpec(nrow, ncol + 1, figure=fig, width_ratios=widths)

# Fill your figure with desired plots
axes = []
for i in range(nrow):
    for j in range(ncol):
        axes.append(fig.add_subplot(gs[i, j]))
        im = axes[-1].pcolormesh(np.random.random((10,10)))

# Shared colorbar    
axes.append(fig.add_subplot(gs[:, ncol]))
fig.colorbar(im, cax=axes[-1])

plt.show() 
```

[![在此处输入图像描述](../Images/eb60a890fc7c76df47cbcb4772862aa9.png)](https://i.stack.imgur.com/r1eEc.png)

# android - 单击菜单之前的android子菜单按钮项访问

> ID：13784202
> 
> 赞同：0
> 
> 时间：2012-12-09T02:53:06.757
> 
> 标签：android

我有一个带有在 xml 中设置的按钮的子菜单，效果很好。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Single menu item
     Set id, icon and Title for each menu item
-->
 <item android:id="@+id/menu_level"
      android:title="Set Level" >
      <menu>
          <group android:checkableBehavior="single">
            <item android:id="@+id/one"
                  android:checked="false"
                  android:title="One" />
            <item android:id="@+id/two"
                  android:title="Two" />
            <item android:id="@+id/three"
                  android:title="Three" />
         </group>
     </menu>
 </item>

<item android:id="@+id/menu_save"
      android:icon="@drawable/icon_save"
      android:title="Save" />

 <item android:id="@+id/menu_about"
      android:icon="@drawable/icon_bookmark"
      android:title="About">

     <menu>
         <item  android:id="@+id/copyright"
                android:title="(c) John Beukema 2012">
         </item>
     </menu>

   <item/>
</menu> 
```

我按如下方式访问它：

```
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    Editor editor = PreferenceManager
            .getDefaultSharedPreferences(this).edit();

    switch (item.getItemId())
    {

    case R.id.menu_save:
        return true;

    case R.id.menu_recall:
        return true;

    case R.id.menu_level: {
        return true;    
    }
    case R.id.menu_about:

        return true;

    case R.id.one:
        star = 1;
        editor.putInt("Star", 1);              
        editor.commit();
        item.setChecked(true);
        return true;

    case R.id.two:
        star = 2;
        editor.putInt("Star", 2);              
        editor.commit();
        item.setChecked(true);
        return true;

    case R.id.three:
        star = 3;
        editor.putInt("Star", 3);              
        editor.commit();
        item.setChecked(true);
        return true;

    case R.id.menu_delete:
        return true;

    case R.id.menu_preferences:
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
   } 
} 
```

到目前为止没有问题。但我想在启动时从首选项加载按钮。

```
@SuppressWarnings("deprecation")
@SuppressLint("NewApi")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    SharedPreferences preferences = PreferenceManager
          .getDefaultSharedPreferences(this);

    star = preferences.getInt("Star", 1);

    MenuItem one = (MenuItem) findViewById(R.id.one);
    MenuItem  two = (MenuItem ) findViewById(R.id.two);
    MenuItem  three = (MenuItem) findViewById(R.id.three);

    switch(star)  
    {
    case 1:
        one.setChecked(true); break;

    case 2:
        two.setChecked(true); break;

    case 3:
        three.setChecked(true); break
        } 
   }
} 
```

这编译但挂起。如何处理子菜单按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:37:20.740

我不认为你可以在 menuitem 上做 findviewbyid。您需要在 onprepareoptionsmenu 中设置或取消设置选中项

# codeigniter - 将 javascript 函数添加到杂货店添加或编辑表单

> ID：13784207
> 
> 赞同：3
> 
> 时间：2012-12-09T02:54:22.513
> 
> 标签：codeigniter, grocery-crud

是否可以在grocery_CRUD 的添加/编辑表单中添加javascript 函数？

例如，当用户在添加或编辑记录时输入特定字段时，我想在 keydown 事件上执行 javascript。

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T05:13:19.997

有可能的。例如，您这样调用视图：

```
$this->load->view('grocery_crud_view', $output); 
```

在视图的开头 (grocery_crud_view.php)，您可以添加任何 javascript

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascrpt">
    $("#field-code").keyup(function(){
       alert("there is a keyup");
    });
</script>
<?php
// The rest of default php code
?> 
```

杂货-CRUD 视图的大部分 id（如果您使用 flexigrid 主题）将是这样的：“field-your_field_name” 您可以使用 firebug 或 google-chrome 开发人员工具进行检查以确保它。

# php - 从函数内部访问全局上下文的方法？

> ID：13784209
> 
> 赞同：0
> 
> 时间：2012-12-09T02:54:37.940
> 
> 标签：php, global-variables, scope

是否有任何其他方法可以从 PHP 的函数范围内访问全局上下文，在`$GLOBALS`and之外`global`？如果是这样，它们是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:35:16.580

您可能希望参考[关于变量作用域的 PHP 手册页](http://php.net/language.variables.scope)，其中列出了在全局作用域中访问变量的两种方法：`global`关键字和`$GLOBALS`超全局变量。这些是您唯一的选择。

# eclipse - 为什么 IvyDE 可以使用 scala-library 的源而不使用 scalaz-core_2.10.0-RC3-7.0.0-M5 的源？

> ID：13784214
> 
> 赞同：0
> 
> 时间：2012-12-09T02:55:42.450
> 
> 标签：eclipse, ivy, ivyde

我将 IvyDE 与 Eclipse Indigo 一起使用。我有一个看起来像这样的 ivy.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<ivy-module version="2.0" xmlns:e="http://ant.apache.org/ivy/extra">
    <info organisation="com.restphone" module="javasignatureparser_2.10" revision="0.3-SNAPSHOT" status="integration" publication="20121208180225">
        <description>
        JavaSignatureParser
        </description>
    </info>
    <configurations>
        <conf name="compile" visibility="public" description=""/>
        <conf name="runtime" visibility="public" description="" extends="compile"/>
        <conf name="test" visibility="public" description="" extends="runtime"/>
        <conf name="provided" visibility="public" description=""/>
        <conf name="optional" visibility="public" description=""/>
        <conf name="sources" visibility="public" description=""/>
        <conf name="docs" visibility="public" description=""/>
        <conf name="pom" visibility="public" description=""/>
    </configurations>
    <dependencies defaultconfmapping="*->default,sources" >
        <dependency org="org.scalaz" name="scalaz-core_2.10.0-RC3" rev="7.0.0-M5" conf="compile->default(compile);sources->default(compile)"/>
    </dependencies>
</ivy-module> 
```

IvyIDE 容器具有 scala-library 的源附件（传递依赖项，未在 ivy.xml 代码中列出），但没有 scalaz-core 的源附件。

如果我查看本地常春藤缓存（容器有文件的地方），我会看到：

```
C:\Users\james\.ivy2\cache\org.scalaz\scalaz-core_2.10.0-RC3
  bundles
    scalaz-core_2.10.0-RC3-7.0.0-M5.jar
  sources
    scalaz-core_2.10.0-RC3-7.0.0-M5-sources.jar 
```

知道为什么 IvyIDE 无法弄​​清楚如何使用 scalaz-core_2.10.0-RC3-7.0.0-M5-sources.jar 吗？

/cygdrive/C/Users/james/.ivy2/cache/org.scalaz/scalaz-core_2.10.0-RC3/ivy-7.0.0-M5.xml 中有一个常春藤配置文件，它说工件的类型是“捆绑” - 这是相关的吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<ivy-module version="2.0" xmlns:m="http://ant.apache.org/ivy/maven">
        <info organisation="org.scalaz"
                module="scalaz-core_2.10.0-RC3"
                revision="7.0.0-M5"
                status="release"
                publication="20121123051347"
        >
                <license name="BSD-style" url="http://www.opensource.org/licenses/bsd-license.php" />
                <description homepage="http://scalaz.org">
                scalaz-core
                </description>
        </info>
        <configurations>
                <conf name="default" visibility="public" description="runtime dependencies and master artifact can be used with this conf" extends="runtime,master"/>
                <conf name="master" visibility="public" description="contains only the artifact published by this module itself, with no transitive dependencies"/>
                <conf name="compile" visibility="public" description="this is the default scope, used if none is specified. Compile dependencies are available in all classpaths."/>
                <conf name="provided" visibility="public" description="this is much like compile, but indicates you expect the JDK or a container to provide it. It is only available on the compilation classpath, and is not transitive."/>
                <conf name="runtime" visibility="public" description="this scope indicates that the dependency is not required for compilation, but is for execution. It is in the runtime and test classpaths, but not the compile classpath." extends="compile"/>
                <conf name="test" visibility="private" description="this scope indicates that the dependency is not required for normal use of the application, and is only available for the test compilation and execution phases." extends="runtime"/>
                <conf name="system" visibility="public" description="this scope is similar to provided except that you have to provide the JAR which contains it explicitly. The artifact is always available and is not looked up in a repository."/>
                <conf name="sources" visibility="public" description="this configuration contains the source artifact of this module, if any."/>
                <conf name="javadoc" visibility="public" description="this configuration contains the javadoc artifact of this module, if any."/>
                <conf name="optional" visibility="public" description="contains all optional dependencies"/>
        </configurations>
        <publications>
                <artifact name="scalaz-core_2.10.0-RC3" type="bundle" ext="jar" conf="master"/>
        </publications>
        <dependencies>
                <dependency org="org.scala-lang" name="scala-library" rev="2.10.0-RC3" force="true" conf="compile->compile(*),master(*);runtime->runtime(*)"/>
        </dependencies>
</ivy-module> 
```

更新：事情变得有点陌生。如果我删除该 scalaz-core_2.10.0-RC3/ivy-7.0.0-M5.xml 文件，然后更改 ivy.xml 中的一行，该文件将再次下载 - 它不一样。有时，我会在文件中获得更多行！像这样：

```
<publications>
        <artifact name="scalaz-core_2.10.0-RC3" type="bundle" ext="jar" conf="master"/>
        <artifact name="scalaz-core_2.10.0-RC3" type="source" ext="jar" conf="sources" m:classifier="sources"/>
        <artifact name="scalaz-core_2.10.0-RC3" type="javadoc" ext="jar" conf="javadoc" m:classifier="javadoc"/>
</publications> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:14:53.637

类型是相关的，IvyDE 使用“源类型”确定源是否存在。

在“源类型”中，在 IvyDE 托管库中的选项卡 Source/Javadoc 中。默认值为“源”。

您在已解析工件的 ivy.xml 中显示的内容表明该类型是捆绑包，不会被视为源工件。

但是，我尝试使用一个非常默认的配置来解决自己的问题（我刚刚将 Eclipse 和 IvyDE 安装到一个空项目中），以及为 scalaz-core 解析的 ivy 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<ivy-module version="2.0" xmlns:m="http://ant.apache.org/ivy/maven">
<info organisation="org.scalaz"
    module="scalaz-core_2.10.0-RC3"
    revision="7.0.0-M5"
    status="release"
    publication="20121123141347"
>
    <license name="BSD-style" url="http://www.opensource.org/licenses/bsd-license.php" />
    <description homepage="http://scalaz.org">
    scalaz-core
    </description>
</info>
<publications>
    <artifact name="scalaz-core_2.10.0-RC3" type="bundle" ext="jar" conf="master"/>
    <artifact name="scalaz-core_2.10.0-RC3" type="source" ext="jar" conf="sources" m:classifier="sources"/>
    <artifact name="scalaz-core_2.10.0-RC3" type="javadoc" ext="jar" conf="javadoc" m:classifier="javadoc"/>
</publications>
<dependencies>
    <dependency org="org.scala-lang" name="scala-library" rev="2.10.0-RC3" force="true" conf="compile->compile(*),master(*);runtime->runtime(*)"/>
</dependencies> 
```

为了清楚起见，我删除了配置部分。

你确定你是从 maven2 存储库下载的：

```
http://repo1.maven.org/maven2/ 
```

也许他们在过去 10 小时内改变了它。

如果我是你，我会尝试将 bundle 添加到“源类型”中。不过不确定后果。

# ios - 单独图层上的 glReadPixels

> ID：13784220
> 
> 赞同：0
> 
> 时间：2012-12-09T02:56:43.277
> 
> 标签：ios, opengl-es, glreadpixels

我会直截了当:)

![在此处输入图像描述](../Images/291964782250893cac98b623f946bf72.png)

从上面的 480 x 320 图中，我想我可以像蠕虫游戏一样检测像素级别的碰撞。

我想知道的是如何在不同的图层上采样像素。正如您在图中看到的那样，当蠕虫下降时，我只想使用 glReadPixels() 对黑色像素进行采样，以查看蠕虫是否与任何地形站立（碰撞）但是当我上次尝试时，glReadPixels() 采样屏幕上的所有像素，没有任何“层”的想法。

白色像素是不应成为采样一部分的背景。

我是否可能假设在单独的缓冲区上有我的地形的黑白副本并在该单独的缓冲区上调用 glReadPixels() 以便背景图像（白色像素）不会被采样？

在我在屏幕上绘制我的地形之前，在我绘制背景图像的相同缓冲区/上下文中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:45:53.833

读取像素所做的是读回绑定的缓冲区，因为缓冲区是您所有组合的输出，显然将包含您写入的所有数据并且不理解您将逻辑安排到层中。您可以尝试将地形绘制到模板缓冲区中并仅读取它。使用 GL_DEPTH_STENCIL（格式参数）。

# firefox - XUL 首选项覆盖

> ID：13784222
> 
> 赞同：0
> 
> 时间：2012-12-09T02:57:17.583
> 
> 标签：firefox, overlay, xul

我正在尝试为我的扩展的首选项制作 XUL 覆盖。我有以下代码作为我的叠加层的一部分，但它仍然没有出现在 Firefox->Preferences 下：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/global.css"  type="text/css"?>

  <overlay id="tabularity-browser-overlay"
xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

        <prefwindow id="BrowserPreferences">
          <prefpane id="tabularityPane" label="tabularityPane;" 
                    onpaneload="populateSchedulesList()" 
        image="chrome://tabulationtwo/content/images/tab.png">
    <preferences>
            <preference id="perSession"
               name="extensions.tabulation.defaultHomepage"
       type="bool"/>
            </preferences>
    <radiogroup>
      <radio preference="perSession" id="session" label="Open tabs once per session" accesskey="S" selected="true"/>
      <radio preference="perSession" id="instance" label="Open tabs every tab instance"  accesskey="I"/>
    </radiogroup>
          </prefpane>
        </prefwindow> 
```

谁能帮我诊断问题或指出正确的方向？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:11:13.930

只需发布此解决方案以显示图像：

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/global.css"  type="text/css"?>

  <overlay id="tabularity-browser-overlay"
xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

        <prefwindow id="BrowserPreferences">
          <prefpane id="tabularityPane" label="tabularityPane;"
                    onpaneload="populateSchedulesList()"
        image="chrome://tabulationtwo/content/images/tab.png">
    <preferences>
            <preference id="perSession"
               name="extensions.tabulation.defaultHomepage"
       type="bool"/>
            </preferences>
    <radiogroup>
      <radio preference="perSession" id="session" label="Open tabs once per session" accesskey="S" selected="true"/>
      <radio preference="perSession" id="instance" label="Open tabs every tab instance"  accesskey="I"/>
    </radiogroup>
          </prefpane>
        </prefwindow>
</overlay> 
```

如果您想知道如何处理，请参考此链接： [Firefox 中的菜单栏覆盖](https://stackoverflow.com/questions/7561237/menu-bar-overlay-in-firefox/7565506#7565506) [http://hublog.hubmed.org/archives/001606.html](http://hublog.hubmed.org/archives/001606.html) 图片：![在此处输入图像描述](../Images/83d5916de613bd9909e366b16f964ae8.png)

# jquery - 使用 jQuery 从一个 .NET 网格拖放到另一个 gridview 单元格

> ID：13784223
> 
> 赞同：2
> 
> 时间：2012-12-09T02:57:47.117
> 
> 标签：jquery, .net, gridview, jquery-ui-draggable

我正在开发一个调度程序，我需要将一个 gridview 单元格拖到另一个 gridview 单元格。我想使用 jQuery 并且拖动工作正常，但是如何从 .NET gridview 拖动并使用 jQuery 拖放到不同的 gridview 单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:22:43.187

拖放在客户端工作。即使它是一个服务器控件，它也会作为 HTML 呈现给客户端（浏览器）。所以你应该能够做到这一点。

确保您使用正确的选择器。您可能需要为您的单元格添加一些 css 类名称，以便可以将其用作 jQuery 选择器。

# c++ - 如何同步线程以捕获相同数量的帧？

> ID：13784225
> 
> 赞同：0
> 
> 时间：2012-12-09T02:58:30.343
> 
> 标签：c++, multithreading, synchronization, kinect

我正在开发一个 Kinect 应用程序。我有两个线程，一个用于读取关节的值（包含 20 个关节的 x、y、z 坐标），另一个用于读取深度值（每帧 76800 个短值）。我从按下开始按钮开始记录这些值，直到按下结束按钮。我希望编写相同数量的关节和深度帧，但我总是以很多关节帧结束。我捕获了 150 个深度帧但 180 个关节帧，我认为这是因为深度写入缓冲区的数据量。联合只在每帧中写入 60 个浮点数，但深度为 76800 短裤。

我怎样才能从每个捕获相同数量的帧？（Kinect 捕捉深度和坐标 25 到 30 FPS）

此日志还显示了每个调用的线程数不相等：

```
112/11/9 4:19:58: SKELETON

112/11/9 4:19:58: DEPTH

112/11/9 4:19:58: SKELETON

112/11/9 4:19:58: SKELETON

112/11/9 4:19:58: DEPTH

112/11/9 4:19:58: SKELETON

112/11/9 4:19:59: DEPTH

112/11/9 4:19:59: DEPTH

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: DEPTH

112/11/9 4:19:59: DEPTH

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: DEPTH

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: DEPTH

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: DEPTH

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: DEPTH

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: DEPTH

112/11/9 4:19:59: DEPTH

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: SKELETON

112/11/9 4:19:59: DEPTH

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: DEPTH

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: DEPTH

112/11/9 4:20:0: DEPTH

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: DEPTH

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: DEPTH

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: DEPTH

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: DEPTH

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: DEPTH

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: DEPTH

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: SKELETON

112/11/9 4:20:0: SKELETON

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: SKELETON

112/11/9 4:20:1: DEPTH

112/11/9 4:20:1: SKELETON

112/11/9 4:20:2: DEPTH

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: DEPTH

112/11/9 4:20:2: DEPTH

112/11/9 4:20:2: DEPTH

112/11/9 4:20:2: DEPTH

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: DEPTH

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: DEPTH

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: DEPTH

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: SKELETON

112/11/9 4:20:2: DEPTH

112/11/9 4:20:3: DEPTH

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: DEPTH

112/11/9 4:20:3: DEPTH

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: DEPTH

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: DEPTH

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: DEPTH

112/11/9 4:20:3: DEPTH

112/11/9 4:20:3: DEPTH

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: DEPTH

112/11/9 4:20:3: SKELETON

112/11/9 4:20:3: DEPTH

112/11/9 4:20:4: SKELETON

112/11/9 4:20:4: DEPTH

112/11/9 4:20:4: DEPTH

112/11/9 4:20:4: SKELETON

112/11/9 4:20:4: SKELETON

112/11/9 4:20:4: DEPTH

112/11/9 4:20:4: DEPTH

112/11/9 4:20:4: DEPTH

112/11/9 4:20:4: SKELETON

112/11/9 4:20:4: SKELETON

112/11/9 4:20:4: DEPTH

112/11/9 4:20:4: DEPTH

112/11/9 4:20:4: SKELETON

112/11/9 4:20:4: SKELETON

112/11/9 4:20:4: DEPTH

112/11/9 4:20:4: DEPTH

112/11/9 4:20:4: DEPTH

112/11/9 4:20:4: SKELETON

112/11/9 4:20:4: SKELETON

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: SKELETON

112/11/9 4:20:5: DEPTH

112/11/9 4:20:5: DEPTH

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: DEPTH

112/11/9 4:20:6: DEPTH

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: DEPTH

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: DEPTH

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: DEPTH

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: DEPTH

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: SKELETON

112/11/9 4:20:6: DEPTH

112/11/9 4:20:6: DEPTH
N
112/11/9 4:20:7: SKELETON

112/11/9 4:20:7: DEPTH

112/11/9 4:20:7: DEPTH

112/11/9 4:20:7: SKELETON

112/11/9 4:20:7: SKELETON

112/11/9 4:20:7: DEPTH

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: DEPTH

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: DEPTH

112/11/9 4:20:8: DEPTH

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: DEPTH

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: DEPTH

112/11/9 4:20:8: DEPTH

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: DEPTH

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: DEPTH

112/11/9 4:20:8: DEPTH

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: DEPTH

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: DEPTH

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: SKELETON

112/11/9 4:20:8: DEPTH

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: DEPTH

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: DEPTH

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: DEPTH

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: DEPTH

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: DEPTH

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: DEPTH

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: DEPTH

112/11/9 4:20:9: DEPTH

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: DEPTH

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: DEPTH

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: SKELETON

112/11/9 4:20:9: SKELETON

112/11/9 4:20:10: DEPTH

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: DEPTH

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: DEPTH

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: DEPTH

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: DEPTH

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: DEPTH

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: DEPTH

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: DEPTH

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: DEPTH

112/11/9 4:20:10: SKELETON

112/11/9 4:20:10: DEPTH

112/11/9 4:20:10: SKELETON

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: DEPTH

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: DEPTH

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: DEPTH

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: DEPTH

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: DEPTH

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: DEPTH

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: DEPTH

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: DEPTH

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: DEPTH

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: DEPTH

112/11/9 4:20:11: DEPTH

112/11/9 4:20:11: SKELETON

112/11/9 4:20:11: DEPTH
N
112/11/9 4:20:12: DEPTH

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: DEPTH

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: DEPTH

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: DEPTH

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: DEPTH

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: DEPTH

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: DEPTH

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: DEPTH

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: DEPTH

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: DEPTH

112/11/9 4:20:12: DEPTH

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: SKELETON

112/11/9 4:20:12: DEPTH

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: DEPTH

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: DEPTH

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: DEPTH

112/11/9 4:20:13: DEPTH

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: DEPTH

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: DEPTH

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: DEPTH

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: DEPTH

112/11/9 4:20:13: DEPTH

112/11/9 4:20:13: DEPTH

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: DEPTH

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: SKELETON

112/11/9 4:20:13: SKELETON

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: DEPTH

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: DEPTH

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: DEPTH

112/11/9 4:20:14: DEPTH

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: DEPTH

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: DEPTH

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: DEPTH

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: DEPTH

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: DEPTH

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: SKELETON

112/11/9 4:20:14: DEPTH

112/11/9 4:20:15: SKELETON

112/11/9 4:20:15: DEPTH

112/11/9 4:20:15: SKELETON

112/11/9 4:20:15: DEPTH

112/11/9 4:20:15: SKELETON

112/11/9 4:20:15: DEPTH

112/11/9 4:20:15: DEPTH

112/11/9 4:20:15: SKELETON

112/11/9 4:20:15: SKELETON

112/11/9 4:20:15: DEPTH 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:07:43.033

拥有一个由锁和条件变量保护的共享表，该变量保持对已捕获的每种类型的帧数的计数。如果任一线程发现它捕获的帧比另一个多，则让它阻塞条件变量。当任一线程完成获取帧时，它会增加其类型的计数并广播条件变量。

# php - 使用 Console_CommandLine

> ID：13784226
> 
> 赞同：1
> 
> 时间：2012-12-09T02:58:56.583
> 
> 标签：php, pyrus

我已经使用 pyrus 安装了 Console_CommandLine：

```
php pyrus.phar install pear/Console_CommandLine 
```

安装 Console_CommandLine 的目录具有下一个结构 `(/A_PATH/lib/`：)

```
lib/
├── cache
├── data
├── docs
├── downloads
├── php
└── tests 
```

我尝试了下一个：（`/A_PATH/demo.php`）

```
<?php
    require_once 'lib/Console_CommandLine/php/Console/CommandLine.php';
    ...
 ?> 
```

但我有下一个错误：

```
PHP Warning:  require_once(Console/CommandLine/Exception.php): failed to open stream: No such file or directory in /A_PATH/lib/Console_CommandLine/php/Console/CommandLine.php on line 32
PHP Fatal error:  require_once(): Failed opening required 'Console/CommandLine/Exception.php' (include_path='.:/usr/share/php:/usr/share/pear') in /A_PATH/lib/Console_CommandLine/php/Console/CommandLine.php on line 32 
```

如何将 CommandLine.php 文件用于我的个人项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:58:50.630

您需要设置包含路径。PEAR 包依赖于它被正确设置，以便它们的包含正常工作：

```
set_include_path('.:/A_PATH/lib/php/'); 
```

您也可以在您的 中设置它`php.ini`，这是大多数情况下的完成方式。

可以在 PEAR 1 手册中找到设置包含路径的方法：http: [//pear.php.net/manual/en/installation.checking.php](http://pear.php.net/manual/en/installation.checking.php)

# tuples - Python对字典中的元组进行排序的方法

> ID：13784230
> 
> 赞同：0
> 
> 时间：2012-12-09T03:00:26.357
> 
> 标签：tuples, jquery-ui-sortable, python-3.2, dictionary

有人可以解释字典是如何排序的，为什么？下面一行的输出：

```
>>> d= {(1, 2):"f", (1, 3):"f", (1, 4):"f", (1, 4):"f"}
>>> d
{(1, 2): 'f', (1, 5): 'f', (1, 3): 'f', (1, 4): 'f'} 
```

一般来说：

```
>>> de= {"a":1, "b":1, "c":1, "e":1, "d":1}
>>> de
{'a': 1, 'c': 1, 'b': 1, 'e': 1, 'd': 1} 
```

列表的行为不是这样，所以我很困惑。这更多是出于好奇，例如，我可以自己对其进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T03:01:49.447

它们是哈希表，因此它们不保证以任何方式进行任何排序。毕竟，这就是他们速度快的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T03:02:03.893

字典没有排序。语言规范不保证如果您打印字典两次，则顺序将相同。另一方面，列表确实是排序的。如果您想模拟具有给定键顺序的字典之类的东西，那么您可以在键和值的元组上使用列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-15T17:12:10.050

字典是键/值对。如果要按排序顺序迭代字典，可以将字典索引和值切片到列表中并对它们进行排序。假设您想按排序顺序查看字典值

# ruby - ActiveRecord 显示错误的列默认值

> ID：13784231
> 
> 赞同：0
> 
> 时间：2012-12-09T03:00:57.247
> 
> 标签：ruby, database, activerecord, sqlite, column-defaults

这是我第一次在非 Rails 应用程序中使用 ActiveRecord，我遇到了问题。ActiveRecord 能够找出我的 sqlite3 数据库中的列，但由于某种原因它无法找出默认列值。

这是相关表的 sql 描述。

```
-- Describe ACCOUNTS
CREATE TABLE "accounts" (
    "id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL DEFAULT (0),
    "username" TEXT NOT NULL,
    "password_hash" BLOB NOT NULL,
    "creation_time" INTEGER NOT NULL DEFAULT(strftime('%s', 'now')),
    "expiration_time" INTEGER NOT NULL DEFAULT(strftime('%s', 'now') + 2592000)
) 
```

我使用以下代码加载我的数据库文件。

```
require 'active_record'
require './config.rb'

ActiveRecord::Base.establish_connection(
  :adapter  => 'sqlite3',
  :database => DB_FILE
)

class Account < ActiveRecord::Base
end 
```

当我使用 REPL 查看 Account 表的列默认值时，我得到的是：

```
[10] pry(main)> Account.column_defaults
=> {"id"=>0,
 "username"=>nil,
 "password_hash"=>nil,
 "creation_time"=>0,
 "expiration_time"=>0} 
```

我之前曾为 Rails 应用程序使用过 ActiveRecord，它足够聪明，可以找出默认值。由于某种原因，它现在无法弄清楚它们。

我在这里做错了吗？我读到我可以手动指定默认值`default :id => bla`，但 ActiveRecord 不应该能够找出默认值吗？

* * *

**更新：**我想我想出了一个解决方法。返回的哈希`Account.column_defaults`是可写的，并且更改这些元素似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:12:15.653

尝试这样做：

```
class Account < ActiveRecord::Base
  after_initialize :default_values

  private
    def default_values
      self.username ||= "default value"
      #etc...
    end
end 
```

# python - 键盘中断需要一段时间

> ID：13784232
> 
> 赞同：7
> 
> 时间：2012-12-09T03:01:19.167
> 
> 标签：python, tkinter, keyboardinterrupt

所以我刚开始在 Linux 上使用 Python，使用 Tkinter。我正在尝试使用 KeyboardInterrupt Exception 使 Cntrl+C 停止执行，但是当我按下它时，暂时没有任何反应。最终它“接受”并退出。一点点阅读表明这可能与线程或其他东西有关，但我对这些东西太陌生了，我真的不知道从哪里开始。

```
#! /usr/bin/python
import sys
from Tkinter import *

try: 
    root = Tk()
    root.mainloop()
except:
    print "you pressed control c"
    sys.exit(0) 
```

我讨厌成为只想要快速修复的菜鸟，所以如果你的答案就像将我指向正确的文档一样简单，那就太好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T03:17:04.517

这有点问题，因为一般来说，在调用`mainloop`方法之后，您依赖 Tcl 来处理事件。由于您的应用程序什么都不做，Tcl 没有理由对任何事情做出反应，尽管它最终会处理其他事件（正如您所注意到的，这可能需要一些时间）。避免这种情况的一种方法是让 Tcl/Tk 做一些事情，安排人工事件，如下所示：

```
from Tkinter import Tk

def check():
    root.after(50, check) # 50 stands for 50 ms.

root = Tk()
root.after(50, check)
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:20:40.373

[根据 Guido van Rossum](https://stackoverflow.com/a/10067034/190597)的说法，这是因为您被困在 Tcl/Tk 主循环中，而信号处理程序仅由 Python 解释器处理。

您可以通过将 Ctrl-c 绑定到回调函数来解决此问题：

```
import sys
import Tkinter as tk

def quit(event):
    print "you pressed control c"
    root.quit()

root = tk.Tk()
root.bind('<Control-c>', quit)
root.mainloop() 
```

# opengl - glewInit() 失败，OpenGL 应用程序

> ID：13784233
> 
> 赞同：10
> 
> 时间：2012-12-09T03:01:30.393
> 
> 标签：opengl, glew

我正在尝试使用 glew/glfw 构建一个 OpenGL 应用程序。我已经下载了二进制文件，将它们放在我的文件夹的根目录中，添加了 include 和 lib 目录的路径，并告诉我的项目需要 glew32.lib、GLFW.lib 和 opengl32.lib。

我什至将 glew32.lib 复制到根目录，因为我的项目看不到它。

我必须将所有依赖项保留在项目目录中，因为我将分发它。我不知所措。

现在当我运行我的程序时，它在 glewInit() 失败了

到目前为止，这是我的实现：

```
#include "Common.h"

GameEngine::GameEngine()
{
    InitWithSize(1024, 768);
    InitInput();
}

void GameEngine::InitWithSize(int _width, int _height)
{
    try {
        // Initialise GLFW
        if( !glfwInit() )
            throw std::exception("Failed to initialize GLFW\n");

        //glfwOpenWindowHint(GLFW_FSAA_SAMPLES, 4);
        glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3); 
        glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 3);
        glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

        // Open a window and create its OpenGL context
        if( !glfwOpenWindow( _width, _height, 0,0,0,0, 32,0, GLFW_WINDOW ) ) 
            throw std::exception("Failed to initialize GLFW\n");

        glfwSetWindowTitle( "Tutorial 01" );

        // Initialize GLEW
        if (glewInit() != GLEW_OK)
            throw std::exception("Failed to initialize GLEW\n");

    } catch ( std::system_error const& err) {
        fprintf(stdout, "System Error: %s", err.what());
        glfwTerminate(); // Free glfw if it has been allocated
        // Try Again
        this->InitWithSize(_width, _height);
    } catch( std::exception const& err) {
        fprintf(stdout, "Exception Found: %s", err.what());
    } catch ( ... ) {
        fprintf(stdout,"Unknown Exception Occurred\n");
    }
}

void GameEngine::InitInput()
{
        // Ensure we can capture the escape key being pressed below
        glfwEnable( GLFW_STICKY_KEYS );
}

void GameEngine::StartGameLoop()
{
    do{
            // Draw nothing, see you in tutorial 2 !

            // Swap buffers
            glfwSwapBuffers();

        } // Check if the ESC key was pressed or the window was closed
        while( glfwGetKey( GLFW_KEY_ESC ) != GLFW_PRESS &&
            glfwGetWindowParam( GLFW_OPENED ) );
}

void GameEngine::InitTestData()
{
    // An array of 3 vectors which represents 3 vertices
    static const GLfloat g_vertex_buffer_data[] = {
        -1.0f, -1.0f, 0.0f,
        1.0f, -1.0f, 0.0f,
        0.0f,  1.0f, 0.0f,
    };

} 
```

使用我的通用标题：

```
#ifndef _COMMON_H
#define _COMMON_H

// OpenGL Libraries
#define GLEW_STATIC
//#pragma comment(lib, "glew32.lib")
#include <GL\glew.h>
#include <GL\glfw.h>

// Core Libraries
#include <Windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <map>
#include <string>
#include <fstream>

// C++ 11 Libraries
#include <memory>
#include <exception>
#include <thread>
#include <chrono>

// Manager Classes
#include "ThreadManager.h"
#include "GameEngine.h"
#include "ShaderManager.h"

// Lesser Classes
#include "Shader.h"

#endif 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-12-26T16:10:50.627

我知道这个答案来得有点晚，但我没有看到你通过调用`glfwMakeContextCurrent(window)`. 你必须在打电话之前这样做`glewInit()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-09T23:21:02.817

如果 glewInit() 没有返回错误，则返回 0。由于某种原因，返回与 GLEW_OK 的比较不好，但如果该值不是 0，则存在错误。

```
if(glewInit()) {

  //Handle Error

} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-09T08:25:35.340

您使用的是 Core OpenGL 3.3 版，因此您必须指定您使用的是“新”并且按照 GLEW 术语“实验性”API。在调用 glewInit(); 之前添加这一行

```
glewExperimental=GL_TRUE; 
```

这是来自我的引擎的完整初始化代码。它适用于 4.2，但对您来说应该是一样的：

```
 void Engine::InitWithGLFW(){
    if(!glfwInit()){
        exit(EXIT_FAILURE);
    }
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 4);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 2);
    //glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT,GL_TRUE);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_COMPAT_PROFILE);
    glfwOpenWindowHint(GLFW_FSAA_SAMPLES,4);
    glfwDisable(GLFW_AUTO_POLL_EVENTS);

 #ifdef DEBUG
    glfwOpenWindowHint(GLFW_OPENGL_DEBUG_CONTEXT, GL_TRUE);
 #endif

    if(!glfwOpenWindow(_width,_height,8, 8, 8, 8, 24, 8,GLFW_WINDOW)){
        glfwTerminate();
        exit(EXIT_FAILURE);
    }

    glfwSetWindowTitle("XDEngine V-1.0");
    InitGlew();
 }

 void Engine::InitGlew(){
    glewExperimental=GL_TRUE;
    GLenum err = glewInit(); 

    if (GLEW_OK != err)
    {
        /* Problem: glewInit failed, something is seriously wrong. */
        fprintf(stderr, "Error: %s\n", glewGetErrorString(err));

    }

    fprintf(stdout, "Status: Using GLEW %s\n", glewGetString(GLEW_VERSION));
    glEnable (GL_BLEND);
    glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    glEnable(GL_MULTISAMPLE);
    glEnable(GL_DEPTH_CLAMP);
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);

    glfwSetWindowSizeCallback(Reshape);
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-05T09:02:56.020

我遇到了类似的问题，最后在[opengl.org](http://www.opengl.org/wiki/OpenGL_Loading_Library)上得到了解决方案。GLEW 开发人员似乎还没有解决核心上下文问题。虽然有一个非常简单的解决方案：

```
 glewExperimental=TRUE;
  GLenum err=glewInit();
  if(err!=GLEW_OK)
  {
    //Problem: glewInit failed, something is seriously wrong.
    cout<<"glewInit failed, aborting."<<endl;
  } 
```

高温高压

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-27T06:12:26.803

比较`glewInit()`返回类型`GLenum`

```
if (glewInit() != GLEW_OK) {
    printf("glew initialization failed!");
} 
```

# java - 简单枚举困境

> ID：13784239
> 
> 赞同：-5
> 
> 时间：2012-12-09T03:03:23.907
> 
> 标签：java, enums

因此，当我使用一些 API 时，我发现它们可以通过 ex: 返回一些整数，`Settings.MAIN_SCREEN`并且可能会返回`1`. 我假设它`Settings`是一个枚举，但我不知道如何从枚举构造函数返回一个变量。我能做的就是`Settings.MAIN_SCREEN.getId()`

如果有人知道如何做到这一点，请分享

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T03:12:17.377

枚举不能“成为”或“返回”整数类型。

在 Java 有枚举之前，有一个通用的约定是让接口充满命名常量。那些可以有任何类型。

另一方面，枚举是对象，正如您所指出的，您必须有一个访问器才能将整数值与一个相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:13:57.823

请提供您正在使用的 API 的实际示例（例如指向他们的 JavaDoc 的链接）。

从您写的内容来看，我认为这`Settings.MAIN_SCREEN`实际上不是枚举，而是常数，仅此而已：

```
public class Settings {
    public static final int MAIN_SCREEN = 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T04:10:41.073

现有的答案是正确的；正如他们都说的那样，您看到的可能不是枚举，而实际上是某个对象中的常量静态值。不管怎样，我想我也可以添加一些可能有帮助的东西。枚举类似于对象，因为它们可以具有构造函数和成员字段，但是构造函数不能被外部访问。[查看文档以获取更多信息。](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

要假设地回答您的问题，您可以执行以下操作：

```
public enum Settings{
    MAIN_SCREEN(1) // internally invoking this enum's constructor, passing the value 1.

    private int id;        

    private Settings(int id){
        this.id= id;
    }

    public int getId(){
        return this.id;
    }
} 
```

然后在你的代码的某个地方，你可以这样做：

```
Settings.MAIN_SCREEN.getId() // this will return the value 1, as specified in the enumeration. 
```

据我所知，如果不使用这种方法，就无法直接从枚举中获取整数值，因为枚举本身是在内部维护的。您可以将枚举的名称作为字符串 ( `getName()`) 获取。如果您提到的此设置内容来自对您不开放的第三方 api，那么您可能就在这个小溪上。

# immutability - 所有不可变对象都是单例实例吗？

> ID：13784244
> 
> 赞同：-3
> 
> 时间：2012-12-09T03:04:56.080
> 
> 标签：immutability

所有不可变对象都是单例实例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T03:07:11.783

不。

[不可变对象](http://codebetter.com/patricksmacchia/2008/01/13/immutable-types-understand-them-and-use-them/)是不可更改的，通常的做法是通过构造函数传递（注入）所有必需的值（即在实例化对象时指定它们），然后在对象的生命周期内外部不可更改。

[单例对象](http://msdn.microsoft.com/en-us/library/ff650316.aspx)是当有一个实例时，该实例可能是不可变的，但很少是。

# objective-c - Dispatch_sync 从主线程使用主线程的队列没用？

> ID：13784248
> 
> 赞同：1
> 
> 时间：2012-12-09T03:05:24.427
> 
> 标签：objective-c, ios, multithreading

我只是想确认我的推理，即使用主队列从 UI 线程（主线程）执行 dispatch_sync 是完全没用的。

更重要的是，异步将同样无用，但会产生一种错觉，即它之所以有用，是因为它不会阻塞。

让我知道。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T03:29:36.367

到同`dispatch_sync`一个队列不仅没用，而且会锁定你的应用程序。`dispatch_sync`说“调度一些东西，但在另一个队列响应之前不要继续这个队列”。如果“其他”队列（我们正在等待它完成分派的块）与“这个”队列（在其他队列响应之前被阻塞）相同，这显然不会发生。您的应用程序将冻结，等待自己！

另一方面，`dispatch_async`到您当前所在的同一个队列通常不是一个非常有用的结构，但至少它不会冻结。我见过一些笨拙的代码，它们习惯于`dispatch_async`说“一旦我完成了一系列动作，我就想做其他事情”。在无法以另一种方式更优雅地完成的情况下，我很少看到这种异步调度，但我已经看到了。

# objective-c - Make UICollectionView scroll right to left?

> ID：13784250
> 
> 赞同：6
> 
> 时间：2012-12-09T03:06:20.023
> 
> 标签：objective-c, iphone, cocoa-touch, uiscrollview, uicollectionview

The natural direction for a UICollectionView to scroll when set horizontally is from left to right. Is there any way to reverse this? The simpler the better.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T04:03:50.587

I'm not sure exactly what you mean -- if you set the scrolling to horizontal, it scrolls equally well, left and right. If you want it to start it from the right side, you can use this method:

```
[self.collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:self.theData.count - 1 inSection:0] atScrollPosition:UICollectionViewScrollPositionRight animated:NO]; 
```

This assumes that you have 1 section, and the array populating the collection view is called theData.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-17T20:16:16.590

Swift4 solution in `cellForItemAt` collectionView function

```
 func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {
                let cell = categoryBook.dequeueReusableCell(withReuseIdentifier: "HomeCategoryCell", for: indexPath) as! HomeCategoryCell
                collectionView.transform = CGAffineTransform(scaleX:-1,y: 1);

                cell.transform = CGAffineTransform(scaleX:-1,y: 1);
               } 
```

but this solution in some cases `did not work properly if it dose not` you can use ColletctionView `scrollToItem` method and you can implement it after you reload the data .

```
 self.YourCollectionView.reloadData()
        self.YourCollectionView.scrollToItem(at: NSIndexPath(item: self.YourObjectListData.count - 1, section: 0) as IndexPath, at: .right, animated: false) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-30T04:21:38.957

Same thing for swift:

```
collectionView?.scrollToItemAtIndexPath(NSIndexPath(forItem: theData.count - 1, inSection: 0), atScrollPosition: .Right, animated: false) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-08T20:05:55.573

I have found using xCode 12.4 with an app that targets iOS 12 that this there seems to be no need to load the items in a different order or do any transforms. The only issue has to do with the initial scroll position. So all I need to do to get things working in both RTL and LTR is the following:

```
collectionView.reloadData {
        if self.collectionView.effectiveUserInterfaceLayoutDirection == .rightToLeft {
            self.collectionView?.scrollToItem(at: IndexPath(row:0, section:0), at: .right, animated: false)
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-30T00:28:46.610

Use This Extention

```
extension UICollectionViewFlowLayout {
open override var flipsHorizontallyInOppositeLayoutDirection: Bool {
    return true  //RETURN true if collection view needs to enable RTL
} 
```

}

# facebook-android-sdk - android facebook sdk app：最低安卓版本

> ID：13784256
> 
> 赞同：0
> 
> 时间：2012-12-09T03:07:33.520
> 
> 标签：facebook-android-sdk

利用最新的 android facebook sdk 3.0 的 android 应用程序的最低版本是多少？我正在 facebook sdk 源清单中阅读此内容：`<uses-sdk android:minSdkVersion="8" />`.

如果我们使用 android-support-v4.jar 库，它可以低至 SDK_INT=4 吗？或者 facebook 库会让我们的应用程序无法在低于 sdkint=8 的版本上使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:54:29.960

我尝试与（api 4）一起使用，facebook 3.0 sdk 不起作用并崩溃。去了下一个最高的（android 2.1 api 7）并且有效....

# php - 在 Ajax 完成时返回 javascript 代码

> ID：13784260
> 
> 赞同：0
> 
> 时间：2012-12-09T03:08:27.687
> 
> 标签：php, javascript, jquery, ajax

我只是想知道这是否正确。

是否可以执行从 Ajax 调用返回的 javascript 代码？

```
ser = $('#new_customer_ input').serialize();

$.ajax({
type: 'POST',
url: "ajax/newCustomer.php",
data: ser,
success: function(data)
    {
        $('div#result').html(data);
    }
}); 
```

假设 php 文件返回如下内容：

`<script>$('input#customer_name').val('something');</script>`

这将在响应时执行。

虽然我的问题是：这是正确的还是我应该做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:12:43.523

您可以使用

```
eval('js_code'); 
```

为了那个原因。但请确保字符串中的代码来自非常可靠的来源（可能来自您的网络服务）。

你这样做的方式是正确的。最好不要使用 eval

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:43:57.577

我想说你所做的并没有错，但问题是你的 JavaScript 不会告诉你整个画面。由于您是从 PHP 生成 js，并通过 Ajax 加载它，因此当您尝试分析和调试该代码时，可能很难理解发生了什么。例如，您看到`input#customer_name`更改的值，但找不到更改的代码，因为它是由 PHP 生成并动态提供的。

我建议只从 PHP 发送数据，并在 js 文件中保留使用该数据的任何逻辑。考虑到您发布的代码，您可以只`echo 'something'`在 PHP 上，然后从 js 执行此操作：

```
$.ajax({
    type: 'POST',
    url: "ajax/newCustomer.php",
    data: ser,
    success: function(data)
    {
        $('input#customer_name').val(data);
    }
}); 
```

如果您需要发送更复杂的数据，可以使用编码为 JSON ( `echo json_encode($myarray);`) 的 PHP 数组。然后在 JavaScript`data`上将是一个数组或对象，您可以根据需要循环它、访问命名属性等（jQuery 会自动为您解析 JSON）。

例如，考虑以下 PHP：

```
$array = array(
    'foo' => 'bar',
    'bar' => true,
    'baz' => 5
);
echo json_encode($array); 
```

鉴于此，`data`您的 ajax 回调的参数将是一个 js 对象，如下所示：

```
{
'foo' : 'bar',
'bar' : true,
'baz' : 5
} 
```

`data.foo`您可以使用和`data.bar`访问这些属性`data.baz`。

# postgresql - Symfony2 Doctrine - PostgreSQL 的 ILIKE 子句？

> ID：13784261
> 
> 赞同：8
> 
> 时间：2012-12-09T03:08:34.147
> 
> 标签：postgresql, symfony, doctrine-orm

我目前正在使用 symfony2、教义 2.3 和 PostgreSQL 9。我已经搜索了几个小时来看看我到底如何`ILIKE`使用`QueryBuilder`.

看来他们只有`LIKE`. 但是，在我的情况下，我正在搜索不区分大小写的内容。到底是怎么做到的？

```
// -- this is the "like";
$search = 'user';
$query = $this->createQueryBuilder('users');
$query->where($query->expr()->like('users.username', $query->expr()->literal('%:username%')))->setParameter(':username', $search);

// -- this is where I get "[Syntax Error] line 0, col 86: Error: Expected =, <, <=, <>, >, >=, !=, got 'ILIKE'
$search = 'user';
$query = $this->createQueryBuilder('users');
$query->where('users.username ILIKE :username')->setParameter(':username', $search); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T03:20:15.933

我不知道 Symfony，但你可以替代

```
a ILIKE b 
```

和

```
lower(a) LIKE lower(b) 
```

您也可以尝试 operator `~~*`，它是它的同义词，`ILIKE` 它的运算符优先级略低，因此您可能需要括号来连接您不会使用的字符串`ILIKE`

```
a ILIKE b || c 
```

变成

```
a ~~* (b || c) 
```

[关于模式匹配的手册，以`LIKE`/开头`ILIKE`。](http://www.postgresql.org/docs/current/interactive/functions-matching.html#FUNCTIONS-LIKE)

我认为这家伙有同样的问题并得到了答案： http:
[//forum.symfony-project.org/viewtopic.php?f=23 &t=40424](http://forum.symfony-project.org/viewtopic.php?f=23&t=40424)

显然，您可以使用 SQL 供应商特定的功能扩展 Symfony2：http:
[//docs.doctrine-project.org/projects/doctrine-orm/en/2.1/cookbook/dql-user-defined-functions.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/cookbook/dql-user-defined-functions.html)

我不喜欢 ORM 和框架，他们为了保持“便携”（几乎不工作）而牺牲 Postgres 的丰富功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-03T21:13:15.900

这对我有用（Symfony2 + Doctrine 2）

```
$qq = 'SELECT x FROM MyBundle:X x WHERE LOWER(x.y) LIKE :y';
$q = $em->createQuery($qq)->setParameter(':y', strtolower('%' . $filter . '%'));
$result = $q->getResult(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-07-29T07:34:57.637

不幸的是，我们仍然没有能力创建自定义比较运算符......

但是我们可以创建一个自定义函数来实现比较。

我们的 DQL 查询看起来像这样：

```
SELECT q FROM App\Entity\Customer q WHERE ILIKE(q.name, :name) = true 
```

描述 ILIKE 函数的类如下所示：

```
class ILike extends FunctionNode
{
    /** @var Node */
    protected $field;
    /** @var Node */
    protected $query;

    /**
     * @param Parser $parser
     *
     * @throws \Doctrine\ORM\Query\QueryException
     */
    public function parse(Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->field = $parser->StringExpression();
        $parser->match(Lexer::T_COMMA);
        $this->query = $parser->StringExpression();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    /**
     * @param SqlWalker $sqlWalker
     *
     * @return string
     * @throws \Doctrine\ORM\Query\AST\ASTException
     */
    public function getSql(SqlWalker $sqlWalker)
    {
        return '(' . $this->field->dispatch($sqlWalker) . ' ILIKE ' . $this->query->dispatch($sqlWalker) . ')';
    }
} 
```

生成的 SQL 将如下所示：

```
SELECT c0_.id AS id_0,
       c0_.name AS name_1,
FROM customer c0_
WHERE (c0_.name ILIKE 'paramvalue') = true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-30T15:10:07.277

据我所知，Symfony2 中的搜索查询（至少在使用 Doctrine 时）是不**区分大小写的**。如[Doctrine QL 文档中所述](http://doctrine-orm.readthedocs.org/en/stable/reference/dql-doctrine-query-language.html)：

> DQL 不区分大小写，但命名空间、类和字段名称除外，它们区分大小写。

# css - 如果父 div 设置为溢出：隐藏，为什么有些 div 会突出？

> ID：13784265
> 
> 赞同：0
> 
> 时间：2012-12-09T03:09:51.240
> 
> 标签：css, responsive-design

**问题：**我试图让所有元素对齐并适合一个 div 而不会溢出。如果父 div 设置为溢出：隐藏，为什么有些 div 会突出？我怎样才能解决这个问题？

**示例：http:** [//jsfiddle.net/YNS8b/](http://jsfiddle.net/YNS8b/)

谢谢！

**代码：**

```
<div id = "top_bar" >
        <div id="top_left_button" >border</div>
        <div class="trapezoid-border"></div>    
        <div class="trapezoid"> border </div>
</div>​

#top_bar{
    background-color: #000;
    border-bottom: 1px solid #666;
    color: #222;
    position:fixed;
    left:0px;  
    top: 0px;
    width:100%;
    overflow:hidden;
    height: 50%;
    font-weight: normal;
    white-space: nowrap;
    color: white;
    z-index:20; 
    line-height: 45px;
    min-width:320px;
    max-width: 320px;
    max-height:48px;
    border-radius: 5px;
    text-shadow: rgba(0,0,0,0.6) 0px -1px 0px; 
}

#top_bar:after {
    content: '';
    width: 10%;
    display: inline-block;
    font-size: 0;
    line-height: 0
}

.trapezoid{
    vertical-align: middle;
    position:absolute;
    border-bottom: 60px solid #446DB2;
    border-left: 45px solid transparent;
    border-top-left-radius:30px;
    *border-top-right-radius:15px;
    *border-bottom-right-radius:3px;
    height: 0;
    width: 50px;
    display: inline-block;
    right:1px;
    z-index: 100;
}

.trapezoid-border{
    vertical-align: middle;
    position:absolute;
    border-bottom: 60px solid rgba(225, 225, 225, 0.5);        /* Color Changed will be pseudo-border color */
    border-left: 45px solid transparent;
    border-top-left-radius:30px;
    *border-top-right-radius:15px;
    *border-bottom-right-radius:3px;
    height: 0;
    width: 53px;                       /* Extra 3 pix when compared to .trapezoid class width */
    display: inline-block;
    right:1px;
}

#top_left_button {
    color: white;
    height: 100%;
    overflow:hidden;
    display: inline-block;
    text-align: center;
    vertical-align: middle;
}
#top_left_button{
    width: 20%;

    border-right: 2px solid #666;
    background-color: #446DB2
}

​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T19:33:55.813

曾经浏览器支持圆角，但并不总是掩盖所有可能出现在边框本身曲线内的内容。提出了许多解决方案，包括对出现在父母已经圆角附近的任何孩子进行四舍五入，使用 webkit 掩码等专有功能等。今天，现代浏览器将更好地掩蔽内容，因此这应该不再是问题. 事实上，在现代版本的 Chrome 和 Internet Explorer 中打开这个演示表明浏览器本身已经纠正了这种行为。

可以在此处找到其他讨论：[如何使 CSS3 圆角隐藏溢出](https://stackoverflow.com/questions/5736503/how-to-make-css3-rounded-corners-hide-overflow-in-chrome-opera)。

# iphone - 如何为使用回调的类创建包装器以使用块？

> ID：13784267
> 
> 赞同：4
> 
> 时间：2012-12-09T03:11:27.360
> 
> 标签：iphone, objective-c, ios, objective-c-blocks

我正在深入研究 iOS 编程，并且正在学习如何使用块。我在我的项目中使用了一个糟糕的、过度设计的库，它使用单个回调方法来处理所有数据请求......

```
@protocol SuckyClassDelegate <NSObject>
-(void)returnedSuckyData:(NSMutableDictionary*)data;
@end

@interface SuckyClass: NSObject
@property (nonatomic, weak) id<SuckyClassDelegate> delegate;
-(void)getSuckyData;
@end

@interface MyViewController: UIViewController <SuckyClassDelegate>
-(void)requestDataFromSuckyClass;
@end 
```

我想为 SuckyClass 创建一个包装类，允许我在需要从 SuckyClass 访问数据时使用块，但我不知道该怎么做。我想要这样的东西...

```
@interface SuckyClassWrapper
- (void)requestDataWithSuccessBlock:(void(^)((NSMutableDictionary*)data))successBlock;
@end

@implementation MyViewController
-(void)requestDataFromSuckyClass {
   SuckyClassWrapper *wrapper = [[SuckyClassWrapper alloc] init];
   [wrapper requestDataWithSuccessBlock:^(NSMutableDictionary *data) {
       NSLog(@"%@", data);
   }
}
@end 
```

...但我不知道如何将回调过程转换为块。无论如何可以在这里给我一些方向吗？

提前感谢您的智慧！

顺便说一句，我只是在没有测试的情况下编写了代码，所以如果有任何拼写错误，我深表歉意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T03:58:34.243

诀窍是将完成块复制到类 iVar，然后您可以稍后调用。

```
@property (nonatomic, copy) void (^errorHandler)(NSError *);
@property (nonatomic, copy) void (^successHandler)(NSString *); 
```

这是一个保存两个块供以后使用的方法，然后调用另一个类方法：

```
- (void)methodWithErrorHandler:(void(^)(NSError *error))errorBlock successHandler: (void(^)(NSString *data))successBlock
{
    // Copy the blocks to use later
    self.successHandler = successBlock;
    self.errorHandler = errorBlock;

    // Run code
    [self doOtherThings];
} 
```

稍后 - 当我们想要做的事情完成时，我们有另一个方法可以调用来运行块。在这个愚蠢的示例代码中，我们检查类属性`self.error`是否为`nil`. 如果不是`nil`，我们将该错误发送到我们保存的错误块。如果是`nil`，我们传递`self.data`到成功块。

```
- (void)finishThingsUp
{
    // Check to see if we should call the error block or the success block
    if (self.error) {
        self.errorHandler(self.error);
    } else {
        self.successHandler(self.data);
    }
    // Clean up the blocks
    self.errorHandler = nil;
    self.successHandler = nil;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T04:55:16.843

我们可以这样使用：

```
typedef void (^SuccessDataBlock)(NSMutableDictionary *);
@interface SuckyClassWrapper : NSObject <SuckyClassDelegate>
    @property (nonatomic, retain) NSData *inputData;
    @property (nonatomic, copy) SuccessDataBlock completionHandler;

    + (id)requestData:(NSData *)data successBlock:(SuccessDataBlock)handler;
@end

@implementation SuckyClassWrapper

@synthesize inputData;
@synthesize completionHandler;

- (id)initWithData:(NSData *)data completionHandler:(SuccessDataBlock)handler

{
    self = [super init];
    if (self != nil)
    {
        inputData = [data retain];
        self.completionHandler = handler;
    }
    return self;
}

+ (id)requestData:(NSData *)data successBlock:(SuccessDataBlock)handler
{
    return [[[self alloc] initWithData:data completionHandler:handler] autorelease];
}

//implement SuckyClass delegate
- (void)returnedSuckyData:(NSMutableDictionary *)data
{
    self.completionHandler(data);
}

@end 
```

用法：

```
SuckyClassWrapper *wrapper = [SuckyClassWrapper requestData:data successBlock:^(NSMutableDictionary *successData) {
    //your code here
}]; 
```

# c - 调用 execvp() 内部的重定向不起作用

> ID：13784269
> 
> 赞同：5
> 
> 时间：2012-12-09T03:11:55.053
> 
> 标签：c, exec, fork, io-redirection

我一直在实现一个使用 execvp() 执行给定命令的小程序。不使用重定向时它工作正常，但是当我运行以下命令时：

```
cat file1.txt > redirected.txt 
```

cat 输出以下错误信息并失败：

```
cat: >: No such file or directory
cat: redirected.txt: No such file or directory 
```

我已经做了一些挖掘，我开始认为 execvp() 可能不允许进行重定向，因为它不在 shell 中运行。这是否意味着我必须在重定向发生时手动选择并在我的 fork/exec 代码中使用管道来绕过这个限制？有没有比使用 execvp() 更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T03:19:23.840

您的“执行给定命令的小程序”本质上是一个外壳。由于您正在编写一个 shell，因此您的工作就是使用您想要的任何语法来实现重定向。`>`重定向操作符不是内核的一个特性，它是一个 shell 特性。

要实现`sh`-style 重定向，您必须解析命令、定位重定向运算符、打开文件并将它们分配给输入/输出描述符。这必须在调用*之前*`execvp`完成。查找`dup2`系统调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-09T03:20:48.407

如果你真的想使用这种语法，你可以使用 system() 。正如您所指出的，重定向和通配符扩展以及一大堆其他事情是由类 Unix 系统上的 shell 处理的。

使用 fork 的方法如下所示：

```
int kidpid;
int fd = open("redirected.txt", O_WRONLY|O_TRUNC|O_CREAT, 0644);
if (fd < 0) { perror("open"); abort(); }
switch (kidpid = fork()) {
  case -1: perror("fork"); abort();
  case 0:
    if (dup2(fd, 1) < 0) { perror("dup2"); abort(); }
    close(fd);
    execvp(cmd, args); perror("execvp"); abort();
  default:
    close(fd);
    /* do whatever the parent wants to do. */
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T03:32:53.663

似乎最简单的事情是：

```
execlp( "/bin/sh", "/bin/sh", "-c", "cat file1.txt > redirected.txt", (char *)NULL ); 
```

您可以对`execvp`.

# python - 如何从模块中的模块中的模块中更改变量...（困惑）

> ID：13784273
> 
> 赞同：0
> 
> 时间：2012-12-09T03:12:17.813
> 
> 标签：python, object, module

我的主模块中有一个变量，它使用另一个模块进行了更改，但我想通过另一个模块从我的主模块更改变量。我是编程新手，所以我真的不知道如何解释这些东西 - 对不起，如果我问的是一个愚蠢的问题。

该程序的层次结构看起来有点像这样：

主要
---功能
---Pygame_handling
------功能

我使用“功能”模块来更改“主”中的变量。我只是通过从“功能”中获取定义的变量来做到这一点。但是当我通过“Pygame_handling”更改变量时，在“Main”模块中创建的“Features”对象中没有更改。

主文件

```
import Features
class Simulator:
    def __init__(self):
        self.Features  = Features.Methods()
        self.variables = self.Features.dictionary

        self.PyObject  = Pygame_handling.Window() 
```

Pygame_handling.py

```
import Features
class Window:
    def __init__(self):
        self.Features = Features.Methods()
        dict = {"some":"dict"}
        self.Features.monitor_changes(dict) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:52:10.010

你是如何初始化这些类的？通常当我需要做这样的事情时，我将其编码为：

**py1.py：**

```
class Test(object):
    def test_print(self):
        print 'Hi!'

TEST = Test() 
```

**py2.py：**

```
from py1 import TEST
TEST.test_print()

# Adding new stuff to the TEST initialized class
TEST.new_var = 50
print TEST.new_var
#output: 50 
```

所以现在您可以使用该模块上的初始化类。

# math - 检测一个矩形是否可以放入另一个矩形

> ID：13784274
> 
> 赞同：14
> 
> 时间：2012-12-09T03:12:36.160
> 
> 标签：math, rect

这个问题不同于测试一个矩形是否在另一个矩形中。

已知信息是两个矩形的边长。

如何计算一个矩形是否可以放入另一个矩形？

![可以把 rect a 放入 rect b](../Images/1f68ec1920a3add17b8e9eb6269e0fd5.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T04:32:33.497

这是一个很好的问题！当且仅当满足这些条件*之一*时，具有边和( ) 的较小矩形完全适合具有边`p`和`q`( ) 的*较大*矩形：`p >= q`*`a``b``a >= b`*

 *![在此处输入图像描述](../Images/3bd9112760e15e5a1384487fd302f126.png)

*或者*

![在此处输入图像描述](../Images/d5f241d420d4b163ad116a83bda4abe8.png)

请参阅[此内容](http://www.jstor.org/discover/10.2307/2691523?uid=2&uid=4&sid=21101423280913)以供参考。

* * *

因此，如果我们有变量`a`, `b`, `p`, `q`，我们可以通过评估来检查这种矩形排列是否可行：

```
(p <= a && q <= b) || (p > a &&
                        b >= (2*p*q*a + (p*p-q*q)*sqrt(p*p+q*q-a*a)) / (p*p+q*q)) 
```

* * *

**编辑：**感谢@amulware 在他的评论中发布这个替代版本：

![在此处输入图像描述](../Images/d15425dc20cdc33a0b22e9d0fbe0444c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T03:30:31.887

第一个检查当然是矩形是否在任何一个轴对齐的方向上都适合另一个。

如果不是，它唯一适合的选择是对角线，但实际上可能有很多角度适合它，困难在于，不仅仅是猜测，而且确实计算一个可能的角度，如果存在的话。

现在，请注意，如果内部矩形确实适合对角线，那么如果它的对角同时接触外部矩形的顶部和底部边缘，或者左侧和右侧，则您可以将其旋转直到两个。（在你的图表中或多或少是第一个。）

在这种情况下，您已经知道您已将其放入该一维中（在示例中为 y 轴）。然后，您必须计算另一个维度中内部矩形的边界宽度，并根据外部框的宽度检查它。

可能有一个更智能的算法可以解决这个问题，但我 100% 确定我所描述的内容有效。让我知道您是否可以自己计算出这个数学（如果您认为这是一个很好的解决方案），如果没有，我可能会稍后再试。我想知道我的算法是否可以在没有三角函数的情况下完全实现......

**编辑：** 好吧，我无法抗拒......

这是我为解决上述问题所做的数学运算：（对不起，仅以图像形式，我希望我的笔迹是可读的。） ![纸上算法](../Images/ade466926c41df1e3d8a61e24124315c.png) 如果有人可以检查我的数学，我会很高兴。我现在没有发现任何步骤有任何问题，但最好让其他人检查。（当然：使用这个需要您自担风险。）

如果有人发现此算法有任何问题，请告诉我，我会尽快修复。

我也很想看看是否有人有更好的解决方案，涉及不太复杂的数学。也许是基于向量的方法？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T13:39:35.523

好吧，看起来 ARS 解决方案是正确的，我仍然会尝试发布我的解决方案，这更难，但它会让您将一个矩形具体嵌入到另一个矩形中（如果可能的话）。

让我们假设`a>b`和`p > q`。`a > p`如果和 ，解决方案是显而易见的`b > q`。`a<p`如果和也可以解决问题`b>q`。看看所附的照片，你只需要最后一个不等式系统（如果你有兴趣，你可以看看它是如何推导出来的）

你所需要的只是确保最后一个不等式系统有一个介于`0`和之间的解`1`。为此，您需要将每个不等式求解为方程（如通常的二次方程）。如果没有解决方案（这是不可能的），那么不平等的解决方案就是完整的实线。如果方程有两个（可能相等）解`t_1`，并且`t_2`不等式的解是`[-infinity, t_1]`与 结合的部分`[t_2, infinity]`。在你得到两个不等式的解决方案后，你应该将它们相交。现在我们应该记住`t`是`cos`一个角度（在`0`和之间），所以不等式应该在和`pi/2`之间有解。在这种情况下，第二个矩形可以嵌入到第一个矩形中。如果你采取例如`0``1``t_1`（较小的方程根）您可以构建矩形嵌入。

![在此处输入图像描述](../Images/89116fb5fd85361126f2f503bfc2d54c.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T03:29:34.553

您可以很容易地清除这两个简单的情况：

1.  如果第二个的较大尺寸小于第一个的较大尺寸，并且如果较小的尺寸也是如此，则第二个适合内部。
2.  如果第二个的较大尺寸大于第一个的斜边，那么第二个将不适合第一个。

困难的部分是确定它是否可以以某个角度（例如在您的草图中）适合。我不知道一个简单的公式——它可能需要一个即插即用的解决方案。

可能是[数学堆栈交换网站](https://math.stackexchange.com/)的好问题。

**补充：** 我不是 100% 确定这是否，但我认为如果第二个的斜边小于第一个的斜边，那么它会合适。

**糟糕：**不——我会收回它。但是，如果第二个的斜边大于第一个的斜边，*它将不*适合。*

# excel - 工作簿的 Sheet1 包含基于特定条件的其他工作表的名称

> ID：13784278
> 
> 赞同：0
> 
> 时间：2012-12-09T03:12:56.160
> 
> 标签：excel, vba

我有一个 excel 工作表，它由许多表依次组成，比如说大约 5...任何单元格中的颜色，它将报告工作簿的工作表 1 中的工作表名称，即 Sheet<> 某某在其任何一个单元格中包含红色。

到目前为止，我只能确定特定工作表中是否存在红色......但不知道如何在工作表 1 中报告相应的工作表名称。

```
Sub CheckColor()
Dim Row
For Row = 2 To tsheet.UsedRange.Rows.Count
For chkcol = 1 To Sheet1.UsedRange.Columns.Count
If tsheet.Cells(Row, chkcol).Interior.ColorIndex = 3 Then
    'How to report the corresponding sheet name in sheet 1???
End If
Next
Next Row 
```

结束子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:27:53.230

首先，我认为使用 Range.Find() 和 FindFormat 会更有效：

```
Private Sub test()
    Application.FindFormat.Clear
    Application.FindFormat.Interior.ColorIndex = 3

    Range("A1:C3").Find(What:="", LookAt:=xlPart, SearchFormat:=True).Value = "test"
End Sub 
```

对于您的主要问题，我认为您首先需要确定是要为所有工作表还是为子集执行代码。如果它适用于所有工作表，那么您可以简单地将上面的代码包装在 Worksheets 集合上的 for each 循环中。

如果您需要为工作表的子集执行此代码，则可以使用规则（前 4 个字符 =“abcd”）或将它们硬编码到数组中。

然后，只需检查 Find() 返回的范围是否不`nothing`意味着成功。如果满足条件，则当前工作表将根据需要由主工作表使用。

# ios - -[GKPlayerInternal setAuthenticateHandler:]: 无法识别的选择器发送到实例

> ID：13784279
> 
> 赞同：3
> 
> 时间：2012-12-09T03:12:56.997
> 
> 标签：ios, ios5, gamekit, sigabrt

使用此日志获取错误 SIGABRT：“-[GKPlayerInternal setAuthenticateHandler:]: unrecognized selector sent to instance”

我在 iPad 3 iOS 5.1.1 上对此进行了测试

```
GKLocalPlayer* localPlayer = [GKLocalPlayer localPlayer];
localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error)  //error here
{ /* some code */ }; 
```

在 iOS 6 上这个工作正常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T04:04:16.547

我很高兴您提到您正在使用 iOS 5 进行尝试。

根据 Apple 的文档，[“ `authenticateHandler`”](http://developer.apple.com/library/ios/documentation/GameKit/Reference/GKLocalPlayer_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKLocalPlayer/authenticateHandler)仅适用于 iOS 6 和更新***版本***。

# emacs - Emacs org-mode 插入的日期不可读

> ID：13784283
> 
> 赞同：3
> 
> 时间：2012-12-09T03:13:34.310
> 
> 标签：emacs, org-mode

我在 Emacs 中使用 org-mode。

问题是在发布`C-c >`或`C-c .` org-mode 插入日期之后，如下所示，

（首先它出现在 minibuffer 中，即使是编辑文件也是用 utf-8 编码的）

<2012-12-09\326\334\310\325>

如何解决这个问题？我的操作系统是Win7 32bit中文版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T03:45:11.177

基本上，我认为 emacs 使用的*字体*无法显示当天用您的语言拼写的方式。我猜你缺少一些已安装的字体，或者 emacs 不知道在哪里可以找到它们，但我不知道如何解决这个问题。

话虽这么说，在我的 emacs 中插入这样的八进制转义符给了我`ÖÜÈÕ`，我不相信这就是许多语言中days 的拼写方式。该文件可能以 utf-8 编码，但缓冲区呢？该缓冲区 ( ) 中的`buffer-file-coding-system`变量是什么`C-h v` `buffer-file-coding-system`？

变量`calendar-day-name-array`和`org-time-stamp-custom-formats`可能是有趣的，我想你可以用 覆盖时间戳现在的显示方式`org-display-custom-times`，这可能是一种解决方法。有关它的更多信息，请参阅[手册](http://orgmode.org/manual/Custom-time-format.html#Custom-time-format)。

最后，我有

```
 (set-language-environment "UTF-8")
  (prefer-coding-system 'utf-8) 
```

在我的配置中，您可能想要调查的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-01T15:04:30.253

我遇到了同样的问题。

在网上找了很久，找到了`(setq system-time-locale "C")`工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-13T16:18:07.727

我试图在 2014 年 8 月解决这个问题。

我的解决方案是将以下代码添加到您的 Emacs 配置文件中：

`(set-locale-environment "zh_CN.utf-8")`

请注意，时间将以中文显示。希望能帮助到你。

# ruby-on-rails - before_filter 当前用户除外

> ID：13784285
> 
> 赞同：1
> 
> 时间：2012-12-09T03:13:56.710
> 
> 标签：ruby-on-rails, session, authentication, filtering, before-filter

我的 users_controller 中有这个过滤器之前的电流

```
before_filter :authenticate_usergroup, :except => [:edit, :update, :show] 
```

它非常适合仅允许用户编辑他们的信息但无法查看所有用户，但我发现只需更改他们在 url 中的“id”，他们还可以编辑其他用户信息。

我如何只允许当前用户使用 :edit、:show 和 :update 函数作为他们自己的记录。我的 application_controller 中有这个方法可以访问当前用户

```
def current_user
 return unless session[:user_id]
 @current_user ||= User.find_by_id(session[:user_id])
end

#update from users_controller.rb
def update
@user = User.find(params[:id])

respond_to do |format|
  if @user.update_attributes(params[:user])
    format.html { redirect_to @user, :notice => 'User was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render :action => "edit" }
    format.json { render :json => @user.errors, :status => :unprocessable_entity }
  end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T19:37:46.313

我是这样做的：

在控制器中的#show 操作中：

```
if current_user.id == Certificate.find(params[:id]).user_id
  @certificate = Certificate.find(params[:id])
else
  redirect_to certificates_url, notice: 'You can only view your own certificates'
end 
```

我知道它没有使用“before_filter”，但它似乎具有相同的效果，即阻止用户简单地输入不同的网址来查看其他用户信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T03:22:20.127

如果您“限定”只有这些`current_user`人可以访问他们的信息，那没关系。

所以在显示和编辑中

`@user = current_user`

在更新操作中，类似的东西 `current_user.update_attributes(params[:user])` 应该可以解决问题。

# php - .htaccess 文件无法识别 index.php

> ID：13784287
> 
> 赞同：1
> 
> 时间：2012-12-09T03:14:20.850
> 
> 标签：php, mod-rewrite

我创建了一个允许虚 URL 的 .htaccess 文件。但是，如果不输入索引文件，我将无法再输入 www.website.com。即我必须输入 www.website.com/index.php 才能看到主页。这是我的 .htaccess 文件的样子：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .* - [L]
RewriteRule ^(.*)$ http://www.website.com/profile.php?u=$1 [NC] 
```

有人知道怎么修这个东西吗？谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T03:56:20.220

您定义规则的方式增加了复杂性。

```
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .* - [L] 
```

以上规则表示*文件名是否是文件进程的目录。之后不要再处理了*。

```
RewriteRule ^(.*)$ http://www.website.com/profile.php?u=$1 [NC] 
```

此规则意味着*将任何请求 uri 映射到`profile.php?u=`*

现在，当您请求`/`它时，`www.website.com`它会检查第一条规则并且它无法匹配。然后它检查第二条规则并将其映射到`profile.php?u=`.

1.  解决它的一种方法是检查 *if 是否`$_GET['u']`为空或`/`in `profile.php`。如果是则加载`index.php`.
2.  另一种方法是为您的用户名找到适当的正则表达式，一旦找到，请在此处使用它。

    ```
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f 
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(USERNAME_REGEX)$ http://www.website.com/profile.php?u=$1 [NC,L] 
    ```

处理这个问题的最好方法是使用 PHP，

```
 RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php?uri=$1 [L] 
```

现在`index.php`会得到你通过的每一个uri。现在您可以处理`index.php`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T03:23:02.920

这可能是由于您的服务器设置。试试`DirectoryIndex index.php`（见[http://davidwalsh.name/directory-index-homepage-htaccess](http://davidwalsh.name/directory-index-homepage-htaccess)）

**编辑**（由于我一开始没有正确阅读问题）

你试过没有 RewriteRule .* - [L] 行吗？

# iphone - 以下两行Objective C代码有什么区别？

> ID：13784294
> 
> 赞同：0
> 
> 时间：2012-12-09T03:16:22.080
> 
> 标签：iphone, objective-c, ios, xcode

```
@interface Foo : NSObject

@property (nonatomic, retain) Bar * bar;

@end

@implementation Foo

@synthesize bar = _bar;

- init {
    self = [super init];
    if (self) {

        _bar =  [[Bar alloc] init];

        // Or 

        _bar =  [[[Bar alloc] init] autorelease];

    }
    return self;
}

- (void)dealloc {
    [_bar release];
    [super dealloc];
}

@end 
```

当我运行分析仪时，两者

```
 _bar =  [[Bar alloc] init]; 
```

和

```
 _bar =  [[[Bar alloc] init] autorelease]; 
```

没事。

我应该使用哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T03:21:14.787

你应该使用第一个。它创建一个保留对象，而第二个“自动释放”保留。

重要的考虑因素是将其分配给实例变量 _bar。相反，如果您将其分配给 property `self.bar`，那么`retain`属性声明中的指令将导致对象被保留，因此分配一个自动释放的值是合适的。但是由于您要分配给“裸”实例变量，因此您需要自己处理保留，因此您需要第一种形式。

PS：我有点惊讶分析仪没有抱怨第二个版本。

PPS：应该注意的是，这里的选择*高度*依赖于上下文。但是您包含了足够的上下文（属性定义）来做出选择。如果没有看到属性定义（或其他信息，在非属性的情况下），很难说。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T03:21:22.143

版本不正确，`autorelease`并且在某些情况下可能会导致崩溃——您的第一行导致`_bar`保留计数为`1`，因此会一直存在，直到您不再需要它为止`release`。`-dealloc`

然而，第二行会很快释放对象（特别是在运行循环结束时），因此可能会在您仍然需要它时使其消失。

阅读[Apple 的内存管理指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)了解更多信息。

# ios - 设备上的 WebRequest（AFNetworking）时 TableView 无响应，但在模拟器中正常 + MagicalRecord 问题

> ID：13784298
> 
> 赞同：0
> 
> 时间：2012-12-09T03:17:04.290
> 
> 标签：ios, core-data, magicalrecord

我有一个应用程序，它使用 AFNetworking 从 Web 服务中检索 json（员工工作计划）并将它们显示在表格视图中。

我有我的网络服务类来处理请求，一旦完成，它将这些数据存储到 coredata 中（我这里还有一个问题，我使用了 magicRecord 并且数据不会持久存在，我不明白为什么）然后回调它的委托（我的 tableViewController）告诉它它已经完成，所以这可以将工作计划加载到单元格中。

网络服务客户端.m

```
NSURL *url = [NSURL URLWithString:stringUrl];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request 
    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) 
    {
        NSArray *workSchedules = [[[NSSet alloc] initWithArray:JSON] allObjects];
        NSManagedObjectContext *context = [NSManagedObjectContext MR_contextForCurrentThread];
        Workschedule *workscheduleEntity = nil;
        NSError *error = nil;
        for (NSDictionary *web_workschedule in workSchedules) 
        {//Inside this method I create other entities that will hydrate my workschedule entity, and it is done using the MR_CreateInContext
          workscheduleEntity = [Workschedule workScheduleFromJSONDictionary:web_workschedule  withError:&error];
          [context MR_save];
        }
        if([self.delegate respondsToSelector:@selector(workSchedules)]){
           [self.delegate workSchedules];
        }
    } 
    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        LOG_ERROR(2,@"Received an HTTTP %d:", response.statusCode);
        LOG_ERROR(2,@"The error was: %@", error);
        if([self.delegate respondsToSelector:@selector(workSchedules:)]){
        [self.delegate workSchedules:nil];//return error
    }}];
NSOperationQueue *operationQueue = [[NSOperationQueue alloc] init];
[operationQueue addOperation:operation]; 
} 
```

PendingWorkscheduleViewController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.webServiceClient getMockedWorkSchedulesForEmployee:[NSNumber numberWithInt:1]];
    [self workSchedules];
}

-(void)workSchedules
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"pending == YES"];
    NSArray *pendingWorkSchedules = [Workschedule MR_findAllWithPredicate:predicate];
    self.pendingWorkSchedules = pendingWorkSchedules;
    [self.tableView reloadData]; 
} 
```

我的问题是，当我在处理请求时运行此程序时，UI 没有响应（这是一个非常短暂的时间，但如果请求增加......）所以如果我加载表格视图并立即尝试滚动或单击后退按钮，它只是忽略它，因为它是“冻结”的。这种行为在我的 iphone 4s 上。在模拟器上这**工作**正常，我无法理解为什么会这样。我试图调用“[self.webServiceClient getMockedWorkSchedulesForEmployee:[NSNumber numberWithInt:1]];” 在使用 GCD 的队列中，我尝试使用 performSelectorInBackground: WithObject: etc 但仍然相同（尽管使用最后一种方法似乎更有效，但这是一种印象，仅在模拟器上，设备上没有变化）。

就magicRecord而言，我将提出单独的问题。

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:47:29.750

解决它。问题是成功块在主线程上运行！（我不明白）。我只是在成功块中使用 GCD，并使用后台队列来处理数据，并使用主队列将这些数据存储在核心数据中。

至于神奇的记录问题，我需要保存“nestedContext”。

大家加油。

# linux - 跳过 cron 工作几个小时

> ID：13784304
> 
> 赞同：0
> 
> 时间：2012-12-09T03:19:05.107
> 
> 标签：linux, cron

我想知道是否可以告诉 cron 在几个小时内不执行任何 cron 作业？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:50:47.133

正如 shannonman 所提到的，您可以停止服务并在需要时重新启动它。

### 停止 cron 服务

```
$ sudo /etc/init.d/cron stop 
```

### 启动cron服务

```
$ sudo /etc/init.d/cron start 
```

[参考](http://www.cyberciti.biz/faq/howto-linux-unix-start-restart-cron/)

# mysql - SQL 查询以获取条目数

> ID：13784305
> 
> 赞同：0
> 
> 时间：2012-12-09T03:19:08.847
> 
> 标签：mysql, sql, phpmyadmin

我正在尝试根据指定的参数选择随机数量的条目。

就像如果我有一张桌子

```
T( id, data1, data2 ,no); 
```

现在 no 是一个包含随机数字的字段。

我想获得 T 的一个随机子集，使得 no 的数量处于特定值。

例如，假设我想要总 no=7

```
T(0,a,a,4);
T(1,B,B,4);
T(2,v,v,1);
T(3,d,d,2);
T(4,d,d,3); 
```

查询到查询的输出将是

```
T(0,a,a,4);
T(4,d,d,3); 
```

或者

```
T(1,B,B,4);
T(2,v,v,1);
T(3,d,d,2); 
```

等等

这可能吗？我想不出一个逻辑。我能想到的最好的方法是一次检索一行并继续计数，但这是低效的。

（注意：如果计数超过 no 这是可以接受的，但反之则不行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T17:56:14.363

这会让你非常接近。

```
create table t ( name varchar(1), num tinyint ) ;

insert into t (name, num) values ( 'a', 4 ), ('b', 2), ('c', 3),
    ('d',1), ('e', 4), ('f', 1),('g', 6); 
```

这是查询：

```
select * from 
  (select name, num, @cum := @cum + num as cumulate from 
    (select * from t order by rand()) as t3, 
  (select @cum := 0 ) as t1 
  ) as t2
where cumulate <= 7; 
```

这是一个[小提琴](http://sqlfiddle.com/#!2/a44dab/8)。我**确定**它可以优化，但我很想知道如何创建它。

# php - Pods fetchRecord 跳过项目

> ID：13784308
> 
> 赞同：2
> 
> 时间：2012-12-09T03:19:44.643
> 
> 标签：php, wordpress, podscms

所以我正在使用 Pods 抓取一些记录。
我有 31 条记录，但我的`while($thePod->fetchRecord())`循环只进行了 15 次

```
$thePod = new Pod('projects');
$thePod->findRecords('slider_order ASC');
$totalItems = $thePod->getTotalRows(); // = 31

while($thePod->fetchRecord()) :
  $i++;

endwhile;

echo $i.'/'.$totalItems.' looped through'; // displays 15/31 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:04:56.670

将第 2 行更改为：

```
$thePod->findRecords('slider_order ASC',-1); 
```

15 是每页的默认记录，-1 返回所有记录。

# javascript - visitFunction 错误是什么意思？

> ID：13784309
> 
> 赞同：4
> 
> 时间：2012-12-09T03:19:48.920
> 
> 标签：javascript, node.js, express, pug

运行 Node.js@0.8.15 + Express@3.0.4 + Jade@0.27.7 + Stylus@0.31.0。由于某种原因出现以下错误。有人知道这是什么意思吗？

我不认为我在做任何奇怪的事情。这发生在我正在做的时候：`res.render(view, response);`

```
Property 'visitFunction' of object #<Object> is not a function
    at Object.Compiler.visitNode (/app/node_modules/jade/lib/compiler.js:176:32)
    at Object.Compiler.visit (/app/node_modules/jade/lib/compiler.js:161:10)
    at Object.Compiler.visitBlock (/app/node_modules/jade/lib/compiler.js:253:12)
    at Object.Compiler.visitNode (/app/node_modules/jade/lib/compiler.js:176:32)
    at Object.Compiler.visit (/app/node_modules/jade/lib/compiler.js:161:10)
    at Object.Compiler.compile (/app/node_modules/jade/lib/compiler.js:78:10)
    at parse (/app/node_modules/jade/lib/jade.js:101:23)
    at Object.exports.compile (/app/node_modules/jade/lib/jade.js:163:9)
    at Object.exports.render (/app/node_modules/jade/lib/jade.js:215:17)
    at View.exports.renderFile [as engine] (/app/node_modules/jade/lib/jade.js:243:13) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T11:40:41.330

您可能会收到该错误的原因之一是您添加了新属性（通常是方法）到`Object.prototype`

例子：

```
Object.prototype.someNewMethod = function (value1, value2) {
    // ... perform some operations
    return this;
}; 
```

`Object`不建议使用这种添加新属性的方式，如问题[#1033](https://github.com/visionmedia/express/issues/1033)中针对 express 项目所述。[Object.defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)应该与`enumerable`set to一起使用`false`。

扩展`Object`示例`Object.defineProperty`

```
Object.defineProperty(
    Object.prototype, 
    'someNewMethod',
    {
        writable : false,
        // Will not show up in enumerable properties (including for-in loop).
        enumerable : false, 
        configurable : false,
        value : function (value1, value2) {
            // ... perform some operations
            return this;
        }
    }
); 
```

我遇到了完全相同的问题，使用`Object.defineProperty`with`enumerable:false`定义新属性解决了这个问题。

我希望这会有所帮助。

# c# - 处理 WebBrowser 控件中的后退导航，保留先前的滚动位置

> ID：13784314
> 
> 赞同：2
> 
> 时间：2012-12-09T03:20:41.790
> 
> 标签：c#, javascript, windows-phone-7, navigation, webbrowser-control

我知道有很多问题询问如何在 WP7 中处理控件中的`back`导航。`WebBrowser`还有很多答案，为了达到同样的效果，使用堆栈`InvokeScript`等，我目前正在使用这种方法，它工作正常（JavaScript）：

```
 private void BackButton_Click(object sender, EventArgs e)
 {
     try
     {
        webBrowser.InvokeScript("eval", "history.go(-1)");
     }
     catch (Exception)
     {

     }
 } 
```

但是，当用户向下滚动到`section 'n'`网页时，从那里的链接将他带到新页面，然后`back`按下按钮，页面成功导航回上一页，但位于页面顶部, 即`section '1'`.

但是，我想保留用户在上一页中的滚动位置，并将他送回上一页并在链接带他的位置向下，这样他就不必再次向下滚动，即, 如果一个链接`section 'n'`将他带到`page2`from `page1`，点击返回后，它应该将他带回并向`page1`下滚动直到`section 'n'`。

谢谢。

（我使用的后退按钮是 ApplicationBar 上的按钮，而不是手机的按钮。）

注意：这是 Windows Phone 的 Internet Explorer 浏览器中后退按钮的工作方式，保留滚动位置。

# php - 使用来自 PHP 的 Wordpress XML-RPC wp.uploadFile 和 wp.newPost

> ID：13784322
> 
> 赞同：3
> 
> 时间：2012-12-09T03:22:53.830
> 
> 标签：php, wordpress, xml-rpc

我正在使用 Wordpress XML-RPC 自动发布到我的博客，并且我使用 PHP 获得了这两个函数：wp.newPost 和 wp.uploadFile。

但是，当我在一个 php 脚本中运行它们时，如下所示：（仅包括重要部分）当我尝试发布时，Wordpress 没有从 wp.uploadFile 检测到 attachment_id，即使 attachment_id 存在。

```
//wp.newPost content
$content = array(
'post_title' => $title,
'post_content' => $body,
'post_status' => 'publish', 
'post_type' => 'products',
'post_thumbnail' = // wp.uploadFile is called here that returns attachement id
);

$this->Curl->post($url,$content); 
```

当我尝试运行上面的代码时，我得到：“faultCode 404 faultString Invalid attachment ID。”

我确认 wp.uploadFile 图像已成功上传并显示在 Wordpress 库中。事实上，如果我再次运行该脚本并将“post_thumbnail”值替换为 wp.uploadFile 返回的完全相同的 attachement_id，它就可以工作！

因此，如果我如上图所示同时运行这两个函数，Wordpress 显然不会检测到图像已上传。有什么解决办法吗？我真的很讨厌将 Wordpress 附件 ID 存储在我自己的数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:16:26.437

通过 xmlrpc 发布我正在使用 IXR

```
require_once("IXR_Library.php.inc"); 
```

以下是我正在使用的；它肯定需要一些编辑，但可能会给你一些线索

上传新文件：

```
$file_upload_path = get_post_meta ( $image->ID,'_wp_attached_file', false);
$file_path = $_SERVER['DOCUMENT_ROOT']."/dev/0.2/wp-content/uploads/".$file_upload_path[0];
$path_parts = pathinfo($file_path);
$file_name = $path_parts['filename'].'.'.$path_parts['extension'];
$data = array(
  'name'  => $file_name ,
  'type'  => $image->post_mime_type ,
  'bits'  => new IXR_Base64( file_get_contents( $file_path ) ) ,
  'overwrite' => true
);
$status = $rpc->query(
    'wp.uploadFile', 
    '1',
    $username,
    $password,
    $data
);
$image_returnInfo = $rpc->getResponse(); 
```

创建一个新帖子：

```
$data = array(
    'post_title' => $post->post_title,
    'post_content' => $post->post_content . $attachement_string_hack,
    'post_type' => 'product',
    'post_status' => 'publish',
    'dateCreated' => (new IXR_Date(time())),
    'post_thumbnail' => $image_returnInfo['id']
);
$rpc = new IXR_Client( $rpc_url );
$res = $rpc->query('wp.newPost', '', $username, $password, $data, 0); 
```

希望这可以帮助！（我现在坚持将图片附加到帖子中）

# android - 在性能方面哪个更好：远程 MySQL DB，在使用 android 时以 xml、json 的形式存储数据

> ID：13784324
> 
> 赞同：-1
> 
> 时间：2012-12-09T03:23:11.673
> 
> 标签：android, mysql, xml, json, performance

我刚刚在android中启动了我的应用程序。我希望我的应用程序不应该消耗太多的设备CPU。我有 3 种数据访问选择。1\. 远程服务器上的 MySQL 数据库。2\. 数据以 xml 形式存储在远程服务器 3 上。数据以 json 形式存储在远程服务器上。

数据库中的数据约为 2000-3000 行。我应该使用哪种方法来提高我的应用程序的性能。

任何帮助都将是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:39:55.747

您的数据如何存储在远程服务器上对 android 应用程序来说并不重要。真正的问题是它是如何传输的，以及您如何在本地处理和存储它。

有了这么多数据，最好的办法是使用流式传输数据并解析流。对于 XML，这意味着使用 SAX 解析器，对于 JSON，可能是流式处理[Jackson](http://jackson.codehaus.org/)。JSON 使用较少的带宽，而 Jackson 无疑是处理格式化数据的最快方式。

流式处理具有明显的优势，您不需要将所有这些数据保存在内存中以解析为 DOM，但它是以更高的开发工作量为代价的。

在本地，存储这么多数据的最佳方式是使用 sqlite 数据库，您可以轻松地对其进行查询。

# c# - 数组中的任务——只有最后一个运行

> ID：13784326
> 
> 赞同：13
> 
> 时间：2012-12-09T03:23:53.983
> 
> 标签：c#

我正在试验任务。为什么这个输出 10 而不是循环的每个值？

```
public static void StartTasks()
{
    Task[] tasks = new Task[10];
    for (int i = 0; i < 10; i++)
        tasks[i] = new Task(() => Console.WriteLine(i));

    foreach (Task task in tasks)
    {
        task.Start();                       
    }       
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-09T03:34:31.127

C# lambda 捕获对变量的引用，而不是变量的值。

如果要捕获该值，则需要首先在循环内对其进行复制，这会导致捕获获取对本地范围不变变量的引用。

```
public static void StartTasks()
{
    Task[] tasks = new Task[10];
    for (int i = 0; i < 10; i++) {
        int j = i;
        tasks[i] = new Task(() => Console.WriteLine(j));
    }

    foreach (Task task in tasks)
    {
        task.Start();                       
    }       
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-23T23:23:29.583

除了接受的答案之外，您还可以将参数传递给任务。例如，

```
 using System;
    using System.Threading.Tasks;

    static void StartTasks(int instances)
    {
        var tasks = new Task[instances];
        for (int i = 0; i < instances; i++)
        {
            tasks[i] = new Task((object param) =>
            {
                var t = (int)param;
                Console.Write("({0})", t);
            }, i);
        }

        Parallel.ForEach<Task>(tasks, (t) => { t.Start(); }); 
        Task.WaitAll(tasks);
    } 
```

# html - 对齐一个 div 的多个嵌套 div。（中央）

> ID：13784327
> 
> 赞同：2
> 
> 时间：2012-12-09T03:23:56.087
> 
> 标签：html, css, css-float

容器内的多个嵌套 div，内容（嵌套 div）在其父级中未居中对齐。

```
<div id="parent">
  <span id="menu_0" class="d"></span>
  <span id="menu_1" class="d"></span>
  <span id="menu_2" class="d"></span>
</div>

#parent
{
    float: left;
    height:18px;
    width:980px;
    margin-top:55px;
    text-align:center;
    border: solid red 1px;
}
.d 
{
    background:url(../images/d.png) 0px 0px no-repeat;
    height:18px;
    width:28px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T03:27:35.150

容器居中对齐，但不是其中的内容。您必须使用对齐容器内的每个 div

```
.d {
   margin: 0 auto;
} 
```

小提琴示例：http: [//jsfiddle.net/TtvNc/3/](http://jsfiddle.net/TtvNc/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:51:18.073

A`<span>`不是块级项目。您不能对其应用宽度和高度样式。你需要一些内容在你的范围内，否则什么都不会显示。

# php - 如何使用 DOM xpath 从 php 中的变量中获取 href？

> ID：13784329
> 
> 赞同：0
> 
> 时间：2012-12-09T03:24:07.133
> 
> 标签：php, xpath, simplexml

感谢您的帮助！

我试图弄清楚如何从包含单个标签的 php 变量中提取 href 属性......就像这样

```
$var = "<a class='coupon_link' href='http://www.anrdoezrs.net/r365wktqks7EDD8BDB799AACCEE' target='_blank' onmouseover='window.status=' http:='' www.myjewelrybox.com';return='' true;'='' onmouseout='window.status=' ';return=''><img src='http://www.lduhtrp.net/fl115vvzntrCJIIDGIGCEEFFHHJJ' alt='' border='0'></a>"; 
```

我听说你可以用 xpath 以某种方式做到这一点，但我的尝试没有成功：-/

这是我正在尝试的：

```
 $xml  = simplexml_load_string($var);
  $myhref = $xml->xpath("//a[contains(@href,'foo')]");

  echo $myhref; 
```

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:48:10.407

在@Charles 评论之后，我建议在解析随机 HTML 时使用[DOMXPath](http://php.net/manual/en/class.domxpath.php)

```
$var = "<a class='coupon_link' href='http://www.anrdoezrs.net/r365wktqks7EDD8BDB799AACCEE/foo' target='_blank' onmouseover='window.status=' http:='' www.myjewelrybox.com';return='' true;'='' onmouseout='window.status=' ';return=''><img src='http://www.lduhtrp.net/fl115vvzntrCJIIDGIGCEEFFHHJJ' alt='' border='0'></a>";

$xml = new DOMDocument(); 
@$xml->loadHTML($var);
$oXpath = new DOMXPath($xml);
$inputs = $oXpath->query("//a[contains(@href,'foo')]");
var_dump($inputs); 
```

# erlang - 使用 xmerl 编译 w3c 模式时出错

> ID：13784332
> 
> 赞同：2
> 
> 时间：2012-12-09T03:25:07.787
> 
> 标签：erlang, dtd

我试图让 XForms 在我的 Ubuntu 桌面上运行。目前 XForms 上似乎没有太多活动，我正试图让 Backplanejs 运行。它不起作用，在检查 javascript 后，我​​发现它依赖于 Microsoft 库和 activex。

我决定继续我的 erlang 教育，而不是学习 javascript，而是在 xmerl 上苦苦挣扎。我为带有索引文件的模式创建了一个目录。这个目录的内容是：

```
tony@blessing:~/workspace/myXformProject$ ls schemas
SchemaList.txt   XForms-Schema.xsd  xhtml-lat1.ent     xml-events.xsd
SchemaList.txt~  xhtml1-strict.dtd  xhtml-special.ent 
```

这些模式已从 w3c 下载。然而，这些模式不会编译产生错误 wfc_PEs_In_Internal_Subset。我本来希望这些完善的 w3c 模式可以用 xmerl 编译。

我究竟做错了什么？

托尼·华莱士

```
6> B.
[{"http://www.w3.org/1999/xhtml",
  "schemas/xhtml1-strict.dtd"},
 {"http://www.w3.org/2001/xml-events",
  "schemas/xml-events.xsd"},
 {"http://www.w3.org/2002/xforms",
 "schemas/XForms-Schema.xsd"}]

9> {ok,S1} = xmerl_xsd:process_schemas(B).          
3450- fatal: {error,{wfc_PEs_In_Internal_Subset}}
** exception exit: {fatal,{{error,{wfc_PEs_In_Internal_Subset}},
                       {file,"schemas/xhtml1-strict.dtd"},
                       {line,628},
                       {col,89}}}
 in function  xmerl_scan:fatal/2
 in call from xmerl_scan:scan_entity/2
 in call from xmerl_scan:scan_markup_decl/2
 in call from xmerl_scan:scan_ext_subset/2
 in call from xmerl_scan:scan_document/2
 in call from xmerl_scan:file/2
 in call from xmerl_xsd:process_schemas/2 
```

3450 指的是 xmerl_scan 中的代码行：

```
scan_entity_value("%" ++ _T,S=#xmerl_scanner{environment=prolog},_,_,_,_,_) ->
    ?fatal({error,{wfc_PEs_In_Internal_Subset}},S); 
```

并且该错误似乎与 xhtml1-strict.dtd 的第 628 行有关。第 89 列似乎很可疑，因为第 628 行不是那么宽：

```
621 <!--
622   param is used to supply a named property value.
623   In XML it would seem natural to follow RDF and support an
624   abbreviated syntax where the param elements are replaced
625   by attribute value pairs on the object start tag.
626 -->
627 <!ELEMENT param EMPTY>
628 <!ATTLIST param
629   id          ID             #IMPLIED
630   name        CDATA          #IMPLIED
631   value       CDATA          #IMPLIED
632   valuetype   (data|ref|object) "data"
633   type        %ContentType;  #IMPLIED
634   >
635 
```

如果你把这篇文章写得这么远，非常感谢！托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:25:46.017

您似乎在一组架构文档上调用 xmerl_xsd:process_schemas，其中一些是 XSD 架构文档，其中一个根本不是 XSD 架构文档，而是文档类型定义文件 (xhtml1-strict.dtd)。process_schemas 函数需要 XSD 模式文档，它们是 XML 文档实例，但 DTD 文件不是 XML 文档实例。如果你想做你想做的事，你需要为 XHTML 获取一个 XSD 模式，而不是 DTD。不幸的是，XHTML WG 的 XSD 模式文档并不是世界上最容易使用的东西。祝你好运。

如果您想使用 XForms，您可能会发现让 XSLTForms 或 Orbeon 或 BetterForms 或 EMC Formula 工作比让 backplane.js 工作更容易。

# java - JavaFX 中的 Platform.runLater 和 Task

> ID：13784333
> 
> 赞同：94
> 
> 时间：2012-12-09T03:25:20.173
> 
> 标签：java, multithreading, user-interface, task, javafx

我一直在对此进行一些研究，但至少可以说我仍然很困惑。

谁能给我一个具体的例子来说明何时使用`Task`和何时使用`Platform.runLater(Runnable);`？究竟有什么区别？何时使用其中任何一个有黄金法则吗？

如果我错了，也请纠正我，但这两个“对象”不是在 GUI 的主线程内创建另一个线程（用于更新 GUI）的一种方式吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-12-09T23:15:13.823

用于`Platform.runLater(...)`快速简单的操作和`Task`复杂的大型操作。

*   [用例`Platform.runLater(...)`](https://stackoverflow.com/questions/13351959/javafx-how-to-set-default-active-control/13352107#13352107)
*   [用例`Task`：Ensemble App 中的任务示例](http://download.oracle.com/otndocs/products/javafx/2/samples/Ensemble/index.html#SAMPLES/Concurrency/Task)

示例：为什么我们不能`Platform.runLater(...)`用于长计算（取自以下参考）。

问题：后台线程仅从 0 计数到 100 万，并在 UI 中更新进度条。

***代码使用`Platform.runLater(...)`：***

```
final ProgressBar bar = new ProgressBar();
new Thread(new Runnable() {
    @Override public void run() {
    for (int i = 1; i <= 1000000; i++) {
        final int counter = i;
        Platform.runLater(new Runnable() {
            @Override public void run() {
                bar.setProgress(counter / 1000000.0);
            }
        });
    }
}).start(); 
```

> 这是一段可怕的代码，是对自然的犯罪（和一般的编程）。首先，只看这种 Runnables 的双重嵌套，你就会失去脑细胞。其次，它会用很少的 Runnables 淹没事件队列——实际上有一百万个。显然，我们需要一些 API 来更轻松地编写后台工作人员，然后再与 UI 进行通信。

***使用任务的代码：***

```
Task task = new Task<Void>() {
    @Override public Void call() {
        static final int max = 1000000;
        for (int i = 1; i <= max; i++) {
            updateProgress(i, max);
        }
        return null;
    }
};

ProgressBar bar = new ProgressBar();
bar.progressProperty().bind(task.progressProperty());
new Thread(task).start(); 
```

> 它没有以前代码中表现出的任何缺陷

**参考：** [JavaFX 2.0 中的工作线程](http://fxexperience.com/2011/07/worker-threading-in-javafx-2-0/)

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-12-09T08:42:45.087

*   `Platform.runLater`：如果您需要从非 GUI 线程更新 GUI 组件，您可以使用它将更新放入队列中，它将尽快由 GUI 线程处理。
*   `Task`实现`Worker`当您需要在 GUI 线程之外运行长任务（以避免冻结您的应用程序）但仍需要在某个阶段与 GUI 交互时使用的接口。

如果你熟悉 Swing，前者相当于.`SwingUtilities.invokeLater`的概念，后者相当于`SwingWorker`.

Task的[javadoc](https://docs.oracle.com/javase/8/javafx/api/javafx/concurrent/Task.html)提供了许多示例，应该阐明如何使用它们。也可以参考[并发教程](http://docs.oracle.com/javase/8/javafx/interoperability-tutorial/concurrency.htm#JFXIP546)。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-10-17T10:51:36.900

现在可以更改为 lambda 版本

```
@Override
public void actionPerformed(ActionEvent e) {
    Platform.runLater(() -> {
        try {
            //an event with a button maybe
            System.out.println("button is clicked");
        } catch (IOException | COSVisitorException ex) {
            Exceptions.printStackTrace(ex);
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-17T09:39:26.210

使用显式 Platform.runLater() 的一个原因可能是您将 ui 中的属性绑定到服务（结果）属性。因此，如果您更新绑定的服务属性，则必须通过 runLater() 执行此操作：

在 UI 线程中也称为 JavaFX 应用程序线程：

```
...    
listView.itemsProperty().bind(myListService.resultProperty());
... 
```

在服务实现中（后台工作者）：

```
...
Platform.runLater(() -> result.add("Element " + finalI));
... 
```

# html - 如何在 HTML 表单中进行多项操作

> ID：13784336
> 
> 赞同：2
> 
> 时间：2012-12-09T03:26:10.573
> 
> 标签：html, forms, action

假设我想以 HTML 形式进行双重操作。

1.  第一个动作是examle1.php
2.  第二个动作是 example2.php

我有这样的代码

```
<form name="input" action="" method="post">
Username: <input type="text" name="user">
<input type="submit" value="Submit">
</form> 
```

那么，如何将上面的 2 个动作插入到`action=""`? 有可能这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T03:46:19.633

**没有**。您只能拥有一个声明`action`的属性`<form>`

但是，您可以尝试：

*   *为您的第一个操作*执行 AJAX POST并在其成功处理程序上提交实际表单

*   *为您的第一个操作*编写服务器端脚本，以便在完成后重定向到您的*第二个操作*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:50:08.850

在一个表单中，您只能给出一个 action="action.php"。但是告诉我们你为什么想要有两个动作？

# c++ - 退出整个递归栈

> ID：13784337
> 
> 赞同：10
> 
> 时间：2012-12-09T03:27:00.353
> 
> 标签：c++, recursion

我正在从 main() 调用一个函数 fooA，该函数调用另一个递归函数 fooB。当我想返回时，我继续使用 exit(1) 来停止执行。当递归树很深时，正确的退出方式是什么？

通过递归堆栈返回可能没有帮助，因为返回通常会清除我构建的部分解决方案，而我不想这样做。我想从 main() 执行更多代码。

我读过Exceptions can be used，如果我能得到一个代码片段就好了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-09T04:49:37.307

这`goto`语句不能从一个函数跳回另一个函数；Nikos C. 是正确的，它不会考虑释放你所做的每个调用的堆栈帧，所以当你到达你去的函数时，堆栈指针将指向堆栈帧你刚才的功能......不，那是行不通的。同样，您不能简单地调用（直接或间接通过函数指针）您想要在算法完成时结束的函数。在深入研究递归算法之前，您永远不会回到您所处的环境。您可以通过这种方式构建系统，但本质上，每次这样做都会“泄漏”当前堆栈中的内容（与泄漏堆内存不太一样，但效果相似）。

不，您需要以某种方式返回到调用上下文。在 C++ 中只有三种方法可以做到这一点：

1.  依次退出每个函数，通过调用链以有序的方式从它返回给它的调用者。
2.  抛出一个异常并在你启动递归算法后立即捕获它（它会以有序的方式自动销毁堆栈上每个函数创建的任何对象）。
3.  使用 setjmp() 和 longjmp() 来做类似抛出&捕获异常的事情，但是“抛出”一个 longjmp() 不会破坏堆栈上的对象；如果任何此类对象拥有堆分配，则这些分配将被泄露。

要执行选项 1，您必须编写递归函数，以便一旦达到解决方案，它会向其调用者返回某种指示它已完成（可能是相同的函数），并且其调用者会看到该事实并转发通过返回给它的调用者（可能是同一个函数），依此类推，直到最终释放递归算法的所有堆栈帧，然后您返回到调用递归算法中第一个函数的任何函数。

要执行选项 2，您将对递归算法的调用包装在 a 中`try{...}`，然后在它之后立即出现`catch(){...}`预期的抛出对象（这可能是计算的结果，或者只是一些让调用者知道“嘿，我是完成，您知道在哪里可以找到结果”）。例子：

```
try
{
    callMyRecursiveFunction(someArg);
}
catch( whateverTypeYouWantToThrow& result )
{
    ...do whatever you want to do with the result,
    including copy it to somewhere else...
} 
```

...在您的递归函数中，当您完成结果时，您只需：

```
throw(whateverTypeYouWantToThrow(anyArgsItsConstructorNeeds)); 
```

要执行选项 3...

```
#include <setjmp.h>
static jmp_buf jmp; // could be allocated other ways; the longjmp() user just needs to have access to it.
    .
    .
    .
if (!setjmp(jmp)) // setjmp() returns zero 1st time, or whatever int value you send back to it with longjmp()
{
    callMyRecursiveFunction(someArg);
} 
```

...在您的递归函数中，当您完成结果时，您只需：

```
longjmp(jmp, 1); // this passes 1 back to the setjmp().  If your result is an int, you
                 // could pass that back to setjmp(), but you can't pass zero back. 
```

使用 setjmp()/longjmp() 的坏处在于，如果在调用 longjmp() 时堆栈上仍有任何堆栈分配的对象仍然“活动”，则执行将跳回 setjmp() 点，跳过析构函数对于那些对象。如果您的算法仅使用 POD 类型，那不是问题。如果您的算法使用的非 POD 类型不包含任何堆分配（例如来自`malloc()`或`new`）。如果您的算法使用包含堆分配的非 POD 类型，那么您只有使用上面的选项 1 和 2 才是安全的。但是，如果您的算法符合 setjmp()/longjmp() 的标准，并且如果您的算法在完成时被大量递归调用所掩盖，那么 setjmp()/longjmp() 可能是最快的返回方式到初始调用上下文。如果这不起作用，就速度而言，选项 1 可能是您最好的选择。选项 2 可能看起来很方便（并且可能会在每次递归调用开始时消除条件检查），但与系统自动展开调用堆栈相关的开销有些显着。

通常说您应该为“异常事件”（预计非常罕见的事件）保留异常，而与展开调用堆栈相关的开销就是原因。较旧的编译器使用类似于 setjmp()/longjmp() 的东西来实现异常（setjmp() 在`try`&的位置`catch`，longjmp() 在 a 的位置`throw`），但当然有额外的开销与确定什么对象相关堆栈上需要销毁，即使没有这样的对象。另外，每次遇到 a时`try`，它都必须保存上下文*以防万一*`throw`，如果异常是真正的异常事件，那么保存该上下文所花费的时间就被浪费了。较新的编译器现在更有可能使用所谓的“零成本异常”（也称为基于表的异常），这似乎可以解决世界上所有的问题，但它并没有......它使正常运行时更快，因为不再需要在每次运行时保存上下文 a `try`，但如果 a`throw`执行，现在与解码存储在大量表中的信息相关的*开销*更大，运行时必须处理这些表才能弄清楚如何根据堆栈所在的位置展开堆栈`throw`遇到和运行时堆栈的内容。所以例外不是免费的，尽管它们非常方便。你会在互联网上找到很多东西，人们声称它们的价格是多么的不合理，它们会减慢你的代码速度，你还会发现很多人驳斥这些说法，双方都提出了艰难的看法数据来支持他们的主张。您应该从参数中得到的好处是，如果您希望它们很少发生，那么使用异常是很好的，因为它们会产生更清晰的接口和逻辑，而无需在每次进行函数调用时对“坏”进行大量条件检查。但是您不应该使用异常作为调用者与其被调用者之间正常通信的手段，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-09T22:06:12.027

这在我找到从根到二叉树节点的路径时发生在我身上。我正在使用堆栈来按顺序存储节点，并且递归不会停止，直到最后一个节点返回 NULL。我使用了一个全局变量，整数 i=1，当我到达我正在寻找的节点时，我将该变量设置为 0 并使用 while(i==0) 返回堆栈；允许程序在不弹出我的节点的情况下备份内存堆栈。

# python - 如何在本地运行 Postgres

> ID：13784340
> 
> 赞同：5
> 
> 时间：2012-12-09T03:27:38.077
> 
> 标签：python, postgresql, heroku, flask

我阅读了 Flask 的 Postgres 文档

他们说要运行 Postgres 你应该有以下代码

```
app = Flask(__name__) 
app.config['SQLALCHEMY_DATABASE_URI'] = postgresql://localhost/[YOUR_DB_NAME]' 
db = SQLAlchemy(app) 
```

我怎么知道我的数据库名称？

我写了 db 作为名字 - 但我得到了一个错误

```
sqlalchemy.exc.OperationalError: (OperationalError) FATAL:  database "[db]" 
does not exist 
```

如果有帮助的话，用 Flask 运行 Heroku

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-09T11:01:05.337

第一步，是让 Flask + Postgresql 在本地运行，而第一步是在你*的*[机器上安装 postgresql](http://wiki.postgresql.org/wiki/Detailed_installation_guides)。接下来，您应该[为 postgresql 安装 python 驱动程序](http://www.initd.org/psycopg/)。

对于 Windows，您可以[为 postgresql 使用 windows 安装](http://www.enterprisedb.com/products-services-training/products/postgresql-overview)程序[，为 python 驱动程序](http://www.lfd.uci.edu/~gohlke/pythonlibs/)使用 windows 安装程序。

完成上述两个步骤后，您需要[创建一个数据库](http://www.cyberciti.biz/faq/howto-add-postgresql-user-account/)。

对于 Windows，您可以使用捆绑的 pgadminIII 工具。这是一个[视频](http://www.youtube.com/watch?v=1wvDVBjNDys)，展示了如何做到这一点。

例如，这里是您如何创建一个名为 的数据库`the_database`，并使用内置工具创建一个名为的用户`databaseuser`并使用密码：`P@ssw0rd``psql`

```
$ psql -d template1 -U postgres
template1=# CREATE USER databaseuser WITH PASSWORD 'P@ssw0rd';
template1=# CREATE DATABASE the_database;
template1=# GRANT ALL PRIVILEGES ON DATABASE the_database to databaseuser;
template1=# \q 
```

以下是使用上述信息配置应用程序的方法：

```
db_conn = 'postgresql+psycopg2://databaseuser:P@ssw0rd@localhost/the_database' 
app = Flask(__name__) 
app.config['SQLALCHEMY_DATABASE_URI'] = db_conn
db = SQLAlchemy(app) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T07:17:28.640

我没有使用 Heroku 的经验，但是从您的消息中我会说您没有运行 PostgreSQL，而且您根本没有数据库。看起来他们在这里有一些信息[https://postgres.heroku.com/](https://postgres.heroku.com/) :)

但是在您的主题中，您询问 localhost PostgreSQL ......因此，如果您想在本地运行设置，首先要检查的是您是否安装并运行了 PostgreSQL。如果这样做，请尝试使用 pgAdmin 或从控制台连接到它并创建数据库。如果您无法连接 - 检查端口的配置，PostgreSQL 正在侦听主机。

无论如何，我看到你在评论中发布的那些消息，只给我一个想法，即你没有创建甚至运行数据库（或者你有错误的配置）。

# r - 如何从 R/RSweave/LaTeX 上 lm 的 xtable() 输出中删除“标准错误”列

> ID：13784344
> 
> 赞同：6
> 
> 时间：2012-12-09T03:27:49.313
> 
> 标签：r, latex, xtable

我目前正在对人口数据进行一些数据分析，因此在参数系数表中报告标准误差并没有真正的统计意义。我进行了相当多的搜索，但找不到任何方法来自定义 xtable 输出以将其删除。谁能指出我正确的方向？

非常感谢，我没有轻易发布这个；如果这很明显，我为浪费时间而道歉！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T05:02:37.363

所以在我（其他）冗长的回答之后......这也有效：

```
xtable(summary(model1)$coefficients[,c(1,3,4)]) 
```

或更笼统地说：

```
sm <- summary(SomeModel)
SE.indx <- which(colnames(sm$coefficients) == "Std. Error")   # find which column is Std. Error (usually 2nd)
sm$coefficients <- sm$coefficients[, -SE.indx]  # Remove it
xtable(sm$coefficients)   # call xtable on just the coefficients table 
```

### 结果：

```
% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Sun Dec  9 00:01:46 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rrrr}
  \hline
 & Estimate & t value & Pr($>$$|$t$|$) \\ 
  \hline
(Intercept) & 29.80 & 30.70 & 0.00 \\ 
  crim & -0.31 & -6.91 & 0.00 \\ 
  age & -0.09 & -6.50 & 0.00 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T03:55:07.660

使用 help(lm) 中的第一个示例：

```
 xtable(as.matrix(coef(lm.D9)))

% latex table generated in R 2.15.2 by xtable 1.7-0 package
% Sat Dec  8 19:53:09 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rr}
  \hline
 & x \\ 
  \hline
(Intercept) & 5.03 \\ 
  groupTrt & -0.37 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

如果这是对人口的描述而不仅仅是样本，我同意不使用 std erros。但是，根据这种推理，您不希望保留 p 值或 t 统计量。这就是我只包括系数的原因。要仅从汇总系数矩阵中删除标准误差列：

```
xtable( coef(summary(lm.D9))[,-2] )

% latex table generated in R 2.15.2 by xtable 1.7-0 package
% Sat Dec  8 21:02:17 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rrrr}
  \hline
 & Estimate & t value & Pr($>$$|$t$|$) \\ 
  \hline
(Intercept) & 5.03 & 22.85 & 0.00 \\ 
  groupTrt & -0.37 & -1.19 & 0.25 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T03:30:36.540

看着`str(summary(Model1))`我们看到它`$coefficients`具有`Std. Error`我们想要删除的值。

```
lesserSummary <- function(x) {
## returns same as summary(x), but with "Std. Error" remove from coefficients. 
##    and class of object is "modifiedSummary"

  # grab the summary
  sm <- summary(x)

  # find which column is std error
  SE.indx <- which(colnames(sm$coefficients) == "Std. Error")

  # remove it 
  sm$coefficients <- sm$coefficients[, -SE.indx]

  # give it some class
  class(sm) <- "modifiedSummary"

  # return it
  sm
}

xtable.modifiedSummary <- 
function (x, caption = NULL, label = NULL, align = NULL, digits = NULL, display = NULL, ...)  {
# x is a modifiedSummary object
# This function is a modification of xtable:::xtable.summary.lm
# Key Difference is simply the number of columns that x$coef is expected to have
#   (Here 3\.  Originally 4)  

    x <- data.frame(x$coef, check.names = FALSE)
    class(x) <- c("xtable", "data.frame")
    caption(x) <- caption
    label(x) <- label
    align(x) <- switch(1 + is.null(align), align, c("r", "r", "r", "r"))
    digits(x) <- switch(1 + is.null(digits), digits, c(0, 4, 2, 4))
    display(x) <- switch(1 + is.null(display), display, c("s", "f", "f", "f"))
    return(x)
}

xtable_mod <- function(x) {
  # Wrapper function to xtable.modified summary, calling first lesserSummary on x
  xtable(lesserSummary(x))
} 
```

## 例子：

```
xtable_mod(model1)

% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Sat Dec  8 23:44:54 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rrrr}
  \hline
 & Estimate & t value & Pr($>$$|$t$|$) \\ 
  \hline
(Intercept) & 29.8007 & 30.70 & 0.0000 \\ 
  crim & -0.3118 & -6.91 & 0.0000 \\ 
  age & -0.0896 & -6.50 & 0.0000 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

* * *

### 以下是为得出上述结论而采取的步骤。

您可能会修改对 xtable 的调用，但您首先需要稍微了解一下：首先查看 xtable 的源代码：

```
xtable
# function (x, caption = NULL, label = NULL, align = NULL, digits = NULL, 
#     display = NULL, ...) 
# {
#     UseMethod("xtable")
# }
# <environment: namespace:xtable> 
```

我们看到它只是调用了`UseMethod()`. 那么让我们看看哪些方法可用：

```
methods(xtable)
#  [1] xtable.anova*           xtable.aov*             xtable.aovlist*        
#  [4] xtable.coxph*           xtable.data.frame*      xtable.glm*            
#  [7] xtable.lm*              xtable.matrix*          xtable.prcomp*         
# [10] xtable.summary.aov*     xtable.summary.aovlist* xtable.summary.glm*    
# [13] xtable.summary.lm*      xtable.summary.prcomp*  xtable.table*          
# [16] xtable.ts*              xtable.zoo* 
```

有几种。请注意，带有星号的那些`*`是不可见的。

调用的方法由我们调用的对象的类决定`xtable`。

假设我们的输出是`Model1` 我们看看它的类：'

```
class(Model1)
# [1] "lm" 
```

所以我们要查看的来源是`xtable.lm`.

```
xtable.lm
# Error: object 'xtable.lm' not found 
```

错误？没错，它是不可见的。所以我们使用带有三个冒号的包名。*注意：请务必阅读帮助文件中的提示？":::"*

```
xtable:::xtable.lm
# function (x, caption = NULL, label = NULL, align = NULL, digits = NULL, 
# display = NULL, ...) 
# {
#     return(xtable.summary.lm(summary(x), caption = caption, label = label, 
#         align = align, digits = digits, display = display))
# }
# <environment: namespace:xtable> 
```

我们注意到`xtable.lm` 调用`xtable.summary.lm` 并作为它的第一个参数 a 传递`summary(x)`，其中 x 是我们的模型。

所以这导致我们到两个地方进行调查： `summary`和`xtable.summary.lm`

# android - 如何将图标分配给android自定义文件类型？

> ID：13784346
> 
> 赞同：2
> 
> 时间：2012-12-09T03:28:01.010
> 
> 标签：android, icons, customization, file-extension, file-type

在我的应用程序中，我想打开一个自定义文件类型，我已经使用 androidmanifest 文件中的以下代码成功完成了该文件类型。虽然我在意图过滤器中声明了一个图标，但 android 仍然显示默认文件图标以及我的文件类型。如何更改与我的文件类型关联的图标？非常感谢大家！

```
 <intent-filter
            android:icon="@drawable/icon"
            android:label="@string/app_name"
            android:priority="1">
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data android:mimeType="*/*" />
            <data
                android:host="*"
                android:pathPattern=".*\\.zd"
                android:scheme="content" />
            <data
                android:host="*"
                android:pathPattern=".*\\.zd"
                android:scheme="file" />
        </intent-filter>
        <intent-filter
            android:icon="@drawable/icon"
            android:label="@string/app_name"
            android:priority="1" >
            <category android:name="android.intent.category.DEFAULT" >
            </category>

            <action android:name="android.intent.action.VIEW" >
            </action>

            <data
                android:host="*"
                android:pathPattern=".*\\.zd"
                android:scheme="file" >
            </data>
        </intent-filter>
        <intent-filter
            android:icon="@drawable/icon"
            android:label="@string/app_name"
            android:priority="1" >
            <category android:name="android.intent.category.DEFAULT" >
            </category>

            <action android:name="android.intent.action.VIEW" >
            </action>

            <data
                android:host="*"
                android:mimeType="application/my-apps.program" >
            </data>
        </intent-filter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:01:10.557

我认为您不能分配文件类型图标。分配图标是文件浏览器应用程序的特权。

# racket - 如何在 Racket 中使用 apply 到多个关键字 func？

> ID：13784347
> 
> 赞同：2
> 
> 时间：2012-12-09T03:28:17.490
> 
> 标签：racket

我遇到这样一个问题：

我想使用（发送我的列表框集数据）在运行时刷新列表框％的数据。但我不能这样写：

```
 (apply
     send my-list-box set
     (map ....)) 
```

这是无效的。但我知道 max func 可以做到这一点：

```
(apply
  max
  (map ...)) 
```

唯一的区别是“发送我的列表框集”有多个关键字，而不是像 max 这样的单个关键字 func。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T03:51:21.150

用于[`send/apply`](http://docs.racket-lang.org/reference/ivaraccess.html#%28form._%28%28lib._racket/private/class-internal..rkt%29._send/apply%29%29)将多个参数应用于`send`：

```
(send/apply my-list-box set (map ...)) 
```

（`(apply send my-list-box set (map ...))`您试图使用的）仅是无效的，因为`send`它是一种语法（宏），而不是因为前面有多个参数。例如，这有效：

```
(apply + 1 2 3 '(4 5 6)) 
```

# android - 如何在 OnLongClickListener 期间突出显示 textView？

> ID：13784349
> 
> 赞同：0
> 
> 时间：2012-12-09T03:28:44.477
> 
> 标签：android

我确定这在某处得到了回答，但我找不到。

在 OnLongClickListener 期间，我将如何使 textview 逐渐变亮/突出显示？我有以下代码：

```
jObjTv1.setOnLongClickListener(new View.OnLongClickListener() {

                public boolean onLongClick(View v) {
                    Toast.makeText(root,"Test", Toast.LENGTH_SHORT).show();
                    return true;
                }
            }); 
```

长按后只向我显示吐司的效果，但我希望在“点击”时突出显示 textView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:33:54.843

我想您将不得不设置一个可绘制的状态列表作为 TextView 的背景

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

   <item android:state_pressed="true" android:drawable="@drawable/background_transition" />

</selector> 
```

# java - 如何在不触发 insertUpdate() 的情况下将文本插入文档

> ID：13784350
> 
> 赞同：3
> 
> 时间：2012-12-09T03:29:27.097
> 
> 标签：java, swing, jtextpane, documentlistener, documentfilter

我想创建一个 Swing JTextPane，当用户在其中输入文本时它会采取行动。但我也希望能够更改该窗格中的文本，而不会将更改视为用户键入。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:43:25.620

如果您不让更新事件触发，那么您的 UI 很可能也不会更新，具体取决于实际实现。所以我同意你最好通过与事件处理程序交谈，让它知道下一次更改将是程序性更改。像这样的东西：

```
try {
  listener.setProgrammaticChange(true);
  // change document
}
finally {
  listener.setProgrammaticChange(false);
} 
```

# css - Symfony2 和 Assetic - 我的 CSS 中引用的图像不会加载

> ID：13784353
> 
> 赞同：0
> 
> 时间：2012-12-09T03:30:26.287
> 
> 标签：css, symfony, css-sprites, assetic

我有一个我正在尝试使用的 CSS 精灵表，但我的 CSS 文件无法“看到”图像。我已按照[此处](https://stackoverflow.com/a/7065371/399584)提供的答案无济于事。我的包结构是：

```
src/
    vendor/
        project/
            bundle/
                Resources/
                    public/
                        css/
                            normalize.css
                            static.css
                        images/
                            sprites.jpg 
```

我已经完成了：

```
$ app/console assets:install
Installing assets using the hard copy option
Installing assets for Symfony\Bundle\FrameworkBundle into web/bundles/framework
Installing assets for MajorProductions\SewingDiva\SiteBundle into web/bundles/majorproductionssewingdivasite
Installing assets for Sensio\Bundle\DistributionBundle into web/bundles/sensiodistribution 
```

和：

```
$ app/console assetic:dump
Dumping all dev assets.
Debug mode is on.

22:19:13 [file+] /home/kevin/www/diva/app/../web/css/06758be.css
22:19:13 [file+] /home/kevin/www/diva/app/../web/css/06758be_part_1_normalize_1.css
22:19:13 [file+] /home/kevin/www/diva/app/../web/css/06758be_part_1_static_2.css 
```

不知道还能做什么......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T15:27:57.813

通过更改参考来解决它：

```
{% block styles %}
    {% stylesheets '@MajorProductionsSewingDivaSiteBundle/Resources/public/css/*' filter='cssrewrite' %}
        <link rel="stylesheet" type="text/css" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %} 
```

到：

```
{% block styles %}
    {% stylesheets 'bundles/majorproductionssewingdivasite/css/*' filter='cssrewrite' %}
        <link rel="stylesheet" type="text/css" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %} 
```

显然，第一个版本中的自动魔法参考并不是要走的路，尽管它已在 Symfony 官方文档中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T14:24:02.160

@凯文M1

> 显然，第一个版本中的自动魔法参考并不是要走的路，尽管它 > 在官方 Symfony 文档中使用。

它在[这里](http://symfony.com/fr/doc/current/cookbook/assetic/asset_management.html)（法语，但其他语言的等效文档肯定存在）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-09T08:39:15.313

好吧，从[文档中](http://symfony.com/doc/current/cookbook/assetic/asset_management.html)：

> 这是一个关键点：一旦您让 Assetic 处理您的资产，文件就会从不同的位置提供。这可能会导致通过相对路径引用图像的 CSS 文件出现问题。但是，这可以通过使用 cssrewrite 过滤器来解决，该过滤器会更新 CSS 文件中的路径以反映它们的新位置。

所以你需要启用`cssrewrite`过滤器：

```
# app/config/config.yml
assetic:
    filters:
        cssrewrite: ~ 
```

并在你的`stylesheets`块中使用它：

```
{% stylesheets '@AcmeProjectBundle/Resources/css' filter='cssrewrite' %}
    <link href="{{ asset_url }}">
{% endstylesheets %} 
```

# ios - POST 请求返回不需要的缓存结果 (AFNetworking)

> ID：13784356
> 
> 赞同：3
> 
> 时间：2012-12-09T03:30:55.397
> 
> 标签：ios, caching, post, afnetworking

我正在使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)从传递用户用户名和密码的共享“身份验证器”类发出 POST 请求。这是我发出的 POST 请求：

```
 NSURL *url = [NSURL URLWithString:@"https://www..."];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

// params
NSDictionary* dict = @{@"loginName": username,
@"password": password,
@"serviceName": @"...",
@"serviceURL": @"...",
@"action": @"..."};

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
request = [httpClient requestWithMethod:@"POST" path:@"..." parameters:dict];
request.cachePolicy = NSURLRequestReloadIgnoringCacheData;
request.timeoutInterval = 30.0;

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"%@", operation.responseString);
}
                                 failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                     NSLog(@"login failed");
                                 }];

[operation start]; 
```

它在第一次登录时效果很好，一切都按预期返回。当我尝试使用不同的用户名/密码登录时，我看到`operation.responseString`输出与第一次登录完全相同。

有谁知道为什么它会从第一次登录返回输出？我觉得响应是缓存响应，我添加了以下内容以尝试防止缓存信息的返回：

```
request.cachePolicy = NSURLRequestReloadIgnoringCacheData; 
```

我已经设置了断点，以查看`NSDictionary`参数中的用户名和密码是新的用户名/密码组合。

无论如何，字符串文字也不会被操纵，并且在每个 POST 请求中都是相同的。省略号是为了隐私，是具有语义含义的字符串的占位符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T20:34:16.577

试试吧

```
request.cachePolicy = NSURLRequestReloadIgnoringLocalAndRemoteCacheData; 
```

因为`NSURLRequestReloadIgnoringCacheData`only 忽略本地缓存数据而不缓存在网络上。

编辑：正如史蒂夫马德森在下面指出的那样，这不是真正的问题，而且，一般来说，对 POST 请求的响应在任何情况下都不会被缓存。实际的问题是程序没有在两次登录之间错误地注销。但我们最终修复了它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T01:51:01.847

我有同样的问题，最后解决了。使用方法：

```
NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:0
                                                           diskCapacity:0
                                                               diskPath:nil];
[NSURLCache setSharedURLCache:sharedCache]; 
```

来自这篇博文：[缓存如何在 AFNetworking 中工作？: AFImageCache & NSUrlCache 解释](http://blog.originate.com/blog/2014/02/20/afimagecache-vs-nsurlcache/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-29T13:44:13.407

试试看 [请求 setHTTPShouldHandleCookies:NO];

# titanium - BBerry OS 5.x Titanium 支持

> ID：13784362
> 
> 赞同：0
> 
> 时间：2012-12-09T03:31:57.273
> 
> 标签：titanium, appcelerator

我们想使用 Appcelerator Titanium 开发一个 IOS、Android 和 Blackberry OS 5.x 应用程序。我知道支持 IOS 和 Android，但是否也支持 BBerry OS 5.x，因为文档中没有提到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:45:41.870

在过去几年中，Titanium 中出现了各种预览版本，以支持 BlackBerry。除了最新的黑莓 10 之外，它们都已被撤消。您可以在互联网上搜索，也许可以找到其中一个旧版本的旧副本（它只是暂时发布给客户），但它不会被“支持”，正如你的问题所规定的那样。

黑莓 10 是唯一一款预览版。源代码已发布，您可以在他们的博客上阅读：http: [//developer.appcelerator.com/blog/2012/12/announcing-preview-availability-of-the-blackberry-sdk.html](http://developer.appcelerator.com/blog/2012/12/announcing-preview-availability-of-the-blackberry-sdk.html)

# windows-8 - 如何在 Windows 8 中建立 ad-hoc wifi 连接

> ID：13784363
> 
> 赞同：1
> 
> 时间：2012-12-09T03:32:01.123
> 
> 标签：windows-8

我通过在我的笔记本电脑中创建一个 ad-hoc wifi 连接来连接我的所有设备，但 windows 8 似乎没有 ad-hoc 连接的选项。请帮帮我，我已经尝试过似乎不起作用的第 3 方软件“Connectify”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T00:26:49.250

您可以使用内置`netsh`实用程序运行批处理文件来设置 Adhoc ...

要使用 ICS（Internet 连接共享）功能，您需要打开**共享**。

为此，您必须按...

*   `WinKey+R`然后输入`ncpa.cpl`
*   右键单击无线网络适配器（您从中获得互联网的那个）选择`Properties`然后选择`Sharing`顶部的选项卡
*   **`Allow other network users to connect through this computer's Internet connection`检查/**标记**. 从家庭网络连接的菜单中选择您创建的托管虚拟网络（**本地连接 * 12**）。单击**确定**以保存配置。**

 **如果在任何情况下 DHCP 没有运行或工作，您可以在托管虚拟网络适配器（**本地连接 * 12**）上手动设置 IP 地址...

*   IP 地址：192.168.137.2（可能不同）
*   子网掩码：255.255.255.0
*   默认网关：192.168.137.1
*   域名解析：8.8.8.8

下面是批处理文件代码，在记事本中复制粘贴并以.cmd 扩展名保存...

部分源代码：[链接](https://stackoverflow.com/a/12264592/1420274)

```
 @echo off
    CLS

    :checkPrivileges 
    NET FILE 1>NUL 2>NUL
    if '%errorlevel%' == '0' ( goto gotPrivileges ) else ( goto getPrivileges ) 

    :getPrivileges 
    if '%1'=='ELEV' (shift & goto gotPrivileges)  

    setlocal DisableDelayedExpansion
    set "batchPath=%~0"
    setlocal EnableDelayedExpansion
    ECHO Set UAC = CreateObject^("Shell.Application"^) > "%temp%\OEgetPrivileges.vbs" 
    ECHO UAC.ShellExecute "!batchPath!", "ELEV", "", "runas", 1 >> "%temp%\OEgetPrivileges.vbs" 
    "%temp%\OEgetPrivileges.vbs" 
    exit /B

    :gotPrivileges 
    setlocal & pushd .

    REM Run shell as admin (example) - put here code as you like
    ECHO.
    ECHO ============================
    ECHO Setting up Adhoc Network ...
    ECHO ============================
    netsh wlan set hostednetwork mode=allow ssid=LocalAdHoc key=password
    netsh wlan start hostednetwork

    cmd /k 
```

您可以使用以下命令停止网络

```
 netsh wlan stop hostednetwork 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:40:24.713

您必须使用该`netsh`实用程序来执行此操作。这是一个很好且完整的教程来做你想做的事：

> [http://www.addictivetips.com/windows-tips/how-to-create-wireless-ad-hoc-internet-connection-in-windows-8/](http://www.addictivetips.com/windows-tips/how-to-create-wireless-ad-hoc-internet-connection-in-windows-8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T03:28:00.383

Windows 8 adHoc 连接创建器。它是一个免费的 GUI 实用程序，用于在 Windows 8 中创建临时连接。您还可以根据许可条款修改程序。请访问[https://adhoc8.codeplex.com/](https://adhoc8.codeplex.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T06:50:12.590

使用这个简单的工具在 windows 8 中创建 wifi adhoc 网络......

[http://www.softpedia.com/get/Network-Tools/Misc-Networking-Tools/Wi-MAN.shtml](http://www.softpedia.com/get/Network-Tools/Misc-Networking-Tools/Wi-MAN.shtml)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T15:51:36.597

正如先生们所说，您必须使用 netsh 实用程序来执行此操作。但是有一个图形工具可以做到这一点，它模拟“netsh”命令，它是免费的。你可以在这里找到它： [https ://www.facebook.com/AdHocInitializer](https://www.facebook.com/AdHocInitializer)**

# jquery - 有没有办法让这个 jquery 滑块更新 POST 值？

> ID：13784365
> 
> 赞同：0
> 
> 时间：2012-12-09T03:32:26.103
> 
> 标签：jquery, slider

我正在使用滑块将值作为 POST 发送到我的服务器，但是，它们仅在鼠标向上时更新。有没有办法在鼠标按下时重复 POST，因为滑块正在被拖动？

```
function changeBuzz(event, ui) { 
    $('#indicator').text(ui.value); 
    $.post('/buzz', { buzz: ui.value } ); 
}         

$(document).ready(function(){ 
    $('#slider').slider({min: 0, max:8000, change:changeBuzz}); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:46:34.290

要捕获滑动，请使用在滑动期间每次鼠标移动都会触发的内置滑动事件。

```
$('#slider').slider({
  min: 0, 
  max:8000, 
  slide: changeBuzz
}); 
```

如果您还想捕获 mousedown 事件，可以只使用插件外部的标准 jquery 处理程序（下面的未经测试的代码）。但是您必须手动创建函数所需的对象，这实际上只是 UI

```
$('#slider').mouseDown(function(e){
    var event = {}
    var ui = $('#slider') // this might not be correct but you can find out what you need here
    changeBuzz(event,ui)
} 
```

这应该让你至少有一些方法在那里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T03:54:06.567

请检查此事件[#event-slide](http://api.jqueryui.com/slider/#event-slide)

> 在滑动期间每次鼠标移动时触发。事件中作为 ui.value 提供的值表示作为当前移动结果的句柄将具有的值。取消事件将阻止句柄移动，并且句柄将继续具有其先前的值。

但要注意每次鼠标移动时重复的 ajax 请求。确保在移动鼠标或类似的东西时创建一些间隔......并保持`change`事件以保证最终的正确值。

# javascript - 如何将 AJAX 与 Isotope 接受的 JSON 文件一起使用？

> ID：13784366
> 
> 赞同：1
> 
> 时间：2012-12-09T03:32:42.403
> 
> 标签：javascript, jquery, ajax, jquery-mobile, jquery-isotope

基本[小提琴在这里](http://jsfiddle.net/tumby/cH5q6/8/)以获得更多上下文。

该示例仅显示三个元素，但会有很多元素，因此我想使用单独的 JSON 文件并自动填充`<ul>`项目`<li>`。

我使用这段代码在小提琴中创建了 HTML 以及它下面的 JSON。

```
$.getJSON('tdata.json',
    function(data){
      $.each(data.Users, function(i,Users){
      $('#tumblrlist').append("<li class=\"tumblr pbs " + Users.tumblrClass + "\" style=\"width:132px; height: 132px;\" ><div class= \"" + Users.tumblrClass + "\" ><a href=\"/t1.html?t=" + Users.tumblr + "\" rel=\"external\" ><img  src=\"http://api.tumblr.com/v2/blog/" + Users.tumblr + ".tumblr.com/avatar/128/ \" title=\""+ Users.tumblrTitle + "\" alt=\"" + Users.tumblrTitle + "\"></a></div><span class=\"tumblrName\">" + Users.tumblrTitle + "</span></li>");
      });
    }); 
```

外部 JSON 文件如下所示（格式正确，生成 HTML 没有问题）：

```
{"Users":[
        {
            "tumblr":"pbstv",
            "tumblrImage":"pbstv",
            "tumblrTitle":"PBS & Tumblr",
            "tumblrClass": "pbs"

        }, ... 
```

问题是我被迫使用此代码手动创建 HTML 并将其粘贴到`<ul>`Isotope 中以正常运行。我遇到了各种错误，包括空`<ul>`s、0px 高度容器和`<li>`未获得正确同位素标记的 s。

经过太多我会承认的尝试，我无法得到这个编码。我认为获取 JSON 数据、创建元素和使用同位素会很容易。

希望各位高手能解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:24:48.343

自己解决了。

这是其他人遇到相同情况的解决方案：

```
 $('#one').live( 'pageinit', function(event){

    myNewFunction();

    }); 
```

myNewFunction 需要包含 getJSON 内容以及所有 Isotope 内容。

注意：同位素代码需要放在getJSON 块中的第一个`});`和最后一个之前。`});`

然后，所有内容都包含在 myNewFunction 中，该文件位于单独的文件中。

现在，我只需要编辑一个 JSON 文件即可进行添加、修订和删除。

效果很好。

# ruby-on-rails - Rails 验证非模型

> ID：13784368
> 
> 赞同：10
> 
> 时间：2012-12-09T03:33:33.220
> 
> 标签：ruby-on-rails, validation

我只是想知道验证**不**基于模型的表单的推荐方法是什么。我同意通常所有验证都应该在模型中完成，但在某些情况下，特定表单可能没有相应的模型。例如，任意搜索表单。

根据我目前的研究，据我所知，主要有两种方法，

1.  在控制器中验证。
    *   是否可以在控制器中使用 Rails 验证？我真的更愿意在我自己的自定义代码上使用它们。

2.  创建一个任意类，例如。调用`SearchForm`并包括`ActiveRecord::Validations`
    *   类是否应该与模型一起存储（即使它不是真的）？
    *   推荐这种方法的帖子表明您必须为 ActiveRecord 存根一堆方法，例如 save、save!、update_attribute 等。这让我觉得这根本不是 Rubyesque！

3.  还有其他建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T04:02:12.177

绝对**#2**。**[ActiveModel::Validations API](http://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html)**是您正在寻找的

```
class ArbitrarySearch
  include ActiveModel::Validations

  attr_accessor :query

  validate :query, :presence
end 
```

至于这个应该去哪里，是的，应该去`app/models`。如果您像我一样认为扩展模型`ActiveRecord::Base`和不共存于同一目录中的模型混合起来很有趣，请考虑将以下内容添加到您的`config/application.rb`文件中

```
config.autoload_paths += Dir["#{config.root}/app/models/**/"] 
```

现在，您可以以任何您喜欢的方式组织模型文件。对我来说我有

```
- app
  |
  |- models
     |
     |- table
     |- tableless
     |- observer 
```

我把像你的课一样的`ArbitrarySearch`课放到`app/models/tableless/arbitrary_search.rb`.

* * *

**[有一个很棒的 gem 可以将您在 ActiveRecord 模型中使用的这个和其他常见功能转换为名为active_attr](https://github.com/cgriego/active_attr)**的通用非基于表的模型类。

> ActiveAttr 是一组模块，可以轻松创建具有 ORM 中的功能（如 ActiveRecord）的普通旧 ruby​​ 模型，而无需重新发明轮子。将 ActiveAttr 视为 ActiveModel 遗漏的东西。

# mysql - 如何在mysql中创建表值函数

> ID：13784372
> 
> 赞同：5
> 
> 时间：2012-12-09T03:34:23.653
> 
> 标签：mysql, sql

我正在从 SqlServer 2008 迁移到 MySql，并且我有很多使用拆分 varchar 的通用表值函数的存储过程。sqlserver 函数声明为：

```
CREATE FUNCTION [dbo].[fnSplit](
    @sInputList VARCHAR(8000)       -- List of delimited items
  , @sDelimiter VARCHAR(8000) = ',' -- delimiter that separates items
) RETURNS @List TABLE (item varchar(50))

/* SAMPLE
select * from fnSplit('12 345 67',' ')
select * from fnSplit('12##34#5##67','##')
*/

BEGIN

    DECLARE @sItem VARCHAR(8000)

    WHILE CHARINDEX(@sDelimiter,@sInputList,0) <> 0
    BEGIN
        SELECT  @sItem=RTRIM(LTRIM(SUBSTRING(@sInputList,1,CHARINDEX(@sDelimiter,@sInputList,0)-1))),
@sInputList=RTRIM(LTRIM(SUBSTRING(@sInputList,CHARINDEX(@sDelimiter,@sInputList,0)+LEN(@sDelimiter),LEN(@sInputList))))

        IF LEN(@sItem) > 0 
            INSERT INTO @List SELECT @sItem
    END 

    IF LEN(@sInputList) > 0
        INSERT INTO @List SELECT @sInputList -- Put the last item in

    RETURN
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-30T05:55:27.233

无法在我的 SQL 服务器中编写表值存储函数。MySQL 存储函数**只返回单个值**。但是，如果情况要求函数返回一组数据，则只有两种选择。您可以使用结果集的一些分隔符创建一个字符串并将其返回给调用者。

# wordpress - 添加 Timthumb

> ID：13784376
> 
> 赞同：0
> 
> 时间：2012-12-09T03:34:37.450
> 
> 标签：wordpress

我目前正在尝试将 thimthumb 添加到我的 WordPress 模板中。

我的自定义帖子类型图像当前以以下方式显示：

```
 <a class="image-link" href="<?php echo $url; ?>"><?php the_post_thumbnail('collection_cover', array('class' => 'cover')); ?></a> 
```

这个原始方法工作正常，输出为：

```
 <a class="image-link" href="http://myURL.com"><img width="202" height="408" src="http://myURL.com/wp-content/uploads/2012/10/Untitled-12.jpg" class="cover wp-post-image" alt="Untitled-1" title="Untitled-1"></a> 
```

我试图用以下内容替换上述内容：

```
 <a class="image-link" href="<?php echo $url; ?>"><img src="<?php bloginfo('template_directory'); ?>/scripts/timthumb.php?src=<?php the_post_thumbnail('collection_cover', array('class' => 'cover')); ?>&h=150&w=150&zc=1" alt="<?php the_title(); ?>" width="100" height="57" /></a> 
```

输出为：

```
 <a class="image-link" href="http://myURL.com"><img src="http://myURL.com/scripts/timthumb.php?src=&lt;img width=" 202"="" height="408" class="cover wp-post-image" alt="Untitled-1" title="Untitled-1">&amp;h=150&amp;w=150&amp;zc=1" alt="Test" width="100" height="57" /&gt;</a> 
```

但是它似乎无法正常工作 - 任何人都知道我怎样才能让它工作？一些专家的建议将不胜感激。

# php - JavaScript中的PHP代码获取变量

> ID：13784380
> 
> 赞同：1
> 
> 时间：2012-12-09T03:35:11.470
> 
> 标签：php, javascript

当我按下列表中的任何“区域”名称（“ `href`”链接）时，“城市”的匹配列表显示在下方。

```
<?php while(has_list_regions()) { ?>
  <a href="javascript:show_region('<?php echo list_region_id() ?>');"></a>
<?php } ?>

<script type="text/javascript">
  function show_region(chosen_region_id) 
  {
      ;     
      $(this).slideDown(200);
      ;
        <?PHP $clicked_tag = 'chosen_region_id'; ?>
  }
</script> 
```

是否可以在一段 JavaScript 中包含 PHP 代码？因为我需要获取我单击的选定“<code>href”的 ID。我试图在上面的 JavaScript 函数中包含 PHP 代码，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:42:50.863

PHP 在服务器上运行，生成内容/HTML 并将其与 JavaScript、样式表等一起提供给客户端。没有运行一些 JS 然后一些 PHP 等的概念。

但是，您可以使用 PHP 生成所需的 JS 以及您的内容。

你写的方式是行不通的。

* * *

要将值发送`clicked_tag`到您的服务器，您可以执行类似的操作（使用 jQuery 演示逻辑）

```
function show_region(chosen_region_id) {
    ...
    $.post('yourserver.com/getclickedtag.php', 
        {clicked_tag: chosen_region_id}, 
        function(data) { ... });
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T03:37:58.447

在您的脚本中，该变量`chosen_region_id`已经在函数中，因此您实际上不需要使用 PHP 再次声明它。

# powershell - 从任务计划程序运行时如何重定向 PowerShell 输出？

> ID：13784382
> 
> 赞同：51
> 
> 时间：2012-12-09T03:35:22.127
> 
> 标签：powershell, scheduled-tasks, line-endings

从任务计划程序运行一个简单的 PowerShell 脚本时，我想将输出重定向到一个文件。

[这里](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/32952fdf-b3b8-44f9-a3c4-62bd802b1f39)有一个关于这个主题的长线程，但不清楚他们最终是否达到了最合适的解决方案。我很感兴趣 Stack Overflow 上是否有人也解决了这个问题，他们是如何解决的？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-11T20:20:15.047

这是对我有用的命令。我不喜欢在脚本中重定向输出的想法，因为它会使手动运行变得困难。

```
powershell -windowstyle minimized -c "powershell -c .\myscript.ps1 -verbose >> \\server\myscript.log 2>&1" 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-06-24T08:22:37.220

我使用转录功能来帮助解决这个问题。只需将其包含在您的代码中，它将所有（可能是）屏幕内容输出到日志文件。

```
Start-Transcript -path $LogFile -append

<Body of the script>

Stop-Transcript 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-03-04T06:58:18.927

以下适用于我在 Windows 7 上：

```
 powershell -command c:\temp\pscript.ps1 2>&1 > c:/temp/apickles.log 
```

在 Windows 7 任务计划程序 GUI 中：

```
 program = "Powershell"
 arguments = "-command c:\temp\pscript.ps1 2>&1 > c:/temp/apickles.log" 
```

请注意，“-file”不起作用，因为文件名之后的所有参数都被解释为文件的参数。请注意，“2>&1”也将错误输出重定向到日志文件。更高版本的 PowerShell 以稍微不同的方式执行此操作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-11T11:08:06.703

之前所有答案的组合确实帮助了我......

我的问题是我需要在[WinRM](https://en.wikipedia.org/wiki/Windows_Remote_Management)上执行一个 PowerShell 脚本作为 Packer 配置程序的一部分，并且由于权限问题而一直失败。解决此问题的方法是作为计划任务执行，但我需要将参数传递给脚本并获取输出以确认所有内容已通过。

这个片段对我很有效：

```
# Generate a unique ID for this execution
$guid = [guid]::NewGuid()
$logFile = "C:\Windows\Temp\$guid.log"

$argument = "-NoProfile -ExecutionPolicy unrestricted -Command ""& {""$ScriptPath"" $ScriptArgs} 2>&1 > $logFile"""

$a = New-ScheduledTaskAction -Execute "powershell.exe" -Argument $argument
Register-ScheduledTask -TaskName $TaskName  -RunLevel Highest -User $username -Password $password -Action $a | Start-ScheduledTask
do {
    Start-Sleep -Seconds 30
    $task = Get-ScheduledTask -TaskName $TaskName
} while ($task.State -eq 4) 
```

完整的脚本可以在这里找到：

[https://gist.github.com/dev-rowbot/fa8b8dadf1b3731067a93065db3e1bba](https://gist.github.com/dev-rowbot/fa8b8dadf1b3731067a93065db3e1bba)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-09T07:36:29.413

我会这样做：
创建一个函数来调用您的脚本并重定向此函数的输出，如下所示：

### .ps1：

```
function test{
    # Your simple script commands
    ls c:\temp -Filter *.JPG
    ls z:\ # Non-existent directory
}

test *> c:\temp\log.txt 
```

这是日志文件：

```
 Répertoire : C:\temp

Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-a---        07/06/2008     11:06     176275 HPIM1427.JPG
-a---        07/06/2008     11:06      69091 HPIM1428.JPG
-a---        07/06/2008     11:06     174661 HPIM1429.JPG

ls : Lecteur introuvable. Il n'existe aucun lecteur nommé « z ».
Au caractère C:\temp\test.ps1:14 : 1
+ ls z:\ #non existent dir
+ ~~~~~~
    + CategoryInfo          : ObjectNotFound: (z:String) [Get-ChildItem], Driv
   eNotFoundException
    + FullyQualifiedErrorId : DriveNotFound,Microsoft.PowerShell.Commands.GetC
   hildItemCommand 
```

您可以使用新的 V3 重定向运算符控制要输出的内容：

```
Do-Something 3> warning.txt  # Writes warning output to warning.txt
Do-Something 4>> verbose.txt # Appends verbose.txt with the verbose output
Do-Something 5>&1            # Writes debug output to the output stream
Do-Something *> out.txt      # Redirects all streams (output, error, warning, verbose, and debug) to out.txt 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-26T09:55:21.187

[使用Start-Transcript](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.host/start-transcript)直接记录到文件可能会更容易：

```
# Get script name
$ScriptFullPath = $MyInvocation.MyCommand.Path
# Start logging stdout and stderr to file
Start-Transcript -Path "$ScriptFullPath.log" -Append

[Some PowerShell commands]

# Stop logging to file
Stop-Transcript 
```

日志文件将与脚本位于同一目录中。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-01-25T03:27:06.737

我在 Windows Server 2016 上测试了以下内容，只调用`powershell`一次。这样，您可以使用带有空格的文件夹名称：

```
Powershell.exe -NoProfile -ExecutionPolicy Bypass -WindowStyle minimized "scriptName.ps1 *>> '\\servername\sharename\folder name with space\logfilename.log'" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-08T21:59:46.300

PowerShell 3 及更高版本允许重定向单个流（out、verbose 和 error）。但是，任务计划程序不理解它们。执行重定向的是 PowerShell。

[@cmcginty 的解决方案](https://stackoverflow.com/a/13827861/185123)半途而废，因为 PowerShell 正在调用 PowerShell。它只支持标准流（错误和输出）。如果要使用所有需要使用的流：

程序或脚本：`C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe`

争论：`-windowstyle minimized –NonInteractive –NoProfile -c "powershell -c path_to_ps1.ps1 4>>verbose.log 5>>debug.log"`

开始于：`path_to_ps1`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-16T18:37:10.533

我受到来自 Anders 的评论问题（如何添加时间戳？）以及调用 PowerShell 两次的多个回复的启发来写这个答案，我认为这不是必需的。任务调度程序显然是“powershell.exe”，对于我建议的参数：

```
-noninteractive -c "scriptpath.ps1 *>>logpath.txt" 
```

要每天保留一个文件，然后：

```
-noninteractive -c "scriptpath.ps1 *>>logpath-$((get-date).ToString('yyyy-MM-dd')).txt" 
```

如果您确实想要一个带有时间戳的日志文件，您可以删除第二个“>”（两个表示附加到任何现有文件）并扩展时间格式：

```
-noninteractive -c "scriptpath.ps1 *>logpath-$((get-date).ToString('yyyy-MM-dd_HH-mm-ss-fff')).txt" 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-07-20T22:30:04.327

下面将详细输出发送到屏幕并将其记录到文件中。

```
something you're doing -Verbose 4>&1 | Tee-Object "C:\logs\verb.log" -Append 
```

# php - 如何在同一个文件中将 AJAX 和 JQuery 中的值传递给 PHP

> ID：13784384
> 
> 赞同：0
> 
> 时间：2012-12-09T03:35:46.927
> 
> 标签：php, javascript, ajax

我目前有以下脚本。我想通过使用 AJAX 将值从 javascript 传递给 php。我的代码有什么问题？

```
<script type=" text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
      $.post("index.php",{host:document.referrer},function(data){});  
    });
</script>
<?php
$dataString=$_POST['host'];
echo $dataString;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T03:41:45.763

由于首先执行 PHP，您将永远不会`echo $dataString`从您的 AJAX 请求中看到。此代码会将您的请求发布到服务器，但您永远不会看到结果。

现在这是正在发生的事情：

1.  您的网络服务器呈现您的页面。
2.  您的浏览器向 index.php 发出请求，并忽略结果

从[文档](http://api.jquery.com/jQuery.post/)中您可以看到：

```
$.post('index.php', function(data) {
  $('.result').html(data);
}); 
```

该`data`函数中的 将返回`echo $dataString;`脚本的输出。

另外，您的帖子配置不正确。你需要把`data:`之前`{host:document.referrer}`

# php - 从我的 sql 查询中检查表

> ID：13784385
> 
> 赞同：1
> 
> 时间：2012-12-09T03:36:17.110
> 
> 标签：php, mysql

您好，我正在检查表中的重复数据。我有一个问题是从哪里选择数据。我的代码是：

```
$sub_cat = array(); 
$select = array("core_network","daisy_chain", "rf_bts", "rf_power", "rf_transmission");
$d='0';
for ($i=0;$i<=4;$i++){
    $SQL = "SELECT sub_cat FROM (".$select[$i].") WHERE location=('".$id."')";
    $result = mysql_query($SQL);

    $cs=$d;

    if ($result) {
        while ($db_field = mysql_fetch_array($result)) {
            if(!in_array($db_field['sub_cat'],$sub_cat)) {
                $sub_cat[]= $db_field['sub_cat'];
                $cs++;
                $d=$cs;
                $d--;
            }
        }
    } 
```

我需要知道`sub_cat`从哪个中选择的`$select[i]`。如何找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T03:48:37.590

要获取值，请执行以下操作：

```
$sub_cat = array(); 
$select = array("core_network","daisy_chain", "rf_bts", "rf_power", "rf_transmission");
$d='0';
for ($i=0;$i<=4;$i++){
    $SQL = "SELECT sub_cat FROM (" . $select[$i] . ") WHERE location=('".$id."')";
    $result = mysql_query($SQL); // deprecated - use PDO

    $cs = $d;

    if ($result) {
        while ($db_field = mysql_fetch_array($result)) {
            if(!in_array($db_field['sub_cat'], $sub_cat)) {
                $table = $select[$i];
                $sub_cat[$table][] = $db_field['sub_cat'];

                // I have no clue what's going on here in your example:
                $cs++;
                $d=$cs;
                $d--;
            }
        }
    } 
} 
```

然后，检索它：

```
foreach ($sub_cat as $table_name => $values) {
    foreach ($values as $row) {
        // output values here
    }
} 
```

# javascript - 使用唯一 ID 克隆 div 不起作用

> ID：13784387
> 
> 赞同：1
> 
> 时间：2012-12-09T03:36:25.167
> 
> 标签：javascript, jquery

我很确定我很接近，但我不知道我错过了什么：

```
var newId = 1;
$("#trigger").click(function(){
  $("#new-div").attr('id', 'new-div' +newId++).clone().appendTo("#myDiv");
}); 
```

我设置了断点：我可以看到计数器自动递增，但是克隆的 div 没有出现在它应该出现的位置。我没有错误。用于此的 HTML：

```
 <div id="secret-div" style="display: none;">
        <div>This is new div number </div>
      </div>
      <p><a id="trigger" href="javascript:void(0);">Please, add an element</a></p>
    <div id="myDiv"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T03:40:44.497

问题是您在克隆和附加之前更改了元素的 ID，导致 2 个元素具有相同的 ID，从而破坏了您的选择器和代码。

[固定现场演示](http://jsfiddle.net/8gdvb/10/)

HTML：

```
<div id="secret-div" style="display:none;">
    <div>This is new div number <span class="spnNewDivNumber"></span></div>
</div>
<p><a id="trigger" href="javascript:void(0);">Please, add an element</a></p>
<div id="myDiv"></div>​ 
```

JavaScript：

```
var newId = 1;
$("#trigger").click(function() {
    var $newSecretDiv = $("#secret-div").clone().attr('id', 'new-div' + newId++);
    $newSecretDiv.show().appendTo("#myDiv");
    $newSecretDiv.find('.spnNewDivNumber').text(newId - 1);
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:40:43.903

您当前的代码在克隆之前应用新 id，这意味着它正在更改现有 div 的 id。这反过来意味着下一次调用单击处理程序时，将不会有与选择器“#new-div”匹配的 div。

尝试在克隆之后或将其插入 DOM 之后应用 id：

```
var newId = 1;
$("#trigger").click(function(){
    $("#new-div").clone().attr('id', 'new-div' +newId++).appendTo("#myDiv");
}); 
```

或者

```
var newId = 1;
$("#trigger").click(function(){
    $("#new-div").clone().appendTo("#myDiv").attr('id', 'new-div' +newId++);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T03:41:34.653

您正在尝试克隆#new-div，除非您当前的 div 被命名为“new-div”。此外，您正在更改原始 div 的 id，而不是使用生成的 id 创建一个新 div。

# c# - C# 远程 TCP 连接

> ID：13784388
> 
> 赞同：0
> 
> 时间：2012-12-09T03:36:38.530
> 
> 标签：c#, tcpclient

我正在尝试让服务器允许 TCP 连接并回显正在发送的任何换行符分隔的消息。我希望多个客户端能够一个接一个地连接，保持相同的服务器套接字。这是我的代码：

```
TcpClient client;

while (true) {
    Console.Write("Waiting for connection... ");
    client = listener.AcceptTcpListener();
    nStream = client.GetStream();
    sReader = new StreamReader(nStream);
    Console.WriteLine("Connected!");

    while (client.Connected) {
        string line = sReader.ReadLine();
        Console.WriteLine(line);
    }
    Console.WriteLine("#Client Disconnected")
} 
```

不幸的是，当远程客户端断开连接时，它永远不会逃脱“while (client.Connected)”循环。相反，我得到了对 STDOUT 的无限写入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T04:23:34.820

基本上，您使用的 TcpClient.Connection 属性并没有按照您的想法执行。从 MSDN 文档：

[http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.connected.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.connected.aspx)

> 因为 Connected 属性仅反映最近操作时的连接状态，所以您应该尝试发送或接收消息以确定当前状态。消息发送失败后，该属性不再返回true。请注意，此行为是设计使然。您无法可靠地测试连接的状态，因为在测试和发送/接收之间的时间内，连接可能已经丢失。

要点是属性 TcpClient.Connection 在主机断开连接后但在您的服务器阻止等待从流中读取另一行之前没有更新。在阻止之前，您需要一种更可靠的方法来检测连接是否处于活动状态。

原来，这个问题已经被问过了。因此，我从这里借用了答案并将其调整为您在 OP 中使用的格式。

[https://stackoverflow.com/a/8631090](https://stackoverflow.com/a/8631090)

```
 static void Main(string[] args)
    {
        TcpClient client = new TcpClient();
        TcpListener listener = new TcpListener(IPAddress.Loopback, 60123);
        listener.Start();

        while (true)
        {
            Console.WriteLine("Waiting for connection...");
            client = listener.AcceptTcpClient();
            Console.WriteLine("Connection found");
            StreamReader reader = new StreamReader(client.GetStream());

            string line = string.Empty;
            while (TestConnection(client))
            {
                line = reader.ReadLine();
                Console.WriteLine(line);
            }
            Console.WriteLine("Disconnected");
        }
    }

    private static bool TestConnection(TcpClient client)
    {
        bool sConnected = true;

        if (client.Client.Poll(0, SelectMode.SelectRead))
        {
            if (!client.Connected) sConnected = false;
            else
            {
                byte[] b = new byte[1];
                try
                {
                    if (client.Client.Receive(b, SocketFlags.Peek) == 0)
                    {
                        // Client disconnected
                        sConnected = false;
                    }
                }
                catch { sConnected = false; }
            }
        }
        return sConnected;
    } 
```

当我测试它时，这对我有用，它起作用的原因是在您尝试读取或写入连接之前，您无法判断连接是否关闭。您可以通过盲目地尝试读/写然后处理套接字关闭时出现的 IO 异常来做到这一点，或者您可以执行此测试器方法正在执行的操作并查看连接是否已关闭。

希望这可以帮助你

**编辑**：

需要注意的是，这可能是也可能不是检查连接是否关闭的最有效的方法，但这纯粹是为了说明必须在服务器端通过读/写的方式自己检查连接，而不是依赖 TcpClient。联系。

**编辑 2**：

我的样本没有很好地清理旧资源，向任何有强迫症反应的人道歉。

# python - 我如何编写程序以单击 Python 中的特定链接

> ID：13784390
> 
> 赞同：1
> 
> 时间：2012-12-09T03:37:12.557
> 
> 标签：python, python-2.7, wxpython, mechanize, jython

我的程序接受用户输入并通过特定网页进行搜索。此外，我希望它去点击一个特定的链接，然后下载那里的文件。

例子 ：

1.  网页：[http ://www.rcsb.org/pdb/home/home.do](http://www.rcsb.org/pdb/home/home.do)
2.  搜索词：“1AW0”
3.  在网站上搜索这个词后，它会将您带到： [http ://www.rcsb.org/pdb/explore/explore.do?structureId=1AW0](http://www.rcsb.org/pdb/explore/explore.do?structureId=1AW0)

我希望程序位于网页的右侧并从**DOWNLOAD FILES**选项下载 pdb 文件

我已经设法使用 mechanize 模块编写了一个程序来自动搜索单词但是找不到我可以点击链接的方法

我的代码：

```
import urllib2
import re
import mechanize

br = mechanize.Browser()
br.open("http://www.rcsb.org/pdb/home/home.do")
## name of the form that holds the search text area 
br.select_form("headerQueryForm")

## "q" name of the teaxtarea in the html script
br["q"] = str("1AW0")
response = br.submit()
print response.read() 
```

任何帮助或任何建议都会有所帮助。

顺便说一句，我是 Python 的中级程序员，我正在尝试学习 Jython 模块以尝试完成这项工作。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T10:18:37.333

以下是我的做法：

```
'''
Created on Dec 9, 2012

@author: Daniel Ng
'''

import urllib

def fetch_structure(structureid, filetype='pdb'):
  download_url = 'http://www.rcsb.org/pdb/download/downloadFile.do?fileFormat=%s&compression=NO&structureId=%s'
  filetypes = ['pdb','cif','xml']
  if (filetype not in filetypes):
    print "Invalid filetype...", filetype
  else:
    try:
      urllib.urlretrieve(download_url % (filetype,structureid), '%s.%s' % (structureid,filetype))
    except Exception, e:
      print "Download failed...", e
    else:
      print "Saved to", '%s.%s' % (structureid,filetype)

if __name__ == "__main__":
  fetch_structure('1AW0')
  fetch_structure('1AW0', filetype='xml')
  fetch_structure('1AW0', filetype='png') 
```

它提供了这个输出：

```
Saved to 1AW0.pdb
Saved to 1AW0.xml
Invalid filetype... png 
```

连同 2 个文件`1AW0.pdb`一起`1AW0.xml`保存到脚本目录（对于此示例）。

[http://docs.python.org/2/library/urllib.html#urllib.urlretrieve](http://docs.python.org/2/library/urllib.html#urllib.urlretrieve)

# iphone - 如果我没有在 Objective C 的子类中覆盖访问器方法，那么使用它是否安全

> ID：13784394
> 
> 赞同：0
> 
> 时间：2012-12-09T03:38:01.450
> 
> 标签：iphone, objective-c, ios, xcode

一篇旧帖子解释得很好：[Why shoudn't I use accessor methods in init methods](https://stackoverflow.com/questions/3424382/why-shoudnt-i-use-accessor-methods-in-init-methods)

但我的问题是：

问：如果我没有在 Objective C 的子类中覆盖访问器方法，那么在 中使用是否安全`init`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:41:38.400

Apple 的最佳实践说不要使用 self. 在 init 或 dealloc 方法中的访问器。它可能会很好，但基本上Apple无法保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:10:53.073

`If I am not overriding accessor methods in sub class in Objective C, is it safe to use?`

答：永远不要使用 self.accessor。

从我在 20 年以上的苹果开发人员（可可、obj-c）下的 2 年以上工作经验中，我学到的东西是一样的。

很多时候，我们的团队被要求删除所有这些，并被指导使用其他一些设计模式或方式，即使它是必需的。

如果对象被创建为`nonatomic`，并且许多线程在同一个属性/对象上工作，这可能会给您带来问题。`self.`使您的类/对象绑定。正如您已标记 ios，对于以前的 ios 版本，这可能已经完成，但现在 ios 支持 kvo，所以您不应该遵循这种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T03:44:43.130

通常避免阻止 KVO 机制访问部分初始化或部分释放的对象。对于 Mac OS X 开发尤其如此，其中绑定和 KVO 发挥了很大作用，尤其是在应用程序的用户界面中。我不是 iPhone 开发人员，但如果 iPhone 平台上也使用了 KVO，那么避免在你的`init`and`dealloc`方法中使用访问器方法可能就足够了。

KVO 为您的类创建一个动态子类，以便它可以轻松监控属性的更改。

`init`在和中避免它们很容易`dealloc`。一些人认为，无论 Apple 的建议如何，在任何地方都使用访问器方法更容易，但惯例是避免使用它们，`init`并且`dealloc`遵循惯例通常意味着以后伤害更小，即使您现在没有预料到任何问题。

# java - 将表单输入值作为对象列表从 JSP 页面传递到 Servlet

> ID：13784402
> 
> 赞同：2
> 
> 时间：2012-12-09T03:39:57.990
> 
> 标签：java, jsp, servlets, jstl, backing-beans

这是一个**简化**的（非现实世界）示例。假设有一个领域模型 - 一个类*Movie*，它有一个演员列表。一个*Actor*类具有三个字段（*name*、*birthDate*、*rolesNumber*）。以下代码说明了这种情况：

*电影.java*

```
public class Movie {

    // some fields

    private List<Actor> actors;

    // getters and setters
} 
```

*演员.java*

```
public class Actor {

    private String name;

    private Date birthDate;

    private int rolesNumber;

    // getters and setters
} 
```

还有一个 JSP 页面，我们在其中循环输出有关在具体电影中播放的每个演员的信息，用户可以**更新相应的文本字段值**并将更改提交给 servlet：

*演员更新.jsp*

```
...
<c:forEach items="${movie.actors}" var="actor">
    <table>
        <tr>
            <th>Name</th>
            <td><input type="text" value="${actor.name}" /></td>
        </tr>
        <tr>
            <th>Birth Date</th>
            <td><input type="text" value="${actor.birthDate}" /></td>
        </tr>
        <tr>
            <th>Number of Previous Roles</th>
            <td><input type="text" value="${actor.rolesNumber}" /></td>
        </tr>
    </table>
    <hr />
</c:forEach>
... 
```

众所周知，为了检索 servlet 中的文本字段，可以使用*ServletRequest 之*类的方法等[`getParameter()`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)。[`getParameterValues()`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameterValues%28java.lang.String%29)但是如何将更新的输入字段检索为对象列表（以便每三个相关值分组）？

如果是 Spring 项目，我们可以使用 Spring 的`<form:form modelAttribute="modelName">`
标签并在*modelAttribute*中定义一个**支持对象**。但是纯 JSP/Servlet 项目呢？

 *# 可能的解决方案

一种可能的解决方案是在文本输入的“*名称*”属性中分配名称并附加*varStatus.index*，如下所示：

```
<c:forEach items="${movie.actors}" var="actor" varStatus="counter">
    <table>
        <tr>
            <th>Name</th>
            <td><input type="text" name="name${counter.index}" value="${actor.name}" /></td>
        </tr>
        ...
    </table>
    <hr />
</c:forEach> 
```

所以这个索引将允许我们**识别与 ONE 对象相关的值**。我们还可以生成一些隐藏的输入字段，我们可以在其中存储*循环计数*（一些参与者），然后在 servlet 中我们可以检索与一个对象相关的值，如下所示：

```
List<Actor> actors= new ArrayList<Actor>();
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
for (int i = 0; i < count; i++) {
    String name= request.getParamater("name" + i);
    Date birthDate = dateFormat.parse(request.getParamater("birthDate" + i));
    int rolesNumber = Integer.parseInt(request.getParamater("rolesNumber" + i));

    Actor actor = new Actor(name, birthDate, rolesNumber);
    actors.add(actor);
} 
```

* * *

## 我的问题是：

1.  是否有另一种更优雅和有效的方式将更新的文本字段值作为**对象列表**传递给 servlet ？

2.  在纯 JSP/JSTL/EL/Servlets 的世界中，是否有任何**类似于或等效**于 Spring标记的解决方案？`<form:form>`

* * *

# 更新

似乎没有人知道上述问题的答案。接受的答案并不完全符合我的要求（请参阅我的评论）。

`<form:form modelAttribute>`在纯 Servlets/JSP 的世界中似乎没有等同于 Spring 的标签或类似的东西。

好吧，完整的[Java EE](http://www.oracle.com/technetwork/java/javaee/overview/index.html)或[Spring Framework](http://projects.spring.io/spring-framework/)、[Apache Struts](http://struts.apache.org/)或另一个强大的[Web 应用程序框架](http://en.wikipedia.org/wiki/Web_application_framework)来救援！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T03:51:26.423

您可以对所有输入使用相同的名称（revisionNumber）并使用

`String[] revisionNumber = request.getParamaterValues("revisionNumber")` 得到一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T09:37:12.120

如果您要将它返回到 jsp 页面，建议您通过将对象参与者直接返回到列表来直接将其显示在列表中。在您的代码中将其设置为来自类 session.setAttribute("actorsList", actor); 的会话；

然后在您的 JSP 页面中，列表将是这样的。（actorsList 是对象集，您将其命名为 act 之类的名称，然后您可以在 option 中的列表中设置第一个初始静态字段，该列表将在 getProperty 上循环以从您的对象中获取属性“名称”。

```
<ffi:list collection="actorsList" items="act">
  <option value="">(Select An Actor)</option>
  <ffi:getProperty name="act" property="name"/>
</ffi:list> 
```*

# java - 使用 API 10 编译错误

> ID：13784403
> 
> 赞同：5
> 
> 时间：2012-12-09T03:39:59.063
> 
> 标签：java, android, api, compilation

我正在关注developers.android.com 上的基本教程，并创建了名为DisplayMessageActivity 的活动。它是一个空白活动，其中给出了教程中所示的所有规范。仅供参考，我使用 Min SDK = API 8，目标 SDK = API 16，编译 = API 10

接下来是两个错误：

1.  “对于 DisplayMessageActivity 类型，方法 getActionBar() 未定义
2.  “家无法解决或不是一个领域”

我尝试将 API 更改为 14，这需要另一个问题，它希望最小 API 为 11。

这解决了这些问题，但主要问题是许多设备仍在使用 Gingerbread 或 FroYo。我不能为他们写吗？我必须走得更高吗？如何为他们写作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T04:38:29.923

首先，您需要确保您正在针对最新版本的 Android 进行编译。您应该更新您的 sdk 版本，因为您正在为 API 10 但目标为 16 进行编译。如果您这样做，东西可能会损坏，因此最好保持更新以确保安全。这意味着在 Eclipse 中右键单击您的项目，单击属性，然后单击 Android。检查那里的最高版本 API。如果您有最新版本，则为 Android 4.2。然后在您的 AndroidManifest.xml 中，将 设置`android:targetSdkVersion`为您选择的内容（我的案例 api 17）。

![在此处输入图像描述](../Images/77b8fac406d512f8ae310ef001abce21.png)

这应该确保您的应用程序基本上可以在 HoneyComb to JellyBean 上运行。但是，这个应用程序至少要在 froyo 上运行。下一部分将允许您的应用在所有设备上运行。

做一个这样的方法：

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
    private void setupActionBar() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            // Show the Up button in the action bar.
            getActionBar().setDisplayHomeAsUpEnabled(true);
        }
    } 
```

它会检查它正在运行的 API，只有当它是蜂窝或更高版本时，才会启用操作栏。从您那里调用它`onCreate()`您将需要取出其中的 getActionBarCall，`onCreate()`因为那里不再需要它。

至于 home 没有被启用，它可能只是一个错误的项目目标，或者你忘记写了`android.R.id.home`，而是写了`R.id.home`.

最后，通过所有这些更改，您应该清理您的项目（项目 -> 清理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:32:44.853

看看这个[http://actionbarsherlock.com/](http://actionbarsherlock.com/)，它会让你在低 api 级别的用户操作栏。

# c++ - C++ 编译器是否优化了未使用的#includes？

> ID：13784422
> 
> 赞同：2
> 
> 时间：2012-12-09T03:44:56.730
> 
> 标签：c++, optimization, include, c-preprocessor

在构建不断增长的类/函数库时，我经常看到一种“伞形”头文件，它#include 了项目的所有常见头文件。例如：

```
dsp.h
#include "file1.h"
#include "file2.h"
...
#include "filex.h" 
```

有时我可能需要所有东西，但有时可能只需要选择一些功能/选项。例如，如果#include dsp.h，但不使用 file2.h 中的任何内容，编译器是否知道？是否有可能在构建中对其进行优化？

否则，我的解决方案是将可选代码包装在预处理器指令中，然后定义我需要的内容。也许这是一个更安全、更有效的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T03:52:44.833

您是在谈论代码优化还是构建时间优化？

不必要的、未使用的标头不会更改正在生成的代码，因此这里不存在优化问题。

但是，它会增加构建时间。这没有通过构建工具进行优化。如果您希望优化构建时间，请查看**John Lakos**的《**大规模 C++ 软件设计**》一书。

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T03:49:27.060

预处理器不做任何优化。它对代码的语义一无所知，因此无法判断您是否使用了头文件中的任何内容。所以不，`#include`语句没有优化出来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T03:49:23.977

由于预处理器是与 C++ 编译器分开的程序（和语言），因此预处理器无法知道使用了什么。因此编译器将接收头文件中的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T04:03:35.473

包含文件被读取，并在编译器真正开始生成代码之前插入部分源代码。

是的。作为一般规则，程序未引用的内容不会放入最终的可执行文件中。可以将其视为一种优化。详细信息将根据编译器和链接器而有所不同。**

# c# - 在链接列表中插入项目

> ID：13784423
> 
> 赞同：0
> 
> 时间：2012-12-09T03:45:00.960
> 
> 标签：c#

目前我正在学习如何在 C# 中构建自己的链表。我创建了一个名为的函数，它`AddTrees`根据文本框输入将树添加到列表的末尾：`tree_name`、、`tree_height`和。我请求帮助我如何修改我的函数以实现一种在当前和?之间插入树的方法`tree_price``tree_instock``current.next_tree`

**例子**

![在此处输入图像描述](../Images/2c59dd7977335495db75276a3d058677.png)

```
public class TheTrees
{
    private string tree_type = " ";
    private int tree_height = 0;
    public double tree_price = 0;
    private int tree_instock = 0;            

    public TheTrees next_tree;

    public TheTrees(string newtree, int newheight, int newinstock, double newprice)
    {
        tree_type = newtree;
        tree_height = newheight;
        tree_price = newprice;
        tree_instock = newinstock;                

        next_tree = null;
    }

    public override string ToString()
    {
        return tree_type + " " + tree_height + " " + 
               tree_price + " " + tree_instock;
    }
}

public class ListForTrees
{
    public TheTrees first_tree;
    public TheTrees last_tree;
    public int count = 0;

    public ListForTrees(TheTrees new_tree)
    {
        first_tree = new_tree;
        last_tree = new_tree;
        count = 1;
    }

    public ListForTrees()
    {
    }

    public void AddTree(TheTrees new_tree)
    {
        TheTrees current = first_tree;

        if (count == 0)
        {
            first_tree = new_tree;
            last_tree = new_tree;
            count = 1;
        }
        else if (count != 0)
        {
            if (new_tree.tree_price <= first_tree.tree_price)
            {
                new_tree.next_tree = first_tree;
                first_tree = new_tree;
            } 
            else if (new_tree.tree_price >= last_tree.tree_price)
            {
                last_tree.next_tree = new_tree;
                last_tree = new_tree;
            }
            else
            {
               while (new_tree.tree_price > current.next_tree.tree_price)
               {
                   current = current.next_tree;
               }

               new_tree.next_tree = current.next_tree;
               current.next_tree = new_tree;
            }

            count++;
       }
   }

   public void ClearTrees()
   {
        first_tree = null;
        count = 0;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:00:12.143

我不知道你为什么要`ListForTrees`上课，因为你有一个链表。

```
var oak = new TheTrees("Oak", 6, 2.00, 6);
var cypress = new TheTrees("Cypress", 20, 80.00, 2);
var evergreen = new TheTrees("Evergreen", 25, 50.00, 6);

//add evergreen after cypress
oak.next_tree = evergreeen;

//insert cypress
cypress.next_tree = oak.next_tree;
oak.next_tree = cypress; 
```

# c# - 如何从这个 SQLite 操作中减少脂肪？

> ID：13784432
> 
> 赞同：1
> 
> 时间：2012-12-09T03:46:41.703
> 
> 标签：c#, linq, sqlite, linq-to-sql

我试图通过使用 SELECT DISTINCT ... 并返回一个列表来切断中间人，但我无法让它工作，所以我最终得到了所有的 val，然后将它们放入一个 HashSet 中，这将忽略/不接受重复值：

```
public async Task<HashSet<String>> SelectDistinctGroupNames()
{
    var db = new SQLiteAsyncConnection(SQLitePath);
    var allLocations = await db.QueryAsync<SOs_Locations>("SELECT * FROM SOs_Locations");
    HashSet<string> hashsetGroupNames = null;
    foreach (var item in allLocations)
    {
        hashsetGroupNames.Add(item.GroupName);
    }
    return hashsetGroupNames;
} 
```

肯定有更好的办法; 有人知道吗？也许是一种 LINQ 方式来完成它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T03:53:27.640

是的，不同的（）：

```
public async Task<IEnumerable<String>> SelectDistinctGroupNames()
{
    var db = new SQLiteAsyncConnection(SQLitePath);
    var allLocations = await db.QueryAsync<SOs_Locations>("SELECT * FROM SOs_Locations");
    return allLocations.Select(x=>x.GroupName).Distinct();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T04:04:48.653

像这样的东西怎么样：

```
public async Task<List<String>> SelectDistinctGroupNames()
{
    var db = new SQLiteAsyncConnection(SQLitePath);
    var groupNames = await db.QueryAsync<string>("SELECT DISTINCT GroupName FROM SOs_Locations");
    return groupNames.ToList();
} 
```

这将在数​​据库端执行 Distinct 操作，这比从数据库中获取所有数据并在客户端处理它要高效得多。

# c++ - 如何使用 OpenSSL 的 SHA256 函数

> ID：13784434
> 
> 赞同：14
> 
> 时间：2012-12-09T03:47:05.427
> 
> 标签：c++, gcc, openssl, sha256

我正在编写一个程序来熟悉 OpenSSL、libncurses 和 UDP 网络。我决定使用 OpenSSL 的 SHA256 来熟悉行业加密标准，但我在让它工作时遇到了问题。我已将错误与 OpenSSL 与已编译程序的链接隔离开来。我正在使用 64 位的 Ubuntu 12.10。我安装了软件包 libssl-dev。

以 C++ main.cpp 为例：

```
#include <iostream>
#include <sstream>
#include <string>
#include <iomanip>
using namespace std;

#include <openssl/sha.h>

string sha256(const string str)
{
    unsigned char hash[SHA256_DIGEST_LENGTH];
    SHA256_CTX sha256;
    SHA256_Init(&sha256);
    SHA256_Update(&sha256, str.c_str(), str.size());
    SHA256_Final(hash, &sha256);
    stringstream ss;
    for(int i = 0; i < SHA256_DIGEST_LENGTH; i++)
    {
        ss << hex << setw(2) << setfill('0') << (int)hash[i];
    }
    return ss.str();
}

int main()
{

    cout << sha256("test") << endl;
    cout << sha256("test2") << endl;

    return 0;

} 
```

我正在使用[此处](https://stackoverflow.com/questions/2262386/generate-sha256-with-openssl-and-c)找到的 SHA256() 函数作为 OpenSSL 的 SHA256 功能的包装器。

当我尝试使用以下 g++ 参数进行编译时，我收到以下错误：

```
millinon@myhost:~/Programming/sha256$ g++ -lssl -lcrypto -o main main.cpp
/tmp/ccYqwPUC.o: In function `sha256(std::string)':
main.cpp:(.text+0x38): undefined reference to `SHA256_Init'
main.cpp:(.text+0x71): undefined reference to `SHA256_Update'
main.cpp:(.text+0x87): undefined reference to `SHA256_Final'
collect2: error: ld returned 1 exit status 
```

因此，GCC 清楚地识别了 OpenSSL 定义的函数和类型，但 ld 无法找到 sha.h 中引用的函数符号。

我是否需要手动指向特定的共享对象或目录？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-09T03:56:28.880

您犯了一个非常常见的初学者错误...在构建时将链接的库放在命令行上的错误位置。

依赖关系在命令行上是颠倒的，所以依赖于其他东西的东西实际上应该放在它依赖于命令行的东西*之前。*

在您的示例中，您有一个`main.cpp`依赖于一组库的源文件，那么源文件应该在它所依赖的库之前：

```
$ g++ -o main main.cpp -lssl -lcrypto 
```

为了安全起见，请始终将库放在*最后*，在命令行上列出的任何源文件或目标文件之后。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T04:00:09.020

这在我的系统上运行良好，但您可以尝试：

```
extern "C" {
#include <openssl/sha.h>
} 
```

它告诉 g++ openssl/sha.h 中的所有内容都被声明为“C”函数。

顺便说一句，你的 OpenSSL 几岁了？

# regex - 如何从 VBScript 中的文件路径中间获取子字符串？

> ID：13784445
> 
> 赞同：0
> 
> 时间：2012-12-09T03:49:25.393
> 
> 标签：regex, vbscript, substring, indexof

我在 VBScript 中有以下字符串：

```
myPath = "C:\Movies\12 Monkeys\12_MONKEYS.ISO" 
```

路径 C:\Movies\ 总是相同的。所以这里以另一条路径为例：

```
myPath = "C:\Movies\The Avengers\DISC_1.ISO" 
```

我的问题是，我怎样才能只提取电影文件夹名称，所以在上面的例子中我会得到：

```
myMovie = "12 Monkeys"
myMovie = "The Avengers" 
```

有没有办法使用正则表达式？还是我应该只做一些子字符串和索引调用？最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T04:03:42.617

考虑下面的代码：

```
arrPathParts = Split(myPath, "\");
myMovie = arrPathParts(2); 
```

拆分分隔符为反斜杠字符的字符串。拆分字符串会返回一个字符串数组。您的电影是字符串数组中的第三项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:46:29.487

[http://regexr.com?3332n](http://regexr.com?3332n)

`(?<=C:\\Movies\\).*?(?=\\)`

您使用断言，以便它找到一个以`C:\Movies`但不包含在结果中的字符串开头，然后使用贪婪运算符查找所有内容，直到正斜杠。您使用前瞻断言从结果中排除正斜杠。

# c - 在 OSX 上获取当前进程的 RPATH

> ID：13784448
> 
> 赞同：2
> 
> 时间：2012-12-09T03:49:58.777
> 
> 标签：c, macos, rpath

本质上，我正在寻找这个问题的答案：[有没有办法检查 Linux 上的当前 rpath？](https://stackoverflow.com/questions/2836330/is-there-a-way-to-inspect-the-current-rpath-on-linux)，但对于 OSX。我想以编程方式获取 OSX 中当前进程的 RPATH 条目。我知道如何使用 shell 来做到这一点，但我正在寻找一种方法来内部检查我的进程。

谢谢！

# android - 可扩展的持续通知？

> ID：13784449
> 
> 赞同：3
> 
> 时间：2012-12-09T03:50:04.373
> 
> 标签：android, android-notifications, android-4.2-jelly-bean, expandable

我有一个可扩展的通知（Jelly Bean，主要是从 Notifications API Guide 借来的），如下：

```
myId = 1 ;
numUpdates++ ;
myInboxStyle.addLine ("some string") ;
Resources res = context.getResources () ;
BitmapDrawable drawable = (BitmapDrawable) res.getDrawable (R.drawable.ic_launcher) ;

NotificationCompat.Builder mBuilder =
    new NotificationCompat.Builder (context)
        .setAutoCancel (false)
        .setOngoing (false)
        .setSmallIcon (R.drawable.ic_notify)
        .setLargeIcon (drawable.getBitmap ())
        .setContentTitle ("some update")
        .setStyle (myInboxStyle)
        .setNumber (numUpdates)
        .setContentText ("some text) ;

NotificationManager mNotificationManager =
    (NotificationManager) context.getSystemService (Context.NOTIFICATION_SERVICE) ;
mNotificationManager.notify (myId, mBuilder.build ()) ; 
```

这正如我所期望的那样工作：出现通知，我可以展开/折叠它，等等。

现在，如果我改变

```
.setOngoing (true) 
```

在上面的代码中，我收到了一个持续的通知（如我所愿），但它不再可扩展。

我在 Jelly Bean API 文档中找不到任何表明正在进行的通知不可扩展的内容。有没有人得到可扩展的持续通知来工作？如果是这样，你能指出我的代码哪里出错了吗？

# python - 使用python将带有撇号的文件名传递给scp

> ID：13784454
> 
> 赞同：2
> 
> 时间：2012-12-09T03:51:23.053
> 
> 标签：python, bash, scp

我正在尝试编写一个 python 脚本来通过 scp 将文件从远程服务器复制到本地目录。

因为我在 OpenELEC 发行版上运行它（最小的 HTPC linux 发行版，只读文件系统除了 userhome 使得安装 python ssh 模块不切实际），我这样做很丑，只是通过 os 将文件名传递给 scp 命令。系统。

```
SCPCopy = "scp -c blowfish -C user@host:\"" + pipes.quote(file) + "\" /storage/downloads/incoming/"
SCPCopy = SCPCopy.replace('\n','')
os.system(SCPCopy) 
```

这有效，但包含撇号的文件名除外。

下面是在带有撇号的文件中传递给 os.system 的示例：

```
scp -c blowfish -C user@host:"'/media/sdi1/home/data/bob'"'"'s file.avi'" /storage/downloads/incoming/ 
```

和错误：

```
sh: -c: line 0: unexpected EOF while looking for matching `''
sh: -c: line 1: syntax error: unexpected end of file 
```

看起来 pipe.quote(x) 正在转义撇号（应该如此），但显然语法仍然不正确。我已经尝试过放弃 pipe.quote(x) 并用 /' 替换撇号，但这也没有让我有任何收获。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T04:26:51.737

由于`scp`基于`SSH`，您提供给它的文件名也会在远程端进行 shell 转义。因此，您需要逃脱两次。

一个正确转义的 shell 命令行：

```
scp -c blowfish -C user@host:"\"/media/sdi1/home/data/bob's file\"" /storage/.../ 
```

要制作 python 字符串，我们必须再添加一层转义。为了保持清醒，我们可以使用三引号：

```
"""scp -c blowfish -C user@host:"\"/media/sdi1/home/data/bob's file\"" /storage/.../""" 
```

如果您以编程方式执行此操作（例如使用已弃用的`pipes.quote`），则根本不要触摸文件名（在上面的示例中，您在文件名周围添加了撇号）。

```
fp = "/media/sdi1/home/data/bob's file.avi"
fp = "user@host:" + pipes.quote(pipes.quote(fp))

cmdline = "scp -c blowfish -C " + fp + " /storage/downloads/incoming/"
os.system(cmdline) 
```

这无疑是令人困惑的。对于一个简单的模型， 的重点`pipes.quote`是对输入进行转义，以便 shell 将输入解析为恰好**一个 word**，它**等于 input**。

以下是更普遍的正确方法（并产生相同的结果）：

```
fp = "/media/sdi1/home/data/bob's file.avi"
# the filepath argument escaped for ssh/scp on the remote side
fp = pipes.quote(fp)
commandargs = ["scp", "-c", "blowfish", "-C", "user@host:"+fp, "/storage/downloads/incoming/"]
# escape all words for the local shell, and then concatenate space-separated
cmdline = " ".join(map(pipes.quote, commandargs))
os.system(cmdline) 
```

它更清楚地表达了意图：控制 shell 将准确解析哪些单词。

但是为什么首先要从 shell 开始呢？我们不需要一个并且可以在本地保存转义。要使用我们的 args 直接生成一个进程，请使用该`os.exec*`系列的命令。

```
fp = pipes.quote("/media/sdi1/home/data/bob's file.avi")
commandargs = ["scp", "-c", "blowfish", "-C", "user@host:"+fp, "/storage/downloads/incoming/"]
if os.fork() == 0:
    os.execvp("scp", commandargs) 
```

# email - 我想让用户通过他们的电子邮件联系人列表发送邀请，比如 Twitter

> ID：13784456
> 
> 赞同：0
> 
> 时间：2012-12-09T03:51:33.240
> 
> 标签：email

我已经在互联网上搜索了一段时间，但我还没有找到任何结果。我不知道它叫什么或者我怎么能做到这一点。我有一个网站，我想给用户机会，就像 twitter 一样，通过他们拥有的 hotmail 或 gmail 或 yahoo 联系人列表向他们的所有联系人列表发送邀请......有人知道它叫什么吗. 如果您有任何问题，请告诉我，该网站基于 Java

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:59:02.607

您可以从中获得帮助吗，[这](http://java.net/projects/dalicore)是一个库，您可以使用它从其他帐户导入联系人，还可以在您自己的应用程序中管理用户、组和权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:00:31.000

从雅虎您可以使用 API 参见 [http://developer.yahoo.com/social/rest_api_guide/contacts-resource.html](http://developer.yahoo.com/social/rest_api_guide/contacts-resource.html) 您可能必须使用 java 中的 JSON 参见[http://www.json.org/java/](http://www.json.org/java/)见 [https://stackoverflow.com/questions/2728421/how-to-import-contact-list-from-yahoo-msn-in-java](https://stackoverflow.com/questions/2728421/how-to-import-contact-list-from-yahoo-msn-in-java) 还有 socialauth 见 [http://code.google.com/p/socialauth /](http://code.google.com/p/socialauth/) 这显然不适用于hotmail，只是谷歌和雅虎。

# php - PHP 登录验证

> ID：13784457
> 
> 赞同：-1
> 
> 时间：2012-12-09T03:51:50.543
> 
> 标签：php

对于一些 Web 开发实践，我决定创建一个类似于 Dropbox 的站点，用户可以在其中使用用户名和密码登录，并且假设组合正确，可以访问文件上传器界面以及检索文件的方法。我有一些有用的东西，但我遇到了一个问题。一旦用户提交了他们的用户名和密码，页面就会使用新的 php 代码重新加载（这很好），但是，URL 会稍微更改为显示用户名和密码的位置。有人能告诉我如何防止这种情况发生吗？

这是 index.php 文件：

```
<?php
  function checkCredentials()
  {
    if($_GET && $_GET["username"]=="kwaugh" && $_GET["password"]=="password")
  {
?>

    <html>
        <head>
                <title>File Storage</title>
                    <style>
                        body{font-size:.85em ;font-family:Arial;}
                    </style>
        </head>

        <body>
            <center>
                <br>Please select the file that you would like to upload:<br><br>
                    <form method="post" enctype="multipart/form-data">
                        <input type="file" name="filename"/>
                        <input type="submit" value="Upload" />
                    </form>
            </center>
        </body>
    </html>
    <?php
        if ($_FILES)
        {
            $name = $_FILES['filename']['name'];
            move_uploaded_file($_FILES['filename']['tmp_name'], $name);
            if(file_exists($name))
            {
                ?>
                <html>
                    <body>
                        <div style="color:red; font-size:2em; font-family:Arial">
                            <center>The file has been successfully uploaded <br />Click <a href="getFiles.php">here</a> to go to your uploaded files</center>
                        </div>
                    </body>
                </html>

                <?php
            }
            else
            {
                    ?>
                    <html>
                        <body>
                            <div style="color:red; font-size:2em; font-family:Arial">
                                <center>Well crap, something went wrong.  The file could not be uploaded :'( </center>
                            </div>
                        </body>
                    </html>

                    <?php
            }
    }
    die();
}
elseif($_GET && $_GET["username"]!=="kwaugh" || $_GET && $_GET["password"]!=="password")
{
    ?>
    <script>
        alert("You have entered an incorrect username/password combination");
    </script>

    <?php
}
}
checkCredentials();
?>
<html>
<head>
    <title>File Storage</title>
</head>

<body> <br /><br />
    <center>
        <img src="elephant.jpg">
        <form name="credentials">
            Please enter your username and password to upload files: <br     />
            Username: <input type="text" name="username"><br />
            Password: <input type="password" name="password"><br />
            <input type="submit" value="Submit" >
        </form>
        <br />Or click <a href="getFiles.php">here</a> to access stored files.
    </center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T03:53:37.170

用于`POST`您的`credentials`表格。默认情况下，`method`is`GET`会将参数附加到`URL`. 显然，这意味着检查数组中的变量`$_POST`而不是`$_GET`数组。

如果我可以提出另一个建议，我会将应用程序拆分为多个文件。您不应该在同一个脚本中拥有登录和上传界面，否则您将在扩展应用程序时遇到重大问题。

*   当您添加页面时，几乎不可能知道脚本的哪个部分应该运行以及使用哪些参数并输出什么`html`
*   您需要将“状态”传递给页面，以便您在内部知道用户正在尝试做什么 - 将逻辑分布在多个`php`文件中会使操作更容易。
*   该文件将增长很多，使您更难理解实际执行的内容，使您更难调试
*   如果您曾经开始与其他开发人员合作，那么在单独`php`的文件中分解功能以最大程度地减少编辑文件时的冲突会更加“开发人员友好”

许多 Web 应用程序将被拆分为多个页面（通常在[控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)中实现），您将拥有以下内容：

*   `Welcome Page`（登陆页面，允许登录，允许登录，显示有关您的产品的信息）
*   `Authentication Page`（验证登录然后重定向到个人资料页面，显示登录表单，验证它，创建新用户等...）
*   `Profile Page`（对于已登录的用户，显示他的信息）

为此，您可能应该添加一个`File Management`页面，显示用户拥有的所有文件，允许他添加/删除页面等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T03:53:41.043

采用：

```
<form name="credentials" method="post"> 
```

和

```
if($_POST && $_POST["username"]=="kwaugh" && $_POST["password"]=="password") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T03:54:21.307

`POST`在您的表单和`$_POST`PHP 代码中使用。

`<form name="credentials" method="post" action="whatever-page.php">`

和

`if ($_POST["username"]=="kwaugh" && $_POST["password"]=="password")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T03:55:41.487

将登录更改`<form>`为具有 POST 方法

`<form method="POST" name="credentials">`

此外，请考虑将您的网站拆分为多个 .php 文件 - 您不能将所有内容都放在一个文件中，因为除了最简单的网站之外，它对于所有网站都变得难以管理。

# python - 以编程方式设置要在启动时执行的进程（运行级别 2）？

> ID：13784459
> 
> 赞同：0
> 
> 时间：2012-12-09T03:52:24.113
> 
> 标签：python, linux, startup, runlevel

我想了解如何编写 Python 代码来设置启动时运行的进程，在本例中为二级。

我已经阅读了一些资料，但我不清楚哪种方法在不同系统上最可靠。我原本以为我会`/etc/inittab`用 pythons fileIO 进行编辑，但后来我发现我的计算机 inittab 是空的。

我该怎么办？哪种设置启动时启动的方法最可靠？有没有人有任何代码片段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:52:31.507

我不妨用我的发现来回答我自己的问题。

在 Debian、Ubuntu、CentOS 系统上，有一个名为 /etc/rc.local 的文件。如果您使用 pythons 的 FileIO 来编辑该文件，您可以放置​​一个将在所有多用户启动级别的末尾运行的命令。这个工具仍然存在于使用 upstart 的系统上。

在BSD上我不知道。如果您知道如何使某些东西在启动时进行，请发表评论以改进此答案。

Archlinux 和 Fedora 使用 systemd 来启动守护进程 - 请参阅 Arch wiki 页面以了解 systemd。基本上，您需要创建一个 systemd 服务并对其进行符号链接。（感谢埃米尔·伊万诺夫）

# google-apps-script - 使按钮居中

> ID：13784460
> 
> 赞同：0
> 
> 时间：2012-12-09T03:52:25.067
> 
> 标签：google-apps-script

这样的代码适用于标签：

```
function doGet() {
 var app = UiApp.createApplication().setStandardsMode(true);
 return app.add(app.createLabel('centered').setStyleAttributes(
     {marginLeft: 'auto',
      marginRight: 'auto',
      width: '100px'}));
} 
```

但它对于按钮不起作用。它不会使按钮居中。为什么以及如何使它起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T06:45:39.163

尝试将 display:block 添加到样式中

只是补充一点：这些本身并不是特定于 Apps Script 的黑客......这只是标准的 CSS。您可以使用 Mozilla 开发者网络作为资源来了解更多关于不同元素如何对不同 CSS 做出反应的信息。

此外，所有 Gui Builder 组件都为它们隐式设置了 display:block （这就是它的布局方式）。

# ruby-on-rails-3 - Rails、电子邮件和 html 代码

> ID：13784461
> 
> 赞同：0
> 
> 时间：2012-12-09T03:52:28.373
> 
> 标签：ruby-on-rails-3, html-email

当我的 Rails 应用程序向 gmail 帐户发送电子邮件时，正文作为动态生成的 html 代码，在电子邮件中显示 html 代码并且不呈现 html。

我的 html 是动态生成的，如下所示：

```
html = "<html><table> ...... </table></html>" 
```

并且电子邮件显示了所有的 html 代码

我需要添加任何特定的标题或任何东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:39:06.103

尝试

```
html.html_safe 
```

将文本呈现`html`为 HTML 类型而不是纯文本，否则您的标签将被 html 转义...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:25:37.860

我建议看一下[Action Mailer Rails Guide](http://guides.rubyonrails.org/action_mailer_basics.html#create-a-mailer-view)。听起来您只使用 Action Mailer 的 mailer 部分。您应该避免将 HTML 手工制作成这样的变量，这不是 Rails 方式。

我还建议看一下 Ryan Bate 关于[Sending HTML Email](http://railscasts.com/episodes/312-sending-html-email)的截屏视频。

# javascript - Blogger 不会调整我的博客大小以适应较小的显示器

> ID：13784462
> 
> 赞同：-1
> 
> 时间：2012-12-09T03:52:30.607
> 
> 标签：javascript, css, blogger

我的博客在标准的 20 英寸或更大的显示器上看起来很棒，但如果我将它拖到我的笔记本电脑上……我有一个滚动条，它又大又笨重。似乎是什么问题？如果我重新调整博客的大小，那么它会破坏它，因为一切；甚至 youtube 视频也保持不变。

任何帮助将不胜感激！

[http://skepticsoup.com](http://skepticsoup.com) < - 博客

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:11:37.843

```
In ur css code u have mentioned width as 1500px. make it as 100%

body {
min-width: 1500px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 1500px;
max-width: 1500px;
_width: 1500px;
}
.main-inner .columns {
padding-left: 0px;
padding-right: 500px;
} 
```

# android - 如何在android的谷歌地图中显示显示地址的弹出文本

> ID：13784469
> 
> 赞同：0
> 
> 时间：2012-12-09T03:53:32.930
> 
> 标签：android, google-maps

类 MapOverlay 扩展 com.google.android.maps.Overlay {

```
 @Override
    public boolean draw(Canvas canvas, MapView mapView, 
    boolean shadow, long when) 
    {
        super.draw(canvas, mapView, shadow);                   

        Point screenPts = new Point(); 
```

// scree.openInfoWindowHtml("Hello, **World!** " );

```
 mapView.getProjection().toPixels(g, screenPts);

        Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.flag);            
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);  

        //TextView bubble=
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:33:30.943

也许你应该检查一下：[https ://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)

它非常好且易于使用，比自己滚动要快得多。如果您想学习，您可以随时研究源代码。

# java - RadioButtons 和布尔连接的问题

> ID：13784476
> 
> 赞同：0
> 
> 时间：2012-12-09T03:54:52.903
> 
> 标签：java, swing, if-statement, boolean, jradiobutton

嗯，它很奇怪。顺便说一句，我不擅长单选按钮。但是我在 netbeans 中制作了一个 JPanel 程序，其中包括一个 RadioButton。您使用 JTextFields 输入所有这些信息（没问题），最后我有一个 JButton，您可以单击所需的选项。然后我有一个 JButton，它获取所有信息并输出它。对于 RadioButton，我首先输入了通常的：

```
 family = new JRadioButton("Family", true);
    friend = new JRadioButton("Friend");
    relative = new JRadioButton("Relative");
    friendFriend = new JRadioButton("Friend of Friend");

    ButtonGroup group = new ButtonGroup();
    group.add (friend);
    group.add (family);
    group.add (relative);
    group.add (friendFriend); 
```

（我不确定我是否需要 RadioButtons 的侦听器，但无论如何我的程序似乎仍然“崩溃”）。

然后我有一个用于 JButton 的操作侦听器，其中包括所有文本字段和单选按钮。但是 RadioButton 是问题所在。

在我的动作监听器中： Object source = event.getSource();

```
 if (source == family)
            relation1 = true;
        else
            if (source == friend)
                relation2 = true;
            else
                if(source == relative)
                    relation3 = true;
                else
                    if(source == friendFriend)
                    relation4 = true; 
```

然后我做了一个关系类： public class Relation { private boolean arrayFamily, arrayFriend, arrayRelative, arrayFriendFriend;

```
public Relation(boolean relation1, boolean relation2, boolean relation3,
        boolean relation4)
{
    this.arrayFamily = relation1;
    this.arrayFriend = relation2;
    this.arrayRelative = relation3;
    this.arrayFriendFriend = relation4;
}

public String relations ()
{
    String relationship = null;

    if(arrayFamily && !arrayFriend && !arrayRelative && !arrayFriendFriend == true)
    {
        relationship = "Family";
    }
    else
        if(arrayFriend && !arrayFamily && !arrayRelative && 
                !arrayFriendFriend == true)
        {
            relationship = "Friend";
        }
        else
            if(arrayRelative && !arrayFamily && !arrayFriend && 
                    !arrayFriendFriend == true)
            {
                relationship = "Relative";
            }
            else
                if(arrayFriendFriend && !arrayFamily && !arrayFriend &&
                        !arrayRelative == true)
                {
                    relationship = "Friend of a Friend";
                }
    return relationship;
} 
```

}

最后回到动作监听器，我实现了这个类：

```
 Relation relationship = new Relation(relation1, relation2, relation3
                , relation4);

        String arrayRelation = relationship.relations(); 
```

我最后将arrayRelation 包含在一个数组中，但该数组工作正常。

我的问题是我的 RadioButtons 的数组输出一直读取“null”（最有可能是因为此代码：String relationship = null;）。我认为这意味着我的 if else 语句都不满足，我真的不知道为什么。同样重要的是要指出，如果我单击提交而不单击任何单选按钮（按钮保持在“家庭”上），它会显示为空。如果我单击一个按钮，它可以完美地读取我想要的字符串。但是，如果我之后单击另一个按钮并再次单击提交，则字符串将返回为“null”。

我知道它很长，但我真的很感激任何帮助，因为我迷路了。

PS我的代码的某些部分是重复的，因为我正在尝试解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:01:02.817

我建议你单独处理你的动作事件，例如：

```
family.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            familyActionPerformed(evt);
        }
    }); 
```

然后实现familyActionPerformed(evt)：

```
private void familyActionPerformed(java.awt.event.ActionEvent evt) {
    // every click on family radio button causes the code here to be executed
    relation1 = true;
} 
```

还要为您单击的按钮编写一个事件处理程序，如下所示：

```
submitButtonActionPerformed(java.awt.event.ActionEvent evt) {
    // Here test the state of each radio button
    relation1 = family.isSelected();
    relation2 = friend.isSelected();
    relation3 = relative.isSelected();
    relation4 = friendFriend.isSelected();
} 
```

更多编辑：用 NetBeans 做你正在做的事情应该很容易。以下教程将为您解决所有问题：

1.  [教程 1](http://netbeans.org/kb/docs/java/gbcustomizer-basic.html)

2.  [教程 2](http://netbeans.org/kb/docs/java/quickstart-gui.html)

* * *

## 我再次解释解决方案：

以“家庭”按钮为例，在您创建和初始化 GUI 组件的构造函数中执行以下操作：

```
JRadioButton family = new JRadioButton();
// do any other thing you want to do to this button and finally..
family.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            familyActionPerformed(evt);
        }
    });

JButton submit = new JButton("Submit");
submit.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            submitActionPerformed(evt);
        }
    }); 
```

然后在某处创建这些方法：

```
private void familyActionPerformed(java.awt.event.ActionEvent evt){
    // each time family is selected, you code processes the lines below:
    ...
}

private void submiteActionPerformed(java.awt.event.ActionEvent evt){
    relation1 = family.isSelected();
    relation2 = friend.isSelected();
    relation3 = relative.isSelected();
    relation4 = friendFriend.isSelected();
} 
```

对其余的 RadioButtons 执行类似的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T04:05:47.610

我认为你让事情对自己来说太复杂了。如果您想要的只是按下的 JRadioButton 的字符串，则使用 ButtonGroup 为您获取它。它可以返回所选 JRadioButton 的 ButtonModel（如果选择了任何一个），然后您可以从中提取 actionCommand 字符串，尽管您必须记住在创建 JRadioButton 时设置它。

例如：

```
import java.awt.event.ActionEvent;
import javax.swing.*;

@SuppressWarnings("serial")
public class JRadioExample extends JPanel {
   private static final String[] RADIO_TITLES = { "Family", "Friend",
         "Relative", "Friend or Relative" };
   private ButtonGroup btnGrp = new ButtonGroup();

   public JRadioExample() {
      for (int i = 0; i < RADIO_TITLES.length; i++) {
         JRadioButton rBtn = new JRadioButton(RADIO_TITLES[i]);
         rBtn.setActionCommand(RADIO_TITLES[i]); // ***** this is what needs to
                                                 // be set
         btnGrp.add(rBtn);
         add(rBtn);
      }

      add(new JButton(new BtnAction("Get Chosen Selection")));
   }

   private class BtnAction extends AbstractAction {

      public BtnAction(String name) {
         super(name);
      }

      @Override
      public void actionPerformed(ActionEvent evt) {
         ButtonModel model = btnGrp.getSelection();
         if (model != null) {
            String actionCommand = model.getActionCommand();
            System.out.println("Selected Button: " + actionCommand);
         } else {
            System.out.println("No Button Selected");
         }    
      }
   }

   private static void createAndShowGui() {
      JRadioExample mainPanel = new JRadioExample();

      JFrame frame = new JFrame("JRadioExample");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# python - 更改 werkzeug 请求对象的值

> ID：13784477
> 
> 赞同：0
> 
> 时间：2012-12-09T03:54:57.347
> 
> 标签：python, immutability, werkzeug

我有一个来自 werkzeug 的请求对象。我想更改此请求对象的值。这是不可能的，因为 werkzeug 请求对象是不可变的。我理解这个设计决定，但我需要更改一个值。我该怎么做呢？

```
>>> request
<Request 'http://localhost:5000/new' [POST]>
>>> request.method
'POST'
>>> request.method = 'GET'
*** AttributeError: read only property 
```

我尝试做 a `deepcopy`，但生成的副本也是不可变的。我想我可以创建自己的模拟对象并手动填写值，但这是我最后的解决方案。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:29:59.997

这就是我想出的：

```
def make_duplicate_request(request):
    """
    Since werkzeug request objects are immutable, this is needed to create an
    identical request object with mutable values
    """
    class Req(object):
        method = 'GET'
        path = ''
        headers = []
        args = []
    r = Req()
    r.path = request.path
    r.headers = request.headers
    r.is_xhr = request.is_xhr
    r.args = request.args
    return r 
```

也许没有最优雅的解决方案，但它确实有效。

# java - 如何在我的 Android 设备上运行我的 Android 应用程序？

> ID：13784486
> 
> 赞同：0
> 
> 时间：2012-12-09T03:56:29.397
> 
> 标签：java, android, eclipse, android-emulator, galaxy

我用 Eclipse 创建了一个 Android 应用程序，并`Android Virtual Machine`在 . 但我想在我的物理设备上运行。

我有`Samsung Galaxy Poket`。如何在 Galaxy 上运行应用程序？

**更多可能有帮助的细节：**

*   操作系统：Windows 7 旗舰版。

*   完整的 Android 设备型号：三星 Galaxy Pocket gt-s5300。

*   安卓版本：2.3.6。

*   Eclipse 发行版：3.7 Indigo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:03:46.610

因此，首先您需要将手机切换到 USB 调试模式，这可以在 android 设置菜单中完成，具体取决于您的 android 版本，它可以在几个地方之一，但通常它会在设置的开发部分下. 您还需要选中允许您安装来自未知来源的应用程序的复选框（通常在设置的安全部分中找到）。完成后，像往常一样在 eclipse 中运行您的应用程序，您的设备应该会出现在与所有正在运行的模拟器相同的列表中。如果您仍然看不到您的设备，请从三星网站安装 Kies，这将安装您的手机所需的所有 USB 驱动程序，以便在 ADT 插件中识别。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:10:23.437

阅读官方文档： [https ://developer.android.com/tools/device.html](https://developer.android.com/tools/device.html)

# jquery - jQuery验证插件不验证预填充的选择

> ID：13784488
> 
> 赞同：5
> 
> 时间：2012-12-09T03:56:44.963
> 
> 标签：jquery, jquery-validate

我对 jQuery Validation 插件有一个非常奇怪的问题，它不会验证`select`预先填充然后修改的。

您可以在这里查看代码：http: [//jsfiddle.net/VwRJ8/1/](http://jsfiddle.net/VwRJ8/1/)

代码从不触发`alert()`以下几行：

```
$('#edit_loc_save').click(function() {
    var foo = $('#add_new_loc_form').valid();
    alert(foo);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T04:21:43.627

您可以在每次更改值时检查选择是否有效：

**Javascript**

```
$('#myform').validate();
$('#myselectbox').on('change', function() {
    $(this).valid();
}); 
```

**[演示](http://jsfiddle.net/bPcr8/3/)**

**编辑 1**

以下是导致 javascript 错误的原因，这会阻止 validate 函数正常运行：

```
new_loc_zip: {
    required: true,
    postalcode: true // This is not a correct setting in jquery validate
}, 
```

如果您删除该`postalcode: true`行，验证将正确调用。

**[演示](http://jsfiddle.net/VwRJ8/5/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T04:22:26.933

[http://jsfiddle.net/YRAga/2/](http://jsfiddle.net/YRAga/2/)

```
$('#myform').validate({
    rules: {
        myselectbox: {
            required: true
        }
    }
});

$("#myselectbox").change(function() {
    $("#myform").submit();
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T04:23:01.510

如果您想在更改选项时进行验证，请尝试处理选择选项的更改事件并以编程方式触发验证

尝试这样的事情

```
$(document).ready(function() {
        $('#myselectbox').change(function() {
              $('#myform').validate({
                            rules: {
                              myselectbox: {required: true }
                            }
                          }).form();
                       });
                    });​ 
```

看小提琴：[这里](http://jsfiddle.net/5zbys/)

# arrays - 对包含不同大小字符串的元胞数组使用“xlswrite”MATLAB

> ID：13784493
> 
> 赞同：3
> 
> 时间：2012-12-09T03:58:29.537
> 
> 标签：arrays, matlab

当我尝试将 xlswrite 用于 4X10 左右的元胞数组时，每个元素中都有不同长度的字符串，MATLAB 返回了这个错误：

```
Error using xlswrite (line 188)
An error occurred on data export in CSV format.

Caused by:
    Error using dlmwrite (line 118)
    The input cell array cannot be converted to a matrix. 
```

我把它归结为“xlswrite”调用的“dlmwrite”函数中的某个地方，它调用“cell2mat”，它将我的单元格数组的元素连接到一个字符数组。但是，它将垂直和水平连接元素，如果字符元素的长度不同，则无法垂直连接字符元素。您最终会得到一个尺寸不一致的数组。例如，

如果我有“abcdef”和“abc”，将它们垂直连接会得到：

abcdef

美国广播公司

第一行的长度为 6，第二行的长度为 3，如果您谈论的是矩阵，这在逻辑上没有意义，在这种情况下应该是 2X6。

有人知道解决方法吗？我对 MATLAB 中的这个故障感到非常沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:28:51.820

我没有收到您的错误 - 至少在我的输入版本中。您的“a”中有一个错误，但我想这只是在评论中，而不是在您的实际代码中。

也许错误得到了修复？我正在使用 2012a。

反正; 您可以使用建议的解决方法。它只是一行代码。

```
% here are your data
a = {'$','gsqtmpiv','lsso';...
    'gsqqmwwmsr','efwxvegxmsr','gpsgo';...
    'hexyq','tst','vyffiv';...
    'pek','geqive','xerkmivw';...
    'tvigsppyhih','fewmexih','vywxmge'};

% this works fine in 2012a
xlswrite('blah.xls',b)

% but using dlmwrite directly fails
% like you described
try
    dlmwrite('test.txt', a)
catch ME
    disp(ME.message)
end

% so instead use the suggested work-around:
b = cellfun(@(s) sprintf('%-12s', s), a, 'UniformOutput', false);
% and dlmwrite will no longer fail
dlmwrite('test.txt', b) 
```

您需要知道字符串的最大长度（在您的测试数据中为 11）并在格式化字符串中使用它

```
'%12s' 
```

给出的最大长度为 12。

这样做的问题是，如果将它与 xlswrite 一起使用，则字符串中会有空格。如果您使用

```
'%-12s' 
```

格式化，所以除非您使用字符串进行进一步处理，否则可以吗？

# android - 如何在 styles.xml 中引用 HoloEverywhere？

> ID：13784494
> 
> 赞同：0
> 
> 时间：2012-12-09T03:58:30.130
> 
> 标签：android, actionbarsherlock, android-theme, android-holo-everywhere

如何从我的项目中引用 HoloEverywhere 主题？这是我的 styles_course.xml 文件，它需要一个父主题，最好是带有深色操作栏的全息灯。请注意，父属性为空。

```
 <?xml version="1.0" encoding="utf-8"?>
<!-- File created by the Android Action Bar Style Generator

     Copyright (C) 2012 readyState Software Ltd

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<resources>
<style name="Theme.course" parent="">
    <item name="android:windowBackground">@color/background</item>
    <item name="android:colorBackground">@color/background</item>
    <item name="actionBarItemBackground">@drawable/selectable_background_course</item>
    <item name="popupMenuStyle">@style/course_PopupMenu</item>
    <item name="dropDownListViewStyle">@style/course_DropDownListView</item>
    <item name="actionBarTabStyle">@style/course_ActionBarTabStyle</item>
    <item name="actionDropDownStyle">@style/course_DropDownNav</item>
    <item name="actionBarStyle">@style/course_solid_ActionBar</item>

    <item name="android:actionBarItemBackground">@drawable/selectable_background_course</item>
    <item name="android:popupMenuStyle">@style/course_PopupMenu</item>
    <item name="android:dropDownListViewStyle">@style/course_DropDownListView</item>
    <item name="android:actionBarTabStyle">@style/course_ActionBarTabStyle</item>
    <item name="android:actionDropDownStyle">@style/course_DropDownNav</item>
    <item name="android:actionBarStyle">@style/course_solid_ActionBar</item>
    <item name="android:panelBackground">@drawable/menu_hardkey_panel_course</item>

            <!-- Light.DarkActionBar specific -->
    <item name="actionBarWidgetTheme">@style/Theme.course.widget</item>
    <item name="android:actionBarWidgetTheme">@style/Theme.course.widget</item>

</style>

<style name="course_solid_ActionBar" parent="@style/Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/ab_solid_course</item>
    <item name="backgroundStacked">@drawable/ab_stacked_solid_course</item>
    <item name="backgroundSplit">@drawable/ab_bottom_solid_course</item>
    <item name="progressBarStyle">@style/course_ProgressBar</item>

    <item name="android:background">@drawable/ab_solid_course</item>
    <item name="android:backgroundStacked">@drawable/ab_stacked_solid_course</item>
    <item name="android:backgroundSplit">@drawable/ab_bottom_solid_course</item>
    <item name="android:progressBarStyle">@style/course_ProgressBar</item>
</style>

<style name="course_transparent_ActionBar" parent="@style/Widget.Sherlock.ActionBar">
    <item name="background">@drawable/ab_transparent_course</item>
    <item name="progressBarStyle">@style/course_ProgressBar</item>

    <item name="android:background">@drawable/ab_transparent_course</item>
    <item name="android:progressBarStyle">@style/course_ProgressBar</item>
</style>

<style name="course_PopupMenu" parent="@style/Widget.Sherlock.ListPopupWindow"> 
    <item name="android:popupBackground">@drawable/menu_dropdown_panel_course</item>    
</style>

<style name="course_DropDownListView" parent="@style/Widget.Sherlock.ListView.DropDown">
    <item name="android:listSelector">@drawable/selectable_background_course</item>
</style>

<style name="course_ActionBarTabStyle" parent="@style/Widget.Sherlock.ActionBar.TabView">
    <item name="background">@drawable/tab_indicator_ab_course</item>

    <item name="android:background">@drawable/tab_indicator_ab_course</item>
</style>

<style name="course_DropDownNav" parent="@style/Widget.Sherlock.Spinner.DropDown.ActionBar">
    <item name="background">@drawable/spinner_background_ab_course</item>

    <item name="android:background">@drawable/spinner_background_ab_course</item>
    <item name="android:popupBackground">@drawable/menu_dropdown_panel_course</item>
    <item name="android:dropDownSelector">@drawable/selectable_background_course</item>
</style>

<style name="course_ProgressBar" parent="@style/Widget.Sherlock.ProgressBar.Horizontal">
    <item name="android:progressDrawable">@drawable/progress_horizontal_course</item>
</style>

<!-- this style is only referenced in a Light.DarkActionBar based theme -->
<style name="Theme.course.widget" parent="@style/Theme.Sherlock">
    <item name="popupMenuStyle">@style/course_PopupMenu</item>
    <item name="dropDownListViewStyle">@style/course_DropDownListView</item>

    <item name="android:popupMenuStyle">@style/course_PopupMenu</item>
    <item name="android:dropDownListViewStyle">@style/course_DropDownListView</item>
</style> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:10:27.997

为应用程序或活动创建自己的主题，如下所示：

```
<style name="AppTheme" parent="Holo.Theme">
<!-- Or use <style name="AppTheme" parent="@style/Holo.Theme"></style> -->
</style> 
```

1.  当然，如果您从项目中引用 holoeverywhere 库项目，这将有效。
2.  你`Activity`应该扩展`org.holoeverywhere.app.Activity`
3.  当然，您应该将此主题应用于 Manifest 中的活动或应用程序。

还有像`Holo.Theme.Light`和这样的主题`Holo.Theme.Light.DarkActionBar`

这是所有样式的列表[。](https://github.com/Prototik/HoloEverywhere/blob/master/library/res/values/styles.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:56:14.007

```
<resources>
    <style name="MyTheme" parent="@android:styl e/Theme.Holo">
        <!-- Any customizations for your app ru nning on devices with Theme.Holo here -->
     </style>
</resources> 
```

这里还有一个很好的资源来了解更多信息：[http ://android-developers.blogspot.com/2012/01/holo-everywhere.html](http://android-developers.blogspot.com/2012/01/holo-everywhere.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:18:00.510

你试过这个吗？

```
"@style/Holo.Theme.Sherlock.Light.DarkActionBar" 
```

编辑：

对于 holoeverywhere 1.4 它

```
@style/Holo.Theme.Light.DarkActionBar 
```

# node.js - Id 的序列号

> ID：13784496
> 
> 赞同：1
> 
> 时间：2012-12-09T03:58:33.950
> 
> 标签：node.js, mongodb

我想配置我的 Mongo DB 为 Id 列创建序列号。前任。它必须从 1001 开始，并在我插入下一行时自动增加 1。我有我的模式定义作为 Node.JS 的一部分如何在节点模式中添加这个配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T09:57:03.623

MongoDB 不支持这个开箱即用。我实现这个的方式（尽管在 C# 中）是创建一个带有键和下一个数字的“序列”集合。您可以原子地递增并返回下一个数字，然后将其用作集合中的 id。

这是一个 C# 函数，使用 findandmodify mongodb 命令获取和更新给定“键”的序列号。

```
 public long GetNextSequenceNumber(string name, string key)
    {
        var update = new BsonDocument(new BsonElement("$inc", new BsonDocument(new BsonElement("SequenceNumber", 1))));
        var query = new BsonDocument("_id", key);

        var command = new CommandDocument { 
            { "findandmodify" , name },
            { "query", query},
            { "update" , update},
            { "new" , true},
        };

        var res = Db.RunCommand(command);

        if (res.Response["value"] != BsonNull.Value)
        {
            var o = BsonSerializer.Deserialize<Sequence>(res.Response["value"].ToBsonDocument());
            return o.SequenceNumber;
        }
        else
        {
            var o = new Sequence() { Id = key, SequenceNumber = 0 };
            Db.GetCollection(name).Insert<Sequence>(o);
            return o.SequenceNumber;
        }
    } 
```

和序列模型：

```
 public class Sequence
    {            
        public string Id { get; set; }        
        public long SequenceNumber { get; set; }       
    } 
```

序列文档如下所示：

```
{
    _id : 'mykey',
    SequenceNumber : NumberLong(1234)
} 
```

如果您需要将其转换为 javascript，请询问。

希望有帮助。

# php - 服务器和 SSL API 安全

> ID：13784499
> 
> 赞同：3
> 
> 时间：2012-12-09T03:59:07.473
> 
> 标签：php, security, api, rest, ssl

目前我正在开发一个 REST API

我的 API 访问仅在我的服务器和我的客户端服务器（B2B，企业对企业）之间。示例：myserverapi.com（我的 REST API 服务器）和 myclientserver.com（访问我的 API 的我的客户端服务器）*没有第三个连接/应用程序

我们正在实现 api_key（当然这是必须的）和域名（因此客户端指定了他将访问 api 的域名，所以我的服务器 api 将只接受它）

对于 myserverapi.com，如何只接收来自 myclientserver.com 的连接？只是使用`$_SERVER['REMOTE_ADDR']`？够了吗 ？但是在从几个地方阅读之后，我不能使用它，因为如果它在代理或负载均衡器场下，IP 可能是错误的。有什么解决办法？

如果我安装了 SSL 证书怎么办？我必须更改我的代码吗？或者只是购买并安装在服务器端自动我的api将是安全的？

openssl-verify 功能是否只是真正了解访问是否来自特定服务器的安全方式？[http://php.net/manual/en/function.openssl-verify.php](http://php.net/manual/en/function.openssl-verify.php)这是否意味着我必须更改我的代码以加密和解密此链接中的数据[http://3stepsbeyond.co.uk/2010/12/ openssl-and-php-tutorial-part-two/](http://3stepsbeyond.co.uk/2010/12/openssl-and-php-tutorial-part-two/)

所以基本上我只想确保 myserverapi.com 只能从 myclientserver.com 获得访问权限。并且 myclientserver.com 只接受来自 myserverapi.com 的数据。怎么做 ？

我希望有人给我一个很好的解释。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T19:00:42.423

你可以做一系列的事情。最不可知的代码是 HTTPS 客户端证书。如果您不关心用户到底是谁，而只是想确保这是允许的，让 apache 处理。配置文件中只有几行代码，您无需修改​​代码。

您的第二个选项是 ACL，即使在路径级别，您也可以在 Apache 中再次处理它。当然，在操作系统级别，您也可以将它们应用于 IP 和端口。这同样适用于服务器/服务器内部或前面的防火墙。

如果您不想处理管理证书或 IP/端口防火墙和 ACL，您可以实施 2 legged Oauth。客户端可以使用库，因为它们几乎已经以任何语言存在，并且服务器的代码并不太复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T02:45:59.757

A little late for an answer, but for checking remote_addr for requests that might come via proxy you can check if X-forwarded-for header is set, and use that if it exists.

[http://en.wikipedia.org/wiki/X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T04:22:41.603

对于 SSL 证书，您不必更改代码。但是，您可能想要检查服务器端口，如果不是 SSL，则抛出异常：

```
if ($_SERVER['SERVER_PORT'] != 443) {
    header('405 Method Not Allowed');
    exit();
} 
```

当然，您可以使用 Apache 完成类似的限制，只需不在端口 80 上提供服务即可。

对于IP限制，`$_SERVER['REMOTE_ADDR']`应该可以在大多数情况下工作。不幸的是，我认为没有办法绕过代理。但是，API 密钥应该足以满足大多数安全要求。

# python - 不能将序列乘以浮点类型的非整数？Python

> ID：13784501
> 
> 赞同：1
> 
> 时间：2012-12-09T03:59:16.210
> 
> 标签：python, plot

模块 OneDMaps：

```
def LogisticMap(a,nIts,x):
    for n in xrange(0,nIts):
        return 4.*a*x*(1.-x) 
```

实际程序：

```
# Import plotting routines
from pylab import *
import OneDMaps 

def OneDMap(a,N,x,f):
    return x.append(f(a,N,x))

# Simulation parameters
# Control parameter of the map: A period-3 cycle
a = 0.98
# Set up an array of iterates and set the initital condition
x = [0.1]
# The number of iterations to generate
N = 100

#function name in OneDMaps module
func = LogisticMap

# Setup the plot
xlabel('Time step n') # set x-axis label
ylabel('x(n)') # set y-axis label
title(str(func) + ' at r= ' + str(a)) # set plot title

# Plot the time series: once with circles, once with lines
plot(OneDMap(a,N,x,func), 'ro', OneDMap(a,N,x,func) , 'b') 
```

该程序应该从模块 OneDMaps.py 调用一个函数，然后根据它的迭代绘制它。我收到错误“无法将序列乘以浮点类型的非整数”，并且我尝试使用 LogisticMap(float(a)...) 但这不起作用。此外，我希望函数名称显示在绘图的标题中，但我得到“在 r=0.98 处，而不是在 r=0.98 处显示 LogisticMap。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T04:02:41.883

你设置一个`list`这样的：

```
x = [0.1] 
```

然后你将它乘以一个`float`：

```
return 4.*a*x*(1.-x) 
```

你不能那样做。也许你想`x`成为一个`array`而不是一个`list`？

```
x = array([0.1]) 
```

（这将按元素进行乘法）

* * *

请注意，添加列表会连接：

```
[0] + [1] == [0, 1] 
```

乘以一个整数与多次连接相同：

```
[0] * 3 == [0, 0, 0] 
```

但这对花车没有意义，

```
[0] * 3.0 #raises TypeError as you've seen 
```

（例如，如果乘以 3.5，您应该得到什么？）

# java - 在对对象数组进行排序时利用 Comparable 的 2 个排序标准

> ID：13784503
> 
> 赞同：1
> 
> 时间：2012-12-09T03:59:31.223
> 
> 标签：java, arrays, sorting, methods

我已经为此工作了几个小时，我觉得（我希望）我即将解决这个问题。这个程序从一个外部文件中读取一堆值，并将它们放在一个对象数组中，这似乎工作得很好。

对象属性是：
银行帐户 # 客户名称 银行帐户余额

**1.**我可以按照账号#的顺序输出（这是他们从文件中读取的方式，不需要排序）

**2.**我已经设置了一个方法，从实现 Comparable 到按银行账户余额排序，它工作正常。

**3.**我需要第二种排序方法，按客户名称排序。- 我遇到的问题是基于我所做的研究和我所尝试的我得出的结论是，完成这项工作的唯一方法是构建我自己的可比较对象（对不起，如果我的术语有偏差。）我也多次尝试过 Java Doc 和 SE 上的一些类似问题。

当一切都说完了，我将把一些监听器放入我的复选框组中，以允许用户切换不同的排序方法。

这是我正在处理的块：

```
 public class bankAccounts implements Comparable<bankAccounts> {
/* PRIVATE FIELDS HERE, FOLLOWED BY TYPICAL GET AND SET METHODS */

 /*SORTS BY ACCOUNT BALANCE WORKING GREAT*/
 public int compareTo(bankAccounts b)   {
    if (accountBalance < b.accountBalance)
    {
        return -1;
    }
    if (accountBalance > b.accountBalance)  {
        return 1;
    }
    return 0;
}

       /* BEGIN SNIPPET OF MAIN CLASS */

      /*METHOD I CALL FROM MAIN CLASS, SORTS BY BALANCE ^^ AS SEEN ABOVE */
Arrays.sort(retrievedAccounts);
for (int i=0; i<retrievedAccounts.length; i++)  {
    String resultFull = Integer.toString(retrievedAccounts[i].getAccountNumber()) + retrievedAccounts[i].getAccountLastName() + Double.toString(retrievedAccounts[i].getAccountBalance());
        box.append(resultFull + "\n");
}

/* NORMAL METHOD WHICH OUTPUTS IN ORDER OF ACCOUNT NUMBER, NO SORTING HAPPENING HERE */
        for(int x = 0; x < retrievedAccounts.length; ++x)
{
    String resultFull=Integer.toString(retrievedAccounts[x].getAccountNumber()) + retrievedAccounts[x].getAccountLastName() + Double.toString(retrievedAccounts[x].getAccountBalance());
    box.append("\n\n\n" + resultFull + "\n\n");
} 
```

我希望有人会对下一步有所了解，这可能会让我完成这项工作。如果您有建议采取完全不同的方向，我也对此持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:10:20.357

使用`Comparator<bankAccounts>`比较对象名称并将其传递给[`Arrays.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)方法的实现。

使用这样的匿名类：

```
Arrays.sort(retrievedAccounts, new Comparator<bankAccounts>() {
    public int compare(bankAccounts a, bankAccounts b) {
        return a.getName().compareTo(b.getName());
    }
}); 
```

此代码假定您有一个`bankAccounts`名为客户名称的 getter 方法`getName()`
您最好遵循 java 命名约定：

*   类名以大写字母开头
*   类名是单数，不是复数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:12:49.120

这是一个未经测试的想法。

创建另一个私有方法来存储 compareType

```
public class bankAccounts implements Comparable<bankAccounts> {

private int compareType = 0; // 0 - compare by balance 1-compare by name 
```

在您的比较方法中

```
public int compareTo(bankAccounts b)   {
if(this.compareType == 0){
if (accountBalance < b.accountBalance)
{
    return -1;
}
if (accountBalance > b.accountBalance)  {
    return 1;
}
return 0;
}else{
 return customerName.compareTo(b.customerName)
} 
```

# java - 如何使用 Java 进程运行 python 管道命令？

> ID：13784505
> 
> 赞同：0
> 
> 时间：2012-12-09T03:59:58.460
> 
> 标签：java, python, pipe

我想在 Java 中运行 python 命令。

命令的格式如下：

```
python abc.py TAG < xyz.txt 
```

当我使用 Java 的进程时：

```
Process p=Runtime.getRuntime().exec("python abc.py TAG < xyz.txt"); 
```

我得到一个不正确的参数错误，因为`< xyz.txt`它被解释为参数而`abc.py`不是管道的终端含义`xyz.txt`。

有什么方法可以运行具有管道功能的 java 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T04:04:13.180

`exec()`不涉及外壳。你不能做那样的事情。

你要么需要`exec()`一个 shell 并*让它*在你尝试时运行 python 进程，要么你需要`exec()`python 进程，用 Java 打开并读取`xyz.txt`文件，然后将数据发送到 exec'd 进程'标准（你可以从`Process`对象中获取该流）。

# matlab - 如何修复对角线以下点的ROC曲线？

> ID：13784509
> 
> 赞同：12
> 
> 时间：2012-12-09T04:00:12.433
> 
> 标签：matlab, machine-learning, classification, statistics, roc

我正在构建接收器操作特征 (ROC) 曲线，以使用曲线下面积 (AUC) 评估分类器（有关帖子末尾的更多详细信息）。不幸的是，曲线上的点经常低于对角线。例如，我最终得到的图表看起来像这里的图表（蓝色的 ROC 曲线，灰色的标识线）：

![修复 ROC](../Images/fd64643db6189933f53c7766dcd636c8.png)

第三个点 (0.3, 0.2) 位于对角线下方。为了计算 AUC，我想修复这些顽固点。

对于曲线上的点 (fp, tp)，标准的做法是用一个点 (1-fp, 1-tp) 替换它，这相当于交换分类器的预测。例如，在我们的示例中，我们的麻烦点 A (0.3, 0.2) 变成了点 B (0.7, 0.8)，我在上面链接的图像中用红色表示。

这是关于[我](http://home.comcast.net/~tom.fawcett/public_html/papers/ROC101.pdf)在处理这个问题时的参考资料。问题是，如果将新点添加到新 ROC 中（并删除坏点），最终会得到如图所示的非单调 ROC 曲线（红色是新的 ROC 曲线，蓝色虚线是旧的）：

![新中华民国](../Images/904098d04269835f9d1328781ca8f634.png)

在这里我被困住了。如何修复此 ROC 曲线？

我是否需要使用经过某种方式转换的数据或类重新运行我的分类器以考虑这种奇怪的行为？我查看了一篇[相关论文](http://www.cs.bris.ac.uk/Publications/Papers/2000402.pdf)，但如果我没记错的话，它似乎解决了一个与此稍有不同的问题。

在一些细节方面：我仍然拥有所有原始阈值、fp 值和 tp 值（以及每个数据点的原始分类器的输出，输出只是从 0 到 1 的标量，即概率估计类成员）。我在 Matlab 中从 perfcurve 函数开始执行此操作。

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:56:38.590

根据撰写上述文章的人的一些非常有用的电子邮件以及上面的讨论，请注意，正确的答案似乎是：除非您构建一个全新的，否则不要尝试“修复” ROC 曲线中的各个点分类器，然后一定要遗漏一些测试数据，看看这是否合理。

在身份线以下获得点是很容易发生的事情。这就像让一个单独的分类器得到 45% 的正确率，即使最优理论最小值是 50%。这只是真实数据集可变性的一部分，除非它明显低于基于机会的预期，否则您不必太担心。例如，如果你的分类器有 20% 的正确率，那么显然有问题，你可能会调查具体原因并修复你的分类器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T04:21:58.687

是的，将一个点换成 (1-fp, 1-tp) 在理论上是有效的，但增加样本量也是一个安全的选择。

您的系统似乎确实具有非单调响应特性，因此请注意不要过多地弯曲 ROC 的规则，否则会影响 AUC 的稳健性。

也就是说，您可以尝试使用[Pareto Frontier Curve (Pareto Front)](http://en.wikipedia.org/wiki/Pareto_efficiency)。如果这符合“修复凹面”的要求，那么您基本上会对点进行排序，使 ROC 曲线变得单调。

# ruby-on-rails - Rails 3) 删除、销毁和路由

> ID：13784513
> 
> 赞同：0
> 
> 时间：2012-12-09T04:00:53.917
> 
> 标签：ruby-on-rails, routing, destroy, http-delete

问题是下面的代码

```
<%= button_to t('.delete'), @post, :method => :delete, :class => :destroy %> 
```

我的 Post 模型有许多依赖于删除的关系。但是，上面的代码只会删除帖子，保持其关系不变。问题是方法 delete 和 destroy 不同，因为方法 delete 不实例化对象。

所以我需要使用“销毁”而不是“删除”我的帖子。

`<%= button_to t('.delete'), @post, :method => :destroy %>`给我路由错误。

*没有路线匹配 [POST] "/posts/2"*

`<%= button_to t('.delete'), @post, Post.destroy(@post) %>`删除帖子而不单击按钮。

谁能帮我解决这个问题？

**更新：**

*应用程序.js*

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require bootstrap-modal
//= require bootstrap-typeahead
//= require_tree . 
```

*耙路线*

```
DELETE (/:locale)/posts/:id(.:format)                        posts#destroy 
```

*后模型*

```
has_many :tag_links, :dependent => :destroy
has_many :tags, :through => :tag_links 
```

*标记模型*

```
has_many :tag_links, :dependent => :destroy
has_many :posts, :through => :tag_links 
```

**问题：** 当我删除一个帖子时，所有的 tag_links 都被破坏了，但标签仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:51:34.737

`:method => :delete`表示**HTTP METHOD DELETE**`delete` ，与活动记录的方法无关。

您需要检查模型的代码，是否错过了`:dependent => :destroy`关系的选项？

例如，如果帖子有很多评论，那么它应该是：

```
has_many :comments, :dependent => :destroy 
```

当然，在您的控制器中，您需要使用`@post.destroy`而不是`@post.delete`.

# java - Java 菜单循环问题；程序循环太快？

> ID：13784521
> 
> 赞同：0
> 
> 时间：2012-12-09T04:02:19.337
> 
> 标签：java, loops, menu

我正在做一个任务，我必须编写一个程序来加密和解密凯撒密码。我遇到的问题不是加密或解密，而是另一个要求，即我必须提供一个菜单，以便用户可以选择加密、解密或退出。此外，程序应该一直提示用户，直到用户选择退出。到目前为止，我的代码是：

```
import java.util.*;
public class CaeserShiftTester
{
    public static void main (String[] args)
    {
        Scanner in = new Scanner(System.in);
        String choice = "";

        while (!choice.equalsIgnoreCase("C"))
        {

        System.out.println("\nPlease select an option");
        System.out.println("[A] Encrypt Code");
        System.out.println("[B] Decrypt Code");
        System.out.println("[C] Quit");

        choice = in.next();

        if(choice.equalsIgnoreCase("A"))
        {
            System.out.println("Please enter your key:");

            final int KEY = in.nextInt();
            System.out.println(CaeserShiftEncryption.shiftAlphabet(KEY));

            System.out.println("\nPlease enter your message:");
            String message = in.nextLine();

            System.out.println(CaeserShiftEncryption.encryptCode(message,KEY));

        }

        if(choice.equalsIgnoreCase("C"))
        {
            System.out.println();
        }
    }

    }

} 
```

我的问题是，在屏幕上打印出“新字母”之后，程序会循环回到最开始，要求用户选择 a、b 或 c。用户永远没有机会输入要加密的消息。不幸的是，我需要打印出生成的新字母表，我想不出这里可能有什么问题。我希望你们能帮助我。

此外， shiftAlphabet 和 encryptCode 方法都是功能齐全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:37:25.537

看看这个网站：[http ://www.java-made-easy.com/java-scanner.html](http://www.java-made-easy.com/java-scanner.html)

特别

> 不要尝试使用 nextLine() 扫描文本；在使用 nextInt() 和相同的扫描仪之后！它不适用于 Java Scanner，许多 Java 开发人员选择只使用另一个 Scanner 来处理整数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:04:57.517

当`Scanner`混合不同类型的扫描然后将相同的 Scanner 实例与`nextLine`.

当您遇到此类问题时，请尝试创建一个新的 Scanner 实例。一个简单的解决方法是让一个扫描仪用于使用`nextLine`，另一个用于其他一切。

过去我在使用扫描仪时遇到过问题，`next`而`nextLine`对我来说，解决方法就是坚持只使用`nextLine`.

# python - 在这种情况下，文件处理如何工作？

> ID：13784534
> 
> 赞同：0
> 
> 时间：2012-12-09T04:05:03.523
> 
> 标签：python

“地址文件”

```
100 Main Street 
23  Spring Park Road 
2012 Sunny Lane 
4 Martin Luther King Drive 
```

“地址列表”

```
 [['100', 'Main', 'Street'],
 ['23', 'Spring Park', 'Road'], 
 ['2012', 'Sunny', 'Lane'],
 ['4', 'Martin Luther King', 'Drive']]

numbers_file = open("address_file.txt", "r")
def load_addresses(numbers_file):
    addresses = [] # <-- Create a list for sublist
    for line in numbers_file:
        address = [] # <-- Create a sublist 
        parts = line.split() # <-- split into lists by whitespace
        address.append(parts[0]) # <--- I know this will take first elements of the            lists and appended (back of the list) to sublist. 
        name = '' # <--- name to attach such as 'Spring' 'Park' into 'Spring'
        for i in range(1, len(parts) - 1): # <--- Why is the range like this? is it because we ignore first element since its already in good form and since its index we -1?
            name += parts[i] + ' ' # <--- ??
            address.append(name.strip()) # <--- I guess this is to wipe out whitespace front and back 
            address.append(parts[-1]) # <---???
            addresses.append(address) # <--- append the sublist into list

    return addresses 
```

我放在`???`它旁边的是令人困惑的部分。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:14:19.020

```
def line_split(line):
    ls = line.split()
    return [ls[0],' '.join(ls[1:-1]), ls[-1]]

with open(datafile) as fin:
    address_list = [ line_split(line) for line in fin ]
    #address_list = map(line_split,fin) # would also work too. 
```

解释问题标记的行：

```
for i in range(1, len(parts) - 1): 
```

这会遍历列表中的索引，但会跳过第一个和最后一个索引。一种更惯用的方法是：

```
for part in parts[1:-1]: 
```

然后您将在循环中稍后替换`parts[i]`为。`part`

```
name += parts[i] + ' ' # <--- ?? 
```

这需要`name`并添加`parts[i]`到它和一个`' '`. 换句话说，它与以下任何内容相同：

```
name = name + parts[i] + ' '
name = "%s%s "%(name,parts[i])
name = "{0}{1} ".format(name,parts[i]) 
```

和行：

```
address.append(parts[-1]) # <---??? 
```

将部件列表的最后一部分附加到`address`列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:46:01.420

也许这会有所帮助：

```
>>> line = '100 Main Street'
>>> parts = line.split()
>>> name = ''
>>> len(parts)-1
2
>>> for i in range(1,2):
...    print parts[i] + ' '
...    print parts[-1]
...
Main # <-- there is an extra space here after 'Main'
Street 
```

# python - 当字符串包含非 UTF8 字符时，如何在 Python/Windows 中读取 JSON 字符串？

> ID：13784539
> 
> 赞同：0
> 
> 时间：2012-12-09T04:06:02.460
> 
> 标签：python, windows, json, unicode

我想我需要调用 json.loads() 并将字符编码设置为 utf-8 以外的东西，我理解这是默认设置。

有人可以告诉我在哪里可以找到如何做到这一点吗？我用谷歌搜索过，但我迷失在技术方面，例如 JSON RFC。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:09:20.580

除非我从你的问题中遗漏了什么：http: [//docs.python.org/2/library/json.html#json.loads](http://docs.python.org/2/library/json.html#json.loads) 第二个参数`loads`是编码的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:09:54.707

它在[文档](http://docs.python.org/2/library/json.html#json.loads)中是正确的：

> 如果 s 是 str 实例并且使用基于 ASCII 的编码而不是 UTF-8（例如 latin-1）进行编码，则必须指定适当的编码名称。

所以使用`encoding`参数 to `loads`。

# java - 如何计算存储 N 位所需的长整数（64 位）数？

> ID：13784540
> 
> 赞同：0
> 
> 时间：2012-12-09T04:07:10.997
> 
> 标签：java, algorithm, bit-manipulation, bitwise-operators

好吧，我可以通过逻辑来做到这一点，但我敢打赌，有一个数学运算或表达式可以做到这一点。一个存在吗？如果是，那是什么？

这是算法：

```
private int calcNumberOfLongs(int size) {
    if (size % 64 == 0) {
        return size / 64;
    } else {
        return size / 64 + 1;
    }
} 
```

* * *

让我清楚我想要什么：

对于 150 位，我需要三个 64 位长。两个当然只给我 128 位。所以这是第一个计算。

第二个计算，这个更重要，因为它将一直执行，是从位位置到长。例如：

```
bit 5 -> first long
bit 64 -> first long
bit 65 -> second long
bit 140 -> third long 
```

获取此信息的数学表达式和/或按位运算是什么？

* * *

好的，从下面的答案看起来从位到长，我们只使用：

多头仓位 = 位仓位 / 64

续篇在这里：[当二的幂时如何将除法转换为按位移位？](https://stackoverflow.com/questions/13784685/how-to-turn-a-division-into-a-bitwise-shift-when-power-of-two)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T04:12:08.077

我不相信有一个内置函数可以做到这一点，尽管您可以将代码简化为：

```
return (size + 63) / 64; 
```

# google-app-engine - 将 JAXB 与 GAE 一起使用

> ID：13784547
> 
> 赞同：2
> 
> 时间：2012-12-09T04:09:12.810
> 
> 标签：google-app-engine, exception, jar, jaxb

搜索了很多帖子，仍然没有足够的信息。

我收到以下错误：

```
WARNING: Nested in java.lang.ExceptionInInitializerError:
java.security.AccessControlException: access denied (java.lang.RuntimePermission accessClassInPackage.com.sun.xml.internal.bind.marshaller)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:549)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:289)
    at java.lang.SecurityManager.checkPackageAccess(SecurityManager.java:1512)
    at java.lang.ClassLoader$1.run(ClassLoader.java:330) 
```

问题：

如何在 GAE 中使用 JAXB。我正在使用使用 JAXB 的第三方库

我应该包括哪些罐子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:02:35.433

我想我遇到了类似的问题，并且能够通过将 <property name="com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize" value="true" /> 添加到 appengine- 中的系统属性来解决它- web.xml 文件。

# c - 在 C 中读取二进制文件

> ID：13784549
> 
> 赞同：-3
> 
> 时间：2012-12-09T04:09:26.923
> 
> 标签：c, file, io, binary

假设用这个函数原型编写了一个二进制文件（需要打开才能读取）：

```
void writeBinaryFile ( char *fileName , char *comment , int numberOfDoubles , double *doubles , int numberOfInts , int *ints ) 
```

*（有关此功能的更多详细信息可以在下面的粘贴中找到）*

...

我的书面代码只获取 .bin 文件的第一个字母......

这是我的功能：

```
void readBinaryFile(char *fileName)
{
        FILE *fp;
        char *ptr;
        double *ptr1;
        int *ptr2;
        ptr=(char*)malloc(sizeof(char)*5);
        ptr1=(double*)malloc(sizeof(double)*6);
        ptr2=(int*)malloc(sizeof(int)*6);

        fp=fopen ( fileName , "rb" ) ;
        fread(ptr,sizeof(char),11,fp);
        while(*ptr!='\0')
        {
            printf("%c",*ptr);
            ptr++;

        }
        fclose(fp);
} 
```

我在这里想念什么？我需要阅读的不仅仅是 .bin 文件中的*第一个*字符。

一如既往地感谢您的帮助。谢谢！

如果有人需要有条理的完整代码，这里是粘贴：

[http://pastebin.com/66jZwfUD](http://pastebin.com/66jZwfUD)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T04:19:26.143

```
void readBinaryFile(char *fileName)
{
    FILE *fp;
    char *ptr;
    double *ptr1;
    int *ptr2;

    ptr=(char*)malloc(sizeof(char)*5);
    ptr1=(double*)malloc(sizeof(double)*6);
    ptr2=(int*)malloc(sizeof(int)*6); 
```

不要`malloc`在 C 中转换返回值。它隐藏了错误。

```
 fp=fopen ( fileName , "rb" ) ; 
```

您需要在此处检查错误。

```
 fread(ptr,sizeof(char),11,fp); 
```

您为 分配了 5 个字节`ptr`，现在您正在读取 11。您还应该检查 的返回值`fread`。

```
 while(*ptr!='\0')
    {
        printf("%c",*ptr);
        ptr++;

    } 
```

没有什么可以阻止这个循环在分配空间的末尾运行。

```
 fclose(fp);
} 
```

现在，您分配的所有内存都已泄漏，并且您读入的所有数据都将丢失，因为当您返回时指针超出范围。

# javascript - document.getElementsByClassName() not working like getElementById does?

> ID：13784550
> 
> 赞同：1
> 
> 时间：2012-12-09T04:09:42.507
> 
> 标签：javascript, firefox, greasemonkey

> **Possible Duplicate:**
> [Can getElementsByClassName change style?](https://stackoverflow.com/questions/10693845/can-getelementsbyclassname-change-style)

I am trying to "fix" the "new" YouTube using Greasemonkey, I've been getting things to work as they should when it's with ID's, however I have been unable to modify anything with a class, it appears I am unable to select it or whatever anyways.

I have been trying to use:

```
document.getElementsByClassName("video-extras-sparkbar-likes").style.height='10px'; 
```

However it isn't working. :\

I'm not very familiar with Greasemonkey and what not, so would there be a reason why though my browser supports this, Greasemonkey may not?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T06:35:41.840

You might need to loop through the results, like this:

```
var divs = document.getElementsByClassName('video-extras-sparkbar-likes');
for(var i=0; i < divs.length; i++) { 
  divs[i].style.height = '10px';
} 
```

# node.js - 如何从 npm (Nodejs 0.8.x) 安装 node-gitteh 模块

> ID：13784551
> 
> 赞同：0
> 
> 时间：2012-12-09T04:09:45.603
> 
> 标签：node.js, ubuntu, gitolite

我在我的 Linux 中安装了 NodeJS 0.8.12（Ubuntu 11.10 系统，我听说有 node 的模块可以使用 gitolite 访问我的项目托管（node-gitteh 0.17.0）。我尝试通过以下方式安装此模块：

```
npm install gitteh 
```

但它给了我错误消息，我尝试从源代码构建[libgit2](http://libgit2.github.com/)，然后再次尝试

```
npm install gitteh 
```

它仍然给了我一个错误，有没有人成功做到这一点..？请与我分享...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T04:18:29.247

我使用以下叉子安装了 gitteh：

```
 $ npm install git://github.com/jmendeth/node-gitteh.git 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:15:38.023

我的第一个猜测是您没有安装必要的 ubuntu 包来编译本机代码。尝试`sudo apt-get install build-essential`然后重试您的`npm install gitteh`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:39:34.567

我想我有同样的问题。我在 npm install 时收到此错误：

```
Tell the author that this fails on your system:
npm ERR!     node-waf configure --use-bundled-libgit2 
```

[这](https://github.com/libgit2/node-gitteh/issues/28)表明与 gitteh 捆绑的 libgit2 版本不兼容（从 master 中提取而不是已知的工作修订版）。但是，使用包的分叉版本的建议修复对我不起作用。还有谁？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T04:12:31.707

非常感谢，最后我可以在我的 nodejs 和 ubuntu 12.04 上安装 node-gitteh。我忘记安装依赖包 CMake

```
sudo apt-get install cmake 
```

# uiview - 切换选项卡后iOS重新启动动画

> ID：13784552
> 
> 赞同：2
> 
> 时间：2012-12-09T04:09:53.570
> 
> 标签：uiview, ios6, core-animation

在[这篇文章](https://stackoverflow.com/questions/4686442/)中作者说我们可以在切换标签后重新启动动画`viewWillAppear`。

我打电话给我，`startAnimation`但仍然失败。`viewWillAppear``viewDidAppear`

以下是我的代码的一部分。

```
- (void)startAnimation {
    [UIView setAnimationsEnabled:YES];
    [UIView animateWithDuration:0.5f
            delay:0.0f
            options:UIViewAnimationOptionAutoreverse|UIViewAnimationOptionRepeat
            animations:^(void){
                self.foreground.transform = CGAffineTransformMakeTranslation(0.0f, 5.0f);
            }
            completion:nil];
} 
```

`startAnimation`动画在第一次调用in时效果很好`viewDidLoad`，但在切换到其他选项卡后它就不再起作用了。

应用程序从后台重新启动后它也不起作用，即使我已经注册了`UIApplicationWillEnterForegroundNotification`for的观察者`startAnimation`。

请帮助我，我是iOS开发的新手，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:40:43.003

viewDidLoad 方法仅在您的视图控制器首次加载时被调用。

如果你想让你的动画在你从其他视图控制器返回到这个视图控制器时运行，你应该调用 viewWillAppear 中的动画方法，而不是 viewDidLoad。

要使动画返回到之前的值，然后再次动画，您首先将视图的变换设置为标识（将其设置为起点），然后调用您的 animationWithDuration 方法。

您可能会发现为视图的 frame.origin 或 center 属性设置动画比更改变换更容易。当您将平移与旋转、缩放变化等结合使用时，更改变换会变得复杂。此外，当变换属性不是 == 恒等变换时，框架属性不再有效。

# functional-programming - Common Lisp 中的评估

> ID：13784555
> 
> 赞同：3
> 
> 时间：2012-12-09T04:10:20.793
> 
> 标签：functional-programming, lisp, eval, common-lisp

我是 lisp 的新手，这是我的问题：
我有一个类似的列表

```
((a ((length 3) (size 5))) (b ((length 5) (size 7))))... 
```

上面的列表只是一个示例。
我想要的是一个`find`可以像数据库查询一样工作的函数，例如

```
(find (and (gt length 4) (lt size 8))) 
```

在这种情况下，上述功能应该`b`适合我。请注意，此函数的条件参数可以扩展为`and`or `or`...
我做了一些研究并且知道`eval`可以以某种方式帮助我解决这个问题，但我不确定它是如何工作的。
有人可以给我一个例子或给我一些提示吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T06:44:24.847

我不会为此使用 eval 。但这样做相对容易。

您有一系列项目：

```
((a ((length 3) (size 5)))
 (b ((length 5) (size 7)))) 
```

您有一个测试描述，如下所示：

```
(and (> length 4) (< size 8)) 
```

现在你想看看是否

```
(my-equal '(and (> length 4) (< size 8)) '((length 5) (size 7)) 
```

是真的。

所以任务是写`MY-EQUAL`。通常我会把它写成一个递归函数。

但是如果你想用 来做`EVAL`，它变得相对容易：

你想评估这个表格：

```
(let ((length 5) (size 7))
  (and (> length 4) (< size 8))) 
```

现在应该很容易编写 MY-EQUAL。

您可以将其用作

```
(find term sequence :test #'my-equal :key #'second) 
```

请注意，从流中读取的任意代码的评估存在安全风险。

**奖金**

我们可以用`COMPILE`EVAL 代替：

```
(defun lookup (v bindings)
  (let ((result (assoc v bindings)))
    (if result
        (second result)
      (error "variable ~a not known" v))))

(defparameter *query-operators* '(and or > < =))

(defun generate-query-code (q bindings)
  (cond ((numberp q) q)
        ((symbolp q) `(lookup ',q ,bindings))
        ((consp q)
         (destructuring-bind (op . args)
             q
           (if (member op *query-operators*)
               `(,op ,@(mapcar (lambda (arg)
                                 (generate-query-code arg bindings))
                               args))
             (error "Unknown op ~a" op))))))

(defun compile-query (q)
  (compile nil
           (let* ((bindings (gensym "bindings"))
                  (code (generate-query-code q bindings)))
             `(lambda (,bindings)
                ,code))))

(defun find-query (query descriptions)
  (find-if (compile-query query)
           descriptions
           :key #'second)) 
```

例子：

```
CL-USER 39 > (find-query '(and (> length 4) (< size 8))
                         '((a ((length 3) (size 5)))
                           (b ((length 5) (size 7)))))
(B ((LENGTH 5) (SIZE 7))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T09:12:12.563

这篇博文看起来与您的问题有关：http: [//xach.livejournal.com/131456.html](http://xach.livejournal.com/131456.html)

`length`（你必须用你的每条记录的和和实际值之间的小映射来扩展它`size`，所以可以在你的每条记录上调用闭包链）

# c# - 在控制台应用程序中创建图像或位图 - 似乎找不到 System.Drawing？

> ID：13784559
> 
> 赞同：10
> 
> 时间：2012-12-09T04:10:31.510
> 
> 标签：c#, bitmap, console-application

我正在尝试从相机比特流创建图像或位图，我将（希望）通过 websocket 传递给浏览器。我正在构建的应用程序是一个控制台应用程序，因为我认为这个应用程序不需要 GUI。现在我无法创建/访问 Image 和 Bitmap 类 - System.Drawing 似乎不存在，我不知道为什么。当我尝试时，`using System.Drawing`我收到错误`The type or namespace name 'Drawing' does not exist in the namespace 'System' (are you missing an assembly reference?)`在控制台应用程序中创建位图的最佳方法是什么，我似乎无法加载 System.Drawing 是否有原因？

代码：

```
private void Kinect_ColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
{
    using (ColorImageFrame frame = e.OpenColorImageFrame())
    {
        if (frame != null)
        {
            byte[] pixelData = new byte[frame.PixelDataLength];
            frame.CopyPixelDataTo(pixelData);
            //how do we create a bitmap here and pass it off to chrome?

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-09T04:16:01.907

您必须在项目中添加对 system.Drawing.Dll 的引用。

右键单击项目，添加引用并找到 System.Drawing.DLL 并添加引用。

编辑：您将在 Assemblies->Framework->System.Drawing 下找到它

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T04:13:22.223

将 System.Drawing.dll 作为参考程序集添加到您的项目中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-11T09:21:16.330

包括 System.Drawing.dll 到参考 1) 你可以从[http://www.dllme.com/dll/download/7139/System.Drawing.dll下载它](http://www.dllme.com/dll/download/7139/System.Drawing.dll)

# iphone - 如何通过iphone中的sqlite获取路径来显示文档目录中保存的图像

> ID：13784560
> 
> 赞同：1
> 
> 时间：2012-12-09T04:10:35.990
> 
> 标签：iphone, ios, xcode, ipad, uiimageview

我已将图像保存在文档目录中并成功将其路径保存在数据库中，现在我不知道如何在我的图像视图中显示该图像？

我应该使用查询来仅选择路径吗？

它会自动从目录中选择图像吗？

或者我应该在我想要显示图像的视图中使用代码来加载图像。

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *strimagename;
    strimagename=[NSString stringWithFormat:@"Test.jpg"];
    thumbFilePath = [documentsDirectory stringByAppendingPathComponent:strimagename];
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    NSLog(@"image path: %@ ", [MyCommonFunctions saveImageInDocuments:image]); 
    imageSelect.image = image;
    [self dismissModalViewControllerAnimated:YES];
     NSLog(@"image saved %@",image);
} 
```

上面的代码用于保存。

* * *

通过使用此代码，我得到此图像的日志消息：

```
2012-12-08 20:40:30.450 loginApp[757:c07] CONNECTION SUCCESSFUL WITH DB 
2012-12-08 20:41:05.371 loginApp[757:c07] image path: 08412012084105.png 
2012-12-08 20:41:05.378 loginApp[757:c07] image saved <UIImage: 0x926da00> 
```

成功查询：

```
insert into login(Name,Email,Password,DOB,image) values('hamesh', 'hamesh@hamesh.com','hamesh','2012-12-09 04:40:57 +0000','<UIImageView: 0x926d8f0; frame = (139 219; 133 115); opaque = NO; autoresize = RM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x926d950>>') 
```

在这里我正在使用构建 Sql 的代码，在图像中我应该提供属性 NSString 吗？还是图像视图？

```
- (IBAction)registerbtn:(id)sender {
    DBHandler *db =[[DBHandler alloc]init];

        if([self validateForm])
        {
            if([self validateEmailWithString:txtEmail.text])
            {
                if ([db authenticateRegistration:txtName.text andEmail:txtEmail.text andPassword:txtPassword.text andDob:txtDob.text andImage:imageSelect])
                {
                    UIAlertView *loginalert = [[UIAlertView alloc] initWithTitle:@"  Congrats" message:@"SignUp Success" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                    [loginalert show];
                                }
                else
                { 
 UIAlertView *loginalert = [[UIAlertView alloc] initWithTitle:@"  Try Again!" message:@"SignUp Failure" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                    [loginalert show];
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:29:54.823

可以使用`imageWithContentsOfFile`类方法`UIImage`。

```
UIImage *image = [UIImage imageWithContentsOfFile:filePathFromDB]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:40:59.747

查看包含陈述的更新问题，您的`NSLog`似乎是正确的。但是您还向我们展示了您正在生成的 SQL，显然它没有将它用于最后一个参数，而是您显然不小心抓取了一个. 查看构建该 SQL 的代码。如果解决方案没有突然出现，请使用构建 SQL 的代码更新您的问题。`NSLog``[MyCommonFunctions saveImageInDocuments:image]``[MyCommonFunctions saveImageInDocuments:image]``UIImageView`

# java - Java 映射数据结构

> ID：13784565
> 
> 赞同：4
> 
> 时间：2012-12-09T04:11:27.960
> 
> 标签：java, data-structures, map, mapping

> **可能重复：**
> [Java Hashmap：如何从值中获取键？](https://stackoverflow.com/questions/1383797/java-hashmap-how-to-get-key-from-value)

我正在寻找一种 Java 数据结构（某种映射），我可以在其中对键和值执行查找。例如，假设我在一组字符串和整数之间有一个一对一的映射。调用此对象映射器。我希望能够执行以下操作：

1.  `mapper.getAssociated(value)`：这将返回密钥
2.  `mapper.getAssociated(key)`：这将返回值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T04:15:05.000

我认为您正在寻找 google [guava BiMap](http://java.dzone.com/articles/guavas-bidirectional-maps) (或) commons [BidiMap](https://discursive.atlassian.net/wiki/pages/viewpage.action?pageId=360750)。

例子：

```
BidiMap bidiMap = new DualHashBidiMap( );
bidiMap.put( "il", "Illinois" );
bidiMap.put( "az", "Arizona" );
bidiMap.put( "va", "Virginia" );
// Retrieve the key with a value via the inverse map
String vaAbbreviation = bidiMap.inverseBidiMap( ).get( "Virginia" );

// Retrieve the value from the key
String illinoisName = bidiMap.get( "il" ); 
```

[有关BiMap 示例](http://marxsoftware.blogspot.com/2011/10/guavas-bidirectional-maps.html)，请参阅此帖子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T04:14:54.623

您可能会考虑使用[Guava](http://guava-libraries.googlecode.com)接口的实现[`BiMap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)，例如[`HashBiMap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/HashBiMap.html). 从文档中：

> 双映射（或“双向映射”）是一种映射，它保留其值的唯一性以及其键的唯一性。此约束使 bimap 能够支持“反向视图”，这是另一个 bimap，包含与此 bimap 相同的条目，但具有相反的键和值。

所以给定一个`BiMap<Foo, Bar>`你可以调用[`inverse()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html#inverse%28%29)来返回一个`BiMap<Bar, Foo>`视图。

# malloc - 如何获取jemalloc的版本

> ID：13784567
> 
> 赞同：0
> 
> 时间：2012-12-09T04:11:54.040
> 
> 标签：malloc

我使用以下代码，但没有得到正确的 jemalloc 版本字符串。

```
size_t size = 1000;
char *ptr = (char *) malloc(size);
mallctl("version", ptr, &size, NULL, 0); 
```

我刚得到一个 4 位大小的字符串，我打印出来发现不是版本字符串。我认为问题在于版本字符串是 const char*。但是如果我用 const char* 调用，我应该填写什么大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T04:28:45.363

当然，您应该填写 a 的大小`const char *`。

“版本”参数是 a `const char *`，在您的平台上是 4 个字节。此函数不获取版本字符串，但实际上获取指向版本字符串的指针。您不需要为版本分配空间，只需一个指针。这是工作示例代码：

```
#include "stdio.h"
#include "jemalloc/jemalloc.h"

int main(void)
{
    const char *j;
    size_t s = sizeof(j);
    mallctl("version", &j,  &s, NULL, 0);
    printf("%s\n", j);
} 
```

# batch-file - 如果不存在使用 DOS，则在文本文件末尾插入行

> ID：13784572
> 
> 赞同：0
> 
> 时间：2012-12-09T04:12:41.157
> 
> 标签：batch-file, insert, dos, lines

我需要批处理 file.bat 来做

我有 filename.txt 的内容：

```
blah blah
....
Miss Phuong
I love you all. Miss Phuong
End of file 
```

如果该行不存在，我想在末尾插入以下行：

```
I love you all
Miss Phuong 
```

运行后是：

```
blah blah
....
Miss Phuong
I love you all. Miss Phuong
End of file
I love you all 
```

由于存在线路，因此不会添加“Miss Phuong”。将添加“我爱你们所有人”，因为字符串“我爱你们所有人”存在，但该行是“我爱你们所有人。Phuong 小姐”

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T10:00:50.463

我认为你需要这样的东西：

```
@echo off

findstr /x /c:"I love you all" text.txt >nul || echo I love you all>> text.txt
findstr /x /c:"Miss Phuong" text.txt >nul || echo Miss Phuong>> text.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T10:05:13.947

用于`FOR /F`遍历文件的行。如果该值不在您找到的每一行中，您可以使用 `echo Miss Phuong >> YourTextFile.txt 添加它

# assembly - 如何处理装配中的动画循环

> ID：13784579
> 
> 赞同：0
> 
> 时间：2012-12-09T04:14:35.713
> 
> 标签：assembly

我正在组装一个基于文本的动画，其中需要大量的屏幕刷新以使其尽可能平滑并模拟弹跳物理。我使用`int 1ah`调用来控制屏幕刷新延迟，并使形状看起来好像在达到峰值时减速并在回落时加速。在每个`CALL CLEAR`.

我编写了处理移动形状代码的代码，它按预期工作。当我添加在屏幕上放置固定横幅的附加代码时，它会在某个点后锁定 dosbox。

以下代码的八个变体包含在一个更大的循环中。它运行良好，直到我添加`;PRINT BANNER`到第七个内循环。实际上，它`LEA`在下面的循环中的第一个中断，在没有横幅的情况下测试时不存在。

```
 .REPEAT
       LEA     SI,SHAPE
       MOV     DH,ROW
       MOV     DL,COL
       CALL    CLEAR
       CALL    PUTSHAPE
       ;PRINT BANNER
       LEA     SI,BANNER            
       MOV     DH,25
       MOV     DL,39
       CALL    PUTSHAPE
       ;END BANNER
       MOV     TIME, 1
       MOV     AH, 0
       INT     1AH  
       ADD     TIME, DX
       .WHILE    DX < TIME
            MOV       AH, 0
            INT       1AH
       .ENDW                                       
       ADD  COL, 2
       SUB  ROW, 4
       DEC  D7
       MOV  CX, D7
       MOV  TIME, 0
  .UNTILCXZ 
```

我在这里期待太多太快了吗？我尝试重新安排代码以`LEA`在延迟后调用第二个代码，并针对与基于文本的动画不完全相关的问题提出了许多其他建议，并且肯定使用了我无法遵循的指令。我是一个认真的汇编初学者，从一本使用自定义库的书中学习。我在从命令提示符运行的 32 位 Win 7 Pro 上尝试了该程序，并收到 NTVDM.EXE 错误。关于代码明显问题的任何想法或见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:49:36.047

我的实现的问题是循环`INT 1AH`（时钟）调用。当您不允许它有时间做它的事情时，Windows 会抱怨。

**对此的解决方案**是提供一个外部过程，该过程调用`INT 1AH`在寄存器中返回代码值。然后将其存储在一个值中以确保它不会被过程调用破坏。最后根据循环中包含的外部过程调用的返回值检查它......

```
 MOV     TIME, 1      ;The value moved into time determines speed
       CALL    DELAY        ;DELAY = INT 1AH call which puts the lower 1/2 
       ADD     TIME, DX     ;of the system clock into DX. Add it to TIME
       .WHILE    DX < TIME
            CALL DELAY      ;Loops call to the DELAY procedure testing DX
       .ENDW                ;against TIME + Original DELAY call 
```

将循环添加到 DELAY.asm 中的另一个子过程也可以。

# objective-c - 用于模型和 UX 设计师、iOS、流程的设计工作室

> ID：13784586
> 
> 赞同：0
> 
> 时间：2012-12-09T04:15:09.450
> 
> 标签：objective-c, ios, user-experience

我刚在一家初创公司找到了一份新工作，他们有一个设计工作室，可以在 Photoshop 中创建模型，然后将它们发送给我（我是 UX 设计师）。现在他们开始和我谈论定义每个 png 和 jpeg 以及所有其他模型的尺寸需要多少像素的过程，并在我的机器上安装 Photoshop，这样我就可以在打开 psd 文件时弄清楚尺寸。

对我来说，设计工作室给我一些资产并提供每个资产及其尺寸的文件听起来很正常（例如，这是一个图标，大小是（46x80），而不是我在 psd 中打开资产并计算那是我自己。

我想知道其他公司是做什么的？模型设计工作室和将这些资产转换为实际屏幕的实际 UX 程序员之间的流程是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:30:45.570

没有“标准”。通常最好让设计师提供单独的文件，因为他们是 Photoshop 专家，并且可能会随着时间的推移调整图像。您可能必须向他们提供包含描述、格式、大小和变体（启用、禁用、活动）的文件列表。我们询问视网膜尺寸，然后有一个工具来生成非视网膜尺寸。

我们喜欢使用 Google 电子表格作为文件列表，使用 DropBox 进行实际传输。

话虽如此，您应该拥有 Photoshop 并学习使用它，因为有时图形需要调整，而您不想等待其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:20:34.943

With the company I work at (and in my freelance work) I'm rarely given the exact sizing of any assets, unless there's a specific requirement.

For the most part, when building a new site (or amending an existing one), I don't find out the sizes of anything until I open up Photoshop and start cropping.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T02:12:33.917

那么究竟是谁在设计体验呢？编码是你的工作吗？或者，你是应该提出线框然后他们根据它进行视觉设计的人吗？

# ruby - 从块返回值而不从方法返回

> ID：13784587
> 
> 赞同：2
> 
> 时间：2012-12-09T04:15:25.533
> 
> 标签：ruby, block, next

我有一堂课`Test`：

```
class Test 
  attr_accessor :data
  def initialize
    @data = [0, 1, 2, 3]
  end
  def map
    @data.map!{|i| i = yield i }
  end
end 
```

我尝试像这样使用它：

```
a = Test.new

a.map{|i|
  if(i==2)
    i+=1
    break i  #<--- -This line is the focus
  else
    1
  end
}

puts a.data 
```

我期望的输出是`[1, 1, 3, 3]`. 相反，我得到`[1, 1, 2, 3]`. 块的最后一次迭代`map`不返回修改后的`i`.

我替换`break i`为`next i`. 这按我的预期执行，并产生了输出`[1, 1, 3, 1]`。

如何修改这段代码（或者，理想情况下，我在第二个代码片段中指出的行）以便获得输出`[1, 1, 3, 3]`？换句话说，我怎样才能使块完成，但将最后一个值传回`map`？是否有一种简洁易读的方式来做到这一点（例如，切换布尔标志`break_now`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:27:35.607

我假设您问的是如何离开一个块并使用计算出的最后一个值，而不是如何计算一组特定的数字；对于后者，可能有一个聪明的单线。

像这样的东西怎么样：

```
class Test
  attr_accessor :data

  def initialize
    @data = [0, 1, 2, 3]
  end

  def modify
    @data.map! {|i| yield i }
  end
end

a = Test.new
a.modify do |i|
  break i if @done
  @done = i == 2
  @done ? (i + 1) : 1
end

puts a.data 
```

另一个想法`#map`是 Ruby 中具有特定接口的重要方法。在您的示例中，您通过修改`Test`. 出于这个原因，我改用了这个名字`#modify`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:49:09.080

通常，您可以通过适当地修改产生的值来解决这个问题。例如，如果您的数组由字符串而不是 Fixnums 组成：

```
class Test
  attr_accessor :data

  def initialize
    @data = %w{a b c d}
  end

  def map
    @data.map! { |i| yield i }
  end
end

a = Test.new
a.map do |i|
  if i == 'c'
    i.next!
    break
  else
    'b'
  end
end

p a.data   #=> ["b", "b", "d", "d"] 
```

您的示例的问题[是](http://www.ruby-doc.org/core-1.9.3/Fixnum.html)：

> Fixnum 对象具有直接的价值。这意味着当它们被分配或作为参数传递时，传递的是实际对象，而不是对该对象的引用。赋值不对 Fixnum 对象起别名。对于任何给定的整数值，实际上只有一个 Fixnum 对象实例……</p>

Fixnums 不能就地更改，因此您`i += 1`在下部块中的表达式不会影响`i`上部块中的值。这就是为什么你`2`在你的例子中但`d`在我的例子中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-09T04:23:08.100

你必须这样做：

```
a.map{ |i| (i % 2 == 0) ? i + 1 : i } 
```

当您使用地图功能时，您不会更改“a”变量，如果您想更改“a”变量，请执行以下操作：

```
a.map!{ |i| (i % 2 == 0) ? i + 1 : i } 
```

'i' 的新值是块返回的值，所以不要这样做：

```
a.map{|i| i = 1 } 
```

因为如果你这样做：

```
a.map{|i| i = 1; 5 } 
```

结果将是：

```
 [5, 5, 5, 5] 
```

# c++ - 魔方，我无法将行、列和对角线相加

> ID：13784594
> 
> 赞同：0
> 
> 时间：2012-12-09T04:16:40.150
> 
> 标签：c++, visual-c++, magic-square

我需要求和并输出行、列和主对角线。有人可以告诉我我做错了什么吗？这是我被赋予使用的代码，但我似乎无法让它输出我的总和。我在下面的代码中添加了一条评论，我相信我的问题存在，它从哪里开始求和，从哪里停止。我将不胜感激任何帮助，因为我无法自己解决这个问题。输出应该是一个 3 x 3 矩阵，其中第四行和第四列中的行、列和对角线之和等于 15。我的输出不是对行、列和对角线求和。

```
#include <iostream>
#include <fstream>
#include <iomanip>

using namespace std;

int main()
{

int n = 3;
int row, col, r, c, i, j, k, diag=0;
int magic[19][19];
ofstream fout;
fout.open("p4-out.txt");

for(j=0 ; j<n+1 ; j++){
    for(k=0 ; k<n+1 ; k++)
    magic[j][k] = 0;}

row=1; col=(n+1)/2;
magic[row-1][col-1]=1;

for(i=2 ; i<=(n*n) ; i++){
    row-=1; col-=1;
    if(row==0 && col==0){col++; row+=2;}
    else if(row==0) row=n;
    else if(col==0) col=n;
    else if(magic[row-1][col-1]!=0)
    {col++; row+=2;}
    magic[row-1][col-1]=i;}

for(r=0; r<n; r++){                    
    for(c=0; c<n; c++)
    magic[r][n]+=magic[r][c];}

for(c=0; c<n; c++){
    for(r=0; r<n; r++)
    magic[n][c]+=magic[r][c];}

for(r=0; r<n; r++){
    magic[n][n]+=magic[r][r];}

for(r=1; r<(n-1); r++){
    c = n - r + 1;
    diag+=magic[r][c];}              

for(r=0; r<(n+1) ; r++){
    fout << endl;
    for(c=0; c<(n+1) ; c++)
    {fout << setw (5) << magic[r][c];}
    fout << endl;}
return 0;
}

                             // This my output.
                      15 <---// I need this 15 to go

        6    1    8   15                       |
                                               |
        7    5    3   15                       |
                                               |
        2    9    4   15                       |
                                               |
 [15]  15   15   15   15                       |
 ^-------------<------------<----------<-------|
 here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:37:34.383

使用正确的索引也会填满您的`sum`行和列，请尝试：

```
 for(r=0; r<n; r++){                       //Where it should start summing
     for(c=0; c<n; c++){
        magic[r][n]+=magic[r][c];}   
  }

 for(c=0; c<n; c++){
     for(r=0; r<n; r++){
        magic[n][c]+=magic[r][c];}
 }  
 for(r=0; r<n; r++){
        magic[n][n]+=magic[r][r];
 }    
 for(r=0; r<n; r++){
        c = n - r + 1;
        diag+=magic[r][c];}              //where it should stop summing 
```

# git - Github 同步失败

> ID：13784596
> 
> 赞同：-2
> 
> 时间：2012-12-09T04:17:03.927
> 
> 标签：git, github, github-for-windows

我是 github 的新手。我有以下描述我的问题的情况。

假设有 X 和 Y 在 github 中使用公共存储库开发一些东西。X 对他的本地文件进行了一些更改，Y 也对他的本地副本进行了更改。

假设我的 Y 提交，X 不能同步，因为他已经进行了本地更改。Github 说先提交 X 更改然后同步。当 X 尝试提交时，Github 会给出一个 HEAD not found 错误或其他东西。

我的问题是 X 和 Y 如何在提交和同步随机发生的情况下一起开发一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T04:36:13.320

[有一本名为Pro Git](http://git-scm.com/book)的优秀免费书籍很好地解释了 Git 的工作原理以及如何使用它。

# salesforce - Apex AddError 到 SObject 字段

> ID：13784599
> 
> 赞同：5
> 
> 时间：2012-12-09T04:17:54.520
> 
> 标签：salesforce, apex-code

有没有人找到一种向 sobject 添加动态字段级错误的方法？

我想做类似的事情

```
mySobjectRec.get('fieldname').addError('my error message'); 
```

我意识到 mySobjectRec.fieldname__c.addError('my error message') 有效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-29T10:57:52.807

不幸的是，这是不可能的。我已经搜索了解决方法，但找不到任何解决方法，SObject 上的 addError 方法使用高度专业化的方法来引用字段，即在方法之前对字段引用进行硬编码。

> 这个方法是高度专业化的，因为字段标识符实际上并不是调用对象——sObject 记录是调用者。该字段仅用于标识应用于显示错误的字段。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T04:32:45.913

怎么样

```
mySobjectRec.getSObject('fieldname').addError('error message'); 
```

我正在看的是：

[http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_sobject.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_sobject.htm)

没试过，不知道行不行，告诉我一声。

# node.js - 如何将使用 grunt 的节点应用程序部署到 heroku

> ID：13784600
> 
> 赞同：58
> 
> 时间：2012-12-09T04:18:04.800
> 
> 标签：node.js, heroku, npm, gruntjs

我正在使用 grunt 和 grunt 插件，例如`grunt-contrib-copy`, `grunt-contrib-mincss`（列为我的应用程序的 npm 依赖项）。

我也不提交所有生成文件所在的`npm_modules`文件夹和文件夹。而且在部署和设置我的服务器（它已经在寻找文件夹）之后`public`，我无法弄清楚如何构建我的应用程序（我有命令）。`grunt build``public`

我看到了一些类似的东西`grunt-heroku-deploy`，但在上传之前提交似乎是个坏主意。也许有一些温和的决定......有什么想法吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-12-10T06:32:38.987

npm 支持`postinstall`可能正是您正在寻找的步骤（以及许多其他步骤）。

当您推送到 heroku 以解决构建依赖项时，node.js heroku buildpack 会运行此命令：

```
$ npm install --production 
```

[https://devcenter.heroku.com/articles/nodejs-support#build-behavior](https://devcenter.heroku.com/articles/nodejs-support#build-behavior)

如果您查看 npm 文档，您可以设置一系列脚本以在任何`npm install`人为您的包运行之前或之后运行。它在 的`scripts`属性中配置`package.json`。该`scripts`属性允许`grunt`在包的生命周期中发生某些事情时运行自定义脚本（包括 ）。

例如，要`grunt`在任何人（包括 Heroku）运行时回显一些文本并运行命令`npm install`，请将其添加到您的`package.json`：

```
{
  ...
  "scripts": {
    "postinstall": "echo postinstall time; ./node_modules/grunt-cli/bin/grunt <your task name>"
  },
  ...
} 
```

[https://npmjs.org/doc/scripts.html](https://npmjs.org/doc/scripts.html)

重要警告：

*   您可能必须更改脚本中 grunt 二进制文件的路径，如果命令未执行`postinstall`，请检查错误输出。`grunt`
*   `grunt`并且必须在您的`grunt-cli`列表中列为 a ，以便由 Heroku 安装。在下面列出它们是不够的，因为 Heroku 不会安装它们。另外，请注意 Heroku 不会将其安装为全局包，因此要在 Heroku 上执行它，您将不得不使用相对路径（正如上面配置的那样）。`dependency``package.json``devDependencies`

如果这不起作用（您可能需要稍微调整一下相对路径），那么您可能需要考虑[为 Heroku 编写自己的自定义 buildpack](https://devcenter.heroku.com/articles/buildpack-api)。

## 更新

从 0.4 开始，`grunt`包不再包含`grunt`二进制文件，它现在是`grunt-cli`包的一部分。答案已更新以反映这一点。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-01-10T23:54:34.223

`slug`当 Heroku Platorm API和`release`功能进入主线时，这看起来将在很大程度上得到解决。此时，您可以在本地（或在 ci 服务器上）构建代码，将其打包并通过 API 调用发送到 heroku，然后从那里发布。

这仍处于测试阶段，仅在 2013 年 12 月 19 日宣布。

[https://devcenter.heroku.com/articles/platform-api-deploying-slugs](https://devcenter.heroku.com/articles/platform-api-deploying-slugs)

我从来没有对有多少人可以将您生成的代码签入 git 或 NPM postinstall hook 感到非常满意。:(

另外，从哲学的角度来看，在发布期间进行构建只是另一个潜在的失败点。

* * *

**只是为了好玩**：由于这还没有最终确定，**这是我放在一起的一个 bash 脚本**，你可以暂时使用它在部署分支上构建你的代码，提交它，将它部署到 heroku，然后删除部署分支。（我真的不是 bash 部署脚本的粉丝，所以我*真的很*期待平台 API 的添加）

```
#!/bin/bash
set -e 

# Delete current deploy branch
git branch -D deploy
# Create new deploy branch based on master
git checkout -b deploy
# Grunt comands to build our site
grunt build:production
# the dist/ directory is in my .gitignore, so forcibly add it
git add -f dist/
git commit -m "Deploying to Heroku"
# Push it up to heroku, the -f ensures that heroku won't complain
git push heroku -f deploy:master
# Switch it back to master
git checkout master 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-02-24T10:33:42.000

Grunt（等人）是一个构建工具，而不是（真的）你应该打包并在生产环境中运行的东西。另一种方法是使用 Grunt 在本地准备项目（或者在 CI 服务器上更好），然后只将构建的文件推送到 Heroku。如前所述，Heroku 将`npm install`在您的应用程序推送后对其进行操作，这应该足以最终准备您的应用程序。

我进行了设置，以便 Grunt 派生/构建的 Heroku 应用程序位于与我的主应用程序源代码存储库完全独立的 Git 存储库中。因此，当我执行`grunt deploy`它时，它会优化并将相关文件复制到 Heroku 存储库，整理它（`git add -A`等）然后`git push heroku master`（或其他）。

如果您的实时服务器只负责运行预构建的应用程序包，这似乎是更清晰的关注点分离。

当然，YMMV，上面接受的答案也是完全有效的……尤其是在像 Heroku 这样易于理解且稳定的实时环境中。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-09T12:29:16.807

[Heroku buildpack](https://github.com/mbuchetics/heroku-buildpack-nodejs-grunt)对我来说很好用。好东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-27T03:46:47.853

为了让它与 grunt 4.0 一起工作，我按照[https://discussion.heroku.com/t/grunt-on-heroku/98/2](https://discussion.heroku.com/t/grunt-on-heroku/98/2)的说明进行操作。我必须做的唯一更改是删除 grunt 的路径，因为使用 unix 样式的斜杠会使其在 Windows 中失败，反之亦然。幸运的是，您甚至不需要指定路径，因为 NPM 会在 node_modules/.bin 文件夹[https://npmjs.org/doc/scripts.html#path](https://npmjs.org/doc/scripts.html#path)中寻找 grunt 。

1.  确保你在 package.json 中本地安装了 grunt 和 grunt-cli，即使 grunt 告诉你全局安装 cli：`npm i -S grunt grunt-cli`

2.  向您的 package.json 添加一个安装后步骤，如下所示：`"postinstall": "grunt prod"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-02T17:21:12.933

npm postinstall 步骤可能是您最好的选择，因为您可以从那里调用 grunt。但是您还应该查看自定义构建包，例如[heroku-buildpack-nodejs-grunt](https://github.com/mbuchetics/heroku-buildpack-nodejs-grunt)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-01T12:43:54.757

这篇文章是特定于 Rails 的，但我不明白为什么你不能将它与任何后端框架一起使用，而只是将 Ruby buildpack 与你正在使用的任何东西交换。

`grunt build`解决方案基本上是使用多个构建包，并在 Heroku 上为您运行 Node/Grunt构建包。

**值得注意的是，此解决方案没有让您将构建工件检查到版本控制中。**（耶！！！）

[http://www.angularonrails.com/deploy-angular-rails-single-page-application-heroku/](http://www.angularonrails.com/deploy-angular-rails-single-page-application-heroku/)

# sql - 除数等于零

> ID：13784602
> 
> 赞同：0
> 
> 时间：2012-12-09T04:19:04.223
> 
> 标签：sql, oracle, plsql, oracle11g, divide-by-zero

我有以下数据，但在查询中我得到了除以零的零问题。所以我想要以下两种形式的输出。

```
drop table t;

create table t (id number(9), val1 number(9), val2 number(9));
insert into t values (1,23,2);
insert into t values (2,0,4);
insert into t values (3,7,4);
insert into t values (4,0,3);
insert into t values (5,4,6); 
```

从 t 中选择 sqrt(val2*val1)/val1 ；

SQL> / 错误：ORA-01476：除数等于零

预期结果

有两种形式的第一个查询是这样的

```
 ID SQRT(VAL2*VAL1)/VAL1
---------- --------------------
         1           .294883912
         2                    0
         3           .755928946
         4                    0
         5           1.22474487 
```

像这样的第二个查询

```
 ID SQRT(VAL2*VAL1)/VAL1
---------- --------------------
         1           .294883912
         3           .755928946
         5           1.22474487 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T04:23:54.797

您可以使用

`select sqrt(val2*val1)/val1 from t where val1 != 0`;

这将避免 val1 为 0 的行，因此不会导致“除以 0”错误。这应该给你第二种格式。

对于要在输出中显示 0 的第一种格式，您可以在 where 子句中使用 case 语句。

```
select id, 
case 
    when val1 = 0 then 0
    when val1 != 0 then sqrt(val2*val1)/val1
end
from t 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T04:31:09.640

考虑使用 DECODE 和 NVL。在 DECODE (if/then/else) 中指定带或不带零的逻辑。如果您想使用其他值，请使用 NVL。

解码示例：

```
SELECT DECODE(val1, 0, NULL, sqrt(val2*val1)/val1)  from t; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T04:21:08.720

在您的数据中插入`into t values (2,0,4);`val1 为 0，因此它不允许将其除以 0。因此您需要先检查天气 val1 是否为 0，然后执行此操作。

# php - 在 wordpress 数据库中获取最高 id 的问题

> ID：13784605
> 
> 赞同：1
> 
> 时间：2012-12-09T04:20:08.860
> 
> 标签：php, mysql, wordpress

嘿伙计们，我想知道如何在 wordpress 中获得最高的 id。因此，例如，我有一个客人将签出的数据库，如果他们每次都使用相同的电子邮件地址签出，我希望它获取最高的 id，因为最高的 id 将是最近的条目。

代码：

```
$id = $wpdb->get_var( $wpdb->prepare( 
                "
                    SELECT ID 
                    FROM wp_discount_info_guest 
                    WHERE email = %s
                ", 
                $email
            ) ); 
```

我得到值 2 因为在数据库字段中 id 2 包含存储在 var 中的电子邮件`$email`

因此，如果有另一个条目，我希望它获取最高的 id 值，因为这意味着最高的 id 是最新的。

如果您需要更多，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T04:22:41.883

您可以使用它来获取电子邮件的最大 ID。

```
select max(ID) FROM wp_discount_info_guest  WHERE email = %s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T04:22:55.013

试试这个

```
$id = $wpdb->get_var( $wpdb->prepare( 
            "
                SELECT ID 
                FROM wp_discount_info_guest 
                WHERE email = %s
                ORDER BY ID DESC limit 0,1
            ", 
            $email
        ) ); 
```

# ssh - 使用 SSH 密钥连接到远程 Centos 服务器

> ID：13784607
> 
> 赞同：7
> 
> 时间：2012-12-09T04:20:46.457
> 
> 标签：ssh, ssh-keys, openssh

我正在尝试使用 SSH 密钥连接到 Centos 6.3 服务器，这样我就可以远程运行脚本，而无需每次都要求输入密码。我已按照以下说明进行操作：

1.  使用普通的 ssh 命令和密码登录服务器一次，以便服务器将您的计算机添加到已知主机
2.  在您的计算机中使用 cygwin-terminal 生成密钥并将密码留空：`ssh-keygen -t rsa`
3.  现在设置您的私钥和 ssh 文件夹的权限：`chmod 700 ~/.ssh & chmod 600 ~/.ssh/id_rsa`
4.  将公钥（id_rsa.pub）复制到服务器，登录服务器并将公钥添加到authorized_keys列表中：`cat id_rsa.pub >> ~/.ssh/authorized_keys`
5.  导入公钥后，您可以将其从服务器中删除。在服务器上设置文件权限：`chmod 700 ~/.ssh & chmod 600 ~/.ssh/authorized_keys`
6.  重启服务器上的 ssh 守护进程：`service sshd restart`
7.  从您的计算机测试连接：`ssh root@198.61.220.107`

但是当我尝试 ssh 到远程服务器时，它仍然要求我输入密码。.ssh 文件夹不是在服务器上创建的，所以我必须自己创建。对可能发生的事情有任何想法吗？我错过了什么？还有另一种设置密钥的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T04:47:28.503

显然这是一个已知的[错误](http://www.mail-archive.com/linux-390@vm.marist.edu/msg58510.html)。建议的解决方案实际上不起作用，但我发现这将在 CentOS 6.2 系统上工作：

```
chmod 600 .ssh/authorized_keys
chmod 700 .ssh 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T16:36:10.017

好吧，事实证明我`/root`在设置服务器时愚蠢地更改了目录的所有者，所以因为这是`/.ssh`我试图用（root）登录的用户的目录所在的位置，所以它拒绝访问该目录，因为它属于给另一个用户。

```
Dec 10 16:25:49 thyme sshd[9121]: Authentication refused: bad ownership or modes for directory /root 
```

我将所有者更改回root，并且做到了。

```
chown root /root 
```

谢谢你们的帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-27T15:17:41.730

Althogh OP 找到了解决方案，我想记录下我对类似问题的解决方案，希望对那些在谷歌上搜索类似问题并得出这个答案的人有所帮助。

`useradd`我的问题的原因是 CentOS 服务器上用户主文件夹中的 .ssh 目录在通过命令创建后没有设置正确的模式。

另外，我需要通过以下命令手动设置 .ssh 文件夹模式：

`chmod g-w /home/user`

`chmod 700 /home/user/.ssh`

`chmod 600 /home/user/.ssh/authorized_keys`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-12T12:39:39.810

其他答案是通用的，请注意 Centos 6 使用 selinux。**尽管权限和所有权正确，selinux 仍可以拒绝访问 authorised_keys 文件**

从[Centos 6 发行说明](http://wiki.centos.org/Manuals/ReleaseNotes/CentOS6.0#head-710e17fe8ed8c98a1fe4faee4e11e2135df09fff)中的​​已知问题：

> *   如果您将公钥传输到启用了 selinux 的 CentOS 6 服务器，请确保您正确设置了公钥的 selinux 上下文。否则 selinux 可能会禁止访问 ~/.ssh/authorized_keys 文件，因此密钥身份验证将不起作用。为了设置正确的上下文，您可以使用：
>     
>     
>     
>     restorecon -R -v /home/user/.ssh
>     
>     
> *   CentOS 6 中的 ssh-copy-id 知道 selinux 上下文，不需要前面的解决方法。

# java - Java 连接到 Windows SQL Server 2005

> ID：13784608
> 
> 赞同：-1
> 
> 时间：2012-12-09T04:20:48.280
> 
> 标签：java, sql, sql-server, database, connection

这是一个真正让我感到难过的问题，所以我想我会把它带给各位绅士/女士，看看我们是否能找到解决方案。

我正在尝试连接到 SQL Server 2005（MSSQLSERVER，而不是 SERVEREXPRESS 或类似的东西）我已经在我的 labtop 运行 Windows Server 的机器上进行了设置。我的 labtop 正在使用带有 JDBC 4.0（通过 Netbeans IDE）JDK 1.7 的 java 连接字符串。它使用 Windows 身份验证。连接代码如下：

```
 String url;
    url = "jdbc:sqlserver://[Server IP Address]\\[Instance Name]:1433;integratedSecurity=true";
    Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
    Connection conn = DriverManager.getConnection(url); 
```

Instance name = UB-TCMG 注意：[Server IP Address]后面有两个反斜杠。如果只有一个反斜杠，则将其视为转义字符。两个似乎只能算作一个。

不幸的是，我现在没有这个错误。基本上，它说“连接被拒绝：连接”

在服务器端，我根据在线研究做了以下工作。在 SQL Server 配置管理器中启用 TCP/IP 端口。擦除所有动态 TCP 端口。TCP 端口为 1433。启用了 VIA。

同样，表面区域连接已用于激活 SQL 浏览器。

从笔记本电脑使用 telnet 不允许任何连接。在服务器上使用 telnet 在以下情况下有效：telnet [Server Instance Name] 1433

两个防火墙都已关闭。

日志说“服务器正在侦听 ['any'1433]”

还有更多我试图解决这个问题，但我真的睡着了，不记得了。任何你能提出帮助的建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:26:20.083

这就是您在 Java 中进行连接的方式

```
import java.sql.*;

public class testConnection
{
    public static void main(String[] args) 
    {
        DB db = new DB();
        db.dbConnect(
     "jdbc:jtds:sqlserver://localhost:1433/tempdb","sa","");
    }
}

class DB
{
    public DB() {}

    public voidn dbConnect(String db_connect_string, 
  String db_userid, String db_password)
    {
        try
        {
            Class.forName("net.sourceforge.jtds.jdbc.Driver");
            Connection conn = DriverManager.getConnection(
    db_connect_string, db_userid, db_password);
            System.out.println("connected");

        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
}; 
```

本文可能会有所帮助，请访问此链接： [http ://www.java-tips.org/other-api-tips/jdbc/how-to-connect-microsoft-sql-server-using-jdbc.html](http://www.java-tips.org/other-api-tips/jdbc/how-to-connect-microsoft-sql-server-using-jdbc.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:28:29.980

找到了解决方案。

问题有两个方面。一，我的笔记本电脑通过静态 IP 地址访问互联网。当我将其更改为动态时，我能够使用上述连接字符串的派生通过陆线连接到服务器。

第二个问题与我使用的网络有关。出于某种原因，它会阻止对服务器的无线访问。这是我将通过网络的 IT 解决的问题。不过，我可以通过固定电话访问它，因为 IT 没有阻止相关端口/地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T05:20:33.120

试试这个可能对你有用..

```
 String connectionUrl = "jdbc:sqlserver://localhost;databaseName=dbname;user=uname;password=pass"; 
```

# java - Spring在路径中找不到配置

> ID：13784612
> 
> 赞同：0
> 
> 时间：2012-12-09T04:21:44.920
> 
> 标签：java, spring, configuration, dependency-injection

好吧，我正在运行这段代码，但它找不到 springconfig4.xml 文件：

```
package com.nortal.pirs.test.independant;

import org.springframework.beans.factory.BeanFactory;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Test4 {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext("/com/nortal/pirs/beans/springconfig4.xml");
        BeanFactory factory = context;
        Test3 instance = (Test3) factory.getBean("Test3");

        instance.run();
    }
} 
```

我的意思是我有点期待它不起作用，因为在 Java 中，当您尝试使用不在当前包中的路径时，它永远不会起作用。然而，正如我看到的许多 Spring 教程一样，它们都显示了这种指定配置文件的方式。

现在我的 springconfig4.xml 在我的应用程序的 src/com/nortal/pirs/beans 文件夹中。那么如何指定它以便可以在此处找到它？

当前的 Test4 类位于 src/com/nortal/pirs/test/independant 文件夹中。

**我的堆栈跟踪：**

```
 2012-12-09 06:16:15,734 [main] INFO  org.springframework.context.support.AbstractApplicationContext - Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@b24044e: startup date [Sun Dec 09 06:16:15 EET 2012]; root of context hierarchy
Exception in thread "main" java.lang.NoClassDefFoundError: org/springframework/asm/ClassVisitor
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.<init>(AbstractAutowireCapableBeanFactory.java:121)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.<init>(AbstractAutowireCapableBeanFactory.java:168)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.<init>(DefaultListableBeanFactory.java:167)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.createBeanFactory(AbstractRefreshableApplicationContext.java:195)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:128)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:527)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:441)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.nortal.pirs.test.independant.Test4.main(Test4.java:9)
Caused by: java.lang.ClassNotFoundException: org.springframework.asm.ClassVisitor
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 10 more 
```

**我的springconfig4.xml：**

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

  <context:component-scan base-package="com.nortal.pirs.businesslogic.logic"></context:component-scan>
  <context:component-scan base-package="com.nortal.pirs.test.independant"></context:component-scan>

</beans> 
```

或者问题可能出在其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-30T06:41:18.523

添加`spring-asm-3.0.1.RELEASE.jar`和`spring-expression-3.0.1.RELEASE.jar`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T04:24:54.647

异常说它没有找到一个类，而不是 Spring 上下文 xml

`Caused by: java.lang.ClassNotFoundException: org.springframework.asm.ClassVisitor`

请添加asm依赖

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>org.springframework.asm</artifactId>
    <version>3.1.0.RELEASE</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T04:44:55.427

您的堆栈跟踪指出了这一点：

```
java.lang.ClassNotFoundException: org.springframework.asm.ClassVisitor 
```

您需要从[maven repo下载](http://mvnrepository.com/artifact/org.springframework/spring-asm/3.1.2.RELEASE)[spring-asm-3.1.2.RELEASE.jar](http://repo1.maven.org/maven2/org/springframework/spring-asm/3.1.2.RELEASE/spring-asm-3.1.2.RELEASE.jar)文件（假设您使用的是 spring 3.1.2），或者如果您使用的是 maven，请编辑您的文件并添加下一行：`pom.xml`

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-asm</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency> 
```

另外，这一行：

```
ApplicationContext context = new ClassPathXmlApplicationContext("/com/nortal/pirs/beans/springconfig4.xml"); 
```

有错误，路径不能以结尾的`/`.开头，所以文件的路径变成：`"com/nortal/pirs/beans/springconfig4.xml"`.

[ClassPathResource javadoc](http://static.springsource.org/spring/docs/1.1.x/api/org/springframework/core/io/ClassPathResource.html#ClassPathResource%28java.lang.String%29)声明它无论如何都会被删除：

> 为 ClassLoader 使用创建一个新的 ClassPathResource。前导斜杠将被删除，因为 ClassLoader 资源访问方法将不接受它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-01T14:34:58.763

> java.lang.ClassNotFoundException: org.springframework.asm.ClassVisitor

只需添加 spring-asm-3.1.2.RELEASE.jar 文件。将它放在您的 lib 文件夹中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-23T10:47:52.393

对于上面提到的上述问题，缺少这些 jar 即 1.org.springframework.asm-3.0.1.RELEASE-A.jar 2.org.springframework.expression-3.0.1.RELEASE-A.jar 或添加所有**Spring 的核心 Jars，**以便任何新程序员都可以运行所有基本级别的程序。

您的程序中不需要以下行。你可以在上面的程序中使用**工厂的****上下文**insted 。

 ****BeanFactory 工厂 = 上下文**

我们通常使用BeanFactory**的****ApplicationContext**。即使你使用 BeanFactory 也不会对程序产生影响。

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-30T10:43:57.087

添加屏幕简短显示的罐子，它将起作用[![在此处输入图像描述](../Images/e2f57c0a5b24e99281b16f974e1124a5.png)](https://i.stack.imgur.com/gaeT5.jpg)****

# android - 用 Canvas 绘图：位图还是点图元？

> ID：13784626
> 
> 赞同：0
> 
> 时间：2012-12-09T04:23:27.597
> 
> 标签：android, graphics

我的 Android 应用程序接受麦克风输入并用点绘制振幅数据。现在我正在使用 Canvas 来绘制表示每个值的点图元，并且我看到绘制时间非常缓慢。这是因为我画的所有不同的点吗？这可以通过使用位图来加速吗？如果没有，是否有其他方法可以为这个应用程序带来一些速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:18:02.887

我认为使用 Bitmap 绘图更快。

# jquery - 按钮单击时的 CSS3 动画

> ID：13784629
> 
> 赞同：0
> 
> 时间：2012-12-09T04:23:53.633
> 
> 标签：jquery, html, css

我正在尝试在单击按钮时向按钮添加 css3 动画。（我希望按钮放大、旋转然后缩小，使其看起来像是飞出屏幕。）如果我在标记中引用调用它的类，我可以让动画工作。但是，如果我尝试使用 jquery 附加 css3 类，则动画不会运行。我已经验证该类是通过 Firebug 附加的，但我仍然没有得到任何动画。这是在使用 C# 代码的 .NET .aspx 页面上。CSS和标记如下：

```
 <%@ Page Title="About Us" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
CodeBehind="Contact.aspx.cs" Inherits="MirandasWebsite.About" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<title>Contact Miranda</title>
<script>
    $(document).ready(function() {
$("#MainContent_imgbtnSendEmail").click(function() {  // this is your event
    $("#MainContent_imgbtnSendEmail").addClass("rotate");     // here your adding the new class
)}; 
)};
</script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
</asp:ToolkitScriptManager>
<asp:UpdatePanel ID="upEmail" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <div id="ContactPage">
            <asp:Panel ID="pnlFacebook" runat="server" Visible="true">
                <div id="Facebook">
                    <div id="dFacebook" runat="server" class="zoom">
                        <asp:HyperLink ID="hlFacebook" runat="server" Text="My Facebook">   </asp:HyperLink>
                    </div>
            </asp:Panel>
            <asp:Panel ID="pnlPhone" runat="server">
                <br />
                <div id="lblPhone">
                <p>You may reach me at this number:</p>
                <span id="Phone" runat="server">
                </span>
                </div>
            </asp:Panel>
            <asp:Panel ID="pnlSendEmail" runat="server" Visible="true">
                <br />
                <table id="ContactTable">
                    <tr>
                        <td>
                            <asp:Label ID="lblSubject" runat="server" Text="Message Subject"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:TextBox ID="txtSubject" runat="server" Width="20%"></asp:TextBox>
                            <asp:TextBoxWatermarkExtender ID="tbwSubject" runat="server" TargetControlID="txtSubject"
                                WatermarkText="Enter Message Subject Here">
                            </asp:TextBoxWatermarkExtender>
                            <asp:RequiredFieldValidator ID="reqSubject" runat="server" ControlToValidate="txtSubject"
                                Text="**" ErrorMessage="A Message Subject is Required." Display="Static" CssClass="Validation"></asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:Label ID="lblFrom" runat="server" Text="Your Email Address"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:TextBox ID="txtFrom" runat="server" Width="20%"></asp:TextBox>
                            <asp:TextBoxWatermarkExtender ID="tbwFrom" runat="server" TargetControlID="txtFrom"
                                WatermarkText="Enter Your Email Address Here">
                            </asp:TextBoxWatermarkExtender>
                            <asp:RequiredFieldValidator ID="reqFrom" runat="server" ControlToValidate="txtFrom"
                                Text="*" ErrorMessage="A Valid Email Address is Required." Display="Static" CssClass="Validation"></asp:RequiredFieldValidator>
                            <asp:RegularExpressionValidator ID="regexEmailAddress" runat="server" ControlToValidate="txtFrom"
                                ErrorMessage="A Valid Email Address is Required" ValidationExpression="^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$"
                                Display="Static" Text="*" CssClass="Validation"></asp:RegularExpressionValidator>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:Label ID="lblBody" runat="server" Text="Message Body"></asp:Label>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:TextBox ID="txtBody" runat="server" TextMode="MultiLine" Rows="25" Width="40%"></asp:TextBox>
                            <asp:TextBoxWatermarkExtender ID="tbwBody" runat="server" TargetControlID="txtBody"
                                WatermarkText="Message Body Goes Here">
                            </asp:TextBoxWatermarkExtender>
                            <asp:RequiredFieldValidator ID="reqBody" runat="server" ControlToValidate="txtBody"
                                ErrorMessage="A Message Body is Required." Display="Static" Text="**" CssClass="Validation"></asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <%--<div id="SendEmail" runat="server" class="zoom"><asp:Button ID="btnSendEmail" runat="server" Text="Send" OnClick="btnSendEmail_Click" /></div>--%>
                            <div id="SendEmail" runat="server" class="zoom">
                                <asp:ImageButton ID="imgbtnSendEmail" runat="server" OnClick="btnSendEmail_Click"
                                     ImageUrl="SiteImages/Mail-icon.png" /></div>
                        </td>
                    </tr>
                    <asp:ValidationSummary runat="server" ID="validationSummary" ShowMessageBox="true"
                        ShowSummary="false" />
                </table>
            </asp:Panel>
            <asp:Panel ID="pnlEmailSuccess" runat="server" Visible="false">
                <div id="MessageSuccess">
                    <h2>
                        The Email was Sent Successfully</h2>
                    <p>
                        Thank You for Your Interest</p>
                </div>
            </asp:Panel>
        </div>
    </ContentTemplate>
</asp:UpdatePanel>
<asp:UpdateProgress ID="upprogRegister" runat="server">
    <ProgressTemplate>
        <div id="blurred">
            <img src="SiteImages/ajax-loader.gif" id="blurredimage" runat="server" />
        </div>
    </ProgressTemplate>
</asp:UpdateProgress>
<asp:AlwaysVisibleControlExtender ID="aveProgressRegister" runat="server" TargetControlID="upprogRegister"
    HorizontalSide="Center" VerticalSide="Middle" UseAnimation="true">
</asp:AlwaysVisibleControlExtender>
</asp:Content> 
```

CSS：

```
 @-webkit-keyframes rotater {
0% { transform:rotate(0) scale(1) }
10% { transform:rotate(90deg) scale(1.5) }
20% { transform:rotate(180deg) scale(2) }
30% { transform:rotate(270deg) scale(2.5) }
40% { transform:rotate(360deg) scale(3) }
50% { transform:rotate(450deg) scale(2.5) }
60% { transform:rotate(540deg) scale(2) }
70% { transform:rotate(630deg) scale(1.5) }
80% { transform:rotate(720deg) scale(1) }
90% { transform:rotate(810deg) scale(.5) }
100% { transform:rotate(900deg) scale(0) }
}

@-moz-keyframes rotater {
0% { transform:rotate(0) scale(1) }
10% { transform:rotate(90deg) scale(1.5) }
20% { transform:rotate(180deg) scale(2) }
30% { transform:rotate(270deg) scale(2.5) }
40% { transform:rotate(360deg) scale(3) }
50% { transform:rotate(450deg) scale(2.5) }
60% { transform:rotate(540deg) scale(2) }
70% { transform:rotate(630deg) scale(1.5) }
80% { transform:rotate(720deg) scale(1) }
90% { transform:rotate(810deg) scale(.5) }
100% { transform:rotate(900deg) scale(0) }
}

@-o-keyframes rotater {
0% { transform:rotate(0) scale(1) }
10% { transform:rotate(90deg) scale(1.5) }
20% { transform:rotate(180deg) scale(2) }
30% { transform:rotate(270deg) scale(2.5) }
40% { transform:rotate(360deg) scale(3) }
50% { transform:rotate(450deg) scale(2.5) }
60% { transform:rotate(540deg) scale(2) }
70% { transform:rotate(630deg) scale(1.5) }
80% { transform:rotate(720deg) scale(1) }
90% { transform:rotate(810deg) scale(.5) }
100% { transform:rotate(900deg) scale(0) }
}

@-ms-keyframes rotater {
0% { transform:rotate(0) scale(1) }
10% { transform:rotate(90deg) scale(1.5) }
20% { transform:rotate(180deg) scale(2) }
30% { transform:rotate(270deg) scale(2.5) }
40% { transform:rotate(360deg) scale(3) }
50% { transform:rotate(450deg) scale(2.5) }
60% { transform:rotate(540deg) scale(2) }
70% { transform:rotate(630deg) scale(1.5) }
80% { transform:rotate(720deg) scale(1) }
90% { transform:rotate(810deg) scale(.5) }
100% { transform:rotate(900deg) scale(0) }
}

@keyframes rotater {
0% { transform:rotate(0) scale(1) }
10% { transform:rotate(90deg) scale(1.5) }
20% { transform:rotate(180deg) scale(2) }
30% { transform:rotate(270deg) scale(2.5) }
40% { transform:rotate(360deg) scale(3) }
50% { transform:rotate(450deg) scale(2.5) }
60% { transform:rotate(540deg) scale(2) }
70% { transform:rotate(630deg) scale(1.5) }
80% { transform:rotate(720deg) scale(1) }
90% { transform:rotate(810deg) scale(.5) }
100% { transform:rotate(900deg) scale(0) }
}

.rotate 
{ 
   -webkit-animation-name: rotater;
   -webkit-animation-timing-function: ease-in-out;
   -webkit-animation-iteration-count: infinite;
   -webkit-animation-duration: 1s;

  -moz-animation-name: rotater;
  -moz-animation-timing-function: ease-in-out;
  -moz-animation-iteration-count: infinite;
  -moz-animation-duration: 1s;

  -o-animation-name: rotater;
  -o-animation-timing-function: ease-in-out;
  -o-animation-iteration-count: infinite;
  -o-animation-duration: 1s;

  animation-name: rotater;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
  animation-duration: 1s;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:47:18.360

所以这不是我想要的处理方式，但我让它工作了。我向图像按钮添加了一个 OnClientClick 事件，如下所示：

```
<asp:ImageButton ID="imgbtnSendEmail" runat="server" OnClientClick="javascript:addSendAnimation()"  OnClick="btnSendEmail_Click"
                                     ImageUrl="SiteImages/Mail-icon.png" /></div> 
```

然后像这样创建两个 JS 函数：

```
function addClassName(inElement, inClassName) {
if (!hasClassName(inElement, inClassName))
    inElement.className = [inElement.className, inClassName].join(' ');
}

function addSendAnimation() {
var button = document.getElementById('MainContent_imgbtnSendEmail');
addClassName(button, 'rotate');
alert(button + " was clicked"); //This is used for debugging and should be removed before the site goes live
} 
```

# database - 在一张表和两张表中表示主题和表格？

> ID：13784638
> 
> 赞同：0
> 
> 时间：2012-12-09T04:24:55.990
> 
> 标签：database, database-design

我目前正在为一个更大的应用程序构建一个论坛组件，并且我正在考虑对数据库模式的某些部分采用不同的方法。特别是，我正在考虑在一个表格中表示主题和帖子。虽然我认为主题和帖子几乎相同，但我感到有点担心，因为这可能会使未来的事情变得不那么灵活。

当查询特定论坛的主题时，将显示标题和第一篇文章以及一些用户信息（基本上是名称和头像）。在这个应用程序中，除了视图和回复之外，主题和帖子都使用了各种属性；也许还有 title 和 forum_id(forum_id 因为这意味着如果将主题更改为另一个论坛而不是更改主题关系中的 forum_id 属性，则可能需要影响数百条记录)。

这些表格看起来像我在下面的内容：

```
TOPIC            POST           
topic_id         poster_id   
forum_id         topic_id 
poster_id        content 
title            upvote
views            dnvote
replies          closed
post_id          deleted
                 last_edited
                 last_editor
                 parent_id
                 content
                 post_id 
```

这样做，使用表继承，在主题中生成帖子将需要通过 TOPIC、POST、USER 和 TOPIC_TYPE 进行 4 表连接。

另一方面，如果我决定采用单表方法，如果 topic_type 是常规帖子，我是否应该简单地将视图、回复、标题和 forum_id 属性保留为空？（topic_type 为显示的主题类型引用了一个适当的图标，并将用于统计等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:33:38.577

如果您绝对致力于使用关系技术（我也会考虑使用 NoSQL db，例如 Mongo 等），我会按照您的建议将其分成两个表。

您的案例是关系主细节设计或整体部分的基础，我认为两张表是合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:26:24.987

区分“主题”和“主题启动器”可能是值得的。“主题启动器”是不是回复的评论。每个主题只有一个主题起始符，可以由主题表中的外键引用。

除此之外，我同意你的分析和你的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T04:57:01.687

我认为在这种情况下，简单的标准化是首选。生成不同类型的报告也很有用。虽然可以使用单个表，但正如您在这种情况下设计的表，如果您使用两个更易于管理的表，以避免多次输入相同的值。

# javascript - 用于从特定 HTML 标记中提取文本偏移量的书签

> ID：13784639
> 
> 赞同：0
> 
> 时间：2012-12-09T04:25:47.553
> 
> 标签：javascript, bookmarklet, text-parsing

我想编写一个书签来自动搜索我在特定网页上所做的搜索。

我需要查找字符串“<B>IP Cliente :”，转到下一行并从字符串“93.103.61.18”中提取 IP 号。

然后我想将 IP 号码提供给 Geocities 网站 [http://www.geobytes.com/IpLocator.htm?GetLocation&IpAddress=93.103.61.18](http://www.geobytes.com/IpLocator.htm?GetLocation&IpAddress=93.103.61.18) 以获取国家和城市并将它们显示在初始网页顶部的框中. 在这里，也可以通过查找文本和 HTML 标记的特定组合并在该位置的特定偏移处抓取文本来提取国家和城市。例如“国家”

我四处寻找书签库，但没有找到可以修改的示例。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:37:03.530

找到一个现有的书签来获取这样的特定文本几乎是不可能的。

但是，有*许多*小书签会使用您选择的文本进行搜索。因此，您所要做的就是选择 IP 地址，然后单击小书签。这些都比较简单。只需搜索“google bookmarklet”或“search bookmarklet”即可找到数百个。你会很快找到一个你可以修改的。

# mysql - 如何从 2 个不同的表中排除结果并显示结果？

> ID：13784641
> 
> 赞同：1
> 
> 时间：2012-12-09T04:25:58.087
> 
> 标签：mysql

我有 2 张桌子：

*   T1（总用户）
*   T2 (User_id_that_have_done_something_for_today)

T1 的 mysql_query 结果是

```
(Total User)
-----
ID
-----
| 1 |
| 2 |
| 3 |
| 4 |
| 5 |
| 6 |
| 7 |
| 8 | 
```

来自 T2 的 mysql_query 是

```
(logged)
-----
user_id_log
-----
| 1 |
| 3 |
| 4 |
| 7 | 
```

如何比较 T1 和 T2 并且只显示未批准的用户？

我想要的最终结果是

```
(result)
-----
ID
-----
| 2 |
| 5 |
| 6 |
| 8 | 
```

我花了 2 天时间完成这项工作，但我做不到

我尝试了 LEFT JOIN 而不是它，但结果不是我想要的

请帮帮我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:29:06.643

这会成功的

```
SELECT * FROM Users u
WHERE u.id NOT IN (SELECT l.id FROM logged l) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:29:51.403

你可以使用 `NOT EXISTS`：

```
SELECT DISTINCT id FROM T1 WHERE NOT EXISTS (SELECT * FROM T2 WHERE t1.id = t2.id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T05:02:46.200

这将帮助您获得结果。

```
select T1.ID from T1 left join T2 on T2.ID = T2.ID where T2.ID IS NULL; 
```

# c# - 链表：在 current 和 current.next 之间插入项目

> ID：13784645
> 
> 赞同：0
> 
> 时间：2012-12-09T04:26:51.003
> 
> 标签：c#

目前我正在学习如何在 C# 中构建自己的链表。我创建了一个函数，该函数`AddTrees`将一棵树添加到列表的末尾。用户通过文本框输入创建他们的树：`tree_name`、`tree_height`和。我正在请求帮助，我的哪个没有在 current 和 ? 之间插入树？但是，它不是将其插入，而是将其添加到列表的顶部。`tree_price``tree_instock``InsertTree``current.next_tree`

```
 namespace Tree_farm
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            public class TheTrees
            {
                private string tree_type = " ";
                private int tree_height = 0;
                public double tree_price = 0;
                private int tree_instock = 0;

                public TheTrees next_tree;

                public TheTrees(string newtree, int newheight, int newinstock, double newprice)
                {
                    tree_type = newtree;
                    tree_height = newheight;
                    tree_price = newprice;
                    tree_instock = newinstock;

                    next_tree = null;
                }

                public override string ToString()
                {
                    return tree_type + " " + tree_height + " " + tree_price + " " + tree_instock;
                }

            }

            public class ListForTrees
            {
                public TheTrees first_tree;
                public TheTrees last_tree;

                public int count = 0;

                public ListForTrees(TheTrees new_tree)
                {
                    first_tree = new_tree;
                    last_tree = new_tree;
                    count = 1;
                }

                public ListForTrees()
                {

                }

                public void InsertTree(TheTrees new_tree)
                {
                    TheTrees current = first_tree;

                    if (count == 0)
                    {
                        first_tree = new_tree;
                        last_tree = new_tree;
                        count = 1;
                    }

                    else if (count != 0)
                    {
                        if (new_tree.tree_price <= first_tree.tree_price)
                        {
                            new_tree.next_tree = first_tree;
                            first_tree = new_tree;
                        }

                        else if (new_tree.tree_price >= last_tree.tree_price)
                        {
                            last_tree.next_tree = new_tree;
                            last_tree = new_tree;
                        }

                        else
                        {
                            while (new_tree.tree_price > current.next_tree.tree_price)
                            {
                                 current.next_tree = current;
                            }

                            new_tree.next_tree = current.next_tree;
                            current.next_tree = new_tree;
                        }

                        count++;
                    }
                }

 public void AddTree(TheTrees new_tree)
            {
                TheTrees current = first_tree;

                if (count == 0)
                {
                    first_tree = new_tree;
                    last_tree = new_tree;
                    count = 1;
                }

                else if (count != 0)
                {
                    if (new_tree.tree_price <= first_tree.tree_price)
                    {
                        new_tree.next_tree = first_tree;
                        first_tree = new_tree;
                    }

                    else if (new_tree.tree_price >= last_tree.tree_price)
                    {
                        last_tree.next_tree = new_tree;
                        last_tree = new_tree;
                    }

                    else
                    {
                        while (new_tree.tree_price > current.next_tree.tree_price)
                        {
                            current = current.next_tree;
                        }

                        new_tree.next_tree = current.next_tree;
                        current.next_tree = new_tree;
                    }

                    count++;
                }
            }

                public void ClearTrees()
                {
                    first_tree = null;
                    count = 0;
                }
            }

            ListForTrees mainlist = new ListForTrees();

            private void Form1_Load(object sender, EventArgs e)
            {

            }

            private void BtnInsertTree_Click(object sender, EventArgs e)
            {
                //Insert Code
                try
                {
                    int height = Convert.ToInt32(TxtTreeHeight.Text);
                    int stock = Convert.ToInt32(TxtTreeStock.Text);
                    double price = Convert.ToDouble(TxtTreePrice.Text);

                    TheTrees treeinsert = new TheTrees(TxtTreeName.Text, height, stock, price);

                    mainlist.InsertTree(treeinsert);
                }
                catch
                {
                    MessageBox.Show("Please check intput fields");
                }
            }

        private void BtnAddTree_Click(object sender, EventArgs e)
        {
            try
            {
                int height = Convert.ToInt32(TxtTreeHeight.Text);
                int stock = Convert.ToInt32(TxtTreeStock.Text);
                double price = Convert.ToDouble(TxtTreePrice.Text);

                TheTrees treeadd = new TheTrees(TxtTreeName.Text, height, stock, price);

                mainlist.AddTree(treeadd);
            }
            catch
            {
                MessageBox.Show("Please check intput fields");
            }
        }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:39:39.823

首先，我认为您的预期结果是错误的。看来您希望链接列表按价格顺序（从最低到最高）排序。如果是这样，赛普拉斯实际上应该排在列表的末尾，而不是在中间（80.00 > 50.00 > 2.00）。

其次，我相信问题在于您的 while 循环。

```
 while (new_tree.tree_price > current.next_tree.tree_price)
 {
      current.next_tree = current;
 } 
```

我相信你想要做的是沿着你的链表走。您实际上在做的是通过将 current.next_tree 更改为指向自身来破坏您的链接列表。将其更改为以下是纠正算法的积极的第一步：

```
 while (new_tree.tree_price > current.next_tree.tree_price)
 {
      current = current.next_tree;
 } 
```

编辑：应该注意的是，我没有收到您在原始帖子中遇到的相同错误。当我以您声称的相同顺序插入项目时，我会以正确的排序顺序获得列表。这是因为赛普拉斯正如预期的那样走到了尽头。你是如何得到你在问题中声称的结果的？

# mongodb - Mongo 的聚合命令未充分利用 CPU

> ID：13784647
> 
> 赞同：1
> 
> 时间：2012-12-09T04:27:22.873
> 
> 标签：mongodb, performance, aggregation-framework

我在 i7 八核 CPU 上的 Windows 7 x64 上运行 Mongo 2.2.2。我们的生产服务器在 Red Hat Enterprise 下运行在具有相同版本 Mongo 的 256 核机器上。

在我对 Windows 机器上的以下调用的测试中

```
db.users_v2_prod.aggregate( { $group : {_id : "$email", total : { $sum : 1 } } }, { $match : { total : { $gte : 3 } } }, { $sort : {total : -1} }, {$limit : 5} ) 
```

我注意到 mongo 未充分利用可用资源。在查询期间，CPU 上的总负载约为 10%。根据 Process Explorer 计算只发生在一个线程中。`mongod`似乎只使用了我拥有的 8 个内核中的 3 个，甚至它们也被部分使用。

Mongo 的工程师能否解释一下他们对此实现的理由？我很好奇为什么不使用更多可用的资源。为什么不并行处理所有内核的负载，因为您有我要分组的字段的索引。

给定查询是在包含 650 万个文档的集合上执行的（mongobackup 生成 5GB 文件）。所以这没什么疯狂的。

PS。还有一个额外的问题：你考虑过使用 GPU 吗？我的笔记本电脑上有 1024 核 GPU :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:29:28.730

CPU 很可能不是这里的限制因素——在 MongoDB 的典型用例中，大多数情况下都是如此。您的查询看起来不是计算密集型的，因此它更有可能在从磁盘分页数据或耗尽 RAM 方面达到限制。

如果没有看到运行的实际统计数据就很难说（为此我建议在[MMS](http://mms.mongodb.com/help-classic/)中安装主机并安装[munin-node](http://mms.mongodb.com/help-classic/tutorial/configure-monitoring-munin-node/)），但我很少看到 CPU 是 MongoDB 实例的瓶颈。

说了这么多，并行化可能可以改进，但它可能不是最快的实现。如果以上都没有发生或相关，那么我会看看你是否可以并行运行多个作业，或者可能在客户端更多地拆分工作，看看你是否可以通过这种方式改进问题。您还应该观看/投票/评论这些问题：

[https://jira.mongodb.org/browse/SERVER-5091](https://jira.mongodb.org/browse/SERVER-5091)（并行聚合操作） [https://jira.mongodb.org/browse/SERVER-5088](https://jira.mongodb.org/browse/SERVER-5088)（并行查询） [https://jira.mongodb.org/browse /SERVER-4504](https://jira.mongodb.org/browse/SERVER-4504)（为聚合框架添加解释）（在 2.6 中添加）

# php - 将数据库从一台服务器备份和上传到另一台服务器

> ID：13784648
> 
> 赞同：0
> 
> 时间：2012-12-09T04:27:23.967
> 
> 标签：php, sql

我想知道是否可以创建一个 PHP 脚本来在一台服务器上备份数据库，然后将备份移动到第二台完全不同的服务器上的存档中。

举个例子。用户访问他/她的在线管理仪表板。在列表中，他们很少有网站，比如 my-site-one.site 和 my-site-two.site。用户选择备份 my-site-one.site，因此他或她单击一个链接，该链接将使用 AJAX 在该服务器上触发某种文件，然后运行数据库备份。

数据库备份已完成 my-site-one.site 将备份发送到我的服务，并安全地存储在用户帐户下。

这可能会让人头疼，但我看不到几个解决方案。

*   将带有 API 密钥和用户密钥的 PHP 脚本提供给用户，然后让用户将其放到服务器上。
*   使用我自己的站点验证 PHP 文件以及 API 密钥和用户密钥。
*   让用户服务器上的 PHP 文件备份到静态目录，比如说 /db-backups-##########。
*   在我的站点运行备份命令时，使用 CURL 检查 /db-backups-########## 和位于其中的文件可以说 db_dd-mm-yy_hh-mm.sql 或 .tar 或 .压缩。使用 CURL 获取文件并存储在我自己的服务器上。

这会起作用吗？或者有人对如何做这样的事情有更好的想法吗？还是将 PHP 与 FTP 一起使用更好？

# git - 为什么当我尝试提交时 magit 说“Git 已经在运行”

> ID：13784649
> 
> 赞同：8
> 
> 时间：2012-12-09T04:27:31.603
> 
> 标签：git, emacs, magit

我在 emacs 中使用 magit，当我尝试通过类型 Cc Cc 提交更改时，输出控制台显示“Git 已经在运行”，当我通过 Git bash 检查时，它没有生成任何提交。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T08:40:23.200

这似乎是 magit 中的一个错误，并且不时发生。在终端中杀死 git`killall git`似乎可以解决问题。正如@Daimrod 在评论中指出的那样，杀死`magit-display-buffer`将具有相同的效果。

# python - cherrypy：无法通过 IP 地址或主机名连接

> ID：13784657
> 
> 赞同：0
> 
> 时间：2012-12-09T04:29:15.840
> 
> 标签：python, cherrypy

> **可能重复：**
> [如何使用 CherryPy 配置 IP 地址？](https://stackoverflow.com/questions/115773/how-do-i-configure-the-ip-address-with-cherrypy)

我是cherrypy的新手。我尝试了一个简单的cherrypy应用程序，并且可以通过以下方式进行连接：

```
http://localhost:1111 
```

但不是通过我的 IP 地址或主机名：

```
http://192.168.1.5:1111 ==> failed
http://myHost:1111      ==> failed 
```

这意味着网络中的其他人无法连​​接到我的应用程序。我一直在搜索 CherryPy 文档，但没有找到任何有用的东西。请帮忙。

# php - 里面的链接 仅在 IE 上不起作用 好吧，每个 < li > 标签内的链接在 IE9 中不起作用，尽管它们在其他浏览器上运行良好......我不明白为什么......我检查了重叠元素，但我似乎找不到任何东西，我不要使用任何带有 z-index 或绝对/固定定位的东西。这可能是IE的东西吗？ function getNews() { global $db; $query = 'SELECT * FROM 问问题 问问题 2012-12-09T04:29:52.280 158 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 好吧，每个 < li > 标签内的链接在 IE9 中不起作用，尽管它们在其他浏览器上运行良好......我不明白为什么......我检查了重叠元素，但我似乎找不到任何东西，我不要使用任何带有 z-index 或绝对/固定定位的东西。这可能是IE的东西吗？ function getNews() { global $db; $query = 'SELECT * FROM news'; if($stmt = $db->prepare($query)) { $html = ''; $header = '' .'' .'' .'' .'' .'' .'' .'

| ' .'ID' .' | ' .'Title' .' | ' .'Timestamp' .' | ' .'Visible' .' |

'; $stmt->execute(); $result = $stmt->fetchAll(PDO::FETCH_ASSOC); $class_one = 'li-bg-one'; $class_two = 'li-bg-two'; $c = 0; foreach($result as $key => $myrow) { if($c == 0) { $class = $class_one; $c = 1; } else { $class = $class_two; $c = 0; } $html .= '*   ' .'[' .'' .'' .'' .'' .'' .'' .'' .'' .'

    | ' .$myrow['id'] .' | ' .'' .limit_words($myrow['title'], 10) .'' .' | ' .$myrow['timestamp'] .' | ' .$myrow['visible'] .' |

    ' .'' .'](/administrator.php?content=news&id='.$myrow['id'].')' .''; } return $header . '

'; } } 我向你保证css没有什么奇怪的，除非我错过了什么 #news-list, #slides-list{ margin:20px; background-color:white; overflow-x:hidden; overflow-y:scroll; height:350px; border:1px solid lightgray; } #news-list a:hover, #slides-list a:hover{ color:#333 !important; } .admin-list-item { list-style:none; background:none !important; } .admin-list-item:hover{ background-color: rgb(123, 219, 243) !important; cursor: pointer; } .li-bg-one { background-color: #bdbdbd !important; } .li-bg-two { background-color:#fff !important; } #news-list td, #news-list td a, #news-list td div, #news-list div a { color:#333; font-weight:bold; font-size:12px; font-family: Arial,Tahoma; } #news-list th { color:#a00000; font-weight:bold; font-size:12px; font-family: Arial,Tahoma; } #news-list .news-id{ width:50px; } #news-list td.news-id{ text-align:left; } #news-list .news-title{ width:450px; } #news-list td.news-title{ text-align:left; } #news-list td.news-title div{ width:450px; overflow: hidden; text-overflow:ellipsis; white-space: nowrap; } #news-list .news-when{ width:150px; } #news-list td.news-when{ text-align:left; } #news-list .news-vis{ width:30px; } #news-list td.news-vis{ text-align:center; } #news-editor, #slides-editor{ padding:20px; text-align:left; border-top:1px solid #a00000; } #edit-news-title, #edit-slider-title, #edit-slider-url{ width:700px; text-align:left; min-height:32px; line-height:32px; padding:5px; color:#a00000; font-family:Arial,Tahoma; font-weight:bold; font-size:16px; position:relative; border-radius:10px; -moz-border-radius:10px; border:1px solid lightgray; } #edit-news-img, #edit-slider-img{ margin-top:10px; margin-bottom:10px; } 您想使用服务器端内容访问/修改 razor 内容。 但是 MVC 是一种将网站/应用程序构建到 Web 表单的不同方式。 现在有服务器端控件或 web 控件。您可以使用 JQuery 来做同样的事情。 phphyperlinkhtml-tablehtml-lists 4 1 回答 1 This answer is useful 0 news-id 不是有效的 HTML 属性。 找到这个： $html .= '*   ' 并替换为： $html .= '*   ' 或使用 HTML5 数据属性： $html .= '*   ' 于 2012-12-09T05:13:12.147 回答 Related 1 sql - 如何在netezza的不同行中找到具有相同值的列的最大值 2 sql - SQL WHERE 时间戳在 MIDNIGHT 和 MIDNIGHT 之间 1 mongodb - 在 debian 上的 mongodb 中添加用户而不以明文形式存储密码 3 c# - 将 XML 加载到网格视图中 0 haskell - 通过显式回溯进行上下/交替排列 2 php - 在 jquery/ajax 中使用错误函数 1 android - UIWebView 在应用程序退出后清除缓存并且不离线缓存图像 1 wordpress - wp_nav_menu 未按配置按预期输出 3 javascript - “功能上”产生一个只有几个元素的列表 3 php - 从日期范围计算一个月内的天数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13784661
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, hyperlink, html-table, html-lists

好吧，每个 < li > 标签内的链接在 IE9 中不起作用，尽管它们在其他浏览器上运行良好......我不明白为什么......我检查了重叠元素，但我似乎找不到任何东西，我不要使用任何带有 z-index 或绝对/固定定位的东西。这可能是IE的东西吗？

```
function getNews()
{
    global $db;

    $query = 'SELECT * FROM news';

    if($stmt = $db->prepare($query))
    {
        $html = '';
        $header = '<table cellpadding="0" cellspacing="0" style="width:100%;text-align:left;">'
                    .'<tr>'
                        .'<th class="news-id">'
                            .'ID'
                        .'</th>'
                        .'<th class="news-title">'
                            .'Title'
                        .'</th>'
                        .'<th class="news-when">'
                            .'Timestamp'
                        .'</th>'
                        .'<th class="new-vis">'
                            .'Visible'
                        .'</th>'
                    .'</tr>'
                .'</table>';

        $stmt->execute();
        $result = $stmt->fetchAll(PDO::FETCH_ASSOC);

        $class_one = 'li-bg-one';
        $class_two = 'li-bg-two';

        $c = 0;

        foreach($result as $key => $myrow)
        {

            if($c == 0)
            {
                $class = $class_one;
                $c = 1;
            }
            else
            {
                $class = $class_two;
                $c = 0;
            }

            $html .= '<li news-id="'.$myrow['id'].'" class="admin-list-item '.$class.'">'
                        .'<a style="display:block;" href="/administrator.php?content=news&id='.$myrow['id'].'">'
                        .'<div>'
                        .'<table cellpadding="0" cellspacing="0" style="width:100%;">'
                            .'<tr>'
                                .'<td valign="top" class="news-id">'
                                .$myrow['id']
                                .'</td>'
                                .'<td valign="top" class="news-title">'
                                .'<div>'
                                .limit_words($myrow['title'], 10)
                                .'</div>'
                                .'</td>'
                                .'<td valign="top" class="news-when">'
                                .$myrow['timestamp']
                                .'</td>'
                                .'<td valign="top" class="new-vis">'
                                .$myrow['visible']                          
                                .'</td>'
                            .'</tr>'
                        .'</table>'
                        .'</div>'
                        .'</a>'
                    .'</li>';
        }
        return $header . '<ul>' . $html . '</ul>';
    }
} 
```

我向你保证css没有什么奇怪的，除非我错过了什么

```
#news-list, #slides-list{
    margin:20px;
    background-color:white;
    overflow-x:hidden;
    overflow-y:scroll;
    height:350px;
    border:1px solid lightgray;
}

#news-list a:hover, #slides-list a:hover{
    color:#333 !important;
}

.admin-list-item
{
    list-style:none;
    background:none !important;
}

.admin-list-item:hover{
    background-color: rgb(123, 219, 243) !important;
    cursor: pointer;
}

.li-bg-one
{
    background-color: #bdbdbd !important;
}

.li-bg-two
{
    background-color:#fff !important;
}

#news-list td, #news-list td a, #news-list td div, #news-list div a    
{
    color:#333;
    font-weight:bold;
    font-size:12px;
    font-family: Arial,Tahoma;
}

#news-list th
{
    color:#a00000;
    font-weight:bold;
    font-size:12px;
    font-family: Arial,Tahoma;
}

#news-list .news-id{
    width:50px;
}

#news-list td.news-id{
    text-align:left;
}

#news-list .news-title{
    width:450px;
}

#news-list td.news-title{
    text-align:left;
}

#news-list td.news-title div{
    width:450px;
    overflow: hidden;
    text-overflow:ellipsis;
    white-space: nowrap;
}

#news-list .news-when{
    width:150px;
}

#news-list td.news-when{
    text-align:left;
}

#news-list .news-vis{
    width:30px;
}

#news-list td.news-vis{
    text-align:center;
}

#news-editor, #slides-editor{
    padding:20px;
    text-align:left;
    border-top:1px solid #a00000;
}

#edit-news-title, #edit-slider-title, #edit-slider-url{
    width:700px;
    text-align:left;
    min-height:32px;
    line-height:32px;
    padding:5px;
    color:#a00000;
    font-family:Arial,Tahoma;
    font-weight:bold;
    font-size:16px;
    position:relative;
    border-radius:10px;
    -moz-border-radius:10px;
    border:1px solid lightgray;
}

#edit-news-img, #edit-slider-img{
    margin-top:10px;
    margin-bottom:10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:13:12.147

news-id 不是有效的 HTML 属性。

找到这个：

```
 $html .= '<li news-id="'.$myrow['id'].'" class="admin-list-item '.$class.'">' 
```

并替换为：

```
 $html .= '<li id="'.$myrow['id'].'" class="admin-list-item '.$class.'">' 
```

或使用 HTML5 数据属性：

```
 $html .= '<li data-news-id="'.$myrow['id'].'" class="admin-list-item '.$class.'">' 
```

# php - 将 GET 数据保存在多个页面上而不再次提交？

> ID：13784666
> 
> 赞同：0
> 
> 时间：2012-12-09T04:30:42.467
> 
> 标签：php, html, get

我有一个刽子手游戏，用户可以选择一个玩家或两个玩家。

它的设计方式是，游戏都在一个页面上，并使用 post 和 get 变量 if 语句来显示正确的信息。在第一次到达页面时，用户可以选择单击一个按钮，该按钮通过 GET 提交一个玩家或两个玩家。

然后根据这一点，以及一种`if($_GET['numplayers']==1)`类型的语句加载适当的内容。

我的问题是，对于两个玩家，我还有一个表单提交给一个玩家选择一个单词，所以它必须是发布的（所以另一个玩家在 url 中看不到它）。还有一个事实是，在第二次提交时，我失去了 numplayers 变量。

有没有一种方法可以保留`$_GET['numplayers']`变量而不必使用会话变量？我不希望它停留那么久，我担心如果他们移动到另一个页面然后回到刽子手，但是想要与不同数量的玩家一起玩，那么它就行不通了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:40:37.173

*   使用 AJAX 并避免表单提交和页面重新加载。
*   每场比赛将数据保存在数据库中。
*   对于每场比赛，其玩家信息和状态都应该在数据库中。（最好使用 NoSQL）
*   当有人到达游戏页面的唯一 URL 时（分配一个游戏 ID，您将在查询字符串中传递该游戏 ID 或具有干净的 URL）
*   在该页面上检查哪个玩家已经到达，如果该玩家是他游戏的一部分，让他玩。

# php - 测试 SQL 查询的真假

> ID：13784670
> 
> 赞同：1
> 
> 时间：2012-12-09T04:31:44.527
> 
> 标签：php, mysql, sql

```
$sql = "SELECT # FROM users WHERE onduty = 1 AND loc_id = '{$site}';"; 
$result = mysql_query($sql); 
```

我只是想测试这是对还是错。如果它返回 0 行，我希望下一行类似于：

```
if (!$result) { //do this; } 
```

然而，在我的测试中，当我知道它应该是真的时，我变得假了。这是合理的逻辑吗？

**（注意，是的，我知道我应该使用`mysqli_query`，这不是我在这里要求的）********

 ****回答：这是我使用的：**

```
$login_state = false;
if(mysql_num_rows(mysql_query("SELECT 1 FROM users WHERE onduty = 1 AND loc_id = '{$site}';"))) {
    $login_state = true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T04:37:01.100

使用[**`EXISTS`**](https://dev.mysql.com/doc/refman/5.6/en/exists-and-not-exists-subqueries.html)：

```
SELECT EXISTS (SELECT 1 FROM users WHERE onduty = 1 AND loc_id = '{$site}') AS test; 
```

如果没有找到符合条件的行，您的原始查询将返回“无行”。这个每次都返回`TRUE`( `1`) 或`FALSE`( `0`)。

在可能有多行匹配条件并且您只关心是否存在至少一行的情况下，性能`EXISTS`优于普通查询。一旦找到第一行，它就可以停止并且只返回`0`or `1`。

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=mysql_8.0&fiddle=496e4c24551f07a2c82b63aeef6ad3cb)*
[旧[sqlfiddle](http://www.sqlfiddle.com/#!9/c514cd/1)]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T04:47:08.127

使用[mysql_num_rows()](http://php.net/manual/en/function.mysql-num-rows.php)检查执行查询时返回的行数。

```
$num_rows = mysql_num_rows($result);

if($num_rows==0)
{
//nothing returned
}
else
{

//rows returned
} 
```

对应的mysqli实现见[mysqli_stmt_num_rows()](http://php.net/manual/en/mysqli-stmt.num-rows.php)**

# haskell - 简单的haskell拆分列表

> ID：13784671
> 
> 赞同：5
> 
> 时间：2012-12-09T04:32:06.177
> 
> 标签：haskell

我有以下函数，它接受一个列表并返回在给定元素 n 处拆分的两个子列表。但是，我只需要将它分成两半，奇数长度的列表具有更大的第一个子列表

```
splitlist :: [a] -> Int -> ([a],[a])
splitlist [] = ([],[])
splitlist l@(x : xs) n | n > 0     = (x : ys, zs)
               | otherwise = (l, [])
    where (ys,zs) = splitlist xs (n - 1) 
```

我知道我需要将签名更改为 [a] -> ([a],[a])，但是我应该在代码中的哪个位置放置诸如 length(xs) 这样的内容，以免中断递归？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T12:38:34.880

在实际程序中，您可能应该使用

```
splitlist :: [a] -> ([a], [a])
splitlist xs = splitAt ((length xs + 1) `div` 2) xs 
```

（即类似于dreamcrash的答案。）

但是，如果出于学习目的，您正在寻找一个明确的递归解决方案，请研究以下内容：

```
splitlist :: [a] -> ([a], [a])
splitlist xs = f xs xs where
    f (y : ys) (_ : _ : zs) =
        let (as, bs) = f ys zs
        in (y : as, bs)
    f (y : ys) (_ : []) = (y : [], ys)
    f ys [] = ([], ys) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-09T05:00:04.477

您可以使用 take 和 drop 来做到这一点：

```
splitlist :: [a] -> ([a],[a])
splitlist [] = ([],[])
splitlist l  = let half = (length(l) +1)`div` 2
               in (take half l, drop half l) 
```

或者您可以利用函数 splitAt：

```
splitlist list = splitAt ((length (list) + 1) `div` 2) list 
```

# ruby - 如何使用 Nokogiri 解析 bit.ly 统计页面？

> ID：13784672
> 
> 赞同：1
> 
> 时间：2012-12-09T04:32:14.510
> 
> 标签：ruby, nokogiri, bit.ly

我正在尝试使用 Nokogiri从[bit.ly 统计页面解析 Twitter 用户名：](http://bitly.com/U026ue+/global)

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open('http://bitly.com/U026ue+/global'))

twitter_accounts = []

shares = doc.xpath('//*[@id="tweets"]/li')

shares.map do |tweet|
  twitter_accounts << tweet.at_css('.conv.tweet.a')
end

puts twitter_accounts 
```

我的理解是 Nokogiri 将以`shares`某种形式的树结构保存，我可以用它来深入研究，但我的里程是不同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T09:04:42.183

该数据来自带有 JSON 响应的 Ajax 请求。不过很容易上手：

```
require 'json'
url = 'http://search.twitter.com/search.json?_usragnt=Bitly&include_entities=true&rpp=100&q=nowness.com%2Fday%2F2012%2F12%2F6%2F2643'
hash = JSON.parse open(url).read
puts hash['results'].map{|x| x['from_user']} 
```

我通过在 Chrome 中加载页面然后查看网络面板获得了该 URL，我还删除了时间戳和回调参数，只是为了稍微清理一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T06:54:24.647

实际上，埃里克·沃克（Eric Walker）正在做某事。如果你看一下`doc`，推文应该是这样的部分：

```
<h2>Tweets</h2>
  <ul id="tweets"></ul>
</div> 
```

这可能是因为它们是由 Nokogiri 未执行的一些 JavaScript 调用生成的。一种可能的解决方案是使用`watir`遍历页面，加载 JavaScript，然后保存 HTML。

这是一个完成此任务的脚本。请注意，您的 XPath 参数存在一些问题，我已经解决了这些问题，并且每次运行此脚本时，watir 都会打开一个新浏览器：

```
require 'watir'
require 'nokogiri'

browser = Watir::Browser.new
browser.goto 'http://bitly.com/U026ue+/global'

doc = Nokogiri::HTML.parse(browser.html)

twitter_accounts = []

shares = doc.xpath('//li[contains(@class, "tweet")]/a')

shares.each do |tweet|
  twitter_accounts << tweet.attr('title')
end

puts twitter_accounts
browser.close 
```

您还可以使用[headless](http://watirwebdriver.com/headless/)来防止窗户打开。

# java - 文件锁定的替代方法，以确保只能启动一个应用程序实例

> ID：13784683
> 
> 赞同：3
> 
> 时间：2012-12-09T04:34:07.697
> 
> 标签：java, io, distribution

我正在使用`file.deleteOnExit()`并`file.exists()`确保在任何给定时间点只能运行我的应用程序的一个实例。但是我开始看到该方法的主要缺陷：

1）您可以复制锁定文件周围的所有文件并运行可执行文件。

2）如果JVM进程被强制结束，锁定文件不会被删除。

什么（可能除了套接字锁定）是一个不错的选择？

**编辑：**
使用套接字仅锁定一个进程效果很好并且非常干净，但我听说与其他应用程序和防火墙的潜在冲突。例如，如果选择的端口由于某种原因被另一个进程使用，我的应用程序会认为另一个实例已经在运行——这就是我想要一个替代解决方案的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:48:49.847

您可以使用 FileChannel#lock() 方法进行多 JVM 锁定：

```
RandomAccessFile raf = new RandomAccessFile(".lock", "rw");
FileChannel fileChannel = raf.getChannel();
fileChannel.lock(); 
```

完成后不要忘记小心释放所有资源。

# qt - QT FIleSystemModel 中的 setRootPath() 到文件

> ID：13784684
> 
> 赞同：0
> 
> 时间：2012-12-09T04:34:12.320
> 
> 标签：qt

我正在使用 QT 构建一个简单的文件浏览器，但我似乎无法将模型的 setRootPath() 设置为文件，而不仅仅是一个目录。

前任：

```
setRootPath("/Users/Foo/Bar") works, but

setRootPath("/Users/Foo/Bar/readme.txt") simply sets the root path to "." 
```

不知道我错过了什么。我的应用程序中的其他所有内容都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:35:22.537

你可以这样做：

```
QFileInfo m_FileInfo = QString("C:/Users/Foo/Bar/readme.txt");
setRootPath(m_FileInfo.absolutePath()); 
```

我们正在做的是使用 QFileInfo 来获取文件的[absolutePath()](http://doc.qt.digia.com/qt/qfileinfo.html#absolutePath)。所以它会将根路径设置为 C:/Users/Foo/Bar。

# java - 2的幂时如何将除法转换为按位移位？

> ID：13784685
> 
> 赞同：5
> 
> 时间：2012-12-09T04:34:33.187
> 
> 标签：java, algorithm, bit-manipulation, bitwise-operators

我有以下需要经常做的部门：

```
int index = pos / 64; 
```

在 cpu 级别上除法可能很昂贵。我希望有一种方法可以通过按位移位来做到这一点。我还想了解如何从除法转换到移位，换句话说，我不想只记住按位表达式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T04:36:05.473

`int index = pos >> 6`会这样做，但这是不必要的。任何合理的编译器都会为你做这种事情。Sun/Oracle 编译器当然会。

一般规则是`i/(2^n)`可以用`i >> n`. 同样`i*(2^n)`是`i << n`。

`i`如果已签名，您需要关注负数表示。例如，二进制补码产生合理的结果（如果右移是算术 - 符号位复制）。有符号的幅度没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T04:36:56.277

编译器将以最有效的方式为您实现它，只要您了解您需要什么并要求编译器准确地做到这一点。如果在这种情况下 shift 是最有效的方式，编译器将使用 shift。

但请记住，如果您正在执行有*符号*除法（即`pos`有符号），那么仅靠班次就无法完全实现。Shift 本身会为 的负值生成无效结果`pos`。如果编译器决定对该操作使用移位，它还必须对中间结果执行一些移位后更正，以使其符合语言规范的要求。

出于这个原因，如果您真的在寻找除法操作的最大可能效率，您必须记住不要轻率地使用有符号类型。尽可能使用无符号类型，仅在必要时使用有符号类型。

PS AFAIK，Java实现欧几里得除法，意思是上面的评论不适用于Java。欧几里得除法是通过在 2 的补码表示中对负除数进行移位来正确执行的。上述说明适用于 C/C++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T04:38:30.373

[http://www.java-samples.com/showtutorial.php?tutorialid=58](http://www.java-samples.com/showtutorial.php?tutorialid=58)

对于要除以的每个 2 的幂，将其右移一次。所以除以 4 你会右移两次。除以 8 右移 3 次。除以 16 右移 4 次。32 -> 5 次。64 -> 6 次。所以除以 64 你可以右移 6 次。我的价值 = 我的价值 >> 6;

# javascript - 在页面周围随机移动图像

> ID：13784686
> 
> 赞同：7
> 
> 时间：2012-12-09T04:34:42.193
> 
> 标签：javascript, jquery, containers, spritely

我创建了三个热气球的 .png 图像。每个都有不同的尺寸，因此它们散发出“深度”的概念。对这些 .png 进行编码以便它们像热气球一样在我的容器周围移动和漂浮的最佳方法是什么？

我已经尝试了来自 Spritely 网站的以下代码，我将其改编为：

```
$('#balloon1')
  .sprite({fps: 3, no_of_frames: 1})
  .spRandom({
      top: 70,
      left: 100,
      right: 200,
      bottom: 340,
      speed: 10000,
      pause: 3000
  }); 
```

我将此代码用于其他两个气球 (#balloon1) 和 (#balloon2)，然后将它们各自的 DIV 放入标有“#sky”的容器 DIV 中

我认为将速度设置为 10000 会使它们漂浮得慢很多。

然而，它并没有像我希望的那样运行。首先，一旦页面加载，所有三个气球（我最初定位在容器的三个不同位置）都会立即浮动到同一个确切的位置，之后它们似乎不会从那个位置移动太多。

有没有更简单、更有效的方法让我的三个气球图像在我的容器中随机、真实地移动？

如果您能提供一些帮助，非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T04:51:05.187

这是您的问题的现有 [部分] 解决方案：

HTML：

```
<div id="container">
<div class='a'></div>
    <div class='b'></div>
    <div class='c'></div>
</div>​ 
```

CSS：

```
div#container {height:500px;width:500px;}

div.a {
width: 50px;
height:50px;
 background-color:red;
position:fixed;

}
div.b {
width: 50px;
height:50px;
 background-color:blue;
position:fixed;

}
div.c {
width: 50px;
height:50px;
 background-color:green;
position:fixed;

} 
```

​ JavaScript：

```
$(document).ready(function() {
    animateDiv($('.a'));
        animateDiv($('.b'));
        animateDiv($('.c'));

});

function makeNewPosition($container) {

    // Get viewport dimensions (remove the dimension of the div)
    var h = $container.height() - 50;
    var w = $container.width() - 50;

    var nh = Math.floor(Math.random() * h);
    var nw = Math.floor(Math.random() * w);

    return [nh, nw];

}

function animateDiv($target) {
    var newq = makeNewPosition($target.parent());
    var oldq = $target.offset();
    var speed = calcSpeed([oldq.top, oldq.left], newq);

    $target.animate({
        top: newq[0],
        left: newq[1]
    }, speed, function() {
        animateDiv($target);
    });

};

function calcSpeed(prev, next) {

    var x = Math.abs(prev[1] - next[1]);
    var y = Math.abs(prev[0] - next[0]);

    var greatest = x > y ? x : y;

    var speedModifier = 0.1;

    var speed = Math.ceil(greatest / speedModifier);

    return speed;

}​ 
```

[**现场 JSFiddle 演示**](http://jsfiddle.net/j2PAb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T12:13:02.163

如果有人对 jQuery 插件感兴趣（分叉相同的功能）更容易应用于页面中的多个元素。

HTML：

```
<div id="container">
   <div class='a rand'></div>
   <div class='b rand'></div>
   <div class='c rand'></div>
</div> 
```

CSS：

```
div#container {height:500px;width:500px;}
div.a {
width: 50px;
height:50px;
 background-color:red;
position:fixed;
    top:100px;
    left:100px;
}
div.b {
width: 50px;
height:50px;
 background-color:blue;
position:fixed;
    top:10px;
    left:10px;
}
div.c {
width: 50px;
height:50px;
 background-color:green;
position:fixed;
    top:200px;
    left:100px;
} 
```

jQuery插件：

```
(function($) {

  $.fn.randomizeBlocks = function() {
    return this.each(function() {
            animateDiv($(this));
    });
  };

  function makeNewPosition($container) {
      // Get viewport dimensions (remove the dimension of the div)
      var h = $container.height() - 10;
      var w = $container.width() - 10;

      var nh = Math.floor(Math.random() * h);
      var nw = Math.floor(Math.random() * w);

      return [nh, nw];

  }

  function animateDiv($target) {
      var newq = makeNewPosition($target.parent());
      var oldq = $target.offset();
      var speed = calcSpeed([oldq.top, oldq.left], newq);

      $target.animate({
          top: newq[0],
          left: newq[1]
      }, speed, function() {
          animateDiv($target);
      });

  };

  function calcSpeed(prev, next) {

      var x = Math.abs(prev[1] - next[1]);
      var y = Math.abs(prev[0] - next[0]);

      var greatest = x > y ? x : y;

      var speedModifier = 0.03;

      var speed = Math.ceil(greatest / speedModifier);

      return speed;

  }

}( jQuery )); 
```

用法：

```
$(document).ready(function() {
    $('.rand').randomizeBlocks();
}); 
```

[http://jsfiddle.net/fmvtb88d/](http://jsfiddle.net/fmvtb88d/)

# spring - 客户端发送的请求语法错误 +spring

> ID：13784689
> 
> 赞同：2
> 
> 时间：2012-12-09T04:35:25.727
> 
> 标签：spring, hibernate, jsp

我搜索了这个问题，当我得到它时，命名冲突有一些问题，但我还是找不到原因。我会很感激帮助。以下是 .jsp 中调用控制器的行：

```
<td>
    <a href="message/createMessage">
        Reply
    </a>
    <input type="hidden" name="receiver" value="${message.fromUser}">
</td> 
```

`${message.fromUser}`从模型中获取所需的属性。我确信这不是问题的原因，因为此页面中的其他链接可以工作并使用相同的模型。控制器如下：

```
@Controller
@RequestMapping("/message")
public class MessageController
{

    @RequestMapping("createMessage")
    public String createMessage(
        @RequestParam("receiver") String receiver,
        HttpSession session,
        Model model)
    {
        try
        {
            MessageDAO mDao = new MessageDAO();
            Message message = new Message();
            String fromUser = (String) session.getAttribute("userName");
            message.setFromUser(fromUser);
            message.setUserName(receiver);
            Message message2 = mDao.create(message);
            model.addAttribute(message);

            return "newMessage";

        }
        catch (Exception e)
        {
            model.addAttribute("message", "Can't create message!");
            return "redirect:/"; // ?? should add a dialog box for error
        }

    }
} 
```

感谢您的帮助！

作为解决问题的尝试，并基于第一个答案，我尝试使用 url-rewriting。在我的控制器中使用 @PathVariable("receiver") 。仍然是同样的问题。我在此处添加了完整修订的 jsp：单击消息的回复链接时发生错误。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<h1>welcome ${sessionScope.user.userName}</h1>

<form:form method="POST" action="message/deleteMessage">
<table border="1">
    <tr>
        <th>Message ID</th>
        <th>From User</th>
        <th>Message</th>
        <th>Date</th>
        <th>Reply to User</th>
        <th>Delete</th>
    </tr>

    <c:forEach items="${messages}" var="message"  >
    <tr>
      <td>${message.messageID}</td>
      <td>${message.fromUser}</td>
      <td>${message.message}</td>
      <td>${message.messageDate}</td>
      <td><a href="message/createMessage?receiver=${message.fromUser}">Reply</a></td>
      <td><input type="checkbox" name="delete" value="${message.messageID}"> </td>
    </tr>
    </c:forEach>
    <tr><td colspan="6"><input type="submit" value="Delete selected messages"></td></tr>    

</table>
</form:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:21:34.747

在您的“表单”中，您有一个纯 html 超链接，它不执行任何表单提交（因此隐藏字段的值永远不会被发送。

所以你需要声明一个`<FORM action= 'message/createMessage' >`元素。

然后您需要使用 AJAX 提交表单或创建提交按钮。另一种方法是通过附加表单的值来手动传递接收器值`createMessage?receiver=someValue`（我将其添加为示例，我认为这不是推荐的方式，无论如何，一切都有其优点和缺点）。

所以有很多方法可以传递参数。

见[http://www.w3.org/TR/html401/interact/forms.html](http://www.w3.org/TR/html401/interact/forms.html)

# jquery - 在带有 Jquery 插件的 Dreamweaver CS5 中使用图像映射

> ID：13784690
> 
> 赞同：0
> 
> 时间：2012-12-09T04:35:38.563
> 
> 标签：jquery, image, map, undefined-reference

我目前正在尝试在我正在构建的网页上使用图像映射。当我绘制地图并添加链接时，页面将我带到“未定义”网址的错误。我在一张图像中有多个热点，我相信 jQuery 的某些东西把我弄乱了。下面是我的 jQuery 代码。我对网页设计相当陌生，任何帮助将不胜感激。

```
}).click (function () {
    window.location = $(this).find('a').attr('href');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:19:49.980

如果您无法单步执行代码，请像这样调试它：

```
}).click (function () {
    alert( $(this).find('a').attr('href')) ;
}); 
```

# matlab - Matlab彩色瓷砖

> ID：13784691
> 
> 赞同：1
> 
> 时间：2012-12-09T04:35:41.653
> 
> 标签：matlab

我正在尝试使用 matlab 生成具有随机颜色的平铺图像，与[此](http://www.cs.cornell.edu/courses/cs100M/2007fa/Graphics/RGB.pdf)示例非常相似，除了随机颜色。

这是我的代码：

为什么我只得到一种颜色，而不是 5 x 5 的随机颜色拼贴？

```
for i=0:4
    for j=0:4% Draw tile (i,j)
        r = randi(255,1,3);
        c = [r(1)/255, r(2)/255, r(3)/255];
        fill([i i+1 i+1 i i],[j j j+1 j+1 j],c)   
    end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T04:44:13.477

add`hold on`以在添加新图形时保留当前图形，例如：

```
hold on
for i=0:4
for j=0:4% Draw tile (i,j)
    r = randi(255,1,3);
    c = [r(1)/255, r(2)/255, r(3)/255];
    fill([i i+1 i+1 i i],[j j j+1 j+1 j],c)   ;

end
end
hold off 
```

![在此处输入图像描述](../Images/a23e0cb922230569fa77a0a24e3fba1b.png)

# jquery - jQuery .index() 返回意外值

> ID：13784695
> 
> 赞同：3
> 
> 时间：2012-12-09T04:36:52.320
> 
> 标签：jquery

我手上有一个有趣的情况。也许是因为我工作这么晚所以脑子放屁，但我遇到了最奇怪的事情`.index()`

[这是一个jsfiddle](http://jsfiddle.net/Q5Lmy/)

The problem is that when a select box change event handler gets triggered, it tries to find the index of the current select box. 如果页面上唯一的元素是选择框，那么它返回的索引是正确的。但是，如果还有其他元素，即使它们不是选择框，也会`.index()`返回基于页面上总元素的索引，而不仅仅是`$('select')`元素。

这是我的事件处理程序：

```
$('select').change(function() {
        alert(
            '$(\'select\').length: ' + $('select').length + "\n" +
            '$(\'select\').last().index(): ' + $('select').last().index() + "\n" +
            '$(this).index(): ' + $(this).index());
    }); 
```

如果由于某种原因这是正确的行为，有人可以解释为什么会这样吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:42:05.343

该`index`函数返回元素相对于直接父元素的从零开始的位置，默认情况下标签名称无关紧要。用于`.index("select")`仅考虑`select`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:47:20.970

您必须在索引中指定选择器。

[http://jsfiddle.net/Q5Lmy/1/](http://jsfiddle.net/Q5Lmy/1/)

```
$(document).ready(function() {
    $('select').change(function() {
        alert(
            '$(\'select\').length: ' + $('select').length + "\n" +
            '$(\'select\').last().index(): ' + $('select').last().index('select') + "\n" +
            '$(this).index(): ' + $(this).index('select'));
    });

}); 
```

[http://api.jquery.com/index/](http://api.jquery.com/index/) ​</p>

# windows-phone-8 - 有什么方法可以调整 Windows Phone 8 Live Tiles 背面的文本大小？

> ID：13784698
> 
> 赞同：3
> 
> 时间：2012-12-09T04:37:01.167
> 
> 标签：windows-phone-8, live-tile

我正在为我的瓷砖使用[翻转模板](http://msdn.microsoft.com/en-us/library/jj206971.aspx)。在 MSDN 页面上，可以看到文本是换行的，并且尺寸较小。

这并不代表我在动态磁贴中看到的行为。我最多可以在宽动态磁贴上获得 3 行大文本。文本不换行。这发生在所有不同屏幕尺寸的模拟器上。令人沮丧的是，我可以在 Medium 动态磁贴上获得 4 行文本，但是额外的内容行太长，无论如何都不能放在那里，所以我不包括它。

我使用计划任务定期更新我的图块：

```
Earthquake latest = quakes.First();
newTileData = new FlipTileData
{
    Title = String.Format(AppResources.LiveTileTitleFormat, quakes.Count),
    BackTitle = String.Format(AppResources.LiveTileTitleFormat, quakes.Count),
    BackContent = String.Format(AppResources.LiveTileBackContentFormat,  latest.FormattedMagnitude, latest.FormattedDepth),
    WideBackContent = String.Format(AppResources.LiveTileWideBackContentFormat, latest.FormattedMagnitude, latest.FormattedDepth, latest.RelativeLocation)
};

ShellTile tileToFind = ShellTile.ActiveTiles.First();
if (tileToFind != null)
{
    tileToFind.Update(newTileData);
} 
```

左边的模拟器试图显示 4 行。右侧的模拟器显示文本未换行。

![在此处输入图像描述](../Images/e5bf9c23e6aef41529aedc49eb0cb4d9.png)

那么，有没有办法强制第四行，或指定较小的字体大小，或两者兼而有之？我怀疑没有，而且 MSDN 文章只是显示了 Windows 8（不是 WP8）动态磁贴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T13:22:36.197

无法调整 WP8 磁贴上的文本大小。您可以通过创建图像并将其放置在图块上来伪造它：

1.  创建容纳图像控件和文本块的用户控件
2.  将您平铺图像分配给图像控件，并将具有所需大小的文本分配给文本块。
3.  然后通过以下代码创建控件的快照。
4.  使用此图像来实现切片生成。

    ```
     private WriteableBitmap RenderControlAsImage(UserControl element)
     {
        element.UpdateLayout();
        element.Measure(new Size(element.Width, element.Height));
        element.Arrange(new Rect(0, 0, element.Width, element.Height));
        return new WriteableBitmap(element, null);
     } 
    ```

# twitter-bootstrap - 如何从 twitter 引导按钮下拉菜单上的列表项中删除背景颜色？

> ID：13784700
> 
> 赞同：1
> 
> 时间：2012-12-09T04:37:02.363
> 
> 标签：twitter-bootstrap

我在按钮下拉列表中苦苦挣扎，无法删除悬停在菜单列表项时出现的蓝色背景颜色。我尝试更改 a:hover CSS，但没有成功。也许这个背景颜色是用javascript动态添加的？

谢谢！

**编辑**：

我尝试了这段代码，但没有成功：

```
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.js"></script>
  </head>

  <body>

    <style type="text/css" media="screen">
      .dropdown > li > a:hover {
          background-color: transparent;   
      }
    </style>

    <div class="btn-group">
      <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
        Action
        <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li><a href="#">link me</a></li>
        <li><a href="#">link me too</a></li>
      </ul>
    </div>

    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>

  </body>

</html> 
```

看起来 CSS 背景颜色未应用于元素。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T04:54:32.767

这应该工作

```
.dropdown-menu li a:hover :focus {
    color:black;/*color turns white if not changed*/
    background: none;           
} 
```

# android - 基于短信对话电话号码的自定义 IME

> ID：13784705
> 
> 赞同：0
> 
> 时间：2012-12-09T04:37:43.273
> 
> 标签：android

我正在从 Android 示例构建一个自定义 IME 软键盘。有什么方法可以让我找出打开键盘的对话的电话号码/联系信息是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:51:33.083

我相信您只能获取附加到 IME 的 EditText 的详细信息，而没有其他详细信息。

此外，每个 OEM 都有一个定制的应用程序，一些用户可能还安装了第三方 SMS 应用程序，因此可能无法获取详细信息

# jquery - 为什么我无法在不破坏代码的情况下阻止动画队列堆叠？

> ID：13784709
> 
> 赞同：3
> 
> 时间：2012-12-09T04:38:35.040
> 
> 标签：jquery, css, animation, queue

我正在尝试使用 jquery 和 CSS 为导航侧边栏的按钮设置动画，我用它来表示当鼠标悬停在每个按钮上时选择了哪个按钮。

目前，我的 CSS 代码如下所示：

```
#navbutton {position:relative; width:178px; height:35px; border:1px #FFF solid; z-index:+3; font-family:'Capriola', sans-serif; font-size:18px; text-align:center;}

#navbutton.button {color:#77D; background-color: #F0B0D0;}
#navbutton.button_hover {color:#66C; background-color: #FCF; padding:10px;} 
```

还有我的jQuery：

```
<script type="text/javascript">
$(document).ready(function(){

$("#sidebar div").mouseenter(buttonHover) 

function buttonHover(){
    $(this).stop().switchClass('button','button_hover',500);
    }

$("#sidebar div").mouseleave(button)

function button(){
    $(this).stop().switchClass('button_hover','button',500);
    }   

});
</script> 
```

在我将 .stop() 添加到动画的每个部分之前，每次将鼠标移到每个按钮上然后移除时，动画队列都会堆积起来。但是，现在已经应用了 .stop()，但是，如果在动画期间将鼠标从按钮上移开，则该按钮将冻结并保持在动画中间状态，无法通过将鼠标悬停在页面上来修复被重新加载，而不是恢复到原来的 mouseleave 状态。

从我读过的所有内容来看，情况不应该如此。应用 .stop() 后，谁能说出为什么我的动画队列会被破坏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T04:40:44.630

`.stop(true,true)`用来让它走到当前动画的结尾，否则它会在任何地方停止。

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:58:05.373

我尝试了以下似乎在 Firefox 中工作的代码。实际上，如果您在动画中途将鼠标移开或移开，您的权利就会中断。看起来其他人的答案是解决方案。

```
<html><head>

<style type="text/css">
:button {position:relative; width:178px; height:35px; border:1px #FFF solid; z-index:+3; font-family:'Capriola', sans-serif; font-size:18px; text-align:center;}
.effect {color:#77D; background-color: #F0B0D0;}
.effect_hover {color:#66C; background-color: #FCF; padding:10px;}
</style>

<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

<script type="text/javascript">
$(document).ready(function(){

$(":button").mouseenter(buttonHover) 
function buttonHover(){
    $(this).stop().switchClass('effect','effect_hover',500);
    }

$(":button").mouseleave(button)
function button(){
    $(this).stop().switchClass('effect_hover','effect',500);
    }   

});

</script>

</head><body>

<input type="button" value="Test Button">

</body></html> 
```

# google-app-engine - Google App Engine 转发请求

> ID：13784712
> 
> 赞同：1
> 
> 时间：2012-12-09T04:39:42.943
> 
> 标签：google-app-engine

有没有办法将传入的请求转发到 GAE，有点像反向代理，但没有 urlfetch？URLFetch 有很多错误，在攻击期间，我用完了资源，因此服务器崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:37:27.180

有很多方法可以进行转发或重定向。您可以在 DNS 中使用 cname 为您的新地址创建别名或在 HTML 中进行元刷新：

```
<meta http-equiv="refresh" content="0;URL='http://www.example.com/'" /> 
```

这完全取决于您的需求和请求的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:56:47.427

> 您可以使用 Python 标准库 urllib、urllib2 或 httplib 来发出 HTTP 请求。在 App Engine 中运行时，**这些库使用 App Engine 的 URL 获取服务执行 HTTP 请求**，该服务在 Google 的可扩展 HTTP 请求基础架构上运行。

因此，无论您使用什么，它都是 App Engine 的 URL Fetch 服务。所以我会说不。

[获取概述](https://developers.google.com/appengine/docs/python/urlfetch/overview)

# python - Python 函数注解有什么用？

> ID：13784713
> 
> 赞同：33
> 
> 时间：2012-12-09T04:40:19.157
> 
> 标签：python, python-3.x

我已经浏览了 PEP 3107 中的前几节，但我仍然不明白它们对语言有什么好处。在我看来，您可以使用装饰器将元数据添加到函数中。例如

```
def returns(return_type):
  f.return_type = return_type  # <- adding metadata here
  return f

@returns(Foo)
def make_foo(): ... 
```

您也可以将元数据添加到参数中，如果您利用默认参数，它看起来会很漂亮，如下所示：

```
import inspect

def defaults_are_actually_metadata(f):
  names, args_name, kwargs_name, defaults = inspect.getfuncspec(f)
  f.parameter_metadata = dict(zip(names[-len(defaults):], defaults))
  f.__defaults__ = ()
  return f

@defaults_are_actually_metadata
def haul(load="Stuff to be carried.",
         speed_mph="How fast to move the load (in miles per hour)."): ... 
```

至少我最初的印象是注解是多余的：装饰器可以做所有注解可以做的事情（甚至更多）。在向函数添加元数据时，为什么注释比装饰器更好？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-09T15:19:47.510

正如您所提到的，相关的 PEP 是[3107](http://www.python.org/dev/peps/pep-3107/)（链接以便于参考，以防遇到此问题的其他人尚未阅读）。

目前，注释是一种实验，一种正在进行中的工作。实际上，[python-ideas 邮件列表](http://mail.python.org/pipermail/python-ideas/2012-December/thread.html)中最近有一个关于该主题的线程可能会有所帮助。（提供的链接仅用于每月存档；我发现特定帖子的 URL 往往会定期更改。有问题的线程在 12 月初附近，标题为“[Python-ideas] 函数注释约定”。第一篇文章来自 Thomas Kluyver 于 12 月 1 日。）

以下是 Guido van Rossum 在该线程中的一篇帖子：

Jasper St. Pierre 在 2012 年 12 月 4 日上午 11:43 写道：

> 确实。我以前看过注释，但我从来不明白它的目的。这似乎是一个在设计和实施时没有考虑任何目标的功能，社区应该自己发现目标。

圭多的回应：

> 从相反的方面来说。有太多的用例立即看起来很重要，我们不知道哪些是最重要的或如何组合它们，所以我们决定采取两步法：在第一步中，我们设计了语法，而在第 2 步中，我们将设计语义。这个想法非常明确，一旦语法确定下来，人们就可以自由地尝试不同的语义——只是不在标准库中。这个想法也是，最终，从所有这些实验中，会出现一个适合标准库的实验。

贾斯珀圣皮埃尔：

> 那么，如果我可能会问，注释的最初目标是什么？PEP 给出了一些建议，但没有留下任何具体内容。它是为 IDE 或检查源代码的静态分析工具而设计的吗？应用程序本身可以通过什么来提供特殊行为，例如命令行解析器或运行时静态检查器？

圭多的回应：

> 在某种程度上，几乎所有上述内容。但对我个人而言，主要目标始终是为参数和返回值指定类型约束（可能还有其他约束）。我在不同的时间都在玩弄组合类型的特定方法。例如 list[int] 可能意味着一个整数列表，而 dict[str, tuple[float, float, float, bool]] 可能意味着一个 dict 将字符串映射到三个浮点数和一个布尔值的元组。但我觉得就这样的符号达成共识要比对参数注释的语法达成共识要困难得多（想想你可以对这两个例子提出多少反对意见:-)——我一直有强烈的使用欲望"var: type = default" 并使该类型成为与默认值同时评估的运行时表达式。

还有一点来自 Ned Batchelder 的幽默：

> 对我来说，一个有说服力的时刻是在 PyCon 的早期 Py3k 主题演讲中（可能是在达拉斯或芝加哥？），Guido 不记得“注释”这个词，并说，“你知道，那些不是类型声明的东西？” :-)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-09T05:06:51.627

我认为第一段说明了一切：

> 因为 Python 的 2.x 系列缺少注释函数参数和返回值的**标准方式**

（强调我的）

使用标准方法执行此操作的好处是您可以准确地知道注释的位置。

至于您关于有另一种方法的论点，您可以对列表推导提出相同的论点：

```
out = []
for x in my_iterable:
    out.append(x) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-09T06:51:22.763

他们有两个不同的角色。

注释是参数的文档/注释，而装饰器转换函数。

> Python 本身并不赋予注解任何特定的含义或意义。

[Python 装饰器页面](http://wiki.python.org/moin/PythonDecorators)

> 装饰器动态地改变函数、方法或类的功能，而无需直接使用子类或更改被装饰函数的源代码。

# php - 试图将成员区域从一个站点合并到另一个站点

> ID：13784717
> 
> 赞同：-1
> 
> 时间：2012-12-09T04:40:55.880
> 
> 标签：php, curl

我正在一个网站上工作，我需要使用登录表单登录到另一个站点，然后将成员区域从该站点带到我正在构建的站点。

我可以访问这两个站点，并且可以对任一站点进行更改。我会直接合并旧代码中的代码，但它是在 ASP 中，我正在使用 PHP。

有任何想法吗？目的是让某人通过站点 A 登录该站点（没问题），然后从站点 B 获取信息（没问题）并将其呈现在站点 A 中（如果我使用 cURL 获取站点并将其分解，则没有问题然后将其显示在新的上）。我遇到的问题是新站点上的链接以及从旧站点收集的链接仍将指向旧站点上的链接。也许有一种方法可以以某种方式在新站点上动态生成这些页面？还是我走错了路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:56:56.563

它本质上是一个代理。您需要解析并重建从站点 B 收到的 html 源代码中的链接。没有可用的函数，但有许多开源代理脚本可以从中获取代码。

Glype 应该是开源的（不幸的是，该站点现在似乎已损坏）。

[https://www.glype.com/](https://www.glype.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T10:16:45.413

您需要拆分链接以根据它们指向的位置更改它们。

1.  应该重写 css/js 的链接以指向真实的 url（请注意，ajax 内容将不起作用，因为您不能向另一个网站发出 ajax 请求）
2.  指向真实网站的绝对链接应更改为相对链接
3.  相对链接应指向您的网站（例如`$new_url = '/viewpage/?page=' . urlencode($url);`）
4.  应该以某种方式处理指向其他域（而不是您代理的旧网站）的绝对链接，想想您到底想对它们做什么。

# javascript - ASP.NET 无法检测到 IE10 导致 _doPostBack is undefined JavaScript 错误

> ID：13784718
> 
> 赞同：9
> 
> 时间：2012-12-09T04:41:10.030
> 
> 标签：javascript, asp.net, internet-explorer-10, dopostback

ASP.NET 无法检测到 IE10 导致以下错误：

> `_doPostBack`是未定义的 JavaScript 错误

或保持 FF5 滚动条位置。

.NET 2.0 和 .NET 4 附带的浏览器定义文件中存在一个错误，即它们包含特定范围浏览器版本的定义。但是某些浏览器（如 IE 10）的版本不再在这些范围内。因此，ASP.NET 将它们视为未知浏览器，默认为下层定义，这有一定的不便，比如它不支持 JavaScript 等特性。

[http://support.microsoft.com/kb/2600100](http://support.microsoft.com/kb/2600100)上的 Win7 SP1修复程序对我不起作用。请帮助我。我的工作环境是：

.NET 框架 3.5 SP1，Windows Server 2003

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:36:44.570

尝试将来自 NuGet [http://nuget.org/packages/App_BrowsersUpdate](http://nuget.org/packages/App_BrowsersUpdate)的浏览器定义文件安装到您的项目中。ASP.NET 4 的浏览器定义文件与 ASP.NET 3.5 兼容，所以应该没问题。如果您在计算机上没有适当的权限，则可能在安装您提到的修补程序时遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:20:16.333

如果您仍然遇到此问题，您可以将一个小代码片段添加到您的 global.asax 中，作为临时解决方法解决该问题，直到您修补服务器为止。

[http://ronniediaz.com/2013/02/07/ie10-imagebutton-_dopostback-undefined-bug-with-update-panel-script-manager/](http://ronniediaz.com/2013/02/07/ie10-imagebutton-_dopostback-undefined-bug-with-update-panel-script-manager/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T18:17:43.690

KB 2600100 修补程序已替换为 Microsoft .NET Framework 4 可靠性更新 2 (KB2600217) [http://support.microsoft.com/kb/2600217](http://support.microsoft.com/kb/2600217) - 文档指出此更新解决了 7 个问题，其中包括您提到的两个问题。但似乎您需要使用 Microsoft .NET framework 4 而不是 3.5。如果 KB 2600100 修补程序不起作用，您可能需要检查 IIS 服务器管理器以了解正在使用哪个 .NET 框架版本来运行您的网站。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T10:14:30.840

我应用于我们网站的第一个临时修复是添加到母版页。但我不想在网站的剩余生命周期中强制使用这种模式，我想要一个体面的解决方案。我删除了母版页中的修复程序，从 KB2600100 安装了修复程序，但问题并没有消失。应用了 Ronnie 链接中的脚本，就成功了。

不过，我想知道为什么修补程序没有帮助。

# asp.net - VB.NET 从 SQL 表中获取字节

> ID：13784720
> 
> 赞同：0
> 
> 时间：2012-12-09T04:41:40.590
> 
> 标签：asp.net, .net, sql-server, vb.net

我来这里已经有一段时间了。我一直在研究附件存储到数据库的 ASP 项目。我正在尝试将存储在表中的字节存储到文件中。我能够制作文件，但是，我无法从表中获取字节。

这是将文件输入到表中的代码：

```
'Saves the upload file data to database for the using Request_ID after the request has been created
    strFileName = FileUploadReqDtl.FileName
    strFileExt = strFileName.Substring(strFileName.IndexOf(".") + 1)
    intFileSize = FileUploadReqDtl.PostedFile.ContentLength()

    Dim theDataSize As Byte() = New Byte(FileUploadReqDtl.PostedFile.ContentLength - 1) {}
    Dim uploadedFile As HttpPostedFile = FileUploadReqDtl.PostedFile
    Dim theData = uploadedFile.InputStream.Read(theDataSize, 0, CInt(FileUploadReqDtl.PostedFile.ContentLength)) 
```

我能够在一个页面上创建一个链接到另一个 ASP 页面并尝试使文件可下载。我知道 SQL 可以正常工作以从表中获取记录，但是，我无法正确获取字节：

```
 If (dr.HasRows = True) Then
            While dr.Read()
                ' Casting the value returned by the datareader to the byte[] data type.
                result = CType(dr.GetValue(0), Byte())
                strFileName = dr.GetString(1)
                Debug.Write("strFileName: " & strFileName & vbCrLf)
            End While
        End If
        dr.Close()
        cnToDb.Close()
        ShowFile(strFileName, result, MimeType)
    Catch ex As Exception
        MsgBox("Uh oh, I couldn't get the attachment!")
        Debug.Write("Uh oh, I couldn't get the attachment!")
        Debug.Write(ex.Message & " - " & ex.StackTrace & vbCrLf & vbCrLf)
        result = Nothing
    End Try 
```

这是 ShowFile 函数，它最终使用数据库中的字节“创建文件”：

```
 Dim fileData() As Byte
    fileData = byteFileData

    Response.Clear()
    Response.AddHeader("Content-Disposition", "attachment; filename=" + strFileName)
    Response.ContentType = MimeType
    Response.BinaryWrite(fileData)
    Response.End()
    Response.Flush() 
```

我遇到的一个例外是：

```
 SQL: SELECT Data, FileName FROM tblFileUploadData WHERE Report_ID =
116

strFileName: TheAwesomeAttachment.txt A first chance exception of type
'System.Threading.ThreadAbortException' occurred in mscorlib.dll Uh
oh, I couldn't get the attachment!Thread was being aborted. -    at
System.Threading.Thread.AbortInternal()    at
System.Threading.Thread.Abort(Object stateInfo)    at
System.Web.HttpResponse.End()    at
WebApplication3.WebForm2.ShowFile(String strFileName, Byte[]
byteFileData, String MimeType) in C:\Users\Mike\documents\visual
studio
2010\Projects\WebApplication3\WebApplication3\Attachment.aspx.vb:line
81    at WebApplication3.WebForm2.getAttachment(Int32 RequestID,
String MimeType) in C:\Users\Mike\documents\visual studio
2010\Projects\WebApplication3\WebApplication3\Attachment.aspx.vb:line
56

A first chance exception of type
'System.Threading.ThreadAbortException' occurred in
WebApplication3.DLL An exception of type
'System.Threading.ThreadAbortException' occurred in
WebApplication3.DLL but was not handled in user code The thread '<No
Name>' (0x728) has exited with code 0 (0x0). The program '[13512]
WebDev.WebServer40.EXE: Managed (v4.0.30319)' has exited with code 0
(0x0). The program '[13512] WebDev.WebServer40.EXE: Program Trace' has
exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:20:08.517

看一眼：

[http://support.microsoft.com/kb/312629](http://support.microsoft.com/kb/312629)

“对于 Response.End，调用 HttpContext.Current.ApplicationInstance.CompleteRequest 方法而不是 Response.End 以绕过对 Application_EndRequest 事件的代码执行”

我喜欢为这种情况创建一个 .ashx 文件。您可以链接到它，它会下载文件而不显示页面。

```
Public Class DownloadFile
Implements System.Web.IHttpHandler

Public Sub ProcessRequest(context As HttpContext) Implements IHttpHandler.ProcessRequest

    Try

        Dim id As String = context.Request.QueryString("id")

        Dim filename As String = ""

        Dim output As Byte()

        filename = ServiceHelper.GetFilenameByID(id)

        output = ServiceHelper.GetFileBytesByID(id)

        Dim ext As String = System.IO.Path.GetExtension(filename)
        Dim contenttype As String

        'clear the current output content from the buffer
        context.Response.Clear()
        'add the header that specifies the default filename for the
        'Download/SaveAs dialog

        context.Response.AddHeader("Content-Disposition", "attachment; filename=" & filename)

        'add the header that specifies the file size, so that the browser
        'can show the download progress
        context.Response.AddHeader("Content-Length", output.Length.ToString())
        'specify that the response is a stream that cannot be read by the
        'client and must be downloaded
        'Response.ContentType = "application/octet-stream"

        context.Response.Buffer = True

        Select Case ext
            Case ".doc"
                contenttype = "msword"
            Case ".pdf"
                contenttype = "pdf"
            Case ".xls"
                contenttype = "x-excel"
            Case ".ppt"
                contenttype = "ms-powerpoint"
            Case Else
                contenttype = "octet-stream"
        End Select

        context.Response.ContentType = "application/" & contenttype
        context.Response.BinaryWrite(output)

        'http://support.microsoft.com/kb/312629
        'context.Response.End()
        context.ApplicationInstance.CompleteRequest()

    Catch
    End Try

End Sub

Public ReadOnly Property IsReusable() As Boolean Implements IHttpHandler.IsReusable
    Get
        Return False
    End Get
End Property

End Class 
```

# javascript - 从上一级目录加载本地 javascript 文件

> ID：13784723
> 
> 赞同：2
> 
> 时间：2012-12-09T04:42:10.670
> 
> 标签：javascript, ajax, dom, xmlhttprequest

我目前签约的地方不能使用 CMS 或 PHP，但他们希望我使用 HTML 和 JavaScript 构建类似 CMS 的东西。

我知道这听起来很荒谬，但这些天我不想再寻找另一份工作，他们是我曾经工作过的最好的人——曾经——而且我老了。

CMS 的概念之一是拥有可以在任何给定时间包含的全局文件。

结果，我尝试了 $.ajax、$.get 等...，但我遇到了访问 URI 被拒绝的问题以及尝试加载当前目录的一个目录级别的文件的那些事情。

我能够通过使用旧的 XMLHttpRequest/ActiveXObject 来加载要加载的 javascript 文件。

但是，已加载的 div 内的脚本无法调用。我收到“找不到变量：mFunc”的错误，这是已加载到 div 中的函数的名称。

这是我的html的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>retrieve local file one level up</title>
<script type="text/javascript">
<!--
var createRequestObject = function(){   
    var req;

    if(window.XMLHttpRequest){
        // Firefox, Safari, Opera...
        req = new XMLHttpRequest();
    }else if(window.ActiveXObject){
        // Internet Explorer 5+
        req = new ActiveXObject("Microsoft.XMLHTTP");
    }else{
        alert('There was a problem creating the XMLHttpRequest object');
    }   
    return req; 
}

    // Make the XMLHttpRequest object
    var http = createRequestObject();

var sendRequestPost = function(){
    var jscript = '../test.js';
    // Open PHP script for requests
    http.open('GET', jscript);
    http.setRequestHeader('Content-Type', 'text/javascript');
    http.onreadystatechange = handleResponsePost;
    http.send(null);
    var mT = setTimeout("mFunc()", 2000);
}

var handleResponsePost = function(){
    if(http.readyState == 1){
        document.getElementById('mDiv').innerHTML = "Please wait, loading... " ; 
    }else if(http.readyState == 4 && http.status == 200){
        // Text returned from PHP script
        var response = http.responseText;
        document.getElementById('mDiv').innerHTML = response;

        if(response){
            // Update ajaxTest2 content
            document.getElementById('mDiv').innerHTML = response;
        }
    }else if(http.readyState == 2){
        document.getElementById('mDiv').innerHTML = http.responseText;
    }else if(http.readyState == 3){
        document.getElementById('mDiv').innerHTML = http.responseText;
    }
}
-->
</script>
</head>

<body onload="javascript:sendRequestPost();">
<div id="mDiv"></div>
</body>
</html> 
```

这是加载到 mDiv 中的 javascript：

```
<script type="text/javascript">
<!--
var mFunc = function(){
    var mScript = document.createElement("script");
    mScript.setAttribute("type","text/javascript");
    var data = 'alert("gets here");'
    mScript.text = data;

    var head = document.getElementsByTagName("head")[0];
    head.appendChild(mScript);
}
-->
</script> 
```

然而，两秒钟过去后，我收到了错误。

我确信这可能是因为浏览器只是将它视为 div 中的文本，所以我如何让它识别它是 javascript。

我尝试过使用 eval，我不想使用它，但甚至返回解析错误。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:08:14.430

`../`对本地文件系统（在大多数平台上）有意义，但对 HTML 或大多数网络服务器没有意义。请记住，URL 只是服务器的查询字符串。

一般来说，您需要解析 URL 以删除不需要的少数元素。但是，如果您只想要整个网站通用的脚本，则应该从根目录引用它们，因此相对 URL 将以`/`.

快速破解将是`/(.*)\/.*/.exec( '/foo/bar/baz.html' )[1]`. 这不会处理查询字符串跟随`?`或锚点跟随`#`，但您不会在静态网站上进行查询，并且在您使用更高级的技术之前不会有锚点。jQuery 具有更好的解析 URL 的实用程序，也基于正则表达式。

这与本网站无关，但您必须*非常*熟悉 XHR 才能实现 JavaScript CMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:34:12.063

好的，与我一起工作的另一位程序员找到了一个简单的解决方案。

而是尝试使用 ajax 从更高的目录级别加载 JavaScript 文件，然后运行 ​​document.writeln 或 document.getElementById("someDiv").innerHTML - 颠倒这些步骤。

像往常一样包含 JS 文件：

```
<script type="text/javascript" src="../../common/header.js"></script> 
```

在这个 JS 文件中

```
function CommonHeader(mPath) {
    document.writeln('<header>');
    document.writeln('  <div class="PageWidth">');
    document.writeln('      <h1><a href="' + mPath + 'index.html"     title="Something">Something<sup>&reg;</sup></a> <a  href="http://www.xyz.com/abc.html" title="Learn more about us."><em>Learn about us</em></a></h1>');
    document.writeln('      <nav>');
    document.writeln('          <ul>');
    document.writeln('              <li id="loginOut"></li>'); 
```

该命令需要您在流程开始时调用 document.writeln。

我们现在可以加载 header.js、footer.js 和我们希望加载的任何其他文件，同时在每个页面的顶部有一个数组表示这些文件的路径，用于较低目录级别的 html

```
dynamicPathArr[0] = "../../"; 
```

然后在任何文件中，您都可以调用该函数将日期写入页面

```
<script type="text/javascript">CommonHeader(dynamicPathArr[0])</script> 
```

我不敢相信我没有想到这个完全简单的解决方案。

虽然这对 SEO 不友好，但它只适用于在一个位置更新页眉、页脚、导航等，直到一切都完成。

并感谢您的回复

# layout - 具有长节点标签的图形的最佳布局

> ID：13784726
> 
> 赞同：1
> 
> 时间：2012-12-09T04:42:51.897
> 
> 标签：layout, visualization, graphviz

我的图表有很长的节点标签。Neato 使事物重叠；Circo 做了我想要的，它只是在节点之间创建了太多的空间。我想使用 Circo 结果并将节点靠得更近。

图码：[https ://clbin.com/BbsNP](https://clbin.com/BbsNP)

```
digraph {
graph [overlap=scale];
graph [bgcolor=white];
node [shape=box];
0 [label="long node label"
  ,shape=box];
1 [label="long node label"
  ,shape=box];
2 [label="aoeu aoe uaoeu oae ueaoo"
  ,shape=box];
3 [label="long node labelau"
  ,shape=box];
4 [label="aoeu aoe uaoeu oae ueaooeu"
  ,shape=box];
5 [label="long node labelaoeu"
  ,shape=box];
6 [label="aoeu aoe uaoeu oae ueaoe"
  ,shape=box];
7 [label="long node labelaoeuo"
  ,shape=box];
8 [label="aoeu aoe uaoeu oae ueao"
  ,shape=box];
9 [label="234 aoeua",shape=box];
10 [label="long node labeluu"
   ,shape=box];
11 [label="aoeu aoe uaoeu oae ueao"
   ,shape=box];
12 [label=oeuaoeu,shape=box];
13 [label="long node labelaa"
   ,shape=box];
14 [label="aoeu aoe uaoeu oae ueao"
   ,shape=box];
15 [label=aoeu,shape=box];
16 [label=aoeu,shape=box];
0 -> 1 [color=blue];
1 -> 0 [color=blue];
2 -> 1 [color=blue];
3 -> 0 [color=blue];
4 -> 3 [color=blue];
5 -> 0 [color=blue];
6 -> 5 [color=blue];
7 -> 0 [color=blue];
8 -> 7 [color=blue];
9 -> 7 [color=blue];
10 -> 0 [color=blue];
11 -> 10 [color=blue];
12 -> 10 [color=blue];
13 -> 0 [color=blue];
14 -> 13 [color=blue];
15 -> 13 [color=blue];
16 -> 13 [color=blue];
} 
```

图片： http: [//postimage.org/image/mrcak2021/](http://postimage.org/image/mrcak2021/)

```
circo -T jpg Test.Layout.LongNodeLabel.dot > Test.Layou.LongNodeLabel.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:23:04.877

这个问题类似于[这个最近的问题](https://stackoverflow.com/questions/13749885/control-spacing-in-twopi-graphviz)。如果您愿意使用`twopi`而不是`circo`，您可以设置[`ranksep`](https://web.archive.org/web/20171107200610/http://www.graphviz.org:80/content/attrs#dranksep)拉入或推出节点 - 以更改“同心圆的径向分离”，如文档所述。

我将您的图形代码更改为这样开始：

```
digraph {
    graph [bgcolor=white, overlap=true, ranksep=2.75]; 
```

然后使用`twopi`:绘制它`twopi test_graph.txt -Tpng -otest_graph.png`。这将产生以下图表：

![使用 twopi 绘制图形](../Images/3c6be9fa8ca441cbe8329306deb55d52.png)

以下是原作对比：

[![使用 circo 绘制图形](../Images/ac80051287dcaa8b6e5d80d76ca7a56b.png)](https://i.stack.imgur.com/XCuTK.jpg)

# html - 在 Joomla 代码中创建的这些 HTML 元素在哪里？

> ID：13784728
> 
> 赞同：0
> 
> 时间：2012-12-09T04:43:10.273
> 
> 标签：html, css, joomla, virtuemart

我正在为客户开发一个网站，而我以前从未使用过 Joomla。我一直在 HTML 中看到我在代码中找不到的元素。它是带有 Virtuemart 和 bt_bazaar 模板的 Joomla。

例如，在页面顶部有一个带有 class 的 div `bt_toolbar`。当我搜索站点的整个公共根目录时，它只会在 CSS 中找到一个匹配项，而这一行来自`bt_bazaar/helpers/bt_helpers.php`：

```
$this->bt_toolbar = '<jdoc:include type="modules" name="toolbar" style="BTxhtml" />'; 
```

这个工具栏在哪里？如何在代码中找到其他模块类型？类名 bt_toolbar 设置在哪里？

谢谢，弗兰基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:07:43.253

它是一个 Joomla 模块。

您可以在下面找到 joomla 模块

```
public_html/modules/mod_modulename. 
```

这里您的模块名称是工具栏，但此名称可能不是模块名称（我们可以选择使用其他名称和相同名称）。此名称代表模块的位置。

转到管理端，在模块管理器中，您可以找到带有工具栏位置名称的模块名称。

```
eg: mod_somename.
Then go to front end modules/mod_somename/tmpl/default.php 
```

这是模块的 HTML 输出。如果您在上述路径上没有找到相同的模块，或者您更改了文件而不影响它。它可能会被覆盖。然后您可以在以下位置找到该模块

```
public_html/templates/your_tmplate_name/html/mod_somename 
```

它也取决于 joomla 版本。

希望对你有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:08:32.013

BTxhtml 看起来像模块 chrome，因此请查看模板的 modules.php 文件，看看它是否存在。

name= 还告诉您模块分配到的位置的名称，因此如果您转到模块管理器并在位置工具栏上进行过滤，您应该会找到它。

# linked-list - 第一次使用链表 - 如何命名要插入的对象

> ID：13784732
> 
> 赞同：0
> 
> 时间：2012-12-09T04:44:02.563
> 
> 标签：linked-list, naming

行，

愚蠢的提问时间：

通常对于一个数组，我有一个对象名称： object[index] ...如果我有很多对象，那么索引就是将每个对象彼此区分开来的原因，希望如此，通常在我的情况下，索引与物体所代表的任何事物的现实，所以我不必去打猎 - 第三个*就是*第三个......

现在我有一份工作需要链表作为队列（LRU 缓存的一部分）——我刚刚遇到了一个问题：

我即将声明第一个对象并将其添加到链表中 - 但我该怎么称呼它？

目的 ？...不知何故我有很多这样的东西？

对象1？...如果是这样，那么我如何在那里得到“1”（然后是“2”等等）

我猜真正的解决方案要么是非常基本的，我会打自己一巴掌和/或涉及指针？

目前，我只是根据伪代码中的主要算法来研究该项目，并且每天都会更深入地研究细节。我还没有真正学习 C++，并且正在学习一些 Java 小课程和一些基本的 ADT 主题，但在实践方面没有经验。任何帮助都非常感谢。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:48:27.390

链表对象称为节点，第一个是头。是的，涉及指针:) 更多信息 [http://www.algorithmist.com/index.php/Linked_List](http://www.algorithmist.com/index.php/Linked_List)

# c++ - 我可以给派生类中的基类成员起别名吗？

> ID：13784734
> 
> 赞同：9
> 
> 时间：2012-12-09T04:44:24.197
> 
> 标签：c++, c++11

假设我有以下课程：

```
template <class T>
class Base {
  protected:
    T theT;
    // ...
};

class Derived : protected Base <int>, protected Base <float> {
  protected:
    // ...
    using theInt = Base<int>::theT;     // How do I accomplish this??
    using theFloat = Base<float>::theT; // How do I accomplish this??
}; 
```

在我的派生类中，我想引用`Base::theT`一个在派生类中更有意义的更直观的名称。我使用的是 GCC 4.7，它很好地覆盖了 C++ 11 的特性。有没有办法使用`using`语句来完成我在上面的示例中尝试的这种方式？我知道在 C++11 中，`using`关键字可用于别名类型以及例如。将受保护的基类成员带入公共范围。有没有类似的机制来给成员起别名？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T05:07:50.613

Xeo 的建议奏效了。如果您使用的是 C++ 11，则可以像这样声明别名：

```
int   &theInt   = Base<int>::theT;
float &theFloat = Base<float>::theT; 
```

如果你没有 C++11，我想你也可以在构造函数中初始化它们：

```
int   &theInt;
float &theFloat;
// ...
Derived() : theInt(Base<int>::theT), theFloat(Base<float>::theT) {
  theInt = // some default
  theFloat = // some default
} 
```

编辑：轻微的烦恼是你不能初始化那些别名成员的值，直到构造函数的主体（即，在花括号内）。

# c# - System.EventArgs 从哪里得到它的值？

> ID：13784737
> 
> 赞同：0
> 
> 时间：2012-12-09T04:44:59.387
> 
> 标签：c#, .net

如果我对按钮有此操作功能：

```
private: System::Void button1_Click(System.Object  sender, System.EventArgs  e) 
{} 
```

我想知道谁会分配`e`他们`sender`的价值观？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T04:50:09.163

引发事件的代码必须设置发送者和事件参数。例如，如果有问题的按钮是 Winforms 元素，那么值将由 System.Windows.Forms 代码设置，您应该能够在 MSDN 文档中找到它的详细信息。

通常，按照惯例，发送者将是引发事件的对象实例。事件参数将包含与事件相关的任何其他信息。

# ios4 - iPhone SDK 构建类似 Omnigraffle 的应用程序

> ID：13784738
> 
> 赞同：0
> 
> 时间：2012-12-09T04:45:09.277
> 
> 标签：ios4, uiview, uiimageview, uiimage, ios5

我一直在尝试找到一个示例或一些关于如何创建一个应用程序的示例或一些提示，我可以将图像拖动、调整大小、旋转到 UIView 上，然后将各个部分（包括它们的大小、旋转和位置）和整个 UIView 保存到 CoreData . 有点像omnigraffle 应用程序。

任何教程、示例或任何关于应用程序的任何内容都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:49:56.143

用于拖动视图 [http://www.cocoacontrols.com/platforms/ios/controls/tkdragview](http://www.cocoacontrols.com/platforms/ios/controls/tkdragview)

用于旋转视图[http://www.cocoacontrols.com/platforms/ios/controls/ktonefingerrotationgesturerecognizer](http://www.cocoacontrols.com/platforms/ios/controls/ktonefingerrotationgesturerecognizer)

用于调整视图大小 [http://www.cocoacontrols.com/platforms/ios/controls/spuserresizableview](http://www.cocoacontrols.com/platforms/ios/controls/spuserresizableview)

关于核心数据，它实际上非常简单，在一个视图中收集类，查看您需要保存的属性，以及您的应用程序需要的新属性，仅此而已。

喜欢：对象画布包含与 morphlingViews 的许多关系，其中包含所有属性，如中心、颜色、宽度、高度、角度、UIPath（如果您打算创建自定义形状）图层位置（因此它被正确绘制）以及如果您打算将视图连接为omnigraffle 为self（在morphlingViews 中）添加许多关系，以便您可以获取不同morphlingViews 的中心并在它们之间添加一条简单的线。（如果您打算添加一个字符串，如果您计划添加 drawInRect 方法以允许用户写入对象，那么添加文本属性也是一个好主意）。

您还可以将 Quartz Composer 绘图样式属性添加到对象，如 shadow、shadowColor、shadowOffset，或添加 patterColor 以添加可调整大小的背景。

# php - 如何处理来自 X-Editable 插件的 POST 数据？

> ID：13784739
> 
> 赞同：3
> 
> 时间：2012-12-09T04:45:15.753
> 
> 标签：php, jquery, ajax

有一个名为 X-editable 的插件，它使用单击将 AJAX 查询更改为数据库。除了如何应用可编辑内容之外，文档对我来说几乎是纯粹的胡言乱语。我以前从未处理过 AJAX。有问题的文档页面可以在[这里找到](http://vitalets.github.com/x-editable/docs.html)

所以我的主要问题是，我如何在这里发布到文件？我尝试使用函数中的 url: 设置。

```
$('#username').editable({
type: 'text',
pk: 1,
url: '/post', // Is this where I put my POST url?
title: 'Enter username'
}); 
```

我知道我应该发布我尝试过的内容，但我不知道从哪里开始使用 AJAX，但是这个插件对于我的项目来说是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T07:27:02.410

首先，是的，网址是发布数据的地方。我只使用 Yii 扩展使用这个插件和 Yii，但我怀疑它通常以相同的方式工作。对于单个字段请求，将发布三件事。name（字段的 name html 属性）、value（字段的值）和 pk（您在字段上调用的可编辑函数中指定的主键。）

```
<input name="username" value="myName" id="username" type="text">

$(function(){
    $('#username').editable({
        url: 'mysite.com/post',
        title: 'Enter username',
        pk: 3
    });
}); 
```

将以下内容发布到 mysite.com/post：

```
array(
    'name' => 'username',
    'value' => 'myName',
    'pk' => 3
) 
```

您可以在类和 id 上调用 editable() 函数，并指定要更新的项目的 PK 以一次提交整个表单，尽管您必须做更多的挖掘工作。查看 Yii 扩展可能对你很有帮助 - [http://x-editable.demopage.ru](http://x-editable.demopage.ru) - 它至少给你一些线索。它还包括所有服务器端逻辑。它应该阐明这一切是如何运作的。

这就是 Editable 的要点，它涵盖了前端，您需要自己制作服务器端的东西。如果没有其他东西使用 Firebug 之类的东西来查看它实际发布的内容，请使用前端文档（实际上非​​常好）让它发布您想要发布的内容，从那里它应该没有问题。

# java - 从 Servlet Java 中获取 JSON 对象

> ID：13784741
> 
> 赞同：0
> 
> 时间：2012-12-09T04:46:06.283
> 
> 标签：java, json, servlets, post, gson

我想创建一个应用程序，该应用程序将从 servlet 获取 JSON 对象以反序列化它，然后使用它的变量来做其他事情。

我的 servlet 在 doPost 中有以下代码：

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

      ObjectOutputStream os;
      os = new ObjectOutputStream(response.getOutputStream());

      String s = new String("A String");

      Gson gson = new Gson();
      String gsonObject= gson.toJson(s);

      os.writeObject(gsonObject);
      os.close();

    } 
```

现在，当 servlet 运行时，我可以通过浏览器访问它，如果我在 doGet 方法中发布相同的代码，那将下载一个 servlet 文件，这不是我想要的。

我应该在我的第二个应用程序中使用什么来连接到 servlet，获取对象，以便以后可以操作它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:02:12.473

如果它下载 servlet 文件而不是在浏览器中显示它，很可能您没有在响应中设置内容类型。如果您正在编写 JSON 字符串作为 servlet 响应，则必须使用

```
response.setContentType("text/html");
response.getWriter().write(json); 
```

请注意顺序，它的“text/html”而不是“html/text”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:50:15.910

您需要对 servlet 进行一些更改：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
   String s = new String("A String");
 String json = new Gson().toJson(s);
 this.response.setContentType("application/json");
 this.response.setCharacterEncoding("UTF-8");
 Writer writer = null;
 try {
        writer = this.response.getWriter();
        writer.write(json);
 } finally {
    try {
        writer.close();
    } 
    catch (IOException ex) {
    }
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T06:19:54.987

如果我正确理解了这个问题，那么您可以使用`java.net.HttpURLConnection`和`java.net.URL`对象来创建与此 servlet 的连接，并在您的第二个 servlet 中读取上述 JSON servlet 流式传输的 JSON。

# javascript - Jquery自动完成选定的值

> ID：13784745
> 
> 赞同：3
> 
> 时间：2012-12-09T04:47:25.190
> 
> 标签：javascript, jquery

我使用 jQuery UI 在页面上有一个自动完成功能，这里是 JSON：

```
[ {"label":"test1", "value":"1"},
  {"label":"testtest", "value":"6"},
  {"label":"test2", "value":"8"} ] 
```

自动完成的默认操作将抓取项目的值并放入输入框中。有什么办法可以阻止它吗？而是有两个单独的操作：一个注入到隐藏框（带有值），另一个注入到带有（标签）的输入框。

```
$.getJSON('index.php?controller=account&action=getusers', function(data) {
    tempJson = data;

    $(".auto-search").autocomplete({
        minLength: 2,
        dataType: 'json',
        source: tempJson,
        select: function (event,ui) {
            $('input[name="user-id"]').val(ui.item.value);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T05:07:28.130

你的意思是这样的：

```
........
select: function (event,ui){
    $('input[name="user-id"]').val(ui.item.label);
    $('input[name="your-hidden-field"]').val(ui.item.value);
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-23T19:11:00.403

这是组合框脚本创建的实际 HTML：

```
 <p class="dlgline">Select activity:<br>
        <select id="biActivity_id" style="display: none;"><option value="1">2015/12/23 14:26 for 1 hour, 3 minutes, Demo</option></select>
        <span class="custom-combobox"><input title="" class="custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left ui-autocomplete-input" autocomplete="off"><a tabindex="-1" title="Show All Items" class="ui-button ui-widget ui-state-default ui-button-icon-only custom-combobox-toggle ui-corner-right" role="button"><span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s"></span><span class="ui-button-text"></span></a></span>
    </p>
    <p class="dlgline">Select project:<br>
        <select id="biProj_id" style="display: none;"><option value="1">Productive Non Contract</option><option value="2">Non Project Sales</option><option value="3">Waiting Time</option><option value="5">BEL SEM gateway</option><option value="6">Electronic Timesheets</option><option value="7">Fieldbus Speed Module</option><option value="8">Power Management Systems Design</option></select><span class="custom-combobox"><input title="" class="custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left ui-autocomplete-input" autocomplete="off"><a tabindex="-1" title="Show All Items" class="ui-button ui-widget ui-state-default ui-button-icon-only custom-combobox-toggle ui-corner-right" role="button"><span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s"></span><span class="ui-button-text"></span></a></span>
    </p> 
```

# php - 使用 last.fm api 返回的 JSON 数据

> ID：13784746
> 
> 赞同：1
> 
> 时间：2012-12-09T04:47:26.407
> 
> 标签：php, json, last.fm

我正在尝试使用 last.fm api 从 last.fm 中提取前 6 位艺术家。我能够提取 JSON 数据并很好地输出它。但是，当涉及到实际使用特定数据时，我不知所措。我唯一想要使用的是艺术家的名字。这是我到目前为止的代码。

```
<?php
    $content = get_data('http://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&api_key=xxxxxxxxxxxxxx&format=json&limit=6');
    foreach ($content->artist as $artist) {
echo '<li>';
echo "{$artist->name}\n";
echo '</li>';
}
function get_data($url) {
  $ch = curl_init();
  $timeout = 5;
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}           
?> 
```

数据如下所示：

```
{"artists":{"artist":[{"name":"Coldplay","playcount":"757749","listeners":"111884","mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234","url":"http:\/\/www.last.fm\/music\/Coldplay","streamable":"1","image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34\/210303.jpg","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64\/210303.jpg","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/210303.jpg","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/252\/210303.jpg","size":"extralarge"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/500\/210303\/Coldplay.jpg","size":"mega"}]},{"name":"Rihanna","playcount":"943551","listeners":"102321","mbid":"69989475-2971-49aa-8c53-5d74af88b8be","url":"http:\/\/www.last.fm\/music\/Rihanna","streamable":"1","image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34\/79835799.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64\/79835799.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/79835799.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/252\/79835799.png","size":"extralarge"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/_\/79835799\/Rihanna+PNG.png","size":"mega"}]}}} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T04:51:09.913

你需要使用`json_decode`so `return json_decode($data);`。这会将返回数据转换为您可以遍历的对象。对于关联数组，请使用`return json_decode($data, true);`. 见[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

# serialization - 保存和加载之前通过 Eclipse 注册表创建的对象实例

> ID：13784749
> 
> 赞同：2
> 
> 时间：2012-12-09T04:48:18.243
> 
> 标签：serialization, eclipse-rcp

我目前在我的 RCP 应用程序中遇到问题，想问一下，是否有人偶然发现了同样的问题并可以给我一些有价值的提示：

我的 RCP 应用程序允许插件提供我的模型（单例）的特定抽象类的实现，以在运行时通过更新管理器扩展我的模型。我通过实例化这些类

```
 extensionPointImplementation.createExecutableExtension(..) 
```

解析 Eclipse 注册表后。我可以使用默认的 Java 序列化 API 序列化创建的实例。

现在问题来了：试图反序列化对象的插件找不到模型扩展的类实现，因为插件之间没有插件依赖关系。尽管如此，我不可能创建这样的依赖关系，这会使在运行时扩展模型的想法过时。

是否可以通过使用默认的 Java 序列化 API 来解决这个问题，或者我是否必须实现自己的序列化（如果所有必要的插件都可用，它会解析 Eclipse 注册表并通过上面显示的行创建实例，否则抛出异常）这可能基于默认的 Java 序列化 API（如果可能的话，我不想完全自己创建序列化）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:02:17.357

您需要定义一个所谓的伙伴策略。在试图实例化类的包中添加

```
Eclipse-BuddyPolicy: registered 
```

到`manifest.mf`. 在提供类的包中添加

```
Eclipse-RegisterBuddy: <symbolic name of the bundle instantiating the class> 
```

到`manifest.mf`.

# c# - 自动合并相邻的矩形

> ID：13784751
> 
> 赞同：1
> 
> 时间：2012-12-09T04:48:34.933
> 
> 标签：c#, xna-4.0, rectangles

我一直在 XNA 中制作一个需要矩形碰撞地图的自上而下的射击游戏。

地图的碰撞墙以以下格式存储在文本文件中：`rect[0,0,1024,8]`

这些值对应于定义一个矩形（x、y、宽度、高度）。

我一直在想我可以编写一个单独的应用程序，它可以对地图图像的数据进行文盲，找出黑色（或墙壁的任何颜色）的像素并在那里制作矩形。基本上，该程序将生成碰撞所需的矩形。理想情况下，它应该是像素完美的，这将需要大约一千个矩形，每个 1 像素宽，覆盖所有墙壁。

有没有一种可能的方法来检测这些矩形（或我应该说的正方形）中的哪些彼此相邻，然后将它们连接到更大（但仍覆盖相同区域）的矩形中？

例如。假设我有一堵 10 x 2 的墙。该程序将生成 20 个不同的矩形，每个矩形高 1 个像素。我如何有效地检测这些矩形是相邻的并自动制作一个 10 x 2 的矩形覆盖整个墙壁，而不是拥有 20 个不同的小像素矩形？

**编辑：**我已经制定了一个适合我的目的的解决方案，以供将来参考，我的代码如下：

```
//map is a bitmap, horizontalCollisions and collisions are List<Rectangle>s
for (int y = 0; y < map.Height; y++) //loop through pixels
        {
            for (int x = 0; x < map.Width; x++)
            {
                if (map.GetPixel(x, y).Name == "ff000000") //wall color
                {
                    int i = 1;
                    while (map.GetPixel(x + i, y).Name == "ff000000")
                    {
                        if (i != map.Width - x)
                        {
                            i++;
                        }
                        if (i == map.Width - x)
                        {
                            break;
                        }
                    }
                    Rectangle r = new Rectangle(x, y, i, 1);//create and add
                    x += i - 1;
                    horizontalCollisions.Add(r);
                }
            }
        }
        for (int j = 0; j < horizontalCollisions.Count; j++)
        {
            int i = 1;
            Rectangle current = horizontalCollisions[j];
            Rectangle r = new Rectangle(current.X, current.Y + 1, current.Width, 1);
            while(horizontalCollisions.Contains(r))
            {
                i++;
                horizontalCollisions.Remove(r);
                r = new Rectangle(current.X, current.Y + i, current.Width, 1);
            }
            Rectangle add = new Rectangle(current.X, current.Y, current.Width, i);
            collisions.Add(add);
        }

            //collisions now has all the rectangles 
```

基本上，它将水平循环遍历像素数据。当它遇到一个墙壁像素时，它会停止计数器并（使用一个while循环）将计数器向右移动，一个接一个，直到它碰到一个非墙壁像素。然后，它将创建一个该宽度的矩形，然后继续。在这个过程之后，将会有一个大的矩形列表，每个 1px 高。基本上，一堆水平线。下一个循环将遍历水平线，并使用与上面相同的过程，它将找出其下是否存在具有相同X值和相同Width值（y + 1）的矩形。这将不断增加，直到没有，其中将创建一个大矩形，并从列表中删除使用的矩形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:26:15.540

礼仪可能会建议我应该对此发表评论而不是将其添加为答案，但我还没有这种能力，所以请耐心等待。

恐怕我无法为您将其翻译成代码，但我可以向您发送一些学术论文，这些论文讨论可以完成您所要求的某些事情的算法。

其他时间出现了这个问题：

*   [找到一组最大的连续矩形以覆盖多个区域](https://stackoverflow.com/questions/4701887/find-the-set-of-largest-contiguous-rectangles-to-cover-multiple-areas)

*   [谜题：查找最大矩形（最大矩形问题）](https://stackoverflow.com/questions/7245/puzzle-find-largest-rectangle-maximal-rectangle-problem)

这些问题中链接的论文：

*   [划分简单直线多边形的快速算法](http://www.cise.ufl.edu/~sahni/papers/part.pdf)

*   [多边形分解](http://www.cs.usask.ca/faculty/keil/chap.ps)

*   [最大矩形问题](http://www.ddj.com/184410529)

希望这些问题和论文可以帮助您找到您正在寻找的答案，或者至少吓跑您寻找另一个解决方案。

# css - 如何将横幅广告移到 960 像素宽度之外

> ID：13784752
> 
> 赞同：0
> 
> 时间：2012-12-09T04:48:39.833
> 
> 标签：css, wordpress, banner

我有一个[新闻网站](http://www.vincenttimes.com/living/healthy-living/2012/12/08/12373/e-cigarettes-are-they-harmful-to-our-health/)，在左侧的每个帖子中间都有一个 300x600 的横幅。

我想将横幅移到 960px 宽的“页面”之外 150px，所以横幅是一半进一半出。我想出如何将横幅向左移动的唯一方法是`position:absolute`，但文字不会环绕横幅 - 哪个是我需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:30:55.753

是的，`position:absolute`不换行，因为您要从[文档](http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning)流中删除元素。

您可以使用 150px 将其边缘化，`margin-left:-150px`但是，您的课程 css`.entry`必须`overflow:hidden`被删除，以便您将横幅广告边缘化到 960px 帖子之外。请注意，删除该属性不会导致您的网站出现其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:52:11.787

尝试使用该属性`margin-left:-150px;`

# jquery - 获取表格总数

> ID：13784754
> 
> 赞同：0
> 
> 时间：2012-12-09T04:49:24.980
> 
> 标签：jquery, html

我有一个如下的 html 表，我还可以选择动态添加行。

```
 <tbody>
                            <tr style="display: none" id="invoiceRow">
                                <td><textarea></textarea></td>
                                <td class="va_middle"><input type="text" name="quantity" class="mini" /></td>
                                <td class="va_middle"><input type="text" name="rate" class="mini" /></td>
                                <td class="va_middle"><input type="text" name="amount" class="mini" /></td>
                                <td>
                                    <a onclick="deleteInvoiceRow(this);" class="btn btn-small">
                                        <i class="icon-remove"></i>                     
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td><textarea></textarea></td>
                                <td class="va_middle"><input type="text" name="quantity" class="mini" /></td>
                                <td class="va_middle"><input type="text" name="rate" class="mini" /></td>
                                <td class="va_middle"><input type="text" name="amount" class="mini" /></td>
                                <td>
                                    <a onclick="deleteInvoiceRow(this);" class="btn btn-small">
                                        <i class="icon-remove"></i>                     
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2"><a onclick="addNewInvoiceRow();"><i class="icon-plus-sign right"></i></a></td>
                                <td class="va_middle" colspan="3">&nbsp; <strong>Total: &nbsp; &nbsp;</strong><input type="text" name="rate" class="total" /></td>
                            </tr>
                        </tbody> 
```

我想获取每一行的总数并将其更新为最后一个 tr 中的总字段。

我如何用 jQuery 做到这一点？并根据值的变化更新值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:41:06.097

我将这样做的方法是向 TABLE 标记添加几个侦听器，并且我假设名称为“amount”的输入将等于“rate”乘以“quantity”的乘积。代码可能如下所示：

```
function calcTotalTable() {
    var total = 0;
    $('my_table input[name="amount"]').each(function(){
        // add some validation
        total += $j(this).val();
    });

    $('my_table input.total').val(total);
}

$('my_table').on('change', 'input[type="text"]', function() {
    var $row = $(this).closest('tr'),
        // you may need to add some validation before the calculation
        total = $row.find('input[name="quantity"]').val() * $row.find('input[name="rate"]').val();
    $row.find('input[name="amount"]').val(total);
    calcTotalTable();
}).on('click', 'a.btn btn-small', function() { // theses will handle the delete btn
        $(this).closest('tr').remove();
        calcTotalTable();
    }); 
```

当然，您需要处理验证和格式化，但代码将完成基本过程。我没有测试这段代码，但会给你一个大致的想法。希望有帮助，最好！

# kernel - 为什么英特尔 MKL 被称为数学“内核”库？

> ID：13784755
> 
> 赞同：1
> 
> 时间：2012-12-09T04:49:29.777
> 
> 标签：kernel

我一直认为英特尔 MKL 例程是用 C/Fortran 编写的，有时在汇编级别进行了手动优化，但我看不出这些与内核有何关联——是否有技术原因将其称为“内核库”？我发现这个术语的唯一其他用法是“Linux Kernel Library”，它的名字在它的上下文中更有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-20T13:11:56.287

从[内核](https://en.wikipedia.org/wiki/Kernel)：

> 在数值分析中，执行常见数值运算的子程序特别是在矢量化循环中执行的程序

从[计算内核](https://en.wikipedia.org/wiki/Compute_kernel)：

> 在计算中，计算内核是为高吞吐量加速器（例如 GPU）、DSP 或 FPGA 编译的例程，与主程序分开（但由主程序使用）。它们有时被称为计算着色器，与 GPU 上的顶点着色器和像素着色器共享执行单元，但不限于在一类设备或图形 API 上执行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T04:52:12.520

内核库直接挂接到内核并被内核使用，因此是“内核库”。

# asp.net - 输入的值没有进入代码

> ID：13784757
> 
> 赞同：1
> 
> 时间：2012-12-09T04:49:50.880
> 
> 标签：asp.net

我正在尝试学习 ASPX 并且正在做一个网站（学习目的）

当单击列表中的名称时，我在网格视图中有一个员工列表我必须将值传递给 db 并在单独的页面中显示详细信息。我通过使用这段代码来做到这一点

```
LinkButton lnkCustomerID = sender as LinkButton;
string strCustomerID = lnkCustomerID.CommandArgument;
Response.Redirect("EmployeeDetail.aspx?Parameter=" + strCustomerID); 
```

它工作得很好。

在详细信息页面中，我在另一个网格中显示详细信息，我使用下面的代码进行了此操作

```
 SqlCommand cmdCustomerDetails = new SqlCommand("GetEmployee", sqlConnect);
             cmdCustomerDetails.CommandType = CommandType.StoredProcedure;
             cmdCustomerDetails.Parameters.AddWithValue("@ID", employeeId);
             if (sqlConnect.State == ConnectionState.Closed)
                 sqlConnect.Open();
             //Create DataReader to read the record
             SqlDataReader dReader = cmdCustomerDetails.ExecuteReader();
             GridView2.DataSource = dReader;
             GridView2.DataBind();
             sqlConnect.Close(); 
```

它也有效，但是当我尝试通过单击作为项目模板的更新按钮来更新值时，如图所示

```
<asp:GridView ID="GridView2" runat="server" CellPadding="4" ForeColor="#333333" GridLines="None"
        AutoGenerateColumns="False">
        <Columns>
            <asp:TemplateField HeaderText="Name">
                <ItemTemplate>
                    <asp:TextBox ID="txtName" runat="server" Text='<%# Eval("name")%>'></asp:TextBox>
                    <asp:RequiredFieldValidator ID="rqdfldName" runat="server" ErrorMessage="Name Cannot Be Empty"
                        ViewStateMode="Disabled" ControlToValidate="txtName" ValidationGroup="Update"></asp:RequiredFieldValidator>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Age">
                <ItemTemplate>
                    <asp:TextBox ID="txtAge" runat="server" Text='<%# Eval("age")%>'></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Address">
                <ItemTemplate>
                    <asp:TextBox TextMode="MultiLine" ID="txtAddress" runat="server" Text='<%# Eval("address")%>'></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:Button ID="btnUpdate" runat="server" Text="Update" ValidationGroup="Update"
                        CommandArgument='<%#Eval("id") %>' OnClick="btnUpdate_Click" />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
        <AlternatingRowStyle BackColor="White" />
        <EditRowStyle BackColor="#7C6F57" />
        <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#E3EAEB" />
        <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F8FAFA" />
        <SortedAscendingHeaderStyle BackColor="#246B61" />
        <SortedDescendingCellStyle BackColor="#D4DFE1" />
        <SortedDescendingHeaderStyle BackColor="#15524A" />
    </asp:GridView> 
```

我收到此错误

无效的回发或回调参数。使用配置或页面中的 <%@ Page EnableEventValidation="true" %> 启用事件验证。出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。

谁能帮帮我

我可以通过像这样将该页面的属性设置为 false 来克服该错误

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" EnableEventValidation="false" AutoEventWireup="true" CodeFile="EmployeeDetail.aspx.cs" Inherits="EmployeeDetail" %> 
```

但是当我单击更新按钮并找到控件的值时，我没有得到更新的值

```
int empID;
        string age, address, name;
        Button btnUpdateUser = sender as Button;
        TextBox tbName, tbAge, tbAddress;
        SqlConnection sqlConnect;
        try
        {
            tbName = (TextBox)GridView2.Rows[0].FindControl("txtName");
            tbAge = (TextBox)GridView2.Rows[0].FindControl("txtAge");
            tbAddress = (TextBox)GridView2.Rows[0].FindControl("txtAddress");
            sqlConnect = new SqlConnection("server=WINNER-PC\\SQLEXPRESS;integrated security=true;initial catalog=Test");
            if (sqlConnect.State == ConnectionState.Closed)
                sqlConnect.Open();
            empID = Convert.ToInt32(btnUpdateUser.CommandArgument);
            name = tbName.Text;
            age = tbAge.Text;
            address = tbAddress.Text;
            SqlCommand sqlCommand = new SqlCommand("UpdateEmployee", sqlConnect);
            sqlCommand.CommandType = CommandType.StoredProcedure;
            sqlCommand.Parameters.AddWithValue("@ID", empID);
            sqlCommand.Parameters.AddWithValue("@Name", name);
            sqlCommand.Parameters.AddWithValue("@Age", age);
            sqlCommand.Parameters.AddWithValue("@Address", address);
            sqlCommand.ExecuteNonQuery();
            Response.Redirect("Employees.aspx", false);
        }
        catch (Exception ex)
        {
            throw ex;
        } 
```

当两个网格视图都在同一页面中时，我能够更新，但是当我将第二个网格移动到新页面时，更新不起作用..请帮帮我

# gitignore - 忽略 gitignore 中的 .blendX 文件

> ID：13784758
> 
> 赞同：4
> 
> 时间：2012-12-09T04:49:55.720
> 
> 标签：gitignore

我正在为 Gr 制作游戏。12 编程课程和我的朋友。我在本地存储库中有在 Blender 中制作的 3D 模型。Blender文件`.blend`以`something.blend1`. `something.blend2`我想忽略我的那些，我`.gitignore`该怎么做？

我试过`*.blend*`在我的`.gitignore`，但忽略了所有以`.blend`. 我也试过`.blend*`了，但什么都没忽略。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T05:10:56.063

试试这个：`*.blend?`

匹配零个`*`或多个字符，但`?`匹配单个字符。

# garbage-collection - 在java中使用ANTLR导致OOM

> ID：13784759
> 
> 赞同：2
> 
> 时间：2012-12-09T04:50:06.293
> 
> 标签：garbage-collection, out-of-memory, antlr

我正在尝试使用 ANTLR 解析一个大日志（30MByte）文件。
但它与 OOM 一起崩溃或在解析器工作时变得非常缓慢。

据我所知，
1\. Lexer 扫描文本和 yeids 令牌
2\. 解析器使用给定规则的令牌

已经消耗的令牌应该由 gc 收集，但似乎没有。
你能告诉我有什么问题吗？（语法或代码）

最小化的语法和代码如下

日志解析器.g

```
grammar LogParser;

options {
  language = Java;
}

rule returns [Line result]
  :
  stamp WS text NL 
                   {
                    result = new Line();
                    result.setStamp(Integer.parseInt($stamp.text));
                    result.setText($text.text + $NL.text);
                   }
  ;

stamp
  :
  DIGIT+
  ;

text
  :
  CHAR+
  ;

DIGIT
  :
  '0'..'9'
  ;

CHAR
  :
  'A'..'Z'
  ;

WS
  :
  ' '
  ;

NL
  :
  '\r'? '\n'
  ; 
```

测试.java

```
import java.io.IOException;

import org.antlr.runtime.ANTLRFileStream;
import org.antlr.runtime.CharStream;
import org.antlr.runtime.CommonTokenStream;
import org.antlr.runtime.RecognitionException;

public class Test {

    public static void main(String[] args) {
        try {
            CharStream input = new ANTLRFileStream("aaa.txt");
            LogParserLexer lexer = new LogParserLexer(input);
            CommonTokenStream tokenStream = new CommonTokenStream(lexer);
            LogParserParser parser = new LogParserParser(tokenStream);

            int count = 0;

            while (true) {
                count++;
                parser.rule();
                parser.setBacktrackingLevel(0);
                if (0 == count % 1000)
                    System.out.println(count);
            }

        } catch (IOException e) {
            e.printStackTrace();
        } catch (RecognitionException e) {
            e.printStackTrace();
        }
    }
} 
```

线.java

```
public class Line {
    private Integer stamp;
    private String text;

    public Integer getStamp() {
        return stamp;
    }

    public void setStamp(Integer stamp) {
        this.stamp = stamp;
    }

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    @Override
    public String toString() {
        return String.format("%010d %s", stamp, text);
    }

} 
```

aaa.txt，随机生成的内容。它的大小约为 30 兆字节。

```
0925489881 BIWRSAZLQTOGJUAVTRWV
0182726517 WWVNRKGGXPKPYBDIVUII
1188747525 NZONXSYIWHMMOLTVPKVC
1605284429 RRLYHBBQKLFDLTRHWCTK
1842597100 UFQNIADNPHQYTEEJDKQN
0338698771 PLFZMKAGLGWTHZXNNZEU
1971850686 TDGYOCGOMNZUFNGOXLPM
1686341878 NTYUXJSVQYXTBZAFLJJD
0849759139 YRXZSVWSZDBJPSNSWNJH
:
:
: 
```

样品发生器

```
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Random;

public class EntryPoint {

    /**
     * @param args
     */
    public static void main(String[] args) {
        FileWriter fw = null;
        try {
            int size = 20;
            String formatLength = Integer.toString(Integer.MAX_VALUE);
            String pattern = "%0" + formatLength.length() + "d ";

            Random random = new Random();
            File file = new File("aaa.txt");
            fw = new FileWriter(file);
            while (true) {
                int nextInt = random.nextInt(Integer.MAX_VALUE);

                StringBuilder sb = new StringBuilder();
                sb.append(String.format(pattern, nextInt));
                for (int i = 0; i < size; i++) {
                    sb.append((char) ('A' + random.nextInt(26)));
                }

                fw.append(sb);
                fw.append(System.getProperty("line.separator"));

                if (file.length() > 30000000)
                    break;
            }

            fw.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

结果与 JavaSE-1.6(jre6)、windows 7 64 vmarg "-Xmx256M"

```
85000
86000
Exception in thread "main" java.lang.OutOfMemoryError: GC overhead limit exceeded
at org.antlr.runtime.Lexer.emit(Lexer.java:160)
at org.antlr.runtime.Lexer.nextToken(Lexer.java:91)
at org.antlr.runtime.BufferedTokenStream.fetch(BufferedTokenStream.java:133)
at org.antlr.runtime.BufferedTokenStream.sync(BufferedTokenStream.java:127)
at org.antlr.runtime.CommonTokenStream.consume(CommonTokenStream.java:67)
at org.antlr.runtime.BaseRecognizer.match(BaseRecognizer.java:106)
at LogParserParser.text(LogParserParser.java:190)
at LogParserParser.rule(LogParserParser.java:65)
at Test.main(Test.java:21) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:47:29.023

我相信 UnbufferedTokenStream 是你想要的。可能也需要取消缓冲字符流。

# ruby-on-rails - 添加 RESTful 操作

> ID：13784761
> 
> 赞同：0
> 
> 时间：2012-12-09T04:50:23.660
> 
> 标签：ruby-on-rails, routes

我的信息来源是这里的第 2.9 节：

[http://guides.rubyonrails.org/routing.html#connecting-urls-to-code][1]

我想要做的是添加一个自定义操作“搜索”和相应的视图。

所以，正如它在文档中所说的那样，我在我的 config/routes.rb 文件中添加了这段代码：

```
 resources :dimensions do
  collection do
    get "search"
  end
  end 
```

我还在 dimensions_controller 文件中定义：

```
 def search
    @dimensions = Dimension.all

    respond_to do |format|
      format.html # search.html.erb
      format.json { render json: @dimensions }
    end
  end 
```

然后我停止并重新启动了 rails 服务器，但是当我导航到 /dimensions/home 时，我仍然收到以下错误消息：

```
Couldn't find Dimension with id=search 
```

还表明我的参数是：

```
{"id"=>"search"} 
```

那么我是否只是错过了另一段代码，它给出了将 /dimension/search 解释为集合操作而不是显示操作的指令？

我已经确认 search_dimensions_path 存在，所以我知道 routes.rb 文件中的资源块实际上是在添加路径。它只是将它们解释为给我带来麻烦的单独搜索操作。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:04:13.720

发现问题：

创建收集操作*后*，我必须在我的 config/routes.db 文件中为维度创建资源声明，如下所示：

```
 resources :dimensions do
  collection do
    get "search"
  end
  end

  resources :dimensions 
```

然后一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:49:39.460

这段代码应该可以正常工作。你能告诉我们你的`routes.rb`文件吗？

附带说明一下，您可能不希望有单独的搜索操作，使用该`index`操作是首选方式。

# java - Apache Tomcat 中的 JAX-RPC / JAX-WS 运行时

> ID：13784763
> 
> 赞同：7
> 
> 时间：2012-12-09T04:50:55.983
> 
> 标签：java, web-services, jax-ws, axis, jax-rpc

我正在使用 Apache Tomcat v6 服务器。在创建新的 Web 服务时，我获得了“Apache Axis”、“Apache Axis2”和“Apache CXF2.x”的 Web 服务运行时选项。

是否可以将运行时设置为“JAX-RPC”或“Jax-WS”？

**编辑：**

我正在使用 Eclipse IDE

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-29T09:40:07.193

JAX-RPC 和 JAX-WS 是规范，Axis、Axis2 和 CXF 是实现。

*   对于 JAX-RPC，您需要 Axis (1)
*   对于 JAX-WS 使用 CXF（我相信 Axis2 也支持此规范，但我从未使用过它）

如果您有选择，我强烈推荐后者（JAX-WS），因为它是更现代的规范，更重要的是，工具包正在积极开发和更新 - Axis 1 已经休眠多年，并且依赖于其他一些旧版本图书馆。

您还可能使用更现代的工具包（如 CXF 或 Axis2）获得更好的性能，这些工具包从一开始就被设计为尽可能使用流式 XML API，而不是在内存中构建树模型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T18:47:46.120

我想扩展 Ian Roberts 的回答并为您提供更多选择。

**JAX-RPC**

这是一个较老的标准。您仍然可以找到它的实现 JAX-RPC SI（标准实现）：http: [//java.net/projects/jax-rpc/](http://java.net/projects/jax-rpc/)

此外，许多 JAX-WS 实现将实现旧的 JAX-RPC 标准。JAX-WS 取代了 JAX-RPC，如果您正在创建一个新项目，您不应该真的需要它。

**JAX-WS**

JAX-WS 标准： http: [//jcp.org/en/jsr/detail ?id=224](http://jcp.org/en/jsr/detail?id=224)

**JAX-WS 实现：**

JAX-WS RI（参考实现）：http: [//jax-ws.java.net/](http://jax-ws.java.net/)

阿帕奇 CXF：[http ://cxf.apache.org/docs/jax-ws-configuration.html](http://cxf.apache.org/docs/jax-ws-configuration.html)

Apache Axis2：[http ://axis.apache.org/axis2/java/core/](http://axis.apache.org/axis2/java/core/)

JBOSS-WS: [http](http://www.jboss.org/jbossws) : //www.jboss.org/jbossws

**选择合适的图书馆**

如果您只是想启动并运行某些东西，您可以让 Eclipse 使用 Axis2 或 CXF。（只需在谷歌上搜索“Eclipse Axis2”或“Eclipse CXF”，您就会发现大量有关启动和运行的教程和视频。）我个人使用 JAX-WS RI，但上述所有选项都各有利弊。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T19:05:42.070

这个问题我只能回答一半。是的，可以在 Tomcat 6 上运行 JAX-WS 和 JAX-RPC：

## JAX-WS

[http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/](http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/)

或者

[http://puretech.paawak.com/2010/03/09/running-jax-ws-with-tomcat/](http://puretech.paawak.com/2010/03/09/running-jax-ws-with-tomcat/)

## JAX-RPC

[请参阅http://tomcat.apache.org/tomcat-6.0-doc/extras.html#Components_list](http://tomcat.apache.org/tomcat-6.0-doc/extras.html#Components_list)的最后 2 段并尝试进行实验

# html - 可以用作 ?

> ID：13784767
> 
> 赞同：1
> 
> 时间：2012-12-09T04:51:33.270
> 
> 标签：html, css

例如，如果我想将图像包裹另一个对象，可能吗？

```
<img src='pic.png'>
<div id='block'>
<p>Somebody
</div>
</img> 
```

我知道我应该只使用`div`and background-image 但我想使用该属性`auto`

```
img{width:50%; height:auto;} 
```

如果我使用`div`，使用 auto 将不起作用，因为它不知道背景图像大小并且不会根据图像比例方面调整 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T04:59:56.890

`img`它是一个内联标签，所以它不应该有后代元素。

> IMG 元素将图像嵌入到当前文档中元素定义的位置。**IMG 元素没有内容**；它通常被 src 属性指定的图像内联替换，但左对齐或右对齐的图像除外，它们是“浮动”的。

[资源](http://www.w3.org/TR/html401/struct/objects.html#h-13.2)

# c++ - 用什么代替 std::map::emplace？

> ID：13784771
> 
> 赞同：4
> 
> 时间：2012-12-09T04:52:20.337
> 
> 标签：c++, c++11, std

对于诸如 的容器，从 gcc 4.7.2 开始`std::map< std::string, std::unique_ptr< Foo >>`，它似乎`emplace()`还没有在 stdc++ 中实现。

不幸的是，我不能直接按值存储 Foo，因为它是一个抽象的超类。

作为一个简单但低效的占位符，我一直`std::map< std::string, Foo* >`在与`std::vector< std::unique_ptr< Foo >>`垃圾收集结合使用。

*一旦 emplace() 可用，您是否有一个更有效且更容易替换的临时解决方案？*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T06:58:48.503

你需要`emplace()`什么？只需将其移入：

```
#include <iostream>
#include <map>
#include <memory>
#include <string>

struct Foo
{
    virtual ~Foo() = default;

    virtual std::string name() const = 0;
};

struct Bar : Foo
{
    std::string name() const { return "Bar"; }
};

int main()
{
    std::map<std::string, std::unique_ptr<Foo>> m;

    std::unique_ptr<Foo> p(new Bar());
    m.insert(std::make_pair("a", std::move(p)));

    std::cout << m["a"]->name() << std::endl;
} 
```

事实上，**[你不应该使用`emplace`with `unique_ptr`'s](https://stackoverflow.com/q/13172888/87234)**。

正如我在那里的评论中所指出的，我现在认为`new`在用户代码中使用是一个错误。它应该替换为`make_unique`，因此您知道您的资源不可能泄漏：

```
// will be in std:: someday
template <typename T, typename... Args>
std::unique_ptr<T> make_unique(Args&&... args)
{
    return std::unique_ptr<T>(new T(std::forward<Args>(args)...));
}

int main()
{
    std::map<std::string, std::unique_ptr<Foo>> m;

    m.insert(std::make_pair("a", make_unique<Bar>()));

    std::cout << m["a"]->name() << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T05:35:27.607

作为一种解决方法，您可以使用`boost`即使在 C++ 03 编译器下也支持大多数 C++ 11 功能的容器，并且具有与容器相同的布局`std`，然后当您拥有该功能时，`std`您可以切换名称空间！

# plugins - 如何将 wordpress 中的单个菜单项添加到我的插件中

> ID：13784773
> 
> 赞同：1
> 
> 时间：2012-12-09T04:52:36.700
> 
> 标签：plugins, wordpress

我正在尝试创建我的第一个 wordpress 插件，我想在 wordpress 默认菜单栏中添加一个新的“菜单项”。因此，当我单击该菜单项时，我的插件需要显示 html 表单。

与 Joomla 相比，在 joomla 中它在“组件”中有视图，因此我可以轻松地创建一个新的菜单项，并根据需要分配一个视图。在 wordpress 中，我如何为插件做到这一点？

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:20:28.923

我建议为您的前端表单制作一个将呈现您的表单的[短代码。](http://codex.wordpress.org/Shortcode_API)然后人们可以创建一个页面（它为您提供菜单项）并将您的表单放在页面上，可选择在表单上方或下方添加一些文本/图像。这比尝试将“页面”插入菜单并以某种方式将其放在插件用户希望它去的地方要好:)

对于管理端，使用[管理菜单功能](http://codex.wordpress.org/Administration_Menus)。

# jquery - JQuery 游戏中的场景变化概念

> ID：13784775
> 
> 赞同：0
> 
> 时间：2012-12-09T04:53:56.713
> 
> 标签：jquery, online-game, gamequery

当我十几岁的儿子用 Pygame 编写游戏时，我记得我必须自己为他实现场景更改代码。

现在他正在使用 jQuery 编写一些简单的游戏。谁能帮助我们学习如何在 jQuery 游戏中改变场景？用例是这样的：

第一场比赛，蓝队和红队发生枪战。假设蓝队赢了，剩下五名队员。这五个人必须进入一个新的场景。新的场景暗示了一个新的背景，所有的红队都不见了，甚至没有他们的尸体等等。

我们必须在原子的、非常低的级别上执行此操作吗？

是否存在我们缺少的高级概念、API 调用等？

**添加：**

在 Pygame 中，scene2、scene3、scene44 等都是不同的文件。

从scene1，我这样调用scene2：

```
sprites_to_live_on = sprite1, sprite2, soldiers_still_alive, ..    
background_for_scene2 = "/a/b/c/bkground123.png"    
scene2.start(sprites_to_live_on, background_for_scene2) 
```

每个精灵都会自动将它们的力量、健康、武器等带入下一个场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:34:49.213

gameQuery 中并没有真正的场景概念，但提供了一些工具来帮助您实现您在此处描述的内容。要从一个场景切换到另一个场景，您通常会：

1.  使用 pauseGame 暂停游戏 (http://gamequeryjs.com/documentation/api/#pauseGame)
2.  显示启动画面，让用户知道下一个场景正在加载
3.  删除不需要的精灵并添加新的精灵，如果需要，创建新的动画。
4.  使用 resumeGame (http://gamequeryjs.com/documentation/api/#resumeGame) 恢复游戏您通常会向此调用传递一个函数，该函数将在加载所有新资源后删除启动画面。

您可以在不同的 .js 文件中分离场景并使用 jQuery.getScript (http://api.jquery.com/jQuery.getScript/) 加载它们。在上面的示例中，您将在第 3 步中执行此操作。

请记住，大多数时候你的精灵和你的游戏对象是独立的实体。例如，您将必须删除敌人的精灵以及“删除”实现其行为的对象。

希望它有所帮助，和你儿子一起玩编码你的游戏！

# algorithm - 如果你有一个大小为 14 的二项式堆，你怎么知道哪个节点是根节点？

> ID：13784780
> 
> 赞同：0
> 
> 时间：2012-12-09T04:54:59.170
> 
> 标签：algorithm, sorting, heap, root, max

![在此处输入图像描述](../Images/7b6292a82605e115ec6c1317703347b0.png)

大家好，我刚刚对这个图表有疑问。我怎样才能知道哪个节点是根节点，**我将如何堆积**这样的东西？

谢谢你。

> 编辑：对不起，当我说 heapify 时，我的意思是做一个最大堆。通常使用常规堆，我会从左到右，从不是叶节点的第一个节点开始向下筛选。我不明白我怎么能在这里做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:32:13.890

这是一个二项式堆，它没有一个根，而是一组根（因为二项式堆是一组二叉树）。

“制作最大堆”是什么意思？最大堆和二项式堆彼此之间的距离就像 java 和 javascript 一样接近。

如果您提取最小 n 次，您可以获得一个最大堆的排序数组。复杂度为 O(n*log(n))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T04:57:24.810

从概念上讲，根应该是唯一没有祖先的节点 - 在您的图表中为 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T16:13:37.930

我认为您正在尝试将二项式堆视为二进制堆，这是行不通的。

[二进制堆](https://en.wikipedia.org/wiki/Binary_heap)可以存储在没有显式链接的数组中 - 链接隐含在数组中的位置中。一个无序数组可以被“堆化”，重新排序以在 O(n) 时间内生成一个有效的二进制堆。这是二进制堆的一个关键优势——有一个轻量级的实现可以很好地使用内存。

我从来没有实现过[二项式堆](https://en.wikipedia.org/wiki/Binomial_heap)，虽然我研究过它们，但那是不久前的事了。不过，我非常有信心，二项式堆不是二叉堆，不能以这种方式实现。二项堆有其自身的优势，但它们并没有保留二叉堆的所有优点。如果二项式堆普遍优越，那么没有人会关心二叉堆。

IIRC，二叉树的正常实现（二叉堆所基于）是每个父节点都有一个子节点的链表和一个根的链表。这些链接列表使用显式链接。这就是每个节点支持 k 个子节点的方式，k 没有上限。

二进制堆的重要额外操作是合并。如果二项式堆存储在具有隐式链接的数组中，则合并显然需要大量复制——首先将项目从一个数组复制到另一个数组。因此，有效的合并是不可能的——二项式堆的关键优势将丢失。

然而，对于显式链接，将两个二叉树组合为一个是 O(1) 指针摆弄操作（将一个项目添加到链表的头部），因此两个二叉堆可以与 O(log n) 二叉树合并合并非常有效。

这有点像排序数组和二叉搜索树之间的区别。当然，排序数组有优势，但也有局限性。当您只需修改一个或两个链接而不在数组中移动项目时，某些操作会更有效。有时您不需要这些操作，并且避免需要链接并仅对排序数组进行二进制搜索会更有效，这相当于搜索具有隐式链接的完美平衡的二进制搜索树。

# assembly - 影子寄存器——手臂

> ID：13784783
> 
> 赞同：2
> 
> 时间：2012-12-09T04:55:39.470
> 
> 标签：assembly, arm, microcontroller, microprocessors

影子寄存器用于减少中断延迟。

Arm有15个寄存器，那么这些影子寄存器存放在哪里呢？

术语“影子寄存器”是否与银行和非银行寄存器有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:15:28.507

ARM 技术文档没有具体提到*shadow*，所以很难将其与 ARM 联系起来。

然而，从[ARM 与 MIPS 架构的比较](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dai0235c/index.html)来看：

> > MIPS 体系结构支持实现多个“影子”寄存器组。这允许更有效的上下文切换操作，但该功能在基于 MIPS 的设备上并不普遍或一致地实现这一事实使其用途有限。因此，很少有编译器或操作系统使用它。

在这种情况下，“影子寄存器”更像是一种独立的东西——它们可以用于很多事情，而分组寄存器用于明确分离的执行模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T15:08:36.590

arm 有超过 15 个寄存器，您可以访问的寄存器组中有 15 个是模式相关的。infocenter.arm.com 上的 arm 架构参考手册（只需获取涵盖传统 arm 拱门的 ARMv5 手册）显示了寄存器列表以及访问它们所需的模式。

ARM 不使用术语影子寄存器，但 fiq 模式与您所要求的类似，因为您不必从被中断的任务中保留许多或任何寄存器。ARM 进一步拥有多个堆栈等，具体取决于模式。

# paypal - 贝宝基于位置的运输

> ID：13784785
> 
> 赞同：-1
> 
> 时间：2012-12-09T04:55:55.287
> 
> 标签：paypal, shipping

我为一位希望为英国、欧洲和国际客户提供不同运费的客户创建了一个登录页面。除了创建电子商务设置之外，我一生都找不到在哪里做这件事，但她只卖一件商品，她需要在两天内完成。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:13:07.913

这不是您可以通过个人资料中的 PayPal 运输选项执行的操作。您需要在将用户发送到 PayPal 之前计算您网站上的运费，或者如果您不希望他们输入他们的送货地址，您可以使用[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec)并在他们返回后计算它在完成付款之前您的网站。

# ruby - 使用 Class.new 时访问祖先常量时出现 NameError？

> ID：13784786
> 
> 赞同：1
> 
> 时间：2012-12-09T04:56:22.247
> 
> 标签：ruby, nameerror

据我目前的知识，用 定义的 Ruby 类`Class.new`不应与用`class`关键字创建的类不同。那么为什么跟随类 B 和 C 的行为不同呢？

```
class A
  TEST = 'A'   
  def test
    TEST
  end   
end

class B < A
 def test
  TEST
 end    
end

C = Class.new(A) {        
 def test
  TEST
 end    
}

puts 'A: ' + A.new.test # => "A: A"
puts 'B: ' + B.new.test # => "B: A"
puts 'C: ' + C.new.test # => uninitialized constant TEST (NameError) 
```

使用 ruby​​ 1.9.3p327 和 ruby​​ 1.8.7p358 进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:59:11.753

导致您使用块来定义`C`类，并且该块的范围`main`是`A`

让它工作：

```
C = Class.new(A)

def C.test
  TEST
end 
```

或者：

```
class << C
    def test
      TEST
    end    
end 
```

# algorithm - (x % 64) == (x & 63) 背后的基本原理是什么？

> ID：13784790
> 
> 赞同：3
> 
> 时间：2012-12-09T04:57:08.000
> 
> 标签：algorithm, bit-manipulation, bitwise-operators

> **可能重复：**
> [按位并代替模运算符](https://stackoverflow.com/questions/3072665/bitwise-and-in-place-of-modulus-operator)

有人可以解释使这两种表达方式等同的理由吗？我知道它只有效，因为 64 是 2 的幂，但是我如何在逻辑上或数学上从除法到按位和？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T05:06:27.183

该运算`x % 64`返回`x`除以 64 的余数，其中（假设 x>0）必须是 0 到 63 之间的数字。让我们看一下二进制：

63 [dec] = 0011 1111 [b]
64 [dec] = 0100 0000 [b]

您可以看到任何 64 倍数的二进制表示必须以 6 个零结尾。因此，将任何数字除以 64 时的余数是原始数字，除了最右边的 6 个位之外，所有位都被删除。

如果你对一个数字与 63 进行按位与运算，结果就是这 6 位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T05:06:24.433

每次进行位移时，这与除以 2 相同。这是因为二进制表示是以 2 为底的。这与以 10 为底的 123 中删除 3 得到 12 的方式相同，这就像将 123 除以 10。

% 是 mod 运算符，表示除法的余数。64 是 2 的 6 次方，所以除以 64 就像移出 6 位。除法的其余部分是您移出的那六位。您可以通过逐位运算找到这六个位的值，并且只设置低六位，即 63。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T05:05:38.243

第一个给出余数。

第二个是短路（按位与）。

按位与，63（二进制为 111111）所以 LHS (x) 上的任何内容都是与，结果除 MSB 外相同。Ans so is the case with % with 64 (binary 100000), 除数和 MSB 保持不变。

# html - 需要帮助找出为什么文本会溢出我的页面

> ID：13784797
> 
> 赞同：0
> 
> 时间：2012-12-09T04:58:15.147
> 
> 标签：html, css

就像标题所说的那样，我遇到了一个很长的字符串溢出我的页面的问题。我尝试了一些溢出技术，但似乎都不起作用。

我之前曾将此作为 Primefaces 问题发布，但后来得知这不是 Primefaces 问题。无论如何，如果有人对我如何解决这个问题有任何建议，我将不胜感激。我将在下面发布我的 HTML，以便您可以看到我在说什么。

感谢您花时间阅读，祝您有美好的一天。:-)

```
<!DOCTYPE html>
<html>
    <head>
        <title> overflow </title>
        <style type="text/css">
            #container{
                width: 800px;
                border: 1px solid #000;
                background-color: #efefef;
            }
            div {
                padding: 10px;
            }
            span.text {
            }
        </style>
    </head>
    <body>
        <h3> overflow </h3>
        <div id="container">
            <table border="1">
                <tr>
                    <td>
                        <span>cell_X</span>
                    </td>
                    <td>
                        <span>cell_Y</span>
                    </td>
                    <td>
                        <span>cell_Z</span>
                    </td>
                    <td>
                        <span class="text">asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf</span>
                    </td>
                    <td>
                        <span>&nbsp;</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>cell_X</span>
                    </td>
                    <td>
                        <span>cell_Y</span>
                    </td>
                    <td>
                        <span>cell_Z</span>
                    </td>
                    <td>
                        <span class="text">asdf</span>
                    </td>
                    <td>
                        <span>&nbsp;</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>cell_X</span>
                    </td>
                    <td>
                        <span>cell_Y</span>
                    </td>
                    <td>
                        <span>cell_Z</span>
                    </td>
                    <td>
                        <span class="text">asdf</span>
                    </td>
                    <td>
                        <span>&nbsp;</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>cell_X</span>
                    </td>
                    <td>
                        <span>cell_Y</span>
                    </td>
                    <td>
                        <span>cell_Z</span>
                    </td>
                    <td>
                        <span class="text">asdf</span>
                    </td>
                    <td>
                        <span>&nbsp;</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>cell_X</span>
                    </td>
                    <td>
                        <span>cell_Y</span>
                    </td>
                    <td>
                        <span>cell_Z</span>
                    </td>
                    <td>
                        <span class="text">asdf</span>
                    </td>
                    <td>
                        <span>&nbsp;</span>
                    </td>
                </tr>
            </table>
            <div>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed semper justo vel felis blandit ut egestas nisi tincidunt. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nunc in est pulvinar orci pharetra fringilla in eget quam. Maecenas id ipsum eget arcu tempus varius eu sit amet neque. Praesent quis consectetur ligula. Nam bibendum, turpis nec dignissim euismod, arcu libero sodales sapien, ut scelerisque magna risus eu orci. Curabitur sit amet turpis at turpis adipiscing luctus nec id felis. Vestibulum luctus mauris quis ante dignissim rutrum. Fusce fermentum enim quis nisl volutpat consequat. Integer lacinia tempor nisi id aliquet. Praesent vitae semper ipsum. Curabitur mauris est, faucibus eu auctor a, egestas vitae nisi.
            </div>
            <div>
                Donec fringilla laoreet leo, eu aliquet dolor mollis sed. Donec ligula turpis, vestibulum sed faucibus at, venenatis consequat turpis. Integer fringilla, ligula in consequat sodales, odio nunc vulputate nisi, non hendrerit dolor mauris sodales nulla. Nulla mattis iaculis nisi, quis lacinia massa dictum vitae. Fusce quis turpis neque, nec adipiscing tortor. Cras et nisi sem, at viverra lacus. Nam posuere odio non lacus facilisis condimentum. Ut ultricies, arcu eget tempus facilisis, urna dui commodo neque, a posuere libero mi ut nisl. Praesent ut semper lectus. Aenean id mauris nulla. Pellentesque dapibus congue varius. Ut id turpis consequat augue pellentesque egestas. Nunc feugiat bibendum tortor, sit amet fringilla enim viverra in. Mauris sit amet lorem eget enim ultrices euismod id eu velit. Duis eu vestibulum sapien.
            </div>
            <div>
                Vivamus volutpat interdum tortor et luctus. Etiam laoreet congue nunc in congue. Nullam interdum mauris eros. Duis at turpis odio, in interdum odio. Aenean feugiat est at libero hendrerit quis laoreet purus egestas. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vestibulum sagittis scelerisque venenatis. Morbi tristique rutrum tortor at lobortis. Suspendisse suscipit purus vel massa laoreet vitae dapibus lorem imperdiet. Mauris consectetur arcu et diam iaculis et cursus leo ultrices. Nunc turpis nunc, interdum ac pretium id, facilisis quis libero.
        </div>
        <div>
                Donec eget velit in nisl posuere porttitor ut at nisl. Phasellus eros tortor, pretium at sollicitudin pellentesque, feugiat a tortor. Integer blandit viverra odio, id iaculis odio fringilla ac. Nulla dignissim fermentum lorem ac scelerisque. Vivamus iaculis augue eu sapien porta convallis. Nam faucibus, diam nec condimentum dapibus, erat arcu vehicula nisi, sed vehicula ante ante convallis ipsum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Donec quam elit, mattis pretium venenatis nec, vehicula ut tellus. Phasellus commodo pretium purus, non viverra erat auctor sed. Ut dui nisl, pellentesque nec placerat non, sagittis condimentum nunc. Donec varius tincidunt est eu consequat. Etiam ac nulla ut nibh sagittis vulputate. Nullam egestas risus eu nunc tincidunt a ultricies libero posuere. Nulla facilisi. Maecenas sagittis est nec tellus sodales porttitor.
        </div>
        <div>
                Nullam vulputate dui ac velit lobortis pellentesque eu a nisi. Maecenas vitae ligula dui, in imperdiet mi. Mauris commodo nisl eu eros sodales sed tempor leo auctor. Nam ornare varius arcu, at dictum ipsum volutpat nec. Aenean sagittis adipiscing hendrerit. Aenean at quam lacus. Donec malesuada bibendum vestibulum. Suspendisse lobortis pretium neque, vitae tempus felis interdum in. Aliquam sed metus in felis sodales interdum. Praesent malesuada nulla pretium arcu consectetur eu dictum lacus elementum. Ut dictum faucibus hendrerit.
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:01:08.303

```
<!DOCTYPE html>
<html>
    <head>
        <title> problem </title>
        <style type="text/css">
.main
{
width:960px;
margin:0 auto;
 overflow: scroll;

}
</style>
    </head>
    <body>
        <h4> problem </h4>
        <div class="main">
            <table border="1">
                <tr>
                    <td>
                        <span>cell</span>
                    </td>
                    <td>
                        <span>&nbsp;</span>
                    </td>
                    <td>
                        <span>cell</span>
                    </td>
                    <td>
                        <span class="troubleSpan">asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf</span>
                    </td>
                    <td>
                        <span>&nbsp;</span>
                    </td>
                </tr>
            </table>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T07:15:05.760

使用 word-wrap:break word css 属性并给它一个明确的宽度：

```
span .text{
    word-wrap:break-word;
    width:800px;
} 
```

此属性仅适用于元素具有可视化渲染、具有显式高度/宽度的内联元素、绝对定位和/或块元素的情况。

# c# - 控制台窗口未显示

> ID：13784801
> 
> 赞同：1
> 
> 时间：2012-12-09T04:59:20.047
> 
> 标签：c#, nunit

我在我的一个 NUnit 测试中有这个。我正在使用 R# 来逐步完成我的测试。控制台窗口没有弹出来向我显示该 foreach 循环的内容...不确定我缺少什么，但是是的，它有数据可以循环，所以这里不像没有数据

```
foreach (PostEntry post in posts)
{
    Console.WriteLine("id: " + post.Id);
    Console.WriteLine("title: " + post.Title);
    Console.WriteLine("body: " + post.Body);
    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T05:15:49.513

如果您正在处理类库并且只想查看每个循环的内容，您可以使用 `System.Diagnostics.Debug.Write`而不是 Console.WriteLine。输出将在“**输出”窗口**中对您可见。

```
foreach (PostEntry post in posts)
{
    System.Diagnostics.Debug.WriteLine("loop starts");
    System.Diagnostics.Debug.WriteLine("id: " + post.Id);
    System.Diagnostics.Debug.WriteLine("title: " + post.Title);
    System.Diagnostics.Debug.WriteLine("body: " + post.Body);
    System.Diagnostics.Debug.WriteLine("loop ends");
    System.Diagnostics.Debugger.Break();
} 
```

# drupal - 不显示 Drupal 自定义内容类型

> ID：13784805
> 
> 赞同：1
> 
> 时间：2012-12-09T05:00:36.903
> 
> 标签：drupal, permissions

我正在使用 drupal 构建一个网站，它允许用户创建项目，然后邀请其他用户加入他们的项目。

我为主要任务创建了一个内容类型-“项目”。我可以成功地编辑并发布此内容类型，但是，当我进入如下图所示的屏幕时：http: [//imgur.com/t49pl](http://imgur.com/t49pl)，“视图”选项卡始终为空。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T09:03:34.173

然而，tulvit 说了什么……

无论如何，我建议创建一个视图来显示此内容。节点生成的任何东西总是很难按照你的意愿呈现，所以要解决这个问题，只需创建一个视图来输出内容。

# graph - 使节点更加分开（图形可视化）

> ID：13784806
> 
> 赞同：3
> 
> 时间：2012-12-09T05:01:23.140
> 
> 标签：graph, matplotlib, graphviz, networkx, graph-visualization

我正在尝试从距离矩阵中绘制图表。该代码工作正常，并给了我一个图像。图像很大，但所有节点都打包在一起。我想增加节点之间的空间。我希望节点更加分开而不是扩大。

我试过 Graphviz NEATO，但它的问题是它只支持 100 个节点，因为我有 1000 个节点，所以它显示了 10 个集群，每个集群有 100 个节点。

我的整体代码 -

```
import networkx as nx
import pickle
import matplotlib.pyplot as plt
print "~~~Unpickle."
p_file = open('pickles/names')
Names = pickle.load(p_file)
p_file.close()
p_file = open('pickles/distance')
Dist = pickle.load(p_file)
p_file.close()

G = nx.Graph()

print "~~~Inserting Nodes."
for store in Names:
    G.add_node(store)

print "~~~Inserting Edges."

for i in range(601):
    for j in range(601):
        if Names[i]!=Names[j]:
            G.add_edge(Names[i],Names[j],weight=Dist[i][j])
print "~~~Drawing Graph."
nx.draw(G,pos,node_color='#A0CBE2',edge_color='none',width=1, edge_cmap=plt.cm.Blues, with_labels=False)
print "~~~Saving Figure."
plt.savefig("graph.png", dpi=500, facecolor='w', edgecolor='w',orientation='portrait', papertype=None, format=None,transparent=False, bbox_inches=None, pad_inches=0.1) 
print "~~~Success!" 
```

输出（删除边缘和标签）： ![在此处输入图像描述](../Images/a81a459e8ba7df4dd9ed8a0d738c0bd6.png)

具有 600 个节点的 Graphvix NEATO 的输出 -

![在此处输入图像描述](../Images/c72627234d14259e334ac54171bccdfc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T05:29:15.433

从[图](http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure)文档：

`figure(num=None, figsize=(8, 6), dpi=80, facecolor='w', edgecolor='k')`

因此 figure(figsize=(10,10)) 创建了一个 10 英寸 × 10 英寸的图像，即 800 × 800 像素。

如果要打印大型网络图，最简单的方法是增加 DPI。

尝试类似：

`plt.figure(num=None, figsize=(10, 10), dpi=1200). This will produce a large image file.`

您也可以尝试打印pdf

`plt.savefig("graph.pdf")`

使用此选项，最终图形将不会被光栅化。

要更改节点之间的距离，您可以使节点更小或更改布局。改变布局很难做好。

例如，尝试布局中的比例选项，

`scale = 2`

将使所有节点之间的距离加倍。

因此，在您的示例中，更改行

`nx.draw(G)`

到

```
pos = nx.circular_layout(G, scale=2)
nx.draw(G, pos) 
```

您还可以使用不同的布局，请参阅[文档](http://networkx.lanl.gov/reference/drawing.html#module-networkx.drawing.layout)以获取更多详细信息。

# asp.net-mvc - 第一次更新数据库，报错

> ID：13784810
> 
> 赞同：0
> 
> 时间：2012-12-09T05:02:58.447
> 
> 标签：asp.net-mvc, entity-framework

我正在构建一个 mvc 应用程序，首先使用 EF 代码。我刚开始。这是与我的问题有关的代码。

**广告模特**

```
[Key]
     public virtual int ID { get; set; }
     public virtual int UserID { get; set; }
     public virtual int Cycles { get; set; }
     public virtual decimal Cost { get; set; }
     public string Name { get; set; }
     public virtual List<AdDisplayTime> DispalyTime { get; set; }
     public virtual DateTime CreateDate { get; set; }
     public virtual DateTime UpdateDate { get; set; }
     public virtual int UpdatedBy { get; set; }
     public virtual bool FullScreen { get; set; } 
```

**AdDisplayTimes 模型**

```
[Key]
public virtual int ID { get; set; }
public virtual int AdID { get; set; }
public virtual string DisplayTime { get; set; } 
```

**状态模型**

```
[Key]
public virtual int ID { get; set; }
public virtual string Name { get; set; } 
```

这是我的迁移课程中的种子方法

```
var adDisplayTimes = new List<AdDisplayTime>
                                 {
                                     new AdDisplayTime{AdID = 1,DisplayTime = "10:30"},
                                     new AdDisplayTime{AdID = 1,DisplayTime = "10:40"},
                                     new AdDisplayTime{AdID = 1,DisplayTime = "10:50"},
                                     new AdDisplayTime{AdID = 1,DisplayTime = "11:00"}
                                 };
        context.Advertisements.AddOrUpdate(a => a.Name,
            new Advertisement
                {
                    Name = "Fisrt Ad",
                    OwnerID = 1,
                    Cycles = 125,
                    Cost = (decimal)234.45,
                    FileName = "test.jpg",
                    Tier = 1,
                    Path = "~/UploadedImages/Pending/test.jpg",
                    DispalyTime = adDisplayTimes,
                    CreateDate = DateTime.Now,
                    ValidFrom = DateTime.Now,
                    ValidTill = DateTime.Now.AddMonths(1),

                    FullScreen = true,
                    IsAdminAd = false,
                    Status = 1
                }
            );
        context.AdDisplayTimes.AddOrUpdate(ad=>ad.AdID,
                                     new AdDisplayTime { AdID = 1, DisplayTime = "10:30" },
                                     new AdDisplayTime { AdID = 1, DisplayTime = "10:40" },
                                     new AdDisplayTime { AdID = 1, DisplayTime = "10:50" },
                                     new AdDisplayTime { AdID = 1, DisplayTime = "11:00" }
            );
        context.Statuses.AddOrUpdate(s=>s.Name,
            new Status{Name = "Pending"},
            new Status{Name = "Approved"},
            new Status{Name = "Edited"},
            new Status{Name = "Activated"},
            new Status{Name = "DeActivated"}
            ); 
```

当我从 Visual Studio 中的包管理器控制台运行命令“update-database”时，我得到了这个

```
update-database
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
No pending code-based migrations.
Running Seed method.
System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.SqlClient.SqlException: The conversion of a datetime2 data type to a datetime data type resulted in an out-of-range value.
The statement has been terminated.
at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
at System.Data.SqlClient.SqlDataReader.get_MetaData()
at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)
at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
--- End of inner exception stack trace ---
at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
at System.Data.Entity.Internal.InternalContext.SaveChanges()
--- End of inner exception stack trace ---
at System.Data.Entity.Internal.InternalContext.SaveChanges()
at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
at System.Data.Entity.DbContext.SaveChanges()
at System.Data.Entity.Migrations.DbMigrator.SeedDatabase()
at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.SeedDatabase()
at System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId)
at System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration)
at System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration)
at System.Data.Entity.Migrations.Design.ToolingFacade.UpdateRunner.RunCore()
at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
An error occurred while updating the entries. See the inner exception for details. 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T06:43:21.673

如果您检查内部异常，您会看到此错误

```
The conversion of a datetime2 data type to a datetime data
 type resulted in an out-of-range value 
```

并且在 SO 中找到的常见解决方案是将 DateTime 列的数据类型定义为 datetime2。您可以使用 Data Annotation 来执行此操作，例如：

```
[Column(TypeName="datetime2")] 
```

并使用 Fluent Api，例如：

```
HasColumnType("datetime2") 
```

希望这可以帮助。

# java - 关于创建同步机制

> ID：13784813
> 
> 赞同：0
> 
> 时间：2012-12-09T05:03:48.647
> 
> 标签：java, multithreading

> **可能重复：**
> [测试按顺序运行线程的多线程 Java 类](https://stackoverflow.com/questions/13780123/testing-a-multithreaded-java-class-that-runs-the-threads-sequentially)

请不要将以下问题视为重复问题..！

我开发了一个类，它可以让多线程按顺序运行，一次一个，按顺序运行。该类的claimAccess函数和releaseAccess函数之间的所有应用程序代码一次只能在一个线程中执行。所有其他线程将在队列中等待，直到前一个线程完成。请告知我想通过在 main() 方法本身中编写一段代码来测试我的类。

```
import java.util.ArrayList;
import java.util.List;

public class AccessGate {
    protected boolean shouldWait = false;
    protected final List waitThreadQueue = new ArrayList();

    /**
     * For a thread to determine if it should wait. It it is, the thread will
     * wait until notified.
     * 
     */
    public void claimAccess() {
        final Thread thread = getWaitThread();
        if (thread != null) {
            // let the thread wait untill notified
            synchronized (thread) {
                try {
                    thread.wait();
                } catch (InterruptedException exp) {
                }
            }
        }
    }

    /**
     * For a thread to determine if it should wait. It it is, the thread will be
     * put into the waitThreadQueue to wait.
     * 
     */
    private synchronized Thread getWaitThread() {
        Thread thread = null;
        if (shouldWait || !waitThreadQueue.isEmpty()) {
            thread = Thread.currentThread();
            waitThreadQueue.add(thread);
        }
        shouldWait = true;
        return thread;
    }

    /**
     * Release the thread in the first position of the waitThreadQueue.
     * 
     */
    public synchronized void releaseAccess() {
        if (waitThreadQueue.isEmpty()) {
            shouldWait = false;
        } else {
            shouldWait = true;
            // give the claimAccess function a little time to complete
            try {
                Thread.sleep(10);
            } catch (InterruptedException exp) {
            }

            // release the waiting thread
            final Thread thread = (Thread) waitThreadQueue.remove(0);
            synchronized (thread) {
                thread.notifyAll();
            }
        }
    }
} 
```

现在我的主要方法是..

```
public static void main (String args[])
{

} 
```

请告知我如何在我的主要方法中生成线程来测试上述类..!!请告知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T07:11:15.600

这应该让你开始......

```
public static void main (String args[])
{
    AccessGate gate = new AccessGate();

    // create as many threads as you like
    Thread t1 = new MyThread(gate);
    Thread t2 = new MyThread(gate);

    // start all the threads you created
    t1.start();
    t2.start();        
}

class MyThread extends Thread {

    AccessGate gate;

    public MyThread(AccessGate g) {
        gate = g;
    }

    public void run() {
        gate.claimAccess();
        // Do something or print something.
        // Could output several statements.
        // Why not do a sleep as well to see if other threads interrupt
        // this code section.
        gate.releaseAccess();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:32:45.213

考虑使用`Executors.newSingleThreadExecutor()`. 这是一个只有一个线程执行任务的线程池。只有在第一个任务完成后，下一个任务才会开始执行：

```
Executor executor = Executors.newSingleThreadExecutor();
Future<String> future1 = executor.submit(new Callable<String>() {
    @Override
    String call() throws Exception {
        // my first task
    }
});
Future<String> future2 = executor.submit(new Callable<String>() {
    @Override
    String call() throws Exception {
        // my second task
    }
});
... 
```

您可以通过 Future API 检索任务执行的结果，还可以跟踪每个作业的状态。

# android - com.google.ads 包不存在导入 com.google.ads.AdRequest

> ID：13784814
> 
> 赞同：1
> 
> 时间：2012-12-09T05:04:42.250
> 
> 标签：android, netbeans, admob

我需要将 AdMob 添加到我的 android Netbeans 项目中，并且我已经在 XML 中设置了它。我在项目中添加了外部 jar GoogleAdMobAdsSdk-6.2.1.jar。但是，当我尝试构建项目时，它显示以下消息：

```
error: package com.google.ads does not exist import com.google.ads.AdRequest; 
```

我怎样才能解决这个问题。 ![在此处输入图像描述](../Images/694af7fae0a1bfaef4f8dffc3cfcb7cf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:27:53.650

我刚刚尝试过，我认为这是因为您无法自行导入`com.google.ads`。尝试`com.google.ads.*`导入

# java - 是否存在用于管理服务器会话的 Java 库？

> ID：13784817
> 
> 赞同：0
> 
> 时间：2012-12-09T05:05:50.423
> 
> 标签：java, session, sessionid

我正在寻找能够管理任何协议的服务器会话的 Java 库（或简单类）。我的应用程序与 HTTP 没有任何关系。会话必须在不同的连接之间保持活动状态，就像 HTTP cookie 一样。

我想要走的路是：

1.  客户端连接到服务器
2.  客户端发送登录信息
3.  服务器回复一个状态和一个会话 ID（一个长字符串，就像 JSESSIONID 或 PHPSESSID）
4.  客户端向服务器发送请求（使用现有的或新的 TCP 连接），始终提供会话 ID
5.  客户要求注销
6.  服务器删除会话并使会话 ID 无效

我只是在寻找有关会话管理部分的现有内容，即使它真的很容易实现。否则我猜一个`Map`和一个随机字符串生成器会完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:14:14.333

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html#randomUUID%28%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html#randomUUID%28%29)

[http://www.javapractices.com/topic/TopicAction.do?Id=56](http://www.javapractices.com/topic/TopicAction.do?Id=56)

randomUUID() 方法在 java.util.UUID 中可能很有用，请参见上面的链接。它保证 id 是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:49:57.103

如果你想让你的会话数据跨多个节点扩展，你甚至可以尝试 hazelcast、infinispan 等框架。它们还提供跨节点生成唯一 ID 的规定。

# java - 在 Java 中，如何编写一个生成新进程来处理请求的套接字服务器？

> ID：13784824
> 
> 赞同：1
> 
> 时间：2012-12-09T05:07:32.410
> 
> 标签：java, process, serversocket

我不是在问如何在新创建的线程中处理请求。我问的是如何在新创建的流程中做到这一点，尽管我知道它的缺点。

为了分叉一个进程来处理请求，服务器套接字需要以某种方式将客户端套接字对象传递给子进程。那是如何通过的？是通过序列化它并将其作为 的参数之一传递`Runtime.exec()`吗？

另外，从 TCP 连接的角度来看，我可以想象在客户端进程和衍生进程之间创建了一个新的 TCP 连接。那么这是如何创建的呢？这对客户透明吗？客户是否知道产生了一个新进程来处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:22:00.667

使用纯 Java 无法实现您想要做的事情：

您不能“序列化”客户端套接字并将其传递到任何地方：`Socket`该类*不是*操作系统的“真实”套接字，它只是一个 Java 端“控制对象”，其中包含一些 Java 内部信息和操作的**ID**系统插座。这个 ID - 取决于操作系统 - 只是一个整数文件句柄。此句柄无法在现有进程之间转移¹. 在某些操作系统（尤其是 Unix 派生的操作系统）上创建新进程（注意小“p”）时，所有打开的文件句柄都会从父进程复制到子进程（新进程）。这包括套接字句柄。然后一个孩子可以处理这个请求。但并非所有操作系统都支持该机制。Java 决定只支持在所有支持的操作系统上可用的东西。这意味着 new`Process`隐式关闭几乎所有文件句柄，包括套接字内容。厄运。

此外，您不能以*透明的方式*创建到客户端的新 TCP 连接。一个新的 TCP 连接就是一个新的 TCP 连接——它需要连接双方的合作。这与“透明”相反。

* * *

¹至少不是在 Java 中。使用纯 C 和 Linux，您可以使用特殊的系统调用来执行此操作。

# android - 如何解析 JSON 对象并将其显示在列表视图中？

> ID：13784825
> 
> 赞同：3
> 
> 时间：2012-12-09T05:07:32.137
> 
> 标签：android, json, android-layout, android-asynctask

下面是我遇到问题的代码。php 文件就像一个魅力，你可以看到你是否转到 url_all_dates 变量保存的值。在这个类下面是我的 list_item 的 .xml 布局文件。该应用程序运行但不显示数据库中的任何日期。：

```
public class RequestTour extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> datesList;

    // url to get all dates list
    private static String url_all_dates = "http://www.prayingmantesconcepts.com/androidfinal/get_all_avail_dates.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_DATES = "dates";
    private static final String TAG_DATEID = "dateID";
    private static final String TAG_DATE = "date";

    // dates JSONArray
    JSONArray dates = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dates);//put dates layout here.

        // Hashmap for ListView
        datesList = new ArrayList<HashMap<String, String>>();

        // Loading dates in Background Thread
        new LoadAllDates().execute();

        // Get listview
        ListView lv = getListView();

        // on seleting single date
        // launching Book Tour Screen
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String dateID = ((TextView) view.findViewById(R.id.dateID)).getText()
                        .toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        BookTour.class);
                // sending dateID to next activity
                in.putExtra(TAG_DATEID, dateID);

                // starting new activity and expecting some response back
                startActivityForResult(in, 100);
            }
        });

    }

    // Response from Edit Product Activity
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        // if result code 100
        if (resultCode == 100) {
            // if result code 100 is received 
            // means user booked a tour
            // reload this screen again
            Intent intent = getIntent();
            finish();
            startActivity(intent);
        }

    }

    /**
     * Background Async Task to Load all dates by making HTTP Request
     * */
    class LoadAllDates extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(RequestTour.this);
            pDialog.setMessage("Loading dates. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All dates from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_dates, "GET", params);

            // Check your log cat for JSON response
            Log.d("All Dates: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    //  found
                    // Getting Array of 
                     dates = json.getJSONArray(TAG_DATES);

                    // looping through All Dates Available for Request
                    for (int i = 0; i < dates.length(); i++) {
                        JSONObject c = dates.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_DATEID);
                        String date = c.getString(TAG_DATE);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_DATEID, id);
                        map.put(TAG_DATE, date);

                        // adding HashList to ArrayList
                        datesList.add(map);
                    }
                } else {
                    // no  found
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            Main.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all 
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            RequestTour.this, datesList,
                            R.layout.list_item, new String[] { TAG_DATEID,
                                    TAG_DATE},
                            new int[] { R.id.dateID, R.id.date });
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }

    }
}

<!------------------------------------------------------------------------------------>

list_item.xml:

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <!-- Date id (dateID) - will be HIDDEN - used to pass to other activity -->
    <TextView
        android:id="@+id/dateID"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:visibility="gone" />

    <!-- Date Label -->
    <TextView
        android:id="@+id/date"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="6dip"
        android:paddingLeft="6dip"
        android:textSize="17dip"
        android:textStyle="bold" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T05:23:51.187

**第一期：** 这里

```
 // no  found
            // Launch Add New product Activity
            Intent i = new Intent(getApplicationContext(),
                    Main.class);
            // Closing all previous activities
            i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(i); 
```

您正在尝试从后台线程访问 Ui 元素。将这些代码行移动到完成后`onPostExecute`更新 UI 。 `AsyncTask``doInBackground`

* * *

**第二期：**

这里

```
 protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all 
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */

                }
            }); 
```

因为我们能够以`onPostExecute`方法访问 UI 元素，`AsyncTask`所以无需在您尝试使用访问或内部的情况下`runOnUiThread`更新 UI 元素`onPostExecute``ListAdapter``ListView``runOnUiThread``onPostExecute`

* * *

**解决方案 ：**

以正确的方式更改您的`LoadAllDates`代码：`AsyncTask`

```
class LoadAllDates extends AsyncTask<String, String,
                                    ArrayList<HashMap<String, String>>> {
    datesList=new ArrayList<HashMap<String, String>>;
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
          //YOUR CODE HERE
        }

        protected ArrayList<HashMap<String, String>> 
                                doInBackground(String... args) {
         // Building Parameters
         List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = 
                    jParser.makeHttpRequest(url_all_dates, "GET", params);

            // Check your log cat for JSON response
            Log.d("All Dates: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    //  found
                    // Getting Array of 
                     dates = json.getJSONArray(TAG_DATES);

                    // looping through All Dates Available for Request
                    for (int i = 0; i < dates.length(); i++) {
                        JSONObject c = dates.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_DATEID);
                        String date = c.getString(TAG_DATE);

                        // creating new HashMap
                        HashMap<String, String> map = 
                                    new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_DATEID, id);
                        map.put(TAG_DATE, date);

                        // adding HashList to ArrayList
                        datesList.add(map);
                    }
                } else {
                    // no  found

                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return ArrayList<HashMap<String, String>>;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(
                     ArrayList<HashMap<String, String>> file_url) {
            // dismiss the dialog after getting all 
            pDialog.dismiss();
            // updating UI from Background Thread

                  if(file_url.size()>0)
                   {
                    ListAdapter adapter = new SimpleAdapter(
                            RequestTour.this, file_url,
                            R.layout.list_item, new String[] { TAG_DATEID,
                                    TAG_DATE},
                            new int[] { R.id.dateID, R.id.date });
                    // updating listview
                    setListAdapter(adapter);
                  }
                 else{
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            Main.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                    }

        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T05:53:50.820

```
You have to use Gson Json parsing this is a good way to parse Json object

eg:

String json1 = "[{\"contactName\":\"3\",\"contactNumber\":\"3\"},{\"contactName\":\"4\",\"contactNumber\":\"4\"}]";

Gson gson = new Gson();
Type collectionType = new TypeToken<List<ContactDetail>>(){}.getType();
List<ContactDetail> details = gson.fromJson(json1, collectionType);

Here ContactDetail class consists of String contactName and String contactNumber and their corresponding getters and setters.
Note: make List<ContactDetail> details as a public static variable in your class and 
from your activity class pass this list object in your listview adapter. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T07:13:50.237

这是我的答案。希望能帮助到你。也可以访问我解析的网址：[http ://redsox.tcs.auckland.ac.nz/734A/CSService.svc/courses](http://redsox.tcs.auckland.ac.nz/734A/CSService.svc/courses)

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.net.URL;
import java.util.ArrayList;
import java.util.zip.GZIPInputStream;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ListActivity;
import android.graphics.Color;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Courses extends Activity {

    ArrayList<String> items = new ArrayList<String>();

    //URL requestUrl = new URL(url);
    JSONArray courses = null;
    //private static final String TAG_COURSES = "Courses";
    static JSONObject jObj = null;
    static String json = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.courses);
        new MyTask().execute("http://redsox.tcs.auckland.ac.nz/734A/CSService.svc/courses");

    }

    private class MyTask extends AsyncTask<String, Void, JSONObject> {

        @Override
        protected JSONObject doInBackground(String... urls) {
           // return loadJSON(url);
            String url = new String(urls[0]);
            try {

                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                //HttpPost httpPost = new HttpPost(url);
                HttpGet httpGet = new HttpGet(url);
                HttpResponse httpResponse = httpClient.execute(httpGet);

                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
          try {
            /*BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "UTF-8"), 8);*/
            InputStream inputStream = is;
            GZIPInputStream input = new GZIPInputStream(inputStream);
            InputStreamReader reader = new InputStreamReader(input);
            BufferedReader in = new BufferedReader(reader);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = in.readLine()) != null) {
                sb.append(line);
                //System.out.println(line);
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object

        try {

            JSONArray courses = new JSONArray(json);
            //JSONArray people = new JSONArray(json);
            for (int i = 0; i < courses.length(); i++) {
                //System.out.println(courses.getJSONObject(i).toString());
                JSONObject c = courses.getJSONObject(i);

                // Storing each json item in variable
                String course_id = c.getString("codeField");
                String course_name = c.getString("titleField");
                String course_semester = c.getString("semesterField");

                items.add(course_id +"\n"+course_name+"\t"+course_semester);

                /*Log.v("--", "Course:" + course_id + "\n Course Title: " + course_name
                        + "\n Semesters offered: " + course_semester);*/
            }

            //jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        } 

        // return JSON String
        return jObj;
        }

        @SuppressWarnings("unchecked")
        protected void onPostExecute(JSONObject json) {
            ListView myListView = (ListView)findViewById(R.id.coursesList);
            myListView.setAdapter(new ArrayAdapter(getApplicationContext(), android.R.layout.simple_list_item_1, items));

    }
    }

} 
```

# javascript - 身份证不变

> ID：13784826
> 
> 赞同：1
> 
> 时间：2012-12-09T05:07:37.380
> 
> 标签：javascript, html, css

我正在尝试创建多个部分并在点击时显示或隐藏它们。所以我有三个`id`：`section2`、`section2hidden`和`section2visible`。

请查看[此网站](http://thomaswd.com/portfolio2)上的非工作代码。点击六年级下的语言艺术链接，然后点击左上角的后退按钮（**不是在浏览器上！**）。你会看到它把元素带回来了，但它仍然是`opacity:0`什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:15:39.640

在寻找不存在的 div 时，您的代码似乎停滞不前。

```
document.getElementById('6-2') 
```

导致错误`cannot read property 'style' of null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T05:23:29.503

首先，当你开发javascript代码时，你需要有一个方法来调试。如果您使用的是 Firefox，则有一个名为 Firebug 的插件。如果您使用的是 Chrome，则它已经集成。使用它，您会看到您的“返回”函数无法完全执行，因为没有具有“6-2”id 的元素，并且您正在尝试访问空对象的属性。这回答了“为什么失败”的问题。我建议您查看以下内容：

*   基本功能概念。您可以拥有一个带参数的函数，而不是构建“one()、two()、three()”等函数。
*   基本循环编程。您正在使用类似的代码

    ```
     .getElementById('6-1')...
    .getElementById('6-2')... 
    ```

    使用循环让机器为你工作，不要只是盲目地复制/粘贴。
*   CSS 类。无需更改元素的 id，只需为其添加一个类，例如“隐藏”。然后添加一个规则，如

    ```
    .hidden{display:none;}
    ```

    当您带走课程时，该元素将重新出现，因为该规则将不再适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T05:13:53.857

当您按下返回按钮时，初始部分仍保留 ID `section2hidden`。应该改回`section2`.

# c++ - 广发银行。只捕获未捕获的异常

> ID：13784828
> 
> 赞同：3
> 
> 时间：2012-12-09T05:08:01.013
> 
> 标签：c++, c, gdb

像这样捕捉，**使用 GDB**：

```
catch throw 
```

抛出异常时，程序停止。

抛出异常但被程序捕获时如何使GDB不停止？或者我应该有全局try-catch而不**使用GDB**

```
catch throw 
```

?

**编辑1**

```
try
{
  // every time exception is thrown
  // program is stopped by GDB
}
catch(const std::exception &e)
{
  // even if the exception is caught by the program
} 
```

**EDIT2**启动 gdb

```
gdb
file /usr/home/user/program
shell ps x
attach #pid
catch throw
c 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T05:20:58.817

`catch throw`将捕获所有抛出的异常，并且没有办法限制它。

您在这里至少有两个选择。你可以根本不使用`catch throw`，如果你使用某种风格的unix，如果它不会被捕获，它将分段错误并在抛出异常的点停止。

`__raise_exception`或者，您可以在[ftp://ftp.gnu.org/pub/old-gnu/Manuals/gdb/html_node/gdb_30.html](ftp://ftp.gnu.org/pub/old-gnu/Manuals/gdb/html_node/gdb_30.html)上设置断点（这是我使用 google 时的第一次点击 - 请尝试研究在 Stackoverflow 上发帖之前自己动手）。

# jquery - Twitter引导下拉菜单在点击时禁用按钮的原始功能

> ID：13784831
> 
> 赞同：3
> 
> 时间：2012-12-09T05:08:06.170
> 
> 标签：jquery, ajax, drop-down-menu, twitter-bootstrap

所以我刚刚开始使用引导程序的下拉菜单。这很方便，但我有一个问题。

为了使下拉菜单起作用，似乎在添加 html 属性时完全禁用了触发下拉菜单（.dropdown-toggle）的元素的原始功能`data-toggle="dropdown"`。

这是有道理的，因为您真的不希望下拉切换来做其他神奇的事情（尤其是在您尝试访问菜单时重定向到新页面或锚点）。

但是，我有一个提交按钮，当您单击它时，它会通过 ajax 保存一些内容。我希望在执行保存后出现下拉菜单。**单击按钮时，****如何切换下拉菜单*并执行 ajax 请求？***

或者在更模糊的意义上，**如何在保留按钮的原始功能的同时切换下拉菜单**？

也许 twitter 引导下拉菜单不是这个的理想功能？或者对此有修改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:52:18.247

这在 Chrome 中对我有用。捕获按钮的单击事件，然后做任何你想做的事情。如果出现错误或带有`stopPropagation()`and的内容，则停止事件`preventDefault()`。[小提琴](http://jsfiddle.net/dG36w/)

```
$("#buttonId").click(function(event) {
    if ("saved" == "saved") {
        null
    }
    else {
        event.stopPropagation();
        event.preventDefault();
    }
});​ 
```

# vb.net - SevenZipSharp 在提取时显示当前提取文件

> ID：13784833
> 
> 赞同：3
> 
> 时间：2012-12-09T05:08:56.953
> 
> 标签：vb.net, sevenzipsharp

我正在使用 vb.net 并且想知道在提取档案时如何显示正在提取的文件。我已经有一个解决方法，但它是“作弊的”并且并没有真正显示正在提取的当前文件。

```
Public Class Form1
    Private listItemIndex As Integer = 0

    Public Sub ext_Extracting(ByVal sender As Object, ByVal e As SevenZip.ProgressEventArgs)
        Dim ext As SevenZipExtractor = New SevenZipExtractor("C:\Test.7z")
        If listItemIndex < ext.ArchiveFileNames.Count Then
            Label1.Text = ext.ArchiveFileNames.Item(listItemIndex).ToString()
            listItemIndex += 1
        End If
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T19:06:31.957

这个答案是由 OP 写的，但被错误地[编辑成问题](https://stackoverflow.com/revisions/13784833/2)：

> 好，我知道了。我必须将“FileInfo.FileName”添加到“SevenZip.FileInfoEventArgs”中，然后在提取时对其进行引用。
> 
> ```
> Public Sub FileExtractionStarted(ByVal sender As Object, ByVal e As SevenZip.FileInfoEventArgs)
>     Label1.Text = e.FileInfo.FileName
> End Sub
> 
> Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
>     SevenZipExtractor.SetLibraryPath("C:\7z.dll")
>     Dim ext As SevenZipExtractor = New SevenZipExtractor("C:\test.7z")
>     ext.BeginExtractArchive("C:\Test")
>     AddHandler ext.ExtractionFinished, AddressOf ext_ExtractionFinished
>     AddHandler ext.Extracting, AddressOf ext_Extracting
>     AddHandler ext.FileExtractionStarted, AddressOf FileExtractionStarted '<---
> End Sub 
> ```

# ruby - Sequel ORM 的等效数据库创建命令是什么？

> ID：13784834
> 
> 赞同：2
> 
> 时间：2012-12-09T05:09:01.973
> 
> 标签：ruby, sequel

什么是 AR 等价物`bundle exec rake db:create`？

我试过

```
sequel -m path/to/migration postgres://uname:password@host/dbName 
```

这是我在文档中可以找到的唯一命令（到目前为止）。显然，我正在寻找一些东西来创建一个不迁移的数据库，这很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:07:25.937

Sequel 没有创建数据库的命令。工作方式`rake db:create`是调用数据库附带的程序（假设命令在 中`$PATH`）。与 PostgreSQL等效的 Sequel`rake db:create`将`createdb`手动运行。

# jquery - 创建后更新 MangoSlick 进度条

> ID：13784836
> 
> 赞同：0
> 
> 时间：2012-12-09T05:09:07.577
> 
> 标签：jquery, jquery-ui

我被分配将 MangoSlick 主题集成到我们当前的管理面板中，它是一个 jQuery、Slick(?) 和响应式模板。

首先，让我解释一下 API 是如何运行的

在文档中，它只说这是唯一的方法

```
data-[options]=[value] 
```

示例：如果我想做一个进度条

我可以使用这种格式

```
<div class="progress">
            <div class="bar" data-title="[title]" data-value="[value]" data-max="[max]" data-format="[format string]"></div>
</div> 
```

所以填写值

```
<div class="progress">
        <div class="bar" data-title="Space" data-value="1285" data-max="5120" data-format="0,0 MB"></div>
</div> 
```

我将其作为输出

![在此处输入图像描述](../Images/04100dce17b9376969f46f6a83f64910.png)

现在，主要问题是当我使用 jQuery attr() 来更改 data-title、data-max、data-value 和 data-format 的属性值时。

为什么它不起作用？

```
<script>
    var jq = $.noConflict();
    jq(document).ready(function(){
      jq('#bokz').attr("data-title", "No Space");
    });
</script> 
```

使用上面的脚本并检查 chrome 中的元素，值已更改

![在此处输入图像描述](../Images/d95911106ef25eee5ae34573befbba6b.png)

但不在进度条中

![在此处输入图像描述](../Images/5e9585c0c3c1834094ed3e3826f0467e.png)

你们中的一些人可能对此有一些想法？

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T10:53:46.580

通用格式`data-foo="bar"`的属性是由 jQuery 用 方法读写的`.data()`。

所以你可以试试这个：

```
var jq = $.noConflict();
jq(document).ready(function(){
  jq('#bokz').data("title", "No Space");
}); 
```

这可能会起作用，尽管它可能取决于何时`.data()`调用该方法。

我猜这`.data("title", "No Space")`只会在进度条初始化之前起作用。

要在初始化后设置它，我希望您需要直接在进度条的 API 上调用一些方法。如果是这样，那么您将需要查看小部件的文档以找到合适的方法，例如`.setTitle(bar)`或`.progressBar('setTitle', bar)`。

# jquery - jQuery 和 Ajax

> ID：13784839
> 
> 赞同：0
> 
> 时间：2012-12-09T05:09:55.943
> 
> 标签：jquery, asp.net, ajax, xmlhttprequest

我对 ajax 和 jquery 很陌生。我试图理解下面的例子。

[http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first)

[http://www.codeproject.com/Articles/17203/Using-jQuery-for-AJAX-in-ASP-NET](http://www.codeproject.com/Articles/17203/Using-jQuery-for-AJAX-in-ASP-NET)

第一个示例不使用 jquery，它使用 XMLHttpRequest 异步发送和接收数据，但在第二个示例中，它使用 jquery，我需要知道为什么未使用 XMLHttpRequest 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:15:26.190

jquery 是一个 JavaScript 库。jquery $.ajax() 方法在幕后使用来自 javascript 的 XMLHttpRequest。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T05:17:54.190

**jQuery 将原始浏览器对象中的XMLHttpRequest**包装成更可用和简化的形式和跨浏览器一致的功能。

**jQuery.ajax**是 jQuery 中的通用 Ajax 请求器，可以执行任何类型和内容的请求。

**另一方面，jQuery.get 和 jQuery.post**只能发出 GET 和 POST 请求。如果你不知道这些是什么，你应该检查HTTP协议并学习一点。这两个函数在内部使用 jQuery.ajax，但它们使用您不必自己设置的特定设置，因此与使用 jQuery.ajax 相比，简化了 GET 或 POST 请求。GET 和 POST 无论如何都是最常用的 HTTP 方法（与 DELETE、PUT、HEAD 甚至其他很少使用的外来方法相比）。

所有**jQuery**函数都在后台使用**XMLHttpRequest**对象，但提供了您不必自己做的附加功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T05:18:44.410

**jQuery 和 AJAX 的区别**

如今，有多种语言可用于制作网页，有些甚至不是唯一的，而只是另一种语言的衍生物。jQuery 是这些衍生产品之一。它是一个轻量级的 JavaScript 库，更侧重于与 HTML 元素的交互。另一方面，AJAX 不是一种特定技术，而是多种技术的组合以提供新功能。每当您从网站请求一组新数据时，它都会清除整个页面并加载新页面。AJAX 用于规避这种行为并允许在不修改整个页面的情况下检索新数据。

概括：

1.  JQuery 是一个轻量级客户端脚本库，而 AJAX 是用于提供异步数据传输的技术组合
2.  jQuery 和 AJAX 经常相互结合使用
3.  jQuery 主要用于动态修改屏幕上的数据，它使用 AJAX 来检索它需要的数据而不改变显示页面的当前状态
4.  大量使用 AJAX 函数通常会导致服务器过载，因为建立的连接数量更多

阅读更多：jQuery 和 AJAX 之间的区别 | 之间的区别| jQuery 与 AJAX [http://www.differencebetween.net/technology/difference-between-jquery-and-ajax/#ixzz2EWrAP000](http://www.differencebetween.net/technology/difference-between-jquery-and-ajax/#ixzz2EWrAP000)

# python - 是否允许在 Python 中修改 func_defaults（Python 3.x 中的 __defaults__）？

> ID：13784840
> 
> 赞同：9
> 
> 时间：2012-12-09T05:09:57.410
> 
> 标签：python

我试过在 Python 2.6 中这样做，它确实“工作”：

```
>>> def f(i='I'): return i
...
>>> f.func_defaults = (10,)
>>> f()
10 
```

但这是官方指定的行为，还是我遇到了特定于实现的行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T05:16:38.170

在[文档](http://docs.python.org/2/reference/datamodel.html) `func_defaults`中记录为“可写”，因此它似乎是定义的行为。

# ruby-on-rails - 如何验证 ActiveRecord 中电子邮件字段的格式？

> ID：13784845
> 
> 赞同：41
> 
> 时间：2012-12-09T05:11:45.423
> 
> 标签：ruby-on-rails, rails-activerecord

我在具有电子邮件字段的 Rails 应用程序中有一个用户模型。是否存在可确保电子邮件格式正确的默认验证？如果没有，我将如何验证该字段？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-09T05:12:22.887

添加你的gemfile：

```
gem 'validates_email_format_of' 
```

在你的模型中：

```
validates :email, email_format: { message: "doesn't look like an email address" } 
```

或者，如果您不想使用 gem，请使用正则表达式：

```
validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\z/i 
```

# networking - 有没有支持 OpenFlow 的模拟器？

> ID：13784848
> 
> 赞同：3
> 
> 时间：2012-12-09T05:12:53.200
> 
> 标签：networking, simulator, openflow

我想模拟 OpenFlow 以检查其在某些框架中的性能和效率。在不使用实际启用 openflow 的开关的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-05T21:38:54.650

要在软件定义网络领域进行性能测试或一般研究，您有多种网络模拟器和仿真器选项：

1) [Mininet](http://mininet.org/) （模拟器；学习曲线：简单；开源）

2) [Estinet](http://www.estinet.com/products.php)（模拟器和模拟器；学习曲线：中等；专有）

3）[ns-3](http://www.nsnam.org/)（模拟器；学习曲线：难；开源）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T07:21:22.577

你可以使用 Mininet，它是一个使用 openVSwitch 的 openflow 网络原型设计工具。Mininet 允许您创建大型网络拓扑并模拟流量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T15:03:23.870

如前所述，Mininet 应该是您的最佳选择。[http://mininet.github.com/](http://mininet.github.com/)

它的优点是：

*   积极发展
*   非常活跃的邮件列表
*   预配置的 Ubuntu 虚拟机可用
*   也支持其他发行版

对 area 51 提案进行投票，使其成为 stackexchange 站点！！！[http://area51.stackexchange.com/proposals/44914/openflow](http://area51.stackexchange.com/proposals/44914/openflow)

我正在为 Fedora 构建 Mininet 安装程序。它会在完全安装时安装，一旦我让它完全运行并且在最小安装时，我会要求它被伪造回 mininet 的主干。

# c# - 调整大小并添加水印后控制图像文件大小

> ID：13784855
> 
> 赞同：0
> 
> 时间：2012-12-09T05:13:57.327
> 
> 标签：c#, asp.net, image, image-resizing

我正在调整图像大小并向图像添加水印。并返回图像。这是我的代码。

```
Image resizedImage = ResizeImage(original6, new Size(500, 375)); 
```

重新尺寸功能：

```
public static System.Drawing.Image ResizeImage(System.Drawing.Image image, Size size)
{
    int newWidth;
    int newHeight;
    if (true)
    {
        int originalWidth = image.Width;
        int originalHeight = image.Height;
        float percentWidth = (float)size.Width / (float)originalWidth;
        float percentHeight = (float)size.Height / (float)originalHeight;
        float percent = percentHeight < percentWidth ? percentHeight : percentWidth;
        newWidth = (int)(originalWidth * percent);
        newHeight = (int)(originalHeight * percent);
    }
    else
    {
        newWidth = size.Width;
        newHeight = size.Height;
    }
    System.Drawing.Image newImage = new Bitmap(newWidth, newHeight);
    using (Graphics graphicsHandle = Graphics.FromImage(newImage))
    {
        graphicsHandle.InterpolationMode = InterpolationMode.HighQualityBicubic;
        graphicsHandle.DrawImage(image, 0, 0, newWidth, newHeight);
    }

    System.Drawing.Bitmap bitmapimage = new System.Drawing.Bitmap(newImage, size.Width, size.Height);// create bitmap with same size of Actual image
    System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(bitmapimage);

    SolidBrush brush = new SolidBrush(Color.FromArgb(113, 255, 255, 255));
    //Adding watermark text on image
    g.DrawString("My watermark", new Font("Arial", 16, FontStyle.Bold), brush, 5, 100);

    return bitmapimage;
} 
```

我正在检索带有水印的新调整大小的图像并保存为新图像文件。

```
resized6.Save(Server.MapPath(sSavePath + ownerRef + "Pic6v2" + ".jpg")); 
```

这工作正常。但是我无法控制文件大小。当我的原始 JPG 只有 45kb 但我重新调整大小的新图像是 500kb 时。如何减小文件大小。？信息：原始分辨率（400x300 像素）和新图像（500x375 像素）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:23:50.347

我不记得这件事了，但文件大小通常与 JPEG 质量设置有关。您还需要确保将其保存为实际的 jpg，而不是位图，我看不出您正在这样做。

另请参阅：[C# 简单图像调整大小：文件大小未缩小](https://stackoverflow.com/questions/1909523/c-sharp-simple-image-resize-file-size-not-shrinking)

JPEG 质量设置：http: [//msdn.microsoft.com/en-us/library/bb882583.aspx](http://msdn.microsoft.com/en-us/library/bb882583.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:22:41.990

您可以更改 JPEG 的质量以获得更小的文件大小。看

[http://msdn.microsoft.com/en-us/library/bb882583.aspx](http://msdn.microsoft.com/en-us/library/bb882583.aspx)

还

[在 C# 中保存的 JPG 的质量](https://stackoverflow.com/questions/1484759/quality-of-a-saved-jpg-in-c-sharp)

# sql - 摆脱旧记录

> ID：13784858
> 
> 赞同：1
> 
> 时间：2012-12-09T05:14:33.400
> 
> 标签：sql, sql-server-2008

有一个结果集，其中所有记录都是这样的唯一列。如果有另一条属于同一 BusinessID 的记录，我只想显示具有较新日期的记录。我得到这个结果的查询是

```
SELECT 
  FirstName, 
  LastName,
  Department,
  StartDate,
  Title,
  PhoneNumber,
  BusinessEntityID
FROM
  (SELECT
     E.BusinessEntityID,
     H.FirstName,
     H.LastName,
     H.Title,
     H.Department,
     E.PhoneNumber,
     E.CountryRegionName,
     E.PostalCode,
     H.StartDate
   FROM 
     CS120Exam_EmployeeDepartmentHistory H
   JOIN 
     CS120Exam_Employee E
   ON 
     E.BusinessEntityID=H.BusinessEntityID ) x 
   ORDER BY BusinessEntityID 
```

结果是

```
BusinessID  FirstName LastName Department StartDate
----------- --------- -------- ---------- ----------
1           aaa       mate     staff      2002-02-02 <----- DO NOT want this 
1           aaa       mate     admin      2004-03-05
2           john      mate     admin      2001-03-06
3           sun       kent     admin      2004-03-05
4           bbb       clark    staff      2006-02-02 <----- DO NOT want this 
4           bbb       clark    admin      2009-03-05 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:53:54.957

您需要一个子选择来查找每个`BusinessEntityID`. 试试这个（当然未经测试）：

```
SELECT 
  FirstName, 
  LastName,
  Department,
  StartDate,
  Title,
  PhoneNumber,
  BusinessEntityID
FROM
  (SELECT
     E.BusinessEntityID,
     H.FirstName,
     H.LastName,
     H.Title,
     H.Department,
     E.PhoneNumber,
     E.CountryRegionName,
     E.PostalCode,
     H.StartDate
   FROM 
     CS120Exam_EmployeeDepartmentHistory H
   JOIN 
     CS120Exam_Employee E
   ON 
     E.BusinessEntityID=H.BusinessEntityID ) x 
   WHERE x.StartDate = 
     (SELECT 
        Max(cs.StartDate) 
      FROM
        CS120Exam_EmployeeDepartmentHistory cs
      WHERE
        cs.BusinessEntityID = x.BusinessEntityID)
   ORDER BY BusinessEntityID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:37:28.650

您可以使用 GROUP BY 和 max(startdate)

```
SELECT 
  FirstName,
  LastName,
  Department,
  max(StartDate),
  Title,
  PhoneNumber,
  BusinessEntityID
FROM
  (SELECT 
     E.BusinessEntityID,
     H.FirstName,
     H.LastName,
     H.Title,
     H.Department,
     E.PhoneNumber,
     E.CountryRegionName,
     E.PostalCode,
     H.StartDate
  FROM 
    CS120Exam_EmployeeDepartmentHistory H
  JOIN 
    CS120Exam_Employee E
  ON 
   E.BusinessEntityID=H.BusinessEntityID ) x 
  ORDER BY 
    BusinessEntityID
  GROUP BY 
    FirstName,
    LastName,
    Department,
    Title,
    PhoneNumber,
    BusinessEntityID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T05:38:31.257

我正在考虑按其余列分组并获得最大日期。在这种情况下，您将获得一条具有最大日期的记录

```
SELECT FirstName,LastName,Department,max(StartDate),Title,PhoneNumber,BusinessEntityID
FROM
(SELECT E.BusinessEntityID,H.FirstName,H.LastName,H.Title,H.Department,E.PhoneNumber,
E.CountryRegionName,E.PostalCode,H.StartDate
FROM CS120Exam_EmployeeDepartmentHistory H
JOIN CS120Exam_Employee E
ON E.BusinessEntityID=H.BusinessEntityID )x 
group by  FirstName,LastName,Department,Title,PhoneNumber,BusinessEntityID
ORDER BY BusinessEntityID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T07:53:32.747

```
SELECT 
  FirstName, 
  LastName,
  Department,
  StartDate,
  Title,
  PhoneNumber,
  BusinessEntityID
FROM
  (SELECT
     E.BusinessEntityID,
     H.FirstName,
     H.LastName,
     H.Title,
     H.Department,
     E.PhoneNumber,
     E.CountryRegionName,
     E.PostalCode,
     H.StartDate,
     row_number() over (partition by BusinessID order by StartDate desc) as rn
   FROM 
     CS120Exam_EmployeeDepartmentHistory H
   JOIN 
     CS120Exam_Employee E
   ON 
     E.BusinessEntityID=H.BusinessEntityID ) x 
WHERE rn = 1
ORDER BY BusinessEntityID 
```

可能比使用子选择获得最大值更快。startdate，因为只需要对表进行一次扫描。

# python - python uuid（类型 4）中的字符数是多少？

> ID：13784859
> 
> 赞同：11
> 
> 时间：2012-12-09T05:14:35.503
> 
> 标签：python, uuid

我正在构建一个数据库来保存由 python`uuid4`方法生成的 uuid - 但是，文档没有提到 uuid 有多少个字符！

我对 uuid 不太熟悉，所以我不知道是否所有语言都会为 uuid 生成相同的长度。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-09T05:18:50.717

UUID 有一个标准，因此它们在所有语言中都是相同的。但是，有字符串表示和二进制表示。正常的字符串表示 ( `str(myuuid)`) 看起来像`42c151a8-b22b-4cd5-b103-21bdb882e489`并且是 36 个字符。二进制表示`myuuid.bytes`（或`bytes_le`，但在重构 UUID 对象时与其保持一致）为 16 个字节。您还可以获得不带连字符（32 个字符）的字符串表示形式`myuuid.hex`。

您应该知道，某些数据库具有用于存储 UUID 的特定 UUID 类型。你用的是什么类型的数据库？

# flash - 我们如何在 MediaElementJS 的 Flash 后备中禁用全屏功能？

> ID：13784860
> 
> 赞同：2
> 
> 时间：2012-12-09T05:14:40.970
> 
> 标签：flash, fullscreen, mediaelement.js, mediaelement, fallback

请在使用 Flash 后备时帮助修复此错误：

第 1 步：我们点击 Flash 播放器（视频正在通过 Flash 后备播放）。
第 2 步：按键盘上的 TAB 按钮（按钮全屏在 flash 中将有黄色边框）。
第 3 步：按键盘上的 SPACE 按钮（将出现控制器）。

有没有办法禁用 Flash 播放器的全屏功能？

![截屏](../Images/152f38112afeb5261568f0076a9c51b4.png)

# r - 如何在绘图中添加色框？

> ID：13784862
> 
> 赞同：5
> 
> 时间：2012-12-09T05:15:18.640
> 
> 标签：r, plot

由于某些原因，我想在这样的图中添加一个框架：

![在此处输入图像描述](../Images/5451cbb47fd7989a3986c9a427d6b972.png)

我可以这样做`plot`吗？`ggplot`或者`qplot`也欢迎解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T06:22:39.153

```
set.seed(123); 
plot(x=rnorm(100, sd=1000), y=rnorm(100, sd=1000) ,ylab="", xlab="")
rect(xleft=par("usr")[1]*1.25, ybottom=par("usr")[3]*1.4, 
     xright=par("usr")[2]*1.1,ytop=par("usr")[4]*1.2, 
     lwd=5, border="orange", xpd=TRUE) 
```

![在此处输入图像描述](../Images/99b783773bc3553e7a8dbe9278229a77.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T06:18:49.977

```
qplot(x= disp , y = wt , data = mtcars) +
  theme(plot.background = element_rect(colour="#CF8057",size=10)) 
```

![在此处输入图像描述](../Images/f6cfe849c2e3b89caa35523a1ad776c6.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-09T05:59:06.430

您可以绘制一个实心矩形，然后`print(.., vp=..)`在其上绘制您的 ggplot，将其略微缩小。

这是一个不错的小函数中的示例：

```
borderize <- function(plotObj, thick=2, color="orange", alpha=0.8) {
  # thick should be a value between (1, 100)
  # alpha should be a value between (0, 1)

  # these could be modified for separate width/height thicknesses
  wd <- ht <-  (100 - thick) / 100
  x <- (1 - wd)  / 2 
  y <- (1 - ht) / 2

  # create a solid rectangle.  The plot will go over it. 
  grid.rect(y = 1, height = 1, just = c("center", "top"), gp=gpar(fill=color, alpha=alpha, lwd=0))

  # create the viewport
  vp.inner <- viewport(height=unit(ht, "npc"), width=unit(wd, "npc"), just=c("left","bottom"), y=y, x=x)

  print(plotObj, vp=vp.inner)

} 
```

### 例如：

```
myPlot <- ggplot(iris,aes(Sepal.Length,Sepal.Width)) + 
                 geom_point(aes(color=Species,shape=Species))

borderize(myPlot, thick=5, color="#CF8042") 
```

![ggplot2 带边框](../Images/9c4d5d2f79cb21138dff0225fcb80fb1.png)

请注意，您还可以在 ggplot2 中修改`plot.background`和使用 theme()。 但是，这会影响您的标签和图例，具体取决于边框的粗细、字体大小等。这就是我更喜欢使用视口的原因。`panel.background`

例如：

```
plot.bg  <- theme(plot.background=element_rect(color="red", size=12))
panel.bg <- theme(panel.background=element_rect(color="blue", size=12))

plotObj + panel.bg + plot.bg 
```

红色边框是`plot`，蓝色边框是`panel`

![在此处输入图像描述](../Images/17e59d926a0c2ffda4bcadf8ab72c375.png)
**注意边界如何影响标签**

但是，使用的*好处*`plot.background`是您可以将整个图形保存为一个对象；使用上述方法无法做到的事情`borderize`。

# google-maps - 如何使用 Google Maps API 获取郊区的父城市？

> ID：13784863
> 
> 赞同：4
> 
> 时间：2012-12-09T05:15:19.930
> 
> 标签：google-maps, google-maps-api-3

我正在使用 Google Places 自动完成 API。如果我搜索一个特定的郊区，比如说澳大利亚维多利亚的里士满，我会返回以下地址组件：

```
0:Object
    long_name: "Richmond"
    short_name: "Richmond"
    types: Array[2]
        0: "locality"
        1: "political"

1: Object
    long_name: "Victoria"
    short_name: "VIC"
    types: Array[2]
        0: "administrative_area_level_1"
        1: "political"

2: Object
    long_name: "Australia"
    short_name: "AU"
    types: Array[2]
        0: "country"
        1: "political" 
```

这很好，但是里士满是墨尔本的郊区，为了我的应用程序的目的，我需要知道这一点。如果地区在一个范围内，我怎样才能让 API 返回父城市？如果您查看以下 URL，您可以看到它将里士满放置在澳大利亚维多利亚州的墨尔本，所以我假设有可能以某种方式通过 API 获取此信息？

[https://maps.google.com/maps/place?q=Richmond&ftid=0x6ad64259018db945:0x5045675218ce810](https://maps.google.com/maps/place?q=Richmond&ftid=0x6ad64259018db945:0x5045675218ce810)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T20:15:28.873

唉，地理编码 API 返回中不包含城市和/或地区信息。

作为基于位置的搜索的粗略解决方案，我对城市和地区进行公里半径：

```
Worldwide   No filter
Country     Available from geocode
State       Available from geocode
Region      50 KM Radius from latlong
City        20 KM Radius from latlong 
Postcode    Available from geocode
Suburb      Available from geocode (Locality)
Radius      User defined radius from latlong 
```

我确实尝试使用“边界”值，但没有真正成功（[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)）。

如果您需要比这更准确，那么您正在制作一个相当大的参考数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T16:50:28.390

使用返回的 Latlng 反向地理编码：[https ://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

# html - 内部 div 浮动 outisde 父级

> ID：13784864
> 
> 赞同：0
> 
> 时间：2012-12-09T05:15:22.167
> 
> 标签：html, css

我在[这个网站上](http://mockingbirdagency.com/thebox/tvshow.html)工作。

出于某种原因，在右侧的最后一个块中，我的按钮漂浮在 div 之外（尽管它没有高度）。谁能帮我弄清楚为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:20:50.737

这个选择器`#see-more-button-container-lists`有一个负数`margin-bottom`。尝试使用`margin-bottom:15px`. 也是如此`#see-more-button-container-lists:hover`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:24:22.717

将 css for `see-more-button-container-lists`from更改`margin-bottom: -15px`为`margin-bottom: 15px`。

# data-structures - 使用什么数据结构来实现动态内存分配堆？

> ID：13784870
> 
> 赞同：29
> 
> 时间：2012-12-09T05:16:15.597
> 
> 标签：data-structures, memory-management, heap-memory

我一直认为[堆（数据结构）](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)用于实现[堆（动态内存分配）](http://en.wikipedia.org/wiki/Dynamic_memory_allocation#Dynamic_memory_allocation)，但有人告诉我我错了。

通常，堆（例如，由典型`malloc`例程或 Windows`HeapCreate`等实现的堆）是如何实现的？他们使用什么数据结构？

### 我*不是*在问什么：

在网上搜索时，我看到了***大量***关于如何实现*具有严格限制*的堆的描述。
仅举几例，我已经看到了很多关于如何实现的描述：

*   永远不会将内存释放回操作系统的堆（！）
*   仅在类似大小的小块上提供合理性能的堆
*   只为大的、连续的块提供合理性能的堆
*   等等

有趣的是，它们都避免了更难的问题：
“正常”的通用堆（如 , 后面的堆`malloc`）是`HeapCreate`如何实现的？

他们使用什么数据结构（也许还有算法）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-09T05:34:14.767

分配器往往非常复杂，并且在实现方式上往往存在显着差异。

你不能用一种常见的数据结构或算法来描述它们，但有一些共同的主题：

1.  内存是以大块的形式从系统中获取的——通常一次是兆字节。
2.  然后，当您执行分配时，这些块会被分成各种更小的块。与您分配的大小不完全相同，但通常在特定范围内（200-250 字节、251-500 字节等）。有时这是多层的，在你的实际请求之前，你会有一个额外的“中等块”层。
3.  控制从哪个“大块”中分离一块是一件非常困难且重要的事情——这会极大地影响内存碎片。
4.  为每个这些范围维护一个或多个空闲池（又名“空闲列表”、“内存池”、“后备列表”）。有时甚至是线程本地池。这可以大大加快分配/释放许多类似大小的对象的模式。
5.  大分配的处理方式略有不同，以免浪费大量 RAM，也不会被大量池化。

如果您想查看一些源代码，[jemalloc](http://www.canonware.com/jemalloc/)是一种现代高性能分配器，应该在其他常见分配器的复杂性方面具有代表性。[TCMalloc](http://goog-perftools.sourceforge.net/doc/tcmalloc.html)是另一种常见的通用分配器，他们的网站详细介绍了所有血腥的实现细节。英特尔的[线程构建块](http://threadingbuildingblocks.org/)有一个专门为高并发构建的分配器。

在 Windows 和 *nix 之间可以看到一个有趣的区别。在 *nix 中，分配器对应用程序使用的地址空间具有非常低级的控制。在 Windows 中，您基本上有一个粗略的、缓慢的分配器`VirtualAlloc`来作为您自己的分配器的基础。

这导致与 *nix 兼容的分配器通常直接为您提供`malloc`/`free`实现，其中假设您只对所有内容使用一个分配器（否则它们会互相践踏），而特定于 Windows 的分配器提供额外的功能，留下`malloc`/`free`单独, 并且可以和谐地使用（例如，您可以使用 HeapCreate 来创建可以与其他人一起工作的私有堆）。

在实践中，这种灵活性的交易使 *nix 分配器在性能方面略有提升。`malloc`在 Windows 上看到应用程序故意使用多个堆是非常罕见的——这主要是由于不同的 DLL 使用不同的运行时而导致的`free`意外一些记忆来自。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-09T05:29:18.960

注意：以下答案假设您使用的是具有虚拟内存的典型现代系统。C 和 C++ 标准不需要虚拟内存；因此，您当然不能在没有此功能的硬件上依赖此类假设（例如，GPU 通常没有此功能；像 PIC 这样的极小的硬件也没有）。

* * *

这取决于您使用的平台。堆可以是非常复杂的野兽；他们不只使用单一的数据结构；并且没有“标准”数据结构。即使堆代码所在的位置也因平台而异。例如，堆代码通常由 C Runtime on Unix 机器提供；但通常由 Windows 上的操作系统提供。

1.  是的，这在 Unix 机器上很常见；由于 *nix 的底层 API 和内存模型的运行方式。基本上，在这些系统上将内存返回给操作系统的标准 API 只允许在分配用户内存的位置与用户内存和系统设施（如堆栈）之间的“洞”之间的“边界”上返回内存。（有问题的 API 是[`brk`或`sbrk`](http://en.wikipedia.org/wiki/Sbrk)）。许多堆并没有将内存返回给操作系统，而是仅尝试重用程序不再使用的内存，而不尝试将内存返回给系统。这在 Windows 上不太常见，因为它等同于`sbrk`( `VirtualAlloc`) 没有这个限制。（但像`sbrk`，它非常昂贵并且有一些警告，比如只分配页面大小和页面对齐的块。所以堆尝试尽可能少地调用）
2.  这听起来像是一个“块分配器”，它将内存分成固定大小的块，然后只返回一个空闲块。据我（尽管有限）理解，Windows`RtlHeap`为不同的已知块大小维护了许多这样的数据结构。（例如，它将有一个用于大小为 16 的块） RtlHeap 将这些称为“后备列表”。
3.  我真的不知道可以很好地处理这种情况的特定结构。对于大多数分配系统来说，大块是有问题的，因为它们会导致地址空间碎片化。

我发现讨论主要平台上采用的常见分配策略的最佳参考是[Robert Seacord所著的](https://rads.stackoverflow.com/amzn/click/com/0321335724)[*Secure Coding in C and C++*](https://rads.stackoverflow.com/amzn/click/com/0321335724)一书。第 4 章的全部内容都专门讨论堆数据结构（以及用户错误地使用所述堆系统引起的问题）。

# visual-studio-2010 - 如何合并 VDPROJ 文件？

> ID：13784876
> 
> 赞同：1
> 
> 时间：2012-12-09T05:18:09.813
> 
> 标签：visual-studio-2010, windows-installer

我们在团队工作中使用 SVN。在解决方案中有一个用于构建 MSI 文件的项目，名为 Setup。该项目确实是一个 vdproj 文件。我更改了 Setup.vdproj，发现其他人也更改了它并在我之前提交了更改。所以我必须更新，但 SVN 本身无法通过更新正确合并它们（我认为是这样，失败会发生，不是吗？）当它以文本模式显示时，我自己无法合并它。那里有很多数字（GUID）。所以我需要一种可视化的方式来将我的更改与其他人合并。我怎样才能做到这一点？你有什么想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-12T18:28:17.123

我至少会使用以下属性：

```
svn:eol-style=native
svn:mime-type="application/json; charset=utf-8" 
```

您可能还需要锁定：

```
svn:needs-lock="*" 
```

# c# - 从 httpwebrequest 切换到 httpclient，我不知道如何发送我的标头？

> ID：13784877
> 
> 赞同：4
> 
> 时间：2012-12-09T05:18:19.387
> 
> 标签：c#, .net, windows-runtime, httpclient

所以，这是我使用的代码

```
 string URL = "http://www.test.com/posts/.json";
    var getInfo = (HttpWebRequest)HttpWebRequest.Create(URL);{
    getInfo.Headers["Cookie"] = CookieHeader;
    getInfo.ContentType = "application/x-www-form-urlencoded";
    using (WebResponse postStream = await getInfo.GetResponseAsync())
    {
        StreamReader reader = new StreamReader(postStream.GetResponseStream());
        string str = reader.ReadToEnd();
    } 
```

我想切换到我已经开始工作的httpclient，除了它不传递Cookie信息。我得到了信息，但只是匿名信息。不是我发送的用户信息。这是我目前拥有的。

```
 HttpClient client = new HttpClient();
    client.DefaultRequestHeaders.Accept.Add(
    new MediaTypeWithQualityHeaderValue("application/json"));
    client.BaseAddress = new Uri("http://www.test.com/");
    client.DefaultRequestHeaders.Add("Cookie", CookieHeader);
    HttpResponseMessage response = await client.GetAsync("http://www.test.com" + URL);
    string str;
    str = await response.Content.ReadAsStringAsync(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T07:16:53.063

您需要使用`HttpClientHandler`，将您的 cookie 添加到其中，然后将其传递给`HttpClient`的构造函数。

一个例子：

```
 Uri baseUri = new Uri("http://www.test.com/");
    HttpClientHandler clientHandler = new HttpClientHandler();
    clientHandler.CookieContainer.Add(baseUri, new Cookie("name", "value"));
    HttpClient client = new HttpClient(clientHandler);
    client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
    client.BaseAddress = baseUri;
    HttpResponseMessage response = await client.GetAsync("http://www.test.com" + URL);
    string str2 = await response.Content.ReadAsStringAsync(); 
```

[我在这里](http://aspnet.codeplex.com/workitem/10317)找到了对相同行为的引用，指出名为“Cookie”的标头`DefaultRequestHeaders`被忽略且未发送，但似乎任何其他值都会按预期工作。

# javascript - 相对改变div的位置

> ID：13784880
> 
> 赞同：0
> 
> 时间：2012-12-09T05:19:12.413
> 
> 标签：javascript, jquery, html, css

我的页面中有 16 个 div，每个 div 在右上角都有一个十字按钮，单击十字按钮应该隐藏 div，并且应该重新定位隐藏 div 旁边的 div，例如假设我们有 5 个 div

1 2 3 4 5

假设 3 被交叉，序列应该是这样的

1 2 4 5。

div 中还有一个按钮，类似于按钮，单击该按钮，该 div 应位于位置 1，例如我们有 10 个 div，例如：

1 2 3 4 5 6 7 8 9 0

说 8 喜欢然后布局应该是这样的：

8 1 2 3 4 5 6 7 9 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:31:51.033

你需要浮动你的div。当一个被隐藏时，其余的将自动移动。

至于重新定位，您需要使用 jQuery 移动它们。

[试试这个小提琴](http://jsfiddle.net/NaMsP/1/)

HTML

```
<div id="container">
    <div class="box">1<br/><a class="like" href="#">Like me</a></div>
    <div class="box">2<br/><a class="like" href="#">Like me</a></div>
    <div class="box">3<br/><a class="like" href="#">Like me</a></div>
    <div class="box">4<br/><a class="like" href="#">Like me</a></div>
    <div class="box">5<br/><a class="like" href="#">Like me</a></div>
</div> 
```

CSS

```
div.box { 
    display: block; 
    width: 90px; 
    height: 50px; 
    float: left; 
    margin: 5px; 
    border: 1px solid #000; 
    text-align: center;
} 
```

Javascript

```
$('a.like').on('click', function () {
    $('#container').prepend($(this).parent());
    return false;
})

$('div.box').on('click', function() {
   $(this).hide();
}) 
```

# sql-server-2008 - sql server management studio 中未显示“编辑前 200 行”

> ID：13784883
> 
> 赞同：5
> 
> 时间：2012-12-09T05:19:34.380
> 
> 标签：sql-server-2008

我已经成功安装了**SQL Server Management Studio 2008**。但是当我右键单击表格时，我找不到“**编辑前 200 行”选项。**

有人知道我在哪里可以找到我要找的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-04T21:16:36.000

我对你的问题的理解不同，因为我有同样的问题。对我来说，问题是我的 Azure 数据库没有**编辑和查看顶行**，但是当我连接到我的 Winhost 时，它们就在那里。我认为它在数据库方面，而不是您的客户。我很惊讶 Azure 不支持它，但我认为一定是这样。我敢打赌，您要连接的数据库是相似的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T07:54:46.303

“编辑行”是 N 行的命令。你可以在这里编辑它。工具=> 选项： ![在此处输入图像描述](../Images/826298dc093e01021ef0620ed75c2cb3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T00:03:55.860

为了在 Azure 上启用您习惯用于标准 SQL Server 的大部分功能，您需要安装 SSMS 2104 的最新修补程序：

[SQL Server 2014 的累积更新包 5](https://support.microsoft.com/en-us/kb/3011055)

这将为您提供选择前 1000 行、编辑前 200 行、列编辑器等。

# iphone - ASIFormDataRequest POST 错误 - iOS 6

> ID：13784888
> 
> 赞同：0
> 
> 时间：2012-12-09T05:20:21.063
> 
> 标签：iphone, ios, xcode, asihttprequest

我有以下代码链接到一个 PHP 文件，目的是发布一些字符串并在 PHP 文件中检索，所有的东西都工作正常，但我的代码有问题，见下文：

**iOS 应用程序代码**

```
 NSString *urlString = @"http://www.myurl.com/path/ios.st.addquestion.php?";
    NSURL *uploadURL = [NSURL URLWithString:urlString];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:uploadURL];

    [request setPostValue:askerUsername forKey:@"username"];
    [request setPostValue:@"1" forKey:@"questiontype"];
    [request setPostValue:title forKey:@"title"];
    [request setPostValue:hasAditional forKey:@"hasaditional"];
    [request setPostValue:aditional forKey:@"aditional"];
    [request setPostValue:hasLocation forKey:@"haslocation"];
    [request setPostValue:location forKey:@"location"];
    [request setPostValue:latitude forKey:@"latitude"];
    [request setPostValue:longitude forKey:@"longitude"];
    [request setPostValue:category forKey:@"category"];
    [request setPostValue:hasImage forKey:@"hasimage"];
    [request startAsynchronous]; 
```

**PHP 文件**

```
 $questiontype = mysql_real_escape_string($_GET['questiontype']);

    $username_PRO = mysql_real_escape_string($_GET['username']);

    $title_PRO = mysql_real_escape_string($_GET['title']);
    $hasAditional = mysql_real_escape_string($_GET['hasaditional']);
    $aditional_PRO = mysql_real_escape_string($_GET['aditional']);

    $hasLocation = mysql_real_escape_string($_GET['haslocation']);
    $location_PRO = mysql_real_escape_string($_GET['location']);
    $latitude_PRO = mysql_real_escape_string($_GET['latitude']);
    $longitude_PRO = mysql_real_escape_string($_GET['longitude']);

    $category = mysql_real_escape_string($_GET['category']);

    echo "$username_PRO"; 
```

当我运行应用程序并将字符串 POST 到 PHP 文件时，什么都没有发生，就像 PHP 收到一个空值一样，我无法弄清楚我的代码有什么问题，有人知道吗？过程是这样的：

Application => ASIFormDataRequest(Post values) => **PHP 文件接收请求并在 MYSQL 数据库中插入字符串（问题在这里）。**

我已经在网上和 ASI 网站上搜索过，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T08:16:11.177

我认为代码是正确的，但是，您发布到 PHP 并在 php 中使用 $_GET 可能是问题所在。

尝试使用 $_POST 来获取 POST 值，或者您可以转储 $_REQUEST 以查看您发送到 php 的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T08:17:37.510

您正在使用`setPostValue`to a `PHP-script`which 正在寻找`GET`变量。将您的所有变量更改`PHPcode`为`$username_PRO = mysql_real_escape_string($_POST['username'])`，或将值作为`GET`值发送`http://url?name=value&name2=value2`...

# mysql - MySQL SUM 表中的所有值然后回显

> ID：13784891
> 
> 赞同：0
> 
> 时间：2012-12-09T05:20:44.023
> 
> 标签：mysql

```
Table - Messages
+--------------------------------------------------------------------------------------------+
| msg_id | message | uid_fk | ip | created | uploads|
|  554  Blah....    35     ..  1355000068   0   |
|  555  Blah....    34     ..  1355002587   0   |
|  553  Blah....    34     ..  1354990968   0   |
+--------------------------------------------------------------------------------------------+ 
```

我想要做的是获取 uid_fk 并将其全部总结，然后能够使用 php 回显它。uid_fk 是另一个名为 users 的表中的用户 uid 以及一些其他数据。我完全不确定如何通过获取他们的特定 ID 来将两者相加。

我从这个开始，但我对 MySQL 数据库很陌生。

```
 public function Total_Posts($uid){
        $query          = mysql_query("SELECT uid_fk, sum(count) as sum from messages group by uid_fk");
        $num            = mysql_fetch_array($query);
        $return $num;
} 
```

* * *

```
UPDATE: Working Version

    public function Total_Posts($uid){
        $messages       = mysql_query("SELECT * FROM messages WHERE uid_fk='$uid'");
        $numrows        = mysql_num_rows($messages);
        return $numrows;
    }

    <?php 
        $Total_Posts        = $Wall->Total_Posts($uid,$total);
    ?>

    <?php echo $Total_Posts; ?>

Seems to work great, thank you for all the help. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:26:16.837

获取您需要的所有元素：

```
$messages = mysql_query("SELECT * FROM Messages WHERE uid_fk='$uid'"); 
```

然后总结：

```
$sum=0;
while ($message = mysql_fetch_array($messages)){
    $sum += $message['uid_fk'];
} 
```

# java - Dropbox 文件下载/上传

> ID：13784895
> 
> 赞同：0
> 
> 时间：2012-12-09T05:20:58.423
> 
> 标签：java, android, dropbox

我在将 Dropbox 连接到我的应用时遇到了一些问题。我打印了异常堆栈，它表明错误是由 dropboxunlinkedexception 引起的。我不确定我的代码有什么问题。如果有人可以看一下并帮助我找出 Dropbox 的 API，那就太好了。

完整代码： http: [//pastebin.com/2ZAZgwEC](http://pastebin.com/2ZAZgwEC)

Dropbox相关代码： http: [//pastebin.com/T2C1AiLz](http://pastebin.com/T2C1AiLz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:36:29.763

[https://www.dropbox.com/developers/start/setup#android](https://www.dropbox.com/developers/start/setup#android)

我认为文档非常清楚如何将 Dropbox 集成到您的应用程序中。

您的清单文件是否包含

```
<activity
  android:name="com.dropbox.client2.android.AuthActivity"
  android:launchMode="singleTask"
  android:configChanges="orientation|keyboard">
  <intent-filter>
    <!-- Change this to be db- followed by your app key -->
    <data android:scheme="db-INSERT-APP-KEY-HERE" />
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.BROWSABLE"/>
    <category android:name="android.intent.category.DEFAULT" />
  </intent-filter>
</activity> 
```

还有互联网许可？

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

当您尝试在未成功登录的情况下下载或上传文件时，会发生 dropboxunlinkedexception。在此处检查身份验证部分[https://www.dropbox.com/developers/start/authentication#android](https://www.dropbox.com/developers/start/authentication#android)这应该可以解决您的问题

# c# - 一个会话的多个服务

> ID：13784899
> 
> 赞同：0
> 
> 时间：2012-12-09T05:21:29.050
> 
> 标签：c#, wcf, soa

我是 WCF 的新手，我有以下问题：

1）我想创建一个大的 WCF 服务，而不是几个小的 WCF 服务。这就像外观设计模式的实现。

为什么？我需要为客户端进行会话，我需要存储有关客户端的敏感信息（访问令牌、用户名、API 密钥）并对其进行验证。通过这种方式，我只需创建私有字段：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
public class ApplicationService : IApplicationService
{
     private string _accessToken;
     private string _userName;

     public OrderResponse GetOrder(OrderRequest request)
     {
          var response = new OrderResponse();
          var result = Validate(request, response);
          ... other code
     }

     public CustomerResponse GetCustomer(CustomerRequest request)
     {
          var response = new CustomerResponse();
          var result = Validate(request, response);
          ... other code
     }

     public LoginResponse Login(LoginRequest request)
    {
          var response = new LoginResponse();
          var result = Validate(request, response);
          ... other code
     }

     public LogoutResponse Logout(LogoutRequest request)
     {
          var response = new LogoutResponse();
          var result = Validate(request, response);
          ... other code
     }

     public bool Validate(BaseRequest request, BaseResponse response)
     {
          if(request.Token != _accessToken)
               return false;

          ... validate other fields

          return true   
     }

     // many other methods

} 
```

2）如果我创建一个包含所有其他 WCF 服务的大服务。此外，它就像外观设计模式的实现。：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
    public class ApplicationService : IApplicationService
    {
         private string _accessToken;
         private string _userName;
         private LoginService _loginService;
         private CustomerService _customerService;
         private OrderService _orderService;

         public ApplicationService()
         {
              _loginService = new LoginService();
              _orderService = new OrderService();
              _customerService = new CustomerService();
         }

         public OrderResponse GetOrder(OrderRequest request)
         {
              var response = new OrderResponse();
              var result = Validate(request, response);
              if(!result) return Something;
              return _orderService.GetOrder(request);
         }

         public CustomerResponse GetCustomer(CustomerRequest request)
         {
              var response = new CustomerResponse();
              var result = Validate(request, response);
              if(!result) return Something;
              return _customerService.GetCustomer(request);
         }

         public LoginResponse Login(LoginRequest request)
         {
              var response = new LoginResponse();
              var result = Validate(request, response);
              if(!result) return Something;
              return _loginService.Login(request);
         }

         public LogoutResponse Logout(LogoutRequest request)
         {
              var response = new LogoutResponse();
              var result = Validate(request, response);
              if(!result) return Something;
              return _LoginService.Logout(request);
         }

         // many other methods
    } 
```

你怎么看这件事？

3）还有一个问题：验证失败时我必须返回什么？抛出`FaultException`或者我可以在响应对象中返回错误消息吗？什么是好的做法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:05:06.670

*对于 1 和 2：* 创建 Facade 并不是一件坏事，但创建 Facade 的目标很重要。如果您想要实现的只是在每个请求中传递 accessToken 等，那么也许您可以在 SOAP 标头中传递它们。如果您有 .net 客户端，则利用行为扩展在每个 WCF 服务请求中传递我们的自定义参数。见[博文](http://www.adilmughal.com/2011/10/client-additional-parameters-using.html)。

此外，一旦客户端从 GetToken 获得 accessToken，然后让客户端存储它并在每个服务调用中传递它，而不是在服务器上与客户端创建会话。这也将帮助您扩展服务，并在会话丢失的情况下使服务可用。

通过这种方式，您可以验证客户端 accessToken 并从您的业务逻辑中抽象出客户端验证逻辑。

*对于 3：* 当您验证客户端参数时，最好抛出 FaultException，因为它会在后台生成 SOAPFault

# objective-c - CGRect 像素？

> ID：13784902
> 
> 赞同：3
> 
> 时间：2012-12-09T05:22:21.173
> 
> 标签：objective-c, ios, size, pixels, cgrect

几乎我想正确地将我的应用程序中按钮的大小转换为其宽度和高度的像素数量。

因此，假设它的宽度为 50，高度为 100，在视网膜显示设备上，我希望它返回 100 的宽度和 200 的高度。在非视网膜设备上，它应该返回 50 的宽度和身高100。

它应该在 iPad 上以同样的方式工作。无论如何，我该怎么做？我会使用 UIScreen 的 mainScreen 比例，还是有其他方法？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T05:34:22.053

您放在屏幕上的所有内容都以点而不是像素为单位。非视网膜 iPhone 为 320x480 点。Retina-iPhone (3.5") 是 320x480 点。

在所有设备上都是如此。不愁像素，愁点。

*   320x480（3.5 英寸 iPhone/iPod touch）
*   320x568（4" iPhone/iPod touch）
*   768x1024（iPad - 全部）

您的按钮将在所有设备上测量为 100x50。

更新：

处理图像时，您需要创建两组图像。

*   image.png 将是 100x50 的“正常”大小
*   image@2x.png 将是 200x100 的“视网膜”尺寸

通过提供这两个图像，操作系统可以获取正确的图像。您的代码仍然以点为单位衡量所有内容。因此 200x100 的视网膜图像将在视网膜设备上显示为 100x50 点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:33:26.063

尽管我同意前面的回答，因为您通常应该发布两组资产而不是在运行时调整一组资产，但您仍然可以这样做。

将 UIImage 缩放到正确的屏幕比例确实意味着使用 UIScreen 的 scale 属性。但是，在将来的兴趣中，不使用 可能更有意义`[UIScreen mainScreen]`，而是确定图像将在其中显示的视图并从那里获取屏幕。

总而言之，不搞乱创建单独的图像并让操作系统处理自己的缩放可能更有意义。如果您知道资产是 @2x，您可以使用它`+ (UIImage *)imageWithData:(NSData *)data scale:(CGFloat)scale`来创建对象并在其中定义比例，这样系统将知道比例并正确处理调整大小，即使显示在 @1x 屏幕上也是如此。

# hadoop - 为什么 reducer 在 hadoop map/reduce 中有不同的 Input/Output 键和值？

> ID：13784904
> 
> 赞同：2
> 
> 时间：2012-12-09T05:22:35.900
> 
> 标签：hadoop, mapreduce

由于 Map/Reduce 应用程序的性质，`reduce`函数可能会被多次调用，因此 Input/Output 键值必须与 MongoDB 的 Map/Reduce 实现相同。我想知道为什么在 Hadoop 实现中它是不同的？（我最好说它允许不同）

```
org.apache.hadoop.mapreduce.Reducer<KEYIN,VALUEIN,KEYOUT,VALUEOUT> 
```

第二个问题：hadoop如何知道reduce函数的输出应该在下次运行时再次返回reduce还是写入HDFS？例如：

```
public class MyReducer extends Reducer<Text, IntWritable, Text, IntWritable>
    public void reduce(Text key, Iterable<IntWritable> values, Context context) {
        context.write(key, value) /* this key/value will be returned to reduce in next run or will be written to HDFS? */
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T07:38:20.623

考虑输入是文档名称（作为键）和文档行（值）的示例，结果是行长度的 STDDEV（标准偏差）。
概括 - 聚合类型不必匹配输入数据的类型。所以Hadoop把自由留给了开发者。
对于您的第二个问题 - Hadoop 没有类似于 MongoDB 增量 MapReduce 的机制，因此 reducer 的结果始终保存到 HDFS（或其他 DFS）并且永远不会返回到 reduce。

# java - java计算等级的程序

> ID：13784906
> 
> 赞同：0
> 
> 时间：2012-12-09T05:23:12.950
> 
> 标签：java, arrays, exception, exception-handling, joptionpane

我应该编写一个程序，根据要输入的科目数量计算学生的平均成绩。

这是我的代码，但它不会在进入 subject1 的成绩部分执行：

```
import javax.swing.*;

public class Arrays {
  static  int ctr = 0;
  public static void main(String[] args) {
    String inputStr = "";
    double num2process = 0.0;
    double sum = 0.0, ave = 0.0;
    double[] grade = new double[(int) num2process];

    while (true) {
      try {
        inputStr = JOptionPane.showInputDialog(
            "Enter number of subjects to enter: ");
        num2process = Double.parseDouble(inputStr);

        while (ctr < num2process) {
          grade[ctr] = getNumber();
          sum += grade[ctr];
          ctr++; 
        }
      } catch (NumberFormatException err) {
        JOptionPane.showMessageDialog(
            null,
            "There is an error on entry",
            "Error Message", JOptionPane.WARNING_MESSAGE);
        continue;
      }
      break;    
    }

    // Accumulate the output.
    String output = "";
    int ctr2 = 0;

    output = "";

    while (ctr2 > num2process) {
      output += ("Grade on subject " + (ctr2+1)
                + " is " + grade[ctr]);
      ctr2++;
    }
    ave = sum / num2process;
    output += "\nAverage is " + ave;

    // Display the output.
    JOptionPane.showMessageDialog(
        null,
        output,
        "The result is",
        JOptionPane.INFORMATION_MESSAGE);
  }

  public static int getNumber() throws NumberFormatException {
    String inputStr = "";
    int num = 0;

    try {
      inputStr = JOptionPane.showInputDialog(
          "Enter grade on subject " + (ctr+1));
      num = Integer.parseInt(inputStr);
      return num;
    } catch (NumberFormatException errorAgain) {
      throw errorAgain;
    }
  }
} 
```

请帮我解决错误谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:51:21.817

您的代码正在抛出`ArrayIndexOutOfBoundException`，因为您正在初始化

`double[] grade = new double[(int) num2process];`

在你得到之前`num2process`，所以你已经初始化`double num2process=0.0` 了，所以它正在

`double[] grade = new double[0.0];`

因此，您需要将其更改如下（`grade`服用后初始化`num2process`）

```
 String inputStr = "";
            double num2process = 0.0;
            double sum = 0.0, ave = 0.0;

            double[] grade ;          //Just Make an Instance of it

            while(true)
            {
                try
                {
                    inputStr = JOptionPane.showInputDialog("Enter number of subjects to enter: ");
                    num2process = Double.parseDouble(inputStr);
                    grade = new double[(int) num2process];     //Initialize it Here
                    while(ctr<num2process)
                    {
                        grade[ctr]= getNumber();
                        sum += grade[ctr];
                        ctr++; 
                    }

                }
                catch(Exception e){
                    //Your Exception Handling
                }
            } 
```

**编辑：**正如您评论的：

**它应该显示科目 1 到科目 3 的成绩。平均值很好，但我怎样才能将它减少到小数点后两位**

这是为您准备的整个程序：

```
import java.text.DecimalFormat;

import javax.swing.*;

public class ArrayWithException 
{
        static  int ctr = 0;
        public static void main(String[] args)
        {
            String inputStr = "";
            double num2process = 0.0;
            double sum = 0.0, ave = 0.0;
            double[] grade ;

            while(true)
            {
                try
                {
                    inputStr = JOptionPane.showInputDialog("Enter number of subjects to enter: ");
                    num2process = Double.parseDouble(inputStr);
                    grade = new double[(int) num2process];
                    marks = new double[(int) num2process];
                    while(ctr<num2process)
                    {
                        grade[ctr] = getNumber();
                        sum += grade[ctr];
                        ctr++; 
                    }

                }
                catch (NumberFormatException err)
                {
                    JOptionPane.showMessageDialog(null, "There is an error on entry",
                        "Error Message", JOptionPane.WARNING_MESSAGE);
                    continue;
                }
                break;      

            }

            //accumulate the output
            String output="";
            int ctr2 = 0;

            output = "";

            while(ctr2 > num2process)
            {
                output +=("Grade on subject " +(ctr2+1) + " is "
                                + grade[ctr]);
                ctr2++;

            }

            ave = sum / num2process;
            DecimalFormat df=new DecimalFormat("##.##");   //Here it defines the pattern to follow
            ave=Double.parseDouble(df.format(ave));        //ave is formatted like df
            output +="\nAverage is " + ave;
            for(int i=0;i<grade.length;i++){ 
                output+="\nGrade for Subject "+(i+1)+" is: "+grade[i];
            }

            // display the output

            JOptionPane.showMessageDialog(null,output, "The result is",
                        JOptionPane.INFORMATION_MESSAGE);

        }

        public static int getNumber() throws NumberFormatException
        {
            String inputStr="";
            int num = 0;

            try
            {
                inputStr = JOptionPane.showInputDialog("Enter grade on subject " + (ctr+1));
                num = Integer.parseInt(inputStr);

                return num;

            }
            catch (NumberFormatException errorAgain)
            {
                throw errorAgain;
            }
        }
} 
```

# java - 无限 for 循环是否会导致 OutOfMemoryException？

> ID：13784910
> 
> 赞同：0
> 
> 时间：2012-12-09T05:23:56.837
> 
> 标签：java, out-of-memory

```
public class Test {
    static Vector<String> v;
    public static void main(String args[]){
        for(;;){
            v = new Vector<String>();
            v = null;
        }
    }   
} 
```

谁能告诉我，这段代码会在某个时候抛出 StackOverflow 异常还是不会？我尝试使用 min JVM memory 运行此代码 2 小时，我的程序仍在运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:26:38.803

当不再有任何对内存的引用时，Java 可以自由地对其进行垃圾收集并将其返回到可用堆中。

您可能会或可能不会看到内存不足异常，具体取决于您开始使用的内存量以及垃圾收集运行的频率。

但是您*永远不会*看到堆栈溢出异常，因为您没有从堆栈中分配内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T05:35:35.393

在您的代码中，向量是在循环中创建的，因此它是一个局部变量，您无权访问先前创建的对象。

所以垃圾收集器清理它。它不会给你内存警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T05:27:11.517

它不需要抛出 OutOfMemory，因为垃圾收集器将释放创建的向量。

您需要保留参考资料。

试试下面的代码

```
import java.util.ArrayList;
import java.util.List;
import java.util.Vector;

public class Test {
  static Vector<String> v;
  static List<Vector> list= new ArrayList<Vector>();
  public static void main(String args[]){
    for(;;){
       v = new Vector<String>();
       list.add(v);
     }
   } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T05:31:14.353

您的代码中发生的情况是，每次在内存中创建一个新对象时，它的引用都被设置为 v。

但是一旦循环进入下一次迭代，就会创建一个新对象，并且 v 现在指向该新对象。

不再引用旧对象，因此它将被垃圾收集。因此，随着您的迭代进行，会创建对象并收集垃圾，因此您永远不会耗尽内存或导致堆栈溢出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T05:33:14.873

您的代码不会引发任何异常。甚至`OutOfMemoryError`因为这段代码：

```
for(;;){
    v = new Vector<String>();
    v = null;
} 
```

创建的对象`v = new Vector<String>();`可以在行后由垃圾收集器回收`v = null;`所以你的代码将继续......永远！

如果您需要 StackOverflowError，请进行递归调用而不返回某个时间点。像这样的东西：

```
public class Test {

    public static void main(String args[]){
        Test.main(args);
    }   
} 
```

要抛出一个`OutOfMemoryError`只是这样做：

```
public class Test {

    public static void main(String args[]) {

        Vector<Integer> v = new Vector<Integer>();

        for(;;)
            v.add(new Integer(10));

    }
} 
```

该代码将无限添加一个整数到向量，为这样的整数和向量内的条目分配空间。内存很快就会被耗尽。

您甚至可以更改`v.add(new Integer(10));`for，`v.add(10);`因为向向量添加条目也会消耗内存。

# perl - 使用 WWW::Mechanize 模块在 Perl 中填写表单

> ID：13784915
> 
> 赞同：4
> 
> 时间：2012-12-09T05:25:02.843
> 
> 标签：perl, mechanize, www-mechanize

我正在创建一个脚本，该脚本使用 mechanize 模块在 Perl 中登录 Web 表单，但出现错误：

> /home/arty/scripts/gmail_pw_chngr.pl 第 18 行，“按钮”附近的语法错误 /home/arty/scripts/gmail_pw_chngr.pl 的执行由于编译错误而中止。

### 代码

```
 use WWW::Mechanize;
    my $mech = WWW::Mechanize->new();

    my $url = "https://accounts.google.com/Login";

    $mech->get($url);

    $result = $mech->submit_form(
        form_name => 'gaia_loginform', # Name of the form
        #Instead of form name you can specify
        #form_number => 1
        fields       =>
        {
            Email  => 'arty32l@gmail.com', # Name of the input field and value
            Passwd => 'password',
        }
        button    => 'signIn' # Name of the submit button
    );
    print $result->content(); 
```

上面是代码，输入中的所有值都是名称，但它总是在同一行出错。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T05:27:04.840

有问题的错误是缺少逗号 before `button`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T13:39:44.373

使用`use strict;`和`use warnings;`。他们会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T14:10:00.017

```
use CGI qw(:standard);
use CGI::Carp qw(warningsToBrowser fatalsToBrowser);

use WWW::Mechanize;
    my $mech = WWW::Mechanize->new();

    my $url = "https://accounts.google.com/Login";

    $mech->get($url);

    $result = $mech->submit_form(
    form_name => 'gaia_loginform', #name of the form
    #instead of form name you can specify
    #form_number => 1
    fields      =>
    {
     Email    => 'arty32l@gmail.com', # name of the input field and value
     Passwd    => 'password',
    }
    ,button    => 'signIn' #name of the submit button
    );

     print $result->content(); 
```

# objective-c - 'NSMutableArray' 没有可见的 @ 接口声明选择器 'appendData:'

> ID：13784916
> 
> 赞同：1
> 
> 时间：2012-12-09T05:25:31.513
> 
> 标签：objective-c, ios, cocoa, nsdata

我在我的 iOS 应用程序中使用 EGOTableViewPullRefresh 库。为了实现它，我不得不将原来的类从 UIViewController 的子类更改为 UITableViewController。这显然破坏了我存储数据的方式，例如在 NSMutableArray 中。

标题：

```
#import <UIKit/UIKit.h>
#import "EGORefreshTableHeaderView.h"

@interface PullViewController : UITableViewController  <EGORefreshTableHeaderDelegate, UITableViewDelegate, UITableViewDataSource>{

    NSArray *news;
    NSMutableArray *data;

    EGORefreshTableHeaderView *_refreshHeaderView;

    //  Reloading var should really be your tableviews datasource
    //  Putting it here for demo purposes
    BOOL _reloading;
}

- (void)reloadTableViewDataSource;
- (void)doneLoadingTableViewData;

@end 
```

执行：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    data = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData{
    [data appendData:theData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    news = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];
    [self.tableView reloadData];
    [DejalBezelActivityView removeViewAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:33:41.663

我不明白你怎么能用 a`NSMutableArray`而不是`NSMutableData`. 实际上，您只是在实例化一个`NSMutableData`. 因此，将您的数据声明更改为`NSMutableData`您的类 ivars 中的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T05:46:27.153

您声明`data`为`NSMutableArray`，并且该类没有任何`appendData:`选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T05:34:05.157

试试这个

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSMutableData *)theData{
    [data appendData:theData];
} 
```

从

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData{
    [data appendData:theData];
} 
```

还，

```
NSArray *news;
NSMutableArray *data; 
```

你确定数据是一种数组吗？或者它应该是 NSMutableData..检查一次 :)

# c# - 在c#中搜索一些字符串

> ID：13784917
> 
> 赞同：0
> 
> 时间：2012-12-09T05:25:31.400
> 
> 标签：c#

如何在 C# 中搜索一些字符串？好吧，如果我有字符串“詹姆斯邦德”并且我正在搜索“詹姆斯”或“詹姆斯”，它将返回真，但如果我正在搜索“詹姆斯”，它将返回假。我怎么能这样做？也许我需要一点具体。我需要根据以“”分隔的单词进行搜索，请参见上文。如果我正在搜索 jame，它将返回 false。如果我在搜索 jame 时使用 contains，它也会返回 true 对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:40:40.223

You will have to use `Regex` for this. You cannot use `Contains`, since it won't take into consideration case-insensitivity and match whole word pattern. Use this instead:

```
string text = "James bond";

// this will return true  
bool result = Regex.IsMatch(text, "\\bjames\\b", RegexOptions.IgnoreCase);

// this will return false   
bool result = Regex.IsMatch(text, "\\bjame\\b", RegexOptions.IgnoreCase); 
```

In the `Regex` formats, the above `\b`s will match an alphanumeric-to-nonalphanumeric boundary (or vice-versa). In this case, this ensures that you will be matching `james` or `jame` as a whole word and not a partial word.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T06:03:18.070

As per your question this is what you would use.

```
 var ex = "James Bond".ToLower(); //normalize case
    bool contains = ex.Split(' ').Any( x => x == "jame");
   //FALSE because the *word* "jame" is not found in "james bond" 
```

Since this question is causing a lot of confusion, you have to keep in mind all of the casing involved.

```
var ex = "James Bond";
bool contains = ex.Contains("jame");
// FALSE because "jame" is not found in "James Bond" due to case-sensitivity

var ex = "James Bond".ToLower(); //normalize case
bool contains = ex.Contains("jame");
// TRUE because "jame" is FOUND in "james bond" due to normalized case 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T06:11:56.447

You can use `Split` to separate a string into parts that are separated. Ex:

```
string[] items = "James Bond".Split(' ');
// items == { "James", "Bond" } 
```

You can use `ToLower` to prevent case senstivity. Ex:

```
string lower = "James Bond".ToLower();
// lower == "james bond" 
```

You can use `StartsWith` to determine if a string starts with some substring. Ex:

```
bool startsWithJame = "James Bond".StartsWith("Jame");
// startsWithJame == true 
```

Using them all together:

```
bool anyWordStartsWith_jame_NoCaseSensitivity =
   "James Bond"
   .ToLower()
   .Split(' ')
   .Any(str => str.StartsWith("jame"));
// anyWordStartsWith_jame_NoCaseSensitivity == true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T05:30:00.670

使用正则表达式。有关示例，请参见：

[http://msdn.microsoft.com/en-us/library/ms228595%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms228595%28v=vs.80%29.aspx)

当在字符串中的任何位置找到“cow”时，这里是匹配的。在您的情况下，它将是“Jame”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T05:34:05.453

您可以使用`Contains`方法搜索：

```
string[] names = new string[] { "joe", "bob", "chris" };
if(names.Contains("james")){
    //code
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-09T05:40:09.537

您可以使用正则表达式使用单词边界来做到这一点。以下代码将向您展示如何使用不区分大小写的搜索进行匹配，并且不会出现“jame”之类的误报。它适用于给定字符串中的任何位置。

```
 static void Main(string[] args)
    {
        string name_to_match = "James Bond";
        string word_to_find = "james";
        string word_to_not_find = "jame";

        string patternToFind = string.Format(@"\b{0}\b", word_to_find);
        string patternToNotFind = string.Format(@"\b{0}\b", word_to_not_find);

        Regex regexToFind = new Regex(patternToFind, RegexOptions.IgnoreCase);
        Regex regexToNotFind = new Regex(patternToNotFind, RegexOptions.IgnoreCase);

        bool foundNameExpected = regexToFind.IsMatch(name_to_match);
        bool foundNameNotExpected = regexToNotFind.IsMatch(name_to_match);
    } 
```

在这种情况下，布尔值 foundNameExpected 将为真（因为我们希望 "james" 匹配 "James Bond" 中的 "James"），但 foundNameNotExpected 将为假（因为我们不希望 "jame" 匹配 "James"）。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-12-09T05:31:56.243

试试这个。

方法：1

```
string s1 = "The quick brown fox jumps over the lazy dog";
string s2 = "fox";
bool b;
bool c;
b = s1.Contains(s2);
c = s1.Contains("test") 
```

bool b 将返回 true。
bool c 将返回 false。

方法：2

```
 string str = "My Name is james";  

 int result = str.IndexOf("james"); 
```

如果在句子中找不到特定的单词，结果将为 -1。

# android - sencha，phonegap android应用程序黑了很长时间

> ID：13784925
> 
> 赞同：0
> 
> 时间：2012-12-09T05:27:43.483
> 
> 标签：android, cordova, sencha-touch, cordova-2.0.0

我正在开发一个 sencha + phonegap android 应用程序。我对此很陌生，我开发了一个应用程序来阅读一些教程。我正在使用 ADT 进行开发。

我的应用程序在加载时显示 5-6 秒的空白屏幕，即使它是一个简单的“Hello World”应用程序。

我的 index.html 看起来像这样

```
<!DOCTYPE HTML>
<HTML>
<head>
<meta charset="utf-8">
<title>PhoneGap</title>

<script type="text/javascript" charset="utf-8" src="sencha-touch-all.js"></script>

<link rel="stylesheet" href="sencha-touch.css" type="text/css" />

<script type="text/javascript"> 

Ext.application({
    name: 'MyApp',

    launch: function() {
        Ext.create('Ext.Panel', {
            fullscreen: true,
            html: 'Hello World'
        });
    }
});

</script>

</head>
<body>
</body>
</HTML> 
```

剩下的一切工作正常。

我还有一些疑问

1.  当我在 index.html 中连接“cordova-2.2.0.js”时，应用程序不会加载。

    sencha 应用程序不需要在 index.html 文件中加载 cordova-2.2.0.js 吗？

我被困在这里

# scons - 需要帮助来解决此错误：Scons

> ID：13784926
> 
> 赞同：1
> 
> 时间：2012-12-09T05:27:56.903
> 
> 标签：scons

```
scons: Reading SConscript files ...

scons: warning: The Options class is deprecated; use the Variables class instead.
File "/home/poly/Downloads/ascend/ascend-0.9.5.116/SConstruct", line 12, in <module>

scons: warning: The BoolOption() function is deprecated; use the BoolVariable()    function instead.
File "/home/poly/Downloads/ascend/ascend-0.9.5.116/SConstruct", line 130, in <module>

scons: warning: The ListOption() function is deprecated; use the ListVariable() function instead.
File "/home/poly/Downloads/ascend/ascend-0.9.5.116/SConstruct", line 168, in <module>

scons: warning: The PackageOption() function is deprecated; use the PackageVariable() function instead.
File "/home/poly/Downloads/ascend/ascend-0.9.5.116/SConstruct", line 253, in <module>

scons: warning: The env.Copy() method is deprecated; use the env.Clone() method instead.
File "/home/poly/Downloads/ascend/ascend-0.9.5.116/scons/graphviz.py", line 43, in generate
Package libagraph was not found in the pkg-config search path.
Perhaps you should add the directory containing `libagraph.pc'
to the PKG_CONFIG_PATH environment variable
No package 'libagraph' found
TCL= /usr
TCL_CPPPATH = $TCL/include
TCL_LIBPATH = $TCL/lib
TCL_LIB = tcl8.5
CC = gcc
CXX = g++
FORTRAN= gfortran
ABSOLUTE PATHS = True
INSTALL_ASCDATA = $INSTALL_SHARE/ascend
INSTALL_PREFIX = /usr/local
INSTALL_MODELS = $INSTALL_ASCDATA/models
INSTALL_SOLVERS = $INSTALL_ASCDATA/solvers
DEFAULT_ASCENDLIBRARY = $INSTALL_MODELS
DEFAULT_ASCENDSOLVERS = $INSTALL_SOLVERS
Scons version is not OK. Please try version 0.96.92 or 0.96.93,
or consult the developers in the case of newer versions. Modify
the function 'sconsversioncheck' in the file SConstruct if you
want to *force* SCons to continue. 
```

我不知道发生了什么。我正在尝试安装提升，但在此之前我需要 scons。我使用安装了 scons

```
yum install scons subversion tk-devel flex bison gcc-gfortran gcc-c++ python-devel sundials-devel graphviz-devel swig 
```

Plaese 帮助我在 fedora 15 32 位上安装提升 0.9.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:39:45.560

就像消息说的那样，包管理器中的 SCons 版本太旧了。

SCons 的依赖项相对较少，只需从源代码安装即可。[在此处](http://www.scons.org/download.php)安装说明，[在此处](http://www.scons.org/doc/production/HTML/scons-user/c95.html)下载。

# jquery - 在页面加载时绑定一个函数，然后取消绑定

> ID：13784934
> 
> 赞同：-1
> 
> 时间：2012-12-09T05:29:27.113
> 
> 标签：jquery, load, bind, unbind, document-ready

我有一个功能，我想在页面加载或刷新时运行，但是我想更改或删除它并添加另一个类似的功能，但只在点击时运行。我正在努力：

```
$(document).ready(function () {

$(window).('load.First', function() {
 alert('load function');
});

$(window).unbind('.First');

$(window).bind('click', function() {
 alert('second function');
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:41:15.610

您的 unbind 看起来应该在第一个 bind 函数内，否则它会立即运行并立即取消绑定函数。这样做的一种方法是添加/删除一个类并随时根据链接所具有的类控制操作。

```
$(document).on('click', '.first', function(){
    $(this)
        .removeClass('first')
        .addClass('second')
        .text('second');
}); 
```

演示：http: [//jsfiddle.net/MLX4Z/](http://jsfiddle.net/MLX4Z/)

# html - Internet Explorer 和 Interspire 购物车兼容性问题

> ID：13784937
> 
> 赞同：1
> 
> 时间：2012-12-09T05:29:56.150
> 
> 标签：html, css

我的购物车在 IE 之外的所有其他浏览器上都能完美呈现。我正在失去客户，并且到处寻找解决这个问题的方法。如果有人可以提供帮助，那就太棒了。下面是我的css文件。我不确定你们还需要什么来帮助我。让我知道。

```
* html #Logo h1 {
background : url(../../default/images/blue/Logo.gif) top left no-repeat;
}
* html .Left .TopSeller1, * html .Right .TopSeller1 {
margin-top : 0;
}
* html .Left .TopSellers li.TopSeller1 .TopSellerNumber, * html .Right .TopSellers li.TopSeller1 .TopSellerNumber {
background : url(../../default/images/blue/TopSellerNumber1Bg.gif) 0% 0% no-repeat;
margin : 0;
}
* html #Menu li a {
float : left;
}
* html .Left {
height : 490px;
}
* html .Right {
height : 490px;
}
* html .Content {
height : 500px;
}
* html .SelectGiftWrapMultiple {
height : 400px;
}
#SearchForm .Button {
vertical-align : bottom;
}
select, input {
font-size : 0.95em;
}
#Container {
width : 980px;
}
.ProductAddToCart dt div.Required, #CartEditProductFieldsForm dt div.Required {
margin-left : 0;
}
* {
margin : 0;
padding : 0;
}
body {
font-family : "sans bold", Arial, Helvetica, sans-serif;
font-size : 1em;
height : 100%;
}
input, select {
font-size : 11px;
}
input {
padding : 1px;
}
p {
line-height : 1.3;
margin-bottom : 15px;
}
a {
font-weight : normal;
text-decoration : none;
}
h2, .TitleHeading {
font-size : 1.9em;
font-weight : bold;
margin : 6px 0 6px 0;
}
h3 {
font-size : 1.1em;
font-weight : bold;
margin-bottom : 6px;
}
h4 {
font-size : 1.1em;
margin-bottom : 4px;
}
img, img a {
border : 0;
}
ul, ol {
margin : 0 0 10px 30px;
}
li {
margin : 0;
margin-bottom : 2px;
padding : 0;
}
blockquote {
margin-left : 28px;
}
select option {
padding : 0 10px;
}
hr {
margin : 10px 0;
padding : 0;
background : #c7d7db;
height : 1px;
border : 0;
}
.HorizontalFormContainer dl, .VerticalFormContainer dl {
margin : 0;
}
.HorizontalFormContainer dt img {
vertical-align : middle;
float : left;
}
.HorizontalFormContainer dt .fieldLabel {
float : left;
padding-top : 4px;
padding-left : 4px;
}
.HorizontalFormContainer dt {
width : 160px;
float : left;
clear : left;
}
.HorizontalFormContainer dd.ProductField {
height : 20px;
}
.HorizontalFormContainer dd {
padding-top : 4px;
margin-left : 170px;
}
.NarrowFormContainer dt {
width : 110px;
}
.NarrowFormContainer dd {
margin-left : 120px;
}
.HorizontalFormContainer p.Submit {
margin-left : 170px;
}
.NarrowFormContainer p.Submit {
margin-left : 120px;
}
.VerticalFormContainer dt {
margin-bottom : 6px;
}
.VerticalFormContainer dd {
margin-bottom : 6px;
margin-left : 10px;
}
#Container {
width : 983px;
margin : 0 auto;
background : #fff;
}
#TopMenu {
background : #eaeaea none repeat scroll 0 0;
height : 25px;
padding : 0;
}
#TopMenu ul {
float : right;
margin : 1px 10px 0 0;
padding : 0;
}
#TopMenu li {
list-style : none;
float : left;
margin : 0;
padding : 0;
}
#TopMenu li.First a {
border-left : 0;
}
#TopMenu li a, #TopMenu li div {
display : inline;
text-decoration : none;
font-size : 0.60em;
padding : 0 10px 0 10px;
margin : 8px 0 0 0;
}
#TopMenu li div a {
padding : 0;
margin : 0;
display : inline;
font-size : 1em;
}
#TopMenu li a:hover {
text-decoration : none;
}
#Menu {
clear : both;
margin : 0 0 10px;
padding : 0;
height : 30px;
background : transparent url('../../default/images/blue/menu-bg.jpg') repeat-x;
}
#Menu ul {
margin : 5em 0;
padding : 0;
}
#Menu li {
float : none;
position : relative;
list-style : none;
margin : 50px;
padding : 0;
}
#Menu li.First a {
background-image : none;
}
#Menu li a {
display : inline;
float : left;
font-size : 15px;
font-weight : bolder;
text-align : center;
text-decoration : none;
padding : 6px 35px 3px 10px;
height : 20px;
}
#Menu li a:hover {
text-decoration : underline;
}
#Menu li ul {
width : auto;
position : absolute;
clear : left;
top : 5px;
left : 0;
display : none;
text-align : left;
font-size : 1.1em;
background : transparent;
z-index : 1;
}
#Menu li ul li {
clear : both;
text-align : left;
}
#Menu li ul li a {
padding : 3px 10px 3px 10px;
font-size : 1.33em;
text-align : left;
margin : 0;
width : 300px;
height : auto;
}
#Menu li ul li a:hover {
text-decoration : underline;
}
#Menu li:hover a, #Menu li.over a {
text-decoration : none;
}
#Menu li ul li a, #Menu li.over li a {
text-decoration : none !important ;
}
#Menu li:hover ul, #Menu li.over ul {
display : inline;
}
* html #Menu ul li {
float : left;
height : 1%;
}
* html #Menu ul li a {
height : 1%;
}
#Outer {
margin-top : 0;
clear : both;
}
#Wrapper {
clear : both;
}
#Header {
height : 57px;
clear : both;
margin : 0 0 1px 0;
padding-bottom : 12px;
}
#Logo {
float : left;
width : 230px;
margin-left : 172px;
margin-top : 10px;
}
#Logo h1 {
font-size : 2.4em;
font-weight : normal;
padding-left : 64px;
height : 45px;
margin-top : 10px;
}
#Logo h1 a {
text-decoration : none;
}
#SearchForm {
padding-top : 20px;
float : right;
margin-right : 10px;
}
#SearchForm label {
font-weight : bold;
}
#SearchForm input.Textbox {
width : 139px;
border : #e5e6ea solid 1px;
background : #fff;
font-size : 0.9em;
padding : 2px;
}
#SearchForm .Button {
width : 27px;
height : 21px;
padding : 0;
margin-top : -4px;
vertical-align : middle;
margin-left : -5px;
}
#SearchForm p {
text-align : right;
margin : 0 0 0 45px;
font-size : 0.9em;
}
#SearchForm a {
text-decoration : none;
}
.Left {
float : left;
min-height : 500px;
width : 160px;
font-size : 1em;
margin-right : 5px;
}
.Left h2 {
font-size : 22px;
margin : 20px 15px 10px;
width : 140px;
font-family : "arial black", Times, serif;
color : #b72f0b;
font-weight : bolder;
}
.Left a {
color : #000;
padding-left : 8px;
font-size : 15px;
font-weight : bold;
}
.Left li a:hover {
background-color : #ffffff;
}
.Left .BlockContent {
margin : 0 10px 0 10px;
}
.Left ul {
margin : 0;
padding : 0;
}
.Left li {
clear : both;
list-style : none;
margin : 0;
padding : 3px 0;
}
.Left .BlockContent {
margin : 0 10px 0 10px;
}
.Left li {
border-bottom : 10px solid #ffffff;
}
.Left li a {
text-decoration : none;
}
.Left li a:hover {
text-decoration : underline;
}
.Left #SideCategoryList li ul {
border-top : 1px solid #ef810a;
}
.Left #SideCategoryList li.LastChild {
border-bottom : 0 !important ;
}
.Left #SideCategoryList li {
padding : 7px 0 0 0;
}
.Left #SideCategoryList li ul {
padding-left : 15px;
}
.Content {
float : left;
width : 576px;
min-height : 500px;
margin : 0;
padding : 0 5px 0;
font-size : 0.95em;
font-weight : bold;
}
.Content .Block {
clear : both;
}
.Block {
margin-top : 10px;
margin-bottom : 10px;
}
.Content h2, .TitleHeading {
font-size : 24px;
font-weight : bold;
color : #000;
margin : 10px 0;
text-align : center;
border-bottom : 1px solid #c7c7c7;
padding-bottom : 5px;
font-family : "hobo std", Times, serif;
}
.Content a:hover {
text-decoration : underline;
}
.Content.Wide {
width : 785px;
}
.Content.Widest {
width : 955px;
}
.Right {
float : right;
min-height : 500px;
width : 218px;
font-size : 0.85em;
padding-bottom : 10px;
margin-left : 4px;
margin-right : 10px;
}
.Right h2 {
font-size : 25px;
margin : 5px 10px 8px;
width : 140px;
font-family : "Comic Sans MS", Times, serif;
color : #b72f0b;
font-weight : bolder;
}
.Right a {
color : #000;
}
.Right li a:hover {
text-decoration : underline;
}
.Right .BlockContent {
margin : 0 10px 0 10px;
}
.Right ul {
margin : 0;
padding : 0;
}
.Right li {
clear : both;
list-style : none;
margin : 0;
padding : 3px 0;
}
.Right .BlockContent {
margin : 0 10px 0 10px;
}
.Right li {
border-bottom : 1px solid #c5dde9;
text-align : center;
}
.Right li a {
text-decoration : none;
}
.Right li a:hover {
text-decoration : underline;
}
#Footer {
clear : both;
font-size : 0.85em;
text-align : center;
margin : -25px 0 0 0;
padding : 5px 0 0 0;
}
#Footer ul {
list-style : none;
margin : 0 0 30px 115px;
padding : 0;
}
#Footer li {
float : left;
list-style : none;
margin : 0;
padding : 0;
}
#Footer li a {
text-decoration : none;
padding : 0 10px 0 10px;
}
.NewsletterSubscription {
clear : both;
}
.NewsletterSubscription label {
clear : both;
float : left;
}
.NewsletterSubscription input {
width : 129px;
font-size : 0.9em;
padding : 3px;
margin-bottom : 5px;
}
.NewsletterSubscription .Button {
width : 68px;
height : 20px;
border : 0;
margin-top : 6px;
vertical-align : middle;
}
.ProductList {
list-style : none;
margin : 0;
padding : 0;
}
.Content .ProductList li {
list-style : none;
float : left;
width : 122px;
font-size : 0.95em;
margin : 2px;
padding : 8px;
overflow : hidden;
min-height : 17em;
text-align : center;
}
.ProductList a {
text-decoration : none;
}
.ProductList .ProductImage {
margin : 0 0 5px 0;
display : table-cell;
width : 120px;
height : 120px;
text-align : center;
overflow : hidden;
vertical-align : middle;
}
.ProductList .ProductImage img {
vertical-align : middle;
}
.ProductList p {
margin : 5px 0 5px 5px;
}
.ProductList strong, .ProductList strong a {
color : #ff0078;
}
.ProductPrice, .ProductList em {
font-style : normal;
font-weight : bold;
font-size : 1.4em;
color : #000000;
}
.ProductList .Rating {
font-size : 0.9em;
font-weight : bold;
}
.ProductList .Rating img {
height : 12px;
margin-top : 3px;
}
.ProductList li .ProductCompareButton {
margin-top : 3px;
text-align : center;
}
.Left .ProductList .ProductImage, .Right .ProductList .ProductImage {
display : block;
}
.Left .ProductList li, .Right .ProductList li {
clear : both;
width : 140px;
list-style : none;
margin : 0;
margin-top : 5px;
padding : 3px 0 1px 0;
color : #000000;
}
.Right .SideCart p {
color : #000000;
}
.Left .TopSellers li .TopSellerNumber, .Right .TopSellers li .TopSellerNumber {
float : left;
width : 20px;
font-size : 1.2em;
padding : 6px 0 3px 6px;
}
.Left .TopSellers .ProductDetails, .Right .TopSellers .ProductDetails {
margin-left : 24px;
width : 110px;
padding : 3px 0 3px 0;
}
.Left .TopSellers li.TopSeller1, .Right .TopSellers li.TopSeller1 {
clear : both;
float : left;
width : 128px;
margin : 10px 0 5px 0;
padding : 5px;
overflow : visible;
display : inline;
}
.Left .TopSellers li.TopSeller1 img, .Right .TopSellers li.TopSeller1 img {
text-align : center;
overflow : hidden;
max-width : 130px;
}
.Left .TopSellers li.TopSeller1 .TopSellerNumber, .Right .TopSellers li.TopSeller1 .TopSellerNumber {
width : 44px;
height : 34px;
font-size : 2em;
padding : 7px 0 6px 0;
margin : -20px 0 0 0;
text-align : center;
display : block;
}
.Left .TopSellers li.TopSeller1 .ProductDetails, .Right .TopSellers li.TopSeller1 .ProductDetails {
margin-left : 0;
}
.Left .TopSellers li.TopSeller1 .ProductImage, .Right .TopSellers li.TopSeller1 .ProductImage {
width : 130px;
display : inline;
text-align : center;
overflow : hidden;
}
.Content .TopSellers li .TopSellerNumber {
display : none;
}
.Breadcrumb ul, .Breadcrumb li {
list-style : none;
margin : 0;
padding : 0;
}
.Breadcrumb {
font-size : 0.9em;
padding-bottom : 4px;
border-bottom : 1px solid #DCDFE2;
}
.Breadcrumb li {
padding-left : 6px;
display : inline;
}
.Breadcrumb li a {
padding-right : 0;
background : url('../../default/images/BreadcrumbSep.gif') no-repeat right;
}
.FindByCategory ul, .FindByCategory li {
list-style : none;
padding : 0;
margin : 0;
}
.FindByCategory li {
padding-left : 12px;
background : url('../../default/images/BreadcrumbSep.gif') no-repeat 3px 5px;
padding-right : 8px;
display : inline;
}
.Meta {
color : #444;
font-size : 0.93em;
}
.Left .FeedLink, .Right .FeedLink {
padding-right : 5px;
}
.Content .FeedLink {
margin-top : 4px;
}
.FloatRight {
float : right;
}
.FloatLeft {
float : left;
}
.ClearRight {
clear : right;
}
.ClearLeft {
clear : left;
}
.SortBox {
font-size : 0.95em;
color : #444;
}
.CompareButton {
clear : both;
text-align : right;
margin-top : 12px;
padding : 4px;
}
.Clear {
clear : both;
}
.Field45 {
width : 45px;
}
.Field100 {
width : 100px;
}
.Field150 {
width : 150px;
}
.Field200 {
width : 200px;
}
.Field250 {
width : 250px;
}
.Field300 {
width : 300px;
}
.Field350 {
width : 350px;
}
.Field400 {
width : 400px;
}
.MB10 {
margin-bottom : 10px;
}
.MT0 {
margin-top : 0;
}
.LH140 {
line-height : 140%;
}
.PLRB5 {
padding : 0 5px 5px 5px;
}
.PLR10 {
padding : 0 10px 0 10px;
}
.PL20 {
padding : 0 0 0 20px;
}
.PL40 {
padding : 0 0 0 40px;
}
.ML20 {
margin : 0 0 0 20px;
}
.MT10 {
margin-top : 10px;
}
.PL10 {
padding-left : 10px;
}
.PB2 {
padding-bottom : 2px;
}
.NoMarginBottom {
margin-bottom : 0;
}
.Required {
color : red;
font-weight : bold;
visibility : visible;
}
.InfoMessage {
padding : 8px 6px 8px 28px;
margin-bottom : 10px;
}
.SuccessMessage {
padding : 8px 6px 8px 28px;
margin-bottom : 10px;
}
.ErrorMessage {
padding : 8px 6px 8px 28px;
margin-bottom : 10px;
}
.CreateAccount {
float : left;
width : 335px;
border-right : 1px solid #ccc;
padding-right : 20px;
}
.AccountLogin {
float : left;
padding-left : 20px;
width : 335px;
}
ul.ShippingAddressList, ul.ShippingAddressList li {
list-style : none;
margin : 0;
padding : 0;
}
ul.ShippingAddressList li {
width : 30%;
float : left;
margin-right : 10px;
margin-bottom : 20px;
}
.PrimaryProductDetails .ProductThumb {
float : left;
width : 190px;
text-align : center;
}
.PrimaryProductDetails .ProductMain {
width : 320px;
float : left;
}
.PrimaryProductDetails dl {
font-size : 0.90em;
}
.PrimaryProductDetails dt {
font-weight : bold;
width : 80px;
clear : left;
}
.PrimaryProductDetails dd {
margin-left : 90px;
}
.Right hr {
margin : 5px 0 0;
}
.Content h3 {
font-size : 24px;
font-weight : bold;
color : #000;
margin-bottom : 5px;
}
.ComparisonCheckbox {
float : left;
}
.SideRecentlyViewed .CompareButton {
margin : 10px 0 0 0;
padding : 0;
}
.SideRecentlyViewed .ProductList li {
margin-left : 0;
}
.SideRecentlyViewed .ProductDetails {
margin-left : 20px;
}
.ComparisonTable {
width : 100%;
}
.ComparisonTable td {
vertical-align : top;
font-size : 11px;
}
.CompareFieldName {
width : 95px;
padding : 8px 10px 8px 15px;
}
.CompareFieldTop {
padding : 5px;
text-align : center;
}
.CompareFieldTop a {
text-decoration : none;
font-size : 10px;
}
.CompareFieldTop a:hover {
text-decoration : underline;
}
.CompareLeft {
padding : 5px 10px 5px 10px;
}
.CompareCenter {
text-align : center;
padding : 5px;
}
.CompareRating {
text-align : center;
padding-top : 8px;
vertical-align : middle;
}
.CompareProductOption {
margin-left : 20px;
padding-left : 5px;
}
.Availability {
color : gray;
}
.LittleNote {
color : gray;
font-size : 0.85em;
}
.ViewCartLink {
padding-left : 30px;
padding-top : 4px;
padding-bottom : 8px;
}
table.General, table.CartContents, table.General {
width : 100%;
margin : 10px 0;
}
table.General thead tr th, table.CartContents thead tr th {
padding : 6px 10px;
text-align : left;
}
table.General tbody td, table.CartContents tbody td {
padding : 6px 10px;
vertical-align : top;
}
table.General tbody tr.First td {
border-top : 0;
}
.CartContents tbody td, .CartContents tfoot td {
border-bottom : 0;
}
.CartContents .ProductName a {
font-weight : bold;
}
.ProceedToCheckout {
text-align : right;
}
.Content .ProceedToCheckout {
width : 200px;
float : right;
}
.ProceedToCheckout a {
padding-top : 5px;
}
.MiniCart .SubTotal {
text-align : center;
font-size : 115%;
color : #075899;
}
.MiniCart .CartProductOptionList {
display : block;
}
.JustAddedProduct {
width : 128px;
overflow : hidden;
margin : auto;
text-align : center;
padding : 5px;
margin-bottom : 10px;
}
.JustAddedProduct strong, .JustAddedProduct a {
font-weight : bold;
font-size : 1.02em;
display : block;
margin-bottom : 3px;
}
.CategoryPagination .PagingList, .CategoryPagination .PagingList li {
list-style : none;
padding : 0;
margin : 0;
}
.CategoryPagination {
padding : 5px;
text-align : center;
}
.CategoryPagination .PagingList li {
display : inline;
padding : 0 5px;
}
.QuickSearch {
margin : 0;
padding : 0;
text-align : left;
border-collapse : collapse;
background : #fff;
border : #BFBFBF solid 1px;
}
.QuickSearchTitle td, .QuickSearchAllResults td {
font-weight : bold;
padding : 4px;
font-size : 11px;
}
.QuickSearchResult td {
font-size : 11px;
padding : 8px;
cursor : pointer;
}
.QuickSearchResultImage {
margin-left : 4px;
margin-right : 10px;
text-align : center;
}
.QuickSearchResultNoImage {
padding-top : 10px;
color : #777;
}
.QuickSearchResultName {
margin : 0;
padding : 0;
padding-bottom : 5px;
}
.QuickSearchResultName a {
font-weight : bold;
text-decoration : none;
}
.QuickSearchResult .Price {
font-size : 11px;
}
.QuickSearchHover td {
background : #E8F4F8;
}
.QuickSearchHover a {
text-decoration : underline;
font-weight : bold;
}
.QuickSearchAllResults td {
text-align : right;
height : 25px;
}
.QuickSearchAllResults a {
text-decoration : underline;
}
.QuickSearchAllResults a:active, .QuickSearchAllResults a {
outline : none;
}
.BrandCloud .smallest {
font-size : 12px;
}
.BrandCloud .small {
font-size : 15px;
}
.BrandCloud .medium {
font-size : 18px;
}
.BrandCloud .large {
font-size : 20px;
}
.BrandCloud .largest {
font-size : 26px;
}
.BrandCloud a {
padding-right : 5px;
}
.DownloadExpires {
padding-top : 3px;
font-style : italic;
color : gray;
}
.DownloadExpiresToday {
color : red;
}
.CheckoutRedeemCoupon h4 {
margin-top : 0;
}
.CheckoutRedeemCoupon p {
margin-top : 10px;
margin-bottom : 0;
}
.BillingDetails {
float : left;
width : 48%;
margin-right : 10px;
margin-bottom : 15px;
}
.ShippingDetails {
float : left;
width : 48%;
margin-bottom : 15px;
}
.ProductDetailsGrid dt {
width : 140px;
margin-bottom : 6px;
float : left;
font-weight : bold;
}
.ProductDetailsGrid dd {
margin-left : 145px;
margin-bottom : 6px;
}
.SubCategoryList {
padding : 4px;
}
.SubCategoryList ul, .SubCategoryList li {
list-style : none;
margin-left : 0;
}
.SubCategoryList li {
margin-bottom : 4px;
padding-left : 25px;
background : url('../../default/images/SubCategory.gif') no-repeat 3px 1px;
width : 250px;
float : left;
}
.SearchTips .Examples {
padding : 8px;
border : #aaa solid 1px;
color : #555;
margin-left : 30px;
margin-bottom : 10px;
}
.PrimaryProductDetails .ProductThumb p {
margin-top : 10px;
font-size : 0.9em;
}
.ProductReviewList {
clear : both;
}
.SortBox select {
font-size : 0.9em;
}
.SortBox option {
color : #444;
}
.YourAccount li {
margin-bottom : 8px;
}
.SoldOut {
color : #999;
}
.RemoveFromWishlistForm {
margin : 5px;
}
.ShippingProviderList {
list-style : none;
}
small {
font-size : 11px;
color : gray;
}
.HowToPay {
margin-bottom : 10px;
}
.ProductList em, .ProductList .Rating {
display : block;
}
.GoogleCheckout p, .PayPalExpressCheckout p, .AlternativeCheckout p {
margin : 0;
font-size : 90%;
}
.GoogleCheckout, .PayPalExpressCheckout, .AlternativeCheckout {
text-align : center;
margin-bottom : 10px;
}
.KeepShopping {
width : 180px;
clear : both;
text-align : right;
}
#TopMenu li.Flag {
float : right;
}
#TopMenu li.Flag div {
border : 0;
}
#TopMenu li.Flag img {
margin : 3px;
}
#TopMenu li.Flag img.Last {
margin-right : 0;
}
#TopMenu li.Flag img.Selected {
border : #ffffaa solid 2px;
margin : 1px 3px;
}
.CurrencyList dl {
margin : 0;
padding : 0;
}
.CurrencyList dd {
padding : 0;
margin : 0;
border : #EDECEC solid 1px;
background-color : #F9F9F9;
clear : both;
}
.CurrencyList a {
padding : 0 3px 0 5px;
display : block;
line-height : 1.8;
text-decoration : none;
font-size : 11px;
}
.CurrencyList a.Sel {
background-color : #FFFFAA;
}
.CurrencyList a:hover .Text {
text-decoration : underline;
}
.CurrencyList a .Flag {
margin-top : 4px;
display : block;
float : left;
width : 24px;
padding-right : 2px;
vertical-align : middle;
}
.CurrencyList a .Text {
display : block;
padding-left : 24px;
}
.PrimaryProductDetails .YouSave {
font-weight : bold;
margin-top : 3px;
display : block;
}
.EstimateShipping {
margin-top : 4px;
margin-bottom : 4px;
font-weight : normal;
width : 320px;
padding : 7px;
float : right;
}
.EstimateShipping dt {
width : 100px;
float : left;
margin-bottom : 8px;
clear : left;
}
.EstimateShipping dd {
margin-bottom : 8px;
font-weight : normal;
text-align : left;
margin-left : 114px;
}
.EstimateShipping p.Submit {
margin-top : 10px;
margin-bottom : 3px;
}
.EstimateShipping label {
display : block;
margin-bottom : 5px;
}
.EstimatedShippingMethods {
text-align : left; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:35:41.437

ISC 有一个单独的 ie.css 文件

# java - 如何在正则表达式中指定字符类中的某个字符至少出现一次？

> ID：13784951
> 
> 赞同：0
> 
> 时间：2012-12-09T05:33:37.247
> 
> 标签：java, regex, email

```
Pattern p = Pattern.compile("[\\w\\.]+\\sat\\s[\\w\\.]+"); 
```

将匹配网页中的以下三行：

```
dave.andersen at gmail.com
appear at SOSP
staring at now 
```

但是，我只希望匹配第一行。有没有办法指定`dot`两边至少有一个`at`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:40:01.383

```
\w+\.\w+\s+at\s+\w+\.\w+ 
```

火柴

> gmail.com 的 dave.andersen

但不是：

> 出现在 SOSP

或者：

> 盯着现在

**编辑：**

```
\w+\.[\w\.]+\s+at\s+\w+\.[\w\.]+ 
```

比赛`data.anderson at gmail.com`和`my.fair.lady at gmail.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:41:35.717

也许你可以试试这个

```
\w+\.\w+\sat\s\w+\.\w+ 
```

这将确保“。” 出现在单词之间。

这是重新定义的版本，以匹配“at”之前和之后的一个点

你可以用

```
^[a-zA-Z0-9]+\.[a-zA-Z0-9]+\sat\s[a-zA-Z0-9]+\.[a-zA-Z0-9]+$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T05:48:34.897

你有正确的想法，使用“+”表示至少一个，但使用“[\w\.]+”匹配任何单词字符或句点字符串。

这将匹配诸如“foo.bar at foo.bar”或“foo..bar at foo..bar”之类的内容：

```
Pattern p = Pattern.compile("\\w+\\.+\\w+\\sat\\s\\w+\\.+\\w+"); 
```

这将匹配诸如“foo.bar at foo.bar”或“foo.bar.bar at foo.foo.bar”之类的内容：

```
Pattern p = Pattern.compile("\\w+\\.[\\w\\.]+\\sat\\s\\w+\\.[\\w\\.]+" 
```

"\w+\.+\w+" 和 "[\w\.]+" 之间的区别在于，第一种形式将匹配至少一个单词字符后跟至少一个句点后跟至少一个单词字符，而第二种form 将匹配单词字符和句点的任何混合。

# c# - C#/XNA - 私有随机类变量在所有实例中返回相同的值

> ID：13784960
> 
> 赞同：0
> 
> 时间：2012-12-09T05:35:12.817
> 
> 标签：c#, random, xna

我正在为一个学校项目做一个类似 dxball 的游戏。我正在尝试为将在屏幕上移动的对象（块）创建[生成点。](http://en.wikipedia.org/wiki/Spawning_%28video_gaming%29#Spawn_points)但我的问题是当我说创建 2 个 Block 类型的对象时。他们将获得相同的随机重生位置，并且他们将始终保持相同的重生位置。所以我想我对随机函数做错了

```
public class blocks
{
    public Texture2D texturBlock1;
    public Vector2 hastighet = new Vector2(500.0f, 000.0f);
    public Vector2 position;
    private Random random = new Random();
    private int Screen = new int();

   public blocks(int MaxWith)
   {
       this.position.X = MaxWith+10;
       this.position.Y = random.Next(300);
       Screen = MaxWith;
   } 
```

如果有人可以帮助我，我会很高兴。谈到 XNA 和 c#，我是一个真正的新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T05:43:12.047

.NET 中的 Random 类通常使用 System.DateTime 作为它的种子，因此当您同时创建多个随机数时，您往往会获得相同的种子并生成相同的随机数。

试试这个使用 GUID 作为种子的静态方法

```
public static int RandNumber(int low, int high)
{
        Random rndNum = new Random(int.Parse(Guid.NewGuid().ToString().Substring(0, 8), System.Globalization.NumberStyles.HexNumber));
        int rnd = rndNum.Next(low, high);
        return rnd;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T05:40:58.243

问题可能是您`Random`为每个块创建一个新对象。这可能将它们全部初始化（为它们的伪随机器函数提供相同的种子），从而导致它们为您提供相同的随机数。

解决这个问题的最简单方法是简单地制作`private Random random` `static`. 那么`Random`所有块一起只有一个对象，它们应该都得到不同的位置。

希望这可以帮助！

# c - 如何避免C中函数指针上的全局变量

> ID：13784964
> 
> 赞同：0
> 
> 时间：2012-12-09T05:35:41.540
> 
> 标签：c, struct

我使用全局变量`z`作为计数器。有没有办法使用 MyStruct len 作为我的计数器？我宁愿不使用全局变量。

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <glib.h>

typedef struct st { 
    char *key;
    char *str;
    int len;
} MyStruct;

int z = 0;
static void hash2struct (gpointer key, gpointer value, gpointer data) {
    MyStruct **s = data; 
    gchar *k = (gchar *) key;
    gchar *h = (gchar *) value;
    s[z]->key = strdup(k);
    s[z]->str =strdup(h);
    z++;
}

int main(int argc, char *argv[]){
    int i;

    GHashTable *hash = g_hash_table_new(g_str_hash, g_str_equal);

    g_hash_table_insert(hash, "Virginia", "Richmond");
    g_hash_table_insert(hash, "Texas", "Austin");
    g_hash_table_insert(hash, "Ohio", "Columbus");

    MyStruct **s = malloc(sizeof(MyStruct) * 3);
    for(i = 0; i < 3; i++) {
        s[i] = malloc(sizeof(MyStruct)); 
    }
    g_hash_table_foreach(hash, hash2struct, s); 

    for(i = 0; i < 3; i++)
        printf("%s %s\n", s[i]->str, s[i]->key);

    for(i = 0; i < 3; i++) {
        free(s[i]->str);
        free(s[i]->key);
        free(s[i]);
    }
    free(s);
    g_hash_table_destroy(hash);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:48:03.900

您大概设想`z`跟踪分配的数组中使用的单元数。如果您试图将值粘贴到单个`MyStruct`s 中，您将面临多个不同值的风险。

而是考虑您可以打包数组并将其作为计数器（实际上是构建动态数组类型）：

```
struct {
   int length;
   MyStruct *ary;
} MyStructDArray; 
```

他们你保留这件事的一个实例并将其传递*给*你的`hash2struct`例程。

# c# - 使用 AE.NET 从 gmail 获取附件不起作用

> ID：13784965
> 
> 赞同：4
> 
> 时间：2012-12-09T05:36:46.843
> 
> 标签：c#, gmail-imap

我正在使用[AE.NET](https://github.com/andyedinborough/aenetmail)使用 IMAP 从 Gmail 获取邮件。我能够收到消息，但是当我尝试遍历消息附件时没有。返回 message.Value.Attachments.Count() 给我 0。

```
using (var imap = new AE.Net.Mail.ImapClient("imap.gmail.com", mailAccount.UserName, mailAccount.Password, AE.Net.Mail.ImapClient.AuthMethods.Login, 993, true))
{
    //Get all new messages
    var msgs = imap.SearchMessages(
        SearchCondition.Unseen()
    );
    string ret = "";

    foreach (var message in msgs)
    {
        foreach (var attachment in message.Value.Attachments)
        {
            //Save the attachment
        }
    }
} 
```

正如我所说，我已经记录了附件计数以及邮件的主题，并且确定邮件正在被检索，但是它们没有附件，这是不正确的，因为我可以在 Gmail 中看到附件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-04T12:54:22.013

您只是在做`imap.SearchMessages(SearchCondition.Unseen())`，但此方法仅加载邮件的标题。您需要通过在`SearchMessages`方法中获得的消息 ID 使用以下代码：

```
List<string> ids = new List<string>();
List<AE.Net.Mail.MailMessage> mails = new List<AE.Net.Mail.MailMessage>();

using (var imap = new AE.Net.Mail.ImapClient("imap.gmail.com", mailAccount.UserName, mailAccount.Password, AE.Net.Mail.ImapClient.AuthMethods.Login, 993, true)) 
{
    var msgs = imap.SearchMessages(SearchCondition.Unseen());
    for (int i = 0; i < msgs.Length; i++) {
        string msgId = msgs[i].Uid;
        ids.Add(msgId);            
    }

    foreach (string id in ids)
    {
        mails.Add(imap.GetMessage(id, headersonly: false));
    }
} 
```

然后使用：

```
foreach(var msg in mails)
{
    foreach (var att in msg.Attachments) 
    {
        string fName;
        fName = att.Filename;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:22:19.693

```
 using (var imap = new AE.Net.Mail.ImapClient("imap.gmail.com", mailAccount.UserName, mailAccount.Password, AE.Net.Mail.ImapClient.AuthMethods.Login, 993, true))  {
        var msgs = imap.SearchMessages(SearchCondition.Unseen());
        for (int i = 0; i < msgs.Length; i++) {
            MailMessage msg = msgs[i].Value;

            foreach (var att in msg.Attachments) {
                string fName;
                fName = att.Filename;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-10T01:35:31.333

图标。由于作者不提供任何预编译下载，您必须自己编译。（我相信你可以通过 NuGet 获得它）。bin/ 文件夹中不再有 .dll。没有文档，我认为这是一个缺点，但我能够通过查看源代码（开源！）并使用 Intellisense 来解决这个问题。下面的代码专门连接到 Gmail 的 IMAP 服务器：

```
// Connect to the IMAP server. The 'true' parameter specifies to use SSL 
// which is important (for Gmail at least) 
ImapClient ic = new ImapClient("imap.gmail.com", "name@gmail.com", "pass", ImapClient.AuthMethods.Login, 993, true); 
// Select a mailbox. Case-insensitive ic.SelectMailbox("INBOX"); Console.WriteLine(ic.GetMessageCount()); 
// Get the first *11* messages. 0 is the first message; 
// and it also includes the 10th message, which is really the eleventh ;) 
// MailMessage represents, well, a message in your mailbox 
MailMessage[] mm = ic.GetMessages(0, 10); 
foreach (MailMessage m in mm) {     
   Console.WriteLine(m.Subject); 
} // Probably wiser to use a using statement ic.Dispose(); 
```

# logic - 编程逻辑 - 假设第二部分的一个好的通用速记术语是什么？

> ID：13784966
> 
> 赞同：0
> 
> 时间：2012-12-09T05:36:51.837
> 
> 标签：logic, discrete-mathematics

我想知道假设的第二部分是否有技术术语？喜欢：

```
(X & Y) → Z 
```

会`Y`被称为什么？或者`X`在这件事上会有什么名声？我考虑使用的一些选项是“位”和“象限”，但我不认为这些是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T05:40:18.403

X 和 Y 在离散数学中称为参数值。陈述“如果 X 和 Y 则 Z”称为命题。请注意，如果 X 不正确，这并不意味着 Z 不正确。

请参阅[http://en.wikibooks.org/wiki/Discrete_Mathematics/Logic](http://en.wikibooks.org/wiki/Discrete_Mathematics/Logic)

但有时您将命题与 AND 等结合起来。例如，从上面的链接中：p 代表命题“亨利八世有六个妻子”。q 代表命题“英国内战发生在 19 世纪”。

是 p AND q，真或假。

说 if p AND q then r 也是有效的

（我们可以质疑这是否是一个整体上的真命题，这取决于命题 p、q、r 是什么）

# java - 这个在 Java 中使用 long 位的紧凑布尔数组有什么问题？

> ID：13784970
> 
> 赞同：1
> 
> 时间：2012-12-09T05:37:34.903
> 
> 标签：java, algorithm, bit-manipulation, bitwise-operators

我的紧凑型布尔数组实现有什么问题？它不工作。测试失败了，所以我做错了一些按位运算。:(

```
public class CompactBooleanArray {

    private final int size;
    private final long[] bitmap;

    public CompactBooleanArray(int size) {
        this.size = size;
        int numberOfLongs = (size + 63) / 64;
        bitmap = new long[numberOfLongs];
    }

    public final void set(int index, boolean value) {
        int longIndex = index >> 6;
        int bitPosition = index & 63;

        if (value) {
            bitmap[longIndex] |= (1 << bitPosition);
        } else {
            bitmap[longIndex] &= ~(1 << bitPosition);
        }
    }

    public final boolean get(int index) {
        int longIndex = index >> 6;
        int bitPosition = index & 63;

        return (bitmap[longIndex] & (1 << bitPosition)) != 0;

    }

    public final int length() {
        return size;
    }
} 
```

我的失败测试：

```
public class CompactBooleanArrayTest {

    @Test
    public void testSimple() {

        int[] x = { 4, 56, 60 };

        CompactBooleanArray array = new CompactBooleanArray(100);

        for(int i : x) array.set(i, true);

        for(int i = 0; i < array.length(); i++) {
            System.out.println("I: " + i + " -> " + array.get(i));
            if (check(i, x)) {
                Assert.assertTrue(array.get(i));
            } else {
                Assert.assertFalse(array.get(i));
            }
        }
    }

    private boolean check(int value, int[] array) {
        for(int i : array) {
            if (value == i) return true;
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T05:50:15.193

如果不尝试，我会说你的 1 << bitPosition 等的转变失败了，因为你没有使用 1L。即 1 << 50 = 0, 1L << 50 = 2^50th

# c++ - boost::asio 如何确定要连接的端口？

> ID：13784971
> 
> 赞同：4
> 
> 时间：2012-12-09T05:37:51.213
> 
> 标签：c++, networking, boost

所以我决定在我的 C++ 课程之后向前迈出一步，学习如何做一些网络。

在按照如何使用 boost::asio 创建同步客户端的示例之后，一切都很顺利，但是当我试图弄清楚程序的哪个部分实际处理端口时，我感到很困惑。

我知道您输入了一个 IP 地址（例如，我使用 127.0.0.1 作为程序的参数。我通过命令行运行代码：`# client 127.0.0.1`

此外，代码的服务器端在端口 13 上运行，如下所示：http: [//www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tutdaytime2.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tutdaytime2.html)

这是网站的完整代码：（也可以在这里找到：http: [//www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tutdaytime1.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tutdaytime1.html)

```
//
// client.cpp
// ~~~~~~~~~~
//
// Copyright (c) 2003-2012 Christopher M. Kohlhoff (chris at kohlhoff dot com)
//
// Distributed under the Boost Software License, Version 1.0\. (See accompanying
// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
//

#include <iostream>
#include <boost/array.hpp>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

int main(int argc, char* argv[])
{
  try
  {
    if (argc != 2)
    {
      std::cerr << "Usage: client <host>" << std::endl;
      return 1;
    }

    boost::asio::io_service io_service;

    tcp::resolver resolver(io_service);
    tcp::resolver::query query(argv[1], "daytime");
    tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);

    tcp::socket socket(io_service);
    boost::asio::connect(socket, endpoint_iterator);

    for (;;)
    {
      boost::array<char, 128> buf;
      boost::system::error_code error;

      size_t len = socket.read_some(boost::asio::buffer(buf), error);

      if (error == boost::asio::error::eof)
        break; // Connection closed cleanly by peer.
      else if (error)
        throw boost::system::system_error(error); // Some other error.

      std::cout.write(buf.data(), len);
    }
  }
  catch (std::exception& e)
  {
    std::cerr << e.what() << std::endl;
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T05:44:17.237

端口在这一行中设置：

```
tcp::resolver::query query(argv[1], "daytime"); 
```

该字符串`"daytime"`引用了一个公认的日间协议名称，并且它使用了一个众所周知的端口。如果您在 Linux 或 Mac OSX 机器上，您可以检查文件`/etc/services`到名称到端口的映射。

# scala - 类型推断有多昂贵？

> ID：13784972
> 
> 赞同：7
> 
> 时间：2012-12-09T05:37:58.357
> 
> 标签：scala

我绝对对 Scala 类型推理引擎感到非常兴奋，但在现实世界的环境中：

1.  它有多大的性能回退？

2.  何时推断类型，在编译时还是运行时？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-09T09:02:46.960

Scala 精巧而强大的类型仅在编译期间存在（*）：它们从源代码（您提供它们的位置）解析、推断、检查，然后最终被丢弃。最后一个可能听起来很荒谬，但它是 JVM 的操作方式（请参阅[类型擦除](http://en.wikipedia.org/wiki/Type_erasure)），从语言设计者的角度来看非常有用。

因此，要回答您的问题：在运行时，类型是显式给出还是推断出来没有区别，唯一的区别在于编译程序需要多长时间。

(*) 2.10 版本将附带一个反射库，允许程序在运行时访问其类型信息；这增加了自由度——如果使用它，当然会在运行时消耗 CPU 周期——但不会改变上述任何一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T06:02:50.180

> 它有多大的性能回退？

运行时性能通常被认为可以与 Java 相媲美。[由于编译器的复杂性，](https://stackoverflow.com/a/3490538/390708)编译时间通常比 Java 更长。

> 何时推断类型，在编译时还是运行时？

在编译时。

在大约 8:50 到 12:50 的这段[视频中，Martin 谈到了在“现实世界”环境中的使用和性能。](http://www.youtube.com/watch?feature=player_detailpage&v=hiurd7KaSEI#t=546s)他指出，有许多公司使用 Scala，从小型初创公司到大型企业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T16:39:42.303

Martin Odersky 在这个答案中提到了这一点：[为什么 IntelliJ IDEA 编译 Scala 这么慢？](https://stackoverflow.com/questions/3606591/why-does-intellij-idea-compile-scala-so-slowly)“类型推断的成本很高，尤其是在涉及隐式搜索的情况下。”

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-09T14:25:56.690

问题是 Scala 中的编译时间比 Java 长的问题来自哪里。我很难说，因为我不是编译器构造专家。我能说的是，类型推断在 Kotlin 中显然并不昂贵，在 Groovy2.0 中也没有。让 Scala 变慢的一定是其他东西，比如搜索隐式。

# jsp - jsp如何连接到servlet对象

> ID：13784973
> 
> 赞同：0
> 
> 时间：2012-12-09T05:38:22.810
> 
> 标签：jsp, servlets, connection

我正在学习 JavaEE 并遇到问题。好像每个jsp页面后面都有一个Servlet对象。但我不明白这个 servlet 是从哪里来的。

例如假设有一个名为MyJsp.jsp 的jsp 页面，当我请求这个页面时，似乎有一个MyJsp_jsp.java。所以我想知道它来自哪里。

寻找有关 jsp 页面如何连接到 servlet 对象的一些详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T09:00:27.453

JSP 页面基本上是一个带有传统 HTML 和一些 Java 代码的网页。JSP 页面的文件扩展名是 .jsp 而不是 .html 或 .htm，它告诉服务器该页面需要特殊处理，这将由服务器扩展或插件完成。

当一个 JSP 页面被调用时，它会被（由 JSP 引擎）编译成一个 Java servlet。此时，servlet 由 servlet 引擎处理，就像任何其他 servlet 一样。servlet 引擎然后加载 servlet 类（使用类加载器）并执行它以创建要发送到浏览器的动态 HTML。servlet 创建任何必要的对象，并将任何对象作为字符串写入浏览器的输出流。

# django - 在 django 中使用模型表单更新记录

> ID：13784981
> 
> 赞同：0
> 
> 时间：2012-12-09T05:40:12.610
> 
> 标签：django, modelform, updatemodel

嗨，我正在更新现有记录，但每次我这样做时，都会说 `Truncated incorrect DOUBLE value: 'user1'` 我在这里粘贴我的视图和模型。请帮我

**模型**

```
class BasicDetails(models.Model):
   username = models.OneToOneField(User)
   name = models.CharField(max_length = 100, verbose_name = "Name")
   sex = models.CharField(max_length = 10, verbose_name = "Sex", choices = GENDER_CHOICES)
   dob = models.DateField(verbose_name = "Date of Birth")

   class Meta:
      db_table = u'wed_basicdetails'
   def __unicode__(self):
         return u'%s' % (self.username) 
```

**看法**

```
def editbasicdetails(request):
  if request.method == 'POST':
      username = User.objects.filter(username = request.user)
      instance = get_object_or_404(User, username = username)
      form = EditBasicDetailsForm(request.POST,instance=instance)
      if form.is_valid():
          form.save()
      return HttpResponseRedirect('/myprofile/')
  else:
      form = EditBasicDetailsForm(request.user)
  return shortcuts.render_to_response('editbasicdetails.html',locals(),
                                    context_instance = context.RequestContext(request)) 
```

**模型形式**

```
class EditBasicDetailsForm(forms.ModelForm):
  def __init__(self,user, *args, **kwargs):
      super(EditBasicDetailsForm, self).__init__(*args, **kwargs)

      userid = User.objects.filter(username = user).values('id')[0].get('id')
      self.fields['username'] = forms.CharField(initial = user,
                                              widget = forms.TextInput(attrs = {'readonly':'readonly'}))
  class Meta:
      model = BasicDetails 
```

在上面的视图中，我没有传递用户名，我只是从中获取用户名值，`request.user`我不确定我在这个简单的功能上做错了什么。

-维克拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:55:07.330

该错误可能与表单 wrt 模型的不一致行为有关。因为，数据库将 OneToOneField 存储为整数，将 CharField 存储为 varchar。

您不必重写表单**init**方法。您可以使用初始参数直接执行此操作。

```
form = EditBasicDetailsForm(initial = {'username' : request.user) 
```

更新：

在您的视图代码中，我建议您正确使用 HttpResponseRedirect 语句。否则，如果表单有效，它将不会再次显示。

```
if form.is_valid():
          form.save()
          return HttpResponseRedirect('/myprofile/') 
```

# shell - 更改输入文件参数和递归运行程序 - 使用 AWK 或 Shell 脚本？

> ID：13784983
> 
> 赞同：1
> 
> 时间：2012-12-09T05:40:24.997
> 
> 标签：shell, recursion, awk

我目前正在运行一个接受输入文件的程序。输入文件有各种参数，其中3个我需要更改，再次运行等。这3个参数的范围是一个15个值，另一个12个值，另一个10个值，所以我有15 * 12 * 10（ =1800) 我需要为程序制作的可能输入文件。输出文件名也需要与该运行的参数匹配。显然，手动创建 3375 个输入文件是不切实际的，不仅因为它会耗费时间，而且人为错误的风险也会很大。我需要以下帮助：

1.  改变我的输入文件的参数。我知道这可以使用 AWK 或使用 shell 脚本来完成。输入文件是纯文本（ascii）

2.  每次更改参数时递归运行脚本。假设我的输入文件如下所示：

    # 输入文件模型

    # A 的值

    1

    # B 的价值

    2

    # C 的值

    4

    # D 的价值

    12

假设我要更改的三个参数是 A、B 和 D。假设 A 的每个值间隔 5 个单位，并且我想运行 3 个值。我的 A 可能值将是 {1, 6, 11} 我的 B 可能值间隔 3 个单位，有 4 个值 {2, 5, 8, 11} 和我的 D 值间隔 1 并且有是其中两个 {12, 13} 允许重复值，我想要处理的集合是：

{1、2、12}

{1、5、12}

{1, 8, 12}

{1、11、12}

{1, 2, 13}

{1、5、13}

{1, 8, 13}

{1、11、13}

{6、2、12}

{6、5、12}

{6, 8, 12}

{6、11、12}

{6、2、13}

{6、5、13}

{6、8、13}

{6、11、13}

{11、2、12}

{11、5、12}

{11、8、12}

{11、11、12}

{11、2、13}

{11、5、13}

{11、8、13}

{11、11、13}

其中括号中的每个位置对应于 {A, B, D} 的值

所以我的两个问题本质上是： 1 使用更改的输入文件创建一个包装器以递归方式运行程序 2 更改三个变量，以便我获得每个组合并将相应的输入文件传递给程序。

这是我认为它应该在伪代码中的样子（我知道这是错误的，需要一些帮助）：

```
A = 1
B = 2
D = 12

for B<11, 
 for A<11, 
  for D<13, 
   B+3, A+5, D++, program input file

#input file mockup
#Value for A
Some Expression for {A}
#Value for B
Some Expression for {B}
#Value for C
4
#Value for D
Some Expression for {D}

outputdirectory: mkdir Run.ABD 
```

或类似的东西......

注意：我已经在另一个网站上发布了这个问题，看看是否有其他人可以在那里回答。我不是拖钓或众包；寻求真正的帮助。另外，如果有人感兴趣，我正在运行一个同震位移模型，我需要改变每次运行的深度、长度和位移。我假设整个介质具有线性滑移和均匀粘度。程序很好，可以开始了，我只需要想办法用可变参数改变我的输入文件。

编辑：

我意识到我的逻辑循环应该类似于：

```
A=1
B=2
D=12
While A<11
    While B<11
        While D<13
        D++
    B+3
A+5 
```

请让我知道这是否是正确的想法？我不知道如何存储变量，因此循环的每次迭代都会创建一个新的输入文件或输入参数。

或者可能是这样的？

```
A=1
While A<11
    B = 2
    While B<11
        D=12
        While D<13
        D++
    B+3
A+5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:03:11.617

老实说，每次我试图阅读您的描述时，我都会陷入困境，因为我迷失在术语和解释中，我对您要求递归解决方案但随后显示非递归算法感到困惑，但如果你说你只想生成一堆文件，每个文件包含 3 个字段，每个字段的值范围为：

*   字段 1 = 1 到 11 由 5 秒
*   字段 2 = 2 到 11 由 3 秒
*   字段 3 = 12 到 13 乘 1

并将每个组合存储在一个名为“outfileN”的单独文件中，其中 N 是从 1 开始的数字，那么就是：

```
awk 'BEGIN {
   for (i=1;i<=11;i+=5) {
      for (j=2;j<=11;j+=3) {
         for (k=12;k<=13;k+=1) {
            print i,j,k > (outfile ++n)
         }
      }
   }
}' 
```

如果这不能满足您的要求，请告诉我们它以何种方式失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T18:54:19.290

我完全不清楚为什么要为每组参数创建一个输入值，而不是简单地根据需要生成数据。也许您只是在寻找类似的东西：

```
#!/bin/bash

c=5
for (( a=1; a <= 11; a += 5 )); do
for (( b=2; b <= 11; b += 1 )); do
for (( d=12; d <= 13; d += 1 )); do
    cat << EOF |  # Pipe the data into the awk below
input file mockup
Value for A

$a
Value for B

$b
Value for C

$c
Value for D

$d
EOF
    awk 1 > output-$a-$b-$c-$d  # process with a trivial awk script
done
done
done 
```

如果要保留输入文件，只需将 cat 重定向到文件并处理该文件，而不是使用管道。

# jquery - jQuery .on() 问题

> ID：13784985
> 
> 赞同：1
> 
> 时间：2012-12-09T05:40:42.767
> 
> 标签：jquery

好的，伙计们，我之前使用过 .on 非常成功，但是，这次它没有按预期工作，因为它根本无法识别动态元素！

访问[http://www.MetalGains.com](http://www.MetalGains.com)查看问题。单击“查看演示”并使用演示凭据登录。如果您单击“铅笔”，您将看到编辑功能起作用。但是，如果您添加资产，然后单击添加的铅笔，您会发现它不起作用。

在某些时候，这行代码是动态添加的：

```
 <div class='edit-item'><a name='"+$id+"' href='#add-asset-"+status+"' class='edit'></a></div> 
```

我要调用的 javascript 在下面。请注意，它确实适用于页面加载，而不适用于任何动态。我错过了什么？

```
$(".edit-item .edit").on('click', function(){
    return false;
  }).each(function(){
            $(this).fancybox({
             afterClose: function(){
            //we have to remove this class so that if someone tries to add a new asset it will use the 
            //add script and not the update script
            $(".asset-form").removeClass("update");
            //We need to set the values back to empty so that they aren't prepopulated when someone 
            //tries to add an asset later.
            $(".asset-form :input[name='type']").val("");
            $(".asset-form :input[name='year']").val("");
            $(".asset-form :input[name='quantity']").val("");
            $(".asset-form :input[name='ounces']").val("");
            $(".asset-form :input[name='paid']").val("");
            $(".asset-form :input[name='date']").val("");
            $(".asset-form :input[name='notes']").val("");

            //we remove the hidden field that passes the asset id. 
            $(".asset-form :input[name='editId']").remove();

            }//end afterClose
    }); //end edit fancybox
}); //end each 
```

顺便说一句，这非常有效：

```
 $(".note-img").on('click', function(){
return false;
}).each(function(){
    $(this).fancybox();
    }); 
```

关于这个动态添加的内容：

```
 <a href='#note-"+$id+"' class='note-img'></a><div class='note' id='note-"+$id+"'>"+$notes+"</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T05:42:47.770

`on`使用事件委托的正确方法是：

```
$(document).on('click', '.edit-item .edit', function(){ 
```

或者：

```
$('#staticParent').on('click', '.edit-item .edit', function(){ 
```

如果`edit-item`是静态的：

```
$('.edit-item').on('click', '.edit', function(){ 
```

实际上`on`与旧的和不推荐使用的`live`方法不同，`live`它从文档对象委托事件，但是使用`on`方法您应该指定应该使用*哪个静态父元素*或*文档对象*进行事件委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:19:45.037

请参考以下代码。

```
$('.edit-item').on('click', '.edit', function(){}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T05:44:35.460

我之前通过在末尾添加一个选择器上下文来解决这个问题，就像这样......

```
$(".edit").on('click', '.edit-item', function(){ ... })}; 
```

# html - 表格数据标记应该是表格或 div

> ID：13784987
> 
> 赞同：-1
> 
> 时间：2012-12-09T05:40:52.410
> 
> 标签：html, tabular

我有一个像这里的图像的数据。我需要专家的建议，我应该以哪种方式制作 HTML 或 Divs。如果我选择 Div，我们能否实现表格默认提供的效果，我的意思是，如果列宽增加，整个列宽也会增加，就像高度一样，行高也会增加。

参考图片：

![](../Images/9fd2ce6e7c3e6c5c048fefc135d11567.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:26:07.223

这是桌子的工作！要将某些内容重叠在列的边缘，您可以使用绝对位置来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T08:04:06.910

您应该将表格用于表格数据，这是它们的预期目的。然而，这似乎更像是一个甘特图，因为单元格似乎偶尔会在列之间重叠。您可以使用绝对定位的 div 生成图表，但是您需要通过 javascript 手动处理所有调整大小和计算，以使其响应您所说的方式。有一个 jquery 插件可以让你创建 Gant Chats 在这里找到（[http://taitems.github.com/jQuery.Gantt/](http://taitems.github.com/jQuery.Gantt)），看起来很不错。

# python - 如何在 Python 中唯一标识媒体文件的内容，而不是元数据？

> ID：13784993
> 
> 赞同：2
> 
> 时间：2012-12-09T05:41:23.390
> 
> 标签：python, algorithm, audio, mp3, flac

我有一系列媒体文件，主要是音乐，其中大部分是多年前从 CD 导入的。这个集合已经在不同的媒体播放器、不同的文件系统、不同的计算机等之间传输了很多次。在这个过程中，一些曲目被意外复制了。我还不断尝试整理这些元数据并正确标记所有内容，因为当大部分内容最初是导入时，我没有花哨的媒体播放软件，甚至没有意识到 ID3 标签表明一切都只是“经典专辑“Album”中的曲目 %d”。

这会产生这样一种情况，即我有一些具有最新元数据的文件，但是我想删除的同一媒体文件的“重复”，其元数据尚未正确更新。由于元数据存在于文件中，因此这些文件的内容现在有所不同，并且像[liten2](http://code.google.com/p/liten2/)这样的工具不起作用。

*我的问题是：是否有一个库可以方便地提取文件的媒体内容*的唯一标识指纹（可能是某种加密哈希，但这不是硬性要求），而忽略元数据？如果是这样，我该如何使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T22:07:50.750

[Echoprint](http://echoprint.me/)是一种通过内容对音频进行指纹识别的免费方式——即它不依赖于元数据，也不依赖于字节精确的数据匹配。他们的常见问题解答有一个条目[“我想对一个大集合进行重复数据删除”](http://echoprint.me/start#deduplicate)。

我认为它的核心不是 python 本身，而是一个 Web API——但它们提供[了 pyechonest](https://github.com/echonest/pyechonest)库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T19:35:00.050

您可能需要深入了解音频文件（mp3、avi、mpg、ogg 等）的文件格式规范。对于 mp3，这将丢弃所有 ID3v2 元数据块。在文件中识别那些实际编码音频信息的块，然后对这些块进行哈希处理以进行比较。请记住，如果您有两个不同格式的同一曲目的文件，它们将不会被识别为同一个文件。此外，如果您有两次相同格式的相同曲目，但比特率不同，它们也不会相同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-22T20:51:47.193

如何（暂时）将文件转换为 WAV 格式并比较它们的哈希值？ID3 标签应该被剥离。有很多工具可以做到这一点，将这个过程嵌入到脚本中应该不会太困难。

# c++ - While 循环总是执行一次，但第二次可以正常工作。帮助？[c++]

> ID：13784995
> 
> 赞同：1
> 
> 时间：2012-12-09T05:42:08.403
> 
> 标签：c++

我在 C++ 中的 while 循环有问题。while 循环总是第一次执行，但是当程序到达 while 循环的 cin 时，while 循环完美地工作我想知道我做错了什么。提前致谢。如果问题是noobish，我也很抱歉。我还是个初学者。

```
cout<<"Would you like some ketchup? y/n"<<endl<<endl<<endl; //Ketchup
selection screen
cin>>optketchup;

while (optketchup != "yes" && optketchup != "no" && optketchup != "YES" && optketchup != "Yes"  && optketchup != "YEs"  && optketchup != "yEs"  && optketchup != "YeS"
     && optketchup != "yeS" &&  optketchup != "YeS"  && optketchup != "yES" && optketchup != "y"  && optketchup != "Y"  && optketchup != "No"  && optketchup != "nO"
      && optketchup != "NO"  && optketchup != "n"  && optketchup != "No");
{

    cout<<"You have entered an entered "<<optketchup<<" which is an invalid
 option. Please try again."<<endl;
    cin>>optketchup;

}

if (optketchup == "yes" || optketchup == "YES" || optketchup == "Yes"  || optketchup == "YEs"  || optketchup == "yEs"  || optketchup == "YeS"
     || optketchup == "yeS" ||  optketchup == "YeS"  || optketchup == "yES" || optketchup == "y"  || optketchup == "Y")
{
    slcketchup == "with";
}
else
{
    slcketchup == "without";
}

cout<<"Your sandwich shall be "<<slcketchup<<" ketchup."<<endl;

system ("pause"); 
```

再次提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T06:10:56.960

你有一个分号(';') 在`while`. 这就是问题所在。

不要写

```
while(.... lots of conditions ...);
{
    //stuff
} 
```

写

```
while(.... lots of conditions ...)
{
    //stuff
} 
```

注意第二个中缺少的`;`。

除此之外，如果您必须检查单词怎么办`Pneumonoultramicroscopicsilicovolcanoconiosis`。您最终会检查多少个大小写组合？相反，将输入转换为大写并与大写`YES`or `NO`or进行比较`PNEUMONOULTRAMICROSCOPICSILICOVOLCANOCONIOSIS`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T06:02:19.037

执行单行代码的控制语句可以用两种不同的方式编写。

```
if (optketchup == "yes") {
  slcketchup = "with";
} 
```

```
if (optketchup == "yes") slcketchup = "with"; 
```

以下代码也是有效的；不同之处在于当`optketchup`等于时没有任何指令可以执行`"yes"`。

```
if (optketchup == "yes"); 
```

对于其他控制语句也是如此，例如您的`while`.

此外，`=`是赋值运算符，`==`而是比较运算符。当您想使用第一个时，您正在使用后者。
然后，正如其他人已经指出的那样，只需转换`optketchup`为小写：您只需将小写值与 进行比较`"yes"`，而不是检查使用小写/大写字符混合编写的“是”的任何可能变体。

# javascript - 将一个数组的索引乘以另一个数组的对应索引。将所有结果加在一起。Javascript

> ID：13784996
> 
> 赞同：1
> 
> 时间：2012-12-09T05:42:27.233
> 
> 标签：javascript, xml, arrays

我有一个包含数量、项目名称、价格和总价的表格。商品名称和价格是我将从 XML 文件中检索的信息。数量字段是用户可以输入他们想要的任何数量的地方。

我需要做的是当用户输入某个商品的数量时，它将采用该数量并乘以该特定商品的价格，然后将其显示在“总价”字段中。然后，该总价格字段将被加在一起以给出小计。价格是从 XML 文件中检索的一组数字。数量根据用户而变化。他们不必购买所有物品。

例如：数量：3 项目 1：10 美元 -> 30 美元 数量：2 项目 2：5 美元 --> 10 美元 小计：40 美元所有这一切都会在用户输入他们的数量时发生。到目前为止，我将 XML 中的数据检索到一个数组中。并将用户 qty 放入另一个数组。但我不知道如何使它工作。谢谢你。

HTML 代码：

```
 <div id="order"> 
        <table class="bottomBorder" id="torder">
        <tr class="style3"><th align="center">Quantity</th>
            <th width="200px">Item Description</th>
            <th>Price</th>
            <th>Total Price</th> 

        <script>
    var xmlDoc = getXML();
    var x=xmlDoc.getElementsByTagName("item");

    for (i=0;i<x.length;i++)
    {
        var Qty = "Qty" + i;
        var totalprice = "totalprice" + i;

        document.write('<tr><td align="center">');
        document.write('<input type= "text" id="' + Qty +'" name="txtQty" size="2" maxlength="4"/>');
        document.write("</td><td>");
        document.write(x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue);
        document.write("</td><td>");
        document.write(x[i].getElementsByTagName("price")[0].childNodes[0].nodeValue);
        document.write("</td><td>");
        document.write('<span id="'+totalprice+'"></span>');
         document.write("</td></tr>");
        }
        </script>                       
        </table>

        <table class="bottomBorder">
          <tr>
            <td width="323" class="style4" align="right" >Subtotal</td>
            <td width="75" align="right" id="subtotal"></td>
          </tr>
           </table> 
```

Javascript代码：

```
 function QtyValue()
    {   
var Qtys =document.getElementById('torder').getElementsByTagName('input');
var Qty = [];//create array
var error2 = document.getElementById("errorinfo2");

for (var i = 0, l = Qtys.length; i < l; ++i) { //looping through txtqty input 
       if (Qtys[i].value.length) {
        Qty.push(Qtys[i].value); //pushing value into Qty array
        }
}

if(Qty.every(isNumeric) /*&& Qty.length!==0*/) //check to see if info entered in array Qty is a number and is not empty
{
  return Qty;
}else{
     error2.style.display="block";
     error2.innerHTML = "*Please enter a valid number for your quantity";
     return false;
}
    }

    //Getting value for price from productlist.xml into an array
    function Price()
    {
var xmlDoc = getXML();

// Pull out the quote and author elements
var nPrice = xmlDoc.getElementsByTagName('price');

    // Create our two arrays
var arrPrice=[];

    // Loop through each quote elements yanking out the values and pushing them into the array
    for (i=0; i<nPrice.length; i++)
    {
         arrPrice.push(nPrice[i].childNodes[0].nodeValue);
    }
    return arrPrice;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:11:46.800

假设您的两个数组由`QtyValue`and`Price`函数返回，您可以同时遍历这两个数组以获得小计。（保证它们的长度相同，对吗？）

```
var prices = Price();
var quantities = QtyValue();
var subtotal = 0;

for (var i = 0; i < prices.length; i++) {
    var itemTotal = prices[i] * quantities[i];

    // todo: display 'itemTotal' on page

    subtotal += itemTotal;
}

// todo: display 'subtotal' on page 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:15:43.860

尝试这个：

```
var total = 0;

if (Qty.length == arrPrice.length) {
    for (var i = 0; i < Qty.length; ++i) {
        total += (Qty[i] * arrPrice[i]);
    }
}

alert(total); 
```

# javascript - JS：嵌套函数获得外部函数参数的副本？

> ID：13784998
> 
> 赞同：4
> 
> 时间：2012-12-09T05:42:35.330
> 
> 标签：javascript, scope, nested-function

因此，通过以下代码，我向自己证明了嵌套函数确实获得了外部函数参数的副本：

```
 var o = {};
    (function(a,b,c,x){
        x.f = function(){
            return a.toString()+b.toString()+c.toString();
        }
    })(7,4,2,o);
    o.f(); 
```

代码产生

```
 742 
```

这意味着该`o.f`函数从匿名函数中获得 a、b 和 c 的副本。否则，我只会得到`undefinedundefinedundefined`

**我的问题是，**

*   首先，这总是正确的吗？还是有严格的条件？（比如，它必须是一个对象吗？等等）
*   此外，在 javascript 中还存在哪些其他类型的模糊范围？我很想知道（即第三次迭代呢？）
*   最后，我可以阅读一份解释 javascript 范围的高级概念的文档。有谁知道有什么好的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T06:13:54.770

您观察到的称为**词法范围**。这意味着JavaScript中某个范围内的变量的绑定是由变量在代码中出现的位置决定的。它总是正确的，在任何层面上都是正确的。唯一的主要例外是`this`值，它是**动态作用域**而不是词法作用域。动态范围意味着函数中的变量取决于调用函数的方式和时间。（请参阅[词汇范围和动态范围](http://en.wikipedia.org/wiki/Lexical_scope#Lexical_scoping_and_dynamic_scoping)。）

例子：

```
var o = { 
    a: function() {
        var x = 5;
        console.log(this, x);
        function b() {
            console.log(this, x);
        }
        b();
    }
};

o.a(); 
```

此示例的结果将是：

```
{Object o} 5
{window} 5 
```

换句话说，第一个`console.log`将记录`this`为对`o`对象的引用，而第二个`console.log`将记录`this`为对`window`对象的引用。但是，两者都将记录`x`为等于`5`。的值`this`是`window`在没有上下文的非严格模式下调用它时。所以`this`不是词法范围的，而是其他变量，比如`x`。要了解有关行为的更多信息，`this`请参阅[A Short Overview of`this`](https://stackoverflow.com/a/13666838/1662998) .

* * *

直接回答您的问题：

### 1\. 首先，这总是正确的吗？还是有严格的条件？（比如，它必须是一个对象吗？等等）

`this`是的，这是真的，除了`arguments`基于函数调用方式的变化。它不必是一个对象，所有变量都是词法范围的。

* * *

### 2\. 另外，javascript 中还有哪些类似这样的晦涩作用域？我很想知道（即第三次迭代呢？）

您可以随心所欲地深入——内部函数始终可以访问其外部函数的变量。

```
function a() {
    var x = 1;
    console.log('a:', x);
    return function b() {
        var y = 2;
        console.log('b:', x, y);
        return function c() {
            console.log('c:', x, y);
        };
    };
}

var foo = a();   // => logs 'a: 1'
var bar = foo(); // => logs 'b: 1 2'
bar();           // => logs 'c: 1 2' 
```

这实际上是另一个称为[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)的主题的一部分，当您从另一个函数中返回一个函数时会发生这种情况。

* * *

### 3\. 最后，我可以阅读一份解释 javascript 范围的高级概念的文档。有谁知道有什么好的吗？

我已经链接到几个资源。另一个不错的：

[MDN：函数和函数范围](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)（特别是关于[嵌套函数和闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope#Nested_functions_and_closures)的部分）。

**此外，阅读有关闭包**的任何内容都会使您受益，并且您可能还想查找**词法范围**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T05:57:08.740

您需要做的就是阅读闭包。[http://en.wikipedia.org/wiki/Closure_(computer_science](http://en.wikipedia.org/wiki/Closure_(computer_science) ) 内部函数没有获得该变量的副本，而是获得对该变量*的引用*。例子：

```
var o = {};
(function(a,b,c,x){
    x.f = function(){
        return a.toString()+b.toString()+c.toString();
    }
    a++;
})(7,4,2,o);
o.f(); 
```

产量

> 842

编辑：好的，也许这不是您需要阅读的*全部内容。*我只是认为值得证明这个概念对许多语言来说并不陌生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-10T06:54:09.540

我在代码中使用这个概念时犯了一个愚蠢的错误，并错误地将参数重新声明为变量。在这里发帖以防它帮助别人。

```
(function(){
var outerFunction=function(varA){
    console.debug('value of varA in outer function '+varA);
    var innerFunction = function(){
        console.debug('value of varA in inner function '+varA);
    }
    innerFunction();
};
outerFunction("hi");

var buggyOuterFunction=function(varA){
    console.debug('value of varA in buggy outer function '+varA);
    var buggyInnerFunction = function(){
        var varA = varA || "hello"; //BUG - do not redeclare
        console.debug('value of varA in buggy inner function '+varA);
    }
    buggyInnerFunction();
};
buggyOuterFunction("hi");
})(); 
```

输出：

```
value of varA in outer function hi
value of varA in inner function hi
value of varA in buggy outer function hi 
value of varA in buggy inner function hello 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T06:01:20.090

*   是的，这适用于所有类型。javascript 设计的这个元素称为“闭包”。在谷歌搜索其他阅读材料时使用它。
*   创建函数的嵌套深度没有语言限制，只有可维护性限制。通常在第 2 级之后，您会进入“封闭地狱”或“封闭意大利面”，是时候重构了。因此，您可以将函数嵌套 4 层，并从函数 4 中的代码访问函数 1 的参数。
    *   我想到了另外 2 个“晦涩难懂”的案例：
        *   如果您直接调用一个函数而没有显式`this`绑定，`this`则绑定到全局（窗口）对象。这被普遍认为是 javascript 中的严重缺陷之一。谨防。
        *   JavaScript 具有“函数提升”，这意味着即使实际的函数定义在同一范围内的源代码文件中进一步向下，也可以从范围的顶部引用函数。
*   只需阅读 Douglas Crockford 的[JavaScript: The Good Parts 即可](http://shop.oreilly.com/product/9780596517748.do)。还有许多很棒的教程和在线书籍免费提供，并且可以通过网络搜索轻松找到。只要确保它们是现代的（大部分时间不早于 2010 年编写）。