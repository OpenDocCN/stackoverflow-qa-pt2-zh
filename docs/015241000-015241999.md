# StackOverflow 问答 15241000-15241999

# android - Android flash xml 库

> ID：15241006
> 
> 赞同：1
> 
> 时间：2013-03-06T07:02:03.220
> 
> 标签：android, xml, actionscript-3, flash

我尝试在 android 中开发一个简单的 xml flash 库。当我尝试预览图像时它不起作用。有人能帮我吗？

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<galleryPackage>

        <image>

            <imgURL>/mnt/sdcard/SketchCraft/MyDrawing 1.png</imgURL>
    </image>

</galleryPackage> 
```

我不确定如何在 xml 中引用手机内存中的文件。我期待我的动作脚本和 xml 文件在这里出现很多错误。

这是我的动作

```
import flash.net.URLLoader;
import flash.events.Event;
import flash.display.Loader;
import flash.net.URLRequest;

var xmlRequest:URLRequest = new URLRequest("XMLcth.xml");
var xmlLoader:URLLoader = new URLLoader(xmlRequest);
var imgData:XML;
var imageLoader:Loader;
var rawImage:String;

var imgNum:Number = 0;

xmlLoader.addEventListener(Event.COMPLETE, xmlLoaded);

function xmlLoaded(event:Event):void{
    imgData= new XML(event.target.data);
    rawImage = imgData.image[imgNum].imgURL;
    imageLoader =new Loader();
    imageLoader.load(new URLRequest(rawImage));
    mc_image.addChild(imageLoader);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:44:43.240

根据上面的评论，您的 XML 格式错误且 ActionScript 无法读取。

将您的 XML 格式化如下：

```
<?xml version="1.0" encoding="utf-8"?>
<galleryPackage>
    <image>
        <imgURL><![CDATA[/mnt/sdcard/SketchCraft/MyDrawing 1.png]]></imgURL>
    </image>
</galleryPackage> 
```

您错过了`?`in XML 声明：

```
<?xml version="1.0" encoding="utf-8"> 
```

# java - Checkstyle working differently for same condition

> ID：15241009
> 
> 赞同：0
> 
> 时间：2013-03-06T07:02:29.377
> 
> 标签：java, eclipse, performance, checkstyle

On applying check style i am getting " hides a field" if the name of formal and actual parameters are same.

```
private String limitedDimensionId;

 /**
 * Sets the limited dimension id.
 * 
 * @param limitedDimensionId
 *            the new limited dimension id
 */
public void setLimitedDimensionId(final String limitedDimensionId) {
    this.limitedDimensionId = limitedDimensionId;
} 
```

However i am not getting the same issue in the following case:

```
private boolean fallBack;

 /**
 * @param isFallBack
 *            the isFallBack to set
 */
public void setFallBack(final boolean isFallBack) {
    this.fallBack = isFallBack;
} 
```

Both the conditions appear same to me. Still the discrepancy. Usually i change the name of the parameter variable to resolve this check style issue. But looking at the other case i am getting a hint that a more elegant solution is available. Any insights?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:05:44.903

The variable names are different:

`fallBack` vs `isFallBack`

> Usually i change the name of the parameter variable to resolve this check style issue

That's correct solution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:19:09.300

I would agree that giving them different names is more appropriate, however the "this" keyword in the "this.limitedDimensionid" should avoid the "hides a field" error. That's what it's for...

# c - 在C中执行特定时间后如何退出主函数

> ID：15241013
> 
> 赞同：0
> 
> 时间：2013-03-06T07:02:46.853
> 
> 标签：c

我的程序从互联网捕获网络流量以分析数据包的歧义。我正在使用 winPcap 库。现在我希望程序运行 2 分钟并自动退出程序，而无需手动关闭命令提示符控制台。你能提供我这样做的代码吗？谢谢你

代码如下：

```
int main()
{
    u_int i, res , inum ;
    u_char errbuf[PCAP_ERRBUF_SIZE] , buffer[100];
    u_char *pkt_data;
    time_t seconds;
    struct tm tbreak;
    pcap_if_t *alldevs, *d;
    pcap_t *fp;
    struct pcap_pkthdr *header;

    fopen_s(&logfile , "log.txt" , "w");

    if(logfile == NULL) 
    {
        printf("Unable to create file.");
    }

    /* The user didn't provide a packet source: Retrieve the local device list */
    if (pcap_findalldevs_ex(PCAP_SRC_IF_STRING, NULL, &alldevs, errbuf) == -1)
    {
        fprintf(stderr,"Error in pcap_findalldevs_ex: %s\n", errbuf);
        return -1;
    }

    i = 0;
    /* Print the list */
    for(d=alldevs; d; d=d->next)  
    {
        printf("%d. %s\n    ", ++i, d->name);

        if (d->description)
        {
            printf(" (%s)\n", d->description);
        }
        else
        {
            printf(" (No description available)\n");
        }
    }

    if (i==0)
    {
        fprintf(stderr,"No interfaces found! Exiting.\n");
        return -1;
    }

    printf("Enter the interface number you would like to sniff : ");
    scanf_s("%d" , &inum);

    /* Jump to the selected adapter */
    for (d=alldevs, i=0; i< inum-1 ;d=d->next, i++);

    /* Open the device */
    if ( (fp= pcap_open(d->name,
                        100 /*snaplen*/,
                        PCAP_OPENFLAG_PROMISCUOUS /*flags*/,
                        20 /*read timeout*/,
                        NULL /* remote authentication */,
                        errbuf)
                        ) == NULL)
    {
        fprintf(stderr,"\nError opening adapter\n");
        return -1;
    }

    //read packets in a loop :)
    while((res = pcap_next_ex( fp, &header, &pkt_data)) >= 0)
    {
        if(res == 0)
        {
            // Timeout elapsed
            continue;
        }
        seconds = header->ts.tv_sec;
        localtime_s( &tbreak , &seconds);
        strftime (buffer , 80 , "%d-%b-%Y %I:%M:%S %p" , &tbreak );
        //print pkt timestamp and pkt len
        //fprintf(logfile , "\nNext Packet : %ld:%ld (Packet Length : %ld bytes) " , header->ts.tv_sec, header->ts.tv_usec, header->len);
        fprintf(logfile , "\nNext Packet : %s.%ld (Packet Length : %ld bytes) " , buffer , header->ts.tv_usec, header->len);
        ProcessPacket(pkt_data , header->caplen);
    }

    if(res == -1)
    {
        fprintf(stderr, "Error reading the packets: %s\n" , pcap_geterr(fp) );
        return -1;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T07:04:44.437

```
#include <signal.h>
#include <stdlib.h>

void exitfunc(int sig)
{
    _exit();
}

int main(int argc, char **argv)
{
    signal(SIGALRM, exitfunc);
    alarm(120);

    return 0;
} 
```

应该管用

# ruby - Thread 和 Fiber 的奇怪行为

> ID：15241019
> 
> 赞同：2
> 
> 时间：2013-03-06T07:03:11.280
> 
> 标签：ruby, multithreading, fibers

这段代码：

```
Fiber.new do 
  Thread.current['a'] = 5

  p Thread.current.object_id
  p Thread.current['a']

  Fiber.new do 
    p Thread.current.object_id
    p Thread.current['a']
  end.resume

  p Thread.current.object_id
  p Thread.current['a']
end.resume 
```

显示以下结果：

```
3442840
5

3442840
nil

3442840
5 
```

为什么`current['a']`返回`nil`嵌套纤维？怎么解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:09:11.743

> `Thread#[]`并且`Thread#[]=`不是**thread-local 而是 fiber-local**。这种混淆在 Ruby 1.8 中不存在，因为纤维仅在 Ruby 1.9 之后才可用。Ruby 1.9 选择方法表现为 Fiber-local 以保存以下用于动态范围的惯用语。

— <a href="http://ruby-doc.org/core-2.0/Thread.html#method-i-5B-5D" rel="nofollow">线程类文档

# google-maps - 融合表数据采集与查看

> ID：15241029
> 
> 赞同：0
> 
> 时间：2013-03-06T07:03:43.433
> 
> 标签：google-maps, view, google-fusion-tables

我浏览了[这个链接](http://support.google.com/fusiontables/answer/2584135?hl=en)，并且在我的应用程序中需要同样的想法。我有一个主融合表，表 id = xxxxxxxxxxxxx，我从该表中为不同部门制作了几个视图。现在是否可以仅访问特定部门视图的融合表地图层？（即，当某个部门的人用他的帐户登录时，他应该只能查看他的数据地图）

# php - 如何使用php在Mysql中添加非英文字符

> ID：15241030
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:03:48.527
> 
> 标签：php, mysql

我可以插入一些非英语语言（印度语言），例如印地语马拉雅拉姆语等。它在 PHPMYADMIN 页面中正确显示。但是当我打开我的网页时，它显示为问号。我该如何解决这个错误..我尝试了标记为重复但无法正常工作的旧答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:08:26.690

您的数据库表的编码/字符集可能与您的网站不同。使用与您的 html-header 中相同的字符集设置表的编码，如下所示（将 utf-8 与您需要的交换）

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

# android - onCreateView 没有调用第二次选择选项卡的操作栏 TabsAdapter 中的选项卡？

> ID：15241031
> 
> 赞同：1
> 
> 时间：2013-03-06T07:03:49.547
> 
> 标签：android, tabs, android-fragments, adapter

我有一个使用片段和 ActionBarSherlock 构建的选项卡式应用程序。我有 3 个选项卡，有 3 个 ListFragment's 这就是正在发生的事情。

当我选择任何选项卡时，关联片段的 onCreate 方法会在第一次按预期调用，但不会在第二次调用。问题是下一个相邻选项卡调用了 onCreate 方法，但未选择选项卡。

单击 tab2 并调用 tab3 的 onCreate 但不调用 tab2。

实际上我的要求是，当我更改tab1中的一些数据时，意味着fragment1。这些更改在 fragment2 中不受影响，当我选择 tab2 (fragment2) 时，这意味着 fragment2 onCreate() 没有调用。为什么它没有正确刷新片段。这是我正在使用的适配器。

```
private class TabsAdapter extends FragmentPagerAdapter implements ViewPager.OnPageChangeListener, ActionBar.TabListener {

    public TabsAdapter(FragmentActivity activity, ActionBar actionBar, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = actionBar;
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, int tabId) {
        mTabs.add(clss.getName());
        mTabsId.add(tabId);
        mActionBar.addTab(tab.setTabListener(this));
        notifyDataSetChanged();
    }

    public Integer getIdForPosition(int position) {
        if (position >= 0 && position < mTabsId.size()) {
            return mTabsId.get(position);
        }
        return null;
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        //TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, mTabs.get(position), new Bundle());
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Log.i(TAG, "*******tab selected*******" +tab);
        clearDetails();
        if (mViewPager.getCurrentItem() != tab.getPosition()) {
            mViewPager.setCurrentItem(tab.getPosition(), true);
        }
    }

    @Override
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
        if (mCurrentPosition == position) {          
        }
        mNextPosition = position;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {      
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {          
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {          
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:29:45.197

从[这个页面](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)：

> 用户访问的每个页面的片段将保存在内存中，尽管它的视图层次结构在不可见时可能会被破坏。

这意味着用户不可见的片段仍保留在内存中，因此重新显示时不会调用它们的 onCreate 方法。[您可以通过将 ViewPager 的离屏页面限制](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)设置为 0来强制它们在切换页面时被踢出内存。

更好的方法可能是使用在 Fragment 之间共享的某种外部数据模型，然后使用 onPageSelected 方法告诉 Fragment 在进入视图时根据数据模型更新自身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:34:53.317

当您在**Tab:(n)**上时，只有**Tab:(n-1)**和**Tab:(n+1)**会在内存中存活，以优化内存使用。休息所有选项卡将被销毁，这就是为什么当你回到第一个选项卡时，它`onCreateView`被再次调用。

实际上**Tab:1**即使`onCreateView`您单击**Tab:2**也会被调用，因为它是附近的 Tab。

**我得到的一个解决方案是：**

改变. `OffscreenPageLimit`_ `ViewPager`它的默认值为`1`

尝试将其更改为`0`. 应该可以。但是如果没有

**使用回调**

```
 @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    } 
```

# memory - 为什么全局内存版本比我的 CUDA 代码中的常量内存快？

> ID：15241032
> 
> 赞同：1
> 
> 时间：2013-03-06T07:03:54.890
> 
> 标签：memory, optimization, cuda

我正在开发一些 CUDA 程序，我想使用常量内存来加快计算速度，但事实证明，使用常量内存会使我的代码慢约 30%。

我知道恒定内存擅长将读取广播到整个经线，我认为我的程序可以利用它。

这是常量内存代码：

```
__constant__ float4 constPlanes[MAX_PLANES_COUNT];

__global__ void faultsKernelConstantMem(const float3* vertices, unsigned int vertsCount, int* displacements, unsigned int planesCount) {

    unsigned int blockId = __mul24(blockIdx.y, gridDim.x) + blockIdx.x;
    unsigned int vertexIndex = __mul24(blockId, blockDim.x) + threadIdx.x;

    if (vertexIndex >= vertsCount) {
        return;
    }

    float3 v = vertices[vertexIndex];
    int displacementSteps = displacements[vertexIndex];

    //__syncthreads();

    for (unsigned int planeIndex = 0; planeIndex < planesCount; ++planeIndex) {
        float4 plane = constPlanes[planeIndex];
        if (v.x * plane.x + v.y * plane.y + v.z * plane.z + plane.w > 0) {
            ++displacementSteps;
        }
        else {
            --displacementSteps;
        }
    }

    displacements[vertexIndex] = displacementSteps;
} 
```

全局内存代码是相同的，但它多了一个参数（带有指向平面数组的指针）并使用它而不是全局数组。

我以为那些第一个全局内存读取

```
float3 v = vertices[vertexIndex];
int displacementSteps = displacements[vertexIndex]; 
```

可能会导致线程的“去同步化”，然后它们不会利用持续内存读取的广播，所以我尝试调用 __syncthreads(); 在读取常量内存之前，但它没有改变任何东西。

怎么了？提前致谢！

系统：

*   CUDA 驱动程序版本：5.0
*   CUDA 能力：2.0

参数：

*   顶点数：~250 万
*   飞机数量：1024

结果：

*   常量内存版本：46 毫秒
*   全局内存版本：35 毫秒

编辑：

因此，我尝试了很多方法来使常量内存更快，例如：

1）注释掉两个全局内存读取，看看它们是否有任何影响，它们没有。全局内存仍然更快。

2) 每个线程处理更多的顶点（从 8 个到 64 个）以利用 CM 缓存。这甚至比每个线程一个顶点还要慢。

2b) 使用共享内存来存储位移和顶点 - 在开始时加载所有这些，处理并保存所有位移。同样，比显示的 CM 示例慢。

经过这次经历，我真的不明白 CM 读取广播是如何工作的，以及如何在我的代码中正确“使用”。这段代码可能无法用 CM 优化。

编辑2：

又一天的调整，我试过：

3）每个线程处理更多的顶点（8到64），内存合并（每个线程的增量等于系统中的线程总数）——这比增量等于1提供更好的结果，但仍然没有加速

4) 替换这个 if 语句

```
if (v.x * plane.x + v.y * plane.y + v.z * plane.z + plane.w > 0) {
    ++displacementSteps;
}
else {
    --displacementSteps;
} 
```

这是用一点点数学来给出“不可预测”的结果，以避免使用以下代码进行分支：

```
float dist = v.x * plane.x + v.y * plane.y + v.z * plane.z + plane.w;
int distInt = (int)(dist * (1 << 29));  // distance is in range (0 - 2), stretch it to int range
int sign = 1 | (distInt >> (sizeof(int) * CHAR_BIT - 1));  // compute sign without using ifs
displacementSteps += sign; 
```

不幸的是，这比使用 if so ifs 并没有我想象的那么大的邪恶要慢很多（~30%）。

编辑3：

我得出这个问题的结论是，这个问题可能无法通过使用常量内存来改善，这些是我的结果*：

![全局和恒定内存性能图](../Images/21207919a38130ca071f732a985e5e4b.png)

*时间报告为 15 次独立测量的中值。当常量内存不足以保存所有平面（4096 和 8192）时，内核被多次调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:33:13.933

虽然计算能力 2.0 芯片有 64k 的常量内存，但每个多处理器只有 8k 的常量内存缓存。您的代码的每个线程都需要访问所有 16k 的常量内存，因此您会因缓存未命中而损失性能。为了有效地为平面数据使用常量内存，您需要重新构建您的实现。

# php - 如何将 javascript 数组传递给 onclick="('here')"？

> ID：15241033
> 
> 赞同：0
> 
> 时间：2013-03-06T07:03:55.093
> 
> 标签：php, javascript, html, onclick

我有一个程序需要我不断地将阵列从屏幕来回发送到服务器。数组很重要，所以我需要它。

因此，它从 onclick 中的 php 数组开始 -> 它转到 javascript 并再次调用 php 函数，然后将其返回给 javascript 函数。这就是我迷路的地方。返回 php 数组后，我试图将其放回 onclick 中，以便当用户再次单击时，新数组与 onclick 一起发送。

我该怎么做呢？

到目前为止我所拥有的：

在 javascript 中，收到成功消息并且 PHP 函数提供新数组后，我设置了类似这样的设置，其中 msg 保存值。msg.question_id 只保存一个整数，msg.array 保存一个 php 数组。

```
document.getElementById('buttons').innerHTML ="<a href='javascript:void(0)' onclick=\"movie_guess('yes',"+msg.question_id+","+msg.array+")\"><img  src=\"/assets/yes.png\" ></a><a href=\"javascript:void(0)\" onclick=\"movie_guess('no',"+msg.question_id+","+msg.array+")\"><img  src=\"/assets/no.png\" ></a> "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:26:05.620

好吧，我猜你不应该在 ajax 响应中返回 PHP 数组。您可以将其作为带有分隔符的字符串发送。成功响应后，您可以拆分它们并创建一个 javascript 数组。您也可以使用 JSON。对其进行编码以访问它。

```
$phpArr=( 0 => 'Zero', 1 => 'One', 2 => 'Two'); // PHP Code
var jsArr= <?php echo json_encode($phpArr); ?>; // Javascript Code
for($i=0;<stop-condition>;$i++){      alert(jsArr[i]);  } // Javascript Code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:33:08.820

这是您要添加的元素，正确缩进：

```
<a href='javascript:void(0)' onclick=\"movie_guess('yes',"+msg.question_id+","+msg.array+")\">
  <img  src=\"/assets/yes.png\" >
</a>
<a href=\"javascript:void(0)\" onclick=\"movie_guess('no',"+msg.question_id+","+msg.array+")\">
  <img  src=\"/assets/no.png\" >
</a> 
```

相反，您可以在没有处理程序的情况下添加它（我也用作`#`链接目标；还要注意我如何避免转义引号以及如何将长字符串拆分为多行）：

```
var buttons = document.getElementById('buttons');
buttons.innerHTML = 
  '<a href="#"><img src="/assets/yes.png"></a>'+
  '<a href="#"><img src="/assets/no.png"></a>' 
```

然后将事件处理程序添加为函数。这可以提高性能并让您传递当前范围内可见的任何内容（我假设`msg`它是一个 javascript 对象并且它不会改变）。`addEventListener`还有其他好处`onclick=function(){...}`：

```
var links = buttons.getElementsByTagName("a");
links[0].addEventListener("click", function(){
  movie_guess('yes', mgs.question_id, msg.array);
});
links[1].addEventListener("click", function(){
  movie_guess('no', mgs.question_id, msg.array);
}); 
```

* * *

更长但更快的版本是完全不触摸`innerHTML`，而是操作 DOM：

```
var buttons = document.getElementById('buttons');
var aYes = document.createElement("a");
aYes.href = "#";
aYes.addEventListener(...);
var imgYes = document.createElement("img");
imgYes.src = "/assets/yes.png";
aYes.appendChild(imgYes);
buttons.appendChild(aYes);
var aNo = document.createElement("a");
... 
```

# javascript - 如何显示选定按钮的值？

> ID：15241038
> 
> 赞同：0
> 
> 时间：2013-03-06T07:04:11.160
> 
> 标签：javascript, jquery, css

以下代码创建一个按钮，当单击其中一个按钮时，它会更改颜色，每个按钮都有自己的值。因此，如果单击我的 HTML 页面，我想显示所选按钮的值，如何管理它？

```
function createButtons(tbID, tbClass, tbType, tbValue, onClick) {
    return '\n<input '
            + (tbID ? ' id=\'' + tbID + '\'' : '')
            + (tbClass ? ' class=\'' + tbClass + '\'' : '')
            + (tbType ? ' type=\'' + tbType + '\'' : '')
            + (tbValue ? ' value=\'' + tbValue + '\'' : '')
            + (onClick ? ' onclick=\'toggle(this);' + onClick + '\'' : '')
            + '>';
}

function toggle(ths) {
  $(ths).toggleClass("btnColor");
   $("#tb").toggleClass("btnColorR");  
}

function DisplayButtons(cableData) {
  var newContent = '';
  $.each(cableData,
    function (i, item) {
      newContent += createButtons("tb" + item.CommonCable, null, "submit",       item.CommonCable,toggle);
  });
  $("#Categories").html(newContent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:12:24.920

`$(ths).val()`或者`$(ths).attr('val')`会给你带来价值。

[**演示**](http://jsfiddle.net/nbeZ2/)

# sql - 删除自 在哪里 像 微软访问

> ID：15241042
> 
> 赞同：0
> 
> 时间：2013-03-06T07:04:27.407
> 
> 标签：sql, ms-access, ms-access-2010, sql-delete

我正在使用以下代码过滤掉我的标签列表中的一些列：

```
DELETE FROM TagSubs
WHERE TAGNAME LIKE '*\CMD\*' OR '*\PAR\*' 
```

现在我认为这只会删除所有这样组成的行：

```
SLKRSL1_S1\SVS_AK\UVS01\CMD\BPO_ID 
```

和

```
SLKRSL1_S1\SVS_AK\IVS01\PAR\Knipper_Tijd 
```

但由于某种原因，它只是删除了我拥有的每一行。还有像这样的：

```
SLKRSL1_S1\SVS_AK\KKL\STS\Status 
```

甚至不包含 \cmd\ 或 \par\

我的代码无法正常工作的原因是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:06:36.717

试试这个，

```
DELETE 
FROM TagSubs
WHERE TAGNAME LIKE '*\CMD\*' OR 
      TAGNAME LIKE '*\PAR\*' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:09:43.947

你有没有尝试过

```
DELETE FROM TagSubs WHERE TagSubs.TAGNAME LIKE '%\CMD\%' OR TagSubs.TAGNAME LIKE '%\PAR\%' 
```

[http://msdn.microsoft.com/ru-ru/library/ms179859.aspx](http://msdn.microsoft.com/ru-ru/library/ms179859.aspx)

# ios - 设置 Box APi 密钥时应用程序崩溃

> ID：15241046
> 
> 赞同：0
> 
> 时间：2013-03-06T07:04:32.853
> 
> 标签：ios

我在 box.com 上通过应用程序注册并获取 API 密钥并开始在我的 xcode 项目中使用它，但是在设置 BoxAPI 时应用程序崩溃了：

```
[Box setBoxAPIKey:@"insert_key_here"];. 
```

错误：

> -[NSURL initFileURLWithPath:]: 无字符串参数

不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T10:05:33.257

这很简单。按着这些次序

1）转到您的目标构建设置

2）单击添加构建阶段（在右下角）并选择添加运行脚本

3）在编辑文本框中复制粘贴此脚本

```
#!/bin/bash

echo "Copy Box database schema into bundle"
cp -fr ./Box.framework/Resources/BoxCoreDataStore.momd "${BUILT_PRODUCTS_DIR}/${CONTENTS_FOLDER_PATH}/BoxCoreDataStore.momd" 
```

完成此操作后单击构建，您就完成了。

快乐编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T06:21:56.520

如果有人面临与此相同的问题，则解决方法是：

您需要将 Box.framework/Resources/ **BoxCoreDataStore.momd**文件夹中的文件添加到您的应用程序包中。

添加“复制文件”阶段并指定 Destination = Executables, Subpath = ./BoxCoreDataStore.momd 然后添加上述文件夹中的所有文件。

# .net - 如何查找所选节点是否是树视图的第一个节点

> ID：15241047
> 
> 赞同：1
> 
> 时间：2013-03-06T07:04:38.313
> 
> 标签：.net, vb.net, winforms

我正在使用一个树视图，其中我有许多父节点和子节点.. 在树视图 keydown 事件中，我使用以下代码在给出 keydown 和 keyup 时选择下一个节点

```
 Private Sub Treeview1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Treeview1.KeyDown
        If e.KeyCode = Keys.Up Then
            Treeview1.Select()
        ElseIf e.KeyCode = Keys.Down Then
            Treeview1.Select()
        End If
    End Sub 
```

( `Treeview1.Select()`) Now when the selection reaches the very first node, I want to focus previous control of treeview, but I can't check the selected node is first node of treeview. 谁能帮我找到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T07:16:47.107

您可以处理`AfterSelect`事件以找出它

```
Private Sub Treeview1_AfterSelect(sender As Object, e As TreeViewEventArgs)
    If e.Node = Treeview1.Nodes(0) Then
        do something
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:20:57.660

您还可以检查[TreeView.SelectedNode](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.selectednode.aspx)的[TreeNode.PrevNode](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.prevnode.aspx)或[TreeNode.NextNode](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.nextnode.aspx)

# highcharts - 为什么 Highcharts 不接受我的“最大值”？

> ID：15241049
> 
> 赞同：4
> 
> 时间：2013-03-06T07:04:43.673
> 
> 标签：highcharts, max

摆弄我的图表，我没有成功说服 Highcharts 将 y 轴停止在 5 的值处。它仍然继续只在 6 处停止。[这是小提琴](http://fiddle.jshell.net/luftikus143/wjq9b/1/)。我设置

```
 yAxis:
 { 
    max: 5
 } 
```

但它被忽略了。感谢您的任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:53:16.660

尝试添加`endOnTick:false`到 y 轴。

用于[**`endOnTick`**](http://api.highcharts.com/highcharts#yAxis.endOnTick).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:37:51.200

您还可以使用该功能`setExtremes`

例如，在 load 事件中：

```
 // ...the setting object:

 // some settings...

chart:{
        renderTo: 'container',
        type: 'column',
        spacingBottom: 60,
        marginLeft: 50,
        marginTop: 70,
        events: {
                   load:function(event){                      
                                          var yAxis0=this.yAxis[0];
                                          yAxis0.setExtremes(0, 5 , true, true);
                                       }
                }
},

// other settings.... 
```

**这种方法的优点是您可以动态更改它（而不仅仅是在启动阶段）**

# spring - 多个弹簧控制器的最佳实践。我应该遵循基于功能还是基于用户？

> ID：15241054
> 
> 赞同：2
> 
> 时间：2013-03-06T07:04:58.930
> 
> 标签：spring, rest, controller

我打算将我现有的弹簧控制器分成多个。遵循这种方法的最佳实践是什么。应该根据功能拆分它们吗？还是按将执行操作的用户拆分？而且我应该更改映射 URL 吗？或者为两个控制器使用相同的 URL，因为方法级别我将再次拥有不同的映射 URL。

任何回复将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:11:43.713

与您的问题相关的良好做法...

1.  特定于模块的控制器。

2.  具有基于控制器的映射 url

    例如）PatientController --> ../../patient/save 和 ../../patient/edit

    /患者用于控制器

    /save 和 /edit 定义方法

3.  您可以添加活动日志以监控用户类型及其操作。

# javascript - 使用 WebViewJavascriptBridge 时出现 EXEC_BAD_ACCESS 错误

> ID：15241057
> 
> 赞同：0
> 
> 时间：2013-03-06T07:05:10.590
> 
> 标签：javascript, ios, objective-c

我是一个非常新的 iOS 开发人员（我几天前才开始），我正在尝试将[WebViewJavascriptBridge 类](https://github.com/marcuswestin/WebViewJavascriptBridge/)与我的 Storyboard 上的 UIWebView 一起使用。每当我尝试使用它时，都会收到 EXEC_BAD_ACCESS 错误。

麻烦线似乎是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    WebViewJavascriptBridge* bridge = [WebViewJavascriptBridge bridgeForWebView:webView handler:^(id data, WVJBResponseCallback responseCallback) {
        NSLog(@"Received message from javascript: %@", data);
        responseCallback(@"Right back atcha");
    }];

    webView.scrollView.bounces = NO;

    [[UIApplication sharedApplication] setStatusBarHidden:YES];

    NSString *path = [[NSBundle mainBundle] bundlePath];
    path = [NSString stringWithFormat:@"%@/%s", path, "htdocs/index.html"];
    NSURL *URL = [NSURL fileURLWithPath:path];

    [webView loadRequest:[[NSURLRequest alloc] initWithURL:URL]];
} 
```

准确的说是最后一行。如果我不提出该请求，我不会收到错误消息。我已经用刚刚在 Objective-C 中创建的 UIWebView 进行了尝试，但仍然出现错误，尽管也许我做错了。

有什么建议么？

**编辑：**

存放webView的方法就是这个代码+参考outlet。

```
@interface mcViewController : UIViewController
    {
        IBOutlet UIWebView *webView;
    }
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:06:32.530

`EXC_BAD_ACCESS`通常在您尝试访问已被释放的目标 C 对象时发生。我从您发布的代码中看不到问题，因此实际问题可能在其他地方。检查您的属性 - 是否应该以`strong`这种方式实际声明所有内容？

请[启用僵尸](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)以获取有关释放后访问的对象类型的信息。

在哪里`webView`声明，如何声明？

我认为您正在使用ARC？

**更新**

好的，我想我现在看到了问题所在。

您将麻烦的对象声明为局部变量：

```
WebViewJavascriptBridge* bridge = ... 
```

这意味着一旦离开该函数范围（即到达函数的末尾），该对象就可以被释放，并且是。

尝试为您声明一个强大的属性`bridge`。然后它不会被过早地释放。例如：

```
@property (strong, nonatomic) WebViewJavascriptBridge* bridge; 
```

然后在您的代码中：

```
self.bridge = ... // the creation code 
```

一旦你完成了你的对象，不要忘记释放它：

```
self.bridge = nil; 
```

# image - 将图像上传到数据库时出错

> ID：15241059
> 
> 赞同：0
> 
> 时间：2013-03-06T07:05:22.713
> 
> 标签：image, exception, file-upload, jdbc, upload

当我尝试使用以下代码上传图像时，出现以下错误：**java.sql.SQLException: ORA-01460: unimplemented or unreasonable conversion requested**

```
 File image = new File("D:/"+fileName);      
    preparedStatement = connection.prepareStatement(query);
    preparedStatement.setString(1,"Ayush");   
    fis = new FileInputStream(image);
    preparedStatement.setBinaryStream(2, (InputStream)fis, (int)(image.length()));

    int s = preparedStatement.executeUpdate();
    if(s>0) {
        System.out.println("Uploaded successfully !");
        flag = true;
    }
    else {
        System.out.println("unsucessfull to upload image.");
        flag = false;
    } 
```

请帮帮我。

数据库脚本： **CREATE TABLE ESTMT_SAVE_IMAGE (NAME VARCHAR2(50), IMAGE BLOB)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:16:34.237

它的第一个原因是不兼容的转换，但是在看到您的数据库脚本之后，我假设您没有在脚本中进行任何转换。
ORA-01460 还有其他报告的原因：

*不兼容的字符集会导致 ORA-01460*

*使用 SQL Developer，尝试将超过 4000 字节的字符串传递给绑定变量值可能会导致 ORA-01460*

*使用 ODP，用户从 10.2 客户端和 10.2 ODP 移动到 11.1 客户端和 11.1.0.6.10 ODP 报告 ORA-01460 错误。这是一个应该通过将 ODP 修补到最新版本来修复的错误。*

[请看这个](http://www.dba-oracle.com/t_ora_01460_unimplemented_or_unreasonable_conversion_requested.htm)

# loops - 使用多个循环是否与使用一个执行多项操作的循环具有相同的性能？

> ID：15241060
> 
> 赞同：1
> 
> 时间：2013-03-06T07:05:29.187
> 
> 标签：loops

这是：

```
int x=0;
for (int i=0;i<100;i++) 
    x++;
for (int i=0;i<100;i++) 
    x--;
for (int i=0;i<100;i++) 
    x++;
return x; 
```

与此相同：

```
int x=0;
for (int i=0;i<100;i++){
    x++;
    x--;
    x++;
}
return x; 
```

注意：这只是一个例子，真正的循环会复杂得多。

那么这两个循环是相同的还是第二个更快？

**编辑：** Java 或 C++。我想知道两者。
我不知道编译器实际上会优化代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:39:50.623

未优化：三个循环需要更长的时间，因为有*三*组循环操作码。

优化，它取决于优化器。一个好的优化器可能足够聪明，能够意识到`x++;x--;`单循环版本中的语句相互抵消并消除它们。一个非常聪明的优化器可能能够用单独的循环做同样的事情。一个*非常*聪明的优化器可能会弄清楚代码在做什么，然后将整个块替换为`return 100;` *（请参阅下面的添加注释）*

但优化的实际答案通常是：fuhgeddaboutit。如果您的代码能够正确完成其工作，并且速度足够快而有用，请不要理会它。只有当实际测试表明它太慢时，您才应该分析以识别瓶颈并用更高效的代码替换它们。（或者完全是一个更好的算法。）

程序员很昂贵，CPU 周期很便宜，而且还有很多其他任务可以获得更大的回报。写起来也更有趣。

* * *

关于“可笑的智能优化器”位：D 语言提供编译时函数评估。*CTFE 允许您在构建时*使用该语言的几乎全部功能来计算某些内容，然后仅将计算出的答案插入运行时代码中。换句话说，您可以将*整个编译器*显式转换为选定代码块的优化器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:37:04.977

如果您将每个递增、递减、赋值和比较算作一个操作，那么您的第一个示例有大约 900 个操作，而您的第二个示例有大约 500 个操作。也就是说，如果代码按原样执行而不是优化。哪个性能更高应该很明显。

实际上，代码可能会或可能不会被编译器优化，不同语言的不同编译器在优化方面会做完全不同的工作。

# jquery - 如何在jQuery中将名称为数组的隐藏字段的值设置为？

> ID：15241065
> 
> 赞同：1
> 
> 时间：2013-03-06T07:05:49.560
> 
> 标签：jquery, hidden-field

这是我拥有的隐藏字段：`<input type="hidden" value="" name="name[]">`

我试过这个 jQuery:`$(input[type=hidden]).val('0');`它似乎工作正常。

我想知道我是否可以使用：

1) 两者的组合`input[type=hidden]`和`input[name=name]`在单个查询中

或者

2）只使用类似的东西`$(input[name=name]).val('0');`？

以上两个似乎都不起作用。是因为 name[] 是一个数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:10:21.830

您可以这样做，但由于名称包含括号，您必须执行以下操作：

```
$('input[type=hidden]')
// Or
$('input[name="name[]"]')
// Or
$('input[type=hidden][name="name[]"]') 
```

这 3 个选择器实际上正在工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:10:42.810

试试这个[http://jsfiddle.net/naveendalmeida/cgJkr/](http://jsfiddle.net/naveendalmeida/cgJkr/)

```
$('input[name="' + name + '[]"]').each(function() {

    $(this).val('Some value');

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:10:54.820

用这个：

```
 $(input[name="name[]"]).val('0'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T07:14:17.897

你可以这样写

```
$("input[type='hidden'][name='name[]']").val('hello'); 
```

希望它有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T07:14:23.057

你可以这样做

```
$('input[type="hidden"][name*="name"]').val('0'); 
```

这将检查每个`input`具有**等于**的类型和具有**包含**在值中的`hidden`名称的输入。 **`name`**

 **```
$('input[type=hidden][name="name[]"]') 
```

这将检查每个`input`类型为**等于**的`hidden`输入和值中名称为**等于** `name[]`的输入。

您可以进行任何您想要的组合以获取更多信息，请查看 jquery 多属性选择器 API 文档 [http://api.jquery.com/multiple-attribute-selector/](http://api.jquery.com/multiple-attribute-selector/)

[见小提琴](http://jsfiddle.net/SDAbC/)**

# maven - 使用Maven时如何从jar文件中排除一些设置文件？

> ID：15241067
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:06:12.420
> 
> 标签：maven

由于测试环境和开发环境不同，并且测试人员可能会更改 src/lib 中的设置文件，我如何设置 Maven 以确保这些设置从 Maven 生成的文件 jar 中排除但放在某个文件夹中? 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:21:52.257

该`src/lib`目录不包含在工件中，除非您明确告诉 Maven 这样做。如果您将这些资源用作测试资源，则应将它们放在下面`src/test/resources`以避免任何可能的混淆。此外，如果需要，您可以为不同类型的测试提供 Maven 配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T11:46:33.597

**src/lib**文件夹通常不包含在创建的 jar 文件中。

# android - 如何在 android 中使用 SQLite 数据库生成不同类型的报告？

> ID：15241068
> 
> 赞同：4
> 
> 时间：2013-03-06T07:06:13.180
> 
> 标签：android, report

我正在开发一个 android 应用程序，我需要在其中生成各种格式的不同类型的报告。我想生成 PDF、XLS、DOC 和文本文件格式的报告。所有数据都存储在 SQLite 数据库中。请指导我如何在android中实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:16:31.287

您好，您可以使用以下代码生成 PDF 报告

```
 import java.io.File;
   import java.io.FileOutputStream;
   import java.io.IOException;
   import java.net.URL;
   import java.util.Date;

   import com.itextpdf.text.Anchor;
   import com.itextpdf.text.BadElementException;
   import com.itextpdf.text.BaseColor;
   import com.itextpdf.text.Chapter;
   import com.itextpdf.text.Document;
   import com.itextpdf.text.DocumentException;
   import com.itextpdf.text.Element;
   import com.itextpdf.text.Font;
   import com.itextpdf.text.Image;
   import com.itextpdf.text.List;
   import com.itextpdf.text.ListItem;
   import com.itextpdf.text.Paragraph;
   import com.itextpdf.text.Phrase;
   import com.itextpdf.text.Section;
   import com.itextpdf.text.pdf.PdfImportedPage;
   import com.itextpdf.text.pdf.PdfPCell;
   import com.itextpdf.text.pdf.PdfPTable;
   import com.itextpdf.text.pdf.PdfReader;
   import com.itextpdf.text.pdf.PdfWriter;

   import android.app.Activity;
   import android.os.Bundle;
   import android.os.Environment;
   import android.widget.TextView;

    public class Main extends Activity {

private static String FILE = Environment.getExternalStorageDirectory()+File.separator+"firstPdf.pdf";
private static Font catFont = new Font(Font.FontFamily.TIMES_ROMAN, 18,
        Font.BOLD);
private static Font redFont = new Font(Font.FontFamily.TIMES_ROMAN, 12,
        Font.NORMAL, BaseColor.RED);
private static Font subFont = new Font(Font.FontFamily.TIMES_ROMAN, 16,
        Font.BOLD);
private static Font smallBold = new Font(Font.FontFamily.TIMES_ROMAN, 12,
        Font.BOLD);
TextView txt1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    txt1=(TextView) findViewById(R.id.textView1);

    try {
        Document document = new Document();
        PdfWriter.getInstance(document, new FileOutputStream(FILE));
        document.open();
        addMetaData(document);
        addTitlePage(document);
        addContent(document);
        //createImage();
        document.close();

    } catch (Exception e) {
        e.printStackTrace();
    }
}

private static void addMetaData(Document document) {
    document.addTitle("My first PDF");
    document.addSubject("Using iText");
    document.addKeywords("Java, PDF, iText");
    document.addAuthor("Lars Vogel");
    document.addCreator("Lars Vogel");
}

private static void addTitlePage(Document document)
        throws DocumentException {
    Paragraph preface = new Paragraph();
    // We add one empty line
    addEmptyLine(preface, 1);
    // Lets write a big header
    preface.add(new Paragraph("Title of the document", catFont));

    addEmptyLine(preface, 1);
    // Will create: Report generated by: _name, _date
    preface.add(new Paragraph(
            "Report generated by: " + System.getProperty("user.name") + ", " + new Date(), //$NON-NLS-1$ //$NON-NLS-2$ //$NON-NLS-3$
            smallBold));
    addEmptyLine(preface, 3);
    preface.add(new Paragraph(
            "This document describes something which is very important ",
            smallBold));

    addEmptyLine(preface, 8);

    preface.add(new Paragraph(
            "This document is a preliminary version and not subject to your license agreement or any other agreement with vogella.de ;-).",
            redFont));

    document.add(preface);
    // Start a new page
    document.newPage();
}

private static void addContent(Document document) throws DocumentException {
    Anchor anchor = new Anchor("ESTIMATING APP", catFont);
    anchor.setName("ESTIMATING APP");

    // Second parameter is the number of the chapter
    Chapter catPart = new Chapter(new Paragraph(anchor), 1);

    Paragraph subPara = new Paragraph("Subcategory 1", subFont);
    Section subCatPart = catPart.addSection(subPara);
    subCatPart.add(new Paragraph("Hello"));

    subPara = new Paragraph("Subcategory 2", subFont);
    subCatPart = catPart.addSection(subPara);
    subCatPart.add(new Paragraph("Paragraph 1"));
    subCatPart.add(new Paragraph("Paragraph 2"));
    subCatPart.add(new Paragraph("Paragraph 3"));

    // Add a list
    createList(subCatPart);
    Paragraph paragraph = new Paragraph();
    addEmptyLine(paragraph, 5);
    subCatPart.add(paragraph);

    // Add a table
    createTable(subCatPart);

    // Now add all this to the document
    document.add(catPart);

    // Next section
    anchor = new Anchor("Second Chapter", catFont);
    anchor.setName("Second Chapter");

    // Second parameter is the number of the chapter
    catPart = new Chapter(new Paragraph(anchor), 1);

    subPara = new Paragraph("Subcategory", subFont);
    subCatPart = catPart.addSection(subPara);
    subCatPart.add(new Paragraph("This is a very important message"));

    // Now add all this to the document
    document.add(catPart);

}

private static void createTable(Section subCatPart)
        throws BadElementException {
    PdfPTable table = new PdfPTable(3);

    // t.setBorderColor(BaseColor.GRAY);
    // t.setPadding(4);
    // t.setSpacing(4);
    // t.setBorderWidth(1);

    PdfPCell c1 = new PdfPCell(new Phrase("Job Name:"));
    c1.setHorizontalAlignment(Element.ALIGN_CENTER);
    table.addCell(c1);

    c1 = new PdfPCell(new Phrase("Test 001"));
    c1.setHorizontalAlignment(Element.ALIGN_CENTER);
    table.addCell(c1);

    c1 = new PdfPCell(new Phrase(""));
    c1.setHorizontalAlignment(Element.ALIGN_CENTER);
    table.addCell(c1);
    table.setHeaderRows(1);

    table.addCell("Date:");
    table.addCell("1.1");
    table.addCell("");
    table.addCell("Labor Rate:");
    table.addCell("2.2");
    table.addCell("");
    table.addCell("Labor Cost:");
    table.addCell("3.2");
    table.addCell("3.3");

    subCatPart.add(table);

}

private static void createList(Section subCatPart) {
    List list = new List(true, false, 10);
    list.add(new ListItem("First point"));
    list.add(new ListItem("Second point"));
    list.add(new ListItem("Third point"));
    subCatPart.add(list);
}

private static void addEmptyLine(Paragraph paragraph, int number) {
    for (int i = 0; i < number; i++) {
        paragraph.add(new Paragraph(" "));
    }
} 
```

您可以查看此**[链接](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/SrLAmhk9JAY)**以创建 XLS 报告。

# linq - 带有查询的实体框架错误？

> ID：15241072
> 
> 赞同：2
> 
> 时间：2013-03-06T07:06:43.123
> 
> 标签：linq, entity-framework

我有一个包含这些数据的数组（`ID`、`Time`和`Name`）：

```
var array = new[]
{
    new { ID = 1, Time = DateTime.ParseExact("12:01", "HH:mm", null), Name = "Peter" },
    new { ID = 2, Time = DateTime.ParseExact("12:06", "HH:mm", null), Name = "James" }, 
    new { ID = 3, Time = DateTime.ParseExact("12:03", "HH:mm", null), Name = "Jackie" },
    new { ID = 4, Time = DateTime.ParseExact("12:08", "HH:mm", null), Name = "Peter" }, 
    new { ID = 5, Time = DateTime.ParseExact("12:05", "HH:mm", null), Name = "James" },
    new { ID = 6, Time = DateTime.ParseExact("12:07", "HH:mm", null), Name = "Peter" },
}; 
```

数组上的以下语句会产生正确的结果：

```
var result = array.OrderBy(x => x.Time).GroupBy(x => x.Name)
                  .SelectMany(x => x).ToArray(); 
```

结果：

```
Time: 2013/3/6 12:01:00, Name: Peter
Time: 2013/3/6 12:07:00, Name: Peter
Time: 2013/3/6 12:08:00, Name: Peter
Time: 2013/3/6 12:03:00, Name: Jackie
Time: 2013/3/6 12:05:00, Name: James
Time: 2013/3/6 12:06:00, Name: James 
```

但是当我对 EF 和 SQL Server 使用相同的语句时，顺序是错误的：

```
Time: 2013/3/6 12:03:00, Name: Jackie
Time: 2013/3/6 12:06:00, Name: James
Time: 2013/3/6 12:05:00, Name: James
Time: 2013/3/6 12:07:00, Name: Peter
Time: 2013/3/6 12:01:00, Name: Peter
Time: 2013/3/6 12:08:00, Name: Peter 
```

这是 SQL EF 生成的：

```
SELECT 
[Extent2].[Id] AS [Id], 
[Extent2].[Time] AS [Time], 
[Extent2].[Name] AS [Name]
FROM   (SELECT DISTINCT 
    [Extent1].[Name] AS [Name]
    FROM [dbo].[testt1] AS [Extent1] ) AS [Distinct1]
INNER JOIN [dbo].[testt1] AS [Extent2]
ON ([Distinct1].[Name] = [Extent2].[Name]) OR 
   (([Distinct1].[Name] IS NULL) AND ([Extent2].[Name] IS NULL)) 
```

没有`order by`条款。

1.  我忘记了什么？这是EF的错误吗？
2.  如何从 EF 获得与从数组中获得相同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:09:19.397

就像在 SQL 中一样：

第一组，然后订购：

```
var result = array.GroupBy(x => x.Name)
                  .Select(x => x.OrderBy(y => y.Time))
                  .SelectMany(x => x)
                  .ToArray(); 
```

但在你的情况下，我不明白你为什么需要这个小组。每次似乎都不同，因此产生相同结果（至少使用您的测试数据）的更简单版本将是：

```
var result = array.OrderBy(x => x.Name)
                  .ThenBy(y => y.Time)
                  .ToArray(); 
```

# python - 我怎么知道从哪里调用该方法？

> ID：15241074
> 
> 赞同：1
> 
> 时间：2013-03-06T07:06:49.560
> 
> 标签：python

我正在尝试在 Python 中干净地实现 Objective-C 的类别，并找到了我的类似问题的[答案。](https://stackoverflow.com/a/13568709/2100702)我复制了下面的代码：

**类别.py**

```
class category(object):
    def __init__(self, mainModule, override = True):
        self.mainModule = mainModule
        self.override = override

    def __call__(self, function):
        if self.override or function.__name__ not in dir(self.mainModule):
            setattr(self.mainModule, function.__name__, function) 
```

但我不想浪费命名空间。通过使用这个“类别”，还有一个变量作为 NoneType 对象，如下所示：

```
>>> from categories import category
>>> class Test(object):
...     pass
... 
>>> @category(Test)
... def foobar(self, msg):
...     print msg
... 
>>> test = Test()
>>> test.foobar('hello world')
hello world
>>> type(foobar)
<type 'NoneType'>
>>> 
```

我希望它像下面

```
>>> from categories import category
>>> class Test(object):
...     pass
... 
>>> @category(Test)
... def foobar(self, msg):
...     print msg
... 
>>> test = Test()
>>> test.foobar('hello world')
hello world
>>> type(foobar)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'foobar' is not defined
>>> 
```

有没有像下面这样自动删除它？

```
 def __call__(self, function):
        if self.override or function.__name__ not in dir(self.mainModule):
            setattr(self.mainModule, function.__name__, function)
            del(somewhere.function.__name__) 
```

我发现这`sys._getframe`给了我一些有用的信息。但我一个人做不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:28:52.070

不，没有办法自动做到这一点。之后您必须手动删除该名称。 `category`这是一个装饰器，这意味着

```
@category(Test)
def f():
    ... 
```

是相同的

```
def f():
   ...
f = category(Test)(f) 
```

即使`category`您可以从内部删除外部作用域中的名称，但这还不够，因为该名称会在装饰器执行*后重新绑定。*

您链接到的代码与装饰器语法的滥用有关。装饰器旨在提供一种修改或扩展它们所装饰的功能的方法，但该代码依赖于装饰器的副作用（即，将函数分配为类的方法），然后丢弃该函数。但它只能通过返回 None 来“丢弃”它，所以 None 仍然绑定到函数的名称，如您所见。

我建议您遵循对该问题的最高投票答案的建议，并简单地为您的课程分配新方法。在 Python 中没有真正需要像类别这样的“基础设施”，因为您可以随时直接向现有类添加新方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:42:20.100

虽然我完全同意 BrenBarn 所说的，但您可以将功能删除拆分到后面的步骤中。问题是在装饰器执行后，变量被重新分配。所以你不能在装饰器本身内执行删除。

但是，您可以记住这些功能并在以后将它们从模块中删除。

```
class category(object):
    functions = []

    def __init__(self, mainModule, override = True):
        self.mainModule = mainModule
        self.override = override

    def __call__(self, function):
        if self.override or function.__name__ not in dir(self.mainModule):
            setattr(self.mainModule, function.__name__, function)
            self.functions.append((inspect.getmodule(function), function.__name__))
            return self.dummy

    @staticmethod
    def dummy():
        pass

    @classmethod
    def cleanUp(cls):
        for module, name in cls.functions:
            if hasattr(module, name) and getattr(module, name) == cls.dummy:
                delattr(module, name)
        cls.functions = [] 
```

这种`category`类型会记住它装饰的函数，并存储它们所属的名称和模块，以供以后清理。装饰器还返回一个特殊的虚拟函数，以便清理可以确保以后不会重新分配变量。

```
>>> class Test(object): pass
>>> @category(Test)
def foobar(self, msg):
    print(msg)

>>> @category(Test)
def hello_world(self):
    print('Hello world')

>>> test = Test()
>>> test.foobar('xy')
xy
>>> test.hello_world()
Hello world

>>> type(foobar)
<class 'function'>
>>> type(hello_world)
<class 'function'>

>>> category.cleanUp()

>>> type(foobar)
Traceback (most recent call last):
  File "<pyshell#26>", line 1, in <module>
    type(foobar)
NameError: name 'foobar' is not defined
>>> type(hello_world)
Traceback (most recent call last):
  File "<pyshell#27>", line 1, in <module>
    type(hello_world)
NameError: name 'hello_world' is not defined 
```

# audio - 仅从 youtube 视频下载音频

> ID：15241076
> 
> 赞同：16
> 
> 时间：2013-03-06T07:06:55.933
> 
> 标签：audio, video, youtube, ffmpeg

我知道有一百万种方法可以从 youtube 下载视频，然后将其转换为音频或对其进行进一步处理。但最近我很惊讶地看到 mac 上一个名为 YoutubeToMp3 的应用程序实际上显示“跳过 X mb 的视频”，并且据说只从视频中下载音频，而无需使用带宽下载整个视频然后进行转换。我想知道这是否真的正确和可能，因为我找不到任何方法来做到这一点。你有什么想法 ？

编辑：经过一些测试，这里有一些关于该主题的附加信息。我试图从中获取音频的视频只是来自互联网的一个示例 mp4 文件：

[http://download.wavetlan.com/SVV/Media/HTTP/MP4/ConvertedFiles/MediaCoder/MediaCoder_test6_1m9s_XVID_VBR_306kbps_320x240_25fps_MPEG1Layer3_CBR_320kbps_Stereo_44100Hz.mp4](http://download.wavetlan.com/SVV/Media/HTTP/MP4/ConvertedFiles/MediaCoder/MediaCoder_test6_1m9s_XVID_VBR_306kbps_320x240_25fps_MPEG1Layer3_CBR_320kbps_Stereo_44100Hz.mp4)

我试过了

**ffmpeg -i "输入" out.mp3**

**ffmpeg -i "输入" -vn out.mp3**

**ffmpeg -i “输入” -vn -ac 2 -ar 44100 -ab 320k -f mp3 output.mp3**

**ffmpeg -i “输入” -vn -acodec 复制输出.mp3**

不幸的是，这些命令似乎都没有使用较少的带宽。他们都下载了整个视频。既然你有了视频，你能确认是否真的有一个命令只从视频中下载音频流并降低带宽使用？谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-05-03T21:35:18.763

经过大量研究后，我发现这是不可能的，并开发了一种替代方法：

1.  下载 mp4 头文件
2.  解析标头并获取音频字节的位置
3.  下载带有 http 范围请求和偏移量的音频字节
4.  组装音频字节并将它们包装在一个简单的 ADTS 容器中以生成一个正在播放的 m4a 文件

这样，仅使用音频字节的带宽。如果您找到更好的方法，请告诉我。

有关示例 Android APP 和实现，请查看：

[https://github.com/feribg/audiogetter/blob/master/audiogetter/src/main/java/com/github/feribg/audiogetter/tasks/download/VideoTask.java](https://github.com/feribg/audiogetter/blob/master/audiogetter/src/main/java/com/github/feribg/audiogetter/tasks/download/VideoTask.java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T07:44:20.510

FFmpeg 能够接受 URL 作为输入。如果 URL 是可搜索的，那么 FFmpeg 理论上可以跳过所有视频帧，因此它只需要下载音频流的数据。

尝试使用

```
ffmpeg -i http://myvideo.avi out.mp3 
```

看看它是否需要更少的带宽。

# ios - GCD 使滚动表视图上的数据混乱

> ID：15241078
> 
> 赞同：1
> 
> 时间：2013-03-06T07:06:57.850
> 
> 标签：ios, objective-c, uitableview

我正在使用大型中央调度程序从服务器加载图像，但是当我滚动表格时，数据，即图像，混乱 - 意味着第一张图像来到其他地方，就像其他图像一样。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ItemImageCellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
        cell.selectionStyle=UITableViewCellSelectionStyleNone;

    }

    NSDictionary *item=[responseDictionary objectAtIndex:[indexPath row]];

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0ul);

    NSString *actionForUser=[item objectForKey:@"action"];

    objc_setAssociatedObject(cell,
                             kIndexPathAssociationKey,
                             indexPath,
                             OBJC_ASSOCIATION_RETAIN);

    dispatch_async(queue, ^{

        if([actionForUser isEqualToString:like])
        {
            NSURL *url = [NSURL URLWithString:[item objectForKey:@"user_image"]];
            NSData *data1 = [[NSData alloc] initWithContentsOfURL:url];
            UIImage *image1 = [[UIImage alloc] initWithData:data1];

            //userProfileimage
            UIButton *userImageButton = [[UIButton alloc] initWithFrame:CGRectMake(10,5, 40,40)];
            userImageButton.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
            userImageButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;
            [userImageButton setBackgroundImage:image1 forState:UIControlStateNormal];
            [userImageButton addTarget:self
                            action:@selector(userImageButtonclick:)
                  forControlEvents:UIControlEventTouchDown];
            [cell.contentView addSubview:userImageButton];

        }
    });
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:39:35.193

这是因为当您的异步方法完成时，`cell`已被回收并用于不同的索引路径，因此您正在更新错误的单元格。

在更新点，使用**tableview 的**（不是数据源方法）`cellForRowAtIndexPath:`方法获取单元格引用。这将返回正确的单元格，如果单元格不再出现在屏幕上，则返回 nil。您可以安全地更新此单元格。

您可能也应该将图像数据添加到您的模型中，这样您就不会重复下载它。

例如，而不是这一行：

```
[cell.contentView addSubview:userImageButton]; 
```

你应该有这样的东西：

```
UITableViewCell *cellToUpdate = [tableView cellForRowAtIndexPath:indexPath];
[cellToUpdate.contentView addSubview:userImageButton]; 
```

您的代码还有其他问题；您没有缓存图像，每次此单元格出现在屏幕上时，您都将添加此子视图，并且如果该单元格在不需要按钮的情况下被重用，则按钮仍将存在。我只解决了您问题中描述的“GCD 混乱”。

# java - Java 中可用的基于 Web 的开源 ERP 系统？

> ID：15241083
> 
> 赞同：5
> 
> 时间：2013-03-06T07:07:49.177
> 
> 标签：java, open-source, erp, web-based

我需要基于 Web 的开源 ERP 系统。

我想要我们的一位客户的 ERP 系统。他们在不同的城市都有超市商店。所以我希望这个 ERP 能够相互连接，即股票、产品等。

我想要这个Java ERP系统。

ERP系统应该易于定制和扩展。

所以请建议我用 Java 编写好的基于 Web 的开源 ERP 系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T07:25:01.300

为此，您应该使用开源解决方案[OpenBravo ERP](http://en.wikipedia.org/wiki/Openbravo#Openbravo_ERP)。这是它的下载链接[OpenBravo ERP 下载](http://sourceforge.net/projects/openbravo/)。我为我的一个客户定制了这个，它是用 JAVA 编写的开源解决方案，而且很容易定制。

# php - php用“w”分割值

> ID：15241086
> 
> 赞同：0
> 
> 时间：2013-03-06T07:08:14.573
> 
> 标签：php, split

我有一个返回值，它给我两位数、三位数等。我想在这些数字之间加上一个“w”。非常感谢我在这方面获得的任何帮助。

```
$value = "444"; 
```

我希望它给我这个：

```
$value = "4w4w4w"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:16:03.470

您可以将字符串转换为数组并将其转换为`implode`：

```
echo implode("w", str_split("444")) . "w"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T07:16:11.930

`str_split()`并且`implode()`会有所帮助。

```
$var = "444";
$array = str_split($var);
$final = implode("w", $array); 
```

在这种情况下`$final = "4w4w4";`，您可能需要在末尾附加一个额外的“w”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T08:06:12.700

这是使用正则表达式的一种简短方法：

```
$str = '444';
echo preg_replace ( '/(.)/', '$1w', $str ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T07:16:07.263

假设 $inp 保存您的号码。

```
$arr = str_split($inp);
$result = implode('w',$arr); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T07:19:28.410

尝试这个

```
 $value="444";
 $out='';
 for($i=0;$i<strlen($value);$i++){
    $out.=$value[$i]. "w";
 }
 echo $out; 
```

输出

```
 4w4w4w 
```

# ajax - cakephp 2.x 中的 Ajax 请求

> ID：15241089
> 
> 赞同：1
> 
> 时间：2013-03-06T07:08:22.850
> 
> 标签：ajax, cakephp, cakephp-2.0, cakephp-ajaxhelper

我正在尝试在 cakephp 中发送一个简单的 ajax 请求。我必须为许多按钮发送 ajax 请求。但我只是先尝试​​一个简单的 ajax 请求。但由于某种原因它不起作用。这是我到目前为止所做的。这是我的代码。

**显示.ctp**

```
<?php echo $this->Html->script('jquery', FALSE); ?>

<?php

echo $this->Form->create();
echo $this->Form->input('field', array('id'=>'field'));
echo $this->Js->submit('Send', array(
'before'=>$this->Js->get('#sending')->effect('fadeIn'),
'success'=>$this->Js->get('#sending')->effect('fadeOut'),
'update'=>'#success'
));

?>

<div id='sending' style="display:none"> Counz[dot]gif will be displayed </div>
<div id='success'></div> 
```

**控制器**

```
var $name = 'count';

    public $helpers = array('Js' => array('Jquery'));
    //var $helpers = array('Ajax', 'Javascript');
    var $components = array('RequestHandler');

public function show(){
        if($this->RequestHandler->isAjax()){
            $this->render('success', 'ajax'); //ajax tells the layout it should use

        }else{
            $this->set('for_map', $this->count->find('all'));

        }
    } 
```

**成功.ctp**

```
<p>It's working</p> 
```

默认情况下还有 ajax.ctp。

请告诉我我做错了什么。谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:36:11.490

做ajax请求的时候最好不要post到self。

**显示.ctp**

```
echo $this->Form->create('Count', array('action'=>'ajaxShow')); 
```

**控制器**

```
public function ajaxShow(){

    $this->layout = 'ajax';

    if($this->RequestHandler->isAjax()){
         $this->render('success', 'ajax'); //ajax tells the layout it should use
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T08:41:04.653

我知道这个线程很老，但我会分享我的答案。你可以做普通的ajax调用，例如你的url是'users/items'类型是GET然后在你的：

**用户控制器.php**

```
public function items(){
 // some logic to get items
 $this->set('items',$items);
 $this->layout = null; //remove default layout.
 $this->render('ajax/items'); // here I use View/Users/ajax/items.ctp
} 
```

**项目.ctp**

```
//you can return json
<?php echo json_encode($items); ?>

//or

//your own format
<?php 
 foreach($items as $item){
      //some output
 }
?> 
```

现在 items.ctp 中的输出将在您的 js 的成功属性中。只需确保解析返回的 json。

# java - 在 java 中读取请求标头为“Accept-Encoding: gzip, deflate”的 HttpServeltRequest 正文

> ID：15241097
> 
> 赞同：0
> 
> 时间：2013-03-06T07:08:43.847
> 
> 标签：java, servlets, httprequest

我正在尝试从中读取正文，`HttpServletRequest`但正文未显示。

包含以下`HttpServletRequest`信息。

```
 body: id=8652976&event=test&payload[chargify]=testing
headers: 
  Content-Type: application/x-www-form-urlencoded
  X-Chargify-Webhook-Signature: ed57683a9d8a3f25869dbf138ce5c66f
  Accept: "*/*; q=0.5, application/xml"
  X-Chargify-Webhook-Id: "8652976"
  Accept-Encoding: gzip, deflate
  Content-Length: "47" 
```

我正在尝试使用以下代码读取请求正文。但是在`inStream.readLine()`给出空值时

```
if ("gzip".equalsIgnoreCase(request.getHeader("Accept-Encoding"))) {

  GZIPInputStream gzipInputStream = new GZIPInputStream(request.getInputStream());
  Reader decoder = new InputStreamReader(gzipInputStream, "UTF-8");
  BufferedReader br = new BufferedReader(decoder);
  String inputLine;
  while ((inputLine = br.readLine()) != null) {
    body.append(inputLine).append(System.getProperty("line.separator"));
  }
   gzipInputStream.close();
 } else {
    InputStreamReader input = new InputStreamReader(request.getInputStream());
    BufferedReader inStream = new BufferedReader(input);
    String inputLine;
    while ((inputLine = inStream.readLine()) != null) {
        body.append(inputLine).append(System.getProperty("line.separator"));
    }
    inStream.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:38:04.333

有更简单的方法可以处理所有这些样板代码并将您从这些样板代码中解救出来。

检查[Apache commons-fileupload](http://commons.apache.org/proper/commons-fileupload/streaming.html) 以获取[文档](http://commons.apache.org/proper/commons-fileupload/)

下面是一个示例代码，展示了使用这个库是多么容易。

```
// Create a new file upload handler
ServletFileUpload upload = new ServletFileUpload();

// Parse the request
FileItemIterator iter = upload.getItemIterator(request);
while (iter.hasNext()) {
    FileItemStream item = iter.next();
    String name = item.getFieldName();
    InputStream stream = item.openStream();
    if (item.isFormField()) {
        System.out.println("Form field " + name + " with value "
            + Streams.asString(stream) + " detected.");
    } else {
        System.out.println("File field " + name + " with file name "
            + item.getName() + " detected.");
        // Process the input stream
        ...
    }
} 
```

# ios - 同步播放相同 m3u8 流的两个播放器

> ID：15241098
> 
> 赞同：1
> 
> 时间：2013-03-06T07:08:57.770
> 
> 标签：ios, avfoundation, avplayer, http-live-streaming

有没有办法让两个播放器使用 AVFoundation 同步播放相同的 m3u8 流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:11:32.937

我正在寻找的解决方案是使用两个 AVPlayerLayers 和一个 AVPlayer - 这可从 iOS6 获得。

# hash - 水晶报表哈希函数

> ID：15241102
> 
> 赞同：0
> 
> 时间：2013-03-06T07:09:06.307
> 
> 标签：hash, crystal-reports

水晶报表中有散列函数吗？我需要创建一个生成散列值的报告。该值将显示为二维条码，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:10:58.950

没有。

过去，我使用 SQL 表达式直接引用数据库引擎的哈希函数，将其中一个字段传递给它。

# ruby - 从 sublime 运行构建时 main:Object 的未定义方法“require_relative”

> ID：15241103
> 
> 赞同：5
> 
> 时间：2013-03-06T07:09:12.953
> 
> 标签：ruby, sublimetext2, sublimetext

我已经从我的命令行得到了一切工作，所以我可以运行`ruby myfile`它并且它工作。但是当我尝试从崇高的内部运行它时，我得到了

```
undefined method `require_relative' for main:Object 
```

有人知道我的崇高设置中缺少什么吗？我正在使用 OS X 并安装了 rvm。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-24T20:31:26.713

或者，您可以只使用“require”，它应该可以正常工作。我认为“require_relative”仅适用于 ruby​​ 1.9+

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T08:04:37.560

可能是因为 sublime 运行的是 1.8.7 版本的 ruby​​。你可以改变它。[这里是如何](https://stackoverflow.com/questions/12830607/use-default-ruby-version-in-sublime-text-2)。

# cocoa-touch - ios map-几条线，而我画一条线

> ID：15241109
> 
> 赞同：0
> 
> 时间：2013-03-06T07:09:27.733
> 
> 标签：cocoa-touch, ios4, google-maps-api-3, ios6

在我的应用程序中，当用户触摸并在地图上移动时，我想画几条线。我怎样才能做到这一点。我正在使用下面的代码来绘制一条线。 **代码：**

```
 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
    {
          UITouch *touch = [touches anyObject];
          CGPoint currentPoint = [touch locationInView:drawImage];
          currentPoint.y -= 20;
          mapView.scrollEnabled = NO;

          lastpinpoint1.x = 170.000000;
          lastpinpoint1.y = 327.000000;

            UIGraphicsBeginImageContext(drawImage.frame.size);
            CGContextRef ctx = UIGraphicsGetCurrentContext();

            [imgMap drawInRect:CGRectMake(0, 0, drawImage.frame.size.width,drawImage.frame.size.height)];
            CGContextSetLineCap(ctx, kCGLineCapRound);
            CGContextSetLineWidth(ctx, 2.0);
            //    CGContextSetRGBStrokeColor(ctx, 0.0, 0.5, 0.6, 1.0);
            CGContextSetStrokeColorWithColor(ctx, [[UIColor redColor] CGColor]);
            CGContextBeginPath(ctx);
            CGContextMoveToPoint(ctx, lastpinpoint.x, lastpinpoint.y);
            CGContextMoveToPoint(ctx, lastpinpoint1.x, lastpinpoint1.y);
            CGContextAddLineToPoint(ctx, currentPoint.x, currentPoint.y);
            CGContextStrokePath(ctx);
            drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsEndImageContext();
    } 
```

在上面的代码中没有这个**CGContextMoveToPoint(ctx, lastpinpoint1.x, lastpinpoint1.y);** 这条线用于画一条线。但我添加了这个**CGContextMoveToPoint(ctx, lastpinpoint1.x, lastpinpoint1.y);** line 绘制第二条线。现在我在这段代码中做错了什么。请帮我。**问题是：**当我在地图上移动手指时，我想从不同的点画几条线到一个当前点。感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:19:46.150

试试这个答案

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

   UITouch *touch = [touches anyObject];
lastPoint = [touch locationInView:self];

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [touches anyObject];
CGPoint currentPoint = [touch locationInView:self];

UIGraphicsBeginImageContext(self.frame.size);
[self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0 , 0.0, 1.0, 1.0);
CGContextSetBlendMode(UIGraphicsGetCurrentContext(),kCGBlendModeNormal);

CGContextStrokePath(UIGraphicsGetCurrentContext());
self.image = UIGraphicsGetImageFromCurrentImageContext();
[self setAlpha:1.0];
UIGraphicsEndImageContext();

UIGraphicsBeginImageContext(self.frame.size);
[self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x+20, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x+20, currentPoint.y);
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5);
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0 , 0.0, 1.0, 1.0);
CGContextSetBlendMode(UIGraphicsGetCurrentContext(),kCGBlendModeNormal);

CGContextStrokePath(UIGraphicsGetCurrentContext());
self.image = UIGraphicsGetImageFromCurrentImageContext();
[self setAlpha:1.0];
UIGraphicsEndImageContext();

lastPoint = currentPoint;

} 
```

希望能帮助到你！！！

# html - 我可以创建没有边框的按钮，但它不起作用

> ID：15241111
> 
> 赞同：0
> 
> 时间：2013-03-06T07:09:37.557
> 
> 标签：html, css

我正在尝试使用创建按钮`no border`，我可以做到，按钮一旦我通过css删除边框，它就无法正常工作`Firefox`，`Chrome`请帮助。

```
<button type="button" id="submitButton" >Submit</button>

.container #emailDiv #submitButton{
float:left;
margin-top:368px;
margin-left:-151px;
background-image:url(images\\but-middle.gif);
background-repeat:x-repeat; 
width:50px;
border:none;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:17:39.987

尝试导入无边框？它可能会被其他一些 div 继承。

```
border:none !important; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:29:30.757

它为我工作...

看看@这个[演示](http://jsfiddle.net/pDtwE/18/)/[演示..](http://jsfiddle.net/pDtwE/19/)

```
#submitButton {
    background-color:green;
   background-image:url(images\\but-middle.gif);
   background-repeat:x-repeat;
   width:50px;
   border:none;
  -moz-border:none
  -webkit-border:none 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:11:24.293

试试看

```
.container #emailDiv #submitButton{
float:left;
margin-top:368px;
margin-left:-151px;
background-image:url(images\\but-middle.gif);
background-repeat:x-repeat; 
width:50px;
border:none;
-moz-border:none
-webkit-border:none 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T07:14:11.553

如果边框不能影响你的布局，试试这个

```
.container #emailDiv #submitButton{
float:left;
margin-top:368px;
margin-left:-151px;
background-image:url(images\\but-middle.gif);
background-repeat:x-repeat; 
width:50px;
border:1px solid #fff transparent !important;
} 
```

# c++ - 将链表附加到向量 c++

> ID：15241114
> 
> 赞同：0
> 
> 时间：2013-03-06T07:09:54.180
> 
> 标签：c++, vector, linked-list

我正在研究使用 hash_map 的单独链接，这是我需要的，但不完全是。hash_map 即使在链中也会自动删除重复值。我不想要那个。

考虑我有一个大小为 4 的向量。我想基本上将一个链表附加到向量的每个索引。链表也可以有重复的元素。

我对此进行了研究，但找不到用于此的 STL。有没有办法做到这一点？

我想这样做来创建一个数据库表。我有一个大小为 4 的向量。4 个点是表中的列，附加到每个索引的链表是表的行。希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:46:40.633

听起来你只想要一个列表向量。请指定要存储在表中的数据的类型。声明将取决于...如果您要存储整数，它看起来像这样：

```
std::vector<std::list<int> > vecOfLists; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:00:11.607

将行封装在一个类中。存储该类对象的向量。

如果你有很多删除和插入，也许 a`list`会更好，而不是`vector`.

```
struct MyRecord {
    // fields
};

std::vector<MyRecord> myRecordTable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:13:22.773

你的意思是这样的？

```
std::vector<std::list<std::string> > > myweirdlist; 
```

然后您可以将更多列表添加到`myweirdlist`. `myweirdlist[0]`例如将是一个可以操作的链表。

# c# - KeyDown 事件未从网格中引发

> ID：15241118
> 
> 赞同：10
> 
> 时间：2013-03-06T07:10:21.553
> 
> 标签：c#, .net, wpf, keyboard-events

在这里，我有一个带有网格的示例窗口。我需要在按下键时捕获事件。但是当我单击网格区域然后按键时它没有升高。只有当文本框被聚焦时它才会起作用。我知道如果我从 Window 捕获它会起作用。但是我有其他用户控件很少的应用程序，我需要从不同的应用程序中捕获它。我试图为 Window 设置 Focusable.false 为 Grid 设置 true ，但它没有帮助。有什么解决办法吗？

```
<Window x:Class="Beta.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" Closed="Window_Closed_1" Focusable="False">

    <Grid KeyDown="Grid_KeyDown_1" Focusable="True">
    <TextBox x:Name="tbCount" HorizontalAlignment="Left" Height="35" Margin="310,49,0,0" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="83"/>

  </Grid> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T07:47:23.557

没错，这很奇怪。这显然是一个焦点问题，我仍然无法理解为什么网格不带焦点，即使我们点击它。

虽然有一个解决方法：为网格的加载事件创建一个处理程序：

```
<Grid x:Name="theGrid" KeyDown="Grid_KeyDown_1" Focusable="True" Loaded="TheGrid_OnLoaded"> 
```

然后将注意力集中在你的代码后面：

```
 private void TheGrid_OnLoaded(object sender, RoutedEventArgs e)
    {
        theGrid.Focus();
    } 
```

之后，您的 keydown 事件将起作用。希望能帮助到你。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-16T12:32:20.180

我在使用通用 Windows 平台 (UWP) 应用时遇到了同样的问题。我将事件附加到 XAML 中的网格，但它仅在焦点位于 TextBox 上时才有效。我在 MSDN 上找到了答案（不仅仅是一种解决方法）：[https ://social.msdn.microsoft.com/Forums/en-US/56272bc6-6085-426a-8939-f48d71ab12ca/page-keydown-event-not-firing ?forum=winappswithcsharp](https://social.msdn.microsoft.com/Forums/en-US/56272bc6-6085-426a-8939-f48d71ab12ca/page-keydown-event-not-firing?forum=winappswithcsharp)

总之，根据那篇文章，该事件不会触发，因为当失去对 TextBox 的焦点时，它会向上传递，因此 Grid 不会得到它。`Window.Current.CoreWindow.KeyDown`应改为使用。我已将事件处理程序添加到页面加载事件中，如下所示：

```
private void Page_Loaded(object sender, RoutedEventArgs e)
{
    Window.Current.CoreWindow.KeyDown += coreWindow_KeyDown;
    Window.Current.CoreWindow.KeyUp += CoreWindow_KeyUp;
} 
```

这对我来说按预期工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-13T05:48:16.033

我也尝试使用 Focus 方法，但无济于事，直到我将 Focusable 属性设置为 true（默认为 False。）

# sql - sql“group by”将对应于同一对的行分组

> ID：15241120
> 
> 赞同：2
> 
> 时间：2013-03-06T07:10:23.980
> 
> 标签：sql

我有一个有 2 列的表 - “主要”和“次要”。此外还有其他栏目。以下是一组示例行：

```
id=1, primary=A, secondary=B, .....
id=2, primary=C, secondary=D, .....
....
.......
id=200, primary=B, secondary=A, .....
id=300, primary=J, secondary=D, ..... 
```

我需要一个“GROUP BY”查询，它将主要和次要值属于同一对值的所有行分组，**而不管顺序如何**。因此，组应如下所示：

```
group=1, nodepair=BA, ....   // (primary=A && secondary=B) OR (primary=B && secondary=A)
group=2, nodepair=JM, ....   // (primary=J && secondary=M) OR (primary=M && secondary=J) 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:22:52.170

你在寻找这样的东西吗？

```
select least(primary, secondary)
      ,greatest(primary, secondary)
 from yourtable
group 
   by least(primary, secondary)
     ,greatest(primary, secondary); 
```

无论顺序如何，它都会为每个主要/次要的唯一组合提供一组，即 {A,B} 与 {B,A} 相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:15:44.373

```
select * from table t1
inner join table t2
on t1.primary = t2.secondary 
and t1.secondary = t2.primary 
```

然后你会得到结果：

id=1，primary=A，secondary=B，id=200，primary=B，secondary=A id=200，primary=B，secondary=A，id=1，primary=A，secondary=B

# asp.net-mvc - 使用实体框架的代码不调用 jquery ajax 的成功函数

> ID：15241123
> 
> 赞同：1
> 
> 时间：2013-03-06T07:10:38.567
> 
> 标签：asp.net-mvc, entity-framework, jquery

我有两种替代方法可以从数据库中检索数据。

1) 使用 Ado.net

```
public List<Customer> GetDetail()
{
    SqlConnection connectionstring = new SqlConnection(connectionstring goes on..);
    List<Customer> custList = new List<Customer>();

    connectionstring.Open();

        string query = "select * from Customer";
        SqlCommand command = new SqlCommand(query, connectionstring);
        SqlDataReader reader = command.ExecuteReader();
        if (reader.HasRows)
        {
            while (reader.Read())
            {
                Customer cust = new Customer();
                cust.Name = reader["Name"].ToString();
                cust.UserName = reader["UserName"].ToString();
                cust.CountryId = reader["CountryId"].ToString();
                cust.EmailId = reader["EmailId"].ToString();
                cust.PhoneNo = reader["PhoneNo"].ToString();
                custList.Add(cust);
            }
        }
    connectionstring.Close();
    return custList;
} 
```

2）使用实体框架

```
 public List <Customer> GetDetail()
        {
            DataTable dt = new DataTable();
            List<Customer> CustomerList = new List<Customer>();

            CustomerEntities context = new CustomerEntities(GetConnectionObject());
            foreach (Customer cus in context.Customers)
            {
                CustomerList.Add(cus);
            }
            return CustomerList;
        } 
```

我正在使用 jquery ajax 调用调用控制器方法，它调用上述方法。

```
$.ajax({
        type: "POST",
        url: "/Customer/GetDetails",
        dataType: 'json',
        async: false, 
        cache: false,
        success: function (data) {
            alert("success");
            $.each(data, function (index, customer) {
                alert(customer.Name + " " + customer.UserName);
            });
        },
        error: function (jqXHR, textStatus, errorThrown) {
            if (typeof (console) != 'undefined') {
                alert("oooppss");
            }
            else { alert("something went wrong"); }
        }
    }); 
```

如果是普通的 ado.net 代码，它成功地检索数据并调用 ajax 成功函数。

但是，如果是实体框架方法，即使它正在检索数据（调试时，我可以在 customerList 对象中看到结果数据），也不会调用 ajax 成功函数。相反，错误函数被调用。errorThrown 是“内部服务器错误”。

为什么？实体框架有什么问题？

谁能为此提供解决方案..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:50:46.300

实体框架创建无法序列化的对象（因为它们支持延迟加载，序列化它们实际上可能意味着序列化您的数据库）。要停止此行为，您需要完全关闭延迟加载

```
 context.ContextOptions.ProxyCreationEnabled = false;
            context.ContextOptions.LazyLoadingEnabled = false; 
```

在进行数据库查询之前插入它，如果问题仍然存在，请在早上给我打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:21:14.500

用这个

```
 error: function (xhr, ajaxOptions, thrownError) {
    alert(xhr.status);
    alert(thrownError);
    alert(xhr.responseText);
  } 
```

看看会出现什么错误。
可以有很多错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:18:22.200

比较两个客户列表集合并检查是否有任何差异......可能是返回对象创建问题......或者在 CustomerEntities 中使用 Using 关键字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-12T12:28:41.417

Json Return 的 EF 创建对象的新代码 您必须首先确保此代码。

```
 dbcontext.Configuration.ProxyCreationEnabled = false;
            dbcontext.Configuration.LazyLoadingEnabled = false; 
```

# codeigniter - 通过 codeigniter 中的重定向功能发布数据

> ID：15241124
> 
> 赞同：2
> 
> 时间：2013-03-06T07:10:41.553
> 
> 标签：codeigniter, redirect

有没有办法或一些技巧在codeiginter中使用redirect（）函数发布数据数组或单个变量字符串数据？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T07:27:49.350

当`redirect`您通过这个过程从一个控制器或另一个控制器中使用时，所有发布数据都将被销毁，除非您将它们存储在会话中，这就是我的做法

```
$data = array('firstname'=>'fname','lastname'=>'lastname');
// i store data to flashdata
$this->session->set_flashdata('lolwut',$data);
// after storing i redirect it to the controller
redirect('controller/method') 
```

所以在你的重定向控制器上，你可以通过`$this->session->flashdata('lolwut')` 注意我没有使用`flashdata`它来访问它`userdata`，它`flashdata`会在下一个过程中自行销毁。

在此处阅读更多 flashdata[会话类](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:38:07.890

首先，为什么在重定向时需要发布数据：

您可以拥有处理所有代码的 post 函数，然后在成功或失败后重定向取决于您的使用情况

```
function method()
{
    //do something
    redirect('path/to/method');
} 
```

如果您想通过其他页面传递变量，您可以通过以下方式执行此操作：

1.  将数据保存到会话中，`$this->session->set_data($data);`或`$this->set_flashdata($data);`取决于您的使用情况
2.  传入 URL 作为参数而不是表单提交

希望对你有所帮助

# impersonation - 使用服务帐户冒充 google 用户

> ID：15241127
> 
> 赞同：6
> 
> 时间：2013-03-06T07:10:47.870
> 
> 标签：impersonation, google-drive-api, google-api-php-client

我正在使用 google-api-php-client 0.6.1，我想知道有没有办法用服务帐户模拟具体用户？我的应用程序需要在其谷歌驱动器中存储一些文件。因此，我决定使用用户服务帐户和 .p12 密钥 - 身份验证。它工作得很好，但所有文件都存储在服务帐户中，所以我无法管理它们。我希望将文档存储在某个帐户（用于创建 api 项目和服务帐户本身）中。我试图使用这段代码：

```
$KEY_FILE = <p12 key file path>;
$key = file_get_contents($KEY_FILE);
$auth = new Google_AssertionCredentials(
      $SERVICE_ACCOUNT_NAME,
      array('https://www.googleapis.com/auth/drive'),
      $key);
$auth->prn = '<certainuser@gmail.com>';
$client = new Google_Client();
$client->setUseObjects(true);
$client->setAssertionCredentials($auth);
return new Google_DriveService($client); 
```

但我收到“刷新 OAuth2 令牌时出错，消息：'{“error”：“access_denied”}'”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-14T22:22:12.833

不要使用 $auth->prn，使用 $auth->sub。这对我有用：

```
// Create a new google client.  We need this for all API access.
$client = new Google_Client();
$client->setApplicationName("Google Group Test");

$client_id = '...';
$service_account_name = '...';
$key_file_location = '...';

if (isset($_SESSION['service_token'])) {
    $client->setAccessToken($_SESSION['service_token']);
}
$key = file_get_contents($key_file_location);

// https://www.googleapis.com/auth/admin.directory.group,
// https://www.googleapis.com/auth/admin.directory.group.readonly, 
// https://www.googleapis.com/auth/admin.directory.group.member, 
// https://www.googleapis.com/auth/admin.directory.group.member.readonly,
// https://www.googleapis.com/auth/apps.groups.settings, 
// https://www.googleapis.com/auth/books
$cred = new Google_Auth_AssertionCredentials(
    $service_account_name,
        array(
            Google_Service_Groupssettings::APPS_GROUPS_SETTINGS,
            Google_Service_Directory::ADMIN_DIRECTORY_GROUP,
            Google_Service_Directory::ADMIN_DIRECTORY_GROUP_READONLY,

            Google_Service_Directory::ADMIN_DIRECTORY_GROUP_MEMBER,
            Google_Service_Directory::ADMIN_DIRECTORY_GROUP_MEMBER_READONLY,

            Google_Service_Books::BOOKS,
        ),
        $key,
        'notasecret'
    );
//
// Very important step:  the service account must also declare the
// identity (via email address) of a user with admin priviledges that
// it would like to masquerade as.
//
// See:  http://stackoverflow.com/questions/22772725/trouble-making-authenticated-calls-to-google-api-via-oauth
//
$cred->sub = '...';
$client->setAssertionCredentials($cred);
if ($client->getAuth()->isAccessTokenExpired()) {
    $client->getAuth()->refreshTokenWithAssertion($cred);
}
$_SESSION['service_token'] = $client->getAccessToken(); 
```

# php - ajax 调用带来 404 Not Found 错误，但代码有效

> ID：15241128
> 
> 赞同：1
> 
> 时间：2013-03-06T07:10:51.233
> 
> 标签：php, jquery

```
$(".click").click(function(){   
    var request = $.ajax({
        type: "POST",
        url: "post.php",
        data: {file: "123"}         
    });         
}); 
```

当此代码工作时，firebug 会出现此错误`"404 Not Found"`，`post.php`但无论如何代码都`post.php`可以成功运行。

这种行为的原因是什么，我该如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:51:42.053

只需尝试指定完整的 url 代替 post.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:12:15.680

路径错误`url: "post.php",`提供相对于您正在执行 AJAX 的位置的正确路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:18:53.437

这就是为什么成功处理程序不起作用的原因。你能检查一下完整的处理程序吗？如果完整处理程序没有问题，则通过执行（在打印任何输出之前）覆盖某些东西在服务器上发送的 404：header('HTTP/1.1 200 OK')。由于脚本已执行，这将覆盖疯狂的 404，jQuery 将接收该 200 并执行成功处理程序。

# javascript - 如何为同一个键设置多个值？

> ID：15241132
> 
> 赞同：0
> 
> 时间：2013-03-06T07:11:08.923
> 
> 标签：javascript, browser-extension, crossrider

我正在使用[Crossrider API](http://docs.crossrider.com/#!/api)来开发浏览器扩展。

[我想在Crossrider 本地数据库](http://docs.crossrider.com/#!/api/appAPI.db)中为同一个键添加多个值，

crossrider 支持的方法是[appAPI.db.set](http://docs.crossrider.com/#!/api/appAPI.db-method-set)

```
appAPI.db.set(key, value, [expires]) 
```

但我想保存许多值，例如：

```
appAPI.db.set('a.html',5,10,300) 
```

它以一个值作为参数，如何为同一个键存储多个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:16:26.770

```
appAPI.db.set( 'a.html', [5,10,30], [expires] ) 
```

然后检索它：

```
var myValues = appAPI.db.get('a.html'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:07:05.443

正如 Arno2501 所提到的，您可以使用[appAPI.db.set](http://docs.crossrider.com/#!/api/appAPI.db-method-set)和[appAPI.db.get](http://docs.crossrider.com/#!/api/appAPI.db-method-get)来处理扩展的本地数据库。appAPI.db API 使您[能够](http://docs.crossrider.com/#!/api/appAPI.db)以您喜欢的格式保存数据。因此，您可以使用前面描述的数组数据，或者根据您的要求将值保存为字符串或对象。此外，您可以指定希望数据在本地数据库中保留多长时间。

例如：

```
appAPI.db.set('key', ['a.html',5,10,300]); // Save data as an array
appAPI.db.set('key', ['a.html',5,10,300].join('&')); // OR as a string
appAPI.db.set('key', {'url':'a.html', 'values': [5,10,300]); // OR as an object

var keyValue = appAPI.db.get('key'); // keyValue contains the array, string, or object saved 
```

# php - Codeigniter：在 mac safari 中未检测到 vcf mime 类型

> ID：15241141
> 
> 赞同：2
> 
> 时间：2013-03-06T07:11:35.943
> 
> 标签：php, codeigniter, file-upload, vcf-vcard

在 mac safari 上上传 vcf 文件时遇到问题。

我在 config/mime.php 中添加了 vcf 所需的 mime 类型。

上传功能在 Mozilla 和其他浏览器中运行良好，但在 mac safari 上却出现错误：“不允许您尝试上传的文件类型”。

我搜索了很多，但所有人都在说我已经添加的 mime 类型。我添加了以下 mime 类型：

'vcf' => 数组（'application/octet-stream','text/x-vcard', 'application/vcard', 'text/anytext', 'text/directory', 'application/x-versit', '文本/x-versit'，'文本/x-vcalendar'）

我需要为 mac safari 做一些额外的事情吗？请让我知道我需要做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T05:44:40.843

试试这个：

您需要将以下内容添加到 $mimes 数组内的 /application/config/mimes.php 中。

```
'vcf'   =>  'application/octet-stream',
'vcf'   =>  'text/x-vcard' 
```

如果不工作试试这个：

```
'vcf' => 'text/plain' 
```

# javascript - asp.net中文本框的IP掩码控件？

> ID：15241148
> 
> 赞同：0
> 
> 时间：2013-03-06T07:11:50.630
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc

我需要为 asp.net 中的文本应用 IP 掩码。我尝试使用以下插件。 [http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/) 但是使用这个插件我面临一个问题。它总是期望所有 4 4 个八位字节中的 3 个数字。如果我试图提供一个 ip 地址 10.2.3.3，当从文本框中出来时，文本框正在清除。有时我需要禁用 IP 文本框。对我来说，屏蔽应该适用于类似的格式 10.2.3.3、100.2.33.33、10.2.34.34、10.22.333.444 是否有任何解决方法，或者我需要一个很好且有效的 IP 屏蔽。如果有的话，请分享

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:17:08.210

你可以使用这个：

```
<script src="https://jquery-input-ip-address-control.googlecode.com/files/jquery.input-ip-address-control-1.0.min.js">
<script>
    jQuery(function($){
        $('.ipv4').ipAddress();
        $('.ipv6').ipAddress({v:6});
    });
</script>
<body>
    <input type="text" class="ipv4" />
</body> 
```

文档/来源位于：[https ://code.google.com/p/jquery-input-ip-address-control/](https://code.google.com/p/jquery-input-ip-address-control/)

# jakarta-ee - 上传文件到数据库（Servlet + JSP + MySQL）

> ID：15241153
> 
> 赞同：2
> 
> 时间：2013-03-06T07:11:59.003
> 
> 标签：jakarta-ee

我正在遵循“ [http://www.codejava.net/coding/upload-files-to-database-servlet-jsp-mysql](http://www.codejava.net/coding/upload-files-to-database-servlet-jsp-mysql) ”网址中描述的示例。

我在 UploadServlet.java 文件第 36 行出现错误。我配置的其余内容没有问题。

```
 Please can anybody help me in this regards. 
```

在此先感谢，内哈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:55:50.837

您必须使用@MultipartConfig 注释您的servlet。

样本：

```
@MultipartConfig(maxFileSize = 16177215)<br/>
public class FileUploadDBServlet extends HttpServlet {
    // ...
} 
```

# php - php中while循环中的一维数组

> ID：15241154
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:12:05.563
> 
> 标签：php, arrays, multidimensional-array

我需要检索一个在 while 循环内的数组的值并在外面使用它。

我能够用这段代码做到这一点

```
while($row2 = mysql_fetch_assoc($result2))
    {

        $xyz[] = $row2;
    } 
echo $xyz; 
```

但是当我打印 $xyz 时，我得到了一个二维数组。有人可以告诉我如何从 while 循环中检索数组，使其仍然是一维数组

我感谢任何形式的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:13:22.617

如果您没有在您感兴趣的行中指定列的名称，那么您只需添加整行。

```
while($row2 = mysql_fetch_assoc($result2))
    {

        $xyz[] = $row2['whatever_your_column_name_is'];
    } 
print_r $xyz; 
```

顺便说一句，不推荐使用 mysql_* 函数，在新代码中使用它们不是一个好主意。请改用 mysqli 或 PDO。

此外， echo 只会打印单词“Array”。如果您想查看数组中的实际内容，则需要 print_r 或 var_dump 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:13:33.853

试试这个 ：

```
$xyz     = array();
while($row2 = mysql_fetch_assoc($result2))
    {

        $xyz[] = $row2['db field name'];
    } 
echo $xyz; 
```

# c - 用 C 语言制作没有框架的 GUI

> ID：15241155
> 
> 赞同：8
> 
> 时间：2013-03-06T07:12:06.897
> 
> 标签：c, user-interface, frameworks

我正在学习 C 编程语言的 C（我刚刚完成了第 2 章或第 2 单元），我浏览到最后，发现没有任何关于如何创建 GUI 的内容，以及我所查找的内容，看来我必须使用一个框架，但我讨厌这样的想法。我如何在没有框架的情况下创建 GUI？这些框架究竟是如何工作的，它们是用什么语言编写的？我没有制作一个庞大的应用程序，即使我需要一周的时间，编写一个 GUI 应用程序（用 C 语言）来做一些简单的事情（比如创建一个窗口）是否可行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T07:16:07.390

不是最好的道路。我会建议一个跨平台库，比如[GTK+](http://www.gtk.org/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T07:37:36.547

您可以基于 OpenGL 或 Xlib 构建自己的框架。[或者使用像Motif](http://www.opengroup.org/motif/)或[CGUI](http://cgui.sourceforge.net/)这样好的图形库。或者使用像 GTK 这样可怕的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T07:14:44.377

是的，不去。

C 不能做任何事情，除了管理内存和可能做软件中断（如果你做指针黑客）。

你需要一个图书馆来做任何事情。

GUI 非常复杂，你不能用它做任何“简单”的事情。这是我每天都面临的问题。

如果你想要一个 C 语言的窗口，你需要 X11、GTK、Windows API、Video hacking 或其他有趣的东西。

哦，视频黑客是行不通的，如果您在未经其许可的情况下尝试触摸视频内存，操作系统会抛出异常。

哦，还有你说的“简单按钮”，在Windows API中其实就是一个Window本身，不是很简单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T07:14:53.690

您可以使用 WINAPI 制作一个基本框架

[这里有一个很棒的教程。](http://www.zetcode.com/gui/winapi/)

使用 C 和 WINAPI 等原始框架的问题是管理布局和状态变得非常困难。

如果您以普通操作系统为目标，则`C`唯一的要求变得不合理。我建议您使用`C++`并在编译器中`Qt`编译您的`C`代码`C++`。

# ios - 类 -（MyAnnotation 注释）被释放

> ID：15241156
> 
> 赞同：0
> 
> 时间：2013-03-06T07:12:09.937
> 
> 标签：ios, objective-c, cocoa-touch, mapkit

> 类 -（MyAnnotation 注释）的实例 0x11d0ce4b0 已被释放，而键值观察者仍向其注册。观察信息被泄露，甚至可能被错误地附加到其他对象上。在 NSKVODeallocateBreak 上设置断点以在调试器中停止。这是当前的观察信息：

但是我在我的 dealloc 方法上设置了一个**断点**，并且在那里，我确实取消了这些通知的注册。调用了 Dealloc，我确实检查了它是否是同一个对象，并且所有取消注册的调用都在那里。所以我不知道它怎么*不能*移除观察者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:23:44.683

创建自定义`AnnotationView`：

```
#import <MapKit/MapKit.h>

@interface AnnotationView : MKPlacemark

@property (nonatomic, readwrite, assign) CLLocationCoordinate2D coordinate;

@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) NSString *subtitle;

@end 
```

而在`.m file`

```
#import "AnnotationView.h"

@implementation AnnotationView

- (id)initWithCoordinate:(CLLocationCoordinate2D)coordinate addressDictionary:(NSDictionary *)addressDictionary
{
    if ((self = [super initWithCoordinate:coordinate addressDictionary:addressDictionary]))
    {
        self.coordinate = coordinate;
    }
    return self;
}

@end 
```

// 使用注释添加`#import "AnnotationView.h"`你的相关`.m file`：

```
CLLocationCoordinate2D pCoordinate ;
pCoordinate.latitude = LatValue;
pCoordinate.longitude = LanValue;

// Create Obj Of  AnnotationView class  

AnnotationView *annotation = [[AnnotationView alloc] initWithCoordinate:pCoordinate addressDictionary:nil] ;

    annotation.title = @"I m Here";
    annotation.subtitle = @"This is Sub Tiitle";

[self.mapView addAnnotation:annotation]; 
```

**以上是如何创建的简单示例`AnnotationView`。**

# android - 弹出关闭android

> ID：15241159
> 
> 赞同：0
> 
> 时间：2013-03-06T07:12:15.737
> 
> 标签：android, popup

我正在android中实现一个弹出窗口。当我在弹出窗口之外单击时，我可以将其关闭，但是当我单击相同的图像视图/按钮时，我也想将其关闭。

```
1.on click on button1 it opens pop up
2.If I click outside it closes pop up
3.If I click on button1(when pop up is open), it closes pop and reopens it again 
```

我想要的是如果我点击button1（当弹出窗口打开时），它只会关闭弹出窗口并且不重新打开，除非第二次点击。

这可能吗？

注意：我不想在弹出窗口中有关闭按钮。

```
 pop_one.setOnClickListener(new OnClickListener() {

                 public void onClick(final View v) {

                    pop_one.getLocationOnScreen(location);

                         p = new Point();

                         p.x = location[0];

                         p.y = location[1];

                     popupshow(one_one_text,pop_one);

                 }
             }); 
```

方法是：

```
public void popupshow(String pop_text, ImageView pop_one) {

    int width = display.getWidth(); // deprecated
    System.out.println("jsfjsfjnsdf"+width);
    int new_width = width-(width/6) ;

    LayoutInflater layoutInflater = (LayoutInflater) getActivity()
            .getBaseContext().getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);
    View popupView = layoutInflater.inflate(
            R.layout.career_options_popup_short, null);

    final PopupWindow popupWindow = new PopupWindow(popupView, new_width,
            LayoutParams.WRAP_CONTENT);

    TextView popup_text = (TextView) popupView
            .findViewById(R.id.popup_text);
    popup_text.setMinimumWidth(300);
    popup_text.setText(pop_text);
    popupWindow.setBackgroundDrawable(new BitmapDrawable());
    popupWindow.setOutsideTouchable(true);

    popupWindow.showAsDropDown(popupView,p.x/10, p.y +p.x/8);

    System.out.println("value of x" + p.x+" "+p.y);

    //System.out.println("value of new width " + new_width+"  get width  "+popupWindow.getWidth()+" text box width "+popup_text.getWidth()+"pop view"+popupView.getWidth());
    popupWindow.setFocusable(true);

} 
```

问候，阿斯米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:19:47.113

我认为这将解决您的问题在按钮单击时调用

```
popupWindow.dismiss(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:36:12.700

您需要设置`setOutsideTouchable(false)`弹出窗口的属性

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T07:36:57.907

您需要的是`boolean`isShowing`boolean`在函数中将其设置为 true`popupshow`

像这样

```
public void popupshow(String pop_text, ImageView pop_one) {

    isShowing=true;
    int width = display.getWidth(); // deprecated
    System.out.println("jsfjsfjnsdf"+width);
    int new_width = width-(width/6) ;

    LayoutInflater layoutInflater = (LayoutInflater) getActivity()
            .getBaseContext().getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);
    View popupView = layoutInflater.inflate(
            R.layout.career_options_popup_short, null);

    final PopupWindow popupWindow = new PopupWindow(popupView, new_width,
            LayoutParams.WRAP_CONTENT);

    TextView popup_text = (TextView) popupView
            .findViewById(R.id.popup_text);
    popup_text.setMinimumWidth(300);
    popup_text.setText(pop_text);
    popupWindow.setBackgroundDrawable(new BitmapDrawable());
    popupWindow.setOutsideTouchable(true);

    popupWindow.showAsDropDown(popupView,p.x/10, p.y +p.x/8);

    System.out.println("value of x" + p.x+" "+p.y);

    //System.out.println("value of new width " + new_width+"  get width  "+popupWindow.getWidth()+" text box width "+popup_text.getWidth()+"pop view"+popupView.getWidth());
    popupWindow.setFocusable(true);

} 
```

现在，当您单击时，`button1`只需检查一下`boolean`

```
pop_one.setOnClickListener(new OnClickListener() {

                 public void onClick(final View v) {

                  if(isShowing)
                  {
                       popupWindow.dismiss();
                       isShowing=false;
                  }
                  else
                  {
                    pop_one.getLocationOnScreen(location);

                     p = new Point();

                     p.x = location[0];

                     p.y = location[1];

                     popupshow(one_one_text,pop_one);

}
                 }
             }); 
```

# sql - 否定要传递给 mssql 服务器的字符串

> ID：15241163
> 
> 赞同：0
> 
> 时间：2013-03-06T07:12:23.190
> 
> 标签：sql, sql-server-2008

我有一个充当过滤器字段的文本字段。它检查等于、包含和开头。我的问题是，在不更改我的任何代码的情况下，我可以通过使用像“！”这样的字符串来检查“不包含”、“不以”等等。运算符还是“<>”？

例如：我想获取所有没有'a'的记录，那么我可以将字符串传递为“！a”或“<>a”或其他东西，以便我可以获得所需的记录吗？（我知道这两个不起作用，因为我试过了。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:22:15.320

请参考[http://www.sqlservercentral.com/Forums/Topic1213442-338-1.aspx](http://www.sqlservercentral.com/Forums/Topic1213442-338-1.aspx) 可以用where子句中的case来解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:16:08.883

您必须使用关键字`NOT`，例如

```
SELECT * FROM Table WHERE Foo NOT LIKE '%bar%' 
```

# jquery-mobile - 为什么我的提交按钮事件没有触发？

> ID：15241166
> 
> 赞同：0
> 
> 时间：2013-03-06T07:12:37.330
> 
> 标签：jquery-mobile, event-handling, jquery, submit-button

我正在创建一个 jQuery 移动表单，它将在表单下方的 div 中显示计算出的答案。基本上，客户端提交按钮 但是，我真的没有运气尝试触发该事件。但它似乎正在重新加载页面或 DOM，我真的不知道并在点击提交按钮之前添加所选项目的值。似乎正在发布该表单，而该表单不应该发布任何内容。此表单从 JSON 文件中获取值并将它们添加为选项、单选按钮和复选框。单击提交按钮时，下面的代码似乎根本没有触发：

```
$("form").submit(function(event){
    alert("submit button clicked");
    event.preventDefault(); // stop default behaviour of submit
    event.stopPropagation(); //event handler moved to something else
    calculate(); //invokes the calculate method
} 
```

我不太确定我的表单需要哪些属性，因为这将是一个客户端提交按钮。我只有 id 并将所有 jQuery 移动控件包装在表单中。

我试图让提交事件正常工作的完整网站在这里：http: [//goo.gl/C9tW7](http://goo.gl/C9tW7)

更新：看起来我错过了事件处理程序声明上的井号。看起来这个特定问题已经解决了。提交按钮事件处理程序正在正确触发，但需要显示的计算未按应有的方式执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:35:56.507

从您的代码中，您缺少结束括号

```
$("form").submit(function(event){
    alert("submit button clicked");
    event.preventDefault(); // stop default behaviour of submit
    event.stopPropagation(); //event handler moved to something else
    calculate(); //invokes the calculate method
}); //<-- here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:16:22.467

确保您的按钮标记如下所示

`<button data-theme="b" id="submit" type="submit">Submit</button>`

并且希望您正确设置表单ID

# javascript - 在 node.js 中，是否有全局对象（或头对象）的名称？

> ID：15241167
> 
> 赞同：2
> 
> 时间：2013-03-06T07:12:41.430
> 
> 标签：javascript, node.js

如果环境是浏览器，那么我们可以使用

```
<script>
    console.log(this === window);
</script> 
```

测试`this`关键字是否指向`window`对象，该对象也是全局对象（或某些书称其为“头对象”）。

如果在node.js中，有没有类似的名字`window`，那么

```
console.log(this === globalObjectName); 
```

会打印出来是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:15:38.793

有`global`。从主级别运行时返回 true：

```
this === global 
```

但取决于您要测试的内容：

```
require.main === module 
```

可能更有帮助。这告诉您您的模块是作为主要模块运行还是“必需”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:23:39.937

我认为你的意思是**全局**对象。

您可以在[Node API](http://nodejs.org/api/globals.html)中找到它。

# ios - 使用 AFnetworking 异步下载图像有时会导致内存警告？

> ID：15241168
> 
> 赞同：1
> 
> 时间：2013-03-06T07:12:50.987
> 
> 标签：ios, memory-leaks, uiimageview, afnetworking

大家好，我正在使用 AFNetworking 在滚动视图中下载图像。假设要下载大约 20 张图像。

```
[image setImageWithURL:[NSURL URLWithString: [@"example.com"]]; 
```

一切正常，直到如果有 100 个大小为 300 k 的图像，那么它会导致内存警告并且应用程序被挂起并关闭。

1.  我的问题是它在某处导致内存泄漏吗？
2.  我应该使用表格视图而不是滚动视图吗？

谢谢 ：）

# yii - yii 数据检索查询

> ID：15241172
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:13:03.880
> 
> 标签：yii

我有一个表`tablename:user` 列名称：`name`, `dept`, `area`, `active`. 我已经在数据库中添加了一些示例数据但是在网格视图中我只想显示具有活动 =1 的列的数据谁能帮我在查询中添加这个条件，我正在使用 mysql 数据库

```
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
    //'reports_to' => array(self::BELONGS_TO, 'Student', 'id'),
    );
}

public function attributeLabels()
{
    return array(
        'user_id' => 'User',
        'user_name' => 'User Name',
        'userpass' => 'Userpass',
        'userdept' => 'Userdept',

    );
}

public function search()
{
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria=new CDbCriteria;

    $criteria->compare('user_id',$this->user_id,true);
    $criteria->compare('user_name',$this->user_name,true);
    $criteria->compare('userpass',$this->userpass,true);
    $criteria->compare('userdept',$this->userdept,true);
    $criteria->compare('reports_to',$this->reports_to,true);

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

提前致谢

# php - Wordpress 标题 PHP 自动换行

> ID：15241178
> 
> 赞同：-2
> 
> 时间：2013-03-06T07:13:25.313
> 
> 标签：php, wordpress, word-wrap

我希望 php 计算我的 Wordpress 帖子标题中的字符，如果超过 50，则在第 50 个字符所在的单词之前插入一个中断。

为此，我认为[wordwrap](http://php.net/manual/en/function.wordwrap.php)是最好的选择？

我在我的模板中使用以下代码，它只是在不插入中断的情况下回显标题。有任何想法吗？

```
<?php
$text = the_title_attribute();
$newtext = wordwrap($text, 50, "<br />\n");
echo $newtext;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:15:56.733

解决了 - 我需要使用 get_the_title(); 反而。

工作代码：

```
<?php
$text = get_the_title();
$newtext = wordwrap($text, 50, "<br />\n");
echo $newtext;
?> 
```

# c# - WP7 中的隔离存储问题

> ID：15241180
> 
> 赞同：1
> 
> 时间：2013-03-06T07:13:27.303
> 
> 标签：c#, windows-phone-7, c#-4.0, wpf-controls

我在wp7中面临以下问题

**“类型 'System.Windows.Media.Transform' 不能在 C# 中序列化”**

当我调用以下方法将我的列表数据保存到隔离存储时

SerializeHelper.SaveSetting("myfile.Xml",swaplist);

然后我得到了例外。

```
public static class SerializeHelper
    {
        public static void SaveSetting<T>(string fileName, T dataToSave)
        {
            using (var store = IsolatedStorageFile.GetUserStoreForApplication())
            {
                try
                {
                    using (var stream = store.CreateFile(fileName))
                    {
                        var serializer = new DataContractSerializer(typeof(T));
                        serializer.WriteObject(stream, dataToSave);
                    }
                }
                catch (Exception e)
                {
                    MessageBox.Show(e.Message);
                    return;
                }
            }
        }

    } 
```

我附上列表数据结构的屏幕截图![在此处输入图像描述](../Images/ba563247a7e1eefdd665a523e7ec8f73.png)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T09:55:52.217

感谢您添加屏幕截图...并粘贴一些代码。实在看不出有什么不对。

你的虚拟机只公开公共原始/可序列化类型吗？我过去曾使用过这样的东西来序列化到 iso 存储。

```
public static void SaveObjectToStorage<T>(T ObjectToSave)
{
    TextWriter writer;

    using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
    {
        using (IsolatedStorageFileStream fs = isf.OpenFile(GetFileName<T>(), System.IO.FileMode.Create))
        {
            writer = new StreamWriter(fs);
            XmlSerializer ser = new XmlSerializer(typeof(T));
            ser.Serialize(writer, ObjectToSave);
            writer.Close();
        }

    }
} 
```

# java - 从属性文件中删除条目

> ID：15241186
> 
> 赞同：6
> 
> 时间：2013-03-06T07:13:49.327
> 
> 标签：java, properties, properties-file

如何从属性文件中删除键和值？我的属性文件有以下内容：

```
key1=value1 
key2=value2 
```

我使用下面的代码删除了该条目`key2=value2`。之后，现在文件具有以下值：

```
key1=value1 
key2=value2
Wed Mar 06 12:36:32 IST 2013 
key1=value1 
```

删除条目的java代码：

```
FileOutputStream out1 = new FileOutputStream(file, true);
prop.remove(key);
prop.store(out1,null); 
```

我在做什么错误。如何在写入之前清除文件的全部内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T07:19:44.383

1) 属性文件内容应如下所示：

```
key1=value1
key2=value2 
```

2）您以附加模式打开文件，这是错误的。它应该是：

```
new FileOutputStream(file); 
```

`out1`3）明确关闭，Properties.store API：

> 此方法返回后，输出流保持打开状态。

如果不想使用Properties.store，可以直接写Properties

```
PrintWriter pw = new PrintWriter("test.properties");
for(Entry e : props.entrySet()) {
    pw.println(e);
}
pw.close(); 
```

# c# - Workflow Foundation 4.5 如何在异常上重复活动

> ID：15241187
> 
> 赞同：0
> 
> 时间：2013-03-06T07:13:50.473
> 
> 标签：c#, .net, workflow-foundation, workflow-foundation-4.5

我的活动有时会引发异常。我想重复它，直到它成功完成。如何使用 Workflow Foundation 4.5 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:42:16.197

我通过将我的活动添加到位于 DoWhile 活动内部的 TryCatch 活动中来解决了这个问题。

# java - 在java中检测回车键

> ID：15241189
> 
> 赞同：0
> 
> 时间：2013-03-06T07:13:56.363
> 
> 标签：java

我尝试使用扫描仪获取用户输入，如果用户按 Enter 键，则继续执行下一个输入语句。但它一次打印所有。

```
public class MainRDS 
{
    public static void main(String[] args) 
    {
        Scanner in = new Scanner(System.in);
        String path;
        String name;
        String ext;
        String date;

        System.out.println("Directory search by path, name, extension, content and date.");
        System.out.print("\nEnter Starting directory for the search (link c:"+"\\"+"temp) : ");
        path = in.next();

        System.out.print("\nEnter the file name (like myFile or enter for all) : ");

        if((name = in.nextLine()).length() > 0)
        System.out.print("\nEnter the file extenstion (like txt or enter for all) : ");

        if((ext = in.nextLine()).length() > 0)
        System.out.print("\nEnter last modified date (like 11/21/2012 or enter for any) : ");

        date = in.nextLine();
    }
} 
```

输出 ：

```
Directory search by path, name, extension, content and date.

Enter Starting directory for the search (link c:\temp) : c:

Enter the file name (like myFile or enter for all) : myfile

Enter last modified date (like 11/21/2012 or enter for any) : 
```

所需输出：

```
Directory search by path, name, extension, content and date.  
Enter starting directory for the search (like c:\temp): c:\temp 
Enter the file name (like myFile or enter for all):  
Enter the file extension (like txt or enter for all): txt 
Enter content to search for (like comp121 or enter for any):  
Enter last modified date (like 11/21/2013 or enter for any): 11/1/2011 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:38:03.883

知道了！

你需要使用：

```
path = in.nextLine(); 
```

否则，`name = in.nextLine()`捕获路径的“输入”键并且不会获得任何值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:24:36.417

你的代码很好。你只需要替换你的第一行

```
Scanner in = Scanner(System.in); 
```

和

```
Scanner in =new Scanner(System.in); 
```

我无法理解您是如何测试此代码的，因为由于`Scanner in = Scanner(System.in);`这一行，这不是一个正在运行的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:26:30.303

改变

```
path = in.next(); 
```

至

```
path = in.nextLine(); 
```

测试了一下，一切都打印出来了，运行良好！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T07:22:00.473

我刚刚测试了你的代码，它确实让用户按下“输入”键。你能更具体地解释一下你在寻找什么吗？正如其他人所说，只需更改您的扫描仪：

```
Scanner in = new Scanner(System.in); 
```

# php - 从分层表制作一个平面数组

> ID：15241190
> 
> 赞同：1
> 
> 时间：2013-03-06T07:14:07.077
> 
> 标签：php, mysql, arrays, hierarchy

我有一个带有 id、parent_id 和 name 字段的表，
父母可以有很多孩子，但孩子只有一个父母。

在获取时，数组看起来像

```
Array
(
[0] => Array
    (
        [id] => 1
        [parent_id] => 0
        [name]=>firstName
    )

[1] => Array
    (
        [id] => 2
        [parent_id] => 1
        [name]=>childFirstName
    )

[2] => Array
    (
        [id] => 3
        [parent_id] => 0
        [name]=>SecondName
    )

[3] => Array
    (
        [id] => 4
        [parent_id] => 3
        [name]=>childSecondName
    )

) 
```

从这张表中，我想要一个平面数组，应该是这样的..

//数组的key是表行的id，id对应的值是parent_name >name

```
Array
 ( 
   [1]=>[firstName],// [row_id]=>[name with parent]
   [2]=>[firstName>childFirstName],
   [3]=>[secondName],
   [4]=>[secondName>childSecondName]
 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:37:35.540

```
<?php

$arr=array(
array("id" => 1, "parent_id" => 0, "name"=>"firstName"),
array("id" => 2, "parent_id" => 1, "name"=>"childFirstName"),
array("id" => 3, "parent_id" => 0, "name"=>"SecondName"),
array("id" => 4, "parent_id" => 3, "name"=>"childSecondName")
);

class test
{
  var $arr=array();

  function get_name($id)
  {
     $str='';
     if(isset($this->arr[$id]))
     {
        $parent_id=$this->arr[$id]['parent_id'];
        if($parent_id!=0) $str=$this->get_name($parent_id).'>';
        $str.=$this->arr[$id]['name'];
     }
     return $str;
  }

  function convert($arr)
  {
     foreach($arr as $row)
     {
       $this->arr[$row['id']]=$row;
     }

     reset($this->arr);
     $res=array();
     foreach($this->arr as $id=>$row)
     {
       $res[$id]=$this->get_name($id);
     }
     return $res;
  }
}

$c=new test();
$res=$c->convert($arr);
print_r($res); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:29:11.533

假设您将 $items 放入 $i 并且您的新数组是 $n 在您的 foreach 中，请使用：

```
foreach($items as $i){
    $p = $i['parent_id'];
    $n[$i['id']]=($p == 0) ? [$i['name']]: [$n[$p][0]=>$i['name']];
} 
```

这仅在父母没有父母时才有效。作为更谨慎的代码，

```
foreach($items as $i){
    $p = $i['parent_id'];
    if($p == 0){                           //if no parent
        $n[$i['id']]=[$i['name']];
        continue;
    }                                     // if has parent from now on...
    $k = array_keys($n[$p]);              // if parent has a parent we have to
    $k = $k[0];                           // get the correct key for name
    $n[$i['id']]=[$n[$p][$k]=>$i['name']];
} 
```

这样上面的代码将在多个层次结构级别上工作。

# sql - sql server 2012标准版如何压缩数据库表

> ID：15241200
> 
> 赞同：1
> 
> 时间：2013-03-06T07:14:55.010
> 
> 标签：sql, sql-server-2012

如何在 sql server 2012 标准版中压缩数据库表。

以下查询与我的具有企业版但具有标准版的实时服务器的开发机器一起使用。而且我的数据库太大，需要压缩。

ALTER TABLE [dbo].Table1 REBUILD PARTITION = ALL WITH (DATA_COMPRESSION = PAGE)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T07:26:55.673

数据压缩仅是企业功能，有关每个版本中可用功能的详细信息，请参阅以下链接：

[http://technet.microsoft.com/en-us/library/cc645993.aspx](http://technet.microsoft.com/en-us/library/cc645993.aspx)

# vim - 在文件末尾追加一行

> ID：15241201
> 
> 赞同：1
> 
> 时间：2013-03-06T07:14:57.397
> 
> 标签：vim, octave

在 VIM 中，我可以通过这个映射执行 Octave 脚本：

```
map <F6> :w<CR>:!run-octave -q % <CR> 
```

然而，正如我最近发现的那样，除非脚本末尾有“暂停”命令，否则 Octave 不会显示任何绘图。

如何映射 F6 以便在每次调用该键时自动添加此暂停命令？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T08:36:45.457

这可能不是处理从 Vim 运行 Octave 脚本的最佳方法，请参阅下面的替代方法。

### 请求的解决方案

要完成您想要的，请在某处定义以下函数：

```
function! RunOctave()
  let save_cursor = getpos('.')
  call append(line('$'), "pause")
  write
  execute "!run-octave -q " . expand('%')
  $delete _
  write
  call setpos('.', save_cursor)
endfunction 
```

并定义一个映射来调用它：

```
map <F6> :w<CR>:call RunOctave<CR> 
```

### 更好的方法

我开始运行与上述类似的 Octave，但由于我倾向于使用速度较慢的计算机，这对我来说不是一个好的解决方案。相反，我将 Vim 配置为远程控制 Octave 的一个实例。

这可以通过终端多路复用器来完成，类似于[我在这里为 Matlab 建议的](https://stackoverflow.com/a/12307838/1331399)，例如：

```
tmux new-session -s octave "octave -q" 
```

为了获得最佳灵活性，我希望能够从 Vim 评估八度音阶中的单行：

```
imap <buffer> <F1> <Esc>:!tmux send-keys -t octave "<C-r>=getline('.')<CR>"<C-r>=nr2char(13)<CR><CR>a
nmap <buffer> <F1>      :!tmux send-keys -t octave "<C-r>=getline('.')<CR>"<C-r>=nr2char(13)<CR><CR> 
```

评估视觉选择：

```
vmap <buffer> <F2> call ExecSelection()<CR><CR> 
```

这取决于以下功能：

```
let s:octave_selection = '/var/tmp/vim_octave_selection.m'

function! ExecSelection()
  if line(".") == line("'<'")
    exec ".write! " . s:octave_selection
  else
    exec ".write! >> " . s:octave_selection
  endif

  if line(".") == line("'>")
    exec "!tmux send-keys -t octave 'run " . s:octave_selection . "'" . nr2char(13)
  endif
endfunction 
```

最后但并非最不重要的一点是，评估整个文件：

```
imap <buffer> <F3> <Esc>:!tmux send-keys -t octave "<C-r>=expand('%:t:r')<CR>"<C-r>=nr2char(13)<CR><CR>a
nmap <buffer> <F3>      :!tmux send-keys -t octave "<C-r>=expand('%:t:r')<CR>"<C-r>=nr2char(13)<CR><CR> 
```

最后一个映射要求缓冲区的当前工作目录与 Octave 脚本的工作目录相同。

# windows-phone-7 - 在市场上找不到我的 windowsphone 应用程序

> ID：15241202
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:14:57.947
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

我已经在 windows phone 市场提交了我的应用程序。

我选择了印度作为市场，提交时价格为 0.0（免费应用）。

我试图从我的系统下载它，但它显示

“您无法在该地区获取应用程序。您可以查看您所在地区的 Windows Phone 应用商店以查看该应用程序是否可用”

当我尝试从我的手机下载该应用程序时，我在市场上找不到该应用程序。

我正在使用诺基亚 Lumia510，并使用同一个帐户在移动设备上登录。

您能否解释一下为什么会发生这种情况，以及我应该怎么做才能在移动市场上看到我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:27:48.477

你确定这个应用程序已经被批准了吗？如果你想使用它，页面左下角有一个链接，上面写着“手动下载并安装”，但我猜通过查看该页面，微软尚未批准你的应用程序用于商店 - 它可以需要几天，根据您的链接，您的应用是在过去 24 小时内上传的

# python - PyGTK 剪贴板 set_text 的效果仅在进程运行时持续存在

> ID：15241203
> 
> 赞同：3
> 
> 时间：2013-03-06T07:15:00.823
> 
> 标签：python, gtk, pygtk, clipboard

我有以下脚本`clip-test.py`：

```
#!/usr/bin/python

import gtk

gtk.Clipboard().set_text("exciting clipboard contents")
gtk.Clipboard().set_can_store(None) # not sure if these last two lines are useful
gtk.Clipboard().store() 
```

当我这样运行时：

```
python clip-test.py 
```

它不起作用。剪贴板没有改变。我们可以通过在交互模式下运行而不让进程完成来阐明问题：

```
python -i clip-test.py 
```

在离开交互模式之前，请尝试在某处粘贴。剪贴板已更改；有用。关闭python后，剪贴板恢复到原来的样子。

一种想法是，这与代码默认访问的剪贴板`display`和`selection`剪贴板有关，但我尝试改变这些参数，但仍然无法正常工作。

我正在使用 Python 2.7.3 和 python-gtk2 2.24.0-3build1，运行 Kubuntu 13.04。

是什么赋予了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T09:10:17.580

这不是 GTK 或 PyGTK 问题，而是 X11 复制和粘贴工作方式的结果。当您按下`^C`X11 应用程序时，您还没有真正复制任何内容，您只是指示应用程序记住数据以供以后使用。*只有在启动“粘贴”时*，数据才会传输到粘贴器。这可以节省资源并使复印机和粘贴机能够协商最适合他们的数据传输格式。这在[Jamie Zawinski 的经典文本](http://www.jwz.org/doc/x-cut-and-paste.html)中有详细解释。

现代桌面环境[确实会尝试保留](http://www.freedesktop.org/wiki/ClipboardManager)剪贴板内容，但您必须进入主循环并在其中停留足够长的时间，以便剪贴板管理器抓取您的剪贴板内容：

```
#!/usr/bin/python

import gtk, gobject

gtk.Clipboard().set_text("exciting clipboard contents")
gobject.timeout_add(100, gtk.main_quit)
gtk.main() 
```

并且应该能够加快该过程，一些谷歌搜索显示`set_can_store()`程序[正在使用它们](http://theravingrick.blogspot.com/2011/08/coding-copy-and-paste-functionality.html)将剪贴板数据保存在销毁处理程序中。不清楚为什么它对你不起作用——也许你应该打电话而不是.`store()``set_can_store([("UTF8_STRING", 0, 0)])``set_can_store(None)`

# spring - 用于正确获取用户的 UserDetailsS ervice 配置

> ID：15241204
> 
> 赞同：0
> 
> 时间：2013-03-06T07:15:01.370
> 
> 标签：spring, spring-security

我从上一个[Get authenticated user entity Spring MVC](https://stackoverflow.com/questions/15225484/get-authenticated-user-entity-spring-mvc/15225612#15225612)中创建了这个主题，我在其中询问了有关正确获取经过身份验证的用户实体的问题。如果我的 UserDetailsS​​ervice 配置正确，我建议 Principal 对象（例如，在我的视图`<sec:authentication property="principal.customFieldName" />`中）可以访问我的自定义字段。我的 UserDetailsS​​ervice 是否配置正确以完成此功能？

```
@Service("userDetailsService")
public class UserDetailsServiceImpl implements UserDetailsService {
    private static final Logger logger = Logger.getLogger(UserDetailsServiceImpl.class);

    @Autowired
    @Qualifier("hibernateUserDao")
    private UserDAO userDAO;

    @Override
    @Transactional(readOnly = true)
    public org.springframework.security.core.userdetails.UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException, DataAccessException {
        UserDetails user = userDAO.findByLogin(userName);

        if (user == null) {
            logger.error("User was not found! Input login: " + userName);
        }

        return buildUserFormUserEntity(user);
    }

    @Transactional(readOnly = true)
    private org.springframework.security.core.userdetails.User buildUserFormUserEntity(UserDetails userDetails) {
        boolean enableStatus = userDetails.isEnabled();
        String userName = userDetails.getLogin();
        String password = userDetails.getPassword();
        boolean enabled = enableStatus;
        boolean accountNonExpired = enableStatus;
        boolean credentialsNonExpired = enableStatus;
        boolean accountNonLocked = enableStatus;

        Collection<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();
        authorities.add(new SimpleGrantedAuthority(userDetails.getRole()));

        User springSecurityUser = new User(userName, password, enabled, accountNonExpired, credentialsNonExpired, accountNonLocked, authorities);
        return springSecurityUser;
    }

    public UserDAO getUserDAO() {
        return userDAO;
    }

    public void setUserDAO(UserDAO userDAO) {
        this.userDAO = userDAO;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:44:00.093

我认为您需要一些额外的步骤才能成功使用

```
<sec:authentication property="principal.customFieldName" /> 
```

在某些页面上：

1.  添加实现`org.springframework.security.core.userdetails.UserDetails`接口的自定义用户对象。最简单的方法是扩展现有`org.springframework.security.core.userdetails.User`类：`class CutomUser extends User`
2.  将您的`customFieldName`属性添加到`CutomUser`类中。
3.  在您的方法`CutomUser`中用作返回类型`UserDetailsServiceImpl.loadUserByUsername(...)`。此时不要忘记填写`customFieldName`。

# jquery - jQuery滚动全屏背景

> ID：15241210
> 
> 赞同：1
> 
> 时间：2013-03-06T07:15:31.750
> 
> 标签：jquery, scroll, fade

我有一个网站，将有多个全屏背景（嗯，100% 宽度和 1024 像素设置高度）

该脚本所做的（或应该做的）是在您向下滚动时淡出一个 div 并淡入另一个 div。

然而，为了让生活更轻松，我使用了 nth-child 选择器——这在前两个 div 上效果很好，但在之后的任何一个上都不起作用。

有什么帮助吗？

```
$(document).ready(function(){
var didScroll = false;
var $window = $(window);

$(window).scroll(function(){
  didScroll = true;
});

window.setInterval(function () {
if (didScroll) {
  if (1-$window.scrollTop()/1024 > -10) {
      $('.item:nth-child(even)').css({opacity: 1-$window.scrollTop()/1024});
      $('.item:nth-child(odd)').css({opacity: 1*$window.scrollTop()/1024});
  }
  didScroll = false;
}
}, 50);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:41:49.433

nth-child**不限**于偶数或奇数，只需使用您想要的任何数字即可。例如：

```
$(".item:nth-child(3)").css({opacity: 1-$window.scrollTop()/1024}) 
```

**编辑：**

现在这样的事情应该可以工作：

```
 $('.item:nth-child(1)').css({opacity: 1-$window.scrollTop()/1024});
  $('.item:nth-child(2)').css({opacity: 2-$window.scrollTop()/1024});
  $('.item:nth-child(3)').css({opacity: 3-$window.scrollTop()/1024}); 
```

JSFiddle： http: [//jsfiddle.net/yDuh7/](http://jsfiddle.net/yDuh7/) 或者另一个：http: [//jsfiddle.net/yDuh7/1/](http://jsfiddle.net/yDuh7/1/)

# javascript - 谷歌图表“K”而不是数千

> ID：15241212
> 
> 赞同：10
> 
> 时间：2013-03-06T07:15:39.993
> 
> 标签：javascript, google-visualization

我正在使用谷歌图表工具（[https://developers.google.com/chart/](https://developers.google.com/chart/)）来显示数据，有时我的值非常高（100.000+）。

我的图表尺寸非常小，100.000 不适合，但 100k 可以。如果值高于 10k，有没有办法可以配置 vAxis 以在“K”中显示 vAxis 上的数字？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-10-06T07:50:35.063

简要地，

```
options['vAxis']['format'] = 'short'; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-07T00:07:56.637

Google Visualization 使用[ICU 十进制格式](http://icu-project.org/apiref/icu4c/classDecimalFormat.html#_details)的子集，可以使用`DataView`或 设置`vAxis.format`。

不幸的是，该子集不包括除以 1,000 的能力。因此，您需要先操作数据。假设这是您的数据：

```
 var data = google.visualization.arrayToDataTable([
    ['x', 'Data'],
    ['A', 123456],
    ['B', 234567],
    ['C', 456789],
    ['D', 890123],
    ['E', 789012],
    ['F', 789012],
    ['G', 890123],
    ['H', 456789],
    ['I', 234567],
    ['J', 345678],
    ['K', 345678],
    ['L', 345678],
    ['M', 123456],
    ['N', 123456]
  ]); 
```

我们需要克隆数据，然后将每个点除以 1,000。这是一个简单的方法：

```
 var formattedData = data.clone();
  for (var i = 0; i < formattedData.getNumberOfRows(); i++) {
    var dataPoint = formattedData.getValue(i, 1);
    formattedData.setValue(i, 1, dataPoint / 1000);
  } 
```

然后我们可以将其绘制成图表并将格式设置为：`vAxis: {format: "#,###k"}`-- 但是有一个问题。现在，当您将鼠标悬停在系列上时，您会注意到 890,123 显示为 890.123！这不好，所以我们需要通过在循环中添加另一行来解决这个问题：

```
 var formattedData = data.clone();
  for (var i = 0; i < formattedData.getNumberOfRows(); i++) {
    var dataPoint = formattedData.getValue(i, 1);
    formattedData.setValue(i, 1, dataPoint / 1000);
    formattedData.setFormattedValue(i, 1, dataPoint.toString());
  } 
```

这将使数据看起来像 890123，但绘制为 890.123，因此轴看起来不错。如果你想添加逗号，有这样的资源，[如果](http://geekswithblogs.net/rajeshatdotnet/archive/2008/04/05/121058.aspx)[你](http://www.mredkj.com/javascript/numberFormat.html)愿意，你可以使用。我不会假设知道您的数据格式，因此如果您想要千位分隔符、小数点或鼠标悬停在图表上的其他任何内容，我会让您自己计算出该部分。

这是最终的工作代码：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['x', 'Data'],
    ['A', 123456],
    ['B', 234567],
    ['C', 456789],
    ['D', 890123],
    ['E', 789012],
    ['F', 789012],
    ['G', 890123],
    ['H', 456789],
    ['I', 234567],
    ['J', 345678],
    ['K', 345678],
    ['L', 345678],
    ['M', 123456],
    ['N', 123456]
  ]);

  // Clone data and divide by 1,000 in column 1
  var formattedData = data.clone();
  for (var i = 0; i < formattedData.getNumberOfRows(); i++) {
    var dataPoint = formattedData.getValue(i, 1);
    formattedData.setValue(i, 1, dataPoint / 1000);
    formattedData.setFormattedValue(i, 1, dataPoint.toString());
  }

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
      draw(formattedData, {curveType: "function",
                  width: 500, height: 400,
                  vAxis: {format: "#,###k"}}
          );
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-01T06:44:42.293

[Number Formats](https://developers.google.com/chart/interactive/docs/customizing_axes)，您可以使用 hAxis.format 和 vAxis.format 控制标签编号的格式。

例如，{hAxis: { format:'#,###%'} } 显示值 10、7.5 和 0.5 的值“1,000%”、“750%”和“50%”。您还可以提供以下任何预设：

```
{format: 'none'}: displays numbers with no formatting (e.g., 8000000)
{format: 'decimal'}: displays numbers with thousands separators (e.g., 8,000,000)
{format: 'scientific'}: displays numbers in scientific notation (e.g., 8e6)
{format: 'currency'}: displays numbers in the local currency (e.g., $8,000,000.00)
{format: 'percent'}: displays numbers as percentages (e.g., 800,000,000%)
{format: 'short'}: displays abbreviated numbers (e.g., 8M)
{format: 'long'}: displays numbers as full words (e.g., 8 million) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T07:47:53.333

尝试将[displayExactValues](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline#Configuration_Options)配置选项设置为`true`：

> 是否在图表顶部显示缩短的、舍入的值，以节省空间；false 表示可能。例如，如果设置为 false，56123.45 可能会显示为 56.12k。

这应该给你你想要的行为，虽然它没有给你明确的能力来设置你希望它开始使用'k'后缀的值。

# windows-server-2008-r2 - Windows 徽标工具包重新安装/卸载

> ID：15241215
> 
> 赞同：0
> 
> 时间：2013-03-06T07:15:50.000
> 
> 标签：windows-server-2008-r2, driver-signing

我必须重新安装 Windows 徽标工具包，但我遇到以下问题；

[http://i.stack.imgur.com/Fs0jb.png](http://i.stack.imgur.com/Fs0jb.png)

我试图卸载所有 Logo Kit 的东西，但没有成功。

如何卸载/重新安装所有 Windows Logo Kit 东西？任何想法或建议都会受到欢迎。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:35:23.917

我终于通过全新的操作系统安装和逐步安装 WLK 解决了这个问题。

干杯

# symfony - 为 FOSUserBundle 动态更改服务参数值

> ID：15241218
> 
> 赞同：3
> 
> 时间：2013-03-06T07:15:57.250
> 
> 标签：symfony, dependency-injection, fosuserbundle

我之前询问过[为 FOSUserBundle 使用多个实体管理器，](https://stackoverflow.com/questions/14475180/multiple-entity-manager-for-fosuserbundle)结果发现 FOSUserBundle （部分）支持它。我需要做的就是在参数中指定我想使用的连接/管理器，如此[处](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/doctrine.md)`model_manager_name`所述

```
fos_user:
# ........
    model_manager_name: account1 
```

*示例 app/config/config.yml*

有了这个 FOSUserBundle 将使用`account1`连接，并使用该连接数据库中的用户信息。

```
doctrine:
dbal:
    default_connection:       default
    connections:
    account2:
        dbname:           account2
        user:             account2
        password:         password2
        driver:   pdo_mysql
        host:     localhost
        port:     ~
        charset:  UTF8
    account1:
        dbname:           account1
        user:             account1
        password:         password1
        driver:   pdo_mysql
        host:     localhost
        port:     ~
        charset:  UTF8
    default:
        dbname:           account
        user:             account
        password:         password
        driver:   pdo_mysql
        host:     localhost
        port:     ~
        charset:  UTF8 
```

我的应用程序要求当用户访问（例如）[http://myapp.com/a/account1](http://myapp.com/a/account1)时，应用程序将使用`account1`连接，而访问[http://myapp.com/a/account2](http://myapp.com/a/account2)将使用`account2`连接. 对于我的应用程序的逻辑，这很容易从我的控制器中完成，因为我可以使用以下内容；

```
$em = $this->get('doctrine')->getManager('account2');
$repository = $this->get('doctrine')->getRepository($class, 'account2') 
```

但是，对于登录部分，这并不容易。FOSUserBundle 作为服务容器运行，我不知道在哪里/如何动态更改`model_manager_name`' 值。我确实知道，`FOS\UserBundle\DependencyInjection\FOSUserExtension`我可以通过以下方式手动更改其值；

```
class FOSUserExtension extends Extension
{
public function load(array $configs, ContainerBuilder $container)
{
    $processor = new Processor();
    $configuration = new Configuration();

    $config = $processor->processConfiguration($configuration, $configs);

    $config['model_manager_name'] = 'account2';
    // ................. 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T08:52:10.947

`fos_user.model_manager_name`确切地说，配置存储在容器中。

您可以编写编译器通行证。这将在冻结容器之前执行，它是您可以更改容器的最后一个地方，它是基于其他服务更改容器的地方。

您的编译器传递将如下所示：

```
// src/Acme/DemoBundle/DependencyInjection/Compiler/ChangeModelManagerPass.php
namespace Acme\DemoBundle\DependencyInjection\Compiler;

use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
use Symfony\Component\DependencyInjection\ContainerBuilder;

class ChangeModelManagerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        $request = $container->get('request');
        $uri = $request->getUri();

        // check if the uri matches some pattern which will cause a change in the
        // `model_manager_name` setting
        if (...) {
            // ... do some stuff to get the correct model manager name

            // set the setting
            $container->setParameter('fos_user.model_manager_name', ...);
        }
    }
} 
```

[在文档](http://symfony.com/doc/2.0/cookbook/service_container/compiler_passes.html)或Richard Miller的[这篇精彩博客文章](http://richardmiller.co.uk/2012/02/15/symfony2-service-container-compiler-passes/)中阅读有关编译器传递的更多信息。

# android - Android requestLocationUpdates 失败

> ID：15241226
> 
> 赞同：0
> 
> 时间：2013-03-06T07:16:19.720
> 
> 标签：android, gps, location

我启动了一项服务并尝试使用 requestLocationUpdates，但由于存在 NULLpointerException，该应用程序失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:22:06.347

好像你没有初始化`locationManager`它刚刚声明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:21:35.357

> NullPointerException 的原因

您没有初始化 locationManger。

以这种方式初始化。

```
locationManager = (LocationManager) this.getSystemService(LOCATION_SERVICE);
Location myCurrentLocation = locationManager.getLastKnownLocation(getBestProvider()); 
```

# java - hql查询类似于hibernate中的SaveOrUpdate

> ID：15241233
> 
> 赞同：1
> 
> 时间：2013-03-06T07:16:29.827
> 
> 标签：java, sql, spring, hibernate, hql

我们`saveOrUpdate(Object)`在使用 Session 时在 Hibernate 中具有功能，并且更容易，因为我们不必检查是否执行保存或更新。但是`insert(Object)`and`update(Object)`函数仅适用于无状态会话，我需要使用无状态会话，因为我处理数十万条记录并且休眠正在消耗内存。有什么方法可以复制`saveOrUpdate(Object)`无状态会话中的功能。或者无论如何通过使用 Hql 查询而不是使用对象通过休眠来完成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:49:24.030

根据 StatelessSession JavaDoc

> 无状态会话不实现一级缓存，也不与任何二级缓存交互，也不实现事务性后写或自动脏检查，也不将操作级联到关联的实例。无状态会话会忽略集合。通过无状态会话执行的操作绕过 Hibernate 的事件模型和拦截器。由于缺少一级缓存，无状态会话容易受到数据别名效应的影响

它不维护一级缓存，因此不知道对象的当前状态（瞬态、持久、分离或删除），因此无法做出有意识的决定。您可以使用 HQL 查询数据库中是否存在相同的记录，并调用相应的方法`insert()`或`update()`。但这是代价高昂的。

如果有十万条记录要更新或插入，最好使用基本的 JDBC 而不是休眠。这将解决你的记忆问题。

# javascript - 在 for 循环完成其交互之前，如何让 for 循环之后的代码不运行？

> ID：15241239
> 
> 赞同：0
> 
> 时间：2013-03-06T07:16:44.387
> 
> 标签：javascript, jquery

如何在 for 循环完成所有交互之前停止警报功能的运行？

```
 $(document).ready(function() {
    for (i = 1; i <= 8; i++) {
        $('#ponyDiv').animate({left: '200px'}, 2000); 
    }
    alert("here");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:20:13.030

编辑：在循环中调用 animate() 时，您可以执行以下操作：

```
$(document).ready(function () {
    var completed = 0;
    for (i = 1; i <= 8; i++) {
        $('#ponyDiv'+i).animate({
            left: '200px'
        }, 200, function () {
            if (completed++ == 7) alert("here");
        });
    }
}); 
```

* * *

使用将在动画完成后立即调用的[JQuery animate() '完成' 回调：](http://api.jquery.com/animate/)

```
 $('#ponyDiv').animate({left: '200px'}, 2000, function() {
    alert('here');
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:30:20.377

这将在循环完成时发出警报（而不是在最终动画完成时）。

```
$(document).ready(function() {
    for (i = 1; i <= 8; i++) {
        $('#ponyDiv' + i).animate({left: '200px'}, 2000);
        if(i === 8){
            alert("here");
        }
    }    
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T07:33:39.067

使用延迟：

```
$.when($('[id^=pony]').animate({left:'200px'},2000))
    .then(function() { alert('done'); }); 
```

当然，使用类比以 id 开头的属性要好，但你明白了它的要点。

# perl - 在 Perl 中使用 XML::LibXML 生成 XML 时添加换行符

> ID：15241242
> 
> 赞同：2
> 
> 时间：2013-03-06T07:16:55.067
> 
> 标签：perl, libxml2

我正在使用 Perl[`XML::LibXML`](https://metacpan.org/module/XML%3a%3aLibXML)模块来创建 XML 文件。

我无法在输出 XML 文件中添加换行符。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T07:34:22.060

你没有说你是如何产生输出的，但是你看过第二个参数`toFile`吗？

就像是

```
 $doc->toFile('myfile.xml', 1) 
```

应该有帮助。

# css - 使用默认 Twitter Bootstrap CSS 将大于默认宽度的模式弹出窗口居中对齐

> ID：15241243
> 
> 赞同：3
> 
> 时间：2013-03-06T07:16:56.950
> 
> 标签：css, twitter-bootstrap

在 Twitter Bootstrap 中，模态弹出窗口的默认宽度为 560 像素，`left`为 50%。我希望模态弹出窗口的宽度更大。因此，我将该类添加`span10`到模态弹出窗口中。但是当`left`固定为 50% 时，模态弹出窗口会向右移动。为了解决这个问题，我`left: 8%`在模式弹出窗口中添加了内联 CSS。它按我的意图工作。但我想知道是否有任何技巧可以使用 Twitter Bootstrap 的默认 CSS 而不使用任何额外的 CSS（内联、内部或外部）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T07:32:44.340

使用 Bootstrap 2.2，我向容器添加了一个 CSS 选择器，并将and`modal`设置为/2 * -1。`width``margin-left``width`

例子：

```
#MyModal {
   width: 900px; 
   margin-left: -450px;
} 
```

HTML：

```
<div id="MyModal" class="modal hide fade" role="dialog">
  <!-- etc. -->
</div> 
```

* * *

**编辑**

Bootstrap 目前没有办法通过 JS 或 data-role 行为来自定义模态框的宽度。如果你想要一个新的全局默认宽度，你要么必须 fork bootstrap 并修改他们的 LESS 模板，编辑编译的 CSS，或者使用类似于我描述的选择器将 CSS 添加到你自己的样式表中，并在 bootstrap 之后包含它.css 在您的页面中。后者是最简单的。

或者，如果您想保留默认宽度但预定义了一些典型的模态尺寸，您可以在自己的样式表中添加一些类选择器并根据需要添加类名。

```
.modal-small { width: 200px; margin-left: -100px; }
.modal-large { width: 900px; margin-left: -450px; } 
```

HTML：

```
 <div class="modal modal-large hide fade" /> <!-- make this one large -->
 <div class="modal modal-small hide fade" /> <!-- and this one small --> 
```

# c# - ajax 方法在将 href 绑定到链接按钮之后执行。应该在之前执行

> ID：15241245
> 
> 赞同：1
> 
> 时间：2013-03-06T07:17:12.427
> 
> 标签：c#, jquery, asp.net

使用 colorbox 插件时遇到与 jquery 相关的问题

```
$("[id$=LinkButton1]").click(function() {

        var filename=$(this).text();

        $.ajax({
          type: "POST",
         url: "WebService.asmx/lnkbtn1",
         data: '{filename: \'' + filename + '\'}',

          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function(msg) {

         filename=msg.d;
             alert("filename1="+msg.d); ----------1.

          }

        });
         alert('Outside ');------2
       //  $(".iframe").attr('href',filename);---------3
         $(".iframe").colorbox({iframe:true, width:"50%", height:"100%"});

     });

        }); 
```

在这里，当我在 gridview 中单击带有文件名的链接按钮时

```
 <asp:TemplateField ShowHeader="False">
                <ItemTemplate>
                    <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandArgument='<%#((GridViewRow)Container).RowIndex%>'
                        Text='<%# Bind("FileName") %>' CommandName="ViewImages" CssClass="iframe"></asp:LinkButton>
                </ItemTemplate>
 </asp:TemplateField> 
```

我正在使用 colorbox jquery 插件...这里发生的事情是我得到文件名...然后我传递给 web 服务方法（lnkbtn1）的文件名，处理文件名然后我会从中得到一个文件名，我必须显示它在弹出的颜色框中...

但是这里有一个问题 2\. 先执行然后 1\. 执行所以我无法将文件名绑定到'href'

**编辑** 当文件名被传递给 webmethod 时，它首先被转换为 html。假设文件类型是 word 文档或 excedlfile，那么它首先转换为 html。假设文件名为 notes.doc.. 那么

1.  文件名（notes.doc）被传递给 webmethod

2.  将 notes.doc 转换为 notes.html

3.  webmethod 返回 notes.html

    转换为 html 的原因，因为 .doc 文件内容不会显示在 iframe 中

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:15:13.680

$ajax 是异步的。需要 $ajax 结果的代码必须在成功处理程序中。您的代码至少应该类似于（尽可能少地更改，因为我不知道变量的用途`return true;`或确切用途）`filename`

```
$("[id$=LinkButton1]").click(function() {    
        var filename=$(this).text();

        $.ajax({
          type: "POST",
         url: "WebService.asmx/lnkbtn1",
         data: '{filename: \'' + filename + '\'}',

          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function(msg) {
                filename=msg.d;
                alert("filename1="+msg.d); //----------1.
                alert('Outside ');//------2
                $(".iframe").attr('href',filename);//---------3
                $(".iframe").colorbox({iframe:true, width:"50%", height:"100%"});
               }
        });
      return true;
     });    
 }); 
```

# jquery - Jquery检查表行中的第一个td元素是否包含链接

> ID：15241246
> 
> 赞同：1
> 
> 时间：2013-03-06T07:17:14.603
> 
> 标签：jquery

有一个 Jquery 对象 - 表行，我怎样才能找出表行（tr）中的第一个元素是否包含链接？

示例 html：

```
<tr class=""><td class=""><p><a>some link</a></p></td><td class="pos">AG</td><td class="size">5.1 MB</td><td class="options"><a class="tip" href="/Packages/View/2">View</a></td></tr> 
```

对比：

```
<tr class=""><td class=""><p>no link here</p></td><td class="pos">AG</td><td class="size">5.1 MB</td><td class="options"><a class="tip" href="/Packages/View/2">View</a></td></tr> 
```

有一个 jquery 对象“行”我尝试了这个没有任何运气：

```
 var firstTdLink = row.find("td:first a")
if (firstTdLink.length)
{
 alert("first td contains link")
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T07:21:37.363

具有以下内容：

```
row.find('td:first-child:has(a)'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T07:23:42.483

试试这个

```
if($("tr td:first > a").length>0)
{
   alert("first td contains link")
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T07:23:29.597

您的原始代码对我来说很好：

```
<table>
<tr class=""><td class=""><p><a>some link</a></p></td><td class="pos">AG</td><td class="size">5.1 MB</td><td class="options"><a class="tip" href="/Packages/View/2">View</a></td></tr>
<tr class=""><td class=""><p>no link here</p></td><td class="pos">AG</td><td class="size">5.1 MB</td><td class="options"><a class="tip" href="/Packages/View/2">View</a></td></tr>
</table>

<script>
console.log( $('table tr:first-child').find("td:first a").length )
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T07:24:34.587

使用直接后代选择器：

```
if($('tr td:first > a').length > 0)
{
    alert("first td contains link")
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T07:26:59.307

我是这样想的：

```
var firstTdLink = $("td:first").find('a');
if (firstTdLink.length > 0){
  alert("first td contains link")
} 
```

# mysql - SQL 排名百分位

> ID：15241247
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:17:16.137
> 
> 标签：mysql, sql, rank, percentile

我做了一个 SQL 查询，它根据页面被查看的次数对页面进行排名。例如，

```
╔══════╦═══════╗
║ PAGE ║ VIEWS ║
╠══════╬═══════╣
║ J    ║   100 ║
║ Q    ║    77 ║
║ 3    ║    55 ║
║ A    ║    23 ║
║ 2    ║     6 ║
╚══════╩═══════╝ 
```

现在我想做的是使用 SQL 查询找到每个页面的百分位排名。我想用的数学很简单，我只想用已经生成的表的行数除以总行数。或者 1 减去这个值，这取决于我的兴趣。

我可以像这样对已经生成的表执行 COUNT(pages) 吗？我意识到这就是我将获得总行数的方式。但是有没有返回行号的命令？

只是为了进一步澄清我的问题，我需要以下结果

```
╔══════╦════════════════╗
║ PAGE ║ Percentile     ║
╠══════╬════════════════╣
║ J    ║   (1-1/5)*100  ║
║ Q    ║   (1-2/5)*100  ║
║ 3    ║   (1-3/5)*100  ║
║ A    ║   (1-4/5)*100  ║
║ 2    ║   (1-5/5)*100  ║
╚══════╩════════════════╝ 
```

或者一般来说（1-（行号）/（COUNT（页））*100

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-25T17:35:29.900

您无法在单个 SQL 语句中计算跨表的百分等级。John Woo 在此处建议的方法在计算出最高排名后就崩溃了，即使结果对于正在处理的表的第一个（不可预测的）百分比（即前几个百分位数）看起来确实不错。

Oracle Ace Roland Bouman 在这篇文章中解释了原因： [http ://rpbouman.blogspot.com/2009/09/mysql-another-ranking-trick.html](http://rpbouman.blogspot.com/2009/09/mysql-another-ranking-trick.html)

简而言之：用户定义的变量并非设计为在单个 SQL 语句中可靠，仅在多个 SQL 语句中可靠。

阅读 MySQL 手册中关于用户定义变量的第一句话：http: [//dev.mysql.com/doc/refman/5.5/en/user-variables.html](http://dev.mysql.com/doc/refman/5.5/en/user-variables.html) “您可以将值存储在用户定义的变量中一份声明，然后在另一份声明中提及。”

然后在第 10 段左右看到这个明确的声明：“作为一般规则，除了在 SET 语句中，你不应该为用户变量赋值并在同一语句中读取值。[...] 的顺序涉及用户变量的表达式的评估未定义。"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T07:40:27.083

```
SELECT  page, 
        views,
        (1-ranks/totals)*100 Percentile
FROM
(
    SELECT  page,
            views,
            @rank:=@rank + 1 ranks,
            (SELECT COUNT(*) FROM tableName) totals
    FROM    tableName a,
            (SELECT @rank:=0) s
    ORDER   BY views DESC
) s 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/6e1d9/8)

# ios - cocos2d 使用按钮移动精灵

> ID：15241252
> 
> 赞同：1
> 
> 时间：2013-03-06T07:17:37.307
> 
> 标签：ios, cocos2d-iphone, ccmenu

使用 CCMenu 我创建了两个向上和向下按钮 这是代码

```
 CCSprite *normlUp = [CCSprite spriteWithFile:@"Up.png"];
    CCSprite *selectedUp = [CCSprite spriteWithFile:@"Up.png"];
    selectedUp.color = ccGREEN;

    CCMenuItemSprite *up = [CCMenuItemSprite itemFromNormalSprite:normlUp selectedSprite:selectedUp target:self selector:@selector(upItemTouched)];
    up.position = CGPointMake(-220, -115);

    CCSprite *normlDown = [CCSprite spriteWithFile:@"Down.jpeg"];
    CCSprite *selectedDown = [CCSprite spriteWithFile:@"Down.jpeg"];
    selectedDown.color = ccGREEN;

    CCMenuItemSprite *down = [CCMenuItemSprite itemFromNormalSprite:normlDown selectedSprite:selectedDown target:self selector:@selector(downItemTouched)];
    down.position = CGPointMake(-220,-140 );

    CCMenu *upDown = [CCMenu menuWithItems:up,down,nil];
    [self addChild:upDown z:4]; 
```

如何编写 upItemTouched 和 downItemTouched 方法
此外，精灵应该在屏幕上平滑移动
我是 cocos2d 的新手，所以请接受我的简单问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:05:28.550

使用 CCMenuItemSprite 为精灵分配添加选择器，因此当您向下/向上触摸精灵时，将调用选择器方法。因此，当触摸“向上”时，将一个布尔值设置为真，当触摸“向下”时，将另一个布尔值设置为真。

现在在 update/tick 方法中检查哪个布尔值为 true，然后移动精灵。

完成移动后，在 touchesEnded 方法中只需将这些布尔值设置为 false。

# c# - 使用 for 循环遍历字典

> ID：15241257
> 
> 赞同：40
> 
> 时间：2013-03-06T07:18:04.963
> 
> 标签：c#, for-loop, dictionary

我通常使用 foreach 循环来遍历 Dictionary。

```
Dictionary<string, string> dictSummary = new Dictionary<string, string>(); 
```

在这种情况下，我想修剪空白条目，但是 foreach 循环不允许这样做。

```
foreach (var kvp in dictSummary)
{
    kvp.Value = kvp.Value.Trim();    
} 
```

如何使用 for 循环做到这一点？

```
for (int i = dictSummary.Count - 1; i >= 0; i--)
{
} 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-06T07:27:51.263

那这个呢？

```
for (int i = dictSummary.Count - 1; i >= 0; i--) {
  var item = dictSummary.ElementAt(i);
  var itemKey = item.Key;
  var itemValue = item.Value;
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-06T07:21:04.203

`KeyValuePair<TKey, TValue>`不允许您设置`Value`，它是不可变的。

你必须这样做：

```
foreach(var kvp in dictSummary.ToArray())
    dictSummary[kvp.Key] = kvp.Value.Trim(); 
```

这里的重要部分是`ToArray`. 这会将 Dictionary 复制到一个数组中，因此在 foreach 中更改字典不会抛出`InvalidOperationException`.

另一种方法是使用 LINQ 的`ToDictionary`方法：

```
dictSummary = dictSummary.ToDictionary(x => x.Key, x => x.Value.Trim()); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-27T15:05:17.323

你不需要使用`.ToArray()`or `.ElementAt()`。就像使用键访问字典一样简单：

```
dictSummary.Keys.ToList().ForEach(k => dictSummary[k] = dictSummary[k].Trim()); 
```

# c# - UpdatePanel 中 GridView 中的按钮单击时引发“无效的回发或回调参数”

> ID：15241260
> 
> 赞同：0
> 
> 时间：2013-03-06T07:18:21.413
> 
> 标签：c#, jquery, ajax, updatepanel, invalid-postback

我正在尝试让 jQuery 确认对话框调用 web 方法。当单击 UpdatePanel 中 GridView 中的删除按钮时，将调用该对话框。

但是，当我单击该按钮时，出现“无效的回发或回调参数”错误。我在这里搜索了一些问题/答案，并尝试覆盖 Render 事件以注册 UpdatePanel。

这是我的 aspx 页面：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="DoPostBack._Default" %>

<asp:Content ID="conStyles" runat="server" ContentPlaceHolderID="cphStyles">
</asp:Content>
<asp:Content ID="conMain" runat="server" ContentPlaceHolderID="cphMain">
    <asp:UpdatePanel ID="upMovies" runat="server" UpdateMode="Conditional" onload="upMovies_Load">
        <ContentTemplate>
            <asp:GridView ID="gvItems" runat="server" CssClass="tbl-movies" AutoGenerateColumns="False">
                <Columns>
                    <asp:BoundField DataField="Title" HeaderText="Title" HeaderStyle-CssClass="col-title-header" ItemStyle-CssClass="col-title"/>
                    <asp:BoundField DataField="Director" HeaderText="Director" HeaderStyle-CssClass="col-director-header" ItemStyle-CssClass="col-director" />
                    <asp:BoundField DataField="Year" HeaderText="Year" HeaderStyle-CssClass="col-year-header" ItemStyle-CssClass="col-year" />
                    <asp:TemplateField ItemStyle-HorizontalAlign="Left" ItemStyle-CssClass="table-actions">
                        <ItemTemplate>
                            <asp:ImageButton ID="btnEdit" ImageUrl="Images/edit.png" runat="server"
                                Text="Edit" UseSubmitBehavior="False" />
                            <asp:ImageButton ID="btnDelete" ImageUrl="Images/delete.png" runat="server"
                                Text="Delete" UseSubmitBehavior="False" CssClass="btn-delete-movie" />
                            <asp:HiddenField ID="hfMovieId" runat="server" Value='<%# Eval("Id") %>' />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
        </ContentTemplate>
    </asp:UpdatePanel>
    <div id="confirmDelete" class="popup popup-confirm">
        <div class="popup-title">
            <h4>Delete Movie</h4>
        </div>
        <div class="popup-content">
            <div class="confirm-message">
            </div>
            <div class="buttons center">
                <input id="btnDeleteConfirm" type="button" value="OK" class="button btn-confirm" />
                <input id="btnDeleteCancel" type="button" value="Cancel" class="button btn-delete-cancel btn-close-popup" />
            </div>
        </div>
    </div>
</asp:Content>
<asp:Content ID="conScripts" runat="server" ContentPlaceHolderID="cphScripts">
    <script src="Scripts/site.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var btnDelete = $('.btn-delete-movie');
            btnDelete.on('click', function (e) {
                e.preventDefault();

                var row = $(this).closest('tr'),
                    title = row.find('.col-title').text(),
                    movieId = parseInt(row.find('input[type=hidden]').val());

                showConfirmPopUp('confirmDelete',
                    'Are you sure you want to delete the movie "' + title + '"?',
                    function () { deleteMovie(movieId); }, //call the DeleteMovie web method
                    function () { }); //do nothing else
            });
        });

        function deleteMovie(id) {
            $.ajax({
                type: 'POST',
                contentType: 'application/json',
                data: '{"id":' + id + '}',
                url: 'Default.aspx/DeleteMovie',
                dataType: 'json',
                success: function (data) {
                    __doPostBack('<%= upMovies.ClientID %>', '');
                    closePopUp('confirmDelete');
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    showError(jqXHR, textStatus, errorThrown);
                }
            });
        }
    </script>
</asp:Content> 
```

代码隐藏：

```
public partial class _Default : System.Web.UI.Page
{
    #region Events
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            PopulateMovies();
        }
    }

    protected override void Render(HtmlTextWriter writer)
    {
        ClientScript.RegisterForEventValidation(upMovies.UniqueID);

        foreach (GridViewRow row in gvItems.Rows)
        {
            var btnDelete = row.FindControl("btnDelete");
            var btnEdit = row.FindControl("btnEdit");
            ClientScript.RegisterForEventValidation(btnDelete.UniqueID);
            ClientScript.RegisterForEventValidation(btnEdit.UniqueID);
        }

        base.Render(writer);
    }

    protected void upMovies_Load(object sender, EventArgs e)
    {
        PopulateMovies();
    }
    #endregion

    #region Private Methods
    private void PopulateMovies()
    {
        var data = from m in Movie.GetAll()
                   orderby m.Year descending, m.Title ascending
                   select m;

        gvItems.DataSource = data;
        gvItems.DataBind();
    }
    #endregion

    #region Web Methods
    [WebMethod]
    public static object DeleteMovie(int id)
    {
        Movie.Delete(id);
        return UpdateItems();
    }
    #endregion
} 
```

我正在使用 jQuery 方法，因为我不想使用 ModalPopupExtender。我也不想将 EnableEventValidation 设置为 false。

另外，为什么当我单击删除按钮时会调用 upMovies_Load ？不应该只在单击确认对话框的确定​​按钮时调用它吗？

我是初学者，非常感谢您的帮助。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:49:10.080

好的，您必须通过重新绑定 JavaScript

```
Sys.WebForms.PageRequestManager.GetInstance().add_endRequest(function(){
    //$(document).ready() code here
}); 
```

# ios - 如何将 Uilabel 文本设置为 nil +iphone

> ID：15241263
> 
> 赞同：0
> 
> 时间：2013-03-06T07:18:27.257
> 
> 标签：ios, objective-c

我有动态 UIButtons 子视图是 UIlabel。我的要求是第一次在一个按钮中显示一个标签文本，之后根据用户选择（长按按钮）需要更新特定按钮子视图标签文本并删除其余按钮子视图标签文本。

我试过这样

```
for (int i=0; i < [arr count]; i++) 
{
          UILabel *myLbl = [[UILabel alloc] initWithFrame:CGRectMake(30, 70, 60, 21)];
        if (myissue.tag ==1) {
            myLbl.text = @"Default";
        }else {
            myLbl.text = @"";
        }
        myLbl.backgroundColor = [UIColor clearColor];
        myLbl.textColor = [UIColor colorWithRed:51.0/255.0 green:51.0/255.0 blue:51.0/255.0 alpha:1.0];
        [myLbl setFont:[UIFont fontWithName:@"Helvetica" size:12]];
        myLbl.textAlignment = NSTextAlignmentCenter;
        myLbl.tag = i+1;
        [myButton addSubview:defaultLbl];
        [myLbl release];
}

And for retrieving the UILabel text 
- (void)longPressTap:(UILongPressGestureRecognizer *)sender
{
if ([recognizer.view tag]) {
   for (UIButton *btn in scrollView.subviews) {
                UIButton *btnTag = (UIButton *)btn;
                 NSLog(@"--sv:%@", btn.subviews);
                 if (recognizer.view.tag == btnTag.tag){
                      [[btn.subviews objectAtIndex:3] text] ;
                    }else {

                        [[btn.subviews objectAtIndex:3] textAttributesForNil] ;
                }
            }
        }
    }

} 
```

我的问题是我无法选择按钮子视图标签文本并删除其余按钮标签文本。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:24:57.023

您不需要添加标签作为按钮的子视图，按钮已经有自己的文本标签，可以使用`[button setTitle:(NSString *) forState:(UIControlState)]`

并删除刚刚设置的文本`seTitle:@""`

# c++ - 分配一个指向数组的指针

> ID：15241264
> 
> 赞同：0
> 
> 时间：2013-03-06T07:18:33.230
> 
> 标签：c++, arrays, pointers

我正在尝试创建一个生成随机值的数组，然后为该数组分配一个指针，以便在其他函数中使用它。

问题1：这是正确的方法吗？

问题 2：当我运行下面的代码时，我的指针函数生成的值与实际数组的值不一致。我究竟做错了什么？

```
int size = 100;
int theray[size];
for(int i=0; i<size; i++)
{
    theray[i] = (rand()%100);
}
//Output array
cout<<"The array: ";
for(int j=0; j<size; j++)
{
    cout<<theray[j]<<" ";
}
cout<<endl;

int (*parray)[100] = &theray;
cout<<"The array pointer: ";
for(int k=0; k<size; k++)
{
    cout<<*parray[k]<<" ";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:20:33.030

> 问题1：这是正确的方法吗？

不，正确的方法是使用`std::vector<int>`if `size`is not known at compile time ¹，`std::array<int, size>`if it is ²。这里不需要指针。

```
void foo(const std::vector<int>& v)
{
  // do stuff with v
}

...

std::vector<int> v(size); // vector with size elements
// do something with v

// pass v to a function
foo(v); 
```

> 问题2：当我运行下面的代码时，我的指针函数生成的值与实际数组的值不一致。我究竟做错了什么？

如果你使用 C++ 习语，你甚至不会遇到这个问题，所以我认为这个问题没有实际意义。`*`但是，在您的情况下，您遇到了运算符优先级的问题：在访问之前明确应用取消引用`[]`：

```
cout<< (*parray)[k] << " "; 
```

¹如示例所示，您可以将 an`std::vector`用作固定大小的数组，其大小在运行时不需要知道。请记住，可以在施工后更改其尺寸。

²在您的示例中，`size`不是编译时间常数，因此您不能使用`std::array`. 但是，如果您已将其声明为，`const int size = 100;`那么它将被视为编译时间常数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T07:32:46.600

您的代码在三个方面有点偏离。首先，不需要使用*&theray*。数组名称已经引用了内存地址。您可以简单地将指针分配给*theray*。其次，您要声明一个包含 100 个指针的数组。根据您的描述，听起来您只需要一个指向数组的指针。您的声明应该只是 int *parray 而不是 int *parray [100]。最后，一旦有了指向数组的指针，就可以像访问原始数组一样访问数组元素，只是使用指针的名称，而不是数组的名称。尝试更改您的最后一个代码块（从指针声明开始：

```
int *parray;
parray = theray;
cout<<"The array pointer: ";
for(int k=0; k<size; k++)
{
    cout<<parray[k]<<" ";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T07:33:20.207

# 问题 1

> 这是正确的方法吗？

通常不会。这取决于您要达到的目标。

对于高级语义，您在大多数情况下会使用`std::vector<int>`或，如果大小是固定的并且您使用的是 C++11，则`std::array<int, size>`. 如果你真的必须下到指针级别，你通常会这样写：

```
int *parray = theray;
cout<<"The array pointer: ";
for(int k=0; k<size; k++)
{
    cout<<parray[k]<<" ";
} 
```

这是有效的，因为数组将降级为指针，并且`[…]`下标对这些指针的工作就像它们对原始数组的工作一样。

# 问题2

> 当我运行下面的代码时，我的指针函数生成的值与实际数组的值不一致，我做错了什么？

`*parray[k]`被解释为`*(parray[k])`您打算将其用作`(*parray)[k]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T07:35:45.930

> 问题1：这是正确的方法吗？

**没有**。用于`std::vector<>`大小可以动态变化的数组（在运行时）。更喜欢避免指针和手动内存管理。

> 问题2：当我运行下面的代码时，我的指针函数生成的值与实际数组的值不一致。我究竟做错了什么？

首先，创建指针的事实是您可以将数组传递给函数。这不是必需的。以下是我将如何使用 C++ 标准库中的类来编写该程序（在 C++11 中）：

```
#include <vector>
#include <algorithm>
#include <iostream>
#include <iterator>

// Sample function that prints the vectors's content
void foo(std::vector<int> const& v)
{
    copy(begin(v), end(v), std::ostream_iterator<int>(std::cout, " "));
}

int main()
{
    // Populate the vector...
    size_t sz = 10;
    std::vector<int> v(sz);
    generate(begin(v), end(v), [] () { return rand() % 100; });

    // Pass it to a function...
    foo(v);
} 
```

# javascript - jquery获取花式框图片索引

> ID：15241269
> 
> 赞同：0
> 
> 时间：2013-03-06T07:18:51.430
> 
> 标签：javascript, jquery, fancybox

我已经在我的站点中将fancybox 滑块与上一个和下一个箭头集成在一起。

我想在单击单独的链接时打开滑块。为此，我使用了以下代码

```
$('a.fancybox').eq(0).trigger('click'); return false; 
```

它工作正常。但它以第一张图片打开。

我需要的是

花哨的框显示第二张图像（通过单击下一个箭头）。当时我点击文本链接打开花式框。它需要显示第二张图片。为此，我需要在以下代码中传递索引而不是 0 ` $('a.fancybox').eq(0).trigger('click'); 返回假；

为此我使用了代码

```
$('a.fancybox').eq($(this).index(this)).trigger('click'); return false; 
```

但它没有用。

如何获取当前图像索引以及如何在单独的文本链接中传递它。

请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:38:16.733

你可能有不同的画廊元素，比如

```
<a rel="gallery" class="fancybox" href="http://fancyapps.com/fancybox/demo/1_b.jpg"><img src="http://fancyapps.com/fancybox/demo/1_s.jpg" alt=""/></a>
<a rel="gallery" class="fancybox" href="http://fancyapps.com/fancybox/demo/2_b.jpg"><img src="http://fancyapps.com/fancybox/demo/2_s.jpg" alt="" /></a> 
```

等等......并使用`bind`他们的常规脚本来fancybox，如：

```
$(".fancybox").fancybox(); 
```

然后，您可以在单独的链接中为项目设置不同的*触发器，例如*`each`

```
<a href="#" class="triggers">trigger one</a>
<a href="#" class="triggers">trigger two</a> 
```

等等

...然后您只需`bind`每个*触发器触发*fancybox中的相应图像，例如：

```
$(".triggers").each(function (i) {
    $(this).bind("click", function () {
        $(".fancybox").eq(i).click();
        return false;
    });
}); 
```

见**[JSFIDDLE](http://jsfiddle.net/AmURs/)**

# android - Android Google MAPS API 2 JSON 路由

> ID：15241271
> 
> 赞同：1
> 
> 时间：2013-03-06T07:18:54.800
> 
> 标签：android, android-asynctask, maps

我需要在活动中显示路线 我有一个活动和一个 Java 文件 Java 文件用于以 json 的形式获取路线

所以要使用我应该从内部`AsyncTask`调用我的方法还是粘贴in 的内容`getResponse()``doInBackground()``getResponse()``doInBackground()`

`getResponse()`方法用于形成字符串，发出http请求。

`getResponse()`有以下参数

```
LatLng srcPt
LatLng desPt 
```

我还需要将 json 对象从 java 文件发送到活动以绘制路线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:41:23.133

我认为上面的代码适用于谷歌地图而不是谷歌地图 v2。Geopoint 在谷歌地图 v2 中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:27:37.090

我不记得我从哪里得到它，但这些课程对我有很大帮助，它包括如果你想绘制路线。

谷歌解析器.java

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.google.android.maps.GeoPoint;
import com.monumentos.log.Logger;

public class GoogleParser extends XMLParser implements Parser {
    /** Distance covered. **/
    private int distance;

    public GoogleParser(String feedUrl) {
            super(feedUrl);
    }

    /**
     * Parses a url pointing to a Google JSON object to a Route object.
     * @return a Route object based on the JSON object.
     */

    public Route parse() {
            // turn the stream into a string
            final String result = convertStreamToString(this.getInputStream());
            //Create an empty route
            final Route route = new Route();
            //Create an empty segment
            final Segment segment = new Segment();
            try {
                    //Tranform the string into a json object
                    final JSONObject json = new JSONObject(result);
                    //Get the route object
                    final JSONObject jsonRoute = json.getJSONArray("routes").getJSONObject(0);
                    //Get the leg, only one leg as we don't support waypoints
                    final JSONObject leg = jsonRoute.getJSONArray("legs").getJSONObject(0);
                    //Get the steps for this leg
                    final JSONArray steps = leg.getJSONArray("steps");
                    //Number of steps for use in for loop
                    final int numSteps = steps.length();
                    //Set the name of this route using the start & end addresses
                    route.setName(leg.getString("start_address") + " to " + leg.getString("end_address"));
                    //Get google's copyright notice (tos requirement)
                    route.setCopyright(jsonRoute.getString("copyrights"));
                    //Get the total length of the route.
                    route.setLength(leg.getJSONObject("distance").getInt("value"));
                    //Get any warnings provided (tos requirement)
                    if (!jsonRoute.getJSONArray("warnings").isNull(0)) {
                            route.setWarning(jsonRoute.getJSONArray("warnings").getString(0));
                    }
                    /* Loop through the steps, creating a segment for each one and
                     * decoding any polylines found as we go to add to the route object's
                     * map array. Using an explicit for loop because it is faster!
                     */
                    for (int i = 0; i < numSteps; i++) {
                            //Get the individual step
                            final JSONObject step = steps.getJSONObject(i);
                            //Get the start position for this step and set it on the segment
                            final JSONObject start = step.getJSONObject("start_location");
                            final GeoPoint position = new GeoPoint((int) (start.getDouble("lat")*1E6), 
                                    (int) (start.getDouble("lng")*1E6));
                            segment.setPoint(position);
                            //Set the length of this segment in metres
                            final int length = step.getJSONObject("distance").getInt("value");
                            distance += length;
                            segment.setLength(length);
                            segment.setDistance(distance/1000);
                            //Strip html from google directions and set as turn instruction
                            segment.setInstruction(step.getString("html_instructions").replaceAll("<(.*?)*>", ""));
                            //Retrieve & decode this segment's polyline and add it to the route.
                            route.addPoints(decodePolyLine(step.getJSONObject("polyline").getString("points")));
                            //Push a copy of the segment to the route
                            route.addSegment(segment.copy());
                    }
            } catch (JSONException e) {

                    Logger.appendLog( "Google JSON Parser - " + feedUrl);
            }
            return route;
    }

    /**
     * Convert an inputstream to a string.
     * @param input inputstream to convert.
     * @return a String of the inputstream.
     */

    private static String convertStreamToString(final InputStream input) {
    final BufferedReader reader = new BufferedReader(new InputStreamReader(input));
    final StringBuilder sBuf = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sBuf.append(line);
        }
    } catch (IOException e) {
            Logger.appendLog( "Google parser, stream2string");
    } finally {
        try {
            input.close();
        } catch (IOException e) {
            Logger.appendLog( "Google parser, stream2string");
        }
    }
    return sBuf.toString();
}

    /**
     * Decode a polyline string into a list of GeoPoints.
     * @param poly polyline encoded string to decode.
     * @return the list of GeoPoints represented by this polystring.
     */

    private List<GeoPoint> decodePolyLine(final String poly) {
            int len = poly.length();
            int index = 0;
            List<GeoPoint> decoded = new ArrayList<GeoPoint>();
            int lat = 0;
            int lng = 0;

            while (index < len) {
            int b;
            int shift = 0;
            int result = 0;
            do {
                    b = poly.charAt(index++) - 63;
                    result |= (b & 0x1f) << shift;
                    shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                    b = poly.charAt(index++) - 63;
                    result |= (b & 0x1f) << shift;
                    shift += 5;
            } while (b >= 0x20);
                    int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
                    lng += dlng;

            decoded.add(new GeoPoint(
                    (int) (lat*1E6 / 1E5), (int) (lng*1E6 / 1E5)));
            }

            return decoded;
            }
} 
```

解析器.java

```
 public interface Parser {
    public Route parse();
} 
```

路由.java

```
import java.util.ArrayList;
import java.util.List;

import com.google.android.maps.GeoPoint;

public class Route {
    private String name;
    private final List<GeoPoint> points;
    private List<Segment> segments;
    private String copyright;
    private String warning;
    private String country;
    private int length;
    private String polyline;

    public Route() {
            points = new ArrayList<GeoPoint>();
            segments = new ArrayList<Segment>();
    }

    public void addPoint(final GeoPoint p) {
            points.add(p);
    }

    public void addPoints(final List<GeoPoint> points) {
            this.points.addAll(points);
    }

    public List<GeoPoint> getPoints() {
            return points;
    }

    public void addSegment(final Segment s) {
            segments.add(s);
    }

    public List<Segment> getSegments() {
            return segments;
    }

    /**
     * @param name the name to set
     */
    public void setName(final String name) {
            this.name = name;
    }

    /**
     * @return the name
     */
    public String getName() {
            return name;
    }

    /**
     * @param copyright the copyright to set
     */
    public void setCopyright(String copyright) {
            this.copyright = copyright;
    }

    /**
     * @return the copyright
     */
    public String getCopyright() {
            return copyright;
    }

    /**
     * @param warning the warning to set
     */
    public void setWarning(String warning) {
            this.warning = warning;
    }

    /**
     * @return the warning
     */
    public String getWarning() {
            return warning;
    }

    /**
     * @param country the country to set
     */
    public void setCountry(String country) {
            this.country = country;
    }

    /**
     * @return the country
     */
    public String getCountry() {
            return country;
    }

    /**
     * @param length the length to set
     */
    public void setLength(int length) {
            this.length = length;
    }

    /**
     * @return the length
     */
    public int getLength() {
            return length;
    }

    /**
     * @param polyline the polyline to set
     */
    public void setPolyline(String polyline) {
            this.polyline = polyline;
    }

    /**
     * @return the polyline
     */
    public String getPolyline() {
            return polyline;
    }

}

RouteOverlay.java

public class RouteOverlay extends Overlay {
/** GeoPoints representing this routePoints. **/
private final List<GeoPoint> routePoints;
/** Colour to paint routePoints. **/
private int colour;
/** Alpha setting for route overlay. **/
private static final int ALPHA = 200;
/** Stroke width. **/
private static final float STROKE = 4.5f;
/** Route path. **/
private final Path path;
/** Point to draw with. **/
private final Point p;
/** Paint for path. **/
private final Paint paint;

/**
 * Public constructor.
 * 
 * @param route Route object representing the route.
 * @param defaultColour default colour to draw route in.
 */

public RouteOverlay(final Route route, final int defaultColour) {
        super();
        routePoints = route.getPoints();
        colour = defaultColour;
        path = new Path();
        p = new Point();
        paint = new Paint();
}

@Override
public final void draw(final Canvas c, final MapView mv,
                final boolean shadow) {
        super.draw(c, mv, shadow);

        paint.setColor(colour);
        paint.setAlpha(ALPHA);
        paint.setAntiAlias(true);
        paint.setStrokeWidth(STROKE);
        paint.setStyle(Paint.Style.STROKE);

        redrawPath(mv);
        c.drawPath(path, paint);
}

/**
 * Set the colour to draw this route's overlay with.
 * 
 * @param c  Int representing colour.
 */
public final void setColour(final int c) {
        colour = c;
}

/**
 * Clear the route overlay.
 */
public final void clear() {
        routePoints.clear();
}

/**
 * Recalculate the path accounting for changes to
 * the projection and routePoints.
 * @param mv MapView the path is drawn to.
 */

private void redrawPath(final MapView mv) {
        final Projection prj = mv.getProjection();
        path.rewind();
        final Iterator<GeoPoint> it = routePoints.iterator();
        prj.toPixels(it.next(), p);
        path.moveTo(p.x, p.y);
        while (it.hasNext()) {
                prj.toPixels(it.next(), p);
                path.lineTo(p.x, p.y);
        }
        path.setLastPoint(p.x, p.y);
} 
```

}

段.java

```
 import com.google.android.maps.GeoPoint;

public class Segment {
    /** Points in this segment. **/
    private GeoPoint start;
    /** Turn instruction to reach next segment. **/
    private String instruction;
    /** Length of segment. **/
    private int length;
    /** Distance covered. **/
    private double distance;

    /**
     * Create an empty segment.
     */

    public Segment() {
    }

    /**
     * Set the turn instruction.
     * @param turn Turn instruction string.
     */

    public void setInstruction(final String turn) {
            this.instruction = turn;
    }

    /**
     * Get the turn instruction to reach next segment.
     * @return a String of the turn instruction.
     */

    public String getInstruction() {
            return instruction;
    }

    /**
     * Add a point to this segment.
     * @param point GeoPoint to add.
     */

    public void setPoint(final GeoPoint point) {
            start = point;
    }

    /** Get the starting point of this 
     * segment.
     * @return a GeoPoint
     */

    public GeoPoint startPoint() {
            return start;
    }

    /** Creates a segment which is a copy of this one.
     * @return a Segment that is a copy of this one.
     */

    public Segment copy() {
            final Segment copy = new Segment();
            copy.start = start;
            copy.instruction = instruction;
            copy.length = length;
            copy.distance = distance;
            return copy;
    }

    /**
     * @param length the length to set
     */
    public void setLength(final int length) {
            this.length = length;
    }

    /**
     * @return the length
     */
    public int getLength() {
            return length;
    }

    /**
     * @param distance the distance to set
     */
    public void setDistance(double distance) {
            this.distance = distance;
    }

    /**
     * @return the distance
     */
    public double getDistance() {
            return distance;
    }

} 
```

XMLParser.java

```
 import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;

import com.monumentos.log.Logger;

public class XMLParser {
    // names of the XML tags
    protected static final String MARKERS = "markers";
    protected static final String MARKER = "marker";

    protected URL feedUrl;

    protected XMLParser(final String feedUrl) {
            try {
                    this.feedUrl = new URL(feedUrl);
            } catch (MalformedURLException e) {
                Logger.appendLog( "XML parser - " + feedUrl);
            }
    }

    protected InputStream getInputStream() {
            try {
                    return feedUrl.openConnection().getInputStream();
            } catch (IOException e) {
                Logger.appendLog(  "XML parser - " + feedUrl);
                    return null;
            }
    }
} 
```

希望它会帮助你。

调用api示例：

```
 Parser parser;

        String jsonURL = "http://maps.googleapis.com/maps/api/directions/json?";
        final StringBuffer sBuf = new StringBuffer(jsonURL);
        sBuf.append("origin=");
        sBuf.append( points.get(0).getLatitudeE6()/1E6);
        sBuf.append(',');
        sBuf.append(points.get(0).getLongitudeE6()/1E6);
        sBuf.append("&destination=");
        sBuf.append(points.get(points.size()-1).getLatitudeE6()/1E6);
        sBuf.append(',');
        sBuf.append(points.get(points.size()-1).getLongitudeE6()/1E6);

        sBuf.append("&sensor=true&mode="+routeMode);

        Logger.appendLog(sBuf.toString());

        parser = new GoogleParser(sBuf.toString());

        Route r =  parser.parse(); 
```

# android - Android 资产和 NDK：格式化输入、文件名和解决方法

> ID：15241274
> 
> 赞同：0
> 
> 时间：2013-03-06T07:19:02.080
> 
> 标签：android, android-ndk, fopen, file-io

我有几个关于使用 NDK 读取文件的问题。

浏览不同的问题和答案，我发现[了这个](https://stackoverflow.com/questions/9967904/aasset-read-vs-fopen)简短的线程，如果我理解正确，它说您可以将要从中提取数据的文件保存到 SD 卡上，然后使用标准 C fopen() 函数打开它们. 我试图这样做，但它不起作用。我认为这是路径的问题，因为我使用`FILE* f = fopen("file_name");`的`file_name`是存储在 SD 卡根目录中的位置。

另外，如果文件可以像我们通常在任何桌面应用程序上那样使用 fopen() 打开和读取，那么如果我们直接从 SD 卡读取，是否可以使用 ifstream 读取格式化的输入？

谢谢您的帮助。

纳克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:23:58.080

文件 IO 在使用 JNI 的 Android 上运行良好。也许您正试图打开一个路径错误的文件而不检查返回码？我修改了 hello-jni 示例以证明确实可以打开文件并对其进行写入。我希望这有帮助。

```
#include <string.h>
#include <jni.h>
#include <stdio.h>

jstring
Java_com_example_hellojni_HelloJni_stringFromJNI( JNIEnv* env,
                                              jobject thiz )
{
    FILE* file = fopen("/sdcard/hello.txt","w+");

    if (file != NULL)
    {
        fputs("HELLO WORLD!\n", file);
        fflush(file);
        fclose(file);
    }

    return (*env)->NewStringUTF(env, "Hello from JNI (with file io)!");
} 
```

这是在我的手机（使用 SD 卡）上运行后的结果：

```
$ adb -d shell cat /sdcard/hello.txt
HELLO WORLD! 
```

# javascript - 检测文本区域内的标记符号

> ID：15241279
> 
> 赞同：1
> 
> 时间：2013-03-06T07:19:13.747
> 
> 标签：javascript, jquery, html, textarea

我在页面上有一个文本区域。并决定验证这个元素。我插入简单的文本并在 js 中检查这个元素的长度。但是当我删除所有文本时，我可以毫无问题地保存。我在 firebug 和 textarea 中看到我发现

```
<ul></ul><br/> 
```

}

// js

```
 for(var i=0; length > i; i++){
        value = textElements[i].value;
        if(value == "" ||(value == "<br/>" && element.tagName == "TEXTAREA")){
            full = false;
            emptyElements.push(elements[i]);
        } else {
            empty = false;
            elements[i].style.borderColor = "";
            elements[i].style.border = "";
        }
    } 
```

广告 HTML

```
 <br /><div id="edit-contentFrame-form:editor" style="visibility:hidden"><textarea id="edit-contentFrame-form:editor_input" name="edit-contentFrame-form:editor_input"><h3></h3><h3></h3><h3><br/></h3><ul>
</ul></textarea></div> 
```

我试图找到解决这个问题的现有方法。但是什么也找不到。

```
///EDITED

function isEmptyTextArea(){
                var str = document.getElementById('edit-contentFrame-form:editor_input').value;
                var regexp = new RegExp("(&lt;+[\w]+&gt;+)*", "g");
                var matches_array_tags = str.replace(regexp, '');

                if(matches_array_tags.length == 0){
                    return true;
                }
                return false;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:28:28.950

如果您不希望人们能够输入 html，您可以使用正则表达式替换和去除 textarea 中的所有“标记符号”标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:28:42.777

```
var txtarea = document.getElementById('txtarea');
if(escape(txtarea.value) === '')
     // textarea is empty 
```

不包括空格：

```
if(escape(txtarea.value.trim()) === '')
     // textarea is empty (not including whitespaces) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T13:49:00.423

我用下一个 js 函数解决了我的问题

```
function isCompleteTagContent(str){
    var re= /<\S[^><]*>/g;
    var matches_array_tags = str.replace(re, "");

    if(matches_array_tags.trim().length == 0){
        return true;
    }
    return false;
} 
```

# ruby-on-rails - 可以动态更改部分符号的名称吗？

> ID：15241289
> 
> 赞同：0
> 
> 时间：2013-03-06T07:20:12.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我很好奇是否有一种方法可以根据传递给它的参数来更改部分符号的名称。例如，可以做这样的事情

部分：

```
f.label("#{parameter}") 
```

where 参数在渲染时被传递到部分中。现在让我们说我们有类似的东西

```
blog_path(domestic_or_international: "domestic") 
```

是否可以使用类似的方法来更改符号`domesitc_or_international`，就像我在第一个示例中所做的那样？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:21:34.743

您可以使用旧的哈希语法来执行此操作。

```
blog_path(:"static_text_#{parameter}" => "domestic") 
```

# c++ - 如何在各种标志处剪线

> ID：15241290
> 
> 赞同：3
> 
> 时间：2013-03-06T07:20:12.500
> 
> 标签：c++, string, getline

我遇到了以下问题：我从 .csv 文件中读取 WinCC 变量。现在有一个包含 IP 地址的字符串。它看起来像这样：`I0043CTRL/CALH1$ST$Beh$stVal;Len=4;MMSType=133;Flag=RW`

本例中的地址是`I0043`。

现在我想剪切地址后面的字符串，但变量的名称可能更多，例如`I0043PROT/...`.

有没有可能告诉例如 getline 在各种标志处结束？像：`getline(tmp_stringstream,tmp_string, 'C' || 'P');`

谢谢

帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:29:59.587

`boost::split`做你需要的：http: [//www.boost.org/doc/libs/1_53_0/doc/html/string_algo/usage.html#idp163440592](http://www.boost.org/doc/libs/1_53_0/doc/html/string_algo/usage.html#idp163440592)

```
std::string mystring("asd,ff.erw qewr");
std::vector<std::string> tokens;
boost::split( tokens, mystring, boost::is_any_of(",.-/ ") ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:39:30.700

在 C 运行时库中有一个字符串标记器函数[strtok](http://www.elook.org/programming/c/strtok.html) (include <string.h>)

在 C++ 运行时有一个等效的[std::strtok](http://en.cppreference.com/w/cpp/string/byte/strtok) (include < cstring>)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T09:49:04.457

您可以使用[`std::string::find_first_of`](http://en.cppreference.com/w/cpp/string/basic_string/find_first_of), 和[`std::string::substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr):

```
string line("I0043CTRL/CALH1$ST$Beh$stVal;Len=4;MMSType=133;Flag=RW");

cout << line.substr(0, line.find_first_of("CP")); 
```

输出：

```
I0043 
```

# jasper-reports - iReport Designer 字符被问号替换？

> ID：15241292
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:20:19.413
> 
> 标签：jasper-reports

在 iReport Designer 中使用阿拉伯字符，将生成的 PDF 文件的内容字符替换为问号

**所需字体已安装**

这个怎么解决？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:28:28.320

1.  在您的 Jasper 环境“IReport”
    中，如果您想生成*PDF 报告*，最好从您的 ireport 应用程序
    中选择**（预览 -> PDF 预览）**
    而 不是默认值（内部预览）

2.  文本字段属性

对于文本字段，您应该分配一些属性
1.**字体名称**：支持您的语言环境“阿拉伯语”的字体
2\. **Pdf 字体名称**：支持您的语言环境“阿拉伯语”的字体
3\. **Pdf 嵌入**：true
4\. **Pdf 编码**：取决于在您的语言“阿拉伯语”->“Identity-H（带有水平书写的Unicode）”

注意
如果您没有安装支持您的语言“阿拉伯语”的字体，这
很容易
只需获取您喜欢的字体“....ttf”
然后从 ireport 安装它
**（工具 -> 选项 -> 字体选项卡 -> 安装字体按钮 - > ....)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-16T14:07:17.263

从 IReport 4.8.0 版本开始，只需将 textfield 的字体从 sanserif 更改为 Dejavu sans。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-06T07:29:57.590

尝试扩大报告文本字段的大小。希望它会得到解决。如果有帮助，请标记为答案。

# java - 如何知道一个字符串是否可以分割成两个字符串

> ID：15241300
> 
> 赞同：15
> 
> 时间：2013-03-06T07:21:15.543
> 
> 标签：java, string, algorithm

我在面试中被问到以下问题。我不知道如何解决这个问题。请指导我。

问题：如何知道一个字符串是否可以分割成两个字符串 - 比如 breadbanana 可以分割成面包和香蕉，而 breadbanan 不能。您将获得一本包含所有有效单词的字典。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T07:28:13.690

构建[字典](http://en.wikipedia.org/wiki/Trie)中的单词，这将使搜索更快。根据输入字符串的以下字母搜索树。当您在树中找到一个单词时，递归地从输入字符串中该单词之后的位置开始。如果您到达输入字符串的末尾，您会发现一种可能的碎片。如果你被卡住了，回来递归地尝试另一个单词。

编辑：对不起，错过了一个事实，必须只有两个词。在这种情况下，将递归深度限制为 2。

2个单词的伪代码是：

```
T = trie of words in the dictionary
for every word in T, which can be found going down the tree by choosing the next letter of the input string each time we move to the child:
    p <- length(word)
    if T contains input_string[p:length(intput_string)]:
        return true
return false 
```

假设你可以下到 trie in 中的一个子节点`O(1)`（子节点的 ascii 索引），你可以在 中找到输入字符串的所有前缀`O(n+p)`，其中`p`是前缀的个数，以及`n`输入的长度。上限是`O(n+m)`，其中`m`是字典中的单词数。检查包含将采用`O(w)`where`w`是单词的长度，其上限是`m`，因此算法的时间复杂度是`O(nm)`，因为`O(n)`它分布在所有找到的单词之间的第一阶段。

但是因为我们在第一阶段找不到更多的`n`词，所以复杂度也仅限于`O(n^2)`. 所以搜索复杂度将是`O(n*min(n, m))` 在此之前，您需要构建将采用的特里树`O(s)`，其中`s`是字典中单词长度的总和。上限是`O(n*m)`，因为每个单词的最大长度是`n`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T07:39:39.800

您浏览您的字典并将每个术语作为子字符串与原始术语（例如“breadbanana”）进行比较。如果第一个词与第一个子字符串匹配，则从原始搜索词中删除第一个词，并将下一个字典条目与原始词的其余部分进行比较...

让我试着用java解释一下：例如

```
 String dictTerm = "bread";
    String original = "breadbanana";

    // first part matches
    if (dictTerm.equals(original.substring(0, dictTerm.length()))) {
        // first part matches, get the rest
        String lastPart = original.substring(dictTerm.length());

        String nextDictTerm = "banana";

        if (nextDictTerm.equals(lastPart)) {
            System.out.println("String " + original +
                " contains the dictionary terms " +
                dictTerm + " and " + lastPart);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T07:24:47.490

最简单的解决方案：

在每对连续字符之间拆分字符串，并查看两个子字符串（拆分点左侧和右侧）是否都在字典中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T07:27:42.297

一种方法可能是：

`Put all elements of dictionary in some set or list` 现在您可以使用`contains`&`substring`函数删除匹配字典的单词。如果最后字符串为空 -> 字符串可以被分段，否则不能。你也可以照顾计数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T07:29:25.967

```
public boolean canBeSegmented(String s) {
    for (String word : dictionary.getWords()) {
        if (s.contains(word) {
            String sub = s.subString(0, s.indexOf(word)); 
            s = sub + s.subString(s.indexOf(word)+word.length(), s.length()-1);
        }

        return s.equals("");
    }
} 
```

此代码检查您给定的字符串是否可以完全分段。它检查字典中的单词是否在您的字符串中，然后对其进行子跟踪。如果你想在这个过程中分割它，你必须按照它们在单词中的顺序对被减去的句子进行排序。

只需两个字就更容易了：

```
public boolean canBeSegmented(String s) {
    boolean wordDetected = false;

    for (String word : dictionary.getWords()) {
        if (s.contains(word) {
            String sub = s.subString(0, s.indexOf(word)); 
            s = sub + s.subString(s.indexOf(word)+word.length(), s.length()-1);

            if(!wordDetected) 
                wordDetected = true;
            else 
                return s.equals("");
        }

        return false;
     }
} 
```

此代码检查一个单词，如果字符串中有另一个单词并且只有这两个单词，则返回 true，否则返回 false。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T08:36:37.713

这只是一个想法，如果你愿意，你可以更好地实现它

```
package farzi;

import java.util.ArrayList;

public class StringPossibility {
    public static void main(String[] args) {
        String str = "breadbanana";
        ArrayList<String> dict = new ArrayList<String>();
        dict.add("bread");
        dict.add("banana");
        for(int i=0;i<str.length();i++)
        {
            String word1 = str.substring(0,i);
            String word2 = str.substring(i,str.length());
            System.out.println(word1+"===>>>"+word2);
            if(dict.contains(word1))
            {
                System.out.println("word 1 found : "+word1+" at index "+i);
            }
            if(dict.contains(word2))
            {
                System.out.println("word 2 found : "+ word2+" at index "+i);
            }
        }

    }

} 
```

# swing - 使用 Google Drive API 使用 Google Drive 内容，而不为每个请求发送访问令牌

> ID：15241301
> 
> 赞同：1
> 
> 时间：2013-03-06T07:21:17.523
> 
> 标签：swing, security, oauth-2.0, google-drive-api, google-drive-realtime-api

我正在编写一个可以修改 Google Drive 中的电子表格的应用程序，但问题是每次我尝试访问 Drive 内容时，它都会根据 OAuth2 规范要求访问令牌，我必须在浏览以下链接后手动生成该令牌：

```
 https://accounts.google.com/o/oauth2/auth?access_type=online&approval_prompt=auto&client_id=<THE_CLIENT_ID>&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&scope=https://www.googleapis.com/auth/drive 
```

任何人都知道是否可以通过 Drive API 或任何其他媒体获取此令牌，客户端应用程序将采用 Java Swing 应用程序的形式，其中将有文本字段，插入这些字段的文本将添加为托管在 Google Drive 上的电子表格中的一行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T15:16:30.167

您需要第一次手动获取令牌，但随后您可以重复使用它。我猜这是重复的？ [来自 google api 的存储凭证可重用 java](https://stackoverflow.com/questions/19861178/stored-credential-from-google-api-to-be-reused-java)

[每次连接时都必须单击“允许访问”吗？谷歌驱动 SDK API](https://stackoverflow.com/questions/15275738/must-i-click-allow-acess-every-time-i-connect-google-drive-sdk-api?rq=1)

[编辑] 对不起，我没有看到日期。

# ruby-on-rails - 应用启动时如何自动启动Delayed_Job？

> ID：15241315
> 
> 赞同：1
> 
> 时间：2013-03-06T07:22:28.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我启动我的 Rails 服务器时，我想知道自动运行此命令的最佳方法是什么

```
RAILS_ENV=development script/delayed_job start 
```

所以delayed_job 守护进程也启动了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:24:16.397

你可以看看[foreman](https://github.com/ddollar/foreman)，它有一个惊人的[railscast](http://railscasts.com/episodes/281-foreman)来启动你在启动你的 rails 服务器时想要启动的每一个服务

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T07:25:04.493

您可以考虑使用[工头](https://github.com/ddollar/foreman)并配置您的`Procfile`lile：

```
server: rails server
delayed: bundle exec script/delayed_job start 
```

那么你需要做的就是开始一切：

```
foreman start 
```

# django-models - 如何使用 Django 中的表单将数据插入数据库

> ID：15241317
> 
> 赞同：0
> 
> 时间：2013-03-06T07:22:46.660
> 
> 标签：django-models, django-forms, django-views

模型.py

```
class Author(models.Model):
    author_id = models.AutoField(primary_key=True)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    age=models.IntegerField()

    class Meta:
    db_table=u'Author'

    def __unicode__(self):
        return u"%d %s %s %s %d" % (self.pk, self.first_name, self.last_name, self.email,self.age)

class Book(models.Model):
    book_id=models.AutoField(primary_key=True,unique=True)
    book_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    author=models.ForeignKey(Author)

    class Meta:
        db_table = u'Book'

    def __unicode__(self):
        return u'%d %s %s' % (self.pk, self.book_name, self.publisher_name) 
```

我的表格.py

```
class AuthorForm(forms.ModelForm):

    class Meta:
        model = Author
        fields = ['author_id','first_name','last_name','email','age']

class BookForm(forms.ModelForm):

    class Meta:
        model = Book
        fields=['book_id','book_name','publisher_name','author_id'] 
```

视图.py

```
def addbook(request):

    log.debug("test....")
    form = BookForm     
    if request.POST:
        form = BookForm(request.POST)
        if form.is_valid():
            form.save()
            return render_to_response('addbook.html',{'form': form} , context_instance=RequestContext(request)) 
```

我正在尝试将数据插入数据库并通过模板显示它。但我不确定我使用的代码是否正确，因为我遇到了很多错误。例如，最近我收到错误为“ValueError：ModelForm 没有模型指定的类。”。

但在纠正此错误后，再次出现错误，无法将数据保存到数据库。

请检查代码是否正确，如果不给我正确的代码来做同样的事情。实际上我认为views.py 中有一些问题。请检查所有内容并给我一个cooect。

谢谢。

# apache - htaccess mod_rewrite 给我 404

> ID：15241323
> 
> 赞同：0
> 
> 时间：2013-03-06T07:23:03.560
> 
> 标签：apache, .htaccess, mod-rewrite

所以我在我的 .htaccess 文件中有这个

```
RewriteEngine On
RewriteBase /core/
RewriteCond %{QUERY_STRING} ^page=([0-9]+)$
RewriteRule ^page page/%1/? [L] 
```

我的网址是

```
http://localhost/core/page.php?page=8 
```

应用规则后，我得到了..

```
Not Found
The requested URL /core/page/8/ was not found on this server. 
```

这是在 wampserver 2.2 上运行的

文件结构看起来像

```
c:/wamp/www/core 
```

.htaccess 位于 /core/ 目录中。我错过了什么......我检查了我的 apache.conf 文件，它看起来很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:25:38.517

我想你弄错了。在逻辑上考虑重写时，您不会将*原始 URL*重写为*新 URL*（例如*page.php?page=8*到*page/8/*），您实际上将**page/8/**重写为**page.php?page=8**。你告诉服务器它应该如何解释不熟悉的 URL。

因此，如果我理解正确，您想要实现的是：

1.  用户*访问* **localhost/core/page/8/**
2.  为用户*提供服务*（在后台）**localhost/core/page.php?page=8**

我相信以下 RewriteRule 可以解决问题（不需要查询字符串条件）：

```
RewriteRule ^page/(\d+)/$ page.php?page=$1 [L] 
```

# c# - 从网络下载图像并存储在媒体库中（windows phone 8）

> ID：15241325
> 
> 赞同：1
> 
> 时间：2013-03-06T07:23:11.827
> 
> 标签：c#, windows-phone-7, windows-phone-8

我正在尝试从网上下载图像将其保存在媒体库中，下面是我的代码，我在这里遗漏了什么，提前致谢

```
 public void storePicture()
    {
        try
        {

            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {

                 string url = @"http://mynokiablog.com/wp-content/uploads/2012/11/wp8.jpeg";

                  BitmapImage storeimage = new BitmapImage(new Uri(url));

                  // height and width are 0 
                  int testheight = storeimage.PixelHeight;
                  int testwidth = storeimage.PixelWidth;
                IsolatedStorageFileStream fileStream = myIsolatedStorage.CreateFile("testname");
                  // NullRefrenceException
                WriteableBitmap wb = new WriteableBitmap(storeimage);

                wb.SaveJpeg(fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
                fileStream.Close();
            }

        }
        catch (Exception ex)
        {
               System.Diagnostics.Debug.WriteLine(ex.Message);
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:09:41.007

```
private void LoadIMG()
    {

        var bitmapImage = new BitmapImage { CreateOptions = BitmapCreateOptions.None };

        bitmapImage.ImageOpened += bitmapImage_ImageOpened;
        bitmapImage.ImageFailed += bitmapImage_ImageFailed;
        bitmapImage.DownloadProgress += bitmapImage_DownloadProgress;
        bitmapImage.UriSource = new Uri("http://ds.serving-sys.com/BurstingRes///Site-16990/Type-0/7b912e70-352a-454f-8ea7-5d5ecd6ebfae.gif");
    }

    private void bitmapImage_DownloadProgress(object sender, DownloadProgressEventArgs e)
    {

    }

    private void bitmapImage_ImageFailed(object sender, ExceptionRoutedEventArgs e)
    {

    }

    private void bitmapImage_ImageOpened(object sender, RoutedEventArgs e)
    {
         var userStoreForApplication = IsolatedStorageFile.GetUserStoreForApplication(); 
         var writeableBitmap = new WriteableBitmap(sender as BitmapImage);
         var isolatedStorageFileStream = userStoreForApplication.CreateFile("Myfile.gif");
         writeableBitmap.SaveJpeg(isolatedStorageFileStream, writeableBitmap.PixelWidth, writeableBitmap.PixelHeight, 0, 85); 
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T08:14:15.120

添加事件处理程序如下

```
 storeimage.ImageOpened += bitmapImage_ImageOpened;
    storeimage.ImageFailed += bitmapImage_ImageFailed;
    storeimage.DownloadProgress += bitmapImage_DownloadProgress; 
```

然后在`bitmapImage_DownloadProgress,`创建`WritableBitMap`并保存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:57:03.203

你可以试试：[http ://www.kunal-chowdhury.com/2012/02/how-to-download-and-save-images-in-wp7.html#.TzUtWBSaLkM.twitter](http://www.kunal-chowdhury.com/2012/02/how-to-download-and-save-images-in-wp7.html#.TzUtWBSaLkM.twitter)

希望这可以帮助。

# java - 如何在 Selenium 2.0 中的动态菜单项的鼠标悬停上执行鼠标单击

> ID：15241327
> 
> 赞同：0
> 
> 时间：2013-03-06T07:23:16.037
> 
> 标签：java, selenium, selenium-webdriver

我正在使用 Selenium WebDriver 进行沃尔玛自动化。我编写了一个函数来将鼠标悬停在部门菜单“家庭、家具和露台”上，以便突出显示它，然后我可以单击“电器”链接。这是我编写的函数，但它似乎没有悬停在元素上。

```
 public void NavigateDepartments(){
        WebElement ApplianceLink = driver.findElement(By.xpath("//*[div='Home, Furniture & Patio']"));
    Actions myMouse = new Actions(driver);
        myMouse.moveToElement(ApplianceLink).build().perform();
    ApplianceLink.click();

} 
```

我还尝试为 Xpath("/html/body/div/div/div[3]/div/div/div/ul/li[3]/div/div") 提供绝对路径来查找元素，但它没有工作。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T09:26:23.397

您应该首先将*鼠标悬停*在主菜单上，然后移动到新元素

```
WebElement menu = driver.findElement(By.xpath("//path to *appliance*"));
WebElement parentMenu = driver.findElement(By.xpath("//*[div='Home, Furniture & Patio']"));
Actions builder = new Actions(driver);
builder.moveToElement(parentMenu).moveToElement(menu).click().build().perform(); 
```

# php - 使用 HTML 中的类名获取标签的值

> ID：15241336
> 
> 赞同：0
> 
> 时间：2013-03-06T07:23:46.007
> 
> 标签：php, html

我知道如何在解析 HTML 时根据 id 和标签获取值。但我不知道如何根据`classname`. 这是我尝试过的：

```
$dom = new DOMDocument();
$dom->loadHTML($html);

$data = $dom->getElementsByTagName($identifier);

foreach ($data as $v) 
{
    $value[] = $v->nodeValue;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:26:57.817

您刚刚尝试通过标记名获取元素。你需要做的是：-

```
1.Get all the elements by TagName.
2\. Now take the classname from the tagname if exists.
3.Compare the classname wit ur input classname, if exists print that data. 
```

试试这个，对我有用：-

```
$dom = new DOMDocument();
$dom->loadHTML($html);
$new_data = $dom->getElementsByTagName('*');
        $matched = array();

        //echo $data->nodeValue;
        for ($i = 0; $i < $new_data->length; $i++) {

            if (isset($new_data->item($i)->attributes->getNamedItem('class')->nodeValue)) {
                $classname = $new_data->item($i)->attributes->getNamedItem('class')->nodeValue;
                if ($classname == $identifier) {
                    $matched[] = $new_data->item($i)->nodeValue;
                }
            }
        }
        print_r($matched); 
```

# pdf - pdf将字体颜色设置为文本

> ID：15241337
> 
> 赞同：4
> 
> 时间：2013-03-06T07:23:47.620
> 
> 标签：pdf, pdf-generation

我正在尝试手动将一些文本添加到 pdf 文件中。我能够添加具有特定字体的新文本。但我无法设置字体颜色。那么我该如何手动完成呢？（我只想手动更改这些，因为我已经有了编写这些字节以制作 pdf 文件的代码）另外，我如何使用 pdf 标准中指定的图形状态来操作文本，以便功能更改不会影响颜色变化等。我究竟如何使用图形状态？

源 pdf 文件[单击此处](http://incometaxsoft.com/pdf/itr.pdf) 修改的 pdf 文件[clcik 此处](http://incometaxsoft.com/pdf/ITR%20added%20contents,%20fonts.pdf)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T08:30:41.523

PDF 颜色运算符列在 PDF 规范[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)的表 74 中。

在您的情况下，您添加的内容流是

```
104 0 obj
<</Length 105 0 R>>stream
  /Helv 8 Tf
  BT
  1 0 0 1 15.67 150 Tm
  (l)Tj
  ET
  /Helv 8 Tf
  BT
  1 0 0 1 17.88 190 Tm
  (abcdefghijklmnopqr)Tj
  ET
endstream
endobj 
```

例如，如果您希望在 RGB 颜色空间中用红色填充文字，请添加`1 0 0 rg`：

```
104 0 obj
<</Length 105 0 R>>stream
  BT
  1 0 0 1 15.67 150 Tm
  /Helv 8 Tf
  1 0 0 rg
  [...] 
```

**编辑**

如果您担心该更改可能会影响以后的文本，请记住使用图形状态堆栈运算符**q**和**Q**（参见[PDF 规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)的第 8.4.2 节）。例如

```
q
0 1 -1 0 595.22 0 cm
q
BT
1 0 0 1 36 540 Tm
/Xi0 12 Tf
0.75 g
(Hello people!)Tj
0 g
ET
Q
Q 
```

*（复制自[How to add text object to existing pdf](https://stackoverflow.com/questions/15151097/how-to-add-text-object-to-existing-pdf/15198301#15198301)）*

# python - 使用目录浏览递归搜索网站上的文件

> ID：15241338
> 
> 赞同：0
> 
> 时间：2013-03-06T07:23:55.193
> 
> 标签：python, urllib

有没有办法通过 http 目录浏览来定位文件或目录是否存在于 web 服务器上？我有一个包含许多文件和目录的站点。我想遍历目录并找到可以位于子目录中任何位置的给定文件。通常我们可以`os.path.isfile("file_name")`在文件系统上执行此操作，但这不适用于 HTTP 上的目录浏览。我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:46:51.697

在 Web 上这样做并不像使用文件系统那样简单。一方面，文件夹列表会有所不同，具体取决于它是什么网络服务器。所以你必须知道列表的格式。例如，我注意到大多数 linux/apache 服务器的一个模式是文件夹以斜杠“/”结尾，文件没有。父文件夹以斜杠开头，文件夹不……等等……

这只是一个示例（确实有效），应该让您朝着正确的方向开始。要运行示例，您必须安装[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)

```
import urllib.request
from bs4 import BeautifulSoup

def RecurseLinks(base):

    f = urllib.request.urlopen(base)
    soup = BeautifulSoup(f.read())
    for anchor in soup.find_all('a'):
        href = anchor.get('href')
        if (href.startswith('/')):
            print ('skip, most likely the parent folder -> ' + href)
        elif (href.endswith('/')):
            print ('crawl -> [' + base + href + ']')
            RecurseLinks(base + href) # make recursive call w/ the new base folder
        else:
            print ('some file, check if xyz.txt -> ' + href) # save it to a list or return 

# call the initial root web folder
RecurseLinks('http://somesite-xyx.com.com/directory-browsing/') 
```

# iphone - 如何在地图的注释标注中添加自定义视图

> ID：15241340
> 
> 赞同：32
> 
> 时间：2013-03-06T07:24:04.713
> 
> 标签：iphone, maps

这是我的代码。我想添加我自己的自定义标注视图而不是 iOS 默认值。我知道只有左标注和右标注视图，但我需要添加一个带有我自己的背景和标签的视图工具提示类型。

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
    {
        MKAnnotationView *userAnnotationView = nil;
        if ([annotation isKindOfClass:MKUserLocation.class])
        {
            userAnnotationView = (MKAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"UserLocation"];
            if (userAnnotationView == nil)  {
            userAnnotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"UserLocation"];
            }
            else
                userAnnotationView.annotation = annotation;

            userAnnotationView.enabled = YES;

            userAnnotationView.canShowCallout = YES;
            userAnnotationView.image = [UIImage imageNamed:@"map_pin.png"];
            UIView *view = [[UIView alloc]initWithFrame:CGRectMake(0,0,141,108)];
            view.backgroundColor = [UIColor clearColor];
            UIImageView *imgView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"toltip.png"]];
            [view addSubview:imgView];
            userAnnotationView.leftCalloutAccessoryView = view;

            return userAnnotationView;
        }

} 
```

![图片供参考](../Images/6cd54a6d0f2f2e094167ef700a2d89aa.png)

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-10-16T13:37:19.410

我遇到了同样的问题，最终做了以下事情：

当我收到 mapView 委托回调时

```
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view 
```

（是时候展示我的自定义 CalloutView 了）

我使用作为参数接收的视图***(MKAnnotationView *)view*** （这是一个引脚视图），并使用简单地将我的自定义视图添加到该引脚视图

```
 [view addSubview:customView]; 
```

它会将您的自定义视图添加到该引脚视图的顶部，因此如果我们希望它位于引脚上方，我们必须更改自定义视图中心属性，如下所示：

```
CGRect customViewRect = customView.frame;
        CGRect rect = CGRectMake(-customViewRect.size.width/2, -customViewRect.size.height-7, customViewRect.size.width, customViewRect.size.height);
        customView.frame = rect;
[view addSubview:customView]; 
```

就我而言，它看起来像这样

![在此处输入图像描述](../Images/37d292cdbc8731bc14cd9cc20a402fe9.png)

**！注意**：

有一个警告可以很容易地解决，您的***自定义视图将忽略触摸事件***，因为**mapView**以不同的方式处理触摸。这是一个***快速修复***：

**1）**子类**MKAnnotationView**（或**MKPinAnnotationView**取决于你需要什么）

**2)**在您的 mapView 委托中

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation 
```

使用您的子类而不是 MKAnnotationView/MKPinAnnotationView

**3）**在您的子类 .m 文件中覆盖以下两种方法：

```
- (UIView*)hitTest:(CGPoint)point withEvent:(UIEvent*)event
{
    UIView* hitView = [super hitTest:point withEvent:event];
    if (hitView != nil)
    {
        [self.superview bringSubviewToFront:self];
    }
    return hitView;
}

- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent*)event
{
    CGRect rect = self.bounds;
    BOOL isInside = CGRectContainsPoint(rect, point);
    if(!isInside)
    {
        for (UIView *view in self.subviews)
        {
            isInside = CGRectContainsPoint(view.frame, point);
            if(isInside)
                break;
        }
    }
    return isInside;
} 
```

**全部完成！**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-04-12T20:42:19.120

我创建了一个库来显示自定义标注。

[DXCustomCallout-ObjC](https://github.com/s3lvin/DXCustomCallout-ObjC)

您可以为标注传递任何自定义视图！它也支持 UIControls 的事件。

![自定义标注](../Images/b772eb0c623b2ad4fc48a3cd3e079e12.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-31T10:12:45.707

**到 Swift 上面的最佳答案**

这可以节省一些时间来重写自己。

！笔记：

有一个警告可以很容易地修复，您的自定义视图将忽略触摸事件，因为 mapView 以不同的方式处理触摸。这是一个快速修复：

1）子类MKAnnotationView（或MKPinAnnotationView取决于你需要什么）

2) 在您的 mapView 委托中

```
func mapView(mapView: MKMapView, viewForAnnotation annotation: MKAnnotation) -> MKAnnotationView? 
```

使用您的子类而不是 MKAnnotationView/MKPinAnnotationView

3）在您的子类 .m 文件中覆盖以下两种方法：

```
override func hitTest(point: CGPoint, withEvent event: UIEvent?) -> UIView? {

    let hitView = super.hitTest(point, withEvent: event)

    if (hitView != nil)
    {
        self.superview?.bringSubviewToFront(self)
    }

    return hitView;

}

override func pointInside(point: CGPoint, withEvent event: UIEvent?) -> Bool {

    let rect = self.bounds
    var isInside = CGRectContainsPoint(rect, point)

    if(!isInside) {
        for view in self.subviews {

            isInside = CGRectContainsPoint(view.frame, point)
            break;
        }
    }

    return isInside
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T07:33:42.467

这是 CallOut 视图的最佳示例

[http://www.cocoacontrols.com/platforms/ios/controls/gikanimatedcallout](http://www.cocoacontrols.com/platforms/ios/controls/gikanimatedcallout)

[http://www.cocoacontrols.com/platforms/ios/controls/multirowcalloutannotationview](http://www.cocoacontrols.com/platforms/ios/controls/multirowcalloutannotationview)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-16T02:51:11.030

我刚刚为我的地图视图创建了一个自定义标注，以避免在点击时标注消失的问题。[这](https://gist.github.com/ShadoFlameX/7495098)是我采取的步骤的要点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-10T12:56:07.297

你可以使用这个库。它还为标注视图提供了一个现成的模板。为您的自定义视图添加很酷的动画和锚视图。

[https://github.com/okhanokbay/MapViewPlus](https://github.com/okhanokbay/MapViewPlus)

[![在此处输入图像描述](../Images/5cb9a09a6090127d0bb36fc81cae885d.png)](https://i.stack.imgur.com/hlMWT.png) [![在此处输入图像描述](../Images/ebdc24f00892a307b42d8babe7d8b291.png)](https://i.stack.imgur.com/efKLx.png)

# java - java：清除行时生成的俄罗斯方块随机块

> ID：15241355
> 
> 赞同：5
> 
> 时间：2013-03-06T07:24:40.963
> 
> 标签：java, swing

我正在尝试用java制作游戏俄罗斯方块。

我已经做到了：

*   当它撞到地板或它的 y+1 不为空时会生成一个新块（意味着它下面还有另一个块）

    ```
    public void collisionCheck(int x, int y) {
        if (activetile.getY() == this.height-2 || getTileAt(x, y+1) != null) {
            activetile = new Tile(this, 0, 0);    
       }
    } 
    ```

*   当底行充满非空值或俄罗斯方块时，一行将被清除（对于 y = 4（地板），循环通过 x 直到 x = 4 并检查是否所有非空）

    ```
    public void checkBottomFull(int x, int y) {
    while (getTileAt(x,y) != null) {    
        say("(" + x + ", " + y +")");
        if (x == 3) {
            say("row is full");     
            //replace full row with tiles from above
            for (int i = 0; i < 4; i++) {
                for (int j = 5; j > 0; j--) {
                    grid[j][i] = getTileAt(i,j-1);
                    grid[j-1][i] = null;
                }
            }
        break;
        }       
       x++;
      }
    } 
    ```

现在，我正在使用键来移动块：

```
public void keyPressed(KeyEvent e) {
    int keyCode = e.getKeyCode();
    if(keyCode == KeyEvent.VK_DOWN) {
        activetile.setLocation(activetile.getX(), activetile.getY()+1);
        System.out.println("coordinates: " + activetile.getX() + ", " + activetile.getY());

        collisionCheck(activetile.getX(),activetile.getY());

        checkBottomFull(0,4);

        repaint();
    }
  } 
```

* * *

我有两个问题：

1）在图片中，您会注意到我已经将积木一直掉到地板上......并且该行被清除了。清除后，它将在左上角（x=0，y=1）生成一个我无法控制的块。

2）在地板上似乎有一条红线......我假设它是被JFrame隐藏的一排块......我不确定为什么会在那里。

![在此处输入图像描述](../Images/0035cc3244ae7cad7f409ef08b2126e3.png)

仅供参考：如果您想知道为什么 grid[j][i] 的行和列被翻转（也就是为什么它不是 grid[i][j]）是因为我将它实例化为`grid = new Tile[height][width];`

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:51:44.333

如果不实际调试您的应用程序，很难说出哪里出了问题。但也许试试这个：

```
public void checkBottomFull(int x, int y) {
    while (getTileAt(x,y) != null) {    
    say("(" + x + ", " + y +")");
    if (x == 3) {
        say("row is full");     
        //replace full row with tiles from above
        for (int i = 0; i < 4; i++) {
            for (int j = 4; j >= 0; j--) {
                grid[j][i] = getTileAt(i,j-1);
                grid[j-1][i] = null;
            }
        }
    break;
    }       
   x++;
   }
} 
```

您有 5 行（索引从 0 到 4）和 4 列（索引从 0 到 3）。你传递给什么高度和宽度值：grid = new Tile[height][width];

因为据我所知，您应该这样做： grid = new Tile[5][4];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:00:38.713

呸，

结果在关键事件中，我需要在检查是否有碰撞之前检查底部是否已满。

我想发生的事情是，当我`collisionCheck(activetile.getX(),activetile.getY());`之前检查`checkBottomFull(0,4);`时，当底部已满时，它会清除该行并将当前行设置为等于它上面的行：`grid[j][i] = getTileAt(i,j-1);`，问题是`collisionCheck`正在生成一个新的片段和那个新的生成的部分被清除并替换为`checkBottomFull`.

将碰撞检查放在`checkBottomFull`确保底部已满时不会替换新生成的部件。

# performancepoint - 分析分解树中的单元格时发生异常

> ID：15241356
> 
> 赞同：0
> 
> 时间：2013-03-06T07:24:41.113
> 
> 标签：performancepoint

我在 PPS 中遇到分解树的问题

错误：分析分解树中的单元格时发生异常

如何解决这个问题，这个问题的原因是什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:12:45.577

我建议为您的 SharePoint 服务器安装最新的服务包和累积更新，并查看任何 PerformancePoint 修补程序。

我在 decomp 树上遇到了类似的问题，并与 Microsoft 开了一张票。他们确定这是 Kerberos dll 的问题，即使我没有在我的环境中使用 Kerberos.... 很奇怪。这是该[修补程序](http://support.microsoft.com/kb/969083)的链接。也许尝试将它安装在您的开发环境中，看看效果如何。

这是一篇[概述其他一些修补程序](http://denglishbi.wordpress.com/2011/05/05/performancepoint-services-2010-pps-hotfixes/)的帖子。虽然它已经过时了，但它可能会对你有所帮助。

# ruby-on-rails-3 - 隐藏在 URL 中的 Rails 3.2.12 控制器操作

> ID：15241358
> 
> 赞同：3
> 
> 时间：2013-03-06T07:24:43.340
> 
> 标签：ruby-on-rails-3, routes

我有脚手架“类别”，其中包含表“类别”和 category_name 等字段。现在在我的主页上，我正在显示所有记录。如果我点击任何特定类别的“显示”，我的 URL 看起来像这样 ->“ [http://www.abc.com/categories/1](http://www.abc.com/categories/1) ”，其中 1 是 id。在这里，我希望 url 采用这种格式而不是“categories/1”：“ [http://www.abc.com/#](http://www.abc.com/#) {category_name}”。我使用友好的 id，但这使我的 URL 像这样“ [http://www.abc.com/categories/#](http://www.abc.com/categories/#) {category_name}”。我想从 url 隐藏控制器名称和 id，只显示类别名称

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:27:57.193

您可以添加类似

```
match '/:path' => 'categories#show', as: :category 
```

在你的路线中。请注意，这应该放在路由的底部，因此它的优先级最低，因为它将匹配所有控制器的索引操作。像这样使用它

```
category_path(category_name) 
```

或者

```
"/#{category_name}" 
```

您可能还需要删除 show 到 show 操作的映射，这样它就不会与通过添加`as: :category`选项生成的 named_route 冲突

```
resources :categories, except: [:show] 
```

# titanium-mobile - 在 Titanium 中调用本机 android 活动

> ID：15241362
> 
> 赞同：1
> 
> 时间：2013-03-06T07:25:04.240
> 
> 标签：titanium-mobile, titanium-modules

对于我的 Titanium 应用程序，我正在编写一个自定义的原生 android 模块，其中包括一个 android jar，其中包含一些我想要重用的 android 活动。我如何从我的应用程序中调用这些活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T01:26:20.853

这直接来自 Titanium Android 模块开发指南[https://wiki.appcelerator.org/display/guides/Android+Module+Development+Guide](https://wiki.appcelerator.org/display/guides/Android+Module+Development+Guide)

> 要在 Titanium Mobile 应用程序中使用您的模块，请执行以下步骤：
> 
> 将模块 zip 复制到 Titanium 应用程序的根目录下，或者复制到系统 Titanium 安装的根目录下，在应用程序的 tiapp.xml 中，在里面添加以下 XML：
> 
> ```
> <!-- $MODULE_VERSION should be the same as "version" in the module manifest -->
> <modules>
>   <module version="$MODULE_VERSION">$MODULE_ID</module>
>   <!-- For example, if we were adding the calc module: -->
>   <module version="0.1">org.appcelerator.calc</module>
> </modules> 
> ```
> 
> 使用 require 函数在应用程序代码中加载模块，示例：
> 
> ```
> var Module = require('$MODULE_ID');
> // For example, to load the calc module:
> var Calc = require('org.appcelerator.calc'); 
> ```
> 
> 下次启动或构建应用程序时，该模块应包含在应用程序中

# html - 限制段落元素 CSS 的宽度

> ID：15241364
> 
> 赞同：3
> 
> 时间：2013-03-06T07:25:08.140
> 
> 标签：html, css

我希望我的“.tag” div 仅与其中的文本一样宽。但是，由于某种原因，段落元素跨越了父元素的整个宽度。我怎样才能阻止这种情况发生？那么“.tag” div 的宽度与它们内部的文本一样宽吗？

JSFIDDLE：http: [//jsfiddle.net/X77e7/](http://jsfiddle.net/X77e7/)

我的 HTML：

```
<div class="tag">
    <p> Hiking </p>
</div> 
```

我的 CSS：

```
.tag {
    margin: 0px 10px 0px 0px;
    padding: 5px 5px 5px 5px;
    height: auto;
    width: auto;
    border: 1px solid #ddd;
    border-radius: 4px 4px 4px 4px;
    background-color: #f4f4f4;
}
.tag p {
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 0px;
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-size: 12px;
    color: #444;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T07:27:05.667

添加`display:inline-block`

它现在正在拉伸，因为 div 默认情况下是占据整个空间的块元素。

```
.tag {
    margin: 0px 10px 0px 0px;
    padding: 5px 5px 5px 5px;
    height: auto;
    width: auto;
    border: 1px solid #ddd;
    border-radius: 4px 4px 4px 4px;
    background-color: #f4f4f4; display:inline-block
} 
```

[**演示**](http://jsfiddle.net/X77e7/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:28:04.803

两者`div`都是`p`元素`block`。所以你应该考虑设置`display`at `inline`。

```
.tag {
    display: inline;
    margin: 0px 10px 0px 0px;
    padding: 5px 5px 5px 5px;
    height: auto;
    width: auto;
    border: 1px solid #ddd;
    border-radius: 4px 4px 4px 4px;
    background-color: #f4f4f4;
}

.tag p {
    display: inline;
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 0px;
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-size: 12px;
    color: #444;
} 
```

[http://jsfiddle.net/X77e7/2/](http://jsfiddle.net/X77e7/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T08:26:16.980

只是`float`你`.tag`和你的问题解决了

```
.tag {
    float:left;
    margin: 0px 10px 0px 0px;
    padding: 5px 5px 5px 5px;
    height: auto;
    width: auto;
    border: 1px solid #ddd;
    border-radius: 4px 4px 4px 4px;
    background-color: #f4f4f4;
} 
```

[**演示**](http://jsfiddle.net/X77e7/4/)

# php - 在php中反序列化序列化数组

> ID：15241369
> 
> 赞同：3
> 
> 时间：2013-03-06T07:25:30.833
> 
> 标签：php, serialization

我有一个数组，其中所有键值都以序列化方式这里是示例代码

```
Array
(
    [Entry1] => Array
    (
        [emergency_contact] => s:205:"a:5:{s:22:"emergency_contact_name";s:0:"";s:23:"emergency_contact_email";s:0:"";s:23:"emergency_contact_phone";s:0:"";s:26:"emergency_contact_relation";s:0:"";s:30:"emergency_contact_rx_allergies";s:0:"";}";
        [email] => s:23:"h.v@gmail.com";
        [c_address] => s:14:"1067 Broad Way";
        [c_address2] => s:6:"Mangal";
        [c_postcode] => s:5:"12345";
        [c_city] => s:14:"Sans Frnasisco";
        [c_state] => s:7:"LOS";
        [c_country_of_residence] => s:3:"109";
    )
    [Entry2] => Array
    (
        [emergency_contact] => s:205:"a:5:{s:22:"emergency_contact_name";s:0:"";s:23:"emergency_contact_email";s:0:"";s:23:"emergency_contact_phone";s:0:"";s:26:"emergency_contact_relation";s:0:"";s:30:"emergency_contact_rx_allergies";s:0:"";}";
        [email] => s:23:"h.v@gmail.com";
        [c_address] => s:14:"1067 Broad Way";
        [c_address2] => s:6:"Mangal";
        [c_postcode] => s:5:"12345";
        [c_city] => s:14:"Sans Frnasisco";
        [c_state] => s:7:"LOS";
        [c_country_of_residence] => s:3:"109";
    )
) 
```

有什么办法可以查看所有数据更改它并以相同的方式再次序列化它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:28:46.890

```
array_walk_recursive($array, function (&$value) { $value = unserialize($value); });

// do something with the array

array_walk_recursive($array, function (&$value) { $value = serialize($value); }); 
```

但实际上，将每个单独的值序列化是相当疯狂的。如果可以的话，你应该停止它。

# python - 如何在 python django 表单中使用默认参数传递非默认参数

> ID：15241371
> 
> 赞同：0
> 
> 时间：2013-03-06T07:25:33.580
> 
> 标签：python, django, django-forms, django-views, django-formwizard

这是我的代码

```
class FarticlesWizard(FormWizard):

    def done(self,request,form_list):

        if request.method=='POST':
            form1=F1articles(request.POST)  
            form2=F2articles(request.POST)
            form_dict={}
            for x in form_list:
                form_dict=dict(form_dict.items()+x.cleaned_data.items())
                insert_db=Marticles(heading = form_dict['heading'],
                                    content = form_dict['content'],
                                    created_by=request.session['user_name'],    
                                    country=form_dict['country'],
                                    work=form_dict['work'])
                insert_db.save()
            return HttpResponseRedirect('/display/') 
```

但我现在需要传递定义`done(self,request,id=None, form_list):`，其中 id 是非默认参数...我收到错误消息`non-default argument follows default argument (views.py, line 130)`有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:31:59.617

不。正如错误消息所暗示的那样，任何具有默认值的参数都必须位于所有没有默认值的参数之后。

为什么你觉得你需要像这样在中间添加新参数？为什么不直接做`def done(self, request, form_list, id=None)`？在中间添加一个新参数将破坏所有使用位置参数调用该函数的现有代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:34:28.720

默认参数都必须在非默认参数之后，否则位置参数传递会被搞砸。如果你有`def done(self,request,id=None,form_list):`并且你在`done(r,fl)`某个地方打电话，python 不知道 fl 是进入 id 还是 form_list。您总是必须指定 id 才能指定 form_list。这就是为什么默认参数都在最后，比如`def done(self,request,form_list,id=None)`

# mongodb - 如何确保游标在 MongoDB 中不返回重复文档？

> ID：15241373
> 
> 赞同：3
> 
> 时间：2013-03-06T07:25:38.920
> 
> 标签：mongodb

在 MongoDB 中，对集合的读取操作返回游标。

如果读取操作正在访问集合中的大部分文档，并且它可能会与其他更新操作交错。

在这种情况下，光标可能会有重复的文档吗？

如何确保光标避免重复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T09:28:56.383

distinct 方法在这里不会有太大帮助。这不是该函数可以解决的问题，不仅如此，它的速度只是普通光标的一小部分。

> 如果读取操作正在访问集合中的大部分文档，并且它可能会与其他更新操作交错。

如果文档以这样的方式移动，则有可能使用光标类型再次读取它们。

这是否是一个问题取决于，例如，如果您正在按不会更新的内容进行排序`_id`，那么您真的不需要担心，但是，如果您正在按将被更新并且可能会发生变化的内容进行排序好的; 你会有问题。

解决此问题的一种方法是查看`_id`游标迭代中的最后一个，将游标填充到数组或其他东西中的 1000 批中。在您拥有该`_id`批次中的最后一个之后，您将获得大于该范围的所有内容`_id`。

另一种方法是进行快照查询：[http](http://docs.mongodb.org/manual/reference/operator/snapshot/) ://docs.mongodb.org/manual/reference/operator/snapshot/但是这个函数有很多限制，例如它不能与分片集合一起使用。

# c - 需要帮助将 const char* 单词转换为它的小写版本

> ID：15241380
> 
> 赞同：1
> 
> 时间：2013-03-06T07:26:05.707
> 
> 标签：c

我正在尝试将 aa const.char 转换为该单词的小写版本。这是我目前拥有的代码：

```
int i=0;
char DuplicateArray[45];
int sizevalue=0;
Node* NodePointer=NULL;
unsigned int hashval=0;
int counter=0;
sizevalue=strlen (word);

strncpy(&DuplicateArray[counter], word,sizevalue);//word is the const char pointer.
DuplicateArray[sizevalue+1] = '\0';
hashval=hash(DuplicateArray);//function I call to determine hash value
while ( DuplicateArray[i] != '\0' )
{
    DuplicateArray[i] = tolower(DuplicateArray[i]);    
    i++;
} 
```

但是，使用此代码，我无法使数组中的字符小写。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:39:16.583

我的猜测是，您要么误解了数组和`&`and`[]`运算符，要么代码中的其他各种“小”错误（据我所知，所有这些错误都会导致 UB）使您的程序行为异常。这[有效](http://ideone.com/efwFg1)：

```
#include <string.h>
#include <stdio.h>

int main()
{
    const char* uppercase = "UpPeRcAsE";

    char duplicateArray[45];
    int uppercaseSize = strlen(uppercase);

    // copy uppercase into duplicateArray
    strncpy(duplicateArray, uppercase, uppercaseSize);

    duplicateArray[uppercaseSize] = '\0';
    int i = 0;
    while (duplicateArray[i] != '\0')
    {
        duplicateArray[i] = tolower(duplicateArray[i]);    
        i++;
    }

    printf("Before: %s, after: %s\n", uppercase, duplicateArray);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:31:19.680

如果编码是 Ascii，则以二进制形式进行。区别在于第 6 位，大写字母为 0，小写字母为 1。您可以通过以十进制减去 32 或翻转第六位来轻松找到它。例如，字符 A 是 1000001 (0x41)，字符 a 是 1100001 (0x61)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T07:34:35.960

用这个

```
#include <stdio.h>
#include <ctype.h>

void dotolower(const char *cstr)
{
    char *str = (char*)cstr;

    while (*str) {
        *str = tolower(*str);
        ++str;
    }    
}

int main()
{
    char mystr[] = "HELLO";
    dotolower(mystr);
    puts(mystr);    

    return 0;
} 
```

举个例子

# c# - WebConfigurationManager.OpenWebConfiguration 抛出无法映射路径“/”

> ID：15241382
> 
> 赞同：1
> 
> 时间：2013-03-06T07:26:18.023
> 
> 标签：c#, asp.net

我在用：

```
Configuration objConfig = WebConfigurationManager.OpenWebConfiguration(HttpContext.Current.Request.ApplicationPath); 
```

但不幸的是，它会抛出**Failed to map the path '/' 错误**。我也尝试提供物理应用程序路径，但仍然无法正常工作....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:16:41.507

该问题可以通过以管理员身份运行 Visual Studio 来解决。我在 Windows 7 系统上看到了这个错误，当在一个系统上相同的代码运行良好时，但在另一个系统上却没有，并且以管理员身份运行 VS 为我们解决了这个问题。

这是有关 Vista 相同问题和相同解决方案的[参考](http://cs.rthand.com/blogs/blog_with_righthand/archive/2007/12/01/WebConfigurationManager.OpenWebConfiguration-throws-Failed-to-map-the-path-_27002F0027002E00_.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:24:40.337

我没有看到你在这里的线路有任何问题。您也可以尝试这样做：

```
System.Configuration.Configuration objConfig = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~"); 
```

如果失败，请按照以下步骤尝试从 IIS 中“启用父路径”：

1.  打开 IIS 管理器
2.  在“连接”窗格上，展开服务器节点并从“站点”下方选择您的站点。
3.  在“功能”视图中，双击“ASP”。
4.  将“启用父路径”更改为“真”。
5.  在“操作”页面下，单击“应用”。
6.  重新启动 IIS 并查看您的问题是否已解决。

# ios - iOS：我们可以在地图上同时放置不同颜色的图钉吗

> ID：15241383
> 
> 赞同：1
> 
> 时间：2013-03-06T07:26:27.850
> 
> 标签：ios, objective-c, google-maps, mkannotation, pins

我想在地图上使用不同颜色的图钉，例如一些图钉应该是红色的，一些图钉应该是绿色的，一些图钉应该是紫色的。

我正在使用下面的代码，在这段代码中，一次只会丢弃一个颜色引脚。

我想知道，我们可以在地图上同时放置不同颜色的图钉吗

```
-(void)showMap
{

    [map_View setZoomEnabled:YES];
    [map_View setScrollEnabled:YES];

    CLLocationCoordinate2D coordinate;
    coordinate.latitude = 49.2802;
    coordinate.longitude = -123.1182;
    map_View.region = MKCoordinateRegionMakeWithDistance(coordinate, 2000, 2000);

    // Set 10 random locations on the map for testing purposes
    //
    for(int i=0; i<10; i++) {

        CGFloat latDelta = rand()*.035/RAND_MAX -.02;
        CGFloat longDelta = rand()*.03/RAND_MAX -.015;

        CLLocationCoordinate2D newCoord = { coordinate.latitude + latDelta, coordinate.longitude + longDelta };

        RetailerAnnotation *ann = [[RetailerAnnotation alloc] initWithLocation:newCoord];
       // ann.coordinate = newCoord;
        //m_pinColor = @"BLUE";
        if(i< 4)
        {
        m_pinColor = @"RED";
        }
        else if(i>=4 && i<7)
        {
            m_pinColor = @"BLUE";
        }
        else if(i>=7 && i<10)
        {
        m_pinColor = @"GREEN";
        }
        NSLog(@"pin color:%@",m_pinColor);
        [ann setTitle:[NSString stringWithFormat:@"Title%d",i]];
        [ann setSubtitle:[NSString stringWithFormat:@"subTitle%d",i]];

        [map_View addAnnotation:ann];
        [ann release];
    }

}

- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation
{

    static NSString *identifier = @"myPin";
    MKPinAnnotationView *pinView = nil;

    NSLog(@"pin color0:%@",m_pinColor);
    pinView = (MKPinAnnotationView *)[map_View dequeueReusableAnnotationViewWithIdentifier:identifier];

    if (pinView == nil)
    {
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier] autorelease];
        pinView.canShowCallout = YES;
        pinView.animatesDrop = YES;

    /*
        if([m_pinColor isEqualToString:@"RED"]) {

            NSLog(@"pin color1:%@",m_pinColor);
            [pinView setPinColor:MKPinAnnotationColorPurple];
        }
        else if([m_pinColor isEqualToString:@"GREEN"]){
            NSLog(@"pin color2:%@",m_pinColor);
            [pinView setPinColor:MKPinAnnotationColorGreen];
        }
        else if([m_pinColor isEqualToString:@"BLUE"]){
            NSLog(@"pin color3:%@",m_pinColor);
            [pinView setPinColor:MKPinAnnotationColorRed];
        }*/

    }

    if([m_pinColor isEqualToString:@"RED"]) {

    NSLog(@"pin color1:%@",m_pinColor);
    [pinView setPinColor:MKPinAnnotationColorRed];
}
else if([m_pinColor isEqualToString:@"GREEN"]){
    NSLog(@"pin color2:%@",m_pinColor);
    [pinView setPinColor:MKPinAnnotationColorGreen];
}
else if([m_pinColor isEqualToString:@"BLUE"]){
    NSLog(@"pin color3:%@",m_pinColor);
    [pinView setPinColor:MKPinAnnotationColorPurple];
}

    return pinView;
    //[pinView release];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T09:03:41.483

我也在地图上使用不同颜色的图钉。我正在使用下面的代码。我能看到 3 种不同颜色的别针。我正在使用 iOS6，所以我的建议是在 iOS6 上测试此代码。

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation
{   static NSString *identifier = @"myPin";
    MKPinAnnotationView *pinView = nil;
    pinView = (MKPinAnnotationView *)[map_View dequeueReusableAnnotationViewWithIdentifier:identifier]; 
    if (pinView == nil)
    {
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier] autorelease];
        pinView.canShowCallout = YES;
        pinView.animatesDrop = YES;   
    }
    if([m_pinColor isEqualToString:@"Red"]) {
        [pinView setPinColor:MKPinAnnotationColorRed];
    }
    else if([m_pinColor isEqualToString:@"Green"]){
        [pinView setPinColor:MKPinAnnotationColorGreen];
    }
    else if([m_pinColor isEqualToString:@"Purple"]){
        [pinView setPinColor:MKPinAnnotationColorPurple];
    }
    return pinView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:30:27.683

将以下代码放在 if 语句之外。否则当pin被重用时，下面的代码将不会被调用。

```
 if([m_pinColor isEqualToString:@"RED"]) {

        NSLog(@"pin color1:%@",m_pinColor);
        [pinView setPinColor:MKPinAnnotationColorPurple];
    }
    else if([m_pinColor isEqualToString:@"GREEN"]){
        NSLog(@"pin color2:%@",m_pinColor);
        [pinView setPinColor:MKPinAnnotationColorGreen];
    }
    else if([m_pinColor isEqualToString:@"BLUE"]){
        NSLog(@"pin color3:%@",m_pinColor);
        [pinView setPinColor:MKPinAnnotationColorRed];
    } 
```

# java - 获取日出和日落时间

> ID：15241392
> 
> 赞同：4
> 
> 时间：2013-03-06T07:27:05.783
> 
> 标签：java, android, date, gps, timezone

我正在尝试使用此类从日期获取日出和日落时间，但我有一个时区作为时区对象。此类构造函数需要时区作为双精度值。

如何将我的时区转换为双精度时区？

```
/******************************************************************************
*   class:                  SunriseSunset class
*******************************************************************************
*
*   This Java class performs calculations to determine the time of 
*   sunrise and sunset given lat, long, and date.
*
*   It is assumed that the data provided are within valie ranges
*   (i.e. latitude between -90 and +90, longitude between 0 and 360,
*   a valid date, and time zone between -14 and +14.
*  
*----------------------------------------------------------------------------*/
public class SunriseSunset
{

    // Declare and initialize variables
    private double  dfLat;                  // latitude from user
    private double  dfLon;                  // latitude from user
    private Date    dateInput;              // date/time from user
    private double  dfTimeZone;             // time zone from user

    private Date    dateSunrise;            // date and time of sunrise
    private Date    dateSunset;             // date and time of sunset
    private boolean bSunriseToday  = false; // flag for sunrise on this date
    private boolean bSunsetToday   = false; // flag for sunset on this date
    private boolean bSunUpAllDay   = false; // flag for sun up all day
    private boolean bSunDownAllDay = false; // flag for sun down all day
    private boolean bDaytime       = false; // flag for daytime, given 
                                            // hour and min in dateInput
    private boolean bSunrise = false;       // sunrise during hour checked
    private boolean bSunset  = false;       // sunset during hour checked
    private boolean bGregorian = false;     // flag for Gregorian calendar
    private int     iJulian;                // Julian day
    private int     iYear;                  // year of date of interest
    private int     iMonth;                 // month of date of interest
    private int     iDay;                   // day of date of interest
    private int     iCount;                 // a simple counter
    private int     iSign;                  // SUNUP.BAS: S
    private double  dfHourRise, dfHourSet;  // hour of event: SUNUP.BAS H3
    private double  dfMinRise, dfMinSet;    // minute of event: SUNUP.BAS M3
    private double  dfSinLat, dfCosLat;     // sin and cos of latitude
    private double  dfZenith;               // SUNUP.BAS Z: Zenith
    private SimpleDateFormat dfmtDate;      // formatting for date alone
    private SimpleDateFormat dfmtDateTime;  // formatting for date and time
    private SimpleDateFormat dfmtYear;      // formatting for year
    private SimpleDateFormat dfmtMonth;     // formatting for month
    private SimpleDateFormat dfmtDay;       // formatting for day
    // Many variables in SUNUP.BAS have undocumented meanings, 
    // and so are translated rather directly to avoid confusion:
    private double  dfAA1 = 0, dfAA2 = 0;   // SUNUP.BAS A(2)
    private double  dfDD1 = 0, dfDD2 = 0;   // SUNUP.BAS D(2)
    private double  dfC0;                   // SUNUP.BAS C0
    private double  dfK1;                   // SUNUP.BAS K1
    private double  dfP;                    // SUNUP.BAS P
    private double  dfJ;                    // SUNUP.BAS J
    private double  dfJ3;                   // SUNUP.BAS J3
    private double  dfA;                    // SUNUP.BAS A
    private double  dfA0, dfA2, dfA5;       // SUNUP.BAS A0, A2, A5
    private double  dfD0, dfD1, dfD2, dfD5; // SUNUP.BAS D0, D1, D2, D5
    private double  dfDA, dfDD;             // SUNUP.BAS DA, DD
    private double  dfH0, dfH1, dfH2;       // SUNUP.BAS H0, H1, H2
    private double  dfL0, dfL2;             // SUNUP.BAS L0, L2
    private double  dfT, dfT0, dfTT;        // SUNUP.BAS T, T0, TT
    private double  dfV0, dfV1, dfV2;       // SUNUP.BAS V0, V1, V2

    private TimeZone tz = TimeZone.getTimeZone( "GMT" );

/******************************************************************************
*   method:                 SunriseSunset
*******************************************************************************
*
*   Constructor for SunriseSunset class.
* 
*----------------------------------------------------------------------------*/
    SunriseSunset(double dfLatIn,double dfLonIn,Date dateInputIn,double dfTimeZoneIn) 
    {
        // Copy values supplied as agruments to local variables.
        dfLat       = dfLatIn;
        dfLon       = dfLonIn;
        dateInput   = dateInputIn;
        dfTimeZone  = dfTimeZoneIn;

        // Call the method to do the calculations.
        doCalculations();

    } // end of class constructor

/******************************************************************************
*   method:                 doCalculations
*******************************************************************************
*
*   Method for performing the calculations done in SUNUP.BAS.
* 
*----------------------------------------------------------------------------*/
    private void doCalculations()
    {
        try
        {
            // Break out day, month, and year from date provided.
            // (This is necesary for the math algorithms.)

            dfmtYear  = new SimpleDateFormat( "yyyy" );
            dfmtYear.setLenient( false );
            dfmtYear.setTimeZone( tz );

            dfmtMonth = new SimpleDateFormat( "M" );
            dfmtMonth.setLenient( false );
            dfmtMonth.setTimeZone( tz );

            dfmtDay   = new SimpleDateFormat( "d" );
            dfmtDay.setLenient( false );
            dfmtDay.setTimeZone( tz );

            iYear  = Integer.parseInt(  dfmtYear.format( dateInput ) );
            iMonth = Integer.parseInt( dfmtMonth.format( dateInput ) );
            iDay   = Integer.parseInt(   dfmtDay.format( dateInput ) );

            // Convert time zone hours to decimal days (SUNUP.BAS line 50)
            dfTimeZone = dfTimeZone / 24.0;

            // NOTE: (7 Feb 2001) Here is a non-standard part of SUNUP.BAS:
            // It (and this algorithm) assumes that the time zone is 
            // positive west, instead of the standard negative west.
            // Classes calling SunriseSunset will be assuming that 
            // times zones are specified in negative west, so here the 
            // sign is changed so that the SUNUP algorithm works:
            dfTimeZone = -dfTimeZone;

            // Convert longitude to fraction (SUNUP.BAS line 50)
            dfLon = dfLon / 360.0;

            // Convert calendar date to Julian date:
            // Check to see if it's later than 1583: Gregorian calendar
            // When declared, bGregorian is initialized to false.
            // ** Consider making a separate class of this function. **
            if( iYear >= 1583 ) bGregorian = true;
            // SUNUP.BAS 1210
            dfJ = -Math.floor( 7.0      // SUNUP used INT, not floor
                             * ( Math.floor( 
                                            ( iMonth + 9.0 )
                                            / 12.0
                                           ) + iYear
                                ) / 4.0
                             )
                // add SUNUP.BAS 1240 and 1250 for G = 0
                + Math.floor( iMonth * 275.0 / 9.0 )
                + iDay
                + 1721027.0
                + iYear * 367.0;

            if ( bGregorian )
            {
                // SUNUP.BAS 1230
                if ( ( iMonth - 9.0 ) < 0.0 ) iSign = -1;
                else iSign = 1;
                dfA = Math.abs( iMonth - 9.0 );
                // SUNUP.BAS 1240 and 1250
                dfJ3 = -Math.floor(
                                  (
                         Math.floor(
                          Math.floor( iYear 
                                     + (double)iSign 
                                       * Math.floor( dfA / 7.0 )
                                    )
                                    / 100.0
                                   ) + 1.0
                                  ) * 0.75
                                 );
                // correct dfJ as in SUNUP.BAS 1240 and 1250 for G = 1
                dfJ = dfJ + dfJ3 + 2.0;
            }
            // SUNUP.BAS 1290
            iJulian = (int)dfJ - 1;

            // SUNUP.BAS 60 and 70 (see also line 1290)
            dfT = (double)iJulian - 2451545.0 + 0.5;
            dfTT = dfT / 36525.0 + 1.0;             // centuries since 1900

            // Calculate local sidereal time at 0h in zone time
            // SUNUP.BAS 410 through 460
            dfT0 = ( dfT * 8640184.813 / 36525.0
                    + 24110.5
                    + dfTimeZone * 86636.6
                    + dfLon * 86400.0
                  )
                  / 86400.0;
            dfT0 = dfT0 - Math.floor( dfT0 );   // NOTE: SUNUP.BAS uses INT()
            dfT0 = dfT0 * 2.0 * Math.PI;
            // SUNUP.BAS 90
            dfT = dfT + dfTimeZone;

            // SUNUP.BAS 110: Get Sun's position
            for( iCount=0; iCount<=1; iCount++ )    // Loop thru only twice
            {
                // Calculate Sun's right ascension and declination
                //   at the start and end of each day.
                // SUNUP.BAS 910 - 1160: Fundamental arguments
                //   from van Flandern and Pulkkinen, 1979

                // declare local temporary doubles for calculations
                double  dfGG;                       // SUNUP.BAS G
                double  dfLL;                       // SUNUP.BAS L
                double  dfSS;                       // SUNUP.BAS S
                double  dfUU;                       // SUNUP.BAS U
                double  dfVV;                       // SUNUP.BAS V
                double  dfWW;                       // SUNUP.BAS W

                dfLL = 0.779072 + 0.00273790931 * dfT;
                dfLL = dfLL - Math.floor( dfLL );
                dfLL = dfLL * 2.0 * Math.PI;

                dfGG = 0.993126 + 0.0027377785 * dfT;
                dfGG = dfGG - Math.floor( dfGG );
                dfGG = dfGG * 2.0 * Math.PI;

                dfVV =   0.39785 * Math.sin( dfLL )
                        - 0.01000 * Math.sin( dfLL - dfGG )
                        + 0.00333 * Math.sin( dfLL + dfGG )
                        - 0.00021 * Math.sin( dfLL ) * dfTT;

                dfUU = 1
                        - 0.03349 * Math.cos( dfGG )
                        - 0.00014 * Math.cos( dfLL * 2.0 )
                        + 0.00008 * Math.cos( dfLL );

                dfWW = - 0.00010
                        - 0.04129 * Math.sin( dfLL * 2.0 )
                        + 0.03211 * Math.sin( dfGG )
                        - 0.00104 * Math.sin( 2.0 * dfLL - dfGG )
                        - 0.00035 * Math.sin( 2.0 * dfLL + dfGG )
                        - 0.00008 * Math.sin( dfGG ) * dfTT;

                // Compute Sun's RA and Dec; SUNUP.BAS 1120 - 1140
                dfSS = dfWW / Math.sqrt( dfUU - dfVV * dfVV );
                dfA5 = dfLL 
                       + Math.atan( dfSS / Math.sqrt( 1.0 - dfSS * dfSS ));

                dfSS = dfVV / Math.sqrt( dfUU );
                dfD5 = Math.atan( dfSS / Math.sqrt( 1 - dfSS * dfSS ));                 

                // Set values and increment t
                if ( iCount == 0 )      // SUNUP.BAS 125
                {
                    dfAA1 = dfA5;
                    dfDD1 = dfD5;
                }
                else                    // SUNUP.BAS 145
                {
                    dfAA2 = dfA5;
                    dfDD2 = dfD5;
                }
                dfT = dfT + 1.0;        // SUNUP.BAS 130
            }   // end of Get Sun's Position for loop

            if ( dfAA2 < dfAA1 ) dfAA2 = dfAA2 + 2.0 * Math.PI;
                                                            // SUNUP.BAS 150

            dfZenith = Math.PI * 90.833 / 180.0;            // SUNUP.BAS 160
            dfSinLat = Math.sin( dfLat * Math.PI / 180.0 ); // SUNUP.BAS 170
            dfCosLat = Math.cos( dfLat * Math.PI / 180.0 ); // SUNUP.BAS 170

            dfA0 = dfAA1;                                   // SUNUP.BAS 190
            dfD0 = dfDD1;                                   // SUNUP.BAS 190
            dfDA = dfAA2 - dfAA1;                           // SUNUP.BAS 200
            dfDD = dfDD2 - dfDD1;                           // SUNUP.BAS 200

            dfK1 = 15.0 * 1.0027379 * Math.PI / 180.0;      // SUNUP.BAS 330

            // Initialize sunrise and sunset times, and other variables
            // hr and min are set to impossible times to make errors obvious
            dfHourRise = 99.0;
            dfMinRise  = 99.0;
            dfHourSet  = 99.0;
            dfMinSet   = 99.0;
            dfV0 = 0.0;     // initialization implied by absence in SUNUP.BAS
            dfV2 = 0.0;     // initialization implied by absence in SUNUP.BAS

            // Test each hour to see if the Sun crosses the horizon
            //   and which way it is heading.
            for( iCount=0; iCount<24; iCount++ )            // SUNUP.BAS 210
            {
                double  tempA;                              // SUNUP.BAS A
                double  tempB;                              // SUNUP.BAS B
                double  tempD;                              // SUNUP.BAS D
                double  tempE;                              // SUNUP.BAS E

                dfC0 = (double)iCount;
                dfP = ( dfC0 + 1.0 ) / 24.0;                // SUNUP.BAS 220
                dfA2 = dfAA1 + dfP * dfDA;                  // SUNUP.BAS 230
                dfD2 = dfDD1 + dfP * dfDD;                  // SUNUP.BAS 230
                dfL0 = dfT0 + dfC0 * dfK1;                  // SUNUP.BAS 500
                dfL2 = dfL0 + dfK1;                         // SUNUP.BAS 500
                dfH0 = dfL0 - dfA0;                         // SUNUP.BAS 510
                dfH2 = dfL2 - dfA2;                         // SUNUP.BAS 510
                // hour angle at half hour
                dfH1 = ( dfH2 + dfH0 ) / 2.0;               // SUNUP.BAS 520
                // declination at half hour
                dfD1 = ( dfD2 + dfD0 ) / 2.0;               // SUNUP.BAS 530

                // Set value of dfV0 only if this is the first hour, 
                // otherwise, it will get set to the last dfV2 (SUNUP.BAS 250)
                if ( iCount == 0 )                          // SUNUP.BAS 550
                {   
                    dfV0 = dfSinLat * Math.sin( dfD0 )
                         + dfCosLat * Math.cos( dfD0 ) * Math.cos( dfH0 )
                         - Math.cos( dfZenith );            // SUNUP.BAS 560
                }
                else
                    dfV0 = dfV2;    // That is, dfV2 from the previous hour.

                dfV2 = dfSinLat * Math.sin( dfD2 )
                         + dfCosLat * Math.cos( dfD2 ) * Math.cos( dfH2 )
                         - Math.cos( dfZenith );            // SUNUP.BAS 570

                // if dfV0 and dfV2 have the same sign, then proceed to next hr
                if ( 
                     ( dfV0 >= 0.0 && dfV2 >= 0.0 )     // both are positive
                     ||                             // or
                     ( dfV0 < 0.0 && dfV2 < 0.0 )       // both are negative
                   )
                {
                    // Break iteration and proceed to test next hour
                    dfA0 = dfA2;                            // SUNUP.BAS 250
                    dfD0 = dfD2;                            // SUNUP.BAS 250
                    continue;                               // SUNUP.BAS 610
                }

                dfV1 = dfSinLat * Math.sin( dfD1 )
                     + dfCosLat * Math.cos( dfD1 ) * Math.cos( dfH1 )
                     - Math.cos( dfZenith );                // SUNUP.BAS 590

                tempA = 2.0 * dfV2 - 4.0 * dfV1 + 2.0 * dfV0;
                                                            // SUNUP.BAS 600
                tempB = 4.0 * dfV1 - 3.0 * dfV0 - dfV2;     // SUNUP.BAS 600
                tempD = tempB * tempB - 4.0 * tempA * dfV0; // SUNUP.BAS 610

                if ( tempD < 0.0 ) 
                {
                    // Break iteration and proceed to test next hour
                    dfA0 = dfA2;                            // SUNUP.BAS 250
                    dfD0 = dfD2;                            // SUNUP.BAS 250
                    continue;                               // SUNUP.BAS 610
                }

                tempD = Math.sqrt( tempD );                 // SUNUP.BAS 620

                // Determine occurence of sunrise or sunset.

                // Flags to identify occurrence during this day are 
                // bSunriseToday and bSunsetToday, and are initialized false.
                // These are set true only if sunrise or sunset occurs 
                // at any point in the hourly loop. Never set to false.

                // Flags to identify occurrence during this hour:
                bSunrise = false;               // reset before test
                bSunset  = false;               // reset before test

                if ( dfV0 < 0.0 && dfV2 > 0.0 ) // sunrise occurs this hour
                {
                    bSunrise = true;            // SUNUP.BAS 640
                    bSunriseToday = true;       // sunrise occurred today
                }

                if ( dfV0 > 0.0 && dfV2 < 0.0 ) // sunset occurs this hour
                {
                    bSunset = true;             // SUNUP.BAS 660
                    bSunsetToday = true;        // sunset occurred today
                }

                tempE = ( tempD - tempB ) / ( 2.0 * tempA );
                if ( tempE > 1.0 || tempE < 0.0 )   // SUNUP.BAS 670, 680
                    tempE = ( -tempD - tempB ) / ( 2.0 * tempA );                   

                // Set values of hour and minute of sunset or sunrise
                // only if sunrise/set occurred this hour.
                if ( bSunrise )
                {
                    dfHourRise = Math.floor( dfC0 + tempE + 1.0/120.0 );
                    dfMinRise  = Math.floor( 
                                             ( dfC0 + tempE + 1.0/120.0 
                                                - dfHourRise 
                                             )
                                             * 60.0
                                            );
                }

                if ( bSunset )
                {
                    dfHourSet  = Math.floor( dfC0 + tempE + 1.0/120.0 );
                    dfMinSet   = Math.floor( 
                                             ( dfC0 + tempE + 1.0/120.0
                                                - dfHourSet 
                                             ) 
                                             * 60.0
                                            );
                }

                // Change settings of variables for next loop
                dfA0 = dfA2;                                // SUNUP.BAS 250
                dfD0 = dfD2;                                // SUNUP.BAS 250

            }   // end of loop testing each hour for an event   

            // After having checked all hours, set flags if no rise or set
            // bSunUpAllDay and bSundownAllDay are initialized as false
            if ( !bSunriseToday && !bSunsetToday )
            {
                if ( dfV2 < 0.0 )
                    bSunDownAllDay = true;
                else
                    bSunUpAllDay = true;
            }

            // Load dateSunrise with data
            dfmtDateTime = new SimpleDateFormat( "d M yyyy HH:mm z" );
            if( bSunriseToday )
            {
                dateSunrise = dfmtDateTime.parse( iDay 
                                        + " " + iMonth 
                                        + " " + iYear 
                                        + " " + (int)dfHourRise
                                        + ":" + (int)dfMinRise 
                                        + " GMT" );
            }

            // Load dateSunset with data
            if( bSunsetToday )
            {
                dateSunset = dfmtDateTime.parse( iDay 
                                        + " " + iMonth 
                                        + " " + iYear 
                                        + " " + (int)dfHourSet
                                        + ":" + (int)dfMinSet 
                                        + " GMT" );
            }
        } // end of try

        // Catch errors
        catch( ParseException e )
        {
            System.out.println( "\nCannot parse date" );
            System.out.println( e );
            System.exit( 1 );
        } // end of catch

    }

/******************************************************************************
*   method:                 getSunrise()
*******************************************************************************
*
*   Gets the date and time of sunrise.  If there is no sunrise, returns null.
*               
*   Member of SunriseSunset class
*               
* -------------------------------------------------------------------------- */
    public Date getSunrise()
    {
        if ( bSunriseToday )
            return( dateSunrise );
        else
            return( null );
    }

/******************************************************************************
*   method:                 getSunset()
*******************************************************************************
*
*   Gets the date and time of sunset.  If there is no sunset, returns null.
*               
*   Member of SunriseSunset class
*               
* -------------------------------------------------------------------------- */
    public Date getSunset()
    {
        if ( bSunsetToday )
            return( dateSunset );
        else
            return( null );
    }

/******************************************************************************
*   method:                 isSunrise()
*******************************************************************************
*
*   Returns a boolean identifying if there was a sunrise.
*               
*   Member of SunriseSunset class
*               
* -------------------------------------------------------------------------- */
    public boolean isSunrise()
    {
        return( bSunriseToday );
    }

/******************************************************************************
*   method:                 isSunset()
*******************************************************************************
*
*   Returns a boolean identifying if there was a sunset.
*               
*   Member of SunriseSunset class
*               
* -------------------------------------------------------------------------- */
    public boolean isSunset()
    {
        return( bSunsetToday );
    }

/******************************************************************************
*   method:                 isSunUp()
*******************************************************************************
*
*   Returns a boolean identifying if the sun is up all day.
*               
*   Member of SunriseSunset class
*               
* -------------------------------------------------------------------------- */
    public boolean isSunUp()
    {
        return( bSunUpAllDay );
    }

/******************************************************************************
*   method:                 isSunDown()
*******************************************************************************
*
*   Returns a boolean identifying if the sun is down all day.
*               
*   Member of SunriseSunset class
*               
* -------------------------------------------------------------------------- */
    public boolean isSunDown()
    {
        return( bSunDownAllDay );
    }

/******************************************************************************
*   method:                 isDaytime()
*******************************************************************************
*
*   Returns a boolean identifying if it is daytime at the hour contained in 
*   the Date object passed to SunriseSunset on construction.
*               
*   Member of SunriseSunset class
*               
* -------------------------------------------------------------------------- */
    public boolean isDaytime()
    {
        // Determine if it is daytime (at sunrise or later) 
        //  or nighttime (at sunset or later) at the location of interest
        //  but expressed in the time zone requested.
        if ( bSunriseToday && bSunsetToday )    // sunrise and sunset
        {
            if ( dateSunrise.before( dateSunset ) ) // sunrise < sunset
            {
                if ( 
                     (  
                        dateInput.after( dateSunrise ) 
                        ||
                        dateInput.equals( dateSunrise ) 
                     )
                     &&
                     dateInput.before( dateSunset )
                   )
                    bDaytime = true;
                else
                bDaytime = false;
                }
            else    // sunrise comes after sunset (in opposite time zones)
            {
                if ( 
                     (  
                        dateInput.after( dateSunrise ) 
                        ||
                        dateInput.equals( dateSunrise ) 
                     )
                     ||         // use OR rather than AND
                     dateInput.before( dateSunset )
                   )
                    bDaytime = true;
                else
                bDaytime = false;
                }
        }
        else if ( bSunUpAllDay )                // sun is up all day
            bDaytime = true;
        else if ( bSunDownAllDay )              // sun is down all day
            bDaytime = false;
        else if ( bSunriseToday )               // sunrise but no sunset
        {
            if ( dateInput.before( dateSunrise ) )
                bDaytime = false;
            else
                bDaytime = true;
        }
        else if ( bSunsetToday )                // sunset but no sunrise
        {
            if ( dateInput.before( dateSunset ) )
                bDaytime = true;
            else
                bDaytime = false;
        }
        else bDaytime = false;                  // this should never execute

        return( bDaytime );
    }

} // end of class 

/*-----------------------------------------------------------------------------
*                           end of class
*----------------------------------------------------------------------------*/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T08:21:27.560

我知道你从[这里](http://www.neptuneandco.com/~jtauxe/bits/)得到了消息来源。看起来这是一个非常古老的来源。使用[此处](https://github.com/mikereedell/sunrisesunsetlib-java)提供的最新版本。

看起来您可以通过以下代码在此处实现。

```
Location location = new Location("39.9522222", "-75.1641667");
// Pass the time zone display here in the second parameter.
SunriseSunsetCalculator calculator = new SunriseSunsetCalculator(location, "America/New_York"); 
```

# mercurial - Mercurial 命令结合 hg pull；hg起来

> ID：15241394
> 
> 赞同：15
> 
> 时间：2013-03-06T07:27:09.057
> 
> 标签：mercurial, pull

如何将 Mercurial 命令`hg pull`和合二为一`hg update`？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-06T10:27:58.543

显然，`hg pull -u`答案就在这里。

但是，有一个警告值得一提：`hg pull -u`不完全等同于`hg pull`&& `hg update`。文档中简要提到了这一点，但如果您第一次遇到它可能会感到惊讶；如果没有什么可以拉的（例如没有新的变更集进来），那么`hg pull -u`就不会更新。如果您在发出命令之前没有做好准备，这可能会有点令人困惑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T07:36:16.150

输入`hg help pull`，你会看到`-u`开关

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T08:33:35.563

您可以使用：

```
hg pull -u 
```

阅读文档以获取更多选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T21:20:29.783

启用后，`hg fetch`扩展程序将执行相同的操作。然而，它已经失宠，并被 Mercurial 团队称为“不受欢迎的功能”。

# python - python2.7中％运算符的语法无效

> ID：15241399
> 
> 赞同：1
> 
> 时间：2013-03-06T07:27:27.903
> 
> 标签：python, python-2.7

我是 Python 的新手，我一直在使用 Python 2.7 来学习这门语言。但是当我使用 % 运算符进行字符串格式化时，我的 python 返回无效的语法。

为什么返回这样的错误，解决方案是什么？

编码：

```
# Filename: print_tuple.py

age = 22
name = 'Deepak'

print '%s is %d years old' % (name, age)
print 'Why is %s?' % name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:33:03.810

我的建议是使用[格式化](http://docs.python.org/2/library/stdtypes.html#str.format)方法，这样可以消除部分对 %. 的误解。例如：

```
myStr = '{0} int and {1} string and {2} list...'
mystr.format(10, 'string value', range(10) 
```

如果您仍然需要使用 % 表示法，请仔细阅读以下链接： [http ://docs.python.org/2/library/stdtypes.html#string-formatting-operations](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)

认为您只是使用了不正确的转换。

根据您的样本：

```
def print_data(age, name):
    print '{0} is {1} years old'.format(name, age) 
    print 'Who is {0}?'.format(name)

print_data(22, 'Depak') 
```

# iphone - 想要完全释放对象的内存

> ID：15241400
> 
> 赞同：1
> 
> 时间：2013-03-06T07:27:29.207
> 
> 标签：iphone, ios, memory-management, memory-leaks

在一个控制器中，我通过以下方式添加其他控制器的视图：

```
objSecondController = nil;
objSecondController = [[SecondController alloc]initWithNibName:@"SecondController"
                                                        bundle:nil];
[self.view addSubview:objSecondController.view]; 
```

鉴于确实加载了 objSecondController，我执行以下操作：

```
self.pdfView = [[PDFView alloc] init];     
[self.view addSubview:self.pdfView.view]; 
```

然后我根据它的方法指定pdf

在更改 pdf 的按钮单击方法之一中，我执行以下操作：

```
if(self.pdfView)
{
    [self.pdfView.view removeFromSuperview];
    [self.pdfView release];
    self.pdfView = nil;
} 
```

然后再做：

```
self.pdfView = [[PDFView alloc] init];     
[self.view addSubview:self.pdfView.view]; 
```

然后我根据它的方法指定pdf

现在 self.pdfView 是第三方库，每当我使用 self.pdfview 时，它的保留计数会自动增加，所以当我释放 self.pdfView 时，它的保留计数不会变为 0，因此即使我释放它们它也不会解除分配。

pdf 文件大小分别为 25MB 和 39MB，因此之前的内存不会完全释放，它会因内存过多而崩溃。

我应该怎么做self.pdfView完全释放内存，所以在加载其他大pdf时不会产生问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:21:34.580

假设您已经正确实现了 setter/getter 方法，那么您将`pdfView`使用此代码保留太多次：

```
self.pdfView = [[PDFView alloc] init];
[self.view addSubview:self.pdfView.view]; 
```

这是因为 setter for`pdfView`也会调用`retain`.

你需要使用：

```
self.pdfView = [[[PDFView alloc] init] autorelease];
[self.view addSubview:self.pdfView.view]; 
```

同时删除此语句，因为它不是必需的：

```
[self.pdfView release]; 
```

因为这就足够了：

```
self.pdfView = nil; 
```

我建议`pdfView`在`init`方法中分配并释放它，然后在按下*更改 PDF*按钮时更改`dealloc`视图中的 PDF。///每当对象的内容发生变化时，都不需要对象。`viewDidLoad`*`init``addSubview``removeFromSuperview``release``PDFView`*

# matlab - 如何从matlab中的向量中删除特定值？

> ID：15241401
> 
> 赞同：2
> 
> 时间：2013-03-06T07:27:32.637
> 
> 标签：matlab, matrix

例如，如果我有以下索引向量：

```
X = [1 2 3 4 ... 4997 4998 4999 5000] 
```

如何删除另一个向量指定的 X 中的索引，例如

```
Y = [9 18 27 36 45 54 63 72 81 ... 981 990 999] 
```

这样删除后 X 将是：

```
X = [1 ... 8 10 ... 17 19 ... 26 28 ... etc] 
```

另一个例子是`A = [1 2 3 4 5] and B = [2 5]`

以便`A-B = [1 3 4]`

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T07:31:52.480

试试下面的公式：

```
C=setdiff(A, B); 
```

# objective-c - NSEventTrackingRunLoopMode - 这总是运行？

> ID：15241406
> 
> 赞同：1
> 
> 时间：2013-03-06T07:27:45.603
> 
> 标签：objective-c, cocoa, nstimer, nsrunloop

我添加了一个带有 runloopmode NSEventTrackingRunLoopMode 的计时器，如下所示：

```
NSRunLoop *runLoop = [NSRunLoop currentRunLoop];

NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:0.50
                                                  target:self
                                                selector:@selector(targetMethod:)
                                                userInfo:nil
                                                 repeats:YES];

[runLoop addTimer:timer forMode:NSEventTrackingRunLoopMode]; 
```

我认为这只会在例如菜单打开（模式）时执行，但它会触发整个时间，即使什么都不做。这是正常行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:04:30.703

是的，这是正常行为。您将计时器添加到用于跟踪事件的 runloopMode。此运行循环一直运行，用于确定是否有事件需要处理并传递给您的事件处理程序。

# dojo - Dojo 附加点/byId 返回未定义

> ID：15241412
> 
> 赞同：0
> 
> 时间：2013-03-06T07:28:04.197
> 
> 标签：dojo, undefined, getelementbyid

我做了一个模板，有一个`<select dojotype="dijit.form.ComboBox" dojoAttachPoint="selectPageNumber" id="selectPageNumber">`带有 id 的标签，dojoAttachPoint 是“selectPageNumber”。我想在创建时用选项填充它，所以我向 postCreate 函数添加了一些代码：

```
var select = dijit.byId("selectPageNumber"); 
```

或者

```
var select = this.selectPageNumber; 
```

但我总是`select`不确定。
我究竟做错了什么？

**UPD：** element 的问题已经自发解决了，我没有得到解决方案。我没有用也`dojo.addOnLoad`没有`widgetsInTemplate : true`，它刚刚开始工作。但是我又发现了同样的问题：当我添加另一个标签时，我无法得到它！
HTML：

```
<select class="ctrl2" dojotype="dijit.form.ComboBox" dojoAttachPoint="selectPageNumber" id="selectPageNumber">
</select>
<select class="ctrl2" dojotype="dijit.form.ComboBox" dojoAttachPoint="selectPageNumber2" id="selectPageNumber2">
</select> 
```

小部件：

```
alert(this.selectPageNumber);
alert(this.selectPageNumber2); 
```

第一个警报显示这`this.selectPageNumber`是一个有效的对象，并且`this.selectPageNumber2`是空的。
`widgetsInTemplate`设置为假。
里面的所有代码都是`dojo.addOnLoad()`
`dojo.require()`有效的
我正在使用 IBM Rational Application Developer（如果它是必要的）。

为什么如此不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:27:10.190

根据您的语法，我假设您使用的是 1.6。您的问题提到了模板和 postCreate，所以我假设您已经创建了一个充当复合材料的小部件（模板中的小部件）。

假设 1.6，在您的小部件中，您是否将`widgetsInTemplate`属性设置为 true。这将告诉解析器您的模板具有在创建小部件时需要解析的小部件。

[http://dojotoolkit.org/documentation/tutorials/1.6/templated/](http://dojotoolkit.org/documentation/tutorials/1.6/templated/)

我会从选择中删除 id。拥有 id 意味着您每页只能实例化一次小部件。您应该`this.selectPageNumber`在小部件中使用来访问选择小部件。

如果您使用的是 1.7 或更高版本，则不应设置 widgets`widgetsInTemplate`属性，而应使用`dijit._WidgetsInTemplateMixin`mixin。

[http://dojotoolkit.org/reference-guide/1.8/dijit/_WidgetsInTemplateMixin.html](http://dojotoolkit.org/reference-guide/1.8/dijit/_WidgetsInTemplateMixin.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:52:40.380

根据调用 dijit.byId() 的时间，小部件可能尚未创建。尝试使用 dojo.addOnLoad()

```
 dojo.addOnLoad(function() {
     var select = dijit.byId("selectPageNumber");
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:37:01.050

我接近解决方案：似乎有某种 RAD“缓存”不响应 html 代码中所做的更改。
[使用 RAD（基于 Eclipse）清除工作空间环境的方法](https://stackoverflow.com/questions/299011/ways-to-purge-the-workspace-environment-with-rad-based-on-eclipse)可能是一种解决方案。

# javascript - 防止 iframe 滚动

> ID：15241414
> 
> 赞同：0
> 
> 时间：2013-03-06T07:28:05.933
> 
> 标签：javascript, html, css, iframe

所以我正在为浏览器制作一个基于 JS 的游戏，并且有大量的内容我想对游戏的查看者隐藏，我已经`iframe`为此使用了一个。问题是在某些浏览器中，当您按下**空格键**时，它会自动向下滚动屏幕，当玩家按下**空格键**时，页面内部会滚动，而我希望玩家看到的内容最终会离开屏幕。所以我想知道有什么方法可以`iframe`完全防止滚动。（我确实有`scrolling="no"`iframe 属性之一，但它没有起到作用）

我也尝试过`overflow:hidden;`使用 CSS，但这似乎没有帮助。它使 iOS 和 Android 浏览器中的浏览器无法滚动，但在桌面浏览器中问题仍然存在。

这就是我所做的

```
<iframe id="gameframe" name="Double Edge" height="576" width="1024" src="gameStart.html" scrolling="no"></iframe> 
```

在 CSS 中：

```
.gameframe{ overflow:hidden;} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:49:12.317

尝试添加这个`onload`

```
var el = document.createElement("iframe");
 var iframe_style = "overflow:hidden; margin:0;padding:0;"
 var ifattr = {
        id: 'my_iframe', width: '520', height: '300', 'scrolling': 'no', 'marginWidth':0,
        'marginHeight':0, 'noResize': 0, 'border': 0, 'frameBorder':0, 'frameSpacing':0,
        'background': 'transparent','allowTransparency': 'allowTransparency',
        'name' :'my_iframe','style':iframe_style};

 for (var i in ifattr) {
      el.setAttribute(i, ifattr[i]);
 }a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:41:31.447

如果页面上有想要对用户隐藏但需要它做某事的内容，则应使用*"display:none"*。所以没有什么可滚动的，您不必处理用户如何访问您的隐藏内容的不同可能性。

# excel - vba遍历列，如果某个值则增加

> ID：15241415
> 
> 赞同：0
> 
> 时间：2013-03-06T07:28:07.043
> 
> 标签：excel, vba, range, increment

我有一列 C 填充了空单元格或包含值“OK”的单元格。我需要将包含文本“OK”的每个单元格更改为递增值 1、2、3 等。总共 2642 个单元格

```
 C

- 1 [empty]
- 2 [empty]
- 3 [OK]
- 4 [empty]
- 5 [OK]
- 6 [empty] 
```

需要看起来像：C

```
- 1 [empty]
- 2 [empty]
- 3 [1]
- 4 [empty]
- 5 [2]
- 6 [empty] 
```

基本上我需要自动增量但是当过滤数据自动增量不起作用时

代码我使用自动增量所有值，而不是在包含单词“OK”的单元格上显示值，如下所示：

```
 C

- 1 [1]
- 2 [2]
- 3 [empty]
- 4 [4]
- 5 [empty]
- 6 [6] 
```

代码：

```
 Sub Macro1()
    mynumber = 1
    Dim r As Range, cell As Range
    Set r = Range(Range("C1"), Range("C2642").End(xlDown))
    For Each cell In r
      If cell.Value = OK Then cell.Value = mynumber
       mynumber = mynumber + 1
    Next
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:36:23.097

您的代码很接近，但您遇到的问题是您的单元格值正在检查`OK`，认为它是一个变量。为避免这种情况，您要做的第一件事是`Option Explicit`在每个模块的顶部放置以告诉您何时尚未声明变量。

现在您需要做的就是将 'OK' 设为类似`"OK"`. 您还需要在`If`语句中增加您的数字，否则即使您不希望它也会继续增加。

编辑：您也可以通过`Range`在此代码中定义方法中的单元格来更简单地设置范围。它不如使用灵活，`End`但如果你有一个固定的范围就可以了。

试试这个代码：

```
Option Explicit

Sub Macro1()
    Dim r As Range, cell As Range, mynumber As Long

    Set r = Range("C1:C2642")

    mynumber = 1
    For Each cell In r
        If cell.Value = "OK" Then
            cell.Value = mynumber
            mynumber = mynumber + 1
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:46:11.573

您可以在没有宏的情况下执行此操作：

1.  更改为 R1C1 参考样式（*文件*选项卡 - >*选项*->*计算*-> *R1C1 参考样式*
2.  选择整列
3.  替换对话框 ( `Ctrl`- `H`)
4.  全部替换`OK`为`=MAX(R1C1:R[-1]C)+1`
5.  如果您愿意，请复制并粘贴特殊的值
6.  取消选中 R1C1 参考样式

或者，您也可以使用自动过滤器在没有 R1C1 样式的情况下执行此操作：

1.  将自动过滤器应用于您的列 ( `Ctrl`- `Shift`- `L`)
2.  过滤器`OK`
3.  选择所有过滤`OK`的s
4.  输入以下公式： - 使用-`=MAX($A$1:$A2)+1`输入。您需要稍微调整公式 - 用您的数据开始的第一行（或标题行）替换 - 以及活动*单元格上方的单元格*- 即使它是隐藏的！`Ctrl``Enter``$A$1``$A2`
**   如果您愿意，请删除自动筛选 ( `Ctrl`- `Shift`- `L`) 并复制/粘贴特殊值*

# php - PHP 使用按钮和函数

> ID：15241428
> 
> 赞同：0
> 
> 时间：2013-03-06T07:28:58.900
> 
> 标签：php

我在使用按钮执行 php 函数时遇到困难

我一直在网上浏览（当然还有在 stackoverflow 上）寻找解决这个问题的方法。但是，仍然没有运气。这个问题可能已经在这个网站上被问过很多次了，但他们似乎都没有对我有用（或者我只是在编程方面识字太差）。

我想要实现的是在单击按钮后设置会话变量，并在重定向时将其打印在第二页中。

**这是我的第一个 php 页面的样子：**

```
<?php 
session_start();
if(isset($_POST['submit'])) 
{
    $_SESSION['testing']= "hello world";
}
?>

<form method="post" action="update.php">
    <input type="submit" id="submit" name="sumbit" value="Submit" >
</form> 
```

**这是update.php：**

```
<?php 
session_start();
echo $_SESSION['testing'];
?> 
```

它可能看起来没什么问题，但脚本不会执行 " `if(isset(...`" 语句中的任何内容。我使用 WAMP 作为服务器，我的 PHP 版本是 5.3.13

PS：我知道 PHP 是一种服务器端编程，我想做的是类似于客户端脚本的东西。

问题是，我不知道如何使用 javascripting 以及他们所说的“Ajax”脚本。

有什么办法可以解决这个问题吗？是否可以在不使用 javascript 或 ajax 的情况下单独使用 PHP 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:33:25.617

您好，只需`<form method="post" action="">`在表单标签上执行空操作并在会话设置后重定向。`header("location:update.php");`希望解决您的问题。您的第一页代码将是

```
<?php 
session_start();

if(!empty($_POST)) 
{

    $_SESSION['testing']= "hello world";

    header("location:update.php");
}
?>

<form method="post" action="">

    <input type="submit" id="submit" name="sumbit" value="Submit">
</form> 
```

在更新页面上

```
<?php 
session_start();
echo $_SESSION['testing'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:36:25.023

```
$.ajax({
    type: "get",
    url: "update.php",
    success: function(){
    alert("success");
    // do something
}
}); 
```

以上是jquery ajax的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:48:22.433

试试这个：

**第一页：**

```
<form method="post" action="update.php">
    <input type="submit" id="submit" name="sumbit" value="Submit" >
</form> 
```

**更新.php：**

```
<?php 
session_start();
$_SESSION['testing'] = 'Hello World';

echo $_SESSION['testing'];
?> 
```

由于您想在第二页中打印会话，因此您应该在 update.php 中而不是在您的第一页中放置会话值。

# c# - 在 Powershell 中初始化自定义对象列表

> ID：15241435
> 
> 赞同：1
> 
> 时间：2013-03-06T07:29:28.037
> 
> 标签：c#, powershell, collections, initialization

我在 C# .NET 3.5 - VS2010 中有以下代码，用于初始化自定义对象列表

我也需要在 Powershell 2.0 脚本中做同样的事情。

关于它的任何建议，不使用添加类型？

```
public static List<ReplaceForDeployFile> CreateReplaceList()
{
    var list = new List<ReplaceForDeployFile>()
    {
        new ReplaceForDeployFile()
        { 
            PathFile = "web.config",
            ReplaceList = 
                new List<ItemReplaceForDeployFile>()
                {
                    new ItemReplaceForDeployFile()
                    {
                        ReplaceType = "System.String", 
                        ValueSource = @"value=""Value1""", 
                        ValueForDES = @"value=""Value2""",
                    },
                    new ItemReplaceForDeployFile()
                    {
                        ReplaceType = "System.String", 
                        ValueSource = @"customErrors mode=""On""", 
                        ValueForDES = @"customErrors mode=""Off""",
                    },
               },
          },            
    };
    return list;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-07T20:25:28.923

我知道 OP 有 PS v2 的限制。然而，即使我们在 v3 中搜索如何做到这一点，谷歌也会将我们引向这个问题。我正在添加此答案以帮助可能正在寻找此信息的其他 v3 用户。

可以使用以下语法在 PowerShell 中实现[对象初始化](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)器的便利性，

`$item = [FullyQualifiedClassName]@{Prop1='Value1'; Prop2='Value2'}`

OP的例子

```
var item = new ItemReplaceForDeployFile() { ReplaceType = "System.String", ValueSource = @"value=""Value1""", ValueForDES = @"value=""Value2""" }; 
```

变成

```
$item = [Namespace.SubNs.ItemReplaceForDeployFile]@{ReplaceType='System.String'; ValueSource='value="Value1"'; ValueForDES='value="Value2"'} 
```

来源：http: [//blogs.msdn.com/b/powershell/archive/2012/06/14/new-v3-language-features.aspx](http://blogs.msdn.com/b/powershell/archive/2012/06/14/new-v3-language-features.aspx)

> # 新转化
> 
> 有时您希望对散列文字的键进行排序。您现在可以转换为 [ordered]，我们创建一个 OrderedDictionary 而不是 HashTable。这仅适用于文字 - 如果您在变量上尝试它，则排序不再可用。
> 
> `[ordered]@{a=1; b=2}`
> 
> 以类似的方式，您可以使用简单的强制转换创建自定义对象：
> 
> `[pscustomobject]@{x=1; y=2}`
> 
> 这不会创建 HashTable；它创建一个带有注释属性的 PSObject。如果您正在转换文字，则注释属性将按照它们在文字中出现的顺序添加。如果您要转换任何其他内容，则排序由 IDictionary 迭代器确定。
> 
> 如果一个类型有一个默认的构造函数和可设置的属性，你也可以使用一个哈希表来将一个对象大小写为那个类型：
> 
> `[System.Drawing.Point]@{X=1; Y=2}`
> 
> 这将调用默认构造函数并设置哈希表中命名的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T11:40:24.420

您的问题的答案取决于类型`ItemReplaceForDeployFile`的定义方式和位置。一旦加载并且它只有一个默认构造函数，那么您需要单独分配属性：

```
$x = new-object CorrectNamespace.ItemReplaceForDeployFile;
$x.ReplaceType = 'System.String';
$x.ValueSource = 'customErrors mode="On"', 
$x.ValueForDES = 'customErrors mode="Off"', 
```

加载程序集而不使用`Add-Type`使用[`[Assembly]::LoadFrom($path)`](http://msdn.microsoft.com/en-us/library/48k1f5te.aspx)或[`[Assembly]::LoadWithPartialName($name)`](http://msdn.microsoft.com/en-us/library/55swfh6t.aspx)。

但

```
Add-Type -AssemblyName name 
```

更容易和更清晰。

但是，如果您希望 PowerShell 将 C# 中的源代码（或使用参数覆盖 C# 默认值的 VB）动态编译`-CodeDomProvider`到临时程序集中并加载该程序集，您需要做很多工作（自己使用适用的 CodeDOM 类型）。`Add-Type`容易得多。

这将有助于了解您为什么要避免`Add-Type`。

# ios - IOS渐变叠加滚动后变成纯色

> ID：15241437
> 
> 赞同：1
> 
> 时间：2013-03-06T07:29:34.733
> 
> 标签：ios

我有一个自定义表格视图，它将填充动态对象以形成一个列表。我正在尝试在单元格中图像的一半顶部设置渐变叠加。

我在 interface.builder 中设置了布局。

以下是我的问题： - 我遇到的问题是我的渐变叠加层似乎每次都会重新绘制，导致它在向上/向下滚动后变成纯色叠加层。有人知道如何克服这个问题吗？

谢谢！

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    CustomTableViewCell *cell = (CustomTableViewCell* )[tableView dequeueReusableCellWithIdentifier:@"TableCellId"];
    if(cell == nil){
        cell = [[CustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"TableCellId"];
    }

    UIImageView *item_image = (UIImageView *)[cell viewWithTag:@"cell_image"];
    NSString *url_image = [NSString stringWithFormat:@"%@%@", URL_SERVER_HOST, item_pic];

    [item_image setImageWithURL:[NSURL URLWithString:url_image]];

    //Currently get called when new cell is loaded
    UIView *overlay = (UIView *)[cell viewWithTag:@"cell_overlay"];
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = overlay.bounds;
    gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor clearColor] CGColor], (id)[[UIColor blackColor] CGColor], nil];
    [overlay.layer insertSublayer:gradient atIndex:0];

    UILabel * item_name = (UILabel *)[cell viewWithTag:@"cell_name"];
    item_name.text  = @"test text";

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:32:54.640

将渐变相关的代码放入`if (cell == nil)`中，这样cell在复用的时候就不会再添加渐变层了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-23T11:33:52.647

在应用渐变之前，我只是将叠加子层设置为 nil。只需在之前写下一行`[overlay.layer insertSublayer:gradient atIndex:0];`

`overlay.layer.sublayers = nil;`

# java - jar 没有生成正确的清单文件

> ID：15241440
> 
> 赞同：3
> 
> 时间：2013-03-06T07:29:47.177
> 
> 标签：java, scala, jar, executable-jar

我测试了简单的 scala 程序并用 scalac 编译它

```
object Test {
  def main(args: Array[String]) {
    println("hongseok yoon")
  }
} 
```

如果我运行'java -cp .;scala-library.jar Test'并且它工作正常。是的，scala-library.jar 文件在同一目录中。

这是我的清单文件 manifest.txt

```
Class-Path: scala-library.jar
Main-Class: Test 
```

我用' **jar cfm Test.jar manifest.txt *.class** '制作jar

如果我解压缩生成的 Test.jar 文件并打开清单文件，它不包含 Main-Class 字段。所以，它不能用' **java -jar Test.jar** '运行

我可以手动编辑它，Test.jar 运行良好。

**为什么 jar 缺少 Main-Class 字段？以及如何解决这个问题？** （如果我切换字段顺序，则只显示第一个字段）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:21:49.900

****清单文件末尾**还需要**一个空行**。多么愚蠢的限制！:(**

# sql - 如何在 Vb.net 中将 Textbox1 绑定到 Textbox2

> ID：15241444
> 
> 赞同：0
> 
> 时间：2013-03-06T07:30:07.367
> 
> 标签：sql, visual-studio, data-binding, binding, textbox

2008 年，我想将 txtEmpNo 绑定到 txtFullName。但我检查了专栏是正确的。

**错误**“无法绑定到数据源上的属性或列 [First Name]。参数名称：dataMember”

**此代码：**

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim da3 As New SqlDataAdapter
            Dim ds3 As New DataSet()
            Dim bs2 As New BindingSource()

            Dim sql As String = "SELECT Employee.[First Name] From Employee WHERE Employee.EmployeeNo = '" & txtEmpNo.Text.ToString & "'"
            da3 = New SqlDataAdapter(sql, Conn)
            da3.Fill(ds3, "Employee")

            If ds3.Tables("Employee").Rows.Count > 0 Then
                txtFullName.DataBindings.Add(New Binding("Text", ds3, "Employee.[First Name]"))
                txtFullName.DataBindings.Clear()
            Else
                txtFullName.Text = ""
            End If
End Sub 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:40:53.730

`dataMember`参数（第三个）应该只是列的名称。
DataSet 中的正确表应在第二个参数中传递。换句话说，将您的绑定更改为：

```
txtFullName.DataBindings.Add(New Binding("Text", ds3.Tables("Employee"), "First Name")) 
```

# wpf - WPF：带按钮的动态菜单

> ID：15241448
> 
> 赞同：3
> 
> 时间：2013-03-06T07:30:23.657
> 
> 标签：wpf, button, mvvm, menu

我有一个简单的 wpf-mvvm 应用程序，您可以在其中创建和编辑记录。像这样的东西：

![例子](../Images/651f797fdc4cf2aaa77bd1fd4f03d9c2.png)

如果您创建新记录，则有一个“创建”和“取消”按钮。如果您编辑现有记录，则会出现“编辑”、“删除”和“取消”按钮。

我不想使用两种不同的形式。我想使用一个，并创建一个动态菜单，我可以在其中选择哪些按钮是可见的。

现在的 xaml 是这样的：

```
<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
    <Button MinWidth="93" Command="{Binding CreateCommand}>
        Create
    </Button>
    <Button MinWidth="93" Command="{Binding EditCommand}>
        Edit
    </Button>
    <Button MinWidth="93" Command="{Binding DeleteCommand}>
        Delete
    </Button>
    <Button MinWidth="93" Command="{Binding CancelCommand}>
        Cancel
    </Button>
</StackPanel> 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:47:12.083

我也有过类似的情况。有两种选择（至少，一如既往）：

* * *

使用命令的**CanExecute**方法并让它们返回 true 或 false，具体取决于您要编辑的记录类型。该`CanExecute`值切换`IsEnabled`它绑定到的控件的属性。这意味着，如果要隐藏控件，则需要将值“推送”`IsEnabled`到`Visibility`值，例如使用样式触发器。

```
<Style.Triggers>
    <Trigger Property="IsEnabled" Value="False">
        <Setter Property="Visibility" Value="Hidden"/>
    </Trigger>
</Style.Triggers> 
```

我猜这将是标准方法，并且可能对您有意义。

* * *

我有更多动态的情况，想动态地创建按钮。当您在 ViewModel 中定义一个**CommandViewModel 集合**时，这很容易做到。CommandViewModel 可以具有显示在按钮中的名称属性和要执行的命令。然后，您可以使用此集合来填充带有按钮的 ItemsControl。对于您的情况可能有点矫枉过正，但它指的是您的问题的标题，也许您觉得它很有趣并且可以在某个时候使用它。

简而言之，ViewModel：

```
public class CommandViewModel : ViewModelBase
{
   public ICommand Command { get { return ... } }
   public string Name { get; set; }
}

public class MainViewModel : ViewModelBase
{
   ...
   ObservableCollection<CommandViewModel> Commands { get; private set; }

   public MainViewModel()
   {
      Commands = new ObservableCollection<CommandViewModel>();
      // Creates the ViewModels for the commands you want to offer
      PopulateCommands();
   }
} 
```

在 XAML 中看起来像：

```
<ItemsControl ItemsSource="{Binding Commands}"}>
   <ItemsControl.ItemTemplate>
      <DataTemplate>
         <Button Command="{Binding Command}" Content="{Binding Name}" />
      </DataTemplate>
   </ItemsControl.ItemTemplate>
</ItemsControl> 
```

这使得一个动态菜单......

* * *

玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:41:23.347

如果您使用的是 MVVM，那么您有一个 ViewModel，它是您的 DataContext，其中包含创建、编辑、删除和取消命令。

让您的 ViewModel 有一个记录实例。如果您编辑它，请传入要编辑的实例。否则用于创建为空的记录集。

创建您的命令并让 CanExecute 功能检查传入的记录是否为空。（null 代表创建新记录，否则编辑）。如果将命令的 CanExecute 设置为 false，则绑定到它的按钮将自动禁用。

# html - 移动IOS设备旋转后图像大小不一样

> ID：15241452
> 
> 赞同：0
> 
> 时间：2013-03-06T07:30:49.180
> 
> 标签：html, mobile-safari

我正在制作一个网站并在我的 iPad 的 safari 浏览器上查看它。

在纵向方向中，该站点看起来不错。但是当设备旋转时，网页的大小（它的宽度和高度）是不同的。

看来横向视图大约是纵向大小的 1.3 倍。

如何使两个方向的尺寸相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:45:24.543

这可能会有所帮助：

```
var w = $('img').width();
var h = $('img').height();

$(window).orientationchange(function(e) {
     $('img').css({'width':w, 'height':h});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:32:43.327

只需以像素为单位为图像提供宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T08:48:32.263

采用

```
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, width=device-width, user-scalable=no"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T09:18:10.633

只有两个选项。

1.  包括“视口”：[https ://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

2.  使用媒体查询 [http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/) 您可以根据使用的媒体查询的不同大小调整您想要的 CSS。

# php - 如何向 php 函数发送像 {28:1,29:0,30:1} 这样的数组？

> ID：15241459
> 
> 赞同：1
> 
> 时间：2013-03-06T07:31:33.753
> 
> 标签：php, arrays, object

我已经设置了一个 onclick 来向一个 javascript 函数发送一个像 {28:1,29:0,30:1} 这样的数组。

我想知道如何将它发送到 php 函数，以便在接收到它时，它被识别为一个数组，而不是它现在的形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:05:53.480

如果您需要将原始字符串转换为 php 中的数组，您可以尝试

```
$str = '{28:1,29:0,30:1}';

$array = explode(',', trim($str, '{}'));
$result = array();
foreach ($array as $x)
{
    list($key, $value) = explode(':', $x, 2);
    $result[$key] = $value;
} 
```

`echo "<pre>"; print_r($result);`会给你

```
Array
(
    [28] => 1
    [29] => 0
    [30] => 1
) 
```

**[例子](http://codepad.viper-7.com/qGxKnQ)**

# workflow-foundation-4 - 如何为 WF 服务启用 https

> ID：15241461
> 
> 赞同：1
> 
> 时间：2013-03-06T07:31:43.157
> 
> 标签：workflow-foundation-4

我正在尝试为工作流 4.0 托管服务启用 HTTPS 绑定。

我一直在尝试的是更改 IIS 中的启用协议（当前值为 http,net.pipe，这给了我**BasicHttpBinding**广告 net.pipeBinding 但不是**“HTTPSBINDING”**），并将 SSL 要求设置为 true，但是

我究竟做错了什么

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:25:49.220

单击“默认网站”或 iiS 7 中的任何站点，然后单击“绑定”。在端口 443 上添加 HTTPS。

# asp.net - 更改 Session 变量中的 SessionID 数据后丢失

> ID：15241464
> 
> 赞同：3
> 
> 时间：2013-03-06T07:31:59.393
> 
> 标签：asp.net, session-variables, sessionid

我有 asp.net webforms application/ 我需要做的是在用户登录时更改 ASP.NET_SessionId。

当用户登录时，我执行以下代码：

```
SessionIDManager Manager = new SessionIDManager();
string NewID = Manager.CreateSessionID(Context);
bool redirected = false;
bool IsAdded = false;
Manager.SaveSessionID(Context, NewID, out redirected, out IsAdded); 
```

所以， SessionId 在那之后发生了变化。

但是，之后如果我写一些会话变量，例如

```
Session["username"] = username; 
```

然后在回发后我们的数据丢失或与旧会话 ID 相关联。我们有

```
Session["username"] == null 
```

请您帮我在更改 SessionId 后如何写入会话变量，以免数据丢失？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-06-09T17:06:02.443

命令“Manager.SaveSessionID”将删除旧 sessionid 的所有数据。只有一种方法可以保存数据。这是手动移动数据。您在登录按钮中使用以下功能：

```
...
using System.Web.SessionState;
using System.Reflection;

protected void ReGenerateSessionId()
    {
        SessionIDManager manager = new SessionIDManager();
        string oldId = manager.GetSessionID(Context);
        string newId = manager.CreateSessionID(Context);
        bool isAdd = false, isRedir = false;
        manager.RemoveSessionID(Context);
        manager.SaveSessionID(Context, newId, out isRedir, out isAdd);

        HttpApplication ctx = (HttpApplication)HttpContext.Current.ApplicationInstance;
        HttpModuleCollection mods = ctx.Modules;
        System.Web.SessionState.SessionStateModule ssm = (SessionStateModule)mods.Get("Session");
        System.Reflection.FieldInfo[] fields = ssm.GetType().GetFields(BindingFlags.NonPublic | BindingFlags.Instance);
        SessionStateStoreProviderBase store = null;
        System.Reflection.FieldInfo rqIdField = null, rqLockIdField = null, rqStateNotFoundField = null;

        SessionStateStoreData rqItem = null;
        foreach (System.Reflection.FieldInfo field in fields)
        {
            if (field.Name.Equals("_store")) store = (SessionStateStoreProviderBase)field.GetValue(ssm);
            if (field.Name.Equals("_rqId")) rqIdField = field;
            if (field.Name.Equals("_rqLockId")) rqLockIdField = field;
            if (field.Name.Equals("_rqSessionStateNotFound")) rqStateNotFoundField = field;

            if ((field.Name.Equals("_rqItem")))
            {
                rqItem = (SessionStateStoreData)field.GetValue(ssm);
            }
        }
        object lockId = rqLockIdField.GetValue(ssm);

        if ((lockId != null) && (oldId != null))
        {
            store.RemoveItem(Context, oldId, lockId, rqItem);
        }

        rqStateNotFoundField.SetValue(ssm, true);
        rqIdField.SetValue(ssm, newId);
    }

protected void Login_Click(object sender, EventArgs e)
{
    if (/*Login success*/)
    {
        ReGenerateSessionId(); // Change SessionID
        Session["User"] = user;
        Response.Redirect("Login_Success.aspx", true);
    }
} 
```

# php - 使用 Symfony2 资产管理除图像、js 和 css 以外的资产

> ID：15241467
> 
> 赞同：2
> 
> 时间：2013-03-06T07:32:04.150
> 
> 标签：php, symfony, assetic

使用 Symfony2 资产管理除图像、js 和 css 之外的资产。其他资产，如 swf、字体等或通用的，是否有任何通用选项可以与资产一起使用，以使用几乎任何类型的文件...file.xxx

对于图像，它是：

```
{% image '@mybundlename/Resources/public/images/sample.png' %}
<img src="{{ assets_url }}" />
{% endimage %} 
```

对于样式表，它是：

```
{% stylesheets ...... 
```

对于 javascripts 它是：

```
{% javascripts..... } 
```

所以同样明智的是其他类型的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:03:44.840

您可以使用树枝资产功能

```
<img src="{{ asset('images/logo.png') }}" alt="Symfony!" />

<link href="{{ asset('css/blog.css') }}" rel="stylesheet" type="text/css" /> 
```

[http://symfony.com/doc/2.3/book/templating.html#linking-to-assets](http://symfony.com/doc/2.3/book/templating.html#linking-to-assets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:09:25.807

我想，你可以试试

```
{% image '@mybundlename/Resources/some/some.swf' %}
    <object type="application/x-shockwave-flash" data="{{ assets_url }}" /> 
{% endimage %} 
```

但是，如果您的文件位于`Resources/public/*`，即`/ExampleBundle/Resources/public/flash/some.swf`- 使用：

```
<object type="application/x-shockwave-flash" data="{{ asset('bundles/example/flash/some.swf') }}" /> 
```

# c - 结构初始化中的静态存储类错误

> ID：15241469
> 
> 赞同：0
> 
> 时间：2013-03-06T07:32:09.193
> 
> 标签：c, data-structures, struct

只要结构的存储类不是“静态”，'C' 似乎允许在函数内初始化结构的成员，尝试这样做会返回以下编译错误：

> 错误：初始化元素不是常量

代码片段

```
typedef struct data {
    int age;
    char *name;
} data_t;

void foo(data_t student)
{
    //data_t s1 = student; <--- works
    static data_t s1 = student; <--- throws error
    printf("%s: s1.age: %d, s1.name: %s\n",__FUNCTION__,s1.age, s1.name);
} 
```

欣赏，如果你提出一些见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:39:54.477

必须使用常量表达式或包含 C 中常量表达式的聚合初始化程序来初始化具有静态存储的对象。您正试图`s1`通过非静态对象初始化静态声明的对象`student`。这就是编译器抛出错误的原因`initializer element is not constant`。

# bash - 如何在linux中禁用核心转储

> ID：15241470
> 
> 赞同：2
> 
> 时间：2013-03-06T07:32:21.537
> 
> 标签：bash, core, coredump

我正在尝试为我的应用程序禁用核心转储，我改变了`ulimit -c 0`

但是，每当我尝试使用 gdb 附加到该进程时，`gdb --pid=<pid>`然后 gcore 我仍然会获得该应用程序的核心转储。我正在使用 bash：

```
-bash-3.2$ ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 65600
max locked memory       (kbytes, -l) 50000000
max memory size         (kbytes, -m) unlimited
open files                      (-n) 131072
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 10240
cpu time               (seconds, -t) unlimited
max user processes              (-u) 131072
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited
-bash-3.2$ ps -ef | grep top
oracle    8951  8879  0 Mar05 ?        00:01:44 /u01/R122_EBS/fs1/FMW_Home/jrockit32 jre/bin/java -classpath /u01/R122_EBS/fs1/FMW_Home/webtier/opmn/lib/wlfullclient.jar:/u01/R122_EBS/fs1/FMW_Home/Oracle_EBS-app1/shared-libs/ebs-appsborg/WEB-INF/lib/ebsAppsborgManifest.jar:/u01/R122_EBS/fs1/EBSapps/comn/java/classes -mx256m oracle.apps.ad.tools.configuration.RegisterWLSListeners -appsuser APPS -appshost rws3510293 -appsjdbcconnectdesc jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS_LIST=(LOAD_BALANCE=YES)(FAILOVER=YES)(ADDRESS=(PROTOCOL=tcp)(HOST=rws3510293.us.oracle.com)(PORT=1521)))(CONNECT_DATA=(SERVICE_NAME=rahulshr))) -adtop /u01/R122_EBS/fs1/EBSapps/appl/ad/12.0.0 -wlshost rws3510293 -wlsuser weblogic -wlsport 7001 -dbsid rahulshr -dbhost rws3510293 -dbdomain us.oracle.com -dbport 1521 -outdir /u01/R122_EBS/fs1/inst/apps/rahulshr_rws3510293/appltmp/Tue_Mar_5_00_42_52_2013 -log /u01/R122_EBS/fs1/inst/apps/rahulshr_rws3510293/logs/appl/rgf/Tue_Mar_5_00_42_52_2013/adRegisterWLSListeners.log -promptmsg hide -contextfile /u01/R122_EBS/fs1/inst/apps/rahulshr_rws3510293/appl/admin/rahulshr_rws3510293.xml
oracle   23694 22895  0 Mar05 pts/0    00:00:00 top
oracle   26235 22895  0 01:51 pts/0    00:00:00 grep top
-bash-3.2$ gcore
usage:  gcore [-o filename] pid
-bash-3.2$ gcore 23694
0x000000355cacbfe8 in tcsetattr () from /lib64/libc.so.6
Saved corefile core.23694

[2]+  Stopped                 top
-bash-3.2$ ls -l
total 2384
-rw-r--r-- 1 oracle dba 2425288 Mar  6 01:52 core.23694
drwxr----- 3 oracle dba    4096 Mar  5 03:32 oradiag_oracle
-rwxr-xr-x 1 oracle dba      20 Mar  5 04:06 test.sh
-bash-3.2$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:59:05.430

中的`gcore`命令`gdb`没有使用内核中的 Linux 核心文件转储代码。它正在遍历内存本身，并以与进程核心文件相同的格式写出二进制文件。这很明显，因为在发出 之后该进程仍然处于活动状态`gcore`，而如果 Linux 正在转储核心文件，则该进程将被终止。

# php - 全日历事件不起作用

> ID：15241473
> 
> 赞同：0
> 
> 时间：2013-03-06T07:32:26.557
> 
> 标签：php, javascript, json, fullcalendar

我正在使用 fullcalendar 来显示事件，我使用 JSON 作为事件并从另一个页面获取 json 对象，但是当我遇到这个问题时`500 Internal Server Error`，我在 stackoverflow 中找到了一个问题并使用他们的代码
[FullCalendar 不显示来自 JSON 事件的时间](https://stackoverflow.com/questions/2860532/fullcalendar-not-displaying-time-from-json-events#_=_)
这是我的 Javascript代码：

```
 $(document).ready(function() {

        $('#calendar').fullCalendar({                                 
            editable: false,
           events:'/json.php'
        });
    });

</script> 
```

PHP代码：

```
$sql="
SELECT
    t.trans_id
    , r.res_name
    , l.location_name
    , to_char( t.trans_date, 'mm/dd/yyyy' )
    , s.ts_from
    , s.ts_to
    , t.booked_units
    , t.max_value
    , t.remaining
FROM
    tsm_transaction_tbl t
    , tsm_location_tbl l
    , tsm_resource_tbl r
    , tsm_timeslot_tbl s
WHERE
    t.location_id = l.location_id
    AND t.resource_id = r.res_id
    AND t.ts_id = s.ts_id
";

$parse=oci_parse($conn,$sql);
oci_execute($parse);
$events = array();
while($row=oci_fetch_array($parse))
{
    $start = $row[3];
    $end = $row[3];
    $title = $row[1];
    $eventsArray['id'] =  $row[0];
    $eventsArray['title'] = $title;
    $eventsArray['start'] = $start . " " . $row[4];
    $eventsArray['end'] = $end;
    $eventsArray['allDay'] = false;
    $events[] = $eventsArray;
}
oci_close($conn);
echo json_encode($events); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:42:42.393

问题是`json_encode`我使用`Zend_Json::encode`了生成 JSON 对象的 Zend 类

```
<?php
require_once('Json.php');

$sql="select t.trans_id,r.res_name,l.location_name,to_char(t.trans_date,'mm/dd/yyyy'),s.ts_from,s.ts_to,t.booked_units,t.max_value,t.remaining
from tsm_transaction_tbl t,tsm_location_tbl l,tsm_resource_tbl r,tsm_timeslot_tbl s
where t.location_id=l.location_id and t.resource_id=r.res_id and t.ts_id=s.ts_id";
$parse=oci_parse($conn,$sql);
oci_execute($parse);
$events = array();
while($row=oci_fetch_array($parse))
{
    $start = $row[3];
    $end = $row[3];
    $title = $row[1];

    $eventsArray['id'] =  $row[0];
    $eventsArray['title'] = $title;
    $eventsArray['start'] = $start." ".$row[4].":00:00";
    $eventsArray['end'] = $end." ".$row[5].":00:00";
    $eventsArray['allDay'] = false;
    $eventsArray['description']="Timeslot: ".$row[4]."-".$row[5]."<br> Location: ".$row[2]."<br> Max value: ".$row[7]."<br>Booked units: ".$row[6]."<br> Remaining: ".$row[8];
    $events[] = $eventsArray;
}
oci_close($conn);

echo Zend_Json::encode($events);

?> 
```

# shell - 当不同文件的列数不同时，如何使用 unix 命令附加 CSV 文件

> ID：15241475
> 
> 赞同：0
> 
> 时间：2013-03-06T07:32:31.987
> 
> 标签：shell, unix, csv, append

我有几千个 csv 文件，每个文件都有不同的列标题集。我正在使用 python pandas 附加它们。我想知道是否有一种有效的方法可以在 UNIX 中附加这些文件。

例如。

```
CSV1:

Column1,Column2, Column3, Column4, Column5
1,aaa,bbb,0,NULL
2,aa1,bb1,,NULL

CSV2:

Column1,Column2, Column6, Column7, Column8
1,aaa,xyz,0,NULL
2,aa1,zy1,test-2,NULL

Required Output

Column1,Column2, Column3, Column4, Column5,Column6, Column7, Column8
1,aaa,bbb,0,NULL,,,
2,aa1,bb1,,NULL,,,,
1,aaa,,,,xyz,0,NULL
2,aa1,,,,zy1,test-2,NULL 
```

完成附加两个文件时，值应与适当的列名对齐，并且第二个文件的标题应适当地附加到最终输出标题中，不得重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:46:28.757

```
awk -F, -v OFS="," 'FNR==NR{a[$1$2]=$0;next}($1$2 in a){x=$1$2;$1=$2="";gsub(/^,*/,"");print a[x]","$0}' file1 file2 
```

测试如下：

```
> cat temp2
Column1,Column2, Column3, Column4, Column5
1,aaa,bbb,0,NULL
2,aa1,bb1,,NULL
> 
> 
> cat temp
Column1,Column2, Column6, Column7, Column8
1,aaa,xyz,0,NULL
2,aa1,zy1,test-2,NULL
> 
> 
> awk -F, -v OFS="," 'FNR==NR{a[$1$2]=$0;next}($1$2 in a){x=$1$2;$1=$2="";gsub(/^,*/,"");print a[x]","$0}' temp2 temp
Column1,Column2, Column3, Column4, Column5, Column6, Column7, Column8
1,aaa,bbb,0,NULL,xyz,0,NULL
2,aa1,bb1,,NULL,zy1,test-2,NULL
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:12:38.570

`join -t , -1 1 -2 1 -o 1.1 -o 1.2 -o 1.3 -o 1.4 -o 1.5 -o 2.3 -o 2.4 -o 2.5 CSV1 CSV2`

似乎更好的方法

& 你也可以使用`cut`如下

`cat CSV2 | cut -f 1,3,4,5 -d , > tmp1`

`join -t ',' -j 1 CSV1 tmp1`

# ruby-on-rails - 从Ruby中的数组中获取特定类的第一个对象

> ID：15241476
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:32:37.697
> 
> 标签：ruby-on-rails, ruby

所以我有一个活动记录对象数组。

我需要使用类来获取该数组中的第一个现有对象`post`，将其移动到一个全新的数组中，以便它不再存在于最初的数组中。

在 Ruby 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:37:01.937

```
new_array = [old_array.delete(old_array.detect { |object| object.is_a? Post })] 
```

# algorithm - 使用贪心算法访问 DAG 中的所有节点

> ID：15241488
> 
> 赞同：0
> 
> 时间：2013-03-06T07:33:18.273
> 
> 标签：algorithm, graph

我正在尝试使用贪心算法访问有向无环图中的所有节点。我在想像深度优先搜索这样的东西会起作用，但我不确定这将如何与 DAG 一起使用，因为我无法通过图表追溯自己。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:39:38.580

是的，您可以使用深度优先搜索 (DFS) 或广度优先搜索 (BFS)，查看任何好的教科书，例如 Thomas H. Cormen 的“算法简介”。

您不需要使用边来“追溯自己”，使用堆栈（或递归）或队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T09:53:02.500

```
void dfs(node V) {
    mark V as visited;
    for each edge E, so that E.source = V, do {
        if(E.destination is not marked as visited) {
            dfs(E.destination);
        }
    }
} 
```

而已。DFS(recursion) 的作用是在当前实例完成时返回其调用者实例。由于它使用堆栈来保存所有活动实例，因此您不必自己返回，当函数在当前节点上完成执行时，它会自动回滚到前一个节点。

# java - 用于验证软件架构的 eclipse 插件

> ID：15241489
> 
> 赞同：5
> 
> 时间：2013-03-06T07:33:19.330
> 
> 标签：java, plugins, architecture

请问有没有可以验证软件架构的插件？例如，代码是否符合分层架构。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T07:35:06.550

Structure101 插件可以与独立程序结合使用。 [http://structure101.com/products/structure101/plugins/](http://structure101.com/products/structure101/plugins/)

Structure101 是一个商业产品 ( [http://structure101.com/products/purchase.php](http://structure101.com/products/purchase.php) )，但它非常好，您可以定义开发人员应该遵循的自己的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:46:49.927

插件架构因其可扩展性和灵活性而变得非常流行。Eclipse 绝对是基于插件的

您可以在 eclipse Marketplace 中找到许多选项。

[http://marketplace.eclipse.org/search/site/software%2520architecture](http://marketplace.eclipse.org/search/site/software%2520architecture)

我在那里看到了一些不错的软件架构插件，例如：

[http://marketplace.eclipse.org/content/rational-software-architect#.UTbyCKvFWwk](http://marketplace.eclipse.org/content/rational-software-architect#.UTbyCKvFWwk)

[http://marketplace.eclipse.org/node/523210#.UTbyR6vFWwk](http://marketplace.eclipse.org/node/523210#.UTbyR6vFWwk)

[http://marketplace.eclipse.org/content/metamodelagent-ibm-rational-software-architect#.UTb0yavFWwk](http://marketplace.eclipse.org/content/metamodelagent-ibm-rational-software-architect#.UTb0yavFWwk)

# xforms - 我想通过 zimlet 向 zimbra 中的现有 XFromView 添加表单。我想知道如何在这种方法中调用相关的 XFormObject

> ID：15241497
> 
> 赞同：0
> 
> 时间：2013-03-06T07:33:46.050
> 
> 标签：xforms, zimbra

根据我迄今为止的研究，大多数方法都是通过 zimlets，其中创建新选项卡并在 XformView 中制作自己的表单的方法。但我想知道是否可以使用 zimlet 访问现有表单并修改它们（在我的情况下添加一个新表单）。如果有办法，我怎样才能访问我想要的 XFormObject？

要更详细地指定代码，我想添加此复选框：

```
setupGroup.items.push({ref:ZaAccount.A_zimbraIsAdminAccount, type:_CHECKBOX_,
        msgName:ZaMsg.NAD_IsSystemAdminAccount,label:ZaMsg.NAD_IsSystemAdminAccount,
        bmolsnr:true, trueValue:"TRUE", falseValue:"FALSE"
}); 
```

到 Zimbra/js/ZimbraAdmin/View/ZaAccountXFormView 目录。到帐户设置组那里！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:39:18.243

答案是肯定的！在尝试开发自己的 zimlet 一段时间后，我意识到可以（甚至很容易）通过 zimlet 访问 Zimbra 管理员控制台中的所有表单！XFormObject 已经定义，因为 zimlet 是在相关模块加载后加载的（特别是在开发模式下）。我们只需要在我们的 zimlet 中考虑两件事： 1-在 Zimlet 定义文件（xml 文件）中，扩展名必须为真：

```
<zimlet name="com_zimbra_myzimlet" version="1.0" description="myform" extension="true"> 
```

2-我们应该引入我们的 Modifier 函数，最后将其推送到相关的 ZaTabView.XFormModifiers 数组。在我的例子中，ZaTabView.XFormModifiers["ZaAccountXFormView"]。

```
ZaTabView.XFormModifiers["ZaAccountXFormView"].push(myfunction.AccountXFormModifier); 
```

我希望您喜欢在表单扩展上编写您的 zimlet！

# javascript - 如何使用服务帐户而不是 google drive api 的 web 应用程序

> ID：15241501
> 
> 赞同：1
> 
> 时间：2013-03-06T07:33:56.170
> 
> 标签：javascript, google-drive-api

以下 javascript 代码使用 web 应用程序帐户访问驱动器 api。我需要一些帮助来修改代码，以便它可以使用整个应用程序的服务帐户而不是 Web 应用程序帐户，这样就不需要登录特定的 gmail 帐户来从谷歌驱动器中检索文件。

如果有人能指出代码的哪一部分应该更改为使用服务帐户并仍然保留从谷歌驱动器检索文件的功能，那将非常有帮助。

```
 <?php
$con = mysql_connect("localhost","root","root");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("cerebra", $con);
$sql="select name from details order by download desc limit 20";
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
$query=mysql_query($sql,$con);
$names=array();
$index=0;
while($row=mysql_fetch_array($query)){
    $names[$index]=$row[0];
    $index++;
}
foreach($names as $a)
echo $a;
?>

<html>
  <head>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
var CLIENT_ID = '106997880011-je955vl71s3hbj7vh03oh1df1h5l9u9q.apps.googleusercontent.com';
var API_KEY = 'AIzaSyDYksh35q9jS1_YumnjWYR-717AoCKSXhM';
var SCOPES = 'https://www.googleapis.com/auth/drive';

    function handleClientLoad() {
        gapi.client.setApiKey(API_KEY);
        window.setTimeout(checkAuth,1);
    }

    function checkAuth() {
        var options = {
            client_id: CLIENT_ID,
            scope: SCOPES,
            immediate: true
        };
        gapi.auth.authorize(options, handleAuthResult);
    }

    function handleAuthResult(authResult) {
       <!-- var authorizeButton = document.getElementById('authorize-button');

        if (authResult && !authResult.error) {
            <!--authorizeButton.style.visibility = 'hidden';
            makeApiCall();
        } else {
         <!--   authorizeButton.style.visibility = '';
           handleAuthClick;
        }
    }

    function handleAuthClick(event) {
        var options = {
            client_id: CLIENT_ID,
            scope: SCOPES,
            immediate: false
        };
        gapi.auth.authorize(options, handleAuthResult);
        return false;
    }

    function makeApiCall() {  
        gapi.client.load('drive', 'v2', makeRequest);   
    }

    function makeRequest() {
        var request = gapi.client.drive.files.list();
        request.execute(function(resp) {          
            for (i=0; i<resp.items.length; i++) {
                var titulo = resp.items[i].title;
                var fechaUpd = resp.items[i].modifiedDate;
                var userUpd = resp.items[i].lastModifyingUserName;
                var userEmbed = resp.items[i].embedLink;
                var userAltLink = resp.items[i].alternateLink;
                var download = resp.items[i].webContentLink;
                var hold="Download";

               <!-- var fileInfo = document.createElement('li');
              <!--  fileInfo.appendChild(document.createTextNode('TITLE: ' + titulo + ' - LAST MODIF: ' + fechaUpd + ' - BY: ' + userUpd +'  url:  ' + hold.link(download)));                
               <!-- document.getElementById('content').appendChild(fileInfo);

                document.write(titulo + "&nbsp;");
                document.write(hold.link(download) + "<br>");

            }
        });    
    }

    $(document).ready(function() {
     <!-- $('#authorize-button').on('click', 
      handleAuthClick;
      $.getScript('//apis.google.com/js/api.js', function() {
        gapi.load('auth:client', handleClientLoad);
      });
    });
        </script>
        </head>
        <body>
        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:11:21.833

看看我的博客——我刚刚完成了一篇关于类似用例的文章——示例适用于 Java 服务器端逻辑，但对所有服务器端语言通用的特定步骤有详细的一般说明：

[http://devmint.blogspot.cz/2013/03/access-application-google-drive-account.html](http://devmint.blogspot.cz/2013/03/access-application-google-drive-account.html)

# reporting-services - 我应该更改时间维度的属性还是创建新维度？

> ID：15241503
> 
> 赞同：0
> 
> 时间：2013-03-06T07:34:09.177
> 
> 标签：reporting-services, ssas, hierarchy, dimensions

我有一个立方体，我想从中提取数据。该多维数据集包含一个具有层次结构（年-季度-月-日）的日期维度，但月份仅表示为整数。我想将这些“更改”为真正的月份名称。我可以在现有多维数据集中执行此操作，还是必须创建新的新时间维度？

编辑：所以我用简单的“创建新维度”向导创建了一个新的时间维度，但是语言是英语，我怎样才能用最简单的方式改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:47:20.680

您可以将其添加到现有多维数据集。在您的数据源视图中，必须将包含标签的字段添加到充当时间维度源的表或命名查询中。不过，您必须调查您的源数据是如何提供的。最简单的方法是在现有结构之上创建一个视图。

获得可用标签后，修改时间维度的月份属性并将标签设置为 NameColumn。

# c++ - 如何将我们自己的过滤器与英特尔过滤器连接起来

> ID：15241507
> 
> 赞同：2
> 
> 时间：2013-03-06T07:34:26.630
> 
> 标签：c++, directshow, h.264

我是新来的导演。我做了一个过滤器，它将缓冲区作为数据并输出 h264 数据（不符合尚未测试）但是当我在图形编辑中将它与英特尔 h264 解码器连接时，它会连接。我面临的问题是如何连接我自己用 intel h264 解码器创建的过滤器？请指导。我已经使用链接 [http://www.codeproject.com/Articles/158053/DirectShow-Filters-Development-Part-2-Live-Source](http://www.codeproject.com/Articles/158053/DirectShow-Filters-Development-Part-2-Live-Source)创建了过滤器， 欢迎使用一些伪代码或示例。

# neo4j - 如何使用密码查询在一周的数据中查找前 5 个关系及其时间戳值

> ID：15241510
> 
> 赞同：0
> 
> 时间：2013-03-06T07:34:33.557
> 
> 标签：neo4j

在我的 GraphDatabase 中，我有以下数据。

1）发送者作为节点 2）接收者作为节点 3）关键字作为发送者和接收者之间的关系 4）时间戳作为关系属性。

我需要使用密码查询在一周内提取前 5 个关键字、它们的计数和相应的时间戳值。（只是我想为过去 7 天的前 5 个关键字维护一个时间线（（时间戳格式为 :Tue Mar 05 12:40:36 ））

有人可以帮我解决这个问题。

提前致谢

古斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:45:01.010

```
start n=node(*)
match n-[r:]-m
where has(r.timestamp) and r.timestamp>({now-(60*60*24*7)}) //60 second, 60 minutes, 24 hours, 7 days = 7 days timestamp period;
with r, count(*) as cnt
return type(r), cnt order by cnt desc limit 5 
```

将时间格式保持为 tstorms 建议的长时间戳

# php - 空文本框然后重定向

> ID：15241513
> 
> 赞同：0
> 
> 时间：2013-03-06T07:34:40.393
> 
> 标签：php

所以我在 index.php 中有一个表单方法 post，它会将数据从文本框发送到另一个页面，即 print.php。

现在我想做的是，如果 index.php 中的文本框为空，它不会重定向到 print.php，或者如果它重定向到 print.php，它将被重定向回 index.php。
index.php 格式

```
<form action="print.php" method="post" target="_blank">
<input type="text" name="faidf" id="faidf" size="25" value="" maxlength="25"/></td>
<input type ="submit" value="Print"> 
```

打印.php

```
<?php
$faidf = $_POST['faidf'];
if(isset($_POST['faidf'])) {
    echo "<td><font size=2>FAID:$faidf</td><td></font></td>";
}
else {
    echo "FAID is missing";
    }
    ?> 
```

而不是 FAID 丢失，我可以将它重定向回家吗，因为我还有大约 10 个 php，其中它需要 $faidf 的变量，所以如果文本框是空白的，整个 printd.php 完全没用。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:41:09.110

您可以通过两种方式做到这一点：

# 方式一：

在提交表单时使用 JQuery/JavaScript 进行表单验证过程。只有在文本框中找到数据的情况下才会重定向。

# 方式二：

检查提供的帖子数据的长度，如果长度小于1，则将其返回上一页。

我会建议您使用 JavaScript/JQuery，因为它可以在所有跨浏览器上运行，并且易于实施和更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:43:48.207

首先将 onchange 函数添加到您的文本框

```
<input type="text" onchange="myFunction(this)" name="faidf" id="faidf" size="25" value="" maxlength="25"/> 
```

并为按钮添加一个 ID

```
<input type ="submit" value="Print" id="btn" /> 
```

并在您的页面中添加脚本标签：

```
function myFunction(e)
{
  var x=document.getElementById("btn");
  if (e.value == ''){
      x.setAttribute('disabled','disabled');
  }else{
     x.removeAttribute('disabled');
  }
} 
```

而不是你在 print.php 的回声添加位置标题

```
header("Location: index.php"); 
```

# python - 将字符串与 if 语句连接，例如：if 5 "> 4"：

> ID：15241518
> 
> 赞同：2
> 
> 时间：2013-03-06T07:35:26.037
> 
> 标签：python, python-3.x

我想知道是否可以这样做？

```
s = "> 4"
if 5 s:
    print("Yes it is.") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:36:52.387

你想要`eval`。

```
s = "> 4"
if eval("5"+s):
    print("Yes it is.") 
```

[这](http://docs.python.org/2/library/functions.html#eval)是关于`eval`.

请注意，如果您不知道输入字符串中的确切内容，`eval`则非常不安全。谨慎使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T07:38:30.387

这可以很容易地使用[`eval()`](http://docs.python.org/2/library/functions.html#eval). 但是，`eval()`这是[非常危险](https://stackoverflow.com/a/1832957/367273)的，最好避免。

有关其他想法，请参阅[Python 中的安全表达式解析器](https://stackoverflow.com/questions/3582403/safe-expression-parser-in-python)

我认为最好的方法取决于`s`来自哪里：

1）如果是用户输入，你当然不想使用`eval()`. 表达式解析器可能是要走的路。

2）如果`s`以编程方式设置，则最好将其转换为函数：

```
pred = lambda x:x > 4
if pred(5):
    print("Yes it is.") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T07:46:30.853

假设您真正想要做的是存储比较“> 4”并在某处使用它，我建议如下：

```
import operator

class Comparison(object):
    def __init__(self, operator, value):
        self.operator = operator
        self.value = value

    def apply(self, value):
        return self.operator(value, self.value)

s = Comparison(operator.gt, 4)

if s.apply(5):
    print("Yes it is.") 
```

# open-source - 谁能给我一个示例，说明如何许可使用其他软件组件的软件？

> ID：15241520
> 
> 赞同：0
> 
> 时间：2013-03-06T07:35:37.567
> 
> 标签：open-source, licensing

我写了一个软件，它使用了一些来自其他软件的代码，稍作修改。我对那些版权条款和许可条款感到困惑。我应该把那些版权或许可声明放在哪里？

这是详细信息，有三个项目，分别称为 A、B 和 C。A 使用 LGPL 许可证。B 不使用许可证，但将一些版权声明放在一个名为 LICENSE 的文件中。C 既不使用许可也不使用版权声明。它只写一行指示作者。

我从这些项目中获取了一些代码并对其进行了修改（实际上我只获取了一些功能）。所以我该怎么做？

我已经检查了其他问题。他们说将一个名为 LICENSE 的文件放入根目录就足够了。但是我应该如何处理该文件？

有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:01:26.347

该**`LICENSE`**文件将包含有关您的代码使用哪种许可证的信息。

正如 Jeff Atwood 解释的那样，该许可证不应违反 A、B 或 C 许可证中的任何条款（您应该远离它，因为它没有许可证）：

> 因为我没有明确指出许可证，所以我声明了隐含的版权，而没有解释其他人如何使用我的代码。由于该代码未经许可，理论上我可以随时主张版权并要求人们停止使用我的代码。有经验的开发人员不会接触未经许可的代码，因为他们没有使用它的合法权利。
> 
> 没有许可证，代码默认受版权保护。人们可以阅读代码，但他们没有使用它的合法权利。要使用代码，您必须直接联系作者并征得许可。

来源： http: [//www.codinghorror.com/blog/2007/04/pick-a-license-any-license.html](http://www.codinghorror.com/blog/2007/04/pick-a-license-any-license.html)

* * *

至于提及您从中获取代码的项目（A/B/C），仅当 A/B/C 的许可证要求您这样做时才有必要。

示例`LICENSE`文件模板：

> **project_name**按**作者**
> 
> 该文件是**project_name**的一部分。**project_name**是自由软件：您可以根据自由软件基金会发布的 GNU 通用公共许可证（许可证的第 3 版或（由您选择）任何更高版本）的条款重新分发和/或修改它。
> 
> **分发project_name**是希望它有用，但没有任何保证；甚至没有对适销性或特定用途适用性的默示保证。有关详细信息，请参阅 GNU 通用公共许可证。
> 
> 您应该已经收到了一份 GNU 通用公共许可证的副本以及**project_name**。如果没有，请参阅[http://www.gnu.org/licenses/](http://www.gnu.org/licenses/)。

# jquery - jquery hasClass 不断链

> ID：15241521
> 
> 赞同：3
> 
> 时间：2013-03-06T07:35:37.767
> 
> 标签：jquery

我正在尝试添加一个 jquery 选择器，它发现：所有`data-toggle=collapse`这些都没有一类`no-hide`

我尝试不选择任何东西。

```
$('[data-toggle=collapse]:has(.no-hide)').click(function(){ 
```

错误：$(...).hasClass(...).click 不是函数

```
$('[data-toggle=collapse]').hasClass("no-hide").click(function(){ 
```

仅在有 1 个类名时才有效。

```
$('[data-toggle=collapse][class=no-hide]').click(function(){ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T07:36:21.450

您可以使用`not`方法：

```
$('[data-toggle=collapse]').not(".no-hide").click(function(){ 
```

**更新**：如果要选择具有`no-hide`类的元素，可以使用`filter`方法：

```
$('[data-toggle=collapse]').filter(".no-hide").click(function(){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T07:37:07.470

尝试[`not`](http://api.jquery.com/not/)

```
$('[data-toggle=collapse]').not(".no-hide").click(function(){ 
   //your stuff
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T07:38:20.297

你可以用`~`in 选择器来做。即使有不止一个类，它也会起作用。

```
$('[data-toggle=collapse][class~=no-hide]').click(function() {}); 
```

# bash - bash是没有功能

> ID：15241527
> 
> 赞同：3
> 
> 时间：2013-03-06T07:36:04.603
> 
> 标签：bash, function, prompt

我的脚本中有很多是/否的答案。如何创建一个函数来最小化我的脚本大小？

我有以下内容：

```
function ask {
    read -n 1 -r
    if [[ $REPLY =~ ^[Yy]$ ]]
    then
            return 1;
    else
            exit
            echo "Abort.."
    fi
}

ask "Continue? [y/N] " 
```

它工作正常。但问题“继续？[y/N] 没有显示。我怎样才能“转移”这个文本到我的功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T07:39:32.413

您可以使用 $1 变量：

```
function ask {
    echo $1        # add this line
    read -n 1 -r
    if [[ $REPLY =~ ^[Yy]$ ]]
    then
            return 1;
    else
            exit
            echo "Abort.."
    fi
} 
```

**编辑：**正如@cdarke 所指出的，由于读取中的“-p”开关，可以避免“回声”调用：

```
# echo $1
# read -n 1 -r
read -n 1 -r -p "$1" 
```

# java - 如何从哈希映射访问对象类型的元素

> ID：15241528
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:36:07.820
> 
> 标签：java, oop

我是Java新手，我有一个哈希图

`Map<Integer, x> dataset = new HashMap<Integer, x>();`

X 有

```
 public int id; 
 public Integer getID(){
        return id;
    } 
```

及其构造函数。

我将值插入 X 和 HashMap。但是我该怎么做

访问 X 的元素？ `myMap.myX.getID()`? 这是我尝试过的，但失败了。

遍历列表的最佳方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:38:39.677

[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html) iterface 公开了一个`get`检索元素的方法：

```
X mapObject = dataset.get(someInteger); 
```

或更具体的例子：

```
dataset.put(5, new X());
X mapObject = dataset.get(5); 
```

并进行迭代，您可以执行以下操作：

```
for (X mapObject:dataset.values()) 
```

迭代值或

```
for (Integer mapKey:dataet.keySet()) 
```

遍历键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:38:42.323

您必须使用 Map 的`get()`方法来访问对象。

`dataset.get(key).getID()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:41:23.367

您需要`Object`从`map`基于 a中获取您的`key`，然后尝试访问其元素。

```
for(Integer key : dataset.keySet()){
    X object = dataset.get(key);
    // Access its elements like "object.getID()";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T07:42:26.750

```
Map<Integer, X> map = new HashMap<Integer,X>();
Iterator<Integer> iterator = map.keySet().iterator();

while ( iterator.hasNext() ) {
    Integer key = iterator.next();
    X x = map.get(key);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T09:27:24.723

在这里你得到所有的ID......

```
for(Integer key : dataset.keySet()){
    X object = dataset.get(key);
    int objectId = object.getId();
} 
```

# javascript - 单页应用的设计模式

> ID：15241531
> 
> 赞同：0
> 
> 时间：2013-03-06T07:36:14.407
> 
> 标签：javascript, jquery, json, model-view-controller, design-patterns

我有一个主观的问题，主要从 UI 角度寻找答案。

假设我需要创建 2 个页面

> 1.  登录页面
> 2.  主页

在登录页面上，我会显示用户名/密码，在成功的身份验证后，我会显示主页。现在要注意了，它应该是单个页面（例如单个 html 文件）所以在成功验证后，将显示主页（但将显示相同的 html 或地址栏 URL 将保持不变）

我怎样才能实现相同的？

同样使用面向对象的 JavaScript 并假设 JSON 数据，我应该创建多少个 JavaScript 类以及它们将包含什么？

同样作为同一问题的扩展，假设我允许用户也使用他们的 Facebook/Twitter/Gmail 帐户登录，我必须对上面创建的 JavaScript 类（或对象）进行哪些更改？

因此，如果有人使用 FB 登录，而不是显示我的登录屏幕，用户将直接看到我的主页。请记住，我需要一个 html 文件（用于登录/主页）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:49:47.370

如果您正在寻找轻量级的东西，您可以使用此处描述的模块导出模式：http: [//www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)。发出 ajax 调用并使用 js 模板应用/删除 html 模板。JavaScript 应用程序的最佳实践总是需要删除全局范围。模块导出模式也不例外。对于所有大牌框架（ember 和骨干）也是如此。如果您需要更强大的东西，请使用 ember 或骨干。如果你真的想变得很酷，请使用卓别林。[http://chaplinjs.org](http://chaplinjs.org)。我之所以这么说，是因为它具有严格的内存管理，这在单页应用程序中是绝对需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:45:09.513

你在这里有几个问题。例如， *我应该创建多少个 JavaScript 类以及它们将包含什么？*- 这完全由你决定。这取决于您页面的复杂性。

我认为您需要先阅读一些教程。 [http://www.asp.net/single-page-application](http://www.asp.net/single-page-application) [http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159)

# java - 防止 JSP 缓存

> ID：15241551
> 
> 赞同：1
> 
> 时间：2013-03-06T07:37:26.943
> 
> 标签：java, jsp, caching, browser-cache, http-caching

```
<%
    response.setHeader("Cache-Control","no-cache"); 
    response.setHeader("Pragma","no-cache"); 
    response.setDateHeader ("Expires", -1); 
%>

<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@page import="com.services.*" import="java.util.*"
    import="java.text.*"%>
<jsp:include page="top.jsp"></jsp:include>

<html>
    <head>
        <link href="login-box.css" rel="stylesheet" type="text/css" />
    </head>
    <body onload="getcontacts();deleteContact();">    
</html> 
```

我试图阻止我的 Web 应用程序缓存，我插入了以下代码：

```
<%
    response.setHeader("Cache-Control","no-cache"); 
    response.setHeader("Pragma","no-cache"); 
    response.setDateHeader("Expires", -1); 
%> 
```

但它仍然在缓存，当我注销并按下它时，它仍然会回到上一个会话。任何 hlep plz。我应该插入其他东西吗？

# ios - iOS 开发者构建与分发构建

> ID：15241552
> 
> 赞同：9
> 
> 时间：2013-03-06T07:37:32.560
> 
> 标签：ios, ad-hoc-distribution

一段时间以来，我一直认为对于 iOS，使用开发人员配置文件签署构建允许应用程序通过 XCode 构建在授权设备（在开发配置文件中列出）上运行（并调试），而使用分发配置文件签名允许应用程序在其他 iOS 设备上运行（但不调试），这些设备已专门添加到分发配置文件中，用于 QA/beta 测试/等（并通过 iTunes 同步或 OTA 分发安装） ，甚至不需要那些 QA/beta 测试人员知道 XCode 是什么。

似乎与苹果自己的几个文档相匹配：

> “当您准备好共享您的应用程序以供用户测试 [...] 时，您需要使用分发配置文件创建应用程序存档并将其发送给应用程序测试人员”（[来源](https://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/35-Distributing_Applications/distributing_applications.html#//apple_ref/doc/uid/TP40007959-CH10-SW2)）

和

> 使用开发配置文件进行代码签名允许您的应用程序通过 Xcode 在设备上运行，使用分发配置文件签名允许您创建分发版本。
> 
> 名为“iPhone Developer”的证书允许您通过 Xcode 在 iOS 设备上运行/调试您的应用程序，名为“iPhone Distribution”的证书允许使用 Ad Hoc 分发测试您的提交构建（[来源](http://developer.apple.com/library/ios/#technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TROUBLESHOOTING_GUIDE-CODE_SIGNING_ENTITLEMENTS)）

这似乎意味着使用分发配置文件是在 App Store 之外进行应用共享所必需的，多年来我一直认为这是正确的。然而，最近，我从另一位同事那里看到了一个用例，他们能够仅使用开发配置文件与许多其他人共享构建。另一位用户在这里描述了一个类似的发现：[Why not use development provisioning instead of ad hoc?](https://stackoverflow.com/questions/2625773/why-not-use-development-provisioning-instead-of-ad-hoc)

我担心我可能会在这里遗漏一些东西，我现在怀疑在某些情况下，只要另一个用户可以访问包含其设备 UUID 的相关开发人员配置文件，并将其安装在他们的设备上（拖入 iTunes ，配置实用程序等），他们将能够通过 iTunes 同步开发人员构建，而无需进行单独的分发构建。

这让我质疑我对开发人员和发行版本之间差异的本质所做的一些假设。我开始认为它更多的是关于调试支持和一般的安装简易性，而不是它的安装方式（XCode 与 iTunes/OTA 明确）。

简而言之，如果设备的 UUID 包含在开发人员配置文件中，我真的*需要*进行单独的分发构建，还是我可以简单地共享发布开发构建并假设它也可以与 iTunes 同步一起使用？组织者中的“用于开发”按钮是否与此有任何实际相关性？

更广泛地说：Developer 和 AdHoc 构建在提交到 App Store 之前如何在开发/测试阶段在组织内的其他人之间共享方面的根本区别是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:16:14.763

检查此 SO [Post](https://stackoverflow.com/questions/9529007/difference-ad-hoc-distrubution-and-developmental-distribution?rq=1)以了解开发人员和分发版本之间列出的差异。从开发人员的角度来看，如果您没有测试推送通知，您是否希望通过使用开发人员配置文件或分发配置文件签名来分发您的应用程序并没有太大区别。

# django - Django运行错误的视图方法

> ID：15241555
> 
> 赞同：0
> 
> 时间：2013-03-06T07:37:36.427
> 
> 标签：django, django-views

我必须查看存储在 mysite 文件夹中的文件。一个命名为views.py，另一个命名为request_view.py。在 urls.py 中，我对 views.py 使用了 'answer' 方法，对 request_view.py 使用了 'display_meta' 方法。

（django 版本：1.5 和 python 版本：2.7.3）

这是网址模式：

```
url(r'^twitter/$', answer), url(r'request/$', display_meta) 
```

当我调用 http://127.0.0.1:8000/request/ 时，也会调用第一个视图（即 /twitter/）！

有什么帮助吗？

还有一件事。在我的 view.py 中，我有一些无界代码（即方法或类中都不存在的代码）。这可能是问题的原因吗？

```
l = StdOutListener()
auth = OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)
stream = Stream(auth, l)
keyword = input('enter the keyword you want to search for?')
stream.filter(track = [keyword]) 
```

除了这段代码，每个代码要么在类中，要么在方法中。

我注意到的一件事是首先运行 view.py 的代码，然后运行 ​​display_meta。

提前致谢。

**解决了**

问题出在我使用的导入功能上。由于我的代码在其中一个视图中是无界的，因此无论我选择什么 url，导入函数总是会导入它。

**建议**

始终使用本[示例](https://docs.djangoproject.com/en/1.5/topics/http/urls/#example)中提到的命名法。在许多书中都建议我们应该导入视图，但如果你有像我这样的**无限代码，它可能会导致错误。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:38:15.683

我不确切知道为什么调用 /twitter/ view，但我可以看到有两件事要改变：

1.  您应该使用字符串作为 url() 的第二个参数，如本例 [1] 中所示。您可以使用“myapp.views.my_method”命名法。
2.  您忘记使用 ^ 开始请求 URL，该 ^ 表示 URL 的开始。

关于无界代码，我不知道这是否会导致问题。但我不明白你为什么要无限地放那个代码。我不确定何时执行该代码，我猜你第一次在该文件中调用视图并且 Django 加载该文件（我猜，我不知道确切），但我不认为那会是一个很好的方法来做到这一点。想想你什么时候想执行那个代码，把它放在一个方法中，然后调用它。

[1] [https://docs.djangoproject.com/en/1.5/topics/http/urls/#example](https://docs.djangoproject.com/en/1.5/topics/http/urls/#example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:44:54.753

嗨 hemant 我想知道你为什么写`request_view.py.`

请参阅 django 文档。

你能做的是。

`views.py`以你喜欢的方式创建两个函数

```
def answer(request):

   do some stuffs.

   render_to_response(template.html) 
```

在同一页上写另一个

```
def display_meta(request):

   # do your studd
   render_to_response(some.html) 
```

你不需要创建两个单独的`VIEWS.PY`

我不知道这段代码是做什么的

```
l = StdOutListener()
auth = OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)
stream = Stream(auth, l)
keyword = input('enter the keyword you want to search for?')
stream.filter(track = [keyword]) 
```

但是如果你想`StdOutListener` 在你的函数中使用你可以在你的视图中调用

像

```
def display_meta(request):
   stobject  = StdOutListener()  # use parameters if you have here 
   # do your studd
   render_to_response(some.html) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T15:06:29.197

将视图组织到 python 包中可以解决这个问题。所以如果你有这样的结构......

```
# views.py
def SomeView(request):
    return HttpResponse('SomeView')

# another_view.py
def AnotherView(request):
    return HttpResponse('AnotherView') 
```

您可以将这些单独的视图文件重新组织到一个视图包中。那是...

```
# views
    # __init__.py
    from views import SomeView
    from another_view import AnotherView

    # views.py
    def SomeView(request):
        return HttpResponse('SomeView')

    # another_view.py
    def AnotherView(request):
        return HttpResponse('AnotherView') 
```

现在，一切都可以以 django 标准的方式调用：

```
url(r'^url-to-some-view/$', 'views.SomeView'),
url(r'^url-to-another-view/$', 'views.AnotherView'), 
```

更新：

制作一个'python包'......

1.  创建与文件`views`同级的`view.py`目录 [ `mkdir views`]
2.  在目录中创建一个`__init.py__`文件`views`# 这就是使目录成为“python 包”的原因
3.  进入目录`views.py`。`views`
4.  将您的移动`request_view.py`到`views`目录中。
5.  `__init__.py`使用必要的导入语句编辑文件。在这种情况下：

    ```
    from views import answer
    from request_view import display_meta 
    ```

这样做是用目录替换文件。通过将所有内容导入`__init__.py`文件中，该目录对于您的代码来说就像一个大文件，而不是另一个模块。

# php - PDOException 错误 1064

> ID：15241559
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:37:54.990
> 
> 标签：php, mysql, sql, pdo

我一直在盯着这段代码，我可以弄清楚为什么它不起作用。

```
$dbh = dbCon(); // CONNECT TO DATABASE THROUGH FUNCTION   
$sth = $dbh->prepare("SELECT * FROM ? WHERE ? = ?");    
$sth->execute(array($var1, $var2, $var3));    
$sth->fetch(PDO::FETCH_OBJ); 
```

当我将第二行替换为：

```
$sth = $dbh->prepare("SELECT * FROM clientDetails WHERE clientID = 1"); 
```

一切正常，但是当我为它们设置 var1、2、3 时，它不想工作并引发以下错误：

> 致命错误：未捕获的异常 'PDOException' 带有消息 'SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 /home/cms/functions/functions.php:142 中的 ''clientDetails' WHERE 'clientID' = '1'' at line 1' 附近使用正确的语法：142 堆栈跟踪： 0 /home/cms/functions/functions.php(142): PDOStatement->execute(Array) #1 /home/cms/functions/functions.php(470): returnData() #2 {main} 在 /home 中抛出/cms/functions/functions.php 在第 142 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:39:21.970

```
$sth = $dbh->prepare("SELECT * FROM " + $var1 + " WHERE " + $var2 + " = ?");
$sth->execute(array($var3)); 
```

# java - 如何在while循环中更新jLabel

> ID：15241560
> 
> 赞同：0
> 
> 时间：2013-03-06T07:37:57.297
> 
> 标签：java, apache-poi, jlabel, auto-update

如何在 while 循环中更新 jLabel？我的理解是使用 javax.swing.timer 但是我不太理解它，因为我还需要执行一个操作，现在这是一个 while 循环，每次通过 while 循环时都需要更新一个计数器。

有没有更简单的方法来做到这一点，如果是这样，我应该使用什么来代替 jLabel？

示例代码低于我需要更新的内容。

```
int rowCount = 0;
    while(rowIterator.hasNext())
    {

        jLabel5.setText(""+ rowCount); //<-- i need this to update
        myRow = sheet.getRow(count);
        cellIterator = myRow.cellIterator();
        Cell myCell2 = myRow.getCell(0);
        nextCell= myCell2.getStringCellValue();

        if(nextCell.equals(firstCell))
        {

            while(cellIterator.hasNext()) {

                            Cell cell = cellIterator.next();

                            switch(cell.getCellType()) {
                                case Cell.CELL_TYPE_BOOLEAN:
                                    System.out.print(cell.getBooleanCellValue() + "\t\t");
                                    break;
                                case Cell.CELL_TYPE_NUMERIC:
                                    cell.setCellType(Cell.CELL_TYPE_STRING);

                                     System.out.print(cell.getStringCellValue()+",");

                                    //System.out.print(cell.getStringCellValue() + "\t\t");
                                    writer.write(cell.getStringCellValue()+",");
                                    break;
                                case Cell.CELL_TYPE_STRING:
                                    System.out.print(cell.getStringCellValue()+",");
                                    //System.out.print(cell.getStringCellValue() + "\t\t");
                                    writer.write(cell.getStringCellValue()+",");
                                    break;
                            }
                        }
            System.out.println();
            writer.newLine();
            count++;
            rowCount++;

        }
        else
        {          

            writer.close();
            myRow = sheet.getRow(count);
            myCell2= myRow.getCell(0);
            nextCell=myCell2.getStringCellValue();
            firstCell=nextCell;
            Matter = "Matter Number: "+firstCell;
            num = firstCell;
            System.out.println(Matter);
            fWriter = new FileWriter(new File(directory, num+"_"+curdate+"_"+curtime+".csv"));
            writer = new BufferedWriter(fWriter);
            writer.write(Matter);
            writer.newLine();
            writer.write(header);
            writer.newLine();
        }

    }
}
catch (Exception e)
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T09:06:50.440

您遇到的问题是 Swing 是一个单线程环境。也就是说，有一个线程负责调度所有事件并处理所有重绘请求。

您所做的任何阻止此线程的操作都会阻止它更新 UI（或响应新事件），从而使您的 UI 看起来像是挂起。

您遇到的另一个问题是，对 UI 的所有更新都应该只在该线程的上下文中执行（您不应该尝试从另一个线程更新 UI）。

在您的情况下 a`javx.swing.Timer`不会有帮助，因为计时器会定期“滴答”，您需要一些可以用来回调 EDT 以执行所需更新的东西。

在这种情况下，我建议您使用[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

你可以看看

*   [JTextArea 附加问题](https://stackoverflow.com/questions/11927167/jtextarea-appending-problems/11927201#11927201)
*   [JProgressBar 不会更新](https://stackoverflow.com/questions/13094666/jprogressbar-wont-update/13095992#13095992)

对于一些例子和想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:41:08.660

如果您想显示所有值，那么

```
String temp = "";
while(i < 100) {
     temp += "" + i;
     jLabel1.setText(temp);
     i++;
} 
```

如果你想显示最后一个值，那么简单的显示内容

```
while(i < 100) {
     jLabel1.setText(i);
     i++;
} 
```

# c# - c#中的依赖属性

> ID：15241565
> 
> 赞同：2
> 
> 时间：2013-03-06T07:38:12.527
> 
> 标签：c#, asp.net

这是我的代码

```
private MyClass _someProperty

[Dependency]
public MyClass SomeProperty
{
   get{
        if(_someProperty == null)
              _someProperty = new MyClass()
        return (MyClass)_someProperty
      }
} 
```

这很好用，但我被指示为“无需为 [Dependency] 添加“get”属性”

我不清楚这个 [Dependency] 属性。当我查看其他代码时，它被写为

```
[Dependency]
public AnotherClass MyNewClass
{
    get; set;
} 
```

当我为 MyClass 尝试上述方法时，它没有用。它抛出了 Property is NULL

谁能告诉我 [Dependency] 的用途是什么，MyClass 代码是否有另一种方法，为什么它会以“NULL”的形式出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:51:27.617

这与`DependencyAttribute`. 后一种情况只是一个自动生成的属性。如果您喜欢使用这种语法，您必须在构造函数中填写值。

```
public class MyClass
{
    public MyClass()
    {
        SomeProperty = new AnotherClass();
    }

    public AnotherClass SomeProperty { get; set; }
} 
```

请注意，在这种情况下，您无法在 getter 或 setter 中执行任何检查。因此，如果您需要任何无效性检查或想在 setter 中引发事件，您必须自己实现 getter 和 setter。

```
public class MyClass
{
    private AnotherClass _SomeProperty;

    public MyClass()
    {
        _SomeProperty = new AnotherClass();
    }

    public AnotherClass SomeProperty
    {
        get { return _SomeProperty; }
        set
        {
            if(value == null)
                throw new ArgumentNullException("SomeProperty");

            if(value != _SomeProperty)
            {
                _SomeProperty = value;
                // ToDo: Implement RaiseEvent() and declare event.
                RaiseEvent(MyEvent);
            }       
        }
    }
} 
```

# android - android listview中的复选框状态

> ID：15241569
> 
> 赞同：0
> 
> 时间：2013-03-06T07:38:21.980
> 
> 标签：android, arraylist, android-listview, android-checkbox

我想获取从列表视图中选择的所有家庭 ID。单击相应的复选框时，我将家庭 ID 添加到单独的数组列表中。当我滚动列表视图时，arraylist 中的值会丢失。

以下是我的代码。

```
 public class FamilyList extends Activity{
ListView fam_list;
DataAdapter myadapt;
ArrayList<ListClass> familyarraylist;
ArrayList<String> familyselectedlist;
Button show;
  @Override
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
Log.i("zacharia", "inside oncreate");
setContentView(R.layout.activity_familylist);
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
fam_list=(ListView) findViewById(R.id.familylist);
myadapt=new DataAdapter(this);
final TextView empty=(TextView) findViewById(R.id.emptyView);
empty.setText("No Data Found");
familyarraylist= myadapt.getfamilylist("All");
FamilyListAdapter familyadapter=new FamilyListAdapter(this, R.layout.family_list_view,familyarraylist);
fam_list.setAdapter(familyadapter);
fam_list.setEmptyView(empty);

familyselectedlist=new ArrayList<String>();

ImageButton button=(ImageButton) findViewById(R.id.imageButton1);
button.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        EditText edit=(EditText) findViewById(R.id.editText1);
        if(edit.getText().length()>0){
            if(myadapt==null){
            myadapt=new DataAdapter(FamilyList.this);
            }
             familyarraylist=myadapt.getfamilylist(edit.getText().toString());
            fam_list.setAdapter(new FamilyListAdapter(FamilyList.this, R.layout.family_list_view, familyarraylist));                }
        else{
            if(myadapt==null){
                myadapt=new DataAdapter(FamilyList.this);
                }
            familyarraylist=myadapt.getfamilylist("All");
            fam_list.setAdapter(new FamilyListAdapter(FamilyList.this, R.layout.family_list_view,familyarraylist ));    
        }
        fam_list.setEmptyView(empty);

    }
});

show=(Button) findViewById(R.id.button1);
show.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {
        for(int i=0;i<familyselectedlist.size();i++){
            Log.i("zacharia", familyselectedlist.get(i));
        }
        MainActivity.selected_list=true;
        MainActivity.selected_family_id_array=familyselectedlist;           
        FamilyList.this.finish();

    }
});
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
// TODO Auto-generated method stub
getMenuInflater().inflate(R.menu.activity_list, menu);
return true;
}
@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
// TODO Auto-generated method stub
if(item.getItemId()==R.id.item1){
    final SharedPreferences prefs=getSharedPreferences("search_mode",  Activity.MODE_WORLD_READABLE);
    int pos=prefs.getInt("position", 0);
    new AlertDialog.Builder(this).setTitle("Search By")
            .setSingleChoiceItems(new String[]{"Name","House Name"}, pos, new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    Editor edit=prefs.edit();
                    edit.putInt("position", which);
                    edit.commit();
                    dialog.dismiss();
                }
            }).show();
}
return true;
}
static class ViewHolder {
protected TextView id_text,id_name,id_address;
protected CheckBox id_check;
   }
class FamilyListAdapter extends ArrayAdapter<ListClass>{

private ArrayList<ListClass> list_array;
Context context;

boolean checkchange=false;
ListClass obj;
public FamilyListAdapter(Context context, int textViewResourceId,
        ArrayList<ListClass> objects) {
    super(context, textViewResourceId, objects);
    this.context=context;
    list_array=objects;

}

@Override
public ListClass getItem(int position) {
    // TODO Auto-generated method stub
    return list_array.get(position);
}

public int getFamilyId(int position){
    return list_array.get(position).getFamilyid();
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View v=convertView;
    if(v==null){
        LayoutInflater inflater=(LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v=inflater.inflate(R.layout.family_list_view, null);
        final ViewHolder holder = new ViewHolder();
        obj=getItem(position);
        holder.id_text=(TextView) v.findViewById(R.id.list_familyid);
        holder.id_text.setText(""+obj.getFamilyid());
        holder.id_name=(TextView) v.findViewById(R.id.list_name);
        holder.id_name.setText(""+obj.getHeadname());
        holder.id_address=(TextView) v.findViewById(R.id.list_address);
        holder.id_address.setText(""+obj.getAddress());
        holder.id_check=(CheckBox) v.findViewById(R.id.check_familyview);
        Log.i("zacharia", "check result:"+ getFamilyId(position)+"  "+familyselectedlist.contains(""+getFamilyId(position)));
        holder.id_check.setSelected(false);
        if(familyselectedlist.contains(""+getFamilyId(position))){

            holder.id_check.setSelected(true);
        }

        holder.id_check.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                Log.i("zacharia", "inside on change");

                if(isChecked){
                    familyselectedlist.add(""+getFamilyId(position));
                }
                else{
                    familyselectedlist.remove(""+getFamilyId(position));
                }

            }
        });
        v.setTag(holder);
        holder.id_check.setTag(getFamilyId(position));
    }
    else{
        v=convertView;
        ((ViewHolder)v.getTag()).id_check.setTag(getFamilyId(position));
    }
    obj=getItem(position);
    ViewHolder holder = (ViewHolder) v.getTag();
    holder.id_text.setText(""+obj.getFamilyid());
    holder.id_name.setText(obj.getHeadname());
    holder.id_address.setText(obj.getAddress());
    if(familyselectedlist.contains(""+getFamilyId(position))){      
    holder.id_check.setChecked(true);
    }
    else{
        holder.id_check.setChecked(false);
    }

    return v;
} 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:09:16.720

只需将以下代码移出 if-condition (if (v==null))：

```
 holder.id_check.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            Log.i("zacharia", "inside on change");

            if(isChecked){
                familyselectedlist.add(""+getFamilyId(position));
            }
            else{
                familyselectedlist.remove(""+getFamilyId(position));
            }

        }
    }); 
```

仅当您没有获得重用视图时才设置侦听器。但是当您重用现有视图时，您仍然需要设置侦听器。因此，如果 convertView 不为空，那么它已经带有旧的 onClickListener。此 OnClickListener 使用错误的位置（从旧视图）。

因此，您不仅应该在 (v == null) 的情况下设置 OnClickListener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:35:15.907

我对我的代码进行了一些更改，并将一个数组列表的实例（对于 selected_ids）传递给它工作的适配器。

以下是我的代码：

```
public class FamilyList extends Activity{
ListView fam_list;
DataAdapter myadapt;
ArrayList<ListClass> familyarraylist;
ArrayList<String> familyselectedlist;
Button show;
@Override
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
Log.i("zacharia", "inside oncreate");
setContentView(R.layout.activity_familylist);
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
fam_list=(ListView) findViewById(R.id.familylist);
myadapt=new DataAdapter(this);
final TextView empty=(TextView) findViewById(R.id.emptyView);
empty.setText("No Data Found");
familyarraylist= myadapt.getfamilylist("All");
familyselectedlist=new ArrayList<String>();

FamilyListAdapter familyadapter=new FamilyListAdapter(this, R.layout.family_list_view,familyarraylist,familyselectedlist);
fam_list.setAdapter(familyadapter);
fam_list.setEmptyView(empty);

ImageButton button=(ImageButton) findViewById(R.id.imageButton1);
button.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        EditText edit=(EditText) findViewById(R.id.editText1);
        if(edit.getText().length()>0){
            if(myadapt==null){
            myadapt=new DataAdapter(FamilyList.this);
            }
            familyarraylist=myadapt.getfamilylist(edit.getText().toString());
            fam_list.setAdapter(new FamilyListAdapter(FamilyList.this, R.layout.family_list_view, familyarraylist,familyselectedlist));             }
        else{
            if(myadapt==null){
                myadapt=new DataAdapter(FamilyList.this);
                }
            familyarraylist=myadapt.getfamilylist("All");
            fam_list.setAdapter(new FamilyListAdapter(FamilyList.this, R.layout.family_list_view,familyarraylist,familyselectedlist));  
        }
        fam_list.setEmptyView(empty);

    }
});

show=(Button) findViewById(R.id.button1);
show.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {
        for(int i=0;i<familyselectedlist.size();i++){
            Log.i("zacharia", familyselectedlist.get(i));
        }

        MainActivity.selected_list=true;
        MainActivity.selected_family_id_array=familyselectedlist;           
        FamilyList.this.finish();

    }
});
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
// TODO Auto-generated method stub
getMenuInflater().inflate(R.menu.activity_list, menu);
return true;
}
@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
// TODO Auto-generated method stub
if(item.getItemId()==R.id.item1){
    final SharedPreferences prefs=getSharedPreferences("search_mode", 0);
    int pos=prefs.getInt("position", 0);
    new AlertDialog.Builder(this).setTitle("Search By")
            .setSingleChoiceItems(new String[]{"Name","House Name"}, pos, new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    Editor edit=prefs.edit();
                    edit.putInt("position", which);
                    edit.commit();
                    dialog.dismiss();
                }
            }).show();
}
return true;
}

class FamilyListAdapter extends ArrayAdapter<ListClass>{

private ArrayList<ListClass> list_array;
Context context;
ArrayList<String> selectedlist;
TextView id_text,id_name,id_address;
CheckBox id_check;

boolean checkchange=false;
ListClass obj;
public FamilyListAdapter(Context context, int textViewResourceId,
        ArrayList<ListClass> objects,ArrayList<String> selectedlist) {
    super(context, textViewResourceId, objects);
    this.context=context;
    list_array=objects;
    this.selectedlist=selectedlist;
}

@Override
public ListClass getItem(int position) {
    // TODO Auto-generated method stub
    return list_array.get(position);
}

public int getFamilyId(int position){
    return list_array.get(position).getFamilyid();
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View v=convertView;
    if(v==null){
        LayoutInflater inflater=(LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v=inflater.inflate(R.layout.family_list_view, null);

    }
    obj=getItem(position);
    id_text=(TextView) v.findViewById(R.id.list_familyid);
    id_text.setText(""+obj.getFamilyid());
    id_name=(TextView) v.findViewById(R.id.list_name);
    id_name.setText(""+obj.getHeadname());
    id_address=(TextView) v.findViewById(R.id.list_address);
    id_address.setText(""+obj.getAddress());
    id_check=(CheckBox) v.findViewById(R.id.check_familyview);

    id_check.setSelected(false);
    if(selectedlist.contains(""+getFamilyId(position))){

        id_check.setSelected(true);
    }

    id_check.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            Log.i("zacharia", "inside on change");

            if(isChecked){
                selectedlist.add(""+getFamilyId(position));
            }
            else{
                selectedlist.remove(""+getFamilyId(position));
            }

        }
    });

    id_check.setTag(getFamilyId(position));
    if(selectedlist.contains(""+getFamilyId(position))){        
    id_check.setChecked(true);
    }
    else{
        id_check.setChecked(false);
    }

    return v;
}

}
} 
```

Now i need to show the selected items when i open this activity. How can i done that? i try to pass it by the familyselectedlist to the adapter. If i uncheck the checkbox and scroll the check box status is remain as checked.

# java - 使用 Java 泛型对具有对象列表的对象进行递归（每个对象都具有另一个对象列表）

> ID：15241575
> 
> 赞同：7
> 
> 时间：2013-03-06T07:38:55.100
> 
> 标签：java, generics

我有三个接口：

```
public interface Combinable<V> {
    V add(V other);
}

public interface Sublistable<V> {
    boolean hasSublist();
    List<V> getSublist();
    void setSublist(List<V> sublist);
}

public interface HasUniqueIdentifier {
    String getUniqueIdentifier();
} 
```

和 4 个实现部分或全部这些接口的类：

```
public class Grandparent implements HasUniqueIdentifier, 
                                    Sublistable<Parent>, 
                                    Combinable<Grandparent> 
{   List<Parent> sublist; ... }

public class Parent implements HasUniqueIdentifier, 
                               Sublistable<Child>, 
                               Combinable<Parent> 
{   List<Child> sublist; ... }

public class Child implements HasUniqueIdentifier, 
                              Sublistable<Grandchild>, 
                              Combinable<Child> 
{   List<Grandchild> sublist; ...  }

public class Grandchild implements HasUniqueIdentifier, 
                                   Combinable<Grandchild> 
{    } 
```

我想要一个通用方法来执行以下操作：

```
public <V, T extends HasUniqueIdentifier & Combinable<T> & Sublistable<V>> 
List<T> combine(List<T> items) {
    Multimap<String, T> similarItemMap = HashMultimap.create();
    for (T item: items) {
        similarItemMap.put(item.getUniqueIdentifier(), item);
    }

    List<T> output = new ArrayList<T>();
    for (Collection<T> similarCollection : similarItemMap.asMap().values()) {
        List<T> similarItems = Lists.newArrayList(similarCollection);
        T source = similarItems.get(0);
        for (int i = 0; i < similarItems.size(); i++) {
            source = source.add(similarItems.get(i));
        }
        output.add(source);
    }

    for (T item : output) {
        if (item.hasSublist()) {
            item.setSublist(combine(item.getSublist));
        }
    }
    return output;
} 
```

意识到这可能会创建一个无限循环（除非底层类 - 孙子 - 实现了 Sublistable 和 set`hasSublist() { return false; }`或其他东西），以及这种方法对泛型有点疯狂的事实，我不得不问：是否有一些我可以稍微重写一下，以便我可以以这种方式调用该方法：

`combine(listOfGrandparents)`

还是我应该放弃这是一种方法并尝试以更好的方式对其进行重构？

* * *

**编辑：** 为了更好地解释我正在尝试做什么，我有一个 type 对象列表`A`。每个对象`a`都有一个类型为 的对象列表`B`。每个对象`b`都有一个 type 对象的列表`C`，依此类推，直到最终 type `T`（对于某些不同级别的`T`）不再有子列表。

每种类型基本上都需要为“合并”或“组合”方法做三件事：

1.  `item.getUniqueIdentifier()`使用方法将所有“喜欢”的项目收集到一个容器中
2.  将所有相似的项目合并为一个项目，使用`source.add(other)`方法
3.  如果该项目有子列表，请在子列表上进行合并。

`n`由于每个项目的行为都非常相似，如果我可以使用单个方法而不是必须有方法，每种类型都有一个方法，那就太好了。不幸的是，由于没有一种类型可以保证是相同的（除了实现了上面给出的部分或全部接口之外），创建一个泛型方法被证明是困难的。有没有办法做到这一点，我错过了？

* * *

**编辑2：** 我找到了*一种*有效的方法。基本上，它会变成这样：

```
public <V extends HasUniqueIdentifier & Combinable<V>, 
        T extends HasUniqueIdentifier & Combinable<T>> 
List<T> combine(List<T> items) {
    Multimap<String, T> similarItemMap = HashMultimap.create();
    for (T item: items) {
        similarItemMap.put(item.getUniqueIdentifier(), item);
    }

    List<T> output = new ArrayList<T>();
    for (Collection<T> similarCollection : similarItemMap.asMap().values()) {
        List<T> similarItems = Lists.newArrayList(similarCollection);
        T source = similarItems.get(0);
        for (int i = 0; i < similarItems.size(); i++) {
            source = source.add(similarItems.get(i));
        }
        output.add(source);
    }

    for (T item : output) {
        if (item instanceof Sublistable<?>) {
            @SuppressWarnings("unchecked")
            Sublistable<V> sublistableItem = ((Sublistable<V>)sublistableItem);
            if (sublistableItem.hasSublist()) {
                sublistableItem.setSublist(combine(sublistableItem.getSublist));
            }
        }
    }
    return output;
} 
```

不幸的是，这种方法需要 a`@SupressWarnings`和 a `instanceof`，如果可能的话我想避免。不过，我还没有找到其他任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:44:23.610

你的第一个解决方案很好，因为这是`GrandChild implements Sublistable<Void>`空洞的。树更统一，更容易递归处理。您可能还希望合并一个`interface Node<T,V> extends HasUniqueIdentifier, Combinable<T>, Sublistable<V>{}`

如果您不想要`GrandChild implements Sublistable`，您的第二个解决方案也可以。测试标记界面的单曲`instanceof`不是罪过。代码可以重写为

```
public <T extends HasUniqueIdentifier & Combinable<T>> 
List<T> combine(List<T> items) 
{
    ...
    List<T> output = new ArrayList<T>();
    ...

    for (T item : output) {
        if (item instanceof Sublistable<?>) 
            combineSublist((Sublistable<?>)item);

    return output;
}

private <V> void combineSublist(Sublistable<V> sublistableItem)
{
    if (sublistableItem.hasSublist()) {
        sublistableItem.setSublist(combine(sublistableItem.getSublist));
} 
```

# git - 在 ubuntu 的 github 上寻找应用程序？

> ID：15241576
> 
> 赞同：3
> 
> 时间：2013-03-06T07:39:03.667
> 
> 标签：git, ubuntu, github

我对使用 github 和 ubuntu 进行的所有这些编程都很陌生。我正在尝试在铁轨上玩红宝石。无论如何，我已经搞砸了 windows 和 github，当我安装 git 时，我可以运行一个实际的应用程序，我可以打开 git bash。但是当我只是尝试在 Ubuntu 上安装 github 时`sudo apt-get install git`，它似乎已经存在，因为在终端命令行中它说`0 upgraded, 0 newly installed, 0 to remove and 286 not upgraded`

但是现在我试图在我的文件夹中搜索 git 应用程序，但它不存在？我错过了什么吗？

非常新手的问题，

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T07:50:43.473

在 Unix 上，你不安装“github”，只安装 git。
它可能已经安装（在 中`/usr/bin`，除非你重新编译它`/usr/local/bin`：）

这将允许您从命令行会话 git 托管在 GitHub 上的存储库。
你也有[一些用于 Linux 中 Git 的 GUI](https://stackoverflow.com/a/1518844/6309)。

这与您可以安装的 Windows 不同：

*   [适用于 Windows 的 Git（msysgit 分发版）](https://code.google.com/p/msysgit/)
*   和/或[GitHub for Windows](http://windows.github.com/)（实际上包括它自己的 msysgit）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-25T20:21:02.040

Offtopic 但是，有一个非官方版本的 Github 桌面 GUI 客户端可用于 Ubuntu

要设置包存储库，请运行以下命令：

```
 sudo wget -qO - https://packagecloud.io/shiftkey/desktop/gpgkey | sudo apt-key add -

 sudo sh -c 'echo "deb [arch=amd64] https://packagecloud.io/shiftkey/desktop/any/ any main" > /etc/apt/sources.list.d/packagecloud-shiftky-desktop.list'

 sudo apt-get update

 sudo apt install github-desktop 
```

[或者您可以直接从https://github.com/shiftkey/desktop/releases](https://github.com/shiftkey/desktop/releases)获取 .deb 包

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-05T00:39:47.510

[SmartGit](http://www.syntevo.com/smartgit/)是跨平台的并在 Ubuntu 上运行。它具有完美的 GitHub 集成，我认为它比官方的 GitHub Windows 应用程序更好。

# request - 在 Visual Studio 中长时间调试 - 我在浏览器中收到空白网页响应

> ID：15241583
> 
> 赞同：0
> 
> 时间：2013-03-06T07:39:26.420
> 
> 标签：request, iis-7.5, visual-studio-debugging, connection-timeout

我需要了解一个复杂的 Web 项目，为此我需要在调试会话中花费更长的时间。为此，我在 IIS 7.5 中将“应用程序池”“Ping Enabled”设置为 False，这样 IIS 不会自行终止，我可以继续调试。

但是，如果我继续调试更长的时间，我不会在浏览器中收到响应，而是会收到一个空白页面。尽管在调试时没有引发异常并且一切正常。

还需要哪些其他配置才能在调试会话中保留更长时间？

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T09:04:20.963

您必须考虑两个超时，服务器和客户端。

您已经解决了服务器超时，但客户端（浏览器）放弃并显示白页，通常在 1 分钟后。

您需要增加浏览器愿意等待的超时时间。

在 IE 中有执行此操作的步骤：http: [//support.microsoft.com/kb/813827](http://support.microsoft.com/kb/813827)

# ajax - 通过ajax删除图像时加载gif图像

> ID：15241588
> 
> 赞同：0
> 
> 时间：2013-03-06T07:39:34.800
> 
> 标签：ajax, jquery, django-templates

我有一个用户上传图片的页面。每个图像都分配有一个删除按钮。我正在尝试实现一种方法，当单击图像下方的删除按钮时，该特定的删除按钮消失并在加载 ajax 请求时加载 gif 图像，并且刷新完成后 gif 图像应该消失。这是正在尝试的方法，但它不起作用。

```
$(function(){
    $('.delete-img-btn').live('click', function() {
        //asign the image id from the button attribute 'img-id'
        var id= $(this).attr('img-id');
        //The data to be send via ajax the server will recieve 2 POST variables ie. 'action' and 'id'(which is the img id)
        var data={
            'action':'/admin/image-uploader/',
                'pk':id,
           'success':refreshUploadedImages
        };

        $('.inner').empty();
        $('.inner').append('<img src="{{ MEDIA_URL }}admin/img/admin/ajax-loader.gif" id="spinner">');
        //inherit parent element (our delete button)
        $(this).ajaxStart(function() {
            $('#spinner').show();
        }).ajaxStop(function() {
            $('#spinner').hide();
        });
        $.post("/admin/image-uploader/delete/"+id ,function(data){
            refreshUploadedImages()
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:44:32.203

你不需要`ajaxStart`和`ajaxStop`...之前显示微调器`$.post`并在完成后隐藏它`$.post`（回调函数）。

```
$('.inner').empty();
$('.inner').append('<img src="{{ MEDIA_URL }}admin/img/admin/ajax-loader.gif" id="spinner">');  //show here
$.post("/admin/image-uploader/delete/"+id ,function(data){
    $('#spinner').hide();  //hide here
    refreshUploadedImages()
}); 
```

# python - 我如何在 django admin 的所有视图中拥有 app_list

> ID：15241594
> 
> 赞同：2
> 
> 时间：2013-03-06T07:39:51.053
> 
> 标签：python, django

我正在覆盖该站点的 django 管理员。在默认索引页面中，它们具有`app_list`包含所有应用程序及其模型的变量。

但是其他视图`app_list`不可用，但我希望在所有视图中都可用，以便我可以在侧边栏上使用它们以供单击

在这个文件中

[https://github.com/django/django/blob/master/django/contrib/admin/sites.py#L382](https://github.com/django/django/blob/master/django/contrib/admin/sites.py#L382)

他们有这样的代码

`app_list = list(six.itervalues(app_dict))`

但是我怎样才能在 change_list 页面中使用它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-04-29T04:30:07.560

我知道这已经晚了 7 年，但我想指出，因为我遇到过你的情况。如果您的目的是获取所有应用程序（应用程序列表）及其各自的模型，那么您可以使用`available_apps`而不是`app_list`,`available_apps`可以在所有管理页面中访问（参见下面的[site.py](https://github.com/django/django/blob/master/django/contrib/admin/sites.py)代码）

```
def each_context(self, request):
    """
    Return a dictionary of variables to put in the template context for
    *every* page in the admin site.
    For sites running on a subpath, use the SCRIPT_NAME value if site_url
    hasn't been customized.
    """
    script_name = request.META['SCRIPT_NAME']
    site_url = script_name if self.site_url == '/' and script_name else self.site_url
    return {
        'site_title': self.site_title,
        'site_header': self.site_header,
        'site_url': site_url,
        'has_permission': self.has_permission(request),
        'available_apps': self.get_app_list(request), #this one
        'is_popup': False,
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T08:15:04.847

覆盖 app_index.html

```
{% extends "admin/index.html" %}
{% load i18n %}
{% load url from future %}

{% if not is_popup %}
{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo;
{% for app in app_list %}
{% blocktrans with app.name as name %}{{ name }}{% endblocktrans %}
{% endfor %}
</div>
{% endblock %}
{% endif %}

{% block sidebar %}{% endblock %} 
```

# java - 如何强制对组件执行操作？

> ID：15241597
> 
> 赞同：1
> 
> 时间：2013-03-06T07:39:57.033
> 
> 标签：java, swing, events, listeners

我有一个文本框和一个带有其他组件的摆动形式的按钮。我的文本框注册了焦点监听器，按钮注册了动作监听器。

如果我更改文本框中的文本并且没有失去焦点，单击按钮，我的焦点侦听器将被执行并且按钮的动作侦听器永远不会执行。

在文本框上的焦点监听器完成其部分之后，有没有办法强制（以编程方式）调用按钮上的动作监听器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:25:27.093

试着打电话`yourButton.doClick();`？

# winforms - Windows 窗体应用程序 WM_USER 消息接收

> ID：15241598
> 
> 赞同：0
> 
> 时间：2013-03-06T07:40:12.257
> 
> 标签：winforms, winapi

我正在使用 Visual Studio C++ 开发 Windows 窗体应用程序，并希望将消息从线程发送到窗口（WM_USER 消息），但是我找不到用于接收该消息的代码（Studio 自动执行）的位置。怎么做？它是 Windows 窗体应用程序中的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:04:40.410

您需要覆盖[`WndProc`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.wndproc.aspx)表单的方法。在该方法中，您可以对传递到表单窗口的任何 Windows 消息实施所需的任何特殊处理。

请注意遵守文件中的信函：

> **继承人须知**
> 
> 继承控件应调用基类的 WndProc 方法来处理它们不处理的任何消息。

# php - 将输入表单的值添加到当前字段值并在 PHP 中更新字段

> ID：15241600
> 
> 赞同：1
> 
> 时间：2013-03-06T07:40:24.600
> 
> 标签：php, mysql

我一直在搜索该站点，并看到了许多与我需要的相似的帖子，但不完全是。这是我需要做的...

我正在我的网站上建立一个跟踪页面，以跟踪我的 Darts 团队中每个玩家的总获胜次数。

我需要能够使用输入表单中输入的获胜次数来更新 MySQL 中的获胜字段。

例如

如果一个玩家迄今为止赢得了 7 场胜利，而接下来的一周他又赢得了 5 场胜利，我需要将这 5 场胜利添加到现有的 7 场比赛中，并更新字段以显示迄今为止总共 12 场胜利。

我可以在 PHP 中使用以下语句添加固定数量：

```
UPDATE table SET wins = wins + 1 WHERE id = 1 
```

需要允许我当前使用**“+ 1”的随机值**

我对更高级的 PHP 仍然很陌生，因此我们将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:50:25.420

尝试这个 ：

```
 //You have mentioned a random number in your question
 $number = rand(); //rand(1,10)
 //If you want use the number from input form .Try like
 //$number=$_POST['input_field_name'] ;
 $my_sql_query = "UPDATE table SET wins = wins + $number WHERE id = 1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:52:21.563

您可以使用以下内容：

```
$query = "UPDATE table SET wins = wins + $addValue WHERE id = 1";
mysql_query($query); 
```

变量 $addValue 可以是您想要的任何随机值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T08:16:16.230

将您的更新按钮包装在 a 中`<form>`并使其 POST 到您的后端（实际上 PUT 在这里更合适，因为您正在更新现有数据）

在后端，

获取您的输入值`$_POST['input_name']`并相应地构造您的 SQL 语句

```
$input_value = $_POST['input_name'];
$query = sprintf("UPDATE table SET wins = wins + %d WHERE id = %s;",
             $input_value , $id); 
```

这与@Makesh 的答案非常相似，但也负责 SQL 注入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T07:55:30.853

当用户获胜时，该获胜将进入与该用户和日期对应的数据库。当我们想要更新时，只需计算该日期的获胜行数，然后将其放入变量中并根据需要进行更新。

# kendo-ui - 格式化剑道数字文本框

> ID：15241603
> 
> 赞同：15
> 
> 时间：2013-03-06T07:40:28.370
> 
> 标签：kendo-ui, kendo-grid

我在网格中有一个剑道数字框。其中只允许使用数字。没有小数位，也没有逗号分隔符。我尝试了不同的方式，但没有成功。任何想法...请帮助我...

在我这样给出的数据源字段中

```
seq_no  : {type: "number",validation: {min: 1,max: 32767}} 
```

在网格列中

```
{ field: "seq_no", width: "50px", title: "Sequence Number", type:"number"} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T08:18:03.177

[`format`](http://docs.kendoui.com/api/web/grid#columnsformat-string)与价值一起使用`{0:n0}`：

```
{ field: "seq_no", width: "50px", title: "Sequence Number", type:"number", format: "{0:n0}" } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-07T05:16:15.817

上面提到的答案是有效的，但它允许输入小数点。但是我实施的这个解决方案不允许用户在文本框中输入小数点

```
{ field: "seq_no",width: "10px", title: "Sequence Number",
    editor: function(container, options) { 
            $('<input  maxlength="5"  name="' + options.field + '"/>')
             .appendTo(container)
             .kendoNumericTextBox({
               min:0,
               max: 32767,
               format:"#",
               decimals:0
             })
        }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-02T21:33:31.617

由于某些原因：

```
format: "{0:n0}" 
```

并不总是摆脱分隔符。但我发现：

```
format: "{0:#.##}" 
```

在模型领域工作得很好。

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T14:14:57.280

```
format: "{#.##}" 
```

这一个删除分组与小数分隔符

# javascript - 显示元素后设置innerhtml

> ID：15241605
> 
> 赞同：0
> 
> 时间：2013-03-06T07:40:52.493
> 
> 标签：javascript, jquery

显示元素后设置元素的html是否可以。在这种情况下，用户是否会发现任何明显的差异。例如。

```
$("#abc").show();
$("#abc").append("<div>Test div</div>"); 
```

另外我想知道这是否会导致不需要的浏览器重绘。

谢谢，高瑟姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:58:44.103

可能这会有所帮助：[**小提琴**](http://jsfiddle.net/mVgR5/)

```
$('button').click(function () {
   console.log('Height is ' + $("#abc").height() + ' before show.');
   $("#abc").show();
   console.log('Height is ' + $("#abc").height() + ' after show.');
   $("#abc").append("<div>Test div</div>");
   console.log('Height is ' + $("#abc").height() + ' after filling.');
}); 
```

输出：

```
Height is 0 before show.
Height is 0 after show.
Height is 20 after filling. 
```

[**浏览器重排重绘以获取信息**](http://ajaxian.com/archives/browser-reflows-how-do-they-affect-performance)

# java - 转换java ArrayList 到可比 []

> ID：15241606
> 
> 赞同：0
> 
> 时间：2013-03-06T07:40:57.373
> 
> 标签：java, arraylist, comparable

我正在尝试将一些 Comparable 元素放入一个集合中并将其作为 Comparable [] 返回。

```
public Comparable[] getPerms() {
    ArrayList<Comparable> resList = new ArrayList<Comparable>();
    while(hasNext()) {
       for (int i=0; i<r; i++) {
         resList.add(index[i]);
       }
       moveIndex();
    }
    Comparable[] resultArray ;//how convert resList into array
    return resultArray;
  } 
```

但是，我不确定如何`ArrayList<Comparable>`获得`Comparable[]`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:43:30.343

关于什么

```
 resList.toArray(new Comparable[resList.size()]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T07:42:59.117

```
resList.toArray(new Comparable[resList.size()]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T07:47:11.337

你需要使用[`ArrayList#toArray()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html#toArray%28%29)方法。
`resList.toArray(new Comparable[resList.size()])`可能会解决您的问题。有关更多详细信息，[请参阅此](http://viralpatel.net/blogs/convert-arraylist-to-arrays-in-java/)

# ubuntu-12.10 - 移动 mercurial-server 主页和 repo 位置

> ID：15241608
> 
> 赞同：0
> 
> 时间：2013-03-06T07:41:07.023
> 
> 标签：ubuntu-12.10, mercurial-server

如何将 mercurial-server (hg) 主目录从 /etc/mercurial-server/ 移动到不同的位置。我想将密钥和 repo 存储在不同的磁盘中

在 Ubuntu 12.10 中

```
sudo apt-get install mercurial-server
sudo usermod -d /SOURCE/mercurial-server -m hg
#copied public_key to ~hg/keys/root/username
sudo -u hg /usr/share/mercurial-server/refresh-auth 
```

主目录在 /etc/passwd 中移动和更新

但 refresh-auth 仍然使用 /etc/mercurial-server

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:06:09.377

/etc/mercurial-server 不应该是 mercurial-server 的主目录；通常是 /var/lib/mercurial-server 但你可以移动它。/etc/mercurial-server 包含一些影响 mercurial-server 行为的文件。您可以使用 ~hg/.mercurial-server 来决定它的位置。

# java - 如何使用键和值创建字符串的深层列表

> ID：15241610
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:41:11.887
> 
> 标签：java, list, hashmap

有一种方法可以在java（字符串）中创建列表，如下所示。

细绳 ，

括号中的字符串应该类似于 key val。

我看到了这样的东西

```
List<HashMap<String, String>> csvData = new ArrayList<HashMap<String, String>>(); 
```

但是我想将哈希映射放在字符串中，因此结构将如下所示。

```
person<name,ben>
      <lastname,tagds>
      <age,30>  
      ....
emp  <firstname,jhon>
     <name,bbb>
..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:44:45.080

你想要：

```
HashMap<String, HashMap<String,String>> 
```

? 这样，person、emp 等将成为第一个`hashMap`键，`<name,ben>,<lastname,tagds>` 并将位于内部 HashMap 中。

# matlab - 如何在matlab中绘制特定函数及其foruier变换

> ID：15241611
> 
> 赞同：-2
> 
> 时间：2013-03-06T07:41:13.727
> 
> 标签：matlab, math, plot

我有一些我想绘制的函数，计算傅里叶变换然后绘制傅里叶变换，我真的不知道我怎么能做到这一点

几个示例函数：

![在此处输入图像描述](../Images/e5a4a1947899374fde9d2e474bd5ae5c.png)

或者

![在此处输入图像描述](../Images/71d5de3f84fb0c1b1d01574b5977d89c.png)

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:28:31.523

MATLAB 不会为您这样做。如果你想要一个离散函数的离散傅里叶变换，你可以用这个`fft`命令来做。MATLAB 确实有一个符号工具箱，但它不能处理连续傅里叶变换。最好的办法是手动完成。没那么复杂。如果有的话，还有其他 Stack Exchange 站点，您可以在其中找到有关此问题数学的更好答案。[Math.SE](https://math.stackexchange.com/)和[DSP.SE](https://dsp.stackexchange.com/)浮现在脑海。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:51:36.713

用这个

```
 [X,Y] = meshgrid(-4:.2:4, -4:.2:4);
  a=2;b=2;
  Rec = 1/(4*a*b)*(us(a^2-X.^2).*us(b^2-Y.^2));
  surf(X,Y,Rec)
  FftRec=fftshift(fft2(Rec));
  figure;
  imshow(log(FftRec+1)); 
```

谢谢 ：（

# javascript - while 循环打印 1 到 10，但返回 11

> ID：15241612
> 
> 赞同：1
> 
> 时间：2013-03-06T07:41:14.210
> 
> 标签：javascript, loops, while-loop

我再次在 CodeAcademy 工作，我一直在继续，现在正在使用 while 循环。然而，我在草稿本上工作了一点，我注意到了一些奇怪的东西。此文本正下方的代码：

```
var counter = 1;

while(counter <= 10){
    console.log(counter);
    counter = counter + 1;
} 
```

结果给出了这个。为什么底部会弹出 11。它不应该在那里。是算 0。还是对此有更苦涩的解释。很高兴得到一些帮助，谢谢：P

**结果：**

```
1
2
3
4
5
6
7
8
9
10
==> 11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:25:41.287

这是控制台的行为。在某些情况下，它将返回最后一个表达式的结果

```
var counter = 1, t="loop";

while(counter <= 10){
    console.log(counter);
    counter = counter + 1;
    t = "loop end";
} 
```

会给你

```
1
2
3
4
5
6
7
8
9
10
"loop end" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:08:16.293

我正在 Firefox 中进行测试，它正在记录 OP 所说的内容。这是我的看法。

变量计数器 = 1;

```
1 is it <= 10 yes, print add 1
2 is it <= 10 yes, print add 1
3 is it <= 10 yes, print add 1
4 is it <= 10 yes, print add 1
5 is it <= 10 yes, print add 1
6 is it <= 10 yes, print add 1
7 is it <= 10 yes, print add 1
8 is it <= 10 yes, print add 1
9 is it <= 10 yes, print add 1
10 is it <= 10 yes, print add 1
11  <-- prints it. 
```

while 循环在传入时知道“计数器”，而不是在声明“之后”或在循环内。它没有反向引用。所以还是得再过一遍。

```
before: 1

after: 2

before: 2

after: 3

before: 3

after: 4

before: 4

after: 5

before: 5

after: 6

before: 6

after: 7

before: 7

after: 8

before: 8

after: 9

before: 9

after: 10

before: 10

after: 11 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-19T01:40:42.547

你应该做这个。

```
var counter = 0;

while(counter < 10){
    console.log(counter);
    counter = counter + 1;
} 
```

while(counter <= 10) 表示当 counter 小于或等于 10 时，它将执行循环。这就是为什么还要打印数字 11 的原因。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-06T07:47:34.657

当 count 等于 10 时，条件 'counter <= 10' 允许流进入循环主体。您正在增加主体中的计数，因此最终计数将为 11。

将条件更改为“counter < 10”，结果将为 10。

这将导致 1 - 10 并留下计数为 10：

```
var counter = 0;

while(counter < 10){
    counter = counter + 1;
    console.log(counter);
} 
```

# javascript - jQuery - Colorbox 多次使用 Google 地图加载内容

> ID：15241620
> 
> 赞同：0
> 
> 时间：2013-03-06T07:41:28.997
> 
> 标签：javascript, jquery, google-maps, colorbox

这真让我抓狂。我网站中的所有颜色框都运行良好。但是当我尝试打开一个带有谷歌地图的地图时，它会打开两个或更多地图！我尝试了 API 映射和 iframe 嵌入式映射。

有时，当我首先在我的网站中打开其他颜色框时，它会多次重复谷歌地图。

如果我什么都不做，只打开地图，颜色框会打开 2 张地图。它快把我逼疯了！

这是我用来打开颜色框的特定代码：

```
 $(document).on('click', '.btn_map', function (e) {
            var salonId = $(e.currentTarget).attr('id').substr(4);
            $.colorbox({
                width:"715px",
                height:"568px",
                title:false,
                iframe:true,
                open:true,
                href:"content/map.php?id="+salonId
            });
            return false;
        }); 
```

我阅读了有关用户 href:this.href 的其他问题

但是当我尝试这样做时，颜色框开始打开，突然它作为一个新页面加载。

这是有问题的网站：

[http://testing.fyrastudio.com/lab/gaf/angarano/](http://testing.fyrastudio.com/lab/gaf/angarano/)

为了到达麻烦的颜色框，你必须去 SALONI，然后选择任何 REGIONE 和 CITTA 并单击 INVIA。填充表格后，在每一行的末尾，您将看到链接“vedi mappa”。这将打开颜色框。

啊，我差点忘了。当您在这里单独打开地图时：

[http://testing.fyrastudio.com/lab/gaf/angarano/content/map.php?id=1](http://testing.fyrastudio.com/lab/gaf/angarano/content/map.php?id=1)

它工作得很好，所以我认为问题不存在。

jQuery 是 1.9.1 颜色框是 1.4.3

所以我认为他们都是最新的。

我感谢任何形式的帮助。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:16:37.527

似乎点击处理程序附加了两次。我看不出它发生在哪里，但您可以尝试通过删除以前附加的点击处理程序来避免这种情况：

```
$(document).off('click', '.btn_map')
  .on('click', '.btn_map', function (e) {/*your code*/}); 
```

# php - PHP循环后无法识别HTML代码

> ID：15241623
> 
> 赞同：0
> 
> 时间：2013-03-06T07:41:34.630
> 
> 标签：php, html, forms, while-loop

我正在尝试使用 echo 在 php while 循环中创建一个表单。在 while 循环之后，我想以 HTML 格式继续表单。while 循环使用 scandir() 创建的变量通过下拉菜单（即“选择”和“选项”标签）显示目录中的文件列表。

有趣的是，当我在 php 循环后再次启动我的 html 时，我的浏览器 (FIREFOX) 不显示前几行代码。更具体地说，它无法识别评论之间的界限

```
<!-- FROM THIS POINT --> ...code that isn't displayed... <!-- TO THIS POINT--> 
```

请参阅下面的简化代码。提前致谢！

```
<!-- HTML... -->
<form action = "" method = "post"> 
Input File: <select name="drop_down_name" >

<?php

$dir = "/Applications/MAMP/db/mysql/IESE";
$files = scandir($dir, 1); 
$i = 0; 

while($i <= count($hypo_files)) { 
  echo "<option value = $files[$i]> $files[$i] </option>";
  $i = $i + 1;
}

?> 
<!--FROM THIS POINT -->
<fieldset>
<legend>Hypo Query:</legend>
<br>
Input Value: <!-- TO THIS POINT --> <input type = "text" name = "some_value"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:42:55.490

添加结束`SELECT`标记。

```
</select>    <!-- here -->
<!--FROM THIS POINT -->
<fieldset> 
```

不关闭标签可能会产生奇怪的效果，就像您在部分缺失代码时看到的那样。

此外，将您的选项值放在引号中：

```
echo '<option value="'.$files[$i].'">'.$files[$i].'</option>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:47:52.437

您的`<select>`标签没有关闭。请关闭它，它会工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:46:40.207

你忘了关闭 SELECT 标签。首先关闭 SELECT 标记，然后尝试。我希望它会起作用。?>

# asp.net - Configuration Error: ASP.NET MVC3

> ID：15241627
> 
> 赞同：23
> 
> 时间：2013-03-06T07:41:44.560
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

I'm trying to deploy my website on somee.com but keeps getting this error

![enter image description here](../Images/77d681b92a5f77d6131b4f4f44455303.png)

I've tried googling and it says I have to change my App Pool to ASP.NET 4.0\. I've tried that already but with no luck:(

**Informations:**

-My site was coded in 4.0 Framework
-I'm using .NET Framework v4.0 Integrated
-I have checked needed things already in Windows Features
-Im using ASP.NET MVC3
-I already typed cd C:\Windows\Microsoft.NET\Framework64\v4.0.30319 then aspnet_regiis -ir to cmd
-64 bit OS

**This is the steps how I publish my site**

1.  First I manually added this things to my Reference then changed the Copy Local to True

    Microsoft.Web.Infrastructure
    System.Web.Helpers
    System.Web.Mvc
    System.Web.Razor
    System.Web.WebPages
    System.Web.WebPages.Deployment
    System.Web.WebPages.Razor

2.  I Editted this on my Web Config

    `<configuration>`
    `<system.web>`
    `<customErrors mode="Off"/>`
    `<compilation debug="true" targetFramework="4.0"/>`
    `<authentication mode="None"/>`
    `</system.web>`
    `</configuration>`

3.  I add Deployable Dependencies that created _bin_deployableAssemblies which have this inside

    Microsoft.Web.Infrastructure.dll
    System.Web.Helpers.dll
    System.Web.Mvc.dll
    System.Web.Razor.dll
    System.Web.WebPages.dll
    System.Web.WebPages.Deployment.dll
    System.Web.WebPages.Razor.dll

4.  I then click Publish and have this settings

    **This is how I Publish is this ok or I have to change something here?** ![enter image description here](../Images/a3d5038691fe10e196bcbd8eef04c853.png)

5.  I went to my IIS Manager. I right click on Default Web site Under Sites and choose Add Application with this settings ![enter image description here](../Images/57fc325d67219885e5dfe2cb7d049f18.png)

6.  This resulted to this
    ![enter image description here](../Images/c9c3511937c6a329e2410bee724816f0.png) ![enter image description here](../Images/b3d210dde007bc52bcfd504ee04576db.png)

7.  I went to C:/inetpub/wwwroot and sees this files
    ![enter image description here](../Images/dcba4bc02cdcceba8f8e2b0cef095fe5.png)

8.  I then compressed it as zip then uploaded it in my account in somee.com then checked my site and now I'm getting the Configuration Error above.

    **ABOVE IS MY UPDATED QUESTION I REPUBLISHED MY SITE AND INCLUDED STEPS HOW I PUBLISHED IT . I INCLUDED IT SO THAT YOU GUYS COULD SUGGEST IF I'M DOING SOMETHING WRONG ON HOW I'M PUBLISHING MY SITE AND COULD BE THE REASON OF THE ERROR ABOVE. THANKS IN ADVANCE :)**

    My site works fine in the iis of the localhost of my machine it only gets that error when deployed on the internet. Btw I'm following the tutorials from these sites [How to Deploy an ASP.NET MVC 3 App to Web Hosting with "\bin Deployment"](http://drew-prog.blogspot.com/2011/01/how-to-deploy-aspnet-mvc-3-app-to-web.html) [Programming ASP.NET MVC 4 Chapter 19\. Deployment](http://ofps.oreilly.com/titles/9781449320317/ch_Deployment.html#SelectIISApplicationPoolDialog) [Deployment ASP.NET MVC 3 project to IIS and somee](http://www.youtube.com/watch?v=JXp30_yxyLM)

    **Question: What could be the cause of this issue :(** It's my first time to deploy a website on the internet. Hopefully you could help me guys.. If you need more info please tell me.

**My IIS Manager** ![enter image description here](../Images/5bb61be9cfe48c3cebc5fc789acfc507.png)

**My configuration** ![enter image description here](../Images/ad1f5455d143c19a8097e5c46aced3f8.png)

**or could this be the reason of my issue?**

![enter image description here](../Images/09743467c6819f0465f4c341f5b1e10a.png)

* * *

**OK THIS PROBLEM WAS SOLVED. I FOUND OUT THERE'S NO PROBLEM ON MY SETTINGS. THE PROBLEM IS ON THE SETTINGS OF THE WEBHOSTING SITE. I CHANGED THE ASP.NET VERSION FROM 2.0 TO 4.0 BUT FORGOT TO CLICK THE UPDATE BUTTON :( I FEEL BAD I HAVEN'T REALIZED THAT. I'M NOW FACING ANOTHER ERROR BUT IT HAS NOTHING TO DO WITH THIS QUESTION. THANKS GUYS FOR TRYING TO HELP ME :)**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T16:05:23.077

> This typically happens when you have an attribute of targetFramework="4.0" in the web.config but the App Pool is set to run ASP.NET 2.0\. The targetFramework attribute is entirely unrecognized by ASP.NET 2.0 - so changing it to 2.0 won't have the desired effect.
> 
> Contact Support / Your Administrator and have the AppPool switched to 4.0.
> 
> You could also remove the attribute entirely, however if your site was coded with the 4.0 Framework, then I'm sure something else will cause an error as well.

[Unrecognized attribute 'targetFramework'. Note that attribute names are case-sensitive](https://stackoverflow.com/questions/7530725/unrecognized-attribute-targetframework-note-that-attribute-names-are-case-sen)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-15T06:32:29.297

I was now able to find reason behind the error guys. It's on the webhosting site settings not on my app pool or what so ever. I changed the asp.net version from 2.0 to 4.0 but I forgot to click the update button. I feel so embarrased. :( I've been struggling for days to fix this error and only to found out its on the webhosting site settings. GgrrRR.. As of now I'm facing new error but has nothing to do with this question. Anyway thanks guys for your efforts to help me. :)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-15T04:37:20.130

Try this, instead of selecting your websete's Application Pool to **DefaultAppPool**, select **ASP.NET v4.0**

Select your website in IIS => Basic Settings => Application Pool => Select **ASP.NET v4.0**

and you will be good to go. Hope it helps :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T10:54:46.980

Also try `aspnet_regiis -u` then `aspnet_regiis -i` on below path

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319 
```

Now restart the IIS and check

Hope this will help !

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T07:50:53.917

Have you tried the **aspnet_regiis** tool to register .Net 4.0 for IIS? You can check more at [msdn](http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T08:34:36.657

You could be using the 32 bit version, so you should prob try at the command line from the Framework (not Framework64) folder.

IE Did you try it from C:\Windows\Microsoft.NET\Framework\v4.0.30319 rather than the 64 version? If you ref 32 bit libs you can be forced to 32 bit version (some other reasons as well if I recall)

Is your site a child of another site in IIS?

For more details on this (since it applies to various types of apps running on .NET) see Scott's post at:

[32-bit and 64-bit confusion around x86 and x64 and the .NET Framework and CLR](http://www.hanselman.com/blog/BackToBasics32bitAnd64bitConfusionAroundX86AndX64AndTheNETFrameworkAndCLR.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T16:20:30.850

Make sure that you are building your web app as "Any CPU". Right click your web project --> Properties --> Build --> and look for the "Platform Target". Choose "Any CPU" or play around with it.

Hope this helps!

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-14T06:55:12.310

Each individual Web App under an IIS Web Site can use a different App Pool.

Verify the App Pool assigned to your app (not just the root site per your pictures) is .NET 4.0 compatible:

1.  Expand Default Web Site
2.  Right click on ProjectPALS, choose 'Manage Application' then 'Advanced...'
3.  Observe the 'Application Pool' your app is running as under the site
4.  Change to another App Pool if neccessary

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-14T19:37:03.793

How are you running the application? Are you just hitting the website or are you building and running from within Visual Studio? If you are building and running you may want to tell it to use the local IIS web server. This would make sure it is using the App Pool you have set up to run with v4.0/integrated.

I am guessing that it is using the Visual Studio Development Server when running. This server is probably trying to run with the 2.0 framework. This then causes your error to be thrown.

Edit: To note, I normally just build my website application and then I attach to process w3wp when I want to debug. I do not use the publishing tool. Of course this means my local working directory is within the web root.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-29T16:54:00.950

My problem was solved that way:

Your username is probably restricted, You must grant full access to the user.

1.  Right Click on Project and select Properties
2.  Click on Tab Security
3.  Click Edit button
4.  Found Current User and Permission for User Allow Full Control

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-03-06T11:42:38.200

If your application is 32 bit, and you want to deploy in a 64 bit machine, You need to set 'Enable 32 Bit Applications' property to 'True' in the application pool - advanced settings.

# mysql - 外键无法正常工作

> ID：15241638
> 
> 赞同：0
> 
> 时间：2013-03-06T07:42:31.933
> 
> 标签：mysql, sql, phpmyadmin

我正在尝试使用 phpMyAdmin 在两个表之间建立关系。但我在这样做时遇到了一些麻烦。

我设置了外键，但由于某种原因它没有添加另一个表的 id。我对 MySQL 很陌生，无法弄清楚这一点。

这是我的表结构：

**答案**

```
CREATE TABLE IF NOT EXISTS `tblanswers` (
  `answerid` int(11) NOT NULL AUTO_INCREMENT,
  `userid` int(11) DEFAULT NULL,
  `cid` int(11) DEFAULT NULL,
  `questionid` int(11) NOT NULL,
  `answerA` varchar(255) NOT NULL,
  `answerB` varchar(255) NOT NULL,
  `answerC` varchar(255) NOT NULL,
  `comment` varchar(255) NOT NULL,
  PRIMARY KEY (`answerid`),
  UNIQUE KEY `cid` (`cid`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=210 ; 
```

**证书**

```
CREATE TABLE IF NOT EXISTS `credentials` (
  `cid` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `second_name` varchar(255) NOT NULL,
  `phone` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  PRIMARY KEY (`cid`),
  KEY `cid` (`cid`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=106 ; 
```

我非常不清楚如何设置外键以及它们如何连接我查找了几个教程的表，但他们并没有真正详细解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:49:06.773

在桌子上添加这个`tblanswers`

```
CONSTRAINT tb_FK FOREIGN KEY (cid) REFERENCES credentials (cid) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/3f7d12)

# iphone - 如何防止图像在滚动视图中被拉伸

> ID：15241641
> 
> 赞同：1
> 
> 时间：2013-03-06T07:42:39.653
> 
> 标签：iphone, objective-c, uiscrollview, uiimage

`AspectFill`不能很好地与`ScrollView`.

这是我的代码

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    CGFloat pageWidth = self.scrollView.bounds.size.width;
    int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    self.pageCount= page;
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(self.scrollView.frame.size.width * self.pageCount, 0, self.scrollView.frame.size.width, self.scrollView.frame.size.height)];
    [imageView setImageWithURL:[self.urlArray objectAtIndex:self.pageCount] placeholderImage:[UIImage imageNamed:@"placeholder.png"]];
    [imageView setContentMode:UIViewContentModeRedraw];
    [self.scrollView addSubview:imageView];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:49:56.043

添加这个：

```
[scrollView setContentMode:UIViewContentModeScaleAspectFit];
[imageView sizeToFit]; 
```

应该管用 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:12:03.997

设置`scrollview` `contentmode` `aspectfill`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T08:09:34.513

我相信您的滚动视图已`autoresizesSubviews`启用，禁用它并且您的图像将出现（并且图像的默认视图模式应该很好）

# eclipse - 如何使用 Web 驱动程序 PHP Binding 和 selenium 独立服务器配置 Eclipse，以便我们可以从 Eclipse 运行测试用例

> ID：15241644
> 
> 赞同：2
> 
> 时间：2013-03-06T07:42:44.053
> 
> 标签：eclipse, selenium, phpunit, selenium-webdriver

我收到了很多与“如何为 java 和 selenium 配置 eclipse”相关的说明材料，但我的要求是我想将 eclipse 用于 PHP，并且我想将它与 selenium 独立服务器和 PHP 单元连接，以便我可以运行我来自 Eclipse 的硒测试用例。

我已经安装了 XAMPP，PHPUNIT。我已经下载了 selenium 独立服务器和 Eclipse for php。

任何人都可以建议如何做到这一点。

# java - 在 Java 中使用 Ruby 或 Python 库

> ID：15241645
> 
> 赞同：0
> 
> 时间：2013-03-06T07:42:45.653
> 
> 标签：java, python, ruby, jruby, jython

我想知道是否可以在 JRuby 中使用 Java 中的 Ruby gem。我找到了很多关于如何在 Ruby（使用 JRuby）中使用 Java 类的信息，但反过来却没有。在 Java中使用像 [Asciidoctor](http://asciidoctor.org/)这样的 Ruby 库的步骤是什么？是否也可以将 Java 中的所有 Python 库与[Jython](http://www.jython.org/)一起使用，例如[DocUtils](http://docutils.sourceforge.net/)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:57:08.617

您可以查看此链接以将 Ruby 嵌入 Java。作者还解释了如何从 Java 调用 Ruby Gem。

[http://javajing.com/2012/06/01/ruby-from-java.html](http://javajing.com/2012/06/01/ruby-from-java.html)

有很好的演示说明，其中包含有关如何从 Java 运行 Ruby 代码的官方 JRuby 文档的链接。

我个人只使用了 JRuby。所以我不知道如何用 Jython 来做这件事。

# javascript - 在 JavaScript 中，任何独立的内部函数是否会将“this”视为调用原始方法的对象？

> ID：15241647
> 
> 赞同：1
> 
> 时间：2013-03-06T07:42:52.783
> 
> 标签：javascript, this, ecmascript-5, ecma262

在《[JavaScript 启蒙](http://www.javascriptenlightenment.com/JavaScript_Enlightenment.pdf)》一书中（链接指向预发布版本（第 85 页），但我有已发布版本（第 6.3 章），它说了同样的话），它说任何内部函数都将`this`视为全局对象( `window`) 在 ECMA-3 中，但将在 ECMA-5 中修复。

代码如下：

[http://jsfiddle.net/javascriptenlightenment/9GJhu/](http://jsfiddle.net/javascriptenlightenment/9GJhu/)

```
var myObject = {
    func1: function() {
        console.log(this); // logs myObject
        var func2 = function() {
            console.log(this) // logs window, and will do so from this point on
            var func3 = function() {
                console.log(this); // logs window, as it’s the head object
            }();
        }();
    }  
}

myObject.func1(); 
```

但我认为当前的 Chrome、Firefox 和 node.js 应该在很大程度上实现了 ECMA-5，所以我在它们中尝试了上面的代码，它们仍然打印出 and 中的全局`func2`对象`func3`。然后我添加`"use strict";`到`func1`and 以防万一，还添加到`func2`and `func3`。代码： http: [//jsfiddle.net/9GJhu/6/](http://jsfiddle.net/9GJhu/6/) 现在在 Chrome 和 node.js 中，`this`将打印为`undefined`，而不是`myObject`. 所以按照书上的，`this`应该是`myObject`ECMA-5。上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:10:37.193

我可能是错的，但我在规范中没有看到这本书的任何含义。
根据[ECMAScript 5.1 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)10.4.3 输入功能代码

1.  如果函数代码是严格代码，则将 ThisBinding 设置为 thisArg。
2.  否则，如果 thisArg 为 null 或未定义，则将 ThisBinding 设置为全局对象。
3.  否则，如果 Type(thisArg) 不是 Object，则将 ThisBinding 设置为 ToObject(thisArg)。
4.  否则将 ThisBinding 设置为 thisArg。
5.  让 localEnv 成为调用 NewDeclarativeEnvironment 的结果，并将 F 的 [[Scope]] 内部属性的值作为参数传递。
6.  将 LexicalEnvironment 设置为 localEnv。
7.  将变量环境设置为 localEnv。
8.  令 code 为 F 的 [[Code]] 内部属性的值。
9.  使用功能代码代码和argumentsList 执行声明绑定实例化，如10.5 中所述。

根据 (1.)，由于您的`func2`and`func3`没有任何上下文，并且您指定`strict mode`您的上下文将设置为`undefined`. 没有`strict mode`并且根据 (2.)`this`将被设置为`window`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T08:11:33.547

当你使用'use strict'指令时，'this'关键字默认是'undefined'，而不是非严格模式，'this'关键字默认指向全局对象。您需要明确指定上下文。

附带说明一下，您应该只需要声明一次“使用严格”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T08:34:45.563

函数嵌套的事实并不意味着任何事情。他们继续以同样的方式工作，也没有嵌套：

```
var myObject = {
    func1: function() {
        console.log(this); // logs myObject
    }  
}
myObject.func1();

var func2 = function() {
    console.log(this) // logs window, and will do so from this point on
}();

var func3 = function() {
    console.log(this); // logs window, as it’s the head object
}(); 
```

[http://jsfiddle.net/NYr3y/2/](http://jsfiddle.net/NYr3y/2/)

```
var myObject = {
    func1: function() {
        "use strict";

        console.log(this); // logs myObject
    }  
}

myObject.func1();

var func2 = function() {
    "use strict";

    console.log(this) // logs window, and will do so from this point on

}();

var func3 = function() {
    "use strict";

    console.log(this); // logs window, as it’s the head object
}(); 
```

[http://jsfiddle.net/4B84u/2/](http://jsfiddle.net/4B84u/2/)

第一个函数使用上下文（作为方法）调用，因此“this”是 myObject。

其他函数在没有上下文的情况下调用（就像`func2()`），在这种情况下，ECMA-5 不允许通过 this 显式引用全局对象。

大多数浏览器默认不应用 ECMA-5，因为限制性更强，因此不兼容。

# caching - 每个进程的私有 nsswitch 或 nscd

> ID：15241661
> 
> 赞同：1
> 
> 时间：2013-03-06T07:44:14.960
> 
> 标签：caching, nfs, nis

我想对我的网络上的一些 NIS 性能问题进行短期修复。

我没有 root 访问权限，并且 nscd 已关闭所有缓存。

我想提供类似于本地 nscd 的功能，以允许 getpwuid 缓存其结果，避免许多昂贵的 NIS 查找（有时每次 5-10 秒）

语境：

R 在包加载期间调用 getpwuid 批次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:30:14.833

我不知道有一种简单或优雅的方式来做到这一点。一种选择是实现您自己的 getpwuid 函数并使用[LD_PRELOAD](http://www.linuxjournal.com/article/7795 "LD_PRELOAD")将其提供给 R ，但您最好让某人修复 NIS。

# jquery - 为什么fancybox第一次不绑定这段代码？

> ID：15241666
> 
> 赞同：0
> 
> 时间：2013-03-06T07:44:32.263
> 
> 标签：jquery, fancybox

我有一个输入元素和它旁边的链接。用户在输入中输入一些文本，然后单击链接进行查询以查找与他输入的内容相关的内容。结果应使用 fancybox 显示。这是我的js代码：

```
$(".srcaut").click(function() { 
        if($(this).prev("input").val() == '') {
            alert('Empty field');
            return false;
        }

        srch = $(this).attr("id").replace("srch-",'');

        $(this).attr('href',Url+'/'+srch+'/'+$(this).prev("input").val());
        $(this).fancybox();

    }).prev("input").keypress(function(even) {
         if(even.keyCode == 13) {
            $(this).next('.srcaut').click();
            return false;
        }

}); 
```

但是当用户第一次输入一些文本并单击链接或在页面加载后按“Enter”键时，fancybox 不会显示。但在那之后是作品。

问题是什么。似乎fancybox第一次没有绑定链接，但为什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T08:10:09.240

调用`.fancybox()`链接不会*显示*花式框，它只会*准备*链接以在单击时显示花式框。这就是为什么它只在第二次起作用的原因，因为在`click`处理程序中准备了精美的盒子。

您可能必须`.fancybox()`在加载文档时调用您的链接，但这引发了一个问题，即让它与基于`input`' 的内容动态构建的链接一起工作。您可能想尝试在`blur`您的`input`.

> 如何防止在链接的点击事件内的 if 条件下显示它？

在调用之前`.fancybox()`，您可以注册一个处理程序，如果为空，`click`将[停止事件传播，请参见](http://api.jquery.com/event.stopImmediatePropagation/)[http://jsbin.com/exomad/3中的示例](http://jsbin.com/exomad/3)`input`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T06:36:29.277

我正在为面临类似问题的其他人发布此内容..

就我而言，我有

```
$('#addvideos').on("click",function(){
    $(".modal").fancybox(fancybox_default);
}); 
```

fancybox_default <-- 存储花式框配置 {height,width}

# addvideos <-- 指向一个 url 元素

所以在我的情况下，当我点击 url 时配置不会第一次加载，但之后就可以工作了。（我的意思是它可以工作（它显示弹出窗口）但它不会加载弹出窗口的高度和宽度）

我不得不添加 var垃圾 = $(".modal").fancybox(fancybox_default); <-- 在 on click 处理程序之前... // 只需加载一次并将其保存在变量中...

它对我有用:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T10:57:05.517

我能够通过在为动态生成的锚标记绑定点击事件之前初始化fancybox来解决这个问题（我想即使你在调用之前初始化它也可以工作）

```
 $('#a_email' + resultId).fancybox({
                    //jq('#a_email' + resultId).fancybox({               
                    'width': '45%',
                    'height': '55%',
                    'autoScale': true,
                    'scrolling': 'no',
                    'transitionIn': 'fade',
                    'transitionOut': 'fade',
                    'type': 'iframe'
                }); 
```

然后直接调用fancybox

```
$.fancybox({                        
                        'width': '45%',
                        'height': '55%',
                        'autoScale': true,
                        'scrolling': 'no',
                        'transitionIn': 'fade',
                        'transitionOut': 'fade',
                        'type': 'iframe',
                        'href': url
                    }); 
```

有什么想法吗？

# java - 从用户那里获取输入

> ID：15241669
> 
> 赞同：-8
> 
> 时间：2013-03-06T07:44:40.460
> 
> 标签：java

我尝试使用扫描仪获取用户输入，如果用户按 Enter 键，则继续执行下一个输入语句。但它一次打印所有。

```
public class MainRDS 
{
    public static void main(String[] args) 
    {
        Scanner in = new Scanner(System.in);
        String path;
        String name;
        String ext;
        String date;

        System.out.println("Directory search by path, name, extension, content and date.");
        System.out.print("\nEnter Starting directory for the search (link c:"+"\\"+"temp) : ");
        path = in.next();

        System.out.print("\nEnter the file name (like myFile or enter for all) : ");

        if((name = in.nextLine()).length() > 0)
        System.out.print("\nEnter the file extenstion (like txt or enter for all) : ");

        if((ext = in.nextLine()).length() > 0)
        System.out.print("\nEnter last modified date (like 11/21/2012 or enter for any) : ");

        date = in.nextLine();
    }
} 
```

输出 ：

```
Directory search by path, name, extension, content and date.

Enter Starting directory for the search (link c:\temp) : c:

Enter the file name (like myFile or enter for all) : myfile

Enter last modified date (like 11/21/2012 or enter for any) : 
```

所需输出：

```
Directory search by path, name, extension, content and date.  
Enter starting directory for the search (like c:\temp): c:\temp 
Enter the file name (like myFile or enter for all):  
Enter the file extension (like txt or enter for all): txt 
Enter content to search for (like comp121 or enter for any):  
Enter last modified date (like 11/21/2013 or enter for any): 11/1/2011 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:48:06.453

删除`\n`并使用 println。让我知道它是否不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:53:42.417

尝试使用 in.nextLine() 而不是 in.next()。

# git - Jboss重启后GitBlit无法找到存储库

> ID：15241677
> 
> 赞同：3
> 
> 时间：2013-03-06T07:45:06.620
> 
> 标签：git, jboss, gitblit

我在 Jboss V7.1.1.Final 上运行 GitBlit V1.2.1 每次我重新启动 Jboss，GitBlit（无法读取/丢失）我拥有的存储库。

搜索存储库后，我在以下位置找到了一个：

```
C:\Program Files\jboss-as-7.1.1.Final\standalone\tmp\vfs\temp80c1b03732519896\gitblit.war-c0e0d54fb24b902\WEB-INF\data\git\test.git 
```

应该做些什么来确保 GitBlit 在 Jboss 重新启动后不会丢失存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T13:03:04.687

默认情况下，Gitblit WAR 将其数据存储在 webapp 文件夹中。Gitblit [WAR 设置说明](http://gitblit.com/setup_war.html)建议您在 web.xml 文件中手动指定新的**baseFolder值。**

# java - 从 JInternalFrame 在 JFrame 上启用组件

> ID：15241679
> 
> 赞同：0
> 
> 时间：2013-03-06T07:45:16.647
> 
> 标签：java, swing, netbeans

1.  我有一个 JFrame，上面有 JMenubar，它有几个 JMenu 和 JMenuItem。
    我已经设置了 allJMenu.setVisible(false) 和 allJMenuItem.setVisible(false) 并调用了 JInternalFrame(Login Form)

2.  JInternalFrame(Login Form) 如果用户名和密码正确，我必须根据登录类型（管理员、用户等）为适当的 JMenu 和 JMenuItem 设置可见性 true

3.  我应该如何实现这一目标？

我以两种方式尝试了
**第一种方式：**

```
 public class LoginForm extends javax.swing.JInternalFrame 
      {
         public LoginForm() 
        {
           initComponents();
        }

            my code......

        if(username==correct && password==correct)
        {
             //how should i set the JMenu and JMenuItem as visible=true
             //i tried the below code but does not works

           Main_JFrame  mi = new Main_JFrame();
           mi.allJMenu.setVisible(true);
           mi.allJMenuItem.setVisible(true);            //doesn't works 
```

**第二种方式：**

```
 Main_JFrame  mi1=new Main_JFrame(); 
           mi1.visibleTrue(mi1.MenuItem1);          
           mi1.visibleTrue(mi1.Menu5);            //doesn't works
        }
      } 
```

**visibleTrue**是 JFrame Form(Main_JFrame) 中的一个方法，方法如下：

```
 public void visibleTrue(Component cmp)
    {
       cmp.setVisible(true);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:19:50.383

您不需要为 JMenu 下添加的所有 MenuItem 设置 setVisible(false)。
设置 JMenu.setVisible(false) 就足够了。
您需要处理 menuBar 中的所有项目并对其调用 setVisible(true) ，如下所示

```
 private static void setComponentsEnable(final JComponent component, final boolean enabled) {
        final Component[] vComponents = component instanceof  JMenu ? ((JMenu)component).getMenuComponents() : component.getComponents();
        for (final Component vComponent : vComponents) {
            if (vComponent instanceof JMenu)
                setComponentsEnable((JMenu)vComponent, true);
            vComponent.setVisible(enabled);
        }
    } 
```

这是一个小演示

```
public class EnableComp {

    public static void main(String[] args) {
        JFrame frame = new JFrame("Some Title");
        frame.setLayout(new BorderLayout());

        JPanel panel = new JPanel(new FlowLayout());
        final JMenuBar menuBar = new JMenuBar();

        final JMenu menu1 = new JMenu("menu1");
        final JMenuItem item1 = new JMenuItem("item1");
        item1.setVisible(false);//visible false
        menu1.add(item1);
        menu1.setVisible(false);//visible false
        menuBar.add(menu1);

        final JMenu menu2 = new JMenu("menu2");
        final JMenuItem item2 = new JMenuItem("item2");
        item2.setVisible(false);//visible false
        menu2.setVisible(false);//visible false
        menu2.add(item2);
        menuBar.add(menu2);

        final JMenuItem item3 = new JMenuItem("I m added directly in menuBar");
        item3.setVisible(false);//visible false
        menuBar.add(item3);

        final JButton tempBtn = new JButton("i m simple btn in menuBar");
        tempBtn.setVisible(false);//visible false
        menuBar.add(tempBtn);

        panel.add(menuBar, BorderLayout.NORTH);

        final JButton enableBtn = new JButton("Show Menu");
        enableBtn.addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                setComponentsEnable(menuBar, true);
            }
        });

        panel.add(enableBtn, BorderLayout.SOUTH);

        frame.add(panel);
        frame.setSize(new Dimension(400,400));
        frame.setVisible(true);
    }

    private static void setComponentsEnable(final JComponent component, final boolean enabled) {
        final Component[] vComponents = component instanceof  JMenu ? ((JMenu)component).getMenuComponents() : component.getComponents();
        for (final Component vComponent : vComponents) {
            if (vComponent instanceof JMenu)
                setComponentsEnable((JMenu)vComponent, true);
            vComponent.setVisible(enabled);
        }
    }
} 
```

# javascript - 第二个处理程序不能在切换事件中运行

> ID：15241691
> 
> 赞同：1
> 
> 时间：2013-03-06T07:46:09.097
> 
> 标签：javascript, jquery

我尝试使用切换创建简单的显示/隐藏框，但是当框打开时，按钮将变为“-”，当框关闭时，按钮将变回“+”

[你可以在这里](http://jsfiddle.net/ruslyrossi/jRGGj/)查看我的 jsfiddle

我尝试使用第一个和第二个处理程序使用此代码

```
$(document).ready(function () {
    //default
    $('.content').hide();

    $('#b_1').click(function () {

        $('.content').toggle(function () {
            $('#b_1').prop('value', '-');    //first handler
        },
            function() {
            $('#b_1').prop('value', '+');    //second handler
        });

    });
}); 
```

但是第二个处理程序不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:58:39.597

我见过人们在`toggle`..中使用第二个处理程序，但我知道切换功能中没有第二个处理程序..检查[文档](http://api.jquery.com/toggle/)..（如果我错了，请告诉我）..如果它[`toggle-event`](http://api.jquery.com/toggle-event/)在 jQuery 中被弃用1.8 并在 jQuery 1.9 中删除。

无论如何，这是我将如何解决您的问题

```
$('#b_1').click(function () {

 $('.content').toggle('slow',function () {
     if($('.content').is(':visible')){
        $('#b_1').attr('value', '-');
     }else{
        $('#b_1').attr('value', '+');
     }
 });
 }); 
```

在这里工作[小提琴](http://jsfiddle.net/bipen/jRGGj/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:51:48.727

尝试

```
<script type="text/javascript">

    $(function()
    {
        $('.content').hide();

        $('#b_1').toggle(function ()
        {
            $(this).attr('value', '-');
            $(this).next('.content').show();
        },
        function()
        {
            $(this).attr('value', '+');
            $(this).next('.content').hide();
        });

    });

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:55:40.770

最好`toggle()`手动处理。

```
$('#b_1').click(function () {

    var $button = $(this);
    $('.content').toggle(function () {
        var symbol = $button.attr("value"),
            newSymbol = symbol == "+" ? "-" : "+";

        $button.attr("value", newSymbol);
    });

}); 
```

[JSF](http://jsfiddle.net/jRGGj/2/)中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T08:07:13.580

你可以试试这个：[**小提琴**](http://jsfiddle.net/jRGGj/4/)

```
$(document).ready(function () {
    var i = 0;
    $('.content').hide();
    $('#b_1').click(function () {
        if (i == 0) {
            $('.content').toggle('slow', function () {
                $('#b_1').val('-');
                i = 1;
            });
        } else if (i = 1) {
            $('.content').toggle('slow', function () {
                $('#b_1').val('+');
                i = 0;
            });
        }
    });
}); 
```

# android - onBackPressed() 第一次不工作

> ID：15241698
> 
> 赞同：2
> 
> 时间：2013-03-06T07:46:31.747
> 
> 标签：android, android-tabhost, android-tablelayout, android-tabs

当我从选项卡视图打开一个新活动但在该活动上 onBackPressed() 第一次不起作用![在此处输入图像描述](../Images/e9e38e3f8f9b4709343ddb972bb2f1d7.png)

更多代码细节添加了第一个活动意味着第一个iamge和第二个活动意味着第二个图像我正在尝试在第二个活动 **第一个活动的后退按钮按下时做其他事情**

```
 @Override
public void onBackPressed() {
    //super.onBackPressed();

    //finish();
    //Toast.makeText( getApplicationContext(),"Back pressed",Toast.LENGTH_SHORT).show();

    AlertDialog.Builder alertDialog = new AlertDialog.Builder(this.getParent()); 

    alertDialog.setTitle("Confirm Exit ..."); 
    alertDialog.setMessage("Are you sure to exit ?"); 
    alertDialog.setIcon(R.drawable.tick); 

    alertDialog.setPositiveButton("YES", new DialogInterface.OnClickListener() { 
        public void onClick(DialogInterface dialog,int which) {
            AppPreferenceStatus.setLoggedOutStatus(CurContext, true);
            finish();
            //System.runFinalizersOnExit(true);
            //System.exit(0);
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
        } 
    }); 

    alertDialog.setNegativeButton("NO", new DialogInterface.OnClickListener() { 
        public void onClick(DialogInterface dialog, int which) { 
        dialog.cancel(); 
        } 
    }); 

    alertDialog.show();

} 
```

**第二次活动**

```
@Override
public void onBackPressed() {
    super.onBackPressed();
} 
```

# mongodb - Lua 如何支持 Mongo？

> ID：15241699
> 
> 赞同：1
> 
> 时间：2013-03-06T07:46:33.877
> 
> 标签：mongodb, lua

Lua如何支持MongoDB？
我安装了[Mongol](https://github.com/bigplum/lua-resty-mongol)，它不起作用，只是提示我“连接失败：无法解析本地主机（3：找不到主机）”。

已解决：代码

`mongo = require('resty.mongol')
conn = mongo:new()
ok, err = **conn:connect('127.0.0.1')**` 

`if not ok then
    ngx.say("connect failed: "..err)
end

local db = conn:new_db_handle("weidian")
col = db:get_col("channel")
r = col.find_one({})
for k, v in pairs(r) do
    ngx.say(k)
end
conn:close()` 

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:46:29.717

您是否尝试传递 IP 地址？(127.0.0.1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T08:53:33.050

连接 mongodb 时，不需要为端口指定自定义值。

因此，您的代码应该是以下之一：

```
conn:connect( 'localhost' ) 
```

或者

```
conn:connect( '127.0.0.1' ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T16:47:06.003

我在使用 ip 进行连接的 lua-resty-mongol 遇到了同样的问题，你可能还想看看分叉，因为原始 repo 已经有一段时间没有更新了

# java - JSF p:dataTable 的奇怪行为（p:columns 中的第一个条目错误）

> ID：15241705
> 
> 赞同：14
> 
> 时间：2013-03-06T07:46:52.240
> 
> 标签：java, jsf, jsf-2, composite-component

我在第二页`p:dataTable`。左边一个主要用于选择

```
<p:dataTable id="leftTable" var="item" value="#{bean.items}"
             selection="#{bean.item}" selectionMode="single">
  <p:ajax event="rowSelect" update=":rightTable" listener="#{bean.select}"/>  
  <p:column>
    <h:outputText value="#{item.value}" />  
  </p:column>
</p:dataTable> 
```

这相当简单并且工作正常。rightTable*是*一个更复杂的，这是一个简化的例子：

```
<p:dataTable id="rightTable" var="row" value="#{bean.rows}">
  <p:columns var="col" value="#{bean.cols}">  
    <h:outputText value="#{bean.map[row.id][col.id]}"/>
  </p:columns>
</p:dataTable> 
```

好吧，这也很好用。现在我实现了一个`composite component`来替换*leftTable*。这个组件也有`selection`和`select`属性，一般来说也是有效的。`p:dataTable`调用与from 相同的方法，并设置正确的*项目*。

**但是**，这确实是一件令人讨厌的事情：如果我使用我的自定义组件，第一个单元格（第 0 列，第 0 行）中的值**总是**`null`. 这些值取自 a`Map<Long,Map<Long,String>>`并且我验证了特定的值`row.id,col.id`是在调用方法之后设置的。

我对这个问题完全一无所知，并希望真的很难回答这个问题，如果有人甚至可以帮助我更详细地**调试这个问题，我真的很感激。**

**Upate 1**：根据要求，我检查了`#{row.id},#{col.id}`：

```
95,626 | 95,528
96,527 | 96,528
97,527 | 97,528 
```

在第一个单元格中*col.id*是错误的。它应该是`527`但是是实际`626`的（它是上一个请求的值）。为什么会这样？我怎样才能得到正确的值？

**更新 2**：这是我的组件：

```
<composite:interface componentType="my.MenuDmClick">
  <composite:attribute name="actionListener" required="true"
        method-signature="void listener(javax.faces.event.AjaxBehaviorEvent)"/>
  <composite:attribute name="selection"/>
  <composite:attribute name="update/>
  <composite:attribute name="dm"/>
</composite:interface>
<composite:implementation>
  <ui:repeat var="item" value="#{cc.attrs.dm.wrappedData}">
  <li>
    <p:commandLink actionListener="#{cc.actionListener(item)}"
                   update="#{cc.attrs.update}">
      <h:outputText value="#{item.name}"/>
    </p:commandLink>
  </li>
  </ui:repeat>
</composite:implementation> 
```

这是支持bean：

```
@FacesComponent(value="my.MenuDmClick")
public class MenuDmClick extends UINamingContainer
{
  public void actionListener(Object ejb)
  {
    FacesContext context = FacesContext.getCurrentInstance();
    ValueExpression mSelection = this.getValueExpression("selection");

    if(mSelection!=null){mSelection.setValue(context.getELContext(), ejb);}
    else{throw new PropertyNotFoundException("'selection' must be a ValueExpression!");}

    MethodExpression ajaxEventListener =
         (MethodExpression) getAttributes().get("actionListener");
    ajaxEventListener.invoke(context.getELContext(), new Object[] {});
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T06:24:52.990

在尝试了通常的东西之后

*   ui:repeat 和 c:forEach
*   立即=真/假

我遇到了`process=@this`......它就像一个魅力！

```
<c:forEach var="item" items="#{cc.attrs.dm.wrappedData}">
  <li>
    <p:commandLink process="@this"
        actionListener="#{cc.actionListener(item)}" update="#{cc.attrs.update}">
      <h:outputText value="#{item.round.name}"/>
    </p:commandLink>
  </li>
</c:forEach> 
```

# backbone.js - 导入 Backbone.js 时出错

> ID：15241706
> 
> 赞同：2
> 
> 时间：2013-03-06T07:46:53.577
> 
> 标签：backbone.js, backbone-views

我刚开始学习这本在线[电子书](http://addyosmani.github.com/backbone-fundamentals/)的骨干。

但是由于我真的不明白的导入错误，我坚持创建 ToDo 应用程序......

[我从Backbone官网](http://backbonejs.org/)下载Backbone.js和backbone-min.js

在我的 index.html 中，我尝试导入 Backbone 或 Backbone-min.js 并在 Firebug 控制台中得到以下结果：

**导入 Backbone.js**

```
<script src="js/lib/zepto.min.js"></script>
<script src="js/lib/underscore.js"></script>
<script src="js/lib/backbone.js"></script>

TypeError: this.$el.off is not a function
backbone.js line 1325 : this.$el.off('.delegateEvents' + this.cid); 
```

**导入 Backbone-min.js**

```
<script src="js/lib/zepto.min.js"></script>
<script src="js/lib/underscore.js"></script>
<script src="js/lib/backbone-min.js"></script>

TypeError: this.listenTo is not a function
app.js line 34 : this.listenTo(app.Todos, 'add', this.addOne); 
```

**app.js**指的是[这个主干视图](http://addyosmani.github.com/backbone-fundamentals/#TOC)，这里是这个视图的代码摘录：

```
initialize: function() {
  this.allCheckbox = this.$('#toggle-all')[0];
  this.$input = this.$('#new-todo');
  this.$footer = this.$('#footer');
  this.$main = this.$('#main');

  this.listenTo(app.Todos, 'add', this.addOne);
  this.listenTo(app.Todos, 'reset', this.addAll);
  this.listenTo(app.Todos, 'change:completed', this.filterOne);
  this.listenTo(app.Todos,'filter', this.filterAll);
  this.listenTo(app.Todos, 'all', this.render);

  app.Todos.fetch();
}, 
```

如果您已经遇到过此类问题...我不得不承认我真的不明白为什么在尝试导入主干时会出错，而且我还不够熟练，无法理解 ListenTo 功能的问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T07:52:59.107

您必须在主干之前包含[underscore.js ：](http://underscorejs.org/)

```
<script src="underscore-min.js"></script>
<script src="backbone-min.js"></script> 
```

[http://backbonejs.org/](http://backbonejs.org/)说：

> Backbone 唯一的硬依赖是 Underscore.js (>= 1.4.3) 或 Lo-Dash。对于 RESTful 持久性，通过 Backbone.Router 支持历史记录和使用 Backbone.View 进行 DOM 操作，包括 json2.js，以及 jQuery (>= 1.7.0) 或 Zepto。

此外，如果您想在代码中使用[jQuery](http://jquery.com/)选择器 ( `$`)，也请包含 jQuery。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-02T11:55:45.813

我从 github 下载的一个项目遇到了同样的问题。我从以下位置获得了最新的脚本，现在运行良好。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.1/jquery.min.js"></script>
<script src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
<script src="http://documentcloud.github.io/backbone/backbone-min.js"></script> 
```

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T19:54:46.907

1) this.listenTo 已添加到最新版本的 Backbone 中，因此您使用的 Backbone 库可能已过时。尝试使用最新版本的 Backbone。2) this.$el : 你应该使用 jQuery。如果在添加 jQuery 之后再次出现此错误，则将 console.log(this.$el) 放在此行之上..如果它正在获取一个元素，它将打印否则 [] 或未定义。

根据官方文档，Backbone 唯一的硬依赖是 Underscore 或 Lo-Dash。但是你应该使用RequireJS来设置js文件下载的顺序。

# mysql - Mysql Bigint VS Varchar

> ID：15241708
> 
> 赞同：17
> 
> 时间：2013-03-06T07:46:54.980
> 
> 标签：mysql, sql

什么是最好的索引字段和硬盘/RAM上的空间令牌？Biginteger 或 Varchar(15) ？例如，我可以有这样的索引号：

```
from  10000001 to 45281229703 and higher... 
```

但是选择什么更好呢？同样在非索引字段上，哪种字段类型更好？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-06T07:48:08.617

`BIGINT`始终为 8 字节，`VARCHAR(15)`根据值长度为 1..16 字节，因此`BIGINT`大数字需要更少的内存，但小数字（小于 7 位）需要更多内存。此外，BIGINT 更快。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-08-24T07:29:40.903

我们已经在模拟环境中进行了测试。

1.  使用 1 BIGINT 和 1VARCHAR 参数创建。
2.  插入 30Lac 行。
3.  在两个字段上创建索引。
4.  结果是：**BIGINT**的响应速度几乎比 VARCHAR 快 **20倍。**

这是执行上述步骤的脚本：

```
Create table r5(mob bigint,m_mob varchar(30));

Create index i_d on r5(mob,m_mob);

do $$
begin
for i in 1..3000000 loop
insert into r5(mob,m_mob) values(i,i||’abc’);
end loop;
end; $$

select * from r5
where mob=2900000;

select * from r5
where m_mob=’2900000abc’; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T07:49:27.137

varchar 增加了开销：

每个字段需要存储的字符串长度（MySQL 中额外的 2 个字节 IIRC），并且在索引中需要更多处理以进行比较排序

# c# - 在 MVC4 中访问原始 http 请求

> ID：15241710
> 
> 赞同：4
> 
> 时间：2013-03-06T07:47:01.623
> 
> 标签：c#, asp.net-mvc, http, http-request

已经有很多关于在 stackoverflow 上访问 HttpRequest 的问题，但我还没有找到一个我可以使用的问题。如果有人能指出我的答案，我将不胜感激。

我的问题是我想以最简单的方式修改现有应用程序，以便添加完整的请求日志记录。我知道这可以通过 Http 模块和 IIS 日志记录或使用 Log4net 等来完成。但我不想使用任何这些技术，因为应用程序是不可预测的，所以我需要一个不需要任何配置更改的解决方案一点也不。

我已将 OnActionExecuted 添加到基本控制器。

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    // todo: log request from filter context ....
    base.OnActionExecuted(filterContext);
} 
```

在上面的“待办事项”部分，我希望读取原始 http 请求并将其保存到数据库文件中。记录到数据库很简单，但是将 http 请求序列化或以其他方式转换为字符串的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T07:49:32.400

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    var request = filterContext.HttpContext.Request;
    var inputStream = request.InputStream;
    inputStream.Position = 0;
    using (var reader = new StreamReader(inputStream))
    {
        string headers = request.Headers.ToString();
        string body = reader.ReadToEnd();
        string rawRequest = string.Format(
            "{0}{1}{1}{2}", headers, Environment.NewLine, body
        );
        // TODO: Log the rawRequest to your database
    }
} 
```

哦，如果您开始这样做，我希望您已经计划好在服务器上购买额外存储所需的预算。因为如果您开始在每个请求上记录整个原始请求，您将需要存储。

# android - 确定Android浏览器历史记录中的某个网址是通过WIFI还是3g互联网访问的

> ID：15241712
> 
> 赞同：0
> 
> 时间：2013-03-06T07:47:04.413
> 
> 标签：android, url, browser

我们可以确定Android浏览器历史记录中的网址是通过WIFI还是3g互联网访问的？我正在收集浏览器历史记录，我需要确定上次访问特定 URL 的方式...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:55:36.163

不，您看不到哪个 url 是通过哪个连接访问的，您可以做的是获取访问时间，并从您的应用程序中听到诸如 wifi on 或 3g on match 之类的意图，当您了解时

# c - 传递二维数组进行线程处理

> ID：15241717
> 
> 赞同：0
> 
> 时间：2013-03-06T07:47:15.923
> 
> 标签：c, multidimensional-array, pthreads

K 和 THREADS 任意定义如下：

```
#define K 1000
#define THREADS 2 
```

假设我负责用一个名为的二维数组做一些事情：

```
long A[K][K]; 
```

我需要将这个以及一个整数传递给一个函数的多个线程实例，所以我制作了这个结构：

```
typedef struct tdata {
    long *(*C)[K];
    int nt;
} tdata; 
```

然后我按照标准程序启动 POSIX 线程并执行以下操作：

```
void threader(long A[K][K]) {    
    pthread_t p[THREADS];
    tdata d[THREADS];
    int i;

    for(i=0;i<THREADS;++i) {
        d[i].nt = i;
        d[i].C = &A;
        pthread_create(&p[i],NULL,func,&d[i]);
        pthread_join(p[i],NULL);
    }
} 
```

然后在我的函数中，我尝试访问上述数组，如下所示：

```
void *func(void *arg) {
   tdata *data=arg;
   int a, b;
   ...
   for(a=0; a<K; ++a)
      for(b=0; b<K; ++b)
         long access = (*(data->C))[a][b];
   ...
   return 0; 
} 
```

发生的事情是我最终在程序段出现故障和死亡之前检索了一些不稳定的数字。我怀疑我在将数组传递给 func 方面做错了什么。谁能给我一个关于我应该用 A[K][K] 做什么的线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:29:11.243

正如 cnicutar 在上面的评论中提到的那样，`long *(*C)[K];`确实应该`long (*C)[K];`使用`data->C[a][b]`而不是访问`(*(data->C))[a][b]`。

此外，我还必须更改`d[i].C = &A;`为`d[i].C = A;`in `threader`，我这样做了，现在程序可以正常运行。

# javascript - 使用 javascript 的整数值的最接近值或使用 javascript 制作圆形图

> ID：15241719
> 
> 赞同：0
> 
> 时间：2013-03-06T07:47:20.753
> 
> 标签：javascript, integer, settimeout

我正在使用 javascript 倒计时函数在名为 sec 的文本框中显示时间

我有两个按钮 prev 和 next 如果我按下 prev 按钮，我想减去 10 个数字，如果我单击 next 按钮，则添加 10 个数字脚本很好并且可以完美地计算数字，但我需要将添加的数字更改为整数就像如果秒值是 56 并且我单击上一个按钮，所以负值将是 46，但我需要它来更改 40。所以如果秒为 46，下一个按钮将添加 10 个数字并变为 56，但我需要它60起这个怎么办？这是我的脚本

```
<script type="text/javascript">
var t;

function countdown()
{
    $('#sec').val(parseInt($('#sec').val()) + 1);
    t = setTimeout("countdown();",1000);
    sec = document.getElementById('sec');
    if($('#sec').val()>=1 && $('#sec').val()<10)    {$('.thought').load('somefile.php?limit=0');    }
    else if($('#sec').val()>=10 && $('#sec').val()<20){$('.thought').load('somefile.php?limit=1');}
    else if($('#sec').val()>=20 && $('#sec').val()<30){$('.thought').load('somefile.php?limit=2');}
    else if($('#sec').val()>=30 && $('#sec').val()<40){$('.thought').load('somefile.php?limit=3');}
}

$(document).ready(function(){
    countdown();
    $('.thought_prev_btn').click(function(){
        var second = Math.floor(parseInt($('#sec').val()) - 10);
        $('#sec').val(second);
     });
});
</script> 
```

我使用`math.floor()`了函数，但它只适用于十进制值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:51:10.170

要使用除单位以外的任何精度的`floor`和`ceil`，除以相关的 10 次方，然后再乘以。我喜欢使用这些辅助函数：

```
function floor(num,power) {
    var p = Math.pow(10,power||0);
    return Math.floor(num/p)*p;
} 
```

`function ceil`是相似的，只是用`Math.ceil`而不是`Math.floor`。

然后我可以打电话，例如，`floor(123,1)`我会得到`120`。
`floor(12345,3)`将返回`12000`。
`floor(12.345,-1)`将返回`12.3`

基本上，第二个参数是小数点左边的位置数，该数字应该被截断。

# wcf - 在 WCF 服务中获取证书和用户信息

> ID：15241727
> 
> 赞同：4
> 
> 时间：2013-03-06T07:47:50.540
> 
> 标签：wcf, .net-4.5

我有一个托管在 IIS 中的 WCF 服务。与服务通信的客户必须拥有我们公司的客户证书之一。该服务使用证书来识别客户端并处理访问。

现在，我还希望客户端使用用户名和密码进行身份验证，以及具有双重身份验证的额外安全层。用户凭据将与证书一起用于识别客户端以处理访问。

我希望我唯一需要做的就是从客户端发送用户凭据，但我不知道如何在服务中获取它们。

**仅使用证书的工作代码：**

```
var x509ClaimSet = OperationContext.Current.ServiceSecurityContext.AuthorizationContext.ClaimSets.FirstOrDefault() as X509CertificateClaimSet;
if (x509ClaimSet == null || x509ClaimSet.X509Certificate == null)
    throw AccessDeniedException();

// throws AccessDeniedException if no client can be found
var clientId = GetClientId(x509ClaimSet.X509Certificate); 
```

现在我正在尝试使用以下方式从客户端发送用户凭据：

```
var client = new ServiceClient();
client.ClientCredentials.UserName.UserName = "Foo";
client.ClientCredentials.UserName.Password = "Bar"; 
```

如何在服务中获取此用户名和密码？

当前服务配置为：

```
<configuration>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="DefaultBehavior">
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceCredentials>
            <clientCertificate>
              <authentication certificateValidationMode="ChainTrust" />
            </clientCertificate>
            <serviceCertificate findValue="64343ee2c8338518e78ba698f3936dc92c90db57" x509FindType="FindByThumbprint" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <bindings>
      <wsHttpBinding>
        <binding name="DefaultBinding" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="Transport">
            <transport clientCredentialType="Certificate" />
            <message clientCredentialType="UserName" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>

    <services>
      <service name="Service" behaviorConfiguration="DefaultBehavior">
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="DefaultBinding" contract="IService" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
  </system.serviceModel>
</configuration> 
```

# php - 通过phpexcel读取前导零的电话号码

> ID：15241733
> 
> 赞同：0
> 
> 时间：2013-03-06T07:48:11.457
> 
> 标签：php, phpexcel

我想用 Phpexcel 读取一个 excel 文件并将数据插入数据库，我可以读取所有内容并且它工作正常但是当我看到我的数据库保存的所有电话号码没有前导零时，我无法通过 Phpexcel 读取前导零的电话号码像这样：0212365498 保存为 212365498

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-16T21:43:45.747

如果您从 CSV 文件导入，您可以使用值绑定器来保留任何前导零。这就是我实施修复的方式。

创建了一个名为“BindValueAsString”的类

```
class BindValueAsString extends PHPExcel_Cell_DefaultValueBinder implements PHPExcel_Cell_IValueBinder
{
    public function bindValue(PHPExcel_Cell $cell, $value = null)
    {
        $cell->setValueExplicit($value, PHPExcel_Cell_DataType::TYPE_STRING);
        return true;
    }
} 
```

在加载 CSV 文件之前设置值绑定器

```
$objReader    = PHPExcel_IOFactory::createReader('CSV');
PHPExcel_Cell::setValueBinder(new BindValueAsString());
$objPHPExcel  = $objReader->load('file.csv');
$worksheet    = $objPHPExcel->getActiveSheet();
$dataAsString = $worksheet->toArray(); 
```

就是这样。或者您可以升级到 1.8.1 版本，[此处修复了前导零](https://github.com/PHPOffice/PHPExcel/commit/d4a641c5c70df1aac580a60fbb0dbee3bca1e3e1)

# node.js - MongoDB，elasticsearch URL 索引

> ID：15241737
> 
> 赞同：0
> 
> 时间：2013-03-06T07:48:36.223
> 
> 标签：node.js, mongodb, elasticsearch

我是 Mongodb 和 ElasticSearch 的新手。我的要求是允许用户为整页或部分页面添加书签。

我处理了前端，但想知道如何设计后端..即如何将网页详细信息存储在*mongodb*和使用弹性搜索的索引中。将整个 Web 内容存储在 mongodb 中还是仅存储一个 url 是一个好主意。如果它只是一个 url，那么当我们进行 restful 调用时，Elasticsearch 是如何找到 url 内的关键字的。

珍惜你的时间。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:57:08.777

恕我直言，信息太少，无法完全回答。你确定你需要 MongoDB 和 ElasticSearch 吗？我不会低估开发和运营的开销。

在即将发布的版本中，MongoDB 2.4 将具有（有些有限的）全文搜索功能。

ElasticSearch 可以像数据库一样执行“常规” [GET 查询。](http://www.elasticsearch.org/guide/reference/api/get.html)要在特定字段（如 URL）内进行搜索，请参阅[SEARCH 文档](http://www.elasticsearch.org/guide/reference/api/search/)并充分利用 *（通配符）和 ~（模糊搜索）。

# titanium - 如果应用程序未安装在 android/iphone 上，则将用户带到应用商店

> ID：15241739
> 
> 赞同：1
> 
> 时间：2013-03-06T07:48:45.147
> 
> 标签：titanium, titanium-mobile

我正在使用钛构建一个适用于 android 和 i-phone 的应用程序。我的应用程序的一部分在用户点击浏览器中的链接时启动（例如，当用户在浏览器中键入链​​接并按下开始按钮时，这将启动我的应用程序）现在问题是我的应用程序是否尚未安装在我想发送的手机上用户到 android/apple 应用商店，以便用户可以在访问 URL 之前下载应用并安装它。

如何做到这一点请帮助我，因为我是钛新手。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:27:38.433

您正在寻找自定义 URL 方案。尽管如果安装了应用程序，这将有效。

对于 iOS，检查 (project)/build/iphone 文件夹中的 Info.plist 文件并查找 CFBundleURLSchemes 键。它在数组元素下列出的值是为自定义 URL 分配的名称。如有必要，您可以更改它，但仅知道它对您来说可能就足够了。我认为默认值基本上是您的小写项目名称。

对于可能需要此问题的其他人，以下示例使用您可以传递给应用程序的参数。

获得该名称后，在 URL 中使用它并添加 :// 后跟您想要的任何内容：

```
mybundleurlscheme://foobar?attribute=value&another_attribute=value2 
```

在您的应用程序中，使用 Ti.App.getArguments() 找出传递给程序的内容。这里需要注意的是检测启动和暂停/恢复活动之间的区别。

最后我玩这个，暂停/恢复最终会在 Ti.App.getArguments() 中留下相同的值，这使得正确检测新的启动与恢复活动变得更加困难。

这里有几个指针：

保存 Ti.App.getArgumets() 的副本以供以后比较为“恢复”事件（不是“恢复”事件）添加应用侦听器并检查 Ti.App.getArguments()。该值在“恢复”事件期间（应用程序准备恢复时）尚不可用，但在“恢复”事件期间（应用程序已恢复时）。

当“恢复”事件的值与您最初保存的值相同时，用户执行了暂停/恢复，或者第二次启动了相同的自定义 URL。在我的场景中，我可以通过处理相同但 YMMV 来获得。这是我尝试过的一个项目的代码片段。它来自几个 SDK 版本，所以现在也许有更好的方法：

```
// Save initial launch command line arguments
Ti.App.launchURL = '';
Ti.App.pauseURL = '';
var cmd = Ti.App.getArguments();
if ( (getTypeOf(cmd) == 'object') && cmd.hasOwnProperty('url') ) {
    Ti.App.launchURL = cmd.url;
    Ti.API.info( 'Launched with url = ' + Ti.App.launchURL );
}

// Save launch URL at the time last paused
Ti.App.addEventListener( 'pause', function(e) {
    Ti.App.pauseURL = Ti.App.launchURL;
});

// After app is fully resumed, recheck if launch arguments
// have changed and ignore duplicate schemes.
Ti.App.addEventListener( 'resumed', function(e) {
    Ti.App.launchURL = '';
    cmd = Ti.App.getArguments();
    if ( (getTypeOf(cmd) == 'object') && cmd.hasOwnProperty('url') ) {
        if ( cmd.url != Ti.App.pauseURL ) {
            Ti.App.launchURL = cmd.url;
            Ti.API.info( 'Resumed with url = ' + Ti.App.launchURL );
        }
    }
}); 
```

对于 Android：在 SDK 3.0 中，无需创建自定义 AndroidManifest.xml，只需打开您的 tiapp.xml 并找到您的节点，并确保将其添加到其中：

```
<activity
            android:name=".MobileappActivity"
            android:label="MobileApp"
            android:theme="@style/Theme.Titanium"
            android:configChanges="keyboardHidden|orientation"
        >
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                     <category android:name="android.intent.category.DEFAULT" />
                     <category android:name="android.intent.category.BROWSABLE" />
                <category android:name="android.intent.category.LAUNCHER" />
                     <data  android:scheme="Mobileapp" />
            </intent-filter>
        </activity> 
```

# android - 支持或 ActionBarSherlock 的主题 ActionBar 选项卡

> ID：15241742
> 
> 赞同：1
> 
> 时间：2013-03-06T07:48:55.787
> 
> 标签：android, xml, themes, actionbarsherlock

几天来，我一直在尝试`ActionBar`在我的应用程序中设置主题，但我根本无法获得任何结果。我必须有一些非常小的东西。

然而，下面的代码会产生一个 red `ActionBar`，但`TabBar`根本没有设置样式。如果我将父级更改`Theme.PiVi`为另一个，`TabBar`则在相应主题中设置样式。

我正在测试的设备是运行 Android 4.0.3 (API 15) 的 HTC Sensation

我没有覆盖`android:theme`清单中其他任何地方的属性。

AndroidManifest.xml（截断）

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.PiVi"> 
```

res/values-v14/themes.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="Theme.PiVi" parent="@style/Theme.Sherlock.Light.DarkActionBar">
        <item name="actionBarStyle">@style/Widget.PiVi.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.PiVi.ActionBar</item>

        <item name="actionBarTabBarStyle">@style/Widget.PiVi.ActionBar.TabBar</item>
        <item name="android:actionBarTabBarStyle">@style/Widget.PiVi.ActionBar.TabBar</item>

        <item name="actionBarTabTextStyle">@style/Widget.PiVi.ActionBar.TabText</item>
        <item name="android:actionBarTabTextStyle">@style/Widget.PiVi.ActionBar.TabText</item>

        <item name="actionBarTabStyle">@style/Widget.PiVi.ActionBar.TabView</item>
        <item name="android:actionBarTabStyle">@style/Widget.PiVi.ActionBar.TabView</item>
    </style>

</resources> 
```

res/values-v14/styles.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="Widget.PiVi.ActionBar" parent="@style/Widget.Sherlock.ActionBar">
        <item name="android:background">#FFFF0000</item>
    </style>

    <style name="Widget.PiVi.ActionBar.TabBar" parent="@style/Widget.Sherlock.ActionBar.TabBar">
        <item name="android:background">#FFFF0000</item>
    </style>

    <style name="Widget.PiVi.ActionBar.TabText" parent="@style/Widget.Sherlock.ActionBar.TabText">
        <item name="android:color">#FFFF0000</item> 
    </style>

    <style name="Widget.PiVi.ActionBar.TabView" parent="@style/Widget.Sherlock.ActionBar.TabView">
        <item name="android:background">#FFFF0000</item>
    </style>

</resources> 
```

# sql - 如何获取最大日期（每个主键）并从另一个表中获取它的区别？

> ID：15241745
> 
> 赞同：1
> 
> 时间：2013-03-06T07:49:04.250
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在下面有这个示例数据（表1）：

```
PKEY   DATE
----   ----
ABC1   2/13
CFG5   1/05
POK9   1/10 
```

我从另一个表（table2）中获得了这些日期：

```
PKEY   REF#   DATE
----   ----   ----
1      ABC1   2/14
2      ABC1   2/20
3      ABC1   3/01
4      CFG5   3/05
5      CFG5   2/10
6      ABC1   2/25 
```

我想从**table2**（**每个 REF#**）获取**最大**日期，并从**table1获取与日期的****差异**。显示以下结果。

 ******```
REF#   DIFF   
----   ----
POK9    55
CFG5    54
ABC1    21  [ *note: this is equal to datediff(day,table1.DATE,getdate()) ] 
```

*另外，如果表 2 中不存在 REF#（如上例中的第 3 行），我想使用**今天的日期（从表 1 中扣除日期）。**希望这是有道理的..让我知道是否有任何不清楚的地方，以便我立即编辑..

**更新：这是我迄今为止尝试过的..但仍然不完整..感谢您的辛勤工作

```
select t1.[REF#]
from table1 as t1
join table2 as t2
on t1.[REF#] COLLATE DATABASE_DEFAULT = t2.[REF#] COLLATE DATABASE_DEFAULT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:57:22.890

```
WITH recorddates
AS
(
    SELECT  PKEY, REFNo, DATE,
            ROW_NUMBER() OVER (PARTITION BY RefNO
                                ORDER BY DATE DESC) rn
    FROM    table2
)
SELECT  a.PKEY, 
        datediff(day,a.DATE,b.date) 
FROM    table1 a
        INNER JOIN recorddates b
            ON a.PKey = b.RefNo
WHERE   b.rn = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T08:14:33.570

```
SELECT t1.PKEY, CASE WHEN o.DATE IS NULL 
                     THEN DATEDIFF(DAY, t1.DATE, GETDATE()) 
                     ELSE DATEDIFF(DAY, t1.DATE, o.DATE) END AS DIFF
FROM dbo.table1 t1 OUTER APPLY (
                                SELECT MAX(t2.Date) AS Date
                                FROM dbo.table2 t2     
                                WHERE t1.PKEY = t2.REF# 
                                ) o 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d6913/1)上的演示[](http://sqlfiddle.com/#!3/d6913/1)

 **或没有 APPLY() 运算符

```
SELECT t1.PKEY, (SELECT CASE WHEN MAX(o.Date) IS NULL 
                             THEN DATEDIFF(DAY, t1.Date, GETDATE()) 
                             ELSE DATEDIFF(DAY, t1.Date, MAX(o.Date)) END AS DIFF
                 FROM dbo.test27 o
                 WHERE t1.PKEY = o.REF#
                 ) AS DIFF                               
FROM dbo.test26 t1 
```

用你的标准查询

```
SELECT *
FROM (
      SELECT t1.PKEY, (SELECT CASE WHEN MAX(o.Date) IS NULL 
                              THEN DATEDIFF(DAY, t1.Date, GETDATE()) 
                              ELSE DATEDIFF(DAY, t1.Date, MAX(o.Date)) END AS DIFF
                       FROM dbo.test27 o
                       WHERE t1.PKEY = o.REF#
                       ) AS DIFF                               
      FROM dbo.test26 t1
      ) s
WHERE s.DIFF BETWEEN 110 AND 120 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T08:35:22.297

像这样的东西？

```
select a.pkey
      ,datediff(day, max(a.date), coalesce(max(b.date), getdate())) as diff 
  from table1      a
  left join table2 b on(b.ref# = a.pkey)
 group 
    by a.pkey; 
```

编辑评论：您应该能够像这样过滤：

```
select a.pkey
      ,datediff(day, max(a.date), coalesce(max(b.date), getdate())) as diff 
  from table1      a
  left join table2 b on(b.ref# = a.pkey)
 group 
    by a.pkey
having datediff(day, max(a.date), coalesce(max(b.date), getdate())) between 110 
                                                                        and 120; 
```

或通过像这样包装语句：

```
select *
  from (select a.pkey
              ,datediff(day, max(a.date), coalesce(max(b.date), getdate())) as diff 
          from table1      a
          left join table2 b on(b.ref# = a.pkey)
         group 
            by a.pkey
       )
 where diff between 110 and 120; 
```********

# c# - process.StandardOutput.ReadToEnd() 返回的空白输出

> ID：15241751
> 
> 赞同：0
> 
> 时间：2013-03-06T07:49:21.573
> 
> 标签：c#, process

我正在为闭包编译器编写一个包装类，并且通过`process.StandardOutput.ReadToEnd()`编写以下代码得到空字符串。

```
 public class ClosureCompiler
    {
        ProcessStartInfo psi = new ProcessStartInfo();
        string _commandpath;
        public ClosureCompiler(string commandpath)
        {
            _commandpath = commandpath;

            psi.FileName = "java.exe"; 

            psi.UseShellExecute = false;
            psi.RedirectStandardOutput = true;
        }

        public string Compile(string sourcefile)
        {
            psi.Arguments = " -jar " + _commandpath + " --js " + sourcefile; // +" --js_output_file " + destinationfile + "";

            var process = Process.Start(psi);

            process.WaitForExit();
            return process.StandardOutput.ReadToEnd();
        }
    } 
```

但是当我从标准输出上显示的命令行输出运行命令时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:40:22.840

更改行的顺序 process.WaitForExit(); 和 process.StandardOutput.ReadToEnd(); WaitForExit 完成后， process.StandardOutput 已经“死”了。

你的代码（方法编译）应该是这样的：

```
var process = Process.Start(psi);
string stdOutput = process.StandardOutput.ReadToEnd();
process.WaitForExit();
return stdOutput; 
```

您还可以注册委托以使用[Process.OutputDataReceived](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)事件接收输出数据

# css - 输出百分比更少

> ID：15241753
> 
> 赞同：0
> 
> 时间：2013-03-06T07:49:24.430
> 
> 标签：css, less

所有，我有一些代码在更少的时间内循环。但是，如果我将其更改`px`为“%”，则 less 无法编译 less 文件。我该怎么做呢？谢谢。

```
@iterations: 100;

// helper class, will never show up in resulting css
// will be called as long the index is above 0
.loopingClass (@index) when (@index > 0) {

    // create the actual css selector, example will result in
    // .myclass_30, .myclass_28, .... , .myclass_1
    (~".span@{index}") {
        // your resulting css
        width: @index px;//can not change px to % , please help me.
    }

    // next iteration
    .loopingClass(@index - 1);
}

// end the loop when index is 0
.loopingClass (0) {}

// "call" the loopingClass the first time with highest value
.loopingClass (@iterations); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:52:51.850

我找到了 ！

```
width: percentage(@index *0.01); 
```

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:39:15.537

很高兴您找到了解决方案。这是另一种方法：

```
width: @index*1% 
```

# android - 如何将多个图像附加到电子邮件？

> ID：15241760
> 
> 赞同：3
> 
> 时间：2013-03-06T07:49:53.627
> 
> 标签：android, image, email, android-intent

我正在尝试将多个图像附加到电子邮件中。

我已经尝试了下一个代码，但我不知道我做错了什么。

我需要通过您将看到的整数数组调用图像并将它们附加到电子邮件中。

一些类看起来像这样：

```
Integer[] images = {
        R.drawable.image1,
        R.drawable.image2,
        R.drawable.image3,
        R.drawable.image4 };

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){

    case R.id.bSendEmail:

        Intent emailintent2 = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
        emailintent2.setType("plain/text");
        emailintent2.putExtra(Intent.EXTRA_EMAIL, emailaddress2);
        emailintent2.putExtra(Intent.EXTRA_SUBJECT, corsub);
        emailintent2.putExtra(Intent.EXTRA_TEXT, message2);

        ArrayList<Uri> uris = new ArrayList<Uri>();

        uris.add(Uri.parse("android.resource://" + getPackageName() + "/" + images[0]));
        uris.add(Uri.parse("android.resource://" + getPackageName() + "/" + images[1]));
        uris.add(Uri.parse("android.resource://" + getPackageName() + "/" + images[2]));
        uris.add(Uri.parse("android.resource://" + getPackageName() + "/" + images[3]));

        emailintent2.putExtra(Intent.EXTRA_STREAM, uris);
        startActivity(emailintent2);

     break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:52:22.647

坏消息。根本不支持。

您是否考虑过创建附件的 ZIP 存档并附加存档？

（注意：即使这对我来说目前还不够好，但许多人似乎能够忍受它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:58:49.453

利用

```
emailintent2.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris); 
```

代替

```
emailintent2.putExtra(Intent.EXTRA_STREAM, uris); 
```

使用文件

```
private String root = Environment.getExternalStorageDirectory().getPath()
            + Tags.DIRECTORY_PATH;

 path = new ArrayList<String>();

            File f = new File(root);

            File[] files = f.listFiles();

            if (!root.equals(root))

            {

                item.add(root);

                path.add(root);

                item.add("../");

                path.add(f.getParent());
            }
            for (int i = 0; i < files.length; i++)

            {

                File file = files[i];

                path.add(file.getPath());

                if (file.isDirectory())

                    item.add(file.getName() + "/");

                else

                    item.add(file.getName());

  ArrayList<Uri> uris = new ArrayList<Uri>();
            for (String file : path) {
                File fileIn = new File(file);
                Uri u = Uri.fromFile(fileIn);
                uris.add(u);
            } 
```

# visual-studio-2008 - 如何在运行时使用 64 位编译器编译 32 位 VC++ 代码？

> ID：15241767
> 
> 赞同：0
> 
> 时间：2013-03-06T07:50:13.503
> 
> 标签：visual-studio-2008, visual-c++, compiler-construction

我正在使用 64 位 VS-2008 编译器来编译代码，它会生成 64 位二进制文​​件。但是我有一个应该构建为生成 32 位二进制文​​件的模块。

是否可以使用 64 位编译器编译和生成 32 位二进制文​​件。

如果是，那么我们需要指定什么选项，以便在运行时 64 位编译器将代码视为 32 位并生成 32 位二进制文​​件。

PS：我正在使用 VS 2008 编译器（amd64/Bin/cl.exe）。我首先指定编译器（即 64 位），然后编译我的所有模块。

谢谢，尼基尔

# android - 拒绝 Xmpp 中的请求 - 从名册中删除条目

> ID：15241775
> 
> 赞同：1
> 
> 时间：2013-03-06T07:50:54.837
> 
> 标签：android, xmpp

在 XMPP 中，当我向其他用户发送好友请求时，如果其他人想要拒绝它，则应删除名册中的条目，但我无法从用户中删除该条目。它给了我强制关闭（空指针异常）

这是我的拒绝按钮代码

```
btn_Deny = (Button)findViewById(R.id.btn_manageNotification_DENY);
        btn_Deny.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Presence unsubscribe = new Presence(Presence.Type.unsubscribed);
                unsubscribe.setTo(id);              
                connection.sendPacket(unsubscribe);

                /*String message = mXmconn.removeFriend(subID, CMMStaticVariable.CommonConnection);
                System.out.println(message);*/

                Intent returnBack = new Intent(ManageNotification.this, UserMenuActivity.class);
                startActivity(returnBack);
                finish();               
            }
        });     
    } 
```

删除好友

```
public String removeFriend(String jid, XMPPConnection connection){
        roster = connection.getRoster();
        String message = "";
        try {
            RosterEntry rosterEntry = roster.getEntry("chamak@abec.info.com");
            System.out.println("rosterEntryy"+rosterEntry.toString());

            roster.removeEntry(rosterEntry);
            message = "You have denied the friend request";
        } catch (XMPPException e) {
            e.printStackTrace();
            message = "Exception";
        }
        return message;
    } 
```

它在 rosterEntry = null 处给出空指针；

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:27:34.213

XMPP-CORE 定义服务器必须在拒绝订阅请求时从用户名册中删除名册项。因此，当您尝试请求它时，该项目甚至不应该在那里。

从规范：

> 注意：如果联系人的服务器先前将用户添加到联系人的名册以进行跟踪，则此时必须删除相关项目。

[你可以在这里](http://xmpp.org/rfcs/rfc3921.html#int-sub-alt)阅读更多。

# windows-phone-8 - 在 Windows Phone 8 上查找受限 API 调用

> ID：15241776
> 
> 赞同：0
> 
> 时间：2013-03-06T07:50:56.550
> 
> 标签：windows-phone-8, marketplace

大约两个月以来，我一直在尝试让一个 WP8 应用程序在 Marketplace 中获得认证，并且每次使用 5.1.4 代码和“每次都静默退出”错误都会反弹回来。我能想象到的唯一会导致此错误的是潜伏在我的项目或包含库中的某个地方的受限调用（即使实际上没有调用代码，只要将它放在链接库中就足以触发静默退出）。

我已经在模拟器和物理设备上对其进行了测试，它就像一个魅力。不幸的是，受限的 API 检查只发生在 Marketplace 安装的应用程序上。即使它确实崩溃了，我也有一个顶级的“未处理的异常”处理程序来连接以写入崩溃数据（在我的所有应用程序中使用）。由于它立即崩溃，它永远不会弹出一条消息给我发电子邮件。

WP7 在 Store Test Kit（和提交时）中有一个功能，可以进行静态分析以检查被禁止的调用，但现在 WP8 似乎缺少这个功能。

有谁知道解决这个问题的方法？是否有我不知道的工具来检测问题？我可以强制模拟器或我自己的物理设备向我展示检测问题以提供更多数据吗？我无计可施！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:59:51.670

商店测试套件**仍然**存在。不过找起来有点麻烦。在 Visual Studio 的解决方案资源管理器中右键单击您的应用项目。

这似乎有点违反直觉，但是当您按照“单击下面的运行测试按钮运行自动化测试用例”时，自动化测试用例仍然会进行静态分析（.NET 和本机代码）。结果显示在“XAP 包要求”行中，如下所示。

![WP8 商店测试套件图片](../Images/c3f1625a6990075277a37743624d498b.png).

您确定要记录所有异常，即使是后台线程？

现在你有一个测试版的应用程序，你应该能够（最终）在 Dev Portal 上看到崩溃日志。

# c# - 从数据表插入 SQL

> ID：15241783
> 
> 赞同：0
> 
> 时间：2013-03-06T07:51:41.160
> 
> 标签：c#, .net, sql-server-ce

我有一个问题。我想将数据从数据表传输到 sql。将从 Web 服务接收到的数据传输到数据表中。我正在使用循环执行此操作。我不想使用循环执行此操作。我如何做？我的代码；

```
DataTable gelendata = new DataTable();

private void cari_aktar()
{
    SqlCeConnection dataset_baglanti = conn.baglan();

    ARMINE_SHOP.WebReference.bulten terminal = new ARMINE_SHOP.WebReference.bulten();

    gelendata = terminal.CARILER_MAGAZACILIK("armine_webservice", "pass***", "MikroDB_V14_ARMINE").Tables[0];

    foreach (datarow row in gelendata.rows)
    {
        k = k + 1;
        progressbar1.value = k;

        if (row["cari_kod"] == dbnull.value)
        {
            cari_kod = "";
        }
        else
        {
            cari_kod = (string)row["cari_kod"];
        }
        sqlcecommand cari_ekle = new sqlcecommand("ınsert ınto carı_hesaplar (cari_kod) values (@cari_kod)", dataset_baglanti);
        cari_ekle.parameters.clear();
        cari_ekle.ExecuteNonQuery();
    } 
```

我试过代码

```
SqlCeDataAdapter da = new SqlCeDataAdapter();

da.InsertCommand =new SqlCeCommand("INSERT INTO CARI_HESAPLAR (cari_kod) VALUES (@cari_kod)", dataset_baglanti);

da.InsertCommand.Parameters.Add("@cari_kod", SqlDbType.NVarChar, 50, "cari_kod");

da.Update(terminal.CARILER_MAGAZACILIK("armine_webservice","pass***", "MikroDB_V14_ARMINE")); 
```

等待您的帮助...

感谢你....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:42:40.483

我不知道你是否可以在 SqlCe 中使用它，但在 MsSqlConnection 中你可以像这样使用

```
SqlCommandBuilder cmdb = (SqlCommandBuilder)this.CreateCommandBuilder();
cmdb.DataAdapter = (SqlDataAdapter)this.CreateDataAdapter(SQL, connection);
cmdb.RefreshSchema();
SqlDataAdapter dta = cmdb.DataAdapter;
dta.InsertCommand = cmdb.GetInsertCommand(true);
dta.UpdateCommand = cmdb.GetUpdateCommand(true);
dta.DeleteCommand = cmdb.GetDeleteCommand(true);
dta.Update(dataTable); 
```

这是从我自己的框架中复制的，以便于理解：

*   CreateCommandBuilder 是 CommandBuilder 实例化器
*   CreateDataAdapter 是 DataAdapter Instancer，其中 SQL 是 'SELECT * FROM tablename WHERE ??'
*   GetInsertCommand 是一个 INSERT 命令

# c++ - 将数字添加到 char * 的结果是什么？

> ID：15241788
> 
> 赞同：2
> 
> 时间：2013-03-06T07:52:00.273
> 
> 标签：c++, pointers

我正在从 C++ 转换一个算法，我已经 10 多年没有接触过，我只是想知道是否有人可以告诉我`(char *)+2`结果是什么？

确切的代码：

```
uint32_t SuperFastHash (const char * data, int len) {
    ...
    tmp = (get16bits (data+2) << 11) ^ hash; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T07:52:41.753

它给出了一个指针，该指针在字符串/数组中比`data`.

例如，如果`data`指向`"hello world"`，`(data + 2)`则将指向第一个字母`l`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:57:46.743

它与 &data[2] 相同。

数组的第三个成员的地址。

# php - 谷歌自己的 php 库中的 Google Moments 无法正常工作

> ID：15241789
> 
> 赞同：1
> 
> 时间：2013-03-06T07:52:06.477
> 
> 标签：php, google-plus

我一直在努力使用 google 的 php 库，其最新版本可在他们自己的网站上找到。虽然他们提供的简单 google plus 示例工作正常（这是一个具有`GET`功能的基本登录），但无法通过 php 中的应用程序添加时刻活动 - 至少对我来说不是。他们自己的示例不起作用（示例可以在库中检索：examples/moments/simple.php）

有人[在这里提供了答案，](https://stackoverflow.com/questions/15164949/google-unable-to-insert-moment#comment21361856_15167103)但是如果我按下他们提供的按钮演示也不起作用（授权很好，发布不会产生任何动作。

有没有人有关于如何更改自己的 php 文件以使其工作的建议？我厌倦了删除所有代码并将其重置为基本操作：至少我没有收到 oauth 或 php 错误，但文件没有产生任何操作。我知道目前不支持在 php 中发布时刻，但我认为我有一个 web 应用程序和 android 实现对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T20:46:42.887

目前您需要从后备箱获取库，您可以在[此处](https://code.google.com/p/google-api-php-client/source/checkout)找到说明。 [本要点](https://gist.github.com/silvolu/5054214)记录了如何请求许可和编写活动。

旧的时刻 api 已被弃用，这些示例适用于旧的 API，我会尽快将它们从代码库中删除。感谢您提出这个问题！

# c# - 链接按钮：“右键单击并在新选项卡中打开”不起作用

> ID：15241790
> 
> 赞同：1
> 
> 时间：2013-03-06T07:52:19.837
> 
> 标签：c#, asp.net, vb.net, c#-4.0

我正在尝试右键单击 LinkBut​​ton 并在新选项卡中打开它或单独的窗口页面不显示任何内容。我找到了一些使用超链接按钮的解决方案，因为它具有将目标设置为“_blank”的属性，但 LinkBut​​ton 没有任何目标属性。

我想使用 LinkBut​​ton 而不是超链接按钮，这只是因为我无法在超链接按钮上设置命令参数或命令名称，也无法在其上触发事件。

```
<asp:LinkButton ID="lnkHeadingHindi" Text='<%#Patrika.Common.ConvertNews(Eval("strMainHeadingHin").ToString())%>' CommandArgument='<%#Eval("intNewsId") %>' runat="server"></asp:LinkButton> 
```

如果有人有解决方案并让我知道以防万一，那就太好了。

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:31:13.323

根据[这个问题](https://stackoverflow.com/questions/178964/javascript-post-on-form-submit-open-a-new-window)的公认答案，如果您想执行 POST（例如`LinkButton`做）但结果在新窗口中打开，您需要添加`target="_blank"`到页面上的*表单*，而不是链接本身。

显然，当您最初呈现页面时，您不想这样做，因为导致回发的*所有内容*都会在新窗口中打开。

相反，请尝试将以下属性添加到您的`LinkButton`:

```
OnClientClick="$('form').attr('target', 'blank')" 
```

这将在通过单击链接回发表单之前动态设置表单属性。

请注意，这并没有提供您想要的右键单击功能，但它*确实*可以在左键单击时在新窗口中打开。

如果您无权访问 JQuery，则需要执行类似的操作

```
protected void Page_PreRender(object se, EventArgs e)
{
    this.Page.Form.ID = "someUniqueID"; // unless your form already has an ID
    yourLinkButton.OnClientClick =
        "document.getElementById('" +
        this.Page.Form.ClientID +
        "').setAttribute('target', '_blank')";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:13:29.037

你不能同时拥有它，你必须在以下两者之间做出选择：

1）链接按钮在当前页面执行一些代码

2) 在新窗口中打开另一个页面的超链接

我猜你想让链接按钮在新页面中执行一些代码，但这是不可能的。

或者如果你喜欢使用。愤怒标签

只需渲染一个将 href 设置为适当 url 的锚并将 target 属性设置为 _blank 它将在新窗口中打开 url

```
<a href="urlOfThePage" target="_blank" >Click me</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T08:09:21.393

如果您想使用超链接将某些信息传递到页面，请使用**QueryString**将其传递到 url 。

```
<asp:HyperLink id="hyperlink1" 
                  NavigateUrl="~/MyPage.aspx?intNewsId=10"
                  Text="ClickMe"
                  Target="_blank"
                  runat="server"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T07:58:47.443

从[文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)

使用 LinkBut​​ton 控件在网页上创建一个超链接样式的按钮。LinkBut​​ton 控件具有与 HyperLink 控件相同的外观，但具有与 Button 控件相同的功能。如果要在单击控件时链接到另一个网页，请考虑使用 HyperLink 控件。

由于这实际上并没有执行标准意义上的链接，因此控件上没有 Target 属性（HyperLink 控件确实有一个 Target） - 它试图从文本链接执行到服务器的 PostBack。

根据您要执行的操作，您可以：

1) 使用 HyperLink 控件，并设置 Target 属性

2) 为[OnClientClick 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.onclientclick.aspx)提供一个方法，该方法 在正确的位置打开一个新窗口。

3) 在处理 PostBack 的代码中，添加一些 JavaScript 以在 PageLoad 上触发，这将在正确的位置打开一个新窗口。

如果你喜欢点击链接按钮，然后打开新窗口，

请看[这个](http://forums.asp.net/t/1829301.aspx/1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T08:06:28.670

像这样插入基本标签

```
 <head>
    <base target="_blank" />
    </head> 
```

# graphics - linux上硬件加速的启用alpha的内存中放置位图？

> ID：15241797
> 
> 赞同：0
> 
> 时间：2013-03-06T07:52:40.140
> 
> 标签：graphics, hardware-acceleration

可以将位图 1 绘制到位图 2 上，并且必须使用位图 1 alpha 通道。两者都在内存中，都是 RGBA。

我需要这个操作尽可能快。所以硬件加速会很有帮助。

实际上会在一张大位图上绘制数千个小位图（类似于文本渲染）。我需要将结果保存到磁盘。您可以推荐什么库/功能？

我在考虑类似 OpenGL+CreateTexture 之类的东西，但是很久以前我写了我的 OpenGL “helloworld”... 是的，它是 C/C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:27:12.203

如果你只是在做 2D blits，你应该考虑使用 OpenVG（而不是 OpenGL）。

您提到了 Linux，但没有提到硬件平台。如果它是嵌入式处理器，OpenVG 支持通常非常好。对于必须使用 OpenGL 的桌面（x86）不能说同样的话。

# java - spring中基于类型的自动对象初始化

> ID：15241800
> 
> 赞同：2
> 
> 时间：2013-03-06T07:52:55.483
> 
> 标签：java, spring, constructor, javabeans

我有一个需要迭代的 Class 类型列表，对于该列表中的每种类型，Spring 需要自动找到要初始化的正确类型的对象。

例如：我有一个ClassA和ClassB。例如，当有用户类型时，需要使用某些参数（在 context.xml 中定义）初始化 ClassA。例如，当有一种 Message 类型时，它还应该从 ClassA 类型创建一个对象，但具有不同的参数，这些参数再次在 context.xml 中定义。

我该怎么做呢？我已经查看了 spring 的控制反转功能，但似乎无法为我的特定目的找到正确的实现

一个想法是我为每种可能的类型制作一个 bean，例如

```
<bean id="classAconfig" class="ClassA">
    <property name="type" value="User.class"/>
    <property name="fields">
        <list>
            <value>id</value><value>email</value>
        </list>
    </property>
    <property name="map">
        <map>
            <entry key="id" value="1"/><entry key="login" value="1"/><entry key="email" value="1"/>
        </map>
    </property>
</bean> 
```

亲切的问候，

梅林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:30:58.737

嗯，我找到了。只需要像上面描述的那样在上下文 xml 中定义一些 bean。但是在 ClassA 中，我扩展了 InitializingBean 并覆盖了 afterPropertiesSet 方法。在那个方法中，我在我的服务中注册了 ClassA。

```
public class ClassA extends InitializingBean
@Override
public void afterPropertiesSet() throws Exception {
    service.registerClass(this);
} 
```

然后在我的服务中：

```
public void registerClass(@Nonnull Class clazz) {
    classes.put(clazz.getType(), clazz);
} 
```

# css - 如何使用 CSS 设置 XUL 文本框的样式：focus

> ID：15241803
> 
> 赞同：1
> 
> 时间：2013-03-06T07:52:57.563
> 
> 标签：css, firefox, xul

我正在玩用 XUL 编写的 firefox 扩展，并想自定义文本框元素的样式。

这是我到目前为止所做的（CSS文件）：

```
textbox.custom-style {
    -moz-appearance: none;
    border-radius: 3px;
    box-shadow: 0 1px #CCC inset;
    background: #FFF;
    border : solid 1px #CCC;
} 
```

样式正确应用，但是当我添加此规则以更改焦点文本框的样式时，它似乎不起作用。

```
textbox.custom-style:focus {
    border : solid 1px #ACC;
} 
```

我已经为按钮元素尝试了相同的规则，它似乎工作正常（当我“标签”到按钮时，它会获得焦点并按预期改变其样式）

那么我在这里错过了什么？这是一个已知的错误？我四处寻找错误报告或解决方法，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:30:31.803

对于元素，只要元素具有焦点，就会添加`<textbox>`一个特殊属性。`focused`您可以检查此属性的存在以确定元素是否在样式表中具有焦点。它将具有价值`true`。

这是因为实际上焦点在`<html:input>`元素内部的`<textbox>`元素中。

# php - 如何根据国家/地区从 GMT 时间获取当前日期

> ID：15241806
> 
> 赞同：-5
> 
> 时间：2013-03-06T07:53:10.403
> 
> 标签：php, mysql

我将 GMT 日期存储在我的数据库中，我的数据库名称是“关注”。

```
id imageid  status     date

1    12      missyou   1362525409

2    12      loveyou   1362525416

3    12      fans      1362525422 
```

现在我的问题是，我想从上面的格林威治标准时间获取今天的日期，本周，本月，今年的 3 个月，我想以这种格式显示日期“日期（'l jS \of FY h:i :s A')" 提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:59:44.897

您可以将存储的时间戳传递给[日期](http://php.net/manual/en/function.date.php)函数。只需使用`date("Y d h i", $timestamp)`

如果要计算日期，请查看[DateTime::add](http://www.php.net/manual/en/datetime.add.php)函数以添加天/周/月

# c# - 如何知道是否调用了 EventWaitHandle.Set

> ID：15241808
> 
> 赞同：2
> 
> 时间：2013-03-06T07:53:14.500
> 
> 标签：c#, multithreading, event-wait-handle

有没有办法知道哪个`EventWaitHandle`被调用了。

我有两个具有 2 个不同系统范围事件名称的自定义类。

我拥有它们的原因是为了区分要触发的功能。

我现在遇到的问题是如何区分触发了哪个事件？

```
EventWaitHandle _ew1 = new EventWaitHandle(false, EventResetMode.AutoReset, "Mode1");
EventWaitHandle _ew2 = new EventWaitHandle(false, EventResetMode.AutoReset, "Mode2"); 
```

所以如果`_ew1.Set()`被调用，那么我需要执行`Process1`.

如果 _ew2.Set() 被调用，那么我需要执行`Process2`.

更新：添加了更多信息。

主线程是 Windows 服务。由 Web 应用程序和桌面应用程序发出信号。因此，基本上该服务需要确定谁从 Web 应用程序或桌面应用程序触发了事件，如果它是 WebAppliation，则执行 SP1，否则如果它是 Windows 应用程序，则执行 SP2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:00:34.243

## 理念一

[WaitHandle.WaitAny](http://msdn.microsoft.com/en-us/library/tdykks7z.aspx)静态方法返回信号等待句柄的索引，因此最简单的解决方案是检查该索引。

### 例子

```
static class Program
{
    private static Random _random = new Random();
    private static AutoResetEvent[] _eventHandles = new[] {new AutoResetEvent(false), new AutoResetEvent(false)};

    static void Main()
    {
        Thread[] threads = new Thread[10];

        for (int i = 0; i < threads.Length; i++)
        {
            threads[i] = new Thread(Method);
            threads[i].Start();

            var handleIndex = WaitHandle.WaitAny(_eventHandles);
            Console.WriteLine(handleIndex == 0 ? "Process1" : "Process2");
        }
    }

    static void Method()
    {
        if (_random.Next()%2 == 0)
            _eventHandles[0].Set();
        else
            _eventHandles[1].Set();
    }
} 
```

## 想法 2

您还可以使用一个事件句柄和一个 volatile 字段，该字段将指示满足了哪些条件语句，以便在信号后执行适当的过程。

### 例子

```
enum Process
{
    Process1,
    Process2
}

static class Program
{
    private static Random _random = new Random();

    private static AutoResetEvent _eventHandle = new AutoResetEvent(false);
    private static volatile Process _selectedProcess = Process.Process1;

    static void Main()
    {
        Thread[] threads = new Thread[10];

        for (int i = 0; i < threads.Length; i++)
        {
            threads[i] = new Thread(Method);
            threads[i].Start();

            _eventHandle.WaitOne();

            Console.WriteLine(_selectedProcess == Process.Process1 ? "Process1" : "Process2");
        }
    }

    static void Method()
    {
        _selectedProcess = _random.Next()%2 == 0 ? Process.Process1 : Process.Process2;
        _eventHandle.Set();
    }
} 
```

## 想法 3

如果您无法修改外部组件并且您只有事件句柄，那么您可以尝试为每个选项启动新线程并在那里等待相应的信号以执行适当的操作。

### 例子

```
static class Program
{
    private static Random _random = new Random();
    private static AutoResetEvent[] _eventHandles = new[] {new AutoResetEvent(false), new AutoResetEvent(false)};

    static void Main()
    {
        Thread[] processThreads = new Thread[2];

        processThreads[0] = new Thread(Process1);
        processThreads[0].Start();

        processThreads[1] = new Thread(Process2);
        processThreads[1].Start();

        Thread[] threads = new Thread[10];

        for (int i = 0; i < threads.Length; i++)
        {
            threads[i] = new Thread(Method);
            threads[i].Start();
        }
    }

    static void Method()
    {
        if (_random.Next()%2 == 0)
            _eventHandles[0].Set();
        else
            _eventHandles[1].Set();
    }

    static void Process1()
    {
        while (true)
        {
            _eventHandles[0].WaitOne();
            Console.WriteLine("Process1");
        }
    }

    static void Process2()
    {
        while (true)
        {
            _eventHandles[1].WaitOne();
            Console.WriteLine("Process2");
        }
    }
} 
```

## 想法4

如果进程需要少量时间，可以使用[ThreadPool.RegisterWaitForSingleObject 方法](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.registerwaitforsingleobject.aspx)

### 例子

```
static class Program
{
    private static Random _random = new Random();
    private static AutoResetEvent[] _eventHandles = new[] {new AutoResetEvent(false), new AutoResetEvent(false)};

    static void Main()
    {
        ThreadPool.RegisterWaitForSingleObject(_eventHandles[0], Process1, null, Timeout.Infinite, false);
        ThreadPool.RegisterWaitForSingleObject(_eventHandles[1], Process2, null, Timeout.Infinite, false);

        Thread[] threads = new Thread[10];

        for (int i = 0; i < threads.Length; i++)
        {
            threads[i] = new Thread(Method);
            threads[i].Start();
        }
    }

    static void Method()
    {
        if (_random.Next()%2 == 0)
            _eventHandles[0].Set();
        else
            _eventHandles[1].Set();
    }

    static void Process1(object state, bool timedOut)
    {
        Console.WriteLine("Process1");
    }

    static void Process2(object state, bool timedOut)
    {
        Console.WriteLine("Process2");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T08:42:03.020

使用[WaitHandle.WaitAny](http://msdn.microsoft.com/en-gb/library/system.threading.waithandle.waitany.aspx)等待多个事件句柄。当设置一个或多个事件时，它将返回导致等待返回的事件的索引。

```
EventWaitHandle _ew1 = new EventWaitHandle(false, EventResetMode.AutoReset, "Mode1");
EventWaitHandle _ew2 = new EventWaitHandle(false, EventResetMode.AutoReset, "Mode2");

WaitHandle[] handles={_ew1, _ew2};

int index=WaitHandle.WaitAny(handles)

if(index==0)
{
  // mode 1
}
else if(index==1)
{
  // mode 2
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T08:52:19.627

我可以建议的一个想法是创建自己的 EventWaitHandler，它可以重用处理程序的名称，稍后这个名称应该从 Wait 方法返回并作为调用者的标识符

为此，您必须实现自己的 Wait 方法（我实现了 WaitNew 来满足和扩展 WaitOne）

有关工作代码，请参见以下代码：

```
//Client application environments
public class WindowsApplication
{
    public void ExecuteWindowsService()
    {
        var ws = new WindowsService();
        var _eventHandle = new MyEventWaitHandler(false, EventResetMode.AutoReset, "WindowsApplicationMode");
        ws.Execute(_eventHandle);
        _eventHandle.Set();
    }

}
public class WebApplication
{
    public void ExecuteWebService()
    {
        var ws = new WindowsService();
        var _eventHandle = new MyEventWaitHandler(false, EventResetMode.AutoReset, "WebApplicationMode");
        ws.Execute(_eventHandle);
        _eventHandle.Set();
    }
}

//Windows Service Environment
public class MyEventWaitHandler : EventWaitHandle
{
    public MyEventWaitHandler(bool initialState, EventResetMode mode, string name)
        : base(initialState, mode, name)
    {
        this.EventHandlerName = name;
    }

    //it should not be set to empty string from external
    public string EventHandlerName;

    public string WaitNew()
    {
        if (base.WaitOne())
            return EventHandlerName;
        else return String.Empty;
    }
}

public class WindowsService
{
    public void Execute(MyEventWaitHandler _eventHandle)
    {
        Thread[] threads = new Thread[10];
        for (int i = 0; i < threads.Length; i++)
        {
            threads[i] = new Thread(Method);
            threads[i].Start();

            string name = _eventHandle.WaitNew();

            if (name == "WindowsApplicationMode")
            {
                //Execute case for first process
            }
            else if (name == "WebApplicationMode")
            {
                //Execute case for second process
            }
        }
    }

    static void Method()
    {
        //Some Task
    }
} 
```

让我知道我是否理解您的要求正确？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T08:30:51.257

继承自`EventWaitHandle`，添加一个易变的“调用者”属性。每个信号员都必须通过他的 ID，或 Ref。
发出信号后，**联锁**检查属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-04T02:46:28.103

这个怎么样？

```
bool signaled = eventWaitHandle.WaitOne(TimeSpan.Zero); 
```

# php - Magento 以编程方式将所有不同的产品分配给特定的可配置产品

> ID：15241811
> 
> 赞同：0
> 
> 时间：2013-03-06T07:53:18.103
> 
> 标签：php, magento

我需要将所有不同的产品（ID）分配给特定的可配置产品

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:58:53.187

您是否希望所有产品都没有任何过滤器，但它只显示结果集的一部分？

可能有几种情况：

*   一些内部限制，就像 100 一样。
*   一些分页限制。每页产品（在数据库摘要中）
*   一些延迟加载限制

大多数情况下，限制是内部限制。

同样，在这里找到了一个非常相似的线程[***。***](https://stackoverflow.com/questions/8880657/magento-get-all-products)希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:40:05.783

另一种更好的方法来做同样的事情

```
 $productsCollection = Mage::getResourceModel('catalog/product_collection')
                ->addAttributeToSelect('*')
                ->addAttributeToFilter('type_id','configurable') //load only configurable products
                ->load();

     foreach($productsCollection as $product):
     /*Get Associated Simple Products*/
      $associatedSimpleProducts = $product->getTypeInstance()->getUsedProductIds();
      print_r($associatedSimpleProducts);
     endforeach; 
```

我认为这是更好的一个，因为它消除了再次加载产品模型的必要性，因为您的收藏中已经有了它；-)

# facebook - 如何使用 FQL 或图形 API 仅获取公共视频

> ID：15241812
> 
> 赞同：1
> 
> 时间：2013-03-06T07:53:22.340
> 
> 标签：facebook, facebook-graph-api, video, facebook-fql

我需要从特定用户帐户获取所有公共视频。我有一个有效的默认访问令牌。但是当我使用 FQL 或 graphAPI 请求视频时，它不会返回任何内容。

选择 vid、所有者、标题、描述、thumbnail_link、embed_html、updated_time、created_time FROM video WHERE owner=

FB 文件说我可以通过任何有效的访问令牌获取公开可用的视频。

[http://developers.facebook.com/docs/reference/fql/video/](http://developers.facebook.com/docs/reference/fql/video/)

公开视频的任何有效 access_token

我使用 facebook explorer 工具测试了这个，但它不适合我。

[http://developers.facebook.com/tools/explorer/](http://developers.facebook.com/tools/explorer/)

如果我做错了什么，请告诉我。我只需要从用户个人资料中获取公共视频。我可以使用 user_videos 权限来获取公共和私人视频。但是没有标志可以识别特定视频是公开的还是私有的。

请帮助我。

感谢和问候， Malligairajan G.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:03:21.857

转到[资源管理](https://developers.facebook.com/tools/explorer)器并执行他们给您的示例查询代码，如下所示：

```
SELECT vid, owner, title, description, thumbnail_link, embed_html, updated_time, created_time FROM video WHERE owner=20531316728 
```

在进行查询之前，您必须按下“获取访问令牌”按钮。我在授权中检查了 user_videos，但可能不是必需的。获得访问令牌后，按“FQL 查询”按钮（不是 Graph Api），在上面插入查询，按提交。这是我得到的结果（第一个结果。整个事情太长了）：

```
 {
  "data": [
    {
      "vid": "10200156550214780", 
      "owner": 20531316728, 
      "title": "Building Graph Search", 
      "description": "Learn about the design and engineering behind Graph Search (http://fb.com/graphsearch).", 
      "thumbnail_link": "https://fbcdn-vthumb-a.akamaihd.net/hvthumb-ak-prn1/632230_10200156572295332_10200156550214780_21792_636_t.jpg", 
      "embed_html": "<iframe src=\"https://www.facebook.com/video/embed?video_id=10200156550214780\" width=\"1280\" height=\"720\" frameborder=\"0\"></iframe>", 
      "updated_time": 1358280001, 
      "created_time": 1358280001
    }, 
```

如果您不使用 user_videos 权限进行授权，图形 api 和您的应用程序都将无法工作。换句话说，您甚至需要授权才能获取公共数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T23:39:46.050

试试这个 FQL 查询：

```
{"SELECT vid, owner, title, description, thumbnail_link, embed_html, updated_time, created_time FROM video WHERE owner== me()" } 
```

# jsf-2 - 将请求参数传递给xhtml文件中的jsf方法？

> ID：15241814
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:53:27.497
> 
> 标签：jsf-2, el

我将 el-impl-2.2.jar 与 jsf 2 一起使用，它允许从 xhtml 文件中的托管 bean 调用方法并将其传递给参数。

如果我测试这个：

```
#{myBean.findById(1)} 
```

一切正常。但现在我想从请求中检索参数我已经尝试过了

```
#{myBean.findById(${param.id})} 
```

它不工作。任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:02:37.630

这个表达式`#{myBean.findById(param.id)}`应该有效。你不应该在你的视图中搜索。您应该在控制器中执行此操作。`ManagedBean`在那里创建并执行。

阅读 mkyong 文章[http://www.mkyong.com/jsf2/4-ways-to-pass-parameter-from-jsf-page-to-backing-bean/](http://www.mkyong.com/jsf2/4-ways-to-pass-parameter-from-jsf-page-to-backing-bean/)。

# java - 为什么在 Enum hashCode() 中引用 Object hashCode() 实现，而不是 ordinal() 函数？

> ID：15241818
> 
> 赞同：8
> 
> 时间：2013-03-06T07:53:50.310
> 
> 标签：java, enums, hashcode, jls

我一直认为**enum hashCode**是指Java 中的**ordinal**，因为**ordinal**似乎是**hashCode**的完美候选者，但事实证明**enum hashCode**实际上是指默认的**hashCode 对象**实现。

**我理解，这与JLS**并不矛盾，但这仍然让我感到惊讶，我想不出为什么会这样。尽管我猜想**JVM可能会以某种方式依靠它来提供唯一的保证，但这对于 64 位****JVM**不再适用。

我已经检查了 JDK 1.6 和最新的 JDK 7，这两种方法都是一样的。

***有人知道为什么，它是这样制作的吗？***

**将ordinal**用作**hashCode**非常有意义，因为它满足所有所需的凭据，而且它甚至从一个 JVM 开始到另一个 JVM 都是一致的，这不是必需的，但拥有它是件好事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T08:01:34.287

想象一下这个微不足道的、完全虚构的场景：

```
interface MediaType {}

enum BookTypes implements MediaType {
    HARDCOVER;
}

enum MagazineTypes implements MediaType {
    MONTHLY;
}

Map<MediaType, MediaItem> itemMap = new HashMap<MediaType, MediaItem>();
itemMap.put(BookTypes.HARDCOVER, new Book());
itemMap.put(MagazineTypes.MONTHLY, new Magazine()); 
```

我认为很清楚为什么在这种情况下您不想使用序数作为哈希码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T07:56:34.560

hashcode 和 ordinal 是完全不同的。

每个枚举的第一个实例将具有相同的序数值，与哈希码相反。

> ordinal() 返回此枚举常量的序号（它在其枚举声明中的位置，其中初始常量的序号为零）。

```
enum BookTypes implements MediaType {
    HARDCOVER;  //ordinal is 0
}

enum MagazineTypes implements MediaType {
    MONTHLY; //ordinal is 0
} 
```

# node.js - Node JS执行了两次函数

> ID：15241819
> 
> 赞同：5
> 
> 时间：2013-03-06T07:53:53.673
> 
> 标签：node.js

stackoverflow 的新功能和 Node.js 的新功能。

我有一个简单的套接字服务器和一个 Web 服务器。

如果有人连接了 Web 服务器，我希望 Web 服务器向套接字服务器发送消息。

浏览器 <=> Web 服务器/Socket 客户端 <=> Socket 服务器

我创建了这样的服务器：

```
var http = require('http');
var net = require('net');
var HOST = '192.168.1.254';
var PORT = 8888;
var client = new net.Socket();

http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n', function(){
      client.connect(PORT, HOST, function() {
        console.log('Connected To: ' + HOST + ':' + PORT);
        client.write('0109001' + "\n");
      });   

    // Add a 'data' event handler for the client socket
    // data is what the server sent to this socket
        client.on('data', function(data) {
            console.log('The Data: ' + data);
            client.destroy();
        });

        // Add a 'close' event handler for the client socket
        client.on('close', function() {
            console.log('Connection closed');
        });
  });
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

此代码有效，但 Web 服务器将消息发送到套接字服务器两次。我是否做错了什么可能是回调或其他什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T08:09:34.587

如果您通过浏览器调用此代码，它会向服务器发送 2 个请求。一个用于 FavIcon，一个用于页面本身。

回调中的代码被调用了两次，因为有 2 个请求。

正如马特所提到的：不要将套接字响应处理程序放在回调中，因为您失去了对它们的引用，并且为每个请求附加了一个新的处理程序。

```
var http = require('http');
var net = require('net');
var HOST = '192.168.1.254';
var PORT = 8888;
var client = new net.Socket();
var url   = require('url');

http.createServer(function (req, res) {
  console.log(url.parse(req.url));
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n', function(){

        console.log('Connected To: ' + HOST + ':' + PORT);

  });
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:59:30.317

`client.on()`调用不应该在回调内部`res.end()`——这会导致事件处理程序被多次附加，这意味着每次接收到数据时，都会被多次调用。

试试这个：

```
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n', function(){
      client.connect(PORT, HOST, function() {
        console.log('Connected To: ' + HOST + ':' + PORT);
        client.write('0109001' + "\n");
      });   
  });
}).listen(1337, '127.0.0.1');

// Add a 'data' event handler for the client socket
// data is what the server sent to this socket
client.on('data', function(data) {
    console.log('The Data: ' + data);
    client.destroy();
});

// Add a 'close' event handler for the client socket
client.on('close', function() {
    console.log('Connection closed');
}); 
```

# android - DownloadManager VS自己的下载实现？

> ID：15241821
> 
> 赞同：6
> 
> 时间：2013-03-06T07:54:02.923
> 
> 标签：android, download, download-manager

我正在构建一个需要下载大文件的应用程序。

该应用程序需要支持：
- 下载大文件（当然..） -
恢复损坏的下载
- 收到有关下载进度的通知
- 在后台下载（当用户不在应用程序中时）
- 手动暂停/恢复下载

我应该使用 Android 的 DownloadManager 还是实现我自己的下载管理器？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:57:19.973

当然，使用 Android 下载管理器要容易得多，而且可能更不容易出错。但请注意，它需要 Android 2.3（我认为这不再是什么大问题了）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-03T12:04:43.197

好吧，我终于实现了我自己的下载管理器，因为这是让它灵活地满足我的需求的最佳方式。

# mysql - 一个外键和 2 个引用表

> ID：15241822
> 
> 赞同：2
> 
> 时间：2013-03-06T07:54:08.673
> 
> 标签：mysql, sql

是否可以有两个引用表的外键？

这是脚本，我们在插入此表时遇到问题

```
CREATE TABLE Class(
    idNumber varchar(30) not null,
    day varchar(10) not null,
    time varchar(20) not null,
    foreign key(idNumber) REFERENCES ThesisMember(idNumber),
    foreign key(idNumber) REFERENCES Faculty(idNumber),
    PRIMARY KEY(idNumber,day,time)
);

CONSTRAINT `class_ibfk_1`
    FOREIGN KEY (`idNumber`) REFERENCES `thesismember` (`idNumber`)) 
```

SQL 语句：

```
INSERT INTO `thesis`.`class`
    (`idNumber`, `day`, `time`) VALUES ('9990', 'F', '0940-1110') 
```

Faculty 表的 idNumber 为“9990”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:25:16.973

FK 约束要求字段“idNumber”的每个实例都出现在所有引用的表中。您声明只有一个引用的表具有要插入的值，因此在 INSERT 尝试时当然会发生错误。

# php - 使用 php 在 Postgres 中存储 openssl_random_pseudo_bytes 的输出？我收到一个错误：编码“UTF8”的字节序列无效

> ID：15241827
> 
> 赞同：0
> 
> 时间：2013-03-06T07:54:39.723
> 
> 标签：php, postgresql, cryptography

我正在使用 php.ini 中的`openssl_random_pseudo_bytes`函数生成盐。但是，我无法将输出存储到 PostgreSQL 数据库中。

我收到一个错误：

> 错误：编码“UTF8”的字节序列无效

现在我意识到有问题的数据库的编码设置为UTF8，并且函数的输出不匹配，**但是解决这个问题的正确方法是什么？**

**这是一种随机盐，我担心通过任何过程将其转换为 UTF8 将不再使其加密安全？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:17:37.687

该`openssl_random_pseudo_bytes`函数输出二进制数据，我试图将输出存储在数据类型字符变化的数据库字段中，错误地将其视为字符串。

`bytea`是 PostgreSQL 数据库中字段的正确数据类型。

[http://www.postgresql.org/docs/9.2/interactive/datatype-binary.html](http://www.postgresql.org/docs/9.2/interactive/datatype-binary.html)

更新：此外，您似乎需要`pg_escape_bytea`在输出上使用才能将二进制数据实际插入数据库。

感谢**deceze**、**lechlukasz**和**VolkerK**在评论中提供答案。

# ruby-on-rails-3 - rails_admin 没有设计

> ID：15241831
> 
> 赞同：0
> 
> 时间：2013-03-06T07:55:16.440
> 
> 标签：ruby-on-rails-3, devise, rails-admin

我很难让 rails_admin 在没有设计的情况下工作。

我尝试了[https://gist.github.com/Overbryd/1068094](https://gist.github.com/Overbryd/1068094) 以及从我的用户模型和路线中删除所有与设计相关的代码

但是，我收到以下错误：

```
ActionView::Template::Error (Could not find a valid mapping for # From here
6: - if _current_user
7: - if user_link = edit_user_link
8: %li= user_link
9: - if logout_path.present?
10: %li= link_to content_tag('span', t('admin.misc.log_out'), :class => 'label label-important'), logout_path, :method => Devise.sign_out_via
11: - if _current_user.respond_to?(:email) && _current_user.email.present?

devise (2.2.3) lib/devise/mapping.rb:42:in find_scope!'
/home/eugene/.bundler/ruby/1.9.1/rails_admin-75079da0906e/app/helpers/rails_admin/application_helper.rb:36:inlogout_path' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T04:52:00.970

假设您有类似这样的路线：

```
get "logout" => "sessions#destroy", as: "logout" 
```

然后你可以这样做：

```
 - if _current_user
    - if user_link = edit_user_link
      %li= user_link
    %li= link_to content_tag('span', t('admin.misc.log_out'), class: 'label label-important'), '/logout' 
```

这只是用指向您的整个会话破坏路线的链接替换了设计废话。您也可以删除应用程序控制器中的 logout_path 方法。

# javascript - 提交按钮确认删除在rails 3中不起作用

> ID：15241832
> 
> 赞同：0
> 
> 时间：2013-03-06T07:55:20.427
> 
> 标签：javascript, jquery, ruby-on-rails, submit, destroy

我对 Rails 还是很陌生，并在删除多个项目时试图理解一些东西。当我单击提交时，它可以工作并且我可以删除多个项目，但是，无论我的确认响应如何，它都会删除。

我正在使用 javascript 来检测我的提交按钮的 onclick 事件，我的代码是：

```
$('.delete').on('click', function(){
    checked = countChecked();
    if (checked > 1) {
        confirm('Are you sure you want to delete these ' + checked + ' entries?');
    } else {
        confirm('Are you sure you want to delete this entry?');
    };
}); 
```

我的提交按钮是：

```
<%= submit_tag "Delete Selected", { :class => 'delete'} %> 
```

为什么确认没有做正确的事情？即使我按取消它也会删除...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:59:59.283

试试这个

```
$('.delete').on('click', function(){
    checked = countChecked();
    if (checked > 1) {
       return confirm('Are you sure you want to delete these ' + checked + ' entries?');
    } else {
       return confirm('Are you sure you want to delete this entry?');
    };
}); 
```

# c# - Farseer 物理机构 联系中（联系中）

> ID：15241838
> 
> 赞同：0
> 
> 时间：2013-03-06T07:55:25.890
> 
> 标签：c#, xna, farseer

我是 Farseer 的新手，正在开发一款 xna + Farseer 物理游戏。游戏中有多个物理体（正方形、圆形、矩形），试图找出所有接触的物体（相互接触），我可以根据宽度/高度进行计算，但这并不准确。我想知道 Farseer 物理学中的任何其他方式或任何内置功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:18:29.193

查看[此答案](https://stackoverflow.com/a/13415522/165500)以获取很多详细信息。根据您的需要，您可以直接使用该答案中列出的事件之一。

但是，除此之外，您可以`Contact`通过从其中一个事件中“收集”它们或从`Body.ContactList`（这是由对象组成的链表`ContactEdge`）中提取它们来获取对象。

当然，请注意， a`Contact`可能实际上并没有*接触*（它只是表示潜在的碰撞）。用于`Contact.IsTouching()`检查。

# facebook - 图 api /me/apprequests 返回 http 错误

> ID：15241839
> 
> 赞同：1
> 
> 时间：2013-03-06T07:55:30.000
> 
> 标签：facebook, facebook-graph-api, apprequests, facebook-app-requests

我用

```
FB.api('/me/apprequests/?access_token=' + access_token + '&date_format=' + escape('Y/m/d H:i:s eO'), function(response) {
    if(response.error)
    { 
```

获取用户的应用请求。但有时，某些用户无法获取应用请求列表。只得到 {"error":{"type":"http","message":"unknown error"}}

一些用户可能会一直收到此错误。我将此错误追溯到我的 GA 质量，统计结果显示一些用户收到此错误多达数万次。

access_token 是当前用户的。

为什么有些用户会收到 http 类型的未知错误？

我不明白这一点。

谢谢你。

感谢您的回答。

我认为这个错误不是由于权限引起的。因为我在发生一个错误时记录了 access_token。并使用 facebook 调试工具检查它。它显示

```
Issued: 
1362702044 (about an hour ago)
Expires:    
1367886044 (in about 2 months)
Valid:  True
Origin: Web
Scopes: email publish_actions user_games_activity 
```

.所以，我不知道为什么会出现这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T02:13:37.690

我有同样的问题，现在已经解决了。错误消息：{"error":{"type":"http","message":"unknown error"}} 表示 FB API 的响应因页面中的其他操作而中断。

在我的场景中，我在表单中放置了一个 html 标签 :button，这个按钮用于调用 FB.api。但是，当用户点击按钮时，表单会自动提交，不会等待 FB.api 的响应。

代码如下：

```
<form>
    <button onclick="test();">Test</button> 
</form>

function test(){
 FB.api('/me', function(response) {
        alert(response.name);
    }); 
} 
```

我添加“return false;” 在按钮的 onclick 方法中调用 test() 以避免表单自动提交。

我建议您检查页面中的 javascript 以确认在与 FB 交互功能期间没有发生任何动作。

# php - 如何处理 $_GET 中的空白？

> ID：15241843
> 
> 赞同：-1
> 
> 时间：2013-03-06T07:55:44.577
> 
> 标签：php

我正在尝试在我的网页上加载不同的内容，但是其中一个`$_GET`必须有一个空间（因为它是从数据库中调用的）。那么我该怎么做呢？
我没有设置任何链接我正在手动尝试通过 go 转到该页面，`?route=1&plantsite=Syncrude+Base+Mine`但该页面未加载。

这是我的php：

```
require_once('config.inc.php');
$gGetRoute = $_GET['route'];
$gGetPlantSite = $_GET['plantsite'];

if ((isset($gGetRoute)) && (isset($gGetPlantSite)) {
  $mysqli = new mysqli(DB_HOST, DB_USER, DB_PASS, DB_BASE);
  if ($stmt = $mysqli -> prepare("SELECT Latitude, Longitude, Title, Arrival_Time, Direction_Of_Bus, What_Shift FROM Routes WHERE Route_Number = ? AND Plant_Site = ?")) {
    $stmt -> bind_param('ss', $gGetRoute, $gGetPlantSite);
    $stmt -> execute();
    $stmt -> bind_result($gLatitude, $gLongitude, $gTitle, $gArrivalTime, $gDirectionOfBus, $gwhatShift);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:59:19.600

使用`urlencode()`和`urldecode()`准备用于 GET 的变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:01:55.580

我认为做事有两种方式：

# 方式一：

```
urlencode() //For encoding the URL
urldecode() //For decoding the URL 
```

# 方式二：

在设置或获取变量之前尝试使用修剪：

```
 trim($_GET['abc']); 
```

这会使您的多余空间被删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T08:31:47.487

利用`urldecode()`

```
$gGetRoute = urldecode($_GET['route']);
$gGetPlantSite = urldecode($_GET['plantsite']); 
```

# php - 分页显示最大值并限制其余部分

> ID：15241847
> 
> 赞同：2
> 
> 时间：2013-03-06T07:56:01.217
> 
> 标签：php, mysql, if-statement, pagination

现在我的分页会显示像这样

[1] [2] [3] [4] [5] [6] [7] [8] [9]

我怎样才能让它像这样出现

[1] [2] [3] [4] [5]... [9]

```
<?php
$per_page = 10;
$pages_query = mysql_query ("SELECT COUNT(`message_id`) FROM `messages`") or die(mysql_error());
$pages = ceil(mysql_result ($pages_query, 0) / $per_page);
$page = (isset ($_GET['page'])) ? (int) $_GET['page'] : 1; 
$start = ($page - 1) * $per_page;
?> 
```

与分页相呼应的相关 if 语句

```
<?php
    if ($pages >=1 && $page <= $pages) {
        for ($x=1; $x<=$pages;$x++) {
            echo "<a href=\"?page=" .$x."\">".$x."</a>";
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T08:26:52.737

试试这个 ：

```
 <?php
        $link = "";
 // $page = $_GET['page'];
 // $pages=20; // Hardcoded for testing purpose
  $limit=5  ;
    if ($pages >=1 && $page <= $pages)
    {
        $counter = 1;
        $link = "";
        if ($page > ($limit/2))
           { $link .= "<a href=\"?page=1\">1 </a> ... ";}
        for ($x=$page; $x<=$pages;$x++)
        {

            if($counter < $limit)
                $link .= "<a href=\"?page=" .$x."\">".$x." </a>";

            $counter++;
        }
        if ($page < $pages - ($limit/2))
         { $link .= "... " . "<a href=\"?page=" .$pages."\">".$pages." </a>"; }
    }

    echo $link;
?> 
```

**输出 ：**

```
//At page=1
1 2 3 4 ... 20 

//At page=12
1 ... 12 13 14 15 ... 20 

//At page=18
1 ... 18 19 20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T08:02:14.910

```
<?php
    if ($pages >=1 && $page <= $pages) {
        $counter = 1;
        $link = "";
        for ($x=1; $x<=$pages;$x++) {
            if($counter < 5)
                $link .= "<a href=\"?page=" .$x."\">".$x."</a>";

            $counter++;
        }
        $link .= "...";
        $link .=  "<a href=\"?page=" .$pages."\">".$pages."</a>";
    }
    echo $link;
?> 
```

# qt - Qt 动画按钮

> ID：15241857
> 
> 赞同：3
> 
> 时间：2013-03-06T07:56:40.373
> 
> 标签：qt, animation, qt4, pyqt, pyside

任何人都可以提供或指向Qt中的一个简单示例，如果单击另一个按钮，我们可以向下或向上滑动一个按钮。例如，一个简单的对话框，它有三个垂直放置的按钮。当我们点击上部按钮时，中间和下部按钮应该向下滑动 20-30 像素，在上部和其他两个按钮之间留出空间。

此外，如果单击中间按钮，按钮应该到达它们的初始位置，并且在中间和最下面的按钮之间应该出现类似的动画。也就是说，下部按钮应该向下滑动，在它和中间按钮之间留出空间。

我在 Win7 上使用 qt 4.8.4 和 MinGW。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T02:56:32.893

这是一个用python编写的动画按钮示例：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class StateSwitchEvent(QtCore.QEvent):
    StateSwitchType = QtCore.QEvent.User + 256

    def __init__(self, rand=0):
        super(StateSwitchEvent, self).__init__(StateSwitchEvent.StateSwitchType)

        self.m_rand = rand

    def rand(self):
        return self.m_rand

class StateSwitchTransition(QtCore.QAbstractTransition):
    def __init__(self, rand):
        super(StateSwitchTransition, self).__init__()

        self.m_rand = rand

    def eventTest(self, event):
        return (event.type() == StateSwitchEvent.StateSwitchType and
                event.rand() == self.m_rand)

    def onTransition(self, event):
        pass

class StateSwitcher(QtCore.QState):
    def __init__(self, machine):
        super(StateSwitcher, self).__init__(machine)

        self.m_stateCount = 0
        self.m_lastIndex = 1

    def onEntry(self, event):
        self.m_lastIndex = 1 if self.m_lastIndex >= self.m_stateCount else self.m_lastIndex + 1
        self.machine().postEvent(StateSwitchEvent(self.m_lastIndex))

    def addState(self, state, animation):
        self.m_stateCount += 1

        trans = StateSwitchTransition(self.m_stateCount)
        trans.setTargetState(state)
        trans.addAnimation(animation)

        self.addTransition(trans)

def createGeometryState(w1, rect1, w2, rect2, w3, rect3, w4, rect4, w5, rect5, w6, rect6, parent):
    result = QtCore.QState(parent)

    result.assignProperty(w1, 'geometry', rect1)
    result.assignProperty(w1, 'geometry', rect1)
    result.assignProperty(w2, 'geometry', rect2)
    result.assignProperty(w3, 'geometry', rect3)
    result.assignProperty(w4, 'geometry', rect4)
    result.assignProperty(w5, 'geometry', rect5)
    result.assignProperty(w6, 'geometry', rect6)

    return result

@QtCore.pyqtSlot()
def on_pushButtonStart_clicked():
    lastItem = None
    lowestY  = None
    for item in scene.items():
        itemY = item.pos().y()
        if lastItem == None or itemY <= lowestY:
            lowestY = itemY
            lastItem = item

    for item in scene.items():
        if item != lastItem:
            lastItem.stackBefore(item)

    timer.start()

if __name__ == '__main__':
    import sys

    app = QtGui.QApplication(sys.argv)

    button1 = QtGui.QPushButton()
    button1.setFixedSize(QtCore.QSize(50, 50))
    button1.setText("#1")

    button2 = QtGui.QPushButton()
    button2.setFixedSize(QtCore.QSize(50, 50))
    button2.setText("#2")

    button3 = QtGui.QPushButton()
    button3.setFixedSize(QtCore.QSize(50, 50))
    button3.setText("#3")

    button4 = QtGui.QPushButton()
    button4.setFixedSize(QtCore.QSize(50, 50))
    button4.setText("#4")

    button5 = QtGui.QPushButton()
    button5.setFixedSize(QtCore.QSize(50, 50))
    button5.setText("#5")

    button6 = QtGui.QPushButton()
    button6.setFixedSize(QtCore.QSize(50, 50))
    button6.setText("#6")

    scene = QtGui.QGraphicsScene(0, 0, 50, 300)
    scene.addWidget(button1)
    scene.addWidget(button2)
    scene.addWidget(button3)
    scene.addWidget(button4)
    scene.addWidget(button5)
    scene.addWidget(button6)

    timer = QtCore.QTimer()
    timer.setInterval(0)
    timer.setSingleShot(True)

    group = QtCore.QState()

    state1 = createGeometryState(
        button1, QtCore.QRect(0, 0, 50, 50),
        button2, QtCore.QRect(0, 50, 50, 50),
        button3, QtCore.QRect(0, 100, 50, 50),
        button4, QtCore.QRect(0, 150, 50, 50), 
        button5, QtCore.QRect(0, 200, 50, 50), 
        button6, QtCore.QRect(0, 250, 50, 50), 
        group
        )

    state2 = createGeometryState(
        button2, QtCore.QRect(0, 0, 50, 50),
        button3, QtCore.QRect(0, 50, 50, 50),
        button4, QtCore.QRect(0, 100, 50, 50),
        button5, QtCore.QRect(0, 150, 50, 50),
        button6, QtCore.QRect(0, 200, 50, 50), 
        button1, QtCore.QRect(0, 250, 50, 50),
        group
        )

    state3 = createGeometryState(
        button3, QtCore.QRect(0, 0, 50, 50),
        button4, QtCore.QRect(0, 50, 50, 50),
        button5, QtCore.QRect(0, 100, 50, 50),
        button6, QtCore.QRect(0, 150, 50, 50), 
        button1, QtCore.QRect(0, 200, 50, 50),
        button2, QtCore.QRect(0, 250, 50, 50),
        group
    )

    state4 = createGeometryState(
        button4, QtCore.QRect(0, 0, 50, 50),
        button5, QtCore.QRect(0, 50, 50, 50),
        button6, QtCore.QRect(0, 100, 50, 50), 
        button1, QtCore.QRect(0, 150, 50, 50),
        button2, QtCore.QRect(0, 200, 50, 50),
        button3, QtCore.QRect(0, 250, 50, 50),
        group
    )

    state5 = createGeometryState(
        button5, QtCore.QRect(0, 0, 50, 50),
        button6, QtCore.QRect(0, 50, 50, 50), 
        button1, QtCore.QRect(0, 100, 50, 50),
        button2, QtCore.QRect(0, 150, 50, 50),
        button3, QtCore.QRect(0, 200, 50, 50),
        button4, QtCore.QRect(0, 250, 50, 50),
        group
    )

    state6 = createGeometryState(
        button6, QtCore.QRect(0, 0, 50, 50),
        button1, QtCore.QRect(0, 50, 50, 50), 
        button2, QtCore.QRect(0, 100, 50, 50),
        button3, QtCore.QRect(0, 150, 50, 50),
        button4, QtCore.QRect(0, 200, 50, 50),
        button5, QtCore.QRect(0, 250, 50, 50),
        group
    )

    animationGroup = QtCore.QParallelAnimationGroup()

    anim = QtCore.QPropertyAnimation(button6, 'geometry')
    anim.setDuration(1111)
    anim.setEasingCurve(QtCore.QEasingCurve.OutElastic)
    animationGroup.addAnimation(anim)

    anim = QtCore.QPropertyAnimation(button5, 'geometry')
    anim.setDuration(1111)
    anim.setEasingCurve(QtCore.QEasingCurve.OutElastic)
    animationGroup.addAnimation(anim)

    anim = QtCore.QPropertyAnimation(button4, 'geometry')
    anim.setDuration(1111)
    anim.setEasingCurve(QtCore.QEasingCurve.OutElastic)
    animationGroup.addAnimation(anim)

    anim = QtCore.QPropertyAnimation(button3, 'geometry')
    anim.setDuration(1111)
    anim.setEasingCurve(QtCore.QEasingCurve.OutElastic)
    animationGroup.addAnimation(anim)

    anim = QtCore.QPropertyAnimation(button2, 'geometry')
    anim.setDuration(1111)
    anim.setEasingCurve(QtCore.QEasingCurve.OutElastic)
    animationGroup.addAnimation(anim)

    anim = QtCore.QPropertyAnimation(button1, 'geometry')
    anim.setDuration(1111)
    anim.setEasingCurve(QtCore.QEasingCurve.OutElastic)
    animationGroup.addAnimation(anim)

    machine = QtCore.QStateMachine()

    stateSwitcher = StateSwitcher(machine)
    stateSwitcher.addState(state1, animationGroup)
    stateSwitcher.addState(state2, animationGroup)
    stateSwitcher.addState(state3, animationGroup)
    stateSwitcher.addState(state4, animationGroup)
    stateSwitcher.addState(state5, animationGroup)
    stateSwitcher.addState(state6, animationGroup)

    group.addTransition(timer.timeout, stateSwitcher)
    group.setInitialState(state1)

    machine.addState(group)
    machine.setInitialState(group)
    machine.start()

    view = QtGui.QGraphicsView(scene)
    view.setAlignment(QtCore.Qt.AlignLeft | QtCore.Qt.AlignTop)
    view.setHorizontalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
    view.setVerticalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
    view.setFixedSize(50, 150)

    window = QtGui.QWidget()

    pushButtonStart = QtGui.QPushButton(window)
    pushButtonStart.setText("Start")
    pushButtonStart.clicked.connect(on_pushButtonStart_clicked)    

    layoutVertical = QtGui.QVBoxLayout(window)
    layoutVertical.addWidget(view)
    layoutVertical.addWidget(pushButtonStart)

    window.show()
    window.resize(333, 150)

    sys.exit(app.exec_()) 
```

# java - 连接两个java框架

> ID：15241863
> 
> 赞同：0
> 
> 时间：2013-03-06T07:57:23.747
> 
> 标签：java, eclipse, swing, jframe, multiple-instances

其实我是java新手我想知道如何链接两个框架。我做了两个不同的java文件，看起来很简单。但直到现在我都无法解决它。它应该通过单击 Enter.java 中的 Next 按钮打开欢迎框架。有谁能够帮我？

这是我的代码：

```
Enter.java

import java.awt.FlowLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class Enter extends JFrame {

public Enter() {
// TODO Auto-generated constructor stub

setLayout(new FlowLayout(FlowLayout.LEFT, 10, 20));

add(new JLabel("Name"));
add(new JTextField(8));
add(new JLabel("Address"));
add(new JTextField(15));
add(new JLabel("Surname"));
add(new JTextField(8));
add(new JLabel("Phone"));
add(new JTextField(8));
add(new JButton("Next"));
}

/**
 * @param args
 */
public static void main(String[] args) {
// TODO Auto-generated method stub
    Enter myProg = new Enter();
myProg.setTitle("Ceng 344 - Lab 7");
myProg.setSize(450, 400);
myProg.setLocationRelativeTo(null);
myProg.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
myProg.setVisible(true);
}

}

Welcome.java
 import java.awt.FlowLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class welcome extends JFrame {

public welcome() {
// TODO Auto-generated constructor stub

setLayout(new FlowLayout(FlowLayout.LEFT, 10, 20));

add(new JLabel("Welcome"));
}

/**
 * @param args
 */
public static void main(String[] args) {
// TODO Auto-generated method stub
welcome myProg = new welcome();
myProg.setTitle("Ceng 344 - Lab 7");
myProg.setSize(450, 400);
myProg.setLocationRelativeTo(null);
myProg.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
myProg.setVisible(true);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:10:27.150

如果你需要`Welcome`从Button调用Frame `Next`，这样你就可以给这个按钮添加动作。

尝试这个：

```
import java.awt.FlowLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class Main extends JFrame {

    public Main() {
// TODO Auto-generated constructor stub

        setLayout(new FlowLayout(FlowLayout.LEFT, 10, 20));

        add(new JLabel("Name"));
        add(new JTextField(8));
        add(new JLabel("Address"));
        add(new JTextField(15));
        add(new JLabel("Surname"));
        add(new JTextField(8));
        add(new JLabel("Phone"));
        add(new JTextField(8));
        JButton next = new JButton("Next");
        add(next);
        next.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                NextActionPerformed(evt);
            }

            private void NextActionPerformed(ActionEvent evt) {
                welcome myProg = new welcome();
                myProg.setTitle("Ceng 344 - Lab 7");
                myProg.setSize(450, 400);
                myProg.setLocationRelativeTo(null);
                myProg.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                myProg.setVisible(true);
            }
        });

    }

    /**
     * @param args
     */
    public static void main(String[] args) {
// TODO Auto-generated method stub
        Main myProg = new Main();
        myProg.setTitle("Ceng 344 - Lab 7");
        myProg.setSize(450, 400);
        myProg.setLocationRelativeTo(null);
        myProg.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        myProg.setVisible(true);
    }
}

class welcome extends JFrame {

    public welcome() {
// TODO Auto-generated constructor stub

        setLayout(new FlowLayout(FlowLayout.LEFT, 10, 20));
        add(new JLabel("Welcome"));
    }
    /**
     * @param args
     */
} 
```

我删除了 Welcome 的 Main 类，并将其内容添加到**NextActionPerformed**方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:19:41.350

首先

1.  您需要添加`ActionListener`到`JButton`
2.  您可以设置`JFrame`内部构造函数的属性。
3.  你不需要`main()`in `welcome.java`，只有 `constructor 会做。

输入.java

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
public class Enter extends JFrame implements ActionListener {
public Enter(){
    setLayout(new FlowLayout(FlowLayout.LEFT, 10, 20));
    add(new JLabel("Name"));
    add(new JTextField(8));
    add(new JLabel("Address"));
    add(new JTextField(15));
    add(new JLabel("Surname"));
    add(new JTextField(8));
    add(new JLabel("Phone"));
    add(new JTextField(8));
    JButton next = new JButton("Next");
    next.addActionListener(this);
    add(next);
}

public void actionPerformed(ActionEvent ae){
    //if your frame contains more than one button then you can check which button is clicked using ae.getSource() or using ae.getActionCommand()
    new Welcome();
}
public static void main(String[] args) {
    Enter myProg = new Enter();
    myProg.setTitle("Ceng 344 - Lab 7");
    myProg.setSize(450, 400);
    myProg.setLocationRelativeTo(null);
    myProg.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    myProg.setVisible(true);
}
} 
```

//欢迎

```
import java.awt.FlowLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
public class Welcome extends JFrame {
    public Welcome() {
        setLayout(new FlowLayout(FlowLayout.LEFT, 10, 20));
        add(new JLabel("Welcome"));
        setTitle("Ceng 344 - Lab 7");
        setSize(450, 400);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
} 
```

# css - Chrome 扩展 popup.html 不再正确显示

> ID：15241864
> 
> 赞同：2
> 
> 时间：2013-03-06T07:57:40.703
> 
> 标签：css, google-chrome-extension

我创建了一个使用 popup.html 文件的页面操作扩展。它曾经完美地工作。当我单击该图标时，它会显示一个小框，只有 popup.html 页面的一角可见。我设置了 body 和 html css 的高度和宽度，但没有让盒子变大。我还将 css 移动到另一个名为 popup.css 的页面上，并添加到 popup.html 头中。

![popup.html](../Images/48ce3680068840fb4805269b1a6356cf.png)

有没有人遇到过这个问题？请帮忙。

HTML：

```
<html>
<head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="popup_script.js"></script>
    <link href="popup.css" rel="stylesheet" type="text/css">
</head>
<body>
    <ul>
        <li id="all">All</li>
        <li id="title">Name</li>
        <li id="artist">Artist</li>
        <li id="album">Album</li>
        <li id="art">Artwork</li>
    </ul>
    <textarea id="info" type="text"></textarea>
</body>
</html> 
```

CSS：

```
body {
font-family: arial;
font-size: 13pt;
margin: 0;
padding: 0;
color: #06477D;
}

ul {
list-style-type: none;
cursor: pointer;
padding: 0;
margin: 0;
}

li {
text-align: center;
padding: 5px 20px;
}

li:hover {
background: #06477D;
color: white;
}

textarea#info {
position: absolute;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:00:31.040

如果您正在运行最新的 Chrome Canary 版本，那可能就是问题所在。我所有的扩展程序的弹出窗口都是这样显示的。

尝试不同版本的 Chrome？

编辑：是的，我刚刚发现了一些 Chrome/Chromium 的错误报告：

[https://code.google.com/p/chromium/issues/detail?id=180724](https://code.google.com/p/chromium/issues/detail?id=180724) [https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-bugs/ 09xiPf非洲](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-bugs/09xiPfAfrIc)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-30T04:30:27.860

在您的 html 正文标签中设置高度和宽度属性。意味着，只需将样式添加到具有高度和宽度属性的现有正文标签即可。

# c# - 访问 dll 时发现不明确的匹配项

> ID：15241865
> 
> 赞同：4
> 
> 时间：2013-03-06T07:57:41.157
> 
> 标签：c#, reflection, dllimport, overloading

我正在尝试在 dll 中加载一个函数。dll 已加载，但就在调用函数的地方，我遇到了异常

> 找到不明确的匹配项

这是代码片段。

```
Assembly dll = Assembly.LoadFrom(DLLPATH);
if (dll != null)
{
    Type Tp = dll.GetType("ABCD.FooClass");
    if (Tp != null)
    {
        Object obj = Activator.CreateInstance(Tp);

        if (obj != null)
        {                            
            List = (List<String>)obj.GetType().GetMethod("Foo").Invoke(obj, null);
        }
        else
        {
            Console.WriteLine("obj is null");
        }
    }
    Console.WriteLine("Type is null");
}
else
    Console.WriteLine("Dll is not loaded");

Console.ReadKey(); 
```

我正在调用的方法（即`Foo`）**不接受任何参数**，它是一个重载方法。那是我出错的地方还是其他地方？

是否有另一种方法可以调用不接受任何参数的此类方法？我尝试了[此处](https://stackoverflow.com/questions/223495/how-to-use-reflection-to-invoke-an-overloaded-method-in-net)发布的解决方案，但它不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-31T19:07:41.047

如果存在重载并且您想调用不带参数的方法，这是正确的解决方案：

```
MethodInfo mi = obj.GetType().GetMethod("Foo", new Type[] { }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-06T08:27:00.407

`Type.GetMethod(string methodName)`如果有多个具有指定名称的方法（请参阅[此 MSDN 主题](http://msdn.microsoft.com/en-us/library/aa332482%28v=vs.71%29.aspx "msdn 获取方法")） ，该方法将引发您提到的异常。正如`Foo`您所说的重载，我怀疑`Foo`同一个 DLL 中有多个方法。如果您有例如方法：

```
IList<string> Foo()

IList<string> Foo(object someParameter) 
```

该方法`GetMethod(string methodName)`无法确定您要拥有哪一个。在这种情况下，您应该使用该方法`GetMethods`并自行确定正确的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T10:11:35.113

谢谢大家帮助。！！

正如我告诉你的，我调用的方法（即 FOO）是重载的。我想我没有正确使用 GetMethod()。现在，我找到了使用 GetMethods() 函数的解决方案。

我以以下方式更改了我的代码并且它起作用了。！

```
Assembly dll = Assembly.LoadFrom(DLLPATH);
if (dll != null)
{
   Type Tp = dll.GetType("ABCD.FooClass");
   if (Tp != null)
   {
      Object obj = Activator.CreateInstance(Tp);
      if (obj != null)
      {                            
         MethodInfo[] AllMethods = obj.GetType().GetMethods();
         MethodInfo Found = AllMethods.FirstOrDefault(mi => mi.Name == "Foo" && mi.GetParameters().Count() == 0);
         if (Found != null)
             List = (List<String>)Found.Invoke(obj, null);           
      }
      else
        Console.WriteLine("obj is null");       
   }
    else
     Console.WriteLine("Type is null");
 }
  else
     Console.WriteLine("Dll is not loaded"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-11T19:01:30.600

谢谢。

我的“发现歧义匹配”是我在 ASCX(frontend) 中有一个名为 Bio 的文本框，在列表视图 <%# DataBinder.Eval(Container.DataItem, "Bio")%> 中有一个名为 Bio 的数据元素，我命名了一个字符串.CS 中的变量 Bio。

没有构建错误或“红线”，但在运行时产生错误。我以不同的方式重命名了变量，错误就消失了。编写代码的程序员没有遵循 BioTxt 等命名约定。这将消除错误。

# android - ndk-build 中的 pthread 错误

> ID：15241869
> 
> 赞同：1
> 
> 时间：2013-03-06T07:58:09.987
> 
> 标签：android, android-ndk

你好

我曾尝试使用 ndk-build 编译以下 Android.mk 文件。

我收到以下错误。我该如何解决这个问题？

请帮我。

制作文件是

```
# ================================================== ========
# NOTE:
# when executing binary, set LD_LIBRARY_PATH in device
# ================================================== ========

LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

BASEDIR := ../../..
DISTDIR := ../../../..

LOCAL_MODULE := EvaluateFingerQuality

LOCAL_ARM_MODE := arm

# Includes
LOCAL_C_INCLUDES += \
$(BASEDIR)/Common/C \
$(DISTDIR)/Include

# Source files
LOCAL_SRC_FILES := \
$(BASEDIR)/Common/C/Utils.c \
EvaluateFingerQuality.c

LOCAL_LDLIBS += \
-Wl,-z,muldefs -Wl,-rpath=$(DISTDIR)/Lib/Android_$(TARGET_ARCH_ABI) \
-L $(DISTDIR)/Lib/Android_$(TARGET_ARCH_ABI) \
-lNLicensing -lNBiometricTools -lNBiometrics -lNMedia -lNCore -lc

include $(BUILD_EXECUTABLE) 
```

错误是

```
$ ndk-build
Compile arm : EvaluateFingerQuality <= Utils.c
Compile arm : EvaluateFingerQuality <= EvaluateFingerQuality.c
Executable : EvaluateFingerQuality
../../../../Lib/Android_armeabi/libNCore.so: undefined reference to `pthread_rwlock_trywrlock'
../../../../Lib/Android_armeabi/libNCore.so: undefined reference to `pthread_rwlock_rdlock'
../../../../Lib/Android_armeabi/libNCore.so: undefined reference to `pthread_rwlock_tryrdlock'
../../../../Lib/Android_armeabi/libNCore.so: undefined reference to `pthread_rwlock_wrlock'
../../../../Lib/Android_armeabi/libNCore.so: undefined reference to `dladdr'
../../../../Lib/Android_armeabi/libNCore.so: undefined reference to `pthread_rwlock_destroy'
../../../../Lib/Android_armeabi/libNCore.so: undefined reference to `pthread_rwlock_init'
../../../../Lib/Android_armeabi/libNCore.so: undefined reference to `pthread_rwlock_unlock'
collect2: ld returned 1 exit status
/cygdrive/d/android-ndk-r8-windows/android-ndk-r8/build/core/build-binary.mk:381: recipe for target `/cygdrive/d/MegaMatcher_Embedded_1_2_SDK_Trial_for_Android/Tutorials/BiometricTools/C/obj/local/armeabi/EvaluateFingerQuality' failed
make: *** [/cygdrive/d/MegaMatcher_Embedded_1_2_SDK_Trial_for_Android/Tutorials/BiometricTools/C/obj/local/armeabi/EvaluateFingerQuality] Error 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T10:16:36.853

Android 支持从 API 9 版本开始的 pthreads。由于我使用的是旧版本的 NDK，我收到了上述错误。避免像这样**“$ndk-build APP_PLATFORM=android-9”这样的构建**

# c# - 删除数据库，如果创建出错

> ID：15241870
> 
> 赞同：2
> 
> 时间：2013-03-06T07:58:20.050
> 
> 标签：c#, sql, database, visual-studio

我创建了一个`C#`应用程序，该应用程序在首次启动时创建了一个数据库，这`database`将`SQLiteDatabase`存储在项目文件夹中。`database`在中档笔记本电脑上填充这个过程大约需要 5 到 10 秒。所以在低预算笔记本上它会更慢。机会不大，但是如果有人`database`在创建应用程序时强行关闭应用程序怎么办？或者如果发生电源故障怎么办？这样做的结果将是一个损坏的`database`，这将永远不会起作用。

我正在创建我`Database`的 in`c#`并从中填充它`c#`，这发生在 a`try`和`catch`中，我应该`delete`在`Database`何时`catch`调用中的代码吗？我的应用程序在应用程序开始时检查是否已经存在`database`是或否？如果没有，它将被创建。

我该怎么办？`Delete`何时发生`database`错误（代码进入低谷`catch`）或有人对我的问题有更好的解决方案？

提前致谢！

编辑：

已经给了我一些答案：

我看到了下面的代码，我该如何使用这个代码？我应该将创建数据库的代码放在 CallAMethodThatDoesSomeWork 方法中吗？

```
using(TransactionScope tran = new TransactionScope()) {
    CallAMethodThatDoesSomeWork();
    CallAMethodThatDoesSomeMoreWork();
    tran.Complete();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:00:55.980

您应该使用*事务*并在其下创建使用数据库的所有命令。如果应用程序崩溃，则不会创建任何内容。这是一种标准方法。参见，例如[这里](https://stackoverflow.com/questions/224689/transactions-in-net)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T08:01:29.847

Sqlite 似乎支持[事务](http://www.sqlite.org/lang_transaction.html)。所以，打开一个事务，然后填充数据，并且只有`COMMIT`当它全部完成时。

每当您的应用程序启动时，您肯定可以检查数据库中是否*没有*数据（在这种情况下，您上次尝试填充它时出现了问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T08:06:07.887

为什么不使用开始和提交事务？如果发生任何错误，则回滚事务。

有关交易的更多信息，请参阅下面的链接。

[http://www.sqlite.org/lang_transaction.html](http://www.sqlite.org/lang_transaction.html)

# regex - 使用正则表达式将下划线的命名约定转换为 lowerCamelCase

> ID：15241871
> 
> 赞同：0
> 
> 时间：2013-03-06T07:58:34.230
> 
> 标签：regex

有人可以为我提供以下转换的正则表达式吗

abc_xyz => abcXyz
mm_zzz => mmZzz

正如您可能已经猜到的那样，我想将下划线命名约定转换为 lowerCamelCase 命名约定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:59:50.203

我认为您只需将下划线、小写替换为大写，然后将第一个字符显式设置为小写。我已经有一段时间没有使用正则表达式了，但它就像

替换/${UNDERSCORE},${LOWERCASE}/${UPPERCASE}/全局

# regex - 查找第一个单词重复（匹配相似的姓氏）

> ID：15241872
> 
> 赞同：0
> 
> 时间：2013-03-06T07:58:36.367
> 
> 标签：regex

我有一个作者名单。它们可能被列为

*   `LASTNAME, FIRSTNAME`或者
*   `LASTNAME, F.`或者
*   `LASTNAME, F`

查找所有具有相同记录的正则表达式是什么`LASTNAME`？这样我就可以决定是合并记录还是将它们分开，如果他们是不同名字的作者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:43:41.257

这将始终匹配行首的第一个单词，它应该是姓氏：

```
/^\w+/ 
```

使用它来查找姓氏。然后做这样的事情：

*   将姓氏和全名存储在关联数组或编程语言中可用的等效结构中。
*   每当您换行时，请检查您的列表中是否已经存在姓氏。
    *   如果存在，请比较全名并决定要保留哪一个。
    *   如果它不存在，请添加它。

# ruby-on-rails - 如何在 Rails 中生成活动的管理视图

> ID：15241876
> 
> 赞同：1
> 
> 时间：2013-03-06T07:58:46.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我在我的项目中使用活动管理员。

我想覆盖一些视图部分。

如何在我的项目存储库中生成活动管理视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:38:35.230

Active Admin 不像设计或其他可以生成视图的 gem 那样工作。

如果您为任何模型生成了活动管理员，那么在您的应用程序中，您将拥有 admin 文件夹。

它使用继承的资源，因此您可以编辑新的、索引、编辑等。此外，如果您创建任何自定义页面。

因此，要编辑任何继承的资源，比如用户表的示例索引页：

```
index do
    column :name

    column 'Profile pic' do |p|
      image_tag p.logo.url
    end

    column 'Members' do |p|
      p.is_member?
    end

    default_actions
  end 
```

如果您需要更多帮助，请告诉我。

[http://activeadmin.info/documentation.html](http://activeadmin.info/documentation.html)

# php - PHP 链接方法

> ID：15241881
> 
> 赞同：1
> 
> 时间：2013-03-06T07:58:59.470
> 
> 标签：php, methods, chaining

```
class AAA

{

    function getRealValue($var)
    {
        $this->var = $var;
        return $this;
    }

    function asString()
    {
        return (string) $this->var;
    }

}

$a = new AAA;
$a->getRealValue(30); 
$a->getRealValue(30)->asString(); 
```

所以当我调用 $a->getRealValue(30) 它应该返回 30，

但是当我调用 $a->getRealValue(30)->asString() 它应该返回'30'作为字符串'。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T08:01:57.333

> 所以当我调用 $a->getRealValue(30) 它应该返回 30，但是当我调用 $a->getRealValue(30)->asString() 它应该返回 '30' 作为字符串'。

这是不可能的（[还](https://github.com/nikic/scalar_objects)）。当`getRealValue`返回一个标量值时，你不能调用它的方法。

除此之外，你的课对我来说毫无意义。您的方法被调用`getRealValue`，但它接受一个参数并*设置*值。所以应该叫它`setRealValue`。撇开方法链不谈，您是否正在寻找一个 ValueObject？

```
class Numeric
{
    private $value;

    public function __construct($numericValue)
    {
        if (false === is_numeric($numericValue)) {
            throw new InvalidArgumentException('Value must be numeric');
        }
        $this->value = $numericValue;
    }

    public function getValue()
    {
        return $this->value;
    }

    public function __toString()
    {
        return (string) $this->getValue();
    }
}

$fortyTwo = new Numeric(42);
$integer = $fortyTwo->getValue(); // 42
echo $fortyTwo; // "42" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T08:02:04.303

它不是真的， $a->getRealValue(30) 将返回对象 $a 而不是值。但 asString 将以字符串格式返回值。

通常当你想得到这样的东西时，你会这样做：

```
$a->getRealValue(30)->get();
//Or
$a->getRealValue(30)->getAsString(); 
```

# asp.net - WCF 服务的 Global.asax 的正确“构建操作”设置是什么？

> ID：15241882
> 
> 赞同：1
> 
> 时间：2013-03-06T07:59:02.327
> 
> 标签：asp.net, visual-studio-2010, wcf, visual-studio, global-asax

我有一个 Global.asax 文件，它是 WCF 服务 proct 的一部分。

**Global.asax**部署的正确**“构建操作”** *设置*是什么？

 **（以便正确食用）

例如：应用程序定义？-总是复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:13:51.077

在我们的应用程序中，我们将其*构建操作*设置为`Content`，并将*复制到输出目录*设置设置为`Do not copy`没有问题。**

# c# - 为多个库添加一次引用（例如，通过添加 "using system.web" ）

> ID：15241884
> 
> 赞同：0
> 
> 时间：2013-03-06T07:59:04.017
> 
> 标签：c#, asp.net, reference, using

有没有办法将每个 cs 文件顶部使用的所有“使用”语句放在一个公共文件中，然后引用该公共文件？

# gcc - 无法在 EC2 上使用 GCC 进行编译

> ID：15241886
> 
> 赞同：2
> 
> 时间：2013-03-06T07:59:05.200
> 
> 标签：gcc, amazon-ec2

我正在尝试在 AWS EC2 实例（c1.medium）上使用 GCC 编译程序。这些`cc1plus`进程已正确启动，但一段时间后它们会停止使用任何 CPU，并且整个编译过程会减慢并且永远不会完成。

在`top`我可以看到，`wa`随着编译速度变慢，“”统计数据急剧增加。

最初：

```
%Cpu(s): 88.1 us,  5.4 sy,  0.0 ni,  0.0 id,  0.5 wa,  0.0 hi,  0.0 si,  6.0 st 
```

当编译过程变慢时：

```
%Cpu(s):  0.2 us,  0.3 sy,  0.0 ni, 50.2 id, 49.3 wa,  0.0 hi,  0.0 si,  0.0 st 
```

我尝试了很多不同的实例类型，结果都一样。

据我了解，高 wa/iowait 意味着磁盘速度较慢。因此，我还尝试在 ec2 实例的不同挂载上编译应用程序，但这并没有带来改进。

有没有人有在 EC2 上编译 c/c++ 应用程序的经验并且知道如何解决这个问题？

**更新 2013-03-06 08:00**

根据评论中的要求：

```
$ gcc --version 
gcc (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:55:57.100

解决方案是使用 RAM 超过 8 GB 的机器。显然 GCC 使用了大量 RAM 来编译这个特定的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T23:12:52.133

很高兴看到您自己找到了解决方案。

我还注意到，在执行处理器繁重的操作（例如编译代码）时，您可以在*微*实例上获得这种挂起行为。始终至少在小型设备上进行此类操作，然后在必要时在完成后转换回微型设备。

# c# - 我没有在“System.IO.Compression”命名空间中找到“ZipFile”类

> ID：15241889
> 
> 赞同：116
> 
> 时间：2013-03-06T07:59:14.010
> 
> 标签：c#, zip

我不能在名称空间“System.IO.Compression”中使用“Zipfile”类，我的代码是：

```
using System;
using System.IO;
using System.IO.Compression;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            string startPath = @"c:\example\start";
            string zipPath = @"c:\example\result.zip";
            string extractPath = @"c:\example\extract";

            ZipFile.CreateFromDirectory(startPath, zipPath, CompressionLevel.Fastest,true);

            ZipFile.ExtractToDirectory(zipPath, extractPath);
        }
    }
} 
```

错误是：

当前上下文中不存在名称“zipfile”

我该如何解决？

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2013-03-06T08:01:31.107

您需要为此提供额外的参考；最方便的方法是通过 NuGet 包[System.IO.Compression.ZipFile](https://www.nuget.org/packages/System.IO.Compression.ZipFile/)

```
<!-- Version here correct at time of writing, but please check for latest -->
<PackageReference Include="System.IO.Compression.ZipFile" Version="4.3.0" /> 
```

如果您在没有 NuGet 的情况下使用 .NET Framework，则需要添加对程序集“System.IO.Compression.FileSystem.dll”的 dll 引用 - 并确保您至少使用 .NET 4.5（因为它没有存在于早期的框架中）。

有关信息，您可以[从 MSDN找到程序集和 .NET 版本](http://msdn.microsoft.com/en-gb/library/system.io.compression.zipfile.aspx)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-01-22T17:57:44.983

对于那些是 .NET 中的绿色程序员的人，要按照[MarcGravell](https://stackoverflow.com/users/23354/marc-gravell)所述添加 DLL 引用，请按照以下步骤操作：

在 Visual C# 中添加引用

1.  在解决方案资源管理器中，右键单击项目节点，然后单击添加引用。
2.  在“添加引用”对话框中，选择指示要引用的组件类型的选项卡。
3.  选择要引用的组件，然后单击“确定”。

来自 MSDN 文章，[如何：使用添加引用对话框添加或删除引用](http://msdn.microsoft.com/en-us/library/wkze6zky.aspx)。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-07-18T10:02:21.863

如果无法升级到 4.5，可以使用外部包。其中之一是来自 DotNetZipLib 的 Ionic.Zip.dll。

```
using Ionic.Zip; 
```

你可以在这里下载它，它是免费的。[http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-07-18T14:39:23.680

只需转到参考并添加“System.IO.Compression.FileSystem”。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-22T10:07:16.867

对我有帮助的解决方案：转到工具 > NuGet 包管理器 > 管理 NuGet Packaged for Solution... > 浏览 > 搜索 System.IO.Compression.ZipFile 并安装它

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-03T14:28:21.440

`System.IO.Compression`现在可以作为Microsoft 维护 的[nuget 包使用。](https://www.nuget.org/packages/System.IO.Compression/)

要使用`ZipFile`，您需要下载`System.IO.Compression.ZipFile` [nuget 包](https://www.nuget.org/packages/System.IO.Compression.ZipFile/)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-01T12:38:48.533

我知道这是一个旧线程，但我不能避免发布一些有用的信息。我看到 Zip 问题出现了很多，这几乎回答了大多数常见问题。

为了解决使用 4.5+ 的框架问题......他们是由 jaime-olivares 创建的 ZipStorer 类：[https](https://github.com/jaime-olivares/zipstorer) ://github.com/jaime-olivares/zipstorer ，他还添加了一个如何使用该类的示例好吧，还添加了一个如何搜索特定文件名的示例。

对于如何使用它并以某个文件扩展名进行迭代的参考，您可以这样做：

```
#region
/// <summary>
/// Custom Method - Check if 'string' has '.png' or '.PNG' extension.
/// </summary>
static bool HasPNGExtension(string filename)
{
    return Path.GetExtension(filename).Equals(".png", StringComparison.InvariantCultureIgnoreCase)
        || Path.GetExtension(filename).Equals(".PNG", StringComparison.InvariantCultureIgnoreCase);
}
#endregion

private void button1_Click(object sender, EventArgs e)
{
    //NOTE: I recommend you add path checking first here, added the below as example ONLY.
    string ZIPfileLocationHere = @"C:\Users\Name\Desktop\test.zip";
    string EXTRACTIONLocationHere = @"C:\Users\Name\Desktop";

    //Opens existing zip file.
    ZipStorer zip = ZipStorer.Open(ZIPfileLocationHere, FileAccess.Read);

    //Read all directory contents.
    List<ZipStorer.ZipFileEntry> dir = zip.ReadCentralDir();

    foreach (ZipStorer.ZipFileEntry entry in dir)
    {
        try
        {
            //If the files in the zip are "*.png or *.PNG" extract them.
            string path = Path.Combine(EXTRACTIONLocationHere, (entry.FilenameInZip));
            if (HasPNGExtension(path))
            {
                //Extract the file.
                zip.ExtractFile(entry, path);
            }
        }
        catch (InvalidDataException)
        {
            MessageBox.Show("Error: The ZIP file is invalid or corrupted");
            continue;
        }
        catch
        {
            MessageBox.Show("Error: An unknown error ocurred while processing the ZIP file.");
            continue;
        }
    }
    zip.Close();
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-15T15:02:11.627

在解决方案资源管理器中，右键单击引用，然后单击以展开程序集，找到 System.IO.Compression.FileSystem 并确保已选中。然后你可以在课堂上使用它 -`using System.IO.Compression;`

[添加参考装配截图](https://i.stack.imgur.com/RQlAc.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-05T13:06:59.510

添加 System.IO.Compression.ZipFile 作为 nuget 参考它正在工作

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-12T01:50:09.997

这里的问题是您刚刚添加了对 System.IO.Compression 的引用它缺少对 System.IO.Compression.Filesystem.dll 的引用

而且您需要在 .net 4.5 或更高版本上执行此操作（因为它在旧版本中不存在）。

我刚刚在 TechNet 上发布了一个脚本 也许有人会发现它很有用，它需要 .net 4.5 或 4.7

[https://gallery.technet.microsoft.com/scriptcenter/Create-a-Zip-file-from-a-b23a7530](https://gallery.technet.microsoft.com/scriptcenter/Create-a-Zip-file-from-a-b23a7530)

# mongodb - 如何在 yii 中为 mongo db 编写 udate 查询？

> ID：15241891
> 
> 赞同：0
> 
> 时间：2013-03-06T07:59:18.100
> 
> 标签：mongodb, yii

```
User::model()->update($_id, array('$set' => array('d' => 1)[, array('deleted' => 1)[, array('w' => 2)]]); 
```

我想用指定的用户 ID 更新用户表。它不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:24:03.110

括号是可选部分，这源于 PHP 手册（即： http: [//php.net/manual/en/function.pathinfo.php](http://php.net/manual/en/function.pathinfo.php)）所以：

```
User::model()->update($_id, array('$set' => array('d' => 1)
    [, array('deleted' => 1)[, array('w' => 2)]]); 
```

永远不会工作，实际上会在当前状态下在 PHP 中引发语法错误。相反，您可以尝试：

```
User::model()->update($_id, array('$set' => array('d' => 1))); 
```

# dependencies - 如何解决“ImportError：没有名为查询字符串的模块”？

> ID：15241897
> 
> 赞同：0
> 
> 时间：2013-03-06T07:59:38.487
> 
> 标签：dependencies, plone, versioning, product, pinning

在 Plone-4.1.6 站点中安装具有多个依赖项的产品时，我开始创建站点：

```
2013-03-06 09:18:38 ERROR Zope.SiteErrorLog 1362557918.010.833996902243 http://myserver.de:8182/@@plone-addsite
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module Products.CMFPlone.browser.admin, line 204, in __call__
  Module Products.CMFPlone.factory, line 100, in addPloneSite
  Module Products.GenericSetup.tool, line 353, in runAllImportStepsFromProfile
   - __traceback_info__: profile-aip.policy:default
  Module Products.GenericSetup.tool, line 1123, in _runImportStepsFromContext
  Module Products.GenericSetup.tool, line 1036, in _doRunImportStep
   - __traceback_info__: plone.app.registry
  Module plone.app.registry.exportimport.handler, line 35, in importRegistry
  Module plone.app.registry.exportimport.handler, line 74, in importDocument
  Module plone.app.registry.exportimport.handler, line 232, in importRecords
  Module zope.dottedname.resolve, line 38, in resolve
ImportError: No module named querystring 
```

由于错误消息表明 paregistry 存在冲突，我尝试使用“bin/buildout -n”获取最新版本（现在是 1.2.2），但仍然选择了旧版本（1.0.1）。

所以，我把它固定在 buildout 的配置中，然后得到：

> 版本 1.0.1 与要求 'plone.app.registry==1.2.2' 不一致。而：安装实例。错误：错误的版本 1.0.1

假设其中一个 deps 将 paregistry 关闭，我像这样 grep 了 egg-cache：

```
grep -r --include=requires.txt "plone.app.registry" /path/to/eggs 
```

就声明而言，没有结果只需要“大于”版本。

有谁知道，我该如何解决这个问题？

**编辑：** 通过扩展部分（[http://dist.plone.org/release/4.1.6/versions.cfg](http://dist.plone.org/release/4.1.6/versions.cfg)）包含的配置，包含我正在寻找的行，一开始没有想到，点击“关闭”，现在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:36:32.883

您尝试安装的软件包缺少依赖项。问题不在于 plone.app.registry。

您可以通过将 plone.app.querystring 添加到构建中的包列表来解决您的问题；但是，您正在安装的插件也可能缺少其他依赖项。

# c# - 清除用户名绑定（无法自动调试 wcf 服务）

> ID：15241901
> 
> 赞同：2
> 
> 时间：2013-03-06T07:59:45.213
> 
> 标签：c#, .net, wcf

最近我读了一篇关于使用用户名和密码身份验证的自己的 WCF 绑定的文章。

这是一篇文章：[http](http://webservices20.blogspot.ru/2008/11/introducing-wcf-clearusernamebinding.html) ://webservices20.blogspot.ru/2008/11/introducing-wcf-clearusernamebinding.html 。

这个项目“清除用户名绑定”运行良好。但对我来说问题是我希望 WCF 服务器托管在 WCF 服务主机中。（就像您在 VS 中从模板创建任何服务库一样，它将在 WCF 服务主机中运行）。我已经完成了接下来的事情。我创建了一个新项目（服务库），只需将您的服务和合同复制到这个新项目中。然后我复制了该`app.config` `system.serviceModel`部分并添加了引用`ClearUserNameBinding`项目和 MyUserNameValidator。就是这样 接下来，我运行客户端应用程序。一切都很好。WCF 服务主机已经启动，客户端应用程序按我的预期结束。但问题是，现在如果我在服务实现中的某处放置一个断点（让它位于 EchoString 函数的某处）并再次运行，我总是在 VS IDE 中收到一条消息“无法自动调试 WCFServiceLibrary”。我真的不知道如何处理这个错误以及如何摆脱它，因为我需要调试可供我使用。

PS 这个错误只在我使用 ClearUserNameBinding 时出现。如果我使用例如 wsHttpBinding 它就完美了。当然我已经`<system.web> <compilation debug="true" />` 在我的配置文件中打开了

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:44:46.870

在 Visual Studio 中，在客户端的第一行放置一个断点并附加到进程“WCF 服务主机”。然后你可以调试到它的断点。不确定如何在不附加到另一个进程的情况下执行此操作。

您也可以尝试不将 CUB 用作单独的绑定，而是将其用作自定义绑定。您将需要从代码创建自定义绑定。伪代码：

```
var b = new CustomBinding();
b.elements.add(new TextEncodingElement())
b.elements.add(new SecurityElement() {SecurityMode="UsernameOverTransport"})
b.elements.add(new AutoSecuredHttpTransportElement()) 
```

# java - 我可以在 Scala 中做什么而在 Java 中无法做到？

> ID：15241903
> 
> 赞同：1
> 
> 时间：2013-03-06T07:59:50.253
> 
> 标签：java, scala

我在这里和那里阅读有关 Scala 的信息，但我无法理解 Java 开发人员从使用 Scala 会获得什么。
我认为这与函数式编程有关。
有人可以给我一个具体的例子，说明我在 Java 中不能做的事情，而去 Scala 会救我吗？
这并不是要批评 Java 或类似的东西。我只需要了解 Scala 的用法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:11:54.900

我也从 Java 世界跳了出来，我认为可以拯救你的第一件事是 Scala 有很多编译器魔法，可以帮助你保持代码简单和干净。

例如，以下是 Scala 的案例类将如何帮助您，我们可以使用它定义一个类：

```
case class Student(name: String, height: Double, weight: Double) 
```

而不是这个：

```
class Student {
  public final String name;
  public final String height;
  public final String weight;
  public Student(String name, double height, double weight) {
    this.name = name;
    this.height = height;
    this.weight = weight;
  }
} 
```

是的，就是这样，您不需要自己编写构造函数，并且您拥有所有这些`equals`, `hasCode`,`toString`方法都是免费的。

在这个简单的情况下，这看起来没什么大不了的，但 Scala 确实让您在 OO 中更轻松、更快速地进行建模，即使您没有使用函数式编程结构。

此外，高阶函数和其他函数式编程结构也将为您提供强大的工具来解决您在 Scala 中的问题。

# 更新

好的，以下是函数式编程如何使您的代码更易于理解和清理的示例。

函数式编程是一个很大的话题，但我发现即使我来自 Java 世界并且不了解什么是 monad 或 typeclass 或其他什么，Scala 的函数式编程结构仍然可以帮助我更轻松、更有表现力地解决问题。

很多时候我们需要遍历一个集合并对集合中的元素做一些事情，取决于一个条件来决定做什么。

举个简单的例子，如果我们想在java中遍历一个List，并删除所有大小为零的文件。我们将在 Java 中执行的操作可能如下所示：

```
List<File> files = getFiles()

for (File file: files) {
    if (file.size() == 0) {
        file.delete();
    }
} 
```

这非常简单明了，不是吗？但是使用 Scala 中的函数式编程结构，我们可以执行以下操作：

```
val files = getFiles()
val emptyFiles = files.filter(_.size == 0)

emptyFiles.foreach(_.delete()) 
```

正如你所看到的，它的代码比 Java 的版本少，而且输出的意图也很明确——我们想要过滤掉所有大小为 0 的文件，并为所有文件调用`File.delete()`它。

一开始它可能看起来很奇怪，但是一旦你习惯了它并以正确的方式使用它，它会让你的代码更容易阅读。

该技术在 Java ( [Function Java](http://functionaljava.org/) ) 中是可行的，但最终它看起来像以下代码：

```
list.filter(new Predicate<File>() {
    public boolean predicate(File f) {
        return f.size() == 0;
    }
}) 
```

我将坚持使用原始 for 循环版本，恕我直言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T08:19:35.580

具体来说你的问题：

*   在 scala 中，您可以进行模式匹配
*   scala 具有高阶函数（*与*java8 lambdas 不同）
*   匿名函数字面量
*   强类型推断
*   懒惰的评价
*   方差注释
*   高等类型
*   具有特征的混合行为（可堆叠组合）
*   隐式定义和转换
*   xml 文字
*   REPL

我可以继续，但我敦促您至少阅读一些文档。
例如，您可以从[这里开始](https://stackoverflow.com/tags/scala/info)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T08:06:26.210

为了帮助您入门，Graham Lea 的这篇文章列出了 Scala 可以提高您的生产力的许多方法：

*[用于惊人生产力的新 Java 库](http://www.grahamlea.com/2013/02/a-new-java-library-for-amazing-productivity/)*。

它开始于：

*   一个广泛而强大的集合框架
*   大大减少样板的收集方法
*   没有变异方法的不可变集合（与 java.util 类不同，如果列表是不可变的，则 List.add() 会抛出异常）
*   一个很棒的类似 switch 的函数，它不仅匹配数字、枚举、字符和字符串，而且可以简洁地匹配许多不同类中的各种模式，甚至在你自己的类中
*   为字段不变的类自动编写有意义的 equals、hashCode 和 toString 方法的注解（不使用反射）
*   ...

而这样的例子不胜枚举。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T08:05:25.427

函数式编程是最简短和准确的陈述。这和 scala 促进的更短更富有表现力的代码转化为更高的生产力。

Scala 也更加[简洁](https://stackoverflow.com/questions/2952732/samples-of-scala-and-java-code-where-scala-code-looks-simpler-has-fewer-lines/2953040)

这方面还有其他几个[例子](https://docs.google.com/document/d/1W38UZuDkPrVwxWjjCIQaXNftnpVyYHUE4icLQ4XbGAU/edit?pli=1)。

# python - 从 django 1.4.3 中的媒体下载文件

> ID：15241905
> 
> 赞同：0
> 
> 时间：2013-03-06T07:59:52.203
> 
> 标签：python, django, file, download, media

我正在使用 django 设计两个基本页面，其中一个页面用于将文件上传到媒体，另一个页面列出了媒体文件夹中所有上传的文件以及下载这些文件的链接。以下是我的代码，

**网址.py**

```
from django.conf.urls.defaults import *
from django.conf import settings

urlpatterns = patterns('',
             url(r'^files$', 'learn_django.views.upload_file'),
             url(r'^list_of_files$', 'learn_django.views.files_list'),
             url(r'^download$', 'learn_django.views.download'),
)
if settings.DEBUG:
    urlpatterns = patterns('',
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve',{'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
) + urlpatterns 
```

**视图.py**

```
from django.conf import settings
from django.shortcuts import render_to_response
from learn_django.forms import UploadFileForm
import os

def upload_file(request):
    if request.method == 'POST':
        form = UploadFileForm(request.POST, request.FILES)
        if form.is_valid() and form.is_multipart():
            handle_uploaded_file(request.FILES['file'])
            return HttpResponseRedirect('/files_list')
    else:
        form = UploadFileForm()
    return render_to_response('files_form.html', {'form': form},context_instance=RequestContext(request))

def handle_uploaded_file(file,path=''):
    filename = file._get_name()
    destination_file = open('%s/%s' % (settings.MEDIA_ROOT, str(path) + str(filename)), 'wb+')
    for chunk in file.chunks():
        destination_file.write(chunk)
    destination_file.close()

def files_list(request):
    return render_to_response('files_list.html',{'total_files':os.listdir(settings.MEDIA_ROOT),'path':settings.MEDIA_ROOT},context_instance=RequestContext(request))

def download(request):
    #do something to downlaod the files here.....
    return something 
```

**文件列表.html**

```
<table border="1" colspan="2" width="100%">
   <tr>
     <th width="60%">File</td>
     <th width="40%">Download</td> 
   </tr>
 {% for file in total_files %}
   <tr>
     <td width="60%">{{file}}</td>
     <td width="40%" align="center"><a href="/download" style="text-decoration:None">Download here</a></td> 
   </tr>
 {% endfor %}  
</table> 
```

`files`所以在上面的代码中，当我们在url访问主页时，`file_form.html`页面将显示一个包含带有上传选项的文件的表单，所以当我们上传文件时，它上传成功并重定向到`files_list.html`显示上传列表的页面媒体目录中的文件以及用于下载该特定文件的 URL。

最后我的意图是当我们点击每个文件旁边的链接时以表格的形式下载上传的文件，如`files_list.html`页面所示。

当我们点击链接时，我在谷歌上搜索了很多关于下载特定上传文件的信息，但找不到它，所以就这么接近了。

`files_list.html`任何人都可以让我知道如何通过使用页面中显示的锚标签概念来实现从媒体下载文件

如果有人`download`用下载该特定文件的代码填充我的视图函数会更有帮助，这样我实际上可以非常快速地学习它......

**已编辑**

编辑后我更新了我的代码如下

**网址.py**

将以下行添加到 url conf

```
 url(r'^download/(?P<file_name>.+)$', 'learn_django.views.download'), 
```

编辑下载的视图功能如下

```
def download(request,file_name):
    response = HttpResponse(mimetype='application/force-download')
    response['Content-Disposition'] = 'attachment; filename=%s' % smart_str(file_name)
    response['X-Sendfile'] = smart_str(settings.MEDIA_ROOT + file_name)
    return response 
```

html文件中的锚标记如下

```
<td width="40%" align="center"><a href="/download/{{file}}" style="text-decoration:None">Download here</a></td> 
```

所以当我点击`download`链接时，它显示以下错误

```
Request Method: GET
Request URL:    http://localhost:8000/download
Django Version: 1.4.3
Exception Type: error
Exception Value:    
unbalanced parenthesis
Exception Location: /usr/lib64/python2.7/re.py in _compile, line 245
Python Executable:  /usr/bin/python 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:34:12.157

```
url(r'^download/$', 'learn_django.views.download'),

<a href="/download/?file_name={{file}}">Download</a>

def download(request):
    file_name = request.GET.get('per_page')
    path_to_file = "/media/{0}".format(file_name)
    response = HttpResponse(mimetype='application/force-download')
    response['Content-Disposition'] = 'attachment; filename=%s' % smart_str(file_name)
    response['X-Sendfile'] = smart_str(path_to_file)
    return response 
```

# javascript - JavaScript 未定义抛出 TypeError

> ID：15241913
> 
> 赞同：0
> 
> 时间：2013-03-06T08:00:10.903
> 
> 标签：javascript, undefined

我现在正在学习 javascript，发现这段代码有一些问题

```
var response = '{"status":{"message":{"-1":[111]}}}';
response = jQuery.parseJSON(response);
if ( typeof (response.status.warning[-1]) == "undefined" ) {
    console.log(true);
}; 
```

为什么他会抛出错误，而不是仅仅忽略“console.log”部分？

![dafuq 是这个 javascript](../Images/52dbd2979b88aa9f411d57f2a590f19a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:04:43.507

您需要更有防御性地对此进行编码：

```
if (response && (!response.status || !response.status.warning || typeof (response.status.warning[-1]) == "undefined" ) { 
```

检查是否存在`response.status`并且`response.status.warning`应该进行。如果`response.status`甚至不存在，`response.status.warning`将产生错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T08:02:18.657

因为它甚至无法通过这部分：

```
typeof (response.status.warning[-1]) == "undefined" 
```

因为`response.status.warning`是`undefined`。这就是它抛出错误的原因。

* * *

`response.status.warning`仅当您确定`response`并且`.status`不存在时才检查是否存在`undefined`：

```
if(response.status.warning){
    console.log("It exists!");
} 
```

# javascript - 如何使用 JavaScript 更改 CSS 属性

> ID：15241915
> 
> 赞同：66
> 
> 时间：2013-03-06T08:00:27.207
> 
> 标签：javascript, html, css, hover

我想使用 JavaScript 更改类的 CSS 属性。我真正想要的是当 a`<div>`悬停时，另一个`<div>`应该变得可见。

```
.left,
.right {
  margin: 10px;
  float: left;
  border: 1px solid red;
  height: 60px;
  width: 60px
}

.left:hover,
.right:hover {
  border: 1px solid blue;
}

.center {
  float: left;
  height: 60px;
  width: 160px
}

.center .left1,
.center .right1 {
  margin: 10px;
  float: left;
  border: 1px solid green;
  height: 60px;
  width: 58px;
  display: none;
}
```

```
<div class="left">
  Hello
</div>
<div class="center">
  <div class="left1">
    Bye
  </div>
  <div class="right1">
    Bye1
  </div>
</div>
<div class="right">
  Hello2
</div>
```

当 hello1 div 悬停时，bye1 div 应该是可见的，同样当 hello2 悬停时 bye2 应该出现。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-06T08:05:22.430

您可以`style`为此使用属性。例如，如果您想更改边框 -

```
document.elm.style.border = "3px solid #FF0000"; 
```

同样的颜色 -

```
 document.getElementById("p2").style.color="blue"; 
```

最好的事情是你定义一个类并这样做 -

`document.getElementById("p2").className = "classname";`

（必须相应地考虑跨浏览器工件）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2021-05-22T12:34:22.780

```
// select element from DOM using *const*
const sample = document.getElementById("myid"); // using CONST
// or you can use *var*
var sample = document.getElementById("myid"); // using VAR

// change css style
sample.style.color = 'red'; // Changes color, adds style property.
// or (not recomended)
sample.style = "color: red"; //Replaces all style properties. NOT RECOMENDED 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-06T08:03:42.967

使用`document.getElementsByClassName('className').style = your_style`.

```
var d = document.getElementsByClassName("left1");
d.className = d.className + " otherclass"; 
```

**对包含在 html 属性的双引号中的 JS 字符串使用单引号**

**例子**

```
<div class="somelclass"></div> 
```

然后`document.getElementsByClassName('someclass').style = "NewclassName";`

```
<div class='someclass'></div> 
```

然后`document.getElementsByClassName("someclass").style = "NewclassName";`

**这是个人经验。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-03T08:54:54.483

考虑以下示例：如果您想更改单个 CSS 属性（例如，将颜色更改为“蓝色”），则以下语句可以正常工作。

```
document.getElementById("ele_id").style.color="blue"; 
```

但是，对于更改多个属性，更稳健的方法是使用`Object.assign()`or, `object spread operator {...}`;

## 见下文：

```
const ele=document.getElementById("ele_id");
const custom_style={
    display: "block",
    color: "red"
}

//Object.assign():
Object.assign(ele.style,custum_style); 
```

扩展运算符的工作方式类似，只是语法略有不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T09:18:38.277

仅供参考，这可以通过 CSS 完成，只需对 HTML 和 CSS 进行少量更改

HTML：

```
<div class="left">
    Hello
</div>
<div class="right">
    Hello2
</div>
<div class="center">
       <div class="left1">
           Bye
    </div>
       <div class="right1">
           Bye1
    </div>    
</div> 
```

CSS：

```
.left, .right{
    margin:10px;
    float:left;
    border:1px solid red;
    height:60px;
    width:60px
}
.left:hover, .right:hover{
    border:1px solid blue;
}
.right{
     float :right;
}
.center{
    float:left;
    height:60px;
    width:160px
}

.center .left1, .center .right1{
    margin:10px;
    float:left;
    border:1px solid green;
    height:60px;
    width:58px;
    display:none;
}
.left:hover ~ .center .left1 {
    display:block;
}

.right:hover ~ .center .right1 {
    display:block;
} 
```

和演示：http: [//jsfiddle.net/pavloschris/y8LKM/](http://jsfiddle.net/pavloschris/y8LKM/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-06T08:04:38.903

```
var hello = $('.right') // or var hello = document.getElementByClassName('right')
var bye = $('.right1')
hello.onmouseover = function()
{
    bye.style.visibility = 'visible'
}
hello.onmouseout = function()
{
    bye.style.visibility = 'hidden'
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-10-26T13:15:13.897

你可以像这样使用 jQuery 来做到这一点。

```
$('.left, .right').on('mouseenter', function(e) {
    if ($(this).attr('class') == 'left1') {
        $('.left1').css({
            /* 'visibility': 'visible', */
            'display': 'block',
        })
    } else if ($(this).attr('class') == 'left1') {
        $('.right1').css({
            /* 'visibility': 'visible', */
            'display': 'block',
        })
    }
}) 
```

或者你可以像这样使用它

**对于第一个要求**

```
$('.left').on('mouseenter', function(e) {
    $('.left1').css({
        /* 'visibility': 'visible', */
        'display': 'block',
    })
}) 
```

**第二个要求**

```
$('.right').on('mouseenter', function(e) {
    $('.right1').css({
        /* 'visibility': 'visible', */
        'display': 'block',
    })
}) 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-03-06T08:05:59.700

使用 jQuery 真的很容易。

例如：

```
$(".left").mouseover(function(){$(".left1").show()});
$(".left").mouseout(function(){$(".left1").hide()}); 
```

我已经更新了你的小提琴：http: [//jsfiddle.net/TqDe9/2/](http://jsfiddle.net/TqDe9/2/)

# linux-kernel - 没有ioctl命令

> ID：15241924
> 
> 赞同：1
> 
> 时间：2013-03-06T08:01:07.600
> 
> 标签：linux-kernel, ioctl

在内核空间中运行函数时

```
kernel_sock_ioctl(socket, FIONBIO, &on) 
```

它返回错误 ENOIOCTLCMD 515 /* 没有 ioctl 命令 */

但是在用户空间中执行相同的功能时

```
ioctl(s, FIONBIO, &on) 
```

它成功了

为什么 ioctl 在内核空间中缺少相同的功能以及如何处理它？

如何在内核空间应用 FIONBIO ioctl？

# c++ - 无法从 C++ 程序调用可执行文件

> ID：15241933
> 
> 赞同：0
> 
> 时间：2013-03-06T08:01:53.633
> 
> 标签：c++, windows, visual-studio-2010, executable, system-calls

我在网上下载了一个软件包。假设包名为 aPackage.zip。解压文件夹后，它包含一个可执行文件 Cassie.exe，它需要两个输入文件，file1.txt 和 file2.txt。我只需要双击 Cassie.exe，它就会自动开始正常运行。现在我想测量运行 Cassie.exe 需要多少时间，所以我在 Visual C++ 2010 express 中编写了一个新项目 (TimeMeasure) 的小 c++ 程序 (main.cpp)。但是，虽然我把 Cassie.exe、file1.txt 和 file2.txt 放在同一个文件夹中，但 Cassie.exe 还是老是报错，无法打开 file2.txt。下面是 TimeMeasure 项目的 main.cpp 的代码。

```
#include <iostream>
#include <fstream>
#include <stdlib.h>
#include <stdio.h>      /* printf */
#include <time.h>       /* clock_t, clock, CLOCKS_PER_SEC */
#include <math.h>       /* sqrt */

using namespace std;

int main () {

  const clock_t begin_time = clock();
  system("C:\\aPackage\\Cassie.exe C:\\aPackage\\file1.txt C:\\aPackage\\file2.txt");

  ofstream myfile;
  myfile.open ("Time.txt");
  myfile << "Time used is %d sec \n"<<float( clock () - begin_time ) /  CLOCKS_PER_SEC;
  myfile.close();
  system("PAUSE");
  return 0;
} 
```

TimeMeasure 项目在路径创建

```
C:\Users\Cassie\Documents\Visual Studio 2010\Projects\TimeMeasure 
```

这就是为什么我使用 aPackage 文件夹的绝对路径。我的电脑是window 7 home OS系统。谁能告诉我我做错了什么？非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:56:50.913

`Cassie.exe`可能会在当前目录中查找这两个文件。当你双击一个可执行文件运行它时，当前目录设置为可执行文件所在的同一目录，所以它可以工作。当你使用`system()`当前目录时没有改变（在这种情况下是包含 TimeMeasure 的目录）所以它不起作用。

用于[`_chdir`](http://msdn.microsoft.com/en-us/library/vstudio/bf7fwze1.aspx)在调用之前设置当前目录`system`，或尝试类似

```
system("cd /d C:\\aPackage && Cassie.exe"); 
```

这应该与双击它的效果几乎完全相同。

# vb.net - SSIS：使用自定义组件执行包

> ID：15241935
> 
> 赞同：0
> 
> 时间：2013-03-06T08:01:55.677
> 
> 标签：vb.net, ssis

我创建了一个旨在实现高度灵活性的包，允许在运行时确定从平面文件到自定义组件的映射。我通过执行以下操作来做到这一点：

1.  创建了一个从数据库表中获取列映射的包。此表包含“平面文件源列”和“数据库表列”。此数据存储在包变量中。

2.  我创建了一个自定义管道组件（目标适配器），它处理来自平面文件的行，然后用来自平面文件的数据将数据表填充到“数据库表列”中。该数据表存储在一个变量中。（此自定义组件未通过设计器添加到包中）

3.  为了实现“动态映射”，我创建了一个脚本任务，该任务在获取列映射的初始 SQL 查询之后运行。脚本任务执行以下操作：

    *   创建一个包
    *   添加数据流任务
    *   将平面文件源（和连接）添加到数据流任务
    *   添加我的自定义组件
    *   将平面文件源映射到我的自定义组件
    *   传入我的“父包变量”并执行包
    *   从新创建的包中检索“数据表变量”

然后我运行另一个脚本任务，它为数据表变量中的每条记录运行插入语句。

我遇到的问题是，除非我将平面文件目标添加到我以编程方式创建的包中，否则我的包将不会执行。

我通过保存以编程方式创建的包然后通过设计器添加平面文件目标来发现这一点。然后我打开一个脚本任务，加载这个包并执行它并运行它。

以下是以编程方式创建子包的代码：

```
 Try
  'CREATE PACKAGE
  package = New Microsoft.SqlServer.Dts.Runtime.Package()

  '-----------------------
  'CREATE DATA FLOW TASK
  '-----------------------
  Dim PipelineTask As Executable = package.Executables.Add("STOCK:PipelineTask")
  Dim DataFlowTask_Runtime As Dts.Runtime.TaskHost = CType(PipelineTask, Dts.Runtime.TaskHost)
  DataFlowTask_Runtime.Name = "MyCustom Data Flow Task"

  Dim DataFlowTask_DesignTime As MainPipe = CType(DataFlowTask_Runtime.InnerObject, MainPipe)

  '------------------
  'SETUP CONNECTIONS
  '------------------
  'CREATE FLAT FILE CONNECTION
  Dim FFConnectionManager As ConnectionManager = package.Connections.Add("FLATFILE")
  FFConnectionManager.ConnectionString = FileName
  FFConnectionManager.Name = "Flat File Source Connection"

  'SETUP FLAT FILE COLUMNS AND DELIMETERS
  GetColumnsFromFlatFile(FFConnectionManager, DelimeterType.CarriageReturnLineFeed, DelimeterType.LineFeed, DelimeterType.Tab, 0)

  '-----------------------
  'CREATE SOURCE COMPONENT
  '-----------------------
  ' Set up the souce component of the Dataflow task
  Dim FFSourceComponent As IDTSComponentMetaData100 = DataFlowTask_DesignTime.ComponentMetaDataCollection.New
  FFSourceComponent.Name = "Flat File Source"

  ' The managed source is an instantiation of the source.
  FFSourceComponent.ComponentClassID = "{D23FD76B-F51D-420F-BBCB-19CBF6AC1AB4}"
  Dim FFSourceComponent_DesignTime As Microsoft.SqlServer.Dts.Pipeline.Wrapper.CManagedComponentWrapper = FFSourceComponent.Instantiate
  FFSourceComponent_DesignTime.ProvideComponentProperties()

  ' Link the connection to the source component.
  If FFSourceComponent.RuntimeConnectionCollection.Count > 0 Then
    FFSourceComponent.RuntimeConnectionCollection(0).ConnectionManager = DtsConvert.GetExtendedInterface(FFConnectionManager)
    FFSourceComponent.RuntimeConnectionCollection(0).ConnectionManagerID = FFConnectionManager.ID
  End If
  FFSourceComponent_DesignTime.AcquireConnections(Nothing)
  FFSourceComponent_DesignTime.ReinitializeMetaData()

  '------------------------------------------
  'Create Output Mappings from the flat file.
  '------------------------------------------
  Dim OutputColumnCollection As IDTSOutputColumnCollection100
  OutputColumnCollection = FFSourceComponent.OutputCollection(0).OutputColumnCollection

  Dim exOutColumn As IDTSExternalMetadataColumn100
  For Each OutputColumn As IDTSOutputColumn100 In OutputColumnCollection
    exOutColumn = FFSourceComponent.OutputCollection(0).ExternalMetadataColumnCollection(OutputColumn.Name)
    FFSourceComponent_DesignTime.MapOutputColumn(FFSourceComponent.OutputCollection(0).ID, OutputColumn.ID, exOutColumn.ID, True)
    'Add the output column name and ID to an array so that we can identify them at a later stage
    outputColumnLineageIDs.Add(OutputColumn.Name, OutputColumn.ID)
  Next
  FFSourceComponent_DesignTime.ReleaseConnections()

  '----------------------------
  'CREATE MYCUSTOM SCRIPT COMPONENT
  '----------------------------

  Dim MyCustomScriptComponent As IDTSComponentMetaData100 = DataFlowTask_DesignTime.ComponentMetaDataCollection.New
  MyCustomScriptComponent.ComponentClassID = "MyCustomBuffer.CustomComponents.MyCustomScriptComponent, MyCustomBuffer, Version=1.0.0.0, Culture=neutral, PublicKeyToken=516f7fc6acf0e6e0"
  MyCustomScriptComponent.Name = "MyCustom Script"

  Dim MyCustomScriptComponent_DesignTime As CManagedComponentWrapper = MyCustomScriptComponent.Instantiate
  MyCustomScriptComponent_DesignTime.ProvideComponentProperties()

  ' Create the path from source to destination.
  Dim path As IDTSPath100 = DataFlowTask_DesignTime.PathCollection.New
  path.AttachPathAndPropagateNotifications(FFSourceComponent.OutputCollection(0), MyCustomScriptComponent.InputCollection(0))

  ' Get the destination's default input and virtual input.
  Dim InputMyCustom As IDTSInput100 = MyCustomScriptComponent.InputCollection(0)
  Dim vInputMyCustom As IDTSVirtualInput100 = InputMyCustom.GetVirtualInput

  MyCustomScriptComponent_DesignTime.ReinitializeMetaData()

  ' Iterate through the virtual input column collection.
  For Each vColumn As IDTSVirtualInputColumn100 In vInputMyCustom.VirtualInputColumnCollection
    ' Call the SetUsageType method of the destination
    '  to add each available virtual input column as an input column.
    Dim InputCol As IDTSInputColumn100 = MyCustomScriptComponent_DesignTime.SetUsageType(InputMyCustom.ID, vInputMyCustom, vColumn.LineageID, DTSUsageType.UT_READONLY)
  Next

  '----------------------------
  'CREATE FLAT FILE DESTINATION
  '----------------------------

  Dim DestFFConnManager As ConnectionManager = package.Connections.Add("FLATFILE")
  DestFFConnManager.ConnectionString = "C:\Test\MyCustomBufferTest.txt"
  DestFFConnManager.Name = "Flat File Destination Connection"

  Dim DestFFConnManager_DesignTime As IDTSConnectionManagerFlatFile100 = DestFFConnManager.InnerObject
  DestFFConnManager_DesignTime.ColumnNamesInFirstDataRow = True
  DestFFConnManager_DesignTime.CodePage = 1252
  DestFFConnManager_DesignTime.HeaderRowDelimiter = vbTab
  DestFFConnManager_DesignTime.Format = "Delimited"
  DestFFConnManager_DesignTime.HeaderRowsToSkip = 0
  'FlatFileConnection.TextQualifier = ""
  DestFFConnManager_DesignTime.RowDelimiter = vbTab

  'CREATE FLAT FILE DESTINATION
  Dim FFDestination As IDTSComponentMetaData100 = DataFlowTask_DesignTime.ComponentMetaDataCollection.New
  FFDestination.ComponentClassID = "{8DA75FED-1B7C-407D-B2AD-2B24209CCCA4}"
  FFDestination.Name = "Flat File Destination"

  Dim FFDestination_DesignTime As CManagedComponentWrapper = FFDestination.Instantiate
  FFDestination_DesignTime.ProvideComponentProperties()

  ' Link the connection to the source component.
  If FFDestination.RuntimeConnectionCollection.Count > 0 Then
    FFDestination.RuntimeConnectionCollection(0).ConnectionManager = DtsConvert.GetExtendedInterface(DestFFConnManager)
    FFDestination.RuntimeConnectionCollection(0).ConnectionManagerID = DestFFConnManager.ID
  End If
  Dim Destpath As IDTSPath100 = DataFlowTask_DesignTime.PathCollection.[New]
  Destpath.AttachPathAndPropagateNotifications(MyCustomScriptComponent.OutputCollection(0), FFDestination.InputCollection(0))

  Dim DestInput As IDTSInput100 = FFDestination.InputCollection(0)
  Dim VDestinput As IDTSVirtualInput100 = DestInput.GetVirtualInput()
  Dim VDestInputColCollection As IDTSVirtualInputColumnCollection100 = VDestinput.VirtualInputColumnCollection

  Dim indexMax As Integer = VDestInputColCollection.Count - 1
  For index As Integer = 0 To indexMax
    ' Get input column to replicate in flat file
    Dim virtualInputColumn As IDTSVirtualInputColumn100 = VDestInputColCollection(index)

    ' Add column to Flat File connection manager
    Dim flatFileColumn As IDTSConnectionManagerFlatFileColumn100 = TryCast(DestFFConnManager_DesignTime.Columns.Add(), IDTSConnectionManagerFlatFileColumn100)
    flatFileColumn.ColumnType = "Delimited"
    flatFileColumn.ColumnWidth = virtualInputColumn.Length
    flatFileColumn.DataPrecision = virtualInputColumn.Precision
    flatFileColumn.DataScale = virtualInputColumn.Scale
    flatFileColumn.DataType = virtualInputColumn.DataType
    Dim columnName As IDTSName100 = TryCast(flatFileColumn, IDTSName100)
    columnName.Name = virtualInputColumn.Name

    If index < indexMax Then
      flatFileColumn.ColumnDelimiter = vbTab
    Else
      flatFileColumn.ColumnDelimiter = vbCrLf
    End If
  Next

  FFDestination_DesignTime.AcquireConnections(Nothing)
  FFDestination_DesignTime.ReinitializeMetaData()

  For Each virtualInputColumn As IDTSVirtualInputColumn100 In VDestInputColCollection
    ' Select column, and retain new input column
    Dim inputColumn As IDTSInputColumn100 = FFDestination_DesignTime.SetUsageType(DestInput.ID, VDestinput, virtualInputColumn.LineageID, DTSUsageType.UT_READONLY)
    ' Find external column by name
    Dim externalColumn As IDTSExternalMetadataColumn100 = DestInput.ExternalMetadataColumnCollection(inputColumn.Name)
    ' Map input column to external column
    FFDestination_DesignTime.MapInputColumn(DestInput.ID, inputColumn.ID, externalColumn.ID)
  Next

Catch ex As Exception
  MsgBox(ex.Message)
End Try 
```

添加目标平面文件组件允许我的包执行，但是它没有意义，因为我的自定义组件类型是**目标适配器**。附加的目标平面文件组件效率低下，我想知道对此有何需求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:18:08.793

您可能在验证自定义组件时遇到错误，您应该做的是：

将自定义组件中的延迟验证属性设置为 true。

# java - 启动tomcat时struts2-JQuery-plugin连接异常

> ID：15241943
> 
> 赞同：1
> 
> 时间：2013-03-06T08:02:21.263
> 
> 标签：java, jquery, tomcat7, tomcat6, struts2-jquery

我刚刚将 struts2-jquery-plugin 版本从 2.3 升级到 3.5，这在启动 tomcat 时出现了这个问题。我正在使用 tomcat 6.0.26，我在 tomcat7 中也有同样的情况。

```
[DEBUG][main] 06 Mar 13:02:38 web.context.ContextLoader-Published root WebApplicationContext as ServletContext attribute with name [org.springframework.web.context.WebApplicationContext.ROOT]
[INFO ][main] 06 Mar 13:02:38 web.context.ContextLoader-Root WebApplicationContext: initialization completed in 20763 ms
[ERROR][main] 06 Mar 13:02:40 struts2.dispatcher.Dispatcher-Dispatcher initialization failed
Unable to load configuration. - [unknown location]
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:58)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:374)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:418)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareFilter.init(StrutsPrepareFilter.java:50)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3838)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4488)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:519)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:581)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: Unable to load jar:file:/WEB-INF/lib/struts2-jquery-plugin-3.5.0.jar!/struts-plugin.xml - [unknown location]
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:898)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:143)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:110)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:168)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55)
    ... 22 more
Caused by: Connection refused: connect - [unknown location]
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:115)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:893)
    ... 26 more
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:395)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:530)
    at sun.net.www.http.HttpClient.<init>(HttpClient.java:234)
    at sun.net.www.http.HttpClient.New(HttpClient.java:307)
    at sun.net.www.http.HttpClient.New(HttpClient.java:324)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:970)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:911)
    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:836)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1172)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:677)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(XMLEntityManager.java:1315)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startDTDEntity(XMLEntityManager.java:1282)
    at com.sun.org.apache.xerces.internal.impl.XMLDTDScannerImpl.setInputSource(XMLDTDScannerImpl.java:283)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.dispatch(XMLDocumentScannerImpl.java:1194)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.next(XMLDocumentScannerImpl.java:1090)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1003)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:113)
    ... 27 more 
```

我已经浏览了一些指向代理配置问题的帖子。我有时能够成功启动tomcat。所以这不是一直出现的。想知道可能是什么原因！它还显示了一些关于记忆的东西。我猜是因为上一个问题。

# asp.net - 仅在第一次请求页面时调用重写的 GetVaryByCustomString 方法

> ID：15241944
> 
> 赞同：1
> 
> 时间：2013-03-06T08:02:23.913
> 
> 标签：asp.net, outputcache, c1-cms

关于 ASP.Net 或 Composite C1 CMS 中的 outputcache 工作，我有以下问题（不知道问题出在哪里）：

我需要通过名为“City”的 cookie 来改变缓存。在 Global.asax 中，我重写了 GetVaryByCustomString 方法。

```
public override string GetVaryByCustomString(HttpContext context, string custom)
{
   var result = ApplicationLevelEventHandlers.GetVaryByCustomString(context, custom);

   if (result == null) {
      return base.GetVaryByCustomString(context, custom);
   }

   HttpCookie cookie = context.Request.Cookies["City"];
   string additionalVary = "";
   if (cookie != null)
      additionalVary = cookie.Value;
   else
      additionalVary = "Москва";

   return String.Concat(result, additionalVary);
} 
```

问题是：我重写的 GetVaryByCustomString 方法的断点仅在对页面的第一个请求时被击中，但在缓存实际过期（在我的情况下为 60 秒）之前不会在下一个请求上被击中。虽然 cookie 可能在这 60 秒内在客户端发生了更改，但该页面只是从缓存中获取的。

我哪里错了？提前致谢。

**更新：** 我终于能够通过 CacheProfile 设置中的以下修改使 outputcache 因 cookie 而异：

```
<outputCacheProfiles>
   <add name="C1Page" duration="60" varyByCustom="C1Page" varyByParam="*" varyByHeader="Cookie" location="Server" />
</outputCacheProfiles> 
```

在这种情况下，GetVaryByCustomString 方法在每个请求上都会被命中，但没有必要：这些设置使缓存因网站上可能设置的每个 cookie 而异。当然，这不是一种理想的行为——这就是我继续调查的原因。

更有趣的是——这两个参数（varyByHeader="Cookie" 和 location="Server"）只能一起工作，禁用其中一个会使事情看起来和以前完全一样——输出缓存没有变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:58:24.230

尝试在 Application_BeginRequest 中设置一个断点，这可能是浏览器没有发出请求，而是显示了一个缓存页面。

# image - 用于 Flex 的灯箱

> ID：15241947
> 
> 赞同：0
> 
> 时间：2013-03-06T08:02:54.213
> 
> 标签：image, apache-flex, gallery, lightbox

哎。我看过另一篇关于 Flex 的 Lightbox 画廊效果的帖子，但是在玩过它之后，我似乎无法让它 100% 工作（图像和拇指一样小，我不能让它变大）。这也缺少一些我想要的功能。

因此，一个示例当然是：http: [//lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/) 如果您单击图像集上的任何图像，您可以用箭头在它们之间切换。这就是我想要的。

此外，如果可以在更大的图片下显示同一组中其他图像的缩略图（当已经单击一个图像时），那就太好了。

我试图搜索这样的组件，但我似乎找不到任何其他组件。

如果你们中的任何人知道这种效果的任何不错的组件或代码片段，请告诉我！=)

亲切的问候，斯蒂安·伯格·拉森

**编辑：**

* * *

所以我四处搜索并尝试了一些例子，但我似乎无法让它们中的任何一个工作。总是有错误，没有一个例子正是我想要的。

我只需要一种方法来显示像 Lightbox 这样的图像。带有上一个/下一个箭头，也许还有一个关闭按钮。仅此而已。我将如何去做这个，或者使用现有的组件？

我使用 TileGroup 来握住我所有的拇指（这样如果有空间，他们将用更多图像填充组的宽度）。如果也可以动态生成此缩略图列表，那就太好了，但基本上我需要的是在单击它们时显示具有 Lightbox 样式的图像。

谢谢！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:51:34.270

我最终只是制作了自己的灯箱效果。:)

创建了一个 Actionscript 类（基于 Group）并添加了图像加载功能、prev/next/close 按钮​​和边框等。奇迹般有效 ：）

# c# - 在虚拟 DataGridView (WinForms) 中选择所有单元格的快速方法

> ID：15241948
> 
> 赞同：1
> 
> 时间：2013-03-06T08:02:54.977
> 
> 标签：c#, winforms, datagridview, virtual

我目前正在为虚拟模式下 WinForms DataGridView 的性能而苦苦挣扎。在某些情况下，我在 DataGridView 中有大小为 2000x2000 甚至更大的矩阵。我已经设法根据我的需要提高了关于自定义绘画、滚动等的整体性能。剩下的唯一一点是所有单元格的选择。对于我提到的大小的矩阵，大约需要 10 秒，这是绝对不能接受的。

事实：行和列的 AutoSizeMode 设置为无。RowHeadersWidthSize 设置为仅可见行，columnsHeaderHeight 大小设置为禁用。我附加到 CellPainting 事件和 CellFormatting 事件。为了确保我在那里执行的操作不是性能问题的罪魁祸首，我暂时从那些没有成功的事件中分离出来。

必须将单元格的选择模式设置为 CellSelect。我知道，这对于虚拟数据网格来说并不是最好的，但这正是我们所需要的。在将事件重新路由到基类之前，我已经尝试附加到 CTRL + A 并将鼠标放在单元格（-1，-1）上并将其中的选择模式设置为 fullRowSelect。但这也不会带来性能提升。

我知道，如果一个单元格的绘画与相邻单元格不同，则整个行将不共享。这导致在选择所有单元格时所有行都变得不共享，我认为这是性能问题的罪魁祸首。

你们中是否有人可能有另一种方法来选择所有单元格而不取消共享所有行或具有更好的性能？

**[编辑]**我在[这里](https://stackoverflow.com/questions/9039989/how-to-selectall-in-a-winforms-virtual-listview)看到了一个与ListView 相关的类似问题。现在我想知道 DataGridView 是否也可以使用类似的解决方案？

**[编辑2]**我刚刚意识到，选择所有单元格时的内存使用情况也大大增加（我认为这样做的原因是所有行分享）。例如，我有一个包含 1 列和 200 万行的大数据集。当 DataGrid 使用它的所有值建立时，应用程序使用大约**300 MB**的内存。现在选择所有单元格时，内存使用量增加到**1.3 GB**内存。

**[当前解决方法]**由于我还没有为给定问题找到合适的解决方案，因此我实施了一种解决方法来支持大矩阵的完整选择。目前，我覆盖了 Ctrl + A 的行为并单击左上角的单元格（-1，-1）。在那里我不对网格本身进行选择，而只是将单元格的背景颜色设置为用于选择的颜色。用户现在可以看到所有单元格都突出显示，就好像它们被选中一样。当我在虚拟模式下使用 DataGridView 并且选择在网格和基础数据结构之间同步时，我在基础数据中设置了一个特殊标志，即应选择所有内容。当用户现在单击任何其他单元格时，选择行为将重置为默认值，并且单元格的背景颜色也将重置。

在完全选择模式下，我还处理“GetClipboardContent”方法以确保将所有单元格值复制到剪贴板（目前这会导致另一个性能问题，但这是另一回事）。

尽管目前这是一个可行的解决方案，但我当然仍然会对基于 DataGridView 本身提供的功能提供解决方案的其他想法感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:50:10.593

如果@Sinatr 建议的 BeginUpdate 和 EndUpdate 不起作用，我建议尝试使用此挂起/恢复 API 在单元格选择操作期间锁定显示：

```
try
{
    dataGridView1.SuspendDrawing()
    // Your cell selection operation
    ...
}
finally
{
    dataGridView1.ResumeDrawing()
} 
```

我没有在你的场景中尝试过。但这对于需要频繁刷新的几个大 DataGridView 帮助很大。这就是为什么我认为它值得一试，因为它有可能在你的情况下让事情变得更快一些。

```
[DllImport("user32.dll", EntryPoint = "SendMessageA", ExactSpelling = true, 
                         CharSet = CharSet.Ansi, SetLastError = true)]
private static extern int SendMessage(IntPtr hwnd, int wMsg, int wParam, int lParam);
private const int WM_SETREDRAW = 0xB;

public static void SuspendDrawing(this Control target)
{
    SendMessage(target.Handle, WM_SETREDRAW, 0, 0);
}

public static void ResumeDrawing(this Control target) { ResumeDrawing(target, true); }
public static void ResumeDrawing(this Control target, bool redraw)
{
    SendMessage(target.Handle, WM_SETREDRAW, 1, 0);

    if (redraw)
    {
        target.Refresh();
    }
} 
```

# objective-c - 如何调试这个 facebook API 错误

> ID：15241951
> 
> 赞同：0
> 
> 时间：2013-03-06T08:03:11.460
> 
> 标签：objective-c, xcode4.5

> FBConditionalLog：系统授权失败：“Facebook 服务器无法完成此访问请求：remote_app_id 与存储的 id 不匹配”。这可能是由于 bundle 标识符与您在 developers.facebook.com/apps 上的服务器上的应用程序配置不匹配造成的。

捆绑标识符是 com.domainname

在developers.facebook.com/apps。

好的，所以我要调试这个。

我想知道 remote_app_id 的值

然后我想知道存储的 id 的值。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:12:24.370

我还没有发现如何调试。

但是，我所做的是检查项目中的捆绑包 ID。然后我去[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)并确保我的项目的 bundle id 是相同的。

然后我等几分钟。

我的问题是我没有等到。

facebook 花了一段时间才将捆绑 ID 传播到各处。

# delphi - 添加到数据库不起作用

> ID：15241953
> 
> 赞同：1
> 
> 时间：2013-03-06T08:03:23.417
> 
> 标签：delphi, ado

我进行查询以查看资产编号是否在数据库中，它返回 false，因此我想将数据添加到数据库中，我没有收到任何错误。但它从不添加数据。

```
 //check if its there, if so update it, if not add it.
if fdeptlayout.adoquery1.IsEmpty then
begin
  showmessage('adding new machine to db');
  with Fdeptlayout.ADOQuery1 do
    begin
    sql.Clear;
    sql.BeginUpdate;
    sql.add('INSERT INTO MList ');
    sql.Add('(Zone,Dept,Number,Name,Asset,IsPanel');
    sql.Add(',FinalLocation,Left,Top) ');
    sql.Add('VALUES ( :Zone, :Dept, :Number, :Name, :Asset, :IsPanel');
    sql.Add(', :FinalLocation, :Left, :Top)');
    sql.EndUpdate;
    Parameters.ParamByName('Zone').Value  := CZone;
    Parameters.ParamByName('Dept').Value  := CDept;
    Parameters.ParamByName('Number').Value := CNumber;
    Parameters.ParamByName('Name').Value  := CName;
    Parameters.ParamByName('Asset').Value := CAsset;
    Parameters.ParamByName('IsPanel').Value := CIsPanel;
    Parameters.ParamByName('FinalLocation').Value := CFinalLocation;
    Parameters.ParamByName('Left').Value := CLeft;
    Parameters.ParamByName('Top').Value := CTop;
    open; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T09:15:20.487

您似乎正在`adoquery1`用于获取数据并发送命令。

**你不能那样做。**

## 使用追加

您可以将数据直接附加到打开的数据集

```
with Fdeptlayout.ADOQuery1 do
begin
  // append a new row
  Append; 

  // set data to all fields
  FieldByName('Zone').Value := CZone;
  FieldByName('Dept').Value  := CDept;
  FieldByName('Number').Value := CNumber;
  FieldByName('Name').Value  := CName;
  FieldByName('Asset').Value := CAsset;
  FieldByName('IsPanel').Value := CIsPanel;
  FieldByName('FinalLocation').Value := CFinalLocation;
  FieldByName('Left').Value := CLeft;
  FieldByName('Top').Value := CTop;

  // post the new added data to the dataset
  Post; 
end; 
```

## 使用 SQL 命令

您必须使用单独的查询实例来执行 sql 命令

```
with TADOQuery.Create( nil ) do
try
  // Prepare
  Connection := Fdeptlayout.ADOQuery1.Connection;

  sql.add('INSERT INTO MList ');
  sql.Add('(Zone,Dept,Number,Name,Asset,IsPanel');
  sql.Add(',FinalLocation,Left,Top) ');
  sql.Add('VALUES ( :Zone, :Dept, :Number, :Name, :Asset, :IsPanel');
  sql.Add(', :FinalLocation, :Left, :Top)');

  Parameters.ParamByName('Zone').Value  := CZone;
  Parameters.ParamByName('Dept').Value  := CDept;
  Parameters.ParamByName('Number').Value := CNumber;
  Parameters.ParamByName('Name').Value  := CName;
  Parameters.ParamByName('Asset').Value := CAsset;
  Parameters.ParamByName('IsPanel').Value := CIsPanel;
  Parameters.ParamByName('FinalLocation').Value := CFinalLocation;
  Parameters.ParamByName('Left').Value := CLeft;
  Parameters.ParamByName('Top').Value := CTop;

  // Execute the statement
  ExecSQL;

finally
  Free;
end;

// Update the data
Fdeptlayout.ADOQuery1.Refresh;
// or even better
Fdeptlayout.ADOQuery1.Requery; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T08:35:20.557

您忘记执行查询：

sql.ExecSQL

Update 可能被解释为 Self.Update，即表单的视觉更新。

# javascript - 处理并发 xmlhttprequests

> ID：15241956
> 
> 赞同：-2
> 
> 时间：2013-03-06T08:03:33.667
> 
> 标签：javascript, xmlhttprequest

在单个函数中，我想使用 xmlhttprequests 下载三个资源；当它们被加载时，我想使用上述请求的响应调用一个函数。但是，当我尝试调用该函数时，所需的上述响应是未定义的。

```
function(){
var File=null
var Meta=null
var Engine=null
var xhrFile = new XMLHttpRequest()
var xhrMeta = new XMLHttpRequest();
var xhrEngine = new XMLHttpRequest();
xhrFile.open('GET','/archive/file.txt',true)
xhrMeta.open('GET','/template/file.js',true)
xhrEngine.open('GET','/javascript/app/hemp/engine.js',true)
xhrFile.responseType='arraybuffer';
xhrMeta.responseType='text';
xhrEngine.responseType='text';
xhrFile.onload = function(){File=xhrFile.response}
xhrMeta.onload = function(){File=eval(xhrMeta.response)}    
xhrEngine.onload = function(){Engine=eval(xhrEngine.response)}
xhrFile.send();
xhrMeta.send();
xhrEngine.send();
var DDM=Engine({'file':File,'meta':Meta}) 
return DDM
}; 
```

该代码不起作用，需要一些改造！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:54:23.900

最后一部分： var DDM=Engine({'file':File,'meta':Meta}) return DDM

将始终产生 undefined，因为此时可能尚未为*File*和*Meta*分配任何内容，因为 XMLHttpRequests 可能尚未返回。换句话说，他们的 .onload() 函数还没有被调用，因此 File/Meta 还没有被定义。

您要做的是在 onload() 中检查 File 和/或 Meta 以查看它们是否已定义（也就是它们的 XMLHttpRequests 已成功返回）。如果是，那么您可以调用 Engine({'file':File, 'meta': Meta}) 因为此时它们存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:57:18.123

我解决了......这并不难......只是一点点想象力

```
var solve = function(File,Meta,Engine){
    var DDM=Engine({'file':File,'meta':Meta});
    return DDM;
};

//code added to the onload listeners 
xhrFile.onload = function(){
    File=xhrFile.response;
    if (File && Meta && Engine){
        return solve(File,Meta,Engine);
    }
};
xhrMeta.onload = function(){
    Meta=eval(xhrMeta.response);
    if (File && Meta && Engine){
        return solve(File,Meta,Engine);
    }
};
xhrEngine.onload = function(){
    Engine=eval(xhrEngine.response);
    if (File && Meta && Engine){
        return solve(File,Meta,Engine);
    }
}; 
```

# java - com.microsoft.sqlserver.jdbc.SQLServerDriver not found 错误

> ID：15241960
> 
> 赞同：16
> 
> 时间：2013-03-06T08:03:52.693
> 
> 标签：java, sql-server, eclipse, jdbc

我正在尝试从 Java 连接到我的 SQL Server 2008 数据库，我在这个[线程](https://stackoverflow.com/questions/12461040/java-lang-classnotfoundexception-com-microsoft-jdbc-sqlserver-sqlserverdriver)中遇到了同样的问题。

```
String userName = "xxxx";
String password = "xxxx";
String url = "jdbc:sqlserver:xxx.xxx.xxx.xxx;databaseName=asdfzxcvqwer;integratedSecurity=true";
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
connection = DriverManager.getConnection(url, userName, password); 
```

每当`ClassNotFoundException`我尝试从`Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");`

```
java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at repositories.RepositoryBase.<init>(RepositoryBase.java:22)
    at repositories.ProductsRepository.<init>(ProductsRepository.java:13)
    at api.Products.init(Products.java:31)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1280)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1193)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:865)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我已确保将必要的 jdbc 和 jtds 驱动程序添加到库中，并且还设置了 CLASSPATH。老实说，我不确定这里出了什么问题。![在此处输入图像描述](../Images/0d7c2ef8f3efdc34a7df80d0e017d317.png)

编辑：根据建议，我尝试下载这个[jdbc jar](http://www.java2s.com/Code/JarDownload/sqlserverjdbc/sqlserverjdbc.jar.zip)并将其放在我的 WEB-INF/lib 中，然后将我的 CLASSPATH 变量设置为该位置。尽管如此，同样的问题正在发生。![在此处输入图像描述](../Images/73fd8a984dc6e8ed49ac891b722c973c.png)

Edit2：没关系，完全重新安装 Eclipse 使其工作。这很令人沮丧...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T08:15:38.437

您的类路径中不需要 jTDS 和 JDBC。任何一个都是必需的。在这里你只需要`sqljdbc.jar`.

另外，我建议将其放置`sqljdbc.jar`在项目目录的物理位置，`/WEB-INF/lib`而不是通过 IDE 将其添加到 Classpath 中。然后 Tomcat 负责其余的工作。并尝试重新启动 Tomcat。

您可以从以下网址下载 Jar：[www.java2s.com/Code/JarDownload/sqlserverjdbc/sqlserverjdbc.jar.zip](http://www.java2s.com/Code/JarDownload/sqlserverjdbc/sqlserverjdbc.jar.zip)

编辑：

由于您在连接时提供用户名和密码，

你只需要`jdbc:sqlserver://localhost:1433;databaseName=test`, Skip`integratedSecurity`属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-05T16:06:27.547

您正在查看**sqljdbc4.2**版本，例如：

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver"); 
```

但是，对于**sqljdbc4**版本语句应该是：

```
Class.forName("com.microsoft.jdbc.sqlserver.SQLServerDriver"); 
```

* * *

我认为如果您更改第一个版本以编写正确的**Class.forName**，您的应用程序将运行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-09T18:17:13.917

对我来说，一旦我改变它就起作用了

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver"); 
```

至：

在 POM 中

```
<dependency>
    <groupId>com.microsoft.sqlserver</groupId>
    <artifactId>mssql-jdbc</artifactId>
    <version>6.1.0.jre8</version>
</dependency> 
```

接着：

```
import com.microsoft.sqlserver.jdbc.SQLServerDriver; 
```

...

```
DriverManager.registerDriver(SQLServerDriver());    
Connection connection = DriverManager.getConnection(connectionUrl); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-09T04:37:08.300

智能理念 2019

1.  下载适用于 SQL Server 的 Microsoft JDBC 驱动程序

（[https://docs.microsoft.com/en-us/sql/connect/jdbc/download-microsoft-jdbc-driver-for-sql-server?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/connect/jdbc/download-microsoft-jdbc-driver-for-sql-server?view=sql-server-2017)）

2.  解压（“C:\opt\sqljdbc_7.2\enu\mssql-jdbc-7.2.2.jre11.jar”）
3.  添加; （文件->项目结构->全局库）
4.  利用; （将 Jar 文件添加到 IntellijIdea 类路径（看视频）） [![添加](../Images/b3e3f1210ef1f80b4bab1f9d7a274787.png)](https://i.stack.imgur.com/hC3wz.png) import com.microsoft.sqlserver.jdbc.SQLServerDriver; [https://youtu.be/-2hjxoRKsyk](https://youtu.be/-2hjxoRKsyk)[![在此处输入图像描述](../Images/43d805a4eff858383d03d7e8d6669996.png)](https://i.stack.imgur.com/Pxnpk.png)

或 ub Gradle 设置“编译”编译组：'com.microsoft.sqlserver'，名称：'mssql-jdbc'，版本：'7.2.2.jre11'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-04T11:01:38.867

这是你的答案

```
String userName = "xxxx";
    String password = "xxxx";
    String url = "jdbc:sqlserver:xxx.xxx.xxx.xxx;databaseName=asdfzxcvqwer;integratedSecurity=true";

    try {
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
            connection = DriverManager.getConnection(url, userName, password); 

  } catch (Exception e)
  {
     e.printStackTrace();
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-19T07:06:06.263

对我来说，它在手动将 sqljdbc4-2.jar 复制到 WEB-INF/lib 文件夹后起作用。所以也请尝试一下。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-15T11:02:17.290

对我来说，这是一个错误的 Maven 依赖减速，所以这是正确的方法：

对于**sqljdbc4**使用：[sqljdbc4 依赖](https://mvnrepository.com/artifact/com.microsoft.sqlserver/sqljdbc4/4.0)

```
<dependency>
    <groupId>com.microsoft.sqlserver</groupId>
    <artifactId>sqljdbc4</artifactId>
    <version>4.0</version>
</dependency> 
```

对于**sqljdbc42**使用：[sqljdbc42 依赖](https://mvnrepository.com/artifact/com.microsoft.sqlserver/sqljdbc42/6.0.8112)

```
<dependency>
    <groupId>com.microsoft.sqlserver</groupId>
    <artifactId>sqljdbc42</artifactId>
    <version>6.0.8112</version>
</dependency> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-20T11:21:41.303

```
public static final String URL = "jdbc:sqlserver://localhost:1433;databaseName=dbName";
public static final String USERNAME = "xxxx";
public static final String PASSWORD = "xxxx";

/**
 *  This method
    @param args     command line argument
*/
public static void main(String[] args)
{
   try
   {
        Connection connection;
        DriverManager.registerDriver(new com.microsoft.sqlserver.jdbc.SQLServerDriver());   
        connection = DriverManager.getConnection(MainDriver.URL,MainDriver.USERNAME,
                        MainDriver.PASSWORD);
        String query ="select * from employee";
        Statement statement = connection.createStatement();
        ResultSet resultSet = statement.executeQuery(query);
        while(resultSet.next())
        {
            System.out.print("First Name: " + resultSet.getString("first_name"));
            System.out.println("  Last Name: " + resultSet.getString("last_name"));                
        }
   }catch(Exception ex)
   {
        ex.printStackTrace();
   }
} 
```

# c# - DataContractSerializer 的输出在 .NET 和 Mono 之间有所不同

> ID：15241961
> 
> 赞同：27
> 
> 时间：2013-03-06T08:03:55.257
> 
> 标签：c#, .net, mono, xamarin.android

我在 Mono For Android 应用程序中序列化数据，并使用 REST 将其发送到使用 WCF 侦听的 .NET 服务器。到目前为止，这工作得很好，但是，对于这个特定的数据合约，虽然服务器没有抛出错误，但数据合约中的列表显示为空。

使用 Fiddler 并使用相同的代码创建两个项目，我能够将正常的 .NET DataContractSerializer 输出与 Mono 的 DataContractSerializer 实现的输出进行比较。

**.NET 输出：**

```
<VisitDataContractEx xmlns:i="http://www.w3.org/2001/XMLSchema-instance" z:Id="i1" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" xmlns="http://schemas.datacontract.org/2004/07/Organization.Project.DataContracts">
  <_isDirty xmlns="http://schemas.datacontract.org/2004/07/Organization.DataContracts">true</_isDirty>
  <_id xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.Domain" xmlns="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:internalValue>a7b97b48-d3a9-419d-9f4e-330ffc7a01ee</d2p1:internalValue>
  </_id>
  <_key xmlns="http://schemas.datacontract.org/2004/07/Organization.DataContracts">false</_key>
  <_keyIdentifier xmlns="http://schemas.datacontract.org/2004/07/Organization.DataContracts">SurrogateKey</_keyIdentifier>
  <ChecklistComplete>false</ChecklistComplete>
  <Date>2013-03-05T15:43:49.5008406+02:00</Date>
  <GpsAccuracy>1</GpsAccuracy>
  <GpsLatitude>1</GpsLatitude>
  <GpsLongitude>1</GpsLongitude>
  <OrderComplete>false</OrderComplete>
  <PhotoComplete>false</PhotoComplete>
  <StockComplete>false</StockComplete>
  <Sync>2013-03-05T15:43:49.5468406+02:00</Sync>
  <checkListAnswers xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_list>
      <d2p1:IdentityDataReferenceOfCheckListAnswerDataContractExX8I0_S_SPU>
        <d2p1:_dataContract z:Id="i2">
          <d2p1:_isDirty>true</d2p1:_isDirty>
          <d2p1:_id xmlns:d6p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
            <d6p1:internalValue>95ae919b-a389-4ea7-a009-af1b91890c36</d6p1:internalValue>
          </d2p1:_id>
          <d2p1:_key>false</d2p1:_key>
          <d2p1:_keyIdentifier>SurrogateKey</d2p1:_keyIdentifier>
          <Answer>false</Answer>
          <checkListQuestion>
            <d2p1:_dataContract i:nil="true" />
            <d2p1:_description i:nil="true" />
            <d2p1:_hasDataContract>false</d2p1:_hasDataContract>
            <d2p1:_id xmlns:d7p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
              <d7p1:internalValue>176cbb31-7df2-4966-baa9-4e3cd2a0c6d5</d7p1:internalValue>
            </d2p1:_id>
          </checkListQuestion>
        </d2p1:_dataContract>
        <d2p1:_description i:nil="true" />
        <d2p1:_hasDataContract>true</d2p1:_hasDataContract>
        <d2p1:_id xmlns:d5p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
          <d5p1:internalValue>95ae919b-a389-4ea7-a009-af1b91890c36</d5p1:internalValue>
        </d2p1:_id>
      </d2p1:IdentityDataReferenceOfCheckListAnswerDataContractExX8I0_S_SPU>
    </d2p1:_list>
  </checkListAnswers>
  <comments xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_list />
  </comments>
  <directSalesAgent xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_dataContract i:nil="true" />
    <d2p1:_description i:nil="true" />
    <d2p1:_hasDataContract>false</d2p1:_hasDataContract>
    <d2p1:_id xmlns:d3p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
      <d3p1:internalValue>6f99f86a-5b1b-4f73-bdc3-388e0b7cf417</d3p1:internalValue>
    </d2p1:_id>
  </directSalesAgent>
  <directSalesAgentSuperVisor xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_dataContract i:nil="true" />
    <d2p1:_description i:nil="true" />
    <d2p1:_hasDataContract>false</d2p1:_hasDataContract>
    <d2p1:_id xmlns:d3p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
      <d3p1:internalValue>d57db20d-9b3a-4345-849e-d5a0d0d88f70</d3p1:internalValue>
    </d2p1:_id>
  </directSalesAgentSuperVisor>
  <photos xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_list>
      <d2p1:IdentityDataReferenceOfPhotoDataContractExX8I0_S_SPU>
        <d2p1:_dataContract z:Id="i3">
          <d2p1:_isDirty>true</d2p1:_isDirty>
          <d2p1:_id xmlns:d6p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
            <d6p1:internalValue>3db431e9-3338-4c96-aea9-d833eb0dc8ae</d6p1:internalValue>
          </d2p1:_id>
          <d2p1:_key>false</d2p1:_key>
          <d2p1:_keyIdentifier>SurrogateKey</d2p1:_keyIdentifier>
          <Content i:nil="true" />
          <Taken>2013-03-05T15:43:49.4748406+02:00</Taken>
        </d2p1:_dataContract>
        <d2p1:_description i:nil="true" />
        <d2p1:_hasDataContract>true</d2p1:_hasDataContract>
        <d2p1:_id xmlns:d5p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
          <d5p1:internalValue>3db431e9-3338-4c96-aea9-d833eb0dc8ae</d5p1:internalValue>
        </d2p1:_id>
      </d2p1:IdentityDataReferenceOfPhotoDataContractExX8I0_S_SPU>
    </d2p1:_list>
  </photos>
  <salesPoint xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_dataContract i:nil="true" />
    <d2p1:_description i:nil="true" />
    <d2p1:_hasDataContract>false</d2p1:_hasDataContract>
    <d2p1:_id xmlns:d3p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
      <d3p1:internalValue>692a294a-2d1b-4026-9693-0c0ce552a2fb</d3p1:internalValue>
    </d2p1:_id>
  </salesPoint>
  <stockCounts xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts" i:nil="true" />
</VisitDataContractEx> 
```

**单声道输出：**

```
<VisitDataContractEx xmlns:i="http://www.w3.org/2001/XMLSchema-instance" z:Id="i1" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" xmlns="http://schemas.datacontract.org/2004/07/Organization.Project.DataContracts">
  <_isDirty xmlns="http://schemas.datacontract.org/2004/07/Organization.DataContracts">true</_isDirty>
  <_id xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.Domain" xmlns="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:internalValue>9297eea9-82af-4981-ab9d-40aa0ac0fa0d</d2p1:internalValue>
  </_id>
  <_key xmlns="http://schemas.datacontract.org/2004/07/Organization.DataContracts">false</_key>
  <_keyIdentifier xmlns="http://schemas.datacontract.org/2004/07/Organization.DataContracts">SurrogateKey</_keyIdentifier>
  <ChecklistComplete>false</ChecklistComplete>
  <Date>2013-03-05T17:49:06.362243+02:00</Date>
  <GpsAccuracy>1</GpsAccuracy>
  <GpsLatitude>1</GpsLatitude>
  <GpsLongitude>1</GpsLongitude>
  <OrderComplete>false</OrderComplete>
  <PhotoComplete>false</PhotoComplete>
  <StockComplete>false</StockComplete>
  <Sync>2013-03-05T17:49:06.438934+02:00</Sync>
  <checkListAnswers xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_list>
      <d2p1:IdentityDataReferenceOfCheckListAnswerDataContractEx>
        <d2p1:_dataContract xmlns:d5p1="http://schemas.datacontract.org/2004/07/Organization.Project.DataContracts" z:Id="i2">
          <d2p1:_isDirty>true</d2p1:_isDirty>
          <d2p1:_id xmlns:d6p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
            <d6p1:internalValue>75083457-9714-4971-b60c-f28fa43167ad</d6p1:internalValue>
          </d2p1:_id>
          <d2p1:_key>false</d2p1:_key>
          <d2p1:_keyIdentifier>SurrogateKey</d2p1:_keyIdentifier>
          <Answer>false</Answer>
          <checkListQuestion xmlns:d6p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
            <d6p1:_dataContract xmlns:d7p1="http://schemas.datacontract.org/2004/07/Organization.Project.DataContracts" i:nil="true" />
            <d6p1:_description i:nil="true" />
            <d6p1:_hasDataContract>false</d6p1:_hasDataContract>
            <d6p1:_id xmlns:d7p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
              <d7p1:internalValue>176cbb31-7df2-4966-baa9-4e3cd2a0c6d5</d7p1:internalValue>
            </d6p1:_id>
          </checkListQuestion>
        </d2p1:_dataContract>
        <d2p1:_description i:nil="true" />
        <d2p1:_hasDataContract>true</d2p1:_hasDataContract>
        <d2p1:_id xmlns:d5p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
          <d5p1:internalValue>75083457-9714-4971-b60c-f28fa43167ad</d5p1:internalValue>
        </d2p1:_id>
      </d2p1:IdentityDataReferenceOfCheckListAnswerDataContractEx>
    </d2p1:_list>
  </checkListAnswers>
  <comments xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_list />
  </comments>
  <directSalesAgent xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_dataContract xmlns:d3p1="http://schemas.datacontract.org/2004/07/Organization.Project.DataContracts" i:nil="true" />
    <d2p1:_description i:nil="true" />
    <d2p1:_hasDataContract>false</d2p1:_hasDataContract>
    <d2p1:_id xmlns:d3p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
      <d3p1:internalValue>6f99f86a-5b1b-4f73-bdc3-388e0b7cf417</d3p1:internalValue>
    </d2p1:_id>
  </directSalesAgent>
  <directSalesAgentSuperVisor xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_dataContract xmlns:d3p1="http://schemas.datacontract.org/2004/07/Organization.Project.DataContracts" i:nil="true" />
    <d2p1:_description i:nil="true" />
    <d2p1:_hasDataContract>false</d2p1:_hasDataContract>
    <d2p1:_id xmlns:d3p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
      <d3p1:internalValue>d57db20d-9b3a-4345-849e-d5a0d0d88f70</d3p1:internalValue>
    </d2p1:_id>
  </directSalesAgentSuperVisor>
  <photos xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_list>
      <d2p1:IdentityDataReferenceOfPhotoDataContractEx>
        <d2p1:_dataContract xmlns:d5p1="http://schemas.datacontract.org/2004/07/Organization.Project.DataContracts" z:Id="i3">
          <d2p1:_isDirty>true</d2p1:_isDirty>
          <d2p1:_id xmlns:d6p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
            <d6p1:internalValue>507f45d1-ce3a-4ec2-a343-d0b83cfb7bc8</d6p1:internalValue>
          </d2p1:_id>
          <d2p1:_key>false</d2p1:_key>
          <d2p1:_keyIdentifier>SurrogateKey</d2p1:_keyIdentifier>
          <Content i:nil="true" />
          <Taken>2013-03-05T17:49:06.294006+02:00</Taken>
        </d2p1:_dataContract>
        <d2p1:_description i:nil="true" />
        <d2p1:_hasDataContract>true</d2p1:_hasDataContract>
        <d2p1:_id xmlns:d5p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
          <d5p1:internalValue>507f45d1-ce3a-4ec2-a343-d0b83cfb7bc8</d5p1:internalValue>
        </d2p1:_id>
      </d2p1:IdentityDataReferenceOfPhotoDataContractEx>
    </d2p1:_list>
  </photos>
  <salesPoint xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts">
    <d2p1:_dataContract xmlns:d3p1="http://schemas.datacontract.org/2004/07/Organization.Project.DataContracts" i:nil="true" />
    <d2p1:_description i:nil="true" />
    <d2p1:_hasDataContract>false</d2p1:_hasDataContract>
    <d2p1:_id xmlns:d3p1="http://schemas.datacontract.org/2004/07/Organization.Domain">
      <d3p1:internalValue>692a294a-2d1b-4026-9693-0c0ce552a2fb</d3p1:internalValue>
    </d2p1:_id>
  </salesPoint>
  <stockCounts xmlns:d2p1="http://schemas.datacontract.org/2004/07/Organization.DataContracts" i:nil="true" />
</VisitDataContractEx> 
```

使用 Fiddler 调整 XML 并测试提交，我将问题缩小到元素下的元素名称`_list`：

**。网：**

```
 <d2p1:_list>
      <d2p1:IdentityDataReferenceOfCheckListAnswerDataContractExX8I0_S_SPU> 
```

**单核细胞增多症：**

```
 <d2p1:_list>
      <d2p1:IdentityDataReferenceOfCheckListAnswerDataContractEx> 
```

这是我序列化数据的代码：

```
public string Serialize<TDataContract>(object obj)
{
    var builder = new StringBuilder();
    var serializer = new DataContractSerializer(typeof(TDataContract));
    var xmlWriter = XmlWriter.Create(builder);
    serializer.WriteObject(xmlWriter, obj);
    xmlWriter.Close();

    return builder.ToString().Replace("<?xml version=\"1.0\" encoding=\"utf-16\"?>", string.Empty);
} 
```

这是 Mono 团队必须解决的错误，还是有人可以提出可能的解决方法？

**编辑：**

我一直在进一步缩小这个问题的范围，这与列表无关，而是每个实现选择 XML 元素名称的方式。

`IdentityDataReference`采用泛型类型，在本例中为`CheckListAnswerDataContractEx`.

`IdentityDataReference`也恰好在一个分布式 DLL 中（我有它的源代码），所以我怀疑 DataContractSerializer 正在使用反射来自动计算名称，也许因为它是一个单独的分布式 DLL，.NET 附加`X8I0_S_SPU`到最后，然而，Mono 不是。

我还发现我可以像这样向 DataContractAttribute 添加一个名称参数：`[DataContract(Name = "IdentityDataReference")]`这会将生成的名称覆盖为 just `IdentityDataReference`，它甚至不会在指定时尝试添加 Of Type 。

不幸的是，当我指定名称并尝试反序列化数据时，快速测试显示 Mono 遇到运行时异常。

现在我更好地理解了这个问题，我正在尝试制作一个复制该问题的孤立项目。

**编辑 - 标记为已解决：**

多年前我从这个项目继续前进，但决定按照 Katulus 的回答关闭这个项目，因为我今天遇到同样的问题也会有同样的感觉。当时我们希望我们能够获得“免费”的、无痛的跨平台集成，而不需要对现有的 WCF 服务进行额外的工作，结果证明这很幼稚。

今天如果提出同样的要求，我会选择一个更跨平台友好的通信协议。如果我不能替换现有的 WCF 基础设施，那么我将创建某种[外观](https://en.wikipedia.org/wiki/Facade_pattern)和/或[适配器](https://en.wikipedia.org/wiki/Adapter_pattern)（可能在不同的解决方案中），通过使用 JSON 序列化的 WebAPI 之类的方式公开服务，与原始 WCF 服务对话背景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-02T08:42:44.770

如果您在不同平台之间进行通信（即使 .NET 和 Mono 尝试相同），您应该避免使用 DataContractSerializer。除了这个错误之外，还有其他可能的问题。例如，如果您更改服务器上的类，所有客户端都可能停止工作，反之亦然。在您无法完全控制双方的服务器-客户端场景中，这可能是一个大问题。

我会将 DataContractSerializer 更改为 XmlSerializer，您可以更好地控制双方。或者甚至实现自己的与 XML 之间的序列化，您可以在其中考虑未来的升级。如果您在一台服务器上添加一些新属性，您可以更新您的反序列化器，以便在某些旧客户端缺少该新属性时它可以处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T10:24:10.250

也许一种解决方法是使用 svcutil 应用程序生成代理，然后使用与原样相同的代理。 [http://tutorials.csharp-online.net/WCF_Essentials%E2%80%94Generating_the_Proxy](http://tutorials.csharp-online.net/WCF_Essentials%E2%80%94Generating_the_Proxy)

一般来说，我认为您应该开始使用数据合同的命名空间，因为它已经帮助我多次识别参考版本问题，拥有代理运行的代码版本真是太好了。但这是另一个差事:)

也许在进行引用时，如果您可以添加对持有接口的公共库的引用，则可以使用服务引用设置“重用引用程序集中的类型”，这将使它们不会将自己的类型扩展到相同的扩展。

最后是，在服务引用下显示所有可见的文件 Reference.svcmap，此 xml 包含一个元素“CollectionMappings”，通常需要指定我的列表在这种情况下的行为，本文提供了一些见解：
[http：/ /social.msdn.microsoft.com/Forums/vstudio/en-US/09eefbbc-bf63-4aa3-a0cb-01a9dbd7f496/problem-sharing-custom-collection-types-between-service-and-client](http://social.msdn.microsoft.com/Forums/vstudio/en-US/09eefbbc-bf63-4aa3-a0cb-01a9dbd7f496/problem-sharing-custom-collection-types-between-service-and-client)

这是我的调试提示的五分钱，
干杯

# c# - c#中的PictureBox布局问题

> ID：15241962
> 
> 赞同：7
> 
> 时间：2013-03-06T08:03:56.873
> 
> 标签：c#, winforms

我确信我的问题或问题真的很奇怪，但就是这样：

我正在用 c# 编写一个程序，它具有从右到左的布局（阿拉伯语）。然后我将`pictureBox`控件添加为表单中的背景图像。我已经设置了`pictureBox`要填写的码头，所以它将是所有表格。

由于图片有一些涉及不止一种颜色的设计，我想让标签透明，这样它就没有任何颜色，它会从`pictureBox`自身中获取颜色。这是我使标签透明的方法：

```
label_customer_name.Parent = pictureBox1;

label_customer_name.BackColor = Color.Transparent; 
```

此方法可以很好地将颜色更改为透明，但存在问题。当我将标签的父级设置为 时`pictureBox`，它的位置会发生变化并反映在另一侧。例如，如果位置在执行后设置为 X，则该位置将是表单宽度 - x。知道如何摆脱这个问题吗？

我要简短地寻找的是：

1.  有没有其他方法可以在不将父级设置为容器控件的情况下使标签透明？或者

2.  如何更改布局`PictureBox`并强制它从左到右。

正如提示和有趣的事情是：如果我添加`pictureBox`到选项卡控件并将选项卡控件设置为从右到左，问题就会消失，因为似乎`pictureBox`将从选项卡控件获取布局但它没有得到它来自表单本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T19:26:00.523

使用 GDI+ 以透明方式绘制图像。

看到这个。

[http://www.codeproject.com/Articles/25048/How-to-Use-Transparent-Images-and-Labels-in-Window](http://www.codeproject.com/Articles/25048/How-to-Use-Transparent-Images-and-Labels-in-Window)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:41:14.093

你可以尝试这样的事情：

```
Image im = Image.FromFile("imagePath");
this.BackgroundImage = im;
this.BackgroundImageLayout = ImageLayout.Stretch;
this.DoubleBuffered = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:50:27.430

使用一个`FlowLayoutPanel`控件，这将服务于隐藏​​的需求，您可以设置`FlowDirection = RightToLeft`和`RightToLeft = True`。将面板的 BackgroundImage 放入您的图像并将标签添加到该面板。

试一试它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T10:45:53.703

使用表单设计器时，Label 控件成为表单的子项。这是不透明的原因。我们需要在 InitializeComponent 之后将 Parent 属性设置为 PictureBox 对象。

```
InitializeComponent();
label1.Parent = pictureBox1;
label1.BackColor = Color.Transparent; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T09:17:53.440

如果您的位置在分配父级后发生变化，您可以保留标签的当前位置（x，y）并为其分配父级，然后再次将其位置设置为（x，y）

还可以尝试将标签控件添加到图片框中，以不同的方式设置父级。

```
pictureBox1.Controls.Add(label_customer_name); 
```

另一种使标签控件透明的解决方案是将标签控件的背景设置为与图片框背景相似。您可以指定背景中的颜色。（这是一个肮脏的解决方案，我个人不会建议这样做。）

# actionscript-3 - 从 TextArea 获取 HTML 文本

> ID：15241963
> 
> 赞同：0
> 
> 时间：2013-03-06T08:03:59.093
> 
> 标签：actionscript-3

我有一个`TextArea`最后一行

```
</strong> Esplanade Concert Hall <strong>MRT:</strong> 
```

我需要得到与原样相同的最后一行文本。

我正在使用这个函数来获取它：

```
textarea.mx_internal::getTextField().getLineText(lastlineIndex-2) 
```

但是返回的值是纯文本，我需要带有`HTML`格式的值，以便我可以将相同的字符串用于其他一些字符串操作。

我需要它，因为`HTML`我需要

```
content.split(lastlineText); 
```

并`content`持有`HTML`文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:51:33.263

这是不可能的，因为文本字段不支持强标签。从 textarea htmltext 中删除了强标记。但是您可以使用正则表达式。将最后一行拆分为单词并创建模式。往下看（也许你自己修改代码）：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               creationComplete="application_creationCompleteHandler(event)"
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected var str:String = "";

            protected function application_creationCompleteHandler(event:FlexEvent):void
            {
                str = 'ActionScript 3 (AS3) is the open source object oriented programming (OOP) language of the Adobe <strong>Flash</strong> and <b>AIR</b> Platforms.';

                textarea.addEventListener("htmlTextChanged", textarea_changeHandler, false, 0, true);
                textarea.htmlText = str;
            }

            protected function textarea_changeHandler(event:Event):void
            {
                var allLines:Number = textarea.mx_internal::getTextField().numLines;
                var line:String = textarea.mx_internal::getTextField().getLineText(allLines-1); 

                var arr:Array = line.match(/\w+[.!?]?/gi);

                var pattern:String = "";

                var i:uint = 0;
                var l:uint = arr.length;

                for ( ; i<l; i++)
                {
                    pattern += "(<[^</]+?>)?\\s*" +  arr[i] + "\\s*(<[^<]+?>)?" + "\\s*";
                }

                var regex:RegExp = new RegExp(pattern, "gi");

                trace( str.match(regex) );

            }

        ]]>
    </fx:Script>
    <mx:TextArea id="textarea" width="280" height="100" x="100"/>

</s:Application> 
```

# .net - 在构建服务器上时，TFS 没有部署引用的程序集来测试目录

> ID：15241965
> 
> 赞同：5
> 
> 时间：2013-03-06T08:04:04.383
> 
> 标签：.net, unit-testing, mstest, coded-ui-tests

我有 Coded-UI 测试项目，它引用了解决方案中的其他程序集。不知何故，有些程序集没有复制到`TestResults/Out`目录中，而另一些则被复制了。所有程序集都有`Copy Local`选项`true`（不知道它是否真的很重要）并且在其他选项中是绝对平等的。当我从 VS2010 本地开始测试时，所有程序集都会被复制，但在构建服务器上时不会。

如果我使用`[DeploymentItem]`属性强制部署这些“顽皮”程序集，它们会成功部署。

我无法理解 - 我一直认为，如果您引用程序集（在 的`References`部分中`Solution Explorer`），该程序集将被复制到`TestResults/Out`并且`[DeploymentItem]`需要复制一些 .xml 和其他配置文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T19:12:03.467

我以前见过这个。您的测试项目引用了其他项目，但是当测试运行时，您会注意到程序集不在 TestRun Out 文件夹中。

与从固定位置运行单元测试的其他测试运行程序不同，MSTest 将它需要的程序集复制到执行测试的测试运行文件夹中。该设计允许您比较测试运行之间的测试结果、覆盖率和输出。

常见的误解是，像“复制本地”这样的*编译设置*会以某种方式影响*用于测试*的依赖项，这根本不是真的。**MSTest 使用反射**来确定测试运行所需的程序集引用。

您看到的错误可能是因为您引用了程序集但测试程序集没有直接使用它。您可以通过使用 IL 检查实用程序（DotPeek、Reflector 等）查看测试组装参考来验证这一点。*（这通常是在 XAML 中引用程序集的 WPF 项目中的问题。）*

要修复，请使用 DeploymentSettings 将程序集复制到输出文件夹；或在测试项目中使用该程序集。例如，将以下内容添加到您的测试项目将发出 IL 以确保部署程序集：

```
var type = typeof(AssemblyNotBeingCopied.MyClass); 
```

# javascript - 为什么在使用 Jquery 的 unwrap() 时会出现“DOM Exception 8”？

> ID：15241970
> 
> 赞同：2
> 
> 时间：2013-03-06T08:04:18.527
> 
> 标签：javascript, jquery, dom

*我有这个生成异常的简单代码和平：（仅在 chrome 中）*

> 未捕获的错误：NotFoundError：DOM 异常 8

场景：如果用户访问了 a`textbox`并且没有输入值，他会在什么时候得到通知`bluring`。
并且`textbox`将用`red div`. 如果他点击 - （为了输入一个值） - 红色的 div 被删除（由`unwrap`文本框）。

所以

*   我有一个文本框。
*   此文本框附加了一个模糊处理程序。
*   当出现模糊时，我正在检查是否输入了一个值。
    *   如果输入了一个值：一切正常。什么都没做。
    *   如果不 ：
        *   我 `alert`是用户
        *   `textbox`我用红色边框 包裹,
        *   我附上了一个`click event handler`，这样如果用户点击文本框（为了输入一个值），边框就会消失。

**问题 ：**

当用户被*提醒*并`red-div`包装时`textbox`，**每次我点击**文本框*（为了输入一个值*） - 我得到异常（显然事情搞砸了）

**问题**：

`Why`它发生了吗，`how`我可以解决它吗？

代码：（[**JSBIN**](http://jsbin.com/ubagac/3/edit)）

```
$("body").on("blur", ".myTb", function () {

    if (!$(this).val()) {
        alert('you must enter something!');
        doWork($(this))
    }

});

function doWork(obj) {

    var t = $("<div class='divError'/>");

    obj.wrap(t);

 obj.on('click', function () {
        obj.unwrap();
    });
} 
```

* * *

ps：

1）我想*保留*用红色 div 包装元素的想法，并在用户单击时将其删除（以便输入值）。（*因为这是我插件的一小部分，它已经像这样工作了*）

2）FF中**没有问题**

3) 镀铬版本：25.0.1364.97 m

4）jQuery：1.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:18:34.723

我认为问题在于，您多次包装输入字段。一旦您测试错误包装器是否已经存在，错误就消失了：

```
$("body").on("blur", ".myTb", function () {
    if (!$(this).val()) {
        doWork($(this));
    }
});

function doWork(obj) {
    var t = $("<div class='divError'/>"),
        hasError = obj.closest('.divError').length;
  if(!hasError) {
    alert('you must enter something!');
    obj.wrap(t);
  }
  //console.log(obj);
  obj.on('click', function () {
    console.log(obj);
        obj.unwrap();
        obj.focus(); // be sure to set focus to the input element
    });
} 
```

更新[的测试在这里](http://jsbin.com/ubagac/14/edit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T08:44:01.853

问题是当您打开输入元素时会触发 blur 事件。`.one()`在这种情况下使用更安全：

```
function blurOn()
{
  $("body").one("blur", ".myTb", function () {
    if (!$(this).val()) {
        alert('you must enter something!');
        doWork($(this));
    }
  });
}

function doWork(obj) 
{
    var t = $("<div class='divError'/>");

    obj.wrap(t);

    obj.one('focus', function () {
       obj.unwrap().focus();
       blurOn(); // enable blur event handler again
    });
}

blurOn(); 
```

[**演示**](http://jsbin.com/ubagac/18/)

# objective-c - Objective-C 会自动生成 setter 和 getter 吗？

> ID：15241975
> 
> 赞同：2
> 
> 时间：2013-03-06T08:04:33.803
> 
> 标签：objective-c

我正在调用其他类的方法，如下所示

```
@property (nonatomic,strong) CalculatorModel *calculatorModel;

double result = [self.calculatorModel result:operator]; 
```

但是此方法没有收到来自调用者的消息。直到我写了我自己的吸气剂

```
- (CalculatorModel*)calculatorModel {
    if (!_calculatorModel) _calculatorModel = [[CalculatorModel alloc]init ];
    return _calculatorModel;
} 
```

它有效。为什么，我记得一旦你做了@property，Objective-C 会自动生成setter 和getter。我错了吗？

谢谢

更新：![在此处输入图像描述](../Images/285c47149f4d4f1425ac2f9afaf7b23c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:08:13.250

> Objective-C 会自动生成 setter 和 getter 吗？

好吧，而是编译器，但是**是的，Clang 的最新版本具有此功能。**您不再需要手动合成属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:17:33.080

似乎您不再需要从 xCode4.5 手动合成属性。IDE 将帮助您完成。但可怕的是，如果您在 xCode4.3 或 xCode4.4 上打开项目，它将无法正常工作，很多将出现警告，然后您应该自己添加代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T08:22:01.323

你说的对。但是，您仍然必须使用`[[Class alloc] init]`. 就像我们为 设置属性一样`NSMutableArray`，`@property (nonatomic, strong) NSMutableArray *anArray;`在您使用之前，`anArray`您必须将其初始化为`_anArray = [[NSMutableArray alloc] initWithCapacity:10];`

该`- (CalculatorModel*)calculatorModel`方法称为延迟实例化，它将在调用之前接管`[[Class alloc] init]`工作，这将有助于性能和内存控制。

# java - java.sql.SQLException: 9 的参数索引超出范围 (1, 8)

> ID：15241978
> 
> 赞同：0
> 
> 时间：2013-03-06T08:04:43.260
> 
> 标签：java, jdbc, sqlexception, callable-statement

我有一个要求，我必须使用三个 IN 参数和 6 个 OUT 参数调用 MySql 存储过程。

**程序**

```
DELIMITER $$ 
DROP PROCEDURE IF EXISTS GET_PRODUCT_INFO $$

CREATE PROCEDURE GET_PRODUCT_INFO(IN productName varchar(25),
  IN divisionID int(11), IN productQuantity int(11),
  OUT Price double, OUT price_without_vat double,
  OUT vat double, OUT Quantity int, OUT ProductsId int, OUT ExpDate date)

BEGIN

   select I.quantity into Quantity from ProductInventory I
     where I.pname=productName and I.divid=divisionID ;

   if Quantity > productQuantity THEN
      select P.productID,P.price,P.price_without_vat,P.vat, I.quantity,P.ExpiryDate 
        into ProductsId,Price,price_without_vat,vat,Quantity,ExpDate 
        from product P,ProductInventory I
        where P.pname=productName and I.pname=productName 
          and P.orgid=divisionID and I.divid=divisionID ;

      update productinventory 
        set quantity=(quantity-productQuantity)
        where pname=productName and divID=divisionID;
   END IF;
END $$

call GET_PRODUCT_INFO('Crocin',1,2,@Price,@price_without_vat,@vat,@Quantity,@ProductsId,@ExpiryDate)$$ 
```

在这里，我可以在 mysql cmd 提示符中检索记录...但是每当我尝试从我的 JDBC 代码调用该过程时，都会收到此错误

**例外**

java.sql.SQLException：com.mysql.jdbc.CallableStatement.checkIsOutputParam(CallableStatement.java 的 com.mysql.jdbc.CallableStatement.checkParameterIndexBounds(CallableStatement.java:1002) 的参数索引 9 超出范围 (1, 8) :971)

```
callableStatement = (CallableStatement)con.prepareCall("{call GET_PRODUCT_INFO(?,?,?,?,?,?,?,?,?)}");
callableStatement.setInt(2, 1);
callableStatement.setInt(3, quantity);
callableStatement.registerOutParameter(4, Types.DOUBLE);
callableStatement.registerOutParameter(5, Types.DOUBLE);
callableStatement.registerOutParameter(6, Types.DOUBLE);
callableStatement.registerOutParameter(7, Types.INTEGER);
callableStatement.registerOutParameter(8, Types.INTEGER);
callableStatement.registerOutParameter(9, Types.DATE);--->Exception here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:14:30.017

`callableStatement.setString(1, "SomeText");`

也包括这个。你错过了`1`参数。

# solr - Solr4 目前只查看默认的“df”字段，我们如何搜索多个字段？

> ID：15241980
> 
> 赞同：5
> 
> 时间：2013-03-06T08:04:49.030
> 
> 标签：solr, solr4

在 Solr 4 中，我看到我们在`/select`请求处理程序中配置了默认字段“df”：

```
 <requestHandler name="/select" class="solr.SearchHandler">
    <!-- default values for query parameters can be specified, these
         will be overridden by parameters in the request
      -->
     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <int name="rows">10</int>
       <str name="df">id</str> 
```

但是`id`是我们唯一的文档字段，所以所有查询都默认为“id:my_query”，它总是返回 0 个结果。

如何定义默认查询哪些字段？

这是从 v3 到 v4 的升级，这部分似乎在此过程中被破坏了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T08:09:28.673

您可以使用名为“文本”的[复制字段](http://wiki.apache.org/solr/SchemaXml#Copy_Fields)，将所有可搜索字段复制到此字段中，并将其指定为默认搜索字段。

```
<requestHandler name="/select" class="solr.SearchHandler">
    <!-- default values for query parameters can be specified, these
         will be overridden by parameters in the request
      -->
     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <int name="rows">10</int>
       <str name="df">text</str> 
```

您可以将要复制的字段添加到复制字段，如下所示：

```
<copyField source="field1" dest="text"/>
<copyField source="field2" dest="text"/>
...
<copyField source="fieldn" dest="text"/> 
```

请注意，“文本”是此处的复制字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-03T13:41:13.970

您可以使用 edismax 搜索。

见[https://cwiki.apache.org/confluence/display/solr/The+Extended+DisMax+Query+Parser](https://cwiki.apache.org/confluence/display/solr/The+Extended+DisMax+Query+Parser)

检查 qf（查询字段）参数。您可以将多个字段传递给它

# xcode - TeamCity 在构建 PhoneGap 项目时未构建 Cordova 项目

> ID：15241982
> 
> 赞同：2
> 
> 时间：2013-03-06T08:05:10.720
> 
> 标签：xcode, cordova, teamcity

我正在尝试使用 TeamCity 构建 PhoneGap 应用程序，但收到一条错误消息：

AppDelegate.h:30:9：致命错误：找不到“Cordova/CDVViewController.h”文件

我的 xcodeproj 实际上在项目中有 Cordova.xcodeproj 文件，而不是从其他任何地方引用它。我可以说它实际上是在构建项目，因为当我故意将语法错误放入其中一个文件时，该文件的构建失败，但似乎编译的输出并未被主项目拾取。

我可以通过 xcode 很好地构建项目。

谢谢，马特

# genetic-algorithm - 遗传表征与适应度函数的关系

> ID：15241989
> 
> 赞同：0
> 
> 时间：2013-03-06T08:05:24.380
> 
> 标签：genetic-algorithm, heuristics, evolutionary-algorithm

如您所知，选择遗传表示是构建任何遗传算法 (GA) 的一部分。因此可以在基因型空间（问题解决空间）和表型空间（原始问题上下文）之间定义映射。*适应度函数*，我们称之为*f*，可以是这种映射，以防评估 GA 的个体与原始问题的目标函数相同：

```
f: Genotype Space ---------> Phenotype Space 
```

对于每个基因型，都有一个对应的表型。所以，*f*是单射的。一个好的 GA 表示将所有表型编码为基因型。所以，*f* 是双射的。我的问题：是否有可能通过检查适应度函数的一些分析特性来进一步评估遗传表征的质量。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:40:33.330

到目前为止，还没有任何一套通用指南来评估适应度函数的质量。

对于开始研究遗传算法问题的人来说，适应度函数首先被表述为适合自己理解的启发式。随着新指标的出现，研究人员会逐步开发“更好”的适应度测量方法，研究人员会改进适应度函数。

正如[关于适应度函数的维基百科文章](http://en.wikipedia.org/wiki/Fitness_function)所述：

> 在许多情况下，适应度函数的定义并不简单，并且如果 GA 产生的最适合的解决方案不是我们想要的，则通常会迭代地执行。在某些情况下，即使猜测适应度函数定义可能是什么，也很难或不可能提出。

然而，评估适应度函数的适用性是一个活跃的研究领域。过去已针对此目的进行了定向研究，但尚未出现有希望的结果。

# sql-server - MS SQL 中两个查询的减法

> ID：15241995
> 
> 赞同：0
> 
> 时间：2013-03-06T08:05:57.073
> 
> 标签：sql-server, sql-server-2008

请帮助解决问题。
我无法创建正确的工作请求，它可以计算两个查询之间的差异。
为了得到商店的商品数量，我们需要从所有供应商的所有产品的总和中减去销售的商品数量。

有两个单独的查询。

**1.首先计算所有供应商的所有产品的总和。**

```
SELECT CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) AS Dat, 
SUM(nb.TEreport.goods) AS Goods
FROM nb.TEreport INNER JOIN nb.TEprovider ON nb.TEreport.id_provider = nb.TEprovider.id
WHERE (LEFT(nb.TEprovider.name, 10) != 'FROM STORE') 
AND (CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) <= CONVERT(VARCHAR, GETDATE(), 102))
AND CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) >= '2013.01.01'
GROUP BY CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102)
ORDER BY Dat DESC 
```

**2\. 其次计算销售的商品数量。**

```
SELECT CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) AS Dat, 
SUM(nb.TEreport.goods) AS Goods
FROM nb.TEreport INNER JOIN nb.TEway ON nb.TEreport.id_way = nb.TEway.id
WHERE (SUBSTRING(nb.TEway.name, 5, 8) != 'TO STORE') 
AND (CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) <= CONVERT(VARCHAR, GETDATE(), 102))
AND CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) >= '2013.01.01'
GROUP BY CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102)
ORDER BY Dat DESC 
```

**我尝试使用子查询，但这不是实际需要**
的例如，

```
SELECT CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) AS Dat,
  (SELECT SUM(nb.TEreport.weight)
   FROM nb.TEreport
   INNER JOIN nb.TEprovider ON nb.TEreport.id_provider = nb.TEprovider.id
   WHERE LEFT(nb.TEprovider.name, 10) != 'FROM STORE')-
  (SELECT SUM(nb.TEreport.weight)
   FROM nb.TEreport
   INNER JOIN nb.TEway ON nb.TEreport.id_way = nb.TEway.id
   WHERE SUBSTRING(nb.TEway.name, 5, 8) != 'TO STORE')
FROM nb.TEreport
WHERE CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) <= CONVERT(VARCHAR, GETDATE(), 102)
  AND CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) >= '2013.01.01'
GROUP BY CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102)
ORDER BY Dat ASC 
```

但在这种情况下，查询没有给出特定日期的具体金额，它只是给出了该期间所有数字的总和。我该如何解决这个问题？

PS 日期以秒为单位存储，这就是我使用日期转换器的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:30:22.237

更新：你可以试试

```
 SELECT Dat, SUM(Goods) AS Goods
   FROM
(SELECT CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) AS Dat, 
        SUM(nb.TEreport.goods) AS Goods
   FROM nb.TEreport INNER JOIN nb.TEprovider ON nb.TEreport.id_provider = nb.TEprovider.id
  WHERE (LEFT(nb.TEprovider.name, 10) != 'FROM STORE') 
    AND (CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) <= CONVERT(VARCHAR, GETDATE(), 102))
    AND CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) >= '2013.01.01'
  GROUP BY CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102)
  ORDER BY Dat DESC
  UNION ALL
 SELECT CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) AS Dat, 
        -SUM(nb.TEreport.goods) AS Goods
   FROM nb.TEreport INNER JOIN nb.TEway ON nb.TEreport.id_way = nb.TEway.id
  WHERE (SUBSTRING(nb.TEway.name, 5, 8) != 'TO STORE') 
    AND (CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) <= CONVERT(VARCHAR, GETDATE(), 102))
    AND CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102) >= '2013.01.01'
  GROUP BY CONVERT(VARCHAR, DATEADD(s, nb.TEreport.dat, 25568), 102)
  ORDER BY Dat DESC) t
GROUP BY Dat
ORDER BY Dat DESC 
```

假设您的两个查询都可以正常工作。这个想法是在第二次选择中反转货物值的符号，联合两个结果集，然后按 Dat 分组并计算货物的总和。

**[你可以在这个小提琴](http://sqlfiddle.com/#!3/28368/1)**中看到一个简化的例子