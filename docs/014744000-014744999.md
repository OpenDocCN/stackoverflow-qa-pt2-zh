# StackOverflow 问答 14744000-14744999

# ruby - watir-webdriver 单步执行表格并保存 :title 字段

> ID：14744001
> 
> 赞同：1
> 
> 时间：2013-02-07T05:11:27.580
> 
> 标签：ruby, watir-webdriver

我想遍历一个表格并保存`:title`没有文本的字段 这是来自*tinymce*网站。

```
<table class="mceColorSplitMenu" role="presentation">
<tbody>
<tr>
<td>
<a id="_mce_item_3" href="javascript:;" style="background-color: rgb(0, 0, 0);" title="Black" data-mce-color="#000000" role="option" tabindex="0"></a>
</td>
<td>
<a id="_mce_item_4" href="javascript:;" style="background-color: rgb(153, 51, 0);" title="Burnt orange" data-mce-color="#993300" role="option" tabindex="-1"></a>
</td>
<td>
</tr>
<tr>
<tr> 
```

以下两个代码片段都给了我一个空数组

```
table_array = Array.new
table = b.table(:class => 'mceColorSplitMenu')
table.rows.each do |row|
 row_array = Array.new
 row.cells.each do |cell|
 row_array << cell.title
 puts(cell.title)
 end
 table_array << row_array
end

t2 = Array.new
b.table(:class => 'mceColorSplitMenu').to_a # this is empty because there is no text field. 
```

我不确定为什么`cell.title`是空白的。第一个单元格有`'title="Black"'`。我想在每个单元格中保存一个**唯一**字段，以便稍后返回并单击表格中的每种颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:09:14.580

查看 HTML，`<a>`标签具有`title`属性。此代码段应从表中的链接返回标题数组：

```
titles = []
b.table(:class => 'mceColorSplitMenu').links.each { |link| titles << b.link(:id => "#{link.id}").title } 
```

编辑：

```
titles = b.table(:class => 'mceColorSplitMenu').links.collect(&:title) 
```

# silverlight - 将 src 设置为来自网站的文件后图像未显示 - Windows Phone

> ID：14744004
> 
> 赞同：0
> 
> 时间：2013-02-07T05:11:33.063
> 
> 标签：silverlight, windows-phone-7, xaml, windows-phone-8-emulator

我在下面有这段演示代码：

```
<Image Name="imgCam" Width="400" Height="600" Visibility="Visible" Source="http://www.graffiti.org/prague/phoe_whs_2000.jpg" /> 
```

这在设计器中显示，但是当我运行模拟器或尝试在手机上查看它时它不起作用？为了让这个图像显示在模拟器和手机中，我是否缺少一些东西？该网址将在浏览器中加载图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:26:43.223

我已经检查了您在模拟器中的 URL 及其在模拟器中的显示图像。检查您的模拟器是否有互联网连接并且工作正常。

你也可以试试这个。Uri uri = new Uri("你的 URL", UriKind.RelativeOrAbsolute); Your_Image.Source = new BitmapImage(uri);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:20:42.730

此图像也适用于我的模拟器，除非我从应用程序中删除网络权限。

您应该检查您是否在 WMAppManifest.xml 的 Capabilities 部分中指定了 ID_CAP_NETWORKING

```
<Capabilities>
 <Capability Name="ID_CAP_NETWORKING"/>
</Capabilities> 
```

# sql - 添加链接服务器时“找不到数据源名称”

> ID：14744012
> 
> 赞同：0
> 
> 时间：2013-02-07T05:12:13.123
> 
> 标签：sql, sql-server, tsql, linked-server, pervasive-sql

我正在尝试使用 ssms 2012 将链接服务器添加到 sql server 2012 数据库。

链接服务器是普遍的 sql。这就是我尝试这样做的方式：

```
EXEC sp_addlinkedserver 
   @server = 'kslap208', 
   @provider = 'MSDASQL', 
   @datasrc = 'C003',
   @srvproduct = 'Pervasive'
GO 
```

但是，当我测试连接时，我收到此错误消息：

![在此处输入图像描述](../Images/57fc143adf861e813c0c6b8c77afe933.png)

我究竟做错了什么？如何链接到普遍的 sql 数据库的实例？

以下是有关我尝试连接的 DSN 的一些附加信息：

![在此处输入图像描述](../Images/e5e76fcf20bf8c28492fe21c9c5d1275.png)

# html - 在循环画架中访问画布

> ID：14744014
> 
> 赞同：1
> 
> 时间：2013-02-07T05:12:17.000
> 
> 标签：html, canvas, easeljs

我正在使用easeljs 进行HTML5 编程。在我的示例中，我有 3 个画布（can1、can2、can3 是这三个画布的舞台，并且必须使用循环在该画布中加载图像

例如：

```
can1 = new Stage(canvas1);
can2 = new Stage(canvas2);
can3 = new Stage(canvas3);
for(var j=0;j<=3;j++){ 
  "can"+j.addChild(//image need to display)
} 
```

“可以”+j 不工作。它显示 j.addChild 不是函数错误。如何访问这个？

谢谢，
沙迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:40:20.357

将画布存储在数组中，然后访问它们，如下所示：

```
var can = [new Stage(canvas1),
           new Stage(canvas2),
           new Stage(canvas3)];
for(var j=0;j<=3;j++){ 
    can[j].addChild(//image need to display);
} 
```

这不起作用的原因是你不能像那样构建变量名。`"can"+j`只会返回一个字符串，`"can1"`，它没有`addChild`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:44:33.013

除了 Cerbrus 给出的好答案之外，这个 jsFiddle 还向您展示了如何使用easeljs 使用循环在它们自己的单独画布元素中显示您的图像：http: [//jsfiddle.net/m1erickson/gxrSQ/](http://jsfiddle.net/m1erickson/gxrSQ/)

另请注意，在这行代码中，您的 can1 变量实际上是一个 Stage 对象——不是画布： can1=new Stage(canvas1);

下面是循环遍历 imageUrls 数组并使用 easeljs 将图像加载到单独的画布元素中的脚本：

```
 var images=[];
    var stages=[];
    // create an array to hold the path to each image
    images.push("yourImage1.png");
    images.push("yourImage2.png");
    images.push("yourImage3.png");
    // call  a function to load each of the images you pushed into images[]        
    loadImages();

    function loadImages(){
        // loop thru images
        for(var i=0;i<images.length;i++){
            // create a new canvas for this image
            var canvas = document.createElement("canvas");
            canvas.setAttribute("id", "can"+i);
            document.body.appendChild(canvas);
            stages.push(i);
            // create a new image object 
            var img=new Image();
            img.index=i;
            // important! -- wait until the image has been loaded
            img.onload=function(e){
                // get the canvas element for this image
                // and set the canvas.width and canvas.height
                var c=document.getElementById("can"+this.index);
                c.setAttribute("width",this.width);
                c.setAttribute("height",this.height);
                // create a new stage using this new canvas
                var stage=new createjs.Stage(c);
                // create a bitmap to feed into the new stage
                var bmp=new createjs.Bitmap(this);
                // add the bitmap to the stage
                stage.addChild(bmp);
                // update the stage (the image will display now)
                stage.update();
                // save this new stage in an array 
                // in case you need it later
                stages[this.index]=stage;
            }
            // set the image source from the images array
            img.src=images[i];
        }
    } 
```

# c++ - 错误：& 标记之前的预期主表达式

> ID：14744017
> 
> 赞同：0
> 
> 时间：2013-02-07T05:12:23.840
> 
> 标签：c++, arrays, class, pointers

我正在编写一个获取输入文件并对其进行解析的程序，它应该创建两个数组`WORDS`，`FREQUENCY`然后打印出它在其中得到的内容。Words 将包含文件中的所有单词而不重复它们。频率将具有每个单词在文件中出现的次数。

但是，我似乎无法让 main 正确使用文件，并且在尝试运行程序时不断收到这些错误。

```
main.cpp:21: error: no matching function for call to 'FileParser::parseFile(Analysis& (&)())'
fileParser.h:56: note: candidates are: void FileParser::parseFile(Analysis&)
main.cpp:25: error: request for member 'printListAll' in 'a', which is of non-class type 'Analysis& ()()' 
```

我的代码：

```
//MAIN

#include <iostream>
#include <cstdlib>
#include <fstream>

using namespace std;

#include "analysis.h"

  #include "fileParser.h"

    int main(int argc, char *argv[])
    {

        Analysis a();

        //Input Parse
        FileParser input("input.txt");
        input.parseFile(a);

    //Output
    ofstream outP("output.txt");
    a.printListAll(outP);

    return 0;
}

====================

using namespace std;

#include "word.h"

#ifndef ANALYSIS_H
#define ANALYSIS_H

class Analysis{

    private:

        Word** wordList;
        int wordListSize;
        int wordListCapacity;

        //Resizes the wordList array
        void resize()
        {
            Word** temp = new Word* [wordListCapacity + 10];
            for(int i = 0; i < wordListSize; i++)
                temp[i] = wordList[i];

            delete [] wordList;
            wordList = temp;
            wordListCapacity += 10;
        }

        //Sorts the words in the analysis
        void sortAna()
        {
            for (int i = 0; i < wordListSize - 1; i++)
            {
                int curSmallest = i;
                for (int j = i + 1; j < wordListSize; j++)
                    if (*wordList[j] < *wordList[curSmallest])
                        curSmallest = j;
                if(curSmallest != i)
                {
                    Word* temp = wordList[i];
                    wordList[i] = wordList[curSmallest];
                    wordList[curSmallest] = temp;
                }
            }
        }

        Analysis(const Analysis&){}

    public:

        Analysis(){
            wordListSize = 0;
            wordListCapacity = 10;
            wordList = new Word*[wordListCapacity];
        }

        ~Analysis()
        {
            for (int i = 0; i < wordListSize; i++)
                delete wordList[i];
            delete [] wordList;
        }

        bool isInAnalysis(char str[]){
            for (int i = 0; i < wordListSize; i ++)
            {
                if (wordList[i]->equals(str))
                    return true;
            }
            return false;
        }

        void addWord(char str[], int frequency)
        {
            if (wordListSize == wordListCapacity)
                resize();

            //Check to see if the exists already, if it does just
            //add to the frequency
            else if (isInAnalysis(str))
            {
                for (int i = 0; i < wordListSize; i++)    
                {
                    if (wordList[i]->equals(str))
                    {
                        wordList[i]->addFrequencyToList(str);
                        break;
                    }
                }
            }

            //If its a new word
            else
            {
                wordList[wordListSize] = new Word(str);
                wordList[wordListSize] -> addFrequencyToList(str);
                wordListSize++;
            }
        }

        //Print the Analysis in all output form (-a)
        void printListAll(ostream& out)
        {
            sortAna();
            int * tempFrequency;
            for (int i = 0; i < wordListSize; i++)
            {
                char* str = wordList[i] -> getWord();

                int numFrequency = wordList[i] -> getFrequency();
                tempFrequency = new int[numFrequency];
                wordList[i] -> getFrequencyList(tempFrequency);

                //Handle wrapping

                char tempOutput[55];
                strcpy(tempOutput, str);
                strcat(tempOutput, " = ");
                char tempPageNumber[50];

                for (int i = 0; i < numFrequency; i++){
                    sprintf(tempPageNumber, "%d", tempFrequency[i]);
                    int currPageLen = strlen(tempPageNumber);

                    if(strlen(tempOutput) + currPageLen > 49)
                    {
                        out << tempOutput << endl;
                        strcpy(tempOutput, "    ");
                    }
                    strcat(tempOutput, tempPageNumber);
                    if(i != numFrequency - 1)
                        strcat(tempOutput, "  ");
                }
                //Flush the last set of contents of the buffer
                out << tempOutput << endl;
                delete[] tempFrequency;
                delete[] str;
            }
        }

};

#endif

==========

#include "analysis.h"
#include "word.h"

#ifndef FILEPARSER_H
#define FILEPARSER_H

class FileParser
{
    private:

        char* fileName;
        ifstream cin;

    public:

        FileParser(char* fName)
        {

            fileName = new char[strlen(fName) + 1];
            strcpy(fileName, fName);

            cin.open(fileName);

            if (!cin.is_open())
                cerr << "****ERROR:  Cannot open Input file to parse it. ****" << endl;
        }

        ~FileParser()
        {
            cin.close();
        }

        bool isFileOpen(){
            return cin.is_open();
        }

        //Returns the length of the string given as an int
        int getFrequencyNumber(char* str)
        {
            return atoi(str);
        }

        //Parses the given File
        void parseFile(Analysis& a)
        {

            char currentWord[50] = {0};
            char currentFrequencyString[10] = {0} ;
            int currentFrequency;

            cin >> currentWord;
            while (currentWord[1] != '-')
            {

                if(currentWord[0] == ' ')
                {
                    //copy from 2nd character of currentWord to before the space
                    //which is at strlen(currentWord)
                    int count = 1;
                    while (currentWord[count] != ' ')
                    {
                        currentFrequencyString[count - 1] = currentWord[count];
                        count++;
                    }

                    currentFrequencyString[count - 1] = '\0';
                    currentFrequency = getFrequencyNumber(currentFrequencyString);
                }

                else
                {
                    //Convert the word to lower case
                    Word::toLower(currentWord);

                    //add to the index (passed in as param) with current freq.
                    a.addWord(currentWord, currentFrequency);
                }
                //get next word
                cin >> currentWord;
            }
        }

};

#endif

===============

using namespace std;

#ifndef WORD_H
#define WORD_H

class Word{

    private:
        char* string;
        int* frequencyList;
        int frequencySize; //Actual number of frequencies in the list.
        int frequencyCap;  //Total size of frequency
        int wordFrequency; //Frequency of a certain word.

        void resizeFrequency(){
            int* temp = new int[frequencyCap+10];
            for (int i = 0; i < frequencyCap; i++)
                temp[i] = frequencyList[i];
            delete [] frequencyList;
            frequencyCap += 10;
            frequencyList = temp;
        }

    public:
        /**
         * This constructor constructs the word
         * with the parameter value and initializes
         * the frequencyList
         */
        Word(char* input)
        {
            string = new char[strlen(input) + 1];
            strcpy (string, input);
            frequencyList = new int[10];
            frequencySize = 0;
            frequencyCap= 10;
            wordFrequency = 0;
        }

        // Copy constructor for word
        Word (const Word& rhs)
        {
            string = new char[strlen(rhs.string) + 1];
            strcpy(string, rhs.string);
            frequencyList = new int[rhs.frequencyCap];
            for (int i = 0; i < rhs.frequencyCap; i++)
                frequencyList[i] = rhs.frequencyList[i];
            frequencyCap = rhs.frequencyCap;
            frequencySize = rhs.frequencySize;
            wordFrequency = rhs.wordFrequency;
        }

        //Destructor
        ~Word()
        {
            delete[]string;
            delete[]frequencyList;
        }

       //Overloaded assignment operator
        Word& operator=(const Word& rhs)
        {
            if(this != &rhs)
            {
                delete [] string;
                delete [] frequencyList;

                string = new char[strlen(rhs.string) + 1];
                strcpy(string, rhs.string);
                frequencyList = new int[rhs.frequencyCap];
                for (int i = 0; i < rhs.frequencyCap; i++)
                    frequencyList[i] = rhs.frequencyList[i];
                frequencyCap = rhs.frequencyCap;
                frequencySize = rhs.frequencySize;
                wordFrequency = rhs.wordFrequency;
            }

            return *this;
        }

        //Seeing if given word matches another word.
        bool equals(char* temp)
        {
            if(strcmp(string, temp) == 0)
                return true;
            return false;
        }

        //Adds the frequency of the given word to the list
        //and if it already exits, frequency++
        void addFrequencyToList(char* temp)
        {
            if (frequencySize == frequencyCap)
                resizeFrequency();

            //Only adds a new frequency if the word doesn't
            //already appear in the list.
            if (equals(temp))
            {
                frequencyList[frequencySize] = wordFrequency;
                frequencySize++;
                wordFrequency++;
            }
        }

        //Gets the total size of the frequency list.
        int getFrequency()
        {   
            return frequencySize;
        }

        //Gets the frequency of a word
        /*int getFrequencyOfWord(char* temp)
        {
            for(int i=0; i<=frequencySize; i++)
            {
                if (*temp == string[i])
                    return frequencyList[i];
            }
        }*/

        void getFrequencyList(int* tempFrequencyList)
        {
            sort(frequencyList, frequencyList + frequencySize);
            for (int i = 0; i < frequencySize; i++)
                tempFrequencyList[i] = frequencyList[i];
        }

        //Returns a copy of the word
        char* getWord()
        {
            char* temp = new char[strlen(string) + 1];
            strcpy(temp, string);
            return temp;
        }

        //Helper function that converts to lower case.
        static void toLower(char* str)
        {
            int len = strlen(str);
            for (int i = 0; i < len; i++)
                str[i] = tolower(str[i]);
        }

        bool operator < (const Word& rhs)
        {
            return (strcmp(this->string, rhs.string) < 0);
        }

};

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:32:55.473

如果您替换您的声明，您看到的问题将得到解决

```
Analysis a(); 
```

和

```
Analysis a; 
```

例如看这个问题：[带空括号的默认构造函数](https://stackoverflow.com/questions/180172/default-constructor-with-empty-brackets)

或者查看他评论中提供的链接克里斯。

* * *

下次您提出问题时，请尝试删除尽可能多的代码。以下内容足以发现问题：

```
#include <iostream>
#include <cstdlib>
#include <fstream>

using namespace std;

class Analysis {
    private:
        Analysis(const Analysis&) {};
    public:
        Analysis() {};
};

class FileParser
{
    public:

        FileParser(char* fName);
        ~FileParser();

        //Parses the given File
        void parseFile(Analysis& a); 

}

int main(int argc, char *argv[])
{
    Analysis a();

    //Input Parse
    FileParser input("input.txt");
    input.parseFile(a);

    //Output
    ofstream outP("output.txt");
    a.printListAll(outP);

    return 0;
} 
```

您是否注意到现在只需快速浏览一下即可发现问题，而不是您提供的大量代码与您看到的错误消息毫无关联？通常，提出*好的*问题会迫使您将问题分解为根源。通常，您在尝试这样做时会自己发现问题。如果你没有找到它，你会得到大量的帮助，因为你表明你确实试图解决这个问题，而且你的问题很容易理解。没有人愿意为了这样一个小问题而翻阅两百行代码。

# sql - 如何在sql中进行自定义分组

> ID：14744018
> 
> 赞同：3
> 
> 时间：2013-02-07T05:12:31.203
> 
> 标签：sql, oracle

这是表格：

```
ID     TYPE     AMOUNT
--     ----     ------
 1     sell         50
 1     sell        100
 1      buy        200
 2     sell         50
 2      buy        100 
```

如何编写返回以下结果的 SQL 查询：

```
ID    TOTAL
--    -----
 1       50
 2       50 
```

我想我需要一个`group by id`但不确定如何对“卖出”的做“减法”。

我的数据库是甲骨文，顺便说一句。

感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:21:27.700

答案很简单。

```
SELECT id, SUM(
       CASE type
         WHEN 'Buy' THEN amount
         WHEN 'Sell' THEN -amount
       END
       ) AS TOTAL
FROM tbl
GROUP BY id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:19:50.080

这应该工作，

```
select "id",sum(decode(type,'sell',-"amount","amount")) total
from table1
group by "id" 
```

[**SQL 提琴输出**](http://www.sqlfiddle.com/#!4/45c78/6/0)

# ember.js - 在 Ember.js 中使用单独的模板文件

> ID：14744026
> 
> 赞同：29
> 
> 时间：2013-02-07T05:12:59.987
> 
> 标签：ember.js

MVC 框架始终允许将视图存储为单独的文件并进行检索。这应该如何在 Ember.js 中完成？我一直在寻找几个小时，所以如果你想把它作为某种重复而否决，请至少链接到一个提供明确、直接答案的问题或资源。

例如，Ember 会自动创建一个索引控制器，并`index`在您指定`{{outlet}}`url时自动呈现模板`/`，因此我不需要任何代码`window.App = Ember.Application.create();`来实现此功能，除了我的 app.js 中的任何代码。如何创建一个单独的文件，例如 index.handlebars 并让 Ember 找到并渲染它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-24T01:39:31.450

为了预加载我的模板，我在我的应用程序中使用了以下代码。它使用 jQuery 将模板添加到文件中，然后启动应用程序。该代码可以使用一些调整，但它对我有用......

```
var loaderObj = {

    templates : [
    '_personMenu.html',
    'application.html',
    'index.html',
    'people.html',
    'person.html',
    'people/index.html',
    'friend.html'
]
};

loadTemplates(loaderObj.templates);
//This function loads all templates into the view
function loadTemplates(templates) {
    $(templates).each(function() {
        var tempObj = $('<script>');
        tempObj.attr('type', 'text/x-handlebars');
        var dataTemplateName = this.substring(0, this.indexOf('.'));
        tempObj.attr('data-template-name', dataTemplateName);
        $.ajax({
            async: false,
            type: 'GET',
            url: 'js/views/' + this,
            success: function(resp) {
                tempObj.html(resp);
                $('body').append(tempObj);                
            }
        });
    });

}

var App = Ember.Application.create();
//Rest of the code here... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-09T11:03:12.470

您可以使用`JQuery.ajax`加载文本文件，然后`Ember.Handlebars.compile`从中创建模板：

```
$.ajax({
   url: 'http://example.com/path/to/your/file',
   dataType: 'text',
   success: function (resp) {
       MyApp.MyView = Ember.View.extend({
           template: Ember.Handlebars.compile(resp),
       });
   }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T06:34:38.920

将您的 JS 拆分为多个文件，然后使用构建过程将它们拼接在一起绝对是常态。查看另一个 SO Question 的答案，其中包含两种不同技术的链接，可根据您选择的服务器端技术来布置您的应用程序：

[EmberJS：在相当复杂的应用程序中很好地分离模型、存储、控制器、视图的关注点？](https://stackoverflow.com/questions/10118466/emberjs-good-separation-of-concerns-for-models-stores-controllers-views-in-a/14454269#14454269)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-25T11:00:30.950

有点晚了，但我会在这里为任何在这里找到自己的方式的人添加这个。

Handlebar 模板预编译可能是您正在寻找的。虽然通常您最终会将`<script type="text/x-handlebars">`标签添加到主应用程序文件中，但您也可以使用 Handlebars 将它们转换为 Javascript 字符串，然后将它们存储在`Ember.TEMPLATES`.

这有几个优点，因为代码更干净等，而且您将能够使用 Handlebars 的运行时版本，这将导致所需的运行时库更小，并且无需在浏览器中编译模板即可显着节省。

查看[http://handlebarsjs.com/precompilation.html](http://handlebarsjs.com/precompilation.html)和[http://www.smashingmagazine.com/2013/11/07/an-in-depth-introduction-to-ember-js/#what_is_handlebars_template_precompiling](http://www.smashingmagazine.com/2013/11/07/an-in-depth-introduction-to-ember-js/#what_is_handlebars_template_precompiling)了解更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T05:58:01.890

我的解决方案是使用带有 Includes 功能的服务器端编译语言，如 Jade（因为我正在使用带有 nodejs 的 ember）。您可以将每个车把模板编写为单独的文件，并在编译期间包含它们。相关翡翠文档：[https ://github.com/visionmedia/jade#a13](https://github.com/visionmedia/jade#a13)

或者你可以使用 Require.js 来包含其他 js 文件，有一个[相关的问题](https://stackoverflow.com/questions/8776151/ember-js-and-requirejs)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T13:23:45.307

我不确定我是否理解你的问题，但如果你问我认为你在问什么，那么你会`data-template-name`在`script`标签中给你的 .handlebars 文档一个：`<script ... data-template-name="index">...</script>`

# iphone - iphone：在此代码中查找错误

> ID：14744027
> 
> 赞同：0
> 
> 时间：2013-02-07T05:13:01.970
> 
> 标签：iphone

嗨，我想知道以下代码有什么问题

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button release]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T05:17:15.633

以下代码为您提供了一个`autoreleased`对象。

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

如果你调用它的释放，它会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:20:32.233

您的代码错误是：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

在这一行中，您没有分配`UIButton`. 这意味着您无法控制何时释放它。这条线是正确的。

```
[button release]; 
```

在这条线上，您试图释放`button`. 释放此对象的控制权不属于您，因为您尚未分配它。如果你想使用释放。然后`UIButton`先分配你的对象。

# .htaccess - 将创建新的 php.ini 覆盖原始文件

> ID：14744031
> 
> 赞同：0
> 
> 时间：2013-02-07T05:13:16.320
> 
> 标签：.htaccess, php

我有一个**linux**服务器。我无法通过我的应用程序将图像上传到它。我检查了**phpinfo()**，发现**upload_tmp_dir****没有**赋值。我觉得这是问题的原因。

我尝试编辑**.htaccess**但有人说这并不总是一个好方法。所以我尝试在我的服务器上搜索**php.ini文件。**令人惊讶的是，我找不到它。

那么，如果我在根文件夹中创建一个新的 php.ini 文件，这会影响我的服务器吗？

我只是担心如果所有 php.ini 覆盖我肯定会遇到大问题

那么我可以继续在我的新 php.ini 文件中添加此代码吗？

```
; Whether to allow HTTP file uploads.
file_uploads = On

; Temporary directory for HTTP uploaded files (will use system default if not
; specified).
;upload_tmp_dir = www/temp/uploads/ 
```

**更新：**

它抛出这些警告

```
PHP Warning:  move_uploaded_file(xml/xm.jpg.asp) [<a href='function.move-uploaded-file'>function.move-uploaded-file</a>]: failed to open stream: No such file or directory in /home/appsimon/public_html/api/update_xml.php on line 31
     PHP Warning:  move_uploaded_file() [<a href='function.move-uploaded-file'>function.move-uploaded-file</a>]: Unable to move '/tmp/phpLP5q96' to 'xml/xm.jpg.asp' in /home/appsimon/public_html/api/update_xml.php on line 31
     PHP Warning:  fopen(xml/xm.jpg.asp) [<a href='function.fopen'>function.fopen</a>]: failed to open stream: No such file or directory in /home/appsimon/public_html/api/update_xml.php on line 33
     PHP Warning:  file_get_contents(xml/xm.jpg.asp) [<a href='function.file-get-contents'>function.file-get-contents</a>]: failed to open stream: No such file or directory in /home/appsimon/public_html/api/update_xml.php on line 35 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:21:32.603

通常，它会覆盖服务器上的**php.ini**。您只能在新的**php.ini**中指定一些值。只有指定的值会被覆盖。

您还可以使用**PHP**覆盖某些**php.ini**值（仅当您的托管服务提供商允许时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:19:28.650

**您的问题与.htaccess**文件无关。.htaccess 基本上由 Apache 处理，但PHP 编译器使用的**php.ini**实际上是一个 Apache 模块。

如果您没有**php.ini**，则可能是您的 PHP 安装出了问题。只需获取一个默认的**php.ini**并将其放在**php.exe**旁边。

您还可以覆盖放置在 Web 服务器根目录而不是 Linux 根目录中的**php.ini中所需的功能。**

# ruby-on-rails - 在 Rails 中建模 PostgreSQL 的大对象

> ID：14744032
> 
> 赞同：2
> 
> 时间：2013-02-07T05:13:21.313
> 
> 标签：ruby-on-rails, postgresql, blob

我需要在我的 rails 应用程序的数据库中保存大对象。我认为我可以在 SQL 中创建一个表

```
CREATE TABLE files (
id serial NOT NULL,
name string NOT NULL,
blob_oid oid NUT NULL
) 
```

然后将数据存储在 Ruby 中

```
conn.exec("BEGIN")
lo = conn.lo_import(data)
conn.exec("COMMIT")
file = File.new
file.name = file_name; file.blob_oid = lo.id
file.save 
```

首先，这是正确的吗？其次，我如何描述 Rails 中 File 的模型。`Friend.blob_oid`Rails中的数据类型是什么？我可以在 Rails 中使用迁移创建文件表吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T15:21:23.817

如果使用 Rails 附带的 ActiveRecord 及其适配器之一，则数据库类型到 Rails 或 Ruby 类型的唯一正式映射通常定义在`NATIVE_DATABASE_TYPES`适配器中的常量中，该常量通过其`native_database_types`方法返回。对于 Rails 3.2.x 中的 PostgreSQL，即在`ActiveRecord::ConnectionAdapters::PostgreSQLAdapter`其中是[here](https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L220)。所以，对于那个适配器，Rails 中的“binary”类型映射到 PG 中的“bytea”类型。[对于某些类型，您可以使用名为activerecord-native_db_types_override](https://github.com/garysweaver/activerecord-native_db_types_override)的 gem 覆盖它映射到的数据库类型。但是，我们想使用大对象，所以...

**迁移**

正如 Jim Deville 在评论中指出的那样，您可以在表中指定自定义类型列，例如：

```
t.column :some_oid, 'blob_oid', :null => false 
```

如果您需要做更多非标准的事情，您还可以`execute("SQL GOES HERE;")`使用直接 SQL 来创建表。而且，如果您有现有的旧架构或在迁移之外进行的 SQL 更改，请考虑使用 structure.sql（`config.active_record.schema_format = :sql`选项 in`config/application.rb`然后执行：）`rake db:structure:dump`。

**大对象读/写/检查长度/删除**

复制了一些修改以澄清等来自：[https](https://github.com/diogob/carrierwave-postgresql/blob/v0.1.0/lib/carrierwave/storage/postgresql_lo.rb) ://github.com/diogob/carrierwave-postgresql/blob/v0.1.0/lib/carrierwave/storage/postgresql_lo.rb ：

*更新*：我们可以但不需要在 lo_read/lo_write/lo_lseek 之前放置一个开始，并在确保块中执行 lo_close，因为根据[PG 文档](http://www.postgresql.org/docs/9.2/static/lo-interfaces.html#LO-CLOSE)“任何在事务结束时保持打开的大型对象描述符都将自动关闭。” （感谢 Diogo 提供的信息）

```
 require 'pg'

    ...

    def read
      (...).transaction do
        lo = connection.lo_open(identifier)
        content = connection.lo_read(lo, file_length)
        connection.lo_close(lo)
        content
      end
    end

    def write(file)
      (...).transaction do
        lo = connection.lo_open(identifier, ::PG::INV_WRITE)
        size = connection.lo_write(lo, file.read)
        connection.lo_close(lo)
        size
      end
    end

    def delete
      connection.lo_unlink(identifier)
    end

    def file_length
      (...).transaction do
        lo = connection.lo_open(identifier)
        size = connection.lo_lseek(lo, 0, 2)
        connection.lo_close(lo)
        size
      end
    end 
```

代替`connection`，使用来自模型或基础的原始连接，例如`ActiveRecord::Base.connection.raw_connection`（参见[this](http://apidock.com/rails/ActiveRecord/ConnectionAdapters/AbstractAdapter/raw_connection)）。

`(...).transaction`正在调用模型或基础上的事务，例如`ActiveRecord::Base.transaction`（参见[此](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)）。

`identifier`是您需要传入/设置或仅通过执行`connection.lo_creat`.

其他示例/信息：

*   [http://rubydoc.info/github/nedforce/devcms-core/DbFile](http://rubydoc.info/github/nedforce/devcms-core/DbFile)
*   [https://github.com/nedforce/devcms-core](https://github.com/nedforce/devcms-core)
*   [http://my.safaribooksonline.com/book/web-development/ruby/9780596510329/database/largebinary_objects](http://my.safaribooksonline.com/book/web-development/ruby/9780596510329/database/largebinary_objects)

后者和[此处](https://softwareengineering.stackexchange.com/questions/150669/is-it-a-bad-practice-to-store-large-files-10-mb-in-a-database)的一些答案建议您可能需要考虑将大文件与数据库分开存储，例如，以便您可以使用云存储。但是，如果只将路径/ID 存储到外部文件，则*不是*由数据库管理，您将失去 ACID 一致性（一个或多个数据库记录可能指向一个或多个不存在的文件，或者一个或多个文件可能存在但在数据库中没有一个或多个关联记录）。在文件系统上存储文件的另一个论点是您可以流式传输文件，但是 PG 大对象以一种由 postgres 管理的方式将文件存储在文件系统上，以确保 ACID 一致性并允许流式传输（您无法使用普通 BLOB /Rails 二进制类型）。所以，这取决于; 有些人发现使用路径引用存储在单独的存储中是一个更好的选择，有些人更喜欢通过大对象实现 ACID 一致性。

**简单的方法**

只需使用[CarrierWave](https://github.com/jnicklas/carrierwave)和[carrierwave-postgresql](https://github.com/diogob/carrierwave-postgresql)。

# ruby-on-rails - Rails 3.2.11 & Grape 不能这样的文件：app/api/v1.rb

> ID：14744039
> 
> 赞同：2
> 
> 时间：2013-02-07T05:13:50.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, grape-api

我试图在 Rails 3.2.11 应用程序中运行 Grape API。根据葡萄文档，我应该在我的 config/application.rb 中添加以下几行。

```
# Auto-load API and its subdirectories
config.paths.add "app/api", :glob => "**/*.rb"
config.autoload_paths += Dir["#{Rails.root}/app/api/*"] 
```

并使用以下代码创建 config/initializers/reload_api.rb：

```
if Rails.env.development?
  api_files = Dir["#{Rails.root}/app/api/**/*.rb"]
  api_reloader = ActiveSupport::FileUpdateChecker.new(api_files) do
    Rails.application.reload_routes!
  end
  ActionDispatch::Callbacks.to_prepare do
    api_reloader.execute_if_updated
  end
end 
```

但这对我不起作用。这是我的代码。在我的 app/api/v1.rb 中：

```
module Api
  class V1 < Grape::API

    get '/hello' do
      []
    end
  end
end 
```

还有我的 config/routes.rb：

```
Blog::Application.routes.draw do

  mount Api::V1 => "/"
end 
```

当我运行时`rake routes`，出现以下错误：

```
uninitialized constant Api
/home/zoloo/code/nomin/config/routes.rb:7:in `block in <top (required)>'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:260:in `draw'
/home/zoloo/code/nomin/config/routes.rb:5:in `<top (required)>'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in `each'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:40:in `load_paths'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:16:in `reload!'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:26:in `block in updater'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/activesupport-3.2.11/lib/active_support/file_update_checker.rb:78:in `call'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/activesupport-3.2.11/lib/active_support/file_update_checker.rb:78:in `execute'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:27:in `updater'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/zoloo/code/nomin/config/environment.rb:5:in `<top (required)>'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application.rb:103:in `require'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application.rb:103:in `require_environment!'
/home/zoloo/.rvm/gems/ruby-1.9.3-p194@rails-3.2.11/gems/railties-3.2.11/lib/rails/application.rb:297:in `block (2 levels) in initialize_tasks'
Tasks: TOP => routes => environment
(See full trace by running task with --trace) 
```

很明显，Rails 无法加载我的 api。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T19:26:08.947

将自动加载路径更改为：

```
config.autoload_paths += Dir["#{Rails.root}/app"] 
```

当 require 尝试解析`Api::V1`时，它会首先查找一个名为`api_v1.rb`. 那是不存在的。`api/v1.rb`然后它将在所有自动加载路径中寻找。而且您没有`app`自动加载路径，但您确实拥有`app/api`它的所有子文件夹。使用上面的代码，您必须`v1.rb`放入`app/api/api/v1.rb`.

# windows-8 - 如何为 Microsoft Surface 用户安装/分发开发人员版本以进行 beta 测试？

> ID：14744043
> 
> 赞同：2
> 
> 时间：2013-02-07T05:14:03.603
> 
> 标签：windows-8, windows-store-apps, windows-rt

**我们正在开发一个 Surface RT 应用程序，并希望将其分发给一些 beta 用户进行测试**。当然，如果我们实际拥有他们的设备，我们可以将其插入运行 Visual Studio 的 PC，烧香并最终让它运行。

但是**我们如何向他们发送文件**，最好是通过电子邮件或下载链接，**以便他们可以在他们的设备上“直接运行”**？（如果我们不能做到这一点，我们应该如何进行良好的 beta 测试？）

**即类似于 TestFlight** for iOS 应用程序，其中：

*用户首先在他们的 iOS 设备上安装 TestFlight。Testlight 收集神奇的数字并将它们提供给开发人员。开发人员向 Apple 注册幻数并将它们合并到他们的应用程序的构建中（通过 Apple 提供的密钥）。然后开发人员将构建上传到 TestFlight，用户可以在他们的 TestFlight 应用程序中单击以下载并安装构建。*

**这对 Surface 可行吗？如果不是，那么最差的选择是什么？**

到目前为止，我发现的最接近的是本指南：[http](http://www.microsoft.com/en-us/download/details.aspx?id=30703) ://www.microsoft.com/en-us/download/details.aspx?id=30703第 19 节： *在 Windows Store 之外的 Windows RT 上安装开发人员包*。这有几个先决条件，我不寒而栗地要求非技术用户去做，即：

*   已安装 Windows PowerShell。（它应该已经安装了。）
*   已安装开发人员许可证。如果您已按照步骤启用远程调试，则您可能已经安装了开发人员许可证。否则，您可以使用 PowerShell cmdlet，如本文档后面的获取或续订开发人员许可流程中所述。
*   对于未由 Microsoft 签名的应用程序包，您还必须将应用程序打包过程创建的证书安装为受信任的根证书。

*我看过的链接有些相关，但主要是谈论企业和/或使用您旁边的设备进行调试：*

*   [http://social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/bfa142a2-9142-4f58-841f-bf43383d538e](http://social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/bfa142a2-9142-4f58-841f-bf43383d538e)
*   [http://msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx)
*   [http://blogs.msdn.com/b/windowsstore/archive/2012/04/25/deploying-metro-style-apps-to-businesses.aspx](http://blogs.msdn.com/b/windowsstore/archive/2012/04/25/deploying-metro-style-apps-to-businesses.aspx)
*   [http://blogs.msdn.com/b/b8/archive/2012/04/19/managing-quot-byo-quot-pcs-in-the-enterprise-include-woa.aspx](http://blogs.msdn.com/b/b8/archive/2012/04/19/managing-quot-byo-quot-pcs-in-the-enterprise-including-woa.aspx)

**谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:29:20.760

如果您想为 beta 测试/非生产部署应用程序，我“相信”使用开发人员许可证（您的）分发它们是可以接受的。

您需要做的是将 VS 中的应用程序打包到您的开发机器上，然后将包复制到有问题的 WinRT 设备。

该软件包将包含一个名为“Add-AppDevPackage”的 powershell。右键单击它并“使用powershell运行”。

这将要求您更改 WinRT 设备上的策略以允许不受信任的脚本（将在 powershell 脚本期间作为提示弹出）。我相信您需要成为 WinRT 设备的管理员才能执行此操作。

一旦获得批准，它还将检查您是否拥有在设备上运行 WinRT 应用程序的有效许可证，对我来说，它只是弹出一个窗口来输入我的开发人员登录详细信息。输入您的开发详细信息，该应用程序应该会顺利安装。我相信默认情况下，许可证将在 3 个月内到期。

====== 警告：我不是 100% 认为开发人员许可证的“可接受”使用在 MS 眼中构成。在我的示例中，我只是将我编写的应用程序加载到我拥有的个人 Surface RT 上进行自己的测试，我的开发人员许可证是 MSDN 订阅的一部分，所以我认为没问题。如果您想为非许可用户部署到 10 台设备以避免 MS 可能看到的任何“滥用”，您可能需要检查这如何应用。如果您的开发许可证被滥用，有一些参考资料会被吊销！

# c# - 用 ViewModel 连接窗口

> ID：14744044
> 
> 赞同：3
> 
> 时间：2013-02-07T05:14:06.287
> 
> 标签：c#, wpf, viewmodel

我有以下代码

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="UI/ResourceDirectory.xaml"/>
        </ResourceDictionary.MergedDictionaries>
        <DataTemplate DataType="{x:Type vm:MainWindowViewModel}">
            <local:MainWindow></local:MainWindow>
        </DataTemplate>
    </ResourceDictionary>

</Window.Resources> 
```

它给出了以下错误

> 不能在样式中放置窗口

我找到[了这个](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9c0f0a25-81e3-4482-8884-ca830741bb38/)答案。

我已经在主窗口中完成了所有必需的 UI 编码，但无法将其与相应的 ViewModel 连接（将其放在另一个项目中，我正在使用它的参考）。

所以我的问题是，“为什么我不能这样做？”，“如何将 Window 控件与 ViewModel 连接？”，“我应该使用 UserControl 来代替吗？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:46:45.553

您试图将一个窗口放在另一个窗口中，这是不可能的。连接 View 和 ViewModel 要简单得多，但取决于您的项目结构。您可以在`Window`构造函数中设置它，例如：

```
public partial class MainWindow : Window    
{
    public MainWindow ()
    {
        this.DataContext = new MainWindowViewModel();
        InitializeComponent();
    }
} 
```

您尝试采用的方法不起作用，`Windows`并且仅当您将 ViewModel 本身放入 XAML 时才有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:52:26.790

要将视图模型连接到视图，您必须在 xaml 代码中执行以下操作。

```
<Window.DataContext>
   <viewModel:MainWindowViewModel/>
</Window.DataContext> 
```

viewModel 是命名空间。

```
xmlns:viewModel="clr-namespace:TestProject.ViewModel" 
```

您不应该在视图的代码隐藏中设置视图模型！

# apache-flex - SecurityError：错误 #2142：违反安全沙箱

> ID：14744047
> 
> 赞同：0
> 
> 时间：2013-02-07T05:14:22.517
> 
> 标签：apache-flex

当我想在我的 Flex 项目中加载我的资产时，我收到了这个错误：

```
SecurityError: Error #2142: Security sandbox violation: local SWF files 
cannot use the LoaderContext.securityDomain property. 
app:/Main.swf was attempting to load app:/assets/stories/bear.swf. 
```

我创建了一个 LoaderContext 并将其分配给 SWFLoader 但我仍然收到此错误。这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:ns1="*"
               applicationDPI="240" creationComplete="initApp(event)">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;
            import flash.system.SecurityDomain;
            import flash.system.ApplicationDomain;

            protected function initApp(event:FlexEvent):void
            {
                var context:LoaderContext = new LoaderContext();
                context.securityDomain = SecurityDomain.currentDomain;
                context.applicationDomain = new ApplicationDomain();

                Story.loaderContext = context;
                Story.source = "app:/assets/stories/Bear1.swf";
            }

        ]]>
    </fx:Script>
    <s:SWFLoader id="Story" left="0" right="0" top="0" bottom="0" 
                 trustContent="true"
                 scaleContent="true"/>
</s:Application> 
```

我阅读了很多关于 Flex 中的安全策略的信息，但我仍然没有弄清楚如何允许本地访问我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:20:09.477

您可以使用[this](http://www.bigspaceship.com/2010/03/flash-files-domains-and-security-errors-oh-my/)或[this](http://snipplr.com/view/35252/as3-loading-swf-files-crossdomain/)获得解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:35:07.750

在这种情况下，不需要使用 loaderContext。由于这是一个移动项目，所有资产都被视为本地资产。我做错了将'assets'目录放在'src'目录之外。只有“src”目录中的目录才会导出到最终项目中。

# javascript - 我的代码 Javascript 有什么问题？我在警报窗口中收到的消息是 NaN

> ID：14744048
> 
> 赞同：0
> 
> 时间：2013-02-07T05:14:23.213
> 
> 标签：javascript, html

这段代码只是不想工作。我在警报窗口中收到的消息是 NaN

```
<script type="text/javascript">
var number1 = document.numbers.nr1.value
var number2 = document.numbers.nr2.value

function add(){
var total = number1 + number2;
return total;

     }

</script>

<form action="" name="numbers">
<input type="text" name="nr1"  />
<input type="text" name="nr2" />
<input type="submit" onclick="alert(add())" />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:16:49.253

您必须在函数中获取数字。否则，它会尝试在将任何内容输入文本字段之前（甚至在加载文本字段之前）获取值，这当然没有定义。

```
function add(){
    var number1 = parseFloat(document.numbers.nr1.value);
    var number2 = parseFloat(document.numbers.nr2.value);
    var total = number1 + number2;
    return total;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:03:47.333

您必须使用**parseInt()**或**parseFloat()**然后只有字符串会被转换为整数，因为默认情况下文本框值是字符串..
您的 javascript 代码应该是这样的..

var number1 = parseInt(document.numbers.nr1.value)
var number2 = parseInt(document.numbers.nr2.value)

函数 add(){
var 总数 = number1 + number2;
返回总计；

```
 } 
```

或

var number1 = parseFloat(document.numbers.nr1.value)
var number2 = parseFloat(document.numbers.nr2.value)

函数 add(){
var 总数 = number1 + number2;
返回总计；

```
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:36:10.690

当您此时调用 add 函数时，不会计算该值。因为这两个语句都存在于函数之外。请记住在页面加载期间 DOM 从上到下解析。在页面加载时，DOM 遇到了这两个语句并看到它们是`undefined`. 所以你需要将它们都移动到函数中。您获得的值是 a 的形式，`string`因此您需要解析它们，否则`string concatenation`会发生。

找到下面的工作代码：

```
function add(){
var number1 = parseInt(document.numbers.nr1.value, 10);
var number2 = parseInt(document.numbers.nr2.value, 10);

var total = number1 + number2;
return total;

     }

</script>

<form action="" name="numbers">
<input type="text" name="nr1"  />
<input type="text" name="nr2" />
<input type="submit" onclick="alert(add())" />
</form> 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T05:20:24.967

如果您只需要警报，只需查看下面的代码，

```
<script type="text/javascript">
function add(){ //function to add
var number1 = document.numbers.nr1.value 
var number2 = document.numbers.nr2.value
var total = number1 + number2; //total
alert(total); //alert total
}
</script>

<form action="" name="numbers">
<input type="text" name="nr1"  />
<input type="text" name="nr2" />
<input type="submit" onclick="add()" /> <!--onclick with submit button-->
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T05:21:11.707

```
 <script type="text/javascript">
function add(){
var number1 = parseInt(document.getElementById("nr1").value);
var number2 = parseInt(document.getElementById("nr2").value);

var total = number1 + number2;
return total;

     }

</script>

<form action="" name="numbers">
<input type="text" name="nr1"  id="nr1" />
<input type="text" name="nr2"  id="nr2"/>
<input type="submit" onclick="alert(add())" />
</form> 
```

# javascript - 边界不起作用，尝试添加边界时甚至不显示标记

> ID：14744049
> 
> 赞同：0
> 
> 时间：2013-02-07T05:14:47.193
> 
> 标签：javascript, google-maps, google-maps-api-3, maps

下面的当前代码甚至没有显示标记，但是当边界被移除时，标记开始出现。我不知道我哪里出错了。我要做的就是缩放地图以包含所有 3 个标记。目前它正在缩放到 0,0 。我确实提供了我的 api 密钥，所以这不是问题。

代码：

```
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=<key provided>&sensor=true">
    </script>

    <script type="text/javascript">
      function initialize() {
var markers = [
{ lat: 61.912113, lng: 61.912113 },{ lat: 62.912149, lng: 62.912144 },{ lat: 61.411123, lng: 61.411123 }];

        var mapOptions = {
center: new google.maps.LatLng(0,0),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

var bounds = new google.maps.LatLngBounds ();
var LatLngList = array (new google.maps.LatLng (markers[0].lat,markers[0].lng), new google.maps.LatLng (markers[1].lat,markers[1].lng), new google.maps.LatLng (markers[2].lat,markers[2].lng));
for (i = 0; i < markers.length; i++) {
var data = markers[i];

var myLatlng = new google.maps.LatLng(data.lat, data.lng);
var marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
      title: "text"
  });
}
for (var i = 0; i < LatLngList.length; i++) {
  bounds.extend (LatLngList[i]);
}
map.fitBounds (bounds);
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:47:24.307

在此行上创建数组时出现错误（为了便于阅读，我截断了代码）：

```
var LatLngList = array (new google.maps.LatLng (markers[0].lat,markers[0].lng) ); 
```

将其更改为：

```
var LatLngList = Array (new google.maps.LatLng (markers[0].lat,markers[0].lng) ); 
```

或者

```
var LatLngList = [ new google.maps.LatLng (markers[0].lat,markers[0].lng) ]; 
```

# vhdl - vhdl 中管道建模的最大速度

> ID：14744051
> 
> 赞同：0
> 
> 时间：2013-02-07T05:14:47.990
> 
> 标签：vhdl

我有 2 个块，速度分别为 150MHz 和 234.56MHz。我想使用结构建模将它们连接起来。如何达到至少 150 MHz？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:46:04.030

只需将它们连接起来并使用 150MHz 时钟为它们提供时钟。仅仅因为一个模块*可以*运行在 234.56MHz，并不（通常）意味着它*必须*这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:47:11.300

如果模块在输入和输出上有流水线寄存器，它们应该互连并以较慢的速度工作。只需将两个模块都从 150MHz 时钟关闭。

如果没有，您可能需要通过结构设计中的流水线寄存器将它们互连。只需添加一个时钟进程即可实现所有流水线寄存器。

# java - 用 Java 实现的 Bag 类

> ID：14744056
> 
> 赞同：0
> 
> 时间：2013-02-07T05:15:11.093
> 
> 标签：java, eclipse, data-structures, collections

我必须使用集合（不是 Java 内置的集合）来创建 Bag 类。我无法为此找出 equal() 方法。基本上它需要检查两个包的大小是否相同，为它们创建副本，使用联合来连接它们，并在 for 循环中检查当前值是否在每个包中；如果是这样，请删除它们。如果两个袋子都是空的，那么它们是相等的。出于某种原因，代码不断吐出错误？

我为所有的代码道歉，但很难确定要漏掉什么，因为大部分代码是一致的。

谢谢大家的帮助！！

编辑：这也伴随着这个问题：[Building a bag class in Java](https://stackoverflow.com/questions/14651105/building-a-bag-class-in-java)

```
public class Bag<t> implements Plan<t>{
private final int MAX = 10;
private final int DEFAULT = 6;

private static Random random = new Random();

private t[] content; 
private int count;

//Constructors
public Bag(){
    count = 0;
    content = (t[]) (new Object[DEFAULT]);
}
public Bag(int capacity){
    count = 0;
    if(capacity<MAX)
        content = (t[])(new Object[capacity]);
    else System.out.println("Capacity must be less then 10");
}

//Implemented Methods
public void add(t e) {
    try{
        if(!contains(e) && (!(size() == content.length))){
            content[count] = e;
            count++;
        }
        }catch (ArrayIndexOutOfBoundsException exception){
            System.out.println("Bag is Full");
        }
}

public boolean isEmpty() {

    return count==0;        
}

public boolean contains(t e) {
    Object location = null;

    for(int i=0;i<count;i++)
        if(content[i].equals(e)) location=i;

    return (location!=null);
}

public int size() {

    return count;
}

public void addAll(Bag<t> b) {
    for (int i=0;i<b.size();i++)
        add(b.content[i]);
}

public Bag<t> union(Bag<t> a, Bag<t> b) {
    Bag<t> bigBag = new Bag<t>();

    for(int i=0; i<a.size();i++)
        bigBag.add(a.content[i]);
    for(int k=0; k<b.size();k++)
        bigBag.add(b.content[k]);

    return bigBag;
}

public boolean equals(Bag<t> e) {
    Bag<t> bag1 = new Bag<t>();
    Bag<t> bag2 = new Bag<t>();
    Bag<t> bag3 = new Bag<t>();
    t object;

    if(size() == e.size()){
        bag1.addAll(this);
        bag2.addAll(e);

        bag3.union(bag1, bag2);

        for(int i=0; i<bag3.size();i++){
            object = bag3.content[i];
            if((bag1.contains(object)) &&(bag2.contains(object))){
                bag1.remove(object);
                bag2.remove(object);

            } 

        }
    }

    return (bag1.isEmpty()&&(bag2.isEmpty()));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:05:30.113

问题似乎出在您的 union() 方法中，或者与您的使用方式有关。它实际上是返回一个新包而不是添加包`bag1`，这`bag2`就是预期它的行为方式。`bag3``equals()`

你知道类方法吗？这是`union()`真的。在签名中添加`static`关键字，就像这样。

```
public static Bag<t> union(Bag<t> bag1, Bag<t> bag2) 
```

现在，让我们修复equals方法的定义。`equals()`示例代码中的签名为

```
public boolean equals(Bag<t> e) 
```

但这应该是

```
public boolean equals(Object o) 
```

所以我们必须确保`o`是`Bag`第一个。

```
public boolean equals(Object o) {
    if (this == obj) {
        return true;
    } else if (obj == null) {
        return false;
    } else if (!(obj instanceof Bag))
        return false;
    }

    Bag<?> other = (Bag<?>) obj;
    if (this.count != other.count) {
        return false;
    }

    Bag<t> bag1 = new Bag<t>();
    Bag<t> bag2 = new Bag<t>();
    bag1.addAll(this);
    bag2.addAll(other);

    // If you don't know about `static` yet, just use this instead of the following I guess 
    //Bag<t> bag3 = new Bag<t>();
    //bag3 = bag3.union(bag1, bag2);
    Bag<t> bag3 = Bag.union(bag1, bag2);

    t object;
    for(int i=0; i<bag3.size();i++) {
        object = bag3.content[i];
        if ((bag1.contains(object)) && (bag2.contains(object))){
            bag1.remove(object);
            bag2.remove(object);
        }
    }

    return (bag1.isEmpty() && (bag2.isEmpty()));
} 
```

修复几个大括号/编译器错误，我认为这可能有效。`remove()`但是，如果没有缺少的方法，我将无法对其进行测试。

# javascript - 在 Java 脚本中嵌入 Sharepoint Web 部件

> ID：14744060
> 
> 赞同：1
> 
> 时间：2013-02-07T05:15:19.437
> 
> 标签：javascript, sharepoint, web-parts, zone

我已经部署了一个共享点网页并添加了一个自定义 Web 部件，它以客户希望的方式可视化数据。Webpart 的问题是我们无法在用户想要的时候缩放、修改或隐藏它。我们考虑将 Sharepoint webpart 嵌入到 Java 包装器中。通常，这在标准 HTML 页面上会很容易。问题是如何在 Sharepoint 的 java 包装器中嵌入 webpart？

我想添加 2 个 html 按钮，一个用于显示 webpart，一个用于隐藏 webpart。挑战在于找到可以传递给任一按钮以执行 hideMe 或 showMe java 脚本的 webpart ID。

Web 部件标头：

```
<WebPartPages:WebPartZone runat="server" Title="loc:FullPage" ID="FullPage" FrameType="TitleBarOnly"><ZoneTemplate>
<WpNs0:Trend runat="server" __MarkupType="xmlmarkup" WebPart="true" __WebPartId="{AFA8DE0A-E7B4-4580-BFAB-038D96E72F0A}" > 
```

代码（到目前为止）

```
<button onclick="HideWebpart('AFA8DE0A-E7B4-4580-BFAB-038D96E72F0A')">Hide Me</button>
<button onclick="ShowWebpart('AFA8DE0A-E7B4-4580-BFAB-038D96E72F0A')">Show Me</button>

<script>
function HideWebpart(AFA8DE0A-E7B4-4580-BFAB-038D96E72F0A)
{
    var wp=document.getElementById(AFA8DE0A-E7B4-4580-BFAB-038D96E72F0A);
    wp.className = "hidden";
}

function ShowWebpart(AFA8DE0A-E7B4-4580-BFAB-038D96E72F0A)
{
    var wp=document.getElementById(AFA8DE0A-E7B4-4580-BFAB-038D96E72F0A);
    wp.className = "";
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:25:49.260

好的，您可以给 WebPart 一个 id="mywebpart"，然后简单地使用 JavaScript 函数来隐藏它。

例子：

```
<style type="text/css>
    .hidden { display:none; }
</style>
<script>
function HideWebpart(id_of_webpart)
{
    var wp=document.getElementById(id_of_webpart);
    wp.className = "hidden";
}

function ShowWebpart(id_of_webpart)
{
    var wp=document.getElementById(id_of_webpart);
    wp.className = "";
}
</script>
<WebPartPages:WebPartZone>
..The SVG WebPart... <--Add WebPart with id here
</WebPartPages:WebpartZone>

<button onclick="HideWebpart('PASS WEB PART ID IN HERE')"/> 
```

* * *

我相信问题是您想使用“__WebPartId=”属性，而 getElementById 只会查找“id=”属性。因此，通过自定义属性查找元素，您将需要使用以下内容而不是 getElementById：

```
function getElementByAttribute(attr, value, root) {
    root = root || document.body;
    if(root.hasAttribute(attr) && root.getAttribute(attr) == value) {
        return root;
    }
    var children = root.children, 
        element;
    for(var i = children.length; i--; ) {
        element = getElementByAttribute(attr, value, children[i]);
        if(element) {
            return element;
        }
    } 
```

用法：

```
getElementByAttribute("__WebPartId",'PASS WEB PART ID IN HERE'); 
```

注意：与 getElementById 相比，它会慢得多，因为您不能使用任何索引

或者，如果您可以使用[jQuery](http://jquery.com/)库，您可以简单地使用 $('[__WebPartId="PASS WEB PART ID IN HERE"]')

# git - Xcode 4.6 不允许我将项目推送到 git 仓库

> ID：14744064
> 
> 赞同：0
> 
> 时间：2013-02-07T05:15:43.153
> 
> 标签：git, repository, push, commit, xcode4.6

我在 Xcode（使用 C++ 的命令行应用程序）中启动了一个新项目，并且遇到了我在其他项目中没有遇到的问题：我可以成功提交文件，但无法将它们推送到 repo，在假装尚未提交更改（他们已经提交了）。

这里有一个问题与[相同的问题](https://stackoverflow.com/questions/11910228/cannot-push-pull-or-merge-git-working-copy-has-uncommited-changes)，但那里的答案都没有解决我的问题。在组织者中，在我设置的远程仓库下，提交、评论和所有内容都会显示出来，但我仍然无法将它们推送到远程仓库。

编辑：我看到另一个问题是提问者试图推送到非裸存储库。我的回购是完全裸露的。

编辑 2：我已经成功地从 UNIX 终端提交和推送，没有任何问题。不过，仍然无法弄清楚如何直接从 Xcode 中执行此操作。

有没有人遇到过这个问题，并找到了解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:47:35.977

使用命令行`git`提交更改并将更改推送到我的远程存储库后，我重新启动了计算机。现在，一切似乎都运行良好。

# mysql - 如何使用servlet创建mysql数据库请给出一些基本思路

> ID：14744067
> 
> 赞同：2
> 
> 时间：2013-02-07T05:16:00.327
> 
> 标签：mysql, jakarta-ee, servlets

我正在做我去年的项目。我想使用连接`MySQL`数据库 `JDBC`，请任何人给我关于如何`MySQL`使用创建数据库的基本想法`servlet`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:29:09.457

在你的类中创建如下静态变量

```
 // JDBC driver name and database URL
   static final String JDBC_DRIVER = "com.mysql.jdbc.Driver";  
   static final String DB_URL = "jdbc:mysql://localhost/";

   //  Database credentials
   static final String USER = "username";
   static final String PASS = "password"; 
```

然后根据您的 `doGet`or调用 createDb 方法`doPost`

```
 public static void CreateDb() {
   Connection conn = null;
   Statement stmt = null;
   try{
      //STEP 2: Register JDBC driver
      Class.forName("com.mysql.jdbc.Driver");

      //STEP 3: Open a connection
      System.out.println("Connecting to database...");
      conn = DriverManager.getConnection(DB_URL, USER, PASS);

      //STEP 4: Execute a query
      System.out.println("Creating database...");
      stmt = conn.createStatement();

      String sql = "CREATE DATABASE STUDENTS";
      stmt.executeUpdate(sql);
      System.out.println("Database created successfully...");
   }catch(SQLException se){
      //Handle errors for JDBC
      se.printStackTrace();
   }catch(Exception e){
      //Handle errors for Class.forName
      e.printStackTrace();
   }finally{
      //finally block used to close resources
      try{
         if(stmt!=null)
            stmt.close();
      }catch(SQLException se2){
      }// nothing we can do
      try{
         if(conn!=null)
            conn.close();
      }catch(SQLException se){
         se.printStackTrace();
      }//end finally try
   }//end try
   System.out.println("Goodbye!");
}//end main
}//end JDBCExample 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:25:14.460

小服务程序

```
doXXX(){

//Obtain DriverManager instance
//Create a connection with `connecturl`
//Create Statement to interact with db
//Have Resultset with data

} 
```

# python - 为 pandas MultiIndex 添加一个级别

> ID：14744068
> 
> 赞同：149
> 
> 时间：2013-02-07T05:16:07.423
> 
> 标签：python, pandas

我有一个带有 MultiIndex 在分组后创建的 DataFrame：

```
import numpy as np
import pandas as pd
from numpy.random import randn

df = pd.DataFrame({'A' : ['a1', 'a1', 'a2', 'a3'], 
                   'B' : ['b1', 'b2', 'b3', 'b4'], 
                   'Vals' : randn(4)}
                 ).groupby(['A', 'B']).sum()

#            Vals
# A  B           
# a1 b1 -1.632460
#    b2  0.596027
# a2 b3 -0.619130
# a3 b4 -0.002009 
```

如何在 MultiIndex 前面添加一个级别，以便将其转换为：

```
#                       Vals
# FirstLevel A  B           
# Foo        a1 b1 -1.632460
#               b2  0.596027
#            a2 b3 -0.619130
#            a3 b4 -0.002009 
```

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2017-02-07T16:11:06.527

使用以下代码在一行中执行此操作的好方法`pandas.concat()`：

```
import pandas as pd

pd.concat([df], keys=['Foo'], names=['Firstlevel']) 
```

更短的方法：

```
pd.concat({'Foo': df}, names=['Firstlevel']) 
```

这可以推广到许多数据帧，请参阅[文档](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.concat.html)。

* * *

## 回答 #2

> 赞同：149
> 
> 时间：2013-02-07T08:37:45.803

您可以先将其添加为普通列，然后将其附加到当前索引，因此：

```
df['Firstlevel'] = 'Foo'
df.set_index('Firstlevel', append=True, inplace=True) 
```

并根据需要更改顺序：

```
df.reorder_levels(['Firstlevel', 'A', 'B']) 
```

结果是：

```
 Vals
Firstlevel A  B           
Foo        a1 b1  0.871563
              b2  0.494001
           a2 b3 -0.167811
           a3 b4 -1.353409 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2019-05-23T15:39:45.897

我认为这是一个更通用的解决方案：

```
# Convert index to dataframe
old_idx = df.index.to_frame()

# Insert new level at specified location
old_idx.insert(0, 'new_level_name', new_level_values)

# Convert back to MultiIndex
df.index = pandas.MultiIndex.from_frame(old_idx) 
```

与其他答案相比的一些优势：

*   新关卡可以添加到任何位置，而不仅仅是顶部。
*   它纯粹是对索引的操作，不需要像连接技巧那样操作数据。
*   它不需要添加列作为中间步骤，这会破坏多级列索引。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-09-17T18:09:58.080

我用[cxrodgers answer](https://stackoverflow.com/a/56278736/2496293)做了一个小功能，恕我直言，这是最好的解决方案，因为它纯粹在索引上工作，独立于任何数据框或系列。

我添加了一个修复：该`to_frame()`方法将为没有索引级别的索引级别发明新名称。因此，新索引将具有旧索引中不存在的名称。我添加了一些代码来恢复此名称更改。

下面是代码，我自己使用了一段时间，它似乎工作正常。如果您发现任何问题或极端情况，我将非常有义务调整我的答案。

```
import pandas as pd

def _handle_insert_loc(loc: int, n: int) -> int:
    """
    Computes the insert index from the right if loc is negative for a given size of n.
    """
    return n + loc + 1 if loc < 0 else loc

def add_index_level(old_index: pd.Index, value: Any, name: str = None, loc: int = 0) -> pd.MultiIndex:
    """
    Expand a (multi)index by adding a level to it.

    :param old_index: The index to expand
    :param name: The name of the new index level
    :param value: Scalar or list-like, the values of the new index level
    :param loc: Where to insert the level in the index, 0 is at the front, negative values count back from the rear end
    :return: A new multi-index with the new level added
    """
    loc = _handle_insert_loc(loc, len(old_index.names))
    old_index_df = old_index.to_frame()
    old_index_df.insert(loc, name, value)
    new_index_names = list(old_index.names)  # sometimes new index level names are invented when converting to a df,
    new_index_names.insert(loc, name)        # here the original names are reconstructed
    new_index = pd.MultiIndex.from_frame(old_index_df, names=new_index_names)
    return new_index 
```

它通过了以下单元测试代码：

```
import unittest

import numpy as np
import pandas as pd

class TestPandaStuff(unittest.TestCase):

    def test_add_index_level(self):
        df = pd.DataFrame(data=np.random.normal(size=(6, 3)))
        i1 = add_index_level(df.index, "foo")

        # it does not invent new index names where there are missing
        self.assertEqual([None, None], i1.names)

        # the new level values are added
        self.assertTrue(np.all(i1.get_level_values(0) == "foo"))
        self.assertTrue(np.all(i1.get_level_values(1) == df.index))

        # it does not invent new index names where there are missing
        i2 = add_index_level(i1, ["x", "y"]*3, name="xy", loc=2)
        i3 = add_index_level(i2, ["a", "b", "c"]*2, name="abc", loc=-1)
        self.assertEqual([None, None, "xy", "abc"], i3.names)

        # the new level values are added
        self.assertTrue(np.all(i3.get_level_values(0) == "foo"))
        self.assertTrue(np.all(i3.get_level_values(1) == df.index))
        self.assertTrue(np.all(i3.get_level_values(2) == ["x", "y"]*3))
        self.assertTrue(np.all(i3.get_level_values(3) == ["a", "b", "c"]*2))

        # df.index = i3
        # print()
        # print(df) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-11T17:40:54.113

[如何使用pandas.MultiIndex.from_tuples](https://pandas.pydata.org/docs/reference/api/pandas.MultiIndex.from_tuples.html#pandas.MultiIndex.from_tuples)从头开始​​构建它？

```
df.index = p.MultiIndex.from_tuples(
    [(nl, A, B) for nl, (A, B) in
        zip(['Foo'] * len(df), df.index)],
    names=['FirstLevel', 'A', 'B']) 
```

[与cxrodger 的解决方案](https://stackoverflow.com/questions/14744068/prepend-a-level-to-a-pandas-multiindex/56278736#56278736)类似，这是一种灵活的方法，可以避免修改数据帧的底层数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-04T19:36:23.990

另一个答案使用[`from_tuples()`](https://pandas.pydata.org/docs/reference/api/pandas.MultiIndex.from_tuples.html#). 这概括[了这个](https://stackoverflow.com/a/62852548/3388962)先前的答案。

```
key = "Foo"
name = "First"
# If df.index.nlevels > 1:
df.index = pd.MultiIndex.from_tuples(((key, *item) for item in df.index),
                                     names=[name]+df.index.names)
# If df.index.nlevels == 1:
# df.index = pd.MultiIndex.from_tuples(((key, item) for item in df.index),
#                                      names=[name]+df.index.names) 
```

我喜欢这种方法，因为

*   它只修改索引（没有不必要的正文复制操作）
*   它适用于两个轴（行和列索引）
*   它仍然可以写成单行

* * *

将上述内容包装在一个函数中可以更轻松地在行索引和列索引之间以及单级和多级索引之间切换：

```
def prepend_index_level(index, key, name=None):
    names = index.names
    if index.nlevels==1:
        # Sequence of tuples
        index = ((item,) for item in index)

    tuples_gen = ((key,)+item for item in index)
    return pd.MultiIndex.from_tuples(tuples_gen, names=[name]+names)

df.index = prepend_index_level(df.index, key="Foo", name="First")
df.columns = prepend_index_level(df.columns, key="Bar", name="Top")

# Top               Bar
#                  Vals
# First A  B
# Foo   a1 b1 -0.446066
#          b2 -0.248027
#       a2 b3  0.522357
#       a3 b4  0.404048 
```

* * *

最后，可以通过在任何索引级别插入键来进一步概括上述内容：

```
def insert_index_level(index, key, name=None, level=0):
    def insert_(pos, seq, value):
        seq = list(seq)
        seq.insert(pos, value)
        return tuple(seq)

    names = insert_(level, index.names, name)
    if index.nlevels==1:
        # Sequence of tuples.
        index = ((item,) for item in index)

    tuples_gen = (insert_(level, item, key) for item in index)
    return pd.MultiIndex.from_tuples(tuples_gen, names=names)

df.index = insert_index_level(df.index, key="Foo", name="Last", level=2)
df.columns = insert_index_level(df.columns, key="Bar", name="Top", level=0)

# Top              Bar
#                 Vals
# A  B  Last
# a1 b1 Foo  -0.595949
#    b2 Foo  -1.621233
# a2 b3 Foo  -0.748917
# a3 b4 Foo   2.147814 
```

# javascript - 我需要一个自定义确认框以 html 表单 Onsubmit() 实现。我该如何实现？

> ID：14744075
> 
> 赞同：0
> 
> 时间：2013-02-07T05:16:28.737
> 
> 标签：javascript, jquery, html, css

我需要在 html 表单 Onsubmit() 上实现自定义确认框。我该如何实现？

像这样的东西

```
 <form method="post"  style="float:left" action="xxx/**"
     onsubmit="return confirmfinish()" 
```

confirmfinish() 应该实现自定义确认框并返回适当的值（真/假）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:30:31.917

我采用了您的 FORM 标签示例并对其进行了一些调整，如下所示。这将让您进行自定义确认。它将停止提交表单，直到您在自定义确认上单击“是”。

```
<form id="mainForm" method="post" action="xxx/**" onsubmit="return confirmfinish();">
    <input type="text">
    <input type="submit">
</form>

<div id="confirmationDiv" style="display:none; border:1px solid black; padding:10px; margin-top:10px; width:500px;">
    Are you sure you want to submit the form?<br>
    <input type="button" value="Yes" onclick="confirmed = true; document.getElementById('mainForm').submit();">
    <input type="button" value="No" onclick="document.getElementById('confirmationDiv').style.display='none'; return false;">
</div>

<script type="text/javascript">     
    var confirmed = false;

    function confirmfinish(){
        if(!confirmed){
            document.getElementById('confirmationDiv').style.display='block';
            return false;
        } else {
            return true;
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:22:32.430

试试我根据您的代码编写的代码：

```
<form method="post" action="xxx/**" onsubmit="return confirmfinish();">
    <input type="text">
    <input type="submit">
</form>

<script type="text/javascript">
    function confirmfinish(){
        return confirm("Are you sure you are ready to submit the form?");
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:46:15.100

你可以使用这样的东西。

```
function confirmfinish(){
     if (confirm("Your question")) { 
          // do things if OK
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:02:09.683

你可以像下面这样使用jquery UI

```
<div id="dialog-confirm" title="Delete Country">
    <p>
        Are you soure you wont to delete this record ?</p>
</div>

<script type="text/javascript">
    $(function () {           
        $("#dialog-confirm").dialog({
            autoOpen: false,
            model: true,
            width: 300,
            resizable: false,
            height: 200
        });

        $(".lnkDelete").click(function (e) {
            e.preventDefault();
            var targeturl = $(this).attr("href");

            $("#dialog-confirm").dialog({
                buttons: {
                    "Confirm": function () {
                        window.location.href = targeturl;
                    },
                    "Cancel": function () {
                        $(this).dialog("close");
                    }
                }
            });
            $("#dialog-confirm").dialog("open");
        });
    });
</script> 
```

我想这会对你有所帮助......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T06:09:02.997

您可以使用 javascript 的内置支持来确认框，如下所示：

```
 <script type="text/javascript">
    function confirmfinish(){
       if (confirm("Are you sure you want Submit the form?") == true)
           return true;
       else 
           return false;
    }
    </script> 
```

或者

如果您只需要为其实现自定义控件而不是 javascript 的内置支持

去头并单击[jQuery Alert Dialogs (Alert, Confirm, & Prompt Replacements)的链接](http://labs.abeautifulsite.net/archived/jquery-alerts/demo/)

为了实现 jAlert，您需要有`jquery.jalerts.js`文件并将以下代码添加到您的 confirmfinish()

```
jConfirm('Submit form?', 'Submitting the form', function(r) {
    jAlert('Confirmed: ' + r, 'Confirmation Results');
}); 
```

希望能帮助到你

# java - 传递 Javascript 数组[arrays[Strings]] 的冒险

> ID：14744077
> 
> 赞同：-4
> 
> 时间：2013-02-07T05:16:33.487
> 
> 标签：java, javascript, arrays

我有一个 Javascript 数组[arrays[Strings]]，我想将它传递给另一个 JSP（不能使用 java，因为整个逻辑都是用 Javascript 编写的，并且会导致大量的返工）。挑战在于当前的功能正在使用 Struts（我没有经验），我无法在网上找到任何有用的解决方案。有什么可以推荐的链接吗？

我必须将整个对象作为数组本身而不是以任何其他形式传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:33:35.853

JSON 是一个 JavaScript 对象转换为字符串（序列化），可以在 JAVA 中再次转换为对象。您可以将该字符串发布到您的 JAVA 应用程序。

在 JavaScript 中，您可以使用以下方法将任何对象转换为 JSON：

```
var JSONString=JSON.stringify(myObject); 
```

您可以使用以下方法将 JSON 字符串转换为 JavaScript 中的对象：

```
myObject=JSON.parse(myJSONString); 
```

这在较旧的 IE 浏览器中不起作用（我认为是 IE7 及以下）。

至于在 Java 中解析 JSON 字符串并将其转换为对象；我没有这方面的经验，但你可以在这里找到一些相关信息：

[http://json.org/java/](http://json.org/java/)

# php - 使用一个 URL 从两个数据库表中获取信息

> ID：14744083
> 
> 赞同：-2
> 
> 时间：2013-02-07T05:17:15.037
> 
> 标签：php

我有一个网站，它通过使用 URL 从数据库中获取数据来运行良好，即

```
http://www.mywebsite.com/product.php?cat=photo&att=latestphotos 
```

...带来最新的照片和

```
http://www.mywebsite.com/product.php?cat=photo&att=photocompilations 
```

...带来照片汇编。

我想做的是有一个 URL 可以显示上述两个结果的组合，包括最新照片和汇编。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:19:20.370

您当然可以在 url 中添加多个 get 变量，例如

```
http://www.mywebsite.com/product.php?cat=photo&att=latestphotos&att2=photocompilations 
```

或添加一个数组，如

```
http://www.mywebsite.com/product.php?cat=photo&att=latestphotos+photocompilations 
```

然后使用各自的数据库来获取结果`mysqli_query()`

# sql - 如何编写这个 sql 查询

> ID：14744087
> 
> 赞同：1
> 
> 时间：2013-02-07T05:17:46.817
> 
> 标签：sql, sql-server-2008

我在表 ABC 中有这些属性

位置、区域、部门、单位编号

并想为它们编写查询，其中 Location 和 UnitNo 相同但 Sector 不同意味着我在 UnitNo 相同的不同位置有扇区

我写了这个，但没有用。

```
select * from ABC A1 Inner JOIN ABC A2 on A1.Id = A2.ID
WHERE 
A1.Sector <> A2.Sector AND A1.Location = A2.Location ANd A1.UnitNo = A2.UnitNo 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:24:47.023

试试这个，

```
select location, unitno
from abc
group by location, unitno
having count(distinct sector) > 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:28:02.473

从 ABC 中选择 DISTINCT 扇区，其中 location = unitno；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:23:49.483

我猜你需要以下查询

```
SELECT 
    * 
FROM 
    YourTable
WHERE 
    Location=UnitNo AND 
    Location<>Sector 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:05:04.867

请细化以下代码

```
select * from ABC A1 Inner JOIN ABC A2 
on A1.Id = A2.ID
and A1.Sector <> A2.Sector 
AND A1.Location = A2.Location 
ANd A1.UnitNo = A2.UnitNo 
```

# android - 如何将图片和 pdf 文件从 Dropbox 下载到我的 Android 应用程序

> ID：14744092
> 
> 赞同：0
> 
> 时间：2013-02-07T05:18:18.560
> 
> 标签：android, dropbox-api

嗨，我正在开发具有 Dropbox 实现的 Android 应用程序，我想在其中将图像和 pdf 文件从 Dropbox 获取到我的 android 应用程序以发送到服务器。任何人都可以举个例子或源代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:38:59.677

您将不得不使用[Dropbox 文件 Get API](https://www.dropbox.com/developers/reference/api#files-GET)。示例代码在[这里](https://stackoverflow.com/questions/6180926/android-dropbox-api-file-download)给出。

这不是一个您发布问题并且人们会过来为您提供代码的网站。您将不得不解释您尝试过什么以及您失败了什么，只有这样人们才能帮助您。

# xml - 来自源系统的 XML 文件

> ID：14744094
> 
> 赞同：0
> 
> 时间：2013-02-07T05:18:33.563
> 
> 标签：xml

我有一个关于如何接收 XML 文件的一般性问题。我们有 10 个系统计划每天以 XML 格式发送数据。当他们发送它时，他们是否也有责任创建和发送 XSD 文件？如果他们同意这样做，他们是否也应该每天发送 XSD 文件和 XML 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:56:04.843

在 xml 标头中包含公共 xsd 的位置并不是什么大问题。如果 XML 提供者选择不包含 xsd，则客户端的开发人员始终可以通过*读取*xml 并使其代码足够灵活以处理这些不同数据类型的可能性来推断数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:28:28.587

需要明确的是，XSD 文件是模式文件，这意味着它们正式描述了有效 XML 文档中的元素。它们主要用于验证 XML 文档中的每个内容项是否符合要放置内容的元素的描述。换句话说，您使用 XSD 文件来告诉您 XML 文件是否正确组合在一起。

唯一需要与 XML 文件一起接收 XSD 文件的时间是架构更改时（换句话说，XML 文件可以包含并且仍然有效的元素和属性的种类发生了更改），在这种情况下旧的架构文件不准确，您需要使用较新的架构文件。

TL;DR：除非您非常频繁地更改您在 XML 文件中使用的元素和属性的*种类*，否则不需要每天发送 XSD 文件——*仅*在架构更改时发送它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:20:01.570

不，您通常不需要发送模式文件。您应该已经知道准备处理哪种 XML，因此无需发送带有它的模式。

# ubuntu - 运行捆绑的可执行文件 Ubuntu 服务器

> ID：14744098
> 
> 赞同：0
> 
> 时间：2013-02-07T05:18:49.200
> 
> 标签：ubuntu, mono, monodevelop

我正在尝试在 Ubuntu 上运行 gtk“Hello World”应用程序。我使用以下命令创建了 .exe 包。（参考：[如何为 Mono 开发创建包](http://www.mono-project.com/Mono%3aRuntime#Bundles)）

> mkbundle --static hello.exe -o hello

现在，我正在尝试使用以下命令在新的 ubuntu 服务器上运行这个捆绑的应用程序：

> anand@anand-Fresh-Ubuntu:~Desktop$ ./ 你好

它抛出以下错误：

> 未处理的异常：System.TypeInitializationException：Gtk.Application 的类型初始化程序抛出异常---> System.EntryPointNotFoundException：glibsharp_g_thread_supported at (wrapper managed-to-native) GLib.Thread:glibsharp_g_thread_supported () at GLib.Thread.get_Supported () [0x00000] in :0 at Gtk.Application..cctor () [0x00000] in :0 --- 内部异常堆栈跟踪结束 --- 在 Test.MainClass.Main (System.String[] args) [ 0x00000] in :0 [ERROR] FATAL UNHANDLED EXCEPTION: System.TypeInitializationException: Gtk.Application 的类型初始化程序抛出异常---> System.EntryPointNotFoundException: glibsharp_g_thread_supported at (wrapper managed-to-native) GLib.Thread: glibsharp_g_thread_supported () 在 GLib.Thread.get_Supported () [0x00000] in :0 在 Gtk。Application..cctor () [0x00000] in :0 --- End of internal exception stack trace --- at Test.MainClass.Main (System.String[] args) [0x00000] in :0

mono-complete 已经安装在这台机器上。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:08:33.190

问题是尽管 mkbundle 包括托管程序集，但它不包括它们 P/Invoke 到的本机库，在本例中为 libglibsharpglue。

# javascript - 用另一个字符串替换 json 字符串

> ID：14744101
> 
> 赞同：4
> 
> 时间：2013-02-07T05:19:12.257
> 
> 标签：javascript, json

我有一个 json 字符串

我通过转换得到了这个字符串

```
var json = org.cometd.JSON.toJSON(envelope.messages);

"[{\"version\": \"1.0\", \"minimumVersion\": \"0.9\", \"channel\": \"/meta/handshake\", \"supportedConnectionTypes\": [\"long-polling\", \"callback-polling\"], \"advice\": {\"timeout\": 60000, \"interval\": 0}, \"id\": \"1\"}]" 
```

我需要替换一些符号，我需要这样的输出

```
[{"version":"1.0","minimumVersion":"0.9","channel":"/meta/handshake","supportedConnectionTypes":["long-polling","callback-polling"],"advice":{"timeout":60000,"interval":0},"id":"1"}] 
```

表示要替换的符号是 `\\`with`""`和 `"[`with`[` 和 `]"`with`]`

如果可能，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:23:01.473

你可以简单地使用`Json.Parse()`

```
var json = "[{\"version\": \"1.0\", \"minimumVersion\": \"0.9\", \"channel\": \"/meta/handshake\", \"supportedConnectionTypes\": [\"long-polling\", \"callback-polling\"], \"advice\": {\"timeout\": 60000, \"interval\": 0}, \"id\": \"1\"}]"

JSON.Parse(json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:22:19.113

```
json.replace('\\', '') 
```

字符串本身没有`"[`，只有`"`定义字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:23:40.993

使用 javascript`replace function`

```
mystring.replace(/\\/g,'').replace(/" "[ "/g,'"["') 
```

# java - 我可以加快拉链速度吗？

> ID：14744109
> 
> 赞同：0
> 
> 时间：2013-02-07T05:19:51.330
> 
> 标签：java, android, zip, zipfile

好吧，我正在查看我当前的邮政编码，然后我想出了一个问题，有什么办法可以让它更快地压缩吗？我使用了以下代码：[邮政编码](http://www.jondev.net/articles/Zipping_Files_with_Android_%28Programmatically%29)我将缓冲区更改为更大的数字，但没有任何改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:01:47.253

压缩过程中的大部分时间都花在了放气算法的实现上。降低压缩级别会加快速度，但会使输出更大。

# spring - 使用Spring webmvc提交时如何在表单中表示Web表单变量？

> ID：14744113
> 
> 赞同：0
> 
> 时间：2013-02-07T05:19:52.753
> 
> 标签：spring, spring-mvc

我一直在使用 @ModelAttribute 将我的表单变量“转换”到一个类（它代表数据库中的一个表）中，并且效果很好。

但我正在处理另一个表单，我需要在表单中有一个不代表数据库中数据的隐藏字段。我只是将它传递给我的代码的业务逻辑部分。

我现在如何在我的函数中访问这个隐藏字段？我不想编辑我的表类来添加这个新字段，因为这看起来很糟糕。而且我知道我可以创建一个只包含表单中所有字段的新类，但我不确定这是否是最好的方法。

谢谢！:)

这些是我现在拥有的（**只有表格字段但有效**）。

**我的jsp页面**

```
<form:form modelAttribute="fab" method="post" action="SaveEventRegistration.html"> 
```

**我的 java 代码接受表单提交**

```
@RequestMapping("/SaveEventRegistration")
public ModelAndView saveEventRegistration(@ModelAttribute Fab fab) {
        System.out.println(fab.getStudentId()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:38:28.630

您无需更改表及其 pojo。要获取无法在 ModelAttribute 对象中绑定的隐藏字段值，您只需使用 html 输入标记在表单内的 jsp 中声明该隐藏字段，并使用所需值将其隐藏。

现在在控制器函数中，您需要有一个参数`HttpServletRequest request`并获取隐藏字段的值，例如名称为**hdParam**和`request.getParameter("hdParam")`.

我希望这可以帮助你。干杯。

# tfs - 为什么 TFS 实际上并没有删除工作区？

> ID：14744114
> 
> 赞同：0
> 
> 时间：2013-02-07T05:19:55.657
> 
> 标签：tfs, visual-studio-2012

我们将域从 x.com 更改为 y.local，现在我们在客户的机器上遇到了一些非常奇怪的事情。

我们想删除所有旧的工作区，以便我们可以再次将它们绑定（映射）到新的 TFS 结构。

我们执行这个命令：

```
tf workspace /delete workspaceName;workspaceOwner /login:administrator 
```

它确实告诉我们请求的工作区已被删除。然后在 Visual Studio 中，我们看到的是，通过刷新与 TFS 的连接，工作区又回来了。

我们怀疑工作空间缓存，因此我们搜索并找到[了这个链接](http://gregdoesit.com/2009/01/tfs-deleting-old-workspaces/)，它建议运行以下命令来清除所有缓存的工作空间：

```
tf workspaces /remove:* 
```

但是我们仍然无法将新结构映射到我们系统上的那个文件夹（我们确实需要那个文件夹，它对我们的部署至关重要）。TFS 表示此文件夹（或此工作区）已在使用中。

我们甚至卸载了 VS 并重新安装了它，但没有结果。

请问，有没有比执行这些命令更直接的方法来明确删除工作区？这个问题快把我们逼疯了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:00:28.423

下载并使用[TFS sidekick](http://www.attrice.info/cm/tfs/)，以具有“项目管理员”权限的帐户登录并使用 Workspace sidekick 搜索和编辑/删除有问题的工作区

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T08:34:28.447

您应该检查构建代理/定义，它们有自己的工作区和文件夹映射

# python - 如何使用 jinja2 将文件逐行呈现为 html

> ID：14744117
> 
> 赞同：0
> 
> 时间：2013-02-07T05:20:03.300
> 
> 标签：python, linux, web, mozilla, jinja2

我的文件包含 100 行。我设置了jinja2的所有初始化。我可以将文件呈现到我的浏览器，但问题是它没有格式化。（即行不是一一出现的）。

所以我想使用 jinja2 以格式化的方式（即在浏览器中逐行）呈现文件。我需要在我的 html 文件和 python 代码中进行哪些编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:22:29.090

添加`"<br/>"`到行尾以便浏览器进行换行？

这就是你要的吗？

[编辑]

在python中读取对象的行：

```
lines = open("myfile.txt")
for line in lines:
    print line.rstrip() //rstrip removes whitespaces at the end
lines.close() 
```

jinja2 逐行打印的模板

```
<title>{% filename %}</title>
<body>
{% for line in lines %}
  {{ line }}<br/>
{% endfor %}
</body> 
```

# javascript - 通过ajax上传文件的问题

> ID：14744120
> 
> 赞同：1
> 
> 时间：2013-02-07T05:20:22.747
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, carrierwave

我正在尝试通过 ajax 上传文件，但是当我尝试访问该文件时出现此错误：

```
NS_ERROR_XPC_BAD_OP_ON_WN_PROTO: Illegal operation on WrappedNative prototype object 
```

在 jquery min 在线：

```
 b = f.isFunction(b) ? b() : b, d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b) 
```

这是我的jQuery代码：

```
$('#new_ar_bji_o_involved').submit( function(e){

    e.preventDefault();
    selectedid = $(this).attr('id');
    var report ={};
    report.authenticity_token = $(this).find('input[name=authenticity_token]').val();
    report.utf8 = $(this).find('input[name=utf8]').val()
    //$(this).serialize();
    report.other_involved = {};
    report.other_involved.ar_bail_juvinfo_id = $(this).find('#ar_bj_info_id').val();
    var d = document.getElementById('ar_bji_o_involved_mugshot');
    var B = d.files[0];
    report.other_involved.mugshot = B;

    $.ajax({
        type: "POST",
        url : "url?format=json",
        cache: false,
        data: report,
        contentType: "application/json",
        dataType: "json",
        success:function(data){
            //alert(data);
        },
        complete: function (data) {
             $("#dialog-message").dialog("open");
        }
    });     
}); 
```

我的表格

```
<form accept-charset="UTF-8" action="/crash_report/ar_save" class="changedateformat" enctype="multipart/form-data" id="new_ar_bji_o_involved" method="post">

<input id="ar_bji_o_involved_mugshot" name="ar_bji_o_involved[mugshot]" type="file">
</form> 
```

我`ruby on rails carrier wave gem`用来上传文件。但是在firebug中调用控制器之前我遇到了错误。

我有这个工作正常的代码：

```
var d = document.getElementById('imgid');
A = new FormData();
var B = d.files[0];

A.append("contentType", "application/json");
                A.append("key", "b7ea18a4ecbda8e92203fa4968d10660");
A.append("employeeEvent[external_doc]", B);
A.append("employeeEvent[description]", $('#descriptionid').val());
A.append("employeeEvent[user_id]", $('#user_id').val());

var xhr = new XMLHttpRequest();
 xhr.open("POST", "/employee_management/add_event?format=json", true);   // <-- provide the proper URL

xhr.send(A); 
```

也许你们可以从这里提出一些建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:41:10.730

您不能通过 AJAX 发布多部分表单，因为 Javascript 无法访问您的文件系统。

使用[远程部分](http://rubygems.org/gems/remotipart)。它使 ajax 上传更简单。

# c# - 您可以将 Enum 用于 Double 变量吗？

> ID：14744123
> 
> 赞同：11
> 
> 时间：2013-02-07T05:20:38.853
> 
> 标签：c#, enums

我创建了一个用于处理 C# 中的单元转换的类。它不起作用，因为它应该只返回字符串。

这是课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace RestaurantManagementSystem
{
    class unitHandler
    {
        public enum Units
        {
            Grams = 1,
            KiloGrams = 0.001,
            Milligram = 1000,
            Pounds = 0.00220462,
            Ounces = 0.035274,
            Tonnes = 0.000001,

            Litres = 1,
            Millilitres = 1000,
            Cups = 4.22675,
            FluidOunces = 33.814,
            TeaSpoon = 202.884,
            TableSpoon = 67.628,
            CubicFeet = 0.0353147,
            CubicInch = 61.0237,
            CubicCentimetres = 0.0001,
            CubicMetres = 0.001

        }

        public double Convert_Value(Units from, Units to, double quantity)
        {
            double converted_quantity = 0;

            double fromValue = quantity * Convert.ToDouble(from.ToString());

            converted_quantity = fromValue * Convert.ToDouble(to.ToString());

            return converted_quantity;
        }
    }
} 
```

我会以某种方式希望枚举类型包含每个单位的转换因子的双精度值，然后将它们用于转换并返回转换后的数量。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-07T05:23:33.140

不，[枚举](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.80%29.aspx)的默认类型是`int`or `long`，你不能使用小数。您可以使用[结构](http://msdn.microsoft.com/en-us/library/ah19swz4%28v=vs.71%29.aspx)或类而不是枚举进行双精度

```
public struct Units
{
        public const double Grams = 1;
        public const double KiloGrams = 0.001;
        public const double Milligram = 1000;
        public const double Pounds = 0.00220462;
        public const double Ounces = 0.035274;
        public const double Tonnes = 0.000001;
        // Add Remaining units / values
} 
```

并像使用它一样

```
double d = Units.KiloGrams; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T05:23:27.750

没有：

我试着把它交给 Visual Studio：

```
public enum Test : double
{
    Hello, World
} 
```

它说：

> 类型 byte、sbyte、short、ushort、int、uint、long 或 ulong 预期

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T05:24:23.160

您不能将浮点数/双精度数与枚举一起使用。您可能必须定义常量。

```
public const double KiloGrams = 0.001; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-07T05:52:39.727

对不起，做不到。枚举是严格的整数/字节。真的，他们应该是他们自己的类型。

你可以试试：

```
enum Units() {
    Grams ,
    KiloGrams ,
    Milligram 
}

public function GetUnitsFloatValue(Units unit) : float
{
    switch (unit)
    {
        case Units.Grams :
            return 1;
        case Units.KiloGrams :
            return 0.001;
        case Units.MilliGrams:
            return 1000;           
    }

    //unhandled unit?
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T05:26:47.853

您可以事先使用该方法将 a 转换`double`为 a并将它们硬编码为具有支持类型的枚举。然后，您必须将枚举值转换回.`long``BitConverter.DoubleToInt64Bits(double)``long``double`

这可能比它的价值更麻烦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T05:23:06.703

您不能将枚举与双打一起使用。您只能将其与`int`and一起使用`long`

# java - 如何获取重新包装的异常消息？

> ID：14744129
> 
> 赞同：0
> 
> 时间：2013-02-07T05:21:17.647
> 
> 标签：java, exception

我开发了一个 EJB 服务，而我的服务只能抛出一种类型的异常 - `MyServiceException`. 即所有发生的异常都被包装`MyServiceException`并重新抛出给客户端。但我不想向客户端显示堆栈跟踪（出于安全原因），我只想记录此堆栈跟踪并仅向客户端显示错误消息。因此，只需编写以下代码就足够了：

```
catch (Exception e) {
  logger.error("Error when creating account", e);
  throw new MyServiceException("Error when creating account" + e.getMessage());
} 
```

但是如果我有一堆方法怎么办：1 -2 -3。并且方法 3 用消息引发有意义的异常`"Not enough money"`，所以*我想将此消息显示给客户端*。但是方法 2 用新消息重新包装了这个异常`"Some problem with your credit card"`，所以在方法 1 中调用`e.getMessage()`只会返回`"Some problem with your credit card"`，而不是`"Not enough money"`.. 在这种情况下如何处理异常？如何获取我抛出的所有消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:40:02.417

如果这是您的代码，我建议您以不同的方式包装异常：

```
catch (Exception e) {
  logger.error("Error when creating account", e);
  throw new MyServiceException("Error when creating account" + e.getMessage(), e);
} 
```

注意 MyServiceException 构造函数中的第二个参数。此构造函数应调用其超类的 super(message, throwable) 构造函数。

如果以这种方式完成，那么您可以通过调用 exception.getCause() 方法获得原始异常。因此 exception.getCause().getMessage() 获取其原始消息。

通常，所有第三方 API 都会像上面描述的那样进行异常包装，因此从设计良好的库中引用异常的原因应该没有问题。

更新：组合异常消息并用换行符分隔它们的代码示例。我没有测试过它，但我很确定它正在工作，更重要的是说明了如何做你想做的事情：

```
private static String printExceptionMessages(Throwable throwable) {
    StringBuilder result = new StringBuilder();
    Throwable t = throwable;
    while (t != null) {
        result.append(t.getMessage());
        result.append('\n');
        t = t.getCause();
    }
    return result.toString();
} 
```

# sql - 在同一查询中获取计数和行

> ID：14744133
> 
> 赞同：5
> 
> 时间：2013-02-07T05:21:35.347
> 
> 标签：sql, sql-server-2008

是否可以在同一个查询`count`中获取总表。`rows`像这样的东西

```
SELECT COUNT(1),*
FROM tbl
GROUP BY ALL 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T05:48:31.980

你总是可以尝试这样的事情：

```
SELECT
    COUNT(*) OVER (),
    (list of your other columns here)
FROM dbo.YourTableNameHere 
```

该`OVER()`子句将为您提供查询中所有行的计数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T05:55:37.760

您可以使用 ：

1)`select column1,coulmn2,COUNT(*) OVER (PARTITION BY 1) as RowCnt from #Table;`

2）使用交叉连接方法：

```
SELECT a.*, b.numRows
      FROM TABLE a
CROSS JOIN (SELECT COUNT(*) AS numRows
              FROM TABLE) b 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T05:37:39.253

试试这个，

```
SELECT (select count(*) from table), b.*
  FROM table b; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T06:02:02.707

我也找到了这个，marc_c 的答案会比这个更好

```
SELECT (SELECT COUNT(1) from tbl) AS Total,*
FROM tbl 
```

# boost - 使用 cmake 构建升压测试时遇到问题

> ID：14744139
> 
> 赞同：0
> 
> 时间：2013-02-07T05:22:01.803
> 
> 标签：boost, cmake, linker-errors, boost-test

我对 C++、Boost 测试和 CMake 还很陌生，所以请原谅我在这里的绊脚石。

这是我的顶级 CMakeLists.txt

```
cmake_minimum_required(VERSION 2.8)
project(JANKEN)

set ( CMAKE_CXX_COMPILER gcc )
set(CMAKE_CXX_FLAGS "-g -std=c++11 -Wall -Wextra -pedantic -Weffc++")

add_subdirectory(test)
enable_testing() 
```

这是我的测试目录中的 CMakeLists.txt，其中包含 TestRunner.cpp 和 types_test.cpp

```
set(Boost_USE_STATIC_LIBS OFF)
set(Boost_USE_MULTITHREADED ON) 
set(Boost_USE_STATIC_RUNTIME OFF)

set(BOOST_LIBS unit_test_framework system)
find_package( Boost REQUIRED COMPONENTS ${BOOST_LIBS})

include_directories( ${Boost_INCLUDE_DIRS}
)

add_executable(
JANKEN_tests
 TestRunner.cpp
 types_test.cpp
)

target_link_libraries(
JANKEN_tests 
${Boost_LIBRARIES}
boost_system-mt
) 
```

TestRunner.cpp 看起来像

```
#define BOOST_TEST_DYN_LINK

#define BOOST_TEST_MODULE "JANKEN Unit Tests"
#include <boost/test/unit_test.hpp> 
```

当我运行生成的makefile时，我得到

```
piyos-imac:test piyo$ make
-- Boost version: 1.52.0
-- Found the following Boost libraries:
--   unit_test_framework
--   system
-- Configuring done
-- Generating done
-- Build files have been written to: /Users/piyo/Source/janken/build
Linking CXX executable JANKEN_tests
ld: library not found for -lboost_system-mt
collect2: error: ld returned 1 exit status
make[2]: *** [test/types/JANKEN_tests] Error 1
make[1]: *** [test/types/CMakeFiles/JANKEN_tests.dir/all] Error 2
make: *** [all] Error 2 
```

搜索后，我尝试在我的 add_executable 行之前添加这一行：

```
#link_directories ( ${Boost_LIBRARY_DIRS} ) 
```

但是，添加它会导致巨大的“架构 x86_64 的未定义符号”错误，抱怨字符串、ostream、缺少 vtable 等。

我应该补充一点，一开始我似乎并不需要系统库，但是完全忽略它也会产生巨大的未定义符号错误。

有人知道我做错了什么吗？我在使用 gcc 4.7 的 Mountain Lion 上。

提前感谢您的帮助。

编辑以尝试 Kleist 的建议：

所以，如果改成这个

```
set(Boost_USE_STATIC_LIBS OFF)
set(Boost_USE_MULTITHREADED ON) 
set(Boost_USE_STATIC_RUNTIME OFF)

set(BOOST_LIBS unit_test_framework system)
find_package( Boost REQUIRED COMPONENTS ${BOOST_LIBS})

include_directories( ${Boost_INCLUDE_DIRS}
)

link_directories ( ${Boost_LIBRARY_DIRS} )

# Create the unit tests executable
add_executable(
JANKEN_tests
 TestRunner.cpp
 types_test.cpp
)

# Link the libraries
target_link_libraries(
JANKEN_tests 
${Boost_LIBRARIES}
) 
```

我得到这个结果

```
piyos-imac:test piyo$ make
-- Boost version: 1.52.0
-- Found the following Boost libraries:
--   unit_test_framework
--   system
-- Configuring done
-- Generating done
-- Build files have been written to: /Users/piyo/Source/janken/build
Linking CXX executable JANKEN_tests
Undefined symbols for architecture x86_64:
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::size() const", referenced from:
      boost::unit_test::basic_cstring<char const>::basic_cstring(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) in types_test.cpp.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::c_str() const", referenced from:
      boost::unit_test::basic_cstring<char const>::basic_cstring(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) in types_test.cpp.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(int)", referenced from:
      boost::test_tools::print_log_value<int>::operator()(std::basic_ostream<char, std::char_traits<char> >&, int const&) in types_test.cpp.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::assign(char const*, unsigned long)", referenced from:
      void boost::unit_test::assign_op<char, char const>(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, boost::unit_test::basic_cstring<char const>, int) in TestRunner.cpp.o
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()", referenced from:
      boost::unit_test::make_test_case(boost::unit_test::callback0<boost::unit_test::ut_detail::unused> const&, boost::unit_test::basic_cstring<char const>) in types_test.cpp.o
  "std::ios_base::Init::Init()", referenced from:
      __static_initialization_and_destruction_0(int, int) in TestRunner.cpp.o
      __static_initialization_and_destruction_0(int, int) in types_test.cpp.o
  "std::ios_base::Init::~Init()", referenced from:
      __static_initialization_and_destruction_0(int, int) in TestRunner.cpp.o
      __static_initialization_and_destruction_0(int, int) in types_test.cpp.o
  "std::__throw_out_of_range(char const*)", referenced from:
      std::array<SideVal, 2ul>::at(unsigned long) const in types_test.cpp.o
  "std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)", referenced from:
      operator<<(std::basic_ostream<char, std::char_traits<char> >&, side_t) in types_test.cpp.o
      operator<<(std::basic_ostream<char, std::char_traits<char> >&, SideVal&) in types_test.cpp.o
      boost::unit_test::lazy_ostream_impl<char const (&) [38]>::operator()(std::basic_ostream<char, std::char_traits<char> >&) const in types_test.cpp.o
      boost::unit_test::lazy_ostream_impl<char const (&) [40]>::operator()(std::basic_ostream<char, std::char_traits<char> >&) const in types_test.cpp.o
      boost::unit_test::lazy_ostream_impl<char const (&) [1]>::operator()(std::basic_ostream<char, std::char_traits<char> >&) const in types_test.cpp.o
  "vtable for __cxxabiv1::__class_type_info", referenced from:
      typeinfo for boost::unit_test::test_observer in TestRunner.cpp.o
      typeinfo for boost::unit_test::ut_detail::callback0_impl<boost::unit_test::ut_detail::unused> in types_test.cpp.o
      typeinfo for boost::unit_test::lazy_ostream in types_test.cpp.o
      typeinfo for boost::unit_test::test_observer in types_test.cpp.o
      typeinfo for boost::detail::sp_counted_base in types_test.cpp.o
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "vtable for __cxxabiv1::__si_class_type_info", referenced from:
      typeinfo for boost::detail::sp_counted_impl_p<boost::unit_test::ut_detail::callback0_impl_t<boost::unit_test::ut_detail::unused, void (*)()> > in types_test.cpp.o
      typeinfo for boost::unit_test::lazy_ostream_impl<boost::test_tools::tt_detail::print_helper_t<side_t> const&> in types_test.cpp.o
      typeinfo for boost::unit_test::lazy_ostream_impl<boost::test_tools::tt_detail::print_helper_t<int> const&> in types_test.cpp.o
      typeinfo for boost::unit_test::ut_detail::callback0_impl_t<boost::unit_test::ut_detail::unused, void (*)()> in types_test.cpp.o
      typeinfo for boost::unit_test::lazy_ostream_impl<char const (&) [38]> in types_test.cpp.o
      typeinfo for boost::unit_test::lazy_ostream_impl<char const (&) [40]> in types_test.cpp.o
      typeinfo for boost::unit_test::lazy_ostream_impl<char const (&) [1]> in types_test.cpp.o
      ...
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
  "operator delete(void*)", referenced from:
      boost::unit_test::test_observer::~test_observer() in TestRunner.cpp.o
      boost::unit_test::test_observer::~test_observer() in TestRunner.cpp.o
      boost::unit_test::test_observer::~test_observer() in TestRunner.cpp.o
      boost::unit_test::unit_test_log_t::~unit_test_log_t() in TestRunner.cpp.o
      boost::detail::sp_counted_base::~sp_counted_base() in types_test.cpp.o
      boost::detail::sp_counted_base::~sp_counted_base() in types_test.cpp.o
      boost::detail::sp_counted_base::~sp_counted_base() in types_test.cpp.o
      ...
  "operator new(unsigned long)", referenced from:
      boost::unit_test::make_test_case(boost::unit_test::callback0<boost::unit_test::ut_detail::unused> const&, boost::unit_test::basic_cstring<char const>) in types_test.cpp.o
      boost::unit_test::callback0<boost::unit_test::ut_detail::unused>::callback0<void (*)()>(void (*)()) in types_test.cpp.o
      boost::detail::shared_count::shared_count<boost::unit_test::ut_detail::callback0_impl_t<boost::unit_test::ut_detail::unused, void (*)()> >(boost::unit_test::ut_detail::callback0_impl_t<boost::unit_test::ut_detail::unused, void (*)()>*) in types_test.cpp.o
  "___cxa_begin_catch", referenced from:
      typestest::testside::test_method()     in types_test.cpp.o
      boost::detail::shared_count::shared_count<boost::unit_test::ut_detail::callback0_impl_t<boost::unit_test::ut_detail::unused, void (*)()> >(boost::unit_test::ut_detail::callback0_impl_t<boost::unit_test::ut_detail::unused, void (*)()>*) in types_test.cpp.o
  "___cxa_end_catch", referenced from:
      typestest::testside::test_method()     in types_test.cpp.o
      boost::detail::shared_count::shared_count<boost::unit_test::ut_detail::callback0_impl_t<boost::unit_test::ut_detail::unused, void (*)()> >(boost::unit_test::ut_detail::callback0_impl_t<boost::unit_test::ut_detail::unused, void (*)()>*) in types_test.cpp.o
  "___cxa_guard_acquire", referenced from:
      boost::unit_test::singleton<boost::unit_test::unit_test_log_t>::instance() in TestRunner.cpp.o
      boost::unit_test::lazy_ostream::instance()    in types_test.cpp.o
      boost::unit_test::singleton<boost::unit_test::unit_test_log_t>::instance() in types_test.cpp.o
      boost::unit_test::ut_detail::auto_tc_exp_fail<typestest::testside_id>::instance()      in types_test.cpp.o
  "___cxa_guard_release", referenced from:
      boost::unit_test::singleton<boost::unit_test::unit_test_log_t>::instance() in TestRunner.cpp.o
      boost::unit_test::lazy_ostream::instance()    in types_test.cpp.o
      boost::unit_test::singleton<boost::unit_test::unit_test_log_t>::instance() in types_test.cpp.o
      boost::unit_test::ut_detail::auto_tc_exp_fail<typestest::testside_id>::instance()      in types_test.cpp.o
  "___cxa_pure_virtual", referenced from:
      vtable for boost::unit_test::ut_detail::callback0_impl<boost::unit_test::ut_detail::unused> in types_test.cpp.o
      vtable for boost::detail::sp_counted_base in types_test.cpp.o
  "___cxa_rethrow", referenced from:
      boost::detail::shared_count::shared_count<boost::unit_test::ut_detail::callback0_impl_t<boost::unit_test::ut_detail::unused, void (*)()> >(boost::unit_test::ut_detail::callback0_impl_t<boost::unit_test::ut_detail::unused, void (*)()>*) in types_test.cpp.o
  "___gxx_personality_v0", referenced from:
      Dwarf Exception Unwind Info (__eh_frame) in TestRunner.cpp.o
      Dwarf Exception Unwind Info (__eh_frame) in types_test.cpp.o
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status
make[2]: *** [test/types/JANKEN_tests] Error 1
make[1]: *** [test/types/CMakeFiles/JANKEN_tests.dir/all] Error 2
make: *** [all] Error 2 
```

无论我是否包含 link_directories 行，都会发生这种情况。

编辑：包括 make VERBOSE=1 结果

```
piyos-imac:test piyo$ make VERBOSE=1
cd /Users/piyo/Source/janken/build && "/Applications/CMake 2.8-10.app/Contents/bin/cmake" -H/Users/piyo/Source/janken -B/Users/piyo/Source/janken/build --check-build-system CMakeFiles/Makefile.cmake 0
cd /Users/piyo/Source/janken/build && "/Applications/CMake 2.8-10.app/Contents/bin/cmake" -E cmake_progress_start /Users/piyo/Source/janken/build/CMakeFiles /Users/piyo/Source/janken/build/test/CMakeFiles/progress.marks
cd /Users/piyo/Source/janken/build && make -f CMakeFiles/Makefile2 test/all
make -f test/types/CMakeFiles/JANKEN_tests.dir/build.make test/types/CMakeFiles/JANKEN_tests.dir/depend
cd /Users/piyo/Source/janken/build && "/Applications/CMake 2.8-10.app/Contents/bin/cmake" -E cmake_depends "Unix Makefiles" /Users/piyo/Source/janken /Users/piyo/Source/janken/test/types /Users/piyo/Source/janken/build /Users/piyo/Source/janken/build/test/types /Users/piyo/Source/janken/build/test/types/CMakeFiles/JANKEN_tests.dir/DependInfo.cmake --color=
Dependee "/Users/piyo/Source/janken/test/types/types_test.cpp" is newer than depends file "/Users/piyo/Source/janken/build/test/types/CMakeFiles/JANKEN_tests.dir/depend.internal".
Clearing dependencies in "/Users/piyo/Source/janken/build/test/types/CMakeFiles/JANKEN_tests.dir/depend.make".
Scanning dependencies of target JANKEN_tests
make -f test/types/CMakeFiles/JANKEN_tests.dir/build.make test/types/CMakeFiles/JANKEN_tests.dir/build
"/Applications/CMake 2.8-10.app/Contents/bin/cmake" -E cmake_progress_report /Users/piyo/Source/janken/build/CMakeFiles 2
[ 50%] Building CXX object test/types/CMakeFiles/JANKEN_tests.dir/types_test.cpp.o
cd /Users/piyo/Source/janken/build/test/types && gcc    -g -std=c++11 -Wall -Wextra -pedantic -Weffc++   -o CMakeFiles/JANKEN_tests.dir/types_test.cpp.o -c /Users/piyo/Source/janken/test/types/types_test.cpp
/Users/piyo/Source/janken/test/types/types_test.cpp:12:1: warning: base class 'struct boost::unit_test::ut_detail::nil_t' has a non-virtual destructor [-Weffc++]
Linking CXX executable JANKEN_tests
cd /Users/piyo/Source/janken/build/test/types && "/Applications/CMake 2.8-10.app/Contents/bin/cmake" -E cmake_link_script CMakeFiles/JANKEN_tests.dir/link.txt --verbose=1
gcc   -g -std=c++11 -Wall -Wextra -pedantic -Weffc++ -Wl,-search_paths_first -Wl,-headerpad_max_install_names   CMakeFiles/JANKEN_tests.dir/TestRunner.cpp.o CMakeFiles/JANKEN_tests.dir/types_test.cpp.o  -o JANKEN_tests  -L/opt/local/lib  /opt/local/lib/libboost_unit_test_framework-mt.dylib /opt/local/lib/libboost_system-mt.dylib 
Undefined symbols for architecture x86_64:
.... 
```

我省略了其余的错误，因为它看起来与“未定义的符号...”之后的最后一个错误相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T21:26:43.443

您同时拥有`${Boost_LIBRARIES}`和`boost_system-mt`在您的 target_link_libraries 中。那不应该是必要的。既然你包括`system`在你的`find_package(Boost ...)`电话中，它也应该在`${Boost_LIBRARIES}`.

*编辑后：*

看起来您正在构建 64 位。你的 boost 库是 64 位的吗？否则，请尝试执行 32 位构建。

*另一个更新：*

我刚刚发现了这个相关的问题：[架构 x86_64 的未定义符号：我应该使用哪种架构？](https://stackoverflow.com/questions/8034568/undefined-symbols-for-architecture-x86-64-which-architecture-should-i-use)

显然你的错误的原因是你设置`CMAKE_CXX_COMPILER`为`gcc`. 应该是`g++`。

# php - 将输入中的值添加到 div

> ID：14744140
> 
> 赞同：0
> 
> 时间：2013-02-07T05:22:05.883
> 
> 标签：php, javascript

我有下面的代码，我试图通过单击结果将搜索结果添加到 div。让我知道是否有人可以提供帮助，我看了大约一百次代码，似乎无法弄清楚为什么它不起作用。我尝试将 javascript 放在 div 下方、主体下方和头部，没有骰子。下面是 PHP、javascript 和 HTML。谢谢。

**Javascript：**

```
<script type="text/javascript">
      var oButton = document.getElementById('addData');
      var data = document.getElementById('dataInput');
      var display = document.getElementById('display');

      oButton.onclick = function() {
         display.innerHTML += data.value + "<br />";
      }
   </script> 
```

**PHP：**

```
echo '<button id="addData">','<input id="dataInput" type="hidden" value="'.$results_row['username'].'" />','<div id="testt">', '<h3>', $results_row['username'],'</h3>','</div>','</button>'; 
```

**HTML：**

```
<div id ="search_results"></div>
    <p>
                      <div id="display"></div> 

                    </p>

    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="search.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:29:33.397

如果您可以在服务器端代码中获得结果，那么下面的代码应该是解决方案。尝试一下。

```
 <input type="hidden" id="dataInput" value="This is my hidden value">

    <div id="display"></div> 

  <input type="button" name="oButton" id="oButton" onClick="fnc()" value="click">

 <script type="text/javascript">
 function fnc()
 {
   var oButton = document.getElementById("addData");
   var data = document.getElementById("dataInput");
   var display = document.getElementById("display");

     display.innerHTML += data.value + "<br />";
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:30:13.750

在 onload 块中设置 javascript

```
window.onload = function(e){ 
      var oButton = document.getElementById('addData');
      var data = document.getElementById('dataInput');
      var display = document.getElementById('display');

      oButton.onclick = function() {
         data = document.getElementById('dataInput'); // make sure the value is updated
         display.innerHTML += data.value + "<br />";
      }
} 
```

这样你就可以确定你可以为 oButton 分配一个 onclick 函数。并确保更新数据，否则它将一直包含“初始”数据（可能是''）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:15:16.543

这是您所期望的，使用您的`.$results_row['username'].`值而不是我的硬编码值：

```
<p><div id="display"></div></p>

<?php echo '<button id="addData" onClick="fnc()">','<input id="dataInput" type="hidden" value="Hardcoded value" />','<div id="testt">', '<h3>', 'Hardcoded value','</h3>','</div>','</button>'; ?>

<script type="text/javascript">
 function fnc()
 {
  var oButton = document.getElementById("addData");
  var data = document.getElementById("dataInput");
  var display = document.getElementById("display");

  display.innerHTML += data.value + "<br />";
 }
</script> 
```

# android - 在android中修复间隔后下载数据

> ID：14744141
> 
> 赞同：0
> 
> 时间：2013-02-07T05:22:06.650
> 
> 标签：android

我想用从服务器下载的数据更新我的数据库。我想在固定时间间隔后从服务器下载数据并更新数据库，而不会让我的活动无响应。

```
Handler h = new Handler();
Runnable r = new Runnable() {

        @Override
        public void run() {
            try{
                downloadFromServerAndUpdateDatabase();
            }catch(Exception e){

            }
            h.postDelayed(this,10000);
        }
    }; 
```

但是我想在我的应用程序未运行时执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:34:52.673

您可以尝试使用[Service](http://developer.android.com/reference/android/app/Service.html)来实现这种功能。您可以轻松找到有关它的各种[教程](http://www.vogella.com/articles/AndroidServices/article.html)和博客。

# css - 积极缓存：是否所有浏览器都支持更新 URL 参数？

> ID：14744149
> 
> 赞同：7
> 
> 时间：2013-02-07T05:22:28.423
> 
> 标签：css, caching, web, browser, browser-cache

**当积极缓存 CSS 和其他文件时，您可以通过重命名文件并链接到新副本（例如，将 style.123.css**重命名为**style.124.css**）来强制用户更新到最新版本的样式表。一种通常用来代替重命名文件的不同方法是传递一个 URL 参数（例如**style.css?ver=123**，后来更改为**style.css?ver=124**）。

是否所有浏览器都支持后一种方法来下载样式表的新副本？使用 URL 参数重命名文件有什么缺点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T02:59:22.257

经过进一步研究，事实证明，某些代理缓存服务不会缓存 URL 中带有查询字符串的文件。这对于某些网络浏览器是否属实，我不知道。

所以这似乎是使用查询字符串来更新缓存文件的唯一主要缺点——它们可能根本不缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:04:01.563

浏览器无法“支持”查询参数控制缓存的唯一方法是浏览器是否使用了使用不同参数值检索的缓存版本。我从未听说过这样做的浏览器。所以是的，所有浏览器都支持这种技术。我能想到的唯一缺点是您不能同时托管资源的多个版本。（假设您使用的是静态文件）

# html - div的高度不会动态增长

> ID：14744154
> 
> 赞同：0
> 
> 时间：2013-02-07T05:22:41.297
> 
> 标签：html

我浏览了大部分关于此的帖子，但没有任何帮助。

我需要将高度`div`增加到**100%**，以便它适合窗口的长度并且也适用于*子 div*。

```
#container{
    width: 75%; 
    background-color: silver; 
    background-position: center;
    min-height: 100px;
    overflow : hidden;
    margin: 0 auto;
}

#header{
    background-color:infotext;
}

h1{
    margin-bottom: 0; 
    color: white;
}

#list{
    width: 20%; 
    background-color:window; 
    float: left;
    height:100%;
}
#links{
    width: 55%;
} 
```

代码：

```
<body>
    <div id="container">
        <div id="header">
            <h1 align="center">Represent</h1>
        </div>
        <div id="list">
            <span><h4>Fruits</h4></span>
            <hr>
            <p>Apple</p><br>
            <p>Mango</p><br>
            <p>Orange</p>
        </div >
        <div id="links">
        <iframe src="http://www.google.co.in" frameborder="0">
        </iframe>
        </div>
    </div>
</body> 
```

问题是即使尺寸很大，`container div`其余部分也不会扩展，因此会出现。有什么解决办法吗？`divs``iframe``scrollbar`

* * *

另一个问题：

iframe 的 div 不占用整个宽度。我将 20% 用于#list 和 55% 用于 #links，以便它适合父 div #container 75%。这不会发生！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:27:07.370

您必须设置`height: 100%;`and`<html>`元素`<body>`以及要占据整个高度的子元素：

添加这个CSS：

```
html, body, .full-height {
    height: 100%;
}

body {
    margin: 0; // <-- to avoid unnecessary scrollbars.
} 
```

然后只需将`full-height`类添加到要占据其容器全高的元素即可。

您需要**提供问题的演示**，否则我无法帮助您解决所有问题。

**不过有一些提示：**

1.  不要使用`align`属性。它已被弃用。改用 CSS 浮动。

2.  不要使用`infotext`或`window`CSS 颜色值。这些是[系统颜色](https://developer.mozilla.org/en-US/docs/CSS/color_value#System_Colors)。不推荐使用所有系统颜色，因为它们仅适用于某些操作系统/浏览器组合。使用[有效的颜色关键字](https://developer.mozilla.org/en-US/docs/CSS/color_value#Color_keywords)之一，或使用十六进制/rgb 表示法。

3.  不要将`<br>`标签用于视觉间距。改用 CSS 边距。

4.  不要将像 s 这样的块级元素粘在像`<h4>`s 这样的内联元素`<span>`中。

5.  在极少数情况下使用 an`iframe`是个好主意。尝试重新考虑您的问题，看看您是否可以提出替代解决方案。

6.  使您的`#header`元素成为实际`<header>`元素。要支持 IE8，请将此答案底部的 JS 片段添加到您的 JS。

7.  使您的`#list`元素成为实际的[列表元素 ( `<ul>`)](http://www.w3schools.com/tags/tag_ul.asp)。如果您不喜欢列表的默认样式，请使用此答案底部的 CSS 片段重置它们。

**JS 片段：**

```
document.createElement('header'); 
```

**CSS 片段：**

```
ul.reset,
ol.reset {
    list-style: none;
    margin: 0;
    padding: 0;
} 
```

# c# - NGUI 中的面板隐藏和显示

> ID：14744155
> 
> 赞同：6
> 
> 时间：2013-02-07T05:22:42.147
> 
> 标签：c#, monodevelop, unity3d, ngui

我是新手`NGUI`和`unity 3d`。我在一个`ui`根中有两个面板。它被命名为`firstPanel`and `secondPanel`。secondPanel 在场景中被停用。我`firstPanel`有很多按钮，其中一个是`play`按钮，即图像按钮。单击`play`按钮时，应该`firstPanel`隐藏**并**显示**。**我向按钮添加了一个新脚本并在其中编写了代码`secondPanel`**`play`**

 **```
void OnClick(){
    GameObject panel2  = GameObject.Find("secondPanel");
    NGUITools.SetActive(panel2,true);       
    GameObject panel1  = GameObject.Find("firstPanel");         
    NGUITools.SetActive(panel1,false);

} 
```

但我得到这个**错误**：我必须`"NullReferenceException"` 在哪个脚本中`ngui`编辑，我该怎么做？请帮我解决这个问题提前谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T11:28:48.050

如果您的面板被命名为 Panel1 和 Panel2，您将无法使用 GameObject.Find("secondPanel") 和 GameObject.Find("firstPanel") 找到它们。如果“Panel1”和“Panel2”是游戏场景中唯一的名称（没有其他Panel1或Panel2），那么您可以尝试使用

```
void OnClick(){
  GameObject panel2  = GameObject.Find("Panel2");
  NGUITools.SetActive(panel2,true);       
  GameObject panel1  = GameObject.Find("Panel1");         
  NGUITools.SetActive(panel1,false);

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T07:12:26.817

GameObject.Find("Something") 找不到任何禁用的游戏对象，因此您不能通过这种方式使用。您可以尝试将反射添加到您的按钮代码：

```
public GameObject pannel1 = null;
public GameObject pannel2 = null; 
```

并将它们设置为场景编辑器窗口中的右侧面板。

另一种方式，首先您需要在场景中保持两个面板都处于活动状态，然后将代码添加到按钮脚本中，如下所示：

```
private GameObject panel1 = null;
private GameObject panel2 = null;
void Start()
{
    panel1 = GameObject.Find("Panel1");
    panel2 = GameObject.Find("Panel2");
}

void OnClick()
{
    panel2.SetActiveRecursively(true);
    panel1.SetActiveRecursively(false);
} 
```

GameObject.Find(string name) 函数在 Unity3D 中效率不高，因此不要尝试在 Update() 中或每次单击按钮时使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-28T12:13:55.347

我知道这个线程很旧，但如果其他人在不活动时调用面板时遇到问题，您可以预制您的面板并使用 NGUITools.AddChild 来调用您的面板。它看起来像这样。

```
public GameObject parent;
public GameObject child;

void Spawn () {

NGUITools.AddChild (parent, child);

} 
```

将您的 UIRoot 分配给父级（或您想要添加面板的任何对象），然后在编辑器中将您的面板分配给子级，一切就绪！我希望这对某人有所帮助，这是第一次使用 NGUI 时的常见问题。

快乐编码:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-29T10:32:08.513

您不能使用 GameObject.Find() 来查找禁用的游戏对象，它返回 null；**

# java - 自定义电话号码的正则表达式？

> ID：14744158
> 
> 赞同：0
> 
> 时间：2013-02-07T05:22:59.840
> 
> 标签：java, regex, validation, number-formatting

任何人都可以给我正则表达式以验证号码是

1.  最少 6 位或最多 15 位数字
2.  它可能是包含`(),-,#(`如果只有在第一个位置后跟数字），/，+

例如。

```
(079) 22861851
(079)22861851
079 22861851
22861851
079-26408300 / 8200
079 264 083 00 
9429527462
+919427957462
 #9427957462 
```

我想用一个正则表达式公式来验证上面的所有数字是否正确……有人可以帮我吗？

我试过这个

```
var phone_patternIndia = /^((\+){0,1}91(\s){0,1}(\-){0,1}(\s){0,1}){0,1}\d{2}(\s){0,1}(\-){0,1}(\s){0,1}[1-9]{1}[0-9]{7}$/;

var phone_patternUsa=/^([0-9]( |-)?)?(\(?[0-9]{3}\)?|[0-9]{3})( |-)?([0-9]{3}( |-)?[0-9]{4}|[a-zA-Z0-9]{7})$/;

var phone_patternUsa1=/^[\\(]{0,1}([0-9]){3}[\\)]{0,1}[ ]?([^0-1]){1}([0-9]){2}[ ]?[-]?[ ]?([0-9]){4}[ ]*((x){0,1}([0-9]){1,5}){0,1}$/; 
```

但它并非一直有效..所以决定采用其他模式..

var phone_pattern=/^((\d{3}-?|(\d{3}))\s*\d{7}($|\s*/\s*\d{4}$)|\ d{3}\s\d{3}\s\d{3}\s\d{2}|+\d{12}|#\d{10})$/;

```
if (phone_pattern.test(personal_phone))
        {

            $("#restErrorpersonalphone").html('');
            $("#personal_phone").removeClass('borderColor');

        } else {
            $("#restErrorpersonalphone").html('Please enter valid phone number');
            $("#personal_phone").addClass('borderColor');
            flag = false;
        } 
```

它总是处于其他状态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:41:39.990

我强烈鼓励将其分解为较小的正则表达式并单独测试，或者剥离字符，然后进行测试，但只是我头脑中的一个粗略样本，应该有助于解决您的问题（未经测试，仅涵盖您列出的示例）。 ..

```
(079) 22861851 => /^(\d{3}-?|\(\d{3}\))?\s*\d{7}(\s*\/\s*\d{4})?$/
(079)22861851  => same...
079 22861851   => same...
22861851       => same...
079-26408300 / 8200 => same...
079 264 083 00 => /^\d{3}\s\d{3}\s\d{3}\s\d{2}$/
9429527462     => same as first regex
+919427957462  => \^\+\d{12}$/
 #9427957462   => /^#\d{10}$/ 
```

所以，把它们结合起来......

```
/^(\d{3}-?|\(\d{3}\))?\s*\d{7}($|\s*\/\s*\d{4}$)|\d{3}\s\d{3}\s\d{3}\s\d{2}|\+\d{12}|#\d{10})$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:09:47.590

解决问题的最简单方法是消除所有非数字并仅使用数字的长度进行验证。

```
var digits=personal_phone.replace(/[^0-9]/g,'');
var isValid=false;
if (digits && digits.length>=10) {
    // You can fine-tune whether it starts with 1, matches an area code, etc here
    isValid=true;
} 
```

# php - 在不重新加载页面php的情况下随机化图像

> ID：14744163
> 
> 赞同：0
> 
> 时间：2013-02-07T05:23:07.937
> 
> 标签：php, image, random

我期待构建一个显示单个图像的页面，我想要实现的是，在单击“下一步”按钮时，应该更改图像但不应该重新加载页面。

我将图像存储在一个文件夹中，名称将是随机的。我使用过 php 和一些 javascript，所以我有基本的知识。

我搜索了这个问题，有人说使用 Ajax，有人说使用 jquery。我只是无法弄清楚我应该采取什么方法。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:28:37.713

您可以使用 Javascript 显示任何图像

```
<head>
    <script type="text/javascript">

       function changeImage() {
           document.getElementById("iRock").src = "iRock_Happy.png";
       }

    </script>
</head>
<body>
       <img src="iRock.png" id= "iRock" onclick="changeImage()">
 </body> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T05:24:52.623

使用 JavaScript，只需更改图像的来源。

```
document.getElementById('image-id').src = 'new-image.png'; 
```

# winforms - 删除列表视图组中的选择突出显示？

> ID：14744165
> 
> 赞同：1
> 
> 时间：2013-02-07T05:23:13.623
> 
> 标签：winforms, visual-c++, listview

当您将鼠标悬停在我的列表视图组之一上时会发生这种情况：[http ://localhostr.com/file/930/vtdFrMNdvDwz/Untitled.png](http://localhostr.com/file/930/vtdFrMNdvDwz/Untitled.png)

我在 msdn 网站上研究了 System::Windows::Forms::ListViewGroup 并没有找到与如何禁用组选择/单击事件相关的结果。

listview和groups是用visual studio 2010 vc++ windows窗体中的设计器制作的，并自动生成以下代码：

```
System::Windows::Forms::ListViewGroup^  listViewGroup5 = (gcnew System::Windows::Forms::ListViewGroup(L"Player", System::Windows::Forms::HorizontalAlignment::Center)); 
```

我目前正在使用以下代码为我的表单覆盖 WndProc，我假设我的解决方案的答案是也为 listview 覆盖 WndProc，如果是这种情况，我将如何将它组合成一段代码......如果没有，解决方案是什么？

```
protected:
    virtual void WndProc(Message% m) override 
    {
        __super::WndProc(m);
        if (m.Msg == WM_NCHITTEST) 
        {
            switch ((int)m.Result) 
            {
            case HTLEFT: 
            case HTRIGHT: 
            case HTTOP: 
            case HTTOPLEFT: 
            case HTTOPRIGHT:
            case HTBOTTOMLEFT: 
            case HTBOTTOMRIGHT:
                m.Result = (IntPtr)HTCLIENT;
            }
        }
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:55:18.777

[Better ListView Express](http://www.componentowl.com/better-listview-express)和[Better ListView](http://www.componentowl.com/better-listview)控件已经实现了这一点。只需调用：

```
betterListView.GroupHeaderBehavior = betterListView.GroupHeaderBehavior & ~BetterListViewGroupHeaderBehavior.MouseHighlight; 
```

关闭组标题突出显示。

还有其他组标题选项：鼠标焦点、键盘焦点和组选择。

# java - jcomponents没有实时更新

> ID：14744169
> 
> 赞同：0
> 
> 时间：2013-02-07T05:23:21.360
> 
> 标签：java, multithreading, swing, jbutton, thread-sleep

编写俄罗斯方块益智游戏。仍然只是试图制作游戏的骨架。单个块以彩色按钮的形式从屏幕顶部“落下”。当第一个块出现时，它应该将左上角的按钮着色为红色，暂停，然后为下一列中的按钮着色。

```
int counter = 0;
while (checkLoss(counter)) {
blocks[counter].setFalling();
counter++;
if (counter == 10)
counter = 0;
try {
Thread.sleep(100);
} catch (InterruptedException e) {
Thread.currentThread().interrupt();
}
//fall(); 
```

现在忽略fall方法，开始这个方法慢慢地将所有顶行按钮的颜色更改为红色，然后由于顶部空间在重新开始时被占用，因此被视为损失并终止。问题是面板上按钮的颜色在整个过程完成之前不会改变。我试过重绘/重新验证，但都没有奏效。我假设我的无限循环是问题，但我不知道，我需要将其作为单独的线程运行吗？

# ipad - Monotouch - 旋转后屏幕尺寸错误？

> ID：14744177
> 
> 赞同：0
> 
> 时间：2013-02-07T05:23:53.083
> 
> 标签：ipad, xamarin.ios, rotation

Monotouch遇到了奇怪的问题，不知道什么时候坏了。

基本上，如果我将 iPad 从纵向旋转到横向 UIScreen.MainScreen.Bounds.Height 仍报告为 1024 并且 UIScreen.MainScreen.Bounds.Width 报告为 768。

除非我弄错了，但这不应该在轮换时更新吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:45:36.673

看起来我错了，这是 Apple 设计的，Monotouch 没有错。

# python - 在linux上使用python确定防火墙的存在

> ID：14744178
> 
> 赞同：0
> 
> 时间：2013-02-07T05:23:56.170
> 
> 标签：python, linux

我想显示防火墙是否存在..如果未启用，用户应该收到警报..可以使用 python 代码完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:41:18.537

这是我在防火墙关闭的 Redhat 机器上执行的命令

```
[root@epmauto-165-253 ~]# service iptables status
iptables: Firewall is not running.
[root@epmauto-165-253 ~]#
[root@epmauto-165-253 ~]# python
Python 2.6.6 (r266:84292, May  1 2012, 13:52:17)
[GCC 4.4.6 20110731 (Red Hat 4.4.6-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> status = os.popen("service iptables status").read()
>>> print status
iptables: Firewall is not running.

>>> 
```

当防火墙打开时，在不同的 redhat 机器上执行以下命令。

```
[root@blr-srm-auto157 ~]# service iptables status
Table: filter
Chain INPUT (policy ACCEPT)
num  target     prot opt source               destination
1    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED
2    ACCEPT     icmp --  0.0.0.0/0            0.0.0.0/0
3    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0
4    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:22
5    REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited

Chain FORWARD (policy ACCEPT)
num  target     prot opt source               destination
1    REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited

Chain OUTPUT (policy ACCEPT)
num  target     prot opt source               destination

[root@blr-srm-auto157 ~]# python
Python 2.6.6 (r266:84292, Apr 11 2011, 15:50:32)
[GCC 4.4.4 20100726 (Red Hat 4.4.4-13)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> status = os.popen('service iptables status').read()
>>> print status
Table: filter
Chain INPUT (policy ACCEPT)
num  target     prot opt source               destination
1    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED
2    ACCEPT     icmp --  0.0.0.0/0            0.0.0.0/0
3    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0
4    ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:22
5    REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited

Chain FORWARD (policy ACCEPT)
num  target     prot opt source               destination
1    REJECT     all  --  0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited

Chain OUTPUT (policy ACCEPT)
num  target     prot opt source               destination

>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:42:18.910

在 GNU/linux 中，防火墙（netfilter）是内核的一部分，所以我认为如果 linux 开启，防火墙也是如此。接下来，你可能会问netfilter是否配置，是否有任何规则。为此，您可能会解析 iptables 命令（例如 iptables -L）的输出。

# ios - 如何避免类似视图控制器中的重复代码？

> ID：14744181
> 
> 赞同：2
> 
> 时间：2013-02-07T05:24:01.370
> 
> 标签：ios, oop, uiviewcontroller

在 iOS 中，很多时候我的项目都有类似的屏幕，但这里和那里有些不同。随着时间的推移，可能会出现一个类似的屏幕，而我在制作初始架构时不会意识到这一点。

因此，在这种情况下，我所做的就是使用很少的枚举属性并放入 if-else 语句确实在代码中有所区别。

长得丑！特别是当我们在 TableView 数据源和委托方法中实现某些东西时，到处都有相同的 if-else 或 switch case。

现在，如果我制作一个单独的 VC，那么我必须在这里和那里复制粘贴很多相同的代码。如果其中一个有错误，那么它无处不在，而且很难追踪。

并且鉴于截止日期，将父类中的常见内容放在前面变得非常困难，因为我不确定将来是否会出现类似的屏幕。

那么什么是不落入这种情况的通用方法呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T05:46:33.213

好像你有3个选择：

`inheritance`拥有 MySpecialViewController 的超类，其中包含您认为有用的方法，并且能够在子类中*覆盖*以为该类添加额外的功能。你提到你“没有时间”提前做这件事，那很好，找出哪些方法是常见的，事后创建一个超类，让你的视图控制器成为它的子类。

`categories`如果您不需要覆盖共享功能并且遇到多重继承问题，请创建包含您希望在视图控制器中使用的辅助方法的类别。

`utility class` 如果您重用的方法可以在它们自己的类中运行，并且由于某种原因上述两个选项不起作用，只需创建一个具有您使用的常用方法的 MyUtils 类。

# iphone - 将 URL 与字符串分开

> ID：14744186
> 
> 赞同：0
> 
> 时间：2013-02-07T05:24:33.650
> 
> 标签：iphone, string

如何仅从该字符串中分离 url。"":"http://flut.psites.info/api/uploads/13602519341.jpg"}"

我这样做：

```
arr = [returnString componentsSeparatedByString:@"image"];
NSLog(@"********%@",arr);

self.mImgUrlStr = [arr objectAtIndex:1];
NSLog(@"imgUrl: %@",self.mIm gUrlStr); 
```

这是原始字符串 {"message":"true","image":"http://flut.psites.info/api/uploads/13602544571.jpg"}"

从此只需要 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:14:07.700

这是解析 JSON 输出的更好方法：

```
// take string and put it into an NSData object (which NSJSONSerialization can work with)
NSData * dataFromString = [returnString dataUsingEncoding: NSUTF8StringEncoding];
if(dataFromString)
{
    NSError * error = NULL;
    NSDictionary * resultDictFromJSON = [NSJSONSerialization JSONObjectWithData: dataFromString options: 0 error: &error];
    if(resultDictFromJSON == NULL)
    {
        NSLog( @"error from JSON parsing is %@", [error localizedDescription]);
    } else {
        NSString * imageURLString = [resultDictFromJSON objectForKey: @"image"];
        if(imageURLString)
        {
            NSLog( @"here's your image URL --> %@", imageURLString);
        } else {
            NSLog( @"hmmm, I couldn't find an \"image\" in this dictionary");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:51:27.590

猜猜你可以用一些基本的字符串组合来解决这个问题。试试这个;

```
NSString *firstString = @"http://flutterr.pnf-sites.info/api/uploads/13602519341.jpg";
NSArray *strComponents = [firstString componentsSeparatedByString:@"/"];

NSString *finalString = [NSString stringWithFormat:@"%@//%@", [strComponents objectAtIndex:0], [strComponents objectAtIndex:2]];
NSLog(finalString); 
```

这打印出来：

```
2013-02-07 11:19:39.167 TestProject[91226:c07] http://flutterr.pnf-sites.info 
```

希望这可以帮助！

# php - 如何获取浏览器用户代理和 cookie 并使用 cURL 发送

> ID：14744187
> 
> 赞同：1
> 
> 时间：2013-02-07T05:24:41.107
> 
> 标签：php

我想抓取一个页面。但问题是此页面已登录身份验证。那么有什么方法可以使用浏览器信息。就像我使用我的用户名和密码登录，然后创建一个脚本来使用我的浏览器中的这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:38:04.163

您可能想要使用 CURLOPT_COOKIEFILE 和 CURLOPT_COOKIEJAR。发布您的凭据以登录该站点，您应该能够抓取该站点。

# jquery - IE 中的 Google Map AJAX 加载问题

> ID：14744188
> 
> 赞同：0
> 
> 时间：2013-02-07T05:24:41.880
> 
> 标签：jquery, google-maps, google-maps-api-3

我正在为响应式网页设计创建自适应地图，基本上是针对我在交互式 Google 地图（完整的 Google 地图 API v3）中加载的非手持屏幕和手持屏幕我显示静态 Google 地图图像。它在除 IE 8/9 之外的所有浏览器中都可以正常工作，它在 IE 中可以正常工作，但大多数情况下不是，例如第一次尝试它会加载，然后在几次刷新或有时第二次刷新后它不会显示（它非常随机），IE 8比 9 差，9 通常要等到 7-8 次刷新才会中断。但它们都在控制台中输出相同的错误：

```
SCRIPT438: Object doesn't support property or method 'initialize' 
main.js, line 9 character 238 
```

这是指 Google Map API JavaScript 文件。

所以这里是剥离的功能：

```
$.fn.adaptiveMap = function() {

// Set variables
var mapContainer = $(this);

// If palm sized screen
if (isPalmSizedScreen) {
    mapContainer.html('<img src="http://maps.google.com/maps/api/staticmap?center=-33.867487,151.20699&zoom=15&markers=-33.867487,151.20699&size=650x405&sensor=false" class="map__static frame">');
}
// If not palm sized screen
else {
    $.getScript('https://maps.googleapis.com/maps/api/js?key=MY-KEY&sensor=false&callback=initialize');

    mapContainer.load('/Cheetah/includes/modules/widgets/google-map3.php');
}

} 
```

然后在准备好文档时，我调用该函数：

`$('.map').adaptiveMap();`

这是被 AJAX 处理的文件的内容：

```
<div class="map__dynamic frame">
    <div id="map_canvas"></div>
</div>
<script>
function initialize() {
    var myLatlng = new google.maps.LatLng(-33.867487,151.20699);
    var myOptions = {
      zoom: 15,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      scrollwheel: false
    }
    var map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);
    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        animation: google.maps.Animation.DROP
    });
    var contentString = 
        '<div class="infowindow">'+
            '<div>'+
                    '<p class="mrg-off"><strong>SALES OFFICE:</strong><br>1/16 M. 5<br>Tambol Cherngthaley<br>Amphur Thalang<br>Phuket, 83110.<br>See <a href="contact">contact</a> page.</p>'
            '</div>'+
        '</div>'
    ;
    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });
    google.maps.event.addListener(marker, 'click', function() {
        infowindow.open(map,marker);
    });
}
</script> 
```

我知道我需要在通过`callback`API URL 中的参数对文件进行 AJAX 处理之前调用 API，我认为 IE 有这个问题吗？我意识到这可以做得更好，但正如我所说，它在所有浏览器栏 IE 中都可以正常工作。主要的是我需要确保没有为手持屏幕（移动设备）下载任何臃肿的 API 内容，因为我首先构建移动设备，目前这没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:52:20.827

你的问题在这里

```
$.getScript('https://maps.googleapis.com/maps/api/js?key=MY-KEY&sensor=false&callback=initialize');

mapContainer.load('/Cheetah/includes/modules/widgets/google-map3.php'); 
```

谷歌地图 api 正在调用您通过 AJAX 检索`initialize`的文件中存在的函数。`google-map3.php`它有时有效但其他无效的原因是因为该`.load`方法在此之前完成，`.getScript`因此该`initialize`函数存在。一旦浏览器缓存了脚本，该`initialize`函数将在文件下载之前被调用。

如果您在 AJAX 请求之后通过放入在文件下载完成时运行的回调函数来检索脚本，则它应该每次都可以工作。

```
mapContainer.load('/Cheetah/includes/modules/widgets/google-map3.php', function() {
     $.getScript('https://maps.googleapis.com/maps/api/js?key=MY-KEY&sensor=false&callback=initialize');
}); 
```

# php - php glob页面的分页

> ID：14744194
> 
> 赞同：1
> 
> 时间：2013-02-07T05:25:13.260
> 
> 标签：php, pagination, glob

我有一个使用 glob 显示文件夹内图像的页面。问题是，我只想每页显示 20 张图片。我在网上找到的关于分页的教程与数据库有关，但我没有在我的代码中使用数据库。

```
$files = glob("uploaded_files/*.*");
usort($files, function ($a, $b) {
return filemtime($b) - filemtime($a);
});

foreach ($files as $file) {
echo "<img src='$file' style='height:180px;width:180px; border:2px solid black;  margin:20px 0px 10px  10px; *margin:10px 0px 10px 20px;'>";
} 
```

这是我的代码。我怎样才能使它每页显示 20 张图像并自动分页？时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:34:29.227

```
$files = glob("uploaded_files/*.*");
usort($files, function ($a, $b) {
return filemtime($b) - filemtime($a);
});

$record_count  = 20;
$totla_pages   = ceil(count($files)/$record_count);
$page          = $_REQUEST['page']; ///make it dyanamic :: page num
$offset        = ($page-1)*$record_count;
$files_filter  = array_slice($files, $offset,$record_count);

foreach ($files_filter as $file) {
echo "<img src='$file' style='height:180px;width:180px; border:2px solid black;  margin:20px 0px 10px  10px; *margin:10px 0px 10px 20px;'>";
}

if($totla_pages > 1){
   if($page != 1){
      echo '<a href="thispage.php?page='.($page-1).'">Prev</a>';
   }
   if($page != $totla_pages){
      echo '<a href="thispage.php?page='.($page+1).'">Next</a>';
   }
} 
```

但是这里的问题是每次 $files 加载所有文件时都会过滤。

添加了一个简单的分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:39:12.827

这是我用于相同目的的代码。

```
/****************************************************
To fetch total number of images for pagination
*****************************************************/

$folder_name=$row[page_addlink] ;
$dirname = "gallery/".$folder_name ; 
$files = glob($dirname."/*.{jpg,gif,png,tiff,jpeg,bmp}", GLOB_BRACE);       
$no_of_files=count($files); 

/****************************************************
This is to get total number of records for pagination
*****************************************************/
$rows = $no_of_files;                     
$pagenum=$_GET[pagenum];
/*******************************************
By default page number is 1 
*******************************************/
if (!(isset($pagenum)))
{
$pagenum = 1;
} 
/****************************************************
No of rows to be visibles.Value is set in config file
*****************************************************/                   
$page_rows = $no_of_images_pagination ;    /// defined in connection.php file
$last = ceil($rows/$page_rows); 

if ($pagenum <= 1)
{
$pagenum = 1;
}
elseif ($pagenum > $last)
{
$pagenum = $last;
}               
?>
<div class="right_panel">
<div class="inner">                
<div class="inner_bg">

</br>

<div align='center'>
<?php

if($rows <=$page_rows)
{

}
else
{

if($pagenum!=1)
{
echo "<a href='[URL of your page]?id=$folder_id&pagenum=1' style='text-decoration:none'> <<-First</a> ";
}

$previous = $pagenum-1;
if($pagenum!=1)
{
       echo " <a href='[URL of your page]?id=$folder_id&pagenum=$previous' style='text-decoration:none'><-Previous</a> ";
}                   
//just a spacer
for($k=1;$k<=$last;$k++)
{       
echo " <a href='[URL of your page]?id=$folder_id&pagenum=$k' style='text-decoration:none'>";
if($k==$pagenum)
      {
          echo "<b><u>".$k."</u></b>" ;
      }

   else
     {
         echo $k ;
     }
echo "</a>&nbsp;";

}   

$next = $pagenum+1;
if($pagenum!=$last)
{
echo "<a href='[URL of your page]?id=$folder_id&pagenum=$next' style='text-decoration:none'>Next -></a> ";
}

echo " ";

if($pagenum!=$last)
{
echo " <a href='[URL of your page]?id=$folder_id&pagenum=$last' style='text-decoration:none'>Last ->></a> ";
}

}
?>
</div> 
```

您可以根据您的 CSS 和页面 url 和目录位置稍作修改后使用此代码。它工作得非常好。祝你好运

# c# - 从 DataGrid 而不是从 csv 文件读取到数组/列表中

> ID：14744196
> 
> 赞同：4
> 
> 时间：2013-02-07T05:25:38.297
> 
> 标签：c#, .net, csv, datagridview

我有以下代码片段，它读取包含数据的 csv 文件并将它们存储在数组中。

```
private static void ProcessFile()
{
    var lines = File.ReadLines("Data.csv");
    var numbers = ProcessRawNumbers(lines);
    ****Some variables I use later on****
    var rowTotal = new List<double>();
    var squareRowTotal = new List<double>();
} 
```

我想通过使用 C# 在 DataGridView 中插入数据而不是读取 csv 文件来做同样的事情。

我的 csv 文件格式如下：

```
2,5,6,8,4
5,8,3,5,7
7,7,9,3,5
7,8,4,5,6 
```

我想在DataGridView的行和列中输入上面的数据并处理行和数字。我不知道该怎么做，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:05:22.490

您可以使用双 for 循环进行处理：

```
for (int rows = 0; rows < dataGrid.Rows.Count; rows++)
{
    for (int cols= 0; cols < dataGrid.Rows[rows].Cells.Count; cols++)
    {
        var value = dataGrid.Rows[rows].Cells[cols].Value.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:56:03.710

据我了解您的问题，请始终详细解释。我建议通过以下方式，

逻辑：声明一个字符串数组并读取每一行并将数据填充到字符串数组中。然后，将其转换为数据表并将其绑定到 DataGridView。您可以在 Grid 事件中执行 rowTotal 和 SquareTotal。

```
private static void ProcessFile()
{
    string lines;
    string[] ContentData;
    bool blnReadFile = true;
    while (blnReadFile)
    {
        lines = File.ReadLines("Data.csv");
        if (String.IsNullOrEmpty(content))
        {
            blnReadFile = false;
        }
        else
        {
            ContentData = ProcessRawNumbers(lines); /* Ihave retained your metod to get each line */

        }
    }
    DataTable dt = ArrayToDataTable(ContentData);
    dg.DataSource = dt; /* dg refers to Datagrid */
    dg.DataBind();
}

public DataTable ArrayToDataTable(string[] arr)
{
    DataTable dt = new DataTable();
    string[] header = arr[0].Split(',');
    foreach (string head in header)
    {
        dt.Columns.Add(head);
    }

    for (int theRow = 0; theRow < arr.Length; theRow++)
    {
        if (theRow != 0)
        {
            string str = arr[theRow];
            string[] item = str.Split(',');
            DataRow dr = dt.NewRow();
            for (int theColumn = 0; theColumn < item.Length; theColumn++)
            {
                dr[theColumn] = item[theColumn];
            }
            dt.Rows.Add(dr);
        }
    }

    return dt;
} 
```

# java - 最佳实践 - 发送 javamail mime 多部分电子邮件 - 和 gmail

> ID：14744197
> 
> 赞同：31
> 
> 时间：2013-02-07T05:25:40.440
> 
> 标签：java, tomcat, smtp, jakarta-mail, html-email

我有一个需要发送确认电子邮件等的 Tomcat 应用程序。我已经使用 Javamail (mail.jar) 对电子邮件程序进行了编码，以发送多部分文本/html 电子邮件。我的代码基于 Java EE 示例。我在本地服务器上使用 SMTP MTA。

它工作得很好。在 Outlook 中，我看到了 HTML 版本。如果我将它拖到 Outlook 垃圾邮件文件夹中，我会看到文本版本。所以我把它解释为说它有效。

但是，如果我在 Gmail 中查看电子邮件，我只会看到文本版本。我知道 HTML 就在那里（Outlook 就是从那里得到它的）。但是 Gmail 没有显示它...我有很多来自其他系统的电子邮件在 Gmail 中显示为 HTML。

谁能指出我所缺少的规范？我需要创建特殊的标题吗？

谢谢

代码如下所示：

```
Message message = new MimeMessage(session);
Multipart multiPart = new MimeMultipart("alternative");

try {

    MimeBodyPart textPart = new MimeBodyPart();
    textPart.setText(text, "utf-8");

    MimeBodyPart htmlPart = new MimeBodyPart();
    htmlPart.setContent(html, "text/html; charset=utf-8");

    multiPart.addBodyPart(htmlPart);
    multiPart.addBodyPart(textPart);
    message.setContent(multiPart);

    if(from != null){
        message.setFrom(new InternetAddress(from));
    }else
        message.setFrom();

    if(replyto != null)
        message.setReplyTo(new InternetAddress[]{new InternetAddress(replyto)});
    else
        message.setReplyTo(new InternetAddress[]{new InternetAddress(from)});

    InternetAddress[] toAddresses = { new InternetAddress(to) };
    message.setRecipients(Message.RecipientType.TO, toAddresses);
    message.setSubject(subject);
    message.setSentDate(new Date());

    Transport.send(message);

} catch (AddressException e) {
    e.printStackTrace();
    System.out.println("Error: "+e.getMessage());

} catch (MessagingException e) {
    e.printStackTrace();
    System.out.println("Error: "+e.getMessage());

} finally {     
    System.out.println("Email sent!");
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-17T18:28:45.760

解决了！似乎根据多部分 MIME 规范，部分的顺序很重要。应按从低保真到高保真的顺序添加它们。因此，GMail 似乎遵循规范并使用最后一部分。就我而言，我有它们 HTML，文本。我只是将订单交换为文本、HTML 和 Gmail 正确呈现它......

IE

```
MimeBodyPart textPart = new MimeBodyPart();
textPart.setText(text, "utf-8");

MimeBodyPart htmlPart = new MimeBodyPart();
htmlPart.setContent(html, "text/html; charset=utf-8");

multiPart.addBodyPart(textPart); // <-- first
multiPart.addBodyPart(htmlPart); // <-- second
message.setContent(multiPart); 
```

谢谢您的帮助！

# google-apps-script - 来自电子表格的电子邮件，其中数组作为消息

> ID：14744198
> 
> 赞同：1
> 
> 时间：2013-02-07T05:25:42.507
> 
> 标签：google-apps-script, google-sheets

我正在尝试制作一个脚本，该脚本每天从正在更改的电子表格中发送电子邮件（使用 TODAY() 函数过滤自身，以便每天将新数据放在某个工作表上）。我的问题是我需要电子邮件的消息来包含工作表中大约 15 行和 7 列的数组。此代码只想抓取一个单元格作为整个消息。

此外，它还具有将“EMAIL_SENT”放入单元格以确保它不会重新发送它的功能。问题是为此目的，我想让它每晚触发并仅发送一封电子邮件，然后在第二天晚上触发并再次发送相同的电子邮件......数组中的数据将发生变化。

谢谢你的帮助！亚历克斯

```
 var EMAIL_SENT = "EMAIL_SENT";
var NA = "N/A";

function sendEmails2() {
  var ss = SpreadsheetApp.openById( 'MY ID' ),
      sheet = ss.getSheetByName( 'Daily Reports' ),
      startRow = 2;  // First row of data to process
  var numRows = 2000;   // Number of rows to process

  var dataRange = sheet.getRange(startRow, 6, numRows, 13)

  var data = dataRange.getValues();
  for (var i = 0; i < data.length; ++i) {
    var row = data[i];
    var emailAddress = row[10];  // First column
    var message = row[11];       // Second column
    var emailSent = row[12];     // Third column
    if ((emailSent != EMAIL_SENT) && ((emailAddress != "#N/A") && (emailAddress != 0))) {  // Prevents sending duplicates
      var subject = row[0];
      MailApp.sendEmail(emailAddress, subject, message);
      sheet.getRange(startRow + i, 18).setValue(EMAIL_SENT);
      // Make sure the cell is updated right away in case the script is interrupted
      SpreadsheetApp.flush();  
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:03:52.527

您只需添加多个单元格即可在电子邮件消息中添加多个单元格。就像是

```
var message = "Value1: " + row[10] + "  Value2: " + row[11] ... 
```

# mysql - 在某个点之前计算 MYSQL 表中的记录

> ID：14744199
> 
> 赞同：1
> 
> 时间：2013-02-07T05:25:43.213
> 
> 标签：mysql, aggregate-functions

我在 mysql 中有一个简单的 2 列表：col1=SEX 和 col2=NAME

我想找出在特定记录之前存在多少记录（计数）。在伪mysql中：

```
SELECT COUNT(*) BEFORE WHERE SEX="M" AND NAME="BOB" SORT BY NAME 
```

假设只有一个 BOB，并且有很多男性和女性记录。

我如何计算在所选记录之前有多少记录符合条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:41:12.890

```
SELECT COUNT(*) FROM datable WHERE SEX="M" AND NAME<="BOB"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:29:59.800

尝试这个，

```
select count(*)
from table
where rownum < (select rownum
                from table
                where SEX='M' 
                AND NAME='BOB' LIMIT 1); 
```

# android - 如何在列表视图项中设置文本视图选择器？

> ID：14744204
> 
> 赞同：0
> 
> 时间：2013-02-07T05:26:13.770
> 
> 标签：android, listview, textview, selector

当我按下列表视图项目时，我想更改文本颜色和列表视图项目的背景颜色。我将可绘制选择器设置为列表视图并设置颜色选择器文本视图。每个选择器都可以正常工作，但不能同时工作。

例如，按 listview > listview 选择器工作，textview 选择器不工作按 textview 在 listview > texview 选择器工作，listview 选择器不工作

当我使用此选项 android:duplicateParentState="true" 在 listview 中按 textview > 没有发生任何事情时，listview 和 textview 选择器都不起作用。

有没有人有另一个好主意？

这是我的列表视图布局。

```
<FrameLayout
android:layout_width="match_parent"
android:layout_height="64dp"
android:layout_margin="2dp"
android:background="@drawable/list_selector" >

<TextView
    android:id="@+id/title"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_gravity="left|center_vertical"
    android:ellipsize="end"
    android:textColor="@color/color_list_selector"
    android:textSize="22dp" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right|center_vertical"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="36dp"
        android:layout_height="36dp"
        android:layout_gravity="right|center_vertical"
        android:layout_marginBottom="16dp"
        android:layout_marginTop="16dp"
        android:src="@drawable/image" />

    <TextView
        android:id="@+id/title"
        android:layout_width="30dp"
        android:layout_height="wrap_content"
        android:textSize="22dip" />
</LinearLayout> 
```

和我的颜色选择器

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_selected="true" android:color="@color/clr_black"/>
<item android:state_focused="true" android:color="@color/clr_black"/>
<item android:state_pressed="true" android:color="@color/clr_blackt"/>
<item android:color="@color/clr_yellow"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:52:06.827

> ```
> listView.setOnItemClickListener(new OnItemClickListener() {     
> @Override  
>   public void onItemClick(AdapterView <? > adapterView, View view, int position, long id) {  
>     TextView textView = (TextView) view.findViewById(R.id.textView);
>     textView.setBackgroundDrawable(getResources().getSystem().getDrawable(R.drawable.selector));
> }
> }); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:55:19.490

作为另一个想法，您可以在按下项目时动态更改`TextView`的颜色和`ListView`项目的背景颜色。

在您的自定义`ListView`

```
layoutRow.setOnTouchListener(new OnTouchListener()
            {
                @Override
                public boolean onTouch(View v, MotionEvent event)
                {
                    // TODO Auto-generated method stub
                    switch (event.getAction())
                    {
                    case MotionEvent.ACTION_DOWN:

                        // Change the TextView color
                        // Change the ListView item's background color

                        return true;
                    case MotionEvent.ACTION_UP:

                        // Reset the TextView color                                           
                    // Reset the ListView item's background color

                        return true;

                    }
                    return false;
                }
            }); 
```

`layoutRow`您的项目的布局在哪里。在您`ListView`的情况下，您使用了`FrameLayout`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T18:12:43.697

我不确定我是否正确理解了您的问题。

试试这个 textColor 的颜色状态列表

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="#fff"/>
    <item android:state_activated="true" android:color="#fff"/>
    <item android:color="#000" />
</selector> 
```

[Android指南](http://developer.android.com/guide/topics/resources/color-list-resource.html)没有提到`state_activated`属性，但它对我有用。

# java - Java - 拆分的意外结果

> ID：14744208
> 
> 赞同：1
> 
> 时间：2013-02-07T05:26:46.517
> 
> 标签：java, regex, string, split

为什么

```
int a = 1234;
String b = a + "";
String[] c = b.split(""); 
```

导致：

```
c[0] = ""
c[1] = "1"
c[2] = "2"
c[3] = "3"
c[4] = "4" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T05:30:58.363

`String.split`将正则表达式 String 作为参数。您提供了一个空的正则表达式，它与空字符串匹配。因此，您从字符串的开头得到一个空字符串匹配，然后每个字符都被一个空字符串分割。您可能应该提供一个有效的正则表达式。

* * *

通常在拆分结束时会有一个空字符串，但 Java 故意将其从`.split`使用这种单参数用法产生的数组中排除。

```
$ php -r "var_dump(preg_split('//', 1234));"
array(6) {
  [0]=>
  string(0) ""
  [1]=>
  string(1) "1"
  [2]=>
  string(1) "2"
  [3]=>
  string(1) "3"
  [4]=>
  string(1) "4"
  [5]=>
  string(0) ""
} 
```

# jquery - 如何使用 .css 类进入 .cshtml

> ID：14744210
> 
> 赞同：1
> 
> 时间：2013-02-07T05:27:01.803
> 
> 标签：jquery, css, razor

我无法从 site.css 文件访问 css 类。但是如果我在我的个人视图（.cshtml）文件中编写这些类，那么我可以访问它们。请建议代码详细信息如下：#mask { position:absolute; }

```
 /* You can customize to your needs  */
        .Add-popup
        {
          background: white;
        }

        img.btn_close 
        { 
         float: right;      
        } 
        '
        i have above classes in CSS file            
        1) this is my _layout.cshtml

        '
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8" />
            <title>@ViewBag.Title</title>
            <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet"  type="text/css"/>
        </head>
        </html>
        '

        2) this is my view

        '
        @{   

            ViewBag.Title = "View";
            Layout = "~/Views/Shared/_Layout.cshtml";
        }
        @if (false)
        {
            <script src="../../Scripts/jquery-1.7.1-vsdoc.js" type="text/javascript"></script>
            <link type="text/css" href="../../Content/Site.css" rel="stylesheet"  />
            <script src="...../ui/jquery.ui.mouse.js"></script>
            <script src="...../ui/jquery.ui.draggable.js"></script>         
        }
        @if (User.IsInRole("Owner"))
        {
        <div id="box" class="Add-popup">                                <a href="#" class="close"><img src="../../Content/images/close_button.png" class="btn_close" title="Close Window" alt="Close" /></a> 
         </div>
        }

'
        still i am not able to access those classess from CSS file.

        please reply if anybody has solution? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:35:44.200

这是基本选项 - 您将样式标签添加到文档中。

```
<link rel="stylesheet" href="site.css" type="text/css" /> 
```

如果您使用的是捆绑包，则将捆绑包放在那里：

```
@Styles.Render("~/Content/css") 
```

最后，如果您使用主布局，这是放置它的最佳位置，因为它将应用于您的所有页面。

更新

如果您以 id 为目标，则使用 # 而不是点，它用于类。

```
#Add-popup
    {
      background: white;
    }

    img.btn_close 
    { 
     float: right;      
    } 
```

您也可以访问一个答案：[如何在 CSHTML 文件中引用 CSS？](https://stackoverflow.com/questions/14600087/how-to-refere-css-in-cshtml-file)

# python - 将molfile转换为fasta

> ID：14744216
> 
> 赞同：0
> 
> 时间：2013-02-07T05:27:17.590
> 
> 标签：python, bioinformatics, fasta

我正在从事生物信息学项目。

我想使用 python 将 MDL 文件（molfile - .mol）转换为 FASTA 文件。

谁能告诉我我该怎么做？

mol 文件结构：[http](http://en.wikipedia.org/wiki/Chemical_table_file#Molfile)
://en.wikipedia.org/wiki/Chemical_table_file#Molfile fasta 文件结构：[http ://en.wikipedia.org/wiki/FASTA_format](http://en.wikipedia.org/wiki/FASTA_format)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-25T23:51:22.950

[RDKit](http://www.rdkit.org/docs/index.html)提供了一个函数[`MolToFASTA(mol)`](http://www.rdkit.org/Python_Docs/rdkit.Chem.rdmolfiles-module.html#MolToFASTA)，它为输入分子输出 FASTA 序列。应该是这样的：

```
from rdkit.Chem.rdmolfiles import MolFromMolFile, MolToFASTA

mol = MolFromMolFile("yourFile.mol")
fa = MolToFASTA(mol)
# write the fa string to file 
```

不幸的是，我找不到用于测试的蛋白质示例 .mol 文件。

# linux - sed 文本替换

> ID：14744221
> 
> 赞同：1
> 
> 时间：2013-02-07T05:27:53.847
> 
> 标签：linux

我有一个包含数千行的文本文档文件。每行如下所示

```
141.132.86.86,53240,203.178.142.200,80,6,550,22425,1089,1630060,40,40,453,17,52,1496,1500,61,14,11578,220465,33191,11,5649,230153,23516,6356945,6356945,6356945,6356945,0,0,0,0,0,550,22425,1089,1630060,1,2,0,0,22012,43572,0 
```

我想知道是否可以使用 sed 替换/更改特定列的值。（列用逗号分隔）。

例如，如果我需要将第四列和第五列的值分别从 80 和 6 更改为 1 和 2。

需要注意的是，不同线路的值是不同的。我需要更改特定列的值。

提前感谢您的关心，感谢您的好意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:25:25.960

赛德：

```
sed 's/\(\(.*,\)\{3\}\)80,6,\(.*\)/\11,2,\3/g' 
```

awk 并非旨在就地编辑内容。但它为字段编辑提供了完美的支持，你可以像这样使用它：

```
awk 'BEGIN {FS=","} {OFS=","} {if($4 = 80) $4=1;if($5 = 6) $5=2;print}' input.txt > output.txt  && mv input.txt input.txt.old && mv output.txt input.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:14:46.717

使用纯 Bash

```
#!/bin/sh
IFS=, read -a ca < a.txt
ca[3]=1
ca[4]=2
IFS=, read cs <<< "${ca[*]}"
echo $cs > a.txt 
```

# mysql - MySQL 返回存储过程抛出的确切错误/警告

> ID：14744225
> 
> 赞同：1
> 
> 时间：2013-02-07T05:28:27.293
> 
> 标签：mysql, exception-handling

这是我第一次使用 Mysql SP。我有一个程序可以执行多项 DML 操作，例如插入和更新。但它有时会发出警告。我想在执行脚本时显示确切的警告（在 shell/console 上）。目前，当发生异常时，我会得到如下信息。

```
Query OK, 0 rows affected, 1 warning (0.08 sec) 
```

当我使用像工作台这样的mysql客户端执行相同的过程并执行该过程时。我收到一条正确的错误消息。这就是我想在控制台上打印的内容。

```
1   10:33:03    call dbscripts(@param)  0 row(s) affected, 1 warning(s): 1062 Duplicate entry '124' for key 'PRIMARY' 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:37:27.930

您可以使用`SHOW WARNINGS`. 从[文档](http://dev.mysql.com/doc/refman/5.6/en/show-warnings.html)中：

> `SHOW WARNINGS`显示有关由当前会话中生成消息的最后一条语句产生的条件（错误、警告和注释）的信息。

# java - 某些组件不响应事件

> ID：14744228
> 
> 赞同：1
> 
> 时间：2013-02-07T05:28:38.800
> 
> 标签：java, swing, events, focus

我的班级没有从选择的颜色变化时`Event Controller`从中收到事件，也没有收到（我正在使用的那个星星）。我已经彻底检查过，但找不到问题，这是我的代码（为方便起见，我省略了包和导入）：`JColorChooser``KeyEvents``JComponent`

```
public class Main {

public static void main(String[] args) {
    GestorDeEventos ge=new GestorDeEventos();

    Interfaz f=new Interfaz();

    ge.setVentana(f);
    f.setGestorEventos(ge);
}
}

public class Interfaz extends JFrame {

private GestorDeEventos miGestor;

private Container c;

AreaDeDibujos lienzo;

private JLabel lInfo,lCantidadPuntas,lTamanioEstrella,lLargoPuntas,lColor,lRotar;
JSpinner spinnerCantidadPuntas;
JSlider sliderTamanioEstrella;
DoubleJSlider sliderLargoPuntas;
JColorChooser ccColor;
JButton bRotarIzquierda,bRotarDerecha;
public Interfaz(){

    setTitle("Ejemplo <<Dibujo de primitivas y poligonos>> Version 1.1 (07/02/2013)");
    setSize(1024,720);
    setResizable(false);

    c=getContentPane();
    c.setBackground(new Color(240,250,245));
    c.setLayout(null);

    lienzo=new AreaDeDibujos(600,600);
    lienzo.setLocation(400,15);

    c.add(lienzo);

    // Para informar al usuario del proposito de dicha seccion de la interfaz
    lInfo=new JLabel("Por favor, seleccione los parametros de la estrella a dibujar:");
    lInfo.setBounds(10,10,350,20);
    c.add(lInfo);

    // Para seleccionar la cantidad de puntas de la estrella
    lCantidadPuntas=new JLabel("Numero de puntas de la estrella: ");
    lCantidadPuntas.setBounds(10,35,350,20);
    c.add(lCantidadPuntas);
    spinnerCantidadPuntas=new JSpinner(new SpinnerNumberModel(7, //valor inicial
                                                              Estrella.MINIMO_PUNTAS, //valor minimo
                                                              Estrella.MAXIMO_PUNTAS, //valor maximo
                                                              1 // incremento/decremento (paso)
                                                             )
                                       );
    spinnerCantidadPuntas.setBounds(10,55,120,20);
    /*
      En la siguiente linea deshabilito el campo de texto del JSPinner de modo que su valor
      solo pueda ser editado mediante los botones que incluye el propio JSpinner, esto lo hago
      para evitar que alguien coloque un valor fuera del rango [Estrella.MINIMO_PUNTAS, Estrella.MAXIMO_PUNTAS]
    */
    ((JSpinner.DefaultEditor)spinnerCantidadPuntas.getEditor()).getTextField().setEditable(false);
    c.add(spinnerCantidadPuntas);

    //Para seleccionar el tamaño de la estrella
    lTamanioEstrella=new JLabel("Tamaño de la estrella (pixeles): ");
    lTamanioEstrella.setBounds(10,80,350,20);
    c.add(lTamanioEstrella);
    sliderTamanioEstrella=new JSlider( 
                                     JSlider.HORIZONTAL,
                                     AreaDeDibujos.TAMANIO_ESTRELLA_MINIMO,
                                     AreaDeDibujos.TAMANIO_ESTRELLA_MAXIMO,
                                     (int)(AreaDeDibujos.TAMANIO_ESTRELLA_MAXIMO/2)
                                     );
    Hashtable etiquetasDelSlider1 = new Hashtable();
    int i,cantidadDeRayas,rango,paso,minimo,maximo,valorDeLaRaya;
    minimo=AreaDeDibujos.TAMANIO_ESTRELLA_MINIMO;
    maximo=AreaDeDibujos.TAMANIO_ESTRELLA_MAXIMO;
    rango=maximo-minimo;
    cantidadDeRayas=10;
    paso=rango/cantidadDeRayas;
    for(i=0;i<=cantidadDeRayas;i++){
        valorDeLaRaya=minimo+paso*i;
        etiquetasDelSlider1.put(new Integer (valorDeLaRaya), new JLabel(""+valorDeLaRaya));
    }
    sliderTamanioEstrella.setLabelTable( etiquetasDelSlider1 );
    sliderTamanioEstrella.setPaintLabels(true);
    sliderTamanioEstrella.setMajorTickSpacing(paso);
    sliderTamanioEstrella.setPaintTicks(true);
    sliderTamanioEstrella.setBounds(10,100,350,60);
    c.add(sliderTamanioEstrella);

    //Para seleccionar el largo de las puntas de la estrella (% con respecto al tamaño total de la estrella)
    lLargoPuntas= new JLabel("Largo de las puntas(%): ");
    lLargoPuntas.setToolTipText("(% con respecto al tamaño total de la estrella)");
    lLargoPuntas.setBounds(10,165,350,20);
    c.add(lLargoPuntas);

    sliderLargoPuntas=new DoubleJSlider(100, 900, 367, 1000);
    Hashtable etiquetasDelSlider2 = new Hashtable();
    minimo=100;
    maximo=900;
    rango=maximo-minimo;
    cantidadDeRayas=10;
    paso=rango/cantidadDeRayas;
    for(i=0;i<=cantidadDeRayas;i++){
        valorDeLaRaya=minimo+paso*i;
        etiquetasDelSlider2.put(new Integer (valorDeLaRaya), new JLabel(""+valorDeLaRaya/10));
    }
    sliderLargoPuntas.setLabelTable( etiquetasDelSlider2 );
    sliderLargoPuntas.setPaintLabels(true);
    sliderLargoPuntas.setMajorTickSpacing(paso);
    sliderLargoPuntas.setPaintTicks(true);
    sliderLargoPuntas.setBounds(10,185,350,60);
    c.add(sliderLargoPuntas);

    // Para seleccionar el color
    lColor=new JLabel("Color: ");
    lColor.setBounds(10,250,350,20);
    c.add(lColor);
    ccColor=new JColorChooser(new Color(0,255,255));
    ccColor.setPreviewPanel(new JPanel());
    JScrollPane spColor=new JScrollPane(ccColor);
    spColor.setBounds(10,270,350,250);
    c.add(spColor);

    //Para rotar la estrella
    lRotar=new JLabel("Rotar: ");
    lRotar.setBounds(10,525,350,20);
    c.add(lRotar);

    bRotarIzquierda=new JButton("<");
    bRotarIzquierda.setBounds(63,545,80,40);
    c.add(bRotarIzquierda);

    bRotarDerecha=new JButton(">");
    bRotarDerecha.setBounds(206,545,80,40);
    c.add(bRotarDerecha);

    setFocusable(true);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
}

public void setGestorEventos(GestorDeEventos ge){
    miGestor=ge;
    spinnerCantidadPuntas.addChangeListener(miGestor);
    sliderLargoPuntas.addChangeListener(miGestor);
    sliderTamanioEstrella.addChangeListener(miGestor);
    ccColor.getSelectionModel().addChangeListener(miGestor);

    bRotarDerecha.addActionListener(miGestor);
    bRotarIzquierda.addActionListener(miGestor);

    lienzo.addKeyListener(miGestor);
    /*addKeyListener(miGestor);
    spinnerCantidadPuntas.addKeyListener(miGestor);
    sliderLargoPuntas.addKeyListener(miGestor);
    sliderTamanioEstrella.addKeyListener(miGestor);
    ccColor.addKeyListener(miGestor);
    bRotarDerecha.addKeyListener(miGestor);
    bRotarIzquierda.addKeyListener(miGestor);*/
}

}

public class AreaDeDibujos extends JComponent {

public static final int TAMANIO_ESTRELLA_MINIMO=50,TAMANIO_ESTRELLA_MAXIMO=400;
private DibujoDeEstrella dibujo;

public AreaDeDibujos(int largo, int ancho){
    setFocusable(true);
    setSize(largo,ancho);
    setBackground(Color.WHITE);
}

@Override
public void paint(Graphics g){
    g.setColor(Color.WHITE);
    g.clearRect(0, 0, this.getWidth(), this.getHeight());
    if(dibujo!=null){
        g.setColor(dibujo.getColor());
        for(Polygon d: dibujo.getDibujos())
            g.fillPolygon(d);
    }        
}

public void pintarEstrella(DibujoDeEstrella d){
    dibujo=d;
    repaint();
}
}

public class GestorDeEventos implements ChangeListener,KeyListener,ActionListener {

Interfaz ventana;
AreaDeDibujos areaDeTrabajo;

DibujoDeEstrella dibujo;

public GestorDeEventos() {
}

public void setVentana(Interfaz ventana) {
    this.ventana = ventana;
    areaDeTrabajo= ventana.lienzo;
    dibujo=new DibujoDeEstrella(
                               new Estrella(
                                           ventana.sliderTamanioEstrella.getValue(),
                                           (int)ventana.spinnerCantidadPuntas.getValue(),
                                           ventana.sliderLargoPuntas.getScaledValue(),
                                           ventana.ccColor.getColor()
                                           )
                               );
    areaDeTrabajo.pintarEstrella(dibujo);
}

@Override
public void stateChanged(ChangeEvent e) {
    if(e.getSource()==ventana.sliderLargoPuntas){
        dibujo.setLargoDePuntas(ventana.sliderLargoPuntas.getScaledValue());
    }
    else if(e.getSource()==ventana.sliderTamanioEstrella){
        dibujo.setTamanio(ventana.sliderTamanioEstrella.getValue());

    }
    else if(e.getSource()==ventana.spinnerCantidadPuntas){
        dibujo.setCantidadPuntas((int)ventana.spinnerCantidadPuntas.getValue());

    }
    else if(e.getSource()==ventana.ccColor){
        dibujo.setColor(ventana.ccColor.getColor());
    }
    areaDeTrabajo.pintarEstrella(dibujo);
}

@Override
public void keyTyped(KeyEvent e) { //NO USADA, AL NO DECLARAR NADA ADENTRO ESTAMOS EFECTIVAMENTE
                                   //IGNORANDO TODOS LOS EVENTOS DE ESTE TIPO
}

@Override
public void keyPressed(KeyEvent e) {
    if(e.getKeyCode()==KeyEvent.VK_LEFT){
        dibujo.moverIzquierda();
    }
    else if(e.getKeyCode()==KeyEvent.VK_RIGHT){
        dibujo.moverDerecha();
    }
    else if(e.getKeyCode()==KeyEvent.VK_UP){
        dibujo.moverArriba();
    }
    else if(e.getKeyCode()==KeyEvent.VK_DOWN){
        dibujo.moverAbajo();
    }
    areaDeTrabajo.pintarEstrella(dibujo);
}

@Override
public void keyReleased(KeyEvent e) { //NO USADA, AL NO DECLARAR NADA ADENTRO ESTAMOS EFECTIVAMENTE
                                      //IGNORANDO TODOS LOS EVENTOS DE ESTE TIPO
}

@Override
public void actionPerformed(ActionEvent e) {
    if(e.getSource().equals(ventana.bRotarIzquierda)){
        dibujo.rotar(-1);
    }
    else if(e.getSource().equals(ventana.bRotarDerecha)){
        dibujo.rotar(1);
    }
    areaDeTrabajo.pintarEstrella(dibujo);
}

}

public class DibujoDeEstrella {

private Estrella miEstrella; //Aqui guardamos los datos de la estrella como tal (independiente de como la dibujaremos)

private LinkedList<Polygon> dibujos; //Esto es lo que entregaremos al JComponent para que dibuje la estrella

/* Las siguientes variables sirven para generar el dibujo a partir de la estrella, en ellas
   contemplamos parametros como lo son el angulo actual de la estrella, la posicion actual dentro
   del JComponent, y los puntos de los 2 circulos que usamos para construir el dibujo, todas usadas
   para crear los poligonos LISTOS PARA SER DIBUJADOS
*/
private int posicionActualX,posicionActualY;
private double anguloActual,circuloInteriorX[],circuloInteriorY[],circuloExteriorX[],
               circuloExteriorY[],radioDelCirculoInterior,radioDelCirculoExterior,
               gradosEntreCadaPunto,anguloEntrePuntos,anguloInicial,desplazamiento;
public DibujoDeEstrella(Estrella e){
    miEstrella=e;
    posicionActualX=0;
    posicionActualY=0;
    anguloActual=0.0;
}

private void crearDibujo(){
    calcularCirculos();
    int i;
    dibujos=new LinkedList<Polygon>(); //El centro + cada una de las puntas
    //creamos el centro de una sola vez y lo introducimos dentro de la lista de poligonos a dibujar
    dibujos.add(crearCentro());
    Polygon punta;
    for(i=0;i<circuloExteriorX.length;i++){
        punta=new Polygon();
        punta.addPoint((int)circuloInteriorX[i], (int)circuloInteriorY[i]);
        punta.addPoint((int)circuloExteriorX[i], (int)circuloExteriorY[i]);
        if(i+1<circuloExteriorX.length)
            punta.addPoint((int)circuloInteriorX[i+1], (int)circuloInteriorY[i+1]);
        else
            punta.addPoint((int)circuloInteriorX[0], (int)circuloInteriorY[0]);
        dibujos.add(punta);
    }
}

private Polygon crearCentro(){
    int cx[],cy[],cantidadDePuntos;
    cantidadDePuntos=miEstrella.getCantidadPuntas();
    cx=new int[cantidadDePuntos];
    cy=new int[cantidadDePuntos];
    int i=0;
    for(double x: circuloInteriorX)
        cx[i++]=(int)x;
    i=0;
    for(double y: circuloInteriorY)
        cy[i++]=(int)y;
    return new Polygon(cx,cy,cantidadDePuntos);
}

private void inicializarVariables(){
    //Para nosotros es mas facil y entendible trabajar con grados,
    //sin embargo las funciones de java trabajan con radianes
    gradosEntreCadaPunto=360.0/miEstrella.getCantidadPuntas();

    //para hacer el codigo mas corto y entendible crearemos una variables mas
    //donde esten los angulos que necesitamos en radianes
    anguloEntrePuntos=Math.toRadians(gradosEntreCadaPunto);
    anguloInicial=Math.toRadians(anguloActual);
    desplazamiento=anguloEntrePuntos/2;

    radioDelCirculoExterior=miEstrella.getTamanioPixeles()/2;
    radioDelCirculoInterior=radioDelCirculoExterior*miEstrella.getLargoDePuntas();
}

private void calcularCirculos(){
    circuloInteriorX= new double[miEstrella.getCantidadPuntas()];
    circuloInteriorY= new double[miEstrella.getCantidadPuntas()];
    circuloExteriorX= new double[miEstrella.getCantidadPuntas()];
    circuloExteriorY= new double[miEstrella.getCantidadPuntas()];
    int i;
    double anguloDelPunto;
    for(i=0;i<circuloInteriorX.length;i++){
        anguloDelPunto=anguloInicial+i*anguloEntrePuntos;
        circuloInteriorX[i]=(double)posicionActualX+ radioDelCirculoInterior*Math.cos(anguloDelPunto);
        circuloInteriorY[i]=(double)posicionActualY+ radioDelCirculoInterior*Math.sin(anguloDelPunto);
        circuloExteriorX[i]=(double)posicionActualX+ radioDelCirculoExterior*Math.cos(desplazamiento+anguloDelPunto);
        circuloExteriorY[i]=(double)posicionActualY+ radioDelCirculoExterior*Math.sin(desplazamiento+anguloDelPunto);
    }
}

public LinkedList<Polygon> getDibujos() {
    crearDibujo();
    return dibujos;
}

public void rotar(int grados){
    anguloActual+=(double)grados;
    if(anguloActual>360.0)
        anguloActual-=360.0;
    else if(anguloActual<0.0)
        anguloActual+=360.0;
    anguloInicial=Math.toRadians(anguloActual);
    crearDibujo();
}

public void setCantidadPuntas(int cantidadPuntas) {
    miEstrella.setCantidadPuntas(cantidadPuntas);
    inicializarVariables();
}

public void setColor(Color color) {
    miEstrella.setColor(color);
}

public void setLargoDePuntas(double largoDePuntas) {
    miEstrella.setLargoDePuntas(largoDePuntas);
    inicializarVariables();
}

public Color getColor(){
    return miEstrella.getColor();
}

public void moverArriba(){posicionActualY-=10;}
public void moverAbajo(){posicionActualY+=10;}
public void moverIzquierda(){posicionActualX-=10;}
public void moverDerecha(){posicionActualX+=10;}

public void setTamanio(int t){
    miEstrella.setTamanioPixeles(t);
    inicializarVariables();
}
}

public class Estrella {

public static final int MINIMO_PUNTAS=3,MAXIMO_PUNTAS=10;

private int tamanioPixeles,cantidadPuntas;
private double largoDePuntas;
private Color color;

public Estrella(int tamanioPixeles, int cantidadPuntas, double largoDePuntas, Color color) {
    this.tamanioPixeles = tamanioPixeles;
    this.cantidadPuntas = cantidadPuntas;
    this.largoDePuntas = largoDePuntas;
    this.color = color;
}

public Estrella() {
}

public void setCantidadPuntas(int cantidadPuntas) {
    this.cantidadPuntas = cantidadPuntas;
}

public void setColor(Color color) {
    this.color = color;
}

public void setLargoDePuntas(double largoDePuntas) {
    this.largoDePuntas = largoDePuntas;
}

public void setTamanioPixeles(int tamanioPixeles) {
    this.tamanioPixeles = tamanioPixeles;
}

public int getCantidadPuntas() {
    return cantidadPuntas;
}

public Color getColor() {
    return color;
}

public double getLargoDePuntas() {
    return largoDePuntas;
}

public int getTamanioPixeles() {
    return tamanioPixeles;
}

}

class DoubleJSlider extends JSlider {

final int scale;

public DoubleJSlider(int min, int max, int value, int scale) {
    super(min, max, value);
    this.scale = scale;
}

public double getScaledValue() {
    return ((double)super.getValue()) / this.scale;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T05:42:22.950

您的第一个问题（颜色更改事件）更多地与您希望事件来自颜色选择器这一事实有关，尽管您将侦听器添加到颜色选择器的选择模型中。

```
public void stateChanged(ChangeEvent e) {

    System.out.println("!! Ping !!" + e.getSource());

    if (e.getSource() == ventana.sliderLargoPuntas) {
        dibujo.setLargoDePuntas(ventana.sliderLargoPuntas.getScaledValue());
    } else if (e.getSource() == ventana.sliderTamanioEstrella) {
        dibujo.setTamanio(ventana.sliderTamanioEstrella.getValue());

    } else if (e.getSource() == ventana.spinnerCantidadPuntas) {
        dibujo.setCantidadPuntas((int) ventana.spinnerCantidadPuntas.getValue());

    // >>--- Change this ------------------------------------------------------------<<
    //} else if (e.getSource() == ventana.ccColor) {
    } else if (e.getSource() == ventana.ccColor.getSelectionModel()) {

        System.out.println("!! Pong !!");
        dibujo.setColor(ventana.ccColor.getColor());
    }
    areaDeTrabajo.pintarEstrella(dibujo);
} 
```

您的第二个问题是对`KeyListener`s 的常见误解。强烈建议您不要使用`KeyListener`（出于您拥有的原因），而是使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。 `KeyListener`仅当它附加到的组件是可聚焦的并且当前具有焦点时才有效。键绑定可以用来克服这个限制。

在您`AreaDeDibujos`的班级中，您已覆盖`paint`，但未能调用`super.paint`。这些`paint`方法是一组复杂的例程，除非您有充分的理由这样做，否则您真的不想破坏它们。

您应该`paintComponent`改用（并且不要忘记调用`super.paintComponent`）。如果没有其他原因，那么事实`paintComponent`就是双缓冲而`paint`不是。

This will, also, mean you don't need to use `g.setColor` or `g.clearRect` as the super paint methods will take care of it for you.

# ruby-on-rails - 未初始化的常量 CustomerBill::CustomerBillLineItem

> ID：14744230
> 
> 赞同：4
> 
> 时间：2013-02-07T05:28:46.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我在 和 之间创建了一个关联`customer_bill`，`customer_bill_line_item`如下所示：

```
class CustomerBill < ActiveRecord::Base
  attr_accessible :customer_bill_line_items_attributes
  has_many :customer_bill_line_items, :dependent =>:destroy

  accepts_nested_attributes_for :customer_bill_line_items, :allow_destroy => true
end

class CustomerBillLineItem < ActiveRecord::Base
  attr_accessible :customer_bill_id 
  belongs_to :customer_bill, :foreign_key => "customer_bill_id"
end 
```

在创建模式下输入表单时，出现以下错误：

```
uninitialized constant CustomerBill::CustomerBillLineItem

Extracted source (around line #66):

63:                             <%end%>
64:                            
65:                            
66:             <%= f.fields_for :customer_bill_line_items do |builder| %>
67:             <%= render 'customer_bill_line_item_fields', :f => builder %>
68:             <%end%> 
```

完整的堆栈跟踪在评论中给出。

是否有必须建立的`customer_bills_controller`关联`@customer_bill.customer_bill_line_items`？

需要指导。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T23:49:41.317

我很快将一个示例应用程序放在一起以证明您所做的是正确的，您可以在此处查看：[https](https://github.com/Bram--/customer_bill) ://github.com/Bram--/customer_bill效果很好。只需确保在启动之前您有一个客户账单和客户账单行项目：

```
c = CustomerBill.create name: 'Name'
CustomerBillLineItem.create name: 'Line Item A', price: '1.00', customer_bill_id: c.id
CustomerBillLineItem.create name: 'Line Item B', price: '2.00', customer_bill_id: c.id 
```

您使用的是什么版本，还有什么我们在上面的代码中没有看到的吗？

希望这个例子有帮助，否则给我留言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T16:00:55.260

您询问：

> 是否必须在 customer_bills_controller 中建立关联，例如@customer_bill.customer_bill_line_items？

根据我们 Novae 的工作模型，**它不是**（来自 customer_bills_controller.rb，[Novae 的模型](https://github.com/Bram--/customer_bill)）：

```
class CustomerBillsController < ApplicationController
  def show
    @customer_bill = CustomerBill.last
  end

  def update
    @customer_bill = CustomerBill.find params[:id]
    @customer_bill.update_attributes!(params[:customer_bill])

  redirect_to @customer_bill, flash: { notice: 'Updated' }
  end
end 
```

为了自动指出差异，在他的`customer_bill_line_item.rb`模型 Novae`CustomerBillLineItem`中包含更多属性`attr_accessible`（来自 app/models/）：

```
class CustomerBillLineItem < ActiveRecord::Base
  attr_accessible :customer_bill_id, :name, :price
  belongs_to :customer_bill, :foreign_key => "customer_bill_id"
end 
```

我无法想象这些如何导致您的错误，但它们是我能够找到的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T03:10:11.970

错误告诉你问题是什么。没有可以找到的类 CustomerBill::CustomerBillLineItem。

1：我假设您没有在 customer_bills#new 操作中构建 customer_bill_line_item 实例，否则您将在那里看到相同的错误。

请通过检查您是否在新操作中的 @customer_bill 上构建 customer_bill_line_item 实例来确认，例如

```
3.times{@customer_bill.customer_bill_line_items.build} 
```

如果您再次遇到相同的错误，但在您的控制器构建线上，它会确认错误的含义是它无法通过 CustomerBill 找到类 CustomerBillLineItem

我怀疑 CustomerBillLineItem 类的文件名中有错字。确保您的课程位于名为 customer_bill_line_item.rb 的文件中，并且位于您的模型文件夹中，并且没有嵌套在任何其他文件夹中。可能范围在这里也是一个问题。

底线是 CustomerBillLineItem 没有正确命名或放置，这就是为什么你得到那个错误，告诉你它找不到所说的类。

# jquery - 触摸/滑动事件，包括在 iframe 上滑动并使其可滑动时

> ID：14744232
> 
> 赞同：0
> 
> 时间：2013-02-07T05:29:22.303
> 
> 标签：jquery, iframe, slider, touch, slide

我正在使用 touchslider.com，这是一个 jquery 插件，允许鼠标和触摸在页面区域上滑动，以获得一个不错的单页基本应用程序，其中可以在 4 个页面之间滑动

我遇到的问题是一张幻灯片上有一个 iFrame。因此，屏幕的这个区域变得不可滑动。任何人都可以提出任何建议吗？

我想问题更多是关于向 iframe 添加滑动效果。

谢谢

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:08:17.323

您是否还需要在 iframe 内滑动（可能向上/向下）？如果没有，您可以在 iframe 上覆盖一个透明的 div，这将防止触摸事件在框架中丢失。

# c++ - 如何在c ++ MACRO中传递类函数（ClassName :: function）引用

> ID：14744243
> 
> 赞同：-2
> 
> 时间：2013-02-07T05:30:17.720
> 
> 标签：c++, unit-testing, macros

我想创建一个有助于 C++ 单元测试的宏。我不想仅为测试目的创建新对象。**是否可以传递像 (ClassName::function) 这样的类函数引用？**

```
#define TEST(func_ptr,X,Expercted) \
(__extension__ ( \
{ \
  __typeof__(X) __x = (X); \
  __typeof__(Expercted) __y = (Expercted); \
  result= funct_ptr(__x);\
  //------- do some testing stuffs-----\
 } \
)) 
```

我有一个 A 类及其方法 square()

```
int main(){
  TEST(&A::square,2,4);
  return 0;
 } 
```

我想测试 square 函数是否返回真值。

**上面的代码给出了错误。如何解决问题。其他方式的解决方案是可观的**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:37:04.750

您正在传递一个**非静态成员函数指针**，它需要一个类实例来调用。如果将**其更改为静态成员或自由函数**，它应该可以正常工作。

```
class A{
    ...
    static bool square(...);
};

TEST(A::square,...); 
```

或者

```
bool square(...);

TEST(square,...); 
```

您的宏也有错字 - func_ptr vs funct_ptr

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T05:37:38.877

根据标准，您不能在不创建对象的情况下调用非静态成员函数。这就是为什么你应该创建一个(for ex. )的**对象**并像这样调用`A``A a`

```
A a;
TEST( std::bind( &A::square, &a ), 2, 4 ); 
```

如果您要问将宏用于此类目的是否是个好主意，我会告诉您-不。而是写一个函数。像这样

```
template< class F, class Ex >
bool test( F f, Ex expected ) {
    Ex res = f();
    return res == expected;
}
...
assert( test( std::bind( &A::square, &a, 2 ), 4 ) ); 
```

# php - 将域映射到现有子目录

> ID：14744263
> 
> 赞同：3
> 
> 时间：2013-02-07T05:32:29.427
> 
> 标签：php, dns, mapping

我有一个简单的 web 应用程序，允许用户在线创建和托管他们的简历。它是用运行在 LAMP 服务器上的 php 编写的。他们目前驻留在自己的子目录中，但我想编写功能以允许他们使用自己的自定义域。前任。如果他们有一个当前页面：[http://www.example.com/user1/page1](http://www.example.com/user1/page1)我希望他们能够拥有：[http://www.customdomain.com/page1](http://www.customdomain.com/page1)。这将允许他们从任一 URL 访问该站点，并能够选择哪个作为主域，即始终显示在地址栏中的那个。

通过我的 wordpress 安装，我使用一个插件来完成所有繁重的工作，但这个应用程序完全是在 php 中，并且希望能够滚动我自己的代码。我遇到了另一个解决方案：

/// 我觉得这里有几个问题，目前的答案是关于如何创建像username.tumblr.com这样的通配符子域，但是实现像username.com这样的自定义域需要几个步骤： 1\. username.com 需要指向您的服务器（例如使用 DNS A 记录）。2\. username.com 与用户数据一起存储在您的数据库中。3\. 在您的 PHP 代码中，您观察自定义域的 CGI 变量并采取适当的措施。您可能还需要配置您的服务器（apache？iis？nginx？）以将所有端口 80 流量（无论域）路由到您的 PHP 应用程序。///

我得到 #1，通过 wordpress 安装，我通常让我的客户将他们的域指向我的名称服务器，然后停放他们的域，然后进行映射。但我想编写一个脚本，像我的 wordpress 插件一样完成大部分繁重的工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-19T22:15:11.303

这是完全可能的。使用 LAMP，您需要查看引用 customdomain.com 的 apache httpd.conf 文件并查看，或添加`DocumentRoot`如下属性：

```
<VirtualHost 1.2.3.4:80>
ServerName customdomain.com
DocumentRoot /user1
</VirtualHost> 
```

[http://httpd.apache.org/docs/current/mod/core.html#documentroot](http://httpd.apache.org/docs/current/mod/core.html#documentroot)

# box-api - Box API 说明用户最大上传大小为 0

> ID：14744267
> 
> 赞同：1
> 
> 时间：2013-02-07T05:32:45.373
> 
> 标签：box-api

对于我试图通过 API 访问的用户，我从 /about/me 对 API 的请求中收到以下响应。

它指出用户的最大上传大小为 0，即使他的空间量列为 1073741824000，这似乎表明他可能正在制定[商业](https://www.box.com/pricing/)计划。

我应该如何根据这个值行事？这是否意味着不允许用户上传文件，或者他们没有限制？

```
{
    "type": "user",
    "id": "<redacted>",
    "name": "<redacted>",
    "login": "<redacted>",
    "created_at": "2012-01-31T18:16:08-08:00",
    "modified_at": "2013-02-04T17:41:51-08:00",
    "language": "en",
    "space_amount": 1073741824000,
    "space_used": 178518128089,
    "max_upload_size": 0,
    "status": "active",
    "job_title": "",
    "phone": "<redacted>",
    "address": "",
    "avatar_url": "<redacted>"
} 
```

编辑：更改了示例以显示原始 JSON，以删除有关解析误解值的任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:40:37.560

感谢您发现这一点。零是计算我们允许用户上传的最大文件大小的新方法的产物。我们正在即时计算，因此过去几周内的任何新用户都会将此字段留空。

对此的修复应该会在接下来的几天内发布。

# c# - 使用 foreachloop 将数据插入数据库

> ID：14744269
> 
> 赞同：0
> 
> 时间：2013-02-07T05:32:59.743
> 
> 标签：c#

# 我正在使用 foreach 循环

```
foreach(var x in items)
{
    // enter code here
} 
```

在我的代码中，我将数据发送到数据库假设在我的`items`列表中我有 10 条记录在发送 5 条记录后由于某些问题发送到数据库，发送数据失败如何回滚我发送到的所有数据`database`。

有什么办法可以处理这种情况-我正在使用实体数据模型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:35:17.090

> 如何回滚我发送到数据库的所有数据。

将事务与您的插入命令一起使用。如果您的目标数据库是 SQL Server，那么您会导致[SqlTransaction](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)带有`try/catch`块，因此如果发生异常，您可以`Rollback`进行事务。

来自 MSDN 的示例

```
private static void ExecuteSqlTransaction(string connectionString)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();

        SqlCommand command = connection.CreateCommand();
        SqlTransaction transaction;

        // Start a local transaction.
        transaction = connection.BeginTransaction("SampleTransaction");

        // Must assign both transaction object and connection 
        // to Command object for a pending local transaction
        command.Connection = connection;
        command.Transaction = transaction;

        try
        {
            command.CommandText =
                "Insert into Region (RegionID, RegionDescription) VALUES (100, 'Description')";
            command.ExecuteNonQuery();
            command.CommandText =
                "Insert into Region (RegionID, RegionDescription) VALUES (101, 'Description')";
            command.ExecuteNonQuery();

            // Attempt to commit the transaction.
            transaction.Commit();
            Console.WriteLine("Both records are written to database.");
        }
        catch (Exception ex)
        {
            Console.WriteLine("Commit Exception Type: {0}", ex.GetType());
            Console.WriteLine("  Message: {0}", ex.Message);

            // Attempt to roll back the transaction. 
            try
            {
                transaction.Rollback();
            }
            catch (Exception ex2)
            {
                // This catch block will handle any errors that may have occurred 
                // on the server that would cause the rollback to fail, such as 
                // a closed connection.
                Console.WriteLine("Rollback Exception Type: {0}", ex2.GetType());
                Console.WriteLine("  Message: {0}", ex2.Message);
            }
        }
    }
} 
```

# javafx-2 - JavaFx 表格视图中的 JSON 数据

> ID：14744271
> 
> 赞同：0
> 
> 时间：2013-02-07T05:33:04.920
> 
> 标签：javafx-2, tableview, javafx, fxml

我正在 javaFX 中开发应用程序。我想**在 tableview 中显示 json 响应**。我不知道该怎么做

我的文件如下：

项目.fxml

```
<TableView fx:id="mytableTableView" layoutX="384.0" layoutY="54.0" prefHeight="210.0"     prefWidth="202.0" tableMenuButtonVisible="true">
  <columns>
    <TableColumn prefWidth="75.0" text="ID" fx:id="idColumn" />
    <TableColumn prefWidth="75.0" text="Name" fx:id="nameColumn" />
    <TableColumn prefWidth="75.0" text="Identifier" fx:id="identifierColumn" />
    <TableColumn prefWidth="75.0" text="Description" fx:id="descriptionColumn" />
    <TableColumn prefWidth="75.0" text="CreatedOn" fx:id="created_onColumn" />
  </columns>
</TableView> 
```

项目负责人

```
@FXML
TableView<ProjectProperties> mytableTableView;
@FXML TableColumn<ProjectProperties,Integer> idColumn;
@FXML TableColumn<ProjectProperties,String> nameColumn;
@FXML TableColumn<ProjectProperties,String> identifierColumn;
@FXML TableColumn<ProjectProperties,String> descriptionColumn;
@FXML TableColumn<ProjectProperties,String> created_onColumn;

 public void initialize(URL url, ResourceBundle rb)
   {
 String responseJSON = HttpManager.getData(url, null);

  } 
```

我得到 json 响应，`responseJSON`因为我想在表格视图中显示。

我不知道如何将 json 绑定到表视图。

我可以将 json 转换为数组。

但是`setItems()`tableview 的方法需要 ObservableList 。

因此，任何建议和示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:33:01.263

我认为您可以使用 DataFx 项目，该项目具有使用 JSON 提供数据视图的方法： [http ://www.javafxdata.org/content/data-sources/](http://www.javafxdata.org/content/data-sources/)

另一个使用 DataFx 和 Rest 远程源的来源：http: [//fxapps.blogspot.fr/2012/04/fetching-rest-data-sources-with-datafx.html](http://fxapps.blogspot.fr/2012/04/fetching-rest-data-sources-with-datafx.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T14:25:04.933

```
It is possible for me to convert json to the array.

But the setItems() method of tableview require the ObservableList . 
```

然后只需从该数组创建 ObservaleLIst 并设置为表视图

示例代码：

```
ObservableList data = FXCollections.observableArrayList(array);

mytableTableView.setItems(data); 
```

# php - 如果第二个 php 页面从第一个加载到 iframe 中，则可以从第二个 php 页面访问的 php 页面中的变量

> ID：14744273
> 
> 赞同：0
> 
> 时间：2013-02-07T05:33:09.107
> 
> 标签：php, iframe

我有 2 个 php 页面。从第一个 php 页面（比如 1.php）我打印一个 iframe（显然使用 html）并将其源代码保持为第二个 php 页面（比如 2.php），所以我的问题是我是否可以使用初始化的变量在 2.php 的 1.php 中？就像在 1.php 我有一个变量 $name 那么我可以使用来自 2.php 本身的 $name 的值吗？如果不是，那么应该有什么比会话更好的选择（我正在使用免费服务器！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:40:51.813

不，

考虑导致页面呈现的事件序列：

1.  1.php被请求
2.  1.php执行，生成iframe
3.  iframe返回给浏览器，指向2.php
4.  2.php被请求
5.  2.php执行，生成HTML
6.  2.php的输出返回给浏览器

在浏览器知道它想要 2.php 之前，1.php 已经完成执行（并且忘记了它的所有变量）。

您可以使用 iframe 的 URL 中的查询字符串将变量传递给 2.php，例如`example.com/2.php?var1=val1&var2=val2`.

另一方面，我认为您应该重新考虑如何构建网站。例如，您可以使用`<div>`with`overflow: scroll`代替 iframe，这样就不需要第二个请求。您还可以考虑使用`$_SESSION`来跟踪一些用户数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:35:51.633

您可以在该 iframe 的该 url 中传递该变量，然后您可以在 iframe 页面中访问该变量 - **page.php?var1=value1**

例如：

```
echo "<iframe src='sitename.com.au/directory/app/pagename.cfm?var1='$val'
        width='100%' scrolling='vertical'></iframe>"; 
```

# workflow - alfresco 用户组与 jbpm swinlane、pooledActors 之间的映射

> ID：14744281
> 
> 赞同：0
> 
> 时间：2013-02-07T05:33:50.210
> 
> 标签：workflow, alfresco, jbpm

当我在**jbpm中使用“** **Pooled Review and Approve** ”工作流程时，我选择了一个“用户组”。在启动工作流时为“用户组”的成员创建工作流任务。

 **我的理解是

> 选定的 alfresco 用户组映射到 jbpm 泳道，尤其是这种工作流类型的 pooledActors。

但我不知道映射在哪里。

我的要求是不允许根据标准为“用户组”的某些成员创建任务。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:36:39.997

jbpm 泳道位于您的工作流所在的 jbpm xml 文件中......示例如下：

```
 <swimlane name="reviewer">
       <assignment class="org.alfresco.repo.workflow.jbpm.AlfrescoAssignment">
          <actor>#{bpm_assignee}</actor>
       </assignment>
    </swimlane> 
```

或者

```
 <swimlane name="initiator" /> 
```

如果您想在特定的 alfresco 工作流程“Pooled Review and Approve”中更改 pooledActors，您应该查看：

```
/alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/workflow 
```

在那里你会找到工作流 bpmn20.xml 定义文件。为了您的目标，您应该创建两个独立的组，“用户组”和“用户不允许组”。

因此，您可以检查您的代码，如果用户在“用户不允许的组”中，则不允许同一用户执行该操作。希望我理解你的问题。**

# mysql - mysql查询以查找一段时间内的固定总和

> ID：14744282
> 
> 赞同：0
> 
> 时间：2013-02-07T05:33:53.673
> 
> 标签：mysql, sum, period

我有一个带有以下列的 mysql 表

order_id customer_id total_amount date_added

现在，我想查询某个特定客户，以了解该客户在他/她的订单历史的六个月内是否做出了超过或等于 12000 美元的订单。该时期不是最近的。

有什么解决办法吗？

问候， 迪彭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:41:48.540

```
select sum(total_amount) >= 12000 over_12000
from mytable
where customer_id = nnn
and date_added between 'YYYY-MM-DD' and date_add('YYYY-MM-DD', interval 6 month) 
```

将 nnn 替换为特定的客户 ID，将 YYYY-MM-DD 替换为您感兴趣的 6 个月期间的开始。

更新：

这将使用客户最后一个订单之前的 6 个月时间：

```
select sum(total_amount) >= 12000 over_1200
from mytable join (select max(date_added) last_date
                   from mytable
                   where customer_id = nnn) last
where customer_id = nnn
and date_added between last_date and date_sub(last_date, interval 6 month) 
```

更新 2：

```
select m1.date_added end_date, sum(m2.total_amount) >= 12000 
from mytable m1 join mytable m2 on m2.date_added between date_sub(m1.date_added, interval 6 month) and m1.date_added and m1.customer_id = m2.customer_id
where m1.customer_id = nnn
group by end_date
order by end_date 
```

# regex - 正则表达式替换 URL 中的 &

> ID：14744285
> 
> 赞同：0
> 
> 时间：2013-02-07T05:34:20.597
> 
> 标签：regex, url-rewriting, http-status-code-301

由于一些错误，我们的网站在 url 中有带有 & 的链接。例如 /movies-&-plays/find/。然而，这会引发 404 导致网站管理员出现大量断开的链接，因为这在我们的应用程序中无法处理。有没有办法将这些类型的 url 中的 '&' 替换为 'and'，即只有那些带有 /find/ 的 url。这样就可以编写一个正则表达式来编写一个 301 重定向到所有此类 URL 到带有 'and' 而不是 & 的 url。例如 /movies-&-plays/find/ 必须重定向到 /movies-and-plays/find/。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:26:13.523

```
perl -pe 's/(\/[^\/ &]*)&(?=[^\/ ]*?\/find\/)/$1and/g' FILENAME 
```

当给出这个输入时：

```
http//www.web.com/hello&goodbye/find/

///////&/junk/to/test
////&/find/ 
```

产生以下输出：

```
http//www.web.com/helloandgoodbye/find/

///////&/junk/to/test
////and/find/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:42:46.843

对于匹配的 URL ，`([^&]+&[^&]*)+/find/` 全部替换`&`为`and`.

# c# - 从桌面应用程序获取 Windows 8 当前的强调色

> ID：14744287
> 
> 赞同：8
> 
> 时间：2013-02-07T05:34:26.933
> 
> 标签：c#, windows-8

我想获得用户指定的地铁颜色，只是为了自动使桌面应用程序适应主要的地铁风格。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-29T07:34:49.007

Arman Stepanyan 库很合适，但我决定创建一个简单的示例项目，它无需其他库即可实现颜色检索。它的灵感来自他的图书馆。

您可以在 GitHub 中访问它：[https ://github.com/VladimirAmiorkov/Windows-8-8.1-start-screen-colors-into-desktop-application](https://github.com/VladimirAmiorkov/Windows-8-8.1-start-screen-colors-into-desktop-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:54:28.237

感谢 Jim O'Neil 的建议，我使用它并编写了一个包含所有当前已知的沉浸式颜色列表的小库。 [Windows 8 库](http://win8lib.codeplex.com/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T16:49:09.390

没有 API 可用于使用当前选定的 Windows 主题颜色。

# iphone - 在 ios 中显示国家/地区的下拉列表

> ID：14744289
> 
> 赞同：0
> 
> 时间：2013-02-07T05:34:29.817
> 
> 标签：iphone, ios, uitextfield

我必须在 ios 的文本字段中显示国家/地区的下拉列表。我应该如何显示此列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:38:12.107

1.  在`UITextField`.
2.  单击此按钮时，您必须加载一个`UIView`or `UITableView`，这将完全归结为您的文本字段。
3.  此自定义`UIView`或`UITableView`将充当您的下拉菜单。
4.  使用完成后，您可以隐藏或删除它。

您可以使用许多其他方式来代替下拉菜单。如果可能，我建议您使用这些方法。

你可以参考[这个](http://code.google.com/p/dropdowndemo/downloads/detail?name=dropdowndemo.zip&can=2&q=)

# django-templates - 带有 Django 模板的动态标签

> ID：14744290
> 
> 赞同：0
> 
> 时间：2013-02-07T05:34:35.017
> 
> 标签：django-templates

我是 Django 模板的新手，需要一些建议。

我正在尝试根据 url 路径更改 H1。我提出的解决方案是查找路径并循环遍历数组以检查匹配。

这是我将在配置文件中维护的示例数组。

```
page_heading = {
  'contact': 'Contact Me',
  'test': 'It\'s only a test',

} 
```

因此，在此示例中，如果路径是 /contact，则 h1 标头将读取 Contact Me。

那么，这是正确的策略吗？我找不到任何关于如何使用 Django 模板执行此操作的代码示例。也许我正在搜索错误的术语。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:40:50.980

您也许可以做的是为标题内容维护一个单独的模板，并通过在视图中传递一个参数来包含它。

例如，假设您有 2 种类型的标题，因此将它们放在两个文件中，并通过视图您可以说`{'heading': 'template-name'}`

在主要的 Django 模板中

`include {{heading}}`

那就是它。

另一种方法可能是在视图中定义类名并使用与上述类似的方式将其注入模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:16:09.400

如果它只是标题的值（“联系我们”、“关于我们”），
那么您可以在模板中使用这一行 >>
`<h1><a href="{{ heading_path }}">{{ heading_value }}</a></h1>`
以及在呈现该模板的视图中，您需要做的就是添加一个变量`heading_path`并将`heading_value`字典一起传递`RequestContext`

# r - 创建一个新变量，该变量从现有的数据框中获取不同的列，具体取决于分组变量

> ID：14744291
> 
> 赞同：4
> 
> 时间：2013-02-07T05:34:37.777
> 
> 标签：r

我不知道从哪里开始这段代码。我想将一个新变量附加到现有数据框中，该数据框根据分组变量采用不同的列。例如，假设我有列

```
 A  B  C  D  E  F
    1  2  3  6  11 12
    1  7  5  10 8  9
    2  19 2  4  5  6
    2  8  4  3  1  1 
```

我想附加一个新列“G”，如果 A 为 1，则为 B 列，如果 A 为 2，则为 D 列

```
 A  B  C  D  E  F   G
    1  2  3  6  11 12  2 
    1  7  5  10 8  9   7
    2  19 2  4  5  6   4
    2  8  4  3  1  1   3 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T05:46:49.683

这里有几个选项。

假设您的 data.frame 被调用`DF`

### 基本`[`和索引

```
# make everything in G =  B
DF$G <- DF$B
# replace those cases where A==2 with D
DF$G[DF$A==2] <- DF$D[DT$A==2] 
```

### 使用 ifelse

只`ifelse`需要一个陈述，因为 A 是 1 或 2

```
DF$G <- ifelse(DF$A==2, DF$D, DF$B) 
```

### 使用数据表

我喜欢 data.table，因为内存效率和编码优雅

```
library(data.table)
# create a data.table with A as the key

DT <- data.table(DF, key = 'A')
# where the key (A) == 1 ], then assign G = B
DT[.(1), G := B]
# and where the key (A) == 2, then assign G = D
DT[.(2), G := D] 
```

精美优雅！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T05:40:57.340

假设你`data.frame`被称为“mydf”，你可以使用`ifelse`：

```
within(mydf, {
  G <- ifelse(A == 1, B,
              ifelse(A == 2, D, 
                     0))
})
#   A  B C  D  E  F G
# 1 1  2 3  6 11 12 2
# 2 1  7 5 10  8  9 7
# 3 2 19 2  4  5  6 4
# 4 2  8 4  3  1  1 3 
```

# apache - tomcat 服务器未在 Linux 中启动

> ID：14744292
> 
> 赞同：1
> 
> 时间：2013-02-07T05:34:40.423
> 
> 标签：apache, tomcat, tomcat5.5

我已经在我的 linux 系统中安装了 tomcat 5.5.17 版。

当我试图启动tomcat时，我得到了以下异常。

```
[root@localhost bin]# ./catalina.sh run
Using CATALINA_BASE:   /usr/local/tomcat
Using CATALINA_HOME:   /usr/local/tomcat
Using CATALINA_TMPDIR: /usr/local/tomcat/temp
Using JRE_HOME:       /usr/lib/jvm/java
Exception in thread "main" java.lang.NoClassDefFoundError: while resolving class: org.apache.catalina.startup.Bootstrap
   at java.lang.VMClassLoader.resolveClass(java.lang.Class) (/usr/lib/libgcj.so.5.0.0)
   at java.lang.Class.initializeClass() (/usr/lib/libgcj.so.5.0.0)
   at java.lang.Class.forName(java.lang.String, boolean, java.lang.ClassLoader) (/usr/lib/libgcj.so.5.0.0)
   at java.lang.Class.forName(java.lang.String) (/usr/lib/libgcj.so.5.0.0)
   at gnu.gcj.runtime.FirstThread.run() (/usr/lib/libgcj.so.5.0.0)
   at _Jv_ThreadRun(java.lang.Thread) (/usr/lib/libgcj.so.5.0.0)
   at _Jv_RunMain(java.lang.Class, byte const, int, byte const, boolean) (/usr/lib/libgcj.so.5.0.0)
   at __gcj_personality_v0 (/usr/local/tomcat/bin/java.home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre)
   at __libc_start_main (/lib/tls/libc-2.3.3.so)
   at _Jv_RegisterClasses (/usr/local/tomcat/bin/java.home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre)
Caused by: java.lang.ClassNotFoundException: javax.management.ObjectName not found in [file:/usr/local/tomcat/bin/bootstrap.jar, file:/usr/local/tomcat/bin/commons-logging-api.jar, file:/usr/share/java/libgcj-3.4.2.jar, file:./, core:/]
   at java.net.URLClassLoader.findClass(java.lang.String) (/usr/lib/libgcj.so.5.0.0)
   at gnu.gcj.runtime.VMClassLoader.findClass(java.lang.String) (/usr/lib/libgcj.so.5.0.0)
   at java.lang.ClassLoader.loadClass(java.lang.String, boolean) (/usr/lib/libgcj.so.5.0.0)
   at _Jv_FindClass(_Jv_Utf8Const, java.lang.ClassLoader) (/usr/lib/libgcj.so.5.0.0)
   at java.lang.Class.forName(java.lang.String, boolean, java.lang.ClassLoader) (/usr/lib/libgcj.so.5.0.0)
   at _Jv_BytecodeVerifier.verify_instructions_0() (/usr/lib/libgcj.so.5.0.0)
   at _Jv_VerifyMethod(_Jv_InterpMethod) (/usr/lib/libgcj.so.5.0.0)
   at _Jv_PrepareClass(java.lang.Class) (/usr/lib/libgcj.so.5.0.0)
   at _Jv_WaitForState(java.lang.Class, int) (/usr/lib/libgcj.so.5.0.0)
   at java.lang.VMClassLoader.linkClass0(java.lang.Class) (/usr/lib/libgcj.so.5.0.0)
   at java.lang.VMClassLoader.resolveClass(java.lang.Class) (/usr/lib/libgcj.so.5.0.0)
   ...9 more
[root@localhost bin]# 
```

任何人都可以帮助我进行此操作吗？

谢谢。

# unix - 使用 sed 删除停用词列表中的单词（为 sed 提供要从文本文件中删除的参数列表）

> ID：14744293
> 
> 赞同：3
> 
> 时间：2013-02-07T05:34:43.643
> 
> 标签：unix, sed, awk, grep

因此，我们都知道 sed 非常擅长查找和替换文件中所有出现的单词：

```
sed -i 's/original_word/new_word/g' file.txt 
```

但是，有人可以告诉我如何从文件（类似于 grep -f）中为 sed 提供“original_words”列表吗？我只想用''替换所有（删除它们）。

原始单词表文件只是一堆由行分隔的停用词（wordlist.txt）：

```
a
about
above
according
across
after
afterwards 
```

这将是一种获取停用词列表并从语料库中删除它们的简单方法（对于清理数据很有用）。

file.txt 看起来像

```
05ricardo   RT @shakira: Immigration reform isn't about politics. It's about people mothers, kids. Obama is working for all of them. http://t.co/rAW ...    0
05ricardo   ?@ItsReginaG: Don't vote Obama. Because you will lose jobs, and die.? Lol   0
05ricardo   ?@shakira: Obama doubles Pell Grants - 700,000 more Latinos get help to go to college. Meet Johanny Adames http://t.co/EMg8NLGl Shak?. ?    -1
05rodriguez_a   My Comm teacher gave me a copy of Obama's speech that he gave the other night and I cried while reading it. It was that moving. -3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:31:13.037

您也可以让 sed 为您编写 sed 脚本（使用 GNU sed 测试）：

```
<stopwords sed 's:.*:s/\\b&\\b//:g' | sed -f - file.txt 
```

输出：

```
05ricardo   RT @shakira: Immigration reform isn't  politics. It's about people mothers, kids. Obama is working for all of them. http://t.co/rAW ...    0
05ricardo   ?@ItsReginaG: Don't vote Obama. Because you will lose jobs, and die.? Lol   0
05ricardo   ?@shakira: Obama doubles Pell Grants - 700,000 more Latinos get help to go to college. Meet Johanny Adames http://t.co/EMg8NLGl Shak?. ?    -1
05rodriguez_a   My Comm teacher gave me  copy of Obama's speech that he gave the other night and I cried while reading it. It was that moving. -3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:03:21.003

这是一种使用方法`GNU sed`：

```
while IFS= read -r word; do sed -ri "s/( |)\b$word\b//g" file; done < wordlist 
```

文件内容：

```
how about I decide to look at it afterwards. What
across do you think? Is it a good idea to go out and about? I 
think I'd rather go up and above. 
```

结果：

```
how I decide to look at it. What
 do you think? Is it good idea to go out and? I 
think I'd rather go up and. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:40:15.613

首先，不是所有`sed`support `-i`，但这不是必要的选项，因为以一般方式提供该功能是微不足道的。一个简单的选项（假设一个非 csh 系列的 shell）：

```
inline() { f=$1; shift; "$@" < $f > $f.out && mv $f.out $f; } 
```

然后，进行替换（您尚未指定要如何处理单词分隔符，因此如果“foo”在黑名单中，“bar foo baz”将在“bar”和“baz”之间有两个空格）使用 awk 或 perl 都非常简单：

```
awk 'NR==FNR{a[$0]; next} {for( i in a ) gsub( i, "" )} 1' original-words file.txt
perl -wne 'if( $ARGV = $ARGV[0] ){ chop; push @no, $_; next } 
    foreach $x( @no ) {s/$x//g } print ' original-words file.txt 
```

如果您对结果感到满意，请使用`-i`with `perl`（不是所有`sed`support `-i`，但所有`perl`> 5.0），或者您可以使用以下命令修改文件：

```
inline file.txt awk 'NR==FNR{a[$0]; next} 
    {for( i in a ) gsub( i, "" )} 1' original-words - 
```

`sed`这些解决方案中的任何一个都比调用黑名单中的每个单词要快得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T05:58:22.380

或许这

```
#!/bin/sh
while read k
do
  sed -i "s/$k//g" file.txt
done < dict.txt 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-21T16:18:50.380

```
cat file.txt | grep  -vf wordlist.txt 
```

# c# - 如何获取 Windows 8 Metro 应用程序元素属性

> ID：14744295
> 
> 赞同：0
> 
> 时间：2013-02-07T05:34:54.750
> 
> 标签：c#, windows-8, windows-store-apps

我将使用 C# UI 自动化自动化 Windows Metro 应用程序。如何获取 Windows 8 Metro 应用程序元素属性。（有什么工具可以获取属性吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T07:20:11.097

您可以使用与 Windows Kit 捆绑在一起的“inspect.exe”来获取 UI 中存在的元素。更多信息在这里 - [http://guriyakalyani.blogspot.in/2013/05/metro-apps-automation.html](http://guriyakalyani.blogspot.in/2013/05/metro-apps-automation.html)

# html - 背景职位

> ID：14744297
> 
> 赞同：1
> 
> 时间：2013-02-07T05:35:06.717
> 
> 标签：html, css, background-image, background-position

我用来制作 3 方向动画的这张图片。我只需要显示此图像的第一个字符。好吧，我正在使用背景位置-

```
background-position:0px 200px; 
```

但它在这里显示了完整的图像。

**风格**

```
position:absolute;
    top: 40px;left: 40px;
background-position: 0px 200px; 
```

图片- ![我想用于第一个字符的图像](../Images/a431726ec065914c057a4d0a1d4b0e29.png)

请指导我完成 Js fiddle。 [小提琴](http://jsfiddle.net/stackmanoz/9RYph/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:48:33.320

试试这个

```
img{
clip:rect(0px,300px,auto,0px);
position:absolute;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:38:48.443

您正在使用`img`但`background-position`属性不会应用于`img`元素，您需要`background-image`在 CSS 中使用属性并且需要在此处设置元素的宽度，因此如果字符宽度是 , 的周围`100px`和高度，则分别`200px`设置`height`和`width`as`200px`和`100px`

```
<div></div>

div {
   height: 200px;
   width: 100px;
   background-image: url();
   background-position: ;
   background-repeat: no-repeat;
   /* Other styles goes here */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T05:38:56.977

您必须将此图像作为背景放在 div 中，然后使用`background-position`属性。

`background-position`仅当您使用背景图像时才有效。

**[现场演示](http://jsfiddle.net/ranasaani/9RYph/5/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T05:49:04.560

看到这个链接我希望这对你有帮助：http: [//jsfiddle.net/9RYph/7/](http://jsfiddle.net/9RYph/7/)

```
div {

    top: 40px;left: 40px;
    background-size:100%;
    background:url('http://i.stack.imgur.com/PuAjg.jpg');
    width: 50%;
    height: 600px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T05:39:04.270

你需要在`#character`id中设置背景图片：

```
background: url(http://img391.imageshack.us/img391/432/scorpionortholp0.jpg) 
```

然后添加`width`和`height`属性以满足您的需要。

# solr - Solr 中与 DtSearch 选项对应的高级搜索选项

> ID：14744299
> 
> 赞同：4
> 
> 时间：2013-02-07T05:35:16.297
> 
> 标签：solr, solrnet, fuzzy-search, stemming, advanced-search

我们使用 solrnet 作为 .net Solr 客户端库，将应用程序中的搜索和索引模块从 DtSearch 替换为 Solr。

我们对 Solr/Lucene 比较陌生，需要一些帮助/指导来了解 Solr 中更高级的搜索选项。

当前应用程序使用 DtSearch 支持以下搜索选项：

1）单词或短语

2) 准确的单词或短语

3）不是这些词或短语

4）一个或多个单词（“A” OR “B” OR “C”）

5）单词与另一个单词的n个单词的接近度

6）数值范围 - 从 - 到

7)选项

. 词干（搜索* 查找搜索或搜索）

. 同义词（搜索和查找查找或查找）

. 在 n 个字母内模糊（p%arts 找到 paris）

. 语音同音异义词（#Smith 还可以找到 Smithe 和 Smythe）

例如，为以下用例生成的搜索查询将发布到 DtSearch：

1.  查询词语：通用集合

2.  准确的短语：linq

3.  不是这些话：sql

4.  这些词中的一个或多个：ICollection 或 ArrayList 或 Hashtable

5.  接近度： csharp 在 4 个语言单词内

6.  选项：

    一种。词干

    湾。代名词

    C。2个字母内模糊

    d。同音异义词

    搜索查询：**generic* collection* generic& collection& #generic #collection g%%eneric c%%ollection "linq" -sql ICollection OR ArrayList OR Hashtable csharp w/4 语言**

我们已经能够使用 Solr 进行简单的搜索（文件内容中的单数词搜索）。现在我们需要用 Solr/Lucene 替换这些选项。

任何人都可以就我们应该寻找什么/在哪里提供一些指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:57:40.833

1.  单词或短语
    Solr 提供对字段和跨字段的查询支持，并通过变量提升来控制相关性。Solr 还提供各种查询，如短语查询、通配符、匹配前缀

2.  准确的单词或短语
    您可以自定义 Solr 以处理短语匹配和准确的单词匹配。

3.  不是这些词或短语
    [否定查询](http://lucidworks.lucidimagination.com/display/lweug/Boolean+Operators)- Solr 提供对布尔运算符的支持，其中包括使用`-`或使用的否定查询`Not`

4.  一个或多个单词（“A” OR “B” OR “C”）
    [布尔运算符](http://lucidworks.lucidimagination.com/display/lweug/Boolean+Operators)- Solr 提供对布尔运算符的支持，其中包括`AND (+)` `OR`语法

5.  与另一个单词的 n 个单词的邻近度
    [搜索](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_search_for_one_term_near_another_term_.28say.2C_.22batman.22_and_.22movie.22.29)- Solr 支持通过 ~ 运算符后跟 slop（邻近度差异）进行邻近度查询

6.  数字范围 - 从 - 到 [范围查询](http://wiki.apache.org/solr/SolrQuerySyntax)- Solr 支持数字和日期的范围查询。

7.  选项

    *   Stemming(search* 查找搜索或搜索) [Stemmer](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Stemming) - Solr 具有内置的词干分析器，可以直接开箱即用。它还允许为各种语言定义新的词干分析器
        详细[语言分析](http://wiki.apache.org/solr/LanguageAnalysis)支持

    *   同义词（搜索和查找查找或查找）
        [同义词](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory) - Solr 通过基于文件的方法支持同义词处理。

    *   在 n 个字母内模糊（p%arts 找到巴黎）
        [模糊搜索](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Fuzzy%20Searches)- Solr 支持使用 ~ 运算符进行基于模糊的搜索

    *   语音同音异义词（#Smith 还可以找到 Smithe 和 Smythe）
        [语音搜索](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.PhoneticFilterFactory)- Solr 提供[语音](http://lucidworks.lucidimagination.com/display/solr/Phonetic+Matching)搜索，允许匹配拼写错误的单词。它具有对 4 个可以定制的过滤器的开箱即用支持。

[AnalyzersTokenizersTokenFilters](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)的完整列表

# sharepoint - Sharepoint 2010、Infopath 2010 中的人员选择器回发问题

> ID：14744301
> 
> 赞同：1
> 
> 时间：2013-02-07T05:35:30.460
> 
> 标签：sharepoint, sharepoint-2010, infopath, infopath2010

我有一个以信息路径形式定义的列表。它包含一个人员选择器和一个禁用的日期时间选择器。在将表单发布到服务器端（在浏览器中）后，当我将用户名放入人员选择器并解决它时，这会导致轻微的刷新或回发，并且日期时间选择器变得可见（已禁用）。此问题可能是由于回发问题。请帮我解决这个奇怪的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:10:34.413

您是否对 DateTime 选择器应用了任何规则，例如验证或格式化？如果这样做，请检查日期时间选择器属性并转到“浏览器表单”选项卡。选中始终选项，以便在每次回发时重新计算该字段。

如果这不能解决问题，请提供有关这两个字段的更多详细信息。

# php - 在完成之前处理部分 POST 请求，这可能吗？

> ID：14744302
> 
> 赞同：0
> 
> 时间：2013-02-07T05:35:30.370
> 
> 标签：php, apache, node.js, http, long-polling

```
curl -v -F "file=@bigfile.zip" http://server/handler 
```

我知道“bigfile.zip”将被分成几个部分并逐部分发送到服务器，这可能需要很长时间。那么我怎么能在最后一部分发送之前阅读第一部分呢？如果 Apache/Nginx + PHP/Python 无法做到这一点，那么使用 node.js 构建另一个 HTTP 服务器怎么样？

我想找到的是一个“长请求”（另一边，如“长轮询”）。浏览器可以通过使用存在的长请求立即写入服务器，而无需创建新请求。

有什么建议吗？

==================

连接：保持活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:01:01.673

如果我正确阅读了您的问题，您希望在上传时开始处理 zip 文件中的数据，然后再上传实际完成。

您需要某种[流式 zip 解析器](https://npmjs.org/package/unzip)，它可以获取传入的字节流，确定特定文件何时结束，并应用适当的解压缩。

[![zip 文件的物理布局](../Images/6b16017324b4a376c91f0c011ff9467e.png)](http://en.wikipedia.org/wiki/Zip_(file_format))

您会注意到，在文件条目的开头，有一个 30+ 字节的[标题](http://en.wikipedia.org/wiki/Zip_(file_format)#File_headers)（深蓝色）会告诉您压缩文件的长度。您可以读取传入的字节，直到达到该长度，此时您处理下一个文件的标题并重复。

在读取传入字节时，您将它们交给解压缩器。Zip 文件支持多种类型的压缩，因此您必须使用文件头指定的一种。

最后，你的解压器会给你一个解压字节流。您可以将它们写入磁盘或对它们执行其他操作。

Node 非常适合处理流。Apache 和 Nginx 并没有真正让您对实现目标所需的请求周期进行控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:16:48.487

这是 node.js 中长期 http post 请求的示例代码

var http = require('http');

```
var server = http.createServer(function(req, res) {
    if(req.method == 'POST' && req.url == '/handler') {
        req.on('data', function(data) {
          // i'm getting chunks of data in here !
        });
        req.on('end', function() {
          res.writeHead(200, 'OK');
          res.end('Got your file\n');
        });
    }
    else {
        res.writeHead(404, 'Not Found');
        res.end();
    }
});
server.listen(80); 
```

当然这是最基本的例子，通过 http 上传文件稍微复杂一些。这就是为什么使用类似[强大的](https://github.com/felixge/node-formidable)东西会很有用的原因。

使用节点，一旦您获得数据，您就可以开始将其发送到可以处理它们的其他地方，即使其余数据仍在到来。通常你会使用流

这是一个如何做到这一点的例子[http://debuggable.com/posts/streaming-file-uploads-with-node-js:4ac094b2-b6c8-4a7f-bd07-28accbdd56cb](http://debuggable.com/posts/streaming-file-uploads-with-node-js:4ac094b2-b6c8-4a7f-bd07-28accbdd56cb)

# c++ - boost 是否支持 c++11 的 std::tuple 的序列化？

> ID：14744303
> 
> 赞同：14
> 
> 时间：2013-02-07T05:35:31.443
> 
> 标签：c++, serialization, boost, c++11, boost-serialization

boost 是否支持 c++11 的 std::tuple 的序列化？

我在 /boost/serialization/ 找不到 tuple.hpp 头文件

我正在使用 boost 1.52.0（如果需要，很高兴升级，但似乎[1.53 版的更改](http://www.boost.org/users/history/version_1_53_0.html)与此无关）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T01:53:44.140

开箱即用，没有。您必须自己编写序列化程序。幸运的是，有人已经这样做了：

[C++0x tuple boost 序列化](https://sydius.me/2011/02/c0x-tuple-boost-serialization/)（也在[github](https://github.com/Sydius/serialize-tuple)中）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-09T10:02:32.803

这是另一个实现：

[https://github.com/galaxyeye/atlas/blob/master/atlas/serialization/tuple.h](https://github.com/galaxyeye/atlas/blob/master/atlas/serialization/tuple.h)

使用测试代码：

[https://github.com/galaxyeye/atlas/blob/master/libs/serialization/test/tuple.cpp](https://github.com/galaxyeye/atlas/blob/master/libs/serialization/test/tuple.cpp)

请享用 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-09T00:19:14.243

使用[C++17 的折叠表达式](https://en.cppreference.com/w/cpp/language/fold)，您可以轻松实现序列化程序：

```
template <typename Archive, typename... Types>
void boost::serialization::serialize(Archive &ar, std::tuple<Types...> &t, const unsigned int)
{
    std::apply([&](auto &...element)
                { ((ar & element), ...); },
                t);
} 
```

基于[这个答案](https://stackoverflow.com/a/54053084/4184203)。

# javascript - 在three.js中放置相机WRT 3d对象

> ID：14744310
> 
> 赞同：2
> 
> 时间：2013-02-07T05:35:52.830
> 
> 标签：javascript, vector, matrix, three.js, webgl

我有一个移动和旋转的物体，我希望相机在它后面保持一定的距离。为了清楚起见，我正在画一架飞机，并希望相机始终看着它的后部。（除非用户拖动鼠标，例如在飞机飞行时查看飞机的顶部）。

所以说我已经设置了飞机的位置和旋转（THREE.Object3D 的实例）：

```
airplane.position = {x: 1, y:2, z: 3};
airplane.rotation = {x: Math.PI/4, y:1.2, z: 0}; 
```

并且说，当旋转和位置为（0,0,0）时，相机位于（5,0,0），（即飞机中心后面5个单位），找到位置向量的最简单方法是什么？把相机设在？

谢谢

对不起，乱七八糟的代码，我把它砍死了。我会为它制作一个 jsfiddle，但没有服务器来托管three.js...

```
$(function(){
    var camera1, camera2, scene, renderer, viewPort;
    var objectManager;
    var views = [];
    var vpWidth, vpHeight;
    init();
    animate();
    updateSize();
    function updateSize(){
        vpWidth = viewPort.innerWidth();
        vpHeight = viewPort.innerHeight();
    }
    function init() {
        viewPort = $('#viewPort');
        objectManager = new ObjectManager();

        views[0] = new View(viewPort, objectManager);
        var view = views[0];
        view.fov = 20;
        view.proportions.height = 0.5;
        view.proportions.bottom = 0.5;
        view.init();
        views[1] = new View(viewPort, objectManager);
        var view = views[1];
        view.fov = 10;
        view.proportions.height = 0.5;
        view.init();
        view.updateCamera = function(){

            //-----------------------------------------------------
            // when the user drags the mouse, (not yet implemented)
            // the following camera position numbers would change
            // so that he could view for example the top of the
            // airplane as it flies
            //-----------------------------------------------------
            this.camera.position.set( 5,5,5 );

            //-----------------------------------------------------
            // This line does not work as expected: the airplane
            // does not stay in the center of the view but follows
            // some sort of curved path with respect to the camera
            //-----------------------------------------------------
            this.camera.lookAt(objectManager.airplane.position);

            this.camera.updateProjectionMatrix();
        };
        scene = new THREE.Scene();
        objectManager.addTo(scene);

        objectManager.airplane.add(views[1].camera);

        //-----------------------------------------------
        // The following two lines *do* work correctly //
        //-----------------------------------------------
        views[1].camera.position.set( 0,0,5 );
        views[1].camera.lookAt(objectManager.airplane.position);

        var ambientLight = new THREE.AmbientLight(0x808080);
        scene.add(ambientLight);        

        var pointLight = new THREE.PointLight(0x808080);
        pointLight.position = {x: 100, y: 100, z: 100};
        scene.add(pointLight);      

        renderer = new THREE.WebGLRenderer();
        renderer.setClearColorHex(0x000000, 1);
        renderer.setSize( viewPort.innerWidth(), viewPort.innerHeight() );
        viewPort.get(0).appendChild(renderer.domElement);
    }

    function animate() {
        requestAnimationFrame( animate );
        render();
    }
    function render() {
        objectManager.tick();
        var view;
        for (var i in views){
            view = views[i];
            view.updateCamera();
            pixels = view.pixels;
            renderer.setViewport(pixels.left, pixels.bottom, pixels.width, pixels.height);
            renderer.setScissor(pixels.left, pixels.bottom, pixels.width, pixels.height);
            renderer.enableScissorTest(true);
            renderer.render( scene, view.camera );
        }
    }
});
function View(vp, om){
    this.objectManager = om;
    this.viewPort = vp;
    this.fov = 30;
    this.proportions = { left: 0, bottom: 0, height: 1, width: 1 };
    this.pixels = { left: 0, bottom: 0, height: 0, width: 0, aspect: 0 };
    this.aspect;
    this.init = function(){
        this.camera = new THREE.PerspectiveCamera( 
                this.fov, 
                this.viewPort.innerWidth() / this.viewPort.innerHeight(), 
                0.1, 10000 
        );
        this.pixels.left = Math.floor(this.proportions.left * this.viewPort.innerWidth()); 
        this.pixels.width = Math.floor(this.proportions.width * this.viewPort.innerWidth()); 
        this.pixels.bottom = Math.floor(this.proportions.bottom * this.viewPort.innerHeight()); 
        this.pixels.height = Math.floor(this.proportions.height * this.viewPort.innerHeight()); 
        this.pixels.aspect = this.pixels.width / this.pixels.height;
        this.camera.position.y = 0;
        this.camera.position.z = 10;
        this.camera.aspect = this.pixels.aspect;
        this.camera.updateProjectionMatrix();
    };
    this.updateCamera = function(){};
}

function newCube(dims, pos, cols, colAss){
    var mesh;
    var geometry;
    var materials = [];
    geometry = new THREE.CubeGeometry( dims.x, dims.y, dims.z );
    for (var i in cols){
        materials[i] = new THREE.MeshLambertMaterial( { color: cols[i], ambient: cols[i], overdraw: true } );
    }
    geometry.materials = materials;
    for (var i in colAss){
        geometry.faces[i].materialIndex = colAss[i];
    }
    mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial( materials ) );
    mesh.position = pos;
    return mesh;
}
function ObjectManager(){
    this.airplane;
    var fuselage;
    var tail;
    var grid;
    this.addTo = function(scene){
        this.airplane = new THREE.Object3D();
        fuselage = newCube(
                {x: 1, y: 0.1, z: 0.1}, 
                {x: 0, y: 0, z: 0},
                [0xffff00, 0x808000, 0x0000ff, 0xff00000, 0xffffff, 0x808080],
                [0, 1, 2, 3, 4, 5]
        );
        this.airplane.add(fuselage);
        tail = newCube(
                {x: 0.15, y: 0.2, z: 0.05}, 
                {x: 0.5, y: 0.199, z: 0},
                [0xffff00, 0x808000, 0x0000ff, 0xff00000, 0xffffff, 0x808080],
                [0, 1, 2, 3, 4, 5]
        );
        this.airplane.add(tail);
        scene.add( this.airplane );

        grid = new THREE.Object3D();

        var geometry = new THREE.Geometry();
        geometry.vertices.push(new THREE.Vector3( - 200, 0, 0 ) );
        geometry.vertices.push(new THREE.Vector3( 200, 0, 0 ) );

        linesMaterial = new THREE.LineBasicMaterial( { color: 0x00ff00, opacity: 1, linewidth: .1 } );

        for ( var i = 0; i <= 200; i ++ ) {

            var line = new THREE.Line( geometry, linesMaterial );
            line.position.z = ( i * 2 ) - 200;
            grid.add( line );

            var line = new THREE.Line( geometry, linesMaterial );
            line.position.x = ( i * 2 ) - 200;
            line.rotation.y = 90 * Math.PI / 180;
            grid.add( line );
        }       
        scene.add( grid );

    };
    this.tick = function(){
        this.airplane.rotation.x += 0.005;
        this.airplane.rotation.y += 0.01;
        this.airplane.position.x += 0.01;
    };
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T06:19:06.320

而是将相机添加为飞机的子项。

```
airplane.add( camera );
camera.position.set( 5, 0, 0 );
camera.lookAt( new THREE.Vector3( 0, 0, 0 ) ); 
```

现在，当您旋转/移动飞机时，相机将自动跟随。

# php - 图表消失使用PHPExcel读写excel文件

> ID：14744313
> 
> 赞同：1
> 
> 时间：2013-02-07T05:35:58.697
> 
> 标签：php, phpexcel

您好我正在使用 [http://phpexcel.codeplex.com](http://phpexcel.codeplex.com)读取和写入 excel 文件。当我读取它并写入新数据图时，我在excel文件中有图表。这是第 7 个示例，即 07reader.php，但将包含文件从“05featuredemon.php”更改为“33chartcreate-bar.php”，因为我需要图形

```
error_reporting(E_ALL);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

define('EOL',(PHP_SAPI == 'cli') ? PHP_EOL : '<br />');

date_default_timezone_set('Europe/London');

/** Include PHPExcel_IOFactory */
require_once '../Classes/PHPExcel/IOFactory.php';

if (!file_exists("33chartcreate-bar.xlsx")) {
exit("Please run 33chartcreate-bar.php first." . EOL);
}

echo date('H:i:s') , " Load from Excel2007 file" , EOL;
$objPHPExcel = PHPExcel_IOFactory::load("05featuredemo.xlsx");

 echo date('H:i:s') , " Write to Excel2007 format" , EOL;
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter->save(str_replace('.php', '.xlsx', __FILE__));
echo date('H:i:s') , " File written to " , str_replace('.php', '.xlsx',   pathinfo(__FILE__, PATHINFO_BASENAME)) , EOL;

// Echo memory peak usage
 echo date('H:i:s') , " Peak memory usage: " , (memory_get_peak_usage(true) / 1024 / 1024) , " MB" , EOL;

// Echo done
echo date('H:i:s') , " Done writing file" , EOL;
 echo 'File has been created in ' , getcwd() , EOL; 
```

请帮我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T07:26:09.603

您需要明确告诉 PHPExcel 读取和写入图表

```
$objReader->setIncludeCharts(TRUE); 
```

和

```
$objWriter->setIncludeCharts(TRUE); 
```

如示例所示

**编辑**

显式喂食类型示例

```
//  Create a reader for an Excel2007 file
$objReader = PHPExcel_IOFactory::createReader('Excel2007');
//  Tell the reader to include charts when it loads a file
$objReader->setIncludeCharts(TRUE);
//  Load the file
$objPHPExcel = $objReader->load("33chartcreate-bar.xlsx");

//  Do some stuff to the file

//  Create a writer for an Excel2007 file
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
//  Tell the writer to include any charts when it saves a file
$objWriter->setIncludeCharts(TRUE);
//  Save the file
$objWriter->save(str_replace('.php', '.xlsx', __FILE__)); 
```

# python - 如何在 MessageBox 中显示变量

> ID：14744314
> 
> 赞同：0
> 
> 时间：2013-02-07T05:36:03.003
> 
> 标签：python, python-2.7, wxpython, wxwidgets

我有这个代码：

```
 def OnClick(self, event):
     lan1 = self.a.Getvalue()
     lan2 = self.b.Getvalue() 
```

现在我想使用一个 MessageBox，它应该在其中显示`lan1`和`lan2`值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:45:11.047

根据[文档](http://wxpython.org/Phoenix/docs/html/functions.html?highlight=messagebox#MessageBox)：

```
wx.MessageBox('Lan1 = %s, lan2 = %s' % (str(lan1), str(lan2)),
              wx.OK | wx.ICON_INFORMATION) 
```

# c++ - 如何在 MFC 中使用 WriteConsoleInput()？

> ID：14744316
> 
> 赞同：0
> 
> 时间：2013-02-07T05:36:08.660
> 
> 标签：c++, c, visual-c++, mfc

我可以在控制台应用程序中使用 WriteConsoleInput()。但是当我尝试在 MFC 中使用 writeConsoleInput() 时，它不会在命令窗口中键入任何内容。这是我的代码。

```
DWORD WINAPI test(LPVOID lp)
{
    system("edit");
    return 0;
}

void CVirusScanDlg::OnBnClickedFormat()
{
    HANDLE hConIn = GetStdHandle(STD_INPUT_HANDLE);
    HANDLE hConOut = GetStdHandle(STD_OUTPUT_HANDLE);
    DWORD dwTmp;
    INPUT_RECORD ir[5];

    CreateThread(NULL, 0, test,(LPDWORD)0, 0, &dwTmp);

    Sleep( 1000 );

    ir[0].EventType = KEY_EVENT;
    ir[0].Event.KeyEvent.bKeyDown = TRUE;
    ir[0].Event.KeyEvent.dwControlKeyState = 0;
    ir[0].Event.KeyEvent.uChar.UnicodeChar = 'u';
    ir[0].Event.KeyEvent.wRepeatCount = 1;
    ir[0].Event.KeyEvent.wVirtualKeyCode = 'U';
    ir[0].Event.KeyEvent.wVirtualScanCode = MapVirtualKey('U', MAPVK_VK_TO_VSC);

    ir[1].EventType = KEY_EVENT;
    ir[1].Event.KeyEvent.bKeyDown = TRUE;
    ir[1].Event.KeyEvent.dwControlKeyState = 0;
    ir[1].Event.KeyEvent.uChar.UnicodeChar = 'c';
    ir[1].Event.KeyEvent.wRepeatCount = 1;
    ir[1].Event.KeyEvent.wVirtualKeyCode = 'C';
    ir[1].Event.KeyEvent.wVirtualScanCode = MapVirtualKey('C', MAPVK_VK_TO_VSC);

    ir[2].EventType = KEY_EVENT;
    ir[2].Event.KeyEvent.bKeyDown = TRUE;
    ir[2].Event.KeyEvent.dwControlKeyState = 0;
    ir[2].Event.KeyEvent.uChar.UnicodeChar = 'i';
    ir[2].Event.KeyEvent.wRepeatCount = 1;
    ir[2].Event.KeyEvent.wVirtualKeyCode = 'I';
    ir[2].Event.KeyEvent.wVirtualScanCode = MapVirtualKey('I', MAPVK_VK_TO_VSC);

    ir[3].EventType = KEY_EVENT;
    ir[3].Event.KeyEvent.bKeyDown = TRUE;
    ir[3].Event.KeyEvent.dwControlKeyState = 0;
    ir[3].Event.KeyEvent.uChar.UnicodeChar = VK_RETURN;
    ir[3].Event.KeyEvent.wRepeatCount = 1;
    ir[3].Event.KeyEvent.wVirtualKeyCode = VK_RETURN;
    ir[3].Event.KeyEvent.wVirtualScanCode = MapVirtualKey(VK_RETURN, MAPVK_VK_TO_VSC);

    ir[4].EventType = KEY_EVENT;
    ir[4].Event.KeyEvent.bKeyDown = FALSE;
    ir[4].Event.KeyEvent.dwControlKeyState = 0;
    ir[4].Event.KeyEvent.uChar.UnicodeChar = VK_RETURN;
    ir[4].Event.KeyEvent.wRepeatCount = 1;
    ir[4].Event.KeyEvent.wVirtualKeyCode = VK_RETURN;
    ir[4].Event.KeyEvent.wVirtualScanCode = MapVirtualKey(VK_RETURN, MAPVK_VK_TO_VSC);

    dwTmp = 0;
    WriteConsoleInput(hConIn, ir, 5, &dwTmp);
    //FlushConsoleInputBuffer(hConIn);
    //WriteConsole(hConIn, "uci\n", 5, &dwTmp, NULL);
    //printf(" dwTmp = %d ", dwTmp);

    Sleep(1000);

  //return 0;
} 
```

当我运行此代码时，它不会在命令窗口中键入任何内容。如何在 MFC 中使用 WriteConsoleInput()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:53:11.993

问题不在于 MFC 本身。问题是 GUI 应用程序没有*控制台*I/O ...除非您明确执行 ConsoleAlloc() 等。

这里有一些很好的链接：

*   [http://dslweb.nwnexus.com/~ast/dload/guicon.htm](http://dslweb.nwnexus.com/~ast/dload/guicon.htm)

*   [http://bobobobo.wordpress.com/2009/03/01/how-to-attach-a-console-to-your-gui-app-in-c/](http://bobobobo.wordpress.com/2009/03/01/how-to-attach-a-console-to-your-gui-app-in-c/)

*   [http://msdn.microsoft.com/en-us/library/ms682528.aspx](http://msdn.microsoft.com/en-us/library/ms682528.aspx)

# android - 如何从具有两个项目的微调器中获取选定的值

> ID：14744318
> 
> 赞同：1
> 
> 时间：2013-02-07T05:36:31.377
> 
> 标签：android, spinner, android-arrayadapter

如何从`spinner`..获取选定的项目名称？

这是我的代码

```
Spinner sp;
ArrayAdapter<String> adapter;
String numbers[] = { "AM", "PM"};

sp = (Spinner) findViewById(R.id.timing);
adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, numbers);
sp.setAdapter(adapter); 
```

我想从中获取 AM / PM 值，`spinner` 如果有人知道请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T05:38:16.250

采用`OnItemSelectedListener`

```
sp.setOnItemSelectedListener(this);

@Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,long arg3) 
    {
        String selected = arg0.getItemAtPosition(arg2).toString();
        System.out.println(selected);

    } 
```

# ruby - Ruby 中的几何平均值为大型数组返回 Infinity

> ID：14744321
> 
> 赞同：1
> 
> 时间：2013-02-07T05:36:40.300
> 
> 标签：ruby, math, mean

我正在尝试计算 Ruby 中数组的几何平均值。然而，在数组增长到一定大小后，它开始返回`Infinity`计算几何平均值。知道是什么导致了这种情况发生，或者是计算 Ruby 中较大数组的几何平均值的更好方法吗？

ruby 1.9.3p125（2012-02-16 修订版 34643）[x86_64-darwin10.8.0]

**例子**

```
def gmean(x)
  prod=1.0
  x.each {|v| prod *= v}
  prod**(1.0/x.size)
end 

sample_array = [1, 1, 1, 1200, 1483, 1827, 2114, 2163, 2231, 2313, 2368, 2636, 2736, 2834, 2847, 2985, 3225, 3304, 3317, 3439, 3519, 3586, 3607, 3611, 3722, 3770, 4346, 4383, 4392, 4548, 4639, 4773, 4836, 4929, 4991, 4998, 5075, 5078, 5433, 5549, 5727, 5908, 5911, 5989, 6007, 6031, 6065, 6097, 6141, 6654, 6915, 6969, 6972, 7074, 7257, 7260, 7342, 7526, 7550, 7898, 8032, 8037, 8265, 8567, 8888, 9033, 9169, 9412, 9701, 9962, 10247, 11209, 14069, 14741, 15088, 15511, 18775, 19755, 19937, 24064, 32437, 41372, 59057, 778335]
puts gmean(sample_array)
puts sample_array.inject{|sum,x| sum + x }
puts sample_array.length

#=> 4672.4331716807965
#=> 1429766
#=> 84

sample_array2 = [1, 1, 2, 1200, 1483, 1827, 2114, 2163, 2231, 2313, 2368, 2636, 2736, 2834, 2847, 2985, 3225, 3304, 3317, 3439, 3519, 3586, 3607, 3611, 3722, 3770, 4346, 4383, 4392, 4548, 4639, 4773, 4836, 4929, 4991, 4998, 5075, 5078, 5433, 5549, 5727, 5908, 5911, 5989, 6007, 6031, 6065, 6097, 6141, 6654, 6915, 6969, 6972, 7074, 7257, 7260, 7342, 7526, 7550, 7898, 8032, 8037, 8265, 8567, 8888, 9033, 9169, 9412, 9701, 9962, 10247, 11209, 14069, 14741, 15088, 15511, 18775, 19755, 19937, 24064, 32437, 41372, 59057, 778335]
puts gmean(sample_array2)
puts sample_array2.inject{|sum,x| sum + x }
puts sample_array2.length

#=> Infinity
#=> 1429767
#=> 84 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T06:37:41.673

如果`BigDecimal`s 最终占用太多内存，您可以利用对数：

```
def gmean(x)
  sum = x.inject(0) { |memo, v| memo + Math.log(v) }
  sum /= x.size
  Math.exp(sum).round(2)
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T05:49:55.277

您的价值超出了 a`Float`所能容纳的范围。而是考虑使用[`BigDecimal`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/bigdecimal/rdoc/BigDecimal.html)：

```
require 'bigdecimal'

def gmean(x)
  prod = BigDecimal.new 1
  x.each { |v| prod *= BigDecimal.new(v) }
  prod ** (1.0 / x.size)
end

gmean(sample_array2).to_f  #=> 4711.148446895203 
```

请注意，您的方法可以简化为更实用的样式：

```
def gmean(xs)
  one = BigDecimal.new 1
  xs.map { |x| BigDecimal.new x }.inject(one, :*) ** (one / xs.size)
end 
```

# java - Android 如何隐藏我的列表视图？

> ID：14744322
> 
> 赞同：0
> 
> 时间：2013-02-07T05:36:40.443
> 
> 标签：java, android, listview, search

我正在使用自己的数据库并获取特定的列并显示列表视图。这里使用`addTextChangedListener`这样的方法：

```
adapter = new ArrayAdapter<String>(this, R.layout.main , R.id.product_name, optionlist);
    listview.setAdapter(adapter); 

 inputSearch.addTextChangedListener(new TextWatcher() { 
   @Override
      public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text                   
         MainActivity.this.adapter.getFilter().filter(cs);                              
        }    
    @Override
      public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {      
        }               
        @Override
            public void afterTextChanged(Editable arg0) {                   
    }
}); 
```

我的问题是：当我在编辑文本中搜索数据时，只有特定的数据可见，否则我的列表视图中没有数据显示如何在这里解决我的问题。

在这里搜索时间数据像这样可见，否则没有数据可见

![这里搜索时间数据像这样可见，否则没有数据可见](../Images/8f4016f83e2811f9a68d8fc1496aeb98.png)

我希望这个没有搜索在列表视图中没有可见的数据：

![在此处输入图像描述](../Images/1c223e269fe977dcf4341c1d05788209.png)

但这里的数据是这样可见的：

![在此处输入图像描述](../Images/2b15dee658c1143a21c6b50ca93ad307.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:41:30.863

*这就是Filter*和*Search*之间的区别。您正在过滤数据，没有应用过滤器，一切都被选中。`setVisibility(GONE)`最简单的方法是在空`ListView`时调用。`TextView`或者，当 switch 设置为 true 时，您可以放置​​一个`boolean`开关`Adapter`以将项目计数返回为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T05:18:32.020

仅将以下内容添加到您的 java 类中：

```
@Override
        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text

            lv.setVisibility(View.VISIBLE);
            MainActivity.this.adapter.getFilter().filter(cs);
            String str = inputSearch.getText().toString();
            if (str.equals("")) {
                lv.setVisibility(View.GONE);
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T06:55:01.550

在 xml 中将以下内容添加到您的列表视图中

```
android:cacheColorHint="#00000000" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-07T05:26:12.240

最好清除适配器并将空字符串设置为适配器

```
@Override
    public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
        // When user changed the Text

        lv.setVisibility(View.VISIBLE);
        MainActivity.this.adapter.getFilter().filter(cs);
        String str = inputSearch.getText().toString();
        if (str.equals("")) 
        {
            List<String> list = new ArrayList<String>();
            list.add("");
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(TestSpinner.this,R.layout.spinner_item,list);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            listView.setAdapter(adapter);
        }
    } 
```

# php - Mysqli 期望行数作为参数

> ID：14744334
> 
> 赞同：0
> 
> 时间：2013-02-07T05:37:35.510
> 
> 标签：php, mysql, sql, database, mysqli

我正在制作一个`PHP`表单，该表单根据输入的序列码从数据库中检索信息。我收到这个错误。我试过移动东西，甚至在 if 语句中调用 $result 函数而不是引用变量。

> 错误：警告：mysqli_num_rows() 期望参数 1 为 mysqli_result，布尔值在第 22 行的 /home/content/98/10339998/html/scripts/stories.php 中给出

第 20-22 行：

```
$result = mysqli_query($con, $query);

if (mysqli_num_rows($result)) 
```

完整代码：

```
<?php
if ( $_POST ) {
    $username="*******";
    $password="*******";
    $con = mysqli_connect("storycodes.db.10339998.hostedresource.com",$username,$password);

    if (!$con) {
        die('Could not connect: ' . mysqli_error());
    }

    mysqli_select_db($con, "storycodes");

    $code = $_POST['codeInput'];
    $code = mysqli_escape_string($con, htmlspecialchars($code)); //May not acually need htmlspecialchars
    $query = "SELECT story,video FROM `storycodes` WHERE `code` = $code";
    $result = mysqli_query($con, $query);

    if (mysqli_num_rows($result)) {
        $row = mysqli_fetch_assoc($result);
        mysqli_free_result($result); 
        extract($row);
        echo $story . $video;
   } else {
       echo "No Data Found. Please check your serial code to ensure that you have not incorrectly entered it. If the code is correct please email the website administrator for further assistance";
   }        

    mysqli_close($con);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:42:11.530

如果您的查询返回语法错误，或者由于任何原因无法执行，它会返回一个 boolean `FALSE`。如果您尝试将布尔值传递给`mysqli_num_rows`，您将收到警告。

在您的查询中，您错过了`$code`. 只需`'$code'`改用，错误应该得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:48:50.443

您的查询有问题。mysqli_query($con, $query) 返回 false。$code 可能应该用引号引起来。

# firefox - selenium 无法打开火狐浏览器

> ID：14744335
> 
> 赞同：1
> 
> 时间：2013-02-07T05:37:35.007
> 
> 标签：firefox, selenium

试图在 Selenium 中执行一个必须启动 firefox 浏览器的 TestSuite，但这在 Internet Explorer 以外的任何浏览器中都无法工作......

selenium-server 版本--->1.0.1

火狐版本--->14.0.1

我的输出：

> C:\selenium\lib>java -jar selenium-server-1.0.1.jar -htmlsuite "*firefox" "http://www.google.com/" C:\TestSelenium\TestSuiteThree.html C:\TestSelenium\结果\ TestResult.html
> 
> 10:55:36.713 信息 - Java：Sun Microsystems Inc. 20.2-b06
> 
> 10:55:36.713 信息 - 操作系统：Windows 7 6.1 x86
> 
> 10:55:36.719 信息 - v1.0.1 [2696]，带有核心 v@VERSION@ [@REVISION@]
> 
> 10:55:36.771 信息 - 版本 Jetty/5.1.x
> 
> 10:55:36.772 信息 - 启动 HttpContext[/selenium-server/driver,/selenium-server/driver]
> 
> 10:55:36.772 信息 - 启动 HttpContext[/selenium-server,/selenium-server]
> 
> 10:55:36.773 信息 - 开始 HttpContext[/,/]
> 
> 10:55:36.779 信息 - 在 0.0.0.0:4444 上启动 SocketListener
> 
> 10:55:36.780 信息 - 开始 org.mortbay.jetty.Server@901887
> 
> 10:55:36.930 信息 - 正在准备 Firefox 配置文件...

即使在 15 - 20 分钟后也没有任何反应！！有没有人遇到过这种问题？？非常感谢任何帮助.......

# web-applications - Office Excel Web App 加载项

> ID：14744341
> 
> 赞同：3
> 
> 时间：2013-02-07T05:38:10.057
> 
> 标签：web-applications, web, ms-office, add-in

1.  您知道如何将任何 ADD-IN 添加到 Office Web 应用程序（尤其是 Excel）吗？
2.  有没有可能？
3.  如何添加一些当前不在默认办公网络应用程序中的功能（例如：天空驱动器）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:52:14.303

您可以像为 Office 2013 开发应用程序一样为某些 Web 应用程序开发应用程序，但 Web 应用程序仅支持某些应用程序类型：

1.  Excel Web App 仅支持内容应用程序类型
2.  Outlook Web App 仅支持邮件应用程序类型

有关详细信息，您可以查看[适用于 Office 的应用类型](http://msdn.microsoft.com/en-us/library/office/apps/jj220082%28v=office.15%29#StartBuildingApps_TypesofApps)

如果您需要教程，首先您需要一个[Office 365 开发人员站点](http://msdn.microsoft.com/en-us/library/office/apps/fp179924)中的帐户。然后您可以 使用“napa”创建您的第一个[Excel Web App 内容应用程序](http://msdn.microsoft.com/en-us/library/office/apps/jj220065?lc=1033)

# javascript - 将仅包含更改的对象应用于javascript中的另一个对象

> ID：14744347
> 
> 赞同：0
> 
> 时间：2013-02-07T05:38:21.657
> 
> 标签：javascript, object, attributes

我目前在我的 javascript 中使用伪对象结构。例如：

```
MyObj = function(options) {
    options = options || {};

    this.valueA = options.valueA || 'A';
    this.valueB = options.valueB || 'B';
    this.valueC = options.valueC || 'C';
    this.valueD = options.valueD || 'D';
}

MyObj.prototype.doStuff() {
    // do stuff
} 
```

现在我需要根据仅包含已更改属性的 JSON 数据更新上述实例。

目前我使用的函数有点像：

```
MyObj.prototype.update(obj) {
    if(obj.valueA) this.valueA = obj.valueA;
    if(obj.valueA) this.valueB = obj.valueB;
    if(obj.valueA) this.valueC = obj.valueC;
    if(obj.valueA) this.valueD = obj.valueD;
} 
```

现在在上面的示例中，一切正常，但是我定义的一些对象非常大，并且一些属性并不简单（因为 a`if(x)`是不够的）。这使得代码既混乱又复杂。恕我直言的复杂性是，当我引入新属性时，我被迫维护两个不同的地方。这让我很担心，因为我知道这可能是引入缺陷的原因。

所以我的问题是，是否有一种 javascript 机制可用于将对象的属性应用于我的“MyObj”实例？我对我的方法不满意，我发现很难搜索关于这个主题的问题（怀疑这是由于我对这些实体的正确 javascript 术语缺乏了解）。

顺便说一句，obj 是通过解析 JSON 数据创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:48:51.713

您是否正在寻找某种合并机制？

这对你有用吗？

```
var recursiveObjectMerge = function( primary, overwrite ){
    var p;
    for( p in overwrite ){
        try{
            //try an update
            if( overwrite[p].constructor == Object ){
                primary[p] = recursiveObjectMerge( primary[p], overwrite[p] );
            }
            else{
                primary[p] = overwrite[p];
            }
        }
        catch( e ){
            // destination doesn't have that property, create and set it
            primary[p] = overwrite[p];
        }
    }

    // primary is modified (it's a reference), but pass it back
    // to keep up the idea that this function returns a result
    return primary;
}; 
```

# java - 为什么内部类中允许“静态最终”字段？

> ID：14744352
> 
> 赞同：4
> 
> 时间：2013-02-07T05:38:35.237
> 
> 标签：java, static, inner-classes

我对在 java 中使用内部类有疑问。这是我的代码。

代码：

```
public class Test{

      public class InnerClass{
             public static int num = 10;
      }       

} 
```

这不被允许。我收到错误消息“字段 num 不能声明为静态；静态字段只能在静态或顶级类型中声明”。

```
public class Test{

      public class InnerClass{
             public static final int num = 10;
      }       

} 
```

但这是允许的。我没有声明`InnerClass`为静态和顶级元素，但它是如何工作的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T05:58:24.727

引用链接的答案。

> [8.1.2 内部类和封闭实例](http://java.sun.com/docs/books/jls/second_edition/html/classes.doc.html#262890)
> ......
> 内部类不能声明静态成员，**除非它们是编译时常量字段**（第 15.28 节）。

`final`使它们一旦初始化就保持不变，`= 10`是一个编译时常数值。因此是允许的。

# xmlhttprequest - 如何使用 XMLHttpRequest 和 FormData 对象在 multipart/form-data 上设置我自己的边界

> ID：14744353
> 
> 赞同：6
> 
> 时间：2013-02-07T05:38:35.680
> 
> 标签：xmlhttprequest, multipartform-data, boundary

当使用 FormData 对象将文件附加到请求时，我一直试图找到一种方法来在 XMLHttpRequest 对象上设置自己的边界。我看过很多关于这个的帖子，每个人都说“不要设置边界，它会自动为你生成。” 这不是我想要的。让我解释一下我需要什么，这样我就不会得到这些回应。

我有一个 Web 服务端点，我向该端点发送一个包含两个图像和一些 json 数据的 multipart/form-data 请求。由于 WCF 无法解析多部分请求，因此我使用一些开源代码构建了自己的解析器。它的工作方式是，我定义了一个边界，用于分隔请求的每个部分，从那里开始一切正常。因此，我必须能够将边界设置为服务器代码所期望的，以便我的解析类能够在输入流中找到任何内容。

我知道这可以做到，因为我已经使用 Fiddler 做到了这一点，并且一位同事能够在我们正在构建的调用我的方法的应用程序中这样做，但我正在尝试使用一个名为 Postman 的 Chrome 浏览器应用程序让它工作使用 FormData 对象发送多部分请求。除了请求生成自己的边界（通常类似于：

```
----WebKitFormBoundaryQUWQnB6c7TzNzdcz 
```

最后附加的字符串是随机生成的，所以它永远不会相同，因此我不能使用这个工具来测试我的端点，因为服务器无法知道要寻找什么边界。

我尝试在其中设置带有边界的 Content-Type 标头，虽然请求显示标头已添加到请求中，但正文仍使用随机边界。

所以问题是我如何告诉 FormData 对象和/或 XMLHttpRequest 对象使用我的边界而不是正在生成的随机边界？

我无法想象这是一件不常见的事情，我的意思是到目前为止，我调用使用 multipart/form-data 的服务的所有经验都告诉我在 api 中设置边界的内容，没有人说过“不要不要设置它，我们将使用生成的随机垃圾......”

同样作为视觉效果，这是我在标题中看到的内容：

```
Request Headers
POST /DHICachet.svc/json/DepositCheck HTTP/1.1
Host: dhiibews.securexfr.com
Connection: keep-alive
Content-Length: 514696
Origin: chrome-extension://fdmmgilgnpjigdojojpjoooidkmcomcm
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
Content-Type: multipart/form-data; boundary=myboundary
Cache-Control: no-cache
Accept: */*
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: ASP.NET_SessionId=zdepe2nhkz0vbhxiulzc2qq1

Request Payload
------WebKitFormBoundaryQUWQnB6c7TzNzdcz
Content-Disposition: form-data; name="item"; filename="Screen shot 2012-09-03 at 4.00.10 AM.png"
Content-Type: image/png

------WebKitFormBoundaryQUWQnB6c7TzNzdcz-- 
```

请注意，即使我的边界设置`myboundary`在请求标头中，主体只是将在幕后生成的任何边界放入其中。还要注意，如果我不设置该标头，它只是将其与随机边界一起放入其中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:44:50.037

这并不能真正回答我的问题，但我确实找到了解决方法。我突然意识到，我实际上可以通过对内容类型标头进行一些字符串数学来检测正在通过的边界。我刚刚在我的代码中添加了以下内容：

```
string contenttype = _ctx.IncomingRequest.Headers["Content-Type"].ToString();
string boundary = contenttype.Substring(contenttype.IndexOf('=') + 1); 
```

这使我可以接受任何边界进行调试。但是，我仍然需要我们的特定生产边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-22T09:15:49.587

您可以将文件转换为二进制字符串，然后提交。代码是 TypeScript，但 JavaScript 类似。

```
async uploadFile(myFile: File): Promise<boolean> {
        // Get the binary string from the file in order to send the file with `multipart/form-data`
        const contentPromise = new Promise<string>((resolve) => {
            const reader = new FileReader()
            reader.onload = async function (evt) {
                const pdfContent: string = evt?.target?.result as string
                resolve(pdfContent)
            }

            reader.readAsBinaryString(myFile)
        })
        const binaryContent = await contentPromise

        // Send the request
        const path = `api/update-file`
        const content = `--WebAppBoundary
Content-Disposition: form-data; name="myFile"; filename="${myFile.name}"
Content-Type: application/pdf

${binaryContent}
--WebAppBoundary--`

        const requestOptions = {
            method: 'POST',
            headers: {
                'Content-Type': 'multipart/form-data; boundary=WebAppBoundary'
            },
            body: content
        }

        const response: { code: number; message: string } = await (await fetch(path, requestOptions)).json()

        // Return the response
        return response.code === 200
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T14:52:03.920

我有一个类似的问题，对我来说，`undefined`在发布帖子时将内容类型标题设置为解决了这个问题......`'Content-Type': undefined`

我相信浏览器会自动正确处理 FormData 的 POST 并`Content-type`为您设置预期的标题，包括未设置的边界。所以这意味着服务器上不需要特殊的请求头解析逻辑。

# javascript - Javascript 书签中的 CSS

> ID：14744355
> 
> 赞同：0
> 
> 时间：2013-02-07T05:38:44.790
> 
> 标签：javascript

是否可以将 css 插入到 javascript 小书签中？

像这样简单的东西`#div-name{ display: none !important; }`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:44:25.583

复制自：[如何使用 Javascript 添加 CSS？](https://stackoverflow.com/questions/707565/how-do-you-add-css-with-javascript)

我不喜欢引用链接，因为有时您会单击 5 个链接，但最终会出现死链接，并在此处显示评论：

要为页面添加样式，您可以：

```
var sheet =document.createElement("style");
document.head.appendChild(sheet); 
```

这是该页面的解决方案：

你也可以使用 DOM Level 2 CSS 接口来做到这一点：

```
sheet.insertRule('strong { color: red; }', sheet.cssRules.length); 
```

...除了（自然）IE，它使用自己的略有不同的措辞：

```
sheet.addRule('strong', 'color: red;', -1); 
```

与 createElement-set-innerHTML 方法相比，这有一个理论上的优势，因为您不必担心在 innerHTML 中放置特殊的 HTML 字符，但实际上样式元素是旧版 HTML 中的 CDATA，并且 '< ' 和'&' 无论如何，很少在样式表中使用。

您确实需要一个样式表，然后才能开始像这样附加它。这可以是任何现有的活动样式表：外部的、嵌入的或空的，没关系。如果没有，目前创建它的唯一标准方法是使用 createElement。

# javascript - 如何在单击标记时设置 panTo 自动缩放？

> ID：14744362
> 
> 赞同：0
> 
> 时间：2013-02-07T05:39:09.667
> 
> 标签：javascript, asp.net, google-maps, google-maps-markers

我有一张地图，我在上面绘制了一些随机坐标，坐标被输入数据表并且工作正常

但是现在，由于我一直在尝试`panTo`在我的地图上设置缩放功能，这样当单击任何一个标记时，地图画布就会慢慢放大到标记。我无法正确设置它。

那么，我怎样才能使这项工作？任何建议/答案都非常感谢..提前致谢。

我的 GPSLib 类：

```
public static class GPSLib
{
    public static String PlotGPSPoints(DataTable tblPoints)
    {
        try
        {
            String Locations = "";
            String sJScript = "";
            int i = 0;
            foreach (DataRow r in tblPoints.Rows)
            {
                // bypass empty rows 
                if (r["latitude"].ToString().Trim().Length == 0)
                    continue;

                string Latitude = r["latitude"].ToString();
                string Longitude = r["longitude"].ToString();

                // create a line of JavaScript for marker on map for this record 
                Locations += Environment.NewLine + @"
                path.push(new google.maps.LatLng(" + Latitude + ", " + Longitude + @"));

                var marker" + i.ToString() + @" = new google.maps.Marker({
                    position: new google.maps.LatLng(" + Latitude + ", " + Longitude + @"),
                    title: '#' + path.getLength(),
                    map: map
                });";
                i++;
            }

            // construct the final script
            // var cmloc = new google.maps.LatLng(33.779005, -118.178985);

            // map.panTo(curmarker.position); //zooming on current marker's posn.
            // map.panTo(myOptions.getPosition());
            sJScript = @"<script type='text/javascript'>

            var poly;
            var map;

            function initialize() {
                var cmloc = new google.maps.LatLng(28.483243, 77.107624);
                var myOptions = {
                    zoom: 19,
                    center: cmloc,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

                var polyOptions = {
                    strokeColor: 'blue',
                    strokeOpacity: 0.5,
                    strokeWeight: 3
                }
                poly = new google.maps.Polyline(polyOptions);
                poly.setMap(map);

                var path = poly.getPath();

               " + Locations + @"

                    }
                </script>";
            return sJScript;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
} 
```

`onLoad()`这是创建包含坐标的数据表的 aspx 页面方法：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            DataTable dt = new DataTable();
            dt.Columns.Add(new DataColumn("Latitude"));
            dt.Columns.Add(new DataColumn("Longitude"));

            DataRow row = dt.NewRow();
            row["Latitude"] = 28.483109;
            row["Longitude"] = 77.107756;
            dt.Rows.Add(row);

            row = dt.NewRow();
            row["Latitude"] = 28.483243;
            row["Longitude"] = 77.107624;
            dt.Rows.Add(row);

            row = dt.NewRow();
            row["Latitude"] = 28.483293;
            row["Longitude"] = 77.107579;
            dt.Rows.Add(row);

            row = dt.NewRow();
            row["Latitude"] = 28.483359;
            row["Longitude"] = 77.107536;
            dt.Rows.Add(row);

            row = dt.NewRow();
            row["Latitude"] = 28.483559;
            row["Longitude"] = 77.107273;
            dt.Rows.Add(row);

            //row = dt.NewRow();
            //row["Latitude"] = 28.4804;
            //row["Longitude"] = 77.1251;
            //dt.Rows.Add(row);

            js.Text = GPSLib.PlotGPSPoints(dt); ;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:15:08.167

您只是`map.panTo()`在创建标记后不写，您需要使用标记的单击事件，您应该在其中编写`panTo()`.

在你的 foreach 循环之后，写：

```
function myMark(rmarker)
{
    google.maps.event.addListener(rmarker,'click',function(){
      map.panTo(rmarker.getPosition());
    });
} 
```

最后在你的 foreach 循环中调用上述函数：

```
var marker" + i.ToString() + @" = new google.maps.Marker({
                    position: new google.maps.LatLng(" + Latitude + ", " + Longitude + @"),
                    title: '#' + path.getLength(),
                    map: map
                });";
                i++;
 myMark(marker" + i.ToString() + @"); 
} 
```

以上将帮助您解决您的问题。

**更新：**这是一个显示您的功能的工作演示：

[**现场演示**](http://jsfiddle.net/cRdyd/1/)

查看编码模式，您应该善于纠正错误。

# python - 在这段代码中，每个函数都被一一调用？

> ID：14744365
> 
> 赞同：0
> 
> 时间：2013-02-07T05:39:20.843
> 
> 标签：python, django, google-app-engine, webapp2

只是一个愚蠢的问题，因为我试图理解这段代码。比如如果`BaseRequestHandler`被调用，下面的每个函数是按顺序一个一个调用的？`dispatch`-> `jinja2`-> `session`-> `auth`.....

```
# -*- coding: utf-8 -*-
import logging
import secrets

import webapp2
from webapp2_extras import auth, sessions, jinja2
from jinja2.runtime import TemplateNotFound

from simpleauth import SimpleAuthHandler

class BaseRequestHandler(webapp2.RequestHandler):
  def dispatch(self):
    # Get a session store for this request.
    self.session_store = sessions.get_store(request=self.request)

    try:
      # Dispatch the request.
      webapp2.RequestHandler.dispatch(self)
    finally:
      # Save all sessions.
      self.session_store.save_sessions(self.response)

  @webapp2.cached_property    
  def jinja2(self):
    """Returns a Jinja2 renderer cached in the app registry"""
    return jinja2.get_jinja2(app=self.app)

  @webapp2.cached_property
  def session(self):
    """Returns a session using the default cookie key"""
    return self.session_store.get_session()

  @webapp2.cached_property
  def auth(self):
      return auth.get_auth()

  @webapp2.cached_property
  def current_user(self):
    """Returns currently logged in user"""
    user_dict = self.auth.get_user_by_session()
    return self.auth.store.user_model.get_by_id(user_dict['user_id'])

  @webapp2.cached_property
  def logged_in(self):
    """Returns true if a user is currently logged in, false otherwise"""
    return self.auth.get_user_by_session() is not None

  def render(self, template_name, template_vars={}):
    # Preset values for the template
    values = {
      'url_for': self.uri_for,
      'logged_in': self.logged_in,
      'flashes': self.session.get_flashes()
    }

    # Add manually supplied template values
    values.update(template_vars)

    # read the template or 404.html
    try:
      self.response.write(self.jinja2.render_template(template_name, **values))
    except TemplateNotFound:
      self.abort(404)

  def head(self, *args):
    """Head is used by Twitter. If not there the tweet button shows 0"""
    pass

class RootHandler(BaseRequestHandler):
  def get(self):
    """Handles default langing page"""
    self.render('home.html')

class ProfileHandler(BaseRequestHandler):
  def get(self):
    """Handles GET /profile"""    
    if self.logged_in:
      self.render('profile.html', {
        'user': self.current_user, 
        'session': self.auth.get_user_by_session()
      })
    else:
      self.redirect('/')

class AuthHandler(BaseRequestHandler, SimpleAuthHandler):
  """Authentication handler for OAuth 2.0, 1.0(a) and OpenID."""

  # Enable optional OAuth 2.0 CSRF guard
  OAUTH2_CSRF_STATE = True

  USER_ATTRS = {
    'facebook' : {
      'id'     : lambda id: ('avatar_url', 
        'http://graph.facebook.com/{0}/picture?type=large'.format(id)),
      'name'   : 'name',
      'link'   : 'link'
    },
    'google'   : {
      'picture': 'avatar_url',
      'name'   : 'name',
      'link'   : 'link'
    },
    'windows_live': {
      'avatar_url': 'avatar_url',
      'name'      : 'name',
      'link'      : 'link'
    },
    'twitter'  : {
      'profile_image_url': 'avatar_url',
      'screen_name'      : 'name',
      'link'             : 'link'
    },
    'linkedin' : {
      'picture-url'       : 'avatar_url',
      'first-name'        : 'name',
      'public-profile-url': 'link'
    },
    'openid'   : {
      'id'      : lambda id: ('avatar_url', '/img/missing-avatar.png'),
      'nickname': 'name',
      'email'   : 'link'
    }
  }

  def _on_signin(self, data, auth_info, provider):
    """Callback whenever a new or existing user is logging in.
     data is a user info dictionary.
     auth_info contains access token or oauth token and secret.
    """
    auth_id = '%s:%s' % (provider, data['id'])
    logging.info('Looking for a user with id %s', auth_id)

    user = self.auth.store.user_model.get_by_auth_id(auth_id)
    _attrs = self._to_user_model_attrs(data, self.USER_ATTRS[provider])

    if user:
      logging.info('Found existing user to log in')
      # Existing users might've changed their profile data so we update our
      # local model anyway. This might result in quite inefficient usage
      # of the Datastore, but we do this anyway for demo purposes.
      #
      # In a real app you could compare _attrs with user's properties fetched
      # from the datastore and update local user in case something's changed.
      user.populate(**_attrs)
      user.put()
      self.auth.set_session(
        self.auth.store.user_to_dict(user))

    else:
      # check whether there's a user currently logged in
      # then, create a new user if nobody's signed in, 
      # otherwise add this auth_id to currently logged in user.

      if self.logged_in:
        logging.info('Updating currently logged in user')

        u = self.current_user
        u.populate(**_attrs)
        # The following will also do u.put(). Though, in a real app
        # you might want to check the result, which is
        # (boolean, info) tuple where boolean == True indicates success
        # See webapp2_extras.appengine.auth.models.User for details.
        u.add_auth_id(auth_id)

      else:
        logging.info('Creating a brand new user')
        ok, user = self.auth.store.user_model.create_user(auth_id, **_attrs)
        if ok:
          self.auth.set_session(self.auth.store.user_to_dict(user))

    # Remember auth data during redirect, just for this demo. You wouldn't
    # normally do this.
    self.session.add_flash(data, 'data - from _on_signin(...)')
    self.session.add_flash(auth_info, 'auth_info - from _on_signin(...)')

    # Go to the profile page
    self.redirect('/profile')

  def logout(self):
    self.auth.unset_session()
    self.redirect('/')

  def handle_exception(self, exception, debug):
    logging.error(exception)
    self.render('error.html', {'exception': exception})

  def _callback_uri_for(self, provider):
    return self.uri_for('auth_callback', provider=provider, _full=True)

  def _get_consumer_info_for(self, provider):
    """Returns a tuple (key, secret) for auth init requests."""
    return secrets.AUTH_CONFIG[provider]

  def _to_user_model_attrs(self, data, attrs_map):
    """Get the needed information from the provider dataset."""
    user_attrs = {}
    for k, v in attrs_map.iteritems():
      attr = (v, data.get(k)) if isinstance(v, str) else v(data.get(k))
      user_attrs.setdefault(*attr)

    return user_attrs 
```

另一个问题是这段代码是在 webapp2 框架中使用的。我可以在 django 或 kay 框架中使用此代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:08:05.437

对于您问题的第一部分，简短回答没有。

*   `BaseRequestHandler`是一个类而不是函数，所以不能真正调用它。函数`dispatch, jinja`等是这个类的方法。需要使用 的对象显式调用它们`BaseRequestHandler`。例子

    base_obj = BaseRequestHandler() #创建实例 base_obj.dispatch() #调用调度方法

这只是调用方法的说明，webapp2 可能存在一些语法问题。

# grails - 取消正在进行的服务和作业 - grails

> ID：14744370
> 
> 赞同：0
> 
> 时间：2013-02-07T05:39:48.310
> 
> 标签：grails, service, jobs

我只是在想是否可以取消或停止正在进行的服务或工作？例如，我有一个代码调用服务中的方法，然后用户突然想要取消所述操作。由于它是事务性的，是否可以停止或回滚在取消服务之前所做的更改？假设我有这个代码：

```
class SomeService {
    static transactional = true

    def someMethod() {
        //some business logic here 

        SomeTriggeredJob.triggerNow((java.util.LinkedHashMap)[params: queriedParams]
    }
} 
```

如果它已经在执行，有没有办法取消它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:40:58.610

要取消一个服务的事务上下文，您可以在服务中启动一个抛出，如果您需要执行此服务的传出，您可以将其封装在一个方法中。

```
serviceExample.doCancel() 
```

*"结果是所有方法都包装在事务中，如果方法抛出运行时异常（即扩展 RuntimeException 的异常）或错误，则会发生自动回滚。事务的传播级别默认设置为 PROPAGATION_REQUIRED。检查的异常不要回滚事务。尽管 Groovy 模糊了已检查异常和未检查异常之间的区别，但 Spring 并没有意识到这一点，并且使用了它的默认行为，因此了解已检查异常和未检查异常之间的区别很重要。"*

[Grails 文档 - 服务](http://grails.org/doc/latest/guide/single.html#services)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:26:15.060

如果用户取消进程并将标志保存在会话或数据库中，则将某些标志设置为 false。同时，在您正在运行的方法/作业中，放置一个循环并每次检查标志。所以，如果你在标志中得到错误，下次不要运行该作业。例如，如果用户取消设置

```
session.cancelFlag = false 
```

在你的工作中，做一些类似的事情

```
def jobMethod(){
    someLoop.each{
        if(session.cancelFlag){
            Do your work here !
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:25:51.093

1.  让用户发送取消请求；
2.  在服务器端在数据库或会话中设置一个标志，您的工作可以访问该标志；
3.  作业应首先读取该值并根据它 - 继续或取消。

# php - 我想将一个表中的数据复制到同一个数据库中的另一个表中，并且还有一个 id

> ID：14744373
> 
> 赞同：-1
> 
> 时间：2013-02-07T05:39:56.897
> 
> 标签：php, mysql

我已经解雇了查询

```
mysql_query(
       insert into temp_data
      (test_id,subject,unit,ques,options,right_opt,marks)
       select test_id,subject,unit,ques,options,right_opt,marks
       from questions where test_id='$test_id'); 
```

但是还有一个值存储在`column stu_id`变量中。 **我的问题**是我想将 stu_id 列值插入为 $stu_id 并从另一个表中插入剩余的列值，如查询中所示`temp_data table``$stu_id`

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:49:13.553

我不确定您要做什么，您能否更具体地回答这个问题？如果您尝试将某些行从一个表插入到另一个表中，您可以执行以下操作： 1) 如果您在插入时尝试插入相同的值，您可以在数据库中创建触发器并仅将所需的行插入到在第一个表中插入完成后的下一个表 2）您可以转储数据并将转储的数据运行到另一个表**

# c# - 首次登录时自动生成密码并设置安全问答选项

> ID：14744376
> 
> 赞同：0
> 
> 时间：2013-02-07T05:40:04.290
> 
> 标签：c#, asp.net, asp.net-membership

我正在尝试仅使用电子邮件 ID 注册用户。因此，当我输入电子邮件 ID 并单击注册时，密码应该会自动生成，并且电子邮件应该发送到特定的电子邮件地址。当他第一次使用该电子邮件 ID 和密码登录时，我们需要显示更改密码和安全问题和答案选项。`auto generate password`在创建用户向导中有一个选项。为此，我关注了这个[链接](http://forums.asp.net/t/1119141.aspx/1)。但我无法解决问题，以显示首次登录用户重置密码并设置安全问题和答案。谁能给我解决办法！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:44:30.627

您必须在数据库中跟踪它。例如，您可以`bit`在数据库中设置类型字段`IsFirstTimeLogin`并将其设置`true`为首次使用，并在成功登录后将其设置为`false`. 您还可以设置一个字段来指定用户是否需要更改密码。如果该字段设置为 true，那么您可以要求用户更改密码。您也可以使用所需的密码更改字段来更改密码的期间。

就自动生成密码而言，您可以使用电子邮件 ID 作为第一个密码，但是如果您想要一些更安全的选项，那么您可以向用户发出任何随机生成的密码，或者您可以`GetHashCode`用于密码生成。就像是：

```
string email = "test@test.com";
string password = Math.Abs(email.GetHashCode()).ToString(); 
```

您只能尝试使您的密码尽可能随机，您可以查看[此问题](https://stackoverflow.com/questions/1122483/c-sharp-random-string-generator)以生成随机字符串。

# objective-c - ARC：EXC_BAD_ACCESS 从块内调用方法时，在委托方法内

> ID：14744378
> 
> 赞同：4
> 
> 时间：2013-02-07T05:40:10.250
> 
> 标签：objective-c, objective-c-blocks, exc-bad-access

我在委托方法中创建了一个块，并使用它来调用另一个类中的静态方法。即使启用了 NSZombies，我也会收到 EXC_BAD_ACCESS 错误。这里有一些关于类似问题的帖子 - 我认为这是最接近的：

[ARC：从委托方法中使用的内部块获取 EXC_BAD_ACCESS](https://stackoverflow.com/questions/7404653/arc-getting-exc-bad-access-from-inside-block-used-in-delegate-method)

但是，到目前为止，我还没有发现任何有帮助的东西。这是代码：

```
@interface MyClass()
@property (nonatomic, copy) CaseBlock c;
@end

....

//NSURLConnection delegate method
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{        
    NSDictionary *d = [NSDictionary dictionaryWithObjectsAndKeys:
                       //blows up after executing this
                       ^() { [AnotherClass staticMethod]; },authURL,
                       ^() { NSLog(@"TODO");}, searchURL,
                       ^() { NSLog(@"TODO"); }, itemURL,
                       nil];
    self.c = [[d objectForKey:[self.url path]] copy];

    if (self.c) {
        self.c();
    } else { NSLog(@"WARN unexpected response path"); }

} 
```

这是我第一次尝试使用块，但我可以看出这是导致问题的原因，因为从块外部调用该方法可以正常工作。而且，据我所知，我编写的所有代码实际上都被执行了，然后发生了 EXC_BAD_ACCESS 错误。但是，我是 Objective-C 的新手，所以如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T06:42:46.963

如果块需要超出创建它们的范围，则需要复制块。由于`dictionaryWithObjectsAndKeys:`一般处理对象而不是专门处理块，因此它不知道复制它们，因此您必须在将它们传递给它之前复制它们。

```
NSDictionary *d = [NSDictionary dictionaryWithObjectsAndKeys:
                   //blows up after executing this
                   [^() { [AnotherClass staticMethod]; } copy], authURL,
                   [^() { NSLog(@"TODO");} copy], searchURL,
                   [^() { NSLog(@"TODO"); } copy], itemURL,
                   nil]; 
```

# php - 理解 $this->functionName(); 在 PHP 中

> ID：14744380
> 
> 赞同：0
> 
> 时间：2013-02-07T05:40:22.753
> 
> 标签：php

我正在慢慢尝试理解面向对象的 PHP，我仍然在使用**$this->**找到自己的方式，但是除非它坚持我熟悉的领域，否则我会有点迷失。

我从我正在审查的一个项目中获得了这段代码片段，我想了解它，我只是想知道是否有人可以提供一些最小/基本代码来绕过（在顶部和底部）示例，以便成功运行它：

```
if ($this->isValid())
{
  print "Valid";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T05:43:34.230

该语句将在类内的方法内：

```
class MyClass
{
    public $valid = true;

    public function isValid()
    {
        return $this->valid;
    }

    public function MyMethod()
    {
        if ($this->isValid())
        {
            print "valid";
        }
    }
}

$myObj = new MyClass();
$myObj->MyMethod(); // prints "valid"
$myObj->valid = false;
$myObj->MyMethod(); // doesn't print "valid" 
```

变量指的`$this`是已调用方法的对象的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T05:41:41.273

用于`$this`引用当前对象。换句话说，`$this->` 用于非静态成员和`isValid()`类中的方法

```
class SimpleClass
{

    public $var = 'a default value';
             ^ 
             | refers variable   
             |
        $this->var; 

    public function isValid(){}
             ^ 
             | refers method 
             |
        $this->Isvalid(); 
   }
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T05:43:24.317

`$this`关键字用于访问该类的当前实例，并且是该类 的`isValid()`函数。

# php - PHP 根据从组合框中选择的值发送电子邮件

> ID：14744381
> 
> 赞同：0
> 
> 时间：2013-02-07T05:40:27.420
> 
> 标签：php, email, button, combobox

我想发送 2 封不同的电子邮件通知申请人他们的奖学金申请。如果用户在组合框中选择了批准，则系统会自动向申请人的电子邮件地址发送电子邮件通知，否则，将发送撤销通知。这是我到目前为止所尝试的：

```
<form action="" method="post">
<input type="hidden" name="id" value="<?php echo $id; ?>"/>
<strong>Applicant ID:</strong> <?php echo $id; ?><br />
<strong>Applicant name: </strong> 
<input type="text" name="username" readonly value="<?php echo $lastname. "," . $firstname. " " .substr($middlename, 0,1); ?>"/><br/>
<strong>Username: </strong><input type="text" readonly name="username" value="<?php echo $username; ?>" /> <br />
<strong>Password: </strong><input type="text" readonly name="password" value="<?php echo $password; ?>" /> <br />

<strong>Manage Application: </strong><select name="status">
<?php
    $selection = array(
    0 => "Pending",
    1 => "Approve",
    2 => "Revoke" );

    foreach($selection as $key => $value)
    {
        echo '<option value="' . $key . '"';
        if ($status == $key)
        echo ' selected="selected"';
        echo '>' . $value . '</option>';
        echo ' <br />';
    }
?>
</select>
<br />

<button type="submit" name="submit" value="Submit"><img src="../../images/login.png"   />Update</button>

<?php 

if(isset($_POST['submit']))
{
if($selection == 1){

$to = '.$email.';
//define the subject of the email
$subject = 'Test email'; 
//define the message to be sent. Each line should be separated with \n
$message = "Hello World!\n\nThis is my first mail."; 
//define the headers we want passed. Note that they are separated with \r\n
$headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com";
//send the email
if (mail($to, $subject, $message, $headers)) {
echo("<p>Congrats!</p>");
} else {
echo("<p>Message delivery failed...</p>");
}
}
else if($selection == 2)
{
$to = $email;
//define the subject of the email
$subject = 'Test email'; 
//define the message to be sent. Each line should be separated with \n
$message = "Hello World!\n\nThis is my first mail."; 
//define the headers we want passed. Note that they are separated with \r\n
$headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com";
//send the email
if (mail($to, $subject, $message, $headers)) {
echo("<p>Sorry your application is revoked!</p>");
} else {
echo("<p>Message delivery failed...</p>");
}
}

} // end of if button pressed

?>

 <a href="../index.php"><button type="button"><img src="../../images/back.png"/>Back</button></a>
</div>
</form> 
```

但是当我查看电子邮件时它没有发送。这是对的吗？

```
 $to = $email; 
```

我从一行中得到了 $email['EmailAddress'];

请帮我弄清楚我错过了什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:05:52.803

我认为您正在获得发布的价值。就这样吧`$to=$_POST["your email address field name"]`。希望它能正常工作。尝试一下。

试试下面的颂歌

```
<?php
$selection = array(
0 => "Pending",
1 => "Approve",
2 => "Revoke" ); 
```

$选项="";

```
foreach($selection as $key => $value)
{
    if ($status == $key)
        $sel='selected="selected"';

    $option.='<option value="'. $key.'" '.$sel.'>'. $value . '</option>';

    echo $option.' <br />';
} 
```

?>

# nginx - 精神错乱：IF 子句打破了 LOCATION 子句

> ID：14744383
> 
> 赞同：0
> 
> 时间：2013-02-07T05:40:37.153
> 
> 标签：nginx

包括`nginx.conf`以下内容

```
 location /beta/ {
        proxy_pass http://otherhost/;
      } 
```

那么以下两个检索工作：

*   `curl -H 'User-Agent: Mozilla' http://localhost/beta/admin.html`
*   `curl -H 'User-Agent: iPhone' http://localhost/beta/admin.html`

他们都检索`http://otherhost/admin.html`

当我将 nginx.conf 更改为：

```
 location /beta/ {
        if ($http_user_agent ~ iPhone ) {
        }
        proxy_pass http://otherhost/;
      } 
```

然后`curl -H 'User-Agent: Mozilla' http://localhost/beta/admin.html`继续工作，但 `curl -H 'User-Agent: iPhone' http://localhost/beta/admin.html`给出 404 和 otherhost 抱怨它没有一个名为`beta/admin.html`. `if`无论是否为空，都会发生这种情况。

嗯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:39:30.980

您被一个已知问题所困扰：[If is evil in nginx](http://wiki.nginx.org/IfIsEvil "如果是邪恶的")，这意味着如果可能的话，请避免`if`-blocks 内`location`的 -blocks （链接解释了原因和方式）

# mysql - 在 Jbpm 5.4 中持久化数据

> ID：14744385
> 
> 赞同：6
> 
> 时间：2013-02-07T05:40:38.777
> 
> 标签：mysql, database, hibernate, jbpm

我想知道是否有任何示例或链接可以逐步解释我们如何在 JBPM 中持久化数据？

从某种意义上说，我想制作一个 Web 应用程序作为用户注册表单，当用户/人填写表单并单击提交按钮时，数据应存储在我的数据库中的表中，即 MySQl 数据库。

对此的任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-17T18:12:50.093

在过去的几天里，我一直在为此苦苦挣扎。我使用的是 JBPM 6.1.0.Final 版本。我使用了这个 Maven[示例 webapp 项目](http://www.mastertheboss.com/jboss-jbpm/jbpm6/jbpm-6-web-application-example)。关于环境设置的快速警告：我只能在 JBoss EAP 6.3 中部署项目。我在 Wildfly 8.1 和 8.2 中尝试过，但我不断收到错误，我无法弄清楚如何修复，因此您的里程可能会有所不同。我也遇到了一些注释问题，但我认为这超出了原始问题的范围。

我必须对persistence.xml 进行一些更改才能使一切正常。

1.  仅当持久性单元名称从“jbpm.unit01”设置为“org.jbpm.domain”时，该代码才有效。除了persistence.xml 之外，请确保更新代码中的注释。这可能没有必要，但如果我没有更新它，我会遇到部署问题。
2.  我创建了一个 JBoss 数据源，因此您需要更新 jta-data-source 元素。我选择遵循 JBoss 约定并选择 java:jboss/datasources/jbpmDS。
3.  在persistence.xml 的属性部分，您需要将hibernate.dialect 属性的值更新为数据库的方言。[从此列表](http://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/dialect/package-summary.html)中选择最佳匹配
4.  将以下内容添加到 persistence.xml 中的属性列表中： `<property name="hibernate.hbm2ddl.auto" value="create" />`这将在数据库部署时重新创建数据库。创建数据库后，您可以将值从“create”更改为“validate”，这样它就不会在每次重新部署时删除包含旧数据的表。
5.  我发现令人沮丧的另一件事是persistence.xml 引用了其他XML 文件：META-INF/Taskorm.xml 和META-INF/JBPMorm.xml。我花了一段时间才找到一个有效的版本。请参阅我对此的评论以获取链接，因为我没有足够的声誉在单个回复中发布超过 2 个链接。
6.  我需要从类列表中删除 BAMTaskSummaryImpl 和 TaskEventImpl 的行。如果未删除这些行，我会在部署时收到 ClassDefNotFound。

这些是我试图让项目运行时的主要障碍。我希望这会有所帮助。

# oracle - 随机获取无效数字错误

> ID：14744386
> 
> 赞同：1
> 
> 时间：2013-02-07T05:40:51.587
> 
> 标签：oracle, ado.net, devart

我将以下代码与 Oracle ADO.Net 提供程序（DevArt 的[dotConnect Universal](http://www.devart.com/dotconnect/universal/)）一起使用。有趣的是它有时会起作用，然后大多数时候它会抛出`Devart.Data.Oracle.OracleException: ORA-01722: invalid number`

```
 string sql = "SELECT DISTINCT  B.PRICE_TIER_KEY,b.label, a.INSERT_DATE   AS PriceEffectiveDate,B.PROGRAM_KEY AS PRICE_PROGRAM_KEY FROM GHX_MEMBER_TIER A INNER JOIN VHA_INT_PRICE_TIER B ON A.SRC_ID_VALUE = B.PRICE_TIER_KEY WHERE RowNum <=100";

        DbProviderFactory dpf = DbProviderFactories.GetFactory(System.Configuration.ConfigurationManager.ConnectionStrings["Con_ORA_DevArt"].ProviderName);
        DbConnection conn = dpf.CreateConnection();
        conn.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["Con_ORA_DevArt"].ConnectionString;

        DbCommand dbcmd = dpf.CreateCommand();
        dbcmd.Connection = conn;
        //dbcmd.Connection = uniConnection1;
        dbcmd.CommandText = sql;
        dbcmd.CommandType = CommandType.Text;
        dbcmd.CommandTimeout = 0;

        DataTable table = new DataTable();

        try
        {
            System.Data.Common.DbDataAdapter da = dpf.CreateDataAdapter();
            da.SelectCommand = dbcmd;
            // Fill the DataTable.

            da.Fill(table);
        }
        catch (Exception ex)
        {
            throw;
        }
        finally
        {
            if (conn != null && conn.State != ConnectionState.Closed)
            {
                conn.Close();
                conn.Dispose();
            }
            if (dbcmd != null)
            {
                dbcmd.Dispose();
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T06:20:16.257

ORA-01722 是数据转换错误。当字符串包含非数字值时，当我们尝试将字符串转换为数字时，就会发生这种情况。这可以通过 TO_NUMBER() 强制转换显式发生，也可以通过在 JOIN 或 WHERE 子句中使用不同数据类型的列隐式发生。

所以你现在可以看到你发布了所有错误的信息：重要的是所涉及的表的数据结构和内容。最有可能出现问题的是连接中的两列：SRC_ID_VALUE 和 PRICE_TIER_KEY。这些都是数字列还是两个字符串？如果一个是数字而另一个不是，那么字符串之一是否只包含数字数据？

*这很重要，因为 Oracle在尝试比较之前*会将字符串列转换为数字。

例如，如果 table1 有这个数据......

```
 1234
10789 
```

...而table2有这个数据...

```
'1234'
'45o7' 
```

第一行将正常连接，但第二行将抛出 ORA-01722 并使查询脱轨。

解决这个问题的方法是使用 TO_CHAR() 将数值列转换为字符串。这将阻止 Oracle 在该列上使用任何索引。这可能与您的情况无关，因为您很可能只是对两个表进行全表扫描，但更精确的查询可能很重要。

* * *

> “我认为这是甲骨文的一个可怕特性。”

将字符串转换为数字会更改排序顺序。这 ...

'1'、'10'、'2'、'21'、'3'

……变成这个……

1、2、3、10、21

当然它不能使用原始索引。

有一种解决方法，但它有点涉及。

1.  构建一个函数来测试输入字符串，如果它是数字则返回一个数字，如果不是则返回 null。
2.  使用该函数构建基于函数的索引：

    在 GHX_MEMBER_TIER(is_a_number(SRC_ID_VALUE)) 上创建索引 src_id_num_fbi ；

3.  在查询中使用该函数：

    ... ON is_a_number(A.SRC_ID_VALUE) = B.PRICE_TIER_KEY

只有您可以决定这是否值得努力。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T06:18:08.237

尝试更改`ON A.SRC_ID_VALUE = B.PRICE_TIER_KEY`为`ON A.SRC_ID_VALUE = to_char(B.PRICE_TIER_KEY)`.

来自[手册](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements002.htm#i53062)：“将字符值与数值进行比较时，Oracle 将字符数据转换为数值。”。这种隐式转换并不总是安全的，您需要强制 Oracle 将数字转换为字符串。

# ios - 区分ios中的主页按钮单击和来电？

> ID：14744388
> 
> 赞同：2
> 
> 时间：2013-02-07T05:40:55.770
> 
> 标签：ios

是否有任何解决方案可以区分手动退出应用程序（通过主页按钮单击）和通过来电退出应用程序？

请帮忙！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:48:22.597

是的，有点。

单击主页按钮或关闭屏幕将导致您的应用程序进入后台（`applicationDidEnterBackground`），而电话不会，只会让您的应用程序退出其活动状态（`applicationWillResignActive`）。

但是，其他操作（例如提升多任务栏）也会导致您的应用程序退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:53:38.473

您无法处理主页按钮单击。但是，当用户单击主页按钮或点击应用程序图标时，*应用程序的**委托*方法会被调用。您可以在其中编写代码。

 *```
- (void)applicationWillResignActive:(UIApplication *)application
{
   /* Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
 Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
 */
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
/*
 Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
 If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
 */
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
/*
 Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
 */
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
/*
 Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
 */
}

- (void)applicationWillTerminate:(UIApplication *)application
{
/*
 Called when the application is about to terminate.
 Save data if appropriate.
 See also applicationDidEnterBackground:.
 */
} 
```

愿它帮助您解决旅游问题。*

# c++ - 如何仅通过 '\n' 分隔 istream 中的字符串？

> ID：14744395
> 
> 赞同：-2
> 
> 时间：2013-02-07T05:41:24.073
> 
> 标签：c++, string, stream, iostream, separator

给定一个包含字符串“Hello World”的文件（请注意，“Hello”和“World”之间有一个空格）。

```
int main()
{
    ofstream fout("test.txt");
    fout.write("Hello World", 12);
    fout.close();

    ifstream fin("test.txt");
    vector<string> coll((istream_iterator<string>(fin)),
                        (istream_iterator<string>()));
    // coll contains two strings 'Hello' and 'World' rather than 
    // one string "Hello World" that is just I want.
} 
```

换句话说，我希望 istream 中的字符串只能用 '\n' 分隔，而不是用 ' '、'\n' 等分隔。

我应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T05:41:55.983

改为使用[`std::getline(std::cin,str)`](http://en.cppreference.com/w/cpp/string/basic_string/getline)。第三个参数做你想做的事，它默认为`'\n'`. `std::cin >> std::noskipws >> str`或者，您可以通过设置传递或完全关闭标志来禁用跳过空格`std::cin.unsetf(std::ios::skipws)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T05:47:41.233

要从中读取一行`ifstream`，您可以使用[std::getline](http://en.cppreference.com/w/cpp/string/basic_string/getline)。[std::getline](http://en.cppreference.com/w/cpp/string/basic_string/getline)的默认分隔符是`\n`

```
int main(int argc, const char * argv[])
{
    ifstream fin("test.txt");
    std::string str;

    while (std::getline(fin, str))
    {
        cout << str << endl;
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T05:47:03.040

```
string str;
while(fscanf(fin,"%s\n",&str)); 
```

# sql - 列出房间可用[酒店预订]

> ID：14744399
> 
> 赞同：0
> 
> 时间：2013-02-07T05:41:38.830
> 
> 标签：sql

在`not`查询中，它仍然返回具有取消状态的房间名称，但是当我删除用于捕获日期的查询时，它`status !='cancelled'`正在工作。捕获日期的查询有问题吗？

```
$tbl_comp=mysql_query("SELECT * FROM roomlist 
WHERE type='$roomtype' and status = '1' 
and name NOT IN(select name from roomreservation where status  !='cancelled'

and 
arrival between '$arrival' and '$departure'
or departure between '$arrival' and '$departure'
or '$arrival'  between arrival and departure
or '$departure' between arrival and departure)"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:32:05.963

查询的主要问题是`status != 'cancelled'`仅适用于日期测试的第一部分。

另一个问题是`BETWEEN`进行包容性比较，而您可能在另一预订出发的同一天接受新到货。您需要使用 < 和 > 而不是 比较日期`BETWEEN`。但是，内部查询中的测试可以简化为：

```
SELECT name FROM roomreservation
WHERE status != 'cancelled'    -- if cancelled: no conflict 
AND '$arrival' < departure     -- if $arrival >= departure: no conflict
AND '$departure' > arrival     -- if $departure <= arrival: no conflict 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T09:13:28.363

它为我工作

```
SELECT
    *
FROM
    reservation
WHERE
    room = "3" AND
    status = 1 AND
    '2015-12-03' BETWEEN arrival AND departure OR
    '2015-12-06' BETWEEN arrival AND departure 
```

# java - 来自 Java 的 Linux MV 命令

> ID：14744401
> 
> 赞同：-1
> 
> 时间：2013-02-07T05:41:40.303
> 
> 标签：java, linux

我想知道如何使用 java 中的 linux MV 命令。我尝试了各种代码，但对我没有用。你能告诉我如何将文件从一个目录移动到Linux操作系统中的另一个目录从java。我的问题是如何使用 java 中的 linux MV 命令而不是如何在 java 中移动文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:51:32.467

如果您在 *nix 系统上运行 Java 应用程序，并假设您的应用程序有权执行 mv 命令，请尝试以下代码

```
String[] shCommand = {"/bin/sh", "-c", "mv somefile newfile"}; 

    // creates a process to run the command in
    Runtime rt = Runtime.getRuntime();
    Process prcs = null;
    try
    {
        // run the command
        prcs = rt.exec(shCommand);
    }
    catch (Exception e)
    {
        console.err("Execute Command Error:");
        e.printStackTrace();
    } 
```

您需要创建一个 Runtime 以与您的 Java 应用程序正在运行的环境（在本例中为 *nix）和 Process 以在该环境中运行一个进程进行交互

编辑：您可能不需要 Process 部分，因为我通常使用它让我的应用程序等待命令完成执行或获取退出代码，因此如果您不需要这些，您可以省略 Process 部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:47:08.623

`System.getRuntime().exec("bash mv ....");`

替换为您的实际命令并执行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:15:59.080

这会起作用：

```
Runtime runtime = Runtime.getRuntime();
String[] runCommand = new String[3];
runCommand[0] = "sh";
runCommand[1] = "-c";
runCommand[2] = "mv a.txt b.txt";
Process process = runtime.exec(runCommand);
process.waitFor(); 
```

# python - Virtualenv：重启后包丢失

> ID：14744410
> 
> 赞同：1
> 
> 时间：2013-02-07T05:42:12.490
> 
> 标签：python, django, virtualenv

我在我的 virtualenv 上使用 pip 安装了一些软件包，并让所有东西立即运行：

```
$ sudo apt-get install python-virtualenv
$ sudo pip install virtualenvwrapper
$ export WORKON_HOME=~/projects
$ source /usr/local/bin/virtualenvwrapper.s
$ mkvirtualenv pa 
```

在这之后我安装了一些包，它们运行得很好，我早上坐下来处理这些，没有一个包在那里。我做错了什么吗？

**更新 ：**

如果我尝试创建另一个环境，这是我得到的错误：

```
ImportError: No module named virtualenvwrapper.hook_loader 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:23:11.133

我认为你应该在你的 .bashrc 文件中写 export ，这样当你运行你的终端时它就可以激活。在您的 ~/projects 文件中，可能有另一个文件只包含环境，在这种情况下，您的导出必须指向该文件。

这是我的 .bashrc 设置

> export WORKON_HOME=$HOME/DEV/Envs #我的目录到envs
> 
> 源 /usr/local/bin/virtualenvwrapper.sh
> 
> export PIP_VIRTUALENV_BASE=$WORKON_HOME # 告诉 pip 在 $WORKON_HOME 中创建它的 virtualenvs。
> 
> export PIP_RESPECT_VIRTUALENV=true # 告诉 pip 自动使用当前活动的 virtualenv。
> 
> export VIRTUALENV_DISTRIBUTE=true # 使用分发

另请参阅这是否有帮助[https://stackoverflow.com/a/11512580/2007842](https://stackoverflow.com/a/11512580/2007842)

# android - 如何在自定义光标适配器android中停止列表视图滚动上的列表回收

> ID：14744414
> 
> 赞同：0
> 
> 时间：2013-02-07T05:42:25.550
> 
> 标签：android, listview, scroll

我正在创建一个按类别划分的列表，我正在使用 View Holder 在列表视图中传递一个视图（使用简单光标适配器）。因此，在我的自定义简单光标适配器中，我可以在列表的每个项目上设置一个条的可见性。**但是在滚动时，该栏的可见性对于列表项不是固定的，它会随机上下变化。**检查我在这里发布的代码。

当我从正常活动中调用我的自定义光标列表适配器的构造函数时，只有我传递所有参数（视图、光标），并且*我只是骑着绑定视图*而不是 newview。

请帮助我。

活动是：

```
 catCount = cursorCat.getCount();
int i=0;
cursorCat.moveToFirst();
do {
categ  =  cursorCat.getString(cursorCat.getColumnIndex("category_Name")); 
cursorCatItems = db.rawQuery("SELECT _id, product_code, product_name, product_category, in_stock, price FROM ProductDetails WHERE _id || ' ' || product_name || product_code LIKE ? ",
new String[] { "%" +searchValue+ "%"});

adapter = new MforceAdapterCat(this, R.layout.item_details,
cursorCatItems, new String[] { "product_code", "product_name","product_category","in_stock","price" }, new int[] {
R.id.tvCode, R.id.tvItemName,R.id.tvItemType,R.id.tvQuantity,R.id.tvPrice });

listView.setAdapter(adapter);

i++;
} while (cursorCat.moveToNext() && i<catCount-1);              

cursorCat.close();

// down here is the code for list view items

      @SuppressLint("NewApi")
      public class MforceAdapterCat extends SimpleCursorAdapter {
        String prevCat="";
    int count=0;
    private final String TAG = this.getClass().getSimpleName();

    protected ListAdapter adapter;

    public MforceAdapterCat(Context context, int layout, Cursor c,
            String[] from, int[] to, int flags) {
        super(context, layout, c, from, to, flags);
        // TODO Auto-generated constructor stub
    }

@SuppressWarnings("deprecation")
public MforceAdapterCat(Context context, int layout, Cursor c,
        String[] from, int[] to) {
    super(context, layout, c, from, to);
    // TODO Auto-generated constructor stub
}

@Override
public int getItemViewType(int position) {
    // TODO Auto-generated method stub
    return super.getItemViewType(position);
}

   @Override
    public void bindView(View view, Context context, Cursor cursor) {
        super.bindView(view, context, cursor);

        ViewHolder holder = (ViewHolder) view.getTag();

        holder = new ViewHolder();

            holder.tvCode = (TextView) view.findViewById(R.id.tvCode);
            holder.tvItemName = (TextView) view.findViewById(R.id.tvItemName);
            holder.tvItemType = (TextView) view.findViewById(R.id.tvItemType);
            holder.tvPrice = (TextView) view.findViewById(R.id.tvPrice);
            holder.tvQuantity = (TextView) view.findViewById(R.id.tvQuantity);
            holder.imgBtnLv=(ImageButton) view.findViewById(R.id.imgBtnLv);
            holder.categBar=(LinearLayout) view.findViewById(R.id.categBar);
            holder.tvTitleCateg=(TextView) view.findViewById(R.id.tvTitleCateg);

            holder.item_detail_layout=(RelativeLayout) view.findViewById(R.id.item_detail_layout);

            String currCategory =   cursor.getString(cursor.getColumnIndex("product_category"));

         holder.tvTitleCateg.setText(currCategory);

         if(prevCat.equalsIgnoreCase(currCategory)){

             holder.categBar.setVisibility(View.GONE);

         }else{

                    holder.categBar.setVisibility(View.VISIBLE);

         }

         prevCat= currCategory;

         OnClickListener mOnImagebtnClickListener = new OnClickListener() {
                @Override
                public void onClick(View v) {
                    final int position = ProductsActivity.listView.getPositionForView((View) v.getParent());
                    Log.v(TAG, "Image button in list clicked, row ="+position);

                    ListAdapter la=     ProductsActivity.listView.getAdapter();
                       System.out.println("list adapter from get is ="+la);

                    int cnt =     getPositionFromRowId(la, position, 0, la.getCount());

                     System.out.println("info from new mthod ="+cnt);

                }
            };

            holder.imgBtnLv.setOnClickListener(mOnImagebtnClickListener);

            view.setTag(holder);

    }

    static class ViewHolder {
        TextView tvCode;
        TextView tvItemName,tvItemType,tvPrice,tvQuantity;
         RelativeLayout item_detail_layout;
         ImageButton imgBtnLv;
         LinearLayout categBar;
         TextView tvTitleCateg;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:49:06.647

您使用 ViewHolder 的方式毫无意义。恕我直言，这是没用的。见这里： [http ://www.jmanzano.es/blog/?p=166](http://www.jmanzano.es/blog/?p=166)

您没有在这里夸大任何视图，因此您不需要它。ViewHolder 应该用于删除多余的视图膨胀和重用视图，但在光标适配器中重用视图已经完成。所以你可以删除它。

# html - 如何将html锚中的两个参数发送到asp.net mvc

> ID：14744424
> 
> 赞同：0
> 
> 时间：2013-02-07T05:43:18.170
> 
> 标签：html, asp.net-mvc, asp.net-mvc-4

我想在锚中发送 id 和字符串

```
 <a id="senurl" href="/Admin/Coupon1/Reject/@Model.id" class="btn">Reject Coupon</a> 
```

或者做这个拒绝优惠券

```
**action**

    public ActionResult Reject(int id, string ChangeId){

    } 
```

或者做这个拒绝优惠券

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:51:07.227

使用`Html.ActionLink`而不是手动创建 URL。它更干净，处理相对路径，并考虑注册的路线。

例子：

```
@Html.ActionLink( 
     "Reject Coupon",
     "Reject", 
     new { id = Model.id, ChangeId = "foo" } ) 
```

如果您想要更多控制，您可以生成与锚点分开的 URL`Url.Action`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T07:18:48.760

你可以用这个

```
<a href='@Url.Action("Reject", "controllername", 
    new { id = Model.id, ChangeId = "foo" })'>
Hello</a> 
```

如果你想使用 html

# javascript - jQuery ajax 不返回整个对象

> ID：14744429
> 
> 赞同：1
> 
> 时间：2013-02-07T05:43:38.167
> 
> 标签：javascript, jquery, ajax

每当我这样做：

```
$.ajax({
  //my settings
}).done(function(data){
  // Publish or store data
}); 
```

它工作得很好！但是，我正在尝试应用观察者模式，因为我必须这样做，但是当我这样做时，请使用以下代码：

```
$.ajax({
  // my settings
}).done(function(data){
  $(document).trigger('ALLREADY',data);
});

// Some other part of the code
$(document).on('ALLREADY',function(e,data){
  console.log(data); // WHY?!
}); 
```

响应（数据）只存储第一个值，而不是整个数组，就像第一个示例一样，我做了什么来破坏功能？

PS：请注意，即使它只返回一个所谓的大数组的第一个值，即使我尝试使用它，它也不会让我，但是，我可以记录它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:50:29.640

由于`data`是一个数组，因此每个单独的片段都作为事件回调中的单独参数发送。这很奇怪，因为如果`data`是一个对象，情况就不是这样了（你可以像 一样使用它`data`）。

相反，只需使用`data = arguments.slice(1)`

# jquery - jquery 使用 offset().top 定位不一致

> ID：14744431
> 
> 赞同：1
> 
> 时间：2013-02-07T05:44:00.490
> 
> 标签：jquery, position, positioning, offset

我只是想将#elementA 相对于#elementB 定位。一半的时间以一个最高值结束，一半的时间得到另一个，我不知道为什么。#elementA 以此 CSS 开头：

```
#elementA {
    display: block;
    opacity: 0;
    position: absolute;
    clear: both;
    margin-left: -49px;
} 
```

然后，在 $(document).ready() 上，我设置了最高值并将其淡入。

```
var p = $('#elementB').offset();
$('#elementA').css({
    top: p.top - 2
});
$('#elementA').animate({opacity: 1}, 400); 
```

为什么我得到不一致的结果？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:02:27.503

我发现了问题。我认为因为我在 $(document).ready() 上执行此操作，所以我不必担心资产加载会影响定位。但事实证明，#elementA 上方的图像在没有及时加载时将其丢弃。等待 $('other image').load() 修复它。

# c# - System.ApplicationException：DeleteTimerNative 中的应用程序出错

> ID：14744436
> 
> 赞同：0
> 
> 时间：2013-02-07T05:44:45.087
> 
> 标签：c#, .net, winforms, timer

在我们的代码中，我们有一个计时器，它将检查服务器是否已连接。如果未连接将尝试重新连接服务器。

代码如下

```
private void timer_Elapsed(object source, ElapsedEventArgs e)
{
   timer.Stop();
   if (timer.Interval != serverTimeOut)
   {
     timer.Interval = serverTimeOut;
   }

   timer.Start();
   //below the code to check whether server connected or not

} 
```

我们得到了这样的例外

```
Class: System.Threading.TimerBase
Function: DeleteTimerNative
Exception: System.ApplicationException: Error in the application.
   at System.Threading.TimerBase.DeleteTimerNative(SafeHandle notifyObject)
   at System.Threading.TimerBase.Dispose()
   at System.Threading.Timer.Dispose()
   at System.Timers.Timer.set_Enabled(Boolean value)
   at System.Timers.Timer.Stop()
   at ServerConnection.timer_Elapsed(Object source, ElapsedEventArgs e) 
```

在经过的事件中，我们将停止计时器并更改间隔，然后再次启动计时器。这个步骤会导致任何异常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:54:20.610

你为什么要停止和启动计时器并设置间隔。您应该只检查服务器是否已连接。

**更新**

您正在停止计时器，这会删除事件内的本机计时器。不是一个好主意。你不能只设置间隔而不停止和启动。

```
private void timer_Elapsed(object source, ElapsedEventArgs e)
{
   if (timer.Interval != serverTimeOut)
     timer.Interval = serverTimeOut;

   //below the code to check whether server connected or not

} 
```

# javascript - 当使用背景颜色设置时，HTML 选择框在 android 4.0 版上不显示下拉箭头

> ID：14744437
> 
> 赞同：23
> 
> 时间：2013-02-07T05:44:51.173
> 
> 标签：javascript, html, css, cordova, webkit

我需要将选择框的背景颜色设置为黄色。当我测试时，它确实在 android 2.3 和 android 3.0 上显示带有黄色和箭头的框。

但在 android 4.0 上，它将选择显示为完全黄色，没有下拉箭头。

知道如何解决这个问题吗？

我正在用电话间隙设计这个。

这是我为 html 选择设置背景颜色的代码。

```
<select style="background-color:#FFFF00;border:#FFFF00;height:25px;font-family:Arial, Helvetica, sans-serif; color:#000000; font-size:14px; font-weight:bold; text-align:center;">
          <option></option>
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>

        </select> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-13T09:58:03.373

Android 浏览器对`<select>`s 的渲染是错误的，如果应用了背景或边框，它将删除正常的样式。

由于`<select>`s 看起来不像`<select>`s 是一个相当大的可用性问题，所以最好的办法是不要只为这个浏览器设置样式。

不幸的是，没有纯 CSS 方式来选择/排除 Android 浏览器，所以我建议您使用布局引擎（[https://github.com/stowball/Layout-Engine](https://github.com/stowball/Layout-Engine)`.browser-android` ），它会在`<html>`标签中添加一个类。

然后，您可以`<select>`设置除 Android 浏览器之外的所有 s 的样式，如下所示：

```
html:not(.browser-android) select {
    background: #0f0;
    border: 1px solid #ff0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-29T05:31:07.003

我遇到了同样的问题，直到现在我还想知道为什么会发生这种情况，因为其他一些项目不会发生这种情况。

在尝试了解有关 Bootstrap 和 Foundation Framework 的更多信息时，我在 bootstrap 上找到了解决方案，因为如果我们提到下拉菜单的边框或背景，他们已经在某些移动设备上提出了这个问题。

我没有从任何人那里获得荣誉，但想分享提到它的页面链接并给出解决方案

引导程序：[https ://getbootstrap.com/docs/4.0/getting-started/browsers-devices/#select-menu](https://getbootstrap.com/docs/4.0/getting-started/browsers-devices/#select-menu)

JS斌：http: [//jsbin.com/OyaqoDO/2](http://jsbin.com/OyaqoDO/2)

我希望这对可能面临此问题的其他人有用，此解决方案与引导程序有关。& 我可以根据您的项目需求进行修改吗？

```
<script>
var nua = navigator.userAgent;
var is_android = ((nua.indexOf('Mozilla/5.0') > -1 && nua.indexOf('Android ') > -1 && nua.indexOf('AppleWebKit') > -1) && !(nua.indexOf('Chrome') > -1));
if(is_android) {
        $('select.form-control').removeClass('form-control').css('width', '100%');

}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:28:49.840

像这样的东西可能会在片刻之后重新计算，因为当时孩子的 outerHeight 在 android 上是错误的（正如我之前提到的）。

**window.setTimeout(function() {$(window).trigger('resize');}, 1500);**

……可以吗？是的，这似乎有帮助。

显然，您只希望在初始加载阶段有时间过去后触发一次（在规范的明显错误中，所有其他人目前都在遵守）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T06:31:55.993

正如马特所指出的，如果您将任何类型的边框或背景应用于菜单，您将蒸发下拉箭头。

最简单的解决方案，只需删除任何边框或自定义背景颜色。这将在 Android 设备上为您留下漂亮的白色和灰色“现代”下拉箭头。我认为没有任何网站不适合它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-01T08:41:24.860

如果您不想为此使用 JavaScript 和/或只是对 UA 嗅探感觉不好（您应该这样做），但可以少针对少数浏览器：

```
select
{
    /* common, “safe” styles */
}
@supports (appearance: none)
{
    select
    {
        /* borders and backgrounds */
    }
} 
```

值得注意的缺席者都是 IE（Edge 将获得完整的样式）： [http ://caniuse.com/#feat=css-featurequeries](http://caniuse.com/#feat=css-featurequeries)

# spring - 在 Spring REST 环境中设置请求响应属性

> ID：14744442
> 
> 赞同：0
> 
> 时间：2013-02-07T05:45:19.440
> 
> 标签：spring, rest, attributes, httprequest, httpresponse

我们有一个产生 json 响应的 Spring REST 环境。下面是用于发送 json 响应的代码

```
@GET
@Path("/userinfo.json/{userid}")
@Produces("application/json")
public List<UserinfoBean> getUserAllInformation(@PathParam("userid") String userid) 
{
    return openServicesAPI.getUserAllInformation(userid);
} 
```

谁能告诉我如何设置请求/响应属性，如果可能的话，在这里创建一个 HTTPsession。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:49:41.120

使用`@Context` 它会给你上下文信息

```
getUserAllInformation(@Context HttpServletRequest request,
@Context HttpServletResponse response,
@PathParam("userid") String userid){

//...

} 
```

# css - 不能将一个 div 放在另一个下方 - 它们现在彼此重叠

> ID：14744443
> 
> 赞同：1
> 
> 时间：2013-02-07T05:45:21.900
> 
> 标签：css, html, position

我现在有 2 个容器，我希望其中 1 个容器位于另一个容器下方。在这些容器中的每一个中，我都有 2 个并排的 div 由这篇文章提供：[是否可以在不使用 CSS 浮动的情况下并排放置两个 div 元素？](https://stackoverflow.com/questions/7448363/is-it-possible-to-put-two-div-elements-side-by-side-without-using-css-float)

```
<div id="container">
    <div class="one">testing one</div>
    <div class="two">testing two</div>
</div>
<div id="container">
    <div class="one">testing three</div>
    <div class="two">testing four</div>
</div> 
```

[http://jsfiddle.net/zWk2y/14/](http://jsfiddle.net/zWk2y/14/)

我想要一个和两个，三个和四个彼此相邻，但一个和两个在三个和四个之上，所以它形成一个 2x2 网格。但它不断出现在彼此之上。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T05:52:14.527

**[现场演示](http://jsfiddle.net/ranasaani/zWk2y/1/)**

HTML

```
<div id="container1">
  div class="one">testing one</div>
  <div class="two">testing two</div>
</div>
<div id="container2">
   <div class="one">testing three</div>
   <div class="two">testing four</div>
</div> 
```

CSS

```
#container1, #container2 {
    padding: 0 0 0 8%;
    width: 100%;
}
.one {
    width: 45%;
    position: relative;
    display:inline-block;
}
.two {
    width: 45%;
    position: relative;
    display:inline-block;
} 
```

您`container`对两个 div 使用相同的 id。ID 应该是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:47:34.060

使用`<div class="container">`并应用以下 CSS：

```
.one {
    width: 45%;
    display: inline-block;
}
.two {
    width: 45%;
    display: inline-block;
} 
```

见[小提琴](http://jsfiddle.net/pNpSB/3/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:51:47.380

首先，您不能使用 id 作为重复，您可以像这样更改它吗

HTML

```
<div class="container">
<div class="one">testing one</div>
<div class="two">testing two</div>
</div>
<div class="containers">
<div class="one">testing three</div>
<div class="two">testing four</div>
</div> 
```

CSS

```
.container {
padding: 0 0 0 8%;
width: 100%;

}

.containers{
padding: 0 0 0 8%;
width: 100%;

}

.one {
width: 45%;
position: relative;
left: 0;
}

.two {
width: 45%;
position: relative;
left: 50%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T05:54:23.157

您的标记几乎没有问题。请参阅下面的演示和代码：

[**演示**](http://jsfiddle.net/L8SK3/)

HTML：

```
<div id="container1">
    <div class="one">testing one</div>
    <div class="two">testing two</div>
</div>
<div id="container2">
    <div class="one">testing three</div>
    <div class="two">testing four</div>
</div> 
```

CSS：

```
#container1 {
background-color:yellow;
}
#container2
{
    background-color:orange;
}
.one,.two
{
    display:inline-block;
    width:49%;
    border:1px solid;
    height:30px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T05:56:42.473

```
.container {
    padding: 0 0 0 8%;
    width: 100%; 
}
.one {
width:50%;
float:left;
}
.two {
width:50%;
float:left;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T06:01:31.270

简单的，

```
.container {
    padding: 0 0 0 8%;
}
.inner {
    float:left;
    width:45%;
}

<div  class="container">
    <div class="inner">testing one</div>
    <div class="inner">testing two</div>
</div>
<div class="container">
    <div class="inner">testing three</div>
    <div class="inner">testing four</div>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T06:04:55.593

如果你想使用浮点数，你可以这样做。

**HTML：**

```
<div class="container">
    <div class="one">one</div>
    <div class="two">two</div>
</div>
<div class="container">
   <div class="one">three</div>
   <div class="two">four</div>
</div> 
```

**CSS：**

```
.container {
    padding: 0 0 0 8%;
    width: 100%;
    position: relative;
    overflow: hidden;
}
.one {
    width: 45%;
    position: relative;
    left: 0;
    float: left;
}
.two {
   width: 45%;
   position: relative;
   float:left;
} 
```

您不能有两个具有相同 id 的元素。替换`<div id="container">`为 `<div class="container">`

示例：http: [//jsfiddle.net/hVgQv/](http://jsfiddle.net/hVgQv/)

# spring - 在 Spring 中使用哪个 servlet 生成 Web 服务

> ID：14744450
> 
> 赞同：0
> 
> 时间：2013-02-07T05:46:18.613
> 
> 标签：spring

我想用 Spring3 创建 Web 服务（使用自下而上的原则）。

在这里，我对需要在 web.xml 文件中声明的 servlet 感到困惑。

我在 Google 中获得了两个使用不同 servlet 的参考。

1> org.springframework.ws.transport.http.MessageDispatcherServlet 2> com.sun.xml.ws.transport.http.servlet.WSSpringServlet

谁能建议我将哪个 servlet 用于 Spring Web Service ？

我也面临网络服务中的 DI 问题。

这是我的网络服务配置 sel-ws-config.xml 文件....

```
<?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:wss="http://jax-ws.dev.java.net/spring/servlet"
        xmlns:ws="http://jax-ws.dev.java.net/spring/core"   
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                            http://www.springframework.org/schema/context
                            http://www.springframework.org/schema/context/spring-context-3.0.xsd
                            http://jax-ws.dev.java.net/spring/core
                            http://jax-ws.dev.java.net/spring/core.xsd
                            http://jax-ws.dev.java.net/spring/servlet
                            http://jax-ws.dev.java.net/spring/servlet.xsd
                            ">

    <!-- FOR DEPENDENCY INJECTION -->                           
    <context:component-scan base-package="com.eks.sel.web.service" />

    <!--SET THE SERVICE ANNOTATION DRIVEN -->
    <!-- <wss:annotation-driven/> -->                           

    <!--DECLARE WEB SERVICE BEAN DETAILs -->
    <wss:binding url="/authenticateUserService">
        <wss:service>
            <ws:service  bean="#authenticateUserServiceBean" />                     
        </wss:service>      
    </wss:binding>

    <bean id="authenticateUserServiceBean" class="com.eks.sel.web.service.AuthenticateUserWS">
         <property name="userService">
            <ref bean="userService" />  
        </property> 
    </bean>

</beans> 
```

这是Web服务bean的代码......

```
package com.eks.sel.web.service;

import java.util.Map;

import javax.inject.Inject;
import javax.jws.WebMethod;
import javax.jws.WebService;

import org.apache.log4j.Logger;
import org.springframework.stereotype.Service;

import com.eks.sel.controller.PageRenderConstant;
import com.eks.sel.service.IUserService;
import com.eks.sel.service.bean.SELUserVO;
import com.eks.sel.web.service.bean.AuthenticateUserReq;
import com.eks.sel.web.service.bean.AuthenticateUserRes;

@Service("authenticateUserWS")
@WebService
public class AuthenticateUserWS {

    public static final Logger LOGGER = Logger.getLogger(AuthenticateUserWS.class);

    /**
     * USER SERVICE DI : TO CALL AUTHENTICATE SERVICE
     */     

    /*@Autowired
    private IUserService userService;

    public IUserService getUserService() {
        return userService;
    }

    public void setUserService(IUserService userService) {
        this.userService = userService;
    }*/

    public IUserService userService;

    @Inject
    public AuthenticateUserWS(IUserService userService){
        this.userService = userService;
    }

    /**
     * WEB SERVICE USED TO AUTHENTICATE USER
     * @param req
     * @return
     */
    @WebMethod
    public AuthenticateUserRes authenticateUser(AuthenticateUserReq req){
        AuthenticateUserRes resp = null;
        try{
            if(this.userService==null){
                resp = new AuthenticateUserRes();
                resp.setRespCode(false);
                resp.setRespMessage("Injection Failed");
            }else if(req.getUserName()!=null && req.getPassword()!=null && req.getUserName().trim().length()>0
                    && req.getPassword().trim().length()>0){

                //CALL AUTHENTICATE SERVICE
                Map respMap = userService.checkUserCredential(req.getUserName(),req.getPassword());

                if(respMap!=null && respMap.get(PageRenderConstant.USER_VO)!=null){
                    SELUserVO userVo =(SELUserVO) respMap.get(PageRenderConstant.USER_VO);

                    //PREPARE RESPONSE WITH SUCCESS MESSAGE
                    resp = new AuthenticateUserRes();
                    resp.setRespCode(true);
                    resp.setRespMessage("VALID USER");
                    resp.setStoreCode(userVo.getSiteId());
                    resp.setStoreDesc(userVo.getSiteName());

                }else{
                    //PREPARE RESPONSE WITH ERROR
                    resp = new AuthenticateUserRes();
                    resp.setRespCode(false);
                    resp.setRespMessage("Invalid username OR Password");
                }
            }else{
                //PREPARE RESPONSE WITH ERROR
                resp = new AuthenticateUserRes();
                resp.setRespCode(false);
                resp.setRespMessage("Please provide valid username OR password");
            }           

        }catch(Exception ex){
            LOGGER.fatal("Exception generated in authenticate user web service : ",ex);

            //PREPARE RESPONSE WITH ERROR
            resp = new AuthenticateUserRes();
            resp.setRespCode(false);
            resp.setRespMessage("Error while validation : "+ex.getMessage());
        }
        return resp;
    }

} 
```

这是我的 web.xml 文件...

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:/META-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>com.eks.sel.listener.SELApplicationListener</listener-class>
    </listener>

    <!-- SPRING HANDLER FOR DISPATCHING REQUEST -->
    <servlet>
        <servlet-name>selsad</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:/META-INF/spring/selsad/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>selsad</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>

    <!-- SERVLET FOR WEB SERVICE REQUEST PROCESSING -->
    <servlet>
        <servlet-name>spring-ws</servlet-name>
        <!-- <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class> -->
        <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
        <!-- <servlet-class>com.sun.xml.ws.transport.http.servlet.WSSpringServlet</servlet-class> -->        
        <init-param>
            <param-name>transformWsdlLocations</param-name>
            <param-value>true</param-value>
        </init-param>        
    </servlet>  

    <servlet-mapping>
        <servlet-name>spring-ws</servlet-name>
        <url-pattern>*.wsdl</url-pattern>
    </servlet-mapping>

    <!-- PROJECT DISPLAY NAME -->
    <display-name>SELSAD</display-name>

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

这是我的 root-context.xml 文件...

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"   
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- Root Context: defines shared resources accessible to all other web components -->

    <!-- Property Config -->
    <import resource="property-config.xml"/>

    <!-- Database and Transaction Config -->
    <import resource="database-config.xml"/>

    <!-- SERVICE MODULE -->
    <context:component-scan base-package="com.eks.sel.service" />

    <!-- DAO MODULE -->
    <context:component-scan base-package="com.eks.sel.dao" />

    <!-- Mail Config -->
    <import resource="mail-config.xml"/>    

    <!-- Scheduler Config -->
    <import resource="scheduler-config.xml"/>

    <!-- Scheduler Config -->
    <import resource="scheduler-config-domain.xml"/>

    <!-- Web Service Config -->
    <import resource="sel-ws-config.xml"/>

</beans> 
```

**包括“ UserService** ”在内的所有服务都写在**com.eks.sel.service**包下。 **sel-ws-config.xml**是我上面提到的网络服务配置文件。

这是我的 userService bean，我在 Web 服务中使用它来验证用户..

```
package com.eks.sel.service;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.inject.Inject;

import org.apache.commons.lang.StringUtils;
import org.apache.commons.lang.math.RandomUtils;
import org.springframework.stereotype.Service;

import com.eks.sel.controller.PageRenderConstant;
import com.eks.sel.dao.IConceptDAO;
import com.eks.sel.dao.ISiteDAO;
import com.eks.sel.dao.IUserDAO;
import com.eks.sel.model.Concept;
import com.eks.sel.model.Site;
import com.eks.sel.model.User;
import com.eks.sel.service.bean.SELUserVO;
import com.eks.sel.util.SELUtil;

@Service("userService")
public class UserService implements IUserService {

    private IUserDAO userDAO;

    private ISiteDAO siteDAO;

    private IConceptDAO conceptDAO;

    /**
     * @param userDAO
     */
    @Inject
    public UserService(IUserDAO userDAO, IConceptDAO conceptDAO , ISiteDAO siteDAO) {       
        this.userDAO = userDAO;
        this.siteDAO = siteDAO;
        this.conceptDAO = conceptDAO;
    }

    @Override
    public Map checkUserCredential(String UserId, String password) {
        User user = this.userDAO.findById(UserId);
        Map userMap = new HashMap();        
        String result="INVALID";

        if(null!=user){
            if(null!=password && !"".equals(password) && password.equals(user.getPassword())){
                result="VALID";
                userMap.put(PageRenderConstant.USER_VO, getSelUserVo(user));
            }
        }
        userMap.put(PageRenderConstant.USER_LOGIN_MSG_KEY, result);
        return userMap;
    }

} 
```

使用依赖注入时出现以下异常...

```
org.apache.catalina.LifecycleException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.sun.xml.ws.transport.http.servlet.SpringBinding#0' defined in class path resource [META-INF/spring/sel-ws-config.xml]: Cannot create inner bean '(inner bean)' of type [org.jvnet.jax_ws_commons.spring.SpringService] while setting bean property 'service'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': FactoryBean threw exception on object creation; nested exception is javax.xml.ws.WebServiceException: Unable to create JAXBContext
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5389)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2000)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1651)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:294)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:462)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:382)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1045)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1244)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1232)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:459)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:209)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:168)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:238)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:619)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.sun.xml.ws.transport.http.servlet.SpringBinding#0' defined in class path resource [META-INF/spring/sel-ws-config.xml]: Cannot create inner bean '(inner bean)' of type [org.jvnet.jax_ws_commons.spring.SpringService] while setting bean property 'service'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': FactoryBean threw exception on object creation; nested exception is javax.xml.ws.WebServiceException: Unable to create JAXBContext
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:125)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
    ... 38 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': FactoryBean threw exception on object creation; nested exception is javax.xml.ws.WebServiceException: Unable to create JAXBContext
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:109)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:274)
    ... 56 more
Caused by: javax.xml.ws.WebServiceException: Unable to create JAXBContext
    at com.sun.xml.ws.model.AbstractSEIModelImpl.createJAXBContext(AbstractSEIModelImpl.java:171)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.postProcess(AbstractSEIModelImpl.java:99)
    at com.sun.xml.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:250)
    at com.sun.xml.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:343)
    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:205)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:513)
    at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:333)
    at org.jvnet.jax_ws_commons.spring.SpringService.getObject(SpringService.java:45)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    ... 58 more
Caused by: java.security.PrivilegedActionException: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 2 counts of IllegalAnnotationExceptions
com.eks.sel.service.IUserService is an interface, and JAXB can't handle interfaces.
    this problem is related to the following location:
        at com.eks.sel.service.IUserService
        at public com.eks.sel.service.IUserService com.eks.sel.web.service.jaxws.SetUserService.arg0
        at com.eks.sel.web.service.jaxws.SetUserService
com.eks.sel.service.IUserService does not have a no-arg default constructor.
    this problem is related to the following location:
        at com.eks.sel.service.IUserService
        at public com.eks.sel.service.IUserService com.eks.sel.web.service.jaxws.SetUserService.arg0
        at com.eks.sel.web.service.jaxws.SetUserService
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.createJAXBContext(AbstractSEIModelImpl.java:158)
    ... 66 more
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 2 counts of IllegalAnnotationExceptions
com.eks.sel.service.IUserService is an interface, and JAXB can't handle interfaces.
    this problem is related to the following location:
        at com.eks.sel.service.IUserService
        at public com.eks.sel.service.IUserService com.eks.sel.web.service.jaxws.SetUserService.arg0
        at com.eks.sel.web.service.jaxws.SetUserService
com.eks.sel.service.IUserService does not have a no-arg default constructor.
    this problem is related to the following location:
        at com.eks.sel.service.IUserService
        at public com.eks.sel.service.IUserService com.eks.sel.web.service.jaxws.SetUserService.arg0
        at com.eks.sel.web.service.jaxws.SetUserService
    at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:106)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:466)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:298)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:141)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1157)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:188)
    at com.sun.xml.bind.api.JAXBRIContext.newInstance(JAXBRIContext.java:111)
    at com.sun.xml.ws.developer.JAXBContextFactory$1.createJAXBContext(JAXBContextFactory.java:113)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:166)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:159)
    ... 68 more 
```

我无法理解这个问题。如果它是 servlet 的 bcoz 或其他问题生成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:30:22.607

您还没有真正发布您的完整配置（例如 web.xml）和/或您的问题到底是什么。另外，我不确定您所说的“自下而上”原则是什么意思。

对于 Web 服务设计，我们通常谈论“**契约优先**”或“**代码优先**”的方法，每一种都如其名称所暗示的那样：

*   首先编写您的合同（wsdl + xsd），然后创建符合该合同的代码，或者相反
*   首先编写您的代码（将服务公开为 Web 服务），然后从中创建（通常而不是编写只是自动生成）合同

说到 Spring，有一个由 Spring 家伙创建的 Web 服务框架，称为[Spring Web Services](http://static.springsource.org/spring-ws/sites/2.0/)，它大力提倡契约优先的方法。另一个流行的选择是[CXF](http://cxf.apache.org/)，它是一个非常成熟的框架，由 Apache 基金会的优秀程序员开发，具有一流的 Spring 支持。这真的取决于你选择哪一个。（也许如果您是初学者，CXF 可能更适合您使用代码优先方法，但是 CXF 也支持契约优先，对于更复杂的场景，这绝对是必经之路）

使用 Spring Web 服务的分步教程：http: [//static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html](http://static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html)

如何使用 CXF：[http ://cxf.apache.org/docs/writing-a-service-with-spring.html](http://cxf.apache.org/docs/writing-a-service-with-spring.html)

# iphone - 不兼容的指针类型将“NSURL *__strong”发送到“NSString *”类型的参数

> ID：14744454
> 
> 赞同：1
> 
> 时间：2013-02-07T05:46:41.563
> 
> 标签：iphone, ios, objective-c

```
NSString *urlString = [NSString stringWithFormat:@"http://shareaspetto.com/share/updateprofile.php?name=%@&gender=%@&email=%@&about_us=%@&id=%@&image=%@", nameString, genderString, emailString, aboutusString, idString, imgNameString];
NSLog(@"urlString = %@", urlString);
while ([urlString rangeOfString:@" "].location != NSNotFound) {
    urlString = [urlString stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
}    
NSString *rplyString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString]]; 
```

`Incompatible pointer types sending 'NSURL *__strong' to parameter of type 'NSString *'`当我编译上面的代码时会出现警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:00:38.403

隐蔽字符串`stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding`

```
NSString *urlString = [NSString stringWithFormat:@"http://shareaspetto.com/share/updateprofile.php?name=%@&gender=%@&email=%@&about_us=%@&id=%@&image=%@", nameString, genderString, emailString, aboutusString, idString, imgNameString];
urlString = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]
NSLog(@"urlString = %@", urlString);
while ([urlString rangeOfString:@" "].location != NSNotFound) {
    urlString = [urlString stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
}

NSString *rplyString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString]]; 
```

# c# - 如何使用 Naudio 将 WAV 流转换为 MP3？

> ID：14744455
> 
> 赞同：2
> 
> 时间：2013-02-07T05:46:45.103
> 
> 标签：c#, naudio

我在 Naudio 文档中看到了一个示例，它将 MP3 流转换为 WAV 流。我的疑问是，Naudio 是反过来做的吗？也就是说，它可以将 WAV 流转换为 MP3 流吗？如果是，请解释如何或帮助我提供一些参考资料。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T07:55:52.610

NAudio 不附带 MP3 编码器或解码器 - 它只是让您访问已安装在系统上的编解码器。在 Windows 8 之前，Windows 没有附带 MP3 编码器，所以最好的选择是使用[LAME.exe 之](http://lame.sourceforge.net/)类的东西转换为 WAV 。[我将在本文](http://www.codeproject.com/Articles/501521/How-to-convert-between-most-audio-formats-in-NET)结尾处解释如何即时执行此操作。

在 Windows 8 中，有一个 MP3 编码器，您可以使用新`MediaFoundationEncoder.EncodeToMp3`功能访问它。这是目前 NAudio v1.7 的预发布版本，但您可以通过[从 nuget 获取最新版本来](https://nuget.org/packages/NAudio/)试用它。

# java - Eclipse 中的 Ant 构建失败

> ID：14744456
> 
> 赞同：3
> 
> 时间：2013-02-07T05:46:46.147
> 
> 标签：java, ant

[在谷歌搜索后，我正在使用 ANT 构建我的项目的 jar 文件，发现我引用了这个](http://www.dzone.com/tutorials/java/ant/ant-sample-build-file-jar-1.html)墨水是怎么做的。下面是我的 build.xml 文件

```
<?xml version="1.0" ?> 
<project name="ExcelData" default="compress">

    <target name="init">
        <mkdir dir="build/classes" />
        <mkdir dir="dist" />
    </target>

    <target name="compile" depends="init">
        <javac srcdir="src" destdir="build/classes" />
    </target>

    <target name="compress" depends="compile">
            <jar destfile="dist/ExcelData.jar" basedir="build/classes" />
    </target>

    <target name="execute" depends="compile">
        <java classname="com.spt.excel.data.ExcelData" classpath="build/classes" />
    </target>

    <target name="clean">
        <delete dir="build" />
        <delete dir="dist" />
    </target>

</project> 
```

但问题是 ANT 大楼失败了。但我收到错误

```
D:\Eclipse\workspace\ExcelData\src\com\spt\excel\data\ExcelData.java:24: error: package org.slf4j does not exist` 
```

并将[此](http://forums.drftpd.org/viewtopic.php?f=5&t=2978&sid=478d8abc034aafaa05b5dfa880fdbde4)链接引用到设置 tools.jar。

谁能告诉我哪里出错了。先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T05:53:40.453

您的 ant 文件中没有包含库，我的意思是类路径，只需将您的 eclipse 项目包含的所有库添加到 ant 文件中，所有这些都可以工作，请阅读像[这样的原始教程](http://ant.apache.org/manual/using.html)

像那样

```
<javac srcdir="${src.dir}" destdir="${classes.dir}">
    <classpath>
        <pathelement location="${lib.dir}/lib1.jar"/>
        <pathelement location="${lib.dir}/lib2.jar"/>
    </classpath>
</javac> 
```

对于库

```
<path id="mylibs">
    <fileset dir="${lib.dir}" includes="**/*.jar"/>
</path>

<javac srcdir="${src.dir}" destdir="${build.dir}" classpathref="mylibs" debug="on"/> 
```

添加属性 lib.dir

```
 <property name="lib.dir"  location="{here is path to your libraries}"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T05:54:25.647

对于 Eclipse，我建议如下：

```
Right click your project -> Export -> Runnable Jar file 

Pick launch configuration, destination, extract required libraries into JAR, tick Save as ANT script

Finish. 
```

最终，您将生成 Jar 文件以及可重用的 Ant 脚本。

然后你分析你的 Ant 脚本。

[将库提取和打包到 jar 文件中的区别](https://stackoverflow.com/questions/9617420/difference-between-extracting-and-packaging-libraries-into-a-jar-file)

# php - 我的 php 代码不能在 Internet Explorer 9 上运行？

> ID：14744466
> 
> 赞同：-1
> 
> 时间：2013-02-07T05:47:35.097
> 
> 标签：php, internet-explorer-9

我正在使用会话在 php 中编写代码，它可以在 Mozilla 和 chrome 上运行，但在互联网上探索它不起作用？请帮我解决这个问题`

```

`<?php
session_start();
if(isset($_POST['submit']))
{
$_SESSION['IGNITE']="IGNITE -";
$_SESSION['IGNITE_price']=39.95;
$_SESSION['IGNITE_qty']+=1;
$_SESSION['total_ignite']+=39.95;
}

if(isset($_POST['submit1']))
{

$_SESSION['REBUILD']="REBUILD -";
$_SESSION['REBUILD_qty']+=1;
$_SESSION['REBUILD_price']=39.95;
$_SESSION['total_rebuild']+=39.95;
}
if(isset($_POST['submit2']))
{
$txt_rebuild=$_POST['txt_rebuild'];
$txt_ignite=$_POST['txt_ignite'];
$_SESSION['IGNITE_price'];
$_SESSION['REBUILD_qty']=$txt_rebuild;
$_SESSION['IGNITE_qty']=$txt_ignite;
$_SESSION['total_rebuild']=$_SESSION['REBUILD_price'] * $_SESSION['REBUILD_qty'];
$_SESSION['total_ignite']=$_SESSION['IGNITE_price'] * $_SESSION['IGNITE_qty'];
}
$grand_total=$_SESSION['total_rebuild']+$_SESSION['total_ignite'];
?>`` 

            回答 #1

赞同：1

时间：2013-02-07T06:08:13.323

PHP与您的浏览器无关，它在服务器中运行。

检查 IE 中是否启用了 cookie，应该启用 cookie 才能工作会话。

```

# ios - 适用于 iOS 的 Google Maps SDK 要求 GoogleMaps.bundle 成为“复制捆绑资源”下目标的一部分

> ID：14744479
> 
> 赞同：68
> 
> 时间：2013-02-07T05:48:38.123
> 
> 标签：ios, iphone, xcode, google-maps, google-maps-sdk-ios

当我为 iOS 构建 GoogleMaps SDK 时，发生了这些错误。

```
*** Terminating app due to uncaught exception 'GMSException', reason: 'Google Maps SDK for iOS requires GoogleMaps.bundle to be part of your target under 'Copy Bundle Resources'' 
```

但是，GoogleMaps.framework 在副本包资源中。所以，我很困惑。请告诉我这个问题的原因。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-02-20T23:04:31.050

说明有点欠缺。我希望这有帮助...

1.  启动 Xcode（简单）
2.  将 GoogleMaps.framework 包拖到项目的 Frameworks 组中。出现提示时，***选择将项目复制***到目标组的文件夹中。

3.  右键单击项目中的 GoogleMaps.framework，然后选择 Show In Finder。 ***它没有说的是......然后进入名为Resources的子文件夹***

4.  将 GoogleMaps.bundle 从 Resources 文件夹拖到您的项目中。我们建议将它放在框架组中。出现提示时，***确保未选择将项目复制到目标组的文件夹。***

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2017-08-10T08:00:44.967

对于在 SO 上搜索的 2017 年人们来说，最简单的方法确实是尝试安装和更新您的 pod，当然`pod install`还有`pod update`. 最后，通过这两个命令清理项目和构建：

1.  清洁构建：`Command + alt option + Shift + K`
2.  清洁项目：`Command + Shift + K`

然后瞧！崩溃不会再发生。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-24T02:32:59.763

如果您在此框架的更新版本中遇到此问题并且正在使用 CocoaPods 部署，请检查“*构建阶段”的“**复制 Pods 资源*”部分：

 *[![在此处输入图像描述](../Images/ae23d0ea71107bc0aecc9fcae010a18d.png)](https://i.stack.imgur.com/CpHJ2.png)

显然这部分丢失是一件事情，删除您的 Pods 目录并重新运行“ *pod install* ”不足以修复它。相反，您需要使用[这个](https://github.com/CocoaPods/cocoapods-deintegrate)方便的工具：

[https://github.com/CocoaPods/cocoapods-deintegrate](https://github.com/CocoaPods/cocoapods-deintegrate)

运行这个东西然后重新运行*pod install*并且你的“ *Copy Pods Resources* ”部分应该回来了，当你实例化你的地图时你不会得到这个异常。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-09-25T15:59:41.060

对于那些在 2017 年尝试使用 Xcode 9（第一个版本）和新构建系统的人，以下内容为我解决了这个问题。

注意：根本问题似乎是新的构建系统没有正确清理，因此您需要切换回旧系统。此外，截至 2017 年 9 月 25 日，谷歌地点选择器正在从主线程调用 UI，并在 Xcode 中引发错误。

-切换到旧的构建系统

-单击您的项目文件“我的应用程序名称”

- 在“目标”下单击您的应用名称（不是测试或 UITests！）

-构建阶段

-[CP] 复制 Pod 资源

- 你应该看到 ${PODS_ROOT}/GoogleSomething ，选择那些并点击 -

- 关闭 Xcode，运行 pod install。

- 打开 Xcode，Command-Shift-K（干净，并确保您使用的是旧构建系统！）

-构建/运行，现在应该可以工作了

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-03-22T11:36:51.473

运行“pod install”为我解决了这个问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-12-28T06:49:37.950

如果您通过 CocoaPods 安装了地图，请尝试以下步骤。

1.  转到目标 > 构建阶段
2.  禁用“仅在安装时运行脚本” [![在此处输入图像描述](../Images/e60cf52aec96df44b638211c126a0d9d.png)](https://i.stack.imgur.com/scjay.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-07-03T12:20:20.960

对我来说，我在手动安装中遇到了同样的问题。

1.在您的项目中右键单击 GoogleMaps.framework，然后选择 Show In Finder 。

1.  双击或打开此 GoogleMaps.framework。我们可以看到文件夹“资源”。（我已经为 GoogleMaps.bundle 可用的地方添加了图像屏幕截图）
2.  点击 Resources 文件夹我们可以找到 GoogleMaps.bundle

[![在此处输入图像描述](../Images/017d7dbeda5345891c1f1c1b93c6b305.png)](https://i.stack.imgur.com/4x1EI.png)

3.  现在只需将 GoogleMaps.bundle 拖放到您的项目中即可。确保未选择将项目复制到目标组的文件夹。 [![在此处输入图像描述](../Images/83bb5cc34bee836a64d948d5056598ab.png)](https://i.stack.imgur.com/XOLFe.png)

注意：确保未选择“如果需要，复制项目”目标组的文件夹。也请参阅屏幕截图。

现在清理 Command+Shift+K 或 Xcode-->Product--> Clean

这可能对某人有所帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-05-14T07:05:31.487

我遇到了同样的问题，请执行以下操作：

```
1\. Go to derived folder and delete the project folder
2\. Clean build and run 
```

修复了问题

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-18T02:16:27.867

由于未捕获的异常“GMSException”而终止应用程序，原因：“适用于 iOS 的 Google Maps SDK 需要 GoogleMaps.bundle 成为“复制捆绑资源”下目标的一部分

1.  找到你`GoogleMaps.bundle`会`GoogleMap.frameword/Resources`看到 GoogleMap.bundle
2.  `GoogleMaps.bundle`用`Base/Framework`GoogleMapsBase.framework拖入

希望这能有所帮助。谢谢

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-10-30T00:26:14.890

更新到 Xcode 9 Swift 3.2 后，我在 AppDelegate 中不断崩溃：

```
GMSServices.openSourceLicenseInfo() 
```

我一直在使用 Glenn 的回答来清理确实有效的项目，但最终崩溃不断发生。

为了解决它，我必须按照[Google Maps API Installation中的说明进行操作](https://developers.google.com/maps/documentation/ios-sdk/start#obtaining_an_api_key)

跟随：

*第 2 步：安装 SDK*并**手动安装**

**这很容易做到，但一开始有一件事情让我感到困惑，所以为了让下一个人清楚起见，我将其添加进去：**

一旦您阅读了手册说明并在第 4 条上显示：

```
4\. Drag the following bundles into your project (when prompted, select Copy items if needed): 
```

[![在此处输入图像描述](../Images/b44c1b8421453e267e2049c735389d85.png)](https://i.stack.imgur.com/eKW79.png)

东西在你下载的 zip 文件中，一旦你解压它，里面只有 2 个框架：

```
GoogleMaps.framework
GoogleMapsCore.framework 
```

不会有`GoogleMapsBase.framework`。我假设他们将它捆绑到`GoogleMaps.framework`?

一旦你到达 number `8: Open the Build Phases tab, and within Link Binary with Libraries, add the following frameworks:`。它列出了许多您必须导入的框架。

[![在此处输入图像描述](../Images/976e8caf21e98db58e88c6f12f77f7dc.png)](https://i.stack.imgur.com/sX5aZ.png)

问题是当您解压缩该 zip 文件并将它们拖到项目中时，它说要添加的前 3 个已添加（实际上其中两个已添加 -`GoogleMaps.framework`和）。`GoogleMapsCore.framework`

我一直在输入名字，什么都不会出现。

[![在此处输入图像描述](../Images/5f00b209c92fc21f7b172a8f8744dd61.png)](https://i.stack.imgur.com/TJRiq.png)

我一直在删除所有的谷歌框架，从头开始，然后再试一次，直到我意识到它们已经存在。基本上输入所有内容的名称`Accelerate.framework`-`UIKit.framework`你应该很好。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-01-04T15:33:49.470

**这样我就解决了我的问题。**

```
 1\. Delete the derived folder.
 2\. pod update
 3\. Clean Project and build. 
```

就这样*

# cruisecontrol.net - CruiseControl.NET 服务器在作为自动服务启动时处于“待定”活动状态

> ID：14744480
> 
> 赞同：1
> 
> 时间：2013-02-07T05:48:40.180
> 
> 标签：cruisecontrol.net

`Pending`当通过 CCTray 或 CCNet Web 仪表板触发强制构建时，我的 CruiseControl.NET 服务器处于活动状态。我似乎注意到它是在服务管理器中将 CC 服务设置为自动启动类型时这样做的。

`ccnet.exe`当我使用并触发强制构建作为控制台服务运行它时，它会正常进行。我在控制台上看不到任何错误，以帮助我弄清楚为什么它在作为正常服务运行时不起作用。

它最初设置为自动启动类型的服务，直到几天前似乎还可以正常工作。我不确定发生了什么变化，但我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T13:49:25.513

尝试设置项目的队列属性。我引用了项目配置块部分的队列属性文档。

> "该项目在集成队列中的优先级。如果多个项目在指定队列中有待处理的请求，则这些请求将根据其优先级执行。较低的优先级数字表示该项目的集成请求将在同一队列中的其他项目之前执行队列，但是优先级为 0 的项目总是在同一队列中优先级非零的项目之后执行。”

更多信息可以在[http://cruisecontrolnet.org/docs](http://cruisecontrolnet.org/)上找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:57:24.820

我唯一的猜测是，当您将其作为 ccnet.exe 运行时，它在您的帐户下运行，但是从服务管理器启动时，它在网络服务等服务帐户下运行，因此无法访问某些内容。

尝试将 Windows 服务配置为使用本地服务或本地系统帐户，或者甚至只是作为测试，输入您自己的帐户凭据。

无论您在哪个帐户下运行该服务，都不仅需要文件访问权限，而且可能还需要您的源代码控制系统的权限。

# sql - Sql 查询以公共基本单位（公顷）转换面积，然后获取其总和

> ID：14744489
> 
> 赞同：2
> 
> 时间：2013-02-07T05:49:09.577
> 
> 标签：sql, sql-server-2008

我有一个单位表，其中包含基本单位和转换单位的值

现在我有另一个表，它的值是 Total Area 和 Acquired Area 但值是不同的单位我想将 Total Area 和 Acquired Area 转换为公顷，然后添加它们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:01:20.183

```
SELECT SUM((t.Total_Area / (u.Converting_Unit / u.Base_Unit) + 
           (t.Total_Area1 / (u3.Converting_Unit / u3.Base_Unit)))) AS Sum_Total_Area,
       SUM((t.Acquired_Area / (u2.Converting_Unit / u2.Base_Unit) + 
           (t.Acquired_Area1 / (u4.Converting_Unit / u4.Base_Unit)))) AS Sum_Acquired_Area, 
       MAX(u4.Base_UnitCode) AS Base_Unit
FROM dbo.Total t JOIN dbo.Units u ON t.Total_Area_UnitCode = u.Unit_Name                 
                 JOIN dbo.Units u2 ON t.Acquired_Area_UnitCode = u2.Unit_Name
                 JOIN dbo.Units u3 ON t.Total_Area_UnitCode1 = u3.Unit_Name
                 JOIN dbo.Units u4 ON t.Acquired_Area_UnitCode1 = u4.Unit_Name 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/c2efc/11/0)上的演示[](http://sqlfiddle.com/#!3/c2efc/11/0)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:31:01.303

因此，假设您无法修复数据结构：

```
SELECT Total_Area * TotalConvertingTable.Base_Unit / TotalConvertingTable.Converting_Unit AS TotalHectareArea
       , Acquired_Area * AcquiredConvertingTable.Base_Unit / AcquiredConvertingTable.Converting_Unit AS AcquiredHectareArea
     FROM
         AreaTable
     INNER JOIN
         ConvertingTable AS TotalConvertingTable
     ON
         AreaTable.Total_Area_Unit_Code = TotalConvertingTable.Unit_Name
     INNER JOIN
         ConvertingTable AS AcquiredConvertingTable
     ON
         AreaTable.Acquired_Area_Unit_Code = AcquiredConvertingTable.Unit_Name 
```

AreaTable 是您问题中列出的第二个表格。ConvertingTable 第一个。

我们将 Areas 加入 Converting 表以得到换算系数，然后将源单位乘以换算系数得到以公顷为单位的输出。

我们还假设转换表仅包含公顷的基本单位，如果需要，您可以非常简单地过滤掉其他任何内容。

要包含 _1 字段将需要额外的连接。**

# javascript - 为什么这个简单的 javascript 程序不起作用？

> ID：14744493
> 
> 赞同：0
> 
> 时间：2013-02-07T05:49:18.287
> 
> 标签：javascript, html

警报窗口给我消息 NaN 出了什么问题？感谢所有的帮助

```
var weight = parseFloat(document.BMI.weight.value)
var height = parseFloat(document.BMI.height.value)

function calcBMI() {
var answer = weight * 703 / (height*height)
return answer;
  }
    </script>

 <form action="" name="BMI">
<input type="text" name="weight" />
<input type="text" name="height" />
<input type="submit" onclick="alert(calcBMI())" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T05:50:39.263

```
<script type="text/javascript">
function calcBMI() {
var weight = parseFloat(document.BMI.weight.value)
var height = parseFloat(document.BMI.height.value)
var answer = weight * 703 / (height*height)
return answer;
  }
    </script>

 <form action="" name="BMI">
<input type="text" name="weight" />
<input type="text" name="height" />
<input type="submit" onclick="alert(calcBMI())" />
</form> 
```

希望它现在可以工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:56:15.960

您需要将变量移动到函数调用中。*编辑..我被打败了。

```
<form action="" name="BMI">
  <input type="text" name="weight" />
  <input type="text" name="height" />
  <input type="submit" onclick="alert(calcBMI())" />
</form>

<script type="text/javascript">

function calcBMI() {
    var weight = parseFloat(document.BMI.weight.value)
    var height = parseFloat(document.BMI.height.value)
    var answer = weight * 703 / (height*height)
    console.log(weight);
    return answer;
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T05:58:10.610

```
 function calcBMI() {
    var weight = parseFloat(document.BMI.weight.value)
var height = parseFloat(document.BMI.height.value)
var answer = weight * 703 / (height*height)
return answer;
  }
    </script> 
```

局部变量和全局变量存在问题。当您单击按钮时，该功能不会从文本框中获取值

# .net - .NET EF - 分割一个字节字段会产生一个 int 而不是 double

> ID：14744495
> 
> 赞同：0
> 
> 时间：2013-02-07T05:49:25.347
> 
> 标签：.net, entity-framework

有趣的一个。

请参阅以下实体框架查询：

```
Entities.Select(x => new
{
    x.ExperienceMonths,
    Calculated = (x.ExperienceMonths > 0 ? x.ExperienceMonths / 12 : 0)
}) 
```

该列`ExperienceMonths`是`tinyint`数据库中的 a，这意味着它是`byte`EF 模型中的 a。

我希望`Calculated`column 是`double`( `float`)，因为我们正在划分一个数字，但无论我做什么，它总是以 an 结尾，`int`并且结果的任何`decimal`部分都被简单地删除，所以 ex 3.7 最终是 3。

有没有办法强制 EF 以某种方式将结果转换为`double`? `double`在除法表达式在运行时中断之前添加 ( ) 强制转换。

使用 EF5。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:33:15.267

我刚试过：

```
Calculated = (x.ExperienceMonths > 0 ? ((double)x.ExperienceMonths) / 12 : 0) 
```

它工作得很好

# android - 通过 adb 从 android 设备中提取应用程序的数据库

> ID：14744496
> 
> 赞同：4
> 
> 时间：2013-02-07T05:49:30.340
> 
> 标签：android, database, adb

如何通过 adb shell 命令从 android 设备中提取应用程序的数据库？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-29T07:26:51.937

如果您的设备上既没有 SD 卡也没有 root，只需使用 adb shell。

```
$ adb shell
$ run-as com.your.package cat /data/data/com.your.package/databases/your_db > /storage/sdcard0/Download/your.db 
```

然后使用 DDMS 拉出文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T05:56:33.970

数据库存储在文件中，主要在内部存储中，在 App 的数据目录中，例如：

```
/data/data/com.example.myapp/mydb 
```

所以你可以做

```
adb pull /data/data/com.example.myapp/mydb 
```

然后您可以使用[一些软件](http://sqliteman.com/)打开该文件，并使用数据库。把它放回去：

```
adb push <new file> /data/data/com.example.myapp/mydb 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T05:53:50.950

AFAIK 您只能从 Android Emulator 中获取数据库，而不是从真实设备中获取数据库（除非设备已植根）。
为此，只需转到 DDMS --> 文件资源管理器 --> 数据 --> 数据 --> 您的包名称 --> 数据库

您的数据库应该在数据库文件夹内

选择数据库后，您将在上方选项卡上看到两个图标，您可以在其中推送或拉取数据库。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-07T05:57:19.830

我不认为你可以从设备中提取提取数据库，但是你可以从 DDMS > 文件资源管理器 > 数据 > 数据 > 包 > 数据库的模拟器中提取它

# ios - 如何在文本字段中将上一句下的文本（句子）堆叠起来？

> ID：14744499
> 
> 赞同：0
> 
> 时间：2013-02-07T05:49:41.947
> 
> 标签：ios, uitextfield, stack

我很喜欢。我正在尝试制作一个应用程序，但我无法配置文本字段以将用户文本堆叠在前一个文本下，而不是在一个永无止境的行中向右运行。请帮忙！我需要的不仅仅是一个代码。我放在哪里？？？巫师档案？谢谢！

请这是阻止我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:07:17.573

您可以将换行符放入 textView 的 text 属性中：

```
self.textView.text = @"Foo\nBar"; 
```

您将在第一行获得“Foo”，在第二行获得“Bar”。

# macos - RPC 端口映射失败 Mac OSX 10.6

> ID：14744500
> 
> 赞同：0
> 
> 时间：2013-02-07T05:49:48.300
> 
> 标签：macos, port, rpc

我正在尝试使用在 Mac OsX 10.6 上添加两个数字的 RPC 运行程序

这是我正在做的事情：

> rpcgen -a -C add.x

它生成文件

> add.h,add_clnt.c,add_svc.c,add_server.c,add_client.c

然后使用以下命令编译所有文件：

```
gcc -g -DRPC_SVC_FG -c -o add_clnt.o add_clnt.c
gcc -g -DRPC_SVC_FG -c -o add_client.o add_client.c
gcc -g -DRPC_SVC_FG -c -o add_xdr.o add_xdr.c
gcc -g -DRPC_SVC_FG -o add_client add_clnt.o add_client.o add_xdr.o 
gcc -g -DRPC_SVC_FG -c -o add_svc.o add_svc.c
gcc -g -DRPC_SVC_FG -c -o add_server.o add_server.c
gcc -g -DRPC_SVC_FG -o add_server add_svc.o add_server.o add_xdr.o 
```

在一个远程控制台中运行服务器

```
./add_server 
```

在另一个控制台中运行客户端

```
./add_client localhost 23 35 
```

23 和 35 是我想在第二个控制台上打印其总和的数字。当我执行以下任何内容时，服务器控制台上不会出现任何内容。

如果我在运行客户端时尝试使用 IP 地址而不是 localhost 错误是：

```
RPC:Port mapper Failure 
```

我正在使用 MacOSX 10.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:34:37.600

你快到了。

这是在 Solaris 系统上完成的，您应该在 MacOSX 上看到类似的内容。

在远程主机上启动 add_server 后，检查 add_server 是否已成功注册到远程端口映射器。例如

```
remote> cat add.x
struct add_args {
    int a;
    int b;
};
typedef struct add_args add_args;
bool_t xdr_add_args();    

#define ADDPROG ((u_long)0x20000001)
#define ADDVERS ((u_long)1)
#define ADD ((u_long)1)   
extern int *add_1();  

remote> ./add_server &
remote> rpcinfo -t localhost 536870913
program 536870913 version 1 ready and waiting 
```

536870913 是十进制的 0x20000001。查看是否可以从本地主机访问远程主机。如果是，则运行 add_client。

```
local> ping remote
remote is alive
local> rpcinfo -t remote 536870913
program 536870913 version 1 ready and waiting
local> ./add_clnt remote 23 35 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T15:21:54.997

当 rpcbind 守护进程（负责提供有关所请求服务正在侦听的端口的信息）没有向调用机器提供响应时，可能会出现这种错误。

这可能是由于 NAT 或防火墙中的错误而发生的。因此，第一次尝试诊断问题时，与任何有关网络的事情一样，可能涉及通过对所涉及的每个接口进行 ping 验证连接是否正常，从最近到最远，确保每个跳转都正常工作。

# ios - CLLocationManager 精度和功耗

> ID：14744506
> 
> 赞同：0
> 
> 时间：2013-02-07T05:50:04.690
> 
> 标签：ios, core-location, cllocationmanager

我知道这`CLLocationManager`为我们提供了多种精度选择，因此它不会不断地向您发送一堆通知。但是这样省电吗？

我正在寻找一个地理围栏应用程序来提醒我下车。哈哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:17:58.613

功耗取决于 LocationManager 的所需精度设置。如果将其设置为 kCLLocationAccuracyBestForNavigation，则功耗最高。

在您的场景中，您可能会使用 kCLLocationAccuracyKilometer，因为公交车站应该至少相距一公里。

# java - java.io.Console 中的重复方法？

> ID：14744507
> 
> 赞同：3
> 
> 时间：2013-02-07T05:50:11.870
> 
> 标签：java

在[`java.io.Console`](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html)中，有两种方法，[`printf`](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html#printf%28java.lang.String,%20java.lang.Object...%29)和[`format`](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html#format%28java.lang.String,%20java.lang.Object...%29)，它们看起来是相同的。在API中它说

> 调用该表单方法的`con.printf(format, args)` 行为与调用 `con.format(format, args)`

那么为什么有两种方法呢？有没有首选的情况？

编辑：他们已经在 java.io.PrintStream 以及 Java 5 中做到了这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:03:12.563

这适用于来自不同编程背景的程序员。`C/ C++`用途`printf`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T05:55:38.800

调用此表单方法的行为与调用-[文档](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)`con.printf(format, args)`的方式完全相同`con.format(format, args)`

所以没有区别，只是为了语法方便

# crystal-reports - 将存储过程链接到 Universe

> ID：14744514
> 
> 赞同：0
> 
> 时间：2013-02-07T05:51:23.830
> 
> 标签：crystal-reports, crystal-reports-2008, crystal-reports-xi, crystal-reports-server

我正在开始新项目。在这个项目中，将有业务对象 Universe。我想把水晶报告连接到宇宙。那么，是否可以将水晶报表中的存储过程链接到作为数据源的全域。即存储过程将使用Universe 结构来生成数据。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:45:26.510

不能将 Universe 链接到 CR 中的过程。您需要将该过程添加到 Universe。

# c# - 将键值对对象发送到服务器端代码隐藏

> ID：14744522
> 
> 赞同：0
> 
> 时间：2013-02-07T05:52:05.927
> 
> 标签：c#, javascript, asp.net

将键值对对象发送到服务器端代码隐藏。
如何从javascript发送？
如何在 C# 代码隐藏中接收。

## 编辑 1

```
<script type="text/javascript"> 
   function ABC() 
   { 
       var dict = []; 
       dict.push({ key: "testkey" ,// Key Value 
       value: "myVal" // "the value" });
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:16:07.740

如果您只想将一些数据发送回服务器然后获取处理结果，您可以使用 jquery 发出 ajax 调用并传递您想要传递的任何内容

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

您可以使用 Newtonsoft.Json 将内容解析到服务器上的字典中

# java - 如何添加从开关盒输出中获得的数字？

> ID：14744524
> 
> 赞同：3
> 
> 时间：2013-02-07T05:52:10.157
> 
> 标签：java, switch-statement, add

```
public class menucard 
{
    public static void main (String [] args)throws IOException
    {
        Scanner input= new Scanner(System.in);
        int tea=5,coffee=7,samosa=8,idly=15,biryani=50,talawa=35,item;
        System.out.print("   MENU \n1.TEA     :5\n2.COFFEE  :7\n3.SAMOSA  :8\n4.IDLY    :15\n5.BIRYANI :50\n6.TALAAWA :35\n \tHow many items you want to order:");
        int size=input.nextInt();

        for(int i=1;i<=size;i++)
        {
            System.out.print("Order Item No"+i+":");
            int choice=input.nextInt();
            switch(choice)
        {
        case 1:
            System.out.println("TEA : INR "+tea);
            break;
        case 2:
            System.out.println("COFFEE : INR "+coffee);
            break;
        case 3:
            System.out.println("SAMOSA : INR "+samosa);
            break;
        case 4:
            System.out.println("IDLY : INR "+idly);
            break;
        case 5:
            System.out.println("BIRYANI : INR "+biryani);
            break;
        case 6:
            System.out.println("TALAAWA : INR "+talawa);
            break;
            default:
            System.out.println("INVALID ENTRY");
        }

    }
    }
} 
```

**输出是：**

```
MENU 
1.TEA     :5
2.COFFEE  :7
3.SAMOSA  :8
4.IDLY    :15
5.BIRYANI :50
6.TALAAWA :35
How many items you want to order:5
Order Item No1:3
SAMOSA : INR 8
Order Item No2:6
TALAAWA : INR 35
Order Item No3:1
TEA : INR 5
Order Item No4:3
SAMOSA : INR 8
Order Item No5:4
IDLY : INR 15 
```

我需要通过添加这些项目的价格来生成账单。

我应该如何添加这些项目..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:43:13.620

请不要使用 switch 语句！他们只会让你的生活变得艰难。

我想这样做：

```
public interface MenuCard {
    void addToMenuItems(MenuItem item);
    List<MenuItem> getMenuItems();
    void renderTo(PrintStream printStream);
}

public interface MenuItem {
    BigDecimal getPrice();
    String getDescription();
}

public interface Order {
    void add(MenuItem item);

    //total price of all ordered items
    BigDecimal getPrice();
}

public static void main(String[] args) {
    Scanner input= new Scanner(System.in);
    MenuCard menuCard = getMenuCard(); //from database or wherever it is stored
    menuCard.renderTo(System.out);
    Order order = createNewOrder();
    int itemIndex = input.nextInt();
    while(itemIndex > 0) {
        order.add(menuCard.getMenuItems().get(itemIndex-1));
        itemIndex = input.nextInt();
    }
    //now generate bill for order
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:16:27.877

您需要做的就是首先声明一个变量，比如**total_amount**即

```
public class menucard 
{
public static void main (String [] args)throws IOException
{
    Scanner input= new Scanner(System.in);
    int tea=5,coffee=7,samosa=8,idly=15,biryani=50,talawa=35,item,total_amount=0;
    ............................................
    ........................................ 
```

现在在break语句之前的switch case中使用这个total_amount变量，即

```
switch(choice)
    {
    case 1:
        System.out.println("TEA : INR "+tea);
        total_amount = total_amount + tea;
        break;
    case 2:
        System.out.println("COFFEE : INR "+coffee);
        total_amount = total_amount +coffee;
        break;
.................
................. 
```

其他情况也是如此。最后，在您的 for 循环之后，您可以打印总金额。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:01:06.893

试试下面的代码：

```
 import java.io.IOException;
import java.util.Scanner;

public class menucard 
{
    public static void main (String [] args)throws IOException
    {
        int total =0;
        int item = 0;
        Scanner input= new Scanner(System.in);
        int tea=5,coffee=7,samosa=8,idly=15,biryani=50,talawa=35;
        System.out.print("   MENU \n1.TEA     :5\n2.COFFEE  :7\n3.SAMOSA  :8\n4.IDLY    :15\n5.BIRYANI :50\n6.TALAAWA :35\n \tHow many items you want to order:");
        int size=input.nextInt();

        for(int i=1;i<=size;i++)
        {
            System.out.print("Order Item No"+i+":");
            int choice=input.nextInt();
            switch(choice)
        {
            case 1:
            {
                System.out.println("TEA : INR "+tea);
                item++;
                total+=tea;
                display(item, total);
                break;
            }
            case 2:
            {
                System.out.println("COFFEE : INR "+coffee);
                item++;
                total+=coffee;
                display(item, total);
                break;
            }
            case 3:
            {

                System.out.println("SAMOSA : INR "+samosa);
                item++;
                total+=samosa;
                display(item, total);
                break;
            }
            case 4:
            {
                System.out.println("IDLY : INR "+idly);
                item++;
                total+=idly;
                display(item, total);
                break;
            }
            case 5:
            {
                System.out.println("BIRYANI : INR "+biryani);
                item++;
                total=+biryani;
                display(item, total);
                break;
            }
            case 6:
            {
                System.out.println("TALAAWA : INR "+talawa);
                item++;
                total=+talawa;
                display(item, total);
                break;
            }
                default:
                System.out.println("INVALID ENTRY");
            }

    }

    }

    public static void display(int item, int price)
    {
         System.out.println("Total bill for "+item+" = "+price+" INR  ");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:13:47.687

```
public static void main(String[] args) {

    Scanner input = new Scanner(System.in);

    String s = "   MENU \n1.TEA     :5\n2.COFFEE  :7\n3.SAMOSA  :8\n4.IDLY    :15\n5.BIRYANI :50\n6.TALAAWA :35\n";
    int tea = 5, coffee = 7, samosa = 8, idly = 15, biryani = 50, talawa = 35;
    System.out
            .print("   MENU \n1.TEA     :5\n2.COFFEE  :7\n3.SAMOSA  :8\n4.IDLY    :15\n5.BIRYANI :50\n6.TALAAWA :35\n \tHow many items you want to order:");
    int size = input.nextInt();
    ArrayList<String> itemsList = new ArrayList<String>();
    ArrayList<Integer> price = new ArrayList<Integer>();
    for (int i = 1; i <= size; i++) {
        System.out.print("Order Item No" + i + ":");
        int choice = input.nextInt();
        switch (choice) {
        case 1:

            System.out.println("TEA : INR " + tea);
            itemsList.add("Tea");
            price.add(tea);
            System.out.println(s);
            break;
        case 2:
            System.out.println("COFFEE : INR " + coffee);
            itemsList.add("Coffee");
            price.add(coffee);
            System.out.println(s);
            break;
        case 3:
            System.out.println("SAMOSA : INR " + samosa);
            itemsList.add("Samosa");
            price.add(samosa);
            System.out.println(s);
            break;
        case 4:
            System.out.println("IDLY : INR " + idly);
                            itemsList.add("Idly");
            price.add(idly);
            System.out.println(s);
            break;
        case 5:
            System.out.println("BIRYANI : INR " + biryani);
            itemsList.add("Biryani");
            price.add(biryani);
            System.out.println(s);
            break;
        case 6:
            System.out.println("TALAAWA : INR " + talawa);
            itemsList.add("Talawa");
            price.add(talawa);
            System.out.println(s);
            break;
        default:
            System.out.println("INVALID ENTRY");
        }

    }
    int total = 0;
    System.out.println("Item        Price");
    for (int i = 0; i < itemsList.size(); i++) {
        System.out.print(itemsList.get(i) + "       ");
        System.out.println(price.get(i));
        total = total + price.get(i);

    }
    System.out.println("Total       " + total);
} 
```

输出：

```
 MENU 
1.TEA     :5
2.COFFEE  :7
3.SAMOSA  :8
4.IDLY    :15
5.BIRYANI :50
6.TALAAWA :35
    How many items you want to order:3
Order Item No1:1
TEA : INR 5
   MENU 
1.TEA     :5
2.COFFEE  :7
3.SAMOSA  :8
4.IDLY    :15
5.BIRYANI :50
6.TALAAWA :35

Order Item No2:2
COFFEE : INR 7
   MENU 
1.TEA     :5
2.COFFEE  :7
3.SAMOSA  :8
4.IDLY    :15
5.BIRYANI :50
6.TALAAWA :35

Order Item No3:3
SAMOSA : INR 8
   MENU 
1.TEA     :5
2.COFFEE  :7
3.SAMOSA  :8
4.IDLY    :15
5.BIRYANI :50
6.TALAAWA :35

Item        Price
Tea         5
Coffee      7
Samosa      8
Total       20 
```

我编辑了代码以在每个案例执行后打印菜单并以一种好的方式生成账单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T09:03:00.030

这是一个`switch-case`加号`enum`

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;
public class Menucard {
     private static enum Item {
        TEA (5,"Tea"), COFFEE(7,"Coffee"), SAMOSA(8,"Samosa"), IDLY(15,"Idly"), BIRYANI(50,"Biryani"), TALAWA(35,"Talawa");
        private int price;
        private String name;
        private Item(int price, String name) {
            this.price = price;
            this.name = name;
        }
        public int getPrice() {
            return price;
        }
        public String getName(){
            return name;
        }
     };
    public static void main (String [] args)throws IOException
    {
        Scanner input= new Scanner(System.in);
        List<Item> itemList = new ArrayList<Item>();
        float totalAmt = 0;
        System.out.print("   MENU \n1.TEA     :5\n2.COFFEE  :7\n3.SAMOSA  :8\n4.IDLY    :15\n5.BIRYANI :50\n6.TALAAWA :35\n \tHow many items you want to order:");
        int size=input.nextInt();
        for(int i=1;i<=size;i++)
        {
            System.out.print("Order Item No"+i+":");
            int choice=input.nextInt();
            Item selectedItem = null;
            switch(choice)
            {
            case 1:
                selectedItem = Item.TEA;
                break;
            case 2:
                selectedItem = Item.COFFEE;
                break;
            case 3:
                selectedItem = Item.SAMOSA;
                break;
            case 4:
                selectedItem = Item.IDLY;
                break;
            case 5:
                selectedItem = Item.BIRYANI;
                break;
            case 6:
                selectedItem = Item.TALAWA;
                break;
            default:
                System.out.println("INVALID ENTRY");
            }
            if(selectedItem != null){
                itemList.add(selectedItem);
                System.out.println(selectedItem.getName() + " Price INR: " + selectedItem.getPrice());
                totalAmt += selectedItem.getPrice();
            }
        }
        System.out.println("Total Bill: " + totalAmt);
    }
} 
```

这个没有`switch-case`

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;
public class Menucard {
     private static enum Item {
        TEA (5,"Tea"), COFFEE(7,"Coffee"), SAMOSA(8,"Samosa"), IDLY(15,"Idly"), BIRYANI(50,"Biryani"), TALAWA(35,"Talawa");
        private int price;
        private String name;
        private Item(int price, String name) {
            this.price = price;
            this.name = name;
        }
        public int getPrice() {
            return price;
        }
        public String getName(){
            return name;
        }
     };
    public static void main (String [] args)throws IOException
    {
        Scanner input= new Scanner(System.in);
        List<Item> itemList = new ArrayList<Item>();
        float totalAmt = 0;
        System.out.print("   MENU \n1.TEA     :5\n2.COFFEE  :7\n3.SAMOSA  :8\n4.IDLY    :15\n5.BIRYANI :50\n6.TALAAWA :35\n \tHow many items you want to order:");
        int size=input.nextInt();
        for(int i=1;i<=size;i++)
        {
            System.out.print("Order Item No"+i+":");
            int choice=input.nextInt();
            Item selectedItem = null;
            if(choice < 1 || choice > 6){
                System.out.println("Invalid selection");
                i--;
                continue;
            }
            selectedItem = Item.values()[choice-1];
            if(selectedItem != null){
                itemList.add(selectedItem);
                System.out.println(selectedItem.getName() + " Price INR: " + selectedItem.getPrice());
                totalAmt += selectedItem.getPrice();
            }
        }
        System.out.println("Total Bill: " + totalAmt);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T05:56:44.517

```
int sum = 0;
for(int i=1;i<=size;i++)
        {
            System.out.print("Order Item No"+i+":");
            int choice=input.nextInt();
            switch(choice)
        {
        case 1:
            System.out.println("TEA : INR "+tea);
            sum +=tea;
            break;
        case 2:
            System.out.println("COFFEE : INR "+coffee);
             sum +=coffee;
            break;
... etc

    }
} 
```

sum 应该是总数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-02T14:44:23.950

只需获取一个全局静态变量，将其初始化为零并在每个案例语句中继续为其添加价格值

```
public static int totalAmount=0; 
```

在你的使用这个

```
public class menucard 
{
public static void main (String [] args)throws IOException
{
public static long totalAmount=0;
    Scanner input= new Scanner(System.in);
    int tea=5,coffee=7,samosa=8,idly=15,biryani=50,talawa=35,item;
    System.out.print("   MENU \n1.TEA     :5\n2.COFFEE  :7\n3.SAMOSA  :8\n4.IDLY            :15\n5.BIRYANI :50\n6.TALAAWA :35\n \tHow many items you want to order:");
    int size=input.nextInt();

    for(int i=1;i<=size;i++)
    {
        System.out.print("Order Item No"+i+":");
        int choice=input.nextInt();
        switch(choice)
    {
    case 1:
        System.out.println("TEA : INR "+tea);
totalAmount+=tea;
        break;
    case 2:
        System.out.println("COFFEE : INR "+coffee);
totalAmount+=tea;
        break;
    case 3:
        System.out.println("SAMOSA : INR "+samosa);
totalAmount+=tea;
        break;
    case 4:
        System.out.println("IDLY : INR "+idly);
totalAmount+=tea;
        break;
    case 5:
        System.out.println("BIRYANI : INR "+biryani);
totalAmount+=tea;
        break;
    case 6:
        System.out.println("TALAAWA : INR "+talawa);
totalAmount+=tea;
        break;
        default:
        System.out.println("INVALID ENTRY");
}

}

System.out.println("Total Amount is "+totalAmount);
} 
```

# php - Mysql 查询返回资源 id #8 而不是期望值

> ID：14744528
> 
> 赞同：3
> 
> 时间：2013-02-07T05:52:24.883
> 
> 标签：php, mysql

您好我正在尝试发现如何修复我的查询以返回正确的结果。这是我的查询：

```
$selectShoeRatingQuery = "SELECT cast(round(AVG(rating)*2)/ 2 as decimal(10,1)) FROM rating WHERE shoe_id = '$_GET[id]'";
$shoeRating = mysql_query($selectShoeRatingQuery); 
```

查询应返回一个小数点后一位的数字 (3.5)。在 PhpMyAdmin 中测试时它工作正常，但是在我的网站上它返回`resource id #8`.

数据库连接一切正常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T05:54:29.817

`mysql_query`返回一个资源。您需要从中获取一行：

```
$query = mysql_query($selectShoeRatingQuery);
$row = mysql_fetch_row($query);
$shoeRating = $row[0]; 
```

而且，除非您别无选择 - 不要使用`mysql_`扩展集！它们已被弃用，PDO 等。更好。而且您的查询很容易受到攻击。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T05:55:54.570

> 引用[**PHP 手册**](http://php.net/manual/en/function.mysql-query.php)
> 
> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。

您需要获取它以供您使用

```
$row = MySQL_fetch_row($query); 
```

如果你现在不使用准备好的语句，至少使用[**`mysql_real_escape_string`**](http://php.net/manual/en/function.mysql-real-escape-string.php)

```
 'mysql_real_escape_string($_GET[id])'" 
```

* * *

## **警告**

您的代码容易受到[sql 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响，您需要全部转义`get`，`post`更好的方法是使用[Prepared 语句](http://en.wikipedia.org/wiki/Prepared_statement)

**好读**

1.  [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)
2.  [**PDO 准备好的语句是否足以防止 SQL 注入？**](https://stackoverflow.com/a/12202218/1723893)

* * *

## **笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了以 mysql_ 为前缀的所有函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958.)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
3.  [Pdo 初学者教程](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14110189#14110189)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T06:00:16.923

当通过 PHP 调用时，选择查询返回 a `Resource`，它本质上是指向结果第一行的指针。要获取数据，您必须使用`mysql_fetch_array`，这将为您获取指针所引用的行。

读完该行后，指针将自动递增以指向下一行。

所以，你的代码将是这样的

```
$connection = mysqli_connect(...);
$query = ""; //put your query here
$result = mysqli_query($connection, $query);
while($row = mysqli_fetch_array($result, MYSQL_ASSOC)) {
    //$row will contain the data of the row in an array format. Use it here.
} 
```

此外，请不要使用`mysql`现在已弃用的函数。使用 MySQLi 或 PDO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T05:53:22.577

尝试，

```
SELECT round(AVG(rating) * 2.0) / 2.0 AS result
FROM rating
WHERE .... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T05:54:19.847

```
$selectShoeRatingQuery = "SELECT cast(round(AVG(rating)*2)/ 2 as decimal(10,1)) as `num` FROM rating WHERE shoe_id = '$_GET[id]'";
$shoeRating = mysql_query($selectShoeRatingQuery);
$r = mysql_fetch_row($shoeRating);
echo $r['num'];// <--- alias 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T06:01:04.047

```
$selectShoeRatingQuery = "SELECT cast(round(AVG(rating)*2)/ 2 as decimal(10,1)) as
rating 
FROM rating WHERE shoe_id = '$_GET[id]'";

$shoeRating = mysql_query($selectShoeRatingQuery);
$result = mysql_fetch_array($shoeRating);
echo $result["rating"]; 
```

# php - 如何从扩展类的父对象中删除属性？

> ID：14744534
> 
> 赞同：3
> 
> 时间：2013-02-07T05:53:17.227
> 
> 标签：php, inheritance, unset

我正在尝试在我无法修改的类中的变量上编写“侦听器”。我正在扩展有问题的类，取消设置我想听的属性，然后使用 __set 拦截对该变量的写入。那时我会与以前的版本进行比较，并报告是否有变化。

```
class A {
    var $variable;

    ...
}

class B extends A {
    var $new_variable

    function __construct() {
        parent::__construct();
        unset($this->variable);
    }

    function __set($thing, $data) {
        if ($thing == 'variable') {
            // Report change
            // Set $new_variable so we can use __get on it
        }
    }

    public function __get($var) {
        if (isset($this->$var)) {
            // Get as normal.
            return $this->$var;
        } elseif ($var == 'variable' && isset($this->new_variable)) {
            return $this->new_variable;
        }
    }

    ...
} 
```

如果我直接修改相关类而不是通过扩展类，删除变量的声明并引入 setter 和 getter 方法，则此方法有效。问题是当我使用上面显示的模式时，unset() 调用似乎并没有真正删除从父类继承的变量，从而导致 __set 方法无法拦截变量的值。

到目前为止，这似乎是我可以观察变量变化的唯一方法，但我不想破解框架的核心，只检查它的方便工作（解析器）。是否有可能使这项工作或解决此问题的另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:00:03.187

嗯，这很奇怪。以下代码工作正常：

```
class A 
{
    var $variable;
}

class B extends A 
{
    var $new_variable;

    function __construct() 
    {
        unset($this->variable);
    }

    function __set($thing, $data) 
    {
        if ($thing == 'variable') 
        {
        echo "\nThe variable value is '" . $data . "'\n";
        }
    }
}

$b = new B();
$b->variable = 'Intercepted'; //Output: The variable value is 'Intercepted'
$b->new_variable = 'Not intercepted'; // No output 
```

你能告诉我这段代码是否满足你的需要，如果没有，你需要什么？

高温高压

# php - 在 PHP 中访问 Json

> ID：14744536
> 
> 赞同：1
> 
> 时间：2013-02-07T05:53:22.920
> 
> 标签：php, json

```
//Decoded Json data
object(stdClass)[250]
  public '2013-02-05' =>
    object(stdClass)[114]
      public 'bounce_count' => int 1
      public 'avg_time_on_site' => int 237
  public '2013-02-06' =>
    object(stdClass)[115]
      public 'bounce_count' => int 6
      public 'avg_time_on_site' => int 983
$json_data=json_decode($result);
//$result has the json string 
```

如何检索特定日期的bounce_count、avg_time_on_site 以及该日期将在php 中更改的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:00:06.040

```
$json_data=json_decode($result, true);

foreach($json_data as $date=>$val){

   echo "Date : ".$date;
   echo "bounce_count : ".$val['bounce_count'];
   echo "avg_time_on_site : ".$val['avg_time_on_site'];
   echo "===========================<br>";
} 
```

# android - onCreateOptionsMenu 在 onCreate android 之前调用

> ID：14744537
> 
> 赞同：6
> 
> 时间：2013-02-07T05:53:35.573
> 
> 标签：android, actionbarsherlock, android-listfragment, android-optionsmenu

我是 android 的初学者，我正在开发小型 android 应用程序。在我的应用程序中，我使用的是 Sherlock 库。我的应用程序包含一个主要活动和两个片段。我的列表片段结构看起来像

```
public class MyCards extends SherlockListFragment
        {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setHasOptionsMenu(true);
        Log.i("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!", "inside fragment on create");

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        Log.i("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!", "inside on activity created");
    }

    private void displayCards(int type) {

        Log.i("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!", "inside display cards");

    }

    @Override
    public void onResume() {
        super.onResume();

    }

    @Override
    public void onPause() {
        super.onPause();

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.mycards, container, false);

        View view1 = inflater.inflate(R.layout.empty_card, container, false);
        return view;

    }

    /*@Override
    public void onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);

    optionsMenu = menu;
    }*/

    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        inflater.inflate(R.menu.menu_type2, menu);

        Log.i("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!", "inside on create option menu");
        Spinner spinner = (Spinner) menu.findItem(R.id.cardType)
                .getActionView();

        SpinnerAdapter adapter = ArrayAdapter.createFromResource(getSherlockActivity().getSupportActionBar().getThemedContext(), R.array.card_action_list,android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter); // set the adapter

        spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id) {
                displayCards(pos);
                Log.i("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!", "inside on option selected");
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                displayCards(0);
                Log.i("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!", "inside on no option selection");
            }

        });

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        Log.i("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!", "inside option select listener");

    }

} 
```

现在我的问题是，当我第一次从一个片段切换到另一个片段时，它会给出以下日志输出

```
01-04 00:54:06.997: I/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(2575): inside on create option menu
01-04 00:54:06.997: W/KeyCharacterMap(2575): No keyboard for id -1
01-04 00:54:06.997: W/KeyCharacterMap(2575): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
01-04 00:54:07.020: I/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(2575): inside fragment on create
01-04 00:54:07.036: I/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(2575): inside on activity created 
```

这意味着在 onfragment create 和活动 create 之前调用的 create 选项。它还给出了两个警告。这项工作没有任何错误。但我无法显示我的列表视图

现在，当我再次切换到同一个片段（第二次）时，它会给出以下日志输出

```
02-07 10:05:10.983: I/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(15844): inside on create option menu
02-07 10:05:11.023: I/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(15844): inside fragment on create
02-07 10:05:11.043: I/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(15844): inside on activity created
02-07 10:05:11.113: I/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(15844): inside display cards
02-07 10:05:11.133: I/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(15844): inside on option selected 
```

这次它没有发出任何警告并且工作正常。还显示我的列表视图。但是第一次它不能正常工作。另一点是，当我在更高版本的 android 上运行它时，它工作正常。但是，如果我在 2.3.3 等较低版本的 android 上运行它，我会显示这种行为。我读到了[在 onCreate 之前调用的这个 ListFragment onPrepareOptionsMenu。为什么以及如何修复/绕过？](https://stackoverflow.com/questions/12374816/listfragment-onprepareoptionsmenu-called-before-oncreate-why-and-how-to-fix-b) 但我无法解决这个问题。

如果我`setHasOptionsMenu(true)`在里面定义`onActivityCreated`它会给出以下输出

```
01-04 03:32:38.622: I/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(8157): inside fragment on create
01-04 03:32:38.653: I/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(8157): inside on activity created
01-04 03:32:38.692: I/!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!(8157): inside on create option menu
01-04 03:32:38.700: W/KeyCharacterMap(8157): No keyboard for id -1
01-04 03:32:38.700: W/KeyCharacterMap(8157): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

我还尝试为我的片段设置 setHasOptionsMenu，其中实际片段事务发生如下..

```
@Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            MyCards mc = new MyCards();
            mc.setHasOptionsMenu(true);
            ft = mActivity.getSupportFragmentManager().beginTransaction();

                mFragment = Fragment.instantiate(mActivity, mClass.getName(),
                        mArgs);

                ft.add(android.R.id.content, mFragment, mTag);
                ft.commit();
            } 
```

仍然存在同样的问题。

我的代码或其他问题有什么问题吗？那么如何解决这个问题。需要帮助...谢谢...

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-08T12:16:15.843

写`setHasOptionsMenu(true);`在`onActivityCreated(Bundle savedInstanceState)`方法里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:56:54.397

我不知道为什么它会这样工作，但是这样做：`setHasOptionsMenu(true)`当您将片段添加到它时，在您的 Activity 中设置选项。

例如：

```
//Activity class
YourListFragment f = new YourListFragment();

f.setHasOptionsMenu(true); //here

getSupportFragmentManager().beginTransaction()
.add(R.id.your_list_fragment_container, f).commit(); 
```

并删除在您的片段代码中设置它。它对我有用。

# ruby-on-rails - RoR Devise 使用电子邮件或用户名注册

> ID：14744540
> 
> 赞同：0
> 
> 时间：2013-02-07T05:53:43.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2

我有一个使用 Devise 进行用户注册和会话管理的 RoR 应用程序。到目前为止，用户可以使用电子邮件注册，我在设计中使用 :confirmable 以便发送确认电子邮件并激活用户帐户。但是现在我想为用户添加一个选项来使用电子邮件或用户名注册，这样我就必须确认他是否使用电子邮件，如果他不提供电子邮件则不需要确认。

我可以使用设计来实现这一点吗..？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:16:57.537

查看此 wiki 页面的底部：

[https://github.com/plataformatec/devise/wiki/How-To:-Add-:confirmable-to-Users](https://github.com/plataformatec/devise/wiki/How-To:-Add-:confirmable-to-Users)

你应该能够做这样的事情：

```
protected
def confirmation_required?
  # Insert custom logic about confirmation only if a user has an email
end 
```

把它放在你的`User.rb`

# matlab - 如何在 Matlab 中读取广播波形信息

> ID：14744541
> 
> 赞同：1
> 
> 时间：2013-02-07T05:53:47.283
> 
> 标签：matlab

我收到了一些 BWF 格式的 wav 文件，我需要使用 Matlab 从中提取日期戳。我已经完成了一些阅读/编写标准 WAV 标头的工作，但是在涉及 BWF 格式时我完全迷失了。我已经阅读了有关格式的 EBU 描述和各种网页 - 比以前更加困惑。我希望有人能指出我可以查看的一些代码的方向，以实际了解如何读取数据。它不一定是 Matlab - 我只需要一个例子来帮助我理解。任何帮助，将不胜感激。

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:04:53.727

[您可以通过查看BWFMetaEdit](http://bwfmetaedit.sourceforge.net/)的源代码获得一些线索。

有一个 Riff_Chunks_WAVE_bext.cpp 文件开始。

# php - 拥有 40 家分店的单一 Magento 电子商务商店

> ID：14744544
> 
> 赞同：1
> 
> 时间：2013-02-07T05:53:55.393
> 
> 标签：php, magento, e-commerce, magento-1.7, magento-1.6

我有一家商店，在全国有 40 家分店。我需要为我的商店设置一个 Magento 电子商务网站来销售不同的产品。

1.  需要展示所有分店的所有产品（大约 40 个分店）。
2.  当用户选择要购买的产品时，需要显示所选产品可用的分支机构。
3.  选择分店后，继续付款和运输细节。
4.  每个分支机构都需要自己的库存和管理。
5.  需要在 Amazon 和 Ebay 上列出产品。

是否可以使用 Magento 设置上述要求（使用或不使用多存储概念）？

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:54:23.163

正如您所定义的，您希望有没有多商店的解决方案，那么我建议使用自定义电子商务解决方案，例如 eDigitalFields 的精英电子商务解决方案将帮助您自定义从库存、购物车、运输、结帐和订单管理过程开始的所有内容. 他们有您正在寻找的解决方案。希望附上的插图和您的问题匹配在一起，并且此解决方案对您有用。

[在此处](http://www.edigitalfields.com/multi-store-ecommerce-solution.html)了解有关此多商店电子商务解决方案的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:26:10.467

除了第一个之外，您可以通过为每个分支使用单独的商店视图来非常简单地做到这一点。

要从所有商店视图中显示产品，您必须编写自己的模块。

# html - 请求标头未设置为事件源调用的文本/事件流

> ID：14744549
> 
> 赞同：2
> 
> 时间：2013-02-07T05:54:12.830
> 
> 标签：html, node.js, server-sent-events

我有以下事件源。

```
 var source = new EventSource('/events');
    source.onmessage = function(e) {
      document.body.innerHTML += e.data + '<br>';
    }; 
```

问题是，Accept 请求标头自动设置为`text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8`.

在 node.js 中，我正在处理具有以下条件的请求。

```
if (req.headers.accept && req.headers.accept != 'text/event-stream') {..} 
```

因此，我无法流式传输数据。请让我知道如何在调用 EventSource('/events'); 时将接受请求标头设置为 text/event-stream；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:19:40.747

你为什么不这样做：

```
if(req.url == '/events'){
    res.writeHead(200,{'content-type':'text/event-stream'});
    //Your sse code here...
    sendMsg('some data...');
} 
```

它更简单，您不再需要处理请求标头问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:22:32.077

你不能这样做浏览器为你设置 Accept header

EventSource 对象在 Chrome、Firefox 和 Opera 检查下使用“text/event-stream”接受标头发出请求，表明您正在处理正确的请求

# android - 扩展 ExpandableListActivity 的活动上的 SearchView

> ID：14744556
> 
> 赞同：0
> 
> 时间：2013-02-07T05:54:37.727
> 
> 标签：android, search

我似乎无法`SearchView`完成此设置（或搜索小部件）。`SearchView.onQueryTextListener`效果不如我在这里找到的许多解决方案。

仅供参考，我知道清单的 searchable.xml 和元标记，以使我的活动可搜索。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:56:51.203

您可以在不使用 Searchable 活动的情况下使用 searchview。[在这里](https://stackoverflow.com/questions/13733460/android-providing-recent-search-suggestions-without-searchable-activity)查看我的答案

# java - 在eclipse中将现有包添加到现有Java项目？

> ID：14744557
> 
> 赞同：3
> 
> 时间：2013-02-07T05:54:50.997
> 
> 标签：java, eclipse, package

我正在尝试将另一个 java 项目中的包添加到我当前在 Eclipse 中的 java 项目中。我尝试简单地将包文件拖到 java 项目文件夹中。当我在 Eclipse 中查找包时，即使我刷新了界面，它也没有显示出来。

有什么我想念的吗？应该那么容易吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:00:46.217

在eclipse中，如果你拖放项目/包，主要有三个选项可供选择。我认为您选择“链接文件和文件夹”。您可能希望选择“复制文件和文件夹”而不是其他选项来获取这些文件和文件夹。

![在此处输入图像描述](../Images/154e44eea66ef5e0d496ead45d0ff429.png)

# ruby-on-rails-3 - 构建一个 Rails 应用程序以同时为桌面（常规）和移动（ajax）站点提供服务的建议

> ID：14744559
> 
> 赞同：0
> 
> 时间：2013-02-07T05:55:32.647
> 
> 标签：ruby-on-rails-3, mobile, desktop

我正在开发一个同时具有桌面版和移动版的网站。

桌面是一个标准的 Rails 应用程序，其视图将最终内容呈现给用户。

移动版是一个 ajax 单页应用程序，其中向相同的 rails 控制器发出请求，但返回 json，该应用程序使用敲除来管理 javascript 中的模型并向用户显示内容。

在移动设备中显示给用户的模板实际上应该与应用程序的 html 桌面视图 (ruby) 相同，不同之处在于通过 css 媒体查询管理的更改。

现在，我在移动应用程序的资产管道中有一个模板目录，在桌面应用程序的 app/views 文件夹中有一个视图。

我一直在尝试寻找是否有办法将 app/views 文件夹中的视图编译到资产管道中？

还是其他人设法以另一种方式做到这一点？欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:20:30.407

你应该试试 twitterbootstrap。太棒了这是我用的。

您需要做的就是去[Bootstrap](http://twitter.github.com/bootstrap/)并按照他们的指南进行操作。

也可以使用rails gem。

如果您需要更多帮助，请提出要求，我会提供帮助

# iphone - 动态改变 UIView 框架

> ID：14744564
> 
> 赞同：1
> 
> 时间：2013-02-07T05:55:45.040
> 
> 标签：iphone, ios

我有这样的场景：视图 B 框架取决于视图 A 框架。我正在玩 viewA 框架。但是视图 b 框架不会改变，因为框架不是对象。那么解决方法是什么，如果我需要将 View B 框架更改为 View A 框架，即当我更改 ViewA 框架时，视图 B 框架会发生变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:14:05.397

一种解决`add KVO`方案是根据,的`View A`_ _`notify``frame changed``change``frame``view A``change` `frame``view B`

```
[A addObserver:self forKeyPath:@"frame" options:NSKeyValueObservingOptionOld context:NULL];  //added KVO for View A 
```

方法是：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
 if([keyPath isEqualToString:@"frame"]) {
  //change frame of View B according to View A
 }
} 
```

**编辑**：`Remove observer`当没有`needed`

```
[A removeObserver:self forKeyPath:@"frame"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:14:07.980

在 >iOS6 中，您可以尝试设置一些自动布局约束，或者尝试以下方式：

```
[self addObserver:self forKeyPath:@"viewA.frame" options:NSKeyValueObservingOptionOld context:NULL]; 
```

一定要在 dealloc 上删除观察者。然后，您会发现 viewA 框架何时发生变化，并且您可以实现任何一组操作以及 viewA 和 viewB 框架之间的任何功能关系......

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if([keyPath isEqualToString:@"viewA.frame"]) {
        // change viewB's frame according to viewA's frame
        viewB.frame = CGRectOffset(viewA.frame, 20.0, 20.0);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:15:33.323

相对于 View A 设置 View B 框架。编写一个方法`-(void)ResizeFrame`并将所有框架设置放入其中，并在需要更改框架时调用此函数。即 `ViewB.frame=[ViewA.frame.origin.x,ViewA.frame.origin.y,ViewA.frame.size.width/2,ViewA.frame.size.height/2];`在这里我已经给出了划分，你可以相应地改变它。

# dll - WinRT C++ 相互依赖关系未正确链接

> ID：14744568
> 
> 赞同：1
> 
> 时间：2013-02-07T05:55:56.500
> 
> 标签：dll, windows-phone-8, c++-cx

我有一个 C++ WinRT 组件，我想从另一个组件中使用它，这两个组件都在监督整个业务的 C# 类中使用。C# 类将 C++ 类 A 传递给 C++ 类 B 的引用，而 C++ 类 A 可以使用 B 的方法进行编译，但链接对我很生气：

```
CameraTextureGraphConnector.obj : error LNK2019: unresolved external symbol "public: void __cdecl TextureGraph::TextureRenderer::setTexturePtr(unsigned int,unsigned int,unsigned int)" (?setTexturePtr@TextureRenderer@TextureGraph@@Q$AAAXIII@Z) referenced in function __unwind$5 
```

本质上，我试图链接一个单独的 .dll 中的某些内容，但我不知道如何连接这些点。尝试与 .lib 链接在这里不起作用，因为其他 C++ 组件需要生成一个 .dll 以供 C# 使用。我已经尝试在项目属性中添加另一个项目作为参考，但这似乎没有任何效果，并且任何尝试使用该参考页面中的参数都会导致默认值在您加载后立即加载点击“应用”。

有没有人有将这些对象连接在一起的经验？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:32:32.837

我想到了。首先，您不应该`#include`.h 来自其他 WinRT 对象的文件，您只需在项目设置中添加它们对您项目的引用，如上所述。其次，您必须将希望从外部使用的所有类声明为`public`类，例如：

```
public ref class TextureRenderer sealed {
    ...
} 
```

相对于：

```
ref class TextureRenderer sealed {
    ...
} 
```

# c++ - 在 c++ 程序中连续运行两个 shell 命令

> ID：14744569
> 
> 赞同：0
> 
> 时间：2013-02-07T05:56:00.357
> 
> 标签：c++, g++, system

以下 shell 命令伴随着它们执行的操作：

```
lex q5.l   ->produces lex.yy.c
g++ lex.yy.c -o q5  ->compiles lex.yy.c and produces a relocatable object file 
```

现在我想在 c++ 程序（main.cpp）中执行此操作。因此，我在 main.cpp 中执行以下操作：

```
system("lex q5.l");
system("gcc lex.yy.c -o q5"); 
```

但是当我`g++ main.cpp -o main`在 shell 中执行时，会生成以下错误：

```
q5.l:1: premature EOF
g++: error: lex.yy.c: No such file or directory 
```

当我检查文件夹时，没有`lex.yy.c`. 但是，如果我`lex q5.l`从 shell 显式运行，则该文件夹包含`lex.yy.c`. 所以，我认为这`lex q5.l`没有在我的程序中执行`main.cpp`。

谁能指出问题和正确执行 main.cpp 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:52:20.600

在您的程序中，您不会`q5.l`在执行`system`调用之前刷新或关闭流写入......不能期望输出文件具有预期的内容......

# bash - 输入多个变量的 Bash 脚本

> ID：14744570
> 
> 赞同：2
> 
> 时间：2013-02-07T05:56:11.947
> 
> 标签：bash, shell, unix, scripting

我使用一个简单的 shell 脚本来阻止 IP 地址，它只是将我的输入（IP）替换为 iptables、IPFW 等（取决于哪个平台）命令中的变量，但它们基本上都遵循以下格式：

```
read -p "IP to Block: " ip

ipfw add deny ip from $ip to any 
```

是否可以简单地按顺序执行一组用户定义的变量。例如，三个 IP 地址，并且脚本基本上对每个变量执行 3 次，但将我的输入限制为单个提示（被要求输入一次）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:58:51.333

听起来你想做这样的事情：

```
for ip in $@; do
    ipfw add deny ip from $ip to any
done 
```

我不确定这是否是 , 的确切用法`ipfw`，但是`$@`除了第一个之外，命令中的每个单词都是如此，因此它适用于：

```
your-script-name 1.2.3.4   1.3.4.5   1.4.5.6 
```

# php - PHP字典小部件不起作用

> ID：14744572
> 
> 赞同：0
> 
> 时间：2013-02-07T05:56:29.843
> 
> 标签：php, curl, xml-parsing

我正在尝试创建一个字典小部件，在其中实现 Dictionary.com 的 API。我创建了一个包含文本框和提交按钮的 html 表单。我正在尝试编写模拟字典搜索的代码。代码不起作用，我不知道我做错了什么。

这是我正在使用的 PHP 代码：

```
 <?php

  $vid = "<I ENTER THE VID HERE AS A STRING>";

  $url = "http://api-pub.dictionary.com/v001?vid=" . $vid . "&q=" . $_POST['dictionary_search'] . "&type=define&site=dictionary";

  // initialize curl + store in a variable
  $ch = curl_init();

  // configure cURL
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

  $result = curl_exec($ch);

  echo $result;
?> 
```

我启用了 php-curl。我使用的 API 可以在这里找到[http://developer.dictionary.com/](http://developer.dictionary.com/)。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:20:28.670

# 方法一

```
 $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,'http://example.com/path/here');
    curl_setopt($ch, CURLOPT_FAILONERROR,1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 15);
    $retValue = curl_exec($ch);          
    curl_close($ch);

$oXML = new SimpleXMLElement($retValue);

foreach($oXML->entry as $oEntry){
    echo $oEntry->title . "\n";
} 
```

# 方法二

```
$json_url  ='https://exampleurl';

// Initializing curl
$ch = curl_init( $json_url );

// Configuring curl options
$options = array(
CURLOPT_RETURNTRANSFER => true
);

// Setting curl options
curl_setopt_array( $ch, $options );

// Getting results
$results =  curl_exec($ch); // Getting jSON result string

$xml = simplexml_load_string($results);
print_r($results); 
```

# android - Android通过变量设置意图类文件

> ID：14744573
> 
> 赞同：0
> 
> 时间：2013-02-07T05:56:32.740
> 
> 标签：android, variables, android-intent

我正在尝试使用 LayoutInflater 从数组列表中膨胀按钮。基本上我有三个数组列表：一个用于按钮文本，一个用于按钮图像，一个用于单击时将转到的类文件。我在为按钮充气时可以使用文本和图像，但是单击时我无法切换类文件。我已经尝试寻找解决方案，但我没有找到任何适合我需要的东西。非常感谢任何帮助。

这是我的代码：

```
ViewGroup parent;
LayoutInflater inflater;
TextView bText;
ImageView bImage;
        parent = (ViewGroup) findViewById(R.id.container);
        inflater = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        String[] text = {"News","Chat"};
        String[] image = {"news","chat"};
        String[] link = {"Main","Chat"};
        int size = text.length;
        for(int i = 0; i < size; i++) {
            View view = inflater.inflate(R.drawable.button, null);
            int imageID = getResources().getIdentifier(image[i], "drawable",  getPackageName());
            bImage = (ImageView) view.findViewById(R.id.ihome);
            bImage.setImageResource(imageID);
            bText = (TextView) view.findViewById(R.id.thome);
            bText.setText(text[i]);
            parent.addView(view);

            final String theClass = link[i];
            bText.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent blink = new Intent();
                    blink.setClassName(getApplicationContext(), theClass);
                    startActivity(blink);
                }
            });
            } 
```

编辑：为了澄清当我单击任何按钮时它崩溃说它找不到它并询问它是否已在 AndroidManifest.xml 中声明它是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:08:05.030

`Main`您应该`Chat`在`AndroidManifest.xml`. 然后你需要（`PKG`是你的活动包，即`com.example.activity`​​）：

```
Intent blink = new Intent(YourActivity.this, Class.forName(PKG + '.' + theClass)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:11:31.303

blink.setClassName() 的第一个参数是包上下文。所以试着像这样打电话。

```
 blink.setClassName(packagename, fullyqualifiedactivityname);
 getApplicationContext().startActivity(blink); 
```

# android - 根应用程序如何调用具有签名级保护权限的 API

> ID：14744578
> 
> 赞同：2
> 
> 时间：2013-02-07T05:56:48.540
> 
> 标签：android, root, android-permissions

Android 4.2 引入了多用户支持，这涉及到一些现有的内部 API，现在需要新的权限，称为`INTERACT_ACROSS_USERS`和`INTERACT_ACROSS_USERS_FULL`.

后一个被声明为

```
<permission android:name="android.permission.INTERACT_ACROSS_USERS_FULL"
        android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
        android:protectionLevel="signature"
        android:label="@string/permlab_interactAcrossUsersFull"
        android:description="@string/permdesc_interactAcrossUsersFull" /> 
```

这意味着只有与平台 (ROM) 签名相同的应用程序才能使用此权限。

我想知道我是否无法使用平台签名对我的应用程序进行签名，在根条件下有什么方法可以达到相同的目的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T06:01:15.323

如果您有 root 访问权限，您可以将您的 apk 安装在 /system/app（而不是 /data/app）中。这应该会导致您的应用程序符合“signatureOrSystem”的条件，并且您应该获得许可。

# hadoop - 将关系存储到猪的本地文件中不起作用

> ID：14744581
> 
> 赞同：1
> 
> 时间：2013-02-07T05:56:59.080
> 
> 标签：hadoop, mapreduce, apache-pig

我是 pig 新手，我正在使用存储在 /etc/passwd 中的 passwd 文件。我已经使用以下代码以本地模式启动 pig

```
A = LOAD 'passwd' using PigStorage(':');
B = foreach A generate $0 as id;
STORE B INTO 'output'; 
```

给我以下作业无法产生结果的错误。最后一行如果写为 DUMP B; 生成输出。这里有什么问题。？提前致谢

```
Failed Jobs:
JobId   Alias   Feature Message Outputs
job_local_0004  A,B MAP_ONLY    Message: Job failed! Error - NA file:///home/monish/Desktop/output.txt,

Input(s):
Failed to read data from "file:///home/monish/Desktop/passwd"

Output(s):
Failed to produce result in "file:///home/monish/Desktop/output.txt"

Job DAG:
job_local_0004

2013-02-07 11:13:40,578 [main] INFO      org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Failed! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:01:48.637

看起来您正在从本地目录（file:///home/monish/Desktop）调用 pig，然后使用相对路径加载文件。

尝试完全限定文件路径：

```
A = LOAD '/etc/passwd' using PigStorage(':'); 
```

# c++ - 类模板中的链接错误

> ID：14744582
> 
> 赞同：0
> 
> 时间：2013-02-07T05:57:00.647
> 
> 标签：c++, visual-studio-2010, templates

请看下面的代码

**计算器.h**

```
#pragma once
#include <iostream>

template<class T>

class Calculator
{
public:
    Calculator(void);
    ~Calculator(void);

    void add(T x, T y)
    {
        cout << (x+y) << endl;
    }

    void min(T x, T y)
    {
        cout << (x-y) << endl;
    }

    void max(T x, T y)
    {
        cout << (x*y) << endl;
    }

    void dev(T x, T y)
    {
        cout << (x/y) << endl;
    }
}; 
```

**主文件**

```
#include "Calculator.h"

using namespace std;

int main()
{

    Calculator<double> c;
    c.add(23.34,21.56);

    system("pause");
    return 0;
} 
```

当我运行此代码时，出现以下错误。我对类模板不太熟悉。请帮忙！

```
1>------ Build started: Project: TemplateCalculator, Configuration: Debug Win32 ------
1>LINK : error LNK2001: unresolved external symbol _mainCRTStartup
1>c:\users\yohan\documents\visual studio 2010\Projects\TemplateCalculator\Debug\TemplateCalculator.exe : fatal error LNK1120: 1 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:08:49.937

把它扔进 VS2010 真的很快。由于不使用命名空间 std，它不喜欢 cout 和 endl。我只是为了速度添加了一个 using 语句。我更喜欢正常使用 std:: 约定，因为这样可以避免“使用”可能产生的命名问题

它还抱怨没有构造函数和析构函数（在 {} 中添加）

就像之前的评论所说，将你的 main 放在头文件中可能也很糟糕。这都在 test.cpp 的默认项目中

**编辑**我更改了文件结构以将计算器放在 .h 中

计算器.h

```
template<class T>

class Calculator
{
public:
    Calculator(void)
    {
    }
    ~Calculator(void)
    {
    }

    void add(T x, T y)
    {
        cout << (x+y) << endl;
    }

    void min(T x, T y)
    {
        cout << (x-y) << endl;
    }

    void max(T x, T y)
    {
        cout << (x*y) << endl;
    }

    void dev(T x, T y)
    {
        cout << (x/y) << endl;
    }

private:
    T numbers[2];
}; 
```

测试.cpp

```
// test.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"

#pragma once
#include <iostream>
using namespace std;
#include "Calculator.h"

int main()
{

    Calculator<double> c;
    c.add(23.34,21.56);

    system("pause");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:11:13.063

您需要为构造函数和析构函数添加定义

```
 Calculator(void)  {}
 ~Calculator(void) {} 
```

在`Calculator.h`你需要告诉编译器`cout`并且`endl`来自`std`命名空间。例如：

```
std::cout << (x*y) << std::endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:16:01.380

您的项目类型可能是错误的。您需要在控制台应用程序中编写此代码。

顺便说一句，还需要考虑其他答案，特别是定义构造函数和析构函数。

# c++ - 为什么是 std::packaged_task 无效？

> ID：14744588
> 
> 赞同：8
> 
> 时间：2013-02-07T05:57:30.817
> 
> 标签：c++, c++11, packaged-task

使用 MSVC2012，

以下代码将按预期编译和运行

```
std::packaged_task< int() > task( []()->int{ std::cout << "hello world" << std::endl; return 0; } );
std::thread t( std::move(task) );
t.join(); 
```

而以下代码将无法编译和运行

```
std::packaged_task< void() > task( [](){ std::cout << "hello world" << std::endl; } );
std::thread t( std::move(task) );
t.join(); 
```

为什么会这样？

编辑：作为一种解决方法，可以使用 std::promise 在返回 void 的函数上获取 std::future

```
std::promise<void> promise;
auto future = promise.get_future();
std::thread thread( [](std::promise<void> &p){ std::cout << "hello world" << std::endl; p.set_value(); }, std::move(promise) );
future.wait(); 
```

请注意，在带有 std::thread 的 vs2012 库中存在一个错误，该错误会强制您将承诺作为左值引用传入并将承诺移入，如果您通过值或通过 r- 传递承诺，它将无法编译价值参考。这可能是因为实现使用了 std::bind() ，它的行为不符合预期。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T16:57:11.203

这是 MSVC2012 中的错误。MSVC2012 附带的线程库实现中有很多错误。我在我的博客文章中发布了一个部分列表，将其与我的商业 Just::Thread 库进行了比较：[http ://www.justsoftwaresolutions.co.uk/news/just-thread-v1.8.0-released.html](http://www.justsoftwaresolutions.co.uk/news/just-thread-v1.8.0-released.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T16:21:44.227

这适用于 gcc 4.7.2：

```
#include <thread>
#include <future>
#include <iostream>

int main() {
  std::packaged_task< void() > task( [](){ std::cout << "hello world" << std::endl; } );
  std::thread t( std::move(task) );
  t.join();
  std::packaged_task< int() > task2( []()->int{ std::cout << "hello world" << std::endl; return 0; } );
  std::thread t2( std::move(task2) );
  t2.join();
} 
```

与@WhozCraig 的考古一起暗示这可能是 MSVC2012 中的一个错误。

对于解决方法，请尝试使用`struct Nothing {};`or`nullptr_t`作为您的返回值？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-17T15:39:33.963

这个问题在 MSVS 2013RC 中仍然存在，但我在 MS 纠正它时制作了这个临时补丁。它是 void(...) 的 packaged_task 的一个特化，所以我建议把它放在一个头文件中，并将它包含在标准头文件之后。注意 make_ready_at_thread_exit() 没有实现，一些功能没有经过完全测试，使用 at你自己的风险。

```
namespace std {

template<class... _ArgTypes>
class packaged_task<void(_ArgTypes...)>
{
    promise<void> _my_promise;
    function<void(_ArgTypes...)> _my_func;

public:
    packaged_task() {
    }

    template<class _Fty2>
    explicit packaged_task(_Fty2&& _Fnarg)
      : _my_func(_Fnarg) {
    }

    packaged_task(packaged_task&& _Other)
      : _my_promise(move(_Other._my_promise)),
        _my_func(move(_Other._my_func)) {
    }

    packaged_task& operator=(packaged_task&& _Other) {
        _my_promise = move(_Other._my_promise);
        _my_func = move(_Other._my_func);
        return (*this);
    }

    packaged_task(const packaged_task&) = delete;
    packaged_task& operator=(const packaged_task&) = delete;

    ~packaged_task() {
    }

    void swap(packaged_task& _Other) {
        _my_promise.swap(_Other._my_promise);
        _my_func.swap(_Other._my_func);
    }

    explicit operator bool() const {
        return _my_func != false;
    }

    bool valid() const {
        return _my_func != false;
    }

    future<void> get_future() {
        return _my_promise.get_future();
    }

    void operator()(_ArgTypes... _Args) {
        _my_func(forward<_ArgTypes>(_Args)...);
        _my_promise.set_value();
    }

    void reset() {
        swap(packaged_task());
    }
};

}; // namespace std 
```

# c# - 在创建它的线程以外的线程上访问的控件

> ID：14744589
> 
> 赞同：0
> 
> 时间：2013-02-07T05:57:34.423
> 
> 标签：c#, .net, winforms, multithreading

![在此处输入图像描述](../Images/ec0b14d714aaa0b1474a067b4408315d.png)

简而言之：我想加载我的表单，然后使用`Background Worker`从中获取数据`Database` 并设置一些组合框的 DataSource。
在`DoWork`事件中我获取数据，在`RunWorkerCompleted`事件中我设置数据源。问题是跨线程问题。我能做些什么来解决这个问题？

**我不明白为什么设置 DisplayMember 可以，但在下一行，设置 ValueMember 会引发异常**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T06:31:16.003

您可以使用控件的“调用”方法在与该控件相同的上下文（线程）中运行代码。这是一个简单的例子：

```
comboBox1.Invoke((MethodInvoker)delegate{
       //Code to modify control will go here
            comboBox1.Text = "";
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:03:50.217

我想你把它弄反了。DoWork 应该是`FetchData`并且 DoWorkCompleted 应该是`BindComboBoxes`.

# python - Pip 在安装其他东西时尝试删除 setuptools

> ID：14744591
> 
> 赞同：1
> 
> 时间：2013-02-07T05:57:48.823
> 
> 标签：python, pip, setuptools, easy-install, webfaction

我正在从如下所示的 Pip 需求文件进行安装：

```
Mezzanine==1.2.4
# psycopg2==2.4.5
South==0.7.6
django-compressor==1.2

mezzanine-mdown==0.1a3
Pygments==1.5 
```

导致此错误（`django-appconf`是的依赖项`django-compressor`）：

```
[...]
  Running setup.py install for django-appconf

  Found existing installation: setuptools 0.6c11
    Uninstalling setuptools:
Exception:
Traceback (most recent call last):
  File "/home/adambrenecki/lib/python2.7/pip/basecommand.py", line 107, in main
    status = self.run(options, args)
  File "/home/adambrenecki/lib/python2.7/pip/commands/install.py", line 261, in run
    requirement_set.install(install_options, global_options)
  File "/home/adambrenecki/lib/python2.7/pip/req.py", line 1162, in install
    requirement.uninstall(auto_confirm=True)
  File "/home/adambrenecki/lib/python2.7/pip/req.py", line 495, in uninstall
    paths_to_remove.remove(auto_confirm)
  File "/home/adambrenecki/lib/python2.7/pip/req.py", line 1492, in remove
    renames(path, new_path)
  File "/home/adambrenecki/lib/python2.7/pip/util.py", line 273, in renames
    shutil.move(old, new)
  File "/usr/local/lib/python2.7/shutil.py", line 300, in move
    os.unlink(src)
OSError: [Errno 13] Permission denied: '/usr/local/bin/easy_install' 
```

奇怪的是，每当我`django-compressor`单独安装（或任何其他）时，它都不会这样做。只有当我使用需求文件时。

我用来安装的完整命令是`pip-2.7 install --install-option="--install-scripts=/home/[username]/webapps/[appname]/bin" --install-option="--install-lib=/home/[username]/webapps/[appname]/lib/python2.7" -r requirements.txt`. 我在 WebFaction 的一台服务器上，如果有帮助的话。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-07T08:22:12.793

看起来像以下描述的权限问题：

```
OSError: [Errno 13] Permission denied: '/usr/local/bin/easy_install' 
```

尝试“sudo”你的命令。

编辑：WebFaction 的文档中有一条关于“Permission Denied”错误的说明，可在以下地址[http://docs.webfaction.com/software/python.html](http://docs.webfaction.com/software/python.html)中找到（滚动到页面底部）。

# php - 视图模型中的 ZF2 自定义方法可用于特定模板

> ID：14744592
> 
> 赞同：2
> 
> 时间：2013-02-07T05:57:53.050
> 
> 标签：php, zend-framework2

在这方面找不到任何合理的答案。

在控制器中，您返回一个`ViewModel`可以包含子 ViewModel 的实例。没关系，我明白了，但是这些子块也需要变量，您可以在同一个控制器操作中设置这些变量。但是，您如何准确地避免 11 页长的控制器操作呢？

例如，在 Magento 中，视图脚本派生自“块”，这些“块”是具有更改视图的特定方法的类，因此您可以简单地获取子 html，它会使用自己的方法独立处理自己。

实用（模板法）：

```
<?php echo $this->getSidebar(); ?> 
```

不切实际（ZF2 控制器）：

```
$leftSidebar = new ViewModel(...
$leftSidebarPostsWidget = new ViewModel(...
$leftSidebar->addChild($leftSidebarPostsWidget);
$view = new ViewModel();
$view->addChild($leftSidebar);    

return $view; 
```

我查看了视图助手，但这些似乎可用于所有不必要的视图脚本。

有没有办法将自定义渲染类与特定模板相关联？

我可以创建扩展 ViewModel 的块类，但恐怕我只是错过了 Zend Framework 2 中有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T22:44:42.683

我完全同意马歇尔之家的观点。我开发了几个 magento 模块，块解决方案非常方便。

为了在 Zend2 中获得类似功能，我所做的是在 ViewModel 中设置一个变量，命名为“我”，其中包含具有所需方法的对象。在我的例子中，实际上该对象包含 ViewModel，并且只需一点​​点工作，您就可以制作与 magento 一样的树。

```
$blockModel->setVariable('me', $blockModel); 
```

$blockModel 本身有一个保存 viewModel 的属性，如果你在其中构建一棵树

```
$blockModel->getParent(); 
```

返回父块，你可以说：

```
$blockModel->getParent()->getViewModel()->addChild($blockModel->getViewModel()); 
```

在您的 phtml 模板中，您只需调用即可`$this->me->anyMethod()`。

当然很棘手，但magento不是一天建成的......

# android - 在android中获取方法问题

> ID：14744594
> 
> 赞同：1
> 
> 时间：2013-02-07T05:57:58.060
> 
> 标签：android, android-layout, android-intent, android-emulator

我在 php 中创建了类似的 get 参数，并且我正在使用 Get 方法提交到链接。例如：“ [http://example.com/subscribe/?act=SubscribeForEmail&EmailAddress=](http://example.com/subscribe/?act=SubscribeForEmail&EmailAddress=) ”。

如果用户输入edittext（比如aa@gmail.com）并提交，它将提交为

[http://example.com/subscribe/?act=SubscribeForEmail&EmailAddress=aa@gmail.com](http://example.com/subscribe/?act=SubscribeForEmail&EmailAddress=aa@gmail.com)。怎么样

可能在android中？

我尝试通过一个例子来使用它。但它强制关闭

代码如下：

```
EditText Ename;
Button btncreate;
String n = null;
String contentOfMyInputStream1;
String output = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Ename = (EditText)findViewById(R.id.msgTextField);
    btncreate = (Button)findViewById(R.id.sendButton);
    btncreate.setOnClickListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public void onClick(View v) {   
    String st1;
    st1 = Ename.getText().toString();
    try {
        output = "http://example.com/subscribe/?act=SubscribeForEmail&EmailAddress="+st1;
        downloadUrl(output);//request been send
    } 
    catch (IOException e) {
        e.printStackTrace();
    }
    if (output != null) {
        Toast.makeText(this, output, Toast.LENGTH_SHORT).show();
    }
}

public String downloadUrl(String url) throws IOException {
    HttpClient httpclient = new DefaultHttpClient();
    HttpRequestBase httpRequest = null;
    HttpResponse httpResponse = null;
    InputStream inputStream = null;
    String response = "";
    StringBuffer buffer = new StringBuffer();
    httpRequest = new HttpGet(url); 
    httpResponse = httpclient.execute(httpRequest);
    inputStream = httpResponse.getEntity().getContent();
    int contentLength = (int) httpResponse.getEntity().getContentLength();
    if (contentLength < 0)  {
        // Log.e(TAG, "The HTTP response is too long.");
    }
    byte[] data = new byte[256];
    int len = 0;
    while (-1 != (len = inputStream.read(data)) ) {
        buffer.append(new String(data, 0, len));
    }
    inputStream.close();
    response = buffer.toString();
    return response;
} 
```

我收到错误

```
Fatal Exception:main
android.os.NetworkOnMainTreadException
at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
at java.net.InetAddress.lookHostByName(InetAddress.java:385)
at java.net.InetAddress.getAllByNameImpl(InetAddress.java:385)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137) 
```

请帮我解决问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:00:49.567

就像`Exception`告诉你的那样简单。您在 main 上运行网络内容`Thread`。使用`AsyncTask`或 a`new Thread`执行您的`downloadUrl`方法。

使用此示例代码，取自[此处](https://stackoverflow.com/questions/9671546/asynctask-android-example)：

```
private class LongOperation extends AsyncTask<String, Void, String> {

      @Override
      protected String doInBackground(String... params) {
            //Here you put your downloadUrl() method.
            //because this method does stuff in background
            return downloadUrl(params[0])
      }      

      @Override
      protected void onPostExecute(String output) {
          //after downloading is finished, toast it.
          if (output != null)
              Toast.makeText(this, output, Toast.LENGTH_SHORT).show();
      }

      @Override
      protected void onPreExecute() {
      }

      @Override
      protected void onProgressUpdate(Void... values) {
      }
} 
```

通过以下两行调用它：

```
LongOperation downloadTask = new LongOperation();
downloadTask.execute(output); 
```

[这个网站](http://www.javasrilankansupport.com/2012/11/asynctask-android-example-asynctask-in.html)也可能有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:00:09.103

Android 不允许您在主 (UI) 线程上执行耗时较长的任务（例如网络操作）。如果您需要发出 http 请求，则需要在单独的线程上创建它。

要么使用 AsyncTask 要么只是在新线程中生成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:07:33.593

您不能在 Honeycombe 的 UI 线程上执行网络 IO。从技术上讲，这在早期版本的 Android 上*是*可能的，但这是一个非常糟糕的主意，因为它会导致您的应用程序停止响应，并可能导致操作系统因您的应用程序行为不端而杀死您的应用程序。您需要运行后台进程或使用 AsyncTask 在后台线程上执行网络事务。

Android 开发者网站上有一篇关于[Painless Threading](http://android-developers.blogspot.com/2009/05/painless-threading.html)的文章很好地介绍了这一点，并且将为您提供比此处实际提供的更深入的答案。

# c# - Razor C# - 从数据库中获取数据

> ID：14744595
> 
> 赞同：4
> 
> 时间：2013-02-07T05:58:00.617
> 
> 标签：c#, asp.net, sql-server, razor, webmatrix

我正在使用 WebMatrix，我创建了一个数据库并放置了一个包含几行数据的表。我可以连接到它并使用 获取数据`WebGrid`，但它只提供了一种使用表格输出数据的方法。

这是我的“shows.cshtml”代码：

```
@{
    var db = Database.Open("TVPort");
    var shows_data = db.Query("SELECT * FROM shows");
    var shows_grid = new WebGrid(source: shows_data);
} 
```

我想要做的是枚举查询返回的每一行，并对每一列的值做任何我想做的事情。但`WebGrid`唯一允许您在表中输出数据。我今天才开始使用 WebMatrix 和 Razor 语法。

另外（这里的附带问题，认为这不足以成为自己的问题），有没有办法为我的“shows.cshtml”页面制作 C# 代码文件？在 Visual Web Developer 2010 中，每个页面都有一个“page.aspx”文件和一个“page.aspx.cs”，其中“page.aspx.cs”文件允许您在页面中使用自定义函数或执行任务页面加载时。在 WebMatrix 中使用 CSHTML 是否有类似的行为？还是所有代码都应该与实际页面内联？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T06:07:51.177

在使用数据找到答案[：ASP.net](http://www.asp.net/web-pages/tutorials/data/5-working-with-data "处理数据")

```
@foreach(var row in db.Query("SELECT * FROM shows")) {
  <em>@row.title</em> - Cast: @row.cast
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:16:56.113

你走错路了！MVC 模式在将数据逻辑与实际内容分离方面有其优势，现在您正在视图中检索新数据（这不会给控制器留下太多控制权）！

查看[http://www.asp.net/mvc](http://www.asp.net/mvc)以获得有关如何使用 ASP.Net MVC 以及如何构建类和文件的一些很棒的教程（它将回答您的两个问题）。如果您以前使用 PHP 并直接在同一页面中编写每个查询，这似乎有点过头了，但相信我，您创建的代码会更干净，并且使用 ASP.Net MVC 更容易维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:30:05.683

关于您的附带问题，我会说使用 Razor 框架您不能拥有代码隐藏文件。它将服务器端代码和客户端代码混合在一起。如果您想要一个代码隐藏文件，那么您可以在 Visual Studio 上使用没有剃刀视图引擎的 Asp.net 网页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T23:22:49.083

对于附带的问题，我相信 @function{"insert code inside this block"} 将允许您在页面内创建自定义函数。希望这可以帮助其他可能有类似问题并最终来到这里的人。信不信由你，有一些关于如何开始的很好的文档@http [://www.asp.net/get-started](http://www.asp.net/get-started)。只需通过教程。

# iphone - 如何使用 ARC 模式管理内存

> ID：14744596
> 
> 赞同：0
> 
> 时间：2013-02-07T05:58:00.713
> 
> 标签：iphone, objective-c, automatic-ref-counting

我正在创建一个 ios 应用程序并启用了 ARC 模式。我将 24 个实例加载到 ScrollView，但在给定时间只会显示三个视图。因此，我将删除已加载到内存中的其他不需要的实例

```
if((NSNull *)[viewControllers objectAtIndex:2] != [NSNull null]) {
    [viewControllers replaceObjectAtIndex:2 withObject:[NSNull null]];
    [content3.view removeFromSuperview];
    //remove third content page
    [content3 viewDidUnload];
    //set nil to instance to memory management
    content3 = nil;

    NSLog(@"Content 3 removed");
} 
```

但是当我用分析器检查时，内存不会被释放，它只是自动增加。

谁能给我一些关于这个问题的提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:05:18.093

我认为您的代码中存在很多问题：

1.  一个重要问题是，您正在调用委托方法`viewDidUnload`。永远不要尝试做这样的事情，否则你会在你的应用程序中遇到奇怪的行为。
2.  如果您需要从内存中删除一个对象，只需将其设置为 nil。
3.  我认为您的 if 条件永远不会起作用，为什么要将其类型转换为 NSNull ？

检查此代码：

```
if([viewControllers objectAtIndex:2] != [NSNull null])
{
    [viewControllers replaceObjectAtIndex:2 withObject:[NSNull null]];
    [content3.view removeFromSuperview];
    content3 = nil;
    NSLog(@"Content 3 removed");
} 
```

# jquery - 如何设置文本输入上显示的弹出元素的样式？

> ID：14744599
> 
> 赞同：0
> 
> 时间：2013-02-07T05:58:10.297
> 
> 标签：jquery, html, css, textinput

![在此处输入图像描述](../Images/49d49527fc5350abd1b6dbe441c24339.png)

我正在使用 google search api 构建自己的自定义搜索。
如何设置选择输入框时显示的弹出窗口的样式？
它是某种搜索输入历史弹出窗口。
我想这可能只能通过 jquery 实现。但我不知道如何调用这个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:02:17.730

您无法设置历史完整下拉列表的样式。它在不同的浏览器上实现不同。

如果它与您网站的设计不匹配，您可以隐藏它，使用`autocomplete="off"`

请参阅重复的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:06:03.020

正如 Samuel Liew 的回答所表明的，这是您无法设置样式的浏览器功能。如果您只是不想显示它，请使用`autocomplete="off"`. 如果您确实想要该功能*并且*确实需要对其进行样式设置，则必须自己动手，例如通过将用户先前输入的列表存储在会话或 cookie 值中并使用它来填充您的列表当用户输入文本时手动生成。

# javascript - 需要编写基于 Javascript/Jquery 的跨域请求

> ID：14744610
> 
> 赞同：0
> 
> 时间：2013-02-07T05:58:58.700
> 
> 标签：javascript, jquery, cross-domain

嗨，我必须编写将服务跨域请求的 Rest API 调用

我已经根据请求与 Mozilla（rest 客户端）进行了核对，它现在为我提供了如何通过 html 中的 jquery/javascript 编写的数据。

```
{"POST to adengine":{"method":"POST","url":"http://xxx.com/Advertisement/1.0/GetAds","body":"aid=Apposaurus_xxx","overrideMimeType":false,"headers":[["Content-Type","application/x-www-form-urlencoded"]]}} 
```

这是我在 html 中的示例代码

```
<html>
<title></title>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">

JSONTest = function() {
    var resultDiv = $("#resultDivContainer");
    $.ajax({
        url: "http://xxx.com/Advertisement/1.0/GetAds",
        type: "POST",
        data:  "aid=Apposaurus_xxx",        
        overrideMimeType:'false',
        crossDomain: 'true',
        dataType: 'jsonp',
        headers:{"Content-Type":'application/x-www-form-urlencoded'},

        success: function (result) {
            switch (result) {
                case true:
                     processResponse(result);
                    break;
                default:
                    resultDiv.html(result);
            }
        },
        error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        }    
});
};
</script>
</head>
<body>

<div id="resultDivContainer"></div>

<button type="button" onclick="JSONTest();">JSON</button>

</body>
</html> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:01:51.310

跨域请求应该使用 JSONP 来完成。JSONP 代表*带有 Padding 的 JSON*。我会在这里稍微解释一下。

你想如何从服务器获取数据（当我们谈论 JSON 时的脚本）？你有两种方法：

1.  一个 ajax 请求，它在后台使用`XMLHttpRequest`对象实例完成，并且仅限于发送到同一个域，
2.  一个简单的 HTTP Get 请求，通过`<script>`在 HTML 文档的某处插入一个标签来完成，主要是在 head 部分。

第二种技术不限于跨域策略。但是，让我们看看浏览器在这两种情况下如何作为我们的代理工作：

ajax 场景：开发者代码 => 浏览器 => 请求 => 服务器 => 响应 => 浏览器 => 开发者代码。这意味着当您使用 ajax 时，浏览器会代表您创建一个 HTTP 请求（带有`X-Requested-With: XMLHttpRequest`标头字段）并将其发送到服务器，然后它会获取响应库，**但它会将响应返回给您*，以便作为开发人员，您有机会分析响应并使用它做任何您想做的事情。

HTTP Get 场景：开发者代码 => 头部中的脚本标签 => 浏览器 => 请求 => 服务器 => 响应 => 浏览器 => 响应执行。

看？当您使用 JSONP 或`<script>`在 head 中插入简单标记时，浏览器会从服务器获取脚本，但它会运行脚本，这就是结束。您还没有被响应所吸引，并且您无法控制它。因此，您需要`callback`为它提供一个函数。`callback({})`不同之处在于`{}`，当它被执行时，它让你有机会得到结果并用它做一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:15:25.273

您能否稍微更改您的代码并告诉我们控制台记录了什么？请不要使用 IE，因为它有一个可怕的 console.log 实现（显示 Object.Object）。带有 Firebug 的 Chrome 或 Firefox 会做得更好。

建议更改：

```
 success: function (result) {
console.log("here is the result:",result);
//            switch (result) {
//                case true:
//                     processResponse(result);
//                    break;
//                default:
//                    resultDiv.html(result);
//            }
        },
        error: function (xhr, ajaxOptions, thrownError) {
console.log("this is the error",arguments);
//        alert(xhr.status);
        } 
```

# iphone - 如何在没有 iphone 的情况下测试响应式设计字体

> ID：14744611
> 
> 赞同：1
> 
> 时间：2013-02-07T05:59:25.437
> 
> 标签：iphone, css, html, responsive-design

我实现了响应式设计的概念，但现在我们面临一个问题。内容似乎很适合框架内。我用过`max-device-width`等等。我的字体大小都使用固定大小的像素，即 12px 等等。现在，当我把它交给我的客户时，他抱怨它在 iPhone 上看起来超级小。我实际上没有 iPhone 来测试这些设计。

有没有在不使用实际设备的情况下对其进行测试？模拟器什么的？我通过调整浏览器窗口的大小在 Chrome 上对其进行了测试，但在实际设备上它看起来非常小而且很难阅读。附上一张截图：

![在此处输入图像描述](../Images/7920c86417ec5554941d1ab86a530cf9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T07:07:29.243

如果您有 Chrome 浏览器，则应尝试更改[用户代理](http://googlesystem.blogspot.ro/2011/12/changing-user-agent-new-google-chrome.html)。

**第 1 步：**打开 Chrome => 转到所需的网站 => 按`F12`=> 应出现元素面板。

**第二步：**点击`Settings`图标。它应该在右下角（如果设计没有改变）：

![在此处输入图像描述](../Images/90dfaf312a5b4f80f003da88a766fa3c.png)

**第三步：**点击`Overrides`标签：

![在此处输入图像描述](../Images/168922106f470975aa39993b85045ff2.png)

**第 4 步：**检查`User Agent`并从下拉列表中选择一个设备。不要忘记检查`Device metrics`，您也可以在其中添加自定义值：

![在此处输入图像描述](../Images/8ae9656ea4a1eda99746f07521a7d9e2.png)

[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/docs/mobile-emulation?hl=en)中的更多信息。

* * *

### *更新：*

对于 Chrome 版本 32+，请参阅[此链接](https://developers.google.com/chrome-developer-tools/docs/mobile-emulation)以获取 chrome 开发人员工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-22T14:52:14.767

我使用的是 quirktools 的 Screenfly。对我来说就像一个魅力！

[http://quirktools.com/screenfly/](http://quirktools.com/screenfly/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T07:00:23.210

您可以尝试：[responsive.is](http://responsive.is) 该站点具有不同的方向和设备，您可以在这些设备上查看站点的呈现方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-22T14:49:29.553

您可以尝试使用[http://www.isresponsive.com](http://www.isresponsive.com)让您在不同的设计上测试响应式设计。

# excel - 以 10 人为单位更新的在线 Excel 工作表

> ID：14744613
> 
> 赞同：-1
> 
> 时间：2013-02-07T05:59:40.913
> 
> 标签：excel, live

我有一个 10 个人共享和定期更新的 Excel 表。我们在网络共享上拥有它。我想知道是否有一个基于 Web 的界面，我可以用它来表示这张表并让 ppl 在线更新它。当然它不需要是在线的excel表。我实际上找不到合适的词来搜索它。我想将它托管在我的网络服务器上。它说它已关闭，但我正在等待一些基于 php Web 的应用程序，我可以将其放在我的一台主机上。无论如何thanx所有问候所有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:03:51.053

您可以使用[`Google Docs`](http://docs.google.com)或[`Excel Web App`](http://office.microsoft.com/en-us/web-apps-help/introduction-to-excel-web-app-HA010378338.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:11:12.827

选择众多[在线电子表格应用程序](http://mashable.com/2008/02/05/forget-excel-14-online-spreadsheet-applications/)之一， 否则您总是会遇到锁定问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:12:06.430

有很多在线 Excel 可用，例如 Google Docs、[Zoho Sheet](https://sheet.zoho.com/excelviewer)、[Edit Grid](http://www.editgrid.com)

# android - 如何在 TableLayout 中搜索列值？

> ID：14744614
> 
> 赞同：2
> 
> 时间：2013-02-07T05:59:45.983
> 
> 标签：android

如何搜索在android的表格布局中动态创建的行？我有一个表格布局，其中包含名称和代码作为列，我如何在这些行中搜索特定的名称/代码？

我正在尝试以这种方式添加标签：

```
TextView empFirstName = null; 
int i,j;
for (i=0; i<employees.size();i++){

    final Employee employee = (Employee) employees.get(i);

    int count = 0;

    TableRow empData = new TableRow(this);
    empData.setId(300+count);
    empData.setClickable(true);

    /*empData.setLayoutParams(new LayoutParams(
            LayoutParams.MATCH_PARENT,
            LayoutParams.MATCH_PARENT ));*/
    //tr.setClickable(true);

    final TextView empCode = new TextView(this);
    empCode.setId(300+count);
    empCode.setText(employee.getCode());
    empCode.setTextSize(16);
    empCode.setPadding(2,2, 2, 2);
    empCode.setLayoutParams(new TableRow.LayoutParams( 0, android.view.ViewGroup.LayoutParams.WRAP_CONTENT, 2 ));
    empData.addView(empCode);

    final TextView empName = new TextView(this);
    empName.setId(300+count);
    empName.setText(employee.getCallName());
    empName.setTextSize(16);
    empName.setPadding(2, 2, 2, 2);
    empName.setLayoutParams(new TableRow.LayoutParams( 0, android.view.ViewGroup.LayoutParams.WRAP_CONTENT, 4 ));
    empData.addView(empName);

    empFirstName = new TextView(this);
    empFirstName.setId(007);
    empFirstName.setText(employee.getFirstName());
    empFirstName.setTag(i);
} 
```

我正在尝试使用 setTag()，如何使用 getTag()} 检索文本的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:03:01.837

因此，从您的评论中，我认为您想创建一个包含一些详细信息的列表。而不是去 TableView 和 rows 。您可以使用列表视图

浏览这个[Android 开发者网站文档](http://developer.android.com/guide/topics/ui/layout/listview.html)。它将为您提供许多用于获取行详细信息及其内容的内置功能

这里有一些教程：[教程 1](http://www.vogella.com/articles/AndroidListView/article.html)

[教程 2](http://www.mkyong.com/android/android-listview-example/)和[教程 3](http://windrealm.org/tutorials/android/android-listview.php)

这些教程将帮助您创建简单的列表视图

首先得到基本的想法。另外得到一张关于[适配器视图的图片](http://developer.android.com/guide/topics/ui/declaring-layout.html#AdapterViews)

稍后您可以使用自定义适配器类自定义列表视图：[请参阅此](https://stackoverflow.com/a/14743456/1450401)

希望对你有帮助

# c# - DataGridView 控件必须绑定到要排序的 IBindingList 对象

> ID：14744615
> 
> 赞同：2
> 
> 时间：2013-02-07T05:59:47.137
> 
> 标签：c#, .net, datagridview, invalidoperationexception

我有一个继承自它的自定义控件`DataGridView`，我希望能够复制 .cs 文件并将其放入任何项目中。虽然有一段代码我无法移出`Main.cs`并移入`DataGridView.cs`：

```
private void Main_Load(object sender, EventArgs e)
{
    dgv.Sort(dgv.Columns[0], ListSortDirection.Ascending);
    dgv.Columns[0].HeaderCell.SortGlyphDirection = SortOrder.Ascending;
} 
```

这是我尝试过的：

```
class MyDataGridView : DataGridView
{
    protected override void InitLayout()
    {
        base.InitLayout();
        Sort(Columns[0], ListSortDirection.Ascending);
        Columns[0].HeaderCell.SortGlyphDirection = SortOrder.Ascending;
    }

    // Lots of methods snipped
} 
```

该程序立即抛出`InvalidOperationException`一个`Sort()`：

> DataGridView 控件必须绑定到要排序的 IBindingList 对象。

如何将此代码移入`DataGridView.cs`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:44:59.420

我是这样做的：

```
class MyDataGridView : DataGridView
{
    public MyDataGridView()
    {
        base.DataBindingComplete += Sort;
    }

    public void Sort(object sender, EventArgs e)
    {
        Sort(Columns[0], ListSortDirection.Ascending);
        Columns[0].HeaderCell.SortGlyphDirection = SortOrder.Ascending;
    }
} 
```

# c# - 列表视图的 WPF MouseMove 事件

> ID：14744628
> 
> 赞同：0
> 
> 时间：2013-02-07T06:01:02.337
> 
> 标签：c#, wpf, listview, mousemove

在我的 wpf 应用程序中，当鼠标移到 mousemove 事件中的不同项目上时，我面临从 listview 获取项目的问题。例如，如果 listview 包含列为 的项目，

```
 "one"
    "two"
    "three"
    ----

Then in mousemove event if my mouse moved over the item two then i have to get "two" in my code.

Please help me as i am very new to this WPF.
Regards
Ravi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:40:10.083

这可能是一个非常简单的解决方案，但它似乎确实可以满足您的要求。

```
 private void listView_MouseMove(object sender, MouseEventArgs e)
    {
        var item = Mouse.DirectlyOver;

        if (item != null && item is TextBlock)
            Debug.Print((item as TextBlock).Text);
    } 
```

我希望这有帮助。

# mysql - Mysql 多重计数和选择

> ID：14744638
> 
> 赞同：-5
> 
> 时间：2013-02-07T06:01:51.713
> 
> 标签：mysql, sql

大家好，我正在尝试计算特定 ID 的特定项目

数据库结果

```
name                      remarks
joseph greggory           On time
joseph greggory           On time
lara joy                  On time
lara joy                  Absent
Mark Joben                On time
Mark Joben                Absent
Isnaira Lyn               Absent
Isnaira Lyn               Absent 
```

结果应该是

```
name                  On time         Late       Absent
joseph Greggory         2              0            0
Lara Joy                1              0            1
Mark Joben              1              0            1
Isnaira Lyn             0              0            2 
```

提前谢谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T06:03:33.130

```
SELECT  name,
        SUM(CASE WHEN remarks = 'On time' THEN 1 ELSE 0 END) `On time`,
        SUM(CASE WHEN remarks = 'Late' THEN 1 ELSE 0 END) `Late`,
        SUM(CASE WHEN remarks = 'Absent' THEN 1 ELSE 0 END) `Absent`  
FROM    TableName
GROUP   BY name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/252d4/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:13:20.913

你可以试试这个

```
select name,
       count(case when remarks = 'On time' then 1 end) "On time",
       count(case when remarks = 'Late' then 1 end) "Remarks",
       count(case when remarks = 'Absent' then 1 end) "Absent"
from table1
group by name; 
```

**[SQL 提琴输出](http://www.sqlfiddle.com/#!2/f238a/9/0)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:09:26.213

你可以试试这个：

```
SELECT  name,
        COUNT(IF(remarks = 'On time', 1, NULL)) `On time`,
        COUNT(IF(remarks = 'Late', 1, NULL)) `Late`,
        COUNT(IF(remarks = 'Absent', 1, NULL)) `Absent`  
FROM    tbl
GROUP   BY name 
```

# java - 如何在响应中查找嵌入对象的数量

> ID：14744643
> 
> 赞同：0
> 
> 时间：2013-02-07T06:02:09.150
> 
> 标签：java, object, response

在 Web 应用程序中，我们向 Web 服务器发送一个 http 请求，然后我们得到响应。我们的浏览器将在浏览器中呈现该响应并显示它。我想计算响应页面中嵌入对象的数量，例如图像、视频、音频文件、CSS 等。

我得到了 JavaScript 代码

`document.write(document.images.length)`

并使用 jQuery 代码

`alert($("img").size());`

但我想使用 Java 计算响应 HTML 页面中嵌入对象的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:39:08.913

在 java 中使用任何 HTML 解析器。有许多可用的解析器。使用解析器，您可以找到对象的数量和其他对象。

**示例链接：**

[http://jsoup.org/cookbook/extracting-data/example-list-links](http://jsoup.org/cookbook/extracting-data/example-list-links)

[https://stackoverflow.com/questions/3084148/html-parser-in-java](https://stackoverflow.com/questions/3084148/html-parser-in-java)

[哪个 HTML 解析器最好？](https://stackoverflow.com/questions/2168610/which-html-parser-is-best)

# ios - 将 UITextView 文本包装到角半径

> ID：14744645
> 
> 赞同：1
> 
> 时间：2013-02-07T06:02:12.567
> 
> 标签：ios, objective-c, cocoa-touch, uitextview, calayer

如何将 UITextView 的文本包装到它的角半径？目前，当我将角半径应用于 UITextView 时，角文本会被剪切。我想将文本包装成圆形。我不能使用 UIWebView 代替 UITextView。有人对此有解决方案吗？我不能使用核心文本，因为我有多个文本视图，所以它会非常复杂。有没有办法为此使用 CALayer ？

# asp.net - 使用 asp.net mvc2 优化精灵和图像

> ID：14744646
> 
> 赞同：0
> 
> 时间：2013-02-07T06:02:13.373
> 
> 标签：asp.net, asp.net-mvc-2

我想在我的 asp.net mvc 2 应用程序中使用 sprite 和图像优化框架。我 sprit dll 与 asp.net mvc3 和 4 框架完美配合。我已经从 [http://aspnet.codeplex.com/releases/view/65787下载了 sprite dll](http://aspnet.codeplex.com/releases/view/65787)

但相同的精灵 dll 不适用于 asp.net mvc 2 应用程序。

我想我需要更改 sprite 框架以针对 mvc 2 应用程序。

如果有人已经这样做了，请您指导我吗？

谢谢和问候， 普拉尚特

# lotus-domino - 无法使用 icalendar 将会议请求从 lotus notes 发送到 microsoft exchange

> ID：14744648
> 
> 赞同：0
> 
> 时间：2013-02-07T06:02:37.187
> 
> 标签：lotus-domino, icalendar

这是我的代码。请建议进行必要的更改以将会议请求从 Lotus 发送到 Exchange。我收到一封空白邮件，在 lotus 和 exchange 中都没有内容。除了 .ics 文件之外，我还需要将详细信息直接添加到 lotus 文档中吗？

```
public class ICalendarSample {

public static void main(String[] args) {

// Creating a new calendar
Calendar calendar = new Calendar();
calendar.getProperties().add(new ProdId("-//Lotus Development Corporation//NONSGML Notes 8.5.1//EN_S"));
calendar.getProperties().add(Version.VERSION_2_0);

// start time
java.util.Calendar startCal = java.util.Calendar.getInstance();
startCal.set(2013, 05, 11, 15, 00);

// end time
java.util.Calendar endCal = java.util.Calendar.getInstance();
endCal.set(2013, 05, 11, 15, 30);

SimpleDateFormat sdFormat = new SimpleDateFormat("yyyyMMdd'T'hhmmss'Z'");
String strDate = sdFormat.format(startCal.getTime());

net.fortuna.ical4j.model.Date startDt = null;
try {
startDt = new net.fortuna.ical4j.model.Date(strDate);

long diff = endCal.getTimeInMillis() - startCal.getTimeInMillis();
int min = (int) (diff / (1000 * 60));
Dur dur = new Dur(0, 0, min, 0);

// Creating a meeting event
VEvent meeting = new VEvent(startDt, dur, "Meeting Subject");
meeting.getProperties().add(new Uid("nitin1234"));
meeting.getProperties().add(new Organizer());
meeting.getProperties().getProperty(Property.ORGANIZER)
.setValue("xx");
meeting.getProperties().add(new Attendee());
meeting.getProperties().getProperty(Property.ATTENDEE)
.setValue("xx");

String calFile = "TestCalendar.ics";
FileOutputStream fout = null;
fout = new FileOutputStream(calFile);
CalendarOutputter outputter = new CalendarOutputter();
outputter.setValidating(false);
outputter.output(calendar, fout);

System.out.println(meeting);
File f;
f = new File("TestCalendar.ics");
f.createNewFile();
FileWriter fstream = new FileWriter("TestCalendar.ics", true);
BufferedWriter fbw = new BufferedWriter(fstream);
fbw.write(meeting.toString());
fbw.close();

Session s;

s = NotesFactory.createSessionWithIOR(Strings.IOR, "xx","xx");
Database db = s.getDatabase("xxx", "xxx");
Document doc = db.createDocument();
s.setConvertMime(false);
doc.replaceItemValue("Form", "Memo");
MIMEEntity body = doc.createMIMEEntity("body");
MIMEHeader header = body.createHeader("Content-class");
header.setHeaderVal("urn:content-classes:calendarmessage");
header = body.createHeader("Content-Type");
header.setHeaderValAndParams("text/calendar; Method=Request; name=\"TestCalendar.ics\"");
header = body.createHeader("Content-Transfer-Encoding");
header.setHeaderVal("8bit");
s.setConvertMime(true);
doc.save();
doc.send("xxx");

} catch (ParseException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
} catch (URISyntaxException e) {
e.printStackTrace();
} catch (NotesException e) {
e.printStackTrace();
} catch (ValidationException e) {
e.printStackTrace();
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:37:52.867

`setHeaderValAndParams`有参数时使用：

```
header = body.createHeader("Content-Type");
header.setHeaderValAndParams("text/calendar; method=REQUEST; name=\"meeting.ics\"");
header = body.createHeader("Content-Transfer-Encoding");
header.setHeaderVal("8bit"); 
```

以下是添加文件的方法（在 LotusScript 中）：

[是否可以使用 AJAX 将图像文件上传到 Domino 服务器？](https://stackoverflow.com/questions/4731217/is-it-possible-to-upload-an-image-file-using-ajax-to-domino-server/4750288)

您的情况不需要 Base64 编码。

# ios - imagePickerController iPhone

> ID：14744649
> 
> 赞同：0
> 
> 时间：2013-02-07T06:02:54.850
> 
> 标签：ios, objective-c, xcode, uiimagepickercontroller

我的应用程序具有从相机胶卷中挑选图像并单击新图像然后上传的功能。当我从相机胶卷中选择现有图像时，它会给我一个像asset.jpg这样的图像名称（这是我想要的），但是当我点击我的新图像时，它会返回一个内存位置而不是图像的名称（例如资产.jpg）。为了将名称命名为asset.jpg，我必须首先使用将图像存储到相机胶卷

```
if (picker.sourceType == UIImagePickerControllerSourceTypeCamera)
        {
            UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
            //UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
            [self.imageView setImage:nil];
        } 
```

我不想。无论如何，我可以将图像名称作为asset.jpg 获取新单击的图像，而无需先将图像保存到相机胶卷。提前致谢。

**编辑**：

UIImagePickerControllerReferenceURL 在从相机胶卷中选择现有图像的情况下提供 URL，但返回新单击图像的临时内存位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:13:16.483

保存照片时会提供资产名称，因此您需要这样做。我使用以下代码保存图像并获取其路径。

```
 ALAssetsLibrary* library = [[ALAssetsLibrary alloc] init];
        // Request to save the image to camera roll
    [library writeImageToSavedPhotosAlbum:[image CGImage] orientation:(ALAssetOrientation)[image imageOrientation]completionBlock:^(NSURL *assetClickedURL, NSError *error){
        if (error) {
            NSLog(@"error saving image %@", [error localizedDescription]);
        } else
        {

            NSLog(@"image from camera saved at  %@", assetClickedURL);
            [self uploadImageAtassetURL:assetClickedURL];
        }
    }]; 
```

# wordpress - 创建 Wordpress 插件 - JS 加载但未运行

> ID：14744653
> 
> 赞同：0
> 
> 时间：2013-02-07T06:03:16.800
> 
> 标签：wordpress

我遇到了一个奇怪的问题。下面的代码加载了 WP jQuery 库和我自己的 JS 文件。我点击了路径，他们加载了文件。它们都加载在页面底部（上图），并且 jQuery 库位于我的文件之前。

我正在使用 jQuery UI 中的日期选择器，但它不会加载。jQuery 是否需要置顶？如果是这样，我怎样才能得到它？我尝试在没有运气的情况下覆盖 $in_footer。

我是创建插件的新手，所以我完全错过了一些东西吗？

任何帮助，将不胜感激。

```
<?php
 add_action('admin_init', 'ps_events_admin_init');
 add_action('admin_menu', 'ps_events_admin_menu'); 

 function ps_events_admin_init(){
    wp_register_script('ps-events-script', plugins_url('/js/psevents.js', __FILE__)); 
    wp_enqueue_script('jquery-ui-datepicker');
    wp_enqueue_script('ps-events-script');  
 }

 function ps_events_admin(){        
    include('psevents-admin_view.php');
 } 

 function ps_events_admin_menu(){  
     add_menu_page("PS Events", "PS Events", 1, "PS Events", "ps_events_admin");  
 }
 ?> 
```

HTML 输出

```
 <script type='text/javascript' src='http://localhost:8888/mysite/wp-admin/load-scripts.php?c=1&amp;load%5B%5D=admin-bar,hoverIntent,common,jquery-ui-core,jquery-ui-datepicker,jquery-ui-widget,jquery-ui-position,wp-pointer&amp;ver=3.5.1'></script>
 <script type='text/javascript' src='http://localhost:8888/mysite/wp-content/plugins/psevents/js/psevents.js?ver=3.5.1'></script>
 </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:49:49.967

你应该在你的 javascript 文件之前加载 jQuery

```
 function ps_events_admin_init(){
    wp_register_script('ps-events-script', plugins_url('/js/psevents.js', __FILE__)); 
    wp_enqueue_script('jquery');
    wp_enqueue_script('jquery-ui-datepicker');
    wp_enqueue_script('ps-events-script');  
 } 
```

注意：由于您使用的是与 WordPress 捆绑的 jQuery，因此 jQuery 以 noConflict 模式加载。使用`jQuery`而不是`$`.

或使用此替代方法：

```
jQuery(document).ready(function($){
//use $ here
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T06:35:17.610

我建议您使用：

```
<?php
add_action('wp_head','ps_events_admin_menu');
add_action('wp_head','ps_events_admin_init');
wp_enqueue_script('jquery');
?> 
```

如果你有自己的 JavaScript，你可以嵌入如下函数：

```
<?php
add_action('wp_head','mysample');
wp_enqueue_script('jquery');
function mysample()
{
echo '<script language="JavaScript"> and JavaScript code';
}
?> 
```

# c - 如何生成 12 字节的随机数？

> ID：14744655
> 
> 赞同：0
> 
> 时间：2013-02-07T06:03:24.547
> 
> 标签：c, linux

我正在用 C 语言在 linux 上开发项目，我需要在其中生成 12 个字节的随机数。我在互联网上搜索过，但除了 srand 或 random 函数之外我找不到任何其他功能。但这些函数只能生成 32 位（4 字节）的随机数。

我正在寻找生成 12 字节的随机数。

有人知道 linux 上提供此功能的任何库吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T06:12:23.677

好的，最后一个**解决方案：**

```
unsigned char buf[12];
int i;
srand(time(NULL));
for (i = 0; i < sizeof(buf); i++) {
    buf[i] = rand() % 256;
} 
```

（是的，我正在使用模数 - 如果您关心均匀分布，请不要使用它。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T06:25:08.623

您没有说明 12 个随机字节对您意味着什么，以及您为什么需要它们。

您应该阅读[random(4)](http://www.kernel.org/doc/man-pages/online/pages/man4/random.4.html)然后也许是代码

```
unsigned char myrandbytes[12];
FILE* fr = fopen("/dev/urandom", "r");
if (!fr) perror("urandom"), exit(EXIT_FAILURE);
fread(myrandbytes, sizeof(char), 12, fr);
fclose(fr), fr = NULL; 
```

但很多时候，按照[该答案](https://stackoverflow.com/a/14744770/841108)`rand(3)`中的建议使用就足够了。您也可以使用[random(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/random.3.html)或[lrand48(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/lrand48.3.html)。我通常很高兴我通常会播种 - 例如在开始时阅读或阅读。`random(3)``srandom``initstate``/dev/urandom`

由于您没有告诉我们为什么需要随机数，我们无法提供更多帮助。

如果随机数的质量非常重要（例如，用于强加密目的），它可能比您想象的要困难得多，并且它取决于系统和硬件（再次阅读该`random(4)`页面）。

# c++ - C++ 程序由于大数组而崩溃，即使它在堆上

> ID：14744664
> 
> 赞同：1
> 
> 时间：2013-02-07T06:03:59.227
> 
> 标签：c++, arrays, memory-management, crash, heap-memory

我正在为三个非常大的数组（N = 990000001）分配内存。我知道您必须在堆上分配它，因为它太大了，但即使我这样做，程序也会不断崩溃。是我分配不正确还是我的计算机根本没有足够的内存（我应该有足够的内存）？可能是问题的另一件事是我以某种方式错误地分配了我的内存。当 N 很小时，我现在分配内存的方式非常好。任何帮助表示赞赏。

```
int main()
{
double *Ue = new double[N];
double *U = new double[N];
double *X = new double[N];
for (int i = 0; i < N; i++)
{
    X[i] = X0 + dx*i;
    Ue[i] = U0/pow((X0*X[i]),alpha);
}

//Declare Variables
double K1;double K2; double K3; double K4;

//Set Initial Condition
U[0] = U0;
for (int i = 0; i < N-1; i++)
{
    K1 = deriv(U[i],X[i]);
    K2 = deriv(U[i]+0.5*dx*K1,X[i]+0.5*dx);
    K3 = deriv(U[i]+0.5*dx*K2,X[i]+0.5*dx);
    K4 = deriv(U[i]+dx*K3,X[i+1]);
    U[i+1] = U[i] + dx/6*(K1 + 2*K2 + 2*K3 + K4);
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:10:43.307

您的程序分配并使用了大约 24 GB 的内存。

如果您是 32 位进程的程序，这将抛出`std::bad_alloc`，并且您的程序将正常退出。（*理论上*，您的工具链中可能存在溢出错误，但我认为这不太可能。）

如果您是 64 位进程的程序，您可能会被 OOM 杀手卡住，并且您的程序将不正常地退出。除非您有 24 GB 的 RAM + 交换组合，否则您可能会以磁盘的速度运行。（如果您*实际上有*24 GB 的 RAM，那么它可能不会崩溃，因此我们可以排除这种情况。）如果禁用过度使用，那么您将获得`std::bad_alloc`OOM 杀手。（这一段是特定于 Linux 的，尽管其他内核是相似的。）

**解决方案：**使用更少的内存或购买更多的 RAM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:23:58.557

如果在 Windows 上，您可能会发现此信息[对 Windows 上的应用程序的内存限制](http://software.intel.com/en-us/articles/memory-limits-applications-windows)很有用-

> 请注意，静态和堆栈数据的限制在 32 位和 64 位变体中是相同的。这是由于 Windows 可移植可执行文件 (PE) 文件类型的格式，该文件类型用于描述链接器布局的 EXE 和 DLL。它具有用于图像部分偏移和长度的 32 位字段，并且未针对 Windows 的 64 位变体进行扩展。与在 32 位 Windows 上一样，静态数据和堆栈共享相同的前 2GB 地址空间。

然后，唯一真正的改进——

> 动态数据 - 这是在程序执行期间分配的内存。在 or C 或 C++ 中，这通常使用`malloc`or来完成`new`。
> 
> 64 位
> 
> *   静态数据 2Gb
>     
>     
> *   动态数据 8Tb
>     
>     
> *   堆栈数据 1GB（堆栈大小由链接器设置，默认为 1MB。可以使用链接器属性 System > Stack Reserve Size 增加）

单个数组的分配“应该能够分配到操作系统愿意处理的大小”（即受 RAM 和碎片限制）。

# ios - 保存到相机胶卷 - 不支持此影片格式

> ID：14744666
> 
> 赞同：1
> 
> 时间：2013-02-07T06:04:19.323
> 
> 标签：ios, ios6

从 UIDocumentInteractionController 单击“保存到相机胶卷”时，我收到以下错误消息

> 2013-02-07 00:50:56.250 应用程序[4101:907] 视频 /private/var/mobile/Applications/DD3719D0-E32D-4FED-B7B2-583015145649/tmp/Photo_130206_1913.jpeg 无法保存到保存的相册：错误域=NSOSStatusErrorDomain 代码=-12847 “不支持此电影格式。” UserInfo=0x1d59fea0 {NSLocalizedDescription=不支持此影片格式。}

我注意到的第一件事是日志如何表明 jpeg 是视频。为了验证情况并非如此，我通过电子邮件向自己发送了图像并运行了几个命令：

```
> file -I image.jpeg
image/jpeg; charset=binary

> identify image.jpeg (ImageMagick)
JPEG 3264x2448 3264x2448+0+0 8-bit DirectClass 5.008MB 0.000u 0:00.000 
```

两者都显示图像是 jpeg。有没有人见过这个？关于解决方法的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T15:13:21.010

我刚刚在控制台中遇到了同样的消息。然而，当我去检查我的相机胶卷时，我发现我试图保存的图像实际上已成功保存，尽管出现了“错误”消息。所以这可能不是一个真正的问题。

# php - 教义数据库连接问题

> ID：14744667
> 
> 赞同：0
> 
> 时间：2013-02-07T06:04:25.763
> 
> 标签：php, mysql, doctrine, symfony-1.4

尝试连接到不同服务器中的 dababase：

命令行

```
php symfony configure:database "mysql:host=<IP>;dbname=<db_name>" <username> <password> 
```

数据库.yml

```
 all:   
    doctrine:     
    class: sfDoctrineDatabase     
      param:       
      dsn: 'mysql:host=<IP>;dbname=<db_name>'
      username: <username>       
      password: <password> 
```

得到错误：

> PDO Connection Error: SQLSTATE[HY000] [2002] 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:05:40.103

*您需要从该主机*授予用户访问权限。就像是

`GRANT ALL ON mydb.* TO 'someuser'@'somehost';`

更多[在这里](http://dev.mysql.com/doc/refman/5.1/en/grant.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:22:27.247

```
Apologies for making this a bit long. 
This is the server my.cnf                                                           

[mysqld]
# Settings user and group are ignored when systemd is used (fedora >= 15).
# If you need to run mysqld under different user or group, 
# customize your systemd unit file for mysqld according to the
# instructions in http://fedoraproject.org/wiki/Systemd
user=mysql

datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock

# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

# Semisynchronous Replication
# http://dev.mysql.com/doc/refman/5.5/en/replication-semisync.html
# uncomment next line on MASTER
;plugin-load=rpl_semi_sync_master=semisync_master.so
# uncomment next line on SLAVE
;plugin-load=rpl_semi_sync_slave=semisync_slave.so

# Others options for Semisynchronous Replication
;rpl_semi_sync_master_enabled=1
;rpl_semi_sync_master_timeout=10
;rpl_semi_sync_slave_enabled=1

# http://dev.mysql.com/doc/refman/5.5/en/performance-schema.html
;performance_schema

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid 
```

# jquery - 菜单项按钮单击然后在网页上的不同位置进行图像交换

> ID：14744668
> 
> 赞同：0
> 
> 时间：2013-02-07T06:04:28.073
> 
> 标签：jquery, html, css, onmouseclick

我想，我正在尝试做一些看起来相对简单的事情。我有一个使用 CSS 定义的菜单项列表的网页。当我单击其中一个菜单项时，我想更改页面中间的内容（在它自己的 div 容器中）。如果单击另一个菜单项，我希望内容再次更改。页面中间的内容区域在它自己的 div 中，所以我想我只是在寻找可以在单击按钮时将一个项目替换为另一个项目的代码。我从 JQuery 中查看了 replaceWith，但似乎看不到该函数在这种情况下如何工作。也就是说，根据我的阅读，它不包括单击菜单项的条件。我还通读了 CSS 样式和 z-indexes，但似乎无法找到可行的方法。

所以，我的问题是，当单击菜单按钮项时，如何将其自己的 div 容器中的内容（在这种情况下为 .gif）更改为另一个 .gif？

这是我那部分的代码：

```
<div id="nav_container">
   <ul id="nav">
     <li class="first active"><a href="/" class="index.ph">Home</a></li>
     <li><a href="JPLCSubpages/aboutcoaching/about.html" class="about-coaching">About</a>
       <ul class="about-coaching">
     <li><div class="wicoaching"><a href="index.php" style="border-top:0px">What is Coaching?</a> 
      </div></li>
     <li><div class="wdinacoach"><a href="why-do-i-need-a-coach.php">Why Do I Need a Coach?</a></li>
     <li><div class="coachingtherapy"><a href="isnt-coaching-just-therapy.php">Isn't Coaching Just Therapy?</a></li>
     <li><div class="myphilosophy"><a href="my-coaching-philosophy.php">My Coaching Philosophy</a>
        </li>
      </ul>
    </li>

<li><a href="../coachingservices/services.html" class="services">Services</a>
 <ul class="services">
  <li><a href="../coachingservices/life-coaching.php" style="border-top:0px">Life Coaching</a></li>
  <li><a href="../coachingservices/professional-executive-coaching.php">Professional & Executive Coaching</a></li>
  <li><a href="../coachingservices/group-team-coaching.php">Group & Team Coaching</a>  
  </li>
  <li><a href="../coachingservices/sports-performance-coaching.php">Sports Performance Coaching</a></li>
    </ul>
</li>

      <li><a href="../coachingseminars/seminars.html" class="seminars">Seminars</a></li>
      <li><a href="../coachingcontact/contact.html" class="contact">Contact</a></li>
    </ul> 
```

```
<div id="content_home">

<div style="text-align: left;" class="textbox"><img width="722" height="518" src="../../Images/AboutCoaching Images/AboutMe.gif" alt="" /></div> 
```

例如，如果有人点击“什么是教练？” 菜单项，我想改变“文本框”中的图像。在一种情况下，我想将图像“Aboutme.gif”用于其他图像。我怎样才能做到这一点？我愿意使用 Javascript、JQuery 或 CSS。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:17:14.637

这是一个非常简单的任务，它可能是重复的，并且可以在互联网上轻松找到解决方案，但请通读我的答案，如果您需要进一步的说明，请告诉我。

使用 javascript 事件和函数：

```
 <li>
   <div class="wicoaching">
   <a href="index.php" style="border-top:0px" onclick="ChangeImage();">
   What is Coaching?</a> 
   </div>
 </li> 
```

这意味着每当有人点击“什么是教练？” 将执行一个名为 ChangeImage 的函数。

现在您需要声明该函数。

```
<script>
 function ChangeImage{  
       var thePic = document.getElementById('MyImage');
       // Note you need to add a name or image to your img tag.
       thePic.src = "SomeOtherImage.gif"; 
             }
</script> 
```

如果您想删除图像并添加另一个图像：

```
var imageToBeRemoved = document.getElementById('MyImage');
var Parent = imageToBeRemoved.parentNode;
Parent.removeChild(imageToBeRemoved); 
```

现在它已经从你的 DOM 中消失了。它将进入您的 ChangeImage 函数，而不是更改图像源。

如果您想添加另一个具有不同 Source 的内容：

```
var newImage = document.createElement("img");
NewImage.src = 'MyNewImage.jpg';
Parent.appendChild("newImage"); // alternatively, you can reference to parent by its ID or Name using getElementById or a similar method. 
```

# android - 位图到android中的imageview

> ID：14744672
> 
> 赞同：3
> 
> 时间：2013-02-07T06:04:49.873
> 
> 标签：android

当我尝试将位图对象设置为图像视图时出现以下错误。“imageView2 无法解析为变量”：mImg = (ImageView) findViewById(R.id.(imageView2));

代码 ：

```
package com.example.ocr01;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //SETTING UP BUTTON AND LISTENER
    Button button = (Button)findViewById(R.id.button1);
    button.setOnClickListener((OnClickListener) this);
}

public void onClick(View v) {
      // do something when the button is clicked
    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

//CONVERTING IMAGE TO BITMAP

/*public static Bitmap getBitmapFromURL(String xxx) {
    try {
        URL url = new URL(src);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap myBitmap = BitmapFactory.decodeStream(input);
        return myBitmap;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
}*/

    void create_bitmap(){
        //creating bitmap
        Bitmap source = BitmapFactory.decodeResource(getResources(),
        R.drawable.image1);
        //calling doGreyScale
        doGreyscale(source);
    }

    public static void doGreyscale(Bitmap src) {
        // constant factors
        final double GS_RED = 0.299;
        final double GS_GREEN = 0.587;
        final double GS_BLUE = 0.114;

        // create output bitmap
        Bitmap bmOut = Bitmap.createBitmap(src.getWidth(), src.getHeight(), src.getConfig());
        // pixel information
        int A, R, G, B;
        int pixel;

        // get image size
        int width = src.getWidth();
        int height = src.getHeight();

        // scan through every single pixel
        for(int x = 0; x < width; ++x) {
            for(int y = 0; y < height; ++y) {
                // get one pixel color
                pixel = src.getPixel(x, y);
                // retrieve color of all channels
                A = Color.alpha(pixel);
                R = Color.red(pixel);
                G = Color.green(pixel);
                B = Color.blue(pixel);
                // take conversion up to one single value
                R = G = B = (int)(GS_RED * R + GS_GREEN * G + GS_BLUE * B);
                // set new pixel color to output bitmap
                bmOut.setPixel(x, y, Color.argb(A, R, G, B));
            }
        }

        //converting bitmap object to show in imageview2
        ImageView mImg;
        mImg = (ImageView) findViewById(R.id.(imageView2));
        mImg.setImageBitmap(bmOut);

    }

} 
```

相同的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:src="@drawable/image1" />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/imageView1"
    android:src="@drawable/ic_launcher" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="Button" />

</RelativeLayout> 
```

注意：我是第一次尝试我的学期项目的开发人员。欢迎任何形式的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T06:15:01.123

尝试这个：

```
 }

    //converting bitmap object to show in imageview2
    ImageView mImg;
    mImg = (ImageView) findViewById(R.id.imageView2);
    mImg.setImageBitmap(bmOut);

} 
```

而不是这个：

```
 }

    //converting bitmap object to show in imageview2
    ImageView mImg;
    mImg = (ImageView) findViewById(R.id.(imageView2));
    mImg.setImageBitmap(bmOut);

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T06:08:31.700

`findViewById(R.id.(imageView2))`应该是`findViewById(R.id.imageView2)`。

`imageView2`是类上的一个字段，`id`而不是类上的一个方法`id`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:13:39.440

正如金加姆吉克所说

它应该是 findViewById(R.id.imageView2) 这意味着通过使用您声明并命名为“imageView2”的 Resources(R) 中的 id(id) 来查找视图

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:14:25.327

像这样尝试 `ImageView mImg = (ImageView) findViewById(R.id.imageView2);`这一行在创建方法上写入

```
 ImageView mImg = (ImageView) findViewById(R.id.imageView2);
 Bitmap bitmapOrg = MainActivity.mImg ;     
 statusimage.setImageBitmap(bitmapOrg); 
```

编辑：

```
 Drawable drawable = mImg.getDrawable();
   if (drawable instanceof BitmapDrawable) {
       BitmapDrawable bitmapDrawable = (BitmapDrawable) drawable;
       bitmap = bitmapDrawable.getBitmap();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-15T22:27:04.290

```
implementation 'com.chootdev:blurimg:1.0.1' 
```

添加此依赖项并将此代码添加到您的 main

```
package com.example.blureffect;

import androidx.appcompat.app.AppCompatActivity;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;
import com.chootdev.blurimg.BlurImage;

public class MainActivity extends AppCompatActivity {

    ImageView imageView;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        imageView = findViewById(R.id.image);
        BlurImage blurImage = new BlurImage();
        blurImage.withContext(this)
                .blurFromResource(R.drawable.dnd_background)
                .into(imageView);

    }
} 
```

它会使图像有点模糊

# cocoa-touch - 启用预览和分页的 UICollectionView

> ID：14744674
> 
> 赞同：11
> 
> 时间：2013-02-07T06:04:51.463
> 
> 标签：cocoa-touch, ios6, uikit, uicollectionview

在 App Store 中显示搜索结果时，我试图模仿 Apple 的内容。（参考：[http](http://searchengineland.com/apple-app-search-shows-only-one-result-at-a-time-133818) ://searchengineland.com/apple-app-search-shows-only-one-result-at-a-time-133818 ）

它像卡片中的详细应用程序信息一样显示，并且是分页的。当中间有一张活动卡片并且滚动视图的分页行为仍然完好无损时，我被困在如何制作上一张和下一张卡片。

我尝试使用 UICollectionView 并将 clipSubviews 设置为 NO，希望它会显示上一页和下一页，但是一旦单元格离开屏幕，单元格就会被隐藏（从视图层次结构中删除）而不是显示。我认为这就是 UICollectionView 的享元模式（UICollectionView 的行为）。关于什么是可能的任何想法？

干杯，

伦迪·普拉纳塔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-20T18:20:54.083

问题：作为 UIScrollView 的子类的 UICollectionView 基本上以 bounds.size 的步幅对其边界进行动画处理。尽管这可能意味着您所要做的就是在保持框架更大的同时减小边界，但不幸的是 UICollectionView 不会呈现超出其当前边界的任何单元格...破坏您的预览效果。

解决方案：

1.  创建一个 UICollectionView，将分页设置为 NO 并使用所需的帧。
2.  创建小于 UICollectionView 的框架/边界的 UICollectionViewCells。在这个阶段，下一个单元格的一部分应该显示在框架中。在执行以下其他步骤之前，这应该是可见的。
3.  添加一个 collectionView.contentInset.left 和 right （我假设你的布局是水平的）等于 contentOffsetValue 方法（为简单起见如下所示），以便将第一个和最后一个单元格对齐到中间。
4.  创建一个 UICollectionViewFlowLayout 覆盖提供停止点的方法，如下所示：

像这样：

```
-(CGFloat)contentOffsetValue
{
    return self.collectionView.bounds.size.width * 0.5f - self.itemSize.width * 0.5f;
}

- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity
{

    static float EscapeVelocity = 0.5f; // otherwise snap back to the middle
    NSArray* layoutAttributesArray = [self layoutAttributesForElementsInRect:self.collectionView.bounds];

    if(layoutAttributesArray.count == 0)
        return proposedContentOffset;

    CGFloat currentBoundsCenterX = self.collectionView.contentOffset.x + self.collectionView.bounds.size.width * 0.5f;

    UICollectionViewLayoutAttributes* candidateNextLayoutAttributes = layoutAttributesArray.firstObject;

    for (UICollectionViewLayoutAttributes* layoutAttributes in layoutAttributesArray)
    {
        if ((layoutAttributes.representedElementCategory != UICollectionElementCategoryCell) ||
            (layoutAttributes == candidateNextLayoutAttributes)) // skip the first comparison
            continue;

        if(velocity.x > EscapeVelocity || velocity.x < -(EscapeVelocity))
        {
            if(velocity.x > EscapeVelocity && layoutAttributes.center.x > candidateNextLayoutAttributes.center.x)
            {

                candidateNextLayoutAttributes = layoutAttributes;
            }

            else if (velocity.x < -(EscapeVelocity) && layoutAttributes.center.x < candidateNextLayoutAttributes.center.x)
            {

                candidateNextLayoutAttributes = layoutAttributes;
            }
        }
        else
        {
            if(fabsf(currentBoundsCenterX - layoutAttributes.center.x) < fabsf(currentBoundsCenterX - candidateNextLayoutAttributes.center.x))
            {

                candidateNextLayoutAttributes = layoutAttributes;
            }
        }   
    }
    return CGPointMake(candidateNextLayoutAttributes.center.x - self.collectionView.bounds.size.width * 0.5f, proposedContentOffset.y);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T17:56:30.203

我只是整理了一个示例项目，展示了如何做到这一点。我创建了一个比屏幕的 320 点宽 100 点的容器视图。然后我将 UICollectionView 放入该容器中。这会使屏幕两侧的所有内容偏移 50 个点。

然后是一个内容单元格，它只有一个背景和一个标签，因此您可以直观地识别正在发生的事情。在左侧和右侧有空单元格。在 viewDidLoad 方法中，内容插入在左右两侧设置为负值，以使空单元格现在滚动到视图中。您可以根据自己的喜好调整插图。

这非常接近地模仿了这种行为。要获得下面的标签，就像在示例中一样，您可以简单地检查 contentOffset 值以确定哪个单元格处于焦点。为此，您将使用 UICollectionView 的一部分的 UIScrollViewDelegate。

[https://github.com/brennanMKE/Interfaces/tree/master/ListView](https://github.com/brennanMKE/Interfaces/tree/master/ListView)

您会注意到这个示例项目有 2 个集合视图。一种是正常的水平流布局，而另一种具有较大单元格的是模仿您提到的示例的那种。

# windows - mingw的Windows 8堆栈问题

> ID：14744689
> 
> 赞同：2
> 
> 时间：2013-02-07T06:06:07.360
> 
> 标签：windows, compiler-construction, mingw

我在 Windows8 下使用 C++（mingw 编译器）时遇到堆栈溢出问题。它只有 64 MB。我不知道如何改变它。我试着写

```
#pragma comment(linker,"/STACK:512000000") 
```

它没有帮助另外，我尝试编译我的程序

```
g++ -Wl,--stack=512000000 a.cpp -o a.exe 
```

它也没有帮助。但是在 Windows 7 和 XP 中，我记得它可以正常工作。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T07:02:00.603

我不相信 Windows 8 下的默认值是 64M，它太大了。并且声称 512M 是错误的，尝试堆（使用 malloc() 或 Win32API，如 LocalAlloc() 等）

# python - 高效地将多个 zlib 压缩数据流连接成一个流

> ID：14744692
> 
> 赞同：7
> 
> 时间：2013-02-07T06:06:26.370
> 
> 标签：python, zlib

如果我有几个带有压缩 zlib 数据的二进制字符串，有没有办法在不解压缩所有内容的情况下*有效地*将它们组合成一个压缩字符串？

我现在必须做的例子：

```
c1 = zlib.compress("The quick brown fox jumped over the lazy dog. ")
c2 = zlib.compress("We ride at dawn! ")
c = zlib.compress(zlib.decompress(c1)+zlib.decompress(c2)) # Warning: Inefficient!

d1 = zlib.decompress(c1)
d2 = zlib.decompress(c2)
d = zlib.decompress(c)

assert d1+d2 == d # This will pass! 
```

我想要的示例：

```
c1 = zlib.compress("The quick brown fox jumped over the lazy dog. ")
c2 = zlib.compress("We ride at dawn! ")
c = magic_zlib_add(c1+c2) # Magical method of combining compressed streams

d1 = zlib.decompress(c1)
d2 = zlib.decompress(c2)
d = zlib.decompress(c)

assert d1+d2 == d # This should pass! 
```

我对 zlib 和 DEFLATE 算法了解不多，所以从理论上讲这可能是完全不可能的。另外，我必须使用 use zlib；所以我无法包装 zlib 并提出自己的协议来透明地处理级联流。

注意：如果解决方案在 Python 中不是微不足道的，我并不介意。我愿意编写一些 C 代码并在 Python 中使用 ctypes。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T06:13:31.887

由于您不介意涉足 C，您可以从查看*[gzjoin](https://github.com/madler/zlib/blob/master/examples/gzjoin.c)*的代码开始。

请注意，*gzjoin*代码必须解压缩才能找到合并时必须更改的部分，但不必重新压缩。这还不错，因为解压缩通常比压缩快。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T16:34:19.003

除了需要解压缩第一个 deflate 流的 gzjoin 之外，您还可以查看[gzlog.h](https://github.com/madler/zlib/blob/master/examples/gzlog.h)和[gzlog.c](https://github.com/madler/zlib/blob/master/examples/gzlog.c)，它们可以有效地将短字符串附加到 gzip 文件中，而无需每次都解压缩 deflate 流。（它可以很容易地修改为对 zlib 包装的 deflate 数据而不是 gzip 包装的 deflate 数据进行操作。）如果您可以控制第一个 deflate 流的创建，则可以使用这种方法。如果您没有创建第一个 deflate 流，那么您将不得不使用需要解压缩的 gzjoin 方法。

这些方法都不需要重新压缩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-13T13:13:19.147

我只是将[@zorlak 的评论](https://stackoverflow.com/questions/14744692/concatenate-multiple-zlib-compressed-data-streams-into-a-single-stream-efficient#comment52065643_14744792)变成了答案并添加了一些代码，以便我以后可以找到它。

如果您可以控制流的初始压缩，则可以将未压缩数据的长度、其 Adler-32 校验和以及压缩数据存储在某处。稍后，您可以按任意顺序连接各个流。

请注意，我不确定各个流是否可以具有不同的压缩级别、压缩策略或窗口大小，因为该`concatenate`函数会剥离除第一个流之外的所有 zlib 标头...

```
from typing import Tuple
import zlib

def prepare(data: bytes) -> Tuple[int, bytes, int]:
    deflate = zlib.compressobj()
    result = deflate.compress(data)
    result += deflate.flush(zlib.Z_SYNC_FLUSH)
    return len(data), result, zlib.adler32(data)

def concatenate(*chunks: Tuple[int, bytes, int]) -> bytes:
    if not chunks:
        return b''
    _, result, final_checksum = chunks[0]
    for length, chunk, checksum in chunks[1:]:
        result += chunk[2:]  # strip the zlib header
        final_checksum = adler32_combine(final_checksum, checksum, length)
    result += b'\x03\x00'  # insert a final empty block
    result += final_checksum.to_bytes(4, byteorder='big')
    return result

def adler32_combine(adler1: int, adler2: int, length2: int) -> int:
    # Python implementation of adler32_combine
    # The orignal C implementation is Copyright (C) 1995-2011, 2016 Mark Adler
    # see https://github.com/madler/zlib/blob/master/adler32.c#L143
    BASE = 65521
    WORD = 0xffff
    DWORD = 0xffffffff
    if adler1 < 0 or adler1 > DWORD:
        raise ValueError('adler1 must be between 0 and 2^32')
    if adler2 < 0 or adler2 > DWORD:
        raise ValueError('adler2 must be between 0 and 2^32')
    if length2 < 0:
        raise ValueError('length2 must not be negative')

    remainder = length2 % BASE
    sum1 = adler1 & WORD
    sum2 = (remainder * sum1) % BASE
    sum1 += (adler2 & WORD) + BASE - 1
    sum2 += ((adler1 >> 16) & WORD) + ((adler2 >> 16) & WORD) + BASE - remainder
    if sum1 >= BASE:
        sum1 -= BASE
    if sum1 >= BASE:
        sum1 -= BASE
    if sum2 >= (BASE << 1):
        sum2 -= (BASE << 1)
    if sum2 >= BASE:
        sum2 -= BASE

    return (sum1 | (sum2 << 16)) 
```

一个简单的例子：

```
hello = prepare(b'Hello World! ')
test = prepare(b'This is a test. ')
fox = prepare(b'The quick brown fox jumped over the lazy dog. ')
dawn = prepare(b'We ride at dawn! ')

# these all print what you would expect
print(zlib.decompress(concatenate(hello, test, fox, dawn)))
print(zlib.decompress(concatenate(dawn, fox, test, hello)))
print(zlib.decompress(concatenate(fox, hello, dawn, test)))
print(zlib.decompress(concatenate(test, dawn, hello, fox))) 
```

# android - get error when send sprite to pool after onPathFinished

> ID：14744694
> 
> 赞同：0
> 
> 时间：2013-02-07T06:06:44.280
> 
> 标签：android, andengine

I have a sprite (say **Easy Enemy**) it moves on the scene with a random direction. When it collides with new Sprite (**myFood**), I play a new animation and give easy enemy to a new direction. When Easy Enemy finished it's new path, I want to send them in **Pool**. Inside **onPathFinshed()** i got an **error**.

I use both custom **Scene** & **Animated Sprite**. Also create an **EasyEnemyPool** class to recycle them.

**Error:**

> 02-07 11:52:55.624: E/AndroidRuntime(22486): FATAL EXCEPTION: UpdateThread 02-07 11:52:55.624: E/AndroidRuntime(22486): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0 02-07 11:52:55.624: E/AndroidRuntime(22486): at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251) 02-07 11:52:55.624: E/AndroidRuntime(22486): at java.util.ArrayList.remove(ArrayList.java:399)

Code Inside custom Scene **GameLevelOne** class:

```
 // own override method
@Override
public void onSceneUpdate() {
    registerUpdateHandler(new IUpdateHandler() {
        @Override
        public void onUpdate(float pSecondsElapsed) {
            synchronized (this) {
                try {
                    // ===get EasyEnemy List from it===
                    eIt = getEasyEnemyIterator();
                    while (eIt.hasNext()) {
                        ee = eIt.next();

                        if (ee.collidesWith(myFoodItem)) {
                            // Log.e("boolean value", ee.isCollisionActive
                            // + "");
                            if (ee.isCollisionActive) {

                                // call the sprite to
                                // move new direction
                                ee.giveNextDirection(ee);
                                unregisterTouchArea(ee);

                                decreaseFoodSize();
                                changeLife();

                                Log.e("!!!!Food !!!: ",
                                        "Easy Enemy Touched My Food");

                                eIt.remove();
                                break;
                            }
                        }
                    }
                    scoreText.setText("Score:" + finalScore);
                    life_text.setText("Life:" + hitpoints + " %");
                } catch (Exception e) {
                    Log.e("Gama Play Engine Error", "" + e);
                }
            }

        }
        @Override
        public void reset() {
        }
    });
} 
```

code Inside a **EasyEnemy** class.

```
public synchronized void giveNextDirection(final EasyEnemy e) {
    clearEntityModifiers();
    animate(new long[] { 110, 110, 110 }, 0, 2, true);
    isCollisionActive = false;
    try {
        registerUpdateHandler(new TimerHandler(2.5f, new ITimerCallback() {

            @Override
            public void onTimePassed(TimerHandler pTimerHandler) {
                // un reg. code
                unregisterUpdateHandler(pTimerHandler);
                // add a path Modifiers
                registerEntityModifier(new PathModifier(5, getFinalPath(),
                        new IPathModifierListener() {

                            @Override
                            public void onPathWaypointStarted(
                                    PathModifier pPathModifier,
                                    IEntity pEntity, int pWaypointIndex) {
                                switch (pWaypointIndex) {
                                case 0:
                                    // move the sprite to right angle
                                    setRotation(270 + getAngle(xCurrent,
                                            yCurrent, xFinal, yFinal));
                                    break;
                                }
                            }

                            @Override
                            public void onPathWaypointFinished(
                                    PathModifier pPathModifier,
                                    IEntity pEntity, int pWaypointIndex) {

                            }

                            @Override
                            public void onPathStarted(
                                    PathModifier pPathModifier,
                                    IEntity pEntity) {

                            }

                            @Override
                            public void onPathFinished(
                                    PathModifier pPathModifier,
                                    IEntity pEntity) {
                        // ===== > remove from the list
                                GamePlayEngine.easyEnemyLinkedList.remove(e);
                                unregisterEntityModifier(pPathModifier);
                        //  ==== > send it to pool
                                EasyEnemyPool.getSharedEasyEnemyPool()
                                        .recyclePoolItem(e);
                            }

                        }));
            }

        }));

    } catch (Exception e2) {
        Log.e("Error", ""+e2);
    }
} 
```

try my best to understand you the problem. Hope, someone play a super knock to solve it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:10:51.820

well, I found the point what I am missing. We have to use **runOnUpdateThread** to send a Sprite to pool inside Path modifier listener. So,my onPathFinish method looks like

```
@Override
                public void onPathFinished(
                    final PathModifier pPathModifier,
                        final IEntity pEntity) {
                            // use BaseActivity runnable thread
                        BaseActivity.instance
                                .runOnUpdateThread(new Runnable() {
                                    @Override
                                    public void run() {

                                    unregisterEntityModifier(pPathModifier);
                                    GamePlayEngine.easyEnemyLinkedList.remove(this);
                                    EasyEnemyPool.getSharedEasyEnemyPool().recyclePoolItem(e);
                                    Log.e(" --onPathFinished-- ", "...No problem..");

                                }
                            });
                    } 
```

Hope, This could help somebody.

# android - 如何从android中当前位置的经纬度获取200km半径范围内的所有城市名称列表？

> ID：14744698
> 
> 赞同：2
> 
> 时间：2013-02-07T06:07:12.067
> 
> 标签：android, gps, location

在android中，一旦我们获得当前位置地址纬度和经度，那么我们如何能够获得当前位置200公里半径内所有附近城市名称的列表，即如果我当前位置的纬度和经度分别为23.00和72.50，那么在此基础上，我如何才能获得 200 公里半径内该位置地址附近的所有城市列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:08:08.587

您可以为此使用 google place API，请检查。

# mongodb - MongoDB 聚合框架 $subtract

> ID：14744706
> 
> 赞同：1
> 
> 时间：2013-02-07T06:07:39.487
> 
> 标签：mongodb, aggregation-framework

我想使用 mongodb 来实现类似 mysql "select ab from table" 的简单查询，但是聚合框架查询结果不正确。

数据：

```
{ "_id" : ObjectId("511223348a88785127a0d13f"), "a" : 1, "b" : 1, "name" : "xxxxx0" }
{ "_id" : ObjectId("511223348a88785127a0d13f"), "a" : 2, "b" : 2, "name" : "xxxxx1" } 
```

mongodb命令：

```
db.site.aggregate([
  { $match: { 
    "a" : {$exists:true},
    "b" : {$exists:true},
    }
  },
  { $project: { _id : 0,name : 1, 
    r1: {$subtract:["$a", "$b"]} }
  },
  { $limit: 100 },
]);

"result" : [
        {
            "name" : "xxxx1",
            "r1" : -1
        },
        {
            "name" : "xxxx0",
            "r1" : -2
        },
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:39:51.600

我无法复制您的行为：

```
> db.tg.find()
{ "_id" : ObjectId("511223348a88785127a0d13f"), "a" : 1, "b" : 1, "name" : "xxxxx0" }
> db.tg.aggregate([{ $match: { "a" : {$exists:true}, "b" : {$exists:true} } }, { $project: { _id : 0,name : 1, r1: {$subtract:["$a", "$b"]} }}, { $limit: 100 }])
{ "result" : [ { "name" : "xxxxx0", "r1" : 0 } ], "ok" : 1 } 
```

您能给我们提供更多信息，例如您的 MongoDB 版本吗？

# c# - 将 UNC 路径的结尾修剪为反斜杠，然后添加到列表中

> ID：14744708
> 
> 赞同：1
> 
> 时间：2013-02-07T06:07:39.040
> 
> 标签：c#, string

首先让我说我的 C# 非常糟糕。我正在为我的工作开发一个工具（我希望其他人也能发现它很有用），它将根据 SMB 共享中提供的文件路径在 AD 中创建安全组，为目录分配适当的权限（文件路径中的最后一个文件夹)，然后将组列表权限授予其上方的每个父文件夹，以便用户可以导航到该目录，而不会看到他们没有被授予访问权限的其他目录（我们在文件服务器上使用基于访问权限的枚举，所以他们不会看到任何其他文件夹，除非它们已经被另一个安全组访问，等等...）。我有前两个部分工作。所以，

我认为我需要做的基本上是创建一个列表，其中将包含目录的每个父文件夹的路径，然后使用 foreach 循环为每个目录的 ACL 分配列表权限。因此，使用上面的示例，列表将包括以下内容：

\\文件服务器\一些

\\文件服务器\一些\示例

父文件夹的数量可能会有所不同，因此列表中的项目数量也可能会有所不同。

第一个问题：制作一个列表然后使用 foreach 循环是一种好方法，还是有更好的方法？

第二个问题：我该怎么做？到目前为止，我了解到处理反斜杠很棘手，因为它们是转义字符。在将字符串添加到列表之前，我基本上坚持修剪字符串以删除最后一个反斜杠和字符串后面的字符，以及如何递归地执行此操作，直到没有任何东西可以修剪。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:52:59.110

您可以执行以下操作

```
class DirectoryHelper
{
    public List<string> GetDirectories(string path)
    {
        List<string> list = new List<string>();

        if (!string.IsNullOrEmpty(path))
        {
            if (path.Last() != '\\')
            {
                path += "\\";
            }

            EnumerateDictories(list, path);
        }

        return list;
    }

    private void EnumerateDictories(IList<string> results, string path)
    {
        var parent = Directory.GetParent(path);

        if (parent != null)
        {
            EnumerateDictories(results, parent.FullName);

            results.Add(parent.FullName);
        }
    }
} 
```

这被称为：

```
DirectoryHelper helper = new DirectoryHelper();
var dir = helper.GetDirectories(@"C:\Temp\Folder1\"); 
```

我相信你必须添加一些代码来防止无效的目录字符串，但你可能明白了。

-update- 编辑了一些反斜杠处理，因此您不必关心它。

# jquery - 将变量传递给插件

> ID：14744711
> 
> 赞同：1
> 
> 时间：2013-02-07T06:07:55.640
> 
> 标签：jquery, jquery-plugins, global-variables

我正在尝试将变量传递给插件。当 var 包含在 document.ready 中时，我得到了计数，但是当我将它从 document.ready 中取出时，我可以将它传递给 document.ready 之外的另一个变量，我得到一个未定义的值。

我要添加到插件的变量（计算所有可见列表项）：

```
var myWidth = {};
var countLI = {};
myWidth.maxh = $("#my-carousel-2 .mask").width();
countLI.count = $("#my-carousel-2 ul li").filter(function () {
        return $(this).position().left + $(this).width() < myWidth.maxh;
    }).length; 
```

我试图将变量应用到的插件：http: [//bit.ly/12v55TE](http://bit.ly/12v55TE)。

更具体地说，我想将 countLI.count 变量长度传递给插件中的 Carousel 变量。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:21:09.857

您得到未定义的值，因为变量的范围在 document.ready 函数内。尝试在 document.ready 函数之外定义一个全局变量并将计数值分配给它。然后在插件中使用。这可能会有所帮助。

# c++ - 检测碰撞球体的程序出错

> ID：14744713
> 
> 赞同：2
> 
> 时间：2013-02-07T06:07:56.587
> 
> 标签：c++

在这个程序中，球体将围绕一个由立方体包围的 3d 空间移动。球体将移动，直到它们撞到墙壁或另一个球体。如果他们撞到墙上，他们就会被摧毁。如果他们击中另一个球体，较小的球体将被摧毁。

球体在 x、y、z 坐标中给出，半径为 r，运动的 dx、dy、dz。

该程序的一般要点是循环遍历球体对象列表并使用距离公式查看它是否小于检测碰撞的半径。

无论如何，我在运行时一直在 Visual Studio 中收到一个错误，说“列表迭代器不可递增。但是，该程序在 Linux g++ 编译器上运行时没有错误。看起来在程序工作时尝试检测球体碰撞时会出现问题当该部分被注释掉时。

```
// This is where our spheres are moved
s = sphereList.begin();                     //set iterator to beginning of list

while(s != sphereList.end())                //This loop moves the spheres
{
    bool firstRun = true;
    double x,y,z,r,xj,yj,zj,dist,radii,area1,area2;         //Temp x,y,z,r

    Point newCenter;        //Temp Center for movement calculatio n

    x = s->getX()+s->getdx();
    y = s->getY()+s->getdy();
    z = s->getZ()+s->getdz();
    r = s->getRadius();

    newCenter.setX(x);
    newCenter.setY(y);
    newCenter.setZ(z);

    s->setCenter(newCenter);    //replaces existing sphere with new coordinates

    //check if the sphere has reached the edge of the cube at 0 or 1000 units 
    if(x+r >= MAX_CUBE || x-r <= MIN_CUBE || y+r >= MAX_CUBE || y-r <= MIN_CUBE || z+r >= MAX_CUBE || z-r <= MIN_CUBE)
    {
        cout << "  " << s->getElement() << "         " << (int)time << "         " << "Boundary" << endl;
        s = sphereList.erase(s);
        time = 1 * TIME_VALUE;
    }

    std::list<Sphere>::iterator j = sphereList.begin();         //second iterator
        j++;
    while(j != sphereList.end())
    {
        xj = j->getX();
        yj = j->getY();
        zj = j->getZ();

        dist = sqrt(((x-xj)*(x-xj))+((y-yj)*(y-yj))+((z-zj)*(z-zj)));

        //cout << dist << endl;
        radii = s->getRadius() + j->getRadius();

        if(dist < radii)
        {

            if(s->getRadius() < j->getRadius())
            {
                cout << "  " << s->getElement() << "         " << (int)time << "         " << "Collision" << endl;
                s = sphereList.erase(s);
                time = 1 * TIME_VALUE;
                break;
            }
            else
            {
                cout << "  " << j->getElement() << "         " << (int)time << "         " << "Collision" << endl;
                j = sphereList.erase(j);
                time = 1 * TIME_VALUE;
                break;
            }
        }
    j++;
    }
    time++;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:17:02.513

在下面的循环中，你递增`i`了几次，你确定你有这么多元素吗？

```
while(i != doubleList.end())
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:52:54.760

如果`s`和`j`在列表中的相同位置，您将擦除`j`，这会使`s`.

您不需要`j`每次都从头开始，因为您已经将它与 . 前面的每个元素进行了比较`s`。

我认为更换

```
j = sphereList.begin(); 
```

和

```
j = s; 
```

应该足够了。

# ruby-on-rails-3 - 何时在 Rails 中使用自定义视图助手类

> ID：14744714
> 
> 赞同：2
> 
> 时间：2013-02-07T06:07:58.347
> 
> 标签：ruby-on-rails-3, partial-views

我倾向于用部分做很多事情。它们几乎感觉像是接受一些参数并吐出视图片段的小型辅助类。

我的问题是，什么时候为视图创建一个单独的类是合适的？这是否适合具有一些额外逻辑的东西，例如需要可用于测试的菜单系统？

我有一种感觉，我可能过度使用了局部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:24:48.360

您可以使用助手来构建单个显示单元。您可以使用 partial 来构建复杂的显示单元。

请参阅[Helpers vs. Partials](http://viget.com/extend/helpers-vs-partials-a-performance-question)和[什么属于辅助方法？](http://37signals.com/svn/posts/1108-what-belongs-in-a-helper-method)

# android - 如何在活动中动态创建多个画廊？

> ID：14744715
> 
> 赞同：1
> 
> 时间：2013-02-07T06:08:12.980
> 
> 标签：android, image, image-gallery, android-gallery, android-adapter

我想在我的应用程序中显示多个图库。画廊的数量取决于我在运行时得到的输入。我很困惑动态创建它。

请帮我。以下是我打算做的想法。

1.  使用 input.length 创建图库数组。
2.  为所有画廊分配相同的**图像适配器**类。

这是我的问题

1.  如果我为所有画廊应用相同的图像适配器，它会起作用吗？
2.  如果是这样，我有不同的数组来存储图像，我将如何分配图像适配器来获取哪个数组？
3.  有没有其他简单的方法来实现它？

提前致谢

# javascript - 双击Jquery时如何编辑和更新值

> ID：14744717
> 
> 赞同：8
> 
> 时间：2013-02-07T06:08:13.883
> 
> 标签：javascript, jquery, html

我已经编写了我的代码，这样当用户双击一个`<td>`元素时，我是：

*   附加 am `<input>`of`type="text"`
*   如果用户单击输入，则为其添加一个值并更新它

**这是我的问题：**
如果用户双击`<td>`并单击另一个`<td>`而不按回车，我需要将初始`<td>`值`<input>`重置为以前的值。

```
// Selecting the table <th> odd elements
$("#div table td").dblclick(function(){
    var currentEle = $(this);
    var value = $(this).html();
    updateVal(currentEle, value);
});

function updateVal(currentEle, value)
{
    $(currentEle).html('<input class="thVal" type="text" value="'+value+'" />');
    $(".thVal").focus();
    $(".thVal").keyup(function(event){
        if(event.keyCode == 13){
            $(currentEle).html($(".thVal").val().trim());
        }
    });

    $('body').not(".thVal").click(function(){
        if(('.thVal').length != 0)
        {
            $(currentEle).html($(".thVal").val().trim());
        }
    });
} 
```

请帮我。我不想使用 jeditable 数据表。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T06:32:20.387

在您的情况下，您需要`.stopPropagation()`：http: [//jsfiddle.net/jFycy/](http://jsfiddle.net/jFycy/)

```
$(function () {
    $("#div table td").dblclick(function (e) {
       e.stopPropagation();      //<-------stop the bubbling of the event here
       var currentEle = $(this);
       var value = $(this).html();
       updateVal(currentEle, value);
    });
});

function updateVal(currentEle, value) {
  $(currentEle).html('<input class="thVal" type="text" value="' + value + '" />');
  $(".thVal").focus();
  $(".thVal").keyup(function (event) {
      if (event.keyCode == 13) {
          $(currentEle).html($(".thVal").val().trim());
      }
  });

  $(document).click(function () { // you can use $('html')
        $(currentEle).html($(".thVal").val().trim());
  });
} 
```

而是点击`body`做事件，`document`或者`html`是所有其他元素的父元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-03T17:42:05.227

修正了最后一个答案。通过检查谁触发了事件，我可以防止输入上的双击问题。

此外，使用 .off('click') 您不会遇到问题，即在更改最后一个 td 之前更新的每个 td。

```
$(function () {
    $(".inner").dblclick(function (e) {
        if($(event.target).attr('class')!="thVal")
            {
                e.stopPropagation();
                var currentEle = $(this);
                var value = $(this).html();
                updateVal(currentEle, value);
        }
    });
});

function updateVal(currentEle, value) {
    $(document).off('click');
    $(currentEle).html('<input class="thVal" type="text" value="' + value + '" />');
    $(".thVal").focus();
    $(".thVal").keyup(function (event) {
        if (event.keyCode == 13) {

            $(currentEle).html($(".thVal").val());
        }
    });

    $(document).click(function () {

            if($(event.target).attr('class')!="thVal")
            {
                $(currentEle).html($(".thVal").val());
                $(document).off('click');
            }

    });

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-22T08:51:36.610

我知道这是一个老话题...但是由于输入上的单击事件，此处发布的答案效果不佳，我接受了答案并对其进行了修改

```
$(".daily-signals > tbody > tr > td").dblclick(function (e) {
    e.stopPropagation();      //<-------stop the bubbling of the event here
    var currentEle = $(this);
    var value = $(this).html();
    console.log('fire!');
    updateVal(currentEle, value);
});

function updateVal(currentEle, value) {
    $(currentEle).html('<input class="thVal" type="text" value="' + value + '" />');
    var thVal = $(".thVal");
    thVal.focus();
    thVal.keyup(function (event) {
        if (event.keyCode == 13) {
            $(currentEle).html(thVal.val());
            save(thVal.val());
        }
    });

    thVal.focusout(function () {
        $(currentEle).html(thVal.val().trim());
        return save(thVal.val()); // <---- Added missing semi-colon
    });

}

function save(value) {
    console.log(value);
} 
```

保存功能将发出ajax请求

# .htaccess - 通过在 .htaccess 中启用 gzip 来提高 magento 速度

> ID：14744720
> 
> 赞同：10
> 
> 时间：2013-02-07T06:08:21.207
> 
> 标签：.htaccess, magento

抱歉，如果这是一个菜鸟问题，但我最近知道通过在 magento 中启用 gzip 可以提高应用程序速度。但是 magento 目录中的 .htaccess 文件似乎太多了。那么我必须启用所有目录还是仅启用`/var/www/html/magento/.htaccess`？

```
/var/www/html/magento/.htaccess
/var/www/html/magento/.htaccess.sample
/var/www/html/magento/app/.htaccess
/var/www/html/magento/downloader/.htaccess
/var/www/html/magento/downloader/template/.htaccess
/var/www/html/magento/errors/.htaccess
/var/www/html/magento/includes/.htaccess
/var/www/html/magento/lib/.htaccess
/var/www/html/magento/media/.htaccess
/var/www/html/magento/media/customer/.htaccess
/var/www/html/magento/media/downloadable/.htaccess
/var/www/html/magento/pkginfo/.htaccess
/var/www/html/magento/var/.htaccess 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-07T06:42:11.013

.htaccess 设置自上而下流动。

除非您知道自己在做什么，否则不要弄乱 Magento 根目录下的子目录 .htaccess 文件，它们是用来保护 Magento 系统的。例如，弄乱`app/etc/.htaccess`可能会暴露您的加密密钥和数据库访问凭据，如果您启用了对 MySQL 的远程访问，这是一个特别致命的错误。你刚刚把你王国的钥匙交给了外界。

要启用 deflate/gzip，首先您的 apache 服务器必须启用正确的模块 ( **mod_deflate** )。然后在 Magento 根文件夹中的 .htaccess 文件中查找设置并启用压缩。Magento 为您预先安装了它，但注释掉了这些行。

要查看您的系统是否支持 deflate/gzip，请创建一个`<?php phpinfo(); ?>`文件，运行它并查找在 apache2handler 下加载的**mod_deflate 。**以下是一个示例

```
Loaded Modules core mod_log_config mod_logio prefork http_core mod_so mod_actions
               mod_alias mod_auth_basic mod_authn_file mod_authz_default 
               mod_authz_groupfile mod_authz_host mod_authz_user mod_autoindex 
               mod_cgi mod_deflate mod_dir mod_env mod_expires mod_fastcgi 
               mod_headers mod_include mod_mime mod_negotiation mod_php5 
               mod_reqtimeout mod_rewrite mod_setenvif mod_ssl mod_status 
               mod_suexec 
```

Magento 的预加载 .htaccess 部分需要进行一些修改才能启用 deflate/gzip 删除相应行前面的 # 以启用压缩，如下所示：

```
############################################
## enable apache served files compression
## http://developer.yahoo.com/performance/rules.html#gzip

    # Insert filter on all content
    ###SetOutputFilter DEFLATE
    # Insert filter on selected content types only
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript

    # Netscape 4.x has some problems...
    #BrowserMatch ^Mozilla/4 gzip-only-text/html

    # Netscape 4.06-4.08 have some more problems
    #BrowserMatch ^Mozilla/4\.0[678] no-gzip

    # MSIE masquerades as Netscape, but it is fine
    #BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

    # Don't compress images
    SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary

    # Make sure proxies don't deliver the wrong content
    Header append Vary User-Agent env=!dont-vary 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T09:08:28.307

您可以使用以下代码使用 .htaccess 文件启用 gzip：

```
##### files compression for better site speed #####

<IfModule mod_deflate.c>
 AddOutputFilterByType DEFLATE text/plain
 AddOutputFilterByType DEFLATE text/html
 AddOutputFilterByType DEFLATE text/xml
 AddOutputFilterByType DEFLATE text/css
 AddOutputFilterByType DEFLATE application/xml
 AddOutputFilterByType DEFLATE application/xhtml+xml
 AddOutputFilterByType DEFLATE application/rss+xml
 AddOutputFilterByType DEFLATE application/javascript
 AddOutputFilterByType DEFLATE application/x-javascript
 BrowserMatch ^Mozilla/4 gzip-only-text/html
 BrowserMatch ^Mozilla/4\.0[678] no-gzip
 BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
 SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
 Header append Vary User-Agent env=!dont-vary
</IfModule> 
```

你也可以参考我的博客：
[http ://blog.rahuldadhich.com/magento-speed-optimization-htaccess/](http://blog.rahuldadhich.com/magento-speed-optimization-htaccess/)

# java - JavaFX 中的 PDF 查看器

> ID：14744723
> 
> 赞同：4
> 
> 时间：2013-02-07T06:08:35.353
> 
> 标签：java, pdf, javafx

我正在使用 JavaFx-2。我需要在 JavaFx 中查看 pdf 文件。我在谷歌中搜索并找到了以下链接。 [http://www.idrsolutions.com/jpedalfx-viewer/](http://www.idrsolutions.com/jpedalfx-viewer/)

在此链接中，我创建了那里提到的所有内容，并且可以`PdfHelpPanel`在 Palette 中看到。当我将此组件拖到时，`PDFHelpFrame`我可以看到该`fileLocations`属性。在这里我需要提供文件位置，但我不知道如何提供我的 pdf 文件的位置。当我在文件位置属性中单击浏览时，它要求自定义代码、默认编辑器、现有组件的值。我需要选择哪一个。我在 [http://netbeans.dzone.com/articles/how-create-import-a-javabean-c-0](http://netbeans.dzone.com/articles/how-create-import-a-javabean-c-0)

倒数第二张图。如果有人已经这样做了，你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T04:04:20.017

你可以使用这个项目[https://github.com/james-d/PdfViewer](https://github.com/james-d/PdfViewer) 它使用 PDFRenderer 库。

# xpcom - 在创建 XPCOM 时需要帮助...！

> ID：14744724
> 
> 赞同：0
> 
> 时间：2013-02-07T06:08:41.700
> 
> 标签：xpcom

我想创建一个 XPCom，我想用它来获取我的 C# 应用程序中的 Mozilla DOM 对象。我对此真的很陌生。

有人能告诉我具体的步骤吗？就像从 C++ 开始创建 XPCOM 到 C# 结束，可以得到 firefox 的 DOM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T00:34:44.940

无法为 C# 提供建议，但您可以查看[我在 C++ XPCOM 附加组件上的帖子，](http://ptncode.blogspot.com/2013/08/exposing-xpcom-c-interface-on-dom.html)了解有关此方面的一些见解。我对此也很陌生，所以我试图收集信息并或多或少地描述步骤......

# android - 如何杀死Android中的其他应用程序

> ID：14744726
> 
> 赞同：0
> 
> 时间：2013-02-07T06:08:46.637
> 
> 标签：android

当我打开我的应用程序时，谁能告诉我如何杀死其他应用程序？例如，我正在播放一些音乐，然后我打开了我的应用程序并尝试使用以下代码杀死其他应用程序。我无法停止播放音乐。

```
 ActivityManager activityManager = (ActivityManager)getApplicationContext().getSystemService(Context.ACTIVITY_SERVICE);

    for(RunningAppProcessInfo info:activityManager.getRunningAppProcesses()){
        activityManager.killBackgroundProcesses(String.valueOf(info.pid));
        activityManager.killBackgroundProcesses(String.valueOf(info.processName));

    } 
```

我也在清单文件中授予了权限。我也没有收到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:43:52.180

参考中的媒体播放器应用程序是您编写的吗？音乐不会停止播放，因为它是由媒体服务而不是您的应用程序播放的。应用程序只是要求媒体服务器（这是一个 android 后台服务）通过 IPC 机制开始播放。并且被杀死的应用程序在被杀死之前可能没有调用媒体播放器`stop()`。

# php - php回显javascript调用

> ID：14744731
> 
> 赞同：1
> 
> 时间：2013-02-07T06:09:04.527
> 
> 标签：php, javascript

我是 webdesign/php 和 javascript 的新手，我遇到了问题。请看这段代码：

```
 <script type="text/javascript">
<!--
function thanksDiv(){
    document.getElementById("myThanksDiv").style.display ='block';
}
function hideDiv(id){
    document.getElementById(id).style.display='none';
}

//-->
</script>

        <form id="contacts-form" method="post" action="email.php" target="myiframe">
           <fieldset>

           <div class="alignright"><a href="#" onClick="document.getElementById('contacts-form').submit()">Send Your Message!</a></div>
           </fieldset>
        </form>

<iframe  name="myiframe" id="myiframe" src="" width=1 height=1 style="visibility:hidden;position:absolute;"></iframe>

<div id="myThanksDiv" style="width:200px;height:150px;position:absolute;left:50&#37;; top:20px; margin-left:-100px;border:1px solid black; background:#fff;display:none;padding:20px;">Thanks! <br />Your message was sent.</div> 
```

在 email.php 中：

```
echo '<script type="text/javascript">'
   , thanksDiv();'
   , '</script>';
?> 
```

这个想法是，当我点击“发送您的消息”时，我应该会看到一个框，上面写着“消息已发送”，但我没有。

如果我没有通过 email.php 页面，我只是从表单提交链接中调用thanksDiv，它可以工作。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:14:41.157

iframe 中的 javascript 与定义函数的父文档不在同一“范围”内。

为了调用它尝试：

```
echo '<script type="text/javascript">'
   , 'parent.thanksDiv();'
   , '</script>'; 
```

不同之处在于“父级”告诉 JS 在框架的父级中查找函数；）

请确保所有内容都在同一个域/端口上，否则您可能会违反同源策略，因此可能无法正常工作。

**编辑**

这是在我的机器（PHP5，Firefox）上运行良好的配置：

测试.html

```
<html>
<head>
  <script type="text/javascript">
  <!--
    function thanksDiv(){
      document.getElementById("myThanksDiv").style.display ='block';
    }
    function hideDiv(id){
      document.getElementById(id).style.display='none';
    }
  //-->
  </script>
</head>
<body>
  <form id="contacts-form" method="post" action="email.php" target="myiframe">
    <fieldset>
      <div class="alignright"><a href="#" onClick="document.getElementById('contacts-form').submit()">Send Your Message!</a></div>
    </fieldset>
  </form>

  <iframe  name="myiframe" id="myiframe" src="" width=1 height=1 style="visibility:hidden;position:absolute;"></iframe>

  <div id="myThanksDiv" style="width:200px;height:150px;position:absolute;left:50px;top:20px; border:1px solid black; background:#fff;display:none;padding:20px;">Thanks! <br />Your message was sent.</div>
</body>
</html> 
```

电子邮件.php：

```
<?php
echo '<script type="text/javascript">parent.thanksDiv();</script>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:12:24.557

表单页面中的所有内容都将在下一页中消失。所以不再有thanksDiv 函数。当您提交表单时，您将完全进入另一个页面。

直接调用该函数有效，因为您仍在该页面上。

`success.html`例如，创建一个页面，`email.php`而不是回显 js，请执行以下操作：

```
header('Location: http://www.yoursite.com/success.html'); 
```

这将重定向到成功页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:12:27.083

```
echo '<script type="text/javascript">'
   , 'thanksDiv();'
   , '</script>'; 
```

第二行缺少 '。

```
function thanksDiv(){
    document.getElementById("myThanksDiv").style.display ='block';
} 
```

这个函数也应该在 email.php 中。或将其添加到单独的页面并在其中包含页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:15:02.620

当您单击发送消息时

```
onclick="thanksDiv();"; 
```

# javascript - Javascript ...显示值

> ID：14744732
> 
> 赞同：2
> 
> 时间：2013-02-07T06:09:08.147
> 
> 标签：javascript

我正在用 Javascript 创建一个二十一点纸牌游戏。到目前为止，我很欣赏你的评论。我正在寻找关于为什么我似乎只能在 cardDealer 函数中调用 cardFace 函数一次的反馈。目前 cardFace(0) 给了我一个值，而 cardFace(1) 或任何其他数字都没有，除非它是 cardDealer 函数中唯一被调用的 cardFace(x) 。任何想法，将不胜感激。谢谢

下面的代码并不完整，但我相信足以从中辨别出足够的信息。谢谢

```
 function card(name, suit, face, value)
    {
        this.name = name;
        this.suit = suit;
        this.face = face;
        this.value = value;
    }

    aceOfHearts = new card("aceofhearts","hearts", "ace", 11);
    kingOfHearts = new card("kingofhearts","hearts", "king", 10);
    queenOfHearts = new card("queenofhearts","hearts", "queen", 10);
    jackOfHearts = new card("jackofhearts","hearts", "jack", 10);
    tenOfHearts = new card("tenofhearts","hearts", "ten", 10);
    nineOfHearts = new card("nineofhearts","hearts", "nine", 9);
    eightOfHearts = new card("eightofhearts","hearts", "eight", 8);
    sevenOfHearts = new card("sevenofhearts","hearts", "seven", 7);
    sixOfHearts = new card("sixofhearts","hearts", "six", 6);

    var deck;
    deck = [];

    deck.push(aceOfHearts);
    deck.push(aceOfDiamonds);
    deck.push(aceOfClubs);
    deck.push(aceOfSpades);
    deck.push(kingOfClubs);
    deck.push(kingOfDiamonds);
    deck.push(kingOfHearts);
    deck.push(kingOfSpades);
    deck.push(queenOfClubs);
    deck.push(queenOfDiamonds);
    deck.push(queenOfHearts);
    deck.push(queenOfSpades);
    deck.push(jackOfClubs);
    deck.push(jackOfDiamonds);
    deck.push(jackOfHearts);
    deck.push(jackOfSpades);
    deck.push(tenOfClubs);
    deck.push(tenOfDiamonds);
    deck.push(tenOfHearts);
    deck.push(tenOfSpades);

    var cardDealer = function()
    {  
        fisherYates(deck);

        document.getElementById("yourFirstCard").textContent = "Your First Card is " + cardFace(0) ;
        document.getElementById("yourSecondCard").textContent = "Your Second Card is " + cardFace(1) ;

    };

    var cardFace = function(x)
    {   
        cardFace = deck[x].face;
        return cardFace;
    };

    var cardSuit = function(x)
    {
        cardSuit = deck[x].suit;
        return cardSuit;
    };

    <body>
<div>Black Jack 1.1</div>
<br/>
<button type="button" onClick="cardDealer()">Deal</button> 
<div id="yourFirstCard"></div>
<div id="yourSecondCard"></div>
<div id="yourThirdCard"></div>
<div id="yourFourthCard"></div>
<div id="yourFifthCard"></div>
<div id="playerTotal"></div></div>
<div id="playerSit"></div>
<div id="playerMessage"></div>
<div id="sitter"><button type="button" onClick="sit()">Sit</button></div>
<div id="hitter"><button type="button" onClick="hitMe()">Hit</button></div> 
<br/>
<br/>
<div id="dealersFirstCard"></div></div>
<div id="dealersSecondCard"></div></div>
<div id="dealersThirdCard"></div></div>
<div id="dealersFourthCard"></div></div>
<div id="dealersFifthCard"></div></div>
<div id="dealerTotal"></div></div>
<div id="dealerSit"></div></div>
<div id="dealerMessage"></div></div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:43:14.997

`cardFace`移至上方`cardDealer`或将其更改为定义`function cardFace(x)`。

这是一个 js 行为的事情。`function x`可以从上面编写的代码调用以该格式定义的函数。哪里`var x = function()`不能，因为它是在运行时确定的。

有关Resig 先生的更多示例，请参见：[http ://ejohn.org/apps/learn/#4。](http://ejohn.org/apps/learn/#4)

试试看：[http](http://ejohn.org/apps/learn/) ://ejohn.org/apps/learn/这是一件好事。

编辑：还有很多你应该在这个线程中查看的好建议。包括其他发布的答案。你应该调查一下`scopes`。

**编辑 2**

再次查看您的代码后，我相信我的解决方案实际上不是正确的，因为它让我忘记了`cardFace`在其范围内被调用，`cardDealer`这意味着它可能会在您调用时定义`cardDealer`。因此，我认为当您将其更改为时，`function`您可能已经更改了名称，正如另一个答案所暗示的那样。事实上是正确的答案。

```
//Test function calling forward defined function
var f = function() { x(); };
var x = function() { console.log('a'); }
f()
>>> a

// Test function modifying it's own scoped name
var f = function() { f = 'test'; return f; };
f()
>>> "test"
f()
>>> TypeError: string is not a function

// Test function modifying it's own scoped name when declaring as function
function f() { f = 'test'; return f; };
f()
>>> "test"
f()
>>> TypeError: string is not a function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:29:13.633

这是我看到问题的地方：

```
var cardFace = function(x)
{   
    cardFace = deck[x].face;
    return cardFace;
}; 
```

首先，您声明一个名为的变量`cardFace`并将其分配给一个函数。这个函数实际上做了什么它重新分配你的`cardFace`变量并作为结果返回它。就是这样，你的函数现在已经消失了，你不能再引用它了，因为`cardFace`已经被重新分配了。

您需要做的是更改函数的主体，使其不会重新分配变量：

```
var cardFace = function(x)
{   
    var cardFaceValue = deck[x].face;
    return cardFaceValue;
}; 
```

函数也是如此`cardSuit`。

# android - Android AutoCompleteTextView 作为 ListView 标头

> ID：14744734
> 
> 赞同：1
> 
> 时间：2013-02-07T06:09:13.747
> 
> 标签：android, listview, autocompletetextview

我正在尝试将 AutoCompleteTextView 设置为 ListView 标头，但如果我这样做，自动完成框永远不会出现。创建自动完成视图的代码直接来自谷歌文档中的[Hello, AutoComplete](http://jayxie.com/mirrors/android-sdk/resources/tutorials/views/hello-autocomplete.html)教程。COUNTRIES 数组也来自那里。

```
protected void onCreate(Bundle savedInstanceState) {
requestWindowFeature(Window.FEATURE_NO_TITLE);
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

ListView myList = (ListView) findViewById(R.id.ResultList);

LayoutInflater layoutInflater = (LayoutInflater) this.getSystemService(LAYOUT_INFLATER_SERVICE);
TableLayout searchHeader = (TableLayout) layoutInflater.inflate(R.layout.search_header, null); 
myList.addHeaderView(searchHeader, null, false);

final AutoCompleteTextView textView = (AutoCompleteTextView) myList.findViewById(R.id.edit);
ArrayAdapter<String> searchAdapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_dropdown_item_1line, COUNTRIES);
textView.setAdapter(searchAdapter);
textView.setThreshold(1);

        //Dummy data for listview.

String[] listContent = {
        "test", "test", "test", "test",
        "test", "test", "test", "test"
};
ArrayAdapter<String> adapter = new SearchResultAdapter(this, listContent);
myList.setAdapter(adapter);

} 
```

作为测试，我添加了一个 TextChangedListener 来尝试强制显示对话框

```
 textView.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
            textView.showDropDown();
        }
    }); 
```

对话框出现但几乎立即关闭。我想知道列表视图中的某种事件是否会导致这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T06:41:18.597

[这个](https://stackoverflow.com/questions/2679948/focusable-edittext-inside-listview)关于 ListView 中 EditText 视图焦点的问题以及对 AutoCompleteTextView 源的一些阅读帮助我找到了答案。将 ListView 上的焦点顺序设置为 afterDescendants 允许对话框正常显示。

```
<ListView
    android:id="@+id/ResultList"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginBottom="50dip"
    android:descendantFocusability="afterDescendants"
    android:fadingEdge="none" >
</ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T08:05:34.803

在您的 XML 文件中使用 autocompletetextview 可能会有所帮助

# php - 使用原生 Wordpress 制作 Ajax 表单

> ID：14744738
> 
> 赞同：0
> 
> 时间：2013-02-07T06:09:43.763
> 
> 标签：php, javascript, ajax, wordpress

我有一个表单，它使用 Ajax 发送序列化表单数据以发送到名为contact-submit 的 php 文件

我知道我应该将该页面的内容包装在一个函数中......并将其添加到functions.php文件中

我打算调用函数 MyContactForm

但我不知道序列化表单并将数据发布到函数的正确语法

这是我到目前为止所拥有的……*请记住，我遗漏了表单字段……因为我们专注于脚本部分……如果表单被序列化……应该抓住一切

html

```
<form id="contactform" action="<?php echo home_url('contact-submit'); ?>" method="post">

<input class="textbox required" type="text" name="name2" id="name" value="Your Name" />

<input class="submit" value="Send" type="submit" alt="Send message" name="submit" /> 

</form> 
```

脚本

```
 jQuery("#postform").validate();

    var AjaxSubmit = function(){
        var btnText=jQuery('#contactform .submit').val();
        // inform client that data is been sent:
        jQuery('#contactform .submit').val('Sending...');
                jQuery('#contactform .submit').attr('disabled', true);

        jQuery.ajax({
            type: 'POST',
            url: jQuery('#contactform').attr('action'),
            data: jQuery('#contactform').serialize(),
            // successful POST - display result in success div:
            success: function(msg){
                        jQuery('#contactform .form, #contactform .contacthead').slideUp(500,function(){
                        jQuery('#contactform div.success').removeClass('hiddne').fadeIn(500);
                });
            },  
            error: function(response) {
                jQuery('#contactform .submit').val(btnText);
                jQuery('#contactform div.error').html(response.statusText).slideDown(500);
            }
        });
    }
    jQuery("#contactform").validate({
        submitHandler: AjaxSubmit
    });
}); 
```

我的问题是.....序列化表单并将数据传递给 php 函数的正确语法是什么？

# sql-server - 如何根据CSV列过滤Sql表

> ID：14744744
> 
> 赞同：0
> 
> 时间：2013-02-07T06:10:31.063
> 
> 标签：sql-server, csv, filter

如何根据 CSV 列中存在的 VALUE 过滤 SQL 表。详细地说，我有一个表，它有一个 CSV 列，其中包含逗号分隔形式的整数，例如

```
12,234,32,55 
121,64,43,65
54,25,112,12
996,612,55,3  etc. 
```

现在从这个表中我想找出 csv 列中值为 12(12) 的行，即具有 csv 记录的行

```
12,234,32,55
54,25,112,12 only 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:35:18.890

```
Select *
from Tablex 
where 
(Col like '%,12,%') 
 or (Col = '12')
 or LEFT(Col,3)='12,'
 or RIGHT(col,3)=',12' 
```

或者像 Love2Learn 建议的那样更好

```
 Select * From Tablex Where ','+Col+',' Like '%,12,%' 
```

# php - 如何仅在验证后在 php 中上传 .mp3 文件，我的 .wav 文件很容易上传

> ID：14744745
> 
> 赞同：3
> 
> 时间：2013-02-07T06:10:34.347
> 
> 标签：php

```
if ((($_FILES["myfile"]["type"] == "audio/mp3") ||
     ($_FILES["myfile"]["type"] == "audio/wav")) &&
    ($_FILES["myfile"]["size"] < 20000000)) 
{
    if (move_uploaded_file($_FILES['myfile']['tmp_name'], $target_path) )
    {
        $result1=1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:24:16.643

仅`print $_FILES["myfile"]["type"];` 适用于真正的 mp3 文件，然后复制该值并使用它而不是音频/mp3，因为 mp3 的 MIME 类型不会是“音频/mp3”，我认为它`audio/mpeg`

也请检查此[链接](https://stackoverflow.com/questions/1232769/how-to-get-the-content-type-of-a-file-in-php)，因为它不建议依赖于`$_FILES["myfile"]["type"]`浏览器发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:15:26.227

两件事情。

检查`.mp3`文件的大小。检查您的文件类型，`.mp3`如果它实际上是`audio/mp3`. 试试`print_r($_FILES);`。

```
$type = $_FILES["myfile"]["type"];
$size = $_FILES["myfile"]["size"];

if( ( ($type == "audio/mp3") || ($type == "audio/wav") ) && ($size < 20000000)) {
    if(move_uploaded_file($_FILES['myfile']['tmp_name'], $target_path) ) {
        $result1=1;
    }
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:33:11.960

您可以通过评估上传文件的扩展名来检查，或者如果您想检查文件级别，那么您可以使用其中一个梨包[https://pear.php.net/package/MP3_ID](https://pear.php.net/package/MP3_ID)

# java - Java 错误：无法对非静态方法进行静态引用

> ID：14744746
> 
> 赞同：1
> 
> 时间：2013-02-07T06:10:40.157
> 
> 标签：java, static

我正在编写一个 Android 应用程序并收到此错误，但我不知道为什么。有人可以帮我理解为什么我会收到这个错误吗？

```
Cannot make a static reference to the non-static method updateScores(List<Score>) from the type DatabaseHandler 
```

这是相关的代码。

```
public class ScoreList extends SherlockFragmentActivity {
    List<Score> listScore = new ArrayList<Score>();
    public void updateListView() {
        listViewScore.setAdapter(new ScoreListAdapter(ctx,
                R.layout.score_row_item, listScore));
        DatabaseHandler.updateScores(listScore);    
    }
} 
```

这是 DatabaseHandler 类。我尝试将函数设为静态，但由于错误，它不会那样工作。

```
public class DatabaseHandler extends SQLiteOpenHelper {

    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_NAME = "scoreKeeper";
    private static final String TABLE_GAMES = "games";    
    private static final String KEY_NAME = "name";
    private static final String KEY_CHANGE = "scoreChange";
    private static final String KEY_TOTAL = "scoreTotal";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_GAMES_TABLE = "CREATE TABLE " + TABLE_GAMES + "("
                + KEY_NAME + " INTEGER PRIMARY KEY," + KEY_CHANGE + " TEXT,"
                + KEY_TOTAL + " TEXT" + ")";
        db.execSQL(CREATE_GAMES_TABLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_GAMES);
        onCreate(db);
    }

    public void addScore(Score score) {
        SQLiteDatabase db = this.getWritableDatabase();    
        ContentValues values = new ContentValues();
        values.put(KEY_NAME, score.getName()); 
        values.put(KEY_CHANGE, score.getScoreChange());
        values.put(KEY_TOTAL, score.getScoreTotal());       

        // Inserting Row
        db.insert(TABLE_GAMES, null, values);
        db.close(); 
    }

    public List<Score> getAllScores() {
        List<Score> scoreList = new ArrayList<Score>();
        String selectQuery = "SELECT  * FROM " + TABLE_GAMES;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        if (cursor.moveToFirst()) {
            do {
                Score score = new Score("","","");
                score.setName(cursor.getString(0));
                score.setScoreChange(cursor.getString(1));
                score.setScoreTotal(cursor.getString(2));
                // Adding contact to list
                scoreList.add(score);
            } while (cursor.moveToNext());
        }

        return scoreList;       
    }

    public void updateScores(List<Score> score) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_GAMES);
        onCreate(db);

        ContentValues values = new ContentValues();
        for(int i = 0; i < score.size(); i++){
            values.put(KEY_NAME, score.get(i).getName());
            values.put(KEY_CHANGE, score.get(i).getScoreChange());     
            values.put(KEY_TOTAL, score.get(i).getScoreTotal());    
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:11:54.707

```
public void updateScores(List<Score> score) 
```

改成

```
public static void updateScores(List<Score> score) 
```

为什么？

因为您使用的是**静态**调用

```
DatabaseHandler.updateScores(listScore) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:13:18.397

因为您正在使用静态引用访问该方法

```
DatabaseHandler.updateScores(listScore); 
```

意思是类名..

您必须创建一个`DatabaseHandler`类的实例并使用该方法。

或者制作一个`updateScores`像静态方法一样，

```
static public void updateScores() 
```

但我怀疑你在`DatabaseHandler`课堂上有更多的代码。（作为它的 sqlite 数据库助手类，您在此类中使用 Activity 上下文）因此更好地创建类的**实例**`DatabaseHandler`并使用`updateScores()`带有实例的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T06:13:17.153

将方法更改`updateScores`为`static`如下：

```
 public static void updateScores(List<Score> score) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T06:16:03.917

```
DatabaseHandler dbh = new DatabaseHandler();
dbh.updateScores(listScore); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T06:16:06.427

您可以制作方法

> public void updateScores（列出分数）

作为**静态**的，或者您可以`**DatabaseHandler **`在调用者类中创建一个对象：

> 成绩单

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T06:16:28.253

错误消息告诉您完全问题：您以静态方式引用非静态方法。有两种可能性：1.您想要静态方法（请参阅其他答案） 2.您想要非静态方法。然后使用这个调用者片段：

```
DatabaseHandler helper = new DatabaseHandler();
helper.updateScores(listScore); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-07T06:24:42.203

错误是因为您使用类名调用非静态方法。要克服此错误，您必须执行以下任何一项操作 1。使您的方法 updateScores 为 static 或 2 。创建 DatabaseHandler 的实例并使用该对象调用该方法。

使用类名调用方法要求方法是静态的

# ios - TabBarController 中的属性范围

> ID：14744750
> 
> 赞同：0
> 
> 时间：2013-02-07T06:11:05.947
> 
> 标签：ios, objective-c, properties, uitabbarcontroller

我有一个带有选项卡 A 和 B 的 TabBarController。我在选项卡 B 中定义了一个 NSMutableArray 属性，如下所示：

.h 文件：

```
@property (nonatomic,strong) NSMutableArray *cart; 
```

我正在同一选项卡（选项卡 B）的 .m 文件中更新此属性。

现在，我的问题是：当我点击任一选项卡上的后退按钮并移至上一个视图时，此属性是否超出范围并且属性中的值被重置/属性被分配为零？如果是这种情况，当通过后退按钮导航到上一个视图时，是否有任何方法可以保留该属性并防止它被分配给 nil？

感谢您的投入和想法。

谢谢，迈克

# asp.net-mvc-3 - 如何从ajax json中的控制器获取结果

> ID：14744753
> 
> 赞同：0
> 
> 时间：2013-02-07T06:11:13.293
> 
> 标签：asp.net-mvc-3, jquery, http-post

使用 ajax 将一些参数发送到控制器，但它不返回值。

我的概念：选择的@html.dropdownlist 值我发送到控制器，使用这个值从获取值以使用 mvc3 将属性绑定到另一个下拉列表

我得到了这个答案：verfif given link

[验证给定链接](https://stackoverflow.com/questions/14747883/how-to-bind-the-dropdownlist-using-ajax/14749696#14749696)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:35:26.690

您`type`在 ajax 中传递了两次选项，并且 url 格式不正确

```
function onChange(bookid) { 
          $.ajax({
            type: "GET",
            url: '@Url.Action("books","subject")',
            data : { bookid: bookid},
            dataType: "json",
            success: function (result) { 
              alert('success');
              //do whatever you want
            },
            error: function(result){
            }
        }); 
    }; 
```

您正在传递`dataType`. `json`因此，如果您想点击`success`结果`$.ajax`，您需要`return Json`从您的操作结果中获取，而不是作为视图返回。

当您作为 View 返回时，它总是会出错。

```
 public ActionResult books(string bookid)
    {

        var books= service.books(projectId); 

        // books are stored in list format
        return Json(books);
    } 
```

希望它可以帮助你。

# php - pdf文件没有下载

> ID：14744754
> 
> 赞同：1
> 
> 时间：2013-02-07T06:11:15.423
> 
> 标签：php

我正在使用以下代码开始下载，但下载的弹出窗口未打开。相反，它显示该 pdf 文件的二进制格式。它在本地服务器上运行良好，但在托管服务器上运行不正常。

```
 $file = '../Notes/chapter01.pdf';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
   // header('Content-Type: application/octet-stream');
    header('Cache-Control: public'); // needed for i.e.
    header('Content-Type: application/pdf');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    //header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
                        ob_end_clean();
    flush();
    readfile($file);
    exit;
}
else {
            die('Error: File not found.');
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:20:27.987

此代码有效。

```
$file = '../Notes/chapter01.pdf';

$mime_type = 'application/pdf';
$filesize  = filesize( $file );

header( "Content-type:" . $mime_type );
header( "Content-Length:" . $filesize );
header( "Content-Disposition: attachment; filename=" . $file );
header( "Cache-Control: private, max-age=15" );

@readfile( $file ); 
```

希望这可以帮助。

# jquery - 在jQuery中清空div而不影响其他div

> ID：14744755
> 
> 赞同：1
> 
> 时间：2013-02-07T06:11:17.613
> 
> 标签：jquery, jquery-selectors

我一直在研究这个 jquery 系统，其中多个 div 的`nth-child`位置会根据浏览器宽度发生变化或“移位”。它几乎完成了，但我遇到了一个我现在无法解决的问题，我会解释..

默认情况下，我有 4 个具有自己`nth-child`位置的 div，然后当您的浏览器宽度或窗口大小更改为我指定的范围之一时，div 的`nth-child`位置会更改。我正在使用该`.empty`技术使这一切正常工作，这就是我的问题所在。所以说我有四个 div，里面都有文本。当浏览器宽度发生变化时，div 中的文本消失或“清空”。当我不使用空时，这些 div 中的文本会保留，但`nth-child`移位器无法正常工作......这是**没有**空的 jsFiddle。

[http://jsfiddle.net/H5REk/8/](http://jsfiddle.net/H5REk/8/) 当您调整 HTML 窗口的大小时，其他 div 中的红色、蓝色等文本颜色仍然存在。所以我使用`.empty`. 像这样：

[http://jsfiddle.net/H5REk/7/](http://jsfiddle.net/H5REk/7/)

但是同样，当`.empty`使用时并且您不在指定的窗口大小/浏览器宽度中.. div 中的文本消失或“清空”。

因此，一种方法的问题是我在 div 中的所有文本都被清空了。然后使用另一种方法，正在重新创建 div 或文本而不是删除它。那么我将如何让它工作，以便浏览器宽度更改器`nth-child`正常工作，同时让我的 div 中的文本仍然保留？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:29:00.230

根据您的评论，我有几个不同的解决方案。

我不知道您是否希望特殊颜色的框暂时替换现有的框（当前行为），或者您是否希望将它们附加在您指定的第 n 个子框之后（根据您的评论）。

在这两种`removeSpecialBoxes`方法中，方法都在开始时调用`checkWidth`

**替换方法（[jsfiddle](http://jsfiddle.net/ac2DU/4/)）**

这种方法有点复杂，因为您需要跟踪删除的项目，然后稍后重新插入相同的确切项目。除了下面的 JS 之外，还有一些 CSS 更改，即我让特殊框有 ID，每个都有 class `test`。

首先，我创建了一个新对象来保存存储的盒子。

```
var theStored = {}; 
```

然后我创建了几个方法来处理特殊盒子的创建和删除。

```
function makeSpecialBox(id, content) {
    // Create a new special box with the class name and the content
    var specialBox = $("<div />", {
        "id": id,
        "class": "test"
    }).html(content);
    // Return the special box
    return specialBox;
}

function removeSpecialBoxes() {
    // Get the special boxes
    var specialBoxes = $("#wrapper div").filter(".test");
    // For each special box
    specialBoxes.each(function(index, specialBox) {
        // Get the special box's ID
        var specialBoxId = $(specialBox).attr("id");
        // Get the associated stored box
        var storedBox = theStored[specialBoxId];
        // Replace the special box with the stored box
        $(specialBox).replaceWith(storedBox);
    });
} 
```

然后我修改了你的`setNthPosition`方法，用特殊盒子处理现有盒子的存储和替换。

```
function setNthPosition(theDiv, newPos){
    // Generate a new special box
    var specialBox = theDivs["div"+theDiv].clone();
    // Get the special box ID
    var specialBoxId = specialBox.attr("id");
    // Get the existing box to replace
    var existingBox = $("#wrapper div:nth-child("+newPos+")");
    // Clone the existing box and store it based on the special box ID
    theStored[specialBoxId] = existingBox.clone();
    // Replace the existing box with the special box
    existingBox.replaceWith(specialBox);
} 
```

**附加方法（[jsfiddle](http://jsfiddle.net/Rs3h6/5/)）**

这种方法稍微简单一些。它本质上是您问题中的现有代码，并进行了一些小的更改。

```
function makeSpecialBox(className, content) {
    // Create a new special box with the class name and the content
    var specialBox = $("<div />").addClass(className).html(content);
    // Return the special box
    return specialBox;
}

function removeSpecialBoxes() {
    // Get the special boxes
    var specialBoxes = $("#wrapper div").filter("[class^='test']")
    // Remove the special boxes
    specialBoxes.remove();
}

function setNthPosition(theDiv,newPos){
    // Generate the special box
    var theClone=theDivs["div"+theDiv].clone();
    // Append the special box after the nth-child
    $("#wrapper div:nth-child("+newPos+")").after(theClone);
} 
```

# xml - OpenERP如何在日期时间字段时使按钮不可见！=今天的日期

> ID：14744768
> 
> 赞同：1
> 
> 时间：2013-02-07T06:12:17.813
> 
> 标签：xml, openerp

在 python 中，我有以下字段：

```
'transaction_date': fields.datetime('Transaction Date') 
```

在 XML 中，我有以下内容：

```
<field
    name="transaction_date"
    readonly="True"
    />

<button
    name="set_void"
    string="Void"
    type="object"
    icon="gtk-cancel"
    groups="mymodule.mygroup"
    attrs="{'invisible':[('transaction_date','!=', datetime.now())]}"
    /> 
```

上面的 attrs 代码目前不起作用，但我想做的是：只有在 transaction_date 字段的日期值 = Today 时才能显示“Void”按钮。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:41:18.397

如果您使用的是**v7**，那么试试这个**attrs**：

`attrs="{'invisible':[('transaction_date','!=',__import__('time').strftime('%%Y-%%m-%%d %%H:%%M:%%S'))]}"`

* * *

如果您使用的是**v6**或**v6.1**，请尝试以下**attrs**：

`attrs="{'invisible':[('transaction_date','!=',time.strftime('%%Y-%%m-%%d %%H:%%M:%%S'))]}"`

我想建议您应该使用`fields.date`，而不是因为您的字段在**日期**`fields.datetime`时间格式中不可见，因为无论何时您选择**日期**和**时间**，秒数都不会匹配。

 ******如果您将使用**fields.date**然后`time.strftime('%%Y-%%m-%%d')`使用**attrs**。

谢谢你。******

# jquery - 重新使用 JQuery 参考

> ID：14744774
> 
> 赞同：-2
> 
> 时间：2013-02-07T06:12:40.483
> 
> 标签：jquery, flash, jquery-plugins, javascript

本网站首页有flash元素[点击这里](http://cdl.tv/)！我想用 jQuery 创建类似的效果。请建议我该怎么做？或任何可用的图书馆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:17:55.563

这个效果有几个不同的插件。虽不与声。

如果您没有使用 jquery 或 javascript 的经验，那么做这样的事情会非常困难。

[鼠标驱动的视差](http://www.greepit.com/2011/06/implement-a-mouse-driven-parallax-effect-with-jquery-plax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:47:16.493

网络上有一些用于鼠标移动等的示例/教程。希望这些可以帮助您实现目标。

[http://progtuts.info/186/create-a-parallax-website-header/](http://progtuts.info/186/create-a-parallax-website-header/)

[http://archive.plugins.jquery.com/project/jparallax](http://archive.plugins.jquery.com/project/jparallax)

[http://www.shinyface.com/2010/09/04/simple-parallax-with-jquery/](http://www.shinyface.com/2010/09/04/simple-parallax-with-jquery/)

# database - 主键也是超级键和候选键吗？

> ID：14744775
> 
> 赞同：3
> 
> 时间：2013-02-07T06:12:41.067
> 
> 标签：database

主键也是超级键和候选键吗？他们的定义很长，但我想知道这是不是真的？

请注意，我不是在问它们是否是同一个术语。我只是问一个方向，而不是反过来。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T06:36:35.343

*   **超级键**- 是一组一个或多个列，可用于唯一标识表中的记录

*   **候选键**- 可以是任何列或可以作为数据库中唯一键的列组合。一张表中可以有多个候选键。每个候选键都可以作为主键。您可以将其视为“最短”超级密钥或**最小**超级密钥

*   **主键**– 是唯一标识记录的列或列组合。只有一个候选键可以是主键。

对于有资格作为主键的候选键，它应该是唯一且非空的。

因此，基本上主键只是候选键之一，它只是一个最小的超级键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:36:47.047

根据干定义：

根据定义，您的主键是**超级键**- 您不能有两行具有相同的主键。
但是，主键不是你业务的[自然](http://en.wikipedia.org/wiki/Natural_key)约束，而是你数据存储中的人为约束：例如，你可以在表中设置一个人的生日作为主键，并且永远不会有两个人出生在同一天。这很愚蠢，但有可能。在这种情况下，*主键*不是域的*超键*。

但是，您的主键不一定是**候选键**- 您可以向主键添加冗余列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:17:48.860

这取决于。

主键是表用来识别不同元素的主键。它是从候选键中选择的。

候选键是所有可能是主键的键。所有唯一且可以在表中区分的键。

超级键是一个带有附加属性的主键，这个附加信息用于唯一标识实体集的一个实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:15:12.063

能够识别数据库中任何行的不同属性集称为超级键。最小超键被称为候选键，即在一组超键中具有最少属性的一个。主键可以是能够以唯一方式识别数据库中特定行的任何键。[从这个线程](http://wiki.answers.com/Q/Difference_between_primary_key_candidate_key_and_super_key)

在谷歌中输入所有三个键会得到大约[2,480,000 个结果](http://www.google.de/search?q=primary%20key%20super%20key%20candidate%20key&oq=primary%20key%20super%20key%20candidate%20key&sourceid=chrome&ie=UTF-8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-18T14:01:25.747

候选键是唯一标识元组的最小字段子集。例如，如果您在“user_id”和“pet_id”列上有一个候选键，那么您永远不会有超过 1 个具有相同 user_id 和 pet_id 的元组，并且 user_id 和 pet_id 都不能单独用作元组的唯一标识符。

超级键是一组包含键的字段。使用上面的示例，如果我们添加“pet_name”（这不是键，因为我们可以有多个名为“fluffy”的宠物），“user_id”和“pet_id”的组合唯一地标识了一个元组，这将是一个超级键。基本上它就像一个没有“最小字段子集”约束的候选键。

主键是您告诉数据库进行优化的候选键。可能有多种方法可以引用唯一元组（即多个候选键），但您可以在创建最常使用的表时指定一种。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-31T23:28:23.077

是的，我们可以简单地说候选键是主键，但它必须是唯一的。

# php - facebook批处理api中的额外字段

> ID：14744776
> 
> 赞同：0
> 
> 时间：2013-02-07T06:12:46.177
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我需要去年朋友的所有过去事件，因为参数工作正常，并且它以最小的字段响应我的结果，

{

**name** : "谁准备在迪拜举办一场精彩绝伦的派对？",

**开始时间：“ 2012-12-07T18** :00:00+0400”，

**结束时间**：“2012-12-08T06:00:00+0400”，

**时区**：“亚洲/迪拜”，

**位置**：“迪拜，阿拉伯联合酋长国”，

**编号**：“420084958028590”，

**rsvp_status**：“参加”

},

我需要添加其他字段，

*   所有者
*   平面
*   参加者
*   描述

像这样试过，

```
 array('method' => 'GET',
      'relative_url' => $user_id.'/statuses/?since='.strtotime('2010-01-01'),

       # 'relative_url' => $user_id.'/events/',

       #'fields' => 'name,end_time,owner'

         ),

); 
```

--

```
 array('method' => 'GET',

  'relative_url' => $user_id.'/statuses/?fields=name,end_time,owner&since='.strtotime('2010-01-01'),
         ),

); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:45:44.733

经过一番打击和考验，

它与**编码****relative_url**参数的url 一起工作，

```
array('method' => 'GET',

  'relative_url' =>  urlencode($userId.'/events/?fields=name,end_time,owner&since='.strtotime('2010-01-01')),
         ),

); 
```

# ios - CGAffineTransformRotate后如何获取UIImageView的CGRect？

> ID：14744777
> 
> 赞同：0
> 
> 时间：2013-02-07T06:12:48.670
> 
> 标签：ios, objective-c, xcode, cgrect

在我的游戏中，我将 UIImageview 旋转到 30 度，我需要得到旋转 UIImageview 的转换 CGRect，请有人帮我提供示例代码。

```
UIImageView *mainImgB = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, width, hight)];
[mainImgB setBackgroundColor:[UIColor greenColor]];
mainImgB.layer.anchorPoint = CGPointMake(0, 0);
mainImgB.center = CGPointMake(View.frame.size.width/2, View.frame.size.height/2);
mainImgB.transform =  CGAffineTransformRotate(mainImgB.transform,30 * M_PI/180); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:36:14.710

使用`CGRectApplyAffineTransform`：

```
 CGRect newRect = CGRectApplyAffineTransform(yourViewOnWhichTransformGetsApplied.frame, yourTransformHere); 
```

# c - 发现我的程序的输出被重定向到一个文件中

> ID：14744779
> 
> 赞同：5
> 
> 时间：2013-02-07T06:12:58.610
> 
> 标签：c, linux, output

我想知道在 linux 和 C 中是否可以发现我的程序输出被重定向到一个文件。我想在标准输出上打印输出时格式化人类可读的输出`$ ./myprogram`，当它被重定向到文件时像 csv`$ ./myprogram >> data.csv`

有可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T06:16:10.750

您可以使用该[`isatty`](http://linux.die.net/man/3/isatty)功能：

```
if (isatty(STDOUT_FILENO))
{
    /* Standard out is an interactive terminal */
}
else
{
    /* Standard out is something else (pipe, file redirect, etc.) */
} 
```

# php - 在 PHP 中使用 https curl_exec 调用发送和接收 JSON

> ID：14744781
> 
> 赞同：0
> 
> 时间：2013-02-07T06:13:03.320
> 
> 标签：php, curl

我正在尝试使用 PHP 进行 curl 调用。我的项目有这样的流程

*   我将用户重定向到服务器。
*   用户使用这些服务，服务器将他重定向到我的应用程序上的一个页面。
*   此时我想进行服务器到服务器调用以验证某些详细信息。

需要注意的一点 - 我发布 JSON 数据以及接收 JSON 数据作为响应。

我试过这个。我可以发送数据，但没有得到任何响应。

它是否正确？请帮忙！

```
$data = array("One" => "Onedata", "Two" => "Twodata");                                                                    
$JsonData = json_encode($data);
$ch = curl_init('https://exampleurl');                                                                      
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $JsonData);                                                                  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
'Content-Type: application/json',  
'Content-Length: ' . strlen($JsonData))                                                                       
);                                                                                                                   

$result = curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:15:14.170

尝试使用以下对我有用的代码。并确保 json_url 正确。当你在浏览器上运行它时，你应该得到一个输出。在使用 CURL 尝试之前，在浏览器上运行并查看是否获得了所需的输出。

```
$json_url  ='https://exampleurl';

// Initializing curl
$ch = curl_init( $json_url );

// Configuring curl options
$options = array(
CURLOPT_RETURNTRANSFER => true,
CURLOPT_HTTPHEADER => array('Content-type: application/json') 
);

// Setting curl options
curl_setopt_array( $ch, $options );

// Getting results
$results =  curl_exec($ch); // Getting jSON result string

$json_decoded = json_decode($results); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-25T11:26:28.390

正如您在评论中提到的：

问题在于主机的 SSL 验证。正确设置 SSL需要一些努力（参见[http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/) ），所以解决方法是添加以下两个选项：

```
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0); 
```

# ios - 尝试将 Flurry 分析导入我的应用程序委托...有什么建议吗？

> ID：14744805
> 
> 赞同：0
> 
> 时间：2013-02-07T06:14:13.280
> 
> 标签：ios, api, analytics, flurry

当我尝试添加代码时，我收到语义和解析问题。有谁知道我可以将它添加到我的应用程序的正确方法是什么？

第一组代码是我没有分析的原始代码，下一组代码是告诉我要放入我的应用程序的代码。有人可以建议我可以尝试的一组代码吗？

原始代码

```
(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:
(NSDictionary *)launchOptions
{
    CGRect frame = [[UIScreen mainScreen] bounds];

myWindow = [[UIWindow alloc] initWithFrame: frame];

if (myWindow)
{
    UIImageView *newView = [[UIImageView alloc] initWithFrame: frame];

    if (newView)
    {
        UIImage *image = [UIImage imageNamed: @"Launch.png"];

        if (image)
        {
            [newView setImage: image];
        }

        [newView setUserInteractionEnabled: YES];

        UIGestureRecognizer *newRecognizer = [[UITapGestureRecognizer alloc] initWithTarget: self action: @selector(refresh)];

        if (newRecognizer)
        {
            [newView addGestureRecognizer: newRecognizer];

            [newRecognizer release];
        }

        [myWindow addSubview: newView];

        [newView release];
    }

    [myWindow makeKeyAndVisible];

    myModel = [[NBSHomeModel alloc] init];

    [myModel setDelegate: self];

    [myModel reload];
}

return YES;
} 
```

这是 Flurry 指令中的代码

```
#import "Flurry.h"
- (void)applicationDidFinishLaunching:(UIApplication *)application 
{
 [Flurry startSession:@"YOUR_API_KEY"];
 //your code
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:44:18.077

您需要在 Flurry 中创建帐户，然后您的 Flurry **API_KEY**的 id正确。

现在我只是从下面的链接中下载一个 Zip 文件：-

[http://www.sendspace.com/file/y9nqcl](http://www.sendspace.com/file/y9nqcl)

在此 Zip 中，您有两个文件夹

*   **FlurryAnalytics**

*   **FlurryAppCircle**

将两者都添加到您的项目中。

现在在你的 AppDelegate.m 中导入这个`#import "FlurryAnalytics.h"`

并且在`didFinishLaunchingWithOptions`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    [FlurryAnalytics startSession:@"YOR_API_KEY"];

} 
```

**注意：-**它在 Flurry 站点中反映的应用程序分析可能需要一些时间才能显示图表

# python - 我想问如何搜索Google API的服务名称

> ID：14744807
> 
> 赞同：0
> 
> 时间：2013-02-07T06:14:19.983
> 
> 标签：python

我尝试使用

```
service = build(service_name, "v1", http=http) 
```

访问 Google Groups Provisioning API。但是，我尝试了不同的名称：配置、组配置等，但没有成功。有人知道 Groups Provisioning 服务的名称吗？如何搜索 Google Apps API 中可用的服务名称列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:29:18.263

Google Apps API 不能通过新的 API 客户端使用。您需要使用旧的 GData 客户端，如[Apps Provisioning API 页面](https://developers.google.com/google-apps/provisioning/)中所述。

要回答您的第二个问题，您可以使用[APIs Discovery Service](https://developers.google.com/apis-explorer/#p/discovery/v1/discovery.apis.list)列出所有新式 API 的名称。

# php - PHP - 如何将表单数据发布到 URL、等待响应然后做某事

> ID：14744808
> 
> 赞同：1
> 
> 时间：2013-02-07T06:14:24.650
> 
> 标签：php, post, curl, get

我将给出一个我需要能够做什么的基本示例，希望有人能指出我正确的方向，尽管我确定我要问的人是当他们面对自己时阅读。不管怎样，就到这里吧。

我在站点 Y 的页面上有一个表单（我们称之为 form.php），该表单看起来像这样（只要求输入用户名和密码）：

```
<form action="http://SiteX.com/validate.php" method="post">
Email Address: <input type="text" name="email">
Password: <input type="password" name="password">
<input type="submit">
</form> 
```

如您所见，表单托管在站点 Y 上，并将信息提交到站点 X 上的页面。

站点 X 上的 validate.php 检查站点 Y 提交的登录详细信息并返回登录详细信息是否有效，有点像这样（显然比这更复杂）：

```
$SubmittedEmail = $_POST['email'];
$SubmittedPassword = $_POST['password'];

$CrossReferenceEmail = 'someemail@dontcare.com';
$CrossReferencePassword = 'apassword';

if ( ($SubmittedEmail == $CrossReferenceEmail) && ($SubmittedPassword == $CrossReferencePassword) ) {
echo 'Valid';
} else {
echo 'Not Valid'; } 
```

我需要做的，我不知道该怎么做，是如何让“form.php”等待回复（无论登录详细信息是否有效），然后根据该回复做一些事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:33:06.937

```
<form id="Form" action="http://SiteX.com/validate.php" method="post">
Email Address: <input type="text" name="email">
Password: <input type="password" name="password">
<input type="submit">
</form>

$("#Form").submit(function(event) {

  /* stop form from submitting normally */
  event.preventDefault();

  /* get some values from elements on the page: */
  var $form = $( this ),
      e = $form.find( 'input[name="email"]' ).val(),
      p = $form.find( 'input[name="password"]' ).val(),
      url = $form.attr( 'action' );

  /* Send the data using post */
  var posting = $.post( url, { email: e,password:p } );

  /* Put the results in a div */
  posting.done(function( data ) {
   if(data=='valid')
   alert('login successful');
   elseif(data=='Not Valid')
   alert('login not successful');
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:39:44.950

非常基本和简单的方法是通过**java 脚本使用****httpRequest**并从站点 X 获取返回值，如果匹配则将数据提交到站点 Y 中的任何 php 文件。如果您想知道，我可以发送一个示例来帮助您。

 **这种方式对用户更友好，但需要客户端进程。另一种方法是使用获取内容功能。

**另一种方式：**

您可以使用站点 Y 上的**get.php文件并将数据提交到****get.php**。

在**get.php**文件中使用**file_get_content**函数并通过 get 方法提交用户名数据（添加到 url 的末尾，如示例）然后检查返回值（真或假）

例子 ：

```
$SubmittedEmail = $_POST['email'];
$SubmittedPassword = $_POST['password'];

$homepage = file_get_contents("http://www.example.com/x.php?email=SubmittedEmail &password=$SubmittedPassword&...[other parameters]"); 
```

在 www.x.com/x.php

您可以通过 get 方法获取电子邮件和密码并回显结果。

**$hompage**中的returnet 值是站点 x 上的 x.php 文件的结果（真或假或您在站点 x 文件 x.php 上回显的任何内容）

在站点 x.com/x.php 上这样做以获取数据并将结果返回到 y 站点：

```
 $SubmittedEmail = $_GET['email'];
 $SubmittedPassword = $_GET['password'];
if ( ($SubmittedEmail == $CrossReferenceEmail) && ($SubmittedPassword == $CrossReferencePassword) ) {
echo 'true';
} else {
echo 'false'; } 
```

更多帮助： http: [//php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:19:17.080

这样......您不能在表单传输后立即将 url 设置为“validate.php”，因此原始 form.php 及其代码不再可用。

您可以做的是将 formtransmission 更改为 ajax-javascript，它将等待 validate.php 的响应而不关闭 form.php ...然后您可以做任何您需要做的事情。

（这和卷曲有什么关系？）

[编辑]

将此 javascript 添加到 form.php html 输出

```
function validate()
{
    var e = $('email').value;
    var p = $('password').value; //jQuery is easier to type
    // the same as
    // var p = document.getElementById('password').value;
    var req = new Request({
        url: '/validate.php?',
        method: 'post',
        data: {'email' : e, 'password' : p},
        onComplete: function(response)
        {
            if (response == "Valid" ) 
            {
                //do what you want on success
            }
            else
            {
                // do what you want on unsuccessful login
            }
        }
    }).send();
} 
```

现在编辑表格（只是第一行）

```
<form onsubmit="validate();" method="post"> 
```

那应该做**

# angularjs - 为什么“ng-switch”-ing时事件停止被捕获

> ID：14744810
> 
> 赞同：2
> 
> 时间：2013-02-07T06:14:34.417
> 
> 标签：angularjs, angularjs-directive

我有一个文件上传指令，它在文件上传时触发事件（通过`scope.$emit`），然后在我的控制器中捕获（通过`scope.$on`）以更新进度条。文件上传指令被`ng-switch`删除，因此用户可以在文件上传时填写有关文件的其他信息。我希望进度条在他们执行此操作时不断更新。这在 1.0.2 版本中一切正常，但现在在 1.0.4 中似乎被破坏了。

[我创建的 jsFiddle](http://jsfiddle.net/uysAM/)大大简化了，但它显示了问题。当页面第一次加载时，该事件被指令触发，它被控制器捕获，一切都按预期更新。但是，如果您更改下拉列表以使指令`ng-switch`退出，则该事件将停止被捕获。如果您查看控制台，该事件仍在 gettting `$emit`-ed，但控制器只是停止捕获它。即使我把它`$on`放在`$rootScope`（[http://jsfiddle.net/uysAM/1/](http://jsfiddle.net/uysAM/1/)）上，它仍然有同样的问题。如果事件仍在`$emit`-ed 中，为什么范围会停止捕获它？

如果您将`<script>`顶部标签中的 src 更改为使用 1.0.2，它就可以正常工作。这是最新版本的一些新错误吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T23:57:15.080

这是一个范围问题。这是我的理解。

**foo=1 时的作用域链**

*   MyCtrl 的作用域 <- 我们在这里捕获
    *   ngSwitch 的 foo="1" 范围
        *   myDirective 的作用域 <- 我们在这里发出

作用域链是完整的，我们可以毫无问题地捕获发出的事件。

**当 foo=2 时作用域链发生变化**

*   MyCtrl 的作用域
    *   null <- 被销毁并设置为 null 以进行内存管理。
        *   myDirective 的作用域

范围链不再完整。发出的事件不会传播到 myDirective 清理的父范围之外。此清理可能是作为 1.0.4 中的功能添加的。

这是我对问题的解决方案。我使用 fileLoader 服务在指令和控制器之间共享状态。[http://jsfiddle.net/apBZX/](http://jsfiddle.net/apBZX/)

```
var myApp = angular.module("myApp", [])

myApp.controller('MyCtrl', function ($scope, $rootScope, fileLoader) {
    $scope.$watch(function () {
        return fileLoader.numberOfloadedFiles;
    }, function (numberOfLoadedFiles) {
        $scope.numberOfLoadedFiles = numberOfLoadedFiles;
    });
    $scope.foo = 1;
});

myApp.directive("myDirective", function (fileLoader) {
    return {
        restrict: 'A',
        replace: true,
        scope: {},
        template: '<div>I am the directive</div>',
        link: function (scope, element, attrs) {
            if (!fileLoader.isLoading) {
                fileLoader.loadFiles(scope);
            }
        }
    }
});

myApp.service("fileLoader", function () {
    return {
        numberOfloadedFiles: 0,
        isLoading: false,
        loadFiles: function (scope) {
            var self = this;
            setInterval(function () {
                scope.$apply(function(){
                    self.numberOfloadedFiles++;
                });
            }, 1000);
            self.isLoading = true;
        }
    };
}); 
```

# c# - 当 ModalDialog 关闭或按钮事件时更新 UpdatePanel

> ID：14744823
> 
> 赞同：0
> 
> 时间：2013-02-07T06:15:19.923
> 
> 标签：c#, asp.net, updatepanel, modal-dialog

我有两页。第一个有一个按钮和一个包含图像的 UpdatePanel。该按钮使用以下代码显示 ModalDialog：

```
window.showModalDialog('AjustarImagem.aspx', 
                                        null,
                                       'status:no;
                                        LOCATION: NO;
                                        TOOLBAR=NO ;
                                        DIRECTORIES: NO; 
                                        dialogWidth:250px;
                                        dialogHeight:300px;
                                        dialogHide:true;
                                        help:no;
                                        scroll:yes');  
                                        return false;"); 
```

我需要做的是在 ModalDialog 关闭或触发 ModalDialog 按钮的单击事件时更新 UpdatePanel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:48:15.783

在按钮的 onclick javascript 事件中使用 __doPostBack()：

```
<script type="text/javascript" >
        function ReloadPanel() {
            //debugger;
            // Realiza un postback parcial al panel de ajax.
            __doPostBack('<%=UpdatePanel1.ClientID %>', parametro);
        }
    </script> 
```

如果需要，还可以添加更新面板的加载事件以处理请求：

protected void UpdatePanel1_Load(object sender, EventArgs e) { // 获取参数字符串 arg = Request.Form["__EVENTARGUMENT"];

```
 if (string.IsNullOrEmpty(arg)) return;    

} 
```

查看这篇文章：[如何使用 __doPostBack()](https://stackoverflow.com/questions/3591634/how-to-use-dopostback)

希望这可以帮助。

# java - 图像列表的水平滚动

> ID：14744824
> 
> 赞同：0
> 
> 时间：2013-02-07T06:15:21.380
> 
> 标签：java, android

我试图在我的应用程序中对 5 个图像列表进行水平滚动。我在我的应用程序中编写了以下 XML。我面临的问题是它在屏幕的左侧和右侧留下了一个空白区域，即图像列表开始之前的空白区域和图像列表之后的一些空白区域。

XML

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:layout_gravity="center">

    <LinearLayout
        android:id="@+id/LinearLayout02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingRight="20dp"
            android:src="@drawable/people" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingRight="20dp"
            android:src="@drawable/people" />

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingRight="20dp"
            android:src="@drawable/people" />

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingRight="20dp"
            android:src="@drawable/people" />
    </LinearLayout>

</HorizontalScrollView> 
```

谁能帮助我如何删除这个不需要的空白区域？ ![在此处输入图像描述](../Images/773eb2775a1d7f7c9890e036d850c435.png) 我尝试了 NagarjunaReddy 的建议，但得到的结果如下图所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:56:27.477

我得到了我的问题的答案。实际上这个空白是因为我的移动系统操作系统android versin 4.0。我在android ver2.3中检查了我的同一个应用程序，无论如何我都没有得到任何空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:23:23.617

删除`android:paddingRight="20dp"`所有`<ImageView>`s

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:21:15.783

试试这个删除所有图像视图的填充`android:paddingRight="20dp"`

```
<LinearLayout
    android:id="@+id/LinearLayout02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_weight="1"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"          
        android:src="@drawable/people" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"            
        android:src="@drawable/people" />

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"            
        android:src="@drawable/people" />

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"           
        android:src="@drawable/people" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T08:02:23.967

它应该与操作系统版本无关。尝试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<LinearLayout
    android:id="@+id/LinearLayout02"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/people" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/people" />

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/people" />

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/people" />
</LinearLayout> 
```

你应该得到这样的东西： ![从图形布局编辑器](../Images/04cebe23f6ec21075aade19c24a0ad3a.png)

# jquery - CakePHP 在 Jquery 模式窗口中添加动作

> ID：14744830
> 
> 赞同：0
> 
> 时间：2013-02-07T06:15:33.900
> 
> 标签：jquery, cakephp, modal-dialog, cakephp-2.1

我正在使用 cakephp 2.1，并且我已经为类别控制器编写了添加操作。我在其中包含用于添加类别形式的 jquery 模态窗口。

模态代码如下。

```
<!-- Modal -->
<div id="AddModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
        &#215;
    </button>
    <h3 id="myModalLabel">Add Category</h3>
</div> 
<div class="modal-body">
    <?php echo $this -> Form -> create('Stock'); ?>
        <fieldset>
                <div class="control-group">
                     <?php echo $this -> Form -> label('Name'); ?>
                     <div class="controls">
                         <?php echo $this -> Form -> text('InventoryCategory.name', array('class' => 'input-xlarge', 'placeholder' => 'Enter Category name here...', 'required' => false)); ?>
                         <?php echo $this -> Form -> error('InventoryCategory.name', array('class' => 'error-message')); ?>
                     </div>
                 </div>
                 <div class="control-group">
                     <?php echo $this -> Form -> label('Parent Category'); ?>
                     <div class="controls">
                         <?php echo $this -> Form -> select('InventoryCategory.inventory_category_id', null, array('value' => '', 'class' => 'input-xlarge')); ?>
                         <?php echo $this -> Form -> error('InventoryCategory.inventory_category_id', array('class' => 'error-message')); ?>
                     </div>
                 </div>
                 <div class="control-group">
                     <?php echo $this -> Form -> label('Description'); ?>
                     <div class="controls">
                         <?php echo $this -> Form -> textarea('InventoryCategory.description', array('class' => 'input-xlarge', 'rows' => '3', 'placeholder' => 'Some description or notes goes in here....')); ?>
                         <?php echo $this -> Form -> error('InventoryCategory.description', array('class' => 'error-message')); ?>
                     </div>
                 </div>
                 <div class="control-group">
                    <div class="controls">
                        <?php echo $this -> Form -> button('Submit', array('class' => 'btn btn-primary')); ?>
                    </div>
                </div>
        </fieldset>
    <?php echo $this -> Form -> end(); ?>
</div> 
```

我已经包含了用于保存数据的 ajax 调用。javascript的代码如下。

```
 $('#AddModal').on('shown', function() {
        $.getJSON('<?php echo $this->Html->url(array('controller'=>'stocks', 'action'=>'categories', true)); ?>', function(data) {
            var options = '';
            $.each(data, function(key, value) { 
                options += '<option value="' + key + '">' + value + '</option>';
            });
            $("#InventoryCategoryInventoryCategoryId").html(options);
        })
    });

    $('#StockCategoriesForm').submit(function(e) {
        e.preventDefault();

        var name    = $("#InventoryCategoryName").val();
        var categoryId  = $("#InventoryCategoryInventoryCategoryId").val();
        var description   = $("#InventoryCategoryDescription").val(); 

        $.ajax({
            url: "<?php echo $this->Html->url(array('controller'=>'stocks', 'action'=>'add_category'))?>",
            type: "POST",
            cache: false,
            data: '{"InventoryCategory":{"name":"'+name+'", "categoryId": "'+categoryId+'", "description": "'+description+'"}}', // here build JSON object with your form data
            dataType: "json",
            contentType: "application/json",
            complete: function(result) {
                console.log(result);
                if(result.response == true) {
                    $("#InventoryCategoryName").val(null);
                    $("#InventoryCategoryInventoryCategoryId").val(null);
                    $("#InventoryCategoryDescription").val(null);
                    location.reload();
                    $('#AddModal').modal('hide');
                    alert('inserted');
                } else {
                    alert('not inserted');
                }
            }
        });
    }); 
```

类别正在保存，但模式本身并没有关闭，我只想要`Cakephp Model`验证错误`Jquery Modal`。这是我写的正确还是错误的，请给我一些解决方案。作品更受赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:54:57.203

location.reload() 很可能有问题。最简洁的方法是从 POST 调用中获取呈现的 HTML 而不是 JSON，并用它替换对话框内容。这样您就可以将表单构建留给 CakePHP。

成功后，您可以例如返回一个带有“关闭”按钮的窗口，或者嵌入一个关闭模式的标签。

```
var $form = $('#StockCategoriesForm');
$form.submit(function(e) {
    e.preventDefault();
    $.ajax({
        url: "<?php echo $this->Html->url(array('controller'=>'stocks', 'action'=>'add_category'))?>",
        type: "POST",
        cache: false,
        data: $form.serialize(),
        complete: function(result) {
            $('#AddModal').html(result);
        }
    });
}); 
```

# android - 滑动抽屉，抽屉的把手位置和宽度。

> ID：14744831
> 
> 赞同：0
> 
> 时间：2013-02-07T06:15:36.790
> 
> 标签：android, android-xml, android-sliding

我最近偶然发现了 Android 中的滑动抽屉，在创建了我的第一个实现相同功能的项目后，我遇到了一些问题。我在滑动抽屉内使用列表视图，为此我需要实现 onClickListener 并扩展 Activity，现在一切正常，尽管滑动抽屉打开并占据了视图中的几乎所有空间，我希望它打开只有半屏。我浏览了互联网上的各种帖子，要求我扩展 SlidingDrawer 并使用 onMeasure 方法，这对我来说是不可行的（或者是吗？）。其次，我想将手柄按钮放在顶部而不是中心。下面是我的代码：

```
activity_main.xml~~~>

<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout01"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:gravity="top"
>

<TextView
    android:text=""
    android:gravity="center|center_vertical"
    android:textColor="#000000"
    android:textSize="20dp"
    android:textStyle="bold"
    android:id="@+id/TextView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
</TextView>

<SlidingDrawer
    android:layout_width="wrap_content"
    android:id="@+id/SlidingDrawer"
    android:handle="@+id/slideButton"

    android:content="@+id/contentLayout"

    android:animateOnClick="true"
    android:layout_height="match_parent"

    android:orientation="horizontal">

        <Button 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/slideButton"

            >
        </Button>
        <LinearLayout
            android:layout_width="wrap_content"
            android:id="@+id/contentLayout"
            android:orientation="vertical"
            android:gravity="center"
            android:padding="10dip"
            android:background="#0080FF"
            android:layout_height="wrap_content">
            <ListView
                android:id="@android:id/list"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >
        </ListView>
    </LinearLayout>
</SlidingDrawer>
   </RelativeLayout> 

    .java file~~~~>

      public class slidingDrawerDemo extends ListActivity implements OnClickListener {

private ArrayAdapter<String> listAdapter ;  
Button slideButton,b1, b2,b3,b4;
SlidingDrawer slidingDrawer;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);
    slideButton = (Button) findViewById(R.id.slideButton);
    slidingDrawer = (SlidingDrawer) findViewById(R.id.SlidingDrawer);

    ListView LV = getListView();  //(ListView)findViewById(R.id.list);
    String []Test ={"Residential","Commercial","Customised Projects","SEZ","Brochure"};
    ArrayList<String> Plist = new ArrayList<String>(); 
    Plist.addAll(Arrays.asList(Test));
    listAdapter = new ArrayAdapter<String>(this, R.layout.list_dem, Plist);
    LV.setAdapter( listAdapter );

    LV.setOnItemClickListener(new OnItemClickListener() {
       public void onItemClick(AdapterView LV, View view,int position, long id) {

          Toast.makeText(slidingDrawerDemo.this,""+position, Toast.LENGTH_SHORT).show();

          if(position==0){
              initOne();
          }else if (position==1){
              initTwo();
          }else if (position==2){
              initThree();
          }else if (position==3){
              initFour();
          }else if (position==4){
              initFive();
          }

       }
       });

    slidingDrawer.setOnDrawerOpenListener(new OnDrawerOpenListener() {
        @Override
        public void onDrawerOpened() {
          //  slideButton.setBackgroundResource(R.drawable.closearrow);
        }
    });

    slidingDrawer.setOnDrawerCloseListener(new OnDrawerCloseListener() {
        @Override
        public void onDrawerClosed() {
          //  slideButton.setBackgroundResource(R.drawable.openarrow);
        }
    });
}

    My list_dem.xml file~~~> 

     <TextView xmlns:android="http://schemas.android.com/apk/res/android"  
      android:id="@+id/rowTextView"   
      android:layout_width="wrap_content"   
      android:layout_height="wrap_content"  
      android:padding="10dp"  
      android:textSize="16sp" >  
    </TextView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:19:34.477

我找到了答案：在我的 xml 中的 Slider 定义中：

```
 android:topOffset="100.5dp" 
```

# database - 从 OS X 上的 iTunes 获取曲目和文件名列表（或播放方式）

> ID：14744832
> 
> 赞同：0
> 
> 时间：2013-02-07T06:15:42.750
> 
> 标签：database, macos, app-store, itunes

在 OS X 上，有没有办法向 iTunes 询问它拥有的所有曲目，以及一些元数据（我最感兴趣的是播放次数）和曲目的文件名（或者，只是一种播放它们的方法也很好）。

我知道我可能会破解一些东西来阅读 iTunes 数据库，但我正在寻找一种**不被视为禁止进入 Mac App Store 的解决方案**。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:43:36.597

iTunes 是一个程序 - 不像 iOS 上那样是操作系统固有的不可移动部分 - 这就是为什么 OSX 上没有专用 SDK 的原因。您可以通过 AppleScript 通过 iTunes 访问。

Mac 应用商店中的一些应用程序只是 AppleScript 之上的 GUI。[http://dougscripts.com/itunes/category/mac-app-store/](http://dougscripts.com/itunes/category/mac-app-store/)

# objective-c - ASIHTTP 请求在 ios 6 中返回 NULL 响应

> ID：14744834
> 
> 赞同：1
> 
> 时间：2013-02-07T06:15:45.147
> 
> 标签：objective-c, ios5, ios6, asihttprequest

我正在 ios 中开发一个启用 ARC 的应用程序。在这里面，我有一个使用 .net Web 服务将图像上传到服务器的功能。Web 服务发送一个包含请求状态的 json 字符串，即成功/失败。我正在使用 ASI HTTP 请求来访问服务，并使用 sbjson 来解析响应。

我的情况，如果我在 ios6 设备中运行此图像上传功能，我从 .net Web 服务收到的响应随机显示为空 [10 或 15 次]。但是，在服务器端的日志文件中显示它是这样成功的，并且图像上传也在服务器中完成。

但是，此功能在 ios5 中运行良好。

任何人都可以帮助我们吗？

提前致谢。

# ios - iOS Ad-Hoc OTA 分发适用于 iOS 6，但在 iOS 5 上失败

> ID：14744840
> 
> 赞同：4
> 
> 时间：2013-02-07T06:16:02.170
> 
> 标签：ios, xcode, ad-hoc-distribution, ota

我的 Ad-Hoc 构建的无线 (OTA) 分发存在问题。使用基本 SDK 6.1、部署目标 5.0、架构 armv7 和 armv7s 构建通用 iPhone/iPad 应用程序。相同的 ad-hoc 构建在 iOS 6 设备（3 种不同的 iPhone5、一个 iPhone4 和 iPad2）上安装 OTA，但无法在 iOS 5 设备（iPhone4S 和 iPad1）上安装 OTA。

OTA 通过正确设置所有 MIME 类型的 IIS 发生（否则 iOS 6 将失败）。

在 iOS 5 设备上，它开始安装显示带有进度条的应用程序图标，第一个标题是“等待...”，然后更改为应用程序名称，然后警报视图显示说

> 无法下载应用程序
> 
> 目前无法下载。
> 
> 完成/重试

将设备连接到 Xcode 以查看管理器中的日志。控制台具有以下内容：

> apsd [48] : : 发生流错误：错误域 = NSPOSIXErrorDomain 代码 = 61“操作无法'-t -be -completed-。-Connection -refused-” -UserInfo-=-0-x-1-4- 7-0-8-0 -{-}

完全一样，包括“-”字符。

通过 iTunes 同步在相同的 iOS 5 设备上安装相同的 ad-hoc 构建按预期工作，没有错误。

帐户类型是“普通”开发人员帐户，而不是企业帐户。

我已经尝试从头开始创建所有配置文件。还没有尝试删除和创建新证书，希望它不是必需的。

应用程序不使用 iCloud 或推送，或任何东西。捆绑包中不包含 Entitlements.plist。

可能很重要的一点是，应用程序是使用 CocoaPods 构建的——一组构建为 Pod 目标的 3rd 方库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T00:59:02.883

好吧，您一定会惊讶地发现真正的原因是什么。

我最终撤销了所有证书，删除了配置文件，从 CSR 一直到设置构建环境。我确实尝试了权利和“获取任务允许”和其他东西。但这些都没有奏效。

在某个时候，我决定再看看用于分发的 IIS 服务器和 plist 文件。就这样，问题出在 plist 文件上。iTunes 艺术品图像文件名为“iTunesArtwork.png **”**，plist 文件中的 url 为`http://hostname/Mobile/iOS/iTunesArtwork`.

所以我将文件重命名为“iTunesArtwork”（删除了扩展名），这并没有解决问题，但我现在可以看到安装进度条快要结束了，状态消息从“正在下载”变为“正在安装”。在此之前，它在一开始就失败了，就在说“等待”之后。

最后，我把所有的东西都整理好，将文件命名为“iTunesArtwork.png”，并将 url 固定为`http://hostname/Mobile/iOS/iTunesArtwork.png`

这就是它起作用的时候。

我只能想出以下解释：

在安装开始之前，iOS 会检查 plist 中的所有 url 是否都指向有效资源。如果其中任何一个失败，iOS 5 将中止安装，而 iOS 6 至少可以容忍无效的艺术品 url。

在安装过程中，iOS 首先获取应用程序图标以将其显示在屏幕上，然后下载 ipa 文件，最后获取艺术品。在这里，iOS 5 有更严格的验证规则，它不喜欢像“iTunesArtwork”这样的名字，我认为它只是不喜欢没有扩展名的文件名。如果获取图稿失败，iOS 5 上的整个安装将中止。iOS 6 在这个阶段似乎忽略了错误。

我个人认为 iOS 5 的做法是正确的。验证所有 url 是否有效并且所有文件都具有正确的扩展名是一件好事。如果两个 iOS 版本都以相同的方式执行此操作，我会在一开始就偶然发现这个问题。

**UPD**

刚刚尝试在 Mac OS X 10.8 上运行 apache Web 服务器设置。可以肯定地说，与 IIS 不同，使用 apache 的 iOS 5 可以很好地容忍缺少的扩展，所以不仅仅是 iOS 5，而是 iOS 5 和 IIS 的混合会导致所有问题。

但是，如果我将诸如`http://hostname/Mobile/iOS/NoSuchFile`in plist 之类的东西放在 artifact 的位置，那么 iOS 5 将无法安装 OTA，而 iOS 6 甚至不会注意到任何东西并继续安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T16:52:55.420

向您的项目添加一个权利文件，并将其“get-task-allow”设置为“NO”。在我这样做之前，我也遇到过类似的问题；OTA 有时会起作用，有时不会。尽管苹果公司说它应该在没有权利文件的情况下工作，但似乎不再是这种情况了。

确保将“get-task-allow”设置回“YES”以进行正常开发/调试。

作为参考，这里是权利文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>keychain-access-groups</key>
    <array>
        <string>$(AppIdentifierPrefix)com.yourCompany.yourAppname</string>
    </array>
    <key>get-task-allow</key>
    <false/>
</dict>
</plist> 
```

当然，您需要将“yourCompany.yourAppname”替换为您的应用标识符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T00:32:53.087

我在 diawi 或 testflight 中遇到了这个问题。一旦它开始不起作用，您应该删除设备上部分下载的应用程序。

您是否尝试过在 ipa 之前发送和安装证书？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T19:36:46.123

根据我的经验，有几个步骤可以解决我们许多人都经历过的这个问题；

1.  确保您的设备 UDID 已在供应门户中注册并链接到您正在使用的供应配置文件。

2.  在签署应用程序之前（同时使用“存档”选项编译它），刷新到可用的最新配置文件，可能通过删除管理器中显示的旧配置文件并按底部的“刷新”，然后登录到您的开发者帐户.

3.  将签名身份设置为“分发”（Ad hoc）。如果您使用“Build”编译它并上传到像 Diawi 这样的服务，这至少会有所帮助。如果您确实使用了 Diawi 之类的服务，请上传您签署的移动配置文件（即 Ad-Hoc 文件），并让您的用户在安装应用程序之前通过 Diawi 提供的界面安装它。

4.  使用临时“分发”配置文件而不是“开发”配置文件为应用程序签名 - 这至关重要！

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T16:27:30.570

试试这个选择所有第三方库，不包括你在 xcode 中的项目，并在构建设置中将跳过安装设置为是。

# c# - 在循环外声明的 C# 变量在循环中分配但得到“未分配”编译错误

> ID：14744843
> 
> 赞同：3
> 
> 时间：2013-02-07T06:16:06.560
> 
> 标签：c#, variables, console-application

我正在为班级分配作业，但无法编译。我不断得到`"Use of unassigned local variable"`两者`multiplierString`和`MultiplcandString`。在 main 的顶部声明了它们，但它似乎没有在 while 循环内为它们分配值。如果我在循环之外强制一个值，错误就会消失。非常感激任何的帮助。谢谢。

这里发生了什么？

```
static void Main()
{

    bool goodInput = false;
    ConsoleKeyInfo cki;
    string multiplicandString;
    string multiplierString;
    string endProduct;
    string prompt;
    string response;
    Int64 TryNumber;

    prompt = "This program will multiply two numbers of reasonable length.";
    Console.WriteLine(prompt);
    Console.WriteLine();
    prompt = "Press the Escape (Esc) key to quit or any other key to continue.";
    cki = Console.ReadKey();

    if (cki.Key != ConsoleKey.Escape)
    {
        while (!goodInput)
        {
            prompt = "Please provide the multiplicand: ";
            Console.WriteLine(prompt);
            response = Console.ReadLine();

            if (Int64.TryParse(response, out TryNumber))
            {
                goodInput = true;
                multiplicandString = "a"; //TryNumber.ToString();
            }
            else
            {
                Console.WriteLine();
                prompt = "Invalid multiplicand entry. It must be all numbers.\a";
                Console.WriteLine(prompt);
                prompt = "Please try again.";
                Console.WriteLine(prompt);
            } // end if Int64.TryParse
        } // end while ! goodInput

        goodInput = false;

        while (!goodInput)
        {
            prompt = "Please provide the multiplier: ";
            Console.WriteLine(prompt);
            response = Console.ReadLine();

            if (Int64.TryParse(response, out TryNumber))
            {
                goodInput = true;
                multiplierString = "a"; //TryNumber.ToString();
            }
            else
            {
                Console.WriteLine();
                prompt = "Invalid multiplier entry. It must be all numbers.\a";
                Console.WriteLine(prompt);
                prompt = "Please try again.";
                Console.WriteLine(prompt);
            } // end if Int64.TryParse
        } // end while ! goodInput
          //multiplierString = "a"; //TryNumber.ToString();

        endProduct = MultiplyByRectangle(multiplicandString, multiplierString);

        Console.WriteLine("The result of the calculation is:");
        Console.WriteLine("\t" + endProduct);

    } // end Main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:23:07.047

C# 需要明确分配变量。意思是，变量必须先设置一个初始值，然后才能读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:18:12.450

在 C# 中，必须在第一次读取操作之前明确分配局部变量。在您的情况下，几个变量仅在循环中被初始化，而循环并不绝对肯定会运行。

如果用户`Esc`一次按键，这些变量真的会被取消分配，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:20:15.773

您收到错误是因为编译器无法确定您是否会进入 while 循环。您可以为它们分配一些默认值，例如 `null;

```
string multiplicandString = null;
string multiplierString = null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:29:47.453

在这种情况下，编译器无法猜测您声明的变量将被赋值。

如果它没有进入循环，即使它只移动到 else 块怎么办。

由于这些无法评估编译时间，因此它会提供最佳反馈作为错误

所以最好初始化所有变量，比如

```
string multiplicandString ="";

string multiplierString =""; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T06:59:11.710

尝试这个：

```
string multiplicandString = string.Empty;

string multiplierString = string.Empty; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-31T13:30:30.237

您遇到的问题是编译器没有证据证明这些变量有赋值。我不同意其他建议使用 null 或空和变异进行初始化的答案。

如果您将两个 while 循环拉到它们自己的函数中，返回字符串，您可以在声明它们时初始化它们。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-07T06:35:10.543

`TryParse`成功时，`multiplierString` *分配*。但是当输入无效时，`else`分支会运行，并且`multiplierString`不会*被*分配。然后在读取`else`块之后。`multiplierString`这是非法的。

# java - 读取 Cookie 创建日期（不是“到期日期”）|| 爪哇

> ID：14744846
> 
> 赞同：0
> 
> 时间：2013-02-07T06:16:13.950
> 
> 标签：java, cookies

我有一个用例，我想使用**cookie 创建日期时间作为条件**来执行某些操作。

现在我要应用的条件是，如果 cookie 的使用时间超过 5 天，则其他操作使用现有的 cookie。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:58:33.180

据我所知，系统存储的关于 cookie 的不是创建日期而是到期日期。因此，除非您尝试阅读最后修改的日期或其他内容（这在许多情况下不起作用），否则将无法阅读它。但是，如果 cookie 是由您设置的，您可以设置另一个保存创建时间的 cookie，甚至您可以组合您的 cookie 数据以包含创建时间

# java - 需要一个支持 JAVA 和 Oracle 的日期格式

> ID：14744851
> 
> 赞同：0
> 
> 时间：2013-02-07T06:16:37.757
> 
> 标签：java, oracle, date

我需要 24 小时内的日期格式和分钟，该日期格式应该适用于 JAVA 和 Oracle。任何人都可以建议一些对我有帮助的日期格式。

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:22:33.403

我认为 oracle jdbc-driver 会为您处理这个问题，但如果您需要更多控制，最好的选择可能是[ISO-8601](http://en.wikipedia.org/wiki/ISO_8601)。这可以转换为 java，如下所述：

*   [将符合 ISO 8601 的字符串转换为 java.util.Date](https://stackoverflow.com/questions/2201925/converting-iso8601-compliant-string-to-java-util-date)

并按照此处所述的甲骨文：

*   [如何将“1985-02-07T00:00:00.000Z”（ISO8601）转换为 Oracle 中的日期值？](https://stackoverflow.com/questions/8654292/how-to-convert-1985-02-07t000000-000z-iso8601-to-a-date-value-in-oracle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:18:44.790

格式为 yyyy-mm-dd 其中 y 代表年份，m 代表月份，d 代表日期

# android - 在具有四个单独字段的 Android 密码中，使用 textwatcher 中的 requestfocus() 移动到下一个字段时，前一个字段不会显示为点

> ID：14744852
> 
> 赞同：2
> 
> 时间：2013-02-07T06:16:43.073
> 
> 标签：android

在 android 中，我需要使用四个单个数字字段的密码，并且我使用了四个 edittext 视图。如果我们输入 4 个数字，它会自动填充四个字段。我已经通过使用 addTextChangedListener 完成了这项工作。但是除了问题之外，我的密码文件没有被点替换。我认为由于使用 requestfocus() 到下一个字段，前一个字段没有转换点。请帮我。

```
 passInput1.addTextChangedListener(new CustomTextWatcher(passInput1, passInput2));
  passInput2.addTextChangedListener(new CustomTextWatcher(passInput2, passInput3));
  passInput3.addTextChangedListener(new CustomTextWatcher(passInput3, passInput4)); 
```

我的 CustomWatcher 如下所示。

```
public class CustomTextWatcher implements TextWatcher {
      private EditText currentEditTextFiledId;
      private EditText nextEditTextFiledId;

         public CustomTextWatcher(EditText currentEditTextFiledId, EditText  nextEditTextFiledId) { 
        this.currentEditTextFiledId = currentEditTextFiledId;
        this.nextEditTextFiledId = nextEditTextFiledId;
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
         currentEditTextFiledId.setTransformationMethod(PasswordTransformationMethod.getInstance());
    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
         Integer textlength1 = currentEditTextFiledId.getText().length();

         if (textlength1 >= 1) { 

             nextEditTextFiledId.requestFocus();

         }
    }

    public void afterTextChanged(Editable s) {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T15:39:58.610

我找到了一种有趣的方法，只需将焦点移动到应该首先屏蔽的任何字段，然后再将焦点移动到下一个字段：

```
pinBox1.addTextChangedListener(new CustomTextWatcher(pinBox1, pinBox2, pinBox2));
pinBox2.addTextChangedListener(new CustomTextWatcher(pinBox2, pinBox3, pinBox1));
pinBox3.addTextChangedListener(new CustomTextWatcher(pinBox3, pinBox4, pinBox2));
pinBox4.addTextChangedListener(new CustomTextWatcher(pinBox4, pinBox4, pinBox3)); 
```

所以我传入另一个参数，以便更改字段，我们首先请求焦点：

```
public class CustomTextWatcher implements TextWatcher {
    private EditText currentEditTextFieldId;
    private EditText nextEditTextFieldId;
    private EditText editTextFieldToChange;

    public CustomTextWatcher(EditText currentEditTextFieldId, EditText  nextEditTextFieldId, EditText editTextFieldToChange) { 
        this.currentEditTextFieldId = currentEditTextFieldId;
        this.nextEditTextFieldId = nextEditTextFieldId;
        this.editTextFieldToChange = editTextFieldToChange;
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        currentEditTextFieldId.setTransformationMethod(PasswordTransformationMethod.getInstance());
    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        Integer textlength1 = currentEditTextFieldId.getText().length();

        if (textlength1 >= 1) { 
            editTextFieldToChange.requestFocus();
            nextEditTextFieldId.requestFocus();
        }
    }

    public void afterTextChanged(Editable s) {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:34:44.897

即使在密码模式下，Android 也总是显示最后输入的符号（因为按钮很小，很容易按错）。一般来说，四个数字字段听起来是个坏主意。如果用户按下退格键会发生什么？

[我会在http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)中使用单个密码字段`android:inputType="number"`

如果您真的想重新发明轮子，您可能有 4 个只读文本字段和 10 个用于输入数字的大按钮——至少，您将控制它们的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T12:16:24.963

Post Runnable to the Current EditText. You need to make current EditText to wait until it convert enterted text to dot,then call requestFocus().

```
currentEditTextFiledId.post(new Runnable(){
     Integer textlength1 = currentEditTextFiledId.getText().length();
     if (textlength1 >= 1) { 
         nextEditTextFiledId.requestFocus();
     }
}); 
```

# android - android从sdcard中选择图片

> ID：14744854
> 
> 赞同：2
> 
> 时间：2013-02-07T06:16:50.193
> 
> 标签：android, android-intent, android-imageview

我有`imageview`一个默认图像，我希望当用户单击 imageview 打开图像选择器然后他从 sdcard 中选择他的图像然后图像在 imageview 上，

这是我的图像视图

### xml

```
<ImageView
            android:id="@+id/ivImage"
            android:layout_width="100dip"
            android:layout_height="100dip"
            android:layout_marginLeft="10dip"
            android:contentDescription="@string/iv_undefinedImage"
            android:src="@drawable/undefinedimage" /> 
```

### 爪哇

```
ImageView iv ;
iv_image = (ImageView)findViewById(R.id.iv_signup_image);
        iv_image.setOnClickListener(this);
public void onClick(View v) {
switch (v.getId()) {
        case R.id.iv_signup_image:
break;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:31:37.903

我想这就是你要找的

```
if (Environment.getExternalStorageState().equals("mounted")) {
    Intent intent = new Intent();
    intent.setType("image/*");
    intent.setAction(Intent.ACTION_PICK);
    startActivityForResult(
        Intent.createChooser(
            intent,
            "Select Picture:"),
        requestCode);
} 
```

并处理回调

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Uri selectedImageUri = data.getData();
    String selectedImagePath = getPath(selectedImageUri);
    Bitmap photo = getPreview(selectedImagePath);
}

public String getPath(Uri uri) {
    String res = null;
    String[] proj = { MediaStore.Images.Media.DATA };
    Cursor cursor = getActivity().getContentResolver().query(uri, proj, null, null, null);
    if(cursor.moveToFirst()){;
        int column_index = cursor.getColumnIndexOrThrow(proj[0]);
        res = cursor.getString(column_index);
    }
    cursor.close();
    return res;
}

public Bitmap getPreview(String fileName) {
    File image = new File(fileName);

    BitmapFactory.Options bounds = new BitmapFactory.Options();
    bounds.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(image.getPath(), bounds);
    if ((bounds.outWidth == -1) || (bounds.outHeight == -1)) {
        return null;
    }
    int originalSize = (bounds.outHeight > bounds.outWidth) ? bounds.outHeight
        : bounds.outWidth;
    BitmapFactory.Options opts = new BitmapFactory.Options();
    opts.inSampleSize = originalSize / 64;
    return BitmapFactory.decodeFile(image.getPath(), opts);
} 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:22:31.700

您需要将图像从 SDCard 加载到位图，然后将位图图像设置为 ImageView：

```
Bitmap bmp = BitmapFactory.decodeFile("/path/to/file.png");
iv_image.setImageBitmap(bmp); 
```

如前所述`yahya`，您还可以从 SDCard 图像文件中创建一个可绘制对象，然后设置该图像可绘制对象：

```
iv_image.setImageDrawable(Drawable.createFromPath("/path/to/file.png")); 
```

您还应该确保在您的清单中包含对 SDCard 的读取（/写入）权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T06:33:18.243

试试下面的代码。

```
public class MainActivity extends Activity {
ImageView iv_image,img1;
int column_index;
  Intent intent=null;
// Declare our Views, so we can access them later
String logo,imagePath,Logo;
Cursor cursor;
//YOU CAN EDIT THIS TO WHATEVER YOU WANT
private static final int SELECT_PICTURE = 1;

 String selectedImagePath;
//ADDED
 String filemanagerstring;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    img1= (ImageView)findViewById(R.id.image1);
    iv_image= (ImageView)findViewById(R.id.iv_signup_image);

    img1.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            // in onCreate or any event where your want the user to
            // select a file
            Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(Intent.createChooser(intent,
                    "Select Picture"), SELECT_PICTURE);
       }
    });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == Activity.RESULT_OK) {
        if (requestCode == SELECT_PICTURE) {
            Uri selectedImageUri = data.getData();

            //OI FILE Manager
            filemanagerstring = selectedImageUri.getPath();

            //MEDIA GALLERY
            selectedImagePath = getPath(selectedImageUri);

            img.setImageURI(selectedImageUri);

           imagePath.getBytes();
           TextView txt = (TextView)findViewById(R.id.title);
           txt.setText(imagePath.toString());

           Bitmap bm = BitmapFactory.decodeFile(imagePath);
           iv_image.setImageBitmap(bm);

        }

    }

}

//UPDATED!
public String getPath(Uri uri) {
String[] projection = { MediaColumns.DATA };
Cursor cursor = managedQuery(uri, projection, null, null, null);
column_index = cursor
        .getColumnIndexOrThrow(MediaColumns.DATA);
cursor.moveToFirst();
 imagePath = cursor.getString(column_index);

return cursor.getString(column_index);
}

} 
```

我希望它会帮助你。

谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T06:36:06.240

```
private final int GET_USER_IMAGE_FROM_GALLERY = 10;

ImageView imageView = findViewById(R.id.ivImage);
imageView.setOnClickListener(new View.OnClickListener() {
@Override
public void onClick(View v) {
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent,
        "Select Picture"),
GET_USER_IMAGE_FROM_GALLERY);
});

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

if (requestCode == GET_USER_IMAGE_FROM_GALLERY) {

        if (data != null) {

            Uri selectedImageUri = data.getData();
            String selectedImagePath = getPath(selectedImageUri);

            try {
                File imageFile = new File(selectedImagePath);
                Bitmap bitmap = BitmapFactory.decodeFile(imageFile
                        .getAbsolutePath());

                imageView.setImageBitmap(bitmap);
            } catch (Exception e) {
            }

        }
}

private String getPath(Uri selectedImageUri) {

    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = getContentResolver().query(selectedImageUri,
            projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

# php - 在本地主机上设置项目时出现php会话错误？

> ID：14744858
> 
> 赞同：1
> 
> 时间：2013-02-07T06:17:08.723
> 
> 标签：php, phpmyadmin

我正在经历一个`php project`. 由于客户需要在设计部分进行一些更改，我已将所有文件和数据库下载到我的本地主机（LAMP）。我已将数据库导入到我的 phpmyadmin。之后，我对提到数据库用户名和密码的必要文件进行了更改。现在，当我从浏览器浏览该站点时，出现此错误

```
Notice: Use of undefined constant session - assumed 'session' in project/session.php 
```

之后，我刚刚打开了`session.php`错误所在的文件。该文件的代码类似于这样

```
<?php
session_start();
$_SESSION['example']="yes"; 
ini_set("url_rewriter.tags","");
ini_set(session.use_trans_sid, false);
ini_set("session.cookie_domain", ".projectsite.com");
ob_start();
session_start();
$_session_register["esb2b_username"];
$_session_register["esb2b_userid"];
$_session_register["esb2b_memtype"];
$_session_register["esb2b_adv_id"];
$_session_register["esb2b_adv_email"];
$_session_register["lang"];
?> 
```

我刚刚评论了这条线`ini_set(session.use_trans_sid, false);`，但我仍然收到错误消息。那么有人可以告诉我如何解决这个错误吗？任何帮助和建议都将是非常可观的。谢谢

**更新** 现在我已经像这样更改了我的文件

```
<?php
if(!isset($_SESSION)) {
session_start();
$_SESSION['example']="yes"; 
ini_set("url_rewriter.tags","");
ini_set("session.use_trans_sid", 0);
ini_set("session.cookie_domain", ".projectsite.com");
ob_start();
$_session_register["esb2b_username"];
$_session_register["esb2b_userid"];
$_session_register["esb2b_memtype"];
$_session_register["esb2b_adv_id"];
$_session_register["esb2b_adv_email"];
$_session_register["lang"];
}
?> 
```

在此之后我的错误说像

```
Warning: ini_set(): A session is active. You cannot change the session module's ini settings at this time in project/session.php on line 6 Notice: Undefined variable: _session_register in /project/session.php on line 10 Notice: Undefined variable: _session_register in project/session.php on line 11 Notice: Undefined variable: _session_register in project/session.php on line 12 Notice: Undefined variable: _session_register in project/session.php on line 13 Notice: Undefined variable: _session_register in project/session.php on line 14 Notice: Undefined variable: _session_register in project/session.php on line 15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:34:55.827

我不确定我试试这个。您已经开始了会话顶部，那么为什么您在中间部分再次声明。

```
<?php
session_start();
$_SESSION['example']="yes"; 
ini_set("url_rewriter.tags","");
ini_set($_SESSION['use_trans_sid'], false);
ini_set($_SESSION['cookie_domain'], ".projectsite.com");
ob_start();
$_session_register["esb2b_username"];
$_session_register["esb2b_userid"];
$_session_register["esb2b_memtype"];
$_session_register["esb2b_adv_id"];
$_session_register["esb2b_adv_email"];
$_session_register["lang"]; 
```

?>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:22:58.800

看你的第二行`ini_set`。它缺少报价。会话启动两次

没有任何其他错误可能导致此错误。也许你需要重新检查？

建议以

```
if(!isset($_SESSION)) {

  session_start();

} 
```

进一步：是`$_session_register`变量吗？如果不是，它看起来应该是`session_register("");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:24:12.493

只需将双引号括起来： `ini_set("session.use_trans_sid", false);`

您不需要运行会话两次。只有一个`session_start();`应该在那里

# javascript - 以变 量-Highcharts 的形式传递数据

> ID：14744861
> 
> 赞同：0
> 
> 时间：2013-02-07T06:17:21.590
> 
> 标签：javascript, jquery, ruby-on-rails-3, jquery-plugins, highcharts

我试图在我的系统中实现高图表（pai 图表），我试图从一个变量传递数据的值，该变量包含数据所需的精确数组方式的值，`alert(legend_with_values)`如果我提醒这个变量它返回`[['agent_total_members',24],['billing_failed',0],['members_inactive',0],['members_expired',0] ]`我是像这样将此值传递给数据字段

```
 legend_with_values;
 alert(legend_with_values); 
```

> 此警报返回 [['agent_total_members',24],['billing_failed',0],['members_inactive',0],['members_expired',0]

```
 options.series = [{
    type: 'pie',
    name: 'Legend',
    data: legend_with_values
  }];
  new Highcharts.Chart(options);` 
```

但是当我在数据中传递这个变量时，它会以这种方式出现。检查图像，它将每个字符作为字符串![e](../Images/363817cdba89f2724f202c7e6514f32b.png)

如果我将警报值静态地放在数据中，它会正确显示图表，有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:41:09.337

我在这里编辑了您的示例：http: [//jsfiddle.net/3rkd8/](http://jsfiddle.net/3rkd8/)并且所有内容均已正确生成。

```
var chart,
    legend_with_values = [['agent_total_members',24],['billing_failed',0],['members_inactive',0],['members_expired',0],['agent_total_members',45]];
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'Browser market shares at a specific website, 2010'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
            percentageDecimals: 1
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: legend_with_values
        }]
    });
}); 
```

如果您有不同的源代码并且问题仍然存在，您能否更新此示例？

# html - 我如何在 html 表中显示这个 mysql 结果？

> ID：14744863
> 
> 赞同：0
> 
> 时间：2013-02-07T06:17:22.683
> 
> 标签：html, mysql, presentation

**编辑：**嘿人，我已经在使用 php，我不是故意要问这个的。我在问如何在 8 列 html 表中显示 3 列 mysql 结果

```
--work table--                                               --crew table--

date           |   hours                                     date   |    name   
2013-02-03(Sun)     8                                    2013-02-03     john
2013-02-04(Mon)     7                                    2013-02-03     sam 
                                                         2013-02-03     peter
                                                         2013-02-04     john
                                                         2013-02-04     sam 
```

我有这两张表来记录员工的工作时间。
我需要将此数据显示为时间表。

但是我如何在下面的这个 html 表中显示 8 列？

我的意思是假设如果你运行这个查询：

```
SELECT hours, name, DAYNAME(work.date) day
FROM work 
LEFT JOIN crew ON work.date = crew.date
WHERE WEEK(work.date) = 5 
```

它将显示 3 列。那么如何构建这个 html 表呢？

**这个mysql结果**

```
hours    name    day
  8      john   Sunday
  8      Sam    Sunday
  8      Peter  Sunday
  7      John   Monday
  7      Sam    Monday 
```

**这个 html 表（如何？）**

```
Name    Sunday   Monday  Tuesday..(day name can be written in html)
John      8        7       ...
Sam       8        7       ...
Peter     8        -       ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:27:51.027

修改这个.......如果你使用php

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("my_db", $con);

$result = mysql_query("SELECT * FROM Persons");

while($row = mysql_fetch_array($result))
  {
  echo $row['FirstName'] . " " . $row['LastName'];
  echo "<br />";
  }

mysql_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:17:05.557

**警告**：我不是 PHP 程序员，所以下面充其量是伪代码，并且包含很多语法错误（更不用说任何缺失的错误处理，甚至是 html 布局）。我希望无论如何都能得到这个想法。任何人都可以随意编辑

```
$result = mysql_query("query here");

// a double nested array
// $weekdays['Sunday']['Peter'] will be the hours peter working on sunday 
$weekdays = [];
// a list of all persons in the table
$persons = [];

while($row = mysql_fetch_array($result))
{
  $hours = $row[0];
  $person = $row[1];
  $weekday= $row[2];

  if (!$weekdays[$person]) {
     $weekdays[$person] = [ $person => $hours ];
  } else {
     $weekdays[$person][$weekday] = $hours;
  }
  if (! $person in $persons) {
    $persons[] = $person;
  }
}

// then unroll in two loops
for ($person in $persons) {
  print '<tr><td>'.$person.'</td>'
  for ($weekday in [ "Sunday", "Monday", ...]) {
     print '<td>'.$weekdays[$weekday][$person].'</td>'
  }
  print '</tr>'
} 
```

# c# - 如何在wpf datagrid中组合多个标题

> ID：14744864
> 
> 赞同：3
> 
> 时间：2013-02-07T06:17:23.980
> 
> 标签：c#, wpf, wpfdatagrid

![在此处输入图像描述](../Images/9e162a588644c40e251d7ef127067cf9.png)我想结合这两列“赌注”和“游戏”。

我想使用 wpf datagrid 将两列合并为一列。

我的 DataGrid 如下所示。！[在此处输入图像描述][2]！[在此处输入图像描述][3]

```
 <DataGrid.CellStyle>
                    <Style TargetType="{x:Type DataGridCell}">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Effect">
                            <Setter.Value>
                                <DropShadowEffect BlurRadius="0" Color="#FF000000" Direction="-60" Opacity="0.32" ShadowDepth="1"/>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Margin" Value="10,0,0,0" />
                        <Setter Property="VerticalContentAlignment" Value="Bottom"/>
                    </Style>
                </DataGrid.CellStyle>
                <DataGrid.RowStyle>
                    <Style TargetType="{x:Type DataGridRow}">
                        <Setter Property="FontSize" Value="12"/>
                        <Setter Property="FontFamily" Value="Arial"/>
                        <Setter Property="Foreground" Value="#404040"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="DataContext">
                            <Setter.Value>
                                <TextBlock Margin="10,0,0,0" TextWrapping="Wrap" Text="{Binding}">
                                    <TextBlock.Effect>
                                        <DropShadowEffect BlurRadius="0" Color="#FF000000" Direction="-60" Opacity="0.32" ShadowDepth="1"/>
                                    </TextBlock.Effect>
                                </TextBlock>
                            </Setter.Value>
                        </Setter>

                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.RowBackground >
                    <ImageBrush ImageSource="/ClientApplication;component/Images/second_row_bg.png"/>
                </DataGrid.RowBackground>
                <DataGrid.AlternatingRowBackground>
                    <ImageBrush ImageSource="/ClientApplication;component/Images/bonus_progress_bg.png"/>
                </DataGrid.AlternatingRowBackground>

                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="{x:Type DataGridColumnHeader}">

                        <Setter Property="VerticalContentAlignment" Value="Center" />
                        <Setter Property="ContentTemplate" >
                            <Setter.Value>
                                <DataTemplate>

                                        <TextBlock Margin="10,0,0,0" TextWrapping="Wrap" Text="{Binding}">
                                        <TextBlock.Effect>
                                            <DropShadowEffect BlurRadius="0" Color="#FF000000" Direction="-60" Opacity="0.32" ShadowDepth="1"/>
                                        </TextBlock.Effect>
                                    </TextBlock>

                                </DataTemplate>
                            </Setter.Value>
                        </Setter>

                        <Setter Property="Background">
                            <Setter.Value>
                                <ImageBrush ImageSource="/ClientApplication;component/Images/table_bg_header.png"/>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="BorderBrush">
                            <Setter.Value>
                                <ImageBrush   ImageSource="/ClientApplication;component/Images/titel_bg.png"/>
                            </Setter.Value>
                        </Setter>

                        <Setter Property="Foreground" Value="#404040" />
                        <Setter Property="BorderThickness" Value="0, 0, 1, 0"/>
                        <Setter Property="Height" Value="26" />
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="FontFamily" Value="Arial"/>

                    </Style>
                </DataGrid.ColumnHeaderStyle>

                <DataGrid.Columns>

                    <DataGridTextColumn  Width="125" Header="Table" Binding="{Binding Path=Table}">

                    </DataGridTextColumn>

                    <DataGridTextColumn  Width="102"   Header="Stakes" Binding="{Binding Path=Stakes}"  />
                    <DataGridTextColumn  Width="95" Header="Game" Binding="{Binding Path=Game}" />
                    <DataGridTextColumn  Width="87" Header="Type" Binding="{Binding Path=Type}" />
                    <DataGridTextColumn  Width="83" Header="Players" Binding="{Binding Path=Players}"  />
                    <DataGridTextColumn  Width="117" Header="Average Pot" Binding="{Binding Path=Average}"   />
                    <DataGridTextColumn  Width="65" Header="H/Hr" Binding="{Binding Path=hhr}"  />
                </DataGrid.Columns>

            </DataGrid> 
```

请对此发表重要评论。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:13:34.500

如果您可以将其设置为只读，那么简单的方法是再绑定一个属性 - `StakesAndGame`：

```
public string StakesAndGame
{
   get { return string.Format("{0}   {1}", Stakes, Game); }
} 
```

并添加使用它的列：

```
<DataGridTextColumn  Width="102" Header="Stakes" Binding="{Binding StakesAndGame}"  /> 
```

只是不要忘记`OnPropertyChanged`在赌注或游戏更改时调用该属性。或者您可以编写一个值转换器并将两列组合在一起，但它需要比前一个更多的编码。

如果你需要它们是可写的，那就更难了，我真的不推荐这种方法。但如果你仍然需要它，你可以`DataGridTemplateColumn`在 [这个答案](https://stackoverflow.com/a/6961296/1021555)中玩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:15:17.503

你可以使用 a`DataGridTemplateColumn`来做你想做的事：

```
<DataGridTemplateColumn Header="Stakes">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Path=Stakes}" />
                <TextBlock Text="{Binding Path=Game}" />
            </StackPanel>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

# c# - 访问 ListView InsertItemTemplate 中的控件

> ID：14744866
> 
> 赞同：1
> 
> 时间：2013-02-07T06:17:39.080
> 
> 标签：c#, asp.net

我在列表视图 InsertItemTemplate 中有一个 LinkBut​​ton。我想从后面的代码中设置谁的可见性。我正在使用此代码，但似乎在应用断点时控件未达到 InsertItemTemplate。它只是停留在 ItemTemplate 中。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Session["UserId"].ToString() == Request.QueryString["Id"].ToString())
    {

        foreach (ListViewItem item in lvAlbums.InsertItem.Items)
        {
            LinkButton linkButton = item.FindControl("LinkButton1") as LinkButton;
            if (linkButton != null)
                linkButton.Visible = false;
        }
    }
} 
```

源代码：

```
<form id="form1" runat="server">
    <asp:ListView ID="lvAlbums" runat="server"
            DataSourceID="SqlDataSource1" GroupItemCount="3" 
            InsertItemPosition="LastItem">            
            <LayoutTemplate>                
                    <table border="1">
                       <tr ID="groupPlaceholder" runat="server">
                       </tr>
                    </table>                       
            </LayoutTemplate>                                              
            <GroupTemplate>
                    <tr>
                        <td ID="itemPlaceholder" runat="server">
                        </td>
                    </tr>
             </GroupTemplate>             
             <ItemTemplate>
                    <td id="Td3" width="150px" height="150px" align="center" style="background-color: #e8e8e8;color: #333333;">
                    <asp:HiddenField ID="hfPhotoID" runat="server" Value='<%# Eval("DefaultPhotID") %>' />
                    <a href='<%# "Photos.aspx?AlbumID="+Eval("AlbumID") %>'> 
                    <asp:Image CssClass="Timg" runat="server" ID="imPhoto" ImageUrl='<%# "ThumbNail.ashx?ImURL="+Eval("Photo") %>' />
                    </a>
                    <br />                    
                    <b><asp:Label ID="lblAlbumName" runat="server" Text='<%# Eval("AlbumName") %>'></asp:Label>   </b>
                    </td>                
                </ItemTemplate>

                <InsertItemTemplate>
                <td id="Td3" width="150px" height="150px" runat="server" align="center" style="background-color: #e8e8e8;color: #333333;">
                    <asp:LinkButton ID="LinkButton1" runat="server" PostBackUrl="~/CreateAlbum.aspx"> Create New Album1</asp:LinkButton>
             <%--   <a href="CreateAlbum.aspx" id="createalbumlink" runat="server">                    
                    Create New Album
                </a>--%>
                </td>              
                </InsertItemTemplate>             
            </asp:ListView>

        &nbsp;<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:SLIITComDBConnectionString %>" 

        SelectCommand="SELECT Album.AlbumID, Album.DefaultPhotID, Album.AlbumName, PhotAlbum.Photo FROM Album INNER JOIN PhotAlbum ON Album.DefaultPhotID = PhotAlbum.PhotoID where album.userid=@userid">
       <SelectParameters>
       <asp:QueryStringParameter Name="userid" Type="int32"  QueryStringField="id" />

         <%--<asp:SessionParameter Name="userid" Type="String"  SessionField="UserId" />--%>
</SelectParameters>
        </asp:SqlDataSource>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:23:14.063

~~[访问和修改ItemDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound.aspx) 中listview的ItemTemplate中的LinkBut ​​ton而不是`page_load`~~

 ~~```
protected void ContactsListView_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    Label EmailAddressLabel;
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        LinkButton linkButton = e.item.FindControl("LinkButton1") as LinkButton;
        if (linkButton != null)
            linkButton.Visible = false;
    }
} 
```~~  ~~**编辑**，根据评论。您可以在 Page_Load 上隐藏 InsertItem 或其中的控件。

**在 InsertItem 模板中隐藏特定控件**

* * *

当您尝试隐藏 InsertItemTemplate 中的所有项目时，您可以访问 InsertItem 模板并使用 FindControl 在其中查找控件。您在带有 id 的 InsertItem 模板中有 LinkBut​​ton `LinkButton1`，您可以通过首先在 InsertItem 中查找来隐藏它

```
((LinkButton)lvAlbums.InsertItem.FindControl("LinkButton1")).Visible = false; 
```

**隐藏整个 InsertItem 模板**

* * *

您可以使用属性完全隐藏`InsertItem`模板。`InsertItem` `Visible`

```
lvAlbums.InsertItem.Visible = false; 
```~~

# jenkins - 声纳 - 通过詹金斯运行声纳时出现 OutOfMemoryError Java 堆空间

> ID：14744870
> 
> 赞同：2
> 
> 时间：2013-02-07T06:18:04.610
> 
> 标签：jenkins, sonarqube, sonar-runner

我正在使用 jenkins 通过使用 Ant 进行构建。我还通过“调用独立声纳分析”在这个詹金斯作业上配置声纳。一切都很好，直到构建过程和构建成功创建。现在声纳执行开始，一段时间后我得到一个错误

“线程“主”org.sonar.batch.bootstrapper.BootstrapException 中的异常：java.lang.OutOfMemoryError：Java 堆空间

构建步骤“调用独立声纳分析”将构建标记为失败“...

我为解决这个问题所做的一切是：

1.  通过增加java堆大小

    在声纳的 sonar-runner.bat 文件中将 %SONAR_RUNNER_OPTS% 替换为 -Xms256m -Xmx1024m。

2.  修改 Sonar_Way 质量配置文件，并在其中仅激活一两条规则，以避免违反规则。

然后运行 ​​build 但仍然得到相同的 java heap 错误。我要补充的一件事是我的项目源文件夹大小约为 40mb，这意味着它是一个比较大的项目。

任何人都可以帮我解决这个问题吗？我还应该做些什么来完成这项工作。您的回复将是可观的..在此先感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:00:31.987

以下是您可以尝试的其他一些事情：

*   删除以下所有附加插件：PDF、build-breaker、quality-index、技术债务。并尝试新的分析。

*   再次增加 Java 堆大小 (-Xms512m -Xmx1024m)

*   使用“sonar.exclusions”排除部分代码，并查看可以一次分析而不会失败的最大源代码量

*   将您的大项目拆分为小模块并使用[Sonar 的多模块功能](http://docs.codehaus.org/display/SONAR/Analyzing+with+Sonar+Ant+Task#AnalyzingwithSonarAntTask-Multi-moduleProject)

# java - Java 对象强制转换行为异常

> ID：14744877
> 
> 赞同：2
> 
> 时间：2013-02-07T06:18:44.947
> 
> 标签：java, object, casting, subclass, superclass

抱歉，如果以前出现过这种情况，但我没有看到有关此的其他线程。但是如果有的话，请给我链接。

这里我有一个简单的程序。当它运行时，它会打印出“6 4”

```
public static void main(String[] args) {
    Foo foo = new Foo();
    foo.t = 6;
    foo.f = 4;

    Bar b = new Foo();

    ArrayList<Bar> list = new ArrayList<Bar>();
    list.add((Bar) foo);

    Foo foo2 = (Foo) list.get(0);

    System.out.println(foo2.t + " " + foo2.f);
}

static class Bar {
    int t;
}

static class Foo extends Bar {
    int f;
} 
```

这看起来很奇怪，因为我认为当我将 Foo 添加到列表时，它会删除 f 字段，因为列表包含没有 f 的 Bars。

但似乎 f 在被投射到 Bar 后仍然存在。有人可以解释这是为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T06:21:29.903

即使您施放和取消施放它 n 次，实际对象也将保持不变。
**铸造从不添加/删除/更改对象属性。**

```
Bar b = new Foo(); 
```

这里 reference 是 type `Bar`，实际 object 是 type `Foo`。作为`Foo`扩展`Bar`，这意味着它也具有属性`f`和`t`(Inherited from `Bar`)。

```
list.add((Bar) foo); 
```

在这里，您将其转换为 Bar (Upasting)，但实际对象未更改。

```
(Foo) list.get(0); 
```

在这里，您将其转换回`Foo`静止的对象类型`Foo`，其原始值为`t`和`f`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:29:04.103

这不是多态性的工作方式。它*不会从特定*对象中删除任何内容。你可以这样想：

*   内存中有实物
*   您可以对该对象有不同的引用：Foo、Bar、Object 等。
*   真实对象不关心引用 - 如果您创建新引用，它不会修改
*   但是每个引用都决定了您可以通过此引用访问对象的方式。

Foo 的每个实例都可以视为 Bar 的实例。但是在**显式转换**之后，您可以再次将此实例作为 Foo 操作。如果它最初是 Bar，那么这个转换将在运行时失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T06:21:51.870

在 Java 中，字段不是多态的。

这就是为什么你对此感到困惑。

因此，即使您添加`Foo`到列表中，它`f`也将作为它的实际对象存在`Foo`。

**[以下摘自 Code Ranch - 由 Jim Yingst](http://www.coderanch.com/t/392179/java/java/Polymorphism-data-members)**

**这是Java的设计还是限制或我的误解？**

*这是设计使然。字段的动态解析会使事情运行得更慢，而且真的没有理由需要它，因为您可以将字段设为私有并使用动态解析的方法访问它们。所以字段是在编译时解析的。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:28:00.307

对先前答案的重要补充：将对象添加到列表不会以任何方式更改该对象。因此，如果对象中有一个属性，它会保持不变。

其余的混淆是一个称为多态的特性。由于 Foo 是 Bar，您始终可以将其视为 Bar，但由于 Foo 是经过修改（扩展）的 Bar，它的行为可能与标准 Bar 对象不同。

我希望它有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T06:28:10.677

就像当您将类型转换为超类变量时，您只是无法访问对象的子类属性，但对象保持不变。只是暴露`get() and set() methods`, 的包装被改变了。您将看不到子类`getter-setter`方法 API。但是当您将类型转换回子类（基本上展开）时，子类 getter setter 方法对您再次可见。

**对象始终保持不变。**

# android - GPS不显示地点

> ID：14744881
> 
> 赞同：0
> 
> 时间：2013-02-07T06:19:11.280
> 
> 标签：android, google-maps, gps, google-places-api

嗨，我开发了一个应用程序，它使用 google places api 来显示地点列表，问题是它同时使用 gps 和互联网来显示地点。

现在我的问题是，当我在移动设备上运行应用程序时，只有当我在模拟器中运行应用程序并手动传递坐标然后使用这个 apk 它才会显示位置，问题是即使当我改变了它显示相同结果的地方。

这是我正在检查 GPS 的课程。

```
public class GPSTracker extends Service implements LocationListener {

    private final Context mContext;

    // flag for GPS status
    boolean isGPSEnabled = false;

    // flag for network status
    boolean isNetworkEnabled = false;

    // flag for GPS status
    boolean canGetLocation = false;

    Location location; // location
    double latitude; // latitude
    double longitude; // longitude

    // The minimum distance to change Updates in meters
    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

    // The minimum time between updates in milliseconds
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

    // Declaring a Location Manager
    protected LocationManager locationManager;

    public GPSTracker(Context context) {
        this.mContext = context;
        getLocation();
    }

    public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext
                    .getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
                // no network provider is enabled
            } else {
                this.canGetLocation = true;
                if (isNetworkEnabled) {
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS Enabled", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

    /**
     * Stop using GPS listener
     * Calling this function will stop using GPS in your app
     * */
    public void stopUsingGPS(){
        if(locationManager != null){
            locationManager.removeUpdates(GPSTracker.this);
        }       
    }

    /**
     * Function to get latitude
     * */
    public double getLatitude(){
        if(location != null){
            latitude = location.getLatitude();
        }

        // return latitude
        return latitude;
    }

    /**
     * Function to get longitude
     * */
    public double getLongitude(){
        if(location != null){
            longitude = location.getLongitude();
        }

        // return longitude
        return longitude;
    }

    /**
     * Function to check GPS/wifi enabled
     * @return boolean
     * */
    public boolean canGetLocation() {
        return this.canGetLocation;
    }

    /**
     * Function to show settings alert dialog
     * On pressing Settings button will lauch Settings Options
     * */
    public void showSettingsAlert(){
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

        // Setting Dialog Title
        alertDialog.setTitle("GPS is settings");

        // Setting Dialog Message
        alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

        // On pressing Settings button
        alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int which) {
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                mContext.startActivity(intent);
            }
        });

        // on pressing cancel button
        alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }

    @Override
    public void onLocationChanged(Location location) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

} 
```

我正在关注本[教程](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)。

我无法找到问题所在。我启用了 GPS 和 WiFi，但它没有解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:49:33.277

### ****请尝试所有 1 到 7 个地图示例****

 **第一个示例链接如下。

[http://mirnauman.wordpress.com/2012/01/30/using-google-maps-in-android-development-tutorial-part-1/](http://mirnauman.wordpress.com/2012/01/30/using-google-maps-in-android-development-tutorial-part-1/)**

# ruby-on-rails - 在 ruby on rails 中使用 dataTable 时如何为每行添加复选框？

> ID：14744882
> 
> 赞同：2
> 
> 时间：2013-02-07T06:19:15.057
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jquery-datatables

我在我的 ruby​​ on rails 应用程序中使用 DataTables。它也适用于表格工具。但我想在数据表中的每行添加复选框以执行批处理操作。[我搜索了官方网站](http://www.datatables.net)中的所有示例，但找不到复选框。

我想在我的数据表中执行批量**删除**操作。

谁能建议我在我的数据表中添加复选框？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T06:42:19.663

我不确定`dataTables`它是否提供直接删除机制。但这就是我在普通轨道上所做的。让我们以产品为例。在您的视图文件中有类似的内容：

```
<%= form_for('Product', :as => 'products', :url => delete_selected_products_path) do |f| %>
  <%= f.button :submit, 'Delete Selected', :class => 'btn-danger product' %>

  <div class="clear">&nbsp;</div>

  <table>
    <thead>
      <tr>
        <th class="select-row"></th
        <th>Product Name</th>
        <th>Description</th>
        <th>Price</th>
        <th class="actions"></th>
      </tr>
    </thead>

    <tbody>
      <% @products.each do |product| %>
        <tr>
          <td class="first-column"><%= check_box_tag 'ids[]', product.id, false, :class => 'table-row-checkbox' %></td>
          <td><%= product.name %></td>
          <td><%= product.description %></td>
          <td><%= product.price %></td>
          <td><%= link_to "View & Edit", product_path(product) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %> 
```

并在您的**ProductsController**中将 delete_selected 操作定义为

```
def delete_selected
  params[:ids].each do |id|
    product = Product.find(id)
    product.destroy
  end unless params[:ids].blank?
  redirect_to products_path, :notice => 'Selected products are deleted successfully!'
end 
```

并在您`routes.rb`添加 delete_selected 作为产品资源的集合：

```
resources :products do
  post :delete_selected, :on => :collection
end 
```

如果需要，您可以使用 AJAX。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:20:36.393

Datatables.net 提供了两种删除方式。

1) [tableObject].fnDeleteRow([rowToDelete]) - 一次删除一行

2) [tableObject].fnClearTable() - 清除整个表格

如果您使用的是 AJAX 源代码，那么您将使用：

```
var oTable = ("#MyTable").datatables({
    "aoColumnDefs" : [
        {
            "fnRender" : function(oObj, sVal){
                //oObj.aData[columnIndex] will get the value for the column
                //sVal is the value of the column being updated
                return sVal + "<input type='check'>";
            }, 
        "aTargets" : [ColumnIndexToTarget]}
     ]});

function OnDeleteButtonClick(){
    $.each(oTable.$("tr").filter("input:checked"), function(index, data){
        oTable.fnDeleteRow(data);
    });
} 
```

# java - 使用 JPQL 对非实体结果进行类型化查询

> ID：14744887
> 
> 赞同：1
> 
> 时间：2013-02-07T06:19:40.890
> 
> 标签：java, jpa, jpql

```
TypedQuery<UserNameAndPostCount> query = entityManager.createQuery(
  "select new com.loki2302.JPQLTest$UserNameAndPostCount" + 
  "(u.userName, count(p.id)) " +
  "from User u " + 
  "left join u.posts p group by u.userName", UserNameAndPostCount.class);

List<UserNameAndPostCount> resultList = query.getResultList(); 
```

`com.loki2302.JPQLTest$UserNameAndPostCount`在 JPQL 查询文本中没有硬编码的情况下是否有任何“官方”方式可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:34:10.617

像这样的查询

```
entityManager.createQuery("SELECT u.userName, count(p.id) FROM User u LEFT JOIN u.posts p GROUP BY u.userName", UserNameAndPostCount.class); 
```

可能会在一些 JPA 实现上工作，当然[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_2)旨在做这些事情。毕竟，最后一个参数是结果类，所以它基本上是说用这些结果字段作为参数创建我该类型的对象（或使用名称与这两个结果字段一致的 setter），你可以很容易地把*“AS { alias}"*在 select 子句中获取结果字段以匹配结果类中的 bean 属性名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:37:39.870

为了避免这种硬编码，您可以使用 entityManager 接口的 createNamedQuery(String) 。要使用此方法，您必须在模型（实体类）中创建 NamedQueries 并使用 Query 对象而不是 TypedQuery。

# youtube-api - Youtube：Python：如何从播放列表项中提取（或以其他方式找到）uri？

> ID：14744890
> 
> 赞同：1
> 
> 时间：2013-02-07T06:19:49.840
> 
> 标签：youtube-api

YouTube API 文档状态：

"检索播放列表信息

给定一个 YouTubePlaylistEntry（代表一个特定的播放列表），您可以获得一个包含 YouTubePlaylistVideoEntry 对象的 YouTubePlaylistVideoFeed。如上所述，这些对象代表播放列表中的各个视频（带有可选的自定义标题和说明）。您可以通过将播放列表的 URI 传递给 YouTubeService 对象的 GetYouTubePlaylistVideoFeed 方法来获取此提要："

问题：从 youtube 播放列表提要中检索到 youtube 播放列表后，如何从播放列表项中提取（或以其他方式找到）uri 以将其提供给 GetYouTubePlaylistVideoFeed 方法？

API 文档似乎跳过了该步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:36:39.067

试试 API V3.0 怎么样？这是一个使用新的 YouTube API V3.0 和 Python 客户端库的代码示例，该库可以遍历您自己的上传播放列表：[http ://code.google.com/p/youtube-api-samples/source/browse/samples/python/my_uploads .py](http://code.google.com/p/youtube-api-samples/source/browse/samples/python/my_uploads.py)。

# magento - 在 Grid 的 Action 列中获取 admin/sales_order/view/order_id URL

> ID：14744898
> 
> 赞同：0
> 
> 时间：2013-02-07T06:20:23.847
> 
> 标签：magento

我在新模块中创建了网格。它包含操作列。操作的 URL 不是 **admin/sales_order/view/order_id** 它显示 **/sales_order/view/order_id**。

下面是代码。谁能告诉我我哪里出错了

我的模块名称是**Mymodule_Backorders**

```
$this->addColumn('action',
    array(
    'header'    => Mage::helper('catalog')->__('Action'),
    'width'     => '50px',
    'type'      => 'action',
    'getter'     => 'getId',
    'actions'   => array(
        array(
        'caption' => 'Edit',
        'url'     => array('base'=>'sales_order/view'),
        'target'=>'_blank',
        'field'   => 'id'
        )
    ),
    'filter'    => false,
    'sortable'  => false
)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:34:59.960

基本 url 的数组值包含三个组件 - 模块/控制器/操作 - 您缺少第一个组件。

更改`array('base'=>'sales_order/view')`为`array('base'=>'adminhtml/sales_order/view'),`。如果您要引用的操作在您自己的模块内的控制器中，您还可以使用`array('base'=>'*/sales_order/view'),`where * 自动替换为调用 getUrl 函数的类所属的模块名称。

# google-chrome - 自动完成在 Chrome 中不起作用

> ID：14744901
> 
> 赞同：0
> 
> 时间：2013-02-07T06:20:37.110
> 
> 标签：google-chrome, jquery, jquery-autocomplete

该站点： http: [//www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/) ajax 自动完成在 Firefox 和 chrome 中运行良好，但来自此仓库的页面：[https](https://github.com/devbridge/jQuery-Autocomplete.git) ://github.com/devbridge/jQuery-Autocomplete.git ajax 自动完成下拉菜单不起作用。

我需要帮助我应该从这个站点添加哪个文件[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)所以这个 repo 页面中的 ajax 下拉自动完成（[https://github.com/devbridge/jQuery -Autocomplete.git](https://github.com/devbridge/jQuery-Autocomplete.git)）将在 chrome 中工作。

我在 Windows 中使用 GoogleChrome 版本：24.0.1312.57。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T14:31:54.683

我在 chrome 网站上找到了一个链接：

Chrome：您应该必须激活自动完成功能：

[https://support.google.com/chrome/answer/142893?hl=en](https://support.google.com/chrome/answer/142893?hl=en)

# linux - 如何在 Linux 上的当前 shell 中执行脚本？

> ID：14744904
> 
> 赞同：14
> 
> 时间：2013-02-07T06:21:05.473
> 
> 标签：linux, shell

有没有办法从 whitin It 标记要在当前 shell 中执行的脚本？我知道我可以使用：

```
. ./path/myscript.sh 
```

但我需要一种在脚本中包含“点”方式的方法。

编辑：情况就是这样。我在目录 A 中有一个脚本“myscript.sh”：

```
rm -r A
mkdir A
touch A/test.file
cd A 
```

当脚本以正常方式执行时：

```
sh myscript.sh 
```

退出脚本时，我无法列出目录。在当前 shell 中启动脚本时：

```
. ./myscript.sh 
```

没有问题。我需要一种在我的脚本中包含这种“点”方式的方法，这样就可以在没有它的情况下调用它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-10-23T21:27:30.680

在 shell 中执行脚本有两种方法。根据您的需要，您必须执行以下操作之一（不要同时执行！）。

1.  将脚本作为程序启动，它有自己的进程。
2.  将脚本作为一堆文本获取，其中文本由当前 shell 处理。

要将脚本作为程序启动：

*   添加该行`#!/bin/bash`作为脚本的第一行

这将由加载程序读取，加载程序具有特殊的逻辑，将前两个字符解释`#!`为“启动下一个程序，并将内容传递给它”。请注意，这仅适用于为接收内容而编写的程序

要将脚本源到当前 shell：

*   输入命令`. script.sh`或`source script.sh`

注意：`.`in bash 等价于`source`in bash。

这就像您输入“script.sh”的内容一样。例如，如果您在“script.sh”中设置了一个变量，那么该变量将在当前 shell 中设置。您将需要取消定义变量以将其从当前 shell 中清除。

这与`#!/bin/bash`示例有很大不同，因为在新`bash`子进程中设置变量不会影响您从中启动子进程的 shell。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T06:38:45.257

如果您创建 shell 函数而不是脚本，则可以执行此操作。函数在同一个 shell 中执行，而不是在子 shell 中。如果您在 .profile 中定义函数，它们将可用于 login-shell。

我在这里找到了更多细节和解释：http: [//steve-parker.org/sh/functions.shtml](http://steve-parker.org/sh/functions.shtml)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-05T11:52:28.753

您可以做的一件事是将函数添加到您的 .bash 配置文件中。然后运行该函数将不会运行脚本。

我现在就试试...

```
testit() {
  rm -r A
  mkdir A
  touch A/test.file
  cd A
} 
```

作品...

所以另一个选择是创建一个包含函数定义的文件，并获取该文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-23T21:15:14.863

尝试这个：

```
source path/to/shell/script.sh 
```

它将在当前 shell 中执行 shell 脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T06:24:38.093

1.  放在`#!/bin/sh`脚本的第一行
2.  添加执行权限即`chmod +x /path/to/script.sh`

然后就可以运行脚本了

IE`/path/to/script.sh`

或者如果你有`/path/to`环境`PATH`变量，你可以简单地执行`script.sh`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-14T00:15:00.153

最短的方法是在 shell 中输入单词：

```
:%w !sh 
```

# c# - 如何为个人用户创建登录会话计时器

> ID：14744908
> 
> 赞同：2
> 
> 时间：2013-02-07T06:21:17.717
> 
> 标签：c#, asp.net-mvc, timer, signalr

我一直在研究`custom timer`我为每个用户创建的`login session`. 到目前为止，我无法`timers`为每个登录会话创建一个人。

**设想：**

`User1`登录时，`timer will start counting`. 登录时`User2`，Use1 的计时器将重置为与 User2 的计时器相同的值。似乎他们有`one timer`（不是个人）。

这就是我想要发生的事情。

*   当 user1 登录时，他的计时器将开始计时。
*   如果计时器达到 900 秒（15 分钟），它将弹出一些模式框，告诉他的会话已超时。
*   模态将显示倒计时至少 30 秒
*   倒计时后，用户将自动注销
*   每个用户都必须有自己的计时器

除了最后一项，我已经完成了所有这些`Every user must have their own timers`

这是我创建计时器的代码：

```
public class SessionTimer
{
    private static Timer timer;

    public static void StartTimer()
    {
        timer = new Timer();
        timer.Interval = (double)Utility.ActivityTimerInterval();
        timer.Elapsed += (s, e) => MonitorElapsedTime();

        timer.Start();
    }

    public static void ResetTimer()
    {
        TimeCount = 0;
        timer.Stop();
        timer.Start();
    }

    public static int TimeCount { get; set; }

    public static string ConnectionID { get; set; }

    private static void MonitorElapsedTime()
    {
        if (TimeCount >= Utility.TimerValue())
        {
            timer.Stop();
            Hubs.Notifier.SessionTimeOut(TimeCount);
        }
        else
        {
            Hubs.Notifier.SendElapsedTime(TimeCount);
        }

        TimeCount++;
    }
} 
```

登录成功后，我要调用定时器启动

```
[HttpPost]
public ActionResult SignIn(LoginCredentials info)
{
    // Success full login

    SessionTimer.StartTimer();

} 
```

这是服务器上的信号器代码：

```
public class SessionTimerHub : Hub
{
    public void SendTimeOutNotice(int time)
    {
        Clients.Client(Context.ConnectionId).alertClient(time);
    }

    public void CheckElapsedTime(int time)
    {
        Clients.Client(Context.ConnectionId).sendElapsedTime(time);
    }

    public void UpdateConnectionID(string id)
    {
        SessionTimer.ConnectionID = id;
    }
}

public class Notifier
{
    public static void SessionTimeOut(int time)
    {
        var context = GlobalHost.ConnectionManager.GetHubContext<SessionTimerHub>();
        context.Clients.Client(SessionTimer.ConnectionID).alertClient(time);
    }

    public static void SendElapsedTime(int time)
    {
        var context = GlobalHost.ConnectionManager.GetHubContext<SessionTimerHub>();
        context.Clients.Client(SessionTimer.ConnectionID).sendElapsedTime(time);
    }
} 
```

和jQuery代码：

```
$(function () {

        /////////////////////////////////////////////////// SESSION TIMER
        var timer = $.connection.sessionTimerHub, $modaltimer = $('#session_timer_elapsed'), tt = null;

        timer.client.alertClient = function (time) {
            var $count = $modaltimer.find('.timer'), wait = 180;

            $count.text(wait);
            $modaltimer.modal('show');

            tt = setInterval(function () {
                $count.text(wait--);

                if (wait < 0) {
                    $.post('@Url.Action("Logout", "Auth")', function () { window.location.reload(); });
                    window.clearInterval(tt);
                }
            }, 1000);
        };

        timer.client.sendElapsedTime = function (time) {
            console.log(time);
        };

        $.connection.hub.start().done(function () {
            timer.server.updateConnectionID($.connection.hub.id);
        });

        $modaltimer.on('click', '.still_here', function () {
            $.post('@Url.Action("ResetTimer", "Auth")');
            $modaltimer.modal('hide');
            window.clearInterval(tt);
        }).on('click', '.log_out', function () {
            $.post('@Url.Action("Logout", "Auth")', function () { window.location.reload(); });
            $modaltimer.modal('hide');
        });

}); 
```

如您所见，我正在这样做：

```
timer.server.updateConnectionID($.connection.hub.id); 
```

传递连接ID，因为我无法得到里面的ID`public class Notifier`

**我失败的解决方案**

我尝试将其`SessionTimer`放入`session`使用中`dynamic`，`ExpandoObject`
例如：

```
public static dynamic Data
{
    get
    {
        #region FAILSAFE
        if (HttpContext.Current.Session[datakey] == null)
        {
            HttpContext.Current.Session[datakey] = new ExpandoObject();
        }
        #endregion

        return (ExpandoObject)HttpContext.Current.Session[datakey];
    }
} 
```

它成功地分离了计时器。但是在我的 expandoobject 变量上传递连接 id 时，
例如：

```
public void UpdateConnectionID(string id)
{
    MyExpandoObject.MySessionTimer.ConnectionID = id;
} 
```

它抛出空引用异常。从 SignalR 传递数据时，我的 expandoObject 似乎为空（只是我的想法），但我不确定。

请帮助我处理这个单独的计时器，并在他们的计时器到期时向特定用户发送消息。

**请注意**
我想在服务器端创建计时器。

**从服务器重置计时器**

计时器必须能够在服务器上重置。在这种情况下，我将自定义属性放在每个`AcrionReseult`

例如：

```
[HttpPost]
[BasecampAuthorize]
public ActionResult LoadEmailType()
{
    return Json(Enum.GetNames(typeof(EmailType)).ToList());
} 
```

当用户通过`[BasecampAuthorize]`时，这意味着他做了一个活动。
里面`[BasecampAuthorize]`

```
public class BasecampAuthorizeAttribute : AuthorizeAttribute
{
    string url { get; set; }

    public BasecampAuthorizeAttribute()
    {
        if (string.IsNullOrEmpty(url))
        {
            url = "~/SomeUrl";
        }
    }

    public BasecampAuthorizeAttribute(string URL)
    {
        url = URL;
    }

    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (!filterContext.HttpContext.User.Identity.IsAuthenticated)
        {
            filterContext.HttpContext.Response.Redirect(url);
        }
        else
        {
            // MUST RESET SESSION TIMER HERE
        }

        base.OnAuthorization(filterContext);
    }
} 
```

@halter73 - 我如何在这里调用重置计时器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T04:56:27.220

您的问题是您只有一个静态计时器变量，它是整个 AppDomain 共享的单一实例。在 ASP.NET 中，AppDomain 是每个 Web 应用程序[而不是每个用户](https://stackoverflow.com/questions/3782545/are-static-objects-unique-per-user)。您可以使用静态变量，但该变量应该是为每个 connectionId 保存唯一 Timer 的集合。如果您在负载均衡器后面横向扩展或 IIS 重新启动应用程序，这显然会创建一个新的 AppDomain，这将崩溃。

```
public class SessionTimer : IDisposable
{
    public static readonly ConcurrentDictionary<string, SessionTimer> Timers;

    private readonly Timer timer;

    static SessionTimer()
    {
        Timers = new ConcurrentDictionary<string, SessionTimer>();
    }

    private SessionTimer(string connectionID)
    {
        ConnectionID = connectionID;
        timer = new Timer();
        timer.Interval = (double)Utility.ActivityTimerInterval();
        timer.Elapsed += (s, e) => MonitorElapsedTime();

        timer.Start();
    }

    private int TimeCount { get; set; }

    private string ConnectionID { get; set; }

    public static void StartTimer(string connectionID)
    {
        var newTimer = new SessionTimer(connectionID);
        if (!Timers.TryAdd(connectionID, newTimer))
        {
            newTimer.Dispose();
        }
    }

    public static void StopTimer(string connectionID)
    {
        SessionTimer oldTimer;
        if (Timers.TryRemove(connectionID, out oldTimer))
        {
            oldTimer.Dispose();
        }
    }

    public void ResetTimer()
    {
        TimeCount = 0;
        timer.Stop();
        timer.Start();
    }

    public override Dispose()
    {
        // Stop might not be necessary since we call Dispose
        timer.Stop();
        timer.Dispose();
    }

    private void MonitorElapsedTime()
    {
        if (TimeCount >= Utility.TimerValue())
        {
            StopTimer(ConnectionID);
            Hubs.Notifier.SessionTimeOut(ConnectionID, TimeCount);
        }
        else
        {
            Hubs.Notifier.SendElapsedTime(ConnectionID, TimeCount);
        }

        TimeCount++;
    }
} 
```

由于您将连接 id 存储在`SessionTimer`类中，因此您可以在调用类中的方法时将其作为参数简单地传递`Notifier`。

```
public static class Notifier
{
    private static context = GlobalHost.ConnectionManager.GetHubContext<SessionTimerHub>(); 

    public static void SessionTimeOut(string connectionID, int time)
    {
        context.Clients.Client(connectionID).alertClient(time);
    }

    public static void SendElapsedTime(string connectionID, int time)
    {
        context.Clients.Client(connectionID).sendElapsedTime(time);
    }
} 
```

您不需要`SendTimeOutNotice`or`CheckElapsedTime`因为您在`Notifier`类中调用客户端方法。`UpdateConnectionID`可以替换为`OnConnected`。

```
public class SessionTimerHub : Hub
{
    public override Task OnConnected()
    {
        SessionTimer.StartTimer(Context.ConnectionId);
        return base.OnConnected();
    }

    public override Task OnDisconnected()
    {
        SessionTimer.StopTimer(Context.ConnectionId);
        return base.OnDisconnected();
    }

    public void ResetTimer()
    {
        SessionTimer.Timers[Context.ConnectionId].ResetTimer();
    }
} 
```

您应该`SessionTimers`在您的集线器内部创建您的，以便您可以将它与您的连接 ID 相关联。您可以`OnConnected`像上面那样执行此操作，但这意味着您应该只在登录后启动 SignalR 连接，并且您实际上想要启动`SessionTimer`该连接。它还有助于`ResetTimer`在集线器上拥有客户端的连接 ID。或者，您可以从客户端获取连接 ID`$.connection.hub.id`并将其发布。

```
$.connection.hub.start().done(function () {
    $modaltimer.on('click', '.still_here', function () {
        timer.server.resetTimer();
        $.post('@Url.Action("ResetTimer", "Auth")');
        $modaltimer.modal('hide');
        window.clearInterval(tt);
    });
}); 
```

编辑：

如果由于某种原因`SessionTimerHub.ResetTimer`抛出 a `KeyNotFoundException`（如果您在火灾`timer.server.resetTimer`后调用，则不应该发生这种情况`$.connection.hub.start().done`），您可以执行以下操作：

```
public void ResetTimer()
{
    SessionTimer timer;
    if (SessionTimer.Timers.TryGetValue(Context.ConnectionId, out timer))
    {
        timer.ResetTimer();
    }
    else
    {   
        SessionTimer.StartTimer(Context.ConnectionId);
    }
} 
```

如果由于某种原因 IIS 正在重新启动您的应用程序，您可能需要添加它，`SessionTimerHub.OnReconnected`因为客户端将重新连接，但您的静态 SessionTimer.Timers 将被重置，并且您的所有 SessionTimer 都将消失。

```
public override Task OnReconnected()
{
    if (!SessionTimer.Timers.ContainsKey(Context.ConnectionId))
    {
        SessionTimer.StartTimer(Context.ConnectionId);
    }
    return base.OnReconnected();
} 
```

你从来没有`SessionTimerHub.ResetTimer()`在 C# 中调用过，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T16:13:38.697

世界上已经有一个计时器：用户的时钟。让用户在登录时倒计时：将他的个人登录时间保存在 javascript cookie 中。

假设我们正在使用 RSA 密钥 ( `openssl genrsa 2048`) 对用户进行身份验证。

现在的对话是：

```
> GET /login

< 200 OK
challenge: mie4NaNgfcqwkhYtNiy4oF

<form action='/login'>
  <input type='text' name='user-public-key' />
  <input type='text' name='rsa-signed-challenge' />
</form>

> POST /login
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA24PnkIZYg/k6lLbNZl5X
IxNl8KEsJTUX7h9B2P+o5LjB6e1OozVwsPFwXjCJP3WN8KwBQhvpxH4ZCK9H0LyT
+NXBPCsydBgY2VfqKK3wQONRKUaEQkSlV/gA0ciWa/jXD9FDbc3onrlqNTmtjGiM
OkXzSJDPz67tEDx+sZQ/+zcEO9tVPSioq6tZwMHx3EfBratA9W148OZRLOS1AFmc
RSSJzsgj/MmOTxrGjfNE2dKMvul4usjWf8Of+GEpEqW6+SrKZ3ivhP/jx+q1v8Bp
pbhDYag6I+YTwEu4feXJEgM4z83e05DJvh3hUDgzv7KDMqCp/h3m8f3TolcgvNox
fQIDAQAB
-----END PUBLIC KEY-----

rsa-signed-challenge:
IyGoX2aqQOH/tBRxxxGPIWGmbo2r6KfEmcDUdDvt7nNaN0GwqXm6MZaJ6eQvjkCR
AVnVRpJNGQDWCaLqzyBLVrysTlnC0dHkJD/vJg3jv74UqZGOqeKSW06HIhzz79UY
RghkdjadDpA8Jzs8NSYBzFopExfzSz+K1sOOwVXWa9nywhGqEj7XXoJO1I0j+o63
Wt94xEa30gmW1oVWIvjWLnBewH4H9ZzXv8PeGTdLdp2v9c9a3nsd7PsYi2yHul+S
CfAlFo/hITfEqucUX5zgyJyU0+SAVRod+vRlSaimMW2CQq8K8kQSbADaQpET4pa1
9eVnG99rz2UHw9b6UG0nBQ==

< 301 Redirect /dashboard
< Set-Cookie: Token=
iPtyfAxAcenFog1kn/h5VrdkBj0wxjeZBnB4JfXLcOWlh+G6/GdndgT7VTg3rSyq
uNFfbgnKNQtiGBjJ45cUHDai44ILK0g6DXPcicusEhs30xJhh8CT4P2FfK/juTtz
d0nj9ypncFOsUPAzJdirgdxO9oMquw0DW2b/iG1O/Dn2fU1/lDrmFpKKIMnPZ10g
cD6gY7Yhqs+2OcyfuiuIBYf2tAq8LYtKSm69j0AlgEiFNNmPl12Wr1R7YhxJZ1hi
smDjNTom5tDfxi3LDfwFtsHKn61OCbfuI3PhlPPqYTUd6omL1Efbr29l4jj+9cgF
0NnaX1L6LUUd6RaVmCw30w==

> GET /dashboard
> Cookie: Token=
iPtyfAxAcenFog1kn/h5VrdkBj0wxjeZBnB4JfXLcOWlh+G6/GdndgT7VTg3rSyq
uNFfbgnKNQtiGBjJ45cUHDai44ILK0g6DXPcicusEhs30xJhh8CT4P2FfK/juTtz
d0nj9ypncFOsUPAzJdirgdxO9oMquw0DW2b/iG1O/Dn2fU1/lDrmFpKKIMnPZ10g
cD6gY7Yhqs+2OcyfuiuIBYf2tAq8LYtKSm69j0AlgEiFNNmPl12Wr1R7YhxJZ1hi
smDjNTom5tDfxi3LDfwFtsHKn61OCbfuI3PhlPPqYTUd6omL1Efbr29l4jj+9cgF
0NnaX1L6LUUd6RaVmCw30w==

< 200 OK
<html>
<head>
  <script>
    jQuery.fn.startCountDown = function(el, opts) {
      opts = $.extend({ minutes : 20 }, opts);
      var start = new Time();
      var updater = function() { el.text("Seconds left: " + (opts.minutes * 60 - ((new Time()) - start))); }
      setTimeout(1000, updater);
    }
    $(function() {
      $("#timer").startCountDown({ minutes: 30 });
    })
  </script>
</head>
<body><p id="timer"></p></body>
</html> 
```

这里的症结在于您不能相信客户端会提供一个合理的倒计时值，因此上述解决方案会加密登录时间并将其用作令牌。

这是从客户的角度来看的。

```
$ openssl genrsa 2048 >client.key
-----BEGIN RSA PRIVATE KEY-----
MIIEpQIBAAKCAQEA24PnkIZYg/k6lLbNZl5XIxNl8KEsJTUX7h9B2P+o5LjB6e1O
ozVwsPFwXjCJP3WN8KwBQhvpxH4ZCK9H0LyT+NXBPCsydBgY2VfqKK3wQONRKUaE
QkSlV/gA0ciWa/jXD9FDbc3onrlqNTmtjGiMOkXzSJDPz67tEDx+sZQ/+zcEO9tV
PSioq6tZwMHx3EfBratA9W148OZRLOS1AFmcRSSJzsgj/MmOTxrGjfNE2dKMvul4
usjWf8Of+GEpEqW6+SrKZ3ivhP/jx+q1v8BppbhDYag6I+YTwEu4feXJEgM4z83e
05DJvh3hUDgzv7KDMqCp/h3m8f3TolcgvNoxfQIDAQABAoIBAQCg8VrsObPYPvjW
ZBjAf1a/3s8U1/Z36S98ZOpwYTHBUDzMeDL5sorHEJ3kUQ2vu06wMExT3gdNC27r
USgEQN70yDP/G2TIfYpqf+ysmqrVyFSPQKZjt9TKZIilRr4St8VmUXVwolF1Xlgi
YgF+OoDlkLfIcnQKvyQMjW4OYLVwRw+bCKAq/T45kki+X41VK4Ubsnjddy+yT++3
GKMPqezVmZHGuhyVtR+dB9vQB3zWZocQRrqDDoQviDB7+scQD2XeWz53SUScBdwm
TzW5YaYclbttVWib0okCSxnhF3yah8cqvQHgqalrACnhaQx9oLcqyrg6KLCI/Lnn
yOZLvKZ5AoGBAP46Y8waGAYgPtgI/7Rni4NslnANGh6psWKaELftPLThxiuCoHad
rMpSojqP8FbKgqILDUOwczPIy/+jWK6J8EJPv4za2dlOcGnnfzD3Ko6LN2Jq3reC
N0Ywi3esTaesHp/SDOB39xW3XAAkdsejffy+LHsnrpVKYKlVm43Jhy6nAoGBAN0L
k+0m9RgwOxWiiAJK3XSBgdHK0e9BnVMKFVPiS2Q1wrnOUDb1CansAAyYSVZYsJZD
eh5VocYPGPTydl/muywlPceGgW2O1CO/LZPj1cKQANHx0+6F9itmk8leaTR4rTuf
2G67sdvlYCyKPoIvVg3WJQnj3dsqo4Ldt/5KkSc7AoGBAMDbIqHOmbLr+0B/cxs0
AY3tbiIKjmn8aOhX357nhUnijCatrXTOICpLjW3Hi5cLgRXUNHfI/1ulU7vV+oxN
b8meHb2IuAI1kumEB+TpW4tO6PDsCZBEZBIG+YYLW816sLCk88fEudfrhQtGniTM
TeLRkYTLkZEHH1TV8G8bFkW5AoGAXf9XZ2jCnwebiIa2KatmYu3To8AI6CJR4YcP
LL21a6bE6LiIOeaXtm+KUdDMlvBeH3gQTSgDBDNVXIxitENs4sfvbpKPJWSwZ4cb
vaEMPJF6F80rX2oOFcSoIeCJAmwy1oERy3z7lFQFQsuC619vy7B9zafdpx6Jq9PX
M0bIVRMCgYEAy9LvPbyXMWYmOy9svYRy4iAL9sCRNmzZgvC5B5b3lN55EWoE8ipw
g4qNBv3NaCJ/lTFezRQZVRfFfQOpNGDvJBLmTEaSR3OuV8hRw7zttC3/MazDqwTy
qZeg526uklXN7IvkFfiHlYZeed1u4wc7SXSi76RIE0w5lDBIb+CPPM4=
-----END RSA PRIVATE KEY-----

$ openssl rsa -in client.key -pubout >client.key.pub
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA24PnkIZYg/k6lLbNZl5X
IxNl8KEsJTUX7h9B2P+o5LjB6e1OozVwsPFwXjCJP3WN8KwBQhvpxH4ZCK9H0LyT
+NXBPCsydBgY2VfqKK3wQONRKUaEQkSlV/gA0ciWa/jXD9FDbc3onrlqNTmtjGiM
OkXzSJDPz67tEDx+sZQ/+zcEO9tVPSioq6tZwMHx3EfBratA9W148OZRLOS1AFmc
RSSJzsgj/MmOTxrGjfNE2dKMvul4usjWf8Of+GEpEqW6+SrKZ3ivhP/jx+q1v8Bp
pbhDYag6I+YTwEu4feXJEgM4z83e05DJvh3hUDgzv7KDMqCp/h3m8f3TolcgvNox
fQIDAQAB
-----END PUBLIC KEY----- 
```

这是我们从服务器得到的挑战（随机垃圾）

```
$ echo "mie4NaNgfcqwkhYtNiy4oF" >to-sign
$ openssl dgst -sha1 -sign client.key -out to-sign.sha1 to-sign 
```

（可选：确保客户的签名有效）

```
$ openssl dgst -sha1 -verify client.key.pub -signature to-sign.sha1 to-sign 
```

现在您可以以可复制的方式对客户端签名进行编码：

```
$ cat to-sign.sha1 | openssl base64 -e
g8nbi3mrcZ8afEpf4iRG6TQFDJtxw48AJ0QTKOdTKh2khxbQdPQIxAFWU++xsJRd
m0wnKRc1SpEYxhLeMKYjyhMTDce/KUBM/5i1Hoh9RPi9+G/cxNoXJiVKaxIF+rDf
NYk7mQD9ofdYgBCAbu2hi6jR5t2BY6emd7z/F53E8edVFtzqlHYjVLHNNYiNlXqD
WHl9OLV2b+yHY/mAkgUBYoVjyBvFnHFcRxTrZMC9A8K3jfU/bEOLgxEmq3UgmvWC
2M7fwpOBAUN7q9yoIR/kOGNPqePghhHTuyeFtbC33PmD8qgbgVUQby8jpVQ7T+5Q
kjEP2sbnETHlkjS6TXSKHg== 
```

现在让我们签署一个身份验证令牌，所以我们继续到服务器......

```
$ openssl genrsa 2048 >server.key
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEAoD80ZhPHm1x62wAESbEdHmzCdYCwC3VwkOwDMr4fD9Qqmw6D
Zu2oMSAJ8Kw1Q4oRJd3sZkHu7ZnCwHTe3P83uBKrCfDDFiu/aB1mJQJDAZzPwh5r
W8/2FAHmq/iw/f3U3IOaPuE1w7eoEaqFuNnmfb0EEBhsi7zhbjKpKowUXObPz1W5
mIJvpWqlyygHG6+JJVMs1jTdwzzQzcyHZDgEu/fODHgW5ErBQS7fKOOvZZIxEuLg
i7x5xB/mMYpWdIO0BI/xcu3SdmmNE/Ix8MoAZXXTK9u8Uu+2jnO69pFWtBGPIa2l
AGKNQ1jlUgvECglo356OOpKx9rb9Fd9WY4SIxwIDAQABAoIBABIiFNPYOSYjeON/
RPzxxdHDjN2vCjzBtVMw4cvEJ8+quoeBRO1Ix1eHwJgzZHOYFAis7CtGGrtYQul0
UCPB3ZQ+yIv/apP/r1EgwoY9k0eDbx8QQiXJipcJAAlFwwF6z7OEUNf8tBDJn4Mg
QLGCNsrTsLoBiYbmgLvvj6T45PT+G3ztaETv7iiiUIMX5R/7thK/+odiUeqyIbHH
m0673m0nYdZvGe7ujZarbh1h2x4Srs+OiMaPXH1ehw/nTvYAoEgGvz8eGVFCUrfa
87rizYMLYk8zs/TAz4CDtAk9PtLVMS6NZdKCYe4zvLBdjGjwx7gQJFpjXJCRQwA2
JGE8U8ECgYEAzn4I5yHc+ApzJDJyRmeR70MMWk0KpzIi+8PhwKUNpdP3DyKGOTAs
Z3g3su1/C5tcq2GIK/hprvDxdtg7wu7RSZdhz1W3Ee584JTqzqAG464bmCqd1aPi
sp7DVOeSrb5EZDtrZ9UpW79R2skRhU3qLAay0bl/cvKauBukCr0gUUsCgYEAxqq+
slkXI1tvCzaoxAWNyf0hooGKjEeAsCyrFYJwVk9cveJ0wMZUC7pLPH9UVEIjZzzo
Fm+xr5kVbXhLBn9cCXjP/OgBtuM1KqA/mcsmysVn2okuU8BIy43RYXgq1+eUI92/
MDFKtuFzMikSqI5gY3sIB0GRfL19FAvdy4iKtPUCgYEApUiJA8k9QGXM6Epg4i4A
yA1ZE+bbAh3FltSiHTuAgx35genWmmwO/vthSh2ENdwz/xJglyGOJnPCM6i9nTjf
2RINPpKTqQzGdFV+5cl9+jzg5ZonIFzAFs2x+IIsDFpiEADn5gLfygqIEKIlHhjR
uk/aTrk2ZOIAKiIl2lqsRaUCgYA3K8O5k7QxRXsZChzkEwbFSV7F2mO3gUPjqQP5
/TdlQLToprL1th4xA5NRQasRmyxpxyhM0sftk/23YOi07TmKB9r6yRNwzrg9FjOT
ai9jsF6e+em7qHKO1NuIze5X9x/UtggaQhYVo5ZyH6Xm2WM7PTeFjFfy5EyP/Juj
ok+i4QKBgQCf6mndYOkBCmzyMv2gASr8nj7Fh0oTxfaFRrs9k/DnUTOSUgrHrmO4
eCAk/D5FdPjcmF1np8wasVt38sw5nxUmbYonoV/2H+xmvKrRqtuflGRQx98P/+Qd
6vIF/n3NM66oZG9zgeYdEzxAbLXptCO60arJ4Ekrod/J+EpGSQb+bg== 
```

这是服务器在设置时运行的内容：

```
$ openssl rsa -in server.key -pubout >server.key.pub
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoD80ZhPHm1x62wAESbEd
HmzCdYCwC3VwkOwDMr4fD9Qqmw6DZu2oMSAJ8Kw1Q4oRJd3sZkHu7ZnCwHTe3P83
uBKrCfDDFiu/aB1mJQJDAZzPwh5rW8/2FAHmq/iw/f3U3IOaPuE1w7eoEaqFuNnm
fb0EEBhsi7zhbjKpKowUXObPz1W5mIJvpWqlyygHG6+JJVMs1jTdwzzQzcyHZDgE
u/fODHgW5ErBQS7fKOOvZZIxEuLgi7x5xB/mMYpWdIO0BI/xcu3SdmmNE/Ix8MoA
ZXXTK9u8Uu+2jnO69pFWtBGPIa2lAGKNQ1jlUgvECglo356OOpKx9rb9Fd9WY4SI
xwIDAQAB
-----END PUBLIC KEY----- 
```

现在服务器有一个私钥和公钥，让我们创建要签名并用于身份验证的令牌。

```
$ echo "2013-02-09T16:33:44+0000" >auth.token.plain 
```

因为要加密的文本非常小，我们不会在服务器上遇到密钥长度问题，因此我们可以按原样使用密钥，而不是进行对称加密。

```
$ openssl rsautl -encrypt -inkey server.key.pub -pubin -in auth.token.plain -out auth.token.cipher 
```

这是我们给客户的。每次我们收到这个令牌时，我们都可以验证我们是否签署了它。如果您有服务器场，请让它们使用相同的密钥进行签名。

```
$ cat auth.token.cipher | openssl base64 -e
iPtyfAxAcenFog1kn/h5VrdkBj0wxjeZBnB4JfXLcOWlh+G6/GdndgT7VTg3rSyq
uNFfbgnKNQtiGBjJ45cUHDai44ILK0g6DXPcicusEhs30xJhh8CT4P2FfK/juTtz
d0nj9ypncFOsUPAzJdirgdxO9oMquw0DW2b/iG1O/Dn2fU1/lDrmFpKKIMnPZ10g
cD6gY7Yhqs+2OcyfuiuIBYf2tAq8LYtKSm69j0AlgEiFNNmPl12Wr1R7YhxJZ1hi
smDjNTom5tDfxi3LDfwFtsHKn61OCbfuI3PhlPPqYTUd6omL1Efbr29l4jj+9cgF
0NnaX1L6LUUd6RaVmCw30w== 
```

服务器可以再次验证令牌。未能解密密码意味着它已被修改并且我们使令牌失败。生产系统还应该验证签名（在同一个信封中）以避免损坏的数据成功解密。

```
$ openssl rsautl -decrypt -inkey server.key -in auth.token.cipher
2013-02-09T16:33:44+0000 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-07T06:27:20.527

在母版页中：

```
public partial class MasterPage : System.Web.UI.MasterPage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["LoginID"] != null)
            Label1.Text="Welcome :: " + Session["LoginID"].ToString();
        else
            Response.Redirect("Login.aspx");

    }
    protected void lnkLogout_Click(object sender, EventArgs e)
    {
        Session["LoginID"] = null;
        Response.Redirect("Login.aspx");

    }
} 
```

在cs页面中：

```
protected void Login_Click(object sender, EventArgs e)
    {
        string conString = "Provider=Microsoft.JET.OLEDB.4.0; data source=" + Server.MapPath (string.Empty)  + @"\Database\Northwind.mdb";
        string sqlString = "SELECT * FROM CUSTOMERS where CustomerID='" + TextBox1.Text + "' and City='" + TextBox2.Text + "'";
        OleDbConnection conn = new OleDbConnection(conString);
        DataSet ds = new DataSet();
        OleDbDataAdapter adapter = new OleDbDataAdapter(sqlString, conn);
        adapter.Fill(ds);
        if (ds != null)
        {
            if (ds.Tables[0].Rows.Count > 0)
            {
                Session["LoginID"] = ds.Tables[0].Rows[0]["CustomerID"].ToString();
                Response.Redirect("Welcome.aspx");

            }
            else
                Label1.Text = "Enter correct id/city";
        }

    }
} 
```

# java - scalatra case t: Throwable => t.printStacktrace()

> ID：14744912
> 
> 赞同：0
> 
> 时间：2013-02-07T06:21:33.123
> 
> 标签：java, scala, scalatra

我只是从 scala 和 scalatra 开始。遵循 [http://www.scalatra.org/getting-started/first-project.html上的指导方针](http://www.scalatra.org/getting-started/first-project.html)

我遇到了一个不知道如何处理的编译错误：

```
[error] /Users/cory/lichen/src/main/scala/ScalatraBootstrap.scala:10: value printStacktrace is not a member of Throwable
[error]       case t: Throwable => t.printStacktrace()
[error]                              ^
[error] one error found
[error] (compile:compile) Compilation failed
[error] Total time: 13 s, completed Feb 6, 2013 10:11:17 PM 
```

我还没有编辑任何文件。我在 mac os x 10.8.2 上运行 java 1.7 和 scala 2.10.0

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:16:25.407

似乎 api 调用应该是`printStackTrace()`大写的*T*。

[我想知道 19 小时前在这个提交](https://github.com/scalatra/scalatra-sbt.g8/commit/738b106795d876634a45363c022b7a86c30d98eb#src/main/g8/src/main/scala/ScalatraBootstrap.scala)中是否引入了一个错字。

我在 github 上对该行[发表了评论。](https://github.com/scalatra/scalatra-sbt.g8/commit/738b106795d876634a45363c022b7a86c30d98eb#commitcomment-2576199)希望作者注意。否则，您可能想尝试修复错字。

# javascript - 如何在后台页面中存储变量

> ID：14744916
> 
> 赞同：4
> 
> 时间：2013-02-07T06:21:52.833
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在开发 Google Chrome 扩展程序。我想维护用户的状态。如果任何用户登录，那么在页面刷新后他/她应该登录。我怎样才能保持这种状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T06:34:51.007

后台页面在浏览器会话之前存储价值，如果您正在寻找稳定的存储空间，请使用 Chrome.storage。您可以将以下代码作为参考。

# 示范

### 清单.json

已注册的带有 chrome 扩展名的背景页面

```
{
    "name": "Persist Value",
    "description": "http://stackoverflow.com/questions/14744916/how-to-store-variable-in-background-page",
    "manifest_version": 2,
    "version": "1",
    "permissions": [
        "storage"
    ],
    "background": {
        "scripts": [
            "background.js"
        ]
    }
} 
```

### 背景.js

一些琐碎的实现。

```
//You can use Storage API
chrome.storage.local.set({
    "Name": "Your_variable",
    "Value": "Some Value"
}, function () {
    console.log("Storage Succesful");
}); 
```

# 参考

*   [存储 API](https://developer.chrome.com/extensions/storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:33:27.047

在您的情况下，听起来您的意思是将用户的状态保存在服务器端，这与在扩展程序本身上保存状态有很大不同。例如 - 您可能有一些服务器端代码（用 PHP 或任何其他服务器端语言编写）在您登录时跟踪您的 chrome 扩展用户。为此 - “会话”非常常见且很好并且已实现可能还有所有服务器端语言。如果这是您正在寻找的内容，最好在深入研究您的扩展之前阅读有关服务器端编程和 ajax 的信息。

但是，如果您想在“本地”（不涉及服务器）的 chrome 扩展上保存状态，那么 html5 的 localStorage 是一个不错的选择[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T08:58:46.630

您可以`localStorage`使用以下方法存储变量：`localStorage.setItem()`, `localStorage.getItem()`，但 localStorage 有限制

如果您使用大数据`chrome.storage.local`或`chrome.storage.sync`

localStorage 工作固定然后 chrome.storage 和 chrome.storage 是异步的

# jasper-reports - 报告输出中的页面限制

> ID：14744919
> 
> 赞同：0
> 
> 时间：2013-02-07T06:22:05.957
> 
> 标签：jasper-reports, ireport

报告输出的页数是否有限制？

我使用*iReport*进行报表设计，我在一个报表中有多个报表（主报表和子报表）。

如果数据可用，从应用程序执行我的报告时可能会生成 10 万页以上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:25:29.170

不，没有页数限制。如果您要以特定文件类型（例如 PDF）导出报告，请检查并确保您不会超过该文件类型的大小限制。

# vb.net - 使用 websetup 注册 IIS

> ID：14744920
> 
> 赞同：0
> 
> 时间：2013-02-07T06:22:11.600
> 
> 标签：vb.net, web

我在单个 Web 解决方案中有 4 个不同的项目。我想通过单个 Web 设置（msi）分别为它们中的每一个进行 IIS 注册。我怎样才能做到这一点？请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:32:03.013

使用 Wix，我们一直在我们的项目中这样做 [http://wix.sourceforge.net/index.html](http://wix.sourceforge.net/index.html)

你需要用谷歌搜索它，Wix 很难开始，所以需要一些耐心，继续努力，你就会成功。

wix 非常灵活和健壮。

# iphone - iPad 中的异常，UIImagePickerController 必须通过 UIPopoverController 呈现

> ID：14744927
> 
> 赞同：11
> 
> 时间：2013-02-07T06:23:01.740
> 
> 标签：iphone, ios, objective-c, ipad, ios6

我创建了一个从相机捕获图像的应用程序。这是我的代码

```
 -(IBAction) showCameraUI {
    BOOL hasCamera = [UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera];
    UIImagePickerController* picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.sourceType = hasCamera ? UIImagePickerControllerSourceTypeCamera :    UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:picker animated:YES];
} 
```

并实现了这个委托方法来获取捕获的图像

```
- (void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [picker dismissModalViewControllerAnimated:YES];
    UIImage* image = [info objectForKey:UIImagePickerControllerOriginalImage];
    UIImage *yourImageView = image;
} 
```

如果用户取消控制器，则实现此方法

```
- (void)imagePickerControllerDidCancel:(UIImagePickerController*)picker
{
    [picker dismissModalViewControllerAnimated:YES];
} 
```

但它显示了这个例外。有谁知道为什么在执行最后一行函数 showCameraUI 后会显示这样的异常。

```
UIStatusBarStyleBlackTranslucent is not available on this device. 2013-02-07 
10:06:06.976 CaptureImage[460:c07] *** Terminating app due to uncaught exception
'NSInvalidArgumentException', reason: 'On iPad, UIImagePickerController must be 
presented via UIPopoverController' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T06:30:23.503

关于异常，错误信息很清楚。*“在 iPad 上，UIImagePickerController 必须通过 UIPopoverController 呈现”*对于 iPad，您应该以 a`UIPopoverController`而不是使用`[self presentModalViewController:picker animated:YES];`. 这应该可以解决问题。

例如：-

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:picker];
    [popover presentPopoverFromRect:self.view.bounds inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    self.popover = popover;
} else {
    [self presentModalViewController:picker animated:YES];
} 
```

**编辑：**正如@rmaddy 所述，相机可以模态呈现。以上适用于`sourceType`is时`UIImagePickerControllerSourceTypePhotoLibrary`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-13T13:12:55.097

@Arun 我也面临同样的问题，在头文件中添加全局属性。

我希望下面的代码对你有用

```
UIImagePickerController *imgPicker = [[UIImagePickerController alloc] init];
   [imgPicker setDelegate:self];
   [imgPicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
   [imgPicker setAllowsEditing:YES];
   [imgPicker setModalPresentationStyle:UIModalPresentationCurrentContext];

   UIPopoverController *popOver = [[UIPopoverController alloc] initWithContentViewController:imgPicker];
   popOver.delegate = self;
   self.popoverImageViewController = popOver;
   [self.popoverImageViewController presentPopoverFromRect:CGRectMake(0, 0, 160, 40) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

在该头文件中创建这样的全局属性

```
@property (strong) UIPopoverController *popoverImageViewController; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-29T13:51:14.387

对于带有 iOS11 的 Swift：

```
 videoEditor.modalPresentationStyle = .popover
            self.present(picker, animated: true)

            let popover = picker.popoverPresentationController
            popover?.sourceView = self.view

            // then config popover frame and arrow style here 
```

# postgresql - 将日期时间约束添加到 PostgreSQL 多列部分索引

> ID：14744931
> 
> 赞同：8
> 
> 时间：2013-02-07T06:23:07.853
> 
> 标签：postgresql, indexing, timestamp, postgresql-performance

我有一个名为 的 PostgreSQL 表`queries_query`，它有很多列。

其中两个列`created`和`user_sid`经常在我的应用程序的 SQL 查询中一起使用，以确定给定用户在过去 30 天内执行了多少次查询。我在最近 30 天之前的任何时间查询这些统计数据是非常非常罕见的。

这是我的问题：

我目前通过运行在这两列上创建了多列索引：

```
CREATE INDEX CONCURRENTLY some_index_name ON queries_query (user_sid, created) 
```

但我想进一步限制索引只关心创建日期在过去 30 天内的那些查询。我尝试过执行以下操作：

```
CREATE INDEX CONCURRENTLY some_index_name ON queries_query (user_sid, created)
WHERE created >= NOW() - '30 days'::INTERVAL` 
```

但这会引发一个异常，指出我的函数必须是不可变的。

我很想让这个工作，这样我就可以优化我的索引，并减少 Postgres 执行这些重复查询所需的资源。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T08:13:28.313

你得到一个异常使用`now()`，因为该功能不是（显然），[并且](https://www.postgresql.org/docs/current/sql-createindex.html)`IMMUTABLE`引用[**手册**](https://www.postgresql.org/docs/current/sql-createindex.html)：[](https://www.postgresql.org/docs/current/sql-createindex.html)

 **> 索引定义中使用的所有函数和运算符都必须是“不可变的”...

我看到了两种利用（更有效的）部分索引的方法：

### *1\. 以固定*日期为条件的部分索引：

```
CREATE INDEX queries_recent_idx ON queries_query (user_sid, created)
WHERE created > '2013-01-07 00:00'::timestamp; 
```

**假设** `created`实际上定义为**`timestamp`**。为列 ( ) 提供`timestamp`常量是行不通的。转换from to （反之亦然）取决于当前时区设置，并且***不是 immutable***。使用匹配数据类型的常量。了解带/不带时区的时间戳的基础知识：`timestamptz``timestamp with time zone``timestamp``timestamptz`

 ***   [在 Rails 和 PostgreSQL 中完全忽略时区](https://stackoverflow.com/questions/9571392/ignoring-timezones-altogether-in-rails-and-postgresql/9576170#9576170)

*在流量较低的几个小时删除并重新创建*该索引，可能每天或每周使用一个 cron 作业（或任何对您来说足够好的东西）。创建索引非常快，尤其是相对较小的部分索引。此解决方案也不需要向表中添加任何内容。

假设***没有对表的并发访问***，可以使用如下函数完成自动索引重新创建：

```
CREATE OR REPLACE FUNCTION f_index_recreate()
  RETURNS void
  LANGUAGE plpgsql AS
$func$
BEGIN
   DROP INDEX IF EXISTS queries_recent_idx;
   EXECUTE format('
      CREATE INDEX queries_recent_idx
      ON queries_query (user_sid, created)
      WHERE created > %L::timestamp'
    , LOCALTIMESTAMP - interval '30 days');  -- timestamp constant
--  , now() - interval '30 days');           -- alternative for timestamptz
END
$func$; 
```

称呼：

```
SELECT f_index_recreate(); 
```

`now()`(就像你一样) 相当于`CURRENT_TIMESTAMP`and returns `timestamptz`。改用或`timestamp`使用。`now()::timestamp``LOCALTIMESTAMP`

*   [仅选择今天（从午夜开始）的时间戳](https://stackoverflow.com/questions/9716868/select-todays-since-midnight-timestamps-only/9717125#9717125)

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=9122f9a1125f3eaa51b038ed471380ba)*
[旧[sqlfiddle](http://sqlfiddle.com/#!17/f0ddb5/1)]

* * *

如果您必须处理对表的***并发访问***，请使用`DROP INDEX CONCURRENTLY`and `CREATE INDEX CONCURRENTLY`。但是您不能将这些命令包装到一个函数中，因为[根据文档](https://www.postgresql.org/docs/current/sql-createindex.html#SQL-CREATEINDEX-CONCURRENTLY)：

> `CREATE INDEX`...可以在事务块内执行常规命令，但`CREATE INDEX CONCURRENTLY`不能。

因此，有***两个单独的交易***：

```
CREATE INDEX CONCURRENTLY queries_recent_idx2 ON queries_query (user_sid, created)
WHERE  created > '2013-01-07 00:00'::timestamp;  -- your new condition 
```

然后：

```
DROP INDEX CONCURRENTLY IF EXISTS queries_recent_idx; 
```

（可选）重命名为旧名称：

```
ALTER INDEX queries_recent_idx2 RENAME TO queries_recent_idx; 
```

### 2.“归档”标签条件下的部分索引

将`archived`标签添加到您的表中：

```
ALTER queries_query ADD COLUMN archived boolean NOT NULL DEFAULT FALSE; 
```

`UPDATE`每隔您选择“淘汰”旧行并创建索引的列，如：

```
CREATE INDEX some_index_name ON queries_query (user_sid, created)
WHERE NOT archived; 
```

向您的查询添加匹配条件（即使它看起来是多余的）以允许它使用索引。检查`EXPLAIN ANALYZE`查询计划器是否赶上 - 它应该能够在较新的日期使用索引进行查询。但它不会理解不完全匹配的更复杂的条件。

您不必删除并重新创建索引，但`UPDATE`表上的索引可能比重新创建索引更昂贵，并且表会稍大一些。

我会选择第**一个**选项（索引娱乐）。事实上，我在几个数据库中使用了这个解决方案。第二个会导致更昂贵的更新。

随着时间的推移，这两种解决方案都保留了它们的有用性，随着索引中包含更多过时的行，性能会慢慢下降。****

# gcc - 将 GCC 汇编代码转换为 armasm 汇编代码

> ID：14744938
> 
> 赞同：1
> 
> 时间：2013-02-07T06:23:37.067
> 
> 标签：gcc, assembly, arm, using-directives

我正在尝试将 GCC 汇编代码转换为 ARMASM 汇编代码，任何人都可以帮我解决这个问题。主要问题是 .req .unreq .qn.dn 。我想知道上述指令的等价物。我试过 ALIAS 它没有用。

```
 .align   4
.global   ne10_fir_float_neon
.extern   ne10_qMaskTable32
.thumb
.thumb_func

ne10_fir_float_neon:
PUSH    {r4-r12,lr}    @push r12:
to keep stack 8 bytes aligned
@/*ARM Registers*/
pStateStruct     .req   R0
pSrc             .req   R1
pDst             .req   R2
blockSize        .req   R3

pState           .req   R4             @/* State pointer */
pCoeffs          .req   R5             @/* Coefficient pointer */
pStateCurnt      .req   R6             @/* Points to the current sample of the state */

pX               .req   R7             @/* Temporary pointers for state buffer */
pB               .req   R8             @/* Temporary pointers for coefficient buffer */
numTaps          .req   R9             @/* Length of the filter */

tapCnt           .req   R10            @ /* Loop counter */
Count            .req   R11            @ /* Loop counter */
pTemp            .req   R11
pMask            .req   R14            @  /* Mask Table */

mask             .req   R12

@/*NEON variale Declaration*/
qInp             .qn   Q0.F32
dInp_0           .dn   D0.F32
dInp_1           .dn   D1.F32
qCoeff           .qn   Q1.F32
dCoeff_0         .dn   D2.F32
dCoeff_1         .dn   D3.F32
qZero            .qn   Q2.F32

qMask            .qn   Q3.U32
dMask_0          .dn   D6.U32
dMask_1          .dn   D7.U32
dOut_0           .dn   D6.F32
dOut_1           .dn   D7.F32

qAcc0            .qn   Q8.F32
dAcc0_0          .dn   D16.F32
dAcc0_1          .dn   D17.F32

qTemp            .qn   Q9.F32
dTemp_0          .dn   D18.F32
dTemp_1          .dn   D19.F32

qTemp1           .qn   Q10.F32
dTemp1_0         .dn   D20.F32
dTemp1_1         .dn   D21.F32
qTemp2           .qn   Q11.F32
qTemp3           .qn   Q12.F32
qMask1           .qn   Q13.U32
dMask1_0         .dn   D26.U32
dMask1_1         .dn   D27.U32
qMaskTmp         .qn   Q14.U32
dMaskTmp_0       .dn   D28.U32
dMaskTmp_1       .dn   D29.U32

qAcc1            .qn   Q3.F32
qAcc2            .qn   Q13.F32
qAcc3            .qn   Q15.F32

LDRH        numTaps,[pStateStruct],#4
LDR         pState,[pStateStruct],#4
LDR         pCoeffs,[pStateStruct],#4

@/* S->state buffer contains previous frame (numTaps - 1) samples */
@/* pStateCurnt points to the location where the new input data should be written */
@/*pStateCurnt = &(S->state[(numTaps - 1u)])@*/
SUB         mask,numTaps,#1
LDR         pMask,=ne10_qMaskTable32
                   AND         tapCnt,numTaps,#3
                   ADD         pStateCurnt,pState,mask,LSL #2
                   AND         mask,blockSize,#3

                   @/* Apply loop unrolling and compute 4 output values simultaneously.
                    @* The variables acc0 ... acc3 hold output values that are being computed:
                    @*
                    @*    acc0 =  b[numTaps-1] * x[n-numTaps-1] + b[numTaps-2] * x[n-numTaps-2] + b[numTaps-3] * x[n-numTaps-3] +...+ b[0] * x[0]
                    @*    acc1 =  b[numTaps-1] * x[n-numTaps] +   b[numTaps-2] * x[n-numTaps-1] + b[numTaps-3] * x[n-numTaps-2] +...+ b[0] * x[1]
                    @*    acc2 =  b[numTaps-1] * x[n-numTaps+1] + b[numTaps-2] * x[n-numTaps] +   b[numTaps-3] * x[n-numTaps-1] +...+ b[0] * x[2]
                    @*    acc3 =  b[numTaps-1] * x[n-numTaps+2] + b[numTaps-2] * x[n-numTaps+1] + b[numTaps-3] * x[n-numTaps]   +...+ b[0] * x[3]
                    @*/

                   @/*If numTaps,blockSize are not  multiples of 4,  Get the appropriate Masks*/

                   ADD         pTemp,pMask,tapCnt,LSL #4
                   VEOR        qZero,qZero
                   ADD         pX,pMask,mask,LSL #4
                   VLD1        {dMaskTmp_0,dMaskTmp_1},[pTemp]
                   VLD1        {dMask1_0,dMask1_1},[pX]

                   @/* Copy blockCnt number of  new input samples into the state buffer */

                   SUBS        blockSize,#4
                   BLT         firEndOuterLoop

                   @/* Compute 4 outputs at a time*/

                   firOuterLoop:

                   VLD1        {dTemp_0,dTemp_1},[pSrc]!
                   MOV         pX,pState
                   MOV         pB,pCoeffs
                   @/* Read the first four samples from the state buffer:
                    @* x[n-numTaps], x[n-numTaps-1], x[n-numTaps-2],x[n-numTaps-3] */

                   VST1        {dTemp_0,dTemp_1},[pStateCurnt]!
                   @/* Zero the Accumulators*/
                   VEOR        qAcc0,qAcc0
                   VLD1        {dInp_0,dInp_1},[pX]!

                   @//* Read the first four coefficients b[numTaps] to b[numTaps-3] */
                   VLD1        {dCoeff_0,dCoeff_1},[pB]!
                   @/* Loop unrolling.  Process 4 taps at a time. */
                   SUBS        tapCnt,numTaps,#4
                   VLD1        {dTemp_0,dTemp_1},[pX]!

                   BLT         firEndInnerLoop

                   firInnerLoop:
                   VEXT        qTemp1,qInp,qTemp,#1
                   @/* acc0 +=  b[numTaps] * x[n-numTaps-1]+ b[numTaps] * x[n-numTaps-2] +
                    @* b[numTaps] * x[n-numTaps-3] +  b[numTaps] * x[n-numTaps-4]*/
                   VMLA        qAcc0,qInp,dCoeff_0[0]
                   @/* acc1 +=  b[numTaps-1] * x[n-numTaps-2]+ b[numTaps-1] * x[n-numTaps-3] +
                    @b[numTaps-1] * x[n-numTaps-4] +*b[numTaps-1] * x[n-numTaps-5]*/
                   VMUL        qAcc1,qTemp1,dCoeff_0[1]

                   VEXT        qTemp2,qInp,qTemp,#2
                   @/* acc2 +=  b[numTaps-2] * x[n-numTaps-3]+ b[numTaps-2] * x[n-numTaps-4] +
                    @b[numTaps-2] * x[n-numTaps-5] + *b[numTaps-2] * x[n-numTaps-6]*/
                   VMUL        qAcc2,qTemp2,dCoeff_1[0]
                   VADD        qAcc0, qAcc0, qAcc1

                   VEXT        qTemp3,qInp,qTemp,#3
                   @/* acc3 +=  b[numTaps-3] * x[n-numTaps-4]+ b[numTaps-3] * x[n-numTaps-5] +
                    @b[numTaps-3] * x[n-numTaps-6] +*b[numTaps-3] * x[n-numTaps-7]  */
                   VMUL        qAcc3,qTemp3,dCoeff_1[1]
                   VADD        qAcc0, qAcc0, qAcc2

                   VMOV        qInp,qTemp
                   VLD1        {dTemp_0,dTemp_1},[pX]!
                   VADD        qAcc0, qAcc0, qAcc3

                   SUBS        tapCnt,#4
                   @/* Read the b[numTaps-4] to b[numTaps-7]  coefficients */
                   VLD1        {dCoeff_0,dCoeff_1},[pB]!

                   BGE         firInnerLoop
                   firEndInnerLoop:

                   ADDS        tapCnt, tapCnt, #4
                   BEQ         firStoreOutput

                   @/* If the filter length is not a multiple of 4, compute the remaining filter taps */
                   @/*Select only the remaining filter Taps*/
                   VMOV        qMask,qMaskTmp
                   VBSL        qMask,qCoeff,qZero
                   VEXT        qTemp1,qInp,qTemp,#1
                   VMLA        qAcc0,qInp,dOut_0[0]
                   VEXT        qTemp2,qInp,qTemp,#2
                   VMLA        qAcc0,qTemp1,dOut_0[1]
                   VMLA        qAcc0,qTemp2,dOut_1[0]

                   firStoreOutput:
                   @/* Advance the state pointer by 4 to process the next group of 4 samples */
                   ADD         pState,#16

                   @/* The results in the 4 accumulators are in 2.30 format.  Convert to 1.31
                    @ * Then store the 4 outputs in the destination buffer. */
                   SUBS        blockSize,#4
                   VST1        {dAcc0_0,dAcc0_1},[pDst]!

                   BGE         firOuterLoop

                   firEndOuterLoop:
                   @/*Handle BlockSize Not a Multiple of 4*/
                   ADDS        blockSize,#4
                   BEQ         firCopyData
                   @/*Copy the Remaining BlockSize Number of Input Sample to state Buffer*/
                   VMOV        qMask,qMask1
                   VLD1        {dTemp1_0,dTemp1_1},[pStateCurnt]
                   VLD1        {dTemp_0,dTemp_1},[pSrc]

                   ADD         pSrc,pSrc,blockSize,LSL #2
                   MOV         pX,pState
                   MOV         pB,pCoeffs

                   VBSL        qMask,qTemp,qTemp1
                   VST1        {dMask_0,dMask_1},[pStateCurnt]
                   VLD1        {dInp_0,dInp_1},[pX]!

                   ADD         pStateCurnt,pStateCurnt,blockSize, LSL #2

                   @/* Zero the Accumulators*/
                   VEOR        qAcc0,qAcc0
                   VLD1        {dCoeff_0,dCoeff_1},[pB]!
                   SUBS        tapCnt,numTaps,#4
                   VLD1        {dTemp_0,dTemp_1},[pX]!

                   BLT         firEndInnerLoop1

                   firInnerLoop1:

                   VEXT        qTemp1,qInp,qTemp,#1
                   VMLA        qAcc0,qInp,dCoeff_0[0]
                   VEXT        qTemp2,qInp,qTemp,#2
                   VMLA        qAcc0,qTemp1,dCoeff_0[1]
                   VEXT        qTemp3,qInp,qTemp,#3
                   VMLA        qAcc0,qTemp2,dCoeff_1[0]
                   VMOV        qInp,qTemp
                   VMLA        qAcc0,qTemp3,dCoeff_1[1]
                   VLD1        {dCoeff_0,dCoeff_1},[pB]!
                   SUBS        tapCnt,#4
                   VLD1        {dTemp_0,dTemp_1},[pX]!

                   BGE         firInnerLoop1
                   firEndInnerLoop1:

                   VMOV        qMask,qMaskTmp
                   VBSL        qMask,qCoeff,qZero
                   VEXT        qTemp1,qInp,qTemp,#1
                   VMLA        qAcc0,qInp,dOut_0[0]
                   VEXT        qTemp2,qInp,qTemp,#2
                   VMLA        qAcc0,qTemp1,dOut_0[1]
                   VMLA        qAcc0,qTemp2,dOut_1[0]
                   VMOV        qMask,qMask1
                   VLD1        {dTemp_0,dTemp_1},[pDst]

                   @/* If the blockSize is not a multiple of 4, Mask the unwanted Output */

                   VBSL        qMask,qAcc0,qTemp
                   VST1        {dMask_0,dMask_1},[pDst]
                   ADD         pDst,pDst,blockSize,LSL #2
                   ADD         pState,pState,blockSize,LSL #2

                   firCopyData:
                   @/* Processing is complete.  Now shift the data in the state buffer down by
                    @** blockSize samples.  This prepares the state buffer for the next function
                    @** call. */

                   @/* Points to the start of the state buffer */

                   SUB         numTaps,numTaps,#1
                   AND         mask,numTaps,#3
                   LDR         pStateCurnt,[pStateStruct,#-8]
                   ADD         pTemp,pMask,mask,LSL #4
                   VLD1        {dInp_0,dInp_1},[pState]!
                   VLD1        {dMask_0,dMask_1},[pTemp]

                   @/* copy data */

                   SUBS        Count,numTaps,#4
                   BLT         firEnd
                   firCopyLoop:
                   VST1        {dInp_0,dInp_1},[pStateCurnt]!
                   SUBS        Count,#4
                   VLD1        {dInp_0,dInp_1},[pState]!
                   BGE         firCopyLoop

                   firEnd:

                   VLD1        {dTemp_0,dTemp_1},[pStateCurnt]
                   VBSL        qMask,qInp,qTemp
                   VST1        {dOut_0,dOut_1},[pStateCurnt]
                   ADD         pStateCurnt,pStateCurnt,mask, LSL #2

                   @/*Return From Function*/
                   POP     {r4-r12,pc}
                   @/*ARM Registers*/
                   .unreq    pStateStruct
                   .unreq    pSrc
                   .unreq    pDst
                   .unreq    blockSize

                   .unreq    pState
                   .unreq    pCoeffs
                   .unreq    pStateCurnt

                   .unreq    pX
                   .unreq    pB
                   .unreq    numTaps

                   .unreq    tapCnt
                   .unreq    Count
                   .unreq    pTemp
                   .unreq    pMask

                   .unreq    mask

                   @/*NEON variale Declaration*/
                   .unreq    qInp
                   .unreq    dInp_0
                   .unreq    dInp_1
                   .unreq    qCoeff
                   .unreq    dCoeff_0
                   .unreq    dCoeff_1
                   .unreq    qZero

                   .unreq    qMask
                   .unreq    dMask_0
                   .unreq    dMask_1
                   .unreq    dOut_0
                   .unreq    dOut_1

                   .unreq    qAcc0
                   .unreq    dAcc0_0
                   .unreq    dAcc0_1

                   .unreq    qTemp
                   .unreq    dTemp_0
                   .unreq    dTemp_1

                   .unreq    qTemp1
                   .unreq    dTemp1_0
                   .unreq    dTemp1_1
                   .unreq    qTemp2
                   .unreq    qTemp3
                   .unreq    qMask1
                   .unreq    dMask1_0
                   .unreq    dMask1_1
                   .unreq    qMaskTmp
                   .unreq    dMaskTmp_0
                   .unreq    dMaskTmp_1

                   .unreq    qAcc1
                   .unreq    qAcc2
                   .unreq    qAcc3
                   .end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:49:09.550

明白了 .req 与 RN 相同，并进行了一些调整并删除了 unnesaary 指令使其正常工作！

# iphone - 如何使用doGraphGet方法在facebook graph api中获取facebook登录的电子邮件ID和密码？

> ID：14744939
> 
> 赞同：2
> 
> 时间：2013-02-07T06:23:36.513
> 
> 标签：iphone, ios, objective-c

我是iphone开发者的初学者。我想通过 facebook 登录我的应用程序。我有使用 facebook 图形 API。我已经通过了 doGraphGet 方法，但它没有提供电子邮件 ID 和密码。我正在使用下面的代码..

```
-(IBAction)getMeButtonPressed:(id)sender {
    FbGraphResponse *fb_graph_response = [fbGraph doGraphGet:@"me" withGetVars:nil];
    NSLog(@"getMeButtonPressed:  %@", fb_graph_response.htmlResponse);

} 
```

它返回的响应

id、firstname、lastname、name、link、username、gender 但它不提供电子邮件 ID 和密码

所以，给出适用于我的代码的任何建议和源代码..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T06:27:58.133

为此，首先您需要询问用户权限，并为 Facebook Api 设置不同的权限。

看看下面的权限：

```
arrFBPermission = [[NSArray arrayWithObjects:
                        @"email",
                        @"user_birthday",
                        @"user_likes",
                        @"user_location",
                        @"user_photos",
                        @"read_stream",                            
                        @"status_update",
                        @"user_about_me",
                        @"read_friendlists",
                        @"friends_about_me",
                        @"friends_birthday",
                        @"friends_photos",
                        nil] retain]; 
```

然后，根据最新的 facebook SDK，您可以使用如下登录方法：

```
[FBSession openActiveSessionWithReadPermissions:arrFBPermission
                                       allowLoginUI:YES
                                  completionHandler:
                                                 ^(FBSession *session,
                                                   FBSessionState state,
                                                   NSError *error) {
                                                     [self sessionStateChanged:session state:state error:error];
                                                 }]; 
```

登录成功后，会调用下面的委托方法：

```
- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState) state
                  error:(NSError *)error
{
} 
```

并且 facebook api 不会为您提供密码。

希望，你会获得成功。

快乐编码！

干杯!

# jquery - 如何在 jquery ui 对话框小部件上设置焦点？

> ID：14744940
> 
> 赞同：1
> 
> 时间：2013-02-07T06:23:39.313
> 
> 标签：jquery, css, jquery-ui

我计划在一个页面上有多个无模式对话框。我希望当一个对话框被点击时，它会得到这个`.ui-state-focus`类，并且当它被点击时它会被删除，这样我就可以轻松地设置一个活动/非活动对话框的样式。我基本上想改变它的边框颜色。

我正在使用 jqueryUI 1.10，不幸的是，我无论如何都看不到仅使用 CSS 来设置对话框的样式焦点。

添加此功能的最佳方法是什么？我愿意基于原始对话框小部件派生一个新的对话框小部件，但希望就如何最好地编写代码提供一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:57:32.420

像这样的东西：

```
$('.ui-dialog').on('click', function() {
    $('.ui-dialog').removeClass('ui-state-focus');
    $(this).addClass('ui-state-focus');
}); 
```

如果用户单击任何对话框以外的任何内容，则删除焦点：

```
$(document).on('click', function(e) {
    var $target = $(e.target);
    if(!$target.hasClass('ui-dialog') && $target.parents().hasClass('ui-dialog')) {
        $('.ui-dialog').removeClass('ui-state-focus');
    }
}); 
```

# java - ControlP5 Textarea 空格字符问题

> ID：14744943
> 
> 赞同：0
> 
> 时间：2013-02-07T06:23:48.423
> 
> 标签：java, text, nullpointerexception, processing

我在使用 TextArea 对象时遇到了 ControlP5 的这个问题：

调用 ' `setText(fooString)`' 时，如果 fooString 本身在一行中包含一个 ' '，Java 将抛出一个空指针异常。

例如：

```
void setup()
{
  size(300,300);
  cp5 = new ControlP5(this);
  textArea = cp5.addTextarea("txt")
                  .setPosition(0,0)
                  .setSize(30,30)
                  .setFont(createFont("arial",12))
                  .setLineHeight(14)
                  .setColor(color(0))
                  .setColorBackground(color(0))
                  .setColorForeground(color(255,100));
                  ;
  String s = "Hello\n       \nworld";
  textArea.setText(s);
} 
```

Java 抛出：“ `StringIndexOutOfBoundsException`”和“ `NullPointerException`”

我的解决方法（忽略s =“[一堆空格]”的情况）：

```
s = s.replaceAll("\r", "\n");    // Use just one type of new line
s = s.replaceAll("\n +", "\n");  // Case 1
s = s.replaceAll(" +\n", "\n");  // Case 2 
```

有没有更好的方法来解决这个问题，或者上面的代码是一个错误（就我而言）？

# python - 使用 (X)HTML 实体解析 XML

> ID：14744945
> 
> 赞同：15
> 
> 时间：2013-02-07T06:23:58.483
> 
> 标签：python, xml, python-3.x, elementtree

尝试使用 ElementTree 解析包含未定义实体（即`&nbsp;`）的 XML 会引发：

`ParseError: undefined entity &nbsp;`

在 Python 2.x 中，可以通过创建解析器（[文档](http://effbot.org/elementtree/elementtree-xmlparser.htm#tag-ET.XMLParser.entity)）来更新 XML 实体字典：

```
parser = ET.XMLParser()
parser.entity["nbsp"] = unichr(160) 
```

但是如何用 Python 3.x 做同样的事情呢？

* * *

更新：我有误解，因为我忽略了`parser.parser.UseForeignDTD(1)`在尝试更新 XML 实体字典之前我正在调用，这导致解析器出错。幸运的是，@m.brindley 很耐心并指出 XML 实体 dict 仍然存在于 Python 3.x 中，并且可以像在 Python 2.x 中一样更新

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-09T09:03:47.847

这里的问题是 XML 中唯一有效的助记符实体是`quot`、`amp`、`apos`和。这意味着几乎所有 (X)HTML 命名实体都必须使用[XML 1.1 规范](http://www.w3.org/TR/2006/REC-xml11-20060816/)中定义的[实体声明标记](http://www.w3.org/TR/2006/REC-xml11-20060816/#sec-entity-decl)在 DTD 中定义。如果文档是独立的，则应使用内联 DTD 来完成，如下所示：`lt``gt`

```
<?xml version="1.1" ?>
<!DOCTYPE naughtyxml [
    <!ENTITY nbsp "&#0160;">
    <!ENTITY copy "&#0169;">
]>
<data>
    <country name="Liechtenstein">
        <rank>1&nbsp;&gt;</rank>
        <year>2008&copy;</year>
        <gdppc>141100</gdppc>
        <neighbor name="Austria" direction="E"/>
        <neighbor name="Switzerland" direction="W"/>
    </country>
</data> 
```

`XMLParser`in`xml.etree.ElementTree`使用 an来进行实际的`xml.parsers.expat`解析。在 的 init 参数中，“[预定义的 HTML 实体](http://docs.python.org/3/library/xml.etree.elementtree.html#xmlparser-objects)`XMLParser`”有一个空格，但该参数尚未实现。在 init 方法中创建了一个名为的空字典，它用于查找未定义的实体。`entity`

我不认为 expat（通过扩展，ET XMLParser）能够处理将命名空间切换到 XHMTL 之类的东西来解决这个问题。可能是因为它不会获取外部命名空间定义（我尝试`xmlns="http://www.w3.org/1999/xhtml"`为数据元素创建默认命名空间，但效果不佳）但我无法确认。默认情况下，expat 将针对非 XML 实体引发错误，但您可以通过定义外部 DOCTYPE 来解决此问题 - 这会导致 expat 解析器将未定义的实体条目传递回`ET.XMLParser`'`_default()`方法。

该`_default()`方法`entity`在实例中查找字典，`XMLParser`如果找到匹配的键，它将用关联的值替换实体。这维护了问题中提到的 Python-2.x 语法。

**解决方案：**

*   如果数据没有外部 DOCTYPE 并且有 (X)HTML 助记符实体，那么你就不走运了。它不是有效的 XML，expat 抛出错误是正确的。您应该添加一个外部 DOCTYPE。
*   如果数据具有外部 DOCTYPE，您可以使用旧语法将助记符名称映射到字符。*注意：您应该`chr()`在 py3k 中使用 -`unichr()`不再是有效名称*
    *   或者，您可以更新`XMLParser.entity`以`html.entities.html5`将所有有效的 HTML5 助记符实体映射到它们的字符。
*   如果数据是 XHTML，您可以创建子类`HTMLParser`来处理助记符实体，但这不会返回`ElementTree`所需的值。

`HTMLParser`这是我使用的片段 - 它通过（以演示如何通过子类化添加实体处理）、`ET.XMLParser`实体映射和`expat`（由于外部 DOCTYPE 将默默地忽略未定义的实体）来解析带有外部 DOCTYPE 的 XML 。有一个有效的 XML 实体 ( `&gt;`) 和一个未定义的实体 ( `&copy;`)，我`chr(0x24B4)`使用`ET.XMLParser`.

```
from html.parser import HTMLParser
from html.entities import name2codepoint
import xml.etree.ElementTree as ET
import xml.parsers.expat as expat

xml = '''<?xml version="1.0"?>
<!DOCTYPE data PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<data>
    <country name="Liechtenstein">
        <rank>1&gt;</rank>
        <year>2008&copy;</year>
        <gdppc>141100</gdppc>
        <neighbor name="Austria" direction="E"/>
        <neighbor name="Switzerland" direction="W"/>
    </country>
</data>'''

# HTMLParser subclass which handles entities
print('=== HTMLParser')
class MyHTMLParser(HTMLParser):
    def handle_starttag(self, name, attrs):
        print('Start element:', name, attrs)
    def handle_endtag(self, name):
        print('End element:', name)
    def handle_data(self, data):
        print('Character data:', repr(data))
    def handle_entityref(self, name):
        self.handle_data(chr(name2codepoint[name]))

htmlparser = MyHTMLParser()
htmlparser.feed(xml)

# ET.XMLParser parse
print('=== XMLParser')
parser = ET.XMLParser()
parser.entity['copy'] = chr(0x24B8)
root = ET.fromstring(xml, parser)
print(ET.tostring(root))
for elem in root:
    print(elem.tag, ' - ', elem.attrib)
    for subelem in elem:
        print(subelem.tag, ' - ', subelem.attrib, ' - ', subelem.text)

# Expat parse
def start_element(name, attrs):
    print('Start element:', name, attrs)
def end_element(name):
    print('End element:', name)
def char_data(data):
    print('Character data:', repr(data))
print('=== Expat')
expatparser = expat.ParserCreate()
expatparser.StartElementHandler = start_element
expatparser.EndElementHandler = end_element
expatparser.CharacterDataHandler = char_data
expatparser.Parse(xml) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-10T23:25:18.347

我遇到了类似的问题，并通过使用[lxml](http://lxml.de/)解决了这个问题。它`etree.XMLParser`有一个`recover`关键字参数，强制它尝试忽略损坏的 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-19T05:52:27.327

```
from xml.etree import ElementTree
from html.entities import name2codepoint
from io import StringIO
import unicodedata

url = "https://docs.python.org/3/library/html.parser.html"
headers = {
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 \
    (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36'
}
html_response = requests.get(url=url, headers = headers)

def getParser():
    return xp

with open("sample.html", "w", encoding="utf-8") as html_file:
    html_file.write(html_response.text)

xp = ElementTree.XMLParser()
for k, v in name2codepoint.items(): xp.entity[k] = chr(v)

with open("sample.html", "r", encoding="utf-8") as html_file:
    html = html_file.read()
    b = StringIO(html)
    t = ElementTree.parse(b, xp)
    print(t) 
```

# javascript - Javascript基于层次结构获取节点内部文本

> ID：14744948
> 
> 赞同：0
> 
> 时间：2013-02-07T06:24:12.340
> 
> 标签：javascript, html, xslt, dom

我的 HTML 看起来像

```
<li value="0">
 <a href="#">
 <span>DATA TO GET</span><![if gt IE 6]>
 </a><![endif]><!--[if lte IE 6]><table><tr><td><![endif]-->
 <ul>
 <li value="0">
 <a onclick="return showPane('SomePane',this)" href="#">ACTIVE NODE</a>
 </li>
 </ul> 
```

此 html 是使用 xsl 生成的。现在我想使用 javascript**获取 span 标签内的数据。**我尝试了以下方法：

```
var nameParent =  activeTab.parentNode.parentNode.previousSibling;
window.alert(activeTab.innerHTML);
window.alert(activeTab.parentNode.parentNode.previousSibling.childNode); 
```

在这里，变量**activeTab**被传递给包含文本 ACTIVE NODE 的锚点。第一个警报提供了正确的数据，即**ACTIVE NODE**，但第二个警报显示为**undefined**。

我认为我正在遍历正确的路径和适当的元素。有人可以指出这里出了什么问题以及我还能做些什么来获取所需的数据。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:34:29.587

尝试使用`firstChild`而不是`childNode`：

```
var nameParent =  activeTab.parentNode.parentNode.previousSibling;
window.alert(nameParent.firstChild.innerHTML); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:40:46.970

尝试这个

```
var nameParent =  activeTab.parentNode.parentNode;
window.alert(activeTab.innerHTML);
window.alert(nameParent.parentNode.children[0].children[0].innerHTML); 
```

我强烈建议在您的项目中使用 jQuery，它提供了在 .find() 和 .children()、.parent 等 dom 元素之间轻松导航的方法，以获得更易读的代码。

谢谢

# dynamic-programming - 动态规划 - topcoder

> ID：14744951
> 
> 赞同：1
> 
> 时间：2013-02-07T06:24:15.497
> 
> 标签：dynamic-programming

我一直在尝试 Topcoder 上的 dp 教程。为练习提供的问题之一是[MiniPaint](http://www.imagebam.com/image/751f34236088608)。我想我已经部​​分解决了 - 找到最小的没有。给定编号的误涂数。笔画，对于每一行，然后计算整个图片（再次使用 dp，类似于背包问题）。但是，我不确定如何计算最小值。没有每一行。

PS我后来找到了[匹配编辑](http://www.imagebam.com/image/f126a2236088926)，但是找到了最小值的代码。不。每行的误绘似乎是错误的。有人可以准确解释他们在代码中做了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:23:21.507

给定可用于绘制它**的笔画量，**该`stripScore()`函数返回每行的最小错误绘制数。虽然我不确定这个论点是否正确，但想法是从特定行开始，可以使用的笔划数量和直接在它之前的区域的颜色。**`rowid``start``needed`**

 **> 该算法的关键在于，第 k 个区域右侧区域的最佳得分由所需的笔画数和用于绘制第 (k-1) 个区域的颜色唯一确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-10T05:39:38.787

## 直觉

我连续 3 天一直在用这个问题抨击我的头，没有意识到它需要连续使用两次动态编程逻辑。与 topcoder 提供的方法相比，我的方法是自下而上的。首先，我不会计算我可以实现的**最小错误绘制数，而是计算我可以使用****strokes****绘制的最大单元格数`maxStrokes`**。通过从矩阵的总单元格中减去我的发现，可以很容易地计算出结果。但我怎么能真正做到呢？最初的观察必须是每一行都可以为我提供一些绘制的单元格以换取一些笔画。**这不依赖于其余的行**. 这意味着，对于每一行，我可以计算我可以在该特定行上绘制的最大单元格数，以及一定数量的笔画。

## 例子

**Input** =['BWWWB','WBWWW'], **maxStrokes** =3
现在让我们看看第一行 BBWWB，并将 C 表示为我可以用 Q 笔画
**Q C**
0 0 的最大单元格数（我不能用 0 笔画)
1 3 ( **BB** WW **B** )
2 4 ( **BBWW** B)
3 5 ( **BBWWB** )
我们可以很容易地用一个长度为 4 的数组来表示上述结果，该数组为每个索引（笔画）存储可以绘制的最大单元数，即**[0,3,4,5]**
很容易看出第二行以相同的方式会有一个数组**[0,4,4,5]**。

现在可以仅通过这两个数组轻松计算结果，因为我们正在寻找的是两个选择的组合，每个计算数组一个，这将产生我可以用 3 次笔画绘制的最多的单元格。我的选择是什么？我的数组中的每一项都代表我可以用索引笔画绘制的最大单元格数。因此，对于第一个数组，一个选择是用 2 个笔划绘制 4 个单元格。然后我可以将该选择与第二个数组的第一个项目 4 结合起来，这意味着我可以用 1 个笔划绘制 4 个单元格。我的最终结果将是 4+4=8 个单元格，2+1=3 个笔划，这恰好是我能得到的最好结果。然后输出将微不足道地是 2*5-8=2 最小误绘。但是，我们需要找到**一种最佳方法来计算不同的组合**每行的项目以及它们可以给我带来的总和。

## 过程

我算法的第一部分填充了两个非常重要的表。让我们用**N, M**表示给定矩阵的维度。第一个表`dp`是一个**N*M*maxStrokes**矩阵。`dp[i][j][k]`表示**我可以用 k 笔画从第 0 个单元格到第 i 行的第 j 个单元格绘制的最大单元格数**。至于 maxPainted 表，那是一个 N*maxStrokes 矩阵。`maxPainted[i][k]`存储**我可以用 k 笔画在第 i 行中绘制的最大单元格数，**并且与上面示例中计算的数组相同。为了计算后者，我需要先计算`dp`。公式如下：

**`dp[i][j][k]= MAX (1,dp[i][r][k]+1 (if A[i][j]==A[i][r]) ,dp[i][r][k-1]+1 (if A[i][j]!=A[i][r]))`，对于每 0<=r<j**
可以翻译为：我可以用 k 笔画到第 i 行的第 j 个单元格的最大单元格数是：

*   1，因为我可以忽略所有以前的单元格，单独绘制这个单元格
*   `dp[i][r][k]+1`, 因为当`A[i][j]==A[i][r]`, 我可以不用额外的笔画来扩展那个颜色
*   `dp[i][r][k-1]+1`, 因为什么时候`A[i][j]==A[i][r]`, 我得用新的笔画来画`A[i][j]`

现在很明显，`dp`需要计算表格以获得每行的最佳可能场景，即我可以使用每个可能的可用笔划数绘制的最大单元格数。`maxPainted`但是，一旦我计算了表格以得到我的结果，我该如何利用它呢？

我的方法的第二部分使用**0-1 背包**`maxStrokes`问题的变体来计算我可以使用可用笔划绘制的最大单元数。真正让这件事变得具有挑战性的是，与经典的背包相比，我只能从每一行中选择一项，然后计算所有可能的组合，这些组合不超过所需的笔划限制。为了实现这一点，我将首先创建一个长度为**N*M +1**的新数组，称为`possSums`. 让我们用达到总和**S**`possSums[S]`所需的**最小**笔划数来表示。我的目标是计算每一行对这个数组的贡献。让我们用前面的例子来演示一下。

 **所以我有一个 2*5 输入，因此该`possSums`数组将由 10+1 个元素组成，我们将其设置为**Infinity**，因为我们试图最小化达到所述总和所需的击键次数。
所以，`possSums`= **[0,∞,∞,∞,∞,∞,∞,∞,∞,∞,∞]**，第一项是 0 因为我可以用 0 笔画绘制 0 个单元格。我们现在要做的是计算每一行对 possSums 的贡献。这意味着对于我`maxPainted`数组的每一行，每个元素都需要提供一个特定的总和，这将模拟它被选择。正如我们之前演示的那样，`maxPainted[0]`= **[0,3,4,5]**. 这一行的贡献必须允许 0,3,4 和 5 作为我的 possSums 数组中可实现的总和，使用的笔画分别为 0,1,2,3。然后 possSums 将被转换为`possSums`= **[0,∞,∞,1,2,3,∞,∞,∞,∞,∞]**。下一行是`maxPainted[1]`= **[0,4,4,5]**，现在必须再次更改 possSums 以允许通过选择每个项目进行组合。请注意，每个更改都需要与同一行中的其他更改**无关。**例如，如果我们首先允许通过选择 的第一项来实现**sum=4**`maxPainted[1]`，则**sum=9**不能通过进一步选择同一个数组的 3d 项目来允许，这本质上意味着不能考虑同一行中项目的组合。为了确保不考虑此类情况，我为每一行创建了我的`possSums`数组的一个克隆，我将对它进行必要的修改，而不是我的原始数组。在考虑了 中的所有项目之后`maxPainted[1]`，possSums 看起来像这样`possSums`= **[0,∞,∞,1,1,3,∞,2,3,4,6]**，这给了我可以绘制的最大单元格数在第 8 个索引上最多 3 个笔划（总和 = 8）。因此我的输出将是 2*5-8=2

```
var minipaint=(A,maxStrokes)=>{
    let n=A.length,m=A[0].length
    , maxPainted=[...Array(n)].map(d=>[...Array(maxStrokes+1)].map(d=>0))
    , dp=[...Array(n)].map(d=>[...Array(m)].map(d=>[...Array(maxStrokes+1)].map(d=>0)))
    for (let k = 1; k <=maxStrokes; k++) 
        for (let i = 0; i <n; i++) 
            for (let j = 0; j <m; j++) {               
                    dp[i][j][k]=1 //i can always just paint the damn thing alone
                    //for every previous cell of this row
                    //consider painting it and then painting my current cell j
                    for (let p = 0; p <j; p++)
                        if(A[i][p]===A[i][j]) //if the cells are the same, i dont need to use an extra stroke
                            dp[i][j][k]=Math.max(dp[i][p][k]+1,dp[i][j][k])                    
                        else//however if they are,im using an extra stroke( going from k-1 to k)
                            dp[i][j][k]=Math.max(dp[i][p][k-1]+1,dp[i][j][k])                    

                    maxPainted[i][k]=Math.max(maxPainted[i][k],dp[i][j][k])//store the maximum cells I can paint with k strokes
            }             

    //this is where the knapsack VARIANT happens: 
    // Essentially I want to maximize the sum of my selection of strokes 
    // For each row, I can pick maximum of 1 item. Thing is,I have a constraint of my total
    // strokes used, so I will create an array of possSums whose index represent the sum I wanna reach, and values represent the MINIMUM strokes needed to reach that very sum. 

    // so possSums[k]=min Number of strokes needed to reach sum K 
    let result=0,possSums=[...Array(n*m+1)].map(d=>Infinity)

    //basecase, I can paint 0 cells with 0 strokes
    possSums[0]=0
    for (let i = 0; i < n; i++) {
        let curr=maxPainted[i],
            temp=[...possSums]// I create a clone of my possSums,
            // where for each row, I intend to alter It instead of the original array
            // in order to avoid cases where two items from the same row contribute to 
            // the same sum, which of course is incorrect.

        for (let stroke = 0; stroke <=maxStrokes; stroke++) {
            let maxCells=curr[stroke]           
            //so the way this happens is : 
            for (let sum = 0; sum <=n*m-maxCells; sum++) {
                let oldWeight=possSums[sum]//consider if UP until now, the sum was possible
                if(oldWeight==Infinity)// if it wasnt possible, i cant extend it with my maxCells
                    continue;
                // <GAME CHANGER THAT ALLOWS 1 PICK PER ROW 
                let minWeight=temp[sum+maxCells]//now, consider extending it by sum+maxCells

                // ALTERING THE TEMP ARRAY INSTEAD SO MY POTENTIAL RESULTS ARE NOT AFFECTED BY THE 
                // SUMS THAT WERE ALLOWED DURING THE SAME ROW 
                temp[sum+maxCells]=Math.min(minWeight,oldWeight+stroke)

                if(temp[sum+maxCells]<=maxStrokes)
                    result=Math.max(result,sum+maxCells)    
            }
        }
        possSums=temp
    }
    return n*m-result // returning the total number of cells minus the maximum I can paint with maxStrokes
}
```****

# objective-c - 一个项目的 xcode 4.6（xcode 崩溃）后无法重构（其他项目运行良好）

> ID：14744953
> 
> 赞同：6
> 
> 时间：2013-02-07T06:24:21.703
> 
> 标签：objective-c, xcode4.5

我做了什么：

当 xcode 似乎试图下载 10.8x 文档或其他内容时，我正在重构。如何恢复 xcode 尚未下载的内容？

我已经清理了项目，清理了快照，删除了快照目录。

这个项目在尝试重构时使 xcode 挂起。其他项目没有这个问题。

如果我想重新安装 xcode，我必须重新下载吗？这是错误信息

```
Process:         Xcode [8490]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.6 (2066)
Build Info:      IDEApplication-2066000000000000~3
App Item ID:     497799835
App External ID: 13668903
Code Type:       X86-64 (Native)
Parent Process:  launchd [144]
User ID:         501

Date/Time:       2013-02-07 13:16:52.813 +0700
OS Version:      Mac OS X 10.8.2 (12C60)
Report Version:  10

Interval Since Last Report:          376575 sec
Crashes Since Last Report:           8
Per-App Interval Since Last Report:  6013 sec
Per-App Crashes Since Last Report:   7
Anonymous UUID:                      1CBC3344-3A0F-4006-F51E-8FF9902D7CC5

Crashed Thread:  8  Dispatch queue: Refactoring parser lock

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000040

VM Regions Near 0x40:
--> 
    __TEXT                 000000010fb35000-000000010fb38000 [   12K] r-x/rwx SM=COW  /Applications/Xcode.app/Contents/MacOS/Xcode

Application Specific Information:
ProductBuildVersion: 4H127
objc[8490]: garbage collection is ON

Thread 0:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x00007fff96df3686 mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff96df2c42 mach_msg + 70
2   com.apple.CoreFoundation        0x00007fff92683803 __CFRunLoopServiceMachPort + 195
3   com.apple.CoreFoundation        0x00007fff92688ee6 __CFRunLoopRun + 1078
4   com.apple.CoreFoundation        0x00007fff926886b2 CFRunLoopRunSpecific + 290
5   com.apple.HIToolbox             0x00007fff90cac0a4 RunCurrentEventLoopInMode + 209
6   com.apple.HIToolbox             0x00007fff90cabe42 ReceiveNextEventCommon + 356
7   com.apple.HIToolbox             0x00007fff90cabcd3 BlockUntilNextEventMatchingListInMode + 62
8   com.apple.AppKit                0x00007fff9573c613 _DPSNextEvent + 685
9   com.apple.AppKit                0x00007fff9573bed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
10  com.apple.AppKit                0x00007fff95733283 -[NSApplication run] + 517
11  com.apple.AppKit                0x00007fff956d7cb6 NSApplicationMain + 869
12  com.apple.dt.Xcode              0x000000010fb36b6f 0x10fb35000 + 7023
13  com.apple.dt.Xcode              0x000000010fb36b00 0x10fb35000 + 6912

Thread 1:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x00007fff96df5d16 kevent + 10
1   libdispatch.dylib               0x00007fff8d5d0dea _dispatch_mgr_invoke + 883
2   libdispatch.dylib               0x00007fff8d5d09ee _dispatch_mgr_thread + 54

Thread 2:
0   libsystem_kernel.dylib          0x00007fff96df56d6 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff8b0aceec _pthread_workq_return + 25
2   libsystem_c.dylib               0x00007fff8b0accb3 _pthread_wqthread + 412
3   libsystem_c.dylib               0x00007fff8b097171 start_wqthread + 13

Thread 3:: com.apple.NSURLConnectionLoader
0   libsystem_kernel.dylib          0x00007fff96df3686 mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff96df2c42 mach_msg + 70
2   com.apple.CoreFoundation        0x00007fff92683803 __CFRunLoopServiceMachPort + 195
3   com.apple.CoreFoundation        0x00007fff92688ee6 __CFRunLoopRun + 1078
4   com.apple.CoreFoundation        0x00007fff926886b2 CFRunLoopRunSpecific + 290
5   com.apple.Foundation            0x00007fff8d175586 +[NSURLConnection(Loader) _resourceLoadLoop:] + 356
6   com.apple.Foundation            0x00007fff8d1d3612 __NSThread__main__ + 1345
7   libsystem_c.dylib               0x00007fff8b0aa742 _pthread_start + 327
8   libsystem_c.dylib               0x00007fff8b097181 thread_start + 13

Thread 4:
0   libsystem_kernel.dylib          0x00007fff96df3686 mach_msg_trap + 10
1   libsystem_kernel.dylib          0x00007fff96df2c42 mach_msg + 70
2   com.apple.CoreFoundation        0x00007fff92683803 __CFRunLoopServiceMachPort + 195
3   com.apple.CoreFoundation        0x00007fff92688ee6 __CFRunLoopRun + 1078
4   com.apple.CoreFoundation        0x00007fff926886b2 CFRunLoopRunSpecific + 290
5   com.apple.DTDeviceKit           0x0000000117836593 -[DTDKRemoteDeviceDataListener listenerThreadImplementation] + 229
6   com.apple.Foundation            0x00007fff8d1d3612 __NSThread__main__ + 1345
7   libsystem_c.dylib               0x00007fff8b0aa742 _pthread_start + 327
8   libsystem_c.dylib               0x00007fff8b097181 thread_start + 13

Thread 5:: com.apple.CFSocket.private
0   libsystem_kernel.dylib          0x00007fff96df5322 __select + 10
1   com.apple.CoreFoundation        0x00007fff926c84e6 __CFSocketManager + 1302
2   libsystem_c.dylib               0x00007fff8b0aa742 _pthread_start + 327
3   libsystem_c.dylib               0x00007fff8b097181 thread_start + 13

Thread 6:
0   libsystem_kernel.dylib          0x00007fff96df56d6 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff8b0aceec _pthread_workq_return + 25
2   libsystem_c.dylib               0x00007fff8b0accb3 _pthread_wqthread + 412
3   libsystem_c.dylib               0x00007fff8b097171 start_wqthread + 13

Thread 7:
0   libsystem_kernel.dylib          0x00007fff96df56d6 __workq_kernreturn + 10
1   libsystem_c.dylib               0x00007fff8b0aceec _pthread_workq_return + 25
2   libsystem_c.dylib               0x00007fff8b0accb3 _pthread_wqthread + 412
3   libsystem_c.dylib               0x00007fff8b097171 start_wqthread + 13

Thread 8 Crashed:: Dispatch queue: Refactoring parser lock
0   libsystem_c.dylib               0x00007fff8b098650 strlen + 16
1   com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224bf501 Devkit::Cpp::tmpcat(char const*) + 33
2   com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224d8c05 Devkit::Cpp::convertTokensToString(Devkit::Token*, Devkit::Token*, Devkit::TokenBuffer*, Devkit::TokenBuffer*, bool) + 275
3   com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224d515b Devkit::Cpp::expand(Devkit::Token*, Devkit::Macro*, Devkit::TokenBufferStream*) + 849
4   com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224cb105 Devkit::Cpp::expandMacro2Buffer(Devkit::Token*, Devkit::Macro*, Devkit::TokenBufferStream*) + 291
5   com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224caf5b Devkit::Cpp::macro_expand(Devkit::Token*, Devkit::Macro*) + 33
6   com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c314d Devkit::Cpp::nextToken0() + 243
7   com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c3044 Devkit::Cpp::nextToken() + 14
8   com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c2fd9 Devkit::ObjcParse::nextToken() + 19
9   com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224d2dce Devkit::ObjcParse::statement() + 662
10  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224d79c9 Devkit::ObjcParse::selectionStatement() + 301
11  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224d2aeb Devkit::ObjcParse::statementList(objc_object*) + 37
12  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224d28ab Devkit::ObjcParse::compoundStatement(objc_object*) + 131
13  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224f55fa Devkit::ObjcParse::blockLiteralExpression() + 312
14  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c7cdb Devkit::ObjcParse::postfix() + 397
15  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c7634 Devkit::ObjcParse::multiplicative() + 22
16  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c75c6 Devkit::ObjcParse::additive() + 22
17  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c7558 Devkit::ObjcParse::shift() + 22
18  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c74ea Devkit::ObjcParse::relational() + 22
19  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c747c Devkit::ObjcParse::equality() + 22
20  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c740e Devkit::ObjcParse::bitwiseAnd() + 22
21  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c73a2 Devkit::ObjcParse::bitwiseExclusiveOr() + 22
22  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c7336 Devkit::ObjcParse::bitwiseInclusiveOr() + 22
23  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c72ca Devkit::ObjcParse::logicalAnd() + 22
24  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c725e Devkit::ObjcParse::logicalOr() + 22
25  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c71d2 Devkit::ObjcParse::conditional() + 18
26  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224cadde Devkit::ObjcParse::assignment() + 18
27  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224e21ab Devkit::ObjcParse::objcKeywordList(objc_object*) + 93
28  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224e1f30 Devkit::ObjcParse::objcMessageExpression() + 244
29  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c7cdb Devkit::ObjcParse::postfix() + 397
30  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c7634 Devkit::ObjcParse::multiplicative() + 22
31  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c75c6 Devkit::ObjcParse::additive() + 22
32  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c7558 Devkit::ObjcParse::shift() + 22
33  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c74ea Devkit::ObjcParse::relational() + 22
34  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c747c Devkit::ObjcParse::equality() + 22
35  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c740e Devkit::ObjcParse::bitwiseAnd() + 22
36  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c73a2 Devkit::ObjcParse::bitwiseExclusiveOr() + 22
37  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c7336 Devkit::ObjcParse::bitwiseInclusiveOr() + 22
38  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c72ca Devkit::ObjcParse::logicalAnd() + 22
39  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c725e Devkit::ObjcParse::logicalOr() + 22
40  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224c71d2 Devkit::ObjcParse::conditional() + 18
41  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224cadde Devkit::ObjcParse::assignment() + 18
42  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224cad83 Devkit::ObjcParse::expression() + 65
43  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224d7ced Devkit::ObjcParse::expressionStatement() + 41
44  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224d2b0f Devkit::ObjcParse::statementList(objc_object*) + 73
45  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224d28ab Devkit::ObjcParse::compoundStatement(objc_object*) + 131
46  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224e18d0 Devkit::ObjcParse::objcMethodDefinition() + 352
47  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224cbec0 Devkit::ObjcParse::externalDeclaration() + 208
48  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224cbdc8 Devkit::ObjcParse::translationUnit() + 92
49  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224ba940 -[DevkitEntireProject parseOneCompilationUnit:] + 2633
50  com.apple.dt.IDE.IDEDevkitRefactoring   0x00000001224b9ea3 -[DevkitParser parseOneCompilationUnit:buildSettings:] + 170
51  com.apple.dt.IDE.IDEDevkitRefactoring   0x0000000122524ab6 __76-[DevkitRefactoringTransformation parseCompilationUnit:buildSettings:error:]_block_invoke + 84

ReadOnly portion of Libraries: Total=289.4M resident=167.0M(58%) swapped_out_or_unallocated=122.4M(42%)
Writable regions: Total=17.4G written=90.9M(1%) resident=270.5M(2%) swapped_out=584K(0%) unallocated=17.1G(98%)

REGION TYPE                        VIRTUAL
===========                        =======
ATS (font support)                   31.9M
ATS (font support) (reserved)           4K        reserved VM address space (unallocated)
CG backing stores                    16.2M
CG image                              184K
CG raster data                        420K
CG shared images                     1248K
CoreAnimation                         320K
CoreImage                              24K
CoreServices                         3776K
IOKit                                11.6M
IOKit (reserved)                      512K        reserved VM address space (unallocated)
JS JIT generated code               128.0M
JS JIT generated code (reserved)    896.0M        reserved VM address space (unallocated)
JS VM register file                  4096K
JS garbage collector                  644K
MALLOC                              503.5M
MALLOC (reserved)                    15.8G        reserved VM address space (unallocated)
MALLOC guard page                     112K
Memory tag=240                          4K
Memory tag=242                         12K
Memory tag=243                          4K
Memory tag=249                        156K
Memory tag=251                         64K
OpenCL                                 60K
OpenGL GLSL                          1024K
SQLite page cache                    18.0M
STACK GUARD                          56.1M
Stack                                16.7M
VM_ALLOCATE                          17.9M
__DATA                               30.3M
__IMAGE                               528K
__LINKEDIT                           70.3M
__TEXT                              219.2M
__UNICODE                             544K
mapped file                         113.8M
shared memory                        18.7M
===========                        =======
TOTAL                                17.9G
TOTAL, minus reserved VM space        1.2G

Model: iMac11,2, BootROM IM112.0057.B01, 2 processors, Intel Core i3, 3.06 GHz, 12 GB, SMC 1.64f5
Graphics: ATI Radeon HD 4670, ATI Radeon HD 4670, PCIe, 256 MB
Memory Module: BANK 0/DIMM0, 4 GB, DDR3, 1333 MHz, 0x029E, 0x434D5341344758334D314131333333433920
Memory Module: BANK 1/DIMM0, 4 GB, DDR3, 1333 MHz, 0x029E, 0x434D5341344758334D314131333333433920
Memory Module: BANK 0/DIMM1, 2 GB, DDR3, 1333 MHz, 0x80CE, 0x4D34373142353637334648302D4348392020
Memory Module: BANK 1/DIMM1, 2 GB, DDR3, 1333 MHz, 0x80CE, 0x4D34373142353637334648302D4348392020
AirPort: spairport_wireless_card_type_airport_extreme (0x168C, 0x8F), Atheros 9280: 4.0.70.23-P2P
Bluetooth: Version 4.0.9f33 10885, 2 service, 18 devices, 1 incoming serial ports
Network Service: Ethernet, Ethernet, en0
Network Service: AirPort, AirPort, en1
Serial ATA Device: WDC WD5000AAKS-40V6A0, 500.11 GB
Serial ATA Device: HL-DT-STDVDRW  GA32N
USB Device: hub_device, 0x0424  (SMSC), 0x2514, 0xfd100000 / 2
USB Device: Expansion, 0x0bc2  (Seagate LLC), 0x2312, 0xfd130000 / 5
USB Device: Built-in iSight, apple_vendor_id, 0x8502, 0xfd110000 / 4
USB Device: IR Receiver, apple_vendor_id, 0x8242, 0xfd120000 / 3
USB Device: hub_device, 0x0424  (SMSC), 0x2514, 0xfa100000 / 2
USB Device: USB-compliant keyboard, 0x0518  (EzKEY Corp.), 0x0001, 0xfa130000 / 5
USB Device: Internal Memory Card Reader, apple_vendor_id, 0x8403, 0xfa120000 / 4
USB Device: BRCM2046 Hub, 0x0a5c  (Broadcom Corp.), 0x4500, 0xfa110000 / 3
USB Device: Bluetooth USB Host Controller, apple_vendor_id, 0x8215, 0xfa111000 / 6 
```

其他有类似问题的人：

[http://osdir.com/ml/general/2013-02/msg06015.html](http://osdir.com/ml/general/2013-02/msg06015.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-30T21:13:54.587

天啊！这很难追踪。我遇到了同样的问题，但我设法找到了它（至少对我来说）。

当您 Refactor > Rename... 并且您的源有一个包含 @literal 构造的宏时，就会发生崩溃。

崩溃示例 1：

```
STAssertEqualObjects([currencyFormatter numberFromString:@" $100\. "], @100.00, nil);
STAssertEqualObjects([currencyFormatter numberFromString:@"100"], @100.00, nil); 
```

固定：

```
NSNumber *x100_00 = @100.00;
STAssertEqualObjects([currencyFormatter numberFromString:@" $100\. "],x100_00, nil);
STAssertEqualObjects([currencyFormatter numberFromString:@"100"], x100_00, nil); 
```

崩溃示例 2：

```
STAssertEqualObjects(isActive, @YES, nil); 
```

修正：成功

```
NSNumber *xYES = @YES;
STAssertEqualObjects(isActive, xYES, nil); 
```

崩溃示例 3：

```
NSParameterAssert(([@[@"Option 1", @"Option 2"] containsObject:shareType])); 
```

固定：

```
- (NSArray *)GMS_shareTypes
{
    return @[@"Option 1", @"Option 2"];
}

…

NSParameterAssert([self.GMS_shareTypes containsObject:shareType]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T16:02:15.190

正如其他人所说，我认为实际上您应该尝试准确追踪代码的哪一部分导致重构失败。有条不紊，并尝试确定问题所在。那时，您可以开始找出导致它的原因。

当我过去遇到重构问题时，彻底清理已解决（如果您还没有这样做，清除 DerivedData 也可能会有所帮助）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T20:47:32.110

很难解决，但以下是崩溃报告中的一些线索：

*   似乎您有一个扩展为未正确解析的**宏。**我的意思是它会生成一个错误的令牌（例如无限长）

*   看起来它**在复杂的按位逻辑和移位语句之后的某个地方**

*   也许在一个**街**区内。

你能检查你的宏：

*   去掉它

*   或替换为内联

*   或者有时只是复制粘贴或重写它（错误的不可见字符）。

这可能会修复你的铅。告诉我。

# git - 如何在 heroku 上查找我的应用程序的 git repo 的代码状态

> ID：14744954
> 
> 赞同：1
> 
> 时间：2013-02-07T06:24:26.863
> 
> 标签：git, heroku, status

我在 heroku 上创建了一个应用程序并推送了我的代码（在创建 git repo by 之后`git init`）。
我的`app`文件夹包含一个我之前`requirements.txt`错误地放在其中的. （实际上是需要安装的，所以应该在它之前）。 `matplotlib``numpy``numpy``matpplotlib`

当我推送到`heroku master,`编译失败并显示错误消息“需要安装 matplotlib”时。
所以我更正了项目的顺序`requirements.txt`和使用`git add`等`git commit`提交它。
然后我尝试再次使用`git push heroku master`.
但它失败了，同样的错误信息

这里是`requirements.txt`

```
Django==1.4.3
South==0.7.6
distribute==0.6.28
dj-database-url==0.2.1
django-registration==0.8
numpy==1.6.2
matplotlib==1.2.0
psycopg2==2.4.6
python-memcached==1.48
wsgiref==0.1.2
simplejson==3.0.7 
```

然后我尝试使用

`git status`它产生了

```
# On branch master
# Your branch is ahead of 'origin/master' by 2 commits.
# nothing to commit (working directory clean) 
```

我曾经将我的代码添加到 Github。
我认为这`origin/master`与此有关。我错了吗？

如何在 heroku 上找到我的提交状态？
我的应用有一个名字 say `git@heroku.com:myapp.git`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:29:15.917

关于状态，您有几种选择：

*   “ [git：检查是否需要拉动](https://stackoverflow.com/questions/3258243/git-check-if-pull-needed)”：

```
git 远程 -v 更新
git 状态 -uno

```

*   “ [git 等价于`svn status -u`](https://stackoverflow.com/questions/1138990/git-equivalent-of-svn-status-u)”：

```
git 获取 heroku
git log --name-only ..heroku/master

```

* * *

检查是否`origin`确实指向`heroku`：

```
git remote -v 
```

在这种情况下，简单`git push`是不够的

根据您的默认推送策略，您可能希望确保您的分支具有`heroku/master`上游分支：

```
git push -u heroku master 
```

# c++ - 在多个容器中存储指向对象的指针

> ID：14744961
> 
> 赞同：1
> 
> 时间：2013-02-07T06:24:54.193
> 
> 标签：c++, algorithm, data-structures, containers

为了提出我的问题，假设我有一组指针（相同类型）

```
 {p1, p2, ..., pn} 
```

我想将它们存储在多个容器中，因为我需要不同的访问策略来访问它们。假设我想将它们存储在两个容器中，链表和哈希表。对于链表，我有顺序，对于哈希表，我有快速访问。现在，问题是如果我从一个容器中删除一个指针，我需要记住从另一个容器中删除。这使得代码难以维护。所以问题是还有其他模式或数据结构来管理这样的情况吗？智能指针在这里有帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T06:41:46.587

如果我理解正确，您想链接您的容器，以便从一个容器中删除所有容器。我不认为这是直接可能的。可能的解决方案：

*   重新设计整个对象架构，因此指针不在许多容器中。
*   使用[Boost Multi-index Containers Library](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html)在一个容器中实现您想要的所有功能。
*   使用映射键而不是直接指针来跟踪对象，并将指针本身保存在一个映射中。
*   使用[`std::weak_ptr`](http://en.cppreference.com/w/cpp/memory/weak_ptr)，以便您可以检查项目是否已在其他地方删除，并[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)在使用时将其转到（您需要一个容器具有“主”[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)以在不使用时保留对象）
*   创建函数/方法/类来删除对象，它知道所有容器，所以当所有删除都在一个地方时，你不会意外忘记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:53:56.747

你为什么不创建你自己的类，它包含两个`std::list`和`std::unordred_map`并提供访问函数并提供删除函数，你可以使用线性`list`和随机访问它们`unordred_map`，删除将从容器中删除，插入将插入两者。（一种包装类：P）

您还可以考虑使用`std::map`，并**为其提供比较功能**，该功能将始终以所需的方式保持数据结构有序，并且您可以随机访问具有`log N`访问时间的元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T06:57:58.560

通常，尝试隔离此逻辑以使事情更易于支持。一些具有安全公共接口的小类（对不起，我没有编译这个，它只是一个伪代码）。

```
template<class Id, Ptr>
class Store
{
public:
   void add(Id id, Ptr ptr)
   {
      m_ptrs.insert(ptr);
      m_ptrById.insert(std::make_pair(id, ptr));
   }

   void remove(Ptr ptr)
   {
      // remove in sync as well
   }

private:
   std::list<Ptr> m_ptrs;
   std::map<Id, Ptr> m_ptrById;
}; 
```

然后使用 Store 保持指针同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:51:35.897

如果我正确理解您的问题，那么您对内存管理（新/删除问题）的关注较少，而对哪个元素有效与否的实际“簿记”更加关注。

所以，我正在考虑用“参考计数器”包装每个点

```
 template< class Point >
 class BookKeeping {
 public:
     enum { LIST_REF = 0x01,
            HASH_REF = 0x02 };
     BookKeeping( const Point& p ): m_p(p), m_refCout( 0x3 ) {} // assume object created in both containers
     bool isValid() const { return m_refCount == 0x3; } // not "freed" from any container
     void remove( unsigned int from ) { m_refCount = m_refCount & ! from ; }
 private:
     Point m_p;
     unsigned int m_refCount;
 }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T10:19:13.540

[请参阅此类似问题](https://stackoverflow.com/questions/14736923/data-structures-that-have-pull-first-and-lest)的答案（目前为止唯一的答案）。在这种情况下`deque`，建议使用 a 而不是 a `list`，因为 OP 只想在序列的末尾插入/删除。

无论如何，您可能更喜欢使用[Boost Multi-index Containers Library](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html)。

# jquery - 隐藏阅读更多 div/按钮/文本

> ID：14744962
> 
> 赞同：0
> 
> 时间：2013-02-07T06:25:08.297
> 
> 标签：jquery, shorthand

当用户单击它并向下滑动隐藏的 div 的内容时，我需要一些帮助来隐藏 div。以下代码用于向下滑动隐藏的 div。

```
 $(document).ready(function (){ $('.hide').hide();
    $('.main:has(".hide")').find('div.toggle').click(function() {
       var el = $(this).next('.hide'),
       check = (el.is(':visible')) ? el.slideUp() : ($('.hide').slideUp()) (el.slideDown());
    });

    }); 
```

上面的例子在[这里](http://jsbin.com/isahom/1/edit)，[这个链接](http://jsbin.com/awirap/3/edit)有完整的标记和一些实验，我试图隐藏阅读更多的 div，但它隐藏了每个 div。如果有人能帮我解释上面的 if else 速记语句。

谢谢大家我的问题已经解决了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T06:32:29.467

我认为你需要学习的是如何使用`this`. `this`是一个关键字，指的是您单击的元素。因此，您可以执行类似`$(this).hide()`或 remove()、toggle() 或任何您想要的操作。

[http://jsbin.com/awirap/5/edit](http://jsbin.com/awirap/5/edit)

[查询这个](http://remysharp.com/2007/04/12/jquerys-this-demystified)

编辑：要在单击另一个时显示更多信息，您将执行以下操作：

`$('.toggle').show();`

您显示所有这些，然后在这段代码之后您`$(this).hide();`只隐藏您单击的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:33:02.733

这是一个更简单的方法。

```
$(document).ready(function(){
  $('.toggle').click(function(){
    $(this).hide();
    $(this).next('div').slideToggle();
  });
}); 
```

if/else 语句的简写称为三元运算符。您的代码说，如果带有附加文本的 div 可见，则将其向上滑动（隐藏），否则，将其向下滑动（显示）。但是 : 之后的部分可能不应该有 ($('.hide').slideUp())

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:42:02.523

将此代码替换为您现有的脚本

```
$(document).ready(function (){
       $('.hide').hide();
       $('.main:has(".hide")').find('div.toggle').click(function() {
           $(".toggle").show();
           $(this).hide();
           var el = $(this).next('.hide');
           var check = (el.is(':visible')) ? el.slideUp() : ($('.hide').slideUp()) (el.slideDown());
       });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:42:33.767

我想你想要这个：http: [//jsbin.com/awirap/6/edit](http://jsbin.com/awirap/6/edit)

```
$(document).ready(function (){
   $('.hide').hide();
   $('.main').find('div.toggle').click(function() {
       if ($('.hide').css("display") == 'none') {
          $('div.toggle',this).addClass("hidden").next().addClass("show");
       } else {    //---------------------------------^^---missed the parentheses
          $('div.toggle').show();
       }
       var el = $(this).next('.hide'),
       check = (el.is(':visible')) ? el.slideUp() : ($('.hide').slideUp()) (el.slideDown());
   });
}); 
```

*`if someone would help me explain the above if else shorthand statement.`*

```
(condition) ? if true : if false 
```

# css - 仅对 IE9 应用 CSS，但其他 css 正在应用

> ID：14744969
> 
> 赞同：0
> 
> 时间：2013-02-07T06:25:34.427
> 
> 标签：css, internet-explorer-9

我必须将`border-radius`CSS 属性应用于按钮，但前提是浏览器不是 Internet Explorer 9。否则我想使用该`background-image`属性。我尝试`background-image`使用条件注释为 IE9 应用，但它不起作用（`border-radius`“通用”CSS 中的属性也被应用到 IE9，而不是`background-image`）。

如何更改它以使其根据浏览器版本应用所需的 CSS？

```
/*For IE9*/
<!--[if lte IE 9]>
.PopupBtn
{
  background-image: url("../Images/new-btn.png");
  height: 28px;
  width: 99px;
  border-left-width: 0px;
  border-top-style: none;
  border-right-style: none;
  border-bottom-style: none;
  border-left-style: none;
  cursor: pointer;
}
<![endif]-->

/*Style.css(general)*/
.PopupBtn
{
  -moz-box-shadow: inset 0px 2px 1px 0px #0d0d0d;
  -webkit-box-shadow:inset 0px 2px 1px 0px #0d0d0d;
  box-shadow:inset 0px 2px 1px 0px #0d0d0d;
  background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #fffcff), color-stop(1, #000000));
  background:-moz-linear-gradient(center top, #fffcff 5%, #000000 100%);
  filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffcff', endColorstr='#000000');
  background-color:#fffcff;
  -moz-border-radius:22px;
  -webkit-border-radius:22px;
  border-radius:22px;
  display:inline-block;
  color:#fcfcfc;
  font:bold 13px  trebuchet ms;
  text-decoration:none;
  text-shadow:1px 0px 0px #000000;
  min-width:90px;
  height:30px;
  cursor:pointer;
  border-style:none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:30:18.153

为此最好使用 jQuery。

```
if ($.browser.msie  && parseInt($.browser.version, 10) == 9)
 $('.PopupBtn').css({'background-image':'url(../Images/new-btn.png)','height':'28px','width':'99px'}); 
```

见[http://api.jquery.com/css/](http://api.jquery.com/css/)好处是你不仅要使用更少的代码，而且你可以调整一切，而不仅仅是css。这只是一个例子，其余的你必须填写:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:30:08.823

IE 的条件注释实际上是 html 注释，因此您不能将它们放在 css 文件中，它们必须在网页中。在您网页的某个地方，您将拥有

```
<!--[if lte IE 9]>
<style>
.PopupBtn
{
background-image: url("../Images/new-btn.png");
height: 28px;
width: 99px;
border-left-width: 0px;
border-top-style: none;
border-right-style: none;
border-bottom-style: none;
border-left-style: none;
cursor: pointer;
}
</style>
<![endif]--> 
```

甚至是注释之间的外部样式表链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-08T06:58:07.173

可能它会为你使用完整的：

```
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"> </script> 
```

在 head 标签中使用这个 java 脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T06:53:11.700

您需要将**Internet Explorer 条件注释**放在实际网页上，而不是放在 CSS 文件中。

避免添加内联 CSS 代码。相反，将它们放在自己的 CSS 文件中。分离 CSS 文件是个好主意。为 IE“hacks”制作一个，为您的常规样式表制作另一个。

因此，例如，将您的 IE 特定 CSS 放在 **ie.css**文件中：

**即.css**：

```
.PopupBtn {
    background-image: url("../Images/new-btn.png");
    height: 28px;
    width: 99px;
    border-left-width: 0px;
    border-top-style: none;
    border-right-style: none;
    border-bottom-style: none;
    border-left-style: none;
    cursor: pointer;
} 
```

将您的常规样式表放在**style.css**中。

在`<head>`标签中放置：

```
<head>
   <link rel="stylesheet" type="text/css" href="style.css">

   <!-- [if lte IE 9]>
      <link rel="stylesheet" type="text/css" href="ie.css">
   <![endif]-->
</head> 
```

**笔记：**

IE 仍然会应用它理解的常规样式表中的任何样式。因此，请确保在常规样式表**之后**应用条件注释和*ie.css*样式表。这样，它可以覆盖您不想要的任何样式。

 ****确保您在 ie.css 中明确覆盖您不想要的任何样式，否则，它将“渗入”并显示在 IE 中**

请参阅下面的我的 JSFiddle 链接。如果你在 IE 9 中运行它，你会看到一个带有红色单词“Hello”的绿色渐变。如果您在任何其他浏览器中运行它，您应该会看到带有白色“Hello”一词的黑色渐变。

[http://jsfiddle.net/mKrRL/](http://jsfiddle.net/mKrRL/)**

# image - Silverlight 中 OutOfMemoryExecption 的解决方案

> ID：14744973
> 
> 赞同：0
> 
> 时间：2013-02-07T06:26:18.527
> 
> 标签：image, silverlight, out-of-memory

我正在 Silverlight 中创建一个将图像保存在隔离存储中的应用程序。我设法将图像保存在隔离存储中，但在加载和显示图像时遇到了麻烦。

这是代码：

```
public partial class MainPage : UserControl
    {

    private const string ImageName = "google1.png";

    public MainPage()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {           
        WriteableBitmap bitmap = new WriteableBitmap(saveImage, new TransformGroup());
        loadedImage.Source = bitmap;
        imageToStore(saveBuffer(bitmap), ImageName);

        MessageBox.Show("saved");

    }

    public void imageToStore(byte[] buffer, string filename)
    {
        using (IsolatedStorageFile iso = IsolatedStorageFile.GetUserStoreForApplication())   

        {

            IsolatedStorageFileStream s = new IsolatedStorageFileStream(filename, FileMode.Create, iso);
            Int64 freeSpace = iso.AvailableFreeSpace;      
            Int64 needSpace = 20971520; // 20 MB in bytes      
            if (freeSpace < needSpace)     
              {           
                if (!iso.IncreaseQuotaTo(iso.Quota + needSpace))        
                   {                MessageBox.Show("User rejected increase spacerequest");       

                    }      
            else            {                MessageBox.Show("Space Increased");         

                            }          

                }

            using (StreamWriter writer = new StreamWriter(s))
            {
                writer.Write(buffer);
            }

        }          
    }
    private static byte[] saveBuffer(WriteableBitmap bitmap)
    {

        long matrixSize = bitmap.PixelWidth * bitmap.PixelHeight;

        long byteSize = matrixSize * 4 + 4;

        byte[] retVal = new byte[byteSize];

        long bufferPos = 0;

        retVal[bufferPos++] = (byte)((bitmap.PixelWidth / 256) & 0xff);
        retVal[bufferPos++] = (byte)((bitmap.PixelWidth % 256) & 0xff);
        retVal[bufferPos++] = (byte)((bitmap.PixelHeight / 256) & 0xff);
        retVal[bufferPos++] = (byte)((bitmap.PixelHeight % 256) & 0xff);

        return retVal;

    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        byte[] buffer = _LoadIfExists(ImageName);
        loadedImage.Source = _GetImage(buffer);
        MessageBox.Show("loaded");
    }

    private static byte[] _LoadIfExists(string fileName)
    {
        byte[] retVal;

        using (IsolatedStorageFile iso = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (iso.FileExists(fileName))
            {
                using (IsolatedStorageFileStream stream = iso.OpenFile(fileName, FileMode.Open))
                {
                    retVal = new byte[stream.Length];
                    stream.Read(retVal, 0, retVal.Length);
                    stream.Close();
                }
            }
            else
            {
                retVal = new byte[0];
            }
        }
        return retVal;
    }

        private static WriteableBitmap _GetImage(byte[] buffer)
    {
        int width = buffer[0] * 256 + buffer[1];
        int height = buffer[2] * 256 + buffer[3];

        long matrixSize = width * height;

            //this is the section where Exception of type 'System.OutOfMemoryException' was thrown.
        WriteableBitmap retVal = new WriteableBitmap(width, height);

        int bufferPos = 4;

        for (int matrixPos = 0; matrixPos < matrixSize; matrixPos++)
        {
            int pixel = buffer[bufferPos++];
            pixel = pixel << 8 | buffer[bufferPos++];
            pixel = pixel << 8 | buffer[bufferPos++];
            pixel = pixel << 8 | buffer[bufferPos++];
            retVal.Pixels[matrixPos] = pixel;
        }

        return retVal;
}}} 
```

希望你们能帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:35:46.567

基本上，使用 Silverlight 来管理 Image 并不是一件容易的事。

无论运行您的应用程序的计算机的能力如何，无论如何您都会受到浏览器的限制，出于安全考虑，这将限制您的应用程序专用的 RAM 和处理器。（这取决于您的浏览器版本，但大约是 1Go 的已用 RAM）。

唯一的解决方案是优化您的内存管理（在托管语言中总是很棘手......）：

*   尽量避免你的新指令（重复使用最多的对象）

*   一旦你不再需要一个对象，就将它的指针设置为空（让它自由地被垃圾收集器收集）

*   在最后一个选项中，尝试在某个战略位置调用 GC.Collect() （但要非常小心，如果你调用它过于频繁，你的性能可能会急剧下降）

# objective-c - 如何在 Mac OS 上将应用设置为默认应用？

> ID：14744974
> 
> 赞同：1
> 
> 时间：2013-02-07T06:26:24.893
> 
> 标签：objective-c, macos, cocoa

美好的一天，我想为具有 coocoa 框架的文件类型设置我的应用程序默认值。现在我写下一个代码：

```
bool setappasdefualt()
{
    OSStatus returnStatus = LSSetDefaultRoleHandlerForContentType(CFSTR(".txt"), kLSRolesAll, (CFStringRef) [[NSBundle mainBundle] bundleIdentifier]);
    if (returnStatus != 0) 
    {
        NSLog(@"Got an error when setting default application - %ld", returnStatus);
        return false;
    }
    return true;
} 
```

但执行后它得到错误50。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T06:32:17.897

" `.txt`" 是文件扩展名，而不是统一类型标识符 (UTI)。

您需要使用适当的 UTI，例如`CFSTR("public.plain-text")`

用户 Guillaume 编写了一个很好的小函数来将文件扩展名转换为 UTI，[你可以在这里看到它，命名为“ `UTIforFileExtension:`”](https://stackoverflow.com/a/8645445/272342)（如果它对你有帮助，你应该支持他的答案:-)

# oracle - 如何以记录类型返回多个值

> ID：14744976
> 
> 赞同：1
> 
> 时间：2013-02-07T06:26:32.493
> 
> 标签：oracle, plsql

我想知道如何使用记录类型的 PL/SQL 返回多个值。

以下是我的示例代码：-

```
CREATE OR REPLACE FUNCTION "FN_TESTING"
(
  TESTING1 IN VARCHAR2
) RETURN TEST4_TEST as

 TEST2 TEST4_TEST%ROWTYPE; 

CURSOR TEST1 IS 
 SELECT '1','2' FROM DUAL;

BEGIN 
 OPEN TEST1;
  FETCH TEST1
    INTO TEST2;
  CLOSE TEST1;

 RETURN TEST2;
END FN_TESTING; 
```

`TEST4_TEST`我确实检查了我的函数，它向我显示了必须声明我的警告消息。

我能知道这个功能有什么问题吗？以及我如何为此声明`TEST4_TEST`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:45:08.997

是的，我们可以从 PLSQL 函数/程序返回记录变量。但首先必须声明它。

```
create or replace function get_employee
(p_empl_no in employee.empl_no%type)
return employee%rowtype
as
l_cust_record employee%rowtype;
begin
select * into l_cust_record from employee
where empl_no = p_empl_no;
return(l_cust_record);
end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-27T22:58:45.137

将 TEST4_TEST 视为类型记录的变量。这个变量就像 NUMBER、VARCHAR、DATE。唯一的区别是这些已经由 Oracle 定义，但对于集合和记录，我们必须定义我们自己的。根据您的示例，您似乎想要返回带有 2 个数字值的记录，那么您应该定义如下

```
CREATE OR REPLACE PACKAGE TEST4_TEST1
AS 
TYPE TEST4_TEST Is record
(
COL1 INTEGER,
COL2 INTEGER
);
END;

CREATE OR REPLACE FUNCTION FN_TESTING (testing1 IN VARCHAR2)
   RETURN TEST4_TEST1.test4_test
AS
 test3 TEST4_TEST1.test4_test;

   CURSOR test2
   IS
      SELECT '1', '2' FROM DUAL;
A
BEGIN
   OPEN test2;
   FETCH test2 INTO test3;
   CLOSE test2;
   RETURN test3;
END fn_testing; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:48:13.257

也试试这个：

```
declare TYPE t_deptrec IS RECORD
(
   name dept.dname%type,
   location dept.loc%type
);

CURSOR c_emp is

select ename,deptno from emp;
r_dept t_deptrec;

function getDept(p_deptno dept.deptno%type) return t_deptrec is
r_dept t_deptrec;

begin
   select dname,loc into r_dept
   from dept where deptno = p_deptno;

   return r_dept;
end;

BEGIN
   for r_emp in c_emp
   loop

      r_dept := getDept(r_emp.deptno);
      dbms_output.put_line(r_emp.ename || ',' || r_dept.name || ',' || r_dept.location);

   end loop;
END; 
```

# java - 最后一个字节时间和响应时间之间的差异

> ID：14744978
> 
> 赞同：2
> 
> 时间：2013-02-07T06:26:42.603
> 
> 标签：java, byte, response

Web应用程序中的最后一个字节时间和响应时间有什么区别。我发现

最后字节时间：下载最终服务器响应所需的时间（以秒为单位）

响应时间：从用户发出请求到收到完整响应所用的时间。

有什么区别。看来两者都是一样的。但实际上两者都给出了不同的时间值。有什么区别以及如何使用java计算最后一个字节时间

请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-22T07:17:44.393

响应时间：从输入 url 或单击链接到从服务器获得最后一个响应字节所经过的时间。

最后一个字节时间：它是从向服务器发送请求（GET/POST/PUT/DELETE）到从服务器获得最后一个响应字节之间经过的时间。

响应时间将始终大于最后一个字节的时间，因为浏览器不会在您加载新 URL 后立即向服务器发送请求。在向服务器发送请求之前，会发生各种事件。其中一些是：unloadEvent、domainLookUpEvent、connectionEvent 和secureConnectionEvent。最简单的可视化方法是使用浏览器的性能 API。响应时间由 获得`performance.timing.responseEnd - performance.timing.navigationStart`。最后一个字节的时间由 获得`performance.timing.responseEnd - performance.timing.requestStart`。

**在对如何使用 java 计算最后一个字节时间进行**了大量研究之后，我发现只有一个解决方案。如果您需要计算 example.com 的最后一个字节时间，那么您必须使用 selenium Web 驱动程序并连接到 example.com。然后通过使用 JavaScriptExecutor 你可以`performance.timing.responseEnd - performance.timing.requestStart`从浏览器中获取。

# c# - Response.WriteFile() 后未发生附带操作

> ID：14744981
> 
> 赞同：0
> 
> 时间：2013-02-07T06:27:02.490
> 
> 标签：c#, asp.net, .net

根据 ASP.NET 页面，单击按钮时应执行以下操作：

1.  从服务器下载文件
2.  执行清理操作，例如

    *   隐藏按钮
    *   将文本设置为标签
    *   显示标签
    *   禁用按钮
    *   等等

现在下载部分通过以下代码发生：

```
Response.Clear();               
Response.Buffer = true;
Response.ContentType = "application/pdf";
Response.AddHeader("Content-Disposition", "attachment; filename="+strFileName+".pdf");
Response.WriteFile(strBrowserPath); 
```

其余的动作（第 2 点）在之后完成。

遗憾的是，由于使用了 Response.Clear()/Response.WriteFile()，其余的服务器端操作没有发生。

有什么选择吗？对此有任何修复吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:37:19.183

从您使用回发操作发送文件的那一刻起，**您不能同时**发送和更改页面（禁用按钮、更改文本等）。对此没有修复，因为没有问题，是它的工作方式。您有一个管道可以将您的响应发回。您要求一个 http 响应并得到一个 http 响应，您不能同时拥有更新页面和文件。

现在，另类。首先是您将如何发送文件。我建议使用带有参数的处理程序，`download.ashx?Dhwoload=filea.pdf`在您页面上的更新回发后，您调用

`window.location = "download.ashx?Dhwoload=filea.pdf";`

javascript，带有替代链接

`<a href="download.ashx?Dhwoload=filea.pdf">if the file did not start to download automatically click here</a>`

做你的工作。

相对：
[从服务器下载文件的最佳方法是](https://stackoverflow.com/questions/10912164/what-is-the-best-way-to-download-file-from-server)
[从 ASP.NET Web 处理程序 (.ashx) 下载文件时的错误处理](https://stackoverflow.com/questions/14609389/error-handling-when-downloading-file-from-asp-net-web-handler-ashx/14616216#14616216)

# python - 我如何删除django.so中的表单，数据库中的数据将被删除

> ID：14744982
> 
> 赞同：-1
> 
> 时间：2013-02-07T06:27:06.287
> 
> 标签：python, python-2.7, django-forms, django-templates, django-views

在我的 html 中：

```
 <form action="/smartlogis/result_material/{{form.DBR_No.value}}/" method="POST">
    {{form.as_ul}}
    <input type="submit" value="Submit" /></form>
 <form action="/smartlogis/result_material/{{form.DBR_No.value}}/" method="GET">   

  <input type="submit" value="Delete" />
</form> 
```

视图.py：

def Matedit1（请求，DBR_No）：

```
f = Movement_In.objects.get(DBR_No=DBR_No)
if request.method == 'POST':

    form = Movement_ReceiptForm(request.POST, request.FILES, instance=f) 
    if form.is_valid():

        form.save()
        return HttpResponseRedirect('/thanks/')
else:
    print "ahj"
    if request.method == 'GET':
        print "dsfsf"
        form = Movement_ReceiptForm(request.POST, request.FILES, instance=f)
        if request.POST.get('delete'):
            form.delete()
            return HttpResponseRedirect('/smartlogis/matdelete.html/') 
```

现在，当我单击删除按钮时，它会进入 else 循环，但不会删除表单。它直接去HttpResponseRedirect

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:55:07.970

您的请求不能同时是 GET 和 POST 请求，因此无法调用 delete 语句。此外，如果您想删除“f”，您会想要

```
f.delete() 
```

但再次重申，这甚至不会被调用。没有在表单或模型表单上定义 delete() 并没有引发错误的事实是由于在任何情况下都无法调用此代码。

# node.js - Jade/Pug if else 条件使用

> ID：14744984
> 
> 赞同：18
> 
> 时间：2013-02-07T06:27:14.553
> 
> 标签：node.js, pug

我正在使用 .js 文件将日期发送到 .jade 文件`Node.js`。当该`#{date}`字段为`false`时，它执行 else 并打印`man`为它的答案。可能出了什么问题？

```
if #{date} == false
  | #{date}
else
  | man 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-19T15:24:55.550

如果日期为假，你想输出字符串'man'吗？如果是，则您的 if 和 else 语句是错误的方法...

怎么样：

```
if date
  = date
else
  | man 
```

甚至：

```
| #{date ? date : 'man'} 
```

或者简单地说：

```
| #{date || 'man'} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-08T21:04:00.847

在 if 表达式中，您可以编写简单的变量名称，而不使用 #{...}

```
if date == false
  | #{date}
else
  | man 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-23T03:16:48.333

你的说法是倒退的。对于语法，您可以使用此样式来工作：

```
p Date:
  if date
    | date
  else
    |  man 
```

您不需要`#{}`inside 表达式是正确的。我无法获得`=`工作，或其他答案的其他方式。

**三元样式**

对于我自己，我也在寻找三元运算符在一条线上执行此操作。我将其缩减为：

```
p Date: #{(date ? date : "man")} 
```

或者，您可以使用 var，它增加了一行，但仍然比 OP 少：

```
- var myDate = (date ? date : "man")
p Date: #{myDate} 
```

正如另一个答案中所建议的，我无法使以下工作正常进行。

```
| #{date ? date : 'man'} 
```

# ios - IOS 6 和 IOS 5 中的 Facebook 签入

> ID：14744987
> 
> 赞同：5
> 
> 时间：2013-02-07T06:27:24.593
> 
> 标签：ios, xcode, facebook, ios5, ios6

我有一些不同商店的预定义位置。我想通过我的 IOS 应用程序签到这些位置。我该怎么做？

这是我用于 IOS 5 的代码

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
SBJSON *jsonWriter = [SBJSON new];
NSMutableDictionary *coordinatesDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                              [NSString stringWithFormat: @"%f", latitude], @"latitude",
                                              [NSString stringWithFormat: @"%f", longitude], @"longitude",
                                              nil];
NSString *coordinates = [jsonWriter stringWithObject:coordinatesDictionary];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               [[placesArray objectAtIndex:indexPath.row] objectForKey:@"id"], @"place", //The PlaceID
                               coordinates, @"coordinates", // The latitude and longitude in string format (JSON)
                               @"Testing check in", @"message", // The status message
                               nil];
//                                       tags, @"tags", // The user's friends who are being checked in

[[appDelegate facebook] requestWithGraphPath:@"me/checkins" andParams:params andHttpMethod:@"POST" andDelegate: self];
// Deselect 
```

# javascript - Onclick 显示菜单链接，但它永远不会消失

> ID：14744992
> 
> 赞同：0
> 
> 时间：2013-02-07T06:27:53.940
> 
> 标签：javascript, menu, onclick

我想点击“水果”并显示列表。但是，当我现在单击“水果”时，我的水果列表会出现，但它永远不会消失。当我单击下一个链接“蔬菜”时，水果会消失，但现在即使我单击屏幕上的其他位置或移动鼠标，蔬菜也不会消失。

```
$('.menuBar div ul li').click(function() {
    $('.menuBar div').hide();
});

    function showHideMenu( elem ) {
   $('.menuBar div').each( function () {
    if ( $(this).hasClass('sub' + elem) ) {
        $(this).css('height','0px');
        $(this).css('display','inline-block');
        $(this).animate({
         height: '+=200'
        },'slow');
    } else {
        $(this).css('display','none');
    }
    });
} 
```

HTML

```
<html>
<div class="menuBar">
   <ul> 
       <li onclick="showHideMenu('Fruit');">
           <span class="fruit"></span>Fruit
       </li>
   </ul>
</div>
</html> 
```

# git - git - 我不知道如何解决的奇怪分支合并错误

> ID：14744993
> 
> 赞同：16
> 
> 时间：2013-02-07T06:27:55.940
> 
> 标签：git, git-merge

当我 git status 时，我收到以下错误消息：

```
# On branch master
# Your branch and 'origin/master' have diverged,
# and have 1 and 2 different commits each, respectively.
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   .gitignore
nothing added to commit but untracked files present (use "git add" to track) 
```

所以我不能拉或推。当我拉我得到这个：

```
macoss-MacBook-Pro-10:Marketing owner12$ git pull origin master
Password for 'https://genadinik@bitbucket.org': 
From https://bitbucket.org/genadinik/marketing
 * branch            master     -> FETCH_HEAD
error: The following untracked working tree files would be overwritten by merge:
    .DS_Store
Please move or remove them before you can merge.
Aborting 
```

我能做些什么来解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-07T06:32:15.930

```
rm .DS_Store
git add -A
git commit -m "Added .gitignore file" 
```

您还需要明确添加`.DS_Store`到您的`.gitignore`，以便`.DS_Store`将来不可避免地创建时，它不会妨碍您的提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T06:33:53.820

您可能不关心 .DS_Store。因此，尝试将其移动到 .DS_Store.bak 并再次拉取

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T06:32:04.833

我认为您需要先添加文件 `add .`然后`pull`然后`commit``push`

# javascript - Internet Explorer 可能运行缓慢：需要更改逻辑

> ID：14744999
> 
> 赞同：1
> 
> 时间：2013-02-07T06:28:12.740
> 
> 标签：javascript, jquery, performance, internet-explorer

```
TableHandler.prototype.IsAlreadySelected = function(dataToCheck) 
{
    var _this = this;

    if (_this.NewTemplateUsageSelected.length > 0) 
    {
        var len = _this.NewTemplateUsageSelected.length;
        for (var i = 0; i < len; i++) 
        {
            var an = _this.NewTemplateUsageSelected[i];
            var isTemplateUsageDataDuplicate=false; 
            var isNonApplicableCGDataDuplicate=false; 
            if ((an.CustomerName == dataToCheck.CustomerName) &&
                (an.ProgramName == dataToCheck.ProgramName) &&
                (an.WorkpackageName == dataToCheck.WorkpackageName) &&
                (an.ActivityName == dataToCheck.ActivityName) &&
                (an.SelectedWorkFlowType == dataToCheck.SelectedWorkFlowType) &&
                (an.SelectedWorkFlowCategory == dataToCheck.SelectedWorkFlowCategory) &&
                (an.ReWorkflow== dataToCheck.ReWorkflow) &&
                (an.AllowCheckGroupSelection == dataToCheck.AllowCheckGroupSelection) &&
                (an.InitiatorGroupSelection == dataToCheck.InitiatorGroupSelection) &&
                (an.R1GroupSelection == dataToCheck.R1GroupSelection) &&
                (an.R2GroupSelection == dataToCheck.R2GroupSelection) &&
                (an.R3GroupSelection == dataToCheck.R3GroupSelection) &&
                (an.R4GroupSelection == dataToCheck.R4GroupSelection) &&    
                (an.InitiatorMinReworkEffort == dataToCheck.InitiatorMinReworkEffort) &&
                (an.R1MinReworkEffort == dataToCheck.R1MinReworkEffort) &&
                (an.R2MinReworkEffort == dataToCheck.R2MinReworkEffort) &&
                (an.R3MinReworkEffort == dataToCheck.R3MinReworkEffort) &&
                (an.R4MinReworkEffort == dataToCheck.R4MinReworkEffort) &&                               
                (an.AllowFileAttachment == dataToCheck.AllowFileAttachment) &&
                (an.QualityReviewer== dataToCheck.QualityReviewer) &&
                (an.AllowLiabiltySelection == dataToCheck.AllowLiabiltySelection)&&
                (an.SetToInactive == dataToCheck.SetToInactive)&&
                (an.NonApplicabilityCheckGroupAllowed == dataToCheck.NonApplicabilityCheckGroupAllowed))
                    {
                    istemplateusagedataduplicate=true;
                    }  

                var checkgroupslendataToCheck=dataToCheck.NonApplicableCheckGroupList.length;               
              var nalen=an.NonApplicableCheckGroupList.length;
              if(checkgroupslendataToCheck  == nalen )  
              {
        for (var i = 0 ;i < checkgroupslendataToCheck ; i++)
               {

               var naDatatocheck= dataToCheck.NonApplicableCheckGroupList[i];
               var naData=an.NonApplicableCheckGroupList[i];
               if(            
                                  ( naDatatocheck.INonApplicability == naData.INonApplicability )&&
                                  ( naDatatocheck.R1NonApplicability == naData.R1NonApplicability )&&
                                  ( naDatatocheck.R2NonApplicability == naData.R2NonApplicability) &&
                                  ( naDatatocheck.R3NonApplicability == naData.R3NonApplicability )&&
                                  ( naDatatocheck.R4NonApplicability == naData.R4NonApplicability))
                                                                   isNonApplicableCGDataDuplicate=true;
                                   else
                                  {
                                   isNonApplicableCGDataDuplicate=false;
                                   break;
                                  }

                   }
                   if(isNonApplicableCGDataDuplicate==true && istemplateusagedataduplicate==true)
                   return true;

               } 
               }
               }
               }; 
```

以上代码导致错误 Internet 可能运行缓慢。当我寻找解决方案时，我得到了诸如更改注册表和 IE 版本、将代码移动到 cdebehind、使用插件等解决方案。这在我们的项目中是不可行的。所以我必须改变上面的逻辑。javascript 或 jquery 中的任何内置函数，我都可以用它来露营一个两个嵌套的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:44:27.497

内循环需要使用不同的变量作为计数器，否则会使外循环无限进行。目前，您将 i 用于两个循环。