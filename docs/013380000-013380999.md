# StackOverflow 问答 13380000-13380999

# python - 使用 QPainter 更改线条的位置

> ID：13380003
> 
> 赞同：1
> 
> 时间：2012-11-14T13:44:46.890
> 
> 标签：python, qt, pyqt4, qpainter, qtgui

我有一个带按钮的窗口。单击按钮后，我想更改最初绘制的线条的位置。这是我到目前为止的代码。

```
import sys 
from PyQt4 import QtGui , QtCore

class trial(QtGui.QWidget):
    def __init__(self):
        super(trial , self).__init__()
        self.window()

    def window(self):
        self.a = 0
        button = QtGui.QPushButton('Push')
        button.setCheckable(True)
        button.clicked.connect(self.fun)
        grid = QtGui.QGridLayout()
        grid.addWidget(button , 0 , 0)
        self.setLayout(grid)
        self.setWindowTitle('Trial')
        self.setGeometry(500 , 500 , 500 , 500)
        self.show()

    def fun(self , text):
        if text == 1:
            self.a = 0

        else:
            self.a = 1

    def paintEvent(self , e):
        qp = QtGui.QPainter()
        qp.begin(self)
        pen = QtGui.QPen(QtCore.Qt.red , 5 , QtCore.Qt.SolidLine)
        qp.setPen(pen)

        if self.a == 0:

            qp.drawLine(20 , 20 , 20 , 480)
        else:
            qp.drawLine(480 , 20 , 480 , 480) 
        qp.end()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    t = trial()
    sys.exit(app.exec_()) 
```

我知道我的代码看起来有点尴尬，但我面临以下问题。1\. 按下按钮后，线路改变位置需要相当长的时间。

2.另外我怎么擦以前画的线。

如果有人可以为我修改代码，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:30:22.603

`self.update()`1)在你的函数中添加一个调用，`fun()`让 Qt 知道你的小部件需要重绘

2）（不完全确定python语法，所以我会用C++给出例子）

您可以在您的绘画事件中明确地绘制背景：

```
qp.setBrush( Qt::white );  // Or whatever color you want the background to be 
qp.drawRect( rect() ); 
```

或者你可以尝试弄乱[QWidget::setAutoFillBackground()](http://qt-project.org/doc/qt-4.8/qwidget.html#autoFillBackground-prop)

# cmake - 宏（）不做字符串替换？

> ID：13380005
> 
> 赞同：1
> 
> 时间：2012-11-14T13:44:49.357
> 
> 标签：cmake

我正在尝试使用 macro() 命令进行上下文不敏感的字符串替换，但是：

```
cmake_minimum_required(VERSION 2.8)

MACRO(TestMacro mystring)
  message(mystring)
endmacro()

TestMacro("hello world")

message("hello world") 
```

输出：

我的字符串你好世界

而不是

你好世界你好世界

正如我所料。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:56:20.827

尝试取消引用宏参数：

```
MACRO(TestMacro mystring)
  message(${mystring})
endmacro() 
```

另请参阅[语法介绍](http://www.cmake.org/cmake/help/syntax.html)。

# php - .htaccess 发布数据

> ID：13380007
> 
> 赞同：0
> 
> 时间：2012-11-14T13:44:50.810
> 
> 标签：php, .htaccess

我已将 .htaccess 设置为在出现 404 错误时指向 index.php，
`ErrorDocument 404 /index.php`
如果 url 不是数据库中的页面，则 index.php 将返回 404，否则会显示正确的页面。

我怎样才能得到这里发送的任何 $_POST 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:18:59.637

我设法通过使用以下方法解决了这个问题：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-s
RewriteRule .* index.php 
```

感谢马里奥让我走上了正确的道路。

# velocity - 输出字符串作为速度中的数字

> ID：13380008
> 
> 赞同：-2
> 
> 时间：2012-11-14T13:44:53.983
> 
> 标签：velocity

我需要将 2 个值加在一起。问题是 2 个值作为字符串传递给我。它们可以是 2 位小数，所以我不能转换为整数。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:50:44.240

将它们转换为浮动。float.parse(value1) + float.parse(value2)

# macos - Mac OS 上的 Tidy-html5：如何安装

> ID：13380012
> 
> 赞同：17
> 
> 时间：2012-11-14T13:45:14.710
> 
> 标签：macos, terminal, htmltidy

请帮忙

我需要在 Mac OS [http://w3c.github.com/tidy-html5/上安装 HTML tidy](http://w3c.github.com/tidy-html5/)

我在终端中调用命令却一无所获：

```
$ make -C build/gmake/
make: *** build/gmake/: No such file or directory.  Stop.

$ sh build/gnuauto/setup.sh && ./configure && make
sh: build/gnuauto/setup.sh: No such file or directory 
```

有什么问题？我还应该安装什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-06-12T08:01:37.487

以下对我有用：

```
brew update
brew install tidy-html5 
```

外壳输出：

```
➜  ~  brew install tidy-html5
==> Downloading https://homebrew.bintray.com/bottles/tidy-html5-4.9.26.yosemite.
######################################################################## 100.0%
==> Pouring tidy-html5-4.9.26.yosemite.bottle.tar.gz
  /usr/local/Cellar/tidy-html5/4.9.26: 8 files, 1.2M 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-04T02:00:13.717

`tidy-html5`已升级为稳定版，因此您只需要在[Homebrew](http://brew.sh/)的最新安装中运行以下命令：

```
$ brew install tidy-html5 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-19T19:15:58.417

它对我不起作用，但它是这样做的：

Tap dupes存储库：

```
brew tap homebrew/dupes 
```

Homebrew dupes 存储库包含

> [that] 复制 OS X 提供的软件的公式，但可能提供更新的或修正错误的版本。

然后从 dupes 存储库安装：

```
brew install tidy --HEAD 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-17T11:10:02.680

要安装[tidy5](https://github.com/htacg/tidy-html5)，它是适用于 OS X 的 Tidy 的最新版本：

确保您已安装[自制软件](http://brew.sh)。

然后点击 dupes 存储库，它为 OS X 系统提供的新版本/错误修复软件提供 brew 配方。

```
$ brew tap homebrew/dupes 
```

安装整洁 (tidy-html5)

```
$ brew install --HEAD tidy 
```

取消点击 dupes 存储库

```
$ brew untap homebrew/dupes 
```

调用

```
$ tidy5 -v  
> HTML Tidy for Mac OS X version 5.4.0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-09T05:50:24.130

我刚刚在 Mac OS X 10.9.1 中安装了 Tidy：

```
brew install tidy 
```

它将自动安装其依赖项：automake 和 libtool

你可能会注意到，我在 /usr/bin/tidy 下有一个默认的 tidy，它有一个版本：

`HTML Tidy for Mac OS X released on 31 October 2006 - Apple Inc. build 15.12`

安装 Homebrew 后，版本显示为

`HTML Tidy for Mac OS X released on 25 March 2009`

，路径下：/usr/local/Cellar/20090325/bin/tidy

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-17T14:48:07.293

问题是文档没有提到您必须在捆绑目录中才能运行第一个命令。给出的命令是相对于捆绑目录的。

我昨天成功完成的步骤：

`cd ~/Library/Application Support/Avian/Pristine Copy/Bundles git clone https://github.com/w3c/tidy-html5 cd tidy-html5/ sudo make -C build/gmake/ sudo make install -C build/gmake/`

不确定共享库部分，因为我没有完成这些步骤。

# google-chrome-extension - 使用 chrome 扩展的 webRequest api 将 url 重定向到本地文件

> ID：13380015
> 
> 赞同：10
> 
> 时间：2012-11-14T13:45:30.367
> 
> 标签：google-chrome-extension

我在使用 chrome 扩展的 webRequest api 重定向 url 时遇到问题

```
chrome.webRequest.onBeforeRequest.addListener(function(details) {
return {
  redirectUrl : "file:///C:/hello.html"
};
}, {
urls : ["<all_urls>"]
}, ["blocking"]); 
```

我可以重定向到任何 http 或 https 地址，但不能重定向到任何人都知道为什么的文件位置...？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T05:12:32.793

```
redirectUrl : chrome.extension.getURL("hello.html") 
```

我像上面一样成功，hello.html 在扩展文件夹中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-15T02:50:06.247

1.  首先，您必须将文件放在扩展文件夹中（或扩展文件夹的子文件夹中）。

2.  然后，您必须在清单文件中将其声明为 a `"web_accessible_resources"`。

**示例：** 如果您的扩展文件夹是 MyExt，而您要使用的文件是`"MyExt/path/to/file.html"`. 然后你应该把它添加到清单文件中：

```
"web_accessible_resources": [
   "path/to/file.html"
] 
```

一般来说，任何将在扩展之外使用的文件都应该在`"web_accessible_resources"`数组中声明。

**请注意**，声明只是扩展文件夹中文件的相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:16:37.337

Chrome 扩展程序无法以任何方式访问本地资源\文件，这是出于安全考虑的功能，话虽如此，我可以知道重定向到本地 URL 的具体原因是什么（正在扩展网络传播）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-24T11:08:21.223

为了重定向到本地文件，我做了一个技巧。这是我的代码：

1.  文件：背景.js

    ```
    chrome.webRequest.onBeforeRequest.addListener(function(details) {
      return {
        redirectUrl : chrome.extension.getURL("index.html")
      };
    }, {
    urls : ["<all_urls>"]
    }, ["blocking"]);
    function r(tabId) {
    chrome.tabs.update(tabId, {
        "url": redirectUrl
    }); 
    ```

    }

    chrome.extension.onRequest.addListener(function (request, sender, sendResponse) {

    ```
    if (request.redirect) {
            chrome.windows.getCurrent(function(w){
                chrome.tabs.query({windowId : w.id}, function(t){
                    r(t.id);
                });
            });
    }
    sendResponse({
        redirected: redirectUrl
    }); 
    ```

    });

2.  在您的扩展程序中创建文件 index.html，其中包含以下内容：

    ```
    <html>
    <head>
        <title>Redirecting...</title>
        <script type="text/javascript" src="redirect.js"></script>
    </head>
    <body >
    </body> 
    ```

3.  创建文件redirect.js：

    function request(){
    chrome.extension.sendRequest({ redirect: true }, function(rsp){ }); }

    document.addEventListener('DOMContentLoaded', function(){ request(); return false; });

# asp.net-mvc-4 - MVC 4 - 样本成员

> ID：13380020
> 
> 赞同：0
> 
> 时间：2012-11-14T13:45:45.047
> 
> 标签：asp.net-mvc-4

我是 MVC4 的新用户。

我需要创建一个带有身份验证系统的网站。

我需要使用具有相同数据（用户名、密码 ecc ...）的现有数据库。

MVC4 附带 SampleMembership 提供程序。

如何开发我的个人提供程序以将用户身份验证为 SampleMembership？

是否可以覆盖 SampleMembership 中的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:56:27.313

我很确定您指的是 SimpleMembership。SimpleMembership[不是为广泛定制或集成到现有数据库而开发的](https://stackoverflow.com/questions/12360126/simplemembership-with-custom-database-schema-in-asp-net-mvc-4)。要使用现有数据库，您需要创建自己的成员资格提供程序，就像在 ASP.NET 中一样。您可以在[此处](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)找到执行此操作的方向。

# jquery - 全局变量未在 ajax 调用中显示结果

> ID：13380023
> 
> 赞同：0
> 
> 时间：2012-11-14T13:45:50.273
> 
> 标签：jquery

这里的 index 是一个全局变量。我正在另一个函数中操作索引。

之后我调用这个函数。它在 ajax 调用外部和之后显示实际结果，但在 ajax 调用内部不显示。

```
var urlSearch = "http://192.168.10.113/collective-intellegence/UserClickPersonClassifier?userid=1&query=asp.net";
alert(index);
$.ajax({
    url: urlSearch,
    type: 'POST',
    dataType: 'json',
    success: function (data) {
        alert(index);
    }
}); 
```

是不是我犯了什么错误。

请帮助解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:49:55.257

确保ajax请求成功。您可以尝试添加`alert('a');`之前`alert(index);`

如果它成功进入，那么你应该确保处理`index`全局变量的函数在你发出 ajax 请求之后并且在你得到响应之前不会触发。我会在该函数中添加一个警报，上面写着“从 XX 更改为 YY”

# excel - 如何更改 Excel 下拉列表中的字体大小和颜色？

> ID：13380025
> 
> 赞同：18
> 
> 时间：2012-11-14T13:45:55.807
> 
> 标签：excel, vba

我想知道是否可以在 Excel 中设置下拉列表样式。文本很小，没有样式，我想知道下拉列表样式是否可以更改？

真正有意义的是，如果下拉列表项复制与其源单元格相同的样式，即交替的单元格背景颜色、字体、大小等。甚至复制验证单元格本身的样式！？

有没有办法使用 VBA 或任何其他 3rd 方方法来改变它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T14:22:04.013

遗憾的是，您无法在使用数据验证创建的下拉列表中更改字体大小或样式。

但是，您可以在组合框中设置文本样式。按照此处的说明进行操作：[Excel 数据验证组合框](http://www.contextures.com/xlDataVal10.html "Excel 数据验证组合框")

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-10T19:12:55.183

您无法更改默认设置，但有一个无代码的解决方法。

选择整个工作表并将数据的字体大小更改为较小的值，例如 10 或 12。当您放大查看数据时，您会发现下拉框条目现在可见。

需要强调的是，问题不在于下拉菜单中的字体大小，而是下拉菜单和数据显示字体大小之间的相对大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-26T12:41:26.443

我在 60-70% 缩放 vue 上工作，我的下拉菜单不可读，所以我编写了这个简单的代码来解决这个问题

请注意，我首先选择了所有下拉列表（CTRL+鼠标单击），进入公式选项卡，单击“定义名称”并将它们命名为“ProduktSelection”

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)

Dim KeyCells As Range
Set KeyCells = Range("ProduktSelection")
    If Not Application.Intersect(KeyCells, Range(Target.Address)) _
           Is Nothing Then

ActiveWindow.Zoom = 100

End If

End Sub 
```

然后我有另一个子

```
Private Sub Worksheet_Change(ByVal Target As Range) 
```

当值改变时，我回到 65%。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-29T17:07:01.543

尝试使整个工作表字体变小。然后缩放并保存。首先做一个练习表，因为它真的把一切都搞砸了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-06-04T13:57:20.957

我创建了一个 100% 的自定义视图。使用下拉菜单然后单击查看页面布局以返回到较小的视图。

# android - Android 模拟器不适用于 KVM

> ID：13380028
> 
> 赞同：2
> 
> 时间：2012-11-14T13:46:08.747
> 
> 标签：android, android-emulator

> **可能重复：**
> [Android 模拟器基于 QEMU。我可以使用 KVM 吗？](https://stackoverflow.com/questions/2598942/android-emulator-is-based-on-qemu-can-i-use-kvm-with-it)

我正在编写一个 Android 应用程序，我想在平板电脑上测试我的应用程序。但我没有平板电脑，也不打算买。这就是为什么我需要一个好的模拟器，但是“旧”模拟器在我的机器上真的很慢，所以我需要一个好的 Android-x86 支持或 Android 模拟器的 KVM 支持。

问题是：KVM 不起作用，x86 图像的速度很好，但屏幕旋转支持很差（这让我很烦恼，因为这正是我所需要的）。我的机器是：

硬件：

*   AMD Phenom II 1055T，启用虚拟化
*   Radeon HD5750（可能是 OpenGL 问题？）

软件：

*   Arch Linux
*   已安装 qemu-kvm（我可以运行启用了 kvm 的虚拟机）
*   已安装 Android SDK r20
*   Android SDK平台工具r14安装
*   安装了 Intel x86 Atom Image（API 15 和 16，两者都不起作用）
*   专有的 fglrx 驱动程序已安装并正常工作

根据[https://developer.android.com/tools/devices/emulator.html](https://developer.android.com/tools/devices/emulator.html)，这个设置应该可以工作，但是当我尝试从命令行启动模拟器时，就像链接所建议的那样，我得到一个黑色窗口并且没有任何反应（我等了大约 30 分钟）。我启动模拟器：

```
模拟器 -verbose -avd Nexus7KVM -qemu -m 1024 -enable-kvm

```

当我更改`-enable-kvm`为`-disable-kvm`时，模拟器启动，但它和以前一样慢（当然）。输出在 pastebin: [Link](http://pastebin.com/gvQfpAny)上。

任何建议表示赞赏。即使你说“Ubuntu 12.04 或任何对我有用的东西”......我真的在考虑安装一个更知名的 Linux 发行版，只是为了让模拟器工作。

编辑：我添加了`-show-kernel`标志，这是 pastebin 上的输出：[链接](http://pastebin.com/jtkXFdmx)

我在新安装的 Debian 系统上尝试了模拟器。相同的行为。AOSP 上的问题：[链接](https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=33483)。

# java - 摆脱文件扩展名？

> ID：13380033
> 
> 赞同：-2
> 
> 时间：2012-11-14T13:46:16.907
> 
> 标签：java, servlets

帮助做出这样的事情（在之前的答案中，我被告知我解释得不好，现在尝试解释poponyatneee）我有一个表格，只是一个表格，代码是：

```
<form action="searchf" method="Post">
<input type="text" name="text" autofocus >
<input type="submit" value="">
</form> 
```

用户在这个表单中输入不同的文件名，例如：index.txt、hello.html（重名的文件不会，基本上都是txt文件）。接下来，servlet 接受用户输入的字符串：

```
String myName = request.getParameter("text"); 
```

继续程序叫输入文件寻找文件夹中的文件，但事实上是需要进入index.html程序才能找到文件夹中的文件，而不仅仅是索引，这里的帮助输入扩展名不一定要尝试这样做 ：

```
String myNamee = request.getParameter("text");
String myName = myNamee.replaceFirst("[.][^.]+$", ""); 
```

它没有用（我会很高兴收到任何回复

*埃里克·斯科特*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:50:13.310

为什么不删掉从名称中最后一个点到结尾的所有内容：

```
final String baseName = fileName.substring(0, fileName.lastIndexOf(".")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:55:38.010

如果您需要将文件扩展名与文件名分开，您可以执行以下操作：

```
String file = request.getParameter("text");
String fileNoExt, fileExt = "";
if(file.indexOf(".") == -1) {
   fileNoExt = file;
else {
   fileNoExt = file.substring(0,file.lastIndexOf("."));
   fileExt  = file.substring(file.lastIndexOf(".")+1);
} 
```

我建议您在 Servlet 的上下文之外测试此代码。只需使用 main 方法创建一个简单的 Java 程序来搜索目录中的文件，您就可以忘记用户输入和表单信息。只需对一些测试数据进行硬编码，以确保您知道如何查看目录并且处理文件名的代码正常工作。

您可能会发现这个[其他堆栈溢出问题](https://stackoverflow.com/questions/1384947/java-find-txt-files-in-specified-folder)有助于理解如何在目录中搜索文件。

# c++ - 有整理 C++ 代码的工具吗？

> ID：13380039
> 
> 赞同：0
> 
> 时间：2012-11-14T13:46:48.960
> 
> 标签：c++, macos, visual-studio

在 Visual Studio 中有一个函数（我猜它的快捷方式是`^`+`E`后跟`D`）可以自动缩进代码并清理空白。

我现在在 Mac OS X 上做 C++ 并且喜欢有类似的东西。CLI 工具会很棒。有这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:36:44.090

[Artistic Style](http://astyle.sourceforge.net/)是C、C++、C# 和 Java 的 CLI 源代码格式化程序。

# python - 按计数迭代计数器中的项目

> ID：13380042
> 
> 赞同：1
> 
> 时间：2012-11-14T13:47:02.057
> 
> 标签：python, counter

假设我有一个`Counter`对象：`Counter({'test': 2, 'this': 1, 'is': 1})`

我想通过以下方式迭代这个对象：

```
c = Counter({'test': 2, 'this': 1, 'is': 1})

for i,s in my_counter_iterator(c):
    print i, ":", s

>> 1 : ['this', 'is']
>> 2 : ['test'] 
```

我如何有效地做到这一点（此代码应针对每个请求在 Web 服务器上运行......）？

*编辑*

我已经尝试过了，但我觉得有更有效的方法。在那里？

```
from itertools import groupby

for k,g in groupby(sorted(c.keys(), key=lambda x: c[x]),key=lambda x: c[x]):
    print k, list(g)

1 ['this', 'is']
2 ['test'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T13:55:06.403

如果你想用大的s来做这个`Counter`，你真的别无选择，只能反转映射。

```
inv_c = defaultdict(list)
for k, v in c.iteritems():
    inv_c[v].append(k) 
```

然后`inv_c.iteritems()`就是你想要的。

# javascript - 将 UTC 日期转换为日期时间字符串 Titanium

> ID：13380046
> 
> 赞同：3
> 
> 时间：2012-11-14T13:47:30.570
> 
> 标签：javascript, titanium, titanium-mobile, datetime-format

我有一个日期字符串**"2012-11-14T06:57:36+0000"**我想将其转换为以下格式**"Nov 14 2012 12:27"**。我尝试了很多解决方案，包括[Convert UTC Date to datetime string Javascript](https://stackoverflow.com/questions/7708223/convert-utc-date-to-datetime-string-javascript)。但没有什么能帮助我。以下代码在android中对我有用。但对于 ios 它显示为**无效日期**

```
var date = "2012-11-14T06:57:36+0000";
//Calling the function
date = FormatDate(date);

//Function to format the date
function FormatDate(date)
{   
    var newDate = new Date(date);
    newDate = newDate.toString("MMMM");
    return (newDate.substring(4,21));   
} 
```

谁能帮我？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T11:55:44.023

所有浏览器都不支持相同的日期格式。我们可以选择的最佳方法是在分隔符 - 和 : 上拆分字符串，并将每个结果数组项传递给 Date 构造函数，请参见以下函数

```
function FormatDate(date)
{   
    var arr = date.split(/[- :T]/), // from your example var date = "2012-11-14T06:57:36+0000";
    date = new Date(arr[0], arr[1]-1, arr[2], arr[3], arr[4], 00);
    newDate = date.toString("MMMM");
    //.. do further stuff here  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:24:17.093

您可以`Date`通过初始化新日期来获取对象：

```
var date = "2012-11-14T06:57:36+0000";
var newDate = new Date(date); // this will parse the format

console.log(newDate);
> Wed Nov 14 2012 01:57:36 GMT-0500 (EST) 
```

至于格式，已经有几个线程（比如[这个](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)）。

还有一些用于日期格式化和处理的库，人们在进行大量日期处理时通常最终会使用这些库。如果您正在寻找类似的东西，我会建议[Datejs 。](http://www.datejs.com/)

# java - JVM 性能指标

> ID：13380047
> 
> 赞同：0
> 
> 时间：2012-11-14T13:47:35.620
> 
> 标签：java, jvm, metrics

我正在考虑从 JVM 中捕获一些指标，例如最大/最小/已用内存、cpu 消耗以及以后可能更多。

我做了一些研究，但找不到任何合适的东西。

有人可以指导我正确阅读，从哪里开始？

请注意，我不是在寻找市场上的任何类型的软件，而是关于阅读材料如何通过 JMX 以编程方式获取指标，因此，我可以将这些存储在数据库或文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:56:39.297

IBM 有一篇非常好的文章：[http ://www.ibm.com/developerworks/library/j-rtm1/index.html?ca=dgr-jw22javaruntime1&S_TACT=105AGX59&S_CMP=GR](http://www.ibm.com/developerworks/library/j-rtm1/index.html?ca=dgr-jw22javaruntime1&S_TACT=105AGX59&S_CMP=GR)

它分为三个部分，包含详细信息和解释。

```
Part 1:

Explores attributes of application performance management (APM) systems
Describes common antipatterns for system monitoring
Presents methods for monitoring the performance of JVMs
Offers techniques for efficiently instrumenting application source code

Part 2 will focus on methods of instrumenting Java classes and resources without modification of the originating source code. 
Part 3 will address methods for monitoring resources outside the JVM, including hosts and their operating systems and remote services such as databases and messaging systems. It will conclude with a discussion of additional APM issues such as data management, data visualization, reporting, and alerting. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:49:04.267

查看可用的[JMX 统计信息](http://docs.oracle.com/javase/1.5.0/docs/guide/management/agent.html)以及如何使用[JConsole](http://docs.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html)监控它们。默认情况下可以使用很多统计信息（垃圾收集信息、内存池、线程统计信息）。CPU 有点棘手，但请查看[这个 SO question](https://stackoverflow.com/questions/971016/efficient-way-of-getting-thread-cpu-time-using-jmx)了解更多详细信息。

请注意，您不必只使用 JConsole。您可以轻松编写自己的监视器来整理这些统计信息。

# git - GIT 分支的白痴指南

> ID：13380051
> 
> 赞同：-2
> 
> 时间：2012-11-14T13:47:48.223
> 
> 标签：git

好的，我的一个客户要求我对他的网站进行更改。我可以从他们的 webdev 团队访问他们的 GIT，但我对自己在做什么只有一个模糊的概念。我做了一些更改，设法推动它们，然后收到一封来自他的邮件，说我在错误的分支中做这件事，而是在“wp”分支中做。但我不知道该怎么做，有什么想法吗？

从一开始，我就使用“git clone”来获取存储库。然后我编辑该文件，然后管理谷歌几个命令来取回它......他们是......

```
git add file.php
git commit -m 'comments'
git push 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:30:43.207

*虽然说“只是 google it”在情感上有些满足，但最终并不是特别有帮助。*

正如我在评论中提到的，[分支](http://git-scm.com/book/en/Git-Branching)章节非常好，并且在解释 git 分支方面做得比我在这里做得更好。Robodo 也给出了正确的答案，那就是你将如何切换到`wp`分支以进行工作。

您可能会收到一封电子邮件说“您做错了”，因为他们使用的工作流程中分支代表稳定的可部署代码（[此处](http://scottchacon.com/2011/08/31/github-flow.html)`master`是此类工作流程的示例）。因此，直接将东西提交给 master 是不受欢迎的。您应该找出他们使用的工作流程并尝试遵循它。

运行`clone`命令时，获取包含所有分支的远程存储库的完整副本。您可以通过运行查看所有可用的分支

```
git branch --all 
```

*对我来说，本地分支是白色的，远程分支是红色的，当前签出的分支是绿色的。*

远程分支？

> 远程分支是对远程存储库上分支状态的引用。它们是您无法移动的本地分支机构；每当您进行任何网络通信时，它们都会自动移动。远程分支充当书签，提醒您远程存储库上的分支是您最后一次连接到它们的位置。

为了在远程分支上工作，您[创建一个本地](https://stackoverflow.com/q/10002239/164966)分支来跟踪远程分支并提交到该分支。这可能听起来有点奇怪，但它实际上只是一个命令

```
git checkout -t origin/wp 
```

创建本地分支后，您可以使用

```
git checkout <branch name> 
```

您的工作流程最终可能会是这样的

```
git clone <url>         
git checkout -t origin/wp               // create tracking branch
git checkout -b <branch name>           // branch for feature you plan to work on
    ... work work work ...
git add <files as needed>               // you can commit locally as much as you'd like
git commit                              // no one will see it until you push
    ... when work is done ...
git checkout wp                         // switch to branch you will merge into
git pull                                // make sure it's up to date with remote code
git merge <branch you were working on>  // merge your changes into wp branch and resolve
                                        // merge conflicts, if there are any
git push                                // publish your changes to remote repository 
```

[关于合并与变基](https://stackoverflow.com/questions/457927/git-workflow-and-rebase-vs-merge-questions)工作流程有一些激烈的辩论。如果您的客户有偏好，那就去吧。如果他们不这样做，请阅读双方的论点，看看你更喜欢哪一个并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:52:23.320

首先检查您需要处理的分支：

```
get checkout wp 
```

然后你提交并推动......

# objective-c - 结合 NSDictionaries

> ID：13380052
> 
> 赞同：0
> 
> 时间：2012-11-14T13:47:50.190
> 
> 标签：objective-c, ios, json, cocoa-touch

目标：将返回的所有 NSDictionaries 与一个公共键值“延迟”组合到一个 NSMutablearry 中，我可以使用它来比较结果（真或假）以在地图上放置绿色或红色图钉。
此代码以 JSON 格式返回机场数据，我将其转换为所请求机场的字典。有许多键，但在这部分代码中，我只对一个“延迟”感兴趣，我想将它组合成一个 NSMutablearry。
因为我一次只能请求一个机场，所以它单独带回每个请求的机场，我得到 9 组数据。我想要的是 9 个延迟键都在一个数组中，用于 9 个不同的机场。

```
`- (void)configureData
{

self.airportCodes = [[NSArray alloc] initWithObjects:

                     @"ATL",
                     @"BOS",
                     @"BWI",
                     @"CLT",
                     @"CVG",
                     @"DEN",
                     @"EWR",
                     @"ORD",
                     @"SFO",
                     nil];

NSUInteger airportCount = self.airportCodes.count;

for(int i=0; i < airportCount;i++){

    NSURL *url = [self urlWithSearchText:[self.airportCodes objectAtIndex: i]];
    NSString *jsonString = [self performAirportRequestWithURL:url];
    if (jsonString == nil) {
        [self showNetworkError];

    }

    NSDictionary *dictionary = [self parseJSON:jsonString];
    if (dictionary == nil) {
        [self showNetworkError];
    }

    self.airportDelays = [[NSMutableArray alloc] initWithCapacity:9];

    [self parseDelay:dictionary];

    //NSLog(@"AP Delays %@",self.airportDelays);
} 

return;
}

-  (void)parseDelay:(NSDictionary *)dictionary
{

//self.delay = [dictionary objectForKey:@"delay"];
[self.airportDelays addObject:dictionary];

NSLog(@"AP Delays %@",self.airportDelays);

return;
}

- (NSURL *)urlWithSearchText:(NSString *)searchText
{
NSString *escapedSearchText = 
[searchText    stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *urlString = 
[NSString stringWithFormat:
@"http://services.faa.gov/airport/status/%@? format=application/json", escapedSearchText];
NSURL *url = [NSURL URLWithString:urlString];
return url;
}

- (NSString *)performAirportRequestWithURL:(NSURL *)url
{
NSError *error;
NSString *resultString = [NSString stringWithContentsOfURL:
url encoding:NSUTF8StringEncoding error:&error];
if (resultString == nil) {
    NSLog(@"Download Error: %@", error);
    return nil;
}
return resultString;
}

- (void)showNetworkError
{
UIAlertView *alertView = [[UIAlertView alloc]
                          initWithTitle:@"Whoops..."
                          message:@"There was an error reading 
                          from the FAA Server. Please      try again."
                          delegate:nil
                          cancelButtonTitle:@"OK"
                          otherButtonTitles:nil];
[alertView show];
}

- (NSDictionary *)parseJSON:(NSString *)jsonString
{
NSData *data = [jsonString dataUsingEncoding:NSUTF8StringEncoding];

NSError *error;
id resultObject = [NSJSONSerialization JSONObjectWithData:data options:
kNilOptions     error:&error];
if (resultObject == nil) {
    NSLog(@"JSON Error: %@", error);
    return nil;

    if (![resultObject isKindOfClass:[NSDictionary class]]) {
        NSLog(@"JSON Error: Expected dictionary");
        return nil;
    }
}
return resultObject;
}

@end` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:51:06.663

这是您的问题：每次创建新字典时您都在实例化 airportDelays 数组，因此，您只需在销毁 airportDelay 数组并创建新字典之前添加一个字典。见下文

```
self.airportDelays = [[NSMutableArray alloc] initWithCapacity:9];

[self parseDelay:dictionary]; 
```

应该

```
if (!self.airportDelays) {
    self.airportDelays = [[NSMutableArray alloc] initWithCapacity:9];
}
[self parseDelay:dictionary]; 
```

我也厌倦了你使用 for 循环来进行网络操作。您可能应该使用不同的排队机制，程序在向 web 服务询问下一个字典之前等待第一个字典的响应。不过，这可能是不同时期的不同教训。

祝你好运

# php - magento 加载 catalog/product/view.phtml 两次

> ID：13380058
> 
> 赞同：0
> 
> 时间：2012-11-14T13:48:20.877
> 
> 标签：php, zend-framework, magento

我正在尝试创建一个可以列出特定类别产品的 magento 侧边栏框。

我创建了一个文件，该文件在名为 most_sold_list.phtml 的某个类别中创建产品列表，其中包含以下内容...

```
 <?php
        $_productCollection_1 = $this->getLoadedProductCollection();
    ?>
    <div class="link_list_with_title">
        <p class="catagory_title">Best Sellers</p>

        <ul>
        <?php foreach ($_productCollection_1 as $_product_1): ?>
            <li>
                <a href="<?php echo $_product_1->getProductUrl() ?>" title="<?php echo $_product_1->getName(); ?>"><?php echo $_product_1->getName(); ?></a>
            </li>
        <?php endforeach ?>
        </ul>
    </div> 
```

然后我更新我的 local.xml 以包含（在`<default><reference name="left">`）...

```
 <block type="catalog/product_list" name="most_sold.leftnav" template="most_sold_list.phtml">
        <action method="setCategoryId"><category_id>18</category_id></action>
    </block> 
```

正如我所期望的那样，这会将块添加到页面中。但是当我转到产品页面时，我收到以下错误...

```
Fatal error: Cannot redeclare get_quatity_weight_string_view() (previously declared in /.../app/design/frontend/superchef/default/template/catalog/product/view.phtml:37) in /.../app/design/frontend/superchef/default/template/catalog/product/view.phtml on line 54 
```

我已经检查过，该函数没有在其他任何地方声明，并且一旦我删除我的新块，这个错误消息就会消失。另请注意，第 54 行是函数的右大括号。

我已经尝试通过将其代码内联来完全删除该功能，但随后我得到了 magento 错误消息页面。

我能得出的唯一结论是 view.phtml 被加载了两次。我已经搜索过这个，我看到提到 zend loader 加载文件两次。

任何人都可以帮我解决这个问题，这对我来说毫无意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:08:31.420

我现在已经通过阅读以下内容解决了这个问题： [http ://www.bwigg.com/2010/01/magento-featured-products-in-sidebar/](http://www.bwigg.com/2010/01/magento-featured-products-in-sidebar/)

所以这就是我所做的，以防其他人遇到这个奇怪的问题。

更新布局 xml 文件，使块类型为“目录/导航”。

所以它现在看起来像这样......

```
<block type="catalog/navigation" name="most_sold.leftnav" template="most_sold_list.phtml">
            <action method="setCategoryId"><category_id>18</category_id></action>
 </block> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T22:47:50.370

```
 <remove name="category.products" /> 
```

# ubuntu - Jboss 7.1.1 三节点集群

> ID：13380059
> 
> 赞同：0
> 
> 时间：2012-11-14T13:48:34.673
> 
> 标签：ubuntu, jboss, load-balancing

我想创建一个由 3 个 Jboss AS7 节点组成的集群并具有以下场景。

我的三台机器是 1- Windows Server 2003 机器（IP：193.16.1.146） 2- Window 7 机器（IP：193.16.1.67） 3- Ubuntu Linux 机器（IP：193.16.1.68）

我正在使用standalon-full-ha.xml 配置文件来运行Jboss。

三台机器上的配置文件相同（IP除外），这是我对这三个文件所做的更改

1- jgroup 子系统

```
<subsystem xmlns="urn:jboss:domain:jgroups:1.1" ***default-stack="tcp"***>
        <stack name="udp">
            .........
        </stack>
        <stack name="tcp">
            <transport type="TCP" socket-binding="jgroups-tcp" diagnostics-socket-binding="jgroups-diagnostics"/>
    <protocol type="TCPPING">
                <property name="initial_hosts">193.16.1.146[7600],193.16.1.68[7600],193.16.1.67[7600]</property>
                <property name="num_initial_members">3</property>
                <property name="port_range">0</property>
                <property name="timeout">2000</property>
            </protocol>
            .......
        </stack>
    </subsystem> 
```

2- 接口

```
<interfaces>
    <interface name="management">
        <inet-address value="${jboss.bind.address.management:193.16.1.68}"/>
    </interface>
    <interface name="public">
        <inet-address value="${jboss.bind.address:193.16.1.68}"/>
    </interface>
    <interface name="unsecure">
        <inet-address value="${jboss.bind.address.unsecure:193.16.1.68}"/>
    </interface>
</interfaces> 
```

当然，IP会因机器而异。

现在，当我在两台 Windows 机器之间形成一个集群时，一切正常。当我启动两个节点时，我可以在控制台日志中（在两台机器中）看到与另一个节点的连接。

当我在 Ubuntu 机器和两台 windows 机器中的任何一台之间形成集群时，ubuntu 机器没有连接到另一个节点（它的控制台日志中没有出现任何内容）并且 windows 机器不断抛出 Failed to create netty connection: java.lang. net.SocketTimeOutException。

我使用以下命令禁用了 ubuntu 机器中的防火墙

```
sudo ufw disable 
```

然后重新启动机器。

导致集群无法在 Ubuntu 机器和其他 Windows 机器之间工作的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:57:38.093

JBoss AS7 使用 JGroups 进行底层组通信，以发现集群成员并从集群传出。

如果您正在使用配置文件 full-ha 运行服务器，那么消息传递系统也会形成一个集群。HornetQ 是 JBoss AS7 中的默认消息提供程序。但是 HornetQ 不使用 Jgroups 来发现服务器。它是完全独立的。HornetQ 使用 Netty 并在默认配置中使用 UDP 多播来广播服务器连接设置。

因为您使用的是 JGroups TCPPing，所以我假设服务器可能不在同一个 UDP 多播组中。

# sed - 顺序增加 sed 输出流中的数字

> ID：13380060
> 
> 赞同：1
> 
> 时间：2012-11-14T13:48:36.333
> 
> 标签：sed

我有一个小 sed 脚本，它应该在第一个“黄色狮子”出现之前打印“动物王 1：”，在第二个“黄色狮子”之前打印“动物王 2：”，在前面打印“动物王 3：”第三次“黄狮”事件。是否有可能在 sed 中实现这一点？

sed 和输出的输入文件的内容可以在这里看到：

```
[user@T60 ~]$ cat animals.txt 
red cat
blue dog
yellow lion
brown tiger
black hippo
yellow lion
white zebra
yellow lion
[martint@martint ~]$ cat sed-test.sh 
#!/usr/bin/env bash

sed 's/\(.*lion\)/\
\
animal king 1:\
\
\1 /' < "animals.txt"
[user@T60 ~]$ ./sed-test.sh 
red cat
blue dog

animal king 1:

yellow lion 
brown tiger
black hippo

animal king 1:

yellow lion 
white zebra

animal king 1:

yellow lion 
[user@T60 ~]$ 
```

如您所见，“动物之王”的数字在所有三个出现中都是“1”。有没有办法在 sed 中的每个“.*lion”匹配之后将其增加一？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:06:51.687

这可能对您有用（GNU sed）：

```
sed -re '/^.*lion/!b;w lion_file' -e 'g;s/[0-9]9*$/\n&/;h;y/0123456789/1234567890/;G;s/^.*\n(.*)\n(.*)\n.*/\2\1/;s/^(0*)\n*$/1\1/;h;s/^.*/\n\nanimal king &:\n/;R /lion_file' file 
```

这有点作弊，因为它使用临时文件来保存`lion`行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T19:43:45.987

使用 awk 更具可读性：

```
awk '/lion/ {printf("\nanimal kingdom %d:\n\n", ++n)} 1' animals.txt 
```

# c++ - 指针如何完全排序？

> ID：13380063
> 
> 赞同：29
> 
> 时间：2012-11-14T13:48:38.940
> 
> 标签：c++, pointers, predicate, standard-library

C++ 中的指针通常只能比较是否相等。相比之下，小于比较只允许用于指向同一个完整对象的子对象（例如数组元素）的两个指针。

因此`T * p, * q`，一般来说，评估是非法的`p < q`。

标准库包含函子类模板`std::less<T>`等，它们包装了内置的 operator `<`。但是，该标准对指针类型（20.8.5/8）有这样的说法：

> 对于模板`greater`、`less`、`greater_equal`和`less_equal`，任何指针类型的特化都会产生一个总顺序，即使内置运算符`<`、`>`、`<=`、`>=`没有。

这怎么可能实现？甚至有可能实现这一点吗？

我查看了 GCC 4.7.2 和 Clang 3.2，它们根本不包含*任何*指针类型的特化。它们似乎依赖于`<`在所有支持的平台上无条件地有效。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-14T14:46:27.163

Can pointers be totally ordered? Not in portable, standard C++. That's why the standard requires the implementation to solve the problem, not you. For any given representation of a pointer, it should be possible to define an arbitrary total ordering, but how you do it will depend on the the representation of a pointer.

For machines with a flat address space and byte addressing, just treating the pointer as if it were a similarly sized integer or unsigned integer is usually enough; this is how most compilers will handle comparison within an object as well, so on such machines, there's no need for the library to specialize `std::less` et al. The "unspecified" behavior just happens to do the right thing.

For word addressed machines (and there is at least one still in production), it may be necessary to convert the pointers to `void*` before the compiler native comparison will work.

For machines with segmented architectures, more work may be necessary. It's typical on such machines to require an array to be entirely in one segment, and just compare the offset in the segment; this means that if `a` and `b` are two arbitrary pointers, you may end up with `!(a < b) && !(b < a)` but not `a == b`. In this case, the compiler must provide specializations of `std::less<>` et al for pointers, which (probably) extract the segment and the offset from the pointer, and do some sort of manipulation of them.

EDIT:

On other thing worth mentionning, perhaps: the guarantees in the C++ standard only apply to standard C++, or in this case, pointers obtained from standard C++. On most modern systems, it's rather easy to `mmap` the same file to two different address ranges, and have two pointers `p` and `q` which compare unequal, but which point to the same object.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-14T13:58:54.487

> 是否可以在指针不形成全局总顺序的目标上实现标准库？

是的。给定任何有限集，您始终可以在其上定义任意总顺序。

考虑一个简单的例子，你只有五个可能的不同指针值。我们称这些为 O（对于 nullptr）、γ、ζ、χ、ψ ¹。

假设来自四个非空指针的任何两个不同指针对都不能与`<`. 我们可以简单地说，它`std::less`给了我们这个顺序：O ζ γ ψ χ，即使`<`没有。

当然，以有效的方式实现这种任意排序是实现质量的问题。

* * *

¹我正在使用希腊字母来消除由于熟悉拉丁字母而产生的潜意识秩序概念；我向知道希腊字母顺序的读者道歉

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T14:03:19.567

在大多数具有平坦地址空间的平台上，它们可以简单地在指针之间进行数值比较。在无法做到这一点的平台上，实现者必须想出一些其他方法来建立要在 中使用的总顺序`std::less`，但他们可能会使用更有效的方法来`<`，因为它的保证较弱。

在 GCC 和 Clang 的情况下，`std::less`只要`<`为`<`. 由于他们是实现 的行为的人`<`，他们可以依赖此行为，但他们的用户不能，因为它可能会在未来发生变化。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-14T14:34:05.467

问题在于分段架构，其中内存地址有两部分：段和偏移量。将这些部分转换为某种线性形式“很容易”，但这需要额外的代码，因此决定不为`operator<`. 对于分段架构，`operator<`可以简单地比较偏移量。早期版本的 Windows 存在此问题。

请注意，“足够简单”是系统程序员的观点。不同的段选择器可以引用同一个内存块，因此产生规范排序需要仔细检查段映射的细节，这取决于平台并且可能很慢。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-14T02:20:21.683

我认为这个讨论中缺少一个更深层次的概念，那就是**指针出处**。

原则上，您一般不能比较指针，但您应该能够比较来自同一指针的指针（通过算术运算）。例如，来自黑盒的指针（如对 的不同调用`new`）无法可靠地进行比较。（这里的比较适用于排序，但我想严格来说，在这种情况下定义不明确也是平等，我不确定。这将涵盖上述`mmap`情况。）

因此，这是我对（相当无用但概念性的）答案的尝试：指针的比较是顺序运算符适用性域中的总顺序（即，当它不是未定义时）。从好的方面来说，是的，继续比较属于/来自同一分配或来自单个块的指针。毕竟，它必须认为，`p2 > p1`如果`T* p2 = p1 + 1;`

这类似于 c++ 中容器迭代器发生的情况，如果两个迭代器来自不同的容器，那么比较它们是没有意义的。

* * *

**编辑：** Sean Parent 对这个问题的看法，[https:](https://youtu.be/mYrbivnruYw?t=3526) //youtu.be/mYrbivnruYw?t=3526 。释义（1）只能比较同一个容器的指针【我觉得这个太强了，除了`std::vector`】。(2)`std::less`用于指针，所以它只用于“表示”（例如放入`std::set`）。(3) 一些编译器会抱怨比较 (void?) 指针。（我认为这很好，因为 void* 没有算术）。

* * *

一些相关材料：[http ://www.open-std.org/jtc1/sc22/wg14/www/docs/n2263.htm#pointer-provenance-in-c-and-provenance-within-allocated-regions](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2263.htm#pointer-provenance-in-c-and-provenance-within-allocated-regions)

# python - 一种自动将参数传递给函数的方法？

> ID：13380064
> 
> 赞同：5
> 
> 时间：2012-11-14T13:48:40.920
> 
> 标签：python, parameter-passing

我在一个模块中有一堆回调函数。他们都`some_func()`用第一个参数调用，比如说，几个参数总是相同的，并且从他们自己的参数中派生出来，而其他参数则不同。像这样：

```
from outer.space import some_func
def callback_A(param1, param2, param3):
    ...
    some_func(param2+param1, param3, ..., ...)
    ...

def callback_B(param1, param2, param3, param4):
    ...
    some_func(param2+param1, param3, ..., ...)
    ... 
```

这一切都在代码中。而且比 param2+param1 更丑。

在 C/C++ 中，我只会做一个宏

```
#define    S_F(a,b)    some_func(param2+param1, param3, a, b) 
```

并开始在回调中使用 S_F 而不是`some_func`. 我可以在 Python 中做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:04:06.553

您可以使用`functools.partial`

```
>>> from functools import partial
>>> def my_function(a,b,c,d,e):
...     print (a,b,c,d,e)
... 
>>> func_with_defaults = partial(my_function, 1, 2, e=5)
>>> func_with_defaults(3, 4)
(1, 2, 3, 4, 5) 
```

编辑：

由于您事先没有这些值，因此您不能使用`partial`or `lambda`。您可能很想这样做：

```
>>> A = lambda x: x + y
>>> def do_something(y):
...     return A(2)    # hope it uses the `y` parameter...
... 
>>> do_something(1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in do_something
  File "<stdin>", line 1, in <lambda>
NameError: global name 'y' is not defined 
```

但正如你所见，它不起作用。为什么？因为当您定义一个函数时，python 会保存您定义它的范围并使用它来解析`global`/`nonlocal`变量。

如果您可以访问`some_func`它，则可以通过使用“破解”解释器堆栈来做您想做的`inspect`事情，但这不是一个健壮或优雅的事情，所以*不*要这样做。

在您的情况下，我要做的就是简单地重写该语句。

如果你真的想避免这种情况，你可以尝试使用`exec`：

```
>>> def some_function(a,b,c):
...     print(a,b,c)
... 
>>> code = 'some_function(a+b,c,%s)'
>>> 
>>> def func_one(a,b, c):
...     exec code % 1
... 
>>> def func_two(a,b,c):
...     exec code % 2
... 
>>> func_one(1,2,3)
(3, 3, 1)
>>> func_two(1,2,3)
(3, 3, 2) 
```

但这很*丑陋*。

如果您只对函数使用位置参数，您可以做一些更优雅的事情，例如：

```
>>> def compute_values(a,b,c):
...     return (a+b, c)
... 
>>> def func_one(a,b,c):
...     some_function(*(compute_values(a,b,c) + (1,)))
... 
>>> def func_two(a,b,c):
...     some_function(*(compute_values(a,b,c) + (2,)))
... 
>>> func_one(1,2,3)
(3, 3, 1)
>>> func_two(1,2,3)
(3, 3, 2) 
```

但是此时您只是在重复不同的文本，并且您失去了很多可读性。如果您想在 python 中具有预处理功能，您可以尝试[Python Preprocessing](http://code.google.com/p/pypp/)，即使在您的情况下，我宁愿只是重复函数调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T15:24:39.167

你可以基于装饰器：

```
import functools
from outer.space import some_func

def with_some(f):
    @functools.wraps(f)
    def wrapper(param1, param2, param3, *args):
        new_args = f(*args)
        return some_func(param1+param2, param3, *new_args)

    return wrapper

@with_some
def callback_A():
    return ()  # Will call some_func(param1 + param2, param3)

...

@with_some
def callback_B(param4):
    return param4,  # some_func(param1 + param2, param3, param4) 
```

包装的函数都将具有签名`f(param1, param2, param3, *args)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:52:12.010

```
S_F = lambda a, b: some_func(param2+params1, param3, a, b) 
```

请记住`param1`，`param2`和`param3`必须在 lambda 语句的范围内可用，就像`some_func`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T14:24:32.777

如何在函数签名中使用[关键字参数而不是位置参数：](http://docs.python.org/2/tutorial/controlflow.html#keyword-arguments)

```
some_func(**kwargs):
    Instead of position arguments, just use the keys that some_func can respond to. 
    You can defaults to the ones not included...
    if key1 in kwargs:
        #use key1...
    #...

def callback_A(param1, param2, param3):
    some_func(key1=param1+parma2,key2=param3, other_key=...)

def callback_B(param1, param2, param3, param4):
     some_func(key1=param2+param1, key2=param3, other_keys=..., ...) 
```

* * *

*编辑*

如果您无法将函数签名更改为，`some_func`则可以将其包装：

```
def some_func(a,b,c,d,e):
    print 'some_funct({}, {}, {}, {}, {})'.format(a,b,c,d,e)

def some_func_wrap(**kwargs):
    params={'p1':'default a','p2':'default b',
              'p3':'default c','p4':'default d','p5':'default e'}
    for p,arg in kwargs.items():
        try:
            del params[p]   # to raise an error if bad key
            params[p]=arg
        except KeyError:
            print 'bad param to some_func_wrap()\n'
            raise

    some_func(*[params[k] for k in sorted(params.keys())])

some_func_wrap(p1=1,p2=1+3) 
```

印刷：`some_funct(1, 4, default c, default d, default e)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-10T07:46:33.250

简单地说，您可以使用它`globals()/locals()`来自动获取上下文变量。

但是如果你的函数保存在不同的文件中，那么你可以尝试`inspect`使用模块来访问调用者的变量。

```
import inspect

def f1():
    v=11111
    f2()

def f2():
    v = inspect.stack()[1][0].f_locals['v']
    print(v)

f1() # print 11111 
```

这是另一个类似的问题： [Access variables of caller function in Python](https://stackoverflow.com/questions/15608987/access-variables-of-caller-function-in-python)

# facebook - 使用应用发布的图形 API 阅读 Facebook 帖子

> ID：13380067
> 
> 赞同：0
> 
> 时间：2012-11-14T13:48:58.720
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-insights

我的应用程序代表具有用户 access_token 的用户在墙上发布。发布后，我会取回持久存在于数据库中的 post_id。一个应用程序，我想使用 post_id 查询帖子以收集一些基本见解，例如评论和喜欢。我无法让我的应用程序查询数据。

我尝试了流表，但没有将数据作为应用程序返回。我收到“GraphMethodException”代码：100 我在帖子上检查了隐私设置，但这不包括对我尝试 GraphAPI /post_id 的应用程序的权限，它返回与流表相同的错误我尝试了带有 post_impressions 指标的见解表，但没有运气。我无法给出 post_id，所以尝试从 post_id 中删除 user_id 部分（xxxx_yyyy 其中 xxxx 是用户 ID）

我需要什么样的权限来请求用户授予我的应用程序 stream_read 权限？

如何使用我拥有的 post_id 查询见解表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:20:36.230

您只能读取具有活动用户访问令牌和 read_stream 权限的用户墙。

关于洞察力：也许有这个图表连接？

```
/[post-id]/insights 
```

好吧，它没有给我一个有效的帖子ID。但我相信您只能获得页面的见解，而不是用户帐户。请参见此处（关于页面，但可能是有用的附加信息）：[无法访问其他人页面的帖子见解](https://stackoverflow.com/questions/9489651/unable-to-access-a-posts-insights-for-someone-elses-page)

它不起作用的另一个原因，只是突然出现在我的脑海中：如果你去一个 facebook 页面，你有洞察力视图作为管理员。在用户个人资料上没有这样的东西。因此，您唯一可以跟踪的就是指向您的应用的链接在发布到用户个人资料后被点击的频率。您也可以轻松地将跟踪信息添加到链接中，因此您始终知道点击来自哪个配置文件。

# hibernate - HQL 结合了“distinct”和“order by”

> ID：13380069
> 
> 赞同：1
> 
> 时间：2012-11-14T13:49:02.340
> 
> 标签：hibernate, jpa, jpa-2.0, hql

如果我删除“distinct”或“order by”，则此查询有效，但它不能组合使用。我正在尝试遵循示例。你能解释一下吗？

```
String queryString = "select distinct event.county from Event as event order by event.county.county"

[main] - [ERROR] SqlExceptionHelper.logExceptions():144 >> ERROR: for SELECT DISTINCT, ORDER BY expressions must appear in select list
  Position: 215 
```

生成的 SQL

```
select distinct county1_.Id as Id4_, county1_.County as County4_ from Event event0_ inner join County county1_ on event0_.CountyID=county1_.Id cross join County county2_ where event0_.CountyID=county2_.Id order by county2_.County 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T14:26:40.430

尝试

```
select distinct county from Event event
inner join event.county county
order by county.county 
```

# android - 如何知道何时接听了拨出电话？

> ID：13380071
> 
> 赞同：0
> 
> 时间：2012-11-14T13:49:04.290
> 
> 标签：android

我怎么知道..似乎没有解决方案？是吗？

```
public void onCallStateChanged(int state, String incomingNumber) {
        switch(state) {
            case TelephonyManager.CALL_STATE_IDLE:
                    Log.d("Tony","Outgoing Call finished");
                    // Call Finished -> stop counter and store it.
                    callStop=new Date().getTime();
                    context.stopService(new Intent(context,ListenerContainer.class));

                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                    Log.d("Tony","Outgoing Call Starting");
                    // Call Started -> start counter.
                    // This is not precise, because it starts when calling,
                    // we can correct it later reading from call log
                    callStart=new Date().getTime();
                break;
        }
    } 
```

这里我们只有 2 个状态？？任何其他解决方案？一旦我们开始通话，OFFHOOK 就开始了，它一直保持到通话结束.. 无法区分它何时响铃或被接听.. 我的项目需要知道何时接听电话..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:33:53.400

据我所知，没有相同的公共 API。您也可以尝试打印信息 EXTRA_STATE_OFFHOOK 以查看它是否包含呼叫连接时的任何信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T19:28:39.773

无法检测呼出电话是否被应答。您可以识别来电何时响铃以及何时应答，但与去电不同，因为当您拨打该号码时，会触发摘机状态。

# ios - 在 NSMutableArray 中搜索对象并删除冗余值的最有效方法

> ID：13380077
> 
> 赞同：0
> 
> 时间：2012-11-14T13:49:21.717
> 
> 标签：ios, algorithm, search, nsmutablearray, duplicate-removal

我有一些数组，所有数组都有冗余字符串。现在我必须从 then 数组中删除多余的字符串，但在我的场景中我买不起蛮力技术。有什么有效的方法可以从数组中删除冗余值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:01:41.537

取决于你到底需要什么。如果您需要一个包含所有输入数组值且不重复的新数组，您可以将所有对象添加到 NSSet 中。一个集合将忽略添加的重复项。

如果您需要排除重复项的原始数组，最好的方法是对它们中的每一个进行排序，然后对它们中的每一个进行递归，删除重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:31:53.753

NSSet 的问题在于使用了 isEqual 和 hash 方法。一些替代方案：

**1\. 重写 NSString 并实现 hash 和 isEqual：**

这种情况下，如果在 isEqual 方法中返回 caseInsensitiveCompare 的结果，您将获得不重复的集合；

**1\. 将所有字符串大写并继续创建集合。**

# c++ - SWIG python 模块创建问题

> ID：13380078
> 
> 赞同：2
> 
> 时间：2012-11-14T13:49:23.743
> 
> 标签：c++, python, windows, swig

我有需要在 python 中导入的 c++ 类。为此，我正在使用 SWIG。下面是swig界面

例子.i

```
/* File: example.i */
%module example

%{
#include "Item.h"
#include "GradedDouble.h"
#include "GradedComplex.h"
%}

%include <std_string.i>
%include <std_complex.i>
%include "Item.h"
%include "GradedDouble.h"
%include "GradedComplex.h"  

%template(Int) Item<int>;
%template(Complex) Item<std::complex<double> >; 
```

为了创建包装类和 python 模块，我在 windows XP 环境中执行以下命令

```
c:\>swig -c++ -python -nodefaultctor example.i 
c:\>python setup.py build_ext --inplace 
```

执行第二个命令后，我收到以下错误：

```
*C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\link.exe /DLL /nologo /INCREMENTAL:NO /LIBPATH:C:\Python26\libs /LIBPATH:C:\Python26\PCbuild /EXPORT:init_example build\temp.win32-2.6\Release\example_wrap.obj "/OUT:C:\Documents and Settings\swig_example.pyd" /IMPLIB:build\temp.win32-2.6\Release\_example.lib /MANIFESTFILE:build\temp.win32-2.6\Release\_example.pyd.manifest
   Creating library build\temp.win32-2.6\Release\_example.lib and object build\temp.win32-2.6\Release\_example.exp
example_wrap.obj : error LNK2019: unresolved external symbol "public: __thiscall GradedDouble::~GradedDouble(void)" (??1GradedDouble@@QAE@XZ) referenced in function __wrap_delete_GradedDouble
example_wrap.obj : error LNK2019: unresolved external symbol "public: __thiscall GradedComplex::~GradedComplex(void)" (??1GradedComplex@@QAE@XZ) referenced in function __wrap_delete_GradedComplex
example_wrap.obj : error LNK2019: unresolved external symbol "public: __thiscall GradedDouble::GradedDouble(int,double *)" (??0GradedDouble@@QAE@HPAN@Z) referenced in function __wrap_new_GradedDouble
example_wrap.obj : error LNK2019: unresolved external symbol "public: void __thiscall GradedDouble::avg(double *)" (?avg@GradedDouble@@QAEXPAN@Z) referenced in function __wrap_GradedDouble_avg
example_wrap.obj : error LNK2019: unresolved external symbol "public: __thiscall GradedComplex::GradedComplex(int,double *)" (??0GradedComplex@@QAE@HPAN@Z) referenced in function __wrap_new_GradedComplex
example_wrap.obj : error LNK2019: unresolved external symbol "public: void __thiscall GradedComplex::avg(double *)" (?avg@GradedComplex@@QAEXPAN@Z) referenced in function __wrap_GradedComplex_avg
example_wrap.obj : error LNK2019: unresolved external symbol "public: void __thiscall GradedComplex::push(class Item<class std::complex<double> >)" (?push@GradedComplex@@QAEXV?$Item@V?$complex@N@std@@@@@Z) referenced in function __wrap_GradedComplex_push
example_wrap.obj : error LNK2019: unresolved external symbol "public: void __thiscall GradedDouble::push(class Item<double>)" (?push@GradedDouble@@QAEXV?$Item@N@@@Z) referenced in function __wrap_GradedDouble_push
C:\Documents and Settings\swig_example.pyd : fatal error LNK1120: 8 unresolved externals
error: command '"C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\link.exe"'failed with exit status 1120* 
```

创建 swig 的接口文件（example.i）似乎有问题我需要帮助来创建接口文件。以下是头文件

**分级复杂.h**

```
#ifndef __GRADEDCOMPLEX_H__
#define __GRADEDCOMPLEX_H__
#include <complex>
#include <set>
#include <vector>
#include "Item.h"
class GradedComplex
{
public:
  typedef std::complex<double> dcomplex;
  typedef Item<dcomplex> item_type;
  typedef ItemComparator<dcomplex> comparator;
  typedef std::set<item_type, comparator> grade_type;
private:
  int n_;
  std::vector<grade_type *> grade_;
  std::vector<double> thre_;
public:
  GradedComplex(int n, double *thre);
  ~GradedComplex();
  void push(item_type item);
  void avg(double *buf);
};
#endif 
```

**分级双.h**

```
#ifndef __GRADEDDOUBLE_H__
#define __GRADEDDOUBLE_H__
#include <set>
#include <vector>
#include "Item.h"
class GradedDouble
{
public:
  typedef Item<double> item_type;
  typedef ItemComparator<double> comparator;
  typedef std::set<item_type, comparator> grade_type;
private:
  int n_;
  std::vector<grade_type *> grade_;
  std::vector<double> thre_;
public:
  GradedDouble(int n, double *thre);
  ~GradedDouble();
  void push(item_type item);
  void avg(double *buf);
};
#endif 
```

请帮助我创建正确的 SWIG 接口文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:04:44.860

看起来链接操作缺少您`GradedDouble`和`GradedComplex`类的定义。

您必须以目标文件的形式或以库的形式将这些定义提供给链接器。

我对 Windows 上的 SWIG 了解不多（仅在 Linux 上使用），无法进一步帮助解决这个问题。

# javascript - Javascript - 在设置单选按钮样式后动态生成跨度 ID

> ID：13380079
> 
> 赞同：0
> 
> 时间：2012-11-14T13:49:35.090
> 
> 标签：javascript

我有个问题。我正在尝试根据单选按钮选择对“activationframe”和“equipmentframe”div 进行显示/隐藏。我让它工作得很好，但后来客户决定在等式中添加样式单选按钮。这打破了我的显示/隐藏切换。如何将其合并到样式化的单选按钮 JS 中？

这是样式化的单选按钮脚本：

```
var checkboxHeight = "25";
var radioHeight = "25";
var selectWidth = "190";

document.write('<style type="text/css">input.styled { display: none; } select.styled { position: relative; width: ' + selectWidth + 'px; opacity: 0; filter: alpha(opacity=0); z-index: 5; } .disabled { opacity: 0.5; filter: alpha(opacity=50); }</style>');

var Custom = {
init: function() {
    var inputs = document.getElementsByTagName("input"), span = Array(), textnode, option, active;
    for(a = 0; a < inputs.length; a++) {
        if((inputs[a].type == "radio") && inputs[a].className == "styled") {
            span[a] = document.createElement("span");
            span[a].className = inputs[a].type;

            if(inputs[a].checked == true) {
                    position = "0 -" + (radioHeight*2) + "px";
                    span[a].style.backgroundPosition = position;
                }
            inputs[a].parentNode.insertBefore(span[a], inputs[a]);
            inputs[a].onchange = Custom.clear;
            if(!inputs[a].getAttribute("disabled")) {
                span[a].onmousedown = Custom.pushed;
                span[a].onmouseup = Custom.check;
            } else {
                span[a].className = span[a].className += " disabled";
            }
        }
    }
    inputs = document.getElementsByTagName("select");
    for(a = 0; a < inputs.length; a++) {
        if(inputs[a].className == "styled") {
            option = inputs[a].getElementsByTagName("option");
            active = option[0].childNodes[0].nodeValue;
            textnode = document.createTextNode(active);
            for(b = 0; b < option.length; b++) {
                if(option[b].selected == true) {
                    textnode = document.createTextNode(option[b].childNodes[0].nodeValue);
                }
            }
            span[a] = document.createElement("span");
            span[a].className = "select";
            span[a].id = "select" + inputs[a].name;
            span[a].appendChild(textnode);
            inputs[a].parentNode.insertBefore(span[a], inputs[a]);
            if(!inputs[a].getAttribute("disabled")) {
                inputs[a].onchange = Custom.choose;
            } else {
                inputs[a].previousSibling.className = inputs[a].previousSibling.className += " disabled";
            }
        }
    }
    document.onmouseup = Custom.clear;
},
pushed: function() {
    element = this.nextSibling;
    if(element.checked == true && element.type == "radio") {
        this.style.backgroundPosition = "0 -" + radioHeight*3 + "px";
    } else {
        this.style.backgroundPosition = "0 -" + radioHeight + "px";
    }
},
check: function() {
    element = this.nextSibling;
            this.style.backgroundPosition = "0 -" + radioHeight*2 + "px";
            group = this.nextSibling.name;
            inputs = document.getElementsByTagName("input");
            for(a = 0; a < inputs.length; a++) {
                if(inputs[a].name == group && inputs[a] != this.nextSibling) {
                    inputs[a].previousSibling.style.backgroundPosition = "0 0";
        }
        element.checked = true;
    }
},
clear: function() {
    inputs = document.getElementsByTagName("input");
    for(var b = 0; b < inputs.length; b++) {
        if(inputs[b].type == "radio" && inputs[b].checked == true && inputs[b].className == "styled") {
            inputs[b].previousSibling.style.backgroundPosition = "0 -" + radioHeight*2 + "px";
        } else if(inputs[b].type == "radio" && inputs[b].className == "styled") {
            inputs[b].previousSibling.style.backgroundPosition = "0 0";
        }
    }
},
choose: function() {
    option = this.getElementsByTagName("option");
    for(d = 0; d < option.length; d++) {
        if(option[d].selected == true) {
            document.getElementById("select" + this.name).childNodes[0].nodeValue = option[d].childNodes[0].nodeValue;
        }
    }
}
}
window.onload = Custom.init; 
```

这是我显示/隐藏的旧脚本：

```
function showhideInstall(installtype) {
if (installtype == "equipmentswap") {
    document.getElementById("activationframe").style.display = 'none';
    document.getElementById("equipmentframe").style.display = 'block';
} else {
    document.getElementById("activationframe").style.display = 'block';
    document.getElementById("equipmentframe").style.display = 'none';
}
} 
```

最后，我的 HTML：

```
<div id="activationtoggle">
            <form class="radiobuttons">
                <input type="radio" name="installtype" value="activation" class="styled" onclick="showhideInstall(this.value);" checked>&nbsp;&nbsp;New Activation
                <input type="radio" name="installtype" value="equipmentswap" class="styled" onclick="showhideInstall(this.value);" >&nbsp;&nbsp;Equipment Swap
            </form>
        </div>

        <div id="activationframe">
            <div id="activationchecklist">
                    code here
                 </div>

             <div id="equipmentframe">
                <div id="equipmentswap">
                <h2>Equipment Swap</h2>
               more code here
                 </div> 
```

任何帮助将不胜感激。我在 JS（充其量）中处于中等水平，这已被证明是一个巨大的时间槽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:58:58.110

有朋友帮我解决问题，谢谢大家的帮助。

这是他提供给我的 JS：

```
 function showhideInstall(installtype) {
    if (installtype == "equipmentswap") {
        document.getElementById("activationframe").style.display = 'none';
        document.getElementById("equipmentframe").style.display = 'block';
    } else {
        document.getElementById("activationframe").style.display = 'block';
        document.getElementById("equipmentframe").style.display = 'none';
    }
}
function newactivation( indexNum ) {

    var inputs = document.getElementsByTagName("label");
    for(a = 0; a < inputs.length; a++) {

        if( inputs[a].id == "activation" + indexNum ){
            inputs[a].style.color = "#b5b5b5";  
        }
    }

    var activechecked = 0;
  for (var i = 1; i<= 7; i++) {
        if(document.getElementById("activationcheck" + i).checked == true){
            activechecked ++;
        }else if(document.getElementById("activationnocheck" + i).checked == true){
            activechecked ++;
        }
  }

  if (activechecked <= 6) {document.getElementById("next").disabled= true;}
  if (activechecked == 7) {document.getElementById("next").disabled= false; document.getElementById("next").style.cursor= "pointer"; } 
}
function equipmentswap( indexNum ) {
    var inputs = document.getElementsByTagName("label");
    for(a = 0; a < inputs.length; a++) {

        if( inputs[a].id == "equip" + indexNum ){
            inputs[a].style.color = "#b5b5b5";
            a=inputs.length + 1;        
        }
    }

    var activechecked = 0;
  for (var i = 1; i<= 7; i++) {
        if(document.getElementById("swapcheck" + i).checked == true){
            activechecked ++;
        }else if(document.getElementById("swapnocheck" + i).checked == true){
            activechecked ++;
        }
  }

  if (activechecked <= 6) {document.getElementById("equipnext").disabled= true;}
  if (activechecked == 7) {document.getElementById("equipnext").disabled= false; document.getElementById("next").style.cursor= "pointer"; }
} 
```

# ios - 在横向模式下将 UIView 放在 UINavigationcontroller 的顶部

> ID：13380083
> 
> 赞同：1
> 
> 时间：2012-11-14T13:49:42.673
> 
> 标签：ios, uinavigationcontroller, overlay

在横向模式下，在 UINavigationController 顶部显示 UIView 的最佳方式是什么？试

[self.navigationController.view addSubView: myView]

将 myView 放在导航栏下。

[self.window addSubView: myView]

将以纵向显示 myView（即向左或向右旋转 90 度）。我可以轮换，但我希望有更好的解决方案。

有没有办法用 UIView 覆盖整个 NavigationController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:57:14.053

也许你可以隐藏导航控制器的导航栏？像这样 ：`self.navigationController.navigationBarHidden = YES`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:18:39.983

我的解决方案是将视图添加到 UIWindow 并根据当前方向旋转它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:43:28.357

您可以执行以下操作。您只希望视图以横向模式存在。所以，你应该在

didRotateToInterfaceOrientation: 方法，当它旋转到纵向模式时隐藏视图，当它在横向模式旋转时显示它。

希望这可以帮助。

# java - 不存在的 MySql 消息错误

> ID：13380084
> 
> 赞同：5
> 
> 时间：2012-11-14T13:49:49.810
> 
> 标签：java, mysql, eclipse

我必须构建一个决策支持系统，但在 Java 方面没有太多经验。因此，在我使用 Eclipse（使用 Connector/J）连接到 MySql 之后，eclipse 开始搞乱我的其他项目。现在，当我尝试在 Eclipse 中运行其他项目（与 MySql 无关，例如 Guessing Game）时，出现以下错误消息：

```
Launch configuration DocsConnectionPropsHelper references non-existing project MySql connection test. 
```

谁能帮我解决这个问题？

更新。似乎当我按下“RUN”时，elcipse 并没有运行我正在使用的项目，而是其他

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:42:56.303

您的更新表明问题实际上是在运行错误的项目。为避免这种情况，您可能希望关闭您不处理的项目（在包资源管理器中右键单击它们并选择关闭）。

如果您确实需要打开多个项目，那么在单击*运行*图标时（默认重新运行您打开的项目中最后运行的任何内容）确保您在编辑器窗口中打开了可以运行的内容（并且来自您的项目想跑）。

然后单击图标右侧的下拉箭头。这将打开一个小菜单，其中包含更改构建配置或程序运行方式（即作为应用程序或在服务器上）的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T06:07:14.987

要解决该问题： - 单击要处理的项目包上的右键（运行） - 选择运行方式 - 选择运行配置... - 选择 DocsConnectionPropsHelper - 如果在“项目”框中看到不正确的标题，只需将其删除。还要删除 Main Class 框中的任何内容。-单击应用-最好的选择是关闭 Eclipse 并重新打开它以确保所有设置都已配置它对我有用。希望它也对你有用。

# mysql - FROM 崩溃查询中未使用的表

> ID：13380085
> 
> 赞同：2
> 
> 时间：2012-11-14T13:49:50.410
> 
> 标签：mysql, sql

我有以下数据库表：

```
user
    int unsigned id
    varchar      login

group
    int unsigned id
    varchar      label

right
    int unsigned id
    varchar      label

user_group
    int unsigned userId
    int unsigned groupId

user_right
    int unsigned userId
    int unsigned rightId

group_right
    int unsigned groupId
    int unsigned rightId 
```

当使用 user_right 或 group_right 表（分别）关联时，权限被视为授予组或用户。我有以下查询应该从他的登录中检索用户的权限：

```
SELECT DISTINCT `R`.`id`,
                `R`.`label`
FROM `user` `U`,
     `right` `R`,
     `user_right` `UR`,
     `user_group` `UG`,
     `group_right` `GR`
WHERE (`U`.`id` = `UR`.`userId`
       AND `R`.`id` = `UR`.`rightId`
       OR `U`.`id` = `UG`.`userId`
       AND `UG`.`groupId` = `GR`.`groupId`
       AND `R`.`id` = `GR`.`rightId`)
  AND `U`.`login` = 'admin' 
```

当用户与权限和组相关联时，查询会起作用并返回正确的权限。但是当用户没有组时，查询不起作用。如果我删除未使用的表（user_group 和 group_rights），它会再次工作。

我应该在查询中添加什么以避免这种情况？我应该添加类似 "OR some_column IS NULL" 的内容吗？如果您也能解释一下为什么我不会再遇到这个问题，我将不胜感激。

提前致谢。

一些样本数据：

```
user (id, login)
1 'admin'

right (id, label)
1 'r1',
2 'r2',
3 'r3'

user_right (id, label)
1 1 
```

谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:54:26.200

首先，您使用的是隐式连接，并且，按照您编写查询的方式，它们是`INNER JOIN`s。您应该更改查询以使用正确的显式连接，并`LEFT JOIN`在其中使用 s 。像这样的东西：

```
SELECT DISTINCT `R`.`id`,
                `R`.`label`
FROM `user` `U`
LEFT JOIN `user_right` `UR`
    ON `U`.`id` = `UR`.`userId`
LEFT JOIN `right` `R`
    ON `R`.`id` = `UR`.`rightId`
LEFT JOIN `user_group` `UG`
    ON `U`.`id` = `UG`.`userId`
LEFT JOIN `group_right` `GR`
    ON `UG`.`groupId` = `GR`.`groupId` AND `R`.`id` = `GR`.`rightId`
WHERE `U`.`login` = 'admin' 
```

# html - 如何查看包含的 SSI 文件

> ID：13380088
> 
> 赞同：1
> 
> 时间：2012-11-14T13:49:59.957
> 
> 标签：html, ssi

是否有可能查看虚拟包含的 SSI 文件，例如使用 eclipse？

在这个例子中： [http](http://www.ssi-developer.net/ssi/ssi_page_template.shtml) ://www.ssi-developer.net/ssi/ssi_page_template.shtml 如何查看`top-links.shtml`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:14:36.793

我希望您必须有权访问文件所在的目录并直接打开它。通过 Web URL 打开它可能不会成功，因为它通常被 Web 服务器过滤。

# c++ - 在c ++中克隆临时？

> ID：13380093
> 
> 赞同：0
> 
> 时间：2012-11-14T13:50:13.960
> 
> 标签：c++, clone

我有以下情况，简要说明：

```
class K {
  K clone() const{K cl; /* clone this to cl then */ return cl; }
};
K* call_clone()
{
  K k;
  return new K(k.clone());
} 
```

编译器优化后，这会被双重复制吗？

或者：
会是`C*clone()`更有效的实现吗？

像这样：

```
class K {
  K* clone() const { K*p=new K(); /* clone this to *p then */ return p; }
};
K* call_clone()
{
  K k;
  return k.clone();
} 
```

（我问这个是因为即使是 K 的浅拷贝也可能很昂贵，实际上它将是一个类数据结构。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:57:59.823

传统`clone()`在堆上创建一个副本，例如：

```
T* clone() { return new T(*this); } 
```

否则可以简单地调用复制构造函数。

所以，`call_clone()`应该看起来像：

```
K* call_clone() {
    K k;
    return k.clone();
} 
```

> 编译器优化后，这会被双重复制吗？

如果`clone()`定义可用（函数是内联的或从模板生成的），编译器可能会优化创建局部变量和复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:03:06.690

> 编译器优化后，这会被双重复制吗？

这取决于编译器。任何现代编译器都不会执行双重复制，这称为[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)。它不取决于 的定义`clone()`是否可用。

> 使用 C*clone() 的实现会更有效吗？

不，不会的。动态内存管理（操作符 new/delete 等）非常昂贵。它可能比执行双重复制更昂贵，具体取决于您的复制构造函数实际执行的操作。

# android - 如何防止对 Android APK 文件进行逆向工程以保护代码？

> ID：13380097
> 
> 赞同：9
> 
> 时间：2012-11-14T13:50:49.813
> 
> 标签：android, apk

我有一个应用程序源及其[APK](http://en.wikipedia.org/wiki/APK_%28file_format%29)文件。现在我想防止这个 APK 文件被反向工程。如果可以保护我的应用程序免受逆向工程的影响，那么在我的编码中要遵循哪些步骤或为此使用任何库？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T13:53:01.817

> 现在我想防止这个 APK 文件被反向工程。

那是不可能的，对不起。

> 如果可以保护我的应用程序免受逆向工程的影响，那么在我的编码中要遵循哪些步骤或为此使用任何库？

正确配置的 ProGuard 会混淆您的代码。DexGuard 是 ProGuard 的商业扩展版本，可能会有所帮助。但是，您的代码仍然可以转换为，具有逆向工程经验的开发人员将能够从该代码`smali`中了解您所做的事情。`smali`

如果您不希望其他人看到您的代码，请不要将该代码存储在他们的设备上。

# email - drupal smtp 模块没有回复选项

> ID：13380098
> 
> 赞同：0
> 
> 时间：2012-11-14T13:50:51.587
> 
> 标签：email, drupal, smtp, drupal-modules

在 drupal 6 上，我安装了 smtp 模块，但我不知道如何更改回复地址。

在“smtp.module”文件中，我添加了以下行：

```
$form['email_options']['smtp_replyto'] = array(
'#type'          => 'textfield',
'#title'         => t('Reply-to Email address'),
'#default_value' => variable_get('smtp_replyto', ''),
'#description'   => t('The reply-to E-mail address'),); 
```

就在第 181 行之后，decleration 在哪里`$form['email_options']['smtp_fromname']`。

因此，此字段正确显示在“SMTP 身份验证支持”的管理面板中。我不知道如何使系统获取此地址并将其替换为电子邮件的回复字段而不是发件人的邮件。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:27:35.367

您可以使用 hook_mail_alter：[http](http://api.drupal.org/api/drupal/developer!hooks!core.php/function/hook_mail_alter/6) ://api.drupal.org/api/drupal/developer!hooks!core.php/function/hook_mail_alter/6在发送邮件之前更改它。

# php - 从数组中获取位置编号

> ID：13380100
> 
> 赞同：0
> 
> 时间：2012-11-14T13:50:58.013
> 
> 标签：php

如果我在会话中有以下数组，我能否在每个 [cat] 中获取项目位置编号：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 1
            [cat] => 1
            [que] => Description here.
        )

    [1] => stdClass Object
        (
            [id] => 2
            [cat] => 1
            [que] => Description here.
        )

    [2] => stdClass Object
        (
            [id] => 3
            [cat] => 1
            [que] => Description here.
        )
) 
```

例如，下面将给我第二个描述，但我如何得到它在 [cat] == 1 中的位置 #2（共 3 个）：

```
$item = $_SESSION['questions'][2]->que; 
```

实际的数组要大得多，并且有超过 1 个 [cat]。我试图得到的计数是每个这样的群体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:01:29.253

```
 foreach($_SESSION['questions'] as $key=>$val)
    {
      if($val->id == 3)
      echo $key;
    }

//or

    foreach($_SESSION['questions'] as $key=>$val)
    {
      if($val->que == "Description here.")
      echo $key;
    }

//do what ever you want 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:53:36.297

我确定您正在寻找一种更原生的方式，但更糟糕的情况是，您可以添加另一个元素来保存索引值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:55:43.517

通过在数组的开头添加一个虚拟条目：

```
array_unshift($_SESSION['questions'], array());
$item = $_SESSION['questions'][2]->que; 
```

# joomla - 自定义 joomla 模板

> ID：13380103
> 
> 赞同：-1
> 
> 时间：2012-11-14T13:51:15.163
> 
> 标签：joomla, joomla2.5

我刚刚开始学习将 html 转换为 joomla 模板 2.5，相当成功。

我的 html 看起来像：

```
Home Page:Header,Menu,slider,footer
About Page:Header,menu,content area,footer. 
```

问题是如何创建关于页面以及其他页面，对于不同的页面，我有大约不同的主题，页眉，页脚，菜单是相同的，只是中间部分不同。

假设我有一个主要的中心 div

```
<div class="slider-wrapper theme-default">
<div id="slider" class="nivoSlider">
<a href="">  <img width="970" height="400" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/sldier1.jpg" alt="Black Leather Suit" title="" /></a></div></div> 
```

我可以在滑块包装器 div 中添加 1 个以上的组件吗？

```
<jdoc:include type="modules" name="content" style="none" />
<jdoc:include type="modules" name="content" style="none" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:46:10.817

Joomla sites are not like html sites. You don't manually create each page and save the html file. For this you create a new article in the Joomla backend using the article manager or a 3rd party extensions such as K2, or assign an installed component layout to a menu item.

You can also only have 1 component per page however, if you slider comes with a module, then you can load the module in an article by giving is a custom position and then adding the following code to you article:

```
{loadposition xxx} 
```

# iphone - 我无法使用 NSXMLParser 获取值

> ID：13380105
> 
> 赞同：0
> 
> 时间：2012-11-14T13:51:23.427
> 
> 标签：iphone, objective-c, ios, ios4, nsxmlparser

我尝试了很多方法来获取 NSXMLParser 的值，但我没有成功。attributeDict objectForKey 对我不起作用。

这是我的代码：

```
 - (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
 { 
  if (![elementName isEqual:@"item"])
    return;

CerereIndemnizatieDoc *cerereIndemnizatie  = [[CerereIndemnizatieDoc alloc] init];
NSString * index = [attributeDict objectForKey:@"id"];
NSString * name = [attributeDict objectForKey:@"nume"];
cerereIndemnizatie.id = index;
cerereIndemnizatie.nume = name;

if (!cereriIndemnizatie)
    cereriIndemnizatie = [[NSMutableArray alloc] init];

[cereriIndemnizatie addObject:cerereIndemnizatie]; 
```

}

# java - FetchType.LAZY 没有从 db 获取对象

> ID：13380106
> 
> 赞同：1
> 
> 时间：2012-11-14T13:51:26.257
> 
> 标签：java, hibernate, jpa

使用 JPA (EntityManager) 和休眠。

我有一个有 3 个集合的类，一个有 FetchType.EAGER，另外两个有 LAZY。如果我将其中 3 个放在 EAGER 中，我会得到一个例外，因为它只能有一个。这样，当我尝试使用 LAZY 列表之一时，我得到一个异常：

```
no session or session was closed: javax.faces.el.EvaluationException: org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: 
```

那么，当我要求它们时，我怎样才能得到 2 个集合？

我的课：

```
public class Event implements....
....
....    
@ElementCollection(fetch = FetchType.LAZY)
@CollectionTable(name="friendsList")
private List<Long> friends;
@ElementCollection(fetch = FetchType.LAZY)
@CollectionTable(name="carsList")
private List<Long> cars;
@ElementCollection(fetch = FetchType.EAGER)
@CollectionTable(name="housesList")
private List<Long> houses; 
```

我试过了，但还是不行

```
@Override
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public IEvent synchronizeCarsList(IEvent companyToSynchronize){
    if(companyToSynchronize == null)
        throw new IllegalArgumentException();
    if(entityManager != null) {
        List<Long> cars = companyToSynchronize.getSelectedCarsIdList();

    }
    return companyToSynchronize;
} 
```

编辑：当我在一个实体中有多个 EAGER（或我从日志中了解的内容）时部署异常

```
Caused by: org.hibernate.loader.MultipleBagFetchException: cannot simultaneously fetch multiple bags
at org.hibernate.loader.BasicLoader.postInstantiate(BasicLoader.java:94) [:3.6.6.Final]
at org.hibernate.loader.entity.EntityLoader.<init>(EntityLoader.java:119) [:3.6.6.Final]
at org.hibernate.loader.entity.EntityLoader.<init>(EntityLoader.java:71) [:3.6.6.Final]
at org.hibernate.loader.entity.EntityLoader.<init>(EntityLoader.java:54) [:3.6.6.Final]
at org.hibernate.loader.entity.BatchingEntityLoader.createBatchingEntityLoader(BatchingEntityLoader.java:133) [:3.6.6.Final]
at org.hibernate.persister.entity.AbstractEntityPersister.createEntityLoader(AbstractEntityPersister.java:1914) [:3.6.6.Final]
at org.hibernate.persister.entity.AbstractEntityPersister.createEntityLoader(AbstractEntityPersister.java:1937) [:3.6.6.Final]
at org.hibernate.persister.entity.AbstractEntityPersister.createLoaders(AbstractEntityPersister.java:3205) [:3.6.6.Final]
at org.hibernate.persister.entity.AbstractEntityPersister.postInstantiate(AbstractEntityPersister.java:3191) [:3.6.6.Final]
at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:348) [:3.6.6.Final]
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872) [:3.6.6.Final]
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:906) [:3.6.6.Final]
... 105 more 
```

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:58:01.663

简单地分配延迟加载的值`Collection`不足以触发加载。您将得到的只是对代理的引用。这就是为什么在事务之外的访问会失败。

`.size()`在事务中调用`Collection`，将触发加载，任何其他需要访问实际内容的方法也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:08:15.600

我所做的是：

```
@ElementCollection(fetch = FetchType.LAZY)
@CollectionTable(name="friendsList")
@OrderColumn(insertable=true,updatable=true,name="friendsOrder")
private List<Long> friends;
@ElementCollection(fetch = FetchType.LAZY)
@CollectionTable(name="carsList")
@OrderColumn(insertable=true,updatable=true,name="carsOrder")
private List<Long> cars;
@ElementCollection(fetch = FetchType.EAGER)
@CollectionTable(name="housesList")
private List<Long> houses; 
```

通过这种方式，我一次获得了所有的收藏品。我必须阅读有关@OrderColumn 的更多信息，但在这种情况下它对我有用。感谢@Perception。

# date - PHP4: Wrong date

> ID：13380110
> 
> 赞同：0
> 
> 时间：2012-11-14T13:51:59.447
> 
> 标签：date, php4

Apart from the discussion about old software, there's a problem with a PHP 4.3.10 instance in Apache 1.3.33.

This is the server date:

```
$ date
Qua Nov 14 11:41:25 BRST 2012 
```

The PHP date seems to be correct:

```
echo '<?php echo date("Y-m-d H:i") . "\n"; ?>' | php
2012-11-14 11:41 
```

However, the very same `<?php echo date("Y-m-d H:i"); ?>` in a file accessed via HTTP will show:

```
2012-11-14 10:41 
```

How can I set PHP4 to get the same server time?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:16:30.153

Just came to the solution:

In this version of Apache and PHP, if you change the server time, then you must restart Apache for the changes to take effect.

# android - ListView 中的项目更新闪烁

> ID：13380113
> 
> 赞同：0
> 
> 时间：2012-11-14T13:52:06.623
> 
> 标签：android, listview

I'm currently fight with the problem, that the screen flickers when I add items to my ListView. (This is **not** about the colorCacheHint!)

I think the problem might be custom views I'm using but what should I implement to prevent already drawn items to be redrawn?

# java - 显示 Web 内容标题而不是“Web 内容显示”

> ID：13380117
> 
> 赞同：1
> 
> 时间：2012-11-14T13:52:16.330
> 
> 标签：java, content-management-system, liferay, portlet

当我将 Web 内容显示添加到我的页面时，Portlet 的标题为“Web 内容显示”。

那么如何告诉 Liferay 它应该使用显示的 Web 内容的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:42:08.153

我能想到的一个想法是通过 portlet 隐藏标题“Web-content Display” `Look and Feel`，然后使用`Structures & Templates`.

并且在`Template`您可以指定`title`要显示在 web 内容顶部的内容中，您可以使用一些 css-magic 将其定位在`portlet-title`曾经出现的位置。我觉得应该不难。

```
<!-- position this div with the help of CSS to give the feel of the title -->
<div class="temp-title">$contentTitle</div> 
<div class="content">$myContent</div> 
```

# windows-phone-7 - 使用 Pivot 将页面的视图模型分离为单独的视图模型

> ID：13380118
> 
> 赞同：0
> 
> 时间：2012-11-14T13:52:18.830
> 
> 标签：windows-phone-7, mvvm, pivot, mvvm-light

我正在使用 MVVMLight，我创建了标准视图和视图模型。在视图中，我放置了 Pivot：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <controls:Pivot Title="MY APPLICATION">
        <local:FirstPivotItem />
        <local:SecondPivotItem />
    </controls:Pivot>
</Grid> 
```

我的 Pivot 项目如下所示：

```
<controls:PivotItem x:Class="Pivot.WindowsPhoneControl1"
    xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls"
    // standard references and settings
    d:DesignHeight="480" d:DesignWidth="480" Header="First One">

    <Grid x:Name="LayoutRoot">

    </Grid>
</controls:PivotItem> 
```

在代码隐藏中

```
public partial class WindowsPhoneControl1 : PivotItem
{
    public WindowsPhoneControl1() {
        InitializeComponent();
    }
} 
```

我想为这个数据透视项目创建视图模型，然后像使用标准视图一样使用它。我会用

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="SelectionChanged">
        <mvvm:EventToCommand Command="{Binding PivotChangedCommand}" PassEventArgsToCommand="True" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

处理选择更改事件，而不是通过 Messanger 通知适当的视图模型。我不知道如何在 Pivot Item 类中使用 viewmodel 的可能性，它是从 PivotItem 继承的，但不是从 ViewModelBase 继承的，因为我需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:27:19.913

对单个项目使用标准 PivotItem 控件，并将用户控件放入每个项目中。然后，每个用户控件都可以将其视图模型作为数据上下文。

```
 <Grid x:Name="LayoutRoot"
      Background="Transparent">
    <controls:Pivot Title="MY APPLICATION">
        <controls:PivotItem Header="first">
            <local:PivotUserControl1 />
        </controls:PivotItem>

        <controls:PivotItem Header="second">
            <local:PivotUserControl2 />
        </controls:PivotItem>
    </controls:Pivot>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:59:42.823

取决于您是否提前知道枢轴项目将是什么，或者它们是否是基于数据动态创建的。从你到目前为止所写的内容来看，我假设它是第一个。

我之前这样做的方法是将许多 PivotItem 视图模型作为父视图模型上的公共属性，每个枢轴一个。然后只需将每个 PivotItem 的 dataContext 设置为父视图模型上的正确视图模型属性。

这样您就可以在没有选择更改事件的情况下逃脱。您还可以直接订阅视图模型上的任何事件，因此不必为通信而烦恼，因为所有通信都可以通过父视图模型进行。

第二种方法，如果您事先不确定您将拥有哪些枢轴项目，则在父视图模型上拥有一个 PivotItemViewModel 集合——每个枢轴项目一个，每个都从一个公共基类或接口继承。将该集合绑定到视图模型的 ItemSource。

这有点棘手，因为您必须确定要显示的控件，但是如果您将模板存储为资源，则可以通过转换器执行此操作：

```
public class PivotItemToTemplateConverter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        switch ((int) value)
        {
            case 1:
                return Application.Current.Resources["Control1Template"];
            case 2:
                return Application.Current.Resources["Control2Template"];
            default:
                return Application.Current.Resources["Control3Template"];
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null;
    }

    #endregion
} 
```

然后，您可以为您的数据透视项目创建数据透视项目模板，并使用转换器根据值在其中获得正确的控制。在这种情况下，假设共享基础视图模型有一个属性 ViewModelId，它可以有效地识别您将感兴趣的控件：

```
<ContentControl 
                Content="{Binding}"
                ContentTemplate="{Binding ViewModelId,
                                          Converter={StaticResource PivotItemToTemplateConverter }}" /> 
```

# java - Play 2.0 Framework - 查找所有未过期的

> ID：13380122
> 
> 赞同：5
> 
> 时间：2012-11-14T13:52:28.580
> 
> 标签：java, playframework, playframework-2.0, ebean

我试图弄清楚如何才能找到列表中的成员——但只有那些没有超过过期日期的成员——这是模型的属性之一。

现在我有：

```
public static Result getAllNotifications() {
 List<Notification> notifications = Notification.getAllNotifications();

 for (Notification i: notifications) {
     List<Attachments> attachments = Attachments.findAllById(i.id);
     i.attached = attachments;
 }

    return ok(toJson(notifications));
} 
```

在那里的某个地方，我需要检查单个通知的到期日期，如果今天已经过了那个日期，就不要退回它。

现在，通知模型如下所示：

```
public class Notification extends Model {

/**
 * 
 */
private static final long serialVersionUID = 1L;

@Id
@NonEmpty
public Long id;

@Constraints.Required
public String title;

@Formats.DateTime(pattern = "dd/MM/yyyy")
public Date created = new Date();

@Constraints.Required
@Column(columnDefinition="TEXT")
public String text;

@Formats.DateTime(pattern = "dd/MM/yyyy")
public Date updated = new Date();

public Boolean status;

public Date expires;

public String author;

public List<Attachments> attached;

public Notification() {
}

public Notification(Long id, String title, String text) {
    this.created = new Date();
    this.title = title;
    this.text = text;
    this.id = id;
}

public static Model.Finder<String, Notification> find = new Model.Finder<String,     Notification>(String.class, Notification.class); 
```

这是我第一次在 Stackoverflow 上发帖，所以放轻松！并提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T19:44:14.957

嗯，您正在寻找`expires`日期大于当前日期`OR`的所有行`null`（未设置），对吗？

在这种情况下，您可以只使用简单的数据库比较（迭代整个结果集绝对是错误的**想法！**）

*   `gt`代表`Greater Than`
*   `lt`为了`Lower Than`

在您的模型中添加查找器：

```
// If expires date is grater than current one, the Notification IS expired
public static List<Notification> findAllExpired() {
    return find.where().gt("expires", new Date()).findList();
}

// If expires date is lower than current one OR isn't set at all,
// the Notification is valid.
public static List<Notification> findAllNotExpired() {
    return find.where().or(
              Expr.lt("expires", new Date()),
              Expr.isNull("expires")
           ).findList();
} 
```

因此，您将在控制器中收到列表未过期（或未过期）通知：

```
List<Notification> notExpiredList = Notification.findAllNotExpired();

// check in terminal
for (Notification notification : notExpiredList) {
    Logger.info("This Notification IS NOT expired: " + notification.title);
}

List<Notification> expiredList = Notification.findAllExpired();

// check in terminal
for (Notification notification : expiredList) {
    Logger.warn("This Notification IS expired: " + notification.title);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:13:58.363

您可以使用迭代器并删除所有过期的通知。

像这样的东西：

```
 public static Result getAllNotifications() {
      List<Notification> notifications = Notification.getAllNotifications();

      Iterator<Notification> iterator = notifications.iterator();

      while (iterator.hasNext()) {
        Notification next = iterator.next();
        if (new Date().after(next.expires)) {
            iterator.remove();
        }
      }

      for (Notification i: notifications) {
        List<Attachments> attachments = Attachments.findAllById(i.id);
        i.attached = attachments;
      }

      return ok(toJson(notifications));
  } 
```

如果列表是不可变的，您可以返回它的过滤副本。

# java - 如何验证JSF中自己字段的字段？

> ID：13380123
> 
> 赞同：0
> 
> 时间：2012-11-14T13:52:32.587
> 
> 标签：java, validation, jsf, java-ee-6, bean-validation

听起来很奇怪。但我需要在个人实体中验证公司的字段地址。Company 是 Person 字段，Addres 是 Company 字段。

我想在个人实体中验证公司的地址。

为什么？？因为如果我以前在 Person 实体中使用它，公司应该有一个地址？

如何实施此验证？

```
@Entity
@Table(schema = Constants.DB_SCHEMA)
public class Person{
   Company company;

  // Validation of the address should come here ???
    public Company getCompany() {
        return company;
    }
}

@Entity
@Table(schema = Constants.DB_SCHEMA)
public class Company{
   String address;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:21:36.253

基本上，您可以使用 Company 类的地址属性上的注释 @NotNull 来做到这一点。

但是：您当前的代码无论如何都不会工作，因为您没有指定类之间的关系并且您没有主键....

这是一个如何工作的示例：

```
@Entity
public class Person {

    @Id
    @GeneratedValue
    private Long id;

    @OneToOne(cascade= CascadeType.ALL)
    private Company company;

    public Company getCompany() {
        return company;
    }

    public void setCompany(Company company) {
        this.company = company;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }    
} 
```

和

```
@Entity
public class Company {

    @Id
    @GeneratedValue
    private Long id;

    @NotNull
    private String adress;

    public String getAdress() {
        return adress;
    }

    public void setAdress(String adress) {
        this.adress = adress;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }
} 
```

# android - 如何在使用浏览器时在 Android 手机中捕获整个网页？

> ID：13380127
> 
> 赞同：0
> 
> 时间：2012-11-14T13:52:59.107
> 
> 标签：android, mobile, browser, screen-capture, image-capture

当我使用 Android 浏览器访问网页时，我可以捕获网页的可见部分制作整个屏幕的屏幕截图，但我需要捕获整个网页，包括屏幕外的网页部分，我意思是，不仅仅是页面的可见部分。

我想要的是类似于 Awesome Screenshot 插件的“捕获整个页面”选项。请排除执行此操作的所有编程方法，我想要一个易于使用的新手 Android 工具。这个想法是允许普通用户轻松报告布局错误。那么，我可以使用什么工具来实现呢？

一个有效的答复是这样的工具不存在，但请提供一些参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:51:15.627

您可以使用 Dolphin 浏览器和 Screen Cut 插件在 Android 手机上捕获完整网页。您不需要 root 访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:00:51.937

您不能使用任何标准的 android 方法来获取整个屏幕的屏幕截图（包括不可见部分）。[但是如果你有 root 访问权限，你可以使用这个](http://www.pocketmagic.net/?p=1473)方法读取帧缓冲区来获取全部内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-12T18:38:43.197

[https://play.google.com/store/apps/details?id=com.leavjenn.longshot](https://play.google.com/store/apps/details?id=com.leavjenn.longshot)

这正是你想要的。我已经测试过了。

# php - PHP正则表达式，获取数据部分

> ID：13380130
> 
> 赞同：-2
> 
> 时间：2012-11-14T13:53:01.580
> 
> 标签：php, html, regex

我有 HTML 数据，但我想获取这些数据。顶部和底部应删除。（H1 之后和 H2 之上的所有内容都应该放在一个变量中）

```
<p>This text can be deleted</p>
<h1>This title also</h1>

<h2>FROM THIS TITLE I WANT THE TEXT</h2><p>SAME HERE</p>
<h2>...</h2><p>...</p>

<h2>What we offer</h2>
<p>This text isn't needed</p> 
```

我希望所有 HTML 和文本都在 AFTER`</h1>`和 ENDING开始`<h2>What we offer</h2>` 知道如何在 PHP 中执行此操作吗？

这在没有正则表达式的情况下可以解决问题（感谢 Alexandru），但我很好奇我可以使用什么正则表达式来实现这一点......

```
$beginIndex = strpos($htmlString, "</h1>");
$endIndex = strpos($htmlString, "<h2>What we offer</h2>");
$desiredString = substr($htmlString, $beginIndex, $endIndex - $beginIndex); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:11:32.087

鉴于您需要的定义，这应该有效：

```
$beginIndex = strpos($htmlString, "</h1>");
$endIndex = strpos($htmlString, "<h2>What we offer</h2>");
$desiredString = substr($htmlString, $beginIndex, $endIndex - $beginIndex); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:44:20.747

您请求的正则表达式解决方案如下所示：

```
$pattern = '/<\/h1>(.*)<h2>What we offer/s';
$matches = array();
preg_match($pattern, $htmlString, $matches);
$desiredString = $matches[1]; 
```

# c# - 用于一次显示所有数据的 DataGridView 的替代方案

> ID：13380131
> 
> 赞同：0
> 
> 时间：2012-11-14T13:53:06.357
> 
> 标签：c#, winforms, datagridview

我正在使用的应用程序的一部分返回多个数据集，我们在一个滚动面板上向用户展示了尽可能多的 DataGridView。问题是 - 即使在已知行数的情况下设置 datagridview 的高度也不是一件容易的事（你不能轻易告诉 DGV 调整到网格的大小）并且我们的自定义样式与 DGV 的内部大小一起工作并没有结果出色地。
目前，我们被许多 DGV 困住——那些应该保留大量数据的 DGV 稍高一些，而那些可能没有数据/只有少量数据的 DGV 则较低。此外，每个 DGV 上面都有一个标签，用于拆分 DGV 并标记当前数据。下一个复杂因素 - 我将所有 DGV 数据作为单独的 DataTables 获取。
我可以用什么来显示所有数据，就像在一个有多个子表的大表中一样？甚至不关心其中一些有不同数量的行或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:23:49.607

我已经为具有少量行的 DataTables 使用静态（非滚动）自定义网格，并为这些网格使用 DataGridViews，我们希望滚动（足够的行）。类似的东西：在 aspx 页面上使用 DataGridView 用于滚动页面和`<table>`静态页面。

# django - 模板过滤器常见的Q of if equal True

> ID：13380136
> 
> 赞同：0
> 
> 时间：2012-11-14T13:53:35.827
> 
> 标签：django

我分配 'result':True 并将其传递给模板。

对于模板文件，我写

```
{{ result }}
{% if result == True %}
    this also True
{% endif %}
{% if result == 1 %}
    this is 1
{% endif %}
{% if result == true %}
    this is true
{% endif %} 
```

结果是，

' 真的这是 1 '

我认为 'Trthis 也是真的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:15:59.177

正如@PepperoniPizza 在上面的评论中提到的那样，在 Python 中[，](http://www.python.org/dev/peps/pep-0008/#programming-recommendations)[不建议将值`True`与`False``==`](http://www.python.org/dev/peps/pep-0008/#programming-recommendations). 大多数时候，你只需要`{% if result %}`在你的模板中使用——不管结果是`True`,`1`还是其他值而不是评估为`True`。

如果你真的需要这样做`{% if result == True %}`，这将在 Django 1.5 中工作。从[发行说明](https://docs.djangoproject.com/en/dev/releases/1.5-alpha-1/#minor-features)：

> 模板引擎现在将 True、False 和 None 解释为相应的 Python 对象。

# twitter-bootstrap - 在“主页”和其他导航栏菜单项之间移动时，twitter bootstrap 'hero' 示例“跳转”

> ID：13380139
> 
> 赞同：0
> 
> 时间：2012-11-14T13:53:48.590
> 
> 标签：twitter-bootstrap

我最近下载了 TB 2.0 框架。我使用“英雄”示例作为起点。我为导航栏菜单上的每个菜单项添加了指向“空白页面”的链接。

空白页面是指与英雄页面的标记基本相同，但删除了“英雄”部分：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bootstrap, from Twitter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="../assets/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="../assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#">Action</a></li>
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Nav header</li>
                  <li><a href="#">Separated link</a></li>
                  <li><a href="#">One more separated link</a></li>
                </ul>
              </li>
            </ul>
            <form class="navbar-form pull-right">
              <input class="span2" type="text" placeholder="Email">
              <input class="span2" type="password" placeholder="Password">
              <button type="submit" class="btn">Sign in</button>
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <hr>

      <footer>
        <p>&copy; Company 2012</p>
      </footer>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/bootstrap-transition.js"></script>
    <script src="../assets/js/bootstrap-alert.js"></script>
    <script src="../assets/js/bootstrap-modal.js"></script>
    <script src="../assets/js/bootstrap-dropdown.js"></script>
    <script src="../assets/js/bootstrap-scrollspy.js"></script>
    <script src="../assets/js/bootstrap-tab.js"></script>
    <script src="../assets/js/bootstrap-tooltip.js"></script>
    <script src="../assets/js/bootstrap-popover.js"></script>
    <script src="../assets/js/bootstrap-button.js"></script>
    <script src="../assets/js/bootstrap-collapse.js"></script>
    <script src="../assets/js/bootstrap-carousel.js"></script>
    <script src="../assets/js/bootstrap-typeahead.js"></script>

  </body>
</html> 
```

谁能解释为什么当我在“主页”链接（显示正常的英雄页面）到空页面链接（即任何其他菜单项链接）之间移动时，页面会跳转，即导航栏菜单从移动时向右移动主页 -> 另一个菜单，从另一个菜单 -> 主页移动时返回左侧。

为什么会这样？

**[[编辑]]**

*   我的“主页”在这里： http: [//pastebin.com/byM6rcre](http://pastebin.com/byM6rcre)
*   此处为“其他”页面示例：http: [//pastebin.com/uFEzWyNb](http://pastebin.com/uFEzWyNb)

# php - tcpdf 没有用

> ID：13380140
> 
> 赞同：2
> 
> 时间：2012-11-14T13:53:50.753
> 
> 标签：php, .htaccess, codeigniter, tcpdf

我对 codeigniter 中的 TCPDF 库有疑问。我收到一个错误：

```
TCPDF ERROR: [Image] Unable to get image: /home/mrakodol/public_html/ecarrent/ecarrent/tcpdf/cache/img_QwbOB4 
```

我对该文件夹有 777 权限，并且有一个这样的 .htaccess 文件：

```
RewriteEngine On
RewriteBase /
# Hide the application and system directories by redirecting the request to index.php
RewriteRule ^(application|system|\.svn) index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [QSA,L] 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:08:09.420

TCPDF 似乎对文件名非常挑剔。这是说缓存的文件不存在。这可能意味着无法生成缓存文件，因此请检查您的任何源图像的文件名中是否包含标点符号、空格或其他棘手的字符。还要确保它们是 RGB 格式而不是 CMYK，并确保您有足够的内存来处理它们。

# java - 循环绘制不同的图像？

> ID：13380142
> 
> 赞同：0
> 
> 时间：2012-11-14T13:54:07.650
> 
> 标签：java

我想要一个循环来遍历我拥有的每个图像。我想将它们绘制到屏幕上，如果我分别绘制每个图像，它工作正常，但它使用大量代码。虽然使用循环绘制每个图像应该使用更少的代码。这是我的代码。

```
String image[] = {"carA", "carB"};
        for(int i = 0; i < image.length; i++){
        g.drawImage(image[i].getImage(), image[i].getX(), image[i].getY(),
                image[i].getWidth(), image[i].getHeight(), this);
        } 
```

它说问题是正在使用字符串。getX() 和 getY() 等找出 x 和 y 坐标。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:00:45.610

您正在尝试在 String 对象上调用 getImage /getX / getY。您应该首先将您的图像加载到图像对象中

```
Image img1 = Toolkit.getDefaultToolkit().getImage(image[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:35:59.447

String 是一种存储字符的类型。所以它不能用于您的要求。

为了满足要求，您应该创建自己的类型。

开始创建您的班级将使用的界面的好地方。

```
public interface IMichaelImage {

   int getX();
   int getY();
   Image getImage();

} 
```

然后您需要创建一个类，该类将能够存储您的程序逻辑将使用的信息

```
public MichaelImage implements IMichaelImage { 

  private int x = 0;
  private int y = 0; 
  private Image image;

  public MichaelImage(Image image) {
    this.image = image;
  }

  public void setX(int x) {
    this.x = x;
  }

  public void setY(int y) {
    this.y = y;
  }

  @Override
  public int getX() {
     return this.x;
  ]

  @Override 
  public int getY() {
    return this.x;
  }

  public Image getImage() {
    return this.image;

  }

} 
```

上，你会有这样的东西

```
 Collection<IMichaelImage> images = loadImages();

  for(IMichaelImage image : images) {
    g.drawImage(image.getImage(), image.getX(), image.getY());
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T13:56:03.907

使用[`drawString()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html#drawString%28java.lang.String,%20int,%20int%29)方法，它可以绘制字符串：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T14:43:59.040

您应该初始化有关图像的所有数据，试试这个例子：

```
String imageDatas[][] = {
        {"image_path_1.jpg", "0", "0", "100", "100"},
        {"image_path_2.jpg", "100", "0", "100", "100"}
};
for (String[] imageData : imageDatas) {
    String filePath = imageData[0];
    int x = Integer.parseInt(imageData[1]);
    int y = Integer.parseInt(imageData[2]);
    int width = Integer.parseInt(imageData[3]);
    int height = Integer.parseInt(imageData[4]);

    Image img = Toolkit.getDefaultToolkit().getImage(filePath);
    g.drawImage(img, x, y, width, height, this);
} 
```

# .net - 具有 100 个 PutObject 调用 (.NET) 的 Amazon S3 高 CPU 使用率

> ID：13380146
> 
> 赞同：6
> 
> 时间：2012-11-14T13:54:19.897
> 
> 标签：.net, amazon-web-services, amazon-s3, aws-sdk, aws-sdk-net

我们使用 Amazon S3 存储多达 500K 的数据。我们在 EC2 实例上安装了一个 .NET 4.0 Web 服务，它使用 500K 数据进行 PutObject 调用。

问题是，当我们同时调用该服务（使用唯一的 S3 密钥）超过 100 个时，分别对 S3，EC2 实例 CPU 达到 100%。我们对 Web 服务进行了一些分析，它表明 AmazonS3Client.PutObject 方法占用了 99% 的处理时间。

我们已经尝试将 S3 客户端配置为使用 HTTP（而不是默认的 HTTPS），并且还尝试了一些 S3 密钥生成方案，但没有任何帮助。这篇文章 [Amazon S3 PutObject is very slow](https://stackoverflow.com/questions/6808411/amazon-s3-putobject-is-very-slow)也没有帮助。

我们的 S3 密钥架构是：“111_[incrementing ID].txt”

如果我们使用较短的数据（例如小于 1K），则不会发生这种广泛的 CPU 使用率。

您能否给我们一些指导以提高 CPU 性能或在哪里寻找？

这是该调用的源代码：

```
string fileName = "111_" + Id + ".txt";
using (AmazonS3 client = Amazon.AWSClientFactory.CreateAmazonS3Client(RegionEndpoint.XXXX))
        {
            try
            {
PutObjectRequest request = new PutObjectRequest();
request.WithContentBody(dataRequest.Base64Data)
                 .WithBucketName(bucketName)
                 .WithKey(fileName);

S3Response response = client.PutObject(request);
response.Dispose();
            }
            catch (AmazonS3Exception amazonS3Exception)
            {
              //Handle exceptiom...
            }
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T16:52:09.603

我会尝试使用 TransferUtility 更高级别的类，而不是低级别的 PutObject 调用。[http://docs.aws.amazon.com/sdkfornet1/latest/apidocs/html/T_Amazon_S3_Transfer_TransferUtility.htm](http://docs.aws.amazon.com/sdkfornet1/latest/apidocs/html/T_Amazon_S3_Transfer_TransferUtility.htm)

# excel - 在excel中查找单词

> ID：13380147
> 
> 赞同：1
> 
> 时间：2012-11-14T13:54:22.083
> 
> 标签：excel, excel-formula

你知道当你点击 control-F 来查找单词，然后当你点击 find all 时，它会给你一个包含该单词的所有单元格的列表

我们怎么能把它放在一个公式中，这样它就会在一张表中列出这些结果，所以说我有这张表 1

```
 A     |     B  
1 apple 
```

在表 2

```
 A     |     B  
1 apple cider
2 peas
3 cucumber
4 apple
5 apple rum
6 carrots
7 beans
8 carrots and apples 
```

我希望结果出来

```
 A       |      B       |     C       |    D 
1 apple        apple cider   apple rum    carrots and apples 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:01:46.603

尝试在公式栏中输入：

```
FIND(expression, text_value) 
```

并通过此链接：

```
http://www.smartsheet.com/help-categories/formulas 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:30:10.287

在模块中编写此函数：

```
Public Function WordFinder(searchRange As Range, seekWord As String, iteration As Integer)
    Dim rangeCell As Range      'holder cell used in For-Each loop
    Dim rangeText As String     'holder for rangeCell's text
    Dim counter As Integer

    counter = 0
    'loop through cells in the range
    For Each rangeCell In searchRange.Cells
        rangeText = rangeCell.Value 'capture the current cell value
        'check if the seek word appears in the current cell
        If InStr(rangeText, seekWord) > 0 Then
            counter = counter + 1 'increment the occurrence counter
            If counter = iteration Then 'this is the occurrence we're looking for
                'return it
                WordFinder = rangeText
                Exit Function
            End If
        End If
    Next rangeCell
    WordFinder = "n/a" 'that occurrence number was not found

End Function 
```

在结果表的第一行，在每个单元格中输入以下公式：

```
=wordfinder(Sheet2!$A1:$A8,"apple",column()) 
```

`column()`每列递增，因此当您将其复制/粘贴到顶行时，它正在计数。美元符号确保参考绝对保留在 A 列上。

第二个参数（“apple”）可以来自一个单元格，虽然我在这里硬编码了它。

可能有一种更优雅的方式来做到这一点，但这是一种应该有效的快速而肮脏的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:01:49.943

要搜索使用[Find()](http://msdn.microsoft.com/en-us/library/office/aa195730%28v=office.11%29.aspx)

```
 expression.Find(What, After, LookIn, LookAt, SearchOrder, SearchDirection, MatchCase, MatchByte, SearchFormat) 
```

例子：

```
 Cells.Find(What:="Cat", After:=ActiveCell, LookIn:=xlValues, LookAt:= xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T10:33:56.333

我不得不手动查找这些值。

# objective-c - 拉动刷新 UIWebView

> ID：13380149
> 
> 赞同：0
> 
> 时间：2012-11-14T13:54:37.523
> 
> 标签：objective-c, uiwebview

我使用本教程：[http ://sonnyparlin.com/2011/12/pulltorefresh-ios-5-and-arc-tutorial/](http://sonnyparlin.com/2011/12/pulltorefresh-ios-5-and-arc-tutorial/)

我没有在代码中得到错误只有两件事：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_PullToRefreshView", referenced from:
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我添加了 QuartzCore 框架，但它没有帮助。我需要做什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:58:52.893

您也应该将 PullTorefresh.m 添加到您的项目中，而不仅仅是 .h。

# oracle-adf - 视图范围对象的生命周期 (Oracle ADF)

> ID：13380151
> 
> 赞同：0
> 
> 时间：2012-11-14T13:54:43.170
> 
> 标签：oracle-adf

我正在开发一个使用 Oracle ADF Faces 的项目。ADF 在标准 JSF 的基础上引入了一些额外的范围（pageFlowScope、viewScope 和 backingBeanScope）。我们使用 ADF 范围之一 viewScope 似乎导致我们的会话大小随着时间的推移而膨胀。

视图范围的对象（例如我们的支持 Bean）由 ADF 管理，并且似乎被放入 org.apache.myfaces.trinidadinternal.application.StateManagerImpl$PageState 对象中的会话中。会话中这些对象的数量等于我们的 web.xml 配置文件中的 org.apache.myfaces.trinidad.CLIENT_STATE_MAX_TOKENS。

一旦所有令牌都“用完”，通过在应用程序中导航，这些对象中最旧的一个将从会话中删除并（应该）被垃圾收集。然而，这个空间的回收是在会话过期之后很久才观察到的。因此，在对应用程序进行负载测试时，我们会看到堆空间使用量逐渐增加，然后导致 JVM 崩溃。

通过在默认构造函数和 finalize 方法（覆盖对象的 finalize 方法）中添加日志语句来监视我们对象的创建和销毁。对象创建的日志语句在我们期望的时候就可以看到，但是来自 finalize 方法的日志语句只在会话到期后才能看到。当使用 Oracle JRocket Mission Control 触发垃圾收集时，我们看到堆使用量显着下降，但没有观察到来自 finalize 方法调用的任何日志记录。

有没有人对为什么垃圾收集器在从会话中删除后可能无法回收视图范围的对象有任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:09:30.003

您可能希望将 bean 切换到 requestScope。这意味着如果 bean 处于请求-响应周期中，它将被加载，否则它不会加载。此外，adf-scopes 建立在通常的 jsf 范围之上。

# php - 为什么提交表单有效，但我的 ajax 无效？

> ID：13380152
> 
> 赞同：0
> 
> 时间：2012-11-14T13:54:46.133
> 
> 标签：php, jquery

我正在尝试在我的聊天中创建一个按钮，允许某人打印对话。所以我制作了一个运行 PHP 脚本的按钮，该脚本创建一个新文件，将对话写入文件，并编写以下 jQuery。

**jQuery AJAX 调用**

```
 function OnBeforeUnLoad () {
            $.ajax({
               type: 'GET',
               url: 'deleteFile.php',
               data: {  
                           pageName: ".$pageName."
                     },
               dataType: 'text',
               success: function(data){alert('Good bye 1!');}
            });

            return;
          } 
```

**HTML 放入页面**

```
<br/><br/><form method="get" action="deleteFile.php"> <input type="submit" value="Close this Window"/> 
             <input type="text" value="'.$pageName.'" name="pageName" style="visibility:hidden"/></form> 
```

**删除文件.php**

```
<?php
$pageName = $_GET['pageName'];
$fullURL = 'PrintPage'.$pageName.'.php';
unlink($fullURL);

echo '<script>window.close();</script>';

?> 
```

当页面显示并单击“关闭此窗口”按钮时，它完全符合我的要求。它删除文件并关闭窗口。但是当我关闭窗口（又名 OnBeforeUnLoad()）时，我没有得到相同的结果。我什至尝试通过为表单提供 deleteFiles 的 id 然后执行 $('#deleteFiles').submit() 来触发提交，但它仍然不起作用。

如何让 AJAX 在 OnBeforeUnLoad 函数中工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T13:56:14.210

表单调用数据`pageName`，但 ajax 调用它`url`。

您可能也不希望使用`.`字符为值添加前缀和后缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:57:12.897

感觉像个傻瓜......在做了所有这些改变之后......我发现我需要做的就是添加

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

到标题。

因为我是在 php 中动态创建页面，所以我忘记了我需要读取 jQuery。

总是小事..感谢大家的帮助。

# java - 模型图是空的吗？

> ID：13380155
> 
> 赞同：0
> 
> 时间：2012-11-14T13:55:01.877
> 
> 标签：java, spring

我有一个代码：

```
public class testCustomer {

    private ModelMap customer;
    } 
```

以及上述课程的吸气剂/设置器。

我有两种方法：

```
@ActionMapping(params = "action=search")
    public void searchAction(
            ActionRequest request,
            ActionResponse response) {

            ModelMap modelMap = new ModelMap();
            modelMap.put("rowsPerPage", 10);
            modelMap.put("page", 1);
            modelMap.put("total", 100);

            testCustomer.setCustomer(modelMap);
    }

@ResourceMapping(value="customer")
    public ModelAndView listCustomer(
            ResourceRequest req,
            ResourceResponse res) {

        ModelAndView mav = new ModelAndView();
        MappingJacksonJsonView v = new MappingJacksonJsonView();

        mav.setView(v);
        if(testCustomer.getCustomer().isEmpty()){
            log.debug("List Customer Resource: " + "NULL");
            mav.addObject("data", null);
        } else {
            log.debug("List Customer Resource: " + testCustomer.getCustomer());         
            mav.addObject("dataListCustomer", testCustomer.getCustomer());
        }
        return mav;
    } 
```

如果 testCustomer 为空，我如何签入`@ResourceMapping`？因为现在我`NullPointer Exeption` 的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:58:01.210

在 java 中，`null`与“为空”不同。在 a 上调​​用任何方法`null`都将导致 a `NullPointerException`。`null`您必须在调用之前显式测试 for `isEmpty()`。

将您的代码更改为：

```
if (testCustomer.getCustomer() == null || testCustomer.getCustomer().isEmpty()) 
```

# python - 重载 unittestTestCase

> ID：13380157
> 
> 赞同：2
> 
> 时间：2012-11-14T13:55:11.660
> 
> 标签：python, unit-testing, inheritance

我有一个模块`myTest.py`，我将在其中重载`unittest.TestCase`类。所以在一个测试文件中，测试的创建如下：

```
import myTest
class MyTest(myTest.MyTestCase):
    ...do something... 
```

这很好用，但是当我需要来自 unittest 的其他功能时，例如`unittest.skip`，我也需要调用`unittest`。我希望能够调用 just `myTest.skip`，这应该是对`unittest.skip`. 如何为每个`unittest`属性实现此行为（继承自 除外`unittest.TestCase`）？有没有其他方法可以代替`from unittest import *`in `myTest.py`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:59:14.817

在`myTest.py`：

```
from unittest import skip 
```

然后你可以这样做：

```
import myTest

@myTest.skip(...)
class OtherTest(myTest.MyTestCase):
    ... 
```

# google-app-engine - AppEngine 错误处理

> ID：13380158
> 
> 赞同：0
> 
> 时间：2012-11-14T13:55:11.920
> 
> 标签：google-app-engine

全部，

有没有办法从处理程序中出错/退出执行？例如，如果传入的请求不包含正确的标头，我们希望发送 400 并退出/关闭连接。但是，每当我们使用`self.error(400)`或`self.response.set_status(400)`执行任何其他代码之后，无论如何，例如：

```
class MyPastaHandler(webapp2.Handler):
   def get():
      if not self.request.headers.get('My-Custom-Header'):
         self.error(400)
      ...
      [more code]
      self.response.out.write('{"success": "true"}') 
```

当我提交一个不带上述自定义标头的请求时，我得到一个 400，但我还在响应正文中获得了成功 json，它告诉我`self.error(400)`不会停止执行，也不会停止执行`self.response.set_status(400)`。

所以，问题是，是否有可能从处理程序中出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:55:11.920

事实证明，有一种简单的方法可以在 400（或任何自定义错误）后退出。`return`正如 TheFluff 在 AppEngine IRC 频道中所描述的，在 self.error(400) 之后一个简单的老式空就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:35:32.323

在 webapp2 中 abort() 是引发 HTTP 异常的快捷方式：[http ://webapp-improved.appspot.com/guide/exceptions.html#abort](http://webapp-improved.appspot.com/guide/exceptions.html#abort)

# c# - 将两个表连接到一个网格视图上

> ID：13380161
> 
> 赞同：2
> 
> 时间：2012-11-14T13:55:17.243
> 
> 标签：c#, asp.net, sql, sql-server

在连接两个表时，我对如何构建 SQL 查询感到困惑，以便以后可以将它们绑定到 gridview。

基本上我有两张桌子，

```
tablename: family
 __________________________
|Status |lastName|firstName|
|-------|--------|---------|
|1      |11      |111      |
|2      |22      |222      |
|3      |33      |333      |
''''''''''''''''''''''''''''
            +

tablename: familyStatus
 _____________________
|id        | Notes    |
|----------|----------|
|1         | 1111     |
|2         | 2222     |
|3         | 3333     |
'''''''''''''''''''''''

           =

Joined-tables: family+familyStatus [this is what i want]
 ____________________________
|firstName | lastName |Notes |
|----------|----------|------|
|111       | 11       |1111  |
|222       | 22       |2222  |
|333       | 33       |3333  |
'''''''''''''''''''''''''''''' 
```

您在这里看到的是表**族的****状态**和**familyStatus的****id**是相同的键，状态和id 将隐藏在gridview 上。

 ******```
Lets just assume for now that this is how i get the family table.

SELECT Status, firstName, lastName
FROM family
WHERE firstName= @fN
AND lastName = @lN 
```

我需要在此处添加什么以便家庭表中的注释也被加入？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T14:00:46.483

一个连接：

```
SELECT F.firstName, F.lastName, FS.Notes
FROM family F
INNER JOIN familyStatus FS
    ON F.[Status] = FS.id
WHERE F.firstName= @fN
AND F.lastName = @lN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:00:29.847

将 Status 外键添加到 familyStatus 表并尝试以下操作：

```
SELECT firstName, lastName, Notes
FROM family JOIN familyStatus
ON family.Status =  familyStatus.Status
WHERE firstName= @fN
AND lastName = @lN 
```******

# java - 带有 HTMLPanel 和 addAndReplaceElement 方法的 GWT NoSuchElementException

> ID：13380162
> 
> 赞同：3
> 
> 时间：2012-11-14T13:55:21.170
> 
> 标签：java, html, exception, gwt, gwt-2.4

这里有一些解释。

如果我的 HTML 页面包含：

```
<div id="cancel_date">
  <h3 id="cancel_date_title"></h3>

  <table align="center">
    <tr>
      <td id="cancel_date_labelDetailService"></td>
      <td id="cancel_date_detailService"></td>
    </tr>
  </table>
</div> 
```

如果我的代码包含

```
HTMLPanel container = HTMLPanel.wrap(Document.get().getElementById("cancel_date"));

public void init(){
 container.add(getMyWidget(), "cancel_date_detailService");
}

public void reload(){
container.addAndReplaceElement(getService(), "cancel_date_detailService");
} 
```

第一次加载页面时，我使用 init() 方法对其进行初始化。第二次及之后，我调用方法 reload()。我第一次调用方法 reload() 时，一切正常。但之后，我有一个像这样的 NoSuchElementException ：

```
ERROR: Uncaught exception escaped
com.google.gwt.event.shared.UmbrellaException: One or more exceptions caught, see full set in UmbrellaException#getCauses
    at com.google.gwt.event.shared.EventBus.castFireEvent(EventBus.java:69)
    at com.google.gwt.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:57)
    at be.mims.bookme.client.gui.component.MyCellTableFuturDates$7.onSuccess(MyCellTableFuturDates.java:134)
    at be.mims.bookme.client.gui.component.MyCellTableFuturDates$7.onSuccess(MyCellTableFuturDates.java:1)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:232)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor88.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor79.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.util.NoSuchElementException: cancel_date_detailService
    at com.google.gwt.user.client.ui.HTMLPanel.addAndReplaceElement(HTMLPanel.java:224)
    at be.mims.bookme.client.gui.FactoryCancelDate.showCancelDate(FactoryCancelDate.java:128)
    at be.mims.bookme.client.BookMe.show(BookMe.java:277)
    at be.mims.bookme.client.event.StateEvent.dispatch(StateEvent.java:31)
    at be.mims.bookme.client.event.StateEvent.dispatch(StateEvent.java:1)
    at com.google.gwt.event.shared.GwtEvent.dispatch(GwtEvent.java:1)
    at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
    at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
    at com.google.web.bindery.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:88)
    at com.google.gwt.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:52)
    at com.google.gwt.event.shared.EventBus.castFireEvent(EventBus.java:67)
    at com.google.gwt.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:57)
    at be.mims.bookme.client.gui.component.MyCellTableFuturDates$7.onSuccess(MyCellTableFuturDates.java:134)
    at be.mims.bookme.client.gui.component.MyCellTableFuturDates$7.onSuccess(MyCellTableFuturDates.java:1)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:232)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor88.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor79.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:722) 
```

如果我进入 SimpleEventBus 类，异常在哪里：

```
java.util.NoSuchElementException: cancel_date_detailService
at com.google.gwt.user.client.ui.HTMLPanel.addAndReplaceElement(HTMLPanel.java:224)
at be.mims.bookme.client.gui.FactoryDetailRdv.showDetailsDate(FactoryDetailRdv.java:72)
at be.mims.bookme.client.BookMe.show(BookMe.java:228)
at be.mims.bookme.client.event.StateEvent.dispatch(StateEvent.java:31)
at be.mims.bookme.client.event.StateEvent.dispatch(StateEvent.java:1)
at com.google.gwt.event.shared.GwtEvent.dispatch(GwtEvent.java:1)
at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
at com.google.web.bindery.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:88)
at com.google.gwt.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:52)
at com.google.gwt.event.shared.EventBus.castFireEvent(EventBus.java:67)
at com.google.gwt.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:57)
at be.mims.bookme.client.gui.component.MyCellTableFuturDates$7.onSuccess(MyCellTableFuturDates.java:130)
at be.mims.bookme.client.gui.component.MyCellTableFuturDates$7.onSuccess(MyCellTableFuturDates.java:1)
at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:232)
at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
at sun.reflect.GeneratedMethodAccessor174.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
at sun.reflect.GeneratedMethodAccessor166.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Thread.java:722) 
```

我使用 GWT 2.4.0

非常感谢帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T12:22:33.707

顾名思义，`addAndReplaceElement`找到元素并将其*替换*为给定的小部件。一旦你`addAndReplaceElement`为一个元素调用了一次，那个元素就消失了，所以第二个调用显然不会找到它，导致`NoSuchElementException`你看到。

如果你想用另一个替换你的小部件，那么你需要将它*包装*在一个元素中（即调用`add`而不是`addAndReplaceElement`），并使用它`remove`来删除以前的小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:01:59.720

如果不看你的 getService() 方法就很难说，但我最好的猜测是，在你第一次调用 reload() 之后，它正在寻找的元素被替换。每隔一段时间，要替换的块不再存在，抛出异常。

# python - 使用更新光标填充要素类名称和 OID 的 2 个字段

> ID：13380166
> 
> 赞同：3
> 
> 时间：2012-11-14T13:55:39.633
> 
> 标签：python, arcgis, arcpy

我目前正在尝试填充 2 个字段。它们都已经在我想用现有要素类中的数据填充的表中创建。这个想法是从与特定项目#匹配的所需要素类中复制所有数据。与项目 # 匹配的行将复制到具有匹配字段的空白模板。到目前为止，一切都很好，除了我需要将来自 OBJECT ID 字段和要素类名称的数据推送到表中的 2 个字段中。

```
**def featureClassName(table_path):
    arcpy.AddMessage("Calculating Feature Class Name...")
    print "Calculating Feature Class Name..."
    featureClass = "FeatureClass"
    SDE_ID = "SDE_ID"
    fc_desc = arcpy.Describe(table_path)
    lists = arcpy.ListFields(table_path)
    print lists
   with arcpy.da.SearchCursor(table_path, featureClass = "\"NAME\"" + " Is NULL") as  cursor:
        for row in cursor:
            print row
            if row.FEATURECLASS = str.replace(row.FEATURECLASS, "*", fc):
                cursor.updateRow(row)
                    print row
        del cursor, row
            else:
                pass** 
```

上面的代码是我尝试使用要素类的名称填充字段的众多方法。我试图对 OID 做同样的事情。

```
**for fc in fcs:
print fc
if fc:
    print "Making Layer..."
    lyr = arcpy.MakeFeatureLayer_management (fc, r"in_memory\temp", whereClause)
    fcCount = int(arcpy.GetCount_management(lyr).getOutput(0))
    print fcCount
    if fcCount > 0:
        tbl = arcpy.CopyRows_management(lyr, r"in_memory\temp2")
        arcpy.AddMessage("Checking for Feature Class Name...")
        arcpy.AddMessage("Appending...")
        print "Appending..."
        arcpy.Append_management(tbl, table_path, "NO_TEST")
        print "Checking for Feature Class Name..."
        featureClassName(table_path)
        del fc, tbl, lyr, fcCount
        arcpy.Delete_management(r"in_memory\temp")
        arcpy.Delete_management(r"in_memory\temp2")
    else:
        arcpy.AddMessage("Pass... " + fc)
        print ("Pass... " + fc)
        del fc, lyr, fcCount
        arcpy.Delete_management(r"in_memory\temp")
        pass** 
```

此代码是数据集中要素类的主循环，我创建了一个新图层/表以用于将数据复制到表中。要素类名称和 OID 的数据没有要推送的数据，所以这就是我卡住的地方。

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T17:08:28.587

你有很多问题。首先，您没有正确设置光标。如果您要更新，它必须是一个 updateCursor，并且您调用了一个 searchCursor，顺便说一下，您调用不正确。其次，您在“if row.FEATURECLASS ...”行中使用 = （赋值）而不是 == （相等比较）......然后在下面的 2 行中，您的缩进在几行上都搞砸了。而且完全不清楚您的函数知道 fc 的值。将其作为 arg 传递以确保。存在许多其他问题，但让我们举一个可行的示例，您可以研究它：

```
def featureClassName(table_path, fc):
    '''Will update the FEATURECLASS FIELD in table_path rows with 
      value of fc (string) where FEATURECLASS field is currently null '''

    arcpy.AddMessage("Calculating Feature Class Name...")
    print "Calculating Feature Class Name..."

    #delimit field correctly for the query expression
    df = arcpy.AddFieldDelimiters(fc, 'FEATURECLASS')
    ex = df + " is NULL"
    flds = ['FEATURECLASS']
    #in case we don't get rows, del will bomb below unless we put in a ref 
    #to row 
    row = None
    #do the work
    with arcpy.da.UpdateCursor(table_path, flds, ex) as cursor:
        for row in cursor:
            row[0] = fc #or basename, don't know which you want
            cursor.updateRow(row)
    del cursor, row 
```

请注意，我们现在将 fc 的名称作为 arg 传递，因此您必须在其余代码中处理它。另外最好使用 AddFieldDelimiter，因为不同的 fc 需要不同的分隔符，并且文档对此根本不清楚（有时它们是错误的）。

祝你好运，迈克

# php - 检查 ZF2 试图加载的视图文件是什么？

> ID：13380167
> 
> 赞同：0
> 
> 时间：2012-11-14T13:55:42.033
> 
> 标签：php, zend-framework2

我正在构建我的第一个 ZF2 应用程序，并且在我的一个模块中，与我的控制器关联的视图没有加载。有没有办法可以检查 ZF 试图执行的视图路径？

我检查了所有文件路径和模块配置设置，它们看起来是正确的，并且我所有其他具有相同布局的模块都可以正常工作，所以我认为这是文件名或命名空间问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:57:09.517

如果您使用[Zend-developer-tools](https://github.com/zendframework/ZendDeveloperTools)，它会在工具栏中向您显示使用了哪个布局、模板。

对于您的问题 - 在模块中，您可以替换其他模块中的模板。但它应该取决于模板路径堆栈。

在 module.config.php 中，您应该有类似的内容：

```
'view_manager' => array(
    'template_path_stack' => array(
        'application' => __DIR__ . '/../view',
    ), 
```

# c++ - boost::spirit::lex 的问题 - 标点符号

> ID：13380170
> 
> 赞同：2
> 
> 时间：2012-11-14T13:55:56.833
> 
> 标签：c++, boost, boost-spirit, boost-spirit-lex

我想创建一个 lex::token_def<> 包含像 '[' 或 ']' 或 '&>' 这样的字符序列

我尝试转义必要的字符：

```
namespace lex = boost::spirit::lex;

enum LexerIDs { ID_IDENTIFIER, ID_WHITESPACE, ID_INTEGER, ID_FLOAT, ID_PUNCTUATOR };

template <typename Lexer>
struct my_lexer : lex::lexer<Lexer>
{
    my_lexer() : punctuator("\[|\]|\(|\)|\.|&>|\*\*|\*|\+|-|~|!|/|%|<<|>>|<|>|<=|>=|==|!=")
    {
        this->self.add(punctuator, ID_PUNCTUATOR);
    }
    lex::token_def<> punctuator;
}; 
```

但这给了我一些关于无法识别的转义字符和用它对字符串进行词法分析失败的警告。我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:07:14.660

您需要一个额外的转义级别：

```
my_lexer() : punctuator("\\[|\\]|\\(|\\)|\\.|&>|\\*\\*|\\*|\\+|-|~|!|/|%|<<|>>|<|>|<=|>=|==|!=") 
```

`"\\"`是一个包含一个反斜杠的字符串文字，然后词法分析器构造函数对其进行解析。

# php - 如何仅在有不同行的地方更新 sql

> ID：13380175
> 
> 赞同：0
> 
> 时间：2012-11-14T13:56:02.277
> 
> 标签：php, mysql, sql, sql-update

好的，我只在行不同时尝试`UPDATE`我的表格列`myCheck`

```
$query = "UPDATE `mytable` 
    SET myCheck='" . $myCheck . "', myStatus='" . $myStatus . "', myId='" . $myId . "'
    WHERE my_id = '" . $myId . "'
    AND myCheck != '" . $myCheck . "' "; 
```

列存在，我需要`UPDATE`它们在哪里`my_id row = $myId`（这有效）

我想检查这个数据是否已经在我的 sql 中，所以我创建`myCheck`行但查询更新，无论`myCheck`行是否等于`$myCheck`。

我尝试了 <> ！= ...相同的结果

我还希望何时`$myId`与 sql 中的这些不同（例如，在 sql my_id 行是`1,2,3`和`$myId = 4`）中创建一个新行`my_id 4`。

也许我必须使用不同的东西`UPDATE`？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:11:56.070

我认为这`myCheck`可能是`null`，因为`null <> something`这永远不会是真的，您的行将不会被更新。试试这个：

```
UPDATE `mytable` set SET myCheck='your_value'
WHERE my_id = 'your_id' AND ((myCheck <> 'your_value') OR myCheck is null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:59:30.443

尝试使用 '<>' 而不是 '!='

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:07:28.487

好的，我明白了问题所在:)

myCheck 行是 varchar(32)，$myCheck 有 35 个符号...所以总是

1111111111111111111111111111111 =！11111111111111111111111111111111111

现在 myCheck 行是 varchar(64) 并且一切正常

# c - 当字符串相等时 strcmp 导致 false

> ID：13380181
> 
> 赞同：0
> 
> 时间：2012-11-14T13:56:17.773
> 
> 标签：c

这是我的代码：

```
 if(strcmp(pch,map[i].name)==0){
            printf("Equal\n");
            return 0;
        } 
```

`pch`从文件中读取，`map[i].name`已知大小为 64。这对于小于 64 的字符串非常有效。在比较大小为 63 以下的这两个字符串时：

`file11111111111111111111111111111111111111111111111111111111111`和

```
file11111111111111111111111111111111111111111111111111111111111 
```

一切都很好，并且预期的结果是相等的，但是当比较这两个（大小为 64）时：

`file111111111111111111111111111111111111111111111111111111111111`和

```
file111111111111111111111111111111111111111111111111111111111111 
```

回报是假的。我想过这样做：

```
 if(strncmp(pch,map[i].name,64)==0){
            printf("Equal\n");
            return 0;
        } 
```

它确实适用于精确大小为 64 的字符串，但对于较小的字符串，结果是随机的。我在这里处理什么样的怪癖？

编辑：这是完整的代码：

```
 char * pch;
    char tempFilesNeeded[100*64+100];
    strcpy(tempFilesNeeded,map[i].filesNeeded);
    pch = strtok(tempFilesNeeded,",");
    while (pch != NULL)
    {
        if(strcmp(pch,map[i].name)==0){
            printf("Equal\n");
            return 0;
        }

        pch = strtok (NULL, ",");
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T13:58:54.530

好吧，如果是

```
char pch[64]; 
```

那么你不能在那里有 64 个可见字符，因为终止需要最后一个条目。如果您确实`"file111111111111111111111111111111111111111111111111111111111111"`在该数组中，它不会被终止并且调用`strcmp()`它会调用未定义的行为。

另外，作为次要的一点，说`strcmp()`返回“false”是错误的，因为它的返回*不是*布尔值。它返回前两个不同字符之间的关系；如果没有字符不同，则字符串相等，则返回零。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T13:58:42.457

如果您的一个或两个数组的确切大小为 64，则您缺少结束字符串的最后一个 '\0'。

# javascript - 关于结合两个小的 Javascript 代码

> ID：13380184
> 
> 赞同：0
> 
> 时间：2012-11-14T13:56:21.020
> 
> 标签：javascript, jquery

基本上这个问题是不言自明的。我不知道如何组合小片段的 javascript 而不是拥有两个单独的文件。

这两个代码是：

```
$(function(){
    $('.navbar li').each(function(){
      if(window.location.href.indexOf($(this).find('a:first').attr('href'))>-1)
        {
      $(this).addClass('active').siblings().removeClass('active');
        }
    });
});

$(function(){
    $('.dropdown-menu li').each(function(){
      if(window.location.href.indexOf($(this).find('a:first').attr('href'))>-1)
        {
      $(this).removeClass('active')
        }
    });
}); 
```

还有一个问题，第一个`$(function()`有必要吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:59:28.750

### 你可以这样做：

创建一个函数并在其下调用它。或者，你这样做：

```
$(function(){
    $('.navbar li').each(function(){
      if(window.location.href.indexOf($(this).find('a:first').attr('href'))>-1)
        {
      $(this).addClass('active').siblings().removeClass('active');
        }
    });
    $('.dropdown-menu li').each(function(){
      if(window.location.href.indexOf($(this).find('a:first').attr('href'))>-1)
        {
      $(this).removeClass('active')
        }
    });
}); 
```

一些注意事项：

1.  这两个功能是不同的。
2.  您不需要两个函数启动器，`$(function(){})`两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:06:57.447

完整的工作样本，这将使第一个 UL 的第一个 LI 变为红色，并从第二个 ul LI 中删除红色。您的两个功能现在组合在一起。

```
 <!DOCTYPE HTML>
    <html lang="en-US">
    <head>
        <meta charset="UTF-8">
            <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <title></title>
        <style type="text/css">
        .active {background-color:red}
        ul.dropdown-menu>li.active {background-color:red}
        </style>
    </head>
    <body>

    </body>
    <ul class="navbar">
    <li><a href="file:///C:/Users/cisadohe/Desktop/new10.htm">first</a></li>
    <li>old</li>
    <li>new</li>
    <li>4</li>
    </ul>

    <ul class="dropdown-menu">
    <li class="active"><a href="file:///C:/Users/cisadohe/Desktop/new10.htm">first</a></li>
    <li>old</li>
    <li>new</li>
    <li>4</li>
    </ul>

    <script type="text/javascript">
    $(function(){
        $('.navbar li').each(function(){
          if(window.location.href.indexOf($(this).find('a:first').attr('href'))>-1)
            {
          $(this).addClass('active').siblings().removeClass('active');
            }
        });

        $('.dropdown-menu li').each(function(){
          if(window.location.href.indexOf($(this).find('a:first').attr('href'))>-1)
            {
          $(this).removeClass('active')
            }
        });
    });
    </script>
    </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:01:47.863

你可以这样：

```
$(function(){
    $('.navbar li, .dropdown-menu li').each(function(){
      if(window.location.href.indexOf($(this).find('a:first').attr('href'))>-1)
        {
            if($(this).parents(".navbar").length > 0)//this is to figure out if we are working with LI inside .navbar or not.
                $(this).addClass('active').siblings().removeClass('active');
            else
                $(this).removeClass('active')

        }
    });
}); 
```

功能几乎相同，只是您需要检测您是否正在使用 .navbar 中的 LI 来选择正确的`removeClass`代码。

此外，在您的代码中首先`$(function()`是必要的。否则，其中的代码可以在加载文档之前启动。但是你可以把两段代码放在一个里面`$(function()`

# android - Android中的条件编译？

> ID：13380191
> 
> 赞同：7
> 
> 时间：2012-11-14T13:56:35.150
> 
> 标签：android, compiler-construction, conditional, exif

是否有任何适用于 Android 的条件编译？

我不得不为 Android 3 (API 11) 制作我的项目，因为*ExifInterface*在 Android 2.3 (API 10) 中几乎没有有用的属性，尽管它出现在 API 5 (!!??) 中。我不想将我的应用程序限制为 ICS 用户。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T14:02:11.607

您可以动态检查设备的当前 API 版本，并根据该版本执行不同的操作：

```
 if(Build.VERSION.SDK_INT < 14) {
        // Crappy stuff for old devices
    }
    else {
        // Do awesome stuff on ICS
    } 
```

但是请注意，如果您需要实例化并非对所有 API 都可用的类，那么您应该在可运行或单独的包装类中进行，例如：

```
 if(Build.VERSION.SDK_INT < 14) {
        // Crappy stuff for old devices
    }
    else {
        // Do awesome stuff on ICS
        new Runnable() {
            new AmazingClassAvailableOnICS();
            (...)
        }.run();
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-14T14:03:40.447

`import android.annotation.TargetApi;`

然后使用注释：

```
@TargetApi(11)
public void methodUsesAPI11()
{
... 
```

使用这个技巧做了一件非常简单的事情：它允许编译一些包含 API 级别 11 调用（类、方法等）并且仍然`android:minSdkVersion="8"`在清单中设置的代码。仅此而已，仅此而已。

剩下的就看你了。您必须在调用`methodUsesAPI11()`或处理异常之前检查平台版本，以防止应用程序崩溃并在旧平台上执行其他操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T14:04:55.343

检查 Build.VERSION.SDK_INT 或使用注释就足够了，但是，我收藏的这个链接可能与您的情况有关： [http ://android-developers.blogspot.com/2010/07/how-to-have-your -cupcake-and-eat-it-too.html?m=1](http://android-developers.blogspot.com/2010/07/how-to-have-your-cupcake-and-eat-it-too.html?m=1)

您可以使用他们在那里描述的内容来拥有可能不兼容但永远不会加载的类。它不是条件编译，但它可能是您需要的，但是，它有点复杂。

# javascript - JavaScript 闭包如何以动态形式工作

> ID：13380196
> 
> 赞同：1
> 
> 时间：2012-11-14T13:56:46.597
> 
> 标签：javascript, kineticjs

> **可能重复：**
> [Javascript 循环中的事件处理程序 - 需要闭包吗？](https://stackoverflow.com/questions/341723/event-handlers-inside-a-javascript-loop-need-a-closure)

我是动力学的新学习者。当我使用 kinetic.shape 绘制一条连续线时，我遇到了一些复杂的 javascript 闭包问题

```
 for(var i = 0; i < 4; i++)
  {
    var y_position = data[i];
    context.lineTo(i*x_position, y_position);
  } 
```

在我的情况下层太多了，我已经多次更改了我的代码，但仍然无法得到我的预期结果。有人可以帮助我吗？

```
 for(var i = 0; i < 4; i++){ 
        var y_position = data[i];
        //document.write("<br/>"+y_position);  (it print 0 1 2 3)
        var line = new Kinetic.Shape({
            drawFunc: function() {
                var context = this.getContext();
                context.lineTo(i*x_position, y_position);
                this.stroke(context);
                //document.write("<br/>"+y_position);  (it print 3 3 3 3)
                },

                stroke: lineColor,
                strokeWidth: 1
            });
            layer.add(line);
    } 
```

# .htaccess - .html、.css、.js 的 htaccess UTF-8 编码 - 最好的方法是什么？

> ID：13380206
> 
> 赞同：21
> 
> 时间：2012-11-14T13:57:24.940
> 
> 标签：.htaccess, utf-8, pagespeed, yslow

对于 yslow 页面速度，我想删除我的元标记并将我的编码放入 .htaccess 文件中。以下是我读过的所有方法。哪个是首选方式？语言设置也是一个好主意 - 如果文件匹配之外，它将适用于所有文件类型吗？

1) [https://github.com/jancbeck/My-Wordpress-Boilerplate/blob/master/htaccess.txt](https://github.com/jancbeck/My-Wordpress-Boilerplate/blob/master/htaccess.txt)

```
AddDefaultCharset utf-8
AddCharset utf-8 .html .css .js
DefaultLanguage en-US 
```

对比

2) [http://www.askapache.com/htaccess/using-http-headers-with-htaccess.html](http://www.askapache.com/htaccess/using-http-headers-with-htaccess.html)

```
<filesMatch "\.(html|css|js)$">
AddDefaultCharset UTF-8
DefaultLanguage en-US
</filesMatch> 
```

对比

3）我怀疑这就是所需要的。但未经测试。

```
AddCharset UTF-8 .html .css .js
DefaultLanguage en-US 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-14T15:19:08.683

我认为

```
AddDefaultCharset utf-8 
```

对所有人来说都足够了。

也许更好的方法是为文件设置编码，这些文件使用与默认不同的字符集。

# android - Android：onLongClickListener 上的两个操作

> ID：13380208
> 
> 赞同：0
> 
> 时间：2012-11-14T13:57:32.497
> 
> 标签：android, onlongclicklistener

是否可以对 onlongclickListener 执行两个操作.. 下面是示例代码

```
public class traction implements OnLongClickListener {

    private Activity activity;
    static int i = 0;
    public traction(Activity activity) {
        this.activity = activity;
    }

    public void onLongClick(View v) {

        Intent i = new Intent(activity, login.class);
        activity.startActivity(i);  

    }

    }} 
```

在这里，当我按 fst 时间时，活动触发，如果我长按三下，另一个活动应该触发...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:03:55.290

您可以对该按钮使用标志或动态标志并使用 switch 语句。

你可以找到很多[例子](https://stackoverflow.com/questions/4987670/using-switch-statement-to-handle-button-clicks)

# java - 将 SQL 结果相互链接

> ID：13380218
> 
> 赞同：0
> 
> 时间：2012-11-14T13:58:03.137
> 
> 标签：java, mysql, sql, jdbc, phpmyadmin

用户

```
id, first, last
1   John   Johnsson
2   Mark   Jackson
3   Chris  Lager 
```

标签

```
id, userID, tag,       pass,        active
1   2       42564eb6   <some hash>  1
2   1       524846b6   <some hash>  0 
```

我要输出的是这种数据组合：

标签

```
ID(from user), First name, Last name, Tag number, Password hash, Active
1              John        Johnsson   524846b6    <hash>         0
2              Mark        Jackson    42564eb6    <hash>         1
3              Chris       Lager 
```

所以基本上，我想要一个包含用户的表，按他们的 ID 排序，如果适用，带有`tag number`,`pass`和字段`active`

我在外部服务器上使用带有 PHPMyAdmin 的基于 Web 的数据库，并通过 JDBC 在 Java 中对其进行查询。

我的问题：我需要为此使用什么查询？我不太确定什么命令，例如`Group By`或`Order By`将对我的数据执行什么操作，这些数据作为`ResultSet`Java 中的一个对象出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:00:45.387

您需要使用[连接](http://en.wikipedia.org/wiki/Join_%28SQL%29)

`SELECT u.*, t.tag, t.pass, t.active FROM users u INNER JOIN tags t ON u.id = t.userID ORDER BY u.id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:06:58.120

```
SELECT U.ID AS UserID, U.First AS FirstName, U.Last AS LastName, 
       T.Tag AS TagNumber, T.Password AS PasswordHash, T.Active
FROM `Users` U
INNER JOIN `Tags` T ON T.UserID = U.ID
ORDER BY U.ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:14:33.003

我认为这是一个 LEFT JOIN，例如：

```
select
u.id,
u.first as [First Name],
u.Last as [Last name],
t.tag as [Tag Number],
t.pass as [Password],
t.Active
FROM [user] as u
LEFT JOIN [Tags] T ON U.id=T.UserId
ORDER BY u.[id] ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T14:04:17.827

您可以使用[SQL 连接](http://en.wikipedia.org/wiki/Join_%28SQL%29)在表上执行此操作。您的问题的代码是：

```
select
    users.id
    , users.first
    , users.last
    , tags.tag
    , tags.pass
    , tags.active
from
    users
    , tags
where
    users.id = tags.userID
order by
    users.id
/ 
```

# java - Android 从另一个活动中获取结果

> ID：13380222
> 
> 赞同：1
> 
> 时间：2012-11-14T13:58:37.810
> 
> 标签：java, android, android-activity

我的代码有问题。我想将 String 从**SecondActivity 传递**给**FirstActvity**。请注意，**FirstActivity**不可见，但仍处于打开状态。当**SecondActivity**完成时，它会将 String 传递给**FirstActivity**。

我的问题是，当**SecondActivity**结束并转到**FirstActivity**时，整个应用程序都会关闭。

FirstActivity 到 SecondActivity：

```
Intent  intent = new Intent(MainActivity.this, FileChooser.class);
startActivityForResult(intent, 0); 
```

SecondActivity 到 FirstActivity：

```
Intent intent = new Intent(this, MainActivity.class);
intent.putExtra("filePath", "/sdcard/path1");
setResult(0);
finish(); 
```

第一活动结果：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    //TODO handle here.         
    Intent intent = getIntent();        
    this.filePath = intent.getExtras().getString("filePath");
} 
```

**代码有什么问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:03:52.913

当您设置 SecondActivity 的结果时，您只需设置结果代码。而不是[`setResult(0)`](http://developer.android.com/reference/android/app/Activity.html#setResult%28int%29 "设置结果（整数）")使用[`setResult(0,intent)`](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29 "设置结果（int，意图）")

此外，在您的 FirstActivity 的 onActivityResult 中，从`data`参数中获取额外信息 -`this.filePath = data.getExtras().getString("filePath");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:07:51.690

尝试使用

```
data.getExtras().getString("filePath"); 
```

代替

```
intent.getExtras().getString("filePath");` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:03:32.400

尝试捆绑：

**第一个活动；**

```
public void onClick(View v) {
        Intent intent = new Intent(v.getContext(), FIRSTACTIVITY.class);
        Bundle bundle = new Bundle();
        bundle.putString("filePath","/sdcard/path1");
        intent.putExtras(bundle);               
        startActivity(intent);
    } 
```

**第二个活动：**

```
public void activity_value() {
    Intent i = getIntent();
    Bundle extras=i.getExtras();
    if(extras !=null) {           
        value = extras.getString("filePath");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T14:11:50.140

试试[这个例子](http://androidcookbook.com/Recipe.seam;jsessionid=C7CD6C9C9CFBD490DCE7EA024F774381?recipeId=899)。它 解决了你的问题。

# api - Eventbrite 标签

> ID：13380228
> 
> 赞同：4
> 
> 时间：2012-11-14T13:58:50.310
> 
> 标签：api, tags, eventbrite

EventBrite API 很棒，但有几个非常简单的功能可以让它变得更好。[特别是，有谁知道更新事件标签属性的方法（或将其设置在新事件上） - 我在 API 方法http://developer.eventbrite.com/doc/events/](http://developer.eventbrite.com/doc/events/event_update/)上看不到它[event_update/](http://developer.eventbrite.com/doc/events/event_update/)但是 get_event 的响应中提供了“tags”，所以我只是遗漏了一些东西。

如果这还没有通过 event_update 公开，那么实现它会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T01:44:58.090

好问题。Eventbrite 的事件数据过去是围绕“标签”组织的——用户可以标记任何事件以进行搜索和发现。

此功能可通过我们的网络平台和 API 获得，但已被删除。因此，无论用户如何创建新事件（Web 或 API），我们都删除了添加标签的功能。

event_get 方法（[http://developer.eventbrite.com/doc/events/event_get/](http://developer.eventbrite.com/doc/events/event_get/)）仍然会在可用时公开标签信息......并且出于特定（不太有趣）的遗留原因，仍然有相当数量的事件它将继续拥有此标签数据，因此我们将继续在我们的读取 API 中支持它。

如果您使用标签功能来组织自己的活动，我们的一些用户实际上会使用 /event_update 将标签信息作为 HTML 注释放入活动描述中。这可能不符合您的用例，但有些人已经破解了它以满足他们的需求。

希望有帮助！

# ruby-on-rails - 通过表单将外键传递给不同的控制器，而不会产生批量分配安全风险

> ID：13380234
> 
> 赞同：0
> 
> 时间：2012-11-14T13:59:03.087
> 
> 标签：ruby-on-rails, ruby

我担心我在 Rails 应用程序中实现某个功能的安全性。

我有两个模型，评估和评估尝试。

Assessments 显示视图显示一个表单（它是一个多项选择测试表单），但数据被发送到 AssessmentAttempts 控制器而不是 Assessments，它记录了 user_id、assessment_id 和用户在测试中的选择。

当前用户的 ID 未作为表单的一部分提交，但目前我将assessment_id 作为隐藏字段提交（取自 URL，例如 /assessments/1）。

这不应被修改：用户不应该能够更改该值，否则他们的选择将与不同的测试问题相关联。

有没有比使用隐藏字段更好的方法来将该assessment_id 放入AssessmentAttempts 控制器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:15:33.343

您可以在数据库中为 AssessmentAttempt 创建一个初始条目。为 AssessmentAttempt 提供一个唯一的令牌列，并使用它来验证用户的测试作为表单中的隐藏字段。

例子：

```
token = SecureRandom.base64.tr("+/", "-_") 
```

好消息：您有不完整的尝试历史和一些额外的跨站点保护

坏消息：数据库中的空行。

# javascript - jquery datepicker 在 blockUI 弹出窗口中出现月份和年份下拉菜单问题

> ID：13380238
> 
> 赞同：2
> 
> 时间：2012-11-14T13:59:16.950
> 
> 标签：javascript, jquery, jquery-ui-datepicker

我正在为我的应用程序使用 jquery 日期选择器插件，奇怪的是，在我将它附加到表单元素中之后它没有显示下拉列表，并且上面的整个过程发生在块 UI 弹出组件中

尽管提到更改月份并将年份更改为 true，但它不起作用这是我编写的代码，单击选择框后，下拉菜单不会出现

```
$("#dateFrom").datepicker({
  yearRange: '1900:2030',
  changeMonth: true,
  changeYear: true,
  minDate: new Date(),
  dateFormat: 'dd-mm-yy'
}); 
```

有人请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:42:39.560

试试这个

```
$( "#datetextbox" ).datepicker({  

   //set true to show months  
            changeMonth: true,  

            //set true to show year  
   changeYear: true,  

           //set date for date range  
    minDate: new Date(2012,1,23),  
            maxDate: new Date(2013,1,26),  

           //set if you want icon to be visible  
   showOn: "button",  
   buttonImage: "/images/cal.gif",  
   buttonImageOnly: true  
       }); 
```

# java - ActiveMQ NIO 配置

> ID：13380239
> 
> 赞同：4
> 
> 时间：2012-11-14T13:59:16.987
> 
> 标签：java, spring, activemq, nio

我正在探索在*ActiveMQ中从***tcp**切换到**nio**的选项。[文档](http://activemq.apache.org/configuring-transports.html)给出了一个示例，其中仅在代理的 xml 配置中更改了 URI 的方案：

 *```
<broker>
  ...
  <transportConnectors>
    <transportConnector name="nio" uri="nio://0.0.0.0:61616"/>  
  </<transportConnectors>
  ...
</broker> 
```

**问题：**那么，我是否还必须更改客户端配置的方案以匹配？例如，

```
<amq:connectionFactory id="jmsConnectionFactory" brokerURL="nio://localhost:61616?"/> 
```

这似乎也是其他人困惑的根源：

*   [http://activemq.2283324.n4.nabble.com/Problem-with-NIO-protocol-td3540710.html](http://activemq.2283324.n4.nabble.com/Problem-with-NIO-protocol-td3540710.html)。
*   [http://activemq.2283324.n4.nabble.com/NIO-freezes-client-td2361338.html](http://activemq.2283324.n4.nabble.com/NIO-freezes-client-td2361338.html)。

这些线程声称只需要为代理配置 NIO，但是有没有**官方文档**支持这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T23:50:08.963

您无需将客户端从 tcp 或其他任何方式更改为 NIO，代理是唯一可以使用或受益于 NIO 的一方，因为客户端维护单个打开的连接。即使您确实更改为 NIO，代码也足够聪明，可以知道客户端正在请求 NIO 并在 TCP 工厂中进行交换，因此您最终仍会得到相同的结果。*

# c - 用 eclipse 和 cygwin 调试 C

> ID：13380240
> 
> 赞同：1
> 
> 时间：2012-11-14T13:59:25.077
> 
> 标签：c, eclipse, cygwin

我正在尝试在 64 位 Windows 上使用 eclipse-Juno-CDT 和 cygwin-gcc（cygwin 版本=1.7.16，gcc 版本=3.4.4，gdb 版本=7.5.50）调试以下 C 代码。该代码在正常模式下工作正常。最初调试器没有运行，因为找不到源文件。然后我四处搜索并添加了路径映射信息（从/cygdrive/c到C：\）。现在它正在运行，但存在以下问题：

1.  我在“hello c 1”行之前放了一个断点，然后单步执行。但是控制台上没有打印任何内容。

2.  在最后一行（“exit”）上单步后，我收到错误：“No source available for _cygwin_exit_return() at ...”

    ```
    // stdio.h and stdlib.h are included, but when I put a #include the code
    // they dont show up, so I deleted those lines in this code fragment.
    int main(void) {
         int a=10;
         int b=5; // breakpoint on this line, single step after this
         printf("hello c 1\n"); // these outputs are not printed in console
         // fflush(stdout);
         printf("A=%d, B=%d\n", a, b); // but debugger shows the correct values in data window
         // fflush(stdout);
         return EXIT_SUCCESS; // error on this line
    } 
    ```

稍后添加：经过更多调试后，我发现即使在退出错误之后，如果我执行“继续”，那么在程序终止后我会在控制台上看到这些行。所以我添加了额外的“fflush(stdout)”行，现在我可以在打印输出时看到它们。

但是如何解决退出错误问题？此外，编辑文件以添加 fflush 以查看调试输出是一种痛苦——有没有办法避免这种情况？有人可以帮助我解决这个非常基本的问题，或者将我指向一个给出解决方案的地方吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:44:16.173

虽然*从逻辑上讲*，C 程序在该函数返回时开始`int main()`并结束，但环境（如 Windows 或 Cygwin）经常添加前代码和后代码，用于初始化/分解内存管理、打开/关闭标准流以及其他此类簿记。使用 Cygwin 编译的可执行文件在从 中返回后`int main()`，会切换到`_cygwin_exit_return()`由 Cygwin 运行时提供的清理功能 - 您没有源代码，因此您的调试器会报错。

至于立即获取输出，您可以使用无缓冲的输出流。

选项一，使用`fprintf( stderr, ... )`（因为`stderr`根据定义是无缓冲的）。但是，这也会影响程序的非调试行为。

选项二：

```
int main()
{
// Using NDEBUG as also used by <assert.h>; feel free to use a different define
#ifndef NDEBUG
    // For debugging, set stdout to unbuffered
    setbuf( stdout, NULL );
#endif
    .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:51:36.960

当我学习多线程时，我很好奇线程是否比进程快，而 iirc 我甚至不得不在 Windows 上刷新 stderr/stdout。

除了记忆之外，您可以将这些 printf() 包装在一个调用 fflush 的函数中，或者调用 setvbuf() 来禁用缓冲。

关于退出：“无可用源”仅表示您的程序的一部分缺少调试信息，因此这不是一个真正的错误——除非您自己构建 cygwin，否则我猜 cygwin dll 被剥夺了调试符号。或者，也许你想调试 cygwin 的 exit()？

编辑：废话，并发答案:)

# javascript - 可滚动面板在 Android 上制作黑屏

> ID：13380247
> 
> 赞同：0
> 
> 时间：2012-11-14T13:59:54.607
> 
> 标签：javascript, android, extjs, sencha-touch-2

我正在使用 Sencha Touch 2 开发一个移动网络应用程序，其中包含一个简单的面板：

```
{
    html : "....",
    height : 230,
    scrollable : true
} 
```

当我在 Android 中执行此操作时，有一个滚动条，但面板的所有内容都是空白的......在 iPhone 中没有问题，我看到内容并且滚动条有效。当我从面板中删除可滚动选项时，我看到了内容，但我真的需要滚动选项。

我已经尝试添加“全屏：真”

我能做些什么 ？为什么当我使用可滚动时，android 上的屏幕是空白的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:24:38.317

尝试添加“布局”属性，并将其设置为“适合”，如下所示：

```
{
    html : "....",
    height : 230,
    layout: 'fit',    //add this line
    scrollable : true
} 
```

# c# - 在 Microsoft WorkFlow 基础中在何处编写工作流的资格标准

> ID：13380249
> 
> 赞同：0
> 
> 时间：2012-11-14T13:59:58.827
> 
> 标签：c#, workflow, workflow-foundation-4, workflow-foundation

我对微软的工作流程基础有了一些简要的了解。我的应用程序的场景需要我大量的工作流来处理请求。请求可以由多个工作流处理，并且必须根据请求者和其他请求信息来识别正确的工作流。

我在哪里可以定义过滤器。我是否应该定义一个分支正确工作流的主工作流。还是有任何简单的方法，例如工作流程的资格标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:55:17.137

当然，如果在一个地方维护标准决策有意义，则使用输入数据启动单个工作流，并使用简单的 If 活动或 FlowDecision 分支到适当的子工作流，具体取决于您是从序列还是流程图开始. 如果你有很多，即不止几个，一个简单的 If 活动使用起来可能会很尴尬，那么你可以使用 FlowSwitch 来代替。如果决策逻辑更复杂，另一种选择可能是使用 Pick，然后“询问”每个可能的子工作流程，说明它们是否可以处理输入。

# ruby-on-rails - mongoid update_attributes 改变了吗？

> ID：13380250
> 
> 赞同：2
> 
> 时间：2012-11-14T14:00:01.323
> 
> 标签：ruby-on-rails, ruby, mongodb, activerecord, mongoid

我想 update_attributes 然后检查信息是否更改

您可以简单地将此代码传递给`rails console`现有的 rails + mongoid 项目

```
class TestModel
  include Mongoid::Document
  include Mongoid::Timestamps
  field :name, type: String
end

test = TestModel.new({:name => "name 1"})
test.save()
=> true

test
=> created_at: 2012-11-14 13:48:26 UTC, updated_at: 2012-11-14 13:48:26 UTC

test.changed?
=> false
test.name_changed?
=> false

test.update_attributes({:name => "name 2"})
=> true

test.changed?
=> false
test.name_changed?
=> false

test
=> created_at: 2012-11-14 13:48:26 UTC, updated_at: 2012-11-14 13:49:23 UTC 
```

我做错了什么还是这是一个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T14:10:12.950

它的完美逻辑。

脏方法旨在用于检查对象在保存**之前**是否已更改。根据定义，持久对象没有待处理的更改。

你应该做：

```
test.assign_attributes(attributes)
test.changed? #=> true
test.save 
```

[请参阅方法定义](http://rdoc.info/github/mongoid/mongoid/Mongoid/Persistence#update_attributes-instance_method)。

# .htaccess - htaccess 重定向问题

> ID：13380258
> 
> 赞同：0
> 
> 时间：2012-11-14T14:00:23.037
> 
> 标签：.htaccess, mod-rewrite, redirect

我使用 mod-rewrite，我这样做：

```
RewriteRule ^brand/([A-Za-z0-9-]+)/([A-Za-z0-9-\.\_]+)/?$ model.php?ref=$2&brand=$1 [NC] 
```

效果很好！但我有一个问题：当你通过 url 像

`brand/stuff/ffgfgfgfg.php`它将重定向到一个页面`brand/stuff/ffgfgfgfg?ref=ffgfgfgfg.php&brand=stuff`。我想摆脱这种情况，因为它对谷歌的推广不是很好。

也许任何人都可以帮助我并提出一个解决方案来重定向那个尴尬的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:51:40.753

那么这里是你的选择。如果，正如您在评论中所说（尽管我觉得有点奇怪），您想将品牌/stuff/ffgfgfgfg.php 重定向到品牌/stuff/ffgfgfgfg，您可以使用

```
RewriteRule ^brand/([A-Za-z0-9-]+)/([A-Za-z0-9-\.\_]+).php/?$ brand/$1/$2 [NC] 
```

显然，如果你想重定向到brand/stuff/ffgfgfgfg?ref=ffgfgfgfg&brand=stuff，你可以使用

```
RewriteRule ^brand/([A-Za-z0-9-]+)/([A-Za-z0-9-\.\_]+).php/?$ model.php?ref=$2&brand=$1 [NC] 
```

# java - 簇的质心 - KMedoids

> ID：13380260
> 
> 赞同：2
> 
> 时间：2012-11-14T14:00:28.723
> 
> 标签：java, machine-learning, k-means

我正在使用以下 Java-ml 库，具体来说，我正在使用 KMedoids ( [http://java-ml.sourceforge.net/...](http://java-ml.sourceforge.net/api/0.1.0/net/sf/javaml/clustering/KMedoids.html) ) 类来聚类对象。

我可以对数据进行聚类，但我想提取每个聚类中的质心对象，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:55:23.343

关键是您需要在任何集群中找到中位数。您可以通过排序然后取中点来找到中值，这需要 O(n lg n) 时间。如果您需要找到每个对象插入的中值，那么您需要进行[在线中值选择](https://stackoverflow.com/questions/1387497/find-median-value-from-a-growing-set)：保留两个堆，所有小于中值的对象的 maxheap 和大于中值的所有对象的 minheap。对象插入将是 O(lg n) 时间。

# ajax - 如何将额外数据传递给 ajax 成功事件？

> ID：13380262
> 
> 赞同：0
> 
> 时间：2012-11-14T14:00:30.540
> 
> 标签：ajax, jquery

如何将额外数据传递给 ajax 成功事件？

```
var extra_data = 'some data';
var a = {
    type : 'post',
    async : true,
    cache : false,
    dataType : 'json',
    timeout : 15000,
    contentType : 'application/x-www-form-urlencoded;charset=UTF-8',
    global : true,
    url : url,
    success : [
        function(response, textStatus, jqXHR, extra_data){

        }
    ]
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:40:28.130

如果我记得的话，您可以将 extra_data 声明为全局变量（之前没有 var ），您可以在成功方法的范围内使用它，并且不需要通过方法参数传递它

```
extra_data = 'some data';
var a = {
 type : 'post',
 async : true,
 cache : false,
 dataType : 'json',
 timeout : 15000,
 contentType : 'application/x-www-form-urlencoded;charset=UTF-8',
 global : true,
 url : url,
 success : [
     function(response, textStatus, jqXHR){
       console.log(extra_data); //for example
     }
 ]
}; 
```

# php - 单个表针对相似类型数据的多个表

> ID：13380264
> 
> 赞同：0
> 
> 时间：2012-11-14T14:00:40.753
> 
> 标签：php, mysql, sql, table-structure

我需要对这种方法提出一些建议 - 请参阅下面的示例。

我的表结构如下

```
data_jobtype
id, identifier (varchar), description (varchar), userid (int)

data_statustype
id, identifier (varchar), description (varchar), userid (int)

data_usertype
id, identifier (varchar), description (varchar), userid (int)

data_roletype
id, identifier (varchar), description (varchar), userid (int) 
```

还有大约 10 个类似的表。然后我有了另一个想法并创建了一个新表

```
data_types
id, identifier (varchar), description (varchar), userid (int), typetype (varchar) 
```

该表从上述表中获取所有数据，并且`typetype`字段告诉它是哪种类型的数据。例如。`typetype`=“工作类型”或`typetype`=“角色类型”

第二种方法工作得很好，但是当我编写查询以两次引用同一个表以创建两种不同类型的连接时，`types`我意识到我需要了解在查询中多次查询单个表是否比多个表更好。示例查询：

```
select u.*, dt.description usertype_desc, dt2.description roletype_desc
from users u 
left join data_types dt on dt.identifier = u.user_identifier and dt.typetype = 'usertype'
left join data_types dt2 on dt2.identifier = u.role_identifier and dt2.typetype = 'roletype'
Where u.status = 'live' 
```

我担心的不仅仅是这个问题。该项目仍处于早期阶段，但最终会发展壮大，因此我现在有时间放置基本结构，如果我做得对，我将不胜感激。您会推荐哪种方法而不是其他方法，为什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:04:28.877

在连接条件中链接两种类型要简单得多：

```
left join data_types dt 
on dt.identifier = u.user_identifier and dt.typetype in ('usertype', 'roletype') 
```

我认为单表方法不会影响性能。问题是什么使查询更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:38:05.613

我认为这种方法会给你一些复杂的 SQL，这些 SQL 更难编写，更重要的是更难长期维护。

除非您在所有这些表中看到相同的“东西”重复——在这种情况下，您希望将“type_type”分离到一个连接表中——我建议坚持使用准确描述它们所包含内容的表。

此外，随着时间的推移，您可能会想要为 statustype 添加新字段，为 jobtype 添加不同的字段等。最终这些表结构将越来越不相似。

# wpf - 用户控件错误：在 WPFBindingNavigaorControl.WPFBindingNavigator 控件中找不到类

> ID：13380268
> 
> 赞同：0
> 
> 时间：2012-11-14T14:00:44.673
> 
> 标签：wpf, user-controls, wpf-controls

我试图创建一个 WPF 绑定导航器控件，我想将其放置在我的自定义库项目中。它给了我以下错误：

```
Error   1   The type name 'WPFBindingNavigatorControl' does not exist in the type 'WPFBindingNavigatorControl.WPFBindingNavigatorControl' 
```

现在这里是 xaml 代码：

```
<UserControl x:Class="WPFBindingNavigatorControl.WPFBindingNavigatorControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="45" d:DesignWidth="375" xmlns:my="clr-namespace:ImageButton;assembly=ImageButton" Loaded="UserControl_Loaded">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="47*" />
        <ColumnDefinition Width="50*" />
        <ColumnDefinition Width="87*" />
        <ColumnDefinition Width="32*" />
        <ColumnDefinition Width="54*" />
        <ColumnDefinition Width="51*" />
        <ColumnDefinition Width="54*" />
    </Grid.ColumnDefinitions>
    <my:ImageButton Name="btnFirst" Image="/images/Go-first.png" ImageHeight="NaN" ImageWidth="NaN" />
    <my:ImageButton  Grid.Column="1" Name="btnPrevious" Image="/images/Go-previous-view.png" Margin="6,0,0,0" />
    <TextBox Grid.Column="2" Margin="6,10,8,12" Name="txtGoTo" />
    <Label Content="Of" Grid.Column="3" Margin="0,8,3,9" Name="label1" />
    <Label Content="Label" Grid.Column="4" Margin="0,8,0,9" Name="lblTotalRowCount" />
    <my:ImageButton Grid.Column="5" Name="btnNext" Image="/images/Go-next.png" Margin="0,0,9,0" />
    <my:ImageButton Grid.Column="6" Name="btnLast" Image="/images/Go-last.png" />
</Grid> 
```

现在，这也使用了我创建的另一个用户控件：ImageButton。此类在我的测试解决方案中的另一个项目中。我已将所有项目的目标框架重置为相同的东西：.NET Framework 4。我仍然收到相同的 xaml 错误。我知道我在这里做错了什么。提前致谢。

埃德科恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:10:12.297

尝试将类的名称更改为与当前命名空间不同的名称，如下所示：

```
namespace = WPFBindingNavigatorControl
class = WPFBindingNavigatorControl 
```

# java - SWT - 如何监听鼠标事件，并检索它们的绝对位置？

> ID：13380272
> 
> 赞同：3
> 
> 时间：2012-11-14T14:00:51.080
> 
> 标签：java, swt

我通过添加过滤器在带有复合材料的外壳内捕获鼠标事件。

目前，事件的位置是相对于它们发生的复合材料。
如何检索 MouseEvents 的绝对位置？（绝对位置是显示屏左上角带有 0,0 的位置）。

```
parentShell.getDisplay().addFilter(SWT.MouseDown, new Listener() {
        @Override
        public void handleEvent(Event event) {
            //do not know the absolute position here
        }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T14:37:45.467

您可以使用`Control#toDisplay(int, int)`转换任何相对坐标来显示相对绝对值。

```
public void handleEvent(Event event) {
    if (event.widget instanceof Control) {
        Point absolutePos = ((Control) event.widget).toDisplay(event.x, event.y);
        ...
    }
} 
```

如果您收到的事件是鼠标事件（在您的示例中），上述方法将起作用。`Display#getCursorLocation()`如果您手头没有鼠标事件，您也可以在任何时候使用来获取绝对鼠标位置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T14:35:23.697

以下拯救了我的一天：

```
System.out.println("Click: " + parentShell.getDisplay().getCursorLocation()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:33:09.637

我能想到的唯一方法是使用 getLocation() 方法来获取小部件与侦听器与其父级的相对位置。递归地使用该方法，直到到达顶部复合和/或显示。添加事件的相对坐标以获得绝对坐标。但这只是一个猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T14:36:58.723

试试这个：

```
 parentShell.getDisplay().addFilter(SWT.MouseDown, new Listener() {
        @Override
        public void handleEvent(Event event) {
           Point p = Display.getCurrent().map(null, null, event.x, event.y);
        }
    }); 
```

# php - Windows 上的 PHP Chmod

> ID：13380276
> 
> 赞同：1
> 
> 时间：2012-11-14T14:00:57.150
> 
> 标签：php, chmod

我正在尝试为`chmod`Windows 上的文本文件做一个简单的操作，稍后我想区分哪个是可写的。

现在我已经`chmod`用 755 更改了，但即使在运行 PHP 脚本后它仍然显示相同的内容。

```
<?php
chmod('Math.txt',755); //tried 0755 still didn't work
echo "</br>";
echo substr(sprintf('%o', fileperms('Math.txt')), -4);
?> 
```

# windows-phone-8 - 在本地安装 Windows Phone 8 API 文档

> ID：13380277
> 
> 赞同：2
> 
> 时间：2012-11-14T14:01:12.860
> 
> 标签：windows-phone-8

有人知道Windows phone 8 MSDN 文档是否可以在本地安装吗？我想要此内容： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/ff402535%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402535%28v=vs.105%29.aspx) 在 Help Viewer 2.0 中可见，因为我经常需要在离线场景中工作. 我已经安装了 VS 2012 和 WP8 SDK。当我在随 VS2012 安装的 Help Viewer 2.0 中选择“Windows Phone Development”时，我得到了 7.1 文档。

曼弗雷德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:36:41.357

只需进入 Visual Studio。
单击“帮助 - 添加和删除帮助内容”

在“推荐文档”下

你会看到“Windows Phone 开发”，

可能作为最后一项。

点击项目旁边的“添加”，

然后点击右下角的“更新”。

文档（大约 209 兆字节）将下载到您的本地计算机。

# javascript - 使用javascript从iframe中获取src的宽度和高度

> ID：13380279
> 
> 赞同：1
> 
> 时间：2012-11-14T14:01:25.530
> 
> 标签：javascript, regex, iframe

希望有人可以在这里帮助我。我有一个带有 iframe 的变量，就像这样。

```
var iframe = '<iframe src="http://someaddress.com" width="600" height="500"></iframe>'; 
```

我想从变量中获取 src、宽度和高度，并放入它们自己的变量中。我知道我可以使用正则表达式，但我不知道如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T14:08:43.720

```
var iframe = '<iframe src="http://someaddress.com" width="600" height="500"></iframe>',
    regEx = /(src|width|height)=["']([^"']*)["']/gi;

iframe.replace(regEx, function(all, type, value) {
    console.log(type); // src/width/height
    console.log(value); //url/600/500
}); 
```

# java - 打印柱

> ID：13380280
> 
> 赞同：2
> 
> 时间：2012-11-14T14:01:28.333
> 
> 标签：java, multidimensional-array

我在打印列时遇到问题。当代码达到“100”时，它会停止读取下面的内容，因为它是空的：

```
public class Column{

  public static void main( String[] arg )
  {

    int[][] uneven = 
        { { 1, 3, 100, 6, 7, 8, 9, 10},
          { 0, 2},
          { 0, 2, 4, 5},
          { 0, 2, 4, 6, 7},
          { 0, 1, 4, 5 },
          { 0, 1, 2, 3, 4, 5, 6 }};

    for ( int col=0; col < uneven.length; col++ )
    {
      System.out.print("Col " + col + ": ");
      for( int row=0; row < uneven.length; row++ ) 
        System.out.print( uneven[row][col] + " ");
      System.out.println();
    }
  }
} 
```

我应该怎么做才能继续阅读该专栏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:04:22.413

要打印可变长度的二维数组，您的内部循环运行 from`0`到`the current row`length ：-

```
for (int i = 0; i < arr.length; i++) {

    for (int j = 0; j < arr[i].length; j++) {  // Closely see inner loop

        System.out.println(arr[i][j]);
    }
} 
```

`arr[i]`是当前行。并`arr[i].length`给出该行的列数。

**你可以这样推断：-**

*   `arr`是一个二维数组。
*   所以，你的每个元素`arr`都是一个`1-D array`.
*   所以，`arr[i]`是一维数组。代表每一行。
*   要获取每行中的列数，您可以`arr[i].length`

现在，你可以在你的问题中应用同样的东西。

* * *

实际上，您`for loop`的运行错误。您`outer loop`正在从 运行`col = 0 to col < uneven.length`，但它应该从以下运行：-`row = 0 to row < uneven.length`

所以，你的 for 循环应该是这样的： -

```
for ( int row=0; row < uneven.length; row++ )
{
   System.out.print("Row " + row + ": ");

   for( int col=0; col < uneven[row].length; col++ ) { 
     System.out.print( uneven[row][col] + " ");
   }
   System.out.println();
} 
```

* * *

## 更新 ： -

好吧，我首先把你的问题弄错了。如果要打印`column wise`，可以使用以下代码：-

```
int[][] uneven = 
    { { 1, 3, 100, 6, 7, 8, 9, 10},
      { 0, 2},
      { 0, 2, 4, 5},
      { 0, 2, 4, 6, 7},
      { 0, 1, 4, 5 },
      { 0, 1, 2, 3, 4, 5, 6 }};

    int max = -1;
    for ( int row = 0; row < uneven.length; row++ ) {
        if (uneven[row].length > max) {
            max = uneven[row].length;
        }
    }
    System.out.println(max);
    for (int i = 0; i < max; i++) {
        for (int j = 0; j < uneven.length; j++) {
            if (uneven[j].length <= i) {
                continue;
            }
            System.out.print(uneven[j][i] + " ");
        }
        System.out.println();
    } 
```

首先，您需要在每行的所有列数中找到最大值。

然后再次运行循环，从 0 到最大列。现在，既然你有一个 lop for `columns`，现在你需要另一个 for `rows`。这将是你的内在循环。

现在，在内部循环中，您不能只在`(j, i)`索引处打印数组元素，因为当前行可能没有`max`列数。所以，你需要放一个`if-condition`来检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:05:43.657

代替：

```
for( int row=0; row < uneven.length; row++ ) 
```

和：

```
for( int row=0; row < uneven[col].length; row++ ) 
```

# web-applications - 如何制作可以存储数据的多用户 Web 应用程序？

> ID：13380282
> 
> 赞同：1
> 
> 时间：2012-11-14T14:01:28.817
> 
> 标签：web-applications

我是一名优秀的程序员，从未编写过网络应用程序。

我想制作一个可以提出带有多项选择答案的简单问题并确定对它们的回答的时间。

它应该允许人们在不登录的情况下只玩问题，而且还可以创建帐户，允许他们存储他们如何完成的记录。

我希望数据分析工具可以轻松访问存储的数据，因此可以轻松转储为文本文件格式。

我对这种语言相当不可知论，我能说足够多的计算机语言，学习使用一种我以前从未见过的语言将需要几天的工作。我确实偏爱富有表现力的语言。

而且我有点不喜欢任何通过生成巨大的难以理解的代码树来创建 hello world 应用程序的东西。

所以我想我正在寻找一种语言和框架，它可以免费为我提供用户帐户、https、使用 google id 登录、url 解析等常见的东西，但让我构建自己的应用程序，而不是会生成的东西给我一个应用程序，然后让我自定义它。

任何人都可以推荐这样的语言/框架/库吗？

我认为，如果 Paul Graham 的 Arc 能够起飞，它会是理想的。精神上有没有这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:27:10.913

好吧，如果您不介意自己构建一个这样的简单系统，您可以尝试使用：

*   后端服务器的 Sinatra (Ruby)
*   用于连接数据库的 DataMapper/Sequel
*   用于处理客户端数据的主干（Javascript）

这些都是相对简单易用的工具，可以快速上手。

Ruby 还提供了大量的 gem 来开始使用用户帐户等。

“你好，世界！” 对于 Sinatra 来说非常简单：

```
require 'sinatra'

get '/' do
  "Hello, World!"
end 
```

# java - 在 Swing 中等量调整两个 ScrollPanes

> ID：13380283
> 
> 赞同：1
> 
> 时间：2012-11-14T14:01:31.520
> 
> 标签：java, swing, resize, jscrollpane, grouplayout

我正在设计一个包含两个按顺序排列的 ScrollPanes 的 JFrame，一个在另一个之下。我正在使用使用 GroupLayout 的 NetBeans (Matisse?) 的内置表单编辑器。

**我观察到：**在调整框架大小时，首先调整底部的 ScrollPane 的大小，直到它消失，然后是此 ScrollPane 上方的按钮，最后是另一个 ScrollPane。

**我想要什么**：当调整框架的大小时，两个 ScrollPanes 的大小都应该相同，所以如果框架的大小改变了 X，我希望两个 Scrollpanes 的大小都改变 X/2。

这可能吗？如何？（首选 GroupLayout 的解决方案）

PS：总布局包括以表格方式放置的按钮和标签。所以 GroupLayout 已经对它很有用了。

PS：似乎除了简单的布局（网格、框）之外最好的选择是 MigLayout。

让我从[白皮书中引用](http://migcalendar.com/miglayout/mavensite/docs/whitepaper.html)

> 增长和收缩 当一个组件没有给出首选大小时会发生什么是非常可定制的。可以选择将组件划分为增长和收缩优先级组，其中较高优先级将收缩/增长，然后调整具有较低优先级的组件/行/列的大小。可以设置这些组内的增长权重，以指定如何在该优先级组中的组件/行/列之间分配可用空间或收缩。...

PS2：我现在正在使用 MigLayout，它是如此强大，我想再次推荐它。顺便提一句。我发现他们的[备忘单](http://www.migcalendar.com/miglayout/mavensite/docs/cheatsheet.html)非常有用（解释了所有选项）。他们网站上的演示也包含许多示例和源代码。使用 MigLayout 可以轻松解决这里的问题和许多其他问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:05:46.083

```
Is this possible and how? 
```

通过使用`GridLayout`, `GridBagLayout`, `BoxLayout`(必须覆盖所有`Min`, `Max`and `PreferredSize`) 和 for`MigLayout`

```
Is this possible and how? (Solutions for GroupLayout preferred) 
```

我不会走这条路，甚至有可能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:04:16.833

网格布局可确保元素大小均匀。采用：

`JPanel panel = new JPanel(new GridLayout(2,1));`

由于您希望它们垂直对齐，即彼此之后，2 表示行数，1 表示列数。

然后只需将 ScrollPanes 添加到面板：

```
panel.add(scrollPane1);
panel.add(scrollPane2); 
```

有关网格布局的文档，请查看[此](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/GridLayout.html)

# java - 在 Ubuntu Linux 中查找 C/C++ 源代码的最佳工具是什么？

> ID：13380288
> 
> 赞同：1
> 
> 时间：2012-11-14T14:01:48.427
> 
> 标签：java, android, c++, c, ubuntu

众所周知，SourceInsight 可以方便地在 Windows 上查找 C/C++ 源代码。

eclipse是java代码的不错选择。

但是在 Ubuntu Linux 中查找 C/C++ 源代码的最佳工具是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T14:11:54.110

如果您对 Eclipse 感到满意，您也可以在任何 linux 发行版中使用它。您可能还想看看[cscope](http://cscope.sourceforge.net/)和[ctags](http://ctags.sourceforge.net/)，这两个命令行工具可以集成到您可能选择使用的大多数编辑器和 IDE 中。它们当然也可以独立使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T14:14:48.693

如果您想以简单方便的方式浏览源代码，也许您应该使用[doxygen](http://www.doxygen.nl/)生成代码文档。即使内部没有适当的注释，它也会使用源浏览器生成 html（或其他格式，如果需要）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T14:05:43.267

你应该试试 QT Creator，这里是链接：http: [//qt.digia.com/Product/](http://qt.digia.com/Product/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-14T14:15:00.053

Eclipse 有一个用于 C++ 开发的插件，称为 Eclipse CDT。在 Windows 和 Linux 上运行良好

# firefox - Twitter Bootstrap Collapse - Firefox >= 15 的问题

> ID：13380290
> 
> 赞同：3
> 
> 时间：2012-11-14T14:01:50.373
> 
> 标签：firefox, jquery-plugins, twitter-bootstrap, collapse

带有 2 个切换按钮和 2 个全局按钮的示例 [全部显示] 和 [全部隐藏]

Chrome 工作正常 FF >= 15 有问题：点击 2 x on [hide all] - 游戏结束 - 不再崩溃！

访问：http: [//jsfiddle.net/feldversuch/fB5PJ/8/](http://jsfiddle.net/feldversuch/fB5PJ/8/)

```
<div id="content" class="span8">
    <button type="button" class="btn" data-toggle="collapse" data-target="#demo1">
        toggle #demo1</button>
    <button type="button" class="btn" data-toggle="collapse" data-target="#demo2">
        toggle #demo2</button>
    <button type="button" class="btn btn-danger" onclick="$('.collapse').collapse('show');return false;">
        show all</button>
    <button type="button" class="btn btn-danger" onclick="$('.collapse').collapse('hide');return false;">
        hide all</button>
    <br /><br />

<div id="collapser"> 

<div id="demo1" class="btn collapse in"> <span class="badge">#demo1</span> 
    Collapsible Content, Collapsible Content, Collapsible Content, Collapsible Content, Collapsible Content, Collapsible Content, initially shown </div>

<br /><br />

<div id="demo2" class="btn collapse in"> <span class="badge">#demo2</span> 
    Collapsible Content, Collapsible Content, Collapsible Content, Collapsible Content, Collapsible Content, Collapsible Content, initially shown </div>

</div>
</div> 
```

merv 的解决方案：仅显示 $('.collapse').not('.in')

```
<button type="button" class="btn btn-danger" onclick="$('.collapse').not('.in').collapse('show');return false;">
   Show All</button> 
```

我的解决方案：仅隐藏 $('.collapse.in')

```
<button type="button" class="btn btn-danger" onclick="$('.collapse.in').collapse('hide');return false;">
        hide all</button> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:34:22.683

这是一个引导程序错误。Bootstrap Collapse 插件缺少任何短路代码来防止`hide`or`show`方法被执行两次。这使得插件有可能陷入`transitioning`状态。不同的浏览器处理它的方式不同。它在 Chrome 中工作的唯一原因是因为当类被删除时它仍在触发它的`$.support.transition.end`事件`in`（即使`in`类已经消失了！）。

有人提议让插件防止不必要的调用，但由于 git 礼仪马虎而导致拉取失败（请参阅[通过调用 show/hide when already shown/hidden 防止崩溃陷入过渡状态](https://github.com/twitter/bootstrap/pull/3616)）。在从库方面防止这些问题方面，我并不反对这种方法，但我个人认为有必要采用更广泛的方法，因为几乎所有使用 CSS 转换的 Bootstrap 插件都会出现像这样的轻微状态冻结问题。在类似的东西被拉进代码库之前，你只需要小心这些问题。

目前，一个简单的解决方法是自己进行错误捕获并防止`hide`被`show`调用两次。在您的示例中执行此操作的最简单方法是在**Show All**和**Hide All**按钮单击回调中使用更具体的选择器。即，

```
<button type="button" class="btn btn-danger"
   onclick="$('.collapse').not('.in').collapse('show');return false;">
   Show All
</button>
<button type="button" class="btn btn-danger" 
   onclick="$('.collapse.in').collapse('hide');return false;">
   Hide All
</button> 
```

## [普朗克](http://plnkr.co/edit/CU6PQJ?p=preview)

# android - 如何在sqlite（Android）的表中获取字段及其计数（发生次数）？

> ID：13380296
> 
> 赞同：1
> 
> 时间：2012-11-14T14:02:06.990
> 
> 标签：android, sqlite, cursor

我正在显示来自 arraylist 的多选列表视图（最多 130 个值）。用户必须在列表中选择 1 到 5 个项目，我在单击按钮后将它们（所选项目）插入数据库中。它工作正常。

表结构：

```
private static final String CREATE_SELECTED_CAND_TABLE = " CREATE TABLE if not exists "
        + TABLE_SELECTED_CAND
        + "("
        + KEY_ID
        + " integer PRIMARY KEY autoincrement,"
        + KEY_NAME1
        + " TEXT,"
        + KEY_NAME2
        + " TEXT,"
        + KEY_NAME3
        + " TEXT,"
        + KEY_NAME4
        + " TEXT," + KEY_NAME5 + " TEXT" + ")"; 
```

这就是我插入表格的方式：

```
public long insertCandidates(DataSelectedCandidates dataSelCand) {

    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_NAME1, dataSelCand.getmCandidateName1());
    initialValues.put(KEY_NAME2, dataSelCand.getmCandidateName2());
    initialValues.put(KEY_NAME3, dataSelCand.getmCandidateName3());
    initialValues.put(KEY_NAME4, dataSelCand.getmCandidateName4());
    initialValues.put(KEY_NAME5, dataSelCand.getmCandidateName5());
    return mDb.insert(TABLE_SELECTED_CAND, null, initialValues);

} 
```

我多次插入记录。例如：“james”可以在第 1、第 5 和第 8 行，或者数据库中不存在 james。

如何获取名称字段及其计数（数据库中的出现次数）？我需要在另一个列表中显示它。！

我正在使用光标获取所有值：

```
Selected_candidDB.open();
Cursor cursor = Selected_candidDB.fetchAllCandidates(); 
```

我可以用上面的光标实现这个..吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:17:58.823

使用原始 sql 查询来实现，例如：

```
select count(*),name from candidates where name ='james' 
```

它将返回一个结果：| 出现次数 | 姓名|

# java - Apache Hadoop：从 Java 应用程序调用

> ID：13380298
> 
> 赞同：1
> 
> 时间：2012-11-14T14:02:21.077
> 
> 标签：java, apache, hadoop, network-programming

我对 Hadoop 非常熟悉，我想知道是否有一种方法可以让您从外部应用程序开始工作，然后将结果直接输入到该应用程序中。在我编写了 Hadoop MapReduce 作业并对其进行配置后，我想从另一台机器上的外部应用程序调用它，并将 MapReduce 的输出通过流或对象直接传递到外部应用程序。

*例如，假设每次在我的网络服务器上调用某个 servlet 时，我都想运行示例 wordcount 作业。我该怎么做？*

这可能吗？如果是这样，示例或经验将不胜感激。

# eclipse - 在 Eclipse 中编辑 XML 时，我可以更改插入符号的停止行为吗？

> ID：13380301
> 
> 赞同：0
> 
> 时间：2012-11-14T14:02:25.247
> 
> 标签：eclipse, editor

在 Eclipse 中编辑 Java 代码时，假设您有以下单词和 | 作为插入符号。

```
ThisIsACamel|CaseWord 
```

如果我按 ctrl-right，插入符号会移动到给我的下一个大写字母

```
ThisIsACamelCase|Word 
```

到目前为止，一切都很好。Eclipse 将此称为*智能插入符号定位*。

现在在编辑 XML（本例中为 GWT / GXT 文件）时，我也经常遇到驼峰式单词。但是在这个编辑器中，驼峰大小写没有被考虑在内，插入符号会直接跳到单词的末尾。

有没有办法修复这种行为，以便智能插入符号定位也可以在 XML 编辑器中工作？

# jsf - primefaces，如何在不创建组件的情况下有条件地渲染组件

> ID：13380302
> 
> 赞同：1
> 
> 时间：2012-11-14T14:02:26.247
> 
> 标签：jsf, primefaces, rendering

我使用 primefaces 3.4.1 和 myfaces 2.1.9。

我需要有条件地在选项卡中显示一个组件。目前我的代码看起来像这样：

```
<p:tab id="tab" title="tabTitle">
     <h:panelGroup id="tabContent">
        <componentX:component id="component1" rendered="#{not condition}" />
        <componentY:component id="component2" rendered="#{condition}" />
     </h:panelGroup>
 </p:tab> 
```

我自愿更改了组件和参数的名称

我的问题是这个解决方案 component1 和 component2 都被创建了。因此，如果从未显示过两个组件事件，服务器将努力生成这两个组件事件。

我的问题是，是否有一种（干净的）方法可以在不创建两个组件的情况下获得此渲染结果？我用 c:if 和 c:choose 得到了相同的结果，我的想法已经不多了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:13:25.433

您可以使用 c:if 在这里没有问题...

# html - IE 在渲染时添加额外的 HTML 标签

> ID：13380305
> 
> 赞同：2
> 
> 时间：2012-11-14T14:02:40.530
> 
> 标签：html, internet-explorer, render

我将以下 HTML 标记作为输入粘贴到 IE 浏览器上，以代替浏览器上的选定内容：

```
<span id='fs_892_3006_0' class='ParaMarked' FactType='NonNumeric' onclick='OnSpanClick("fs_892_3006_0", event)' IsFactMarked='true'>
    <fact id='892_3006_0' keyword=''>
        <P style="margin: 0pt 0pt 10pt; line-height: 115%; font-size: 11pt;">
            <SPAN style="font-family: Calibri; font-size: 11pt;">THIS IS A TEST CONTENT 1</SPAN>
        </P>
    </fact>
</span> 
```

但是，当呈现 HTML 时，IE 会在该 HTML 周围添加额外的标签，如下所示：

```
<p style="margin: 0pt 0pt 10pt; line-height: 115%; font-size: 11pt;">
   <span style="font-family: Calibri; font-size: 11pt;">
        <span id="fs_892_3006_0" class="ParaMarked" onclick='OnSpanClick("fs_892_3006_0", event)' IsFactMarked="true" FactType="NonNumeric">
          <fact id="892_3006_0" keyword="">
</p><p style="margin: 0pt 0pt 10pt; line-height: 115%; font-size: 11pt;"><span style="font-family: Calibri; font-size: 11pt;">THIS IS A TEST CONTENT 1</span></p></fact></span></span> 
```

我尝试了以下技术将 HTML 粘贴到浏览器上，但结果相同：
注意：“markedText”是包含上述 HTML 输入的 javascript 变量

1\. pasteHTML(markedText)：http: [//msdn.microsoft.com/ en-us/library/ie/ms536656(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536656(v=vs.85).aspx)
2\. Rangy 库：
      var sel = rangy.getSelection();
      var range = sel.getRangeAt(0);
      range.deleteContents();
      var node = range.createContextualFragment(markedText);
      range.insertNode(节点);

对此的任何指示将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:59:00.443

跨度内的 p 可能不起作用，因为它是内联元素内的块级元素。

一些浏览器将通过将内联元素包装在块级元素（默认为“p”）中来“修复”该问题，并继续处理其余的标记。

# android - facebook API 添加图像以及墙提要

> ID：13380307
> 
> 赞同：0
> 
> 时间：2012-11-14T14:02:51.510
> 
> 标签：android, facebook, facebook-graph-api, post

是否可以在 Facebook 墙上发布带有图像的消息（不是图像链接，而是图像数据）？

[我在http://developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)或[https://developers.facebook.com/docs/guides/attachments/](https://developers.facebook.com/docs/guides/attachments/)中都没有找到这种可能性。

我已经准备好忍受不可能做到这一点，但我遇到`SLComposeViewController`了 iOS 6.0 中引入的类的文档（http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/参考.html）。

这个类有一个方法`- (BOOL)addImage:(UIImage *)image`可以完全满足我的需要。

我为 Android 编程，因此我无法使用它。但显然这种方法必须使用 facebook API。但我找不到它：与图片发布相关的所有内容都需要 url，而不是数据。

那么，在 Android 中是否可以在 Facebook 墙上发布带有图像数据的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:49:42.403

编辑：我几乎用你的评论发布了答案。您可以使用类似的东西将您的 Image 从`assets`转换为`Bitmap`.

```
InputStream bitmap = null;

try {
    bitmap = getAssets().open("icon.png");
    bmpImageGallery = BitmapFactory.decodeStream(bitmap);
} catch (IOException e) {
    e.printStackTrace();
} finally {
    bitmap.close();
} 
```

*这就是我通过方法中的 Intent 从图库中显示图像的`onActivityResult`方式：*

```
targetURI = data.getData();

try {

    bmpImageGallery = MediaStore.Images.Media.getBitmap(this.getContentResolver(), targetURI);

    // SET THE IMAGE FROM THE GALLERY TO THE IMAGEVIEW
    imgvwSelectedImage.setImageBitmap(bmpImageGallery);

} catch (FileNotFoundException e) {
    e.printStackTrace();

} catch (IOException e) {
    e.printStackTrace();
} 
```

*这是上传图片的代码：*

```
byte[] data = null;

ByteArrayOutputStream baos = new ByteArrayOutputStream();
bmpImageGallery.compress(CompressFormat.JPEG, 100, baos);
data = baos.toByteArray();

Bundle postImgGallery = new Bundle();

// ADD THE PHOTO DATA TO THE BUNDLE
postImgGallery.putByteArray("photo", data);

// ADD THE CAPTION FROM THE STRING finalStatusMessage TO THE BUNDLE
if (finalStatusMessage.equals(""))  {
    /*****  DO NOTHING HERE     *****/
} else {
    postImgGallery.putString("caption", finalStatusMessage);
}

Utility.mAsyncRunner.request(userID + "/photos", postImgGallery, "POST", new PhotoUploadListener(), null); 
```

**注意：**在此位`"caption", finalStatusMessage`中，`caption`也可以替换为`message`。我从来没有看到使用其中任何一个的帖子有任何区别。但为了安全起见，请在使用前进行检查。;-)

*该类用于检查上传的状态：*

```
private class PhotoUploadListener extends BaseRequestListener   {

    @Override
    public void onComplete(String response, Object state) {
        // DISPLAY A CONFIRMATION TOAST
    }

} 
```

# version-control - 具有不同代码库的 Mercurial 分支

> ID：13380314
> 
> 赞同：2
> 
> 时间：2012-11-14T14:03:07.593
> 
> 标签：version-control, mercurial

我正在努力寻找一种使用 Mercurial 处理我的工作流程的好方法。我在 SO 和其他地方阅读了许多相关问题，但找不到合理的解决方案。

假设我有两个分支：

1.  我在其中进行正常开发的默认分支。从中部署发布并使用发布标签对其进行标记
2.  单独维护的特定客户的分支机构。它在一个单独的版本号上运行，该版本号从应用程序的旧版本分支而来。

这两个分支现在大部分相同，但已经存在一些差异。随着时间的推移，他们会更加疏远。

这意味着我有 4 种类型的源文件：

1.  **Type-A**：在两个分支中保持相同的文件（如果引入了更改，则应该在两个分支中都存在）。这些是大部分文件。
2.  **Type-B**：只在默认分支中，不需要合并到客户分支中的文件
3.  **Type-C**：只在客户分支中的文件，不需要合并到默认分支中
4.  **Type-D**：两个分支中都存在的文件，具有共享代码，但也包含应该保持独立且特定于每个分支的代码

开发在默认分支上完成，并且有大部分是增量的定期版本。但我也有这两种情况：

1.  对默认分支所做的一些更改也需要合并到客户分支（例如，需要修复/添加到两者的错误或功能）。
2.  对客户分支完成的“修补程序”，不能立即合并到默认分支，但最终需要在某个时候合并。

问题是我想不出一种相当简单、干净和安全的方法来支持这两种情况。Mercurial 没有部分合并或在合并时忽略文件的概念。它合并了变更集，但它坚持包含以前版本中引入的文件。

在这些场景中将 default 合并到 customer 分支或 customer 到 default 会迫使我添加 Type-B 和 Type-C 的文件。对不需要添加到另一个分支的 Type-A 文件进行更改（使其成为 Type-D）带来了挑战。

现在显然我可以通过使用编译器定义来解决其中一些问题（从而在两个分支中保持源文件相同），手动编辑代码并在合并后手动删除文件，但这并不是最有效和最干净的处理方式这。

当然，这是一个足够普遍的工作流程，比我更聪明的人已经想通了。任何人都可以提出任何可以简化这些场景中的工作的方法或最佳实践吗？还是我的设置存在根本缺陷？

另外，Git 是否更优雅地处理这些流程？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:08:53.150

我会在客户分支上进行客户需要的任何开发并将其合并到默认值中。这适用于修补程序，并且比从默认分支中挑选开发变更集更简单。向前合并比向后合并更容易。它还摆脱了 B 类文件问题，因为客户分支中没有 B 类文件。

我会合并到默认的 C 类文件，然后在默认分支上删除。对这些文件的任何进一步修改都应生成警告，指出在分支上修改的文件已在另一个分支上删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:22:48.413

可以使用`hg graft -r SRCREV`命令在分支之间交换单独的变更集

更复杂且可能更难（但也更灵活和易于管理）的方式可能是使用 MQ 和多个队列（每个类型的队列？），但即使使用一个具有良好命名约定的 MQ 补丁队列，您也不会丢失

# actionscript-3 - 从 AS3 类中的“引用类型”中创建只读属性是否真正有意义？

> ID：13380315
> 
> 赞同：0
> 
> 时间：2012-11-14T14:03:10.813
> 
> 标签：actionscript-3, class, properties, get, class-design

采取以下代码：

```
private var m_iQuanitity:int;
public function get quantity():int
{
    return m_iQuantity;
} 
```

这似乎完全有道理。您可以毫无问题地从外部课程中看到数量是多少，但您根本无法真正弄乱它。现在采取以下代码：

```
private var m_acUsers:ArrayCollection = new ArrayCollection();
public function get users():ArrayCollection
{
    return m_acUsers;
} 
```

在这种情况下，您不能真正直接设置变量，但您仍然可以对它进行几乎所有其他事情，而不会出现任何问题。您可以调用它的 AddItem 和 RemoveItemAt 函数，它们可以做很多事情来“设置”变量。

Does it still make sense to do this? I know you can create a duplicate ArrayCollection and just pass the duplicate back to avoid allowing it to be set, but doing stuff like that all over the place, purely for defensive programming, can waste a lot of CPU time. So I guess I'm asking if it still makes sense anyway, how so, and if I'm missing the point of using get and set completely? Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:13:27.680

从语法上讲，您所拥有的没有任何问题，但是第二个示例确实打破了“获取”的概念，因为它不仅仅是一个只读属性。如果您需要遵守只读策略，那么您已经打破了它，因为现在您可以操作 ArrayCollection。

最后，它归结为你要做什么。您可以更改值对项目是否重要？如果您正在与多人一起处理一个项目，则这种类型的编码将要求您添加评论或让您解释您在做什么。当你做一些超出常规的事情时，这可能会增加混乱，所以最好简化并坚持预期，避免解释一些事情。

此外，我可以想到几种可能导致问题的方法 - 如果您将返回的属性传递给其他不知道它来自何处的类并且原始类中的内部代码失败，则更改函数外部的值。

# c# - 应用层负载均衡

> ID：13380318
> 
> 赞同：1
> 
> 时间：2012-11-14T14:03:24.473
> 
> 标签：c#, .net, sql-server, sql-server-2008, load-balancing

我正在准备面试。主题之一是：

> 性能调优/负载平衡是一个不同的概念，它包括将发送到这些服务器的查询分配，以便负载尽可能均匀分布。它通常在应用层（或使用连接池）完成。复制和负载平衡之间的唯一直接关系是您需要一些复制才能进行负载平衡，否则您将拥有一个服务器。

您能否向我解释一下应用层的负载平衡是什么意思，因为它指的是 sql server ？

您还可以提供应用层进行负载平衡的 c# 示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:13:39.427

这是一个相当广泛的话题。我建议阅读一些有关负载平衡的 Microsoft 文献。这是有关 Msft 堆栈中负载平衡的[一些文档](http://msdn.microsoft.com/en-us/library/ff650667.aspx)。

# vbscript - VBScript 从冗余备份文件夹中删除不在主备份文件夹中的文件

> ID：13380323
> 
> 赞同：0
> 
> 时间：2012-11-14T14:03:45.270
> 
> 标签：vbscript, synchronization, backup, directory

好的，所以我对 VBScript 真的很陌生，所以请放轻松。

我正在尝试构建一个 VBScript，它将从主备份文件夹中不再存在的冗余备份文件夹中删除文件。我设想将每个文件放入冗余文件夹并检查主备份文件夹中是否存在同名文件。如果没有，它会删除冗余文件夹中的文件。这似乎很容易，但我认为我缺乏 VB 知识阻碍了我。

编辑：这将在 Server 2003 上运行。

这是我到目前为止所拥有的：

```
'variables
dim fso1
dim fso2
dim redundantFolder
dim primaryFolder
dim redundantFile
dim primaryFile
dim counter

'creates file system object
Set fso1 = CreateObject("Scripting.FileSystemObject")
set fso2 = CreateObject("Scripting.FileSystemObject")

'sets the folder object to redundant backup folder
Set redundantFolder = fso1.GetFolder("C:\Users\bmcwilliams\Desktop\Dev\TestCompleted")

'sets folder object to primary folder
Set primaryFolder = fso2.getFolder("C:\Users\bmcwilliams\Desktop\Dev\TestUnCompleted")

'deletes files that aren't found in primary folder
For Each redundantFile in redundantFolder
    For Each primaryFile in primaryFolder
        if primaryFile.name == redundantFile.name
            flag = false
            Next 
```

我知道“For Each”代码块中的逻辑是不完整的，完全是错误的，但这是我的小大脑允许我去的。

提前致谢。任何帮助是极大的赞赏。

编辑：这是最终代码。我希望它会对那里的另一个初学者有所帮助：

```
'creates file system object
Set fso1 = CreateObject("Scripting.FileSystemObject")
Set fso2 = CreateObject("Scripting.FileSystemObject")

'sets the folder object to redundant backup folder
Set redundantFolder = fso1.GetFolder("C:\temp\redundant")

'sets folder object to primary folder
Set primaryFolder = fso2.GetFolder("C:\temp\primary")

'deletes files that aren't found in primary folder
For Each redundantFile In redundantFolder.Files
    If Not fso1.FileExists(primaryFolder.Path + "\" + redundantFile.Name) Then
       redundantFile.Delete
    End If
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:20:29.753

```
'creates file system object
Set fso = CreateObject("Scripting.FileSystemObject")

'sets the folder object to redundant backup folder
Set redundantFolder = fso.GetFolder("C:\temp\redundant")

'sets folder object to primary folder
Set primaryFolder = fso.GetFolder("C:\temp\primary")

'deletes files that aren't found in primary folder
For Each redundantFile In redundantFolder.Files
    If Not fso.FileExists(fso.BuildPath(primaryFolder.Path,redundantFile.Name)) Then
       redundantFile.Delete
    End If
Next 
```

# ipad - iOS：UIButton touch up inside 不响应多次按下

> ID：13380329
> 
> 赞同：1
> 
> 时间：2012-11-14T14:04:11.387
> 
> 标签：ipad, uibutton, ibaction, long-press

我有一个 UIButton，其 IBAction 已通过 XIB 文件设置。以下是 IBAction 方法。当我非常快速地多次按下按钮时，最后一次按下此方法只会调用一次。我必须在两次印刷之间再等一会儿。是否有任何类似 UIButton 的长按时间可以减少或任何其他设置以使其响应更快。此按钮与键盘的后退按钮类似，用于删除最后一个字符。我希望它像键盘按钮一样快速响应。谢谢。

```
- (IBAction)deleteButtonPress:(id)sender {
    NSLog(@"Click");
    if(self.numpadTextFiled.text.length > 0)
        self.numpadTextFiled.text = [self.numpadTextFiled.text substringToIndex:   [self.numpadTextFiled.text length]-1];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:11:10.273

按钮是否有机会位于 UIScrollView 中？如果是这样，那么触摸会延迟吗？

# php - 如何使用美国和 ISO 标准从 PHP 中获取日期的周数？

> ID：13380330
> 
> 赞同：1
> 
> 时间：2012-11-14T14:04:13.853
> 
> 标签：php, api

当我尝试从日期获取周数时，我得到的数字与 ISO 和美国标准不同。

```
$date = mktime(0, 0, 0, 01, 01, 2006);
$week = (int)date('W', $date);
echo "Weeknummer: ".$week; 
```

因为 ISO 标准规定该周从星期一开始……美国标准规定该周从星期日开始

如何使用 PHP 代码或一些可用的外部 API 来解决这个问题？有人付过钱吗？

此链接将告诉您如何在线查看此 [http://www.onlineunitconversion.com/day_week_number.html](http://www.onlineunitconversion.com/day_week_number.html)

请帮助...我想获得美国标准周数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:30:20.947

没有明显的方法可以使用 PHP 日期函数本身（我知道）来做你想做的事情，下一个最好的选择是使用一个函数来单独计算你的周数。

```
function week_number($stamp){
    return date('W', $stamp+(60*60*24));
} 
```

[http://codepad.org/IvX9jqEj](http://codepad.org/IvX9jqEj)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:15:51.263

使用`date_default_timezone_set`和定义默认时区。那么你应该有正确的号码..[来自php.net](http://www.php.net/manual/en/function.date-default-timezone-set.php)

# shader - 在 Three.js 中使用带有 ShaderMaterials 的 Collada 模型时模型显示为黑色

> ID：13380332
> 
> 赞同：0
> 
> 时间：2012-11-14T14:04:16.360
> 
> 标签：shader, webgl, three.js, collada

我尝试将 collada 文件（从 Blender 导出）加载到 three.js 场景中，然后用 ShaderMaterial 替换材质。

由于这个 collada 文件中只有一个对象，它位于 collada.scene.children[0]，所以我尝试将材质属性更改为新创建的。我可以轻松地用线框甚至带纹理的 StandardPhongMaterial 替换材质，但是一旦我添加了 ShaderMaterial，模型只会以黑色显示，没有任何照明或纹理。

材料设置如下：

```
materials[0] = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );

var shader = THREE.ShaderUtils.lib[ "normal" ];
var uniforms = THREE.UniformsUtils.clone( shader.uniforms );
uniforms[ "tDiffuse" ].texture = THREE.ImageUtils.loadTexture( "color.png" );
uniforms[ "tNormal" ].texture = THREE.ImageUtils.loadTexture( "normal.png" );
uniforms[ "tSpecular" ].texture = THREE.ImageUtils.loadTexture( "spec.png" );
uniforms[ "enableDiffuse" ].value = true;
uniforms[ "enableSpecular" ].value = true;

materials[1] = new THREE.ShaderMaterial( {
  uniforms: uniforms,
  vertexShader: shader.vertexShader,
  fragmentShader: shader.fragmentShader,
  lights: true
});

var basicTexture = THREE.ImageUtils.loadTexture( "color.png ")
materials[2] = new THREE.MeshPhongMaterial( { map: basicTexture }); 
```

在模型加载时，我将 ShaderMaterial 添加到模型中，然后将其添加到场景中，以便所有必要的属性都可用：

```
loader.load('model.dae', function(collada) {
  model = collada.scene;
  model.scale.x = model.scale.y = model.scale.z = 50;
  model.rotation.y = 180;
  model.updateMatrix();
  model.children[0].material = materials[1];
  model.children[0].geometry.computeTangents();
  scene.add(model);
}); 
```

完整的源代码可在此处获得：[http ://rainbowrangers.de/normalmap/](http://rainbowrangers.de/normalmap/)

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:43:02.263

您使用的是旧格式。它应该是

制服[“tDiffuse”].value = THREE.ImageUtils.loadTexture(“color.png”);

请参阅three.js Wiki 上的迁移帖子：[https ://github.com/mrdoob/three.js/wiki/Migration](https://github.com/mrdoob/three.js/wiki/Migration)

> 纹理统一更改：现在自动分配纹理单元，纹理对象转到值属性而不是纹理一 { type: "t", value: 0, texture: map } => { type: "t", value: map }

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2022-01-12T12:07:24.013

你需要去：编辑对象，选择（按a）然后去Mesh--> Normals-->Reset Vectors。

# php - 如何在使用 ajax 调用后运行 java 脚本文件并附加到输出

> ID：13380334
> 
> 赞同：0
> 
> 时间：2012-11-14T14:04:18.170
> 
> 标签：php, javascript, json, jquery

我对通过 AJAX 调用运行的 javascript 文件的问题是

例如 ：

索引.php

```
$(function(){
$(".btn-ajax").click(function(){
$.getJSON('ajax.php',function(data){

jsInc(data['js'][0]['src']);

$("#response").html(data['html']);

});
});

function jsInc($src){
 var head = document.getElementsByTagName("head")[0];
            var script=document.createElement("script");
            script.type='text/javascript';
            script.src = $src;
            head.appendChild(script);
} 
```

ajax.php

```
$arr['js'][] = array('src'=>'js.js');
$arr['html'] = '<input type="button" class="btn" value="show message"/>';

echo json_encode($arr); 
```

js.js

```
$(function(){

$(".btn").on('click',function(){
    alert("test !");
    });

}); 
```

但是当执行 ajax 请求并将输入按钮附加到 index.php 文件时，此按钮单击事件不起作用！

请帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:05:50.373

您想通过 AJAX 获取脚本吗？您可以使用[`$.getScript`](http://api.jquery.com/jQuery.getScript/)：

```
$.getScript("script.js"); 
```

> 使用 GET HTTP 请求从服务器加载 JavaScript 文件，然后执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:19:53.560

尝试在 Ajax 调用后重新绑定 click 函数（成功）：

```
$.ajax({... 
       success: function(data) {
           $(".btn").click(clickFunction);
           } 
});

$(".btn").on('click', clickFunction);

function clickFunction() {
    alert("test !");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:13:30.320

我认为发生的事情是您首先加载绑定点击侦听器的 JS，然后加载按钮。所以听众不会被束缚

尝试颠倒顺序，如：

```
$("#response").html(data['html']);
jsInc(data['js'][0]['src']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T14:29:59.303

您需要将 js.js 中的函数更改为委托函数。

```
$(function(){

$('body').on('click','.btn',function(){
    alert("test !");
    });

}); 
```

当你这样做时。.btn 元素甚至不需要在脚本运行之前出现。在检查 .btn 元素是否存在之前，它会将事件附加到正文标记。

# android - SharedPreferences 验证

> ID：13380341
> 
> 赞同：2
> 
> 时间：2012-11-14T14:04:50.297
> 
> 标签：android, sharedpreferences, android-edittext, edittextpreference

我对android dev有点陌生。我的应用程序上有一个首选项屏幕，其中包含一堆 EditTextPreference 和复选框首选项。我有兴趣对edittextpreference 的输入进行验证。使用android似乎没有办法做到这一点，所以我开发了一个扩展edittextpreference的类。

例如，我有一个文本首选项，它的有效范围只有 0 到 1。文本首选项可以接受任何数字，但我需要在设置之前对其进行验证。

我正在覆盖 setText 方法，并在实际设置值之前尝试在那里进行验证。SetText 只传入文本字符串，我怎么知道我要验证什么？我怎样才能得到这些信息？换句话说，我想重用我的类来验证我所有的文本首选项，并且我希望首选项本身告诉我它是什么类型，或者它的范围是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T08:39:24.733

```
 Preference pref = findPreference("OutputFolder");

             pref.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

             @Override
             public boolean onPreferenceChange(Preference preference,
                     Object newValue) {

                              // Do the validation here

                 }
                 return true;
             }

           }); 
```

# java - 是否可以将弹簧模型对象作为弹簧形式的值？

> ID：13380346
> 
> 赞同：1
> 
> 时间：2012-11-14T14:05:01.853
> 
> 标签：java, javascript, jquery, spring, spring-mvc

我基本上有以下jsp，它检索弹簧模型广告列表$ {myAdverts}附带的广告对象。

我希望当单击其中一个时，将发布请求提交回我的控制器，但带有广告对象的实例。这有可能吗？

这是我的 JSP 代码：

```
<xc:forEach var="advertisement" items="${myAdverts}" varStatus="stats">
    <li>

    <a class="furtherinfo-link" onclick="javascript:submitJoin(${stats.count})" >${advertisement.getName()}</a>
    </li>
</xc:forEach>
<form:form id="myform" method="POST" action="form_submit.html" commandName="myForm" name="MyForm">
 <form:input id="advertisementObj" path="advertisementObj" type="hidden"/>
 </form:form> 
```

这是我尝试用 javascript 发回帖子，灵感来自 Spring MVC 和 javascript 中自动填充列表的处理：

javascript代码

```
 <script src="js/webmenu_nav.js"></script>

<script type="text/javascript">
      function submitJoin(position){
        $('#advertisementObj').val("myAdverts["+position+"]");

        document.MyForm.submit();
      }

</script> 
```

该代码的当前行为是，我的 Controller 对象中的 post 方法总是得到一个空的 AdvertisementObj。

控制器对象非常简单，但以防万一它是其代码的一部分：

```
@Controller
public class MyController {

@RequestMapping(value="/show_advertisements.html",method = RequestMethod.GET)
public ModelAndView showAdv(@RequestParam(value="response", required=false) String incomingResponse) {

    Map<String, Object> model = new HashMap<String, Object>();
    model.put("response", incomingResponse);

    List<AdvertisementRecord> adverts = methodThatReturnsList();
    model.put("myAdverts", adverts);

    MyForm jform = new MyForm();
    model.put("myForm", jform);

    return new ModelAndView("show_advertisements", model) ;
}

@RequestMapping(value = "/form_submit.html", method = RequestMethod.POST)
public ModelAndView formSubmit(MyForm myForm,  BindingResult result, Map model){

    if(null != myForm.getAdvertisement())
        return showPage("adver " + myForm.getAdvertisement().getId());
    else
        return showPage("null advertisement on join");

}

 } 
```

**解决方案！！**

解决方案代码片段

JSP代码：

```
<xc:forEach var="advertisement" items="${myAdverts}" varStatus="stats">
    <li>
    <a class="furtherinfo-link" onclick="javascript:submitForm(${stats.count})" >${advertisement.getName()}</a>
    </li>
</xc:forEach>
<form:form method="POST" id="theForm" action="form_submit.html" modelAttribute="myAdverts" name="MyForm">
</form:form> 
```

javascript:

```
<script src="js/webmenu_nav.js"></script>

    <script type="text/javascript">
          function submitForm(position){
           $('#theForm').attr("action","form_submit.html?position="+position);

            document.MyForm.submit();
          }

    </script>

</head> 
```

控制器：

```
 @Controller
 @SessionAttributes("myAdverts")
public class MyController {

@RequestMapping(value="/show_advertisements.html",method = RequestMethod.GET)
public ModelAndView showAdv(@RequestParam(value="response", required=false) String incomingResponse) {

    Map<String, Object> model = new HashMap<String, Object>();
    model.put("response", incomingResponse);

    List<AdvertisementRecord> adverts = methodThatReturnsList();
    model.put("myAdverts", adverts);

    //MyForm jform = new MyForm();
    //model.put("myForm", jform);

    return new ModelAndView("show_advertisements", model) ;
}

@RequestMapping(value = "/form_submit.html", method = RequestMethod.POST)
public ModelAndView formSubmit(@RequestParam("position") final int position, @ModelAttribute("adverts") @Valid List<AdvertisementRecord> adverts,  BindingResult result, Map model){

    if(null != adverts && null != adverts.get(position))
        return showPage("adver " + adverts.get(position).getId());
    else
        return showPage("null advertisement ");

}

 } 
```

请注意上面的代码，在我调用“form_submit.html?position="+position" 时，将请求参数放在签名中很重要

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:24:43.393

默认情况下，您放入模型中的对象仅适用于当前请求。这意味着您的`myAdverts`列表在第二个请求（即 POST 请求）中不再存在。但是，您可以使用`@SessionAttribute`注释告诉 spring mvc 将对象存储在 http-session 中，以便您可以在进一步的请求中访问它们。

您的控制器可能如下所示：

```
@Controller
@SessionAttributes("myAdverts")
public class MyController {
    @RequestMapping(value="...", method=RequestMethod.GET)
    public void get(ModelMap model){
        List myAdverts = // get your list of adverts.
        model.put("myAdverts", myAdverts)
    }

    @RequestMapping(value="...", method=RequestMethod.POST)
    public void post(@RequestParam("position") final int position, @ModelAttribute("myAdverts") List myAdverts,SessionStatus sessionStatus){
        myAdverts.get(position);
        // ...

        // tell spring to remove myAdverts from session
        sessionStatus.setComplete();
    }
} 
```

更多信息`@SessionAttribute`请看[这里](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-sessionattrib)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:53:19.147

如果广告具有某种唯一 id 并存储在 DAO 中（或者有另一种从 id 获取广告的方法），您可以实现一个转换器，该转换器将采用 String 参数并将其转换回广告

```
public class StringToAdvertisementConverter implements Converter<String, Advertisement> {

    private AdvertisementRepository advertisementRepository

    @Autowired
    public setAdvertisementRepository(AdvertisementRepository repository){
        this.advertisementRepositort = repository;
    }

    @Override
    public Advertisement convert(String id) { 

         return advertisementRepository.lookup(id);
    }

} 
```

在转换服务中注册转换器后

```
<mvc:annotation-driven conversion-service="conversionService"/>

<bean id="conversionService"
      class="org.springframework.format.support.FormattingConversionServiceFactoryBean">
    <property name="converters">
        <set>
            <bean class="my.StringToAdvertisementConverter"/>
        </set>
    </property> 
```

您的控制器将能够接受 Advertisement 类作为`@RequestParam`和类似注释的参数：

```
 @RequestMapping(method = RequestMethod.POST, value = "/SomeMapping")
    public String handleSomething(@RequestParam(required = false) Advertisement advert,
        ModelMap model) {} 
```

作为替代方案，您可以使用 PropertyEditors 获得相同的结果，[关于主题的一个很好的问题](https://stackoverflow.com/questions/12544479/spring-mvc-type-conversion-propertyeditor-or-converter)有很多指向 Spring 文档的链接。

# typo3 - 外部 TypoScript 修改后，TYPO3 不会更新前端页面

> ID：13380350
> 
> 赞同：0
> 
> 时间：2012-11-14T14:05:37.987
> 
> 标签：typo3

我正在尝试`.ts`通过`Quixplorer`.

我点击编辑，添加链接并点击保存。但它不会在实际页面上更新。

当我单击文件中的预览时，`Quixplorer`我可以看到我的更改，但它不会显示在主页上...

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:17:19.347

在编辑`*.ts`文件时，总是需要从后端清除整个缓存，以考虑更改。

还要确保您正在修改正确的文件。经常出现的错误是编辑未包含在 DB TS 模板中的文件。您可以使用模块验证这一点`Template`（在缓存清除后）。

# asp.net-mvc-3 - 扩展/覆盖 jquery.ajax.done 函数以检测 .net 登录屏幕

> ID：13380356
> 
> 赞同：0
> 
> 时间：2012-11-14T14:05:48.367
> 
> 标签：asp.net-mvc-3, jquery

我在 asp.net MVC 应用程序上使用表单身份验证，并使用 jquery 和 ajax 创建丰富的用户界面。一些用户倾向于将页面打开数小时，并且他们的登录会话按预期到期。如果用户单击链接或重新加载页面，则会按预期返回登录屏幕。如果他们单击按钮或触发 ajax 调用，则 ajax 调用将返回登录 html 而不是预期的 html 或 JASON 结果。导致页面出现半个登录屏幕的混乱页面。

因为我已经编写了很多 ajax 调用，所以我想我可以扩展或覆盖默认的 .done 事件，以在继续我编写的任何事件之前添加对登录屏幕的检查。

例如我有这个功能：

```
function CallAjax() {
    $.ajax({type: "GET", url: "foo" })
     .done(function (data) { $('#result').val(data); });
} 
```

是否可以覆盖 .done 的默认实现，以便在不重写此函数的情况下进行检查？我的检查可能会查看结果是否为 html 响应，如果是，则搜索“登录”以查看其是否为登录页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:33:56.943

我建议您按照 Phil Haack 的解释扩展 ASP.NET 表单身份验证模块，[`this blog post`](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)以便在使用 AJAX 请求时不再重定向到登录页面，而是返回 401 HTTP 状态代码。然后您可以简单地使用`.fail`回调并拦截 401 状态代码。在这种`.done`情况下不会调用处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:19:25.730

我尝试了达林的建议，但经过数小时的尝试，我无法让它在我的设置中发挥作用。然而，我偶然发现了这个相当简单的解决方案，它第一次对我有用：

只需将其添加到 global.asax

```
protected void Application_EndRequest()
{
    var context = new HttpContextWrapper(this.Context);

    if (FormsAuthentication.IsEnabled && 
        context.Response.StatusCode == 302 &&
        context.Request.IsAjaxRequest())
        {
            context.Response.Clear();
            context.Response.StatusCode = 401;
        }
    }
} 
```

取自[http://jvance.com/blog/2012/09/21/FixFormsAuthentication302.xhtml](http://jvance.com/blog/2012/09/21/FixFormsAuthentication302.xhtml)

# objective-c - 查找字谜的算法 Objective-C

> ID：13380359
> 
> 赞同：3
> 
> 时间：2012-11-14T14:05:50.413
> 
> 标签：objective-c, algorithm, nsdictionary, anagram

我有一个算法可以在一组八个字母的单词中找到字谜。实际上，它是将较长单词中的字母按字母顺序排列，对较短的单词一个接一个地执行相同的操作，并查看它们是否存在于较长的单词中，如下所示：

`tower = eortw` `two = otw` `rot = ort`

这里的问题是，如果我`ort`在里面寻找`eortw`（或在塔中腐烂），它会找到它，没问题。腐烂在塔内被发现。但是，`otw`不在里面`eortw`（或两个在塔中），因为中间有 R。因此，它认为在塔中找不到两个。

有没有更好的方法可以做到这一点？我正在尝试在 Objective-C 中执行此操作，并且八个字母的单词和常规单词都存储在`NSDictionaries`（以其正常和按字母顺序排列的形式）中。

我看过其他各种帖子。StackOverflow 上的字谜，但似乎没有一个解决这个特定问题。

这是我到目前为止所拥有的：

```
- (BOOL) doesEightLetterWord: (NSString* )haystack containWord: (NSString *)needle {
    for (int i = 0; i < [needle length] + 1; i++) {
        if (!needle) {
            NSLog(@"DONE!");
        }

        NSString *currentCharacter = [needle substringWithRange:NSMakeRange(i, 1)];
        NSCharacterSet *set = [NSCharacterSet characterSetWithCharactersInString: currentCharacter];
        NSLog(@"Current character is %@", currentCharacter);
        if ([haystack rangeOfCharacterFromSet:set].location == NSNotFound) {
            NSLog(@"The letter %@ isn't found in the word %@", currentCharacter,    haystack);
            return FALSE;
        } else {
            NSLog(@"The letter %@ is found in the word %@", currentCharacter, haystack);
            int currentLocation = [haystack rangeOfCharacterFromSet: set].location;
            currentLocation++;    
            NSString *newHaystack = [haystack substringFromIndex: currentLocation];
            NSString *newNeedle = [needle substringFromIndex: i + 1];
            NSLog(@"newHaystack is %@", newHaystack);
            NSLog(@"newNeedle is %@", newNeedle);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:17:43.837

如果您仅使用部分字母，则它不是真正的字谜。

在您的情况下，一个好的算法是获取已排序的字符串并逐字母比较它们，跳过较长单词中的不匹配。如果您到达较短单词的末尾，那么您有一个匹配项：

```
char *p1 = shorter_word;
char *p2 = longer_word;
int match = TRUE;
for (;*p1; p1++) {
  while (*p2 && (*p2 != *p1)) {
    p2++;
  }
  if (!*p2) {
    /* Letters of shorter word are not contained in longer word */
    match = FALSE;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:24:02.183

这是我可能会采用的一种方法来确定一个有序词是否包含另一个有序词的所有字母。请注意，它不会找到真正的字谜（这只需要两个有序字符串相同），但这符合我认为您所要求的：

```
+(BOOL) does: (NSString* )longWord contain: (NSString *)shortWord {
    NSString *haystack = [longWord copy];
    NSString *needle = [shortWord copy];
    while([haystack length] > 0 && [needle length] > 0) {
        NSCharacterSet *set = [NSCharacterSet characterSetWithCharactersInString: [needle substringToIndex:1]];
        if ([haystack rangeOfCharacterFromSet:set].location == NSNotFound) {
            return NO;
        }
        haystack = [haystack substringFromIndex: [haystack rangeOfCharacterFromSet: set].location+1];
        needle = [needle substringFromIndex: 1];
    }

    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T19:41:52.510

最简单（但不是最有效）的方法可能是使用`NSCountedSet`. 我们可以这样做，因为对于计数集，`[a isSubsetOfSet:b]`当且仅当`[a countForObject:object] <= [b countForObject:object]`for each `object`in时才返回 YES `a`。

让我们添加一个类别来`NSString`做到这一点：

```
@interface NSString (lukech_superset)

- (BOOL)lukech_isSupersetOfString:(NSString *)needle;

@end

@implementation NSString (lukech_superset)

- (NSCountedSet *)lukech_countedSetOfCharacters {
    NSCountedSet *set = [NSCountedSet set];
    [self enumerateSubstringsInRange:NSMakeRange(0, self.length) options:NSStringEnumerationByComposedCharacterSequences usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
        [set addObject:substring];
    }];
    return set;
}

- (BOOL)lukech_isSupersetOfString:(NSString *)needle {
    return [[needle lukech_countedSetOfCharacters] isSubsetOfSet:[self lukech_countedSetOfCharacters]];
}

@end 
```

# javascript - 删除没有 id 的 div 元素

> ID：13380363
> 
> 赞同：0
> 
> 时间：2012-11-14T14:05:56.277
> 
> 标签：javascript, html

如何找到`<div>`没有 id 的标签？

这是我的标记：

```
<body>
    <div>this is a text</div>
</body> 
```

`div`这是我用来向页面添加 s 的JavaScript ：

```
var show = function () {
    var htmlNode = document.createElement('DIV');
    document.body.insertBefore(htmlNode, document.body.childNodes[0]);
    htmlNode.innerHTML = 'this is a text';
 };

 if (window.addEventListener) {
     window.addEventListener("load", show, true);
 } else {

 }        

 window.attachEvent("onload", show); 
```

页面加载后如何删除？通过将 JavaScript 放在页面底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:08:48.700

如果您保留`htmlNode`手柄，则您已经有了移除元素的路线。

```
document.body.removeChild(htmlNode); 
```

您只需`htmlNode`要将变量置于函数共享的范围内，`show`并且您编写的函数将其删除：

```
var htmlNode;

var show = function () {
    htmlNode = document.createElement('DIV');
    document.body.insertBefore(htmlNode, document.body.childNodes[0]);
    htmlNode.innerHTML = 'this is a text';
};

var hide = function () {
    document.body.removeChild(htmlNode);
}; 
```

或者，你可以给它一个 id...

```
htmlNode = document.createElement('DIV');
htmlNode.id = 'MyElementId'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:21:40.733

使用 jQuery：

```
$('DIV:not([id])').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:11:28.417

您是要删除仅此一个 DIV，还是删除任何没有 ID 的 DIV？

如果您尝试删除所有没有 ID 的 DIV，请使用 getElementsByTagName('div') 检索所有 DIV，遍历它们并检查是否缺少 ID 属性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-14T14:10:30.777

`document.body.childNodes[0].removeChild();`

# asp.net-mvc - 在 OnResultExecuted 过滤器中获取 ViewBag

> ID：13380365
> 
> 赞同：1
> 
> 时间：2012-11-14T14:06:04.997
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我想进入`ViewBag`过滤`OnResultExecuted`器。两个都

```
((ViewResultBase)filterContext.Result).ViewBag.Get 
```

和

```
filterContext.Controller.ViewBag.Get 
```

返回`ViewBag`在操作中分配。但我想`ViewBag`在“view.cshtml”获得分配。
我想要实现的是`ViewBag`从 razor 获得 .Title

```
@{
ViewBag.Title = "My Title";
} 
```

然后，将其作为 javascript 写入响应文本的末尾。这在某些情况下很有用`@Ajax.ActionLink()`。我的`OnActionExecuted`过滤器代码必须是这样的：

```
string scriptText = "<script type='text/javascript'>document.title = '" + ViewBag.Title + "';</script>";
filterContext.HttpContext.Response.Write(scriptText); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:28:01.500

您不能将值从视图传递到控制器。它基本上是违反 MVC 模式的。当视图被执行时，它会获得自己的`ViewData`( `ViewBag`) 副本，因此对它的任何更改仅在视图范围内有效。

**来自 Scott Guthrie 的博客：**

> 视图不应包含任何应用程序逻辑或数据库检索代码，而是所有应用程序/数据逻辑应仅由控制器类处理。这种分区背后的动机是帮助强制将应用程序/数据逻辑与 UI 生成代码明确分离。这使得在与 UI 呈现逻辑隔离的情况下对应用程序/数据逻辑进行单元测试变得更加容易。
> 
> 视图应该只使用控制器类传递给它的视图特定数据来呈现它们的输出。在 ASP.NET MVC 框架中，我们将此视图特定数据称为“ViewData”。这篇博文的其余部分将介绍一些不同的方法，您可以使用这些方法将这个“ViewData”从 Controller 传递到 View 以进行渲染。

[http://weblogs.asp.net/scottgu/archive/2007/12/06/asp-net-mvc-framework-part-3-passing-viewdata-from-controllers-to-views.aspx](http://weblogs.asp.net/scottgu/archive/2007/12/06/asp-net-mvc-framework-part-3-passing-viewdata-from-controllers-to-views.aspx)

带有解释的类似问题也在这里：[Setting ViewData item in a Partial to be read in a View](https://stackoverflow.com/questions/1131160/setting-viewdata-item-in-a-partial-to-be-read-in-a-view)

所以更接近你的问题。您不能将 Title 的值传递给您的操作执行过滤器，您必须在控制器范围内解决它。

# asp.net - CDN 上的 ASP.NET 主题

> ID：13380373
> 
> 赞同：0
> 
> 时间：2012-11-14T14:07:08.997
> 
> 标签：asp.net, azure, amazon-web-services, themes, cdn

我们希望将 .NET 主题分发到云端边缘。

但是，我通过 Google 和帮助文件的研究告诉我，ASP.NET 主题 (App_Themes) 必须从 Web 服务器文件夹的物理子文件夹或 IIS 虚拟目录提供；ergo：无法从 CDN 提供主题（我们目前使用 AWS）。这似乎是一个重大失败，我希望我会因为没有正确研究而受到抨击，但我不得不问：

**有人知道从不同的服务器（和 URI）提供 ASP.NET 主题的方法，而不是使用主题的 Web 应用程序吗？**

（Windows Azure 可能是一种可能性，如果它是实现此目的的 /the_only 方法。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:36:34.380

使用主题和皮肤主要是为服务器控件设置样式。那么在 CDN 中存在主题文件是没有意义的，因为它们是由服务器处理的。

> ## 主题与级联样式表
> 
> 主题类似于级联样式表，因为主题和样式表都定义了一组可以应用于任何页面的通用属性。但是，主题在以下方面与样式表不同：
> 
> *   主题可以定义控件或页面的许多属性，而不仅仅是样式属性。例如，使用主题，您可以指定 TreeView 控件的图形、GridView 控件的模板布局等。
> *   主题可以包括图形。
> *   主题不像样式表那样级联。默认情况下，由页面的 Theme 属性引用的主题中定义的任何属性值都会覆盖在控件上以声明方式设置的属性值，除非您使用 StyleSheetTheme 属性显式应用主题。有关详细信息，请参阅上面的主题设置优先级部分。
> *   每个页面只能应用一个主题。您不能将多个主题应用于页面，这与可以应用多个样式表的样式表不同。

来源：[ASP.NET 主题和皮肤](http://msdn.microsoft.com/en-us/library/ykzx33wh%28v=vs.100%29.aspx)

# android - 如何将图标添加到操作选项卡

> ID：13380381
> 
> 赞同：-1
> 
> 时间：2012-11-14T14:07:28.067
> 
> 标签：android

嗨，我完全按照下面的教程进行操作，现在我想知道如何为每个选项卡添加一个图标？我只知道如何将图标添加到菜单而不是选项卡。另外我是android新手，所以如果有人能告诉我应该去**哪里**，那就太棒了。`android:icon="@drawable/ic_action_view_as_list"`

现在它只是添加带有参数的文本，`ActionBar.Tab tabB = bar.newTab().setText("Summary");`但我也希望例如 tabB 有`android:icon="@drawable/ic_action_view_as_list"`

[这是教程](http://www.youtube.com/watch?v=gMu8XhxUBl8)

[和这里](http://www.abelski.com/courses/android3ui/actionbar.pdf)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:17:18.347

使用[ActionBarSherlock](http://actionbarsherlock.com/)

```
public class MainActivity extends SherlockFragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        actionBar.setDisplayShowTitleEnabled(true);

        Tab tab = actionBar.newTab()
                .setText("Android")
                .setTabListener(new AndroidFragment())
                .setIcon(R.drawable.android);

        actionBar.addTab(tab);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:22:28.390

你可以这样做：

```
ActionBar.Tab tabB = bar.newTab()
.setText("Summary")
.setIcon(R.drawable.ic_action_view_as_list);; 
```

# javascript - 使用 moo 工具的 Fx.Slide 操作许多滑动对象的最佳方法

> ID：13380382
> 
> 赞同：1
> 
> 时间：2012-11-14T14:07:30.737
> 
> 标签：javascript, loops, mootools, slide

我试图想出最优雅的解决方案来处理 mootools 中的多个 Fx.Slides。我正在开发一个字典页面，其中包含很长的单词列表，其中有一对单词 - 翻译，默认情况下必须隐藏所有翻译，只显示一个单词列表。我正在寻找一种不需要为页面上的每个单词创建单独的幻灯片的解决方案，以便在访问者单击单词时即时创建它们，因为脚本的大小和性能受到影响关心我。还有一个问题是它们的初始状态必须事先设置为“隐藏”，我不想在 CSS 中这样做（这会对浏览器不支持 javascript 的人隐藏所有内容）。这种事情有可能吗，还是我必须依靠循环创建幻灯片（我的元素 ID 类似于 w01、w02、...）？如果是这样，我将如何将该块放入循环中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:36:52.407

查看有关用户是否没有[带有 noscript 的 Javascript Embedding 额外样式的](https://stackoverflow.com/questions/218162/embedding-extra-styles-with-noscript)问题。

处理好之后，我们可以专注于 mootools。您希望元素在`visability: hidden`使用 Javascript 加载页面时具有。给你的元素一个类，这样我们就可以一次选择它们。初始化元素的示例。

```
$$('.sliders').each(function(el) {
    el.slide('hide').setStyle('visibility', 'visible');
}); 
```

现在我们需要处理点击事件。这里也是一样。

示例 html：

```
<h3 class="slideIn" >Some title</h3>
<div class="sliders>Some lengthy text<div> 
```

示例 html：

```
$$('.slideIn').addEvent('click', function() {
    this.getNext().getChildren('.sliders').slide();
}); 
```

​ 小提琴示例：http: [//jsfiddle.net/b4Zjs/](http://jsfiddle.net/b4Zjs/)

编辑：如果有很多元素应该有点击事件，最好使用事件委托。然后，您只需向页面添加一个事件侦听器，并且有时会产生巨大的影响。

```
$('parent').addEvent('click:relay(h3.slideIn)', function(event, target) {
   target.getNext().getChildren('.sliders').slide();
}); 
```

jsFiddle 示例：http: [//jsfiddle.net/b4Zjs/2/](http://jsfiddle.net/b4Zjs/2/)

# linux - lvcreate 在物理卷上做什么？它会删除数据吗？

> ID：13380384
> 
> 赞同：0
> 
> 时间：2012-11-14T14:07:50.937
> 
> 标签：linux, system, sysadmin, hard-drive, lvm

基于[http://www.centos.org/docs/5/html/5.2/Cluster_Logical_Volume_Manager/create_linear_volumes.html](http://www.centos.org/docs/5/html/5.2/Cluster_Logical_Volume_Manager/create_linear_volumes.html) “当你创建一个逻辑卷时，逻辑卷是使用物理卷上的空闲区从一个卷组中分割出来的“

我怀疑是否在具有现有数据的物理卷上创建逻辑卷，lvcreate 命令将根据此语句“修改逻辑卷释放并重新分配物理卷中的空间”删除数据库。

我正在尝试恢复我的逻辑卷并将其安装到服务器上。我在另一个问题（http://stackoverflow.com/questions/13356555/how-to-mount-logical-volume）中说明了我的整个问题。

希望你们能帮助我。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:14:07.293

lvm 是安装在物理块分配设备之上的逻辑层。它允许您基本上跨多个物理磁盘扩展您的卷。

这是对块设备进行分区的一种特殊方式，所以是的，它接管了如何在更高级别管理这些磁盘，然后是物理卷。

如果您不只是调整大小，LVCREATE 将断开物理卷上的数据与逻辑层的连接。（我会小心你有备份）

如果您失去了对您的 LV 的控制，即破坏了一个表条目，您仍然可以强制安装卷 RO 并可能恢复内容。您也可以修复有问题的卷。

如果您失去了与数据的联系，您还可以将每个磁盘完全映像到暂存介质作为文件，以恢复阵列或逻辑卷中丢失的任何数据。

这样，您可以运行多次通过或修复尝试。

为此，您必须停止 lv 和 mdadm 并在系统中卸载驱动器。

如果您需要进一步说明如何对驱动器进行映像，请告诉我。

# svn - 在 svn post hook 中使用 svnlook proplist / propget

> ID：13380386
> 
> 赞同：2
> 
> 时间：2012-11-14T14:08:08.190
> 
> 标签：svn, svn-hooks

我使用以下方法向我的 SVN 添加了一个属性：

```
svn propset MyProp "MyValue" . 
```

我确实做到了：

```
svn ci -m "add some prop stuff..." 
```

但现在我尝试在提交后挂钩中读取此属性：

```
/usr/bin/svnlook proplist $1 -t $2 --verbose . 
```

但我得到的只是：什么都没有。那里有什么问题？应该有财产...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T03:58:02.287

在 post-commit 钩子中，您已经进行了修订，而不是事务

# php - 以两步转换数组

> ID：13380387
> 
> 赞同：0
> 
> 时间：2012-11-14T14:08:12.077
> 
> 标签：php, arrays

假设我有一个如下所示的数组：

```
array(100) {
  [0]=>
  array(4) {
    ["player_id"]=>
    string(2) "jk"
    ["date"]=>
    string(10) "2012-11-07"
    ["hits"]=>
    string(4) "1000"
  }
  [1]=>
  array(4) {
    ["player_id"]=>
    string(2) "jk"
    ["date"]=>
    string(10) "2012-11-14"
    ["hits"]=>
    string(4) "2000"
  }
 [2]=>
  array(4) {
    ["player_id"]=>
    string(2) "mc"
    ["date"]=>
    string(10) "2012-11-14"
    ["hits"]=>
    string(4) "1500"
  }
 [3]=>
  array(4) {
    ["player_id"]=>
    string(2) "mc"
    ["date"]=>
    string(10) "2012-11-07"
    ["hits"]=>
    string(4) "2300"
  } 
```

...

这种情况还在继续。所以，基本上我有几个球员，每个球员我有两个约会。我想最终有一个这样的数组：

```
array(100) {
      ["jk"]=>
      array(2) {
        ["hits_today"]=>
        string(4) "1000"
        ["hits_difference"]=>
        string(5) "-1000"
      }
     ["mc"]=>
      array(2) {
        ["hits_today"]=>
        string(4) "1500"
        ["hits_difference"]=>
        string(4) "-800"
      }
    .. 
```

基本上我想处理第一个数组，知道对于每个玩家我（可能）有两个值，并创建一个数组数组，作为键使用 player_id 和作为组件，这两个值之间的差异与今天的值。

我的担忧是：

*   处理第一个数组的最佳方法是什么？
*   如果今天的价值不存在，或者明天的价值不存在，我将如何管理？在处理数组时如何控制它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:25:03.970

我需要在输出数组中保留日期，以确定当前计算的日期是 > 还是 < 已经存在的日期，但这是我想出的解决方案：

```
$array = array(
    array("player_id" => "jk", "date" => "2012-11-07", "hits" => "1000"),
    array("player_id" => "jk", "date" => "2012-11-14", "hits" => "2000"),
    array("player_id" => "mc", "date" => "2012-11-14", "hits" => "1500"),
    array("player_id" => "mc", "date" => "2012-11-07", "hits" => "2300")
);

$output = array();
foreach($array as $k=>$v){
    if(!isset($output[$v['player_id']])){
        $output[$v['player_id']]['hits_today'] = $v['hits'];
        $output[$v['player_id']]['hits_difference'] = 0;
        $output[$v['player_id']]['date'] = $v['date'];
    }elseif($v['date'] < $output[$v['player_id']]['date']){
        $output[$v['player_id']]['hits_difference'] = $output[$v['player_id']]['hits_today'] - $v['hits'];
    }elseif($v['date'] > $output[$v['player_id']]['date']){
        $output[$v['player_id']]['hits_difference'] = $output[$v['player_id']]['hits_today'] - $v['hits'];
        $output[$v['player_id']]['hits_today'] = $v['hits'];
        $output[$v['player_id']]['date'] = $v['date'];
    }
}
echo '<pre>';
print_r($output);
echo '</pre>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:25:08.047

如果这来自查询，我会这样做：

```
SELECT player_id,
SUM(IF(`date`='$yesterday', hits, 0)) AS hits_yesterday,
SUM(IF(`date`='$today', hits, 0)) AS hits_today
FROM ...
GROUP BY player_id 
```

# javascript - JavaScript - 可以期待什么级别的代码优化？

> ID：13380390
> 
> 赞同：2
> 
> 时间：2012-11-14T14:08:33.687
> 
> 标签：javascript, optimization, performance

因此，我对 JavaScript 编码相当陌生，尽管对一般编码而言并不陌生。在编写源代码时，我通常会考虑我的代码将在其中运行的环境（例如某种虚拟机） - 以及*可以预期的代码优化级别*。(1)

例如，在 Java 中，我可能会写这样的东西，

```
Foo foo = FooFactory.getFoo(Bar.someStaticStuff("qux","gak",42);
blub.doSomethingImportantWithAFooObject(foo); 
```

即使该`foo`对象仅在该位置使用（因此引入了不必要的变量声明）。首先，我认为上面的代码比内联版本更易读

```
blub.doSomethingImportantWithAFooObject(FooFactory.getFoo(Bar.someStaticStuff("qux","gak",42)); 
```

其次，我知道 Java 编译器代码优化无论如何都会处理这个问题，即实际的 Java VM 代码最终会被内联 - 所以在性能方面，两者之间没有区别。(2)

现在到我的实际**问题**：
*我通常可以在 JavaScript 中期望什么级别的代码优化？*

我认为这取决于 JavaScript 引擎——但由于我的代码最终会在许多不同的浏览器中运行，所以我们只做最坏的假设，看看最坏的情况。我可以期待适度的代码优化吗？我还需要担心哪些情况？

* * *

(1) 我确实意识到找到好的/最好的算法和编写组织良好的代码比一些代码优化更重要，并且对性能的影响更大。但这将是一个不同的问题。

(2) 现在，我意识到没有优化的实际差异很小。但那是无关紧要的。有一些很容易优化的功能非常有效，我只是懒得写一个。想象一下上面的代码片段在一个`for`被称为 100'000 次的循环中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:38:37.423

不要对优化抱太大希望，不会有

*   尾递归优化，
*   循环展开，
*   内联函数
*   *ETC*

由于客户端上的 javascript 不是为执行繁重的 CPU 工作而设计的，因此优化不会产生巨大的影响。

编写高性能 javascript 代码有一些指导方针，大多数是次要的和技术性的，例如：

*   不使用`eval()`,`arguments.callee`等某些函数，这将阻止 js 引擎生成高性能代码。
*   使用原生特性而不是手写特性，比如不要编写自己的容器、json 解析器等。
*   使用局部变量而不是全局变量。
*   永远不要对数组使用 for-each 循环。
*   使用`parseInt()`而不是`Math.floor`.
*   并远离 jQuery。

所有这些技术更像是经验的东西，背后可能有一些合理的解释。因此，您将不得不花一些时间搜索或尝试[使用 jsPerf](http://jsperf.com)来帮助您确定哪种方法更好。

当你发布代码时，使用[闭包编译器](https://developers.google.com/closure/compiler/)来处理死分支和不必要的变量，这不会大大提高你的性能，但会让你的代码更小。

一般来说，最终的性能很大程度上取决于你的代码组织得有多好，你的算法设计得有多仔细，而不是优化器的表现如何。

* * *

以上面的示例为例（假设`FooFactory.getFoo()`and`Bar.someStaticStuff("qux","gak",42)`总是返回相同的结果，并且`Bar`,`FooFactory`是无状态的，`someStaticStuff()`并且`getFoo()`不会改变任何东西。）

```
for (int i = 0; i < 10000000; i++)
  blub.doSomethingImportantWithAFooObject(
      FooFactory.getFoo(Bar.someStaticStuff("qux","gak",42)); 
```

即使带有 -O3 标志的 g++ 也无法使该代码更快，因为编译器无法判断是否是`Bar`无`FooFactory`状态的。因此，任何语言都应避免使用此类代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:15:05.747

你是对的，不同的 JS VM 的优化水平是不同的。但！有一种解决方法。有几种工具可以为您优化/最小化您的代码。最受欢迎的之一是谷歌。它被称为闭包编译器。你可以试试[网络版本](http://closure-compiler.appspot.com/home)，还有一个用于构建脚本等的命令行版本。除此之外，我不会尝试优化，因为毕竟 Javascript 有点快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:36:25.477

一般来说，我认为除非你的代码真的很脏（让你的所有变量都在全局范围内，创建大量 DOM 对象，对非最佳数据源进行昂贵的 AJAX 调用等），否则真正的窍门优化性能将用于管理您在运行时加载的所有其他内容。

在几十张图片上加载几十张图片，或者为巨大的背景图片制作动画，以及拉入大量脚本和 css 文件，这些对性能的影响都比编写良好的中等复杂的 Javascript 所产生的影响要大得多。

也就是说，快速的 Google 搜索会找到几个关于 Javascript 性能优化的来源：http: [//www.developer.nokia.com/Community/Wiki/JavaScript_Performance_Best_Practices](http://www.developer.nokia.com/Community/Wiki/JavaScript_Performance_Best_Practices)

[http://www.nczonline.net/blog/2009/02/03/speed-up-your-javascript-part-4/](http://www.nczonline.net/blog/2009/02/03/speed-up-your-javascript-part-4/)

[http://mir.aculo.us/2010/08/17/when-does-javascript-trigger-reflows-and-rendering/](http://mir.aculo.us/2010/08/17/when-does-javascript-trigger-reflows-and-rendering/)

正如其中两个链接所指出的那样，浏览器中最昂贵的操作是重排（由于 DOM 操作，浏览器必须重绘界面），因此在性能方面您需要最谨慎. 其中一些可以通过对您正在修改的内容进行智能来缓解（例如，应用类比临时修改内联样式更便宜），因此将您的关注点（样式与数据）分开将非常重要.

*只做你必须*做的修改，以完成工作，（即，而不是做“HULK SMASH (DOM)！”用 AJAX 调用替换整个页面块的方法，而不是调用屏幕抓取远程源让 JSON 数据只更新所需的最少元素）和其他常识性方法将使您比对 for 循环进行数小时的细微调整要远得多（尽管，常识会让您走得更远，那里，也）。

祝你好运！

# ckeditor - 使用 CKEditor 白名单插件，我如何保留/提升不允许标签的子节点？

> ID：13380391
> 
> 赞同：1
> 
> 时间：2012-11-14T14:08:35.927
> 
> 标签：ckeditor

CKEditor的[白名单插件](http://cksource.com/forums/viewtopic.php?t=25504)将清理规则添加到 dataProcessor 的 dataFilter 和 htmlFilter。如果某个元素不在白名单中，则将其连同所有子节点一起删除：

```
// console.log("Remove " + element.name);
// The element (as well as any content or children) is removed.
return false; 
```

但是，我想保留任何内容/孩子。基本上，我想要这样：

```
This is <u>really</u> important! 
```

变成这样：

```
This is really important! 
```

不是这个：

```
This is important! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:53:11.227

更改第 37 行`whitelist/plugin.js`。而不是返回`false`，删除整个元素，写：

`delete element.name;`

这将删除元素的标签，但会留下内容。

# php - 在 PHP 中获取使用 Content-Disposition 提供的文件的内容

> ID：13380393
> 
> 赞同：0
> 
> 时间：2012-11-14T14:08:41.567
> 
> 标签：php, curl, content-disposition

我正在尝试使用 cURL 或 file_get_contents 获取远程文件的内容，但由于该文件是使用 Content-Disposition 提供的，因此我似乎只获得了网页的源代码，而不是我真正想要的 iCal 文件。我要获取的 URL 是：[http ://afvalkalender.eindhoven.nl/Afvalkalender/download_ical.php?p=5621%20AJ&h=32](http://afvalkalender.eindhoven.nl/Afvalkalender/download_ical.php?p=5621%20AJ&h=32)

希望你们中的一个人知道如何做到这一点，因为在 SO 或 Google 上搜索只会向我指出使用 Content-Disposition 提供文件的方法，但这不是我想要的。

# c# - 有没有办法 - 在 ASP.Net 中 - 在后面的代码中从另一个 ObjectDataSource 访问一个 ObjectDataSource 的对象？

> ID：13380394
> 
> 赞同：0
> 
> 时间：2012-11-14T14:08:41.560
> 
> 标签：c#, asp.net, web-applications

我在 aspx 页面中有以下代码：

```
<asp:ObjectDataSource id="odsOuterSource" TypeName="my.namespace.page"
SelectMethod="GetTestObject" DataObjectTypeName="my.namespace.Entities.TestObject" />

<asp:ObjectDataSource id="odsInnerSource" TypeName="my.namespace.page"
SelectMethod="GetAnotherTestObject" 
DataObjectTypeName="my.namespace.Entities.AnotherTestObject" /> 
```

以及代码隐藏中的以下代码：

```
public TestObject GetTestObject()
{
    Logic myLogic = new MyLogic();
    return myLogic.GetTestObject();
}

public AnotherTestObject GetAnotherTestObject()
{
    Logic myLogic = new MyLogic();
    return myLogic.GetAnotherTestObject(testObject);
} 
```

现在我的问题是，是否有办法获取 OuterSource 返回的 TestObject，这样我就可以将它用于 InnerSource，而无需再次调用 GetTestObject。

我希望你能帮我解决这个问题。

编辑：为了比评论更好的可读性

感谢您的回答，但我对木杜的回答有疑问：

如果我的 OuterSource 有参数，有没有办法做到这一点？例如

```
<asp:ObjectDataSource id="odsOuterSource" TypeName="my.namespace.page"
SelectMethod="GetTestObject" DataObjectTypeName="my.namespace.Entities.TestObject">
    <SelectParameters>
        <asp:QueryStringParameter Name="id" QueryStringField="id" DefaultValue="0" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

因为这样即使我的 GetTestObject 也会有一个参数：

```
public TestObject GetTestObject(int id)
{
    Logic myLogic = new MyLogic();
    return myLogic.GetTestObject(id);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:15:55.527

您可以将其保存在成员中，作为`TestObject`或作为`Lazy<TestObject>`：

```
private readonly Lazy<TestObject> myTestObject = new Lazy<TestObject>(() =>
{
    var myLogic = new MyLogic();
    return myLogic.GetTestObject();
}); 
```

使用此代码，您可以收到任意次数的代码。它将通过`MyLogic`一次获取并在后续调用中重新返回：

```
public TestObject GetTestObject()
{
    return this.myTestObject.Value;
}

public AnotherTestObject GetAnotherTestObject()
{
    var testObject = this.myTestObject.Value; // re-used

    Logic myLogic = new MyLogic();
    return myLogic.GetAnotherTestObject(testObject);
} 
```

由于 ASP.NET 为每个请求创建页面的新实例，因此为每个请求`Lazy<TestObject>`重新创建对象。因此，您`TestObject`实际上是每个请求获取一次。

# java - 隐藏 Jpanel 后如何更新 Jframe

> ID：13380396
> 
> 赞同：-1
> 
> 时间：2012-11-14T14:08:44.753
> 
> 标签：java, swing, panel

单击按钮时，我想隐藏选定的面板。我已经完成了大部分工作，但是当面板为 false 时不会更新。

这是我尝试过的事情之一：

```
compsToExperiment.setVisible(mapVis);
updateUI();

private void updateUI() {
        SwingUtilities.updateComponentTreeUI(this);
    } 
```

这是在正确的轨道上吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:05:40.833

您不必做任何花哨的事情，然后调用`setVisible(false);`所说的`JPanel`。下面的例子就是一个证明：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class InvisiblePanel
{
    private JPanel centerPanel;
    private JPanel footerPanel;

    private JTextField addField;
    private JTextField nameField;
    private JTextField occField;
    private JTextField phoneField;
    private JLabel nameLabel;
    private JLabel addLabel;
    private JLabel occLabel;
    private JLabel phoneLabel;

    private JPanel contentPane;
    private JButton hideButton;

    private void displayGUI() 
    {
        JFrame frame = new JFrame("Invisible Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        contentPane = new JPanel();
        contentPane.setOpaque(true);
        contentPane.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        contentPane.setBackground(Color.RED.darker().darker());
        contentPane.setLayout(new BorderLayout(5, 5));

        nameLabel = new JLabel("Guarantee Name : ");
        nameField = new JTextField();   
        addLabel = new JLabel("Address : ");
        addField = new JTextField();        
        occLabel = new JLabel("Occupation : ");
        occField = new JTextField();
        phoneLabel = new JLabel("Phone : ");
        phoneField = new JTextField();
        centerPanel = new JPanel();
        hideButton = new JButton("Hide");
        hideButton.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent ae)
            {
                if (centerPanel.isShowing())
                    centerPanel.setVisible(false);
                else
                    centerPanel.setVisible(true);
            }
        });

        centerPanel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        centerPanel.setOpaque(true);
        centerPanel.setBackground(Color.WHITE);
        centerPanel.setLayout(new GridLayout(0, 2, 5, 5));
        centerPanel.add(nameLabel);
        centerPanel.add(nameField);
        centerPanel.add(addLabel);
        centerPanel.add(addField);
        centerPanel.add(occLabel);
        centerPanel.add(occField);
        centerPanel.add(phoneLabel);
        centerPanel.add(phoneField);

        footerPanel = new JPanel();
        footerPanel.add(hideButton);

        contentPane.add(centerPanel, BorderLayout.CENTER);
        contentPane.add(footerPanel, BorderLayout.PAGE_END);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    } 

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new InvisiblePanel().displayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:10:18.740

`updateComponentTreeUI()`不强制重绘。您必须使用该`repaint`方法。

```
compsToExperiment.setVisible(mapVis);
frame.repaint(); 
```

面板所在`frame`的顶部窗口在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:20:01.600

您可以执行 JFrame.invalidate() 来刷新。请查看链接以获取更多详细信息。对不同问题的类似要求。[实时刷新frame内容](https://stackoverflow.com/questions/10690923/refresh-the-contents-of-frame-in-real-time)

# jquery - 使用下划线或点绑定 jquery 小部件

> ID：13380400
> 
> 赞同：0
> 
> 时间：2012-11-14T14:08:53.423
> 
> 标签：jquery, binding, namespaces, widget

我有一个带有命名空间的 jquery 小部件

```
$.widget( "mynamespace.mywidget" , {... 
```

我有一个名为 foo 的选项

```
foo: function(){} 
```

我用 this._trigger 触发了一个事件

```
this._trigger('foo', event, ... 
```

现在我可以设置 foo 选项绑定

```
var elem = $('#myelem').mywidget();

elem.bind('mywidgetfoo',function(e,v){ alert("fool"); }); 
```

我的问题是绑定。我认为“mywidgetfoo”很难阅读。我更喜欢类似的东西

```
elem.bind('mywidget.foo', 
```

或者

```
elem.bind('mywidget_foo' 
```

有机会实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:29:42.317

我发现我可以使用小部件选项：

```
widgetEventPrefix: 'mywidget.event.' 
```

这会产生如下事件：

```
mywidget.event.foo 
```

这就是我想要的。

# objective-c - 目标 C：在 UITableViewCell 中获取 UIView 的边界

> ID：13380404
> 
> 赞同：0
> 
> 时间：2012-11-14T14:09:09.343
> 
> 标签：objective-c, uitableview, position, bounds

我有一个 UITableView 和我在 InterfaceBuilder 中创建的自定义 UITableViewCell。我在 UITableViewCell 中添加了一个 UIView 并为它添加了一个 Outlet。现在我需要知道它在特定 UITableViewCell 中的位置。

我在自定义 UITableViewCell 中编写了以下代码

WorkentryCell.h

```
#import <UIKit/UIKit.h>

@interface WorkentryCell : UITableViewCell
@property (strong, nonatomic) IBOutlet UIView *view1;
@end 
```

WorkentryCell.m

```
#import "WorkentryCell.h"

@implementation WorkentryCell

@synthesize view1;

-(id)initWithCoder:(NSCoder *)aDecoder
{
   self = [super initWithCoder:aDecoder];
   if(self) {
      NSLog(@"%f, %f", self.view1.bounds.size.height, self.view1.bounds.size.width);
      NSLog(@"%f, %f", self.view1.bounds.origin.x, self.view1.bounds.origin.y);
   }
   return self;
}

-(void)setNeedsDisplay
{
    NSLog(@"%f, %f", self.view1.bounds.size.height, self.projectLabel.bounds.size.width);
    NSLog(@"%f, %f", self.view1.bounds.origin.x, self.projectLabel.bounds.origin.y);
} 
```

但我得到的一切是：

2012-11-14 15:01:43.943 TestApp [883:907] 0.000000, 0.000000

2012-11-14 15:01:43.944 TestApp [883:907] 0.000000, 0.000000

你能告诉我为什么没有关于 UIView 的位置和大小的信息吗？

谢谢菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:13:36.353

您将在 init 方法中没有有效的大小。您应该将此代码放在 setNeedsDisplay 中。

# wordpress - Wordpress：共享 SSL 和自定义永久链接的问题

> ID：13380405
> 
> 赞同：1
> 
> 时间：2012-11-14T14:09:16.110
> 
> 标签：wordpress

我想将 SSL 应用于我的 wordpress 网站的大约 4 个页面，访问者只有在完成结帐程序时才会看到这些页面。

我正在为 SSL 功能使用 wordpress 插件“WordPress HTTPS (SSL)” - [WordPress HTTPS (SSL)](http://wordpress.org/extend/plugins/wordpress-https/)

我有一个共享的 SSL 证书，并且 SSL 页面仅在我将永久链接设置为默认值时显示。否则我会收到 404 错误。这似乎是一个很常见的错误。

我真的希望网站为网站上的所有页面和帖子显示漂亮的永久链接，但我愿意在这 4 个页面上妥协。

因此，我的问题是，除了这 4 个 SSL 页面需要设置为默认页面之外，我可以将所有页面都设置为 Pretty Permalinks 吗？如果是这样，怎么做？

我已经尝试了几个永久链接插件，但没有任何真正的成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:16:45.083

您确定您的服务器允许使用 Pretty Permalinks 吗？

1.  您是否启用了 mod_rewrite Apache 模块？
2.  您是否允许使用`.htaccess`文件覆盖服务器配置？这是由`AllowOverride`Apache 指令指定的（在 Apache 配置文件中找到）

如果您对此一无所知 - 请向您的托管服务提供商寻求支持 - 他们应该知道这些是否已启用。

确认永久链接正常工作的最简单方法是禁用 WordPress HTTPS (SSL) 插件并查看漂亮的永久链接是否正常工作，或者您仍然获得 404 页面。

# jquery - 将播放暂停和停止按钮添加到 Loopedslider

> ID：13380410
> 
> 赞同：2
> 
> 时间：2012-11-14T14:09:24.213
> 
> 标签：jquery, jquery-plugins, jquery-slider

我需要向 Looped Slider 添加播放、暂停和停止按钮。这是旧的和定制的版本。这是同一个滑块的最新版本[http://www.slidesjs.com/](http://www.slidesjs.com/)我只需要一些指导线和一个起点。

Bloew 是我正在使用的插件的代码。提前致谢

```
if(typeof jQuery != 'undefined') {
    jQuery(function($) {
        $.fn.extend({
            loopedSlider: function(options) {
                var settings = $.extend({}, $.fn.loopedSlider.defaults, options);

                return this.each(
                    function() {
                    if($.fn.jquery < '1.3.2') {return;}
                    var $t = $(this);
                    var o = $.metadata ? $.extend({}, settings, $t.metadata()) : settings;

                    var distance = 0;
                    var times = 1;
                    var slides = $(o.slides,$t).children().size();
                    var width = $(o.slides,$t).children().outerWidth();
                    var position = 0;
                    var active = false;
                    var number = 0;
                    var interval = 0;
                    var restart = 0;
                    var pagination = $("."+o.pagination+" li a",$t);

                    if(o.addPagination && !$(pagination).length){
                        var buttons = slides;
                        $($t).append("<ul class="+o.pagination+">");
                        $(o.slides,$t).children().each(function(){
                            if (number<buttons) {
                                $("."+o.pagination,$t).append("<li><a rel="+(number+1)+" href=\"#\" >"+(number+1)+"</a></li>");
                                number = number+1;
                            } else {
                                number = 0;
                                return false;
                            }
                            $("."+o.pagination+" li a:eq(0)",$t).parent().addClass("active");
                        });
                        pagination = $("."+o.pagination+" li a",$t);
                    } else {
                        $(pagination,$t).each(function(){
                            number=number+1;
                            $(this).attr("rel",number);
                            $(pagination.eq(0),$t).parent().addClass("active");
                        });
                    }

                    if (slides===1) {
                        $(o.slides,$t).children().css({position:"absolute",left:position,display:"block"});
                        return;
                    }

                    $(o.slides,$t).css({width:(slides*width)});

                    $(o.slides,$t).children().each(function(){
                        $(this).css({position:"absolute",left:position,display:"block"});
                        position=position+width;
                    });

                    $(o.slides,$t).children(":eq("+(slides-1)+")").css({position:"absolute",left:-width});

                    if (slides>3) {
                        $(o.slides,$t).children(":eq("+(slides-1)+")").css({position:"absolute",left:-width});
                    }

                    if(o.autoHeight){autoHeight(times);}

                    $(".next",$t).click(function(){
                        if(active===false) {
                            animate("next",true);
                            if(o.autoStart){
                                if (o.restart) {autoStart();}
                                else {clearInterval(sliderIntervalID);}
                            }
                        } return false;
                    });

                    $(".previous",$t).click(function(){
                        if(active===false) {    
                            animate("prev",true);
                            if(o.autoStart){
                                if (o.restart) {autoStart();}
                                else {clearInterval(sliderIntervalID);}
                            }
                        } return false;
                    });

                    if (o.containerClick) {
                        $(o.container,$t).click(function(){
                            if(active===false) {
                                animate("next",true);
                                if(o.autoStart){
                                    if (o.restart) {autoStart();}
                                    else {clearInterval(sliderIntervalID);}
                                }
                            } return false;
                        });
                    }

                    $(pagination,$t).click(function(){
                        if ($(this).parent().hasClass("active")) {return false;}
                        else {
                            times = $(this).attr("rel");
                            $(pagination,$t).parent().siblings().removeClass("active");
                            $(this).parent().addClass("active");
                            animate("fade",times);
                            if(o.autoStart){
                                if (o.restart) {autoStart();}
                                else {clearInterval(sliderIntervalID);}
                            }
                        } return false;
                    });

                    if (o.autoStart) {
                        sliderIntervalID = setInterval(function(){
                            if(active===false) {animate("next",true);}
                        },o.autoStart);
                        function autoStart() {
                            if (o.restart) {
                            clearInterval(sliderIntervalID,interval);
                            clearTimeout(restart);
                                restart = setTimeout(function() {
                                    interval = setInterval( function(){
                                        animate("next",true);
                                    },o.autoStart);
                                },o.restart);
                            } else {
                                sliderIntervalID = setInterval(function(){
                                    if(active===false) {animate("next",true);}
                                },o.autoStart);
                            }
                        };
                    }

                    function current(times) {
                        if(times===slides+1){times = 1;}
                        if(times===0){times = slides;}
                        $(pagination,$t).parent().siblings().removeClass("active");
                        $(pagination+"[rel='" + (times) + "']",$t).parent().addClass("active");
                    };

                    function autoHeight(times) {
                        if(times===slides+1){times=1;}
                        if(times===0){times=slides;}    
                        var getHeight = $(o.slides,$t).children(":eq("+(times-1)+")",$t).outerHeight();
                        $(o.container,$t).animate({height: getHeight},o.autoHeight);                    
                    };      

                    function animate(dir,clicked){  
                        active = true;  
                        switch(dir){
                            case "next":
                                times = times+1;
                                distance = (-(times*width-width));
                                current(times);
                                if(o.autoHeight){autoHeight(times);}
                                if(slides<3){
                                    if (times===3){$(o.slides,$t).children(":eq(0)").css({left:(slides*width)});}
                                    if (times===2){$(o.slides,$t).children(":eq("+(slides-1)+")").css({position:"absolute",left:width});}
                                }
                                $(o.slides,$t).animate({left: distance}, o.slidespeed,function(){
                                    if (times===slides+1) {
                                        times = 1;
                                        $(o.slides,$t).css({left:0},function(){$(o.slides,$t).animate({left:distance})});                           
                                        $(o.slides,$t).children(":eq(0)").css({left:0});
                                        $(o.slides,$t).children(":eq("+(slides-1)+")").css({ position:"absolute",left:-width});             
                                    }
                                    if (times===slides) $(o.slides,$t).children(":eq(0)").css({left:(slides*width)});
                                    if (times===slides-1) $(o.slides,$t).children(":eq("+(slides-1)+")").css({left:(slides*width-width)});
                                    active = false;
                                });                 
                                break; 
                            case "prev":
                                times = times-1;
                                distance = (-(times*width-width));
                                current(times);
                                if(o.autoHeight){autoHeight(times);}
                                if (slides<3){
                                    if(times===0){$(o.slides,$t).children(":eq("+(slides-1)+")").css({position:"absolute",left:(-width)});}
                                    if(times===1){$(o.slides,$t).children(":eq(0)").css({position:"absolute",left:0});}
                                }
                                $(o.slides,$t).animate({left: distance}, o.slidespeed,function(){
                                    if (times===0) {
                                        times = slides;
                                        $(o.slides,$t).children(":eq("+(slides-1)+")").css({position:"absolute",left:(slides*width-width)});
                                        $(o.slides,$t).css({left: -(slides*width-width)});
                                        $(o.slides,$t).children(":eq(0)").css({left:(slides*width)});
                                    }
                                    if (times===2 ) $(o.slides,$t).children(":eq(0)").css({position:"absolute",left:0});
                                    if (times===1) $(o.slides,$t).children(":eq("+ (slides-1) +")").css({position:"absolute",left:-width});
                                    active = false;
                                });
                                break;
                            case "fade":
                                times = [times]*1;
                                distance = (-(times*width-width));
                                current(times);
                                if(o.autoHeight){autoHeight(times);}
                                $(o.slides,$t).children().fadeOut(o.fadespeed, function(){
                                    $(o.slides,$t).css({left: distance});
                                    $(o.slides,$t).children(":eq("+(slides-1)+")").css({left:slides*width-width});
                                    $(o.slides,$t).children(":eq(0)").css({left:0});
                                    if(times===slides){$(o.slides,$t).children(":eq(0)").css({left:(slides*width)});}
                                    if(times===1){$(o.slides,$t).children(":eq("+(slides-1)+")").css({ position:"absolute",left:-width});}
                                    $(o.slides,$t).children().fadeIn(o.fadespeed);
                                    active = false;
                                });
                                break; 
                            default:
                                break;
                            }                   
                        };
                    }
                );
            }
        });
        $.fn.loopedSlider.defaults = {
            container: ".container", //Class/id of main container. You can use "#container" for an id.
            slides: ".slides", //Class/id of slide container. You can use "#slides" for an id.
            pagination: "pagination", //Class name of parent ul for numbered links. Don't add a "." here.
            containerClick: true, //Click slider to goto next slide? true/false
            autoStart: 5000, //Set to positive number for true. This number will be the time between transitions.
            restart: 0, //Set to positive number for true. Sets time until autoStart is restarted.
            slidespeed: 300, //Speed of slide animation, 1000 = 1second.
            fadespeed: 200, //Speed of fade animation, 1000 = 1second.
            autoHeight: 0, //Set to positive number for true. This number will be the speed of the animation.
            addPagination: false //Add pagination links based on content? true/false
        };
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:47:37.987

我自己能够做到这一点。在要初始化 loopedslider 的地方添加这些选项。

```
pauseSlideShow : true,
startSlideShow : true 
```

然后在插件代码中添加此代码段。

```
/*Custom play puase buttons*/
                    if(o.pauseSlideShow){
                        $(".pauseslideshow").click(function(){

                            clearInterval(sliderIntervalID);

                        });                     
                    }
                    if(o.startSlideShow){
                        $(".startlideshow").click(function(){
                            sliderIntervalID = setInterval(function(){
                                if(active===false) {animate("next",true);}
                            },o.autoStart);

                        });         

                    }/*#Custom play Pause buttons*/ 
```

播放和暂停按钮必须相应地具有“startSlideShow”和“pauseslideshow”类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T06:59:44.967

这是简单的代码，您可以制作播放暂停按钮：

```
var autoStart = true;
$('#your-slider-id').royalSlider({
    autoPlay: {
        enabled: autoStart
    }
}); 
```

按钮的html代码

```
<button id="toggleAutoPlayBtn">Pause</button> 
```

在 document.ready() 中绑定按钮上的单击事件并调用 toggleAutoPlay 函数

```
jQuery(document).ready(function($) {  
 // optionally put here slider initialization code from first step

$('#toggleAutoPlayBtn').click(function() {
        // optionally change button text, style e.t.c.
        if(autoStart) {
            $(this).html('play');
        } else {
            $(this).html('pause');
        }
        autoStart = !autoStart;

        $('#your-slider-id').royalSlider('toggleAutoPlay');
 });
}); 
```

# python - 将pygtk代码移植到pygobject Gtk3：pango.SCALE_XX_SMALL的等价物是什么

> ID：13380412
> 
> 赞同：0
> 
> 时间：2012-11-14T14:09:41.120
> 
> 标签：python, gtk3, pygobject

我正在尝试移植一个使用 pango 的 python gtk2 程序。我被困在试图找到 pango.SCALE_XX_SMALL 的等价物。其他 pango 常量例如从 pango.WEIGHT_ULTRALIGHT 转换为 Pango.Weight.ULTRALIGHT 但似乎 SCALE_XX_SMALL 不遵循这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T06:14:16.100

AFAIK他们还没有被反省，检查：

[http://consciouslyusing.blogspot.com/2012/01/heads-up-missing-pango-text-scale.html](http://consciouslyusing.blogspot.com/2012/01/heads-up-missing-pango-text-scale.html)

在包含 PyGobject 的 Ubuntu 12.04 版本中仍然是这种情况。现在唯一的解决方案是在代码中自己定义这些常量。您可以在以下位置找到值：

[http://developer.gnome.org/pango/stable/pango-Text-Attributes.html#PANGO-SCALE-XX-SMALL:CAPS](http://developer.gnome.org/pango/stable/pango-Text-Attributes.html#PANGO-SCALE-XX-SMALL:CAPS)

# objective-c - iOS 自定义振动

> ID：13380419
> 
> 赞同：0
> 
> 时间：2012-11-14T14:10:01.253
> 
> 标签：objective-c, ios5, vibration

我在我的 iPhone 上做了一个自定义振动，我想在我正在制作的应用程序中使用它。现在我已经能够从我的手机中提取模式，但它是一个 plist 文件。有谁知道是否有办法从 plist 文件中在我的应用程序中播放此自定义振动？

或者如果这不可能：我可以制作一个允许人们将任何振动连接到我的应用程序的设置窗格吗？就像它可以通过联系人来完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:44:33.133

好的，远没有真正的自定义振动那么酷，尤其是不如在您的应用程序中拥有用于自定义振动的设置面板（如果我们可以使用该标准面板进行振动设置并让用户自定义振动，那就太棒了）根据自己的口味...）

但我的解决方案是使用计时器触发正常的“kSystemSoundID_Vibrate”并播放间隔。因为您一次只能触发那些，您可以通过减少呼叫之间的时间来制造更短、更柔和的振动。不是很漂亮，但它确实有效......

# matlab - Matlab，运算符 A\B

> ID：13380420
> 
> 赞同：9
> 
> 时间：2012-11-14T14:10:05.943
> 
> 标签：matlab, operators

运算 A\B 的结果是什么，其中 A(1, m) 和 B (1, m)？

手册中是这样写的：

```
A\B returns a least-squares solution to the system of equations A*x= B. 
```

所以这意味着 x = inv (A'*A)*A'*B？然而，矩阵 A'*A 是奇异的......

让我们假设：

```
A=[1 2 3]
B=[6 7 6]
A\B

0         0         0
0         0         0
2.0000    2.3333    2.0000 
```

如果您使用 MLS：

```
C = inv (A'*A)   singular matrix
C = pinv(A'*A)

0.0051    0.0102    0.0153
0.0102    0.0204    0.0306
0.0153    0.0306    0.0459

D= C*A'*B

0.4286    0.5000    0.4286
0.8571    1.0000    0.8571
1.2857    1.5000    1.2857 
```

所以结果 A\B 和 inv (A'*A)*A'*B 是不同的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:22:12.133

我的 MATLAB (R2010b) 说了很多关于做什么`A\B`：

> `mldivide(A,B)`和等效的`A\B`执行矩阵左除法（反斜杠）。`A`并且`B` 必须是具有相同行数的矩阵，除非`A`是标量，在这种情况下`A\B`执行元素除法，即`A\B = A.\B`.
> 
> If`A`是一个方阵，`A\B`与 大致相同`inv(A)*B`，只是它的计算方式不同。如果`A`是一个`n`逐`n`矩阵并且`B`是一个包含元素的列向量`n`，或者是一个包含多个此类列的矩阵，则`X = A\B`是方程的解`AX = B`。如果`A`缩放不当或几乎是单一的，则会显示一条警告消息。
> 
> 如果`A`是一个`m`逐`n`矩阵，`m ~= n`并且`B`是一个具有分量的列向量`m` ，或者是一个具有几个这样的列的矩阵，则`X = A\B`是对欠定或超定方程组的最小二乘意义上的解`AX = B`。换句话说，`X`最小化`norm(A*X - B)`，向量的长度`AX - B`。的等级`k`由`A`具有列旋转的 QR 分解确定。计算的解决方案每列`X`最多具有`k`非零元素。如果`k < n`，这通常与 不同的解`x = pinv(A)*B`，后者返回最小二乘解。
> 
> `mrdivide(B,A)`和等效的`B/A`执行矩阵右除法（正斜杠）。`B`并且`A`必须具有相同的列数。
> 
> 如果`A`是方阵，`B/A`则与 大致相同`B*inv(A)`。如果`A`是一个`n`逐`n`矩阵并且`B`是一个包含元素的行向量`n`，或者是一个包含多个此类行的矩阵，则是通过部分旋转的高斯消元法计算`X = B/A`的方程的解 。`XA = B`如果`A`缩放不当或几乎是单一的，则会显示一条警告消息。
> 
> 如果`B`是一个`m`逐`n`矩阵，`m ~= n`并且`A`是一个具有分量的列向量`m` ，或者是一个具有几个这样的列的矩阵，则`X = B/A`是对欠定或超定方程组的最小二乘意义上的解`XA = B`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T15:12:54.187

`x = inv (A'*A)*A'*B`适用于*过度确定*的系统（即，`A`作为`n x m`矩阵的特征`n>m`; 在这些情况下`A'A`是可逆的）。

在你的情况下，你有一个*未确定*的系统。

* * *

因此，可能会发生什么？

*我的意见，虽然你可以检查，至少在你的情况下*：

当您执行`A\B`matlab 解决通常的最小二乘法的逆向优化问题时，即

```
 X = argmin_{X \in S} ||X||, 
```

`S`解的集合在哪里。换句话说，它为您提供了具有最小 L^2 范数的系统的解决方案。（考虑到您可以手动处理问题，至少在您的情况下）。

# sql-server - 自由格式、文件和基于域的属性之间有什么区别？

> ID：13380422
> 
> 赞同：0
> 
> 时间：2012-11-14T14:10:10.293
> 
> 标签：sql-server, master-data-services

Microsoft Master Data Services 2012 中有三种属性：

*   自由形式
*   文件
*   基于域的

这三个有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:33:14.310

基于域的与关系数据库中的外键非常相似。创建它时，您必须引用值所在的实体。当数据管理员输入值时，他们将从引用的实体而不是文本框中获得名称值的下拉列表。

自由形式就是这样，自由形式。您可以输入文本、数字、日期等，并（在某种程度上）指定数据类型。

文件用于文件（文档）。

# python - Django FCGI Virtualenv 500 错误

> ID：13380426
> 
> 赞同：1
> 
> 时间：2012-11-14T14:10:16.107
> 
> 标签：python, django, virtualenv, mod-fcgid

我确实得到了一个空白的 Django 项目，但它是 1.3.1 版，无法处理我的 1.4.1 代码。所以我创建了一个 Virtualenv 并安装了最新的 Django 但只能得到 500 个错误。

在 Virtualenv 中从 Apache 上的 mod_fcgid 启动 Django。我每次都在 Apache 日志中得到这些。

```
File "/home/user/django/env/lib/python2.6/site-packages/django/core/servers/basehttp.py", line 58, in get_internal_wsgi_application
File "/home/user/django/env/lib/python2.6/site-packages/django/core/servers/fastcgi.py", line 183, in runfastcgi
File "/home/user/django/env/lib/python2.6/site-packages/django/core/servers/basehttp.py", line 58, in get_internal_wsgi_application
File "/home/user/django/env/lib/python2.6/site-packages/django/core/servers/fastcgi.py", line 183, in runfastcgi 
```

行号分别对应这些

```
"could not import module '%s': %s" % (app_path, module_name, e))
WSGIServer(get_internal_wsgi_application(), **wsgi_opts).run() 
```

第一个是在 的定义内`get_internal_wsgi_application()`。

这是什么原因造成的？

有没有办法在 Apache 日志中获得更多有用的调试信息？

为什么错误重复？

**更新**

如果有人知道这里发生了什么，我会很感兴趣，但由于 Web2py 在相同的条件下工作正常，我认为这是 Django 的一个问题并继续前进。

# c - C 将 udp dns 消息更改为 tcp 并返回

> ID：13380427
> 
> 赞同：-2
> 
> 时间：2012-11-14T14:10:16.750
> 
> 标签：c, networking, tcp, dns, udp

我有两个变量：`buf`和`length`（`char buf[BUFSIZE], int length`）。`Buf`包含使用 UDP 协议发送的 DNS 消息，其中包含`length`该消息的长度。现在我需要进行更改`buf`，以便可以将其与 TCP 协议一起使用并将其发送到 DNS 服务器并获得响应，然后该响应将更改回 UDP 协议。

我知道我应该添加一些字节，然后删除一些字节，但我真的不知道是哪一个。所以请帮忙，也请把它展示出来`C`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:31:58.330

您需要打开 SOCK_STREAM 类型的第二个套接字，然后使用 send() 发送以下内容`buf`：

```
sock = socket( AF_INET, SOCK_STREAM, 0 );
connect(...);
send( sock, buf, length, 0 ); 
```

这是有效的，因为在使用套接字时，您通常不会获得协议标头，而只会获得 UDP/TCP 有效负载。

# ruby-on-rails-3 - 在rails 3中上传多个文件

> ID：13380432
> 
> 赞同：1
> 
> 时间：2012-11-14T14:10:36.833
> 
> 标签：ruby-on-rails-3, json, upload

我正在上传多个文件，但我没有在表单和控制器之间正确传递参数 - 不太确定我错过了什么。

表格很简单：

```
<%= form_tag({:controller => :admins, :action => :upload_json}, {:multipart => true, :method => :post, :html => { :class => "form-horizontal"}}) do %>

  <fieldset>
    <legend>Data</legend>
    <ol class="field-list">
      <li>
        <label for="data-file">JSON File</label>
        <%= file_field_tag 'jsonfileupload', multiple: true %>
      </li>
    </ol>

    <div class="form-actions">
      <%= submit_tag "Upload" %>
    </div>

  </fieldset>

<% end %> 
```

在控制器中，我这样做只是为了查看通过了什么：

```
@output = params[:jsonfileupload] 
```

在视图中，我只是`debug`查看返回的内容，它只提取任何一组选定文件的最后一个文件。

```
#<ActionDispatch::Http::UploadedFile:0x007f95d0c21010 @original_filename="4987.json", @content_type="application/json", @headers="Content-Disposition: form-data; name=\"jsonfileupload\"; filename=\"4987.json\"\r\nContent-Type: application/json\r\n", @tempfile=#<File:/var/folders/0p/6lq88m950mgftng1qm1w63_8000194/T/RackMultipart20121114-389-t9l7vs>> 
```

不知道我缺少什么让它返回所有选定的文件。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T14:09:10.893

我能够通过调整来解决这个问题`file_field_tag`：`<%= file_field_tag 'jsonfileupload[]', multiple: true %>`

# typescript - TypeScript 编译器：读取文件时出错

> ID：13380434
> 
> 赞同：1
> 
> 时间：2012-11-14T14:10:45.370
> 
> 标签：typescript, file-not-found

当我编译我的 ASP.NET MVC4 项目时，我收到以下编译器警告，即使项目中存在这些文件。

4> 读取文件“C:\Users\nji\WebSites\TestTypeScript\Scripts\Policies\CallbackPolicy.ts”时出错：找不到文件 4> 读取文件时出错“C:\Users\nji\Documents\Visual Studio 2010\WebSites\ TestTypeScript\Scripts\ViewModels\VectoLayerViewModel.ts"：找不到文件

错误似乎不会在运行时影响代码。

有人遇到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:14:15.047

这些文件真的存在吗？此错误通常是由文件被移动或删除引起的 - 因此路径不正确。

如果您导航到：

```
C:\Users\nji\WebSites\TestTypeScript\Scripts\Policies\ 
```

你能看到`CallbackPolicy.ts`吗？

在运行时，您将引用`.js`文件，即使`.ts`文件已消失，这些文件也可能位于正确的位置。

# ios - 核心数据访问与重复的关系

> ID：13380436
> 
> 赞同：0
> 
> 时间：2012-11-14T14:10:57.053
> 
> 标签：ios, core-data

我正在使用以下内容来获取为一个人购买的所有礼物的数组。 `itemName`是礼物的名称，与`giftDetails`人是一对多的关系。即一个人有很多礼物

```
NSSet *set=[[object valueForKey:@"giftDetails"] valueForKey:@"itemName"];
NSArray *array=[set allObjects]; 
```

除非有重复`itemName`的 s，否则这段代码很好。经过研究，我了解到会`NSSet`自动删除重复项。

所以我要问的是是否有另一种方法可以在`giftDetails`不使用的情况下获得，`NSSet`因为我也想访问重复项。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:28:12.897

```
NSArray *allGiftDetails = [[object valueForKey:@"giftDetails"] allObjects];
NSArray *allGiftNames = [allGiftDetails valueForKey:@"itemName"]; 
```

应该是诀窍。

# nginx - nginx 上游代理的后备

> ID：13380439
> 
> 赞同：8
> 
> 时间：2012-11-14T14:11:27.567
> 
> 标签：nginx, proxy, fallback

我在图像服务器集群前面有一个 nginx 实例：

```
 upstream img-farm-1  {
    server 10.0.1.1;
    server 10.0.1.2;
    server 10.0.1.3;
    server 10.0.1.4;
    # etc
  }

  location ~ ^/static: {
    rewrite /static:(.*) /$1 break;
    proxy_pass http://img-farm-1;
    limit_except GET {
        allow all;
    }
  } 
```

这个集群正在被一个即将上线的新集群所取代，有一段时间，我想从旧集群中提供图像，但如果图像是新的或者已经从旧集群迁移到新集群，则回退到新集群新的。迁移完成后，我可以返回原始设置。

所以我想我能做到

```
 upstream img-farm-2  {
    server 10.0.2.1;
    server 10.0.2.2;
    server 10.0.2.3;
    server 10.0.2.4;
    server 10.0.2.5;
    # etc
  }

  location ~ ^/static: {
    access_log /var/log/nginx/static.access.log;
    rewrite    /static:(.*) /$1 break;
    proxy_pass http://img-farm-1;
    error_page 404 = @fallback-2;
  }

  location @fallback-2 {
    access_log /var/log/nginx/static-2.access.log;
    proxy_pass http://img-farm-2;
  } 
```

但这不起作用。我看到了 404，`static.access.log`但该`error_page 404`指令没有被执行，因为没有任何东西被写入`static-2.access.log`.

我很确定我不能使用`try_files`，因为，嗯，没有任何本地文件，一切都被代理了。

有没有人做过这样的事情？我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T14:31:30.310

傻我。所需要的只是`proxy_intercept_errors on;`在第一个位置

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-25T08:25:14.033

我有类似的情况，但如果我的第一台服务器关闭（状态）502，我想回退到另一台服务器。我让它工作（`nginx/1.17.8`）而不需要 proxy_intercept_errors`。

此外，对于使用`proxy_pass`URI 的任何人（`/`在此示例中），您需要使用稍微不同的配置，否则您将收到错误消息（见下文）。

```
location /texts/ {
  proxy_pass http://127.0.0.1:8084/;
  proxy_set_header X-Forwarded-For $remote_addr;
  error_page 502 = @fallback;
}

location @fallback {
  # This will pass failed requests to /texts/foo above to
  #  http://someotherserver:8080/texts/foo
  proxy_pass http://someotherserver:8080$request_uri;
} 
```

无论出于何种原因，Nginx 都不允许在此处使用斜杠：

```
location @fallback {
  proxy_pass http://someotherserver:8080/;
} 
```

并会抛出：

> nginx：[emerg]“proxy_pass”不能在正则表达式给出的位置、命名位置、“if”语句或“limit_except”块中包含URI部分

不幸的是，没有`/`你不能（AFAIK）proxy_pass 一个子目录。没有 RegEx`$1`也不起作用，因为它不支持空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-09T11:56:36.843

这应该工作

```
upstream img-farm-2  {
    server 10.0.2.1;
    server 10.0.2.2;
    server 10.0.2.3;
    server 10.0.2.4;
    server 10.0.2.5;
    # etc
}

location ~ ^/static: {
    access_log /var/log/nginx/static.access.log;
    rewrite    /static:(.*) /$1 break;
    proxy_pass http://img-farm-1;
    proxy_intercept_errors on;
    error_page 404 = @fallback-2;
}

location @fallback-2 {
    access_log /var/log/nginx/static-2.access.log;
    proxy_pass http://img-farm-2;
} 
```

# .net - 使用 oAuth2 身份验证在 .Net 中发送 Gmail [改述]

> ID：13380445
> 
> 赞同：2
> 
> 时间：2012-11-14T14:11:39.843
> 
> 标签：.net, gmail, google-api, oauth-2.0

我在 VB 中编写了一个 .Net 应用程序，请求访问用户的 gmail 联系人。它使用 oAuth2 以此处描述的方式执行此操作：[https](https://developers.google.com/accounts/docs/OAuth2) ://developers.google.com/accounts/docs/OAuth2 。它使用这些库：[https ://code.google.com/p/google-api-dotnet-client/wiki/OAuth2](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)

该应用程序有一个名称和地址数据库。如果用户在应用程序中创建了一个新联系人，它也会自动在他们的 Google 联系人中创建。

这是成功的。我使用 oAuth2 作为 Google 推荐的身份验证过程，因此 .net 应用程序不会存储用户的密码。

我还想使用用户的谷歌帐户从 .Net 应用程序中发送电子邮件。但是，我找不到使用 oAuth2 对请求进行身份验证的方法。我能找到的唯一示例不使用 oAuth2 并要求应用程序有权访问用户的密码，如下所示：[http ://www.jarloo.com/gmail-in-c](http://www.jarloo.com/gmail-in-c)

任何有关如何使用 oAuth2 身份验证从 .net 应用程序中发送 gmail 的帮助将不胜感激。

# php - jquery验证远程方法

> ID：13380448
> 
> 赞同：0
> 
> 时间：2012-11-14T14:11:52.010
> 
> 标签：php, jquery, jquery-validate

我是 jquery 的新手，试图在我的电子邮件输入中添加验证规则。它检查电子邮件是否在数据库中。我的 html 输入我正在尝试添加验证规则。

```
<input id="email" name="email"  type="text" class="easyui-validatebox" validType="email" required="true" > 
```

我的

```
$("#regform").validate();//block below was nested in validate in OP 
$('input[name="email"]').rules("add",
{
    remote : 
    {
        url: 'checkMaila.php',
        async: false,
        type: "POST",
        data:
        {
            email: function()
            {
                return $('input[name="email"]').val()
            }
        }       
    }

}); 
```

我的 PHP

```
<?php 
```

/* 检查邮箱是否已经注册 */

//使用mysqli连接数据库

```
include 'conn.php';

if(isset($_POST['email']))
{
    //op had this line instead of the line below:$maila= $_POST['email']
    $maila = $mysqli->real_escape_string($_POST['email']);
    //op line changed to one below $result = mysql_query("select * from user where email= '"+$maila+"';");
$sql = "SELECT * FROM user WHERE email = '".$maila."'";
$result = $mysqli->query($sql); 
if($result->num_rows == 0){
    echo "true";
}
else
{
    echo "false";
}

}
else
{
echo "false"; //invalid post var
}

?> 
```

更多信息：我的内联验证规则可以正常工作。我的 js 代码在外部 js 文件中，其中包含使用 jquery 的其他 js 函数，它们可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:20:06.367

您正在设置`$maila`为布尔值（是否`$_POST['email']`设置）。应该：

```
$maila = $_POST['email']; 
```

此外，post 中的电子邮件数据在 sql 中执行之前应该经过验证和转义，这是因为 SQL 注入。如果我输入，`10'; DROP TABLE user /*`则执行的查询如下所示：`SELECT * FROM user WHERE email = '10'; DROP TABLE user /*'`并且您的用户表将从数据库中删除。

要验证它，请使用正则表达式来检查它是否为电子邮件地址格式。要转义字符串，请使用`real_escape_string()`（[http://php.net/manual/en/mysqli.real-escape-string.php](http://php.net/manual/en/mysqli.real-escape-string.php)）。

您遇到的另一个错误是您尝试`+`在 php 中使用您必须使用的方式加入您的字符串`.`，所以

```
$sql = "SELECT * FROM user WHERE email = '"+$maila+"'"; 
```

应该：

```
$sql = "SELECT * FROM user WHERE email = '".$maila."'"; 
```

此处使用的 mysql :`mysql_query`已弃用，因此应使用[PDO](http://php.net/manual/en/book.pdo.php)或[Mysqli 。](http://php.net/manual/en/book.mysqli.php)

在 jQuery 中也有一个问题，规则不应该嵌套在 validate 中，而应该是这样的：

```
$("#regform").validate();

$('input[name="email"]').rules("add", {
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:20:24.860

以下答案适用于 OP 的这个更早的版本：

[https://stackoverflow.com/revisions/13380448/2](https://stackoverflow.com/revisions/13380448/2)

* * *

你不应该`.rules()`嵌套在`.validate()`. [根据文档](http://docs.jquery.com/Plugins/Validation/rules)，`.rules()`还必须出现在被调用*后的某个地方。* `.validate()`

[http://docs.jquery.com/Plugins/Validation/rules](http://docs.jquery.com/Plugins/Validation/rules)

```
$(document).ready(function() {

    $("#regform").validate();  

    // .validate(); must appear above .rules()

    $('input[name="email"]').rules("add", {
        remote : {
            url: 'checkMaila.php',
            async: false,
            type: "POST",
            data: {
                email: function() {
                    return $('input[name="email"]').val()
                }
            }       
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:23:13.917

提示：在开始使用 ajax 之前，请确保您的 php 源代码正在运行，以便您可以更轻松地找到指定内容 (php|html|js|css) 中的错误。

我在您的 php 代码中看到的第一个大错误：

```
 $maila = isset($_POST['email']); 
```

您必须将 $maila 设置为布尔值 true 或 false，您想要的是

```
 $maila = isset($_POST['email'])?$_POST['email']:''; 
```

第二个错误

```
$sql = "SELECT * FROM user WHERE email = '"+$maila+"'"; 
```

这不是有效的 php（查看您的错误报告）字符串由点连接**。**

```
$sql = "SELECT * FROM user WHERE email = '".$maila."'"; 
```

最后但并非最不重要的一点是，搜索 sql-injections

# ssl - heroku http没有重定向到ssl

> ID：13380459
> 
> 赞同：1
> 
> 时间：2012-11-14T14:13:01.940
> 
> 标签：ssl, heroku

我的 heroku 和 ssl 域设置几乎就在那里。

ssl 工作正常，我已设置[http://domain.com](http://domain.com)以重定向到[https://www.domain.com](https://www.domain.com)，这非常好。但是问题出在您输入[https://domain.com](https://domain.com)时- 它只是在 heroku 上超时。关于我做错了什么的任何指示？

也许以这种方式显示会更清楚

[http://domain.com](http://domain.com)有效（重定向到[https://www.domain.com/](https://www.domain.com/)）

[https://domain.com](https://domain.com)失败

[https://www.domain.com](https://www.domain.com)（重定向到[https://www.domain.com/](https://www.domain.com/)）

[http://www.domain.com](http://www.domain.com)（重定向到[https://www.domain.com/](https://www.domain.com/)）

**编辑**

我发现这是 namecheap 的一个限制，因为它们不会重定向裸域上的 ssl 流量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:28:13.470

我发现这是 namecheap 的一个限制，因为它们不会重定向裸域上的 ssl 流量

# design-patterns - 你听说过“位置”设计模式吗？

> ID：13380460
> 
> 赞同：6
> 
> 时间：2012-11-14T14:13:01.943
> 
> 标签：design-patterns, data-structures

这些天，我正在研究数据结构。在我的[数据结构书中](http://goo.gl/0d7lq)，作者说，“我们将使用 'Position' 设计模式” ->[照片](https://www.dropbox.com/s/dgk6gur2x6mzouc/2012-11-14%2021.15.14.jpg)

所以我在谷歌上搜索了*职位*设计模式，因为我想知道它。但是，我找不到任何结果。:'(

作者说：“我们之所以使用*位置*设计模式，是因为我们不希望用户修改内部结构。” ->[照片 1](https://www.dropbox.com/s/elr8zosfhzpuh1e/2012-11-14%2018.58.52.jpg) [照片 2](https://www.dropbox.com/s/3dk2v0ln9jlp2l2/2012-11-14%2019.00.18.jpg)
（例如，当我们返回节点元素时，不暴露访问链接的方法）

我绝对同意作者的观点和意图，但我不能确定“设计模式”这个词

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:23:22.227

位置模式现在可能并不像大多数开发人员在更高的抽象级别上工作那样广为人知。当我们对集合使用某些操作时，我们正在使用位置模式的实现——但我们自己并没有实现它。

[意见] 你更有可能在谈论低级编程的书籍中找到对位置模式的引用。例如，也许与迭代器模式一起，许多开发人员永远不会自己实现，但会在启动`for each`循环时使用实现。

# java - 关于 Hibernate Batchsize 排序

> ID：13380461
> 
> 赞同：1
> 
> 时间：2012-11-14T14:13:07.327
> 
> 标签：java, sql, hibernate, batch-file

我是 Hibernate 的新手，但我有一个关于 @Batchsize 注释工作的问题。我了解它是如何工作的，但我不明白它是如何对实体 ID 进行分组以供选择的。例如 - 我有 2 个课程：汽车和车轮。汽车有车轮列表，它必须是空的。我创建了 10 辆汽车——其中 5 辆有车轮列表，而 5 辆没有。然后我运行简单的代码

```
 List<Car> cars = session.createQuery("from Car").list();
    for (Car car : cars) {
        List<Wheel> wheels = car.getWheels();
        for (Wheel wheel : wheels) {
            System.out.println(wheel.getTitle());
        }
    } 
```

之后，我在控制台中看到类似这样的内容：

```
Hibernate: 
select
    wheels0_.car_id as car3_1_,
    wheels0_.id as id1_,
    wheels0_.id as id0_0_,
    wheels0_.title as title0_0_ 
from
    Wheel wheels0_ 
where
    wheels0_.car_id in (
        ?, ?, ?, ?, ?
    )
17:50:35,505 TRACE LongType:151 - binding '25' to parameter: 1<br>
17:50:35,505 TRACE LongType:151 - binding '18' to parameter: 2<br>
17:50:35,505 TRACE LongType:151 - binding '17' to parameter: 3<br> 
17:50:35,506 TRACE LongType:151 - binding '20' to parameter: 4<br> 
17:50:35,506 TRACE LongType:151 - binding '23' to parameter: 5<br> 
```

但在下次我得到其他绑定。它可以是 1、15、23 等。但我误解了 - 如何休眠选择 ID 的 IN 语句？为什么不按 ASC 或 DESC 排序（例如 - 1、2、3、4、5）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:20:40.937

这是填充汽车列表的顺序。如果您想按 id 升序排列，您可以执行以下操作：`List<Car> cars = session.createQuery("from Car order by id asc").list();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:03:24.023

如果您担心汽车的顺序，那么正如 tibtof 所提到的，只需修改您的原始查询以添加一个`order by`子句，以便您按顺序遍历汽车。

如果您关心每个 List 中 Wheels 的顺序（例如，对于`Car1.getWheels()`Wheel1，Wheel1 必须在 Wheel2 之前），BatchSize 不会为您提供排序选项。考虑使您的 Wheel 类[Comparable](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)并添加一个方便的方法，例如 getSortedWheels()

```
public List<Wheel> getSortedWheels() {
    List<Wheel> wheels = getWheels();
    Collections.sort(wheels);
    return wheels;
} 
```

# ruby-on-rails - Rails 生产日志中的性能测量有多准确？

> ID：13380462
> 
> 赞同：2
> 
> 时间：2012-11-14T14:13:15.360
> 
> 标签：ruby-on-rails, ruby, performance

今天，我们计划将我们的服务器从本地 VPS 托管服务转移[到按需风暴](http://www.stormondemand.com)。迁移的原因是 SoD 有非常令人印象深刻的 VPS：es 可用，我们希望将我们的数据库服务器放在具有出色 I/O 的服务器上。在 Storm on Demand 服务器上测试一些请求时，我们会得到明显更长的请求处理时间。

我们预计会有延迟，因为服务器位于美国而我们位于欧洲，但惊讶地发现我们在 production.log 中获得了如此多的测量时间。

以下是生产日志的一些示例输出：

**旧设置**

1 个 CPU 核心 4GB RAM 100 GB，RAID-10 * SAS 15.000 RPM

PostgreSQL 9.1.5、Rails 3.2.5、Ruby 1.9.3p194

```
Started GET "/top_list" for 83.249.254.229 at 2012-11-14
10:43:15 +0100 Processing by UsersController#user_toplist as HTML Completed
200 OK in 16ms (Views: 0.5ms | ActiveRecord: 6.0ms) 
```

**Storm on Demand 设置**

64 核 256GB RAM 750 GB SSD，RAID 10 SSD

PostgreSQL 9.2.1、Rails 3.2.9、Ruby 1.9.3p327

```
Started GET "/top_list" for 83.249.254.229 at
2012-11-14 11:26:37 +0100 Processing by UsersController#user_toplist as HTML
Completed 200 OK in 164ms (Views: 0.0ms | ActiveRecord: 114.9ms) 
```

我们还尝试了一个简单的基准测试：

```
task :perf_top_list => :environment do
elapsed_time = Benchmark.realtime do
  500.times do
            users = TopRatingUsers.top_rating_users(20)
      end
end
puts elapsed_time 
```

结尾

基本上，这与上面显示的请求相同，但作为 rake 任务执行。rake 任务在旧服务器上大约需要 5 秒，在新服务器上需要 10 秒。这使得旧服务器的速度是新服务器的两倍，而 production.log 显示的速度是新服务器的十倍。

部署的应用程序在两台服务器上都有相同的设置，还有哪些其他因素可能会影响测量结果？

# height - TCPDF 计算像元高度

> ID：13380463
> 
> 赞同：0
> 
> 时间：2012-11-14T14:13:17.290
> 
> 标签：height, tcpdf

我已经尝试过搜索，但还没有找到任何好的东西，所以问题是我有 pdf 文档，它是由单元格中不同数量的数据生成的。所以现在我遇到了一个问题，我需要以某种方式计算数据或单元格高度..现在我有这样的代码..

```
$pdf->writeHTMLCell('', '', $pdf->margin_l, $pdf->margin_top + 29, $html, 0, 0, 0, true, 'L', true);
$pdf->writeHTMLCell('', '', $pdf->margin_l, $pdf->margin_top + 120, $html, 0, 0, 0, true, 'L', true);
$pdf->writeHTMLCell('', '', $pdf->margin_l, $pdf->margin_top + 210, $html, 0, 0, 0, true, 'L', true); 
```

我需要自动计算高度变量..有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:46:16.413

TCPDF 有[GetY()](http://www.tcpdf.org/doc/classTCPDF.html#ae3b6169ba729309f289a5ac9680dd799)方法，它将为您提供当前位置的纵坐标。

你可以这样使用它：你的*TCPDF*类对象`$pdf->GetY()`在哪里。`$pdf`

# gwt - 远程调用ejb

> ID：13380465
> 
> 赞同：2
> 
> 时间：2012-11-14T14:13:23.863
> 
> 标签：gwt, tomcat, jboss, ejb, gwt-rpc

是否可以从使用 RPC 编写的 GWT 客户端模块访问 EJB 远程接口方法？gwt 应用程序位于带有 Tomcat 的服务器上，而 EJB 部署在 Jboss 服务器上。如果可能的话，我在哪里可以找到示例代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:05:57.393

您提供的教程看起来不错，虽然它适用于命令行应用程序，但同样的概念应该适用于部署在 Tomcat 上的应用程序。你发现它有什么问题？

这里有一个更简单的示例：假设您有一个 EJB，在 JBoss 上部署了这个简单的接口：

```
package ejb.example;
import javax.ejb.Remote;
@Remote
public interface Example {
    public String hello (String nom);
} 
```

远程访问 EJB 的代码应该类似于：

```
// Simple EJB Client example
package ejbclient.example
import java.util.Properties;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import ejb.example.Example;   // Need to import the remote interface of the bean
public class ClientEJB {
   public static void main(String[] args) {
      try {
         // Set the properties to JBoss access
         Properties environment = new Properties();
         environment.put(Context.INITIAL_CONTEXT_FACTORY,      
                              "org.jnp.interfaces.NamingContextFactory");
         environment.put(Context.PROVIDER_URL,"yourjboserver.com:1099" );
         InitialContext context = new InitialContext(environment);

         // Once the proper context is set, we can obtain the dynamic proxy 
         Example accessEJB = (Example)
                                     context.lookup("ExampleBean/remote");
         // And finally we're done! We can access the EJB as if it was a regular object
         String result = accessEJB.hello("Kate"));
      } catch (NamingException e) {
         e.printStackTrace();
      }
  }
} 
```

需要注意的事项：

A. 正如教程中所说，您可以在 jndi.properties 文件中定义它们，而不是在源代码中硬编码上下文属性，如下所示：

```
java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory
java.naming.provider.url=yourJBossServer.com:JBossJNPPort 
```

这个文件应该放在类路径中，因此，在代码中你只需要调用：

```
InitialContext context = new InitialContext(); 
```

此解决方案更受欢迎且更优雅（它允许您在不重新编译客户端的情况下更改值）

B. 注意 context.lookup("ExampleBean/remote") 语句：默认情况下，JBoss 将接口的 JNDI 分配为类 Bean（实现）的名称，后缀为“/remote”或“/local”取决于接口的类型。对于直接部署在 jar 文件中的 EJB，如果 EJB 放置在 EAR 中，它会添加 ear 文件的名称作为前缀（例如，您的 EJB-jar 位于名为 myapp.ear 的耳朵中应该查找的是：“myapp/ExampleBean/remote”）。当然，您可能已经更改了 EJB 中的 JNDI 名称（使用注释或使用其部署描述符），在这种情况下，您将不得不使用这些名称。

C. 另一方面，您还需要在类路径中拥有 JBoss 客户端库，它们也在教程中列出（您可以将它们放在您的战争的 wEB-INF/lib 文件夹中）。

D. 最后，您还需要类路径中的远程接口。

我希望它有帮助！

# ruby - 更改 ActiveAdmin 删除方法

> ID：13380469
> 
> 赞同：0
> 
> 时间：2012-11-14T14:13:28.927
> 
> 标签：ruby, activeadmin

我正在为网站创建优惠券系统，我不想授予管理员删除优惠券的权利，而不是删除链接，我只想将我的字段状态从启用更新为禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T22:36:19.807

您可以挑选您想要的操作，然后创建一个“禁用”成员操作：

```
ActiveAdmin.register Voucher do
  actions :all, except: [:destroy]

  member_action :disable, :method => :put do
    voucher = Voucher.find(params[:id])
    voucher.update_attribute!(:status, "disabled")
  end

  action_item only: [:show] do
    unless voucher.status == "disabled"
      link_to("Disable", disable_admin_voucher_path(voucher), method: 'put')
    end
  end
end 
```

# c# - 从 C# 中的字符串中删除前缀模式

> ID：13380478
> 
> 赞同：0
> 
> 时间：2012-11-14T14:14:19.940
> 
> 标签：c#, regex, string

我必须使用一些可以包含某些前缀的文件/文件夹。例如，文件名可以是

> 1.2.0 MyDocfile.doc
> 1.1.2.3 另一个文件.txt

我希望能够删除前缀和之后的空格（1.2.0、1.1.2.3），然后只取实际的文件名。
做这个的最好方式是什么 ？常用表达 ？

有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T14:17:21.840

```
var formattedName = name.Substring(name.IndexOf(" ") + 1); 
```

如果是可选前缀，您需要正则表达式：

```
var formattedName = Regex.Replace(name, @"^[\d.]* ",  ""); 
```

要格式化所有文件名：

```
Regex regex = new Regex(@"^[\d.]* ");
IEnumerable<string> formattedNames = names.Select(f => regex.Replace(f, "")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T14:16:37.407

`"^[\\d.]* ?(.*)$"`应该给你捕获中的实际文件名。

这是一个通用的答案，因为我不知道 C#。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T14:17:13.537

您可以使用：

```
fileName = fileName.Substring(fileName.IndexOf(' ') + 1); 
```

如果名称中没有空格，它将只返回名称。这避免了对任何正则表达式的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T14:30:03.653

正则表达式将是最好的解决方案。如果前缀的格式与您描述的一致，则以下内容应将其删除：

```
filenames.RemoveAll(filename => Regex.IsMatch(filename, @"^([\d\.]+ )")); 
```

这是一个更完整的例子：

```
var filenames = new List<string> { "1.2.0 MyDocfile.doc", "1.1.2.3 Anotherfile.txt", "Otherfile.doc", " strange_file_name.docx" };
filenames.RemoveAll(filename => Regex.IsMatch(filename, @"^([\d\.]+ )"));    
filenames.ForEach(Console.WriteLine); 
```

这将打印“Otherfile.doc”和“strange_file_name.docx”。如果您还想删除最后一个文件（以空格开头），请使用以下模式`^([\d\.]* )`。

*更新：我添加了插入符号 '^' 以指示它应该匹配字符串的开头。*

# jquery - JQuery validator.addMethod 使用类名验证复选框

> ID：13380479
> 
> 赞同：2
> 
> 时间：2012-11-14T14:14:21.563
> 
> 标签：jquery, jquery-validate

我无法使用 jQuery validator.addMethod 来验证基于类名而不是名称的复选框。

看看这个，告诉我为什么脚本放在 html 内的脚本标签中时不起作用。

代码在这里：http: [//jsbin.com/ecozih/2](http://jsbin.com/ecozih/2)

如果将脚本移动到 JS bin 上的 JavaScript 窗口，它就可以工作。

如果有更简单的方法可以做到这一点，请告诉我。一个例子将不胜感激。

```
<html>
  <head>
<script src="hxxp://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="hxxp://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>

  </head>
<body>
<script>
$.validator.addMethod('interests', function (value) {
return $('.interests:checked').size() > 0; }, 'Pick one or more');
var checkboxes = $('.interests');
var checkbox_names = $.map(checkboxes, function(e,i) { return $(e).attr("name")}).join(" ");
$("#subscribeForm").validate({
    groups: { checks: checkbox_names },
    errorPlacement: function(error, element) {
             if (element.attr("type") == "checkbox")
               error.insertAfter(checkboxes.last());
             else
               error.insertAfter(element);
}
});
</script>
<form name="subscribeForm" id="subscribeForm" method="post">
<input type="checkbox" class="interests" value="1" name="group[1357][1]" ><label>Bananas</label>
<input type="checkbox" class="interests" value="2" name="group[1357][2]"><label>Oranges</label>
<input type="checkbox" class="interests" value="4" name="group[1357][4]"><label>Apples</label><br />
<label for="checks" generated="true" class="error" style=""></label><br />
<input type="submit" />
</form>
  </body> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:42:16.960

您忘记将 jQuery 代码包装在`document.ready`. 换句话说，您的 jQuery 正在尝试在元素构建之前选择元素。`document.ready`解决了这个问题。由于在`form`调用代码时 尚不存在，因此`document.ready`只有在 HTML DOM 准备好时才会触发。

jsFiddle 演示：http: [//jsfiddle.net/TCHYJ/](http://jsfiddle.net/TCHYJ/)

和你的 jsBin：http: [//jsbin.com/ecozih/4/edit](http://jsbin.com/ecozih/4/edit)

**引用**： *“如果你将脚本移到 JS bin 上的 JavaScript 窗口，它就可以工作。”*

这是因为，jsBin 和 jsFiddle 的 JavaScript 窗格中的代码在被触发之前等待 DOM 加载，无论您是否使用`document.ready`。

[http://jsfiddle.net/TCHYJ/1/](http://jsfiddle.net/TCHYJ/1/)

[http://jsbin.com/ecozih/6/edit](http://jsbin.com/ecozih/6/edit)

```
<script>
    $(document).ready(function() {

        $.validator.addMethod('interests', function(value) {
            return $('.interests:checked').size() > 0;
        }, 'Pick one or more');
        var checkboxes = $('.interests');
        var checkbox_names = $.map(checkboxes, function(e, i) {
            return $(e).attr("name")
        }).join(" ");

        $("#subscribeForm").validate({
            groups: {
                checks: checkbox_names
            },
            errorPlacement: function(error, element) {
                if (element.attr("type") == "checkbox") error.insertAfter(checkboxes.last());
                else error.insertAfter(element);
            }
        });

    });​
</script> 
```

# mysql - 在 2 个 MySQL 数据库之间复制数据 - 存储过程可以做到这一点吗？

> ID：13380485
> 
> 赞同：1
> 
> 时间：2012-11-14T14:14:45.057
> 
> 标签：mysql, database-connection

我们在不同的服务器上有两个数据库 - S1 是一个远程服务器，其中一个数据库用于登录身份验证，S2 有我们的应用程序和应用程序数据库。当您登录时，我们根据 S1 检查用户，然后使用一些 S1 数据在 S2 中创建一个用户对象。

这是 S2 中的存储过程可以做的事情 - 访问远程 DB 并从中选择数据 - 还是我们最好让应用程序查询 S1 的数据，然后将其传递给 S2 进行保存？

假设我想将`id`and`name`从 DB1.users 复制到`user_id`DB2.game_users `user_name`，理想的情况是 DB2 中的存储过程，它只是`id`作为参数传递......但是它如何获得远程 DB 的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:25:43.220

你看过联邦引擎吗？

[http://dev.mysql.com/doc/refman/5.0/en/federated-use.html](http://dev.mysql.com/doc/refman/5.0/en/federated-use.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:21:45.240

您需要将数据库名称预先附加到查询中的元素。

类似于（假设 db1 和 db2 是您的数据库）：

```
SELECT db1.table1.id, db1.table1.country FROM db1, db2 ORDER BY db2.table2.cities 
```

# javascript - Javascript 本地存储首选项

> ID：13380493
> 
> 赞同：1
> 
> 时间：2012-11-14T14:15:03.547
> 
> 标签：javascript, android, cordova, web, local-storage

我有以下脚本：我希望我的应用程序能够访问并记住此页面的第二次启动：这是我尝试过的方法，但它不起作用。

```
<script>
if (localStorage.getItem("0") === null) {
//do nothing 
}
else if(localStorage.getItem("1")===null{
}
else if(localStorage.getItem("2")===null{
}
else if(localStorage.getItem("3")===null{
}
else if(localStorage.getItem("0") !==null){
window.location = "cosmote.html"
}
else if(localStorage.getItem("1") !==null){
window.location = "germanos.html"
}
else if(localStorage.getItem("2") !==null){
window.location = "zapp.html"
}
else if(localStorage.getItem("3") !==null){
window.location = "sunlight.html"
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:19:17.140

将最后一页的值存储在一个本地存储区域中不是更好吗？

然后打一个电话，例如`localStorage.getItem("lastPage");`

然后进行切换或再次执行其他操作，这将保存对本地存储的多次访问。

这将使它更有效和可读，或者如果不是这种情况，至少为每个页面使用一个对象和一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:21:58.633

你还有一些额外的括号。不确定这是否是您的问题。

查看[http://www.jstorage.info/](http://www.jstorage.info/)了解用于与本地存储交互的小型简单 Javascript 库。

# blackberry - 黑莓手机监听器不工作

> ID：13380495
> 
> 赞同：1
> 
> 时间：2012-11-14T14:15:07.677
> 
> 标签：blackberry, java-me, listener

当我使用模拟器时，一切正常。但是，当我在真机上调试时，电话监听器什么也听不到；例如接听电话、接通电话等。

关于可能出问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:19:24.920

模拟器会忽略权限和签名密钥。确保您的应用程序已[签名](https://www.blackberry.com/SignedKeys/)并在真实设备上使用时请求正确的权限。对于电话监听器，您需要[电话权限](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/applicationcontrol/ApplicationPermissions.html#PERMISSION_PHONE)。

# javascript - 如何从中获取所选项目 在javascript中

> ID：13380498
> 
> 赞同：0
> 
> 时间：2012-11-14T14:15:14.717
> 
> 标签：javascript, jsf, selectonemenu

我正在尝试从我的 selectOneMenu onchange 中获取所选项目，但它不起作用。每次我更改下拉菜单并选择另一个选项时，我的网络浏览器上的控制台都会显示

***属性“getOffset”的值为 null 或未定义，不是 Function 对象***

这是我的 .xhtml 页面，名为 ProgramDetails.xhtml

```
<h:dataTable id="DispatchConfigurationCustom" columnClasses="portlet-table-same portlet-table-cell" headerClass="portlet-table-same portlet-table-cell" value="#{CRUDOperatorProgram.workflowStepList}" var="workflowConfig" width="100%">
<h:column>
    <f:facet name="header">
        <h:outputText value="Include" />
    </f:facet>
    <h:selectBooleanCheckbox id="includeInd" value="#{workflowConfig.isIncludedInd}"/>
</h:column>
<h:column>
    <f:facet name="header">
        <h:outputText value="Automate" />
    </f:facet>
    <h:selectOneRadio id="onOff" value="#{workflowConfig.isAutomatedInd}">
        <f:selectItem id="onButton" itemLabel="On" itemValue="1" />
        <f:selectItem id="offButton" itemLabel="Off" itemValue="0" />
    </h:selectOneRadio>
</h:column>
<h:column>
    <f:facet name="header">
        <h:outputText value="Action Step" />
    </f:facet>
    <h:outputText value="#{workflowConfig.workflowStep.displayLabel}" />
</h:column>
<h:column>
    <f:facet name="header">
        <h:outputText value="Offset Prior" />
    </f:facet>
    <label for="offsetPriorBoxHour"><h:outputText value="hrs:" rendered="#{workflowConfig.workflowStep.displayLabel == 'Curtail Notification'}" /></label>
    <h:selectOneMenu styleClass="portlet-dropdown"  rendered="#{workflowConfig.workflowStep.displayLabel == 'Curtail Notification'}"  id="offsetPriorBoxHour" value="#{workflowConfig.offsetMinutes}" onchange="getOffset(this);">
        <f:selectItems value="${CRUDOperatorProgram.hourList}" />
    </h:selectOneMenu>
    <label for="offsetPriorBoxMin"><h:outputText value="min:" rendered="#{workflowConfig.workflowStep.displayLabel == 'Curtail Notification' or workflowConfig.workflowStep.displayLabel == 'Multisite Follow Up' or workflowConfig.workflowStep.displayLabel == 'Curtail Toggle'}" /></label>
    <h:selectOneMenu styleClass="portlet-dropdown"  rendered="#{workflowConfig.workflowStep.displayLabel == 'Curtail Notification' or workflowConfig.workflowStep.displayLabel == 'Multisite Follow Up' or workflowConfig.workflowStep.displayLabel == 'Curtail Toggle'}"  id="offsetPriorBoxMin" value="#{workflowConfig.offsetMinutes}" onchange="getOffset(this);">
        <f:selectItems value="${CRUDOperatorProgram.minuteList}" />
    </h:selectOneMenu>
</h:column>
<h:column>
    <f:facet name="header">
        <h:outputText value="Offset After" />
    </f:facet>
    <label for="offsetAfterBoxMin"><h:outputText value="min:" rendered="#{workflowConfig.workflowStep.displayLabel == 'Restore Notification' or workflowConfig.workflowStep.displayLabel == 'Overlapping Follow Up' or workflowConfig.workflowStep.displayLabel == 'Restore'}" /></label>
    <h:selectOneMenu styleClass="portlet-dropdown"  rendered="#{workflowConfig.workflowStep.displayLabel == 'Restore Notification' or workflowConfig.workflowStep.displayLabel == 'Overlapping Follow Up' or workflowConfig.workflowStep.displayLabel == 'Restore'}"  id="offsetAfterBoxMin" value="#{workflowConfig.offsetMinutes}" onchange="getOffset(this);">
        <f:selectItems value="${CRUDOperatorProgram.minuteList}" />
    </h:selectOneMenu>
</h:column>
<h:column>
    <f:facet name="header">
        <h:outputText value="Offset Target" />
    </f:facet>
    <h:outputText rendered="#{workflowConfig.workflowStep.displayLabel == 'Curtail Notification' or workflowConfig.workflowStep.displayLabel == 'Multisite Follow Up' or workflowConfig.workflowStep.displayLabel == 'Curtail Toggle'}"  id="offsetTargetStartBox" value="Start" />
    <h:outputText rendered="#{workflowConfig.workflowStep.displayLabel == 'Restore Notification' or workflowConfig.workflowStep.displayLabel == 'Overlapping Follow Up' or workflowConfig.workflowStep.displayLabel == 'Restore'}"  id="offsetTargetEndBox" value="End" />
</h:column>
<h:column>
    <f:facet name="header">
        <h:outputText value="Offset Summary" />
    </f:facet>
    <h:outputText rendered="#{workflowConfig.workflowStep.displayLabel == 'Curtail Notification' or workflowConfig.workflowStep.displayLabel == 'Multisite Follow Up' or workflowConfig.workflowStep.displayLabel == 'Curtail Toggle'}"  id="offsetSummaryBeforeBox" value="before Start time" />
    <h:outputText rendered="#{workflowConfig.workflowStep.displayLabel == 'Restore Notification' or workflowConfig.workflowStep.displayLabel == 'Overlapping Follow Up' or workflowConfig.workflowStep.displayLabel == 'Restore'}"  id="offsetSummaryAfterBox" value="after End time" />
</h:column>
<script>
    function getOffset( dropdown ) {
        var minutesTemp = dropdown.options[dropdown.selectedIndex].value;
        var minutes = minutesTemp.toString();
        alert("Minutes: " + minutes);
    // <![CDATA[
        if(document.getElementById('ProgramDetails:DispatchConfigurationCustom:0:offsetPriorBoxHour') != null) {
            var hourBox = document.getElementById('ProgramDetails:DispatchConfigurationCustom:0:offsetPriorBoxHour');
            var hourTemp = hourBox.options[hourBox.selectedIndex].value;
            var hour = hourTemp.toString();
            document.getElementById('ProgramDetails:DispatchConfigurationCustom:0:offsetSummaryBeforeBox').value = hours + " hours and " + minutes + " minutes before Start time";
        } else if(document.getElementById('ProgramDetails:DispatchConfigurationCustom:0:offsetSummaryBeforeBox') != null) {
            document.getElementById('ProgramDetails:DispatchConfigurationCustom:0:offsetSummaryBeforeBox').value = minutes + " minutes before Start time";
        } else { 
            document.getElementById('ProgramDetails:DispatchConfigurationCustom:0:offsetSummaryAfterBox').value = minutes + " minutes before Start time";
        }
        //]]>
    }

</script>
</h:dataTable> 
```

这些是填充 selectOneMenu 的 hourList 和 minuteList 方法...

```
private void loadMinuteList() {
    minuteList = new ArrayList<SelectItem>();
    for(Integer i=0; i<=60; i++){
        minuteList.add(new SelectItem(i, i.toString()));
    }
}

private void loadHourList() {
    hourList = new ArrayList<SelectItem>();
    for(Integer i=0; i<=30; i++){
        hourList.add(new SelectItem(i, i.toString()));
    }
} 
```

对不起所有长代码块。我只是想给你我能提供的最多信息。我使用 javascript 的方式有问题吗？还是 onchange=""？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:23:02.820

您的脚本中有 2 个问题：

```
var minutesTemp = dropdown.options[dropdown.selectedIndex].value.; 
```

去掉最后的附加`.`部分

和

```
else (document.getElementById('ProgramDetails:DispatchConfigurationCustom:0:offsetSummaryBeforeBox') != null) {
   document.getElementById('ProgramDetails:DispatchConfigurationCustom:0:offsetSummaryBeforeBox').value = minutes + " minutes before Start time";
} 
```

应该

```
else if (document.getElementById('ProgramDetails:DispatchConfigurationCustom:0:offsetSummaryBeforeBox') != null) {
   document.getElementById('ProgramDetails:DispatchConfigurationCustom:0:offsetSummaryBeforeBox').value = minutes + " minutes before Start time";
} 
```

即在`if`之后添加`else`- 使用时您无法检查条件，`else`除非您也`if`包含

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:19:29.413

请试试这个：

```
<h:selectOneMenu styleClass="portlet-dropdown"  rendered="#{workflowConfig.workflowStep.displayLabel == 'Restore Notification' or workflowConfig.workflowStep.displayLabel == 'Overlapping Follow Up' or workflowConfig.workflowStep.displayLabel == 'Restore'}"  id="offsetAfterBoxMin" value="#{workflowConfig.offsetMinutes}" onchange="getOffset(offsetAfterBoxMin[index].value);">
    <f:selectItems value="${CRUDOperatorProgram.minuteList}" />
</h:selectOneMenu> 
```

并删除：`var minutesTemp = dropdown.options[dropdown.selectedIndex].value;` 或

```
<h:selectOneMenu styleClass="portlet-dropdown"  rendered="#{workflowConfig.workflowStep.displayLabel == 'Restore Notification' or workflowConfig.workflowStep.displayLabel == 'Overlapping Follow Up' or workflowConfig.workflowStep.displayLabel == 'Restore'}"  id="offsetAfterBoxMin" value="#{workflowConfig.offsetMinutes}">
    <f:selectItems value="${CRUDOperatorProgram.minuteList}" />
    <f:ajax event="valueChange" execute="getOgetOffset(offsetAfterBoxMin[index].value);"/>
</h:selectOneMenu> 
```

# ruby-on-rails - 单独文件中的 ActiveModel 验证

> ID：13380499
> 
> 赞同：0
> 
> 时间：2012-11-14T14:15:21.830
> 
> 标签：ruby-on-rails, validation, activemodel

有没有办法`ActiveModel`在单独的文件中完成验证？有**自定义验证的可能性**

```
class MyValidator < ActiveModel::Validator 
 … 
end 
```

并打电话给他们：`validates_with MyValidator`

但是默认的验证助手命令在`MyValidator`.

我只需要使用：`validates_length_of`在一个单独的文件中，最好由各种模型调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:45:03.497

我找到了一个非常简单的解决方案。因为自定义验证器类必须实现`validate(record)`模型作为 ActiveRecord 传递给方法的方法。所有 HelperMethods 都可以通过在此方法中调用来获得：

```
record.validate_presence_of :attribute 
```

# jquery - 旋转到横向时的左边距

> ID：13380505
> 
> 赞同：0
> 
> 时间：2012-11-14T14:15:42.517
> 
> 标签：jquery, ipad, responsive-design

我正在使用 JQuery 视差滑块效果。一切都适合 iPad 上的屏幕，除了当我从横向旋转到纵向时，有大约 120 像素的右边距将我的滑块内容推到右侧。

我试过设置视口标签

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" /> 
```

但这什么也没做。当我直接以纵向进入页面时，这很好。只有当我从横向旋转到纵向时才会添加右边距。纵向到横向适当调整大小。

这是示例 [演示](http://widget.devserver2012.com/katkeegan/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:16:54.817

A quick, dirty fix would probably be to execute a method to reset the margins when the `onorientationchange` event is triggered on the `body`.

So example code would be as follows:

```
<body onorientationchange= "fixMargins()">

....

function fixMargins() {
    var orientation = window.orientation;
    switch (orientation) {
        case 0: // portrait 
            $('div').css('margin-right', '40px');
            break;
        case 90: // landscape left
            $('div').css('margin-right', '40px');
            break;
        case -90: //landscape right
            $('div').css('margin-right', '40px');
            break;
        case 180: // portrait upside down
            $('div').css('margin-right', '40px');
            break;
    }
} 
```

Obviously this is not ideal and you would prefer an explanation for why this happens. But I just thought I'd suggest this as a quick fix

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:24:42.157

我认为您必须检查方向更改事件并以这种方式设置所需的边距：

```
$(window).bind('orientationchange', function(e){

    if(e.orientation){

      if(e.orientation == 'portrait'){

              //do something
              //about your margins for portrait

      }

      else if(e.orientation == 'landscape') {

              //do something
              //about your margins for landscape

      }
   }

}); 
```

# svn - 如何以正确的顺序显示 svn 树的内容

> ID：13380506
> 
> 赞同：-1
> 
> 时间：2012-11-14T14:15:45.590
> 
> 标签：svn, tortoisesvn

我想使用 svn 命令行按一定顺序显示树数据。

我希望按此顺序显示以下信息：

文件名： 修订： 日期： 大小：

我正在尝试使用以下命令，但它以错误的顺序输出？？

svn ls -Rv [http://path.to.repo](http://path.to.repo) > output.txt

如何控制输出的顺序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:33:31.590

我刚刚创建了输出文件并在 Word/Ecell 中进行操作，谢谢

# sql - 一项活动的总和

> ID：13380512
> 
> 赞同：0
> 
> 时间：2012-11-14T14:16:11.213
> 
> 标签：sql, oracle

我有这些表，我正在尝试计算每部电影的售出座位数。我仍然无法让它工作，我只能得到所有电影的售出座位总数。

```
Movie:
moveID
mName

Prog:
progID
moveID
showID

Show:
showID
show start
show stop
soldSeats
progID 
```

这是一直在处理的代码之一：

```
SELECT mName, SUM(soldSeats)
FROM movie, show
WHERE movie.movieID = prog.movieID
AND prog.showID = show.showID
GROUP BY mName 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:19:47.467

您没有加入该表`Prog`。此外，您应该在查询中真正使用适当的显式连接。

```
SELECT M.mName, SUM(S.sodSeats) SoldSeats
FROM Movie M
LEFT JOIN Prog P
    ON M.movieID = P.movieID
LEFT JOIN Show S
    ON P.showID = S.showID
GROUP BY M.mName 
```

# batch-file - 一种有两个 findstr （和管道输出）

> ID：13380514
> 
> 赞同：3
> 
> 时间：2012-11-14T14:16:15.917
> 
> 标签：batch-file, findstr

我有 50 个文件，名称如下：`CPUNAME_installer.txt`每个文件的内容如下：

```
CPUNAME;11724;sdaasdasdasdasdasdasd
CPUNAME;1034;231asddasd
CPUNAME;1035;231asddasd
CPUNAME;10741;231asddasd
CPUNAME;10111;231asddasd 
```

...等等，数百行。我想检查是否有代码为 11724、1034 或 1487 的行，如果为真，则将整行通过管道传输到另一个文件夹中具有相同名称的另一个文本文件。

现在我有这个工作解决方案：

```
for %%f in (*_installer.txt) do (
    type %%f | findstr /I /C:"11724">>outfolder\%%f
    type %%f | findstr /I /C:"1034">>outfolder\%%f
    type %%f | findstr /I /C:"1487">>outfolder\%%f
) 
```

...但它需要很多时间，因为它为每个文件执行六个命令。

是否可以通过减少每个文件（或类似文件）的命令数量来改善这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T14:37:24.197

阅读 FINDSTR 文档，（`HELP FINDSTR`从命令窗口键入） - 您将看到 FINDSTR 可以一次搜索多个字符串。

由于这个错误，您使用带有多个搜索字符串的 /I 选项很好：[为什么这个带有多个文字搜索字符串的 FINDSTR 示例找不到匹配项？](https://stackoverflow.com/q/8921253/1012053).

此外，无需 TYPE 内容和管道到 FINDSTR。您可以简单地将文件名作为参数传递。

在您的情况下，由于您的字符串不包含空格，因此您的代码可能如下所示：搜索字符串由空格分隔。

```
for %%f in (*_installer.txt) do findstr /i "11724 1034 1487" "%%f" >"outfolder\%%f" 
```

小心上面的。如果您更改搜索字符串，您可能需要添加`/L`选项以强制将字符串视为字符串文字而不是正则表达式。

指定多个搜索的另一种方法是使用多个`/C`选项。`/R`除非使用该选项，否则这些搜索字符串始终被视为文字。

```
for %%f in (*_installer.txt) do findstr /i /c:"11724" /c:"1034" /c:"1487" "%%f" >"outfolder\%%f" 
```

您可能还想调查该`/G:file`选项。它允许您将搜索字符串放在单独的文本文件中，每行一个。您可以使用此技术方便地搜索*许多*字符串。

**附言**

使用 FINDSTR 时*有*许多未记录的问题。您可能有兴趣阅读[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/q/8844868/1012053)

# jquery - JS如何从URL中获取参数名称

> ID：13380515
> 
> 赞同：0
> 
> 时间：2012-11-14T14:16:16.570
> 
> 标签：jquery

我目前在其网址为的页面中`http://localhost:49852/Default.aspx?MID=17`

在此页面中，我有以下代码

```
<a href="Configure.aspx"><span class="ico gray shadow gear"></span>Configure</a> 
```

我希望一旦用户单击`Configure`链接，URL 中的 MID 参数将被裁剪，用户将被重定向到

```
http://localhost:49852/Configure.aspx?MID=17 
```

这是 JS 代码

```
function getParameterByName(name) {
    var match = RegExp('[?&]' + name + '=([^&]*)')
            .exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
} 
```

我如何将它们绑定在一起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:20:28.603

首先，我认为您应该为您的 href 提供一个 id 以便于访问，例如：

```
<a href="Configure.aspx" id="configure"><span class="ico gray shadow gear"></span>Configure</a> 
```

然后你应该能够改变属性：

```
$(function() {
    var href = $("#configure").attr("href");
    $("#configure").attr("href", href + getParameterByName("MID"))
}); 
```

这将改变实际的href。您可能也可以轻松地覆盖 click 方法，但如果您想将其从配置链接更改为所有链接或其他内容，这可能更具可扩展性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:21:11.733

您可以在元素上附加一个单击事件侦听器，并在单击时进行修改`window.location`以执行重定向。像这样的东西：

```
$(function () {
   // You might need to use a better selector here, 
   // add an ID to the span element and select on that instead
   $("span.ico").on("click", function () {
      window.location.href = "Configure.aspx?MID=" + getParameterByName("MID");
      return false;
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:24:40.793

您可以使用这个很好的函数从 QueryString 中解析 MID，如[Parse query string in JavaScript 中](https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript) 所述，并使用它构建一个新 URL。

```
function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
    console.log('Query variable %s not found', variable);
} 
```

喜欢 ;

```
var mid = getQueryVariable(MID);
var url = 'http://localhost:49852/Configure.aspx?MID='+mid;
location.href=url; 
```

# events - 应该如何在 F# 接口中声明事件？

> ID：13380519
> 
> 赞同：22
> 
> 时间：2012-11-14T14:16:37.007
> 
> 标签：events, interface, f#

在 F# 中发布事件的标准方式现在似乎如下：

```
type MyDelegate = delegate of obj * EventArgs -> unit

type MyType () =
    let myEvent = new Event<MyDelegate, EventArgs> ()

    [<CLIEvent>]
    member this.OnMyEvent = myEvent.Publish 
```

这很好用，包括能够从其他 .NET 语言（至少我测试过的 C#）中使用该事件。但是如何让该事件显示在界面中呢？这就是我正在尝试的...

```
type MyDelegate = delegate of obj * EventArgs -> unit

type IMyType =
    abstract member OnMyEvent : IEvent<MyDelegate, EventArgs>

type MyType () =
    let myEvent = new Event<MyDelegate, EventArgs> ()

    interface IMyType with
        [<CLIEvent>]
        member this.OnMyEvent = myEvent.Publish 
```

但这不会编译 - 接口中的成员会导致错误：“未找到与此覆盖相对应的抽象或接口成员”。我应该如何在我的界面中声明事件？还是我的成员语法错误？

注意 - 这**不是**关于在 F# 中使用 C# 事件或在 F# 中使用一般事件 - 接口方面是关键。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-14T14:38:35.300

您需要在接口和实现上都指定 CLIEvent 属性。

```
open System;

type MyDelegate = delegate of obj * EventArgs -> unit

type IMyType =
    [<CLIEvent>]
    abstract member OnMyEvent : IEvent<MyDelegate, EventArgs>

type MyType () =
    let myEvent = new Event<MyDelegate, EventArgs> ()

    interface IMyType with
        [<CLIEvent>]
        member this.OnMyEvent = myEvent.Publish 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-14T21:39:02.340

除了 thr 的回答，在接口和实现中都写*不使用*`CLIEvent`属性的代码也是有效的：

```
type MyDelegate = delegate of obj * EventArgs -> unit

type IMyType =
    abstract member OnMyEvent : IEvent<MyDelegate, EventArgs>

type MyType () =
    let myEvent = new Event<MyDelegate, EventArgs> ()    
    interface IMyType with
        member this.OnMyEvent = myEvent.Publish 
```

原因是 F# 编译器可以通过两种方式编译事件：

*   当您指定属性时，该事件将被编译为具有底层`add`和`remove`操作的 .NET 事件（与 C# 兼容）。

*   当您不指定属性时，该事件将编译为一个 .NET 属性（带有`get`），该属性返回一个类型的值`IEvent<'T>`（在 F# 核心库中定义）。

因此，您的接口定义必须与实现匹配（遗憾的是，自动推断这一点非常棘手，因此编译器不会这样做）。

您需要哪个选项？如果您要向 C# 公开代码，那么您肯定需要`CLIEvent`. 如果您只是从 F# 中使用它，那么它并不重要 - 但是，当您经常将事件传递给函数时避免使用它可能会更有效 - 例如在`myTyp.OnMyEvent |> Event.map (...)`
（在第一个表示中，事件需要被包裹到一个`IEvent<_>`对象中，而在第二种情况下，它可以使用属性获取对象）。

# ruby-on-rails - Cucumber 和 URI::InvalidURIError 的问题

> ID：13380520
> 
> 赞同：0
> 
> 时间：2012-11-14T14:16:42.530
> 
> 标签：ruby-on-rails, selenium, cucumber

我正在尝试开始我的黄瓜测试。我得到错误：

```
bad URI (absolute but no path): http:// (URI::InvalidURIError)
/home/de..........:common.rb:146:in 'split'
/home/de..........:common.rb:211:in 'parse'
/home/de..........:common.rb:747:in 'parse'
... 
```

如何解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:48:08.803

问题是因为 ubuntu 中的 http_proxy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:32:43.310

可能是黄瓜功能文件中某处指定的 url 中的空格，如下所述：http: [//www.practicalguile.com/2007/09/15/raising-uriinvalidurierror-from-a-perfectly-valid-uri /](http://www.practicalguile.com/2007/09/15/raising-uriinvalidurierror-from-a-perfectly-valid-uri/)

# sql - 当两个表之一中不存在行时，将 sql j 中的两个表与不匹配的行连接起来

> ID：13380523
> 
> 赞同：1
> 
> 时间：2012-11-14T14:17:04.690
> 
> 标签：sql, oracle-sqldeveloper

我有两张桌子，上面有售出物品的数量。我需要比较这两个表并获取不匹配的记录，一个表中售出的商品总和不等于另一表中售出的单位数量

```
select * from 
(select sum(units) AS UNITS, item, location, tran_date from tran_data_history where tran_date  = '' and tran_code = 1 group by item, location,tran_date)A,
(select sum(qty) AS QTY, item, store from sa_tran_item where  tran_Seq_no =''
)B
where A.item = B.item and A.location = B.store and A.UNITS <> B.QTY; 
```

它给了我两个表中项目数不匹配的行。但我想要那些出现在一张桌子上而不出现在另一张桌子上的商品、商店组合。

例如 tran_data_history

```
item location units
11     a        5
22      b        1
33      c        4 
```

sa_tran_item

```
item  store  qty
11      a     4
33      c      4 
```

在 sa_tran_item 中，第 33 项未发布，我想显示行

```
item  store  qty  units
11      a     4    5
22      b      0    1 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:30:05.947

```
select * from 
(select sum(units) AS UNITS, item, location, tran_date from tran_data_history where tran_date  = '' and tran_code = 1 group by item, location,tran_date) A
    full outer join 
(select sum(qty) AS QTY, item, store from sa_tran_item where  tran_Seq_no ='')B
on A.item = B.item and A.location = B.store 
where A.UNITS <> B.QTY; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:30:25.127

我现在没有安装 DB 的计算机，但您似乎想要进行 FULL OUTER JOIN。[请参阅SQL JOIN](http://en.wikipedia.org/wiki/Sql_join) Wikipedia 条目的 FULL OUTER JOIN 部分。此代码应允许您满足您的要求：

```
select 
    * 
from 
    (
        select 
            sum(units) AS UNITS
            , item
            , location
            , tran_date 
        from 
            tran_data_history 
        where 
            tran_date  = '' 
            and tran_code = 1 
        group by 
            item
            , location
            ,tran_date
    )A
FULL OUTER JOIN
    (
        select 
            sum(qty) AS QTY
            , item
            , store 
        from 
            sa_tran_item 
        where  
            tran_Seq_no =''
    )B 
 ON
 A.item = B.item 
 and A.location = B.store
 and and A.UNITS <> B.QTY
/ 
```

# php - 通过在表单中 发布一些特定值来获取生成的 html

> ID：13380533
> 
> 赞同：-2
> 
> 时间：2012-11-14T14:17:40.540
> 
> 标签：php, html, curl

如何获取在发布某些表单字段的结果中生成的 HTML？我想让它动态化。例如：对于下拉列表中的每个值，我想使用`cURL`. 是否可以与`cURL`请求一起发送一些参数？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:54:34.760

这是一个例子：

```
<?php
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,        "http://duckduckgo.com");
curl_setopt($ch, CURLOPT_POST,       TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, "q=val");

$result = curl_exec($ch);

curl_close($ch);

print($result);
?> 
```

在这里查看更多信息：http: [//davidwalsh.name/curl-post](http://davidwalsh.name/curl-post)

# scala - Scala 隐式参数的 Groovy 等效项 - 扩展

> ID：13380535
> 
> 赞同：1
> 
> 时间：2012-11-14T14:17:45.537
> 
> 标签：scala, groovy, closures, implicits

这个问题扩展了我之前[对 Scala 隐式参数的 Groovy 等效项](https://stackoverflow.com/questions/13378337/groovy-equivalent-for-scala-implicit-parameters)

不确定这是否是从以前的主题发展的正确方法，但无论如何..

我正在寻找一种用 groovy 表达的方式，如下所示：

```
// scala
object A {
    def doSomethingWith(implicit i:Int) = println ("Got "+i)
}
implicit var x = 5

A.doSomethingWith(6)  // Got 6
A.doSomethingWith     // Got 5

x = 0
A.doSomethingWith     // Got 0 
```

一般来说，我想执行一段逻辑，并根据执行“上下文”解析其中的变量。使用 scala 中的隐式，我似乎能够控制这种情况。我正在尝试找到一种在 groovy 中做类似事情的方法。

根据第一个问题的反馈，我尝试这样处理：

```
// groovy
class A {
    static Closure getDoSomethingWith() {return { i = value -> println "Got $i" }} 
}

value = 5

A.doSomethingWith(6)  // Got 6
A.doSomethingWith()   /* breaks with
                         Caught: groovy.lang.MissingPropertyException: 
                         No such property: value for class: A */ 
```

现在，我在[http://groovy.codehaus.org/Closures+-+Formal+Definition浏览了 groovy 闭包定义](http://groovy.codehaus.org/Closures+-+Formal+Definition)

据我了解，当调用 getter 时，失败发生为“编译器无法静态确定‘值’可用”

那么，有人对这种情况有什么建议吗？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:40:04.907

您还可以尝试更改返回的闭包的委托：

```
value = 5

Closure clos = A.doSomethingWith

// Set the closure delegate
clos.delegate = [ value: value ]

clos(6)  // Got 6
clos()   // Got 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:31:11.777

我设法通过检查脚本绑定中未解析的属性来做你想做的事：

```
class A {
  static Closure getDoSomethingWith() { { i = value -> println "Got $i" } } 
}
A.metaClass.static.propertyMissing = { String prop -> binding[prop] }

value = 5

A.doSomethingWith 6  // Got 6
A.doSomethingWith() // prints "Got 5" 
```

# javascript - 删除所有没有特定类的 li

> ID：13380537
> 
> 赞同：1
> 
> 时间：2012-11-14T14:17:52.650
> 
> 标签：javascript, jquery

我有一个`ul`清单。在那，有一些`li`s。我想删除所有`li`没有*孩子*的班级`noremove`。

这是我的 HTML：

```
<ul>
    <li>Item 1</li>
    <li>Item 2
        <ul>
            <li>Item 2.1</li>
            <li>Item 2.2</li>
            <li>Item 2.3</li>
        </ul>
    </li>
    <li>Item 3
        <ul>
           <li class="noremove">Item 3.1</li> 
           <li>Item 3.2</li>
        </ul>
    </li>
    <li class="noremove">Item 4
        <ul>
            <li>Item 4.1</li>
            <li>Item 4.2</li>
        </ul>
    </li>
    <li>Item 5
        <ul>
            <li>Item 5.1
                <ul>
                    <li class="noremove">Item 5.1.1</li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

脚本运行后，我希望它看起来像这样：

```
<ul>
    <li>Item 3
        <ul>
           <li class="noremove">Item 3.1</li>
        </ul>
    </li>
    <li class="noremove">Item 4</li>
     <li>Item 5
        <ul>
            <li>Item 5.1
                <ul>
                    <li class="noremove">Item 5.1.1</li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

如您所见，第 3 项没有被删除，因为它有一个带有`class="noremove"`. 但是，项目 3.2 被删除，因为它既没有`class="noremove"`班级也没有任何孩子。

我怎样才能制作一个可以做到这一点的脚本？它需要在列表上递归运行，我想不出该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T14:22:48.297

你想找到所有没有 noremove 类的 li，看看他们是否有一个带有 noremove 类的孩子：

```
$("ul li:not(.noremove)").filter(function(){
    return $(this).find(".noremove").length === 0;
}).remove(); 
```

演示：http: [//jsfiddle.net/kNvyF/](http://jsfiddle.net/kNvyF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:20:34.970

```
$('li').not('.noremove').remove() 
```

# html - 如何有效地比较两个 HTML 页面内容

> ID：13380542
> 
> 赞同：0
> 
> 时间：2012-11-14T14:18:13.237
> 
> 标签：html, ruby, string, nokogiri

我有两个 HTML 页面，我想比较它们的源代码。我已将页面源转换为字符串，我需要知道比较两个大字符串的最佳方法是什么。

*   我应该使用正常的比较方法，例如，`page1.eql?(page2)`？
*   是否`str.eql?(str1)`也比较符号，例如，`@`？

我真的很高兴知道比较的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:32:24.833

我不确定您希望比较的详细程度。如果您想要“类似差异”的功能，您可以查看之前提出的类似问题：[diff a ruby​​ string or array](https://stackoverflow.com/questions/80091/diff-a-ruby-string-or-array)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:36:27.750

这是打印字符串之间差异的 levenshtein 方法，我不确定这是否是您正在寻找的。否则我建议只使用 page1.eql?(page2)

```
def levenshtein(a, b)
  case
    when a.empty? then b.length
    when b.empty? then a.length
    else [(a[0] == b[0] ? 0 : 1) + levenshtein(a[1..-1], b[1..-1]),
          1 + levenshtein(a[1..-1], b),
          1 + levenshtein(a, b[1..-1])].min
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T22:23:08.307

查看`loofah`gem（[github 链接](https://github.com/flavorjones/lorax "github链接")）。它在语义上区分 HTML（和 XML）子树，这意味着忽略无意义的空格，忽略属性的顺序等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T04:39:36.863

尝试使用[http://prettydiff.com/?lang=html](http://prettydiff.com/?lang=html)

Pretty Diff 将去除注释和无意义的空白，以便进行最准确的比较。它还提供了用于微调不同类型的误报条件的高级选项。

# sql - 使用 FULL OUTER JOIN / COALESCE 时结果重复

> ID：13380543
> 
> 赞同：0
> 
> 时间：2012-11-14T14:18:15.663
> 
> 标签：sql, sql-server, sql-server-2008-r2

这是问题所在：

```
CREATE TABLE #datesX
    (
    [Name] [varchar] (8) NULL
    , [MarriedDate] datetime NULL
    , [HappyScoreX] [int] NULL
    ) 
INSERT INTO #datesX 
    values 
     ('TIM', null, 20),
     ('RAJ', '01 jan 2012', 20),
     ('PAUL', '01 jan 1960', 20)

CREATE TABLE #datesY
    (
    [Name] [varchar] (8) NULL
    , [FirstSprogDate] datetime NULL
    , [HappyScoreY] [int] NULL
    ) 
INSERT INTO #datesY 
    values 
     ('TIM', '01 jan 1995', 20),
     ('RAJ', '20 JUN 2013', 20),
     ('JASE', null, 20),
     ('PAUL', '01 jan 1970', 20)

CREATE TABLE #datesZ
    (
    [Name] [varchar] (8) NULL
    , [FoundGodDate] datetime NULL
    , [HappyScoreZ] [int] NULL
    ) 
INSERT INTO #datesZ 
    values 
     ('TIM', null, 20),
     ('RAJ', null, 20),
     ('JASE', '01 DEC 2012', 20),
     ('PAUL', '01 jan 1970', 20)

SELECT 
        [Name] = COALESCE(x.Name, y.Name, z.Name), 
        x.[MarriedDate],
        y.[FirstSprogDate],
        z.[FoundGodDate],
        [HappyScoreX] = SUM(ISNULL(x.[HappyScoreX],0.0)),
        [HappyScoreY] = SUM(ISNULL(y.[HappyScoreY],0.0)),
        [HappyScoreZ] = SUM(ISNULL(z.[HappyScoreZ],0.0))
FROM 
        #datesX x
        FULL OUTER JOIN #datesY y ON
                x.Name = y.Name 
        FULL OUTER JOIN #datesZ z ON
                x.Name = z.Name 
GROUP BY
        COALESCE(x.Name, y.Name, z.Name), 
        x.[MarriedDate],
        y.[FirstSprogDate],
        z.[FoundGodDate] 
```

我可以看到为什么记录`JASE`被重复 - 我如何修改查询以便`JASE`只有一条记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:27:05.417

试试这个加入：

```
FULL OUTER JOIN #datesY y ON
       x.Name = y.Name 
FULL OUTER JOIN #datesZ z ON
       coalesce(x.Name, y.name) = z.Name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:26:29.490

您希望每个名称一行。我的建议是先建立密钥，然后去获取行。

```
CREATE TABLE #nameKeys
(
  [Name] varchar(8) NOT NULL PRIMARY KEY
)

INSERT INTO #nameKeys ([Name])
SELECT DISTINCT [Name] FROM #datesX WHERE [Name] is not null
UNION
SELECT DISTINCT [Name] FROM #datesYY WHERE [Name] is not null
UNION
SELECT DISTINCT [Name] FROM #datesZ WHERE [Name] is not null

--Then later...

FROM
  #nameKeys n
  LEFT JOIN #datesX x ON n.[Name] = x.[Name]
  LEFT JOIN #datesY y ON n.[Name] = y.[Name]
  LEFT JOIN #datesZ z ON n.[Name] = z.[Name] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:39:43.810

您遇到的麻烦是您`FULL OUTER JOINS`在#datesX 上有两个。由于#datesX 中没有行，因为`JASE`您有行，因此您从 Y 和 Z 表中返回行，但最后一个 Full 外部说明您应该将 X.Name 与 Z.Name 匹配。下面的代码会给你你想要的（我认为|）

```
SELECT 
        [Name] = COALESCE(x.Name, y.Name, z.Name), 
        x.[MarriedDate],
        y.[FirstSprogDate],
        z.[FoundGodDate],
        [HappyScoreX] = SUM(ISNULL(x.[HappyScoreX],0.0)),
        [HappyScoreY] = SUM(ISNULL(y.[HappyScoreY],0.0)),
        [HappyScoreZ] = SUM(ISNULL(z.[HappyScoreZ],0.0))
FROM 
        #datesX x
        FULL OUTER JOIN #datesY y ON
                x.Name = y.Name 
        FULL OUTER JOIN #datesZ z ON
                z.Name = COALESCE(x.Name, y.Name)
GROUP BY
        COALESCE(x.Name, y.Name, z.Name), 
        x.[MarriedDate],
        y.[FirstSprogDate],
        z.[FoundGodDate] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T23:39:27.153

为了进一步建立大卫 B 的答案，使用 a 是有意义的`Common Table Expression`：

```
;WITH NameKeys
AS
(
    SELECT DISTINCT [Name] FROM #datesX WHERE [Name] is not null
    UNION
    SELECT DISTINCT [Name] FROM #datesYY WHERE [Name] is not null
    UNION
    SELECT DISTINCT [Name] FROM #datesZ WHERE [Name] is not null
)
SELECT 
        n.[Name], 
        x.[MarriedDate],
        y.[FirstSprogDate],
        z.[FoundGodDate],
        [HappyScoreX] = SUM(ISNULL(x.[HappyScoreX],0.0)),
        [HappyScoreY] = SUM(ISNULL(y.[HappyScoreY],0.0)),
        [HappyScoreZ] = SUM(ISNULL(z.[HappyScoreZ],0.0))
FROM NameKeys n
LEFT JOIN #datesX x ON n.[Name] = x.[Name]
LEFT JOIN #datesY y ON n.[Name] = y.[Name]
LEFT JOIN #datesZ z ON n.[Name] = z.[Name] 
```

# intellij-idea - OutOfMemoryError：Jboss AS 7 和 IntelliJ IDEA 上调试模式下的 PermGen 空间

> ID：13380547
> 
> 赞同：14
> 
> 时间：2012-11-14T14:18:28.670
> 
> 标签：intellij-idea, jboss7.x

我正在使用`IntelliJ IDEA`和`JBOSS AS 7`。当我尝试在调试模式下部署我的应用程序时，我发生了这个异常`java.lang.OutOfMemoryError: PermGen space`并且服务器没有响应。但是如果我用的是Eclipse，同一个服务器就不会有这样的问题！我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-14T14:44:26.173

这应该有助于：

![虚拟机选项](../Images/4dad1416ef4adef886b16d3fdd6391d0.png)

只需添加`-Xmx512m -XX:MaxPermSize=300m`到**VM 选项**字段。

# c++ - 在构造函数初始化列表中初始化成员数组（C++11之前）

> ID：13380551
> 
> 赞同：5
> 
> 时间：2012-11-14T14:18:40.463
> 
> 标签：c++, arrays, multidimensional-array, coding-style, initialization-list

据我所知，在 C++11 之前，在构造函数初始化列表中初始化成员数组的唯一方法是执行以下操作：

```
MyClass::MyClass(int arg) : member(arg), memberArray() {
    // anything else that needs to be done in the c'tor
} 
```

`for`但是，有几个人告诉我他们不赞成这种方法，并且在构造函数主体的循环中对其进行零初始化可能会更安全/更具可读性。

我还没有 C++11 支持，所以我不能使用初始化列表等。有没有人听说过阻止在构造函数初始化列表中初始化成员数组的指导方针？

此外，测试表明没有，但是将这种语法用于多维数组应该没有任何问题，对吗？（例如，这不是某些编译器出于某种原因搞砸的标准的一部分......）

我并不是说这是一个主观问题——我只是想知道是否有充分的理由使用/不使用上述语法。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T13:04:47.390

您可能想看看 StackOverflow 上的[相关问题](https://stackoverflow.com/a/5644911/1280582 "C++ 初始化非静态成员数组")：使用静态函数来初始化初始化列表中的成员数组可以实现您正在寻找的内容：

```
class MyClass
{
   typedef std::array< int, 2 > t_myA;
   static t_myA fillFunction(){ static t_myA const ret = {1,2}; return ret; };

   t_myA myArray;

   public MyClass();
}

MyClass::MyClass()
 : myArray( fillFunction() )
{
} 
```

# php - 在逐步过程中显示隐藏的表单

> ID：13380552
> 
> 赞同：0
> 
> 时间：2012-11-14T14:18:53.630
> 
> 标签：php, jquery

我有一个带有按钮的页面，该按钮在单击时隐藏了带有一些 jQuery 的表单：

```
<a id="customise" class="configure-demo" href="#">Configure new system &amp; get quote</a> 
```

用 jQuery 隐藏它是这样的：

```
<script type="text/javascript">
jQuery(document).ready(function( $ ) {
$("#customise").click(function(){
    $(".entire_product").hide();
    $(".customise").show();
});
});
</script> 
```

这会隐藏页面上最初的内容并显示隐藏的逐步表单。将有几个步骤，但每次单击下一步时，页面都会重新加载并显示下一步

```
<div class="customise" style="display:none;">    
<form class="form" method="POST" action="<?php the_permalink(); ?>">
        <? if (!$_POST['step']) { ?>
        <input type="hidden" name="step" value="1" />               

        Step 1 info.

        <?  } else if ($_POST['step'] == 1) {
            foreach($_POST as $name => $value) {
            if ($name <> "step") { echo "<input type=\"hidden\" name=\"$name\" value=\"$value\" />";  $field .= $name."=".$value."&";}
        } ?>
        <input type="hidden" name="step" value="2" />               

        Step 2 info

        <? } else if ($_POST['step'] == 2) { //do stuff 
            echo "Do stuff here";
        } ?>
    </form>
</div> 
```

问题是，当您单击表单上的下一步时，它会重新加载页面（应该如此），但随后表单会再次隐藏，直到单击问题顶部的按钮，然后才会显示下一步。

如何在重新加载时显示隐藏表单的同时显示表单的第 2 步？

显然，如果用户不在表单过程中，那么它应该隐藏表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:40:07.207

您的问题是您在每个“步骤”的末尾发布表格。

尝试这个：

```
<form id="customise" method="post" action=""> 

    <div id="first-step">
        <h2>Step 1 info</h2>
    </div>

    <div id="second-step">
        <h2>Step 2 info</h2><br>
        <h3>First name</h3><br>
        <input type="text" id="first-name">
    </div>

    <div id="third-step">
        <h2>Step 3 info</h2><br>
        <h3>Last name</h3><br>
        <input type="text" id="last-name">
    </div>

    <div id="fourth-step">
        <h2>Step 4 info</h2><br>
        <h3>Favourite food</h3><br>
        <input type="text" id="favourite-food">
    </div>

    <div id="last-step">
        <h2>Final step</h2><br>
        <h3>Entered data:</h3><br>
        <div id="mdata"></div><br>
        <input type="submit" value="Submit">
    </div>

</form> 
```

还有一些 JavaScript：

```
var prevLink = '<a class="prev" href="#">Previous step</a> ';
var nextLink = '</a><a class="next" href="#">Next step></a>';
var navHTML = '<div class="form-navigation">' + prevLink + nextLink + '</div>';
var FormData = [];

$(function() {

    // Initialization
    $('#customise > div').hide().append(navHTML);
    $('#first-step .prev').remove();
    $('#last-step .next').remove();

    // Show first step
    $('#first-step').show();

    $('a.next').click(function() {

        var whichStep = $(this).parent().parent().attr('id');

        if (whichStep == 'first-step') {
            // do nothing
        }

        else if (whichStep == 'second-step') {
            FormData[0] = $('#first-name').val();
        }

        else if (whichStep == 'third-step') {
            FormData[1] = $('#last-name').val();
        }

        else if (whichStep == 'fourth-step') {
            FormData[2] = $('#favourite-food').val();
            $('#mdata').html('Dear ' + FormData[0] + FormData[1] + '! I have some ' + FormData[2] + ' for you!');
            var paraData = "fname=" + FormData[0] + "&lname=" + FormData[1] + "&food=" + FormData[2];
            alert(paraData);
        }
        else if (whichStep == 'last-step') {
            // do nothing
        }

        $(this).parent().parent().hide(300).next().show(300);
    });

    $('a.prev').click(function() {
        $(this).parent().parent().hide(300).prev().show(300);
    });

}); 
```

或者，如果您需要在步骤之间进行服务器端验证，请使用 PHP 并将 $POST['step'] 作为参数传递给将处理输入的某些脚本。它充满了不完整的表格，所以请注意这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:09:16.240

你在寻找类似的东西吗？

HTML：

```
<form id="customise" method="post" action="">
<a href="#" id='nextStep'>next step</a>|<a href="#" id='previousStep'>previous step</a>
<div id="step1" class="form">
    <h2>Step 1</h2>
</div>

<div id="step2" class="form">
    <h2>Step 2</h2><br>
    <h3>First name</h3><br>
    <input type="text" id="first-name">
</div>

<div id="step3" class="form">
    <h2>Step 3</h2><br>
    <h3>Last name</h3><br>
    <input type="text" id="last-name">
</div>

<div id="step4" class="form">
    <h2>Step 4</h2><br>
    <h3>Car</h3><br>
    <input type="text" id="car">
</div> 
```

Javascript：

```
var step = 1;
var total = 4;
$(function(){
$('#customise > div').hide();
$('#step'+step).show();
$('#nextStep').click(function(){
    $('#step'+step).hide();
    step += 1;
    if(step > total)
    {
       step = 1;    
    }
    $('#step'+step).show();
});
    $('#previousStep').click(function(){
    $('#step'+step).hide();
    step -= 1;
    if(step == 0)
    {
       step = total;       
    }
    $('#step'+step).show();
});
}); 
```

这是 JS 小提琴：http: [//jsfiddle.net/d4MZa/](http://jsfiddle.net/d4MZa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:31:14.493

您可以将“step”元素包装在命名的 DIV 中，并在页面重新加载时使用隐藏的表单元素“step”的值隐藏/显示适当的元素。

# wpf - 框架中带有滚动条的 WPF 应用程序

> ID：13380553
> 
> 赞同：0
> 
> 时间：2012-11-14T14:18:55.703
> 
> 标签：wpf, uiscrollview, frame

我正在制作一个 WPF 应用程序，但我无法让滚动条工作

这是我在主页上的 Xaml：

```
 <Border Name="myBorder_FrameRight" BorderBrush="#FF3F0000" BorderThickness="2" Background="#8AFFFFFF" VerticalAlignment="Top" Grid.Column="1" Visibility="Collapsed">
            <ScrollViewer>
            <Frame MaxHeight="300" Name="myFrame_PagesRight" NavigationUIVisibility="Hidden" Navigated="myFrame_PagesRight_Navigated" 
                   ScrollViewer.CanContentScroll="True" 
                   ScrollViewer.HorizontalScrollBarVisibility="Visible"/>
            </ScrollViewer>
        </Border> 
```

我想在其中显示一个 Height="520" 的页面

但是页面在按钮处被截断，并且没有启用滚动条。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T14:34:30.070

尝试删除 ScrollViewer。

Frame 中已经有一个 ScrollViewer。如果将 Frame 放在 ScrollViewer 中，它将有两个 ScrollViewer。可以通过这种方式完成，但是您必须同时配置它们。

编辑：

最简单的：

```
<Border Name="myBorder_FrameRight">
        <Frame MaxHeight="300" Name="myFrame_PagesRight" NavigationUIVisibility="Hidden" />
</Border> 
```

# java - 使用流程构建器启动课程？

> ID：13380556
> 
> 赞同：2
> 
> 时间：2012-11-14T14:18:59.060
> 
> 标签：java, class, process, processbuilder

我想知道在java中是否可以使用流程构建器来启动一个类的实例..

喜欢

```
ProcessBuilder pb = new ProcessBuilder(new OtherClass());
Process my_other_class = pb.start(); 
```

或类似的东西..这甚至可能..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:34:42.190

`ProcessBuilder`用于启动另一个`Process`或简而言之，用于启动程序的新副本。

要运行另一种`public static void main(String[] args)`方法，您需要结合`ProcessBuilder`命令`java`行参数及其所有参数（类路径等）。**这将在另一个 JVM 中**创建该类的新实例

 **要在同一个 JVM 中创建一个类的另一个实例，您只需调用`new ClassName(parameters);`

如果您希望新类*独立于启动代码块*运行，则需要确保该类`implements Runnable`或`extends Thread`和正确启动；但是，*初始化*仍然在构造函数中完成。

由于这两个实例都是由其构造函数中的代码*初始化*的，因此不清楚您正在寻求*哪种初始化。*所有类都在其构造函数中初始化，因此添加`ProcessBuilder`似乎是一个令人困惑的“红鲱鱼”。**

# c# - 为什么 Assert.AreEqual() 在比较之前转换为对象？

> ID：13380557
> 
> 赞同：11
> 
> 时间：2012-11-14T14:19:06.900
> 
> 标签：c#, .net, unit-testing, assert

我正在编写一些单元测试，但以下断言失败：

```
Assert.AreEqual(expected.Episode, actual.Episode); 
```

如果我改为调用它，它会成功：

```
Assert.IsTrue(expected.Episode.Equals(actual.Episode)); 
```

在这种情况下，我假设`Assert.AreEqual()`最终会调用`Equals()`给定类型的方法`Episode.Equals()`。

但是，在**Microsoft.VisualStudio.TestTools.UnitTesting.Assert**的幕后，我发现了以下代码（由 ReSharper 反编译）：

```
public static void AreEqual<T>(T expected, T actual, string message, params object[] parameters)
{
    if (object.Equals((object)expected, (object)actual))
        return;
    Assert.HandleFail...
} 
```

这对我来说意味着该`AreEqual()`方法正在强制使用基本方法`expected`而不是我在类中编写的重载。基本方法将简单地检查引用是否相同，而它们不是。`actual``object``Equals()``Episode`

我有两个问题：

1.  我的解释实际上是正确的，还是我错过了什么？
2.  为什么框架要强制使用 object.Equals() 而不是该方法的重载？

如果它是相关的，这是我的方法：

```
public bool Equals(Episode other)
{
    return Number == other.Number &&
           CaseNote.Equals(other.CaseNote) &&
           Patient.Equals(other.Patient);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T14:30:02.140

它正在使用`object.Equals(object,object)`，它处理以下内容：

*   它们是相同的参考吗？
*   是参考还是两者都是`null`参考？

然后*在*处理完这些事情*后*继续使用。它必须将它们投射到，*因为这就是**需要的*。铸造 to也避免了一些并发症（因为一个盒子要么是常规的 boxed 要么是常规的 boxed ）。`x.Equals(y)` *`object` *`object.Equals(object,object)`*`object``Nullable<T>``T?``null``T`*

 *但是，它也可以实现为：

```
 if (EqualityComparer<T>.Default.Equals(expected,actual))
    return; 
```

它处理`Nullable<T>`, `IEquatable<T>`, `struct`vs`class`和其他一些没有任何装箱的场景。

但是：当前的实现可以完成这项工作，偶尔的盒子并不是世界末日（并且：如果你的类型是 a ，装箱甚至不是问题`class`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T15:10:12.223

在您的代码中，您还需要覆盖`Equals(object other)`（并且也需要覆盖 GetHashCode）。

只需将其添加到您的代码中

```
public bool Equals(Episode other)
{
    return Number == other.Number &&
           CaseNote.Equals(other.CaseNote) &&
           Patient.Equals(other.Patient);
}

public override bool Equals(object other)
{
    Episode castOther = other as Episode;
    if(castOther == null)
        return false;
    return this.Equals(castOther);
}

public override int GetHashCode()
{
    //TODO: Implement using the members you used in "Equals(Episode other)"
    throw new NotImplmentedExecption();
} 
```

记住 GetHashCode 如果两个对象相等，它们也**必须**返回相等的哈希码。这是一个帮助可视化的快速图表。

![在此处输入图像描述](../Images/ec7295a100952a3b904c83f5732dda3b.png)

您可能需要检查`CaseNote`和`Patient`类似的问题。*

# php - 使用 PHP 确保 HTTPS 和 WWW 存在于 URL 中

> ID：13380560
> 
> 赞同：0
> 
> 时间：2012-11-14T14:19:20.710
> 
> 标签：php, url

我试图弄清楚如何做到这一点。我想确保当有人访问 mysite.com 时，他们正在通过[https://www.mysite.com](https://www.mysite.com)

因此，对于其中任何一个：

```
http://mysite.com
http://www.mysite.com
https://mysite.com 
```

应改为：

```
https://www.mysite.com 
```

它还需要适用于所有子目录和文件。

所以这些中的任何一个：

```
http://mysite.com/about
http://www.mysite.com/page.php 
```

应改为：

```
https://www.mysite.com/about
https://www.mysite.com/page.php 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:04:10.723

如果您使用 mod_rewrite 运行 apache，则可以使用如下内容：

```
RewriteCond %{HTTPS} !=on [OR]
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^ https://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

其他服务器应该有类似的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:33:54.677

只需确保在页面开头包含以下代码：

```
if ( empty($_SERVER['HTTPS']) ) { //if not using https
    $server = $_SERVER['SERVER_NAME'];
    if ($server == 'mysite.com') {
        $server = 'www.' . $server;
    }
    header('Location: https://' . $server . $_SERVER['REQUEST_URI']);
} 
```

# nsis - 如何创建从开始菜单运行我的应用程序的快捷方式？

> ID：13380570
> 
> 赞同：1
> 
> 时间：2012-11-14T14:20:13.657
> 
> 标签：nsis

我已经编写了 nsis 脚本。使用 NSIS，如何创建 StartMenu 快捷方式以通过 Windows 中的此快捷方式文件夹运行我的应用程序？以下代码可以正常使用 STARTMENU 中的快捷方式文件夹打开文件夹。

```
CreateShortcut "$smprograms\my app\my shortcut.lnk" "c:\path\to\folder" 
```

我的问题是，

有什么方法可以直接通过 STARTMENU 中的这个快捷方式文件夹运行我的应用程序？

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:43:17.923

以下是创建启动和卸载（如果您在安装程序时生成卸载程序）快捷方式的安装程序的摘录：

```
CreateDirectory '$SMPROGRAMS\${Company}\${AppName}'
CreateShortCut '$SMPROGRAMS\${Company}\${AppName}\${AppName}.lnk' '$INSTDIR\${AppExeName}' "" '$INSTDIR\${AppExeName}' 0
CreateShortCut '$SMPROGRAMS\${Company}\${AppName}\Uninstall ${AppName}.lnk' '$INSTDIR\${AppUninstaller}' "" '$INSTDIR\${AppUninstaller}' 0 
```

、和在脚本的其他地方定义一次，因此脚本的某些部分足够通用，可以在多个安装程序中重用`Company`。`AppName``AppExeName``AppUninstaller`

# sql - SQL Server 合并语句 - 语法不正确

> ID：13380575
> 
> 赞同：3
> 
> 时间：2012-11-14T14:20:31.937
> 
> 标签：sql, sql-server

执行此 SQL 脚本时出现以下错误：

```
MERGE TridionCentres TridionCentres
USING (SELECT * FROM  #CentresToUpdate) NewInfo
ON (TridionCentres.[publication id] = NewInfo.[publication id] AND
    TridionCentres.centre_number = NewInfo.centre_number)
WHERE matched THEN 
  UPDATE 
    SET TridionCentres.centre = NewInfo.centre,
        TridionCentres.[date] = NewInfo.[date]; 
```

错误：

> *消息 156，级别 15，状态 1，第 5 行
> 关键字“WHERE”附近的语法不正确。*

我看不到我哪里出错了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T14:22:10.530

关键字是 WHEN，而不是 WHERE :)

更多关于它[here](http://technet.microsoft.com/en-us/library/bb510625.aspx)，但要回答的有点多。

# entity-framework - 防止实体框架创建复合主键

> ID：13380576
> 
> 赞同：0
> 
> 时间：2012-11-14T14:20:32.577
> 
> 标签：entity-framework

我试图弄清楚如何防止实体框架在我的一个表上创建复合主键。我有以下两个实体：

```
public class Entry
{
   public Int64 EntryID { get; set; }
   public string UserName { get; set; }
   public string EntrySubject { get; set; }
}

public class Revision
{
   public Int64 RevisionID { get; set; }
   public string RevisionDescription { get; set; }

   public Int64 EntryID { get; set; }
   public Entry Entry { get; set; }
} 
```

当 Entity Framework 生成数据库时，Revisions 表获取由 RevisionID 和 EntryID 组成的复合主键。我希望 Revisions 表的主键仅为 RevisionID。有没有办法做到这一点？（我将 Entity Framework 4.3 与 SQL Server CE 一起使用，如果这有所不同的话。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:30:13.520

您可以在 Revision 类中创建[Key](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.keyattribute.aspx) Data Annotation，以显式定义您的密钥：

```
public class Revision
{
   [Key]
   public Int64 RevisionID { get; set; }
   public string RevisionDescription { get; set; }

   public Int64 EntryID { get; set; }
   public Entry Entry { get; set; }
} 
```

或使用流利：

```
modelBuilder.Entity<Revision>().HasKey(r=>r.RevisionID) 
```

编辑：添加了测试应用程序和图表

我创建了一个带有 Key 注释的测试应用程序，它创建了以下数据库，Revisions 表上的主键只有 RevisionID

![在此处输入图像描述](../Images/ec2a224e00cfddd0bc994b1d8a3c4b85.png)

整个应用程序：

```
namespace ExampleCF
{
    public class Entry
    {
        public Int64 EntryID { get; set; }
        public string UserName { get; set; }
        public string EntrySubject { get; set; }
    }

    public class Revision
    {
        [Key]
        public Int64 RevisionID { get; set; }
        public string RevisionDescription { get; set; }

        public Int64 EntryID { get; set; }
        public Entry Entry { get; set; }
    }

    public class ItemContext : DbContext
    {
        public DbSet<Entry> Entrys { get; set; }
        public DbSet<Revision> Revisions { get; set; }

        protected override void OnModelCreating(System.Data.Entity.DbModelBuilder modelBuilder)
        {

        }
    }   

    class Program
    {
        public static void Main()
        {
        }

    }
} 
```

# windows - IOCTL 是如何工作的？

> ID：13380577
> 
> 赞同：1
> 
> 时间：2012-11-14T14:20:33.597
> 
> 标签：windows, kernel, ioctl, deviceiocontrol

我想知道 IOCTL 是如何工作的。我知道基本情况：

DeviceIoControl() -> kernel32.dll -> ntdll.dll -> 从用户模式到内核模式的时刻 -> I/O Manager -> IRP

问题是 IOCTL 如何从用户模式到内核模式？是中断门、调用门还是别的什么？

如果您知道任何解释 IOCTL 详细信息的文章/书籍（不仅仅是 Windows 内部），请发布链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:57:34.550

如果您查看 in 的实现，`DeviceIoControl`您`Kernel32.dll`会看到它`NtDeviceIoControlFile`从`ntdll.dll`. 这反过来会执行`syscall`从用户模式到内核模式的转换。

# svn - 从文件夹中删除 svn:externals 属性

> ID：13380584
> 
> 赞同：5
> 
> 时间：2012-11-14T14:21:04.250
> 
> 标签：svn, branch, externals

我有一个树干的分支。我需要将分支中外部的属性重新设置到不同的点。我的想法是将它们全部删除并使用 propset 重新设置它们。当我输入`svn propdel svn:externals http://path-to-branch/externals`

我明白了

> svn: E200009: 目标必须是工作副本路径

我的命令有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T14:24:40.933

您的命令在存储库 URL 上运行，而不是工作副本。首先查看工作副本：

```
svn co http://path-to-branch path/to/workingcopy 
```

然后修改工作副本中的属性：

```
svn propdel svn:externals path/to/workingcopy 
```

提交更改，您应该一切就绪。我会疏忽没有指出实际上没有必要先删除它们，propedit 将覆盖之前的任何属性。

# sql-server-2008 - 如何将 WITH XMLNAMESPACES 用于许多选择语句？

> ID：13380588
> 
> 赞同：2
> 
> 时间：2012-11-14T14:21:34.260
> 
> 标签：sql-server-2008, xml-namespaces

我使用`WITH XMLNAMESPACES`SQL Server 2008 中的语句来定义一些命名空间的形式

```
 ;WITH XMLNAMESPACES ('http://bla' AS nsBlub) 
```

然后我想执行多个（！）选择语句，所有这些语句都使用上面定义的`nsBlub`命名空间。

但是只有上述语句下的第一个select语句`WITH XMLNAMESPACES`受益于命名空间声明，所以我现在需要`WITH XMLNAMESPACES`在每个select语句之前编写相同的语句......

我错过了什么 - 如何使用`WITH XMLNAMESPACES`“全局”定义命名空间？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:43:50.713

不幸的是，你不能这样做。

该`WITH XMLNAMESPACES`子句仅适用于一个语句。它几乎就像您的下一个语句的“标题”属性 - 您不能将其扩展到多个语句。

对于下一个，您必须`WITH XMLNAMESPACES`再次重复。

据我所知，没有解决方法。

# css - css3 pie htc 不工作 IE7 和 IE6（在 IE8 中工作）

> ID：13380589
> 
> 赞同：1
> 
> 时间：2012-11-14T14:21:37.027
> 
> 标签：css, css3pie

我试图让馅饼在所有 IE 浏览器 6+ 中获得圆角和渐变。

它在 IE8 中工作，但由于某种原因不在 IE7 或 6 中 - 关于为什么的任何想法？

这是我的 css 元素和 html 的示例，没什么特别的：

```
<style type="text/css">

#pietest{
border: 1px solid #696;
padding: 60px 0;
text-align: center; width: 200px;
-webkit-border-radius: 8px;
-moz-border-radius: 8px;
border-radius: 8px;
-webkit-box-shadow: #666 0px 2px 3px;
-moz-box-shadow: #666 0px 2px 3px;
box-shadow: #666 0px 2px 3px;
background: #EEFF99;
background: -webkit-gradient(linear, 0 0, 0 bottom, from(#EEFF99), to(#66EE33));
background: -webkit-linear-gradient(#EEFF99, #66EE33);
background: -moz-linear-gradient(#EEFF99, #66EE33);
background: -ms-linear-gradient(#EEFF99, #66EE33);
background: -o-linear-gradient(#EEFF99, #66EE33);
background: linear-gradient(#EEFF99, #66EE33);
-pie-background: linear-gradient(#EEFF99, #66EE33);
behavior: url('PIE.htc');
}

</style>

<div id="pietest"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:45:29.247

永远找不到解决方案，但设法让 pie.js 工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T03:59:50.697

我遇到了同样的问题，我认为这是因为浏览器没有将 .htc 文件视为文本/x 组件。[官方文档已经在这里](http://css3pie.com/documentation/known-issues/#content-type)提到了

所以我相信我们需要让服务器正确设置内容类型。希望这会帮助你。

我在 web.xml 中添加了 mime 类型映射，以将 htc 作为 text/x-component 进行处理，然后它可以正常工作。

# android - 是否可以通过 adb shell 启动活动？

> ID：13380590
> 
> 赞同：137
> 
> 时间：2012-11-14T14:21:39.847
> 
> 标签：android

我想通过 adb shell 开始活动。这样我就可以启动所需的特定活动

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2012-11-14T14:27:13.030

启动 adb shell 并输入如下命令

```
am start -n yourpackagename/.activityname 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2016-04-01T02:18:33.077

如：</p>

MyPackageName 是 com.example.demo

MyActivityName 是 com.example.test.MainActivity

```
adb shell am start -n com.example.demo/com.example.test.MainActivity 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-04-07T08:43:03.697

我像 AndroidStudio 一样运行它：

```
am start -n "com.example.app.dev/com.example.app.phonebook.PhoneBookActivity" -a android.intent.action.MAIN -c android.intent.category.LAUNCHER 
```

**如果您有**类似的产品风格`dev`，它应该只出现在应用程序包名称中，而不应该出现在活动包名称中。

对于模拟器，它在没有`android:exported="true"`活动标志的情况下工作，`AndroidManifest.xml` 但我发现将它添加到无根物理设备以使其工作很有用。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2016-03-22T07:57:48.833

您还可以使用查找当前屏幕活动的名称

```
adb shell dumpsys window windows | grep 'mCurrentFocus' 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-11-14T14:29:31.983

```
adb shell am broadcast -a android.intent.action.xxx 
```

提到 xxx 作为您在清单文件中提到的操作。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-09-20T22:36:42.897

例如，这将启动 XBMC：

```
adb shell am start -a android.intent.action.MAIN -n org.xbmc.xbmc/android.app.NativeActivity 
```

（更一般的答案已经发布，但我在这里错过了一个很好的例子。）

# c# - 部署自托管 SignalR

> ID：13380594
> 
> 赞同：7
> 
> 时间：2012-11-14T14:21:54.600
> 
> 标签：c#, windows-server-2008-r2, signalr

我基于这个 [SignalR Console app example](https://stackoverflow.com/questions/11140164/signalr-console-app-example)创建了一对基于 C# 的控制台应用程序。

这在我的本地 PC 上运行良好，我现在已将服务器应用程序（以及 bin/Release 文件夹中的所有文件）复制到我的服务器上。当我运行服务器应用程序时，它愉快地坐在那里听“ [http://www.redacted.com:8088/](http://www.redacted.com:8088/) ”。

在客户端应用程序中，我更改了：

```
var _connection = new HubConnection("http://127.0.0.1:8088/"); 
```

至：

```
var _connection = new HubConnection("http://www.redacted.com:8088/"); 
```

但是，当我尝试启动连接时，现在出现 503 Server Unavailable 错误。我是 SignalR 的新手，还没有找到关于部署的像样的教程（主要是因为根据我猜的要求，可能有很多不同的方法可以完成）。

所以我的问题是：

1.  我是否需要在 IIS 中进行任何设置才能使其正常工作（请记住，我不认为这是基于 Web 的，只是控制台应用程序到控制台应用程序），或者只运行服务器 exe 并打开端口是否可以向上？

2.  我的服务器正在运行 Windows Server 2012，我已将我的 exe 添加到允许建立连接的应用程序列表中，并为端口 8088 添加了传入规则，我还需要做些什么才能看到我的客户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T23:00:30.323

如果您在服务器上有类似的东西

```
 string url = "http://127.0.0.1:8088/";
      var server = new Server(url);
      server.MapHubs();
      server.Start(); 
```

尝试绑定到所有 IP（或主机）

```
 string url = "http://*:8088/"; 
```

# php - 使用 PHP 从日志文件中提取数据

> ID：13380595
> 
> 赞同：3
> 
> 时间：2012-11-14T14:21:56.910
> 
> 标签：php

我有一个服务器日志文件，我试图从中创建一个 PHP 页面，该页面总结了它存储的数据。日志中的每条记录都存储在一个新行上，格式为：

```
207.3.35.52 -- [2007-04-01 01:24:42] "GET index.php HTTP/1.0" 200 11411 "Mozilla/4.0"

//ip -- [timestamp] "GET url HTTP/1.0" status code bytes "user agent". 
```

我正在尝试编写一个摘要，其中显示：请求总数、来自文章目录的请求总数、消耗的总带宽以及最后 404 错误及其页面的数量。

PHP：

```
$handle = fopen('logfiles/april.log','r') or die ('File opening failed');
$requestsCount = 0;
    while (!feof($handle)) {
        $dd = fgets($handle);
        $requestsCount++;   
        $parts = explode('"', $dd);
        $statusCode = substr($parts[2], 0, 4);
        }
fclose($handle); 
```

此代码打开文件并统计记录数量，分离并找到记录中的状态代码编号。回显 $statusCode 时，它​​确实显示了正确的信息，显示了日志中的所有状态代码。

一个接受两个论点来总计 404 错误的函数：

```
function requests404($l,$s) {
        $r =  substr_count($l,$s);
        return "Total 404 errors: ".$r."<br />";
} 
```

回显结果：

```
echo requests404($statusCode, '404'); 
```

这个函数不起作用，它只返回 0。在 PHP 中处理 txt 文件是我最薄弱的技能，我非常感谢一些帮助，因为我认为我可能会以完全错误的方式进行操作。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:32:37.807

```
$handle = fopen('logfiles/april.log','r') or die ('File opening failed');
$requestsCount = 0;
$num404 = 0;

while (!feof($handle)) {
    $dd = fgets($handle);
    $requestsCount++;   
    $parts = explode('"', $dd);
    $statusCode = substr($parts[2], 0, 4);
    if (hasRequestType($statusCode, '404')) $num404++;
}

echo "Total 404 Requests: " . $num404 . "<br />";
fclose($handle);

function hasRequestType($l,$s) {
        return substr_count($l,$s) > 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T14:58:43.077

虽然我喜欢在很多事情上使用 PHP。但解析日志并不是其中之一。

相反，我真的强烈建议您考虑使用 awk 进行所有未来的日志解析工作。

这是我一起完成的简单 bash/awk 脚本，它以一种非常易于阅读/易于理解的方式实现了您的所有要求：

```
#!/bin/bash

awk '
BEGIN {
    total_requests = 0;
    total_requests_articles = 0;
    total_404s = 0;
    total_bandwidth = 0;
} {
    total_requests++;

    if ( $8 == "404" ) {
        total_404s++;
    }

    if ( $6 ~ /articles/ ) {
        total_requests_articles++;
    }

    total_bandwidth += $9
} END {
    printf "total requests: %i\n", total_requests
    printf "total requests for articles: %i\n", total_requests_articles
    printf "total 404s: %i\n", total_404s
    printf "total bandwidth used: %i\n", total_bandwidth
}' ${1} 
```

使用此文件作为演示：

```
207.3.35.52 -- [2007-04-01 01:24:42] "GET index.php HTTP/1.0" 200 11411 "Mozilla/4.0"
207.3.35.52 -- [2007-04-01 01:24:42] "GET index.php HTTP/1.0" 200 11411 "Mozilla/4.0"
207.3.35.52 -- [2007-04-01 01:24:42] "GET index.php HTTP/1.0" 200 11411 "Mozilla/4.0"
207.3.35.52 -- [2007-04-01 01:24:42] "GET articles/index.php HTTP/1.0" 404 11411 "Mozilla/4.0"
207.3.35.52 -- [2007-04-01 01:24:42] "GET articles/index.php HTTP/1.0" 200 11411 "Mozilla/4.0"
207.3.35.52 -- [2007-04-01 01:24:42] "GET index.php HTTP/1.0" 404 11411 "Mozilla/4.0" 
```

结果如下：

```
[root@hacklab5 tmp]# ./apache.bash apache.log
total requests: 6
total requests for articles: 2
total 404s: 2
total bandwidth used: 68466 
```

只是说.. awk 很棒。并且快速燃烧。并为解析日志量身定制。现在，向您学习一些 awk 非常有用；）

干杯——

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:32:24.903

`substr_count`将“404”的出现次数相加`$statusCode`，并且`$statusCode`每次仅是单行日志的四个字节“200”（或“304”或“404”）。

所以只要状态码*不是*404，你就会得到零，这是正确的。

您需要调用`requests404`每一*行*输入，并对总数求和。

实际上使用数组可能会更好：

```
$totals = array(
    200 => 0,
    404 => 0,
    304 => 0,
);
$requestsCount = 0;
$bytesSent = 0;
$totalBytes = 0;
while (!feof($handle)) {
    $dd = fgets($handle);
    $requestsCount++;   
    $parts = explode('"', $dd);
    list($statusCode, $bytes) = explode(" ", $parts[2]);
    if (!isset($totals[$statusCode]))
       $totals[$statusCode] = 0;
    $totals[$statusCode]++;
    if (200 == $statusCode)
        $bytesSent += $bytes;
    $totalBytes += $bytes;
}
fclose($handle);

printf("We got $totals[404] 404 errors\n"); 
```

在循环结束时， $totals 将包含类似

```
{
    200 =>  12345,
    404 =>   1234,
    401 =>     22,
    304 =>   7890,
    ...
} 
```

# visual-studio-2010 - 在 Visual Studio 2010 中使用已编译的 Boost 库

> ID：13380597
> 
> 赞同：1
> 
> 时间：2012-11-14T14:22:00.077
> 
> 标签：visual-studio-2010, boost, compilation

我尝试在 Visual Studio 中使用已编译的 Boost 库（文件系统）。因此，我将 boost lib 目录添加到：

项目属性 > 链接器 > 其他库目录

问题是 Visual Studio 尝试添加前缀 lib ：

```
fatal error LNK1104: cannot open file 'libboost_filesystem-vc100-mt-gd-1_51.lib' 
```

但是lib的真实名称只是boost_filesystem-vc100-mt-gd-1_51.lib

如何禁用库名称前的前缀？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:26:16.303

这不是前缀的问题。为了解决这个问题，我刚刚启动了 BoostPro 安装程序并安装了所有调试库。

# c# - 如何防止网格视图中的重复数据？

> ID：13380601
> 
> 赞同：1
> 
> 时间：2012-11-14T14:22:17.423
> 
> 标签：c#, asp.net, gridview, datakey

我有一个网格视图，这个网格视图有一个`DataKeyNames="person_id"`

现在我希望这个键作为网格的主键，所以不允许重复。

如何通过使用防止重复数据`DataKeyNames`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:25:53.677

GridView 是一个表示层。它不应该做任何验证。我建议您检查数据访问层中的重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:26:12.483

DataKeyNames 可以包含重复值，因此您需要确保您的数据源没有该字段的重复值。如果是这样，您可以在绑定后以编程方式循环遍历您的网格视图，并通过在代码隐藏中添加一些逻辑来手动删除重复的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:28:37.413

您需要从数据源中区分结果。如果您使用 SQL 查询，请查看[http://www.w3schools.com/sql/sql_distinct.asp](http://www.w3schools.com/sql/sql_distinct.asp)。如果您使用的是 LINQ - .Distinct() 。

# svn - svn - 从未提交的代码库创建新分支

> ID：13380604
> 
> 赞同：0
> 
> 时间：2012-11-14T14:22:31.283
> 
> 标签：svn, version-control, repository

所以这就是我想做的事情：

使用类似这样的方式检查代码框架的未跟踪副本

```
svn export http://svnrepo/project/framework/tags/1.0.2/ . --force 
```

现在我想在另一个仓库中创建一个新分支，但是如何？

我使用`svn import`,`svn add`吗？

所以这是我想存储它的地方：

```
svn ci http://svnrepo/newproject/branches/new_feature/ 
```

建议？

解决方案：

这对我有用

没有 svn 历史的初始结帐

```
svn export http://svnrepo/project/framework/tags/1.0.2/ . --force 
```

创建分支目录

```
svn mkdir http://svnrepo/newproject/branches/new_feature/ 
```

结帐空分支

```
svn co http://svnrepo/newproject/branches/new_feature/ . 
```

添加导出的项目

```
svn add * 
```

签入导出到新分支

```
svn commit -m "export to new branch committed" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:33:42.503

导出是错误的——你不能不从 WC 提交，工作副本是结帐的结果。

您*可能*在提交时遇到 UUID 问题，但您至少可以尝试

```
svn co OLD-URL
svn mkdir NEW-URL 
svn relocate NEW-URL
svn ci 
```

**历史丢失版本**

```
svn export OLD-URL WC1
svn mkdir NEW-URL
svn co NEW-URL WC2 
```

将文件从 WC1 复制到（空）WC2

```
cd WC2
svn add
svn ci 
```

# android-ndk - 为 Android 原生应用 (NDK) 制作静态库

> ID：13380605
> 
> 赞同：1
> 
> 时间：2012-11-14T14:22:43.577
> 
> 标签：android-ndk, static-libraries

情况：

*   带有 Android SDK 和 SDK 的 Eclipse
*   我正在学习并想开发我们当前库的 arm 和 Android 版本（不使用特定于平台的 API）

问题：

*   如何为 arm CPU 制作 C++ 静态库 (.a)？我找不到任何好的文档来解释它。
*   假设 C++ 静态库不使用 Android 特定 API，Android Native 应用程序可以使用它吗？如果否，为 Android 原生应用程序制作静态库需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:01:08.523

[2] 是的，即使 C++ 代码确实使用了 Android 特定的 API，也可以在 Android Native 应用程序中使用静态库。

[1] 您必须为您的项目安装[Android NDK](http://developer.android.com/tools/sdk/ndk/index.html)并运行`ndk-build`命令。NDK 包含将指导您准备**Makefile**的文档和示例（按照惯例，它称为`Android.mk`）。

最小`Android.mk`可能看起来像：

```
LOCAL_PATH := $(call my-dir)
LOCAL_MODULE := imays
LOCAL_SRC_FILES := imays.cpp
include $(BUILD_STATIC_LIBRARY) 
```

# twitter-bootstrap - 选项卡的子菜单控制不取消选择

> ID：13380606
> 
> 赞同：1
> 
> 时间：2012-11-14T14:22:44.257
> 
> 标签：twitter-bootstrap, tabs, submenu

我发现使用子菜单来控制[选项卡式内容](http://twitter.github.com/bootstrap/javascript.html#tabs)会导致“悬停/选定”状态保留在子菜单选项上，无论它是否实际被选中。

```
<div class="container-fluid">
  <h1>Menu-controlled Tabs Test</h1>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <div class="nav-collapse">
          <ul class="nav" id="mytabs">
            <li class="active"><a tabindex="-1" href="#tab1" data-toggle="tab">Select Tab 1</a></li>
            <li class="dropdown">
              <a class="dropdown-toggle" id="drop1" role="button" data-toggle="dropdown" href="#">Dropdown 1<b class="caret"></b></a>
              <ul id="menu1" class="dropdown-menu" role="menu" aria-labelledby="dLabel1">
                <li><a tabindex="-1" href="#tab2" data-toggle="tab">Select Tab 2</a></li>
                <li><a tabindex="-1" href="#tab3" data-toggle="tab">Select Tab 3</a></li>
                <li><a tabindex="-1" href="#tab4" data-toggle="tab">Select Tab 4</a></li>
              </ul>
            <li class="dropdown">
              <a class="dropdown-toggle" id="drop2" role="button" data-toggle="dropdown" href="#">Dropdown 2<b class="caret"></b></a>
              <ul id="menu2" class="dropdown-menu" role="menu" aria-labelledby="dLabel2">
                <li class="dropdown-submenu">
                  <a tabindex="-1" href="#">Sub-menu 1</a>
                  <ul class="dropdown-menu">
                    <li><a tabindex="-1" href="#tab5" data-toggle="tab">Select Tab 5</a></li>
                    <li><a tabindex="-1" href="#tab6" data-toggle="tab">Select Tab 6</a></li>
                    <li><a tabindex="-1" href="#tab7" data-toggle="tab">Select Tab 7</a></li>
                    <li><a tabindex="-1" href="#tab8" data-toggle="tab">Select Tab 8</a></li>
                  </ul>
                </li>
                <li class="dropdown-submenu">
                  <a tabindex="-1" href="#">Sub-menu 1</a>
                  <ul class="dropdown-menu">
                    <li><a tabindex="-1" href="#tab9" data-toggle="tab">Select Tab 9</a></li>
                    <li><a tabindex="-1" href="#tab10" data-toggle="tab">Select Tab 10</a></li>
                    <li><a tabindex="-1" href="#tab11" data-toggle="tab">Select Tab 11</a></li>
                    <li><a tabindex="-1" href="#tab12" data-toggle="tab">Select Tab 12</a></li>
                  </ul>
                </li>
                <li class="dropdown-submenu">
                  <a tabindex="-1" href="#">Sub-menu 1</a>
                  <ul class="dropdown-menu">
                    <li><a tabindex="-1" href="#tab13" data-toggle="tab">Select Tab 13</a></li>
                    <li><a tabindex="-1" href="#tab14" data-toggle="tab">Select Tab 14</a></li>
                    <li><a tabindex="-1" href="#tab15" data-toggle="tab">Select Tab 15</a></li>
                    <li><a tabindex="-1" href="#tab16" data-toggle="tab">Select Tab 16</a></li>
                  </ul>
                </li>
                <li class="dropdown-submenu">
                  <a tabindex="-1" href="#">Sub-menu 1</a>
                  <ul class="dropdown-menu">
                    <li><a tabindex="-1" href="#tab17" data-toggle="tab">Select Tab 17</a></li>
                    <li><a tabindex="-1" href="#tab18" data-toggle="tab">Select Tab 18</a></li>
                    <li><a tabindex="-1" href="#tab19" data-toggle="tab">Select Tab 19</a></li>
                    <li><a tabindex="-1" href="#tab20" data-toggle="tab">Select Tab 20</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="tab-content">
    <div class="tab-pane active" id="tab1">Tab 1</div>
    <div class="tab-pane" id="tab2">Tab 2</div>
    <div class="tab-pane" id="tab3">Tab 3</div>
    <div class="tab-pane" id="tab4">Tab 4</div>
    <div class="tab-pane" id="tab5">Tab 5</div>
    <div class="tab-pane" id="tab6">Tab 6</div>
    <div class="tab-pane" id="tab7">Tab 7</div>
    <div class="tab-pane" id="tab8">Tab 8</div>
    <div class="tab-pane" id="tab9">Tab 9</div>
    <div class="tab-pane" id="tab10">Tab 10</div>
    <div class="tab-pane" id="tab11">Tab 11</div>
    <div class="tab-pane" id="tab12">Tab 12</div>
    <div class="tab-pane" id="tab13">Tab 13</div>
    <div class="tab-pane" id="tab14">Tab 14</div>
    <div class="tab-pane" id="tab15">Tab 15</div>
    <div class="tab-pane" id="tab16">Tab 16</div>
    <div class="tab-pane" id="tab17">Tab 17</div>
    <div class="tab-pane" id="tab18">Tab 18</div>
    <div class="tab-pane" id="tab19">Tab 19</div>
    <div class="tab-pane" id="tab20">Tab 20</div>
  </div>
</div> 
```

[http://jsfiddle.net/scottclassen/zQw5J/3/](http://jsfiddle.net/scottclassen/zQw5J/3/)

在上面的 jsFiddle 示例中，两个下拉菜单都控制选项卡。“下拉菜单 1”按预期正常运行。"Dropdown 2" however will change the tabbed content, but the "selected" status of the sub-menu option does not disappear when another option is selected.

任何人都可以帮助修复它吗？

# linux - 如何使用 sed 删除文件的最后 n 行

> ID：13380607
> 
> 赞同：188
> 
> 时间：2012-11-14T14:22:46.720
> 
> 标签：linux, bash, shell, sed

我想从文件末尾删除一些*n*行。这可以使用 sed 完成吗？

例如，要删除从 2 到 4 的行，我可以使用

```
$ sed '2,4d' file 
```

但我不知道行号。我可以使用删除最后一行

```
$sed $d file 
```

但我想知道从末尾删除*n行的方法。*请让我知道如何使用 sed 或其他方法来做到这一点。

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2012-11-14T14:26:41.250

我不知道`sed`，但可以通过以下方式完成`head`：

```
head -n -2 myfile.txt 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-06-19T03:16:25.070

如果硬编码 n 是一个选项，您可以使用对 sed 的顺序调用。例如，要删除最后三行，请将最后一行删除三次：

```
sed '$d' file | sed '$d' | sed '$d' 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-11-14T16:49:32.927

从[sed 单线](http://www.unixguide.net/unix/sedoneliner.shtml)：

```
# delete the last 10 lines of a file
sed -e :a -e '$d;N;2,10ba' -e 'P;D'   # method 1
sed -n -e :a -e '1,10!{P;N;D;};N;ba'  # method 2 
```

似乎是你正在寻找的东西。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-11-14T15:34:53.443

一个有趣且简单`sed`的`tac`解决方案：

```
n=4
tac file.txt | sed "1,$n{d}" | tac 
```

**笔记**

*   shell需要双引号`"`来评估命令中的`$n`变量`sed`。在单引号中，不会执行插值。
*   `tac`是`cat`反转的，见`man 1 tac`
*   `{}`in`sed`是用来分隔`$n`&的`d`（如果不是，shell 会尝试插入不存在的`$nd`变量）

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2016-12-16T15:27:12.123

使用`sed`，但让 shell 进行数学运算，目标是`d`通过给出一个范围来使用该命令（删除最后 23 行）：

```
sed -i "$(($(wc -l < file)-22)),\$d" file 
```

要从内到外删除最后 3 行：

```
$(wc -l < file) 
```

给出文件的行数：比如**2196**

我们要删除最后 23 行，所以对于左侧或范围：

```
$((2196-22)) 
```

给出：**2174** 因此，shell 解释后的原始 sed 是：

```
sed -i '2174,$d' file 
```

通过`-i`就地编辑，文件现在是**2173**行！

如果要将其保存到新文件中，代码为：

```
sed -i '2174,$d' file > outputfile 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2012-11-14T14:29:29.457

您可以为此使用**head 。**

利用

`$ head --lines=-N file > new_file`

其中 N 是要从文件中删除的行数。

原始文件的内容减去最后 N 行现在在**new_file**

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2015-10-23T08:24:31.737

为了完整起见，我想添加我的解决方案。我最终用标准做到了这一点`ed`：

```
ed -s sometextfile <<< $'-2,$d\nwq' 
```

这将使用就地编辑删除最后两行（尽管它*确实*`/tmp`在!!中使用了一个临时文件）

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-02-19T19:50:37.620

要真正就地截断非常大的文件，我们有`truncate`命令。它不知道行，但`tail`+`wc`可以将行转换为字节：

```
file=bigone.log
lines=3
truncate -s -$(tail -$lines $file | wc -c) $file 
```

如果同时写入文件，则存在明显的竞争条件。在这种情况下，使用它可能会更好`head`——它从文件的开头计算字节数（mind disk IO），所以我们总是会在行边界上截断（如果文件被主动写入，可能会比预期的行多）：

```
truncate -s $(head -n -$lines $file | wc -c) $file 
```

如果您尝试使用密码代替用户名登录失败，则方便单行：

```
truncate -s $(head -n -5 /var/log/secure | wc -c) /var/log/secure 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-08-12T03:51:01.753

上述大多数答案似乎都需要 GNU 命令/扩展：

```
 $ head -n -2 myfile.txt
    -2: Badly formed number 
```

对于更便携的解决方案：

```
 perl -ne 'push(@fifo,$_);print shift(@fifo) if @fifo > 10;' 
```

或者

```
 perl -ne 'push(@buf,$_);END{print @buf[0 ... $#buf-10]}' 
```

或者

```
 awk '{buf[NR-1]=$0;}END{ for ( i=0; i < (NR-10); i++){ print buf[i];} }' 
```

其中“10”是“n”。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-11-14T16:26:43.310

这可能对您有用（GNU sed）：

```
sed ':a;$!N;1,4ba;P;$d;D' file 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-11-14T15:13:46.053

有了这里的答案，您已经了解到 sed 不是此应用程序的最佳工具。

但是我确实认为使用 sed 可以做到这一点；这个想法是附加 N 行以保持空间，直到您能够阅读而不会碰到 EOF。当 EOF 被命中时，打印保持空间的内容并退出。

```
sed -e '$!{N;N;N;N;N;N;H;}' -e x 
```

上面的 sed 命令将省略最后 5 行。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-10-03T18:10:15.443

它可以通过 3 个步骤完成：

a) 计算要编辑的文件的行数：

```
 n=`cat myfile |wc -l` 
```

b) 从该数字中减去要删除的行数：

```
 x=$((n-3)) 
```

c) 告诉 sed 从该行号 ( `$x`) 删除到末尾：

```
 sed "$x,\$d" myfile 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-03-16T10:34:21.207

尝试以下命令：

```
n = line number
tail -r file_name | sed '1,nd' | tail -r 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-04-24T12:46:04.170

您可以获得总行数`wc -l <file>`和使用

`head -n <total lines - lines to remove> <file>`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-01-12T18:39:32.603

这将从中删除最后 3 行`file`：

`for i in $(seq 1 3); do sed -i '$d' file; done;`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-01-21T17:41:44.813

要删除最后 4 行：

```
$ nl -b a file | sort -k1,1nr | sed '1, 4 d' | sort -k1,1n | sed 's/^ *[0-9]*\t//' 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-01-22T09:25:38.987

```
sed -n ':pre
1,4 {N;b pre
    }
:cycle
$!{P;N;D;b cycle
  }' YourFile 
```

正版

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-07-23T13:08:46.550

我更喜欢这个解决方案；

```
head -$(gcalctool -s $(cat file | wc -l)-N) file 
```

其中*N*是要删除的行数。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-05-21T18:48:54.167

我想出了这个，其中 n 是您要删除的行数：

```
count=`wc -l file`
lines=`expr "$count" - n`
head -n "$lines" file > temp.txt
mv temp.txt file
rm -f temp.txt 
```

这是一个小回旋处，但我认为它很容易遵循。

1.  统计主文件的行数
2.  从计数中减去要删除的行数
3.  打印出要保留并存储在临时文件中的行数
4.  用临时文件替换主文件
5.  删除临时文件

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-04-24T15:36:11.597

要删除文件的最后 N 行，可以使用相同的概念

```
$ sed '2,4d' file 
```

您可以使用带有 tail 命令的组合来反转文件：如果 N 为 5

```
$ tail -r file | sed '1,5d' file | tail -r > file 
```

而且这种方式也可以在`head -n -5 file`命令不运行的地方运行（就像在 mac 上一样！）。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-08-21T23:04:31.697

在 docker 中，这对我有用：

```
head --lines=-N file_path >> file_path 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-06-05T18:46:08.213

```
#!/bin/sh

echo 'Enter the file name : '
read filename

echo 'Enter the number of lines from the end that needs to be deleted :'
read n

#Subtracting from the line number to get the nth line
m=`expr $n - 1`

# Calculate length of the file
len=`cat $filename|wc -l`

#Calculate the lines that must remain
lennew=`expr $len - $m`

sed "$lennew,$ d" $filename 
```

* * *

## 回答 #23

> 赞同：-2
> 
> 时间：2018-05-24T19:39:41.447

这将删除最后 12 行

```
sed -n -e :a -e '1,10!{P;N;D;};N;ba' 
```

# php - Zend_Log：如何更改日志文件权限

> ID：13380613
> 
> 赞同：0
> 
> 时间：2012-11-14T14:23:07.850
> 
> 标签：php, zend-framework, zend-log

我正在从 Web 界面和 cron 作业执行我的脚本。我正在使用`Zend_Log`日志记录，并且日志文件每天轮换（`mylog_YYYY-MM-DD.log`）。如果我在当天开始从网络执行我的脚本，那么我的 cron 作业由于日志文件权限问题而失败。我可以为我的日志文件提供`666`权限。如何使用`Zend_Log`.

预先感谢。-文卡特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:57:09.303

确保 Web 界面和 cron 作业以同一用户身份运行，并且您不应该遇到此问题。我猜该网站以一个用户（www、apache 等）身份运行，而您的 cron 作业以您的特定用户身份运行，因此无论哪个进程最终首先创建文件，其他用户都无法访问它。

如果您对 666 的权限感到满意，只需使用 php 代码：

```
chmod($log_file, 0666); 
```

在创建日志文件的代码中。

# python - 在字典的python列表中搜索

> ID：13380615
> 
> 赞同：0
> 
> 时间：2012-11-14T14:23:18.887
> 
> 标签：python

我有一个字典列表（l）`{"id": id, "class": class, "parameter": parameter}`。我必须这样做，

```
for each value of class:
    parameter = getParameter(class) //we can get different parameter for same class
    if {"class":class, "parameter":parameter} not in l:
         increment id and do l.append({"id": id, "class": class, "parameter": parameter}) 
```

这里列表中的 dict 有 3 个键，而我必须用 2 个键在列表中搜索。我如何验证“如果”条件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T14:30:56.100

如果我理解正确，您的问题是确定是否已经有一个具有给定值的条目`class`and `parameter`？您必须编写一个表达式来为您搜索列表，如下所示：

```
def search_list(thedict, thelist):
    return any(x["class"] == thedict["class"]
               and x["parameter"] == thedict["parameter"]
               for x in thelist) 
```

如果找到条目，该函数返回 True。像这样称呼它：

```
if not search_list({"class": class, "parameter": parameter}, l):
    #the item was not found - do stuff 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T14:30:21.347

```
if not any(d['attr1'] == val1 and d['attr2'] == val2 for d in l): 
```

`d`测试list 中是否没有 dict`l`的`attr1`equal to`val1`和`attr2`equal to `val2`。

优点是一旦找到匹配就停止迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:30:00.527

```
if {"class":class, "parameter":parameter} not in [{'class':d['class'], 'parameter':d['parameter']} for d in l]: 
```

您可能不想在每次检查条件时都计算列表，请在循环之外执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T14:32:51.927

我认为通过设置比较，您可以摆脱它：

```
>>> d1 = {"id": 1, "class": 3, "parameter": 4}
>>> d2 = {"id": 1, "class": 3}
>>> set(d2.items()) < set(d1.items())
True
>>> 
```

# asp.net-mvc-3 - 如何将 LINQ 写入实体 Lambda 并在 SelectList 中连接属性

> ID：13380616
> 
> 赞同：1
> 
> 时间：2012-11-14T14:23:20.823
> 
> 标签：asp.net-mvc-3, lambda, linq-to-entities, html-select

我编写了以下方法来填充 DropDownList 并且它有效。但是，我想使用 Lambda 表达式作为 SelectList 初始化程序的第一个参数而不是那里的理解查询来编写正确的 LINQ 查询。我的目标是连接 Eventm 对象的 EventmId 和 EventmTitle 属性，以在 DropDownList 中显示为选择项。

谢谢！

```
 private void PopulateEventmsDropDownList(object selectedEventm = null)
            {
                var eventmsQuery = unitOfWork.EventmRepository.Get(
                                       orderBy: q => q.OrderBy(d => d.EventmId));

                ViewBag.EventmID = new SelectList(
                (from s in eventmsQuery select new { EventmId = s.EventmId.ToString(),
                FullID = s.EventmId + " " + s.EvtTitle }),
                "EventmId", "FullID", selectedEventm);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:37:48.880

在使用 LINQPad 进行一些试验和错误之后，我在 SelectList 中提出了这个 Lambda 表达式（以替换理解查询），如下所示：

```
private void PopulateEventmsDropDownList(object selectedEventm = null)
    {
        var eventmsQuery = unitOfWork.EventmRepository.Get(
             orderBy: q => q.OrderBy(d => d.EventmId));

        ViewBag.EventmID = new SelectList(nodesQuery.Select(
             x => new {x.NodeId, FullID =  string.Join(
             "  ", x.NodeId.ToString(), x.Title) }), "EventmId", "FullID", selectedEventm);
    } 
```

# c# - 将代码从 kinect sdk beta 转换为最新 kinect sdk 的完整指南

> ID：13380619
> 
> 赞同：2
> 
> 时间：2012-11-14T14:23:25.707
> 
> 标签：c#, .net, kinect, kinect-sdk

我有一个关于 kinect 的学期项目。我必须改进某个应用程序并为其添加新功能。问题的出现是由于该应用程序使用了过时的 kinect sdk。我希望（个人）添加的一些额外功能需要使用新的 Kinect SDK。是否有关于从 Kinect SDK Beta 转移到最新 SDK 的快速指南？除了程序集引用之外，还做了哪些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:48:04.693

我从这篇[文章](http://www.mpanania.com/2012/11/complete-guide-converting-code-from.html)中找到了以下信息：

此处及以后信息的所有功劳归于该文章的原始海报。我只是分享他的知识

如果您在 2 月 1 日之前使用过 Kinect SDK 的 beta 2，您可能会对 v1.0 中引入的 API 更改数量感到沮丧。

为了获得左右关节，您使用编写的代码

```
Joint jointRight = sd.Joints[JointID.HandRight];
Joint jointLeft = sd.Joints[JointID.HandLeft]; 
```

首先你需要创建一个骨架，所以

`Skeleton[] skeletons = new Skeleton[0];`

然后你必须越过骨架

```
 foreach (Skeleton skel in skeletons) 
```

然后你得到关节使用

```
Joint rightHand = skeleton.Joints[JointType.HandRight];
Joint leftHand = skeleton.Joints[JointType.HandLeft]; 
```

对于您曾经写过的相机高度

```
_nui.NuiCamera.ElevationAngle = 17; 
```

现在您只需使用您创建的传感器（在下面解释它如何替换 Runtime 类）然后编写

```
sensor.ElevationAngle = 17; 
```

操纵彩色图像框架这是之前必须编写的

```
 rawImage.Source = e.ColorImageFrame.ToBitmapSource(); 
```

现在您必须在执行上述操作之前打开 colorimage 框架并检查是否返回了某些内容。并且转换为位图源也发生了变化。改造是这样的

```
 using (var videoFrame = e.OpenColorImageFrame())
            {
                if (videoFrame != null)
                {
                    var bits = new byte[videoFrame.PixelDataLength];
                    videoFrame.CopyPixelDataTo(bits);
                }
            } 
```

然而，在将几个 Kinect 应用程序从 beta 2 移植到 v1 之后，我终于开始看到变化的模式。在大多数情况下，只需将一组样板代码替换为另一组样板代码即可。代码的任何独特部分大部分都可以单独放置。

在这篇文章中，我想演示五种简单的代码转换，它们将简化您从 beta 2 到 Kinect SDK v1 的过程。我会一个样板片段一个样板片段来做。

命名空间已被转移。Microsoft.Research.Kinect.Nui 现在只是 Microsoft.Kinect。幸运的是，Visual Studio 使得解析命名空间相对容易，所以我们可以继续。

Runtime 类型是用于处理来自 Kinect 的数据流的控制器对象，现在称为 KinectSensor 类型。抓取它的一个实例也发生了变化。您曾经像这样新建一个实例：

```
Runtime nui = new Runtime(); 
```

现在，您改为从包含连接到 PC 的所有 KinectSensor 的静态数组中获取 KinectSensor 的实例。

```
KinectSensor sensor = KinectSensor.KinectSensors[0]; 
```

初始化 KinectSensor 对象以开始读取颜色流、深度流或骨架流也发生了变化。在 beta 2 中，初始化过程看起来不是很 .NET-y。在 v1 中，这已被大大清除。用于初始化深度和骨架流的 beta 2 代码如下所示：

```
_nui.SkeletonFrameReady += new EventHandler( _nui_SkeletonFrameReady ); _nui.DepthFrameReady += new EventHandler( _nui_DepthFrameReady ); _nui.Initialize(RuntimeOptions.UseDepth, RuntimeOptions.UseSkeletalTracking); _nui.DepthStream.Open(ImageStreamType.Depth , 2 , ImageResolution.Resolution320x240 , ImageType.DepthAndPlayerIndex); 
```

在 v1 中，此样板代码已被更改，因此 Initialize 方法消失了，大致由 Start 方法代替。反过来，流上的 Open 方法已被 Enable 取代。只需启用骨架流，即可获得 DepthAndPlayerIndex 数据。另请注意，深度和颜色流的事件参数类型现在不同。这是 v1 中的相同代码：

```
sensor.SkeletonFrameReady += 
    new EventHandler<SkeletonFrameReadyEventArgs>(
        sensor_SkeletonFrameReady
        );
sensor.DepthFrameReady += 
    new EventHandler<DepthImageFrameReadyEventArgs>(
        sensor_DepthFrameReady
        );
sensor.SkeletonStream.Enable();
sensor.DepthStream.Enable(
    DepthImageFormat.Resolution320x240Fps30
    );
sensor.Start(); 
```

变换平滑：在 beta 2 中平滑骨架流曾经非常容易。您只需打开它。

```
nui.SkeletonStream.TransformSmooth = true; 
```

在 v1 中，您必须创建一个新的 TransformSmoothParameters 对象并将其传递给骨架流的 enable 属性。与 beta 2 不同，您还必须自己初始化这些值，因为它们都默认为零。

```
sensor.SkeletonStream.Enable(
    new TransformSmoothParameters() 
    {   Correction = 0.5f
    , JitterRadius = 0.05f
    , MaxDeviationRadius = 0.04f
    , Smoothing = 0.5f }); 
```

流事件处理：处理来自深度流、视频流和骨架流的就绪事件也变得容易得多。以下是您在 beta 2 中处理 DepthFrameReady 事件的方式（骨架和视频遵循相同的模式）：

```
void _nui_DepthFrameReady(object sender , ImageFrameReadyEventArgs e) { var frame = e.ImageFrame; var planarImage = frame.Image; var bits = planarImage.Bits; // your code goes here } 
```

出于性能原因，较新的 v1 代码看起来非常不同，并且底层 C++ API 泄​​漏了一点。在 v1 中，我们需要打开图像框架并检查以确保返回了某些内容。此外，我们创建自己的字节数组（对于深度流，这已成为一个短裤数组）并从帧对象填充它。您可能在 beta 2 中熟悉的 PlanarImage 类型已经完全消失了。还要注意处理 ImageFrame 对象的 using 关键字。上面代码的音译现在看起来是这样的：

```
void sensor_DepthFrameReady(object sender
    , DepthImageFrameReadyEventArgs e)
{
    using (var depthFrame = e.OpenDepthImageFrame())
    {
        if (depthFrame != null)
        {
            var bits =
                new short[depthFrame.PixelDataLength];
            depthFrame.CopyPixelDataTo(bits);
            // your code goes here
        }
    }
} 
```

我注意到许多使用 Kinect SDK beta 2 的站点和库仍未移植到 Kinect SDK v1。鉴于 API 似乎发生了多大变化，我当然理解这种犹豫。

但是，如果您遵循这五个简单的翻译规则，您将能够非常快速地转换大约 80% 的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:33:54.110

使用最新的 SDK，您的`SkeletonFrameReady`回调应如下所示：

```
private Skeleton[] _skeletons = new Skeleton[0];

private void OnSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
    {
        if (skeletonFrame == null || skeletonFrame.SkeletonArrayLength == 0)
            return;

        // resize the skeletons array if needed
        if (_skeletons.Length != skeletonFrame.SkeletonArrayLength)
            _skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];

        // get the skeleton data
        skeletonFrame.CopySkeletonDataTo(_skeletons);

        foreach (var skeleton in _skeletons)
        {
            // skip the skeleton if it is not being tracked
            if (skeleton.TrackingState != SkeletonTrackingState.Tracked)
                continue;

            leftElbow = skeleton.Joints[JointType.ElbowLeft];
            rightHand = skeleton.Joints[JointType.HandRight];
        }
    }
} 
```

请注意，`SkeletonData`并且`JointID`不再存在。你得到一个对象的集合`Skeleton`，每个对象都有一个`Joints`数组。`JointType`您可以使用枚举拉出单个关节。

`JointCollections`为每个返回，`Skeleton`可以通过调用来访问`Skeleton.Joints`。您可以为单个关节引用数组，或保存`JointCollection`关闭以进行其他处理。

缩放并不特定于 SDK。缩放时，您从 Kinect 获取真实世界坐标并将其映射到屏幕上。你如何获得这些真实世界的坐标可能会略有不同（即，你如何访问骨架），但缩放本身并没有什么不同。没有像`myJoint.ScaleTo()`.

Coding4Fun[库](http://channel9.msdn.com/coding4fun)具有缩放功能，可让您将关节位置缩放到屏幕像素。或者，您可以自己编写以满足特定需求，例如：

```
private static double ScaleY(Joint joint)
{
    double y = ((SystemParameters.PrimaryScreenHeight / 0.4) * -joint.Position.Y) + (SystemParameters.PrimaryScreenHeight / 2);
    return y;
}

private static void ScaleXY(Joint shoulderCenter, bool rightHand, Joint joint, out int scaledX, out int scaledY)
{
    double screenWidth = SystemParameters.PrimaryScreenWidth;

    double x = 0;
    double y = ScaleY(joint);

    // if rightHand then place shouldCenter on left of screen
    // else place shouldCenter on right of screen
    if (rightHand)
    {
        x = (joint.Position.X - shoulderCenter.Position.X) * screenWidth * 2;
    }
    else
    {
        x = screenWidth - ((shoulderCenter.Position.X - joint.Position.X) * (screenWidth * 2));
    }

    if (x < 0)
    {
        x = 0;
    }
    else if (x > screenWidth - 5)
    {
        x = screenWidth - 5;
    }

    if (y < 0)
    {
        y = 0;
    }

    scaledX = (int)x;
    scaledY = (int)y;
} 
```

或者是这样的：

```
double xScaled = (rightHand.Position.X - leftShoulder.Position.X) / ((rightShoulder.Position.X - leftShoulder.Position.X) * 2) * SystemParameters.PrimaryScreenWidth;
double yScaled = (rightHand.Position.Y - head.Position.Y) / (rightHip.Position.Y - head.Position.Y) * SystemParameters.PrimaryScreenHeight; 
```

对于缩放，您所要做的就是定义真实世界中的哪个位置（ala：Kinect 坐标）等于屏幕的左、右、顶部和底部。你只是告诉你的应用程序“这个 Kinect 坐标等于这个屏幕像素”。

**是否需要缩放？**

为了与屏幕上的对象进行交互，需要进行某种缩放。Kinect 以米为单位返回相对于其视野的值。如果没有扩展，它就不是一个可用的系统。

请记住，缩放并不是 Kinect 或新旧 SDK 独有的。您有一个正在工作的坐标系，以及需要转换到的另一个坐标系。发生在许多不同的情况下。您正在做的是说一个坐标系中的“这个”位置等于另一个坐标系中的“那个”位置。

有两种基本方法可以确定现实世界中的哪个位置等于一个像素。

一种是采用 Kinect 的坐标系并将其映射到屏幕上。这意味着 Kinect 中的 0,0 等于屏幕上的 0,0。然后，您获取 Kinect 系统的外部边界并将它们映射到屏幕分辨率。

我不推荐这个。它创造了一个非常大的工作空间，并且会让用户感到沮丧。

另一种方法是创建一个“命中框”。看看我上面做的两行翻译。这会在身体周围创建一个击球框以进行工作。使用右手，屏幕的左侧等于左肩的 x 线；屏幕右侧是您右肩右侧的一小段距离（它是您右肩的 x 坐标加上您两个肩膀之间的距离）。屏幕的垂直位置映射在您的头部和臀部之间。

此方法允许用户站在 Kinect 视野中的任何位置，并以相同的方式操作对象。它创建的命中框也非常适合普通用户使用。

# objective-c - 理解 iOS 泄漏调用堆栈跟踪

> ID：13380623
> 
> 赞同：0
> 
> 时间：2012-11-14T14:23:46.130
> 
> 标签：objective-c, ios, ios5, malloc, memory-leaks

当我使用以下命令调用泄漏时，我有以下 malloc 堆栈跟踪：

MallocStackLogging=1 泄漏

泄漏：0x15d3cac0 大小=256 区域：DefaultMallocZone_0x7b0a000

```
Call stack: [thread 0xb0468000]: | thread_start | _pthread_start | __NSThread__main__ | -[NSThread main] | -[AggregatorObjCWorkQueue newThreadMainLoop] | -[NSRunLoop(NSRunLoop) runMode:beforeDate:] | CFRunLoopRunInMode | CFRunLoopRunSpecific | __CFRunLoopRun | __CFRunLoopDoSources0 | __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ | __NSThreadPerformPerform | -[NSObject performSelector:withObject:] | -[AggregatorTask run] | -[ComAppAggregatorApiSystemClientWorkerFactory_$4_$1 run] | -[ComAppAggregatorFrameworkClientSubscriptionSyncer startWithComAppAggregatorApiClient:] | -[ComAppAggregatorSyncClientSyncSubscriptionRegistry addSubscriptionWithComAppAggregatorQueryQueryXML_Subscription:] | -[ComAppAggregatorSyncClientSyncSubscriptionRegistry newSyncAndPostWithComAppAggregatorQueryQueryXML_QueryKey:] | -[ComAppAggregatorSyncClientSyncSubscriptionRegistry writeUpdateWithComAppAggregatorQueryQueryXML_QueryKey:] | -[ComAppAggregatorSyncClientSyncSubscriptionRegistry writeSubscriptions] | -[JavaUtilTreeMap putWithId:withId:] TreeMap.m:371 | -[JavaUtilTreeMap createNodeWithId:withId:] TreeMap.m:634 | -[JavaUtilTreeMap_Node init] TreeMap.m:1463 | -[IOSObjectArray initWithLength:type:] IOSObjectArray.m:42 | calloc | malloc_zone_calloc 
```

有人可以帮我理解 malloc 的调用堆栈跟踪吗？即分解问题：1.堆栈跟踪是如何排序的？Class1 方法1 | 类 2 方法 2 | Class3 Method3：这些代表什么？

2：物体描述前的正负号是什么意思？-[类方法] | +[类方法]

3：其中哪一个实际上是泄漏的？我无法准确确定堆栈跟踪的哪个对象/部分正在泄漏。

任何指向文档的链接都会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T07:15:15.610

使用 Leaks 工具（在 Instruments 应用程序中）在其扩展详细信息窗格中查看堆栈跟踪要容易得多。

但这里是如何分析你的堆栈跟踪。首先，`|`用换行符替换 的每个实例：

```
Call stack: [thread 0xb0468000]: 
thread_start 
_pthread_start 
__NSThread__main__ 
-[NSThread main] 
-[AggregatorObjCWorkQueue newThreadMainLoop] 
-[NSRunLoop(NSRunLoop) runMode:beforeDate:] 
CFRunLoopRunInMode 
CFRunLoopRunSpecific 
__CFRunLoopRun 
__CFRunLoopDoSources0 
__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ 
__NSThreadPerformPerform 
-[NSObject performSelector:withObject:] 
-[AggregatorTask run] 
-[ComAppAggregatorApiSystemClientWorkerFactory_$4_$1 run] 
-[ComAppAggregatorFrameworkClientSubscriptionSyncer startWithComAppAggregatorApiClient:] 
-[ComAppAggregatorSyncClientSyncSubscriptionRegistry addSubscriptionWithComAppAggregatorQueryQueryXML_Subscription:] 
-[ComAppAggregatorSyncClientSyncSubscriptionRegistry newSyncAndPostWithComAppAggregatorQueryQueryXML_QueryKey:] 
-[ComAppAggregatorSyncClientSyncSubscriptionRegistry writeUpdateWithComAppAggregatorQueryQueryXML_QueryKey:] 
-[ComAppAggregatorSyncClientSyncSubscriptionRegistry writeSubscriptions] 
-[JavaUtilTreeMap putWithId:withId:] TreeMap.m:371 
-[JavaUtilTreeMap createNodeWithId:withId:] TreeMap.m:634 
-[JavaUtilTreeMap_Node init] TreeMap.m:1463 
-[IOSObjectArray initWithLength:type:] IOSObjectArray.m:42 
calloc 
malloc_zone_calloc 
```

**问题 1：**最旧的堆栈帧在顶部，最年轻的堆栈帧在底部。所谓的，叫`thread_start`的，叫的，等等。`_pthread_start``__NSThread__main__``-[NSThread main]`

**问题2：**命名`-[NSThread main]`的函数是实现类的实例方法的`main`函数`NSThread`。Objective-C 编译器可以生成`-[NSThread main]`您无法在源代码中逐字写出的名称（如 ）的函数。

对于类方法，函数名以 a`+`而不是 a开头`-`。所以上面的类方法`alloc`是`NSObject`由一个名为 的函数实现的`+[NSObject alloc]`。

**问题 3：**您发布的堆栈跟踪显示了分配泄漏对象时的堆栈跟踪。该堆栈跟踪的任何部分都不一定是“实际上泄漏的部分”。

您需要了解对象被泄露意味着什么。这意味着没有指向泄漏对象的全局变量或局部变量（在堆栈上），或指向指向泄漏对象的对象，或指向指向泄漏对象的对象的对象, 等等. 等等. 由于没有从全局或局部变量开始的指针链（我们在 biz 中所说的“根指针”）并导致泄漏的对象，因此您的程序无法访问对象，即使它仍然被分配。

那么为什么会泄露呢？因为在从根指针到您的对象的最后一个链被破坏之前，它没有被释放。它被泄露是因为一个*应该*被调用的函数——释放函数——没有被调用。它应该在分配对象*后的某个时间被调用。*由于泄漏工具仅在分配对象时向您显示堆栈跟踪，因此它可能无法为您提供足够的信息来确定丢失的版本应该去哪里。

这让我们回到了 Instruments 应用程序中的 Leaks 工具。Leaks 工具也无法显示您应该释放的确切位置，但它可以显示每次保留、释放和自动释放对象时的堆栈跟踪。这些额外的堆栈跟踪可以帮助您找出对象泄露的原因。Instruments 还比leaks 命令行工具更好地格式化堆栈跟踪。如果您有一个泄漏对象网络，Instruments 可以以图形方式向您显示该网络，这可能使您更容易理解您的应用程序泄漏对象的原因。

Apple 发布了[一堆开发者视频](https://developer.apple.com/videos/)，其中一些向您介绍了 Instruments。我不记得究竟是哪些视频或哪些视频谈论泄漏检测，但我知道其中至少有一个。从 WWDC 2012 视频开始，然后继续工作。

### 编辑

WWDC 2012 视频“Session 409 - Learning Instruments”谈到了在大约 35 分钟后开始使用 Leaks 工具。

WWDC 2011 视频“Session 310 - What's New In Instruments”讨论了从大约 39 分钟开始使用 Leaks 仪器。

在其他一些人中也肯定提到过。

# asp.net-mvc - 设置 Kendo UI Grid Popup (MVC) 的宽度

> ID：13380628
> 
> 赞同：13
> 
> 时间：2012-11-14T14:24:03.340
> 
> 标签：asp.net-mvc, kendo-ui

我正在使用 Kendo UI 的 MVC Wrappers，我无法设置弹出窗口的宽度。我已经尝试了两种方法，但都没有奏效。这是我尝试过的：

```
.Editable(edit => edit.Mode(GridEditMode.Popup)
    .TemplateName("Create")
    .Window(w => w.Title("Add Interruption")
        .Name("addInterruption")
        .Width(700))) 
```

和

```
.Editable(edit => edit.Mode(GridEditMode.Popup)
    .TemplateName("Create")
    .Window(w => w.Title("Add Interruption")
        .Name("addInterruption")
        .HtmlAttributes(new { style="width:700px;" }))) 
```

身高也不行。

如何设置弹出窗口的宽度？谢谢！

**更新：** 对于其他为此苦苦挣扎的人，这里是修复：

```
.k-edit-form-container { width: auto;} 
```

这可以在 kendo.common.min.css 文件中找到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T18:26:33.787

遗憾的是，您在两个片段中应用的设置都没有序列化，并且在使用 Ajax 绑定时根本没有应用于窗口（甚至不确定服务器绑定）。

基本上要设置宽度，我建议您在页面加载时使用以下 JavaScript：

```
$("#NameOfTheGrid").data().kendoGrid.options.editable.window.width = "1000px"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-15T16:54:27.773

为了我，

```
 .k-edit-form-container { width: auto;} 
```

在服务器模式下绑定时需要。我只是将它添加为视图中的样式，而不是编辑 kendo css 文件。

另一个答案，

```
$("#NameOfTheGrid").data().kendoGrid.options.editable.window.width = "1000px"; 
```

使用 ajax 绑定效果很好，但不适用于服务器绑定。

# apache - Apache httpd：如何信任特定的客户端证书？

> ID：13380630
> 
> 赞同：6
> 
> 时间：2012-11-14T14:24:11.683
> 
> 标签：apache, ssl, certificate, x509

如何配置 Apache httpd 以信任特定的客户端证书？

我们需要将对 Web 服务的访问限制在特定（已知）合作伙伴的服务器上。
我们计划为此使用基于 CA 的解决方案（一个受信任的 CA，它只会在我们接受时签署可信赖的 CSR）；但是，我们公司的 CA 不会为外部公司创建证书。

无论如何，为了建立安全连接，在必要的 PKI 准备好之前，我们希望将特定的客户端证书配置为在我们的 Apache httpd 代理上受信任。

但是 httpd 不接受客户端的连接，这些客户端尝试使用客户端证书进行连接，该证书已添加到为虚拟主机配置的 CACertificateFile（以 Base64 和 DER 格式（PEM）编码的串联 x509 证书）中。

在这种情况下，客户端证书不是自签名证书。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T18:52:18.423

您应该通过`SSLCACertificateFile`or配置您信任的 CA 证书，`SSLCACertificatePath`并使用`SSLVerifyClient`( `optional`or `required`, not `optional_no_ca`，不会执行任何身份验证) 使服务器请求客户端证书。

如果您`SSLVerifyClient`直接在您的`VirtualHost`部分中使用，客户端证书将在初始握手期间发送。如果将其放在`Directory`/`.htaccess`中，将重新协商客户端证书。

在初始握手中发送证书时更容易调试，因为客户端证书本身不会被加密。您应该能够通过使用 Wireshark 查看流量（在`Certificate`客户端发送的消息中）看到它。调试时，值得检查`Certificate Request`消息是否由服务器发送，并查看其证书颁发机构列表。

问题的典型原因是客户端无法识别该列表，或者客户端未在其链中发送其中间 CA 证书（如果需要）。

如果您想更具体地授权某些证书，您可以检查变量 SSL 变量（例如）并在指令`SSL_CLIENT_S_DN_*`中使用它（参见[示例](http://httpd.apache.org/docs/2.2/mod/mod_ssl.html#sslrequire)）。`SSLRequire`

# mysql - 如何在 cakephp 中获取相关表的 COUNT 值

> ID：13380632
> 
> 赞同：2
> 
> 时间：2012-11-14T14:24:20.633
> 
> 标签：mysql, cakephp

我正在开发 cakephp 中的词汇表创建/管理工具。现在我被困在术语结果的分页上。

现在我正在使用此代码将每个术语的翻译数量放入术语索引中：

```
public $findMethods = array('translations' =>  true);

protected function _findTranslations($state, $query, $results = array()) {
    if ($state == 'after') {
        foreach($results as $index => $result):
            $countid = $result['Term']['id'];
            $translationcount = $this->query('SELECT COUNT(*) as translations_number FROM translations WHERE term_id = '.$countid);
            $translationcount = $translationcount[0][0]['translations_number'];
            $results[$index]['Term']['translation_count'] = $translationcount;
        endforeach;

        return $results;
    }

} 
```

它正在工作，显示每个术语的翻译数量，但是 - 我无法按该列排序。可能是因为数据在查询后更新，而分页不知道如何排序。

但我不知道如何扩展我的查询以获取有关每个术语的翻译计数的信息。

这就是我的术语模型中的内容（除了我之前粘贴的代码）

```
var $hasMany = array(
    'Translation' => array(
        'className'     => 'Translation',
        'foreignKey'    => 'term_id',
        'dependent'     => true
    )
); 
```

这就是翻译模型中的内容：

```
var $belongsTo = 'Term'; 
```

在数据库中，看起来在术语表中我有常规的 id 和术语（除了对这个不重要的其他字段），在翻译表中我有常规的 id、相关的 term_id 和实际翻译。

我希望一切都清楚，我不是程序员，我所做的只是通过尝试/失败方法 - 但在这个我被卡住了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:04:56.417

我假设您正在寻找的是[CakePHP 的 counterCache](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#belongsto)（向下滚动几行）。它会自动记录该模型有多少相关项目。

# ios - 格力iOS成就展示Dashboard

> ID：13380637
> 
> 赞同：1
> 
> 时间：2012-11-14T14:24:35.720
> 
> 标签：ios, xcode, gree

如何在 iOS 中显示 Gree 中的成就。在 OpenFeint 之前我使用这个：

```
[OpenFeint launchDashboardWithAchievementsPage]; 
```

但在格力我找不到任何类似的方法。

谢谢你的帮助

# vim - Vim：仅使用 + 作为 yank 命令的默认寄存器

> ID：13380643
> 
> 赞同：10
> 
> 时间：2012-11-14T14:24:44.580
> 
> 标签：vim, clipboard

我只想将 + register （系统剪贴板）**用于**yank 命令（即不要覆盖此寄存器`dd`或其他命令）。

```
:set clipboard+=unnamed 
```

不起作用，因为它引入`dd`了上述覆盖。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T14:59:10.940

您可以覆盖默认的 yank 命令，以便它们默认为系统剪贴板，除非明确给出另一个寄存器：

```
:nnoremap <expr> y (v:register ==# '"' ? '"+' : '') . 'y'
:nnoremap <expr> yy (v:register ==# '"' ? '"+' : '') . 'yy'
:nnoremap <expr> Y (v:register ==# '"' ? '"+' : '') . 'Y'
:xnoremap <expr> y (v:register ==# '"' ? '"+' : '') . 'y'
:xnoremap <expr> Y (v:register ==# '"' ? '"+' : '') . 'Y' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T14:36:24.603

`d`更像是“剪切”而不是“删除”。你得到的是正常的行为。

不过，您可以使用“黑洞寄存器”：`"_d`. 我已将其映射到`<leader>d`.

# ios - 集成在应用购买弹出窗口中

> ID：13380645
> 
> 赞同：1
> 
> 时间：2012-11-14T14:24:47.510
> 
> 标签：ios, xcode, popup, in-app-purchase

我是几个月的 iOS 开发人员，我目前正在开发一个带有商店的应用程序（订阅可更新）。

IAP 的集成似乎有效，因为我可以使用测试帐户购买和恢复我的产品。

但是，我有一个弹出窗口不断破坏我无法控制其外观的用户体验。此弹出窗口表示需要连接，我必须登录才能继续。（即使应用程序处于后台，它也会出现，请参阅随附的屏幕截图）

理论上，这个弹出窗口必须在我购买时出现，而不是之前出现。

你们中有人知道是什么原因导致此弹出窗口以及为什么它一直出现吗？

谢谢您的帮助！

# java - 如何将doc文件和pdf文件转换为图像文件？

> ID：13380646
> 
> 赞同：0
> 
> 时间：2012-11-14T14:24:47.293
> 
> 标签：java, image, pdf, doc

将 doc 和 pdf 文件转换为任何图像文件的最佳开源 java api 是什么？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:35:19.570

这个问题在这里已经有多个答案。只需搜索“doc 文件到图像”或“PDF 到图像”。

但简而言之，有许多不同的方法。主要的似乎是：

1.  使用专门为此任务制作的专用 API（PDF Box 似乎很流行）。
2.  解析 Doc 或 PDF 文件并将其光栅化以将其转换为图像（API 做什么？）。

或者

3.  安装打印机模拟器驱动程序，不可见地打开 word/PDF，并使用打印机模拟器“打印”文档，但模拟器不会将字节发送到实际的物理打印机，而是打印到新的 PDF 或图像文件。

# java - 更改Jtable，Jframe中列名的样式（字体，字体大小，背景颜色）

> ID：13380647
> 
> 赞同：1
> 
> 时间：2012-11-14T14:24:49.180
> 
> 标签：java, colors, jtable, jframe

我想问如何更改表格中列名的样式（字体、背景颜色）。我正在使用 Jtable、Jframe、Java

```
table_test.setModel(new javax.swing.table.DefaultTableModel(
        new Object [][] {
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null}
        },
        new String [] {
            "NO", "CODE", "ADDRESS", "CLASS"
        }
    ) {
        boolean[] canEdit = new boolean [] {
            false, false, false, false
        };

        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return canEdit [columnIndex];
        }
    });
    table_test.setRowHeight(30);
    table_test.setSelectionMode(0);

    jScrollPane1.setViewportView(table_test);
    table_test.getColumnModel().getColumn(0).setMinWidth(55);
    table_test.getColumnModel().getColumn(0).setMaxWidth(55);
    table_test.getColumnModel().getColumn(1).setMinWidth(120);
    table_test.getColumnModel().getColumn(1).setMaxWidth(120);
    table_test.getColumnModel().getColumn(2).setMinWidth(280);
    table_test.getColumnModel().getColumn(2).setMaxWidth(280);
    table_test.getColumnModel().getColumn(3).setMinWidth(63);
    table_test.getColumnModel().getColumn(3).setMaxWidth(63); 
```

这是图像： ![在此处输入图像描述](../Images/0b17d0b42191f259f8c8fabb171aea68.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:36:04.427

您可以像使用表头设置字体一样设置它，

```
table.getTableHeader().setFont( ... ); 
```

例子：

```
table.getTableHeader().setFont(new Font("Times New Roman", Font.BOLD, 12)); 
```

# php - 将变量传递给 php 文件

> ID：13380649
> 
> 赞同：0
> 
> 时间：2012-11-14T14:24:59.570
> 
> 标签：php, jquery, ajax

我有一个使用第 3 方 API 返回 XML 的 php 文件 (myxml.php)。它在最后一行回显 XML。

```
 $xml = file_get_contents($url);
 echo $xml; 
```

另一个 php 文件 (index.php) 使用 jQuery 在以下位置读取此 XML：

```
$(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "myxml.php",
            dataType: "xml",
            success: function(xml) { 
```

我的 index.php 文件需要向 myxml.php 文件传递​​一个名为“searchitem”的变量，它可以在调用 API 之前使用该变量。

如何将 $searchitem 传递给 myxml.php ？

另外，为了获得更好的性能，我可以将 php 变量 $xml 导入到上面的 ajax 代码中而不需要回显它吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:27:50.850

您显然正在使用 jQuery。

只需将其添加到 url（因此使用 php 构建 jQuery 语法）

```
 $.ajax({
        type: "GET",
        url: "myxml.php?searchitem=<?php echo $searchitem; ?>",
        dataType: "xml",
        success: function(xml) { 
```

反过来，在 myxml.php 上，您可以使用`$_GET`变量来获取它。

```
$searchitem = $_GET['searchitem']; 
```

* * *

没有回声？仅当您不需要 ajax 时才有可能，因此您只需将 myxml.php 文件包含到 index.php 文件中即可。但我认为做 ajax 是有充分理由的

# file - Grails 文件对本地运行的应用程序可见/部署时丢失？

> ID：13380652
> 
> 赞同：0
> 
> 时间：2012-11-14T14:25:18.307
> 
> 标签：file, tomcat, grails, directory, war

我在 web-app/ 中有一个名为“模板”的文件夹。当我在本地“进行战争”时，效果很好：

```
new File('web-app/templates/').list() 
```

我可以列出我文件夹中的文件。但是，当我将我的 war 文件部署到远程 tomcat 时，列表是空的。我是否必须明确告诉 grails 将文件夹复制到 war 文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:38:20.103

也许您正在寻找以下内容：

```
def baseFolder = grailsAttributes.getApplicationContext().getResource("/").getFile().toString()

def dirList= new File(baseFolder + "/templates").list() 
```

在将 WAR 部署到 tomcat 时，这对我有用。在我的例子中，baseFolder 是我的应用程序中 web-app 目录的绝对路径。

见[http://googolflex.com/?p=664](http://googolflex.com/?p=664)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:55:54.397

您的代码高度依赖于被“分解”的 war 文件（它可能在 Tomcat 中，也可能不在 Tomcat 中，具体取决于配置），以及容器为您的应用程序设置为“当前目录”的内容。

IIRC，Java EE 规范说，文件系统中唯一可以安全直接访问的位置是 System.getProperty("java.io.tmpdir") 标识的临时目录。

当然，许多应用程序不这样做，但它是非标准的，因此很脆弱。

最安全的做法是将模板目录放在类路径中（即在war 文件中的WEB-INF/classes 目录下的树中某处），然后通过ClassLoader 及其findResource 和getResource 方法访问它们。

# css - 是否可以使子分区浮动在所有其他分区之上，包括 z-index 设置高于父分区的分区？

> ID：13380653
> 
> 赞同：2
> 
> 时间：2012-11-14T14:25:19.450
> 
> 标签：css, xhtml

很抱歉，如果这个问题已经被问过，但我确实搜索并找不到它。基本上我的页面中有一个下拉菜单，通常需要出现在主要内容的顶部。但是在该内容中是一个灯箱类型的东西，需要浮在上面。

所以代码是这样的：

```
<div style="z-index:2"> 
   Drop Menu here
</div>
<div style="z-index:1">
   Content Here... 
   <a href="#">Lightbox button here</a>
   <div>
        Lightbox content (hidden initially)
   </div>
   <div>
        Lightbox background (hidden initially)
   </div>
</div> 
```

所以现在我遇到的问题是，如果我尝试将灯箱背景设置为高 z-index，它不会覆盖菜单，因为它的父级比同级菜单分区的 z-index 低。如果我将内容容器设置为更高级别，则下拉菜单不再出现在内容顶部，因此无法点击。我知道这可能是我在这里遗漏的一个明显的东西，或者我使用的灯箱插件可能不是那么好或什么？而且我使用的是 joomla CMS，所以我仅限于可以创建灯箱部门的地方。

否则我认为的另一个选项是将菜单上的 z-index 设置为子分区（实际菜单），但问题是它是一个框架系统，所以我还需要从基本模板中删除 z-index，然后它会被更新覆盖，除非有一个 z-index 命令将它设置为“忽略”或什么？

**好的，没关系，我将 z-index 设置为 auto 并且它似乎正在工作，但不知道这是否是最好的解决方案，所以我会欢迎任何其他可能的解决方案。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:27:20.123

好的，所以它完美工作的唯一方法是使用 jquery 将分区附加到正文。所以在我的灯箱脚本中我添加了：

```
jQuery('body').append(modalBG);
jQuery('body').append(modal); 
```

其中modal和modalBG分别是弹出内容和背景的div。

将其添加到创建灯箱的函数中，它将它们添加为主体中的最后一个子级，这意味着自然出现在所有其他 div 的顶部，但我想你也可以为此设置一个固定的 z-index。我意识到这对专业人士来说可能是很明显的事情，但我与它作斗争，所以也许其他正在努力使用限制性模板和 CMS 系统的人会欣赏这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:15:41.327

恐怕问题出在您的 HTML 上。您应该将灯箱容器放在内容 div 之外作为 body 标记的子级。

例子：

```
<div style="z-index:2"> 
   Drop Menu here
</div>
<div style="z-index:1">
   Content Here... 
   <a href="#">Lightbox button here</a>
</div>

<div style="z-index:101">
    Lightbox content (hidden initially)
</div>
<div style="z-index:100">
    Lightbox background (hidden initially)
</div> 
```

注意：您当然应该为上述所有内容分配 id 并使用外部样式表。

# ef-code-first - 实体框架代码优先：一对一关系不生成外键

> ID：13380654
> 
> 赞同：0
> 
> 时间：2012-11-14T14:25:32.690
> 
> 标签：ef-code-first, sql-server-ce, entity-framework-5

我有以下内容：

```
 public abstract class EntityBase
   {
      [Key]
      public int Id { get; set; }

      public DateTime? CreatedTime { get; set; }
      public DateTime? ModifiedTime { get; set; }
   }

public class AnalysisFile : EntityBase
   {
      public AnalysisFile()
      {
         DateAdded = DateTime.Now;
      }

      public string SourceFolder { get; set; }
      public string Filename { get; set; }
      public DateTime DateAdded { get; set; }
      public long FileSize { get; set; }
      public Document Document { get; set; }
   }

public class Document : EntityBase
   {
      public Document()
      {
         Publish = true;
      }

      public string Name { get; set; }
      public int AreaId { get; set; }
      public int SchoolId { get; set; }
      public int Year { get; set; }
      public long FileSize { get; set; }
      public AnalysisFile AnalysisFile { get; set; }
      public School School { get; set; }
      public Area Area { get; set; }
      public bool Publish { get; set; }
   }

     modelBuilder.Entity<Document>().HasRequired(x => x.AnalysisFile);
     modelBuilder.Entity<AnalysisFile>().HasOptional(x => x.Document); 
```

我的问题是 EF 似乎没有为 AnalysisFile 和 Document 之间的关系创建外键，我在这里遗漏了什么还是这是预期的行为？

我还尝试在这两个类上创建 AnalysisFileId 和 DocumentId 属性，但是当我这样做时，它们不会填充任何 id。

还有一个问题：如何确保 Document 对 AnalysisFile 有级联删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:18:40.260

与实体框架的一对一关系是[共享主键关联](http://weblogs.asp.net/manavi/archive/2011/04/14/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations.aspx)。除了主键之外，它们没有单独的外键列，因为主键`Document`同时是外键`AnalysisFile`。（您可以看到，当您检查在数据库中创建的关系时。它应该将外键`Id`与`Document`主键`Id`相关联`AnalysisFile`。）

您可以像这样启用级联删除：

```
modelBuilder.Entity<Document>()
    .HasRequired(x => x.AnalysisFile)
    .WithOptional(x => x.Document)
    .WillCascadeOnDelete(true); 
```

# java - Flash Builder Java 堆空间错误

> ID：13380655
> 
> 赞同：1
> 
> 时间：2012-11-14T14:25:36.627
> 
> 标签：java, eclipse, flash-builder

我一直在使用 Flash Builder 4.7 开发一个 flash 应用程序，突然间它出现了一个“java Heap space”错误。我试过增加没有效果的堆空间。

Eclipse 会运行，但每次我尝试运行或调试我的应用程序时，它只是挂起或不执行任何操作，并且 HTML 页面显示“未加载电影”，然后它时不时地再次出现堆空间错误。

这是我的崩溃日志：

```
!ENTRY org.eclipse.core.jobs 4 2 2012-11-14 14:19:39.747
!MESSAGE An internal error occurred during: "Building workspace".
!STACK 0
java.lang.OutOfMemoryError: Java heap space
at java.util.Arrays.copyOf(Arrays.java:2786)
at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:71)
at com.adobe.flash.swf.io.OutputBitStream.writeByte(OutputBitStream.java:230)
at com.adobe.flash.swf.io.OutputBitStream.writeSI16(OutputBitStream.java:304)
at com.adobe.flash.swf.io.OutputBitStream.writeUI16(OutputBitStream.java:355)
at com.adobe.flash.swf.io.SWFWriter.finishTag(SWFWriter.java:400)
at com.adobe.flash.swf.io.SWFWriter.writeTag(SWFWriter.java:1512)
at com.adobe.flash.swf.io.SWFWriter.writeTag(SWFWriter.java:1285)
at com.adobe.flash.swf.io.SWFWriter.writeFrames(SWFWriter.java:869)
at com.adobe.flash.swf.io.SWFWriter.writeTo(SWFWriter.java:2633)
at       com.adobe.flexbuilder.multisdk.compiler.internal.ASApplicationBuilderNext.buildSWF(ASApplicationBuilderNext.java:260)
at com.adobe.flexbuilder.multisdk.compiler.internal.ASApplicationBuilderNext.build(ASApplicationBuilderNext.java:97)
at com.adobe.flexbuilder.multisdk.compiler.internal.ASBuilderNext.build(ASBuilderNext.java:117)
at com.adobe.flexbuilder.multisdk.compiler.internal.ASItemBuilder.build(ASItemBuilder.java:93)
at com.adobe.flexbuilder.project.compiler.internal.FlexProjectBuilder.buildItem(FlexProjectBuilder.java:701)
at com.adobe.flexbuilder.project.compiler.internal.FlexProjectBuilder.build(FlexProjectBuilder.java:405)
at com.adobe.flexbuilder.project.compiler.internal.FlexIncrementalBuilder.build(FlexIncrementalBuilder.java:171)
at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:239)
at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:292)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:295)
at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:351)
at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:374)
at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:143)
at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

!ENTRY org.eclipse.core.jobs 4 2 2012-11-14 14:19:45.181
!MESSAGE An internal error occurred during: "Launching NotNormalCampaignApp".
!STACK 0
java.lang.NullPointerException
at org.eclipse.debug.internal.core.LaunchConfiguration.getLaunchManager(LaunchConfiguration.jav a:462)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:858)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:928)
at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1132)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

这是我的ini文件

```
-startup
../../../eclipse/plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
    ../../../eclipse/plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.100.v20110502
--launcher.defaultAction
openFile
-showsplash
../../../assets/fb_splash_premium.png
-nl
en_US
-vmargs
-Xmn256m
-Xms512m
-Xmx768m
-XX:MaxPermSize=384m
-XX:PermSize=128m
-XX:+UseParNewGC
-XX:+CMSPermGenSweepingEnabled
-XX:+CMSClassUnloadingEnabled
-Xdock:name=Flash Builder
-Xdock:icon=../Resources/fb_app.icns
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts
-Declipse.product=com.adobe.flexbuilder.standalone.producte36
-Declipse.application=com.adobe.flexbuilder.standalone.FlashBuilderApplication
-Dfile.encoding=UTF-8 
```

我已经没有关于如何解决这个问题的想法了？

# android - 在 Android 中展开 WebView 和内容？

> ID：13380656
> 
> 赞同：3
> 
> 时间：2012-11-14T14:25:39.853
> 
> 标签：android, webview, android-webview

我使用 webview 加载`HTML5`动画。由于默认的 webview 是一个小横幅，点击它会展开，HTML5 页面也会变大。

我希望进展非常顺利，但底部总是显示白色背景。`HTML5`页面部分显示。似乎`WebView`绘制`HTML5`页面延迟且缓慢。

我google了很多时间，但没有找到解决方案。我试图打开或关闭硬件加速，但它不起作用。

我用动画来展开，这是动画的代码：

```
WebView webview = (WebView)findViewById(R.id.webview);
ExpandAnimation expand = new ExpandAnimation(webview , getHeight(), 690,true);
expand.setDuration(3800);
webview.startAnimation(expand);

public class ExpandAnimation extends Animation {
    int startingHeight;
    int endingHeight;
    View view;
    boolean down;

    public ExpandAnimation(View view, int startingHeight, int endingHeight, boolean down) {
         this.view = view;
         this.startingHeight = startingHeight;
         this.endingHeight = endingHeight;
         this.down = down;
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
         int newHeight;
         if (down) { 
            newHeight = (int) (((endingHeight-startingHeight) * interpolatedTime) + startingHeight); 
         } 
         else{ 
            newHeight = (int) (((endingHeight-startingHeight)* (1 - interpolatedTime))+startingHeight); 
         }
         view.getLayoutParams().height = newHeight;
         view.requestLayout();
    }

    @Override
    public void initialize(int width, int height, int parentWidth, int parentHeight) {
        super.initialize(width, height, parentWidth, parentHeight);
    }

    @Override
    public boolean willChangeBounds() {
        return true;
    }
} 
```

![扩大进度](../Images/99db69ab022ddc468a3cfd88e18b87ea.png)

# microsoft-dynamics - Navision 如何将文本转换为选项

> ID：13380659
> 
> 赞同：1
> 
> 时间：2012-11-14T14:25:49.363
> 
> 标签：microsoft-dynamics, navision, dynamics-nav

我有一个文本变量，我想将其转换为一个选项并用它设置表数据。它如何将变量转换为选项？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T08:34:03.117

如果您仍希望将字符串转换为选项值，EVALUATE 是您的最佳选择！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:44:29.727

Solved,

```
 OptionName := OptionName::Option; 
```

This does not solve the question itself, but is a workaround since "Option" can be a text String (But it must be a predefined one);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T14:40:40.233

```
// Option to text:

optionName := format(salesHeader."Document Type"::Order);

// Text to option:

case (optionName) of
  'Order': salesHeader."Document Type" := salesHeader."Document Type"::Order;
  'Invoice': salesHeader."Document Type" := salesHeader."Document Type"::Invoice;
end; 
```

# java - HSQLDB 内存数据库 JDBC 模板查询失败

> ID：13380661
> 
> 赞同：2
> 
> 时间：2012-11-14T14:25:51.737
> 
> 标签：java, hsqldb, jdbctemplate

我有一个单元测试，它使用 JDBCTemplate 和一个内存数据库。我的 HSQLDB 设置是：

```
jdbc.driver.className=org.hsqldb.jdbcDriver
jdbc.url=jdbc\:hsqldb\:mem\:test;DB_CLOSE_DELAY\=-1
jdbc.username=sa
jdbc.password= 
```

我正在创建一个表，然后尝试在其中插入新记录之前通过 JDBCTemplate 检查其中是否存在任何数据。

我正在通过 JDBCTemplate 调用 JDBC 查询，如下所示：

```
String query = "select id from Person where id=?";
int isExist = jdbcTemplate.update(query, "1"); 
```

在我的配置 xml 中，我将 dataSource 连接如下：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" lazy-init="default" autowire="default">
    <property name="driverClassName" value="${jdbc.driver.className}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

我收到一条错误消息：

```
org.hsqldb.HsqlException : statement does not generate a row count 
```

如果我在内存数据库中删除并实际连接到 Oracle 数据库，但对于我需要在内存数据库中进行的测试，相同的代码可以工作。

你能帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:15:07.033

您应该使用该`JdbcTemplate.query`方法，该`update`方法用于插入/删除/更新语句。例如：

```
int isExist = jdbcTemplate.queryForInt(query, "1"); 
```

# android - 如何理解这个定义宏？

> ID：13380664
> 
> 赞同：4
> 
> 时间：2012-11-14T14:25:57.180
> 
> 标签：android, c

我正在学习 Dalvik VM 代码，但被文件*InterpC-portable.cpp*中的一些奇怪的 C 定义宏停止。他们对我来说很难理解。代码是：

```
# define H(_op)             &&op_##_op 
```

在文件*libdex/DexOpcodes.h*中，它的使用如下：

```
#define DEFINE_GOTO_TABLE(_name) \
  static const void* _name[kNumPackedOpcodes] = {                      \
  /* BEGIN(libdex-goto-table); GENERATED AUTOMATICALLY BY opcode-gen */ \
  H(OP_NOP),                                                            \
  H(OP_MOVE),                                                           \
  H(OP_MOVE_FROM16),                                                    \
  ... 
```

OP_NOP、OP_MOVE、OP_MOVE_FROM16 是一些*枚举*变量。但是H(_op)宏中的*&&*操作是什么意思呢？获取一个不存储在内存中的指针是没有意义的。任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T14:29:25.207

`&&`是**标签值运算符**。它返回当前作用域中定义的标签的地址，用作操作数。它是一个`gcc`扩展。

# python - 如何在定义的字符集中生成所有可能的字符串？

> ID：13380666
> 
> 赞同：2
> 
> 时间：2012-11-14T14:26:04.620
> 
> 标签：python

我试图使用 python 来定义一个字符集，然后生成所有可能的字符集中的字符串。

我正在考虑首先将字符集设置为变量，然后使用 for 循环生成可能的字符串，如下所示：

```
charSet = [a-zA-Z0-9]
for a in charSet:
      print (a)
for b in charSet:
      print (b) 
```

但我不断收到此错误消息 UnboundLocalError: local variable 'a' referenced before assignment

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:30:49.733

没有类似于您正在寻找的内置语法，但是有一些预定义的字符串包含您需要的字母：

```
import string
charSet = string.ascii_letters + string.digits 
```

对于更通用的解决方案，您可以尝试此功能：

```
def getCharactersFromCharSet(charSet):
    import re
    chars = []
    for c in re.findall('.-.|.', charSet):
        if len(c) == 1:
            chars.append(c)
        else:
            for i in range(ord(c[0]), ord(c[2]) + 1):
                chars.append(chr(i))
    return ''.join(chars)

print getCharactersFromCharSet('a-zA-Z0-9') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:35:35.363

解决 charSet 定义问题后，请查看 itertools.product：

```
from itertools import product
import string

charSet = string.ascii_letters + string.digits
for wordchars in product(charSet, repeat=4):
    print ''.join(wordchars) 
```

# iphone - 下划线按钮标题 xcode

> ID：13380670
> 
> 赞同：0
> 
> 时间：2012-11-14T14:26:24.817
> 
> 标签：iphone, objective-c, ios, xcode, uibutton

> **可能重复：**
> [iPhone：如何在按钮中显示带下划线的文本？](https://stackoverflow.com/questions/2645393/iphone-how-to-display-underlined-text-in-a-button)
> [UIlabel 中的下划线文本](https://stackoverflow.com/questions/2711297/underline-text-in-uilabel)

我有一个像这样的应用程序的部分...不是会员？在这里注册，这里有一个透明背景的自定义按钮，点击后会将用户带到 safari 中的 url。现在我需要的是我想让这个按钮标题加下划线，使它看起来像一个超链接。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:31:46.183

您可以在 UIButton 中为 titleLabel 设置自定义标签，并在自定义 UILabel 中创建下划线： [UIlabel 中的下划线文本](https://stackoverflow.com/questions/2711297/underline-text-in-uilabel/2711587#2711587)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T14:31:41.927

如果按钮标题是静态的，最简单的方法可能是创建文本图像（带下划线）并将图像用作自定义按钮上的按钮图像。

# fancybox - 使用 ajax 和 fancybox 的 jQuery ui 选项卡

> ID：13380673
> 
> 赞同：0
> 
> 时间：2012-11-14T14:26:27.977
> 
> 标签：fancybox, jquery-ui-tabs

我有一个包含几个选项卡的页面，其中使用了 fancybox，一切正常，直到您选择第二个选项卡，然后 fancybox 停止工作。

主页 ：

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>WebShop</title>      

    <link rel="stylesheet" type="text/css" href="/includes/igepa.css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />

    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>    

    <script>
    $(function() {
        $( "#tabs" ).tabs({
            beforeLoad: function( event, ui ) {
                $('.ui-tabs-hide').empty();  
                ui.jqXHR.error(function() {
                    ui.panel.html(
                        "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                        "If this wouldn't be a demo." );
                });
            },
        });
    });
    </script>
</head>
<body>

<div id="tabs">
    <ul>
        <li><a href="test.htm">Test</a></li>
        <li><a href="test.htm">Test</a></li>
    </ul>
</div>

</body>
</html> 
```

测试.htm：

```
<html>

    <head>
        <title>Test</title>

        <link rel="stylesheet" href="http://www.igepa.be/includes/fancybox/source/jquery.fancybox.css" type="text/css" media="screen" />
        <link rel="stylesheet" href="http://www.igepa.be/includes/fancybox/source/helpers/jquery.fancybox-buttons.css" type="text/css" media="screen" /> 
        <link rel="stylesheet" href="http://www.igepa.be/includes/fancybox/source/helpers/jquery.fancybox-thumbs.css" type="text/css" media="screen" />    

        <script src="http://www.igepa.be/includes/jqgridOpenSource/js/jquery-1.7.2.min.js" type="text/javascript"></script>
        <script src="http://www.igepa.be/includes/jqgridOpenSource/js/i18n/grid.locale-nl.js" type="text/javascript"></script>
        <script src="http://www.igepa.be/includes/jqgridOpenSource/js/jquery.jqGrid.min.js" type="text/javascript"></script>                

        <script type="text/javascript" src="http://www.igepa.be/includes/fancybox/source/jquery.fancybox.pack.js"></script>
        <script type="text/javascript" src="http://www.igepa.be/includes/fancybox/source/helpers/jquery.fancybox-buttons.js"></script>
        <script type="text/javascript" src="http://www.igepa.be/includes/fancybox/source/helpers/jquery.fancybox-media.js"></script>   
        <script type="text/javascript" src="http://www.igepa.be/includes/fancybox/source/helpers/jquery.fancybox-thumbs.js"></script>           

        <script>
            $(document).ready(function(){   
                $(".fancybox").fancybox();              
            });             
        </script>
    </head>

<body>
    <a class="fancybox" rel="group" href="http://www.igepa.be/img/items/01-0000-0002Big.jpg"><img src="http://www.igepa.be/img/items/01-0000-0002.jpg" /></a>
</body> 
```

示例：[http ://www.igepa.be/phdj/tabs/tab.htm](http://www.igepa.be/phdj/tabs/tab.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:48:14.980

切换标签时出现 JS 错误。在 test.html 上，对 jquery 的引用不起作用，请更改：

```
http://www.igepa.be/js/jquery-1.7.2.min.js 
```

使用正确的 jquery url，例如：

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script> 
```

因此，您的浏览器不会加载新的 jquery 文件并使用已缓存的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:56:06.517

如果我将所有 css 和 js 链接移动到“顶级”级别，我找到了解决方案，它工作正常。

这是工作代码：

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>WebShop</title>      

    <link rel="stylesheet" type="text/css" href="/includes/igepa.css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />

    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>    

        <link rel="stylesheet" href="http://www.igepa.be/includes/fancybox/source/jquery.fancybox.css" type="text/css" media="screen" />
        <link rel="stylesheet" href="http://www.igepa.be/includes/fancybox/source/helpers/jquery.fancybox-buttons.css" type="text/css" media="screen" /> 
        <link rel="stylesheet" href="http://www.igepa.be/includes/fancybox/source/helpers/jquery.fancybox-thumbs.css" type="text/css" media="screen" />    

        <script src="http://www.igepa.be/includes/jqgridOpenSource/js/jquery-1.7.2.min.js" type="text/javascript"></script>
        <script src="http://www.igepa.be/includes/jqgridOpenSource/js/i18n/grid.locale-nl.js" type="text/javascript"></script>
        <script src="http://www.igepa.be/includes/jqgridOpenSource/js/jquery.jqGrid.min.js" type="text/javascript"></script>                

        <script type="text/javascript" src="http://www.igepa.be/includes/fancybox/source/jquery.fancybox.pack.js"></script>
        <script type="text/javascript" src="http://www.igepa.be/includes/fancybox/source/helpers/jquery.fancybox-buttons.js"></script>
        <script type="text/javascript" src="http://www.igepa.be/includes/fancybox/source/helpers/jquery.fancybox-media.js"></script>   
        <script type="text/javascript" src="http://www.igepa.be/includes/fancybox/source/helpers/jquery.fancybox-thumbs.js"></script>           

    <script>
    $(function() {
        $( "#tabs" ).tabs({
            beforeLoad: function( event, ui ) {
                $('.ui-tabs-hide').empty();  
                ui.jqXHR.error(function() {
                    ui.panel.html(
                        "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                        "If this wouldn't be a demo." );
                });
            },
        });
    });
    </script>
</head>
<body>

<div id="tabs">
    <ul>
        <li><a href="test.htm">Test</a></li>
        <li><a href="test.htm">Test</a></li>
    </ul>
</div>

</body>
</html> 
```

测试.htm：

```
<html>

    <head>
        <title>Test</title>

        <script>
            $(document).ready(function(){   
                $(".fancybox").fancybox();              
            });             
        </script>
    </head>

<body>
    <a class="fancybox" rel="group" href="http://www.igepa.be/img/items/01-0000-0002Big.jpg"><img src="http://www.igepa.be/img/items/01-0000-0002.jpg" /></a>
</body> 
```

# java - if 语句中的代码突然离开

> ID：13380676
> 
> 赞同：0
> 
> 时间：2012-11-14T14:26:36.790
> 
> 标签：java, sql, servlets, if-statement

我有一个 if 语句，我已经用断点检查了我的程序正在输入 if 语句，并且确实如此。我可以一直执行我的语句，直到我到达准备语句行，然后我的 if 语句似乎无缘无故地中断，并且没有在我的准备语句下执行任何代码。我已经搜索了我的问题，但找不到任何解决方案。

```
 if(entry != null && subNum.equals(1) && rs.getRow() == 1)
 {
         String blogID = rs.getString(1);
         String timeStamp = rs.getString(2);
         java.util.Date date= new java.util.Date();
         String tStamp = new Timestamp(date.getTime()).toString();
         query = "INSERT INTO blog_entries VALUES (?, ?, ?, ?, ?)";
         ps = con.prepareStatement(query);
         ps.setString(1, entry);
         out.print(entry);
         ps.setString(2, timeStamp);
         out.print(timeStamp);
         ps.setString(3, tStamp);
         out.print(tStamp);
         ps.setString(4, entry);
         out.print(entry);
         ps.setString(5, blogID);
         out.print(blogID);
         ps.executeUpdate();
         out.println("Submit Successful");
 } 
```

out.prints 仅用于调试目的，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:30:19.017

我猜`con`如果它在第一次使用时中断，则不会启动，你能确认它在它使用的行上不为空吗？如果是，则捕获并发布异常，例如：

```
 if(entry != null && subNum.equals(1) && rs.getRow() == 1)
 {
         String blogID = rs.getString(1);
         String timeStamp = rs.getString(2);
         java.util.Date date= new java.util.Date();
         String tStamp = new Timestamp(date.getTime()).toString();
         query = "INSERT INTO blog_entries VALUES (?, ?, ?, ?, ?)";
         try{
                if (con != null)
                {
                     ps = con.prepareStatement(query);
                     ps.setString(1, entry);
                     out.print(entry);
                     ps.setString(2, timeStamp);
                     out.print(timeStamp);
                     ps.setString(3, tStamp);
                     out.print(tStamp);
                     ps.setString(4, entry);
                     out.print(entry);
                     ps.setString(5, blogID);
                     out.print(blogID);
                     ps.executeUpdate();
                } else { 
                     // print error and break }                    
            }
      catch (Exception e){
         //print error message
     }
         out.println("Submit Successful");
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:28:14.363

如果您“随机”突破一个块，则可能意味着您正在抛出异常。如果在您尝试创建 PreparedStatement 时失败，则可能是 SQL 无效或您无法建立连接。

然而，Aws @Marko 指出，您的 SQL 语句看起来确实有效。所以我会检查`con`对象。但是，您应该能够检查异常的堆栈跟踪以获取更多有用的信息，而不仅仅是猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:30:56.100

prepareStatement 抛出一个 SQLException，所以用 try/catch 包围它，看看这是否是你的问题。

[http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#prepareStatement(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#prepareStatement(java.lang.String) )

# cocoa - 如何确定目录中的更改及其应用程序运行之间的子目录？

> ID：13380680
> 
> 赞同：0
> 
> 时间：2012-11-14T14:26:46.547
> 
> 标签：cocoa, hash

如何确定在我的应用程序未运行时在给定目录中发生的更改？该目录仅包含目录和符号链接，但每当用户在目录中复制新文件或创建新子目录时，应用程序必须处理它。特别是如果在我的应用程序未运行时发生此更改。第一种天真的方法是将整个目录和文件列表存储在某个地方，并且在我的应用程序的下一次启动时，我再次抓取整个目录并将其与我保存的状态进行比较，但这需要很多时间。有没有办法为每个子目录创建一个哈希并只比较哈希？这会是更快的方法吗？你有这个任务的最佳实践吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:52:24.040

查看[FSEvents](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/FSEvents_Ref/Reference/reference.html)文档。第 3 点描述您的问题和可能的解决方案：

> FSEventStreamStart() -> 使用客户端在创建流时提供的回调开始接收事件并从客户端的 runloop(s) 为它们提供服务。如果为 sinceWhen 参数提供了值，则“历史”事件将首先通过您的回调发送，然后是 HistoryDone 事件，然后“当代”事件将持续发送（就像您为 sinceWhen 提供了 kFSEventStreamEventIdSinceNow 一样）。

如果您在创建时指定所需的目录，您将只会获得在该路径下或在该路径上发生的历史事件：

```
FSEventStreamRef FSEventStreamCreate(
   CFAllocatorRef allocator,
   FSEventStreamCallback callback,
   FSEventStreamContext *context,
   CFArrayRef pathsToWatch,
   FSEventStreamEventId sinceWhen,
   CFTimeInterval latency,
   FSEventStreamCreateFlags flags); 
```

您需要指定一个`FSEventStreamCallback`. 此回调在该路径上发送路径数组和事件标志。然后，您应该能够筛选事件。看看`FSEventStreamEventFlags`选择你需要的那些。

另请查看[文件系统事件编程指南](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/UsingtheFSEventsFramework/UsingtheFSEventsFramework.html#//apple_ref/doc/uid/TP40005289-CH4-SW4)。有一个部分处理您的确切问题。那里的建议是将事件系统与层次缓存结合起来。

# mercurial - 为什么我在 hg 拉取和/或更新后仍然看到文件差异？

> ID：13380687
> 
> 赞同：0
> 
> 时间：2012-11-14T14:27:24.943
> 
> 标签：mercurial

我已经使用 Mercurial 几个星期没有问题，但今天早上我遇到了一个问题。我尝试同时运行“hg pull”和“hg update”来从存储库中获取所有文件更改，如下所示。但是，当我之后运行“hg diff”时，我仍然看到文件更改。

```
> hg pull
searching for changes
adding changesets
adding manifests
adding file changes
added 7 changesets with 8 changes to 6 files

> hg update
6 files updated, 0 files merged, 0 files removed, 0 files unresolved

> hg diff
(a file change is listed) 
```

我如何达到“hg diff”将产生零变化的程度？

PS - hg status 产生一个变化：

```
M aPath\bPath\cPath\MyForm.Designer.cs 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:49:02.317

您看到的结果只是意味着您的`MyForm.Designer.cs`文件有您没有提交的更改（即本地修改）。您可以查看如何使用`hg diff`.

您有两种选择来处理本地修改：

1.  提交并推送本地修改
2.  丢弃本地更改 ( `hg update --clean`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:41:07.587

`hg pull`仅更新回购

```
This finds all changes from the repository at the specified path or URL
and adds them to a local repository (the current one unless -R is
specified). By default, this does not update the copy of the project in
the working directory. 
```

你必须`hg up`为了更新工作副本。而且我看不到 diff 和 pull 的结果之间有任何相关性 - 您可以以更简单、快速和正确的方式撤消本地更改

# c++ - ReadFile winapi 无法从虚拟盒子共享文件夹中读取。GetLastError 抛出错误 183

> ID：13380688
> 
> 赞同：2
> 
> 时间：2012-11-14T14:27:26.233
> 
> 标签：c++, winapi, readfile

我正在调用 ReadFile winapi 函数从 virtualbox shated 文件夹中读取一些数据。读取文件失败。GetLastError 抛出 183 错误代码“当该文件已存在时无法创建文件”。有时它发生在 vmware 共享文件夹上。

我的代码示例

```
bool ret = ReadFile(hFile, buf, size, &bytesRead, nullptr);
if (ret == FALSE)
{
    logger << L"err: " + ToString(GetLastError());
}

//out:
//err: 183 
```

谁能帮我解决奇怪的错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T20:59:26.463

首先，您的代码片段有点……不可靠。ReadFile 返回一个 BOOL（一种 Microsoft 定义的类型，存在于 C 有“bool”之前的日子）。然后将其分配给 C 风格的布尔值，然后将该布尔值与 MS 常量“FALSE”进行比较。正如所写的那样，它并没有错，但是不必要地在各种形式的布尔值之间切换是一个坏主意，因为它往往会使更难看到测试的实际意义。

其次，我怀疑这段代码并不完全是失败的代码！

我这样说是因为我可以通过简单地反转 ReadFile 上的测试意义来产生所描述的行为。也就是说，如果您在 ReadFile 返回 true 时检查 GetLastError，它将（在我的机器上，今天，在读取串行端口时）给出错误 183！因此，我怀疑在实际代码中，OP 实际上以某种方式掩盖了布尔测试（就像我在当天早些时候所做的那样），从而导致了明显的虚假 ReadFile 错误。

我对此的解决方案是尽可能简单地重写测试，使用尽可能少的布尔值形式，以便最大程度地避免测试失败。

如果您将代码更改为此（假设您实际上不需要其他地方的 ReadFile 返回值）：

```
if (!ReadFile(hFile, buf, size, &bytesRead, nullptr))
{
    DWORD err = GetLastError();
    logger << L"err: " + ToString(err);
} 
```

该代码可以很容易地看出所讨论的测试的意义，并减少了编写错误测试的可能性。

如果您确实需要保留“ret”，请执行以下操作：

```
BOOL ret = ReadFile(hFile, buf, size, &bytesRead, nullptr);
if (!ret)
{
    DWORD err = GetLastError();
    logger << L"err: " + ToString(err);
} 
```

在这两种情况下，您都会注意到我从日志行中提取了 GetLastError 调用。这是为了确保在调用 ReadFile 和调用 GetLastError 之间不会发生任何事情。

编辑：修改以澄清我的意见。原始版本没有说明我认为 OP 发布的代码与失败的代码不同。

# php - 对 FULLTEXT 性能进行基准测试 - 如何

> ID：13380695
> 
> 赞同：3
> 
> 时间：2012-11-14T14:27:48.203
> 
> 标签：php, mysql, apache, sphinx, full-text-search

**背景**

我需要`FULLTEXT`在服务器数据库上实现搜索`MySQL`（在 10k-200k 记录的大小范围内）。

到目前为止，数据库搜索是基于朴素的实现（`LIKE`查询），这显然是低效的，更不用说不可配置等了。

考虑了两种选择：

1.  启用`MySQL`的原生 FULLTEXT （需要添加一个或多个`MyISAM`表 - 整个数据库`InnoDB`现在）；

2.  安装[`Sphinx`](http://sphinxsearch.com/).

（我们使用 PHP 5.2 并且升级不是一个选项，所以 InnoDB FULLTEXT 在这里是不可能的。）

**问题**

有性能方面的考虑。可以理解的是，实现`FULLTEXT`任何一种方式都会占用更多的磁盘空间，并给 CPU 带来更多的负担。

目标是找出多少。两种解决方案都将相互进行基准测试（当然还有现状）。我需要设置并执行这些测试。

我会采取的方法是：

1.  用真实数据填充数据库（比如 100k 行）；

2.  衡量建立索引所需的时间；

3.  通过插入/更新数千行来模拟重新索引的需要 - 再次分析所需的时间以及 CPU 和 RAM 使用情况；

4.  在布尔和自然语言模式下使用一组短短语和长短语测试查询速度。

到目前为止相当简单，但任何建议都将不胜感激，因为我更多的是桌面/客户端应用程序开发人员，而且我已经走出了自己的舒适区。

**问题**

1.  我错过了什么？这个测试场景是否可能产生有意义的结果？

2.  如果不是 cron 脚本，那么监控服务器 CPU 和 RAM 使用情况的正确方法是什么？

我知道这是一个悬而未决的问题，但我希望它不会被关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T07:41:52.427

这种情况看起来不错，我只是建议在 sphinx 中实现 delta 索引（仅索引自上次索引以来的更改）。

在监视时，您可以设置 cacti 或 munin 工具，但如果您仅将它们用于此测试，则 dstat 可能就足够了。

# asp.net - 从 DetailsView 按钮单击中捕获编辑和更新事件

> ID：13380697
> 
> 赞同：0
> 
> 时间：2012-11-14T14:28:06.723
> 
> 标签：asp.net, vb.net, event-handling, onclick, code-behind

在允许插入、编辑和删除的 ASP.Net / VB.Net DetailsView 上，我们希望捕获当用户单击 DetailsView 的 Edit 按钮和 Update 按钮时发生的事件。

我们希望通过 VB.Net 代码隐藏文件中的事件处理程序来捕获这些事件。

你能用示例代码告诉我怎么做吗？

*** 更新 ***

我尝试了这种编码，但在单击“编辑”按钮时出现以下错误：

```
Unable to cast object of type 'System.Web.UI.WebControls.DetailsView' 
to type 'System.Web.UI.WebControls.DetailsViewRow'. 
```

这是显示“编辑”按钮的标记中的编码：

```
<asp:DetailsView 
    ID="DetailsViewDetails" 
    runat="server" 
    AutoGenerateRows="False" 
    Height="50px" 
    Width="268px" 
    DataSourceID="SqlDataSourceDetails"
    DataKeyNames="ID"
    OnItemCommand="DetailsViewDetails_ItemCommand">

    <Fields>
        <asp:TemplateField ShowHeader="False">

            <EditItemTemplate>
                <asp:Button ID="ButtonUpdate" runat="server" CausesValidation="True" 
                    CommandName="Update" Text="Update"  />
                &nbsp;<asp:Button ID="ButtonCancelUpdate" runat="server" CausesValidation="False" 
                    CommandName="Cancel" Text="Cancel" />
            </EditItemTemplate>

            <InsertItemTemplate>
                <asp:Button ID="ButtonInsert" runat="server" CausesValidation="True" 
                    CommandName="Insert" Text="Insert" />
                &nbsp;<asp:Button ID="ButtonCancelInsert" runat="server" CausesValidation="False" 
                    CommandName="Cancel" Text="Cancel" />
            </InsertItemTemplate>

            <ItemTemplate>
                <asp:Button ID="ButtonEdit" runat="server" CausesValidation="False" 
                    CommandName="Edit" Text="Edit" />
                &nbsp;<asp:Button ID="ButtonNew" runat="server" CausesValidation="False" 
                    CommandName="New" Text="New" />
                &nbsp;<asp:Button ID="ButtonDelete" runat="server" CausesValidation="False" 
                    CommandName="Delete" Text="Delete" />

                    <AjaxToolKit:ConfirmButtonExtender ID="deleteButtonConfirmation" 
                        runat="server" 
                        ConfirmText='<%# "You are about to remove: " & vbcr & 
                            Eval("Forename") & vbcr & Eval("Surname") & "!!!" &
                            vbcrlf & "Are you sure you want to do this?" & vbcrlf &
                            "Clicking the OK button will delete this parent." %>'
                        Enabled="True" 
                        TargetControlID="ButtonDelete">

                    </AjaxToolKit:ConfirmButtonExtender>
            </ItemTemplate>
        </asp:TemplateField> 
```

这是代码隐藏文件中的处理程序：

```
Protected Sub DetailsViewDetails_ItemCommand(sender As Object, e As System.Web.UI.WebControls.DetailsViewCommandEventArgs)
    Dim row As DetailsViewRow = DirectCast(DirectCast(e.CommandSource, Control).NamingContainer, DetailsViewRow)

    Select Case e.CommandName
        Case "Add"

        Case "Edit"
            ' Do this when going into edit mode so changes to the panent's tuition total balance can be updated.
            '---------------------------------------------------------------------------------------------------
            dcmOriginalRegistrationFee = GetValueFromTextBoxRegistrationFee()

        Case "Delete"

    End Select
End Sub 
```

我们在 Dim 语句中得到错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:34:43.843

您定义一个函数来处理事件。

此处列出了这些事件：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview_events.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview_events.aspx)

然后，您将编写一个处理程序来捕获更新事件（在更新发生之前）：

```
Protected Sub detailsView1_ItemUpdating(sender As Object, e As DetailsViewUpdateEventArgs) Handles detailsView1.ItemUpdating
    'Code here
End Sub 
```

对于编辑，您捕获 ModeChanging 事件：

```
Protected Sub detailsView1_ModeChanging(sender As Object, e As DetailsViewUpdateEventArgs) Handles detailsView1.ModeChanging
    'You then check the new edit mode
    If e.NewMode = DetailsViewMode.Edit Then
        'Code here
    End If
End Sub 
```

您还可以在 DetailsView 控件的标记中添加处理程序：

```
<asp:DetailsView runat="server" ID="detailsView1" OnItemUpdating="detailsView1_ItemUpdating" OnModeChanging="detailsView1_ModeChanging">
....
</asp:DetailsView> 
```

这意味着您不再需要将`Handles detailsView1.ItemUpdating`或`Handles detailsView1.ModeChanging`放在函数的末尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T14:36:14.540

您可以将它的`ItemCommand`事件与适当的`CommandName`：

```
<asp:DetailsView ID="DetailsView1" runat="server"  
    OnItemCommand="DetailsView1_ItemCommand" 
    <Fields>
       <asp:BoundField  DataField="IdField" HeaderText="ID" />
       <asp:BoundField  DataField="NameField" HeaderText="Name" />
       <asp:ButtonField CommandName="Add" Text="Add Something" />
       <asp:ButtonField CommandName="Edit" Text="EditSomething" />
       <asp:ButtonField CommandName="Delete" Text="Delete Something" />
    </Fields>
</asp:DetailsView> 
```

在代码隐藏中：

```
Protected Sub DetailsView1_ItemCommand(sender As Object, e As System.Web.UI.WebControls.DetailsViewCommandEventArgs)
    Select Case e.CommandName
        Case "Add"

        Case "Edit"

        Case "Delete"

    End Select
End Sub 
```

# java - hadoop 如何获取工作池信息

> ID：13380700
> 
> 赞同：0
> 
> 时间：2012-11-14T14:28:12.887
> 
> 标签：java, hadoop

是否可以使用任何 hadoop API 从正在运行的作业中获取池信息？如果没有，可以从任何 jobtracker 位置使用 http get 吗？或任何其他方式？

或者这个类可以实例化或扩展[http://javasourcecode.org/html/open-source/hadoop/hadoop-0.20.2/org/apache/hadoop/mapred/Pool.java.html](http://javasourcecode.org/html/open-source/hadoop/hadoop-0.20.2/org/apache/hadoop/mapred/Pool.java.html)吗？

我正在使用 hadoop 版本 2.0.0-mr1-cdh4.0.1

# scala - Scala Swing 组件对齐

> ID：13380701
> 
> 赞同：2
> 
> 时间：2012-11-14T14:28:17.097
> 
> 标签：scala, scala-swing

我正在学习如何使用 Scala 上的标准 Swing 小部件构建 GUI。这是我想要做的：

![在此处输入图像描述](../Images/33e762e4e53d95e0723716b5e6cdc5dd.png)

我在**创建**组件方面取得了成功，但在**对齐**方面失败了。我所有的组件都居中对齐，不像我想要的那样（左边的按钮 1，中间的表格，右边的按钮 2）。我也找不到关于 Scala 的 Swing 的太多信息。大多数搜索结果都是关于 Java 的（我对此一无所知）。我应该怎么做才能强制对齐？

这是代码：

```
ontents += new BoxPanel(Orientation.Vertical) {
    contents += new Button("Button 1")
    contents += new Table(3, 3)
    contents += new Button("Button 2")
} 
```

结果：

![在此处输入图像描述](../Images/1d8b60765be1aca3de1c2fbda82bfa27.png)

之前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:47:51.053

我通常使用我自己的布局助手（VBox 和 HBox），它们使大部分工作变得非常简单。但是以下代码仅使用标准库就可以实现您想要的（我还冒昧地在组件之间添加了一些边框和间距）：

```
import swing._
import Swing._
import java.awt.Color

new MainFrame {
  val button1 = new Button("Button 1")
  val button2 = new Button("Button 2")
  val table = new Table(4,3) {
    border = LineBorder(Color.BLACK)
  }
  contents = new BoxPanel(Orientation.Vertical) {
    border = EmptyBorder(10)
    contents += new BorderPanel {
      add(button1, BorderPanel.Position.West)
    }
    contents += VStrut(10)
    contents += table
    contents += VStrut(10)
    contents += new BorderPanel {
      add(button2, BorderPanel.Position.East)
    }
  }
  visible = true
} 
```

（您可以将以上内容粘贴到文件中并运行`scala file.scala`，它会工作）

# android - 如何在android中动态设置按钮监听器？

> ID：13380707
> 
> 赞同：1
> 
> 时间：2012-11-14T14:28:44.990
> 
> 标签：android, button, reflection, listener

我正在开发一个用作其他应用程序模板的应用程序，我需要创建一个带有类别的菜单（类别因应用程序而异）。我想要的是动态创建菜单。在一个`JSON`文件中，我定义了必要的类别并在屏幕上动态创建项目。我打算做的是设置每个类别（`Button`）a `Listener`，以便当您单击每个类别时执行不同的操作。为此，我正在使用`Reflection`. 这是我打算做的代码示例。

```
package com.example;

public class MainActivity extends Activity {

Button myButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myButton = (Button) findViewById(R.id.button);
    myButton.setOnClickListener(CustomListener.create("MakeCallListener"));

}

static class CustomListener {

    public static OnClickListener create(String listenerName) {

        OnClickListener actionListener = null;

        try {

            Class<?> classListener = Class
                    .forName("com.example.MainActivity$" + listenerName);

            actionListener = (OnClickListener) classListener.newInstance();

        } catch (ClassNotFoundException e) {
            Log.i("debug", e.getMessage());
        } catch (IllegalAccessException e) {
            Log.i("debug", e.getMessage());
        } catch (InstantiationException e) {
            Log.i("debug", e.getMessage());
        } catch (IllegalArgumentException e) {
            Log.i("debug", e.getMessage());
        }

        return actionListener;
    }
}

class MakeCallListener implements OnClickListener {

    public MakeCallListener() {}

    @Override
    public void onClick(View v) {
        /*
         * TODO: write the procedure to dial a phone number
         */
    }
}; 
```

}

问题是我得到一个`InstatiationException`. 错误信息是：

01-01 03:00:25.683: I/Bluumi(14206): 无法实例化类 com.example.MainActivity$MakeCallListener; 没有空的构造函数

我几乎没有使用反射的经验，我尝试过的解决方案不起作用。

这是堆栈跟踪

```
java.lang.InstantiationException: can't instantiate class com.example.MainActivity$MakeCallListener; no empty constructor
java.lang.Class.newInstanceImpl(Native Method)
java.lang.Class.newInstance(Class.java:1319)
com.example.MainActivity$CustomListener.create(MainActivity.java:36)
com.example.MainActivity.onCreate(MainActivity.java:21)
android.app.Activity.performCreate(Activity.java:4465)
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
android.app.ActivityThread.access$600(ActivityThread.java:127)
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
android.os.Handler.dispatchMessage(Handler.java:99)
android.os.Looper.loop(Looper.java:137)
android.app.ActivityThread.main(ActivityThread.java:4507)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:511)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:37:05.217

您正在尝试从静态类中实例化一个非静态类。

这是不可能的，因为您的 MakeCallListener 类不存在于静态上下文中（它与MainActivity的*实例相关联）。*尝试使其成为静态，或者让您的 CustomListener 类不是静态的。

# asp.net-mvc-3 - .NET MVC 3：如何在 RedirectToAction GET 操作中隐藏参数

> ID：13380708
> 
> 赞同：0
> 
> 时间：2012-11-14T14:28:51.070
> 
> 标签：asp.net-mvc-3

我正在尝试参数化 .NET MVC3 中的 get 方法。假设我有一个 get 方法（简化）：

```
[HttpGet]
public ActionResult Message(string message)
{
    ...
    return View(message);
} 
```

还有一个 post 方法：

```
[HttpPost]
public ActionResult DoSomething() 
{
    ...
    return RedirectToAction("Message", new { message = ok ? "Done it" : "Nope" });
} 
```

这样做的原因是我可能有很多不同的消息从各种不同的 Post 方法动态生成，我想在一个公共视图中显示它们。消息视图也很复杂，所以我想避免重复代码。参数化消息操作确实是完美的解决方案。

这很好用，除了一件事：消息字符串总是出现在 URL 中，这对用户来说看起来不是很好。最大 URL 长度等也存在潜在问题。

例如。[http://www.domain.com/Controller/Message?message=Nope](http://www.domain.com/Controller/Message?message=Nope)

我真正想要的是从 Get 方法返回带有正确消息的消息页面，然后还读取 URL：http: [//www.domain.com/Controller/Message](http://www.domain.com/Controller/Message)

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:31:19.773

您可以将消息存储在 中`Session`，然后在消息操作中将其从会话中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:32:44.127

正如 SLaks 所说，消息可以存储在服务器端，但`Controller.TempData`比`Session`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:39:05.767

为什么要重定向到操作？为什么不直接渲染该视图。如果您需要运行特定代码，您甚至可以拥有一个实现它并从它继承的基本控制器，这样您就不会重复自己。注意：您可以将`Message`视图保存在 Shared views 文件夹中，以便任何控制器都可以找到它。

```
public abstract class BaseController : Controller
{
     public ActionResult MessageView(string message)
     {
         ... some common logging functions or such...

         return View("Message",message);
     }
} 
```

称为

```
public class FooController : BaseController
{
    [HttpPost]
    public ActionResult DoSomething() 
    {
        ...
        return MessageView( ok ? "Done it" : "Nope" );
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T14:36:52.810

除了 Controller.TempData 之外，另一个可行的解决方案是使用 cookie。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T14:37:03.067

我认为最好的方法是饼干。这种方法将帮助您保存应用程序的 RESTful。我的意思是没有服务器保存数据

# linux - Hadoop HDFS：系统分区上的 DateNode 目录？

> ID：13380709
> 
> 赞同：1
> 
> 时间：2012-11-14T14:28:56.120
> 
> 标签：linux, hadoop, filesystems, hdfs, quota

我们以这种方式设置的 Hadoop 集群上的空间不足：

*   1x 1TB 硬盘 / <- Ubuntu 系统分区
*   3x 1.5TB 硬盘 /data1 /data2 /data3 <- HDFS 数据卷

系统分区几乎没有使用（97% 空闲），不会用于与 hadoop 无关的任务。

将系统分区作为 HDFS 数据目录添加到 DataNode 配置是否安全？

恐怕 Hadoop 会填满分区，使系统无法使用。

最好的方法可能是设置单独的 lvm 卷或重新分区磁盘。但我会避免走这条路。

hadoop 是否尊重 unix 配额？例如，如果我从系统分区添加一个目录并通过配额限制 hadoop 用户仅使用例如 0.5TB 会有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:52:55.283

是的，Hadoop 使用通用文件写入 API 来写入块数据，并且会遵守 Unix 级别的配额。此外，还有一个配置属性`dfs.datanode.du.reserved`，可让您为每个卷设置保留空间（应用于所有卷），DataNode 不会考虑写入该空间。

但是，允许写入操作系统挂载通常是不好的做法。如果您设想最终寻找更多存储空间（假设您已经达到了限制），最好购买更多磁盘并将它们安装在 DataNode 上。

# c++ - 如何在 Qt 中派生新的基本文件名？

> ID：13380712
> 
> 赞同：5
> 
> 时间：2012-11-14T14:29:15.883
> 
> 标签：c++, qt, filepath

在 Qt 中重命名给定文件路径的基本文件名，同时保留目录和扩展名的最佳/最标准方法是什么？

有没有标准的方法可以做到这一点，还是我只使用正则表达式？

假设我有：

```
/home/user/myfile.png 
```

它将更改为：

```
/home/user/myfile-modified.png 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T14:57:58.670

使用[QFileInfo](http://qt-project.org/doc/qt-4.8/qfileinfo.html)解析出路径的各个方面。

```
QFileInfo original("/home/user/myfile.png");
QString newPath = original.canonicalPath() + QDir::separator() + original.baseName() + "-modified";
if (!original.completeSuffix().isEmpty())
    newPath += "." + original.completeSuffix(); 
```

警告：如果您的文件名以“.”结尾，但没有扩展名，则会删除“.”。换句话说，`/home/user/myfile.`将重命名为`/home/user/myfile-modified`. 否则，这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:52:46.993

未经测试，但这可能有效：

```
const char* filePath = "/home/user/myfile.png";
QFileInfo file(filePath);
QDir dir = file.dir();
QString baseName = file.baseName();
QString baseNameModified = ...; // insert here your logic for modifying filename
QFileInfo fileModified(dir, baseNameModified);
QString filePathModified = fileModified.filePath(); 
```

# python - 可以在 ModelAdmin.save_model() 中使用 QuerySet.update() 而不是 object.save()

> ID：13380720
> 
> 赞同：0
> 
> 时间：2012-11-14T14:29:48.937
> 
> 标签：python, django, django-models, django-admin

我有非常标准的 save_model() 覆盖，它计算一些值并在最后调用 object.save()

我正在重写应用程序以获得更好的可扩展性，并读到 .save() 不是线程安全的，并且不允许数据分区。推荐的最佳实践是使用 update()。

我的问题是：如果我在 save_model() 中执行 update() 而不是 save() 可以吗？我看不出它有什么缺点，你呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:45:11.317

I think the warning in the docs about [updating multiple objects at once](https://docs.djangoproject.com/en/dev/topics/db/queries/#updating-multiple-objects-at-once) is relevant. If you're not using any signals, overriding the model's save method, or using the `auto_now` field option, I can't think of any other potential problems.

> Be aware that the `update()` method is converted directly to an SQL statement. It is a bulk operation for direct updates. It doesn't run any `save()` methods on your models, or emit the `pre_save` or `post_save` signals (which are a consequence of calling `save()`), or honor the `auto_now` field option. If you want to save every item in a `QuerySet` and make sure that the `save()` method is called on each instance, you don't need any special function to handle that. Just loop over them and call `save()`:

# numpy - Sympy 和 Numpy 求解器之间的区别

> ID：13380729
> 
> 赞同：2
> 
> 时间：2012-11-14T14:30:07.467
> 
> 标签：numpy, scipy, sympy

我遇到了一些问题，`nsolve`很难找到一些给出一些初步猜测的函数的解决方案。然后我想尝试 numpy/scipy 求解器。

这是一个使用 sympy 的程序，并且在提供此解决方案时效果很好：`[0.0, -9.05567e-72, 9.42477, 3.14159]`

```
from sympy import *

# Symbols
theta = Symbol('theta')
phi = Symbol('phi')
phi0 = Symbol('phi0')
H0 = Symbol('H0')
# Constants
phi0 = 60*pi.evalf()/180
a = 0.05
t = 100*1e-9
b = 0.05**2/(8*pi.evalf()*1e-7)
c = 0.001/(4*pi.evalf()*1e-7) 

def m(theta,phi):
    return Matrix([[sin(theta)*cos(phi),sin(theta)*cos(phi),cos(phi)]])
def h(phi0):
    return Matrix([[cos(phi0),sin(phi0),0]])
def k(theta,phi,phi0):
    return m(theta,phi).dot(h(phi0))
def F(theta,phi,phi0,H0): 
    return -(t*a*H0)*k(theta,phi,phi0)+b*t*(cos(theta)**2)+c*t*(sin(2*theta)**2)+t*sin(theta)**4*sin(2*phi)**2
def F_phi(theta,phi,phi0,H0):
    return diff(F(theta,phi,phi0,H0),phi)
def G(phi):
    return F_phi(theta,phi,phi0,H0).subs(theta,pi/2)

H0 = -0.03/(4*pi.evalf()*1e-7)
sol = []
for i in range(5):
    x0=i*pi.evalf()/4
    solution = float(nsolve(G(phi),x0))
    sol.append(solution)
sol = list(set(sol)) # remove duplicate values
print sol 
```

这是同一个程序，但使用 numpy 兼容函数：

```
from numpy import *
from scipy.optimize import fsolve
# Constants
phi0 = 60*pi/180
a = 0.05
t = 100*1e-9
b = 0.05**2/(8*pi*1e-7)
c = 0.001/(4*pi*1e-7)

def m(theta,phi):
    return array([sin(theta)*cos(phi),sin(theta)*cos(phi),cos(phi)])
def h(phi0):
    return array([cos(phi0),sin(phi0),0])
def k(theta,phi,phi0):
    return dot(m(theta,phi).T,h(phi0))
def F(theta,phi,phi0,H0): 
    return -(t*a*H0)*k(theta,phi,phi0)+b*t*(cos(theta)**2)+c*t*(sin(2*theta)**2)+t*sin(theta)**4*sin(2*phi)**2
def F_phi(theta,phi,phi0,H0):
    return diff(F(theta,phi,phi0,H0),phi)
def G(phi):
    return F_phi(pi/2,phi,phi0,H0)

H0 = -0.03/(4*pi*1e-7)
sol = []
for i in range(5):
    x0=array([i*pi/4]) # x0 as ndarray argument for fsolve
    solution = float(fsolve(G,x0))
    sol.append(solution)
sol = list(set(sol)) # remove duplicate values
print sol 
```

但是当我运行程序时：

```
Traceback (most recent call last):
File "Test4.py", line 27, in <module>
solution = float(fsolve(G,x0))
File "/usr/lib64/python2.7/site-packages/scipy/optimize/minpack.py", line 127, in fsolve
res = _root_hybr(func, x0, args, jac=fprime, **options)
File "/usr/lib64/python2.7/site-packages/scipy/optimize/minpack.py", line 224, in _root_hybr
raise errors[status][1](errors[status][0])
TypeError: Improper input parameters were entered. 
```

我尝试给 x0 赋值 0，第二个程序（使用 numpy）工作，给出一个接近 0 的数值，但是从 pi/4 开始，它给出了错误消息。我在 numpy 中错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:32:41.700

在 numpy 版本函数中`G(array([pi/4]))`返回一个空数组：

```
>> G(array([pi/4]))  
array([], dtype=float64) 
```

问题在于：

```
return diff(F(theta,phi,phi0,H0),phi) 
```

`numpy.diff`计算数组的连续元素之间的差异，而`sympy.diff`计算导数。您可以修改自己的`F_phi`函数以返回分析计算（如果您知道解决方案）或数值计算的导数。对于数值解决方案，您可以使用：

```
def F_phi(theta,phi,phi0,H0, eps=1e-12):
    return (F(theta,phi+eps,phi0,H0) - F(theta,phi,phi0,H0))/eps 
```

和解析解（用 计算`sympy`）：

```
def F_phi(theta, phi, phi0, H0):
    return -H0*a*t*(-sin(phi)*sin(phi0)*sin(theta) - sin(phi)*sin(theta)*cos(phi0)) + 4*t*sin(2*phi)*sin(theta)**4*cos(2*phi) 
```

请记住，数值解不会像解析那样精确。因此，sympy（分析）和 numpy（数值）方法之间可能仍然存在差异。

# jquery - 尚未在 DOM 中的标签的所有属性

> ID：13380737
> 
> 赞同：1
> 
> 时间：2012-11-14T14:30:39.277
> 
> 标签：jquery

例如，我有一个 JavaScript 函数，它合并了一个在 DOM 中还没有的 html 片段

```
<div class="one two"><input /><span name="abc">Text</span></div> 
```

带有 DOM 节点/标签

```
<div id="aaa" class="another"></div> 
```

结果是：

```
<div id="aaa" class="one two another"><input /><span name="abc">Text</span></div> 
```

我想改进这个功能。

到目前为止，我执行以下操作：

*   它采用第一个源标记的类属性并将其与目标合并：

    ```
    classes = $(source).first().attr("class");
    this.addClass(classes); 
    ```

*   它将源子标签附加到目标：

    ```
    this.append($(source).first().children()); 
    ```

现在我想添加到这个功能：

```
 Take all attribute (not "class") of the first source tag and add it to the
   first target tag (overwrite if it exists). 
```

问题是，我不能采用“属性”，因为截断的源代码还没有在 DOM 中。到目前为止，我的解决方案不是很漂亮：对于每个非常常见的属性，我都有一个额外的行：

```
tabindex = $(source).first().attr("tabIndex");
this.attr("tabIndex", tabindex);

wrap = $(source).first().attr("wrap");
this.attr("wrap", wrap); 
```

有谁知道如何获取这样一个 html 片段（第一个标签）的所有属性？

**更新：**

当然我可以交换源和目标：

*   使用“属性”读取目标 DOM 标记的所有属性。
*   将这些属性添加到代码片段的第一个标记中，该标记尚未在 DOM 中。
*   将 DOM 标记替换为 html 片段。

但是有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:02:45.007

通过从实际的 DOM 对象访问它们，您应该能够很容易地从片段中读取属性：

```
​var $target = $('#aaa');​​​​​​​​
$source = $('<div class="one two"><input /><span name="abc">Text</span></div>');​

// iterate over attributes of $source
// we use $source.get(0) to get the DOM fragment itself
for (var i = 0, attributes = $source.get(0).attributes, item; item = attributes[i]; ++i) {
    if (item.name == 'class') {
        // special case for class
        $target.addClass(item.nodeValue);
    } else {
        // otherwise overwrite attribute of target with source
        $target.attr(item.name, item.nodeValue);
    }
}
// finally append the children from source
​$target.append($source.children());​ 
```

# macos - MAC OS 10.7 上的 AppleScript 家长控制

> ID：13380739
> 
> 赞同：1
> 
> 时间：2012-11-14T14:30:43.530
> 
> 标签：macos, applescript, parental-control

我正在尝试编写一个简单的applescript，以通过家长控制允许我的来宾用户帐户使用应用程序（“地址簿”）。
所以我从头开始，我打开了系统偏好设置/家长控制，我解锁了授权。
以下applescript 应检查通讯簿。

```
 tell application "System Events"
            tell process "System Preferences"
                    tell window "Parental Controls"
                            click checkbox "Address Book" of row 3 of outline "Allowed Apps:" of scroll area 1 of tab group 1 
                    end tell
            end tell
    end tell 
```

我遇到的问题是这个脚本没有选中复选框，我确信选项卡组 1 的滚动区域 1 的大纲“允许的应用程序：”的路径第 3 行是正确的。任何人都知道为什么这个简单的脚本不起作用。

# c - 嵌套函数被禁用错误

> ID：13380742
> 
> 赞同：0
> 
> 时间：2012-11-14T14:30:50.670
> 
> 标签：c

我正在尝试编译我的 C 代码，但我收到了这个错误，我已经重新查看了所有代码，但我看不出有什么问题，但我不知道这个错误到底是什么，因为我从未见过以前，如果有人可以帮助我，我真的很感激。

```
C:\Users\Eahz\Desktop\scocl\workspace\xmc\/menu_functions.cpp(2034): error line: 2034 compiler: nested functions are disabled, use -fnested-functions to re-enable 
```

第 2034 行的代码是这样的：

```
 void looped_functions(void){
    //player options
    SET_CHAR_INVINCIBLE(pPlayer,godmode);
    if(pprotection){
        uint pos[4];
        GET_POSITION_OF_ANALOGUE_STICKS(0,&pos[0],&pos[1],&pos[2],&pos[3]);
        if(pos[0] == 0 && pos[1] == 0)
            FREEZE_CHAR_POSITION(pPlayer,true);
        else
            FREEZE_CHAR_POSITION(pPlayer,false);
    }

    if(rocketpistol){
        if(IS_CHAR_IN_ANY_CAR(pPlayer)){
            GET_CAR_CHAR_IS_USING(pPlayer,&tmp);
            GET_CAR_MODEL(tmp,&model);
            if(!IS_THIS_MODEL_A_HELI(model) && !IS_THIS_MODEL_A_BIKE){
                GET_CHAR_IN_CAR_PASSENGER_SEAT(tmp,1,&tmp_ped[0]);
                GET_DRIVER_OF_CAR(tmp,&tmp_ped[1]);
                if(tmp_ped[0] == pPlayer || tmp_ped[1] == pPlayer)
                    bone = BONE_LEFT_HAND;
            }
        }
        else bone = BONE_RIGHT_HAND;

        GET_PED_BONE_POSITION(pPlayer,bone,2.0,0.0,0.0,&play_tmp);
        GET_PED_BONE_POSITION(pPlayer,bone,100.0,0.0,0.0,&aim_tmp);

        if(IS_CHAR_SHOOTING(pPlayer)){
            GET_CURRENT_CHAR_WEAPON(pPlayer,&wWeapon);
            fire_projectile(wWeapon);
        }
        projectile_action();
    }

    if(superrun){
        if(!IS_CHAR_IN_ANY_CAR(pPlayer)){
            if(IS_BUTTON_PRESSED(0,BUTTON_LB) && IS_BUTTON_PRESSED(0,BUTTON_A)){
                APPLY_FORCE_TO_PED(pPlayer,true,0.0,100.0,0.0,0.0,0.0,0.0,true,true,true,true);
            }
        }
    }
    if(superjump){
        if(!IS_CHAR_IN_ANY_CAR(pPlayer)){
            if(IS_BUTTON_PRESSED(0,BUTTON_LB) && IS_BUTTON_PRESSED(0,BUTTON_X)){
                APPLY_FORCE_TO_PED(pPlayer,true,0.0,0.0,20.0,0.0,0.0,0.0,true,true,true,true);
            }
        }   
    }

    if(fastreload){
        SET_PLAYER_FAST_RELOAD(GetPlayerIndex(), true);
    }

    if(forcefield){
        float x,y,z;
        GET_CHAR_COORDINATES(pPlayer,&x,&y,&z);
        ADD_EXPLOSION(x,y,z,EXPLOSION_SHIP_DESTROY,10.0,false,true,0.0);
    }

    if(hydrolics){
        if(IS_BUTTON_PRESSED(0,BUTTON_X))
            {
                Vehicle PlayerVehicle;
                if (IS_CHAR_IN_ANY_CAR(GetPlayerPed()))
                    {
                        GET_CAR_CHAR_IS_USING(GetPlayerPed(), &PlayerVehicle);  
                        if((!IS_CHAR_IN_ANY_BOAT(GetPlayerPed())) && (!IS_CHAR_IN_ANY_HELI(GetPlayerPed())))
                            {
                                if (IS_VEHICLE_ON_ALL_WHEELS( PlayerVehicle ))
                                    {
                                        APPLY_FORCE_TO_CAR(PlayerVehicle, 0.0f, 0.0f, 0.0f, 60.0f , 0.0f,0.0f,-60.0f, 0, 1, 1, 1 );
                                        //APPLY_FORCE_TO_CAR(PlayerVehicle, 0, x,y, z, spinX,  spinY,  spinZ,  0, 1, 1, 1); 
                                    }

                            }
                    }
            }
    }

    if(invisible){
    SET_CHAR_VISIBLE(pPlayer, false);
    }
    else{
    SET_CHAR_VISIBLE(pPlayer, true);
    }

    if(chaos){
        float dX,dY,dZ;
        GET_CHAR_COORDINATES(GetPlayerPed(),&dX, &dY, &dZ);
        ClosestCar = GET_CLOSEST_CAR(dX,dY,dZ, 15, false, 70);

            if( DOES_VEHICLE_EXIST(ClosestCar))
            {
                APPLY_FORCE_TO_CAR(ClosestCar, 3, 30.0, -20.0, 0.0, 0.0, 0.0, 0.0, 0, 1, 1, 1);
                EXPLODE_CAR(ClosestCar, true, false);
            }
            GET_CHAR_COORDINATES(GetPlayerPed(),&dX, &dY, &dZ);
            GET_CLOSEST_CHAR(dX,dY,dZ, 30.0F, 1 ,1, &gameped);
            if(DOES_CHAR_EXIST(gameped))
            {
                if(IS_CHAR_IN_ANY_CAR(gameped))
                {
                    GET_CAR_CHAR_IS_USING(gameped, &PlayerVehicle); 
                    APPLY_FORCE_TO_CAR(ClosestCar, 3, 30.0, -20.0, 0.0, 0.0, 0.0, 0.0, 0, 1, 1, 1);
                    EXPLODE_CAR(ClosestCar, true, false);
                }
                else if(!IS_CHAR_IN_ANY_CAR(gameped))
                {
                    if(!IS_CHAR_ON_FIRE(gameped))
                    {
                        START_CHAR_FIRE(gameped);
                    }
                }
            }
    }

    if(ragdoll){
        if(IS_BUTTON_PRESSED(0,BUTTON_LB) && IS_BUTTON_JUST_PRESSED(0,BUTTON_B)){
            if(!IS_PED_RAGDOLL(pPlayer)){
                SWITCH_PED_TO_RAGDOLL(pPlayer,20000,30000,false,false,false,false);
                SWITCH_PED_TO_ANIMATED(pPlayer,true);
                GIVE_PLAYER_RAGDOLL_CONTROL(GET_PLAYER_ID(),true);
            }
            else{
                SWITCH_PED_TO_ANIMATED(pPlayer,false);
                GIVE_PLAYER_RAGDOLL_CONTROL(GET_PLAYER_ID(),false);
            }
        }
    }

    //vehicles
    Vehicle pveh;
    if(vhelper){
        if(IS_CHAR_IN_ANY_CAR(pPlayer)){
            GET_CAR_CHAR_IS_USING(pPlayer,&pveh);
            SET_CAR_CAN_BE_DAMAGED(pveh,false);
            SET_CAR_CAN_BE_VISIBLY_DAMAGED(pveh,false);
            SET_CAN_BURST_CAR_TYRES(pveh,false);
            SET_HELI_BLADES_FULL_SPEED(pveh);
        }
    }
    if(carsonground){
        if(IS_CHAR_IN_ANY_CAR(pPlayer)){
            GET_CAR_CHAR_IS_USING(pPlayer,&pveh);
            SET_CAR_ON_GROUND_PROPERLY(pveh);
        }
    }

    if(bikefly){
        if((IS_CHAR_ON_ANY_BIKE(pPlayer)) && IS_BUTTON_PRESSED(0,BUTTON_R)){
            float speed;
            GET_CAR_CHAR_IS_USING(pPlayer,&pveh);
            GET_CAR_SPEED(pveh,&speed);
            SET_CAR_FORWARD_SPEED(pveh,(speed * 1.05));
        }
    }

    if(nfs){
        if(IS_CHAR_IN_ANY_CAR(pPlayer) && IS_BUTTON_PRESSED(0,BUTTON_R)){
            float speed;
            GET_CAR_CHAR_IS_USING(pPlayer,&pveh);
            if((!IS_CHAR_IN_ANY_BOAT(pPlayer)) && (!IS_CHAR_IN_ANY_HELI(pPlayer))){
                SET_CAR_ON_GROUND_PROPERLY(pveh);
                GET_CAR_SPEED(pveh,&speed);
                SET_CAR_FORWARD_SPEED(pveh,(speed * 1.02));
            }
            else{
                GET_CAR_SPEED(pveh,&speed);
                SET_CAR_FORWARD_SPEED(pveh,(speed * 1.02));
                }
        }
    }

    //weapons
    if(ammo){
        if(IS_CHAR_SHOOTING(pPlayer)){
            uint weapon,ammo;
            GET_CURRENT_CHAR_WEAPON(pPlayer,&weapon);
            if(weapon != WEAPON_GRENADE && weapon != WEAPON_MOLOTOV){
                GET_MAX_AMMO_IN_CLIP(pPlayer,weapon,&ammo);
                SET_AMMO_IN_CLIP(pPlayer,weapon,ammo);
            }
        }
    }

    //misc
    if(chat_thingy){
        int i;
        float pos_y = 0.875;
        for(i = 16;i >= 0;i--){
            if(i < 0) continue;
            if(!IS_NETWORK_PLAYER_ACTIVE(i)) continue;
            if(!NETWORK_IS_PLAYER_TALKING(i)) continue;
            if(NETWORK_IS_PLAYER_MUTED_BY_ME(i)) continue;
            GET_PLAYER_RGB_COLOUR(i,&r,&g,&b);
            set_up_draw(3,0.3,0.3,r,g,b,255);
            draw_text("STRING",0.70,pos_y,GET_PLAYER_NAME(i));
            pos_y -= 0.03;          
        }
    }

    if(GET_NUMBER_OF_INSTANCES_OF_STREAMED_SCRIPT("player_menuiv") != 0 && show_menu)
        menu_shutdown();

    //garage
    if(in_paint && IS_CHAR_IN_ANY_CAR(pPlayer)){
        if(menu[item_select].value != menu[item_select].extra_val){
            uint color1,color2,spec1,spec2;
            GET_CAR_COLOURS(pveh,&color1,&color2);
            GET_EXTRA_CAR_COLOURS(pveh,&spec1,&spec2);
            if(item_select == 1)
                CHANGE_CAR_COLOUR(pveh,(menu[item_select].value - 1),color2);
            if(item_select == 2)
                CHANGE_CAR_COLOUR(pveh,color1,(menu[item_select].value - 1));
            if(item_select == 3)
                SET_EXTRA_CAR_COLOURS(pveh,(menu[item_select].value - 1),spec2);                
            if(item_select == 4)
                SET_EXTRA_CAR_COLOURS(pveh,spec1,(menu[item_select].value - 1));

            menu[item_select].extra_val = menu[item_select].value;
        }
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:36:11.790

你`void looped_functions(void){`在其他一些功能中。您可能在前面的函数中的某处缺少 } `looped_functions`，例如

```
void another_func(void) {
  if(something) {
    if(somethingelse) {
       doit();
     // < missing a } here, causing looped_function below to be defined within 
     //this function
  }
}

void looped_functions(void){

} 
```

# editor - 开源、基于网络的数学编辑器

> ID：13380747
> 
> 赞同：0
> 
> 时间：2012-11-14T14:31:05.547
> 
> 标签：editor, tex

我正在寻找一个数学方程式编辑器的开源库。我想在我的网站中嵌入这个数学编辑器。我想要一个文本框（文本区域），让用户能够插入带有数学符号按钮列表的数学方程。最好，输出不必在视觉上等同于 LaTeX，也不必是实时的，因为我想保存用户的所有输入并将其输出为 pdf 文档。如果有人可以指导我进行这样的开源程序，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T00:29:18.767

[http://www.codecogs.com/eqneditor](http://www.codecogs.com/eqneditor)对我来说效果很好，并且是可嵌入的。

# javascript - 使用“and or”语法进行空值检查

> ID：13380748
> 
> 赞同：2
> 
> 时间：2012-11-14T14:31:06.067
> 
> 标签：javascript, syntax, null

在一篇 jQuery[特殊事件文章中](http://brandonaaron.net/blog/2009/06/4/jquery-edge-new-special-event-hooks)，我发现了以前从未见过的语法：

```
var threshold = data && data.threshold || 1 
```

我之前看过以下内容：

```
var threshold = data.threshold || 1 
```

据我所知，这意味着：设置为，`data.threshold`或者如果它的值`null`设置为`1`. 我可以得到第一种语法的解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T14:34:08.520

`&&`具有比 更高的关联性`||`，因此第一个示例实际上意味着：

```
var threshold = (data && data.threshold) || 1; 
```

您可以将其理解为“仅当且具有真实值时设置`threshold`为，否则将其设置为 1”。如果是 null/undefined/etc 并且代码在没有先检查的情况下尝试访问，这将导致异常。此语法允许以紧凑的方式同时检查*两者*。`data.threshold``data``data.threshold``data``data.threshold``data`

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T14:33:44.957

在英语中它的意思是

如果数据为真且（符号）为真
**，**则设置为，**或**（否则） 设置为 1。`&&`
`data.threshold``threshold``data.threshold`
 **`threshold`**

 **truthy 表示不为空，不为未定义，也不为 0（除其他外）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:33:34.510

`&&`如果左侧评估为假，则返回左侧。否则返回右侧。

所以如果`data`为假，则返回`date`，所以`||`then 传入`1`。

如果`data`不是假的，而是假`data.threshold`的，它也评估为假，所以`||`仍然通过`1`。

如果`data.threshold`为真，则`||`通过左侧，即`data.threshold`***

# css - div的高度自动调整为内部元素

> ID：13380768
> 
> 赞同：1
> 
> 时间：2012-11-14T14:32:00.460
> 
> 标签：css, internet-explorer-8, height

我有以下html：

```
<div class="container">
    <img src="..."/>
    <p>Heading</p>
</div> 
```

我想要这种行为：

*   如果没有图像（没有 <img> 标签），p 应该指定 .container 的大小。
*   如果有图像，但 p 更高，则 .container 应该与 p 一样高。
*   如果图像更高，则 .container 应该与图像一样高，并且 p 应该从 .container 的底部“增长”并根据其中的文本数量向上“增长”（如 position:absolute;bottom:0 在一个位置内：相对框）。
*   p 应该有一个半透明的背景，以便您可以通过元素部分看到图像。透明度不是问题，但我将其包括在内，因为我不想要使 p 占据 .container 的全部高度然后重新定位文本的解决方案。
*   它必须在 IE8 中工作（仅需要浏览器）。
*   如果需要，我可以自由地操作 html 结构，但我希望它尽可能简单。

我可以用 javascript 简单地做到这一点，但可以用纯 CSS 做吗？

（这个codepen部分显示了我正在尝试做的事情：[http](http://codepen.io/anon/pen/sqjnz) ://codepen.io/anon/pen/sqjnz ）

编辑澄清：我希望 .container 与最高的孩子（img 或 p）一样高。如果 img 和 p 都存在，则文本应位于图像顶部并锚定在 .contianer 的底部，以便随着它的增长它覆盖越来越多的图像。如果没有图像（img 标签不存在），盒子应该表现得像一个普通的 div 并展开到与 p 相同的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:38:21.837

这[就是](http://jsfiddle.net/B8Q5L/2)你所追求的吗？

```
<div class="container">
    <img src="http://lorempixel.com/100/100"/>
    <p>Heading</p>
</div>​ 
```

和 CSS：

```
.container {
    /* these are just set so we can see the size of container */
    margin: 20px;
    padding: 5px;
    background-color: #eee;
}
.container img {
    margin-right: -100px;
    vertical-align: bottom;
}
.container p {
    display: inline-block;
    width: 100px;
    background-color: rgba(0,0,0,.75);
    line-height: 1em;
    color: #fff;
    vertical-align: bottom;
}​ 
```

为了将 IE 融入半透明的混合中，我建议您阅读[Lea Verou 的博客文章](http://lea.verou.me/2009/02/bulletproof-cross-browser-rgba-backgrounds/)。

# php - 减去当前 Ym 后得到月数

> ID：13380769
> 
> 赞同：1
> 
> 时间：2012-11-14T14:32:03.220
> 
> 标签：php, mysql, sql

我有以下格式的月份

```
2012-01
2012-02
2012-03
2012-04
2012-05
2012-06 
```

月份存储在 varchar 中（我只想存储月份）。我想知道如何将当前的 Ym 与数据库中的月份一起减去并返回月份？

```
Eg: (2012-11) - (2012-06) = 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:35:55.940

如果您只想要几个月，那将是一个数字……为什么要使用 varchar？int 会更适合。

但由于它是 varchar，只需使用字符串操作，而不是丑陋的数学：

```
month = RIGHT(yourvalue, 2) 
```

例如...- `2012-11`>`11`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:36:10.140

我想已经有日期计算的解决方案了。但是对于您的简单任务，这可能会让我矫枉过正。

如果您只想要月份的结果，我建议您仅将日期转换为月份。

```
$year   = substr($string,  0, 4);   // first four digits
$month  = substr($string, -2);      // last two digits
$months = $year * 12 + $month; 
```

然后您可以轻松地减去两个日期，结果将是月份的偏移量。

```
$offset = $months1 - $months2; 
```

在您的示例中，这将计算以下内容。

```
$string1 = "2012-11";
$string2 = "2012-06";
$year1   = substr($string1,  0, 4); // 2012
$year2   = substr($string2,  0, 4); // 2012
$month1  = substr($string1, -2);    // 11
$month2  = substr($string2, -2);    // 06
$months1 = $year1 * 12 + $month1;   // 24155
$months2 = $year2 * 12 + $month2;   // 24150
$offset  = $months1 - $months2;     // 5 
```

这是一个执行您的任务的简单 php 函数。

```
function months($string)
{
    if(strlen($string) < 6) return; // just to be sure
    return substr($string, 0, 4) * 12 + substr($string, -2);
}

function offset($minuend, $subtrahend)
{
    return months($minuend) - months($subtrahend);
}

echo offset("2012-11", "2012-06");  // output "5" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:41:18.300

```
<?php

function getMonthCount($date) {
    $parts = explode('-', $date);
    return ($parts[0] * 12) + $parts[1];
}

$first  = '2012-11';
$second = '2012-06';
echo getMonthCount($first) - getMonthCount($second); 
```

# android - 将字符串转换为图像android

> ID：13380772
> 
> 赞同：2
> 
> 时间：2012-11-14T14:32:20.370
> 
> 标签：android

```
ArrayList<String> arl =(ArrayList<String>) getIntent().getSerializableExtra("WordList"); 
```

我希望将存储在此数组中的字符串转换为图像并在图像视图中显示相同的内容。任何人都建议如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:35:08.720

创建自定义视图。覆盖视图的 onDraw(Canvas canvas) 方法并绘制文本。

（半伪代码）：

```
@Override
public void onDraw(Canvas canvas){
      canvas.drawText(textToDraw);
} 
```

# networking - 如何通过网络移动大量文件

> ID：13380775
> 
> 赞同：0
> 
> 时间：2012-11-14T14:32:26.843
> 
> 标签：networking, compression, zip

假设我们有下一种情况：两台计算机通过网络连接，目录（平面）充满了需要通过网络移动的小（甚至不同大小）文件。什么更快：1）直接通过网络移动目录或2）压缩（或通过任何其他算法压缩），移动压缩文件，然后解压缩？

根据我的经验，它似乎是第二个，但我怎么能看到它是正确的？

我知道这不是那么简单 - 是与否，有带宽、压缩算法、文件大小和平均压缩比等播放器，但我只是想知道可能有一些我不知道的计算机科学吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:18:03.990

你没有说你正在使用什么样的系统。最好的方法是两者都做。通过网络发送压缩档案，然后在另一端解压缩，而无需将整个压缩档案存储在任何一端。在 Unix 系统上，这通常使用 tar 完成，它调用 gzip 进行压缩。您可以直接将 tar 压缩到管道中，然后在另一端解压缩。您还可以使用 rsync，它也可以在链接上进行压缩，但更复杂，可以避免发送已经在目的地的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:12:39.103

我认为更好的方法是将多个文件压缩到单个存档。

例如，现代 3d 游戏 - 大量游戏资源文件被压缩到更大的档案中，并在游戏运行时直接解压缩到内存中。这显着减少了游戏加载。

优点：

1）无需多次重新读取目录索引，目录索引只读取一次

2) 无需制作多个 fopen

3）数据压缩-使用现代处理器（不超过10年:)）从硬盘读取比解压过程慢得多（我不知道SSD磁盘如何）。

4）使用硬盘时，读取单个（甚至是碎片）大文件比磁盘不同位置的许多小文件要快得多。当读取多个文件时，读取速度会降低，因为硬盘需要定位其磁头。

5) 例如使用 FTP 传输多个文件时，我们需要为每个文件创建 STOR 命令，而传输档案时我们只需要一个 STOR 命令。

# jquery - 如何在某个类的所有链接上强制鼠标悬停

> ID：13380776
> 
> 赞同：1
> 
> 时间：2012-11-14T14:32:28.017
> 
> 标签：jquery, mouseover

我的页面上有一定数量的链接。每个链接的 Href 属性与一个图像相关联。因此，当我将鼠标悬停在特定链接上时，会显示相应的图像。我想让这个过程自动化，以便链接一个接一个地悬停鼠标 5 秒。我试过这个但它不起作用：

```
 function circulate(){
  $('.circulating-links').each(function(){
      $(this).trigger('mouseover'); 
  });
 } 
```

我已将上述代码放入 $(document).ready() 中，但看不到任何结果。但是这里有一点细微差别。如果我将以下函数分配给这些链接的“onmouseover”属性，则会显示警报；

```
function showAlert()
{
  alert("Hello");
} 
```

总结这一切：当我用鼠标将鼠标悬停在链接上时，我可以看到图像发生了变化。但是，如果我触发 mouseover 事件，我将无法获得相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:37:22.027

嗯看起来触发器只是调用您设置的处理程序（在您的示例中显示警报）。它没有设置 :hover css 样式。

jQuery doumentation 说：

> trigger() - 执行所有附加到给定事件类型的匹配元素的处理程序和行为。

我不确定您要做什么，但是如果您只想循环浏览某个类的链接，请获取 href 并显示它指向的图像，您可以执行以下操作：

继承人的代码jsfiddle：http: [//jsfiddle.net/G6AbM](http://jsfiddle.net/G6AbM)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <style type="text/css">
            body {color: #000; text-align: center}
            .myLink { text-decoration: underline; }
        </style>

        <script type="text/javascript">
            $.onReady = new function() {
                setTimeout(imageChange, 500);
            }

            var nextImage = 0;
            function imageChange() {
                var elements = $('.myLink');
                $('#currentImage').text(elements[nextImage].href);
                if (++nextImage >= elements.length) {
                    nextImage = 0;
                }               
                setTimeout(imageChange, 500);
            }
        </script>
    </head>
    <body>
        <a href="#link1.jpg" class="myLink">Link 1</a>
        <a href="#link2.jpg" class="myLink">Link 2</a>
        <a href="#link3.jpg" class="myLink">Link 3</a>
        <br>
        <span id="currentImage">..</span>
    </body>
</html> 
```

# asp.net-mvc-3 - 控制器内的 SignalR 身份验证？

> ID：13380777
> 
> 赞同：4
> 
> 时间：2012-11-14T14:32:31.027
> 
> 标签：asp.net-mvc-3, authentication, signalr

我正在玩 SignalR，我似乎无法掌握身份验证来构建公共与安全聊天的演示应用程序。有一个聊天室，我想证明经过身份验证的用户会收到公共消息*和*经过身份验证的用户消息。身份验证是使用库存 MVC(3) Internet 应用程序完成的`AccountController`。

在控制器中获取 Hub 上下文没有意义，因为它没有连接 ID。如何获取连接 ID 以将特定连接添加到“安全聊天”组？它应该在控制器中完成吗？还是我错过了在集线器内执行此操作的方法？

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);

            var context = GlobalHost.ConnectionManager.GetHubContext<Chat>();
            // add to signalr secure group
            // but no connection id here 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T23:38:58.743

我*完全*忽略了明显且有据可查的情况。一旦用户正常通过身份验证，`Hub`派生类将能够确认身份验证，例如

```
public class Chat : Hub
{
    public void send(string message)
    {
        Clients.addMessage(message);
    }

    public void securesend(string message)
    {
        if (this.Context.User.Identity.IsAuthenticated)
        {
            // might not yet be a part of the "secured" group
            Groups.Add(this.Context.ConnectionId, "secured");
            Clients["secured"].addMessage("[SECURED] " + message);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T04:21:19.617

确保您查看最新版本的 SignalR，因为我们有很好的内置属性，您现在可以将其用于授权。

[http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)

# sql - 将数据从 SQL Server 2012 复制到 Excel 时出现换行问题

> ID：13380779
> 
> 赞同：68
> 
> 时间：2012-11-14T14:32:34.623
> 
> 标签：sql, sql-server-2008, excel, copy-paste, sql-server-2012

我最近升级到 SQL2012 并正在使用 Management Studio。我在数据库中的一列中`CHAR(13) + CHAR(10)`存储了一个。

当我使用 SQL Server 2008 时，这将完全复制并粘贴到 Excel 中。但是，现在，复制和粘贴相同的数据会在我在 Excel 中的数据中创建一个新行/回车符。

是否有我在 SQL2012 中遗漏的设置可以解决此问题？我不想简单地`REPLACE(CHAR(13) + CHAR(10))`选择每个数据库，因为我必须从使用`SELECT *`到定义每个单独的列。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-21T20:09:22.463

我最好的猜测是，这不是错误，而是 Sql 2012 的一个功能。;-) 在其他情况下，您会很乐意保留您的 cr-lf，例如在复制大量文本时。只是它在您的情况下效果不佳。

你总是可以在你的选择中去掉它们。这将使您在两个版本中都按照您的意图进行查询：

```
select REPLACE(col, CHAR(13) + CHAR(10), ', ') from table 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-10-29T17:13:36.867

这可以通过在**Tools -> Options...**菜单，**Query Results -> SQL Server -> Results to Grid下添加一个新选项****Retain CR\LF on copy or save**来解决。

 ****您需要打开新会话（窗口）以进行更改。

默认值为未选中 (false)，这意味着从网格复制/保存将复制显示的文本（CR\LF 替换为空格）。如果设置为 true，则文本将在实际存储时从网格中复制/保存 - 无需字符替换。

如果人们错过了连接项目链（导致[https://connect.microsoft.com/SQLServer/feedback/details/735714](https://connect.microsoft.com/SQLServer/feedback/details/735714)），此问题已在 SSMS 的预览版中得到修复。

您可以从[https://msdn.microsoft.com/library/mt238290.aspx](https://msdn.microsoft.com/library/mt238290.aspx)免费下载它，它是独立下载，因此不再需要完整的 SQL 媒体。

（注意 - [https://msdn.microsoft.com/library/ms190078.aspx](https://msdn.microsoft.com/library/ms190078.aspx)上的页面当前未使用此信息更新。我正在跟进此问题，因此它应该很快反映新选项）

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-06-06T08:50:03.743

我找到了解决该问题的方法；无需手动复制粘贴，而是使用 Excel 连接到您的数据库并导入完整的表格。然后删除您不感兴趣的数据。

以下是步骤（适用于 Excel 2010）

1.  前往菜单`Data > Get external data: From other sources > From SQL Server`
2.  键入 sql 服务器名称（如果您的服务器上没有 Windows 身份验证，则输入凭据）并连接。
3.  选择包含带有换行符的数据的数据库和表，然后单击“完成”。
4.  选择目标工作表并单击“确定”。

Excel 现在将导入带有完整换行符的完整表格。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-03-10T14:24:02.687

我想出在结果中包含回车/换行符以复制到 Excel 的最佳方法是在 中添加双引号`SELECT`，例如：

```
 SELECT '"' + ColumnName + '"' AS ColumnName FROM TableName; 
```

如果列数据本身可以包含双引号，则可以通过“双双引号”对其进行转义：

```
 SELECT '"' + REPLACE(ColumnName, '"', '""') + '"' AS ColumnName FROM TableName; 
```

空列数据将在 SQL Management Studio 中显示为仅 2 个双引号，但复制到 Excel 将导致空单元格。`NULL`值将被保留，但可以使用`CONCAT('"', ColumnName, '"')`or更改`COALESCE(ColumnName, '')`。

正如@JohnLBevan 所评论的，转义列数据也可以使用内置函数来完成[`QUOTENAME`](https://msdn.microsoft.com/nl-nl/library/ms176114.aspx?f=255&MSPPError=-2147217396)：

```
 SELECT QUOTENAME(ColumnName, '"') AS ColumnName FROM TableName; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-09-22T17:46:44.133

@AHiggins 的建议对我很有效：

```
REPLACE(REPLACE(REPLACE(B.Address, CHAR(10), ' '), CHAR(13), ' '), CHAR(9), ' ') 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-10-12T13:37:06.783

将数据从 SQL Server 复制到 Excel 时出现行拆分问题。请参阅下面的示例并尝试使用替换一些字符。

```
SELECT replace(replace(CountyCode, char(10), ''), char(13), '') 
FROM [MSSQLTipsDemo].[dbo].[CountryInfo] 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-06-14T18:02:28.460

当您最近使用“文本到列”时，Excel 有时会发生这种情况。

尝试退出 excel，重新打开，然后再次粘贴。这通常对我有用，但我听说您有时必须完全重新启动计算机。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-07-28T11:09:07.857

看到这里还没有提到这一点，这就是我解决这个问题的方法......

右键单击目标数据库并选择`Tasks > Export data`并遵循它。“选择目的地”屏幕上的目的地之一是 Microsoft Excel，有一个步骤可以接受您的查询。

它是 SQL Server 导入和导出向导。它比我通常使用的带有标题的简单复制选项要冗长得多，但是，当您有大量数据要进入 excel 时，它是一个值得选择的选项。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-09-10T17:04:34.263

为了能够将结果从 SQL Server Management Studio 2012 复制并粘贴到 Excel 或导出到带有列表分隔符的 Csv，您必须首先更改查询选项。

1.  单击查询，然后单击选项。

2.  在结果下单击网格。

3.  选中旁边的框：

    > 保存 .csv 结果时引用包含列表分隔符的字符串。

这应该可以解决问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-09-12T19:39:48.790

以下“解决方法”保留了 CRLF，并支持将带有 CRLF 字符的数据粘贴到 Excel 中，而不会将列数据分成多行。它将需要用命名列替换“select *”，并且数据中的任何双引号都将替换为分隔符值。

```
declare @delimiter char(1)
set @delimiter = '|'

declare @double_quote char(1)
set @double_quote = '"'

declare @text varchar(255)
set @text = 'This
"is"
a
test'

-- This query demonstrates the problem.  Execute the query and then copy/paste into Excel.
SELECT @text

-- This query demonstrates the solution.
SELECT @double_quote + REPLACE(@text, @double_quote, @delimiter) + @double_quote 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-12-23T14:10:24.793

一种不太理想的解决方法是针对 2012 数据库使用 2008 GUI 来复制查询结果。某些功能（例如“将脚本表创建为 CREATE”）不起作用，但您可以运行查询并将结果从 2012 数据库复制粘贴到 Excel 等中，没有任何问题。

微软需要解决这个问题！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-09-29T12:22:59.023

很多次我必须将数据从 SQL 复制到 excel，我创建了处理换行符和制表符的函数（在粘贴到 Excel 后在列中进行转换）。

```
CREATE FUNCTION XLS(@String NVARCHAR(MAX) )

RETURNS NVARCHAR(MAX)
AS
BEGIN
    SET @String = REPLACE (@String, CHAR(9), ' ')
    SET @String = REPLACE (@String, CHAR(10), ' ')
    SET @String = REPLACE (@String, CHAR(13), ' ')
    RETURN @String
END

CREATE FUNCTION XLS(@String NVARCHAR(MAX) )
RETURNS NVARCHAR(MAX)

AS
BEGIN
    SET @String = REPLACE (@String, CHAR(9), ' ')
    SET @String = REPLACE (@String, CHAR(10), ' ')
    SET @String = REPLACE (@String, CHAR(13), ' ')
    RETURN @String
END 
```

示例用法：

```
SELECT dbo.XLS(Description) FROM Server_Inventory 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-04-25T21:13:44.690

您可以导出到 Excel，而不是复制和粘贴到 Excel。右键单击数据库 -> 任务 -> 导出数据...

*   **来源：** SQL Server Native Client
*   **目的地：** Excel
*   **指定表副本或查询：**选择查询并输入您的查询

CR/LF 保留在数据中。

奖金（空值不会被复制为“NULL”）。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-10-17T19:35:37.100

我遇到了同样的问题。我能够使用以下解决方案将结果转换为 CSV：

1.  执行查询
2.  右键单击结果网格的左上角
3.  选择“将结果另存为..”
4.  选择 csv 和 viola！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-03-30T00:26:48.057

*   如果您的表格包含一个`nvarchar(max)`字段，请将该字段移至表格底部。
*   如果字段类型与 nvarchar(max) 不同，则识别有问题的一个或多个字段并使用相同的技术。
*   保存。
*   重新选择 SQL 中的表。
*   如果您无法在没有更改的情况下保存，您可以在**TOOLS |中暂时关闭相关警告。选项**。这种方法没有风险。
*   将带有标题的 SQL GRID 显示复制并粘贴到 Excel。
*   数据可能仍然显示回车，但至少您的数据都在同一行上。
*   然后选择所有行记录并对 ID 列进行自定义排序。
*   您的所有记录现在应该是完整且连续的。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-11-20T17:44:03.123

您可以尝试将查询结果另存为excel，将文件扩展名更改为.txt。使用 excel 打开（打开方式...），然后使用文本到列（格式化为文本）。不确定这是否适用于这种情况，但适用于 excel 自动剥离的其他格式问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-11-21T20:12:04.723

你真的可以找出哪些行/数据有回车并修复源数据.. 而不是只是在上面贴上创可贴。

UPDATE 表 Set Field = Replace(Replace(Field, CHAR(10), ' '), CHAR(13), ' ') WHERE Field like '%' + CHAR(10) + '%' or Field like '%' +字符 (13) + '%'

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-02-10T20:03:58.817

更改我的所有查询，因为 Studio 更改了版本不是一个选项。尝试了上面提到的偏好没有效果。当有 CR-LF 时，它没有加上引号。也许它只在逗号发生时触发。

复制粘贴到 Excel 是 SQL 服务器的支柱。Mircosoft 要么需要一个复选框来恢复到 2008 年的行为，要么他们需要增强剪贴板到 Excel 的传输，以使一行等于一行。

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2016-06-30T16:51:41.033

将数据导出到 Excel 后，突出显示日期列和格式以满足您的需求或使用自定义字段。像魅力一样为我工作！****

# php - 发送带有确认链接的电子邮件

> ID：13380784
> 
> 赞同：-3
> 
> 时间：2012-11-14T14:32:45.477
> 
> 标签：php, email

我正在制作某种公告板网络应用程序。用户可以将他们的列表添加到公告板，就像在 craigslist 上一样。我如何实现当用户想要向网站添加新列表时，他会收到一封电子邮件，他必须点击确认链接，然后列表才会显示在网站上？我想我应该提到我正在使用 PHP（codeIgniter 框架）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:38:28.857

我不确定您要做什么，但一种好​​方法是向用户发送一封电子邮件，其中包含指向您的 php 页面的加密查询字符串，您将在其中获取加密查询并处理所有参数以添加上市到他们的公告板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:40:18.213

您的列表需要有一个状态。添加后，状态可以为待处理。当用户单击确认电子邮件中的链接时，状态会更新为“已确认”。然后，您的列表页面可以过滤已确认列表，以便忽略待处理列表。

# python - Python：为什么 setuptools 不包含我的包数据？

> ID：13380785
> 
> 赞同：8
> 
> 时间：2012-11-14T14:32:49.490
> 
> 标签：python, setuptools, distutils

今天我创建了一个 setup.py 文件，发现一个工作脚本和两个无工作场景。在两个非工作场景`package_data`中，构建中缺少 after。我用*`python setup.py sdist`*.

# 为什么方案 2 和 3 不包含我的包裹数据？

# 方案 1 工作：

```
import os 
from distutils.core import setup

def find_packages(path):
    package_path = os.path.join(os.path.dirname(__file__), path)
    packages = []
    for f in os.walk(package_path):

    directory_name = f[0]

    if directory_name.endswith('egg-info') or directory_name.endswith('path'):
        continue

    directory_name = directory_name.replace(package_path, '').replace('/', '.').strip()

    if not len(directory_name):
        continue

    if directory_name.startswith('.'):
        directory_name = directory_name.replace('.', '', 1)

    packages.append(directory_name)

return packages

setup (
    name = 'mypkg',
    packages = find_packages('src'),
    package_dir = {'mypkg': 'src/mypkg'},
    include_package_data = True,
    package_data = {
        '': ['*.txt'],
        'mypkg': ['data/*.dat'],
    }
) 
```

# 方案 2，不起作用：

```
from setuptools import setup #, find_packages
from setuptools.command import sdist
setup (
    name = 'mypkg',
    packages = ['mypkg'],
    package_dir = {'mypkg': 'src/mypkg'},
    include_package_data = True,
    package_data = {
        '': ['*.txt'],
        'mypkg': ['data/*.dat'],
    }
) 
```

# 场景 3 也不起作用：

```
from setuptools import find_packages
from setuptools.command import sdist
setup (
    name = 'mypkg',
    packages = find_packages('src'),
    package_dir = {'mypkg': 'src/mypkg'},
    include_package_data = True,
    package_data = {
        '': ['*.txt'],
        'mypkg': ['data/*.dat'],
    }
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T20:21:19.413

就我而言，问题不在 setup.py 中，而是在缺少的 MANIFEST.in 中，它还需要声明包数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-14T15:29:54.667

您不能在 package_data 声明中直接使用 glob 语法。

但是您可以在将其传递给 setup 函数之前声明一个包含此数据的变量：

```
from glob import glob

data = glob('data/*.dat')
txt_files = glob('*.txt')

...

setup(...
package_data = {
    '': txt_files,
    'mypkg': data,
}
... 
```

# c# - 带列表的索引字典

> ID：13380788
> 
> 赞同：-1
> 
> 时间：2012-11-14T14:32:53.640
> 
> 标签：c#

我有课：

```
public class Item
{
    public List<int> val { get; set; }
    public string info { get; set; }
}
public class IndexedDictionary : KeyedCollection<List<int>, Item>
{
    protected override List<int> GetKeyForItem(Item item)
    {
        return item.val;
    }
} 
```

在'main（）'方法中：

```
 IndexedDictionary dic = new IndexedDictionary();
    dic.Add(new Item() { val = new List<int>() { 1, 2, 3 }, info = "Hello" });
    dic.Add(new Item() { val = new List<int>() { 1 }, info = "Bla.." });
    Console.WriteLine(dic[0].info);
    Console.WriteLine(dic[new List<int>() { 1 }].info);
    Console.ReadLine(); 
```

我收到错误：

```
 Console.WriteLine(dic[new List<int>() { 1 }].info); 
```

你能纠正我的代码吗？全部

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:36:52.467

您在这里犯的错误是假设 a 的两个实例`List<int>`相同，因为它们包含相同的`int`. 它们不是，它们是两个完全不同的实例。

因此，您需要做的是将 分配`new List<int>() { 1 }`给局部变量，并将该变量用作您的键。

就像是：

```
var l1 = new List<int>() { 1 };
dic.Add(new Item() { val = l1, info = "Bla.." }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:44:53.347

比较列表时，您的字典会比较实例（默认情况下）而不是序列。例如，下面的代码将给出错误

```
bool b = new List<int>() { 1 }.Equals(new List<int>() { 1 }) 
```

因此，您应该实施`IEqualityComparer`. 如下更改您`IndexedDictionary`的，它将起作用。

```
public class IndexedDictionary : KeyedCollection<List<int>, Item>
{
    public IndexedDictionary() : base(new MyEqualityComparer())
    {
    }

    protected override List<int> GetKeyForItem(Item item)
    {
        return item.val;
    }

    public class MyEqualityComparer : IEqualityComparer<List<int>>
    {
        public bool Equals(List<int> x, List<int> y)
        {
            return x.SequenceEqual(y);
        }

        public int GetHashCode(List<int> obj)
        {
            return obj.Aggregate(0, (s, x) => s ^= x.GetHashCode());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:52:26.407

它失败了，因为您正在比较两个不同的对象。使用 as 键没有多大意义，`List<int>`因为您的字典不会关心这些列表的内容。

例如：

```
 var list1 = new List<int>() { 1, 2, 3 };
 var list2 = new List<int>() { 1, 2, 3 };

 Console.WriteLine("Equals: {0}", list1 == list2);
 Console.WriteLine("SequenceEquals: {0}", list1.SequenceEqual(list2));
 Console.Read(); 
```

第一个是假的，第二个是真的。

有关更多信息，请参阅此问题：[C# 中是否有比较集合的内置方法？](https://stackoverflow.com/questions/43500/is-there-a-built-in-method-to-compare-collections-in-c)

# c++ - 自动端口转发 (UPnP ?) C++

> ID：13380792
> 
> 赞同：13
> 
> 时间：2012-11-14T14:32:58.117
> 
> 标签：c++, upnp, portforwarding

**免责声明**： *我已经仔细阅读了这里的所有类似主题并进行了谷歌搜索。没有人回答我的问题，所以我想在这个主题上积累信息。PS我的英语可能不太好，对此感到抱歉。*

我想做一个 p2p 应用程序（游戏）。显然，很多人会在一台机器上运行这个程序，该机器是具有一个互联网接入点（路由器）的本地网络的一部分，如果没有端口转发，应用程序根本无法工作。所以，我做了一项研究，发现我可以使用 UPnP 进行自动端口转发。编写微测试代码来访问端口转发：

```
bool CPortController::Init() {

  HRESULT result = CoInitialize(NULL); // Must be NULL
  if (FAILED(result)) return false;

  result = CoCreateInstance(__uuidof(UPnPNAT), NULL, CLSCTX_ALL, __uuidof(IUPnPNAT), (void **)&Nat);
  if (FAILED(result) || !Nat) return false;

  result = Nat->get_StaticPortMappingCollection(&Collection); 
  if (FAILED(result) || !Collection) return false; // Here I'm getting S_OK as result, but Collection is always == 0

  return true;
} 
```

搜索原因（见代码中的注释）我发现： 1\. 旧系统（不，我有 Win7 更新） 2\. 路由器可能没有 UPnP 功能或它可能未启用 3\. 防火墙可能被阻止UPnP 都需要 TCP 端口 2869 或 UDP 端口 1900

可悲的是，我无法访问路由器来检查最后 2 个，但这并不重要，因为 Skype 和 uTorrent（都是 p2p）可以完美运行。我需要找到一种方法来使用我的应用程序自动执行相同的技巧并转发端口，而无需要求用户执行任何操作。

**关于 UPnP 库：** 我发现很少有 UPnP 库（PlatinumUPnP、miniUPnP），但它们似乎有很多代码用于寻找智能设备并将它们放在一起......嗯......我不确定我是否需要这个完成我的任务，我找不到用于自动端口转发的一段代码（不使用上面列出的那些 WinUPnPAPI）。

我现在有点迷路了。谁能告诉我继续研究的方向？也许除了UPnP之外还有别的东西吗？也许有一个库（我错过了）可以使用？请传播一些光。先感谢您。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-14T22:35:19.037

从[UPnP 开发人员工具](http://opentools.homeip.net/dev-tools-for-upnp)运行**DeviceSpy**并在您的网络中搜索. 如果没有，您的路由器不支持 UPnP 或已禁用。如果有，请检查服务。请注意，从 InternetGatewayDevice v2（自 2010 年起）开始，您不能在 UPnP 上设置静态端口映射（租用时间 0）。`InternetGatewayDevice``WANIPConnection`

正如@Rook 指出的那样，建立P2P 连接还有其他方法，因此*其他一些随机P2P 软件*有效的事实并不一定意味着该软件知道如何配置您的端口映射。特别是 Skype 并不是真正的 P2P，[它依赖于大量的专用超级节点](http://arstechnica.com/business/2012/05/skype-replaces-p2p-supernodes-with-linux-boxes-hosted-by-microsoft/)。

# jquery - Jquery单击事件未在先前隐藏的div上触发

> ID：13380795
> 
> 赞同：0
> 
> 时间：2012-11-14T14:33:01.633
> 
> 标签：jquery, html, jquery-ui

我正在将“密码重置成功消息” div 动态加载到“密码重置” div 中，如下面的片段所示。**'password-reset-success-message' div 在页面加载时隐藏**，并被覆盖到 'password-reset' div，如下所示。

```
 $("#password-reset").html($("#password-reset-success-message").html()); 
```

现在'password-reset-success-message' div 有一个'btnPasswordResetOK' 按钮，它将关闭密码重置模式对话框。但是这个 click() 事件没有被绑定。我没有收到警报消息。我正在做这一切，准备好包裹在文件中。

```
 $(document).ready(function(){  

       $("#btnPasswordResetOK").click(function() {

         alert();
       });

    }); 
```

注意：[这个问题与我的问题几乎相似。](https://stackoverflow.com/questions/13048509/jquery-event-on-initially-hidden-popup).但没有答案。

**更新：** 我在使用隐藏的 div 更新 html 后绑定，它可以工作！, 下面的代码片段

```
 $("#password-reset").html($("#password-reset-success-message").html());

       $("#btnPasswordResetOK").click(function() {

            alert();
       }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:40:34.407

将其委托给要添加 html 的父元素

如果使用带有 .on() 的 jQuery 1.7+

```
$("#password-reset").on('click','#btnPasswordResetOK',function(){

}) 
```

与代表

```
$("#password-reset").delegate('#btnPasswordResetOK','click',function(){

}) 
```

来自关于使用哪种方法的 jQuery 文档

> $(选择器).live(事件、数据、处理程序); // jQuery 1.3+
> 
> $(document).delegate(selector, events, data, handler); // jQuery 1.4.3+
> 
> $(document).on(事件、选择器、数据、处理程序); // jQuery 1.7+

By delegating, you bind the event handler to a static parent element that doesn't change and exists at the time of binding. You specify the element and the events you want to listen to, and when the event bubbles up it will get handled by the static parent element.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:38:25.707

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

触发就绪事件时，您的内容不在页面上。您动态生成元素和内容，因此您必须使用 live/on 事件处理程序。

# iphone - iPhone - 将对象从视图控制器传递到选项卡式视图控制器

> ID：13380802
> 
> 赞同：0
> 
> 时间：2012-11-14T14:33:31.483
> 
> 标签：iphone, objective-c, ios

目前，我计划在我的 iphone 应用程序上设置一个闪退/登录屏幕，然后一旦与服务器建立连接，就会显示一个选项卡式视图。我已经链接了一个按钮来模拟登录。这确实 [self performSegueWithIdentifier:@"toMainScreen" sender:self];

如果我在第一个视图控制器中创建一个指向对象（TCP/UDP + 线程的连接控制）的指针，我将如何将它传递给选项卡或选项卡控制器，以便它们能够发送/接收等？

（也许我将对象传递给选项卡式视图控制器，然后选项卡可以从那里到达它？） - 不知道该怎么做。我假设我需要为选项卡式视图控制器创建一个类。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:02:37.500

是的，您需要对标签栏控制器进行子类化，并在其中有一个属性，该属性将是指向您的第一个视图控制器的指针。所以您的标签栏控制器的 .h 文件将如下所示：

```
@interface MyTabBarController : UITabBarController

@property (nonatomic, weak) FirstViewController *firstViewController;

@end 
```

当您的第一个视图控制器被加载时，您应该将此属性设置为它。

那有意义吗？

# wordpress - Facebook Opengraph、Wordpress 和 NextGen Gallery

> ID：13380803
> 
> 赞同：0
> 
> 时间：2012-11-14T14:33:32.157
> 
> 标签：wordpress, facebook-opengraph, nextgen-gallery

我有一个 Facebook 应用程序。

在我的 Wordpress 网站上，我有[NextGen 画廊](http://wordpress.org/extend/plugins/nextgen-gallery/)，每张图片上都有一个点赞按钮，它运行良好，直到我移动服务器。

每次我点赞时，它都喜欢这张专辑，并在 Facebook 上发布一个链接，上面写着“Blah Blah 喜欢“应用程序名称”上的一张专辑。

我不再像这样工作了。

我只是想知道是否有人可以帮助我为我的应用程序打开图形设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:37:33.003

NextGen Galleries的最新版本[是 1.9.7](http://wordpress.org/extend/plugins/nextgen-gallery/)。我浏览了代码，没有看到它在哪里为图库图像生成任何类似的按钮。这个功能是在 NextGen 画廊之外添加的吗？也许是通过另一个插件？

**编辑：**我刚刚注意到有[多个支持 Facebook 集成的扩展](http://www.nextgen-gallery.com/nextgen-gallery-extension-plugins/)。您正在使用其中之一吗？如果有，是哪一个？

# ajax - 简单的 ajax 调用来获取 Typepad 博客的 atom.xml

> ID：13380805
> 
> 赞同：0
> 
> 时间：2012-11-14T14:33:33.967
> 
> 标签：ajax, json, typepad

所以我有一个 Typepad 博客，想将一些帖子加载到我自己的网站上。我查看了 Typepad API，但它似乎过于复杂。Typepad 还提供了一个小部件，但它只显示帖子标题和 href，我也需要内容。

所以这就是我正在做的事情，我在页面中包含了 jQuery：

```
$.ajax({
    url: 'http://notes2self.typepad.com/notes/atom.xml?callback=?',
    type: 'GET',
    dataType: 'jsonp',
    success: function(feed) {
        console.log(feed);
    },
    error: function(err) {
        console.log(err);
    }
}); 
```

它记录“成功”，但记录的对象看起来像一个 XMLHttpRequest 响应，我希望它简单地返回 xml 内容：

> 对象{readyState：4，状态：200，状态文本：“成功”}

此外，在 OSX 上的 Chrome 中，控制台在 atom.xml 的第 1 行记录了一个错误：

> 未捕获的 SyntaxError：意外的令牌 <

我显然做错了一些非常基本的事情。有什么提示可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:01:37.017

我在这里猜测返回类型无效。如果你去[http://notes2self.typepad.com/notes/atom.xml?callback=](http://notes2self.typepad.com/notes/atom.xml?callback=)？然后您将获得 XML 格式的结果（检查源代码）。

您的 jQuery 期望返回类型为 JSON，因此无法解析结果。这显示在带有意外“<”字符的 Chrome 错误消息中。

为了证明这一点，请尝试：

```
$.ajax({
    url: 'http://notes2self.typepad.com/notes/atom.xml?callback=?',
    type: 'GET',
    dataType: 'xml',
    success: function(feed) {
        console.log(feed);
    },
    error: function(err) {
        console.log(err);
    }
}); 
```

看看是否有任何结果返回（提要）。

这篇文章描述了如何为跨域请求完成基于 XML 的返回类型：[http ://www.isgoodstuff.com/2012/07/22/cross-domain-xml-using-jquery/](http://www.isgoodstuff.com/2012/07/22/cross-domain-xml-using-jquery/)

# javascript - 自调用函数、Resharper 6.1 和 JS Lint - 可能对两者都有效？

> ID：13380806
> 
> 赞同：2
> 
> 时间：2012-11-14T14:33:36.887
> 
> 标签：javascript, jslint, resharper-6.1

假设我有一些看起来像这样的 JavaScript：

```
MyCompany.MyProduct = {};

(function () {

    "use strict";

    MyCompany.MyProduct.doSomethingAmazing = function () {
    };
}()); 
```

我认为这是一种可以采取的方法......

它通过了[Crockford 先生的](http://www.crockford.com/)Javascript [lint](http://www.jslint.com)，所以我认为这是一件好事，但后来我注意到[Resharper](http://blogs.jetbrains.com/dotnet/2011/12/resharper-61-improvements-in-intellisense-options/)（在 Visual Studio 2010 中运行的 6.1）告诉我

> 意外的表达

在最后一行（即这一位：）`}());`。

现在，我知道那里有一个有争议的支架放置，许多人更喜欢这种形式`})();`，但这并不能安抚[Resharper](http://blogs.jetbrains.com/dotnet/2011/12/resharper-61-improvements-in-intellisense-options/)，它也让[JS Lint](http://blogs.jetbrains.com/dotnet/2011/12/resharper-61-improvements-in-intellisense-options/)很恼火，所以我放弃了。

然后我去了：

```
MyCompany.MyProduct = {};

!function () {

    "use strict";

    MyCompany.MyProduct.doSomethingAmazing = function () {
    };
}(); 
```

我认为这是等效的（无论如何，根据[这个](http://sarfraznawaz.wordpress.com/2012/01/26/javascript-self-invoking-functions/)），Resharper 似乎很高兴，但现在 JS Lint 吓坏了，告诉我：

> 将立即函数调用用括号括起来，以帮助读者理解表达式是函数的结果，而不是函数本身。

所以，在我只选择一种风格之前（可能是那种让争吵双方都烦恼的风格，因为如果他们不能一起玩......）我想知道，因为如果你知道在哪里点燃火炬的话，Javascript 有这么多整洁的语法小巷：

**有什么可以让双方都满意的语法吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T06:25:10.753

你不能同时满足两个对立面。但是有一些解决方法...

[JSLint](http://jslint.com)要求您[将调用移动到包含函数的括号中](http://www.jameswiseman.com/blog/2011/02/15/jslint-messages-move-the-invocation-into-the-parens-that-contain-the-function/)。作为 JSLint 的替代方案，您可以尝试使用类似但更灵活的规则的[JSHint](http://jshint.com/)或[ESLint 。](http://www.nczonline.net/blog/2013/07/16/introducing-eslint/)ESLint 特别允许您将选项[wrap-iife](http://eslint.org/docs/rules/wrap-iife.html)设置为“内部”或“外部”。[这是一个例子](http://jslinterrors.com/move-the-invocation-into-the-parens-that-contain-the-function/)。

或者，您可以尝试更改 Resharper 使用的规则。我不知道 Resharper 为您提供了哪些选项，因为我没有使用过它，但它可能值得一看。

# scala - scala如何生成字节码？使用ASM之类的库，还是直接写二进制？

> ID：13380807
> 
> 赞同：13
> 
> 时间：2012-11-14T14:33:35.700
> 
> 标签：scala, jvm, bytecode

我想知道 scala 是如何生成字节码的，它是否使用了像 ASM 这样的库？或者只是将二进制文件写入 .class 文件以提高性能？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-14T14:57:00.790

从 2.10 开始，Scala 编译器使用 ASM 4 发出字节码，支持 -target:jvm-1.5 、 -target:jvm-1.6 和 -target:jvm-1.7

后端的实现方面描述如下：

*   [通过 ASM http://lamp.epfl.ch/~magarcia/ScalaCompilerCornerReloaded/2012Q2/GenASM.pdf](http://lamp.epfl.ch/~magarcia/ScalaCompilerCornerReloaded/2012Q2/GenASM.pdf)发出 Scala 类文件

字节码发射器（GenASM，源代码链接如下）访问上一阶段构建的控制流图（CFG），并使用 Streaming ASM API 直接发射类文件：

[https://github.com/scala/scala/blob/master/src/compiler/scala/tools/nsc/backend/jvm/GenASM.scala](https://github.com/scala/scala/blob/master/src/compiler/scala/tools/nsc/backend/jvm/GenASM.scala)

这就是现在的工作方式。在实验可能性领域，我一直在研究一个更快的实验性字节码，部分原因是它跳过了构建 CFG 并直接访问 Scala 抽象语法树（然后使用 Tree ASM API 在内存中构建类文件）。详情在：

[https://github.com/magarciaEPFL/scala/blob/GenBCodeOpt/src/compiler/scala/tools/nsc/backend/jvm/GenBCode.scala](https://github.com/magarciaEPFL/scala/blob/GenBCodeOpt/src/compiler/scala/tools/nsc/backend/jvm/GenBCode.scala)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:55:07.930

看起来他们正在生成一些中间代码，然后手动将其转换为 java 字节码或 .net msil

此处对编译器进行了很好的概述：[https ://wiki.scala-lang.org/display/SIW/Overview+of+Compiler+Phases](https://wiki.scala-lang.org/display/SIW/Overview+of+Compiler+Phases)

# jquery - jquery 对话框提交按钮事件

> ID：13380809
> 
> 赞同：0
> 
> 时间：2012-11-14T14:33:39.893
> 
> 标签：jquery, json, wcf, jquery-ui

我有一个 jquery 对话框，我想要的是通过“提交”按钮来调用 WCF 方法。但它似乎不起作用。

代码1：

```
 $("#generatePinsDialog").dialog({
          autoOpen: false,
          modal: true,
          width: 400,
          buttons: [
              { text: 'Submit', click: GeneratePINs }
           ]}); 
```

代码2：

```
 function GeneratePINs()
    {
        var x= 0; y= 0;
        var c = $("#newInmateCount").val(); // get a value from a textbox
        var e = $("selected",this).val();  // get a value from a drop down menu
        if (e == 0) {
            y= 1;
        }
        else {
            x= 1
        }

      $.getJSON('/iServices/iService.svc/' + c + '/' + y+ '/' + x, function (response) {
    });
    $(this).dialog('close'); // Close it 
```

}

在我的 WCF 方法代码中，我设置了一个断点。然而，它根本没有达到。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:45:02.317

Change `$(this).dialog('close')` to `$("#generatePinsDialog").dialog('close')`

I don't believe the dialog context usually gets passed when using a named function

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:50:48.727

您确定您的 .svc 请求格式正确吗？尝试将 .svc url 粘贴到浏览器中，以确保您正确地形成了 url。此外，如果您使用 $.getJSON，请确保您的 .svc 设置正确以允许 GET 而不仅仅是 POST

# python - 多重继承以及python中的线程

> ID：13380819
> 
> 赞同：6
> 
> 时间：2012-11-14T14:34:03.300
> 
> 标签：python, multithreading, inheritance

我有一个与以下非常相似的代码示例

```
import threading
import datetime
import time
import sys

class FirstClass(object):
    def __init__(self):
        print 'initialized'

class ThreadClass(FirstClass, threading.Thread):
    def __init__(self):
        super(ThreadClass, self).__init__()
        print 'initialized2'

    def run(self):
        time.sleep(1)
        now = datetime.datetime.now()
        sys.stdout.write("%s says Hello World at time: %s \n" % (self.getName(), now))

for i in range(20):
    t = ThreadClass()
    t.start() 
```

由于 python 的 call-next-method，我无法同时运行 FirstClass 和线程的 init 方法。有没有其他方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:36:49.260

您还需要调用初始化程序`super(FirstClass, self).__init__()`。`FirstClass.__init__()`

使用的全部目的`super()`是将调用传递给父合作社。在您的特定 MRO`FirstClass`之前列出`threading.Thread`，因此如果没有显式调用`__init__`MRO 顺序中的下一个，则`threading.Thread.__init__()`永远不会被调用。

您可能想查看[Raymond Hettinger 的 PyCon 2015 演示文稿，](https://www.youtube.com/watch?v=EiOglTERPEo)了解如何`super()`在这种情况下工作。

# php - php时间戳数据库

> ID：13380822
> 
> 赞同：0
> 
> 时间：2012-11-14T14:34:08.940
> 
> 标签：php, mysqli, timestamp

我对数据库中的数据（文章）有疑问。我正在编写一个基于日期创建输出的脚本。它意味着数据库必须在页面顶部的最后添加的文章。（仍在努力）。我想用时间戳来做到这一点（CURRENT_TIMESTAMP 是默认值）。我屏幕上的输出是这样的：2012-11-14 15:19:23。我现在的问题是：您如何将此日期切割成要设置样式的单独元素。我想成为一个结果，我可以用 css 设置日、月、年的样式。

```
<?php
$sql = "SELECT titel, datum from tblArtikels";
        if (!$result = $mysqli->query($sql))
            {
                throw new Exception('Fout in de query');
            }
        else
            {
                while ($row = $result->fetch_assoc())
                {
                    echo $row['titel'] . ' ' . $row['datum']. '<br/>';
                }
            }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:40:03.497

有两种方法可以做到这一点。在 PHP 中展开变量或[在](http://php.net/manual/en/function.explode.php)SQL 查询中[使用 DATE_FORMAT](http://www.w3schools.com/sql/func_date_format.asp)。就个人而言，我会使用后者，但前者意味着你可以做得更多。

编辑：

此外，您想使用 ORDER BY 数据来解决问题的另一部分：

SELECT title, datum from tblArtikels order by datum

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:01:02.890

如果你有一个常规的[时间戳](http://ca1.php.net/manual/en/function.time.php)，你可以使用[date()](http://ca1.php.net/date%28%29)来打印你的日期。您需要使用[time()](http://www.php.net/manual/en/function.strptime.php)将时间戳存储在数据库中

前任：

```
$day = date("l", $timestamp)
$month = date("M", $timestamp)
$year = data("Y", $timestamp) 
```

以下是参考资料：

[http://ca1.php.net/date()](http://ca1.php.net/date%28%29)

[http://ca1.php.net/manual/en/function.time.php](http://ca1.php.net/manual/en/function.time.php)

[http://www.php.net/manual/en/function.strptime.php](http://www.php.net/manual/en/function.strptime.php)

如果您真的想要/需要以某种方式格式化时间，您可以在创建时间戳时使用[strptime()](http://www.php.net/manual/en/function.strptime.php)指定格式。格式与上面的链接相同。

# c# - Quartz.NET/Castle Windsor 集成 XmlInterpreter 异常

> ID：13380824
> 
> 赞同：2
> 
> 时间：2012-11-14T14:34:11.110
> 
> 标签：c#, castle-windsor, quartz.net

下载了 Quartz.NET 集成项目的最新源以重现我遇到的错误后，我担心源 SampleApp 会产生相同的问题。

[https://github.com/castleprojectcontrib/QuartzNetIntegration](https://github.com/castleprojectcontrib/QuartzNetIntegration)

启动程序时，我尝试像这样配置容器：

```
var container = new WindsorContainer(new XmlInterpreter());
container.Install(FromAssembly.This()); 
```

在到达我的石英安装程序之前，它失败了，但以下情况除外：

“设施元素需要必需的非空白属性类型”

![在此处输入图像描述](../Images/fec3373b27c23ec8241c48d0e7d8ac75.png)

我已经将此（我希望）追溯到应用程序配置的这一部分（取自 github 源的 SampleApp）：

![在此处输入图像描述](../Images/d94ca66754141ca705c41ed512871c4c.png)

而如果我将配置更改为此它会通过配置的这一步但无法注册 Quartz Facility 的两个实例（应该如此）

![在此处输入图像描述](../Images/4896e48ae9acffcec97a04b2e4b7f822.png)

任何建议如何启动和运行？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:55:21.530

The documentation on the wiki says to register the Quartz.NET facility like this:

```
<castle>
  <facilities>
    <facility id="startable.facility" type="Castle.Facilities.Startable.StartableFacility, Castle.Windsor"/>
    <facility id="quartznet" type="Castle.Facilities.QuartzIntegration.QuartzFacility, Castle.Facilities.QuartzIntegration">
      <quartz>
        <item key="quartz.scheduler.instanceName">XmlConfiguredInstance</item>
        <item key="quartz.threadPool.type">Quartz.Simpl.SimpleThreadPool, Quartz</item>
        <item key="quartz.threadPool.threadCount">5</item>
        <item key="quartz.threadPool.threadPriority">Normal</item>
        <item key="quartz.plugin.xml.type">Quartz.Plugin.Xml.JobInitializationPlugin, Quartz</item>
        <item key="quartz.plugin.xml.overwriteExistingJobs">true</item>
        <item key="quartz.plugin.xml.scanInterval">10</item>
      </quartz>
    </facility>
  </facilities>
</castle> 
```

[http://docs.castleproject.org/Contrib.Quartz-Net-integration.ashx](http://docs.castleproject.org/Contrib.Quartz-Net-integration.ashx)

This is because from Windsor 3.0 the type attribute is now required for the facility configuration/ [https://github.com/castleproject/Windsor/commit/40f8eefb16226fb279389b732ab89c8c55853ba5](https://github.com/castleproject/Windsor/commit/40f8eefb16226fb279389b732ab89c8c55853ba5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:00:23.890

我会让事情变成这样：

```
<facility id="startable.facility" type="Castle.Facilities.Startrable.StartableFacility, Castle.Windsor"/>
<facility id="quartznet" type="Namespace.Castle.QuartzFacility, Namespace">
    <globalJobListener>
        <!-- the rest-->
</facility> 
```

在代码中：

```
var container = new WindsorContainer(new XmlInterpreter());  
// container.AddFacility("quartznet", new QuartzFacility()); 
```

希望这会有所帮助。

# asp.net-mvc - 我可以用什么来替换 MVC 中的 MessageBox.Show？

> ID：13380826
> 
> 赞同：0
> 
> 时间：2012-11-14T14:34:14.037
> 
> 标签：asp.net-mvc, messagebox, replace

我正在开发一个 MVC 内网。

我更习惯于为 windows 开发，但我被分配了这个项目。

我总是使用 MessageBox.Show 来显示有关异常的消息。

我可以在 MVC 中使用什么来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:42:19.217

这是你可以做的

*   您可以使用 jQuery 对话框 。查看[http://docs.jquery.com/UI/Dialog](http://docs.jquery.com/UI/Dialog)。使用起来超级简单

*   您可以使用 Response.write 在页面上写下您想要的任何内容

*   您可以使用 javascript alert 来显示消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:42:27.647

使用 jquery 对话框：

```
<div id="msgDialog" title="Warning">Please select an item.</div>

<script type="text/javascript">

$(document).ready(function () {
  // set up message dialog
  $("#msgDialog").dialog({
    autoOpen: false,
    modal: true,
    resizable: false,
    buttons: {
      " OK ": function () { $(this).dialog("close"); }
    }
  });

});

// to invoke:
    $("#msgDialog").dialog('open');
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:42:47.893

你以错误的方式问这个问题。您正在实现一个 Web 应用程序，它与 Windows 开发完全不同。如果您有服务器端错误，您可以处理它并将其写入 html 输出，或者您可以记录它，或者您可以做任何您想做的事情。如果您想要类似于消息框的内容，您可以将异常存储在字符串中并将其放置在 javascript 警报中。

```
<script>
    alert('@Model.Exception');
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T22:57:39.653

您需要习惯 MVC 是以 Web 为中心的事实。您需要为客户端提供所有必要的脚本以在浏览器中执行。在此设置中，您可以向客户端发送异常视图。如果你想显示消息框，你需要在你的视图中加入一些基于 JavaScript 的代码。换句话说，您需要在服务器上构建所有内容，以便在客户端显示和执行，包括 JavaScript。即使在 ASP.net 中，这也是您获得动态功能的方式——您在特定条件下呈现一个客户端代码，而在条件不同时呈现其他客户端代码。

# php - 使用自定义 single.php 的 Wordpress

> ID：13380829
> 
> 赞同：0
> 
> 时间：2012-11-14T14:34:19.440
> 
> 标签：php, wordpress

我有一个自定义单页`single-ENG.php`。我想将此页面用于带有分类的帖子`language=>english`。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:55:23.230

Yes, you can do this. The below code assumes that your Custom Taxonomy is called `language` and the Term to check for has the slug `english` (obviously change as required). Put this code in your `functions.php` file.

```
/**
 * Select a custom single template
 *
 * @param required string $single The path to the single template
 * @return string $single The updated path to the required single template
 */
function my_single_template($single){

    global $wp_query, $post;

    $terms = wp_get_object_terms($post->ID, 'language');

    if(!empty($terms)) : foreach($terms as $term) :

            if($term->slug === 'english') :
                $single = sprintf('%1$s/single-ENG.php', TEMPLATEPATH); 
            endif

        endforeach;
    endif;

    return $single;

}
add_filter('single_template', 'my_single_template'); 
```

**EDIT**

Having read the answer provided by @maiorano84, I agree that this isn't the best way of doing it. There are few circumstances I can think of where this technique should be used, but the fact WP have added the filter shows that they understand there may be the need, so you should be safe to use it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:30:19.833

是的，这是可能的，但我认为您需要先查看[Wordpress 模板层次结构](http://codex.wordpress.org/images/1/18/Template_Hierarchy.png)。

您的方法存在一些问题：

您不应将自定义页面模板命名为“single-xxxx.php”。'single' 前缀用于单个帖子视图。这可能会使 Wordpress 感到困惑，并导致它仅在您查看帖子类型为“ENG”的单个帖子时加载模板（这可能在您的主题中不存在）。

不建议将页面用作任何类型的帖子内容的外壳。这样做的原因是，您实际上是在规避 Wordpress 提供的现有工具，以强制它使用自己的内置默认值执行它已经可以执行的操作。

与其创建一个全新的页面对象来容纳给定分类法的帖子，为什么不创建一个taxonomy-language-english.php 文件，并在主题的菜单（仪表板->外观->菜单）中设置其导航？

如果您实际[注册了 Language Taxonomy](http://codex.wordpress.org/Function_Reference/register_taxonomy)，Wordpress 将自动识别新的 Taxonomy 模板并在其默认循环中查询所有适当的数据。

这详细说明了如何使用两种方法查询您的帖子。第一个是我建议使用的，只要你改变你的结构以适应良好实践的练习。第二种是将自定义模板应用于给定页面的方法。我冒昧地使用了新文件名以避免混淆 Wordpress：

**使用分类语言-english.php**

```
<?php
if(have_posts()) : while(have_posts()) : the_post();
    echo get_the_title().'<br/>'; //Output titles of queried posts
endwhile;
else :
    echo 'No posts were found'; //No posts were found
endif;
?> 
```

**使用 pagelang-english.php**

```
<?php
/**
* @package WordPress
* @subpackage MyWordpressThemeName
* Template Name: Single English
*/
$args = array('tax_query' => array(
    array(
        'taxonomy' => 'language',
        'field' => 'slug',
        'terms' => 'english'
    )
));
$q = new WP_Query($args);
if($q->have_posts()) : while($q->have_posts()) : $q->the_post();
    echo get_the_title().'<br/>'; //Output titles of queried posts
endwhile;
else :
    echo 'No posts were found'; //No posts were found
endif;
?> 
```

这应该足以让你开始。祝你好运。

# linux - 如何为 Coldfusion 9 创建 PID 文件？

> ID：13380830
> 
> 赞同：1
> 
> 时间：2012-11-14T14:34:23.833
> 
> 标签：linux, coldfusion, pid

如何为 Coldfusion 9 创建 PID 文件？

我正在尝试使用 monit 监视我的 Coldfusion 9 服务器，但它需要一个 PID 文件。我看到我应该创建一个“包装器”，但我找不到有关如何创建该包装器的任何信息。

**更新**

所以这些吃了我对coldfusion init脚本所做的添加：

```
case $ARG in

        start)
                cfstart
                echo `/usr/bin/pgrep -o -f /opt/coldfusion9/runtime/bin/coldfusion9` > /var/run/coldfusion.pid;
        ;;

        stop)
                cfstop
                rm -rf /var/run/coldfusion.pid
        ;;

        restart)
                echo "Restarting ColdFusion 9..."
                cfstop
                rm -rf /var/run/coldfusion.pid

                cfstart
                echo `/usr/bin/pgrep -o -f /opt/coldfusion9/runtime/bin/coldfusion9` > /var/run/coldfusion.pid;
        ;; 
```

和监控配置：

```
 check process coldfusion with pidfile /var/run/coldfusion.pid
    start program = "/etc/init.d/coldfusion_9 start" with timeout 30 seconds
    stop program  = "/etc/init.d/coldfusion_9 stop" with timeout 30 seconds
    if cpu > 10% for 1 cycles then alert
    if cpu > 80% for 3 cycles then alert
    if cpu > 90% for 10 cycles then alert
    if cpu > 100% for 3 cycles then alert
    if totalmem > 1024.0 MB for 10 cycles then alert
    if loadavg(5min) greater than 10 for 8 cycles then alert
    if 10 restarts within 10 cycles then alert
    group server 
```

[所有警报都只是为了密切关注它，直到我们知道它正在工作]

它似乎正在工作，出现在 mmoni 中，在重新启动时发送警报 - 任何人都可以看到这有什么问题或改进的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:44:18.557

如果您不能将 CF 的启动包装在脚本中以编写 PID 文件，那么另一种方法可能是使用[此处](https://stackoverflow.com/questions/35842/how-can-a-java-program-get-its-own-process-id)的一种方法来获取 PID，然后从 ColdFusion 的[onServerStart 功能调用它](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WS7AC9408A-1AC6-4ab7-9C8E-CF1DA8FCA16D.html)

# mysql - mysql DISTINCT 关键字未显示不同的行

> ID：13380839
> 
> 赞同：0
> 
> 时间：2012-11-14T14:34:54.047
> 
> 标签：mysql

询问：

```
mysql> SELECT DISTINCT (stories.id), stories.news_type, story_keywords.keyword 
FROM (`stories`) LEFT JOIN `story_keywords` ON `stories`.`id`
=`story_keywords`.`story_id` 
WHERE `image_full_url` != '' AND `order` != 0 
AND `news_type` IN ('movie_review', 'movie') 
AND `keyword` IN ('topnews', 'toptablet') 
ORDER BY `created` DESC, `order` DESC LIMIT 5; 
```

结果：（请注意 ID 不是不同的）

```
+--------+--------------+-----------+
| id     | news_type    | keyword   |
+--------+--------------+-----------+
| 100895 | movie_review | topnews   |
| 100895 | movie_review | toptablet |
| 100798 | movie_review | toptablet |
| 100060 | movie_review | toptablet |
| 100060 | movie_review | topnews   |
+--------+--------------+-----------+
5 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:36:57.047

`select distinct`适用于被提取的行，而不是该行中的单个字段。结果集中的每一行都是**不同**的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:41:05.230

`DISTINCT`应用于整行，因为这些`keyword`列对于它们匹配条件的不同行有多个值`DISTINCT`。如果要返回一行，则需要确定`keyword`要返回的值。

如果要将值连接在一起，则可以使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)：

```
SELECT stories.id, stories.news_type, GROUP_CONCAT(story_keywords.keyword)
FROM (`stories`) 
LEFT JOIN `story_keywords` 
  ON `stories`.`id`=`story_keywords`.`story_id` 
WHERE `image_full_url` != '' AND `order` != 0 
  AND `news_type` IN ('movie_review', 'movie') 
  AND `keyword` IN ('topnews', 'toptablet') 
GROUP BY stories.id, stories.news_type
ORDER BY `created` DESC, `order` DESC LIMIT 5; 
```

数据会像这样返回：

```
| id     | news_type    |   keyword           |
+--------+--------------+---------------------+
| 100895 | movie_review | topnews,toptablet   |
| 100798 | movie_review | toptablet           |
| 100060 | movie_review | toptablet, topnews  | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:41:10.397

DISTINCT 选项删除重复的记录，而不是字段值。如果你想选择不同的 id，那么你可以使用这个查询 -

```
SELECT
  stories.id,
  GROUP_CONCAT(stories.news_type),
  GROUP_CONCAT(story_keywords.keyword)
FROM (`stories`)
LEFT JOIN `story_keywords`
ON `stories`.`id` = `story_keywords`.`story_id`
WHERE
  `image_full_url` != ''
  AND `order` != 0
  AND `news_type` IN ('movie_review', 'movie')
  AND `keyword` IN ('topnews', 'toptablet')
GROUP BY
  stories.id
ORDER BY
  `created` DESC
, `order` DESC
LIMIT
  5; 
```

# php - FPDF检查多单元格的高度

> ID：13380840
> 
> 赞同：2
> 
> 时间：2012-11-14T14:34:55.693
> 
> 标签：php, pdf, fpdf

我正在使用 FPDF 生成显示产品详细信息的 pdf，显然这将具有可变的文本长度，从而导致单元格的高度不同。

在这种情况下，我正在检查产品包含多少香水，然后显示每种香水的名称和描述，同时跟踪应该占用多少行。

```
for ($i = 0;$i <= $countfrag; $i++) {
    $pdf->SetXY(102, $next);
    $fragname = $ranges->getFragName($fragcount[$i]);
    $fragdesc = $ranges->getFragDesc($fragcount[$i]);
    $pdf->SetFont('Arial','B',10);
    $pdf->MultiCell(88,4, $fragname, 0, L);
    $next = $next + 4;
    $pdf->SetFont('Gill','',11);
    $pdf->SetXY(102, $next);
    $pdf->MultiCell(98,4, $fragdesc, 0, L); 
    $len = $pdf->GetStringWidth($fragdesc);
    $remain = ceil($len / 98) + 1;
    $extra = $remain * 4;
    $next = $next + $extra;
    } 
```

如您所见，我使用 $pdf->GetStringWidth 获取字符串的宽度，然后将其除以多单元格的宽度（98），然后加 1 得到加 1 以在下一个之前获得额外的行空间印刷。

虽然这在大多数情况下都有效，但我正在创建的一些 pdf 文件确实存在问题。

我有一个 len 在 373.2784 处计算，它只给我 4 行的高度，因为它需要 5 行空间才能保持一致..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:46:43.123

FPDF does not support good Multicells! FPDF has stopped the support, I think some years ago. Use TCPDF it has alsmost the same functions/calls (>95%). Its is full advanced and has a super documentation. TCPDF supports transactions, Multicell and UTF-8.

# java - Java 中的 python pickle.dumps 和 struct.pack

> ID：13380841
> 
> 赞同：2
> 
> 时间：2012-11-14T14:34:55.630
> 
> 标签：java, python, pickle

我正在尝试使用来自 Java 应用程序的数据为碳（石墨）服务器提供数据。我想使用 pickle 协议而不是 oneline 协议，因为它似乎要快得多。

我已经在一个从我的 Java 应用程序调用的小型 python 脚本中完成了这项工作。但我想用原生 Java 写这个。

python 脚本如下所示：

```
listOfMetricTuples = [('test', (1, 1352903620)), ('test', (2, 1352903620))]
payload = pickle.dumps(listOfMetricTuples)
header = struct.pack("!L", len(payload))
message = header + payload 
```

不需要包含任何库会很棒。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:16:15.987

它现在解决了。

我通过使用 Jython 和以下代码解决了这个问题。

```
try{
    Socket s = null;
    try{
    s = new Socket("debian-srv", 2004);
    }catch(UnknownHostException e){
    e.printStackTrace();
    }catch(IOException e){
    e.printStackTrace();
    }
    if (s == null) {
    return -1;
    }

    PyTuple t = new PyTuple(new PyString("Test.brange-debian.mojo"), new PyTuple(new PyInteger(1352975858), new PyInteger(56)));
    PyTuple t2 = new PyTuple(new PyString("Test.brange-debian.mojo"), new PyTuple(new PyInteger(1352975858-60), new PyInteger(43)));
    PyTuple t3 = new PyTuple(new PyString("Test.brange-debian.mojo"), new PyTuple(new PyInteger(1352975858-2*+60), new PyInteger(65)));

    PyList list = new PyList();
    list.append(t);
    list.append(t2);
    list.append(t3);

    PyString payload = cPickle.dumps(list);

    byte[] bytes = ByteBuffer.allocate(4).putInt(payload.__len__()).array();

    s.getOutputStream().write(bytes);
    s.getOutputStream().write(payload.toBytes());
    s.getOutputStream().flush();

    s.close();
}
catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T18:02:24.337

另一种选择，根据[我如何序列化 Java 对象，以便它可以被pickle（Python）反序列化？](https://stackoverflow.com/questions/7558389/how-do-i-serialize-a-java-object-such-that-it-can-be-deserialized-by-pickle-pyt)，可能是使用热解石。占用空间可能小于必须使用 Jython。

# iphone - CorePlot 轴 expandRangeByFactor 无法正常工作

> ID：13380842
> 
> 赞同：1
> 
> 时间：2012-11-14T14:34:57.503
> 
> 标签：iphone, objective-c, ios5, core-plot

我正在尝试使用 CorePlot 库在我的一个项目中使用散点图。我也能够从中获得良好的结果，但是出了点问题，我确信我与此无关，因为在那之后我没有更改代码。这是情节现在的样子： ![在此处输入图像描述](../Images/8b7045a316e563cb7479419c78d71b5e.png)

`expandRangeByFactor`我设置的值是：

```
CPTMutablePlotRange *xRange = [plotSpace.xRange mutableCopy];
[xRange expandRangeByFactor:CPTDecimalFromCGFloat(350.3f)];
plotSpace.xRange = xRange;
CPTMutablePlotRange *yRange = [plotSpace.yRange mutableCopy];
[yRange expandRangeByFactor:CPTDecimalFromCGFloat(8.3f)];
plotSpace.yRange = yRange; 
```

我不知道这里发生了什么错误，因为通过查看这些值，它不应该是这样的。在这方面需要紧急帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T01:23:58.583

该`-expandRangeByFactor:`方法将范围的长度乘以给定的因子。它调整范围位置以使范围的中心保持在同一位置。您正在使用相当大的因素。例如，如果您的起始 x 范围的长度为一天，则扩展范围将接近一年。

# c++ - 多个分隔符

> ID：13380843
> 
> 赞同：0
> 
> 时间：2012-11-14T14:35:05.043
> 
> 标签：c++, delimiter

例如，我有来自具有多个分隔符的文件的输入

```
years,(7),(9)
years,(8),(3) 
```

我可以用什么方法将它们分开

```
years
7
9
years
8
3 
```

我尝试使用 strok 但我没有显示以下内容。

```
getline (myfile,line, ',' );
line = strtok (pch," (),"); 
```

我从[http://www.cplusplus.com/reference/clibrary/cstring/strtok/得到这个例子](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:59:48.457

这看起来像是[std::locale](http://en.cppreference.com/w/cpp/locale/locale)和他可信赖的伙伴[imbue](http://en.cppreference.com/w/cpp/io/basic_ios/imbue)的工作：

```
#include <locale>
#include <iostream>

struct punct_ctype : std::ctype<char> {
  punct_ctype() : std::ctype<char>(get_table()) {}
  static mask const* get_table()
  {
    static mask rc[table_size];
    rc[' '] = std::ctype_base::space;
    rc['\n'] = std::ctype_base::space;
    rc['('] = std::ctype_base::space;
    rc[')'] = std::ctype_base::space;
    rc[','] = std::ctype_base::space;
    return &rc[0];
  }
};

int main() {
  using std::string;
  using std::cin;
  using std::locale;

  cin.imbue(locale(cin.getloc(), new punct_ctype));

  string word;
  while(cin >> word) {
    std::cout << word << "\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:08:37.460

你没有使用`strtok`正确：

```
char str[] ="- This, a sample string.";
char * pch;
printf ("Splitting string \"%s\" into tokens:\n",str);
pch = strtok (str," ,.-");
while (pch != NULL)
{
  printf ("%s\n",pch);
  pch = strtok (NULL, " ,.-");
} 
```

有关详细信息，请参阅[http://www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)。

# c# - 来自 cURL 请求的 RestSharp POST 请求翻译

> ID：13380845
> 
> 赞同：3
> 
> 时间：2012-11-14T14:35:09.110
> 
> 标签：c#, .net, curl, jira, restsharp

我正在尝试使用 RestSharp 发出 POST 请求以在 JIRA 中创建问题，而我必须使用的是使用 cURL 的示例。我对任何一个都不熟悉，不知道我做错了什么。

这是cURL 中给出的[示例：](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Create+Issue)

```
curl -D- -u fred:fred -X POST --data {see below} -H "Content-Type: application/json"
http://localhost:8090/rest/api/2/issue/ 
```

这是他们的示例数据：

```
{"fields":{"project":{"key":"TEST"},"summary":"REST ye merry gentlemen.","description":"Creating of an issue using project keys and issue type names using the REST API","issuetype":{"name":"Bug"}}} 
```

这就是我正在尝试使用 RestSharp 的方法：

```
RestClient client = new RestClient();
client.BaseUrl = "https://....";
client.Authenticator = new HttpBasicAuthenticator(username, password);
....// connection is good, I use it to get issues from JIRA
RestRequest request = new RestRequest("issue", Method.POST);
request.AddHeader("Content-Type", "application/json");
request.AddParameter("data", request.JsonSerializer.Serialize(issueToCreate));
request.RequestFormat = DataFormat.Json;
IRestResponse response = client.Execute(request); 
```

我得到的是 415 响应

```
Unsupported Media Type 
```

注意：我也尝试了[这篇文章](https://stackoverflow.com/questions/11400879/how-to-post-request-using-restsharp)中的建议，但这并没有解决问题。任何指导表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T23:47:15.417

不要做

```
request.AddParameter("data", request.JsonSerializer.Serialize(issueToCreate)); 
```

而是尝试：

```
request.AddBody(issueToCreate); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-25T13:30:08.043

您可以使用的干净且更可靠的解决方案如下所述：

```
var client = new RestClient("http://{URL}/rest/api/2");
var request = new RestRequest("issue/", Method.POST);

client.Authenticator = new HttpBasicAuthenticator("user", "pass");

var issue = new Issue
{
    fields =
        new Fields
        {
            description = "Issue Description",
            summary = "Issue Summary",
            project = new Project { key = "KEY" }, 
            issuetype = new IssueType { name = "ISSUE_TYPE_NAME" }
        }
};

request.AddJsonBody(issue);

var res = client.Execute<Issue>(request);

if (res.StatusCode == HttpStatusCode.Created)
    Console.WriteLine("Issue: {0} successfully created", res.Data.key);
else
    Console.WriteLine(res.Content); 
```

我上传到 gist 的完整代码：[https ://gist.github.com/gandarez/50040e2f94813d81a15a4baefba6ad4d](https://gist.github.com/gandarez/50040e2f94813d81a15a4baefba6ad4d)

Jira 文档： [https ://developer.atlassian.com/jiradev/jira-apis/jira-rest-apis/jira-rest-api-tutorials/jira-rest-api-example-create-issue](https://developer.atlassian.com/jiradev/jira-apis/jira-rest-apis/jira-rest-api-tutorials/jira-rest-api-example-create-issue)

# c++ - 如何将模板参数派生的编译时间信息添加到模板中？

> ID：13380846
> 
> 赞同：4
> 
> 时间：2012-11-14T14:35:15.630
> 
> 标签：c++, templates, c++11

[我使用 Stroustrup 在GoingNative 2012](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Keynote-Bjarne-Stroustrup-Cpp11-Style)（从 23:00 分钟开始）提出的用户定义文字来玩单元实现。这是代码：

```
 #include <iostream>

 using std::cout;
 using std::endl;

 template<int M, int K, int S> 
 struct Unit { // a unit in the MKS system
   enum {m=M,kg=K,s=S}; 
 };

 template<typename Unit> // a magnitude with a unit
 struct Value {
   double val;
   constexpr Value(double d) : val(d) {}
 };

 using Meter = Unit<1,0,0>;
 using Second = Unit<0,0,1>;

 using Distance = Value< Meter >;
 using Time = Value< Second >;
 using Velocity = Value< Unit<1,0,-1> >;

 constexpr Value<Meter> operator "" _m(long double d)
 // a f-p literal with suffix 'm'
 {
   return Distance(d);
 }

 constexpr Value<Second> operator"" _s(long double d)
 // a f-p literal with suffix 's'
 {
   return Time(d);
 }

 constexpr Velocity operator/(Distance d, Time t)
 {
   return ( d.val / t.val );
 }

 int main(void)
 {
    Distance s = 100._m;
    Time t = 22._s;
    Velocity v = s/t;

    cout << "s " << s.val << "\nt " << t.val << endl;
    cout << "v " << v.val << endl;

   return 0;
 } 
```

正如你所看到的，我自由地定义了一个`operator/`来计算速度。输出是（需要gcc-4.7）：

```
$ g++ -std=c++0x test_units_02.cc && ./a.out
s 100
t 22
v 4.54545 
```

到现在为止还挺好。现在我想将一个包含单位表示的字符串添加到结构单元（或值？）。无论我想怎样写

```
cout << "v " << v.val << v.unit << endl; 
```

并得到类似的东西

```
v 4.54545 m^1 s^-1 
```

或者

```
v 4.54545 m^1 kg^0 s^-1 
```

它不需要很漂亮，因为它只是为了检查。并学习如何去做；）。

当然，优雅的解决方案是在编译时评估所有内容。

我对此进行了一些尝试，但我不会用我没有结果的尝试让您感到厌烦/混淆...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T14:55:00.770

首先我们添加一个`unit`成员`Value`：

```
 template<typename Unit> // a magnitude with a unit
 struct Value {
   double val;
   constexpr static Unit unit = {};
   constexpr Value(double d) : val(d) {}
 }; 
```

然后我们写一个流输出操作符：

```
 template<int M, int K, int S>
 std::ostream &operator<<(std::ostream &os, Unit<M, K, S>) {
   return os << "m^" << M << " kg^" << K << " s^" << S;
 } 
```

在编译时生成字符串是*可能的*，但需要`constexpr`编译时字符串类（例如[`boost::mpl::string`](http://www.boost.org/doc/libs/1_40_0/libs/mpl/doc/refmanual/string.html)）和十进制格式——所有这些都是可行的，但在这种情况下并不特别值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-30T13:46:27.700

`Unit`已经有了我们需要的信息，所以我们可以通过添加一个函数来做到这一点`Value`，或者我们可以重载`operator<<`：

```
template<typename U>
struct Value
{
    double val;
    constexpr Value(double d) : val(d) {}

    std::string Units() const
    {
        return "m^" + to_string(U::m) + 
               " kg^" + to_string(U::kg) +
               " s^" + to_string(U::s);
    }
};

template <typename U>
std::ostream& operator<<(std::ostream& out, Value<U> val)
{
    out << val.val
        << " m^" << U::m << " kg^" << U::kg << " s^" << U::s;
    return out;
} 
```

我们还可以提供一个泛型`operator/`：

```
template <typename U1, typename U2>
Value<Unit<U1::m - U2::m, U1::kg - U2::kg, U1::s - U2::s>>
operator/(Value<U1> v1, Value<U2> v2)
{
    return (v1.val / v2.val);
} 
```

这给了我们更多的灵活性：

```
void demo()
{
    auto accel = Distance(100) / Time(22) / Time(1);
    cout << accel << endl; // Print with units.
    cout << accel.val << endl; // Print without units.
    cout << accel.Units() << endl; // Print only units.
} 
```

# php - 不能用 PDO 做 $STH->execute()

> ID：13380857
> 
> 赞同：0
> 
> 时间：2012-11-14T14:35:50.420
> 
> 标签：php, insert, pdo

我[终于]在学习 PDO，过去一个小时我一直在处理一个我似乎无法解决的问题。我有这个代码：

```
//Simple script that connects to mysql and database.
$db = new PDO ("mysql:host=".Configuration::get('MysqlServername').";dbname=".Configuration::get('MysqlDatabase').";charset=UTF-8",
          Configuration::get('MysqlUsername'),
          Configuration::get('MysqlPassword')) or die ("Error connecting");

// To test why it doesn't work
$STH = $db->prepare("INSERT INTO htranslations (keyword, en, page, last) VALUES (?, ?, ?, NOW())") or die ("Error preparing");
$STH->bindValue(1, "New_test", PDO::PARAM_STR) or die ("Error binding 1");
$STH->bindValue(2, "New test", PDO::PARAM_STR) or die ("Error binding 2");
$STH->bindValue(3, $_SERVER['PHP_SELF'], PDO::PARAM_STR) or die ("Error binding 3");
$STH->execute() or die ("Error executing"); 
```

**注意**：这些`or die`设置仅作为临时措施来测试错误的来源。这段代码根本不起作用，我不知道为什么。现在，我尝试过：

*   做的时候`var_dump($db);`，我`object(PDO)#1 (0) { }`打开我的浏览器。我想这不是它应该是的，但我不知道，在网上找不到太多。未执行的`or die`语句让我认为这可能是正确的。

*   显示的错误是`Error executing`。这意味着无法执行最后一个查询，但这并没有多大帮助，因为它可能是以前出现的问题。

*   配置类返回正确的值。它以前与 mysql 一起工作，我对其进行了测试以查看它是否返回了正确的值（确实如此）。

*   我在 000webhost.com 免费帐户。从[这个论坛帖子](http://www.free-installations.info/threads/000webhost-com-pdo-and-php-5-3.3053/)和[其他](http://www.000webhost.com/forum/web-programming/27114-possible-use-pdo-000webhost.html)帖子来看，这里的 PDO 应该没有任何问题。此外，`print_r(PDO::getAvailableDrivers());`返回 mysql、sqlite 和 sqlite2。

*   反过来，在 execute() 语句的数组中插入值也不起作用。

以前工作的 mysql_* 代码是（之前已转义）：

```
 $sql="INSERT INTO htranslations (keyword, en, page, last) VALUES ('$Id', '$Text', '".$_SERVER['PHP_SELF']."', now())";
 mysql_query($sql); 
```

**你能看出我做错了什么吗？如果没有，你至少能给我指出一些方向来继续测试它吗？**我主要（但不仅）遵循[本教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:56:19.713

感谢用户 andrewsi，我可以解决我的问题。

基本上，我不知道在哪里寻找错误，所以我运行这段代码`var_dump($STH->ErrorInfo());`来找出问题所在，然后修复它。我的结果代码是：

```
//Simple script that connects to mysql and database.
$db = new PDO ("mysql:host=".Configuration::get('MysqlServername').";dbname=".Configuration::get('MysqlDatabase').";charset=UTF-8",
          Configuration::get('MysqlUsername'),
          Configuration::get('MysqlPassword')) or die ("Error connecting");

// To test why it doesn't work
$STH = $db->prepare("INSERT INTO htranslations (keyword, en, page, last) VALUES (?, ?, ?, NOW())");
$STH->execute(array("New_test","New test",$_SERVER['PHP_SELF']));
var_dump($STH->ErrorInfo()); 
```

它返回了一个重复的键，那时我意识到（曾经）与旧 mysql_* 一起工作的代码在这里不起作用，只是因为数据库中的一个错误。

但是我学会了如何以 PDO 方式检查错误（好吧，仍然需要 try/catch 块），并希望遇到类似错误的人能用这个答案解决这个问题。

# html - 从网页创建应用程序快捷方式会影响本地存储/缓存清除吗？

> ID：13380860
> 
> 赞同：0
> 
> 时间：2012-11-14T14:35:59.973
> 
> 标签：html, mobile

如果在 iOS 和 Android 上，用户创建了主页屏幕/应用程序绘制快捷方式到网页，它是否会保存该站点的缓存项目和本地存储，以便在用户手动清除应用程序缓存等时不会被删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T15:43:25.093

否 - 在 iOS7 上的 iPhone 5 和 4.3 上的 Nexus 4 上测试

# c++ - ofTrueTypeFont.drawString() 的结果似乎有很大的空格

> ID：13380861
> 
> 赞同：0
> 
> 时间：2012-11-14T14:36:03.980
> 
> 标签：c++, openframeworks

正如我注意到这样代码的结果：

```
ofTrueTypeFont lttf;
lttf.loadFont("segoeuil.ttf", 48);
lttf.drawString("aruku around", 50, 350); 
```

似乎“aruku”和“around”之间的空间是一个宽字符（“”）空间，而不是常规的半字符（“”）空间，就像在这个问题中一样。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:11:32.850

试试： [setSpaceSize (...)](http://www.openframeworks.cc/documentation/graphics/ofTrueTypeFont.html#setSpaceSize) 也许你可以用这个来调整空间大小。

# c - MPI_Comm_rank 总是写 0

> ID：13380869
> 
> 赞同：1
> 
> 时间：2012-11-14T14:36:18.437
> 
> 标签：c, openmpi, mpich

如何获得预期的输出

```
rank 0
size 2
rank 1
size 2 
```

或者这些线的一些排列？

ranktest.c

```
#include <mpi.h>
#include <stdio.h>
int main(int argc, char *argv[]){
    MPI_Init(NULL, NULL);
    int world_rank;
    MPI_Comm_rank(MPI_COMM_WORLD, &world_rank);
    int world_size;
    MPI_Comm_size(MPI_COMM_WORLD, &world_size);
    printf("rank %d\n", world_rank);
    printf("size %d\n", world_size);
    MPI_Finalize();
    return 0;
} 
```

编译和运行

```
tsbertalan@hustlenbustle:~$ mpicc ranktest.c
tsbertalan@hustlenbustle:~$ mpirun -np 2 ./a.out 
rank 0
size 1
rank 0
size 1 
```

在不同的主机上：

```
tsbertalan@stamp:~$ mpicc ranktest.c
tsbertalan@stamp:~$ mpirun -np 2 ./a.out 
rank 0
size 2
rank 1
size 2 
```

我试过了

```
tsbertalan@hustlenbustle:~$ sudo aptitude reinstall openmpi-bin libopenmpi-dev 
```

但没有任何改变。/etc/openmpi/openmpi-default-hostfile 和 /etc/openmpi/openmpi-mca-params.conf 都只包含对两个主机的注释。这里可能有什么不同？

更改为`MPI_Init(&argc, &argv)`或 或者，`int main()`也不会执行任何操作。

**真正的问题，感谢 user3469194：**

```
linuxmint@linuxmint ~ $ sudo aptitude remove libopenmpi-dev mpich2
linuxmint@linuxmint ~ $ sudo aptitude install libmpich2-dev openmpi-bin
linuxmint@linuxmint ~ $ mpicc ranktest.c
linuxmint@linuxmint ~ $ mpirun -np 2 ./a.out
rank 0
size 1
rank 0
size 1
linuxmint@linuxmint ~ $ sudo aptitude remove libmpich2-dev openmpi-bin
linuxmint@linuxmint ~ $ sudo aptitude install libopenmpi-dev mpich2
linuxmint@linuxmint ~ $ mpicc ranktest.c
linuxmint@linuxmint ~ $ mpirun -np 2 ./a.out
[linuxmint:16539] [[INVALID],INVALID] ORTE_ERROR_LOG: A system-required executable either could not be found or was not executable by this user in file ../../../../../../orte/mca/ess/singleton/ess_singleton_module.c at line 357 
```

（还有更多）

**对一些建议的回应：（** 请参阅[此 github 存储库](https://github.com/tsbertalan/524hw4/commits/master)，2012 年 12 月 1 日提交。）

> 尝试在 MPI_Init() 之前移动 world_rank 和 world_size 的定义，它会改变什么吗？

自然，这不太好用：

```
tsbertalan@perrin:~/svn/524hw4$ git checkout 7b5e229 ranktest.c
(reverse-i-search)`clean': tsbertalan@hustlenbustle:~/Documents/School/12fall2012/524apc524/hw/hw4$ make ^Cean && make ranktest && mpirun -np 2 ranktest
tsbertalan@perrin:~/svn/524hw4$ make clean && make ranktest && mpirun -np 2 ranktest
rm -f heat_serial heat_omp heat_mpi heat_serial_O* ranktest
mpicc ranktest.c -o ranktest
*** An error occurred in MPI_Comm_rank
*** before MPI was initialized
*** MPI_ERRORS_ARE_FATAL (your MPI job will now abort)
[perrin:15206] Abort before MPI_INIT completed successfully; not able to guarantee that all other processes were killed!
*** An error occurred in MPI_Comm_rank
*** before MPI was initialized
*** MPI_ERRORS_ARE_FATAL (your MPI job will now abort)
[perrin:15207] Abort before MPI_INIT completed successfully; not able to guarantee that all other processes were killed!
tsbertalan@perrin:~/svn/524hw4$ git checkout HEAD ranktest.c 
```

或者，在我的家用电脑上：

```
tsbertalan@hustlenbustle:~/Documents/School/12fall2012/524apc524/hw/hw4$ git checkout 7b5e229 ranktest.c
tsbertalan@hustlenbustle:~/Documents/School/12fall2012/524apc524/hw/hw4$ vim ranktest.c 
tsbertalan@hustlenbustle:~/Documents/School/12fall2012/524apc524/hw/hw4$ make clean && make ranktest && mpirun -np 2 ranktest
rm -f heat_serial heat_omp heat_mpi heat_serial_O* ranktest
mpicc ranktest.c -o ranktest
Attempting to use an MPI routine before initializing MPICH
Attempting to use an MPI routine before initializing MPICH
tsbertalan@hustlenbustle:~/Documents/School/12fall2012/524apc524/hw/hw4$ git checkout HEAD ranktest.c 
```

> 这几乎总是将一个使用一个 MPI 编译的程序与另一个的 mpirun 一起运行的问题。第一台机器（hustlenbustle）是否也安装了 mpich2？事物出现在路径的什么位置？特别是 和 的结果是`which mpicc`什么`which mpirun`？

我在每次尝试之前在每台计算机上重新编译。我继续[为此制定了目标](https://github.com/tsbertalan/524hw4/commit/2bf8090d4246fa40063e03d80f60a5eee17073ca)。但是，根据要求：

```
tsbertalan@hustlenbustle:~$ which mpicc
/usr/bin/mpicc
tsbertalan@hustlenbustle:~$ which mpirun
/usr/bin/mpirun

tsbertalan@perrin:~/svn/524hw4$ which mpicc
/usr/bin/mpicc
tsbertalan@perrin:~/svn/524hw4$ which mpirun
/usr/bin/mpirun 
```

而且，对于 shiggles，这里是 hnb 和 perrin 的一些 aptitude[搜索](https://github.com/tsbertalan/524hw4/blob/master/mpisearch-hnb.out)的[输出](https://github.com/tsbertalan/524hw4/blob/master/mpisearch-perrin.out)。让我知道我是否应该搜索其他内容。

> 在 Open MPI 下，以下命令应打印出版本：`mpirun -V`. 如果它不打印`mpiexec (OpenRTE) 1.x.x.`，那么您可能有运行时间不匹配。

```
tsbertalan@hustlenbustle:~$ mpirun -V
mpirun (Open MPI) 1.4.3

tsbertalan@perrin:~/svn/524hw4$ mpirun -V
mpirun (Open MPI) 1.4.1 
```

但是，我正在为每个测试重新编译。

也许`sudo aptitude reinstall SOMETHING`会有所帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T15:10:53.757

我也有这个问题。问题是 mpicc 是 OpenMPI（要看到这个，只需运行 mpicc -v），而 mpirun 是 MPICH2（mpirun -V）。我只是通过卸载 MPICH2 来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T22:48:28.293

在我计算机上的 mpic.c 版本中找到了此代码（当我安装了一个带有 mpi 的新软件包时，这给我带来了麻烦）。您的计算机上似乎有类似的东西，而另一台主机的版本正确。

```
int MPI_Comm_rank( MPI_Comm comm, int *rank)
{
  *rank=0;
  return 0;
} 
```

如您所见，rank 始终设置为 0（类似的 size 函数可能将变量设置为 1）。

# css - ::从 CSS 中选择会影响布局

> ID：13380871
> 
> 赞同：0
> 
> 时间：2012-11-14T14:36:21.110
> 
> 标签：css

更新：

我发现了这个：margin: 0 auto; 在样式表的 body {} 块中使标题移动。如果我删除它，横幅标题图片会向右移动。所以那条线是罪魁祸首。有人知道为什么吗？

随着我的进步（有点神秘），问题转向了另一个方向。

我有这个头文件：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">

    <head profile="http://gmpg.org/xfn/11">
        <link rel="stylesheet" href= "<?php echo base_url() ?>css/main_style.css" />        
        <link rel="stylesheet" href= "<?php echo base_url() ?>css/webform.css" />

    </head>
    <div id="header" class = "header"><h1 class="header">Real Estate Worldwide</h1> </div>

<body> 
```

连接到这个视图文件（我在 MVC 上）

视图中的代码与问题无关，我问过，所以我们将跳过它。

然后我有这个样式表。

```
<style type = "text/css">
::selection{ background-color: #E13300; color: white; }
::-moz-selection {background-color: #E13300; color: white; }
::webkit-selection{ background-color: #E13300; color: white; }

body {

        background:url('../assets/uploads/miweb/gradient2.png');
        background-repeat:repeat-x;

        margin: 40px;
        font: 13px/20px normal Helvetica, Arial, sans-serif;
        color: #4F5155;
        width:600px;
        height:500px;
        margin: 0 auto;

    }
#header {

    float:center;
    background: url("../jq185/css/start/images/ui-bg_gloss-wave_75_2191c0_500x100.png") repeat-x scroll 50% 50% #2191C0;
    font-family: 'trebuchet ms',geneva,arial,tahoma,sans-serif;
    font-size: 10px;
    margin: 0 auto;
    margin-top: 2px;
    padding: 0;
    width: 1050px;
    h2 {color:#ffffff;}

}
    .header {

    color:#ffffff;
    } 
```

问题：

如果我从样式表中删除 3 个选择 ::selection 行，背景主体中的渐变效果就会消失。

如果我把它留在那里，那么渐变效果会起作用，但是您在样式表下方看到的#header jpg 文件会从居中的 marging: 0 auto; 改变它的位置。向右。

你在那里有完整的代码。我很困惑，因为我不明白为什么 ::selection 之类的东西会对引用 body {} 的代码片段产生根本影响，其中调用渐变图片并且还会影响该 body {} 中的字体样式

二更新

这是控制器

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Home_c extends CI_Controller {

    function __construct()
    {

        parent::__construct();
        $this->load->model('home_model');

    }

    public function index ()

    {

        $this->load->view('header');
        $this->load->view('home');

    }

    public function load()

    {   $this->load->view('header');
        $data['paises'] = $this->home_model->devolverPaises();
        $data['ofertas'] = $this->home_model->devolverOfertas(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:44:08.453

如果您看到的奇怪效果与没有适当的标记有关，我不会感到惊讶。

编辑：当我发表评论时，我意识到对于 OP 来说可能还不够清楚。

您的 HTML 结构必须有效，首先是：

```
<!DOCTYPE html >

<html>
    <head>
        <!-- title, meta, styles, etc go here -->
    </head>

    <body>
        <!-- all your other content goes here -->
    </body>
</html> 
```

确保当您的页面在浏览器中呈现时，当您查看查看源代码时，您会在适当的位置看到这些容器元素，并像这样嵌套。更好的是，通过验证服务运行您的页面。（例如 http://validator.w3.org/）

您的 CSS 无效：

```
#header {
    float:center; /* no such attribute... only left, right, none, or inherit */
    h2 {color:#ffffff;} /* you can't nest tags inside other specs, except with the use of pre-processors like SASS or LESS */
} 
```

# facebook - Facebook 喜欢按钮延迟渲染

> ID：13380872
> 
> 赞同：0
> 
> 时间：2012-11-14T14:36:22.273
> 
> 标签：facebook, twitter, facebook-like, addthis

我正在为 facebook 和 twitter 之类的按钮使用 addthis 第三方工具，twitter 之类的按钮与页面并行呈现，但 facebbok 按钮呈现有点晚，在整个页面之后，我就这样使用它：

一个类="addthis_button_facebook_like" fb:like:href="#"

有没有办法与整个页面同时渲染它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:12:01.597

不幸的是，无法保证何时呈现按钮。所有按钮将在不同时间加载，具体取决于加载资源 (JS/CSS) 的速度以及代码执行渲染按钮的速度。这样做是为了确保您的页面始终加载并且不会被按钮加载阻止。在 Twitter 加载缓慢而 Facebook 加载快速的情况下，可能会发生相反的情况。是否有希望它们同时加载的功能原因？如果是这样，您可以“隐藏”包含所有按钮的 div，然后在一定时间后让它们全部出现，以增加所有按钮都已呈现的可能性。我希望这是有道理的。

# performance - KineticJS Kinetic.Shape.drawImage 性能泄漏

> ID：13380873
> 
> 赞同：0
> 
> 时间：2012-11-14T14:36:22.713
> 
> 标签：performance, kineticjs, drawimage

所以我有一个非常复杂的结构。我将尝试简单地解释它，足以了解代码......

我有一个包含几个步骤的应用程序：

预加载启动屏幕构建/显示启动屏幕按启动加载相当大的应用程序构建应用程序

最后一部分是我担心的根源，因为应用程序的构建可能需要 2 秒！

所以让我们放大那部分......

建筑部分所做的是创建不同类型的视图。我有一个腿、头、手和整体视图的特写。每个视图都有不同的层。背景、前景、人物、物品等

所以应用程序包含不同的视图，每个视图都有自己的一组图层。

每一层都有自己的一组图像和热点。所有图像和命中点都被添加到图层中，事件将绑定到命中点。

视图的创建如下所示：

```
 function CreateTopFullTotalView() {
    //layers
    topfullTotalBackground = new SimulationDisplays.Background(_self, View.TopFullTotal);
    topfullTotalBystanders = new SimulationDisplays.Bystanders(_self, View.TopFullTotal);
    topfullTotalPatient = new SimulationDisplays.Patient(_self, View.TopFullTotal, _self.GetPatient('patient'));
    topfullTotalResponder1 = new SimulationDisplays.Responder(_self, View.TopFullTotal, _self.GetResponder('responder1'));
    topfullTotalResponder2 = new SimulationDisplays.Responder(_self, View.TopFullTotal, _self.GetResponder('responder2'));

    //add layers to view
    topFullTotalView = new Simulation.View(View.TopFullTotal, [topfullTotalBackground, topfullTotalBystanders, topfullTotalPatient, topfullTotalResponder1, topfullTotalResponder2]);

    //add view to controller
    _self.ViewController.AddView(topFullTotalView);

    var endTime = new Date().getTime();

} 
```

创建每个视图实例后，都会创建一个层，并且将在构造函数中创建图像：

```
 _self.AddImage("Start", new Kinetic.Image(simulation.GetImage("topfullTotal", "patient_start_clothing")));
_self.AddImage("StartNoClothes", new Kinetic.Image(simulation.GetImage("topfullTotal", "patient_start_noClothing")));

_self.AddImage("RecoveryPosition", new Kinetic.Image(simulation.GetImage("topfullTotal", "patient_recoveryPosition")));

// Hitspot Head
_self.AddHitspot("Head", new Kinetic.Image(simulation.GetImage("topfullTotal", "victim_head")));
_self.GetHitspot("Head").on("click", function () {
    simulation.ShowContentMenu("victim_head", _view, _self.GetHitspot("Head"));
    Mouse("default");
});
_self.GetHitspot("Head").on("mouseover", function () {
    Mouse("pointer");
});
_self.GetHitspot("Head").on("mouseout", function () {
    Mouse("default");
});
etc... 
```

现在我追踪了一些关于施工时间的信息：

跟踪：CreateTopFullTotalView 1018ms 跟踪：CreateBreathingView 273ms 跟踪：CreateThoraxView 197ms 跟踪：CreateNeckLeft 61ms 跟踪：CreateNeckRight 46ms 跟踪：CreateWristLeft 49ms 跟踪：CreateWristRight 50ms 跟踪：创建所有视图 1697ms

我来自 chrome 开发者工具的个人资料信息告诉我 Kinetic.Shape.drawImage 有大约 60% 的东西......（想想任何东西的前身）？

我还尝试将图像加载为精灵，没有任何区别。

我只是项目的一半。所以会及时添加很多图像，我不能有这么多的延迟..

任何 halp 都会得到很多回报！

提前致谢

# java - 在 strings.xml 中更改字体类型

> ID：13380885
> 
> 赞同：0
> 
> 时间：2012-11-14T14:36:49.790
> 
> 标签：java, android, xml, fonts

好的，所以我熟悉如何更改字体类型等以进行 android 开发。但是，我找不到用这个例子做的方法。

**string.xml 的代码**...

```
<string-array name="help_labels">
    <item> item 1</item>
    <item> item 2</item>
    <item> item 3</item>
    <item> item 4</item>
</string-array>
<string-array name="help_txt">
    <item> item 1 description: blah blah blah blah</item>
    <item> item 2 description: blah blah blah blah</item>
    <item> blah blah blah blah</item>
    <item> blah blah blah blah</item>
</string-array> 
```

**xml布局...**

```
<TextView
    android:text="TextView"
    android:id="@+id/helpDetailText"
    android:cacheColorHint="#00000000"
    android:background="@layout/rectangle_border"
    android:textColor="@color/black1"
    android:padding="10dp"
    android:textSize="17.0sp"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
</TextView> 
```

**Java代码..**

```
public static final String HELP_TEXT = "helpText";
item = getIntent().getExtras().getSerializable(HELP_TEXT);
    TextView helpDetailText = (TextView) findViewById(R.id.helpDetailText);
    if (item != null) {
        if (isHtmlHelpText) {
            helpDetailText.setText(Html.fromHtml(item.toString()).toString());
        } else {
            helpDetailText.setText(item.toString());
        }
    } 
```

**我正在尝试做的..**

所以基本上标签会导致每个项目的详细信息页面。我似乎找不到在描述中更改字体类型的方法。我想在每个段落之前用粗体标题组织段落。这看起来很简单（而且可能很简单），但我想不通。我尝试了`html`标签（`<b> label </b>`），但也没有用。

# plsql - 使用另一个普通（2NF）表的行创建（非第一范式）对象表

> ID：13380887
> 
> 赞同：0
> 
> 时间：2012-11-14T14:36:51.117
> 
> 标签：plsql

挑战：

来自一个名为 CARS_TABLE 的表，其中包含两列 ID 和 Model，信息如下： 
1 Ferrari
2 Audi
3 Mustang
创建另一个表（在 **本** **例**中名为 CARS_OBJECTS_TABLE）后， 
只有一个列是对象类型，我已经完成了下面的代码...
/
CREATE TYPE CAR_OBJECT AS OBJECT
    (ID number,
    Model varchar2(30))
/
CREATE TABLE Cars_Object_Table(
    Car_Column CAR_OBJECT)

-- 现在的挑战是获取两列，ID 和模型， 
第一个表 CARS_TABLE，放入对象列 Car_column 
第二个表CARS_OBJECT_TABLE。 

到目前为止，我已经提出了以下内容，它不会产生错误， 
但也不会填充第二个表的对象列。

CREATE TYPE CAR2 UNDER CAR (
    IDs number,
    Models varchar2(30),
DECLARE
    Car_Object CAR2;
    cursor importData is select * from cars_table;
BEGIN
    open importData; **如果** importData%found 则
    循环
    将 importData 提取到 CAR2 (IDs, Models)         然后         插入 Cars_Object_Table             值CAR2 (IDs, Models); **else**         exit;     end  **if** ;
     ******结束循环；
    关闭导入数据；
结尾;
/

有什么想法吗？ 

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:38:44.483

您可以使用一条`insert .. select`语句在 SQL 中执行此操作。但是，您必须首先将您的 cars_table 数据选择到 car_objects 中，然后再插入。

```
insert into cars_object_table
select car_object(id, model) from cars_table; 
```******

# ios - Info.plist 不在“信息”中 - 不再是选项卡

> ID：13380889
> 
> 赞同：0
> 
> 时间：2012-11-14T14:36:53.160
> 
> 标签：ios, xcode, info.plist

在 Xcode 中，我的 info.plist 文件突然不在我的目标设置的“信息”选项卡中了，我可以从我的支持文件文件夹中查看和编辑它，但它从信息选项卡中消失了，就像我说的那样，只有添加“文档类型”、“导出/导入的 UTI”和“URL 类型”的可能性。我怎样才能让我的 Info.plist 再次出现在这里？

（已安装最新的 Xcode，iOS 6 SDK）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T12:15:50.173

我在 Xcode 5 DP 中看到 Info 选项卡再次“填充”了 Info.plist，所以这可能是 Xcode 4 的问题。

# regex - 正则表达式匹配双连字符字符串

> ID：13380894
> 
> 赞同：1
> 
> 时间：2012-11-14T14:37:03.913
> 
> 标签：regex

给定以下正则表达式：

```
^((?:\d+\s)?\w+(?:\s\w+)?) 
```

提取第一个（最多）2个单词（如果有的话，前面有一个数字）效果很好，我怎样才能将它调整为包含连字符的单词？

我尝试`\-`在 first 之后添加`w+`，但只找到了连字符的前半部分并破坏了原始功能。

一些有效匹配的例子是：

*   1 两个
*   3 四五
*   六七八
*   九十

它们是地址字段的组成部分，因此，我想，在某处也可能有撇号，我该如何检查呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:41:55.207

使用`[\s\-]`代替`\s`

`[\s\-]`将匹配 a`space`或`-`..

所以应该是

```
^((?:\d+[\s\-])?\w+(?:[\s\-]\w+)?) 
```

上面的正则表达式不适用于您的有效匹配..您应该使用下面给出的正则表达式

* * *

`-`匹配由或空格分隔的多个单词的更好方法是

```
^\w+([\s\-]\w+){0,2}$ 
```

# android - 地图未显示在 Android 应用程序中

> ID：13380895
> 
> 赞同：0
> 
> 时间：2012-11-14T14:37:09.610
> 
> 标签：android, google-maps, android-asynctask, android-mapview

我有一个使用谷歌地图视图的应用程序。该代码在我的旧设备 android 2.1 上运行良好，但在我的 htc one x 运行 android 4 上，我不得不对其进行异步以避免主线程上的网络异常。

地图视图显示敌人大约一秒钟，然后它就崩溃了。该错误包含一个异常，该异常引用了未调用 Looper.prepare() 的线程。任何想法我如何解决它谢谢。

这是例外，我将在下面发布源代码。

```
11-14 13:29:31.025: W/dalvikvm(20404): threadid=15: thread exiting with uncaught exception (group=0x40a7d228)
11-14 13:29:31.025: E/AndroidRuntime(20404): FATAL EXCEPTION: AsyncTask #4
11-14 13:29:31.025: E/AndroidRuntime(20404): java.lang.RuntimeException: An error occured while executing doInBackground()
11-14 13:29:31.025: E/AndroidRuntime(20404):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at java.lang.Thread.run(Thread.java:864)
11-14 13:29:31.025: E/AndroidRuntime(20404): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
11-14 13:29:31.025: E/AndroidRuntime(20404):    at android.os.Handler.<init>(Handler.java:121)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at android.widget.ZoomButtonsController$2.<init>(ZoomButtonsController.java:170)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at android.widget.ZoomButtonsController.<init>(ZoomButtonsController.java:170)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at com.google.android.maps.MapView.createZoomButtonsController(MapView.java:1444)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at com.google.android.maps.MapView.setBuiltInZoomControls(MapView.java:1498)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at com.carefreegroup.GetClientDirections.getRoute(GetClientDirections.java:173)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at com.carefreegroup.GetClientDirections$AsyncGetRoute.doInBackground(GetClientDirections.java:87)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at com.carefreegroup.GetClientDirections$AsyncGetRoute.doInBackground(GetClientDirections.java:1)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-14 13:29:31.025: E/AndroidRuntime(20404):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

.

```
public class GetClientDirections extends MapActivity {

    private MapController mapController;
    private MapView mapView;

    private List<Overlay> mapOverlays;
    private StringBuffer response = null;
    private static final String TAG = GetClientDirections.class.getSimpleName();
    private double lon;
    private double lat;
    private JSONArray routes = null;
    private JSONObject bounds = null;
    private JSONObject northeast = null;
    private JSONObject anonObject;
    private JSONObject overViewPolyline;
    private String stringUrl;
    private String polyPoints;
    Context context;
    private String endAddr;
    private String startAddr;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mapview);

        context = this;
        startAddr = "wf120lj";
        endAddr = "wf27ar";

                StringBuilder sb = new StringBuilder();
                sb.append("http://maps.google.com/maps/api/directions/json?origin=");
                sb.append(startAddr);
                sb.append("&destination=");
                sb.append(endAddr);
                sb.append("&sensor=false");

                stringUrl = sb.toString();
                Log.e(TAG, "url = " + stringUrl);

                AsyncGetRoute agr = new AsyncGetRoute();
                agr.execute();

    }// end of onCreate

    private class AsyncGetRoute extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {

            getRoute();
            return null;
        }

    }

    public void getRoute() {

        response = new StringBuffer();
        URL url = null;
        try {
            url = new URL(stringUrl);
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        HttpURLConnection httpconn = null;
        try {
            httpconn = (HttpURLConnection) url.openConnection();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        try {
            if (httpconn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                // Log.e(TAG,"response code OK ");
                BufferedReader input = new BufferedReader(
                        new InputStreamReader(httpconn.getInputStream()), 8192);
                String strLine = null;

                while ((strLine = input.readLine()) != null) {
                    // Log.e(TAG,""+strLine);
                    response.append(strLine);
                }
                input.close();
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        String jsonOutput = response.toString();
        Log.e(TAG, "jsonOutput = " + jsonOutput);

        JSONObject results = null;
        try {

            results = new JSONObject(jsonOutput);

            routes = results.getJSONArray("routes");

            anonObject = routes.getJSONObject(0);
            bounds = anonObject.getJSONObject("bounds");
            overViewPolyline = anonObject.getJSONObject("overview_polyline");
            polyPoints = overViewPolyline.getString("points");
            Log.e(TAG, "overview_polyline  = " + overViewPolyline);
            Log.e(TAG, "points  = " + polyPoints);

            northeast = bounds.getJSONObject("northeast");

            lat = (Double) northeast.get("lat");

            lon = (Double) northeast.get("lng");

            Log.e(TAG, "lon/lat = " + lon + " " + lat);

        } catch (NumberFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        List<GeoPoint> list = decodePoly(polyPoints);

        mapView = (MapView) findViewById(R.id.cfmapview);
        mapView.setBuiltInZoomControls(true);
        mapView.setEnabled(true);
        mapView.setSatellite(true);
        mapController = mapView.getController();
        mapController.setZoom(10);

        mapOverlays = mapView.getOverlays();

        mapOverlays.add(new RoutePathOverlay(list, getApplicationContext()));
        mapController.animateTo(new GeoPoint(list.get(0).getLatitudeE6(), list
                .get(0).getLongitudeE6()));

        mapView.invalidate();

    }// end of getRoute

    private List<GeoPoint> decodePoly(String encoded) {

        List<GeoPoint> poly = new ArrayList<GeoPoint>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                    (int) (((double) lng / 1E5) * 1E6));
            poly.add(p);
        }

        return poly;
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:40:26.933

您不应该在 中更新视图`doInBackground()`，您需要在`onPostExecute()`那里覆盖和更新您的 MapView。将`getRoute()`方法一分为二。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:40:16.057

您在非 ui 线程中使用 getRoute() 方法。MapView 应该在 UI 线程中更新。

# c# - VS2012无法创建资源文件

> ID：13380900
> 
> 赞同：1
> 
> 时间：2012-11-14T14:37:22.170
> 
> 标签：c#, asp.net, visual-studio, multilingual

我正在尝试为页面生成本地资源文件。我成功生成了一些，但是其中一个页面没有生成资源文件，在输出中显示一条消息：“开始创建资源内容并将'元'属性添加到服务器控件和指令。找不到资源编写器。完成创建资源内容并添加“元”属性。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:20:42.023

App_LocalResources 文件夹已存在于父文件夹中，但已从项目中排除，因此它没有生成 resx 文件。我所要做的就是将文件夹重新包含到项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:42:18.297

*尝试在web.config*中添加/更改*全球化*属性，然后验证。

 *```
<system.web>
  <globalization enableClientBasedCulture="true" culture="auto" uiCulture="auto"/>
</system.web> 
```

希望这可以帮助！*

# cdn - OpenStack Swift 是否有按区域位置重定向客户端的模块？

> ID：13380902
> 
> 赞同：1
> 
> 时间：2012-11-14T14:37:25.160
> 
> 标签：cdn, region, openstack, openstack-swift

我目前正在使用 OpenStack Swift，我的期望是部署一个多区域集群。例如 swift 集群的一个节点将部署在美国，一个节点将部署在欧盟。

swift-proxy 中是否有模块或选项可以按区域位置重定向客户端？

如果不可能，您还建议什么其他解决方案？我应该开发自己的代理服务器，将客户端重定向到最近的节点（使用 geoloc/maxmind 等）吗？

资源：

*   [配置多区域集群](http://www.mirantis.com/blog/configuring-multi-region-cluster-openstack-swift/)
*   [代理服务器配置](http://docs.openstack.org/trunk/openstack-object-storage/admin/content/proxy-server-configuration.html)

**编辑**：Openstack 的一位贡献者回答我，Git 存储库中尚不存在地理分布的 Swift 集群的代码。我在资源中发布的链接是一堆建议的更改。Swift 中没有代码可以进行这种重定向。我需要编写一个 WSGI 中间件并将其粘贴到代理服务器的中间件管道中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:25:11.877

不完全满足您的需求，但正如您所知，openstack 有一个侧面项目[keystone](https://github.com/openstack/keystone)，其中端点与区域信息一起存储。如果您想编写自己的实现，这可以作为一个起点。此外，由于您的任务中有一个 cdn 标签，因此有一个名为[sos](https://github.com/dpgoetz/sos)的项目，使 openstack swift 可以作为 cdn 服务器工作。希望这些对您的实施有所帮助。

# python - ValueError：时间数据 '%Y-%m-%d %H:%M:%S' 与格式 '2012-11-14 14:32:30' 不匹配

> ID：13380903
> 
> 赞同：13
> 
> 时间：2012-11-14T14:37:31.193
> 
> 标签：python, datetime

我正在尝试通过使用格式字符串的方法将字符串转换`'2012-11-14 14:32:30'`为`datetime.datetime`对象。`datetime.datetime.strptime``'%Y-%m-%d %H:%M:%S'`

这样做，我得到一个错误：

```
ValueError: time data '%Y-%m-%d %H:%M:%S' does not match format
 '2012-11-14 14:32:30' 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-14T14:39:03.927

正确的语法是：

```
datetime.strptime('2012-11-14 14:32:30', '%Y-%m-%d %H:%M:%S') 
```

所以首先是字符串，然后是格式。

大声朗读：

```
ValueError: time data '%Y-%m-%d %H:%M:%S' does not match format '2012-11-14 14:32:30'
ValueError: time data '2012-11-14 14:32:30' does not match format '%Y-%m-%d %H:%M:%S' 
```

# ios - 如何在显示 PIN 信息时设置两个衬里文本

> ID：13380905
> 
> 赞同：0
> 
> 时间：2012-11-14T14:37:51.137
> 
> 标签：ios, objective-c, ios5, maps, mapkit

我正在创建 iPhone 应用程序，在其中显示我的办公室位置及其完美运行。

对于地图，我遵循[了这个](http://www.edumobile.org/iphone/iphone-programming-tutorials/mapkit-example-in-iphone/)。

在链接上，我的代码如下。

```
DisplayMap *ann = [[DisplayMap alloc] init]; 
ann.title = @" Kolkata";
ann.subtitle = @"Mahatma Gandhi Road"; 
```

我想要的是如下的字幕。

```
Line 1
Line 2
Line 3 
```

我怎么能这样做？

请有任何想法或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:05:54.203

地图的默认样式只支持标题和副标题。

您不能将多个字幕用于固定注释。

请查看Apple 提供的[示例代码。](http://developer.apple.com/library/ios/#samplecode/WeatherMap/Introduction/Intro.html)

# html - 使用 CSS 隐藏仅包含空格的元素

> ID：13380906
> 
> 赞同：26
> 
> 时间：2012-11-14T14:37:53.127
> 
> 标签：html, css, hide, pseudo-class

我试图在自动生成的 HTML 文档中隐藏以下元素：

```
 <p id="sitspagedesc" class="sitspagedesc">

    </p> 
```

在某些页面中，`<p>`标签将包含一个内部值，但在其他页面中，它只能包含空格，如示例所示。我需要找到一种隐藏它的方法，以便仅使用 CSS 将其隐藏，因为更改 HTML 不是一种选择。

我试图隐藏它使用

```
.sitspagedesc:empty
{
display:none;
} 
```

但这不起作用，大概是由于元素包含的空间。

有没有人有什么好主意？

谢谢 ：）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T14:48:18.627

我不认为你可以用纯 CSS 来做到这一点。

但是，只需一点 JavaScript，您就可以做到。

```
var allParas = document.getElementsByTagName('p');
//filter by class name if desired...
for(var i=0;i<allParas.length;i++){
  if(allParas[i].getElementsByTagName('*').length == 0){
    allParas[i].style.display = 'none';
  }
} 
```

如果您可以访问 jQuery，则使用其内置选择器进行过滤会更容易一些。

```
$('p.sitspagedesc').each(function(){
  if($(this).children().length == 0){
    $(this).hide();
  }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-21T20:24:43.433

如果希望模仿`:empty`选择器的功能，但忽略空格，则接受的答案（由[scunliffe](https://stackoverflow.com/users/6144/scunliffe)）不太有效。它只检查子元素，这并不直接考虑所选元素内的文本。例如，`<p>Hello World!</p>`将被视为空，因为它没有子元素，即使它确实包含非空白文本。

我的解决方案使用[jQuery.trim()](https://api.jquery.com/jQuery.trim/)函数从[.text()](http://api.jquery.com/text/)值中删除前导和尾随空格，该值包含所选元素及其后代的组合文本内容。因此，如果所选元素不包含非空白文本和子元素，则它会被隐藏。与 :empty 选择器一样，HTML 注释不计为内容，因为它们不会反映在 .text() 或 .children() 值中。

```
$('p.sitspagedesc').each(function(){
    if($.trim($(this).text()) == '' && $(this).children().length == 0){
        $(this).hide(); 
    }
}); 
```

[请参阅https://jsfiddle.net/TNTitan89/crejkbxq/](https://jsfiddle.net/TNTitan89/crejkbxq/)上的小提琴。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T14:47:50.547

选择`:empty`器确实非常严格。包含空格的元素不被认为是空的。所以有两种解决方案

1.  修改输出。修剪您输出的值或最小化 HTML，以便删除这些空格。甚至更好：根本不渲染这些元素。我认为这是最好的选择，因为它既可以最大限度地减少流量，又可以为您提供无需 Javascript 即可运行的解决方案。
2.  使用 Javascript 来查找这些元素。我不知道可以让您轻松找到这些元素的技巧，因此您可能必须遍历所有元素，搜索您认为为空的元素并为这些元素添加一个类。这可能非常慢，尤其是在低端设备上。此外，它只会在脚本运行后隐藏元素，因此在页面加载时，元素将在短时间内可见，直到它被隐藏。很明显，这不是理想的解决方案。

也许你可以将两者结合起来。选择`:empty`器是 CSS3 选择器，IE8 及之前的版本尚不支持，因此 Javascript 后备对于这些浏览器可能是一个好主意，除非您可以修复服务器端脚本，以便根本不呈现空元素，或者在渲染期间给定您的特殊课程，因此不需要 Javascript。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-20T10:03:37.537

答：**还没有，但已经起草了。**

[https://drafts.c​​sswg.org/selectors-4/#the-blank-pseudo](https://drafts.csswg.org/selectors-4/#the-blank-pseudo)

...而且——至少对于 Mozilla 来说——已经有一个前缀实现... `:-moz-only-whitespace`：

[http://jsfiddle.net/peayLrv3/](http://jsfiddle.net/peayLrv3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T14:43:51.630

没有办法检测纯 CSS 中的空元素（到目前为止）。如果 Javascript 不是一个选项，您可以在服务器端做些什么来在 HTML 到达浏览器之前对其进行操作吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-31T04:07:05.050

这是我刚刚使用 jQuery 1.5.x 为客户端实现的解决方案 - 您可能需要调整`//skip empty tags but which are valid`正则表达式字符串。

```
$('*:only-child:empty').each(
    function(index) {
        var currentElement = $(this);
        // skip singleton tags
        if(/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i.test(currentElement.get(0).tagName) == true) {
                return
        }
        // skip empty tags but which are valid
        if(/^(?:textarea)$/i.test(currentElement.get(0).tagName) == true) {
                return
        }
        while (currentElement.parent().children().length == 1) {
            currentElement = currentElement.parent();
        }
        // so 0 or more children for the parent then we hide it
        // we will never have more then 0 children though the :empty takes care of that
        console.log('hidding: ' + currentElement);
        currentElement.hide()
    }
); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-19T14:52:52.130

虽然不是标准，但 Firefox 有“ [:-moz-only-whitespace](https://developer.mozilla.org/en-US/docs/Web/CSS/:-moz-only-whitespace) ”。

此外，对于一些“未来的证明”，[css-tricks](http://css-tricks.com/almanac/selectors/b/blank/)提到了一个`:blank`选择器，它将成为 CSS 选择器级别 4 草案的一部分。虽然当前没有浏览器支持它，但这是一种可能性。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-10-11T16:16:09.773

CSS：

```
.sitspagedesc:empty
{
display:none;
} 
```

jQuery：

```
$('.sitspagedesc').html(function(){
// empty element
return $.trim($(this).html());
}); 
```

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2015-01-23T21:25:10.647

你可以使用：

```
p.sitspagedesc {
  content: " "; 
  display: none;
} 
```

除非你在那里随机有多个空格......

# java - 按字母顺序排序复杂对象的arraylist

> ID：13380908
> 
> 赞同：8
> 
> 时间：2012-11-14T14:37:59.607
> 
> 标签：java, sorting, object, collections, alphabetical

我知道`Collections.sort(myArrayList)`当它们是字符串时可以按字母顺序对数组列表进行排序，但是当它们是更复杂的东西时，例如包含两个或多个变量的数据对象，包括`String`. 那么有没有办法对它们进行排序？

如果没有办法，`Collections`那么我可以想象制作一个 for 循环或标准排序算法来查看每个对象的字符串变量并在数组中移动对象的索引。

但我主要想知道我是否忽略了一些关于`Collections`方法的东西

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-14T14:39:13.000

使用[以 Comparator 作为第二个参数的函数](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)。

Il 允许您传递 Comparator 的实例以根据您的需要进行排序。请注意，[Comparator 的 javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Comparator.html)包含有关构建比较器的指南。

如果仅在本地使用，您可以将比较器定义为匿名类。这是一个示例，我根据其中一个字段对对象进行排序，该字段是 String ：

```
Collections.sort(groupResults, new Comparator<ProductSearchResult>() {
    public int compare(ProductSearchResult result1, ProductSearchResult result2) {
        return result1.product.getRsId().compareTo(result2.product.getRsId());
    }
}); 
```

或者，您也可以让您的类实现[Comparable](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Comparable.html)接口，但这只有在您可以定义自然（明显）顺序时才有意义。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-14T14:54:41.193

我将创建一个实现 Comparator 接口的内部类：

```
public class Car {
public double horsePower;

class CarHorsePowerComparator implements Comparator<Car> {
    @Override
    public int compare(Car car1, Car car2) {
        return Integer.valueOf(car.horsePower).compareTo(Integer.valueOf(car2.horsePower))          }
    }
} 
```

现在，当您想按马力对汽车列表进行排序时：

```
List<Car> list = new ArrayList<Car>(myCars); //your Car list
Collections.sort(list, new CarHorsePowerComparator()); 
```

# string - 如何将字符串拆分为 TCL 中的单词列表，忽略多个空格？

> ID：13380914
> 
> 赞同：6
> 
> 时间：2012-11-14T14:38:04.410
> 
> 标签：string, split, tcl

基本上，我有一个由多个空格分隔的单词组成的字符串。然而，问题是，可以有多个空格，而不仅仅是一个分隔单词。这就是为什么`[split]`不做我想做的事：

```
split "a    b" 
```

给了我这个：

```
{a {} {} {} b} 
```

而不是这个：

```
{a b} 
```

搜索 Google，我[在 Tcler 的 wiki 上找到了一个页面](http://wiki.tcl.tk/1499 "【分裂】讨论")，其中用户或多或少地提出了相同的问题。

一种建议的解决方案如下所示：

```
split [regsub -all {\s+} "a    b" " "] 
```

这似乎适用于简单的字符串。但是一个测试字符串，例如`[string repeat " " 4]`（使用字符串重复，因为 StackOverflow 去除了多个空格）将导致`regsub`返回“”，`split`它将再次拆分`{{} {}}`为一个空列表而不是一个空列表。

另一个建议的解决方案是这个，强制将给定字符串重新解释为列表：

```
lreplace "a   list   with many   spaces" 0 -1 
```

但是，如果我从 TCL 中了解到一件事，那就是您永远不应该`l`在字符串上使用列表函数（以 开头）。事实上，这个会阻塞包含特殊字符（即 { 和 }）的字符串：

```
lreplace "test    \{a b\}" 
```

返回`test {a b}`而不是`test \{a b\}`（这将是我想要的，每个以空格分隔的单词都拆分为结果列表的单个元素）。

另一种解决方案是使用“过滤器”：

```
proc filter {cond list} {
    set res {}
    foreach element $list {if [$cond $element] {lappend res $element}}
    set res
} 
```

然后你会像这样使用它：

```
filter llength [split "a   list   with many   spaces"] 
```

再次，同样的问题。这将调用`llength`一个可能包含特殊字符（同样是 { 和 }）的字符串 - 传递它“\{ab\}”将导致 TCL 抱怨“列表中不匹配的左大括号”。

我设法通过修改给定的函数来让它工作，`filter`在 if 中的 $cond 前面添加一个 {*}，所以我可以将它与`string length`而不是一起使用`llength`，这似乎适用于我尝试使用的每个可能的输入到目前为止。

这个解决方案现在可以安全使用吗？它会不会因为我到目前为止没有测试过的一些特殊输入而窒息？或者，是否有可能以更简单的方式做到这*一点*？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-14T15:49:18.687

最简单的方法是使用`regexp -all -inline`选择并返回所有单词。例如：

```
# The RE matches any non-empty sequence of non-whitespace characters
set theWords [regexp -all -inline {\S+} $theString] 
```

如果您将单词定义为字母数字序列，则将其用于正则表达式术语：`{\w+}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-11T11:59:24.953

**您可以改用正则表达式：** 来自[tcl wiki split](https://wiki.tcl-lang.org/page/split)：

**按空格分割：陷阱**

```
split { abc def  ghi}
{} abc def {} ghi 
```

通常，如果您按空格分割并且不想要那些空白字段，那么您最好这样做：

```
regexp -all -inline {\S+} { abc def  ghi}
abc def ghi 
```

# routing - 如何在asp.net mvc 4中设计单段路由结构以获得更好的性能

> ID：13380925
> 
> 赞同：1
> 
> 时间：2012-11-14T14:38:30.303
> 
> 标签：routing, asp.net-mvc-4

对于预期流量为中到低的网站，我已经使用单个控制器“产品”跟踪 url/route 结构。

1.  website.com/about
2.  website.com/faq
3.  website.com/feedback
4.  website.com/product-name
5.  website.com/product/list

对于第四条路线，“website.com/xyz”之后的任何内容都会被路由到“详细信息”操作。

公共 ActionResult 详细信息（字符串名称）{ }

我希望“产品名称”成为网站的一级公民。因此，对于任何单段路由（关于、隐私等），我必须在“产品名称”路由之前为每个操作添加一个路由。将来我可能会添加更多单段路线，例如“website.com/newaction”

产品详细信息和列表是常用操作，并且由于路由是按顺序评估的，这可能会导致频繁路由的性能问题？

我做得对吗？有没有更好的方法？或者对于常规到低流量的网站来说，为每个频繁操作的请求评估 10 条左右的路线是可以的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:11:15.090

10条路线不会影响性能，所以不用担心。前三个路由可以归为一个（假设它们都由 HomeController 处理）：

```
routes.MapRoutes(null, "{action}", 
   { action = "Index", controller = "Home" },
   { action = "index|about|faq|feedback" }); 
```

# c# - 如何将列表或字典类型作为单个变量存储到 SQL 中？

> ID：13380933
> 
> 赞同：2
> 
> 时间：2012-11-14T14:39:03.957
> 
> 标签：c#, sql, types, sqldatatypes

我需要在类中使用列表或字典等数据类型。所有这些数据都需要存储到 SQL 中。

是否可以直接将它们与 SQL 一起使用，或者我是否必须将它们转换为其他数据类型（如字符串）才能与 SQL 一起使用？

问题是我不能保证任何符号永远不会在数据中使用，所以我不知道如何分离数据以将它们从字符串传输到列表。

例如，我需要使用的数据是：`Dictionary<string, int> topics;`字符串键中可以有任何内容。如何将其作为一个变量存储到 SQL 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T14:40:22.423

您可以在 SQL Server 中存储对象的序列化 (XML) 版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T23:11:58.313

您可以将字典转换为数据表并将其作为表参数传递给存储过程。

# php - 注意：未定义的偏移量：0

> ID：13380934
> 
> 赞同：3
> 
> 时间：2012-11-14T14:39:04.957
> 
> 标签：php

我一直在研究一些涉及 cURL 操作的应用程序，然后抓取特定 URL 的内容。

并且在 Scraping 之后几乎没有计算/计算。

我现在面临的问题与未定义的数组索引有关。

以下是一些面临类似问题的功能：

{注意：未定义的偏移量：D:\xampp\htdocs\Alps-Phase2\alps\include\alpsOP\scrap-process-request2.php 第 263 行中的 0}

还有更多类似的功能：

```
function getDomainName($objScrap)
 {
try
{
    $result = $objScrap->getDomainName();

    return $result;  //Notice: Undefined offset: 0 
}
catch( Exception $e)
{
    echo "Error in getDomainName !";
    return FALSE;
}

  }

  function getDataForDomainName($objScrap)
  {
try
{
    $result = $objScrap->checkForKeywordInDomain();

    return $result[0];    // Notice: Undefined offset: 0 
}
catch( Exception $e)
{
    echo "Error in getDataForDomainName !";
    return FALSE;
}
 }

function getDensityForDomainName($objScrap){
try
{
    $result = $objScrap->getDomainDensity();
    return $result[0];        // Notice: Undefined offset: 0 
}
catch( Exception $e)
{
    echo "Error in getDensityForDomainName !";
    return FALSE;
}
  } 
```

一些调用的函数定义：

```
 function getDomainDensity()
  {
    $result=$this->getDomainName();
    return $this->getKeywordDensity($result);
  }
   function getDomainName()
  {
    preg_match($this->_regExpDomain,$this->_url,$match);

    if($match != NULL)
    return $match[2];
    else
    return array(
    0=> 'Please check URL '.$this->$_url.' [Domain Name]',
    'error' => 'Please check URL '.$this->$_url.' [Domain Name]'
                            );
  }

   function getKeywordDensity(&$subject)
    {
    $splitKeywordCountTotal_len=0;
    $splitKeywordCount = array();
    $resultArray = array();

      for($count_i=0;$count_i<count($this->_keywords);$count_i++)
        {

        $splitKeyword = $this->splitKeyword($this->_keywords[$count_i]);

        $splitKeywordCount=0;
        $splitKeywordCount = $this->prepareResultArray($subject,NULL,$splitKeyword);

        $matchedKeywordCharacterCount=0;
        $f=0;

        foreach ($splitKeywordCount as $val=>$key)
        {
            $splitKeywordCount[$f][2]=strlen($key[0]);

            $splitKeywordCount[$f][3]=$key[1]*strlen($key[0]);
            $matchedKeywordCharacterCount=$matchedKeywordCharacterCount+$splitKeywordCount[$f][3];
            $f++;

        }

        $totalWordsInVisibleContent = $this->getNumberOfWordsInSubject($subject);
        $f=0;
        $totalWordsInVisibleContent_len=0;
        foreach ($totalWordsInVisibleContent as $val=>$key)
        {
            $totalWordsInVisibleContent_len=$totalWordsInVisibleContent_len+strlen($key);
        }

        $splitKeywordCountTotal = 0;
        for($count_j=0;$count_j < count($splitKeywordCount);$count_j++)
        {
            $splitKeywordCountTotal = $splitKeywordCountTotal + $splitKeywordCount[$count_j][1];
            $splitKeywordCountTotal_len = $splitKeywordCountTotal_len + $splitKeywordCount[$count_j][2];

        }

        $resultArray[$count_i]      =   array();
        $resultArray[$count_i][0]   =   $this->_keywords[$count_i];
        $resultArray[$count_i][1]   =   $matchedKeywordCharacterCount/ ($totalWordsInVisibleContent_len);
        $resultArray[$count_i][2]   =   $splitKeywordCountTotal;
        $resultArray[$count_i][3]   =   $matchedKeywordCharacterCount;
        $resultArray[$count_i][4]   =   $totalWordsInVisibleContent;
        $resultArray[$count_i][5]   =   $splitKeywordCountTotal_len;
        $resultArray[$count_i][6]   =   $totalWordsInVisibleContent_len;

    }

    return $resultArray;
} 
```

此外，我计划为同一个应用程序运行 50 万个 URL。如果这些通知继续出现，我的应用程序将面临性能不佳的问题。

所以，伙计们，需要帮助来解决这个问题。

* ***很抱歉起草代码...论坛新手，知道如何使用这些构造.. :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:11:44.860

关闭 Html 错误

在顶部包括以下内容

```
error_reporting(E_ALL);
ini_set('display_errors', 'On');
ini_set('html_errors', 'Off'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-19T11:31:22.813

我今天就遇到了这样的问题！我使用**PHP7.3.5**，我得到了同样的错误，四处搜索我发现解决方案是：

**代替：**

```
try
{
    $result = $objScrap->checkForKeywordInDomain();
    return $result[0];    // Notice: Undefined offset: 0 
} 
```

**改成：**

```
try
{
    $result = $objScrap->checkForKeywordInDomain();

    if(isset($result[0])){
      return $result[0];
   }
} 
```

希望这可以帮助任何人`}else{`:)。

# python - 当窗口不在焦点时，pygame 捕获键盘事件

> ID：13380938
> 
> 赞同：2
> 
> 时间：2012-11-14T14:39:16.243
> 
> 标签：python, pygame, keyboard-events

我编写了一个简单的 python 脚本，可以控制操纵杆的光标。[此处](https://superuser.com/questions/496204/control-mouse-with-joystick-windows)记录了我了解其工作原理的方法。现在它完美无缺，但是一旦我启动脚本以使用操纵杆，鼠标就没有用了，因为每当有新的操纵杆事件出现时，我的 python 例程都会将值设置回其原始值。

因此，只要按下键盘的一个键，我就希望我的操纵杆事件被忽略。我遇到了该`pygame.key.get_pressed()`方法，但这似乎仅在 pygame 窗口处于焦点时才有效。我希望这个脚本在后台运行。我应该开始使用非 pygame 事件来收听键盘，还是有办法通过 pygame 跟踪类似于在后台识别的操纵杆事件的键盘事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:37:54.783

我希望 pygame 设置自己的“沙箱”，这样就很难检测到来自其窗口外的输入。您之前的问题表明您也在使用该`win32api`模块。我们可以使用它来检测全局按键。

在全局范围内检测按键的正确方法是使用[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990.aspx)设置键盘挂钩。不幸的是，win32api 没有公开该方法，因此我们将不得不使用效率较低的方法。

[GetKeyState](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646301%28v=vs.85%29.aspx)方法可用于确定键是按下还是按下。您可以不断检查某个键的状态，以查看用户最近是否按下或释放了它。

```
import win32api
import time

def keyWasUnPressed():
    print "enabling joystick..."
    #enable joystick here

def keyWasPressed():
    print "disabling joystick..."
    #disable joystick here

def isKeyPressed(key):
    #"if the high-order bit is 1, the key is down; otherwise, it is up."
    return (win32api.GetKeyState(key) & (1 << 7)) != 0

key = ord('A')

wasKeyPressedTheLastTimeWeChecked = False
while True:
    keyIsPressed = isKeyPressed(key)
    if keyIsPressed and not wasKeyPressedTheLastTimeWeChecked:
        keyWasPressed()
    if not keyIsPressed and wasKeyPressedTheLastTimeWeChecked:
        keyWasUnPressed()
    wasKeyPressedTheLastTimeWeChecked = keyIsPressed
    time.sleep(0.01) 
```

警告：与任何“while True sleep and then check”循环一样，此方法可能比等效的“设置回调并等待”方法使用更多的 CPU 周期。您可以延长`sleep`期间的长度来改善这一点，但关键检测将需要更长的时间。例如，如果您睡了整整一秒钟，那么在您按下一个键和操纵杆被禁用之间可能需要一秒钟的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:41:26.740

当您的窗口获得或失去焦点时，您会得到一个`ACTIVEEVENT`. 它`gain`和`state`属性告诉你你获得或失去了哪个状态。最简单的解决方案可能是在您的主事件循环中捕获这些事件并使用它们来跟踪您是否关注的天气。然后，如果您没有焦点，则可以忽略操纵杆事件。

# c# - Windows 应用程序 C# 字符串组合框

> ID：13380939
> 
> 赞同：3
> 
> 时间：2012-11-14T14:39:31.023
> 
> 标签：c#, winforms, string, visual-studio, combobox

我正在尝试在 Visual Studio 中制作一个 Windows 应用程序。

在 中`public Form1()`，我将一些项目添加到我的 ComboBox`SelectComboBox.Items.Insert(0, "Text");`并创建一个字符串 ex。`string NR0 = "__";`用一首特别的歌曲。

当我在 ComboBox 中选择了一个项目并单击一个选择时，我希望 Windows Media Player 播放顶部字符串（例如 NR0）中的特定歌曲。

我曾尝试在代码中为选择按钮创建一个字符串。`string ComboNow = "NR" + SelectComboBox.Items.Count.ToString();`然后用 . 更改 URL `Player.URL = @ComboNow;`。

但随后玩家认为 URL 是字符串的名称（例如 NR0）。

你有什么想法来解决这个问题。

谢谢

* * *

代码如下：

```
namespace Player
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            SelectComboBox.Items.Insert(0, "First song");
            string NR0 = "URL to song";

            SelectComboBox.Items.Insert(1, "Second song");
            string NR1 = "URL to song";
        }

        private void SelectButton_Click(object sender, EventArgs e, string[] value)
        {
            string ComboNow = "NR" + SelectComboBox.Items.Count.ToString();
            Player.URL = @ComboNow;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:50:53.940

您可以使用列表或数组：

```
private List<string> songs = new List<string>();
//...
SelectComboBox.Items.Insert(0, "First song");
songs.Add("URL to song");
//...
Player.URL = songs[SelectComboBox.SelectedIndex]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:50:19.557

由于您明确地将这些项目放入某些位置，因此我会执行创建字典之类的操作：

```
private Dictionary<int, string> Songs
{
    get
    {
        return new Dictionary<int, string>()
            {
                { 0, "url of first song" },
                { 1, "url of second song" }
            };
    }
} 
```

然后，您可以像这样获取 URL：

```
string playerURL = Songs[comboBox1.SelectedIndex]; 
```

请注意，这只会起作用，因为您是以特定顺序将项目放入组合框中，如果这不是您将来想要的，这将不适合您。

# nsis - 开始菜单/安装文件夹中的文件夹仍然存在，使用NSIS脚本卸载后？

> ID：13380940
> 
> 赞同：0
> 
> 时间：2012-11-14T14:39:34.893
> 
> 标签：nsis

我已经为 Java 项目编写了 nsis 脚本。一旦我点击了 uninstaller.exe

```
Start menu >all programs >my application 
```

所有文件都从安装位置成功删除。但问题是，STARTMENU/installation 文件夹中的文件夹仍然存在，单击卸载后。我不知道为什么会这样？我用过windows 7。

```
 DeleteRegKey HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\$(^Name)"
    Delete /REBOOTOK "$SMPROGRAMS\$StartMenuGroup\Uninstall $(^Name).lnk"
    Delete /REBOOTOK $INSTDIR\uninstall.exe 
```

我已经使用了上面的代码。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:04:37.290

删除目录的代码在哪里？`RMDir "$SMPROGRAMS\$StartMenuGroup"`

使用它也很重要，`RequestExecutionLevel`因此您不会遇到[兼容性问题](http://nsis.sourceforge.net/Shortcuts_removal_fails_on_Windows_Vista)...

# php - Android 连接 PHP 和 MySql 强制关闭

> ID：13380941
> 
> 赞同：-4
> 
> 时间：2012-11-14T14:39:36.310
> 
> 标签：php, android, mysql

我正在编写一个需要登录和注册的应用程序，所以我在网上查找了一些教程。我还购买了在线托管服务器来存储我的数据库。但是，我在运行应用程序时不断收到运行时错误。我已经抓了一整天了，仍然不知道问题所在。如果有人能给我一些提示或线索，我将不胜感激，谢谢。

日志猫错误

```
11-14 22:22:13.071: E/AndroidRuntime(12901): FATAL EXCEPTION: main
11-14 22:22:13.071: E/AndroidRuntime(12901): android.os.NetworkOnMainThreadException
11-14 22:22:13.071: E/AndroidRuntime(12901):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:509)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at com.example.trafficmaster.library.JSONParser.getJSONFromUrl(JSONParser.java:42)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at com.example.trafficmaster.library.UserFunctions.registerUser(UserFunctions.java:61)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at com.example.trafficmaster.RegisterActivity$1.onClick(RegisterActivity.java:55)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at android.view.View.performClick(View.java:4211)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at android.view.View$PerformClick.run(View.java:17267)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at android.os.Handler.handleCallback(Handler.java:615)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at android.os.Looper.loop(Looper.java:137)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at android.app.ActivityThread.main(ActivityThread.java:4898)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at java.lang.reflect.Method.invokeNative(Native Method)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at java.lang.reflect.Method.invoke(Method.java:511)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
11-14 22:22:13.071: E/AndroidRuntime(12901):    at dalvik.system.NativeStart.main(Native Method)
11-14 22:22:18.251: D/dalvikvm(12901): GC_CONCURRENT freed 357K, 11% free 12504K/13895K, paused 4ms+9ms, total 46ms
11-14 22:22:25.251: I/Process(12901): Sending signal. PID: 12901 SIG: 9 
```

我的注册主类

```
public class RegisterActivity extends Activity {
    Button btnRegister;
    Button btnLinkToLogin;
    EditText inputFullName;
    EditText inputEmail;
    EditText inputPassword;
    TextView registerErrorMsg;

    // JSON Response node names
    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR = "error";
    private static String KEY_ERROR_MSG = "error_msg";
    private static String KEY_UID = "uid";
    private static String KEY_NAME = "name";
    private static String KEY_EMAIL = "email";
    private static String KEY_CREATED_AT = "created_at";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);

        // Importing all assets like buttons, text fields
        inputFullName = (EditText) findViewById(R.id.registerName);
        inputEmail = (EditText) findViewById(R.id.registerEmail);
        inputPassword = (EditText) findViewById(R.id.registerPassword);
        btnRegister = (Button) findViewById(R.id.btnRegister);
        btnLinkToLogin = (Button) findViewById(R.id.btnLinkToLoginScreen);
        registerErrorMsg = (TextView) findViewById(R.id.register_error);

        // Register Button Click event
        btnRegister.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                new MyInnerClass().execute();

                String name = inputFullName.getText().toString();
                String email = inputEmail.getText().toString();
                String password = inputPassword.getText().toString();
                UserFunctions userFunction = new UserFunctions();
                JSONObject json = userFunction.registerUser(name, email, password);

                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        registerErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS);
                        if(Integer.parseInt(res) == 1){
                            // user successfully registred
                            // Store user details in SQLite Database
                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                            JSONObject json_user = json.getJSONObject("user");

                            // Clear all previous data in database
                            userFunction.logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));
                            // Launch Dashboard Screen
                            Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);
                            // Close all views before launching Dashboard
                            dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(dashboard);
                            // Close Registration Screen
                            finish();
                        }else{
                            // Error in registration
                            registerErrorMsg.setText("Error occured in registration");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:46:02.423

```
android.os.NetworkOnMainThreadException 
```

当您从主线程访问网络时会发生此异常。使用 AsyncTask 访问网络。

```
 private class MyInnerClass extends AsyncTask<String, Void, String> {
   @Override
   protected void onPreExecute() {
   super.onPreExecute();

   }

   @Override
   protected String doInBackground(String params) {

   return "Done";
   }

   @Override
   protected void onPostExecute(String result) {
   super.onPostExecute(result);
   }
   } 
```

从您的主 Activity调用`new MyInnerClass().execute();`，Android 将自动调用`onPreExecute()`. 此方法适用于您在网络访问之前要做的事情

网络相关的东西在里面完成`doInBackground()`，然后 Android 会调用`onPostExecute()`，结果将作为参数传递给这个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:42:22.417

您正在主线程上执行（可能很慢）网络操作。如果您的目标 SDK 是 11 (Honeycomb) 或更高版本，这将`NetworkOnMainThreadException`在 Honeycomb 或更高版本上抛出异常，因为此行为可能会阻塞 UI 并导致应用程序无响应。

您可以使用 an[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)来解决这个问题，将数据加载到其`doInBackground(..)`.

# c# - Bing Maps Windows Phone 上的图钉数量未知。我如何为他们每个人创建一个事件？

> ID：13380944
> 
> 赞同：2
> 
> 时间：2012-11-14T14:39:44.830
> 
> 标签：c#, windows, events, map, bing

我目前正在开发适用于 Windows Phone 的应用程序。它适用于 Bing 地图，并且我在地图上放置了多个具有不同存储属性的图钉。

我希望能够点击任何引脚，并打开一个显示引脚属性的新页面。

用户可以添加和删除引脚，因此它们的数量未知。那么，创建点击事件的最佳方式是什么？有没有办法动态创建 C# 代码？或者，我是否应该创建某种形式的“if”函数来检查每次点击屏幕时该位置是否有大头针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:04:04.737

```
I understand your problem. You want to click on pushpin and on that click event, you want to open a new page. Write the above code in PhoneApplicationPage_Loaded(). Here is the code..

private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
{
map1.Center = new GeoCoordinate(21.7679, 78.8718); //coordinates for location of India
map1.ZoomLevel = 5;

Pushpin puspin1 = new Pushpin();
puspin1.Location = new GeoCoordinate(21.7679, 78.8718);
puspin1.Background = new SolidColorBrush(Colors.Blue);
puspin1.MouseLeftButtonUp += new MouseButtonEventHandler(puspin1_MouseLeftButtonUp);
map1.Children.Add(puspin1);

}

void puspin1_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
    this.NavigationService.Navigate(new Uri("YourWindowName", UriKind.Relative));
} 
```

# neo4j - 如何以 graphML 格式定义索引？

> ID：13380945
> 
> 赞同：-1
> 
> 时间：2012-11-14T14:39:47.480
> 
> 标签：neo4j, gremlin, graphml

我将数据导出为 graphML 格式，并希望通过 gremlin 的 graphML.import() 函数将它们导入 neo4j。我需要创建索引来索引我所有的导入数据。甚至可以使用graphML格式吗？

我的导出 xml 如下所示：

```
<graphml xmlns="http://graphml.graphdrawing.org/xmlns"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns
        http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">

<key id="user" for="node" attr.name="user" attr.type="int" />
<key id="item" for="node" attr.name="item" attr.type="int" />
<graph id="G" edgedefault="directed">
....
</graph>
</graphml> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:04:51.280

不，GraphmML 不包含此内容。您可以在开始导入之前在您想要的字段上启用自动索引，以便他们记录您的更改？[http://docs.neo4j.org/chunked/snapshot/auto-indexing.html](http://docs.neo4j.org/chunked/snapshot/auto-indexing.html)

# php - 检查会话 - php 不打印

> ID：13380947
> 
> 赞同：-2
> 
> 时间：2012-11-14T14:39:52.560
> 
> 标签：php

```
<?php session_start();
$_SESSION['loggedIn'] = "no";
echo "Logged In: ". $_SESSION['loggedIn'];

if($_SESSION['loggedIn']=="yes"): 
    echo "logged in";
}
else{
    echo "not logged in";
}
?> 
```

我只是想检查会话“loggedIn”是否为是或否，但程序不打印任何内容。

为什么它不打印任何东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T14:41:43.167

您正在使用替代 if/then 以及常规语法。

```
if($_SESSION['loggedIn']=="yes"): 
```

应该

```
if($_SESSION['loggedIn']=="yes"){
    echo "logged in";
}
else{
    echo "not logged in";
} 
```

这是一个简单的语法错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:41:57.743

删除`:`后`if`放置`{`

改变

```
if($_SESSION['loggedIn']=="yes"): 
```

至

```
if($_SESSION['loggedIn']=="yes") { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:42:14.880

您已经使用冒号打开了 if：

```
if($_SESSION['loggedIn']=="yes"): 
```

将其更改为`{`

```
if($_SESSION['loggedIn']=="yes"){ 
```

用 if 打开 if 是有效的语法，`:`但您必须用`endif;`而不是关闭它`}`。

替代语法示例：

```
if($_SESSION['loggedIn']=="yes"):
    echo "logged in";
else:
    echo "not logged in";
endif; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:00:24.687

删除`:`或使用替代语法 [php 控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)

任何一个：

```
if($_SESSION['loggedIn']=="yes"){
    echo "logged in";
}
else{
    echo "not logged in";
} 
```

或者：

```
if($_SESSION['loggedIn']=="yes"):
    echo "logged in";    
else:
    echo "not logged in";
endif; 
```

# wysihtml5 - wysihtml5 编辑器 - 如何简单地将类添加到元素？

> ID：13380948
> 
> 赞同：3
> 
> 时间：2012-11-14T14:39:57.463
> 
> 标签：wysihtml5

我很喜欢[wysihtml5](https://github.com/xing/wysihtml5)，但我找不到任何关于向元素添加类这样简单的文档。

基本上我正在寻找的是一种允许对 blockquote 元素进行 2 种不同变化的方法：

blockquote.pull-left blockquote.pull-right

（每个类指定不同的样式属性）

所以理想情况下，我想创建 2 个额外的工具栏按钮，让我不仅可以使用 formatBlock 命令（使用 blockquote 元素包装选择），还可以指定 blockquote 的类。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:50:28.253

为了清楚起见，尝试将这样的自定义函数添加到单独的 custom.js 文件中：

```
wysihtml5.commands.custom_class = {
  exec: function(composer, command, className) {
    return wysihtml5.commands.formatBlock.exec(composer, command, "blockquote", className, new RegExp(className, "g"));
  },
  state: function(composer, command, className) {
    return wysihtml5.commands.formatBlock.state(composer, command, "blockquote", className, new RegExp(className, "g"));
  }
}; 
```

然后在你的工具栏中传递类名，假设类是“左拉”：

```
<a data-wysihtml5-command="custom_class" data-wysihtml5-command-value="pull-left">Pull left</a> 
```

您还必须将任何自定义类添加到“白名单”中，方法是转到 advanced.js 文件并将它们添加到类下，否则当您保存时这些类将被删​​除。

# c++ - 如何从不同的函数开始执行 c/c++ 中的程序，但不是 main()

> ID：13380960
> 
> 赞同：0
> 
> 时间：2012-11-14T14:40:39.023
> 
> 标签：c++, c, function, main

> **可能重复：**
> [程序执行是否总是从 C 中的 main 开始？](https://stackoverflow.com/questions/6897763/does-the-program-execution-always-start-from-main-in-c)

我想开始执行包含 2 个函数（不包括 main）的程序

```
void check(void)
void execute(void) 
```

我想从 check() 开始执行，在 c/c++ 中可以吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T14:42:01.420

你可以用一个简单的包装器来做到这一点：

```
int main()
{
    check();
} 
```

`main`由于标准明确指定为程序入口点，因此您无法以任何其他方式进行移植。

编辑评论：*永远不要这样做*。`check`在 C++中，您可以在静态初始化`main`期间滥用静态初始化，但您仍然不能`main`合法地从`check`. 你可以先跑`check`。如评论中所述，这在 C 中不起作用，因为它需要常量初始化程序。

```
// At file scope.
bool abuse_the_language = (check(), true);

int main()
{
    // No op if desired.
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T14:45:57.780

各种链接器有各种选项来指定入口点。例如。Microsoft 链接器使用[/ENTRY:function](http://msdn.microsoft.com/en-us/library/f9t8842e%28v=vs.110%29.aspx)：

> /ENTRY 选项将入口点函数指定为 .exe 文件或 DLL 的起始地址。

GNU 的 ld[在命令文件中使用 -e 或 ENTRY()](http://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_node/ld_24.html)。

不用说，修改入口点是一项非常高级的功能，您必须绝对了解它的工作原理。一方面，它可能会导致跳过加载标准库初始化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T14:42:49.183

```
int main()
{
    check();
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T14:44:00.773

调用`check`from`main`似乎是最合乎逻辑的解决方案，但您仍然可以探索使用`/ENTRY`为您的应用程序定义另一个入口点。请参阅[此处](http://msdn.microsoft.com/en-us/library/f9t8842e%28v=vs.80%29.aspx)了解更多信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T14:45:08.217

*尽管有一些方法可以在 main 之前执行一些*代码，但你不能从 main 以外的东西开始。

将代码放在静态初始化块中将使代码在 main 之前运行；但是，它不会是 100% 可控的。虽然您可以确保它在 main 之前运行，但您不能指定两个静态初始化块在它们都在 main 之前执行之前运行的顺序。

链接器和加载器都具有 main 的概念，作为 C / C++ 程序的共享“理解”开始；但是，有一些代码在`main`. 此代码负责程序的“设置环境”（例如设置`stdin`或`cin`）。通过将代码放在静态初始化块中，您实际上是在说，“嘿，您也需要这样做才能拥有正确的环境”。一般来说，这应该很小，可以独立于其他项目的执行顺序。

如果你需要在 main 之前按顺序执行两三件事，那么将它们变成适当的函数并在 main 开头调用它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-14T14:48:09.110

有一种人为的方法可以实现这一目标，但这只不过是一种黑客行为。

这个想法是创建一个包含主函数的静态库，并使其调用您的“检查”函数。链接器将在链接到您的“程序”时解析符号，并且您的“程序”代码本身确实没有 main。

不建议这样做，除非您有非常特殊的需求（一个突然想到的示例是 Windows 屏幕保护程序，因为 Windows SDK 附带的帮助程序库具有执行特定初始化的主要功能，例如解析命令行）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-14T14:56:41.497

编译器可能支持它。比如gcc，可以使用-nostartfiles和--entry=xxx来设置程序的入口点。默认入口点是_start，它将调用函数main。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-14T14:45:19.303

您可以通过在 main 启动之前创建一个对象来“拦截”对 main 的调用。构造函数需要执行你的函数。

```
#include <iostream>

void foo()
{
  // do stuff

  std::cout<<"exiting from foo" <<std::endl;
}

struct A
{
  A(){ foo(); };
};

static A a;

int main()
{
  // something
  std::cout<<"starting main()" <<std::endl;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-14T15:09:23.113

我找到了解决我自己问题的方法。我们可以简单地使用

```
#pragma startup function-name <priority>
#pragma exit function-name <priority> 
```

这两个 pragma 允许程序指定应该在程序启动时（在调用 main 函数之前）或程序退出（就在程序通过 _exit 终止之前）调用的函数。

指定的函数名必须是先前声明的不带参数并返回 void 的函数；换句话说，它应该被声明为：

```
void func(void); 
```

可选的优先级参数应该是 64 到 255 范围内的整数。最高优先级为 0。具有较高优先级的函数在启动时首先调用，最后在退出时调用。如果您不指定优先级，则默认为 100。谢谢！

# jquery - 预加载图像目录

> ID：13380964
> 
> 赞同：0
> 
> 时间：2012-11-14T14:40:52.247
> 
> 标签：jquery, preload

我想预加载一个包含图像的目录。

到目前为止，我正在使用此代码：

预加载.php

```
 <?php
function listImages($dir){
    $ffs = scandir($dir);
    foreach($ffs as $ff){
        if($ff != '.' && $ff != '..' && strstr($ff, '.png') || strstr($ff, '.jpg') || strstr($ff, '.gif') || strstr($ff, '.jpeg')){
            echo '"images/'.$ff;
            if(is_dir($dir.'/'.$ff)) listFolderFiles($dir.'/'.$ff);
            echo '", ';
        }
    }
}
echo '[ ';
listImages('images');
echo ']';
// output: ["image1.png", "image2.png"] etc.
?> 
```

页脚.php

```
<script type="text/javascript">
    // put contents of all_images.php file into variable 'images'

$.ajax({
  type: "GET",
  async: false,
  cache: false,
  url: "./preload.php",
  data: "getid=true",
  success: function(data){
  images=data;
  }
});

    // The variable 'images' now contains string of file names
    // needed to be preloaded.
    $.fn.preload = function() {
        this.each(function(){
            $('<img/>')[0].src = this;
        });
    }

</script>

<script type="text/javascript">
$(document).ready(function(){
$(images).preload();
</script> 
```

但它似乎不起作用。在萤火虫我得到`uncaught exception: Syntax error, unrecognized expression:`

如果我粘贴所有链接而不是“图像” `$(images).preload();` ，我不会收到错误消息，但我的图像也没有加载。

感谢任何帮助，因为我整天都坐在这里试图弄清楚。

更新#1

所以，现在我这样做：

```
$(document).ready(function(){
  $.getJSON("./preload.php?getid=true", function(data) {
    var images = [];
    $.each(data, function(i, val) {
      images[i] = new Image().src=val;`

        $.fn.preload = function() {
            this.each(function(){
                $('<img/>')[0].src = this;
            });
        }
        $(images).preload();
    });
  });
}); 
```

到目前为止没有错误，但图像仍然没有显示在萤火虫的“网络”选项卡中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T14:54:43.307

几个问题

尝试[getJSON](http://api.jquery.com/jQuery.getJSON/)

```
$(document).ready(function(){
  $.getJSON("./preload.php?getid=true", function(data) {
    var images = [];
    $.each(data, function(i, val) {
      images[i] = new Image().src=val;
    });
  });
}); 
```

# ruby-on-rails-3 - 从模型访问 Rails Helper 文件

> ID：13380965
> 
> 赞同：0
> 
> 时间：2012-11-14T14:40:58.930
> 
> 标签：ruby-on-rails-3, models, helpers

我正在尝试使用以下方法验证状态字段的输入：

```
include ActionView::Helpers
class Credentials < ActiveRecord::Base
    attr_accessible :license_number, ...:address_zip_code,

    ...

    validates :license_number,  presence: true, length: { minimum: 4 }
    ...
    validates_inclusion_of :current_practice_address_state, :in => state_list

end 
```

变量 state_list 是 helpers/credentials_helper.rb 中描述的数组

测试我遇到未定义局部变量错误的模型

```
$ bundle exec rspec spec/models/credentials_spec.rb
in `method_missing': undefined local variable or method `state_list' for #<Class:0x007f86a1844250> (NameError) 
```

助手类看起来像：

```
 module CredentialsHelper
        state_list = %w(AL AK...WY)
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:48:18.640

您的电话`include`必须在课堂内：

```
class Credentials < ActiveRecord::Base
  include ActionView::Helpers
  ...
end 
```

# asp.net - Facebook喜欢按钮分享错误的链接

> ID：13380969
> 
> 赞同：1
> 
> 时间：2012-11-14T14:41:12.360
> 
> 标签：asp.net, facebook, facebook-like

我在 2 个不同的页面中使用相同的 iframe 按钮，唯一的变化是文件名：

在此页面中，按钮可以正常工作并成功共享 how-openstack.aspx。 [http://www.dualtec.com.br/dualtec/webinar/how-openstack-mensagem.aspx](http://www.dualtec.com.br/dualtec/webinar/how-openstack-mensagem.aspx)

但是在这个页面中，按钮没有共享正确的链接，dualstack-handson.aspx [http://www.dualtec.com.br/dualtec/webinar/dualstack-handson-mensagem.aspx](http://www.dualtec.com.br/dualtec/webinar/dualstack-handson-mensagem.aspx)

任何想法？

# c# - EF 异常：字符串或二进制数据将被截断。该语句已终止。？

> ID：13380972
> 
> 赞同：55
> 
> 时间：2012-11-14T14:41:24.060
> 
> 标签：c#, sql-server, entity-framework, exception

我已经阅读了许多与此问题相关的帖子，但找不到答案。我正在尝试将大量数据从 Excel 加载到 SQL Server 中。数千条记录。我得到了这个例外：

> 字符串或二进制数据将被截断。该语句已终止。

显然有些值超出了数据库中的字段大小。该错误来自 SQL Server AFIK。

* * *

**我的问题 - 我怎么可能知道是什么记录和什么字段值导致了这个？**

EF异常中没有具体细节，除了我提到的那个。

任何帮助表示赞赏。

有些人要求提供代码片段，但实际上很简单，问题不在于代码：

```
// employees is a List<Employee> collection loaded from Excel
using (var context = new Entities())
{
    employees.ForEach(e => context.Employee.AddObject(e));
    context.SaveChanges();
} 
```

此外，使用**DbEntityValidationException**的建议方法（仅在 Entity Framework 5.0 中可用）不起作用，**catch**块没有捕获异常。

```
try
{
    ImportData();
}
catch (DbEntityValidationException ex)
{
    foreach (var item in ex.EntityValidationErrors)
    {
        //...
    }
} 
```

**到目前为止**，我发现的唯一解决方案是使用 SQL Server Profiler，并定义以下要监视的事件：****

 **![在此处输入图像描述](../Images/5f99aa5da04cb9b8c7ff508a4c826a14.png)

![在此处输入图像描述](../Images/bc64db01d71c3b04266a49d4be7e6ab1.png)

现在我可以看到电子邮件太长了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T14:58:10.660

```
catch (DbEntityValidationException ex)
{
    foreach (var item in ex.EntityValidationErrors)
    {
        //... inspect here 
    }
} 
```

您可以在 foreach 循环中找到所需的信息。

希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T15:02:37.193

你不能达到那个水平。SQL Server 拒绝整个查询。

我会根据您的数据库对字符串大小、日期格式等的约束，对数据进行一些预检查。

或者，您可以`TRIM`在尝试插入之前将原始数据中的每个字符串字段调整为相应的字段大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-13T06:10:51.387

You can check data *before* saving, using EF metadata, and raise appropriate error.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-09T14:34:34.653

不确定具体的截断，但这里有一个提示，当您遇到一个告诉您检查 EntityValidationErrors 的异常时。通常在调试时它不会让您看到该属性（除非您已经明确捕获）。但是，您可以打开快速手表并输入`$exception`. 现在您应该能够深入并找到该属性。您也可以只键入以下内容：

```
(System.Data.Entity.Validation.DbEntityValidationException)$exception 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-12T04:20:14.297

```
private static string FindLongStrings(object testObject)
    {
        foreach (PropertyInfo propInfo in testObject.GetType().GetProperties())
        {
            foreach (ColumnAttribute attribute in propInfo.GetCustomAttributes(typeof(ColumnAttribute), true))
            {
                if (attribute.DbType.ToLower().Contains("varchar"))
                {
                    string dbType = attribute.DbType.ToLower();
                    int numberStartIndex = dbType.IndexOf("varchar(") + 8;
                    int numberEndIndex = dbType.IndexOf(")", numberStartIndex);
                    string lengthString = dbType.Substring(numberStartIndex, (numberEndIndex - numberStartIndex));
                    int maxLength = 0;
                    int.TryParse(lengthString, out maxLength);

                    string currentValue = (string)propInfo.GetValue(testObject, null);

                    if (!string.IsNullOrEmpty(currentValue) && currentValue.Length > maxLength && lengthString!="max")
                        return testObject.GetType().Name + "." + propInfo.Name + " " + currentValue + " Max: " + maxLength;

                }
            }
        }
        return "";
    }

foreach (object insert in dtx.GetChangeSet().Inserts)
            {
                string result = FindLongStrings(insert);
                if (string.IsNullOrEmpty(result) == false)
                {
                    responseBuilder.Append(result);
                }
            } 
```

如果 responseBuilder 不为空，则它包含字段名称、允许的长度和错误消息。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-09-29T18:23:51.713

I have got that problem twice, and the problem is that when EF creates the table in the database, it sets `varchar(1)` to string attributes, so when i try to insert information it is not possible because of the length, I recommend you to check the fields in the table**

# php - PHP - 了解一个基本的类功能

> ID：13380976
> 
> 赞同：0
> 
> 时间：2012-11-14T14:41:54.370
> 
> 标签：php, class

如果我有以下 PHP 类示例设置...

```
class foo {
  public $x = 2;

  public function getX() {
    return $this->x;
  }

  public function setX($val) {
    $this->x = $val - $this->x;
    return $this;
  } 
}

$X = (new foo)->setX(20)->getX(); 
```

我怎么需要 ->getX(); 在对象启动过程结束时获得 18 的部分？为什么我根本无法隐藏公共 getX() 函数并编写...

```
$X = (new foo)->setX(20);
echo $X; // and show 18 without errors. 
```

相反，它会抛出一个错误并说......

```
Catchable fatal error: Object of class foo could not be converted to string in C:\... 
```

是不是`$this->x` 指大众`$x = 2`？我想我有点困惑为什么我们依赖 Public function `getX()`。提前感谢您的帮助理解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T14:45:27.867

`foo`因为你在做的时候返回了一个类的实例`return $this;`。如果您希望它像上面那样工作，那么您需要返回`$x`如下所示：

```
 public function setX($val) {
    $this->x = $val - $this->x;
    return $this->x;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T14:46:04.153

`echo $X`尝试输出对象。但是您的对象没有[魔法方法](http://www.php.net/manual/en/language.oop5.magic.php#object.tostring) `__toString()`，因此 PHP 无法确切知道在字符串上下文中使用对象时要输出**什么。**

例如，如果您将其添加到您的对象定义中：

```
public function __toString() {
   return $this->getX();
} 
```

`18`当你这样做时，你会“正确地”得到`echo $X`。

# matlab - 图像归一化

> ID：13380981
> 
> 赞同：2
> 
> 时间：2012-11-14T14:42:08.663
> 
> 标签：matlab, image-processing

我有 uint8 类的大小（2048X3072X3）的 RGB 图像，我想标准化 RGB 图像的绿色和红色通道。我写了以下代码：

```
 Image_rgb=imread('RGB.jpg');   %Reading RGB image
      Image_red = Image_rgb(:,:,1);   %Reading R channel of  image
      Image_green = Image_rgb(:,:,2); %Reading G channel of  image
      x = double(Image_green(:));  
      m = mean(x);  
      s = std(x);
      x = (x - m) / s;   % normalization of green channel 
```

但是在归一化之后，图像 x 的尺寸为 6291456x1 而不是 2048X3072。

谁能告诉我如何获得 2048X3072 尺寸的标准化图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T14:46:01.127

试试这个：

```
 x = double(Image_green);  
  m = mean(x(:));  
  s = std(x(:));
  x = (x - m) / s;   % normalization of green channel 
```

# python - SWIG Python - 包装一个需要指向结构的双指针的函数

> ID：13380982
> 
> 赞同：6
> 
> 时间：2012-11-14T14:42:09.220
> 
> 标签：python, pointers, swig

我正在包装一个包含结构的 C 库：

```
struct SCIP
{
//...
} 
```

以及创建这样一个结构的函数：

```
void SCIPcreate(SCIP** s) 
```

SWIG 从中生成一个 python 类`SCIP`和一个函数`SCIPcreate(*args)`。

当我现在尝试`SCIPcreate()`在 python 中调用时，它显然需要一个 type 参数，`SCIP**`我应该如何创建这样的东西？

或者我应该尝试使用自动`SCIP`调用的构造函数来扩展类`SCIPcreate()`？如果是这样，我会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T17:34:23.043

给定头文件：

```
struct SCIP {};

void SCIPcreate(struct SCIP **s) {
  *s = malloc(sizeof **s);
} 
```

我们可以使用以下方法包装这个函数：

```
%module test
%{
#include "test.h"
%}

%typemap(in,numinputs=0) struct SCIP **s (struct SCIP *temp) {
  $1 = &temp;
}

%typemap(argout) struct SCIP **s {
  %set_output(SWIG_NewPointerObj(SWIG_as_voidptr(*$1), $*1_descriptor, SWIG_POINTER_OWN));
}

%include "test.h" 
```

这是两个类型映射，一个创建一个本地临时指针，用作函数的输入，另一个将调用后指针的值复制到返回中。

作为替代方案，您还可以使用`%inline`设置重载：

```
%newobject SCIPcreate;
%inline %{
  struct SCIP *SCIPcreate() {
    struct SICP *temp;
    SCIPcreate(&temp);
    return temp;
  }
%} 
```

# java - 带有 ArcGis 的 smartgwt 项目上的 baseMapWidget

> ID：13380983
> 
> 赞同：0
> 
> 时间：2012-11-14T14:42:09.597
> 
> 标签：java, javascript, map, smartgwt, arcgis

我有一个 smartgwt 项目，其中包含 baseMapWidget 地图对象。我想获得 png 文件的实际地图状态。我怎么能那样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:42:06.360

如果你想这样做，你必须使用 PrintTask 类。

# python - 正确分割列表列表

> ID：13380993
> 
> 赞同：2
> 
> 时间：2012-11-14T14:42:29.980
> 
> 标签：python, slice

我有一个看起来像这样的输入流：

```
data = [[1,234],[2,432],[3,443]] 
```

我试图找出获取每个列表的第二个元素的最佳方法。我可以很容易地通过类似的东西获得单个条目的第二个值`data[0][1]`，或者通过使用两个元素的范围内的每个列表`data[0:2]`，但我无法终生弄清楚如何从每个数组中获取第二个元素，没有通过数组独立处理每个元素并在旁边创建一个新元素。这是一个丑陋的解决方案，那里有更好的解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T14:43:14.410

使用列表推导：

```
[lst[1] for lst in data] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:47:38.423

或使用运算符和地图：

```
from operator import itemgetter
map(itemgetter(1), data) 
```

# c#-4.0 - 我可以在后退按钮单击时关闭快速应用恢复吗

> ID：13380994
> 
> 赞同：0
> 
> 时间：2012-11-14T14:42:29.860
> 
> 标签：c#-4.0, windows-phone-8

我有一个 Windows 8 手机应用程序，当用户离开应用程序后选择后退按钮时，我想停止该应用程序的快速恢复。这个应用程序的本质是它每次都应该重新启动——就像用户点击应用程序磁贴一样。

我知道应用程序清单中有activationpolicy 设置，但是这是为了相反的目的 - 当用户选择应用程序的磁贴时启用快速恢复类似行为。

蒂亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:32:41.863

应用只能选择参与快速应用切换或快速应用恢复。开发人员无法挑选最适合他们的行为。因此，您应该使用 WmAppManifest.ml 中的 ActivationPolicy 选择最适合您的应用程序的方案。

如果 backstack 即将为空，您可能会捕获 OnBackKeyPress 事件并调用 Application.Current.Terminate()。我不确定这是否违反任何认证指南，但微软对后退按钮的使用和应用程序生命周期非常敏感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:44:49.400

如果您认真思考过为什么您的应用程序应该偏离规范并重新开始，那么我会清除应用程序恢复的后台堆栈。

应用程序_已激活

```
while (RootFrame.RemoveBackEntry() != null); 
```

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj735579(v=vs.105).aspx#BKMK_Howtoclearthebackstack](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj735579(v=vs.105).aspx#BKMK_Howtoclearthebackstack)