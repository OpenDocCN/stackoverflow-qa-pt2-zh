# StackOverflow 问答 13842000-13842999

# c++ - C++ 前向声明类作用域枚举

> ID：13842006
> 
> 赞同：33
> 
> 时间：2012-12-12T14:36:43.780
> 
> 标签：c++, c++11

我想知道是否可以转发声明在另一个类范围内定义的枚举。例如，考虑以下情况：

```
//A.h
class A
{
public:
    enum class type: unsigned long { /*some stuff*/ }
}; 
```

现在，在另一个标题中，我想转发声明“类型”枚举（假设下面的 B 类有一个对 A::type 执行某些操作的函数）

```
//B.h
enum A::type; //use of undefined type 'A'

class B
{
public:
    UseTypeEnum(A::Type&);
}; 
```

这也不起作用：

```
//B.h
class A;
enum A::type; //still use of undefined type

class B... 
```

如果在 Ah 中在全局范围内声明枚举，则没有问题

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-12T14:43:48.747

您不能在类定义之外声明嵌套类型。

如果您需要在类之外使用它们，则必须包含类定义，或者将它们移动到命名空间中。

# java - 如何配置两个 weblogic 服务器之间的双向 ssl 通信？

> ID：13842008
> 
> 赞同：1
> 
> 时间：2012-12-12T14:36:47.743
> 
> 标签：java

我正在尝试进行两种方式的 ssl 通信。我的服务器部署在一个 weblogic 服务器上，客户端部署在另一个服务器上。我在客户端导入了有效证书并尝试调用在 https 上运行的 web 服务。我编写了简单的 serverlet 类，它在 https 上调用 web 服务。我在客户端代码中设置了以下属性。

```
System.setProperty("javax.net.ssl.keyStore","/opt/bea1/certificates/VDFNLimitedV01.p12");
System.setProperty("javax.net.ssl.keyStorePassword", "XXXXX");
System.setProperty("javax.net.ssl.keyStoreType", "PKCS12"); 
```

当我通过 unix 服务器编译和运行独立的简单客户端代码时，它运行良好，但是当我在 weblogic 上部署客户端并点击 url 时，我遇到了错误的证书异常。 **客户端错误**

```
 oled Threads]]weblogic.security.SSL.jsseadapter: SSLENGINE: Exception occurred during SSLEngine.unwrap(ByteBuffer,ByteBuffer).
    javax.net.ssl.SSLException: Received fatal alert: bad_certificate
            at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:190)
            at com.sun.net.ssl.internal.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1467)
            at com.sun.net.ssl.internal.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1435)
            at com.sun.net.ssl.internal.ssl.SSLEngineImpl.recvAlert(SSLEngineImpl.java:1601)
            at com.sun.net.ssl.internal.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:1031)
            at com.sun.net.ssl.internal.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:845)
            at com.sun.net.ssl.internal.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:721)
            at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:607)
            at weblogic.security.SSL.jsseadapter.JaSSLEngine$4.run(JaSSLEngine.java:118)
            at weblogic.security.SSL.jsseadapter.JaSSLEngine.doAction(JaSSLEngine.java:732)
            at weblogic.security.SSL.jsseadapter.JaSSLEngine.unwrap(JaSSLEngine.java:116)
            at weblogic.socket.JSSEFilterImpl.doHandshake(JSSEFilterImpl.java:93)
            at weblogic.socket.JSSEFilterImpl.doHandshake(JSSEFilterImpl.java:59)
            at weblogic.socket.JSSEFilterImpl.write(JSSEFilterImpl.java:391)
            at weblogic.socket.JSSESocket$JSSEOutputStream.write(JSSESocket.java:78)
            at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
            at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
            at java.io.FilterOutputStream.flush(FilterOutputStream.java:123)
            at weblogic.net.http.HttpURLConnection.writeRequests(HttpURLConnection.java:162)
            at weblogic.net.http.HttpURLConnection.getInputStream(HttpURLConnection.java:376)
            at weblogic.net.http.SOAPHttpsURLConnection.getInputStream(SOAPHttpsURLConnection.java:37)
            at java.net.URL.openStream(URL.java:1010)
            at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.createReader(RuntimeWSDLParser.java:842)
            at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.resolveWSDL(RuntimeWSDLParser.java:289)
            at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:138)
            at com.sun.xml.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:284)
            at com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:246)
            at com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:197)
            at com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:187)
            at weblogic.wsee.jaxws.spi.WLSServiceDelegate.<init>(WLSServiceDelegate.java:84)
            at weblogic.wsee.jaxws.spi.WLSProvider$ServiceDelegate.<init>(WLSProvider.java:598)
            at weblogic.wsee.jaxws.spi.WLSProvider.createServiceDelegate(WLSProvider.java:120)
            at weblogic.wsee.jaxws.spi.WLSProvider.createServiceDelegate(WLSProvider.java:112)
            at weblogic.wsee.jaxws.spi.WLSProvider.createServiceDelegate(WLSProvider.java:83)
            at javax.xml.ws.Service.<init>(Service.java:56)
            at com.vodafone.main.TokenService.<init>(TokenService.java:49)
            at vodafone.TransactClient.getMessage(TransactClient.java:65)
            at vodafone.TransactClient.doGet(TransactClient.java:77)
            at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
            at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
            at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
            at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
            at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
            at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
            at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3717)
            at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
            at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
            at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
            at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
            at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
            at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
            at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)
            at weblogic.work.ExecuteThread.run(ExecuteThread.java:176) 
```

**服务器端错误：**

```
[Raw read]: length = 5>
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <0000: 16 03 01 00 4D                                     ....M
[Raw read]: length = 77>
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <0000: 0B 00 00 03 00 00 00 10   00 00 42 00 40 49 59 42  ..........B.@IYB
0010: 09 08 EF 92 70 2E E7 49   E6 73 00 B0 33 7C A9 F0  ....p..I.s..3...
0020: 42 D1 3F F2 DA B9 80 FD   9E E8 15 21 C3 7E 42 A2  B.?........!..B.
0030: CF 1A 20 A0 17 ED B3 D6   3B 5C 68 1E 49 06 97 65  .. .....;\h.I..e
0040: 70 8A 40 03 C1 93 FB 3F   A9 26 B6 E9 67           p.@....?.&..g
ExecuteThread: '0' for queue: 'weblogic.socket.Muxer', READ: TLSv1 Handshake, length = 77>
**<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <*** Certificate chain>
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <***>**
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <ExecuteThread: '0' for queue: 'weblogic.socket.Muxer', fatal error: 42: null cert chain
javax.net.ssl.SSLHandshakeException: null cert chain>
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <ExecuteThread: '0' for queue: 'weblogic.socket.Muxer', SEND TLSv1 ALERT:  fatal, description = bad_certificate>
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <ExecuteThread: '0' for queue: 'weblogic.socket.Muxer', WRITE: TLSv1 Alert, length = 2>
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <ExecuteThread: '0' for queue: 'weblogic.socket.Muxer', fatal: engine already closed.  Rethrowing javax.net.ssl.SSLHandshakeException: null cert chain>
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <ExecuteThread: '0' for queue: 'weblogic.socket.Muxer', called closeOutbound()>
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <ExecuteThread: '0' for queue: 'weblogic.socket.Muxer', closeOutboundInternal()>
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <[Raw write]: length = 7>
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <0000: 15 03 01 00 02 02 2A                               ......*
ExecuteThread: '2' for queue: 'weblogic.socket.Muxer', called closeOutbound()>
<Dec 12, 2012 3:06:54 PM UTC> <Notice> <Stdout> <BEA-000000> <ExecuteThread: '2' for queue: 'weblogic.socket.Muxer', closeOutboundInternal()> 
```

当我通过 unix 框而不是 weblogic 运行 java 代码时，我能够发送客户端证书。有人可以帮我吗？我应该如何配置 weblogic 以充当 ssl 客户端？

谢谢，普加库尔卡尼

# v8 - 如何正确使用 Context::Scope ？

> ID：13842018
> 
> 赞同：2
> 
> 时间：2012-12-12T14:37:28.317
> 
> 标签：v8

如何正确使用 Context::Scope ？我是在实际执行某事时在方法/函数范围内分配它，还是在 Context 对象旁边有它的全局副本？文档对此不是很清楚。我想创建一个全局应用程序类并将所有持久的东西保留在那里，不确定我是否可以将上下文范围放在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T18:55:14.403

`Context::Scope` has to be allocated on the call stack outside of your call chain. What you want to do is use a `Persistent<Context>` to store your `Context` object globally, and then create a `Context::Scope` when you enter a JavaScript call stack. This is the case for all of V8's scope objects (`HandleScope`, `Isolate::Scope`, etc.).

# iphone - UITableViewCell 高亮更改文本字段颜色

> ID：13842020
> 
> 赞同：1
> 
> 时间：2012-12-12T14:37:40.940
> 
> 标签：iphone, ios, cocoa-touch

我有子类 UITableViewCell 并且我有以下代码：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    if (selected)
        self.textField.textColor = [UIColor whiteColor];
    else
        self.textField.textColor = [UIColor blackColor];

    [super setSelected:selected animated:animated];
} 
```

基本上，我的单​​元格中只有一个 UITextField，但标签的颜色不会自动变为白色，所以我需要某种方法来在突出显示时更改它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:59:49.830

你应该使用`cell.textLabel.highlightedTextColor`并且没有改变它`setSelected:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:55:39.393

在你的 cellForRowAtIndexPath

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

在你的子视图中有这样的东西

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

if (selected)
        self.textLabel.textColor=[UIColor blackColor];
    else
        self.textLabel.textColor=[UIColor greenColor];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:44:46.987

我相信这是在`UITextField`. 但我想知道的是：是否`self.textField`正确连接到正确的实例？（通过 Interface Builder/StoryBoard 或代码）

尝试在 setSelected 方法的顶部添加此代码，并在运行应用程序时查看控制台：

```
NSLog(@"self.textField = %@", self.textField); 
```

# c - 一个联合只能用它的第一个成员的类型值来初始化，K&R

> ID：13842025
> 
> 赞同：4
> 
> 时间：2012-12-12T14:38:05.320
> 
> 标签：c, unions

我正在学习 K&R C。在第 6.8 章中它指出：

> 联合只能使用其第一个成员的类型值进行初始化；因此`u`上述联合只能用整数值初始化。

...并定义一个联合 u 如下：

```
union u_tag {
  int ival;
  float fval;
  char *sval;
} u; 
```

我不知道如何理解这一点。什么意思，初始化`u`必须为：

```
u.ival = 323; 
```

显然，情况并非如此，因为我可以初始化`u`为：

```
u.fval = 1.0; 
```

或者

```
u.sval = "hi"; 
```

里奇是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T14:41:16.963

发布的代码正在执行*分配*，而不是初始化。作者的意思是，以下是有效的初始化，因为`323`是 an`int`并且第一个成员`u_tag`是 an `int`：

```
union u_tag u = { 323 }; /* Initializes u.ival. */ 
```

以下内容将是无效的，因为它将尝试`int`使用 a 初始化 a `char[]`：

```
union u_tag u = { "hi" }; 
```

但是，从 C99 开始，情况不再如此。在 C99 中，引入了代号：

```
union u_tag u = { .sval = "hi" }; 
```

在 C89 中，如果您想`union`使用一个用于除第一个成员之外的成员的值来初始化 a，您可以复制现有的`union`. 如果您想声明`union`as ，这将特别有用`const`。例如：

```
union u_tag make_u_tag_with_fval(const float a_fval)
{
    union u_tag u;
    u.fval = a_fval;
    return u;
}

const union u_tag u_fval = make_u_tag_with_fval(1.0); 
```

# php - 选择与某个日期重叠的日期范围

> ID：13842029
> 
> 赞同：4
> 
> 时间：2012-12-12T14:38:15.650
> 
> 标签：php, mysql, sql

可以说这是我的桌子，如下所示。

```
ID | Startdate           | Enddate
-----------------------------------------------
1  | 2012-12-12 08:00:00 | 2012-12-15 18:30:00
-----------------------------------------------
2  | 2012-12-11 00:00:00 | 2012-12-16 00:00:00
-----------------------------------------------
3  | 2012-12-16 08:00:00 | 2012-12-17 18:30:00
-----------------------------------------------
4  | 2012-12-13 00:00:00 | 2012-12-14 11:30:00
----------------------------------------------- 
```

选定的日期范围是 Id 1, 2012-12-12 08:00:00 到 2012-12-15 18:30:00 。我想选择跨越日期范围的任何日期。

正确的 Id 将是 2 和 4 。希望大家理解，有什么问题欢迎追问。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:49:23.650

```
select d1.*
from
  dates d1 inner join dates d2
  on d2.id=1 and d1.Startdate<d2.Enddate and d1.Enddate>d2.Startdate
where d1.id<>1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:41:23.510

```
SELECT t1.*
FROM YourTable t1
INNER JOIN
(
   SELECT StartDate, EndDate
   FROM YourTable 
   WHERE Id = 1
) t2 ON t2.StartDate < t1.StartDate AND t2.EndDate > t1.EndDate 
```

# php - .htaccess 从搜索查询中动态重写 GET 变量

> ID：13842033
> 
> 赞同：0
> 
> 时间：2012-12-12T14:38:24.010
> 
> 标签：php, .htaccess, rewrite

我的网站上有以下网址：

> www.domain.com/index.php?id=42&f_su_ort=PLZ%2C+Ort+oder+名称+der+Einrichtung&f_sop_name=名称+der+Einrichtung&f_sop_traeg=0&f_su_ent=10&f_sp_111=on&f_sp_121=on&f_sp_131=on&f_sp_141=on&f_sp_141=on&f_sp_141=on&f_sp_16=10&1 112&f_sp_211=开&f_sp_221=开&f_sp_231=开&f_sp_241=开&f_sp_251=开&f_sp_212=开&f_sp_213=开&f_sp_222=开&f_sp_223=开&f_sp_232=开&f_sp_ang=&f_su_submit2=苏辰&fonsp_

这是从搜索查询生成的，它可以有多个参数，参数的数量不固定。

任何想法我可以如何使用 .htaccess 以便而 不是`variable=value`看起来`/value`

> www.domain.com/index.php?id=42&f_su_ort=柏林

应该翻译成

> www.domain.com/42/Berlin

我只能编辑 .htaccess 文件，而不是脚本。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:54:05.237

```
RewriteRule ^([^/]*)/([^/]*)/([^/]*).....$ http://www.domain.com/index.php?id=$1&f_su_ort=$2..... [L,QSA] 
```

# jsf - java ee - 重定向到新窗口 NPE 后的 JSF 2.0 ViewScoped Bean

> ID：13842036
> 
> 赞同：1
> 
> 时间：2012-12-12T14:38:34.527
> 
> 标签：jsf, jakarta-ee, jsf-2

我使用这篇文章[https://stackoverflow.com/a/13838907](https://stackoverflow.com/a/13838907)中的提示打开新选项卡，但是当我返回旧选项卡时，我得到 nullPointerException 并且我的 ViewScoped bean 数据丢失了。

```
<h:form target="_blank">
  <p:commandButton value="open new tab" action="#{otherBean.newTab}" ajax="false" />
</h:form>

<h:form>
  <p:commandButton value="this wll cause NPE" action="#{pageBean.action}"/>
</h:form> 
```

单击第一个按钮，返回上一个选项卡，单击第二个按钮。PageBean 再次创建，所有数据都丢失了。两个 bean 都是 ViewScoped。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:51:05.490

实际上，初始选项卡/窗口中的视图范围 bean 通过返回`String`导航案例结果而被杀死。你想返回`null`或`void`让它活着。根据`newTab()`您的其他问题中显示的代码，您需要通过[`Faces#redirect()`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/util/Faces.html#redirect%28java.lang.String%29)调用替换导航案例（假设它确实是您在那里使用的[OmniFaces](http://omnifaces.org)`Faces#setFlashAttribute()`）。您只需要预先设置`Flash#setRedirect()`为`true`以指示将发生重定向的 Flash 范围。

```
public void newTab() throws IOException {
    Faces.setFlashAttribute("foo", bar); 
    Faces.getFlash().setRedirect(true);
    Faces.redirect("otherView.xhtml");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:45:35.450

ViewScope bean 仅在您回发到同一视图时才存在。

如果您回发到其他视图，您的`action`数据将丢失，因为 ViewScope bean 将被重新创建。

# c++ - C++ 正则表达式转义标点字符，如“。”

> ID：13842038
> 
> 赞同：4
> 
> 时间：2012-12-12T14:38:38.707
> 
> 标签：c++, regex, escaping

匹配一个“.” 在与类的字符串`std::tr1::regex`中使我使用了一种奇怪的解决方法。

为什么我需要检查“\\\\.” 代替 ”\\。”？

```
regex(".") // Matches everything (but "\n") as expected.
regex("\\.") // Matches everything (but "\n").
regex("\\\\.") // Matches only ".". 
```

有人可以解释我为什么吗？这真的让我很困扰，因为我的代码是使用`boost::regex`类编写的，它不需要这种语法。

**编辑：**对不起，`regex("\\\\.")`似乎什么都不匹配。

**Edit2：**一些代码

```
void parser::lex(regex& token)
{
    // Skipping whitespaces
    {
        regex ws("\\s*");
        sregex_token_iterator wit(source.begin() + pos, source.end(), ws, regex_constants::match_default), wend;
        if(wit != wend)
            pos += (*wit).length();
    }

    sregex_token_iterator it(source.begin() + pos, source.end(), token, regex_constants::match_default), end;
    if (it != end)
        temp = *it;
    else
        temp = "";
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T14:40:47.397

这是因为`\.`被解释为转义序列，语言本身试图将其解释为单个字符。您想要的是让您的正则表达式包含实际的字符串“\。”，这是`\\.`因为`\\`是反斜杠字符 (\) 的转义序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:25:07.287

事实证明，实际问题在于使用的方式`sregex_token_iterator`。使用`match_default`意味着它总是在字符串中找到下一个匹配项（如果有的话），即使中间有一个不匹配项。那是，

```
string source = "AAA.BBB";
regex dot("\\.");
sregex_token_iterator wit(source.begin(), source.end(), dot, regex_constants::match_default); 
```

会在点处给出匹配，而不是报告没有匹配。

解决方案是`match_continuous`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:51:26.577

尝试通过其 ASCII 码转义点：

```
regex("\\x2E") 
```

# mysql - 在mysql中使用主键作为大表的外键

> ID：13842039
> 
> 赞同：0
> 
> 时间：2012-12-12T14:38:40.893
> 
> 标签：mysql

我的 mysql 中有一个名为“cats”的表，该表有“cat_id”、“cat_parent”、“cat_name”，我决定创建另一个名为“cats_details”的表，该表有“cat_id”、“cat_description”、“cat_keywords” '，等等，因为我的类别可以嵌套（每个主类别可以有无限数量的子类别，每个子类别可以有无限数量的子子类别，...）并且类别数量可能达到 1000 以上。我需要在某些页面中列出它们：P。所以我认为最好的方法是拥有 2 个表，一个用于列出类别并在其名称中搜索，另一个用于提供有关类别的详细信息。所以我的问题是这种情况下最好的方法是什么？

**1-**使用“cats_details”的“cat_id”作为其自身的主键和“cats”表的外键。

**2-**为“cats_details”的主键创建一个名为“id”（int auto increment）的列，在“cats_details”中创建一个名为“cat_id”的列作为“cats”表的外键。

对于大量类别和大量访问者，哪种解决方案更快？

**注意：**我只在类别详细信息页面中使用 JOIN，而不是在列表页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:17:03.657

您期望的可扩展性数字是多少？您是否进行了任何初步的容量规划？

非规范化通过创建冗余数据来优化数据库的读取，但是如果不统一应用于数据库中数据的所有冗余副本，插入或删除可能会导致数据不一致（因此存在一些维护开销，因为维护数据一致性现在是应用程序的工作）。

除非您正在查看表中的数百万行，否则使用当前的硬件并不重要 - 规范化很好。

我假设 cat_id 是一个 int 或 Guid。主键将是一个聚集索引并使读取速度更快，因此选项 1 将导致更快的读取速度。由于您将主要通过主键进行读取/连接，因此选项 2 的效率较低，因为选项 2 中的 cat_id 很可能是非聚集索引（尽管在这种情况下插入/删除会更快）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:44:38.423

也许你应该看看表格的规范化。这应该可以解决您的问题。一个很好的链接可能是这个：[http](http://www.troubleshooters.com/littstip/ltnorm.html) ://www.troubleshooters.com/littstip/ltnorm.html但是任何关于表规范化的谷歌搜索都应该对你有所帮助......

# mpi - MPI_Gather 函数的困难

> ID：13842047
> 
> 赞同：3
> 
> 时间：2012-12-12T14:39:01.857
> 
> 标签：mpi

我在每个处理器（假设 3 个处理器）的本地数组（名为 lvotes）上都有一个值，每个处理器的第一个元素都存储一个值，即：

```
P0 : 4
P1 : 6
p2 : 7 
```

现在，使用 MPI_Gather，我想将它们全部收集到 P0 中，所以它看起来像：

```
P0 : 4, 6, 7 
```

我用这样的方式收集：

```
MPI_Gather(lvotes, P, MPI_INT, lvotes, 1, MPI_INT, 0, MPI_COMM_WORLD); 
```

但我遇到了问题。这是我第一次在 MPI 中编码。我可以使用任何建议。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T15:32:27.230

这是第一次使用聚集/分散集合的人的常见问题；在发送和接收计数中，您指定要发送到每个进程或从*每个*进程接收的项目计数。因此，尽管您确实会获得（比如说）`P`项目，但如果`P`是处理器的数量，那不是您为收集操作指定的；您指定您发送的计数为 1，并且接收的计数为 1（来自每个进程）。像这样：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <mpi.h>

int main ( int argc, char **argv ) {

    int rank;
    int size;

    int lvotes;
    int *gvotes;

    MPI_Init ( &argc, &argv );
    MPI_Comm_rank ( MPI_COMM_WORLD, &rank );
    MPI_Comm_size ( MPI_COMM_WORLD, &size );

    if (rank == 0)
        gvotes = malloc(size * sizeof(int) );

    /* everyone sets their first lvotes element */
    lvotes = rank+4;

    /* Gather to process 0 */
    MPI_Gather(&lvotes, 1, MPI_INT, /* send 1 int from lvotes.. */
                gvotes, 1, MPI_INT, /* gather 1 int each process into lvotes */
               0, MPI_COMM_WORLD); /* ... to root process 0 */

    printf("P%d: %d\n", rank, lvotes);
    if (rank == 0) {
        printf("P%d: Gathered ", rank);
        for (int i=0; i<size; i++)
            printf("%d ", gvotes[i]);
        printf("\n");
    }

    if (rank == 0)
        free(gvotes);

    MPI_Finalize();

    return 0;
} 
```

运行给

```
$ mpirun -np 3 ./gather
P1: 5
P2: 6
P0: 4
P0: Gathered 4 5 6 
```

# c - 如何从正在运行的内核模块中确定 linux 内核是 32 位还是 64 位

> ID：13842051
> 
> 赞同：4
> 
> 时间：2012-12-12T14:39:04.150
> 
> 标签：c, linux, linux-kernel, operating-system, kernel

这是交易。我想编写一个取决于内核类型（32 位或 64 位）的内核模块。当且仅当内核是 32 位时，我希望将一些代码行包​​含在模块中，并且当内核是 64 位时应该包含一些代码行。

对于这种情况，是否有类似 #if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,26) 的内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T14:51:03.760

您可以检查 CONFIG_X86_64 和 CONFIG_X86_32 - 如果拱门是 x86。对于其他架构，也有类似的 CONFIG 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:54:47.370

在终端上检查这个

```
$ uname -m
x86_64 
```

检查二进制文件以确定系统上

```
$ file /usr/bin/file
/usr/bin/file: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), for GNU/Linux 2.6.8, dynamically linked (uses shared libs), stripped 
```

如果`32-bit`系统`64-bit`是`multilib`. 但是您可以查看系统本身的某些部分来验证它是`64-bit`. 像这样，例如

```
 $file /sbin/init
/sbin/init: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), for GNU/Linux 2.6.16, dynamically linked (uses shared libs), stripped 
```

**引用自**

[http://www.linuxquestions.org/questions/linux-general-1/how-to-check-linux-kernel-is-32-bit-or-64-bit-612352/](http://www.linuxquestions.org/questions/linux-general-1/how-to-check-linux-kernel-is-32-bit-or-64-bit-612352/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:55:06.333

如果使用你可以`gcc`测试`_LP64`或被'ed 为：`__LP64__``#define``1`

> 如果（且仅当）编译是针对 long int 和**pointer**都**使用 64 位**且 int 使用 32 位的目标时，这些宏被定义为值为 1。

对于`gcc`的预定义宏，请在此处阅读：http: [//gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html](http://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html)

# sql - 将行添加到输出

> ID：13842055
> 
> 赞同：2
> 
> 时间：2012-12-12T14:39:15.727
> 
> 标签：sql

我有以下查询：

```
SELECT 
  ROW_NUMBER () OVER (PARTITION BY a.jpnum, a.jptask 
                      ORDER BY a.jpnum, a.jptask) rn,  
  a.jpnum, 
  a.jptask, 
  REGEXP_SUBSTR (a.description, '[^,]+', 1, 3) col_3,  
  REGEXP_REPLACE (REGEXP_SUBSTR (a.description, 
                                 '[^,]+', 1, 3),  'C-.*' ) mytest  
FROM My.task a 
WHERE a.jpnum = '13788'; 
```

输出是：

```
RN  JPNUM  JPTASK  COL_3      MYTEST
1     13788  10            7C-4E SIG    7
1     13788  20            9C-6E SIG    9 
```

到目前为止一切顺利......但这就是我坚持的。我需要每行重复与 MY TEST 中的数字一样多的次数。所以...以前两个为例。我需要得到：

```
RN  JPNUM   JPTASK  COL_3   MYTEST
---------------------------------------
1   13788   10   7C-4E SIG   7 
2   13788   10   7C-4E SIG   7 
3   13788   10   7C-4E SIG   7 
4   13788   10   7C-4E SIG   7 
5   13788   10   7C-4E SIG   7 
6   13788   10   7C-4E SIG   7 
7   13788   10   7C-4E SIG   7 
1   13788   20   9C-6E SIG   9 
2   13788   20   9C-6E SIG   9 
3   13788   20   9C-6E SIG   9 
4   13788   20   9C-6E SIG   9 
5   13788   20   9C-6E SIG   9 
6   13788   20   9C-6E SIG   9 
7   13788   20   9C-6E SIG   9 
8   13788   20   9C-6E SIG   9 
9   13788   20   9C-6E SIG   9 
```

我有数百个要运行，而 MYTEST 可能高达 300

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:02:20.847

解决这个问题的基本方法是：

1.  生成一个表格，其中包含至少与您想要的最大重复次数一样高的数字序列。
2.  加入序列表，其中序列表中的数字 <= 您要重复的内容（在本例中`MYTEST`）。

确切的实现取决于您使用的数据库，但是[这个问题](https://stackoverflow.com/questions/10423767/sql-repeat-a-result-row-multiple-times-and-number-the-rows)有所有的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:03:18.367

您只需要一个最多 300 个数字的列表即可进行查询。这是一个例子：

```
SELECT ROW_NUMBER () OVER (PARTITION BY a.jpnum, a.jptask 
                           ORDER BY a.jpnum, a.jptask) rn,
       jpnum, jptask, col_3, mytest
from (select a.jpnum, a.jptask, 
             REGEXP_SUBSTR (a.description, '[^,]+', 1, 3) col_3,  
             REGEXP_REPLACE (REGEXP_SUBSTR (a.description, 
                             '[^,]+', 1, 3),  'C-.*' ) mytest  
      FROM My.task a 
      WHERE a.jpnum = '13788'
    ) t join
    (select row_number() over (order by column_name) as num
     from Information_Schema.Columns
    ) numbers
    on numbers.num <= cast(mytest as int) 
```

您可以在第二个子查询中放置至少 300 行的任何表。根据数据库的不同，还有其他方法可以表达此查询，但方法通常是相同的：连接到数字表以获取额外的行。

# python - Python：带有间隙的切片的更短语法？

> ID：13842060
> 
> 赞同：14
> 
> 时间：2012-12-12T14:39:30.903
> 
> 标签：python, slice

假设我想要 Python 中的列表中的第一个元素、第 3 到第 200 个元素以及第 201 个元素到最后一个元素，步长为 3。

一种方法是使用不同的索引和连接：

```
new_list = old_list[0:1] + old_list[3:201] + old_list[201::3] 
```

有没有办法只用一个索引来做到这一点`old_list`？我想要类似下面的东西（我知道这在语法上不起作用，因为列表索引不能是列表，并且因为 Python 不幸[没有切片文字](https://stackoverflow.com/questions/13706258/passing-python-slice-syntax-around-to-functions)；我只是在寻找接近的东西）：

```
new_list = old_list[[0, 3:201, 201::3]] 
```

我可以通过切换到 NumPy 数组来实现其中的一些，但我更感兴趣的是如何为原生 Python 列表做到这一点。我还可以创建[一个切片器](https://stackoverflow.com/questions/13706258/passing-python-slice-syntax-around-to-functions)或类似的东西，并且可能是强大的手臂，它可以给我一个等效的切片对象来代表我所有想要的切片的组成。

但我正在寻找不涉及创建新类来管理切片的东西。我只想连接切片语法并将其提供给我的列表，并让列表了解这意味着分别获取切片并最终连接它们各自的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T17:04:18.343

切片器对象（例如`SliceMaker`，来自您的其他问题，或`np.s_`）可以接受多个逗号分隔的切片；它们作为 a `tuple`of `slice`s 或其他对象接收：

```
from numpy import s_
s_[0, 3:5, 6::3]
Out[1]: (0, slice(3, 5, None), slice(6, None, 3)) 
```

NumPy 将此用于多维数组，但您可以将其用于切片连接：

```
def xslice(arr, slices):
    if isinstance(slices, tuple):
        return sum((arr[s] if isinstance(s, slice) else [arr[s]] for s in slices), [])
    elif isinstance(slices, slice):
        return arr[slices]
    else:
        return [arr[slices]]
xslice(list(range(10)), s_[0, 3:5, 6::3])
Out[1]: [0, 3, 4, 6, 9]
xslice(list(range(10)), s_[1])
Out[2]: [1]
xslice(list(range(10)), s_[:])
Out[3]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-31T09:44:47.857

```
import numpy as np
a = list(range(15, 50, 3))

# %%timeit -n 10000 -> 41.1 µs ± 1.71 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
[a[index] for index in np.r_[1:3, 5:7, 9:11]]
---
[18, 21, 30, 33, 42, 45] 
```

```
import numpy as np
a = np.arange(15, 50, 3).astype(np.int32)

# %%timeit -n 10000 -> 31.9 µs ± 5.68 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
a[np.r_[1:3, 5:7, 9:11]]
---
array([18, 21, 30, 33, 42, 45], dtype=int32) 
```

```
import numpy as np
a = np.arange(15, 50, 3).astype(np.int32)

# %%timeit -n 10000 -> 7.17 µs ± 1.17 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
slices = np.s_[1:3, 5:7, 9:11]
np.concatenate([a[_slice] for _slice in slices])
---
array([18, 21, 30, 33, 42, 45], dtype=int32) 
```

似乎使用 numpy 是一种更快的方法。

将 numpy 部分添加到[ecatmur](https://stackoverflow.com/a/15163014/4281353)的答案中。

```
import numpy as np
def xslice(x, slices):
    """Extract slices from array-like
    Args:
        x: array-like
        slices: slice or tuple of slice objects
    """
    if isinstance(slices, tuple):
        if isinstance(x, np.ndarray):
            return np.concatenate([x[_slice] for _slice in slices])
        else:
            return sum((x[s] if isinstance(s, slice) else [x[s]] for s in slices), [])        
    elif isinstance(slices, slice):
        return x[slices]
    else:
        return [x[slices]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:52:18.613

您最好编写自己的序列类型。

```
>>> L = range(20)
>>> L
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
>>> operator.itemgetter(*(range(1, 5) + range(10, 18, 3)))(L)
(1, 2, 3, 4, 10, 13, 16) 
```

为了让您开始：

```
>>> operator.itemgetter(*(range(*slice(1, 5).indices(len(L))) + range(*slice(10, 18, 3).indices(len(L)))))(L)
(1, 2, 3, 4, 10, 13, 16) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:32:03.703

为什么不为您的目的创建自定义切片

```
>>> from itertools import chain, islice
>>> it = range(50)
>>> def cslice(iterable, *selectors):
    return chain(*(islice(iterable,*s) for s in selectors))

>>> list(cslice(it,(1,5),(10,15),(25,None,3)))
[1, 2, 3, 4, 10, 11, 12, 13, 14, 25, 28, 31, 34, 37, 40, 43, 46, 49] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-05T06:53:14.290

不确定这是否“更好”，但它有效，所以为什么不......

`[y for x in [old_list[slice(*a)] for a in ((0,1),(3,201),(201,None,3))] for y in x]`

它可能很慢（尤其是与链相比），但它是基本的 Python（3.5.2 用于测试）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-03T22:01:37.787

您可以扩展`list`以允许多个切片和索引：

```
class MultindexList(list):
    def __getitem__(self, key):
        if type(key) is tuple or type(key) is list:
            r = []
            for index in key:
                item = super().__getitem__(index)
                if type(index) is slice:
                    r += item
                else:
                    r.append(item)
            return r
        else:
            return super().__getitem__(key)

a = MultindexList(range(10))
print(a[1:3])             # [1, 2]
print(a[[1, 2]])          # [1, 2]
print(a[1, 1:3, 4:6])     # [1, 1, 2, 4, 5] 
```

# c++ - 这些额外的论点是什么意思？

> ID：13842061
> 
> 赞同：-6
> 
> 时间：2012-12-12T14:39:31.623
> 
> 标签：c++, stl, vector

这些额外的参数是什么意思，就像在这里

```
int data[num];
vector<int> v;
// ...
v.insert(v.begin(),data, data+num); 
```

为什么有超过 2 个参数？请详细说明其作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:42:06.657

有一个重载，[`vector::insert`](http://en.cppreference.com/w/cpp/container/vector/insert)它在该向量中占据一个位置，并在该位置之前插入一系列元素：

```
template< class InputIt >
void insert( iterator pos, InputIt first, InputIt last);
template< class InputIt >
iterator insert( const_iterator pos, InputIt first, InputIt last ); 
```

在您的情况下，您将数组中的全部内容插入到`data`向量的开头（`data`衰减到指向第一个元素的指针并`data + num`指向数组末尾的一个）。

# cmake - cmakes 主要用于构建大型应用程序吗？

> ID：13842062
> 
> 赞同：4
> 
> 时间：2012-12-12T14:39:32.547
> 
> 标签：cmake

我看到很多我喜欢使用的开源项目中使用了 cmake，但我目前对 cmake 一无所知。我现在编写的大多数应用程序都是我为刷新知识而编写的小程序，使用 cmake 构建这些程序会因为它们的体积小而“浪费时间”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T15:08:45.097

您目前正在手动编写 makefile 吗？如果是，您可能想切换到 CMake。

查看 CMake 中的 HelloWorld：

```
#include <stdio.h>
int main() {
  printf("hello world.\n");
  return 0;
} 
```

CMakeLists.txt

```
cmake_minimum_required(VERSION 2.0)
project(MyProject)
add_executable(hello main.cpp) 
```

如您所见，非常简单。

CMake非常强大，它可以生成visual studio项目、xcode、自动查找依赖项，如Qt、boost等。

它是跨平台的，恕我直言不难学。它与 CTest 和 CPack 捆绑在一起，用于运行和报告您的测试并部署您的应用程序。

正如你所说，它被用于许多项目，小项目和非常大的项目，如 KDE。例如，有一个 Boost 端口使用 CMake 来构建而不是 bjam。

我强烈推荐你使用它，学习如何使用流行的工具很有用:-)

# twitter-bootstrap - 引导子菜单无法正常工作

> ID：13842064
> 
> 赞同：1
> 
> 时间：2012-12-12T14:39:45.000
> 
> 标签：twitter-bootstrap

子菜单在以下代码中无法正常工作。你能提供解决方案吗？

这是代码， [http://jsfiddle.net/4UVt3/1/](http://jsfiddle.net/4UVt3/1/)

同样的小提琴复制粘贴在这里，

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> </script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
  </head>
  <body>
  <div class="dropdown">
  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown trigger</a>
   <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
      <li><a tabindex="-1" href="#">Action</a></li>
      <li><a tabindex="-1" href="#">Another action</a></li>
      <li><a tabindex="-1" href="#">Something else here</a></li>
      <li class="dropdown-submenu">
        <a tabindex="-1" href="#">More options</a>
        <ui class="dropdown-menu">
          <li><a tabindex="-1" href="#">Submenu 1</a></li>
          <li><a tabindex="-1" href="#">Submenu 2 </a></li>
          <li><a tabindex="-1" href="#">Submenu 3 </a></li>
        </ui>
      </li>
    </ul>
  </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:44:24.767

您在子菜单下拉菜单中有错字。它指定为“ui”而不是“ul”。

将您的子菜单下拉菜单更改为

```
<ul class="dropdown-menu">
    <li><a tabindex="-1" href="#">Submenu 1</a></li>
    <li><a tabindex="-1" href="#">Submenu 2 </a></li>
    <li><a tabindex="-1" href="#">Submenu 3 </a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T15:09:41.627

```
 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewporta" content="width=device-width, initial-scale=1.0">    
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> </script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
  </head>
  <body>
  <div class="dropdown">
  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown trigger</a>
   <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
      <li><a tabindex="-1" href="#">Action</a></li>
      <li><a tabindex="-1" href="#">Another action</a></li>
      <li><a tabindex="-1" href="#">Something else here</a></li>
      <li class="dropdown-submenu">
        <a tabindex="-1" href="#">More options</a>
        <ul class="dropdown-menu">
          <li><a tabindex="-1" href="#">Submenu 1</a></li>
          <li><a tabindex="-1" href="#">Submenu 2 </a></li>
          <li><a tabindex="-1" href="#">Submenu 3 </a></li>
        </ul>
      </li>
    </ul>
  </div>
  </body>
</html> 
```

您使用的是 ui 而不是 ul，上面的代码是工作版本，下面是更改。

```
 <ul class="dropdown-menu">
          <li><a tabindex="-1" href="#">Submenu 1</a></li>
          <li><a tabindex="-1" href="#">Submenu 2 </a></li>
          <li><a tabindex="-1" href="#">Submenu 3 </a></li>
        </ul> 
```

# java - Java 字符串数组合并排序

> ID：13842067
> 
> 赞同：1
> 
> 时间：2012-12-12T14:39:46.223
> 
> 标签：java, arrays, string, ilmerge

大家好，我为从用户读取 .txt 文件的字符串数组编写了一个合并排序程序。但是我现在要做的是比较两个文件并打印出文件一中的单词而不是文件二中的单词，例如苹果在文件 1 中但不在文件 2 中。我尝试再次将其存储在字符串数组中，然后将其打印出来最后，但我似乎无法实现它。这是我所拥有的，

```
FileIO reader = new FileIO();
     String words[] = reader.load("C:\\list1.txt");
     String list[] = reader.load("C:\\list2.txt");

     mergeSort(words);
     mergeSort(list);
     String x = null ;

     for(int i = 0; i<words.length; i++)
     {
         for(int j = 0; j<list.length; j++)
         {
                 if(!words[i].equals(list[j]))
                 {
                      x = words[i];
                 }
         }
     }

     System.out.println(x); 
```

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:51:04.347

如果要检查第一个数组中但第二个数组中不存在的单词，可以这样做：

```
 boolean notEqual = true;           
 for(int i = 0; i<words.length; i++)
     {
         for(int j = 0; j<list.length && notEqual; j++)
         {
                 if(words[i].equals(list[j]))     // If the word of file one exist
                 {                                // file two we set notEqual to false
                      notEqual = false;           // and we terminate the inner cycle
                 }
         }
         if(notEqual)                      // If the notEqual remained  true
           System.out.println(words[i]);   // we print the the element of file one
                                           // that do not exist in the second file

         notEqual = true;                  // set variable to true to be used check
     }                                     // the other words of file one. 
```

基本上，您从第一个文件（数组中的字符串）中取出一个单词并检查文件二中是否有一个相等的单词。如果找到它，则将控制变量设置`notEqual`为`false`，从而退出内部循环 for 并且不打印该单词。否则，如果文件 2 中没有与文件 1 中的单词匹配的任何单词，则控制变量`notEqual`将为`true`. 因此，打印内部循环之外的元素。

如果您愿意，您可以将打印语句替换为另一个将唯一单词存储在额外数组中的语句。

另一个解决方案，虽然比第一个慢：

```
 List <String> file1Words = Arrays.asList(words);
     List <String> file2Words = Arrays.asList(list);

     for(String s : file1Words)
        if(!file2Words.contains(s))
          System.out.println(s); 
```

您使用方法[Arrays.asList](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html)将数组转换为 List ，并使用方法 contains 来验证第一个文件的单词是否在第二个文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:27:30.127

为什么不直接将数组转换为集合？然后你可以简单地做 result = wordsSet.removeAll(listSet);

您的结果将包含 list2.txt 中不存在的所有单词

另请记住，该集合将删除重复项；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:52:19.050

这看起来有点接近。您所做的是对 in 中的每个字符串`words`，将其与 in 中的每个单词进行比较`list`，因此，如果您甚至有一个`list`不在 in 中的字符串`words`，`x`就会被设置。

我建议更改`if(!words[i].equals(list[j]))`为`if(words[i].equals(list[j]))`. 所以现在你知道 in 中的字符串`words`出现在 中`list`，所以你不需要显示它。如果你完全循环而`list`没有看到这个词，那么你知道你需要解释它。所以是这样的：

```
 for(int i = 0; i<words.length; i++)
 {
     boolean wordFoundInList = false;

     for(int j = 0; j<list.length; j++)
     {
             if(words[i].equals(list[j]))
             {
                  wordFoundInList = true;
                  break;
             }
     }

     if (!wordFoundInList) {
         System.out.println(x);
     }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:56:22.623

您也可以只遍历循环并在达到 list.length-1 时添加它。如果它匹配你可以打破整个东西

```
FileIO reader = new FileIO();
String words[] = reader.load("C:\\list1.txt");
String list[] = reader.load("C:\\list2.txt");

mergeSort(words);
mergeSort(list);
//never ever null
String x = "" ;

for(int i = 0; i<words.length; i++)
{
    for(int j = 0; j<list.length; j++)
    {
            if(words[i].equals(list[j]))
                 break;
            if(j == list.length-1)
                 x += words[i] + " ";
    }
}

System.out.println(x); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T15:06:37.483

这是一个版本（虽然它不使用排序）

```
 String[] file1 = {"word1", "word2", "word3", "word4"};
    String[] file2 = {"word2", "word3"};
    List<String> l1 = new ArrayList(Arrays.asList(file1));
    List<String> l2 = Arrays.asList(file2);
    l1.removeAll(l2);
    System.out.println("Not in file2 " + l1); 
```

它打印

```
Not in file2 [word1, word4] 
```

# c# - 隐藏字段中的值未传递到 EF 上下文模型

> ID：13842069
> 
> 赞同：0
> 
> 时间：2012-12-12T14:39:49.597
> 
> 标签：c#, .net, asp.net-mvc-3, entity-framework-4

我使用 Razor 将一些值放入表单的一些隐藏字段中。当我提交表单时，它没有通过实体框架在`context.tt`某个字段的模型中创建的验证。当我提交时，会抛出一个错误，指出该字段不能为空。这让我相信 HTML 中的值是 null。当我检查来源时，这是我发现的：

```
<input Value="1" data-val="true" data-val-number="The field PoolType must be a number." id="PoolType" name="PoolType" type="hidden" value="" />
<input Value="Not Complete" id="LoanStatus" name="LoanStatus" type="hidden" value="" />
<input Value="2012-12-12 09:26.39" data-val="true" data-val-required="The DateStamp field is required." id="DateStamp" name="DateStamp" type="hidden" value="" /> 
```

我想知道为什么`input`with id`LoanStatus`设置了一个值，但它抛出一个错误，说它不能为空。抛出的异常是：

> System.Data.ConstraintException 此属性不能设置为空值。

为了在 HTML 中设置值，我使用 ViewBag 在控制器中设置它，`ViewBag.LoanStatus = "Not Complete";`. 然后在cshtml文件中`@Html.HiddenFor(model => model.LoanStatus, new { @Value = ViewBag.LoanStatus })`

有什么我遗漏的吗，我是 MVC 和实体框架的新手。

**编辑 - 附加代码** 更多隐藏元素

```
@Html.HiddenFor(model => model.ID, new{ @Value = ViewBag.ID })
        @Html.HiddenFor(model => model.Reason, new{ @Value = ViewBag.Reason })
        @Html.HiddenFor(model => model.PoolType, new{ @Value = ViewBag.PoolType })
        @Html.HiddenFor(model => model.LoanStatus, new{ @Value = ViewBag.LoanStatus })
        @Html.HiddenFor(model => model.DateStamp, new{ @Value = ViewBag.DateTime }) 
```

以及生成的html

```
<input Value="55" data-val="true" data-val-number="The field ID must be a number." data-val-required="The ID field is required." id="ID" name="ID" type="hidden" value="" />
        <input Value="1" data-val="true" data-val-number="The field Reason must be a number." id="Reason" name="Reason" type="hidden" value="" />
        <input Value="1" data-val="true" data-val-number="The field PoolType must be a number." id="PoolType" name="PoolType" type="hidden" value="" />
        <input Value="Not Complete" id="LoanStatus" name="LoanStatus" type="hidden" value="" />
        <input Value="2012-12-12 10:00.46" data-val="true" data-val-required="The DateStamp field is required." id="DateStamp" name="DateStamp" type="hidden" value="" /> 
```

**从 .cshtml 文件中 **编辑没有 Html 帮助行的代码**`<input type="hidden" name="LoanStatus" id="LoanStatus" data-val="true" value="@ViewBag.LoanStatus" />`**

 **来自 html 源代码的行 `<input type="hidden" name="LoanStatus" id="LoanStatus" data-val="true" value="Not Complete" />`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:29:16.847

使用`@Html.HiddenFor`输入值时，从您的模型对象中读取。`Value`您尝试通过指定属性值来覆盖它。我想这行不通，如您所见，您会得到空值属性。

要解决您的问题，请不要使用 viewbag，而是将具有设置值的模型对象传递给您的视图，如下所示：

**控制器：**

```
return View(new YourModel { LoanStatus = "Not Complete" }); 
```

**看法：**

```
@Html.HiddenFor(m => m.LoanStatus) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:55:20.217

与其在此处使用 Html 帮助程序，不如尝试手动制作该行，如下所示：

`<input type="hidden" name="LoanStatus" value="@ViewBag.LoanStatus"/>`

我仍然不知道为什么您的每一行都在 2 个地方设置了值。你能发布更多代码吗？

编辑：我认为小写值正在被传递回您的控制器。尝试改用@value（小写v），看看是否可以解决它。**

# javascript - 无法使用jquery获取元素的属性

> ID：13842074
> 
> 赞同：0
> 
> 时间：2012-12-12T14:40:01.903
> 
> 标签：javascript, jquery

我有这个html：

```
<img src="http://localhost:82/Clone//images/hosts/Kinx_9843a.jpg" data-name="/images/hosts/K_9843a.jpg" alt=""> 
```

我试图得到这个：

```
$('body').on('click','.hostPic',function(){ 
    console.log($(this).attr('data-name'));
}); 
```

每当按下图片时，我都想获取它的 data-name 属性，但它不起作用。`undefined`当我尝试检索该属性时，我会收到报告。有什么理由吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:42:32.440

将`hostPic`类添加到该图像。

此外，您可以只使用`.data('name')`，但实际上并没有什么不同。较旧的浏览器可能会遇到问题`.data`，但这对我来说从来都不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:46:59.017

```
$('.hostPic').click(function() {
  console.log($(this).data('name'));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:46:24.753

确保您的图像具有“hostPic”类，然后在您的 jQuery 中执行以下操作：-

```
$('.hostPic').on('click', function() {
  console.log($(this).data('name'));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:59:27.063

以下代码对我有用，也许您附加了错误的事件对象，您可以通过调试`this`对象而不是`data-name`.

另一件事是，如果您打算`.data`仅用于读取字符串，则应将`.attr`其用作`.data`缓存并尝试将值转换为适当的类型，`number`或者`JSON`它比`.attr`.

```
<img src="http://localhost:82/Clone//images/hosts/Kinx_9843a.jpg" data-name="/images/hosts/K_9843a.jpg" alt="">​

​$("img")​.click(function () { alert($(this).attr("data-name")); });​ 
```

# objective-c - iOS 6 的 EKEvent 无法以任何方式工作

> ID：13842075
> 
> 赞同：1
> 
> 时间：2012-12-12T14:40:06.133
> 
> 标签：objective-c, ios6, ekevent, ekeventkit, ekeventstore

我试过征求许可

```
if([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)]) {
// iOS 6 and later
   eventStorerequestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {

}];} 
```

但是弹出窗口没有出现。我尝试了许多示例，尝试了许多项目，但没有一个适用于 iOS 6。这些应用程序不会显示在隐私>日历>中。我想我要疯了。有人可以向我展示一段适用于 iOS 6 的代码，其中弹出窗口请求权限，并在授予权限后将事件导出到日历应用程序。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:32:42.283

首先：我认为你有一个错字（可能只在stackoverflow上）。正确的代码是：

```
[eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error){ }]; 
```

第二：您在尝试设备吗？6.0 模拟器没有日历应用程序（但有日历支持），并且由于某种原因，不请求许可（它总是返回被授予的访问权限）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:24:32.580

只需调用`EKEventStore`. 如果您这样做，它将自动请求许可。

如果它没有尝试进入您的 iPhone 设置：常规 > 重置 > 重置位置和隐私 之后再试一次！

# php - 正则表达式在正则表达式中第一次出现 #STRING# 时停止

> ID：13842078
> 
> 赞同：5
> 
> 时间：2012-12-12T14:40:16.753
> 
> 标签：php, regex

*注意：Array() 的输出是 PHP print_r()*

我有这个 HTML 标签：

```
<tr>
    <td width="40" align="left"><div class="icSkill" id="skill4"></div></td>
    <td colspan="2">SOME_VALUE_I_WANT&nbsp;</td>
</tr> 
```

我真的很想用 RegEx 提取它，并且不想在这种情况下使用 HTML 解析器。

我做这个正则表达式（我使用 s-flag 来忽略文件的换行符）：

```
\<tr\>\<td\swidth="40"\salign="left"\>\<div\s+class="icSkill"\s+id="skill(\d+)".*\<\/tr\> 
```

现在的问题是正则表达式不会在第一个找到的关闭 TR 标记处停止，但我希望它停止。我知道它可能与断言有关，只是我不知道如何去做。

```
Array
(
    [0] => <tr><td width="40" align="left"><div class="icSkill" id="skill4"></div></td><td colspan="2">SOME_VALUE_I_WANT&nbsp;
</td></tr><tr><td rowspan="2" align="left"><div class="icGuard" id="guard9"></div></td></tr>
    [1] => 4
) 
```

像这样的基本示例： /[^<]*/ 在这种情况下不起作用。还有一种方法可以告诉正则表达式，例如：

```
/[^A_STRING]*/ (in words; stop unless you find A_STRING)
OR BETTER EXAMPLE:
/[^A_STRING_FIRST_TIME]*/ (in words; stop unless you find A_STRING for the FIRST_TIME) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T14:48:29.233

问题是[贪婪](http://www.regular-expressions.info/repeat.html#greedy)。`.*`尽可能多地消耗。您可以通过附加以下内容使其变得不贪婪`?`：

```
~<tr><td\s+width="40"\s+align="left"><div\s+class="icSkill"\s+id="skill(\d+)".*?</tr>~s 
```

此外，正如您所看到的，真的没有必要做这么多的逃避。它只会妨碍可读性。

使重复不贪婪的另一种方法是使用修饰符`U`，它使整个模式中的所有重复都全局不贪婪。不过，我更喜欢本地变体（使用`?`）。

在任何情况下，都有另一种模仿的可能性`[^A_STRING]*`（这不起作用，因为它匹配任何不包括`A`, `_`, `S`, `T`, `R`,或`I`的字符串）。您可以在重复的每个位置使用[负前瞻：](http://www.regular-expressions.info/lookaround.html)`N``G`

```
(?:(?!A_STRING).)* 
```

（用这个代替`.*`or `.*?`）。在大多数情况下它应该是等效的，但执行时间可能不同。另外，破译有点困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:34:37.823

这是困难的一个。通常你会有一个类标识符，这会更容易。

因此，让我们确保我理解您想要什么：您需要`<td>`在我们关闭表格行之前捕获最后一个标签中的任何内容。在这种情况下，您需要负前瞻：

`<td(?!.*?<td).*?>(.*?)<\/td>`

这与`s`修饰符一起将捕获`SOME_VALUE_I_WANT&nbsp;`，前提是它位于`<td>`表格行的最后一个元素中。

此正则表达式中唯一不直接的元素是负前瞻运算符`<td(?!.*?<td)`，它将仅捕获一个`<td>`元素，该元素后面没有另一个此类元素。

此外，当您使用星号运算符时，您通常希望确保将其修改为非贪婪，如下所示`(.*?)`：这意味着它在第一场比赛中停止。

# ios - 动画图像/UIView iOS

> ID：13842079
> 
> 赞同：0
> 
> 时间：2012-12-12T14:40:19.533
> 
> 标签：ios, animation, uiview, uiviewanimation

在我的应用程序的主页上，我想为一个滑入视图的 PNG 图像设置动画，然后在第二个图像滑入之前再次滑出，然后滑出。时间只是让观众在每个消失之前阅读。我不知道该怎么做，想要一些输入？看起来很简单，我希望它是，有人可以指导我如何去做。我也希望它循环播放，因此无论何时返回屏幕，它都会保持动画效果。

请问有什么想法吗？只有一天左右才能完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:47:57.747

您可以为此使用核心动画。这真的很容易做到。示例动画：

```
UIImageView *imageView = ...;
imageView.frame = CGRectMake(-160, 100, 250, 200);
[UIView animateWithDuration:1.5 animations:^{
    imageView.frame = CGRectMake(160, 100, 250, 200);
}]; 
```

这`UIImageView`会在 1.5 秒内将 x 坐标从 -160 变为 160。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T07:03:13.440

**//初始点**

```
pImgFlowing.frame = CGRectMake(544, 817, 84, 18);
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:2.0f];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut]; 
```

**//结束点**

```
pImgFlowing.frame = CGRectMake(544, 774, 84, 61);
[UIView commitAnimations]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:10:45.580

或多或少只是扩展了 Tom van Zummeren 的答案。这应该足以理解基本思想。

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    UIImageView *myImageView = [[UIImageView alloc] initWithFrame:CGRectMake(20, -280, 280, 280)];
    [myImageView setImage:[UIImage imageNamed:@"1.png"]];
    [self.view addSubview:myImageView];

    [UIView animateWithDuration:2.0 delay:1.0 options:UIViewAnimationOptionCurveEaseOut animations:^{
        [myImageView setCenter:self.view.center];
    }completion:^(BOOL done){
        [UIView animateWithDuration:2.0 delay:3.0 options:UIViewAnimationOptionCurveEaseIn animations:^{
            [myImageView setCenter:CGPointMake(myImageView.center.x, self.view.bounds.size.height + (myImageView.bounds.size.height / 2))];
        }completion:^(BOOL done){
            [myImageView setFrame:CGRectMake(20, -280, 280, 280)];
            NSLog(@"%@",NSStringFromCGRect(myImageView.frame));
            [myImageView setImage:[UIImage imageNamed:@"2.png"]];
        }];
    }];
} 
```

# java - 调整其父 ViewGroup 的大小后如何调整子视图高度？

> ID：13842081
> 
> 赞同：3
> 
> 时间：2012-12-12T14:40:23.233
> 
> 标签：java, android, android-custom-view

我有自定义视图，它扩展`RelativeLayout`并具有`height`设置为“fill_parent”的子元素。问题是调整父母的身高不会影响其孩子的身高。我怎样才能强迫孩子适应它的父母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:43:45.437

您可以使用 LayoutParams 以编程方式更改高度\宽度，请检查： [如何以编程方式创建一个相对布局，其中两个按钮一个在另一个之上？](https://stackoverflow.com/questions/4979212/programmatically-creating-a-relativelayout-in-android)

# java - 在透明 JFrame 上添加图像

> ID：13842083
> 
> 赞同：3
> 
> 时间：2012-12-12T14:40:30.093
> 
> 标签：java, image, swing, frame, transparent

我想在透明的 JFrame 上显示图像。
图像显示不清晰。如果我添加任何组件，如 JButton 或其他任何组件，它会很好地显示，但其中包含图像的任何组件除外。

这是一个代码示例。

```
import java.awt.Color;
public class PunchFrame2 extends javax.swing.JFrame {

    public PunchFrame2() {
        initComponents();
        setUndecorated(true);
        setBackground(new Color(0,0,0,0));
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jLabel1 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jPanel1.setBackground(java.awt.Color.black);

        jLabel2.setFont(new java.awt.Font("Ubuntu", 1, 48)); // NOI18N
        jLabel2.setForeground(java.awt.Color.white);
        jLabel2.setText("Steve Jobs");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING,             jPanel1Layout.createSequentialGroup()
            .addContainerGap(234, Short.MAX_VALUE)
            .addComponent(jLabel2)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jLabel1)
            .addGap(23, 23, 23))
    );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel2)
            .addContainerGap(21, Short.MAX_VALUE))
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING,      jPanel1Layout.createSequentialGroup()
            .addGap(0, 0, Short.MAX_VALUE)
            .addComponent(jLabel1))
    );

    jLabel3.setIcon(new javax.swing.ImageIcon("/home/username/Desktop/stevejobs.png")); // NOI18N

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addContainerGap())
        .addGroup(layout.createSequentialGroup()
            .addGap(200, 200, 200)
            .addComponent(jLabel3)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel3)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );

    java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
    setBounds((screenSize.width-545)/2, (screenSize.height-290)/2, 545, 290);
}// </editor-fold>                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new PunchFrame2().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JPanel jPanel1;
// End of variables declaration    } 
```

我尝试了很多类似 `jLabel1.setOpaque(false);` 但徒劳的事情。

如何解决这个问题呢？

使用的图像：

![使用的图像](../Images/f726740723f467e7768ffaef359f8cec.png)

结果：

![结果](../Images/0d2b86e0367260b3bc455fc17cd253a9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:54:10.367

You just call `setVisible(true)`. But the default `JFrame` width and height is zero. It will not expand the `JFrame`.

Try to set the size of `JFrame`. there are two ways:

```
PunchFrame2 frame = new PunchFrame2(); 
```

1.  `frame.pack(); // or`
2.  `frame.setSize(300,300);`

    ```
    frame.setVisible(true); 
    ```

# python - 使用索引为 pandas DataFrame 中的特定单元格设置值

> ID：13842088
> 
> 赞同：679
> 
> 时间：2012-12-12T14:40:45.683
> 
> 标签：python, pandas, dataframe, cell, nan

我创建了一个熊猫数据框

```
df = DataFrame(index=['A','B','C'], columns=['x','y']) 
```

并得到了这个

```
    xy
南南
B 南南
C 南 南

```

现在，我想为特定单元格分配一个值，例如 row`C`和 column `x`。我希望得到这个结果：

```
    xy
南南
B 南南
C 10 NaN

```

使用此代码：

```
df.xs('C')['x'] = 10 
```

但是，内容`df`并没有改变。数据框再次仅包含`NaN`s。

有什么建议么？

* * *

## 回答 #1

> 赞同：833
> 
> 时间：2012-12-12T14:51:02.073

[RukTech 的答案](https://stackoverflow.com/a/24517695/190597),`df.set_value('C', 'x', 10)`远远快于我在下面建议的选项。但是，它已被[**弃用**](https://github.com/pandas-dev/pandas/issues/15269)。

展望未来，[推荐的方法是`.iat/.at`](https://github.com/pandas-dev/pandas/issues/15269#issuecomment-276382712).

* * *

**为什么`df.xs('C')['x']=10`不起作用：**

`df.xs('C')`默认情况下，返回一个[带有数据副本](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.xs.html#pandas.DataFrame.xsY)的新数据框，所以

```
df.xs('C')['x']=10 
```

仅修改此新数据框。

`df['x']`返回数据框的视图`df`，因此

```
df['x']['C'] = 10 
```

修改`df`自己。

**警告**：有时很难预测操作是否返回副本或视图。出于这个原因，[文档建议避免使用 "chained indexing" 进行分配](http://pandas.pydata.org/pandas-docs/stable/indexing.html#returning-a-view-versus-a-copy)。

* * *

所以推荐的替代方案是

```
df.at['C', 'x'] = 10 
```

这*确实*修改了`df`.

* * *

```
In [18]: %timeit df.set_value('C', 'x', 10)
100000 loops, best of 3: 2.9 µs per loop

In [20]: %timeit df['x']['C'] = 10
100000 loops, best of 3: 6.31 µs per loop

In [81]: %timeit df.at['C', 'x'] = 10
100000 loops, best of 3: 9.2 µs per loop 
```

* * *

## 回答 #2

> 赞同：249
> 
> 时间：2014-07-01T19:16:40.957

更新：该`.set_value`方法将被[弃用](https://github.com/pandas-dev/pandas/issues/15269)。`.iat/.at`是很好的替代品，不幸的是 pandas 提供的文档很少

* * *

最快的方法是使用[set_value](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.set_value.html)。这种方法比`.ix`方法快约 100 倍。例如：

`df.set_value('C', 'x', 10)`

* * *

## 回答 #3

> 赞同：147
> 
> 时间：2016-07-19T19:59:50.590

您还可以使用`.loc`如下所示的条件查找：

```
df.loc[df[<some_column_name>] == <condition>, [<another_column_name>]] = <value_to_add> 
```

where`<some_column_name`是您要检查`<condition>`变量`<another_column_name>`的列，是您要添加到的列（可以是新列或已经存在的列）。`<value_to_add>`是您要添加到该列/行的值。

此示例不适用于手头的问题，但对于想要根据条件添加特定值的人可能很有用。

* * *

## 回答 #4

> 赞同：68
> 
> 时间：2015-10-15T13:32:55.250

尝试使用`df.loc[row_index,col_indexer] = value`

* * *

## 回答 #5

> 赞同：49
> 
> 时间：2014-01-22T15:48:25.217

设置值的推荐方式（根据维护者）是：

```
df.ix['x','C']=10 
```

使用“链式索引”( `df['x']['C']`) 可能会导致问题。

看：

*   [https://stackoverflow.com/a/21287235/1579844](https://stackoverflow.com/a/21287235/1579844)
*   [http://pandas.pydata.org/pandas-docs/dev/indexing.html#indexing-view-versus-copy](http://pandas.pydata.org/pandas-docs/dev/indexing.html#indexing-view-versus-copy)
*   [https://github.com/pydata/pandas/pull/6031](https://github.com/pydata/pandas/pull/6031)

* * *

## 回答 #6

> 赞同：33
> 
> 时间：2015-10-28T20:56:07.673

这是唯一对我有用的东西！

```
df.loc['C', 'x'] = 10 
```

`.loc` [在此处](http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy)了解更多信息。

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2019-05-07T04:56:20.483

要设置值，请使用：

```
df.at[0, 'clm1'] = 0 
```

*   设置变量的最快推荐方法。
*   `set_value`,`ix`已被弃用。
*   没有警告，不像`iloc`和`loc`

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2019-04-29T15:33:13.977

`.iat/.at`是很好的解决方案。假设你有这个简单的 data_frame：

```
 A   B   C
0  1   8   4 
1  3   9   6
2  22 33  52 
```

如果我们想修改单元格的值，`[0,"A"]`您可以使用以下解决方案之一：

1.  `df.iat[0,0] = 2`
2.  `df.at[0,'A'] = 2`

这是一个完整的示例，如何使用`iat`来获取和设置 cell 的值：

```
def prepossessing(df):
  for index in range(0,len(df)): 
      df.iat[index,0] = df.iat[index,0] * 2
  return df 
```

y_train 之前：

```
 0
0   54
1   15
2   15
3   8
4   31
5   63
6   11 
```

y_train 在调用`iat`要更改为将每个单元格的值乘以 2 的预置函数后：

```
 0
0   108
1   30
2   30
3   16
4   62
5   126
6   22 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2020-12-15T23:15:18.473

我会建议：

```
df.loc[index_position, "column_name"] = some_value 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2018-07-23T10:19:27.037

在我的示例中，我只是在选定的单元格中更改它

```
 for index, row in result.iterrows():
        if np.isnan(row['weight']):
            result.at[index, 'weight'] = 0.0 
```

“结果”是一个数据字段，列“权重”

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2017-06-28T15:39:03.673

你可以使用`.iloc`.

```
df.iloc[[2], [0]] = 10 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2019-02-07T04:19:32.097

`set_value()`已弃用。

从 0.23.4 版本开始，Pandas“*宣告未来*”...

```
>>> df
                   Cars  Prices (U$)
0               Audi TT        120.0
1 Lamborghini Aventador        245.0
2      Chevrolet Malibu        190.0
>>> df.set_value(2, 'Prices (U$)', 240.0)
__main__:1: FutureWarning: set_value is deprecated and will be removed in a future release.
Please use .at[] or .iat[] accessors instead

                   Cars  Prices (U$)
0               Audi TT        120.0
1 Lamborghini Aventador        245.0
2      Chevrolet Malibu        240.0 
```

考虑到这个建议，下面是如何使用它们的演示：

*   **按行/列整数位置**

* * *

```
>>> df.iat[1, 1] = 260.0
>>> df
                   Cars  Prices (U$)
0               Audi TT        120.0
1 Lamborghini Aventador        260.0
2      Chevrolet Malibu        240.0 
```

*   **按行/列标签**

* * *

```
>>> df.at[2, "Cars"] = "Chevrolet Corvette"
>>> df
                  Cars  Prices (U$)
0               Audi TT        120.0
1 Lamborghini Aventador        260.0
2    Chevrolet Corvette        240.0 
```

参考：

*   [pandas.DataFrame.iat](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.iat.html#pandas.DataFrame.iat)
*   [pandas.DataFrame.at](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.at.html)

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2019-11-05T20:39:48.543

将索引与条件一起使用的一种方法是首先获取满足条件的所有行的索引，然后以多种方式简单地使用这些行索引

```
conditional_index = df.loc[ df['col name'] <condition> ].index 
```

示例条件就像

```
==5, >10 , =="Any string", >= DateTime 
```

然后您可以通过多种方式使用这些行索引，例如

1.  替换 conditional_index 的一列的值

```
df.loc[conditional_index , [col name]]= <new value> 
```

2.  替换条件索引的多列值

```
df.loc[conditional_index, [col1,col2]]= <new value> 
```

3.  保存 conditional_index 的一个好处是您可以将一列的值分配给具有相同行索引的另一列

```
df.loc[conditional_index, [col1,col2]]= df.loc[conditional_index,'col name'] 
```

这一切都是可能的，因为 .index 返回一个索引数组， .loc 可以将其用于直接寻址，因此它避免了一次又一次的遍历。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2019-03-08T10:41:07.403

以下是所有用户提供的针对整数和字符串索引的数据帧的有效解决方案的摘要。

`df.iloc`，`df.loc`并且`df.at`适用于两种类型的数据帧，`df.iloc`仅适用于行/列整数索引，`df.loc`并`df.at`支持使用列名和/或整数索引设置值。

当指定的索引不存在时，两者`df.loc`和`df.at`都会将新插入的行/列附加到现有数据框中，但`df.iloc`会 raise `"IndexError: positional indexers are out-of-bounds"`。在 Python 2.7 和 3.7 中测试的工作示例如下：

```
import numpy as np, pandas as pd

df1 = pd.DataFrame(index=np.arange(3), columns=['x','y','z'])
df1['x'] = ['A','B','C']
df1.at[2,'y'] = 400

# rows/columns specified does not exist, appends new rows/columns to existing data frame
df1.at['D','w'] = 9000
df1.loc['E','q'] = 499

# using df[<some_column_name>] == <condition> to retrieve target rows
df1.at[df1['x']=='B', 'y'] = 10000
df1.loc[df1['x']=='B', ['z','w']] = 10000

# using a list of index to setup values
df1.iloc[[1,2,4], 2] = 9999
df1.loc[[0,'D','E'],'w'] = 7500
df1.at[[0,2,"D"],'x'] = 10
df1.at[:, ['y', 'w']] = 8000

df1
>>> df1
     x     y     z     w      q
0   10  8000   NaN  8000    NaN
1    B  8000  9999  8000    NaN
2   10  8000  9999  8000    NaN
D   10  8000   NaN  8000    NaN
E  NaN  8000  9999  8000  499.0 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2019-05-07T14:05:42.647

我测试过，输出`df.set_value`稍微快一点，但官方方法`df.at`看起来是最快的非弃用方法。

```
import numpy as np
import pandas as pd

df = pd.DataFrame(np.random.rand(100, 100))

%timeit df.iat[50,50]=50 # ✓
%timeit df.at[50,50]=50 #  ✔
%timeit df.set_value(50,50,50) # will deprecate
%timeit df.iloc[50,50]=50
%timeit df.loc[50,50]=50

7.06 µs ± 118 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
5.52 µs ± 64.2 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
3.68 µs ± 80.8 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
98.7 µs ± 1.07 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
109 µs ± 1.42 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each) 
```

请注意，这是为单个单元格设置值。对于向量`loc`，`iloc`应该是更好的选择，因为它们是向量化的。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2021-08-16T09:04:08.270

# 避免使用链式索引进行赋值

您正在处理带有[链式索引的分配，](https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy)这将导致`SettingWithCopy` [警告](https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#why-does-assignment-fail-when-using-chained-indexing)。应该通过一切手段避免这种情况。

您的作业将不得不求助于单个`.loc[]`或`.iloc[]`切片，如此[处所述](https://stackoverflow.com/a/68799571/2192488)。因此，在您的情况下：

```
df.loc['C', 'x'] = 10 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-02-07T11:27:26.693

Soo，您的问题是将 ['x',C] 处的 NaN 转换为值 10

答案是..

```
df['x'].loc['C':]=10
df 
```

替代代码是

```
df.loc['C', 'x']=10
df 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-10-07T19:01:45.490

`df.loc['c','x']=10` 这将改变第*c*行和 第*x*列的值。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-02-08T11:09:00.433

如果想将 df 位置 (0,0) 中的单元格更改为字符串，例如`'"236"76"'`，以下选项将起作用：

```
df[0][0] = '"236"76"'
# %timeit df[0][0] = '"236"76"'
# 938 µs ± 83.4 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each) 
```

或使用[`pandas.DataFrame.at`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.at.html)

```
df.at[0, 0] = '"236"76"'
#  %timeit df.at[0, 0] = '"236"76"' 
#15 µs ± 2.09 µs per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
```

或使用[`pandas.DataFrame.iat`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.iat.html)

```
df.iat[0, 0] = '"236"76"'
#  %timeit df.iat[0, 0] = '"236"76"'
# 41.1 µs ± 3.09 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each) 
```

或使用[`pandas.DataFrame.loc`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc)

```
df.loc[0, 0] = '"236"76"'
#  %timeit df.loc[0, 0] = '"236"76"'
# 5.21 ms ± 401 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) 
```

或使用[`pandas.DataFrame.iloc`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc)

```
df.iloc[0, 0] = '"236"76"'
#  %timeit df.iloc[0, 0] = '"236"76"'
# 5.12 ms ± 300 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) 
```

如果时间相关，使用[`pandas.DataFrame.at`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.at.html)是最快的方法。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-03-13T15:48:11.613

如果您不想更改整行的值，而只想更改某些列的值：

```
x = pd.DataFrame({'A': [1, 2, 3], 'B': [4, 5, 6]})
x.iloc[1] = dict(A=10, B=-10) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-07-11T10:42:35.147

从 0.21.1 版本开始，您还可以使用`.at`方法。`.loc`与此处提到的相比存在一些差异- [pandas .at 与 .loc](https://stackoverflow.com/questions/37216485/pandas-at-versus-loc)，但单值替换更快

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-11-21T16:29:54.380

除了上面的答案，这里是一个基准，比较了将数据行添加到现有数据帧的不同方法。它表明使用 at 或 set-value 是大型数据帧（至少对于这些测试条件）最有效的方法。

*   为每一行创建新的数据框，然后...
    *   ...附加它（13.0 秒）
    *   ...连接它（13.1 s）
*   首先将所有新行存储在另一个容器中，一次转换为新数据框并追加...
    *   容器 = 列表列表（2.0 秒）
    *   容器 = 列表字典（1.9 秒）
*   预分配整个数据框，遍历新行和所有列并使用填充
    *   ... 在（0.6 秒）
    *   ... set_value (0.4 秒)

对于测试，使用了包含 100,000 行和 1,000 列以及随机 numpy 值的现有数据框。向这个数据框添加了 100 个新行。

代码见下：

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Wed Nov 21 16:38:46 2018

@author: gebbissimo
"""

import pandas as pd
import numpy as np
import time

NUM_ROWS = 100000
NUM_COLS = 1000
data = np.random.rand(NUM_ROWS,NUM_COLS)
df = pd.DataFrame(data)

NUM_ROWS_NEW = 100
data_tot = np.random.rand(NUM_ROWS + NUM_ROWS_NEW,NUM_COLS)
df_tot = pd.DataFrame(data_tot)

DATA_NEW = np.random.rand(1,NUM_COLS)

#%% FUNCTIONS

# create and append
def create_and_append(df):
    for i in range(NUM_ROWS_NEW):
        df_new = pd.DataFrame(DATA_NEW)
        df = df.append(df_new)
    return df

# create and concatenate
def create_and_concat(df):
    for i in range(NUM_ROWS_NEW):
        df_new = pd.DataFrame(DATA_NEW)
        df = pd.concat((df, df_new))
    return df

# store as dict and 
def store_as_list(df):
    lst = [[] for i in range(NUM_ROWS_NEW)]
    for i in range(NUM_ROWS_NEW):
        for j in range(NUM_COLS):
            lst[i].append(DATA_NEW[0,j])
    df_new = pd.DataFrame(lst)
    df_tot = df.append(df_new)
    return df_tot

# store as dict and 
def store_as_dict(df):
    dct = {}
    for j in range(NUM_COLS):
        dct[j] = []
        for i in range(NUM_ROWS_NEW):
            dct[j].append(DATA_NEW[0,j])
    df_new = pd.DataFrame(dct)
    df_tot = df.append(df_new)
    return df_tot

# preallocate and fill using .at
def fill_using_at(df):
    for i in range(NUM_ROWS_NEW):
        for j in range(NUM_COLS):
            #print("i,j={},{}".format(i,j))
            df.at[NUM_ROWS+i,j] = DATA_NEW[0,j]
    return df

# preallocate and fill using .at
def fill_using_set(df):
    for i in range(NUM_ROWS_NEW):
        for j in range(NUM_COLS):
            #print("i,j={},{}".format(i,j))
            df.set_value(NUM_ROWS+i,j,DATA_NEW[0,j])
    return df

#%% TESTS
t0 = time.time()    
create_and_append(df)
t1 = time.time()
print('Needed {} seconds'.format(t1-t0))

t0 = time.time()    
create_and_concat(df)
t1 = time.time()
print('Needed {} seconds'.format(t1-t0))

t0 = time.time()    
store_as_list(df)
t1 = time.time()
print('Needed {} seconds'.format(t1-t0))

t0 = time.time()    
store_as_dict(df)
t1 = time.time()
print('Needed {} seconds'.format(t1-t0))

t0 = time.time()    
fill_using_at(df_tot)
t1 = time.time()
print('Needed {} seconds'.format(t1-t0))

t0 = time.time()    
fill_using_set(df_tot)
t1 = time.time()
print('Needed {} seconds'.format(t1-t0)) 
```

* * *

## 回答 #23

> 赞同：-4
> 
> 时间：2016-01-26T21:40:21.297

我也在搜索这个主题，我整理了一种方法来遍历 DataFrame 并使用来自第二个 DataFrame 的查找值更新它。这是我的代码。

```
src_df = pd.read_sql_query(src_sql,src_connection)
for index1, row1 in src_df.iterrows():
    for index, row in vertical_df.iterrows():
        src_df.set_value(index=index1,col=u'etl_load_key',value=etl_load_key)
        if (row1[u'src_id'] == row['SRC_ID']) is True:
            src_df.set_value(index=index1,col=u'vertical',value=row['VERTICAL']) 
```

# drupal - 哪个模块与“管理订单”相关（路径：admin/commerce/orders）？

> ID：13842095
> 
> 赞同：0
> 
> 时间：2012-12-12T14:41:00.847
> 
> 标签：drupal, commerce

我有一个商务启动（D7.15），一切正常，但订单管理部分没有......

位于此路径：`http://website/en/admin/commerce/orders`（`http://website/en#overlay=en/admin/commerce/orders`＆`http://website/en?q=admin/commerce/orders`也不起作用）

我收到此错误：

“EntityMetadataWrapperException：缺少数据值。在 EntityMetadataWrapper->value() 中（/Applications/MAMP/htdocs/website/profiles/commerce_kickstart/modules/contrib/entity/includes/entity.wrapper.inc 的第 83 行）。”

这个消息：

“网站遇到意外错误，请稍后再试。”

最大的问题是我不知道哪个模块与这个接口相关，我需要知道，然后我可以更新它和/或尝试自己修复它......

此处启用了“商务”模块：购物车 (commerce_cart) 7.x-1.4 结帐 (commerce_checkout) 7.x-1.4 商务 (commerce) 7.x-1.4 商务 Atos 付款方式 (commerce_atos) 7.x-1.0-beta3+ 1-dev 商务折扣 (commerce_discount) 7.x-1.0-alpha1
商务折扣日期 (commerce_discount_date) 7.x-1.0-alpha1
商务 UI (commerce_ui) 7.x-1.4
客户 (commerce_customer) 7.x-1.4
客户 UI ( commerce_customer_ui) 7.x-1.4
订单项(commerce_line_item) 7.x-1.4 订单
项 UI (commerce_line_item_ui) 7.x-1.4
订单 (commerce_order) 7.x-1.4
订单 UI (commerce_order_ui) 7.x-1.4
付款 (commerce_payment ) 7.x-1.4
支付 UI (commerce_payment_ui) 7.x-1.4
价格 (commerce_price) 7.x-1.4
产品 (commerce_product) 7.x-1.4
产品定价 (commerce_product_pricing) 7.x-1.4
产品定价 UI (commerce_product_pricing_ui) 7.x-1.4
产品参考 (commerce_product_reference) 7.x-1.4
产品 UI (commerce_product_ui) 7.x-1.4
税务 (commerce_tax) 7.x-1.4
税务 UI (commerce_tax_ui) 7.x-1.4
结帐重定向 (commerce_checkout_redirect) 7.x-1.x-dev
商务（产品显示管理器） (commerce_pdm) 7.x-1.0-alpha3
商务地址簿 (commerce_addressbook) 7.x-2.0-rc3
商务后台 (commerce_backoffice) 7.x-2.0-rc1
商务后台订单 (commerce_backoffice_order) 7.x-2.0-rc1
商务后台产品 (commerce_backoffice_product) 7.x-2.0-rc1
Commerce Checkout Progress (commerce_checkout_progress) 7.x-1.2
Commerce Extra Price Formatters (commerce_extra_price_formatters) 7.x-1.1
Commerce File (commerce_file) 7.x-1.0-beta4+4-dev
Commerce Migrate (commerce_migrate) 7.x-1.0
Commerce Price Savings Formatter (commerce_price_savings_formatter) 7.x-1.3
Commerce Stock (commerce_stock) 7.x-1.1 统一费率 (commerce_flat_rate) 7.x-1.x-dev
Shipping (commerce_shipping) 7.x-2.0
Shipping UI (commerce_shipping_ui) 7 .x-2.0
Commerce Extra (commerce_extra) 7.x-1.0-alpha1+8-dev Commerce Extra 地址填充 (commerce_extra_address_populate) 7.x-1.0-alpha1+8-dev Commerce Extra 登录页面 (commerce_extra_login_page) 7.x-1.0-alpha1+8 -dev Commerce Extra Quantity (commerce_extra_quantity) 7.x-1.0-alpha1+8-dev Commerce Kickstart Block (commerce_kickstart_block) 7.x-2.0-rc1
Commerce Kickstart 博客 (commerce_kickstart_blog) 7.x-2.0-rc1
Commerce Kickstart Checkout Redirect ( commerce_kickstart_checkout_redirect) 7.x-2.0-rc1
Commerce Kickstart 评论 (commerce_kickstart_comment) 7.x-2.0-rc1
Commerce Kickstart 内容 UI (commerce_kickstart_content_ui) 7.x-2.0-rc1
Commerce Kickstart 菜单 (commerce_kickstart_menus) 7.x-2.0-rc1
Commerce Kickstart 迁移 (commerce_kickstart_migrate) 7.x-2.0-rc1
Commerce Kickstart 订单 (commerce_kickstart_order) 7.x-2.0-rc1
Commerce Kickstart 付款示例 (commerce_kickstart_payment) 7.x-2.0-rc1
Commerce Kickstart 重置 (commerce_kickstart_reset) 7.x- 2.0-rc1
Commerce Kickstart 搜索 (commerce_kickstart_search) 7.x-2.0-rc1
Commerce Kickstart 服务提供商 (commerce_kickstart_service_provider) 7.x-2.0-rc1
Commerce Kickstart 用户 (commerce_kickstart_user) 7.x-2.0-rc1
Commerce 功能 (commerce_features) 7\. x-1.0-rc1
Commerce Kickstart 帮助 (commerce_kickstart_help) 7.x-2.0-rc1

这里启用了“订单”模块：订单 (commerce_order) 7.x-1.3+40-dev 订单 UI (commerce_order_ui) 7.x-1.3+40-dev （上面的列表中已经有一些“订单”模块。）

请阻止我:(

谢谢你 。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:36:46.727

我认为您的问题不在于订单模块。问题在于与订单流程挂钩的其他模块之一。您有大量的商务模块，可能很难找到有问题的模块。不过，我不使用 commerce kickstart，我只是在猜测。[我会尝试在 drupal 商务网站http://www.drupalcommerce.org/](http://www.drupalcommerce.org/)上发布此内容

# c++ - 调用虚拟方法的不同方式

> ID：13842096
> 
> 赞同：0
> 
> 时间：2012-12-12T14:41:03.263
> 
> 标签：c++, class, methods, virtual

> **可能重复：**
> [C++：访问虚拟方法](https://stackoverflow.com/questions/13841248/c-accessing-virtual-methods)

我正在尝试使用虚拟方法表通过类中的索引调用函数......假设我们有以下代码：

```
class Base
{
public:
    Base() {}
    virtual ~Base() {}

    virtual Base* call_func(unsigned int func_number)
    {
       // Some way to call f_n
    }
protected:
    virtual Base* f_1() const = 0;
    virtual Base* f_2() const = 0;
    virtual Base* f_3() const = 0;
}; 
```

我已经使用函数数组、if-statement 和 case-statement 实现了这一点……那么，是否有更好的方法来仅使用指针（例如访问 vtable）或类似的东西来调用方法？

解决此问题后，我将使用 f_1、f_2、f_3 的不同实现创建派生类（例如派生类 1 和派生类 2），并具有如下所示的类控件：

```
class Control
{
protected:
    Base* current;

public:
    Control(Base* curr = new derived1): current(curr) {}
    virtual ~Control() 
    {
        delete current;
    }
    virtual void call_functions(unsigned int func_numb)
    {
        delete current
        Base* new = current->call_func(func_numb);
        current = new;
    }
}; 
```

对不起我糟糕的英语：S ...并提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:03:50.210

C++ 没有很好的内置自省功能，也就是说，您可能知道，您不能在运行时按名称查找成员函数并从命名查找中调用它。但是你可以创建一个成员函数指针表；例如，请参阅 C++ FAQ Lite 条目中的示例[如何创建和使用指向成员函数的指针数组？](http://www.parashift.com/c++-faq/array-memfnptrs.html). （我希望这与您已经提到的“函数数组”不同，但它似乎确实是实现您想要的最佳方式。）

如果我可能会问，为什么需要按索引调用函数？虚函数通常存在以使用它们自己的一组任务参数来完成特定任务。

如果您要更直接地访问 vtable，您可能会做一些工作，但它会很脆弱且不可移植。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:00:20.517

只是一个粗略的代码。

```
void *vptr = *(void**)this;
void *method = ((void**)vptr)[index + first_method_offset];
typedef void (*method_type)();
void *m = (method_type)method;
m(); 
```

如果您的索引方法不是 vtable 中的第一个，则需要 first_method_offset 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:57:21.750

Use pointer to member functions:

```
virtual Base* call_func(Base *(Base::*pf)())
{
  return this->*pf();
} 
```

If you need the argument to be an arithmetic scalar, use a lookup array:

```
virtual Base* call_func(unsigned int func_number)
{
  static const Base *(Base::*(table[]))() = { &Base::f_1, &Base::f_2, &Base::f_3 };
  return this->*(table[func_number])();
} 
```

# ruby - Ruby，捕获字符串的结尾部分

> ID：13842099
> 
> 赞同：1
> 
> 时间：2012-12-12T14:41:12.827
> 
> 标签：ruby, regex, string

我有许多以下格式的字符串。只有最后一个“/”之后的部分不同......

```
"http://www.google.com/calendar/feeds/user_name%40gmail.com/public/basic/_8gq3ecpo6gp3ib9n8h0jeb9k8l13ab9o85346b9k8gqk4g9h74s4aea26s" 
```

我只需要捕获最后一个“/”之后的部分。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T14:42:16.000

`str.split('/').last``str`你的字符串在哪里

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T14:42:43.700

不需要时不要使用正则表达式

```
s = "http://www.google.com/calendar/feeds/user_name%40gmail.com/public/basic/_8gq3ecpo6gp3ib9n8h0jeb9k8l13ab9o85346b9k8gqk4g9h74s4aea26s"

s.split('/').last # => "_8gq3ecpo6gp3ib9n8h0jeb9k8l13ab9o85346b9k8gqk4g9h74s4aea26s" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T15:00:11.533

`/`如其他答案所示，拆分字符串是一种方法。

URL 基本上是文件名，因此您也可以使用`File.basename`：

```
File.basename('http://example.com/foo')
=> "foo" 
```

或者，在您的情况下：

```
File.basename("http://www.google.com/calendar/feeds/user_name%40gmail.com/public/basic/_8gq3ecpo6gp3ib9n8h0jeb9k8l13ab9o85346b9k8gqk4g9h74s4aea26s")
=> "_8gq3ecpo6gp3ib9n8h0jeb9k8l13ab9o85346b9k8gqk4g9h74s4aea26s" 
```

从技术上讲，正确的做法是将 URL 原样处理，并使用旨在做到这一点的工具将其分解：

```
require 'uri'
uri = URI.parse("http://www.google.com/calendar/feeds/user_name%40gmail.com/public/basic/_8gq3ecpo6gp3ib9n8h0jeb9k8l13ab9o85346b9k8gqk4g9h74s4aea26s")
File.basename(uri.path)
=> "_8gq3ecpo6gp3ib9n8h0jeb9k8l13ab9o85346b9k8gqk4g9h74s4aea26s" 
```

但是，以另一种方式进行操作非常简单，并且通常是安全的。

# database - MS Access 在表中的每一行中搜索宏中的值

> ID：13842103
> 
> 赞同：1
> 
> 时间：2012-12-12T14:41:25.120
> 
> 标签：database, ms-access, macros

我正在尝试为库存数据库编写宏。在启动时，此宏将运行，如果项目数量低于 x，它将弹出一个消息框。（并继续弹出该值下的每个项目，直到表格结束）

我对 Access 还很陌生，并且不太确定宏的过程。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:01:05.570

创建一个查询，该查询返回数量小于目标最小值的所有库存项目。

然后基于该查询构建一个表单。

最后，将该新表单设置为应用程序的启动表单。

使用这种方法，您不会在单独的消息框中一次显示一个低计数项目。所以它可能与你想要的不匹配。看看你的用户喜欢什么。

# cloud-foundry - Cloud Foundry 是否删除了在更高版本的 VMC 中添加环境变量的功能？

> ID：13842104
> 
> 赞同：1
> 
> 时间：2012-12-12T14:41:26.433
> 
> 标签：cloud-foundry

我目前正在使用 VMC 版本 0.4.3，似乎以下添加环境变量的命令在此版本中不起作用：

**vmc env-add {app-name} {key=value}**

此实用程序命令适用于 vmc 版本 0.3.14，现在我无法在最新版本上使用它。

在使用此命令时收到以下消息：“**未知命令 'env-add'。有关可用命令，请参阅“帮助”。** ”

如果有人能对这件事有更多的了解，那就太好了。

非常感谢您的帮助。

谢谢，

金贾尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T15:02:33.407

在较新版本的 VMC 中，env 命令已更改为以下内容；

查看应用程序环境变量

```
vmc env [application name] 
```

设置环境变量

```
vmc set-env [application name] key=value 
```

取消设置环境变量

```
vmc unset-env [application name] key 
```

我们目前正在努力更新 VMC 最新版本的在线文档。

# c# - File.Delete 删除原始文件和转换后的文件

> ID：13842108
> 
> 赞同：1
> 
> 时间：2012-12-12T14:41:36.930
> 
> 标签：c#, asp.net, file, file-io, asp.net-web-api

这是我的 API 方法，它将 .caf 文件上传到服务器，转换为 .mp3 并删除 .caf 文件。但问题是原始文件和转换后的文件都被删除，而不仅仅是原始文件。

```
[HttpPost]
    [ActionName("UploadCompetitionEntry")]
    public async Task<HttpResponseMessage> UploadCompetitionEntry([FromUri]string folderName)
    {
        if (!Request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.UnsupportedMediaType));
        }

        string path = System.Web.Hosting.HostingEnvironment.MapPath("~/" + folderName);

        MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(path);
        var task = Request.Content.ReadAsMultipartAsync(provider);

        // Log exceptions
        await task.ContinueWith(t =>
        {
            if (t.IsFaulted)
            {
                // Log t.Exception
            }
        });           

            var bodyPart2 = provider.FileData.Where(p => p.Headers.ContentDisposition.Name.Replace("\"", string.Empty) == folderName).FirstOrDefault();

            if (bodyPart2 != null)
            {
                string savedFile2 = bodyPart2.LocalFileName;
                string originalFile2 = bodyPart2.Headers.ContentDisposition.FileName.Replace("\"", string.Empty);
                string uniqueFilename = string.Format(@"{0}", Guid.NewGuid());
                string newFile2 = uniqueFilename + Path.GetExtension(originalFile2);

                // Copy file and rename with new file name and correct extension
                FileInfo file2 = new FileInfo(savedFile2);
                file2.CopyTo(Path.Combine(path, newFile2), true);
                file2.Delete();

                if (folderName == "music")
                {
                    //converting .caf to .mp3 and creating a new .mp3 file
                    MediaFuncs.ConvertToMp3(Path.Combine(path, newFile2), uniqueFilename);

                    //deleting the .caf file
                    FileInfo file3 = new FileInfo(Path.Combine(path, newFile2));
                    file3.Delete();
                }
            }         

        return Request.CreateResponse(HttpStatusCode.OK, new ResponseMessage<Object> { success = true, message = "Media Uploaded" });

    } 
```

这是我的转换器方法

```
 public static void ConvertToMp3(string filename, string uniqueFilename)
    {
        string musicPath = System.Web.Hosting.HostingEnvironment.MapPath("~/" + "music");

        System.Diagnostics.ProcessStartInfo info = new System.Diagnostics.ProcessStartInfo();

        info.FileName = System.Web.Hosting.HostingEnvironment.MapPath("~/" + "ffmpeg.exe");
        info.Arguments = " -i " + filename + " " + Path.Combine(musicPath, uniqueFilename + ".mp3");

        System.Diagnostics.Process p1 = System.Diagnostics.Process.Start(info);
    } 
```

难道我做错了什么？如果有人知道删除原始文件的任何其他方法，请告诉我，我整天都在为此烦恼:(

编辑：我放了一个断点并检查了。我想在转换完成之前删除 .caf 文件。因为当我在调用转换器方法之后和删除文件之前放置断点时，.mp3 没有被删除。

那么现在我如何停止删除直到转换完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:09:09.027

在删除源文件之前，您需要等待转换完成。

为此，您可以简单地调用：

```
p1.WaitForExit(); 
```

在结束时`ConvertToMp3`。

请参阅[`WaitForExit`](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)MSDN。

# python - 我们如何从 dnspython 获取 TXT、CNAME 和 SOA 记录？

> ID：13842116
> 
> 赞同：15
> 
> 时间：2012-12-12T14:42:09.757
> 
> 标签：python, dns, dnspython

我需要有一个 dns 查询功能来查询服务器的各种记录。我想出了如何获取 MX 记录（大多数示例都显示了这一点）、A 记录和 NS 记录。如何获取 TXT、CNAME 和 SOA 记录？

示例代码片段：

```
 import dns.resolver
   answer=dns.resolver.query("google.com", "A")
       for data in answer:
           print data.address 
```

我尝试用 TXT 替换查询类型，用 data.text、data.data 等替换 data.address 对象，但最终出现属性错误。我之前提到的数据类型的参考是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-06T02:41:35.013

（回答如何找出返回的数据）

您可以通过类似的方式获取 TXT、CNAME 和 SOA 记录，但您只需要根据 DNS 响应对象获取正确的属性。

使用内置的 python dir() 是您的朋友，也是找出 DNS 响应对象中存在哪些属性的一种方法 - 当 API 文档不可用时很方便。

要找出适当的属性，请将您的 for 循环暂时更改为以下内容：

```
 for data in answer:
       print dir(data)
       print data 
```

**另一种更快的方法是查看 dnspython 的 API 文档**，这些页面列出了每个返回对象的属性。

最后，如果库在 python 中，您可以查看源代码，如果不是，则 C 代码是否可用。

（并回答你的问题：）

**以下是 TXT、CNAME 和 SOA 查询的示例：**

TXT

[http://www.dnspython.org/docs/1.15.0/dns.rdtypes.txtbase.TXTBase-class.html#section-InstanceVariables](http://www.dnspython.org/docs/1.15.0/dns.rdtypes.txtbase.TXTBase-class.html#section-InstanceVariables)

```
answers = dns.resolver.query('google.com', 'TXT')
print ' query qname:', answers.qname, ' num ans.', len(answers)
for rdata in answers:
    for txt_string in rdata.strings:
      print ' TXT:', txt_string 
```

CNAME

[http://www.dnspython.org/docs/1.15.0/dns.rdtypes.ANY.CNAME.CNAME-class.html](http://www.dnspython.org/docs/1.15.0/dns.rdtypes.ANY.CNAME.CNAME-class.html)

```
answers = dns.resolver.query('mail.google.com', 'CNAME')
print ' query qname:', answers.qname, ' num ans.', len(answers)
for rdata in answers:
    print ' cname target address:', rdata.target 
```

SOA

[http://www.dnspython.org/docs/1.15.0/dns.rdtypes.ANY.SOA.SOA-class.html#section-InstanceVariables](http://www.dnspython.org/docs/1.15.0/dns.rdtypes.ANY.SOA.SOA-class.html#section-InstanceVariables)

```
answers = dns.resolver.query('google.com', 'SOA')
print 'query qname:', answers.qname, ' num ans.', len(answers)
for rdata in answers:
    print ' serial: %s  tech: %s' % (rdata.serial, rdata.rname)
    print ' refresh: %s  retry: %s' % (rdata.refresh, rdata.retry)
    print ' expire: %s  minimum: %s' % (rdata.expire, rdata.minimum)
    print ' mname: %s' % (rdata.mname) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-05T13:40:25.870

你可以尝试一些不同的东西。

您可以对任何记录进行一次查询，而不是每次查询每个记录类型。这样，如果该域同时具有 TXT、CNAME 等...您将获得一个包含所有数据的对象。

```
from dns.resolver import dns
name_server = '8.8.8.8' #Google's DNS server
ADDITIONAL_RDCLASS = 65535
request = dns.message.make_query('google.com', dns.rdatatype.ANY)
request.flags |= dns.flags.AD
request.find_rrset(request.additional, dns.name.root, ADDITIONAL_RDCLASS,
                       dns.rdatatype.OPT, create=True, force_unique=True)       
response = dns.query.udp(request, name_server) 
```

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-12T20:41:29.257

以先前的答案为例，使用以下命令创建 dnsdig.py 文件：

```
import sys
import socket
import dns.resolver

print 'Argument List:', str(sys.argv)
site = sys.argv[1]
dns_server = sys.argv[2]

# Basic CNAME query the host's DNS
for rdata in dns.resolver.query(site, 'CNAME') :
    print rdata.target

# Basic A query the host's DNS
for rdata in dns.resolver.query(site, 'A') :
    print rdata.address

# Setting an specific DNS Server
resolver = dns.resolver.Resolver()
resolver.nameservers = [socket.gethostbyname(dns_server)]

# Basic CNAME query with the specific DNS server
answer = resolver.query(site, 'CNAME');
for rdata in answer :
    print rdata.target

# Basic A query with the specific DNS server
answer = resolver.query(site, 'A');
for rdata in answer :
    print rdata.address 
```

跑步：

```
python dnsdig.py www.youtube.com 8.8.8.8 
```

# php - 使用 SimpleXML 通过 PHP 从 MySQL 数据库中导出 XML 的困难

> ID：13842124
> 
> 赞同：1
> 
> 时间：2012-12-12T14:42:35.870
> 
> 标签：php, xml, mysqli

我是一个完全的新手，并且被要求为刚刚离开的某个人（比我知识渊博）完成一个项目。

我目前有一个 MySQL 数据库，我正在尝试将其导出为 XML 文件。这很好，但与 PHP 不同，我不能合并两个单独的列。

因此，在我的 MySQL 数据库中有两个条目——lat（纬度）和 Lon（经度）——的情况下，我无法将它们作为一个条目以 XML 格式输出。

在 PHP 中，我会简单地写：`$latlon = $lat.",".$lon;`

但我不能在下面的 XML 输出中这样做。

有谁知道我如何编写这个来达到所需的结果，只需在一个孩子下列出两个条目？

```
function createxml($x) {
    global $mysqli;
    include('xml.php');
    $sxe = new SimpleXMLElement($xmlstr);
//get mysql data
if ($result = $mysqli->query("SELECT id,county,main_page,lat,lon,volume,texty,pdf,thumb FROM texts3 ORDER BY id ASC LIMIT $x")) 

{
    //found volumes already in DB
        while ($r = $result->fetch_array(MYSQLI_BOTH)) {
            $record = $sxe->addChild('record');

            $record->addChild('latitude', $r['lat']);
            $record->addChild('longitude', $r['lon']);
            $record->addChild('latlon', $r['']);

        }
    $result->close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:33:02.323

如果您有 r 数组，为什么不尝试：

```
while ($r = $result->fetch_array(MYSQLI_BOTH)) {
            $record = $sxe->addChild('record');
             $latlon = $r['lat'].",".$r['lon'];

            $record->addChild('latitude', $r['lat']);
            $record->addChild('longitude', $r['lon']);
            $record->addChild('latlon', $latlon);

        } 
```

# java - Java：同一文件中的两个顶级类

> ID：13842125
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:42:39.407
> 
> 标签：java, class

例如我有`A.java`. 在`A.java`我有：

```
public class A {
  // normal 
}

class B {  // cannot declare: public class B

} 
```

并与`A.java`. 我创建`C.java`并声明：

```
public class C {
  public void methodC() {  
      A a = new A(); 
      B b = new B(); // no error -> B is a public class
  }
} 
```

如果我在文件中创建新的 B 类`C.java`。C 将在文件中引用 B 类`C.java`，而不是`A.java`.

```
class B {
}
public class C {
  public void methodC() {
      B b = new B(); //this B refer to C.java rather than A.java
  }
} 
```

所以，我在这里看到了一些问题：在同一个包中，会有两个相同的类。那么，当我创建时`D.java`，我怎么知道将引用哪个 B 类？

还有一个问题，什么是真正的B类，当我在A类和C类之外声明它时。这一点让我感到非常沮丧。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:03:38.563

当你已经这样做了`A.java`：

```
public class A {
  // normal 
}

class B {  // cannot declare: public class B

} 
```

您将无法`class B`在同一个包中定义相同`C.java`的内容，因为它已经存在于同一个包中

```
class B {            //You won't be able to do this as same class in package exists

}
public class C {
  public void methodC() {
      B b = new B(); //this B refer to C.java rather than A.java
  }
} 
```

我尝试过的如下所示，它向我展示了这一点：

![在此处输入图像描述](../Images/228a4b0414b15c2fddd00e8e09ec5027.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:48:58.533

我猜你在最后一个代码片段中打错了（将 B 声明为公共）。但重要的是你不能在一个包中定义两个同名的类。它会引发编译器错误。我已经使用 IDE 进行了尝试，该项目表明存在歧义，因为 B 类已经定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:49:47.553

您将获得重复的类定义。A.java 将被编译为 A.class 和 B.class。编译 C.java 将导致错误或覆盖 B.class。

B 类不是公共的，它是包本地的，因此只能由同一包中的类使用。

为什么不创建单独的类 BForA 和 BForC 之类的？如果您想重用某些东西，请创建一个共享的 AbstractB 父类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T14:50:59.563

在类 A 中定义的类 B**不是**公共的，它是*包私有*的 - 仅在定义它的包内可见。

当你还在类 D 中定义类 B 时，你会得到一个错误：类型 B 已经定义。

# ef-code-first - 当实际目的地类型是实体框架生成的动态代理时映射到目的地

> ID：13842128
> 
> 赞同：1
> 
> 时间：2012-12-12T14:42:48.600
> 
> 标签：ef-code-first, automapper

我不能让它工作：

```
Mapper.CreateMap<Source, Destination>();

var context = new MyDbContext();

var source = new Source();
var destination= context.Destinations.First();

Mapper.Map<Source, Target>(source, destination) 
```

抛出：：`AutoMapper.AutoMapperMappingException`缺少类型映射配置或不支持的映射。

这有效：

```
Mapper.CreateMap<Source, Destination>();

var source = new Source();
var destination= new Destination();

Mapper.Map<Source, Target>(source, destination) 
```

实体框架正在为我的类创建一个动态代理类`Destination`是它不起作用的原因吗？

没有目标参数它也可以工作，即：

```
var destination = Mapper.Map<Source, Target>(source); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:17:55.197

这是一个错误，已在 AutoMapper 的开发分支上修复。AutoMapper 的预发布版本已经修复，或者稍等一下 2.2.1 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:20:45.030

所以原因是 ef 创建了一个代理。当子类用作目标时会发生异常。看来目标类型必须与用 定义的类型完全相同`CreateMap<>`，派生类型不起作用。

`DynamicMap<>`似乎工作，所以我可能会使用它。

# asp.net-mvc - MVC3 Razor 将模型从视图传递到控制器

> ID：13842131
> 
> 赞同：1
> 
> 时间：2012-12-12T14:42:59.803
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个使用实体框架作为模型层的 MVC3 应用程序。

在 EmployeeController 中，我有：

```
public ActionResult GetEmployeeEdit(String id)
{
    // Get the desired Employee
    var model = GetEmployees().FirstOrDefault(o=>o.EFolderid == id);
    return View("EmployeeEdit", model);
}

private IQueryable<Employee> GetEmployees()
{
    // Returns IQueryable<Employee>
    return _employeeService.GetTable();
} 
```

在 EmployeeEdit 我有：

```
@model Metastorm.Domain.Models.Employee

@{
    ViewBag.Title = "Employee Edit";
 }

@using (Html.BeginForm("SaveEmployee", "Employee", FormMethod.Get, Model))
{
    <fieldset>
        <legend>Edit Employee</legend>
        <br />
        @Html.Label("firstName", "First Name: ")
        @Html.EditorFor(o => @Model.NameFirst) 

        <br />
        @Html.Label("lastName", "Last Name: ")
        @Html.EditorFor(o => @Model.NameLast)        
    </fieldset>

    <br />
    <input class="button" id="submit" type="submit" value = "Save Employee" />
} 
```

现在回到 EmployeeController：

```
[HttpGet]
public ActionResult SaveEmployee(Employee employee)
{
    if (ModelState.IsValid)
    {
        // Get the Employee Model again from Entity, Update and save
        // Unfortunately, the employee object's FolderId value is null
    }

    // Just getting a model to satisfy the function
    var model = GetEmployees().FirstOrDefault();
    return View("EmployeeEdit", model);
} 
```

我遇到的问题是员工对象上的所有属性都是空的，除了 Employee.NameFirst 和 Employee.NameLast，它们恰好是使用 Html.EditorFor 在视图中公开的属性。

总之，我得到了一个 Employee 模型对象，它是完全水合的。我将此模型从控制器传递到视图。在视图中，允许更新选定的字段。然后将 Employee 模型传递回持久更新的控制器。

我的问题是如何保持最初从 Controller 传递到 View 的 Employee 模型完好无损。换句话说，我想要模型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-21T17:58:39.193

尝试使用此代码：

```
[HttpGet]
public ActionResult SaveEmployee([Bind(Include = "NameFirst,NameLast,EFolderid")] Employee employee)
{
    if (ModelState.IsValid)
    {
        // Do your staff
        // The employee object's FolderId value will be not null
    }

    // Just getting a model to satisfy the function
    var model = GetEmployees().FirstOrDefault();
    return View("EmployeeEdit", model);
} 
```

这将强制对象员工的数据成员“NameFirst、NameLast、EFolderid”保持不变。您需要在 include 语句中声明您希望在 Http 请求期间保留的所有成员。

您还应该在您的视图中，在表单中添加此代码，否则 EFolderid 数据将丢失：

```
@Html.HiddenFor(o=> @Model.EFolderid) 
```

为要保留的每个成员添加“HiddenFor”声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:51:57.067

要在 Post 操作中获取模型属性，您需要在表单中包含所有属性。正确的模型序列化是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T16:31:58.603

我走了一条不同的路线。我创建了一个视图模型，然后使用 AutoMapper 将 Employee 对象的属性映射到视图模型。我将视图模型传递给视图，进行更改，然后将视图模型传递回 Action。然后我可以使用 AutoMapper 将视图模型映射回 Employee 对象的新实例，然后持久化更改。

# ruby-on-rails - 在开始/确保块内返回保存结果

> ID：13842135
> 
> 赞同：0
> 
> 时间：2012-12-12T14:43:07.213
> 
> 标签：ruby-on-rails, ruby

我在rails中有一个attr_accessor的setter方法

```
 # setter method of the shopify_p accessor
 def shopify_v=(s)
   begin
     self.product.shop.connect_to_store
     @shopify_v = s if s.save
   ensure
     ShopifyAPI::Base.site = nil
   end
 end 
```

如果保存成功，我希望它返回 true，如果保存操作不起作用，我希望它返回 false。

相反，它总是输出 s 对象（或@shopify_v，我不知道）。

如何根据保存操作使其返回 true 或 false？

谢谢，奥古斯托

**更新#1**

这里是同一个attr_accessor的getter方法。基本上，它仅在以前从未这样做过的情况下才从服务器下载对象。

```
 # getter method of the shopify_v accessor
      def shopify_v
       if @shopify_v.nil?
         begin
           self.product.shop.connect_to_store
           @shopify_v = ShopifyAPI::Variant.find(self.shopify_id)
         ensure
           ShopifyAPI::Base.site = nil
         end
         puts "remote"
         return @shopify_v
       else
         puts "local"
         return @shopify_v
       end
      end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:50:41.477

```
def shopify_v=(s)
  begin
    self.product.shop.connect_to_store
    @shopify_v = s if s.save
  ensure
    ShopifyAPI::Base.site = nil
  end
  @shopify_v.present? # will return true or false
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T11:30:49.617

我会使用例外，因为无法保存是一种例外情况。此外，只要可行，方法应该*要么*有副作用，要么返回一个值。

例如：

```
class ShopifyError < StandardError ; end

def shopify_v=(s)
   begin
     self.product.shop.connect_to_store
     raise ShopifyError unless s.save
     @shopify_v = s
   ensure
     ShopifyAPI::Base.site = nil
   end
 end 
```

在来电者中：

```
begin
    ...
    model.v = s
    ...
rescue ShopifyError
    # set flash[:notify], or whatever error handling is appropriate
end 
```

* * *

此外，还有更简洁的方法来构建 getter。考虑做这样的事情：

```
 # getter method of the shopify_v accessor
  def shopify_v
    @shopify_v ||= fetch_v
  end

  private

  def fetch_v
     begin
       self.product.shop.connect_to_store
       ShopifyAPI::Variant.find(self.shopify_id)
     ensure
       ShopifyAPI::Base.site = nil
     end
  end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T15:01:41.813

无论您尝试返回什么，setter*总是返回正在设置的值。*所以你应该使用另一个方法名，例如：

```
def set_shopify_v(s)
  self.product.shop.connect_to_store
  status = s.save
  @shopify_v = s if status
  status
rescue => exc
  # Rails.logger.error(...) 
  false
ensure
  ShopifyAPI::Base.site = nil
end 
```

# jquery-ui - 使用 Meteor 保存 jQueryUI 可排序列表顺序的最佳方法

> ID：13842137
> 
> 赞同：4
> 
> 时间：2012-12-12T14:43:08.230
> 
> 标签：jquery-ui, jquery-ui-sortable, meteor

我需要一些指导/建议，以找到一种最佳方式来保存利用 Meteor 的可排序列表的顺序。

以下是我正在尝试做的缩小版本。该应用程序是一个简单的待办事项列表。用户的最终目标是对从数据库中提取数据的列表进行排序。当用户对任务进行排序时，我想保存任务的顺序。

我已经在没有 Meteor 的情况下使用 php/ajax 调用使用[sortable 的 update 事件](http://api.jqueryui.com/sortable/#event-update)实现了这个应用程序，该事件将删除数据库中的条目并将其替换为当前在 DOM 中的条目。我很想知道是否有更好的方法来利用 Meteor 的功能来做到这一点。

以下示例代码直接来自[现场演示](http://petahhh-todo.meteor.com/)。

HTML：

```
<template name="todo_list">
    <div class="todo_list sortable">
       {{#each task}}
            <div class="task">
                <h1>{{title}}</h1>  
                {{description}} 
            </div>
        {{/each}}
    </div>
</template> 
```

JS（没有简单地填充数据库的 Meteor.isServer。）：

```
if (Meteor.isClient) {
     //Populate the template
     Template.todo_list.task = function () {
        return Tasks.find({});
     };

     //Add sortable functionality
     Template.todo_list.rendered = function () {
        $( ".sortable" ).sortable();
        $( ".sortable" ).disableSelection();
     };
} 
```

示例数据（Tasks.find({}) 的输出）：

```
[{
   title:"CSC209",
   description:"Assignment 3"
 },
 {
   title:"Laundry",
   description:"Whites"
 },
 {
   title:"Clean",
   description:"Bathroom"
 }] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T00:46:39.040

您可能希望首先通过集合上的新字段对[项目](http://docs.meteor.com/#sortspecifiers)进行排序，然后，您需要挂钩到[jQuery 可排序`update`事件](http://api.jqueryui.com/sortable/#event-update)：

```
if (Meteor.isClient) {
     // Populate the template
     Template.todo_list.task = function () {
        return Tasks.find({}, { sort: ['order'] });
     };

     // Add sortable functionality
     Template.todo_list.rendered = function () {
        $('.sortable').sortable({
            update: function (event, ui) {
                // save your new list order based on the `data-id`.
                // when you save the items, make sure it updates their
                // order based on their index in the list.
                some_magic_ordering_function()
            }
        });
        $( ".sortable" ).disableSelection();
     };
} 
```

你的模板看起来有点像这样：

```
<template name="todo_list">
    <div class="todo_list sortable">
       {{#each task}}
            <div class="task" data-id="{{_id}}">
                <h1>{{title}}</h1>  
                {{description}} 
            </div>
        {{/each}}
    </div>
</template> 
```

并且当该事件被触发时，它将确定列表的顺序并将新的保存`order`在集合的文档中。

这并不是一个完整的答案，但希望它会有所帮助。

# php - SSL 读取：errno 104 仅适用于某些用户

> ID：13842138
> 
> 赞同：0
> 
> 时间：2012-12-12T14:43:12.463
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在通过 CURL 使用 FQL 语句查询图形 api，这对除少数用户外的所有用户都有效。

执行 CURL 请求时，会引发以下错误

> SSL 读取：错误：00000000:lib(0):func(0):reason(0)，errno 104

我有几个测试帐户，其中 2 个正在工作，1 个没有经过我的测试：

使用户 Admin / Developer { as app is in sandbox } 安全和不安全的浏览

2 个帐户在上述所有条件下都有效，但一个不工作的帐户不适用于每种条件。

我想知道 Facebook 是否有一些不同类别的用户，因为它的发生，可能是，不知道

我与其他应用程序交叉检查了相同的帐户，因此存在相同的结果，我假设这与用户本身有关。谷歌搜索但没有成功。

解决此问题的任何想法或解决方案。

**更新**

这是代码

```
$graph_api_query = 'https://graph.facebook.com/me/friends?access_token=' . $this->loadAccessTokenFromDB() . "&fields=name,id,picture";
$graph_api_result = send_request($graph_api_query, 'GET'); ## the curl call 
foreach($graph_api_result->data as $friendData){
    $friends[] = array(
        'id' => $friendData->id,
        'name' => $friendData->name,
        'picture' => $friendData->picture->data->url
    ); 
```

另一个例子

```
$fql_query_url = 'https://graph.facebook.com/fql?q=';
$fql_query_url .= '{"friends+count":"';
$fql_query_url .= 'SELECT+uid+,+last_name+,+pic+,+friend_count+FROM+user+WHERE+uid+IN+(';
$fql_query_url .= 'SELECT+uid2+FROM+friend+WHERE+uid1=me())';
$fql_query_url .= '+ORDER+BY+friend_count+DESC';
$fql_query_url .= '",';
$fql_query_url .= '"my-friends-count":"';
$fql_query_url .= 'SELECT+friend_count+FROM+user+WHERE+uid=me()';
$fql_query_url .= '"}';
$fql_query_url .= '&access_token=' . $this->session->userdata('access_token') ; #$this->facebooksession->access_token;
#echo $fql_query_url;
$fql_query_result = send_request($fql_query_url, 'GET'); 
```

工作用户 ID 是`656328662`

用户 ID 不工作是`584488596`

问候

# jquery - iPad上jw播放器上的jQuery点击事件

> ID：13842149
> 
> 赞同：1
> 
> 时间：2012-12-12T14:43:59.650
> 
> 标签：jquery, ipad, jwplayer

我目前在页面上运行 jwplayer。单击时，其中一个导航菜单位于视频顶部。即使在使用 HTML5 播放器时，在桌面上也可以正常工作。但是，如果我在 iPad 上尝试它，它不会收到点击事件，实际上它们会直接通过菜单 div 并且 jwplayer 会注册点击。

如果我暂停视频，所有点击事件都会在菜单上正常工作。

以前有没有人反对过这个？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T15:18:30.983

这里的问题是，在 iPad 上，元素区域内发生的所有触摸事件都被视频元素捕获。这是 iOS Safari 浏览器的一个众所周知的限制。

有趣的是，此限制仅适用于启用视频元素的 iOS 控制栏时。如果控件被禁用，则视频元素不再“窃取”事件。

JW Player 6.0 支持一个名为“mobilecontrols”的未记录选项，当设置为“true”时，JW Player 将禁用 iOS 视频控件并自行绘制，从而解决您的问题。JW Player 尚未针对触摸事件进行优化处理，这就是我们默认不这样做的原因。您应该自行评估该行为是否可以接受（例如，拖动时间滑块在释放之前无效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:50:11.623

看起来很可能导航菜单具有与视频播放器重叠的不正确 css 声明。

# c# - C#遍历对象层次结构以执行方法

> ID：13842152
> 
> 赞同：3
> 
> 时间：2012-12-12T14:44:04.610
> 
> 标签：c#

我有一个 Case 对象，它本身包含许多对象（见下文），它又包含对象。

这些对象可以继承自实现 ValidateObject 方法的 BaseDto 类，该类在当前对象上执行 DataAnnotation 验证器，从而返回验证错误，并累积到 ValidationResult 集合中。

我想将以下杂乱的语法转换为可以遍历给定对象的对象层次结构的东西，并为实现 ValidateObject 的每个对象（及其子对象！）执行它。

我现在感觉有点卡住了，所以我会很感激任何想法。

```
cCase.ValidateObject() &
cCase.Object1.ValidateObject() &
cCase.Object2.ValidateObject() &
cCase.Object3.ValidateObject() &
cCase.Object3.ChildObject1.ValidateObject() &
cCase.Object3.ChildObject2.ValidateObject() &
cCase.Object3.ChildObject3.ValidateObject() &
cCase.Object3.ChildObject4.ValidateObject() &
cCase.Object3.ChildObject4.ChildChildObject1.ValidateObject() &
cCase.Object3.ChildObject5.ValidateObject() &
cCase.Object4.ValidateObject() &
cCase.Object4.ChildObject6.ValidateObject(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:29:58.653

我会使用这样的扩展方法：

```
public interface IValidatable
{
    bool ValidateObject();
}

public static class ValidateExtensions
{
    public static bool ValidateAll(this IValidatable item)
    {
        if (!item.ValidateObject())
            return false;

        const BindingFlags flags = BindingFlags.GetProperty | BindingFlags.Instance | BindingFlags.Public;
        var type = item.GetType();
        var props = type.GetProperties(flags).Select(x => x.GetValue(item));
        var fields = type.GetFields(flags).Select(x => x.GetValue(item));
        return props
            .Concat(fields)
            .OfType<IValidatable>()
            .Select(x => x.ValidateAll())
            .All(x => x);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:07:43.363

您需要`BaseDto`使用反射获取从类继承的所有字段：

```
public abstract class BaseDto
{
    public abstract bool ValidateObject();
}

// Sample class without nested fields, requiring validation.
public class Case2 : BaseDto
{
    public override bool ValidateObject()
    {
        Console.WriteLine("Validated: " + ToString());
        return false;
    }
}

// Sample nested class with nested fields, requiring validation.
public class Case1 : BaseDto
{
    private Case2 Object1 = new Case2();
    private Case2 Object2 = new Case2();
    private Stream stream = new MemoryStream();

    public override bool ValidateObject()
    {
        Console.WriteLine("Validated: " + ToString());
        return true;
    }
}

public class Case : BaseDto
{
    private Case1 Object1 = new Case1();
    private Case2 Object2 = new Case2();
    // don't touch this field
    private Stream stream = new MemoryStream();
    private Case1 Object3 = new Case1();

    public override bool ValidateObject()
    {
        Console.WriteLine("Validated: " + ToString());
        return true;
    }

    public bool ValidateAll()
    {
        if (!ValidateObject()) return false;
        return ValidateAll(this);
    }

    private bool ValidateAll(object o)
    {
        foreach (FieldInfo fieldInfo in o.GetType().GetFields(BindingFlags.Instance |
               BindingFlags.NonPublic |
               BindingFlags.Public))
        {
            BaseDto current = fieldInfo.GetValue(o) as BaseDto;

            if(current != null)
            {
                bool result = current.ValidateObject();
                if(!result)
                {
                    return false;
                }
                return ValidateAll(current);
            }
        }

        return true;
    }
} 
```

调用`ValidateAll()`根对象。在它内部遍历所有从 派生的字段，`BaseDto`以递归方式验证它们以及其中的所有字段。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-12T14:49:07.410

让层次结构中的每个类都覆盖`ValidateObject()`以验证其子对象会更干净：

```
public override bool ValidateObject()
{
    return base.ValidateObject() & 
        this.Object1.ValidateObject() &
        this.Object2.ValidateObject() &
        this.Object3.ValidateObject() &
        this.Object4.ValidateObject();
} 
```

等等然后客户端可以调用`ValidateObject()`根对象。

# java - Java 应用程序的生命周期

> ID：13842155
> 
> 赞同：2
> 
> 时间：2012-12-12T14:44:22.460
> 
> 标签：java, lifecycle

它最知名的问题 Applet vs Application 和常见的答案是 applet 开始于，`init()`而应用程序开始于`main()`.

**Applet 的生命周期：init() -> start() -> paint() -> stop() -> destroy()**

但是，应用程序呢？它从**main()**开始，然后是**destroy()** ?? 还是取决于编码部分？请纠正我，如果我在任何时候错了。

假设这是简单的java代码

```
public class MyClass {

    public static void main(String  args[])
    {
        System.out.println("Hello World !!");
    }
} 
```

我发现[了这个](http://technofriends.in/2007/09/30/java-lifecycle-of-a-java-program/)，但我认为，这是所有人（applet、servlet、应用程序）的共同生命周期。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T14:47:19.357

您发布的链接讨论了创建应用程序的周期。

对于 Java 应用程序，生命周期只是`main()`功能。当所有非恶魔线程都已终止（线程默认为非恶魔）或被`System.exit()`调用时，应用程序将结束。

如果您不启动任何线程，则唯一的线程是主线程，它将在`main()`函数结束时终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:03:16.503

想在@Thirler 帖子上添加。

**没有 main**方法的类的生命周期由其对象的范围控制。因此，一旦（通过 new ）创建了任何对象，它们就会存在，并且当为类创建的引用数量变为 0 时，它们就会超出范围。

因此，一旦所有对象都被垃圾回收，并且如果它们不是弱引用、软引用和幻像引用，类的生命周期就会结束。

生命周期：

**类加载-->对象创建-->所有对象无效-->垃圾回收-->结束**

# android - 如何在来电屏幕上叠加弹出窗口而不失去当前通话的焦点

> ID：13842158
> 
> 赞同：1
> 
> 时间：2012-12-12T14:44:26.123
> 
> 标签：android

我知道这与[这个](https://stackoverflow.com/questions/8699257/popup-over-incoming-call-screen)问题相似，但我的需求完全不同。

我正在阅读 PHONE_STATE 以查看是否正在响铃。但问题是我在我的android清单中定义的广播接收器中这样做。现在，当我接到电话时，我会调用一个以对话为主题的活动，因为我不知道从我的广播接收器向 android 手机添加视图的其他方法。但问题是即使我设置了 NON_TOUCHABLE 标志和其他几个来电屏幕仍然失去焦点。我知道我可以弹出一个叠加层而不会失去焦点，因为有几个应用程序可以做到这一点。

有谁知道如何实现这一目标？

# php - 为新的 API 使用 SOAP 或 REST

> ID：13842163
> 
> 赞同：3
> 
> 时间：2012-12-12T14:44:48.140
> 
> 标签：php, api, rest, soap

（不是[我应该使用休息还是肥皂](https://stackoverflow.com/questions/10122846/should-i-use-rest-or-soap)的副本。那个问题只有 1 个答案，除了开销之外没有提供很多论据）。

在将此问题标记为重复之前，请考虑我正在寻找在我之前做出选择并根据自己的经验解释他们的原因的人的答案。简单陈述“开销”或“更复杂”的答案不符合该配置文件。

现在的问题：

不久前，我开始使用 Soap（PHP / Zend_Soap_Server，Zend_Soap_Autodiscover）设置一个新的 api。虽然我已经弄清楚如何使用肥皂，但复杂性让我怀疑这是否是未来维护的好选择。

我听说过 REST，但没有任何经验。

所以问题是：REST 与 SOAP 的优缺点是什么？在创建全新的 api（相当复杂的 api，几十种方法，使用 ssl，必须具有良好的安全性等）、REST 或 SOAP 时，您有什么建议。

如果您认为您的答案在 REST 和 SOAP 之间的平衡中悬而未决，并且特定的依赖项或功能会影响规模，请务必询问您需要知道的任何内容。我会尽快回复。

api功能的简短列表：

*   验证
*   为前端执行数学函数
*   向前端提供二进制文件（发票）
*   各种信息的基本CRUD

api的位置基本如下：

Internet -> 网站 -> [内部网络] -> API/后端 -> 数据库

提前感谢您的时间..

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-12T23:39:57.017

这当然是一个非常有争议的话题，但与此同时，出于多种原因，大多数新服务都是 REST。我不会介绍两者之间的差异（因为这是有据可查的），但更多的是我认为您今天（2012 年）使用 REST 构建新服务的原因：

*   REST 要简单得多，基本上只是建立在 HTTP 之上
*   您可以使用 Web 浏览器或 curl 或[httpie 之](https://github.com/jkbr/httpie)类的工具来测试（和调试）REST 服务。是的，这在技术上也可以使用 SOAP，但是您必须对 SOAP 模式有所了解。
*   同样，只要您有访问 HTTP 的方法，您就可以构建一个 REST 客户端。SOAP 需要支持 SOAP 的库
*   REST 更像是一种风格，建立在 HTTP 之上，而 SOAP 是 HTTP 之上的完整协议（这也是一种协议）
*   SOAP 最终得到了疯狂的扩展协议，如 WS-Security、WS-Encryption（本质上，这些协议是由委员会设计的极其复杂的解决方案，用于解决几十年前互联网其他部分为 HTTP 解决的问题）

如果您查看 Internet 上的一些主要 API（例如 Google、Facebook、Twitter 等），您会发现很多 REST，而几乎没有 SOAP。那些确实有 SOAP 接口的人正在弃用或完全放弃它们，因为几乎没有理由再坚持使用它了。

事实上，许多大型服务正在更进一步，只提供 JSON 格式的 REST 服务，而不是 XML 或两者兼而有之，因为与 SOAP 之上的 REST 一样，JSON 在大小和简单性方面优于 XML继续支持 XML 没有多大意义。

* * *

与 SOAP 相比，REST 也几乎没有缺点。

关于我能想到的唯一实际考虑是从客户的角度来看。使用 SOAP（由于 WSDL，假设您生成了一个），您可以将支持 SOAP 的 IDE 指向服务（例如 VisualStudio），它将生成基于远程服务的本机客户端代理 API。这在快速启动和运行方面有点好，但有其自身的一组缺点：它迫使您使用服务中定义的对象（而对于 REST，只要数据映射，您就可以使用自己的对象定义in)，并且取决于远程服务如何处理版本控制（或不处理）以及您如何使用它，您可能最终不得不更新应用程序的主要部分，因为命名更改这样简单。

从服务器的角度来看，我真的看不出选择 SOAP 而不是 REST 的任何技术优势。

TL;DR：SOAP 不一定*不好*，只是 REST 更好。

# algorithm - 高效的重复分拣

> ID：13842164
> 
> 赞同：1
> 
> 时间：2012-12-12T14:44:48.923
> 
> 标签：algorithm, sorting

我在由 (x,y) 坐标定义的图上有一组 N 个点，以及一个带有成对距离的表格。我希望生成一个具有它们相对“密切度排名”的表，例如如果 closeness[5][9] == 4，则节点 9 是相对于节点 5 的第四个最接近的项目。

这样做的明显方法是生成一个索引列表并根据每个 i (1->n) 的 d[i][j] < d[i][k] 对它们进行排序，然后通过知识转换表sorted[5][4] == 9 意味着接近度[5][9] == 4。

这将需要 O(n² log n) 时间。我觉得可能有更有效的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:31:09.397

好的，我将尝试对此进行尝试。

背景知识：这个问题与k-最近邻有些关系。我不确定你是如何生成成对距离的，但是 kd 树非常擅长解决这类问题。

现在，即使您使用 kd 树，它也会有所帮助（您只查询您需要的内容，而不是对所有点进行排序）：在 O(N log N) 时间内构建树，然后为您想要的 K 个最近点要查询，每个都需要 O(log N) 时间。最后，您正在查看 O(N log N) + O(NK log N)。

好的，现在，实际的启发式部分。这将取决于您的数据，您可能想查看它们是靠在一起还是相距很远。但是，您可以尝试分而治之的方法，将飞机分成垃圾箱。当您需要找到最近的点时，找出您正在处理的点属于哪个 bin，然后您只使用相邻的 bin，并在需要更多点时探索更多的相邻 bin。

希望这会有所帮助，祝你好运。

# java - IntelliJ IDEA 12.0 JVM 启动错误

> ID：13842165
> 
> 赞同：11
> 
> 时间：2012-12-12T14:44:49.417
> 
> 标签：java, intellij-idea

我刚刚升级到`IntelliJ IDEA 12.0`并在尝试启动时立即收到错误：

```
The JVM could not be started.  The maximum heap size (-Xmx) might be too large or 
an antivirus or firewall tool could block the execution. 
```

我检查了我的`idea.exe.vmoptions`文件，最大堆大小只有 640m（我有 8 GB 的物理内存并且没有运行任何其他应用程序）。

**idea.exe.vmoptions**

```
-Xms128m
-Xmx640m
-XX:MaxPermSize=640m
-XX:ReservedCodeCacheSize=64m
-XX:+UseCodeCacheFlushing
-ea
-Dsun.io.useCanonCaches=false 
```

我仍然`IntelliJ IDEA 11.4`在我的机器上运行它（使用与 max heapsize in 相同的值`idea.exe.vmoptions`）。自`IntelliJ IDEA 11.4`运行以来，我认为这不是防病毒或防火墙问题。我也检查了这些设置。

任何人都遇到过这个或有任何想法（没有双关语）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T15:04:50.103

请[参阅此答案](https://stackoverflow.com/a/13489882/104891)以了解问题背景和解决方案。

您的问题似乎与以下内容完全相同：

*   [如何将 intellij 32bit xmlx 增加超过 1GB？](https://stackoverflow.com/q/13489469/104891)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T10:18:14.240

假设您在 Windows 上，我很好奇为什么您在拥有 64 位机器时运行 32 位版本的 intellij？

我遇到了同样的错误，发现发生了两件事。首先是我在任务栏中的链接指向了idea.exe而不是idea64.exe，这意味着我只启动了32位版本的intelliJ。

其次，还有另一个 64 位的 vm 选项文件。idea64.exe.vmoptions

在切换到 64 位 exe 并确保我想要的 vm 选项在 vmoptions 文件中是正确的后，我没有任何进一步的问题。

在另一个有趣的注释中，我发现在 32 位机器上，当 32 位版本的 intelliJ 设置为 -Xmx 的内存为 1gb 并且我打开了 chrome 时，我会收到错误消息。如果我关闭 chrome，我将不再收到错误消息。我认为这与 jvm 在启动之前验证所需的内存量是否可用有关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-04T07:07:22.313

尝试将您的想法配置为默认值

```
-Xms128m
-Xmx512m
-XX:MaxPermSize=250m
-XX:ReservedCodeCacheSize=64m
-XX:+UseCodeCacheFlushing
-ea
-Dsun.io.useCanonCaches=false 
```

VM 选项从 IDE_HOME\bin\[bits][.exe].vmoptions 文件加载。

更多信息：[https ://intellij-support.jetbrains.com/entries/23393413-The-JVM-could-not-be-started-The-main-method-may-have-throw-an-exception](https://intellij-support.jetbrains.com/entries/23393413-The-JVM-could-not-be-started-The-main-method-may-have-thrown-an-exception)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-01T13:40:45.733

我发现从 32 位版本切换到 64 位版本会导致问题，因为我的 Windows 快捷方式仍然指向旧的idea.exe，而不是正确的idea64.exe。

# ios - 仅在一个地区更新 iOS 应用程序

> ID：13842169
> 
> 赞同：3
> 
> 时间：2012-12-12T14:45:00.417
> 
> 标签：ios, app-store, app-store-connect

是否可以仅在一个区域内将更新推送到 iOS 应用程序？

我有一个现有的免费应用程序，我正在为此开发一个重要的更新。我想仅在一个地区试用此更新，以发现错误并尝试定价，然后再将其推广到所有地区。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:47:28.280

不，这是不可能的——你必须为此发布一个新应用程序。或者您为所有人更新，然后在开始时进行位置检测并锁定/解锁新功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:50:23.607

仅当您能够应付您的应用程序无法在其他地区销售时。

您可以将更新限制在部分地区，只有那些地区才能获得更新，但对于所有其他地区，该应用程序将从商店中消失。

现有客户将不会受到影响，因为他们将能够使用他们安装的版本，但在您的试用期内，您也不会获得任何新客户（在关闭的地区）

# r - 绘图区域外的 Directlabels / 禁用 directlabels 的自动调整大小

> ID：13842170
> 
> 赞同：2
> 
> 时间：2012-12-12T14:45:07.190
> 
> 标签：r, ggplot2, labels

默认情况下，包“directlabels”显然会尝试通过减小标签字体大小来使每个标签适合正常绘图区域内。

下面，`Label for One`和`Label for Two`应该`Label for Threeeeeeeeee`都具有相同的字体大小，如果标签超出绘图区域`clip`是可以的（因为禁用自定义注释以显示）。

事实上，我可能想要设置`xlim=c(1,3)`并且标签应该完全在绘图区域之外。下图左栏为`xlim=c(1,3.4)`，右栏为`xlim=c(1,3)`。

我了解到`cex`可以用来重置标签的字体大小，但它似乎与包的标签分离算法冲突。下图的顶行是否`cex`，底行是`cex=1`。

找到一种方法让标签不重叠，字体大小相同，并且与`xlim=c(1,3)`and一起使用会很棒`xlim=c(1,3.4)`。

![在此处输入图像描述](../Images/90c634e8e279c8aa18037f7d06c1547b.png)

```
library(reshape)
library(ggplot2)
library(directlabels)

df=data.frame(
  x = 1:3,
  One=c(12, 8, 13),
  Two=c(13, 7, 11),
  Threeeeeeeeee=c(11, 9, 11))

df.d.melt = melt(df[,c("x","One","Two","Threeeeeeeeee")], id.vars="x")
df.d.melt$variable1 = df.d.melt$variable
levels(df.d.melt$variable1) = paste("","Lable for",levels(df.d.melt$variable1))

p = ggplot(df.d.melt, aes(x=x, y=value, color=variable)) + 
  geom_line(size=1.1) +
  geom_text(aes(x =3.4, y=8, label="Custom Outside\nChart Annotation"), show_guide=FALSE) + 
  coord_cartesian(xlim=c(1,3.4)) +
  geom_dl(aes(label=variable1), method=list("last.qp", cex=1), show_guide=FALSE) + 
  theme(legend.position="top",plot.margin = unit(c(0, 4, 0, 0), "cm")) 

p1 <- ggplot_gtable(ggplot_build(p))
p1$layout$clip[p1$layout$name=="panel"] <- "off"
grid.draw(p1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T02:04:31.400

默认情况下，directlabels 假定您希望在绘图区域内具有可读标签，因此它会减小文本大小，以便使用[reduce.cex.lr](http://directlabels.r-forge.r-project.org/docs/utility.function/posfuns/reduce.cex.lr.html)将标签放入内部。可以通过定义不减小文本大小的自定义定位方法来完成绘图之外的标签，例如

```
do.not.reduce <-
  list(cex=2, "last.points", "calc.boxes",
       qp.labels("y", "bottom", "top", make.tiebreaker("x", "y")))

WithLegend <- ggplot(df.d.melt, aes(x=x, y=value, color=variable)) + 
  geom_line(size=1.1) +
  geom_text(aes(x =3.4, y=8, label="Custom Outside\nChart Annotation")) + 
  coord_cartesian(xlim=c(1,3)) +
  theme(plot.margin = unit(c(0, 4, 0, 0), "cm"))
WithLabels <- direct.label(WithLegend, "do.not.reduce")
GTable <- ggplot_gtable(ggplot_build(WithLabels))
GTable$layout$clip[GTable$layout$name=="panel"] <- "off"
grid.draw(GTable) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:09:17.870

一个可行的解决方案是将标签附加到图表左侧的附加不可见短线（例如定义`x=1`到`x=1.001`），并使用 directlabels'`trans_new`将注释移动到所需的 x 值。

# php - 在 PHP 中提交表单时声音无法完成

> ID：13842172
> 
> 赞同：0
> 
> 时间：2012-12-12T14:45:11.697
> 
> 标签：php, javascript, html

我想在按下表单中的提交按钮时添加声音，但无论我做什么，声音都不会结束。它是 1 秒长，但表单在 1 秒内提交，所以听起来很糟糕。这是代码：

创建声音：

```
<script type="text/javascript">
    var html5_audiotypes={ 
        "mp3": "audio/mpeg"
    }

    function createsoundbite(sound){
        var html5audio=document.createElement('audio')
        if (html5audio.canPlayType){
            for (var i=0; i<arguments.length; i++){
                var sourceel=document.createElement('source')
                sourceel.setAttribute('src', arguments[i])
                if (arguments[i].match(/\.(\w+)$/i))
                    sourceel.setAttribute('type', html5_audiotypes[RegExp.$1])
                html5audio.appendChild(sourceel)
            }
            html5audio.load()
            html5audio.playclip=function(){
                html5audio.pause()
                html5audio.currentTime=0
                html5audio.play()
            }
            return html5audio
        }
        else{
            return {playclip:function(){throw new Error("Your browser doesn't support HTML5 audio unfortunately")}}
        }
    }
    var mouseClick=createsoundbite("sounds/cashSound.mp3")
</script> 
```

HTML：

```
<form method='post' action='save.php'>
    <input type='submit' name='apply' value='Play' onclick='mouseClick.playclip()' />
</form> 
```

我尝试了 setTimeout 功能，但它不起作用！有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:50:50.313

尝试在 playClip 函数中返回 false。这可能会导致提交操作不会被执行。您可以等待一秒钟，然后在表单元素上调用 submit()。您也可以通过 AJAX 发送表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:49:41.807

抛开美学不谈，如果您真的希望声音完成，那么您需要延迟提交/延迟响应或在单独的框架中播放声音，该框架与表单不在同一页面内。

# c# - 从类型定义字符串实例化 System.Type

> ID：13842173
> 
> 赞同：2
> 
> 时间：2012-12-12T14:45:18.370
> 
> 标签：c#, configuration, web-config, configuration-files, configurationmanager

在 web.config 文件中，我们看到很多遵循这种模式的字符串：

```
 type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, 
System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, 
PublicKeyToken=31BF3856AD364E35" 
```

我想从 web.config 中读取此信息（我知道如何将其读取为字符串），并且我想从该字符串中实例化一个类型。

有没有办法做到这一点？

**更新**

我想我可以做

```
Activator.CreateInstance(System.GetType(stringTypeName)) 
```

请确认？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:47:46.897

有几个重载[`Activator.CreateInstance`](http://msdn.microsoft.com/en-us/library/d133hta4.aspx)使您能够做到这一点。但是，您必须手动将字符串拆分为类型名称和程序集名称。

**更新：**您自己对此的看法也是正确的（尽管方法是`Type.GetType()`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:48:42.810

使用 . 创建类型的实例很简单[`Activator.CreateInstance(Type)`](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)。

*编辑由于某种原因，我虽然你可以只传递类型名称 - 你不能；感谢乔恩指出这一点。*

但是您需要`Type`从类型名称中获取。如果类型名称始终是完全限定的（至少到程序集名称） - 那么您可以简单地使用：

```
Type t = Type.GetType(typeName); 
```

但是，如果找不到类型，则会引发异常。你可能会更好：

```
Type t = Type.GetType(typeName, false); 
```

接着：

```
object result = null;
if(t != null)
  result = Activator.CreateInstance(t); 
```

*结束编辑*

但是，在某些情况下，该类型可能没有默认构造函数，在这种情况下，您要么必须跳过它（要么从 捕获异常`Activator.CreateInstance`，要么先对构造函数进行反射搜索），要么找到构建依赖项的方法类型也一样（也`Activator.CreateInstance`支持带参数的构造函数-@Jon 的答案包括一个链接）。

我不相信`(Type)`我在这里建议的这个简单的重载适用于具有所有可选参数的构造函数的类型，或者：

```
public class MyClass {
   public MyClass(string p1 = null, int p2 = 10, ...) { }
}

//...

var o = Activator.CreateInstance(typeof(MyClass)); //<-- will fail 
```

因为这*不是*默认构造函数 - 由编译器将这些构造函数绑定为默认值，方法是将所有默认值提取到对“扩展”版本的调用中。

# python - python pth文件导入语句无效？

> ID：13842178
> 
> 赞同：0
> 
> 时间：2012-12-12T14:45:35.643
> 
> 标签：python

从 pth 文件执行的导入语句似乎执行得很好。但我似乎无法访问以这种方式导入的任何模块。

这是什么法术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:15:29.380

从您的评论中，我猜您会因为混淆`.pth`-files 的用途而收到某些模块的 NameError 异常。

`pth`代表`path`。目的是添加路径`sys.path`（pythonpath - Python 在导入期间用于查找模块的路径）。请参阅[`site`模块文档](http://docs.python.org/2/library/site.html)。

以 开头的行`import`可以包含任何代码，但通常会修改`sys.path`. 例如`setuptools`机械：

```
import sys; new=sys.path[sys.__plen:]; del sys.path[sys.__plen:]; p=getattr(sys,'__egginsert',0); sys.path[p:p]=new; sys.__egginsert = p+len(new) 
```

另一个常见的情况是使用`.pth`-files 来实现[“命名空间”包](http://peak.telecommunity.com/DevCenter/setuptools#namespace-packages)：

```
import sys,types,os; p = os.path.join(sys._getframe(1).f_locals['sitedir'], *('zope',)); ie = os.path.exists(os.path.join(p,'__init__.py')); m = not ie and sys.modules.setdefault('zope',types.ModuleType('zope')); mp = (m or []) and m.__dict__.setdefault('__path__',[]); (p not in mp) and mp.append(p) 
```

`.pth`-files 不存在使模块名称出现在您的代码中。要 import `some_module`，请在要使用它的每个模块的顶部添加：

```
import some_module 
```

# php - 将xml数据导入mysql，如何管理对文件的修改

> ID：13842181
> 
> 赞同：1
> 
> 时间：2012-12-12T14:45:39.227
> 
> 标签：php, mysql, xml, import

我将从另一个网站导入数据到我的数据库中，在导入到我的数据库之前我将读取的外部数据是 xml。

我将每 15 分钟运行一次脚本来检查 xml 文件。

插入/修改/删除数据的最佳方法是什么？

我知道我可以在从 xml 导入数据之前删除数据库表中的所有数据，但必须有一种更有效的方法来执行此操作。

我很感激帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:54:42.087

Why not simply use the Truncate keyword in your statement?

```
TRUNCATE TableName;INSERT INTO.... 
```

regards

# java - 如何打印 SOAPMessage

> ID：13842182
> 
> 赞同：5
> 
> 时间：2012-12-12T14:45:42.210
> 
> 标签：java, jakarta-ee, soap

SOAPMessage 具有 writeTo() 方法，用于将其内容打印到流中。但是如何将 SOAPMessage 内容写入 StringBuffer？

代码行“message.writeTo(System.out);” 必须修改。。

```
public boolean handleMessage(SOAPMessageContext smc) {
     StringBuffer sbuf = new StringBuffer();
     sbuf.append("\n------------------------------------\n");
     sbuf.append("In SOAPHandler " + HandlerName + ":handleMessage()\n");

     Boolean outboundProperty = (Boolean) smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

     if (outboundProperty.booleanValue()) {
        sbuf.append("\ndirection = outbound ");
     }
     else {
        sbuf.append("\ndirection = inbound ");
     }

     SOAPMessage message = smc.getMessage();      
     try {
        sbuf.append("\n");
        sbuf.append(message.toString());         
        //message.writeTo(System.out);         
        sbuf.append("\nMessage Desc:");         
        sbuf.append("\n");
     }
     catch (Exception e) {
        sbuf.append("Exception in SOAP Handler: " + e);
     }

     sbuf.append("Exiting SOAPHandler " + HandlerName + ":handleMessage()\n");
     sbuf.append("------------------------------------\n");
     logger.debug(sbuf.toString());
     return true;
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T14:49:38.033

好的，我已经解决了这个问题。修改后的代码块如下。

```
 public boolean handleMessage(SOAPMessageContext smc) {
     StringBuffer sbuf = new StringBuffer();
     sbuf.append("\n------------------------------------\n");
     sbuf.append("In SOAPHandler " + HandlerName + ":handleMessage()\n");

     Boolean outboundProperty = (Boolean) smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

     if (outboundProperty.booleanValue()) {
        sbuf.append("\ndirection = outbound ");
     }
     else {
        sbuf.append("\ndirection = inbound ");
     }

     SOAPMessage message = smc.getMessage();      
     try {
        sbuf.append("\n");
        sbuf.append(message.toString()); 
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        message.writeTo(baos);                     
        sbuf.append("\nMessage Desc:"+baos.toString());         
        sbuf.append("\n");
     }
     catch (Exception e) {
        sbuf.append("Exception in SOAP Handler: " + e);
     }

     sbuf.append("Exiting SOAPHandler " + HandlerName + ":handleMessage()\n");
     sbuf.append("------------------------------------\n");
     logger.debug(sbuf.toString());
     return true;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:23:23.330

如果您仅出于调试目的需要记录 SOAP 消息，那么通过为您的 JAX-WS 实现打开 SOAP 消息记录会更容易。在这种情况下，您根本不需要编写任何代码。

# android - Android通过XY位置在画布上绘制位图和按钮

> ID：13842191
> 
> 赞同：1
> 
> 时间：2012-12-12T14:46:23.117
> 
> 标签：android, bitmap, android-canvas, draw, imagebutton

我是 android 新手，我的应用程序有一些问题。任何帮助将不胜感激 ：）

我通过 xpositon 在画布上绘制位图，并通过传感器在 ypostion 上绘制位图（当我移动手机时，位图正在移动）

我需要在我的位图中心创建移动的可点击按钮，当我点击它们时，我将进入下一个活动。

位图绘制完美，但不知道如何在其上绘制按钮，这些按钮将随着我的位图移动相同的 x 和 y 值。我怎么能这样做？

这是我的一段代码：

```
 private void updateBall() {

        // Calculate new speed
        // xVelocity += (xAcceleration * frameTime);
        // yVelocity += (yAcceleration * frameTime);

        // Calc distance travelled in that time
        // float xS = (xVelocity/2)*frameTime;
        // float yS = (yVelocity/2)*frameTime;

        // Add to position negative due to sensor
        // readings being opposite to what we want!
        // xPosition -= xS;

        // ------------------------------- MOVING Y --------------------------------------------------

        by = (-IMG_H + ddy) / 2f;
        ay = by / 90f;

        float dy = (ay * zAcceleration + by);

        if (Math.abs(zAcceleration) < 90 && Math.abs(yAcceleration) > 100)
            yPosition -= (yPosition - dy) / 20.;
        else if (zAcceleration > 0) {
            if (yPosition > -IMG_H) {
                if (Math.abs(yAcceleration) > 100) {
                    dy = (ay * 90 + by);
                    yPosition -= (yPosition - dy) / 20.;
                } else {
                    yPosition = -IMG_H;
                }
            }

        } else {
            if (yPosition < IMG_H) {
                if (Math.abs(yAcceleration) > 100) {
                    dy = (-ay * 90 + by);
                    yPosition -= (yPosition - dy) / 20.;
                } else {
                    yPosition = ddy;
                }
            }
        }

        // block y
        yPosition = 0;

        // ------------------------------- MOVING X --------------------------------------------------

        // For understanding :)
        // ddx= 1280-(float)display.getWidth();

        ax = -IMG_W / (180f);// -2*xStart);
        bx = -ax * xStart;

        // xStart pozycja początkowa

        if (xAcceleration > xStart && xAcceleration <= 180 + xStart) {
            dx = (ax * xAcceleration + bx);
            if (dirr == false) {
                xPosition = dx;
                dirr = true;
            }

            xPosition -= (xPosition - dx) / 20.;
            xPosition1 = xPosition + IMG_W;
        } else {
            dx1 = (ax * (xAcceleration - 180f) + bx);
            if (dirr == true) {
                xPosition1 = dx1;
                dirr = false;
            }

            xPosition1 -= (xPosition1 - dx1) / 20.;
            xPosition = xPosition1 + IMG_W;

        }

        xPosition = 0;
        xPosition1 = 0;
        // xPosition=yPosition=150;
        /*
         * if (xPosition > xmax) { xPosition = xmax; } else if (xPosition < 0) {
         * xPosition = 0; }
         */
        /*
         * if (yPosition > ymax) { yPosition = ymax; } else if (yPosition < 0) {
         * yPosition = 0; }
         */

        // Print values
        Log.i("QLA", " x: " + xAcceleration + "   dx: " + dx + "    dx1: "+ dx1 + "  xpos: " + xPosition + " " + " xpos1: " + xPosition1);

    }

    // I've chosen to not implement this method
    public void onAccuracyChanged(Sensor arg0, int arg1) {
        // TODO Auto-generated method stub
    }

    @Override
    protected void onResume() {
        super.onResume();
        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION),
                SensorManager.SENSOR_DELAY_GAME);
    }

    @Override
    protected void onStop() {
        // Unregister the listener
        sensorManager.unregisterListener(this);
        super.onStop();
    }

    public class CustomDrawableView extends View {
        public CustomDrawableView(Context context) {
            super(context);
            Bitmap ball = BitmapFactory.decodeResource(getResources(),
                    R.drawable.test);
            final int dstWidth = 1280;
            final int dstHeight = 960;
            mBitmap = Bitmap.createScaledBitmap(ball, dstWidth, dstHeight, true);

            Bitmap ball1 = BitmapFactory.decodeResource(getResources(),
                    R.drawable.tt);
            final int dstWidth1 = 1280;
            final int dstHeight1 = 960;
            mBitmap1 = Bitmap.createScaledBitmap(ball1, dstWidth1, dstHeight1, true);
            // mWood = BitmapFactory.decodeResource(getResources(),
            // R.drawable.wood);

            /*
             * ImageButton star = (ImageButton) findViewById(R.id.imageButton1);
             * star.setOnClickListener(new View.OnClickListener() { public void
             * onClick(View view) { Intent myIntent = new
             * Intent(view.getContext(), Main.class);
             * startActivityForResult(myIntent, 0);
             * overridePendingTransition(R.anim.fade_in, R.anim.fade_out); }
             * 
             * });
             */
            // ImageView ddss=star.getDrawable();

        }

        protected void onDraw(Canvas canvas) {
            final Bitmap bitmap = mBitmap;
            // canvas.drawBitmap(mWood, 0, 0, null);
            canvas.drawBitmap(bitmap, xPosition, yPosition, null);

            // ss.getChildAt(0).setX();

            final Bitmap bitmap1 = mBitmap1;
            // canvas.drawBitmap(mWood, 0, 0, null);
            canvas.drawBitmap(bitmap1, xPosition1, yPosition, null);

            invalidate();

        }
    }

// END of class
}; 
```

和 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="horizontal"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" 
  android:id="@+id/layout">

  <FrameLayout android:id="@+id/preview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:visibility="visible"
    android:orientation="horizontal"
    >

   <Button

            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="sdgvgvgfcvcv"
            android:gravity="center"
            />

  </FrameLayout>

<ImageView
          android:id="@+id/imageView1"
          android:layout_width="fill_parent" 
          android:layout_height="wrap_content" 
          android:scaleType="centerCrop" 
          android:contentDescription="@string/desc"
          android:adjustViewBounds="true" 
          android:src="@drawable/vinetka" 
          android:orientation="horizontal"/> 

</AbsoluteLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:55:42.777

我会把你的

```
CustomDrawableView 
```

在一个`FrameLayout`

如果您的应用需要运行 API 级别 11 之前的版本，则将按钮添加到`FrameLayout`then 位置`setX() setY()`

像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:gravity="center_horizontal"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">

    <CustomDrawableView android:layout_height="fill_parent"
               android:layout_width="fill_parent"
              />

    <Button

            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/myButtonText"
            android:gravity="center"
            />

</FrameLayout> 
```

现在您的 Button 将被添加到 CustomDrawableView 上，您可以像使用普通 Button 一样使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:11:15.127

好的，多亏了“gabe”和这个[链接](https://stackoverflow.com/questions/5646929/changing-position-of-a-button)，它终于可以正常工作了。您始终可以在绝对布局内移动整个相对布局 -[链接](https://stackoverflow.com/questions/3294590/set-the-absolute-position-of-a-view-in-android)

在我的类变量中，我添加：

```
 Button button;
    private int myNewX = 0;
    private int myNewY = 0; 
```

关于更新功能：

```
myNewX = (int)xAcceleration;
myNewY = (int)yAcceleration;

Button button = (Button)findViewById(R.id.button);
            AbsoluteLayout.LayoutParams absParams = 
                (AbsoluteLayout.LayoutParams)button.getLayoutParams();
            absParams.x = myNewX;
            absParams.y = myNewY;
            button.setLayoutParams(absParams); 
```

和 XML 文件：

> ```
> <?xml version="1.0" encoding="utf-8"?>
> <AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
>     android:id="@+id/layout"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:orientation="horizontal" >
> 
>     <FrameLayout
>         android:id="@+id/preview"
>         android:layout_width="fill_parent"
>         android:layout_height="fill_parent"
>         android:orientation="horizontal"
>         android:visibility="visible" >
> 
>     </FrameLayout>
> 
>     <ImageView
>         android:id="@+id/imageView1"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:adjustViewBounds="true"
>         android:contentDescription="@string/desc"
>         android:orientation="horizontal"
>         android:scaleType="centerCrop"
>         android:src="@drawable/vinetka" />
> 
>      <Button
>       android:id="@+id/button"
>       android:layout_width="188dp"
>         android:layout_height="wrap_content"
>         android:text="Button"
>         android:layout_x="130px"
>         android:layout_y="390px"
> 
> />
> 
> </AbsoluteLayout> 
> ```

感谢帮助！

# eclipse - 在 Eclipse pydev 中导入 numpy 时出现“来自导入的未定义变量”

> ID：13842194
> 
> 赞同：10
> 
> 时间：2012-12-12T14:46:29.230
> 
> 标签：eclipse, import, numpy, environment-variables, pydev

每当我从 numpy 导入模块时，我在 Linux Mint Maya (Cinnamon) 上的 Eclipse 3.7.2 PyDev 2.7.1 中出现“导入中的未定义变量”错误。只有在导入 numpy 时才会出现问题；其他模块工作得很好。

信息：numpy 是针对英特尔 MKL 库编译的。Python 2.7.3 [GCC 4.6.3]

例子：

```
import numpy as np

a = np.array([1, 2]) 
```

PyDev 编辑器中的错误消息：“来自导入的未定义变量：数组”

对于其他 numpy 子模块，我遇到了类似的错误。

代码可以在 Eclipse 或终端中正常运行。该问题仅存在于 Eclipse-PyDev 编辑器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T13:47:20.917

`LD_LIBRARY_PATH`必须包含 MKL 库的路径。即使`LD_LIBRARY_PATH`设置正确，也必须在 Eclipse 中的 Window > Preferences > Interpreter - Python 下，在右侧的“Environment”选项卡下明确指定。添加一个名为“LD_LIBRARY_PATH”的新变量并粘贴`$LD_LIBRARY_PATH`.

完成后，只有在使用 numpy 对象的代码中添加一行以便再次检查导入时，错误才会从代码中消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-02T08:27:19.723

我设法通过更新 Eclipse 中的 Phyton 解释器来修复它。成功安装 Numpy 模块后，只需单击应用按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-03T19:24:12.860

MKL 库和 numpy 是一回事吗？@user1898039 的回答对我来说没有意义（我不确定我应该为该属性使用什么路径。

我找到了解决此问题的另一种方法 - 我通过调用检查了 python 命令行以查看是否安装了 numpy：

`>>> import from numpy *`

不是。因此，尽管 numpy 出现在 Python Interpreter 属性的“强制内置”选项卡下的 PyDev 中，但 Python 无法从命令行使用它，我想这会导致 PyDev 内部出现问题。

因此，我通过访问 numpy 站点并安装 Windows 的最新版本来解决问题。从技术上讲，我去了一些其他有 AMD64 版本的 Windows 安装程序的网站，买你知道，同样的。之后，我尝试获取 PYTHONPATH 变量来重新计算所有库（这可能是不必要的），但在所有对 array() 的调用的文件中仍然显示错误。我对 numpy 包进行了自动完成以获取函数列表，从该列表中选择 array()，突然间所有错误都清除了，现在一切都很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-11T16:19:40.943

我可以通过将以下路径添加到 PYTHONPATH 来解决这个问题（Pydev => Python Interpreters => select an Interpreter => Libraries）：

```
/usr/local/anaconda/lib/python2.7/lib/lib-dynload 
```

已安装的软件包（除其他外）：

```
conda==3.10.1
numpy==1.9.2
scipy==0.15.1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-10T17:35:15.133

在重新启动 Eclipse 后，我偶尔会看到 pandas 对象的这些错误，即使我的文件顶部当然有“import pandas as pd”。

我发现了一个简单的解决方法：我只需删除导入语句，保存文件，将其粘贴回并重新保存。错误消失！

我在这个版本的 Eclipse 上：

面向 PHP 开发人员的 Eclipse

版本：Mars.2 版本 (4.5.2) 内部版本号：20160218-0600

# facebook - Facebook 应用程序：允许单个 Facebook 应用程序在任意私有网络地址上运行

> ID：13842198
> 
> 赞同：5
> 
> 时间：2012-12-12T14:46:51.807
> 
> 标签：facebook, testing

我有一个开发服务器（Java servlet 容器）在我的专用网络（IP 范围`192.168.0.0`到`192.168.255.255`）内的计算机上运行。该开发服务器执行我的集成测试环境。这个测试环境有自己的 Facebook App ID。让服务器在该`192.168.x.y`范围内运行允许我的同事测试网站、使用他们的 Facebook 帐户登录我的本地网站等。

在[https://developers.facebook.com](https://developers.facebook.com) -> 在 Facebook 应用程序设置 -> 位于“基本设置”下 -> 在“使用 Facebook 登录的网站”字段中，我已设置`http://192.168.2.106:8080`，因为这是地址端口组合我的开发服务器绑定到。

由于 DHCP，我的计算机现在的 IP 地址略有不同，即`192.168.2.109`. 每当我启动我的服务器然后尝试做任何与 Facebook-API 相关的事情（例如 Facebook 登录）时，我都会从 Facebook 收到以下错误消息

```
{
   "error": {
      "message": "Invalid redirect_uri: Given URL is not allowed by the Application configuration.",
      "type": "OAuthException",
      "code": 191
   }
} 
```

有没有办法让 Facebook 应用程序允许“使用 Facebook 登录的 IP 地址网站范围”？您还能建议哪些其他解决方案？

我的同事们也应该能够在他们自己的机器上使用他们自己的私有网络地址启动开发服务器。因此，同一个 Facebook App ID 应该可以在具有不同 IP 地址的不同机器上运行，并且仍然可供专用网络内的每个人访问。

请注意，将“使用 Facebook 登录的网站”设置为`localhost`使开发服务器仅可用于运行它的同一台机器。不幸的是，这会阻止同事访问此开发服务器实例。

# 更新

提交的错误：[https ://developers.facebook.com/bugs/606277079382609](https://developers.facebook.com/bugs/606277079382609)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T04:10:02.537

If you could get away of using localhost, then there is a very simple way: Make the facebook app redirect to [http://lvh.me:3000/](http://lvh.me:3000/) (or whatever port your server is listening on localhost). A benevolent developer owns the lvh.me domain and had the DNS setup to point to localhost. I've tried this and that's what I used for development testing. Similarly, you could do stuff like that and points a DNS record of a domain you own to a range of local ip. I am not familiar with DNS so I am not sure how to set it up or if it's possible.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:11:35.360

如果您在 Windows 上运行，您可以尝试更改 C:\Windows\System32\drivers\etc 中的主机文件并将您的 IP 添加到虚构域（您的同事也应该这样做）并将该域放入 Facebook 设置面板。我不确定这个，所以告诉我它是否有效:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T22:54:49.393

如果您拥有一个域，您可以创建一个指向 192.168.2.109 的子域 test.mydomain.com。

当您的地址再次更改时，您可以相应地更改条目。

DNS 条目没有理由不能指向 192.168 范围内的 IP 地址。对于您网络之外的人来说，它没有多大用处，因为他无法从外部访问您的 IP 地址，但对于您网络内的同事来说，它会起作用。

如果同事想在自己的 PC 上运行 Web 应用程序，他当然可以使用自己的 hosts 文件覆盖此设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-22T02:58:33.787

不要使用 IP 地址，而是使用 localhost。

所以 hxxp://192.168.1.20 会变成 hxxp://localhost

（将 xx 替换为 tt）

这将解析回本地计算机，无论其 IP 地址是什么。我假设您的开发服务器正在您的 PC 上运行，使用 WAMP 或类似的东西。我做出这个假设是因为您声明它必须在任何网络环境中的任何笔记本电脑上运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T22:27:23.720

据我所知，您无法在应用程序设置中设置 IP 范围，redirect_uri 通常用于处理带有域名的 url，这通常是公共网站的情况。

避免此问题的最佳方法是确保您的本地开发服务器始终获得相同的 IP，如果您正在编写服务器，这通常是一个好习惯。根据网络设置，有几种方法可以做到这一点，这里有两个选项：

1.  设置您的 DHCP 服务器以始终为您的开发服务器 MAC 地址分配相同的 IP
2.  稍微改变一下规则并设置您的计算机以声明未使用的 IP 地址。DHCP 服务器通常按顺序分配 IP（将从 192.168.1.1 开始，一直到 192.168.254.254），因此让您的计算机在该范围的较高部分声明 IP（首先 Ping IP 以确保它没有被使用）

# javascript - 从 JS 发出事件并在 C++ 中捕获它们

> ID：13842199
> 
> 赞同：1
> 
> 时间：2012-12-12T14:46:51.907
> 
> 标签：javascript, c++, qt4

我正在尝试制作一个可移动的窗口而不实际创建任何小部件（a 除外`QWebView`），我想知道是否可以`QMouseEvent`从 JavaScript（内部`QWebView`）发出并用 C++ 捕获信号？

我已经知道如何从 JS 调用 C++ 方法（反之亦然），如此[处所述，](http://qt-project.org/doc/qt-4.8/qtwebkit-bridge.html)但我问我是否能够生成/发出包含 a 的事件`QMouseEvent`（这非常重要，因为当前的全局位置光标）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:52:17.590

毕竟这并不难。

首先，我将窗口暴露给 JavaScript 引擎：

```
this->webView()->page()->mainFrame()->addToJavaScriptWindowObject("CHtml5ApplicationViewer", this); 
```

然后我在我的 HTML 代码中创建了一个简单的 div，并附加了这个代码来处理鼠标 onClick、onMove 和 onDrag 事件。

```
document.getElementById("bar").onmousedown = function(e){

    CHtml5ApplicationViewer.fakeMousePressEvent(e.pageX, e.pageY);
    e.preventDefault();

    document.onmousemove = function(e){
        CHtml5ApplicationViewer.fakeMouseMoveEvent(e.screenX, e.screenY);
        e.preventDefault();
    }

    this.onmouseup = function(){
        document.onmousemove = null;
    }

    document.getElementById("bar").ondragstart = function() { return false; }
} 
```

最后，我在我的 C++ 代码中添加了两个函数来处理来自我的 JavaScript 代码的调用：

```
void CHtml5ApplicationViewer::fakeMousePressEvent(int fromBorderX, int fromBorderY){
    fromBorderPosition = QPoint(fromBorderX, fromBorderY);
}

void CHtml5ApplicationViewer::fakeMouseMoveEvent(int dragX, int dragY){
    move(QPoint(dragX, dragY) - fromBorderPosition);
} 
```

另外，请确保您使这些函数可以从 JS 调用！

```
public:
    Q_INVOKABLE void fakeMousePressEvent(int fromBorderX, int fromBorderY);
    Q_INVOKABLE void fakeMouseMoveEvent(int dragX, int dragY); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:10:43.057

几乎可以肯定你不能这样做，因为 cpp 驻留在另一个内存而不是运行的 javascript 中。但是我不知道这些工具是什么以及它们是如何设置的。

处理这些问题的常用方法是通过发送字符串/xml/json-objects 或您自己的“脚本语言”来建立某种“中性”中间层/通信通道。如果你自动化这个过程，它通常被称为“序列化对象”，这意味着将其转换为某种格式，您可以将其存储在磁盘上并稍后重新构建，或者将其转换为其他工具可以阅读和理解的“纯文本” . 一个对象驻留在内存中，只要您不在应用程序之间共享内存，它们就无法理解正在发生的事情。

例如，使用您自己的“脚本语言”总是通过自定义函数调用`notifyCPP(header, parameter)`一个示例`notifyCPP("MOUSE_POSITION_UPDATE", "x=189; y=200");`

# vb.net - 如何限制并发异步网络请求

> ID：13842201
> 
> 赞同：2
> 
> 时间：2012-12-12T14:46:57.210
> 
> 标签：vb.net, asynchronous, task-parallel-library

我经常需要发出大量的webrequests，而不会使网络过载

我目前通过并行运行同步请求来做到这一点，利用 ThreadPool.SetMinThreads 和 MaxDegreeOfParallelism 来准确指定同时运行的请求数量

现在这工作得很好，但感觉不对。

我真的很想使用异步方法，但我不知道如何限制并发请求的数量。

我这样做的并行方式的简化示例（使用 web 客户端并且为简洁起见没有错误处理）：

```
Private Function SearchSitesForKeywordInParallel(ByVal keyword As String, ByVal sites As String(), ByVal maxConcurrency As Integer) As String()
    Dim po As New ParallelOptions
    po.MaxDegreeOfParallelism = maxConcurrency
    Threading.ThreadPool.SetMinThreads(maxConcurrency, 2)
    Dim sitesContainingKeyword As New Concurrent.ConcurrentBag(Of String)

    Parallel.For(0, sites.Count, po, Sub(i)
                                         Dim wc As New Net.WebClient
                                         wc.Proxy = Nothing
                                         Dim pageSource As String = wc.DownloadString(sites(i))
                                         If pageSource.Contains(keyword) Then
                                             sitesContainingKeyword.Add(sites(i))
                                         End If
                                     End Sub)
    Return sitesContainingKeyword.ToArray
End Function 
```

这是一个阻塞功能，这是我所需要的。现在我已经在常规的 for 循环中测试了 webclient.downloadStringAsync 方法，它会立即触发所有请求，使网络过载。

我想做的是最初提出 X 个请求，然后在每个响应返回时提出新的请求。

我相当肯定任务是要走的路，而且我肯定已经阅读了一些非常好的 c# 实现，但是我的 c# 经验有限，而且我很难将 c# lamadas 翻译成 vb.net。

我也仅限于 vs2010 和 .net4，所以 .net4.5 异步等待的细节对我来说不是一个选择。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:30:37.557

不确定，如果我完全理解，您到底想要实现什么，但如果您想使用 aync 方法，您可以这样做：

```
 Dim google As String = "http://www.google.com/#&q="

    Dim qsites As New Concurrent.ConcurrentQueue(Of String)
    For Each k In {"foo", "bar", "john", "jack", "stackoverflow", "basic", "ship", "car", "42"}
        qsites.Enqueue(google & k)
    Next

    Dim cde As New System.Threading.CountdownEvent(qsites.Count)

    Dim strings As New Concurrent.ConcurrentBag(Of String)
    Dim completedhandler = Sub(wco As Object, ev As Net.DownloadStringCompletedEventArgs)
                               Dim wc = DirectCast(wco, Net.WebClient)
                               Debug.Print("got one!")
                               strings.Add(ev.Result)
                               cde.Signal()
                               Dim s As String = String.Empty
                               If qsites.TryDequeue(s) Then
                                   Debug.Print("downloading from {0}", s)
                                   wc.DownloadStringAsync(New Uri(s))
                               End If
                           End Sub

    Dim numthreads As Integer = 4

    System.Threading.Tasks.Task.Factory.StartNew(Sub()
                                                     For i = 1 To numthreads
                                                         Dim s As String = String.Empty
                                                         If qsites.TryDequeue(s) Then
                                                             Dim wc As New Net.WebClient
                                                             wc.Proxy = Nothing
                                                             AddHandler wc.DownloadStringCompleted, completedhandler
                                                             Debug.Print("downloading from {0}", s)
                                                             wc.DownloadStringAsync(New Uri(s))
                                                         End If
                                                     Next
                                                 End Sub)

    cde.Wait() 
```

您只需要在不同的线程/任务中“开始”异步下载，因为（afaik）WC 的 downloadcompleted 事件在 UI 线程（或 currentsync..context）中触发，然后 cde.wait 将不允许处理事件.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-26T21:37:51.543

我只想为此添加另一个答案，因为我最近解决[了一个类似的问题](https://stackoverflow.com/questions/24293266/need-help-in-deciding-when-is-it-good-idea-to-limit-the-number-of-thread-pool-t)（注意代码片段是在 C# 中，但应该给出这个想法）。

我曾经在不同的线程上将并行 http 同步请求的数量发送到 http 服务器，并用于限制我使用**semaphore**发送的请求数量。

现在，我已经适应了新的**TPL**（c# 5.0 - aysn/await - 非常方便（基本上在 TPL 中引入的延续对我来说听起来很自然 - 并且使用 async/await 它变得更容易使用）），调用网络 I/O**异步**。

即理想情况下，现在我将在调用者中仅使用一个线程（除非我真的需要在继续之前获得结果），并让 .net、os 和 I/o 完成端口线程协同工作以调用线程池中的延续代码以完成操作（基本上是 APM 中的“回调”，基于事件的模式中的已完成事件，TPL 中的“继续”，C# 5.0 (4.5 .net) 中等待之后的代码）

当我接受异步 i/o 时，我遵循的原则很简单——除非真的有必要，否则不要让线程等待并浪费 CPU 和资源！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:10:28.267

您可以使用 Wintellect Powerthreading 库的[AsyncEnumerator](https://stackoverflow.com/questions/7107013/do-we-still-need-richters-asyncenumerator)类在 VB.NET 中异步执行此操作，该类可以从 NuGet 获得。

这为您提供了 Await 的一些功能，但可以在 VS2010 中使用 .Net 2.0 到 4.0，同时为您提供 4.5 异步功能的升级路径。

缺点是 WebClient 异步方法需要基于 Task<> 的 EAP-to-APM shim 才能与 AsyncEnumerator 一起使用，因此代码要复杂得多。

控制并发请求数量的最简单方法是启动 X 个异步操作，然后在每次完成时启动另一个。

示例代码：

```
Imports System.Collections.Generic
Imports System.Runtime.CompilerServices
Imports System.Threading.Tasks
Imports System.Net
Imports Wintellect.Threading.AsyncProgModel

Module TaskExtension
    REM http://msdn.microsoft.com/en-us/library/hh873178.aspx
    <Extension()>
    Public Function AsApm(Of T1)(ByVal task As Task(Of T1), callback As AsyncCallback, state As Object) As IAsyncResult
        If (task Is Nothing) Then
            Throw New ArgumentNullException("task")
        End If
        Dim tcs = New TaskCompletionSource(Of T1)(state)
        task.ContinueWith(Sub(t As Task(Of T1))
                              If (t.IsFaulted) Then
                                  tcs.TrySetException(t.Exception.InnerExceptions)
                              ElseIf t.IsCanceled Then
                                  tcs.TrySetCanceled()
                              Else : tcs.TrySetResult(t.Result)
                              End If
                              If (Not callback Is Nothing) Then
                                  callback(tcs.Task)
                              End If
                          End Sub, TaskScheduler.Default)
        Return tcs.Task
    End Function
End Module

Module ApmAsyncDownload
    Public Function DownloadStringAsync(url As Uri) As Task(Of String)
        Dim tcs As New TaskCompletionSource(Of String)
        Dim wc As New WebClient()
        AddHandler wc.DownloadStringCompleted, Sub(s As Object, e As System.Net.DownloadStringCompletedEventArgs)
                                                   If (Not (e.Error Is Nothing)) Then
                                                       tcs.TrySetException(e.Error)
                                                   ElseIf e.Cancelled Then
                                                       tcs.TrySetCanceled()
                                                   Else : tcs.TrySetResult(e.Result)
                                                   End If
                                               End Sub
        wc.DownloadStringAsync(url)
        Return tcs.Task
    End Function
    Public Function BeginDownloadString(url As Uri, callback As AsyncCallback, state As Object) As IAsyncResult
        Return DownloadStringAsync(url).AsApm(callback, state)
    End Function
    Public Function EndDownloadString(asyncResult As IAsyncResult) As String
        Dim castToTask As Task(Of String) = asyncResult
        Return castToTask.Result
    End Function
End Module

Public Class AsyncIterators
    Private Shared Iterator Function SearchUrl(ae As AsyncEnumerator(Of Boolean), keyword As String, uri As Uri) As IEnumerator(Of Int32)
        ae.Result = False
        ApmAsyncDownload.BeginDownloadString(uri, ae.End(0, AddressOf ApmAsyncDownload.EndDownloadString), Nothing)
        Yield 1
        If (ae.IsCanceled()) Then
            Return
        End If
        Try
            Dim page As String = ApmAsyncDownload.EndDownloadString(ae.DequeueAsyncResult)
            ae.Result = page.Contains(keyword)
        Catch ex As AggregateException
        End Try
    End Function
    Public Shared Iterator Function SearchIterator(ae As AsyncEnumerator(Of List(Of String)), keyword As String, urls As List(Of Uri)) As IEnumerator(Of Int32)
        ae.Result = New List(Of String)
        'Control how many searches are started asynchonously
        Dim startSearches = Math.Min(3, urls.Count)
        Dim enumerator = urls.GetEnumerator
        Dim toBeCompleted = urls.Count
        Do Until (toBeCompleted <= 0)
            While (startSearches > 0)
                If enumerator.MoveNext Then
                    Dim subAe = New AsyncEnumerator(Of Boolean)()
                    subAe.SyncContext = Nothing
                    subAe.BeginExecute(SearchUrl(subAe, keyword, enumerator.Current), ae.End(0, Function(ar As IAsyncResult) As AsyncEnumerator.EndObjectXxx
                                                                                                    subAe.EndExecute(ar)
                                                                                                End Function), enumerator.Current)
                End If
                startSearches = startSearches - 1
            End While
            'Wait for first async search to complete
            Yield 1
            toBeCompleted = toBeCompleted - 1
            If (ae.IsCanceled()) Then
                Exit Do
            End If
            'Get result of the search and add to results
            Dim result = ae.DequeueAsyncResult()
            Dim completedAe = AsyncEnumerator(Of Boolean).FromAsyncResult(result)
            If (completedAe.EndExecute(result)) Then
                Dim uri As Uri = result.AsyncState
                ae.Result.Add(uri.OriginalString)
            End If
            'Start 1 more search
            startSearches = startSearches + 1
        Loop
    End Function
End Class

Module Module1
    Sub Main()
        Dim searchAe = New AsyncEnumerator(Of List(Of String))()
        searchAe.SyncContext = Nothing
        Dim urlStrings = New List(Of String) From {"http://www.google.com", "http://www.yahoo.com", "http://www.dogpile.com"}
        Dim uris = urlStrings.Select(Function(urlString As String) As Uri
                                         Return New Uri(urlString)
                                     End Function).ToList()
        For Each Str As String In searchAe.EndExecute(searchAe.BeginExecute(AsyncIterators.SearchIterator(searchAe, "search", uris), Nothing, Nothing))
            Console.WriteLine(Str)
        Next
        Console.ReadKey()
    End Sub
End Module 
```

我现在明白你翻译 c# lambda 的意思了！

# dynamics-gp - eConnect 10.0 SLPRSNID 和 SALSTERR 未在新行项目中导入

> ID：13842219
> 
> 赞同：0
> 
> 时间：2012-12-12T14:47:39.407
> 
> 标签：dynamics-gp, econnect

以下代码有助于将销售行导入发票：

```
 Dim LineItems(dtItem.Rows.Count) As taSopLineIvcInsert_ItemsTaSopLineIvcInsert
        Dim salesLine As New taSopLineIvcInsert_ItemsTaSopLineIvcInsert

        'Create Invoice Sales lines
        For Each dr In dtItem.Rows

            With salesLine
                .CUSTNMBR = dr.Item("acctno")
                .SOPNUMBE = invoiceNumber
                .SOPTYPE = 3
                .DOCID = "STD INV"
                .QUANTITY = dr.Item("Qty")
                .ITEMNMBR = dr.Item("Item")
                .ITEMDESC = dr.Item("Memo")
                .UNITPRCE = dr.Item("SalesPrice")
                .XTNDPRCE = dr.Item("Credit")
                .TAXAMNT = 0
                .UOFM = "Each" 
                .SALSTERR = "GENERAL"
                .ReqShipDate = dtHdr.Rows(0).Item("InvoiceDate").ToString()
                .FUFILDAT = dr.Item("Date1").ToString()
                .ACTLSHIP = dr.Item("Date1").ToString()
                '.NONINVEN = 0
                .DOCDATE = dtHdr.Rows(0).Item("InvoiceDate").ToString()
                .SLPRSNID = "C1" 
            End With

            LineItems(rowCtr) = salesLine
            rowCtr = rowCtr + 1
        Next 
```

SLPRSNID 和 SALSTERR 的字段将被忽略。正在使用所有行项目创建发票本身。感谢任何有使用此 API 经验的人提出的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:09:19.440

由于我们没有整合 SOP 佣金数据，因此不支持使用上述代码在订单项上导入 SLPRSNID 和 SALSTERR。但是，eConnect 确实公开了前置和后置存储过程以自定义业务逻辑。在 taSopHdrIvcInsertPost 中添加了以下内容以实现导入：

/ ****自定义业务逻辑***** /

if ((@I_vSLPRSNID <> '') and (@I_vSALSTERR <> '')) 开始更新 SOP10200 设置 SLPRSNID = @I_vSLPRSNID, SALSTERR = @I_vSALSTERR 其中 SOPNUMBE = @I_vSOPNUMBE 和 SOPTYPE = @I_vSOPTYPE 结束

/ ****自定义业务逻辑***** /

注意：使用此实现，必须将特定的 SLPRSNID 和 SALSTER 提供给行项目，它不会自动从标题数据或 GP 中的任何客户设置数据过帐 - 您的集成必须传递值。

# javascript - html5截屏

> ID：13842220
> 
> 赞同：10
> 
> 时间：2012-12-12T14:47:40.527
> 
> 标签：javascript, html

> **可能重复：**
> [使用 HTML5/Canvas/Javascript 截取屏幕截图](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots)

浏览器有没有办法截取全局截图？我的意思是，整个屏幕，包括浏览器中没有的内容。

我知道我问这个可能听起来有点傻。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T14:53:47.800

在Chrome 的WebRTC 功能中，使用参数[提供了对全屏捕获的实验性支持。](https://www.webrtc-experiment.com/Pluginfree-Screen-Sharing/)该功能目前需要通过 中的选项显式激活，并且（与所有 WebRTC 捕获机制一样）在调用该功能时需要用户的明确同意。`getUserMedia``{chromeMediaSource: 'screen'}``chrome://flags`

除了 Chrome 中的那个实验性选项之外，使用纯 JavaScript 是不可能的，但您可以使用 Flash 之类的插件或 ActiveX 控件来实现。

如果您只想截取网页（而不是整个屏幕），请参阅[使用 HTML5/Canvas/JavaScript 截取屏幕截图](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots)。

# java - 数组列表循环越界

> ID：13842225
> 
> 赞同：-1
> 
> 时间：2012-12-12T14:47:57.033
> 
> 标签：java, loops, arraylist, compareto

我有这段代码，我正在下面开发。我想遍历两个数组列表，第一个列表我想查看每个条目，第二个列表我只想查看每个第三个条目并查看它们是否匹配。如果它们确实匹配，那么我想比较第二个列表中的其他两个条目。代码的问题在于“int result1 =”行，我不明白为什么它会说越界。非常感谢任何帮助！

```
for (int i = 0; i < array1.size(); i++){
    for (int j = 3; j <array2.size(); j = j + 3) {
        if ((array1.get(i)).equals(array2.get(j-3))){
            int result1 = array2.get(j-1).compareTo(array2.get(j-2));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:12:46.447

这是一个扩展评论，而不是答案。

很明显，发布的代码不能产生所述的异常。还有其他事情正在发生。您需要准备一个产生异常的[简单、独立、正确的示例。](http://sscce.org)这是一个基于您发布的代码的程序示例，它不会重现问题。您需要发布类似的内容，但有足够的实际代码来获取异常。

```
import java.util.ArrayList;
import java.util.List;

public class Test {
  public static void main(String[] args) {
    List<Integer> array1 = new ArrayList<Integer>();
    List<Integer> array2 = new ArrayList<Integer>();
    for (int i = 0; i < 100; i++) {
      array1.add(0);
      array2.add(0);
    }
    int result = 0;
    for (int i = 0; i < array1.size(); i++) {
      for (int j = 3; j < array2.size(); j = j + 3) {
        if ((array1.get(i)).equals(array2.get(j - 3))) {
          int result1 = array2.get(j - 1).compareTo(array2.get(j - 2));
          result += result1;
        }
      }
    }
    System.out.println(result);
  }
} 
```

# c# - 无法使用 ABCPDF 将字节数组（从 .docx 文件创建）读入 Doc 对象

> ID：13842227
> 
> 赞同：6
> 
> 时间：2012-12-12T14:47:59.153
> 
> 标签：c#, .net, .net-3.5, abcpdf

我正在检索 .docx 文件作为字节数组。然后，我尝试使用所述字节数组作为数据参数调用 Doc 的 read() 函数，但出现无法识别的文件扩展名错误。

我使用以下（c#）代码检索字节数组：

```
 WebClient testWc = new WebClient();
    testWc.Credentials = CredentialCache.DefaultCredentials;
    byte[] data = testWc.DownloadData("http://localhost/Lists/incidents/Attachments/1/Testdocnospaces.docx"); 
```

如果此时我将字节数组输出为 .docx 文件，我的程序将正确地允许我打开或保存文件。出于这个原因，我相信字节数组已被正确检索。这是输出 .docx 文件的示例：

```
 Response.ClearHeaders();
    Response.Clear();
    Response.AppendHeader("Content-Disposition", "attachment;Filename=test.docx");
    Response.BinaryWrite(data);
    Response.Flush();
    Response.End(); 
```

但是，如果我尝试将字节数组读入 Doc 中，如下所示：

```
 Doc doc = new Doc();
    XReadOptions xr = new XReadOptions();
    xr.ReadModule = ReadModuleType.MSOffice;
    doc.Read(data, xr); 
```

我的程序将在上述代码的最后一行出错，抛出以下内容：“FileExtension '' is invalid for ReadModuleType.MSOffice.”</p>

Doc.Read() 函数似乎正在寻找一个空字符串，它通常会在其中找到文件类型。另外，我确实在这台机器上安装了 Office 2007。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T03:02:28.613

如果您知道文件字节的文件扩展名（您应该知道），您可以通过以下方式解决您的问题：

```
Doc doc = new Doc();
string extension = Path.GetExtension("your file name/path").Substring(1).ToUpper();
XReadOptions opts = new XReadOptions();
opts.FileExtension = extension;
doc.Read(fileBytes, opts); 
```

这种方法对我有用。当您提供正确的文件扩展名时，您不需要设置 XReadOptions 对象的 ReadModule 属性。ToUpper() 不是强制性的。

# asp.net - 角色提供者是否缓存每个请求？

> ID：13842230
> 
> 赞同：9
> 
> 时间：2012-12-12T14:48:08.313
> 
> 标签：asp.net, asp.net-mvc, roleprovider, sqlroleprovider

我的 MVC 应用程序在单个页面请求期间在多个位置使用用户角色。我的问题是默认 SqlRoleProvider 是否在页面请求的生命周期内缓存当前用户的角色？

例如，我在 Controller 方法的属性中使用角色：

```
[Authorize(Roles = "Admin")] 
```

和自定义代码

```
if (user.IsInRole(MembershipRole.Admin))
{
     // Do something
}
else if (user.IsInRole(MembershipRole.Printer))
{
     // Do something else
} 
```

如果角色提供者不缓存角色，最好的解决方案是编写一个继承自默认角色提供者的自定义角色提供者，并覆盖获取角色一次并在请求期间缓存它们的方法？这可以通过 Authorize 属性和我自己的代码都使用缓存角色的方式来完成吗？

（如果您想知道，我不想使用 cacheRolesInCookie web.config 选项来缓存 cookie 中的角色）。

在此先感谢您的任何建议。

**[编辑以包含由乔的回答触发的详细信息]**

我反编译了 System.Web.Mvc.AuthorizeAttribute 并且 AuthorizeCore 方法为要检查的每个角色调用以下方法：

```
httpContext.User.IsInRole 
```

然后查看 System.Web.Security.RolePrincipal （即上面的“用户”），下面的两种方法确实使用了用户角色的缓存副本（如果为空，则填充缓存）：

```
public string[] GetRoles()
public bool IsInRole(string role) 
```

缓存存储为 User 上的一个字段，因此它的生命周期是在请求期间。

这些方法使用以下方法查找角色：

```
Roles.Providers[this._ProviderName].GetRolesForUser(this.Identity.Name) 
```

所以将使用您为应用程序选择的任何角色提供程序（默认或自定义）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T14:55:17.240

如果您`RoleProvider`在 ASP.NET 或 ASP.NET MVC 应用程序中使用 a，`HttpContext.User`则将引用`RolePrincipal`在请求的生命周期内缓存角色的 a。

但是，在使用 ASP.NET 角色的 WCF 服务中：

```
<behavior ...>
    <serviceAuthorization principalPermissionMode ="UseAspNetRoles"
                     roleProviderName ="MyRoleProvider" />
</behavior> 
```

这不是真的：而是`HttpContext.User`会引用`System.ServiceModel.Security.RoleProviderPrincipal`不缓存角色的内部类：相反，它总是调用`RoleProvider.IsUserInRole`.

开箱即用的 RoleProvider 不进行任何缓存，因此这可能会导致与底层数据存储的重复连接。这对我来说似乎是一个缺陷：在第一次访问时缓存角色会很容易。

> 是编写从默认角色提供者继承的自定义角色提供者的最佳解决方案，并覆盖获取角色一次并在请求持续时间内缓存它们的方法吗？

对于 ASP.NET 或 ASP.NET MVC 不是必需的，但可以为 WCF 设想。Request 持续时间的缓存可能会使用`HttpContext.Items`，因此会引入对 的存在的依赖`HttpContext`，但这不一定是问题，除非使单元测试更难。

> 这可以通过 Authorize 属性和我自己的代码都使用缓存角色的方式来完成吗？

如果您`RoleProvider`在 web.config 中配置您的自定义，则您无需再做任何事情，该`Authorize`属性将使用它。

# java - 加密 - IV 长度与提供的不同

> ID：13842231
> 
> 赞同：1
> 
> 时间：2012-12-12T14:48:09.127
> 
> 标签：java, encryption, jce

我一直在努力加密一段时间，我即将完成这个过程，但是，我现在遇到了 IV 的一些问题。这是我的代码：

### 第四代

```
public static byte[] createIV(int size) { 
 byte[] iv = new byte[size];
 SecureRandom random = new SecureRandom();
 random.nextBytes(iv);   

 return iv; 
} 
```

### AES-256 密码创建（密钥）

```
public static Map<String, byte[]> cipherAES() throws NoSuchAlgorithmException {
     Map<String, byte[]> aes = new HashMap<String, byte[]>();
     aes.put("IV", ConversionUtil.toHex(createIV(16), 16).getBytes());
     KeyGenerator keyGen = KeyGenerator.getInstance("AES");
     keyGen.init(256);
     Key encryptionKey = keyGen.generateKey();
     aes.put("key", encryptionKey.getEncoded());

     return aes;
} 
```

### toHex 方法

```
public static String toHex(byte[] data, int length) {
     StringBuffer buf = new StringBuffer();

     for (int i = 0; i != length; i++) {
        int v = data[i] & 0xff;

        buf.append(DIGITS.charAt(v >> 4));
        buf.append(DIGITS.charAt(v & 0xf));
     }

        return buf.toString();
} 
```

### 密码初始化

```
 SecretKey key = new SecretKeySpec(map.get("key"), 0, map.get("key").length, "AES");
  Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
  cipher.init(Cipher.ENCRYPT_MODE, key, new IvParameterSpec(map.get("IV"), 0, 16)); 
```

如果我向密码提供具有这种格式的 16 字节 IV：

```
8E12399C07726F5A8E12399C07726F5A 
```

当我在密码上调用 getIV 方法时，我得到了这个：

```
8E12399C07726F5A 
```

这恰好是我为 IV 提供的字节数的一半。这目前导致了几个问题，因为服务器可以解密消息的第二部分，但不能解密第一部分。

我只使用 JCE 库：

```
import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec; 
```

任何人都可以对此有所了解吗？如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:52:37.897

正如[CodesInChaos](https://stackoverflow.com/questions/13842231/encryption-iv-length-is-different-than-provided#comment19053030_13842231)和[bimsapi](https://stackoverflow.com/questions/13842231/encryption-iv-length-is-different-than-provided#comment19053743_13842231)的评论中所述，您的错误在于将 IV 值转换为十六进制。对您的 cipherAES() 方法的简单更正是：

```
public static Map<String, byte[]> cipherAES() throws NoSuchAlgorithmException {
     Map<String, byte[]> aes = new HashMap<String, byte[]>();
     aes.put("IV", createIV(16)); // <-- no need for conversion
     KeyGenerator keyGen = KeyGenerator.getInstance("AES");
     keyGen.init(256);
     Key encryptionKey = keyGen.generateKey();
     aes.put("key", encryptionKey.getEncoded());
     return aes;
} 
```

另请注意，您的方法设计有点奇怪。将字符串映射返回到字节数组非常脆弱并且容易出错。考虑改为返回一个存储这些项目的对象。在该对象中，我会将密钥存储为`Key`，而不是字节数组。

# python - 在文件中创建工作数据结构

> ID：13842233
> 
> 赞同：1
> 
> 时间：2012-12-12T14:48:20.093
> 
> 标签：python, pickle

我正在创建一个非常大的数组。我不想将此数组存储在内存中，而是希望能够将其写入文件。这需要采用我以后可以导入的格式。

我会使用泡菜，但似乎泡菜用于完成的文件结构。

在下面的示例中，我需要一种方法让 out 变量成为文件而不是内存存储对象：

```
out = []
for x in y:
    z = []
    #get lots of data into z
    out.append(z) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:52:30.017

看看[streaming-pickle](https://code.google.com/p/streaming-pickle/)。

> streaming-pickle 允许您以流式（增量）方式将一系列 Python 数据结构保存/加载到磁盘或从磁盘加载，因此使用的内存比常规 pickle 少得多。

它实际上只是一个包含三个简短方法的文件。我添加了一个[带有示例的片段](https://gist.github.com/4268445#file-spickle-py)：

```
try:
    from cPickle import dumps, loads
except ImportError:
    from pickle import dumps, loads

def s_dump(iterable_to_pickle, file_obj):
    """ dump contents of an iterable iterable_to_pickle to file_obj, a file
    opened in write mode """
    for elt in iterable_to_pickle:
        s_dump_elt(elt, file_obj)

def s_dump_elt(elt_to_pickle, file_obj):
    """ dumps one element to file_obj, a file opened in write mode """
    pickled_elt_str = dumps(elt_to_pickle)
    file_obj.write(pickled_elt_str)
    # record separator is a blank line
    # (since pickled_elt_str might contain its own newlines)
    file_obj.write('\n\n')

def s_load(file_obj):
    """ load contents from file_obj, returning a generator that yields one
        element at a time """
    cur_elt = []
    for line in file_obj:
        cur_elt.append(line)

        if line == '\n':
            pickled_elt_str = ''.join(cur_elt)
            elt = loads(pickled_elt_str)
            cur_elt = []
            yield elt 
```

以下是您可以使用它的方法：

```
from __future__ import print_function
import os
import sys

if __name__ == '__main__':
    if os.path.exists('obj.serialized'):
        # load a file 'obj.serialized' from disk and 
        # spool through iterable      
        with open('obj.serialized', 'r') as handle:
            _generator = s_load(handle)
            for element in _generator:
                print(element)
    else:
        # or create it first, otherwise
        with open('obj.serialized', 'w') as handle:
            for i in xrange(100000):
                s_dump_elt({'i' : i}, handle) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:00:17.993

[HDF5](http://code.google.com/p/h5py/)可能吗？它得到了相当广泛的支持，并允许您[附加到现有数据集](http://code.google.com/p/h5py/wiki/HowTo#Appending_to_a_dataset_%28HDF5_1.8_only%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:27:08.047

我可以想象你使用带有长度指示符的字符串酸洗：

```
import os
import struct
import pickle # or cPickle

def loader(inf):
    while True:
        s = inf.read(4)
        if not s: return
        length, = struct.unpack(">L", s)
        data = inf.read(length)
        yield pickle.loads(data)

if __name__ == '__main__':
    if os.path.exists('dumptest'):
        # load file
        with open('dumptest', 'rb') as inf:
            for element in loader(inf):
                print element
    else:
        # or create it first, otherwise
        with open('dumptest', 'wb') as outf:
            for i in xrange(100000):
                dump = pickle.dumps({'i' : i}, protocol=-1) # or whatever you want as protocol...
                lenstr = struct.pack(">L", len(dump))
                outf.write(lenstr + dump) 
```

这不会缓存任何超过实际需要的数据，将项目彼此分开，并且与所有酸洗协议兼容。

# android - Intellij IDEA 中资源文件的快速切换

> ID：13842236
> 
> 赞同：3
> 
> 时间：2012-12-12T14:48:29.813
> 
> 标签：android, intellij-idea

是否有可能从 IntelliJ IDEA 中的其他资源打开相同的文件？

例如，我正在编辑`/layout/main_activity.xml`并想快速切换到`/layout-land/main_activity.xml`. 那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:02:14.590

有一个相关的功能请求，请投票并评论描述您的用例和建议的解决方案（或提交新请求）：

*   [IDEA-87590](http://youtrack.jetbrains.com/issue/IDEA-87590)编辑多个同名 layout.xml 文件

# c++ - 如何在另一个窗口中正确创建 CMFCListCtrl？

> ID：13842238
> 
> 赞同：2
> 
> 时间：2012-12-12T14:48:36.900
> 
> 标签：c++, winapi, mfc

我在使用以下代码时遇到问题

```
int CMyView::OnCreate(LPCREATESTRUCT lpCreateStruct)
{
    if (CView::OnCreate(lpCreateStruct) == -1)
    {
        return -1;
    }

    DWORD dwStyle = LVS_REPORT | LVS_SINGLESEL | LVS_SHOWSELALWAYS | WS_BORDER | WS_TABSTOP | WS_CLIPSIBLINGS | WS_CHILD;

    CMFCListCtrl TempCtrl;
    TempCtrl.Create(dwStyle, CRect(0, 0, 0, 0), this, IDC_FILTERLIST);
    CMFCHeaderCtrl& HeaderCtrl = TempCtrl.GetHeaderCtrl();
    if (!::IsWindow(HeaderCtrl.GetSafeHwnd()))
    {
        AfxMessageBox("Failed to create CMFCListCtrl properly!");
    }

    .... 
```

CMFCListCtrl 的标头控制部分未正确创建/初始化。有谁知道我做错了什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:08:48.920

我注意到您正在 CView 派生类中创建一个控件。请注意，id 必须从值 AFX_IDW_PANE_FIRST 开始。否则会失败。只需谷歌 AFX_IDW_PANE_FIRST，您就会找到原因。

因此，只需将您的行替换为：

```
TempCtrl.Create(dwStyle, CRect(0, 0, 0, 0), this, AFX_IDW_PANE_FIRST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:11:16.650

我通过在创建时使用 WS_VISIBLE 样式解决了上述问题，但我仍然不明白为什么会这样。

# hadoop - 我们可以在同一个hadoop集群中同时使用公平调度器和容量调度器吗

> ID：13842241
> 
> 赞同：1
> 
> 时间：2012-12-12T14:48:52.873
> 
> 标签：hadoop, mapreduce, job-scheduling

我们可以在同一个hadoop集群中同时使用公平调度器和容量调度器吗？哪个调度程序好且有效。谁能帮我 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:33:02.530

我认为两者不能同时使用。这也没有意义。为什么要在同一个集群中同时使用这两种调度方式？由于特定的用例，两种调度算法都出现了。

> 公平调度是一种将资源分配给作业的方法，以便所有作业平均随着时间的推移获得同等份额的资源。当有一个作业在运行时，该作业会使用整个集群。当提交其他作业时，将释放的任务槽分配给新作业，以便每个作业获得大致相同的 CPU 时间。与形成作业队列的默认 Hadoop 调度程序不同，这可以让短作业在合理的时间内完成，而不会饿死长作业。在多个用户之间共享集群也是一种合理的方式。最后，公平共享也可以与作业优先级一起使用——优先级用作权重来确定每个作业应该获得的总计算时间的比例。

Fair Scheduler 源于 Facebook 需要在多个用户之间共享其数据仓库。Facebook 开始使用 Hadoop 来管理其每天积累的大量内容和日志数据。最初，每天只有少数工作需要在数据上运行以构建报告。然而，随着 Facebook 内的其他团队开始使用 Hadoop，生产工作的数量增加了。此外，分析师开始使用数据仓库通过 Hive（Facebook 的类似 SQL 的 Hadoop 查询语言）进行临时查询，并且随着开发人员对数据集进行试验，提交了更多的大型批处理作业。Facebook 的数据团队考虑为生产作业构建一个单独的集群，但认为这将非常昂贵，因为必须复制数据并且两个集群的利用率都会很低。反而，Facebook 构建了 Fair Scheduler，它可以在多个作业之间平均分配资源，并且还支持生产作业的容量保证。Fair Scheduler 基于三个概念：

*   根据可配置属性（例如用户名、Unix 组）或通过其 jobconf 将作业明确标记为位于特定池中，作业被放置到命名的“池”中。
*   每个池都可以具有通过配置文件指定的“保证容量”，该文件提供了分配给池的最小数量的映射槽和减少槽。当池中有待处理的作业时，它至少会获得这么多槽，但如果它没有作业，则这些槽可以被其他池使用。
*   未达到池最小值的多余容量将使用公平共享在作业之间分配。公平共享可确保随着时间的推移，每个作业都会收到大致相同数量的资源。这意味着较短的工作将很快完成，而较长的工作则保证不会饿死。

调度程序还包括许多易于管理的功能，包括在运行时重新加载配置文件以更改池设置而无需重新启动集群、限制每个用户和每个池运行的作业以及使用优先级来权衡份额的不同工作。

* * *

> CapacityScheduler 旨在允许共享大型集群，同时为每个组织提供最低容量保证。中心思想是将 Hadoop Map-Reduce 集群中的可用资源分配给多个组织，这些组织根据计算需求共同为集群提供资金。还有一个额外的好处是，组织可以访问任何未被其他人使用的多余容量。这以具有成本效益的方式为组织提供了弹性。

Yahoo 的Capacity Scheduler 提供了与Fair Scheduler 类似的功能，但采用了一些不同的理念。在容量调度程序中，您定义了许多命名队列。每个队列都有可配置数量的 map 和 reduce 槽。调度程序在每个队列包含作业时为其分配容量，并在队列之间共享任何未使用的容量。但是，在每个队列中，都使用了具有优先级的 FIFO 调度，除了一个方面 - 您可以限制每个用户运行任务的百分比，以便用户平等地共享集群。换句话说，容量调度器试图为每个用户和每个组织模拟一个单独的 FIFO/优先级集群，而不是在所有作业之间执行公平共享。

因此，它可以归结为您的需求和设置，以便决定您应该使用哪个调度程序。

Apache hadoop 现在支持这两种类型的调度。更详细的信息可以在以下链接中找到：

*   [容量调度器](https://hadoop.apache.org/docs/r1.2.1/capacity_scheduler.html)
*   [公平调度器](https://hadoop.apache.org/docs/r1.2.1/fair_scheduler.html)

# node.js - 在 Heroku 上托管 node.js 应用程序时输入错误

> ID：13842249
> 
> 赞同：0
> 
> 时间：2012-12-12T14:49:20.440
> 
> 标签：node.js, heroku, express

我的 node.js 应用程序具有依赖项

```
{
  "name": "application-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app"
  },
  "dependencies": {
    "express": ">=2.2.0",
    "jade": "*",
    "stylus": "*",
    "mongodb": ">= 0.9.6-7"
  } 
```

}

它在我的本地主机上运行良好

当我在 heroku 上托管我的节点应用程序时，我收到以下错误。

> TypeError: Object # has no method 'randomBytes' at Object.uid (/app/node_modules/express/node_modules/connect/lib/utils.js:121:17) at MemoryStore.generate (/app/node_modules/express/node_modules/ connect/lib/middleware/session.js:204:27) 在生成 (/app/node_modules/express/node_modules/connect/lib/middleware/session.js:288:13) 在 Object.session [作为句柄] (/ app/node_modules/express/node_modules/connect/lib/middleware/session.js:297:7) 在下一个 (/app/node_modules/express/node_modules/connect/lib/proto.js:190:15) 在 Object.cookieParser [作为句柄] (/app/node_modules/express/node_modules/connect/lib/middleware/cookieParser.js:60:5) 在下一个 (/app/node_modules/express/node_modules/connect/lib/proto.js:190: 15) 在 Object.expressInit [作为句柄] (/app/node_modules/express/lib/middleware.js:31:5) 在下一个 (/app/node_modules/express/node_modules/connect/lib/proto.js:190:15) 在 Object.query [作为句柄] (/app/node_modules/express/node_modules/connect/lib/middleware/查询.js:44:5)

我试图一一删除行并到达我删除的位置

```
app.use(express.session({ secret:'yodawgyo' })); 
```

该应用程序正在给出“Hello World”响应。请参阅下面的完整代码。

```
var express = require('express');
var crypto = require('crypto');//for gravatar

var passport = require('passport')
  , OpenIDStrategy = require('passport-openid').Strategy
  , GoogleStrategy = require('passport-google').Strategy
  , AOLStrategy = require('passport-aol').Strategy
  , YahooStrategy = require('passport-yahoo').Strategy;;

passport.serializeUser(function(user, done) { 
  done(null, user);
});

passport.deserializeUser(function(obj, done) {
  done(null, obj);
});

var app = module.exports = express();

app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.cookieParser());

//NO ISSUES WITH HEROKU IF I COMMENTED BELOW LINE   
  app.use(express.session({ secret:'yodawgyo' }));

  app.use(app.router);

});

app.get('/', function(req, res) {
  res.send("Hello World");
});

app.listen(process.env.PORT || 5000, function() {
  console.log("listening on 5000");
}); 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T17:10:33.013

我遇到了同样的问题。它通过将“engines”块添加到 package.json 来解决，该块指示 Heroku 使用特定版本的 node 和 npm。很可能您使用的是比 Heroku 默认 0.4.7 更新的节点版本

请参阅[https://devcenter.heroku.com/articles/nodejs-support#versions](https://devcenter.heroku.com/articles/nodejs-support#versions)

# mysql - Mysql Schema中多媒体内容的多语言管理

> ID：13842263
> 
> 赞同：1
> 
> 时间：2012-12-12T14:50:01.717
> 
> 标签：mysql, database-design, multilingual

好吧，我有资产：图像，视频，声音，文本每个资产都是多语言的，我还希望它们中的每一个都与我的数据库中的其他资产相关，在我的数据库架构中建模这些关系的最佳架构是什么？

到目前为止，我有：![在此处输入图像描述](../Images/f41f31ee7a970bde26ac7934f2da2158.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:44:02.610

anwser隐藏在这三个中：

单表继承

类表继承

具体表继承

描述于

[http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/09/30/how-to-model-inheritance-in-databases.aspx](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/09/30/how-to-model-inheritance-in-databases.aspx)

# crystal-reports - 水晶报表中的数值溢出

> ID：13842269
> 
> 赞同：1
> 
> 时间：2012-12-12T14:50:23.150
> 
> 标签：crystal-reports

我的报告中有一个数字字段，我对其执行操作 `Time({Command.EndTime}/60,Remainder({Command.EndTime},60),0)` 。基本上，该字段是一个时间字段，但我的前任出于某种未知原因使用了一个数字字段来表示它。该字段是午夜过后的分钟数。例如：60 是凌晨 1 点，65 是凌晨 1 点 05 分...）我想以更人性化的形式进行举报。但是，我收到此错误“数字溢出”，想知道是什么原因造成的。通常，此错误的原因是除以零，但除数显然是 60。如果我只是使用 {Command.EndTime}，则报告很好...数据库很大，有数百万条记录，所以扫描报告行by line 只是我最后的手段。有没有办法知道数据中有什么问题，或者更好地绕过上面提到的错误？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:14:13.153

第一个参数`Time()`必须是整数。试试这个：

`Time(Truncate({Command.EndTime}/60),Remainder({Command.EndTime},60),0)`

# google-spreadsheet-api - 我可以使用 Google 电子表格 API 将 ListEntry 插入 WorksheetEntry 吗？

> ID：13842271
> 
> 赞同：0
> 
> 时间：2012-12-12T14:50:29.407
> 
> 标签：google-spreadsheet-api

根据 [此处] (https://developers.google.com/google-apps/spreadsheets/)，我们可以使用 Google 电子表格 API 将行 (ListEntry) 添加到 ListFeed。我想知道我们是否也可以向工作表 (WorksheetEntry) 添加行，然后将 WorksheetEntry 插入到 WorksheetFeed。这样做似乎可以避免与 GoogleDocs 服务器的对话次数与行数一样多。但我已经搜索了很多没有任何运气！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:27:04.943

使用批处理请求，如下所述： [通过电子表格 API 更新包含大量数据的谷歌电子表格的最快方法是什么？](https://stackoverflow.com/questions/8402733/what-is-the-fastest-way-to-update-a-google-spreadsheet-with-a-lot-of-data-throug)

好的例子：

CellDemo.java [http://gdata-java-client.googlecode.com/svn-history/r93/trunk/java/sample/spreadsheet/cell/CellDemo.java](http://gdata-java-client.googlecode.com/svn-history/r93/trunk/java/sample/spreadsheet/cell/CellDemo.java)

它有一个 processBatchRequest 函数。

# sql - 在找到短语后在列中搜索值并返回行

> ID：13842278
> 
> 赞同：0
> 
> 时间：2012-12-12T14:50:49.620
> 
> 标签：sql, sql-server-2008

我有一张这样的桌子：

```
id |    action       |  user_id
1       'test'          'person1'
2       'entered'       'person2'
3       'KEYPHRASE1'    'person1'
4       'entered'       'person1' 
```

我需要进行选择并返回“输入”操作的 user_id。但是，我只需要在最后一次出现以下任何一个短语后才执行“输入”操作：“KEYPHRASE1”、“KEYPHRASE2”、“KEYPHRASE3”、“KEYPHRASE4”、“KEYPHRASE5”和“KEYPHRASE6”。如果在这些 KEYPHRASE 中的任何一个最后出现之后没有发生“输入”操作，则返回 null。

（因此，在此示例中，查询应返回“person1”而不是“person2”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:56:14.203

这似乎是`where`子句解决方案中的相关子查询：

```
select user_id
from t
where t.action = 'entered' and
      exists (select 1
              from t t2
              where t2.id < t1.id and
                    t2.user_id = t1.user_id and
                    t2.action in ('KEYPHRASE1', 'KEYPHRASE2', 'KEYPHRASE3', 'KEYPHRASE4', 'KEYPHRASE5', 'KEYPHRASE6') 
```

以上检查操作是否在最后一个操作之后。可以通过聚合来回答书面问题（在*最后一个问题之后）：*

```
select user_id
from t
group by user_id
having (max(case when t.action = 'Entered' then id end) >
        max(case when t2.action in ('KEYPHRASE1', 'KEYPHRASE2', 'KEYPHRASE3', 'KEYPHRASE4', 'KEYPHRASE5', 'KEYPHRASE6') then id
           end)
       ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:29:54.663

你可以这样做：

```
select user_id
from MyTble
where action = 'entered'
  and id > (select MAX(id) from MyTble where action like 'KEYPHRASE%') 
```

# git - git在两个分支中为同一个文件添加通用文本，几乎没有变化

> ID：13842281
> 
> 赞同：1
> 
> 时间：2012-12-12T14:50:54.477
> 
> 标签：git, github

我有两个分支。两个分支都有几乎相同的代码。但是有些文件有一些差异（剩下的共同部分）。现在，如果我想添加两个分支共有的 10 行代码，我应该如何将相同的文本添加到两个分支？我必须手动完成吗？或者有什么方法。

例子 ：

分支主：a.txt 文件：

这是开始的共同线这两条
线只属于a.txt

分支另一个：a.file：
这是两者的开始公共行
此可见文本仅在分支“另一个”上可用

从今天开始，我的大部分工作都是两个分支共同的。那么，我怎样才能添加到两个分支？我必须手动完成还是有什么好方法？

如有必要，将提供更多信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:42:56.923

它本质上需要在两个分支中手动完成，但如果你做得对，会有一些捷径 - 在其中一个分支上创建一个仅包含该修改的单个提交，然后记下该提交的 SHA，检查您的另一个分支，并且`git cherry-pick <SHA>`. 这实质上是在一次提交中所做的更改并将它们也应用于另一个分支。节省了一点打字，并减少了拼写错误的机会......

但是请注意，如果您有一个包含其他更改以及您感兴趣的更改的提交，那么它会更加困难（但并非不可能）。

# powerpoint - 将宏从 PowerPoint 加载项添加到功能区

> ID：13842285
> 
> 赞同：3
> 
> 时间：2012-12-12T14:50:59.813
> 
> 标签：powerpoint

通过右键单击功能区并选择从以下位置选择命令：宏，可以从功能区中添加启用宏的 PowerPoint (pptm) 演示文稿中的宏。

我希望它随时可用，因此我将 pptm 文件保存为加载项 (ppam) 并加载了加载项。

但是，我发现无法从功能区的加载项中添加宏。如何才能做到这一点？我是否需要以某种方式从 Auto_Open 注册所有可用的 Subs 或类似的东西：

```
Sub MyCommand()
MsgBox "This worked"
End Sub

Sub Auto_Open()
' Magic code allowing me to add the above to the ribbon
End Sub 
```

谢谢！巨魔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:34:38.360

您需要将特殊的 XML 代码添加到 PPTM 文件中以制作所需的功能区模块，并将按钮单击挂钩到文件中的 VBA 例程。谷歌“功能区 XML”（不带引号）对于初学者。有几个不错的免费应用程序可以帮助创建/编辑功能区 XML。

Fernando Andreu 的免费 Office RibbonX 编辑器（可在 GitHub 上获得）是一个不错的起点： [https](https://github.com/fernandreu/office-ribbonx-editor/) ://github.com/fernandreu/office-ribbonx-editor/ （或最新版本：[https ://github.com/ fernandreu/office-ribbonx-editor/releases/latest](https://github.com/fernandreu/office-ribbonx-editor/releases/latest)）

Ron DeBruin 在此处提供了有关使用 RibbonX 的大量信息： [https ://www.rondebruin.nl/win/s2/win001.htm](https://www.rondebruin.nl/win/s2/win001.htm)

我关于这个主题的圣经是 Robert Martin、Ken Puls 和 Teresa Hennig 的 RibbonX（Wiley 是出版商）。可在亚马逊上购买。

# jquery - 将 $( ) 包裹在 String 周围不会返回任何内容

> ID：13842289
> 
> 赞同：-5
> 
> 时间：2012-12-12T14:51:02.203
> 
> 标签：jquery

我正在尝试从[这篇文章之后](https://stackoverflow.com/questions/4643853/cant-pass-text-string-into-jquery-function)的字符串中删除 HTML 标记。我试图从中剥离标签的字符串是一个名为 item.content 的 JSON 属性。所以我的代码如下所示：

```
$(item.content).text(); 
```

如果 的值`item.content`如下，则效果很好：

> El mexicano Marco Rodríguez será elárbitro del Duelo entre Corinthians y Al Ahly

但是，如果`item.content`是这样，我会收到一个错误：

> “Prefiero ganar la Décima, aunque el Barça nos saque 25 puntos”，骰子 Iker Casillas

错误是`Error: Syntax error, unrecognized expression`。我猜这是因为单引号，但我不知道如何解决它。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:58:06.407

如果您想对该字符串使用 .text()（或任何其他 jQuery）函数，则需要将其添加到元素中，以便可以在其上使用任何 jQuery 方法。前任。

```
$('<div/>').text(item.content).text() // <-- see how element is created first to add the string.. then use jQuery's text() method to get the string 
```

或者使用带有元素的有效字符串

```
$('<div>' + item.content + '</div>').text() 
```

正如@Kevin B 在评论中指出的那样..

使用

```
$('<div/>').html(item.content).text() 
```

是此示例的正确方法，因为您想保留 html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:57:55.920

请参阅此示例以了解选择器的工作原理。您可以从 DOM-id 或类名中进行选择。（使用 Chrome 或 FireBug 的元素检查器查看控制台的值或替换`console.log`为`alert`）

```
<script type="text/javascript">
  $(document).ready(function() { 
    console.log($('#your_text').html());
  });
</script>

<span id="your_text">hello, this is my value</span> 
```

# netbeans - NetBeans 的 FTP 浏览器插件？

> ID：13842291
> 
> 赞同：1
> 
> 时间：2012-12-12T14:51:04.773
> 
> 标签：netbeans, ftp, netbeans-plugins

一段时间以来，我一直在为 NetBeans 寻找一个好的 FTP 插件。我知道它有一些基本的支持，但你只能在一个项目中使用它，并且在你可以自由编辑/上传东西之前下载所有东西。

我想知道是否有类似 Eclipse 或 Aptana 中的 NetBeans 的 FTP 浏览器插件。您只需在那里拥有整个 FTP 服务器，并且可以在需要时选择文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:48:30.947

您可以查看[FtpSiteDeployer](http://plugins.netbeans.org/plugin/39197/ftpsitedeployer)插件。这可能会满足您的需求。

# ajax - 使用 NoSQL 数据库防止在 Node 中插入不良数据

> ID：13842296
> 
> 赞同：1
> 
> 时间：2012-12-12T14:51:15.460
> 
> 标签：ajax, security, node.js, nosql

假设我们有一个简单的节点 JS 后端，搭配标准的 NoSQL 文档存储，例如 CouchDB。由于我们的数据库只是一个没有模式的文档密钥库，因此可以插入任何内容。而且由于我们的服务器也是基于 JSON 构建的，最终来自客户端的带有 JSON 有效负载的 POST 请求最终会直接存储到我们的数据存储中。

这当然非常方便，并且是一个轻量级的应用程序。不过，我一直想知道，没有为每个可能的插入端点编写代码来验证每个 POST 或 PUT 请求是否格式正确，是否有任何东西可以防止攻击者启动他们的开发者控制台并欺骗 POST/PUT 请求，允许他们将任何类型的垃圾数据插入我们的数据存储区？以这种方式破坏应用程序的数据并不难。

显然，基于令牌的身份验证可以确保只有经过身份验证的用户才能访问这些服务端点，但这并不能阻止他们使用与有效请求相同的 HTTP 标头来欺骗这些请求。使用当今的浏览器开发工具，这一切都非常简单。

在像 Java 这样的传统服务器语言中，JSON PUT 和 POST 被编组为高度结构化的基于类的对象。有效负载与这些格式不匹配的请求会因 HTTP 错误而被拒绝。

有谁知道节点的工具或范例可以确保这样的请求符合一些基本的结构标准？

# json - corona sdk状态保存使用json返回变量

> ID：13842303
> 
> 赞同：0
> 
> 时间：2012-12-12T14:51:33.630
> 
> 标签：json, coronasdk, read-write, state-saving

嗨，我正在使用 corona sdk 构建一个应用程序，这是一本交互式电子书。我需要做的是保存当前变量，然后在启动时加载一个外部文件，其中包含用户所在的场景以及已经做出的选择。我将所有这些都存储为全局变量，每个选项都被赋予一个 0 或 1 的值，场景名称存储在一个具有指定数字的数组中，即。数组中的场景 1 = 1。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:59:39.903

使用要存储的变量创建一个表，并使用这两个函数将表保存在文件中并读取文件并返回存储的表。

```
local function write(table, fileName)
    local filePath = system.pathForFile( fileName, system.DocumentsDirectory )
    local file = io.open( filePath, "w" )
    local encodedTable = json.encode(table)
    file:write(encodedTable)
    io.close( file )
end

local function read(fileName)
    local filePath = system.pathForFile( fileName, system.DocumentsDirectory )
    local file = io.open( filePath, "r" )

    if file then
        local contents = file:read("*all")
        local decodedTable = json.decode(contents)

        io.close( file )
        return decodedTable
    else
        return false
    end
end 
```

# c# - 如何检测是否按下了任何键盘功能键？

> ID：13842305
> 
> 赞同：2
> 
> 时间：2012-12-12T14:51:39.417
> 
> 标签：c#, .net, wpf, .net-4.0

我想知道是否有一种方法可以检测是否在一个语句中按下了任何功能键盘键，而不是像这样列出它们：

```
if( !(e.Key == Key.F1) && !(e.Key == Key.F2) && !(e.Key == Key.F3) ...... !(e.Key == Key.F12)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:58:59.167

一种解决方案是：

```
var key = e.SystemKey == Key.None ? e.Key : e.SystemKey;
if(key >= Key.F1 && key <= Key.F12) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:00:44.780

F 键的值似乎都是连续的 F1 = 90 F12 = 101

但是通常按 F10 会导致意外的结果，

156（系统）

因此，可能很想进行范围检查，例如

```
Key actualKey = (e.SystemKey == Key.None) ? e.Key : e.SystemKey;
if(actualKey >= Key.F1 && actualKey <= Key.F12)
// F Key was pressed 
```

这可能没问题，可以检测任何 F 键。但我也喜欢这个使用开关的解决方案：

```
Key actualKey = (e.SystemKey == Key.None) ? e.Key : e.SystemKey;
switch (actualKey)
        {
            case Key.F1:
            case Key.F2:
            case Key.F3:
            case Key.F4:
            case Key.F5:
            case Key.F6:
            case Key.F7:
            case Key.F8:
            case Key.F9:
            case Key.F10:
            case Key.F11:
            case Key.F12:
                // fkey
                break;

            default:
                // no fkey

                break;
        } 
```

# java - 字符串类正则表达式难度

> ID：13842306
> 
> 赞同：1
> 
> 时间：2012-12-12T14:51:40.477
> 
> 标签：java, regex

我想获取包含字母数字字段的字符串的第一个单词

例如。

字符串可以是'abc123abc'或'abc-123abc'我只想要第一个'abc'有没有办法在没有for循环的情况下得到它（我想用正则表达式来做，但我对正则表达式不太了解）

实际上字符串模式就像

```
[A-Za-z]{2,5}[-]{0,1}[0-9]{1,15}[A-Za-z]{0,15} 
```

我的目标是得到第一个字

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:54:16.360

将要捕获的表达式部分包装在*捕获组*中，然后使用`group(1)`匹配器访问它：

```
([A-Za-z]{2,5})-?[0-9]{1,15}[A-Za-z]{0,15} 
```

第一组将捕获所有内容，直到可选的破折号：

```
Pattern p = Pattern.compile("([A-Za-z]{2,5})-?[0-9]{1,15}[A-Za-z]{0,15}");
Matcher m = p.matcher("abc123abc");
if (m.find()) {
    System.out.println(m.group(1));
} 
```

以上打印`abc`（[链接到ideone](http://ideone.com/p9WiL7)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T14:55:28.567

试试看

```
System.out.println("abc-123abc".split("[-\\d]+")[0]); 
```

输出

```
abc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:54:18.690

```
^[A-Za-z]+ 
```

将匹配字符串开头的 ASCII 字母。那是你需要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:56:24.773

您可以获得匹配的文本`^[A-Za-z]{2,5}`。这将匹配所有的第一个字母。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T15:08:34.740

```
String word = "abc-123abc".replaceFirst("[^a-zA-Z].*$", ""); 
```

这将删除第一个非 az 字符之后的所有内容。您还可以将替换与捕获组一起使用。

```
String word = "abc-123abc".replaceFirst("^([a-zA-Z]+).*$", "$1"); 
```

[String.replaceFirst()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29)

# android - Android - 交换 SupportMapFragment

> ID：13842308
> 
> 赞同：1
> 
> 时间：2012-12-12T14:51:48.387
> 
> 标签：android, supportmapfragment

我的平板电脑应用程序有两个 xml 文件（Android 布局），如果布局是单窗格布局，我想将自定义 MapFragment 与另一个 Fragment 交换。

这是我用来以位置列表开始视图的布局（初始片段是 ListFragment 并且工作正常），所以在 middle_frame.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/header_frame"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</FrameLayout> 
```

接下来是我的 map_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map_fragment_framelayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <fragment class="com.google.android.gms.maps.MapFragment"
        android:id="@+id/map_fragment_id"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</FrameLayout> 
```

当我单击 ListFragment 中的列表项时，我想更新地图以使其移动到新位置，因此我替换了“header_frame”，但它给了我一个空指针异常。这是因为 MapFragment 类不在单窗格布局中。我怎样才能把它们换掉？我尝试调用 setContentView(R.layout.map_layout.xml) 但这会引发相同的错误。如何正确设置布局？

# c# - 100 个字段是否有更短的替代方案？

> ID：13842311
> 
> 赞同：1
> 
> 时间：2012-12-12T14:51:53.567
> 
> 标签：c#, sql

我有很多字段需要传输到 SQL Server 数据库表，但我遇到了一些`NULL`值问题。

我可以使用类似于

```
using (SqlConnection conn = new SqlConnection(connectionString))
 {

  SqlCommand cmd_insert = new SqlCommand("INSERT INTO AccStats (Field1 , Field2 ,
     Field3) VALUES (@value1 , @value2 , @value3)", conn);

  if (record.commRate == null)
  {
    cmd_insert.Parameters.AddWithValue("@value1", DBNull.Value);
  }
  else
  {
    cmd_insert.Parameters.AddWithValue("@value1", record.commRate);
  }

  //Lots more fields

  conn.Open();
  cmd_insert.ExecuteNonQuery();
  conn.Close();

} 
```

我只是想知道是否有一种更简洁/更短的方法来做到这一点，而不是为所有领域写出这 100 次？

```
 if (record.commRate == null)
  {
        cmd_insert.Parameters.AddWithValue("@value1", DBNull.Value);
  }
  else
  {
        cmd_insert.Parameters.AddWithValue("@value1", record.commRate);
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:55:34.370

当然; 这实际上非常适合[小巧玲珑](https://www.nuget.org/packages/Dapper)

```
conn.Execute(
    "INSERT INTO AccStats (Field1,Field2,Field3) VALUES (@commRate,@anotherField,@yetAnotherField)", 
   record); 
```

基本上，dapper 将（单个）参数对象视为键值存储 - 因为`@commRate`在命令中，它使用包括vs`record.commRate`在内的使用规则添加（以及同样的 for and ）。`null``DBNull``record.anotherField``record.yetAnotherField`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:54:56.547

编写一个将返回`DBNull.Value`或实际值的函数：

```
private object DBNullOrValue<T>(T val) where T : class
{
   if(val == null)
     return DBNull.Value;

   return val;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T15:03:09.297

选择你最喜欢的：

1)

```
cmd_insert.Parameters.AddWithValue("@value1", record.commRate ?? DBNull.Value); 
```

2)

```
public static object NullToDBNull(this object val) 
{
   return val ?? DBNull.Value;
}

cmd_insert.Parameters.AddWithValue("@value1", record.commRate.NullToDBNull()); 
```

3)

```
public static void AddNullable(this SqlParameterCollection parameters, 
                            string paramName, object newParameter)
{
    parameters.AddWithValue(paramName, newParameter ?? DBNull.Value);
}

cmd_insert.Parameters.AddNullable("@value1", record.commRate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:26:23.347

尝试使用 Sql server 批量复制。

例子：

```
string connectionString = GetConnectionString();
        using (var connection = new SqlConnection(connectionString))
        {
            using (connection)
            {
                connection.Open();
                // Create a table with some rows. 
                using (var newSessionResults = MakeTable(results))
                {
                    using (var bulkCopy = new SqlBulkCopy(connection))
                    {
                        bulkCopy.DestinationTableName = "tablename";

                        try
                        {
                            // Write from the source to the destination.
                            bulkCopy.WriteToServer(newSessionResults);
                        }
                        catch (Exception ex)
                        {
                            Debug.WriteLine(ex.Message);
                            throw;
                        }
                    }
                }
            }
        } 
```

# android - 防止应用看起来挂起

> ID：13842316
> 
> 赞同：0
> 
> 时间：2012-12-12T14:52:17.700
> 
> 标签：android

我有一个看起来有点像的活动：请不要复制它，它从另一个类中获取三个变量并计算 (a,b) 、 (b,c) 、 (c,d) 、 (a,b,c) 的 gcd然后对等式进行因式分解，并为五个不同的 textViews 提供字符串。另外，如果您可以帮助将 x.square 改进为 x ²，请帮助我，欢迎所有建议。

```
package com.aditya.blabla;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class AlternateForms extends Activity {
AnotherClass ec = new AnotherClass ();
int aa = ec.geta();
int bb = ec.getb();
int cc = ec.getc();

int abhcf = HCF(aa, cc), bchcf = HCF(cc, cc), achcf = HCF(aa, cc),
        abchcf = HCF(abhcf, cc);
String altform1,altform2,altform3,altform4,altform5;
TextView t1, t2, t3, t4, t5;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alternate);
    t1 = (TextView) findViewById(R.id.textView1);
    t2 = (TextView) findViewById(R.id.textView2);
    t3 = (TextView) findViewById(R.id.textView3);
    t4 = (TextView) findViewById(R.id.textView4);
    t5 = (TextView) findViewById(R.id.textView5);
    altform1 = abhcf + "x(" + aa / abhcf + "x+" + bb / abhcf + ")+"
            + cc;
    setProgress(20);
    altform2 = aa + "x.square" + bchcf + "(" + bb / bchcf + "x" + cc
            / bchcf + ")" + cc;
    setProgress(30);
    altform3 = achcf + "(" + aa / achcf + "x.square" + bb / achcf
            + ")" + cc + "x";
    setProgress(40);
    altform4 = abchcf + "(" + aa / abchcf + "x.square" + bb / abchcf
            + "x" + cc / abchcf + ")";
    setProgress(50);
    altform5 = abchcf + "(" + "x" + "(" + aa / abchcf + "x" + bb
            / abchcf + ")" + cc / abchcf + ")";
    if (abhcf != 1) {
        t1.setText(altform1);

    }
    if (bchcf != 1) {
        t2.setText(altform2);

    }
    if (achcf != 1) {
        t3.setText(altform3);

    }
    if (abchcf != 1) {
        t4.setText(altform4);
        t5.setText(altform5);

    }

}

private int HCF(int m, int n) {
    // TODO Auto-generated method stub
    int hcf = 0;
    while (n != 0) {
        hcf = n;
        n = m % n;
        n = hcf;
    }
    return hcf;
}

} 
```

它没有错误，但它需要很多过程并且看起来像挂起并给出强制关闭对话框任何建议来处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:23:43.937

Put all calls to `HCF(m, n)` in the `doInBackground(Void... params)` method in an `AsyncTask`. Put all of the `altformN` assignments from the `onCreate(Bundle s)` method in `doInBackground(Void... params)` as well. Put all the `if` statements where you `setText(CharSequence s)` for each `TextView` in the `onPostExecute(Void nothing)` method of that `AsyncTask`. As you may know, the `onPostExecute(Void nothing)` method in `AsyncTask`s gets executed on the UI thread while `doInBackground(Void... params)` gets executed on a separate thread.

Here is a skeleton implementation:

```
public class AlternateFormsTask extends AsyncTask<Void, Void, Void> {
    int abhcf, bchcf, achcf, abchcf;
    int aa, bb, cc;
    AnotherClass ec = new AnotherClass ();

    @Override
    public Void doInBackground(Void.... params){
        aa = ec.geta();
        bb = ec.getb();
        cc = ec.getc();
        // ...insert all your calls to HCF(m, n) here
        return null
    }

    // If all the processing in doInBackground really takes that long
    // you may want to intersperse some calls to AsyncTask's publishProgress
    // to update the user as to the progress of the app, otherwise it will appear
    // just as hung as before, just without the FC dialogs.

     @Override
     public void onPostExecute(Void nothing){
        //....do all your setText stuff here
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:00:34.213

`Threads`当它需要大量时间时，它总是看起来“挂起”而不使用。完成后使用`Threads`并更新您的 GUI。你应该尽可能少做一些工作`MainThread`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T09:33:53.027

The hcf method should be changed to

```
static int HCF(int a, int b) {
while (b != 0) {
int t = b;
b = a % b;
a = t;
}
return a;
} 
```

# ruby-on-rails - 小到多小才能分片缓存？

> ID：13842317
> 
> 赞同：3
> 
> 时间：2012-12-12T14:52:18.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, memcached, ruby-on-rails-3.2

在 Rails 中片段缓存非动态 html 时

```
<% cache [:long_list] do %>
  <li><!-- Loads of html --></li>
  <li><!-- Loads of html --></li>
  <li><!-- Loads of html --></li>
  <!-- Loads more li items... -->
<% end %> 
```

就缓存内容的大小而言，是否存在缓存会导致页面渲染速度下降的点？

更简洁地说，这可能会降低性能吗？

```
<% cache :div do %>
  <div id="empty-content"></div>
<% end %> 
```

假设用户使用内存缓存，例如 memcached。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:41:07.620

我认为缓存静态内容是没有意义的，因为这些模板在生产中无论如何都是预编译和缓存的——它们实际上是在内存中。

# c++ - 什么 在模板参数中表示

> ID：13842323
> 
> 赞同：3
> 
> 时间：2012-12-12T14:52:47.333
> 
> 标签：c++, templates

我在我正在工作的项目中找到了这段代码：

```
template<typename T>
class SomeClass
{
};
typedef SomeClass<void(void)> SomeType; 
```

建设是什么意思`<void(void)>`？你能用一个简单的例子解释一下如何使用这样的结构吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:54:26.523

就是说type参数是一个不带参数、不返回值的函数类型（注意，不是函数指针，而是函数类型）。

您甚至可以通过以下方式定义函数参数：

```
void f (void(void)); 
```

这将在传递时衰减为函数指针（就像数组参数衰减为指针一样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:55:12.840

`T`这是一种不返回任何内容且不接受任何参数的函数。

# php - 正则表达式提取字符串中包含的 url

> ID：13842326
> 
> 赞同：1
> 
> 时间：2012-12-12T14:53:05.733
> 
> 标签：php, regex, url

我环顾了一会儿，但可能我无法使用正确的关键字“谷歌”，所以我在这里问。我需要使用正则表达式（php）从字符串中提取 url

一个简单的例子应该会有所帮助：

**目标：提取url [http://en.wikipedia.org/wiki/Kettle](http://en.wikipedia.org/wiki/Kettle)**

基本字符串：

```
/url?q=http://en.wikipedia.org/wiki/Kettle&sa=U&ei=VpnIUP22Js3B0gWKhoCgCQ&ved=0CB0QFjAA&usg=AFQjCNGS7-bieZB8Vh7xR5sjOy-KT86ANQ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:01:05.930

有比正则表达式更好的选择来做到这一点。例如，PHP 提供了两个函数`parse_url`，`parse_str`它们完全符合您的要求：

```
$query = parse_url($string, PHP_URL_QUERY);
parse_str($query, $parameters);
$result = $parameters['q']; 
```

也就是说，当然，除非您需要使用正则表达式，因为这是您的框架提供的全部内容，或者因为它是某种练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:56:10.670

测试这个正则表达式：`/q=([^&]+)/i`

```
<?php
  $url = '/url?q=http://en.wikipedia.org/wiki/Kettle&sa=U&ei=VpnIUP22Js3B0gWKhoCgCQ&ved=0CB0QFjAA&usg=AFQjCNGS7-bieZB8Vh7xR5sjOy-KT86ANQ';
  $pattern = '/q=([^&]+)/i';
  preg_match($pattern, $url, $res);
  echo $res[1];
?> 
```

# perforce - Perforce 变更列表差异视图

> ID：13842327
> 
> 赞同：2
> 
> 时间：2012-12-12T14:53:07.883
> 
> 标签：perforce, p4eclipse

有没有办法查看 changelist|changeset 中更改的（最好是图形）视图？我说的是差异，仅以红色显示已删除的行，以绿色显示添加的行，并带有几行上下文，可能以某种方式突出显示行内更改的区域，将未更改的文件列为未更改的文件等。

是否最好使用 P4Eclipse 或最坏情况下的 P4V 或某些外部工具？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-06-06T12:30:04.593

您可以使用任何代码审查工具：它们让您查看更改列表中的所有文件以及更改的文件部分（除非您想查看整个文件）。

对于少量可管理的文件，一种快速简便的方法是将 p4 diff 输出重定向到您的文本编辑器，例如 vim ，并使用其中的配色方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-26T20:01:56.563

您可以使用 P4 diff 工具 (Ctrl+D)，它允许您将更改列表与其他更改列表进行比较。您也可以尝试通过 p4 命令行工具使其工作，然后您可以过滤要列出的差异。

# javascript - MVC3：通过Javascript获取下拉菜单选择的值/文本

> ID：13842328
> 
> 赞同：4
> 
> 时间：2012-12-12T14:53:10.440
> 
> 标签：javascript, asp.net-mvc-3, drop-down-menu, selectedvalue, selectedtext

在 MVC3 上，下拉列表定义为

```
@Html.dropDownList(m=>m.model, new SelectList(m.myList, "value", "text")) 
```

如何通过 javascript 获取选定的值和/或文本？

我尝试传递一个名称：

```
 @Html.dropDownList(m=>m.model, new SelectList(m.myList, "value", "text"), new {name="name") 
```

并从 javascript 中读取名称： document.getElementByName("name")

但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:56:26.170

如果您使用的是 jQuery（这很可能与 MVC 项目一起使用）：

```
// lambda to get the ID of your dropdown. This runs on the server,
// and injects the ID into a client-side variable.
var id = '@Html.IdFor( o => o.model )';

// get the dropdown by ID and wrap in a jQuery object for easy manipulation
var dropdown = $("#" + id);

// get the value
var value = dropdown.val(); 
```

当然，如果需要，您可以将其组合成一行。

如果您不使用 jQuery，请参阅[https://stackoverflow.com/a/1085810/453277](https://stackoverflow.com/a/1085810/453277)。

```
var id = '@Html.IdFor( o => o.model )';
var dropdown = document.getElementById( id );
var value = dropdown.options[dropdown.selectedIndex].value; 
```

手册编号：

```
@Html.dropDownList(m=>m.model, new SelectList(m.myList, "value", "text"), new {id = "ddl1"})

var value = $("#ddl1").val(); 
```

# html - 如何只为多行块元素中的单词着色？

> ID：13842330
> 
> 赞同：0
> 
> 时间：2012-12-12T14:53:20.987
> 
> 标签：html, css, cross-browser

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:06:10.650

我认为你需要在每个单词之后删除跨度，将整个文本放在单个跨度中并使用单词间距属性，例如`span{ word-spacing:10px;}` ，如果你不想删除跨度，你可以使用边距而不是填充

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:21:43.557

我不能代表 Opera 或 Safari，但 IE 似乎响应添加`display: inline-block;`到您的跨度定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:56:00.477

更改`padding`为`margin`

```
span {
    font-size: 14px;
    color: black;
    background: white;
    font-weight: bold;
    margin: 2px 6px 2px 0;
} 
```

[http://jsfiddle.net/Ez92s/1/](http://jsfiddle.net/Ez92s/1/)

Padding 不保留背景颜色边距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:58:25.250

为跨度添加边距以提供它们之间的跨度间距：

```
margin-right:1px; 
```

[js小提琴](http://jsfiddle.net/Ez92s/2/)

# javascript - Django - Javascript files not found

> ID：13842334
> 
> 赞同：0
> 
> 时间：2012-12-12T14:53:38.693
> 
> 标签：javascript, django

I'm trying to use a javascript file for the first time in Django. I've tried putting my file in a directory called 'static/js' both in the main project directory and also under the application directory. In both cases, when I do the `runserver` and go to the page, the file is not found (I used the inspect element option in Chrome).

It says that the location it is looking for the file is '/static/js/script.js' which is what I expect (I think), but says that it can't be found.

There are various other questions saying basically the same thing and I've tried their answers but they don't seem to work...

Cheers.

# sql - 条件 CASE 语句语法

> ID：13842335
> 
> 赞同：6
> 
> 时间：2012-12-12T14:53:43.663
> 
> 标签：sql, sql-server, tsql, case

我需要帮助为视图编写案例陈述。基表有 2 列我将引用：“Stage”和“YesNo”。

如果 Stage 列是 1，YesNo 列是 1，我需要 CASE 语句在视图中将其显示为“否”。如果 Stage 列是 1，YesNo 列是 0，我需要 CASE 语句在视图中将其显示为“是”。如果 Stage 列是 1，YesNo 列是 NULL，我需要 CASE 语句在视图中将其显示为 NULL。如果 Stage 不是 1，我需要 YesNo 列在视图中显示为 NULL。

到目前为止，这是我认为是正确的逻辑，但是当我尝试运行它时，我收到关于单词“AS”的语法错误。有什么建议么？

```
CASE 
    WHEN a.Stage = 1 and a.YesorNo = 1 THEN 'No' 
    ELSE WHEN a.Stage = 1 and a.YesorNo = 0 THEN 'Yes' 
END AS NewViewColumn 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T14:56:03.050

删除`ELSE WHEN`，如果你离开了`ELSE`，那么它将返回`null`任何不符合剩余逻辑的项目：

```
CASE 
    WHEN a.Stage = 1 and a.YesorNo = 1 THEN 'No' 
    WHEN a.Stage = 1 and a.YesorNo = 0 THEN 'Yes' 
END AS NewViewColumn 
```

或使用：

```
CASE 
    WHEN a.Stage = 1 and a.YesorNo = 1 THEN 'No' 
    WHEN a.Stage = 1 and a.YesorNo = 0 THEN 'Yes' 
    ELSE 'other'
END AS NewViewColumn 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:56:00.897

```
CASE 
  WHEN a.Stage = 1 and a.YesorNo = 1 THEN 'No'   
  WHEN a.Stage = 1 and a.YesorNo = 0 THEN 'Yes'
  ELSE something else  -- If you ignored this it will be NULL
END AS NewViewColumn 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T14:55:50.530

您正在使用`ELSE WHEN`，这应该是`ELSE`或者`WHEN .. THEN ..`：

```
CASE
  WHEN a.Stage = 1 and a.YesorNo = 1 THEN 'No'
  ELSE 'Yes'
END AS NewViewColumn 
```

或者：

```
CASE
  WHEN a.Stage = 1 and a.YesorNo = 1 THEN 'No'
  WHEN a.Stage = 1 and a.YesorNo = 0 THEN 'Yes'
END AS NewViewColumn 
```

查看[msdn 页面以`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)获取更多信息。

# asp.net - BCD at Sharepoint how to put paging on ASP Calendar

> ID：13842338
> 
> 赞同：1
> 
> 时间：2012-12-12T14:54:00.070
> 
> 标签：asp.net, sharepoint, asp-classic, calendar, caml

I have got a Question. How to put a Paging by a Caml Queries ,and add the pagging to the ASP Calendar. I must take data from External List which are situated on CRM Microsoft Dynamics and put back from CRM as external lists. I must put all together to ASP calendar. Please help

# java - Jersey WADL: How do you rename generated XSDs

> ID：13842346
> 
> 赞同：9
> 
> 时间：2012-12-12T14:54:24.837
> 
> 标签：java, xsd, jersey, wadl

The web service I am working on has the generated WADL that Jersey creates. What I want to do is rename xsd0.xsd to Result.xsd or something like that. When it regenerates the WADL every time, it will be Result.xsd. Is this possible with Jersey?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:48:50.907

[源代码](https://github.com/jersey/jersey/blob/master/core-server/src/main/java/org/glassfish/jersey/server/wadl/internal/generators/WadlGeneratorJAXBGrammarGenerator.java#L376)以非常私有的方法硬编码`counter++`，所以你不能轻易改变它。但正如我所见，您可以创建自己的 wadl 生成器实现并使用它的`org.glassfish.jersey.server.ServerProperties#WADL_GENERATOR_CONFIG`属性进行配置，然后您可以执行自定义命名代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T05:56:02.857

如果您按照[此](https://wikis.oracle.com/display/Jersey/HowToConfigureExtendedWADL)操作并将 application-grammars.xml 文件修改为此

```
<grammars xmlns="http://wadl.dev.java.net/2009/02"
          xmlns:xsd="http://www.w3.org/2001/XMLSchema"
          xmlns:xi="http://www.w3.org/1999/XML/xinclude">
   <include href="Result.xsd" />
</grammars> 
```

您可以在 wadl 中添加另一个语法 Result.xsd 但**不能替换**xsd0.xsd

# c# - 无法访问 asp net mvc 4 视图中的列表属性

> ID：13842348
> 
> 赞同：0
> 
> 时间：2012-12-12T14:54:38.543
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

可能很简单，但找不到原因

我无法在我的视图中访问列表属性：

如您所见，我有一个包含 RelacionamentoNomeadoModel 类 **模型列表的类：**

```
 public class RelacionamentoNomeadoModel
    {
        public int idRelacionamento { get; set; }
        public string nomeTipoRight { get; set; }
        public string nomeTipoLeft { get; set; }
    }

    public class RelacionamentoListModel
    {
        public List<RelacionamentoNomeadoModel> lista { get; set; }
    } 
```

现在我构建模型并填充 RelacionamentoNomeadoModel 类，以便稍后将其添加到包含列表 **控制器的类中**

```
var relacionamentoObj = from r in context.sistema_relacionamento
                                        join d in context.sistema_DocType on r.idTipoLeft equals d.id
                                        select new tgpwebged.Models.SettingsModels.RelacionamentoNomeadoModel
                                        {
                                           idRelacionamento = r.id,
                                           nomeTipoLeft = d.tipoName,
                                           nomeTipoRight = d.tipoName
                                        };

                return PartialView(relacionamentoObj.ToList()); 
```

最后我试图访问 rela.lista.idRelacionamento 或任何其他属性。在我传递给视图 **视图之后，我能够从控制器访问它们**

```
 @{
    List<tgpwebged.Models.SettingsModels.RelacionamentoListModel> relacionamentos = Model;

    foreach(var rela in relacionamentos) {
    rela.lista.
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:00:52.047

问题是您将`RelacionamentoNomeadoModel`对象的集合传递给视图，而在视图中您希望模型是`tgpwebged.Models.SettingsModels.RelacionamentoListModel`. 不知道您为什么需要`RelacionamentoListModel`上课，但我认为如果您使用此代码将可以正常工作：

```
@{
    List<RelacionamentoNomeadoModel> relacionamentos = Model;

    foreach(var rela in relacionamentos) {
       // DO SOMETHING
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:01:57.147

您将数据作为强类型模型传递给视图，因此您需要在视图中添加以下行：

```
 @model ProjectName.Models.YourModelName 
```

# javascript - jQuery Mobile 页面转换不起作用

> ID：13842353
> 
> 赞同：1
> 
> 时间：2012-12-12T14:54:52.710
> 
> 标签：javascript, jquery, model-view-controller, jquery-mobile, handlebars.js

我正在使用 Handlebars 和 jQuery Mobile 实现自定义 MVC 结构。为了手动处理路由，我禁用了两个 jQM 参数：

```
$.mobile.linkBindingEnabled = false;
$.mobile.hashListeningEnabled = false; 
```

这两行禁用 jQuery Mobile 链接绑定和哈希侦听。在我想使用除`fade`. 当我重新启用链接绑定时，页面转换开始工作，但有趣的事情开始发生（例如，页面的标题显示为 {{page}} 因为 jQM 在 Handlebars 编译之前将其从 HTML 中提取出来）。

有任何想法吗？

```
<!DOCTYPE html>
<html>
<head>
  <link href="/styles/jquery.mobile.css" rel="stylesheet" >
  <script src="/script/jquery.js" type="text/javascript"></script>
  <script src="/script/jquery.mobile.js" type="text/javascript"></script>
  <script src="/script/handlebars.js" type="text/javascript"></script>
</head>
<body>

<div id="one" data-role="page">
  <div data-role="header"><h1>{{page}}</h1></div>
  <div data-role="content">
    <p>
      {{content}}
      <a href="#two" data-role="button" data-transition="slide">Two</a>
    </p>
  </div>
</div>

<div id="two" data-role="page">
  <div data-role="header"><h1>{{page}}</h1></div>
  <div data-role="content">
    <p>
      {{content}}
      <a href="#one" data-role="button" data-transition="slide">One</a>
    </p>
  </div>
</div>

<script>
var count = 0;
function one() {
  return({page: 'One', content: 'One is the loneliest number.'});
}

function two() {
  return({page: 'Two', content: 'Two is company.'});
}

// Handle link binding and hash changes manually
$.mobile.linkBindingEnabled = false;
$.mobile.hashListeningEnabled = false;

// Router
$(window).bind('load hashchange', function() {
  var hash = '#one';
  if (location.hash.length > 0) {
    hash = location.hash;
  }
  var source = $(hash).html();
  var template = Handlebars.compile(source);
  var html = template(window[hash.substring(1, hash.length)]());
  $(hash).html(html);
  $.mobile.changePage(hash);
});

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:34:03.003

Jquery 移动转换在本机应用程序中运行良好。使用插件会导致很多失真。如果你真的想要那个动画，我建议你不要使用任何插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:27:52.440

You will really need to take a look at rewriting how and where you call your animations in the jqm structure.

pagebeforechange, pagebeforeload, pagebeforecreate, etc.. If you have shut off the ajax you are disabling alot of this functionality. I don't think you are going to find a singular answer that will solve your problem outright. We struggled with it as well and finally had to find a compromise and a lot of testing to find the right combination of usage with our templating structures (pure.js).

# java - 不同 Hibernate 会话中对象的可见性

> ID：13842357
> 
> 赞同：0
> 
> 时间：2012-12-12T14:55:03.310
> 
> 标签：java, hibernate, session, flush

[`FlushMode`](https://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/FlushMode.html)在两个[`Session`](https://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Session.html)s 中都设置为[`AUTO`](https://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/FlushMode.html#AUTO)。

`Session` **答**：`Session`开始

`Session` **B**：`Session`开始

`Session` **A** :`Session`创建新对象，[`Session#flush()`](https://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Session.html#flush%28%29)被调用，`Session`结束。

`Session` **B**：`Session`从数据库中读取对象并`Session#flush()`在此操作之前自动执行。**A**新创建的对象对`Session` **B**也可见吗？`Session`

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:55:06.060

这取决于您的隔离级别和底层数据库。Hibernate 将隔离级别默认为底层数据库。MySQL 的默认值为 REPEATABLE_READ。这意味着如果 A 在 B 首次读取之前提交，会话 B 将看到更新（不管这是否是对相关更新实体的读取，尽管我相信这是 MySQL 特定的行为。某些数据库可能允许读取不相关的实体）。

如果隔离级别为 READ_COMITTED，则会话 B 将看到来自会话 A 的更新，只要会话 A 在会话 B 执行您感兴趣的读取之前提交。

值得指出的是，除非您完全没有隔离，否则刷新对这个问题绝对没有影响。唯一重要的是提交。**

# c# - 导出多个 MEF 元数据属性

> ID：13842360
> 
> 赞同：2
> 
> 时间：2012-12-12T14:55:09.197
> 
> 标签：c#, metadata, mef

美好的一天，请您协助我完成这项复杂的任务。我用 MEF 开发模块应用程序。每个模块都有这样的元数据：

```
 [MetadataAttribute]
        [AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
        public abstract class ModuleMetadata : ExportAttribute, IArmModuleMetadata
        {
            private ModuleDescriptor _descriptor;

            public ModuleMetadata(string name, string code, string category, string iconUri)
                : base()
            {
                _descriptor = new ModuleDescriptor(name, code, category, iconUri);               
     }
} 
```

我这样使用它：

```
 [Export(typeof(IArmTaskModule))]
[TaskModuleMetadata("test1", "code",
     @"pack://application:,,,/WpfVisualModule;component/Icons/chart_line_error.png",
     "road_weather_stations",
     TargetItem = TargetItems.ControlComplex)]
class AdvancedChartContract : Burstroy.Arm.Contracts.IArmTaskModule 
```

对于每个模块，都有一组由 `Dictionary<string, Settings.ParamDescriptor> CreateSettingsBlock()`in 方法生成的属性`IArmModule`，其中 Key 包含属性代码，Value 包含花哨的名称和默认值。

在我的主应用程序中，我`Lazy<T, TMetadata>`用于导入这样的模块

```
[ImportMany(typeof(IArmTaskModule), AllowRecomposition = true)]
private IEnumerable<Lazy<IArmTaskModule, IArmTaskModuleMetadata>> _taskModules; 
```

这种方法中的问题`Lazy<T, TMetadata>`将创建`IArmTaskModule`用于从方法接收设置块的实例。**我想通过向元数据添加属性信息来防止它。**我试图用 new List () 扩展属性构造函数，但它失败了（属性限制），我也尝试创建新属性

```
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = true)]
public class ExportedParam : ExportAttribute, IArmModuleProperty
{
    public ExportedParam(string code, string fancyName) 
        : base()
    {
        this.Code = code;
        this.FancyName = fancyName;
        //this.Value = value;
    }

    public string Code { get; private set; }
    public string FancyName { get; private set; }
    public object Value { get; private set; }
} 
```

但它也失败了。

```
[ExportedParam("a", "b")]
[ExportedParam("b", "c")]
[ExportMetadata("fffffuuu", 2)]
class MeteoSummary : IArmVisualModule, 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:13:44.413

该类`ModuleMetadata`不遵循[自定义导出属性准则](http://mef.codeplex.com/wikipage?title=Exports%20and%20Metadata)。

它应该是这样的：

```
 [MetadataAttribute]
    [AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
    public abstract class ModuleMetadataExportAttribute : ExportAttribute
    {
        public ModuleDescriptor Descriptor { get; private set; }

        public ModuleMetadata(string name, string code, string category, string iconUri)
            : base(typeof(IArmTaskModule))
        {
            Descriptor= new ModuleDescriptor(name, code, category, iconUri);               
        }
     } 
```

你的元数据界面是这样的：

```
public interface IArmModuleMetadata
{
    ModuleDescriptor Descriptor { get; }
} 
```

注意：

*   您不必让自定义导出属性实现元数据接口。MEF 将处理此问题。
*   您需要将导出的类型传递给 ExportAttribute 的构造函数。
*   您将自定义导出属性的所有公共属性添加到接口。

我还更改了自定义属性类的名称以符合创建自定义属性的指南（我现在找不到这方面的来源，但您可以查看 Cwalina, Abrams 的框架设计指南第 2 版）。不过，这不是必需的。

然后你像这样导出：

```
[ModuleMetadataExport(...))] //Add your params here.
[TaskModuleMetadata("test1", "code",
     @"pack://application:,,,/WpfVisualModule;component/Icons/chart_line_error.png",
     "road_weather_stations",
     TargetItem = TargetItems.ControlComplex)]
class AdvancedChartContract : Burstroy.Arm.Contracts.IArmTaskModule 
```

我离开了`TaskModuleMetadata`，因为我不知道它是什么。我认为它与MEF无关。

最后保持导入部分不变。然后，当您遍历`_taskModules`序列时，`Value`只有在检查了`Metadata`属性并确保当前模块是您想要的模块后，您才能访问该属性。然后您访问该`Value`属性并创建模块。

# makefile - Linaro cross-compile Glibc for ARM errors with invalid swi expression

> ID：13842361
> 
> 赞同：3
> 
> 时间：2012-12-12T14:55:10.467
> 
> 标签：makefile, arm, cross-compiling, embedded-linux, glibc

I am trying to build glibc-2.13 with debugging symbols for ARM using the Linaro Toolchain on a 32-bit Ubuntu 10.04 Virtual Machine. From what I have researched, the steps to do so ( and the steps I've taken ) are shown here:

```
mkdir /home/user/Desktop/glibc
cd /home/user/Desktop/glibc
wget http://ftp.gnu.org/gnu/glibc/glibc-ports-2.13.tar.gz
wget http://ftp.gnu.org/gnu/glibc/glibc-2.13.tar.bz2
tar xvjf glibc-2.13.tar.bz2
tar xvf glibc-ports-2.13.tar.gz
mkdir -p glibc-2.13/ports
cp -r glibc-ports-2.13/* glibc-2.13/ports
mkdir tmp
mkdir glibc-build
cd glibc-build
export CFLAGS="-O1 -g"
export CPPFLAGS="-O1 -g"
export CC=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-gcc
export CXX=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-g++
../glibc-2.13/configure --host=arm-linux --prefix=/home/user/Desktop/glibc/tmp --enable-addons ports=yes
make 
```

The configure step completes and when I move on to make, the build errors after a short time with the following error:

```
In file included from ../ports/sysdeps/unix/sysv/linux/arm/ldsodefs.h:23:0,
                 from ../csu/libc-tls.c:21,
                 from ../ports/sysdeps/arm/libc-tls.c:20:
../sysdeps/unix/sysv/linux/ldsodefs.h:64:0: note: this is the location of the previous definition
/tmp/ccgCNS8e.s: Assembler messages:
/tmp/ccgCNS8e.s:174: Error: invalid swi expression
/tmp/ccgCNS8e.s:174: Error: value of 983045 too large for field of 2 bytes at 196
make[2]: *** [/home/user/Desktop/glibc/glibc-build/csu/libc-tls.o] Error 1
make[2]: Leaving directory `/home/user/Desktop/glibc/glibc-2.13/csu'
make[1]: *** [csu/subdir_lib] Error 2
make[1]: Leaving directory `/home/user/Desktop/glibc/glibc-2.13'
make: *** [all] Error 2 
```

From what I've read 'tls' is required, and if I try to build --without-tls , it errors saying that I do need tls. I haven't found anything on Google for this problem.

Does anyone know how I can resolve this and get past this error? Thanks -

EDIT: I've added the following exports before the configure command and still get the same error:

```
export CC=/home/user/gemini/toolchain/linaro/bin/arm-linux-gnueabi-gcc
export CXX=/home/user/gemini/toolchain/linaro/bin/arm-linux-gnueabi-g++
export AR=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-ar
export AS=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-as
export LD=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-ld
export RANLIB=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-ranlib 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T20:19:38.253

我不确切知道这笔交易是什么——可能为我的工具链指定了不正确的 --host 参数。我最终使用以下命令在我的 Ubuntu 32 位 10.04 VM 上成功编译了 glibc 2.13：

```
sudo apt-get install libmpc-dev -y
sudo apt-get install libgmp-dev -y
sudo apt-get install libmpfr-dev -y
sudo apt-get install autoconf -y
sudo apt-get install gawk -y
cd ~/Desktop
GLIBC_VERSION="2.13"
rm -rf glibc
mkdir /home/user/Desktop/glibc
cd /home/user/Desktop/glibc
wget http://ftp.gnu.org/gnu/glibc/glibc-ports-$GLIBC_VERSION.tar.gz
wget http://ftp.gnu.org/gnu/glibc/glibc-$GLIBC_VERSION.tar.bz2
rm -rf glibc-build/ tmp/ glibc-$GLIBC_VERSION/ glibc-ports-$GLIBC_VERSION/
tar xvjf glibc-$GLIBC_VERSION.tar.bz2
tar xvf glibc-ports-$GLIBC_VERSION.tar.gz
mkdir -p glibc-$GLIBC_VERSION/ports
cp -r glibc-ports-$GLIBC_VERSION/* glibc-$GLIBC_VERSION/ports
mkdir tmp
mkdir glibc-build
cd glibc-build
CFLAGS="-O1 -g"
CPPFLAGS="-O1 -g"
CC=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-gcc
CXX=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-g++
AR=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-ar
AS=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-as
LD=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-ld
RANLIB=/home/user/proj/toolchain/linaro/bin/arm-linux-gnueabi-ranlib
export PATH=$PATH:/home/user/proj/toolchain/linaro/bin
export LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu
../glibc-$GLIBC_VERSION/configure --with-tls --host=arm-linux-gnueabi --prefix=/home/user/Desktop/glibc/tmp --enable-addons ports=yes
make
cd ../ 
```

# java - Is any solution in javamail for search all the mail boxes in the same time?

> ID：13842367
> 
> 赞同：1
> 
> 时间：2012-12-12T14:55:20.297
> 
> 标签：java, jakarta-mail

I try to search all the mail boxes in the same time. But, in thread it's doesn't work. because I need keep connection. [before question](https://stackoverflow.com/questions/13788895/how-to-keep-javamail-connection-in-android)

**Does anyone have any solution for this problem?**

THANKS,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:59:55.463

没有一个 JavaMail 方法可以同时搜索所有邮箱，因为底层 IMAP 协议不支持这样的操作。您需要遍历所有邮箱并分别搜索每个邮箱。使用 Store.getDefaultFolder() 方法获取顶级文件夹，使用 Folder.list() 方法获取所有文件夹的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:40:40.323

这会帮助你

```
SearchTerm olderThan = new ReceivedDateTerm(ComparisonTerm.LT, someFutureDate);
SearchTerm newerThan = new ReceivedDateTerm(ComparisonTerm.GT, somePastDate);
SearchTerm andTerm = new AndTerm(olderThan, newerThan);
your_folder.search(andTerm); 
```

如果您使用得当，线程不会影响您的机制。

# qt - 有哪些剥皮可能性？

> ID：13842368
> 
> 赞同：1
> 
> 时间：2012-12-12T14:55:21.717
> 
> 标签：qt, qml, skinning, qtstylesheets

我的目标是创建一个皮肤模块，从某个地方加载皮肤，然后根据当前加载的皮肤更改应用程序的外观。我曾考虑使用资源文件，其中包含包含应用程序颜色属性的所有图像、字体和 json 文件，但我最近还发现皮肤也可以通过 Qt 样式表完成。我的问题是：

*   我有哪些专业的解决方案来为 Qt 应用程序蒙皮（一般来说）？
*   如何将 Qt 样式表与 QML 结合使用，以便我可以轻松更改背景图像（来自源或其他地方）、颜色等？
*   为 Qt 应用程序存储皮肤的最佳方式是什么？

添加：我的应用程序是用 QML 描述的，所以这里不可能使用样式表。我该如何设计这种应用程序的样式？如果前面的所有问题也能得到解答，我将不胜感激，这样其他用户可能会发现它很有用。

期待感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:39:42.090

可以证明您可以获得更好的答案，但我一直在做的是编写不同的样式表并将它们存储为内部资源。然后，您可以从一个样式表动态更改为另一个样式表，甚至解析加载的样式表，更改背景颜色或其他值，并将其写入用户文件夹，以便每个用户都可以个性化外观。

# c++ - time_t 在 windows 中来回字符串

> ID：13842369
> 
> 赞同：1
> 
> 时间：2012-12-12T14:55:23.963
> 
> 标签：c++, string, time

我有 2 个功能。第一个将 time_t 转换为字符串。time_t 的第二个字符串。我只有需要转换并恢复为字符串的日期。

功能是

```
void split(const string &s, char delim, vector<string>& elems) {
    stringstream ss(s); string item; 
    while(getline(ss, item, delim)) { elems.push_back(item);} return;
}

time_t getDateInTimeTfromHyphenSplitString(string s)
{
    struct tm tmvar = {0};
    vector<string> tim;
    split(s.c_str(),'-',tim);
    tmvar.tm_year = atoi(tim[2].c_str()) - 1900;
    tmvar.tm_mon = atoi(tim[1].c_str());
    tmvar.tm_mday = atoi(tim[0].c_str());
    tmvar.tm_isdst = 0;
    time_t ttm = mktime(&tmvar);
    return ttm;
}

string getDateInHyphenSplitStringfromTimeT(time_t t)
{
    struct tm *timeinfo = (tm*)malloc(sizeof(tm));
    gmtime_s(timeinfo, &t);
    char *buffer = NULL;
    buffer = (char*)malloc((size_t)20);
    strftime(buffer, 20, "%d-%m-%Y", timeinfo);
    string s = buffer ;
    return s;
} 
```

现在，当我用以下几行测试这段代码时，输​​出看起来很奇怪。

```
string sk = "31-12-2010";
cout << sk << endl;
time_t ttk = getDateInTimeTfromHyphenSplitString(sk);
sk = getDateInHyphenSplitStringfromTimeT(ttk );

cout << sk << endl; 
```

**输入：- 31-12-2010 输出：- 30-01-2011**

奇怪的是，对于我作为输入提供的任何日期，我都会得到 1 个月的差异。

请让我知道，如果如何找回正确的时间。

PS：我选择这种技术是因为我需要用'-'来格式化日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:02:33.030

`tm_mon`计算[“自一月以来的月份”](http://www.cplusplus.com/reference/ctime/tm/)，因此值范围为 0 到 11。

您需要从输入月份中减去 1。

* * *

除此之外，您的代码会泄漏内存：您永远不会`free`编辑`malloc`内存。由于您使用 C++ 进行编程，因此我建议不要完全使用 malloc/free，而是使用 [new、new[]、delete 和 delete[]](http://en.wikipedia.org/wiki/New_%28C++%29)，因为 malloc 没有对象的概念并且不调用构造函数。

在您的函数的特殊情况下，您甚至根本不需要动态内存分配：

```
 struct tm timeinfo;
    gmtime_s(&timeinfo, &t);
    char buffer[20];
    strftime(buffer, sizeof(buffer), "%d-%m-%Y", &timeinfo); 
```

# c# - 将简单文本转换为 XML

> ID：13842375
> 
> 赞同：0
> 
> 时间：2012-12-12T14:55:41.730
> 
> 标签：c#, .net, xml

我想将字符串转换为 XML。当然我可以这样做：

```
"<node Attribute1="att1">" + MyString + "</node>" 
```

但是，如果 .net 中有东西，为什么要重新发明轮子呢。有没有一种方法可以接受节点名称、属性和内部 XML 并返回 XML 字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T14:57:53.293

您可以使用[Linq To Xml](http://msdn.microsoft.com/en-us/library/bb387085.aspx)

```
var xElem = new XElement("node", new XAttribute("Attribute1", "att1"), "MyString");
var xml = xElem.ToString(); 
```

会给你

```
<node Attribute1="att1">MyString</node> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:12:58.230

您还可以创建一个 XmlDocument 对象并使用它的 LoadXmlMethod：

```
XmlDocument document = new XmlDocument();
document.LoadXml("<node Attribute1=\"att1\">" + MyString + "</node>"); 
```

# java - Grizzy/Jersey：POJO 映射不适用于 Maven one-jar

> ID：13842377
> 
> 赞同：2
> 
> 时间：2012-12-12T14:55:45.210
> 
> 标签：java, maven, jersey, grizzly

[我在 github 上](https://github.com/boldt/Simple-Jersey-Example)创建了一个简单的项目（参见那里的源代码）。

如果我将项目作为 Eclipse 中的 Maven 项目导入并运行它，我可以卷曲 XML/JSON 资源。

如果我用它创建一个 jar`mvn package`并运行它，我无法 curl XML/JSON 资源。我收到以下错误：

`Caused by: com.sun.jersey.api.MessageException: A message body writer for Java class de.dennis_boldt.resources.User, and Java type class de.dennis_boldt.resources.User, and MIME media type application/xml was not found`

`Caused by: com.sun.jersey.api.MessageException: A message body writer for Java class de.dennis_boldt.resources.User, and Java type class de.dennis_boldt.resources.User, and MIME media type application/json was not found`

我错过了什么吗？也许是 Maven 依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:10:25.743

解决方案是使用`maven-shade-plugin`：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version>2.0</version>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>shade</goal>
            </goals>
            <configuration>
                <transformers>
                    <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                        <manifestEntries>
                            <Main-Class>package.Main</Main-Class>
                            <Build-Number>1</Build-Number>
                        </manifestEntries>
                    </transformer>
                    <transformer implementation="org.apache.maven.plugins.shade.resource.ServicesResourceTransformer"/>
                </transformers>
                <filters>
                    <filter>
                        <artifact>*:*</artifact>
                        <excludes>
                            <exclude>META-INF/*.SF</exclude>
                            <exclude>META-INF/*.DSA</exclude>
                            <exclude>META-INF/*.RSA</exclude>
                        </excludes>
                    </filter>
                </filters>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

# iphone - 新版iPhone APP使用另一台电脑

> ID：13842379
> 
> 赞同：1
> 
> 时间：2012-12-12T14:55:47.147
> 
> 标签：iphone

我需要为 iphone 提交新版本的应用程序。当前版本由客户创建并提交，我受雇创建新版本。

当我尝试验证应用程序时，出现以下消息： [https ://www.evernote.com/shard/s41/sh/a767446e-6b42-40eb-a346-222e82661d39/0ab7fe259ebb267a166c5e034955576f](https://www.evernote.com/shard/s41/sh/a767446e-6b42-40eb-a346-222e82661d39/0ab7fe259ebb267a166c5e034955576f)

我想，我必须生成一个新的分发证书。我可以访问客户的帐户（iTunes 连接），但我害怕撤销当前证书并在应用商店出售的应用中出现问题。

我应该如何进行？吊销证书并在我的机器上创建另一个证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:50:39.903

您应该能够通过 Xcode Organizer 导出您的开发人员配置文件（即所有配置配置文件和密钥）。在 Devices 选项卡下的 Organizer 中，选择 Developer Identity（可在 Teams 部分中找到）并将其导出（系统将提示您输入密码）。将此文件转移到新系统并导入，然后您的身份应该在新系统上设置。

# python - 在 Python 中使用参数执行 Fortran 子进程

> ID：13842383
> 
> 赞同：2
> 
> 时间：2012-12-12T14:55:54.173
> 
> 标签：python, subprocess, fortran90

我过去曾成功使用该`subprocess`模块，但是，我一直在努力将 Fortran 可执行文件传递给参数。

它适用于命令行：`.\IMT.EXE path\to\file`很好。但是当我尝试使用 subprocess 模块向它传递完全相同的参数时，

```
subprocess.call(['.\IMT.EXE', file_path]) 
```

IMT 告诉我输入的文件无效。不幸的是，IMT 不会输出无效的文件名，这使得调试变得困难。我知道文件在那里，我知道正在向 IMT 传递一个参数，但由于某种原因，该字符串没有被正确传递。我目前正在`gcc`cygwin 上下载，这样我至少可以尝试打印无效的文件名（尽管我以前从未编写过 fortran）。

我尝试过的其他事情没有成功：这个只是挂起并且什么都不做。

```
p = subprocess.Popen(['.\IMT.EXE'], stdin=subprocess.PIPE, stdout=subprocess.PIPE)
result = p.communicate(file_path.encode()) 
```

或者这个只是打印出来`Output:`然后什么都没有。

```
p.stdin.write(temp_i_name.encode())
p.kill()
print('Output: ', p.stdout.read().decode()) 
```

虽然我不相信它会有所帮助（而且它没有），但我也尝试过设置`shell=True`.

我也试过`os.system`

```
os.system('.\IMT.EXE' + ' ' + file_path) 
```

同样的错误：

```
Input Error.
Command line argument for Inverse Modeling Toolkit must
be valid path and filename of instruction file. 
```

其他相关信息：

*   Windows 7的
*   蟒蛇 3.3
*   IMT 是用 Fortran90 编写的
*   我有 IMT 源代码，但对 Fortran 一无所知。

我已经查看了关于该模块的其他帖子，`subprocess`但没有一个有帮助。

编辑：

所以我终于让它工作了。问题不在于不正确地处理反斜杠，而是我假设在`IMT.EXE`打开子进程时它会将其目录视为当前工作目录。它不是。我在调用 IMT: 时应该更清楚，`subprocess.call([os.path.join('imt', 'IMT.EXE'), file_path])`并且只作为文件名传递`file_path`，因为它存在于 directory 中`imt`。对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:29:12.653

我的猜测是，您错误地传递了文件名。例如，您是否正确转义了反斜杠？你说你在调用这个程序之前编写了文件，你是否记得刷新文件以便它实际上物理上在磁盘上？

你能告诉我们你是如何定义文件名的吗？

另一种选择：在调用外部进程之前立即添加一个 pdb 断点。当您的脚本在该点停止时，打开另一个窗口并查看文件是否存在。

# tsql - 两个按两列分组并计数

> ID：13842390
> 
> 赞同：1
> 
> 时间：2012-12-12T14:56:20.890
> 
> 标签：tsql, count, group-by, ssrs-2008

```
Name  | Fruit  |  Red  
John  | Apple  |  Yes  
John  | Apple  |  No  
John  | Pear   |  Yes  
Mike  | Mango  |  No 
```

我怎样才能得到如下所示的结果：

```
Name | Fruits total | Red fruits total  
John | 3            | 2 
```

如何在另一列的两个计数操作中使用第一列的值？可能吗？如果有帮助，我需要这个查询来获取 ssrs 报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:02:47.820

您可以使用以下内容，如果您按名称过滤，那么您可以使用`count(*)`然后使用带有 a 的聚合函数`CASE`来确定红色水果的总数：

```
select name,
  count(*) TotalFruit,
  sum(case when red='Yes' then 1 else 0 end) TotalRed
from yourtable
where name = 'John'
group by name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/34868/1)

结果：

```
| NAME | TOTALFRUIT | TOTALRED |
--------------------------------
| John |          3 |        2 | 
```

# cocoa-touch - iOS 5 缺少突出显示解决方案

> ID：13842400
> 
> 赞同：1
> 
> 时间：2012-12-12T14:56:44.110
> 
> 标签：cocoa-touch, ios5

我想知道是否有替代解决方案可以访问发生这种情况的时刻。对于 iOS 6 SDK，我们有`tableView:didHighlightRowAtIndexPath:`

但我受 iOS 5 项目规范的约束。

有什么建议吗？

# jquery - 使用 jquery.validate 进行表单验证以通过覆盖错误放置来显示正确和错误的图标

> ID：13842403
> 
> 赞同：1
> 
> 时间：2012-12-12T14:57:00.237
> 
> 标签：jquery, html, twitter-bootstrap

我正在尝试实现[这里](http://jquery.bassistance.de/validate/demo/milk/)的演示 jquery validate 插件。但我要解决的是：如果您在页面加载后单击提交，插件会显示带有十字符号的验证消息。如果你输入一些东西，味精会变成复选标记图像。但是，如果您再次删除文本，它会显示验证消息，但带有复选标记而不是交叉图像。我想为我的网站更正此问题：

我正在使用 jquery.validate 进行客户端验证。为了显示带有验证消息的右和十字图标，我使用了 icomoons 图标集（css 方法）。我在下面添加了我的 html 和 JS 脚本。我试图使用错误放置来更改默认容器，但是如果您在文本框中输入内容然后再次将其删除，则从十字到右的图标不会改变。消息出现，但图标没有改变。

另外，我想学习任何更有效的方法来编写 jquery.validate 来实现我在这里所做的图标方法。

此处的 HTML 部分：

```
 <!-- First step - form section starts here -->
         <form class="form-horizontal" id="sampleForm">
            <div class="control-group">
              <label class="control-label" for="firstName">First Name:</label>
              <div class="controls">
                <input type="text" id="firstName" name="firstName" placeholder="Peter">
                <div class="errormsgwrapper">
                 <span data-icon="&#xe000;" class="right hidden" aria-hidden="true"></span>
                 <span data-icon="&#xe003;" class="wrong hidden" aria-hidden="true"></span>
                 <div class="errormessage"></div>
                 </div> 
              </div>
            </div>
            <div class="control-group">
              <label class="control-label" for="lastName">Last Name:</label>
              <div class="controls">
                <input type="text" id="lastName" name="lastName" placeholder="Parker">
                <div class="errormsgwrapper">
                 <span data-icon="&#xe000;" class="right hidden" aria-hidden="true"></span>
                 <span data-icon="&#xe003;" class="wrong hidden" aria-hidden="true"></span>
                 <div class="errormessage"></div>
                 </div> 
              </div>
            </div>
            <div class="control-group">
              <div class="controls pull-right">
                <button type="submit" class="btn">Next &raquo;</button>
              </div>
            </div>
        </form>
        <hr>
        <!-- /form --> 
```

验证脚本：

```
$().ready(function() {

// validate signup form on keyup and submit

    $("#sampleForm").validate({

        rules: {
            firstName: "required",
            lastName: "required"
        },
        highlight: function(label) {
    $(label)
        .closest('.control-group').removeClass('success').addClass('error');
    $('label.error').removeClass('checked');
  },
  success: function(label) {
    label.parents(".errormsgwrapper").children('.wrong').addClass('hidden');
    label.parents(".errormsgwrapper").children('.right').removeClass('hidden');
    label.closest('.control-group').addClass('success');

  },
        messages: {
            firstName: {
                    required: "asdfds"
                },
            lastName: "Please enter your lastname"
        },
         errorPlacement: function(error, element) {
            var errormsgwrapper = element.next(".errormsgwrapper");

                errormsgwrapper.children("span.right").addClass('hidden');
                errormsgwrapper.children("span.wrong").removeClass('hidden');
                error.appendTo(errormsgwrapper.children(".errormessage"));

         }

    });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:57:46.760

**解决方案在这里** 我找到了解决方案，还包括下面的示例代码。我们可以使用 highlight/unhighlight 来实现。我正在尝试错误放置，当元素上的类从有效变为错误时不会触发！可以使用类甚至 html 元素来显示/隐藏使用突出显示和取消突出显示，如下面的 js 代码所示......

```
<div id="signupwrap">
        <form id="signupform" autocomplete="off" method="get" action="">
        <div class="question">
            <label for="firstname">First Name:</label>
        </div>
        <div class="answer">
        <input type="text" name="firstname" />
        <div class="errormessagewrapper">
            <span aria-hidden="true" class=""></span>
        </div>
        </div>
        <br /><br />
        <div class="question">
            <label for="lastname">Last Name:</label>
        </div>
        <div class="answer">
        <input type="text" name="lastname" />
        <div class="errormessagewrapper">
            <span aria-hidden="true" class=""></span>
        </div>
        </div>
         <br /><br />

            <input id="signupsubmit" name="signup" type="submit" value="Signup" />

          </table>
      </form>
  </div> 
```

我已经包含了该 span 标签，以便为图标或图像提供适当的样式，无论您想在验证消息中显示什么。JS代码如下：

```
$(document).ready(function() {
// validate signup form on keyup and submit
var validator = $("#signupform").validate({

    rules: {
        firstname: "required",
        lastname: "required"
    },
    messages: {
        firstname: "Enter your firstname",
        lastname: "Enter your lastname"
    },

    errorPlacement: function(error, element) {
            error.appendTo(element.next('.errormessagewrapper').children());
    },
    // specifying a submitHandler prevents the default submit, good for the demo
    submitHandler: function() {
        alert("submitted!");
    },
    // set this class to error-labels to indicate valid fields
    success: function(label) {

    },
    highlight: function(element, errorClass, validClass) {

   $(element).next('.errormessagewrapper').children('span').addClass("icon-cancel").removeClass("icon-checkmark");

  },
  unhighlight: function(element, errorClass, validClass) {
     $(element).next('.errormessagewrapper').children('span').removeClass("icon-cancel").addClass("icon-checkmark");

  }
    });

}); 
```

# android - Admob 可用性和收费

> ID：13842404
> 
> 赞同：0
> 
> 时间：2012-12-12T14:57:04.733
> 
> 标签：android, admob

我想出售我的应用程序，但目前无法在某些国家（包括我的斯洛伐克）的谷歌市场上出售应用程序。所以我决定试试 AdMob

1.  我想知道我是否可以在我的国家通过 AdMob 赚钱，是否有“支持”国家/地区列表？
2.  AdMob 帐户是否需要支付任何费用（例如激活、服务月费等）？我应该在我的应用发布之前等待 AdMob 帐户注册，还是我现在可以注册（即使我可能几个月都不会使用它）而不会造成任何伤害？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:10:38.277

ad mob 没有付款（因为他们在您展示广告时赚钱，并且不想吓跑潜在的广告商）并且只要在您发布您的应用程序之前注册就可以了。正如这里所说 - [http://www.admob.com/home/about](http://www.admob.com/home/about) - 他们支持“160 个国家”。我找不到这些国家的列表，但你当然可以尝试创建一个帐户，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T13:20:18.920

this is an old question, but I put this here for anyone looking for a information on unsupported countries:

this [list](https://support.google.com/admob/answer/4755589?hl=en) which kind of old is all I could find, but I don't think any missing countries have been added since.

also to my knowledge, users from unsupported countries can still see and click the ads but it will **NOT** produce any revenues for you. so if you're targeting a certain region and its not listed above you might want to look for alternatives.

# powershell - Powershell - 将 PSCredential 对象传递到新的命令窗口

> ID：13842405
> 
> 赞同：0
> 
> 时间：2012-12-12T14:57:11.513
> 
> 标签：powershell, command-line, arguments

我有一个调用 Get-Credential 的 powershell 脚本。输入的凭据稍后将在脚本和子脚本中用于多个服务器。

代码看起来像：

```
$credentials = get-credential
CMD /c start powershell.exe -noexit -File subscript.ps1 $credentials 
```

问题在 subscript.ps1 里面，我有这段代码只是为了看看会发生什么：

```
$args.length
$args[0] 
```

这给了我 1 System.Management.Automation.PSCredential

如您所见，它没有传递 Get-Credential 调用返回的实际对象。

我猜这是因为我们正在通过新的命令窗口调用脚本。我们需要打开一个新的命令窗口，因为我们需要打开 4 个不同的 subscript.ps1（并行处理的参数不同）。

有任何想法吗？

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:42:48.407

由于您似乎已经从 PowerShell 中开始您的进程，因此请使用`Start-Process`接受`-Credential`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:29:26.713

如果您使用的是 PowerShell V3，请使用以下语法启动异步后台任务

```
$job = Start-Job -ScriptBlock {param($cred) . C:\test.ps1 $cred} -ArgumentList $cred
wait-job $job 
receive-job $job 
```

# oracle - 执行过程时出错：ORA-06530：引用未初始化的复合

> ID：13842407
> 
> 赞同：0
> 
> 时间：2012-12-12T14:57:16.820
> 
> 标签：oracle, plsql

不知道是什么导致了这个错误。I 1) 创建了一个对象为

```
 CREATE OR REPLACE  TYPE opt_val_rec AS  OBJECT (
    parametervalue     VARCHAR2(1),
    PARAMETERID          varchar2(4000)
    ); 
```

2) 已创建表类型为

```
create  OR REPLACE  type  OPTVAL_TAB as  table of OPTVAL_REC; 
```

3）写了一个程序

```
 Create or replace  procedure test_parm_val (id in varchar2 ,result out  varchar2) as
pos number:=0;
  test_paramval                                 OPTVAL_TAB:= OPTVAL_TAB (null);
paramval_ord   OPTVAL_TAB:= OPTVAL_TAB (null);

begin

for I in (select DISTINCT param_name from  param_tbl)
loop

test_paramval.extend(10);
POS :=POS+1;

test_paramval (POS).PARAMETERVALUE:= get_param_val_fnc(id,I.PARAM_NAME);
test_paramval(POS). parameterid:=I.PARAM_NAME;

End;

end test_parm_val 
```

4) 现在面临的错误是 ORA-06530: Reference to uninitialized composition

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:30:30.823

尝试

```
 Create or replace  procedure test_parm_val 
      (id in varchar2 ,result out  varchar2) as

     pos number:=1; 
     test_paramval OPTVAL_TAB:= OPTVAL_TAB ();
     paramval_ord   OPTVAL_TAB:= OPTVAL_TAB ();
     new_record opt_val_rec ;

begin

for I in (select DISTINCT param_name from  param_tbl)
loop

  --test_paramval (POS).PARAMETERVALUE:= get_param_val_fnc(id,I.PARAM_NAME);
  --test_paramval(POS). parameterid:=I.PARAM_NAME;

 ----------------------------------------------------------------
 --  commented out, it will work if "opt_val_rec" was RECORD
 --  new_record.PARAMETERVALUE:= get_param_val_fnc(id,I.PARAM_NAME);
 --  new_record.parameterid:=I.PARAM_NAME;
 ----------------------------------------------------------------
  new_record = opt_val_rec (get_param_val_fnc(id,I.PARAM_NAME),I.PARAM_NAME);
  test_paramval.extend(1);
  test_paramval(POS) := new_record;
  POS :=POS+1;  -- not sure why you had 10, I guess it's a misprint
End;

end test_parm_val 
```

**更新** 对不起，我没有意识到 opt_val_rec 是一个对象，而不是一个记录。您需要在循环中创建它的一个实例 `new_record = opt_val_rec (get_param_val_fnc(id,I.PARAM_NAME),I.PARAM_NAME);`。

# c++ - 如何检查给定路径是否指向现有文件或目录？

> ID：13842411
> 
> 赞同：1
> 
> 时间：2012-12-12T14:57:33.963
> 
> 标签：c++, file, winapi, path, directory

我需要一个函数，如果给定路径上有实体，则无论是文件还是目录，它都只返回 bool。在 winapi 或 stl 中使用什么函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:00:42.767

[`GetFileAttributes()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa364944%28v=vs.85%29.aspx)将返回有关文件系统对象的信息，可以对其进行查询以确定它是文件还是目录，如果它不存在，它将失败。

例如：

```
#include <windows.h>
#include <iostream>

int main(int argc, char* argv[])
{
    if (2 == argc)
    {
        const DWORD attributes = GetFileAttributes(argv[1]);
        if (INVALID_FILE_ATTRIBUTES != attributes)
        {
            std::cout << argv[1] << " exists.\n";
        }
        else if (ERROR_FILE_NOT_FOUND == GetLastError())
        {
            std::cerr << argv[1] << " does not exist\n";
        }
        else
        {
            std::cerr << "Failed to query "
                      << argv[1] 
                      << " : "
                      << GetLastError()
                      << "\n";
        }

    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:47:35.313

有[`PathFileExists`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb773584%28v=vs.85%29.aspx)(shlwapi)

> 确定文件系统对象（如文件或文件夹）的路径是否有效。

（对 UNC 股票的警告）

# c - c程序将函数参数中的括号解释为第二个函数

> ID：13842412
> 
> 赞同：2
> 
> 时间：2012-12-12T14:57:35.400
> 
> 标签：c, function

我正在尝试用c编写这个程序来运行程序文件中的文件但是当我编写函数时

```
system("users/user/program files (x86).....") 
```

它将`(`in解释`(x86)`为第二个函数。

我可以在括号前加上一些符号以便从字面上理解它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:03:03.470

与 bash 或其他健全的 shell 不同，windows shell 不允许`\`转义字符（如果有另一个字符，我不知道），但您可以做的一件事是将应该是一个项目的所有内容放入`"`：

```
system("\"program that has space and other weird characters\" \"arg1\" \"arg2\""); 
```

在 shell 中引用可以防止 shell 本身试图理解里面的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:02:57.270

shell 用空格分隔命令行。尝试引用它：

```
system("\"users/user/program files (x86)...\" [arguments]") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:00:49.507

我认为问题是外壳不喜欢括号。尝试这个：

```
system("users/user/program files '(x86)'.....") 
```

# android-ndk - 如何在 android (NDK) 中构建 c-ares 库

> ID：13842417
> 
> 赞同：9
> 
> 时间：2012-12-12T14:57:52.997
> 
> 标签：android-ndk, c-ares

谁能告诉我如何在 android (ndk-build) 中构建 C-ares 库

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T22:30:36.963

[以下是如何使用NDK 独立工具链](https://speakerdeck.com/deltheil/running-native-code-on-android-number-osdcfr-2012?slide=25)将其构建为 ARMv7 的静态库：

```
export NDK=/tmp/android-ndk-r8b

# Create the standalone toolchain
$NDK/build/tools/make-standalone-toolchain.sh \
--platform=android-9 \
--install-dir=/tmp/my-android-toolchain

export PATH=/tmp/my-android-toolchain/bin:$PATH
export SYSROOT=/tmp/my-android-toolchain/sysroot
export CC="arm-linux-androideabi-gcc --sysroot $SYSROOT"

# Download the latest release
curl -O http://c-ares.haxx.se/download/c-ares-1.9.1.tar.gz
tar xvfz c-ares-1.9.1.tar.gz

# Configure
cd c-ares-1.9.1 && mkdir build
./configure --prefix=$(pwd)/build \
--host=arm-linux-androideabi \
--disable-shared \
CFLAGS="-march=armv7-a"

# Build and install
make && make install 
```

而已。静态库部署在`build/lib/libcares.a`.

如果您以其他拱门为目标（例如`armeabi`，`x86`），请`configure`使用适当的`-march`值重复 并为每个拱门重新构建库。另外，请随意：

*   使目标平台适应您的需求（此处为 Android 2.3，即 API 级别 9），
*   使用`configure`适合您需要的选项（例如，您可能还想构建一个动态库，启用/禁用某些功能等）。

# validation - 我自己的约束验证器即服务

> ID：13842418
> 
> 赞同：3
> 
> 时间：2012-12-12T14:57:54.403
> 
> 标签：validation, symfony

我正在尝试构建一个作为服务运行的自定义验证器（主要用于获取实体管理器）。

我关注了文档和一些博客文章，但无法使其正常工作。我有这个错误

```
 Catchable Fatal Error: Argument 1 passed to 
D\AjaxBundle\Validator\Constraints\SelectTypeValidator::__construct() must implement 
interface Doctrine\Common\Persistence\ObjectManager, none given, called in 
/AJAX/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Validator/ConstraintValidatorFactory.php on line 67 and defined in 
/AJAX/src/D/AjaxBundle/Validator/Constraints/SelectTypeValidator.php line 14 
```

服务.yml

```
 validator.selectType:
        class: D\AjaxBundle\Validator\Constraints\SeletTypeValidator
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: validator.selectType, alias: selectType } 
```

选择类型验证器：

```
namespace D\AjaxBundle\Validator\Constraints;

use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

use Doctrine\Common\Persistence\ObjectManager;

class SelectTypeValidator extends ConstraintValidator
{
    private $om;

    public function __construct(ObjectManager $om)
    {
        $this->om = $om;
    }

    public function validate($value, Constraint $constraint)
    {
        $fieldOne = $this->om->getRepository('DAjaxBundle:City')->findOneBy(array('id' =>
                $value->getId()));

        if ($fieldOne == null) {
            $this->context->addViolation($constraint->message, array('%string%' => $value->
                    getId()));
        }
    }
} 
```

选择类型

```
namespace D\AjaxBundle\Validator\Constraints;

use Symfony\Component\Validator\Constraint;

class SelectType extends Constraint
{
    public $message ='jakis text';

    public function validateBy()
    {
        return 'selectType';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:54:46.810

服务标签名称应`validator.constraint_validator`为`validator.selectType`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:51:18.080

我不确定这是否会有所作为，但值得一试......我从不使用引号包装服务参数：

```
arguments: [@doctrine.orm.entity_manager] 
```

# design-patterns - 结合复合与策略

> ID：13842420
> 
> 赞同：3
> 
> 时间：2012-12-12T14:57:57.850
> 
> 标签：design-patterns

我正在寻找一个示例，展示如何组合这两种设计模式（策略和复合）。我知道如何使用 Strategy，但是 Composite 对我来说还不够清楚，所以我真的不知道如何组合它们。有人有例子或smthg吗？
干杯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T16:05:35.490

好的，这是一种突如其来的方法（在伪 Java 代码中）：

```
interface TradingStrategy {
    void buy();
    void sell();   
}

class HedgingLongTermStrategy implements TradingStrategy {
    void buy() { /* TODO: */ };
    void sell() { /* TODO: */ };   
}

class HighFreqIntradayStrategy implements TradingStrategy {
    void buy() { /* TODO: */ };
    void sell() { /* TODO: */ };   
}

class CompositeTradingStrategy extends ArrayList<TradingStrategy> implements TradingStrategy {
    void buy() {
       for (TradingStrategy strategy : this) {
           strategy.buy();
       }
    }
    void sell() {
       for (TradingStrategy strategy : this) {
           strategy.sell();
       }
    }
}

// sample code
TradingStrategy composite = new CompositeTradingStrategy();
composite.add(new HighFreqIntradayStrategy());  
composite.add(new HedgingLongTermStrategy());
composite.buy(); 
```

# ios - 限制 iOS 中 UIScrollview 的弹跳

> ID：13842427
> 
> 赞同：7
> 
> 时间：2012-12-12T14:58:25.323
> 
> 标签：ios, uiscrollview, bounce

我需要限制 a 中的反弹`UIScrollView`，使其在底部像往常一样反弹，但不会超过顶部的 X 像素（底部无关紧要）。

有没有办法限制弹跳大小？我认为也许像我们这样的委托中的一个方法`scrollViewWillScroll`（而不是`scrollViewDidScroll`）可以让我使用那些比 top+X 移动得更远的滚动事件，但到目前为止我一直找不到合适的滚动事件。

有什么线索吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T15:07:03.357

`scrollViewDidScroll:`是正确的方法。在那里简单地调整 contentOffset 。

此示例将顶部反弹限制为 20 像素：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if (scrollView.contentOffset.y < -20) {
        scrollView.contentOffset = CGPointMake(0, -20);
    }
} 
```

* * *

请注意，当反弹的原因是减速滑动而不是拖动时，在视图滚动回 0,0 之前会有一点不自然的延迟。但我认为没有办法阻止这种情况。基本上，scrollView 仍然会完全反弹，但不会显示它。

# unit-testing - 测试期间的 aspectj-maven-plugin

> ID：13842428
> 
> 赞同：0
> 
> 时间：2012-12-12T14:58:26.057
> 
> 标签：unit-testing, maven, aspectj

我正在与`aspectj-maven-plugin`. 我只需要它进行单元测试。

您可以在下面看到我的插件配置（父 POM 中没有定义配置，我已经检查了“有效 POM”）。

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>aspectj-maven-plugin</artifactId>
<version>1.4</version>
<executions>
    <execution>
        <id>default-compile</id>
        <phase>compile</phase>
        <goals>
            <goal>test-compile</goal>
        </goals>
    </execution>
</executions>
</plugin> 
```

但是，每当我尝试 a`mvn clean deploy`或`mvn clean test`由于跳过插件执行而出现编译错误时：

```
[INFO] --- aspectj-maven-plugin:1.4:test-compile (default-compile) @ jcz-persistence-aspectj ---
[INFO] Skipping execution because of 'skip' option 
```

欢迎提出任何建议！

斯特凡诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:18:34.327

您正在尝试进行[test-compile](http://mojo.codehaus.org/aspectj-maven-plugin/test-compile-mojo.html)。它将单独编织测试类。尝试使用 just **[compile](http://mojo.codehaus.org/aspectj-maven-plugin/compile-mojo.html)**作为目标。

> ```
>  <executions>
>             <execution>
>                 <goals>
>                     <goal>compile</goal>
>                 </goals>
>             </execution>
>         </executions> 
> ```

# c# - EncryptedKey 子句未使用所需的加密令牌“System.IdentityModel.Tokens.X509SecurityToken”包装

> ID：13842429
> 
> 赞同：0
> 
> 时间：2012-12-12T14:58:29.837
> 
> 标签：c#, wcf, x509

我刚刚向我的 WCF 服务添加了一个安全层，并且在跟踪日志中出现异常，指出 EncryptedKey 子句未使用所需的加密令牌“System.IdentityModel.Tokens.X509SecurityToken”进行包装。

我一直在寻找和寻找没有尽头，有人知道可能是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:22:38.330

事实证明，这个问题与服务本身并没有真正的关系，而是与我的 MembershipProvider 自定义实现和我的密码安全实现有关。我已经做了必要的调整，现在一切都很好。

调试 WCF 错误可能会非常棘手，因为有些消息很神秘，如果不是误导的话，我建议启用 WCF 跟踪，并在 Visual Studio 中单步执行您的服务和客户端代码。如果我在问题发生时立即这样做，而不是在 Google 上花费 12 个小时，我会在五分钟内解决问题。

在更改服务代码后更新客户端项目中的服务引用也非常重要。

故事的寓意：使用跟踪和调试。比黄金还值钱！

# c# - WPF 控件显示自动滚动到项目中心的列表片段

> ID：13842431
> 
> 赞同：0
> 
> 时间：2012-12-12T14:58:35.450
> 
> 标签：c#, wpf, xaml

在我的模型中，我有一个近乎无限的项目列表。假设项目是 -9999, ..., 0,+1,+2,+3, ...., +9999，项目之间的增量为 1。

我想显示 5 个项目的列表，以“感兴趣的项目”为中心。“感兴趣的项目”每次更改 1，无论是向上还是向下，在任何时候。当它发生变化时，我希望控件逐个像素地“滚动”动画，直到它以感兴趣的新项目为中心。用户不能滚动，所以列表总是以“感兴趣的项目”为中心

假设感兴趣的项目是 3，那么显示的列表应如下所示：

```
1
2
3
4
5 
```

现在感兴趣的项目变为 4，因此在滚动动画之后显示的列表应如下所示：

```
2
3
4
5
6 
```

我正在使用 c# 和 WPF。是否有现有的控件可以做到这一点，开源或商业？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:02:38.580

假设每个项目都位于一个控件中，您可以调用[BringIntoView](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.bringintoview.aspx)方法，这将使包含的 ScrollViewer 滚动到所需的项目。

这是一个类似的问题，使用 MVVM 模式：[mvvm how to make a list view auto scroll to a new Item in a list view](https://stackoverflow.com/questions/3317194/mvvm-how-to-make-a-list-view-auto-scroll-to-a-new-item-in-a-list-view)

# php - MySQL：如何减去更新

> ID：13842432
> 
> 赞同：1
> 
> 时间：2012-12-12T14:58:38.310
> 
> 标签：php, mysql, sql, database

我需要减去一个 mysql 更新。这是代码：

```
<?php
session_start();
//=============Configuring Server and Database=======
$host        =    'localhost';
$user        =    'root';
$password    =    '';
//=============Data Base Information=================
$database    =    'login';

$conn        =    mysql_connect($host,$user,$password) or die('Server Information is not Correct'); //Establish Connection with Server
mysql_select_db($database,$conn) or die('Database Information is not correct');

//===============End Server Configuration============

//=============Starting Registration Script==========

$username    =    mysql_real_escape_string($_POST['txtusername']);

//=============To Encrypt Password===================

//============New Variable of Password is Now with an Encrypted Value========

$insert = "UPDATE `users` SET `points` = (`points`-5) WHERE `username` = '".$username."'";
$insert = "UPDATE `users` SET `lodd` = (`lodd` +1) WHERE `username` = '".$username."'";

 mysql_query($insert); 

header('location: succes.php');
?> 
```

+1 工作完美，但对 -5 不起作用......我该怎么做才能让他们得到 -5 分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:02:12.093

工作正常，`+1`因为查询`-5`永远不会被调用，因为它被具有的查询覆盖`+1`。

你应该有这个代码，（*虽然这不是正确的*）

```
$insert = "UPDATE `users` SET `points` = (`points`-5) WHERE `username` = '".$username."'";
mysql_query($insert);

// other codes

$insert = "UPDATE `users` SET `lodd` = (`lodd` +1) WHERE `username` = '".$username."'";
mysql_query($insert); 
```

*后续问题：两列的数据类型是什么？他们是未签名的还是签名的？*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:05:36.407

您正在用第二个语句覆盖第一个语句。尝试这个：

```
$insert = "UPDATE `users` SET `points` = (`points`-5), `lodd` = (`lodd` +1) WHERE `username` = '".$username."'";
mysql_query($insert); 
```

# java - 如何解决 Oracle 中的 setString max 32766 字符？

> ID：13842434
> 
> 赞同：0
> 
> 时间：2012-12-12T14:58:40.073
> 
> 标签：java, string, oracle, spring

我使用java和spring在Oracle数据库中写入数据。代码如：

```
org.springframework.jdbc.core.support.JdbcDaoSupport.getJdbcTemplate.
update(String sql, Object[] args) ; 
```

所有参数都是字符串。有时我收到错误：

```
 java.sql.SQLException: setString can only process strings of 
less than 32766 chararacters 
```

在这种情况下我能做什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T09:57:08.207

我有一个例子，sql是：

```
CREATE TABLE t_customer (
id         LONG         NOT NULL,
first_name VARCHAR2(32) NOT NULL,
last_name  VARCHAR2(32) NOT NULL,
last_login TIMESTAMP    NOT NULL,
comments   CLOB         NOT NULL
) 
```

配置如下：

```
<bean id="nativeJdbcExtractor"
       class="org.springframework.jdbc.support.nativejdbc.CommonsDbcpNativeJdbcExtractor"/>
<bean id="lobHandler"
      class="org.springframework.jdbc.support.lob.OracleLobHandler">
    <property name="nativeJdbcExtractor" ref="nativeJdbcExtractor"/>
</bean> 
```

编码：

```
private void runInTemplate() {
    this.jdbcTemplate.update(
            "insert into t_customer " +
                    "(id, first_name, last_name, last_login, comments) " +
                    "values (?, ?, ?, ?, ?)",
            new PreparedStatementSetter() {
                public void setValues(PreparedStatement ps)
                        throws SQLException {
                    ps.setLong(1, 2L);
                    ps.setString(2, "Jan");
                    ps.setString(3, "Machacek");
                    ps.setTimestamp(4,
                            new Timestamp(System.currentTimeMillis()));
                    lobHandler.getLobCreator().setClobAsString(ps, 5,
                            "This is a loooong String!");
                }
            });
} 
```

# silverlight - Silverlight 数据网格运行时添加和绑定

> ID：13842439
> 
> 赞同：0
> 
> 时间：2012-12-12T14:58:57.600
> 
> 标签：silverlight, binding

我需要在运行时将列添加到 silverlight 列，并执行列的绑定。

这就是我在 xaml 中静态执行的方式

```
<sdk:DataGridTextColumn  CanUserReorder="True" CanUserResize="True" CanUserSort="True"  Header="CriteriaName" Width="2*" Binding="{Binding Path=[CriteriaName]}" IsReadOnly="True"  /> 
```

现在我想在后面的代码中做同样的事情，

这是我所做的

```
 foreach(string Col in lColumnNames)
            {
                DataGridTextColumn DGCol=new DataGridTextColumn();
                DGCol.Header= Col;

                Binding lObjBinding = new Binding(Col);
                lObjBinding.Mode = BindingMode.OneWay;

                DGCol.Binding = lObjBinding;
                GrdQuickFindResult.Columns.Add(DGCol);

            } 
```

这不起作用。我只能看到 DataGrid 中的空白行，就好像绑定没有发生一样。请检查并告诉我我使用 xaml 所做的所有事情是否也使用 C# 完成，或者是否有一些属性需要在我创建的绑定对象中设置。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:22:09.113

像这样的绑定：

```
"{Binding Path=MyProperty}" 
```

只是一种冗长的写作方式：

```
"{Binding MyProperty}" 
```

以同样的方式

```
Binding b = new Binding(); 
```

是相同的

```
Binding b = new Binding("MyProperty"); 
```

并且意味着您将 TextBoxColumn 的文本绑定到数据对象中属性“MyProperty”的值，该数据对象将设置为 DataGrid 中一行的 DataContext。为此，我们假设您的数据对象类似于：

```
public class DataObject{
    public object MyProperty {get; set;}
} 
```

如果您的数据对象是这样的，那么您在代码中的绑定很好，它们应该可以工作。

当您指定如下绑定时：

```
"{Binding Path=[MyProperty]}" 
```

或者

```
"{Binding [MyProperty]}" 
```

您正在绑定数据对象的[索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)（如果它实现一个）并访问与索引“MyProperty”对应的值。如果您这样做，我假设您的数据对象是 IDictionary 或实现索引器的类，例如：

```
public class DataObject{
    public object this[object index]
    {
        get{ /*return something*/ }
        set { /*set something*/ }
    }
} 
```

只是一个建议：对您的局部变量使用[驼峰式大小写](http://msdn.microsoft.com/en-us/library/xzf533w0%28v=vs.71%29.aspx)，对于查看您的代码的其他人来说看起来很奇怪，似乎它们是实例属性或静态字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:31:56.857

```
 foreach(string Col in lColumnNames)
            {
                DataGridTextColumn DGCol=new DataGridTextColumn();
                DGCol.Header= Col;

                Binding lObjBinding = new Binding();
                lObjBinding.Mode = BindingMode.OneWay;

                //=====This is what was missing======================//
                lObjBinding.Path = new PropertyPath("["+Col+"]");
                //==================================================//

                DGCol.Binding = lObjBinding;
                GrdQuickFindResult.Columns.Add(DGCol);

            } 
```

# appharbor - appharbor sqlserver 设置帮助 - 创建数据库在数据库主服务器中获得权限被拒绝

> ID：13842443
> 
> 赞同：1
> 
> 时间：2012-12-12T14:59:01.203
> 
> 标签：appharbor

我正在尝试在 Harbor 上设置我的 sql server 数据库。我将 Shared Microsoft SQL Server 添加为服务。我使用 ms sql server management studio 连接到数据库。

每当我尝试在本地创建数据库时，我都会在数据库主服务器中获得权限。

我试图在您的 Appharbor 网站和 stackoverflow 上搜索答案，但我被卡住了。
你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:48:19.430

除了您开始使用的数据库之外，您无法创建新的数据库。如果您已删除该插件，请删除并重新添加该插件。

# android - android以编程方式设置按钮背景

> ID：13842447
> 
> 赞同：55
> 
> 时间：2012-12-12T14:59:21.367
> 
> 标签：android, button

我想知道如何以编程方式设置按钮颜色？我编写了以下代码但失败了：

```
Button11.setBackgroundColor(R.color.red); 
```

谢谢！！

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-12-12T15:02:21.737

`R.color.red`是一个 ID（也是一个`int`），但不是颜色。

请改用以下方法之一：

```
// If you're in an activity:
Button11.setBackgroundColor(getResources().getColor(R.color.red));
// OR, if you're not: 
Button11.setBackgroundColor(Button11.getContext().getResources().getColor(R.color.red)); 
```

或者，或者：

```
Button11.setBackgroundColor(Color.RED); // From android.graphics.Color 
```

或者，对于更多专业技能：

```
Button11.setBackgroundColor(0xFFFF0000); // 0xAARRGGBB 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-12-14T06:17:01.947

老线程，但学到了一些新东西，希望这可能对某人有所帮助。

如果您想更改背景颜色但保留其他样式，那么下面可能会有所帮助。

```
button.getBackground().setColorFilter(ContextCompat.getColor(this, R.color.colorAccent), PorterDuff.Mode.MULTIPLY); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-05-23T23:46:15.260

您在**2020 年及以后**寻找的答案：

*   `setColorFilter(color, mode)`自 API 29 起已**弃用**（[如这里讨论的](https://stackoverflow.com/q/56716093/12787264)）
*   `button.setBackgroundColor(color)`与按钮样式混淆

现在设置按钮颜色的正确方法是使用`BlendModeColorFilter()`（[参见文档](https://developer.android.com/reference/android/graphics/BlendModeColorFilter)）。

**用法：**

```
btn.background.colorFilter = BlendModeColorFilter(color, BlendMode.MULTIPLY) 
```

**如果您也使用较旧的 API：**

```
fun setButtonColor(btn: Button, color: Int) {
    if (Build.VERSION.SDK_INT >= 29)
        btn.background.colorFilter = BlendModeColorFilter(color, BlendMode.MULTIPLY)
    else
        btn.background.setColorFilter(color, PorterDuff.Mode.MULTIPLY)
} 
```

* * *

*请**投票以帮助其他人找到这个答案**- 我花了很长时间才弄清楚这一点^^*

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-10-26T05:33:51.250

您可以以编程方式将所需的颜色设置为按钮，例如：

```
Button11.setBackgroundColor(Android.Graphics.Color.parseColor("#738b28")); 
```

您还可以为按钮指定文本颜色，例如：

```
Button11.setTextColor(Android.Graphics.Color.parseColor("#FFFFFF")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-12T18:22:45.920

在设置背景颜色时不改变按钮的大小：

```
button.getBackground().setColorFilter(button.getContext().getResources().getColor(R.color.colorAccent), PorterDuff.Mode.MULTIPLY); 
```

这并没有改变按钮的大小，并且也适用于旧的 android 版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-18T11:38:10.707

进一步来自@finnmglas，截至 2021 年的 Java 答案是：

```
 if (Build.VERSION.SDK_INT >= 29)
        btn.getBackground().setColorFilter(new BlendModeColorFilter(color, BlendMode.MULTIPLY));
    else
        btn.getBackground().setColorFilter(color, PorterDuff.Mode.MULTIPLY); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-10T04:06:55.363

我发现 Android Studio`getColor()`在尝试执行此操作时给了我一个已弃用的警告：

```
Button11.setBackgroundColor(getResources().getColor(R.color.red)) 
```

所以我发现执行以下方法是简单、最新的解决方案：

```
Button11.setBackgroundColor(ContextCompat.getColor(context, R.color.red)) 
```

您希望避免在颜色参数中进行硬编码，因为它被认为是错误的代码样式。

编辑：使用`setBackgroundColor()`我自己的按钮后，我看到内部按钮填充扩展了。我找不到任何方法将其改回将高度和宽度都设置为“wrap_content”。也许它是一个错误。

来源： [https ://stackoverflow.com/a/32202256/6030520](https://stackoverflow.com/a/32202256/6030520)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-31T12:06:23.463

使用**setBackgroundColor()**会影响样式。因此，声明一个与前一个按钮具有相同属性的新样式，但颜色不同。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<solid android:color="@color/green"/>
<corners android:radius="10dp"/>
</shape> 
```

现在，使用 OnClick 方法。

```
location.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            location.setBackgroundResource(R.drawable.green);

        }
    }); 
```

这会更改按钮，但看起来类似于更改背景。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-12T15:05:22.667

```
button.setBackgroundColor(getResources().getColor(R.color.red); 
```

设置此视图的背景颜色。参数：color 背景颜色

`R.color.red`是在 gen 中编译时生成的参考。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-08T04:46:58.237

您可以将以下代码用于按钮颜色，而不会影响样式（如果使用）

```
 yourbtnid.background.setColorFilter(ContextCompat.getColor(context, yourcolor), PorterDuff.Mode.SRC) 
```

# android - 登录 API 服务器失败

> ID：13842451
> 
> 赞同：1
> 
> 时间：2012-12-12T14:59:32.720
> 
> 标签：android, api, http, httpclient

我在使用我的代码登录 API 服务器时遇到问题，在 API 文档中我应该使用用户名、密码和密钥登录以使用 API。

url 登录是 : `http://xxx.xxx.xxx.xxx/api/Session/login?context=api&skey=2354e5rufygbiuk7bikuyhboulygh&USR=zzzz&PWD=xxx`。

当我使用 httpURLConnection 执行上面的 url 时，服务器给出“OK”响应，这意味着登录成功。

但是当我尝试检查我是否登录或没有使用 :`http://xxx.xxx.xxx.xxx/api/Session/isLogin?context=api`时，服务器给出“FALSE”响应，这意味着我还没有登录，所以我不能使用 API。

它只是在我尝试使用我的 android 应用程序连接时发生，但是当我尝试通过网络浏览器登录时，登录成功并且当我检查它时成功。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:03:40.263

尝试通过 getHeaderField 从第一个请求中获取会话信息，并通过正则表达式获取会话信息。

```
 String session_value=getHeaderField("Set-Cookie"); 
```

并将会话信息用于下一个请求。

```
 URL url = new URL(link);
    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
    //fetch session
    session_value = urlConnection.getHeaderField("Set-Cookie");
    String[] sessionId = session_value.split(";");
    //set session to do more operation
    urlConnection.setRequestProperty("Cookie", sessionId[0]) 
```

希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:47:42.340

我认为 TimonWang 给出了很好的回应，可能会对你有所帮助。

* * *

*如果您自己管理服务器，我会建议另一种解决方案。在其他情况下，请忽略此帖子。*

如果我是你，我会让 API 更加 RESTful，这意味着你不会使用会话来保存你的状态。在这种情况下，登录应该返回类似于身份验证令牌（对于每个登录/用户来说都是唯一的），它必须保存在某个地方。登录成功后，身份验证令牌可用于以后的请求。因此，身份验证令牌应在整个会话期间保存在设备上，并应添加到您在该会话期间发送到服务器的每个请求中。由于身份验证令牌的唯一性，服务器可以看到它是哪个用户。

所以：

```
Login: returns auth_token
Every request: http://example.org/api?key=value&auth_token={auth_token} 
```

# android - 访问 strings.xml 的 WebViewCoreThread 异常

> ID：13842452
> 
> 赞同：0
> 
> 时间：2012-12-12T14:59:36.383
> 
> 标签：android, nullpointerexception, android-webview

我无法访问 strings.xml：

```
Log.i("url",context.getString(R.string.url)); 
```

在字符串.xml 中

```
<string name="url">http://myip.com/</string> 
```

它会产生一个异常：

```
12-12 14:52:44.551: E/AndroidRuntime(3534): FATAL EXCEPTION: WebViewCoreThread
12-12 14:52:44.551: E/AndroidRuntime(3534): java.lang.NullPointerException
12-12 14:52:44.551: E/AndroidRuntime(3534):     at com.usualbike.cbike.NewIncidence.noRegInsertData(NewIncidence.java:70)
12-12 14:52:44.551: E/AndroidRuntime(3534):     at com.usualbike.cbike.IncidenceData$MyJavaScriptInterface.enviarIncidencia(IncidenceData.java:163)
12-12 14:52:44.551: E/AndroidRuntime(3534):     at android.webkit.WebViewCore.nativeTouchUp(Native Method)
12-12 14:52:44.551: E/AndroidRuntime(3534):     at android.webkit.WebViewCore.nativeTouchUp(Native Method)
12-12 14:52:44.551: E/AndroidRuntime(3534):     at android.webkit.WebViewCore.access$3300(WebViewCore.java:52)
12-12 14:52:44.551: E/AndroidRuntime(3534):     at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:1150)
12-12 14:52:44.551: E/AndroidRuntime(3534):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 14:52:44.551: E/AndroidRuntime(3534):     at android.os.Looper.loop(Looper.java:123)
12-12 14:52:44.551: E/AndroidRuntime(3534):     at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:621)
12-12 14:52:44.551: E/AndroidRuntime(3534):     at java.lang.Thread.run(Thread.java:1096) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:53:02.607

尝试从中获取字符串`Strings.xml`

```
String strurl=context.getresources().getString(R.string.url);
Log.i("url ",strurl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:05:24.593

`context`显然`null`，如果你`NullPointerException`在那条线上得到一个。

# php - mongoDB适合blogger这样的博客平台吗？

> ID：13842453
> 
> 赞同：3
> 
> 时间：2012-12-12T14:59:35.793
> 
> 标签：php, mongodb, laravel

我打算尝试开发一个像博客（blogspot）这样的网络应用程序。我会有用户，每个用户都会有一个博客，用户可以在他的博客上发帖，帖子会有标签。其他用户应该能够通过标签或文本进行搜索。博客将具有设置和主题。

使用 mongodb 好还是建议我使用另一个数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T15:36:30.513

我个人是出于爱好开发类似的软件，选择了MongoDB作为主数据库，所以就结合这段经历来说说。

决定我使用 MongoDB 的几个原因：

*   良好的可扩展性
*   通过 GridFS 有效地将二进制文件保存在数据库中的可能性
*   通过使用嵌入式文档进行灵活的模式设计（例如，用于对帖子的评论）
*   在数组中查找对标签类功能有用的值的简单方法
*   易于操作程序端的 bson 格式

您可能要好好考虑的是架构设计，因为从长远来看，一些错误的选择会影响性能。特别是关于嵌入式文档或参考的使用。
树也可以在某种程度上难以实现，但没有什么很复杂。

一些您可能会发现有价值的资源：

*   [架构设计](http://www.mongodb.org/display/DOCS/Schema+Design)
*   [全文搜索](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)
*   [树木](http://www.mongodb.org/display/DOCS/Trees+in+MongoDB)
*   [应用程序开发](http://docs.mongodb.org/manual/applications/)
*   [网格文件系统](http://docs.mongodb.org/manual/applications/gridfs/)

如果你想很好地介绍 MongoDB，我真的推荐阅读 Kyle Banker 的“MongoDB In Action”。

更新：

正如 Akshat Jiwan Sharma 所指出的，[Little MongoDB Book](http://openmymind.net/2011/3/28/The-Little-MongoDB-Book/)是一个非常好的免费资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:37:28.940

虽然博客系统对 mongoDb 很有用，但我在评估它的可用性时遇到了一些问题。

1）主机提供商：- MongoDb 只有两个著名的托管服务提供商（mongoLab 和 mongoHq），他们都收取高额费用。对于像 Godady mongoDb 这样的共享托管平台，mongoDb 不起作用。所以你有两个选择

a) 使用两个提供商之一。

b) 使用非常昂贵的 VPS（或像亚马逊这样的云托管系统，第一年免费）。

2）您还需要为您的应用程序找出一个服务器，这将增加托管成本。

所以对于博客应用程序，我不推荐 mongoDb，除非你有钱花在托管上。

作为替代检查 couchDb，它提供了两个主要优点。

1）由鸢尾花沙发免费提供廉价托管。

2)Couch 应用程序，它基本上去掉了中间应用程序层，允许您从数据库本身托管您的应用程序。

您可以使用许多可用的 lucene 和 solr 插件轻松集成沙发数据库的全文搜索。我个人倾向于弹性搜索，因为它看起来很容易实现。

学习沙发数据库并不难，而且构建沙发应用程序非常容易，我认为这些应用程序非常适合写博客。

希望这可以帮助。

# javascript - JQuery UI Sortable - 将 html 可排序元素的拖动区域限制为特定的子元素

> ID：13842456
> 
> 赞同：5
> 
> 时间：2012-12-12T15:00:08.927
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-sortable

这是我在其上应用了 JQuery UI 可排序交互的简化 div 结构（请参阅[此 JS Fiddle 示例](http://jsfiddle.net/ngKMC/10/)）：

```
<div id="sortable_panels">
    <div class="panel" id="panel1">
        <div class="header" id="panel1_header">Panel 1 header</div>
        <div id="panel1_content"></div>                    
    </div>    
    <div class="panel" id="panel2">
        <div class="header" id="panel2_header">Panel 2 header</div>
        <div id="panel2_content"></div>                    
    </div>    
    <div class="panel" id="panel3">
        <div class="header" id="panel3_header">Panel 3 header</div>
        <div id="panel3_content"></div>                    
    </div>    
    <div class="clear"></div>
</div>​ 
```

我希望只有在拖动面板标题时才能拖动面板。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T12:41:53.143

您可以在可排序交互中使用此选项

```
handle:'.header' 
```

# objective-c - NSDocument - 如何防止文档被标记为自动更新？

> ID：13842458
> 
> 赞同：2
> 
> 时间：2012-12-12T15:00:11.077
> 
> 标签：objective-c, macos, cocoa, webview, nsdocument

我有一个允许用户输入查询的可可应用程序。我正在使用`NSWebView`带有`TextArea`HTML 对象的 。问题是，只要我在 textarea 中输入任何内容，我的文档就会被标记为已更新。有谁知道防止这种情况的方法？

我已经验证使用 a`NSTextField`不会重现这种行为，但我特别想使用`HTML/TextArea`for 样式。

所以基本上：我可以让它`NSDocument`不被标记为已编辑，除非我手动调用：

```
[document updateChangeCount: NSChangeDone]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:13:24.567

Apple 邮件列表上的这篇[文章](http://lists.apple.com/archives/webkitsdk-dev/2006/Nov/msg00013.html)似乎完全符合您的问题。

建议的解决方案是为 webview 设置一个自定义撤消管理器（听起来很辛苦），但是在我看来，快速而肮脏的 hack 就像子类`updateChangeCount`化和歪曲你的思维方式。

# php - php 常量可以被引用但defined() 返回 false

> ID：13842459
> 
> 赞同：5
> 
> 时间：2012-12-12T15:00:11.750
> 
> 标签：php, constants

有没有人遇到过这个？

```
var_dump(CRYPT_SHA256 == 1); // returns bool(true)
var_dump(defined(CRYPT_SHA256)); // returns bool(false) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T15:03:20.097

```
defined('CRYPT_SHA256') 
```

否则，您是在询问常量的*值*是否也是`CRYPT_SHA256`另一个常量的名称......

```
defined(CRYPT_SHA256) === defined('1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:05:35.960

第一条语句也为我返回 false。

我稍微改了一下，见下图

```
define('CRYPT_SHA256',1);
  //var_dump(CRYPT_SHA256 == 1); // returns bool(true)
  var_dump('CRYPT_SHA256');
var_dump(defined('CRYPT_SHA256')); // returns bool(false) 
```

# javascript - 画布上下文的 clearRect 不清除像素

> ID：13842467
> 
> 赞同：1
> 
> 时间：2012-12-12T15:00:22.017
> 
> 标签：javascript, html, canvas

我想用javascript和html画布制作动画，只是让一个矩形从窗口顶部移动到底部，我使用canvas.clearRect清除画布上的所有像素，但是，这个函数似乎没有工作，之前的图纸还在。这是所有的代码

```
<!DOCTYPE HTML>
<html>
    <title>Jave script tetris by zdd</title>
    <head>
        <script>
            function point(x, y)
            {
                this.x = x;
                this.y = y;
            }

            function draw(timeDelta)
            {
                // Vertices to draw a square
                var v1 = new point(  0,   0);
                var v2 = new point(100,   0);
                var v3 = new point(100, 100);
                var v4 = new point(  0, 100);
                this.vertices = [v1, v2, v3, v4];

                // Get canvas context
                var c = document.getElementById("canvas");
                var cxt = c.getContext("2d");

                // Clear the canvas, this does not work?
                cxt.clearRect(0, 0, 800, 600);

                // Move the piece based on time elapsed, just simply increase the y-coordinate here
                for (var i = 0; i < this.vertices.length; ++i)
                {
                    this.vertices[i].y += timeDelta;
                }

                cxt.moveTo(this.vertices[0].x, this.vertices[0].y);
                for (var i = 1; i < this.vertices.length; ++i)
                {
                    cxt.lineTo(this.vertices[i].x, this.vertices[i].y);
                }
                cxt.lineTo(this.vertices[0].x, this.vertices[0].y);
                cxt.stroke();
            }

            var lastTime = Date.now();
            function mainLoop()
            {
                window.requestAnimationFrame = window.requestAnimationFrame || 
                                               window.mozRequestAnimationFrame ||
                                               window.webkitRequestAnimationFrame || 
                                               window.msRequestAnimationFrame;
                window.requestAnimationFrame(mainLoop);

                var currentTime = Date.now();
                var timeDelta = (currentTime - lastTime);
                draw(timeDelta);
                lastTime = currentTime;
            }

        </script>
    </head>
    <body>
        <canvas id="canvas" width="800" height="600">
        </canvas>
        <script>
        </script>
        <button type="button" style="position:absolute; left:500px; top:600px; width:100px; height:50px;" class="start" onclick="mainLoop()">start</button>
    </body>
</html> 
```

这是 Chrome 中的结果图片，我只想要一个矩形，但是 clearRect 函数没有清除旧的矩形，所以......，如何解决这个问题？ ![在此处输入图像描述](../Images/1594e6d64ab6d160d0887ccb47712850.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:21:09.337

你失踪了`beginPath`。没有它，每个盒子实际上都是最后一个盒子的一部分。

```
 cxt.beginPath();
    cxt.moveTo(this.vertices[0].x, this.vertices[0].y);

    for (var i = 1; i < this.vertices.length; ++i) {
        cxt.lineTo(this.vertices[i].x, this.vertices[i].y);
    } 
```

添加之后，盒子似乎在晃动，不确定这是否是您的意图。

这是一个小提琴：http: [//jsfiddle.net/6xbQN/](http://jsfiddle.net/6xbQN/)

祝你好运！

# c++ - C/C++ 宏中的逗号

> ID：13842468
> 
> 赞同：119
> 
> 时间：2012-12-12T15:00:22.780
> 
> 标签：c++, c, macros, c-preprocessor

假设我们有一个这样的宏

```
#define FOO(type,name) type name 
```

我们可以像这样使用

```
FOO(int, int_var); 
```

但并不总是那么简单：

```
FOO(std::map<int, int>, map_var); // error: macro "FOO" passed 3 arguments, but takes just 2 
```

我们当然可以这样做：

```
 typedef std::map<int, int> map_int_int_t;
 FOO(map_int_int_t, map_var); // OK 
```

这不是很符合人体工程学。必须处理 Plus 类型的不兼容性。知道如何用宏解决这个问题吗？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-11-07T16:36:17.343

如果您不能使用括号并且您不喜欢 Mike 的 SINGLE_ARG 解决方案，只需定义一个逗号：

```
#define COMMA ,

FOO(std::map<int COMMA int>, map_var); 
```

如果您想对一些宏参数进行字符串化，这也很有帮助，如

```
#include <cstdio>
#include <map>
#include <typeinfo>

#define STRV(...) #__VA_ARGS__
#define COMMA ,
#define FOO(type, bar) bar(STRV(type) \
    " has typeid name \"%s\"", typeid(type).name())

int main()
{
    FOO(std::map<int COMMA int>, std::printf);
} 
```

打印`std::map<int , int> has typeid name "St3mapIiiSt4lessIiESaISt4pairIKiiEEE"`。

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2012-12-12T15:16:09.817

因为尖括号也可以表示（或出现在）比较运算符`<`、和`>`，所以宏扩展不能像在括号中那样忽略尖括号内的逗号。（这也是方括号和大括号的问题，即使它们通常作为平衡对出现。）您可以将宏参数括在括号中：`<=``>=`

```
FOO((std::map<int, int>), map_var); 
```

问题是该参数在宏扩展内保持括号括起来，这会阻止它在大多数情况下被读取为类型。

解决此问题的一个好技巧是，在 C++ 中，您可以使用函数类型从带括号的类型名称中提取类型名称：

```
template<typename T> struct argument_type;
template<typename T, typename U> struct argument_type<T(U)> { typedef U type; };
#define FOO(t,name) argument_type<void(t)>::type name
FOO((std::map<int, int>), map_var); 
```

因为形成函数类型会忽略额外的括号，所以您可以在类型名称不包含逗号的情况下使用带或不带括号的宏：

```
FOO((int), int_var);
FOO(int, int_var2); 
```

当然，在 C 中，这不是必需的，因为类型名称不能包含括号外的逗号。因此，对于跨语言宏，您可以编写：

```
#ifdef __cplusplus__
template<typename T> struct argument_type;
template<typename T, typename U> struct argument_type<T(U)> { typedef U type; };
#define FOO(t,name) argument_type<void(t)>::type name
#else
#define FOO(t,name) t name
#endif 
```

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2012-12-12T15:08:00.453

如果您的预处理器支持可变参数宏：

```
#define SINGLE_ARG(...) __VA_ARGS__
#define FOO(type,name) type name

FOO(SINGLE_ARG(std::map<int, int>), map_var); 
```

否则，它有点乏味：

```
#define SINGLE_ARG2(A,B) A,B
#define SINGLE_ARG3(A,B,C) A,B,C
// as many as you'll need

FOO(SINGLE_ARG2(std::map<int, int>), map_var); 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2016-03-14T23:06:52.497

只需定义`FOO`为

```
#define UNPACK( ... ) __VA_ARGS__

#define FOO( type, name ) UNPACK type name 
```

然后总是在类型参数周围加上括号来调用它，例如

```
FOO( (std::map<int, int>), map_var ); 
```

在宏定义的注释中举例说明调用当然是个好主意。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-12T15:25:30.960

[P99](http://p99.gforge.inria.fr/)可以做到这一点：

```
#include "p99/p99.h"
#define FOO(...) P99_ALLBUTLAST(__VA_ARGS__) P99_LAST(__VA_ARGS__)
FOO() 
```

上面的代码有效地只去除了参数列表中的最后一个逗号。检查`clang -E`（P99 需要 C99 编译器）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-12T15:08:18.043

至少有两种方法可以做到这一点。首先，您可以定义一个带有多个参数的宏：

```
#define FOO2(type1, type2, name) type1, type2, name 
```

如果你这样做，你可能会发现你最终定义了更多的宏来处理更多的参数。

其次，您可以在参数周围加上括号：

```
#define FOO(type, name) type name
F00((std::map<int, int>) map_var; 
```

如果这样做，您可能会发现多余的括号会破坏结果的语法。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-12-12T15:11:33.110

简单的答案是你不能。`<...>`这是模板参数选择的副作用；`<`and也出现在不平衡的`>`上下文中，因此无法扩展宏机制来处理它们，就像处理括号一样。（一些委员会成员曾主张使用不同的标记，例如`(^...^)`，但他们无法说服使用 的大多数问题`<...>`。）

# php - PHP JQuery 五星级评分系统错误

> ID：13842471
> 
> 赞同：-2
> 
> 时间：2012-12-12T15:00:34.263
> 
> 标签：php, jquery, html

查看每个进程中的错误框。

**saveRating.php php 代码**

```
<?php
    $result = array();
    $result["status"] = "";
    $result["message"] = "";

    if(isset($_POST["itemID"]) && isset($_POST["itemValue"])){
        $result["status"] = "OK";
        $result["message"] = "Rating has been saved successfully.";
    } else {
        $result["status"] = "ERROR";
        $result["message"] = "Provide itemID and itemValue!";
    } 

    echo json_encode($result);
?> 
```

**html代码**

```
<body>
    <h1>Creating Five Stars Rating System</h1>
    <div class="fieldRow">
        <label>Book 123A</label>
        <ul id="book-123a" class="ratingStars">
            <li></li>
            <li class="active"></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
    <div class="fieldRow">
        <label>Book 123B</label>
        <ul id="book-123b" class="ratingStars">
            <li class="active"></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
    <div class="fieldRow">
        <label>Book 123C</label>
        <ul id="book-123c" class="ratingStars">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li class="active"></li>
        </ul>
    </div>

    <div id="placeHolder"></div>
</body> 
```

**jQuery代码**

```
<script>
$(document).ready(function(){
    $('ul.ratingStars li.active').prevAll().addClass('active');

    $('ul.ratingStars li').each(function(){
        var $item = $(this);
        var $itemContainer = $item.parents('ul.ratingStars');
        var containerID = $itemContainer.attr('id');
        var $itemsAll = $itemContainer.find('li');

        $item.mouseover(function(){
            $itemsAll.addClass('default');
            $item.prevAll().addClass('highlighted');
        }).mouseout(function(){
            $itemsAll.removeClass('default').removeClass('highlighted');
        }).bind('click', function(){
            var itemIndex = $itemsAll.index(this);

            $.post('ajax/saveRating.php',{
                'itemID': containerID,
                'itemValue': itemIndex
            }, function(data) {
                if(data && data.status == "100"){
                    $item.addClass('active').removeClass('highlighted');
                    $item.nextAll().removeClass('active');
                    $item.prevAll().addClass('active');
                } else {
                    alert('Error!');
                } 
            }, "json");
        });
    });
});
</script> 
```

**CSS代码**

```
<style>
    label, ul {
        float:left;
    }
    .fieldRow {
        clear:both; margin:5px 0px; overflow:hidden;
    }
    ul.ratingStars {
        list-style:none; margin:0px 0px; 
        overflow:hidden;
    }
    ul.ratingStars li {
        float:left; width:16px; height:16px; 
        background:url('icons/star.gif') no-repeat left top; 
        cursor:pointer;
    }
    ul.ratingStars li.active {
        background-position: 0px -32px;
    }
    ul.ratingStars li.default {
        background-position: 0px 0px;
    }
    ul.ratingStars li.highlighted, ul.ratingStars li:hover {
        background-position: 0px -16px;
    }
</style> 
```

**星星img文件**

> [http://www.packtpub.com/sites/default/files/Article-Images/3081_02_06.png](http://www.packtpub.com/sites/default/files/Article-Images/3081_02_06.png)

总是`alert('Error!');`请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:04:50.250

在`jquery code`你检查

```
if(data && data.status == "100") { 
```

但在你的`saveRating.php php code`你设置`status`为

```
$result["status"] = "OK"; 
```

或者

```
$result["status"] = "ERROR"; 
```

因此您的 javascript 检查是`false`.

# iphone - iphone 5 的媒体查询

> ID：13842476
> 
> 赞同：1
> 
> 时间：2012-12-12T15:01:02.657
> 
> 标签：iphone, css, media-queries

我试图用我的媒体查询来定位 iphone 5，但横向背景没有出现。由于我没有任何用于视网膜显示器的特殊图形，我想知道我是否可以对所有媒体查询使用相同的图形。如何定位 iPhone 5 横向？

```
 @media only screen and (max-width: 480px)
and (orientation : landscape)
{

  #homepage{ 
     background: url('images/480x320_Horizontal.jpg') no-repeat fixed #00314d;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:06:50.587

使用元标记强制 iPhone 将视口呈现为设备宽度。

```
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0"> 
```

现在使用媒体查询来设置横向模式的样式，对于> 320px的iphone；

```
@media screen and (min-width: 321px){
    /*Style goes here*/
} 
```

# git - .sh 文件的 Git bash 选项卡完成

> ID：13842481
> 
> 赞同：14
> 
> 时间：2012-12-12T15:01:08.633
> 
> 标签：git, msysgit, msys

我在 Windows 7 上使用 msysgit，我发现 bash 脚本非常有用。我写了一些 .sh 脚本，但我希望 git bash 自动完成他们的名字。现在我可以看到，在初始提示之后 git bash 仅自动完成 .exe、.bat 和 .com 文件。如何允许自动完成 .sh 文件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-15T18:30:30.633

我发现以 #!/bin/sh 作为第一行的文件是自动完成的。这对我来说已经足够了。

# sharepoint-2013 - 是否可以从 SharePoint 2013 应用程序中调用远程服务器？

> ID：13842486
> 
> 赞同：0
> 
> 时间：2012-12-12T15:01:12.050
> 
> 标签：sharepoint-2013

我对 SharePoint 开发以及整体 SharePoint 都很陌生，所以如果这个问题看起来很简单，我深表歉意。我目前正在开发一个 SharePoint 2013 应用程序，我想知道是否可以从 SharePoint 环境中调用某个 URL。基本上，我想在对列表执行某些操作后在事件接收器中执行此操作，然后我想从那里调用服务器上的某些 Web 服务以更新我的系统。对于这种情况，使用 REST API 轮询 SharePoint 服务器不是一个好的选择，因为它不能很好地扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:51:55.797

在处理 SharePoint 2013 应用程序时，您可以使用标准化 API 访问任何资源。除了 REST，SharePoint 还提供 JS 客户端对象模型 (CSOM)。

为了从当前 Web 以外的其他 Web 访问数据，您的应用需要与整个租户交互的权限。

如果您尝试从另一台主机查询数据，则必须使用 JSONP，因为其来源策略相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:33:04.463

如果您正在使用“新应用程序模型”构建应用程序来连接远程事件接收器，则可以做任何事情，您的应用程序托管框架/环境允许您这样做。如果您正在构建经典应用程序（农场解决方案），您将有权执行直接从 SharePoint 服务器允许的操作...通常这是很多因为 GAC 部署的程序集被授予完全信任。

取决于您要做什么以及您的应用程序将消耗什么样的资源。我会考虑将依赖项从 SharePoint 中移开，并使用新的应用程序模型而不是旧的场解决方案进行构建。听起来您好像是从 SharePoint 开始的，这使您有机会学习为 SharePoint 进行开发的新方法。

最后，您可能会考虑构建一个工作流。不确定您正在构建什么样的应用程序，但新的工作流功能包括可以进行 RESTful 调用的操作。可能使您的应用程序成为“无代码”解决方案。同样，这一切都取决于。

# android - 我们可以在android中的应用程序文件目录中放置的最大文件大小是多少？

> ID：13842491
> 
> 赞同：0
> 
> 时间：2012-12-12T15:01:42.530
> 
> 标签：android, file

动态地，我将文件放在应用程序文件目录中。如果我放置冗长的文件，那么它就会崩溃。我们可以在 android 中的应用程序文件目录中放置的最大文件大小是多少？

# django - 使用 django 和 tornado 有什么好处吗

> ID：13842494
> 
> 赞同：1
> 
> 时间：2012-12-12T15:01:53.967
> 
> 标签：django, tornado

只是好奇阅读[本文](https://github.com/bdarnell/django-tornado-demo/blob/master/testsite/tornado_main.py)后，它使用龙卷风包装了 django。在 django 上使用 tornado 有什么优点或缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:41:41.017

最大的优势是如果你有一个现有的 django 代码库，你想通过一些异步操作来增强它。Tornado 是一个精益框架，其中包含 DB 模型、Django 级别模板、中间件等。不存在。

也就是说，如果您从头开始一个项目，混合 Tornado + BackboneJS 将产生一个更有趣的应用程序。

# regex - 正则表达式，如果它在引号中，则忽略模式

> ID：13842496
> 
> 赞同：8
> 
> 时间：2012-12-12T15:01:55.850
> 
> 标签：regex, parsing, scripting

作为学校项目的一部分编写一个非常简单的脚本解析器，虽然这不是必需的，但我很好奇它是否可以只用正则表达式来完成。

语法类似于 ASP，其中脚本以 <% 开头并以 %> 结尾。

它只支持一个命令“pr”，与 echo 或 Response.Write 相同。

现在我正在使用这个正则表达式来查找脚本块：

```
(<%\s*([\s\S]*?)\s*%>) 
```

但是如果我有这样的命令：

```
<% pr "%>"; %> 
```

...它显然只匹配：

```
<% pr "%> 
```

有没有办法使用纯正则表达式来忽略引号内的结束标签？我的主要担心是它可能匹配引号之间的标签，但实际上在引号之外，如果这有意义的话。例如...

```
<% pr "hello world"; %> " 
```

从技术上讲，结束标签被引号包围，但它不在“打开”然后“关闭”引号内，而是相反。

如果使用非常简洁的正则表达式可以做到这一点，否则我怀疑如果我想支持这个功能，我将不得不手动遍历传入的文本并自己解析块，这也没什么大不了的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T15:10:15.143

我认为这应该适合您的需求：（`<%(".*?"|.*?)*?%>`请参阅[演示](http://regexr.com?3348s)）。

**解释：**

*尽可能长时间地*匹配`.*`，尽可能*少地*匹配。*`.*?`*

 **例如（使用伪代码），

```
"#foo# #bar#".matches(/#(.*)#/).group(1) // will return ["foo# #bar"] 
```

尽管

```
"#foo# #bar#".matches(/#(.*?)#/).group(1) // will return ["foo", "bar"] 
```**

# c# - Unity Intercepting (AOP) 嵌套虚拟属性

> ID：13842498
> 
> 赞同：2
> 
> 时间：2012-12-12T15:01:59.110
> 
> 标签：c#, unity-container, aop

我最近开始在 Unity 应用程序块中使用拦截，并且在尝试获取嵌套属性以提醒它们已从视图模型的模型中更改时遇到了一个令人困惑的问题。例如，我有一个将 System.Drawing.Point 作为公共属性的模式。在视图模型中，我有一个公共属性，它返回一个字符串格式，以将点呈现为一个有效且易读的值。但是我认为我没有正确注册拦截，或者使用 Unity 拦截无法实现最终目标。

我已经用我的容器注册了拦截并设置了一个策略来拦截所有虚拟方法并设置规则以捕获所有设置的事件——尽管我对如何触发视图模型来检测/知道这一点感到困惑模型属性已更改。我想“简单”的解决方案是将视图模型专门绑定到模型上的属性，然后在 UI 中使用自定义格式化程序来确保正确显示值。

如果有人可以就统一拦截给出一些指示，那就太好了。

```
Container.AddNewExtension<Interception>();

PolicyDefinition policyDefinition =
            Container.Configure<Interception>()
                .SetInterceptorFor<MyModel>(new VirtualMethodInterceptor())
                .SetInterceptorFor<MyViewModel>(new VirtualMethodInterceptor())
                .AddPolicy("NotifyPolicy");

policyDefinition.AddMatchingRule(new PropertyMatchingRule("*", PropertyMatchingOption.Set));

public class MyModel
{
    [NotifyPropertyChanged]
    public virtual Point APoint { get; set; }
}

public class MyViewModel
{
    private MyModel _myModel;

public MyViewModel()
{
        _myModel = new MyModel { APoint = new Point(3, 2) };

    // {12,8} is not reflected in the UI
    _myModel.APoint = new Point(12, 8);
    }

[NotifyPropertyChanged]
public virtual string ModelLocation
{
       get
   {
           return string.Format("'{0}, {1}'", _myModel.APoint.X, _myModel.APoint.Y);
            }
    }
} 
```

我使用了[http://www.codeproject.com/Articles/140042/Aspect-Examples-INotifyPropertyChanged-via-Aspects](http://www.codeproject.com/Articles/140042/Aspect-Examples-INotifyPropertyChanged-via-Aspects)中的 NotifyPropertyChangedAttribute 和 NotifyPropertyChangedHandler作为连接事情的例子；我已经包含了仅供参考的方法。

```
[AttributeUsage(AttributeTargets.Property)]
public class NotifyPropertyChangedAttribute : HandlerAttribute
{
    public override ICallHandler CreateHandler(IUnityContainer container)
    {
        return new NotifyPropertyChangedHandler();
    }
}

internal class NotifyPropertyChangedHandler : ICallHandler
{
    public IMethodReturn Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
    {
        var result = getNext()(input, getNext);

        if (input.MethodBase.Name.StartsWith("set_"))
        {
            var propertyName = input.MethodBase.Name.Substring(4);
            var pi = input.Target.GetType().GetProperty(propertyName);

            if (pi.HasAttribute<NotifyPropertyChangedAttribute>())
            {
                var baseType = input.Target.GetType().BaseType;
                if (baseType != null)
                {
                    var info =
                        baseType.GetFields(
                            BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.FlattenHierarchy)
                             .FirstOrDefault(f => f.FieldType == typeof(PropertyChangedEventHandler));

                    if (info != null)
                    {
                        var propertyChangedEventHandler = info.GetValue(input.Target) as PropertyChangedEventHandler;
                        if (propertyChangedEventHandler != null)
                            propertyChangedEventHandler.Invoke(
                                input.Target.GetType(), new PropertyChangedEventArgs(propertyName));
                    }
                }
            }
        }

        return result;
    }

    public int Order { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:02:02.440

当您注册您的视图模型时，仅使用虚拟方法拦截器是不够的，您还需要使用 PolicyInjectionInterceptor 注册它以进行策略注入（我认为）。

但是，我强烈建议您查看 NotifyPropertyWeaver，它将在编译时为您提供 INotifyPropertyChanged 功能，而无需 Unity 策略。

# digital-signature - 从 WebSphere Portal 6.1 (AS7) 中的密钥存储中检索 PrivateKey

> ID：13842503
> 
> 赞同：0
> 
> 时间：2012-12-12T15:02:19.413
> 
> 标签：digital-signature, websphere-7, private-key, websphere-portal

我需要在 WebSphere Portal 6.1 上运行的应用程序中使用数字签名。是否有任何 API 用于从服务器密钥存储中检索 java.security.PrivateKey？我想避免在我的应用程序源代码中显示密钥存储和存储密码的路径。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T03:01:16.107

查看 IBM [KeySetHelper API](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.javadoc.doc/web/apidocs/com/ibm/websphere/crypto/KeySetHelper.html)。

首先，在 WAS admin 中定义一个 KeyStore。这将通过路径引用文件系统上的密钥数据库（JKS、PKCS12 等）。然后定义一个命名的 KeySet 并引用 KeyStore。在与 KeyStore 中的标签匹配的密钥集中创建一个别名。如果您在商店中有多个密钥，这将限制对特定密钥的访问。

然后，您可以通过 KeySetHelper 按名称“查找”命名的密钥库。注意：您需要知道商店中的密钥类型。您不需要知道代码中密钥数据库中的标签（甚至密码）。但是，您需要知道密钥是否是共享密钥（在这种情况下，您将收到[java.security.SecretKey](http://docs.oracle.com/javase/6/docs/api/javax/crypto/SecretKey.html)实现。由于您需要[java.security.PrivateKey](http://docs.oracle.com/javase/6/docs/api/java/security/PrivateKey.html)，请确保加载个人证书到在 WAS 中表示为您的密钥库的密钥数据库中。

如果您手动将证书加载到支持密钥库的密钥数据库中，则可以省略密钥集的密钥生成器类名称参数。如果您想让 WAS 生成密钥，就可以使用它。如果您还需要[java.security.PublicKey](http://docs.oracle.com/javase/6/docs/api/java/security/PublicKey.html)，请务必选中“生成密钥对”选项。在这种情况下，您会从[KeySetHelper::getLatestKeysForKeySet](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.javadoc.doc/web/apidocs/com/ibm/websphere/crypto/KeySetHelper.html#getLatestKeyForKeySet%28java.lang.String%29)调用中返回一个 com.ibm.websphere.crypto.KeyPair，其中包含一个 java.security.PrivateKey 和一个 java.security.PublicKey（以及对 java.security.Certificate 的访问权限） ）。

也可以看看：

*   [创建密钥库](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tsec_sslconfkeyset.html)
*   [创建密钥集](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tsec_sslconfkeyset.html)

# javascript - 我在这里想念什么？JS代码

> ID：13842508
> 
> 赞同：1
> 
> 时间：2012-12-12T15:02:30.157
> 
> 标签：javascript, templates, backbone.js, dreamweaver, underscore.js

出于某种原因，这段代码在第 5 行抛出了一个语法错误。我在这里遗漏了什么？请帮忙！

```
<script type="text/template" id="question-template">
    <h1 class="headline"><%= title %></h1>
    <h2 class="subheadline"><%= question %></h2>
    <ul class="answers">
        <% _.each( answers, function( answer ) { %>
          <% if (answer.type == "input") { %>
          <li>
            <input type="number" placeholder="<%= answer.title %>">
          </li>
          <% }else{ %>
          <li><a class="answer" href="#question/<%= id+1 %>" <% if (typeof(answer.callback) !== "undefined") { %>onclick="<%= answer.callback %>"<% } %>>
            <%= answer.title %></a>
        </li>
          <% } %>
        <% }); %>
    </ul>
</script> 
```

# javascript - 为 Javascript 矢量地图应用程序创建自定义矢量地图

> ID：13842509
> 
> 赞同：4
> 
> 时间：2012-12-12T15:02:31.940
> 
> 标签：javascript, maps, jqvmap

我正在寻找为我正在开发的网络应用程序创建自定义地图。

我正在查看数据图 (http://datamaps.github.com/)、Kartograph.js (http://kartograph.org/) 和 JQVMap (http://jqvmap.com/)。

我可以使用 CorelDraw 创建地图，但是如何导出它以便可以将其与这些工具一起使用？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:35:28.867

为此，我刚刚创建了[http://svgto.jvectormap.com/ 。](http://svgto.jvectormap.com/)有了它，您可以将 SVG 文件转换为与[jVectorMap](http://jvectormap.com)兼容的地图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:34:29.000

如何获得 SVG 代码？将您的 svg 图形导入此编辑器： [https ://github.com/SVG-Edit/svgedit](http://svg-edit.googlecode.com/svn/branches/2.6/editor/svg-editor.html)

然后您可以编辑代码（键盘快捷键 U）并将其粘贴到**bjornd**站点： [http ://svgto.jvectormap.com/](http://svgto.jvectormap.com/)

# c# - File.SetLastWriteTimeUtc 在临时目录中使用

> ID：13842512
> 
> 赞同：1
> 
> 时间：2012-12-12T15:02:35.887
> 
> 标签：c#, windows

如果`File.SetLastWriteTimeUtc`应用于用户临时目录，则设置为与指定的修改时间不同的 1-2 秒。On`LastWriteTime`是正确应用的时区（以小时为单位的差异），但也存在以秒为单位的奇怪差异。

例子：

```
using System.IO;

string tempDir = System.IO.Path.GetTempPath();
// required new last write datetime 2012-12-05 15:50:15
DateTime newLastWriteTimeUtc = new DateTime(2012, 12, 5, 15, 50, 15, 0);
string testFilePath = Path.Combine(tempDir, "Test.txt");
if (File.Exists(testFilePath))
{
  File.SetLastWriteTimeUtc(testFilePath, newLastWriteTimeUtc);
  FileInfo fInfo = new FileInfo(testFilePath);
  // you get real datetime 2012-12-05 15:50:16
  DateTime lastWriteTimeUtc = fInfo.LastWriteTimeUtc;
} 
```

谁能解释这种行为？

# .net - 如何在 SQL Server 中的列上创建主键或如何在 EDM 设计器中导入没有 PK 的视图？

> ID：13842515
> 
> 赞同：1
> 
> 时间：2012-12-12T15:02:42.043
> 
> 标签：.net, view, primary-key, wcf-data-services, odata

我的 SQL 服务器上有一个链接到 Active Directory 的链接服务器。我创建了一个视图，从 AD 中选择有关用户的相关信息。此视图没有主键。现在我想构建一个 OData 服务，它将从浏览器和我的应用程序中查询视图。我为此使用 .NET WCF 数据服务（.NET 4.0、VS2010）。但是，当我创建一个 edmx 文件并尝试导入视图时，该视图没有被导入，因为上面没有 PRIMARY KEY。我无法在视图上创建主键（在 MS SQL Server 上不可能），但我需要它能够在我的实体数据模型设计器中导入视图。我能做些什么？我怎样才能让它工作？

让我补充一点，我无法创建索引视图，因为我的视图不受架构约束（数据来自 Active Directory）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:23:35.703

您如何尝试在一两个小时内解决问题，这真的很有趣，您决定在 SO 上发帖并在几分钟内解决您的问题......

我发现了这个：[https ://stackoverflow.com/a/2715299/989256](https://stackoverflow.com/a/2715299/989256)

我们遇到了同样的问题，这就是解决方案：要强制实体框架使用列作为主键，请使用 ISNULL。要强制实体框架不使用列作为主键，请使用 NULLIF。一种简单的应用方法是将视图的选择语句包装在另一个选择中。例子：

```
SELECT
  ISNULL(MyPrimaryID,-999) MyPrimaryID,
  NULLIF(AnotherProperty,'') AnotherProperty
  FROM ( ... ) AS temp 
```

它工作得很好，但我有点担心性能。该视图似乎加载速度要慢得多...

# html - 隐藏文本：文本缩进或颜色：透明？

> ID：13842516
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:02:43.323
> 
> 标签：html, css

我看到很多次尝试使用 CSS 隐藏文本，例如：

```
<a class="back">back</a>    
a.back { text-indent: -9999px; display:block; width: 100px; height: 50px; background: url(/images/back.png); } 
```

我总是想知道为什么不使用：

```
a.back { color: transparent; display:block; width: 100px; height: 50px; background: url(/images/back.png); } 
```

在我看来语义上是正确的，此外，当我尝试 text-indent 方法时，它会导致 iPad 显示中的错误：文本显示在锚标记左侧 99999px 处，并导致奇怪的不必要的水平滚动。第二个代码是否存在常见的已知问题或者可以使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:07:54.883

`font-size: 0px;`应该做的伎俩。如果你想让按钮比文本更小，你还需要添加`line-height: 1em;`或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-20T14:03:42.443

使用 display 属性可以在 C# 中编辑元素的状态。

以下是人们使用的 4 个主要显示元素：

```
p.ex1 {display: none;}
p.ex2 {display: inline;}
p.ex3 {display: block;}
p.ex4 {display: inline-block;} 
```

**display:none**表示相关标签根本不会出现在页面上（尽管您仍然可以通过 dom 与它进行交互）。其他标签之间不会有空间分配给它。**visibility:hidden**意味着与**display:none**不同，标签不可见，但在页面上为其分配了空间

但如果你想了解更多关于它们的信息，你可以访问这个网站：[https ://www.w3schools.com/cssref/pr_class_display.asp](https://www.w3schools.com/cssref/pr_class_display.asp)

w3schools 以简单易懂的方式解释了许多语言。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-12T15:13:20.493

不要隐藏*内容*并完全依赖*背景*图像。

HTML 提供了一种将具有含义的图像（`<img>`元素）包含在文本内容中的方法，用于图像无法显示的情况（`alt`属性）。没有必要用样式表来伪造它。

```
<a class="back"><img alt="back" src="/images/back.png"></a> 
```

图标是内容，应该被这样对待。所有使用文本和背景图像的努力最终都是有限制的。该`<img>`元素是为此用例设计的。

# java - 如何在 Hibernate 中表示列表的视图？

> ID：13842517
> 
> 赞同：0
> 
> 时间：2012-12-12T15:02:44.653
> 
> 标签：java, hibernate, oop

假设我有一个主要的元素列表。然后我有主列表中元素的子集列表（所以它就像主列表的视图）。当项目从“视图”中删除时，它们不会从主列表中删除。当项目从主列表中删除时，它们将从“视图”中删除。当然物品有数字ID。

这必须以一种易于在 Hibernate 中映射的方式完成，并且可能在 DELETE 上使用 CASCADE。

# c# - 使用 Xsd 从序列化 WCF 代理类验证 Xml 时缺少架构错误

> ID：13842518
> 
> 赞同：2
> 
> 时间：2012-12-12T15:02:45.023
> 
> 标签：c#, .net, wcf, xml-serialization

我正在尝试使用 Xsd 验证序列化的 WCF 代理类。

我注意到生成的 Xml 不包括父元素上的命名空间，但子元素有它。这意味着我的验证抛出**找不到元素**类型错误的架构信息。

如果我手动添加默认命名空间，则架构验证有效。

我的问题是，如果请求对象具有命名空间的序列化属性，为什么不自动生成呢？

这就是我为代理生成序列化 Xml 的方式：

```
var path = @"C:\DataRequest.xml";
var data = new DataRequest(); 
using (var fileWriter = new StreamWriter(path))
{
   var serializer = new XmlSerializer(data.GetType());
   serializer.Serialize(fileWriter, data);
   fileWriter.Close();
} 
```

这将生成以下 DataRequest.xml：

```
<DataRequest>
  <Data xmlns="urn:some:name:space">
    <Id>1</Id>
  </Data>
</DataRequest> 
```

这是我的带有命名空间序列化属性的请求对象：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.17929")]
<other attributes I snipped>
[System.Xml.Serialization.XmlTypeAttribute(Namespace="urn:some:name:space")]
public partial class DataRequest : object, System.ComponentModel.INotifyPropertyChanged { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:22:52.090

我发现在使用 XmlSerializer 时，要在根目录下获取命名空间，需要将[XmlRootAttribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlrootattribute%28v=vs.100%29.aspx)应用于目标类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:56:55.323

我通过在序列化时动态获取命名空间值来解决此问题。

这是修改后的功能：

```
var dataType = data.GetType();
var xmlAttribute = (XmlTypeAttribute)Attribute.GetCustomAttribute(dataType, typeof(XmlTypeAttribute));
XNamespace ns = xmlAttribute.Namespace;
using (var fileWriter = new StreamWriter(filePath))
{
   var xSerializer = new XmlSerializer(dataType, ns.NamespaceName);
   xSerializer.Serialize(fileWriter, data);
   fileWriter.Close();    
} 
```

代码来自这个 SO 答案：
[How can I dynamic read a classes XmlTypeAttribute to get the Namespace?](https://stackoverflow.com/questions/5706725/how-can-i-dynamically-read-a-classes-xmltypeattribute-to-get-the-namespace)

# c++ - 编译器如何区分以下内容？

> ID：13842521
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:02:53.633
> 
> 标签：c++, vector, containers

看看这个...... [http://en.cppreference.com/w/cpp/container/vector/insert](http://en.cppreference.com/w/cpp/container/vector/insert) 编译器如何区分第三个和第四个，即是否制作副本所需的 int 或填充，容器在提供的范围内。

```
// 3rd
iterator insert( const_iterator pos, size_type count, const T& value );

// 4th
template< class InputIt >
iterator insert( const_iterator pos, InputIt first, InputIt last ); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:27:14.167

这是编译器（或库编写者）的问题，而不是您的问题。该标准说，如果`InputIt`类型是可以调用表单 3 的，那么行为应该就像调用了表单 3 一样。通常，使用某种形式的模板元编程，以便采用迭代器的模板函数将转发到两个不同的函数，由重载决策根据是否`InputIt`可以隐式转换为 a `size_type`(C++03) 或是否 `InputIt`将是一个合法的迭代器（C++ 11）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:12:15.497

An`iterator`和 a`const_iterator`根本不是同一个类。然后编译器就可以毫无问题地推断出它必须使用的重载版本。

编辑：第四个版本中的第二个和最后一个参数必须相同，并且必须遵循`InputIterator`. 这**不是**size_t 的情况，没有歧义。

# sql - 1父3子表之间的SQL条件关系

> ID：13842529
> 
> 赞同：1
> 
> 时间：2012-12-12T15:03:11.123
> 
> 标签：sql, sql-server

我正在尝试使用 Sql Server Management Studio 开发一个数据库。

```
Grandparent table
Resource
ResourceID_PK   int
Project     nvarchar(5)
Model       nvarchr(15)

Parent table
Machine
MachineID_PK    int
Model_UK        nvarchar(15)
Type
Brand
EmptyWeight

Child tables
DumpTruck   .       Excavator       Loader
DumpTruckID_PK      ExcavatorID_PK  Loader_ID       int
Model_UK            Model_UK        Model_UK        nvarchar(15)
Capacity            Capacity        Capacity 
```

模型列对于整个数据库是唯一的。我需要从祖父母表到达容量列。每个子表的型号列都是唯一的，因为所有机器都有不同的型号，例如“CAT966”。

我需要使用祖父模型列来读取具有相同模型的子表之一。

我开发了输入机器型号的 ac# 项目，并将从相应的子表返回容量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:08:19.150

要加入这些表，您将需要父表中的 ResourceID_PK 和子表中的 MachineID_PK。然后，您可以加入这些表并从祖父表到达容量列。

### 编辑

1.  将 ResourceID_PK 添加到机器（父表）
2.  将 MachineID_PK 添加到子表

要获取基于模型的容量，请使用以下查询：

```
Select Capacity
From DumpTruck c
Join Machine p on c.DumpTruckID_PK=p.MachineID_pk
Join Resource gp on gp.ResourceID_PK=p.ResourceID_PK
where gp.Model='X' 
```

（一个小警告，我没有测试过这个查询。）

# ruby-on-rails - Rails & Devise：使变量在设计视图中可用

> ID：13842530
> 
> 赞同：1
> 
> 时间：2012-12-12T15:03:13.027
> 
> 标签：ruby-on-rails, model-view-controller, devise

我似乎在任何地方都找不到这个......我正在尝试将仪表板添加到我的一个设计屏幕（注册/编辑），但我需要使一些变量可用。如何在不重写所有设计控制器逻辑的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:48:18.303

为此，您必须重写设计控制器，并调用父方法。

```
class RegistrationsController < Devise::RegistrationsController
  def edit
    super
    @your_var = 'something'
  end
end 
```

# python - 在 Python 中使用表达式索引进行切片的推荐空格是什么？

> ID：13842531
> 
> 赞同：6
> 
> 时间：2012-12-12T15:03:13.937
> 
> 标签：python, coding-style, whitespace

[文档](http://docs.python.org/2/tutorial/introduction.html#strings)中的切片示例仅显示用作索引的整数文字和变量，而不是更复杂的表达式（例如`myarray[x/3+2:x/2+3:2]`）。PEP-8 也没有涵盖这种情况。此处空白的通常用法是什么：`myarray[x/3+2:x/2+3:2]`、、`myarray[x/3+2 : x/2+3 : 2]`或`myarray[x/3+2: x/2+3: 2]`（似乎没有其他合理的选择）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T15:08:34.130

我从未见过在切片操作中使用空间，所以避免它们会出错。再说一次，除非它对性能很重要，否则我倾向于将表达式完全移到切片操作之外。毕竟，您的目标是可读性：

```
lower = x / 3 + 2
upper = x / 2 + 3
myarray[lower:upper:2] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T15:15:27.810

我相信 PEP8 在这个主题上最相关的摘录是：

> 此处提供的指南旨在提高代码的**可读性**并使其在广泛的 Python 代码中保持一致。

在这种情况下，我个人的选择可能是史蒂夫梅恩的答案，或者可能是：

```
myarray[slice(x / 3 + 2, x / 2 + 3, 2)] 
```

# qt - cutycapt 不会在 pdf 中创建链接

> ID：13842533
> 
> 赞同：1
> 
> 时间：2012-12-12T15:03:17.100
> 
> 标签：qt, pdf, qtwebkit

我正在使用 CutyCapt 从 html 创建 pdf，问题是 pdf 不包含链接。它会从 pdf 中删除所有链接。现在我在该代码中看到它从 QWebFrame 类型创建对象，然后将该帧打印到打印机。

```
QWebFrame *mainFrame = mPage->mainFrame();
  QPainter painter;

case PdfFormat:
    case PsFormat: {
      QPrinter printer;
      printer.setPageSize(QPrinter::A4);
      printer.setOutputFileName(mOutput);
      // TODO: change quality here?
      mainFrame->print(&printer);
      break;
    } 
```

任何想法，我需要在 QT 方面做些什么来启用 links 。

# iphone - 如何为ios应用程序设置iTunes应用程序要求？

> ID：13842537
> 
> 赞同：1
> 
> 时间：2012-12-12T15:03:30.303
> 
> 标签：iphone, ipad, app-store-connect

iTunes 如何设置应用程序要求？

我在 AppStore 上有一个 iPhone 应用程序，但我无法从我的 iPad 3 上找到它，只能从我的 iPad 1 上找到它。我可以从我所有的 iPhone 上找到它。我希望该应用程序可供所有人使用，iPhone/iPod/iPad 但在 iPad 上以兼容模式运行。

在应用程序的 iTunes 页面上，我有如下要求：*“**要求**：与 iPhone 3GS、iPhone 4、iPhone 4S、iPhone 5、iPod touch（第 3 代）、iPod touch（第 4 代）、iPod touch（第 5 代）兼容) 和 iPad。需要 iOS 4.3 或更高版本。此应用程序针对 iPhone 5 进行了优化。*

那么Requirements字段是如何完成的呢？我的应用程序有 Targeted Device Family -> iPhone 和 Target -> Summary -> Device -> iPhone

# java - JavaSpaces 通知处理程序方法

> ID：13842538
> 
> 赞同：1
> 
> 时间：2012-12-12T15:03:34.943
> 
> 标签：java, callback, notify, javaspaces

我正在尝试实现一个处理程序方法，该方法可以根据传递到空间的参数进行通知。例如，我有以下代码将模板放入空间，其中 tab 是房间的名称：

```
private void createMessageListener(String tab) {
        // create the exporter
        Exporter myDefaultExporter =
                new BasicJeriExporter (TcpServerEndpoint.getInstance(0),
                        new BasicILFactory(), false, true);

        try {
            // register this as a remote object
            // and get a reference to the 'stub'
            msgListener = (RemoteEventListener) myDefaultExporter.export(this);

            // add the listener
            Message template = new Message(tab);
            regMsgs = space.notify(template, null, this.msgListener, Lease.FOREVER, null);
            seqMsgs = regMsgs.getSequenceNumber();

        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

当尝试处理如下所示的事件注册时，有没有办法找出为通知方法传入的参数？

```
public void notify(RemoteEvent arg0) throws UnknownEventException,
    RemoteException {

        ///Find out the parameter in the notification and then handle?
        }
    } 
```

# ios - UITableview、NSArrays 和 NSDictionnaries // 排序

> ID：13842543
> 
> 赞同：1
> 
> 时间：2012-12-12T15:04:07.433
> 
> 标签：ios, uitableview

我必须 UITableview，包含在字典中的节标题标题，与每个标题关联的数组中的内容（这些数组创建单元格）。

没关系，很多人在这里回答了关于订购字典的问题，这很困难，等等……即使可以（不能或有困难）订购字典，它如何每次都保持相同的顺序？

* * *

**例子**

假设我最终得到一个包含两个部分（标题）的表格视图，每个部分包含一些单元格

声明了一个字典，它包含部分标题。

```
NSMutableDictionary *menuEntries; 
```

对于这些字典条目中的每一个，关联一个不同的数组（然后用于创建和填充单元格）。我们将有两个部分（因此字典中有两个键），由于某些原因，我们使用两个不同的数组，我们将与这些键相关联

```
NSArray *mainMenuArray;
NSMutableArray *magazineMenuArray; 
```

第一个是这样填充的（

```
mainMenuArray = [[NSArray alloc] initWithObjects: btn1,btn2,btn3,btn4,nil]; 
```

第二个数组（magazineMenuArray）是通过一些 json 调用填充的（这里没有显示如何，但一切正常）

所以我们最终设置了字典

```
menuEntries = [[NSMutableDictionary alloc] init];
[menuEntries setObject:mainMenuArray forKey:@"First section"];
[menuEntries setObject:self.magazineMenuArray forKey:@"Second section"]; 
```

最后，它工作得很好，我们为数组的对象定义了一些属性，一个是标题，一个是要调用的动作，非常酷。

* * *

**！！但 ！！**

* * *

**第二部分**出现在**第一部分**之前。无事可做/反对它。总是。

我可以听到 NSDictionnary 不能被订购，好的，但我真的觉得，在这种情况下，它以某种方式被订购。

这很令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:10:45.223

`NSDictionary`每次都保持相同的顺序，但这是基于您作为键插入的对象的哈希码的任意顺序。如果字典是可变的，插入或删除对象可以改变字典中已有键的顺序。

虽然不可能对字典本身进行排序，但当然可以将其键排序到一个单独的数组中，然后按顺序遍历该数组，通过键从（无序的）字典中提取对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:49:55.500

**编辑：**

你说你有

```
NSMutableDictionary *menuEntries; 
```

其中填充为：

```
menuEntries = [[NSMutableDictionary alloc] init];
[menuEntries setObject:mainMenuArray forKey:@"First section"];
[menuEntries setObject:self.magazineMenuArray forKey:@"Second section"]; 
```

如果您希望它尊重您填充它的顺序，您应该使用 a`NSMutableArray`代替，例如：

```
NSMutableArray *menuEntries; 
```

然后，您可以用字典条目填充该数组，其中至少有两个键，一个是部分的标题，另一个是该部分的行。因此：

```
menuEntries = [[NSMutableArray alloc] init];
[menuEntries addObject:[NSDictionary dictionaryWithObjectsAndKeys:
                            @"First section", @"title",
                            mainMenuArray, @"rows",
                            nil]];
[menuEntries addObject:[NSDictionary dictionaryWithObjectsAndKeys:
                            @"Second section", @"title",
                            self.magazineMenuArray, @"rows",
                            nil]]; 
```

因此，

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [menuEntries count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSDictionary *section = [menuEntries objectAtIndex:section];
    return [section objectForKey:@"title"];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSDictionary *section = [menuEntries objectAtIndex:section];
    return [[section objectForKey:@"rows"] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSDictionary *section = [menuEntries objectAtIndex:indexPath.section];
    NSArray *rows = [section objectForKey:@"rows"];
    id row = [rows objectAtIndex:indexPath.row];

    // I didn't know how mainMenuArray and self.magazineMenuArray were populated, 
    // so I used a data type of `id` for the row, but you can obviously replace
    // that with whatever is appropriate, e.g., NSDictionary* or whatever.

    // proceed with the configuring of the cell here
} 
```

就个人而言，我不会到处使用文字字符串`@"title"`，`@"rows"`而是定义如下常量，在实现开始时包含这些常量，并使用它们代替文字字符串。但我相信你明白基本的想法。

```
NSString * const kTableTitleKey = @"title";
NSString * const kTableRowsKey  = @"rows"; 
```

无论如何，这概述了我在`UITableView`对象后面使用的一个非常常见的数据模型。这是一个很好的逻辑结构，对应于表视图本身。本质上，它是一个节数组，每个节都是一个带有两个键的字典，一个用于标题，一个用于节的行。“该部分的行”的值本身就是一个数组，表的每一行都有一个条目。这听起来很复杂，但正如您在上面看到的，它实际上使实现非常非常简单。

* * *

我的原始答案是在 OP 提供有关数据结构性质的任何信息之前提供的。因此，我为更抽象的问题提供了一个答案，即如何对字典条目数组进行排序。不过，我保留该答案以供历史参考：

**原答案：**

我不确定您如何存储字典以及如何表示表中的行，但一种常见的模式是拥有一个字典项数组：

```
NSArray *array = @[
    @{@"id" : @"1", @"name":@"Mo",    @"age":@25},
    @{@"id" : @"2", @"name":@"Larry", @"age":@29},
    @{@"id" : @"3", @"name":@"Curly", @"age":@27},
    @{@"id" : @"4", @"name":@"Shemp", @"age":@28}
]; 
```

然后，您可以通过 对其进行排序`name`，如下所示：

```
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"name"
                                                           ascending:YES];
NSArray *sortedArray = [array sortedArrayUsingDescriptors:@[descriptor]];

NSLog(@"array = %@", array);
NSLog(@"sortedArray = %@", sortedArray); 
```

排序方法有一整套，请查看*NSArray 类参考*中的[排序。](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-SW12)

# c++ - 如何将 boost.build 项目链接到特定的静态库

> ID：13842544
> 
> 赞同：3
> 
> 时间：2012-12-12T15:04:07.200
> 
> 标签：c++, boost-build

我将 boost.build 用于我的项目。当然，我使用 boost 本身。此外，出于测试目的，我在我的项目中使用了 google-test 库。我必须将我的项目与 google-test 的静态库链接起来。我找到了为 MinGW 执行此操作的解决方法（对于 linux 的 gcc 也可以）

```
exe foo : $(IMPORTANT_PART) $(TEST_UTILITY_PART) : <toolset>gcc <linkflags>"../../libs/gtest-1.6.0/libs/gtest_main.a" <linkflags>-static <linkflags>-lpthread ; 
```

它看起来有点难看，但它确实有效。msvc 的规则看起来要丑得多

```
exe foo : $(IMPORTANT_PART) $(TEST_UTILITY_PART) : <toolset>msvc <linkflags>/LIBPATH:../../libs/gtest-1.6.0/libs <linkflags>/DEFAULTLIB:gtest_main-mdd.lib
<linkflags>/DEFAULTLIB:gtestd-md.lib
; 
```

是否有更自然的方式将目标与 boost.build 项目文件中的外部静态库链接。

* * *

PS 当然，使用 google-test 和 boost mix 的味道并不好，但无论如何，有很多外部库覆盖了 boost 没有涵盖的领域。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:01:14.913

伟大的！感谢指出我[http://www.boost.org/boost-build2/doc/html/bbv2/tutorial/prebuilt.html](http://www.boost.org/boost-build2/doc/html/bbv2/tutorial/prebuilt.html)页面的人。（评论消失了）似乎是，我确实没有仔细阅读此页面。具有文件属性的目标库执行我搜索的操作。谢谢！

* * *

至于使用 google test 和 boost build，我是这样做的：我为 google-test 制作了 Jamfile。这很简单：

```
gtest.lib/Jamfile
    project gtest_main 
         : requirements <include>../../../libs/gtest-1.6.0/include
                        <include>../../../libs/gtest-1.6.0/
         : source-location ../../../libs/gtest-1.6.0 
         : build-dir ../../../libs/gtest-1.6.0/bin.b2 ; 

    lib gtest_main : src/gtest_main.cc src/gtest-all.cc : <link>static ; 
```

然后，在我的项目文件中的某处：

使用项目 /gtest : ./gtest.lib ;

并在项目的需求部分提到 //gtest。

# ruby - UIViewController 实例中的全局可访问属性

> ID：13842546
> 
> 赞同：0
> 
> 时间：2012-12-12T15:04:14.720
> 
> 标签：ruby, rubymotion

在我的 RubyMotion 应用程序中，我希望`access_token`在每个 UIViewController 实例中都有一个名为 的属性。

我所有的控制器要么是 要么 的子`TableController`类`AppController`。

我尝试创建一个`attr_accessor`for `TableController`and `AppController`，但问题是不会同时为`TableController`or设置新值`AppController`。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:10:24.253

创建一个类的子类，`TableController`并在其中添加属性。`AppController``Controller`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:16:28.140

我个人将类变量用于此类事情，因为 iOS 应用程序不是多用户的。利用继承的类共享类变量这一事实，@@access_token 将为您的所有 UIViewController 子类（或您自己的子类，如果您愿意）具有相同的值。

我有类似的东西：

```
# Reopen and extend
class UIViewController # Actually I prefer UIViewController.class_eval do
  @@access_token = nil # This will have the same value for all UIViewController children

  def self.access_token=(value)
    @@access_token = value
  end

  def self.access_token
    @@access_token
  end
end 
```

实际上，我会构建一个类，该类包含和除了令牌之外的属性。

# html - 如何使用 CSS 正确使用带边框的无表格布局？

> ID：13842549
> 
> 赞同：0
> 
> 时间：2012-12-12T15:04:23.073
> 
> 标签：html, css, layout, doctype

我正在开发一个新的 HTML 页面，我想使用无表格布局。请记住，这里的内容只是页面的一部分，但我认为它清楚地描绘了我正在尝试做的事情。

下面的 HTML 旨在呈现六个带有文本的单元格。我希望单元格的大小适当，以包含里面的文本。

我遇到的问题是边界绘制不正确。在 IE 和 Firefox 中，我看到两个问题：

1) 边框之一绘制在表格之外。

2）第一行单元格之间的边界绘制不完整。

```
<!DOCTYPE html>
<html>
<head>
<style>

html
{
}
.reviewRow 
{    
    clear:both;    
}
.reviewBlock 
{
 float:left; 
 border-top: 1px solid #444; 
 border-left: 1px solid #444;
}
.rightBorder
{
    border-right: 1px solid #444;
}
.bottomBorder
{
    border-bottom: 1px solid #444;   
}
</style>
</head>

<body>
<div class='reviewRow'>
    <div style="width:200px;" class='reviewBlock'>      
        THIS TEXT IS MUCH LONGER THAN THE TEXT IN THE OTHER CELLS
    </div>
    <div style="width: 225px" class='reviewBlock'>      
        ABC
    </div>
    <div style="width: 100px" class="reviewBlock rightBorder">      
        December 25, 2012
    </div>
</div>
<div class='reviewRow bottomBorder'>
    <div style="width:300px;" class='reviewBlock'>      
        Hello, World!
    </div>
    <div style="width: 125px" class='reviewBlock'>      
        123
    </div>
    <div style="width: 100px" class="reviewBlock rightBorder">      
        May 1, 2013
    </div>
</div>
<div style='clear:both;'></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:09:44.627

不要像其他人所说的那样，不要使用表格制作布局，但是当涉及到表格数据时，如果您使用 div 制作表格对我来说没有任何意义，请不要使用表格进行设计布局，但您应该将其用于表格数据

不过如果你想使用你可以参考[这个](https://stackoverflow.com/questions/3053205/how-create-table-only-using-div-tag-and-css)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:15:42.750

顺便说一句，回答这个问题...您可以使用[display:table、table-cell 和 table-row](http://ajaxian.com/archives/display-table)（在 CSS3 中）

但我同意 Alien 先生的观点：只需将表格用于表格数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T15:16:31.447

请参阅 html 元素的高度是根据其中的内容计算的，除非您明确指定它。

您的第二个 div 只占用了显示**ABC**所需的高度，因此边框只显示了那么多。要解决此问题，您必须为每个 div 指定一定的高度，以便它们按照您的意愿显示。

如果您尝试以表格方式显示数据，请使用表格。他们在那里只是为了那个目的。您显然可以设计它们以使它们更好看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:19:36.460

如果您尝试对表格数据执行此操作，那么一定要**使用一个表**，这就是它的用途。当 Excel 是更好的工具时，不这样做就像尝试使用 Photoshop 制作电子表格一样。

`colspan`您可以使用该属性更改单元格占用的列数。当然，默认情况下，一个单元格占用 1 列 ( `colspan="1"`)，但如果您需要它占用更多，您只需更改数字即可。您可以对带有`rowspan`.

# flash - 使用 Selenium Web 驱动程序的 Flash 自动化

> ID：13842551
> 
> 赞同：4
> 
> 时间：2012-12-12T15:04:31.310
> 
> 标签：flash, selenium, automation, selenium-webdriver

我们正在尝试使用 Selenium Web 驱动程序自动化具有基于 Flex 功能的 Web 应用程序。当我们了解到我们需要依靠第三方扩展来完成这项工作时，我们对此感到震惊。

我们探索了几个选项，例如：

1.机器人框架

2.sfapi

但是发现了一个问题：拖放使用`doFlexDragTo(id:String, pos:String)`不起作用。 [http://code.google.com/p/sfapi/issues/detail?id=7](http://code.google.com/p/sfapi/issues/detail?id=7)

我们实际上需要这个函数在我们的应用程序中使用它。

3.现在我们正在考虑探索以下内容（我认为两者都相同） [https://www.gorillalogic.com/monkeytalk/legacy-products](https://www.gorillalogic.com/monkeytalk/legacy-products) 和 FlexMonkium

如果有比上述更好的选择，请建议我们。如果有人已经对此或使用 Selenium Web 驱动程序处理基于 Flex 的自动化进行了研究，请提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T17:36:44.283

试试[斯库里](http://www.sikuli.org/)。它应该适用于您的情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-18T12:27:50.437

为什么不尝试行动？

创建您将点击的隐形按钮

`((JavascriptExecutor) driver).executeScript("var mybutton = $('<button/>', {id: 'invisbutton', class: 'invisbutton',text: '', style: 'position:absolute; width:20px; height:20px;top:" + result_pos_y + "px;left:" + result_pos_x + "px;visibility:hidden'}); $('" + element_to_append + "').append(mybutton);");`

`result_pos_y`并且`result_pos_x`是像素 int 值

`element_to_append`是 jquery webelement 参考

移动到按钮并单击它（如播放或暂停按钮）

```
Actions builder = new Actions(driver.getWebDriver());
        builder.moveToElement(driver.findElement(By.xpath("//button[@id='invisbutton']"))).build().perform();
        builder.moveToElement(driver.findElement(By.xpath("//button[@id='invisbutton']"))).click().build().perform(); 
```

并使用断言插入您的代码。就我而言，我可以通过 JS 达到一些 Flash 播放器状态，所以下面是我的断言示例

```
String brightcove_id = driver.findElement(By.xpath("//div[@id='bcplayer-container']//object")).getAttribute("id");
    ((JavascriptExecutor) driver).executeScript("brightcove.api.getExperience('" + brightcove_id + "').getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER).getIsPlaying( function(isPlaying) { alert(isPlaying)})");
    driver.pause(200);
    String alert_text = driver.switchTo().alert().getText();
    driver.switchTo().alert().accept();
    assertTrue("Video is not stopped after clicking pause button", alert_text.equals("false")); 
```

请注意，FF 中支持 Actions，无需添加 Native 事件，但您需要在 Chrome 中添加 Native 事件支持。

该方法的唯一缺点是您需要为按钮创建映射（每个 Flash 元素的像素映射）。

# .net - 我需要一个非常灵活的时间正则表达式

> ID：13842556
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:04:50.463
> 
> 标签：.net, regex, parsing, datetime

我正在寻找为这些模式创建一个正则表达式：

```
[num] [am]
[num] [pm]
[num] [-] [num]
[num] [:] [num] 
```

有或无空格

就是判断一个句子中是否有时间。理想情况下，它实际上会解析出时间。句子会是这样的：

```
“This event is at 9am at…”
“Blues, 5:30, pressroom..”
“Meet at 5pm!”
“All night 9-8 rockin’ it!” 
```

我的项目在 .NET 中，以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:07:52.100

与其拥有一个灵活的正则表达式，我更喜欢多个正则表达式（最有可能为您想要匹配的每种类型的模式一个），并应用每一个，直到您获得匹配。请注意，您可以使用这种方法来识别不明确的时间规范。

这种方法更容易编码和维护（将来您可能需要更多时间格式，并且添加新的特定正则表达式而不是修改已经复杂/灵活的正则表达式是微不足道的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:26:34.163

鉴于您的定义，我认为这样的事情几乎可以做到：

```
"\\b(1[012]|[1-9])(\\s?(am|pm)|:[0-5][0-9]|-(1[012]|[1-9]))\\b" 
```

这要求一小时在 1-12 之间，分钟在 0-59 之间。它还需要围绕时间的单词边界。它不允许破折号或冒号周围有空格。

尽管如此，根据定义，您会得到很多误报，尤其是您的`[num]-[num]`格式，它看起来很像日期和其他内容。

[在这里](http://regexpal.com/)测试。我没有找到特定的 .NET 测试仪，但我认为这都是标准的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:23:10.723

从那个“语法”构建一个正则表达式非常简单，[看看 RegExes](http://www.regular-expressions.info/tutorial.html)！

```
/(\d{1,2})\s*([:-]\s(\d{1,2})|am|pm)/ 
```

我已将您的数字限制为 2 个字符长，您可能会忽略它，因为您可能会查看时间是否在有效范围内。要解析匹配的字符串，您可以从结果中提取匹配组。

# r - 从 R 中的绘图中获取 xlim

> ID：13842560
> 
> 赞同：11
> 
> 时间：2012-12-12T15:05:14.743
> 
> 标签：r, plot

我想要在同一个情节上的历史和密度，我正在尝试这个：

```
myPlot <- plot(density(m[,1])), main="", xlab="", ylab="")
par(new=TRUE)

Oldxlim <- myPlot$xlim
Oldylim <- myPlot$ylim

hist(m[,3],xlim=Oldxlim,ylim=Oldylim,prob=TRUE) 
```

但我无法访问 myPlot 的 xlim 和 ylim。

有没有办法从 myPlot 获取它们？我还应该做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T17:49:38.423

使用`par(new=TRUE)`很少，如果有的话，最好的解决方案。许多绘图函数都有这样的选项`add=TRUE`，它将添加到现有绘图中（包括评论中提到的直方图绘图函数）。

如果你真的需要这样做，那么查看函数的`usr`参数`par`，doing`mylims <- par("usr")`将给出用户坐标中现有绘图的 x 和 y 限制。但是，当您在新绘图上使用该信息时，请确保设置`xaxs='i'`或新绘图中使用的实际坐标将超出您指定的 4%。

了解这些功能`grconvertX`也`grconvertY`很有用。它们可以用于此目的，但与 相比可能是多余的`par("usr")`，但它们对于在其他坐标系中查找限制或在用户坐标中查找诸如绘图区域中间的值很有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T15:39:56.637

您是否考虑过在第一个图中指定自己的 xlim 和 ylim（将它们设置为适当的值），然后再次使用这些值来设置第二个图中直方图的限制？

仅通过自己绘制密度，您应该能够计算出两个轴的最小值和最大值的合理值，然后在下面的代码中替换这些值的 xmin、xmax、ymin 和 ymax。

就像是;

```
myPlot <- plot(density(m[,1])), main="", xlab="", ylab="", xlim =c(xmin, xmax), ylim = c(ymin, ymax)

par(new=TRUE)

hist(m[,3],xlim=c(min, max),ylim=c(min, max),prob=TRUE) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-31T14:03:47.863

如果出于任何原因您无法使用`range()`这些限制，我会遵循@Greg 的建议。这仅在`par`参数“xaxs”和“yaxs”设置为“s”（这是默认值）并且坐标范围扩展 4% 时才有效：

```
plot(seq(0.8,9.8,1), 10:19)
usr <- par('usr')
xr <- (usr[2] - usr[1]) / 27 # 27 = (100 + 2*4) / 4
yr <- (usr[4] - usr[3]) / 27
xlim <- c(usr[1] + xr, usr[2] - xr)
ylim <- c(usr[3] + yr, usr[4] - yr) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T15:35:02.697

我认为最好的解决方案是在绘制密度时修复它们。

否则在 plot.default (plot.R) 的代码中设置

```
xlab=""
ylab=""
log =""
xy <- xy.coords(x, y, xlab, ylab, log)
xlim1 <- range(xy$x[is.finite(xy$x)])
ylim1 <- range(xy$y[is.finite(xy$y)]) 
```

或使用上面的代码生成 xlim 和 ylim 然后调用你的密度图

```
dd <- density(c(-20,rep(0,98),20))
plot(dd,xlim=xlim1,ylim=ylim1)
x <- rchisq(100, df = 4)
hist(x,xlim=xlim1,ylim=xlim1,prob=TRUE,add=TRUE) 
```

![在此处输入图像描述](../Images/30eb15c331b58bbf2f005316da30175f.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T17:21:31.640

为什么不使用`ggplot2`？

```
library(ggplot2)

set.seed(42)
df <- data.frame(x = rnorm(500,mean=10,sd=5),y = rlnorm(500,sdlog=1.1))

p1 <- ggplot(df) + 
  geom_histogram(aes(x=y,y = ..density..),binwidth=2) +
  geom_density(aes(x=x),fill="green",alpha=0.3) 
print(p1) 
```

![密度和组织](../Images/0da27c53c9d19298faaf90faaa4b0494.png)

# c# - C# WebClient 从 FTP 下载文件

> ID：13842567
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:05:33.363
> 
> 标签：c#, ftp, webclient

我正在使用以下代码从 FTP 下载文件。

```
NetworkCredential credential = new NetworkCredential(Properties.Settings.Default.FTPUserName, Properties.Settings.Default.FTPPassword);
string inputfilepath = Path.Combine(Properties.Settings.Default.LocalDownloadFolder, file);
string ftpfullpath = Properties.Settings.Default.FTPSite + Properties.Settings.Default.FTPFolder + file;

WebClient request1 = new WebClient();
request1.Credentials = credential;
request1.DownloadFile(ftpfullpath, inputfilepath); 
```

前两个变量的值是：

```
E:\FTPDownloads\CardholderManagementReport_1030_2012-12-11.xls
ftp://abc.com/AKSHAY/CardholderManagementReport_1030_2012-12-11.xls 
```

它显示错误为：

```
The remote server returned an error: (550) File unavailable (e.g., file not found, no access). 
```

**编辑：我可以看到该文件确实存在那里，凭据是好的，我可以使用 FileZilla 下载它**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:44:10.827

[This](http://www.colourcoding.net/blog/archive/2010/01/25/ftpwebrequest-and-550-file-unavailable-e.g.-file-not-found-no.aspx) makes it work.
[ftp://abc.com/%2f/AKSHAY/CardholderManagementReport_1030_2012-12-11.xls](ftp://abc.com/%2f/AKSHAY/CardholderManagementReport_1030_2012-12-11.xls)
Explaination is also there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:14:22.643

FTP服务器返回的错误550表示您用来尝试访问该文件的用户没有访问该文件的权限。

使用可以访问文件的其他一些凭据集，或者更改文件的权限以允许访问。

# symfony - Symfony 2 - 使用角色和组检查操 作权限

> ID：13842571
> 
> 赞同：2
> 
> 时间：2012-12-12T15:05:39.383
> 
> 标签：symfony, permissions, fosuserbundle, roles

我是 Symfony 2 的新手，我阅读了一些关于 ACL 和 ROLE 系统的文档。我知道我可以使用 ACL 对对象使用不同的权限。

但我需要一些不同的 (?) 类型的权限检查，比如在静态 apache 涡轮角色/权限集中。

我想使用 FOSUserBundle 并使用 Groups。组应具有 DOWNLOAD_PDF DOWNLOAD_PPT INVITE_USERS 等权限。

与对象无关的东西，但我必须检查控制器（静态）并分配给用户界面中的组。

我真的没有找到有关如何检查这些权限并将它们分配给例如组的信息。

有什么东西已经存在了吗？还是最佳实践？或者我应该为我需要角色的每个权限创建？

# c# - 如何动态调整 WPF DataGrid 列的宽度？

> ID：13842572
> 
> 赞同：1
> 
> 时间：2012-12-12T15:05:40.083
> 
> 标签：c#, wpf, datagrid, width, datagridcolumn

我的窗口中有一个 DataGrid，我需要自动调整列的宽度以适应内容。但我有一个障碍：

*   如果他的内容比他的header小，以header的大小为准；
*   他的内容由一个绑定自动更新，链接到一个文本框。所以......当用户关注另一个字段时，表示该字段的列将更新。当最新内容大于以前的数据时，它已经发生了。
*   我正在使用 MVVM，这个组件是 DataGrid 的 UserControl 扩展。我不能使用比我们在代码隐藏中拥有的一些资源，但我可以使用（这不是最好的方法）MVVM 绑定来调整它的大小。我真的很想做一个通用的解决方案。

我会很感激任何帮助。

此致，

古斯塔沃。

# java - 无法在 Java 中创建泛型数组

> ID：13842574
> 
> 赞同：0
> 
> 时间：2012-12-12T15:06:00.027
> 
> 标签：java

我尝试创建一个通用数组，但我得到了标题的错误。

```
 ByteConverter<Product> byteconverter = new ByteConverter<Product>();

 //into an inner class I have to declare a final field 
 final ByteConverter<Product>[] byteconverter2 = {byteconverter}; 
```

所以，我在 Stackoverflow 上搜索了一个可能的解决方案。我在这里找到了类似的东西：[Cannot create an array of LinkedLists in Java...?](https://stackoverflow.com/questions/217065/cannot-create-an-array-of-linkedlists-in-java) ，所以我将我的代码更改为以下内容：

```
 final ByteConverter<Product>[] byteconverter2 = {(ByteConverter<Product>[])byteconverter}; 
```

但我仍然犯同样的错误。我不明白为什么..有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:07:25.907

```
final ByteConverter<Product>[] byteconverter2 = 
   new ByteConverter[]
   {
      byteconverter   
   }; 
```

这很好用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:18:16.160

这编译，虽然有一个警告

```
 ByteConverter<Product> byteconverter = new ByteConverter<Product>();
    ByteConverter<Product>[] byteconverter2 = new ByteConverter[] { byteconverter }; 
```

在这里阅读[http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html](http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html)关于泛型的限制

# preprocessor - GNU-M4：去除空行

> ID：13842575
> 
> 赞同：6
> 
> 时间：2012-12-12T15:06:00.687
> 
> 标签：preprocessor, m4

如何使用 M4 从输入文件中删除空行（多余的空行）？

我知道我可以附加`dnl`到脚本每一行的末尾以抑制换行符输出，但我的意思是空行不在我的脚本中，而是在包含的数据文件中（我不应该放在的地方`dnl's`）。

我尝试过这样的事情：

```
define(`
',`') 
```

（用任何内容替换新行）但它没有用。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:24:09.437

我使用`divert()`我的定义：

*   `divert(-1)`将抑制输出
*   `divert(0)`将恢复输出

例如：

```
divert(-1)dnl output supressed starting here

define(..)

define(..)

divert(0)dnl normal output starting here
use_my_definitions()... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T13:44:19.140

我理解您的问题是一个带有额外换行符的数据文件，这意味着您希望在其中`data<NL>moredata`拥有诸如`data<NL><NL>moredata`.

这是一个剪切/粘贴到命令行的示例，该示例使用此处的文档生成数据集并运行 m4 脚本以删除数据集中的中断。您可以看到 patsubst 命令将序列 ( `<NL><NL>*`) 中一个或多个换行符的每个实例都替换为一个换行符。

```
cat > data << -----
1, 2
3, 4

5, 6

7, 8

9, 10
11, 12
e
-----

m4 << "-----"
define(`rmbreaks', `patsubst(`$*', `

*', `
')')dnl
rmbreaks(include(data))dnl
----- 
```

# php - 公用表中每个用户的序号字段

> ID：13842578
> 
> 赞同：0
> 
> 时间：2012-12-12T15:06:15.363
> 
> 标签：php, mysql, sequential

我有一个用户表和一个目标表。用户可以输入目标。每个表都有一个`INT`自动递增的主键。现在我想在`INT`代表用户目标 ID 的目标表中添加一个字段，这样如果 UserA 输入 5 个目标，这个新字段将包含从 1 到 5 的值。对于 UserB .. UserN 也是如此。我可以单独在 MySQL 端执行此操作，还是必须事先在我的 PHP 代码中提取数据以确定下一个数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:10:08.123

像这样的查询呢：

```
INSERT INTO goals(col1, col2, col3, user_goal_id) 
  SELECT :val1, :val2, :val3, MAX(user_goal_id)+1 
  FROM goals 
  WHERE user_id = :user_id 
  GROUP BY user_id 
```

? 我想这是最简单的方法...

或者也许这也可以工作：

```
INSERT INTO goals(col1, col2, col3, user_goal_id) 
  SELECT :val1, :val2, :val3, user_goal_id+1 
  FROM goals 
  WHERE user_id = :user_id 
  ORDER BY user_goal_id DESC
  LIMIT 1 
```

或者您可以创建一个触发器或一些功能......

# game-engine - 适用于 Windows Phone 8 的 Libgdx

> ID：13842580
> 
> 赞同：5
> 
> 时间：2012-12-12T15:06:18.467
> 
> 标签：game-engine, libgdx, windows-phone-8

我想将我的 libGDX 游戏移植到 Windows Phone。

我可以为 Windows Phone 8 编译我的 libGDX 游戏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:37:19.193

不，不是直接的。目前，libGDX“仅”适用于 Mac、Windows、Android、HTML5（通过 Google Web Toolkit）和（测试版）iOS。

您也许可以让 HTML5 输出在 Windows Phone 上运行（取决于浏览器中 JavaScript 引擎的性能）。然后你需要一些方法来为 Windows Phone 打包这个（在 Android 或 iOS 上你可以使用 PhoneGap，WP8 可能有一些等价物）。

iOS 对 libGDX 的支持实际上是[通过 C# 交叉编译器](http://www.badlogicgames.com/wordpress/?p=2450)(!!?) 完成的，因此您可以使用该步骤构建可能在 WP CLR 上运行的东西。不过，看起来[这并不容易](https://stackoverflow.com/questions/8786823/can-a-java-library-compiled-to-a-dll-be-used-in-developing-a-wp7-application)。应该可以使用（并且可能改进）其他工具将 libGDX 应用程序翻译/转换为 WP，但这样做可能需要大量工作。

# javascript - 用于创建和应用图层蒙版的 Photoshop JS 脚本

> ID：13842581
> 
> 赞同：5
> 
> 时间：2012-12-12T15:06:22.880
> 
> 标签：javascript, api, photoshop

我用 JS 编写了一个 Photoshop 脚本，它获取每个图层文件夹并像精灵表一样将其隔开。我已经弄清楚了那部分，但我试图在运行脚本时消除任何形式的人为错误。现在，您需要使用每个图层文件夹的正确命名来准备文件，并且您还必须将图层蒙版应用于选择。

我想消除用户应用图层蒙版的需要。我可以选择图层，然后选择我想要遮罩的部分，但我不知道如何应用或创建遮罩。

我希望它应用在哪里：

```
function maskIt(){
    if(currentFrameCount < (frameNumber-1)){
        currentFrameCount = currentFrameCount+1;
        currentFrame = ("frame"+currentFrameCount);
        activeDocument.layers[currentFrame].visable;
        activeDocument.selection.selectAll();
        //createMask();
        maskComplete = false;
    } else  if (currentFrameCount == (frameNumber-1)){
        currentFrameCount = currentFrameCount+1;
        currentFrame = ("frame"+currentFrameCount);
        activeDocument.layers[currentFrame].visable;
        activeDocument.selection.selectAll();
        //createMask();
        currentFrameCount = 0;
        maskComplete = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-10-16T20:42:39.620

这是一个更干净的版本，`try`添加了检查是否存在掩码。如果你想应用任何面具，只需移动`deleteLayerMask(true);`下面的行`catch (e) {}`

```
addMasks();

function addMasks(){

    try{
        loadLayerSelection();
        addLayerMask();
        deleteLayerMask(true);
        } catch (e) {}
};

// =======================================================
function loadLayerSelection() {
    var c2t = function (s) {
        return app.charIDToTypeID(s);
    };

    var s2t = function (s) {
        return app.stringIDToTypeID(s);
    };

    var descriptor = new ActionDescriptor();
    var reference = new ActionReference();
    var reference2 = new ActionReference();

    reference.putProperty( s2t( "channel" ), s2t( "selection" ));
    descriptor.putReference( c2t( "null" ), reference );
    reference2.putEnumerated( s2t( "channel" ), s2t( "channel" ), s2t( "transparencyEnum" ));
    descriptor.putReference( s2t( "to" ), reference2 );
    executeAction( s2t( "set" ), descriptor, DialogModes.NO );
}

// =======================================================
function addLayerMask() {
    var c2t = function (s) {
        return app.charIDToTypeID(s);
    };

    var s2t = function (s) {
        return app.stringIDToTypeID(s);
    };

    var descriptor = new ActionDescriptor();
    var reference = new ActionReference();

    descriptor.putClass( s2t( "new" ), s2t( "channel" ));
    reference.putEnumerated( s2t( "channel" ), s2t( "channel" ), s2t( "mask" ));
    descriptor.putReference( s2t( "at" ), reference );
    descriptor.putEnumerated( s2t( "using" ), c2t( "UsrM" ), s2t( "revealSelection" ));
    executeAction( s2t( "make" ), descriptor, DialogModes.NO );
}

// =======================================================
function deleteLayerMask(apply) {
    var c2t = function (s) {
        return app.charIDToTypeID(s);
    };

    var s2t = function (s) {
        return app.stringIDToTypeID(s);
    };

    var descriptor = new ActionDescriptor();
    var reference = new ActionReference();

    reference.putEnumerated( s2t( "channel" ), s2t( "channel" ), s2t( "mask" ));
    descriptor.putReference( c2t( "null" ), reference );
    descriptor.putBoolean( s2t( "apply" ), apply );
    executeAction( s2t( "delete" ), descriptor, DialogModes.NO );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:25:43.000

从 scriptlistener 整理的这两个函数应该可以帮助您：

```
// FUNCTION MAKE MASK ()
function makeMask()
{
  // =======================================================
  var id4556 = charIDToTypeID( "setd" );
  var desc983 = new ActionDescriptor();
  var id4557 = charIDToTypeID( "null" );
  var ref657 = new ActionReference();
  var id4558 = charIDToTypeID( "Chnl" );
  var id4559 = charIDToTypeID( "fsel" );
  ref657.putProperty( id4558, id4559 );
  desc983.putReference( id4557, ref657 );
  var id4560 = charIDToTypeID( "T   " );
  var ref658 = new ActionReference();
  var id4561 = charIDToTypeID( "Chnl" );
  var id4562 = charIDToTypeID( "Chnl" );
  var id4563 = charIDToTypeID( "Trsp" );
  ref658.putEnumerated( id4561, id4562, id4563 );
  desc983.putReference( id4560, ref658 );
  executeAction( id4556, desc983, DialogModes.NO );

  // =======================================================
  var id4564 = charIDToTypeID( "Mk  " );
  var desc984 = new ActionDescriptor();
  var id4565 = charIDToTypeID( "Nw  " );
  var id4566 = charIDToTypeID( "Chnl" );
  desc984.putClass( id4565, id4566 );
  var id4567 = charIDToTypeID( "At  " );
  var ref659 = new ActionReference();
  var id4568 = charIDToTypeID( "Chnl" );
  var id4569 = charIDToTypeID( "Chnl" );
  var id4570 = charIDToTypeID( "Msk " );
  ref659.putEnumerated( id4568, id4569, id4570 );
  desc984.putReference( id4567, ref659 );
  var id4571 = charIDToTypeID( "Usng" );
  var id4572 = charIDToTypeID( "UsrM" );
  var id4573 = charIDToTypeID( "RvlS" );
  desc984.putEnumerated( id4571, id4572, id4573 );
  executeAction( id4564, desc984, DialogModes.NO );
}

// FUNCTION APPLY LAYER MASK()
function applyLayerMask()
{
  // =======================================================
  var id1949 = charIDToTypeID( "Dlt " );
  var desc398 = new ActionDescriptor();
  var id1950 = charIDToTypeID( "null" );
  var ref291 = new ActionReference();
  var id1951 = charIDToTypeID( "Chnl" );
  var id1952 = charIDToTypeID( "Chnl" );
  var id1953 = charIDToTypeID( "Msk " );
  ref291.putEnumerated( id1951, id1952, id1953 );
  desc398.putReference( id1950, ref291 );
  var id1954 = charIDToTypeID( "Aply" );
  desc398.putBoolean( id1954, true );
  executeAction( id1949, desc398, DialogModes.NO );
} 
```

如果您试图排除用户错误，您可能需要第三个函数来检测图层是否打开了蒙版（选择该图层，尝试复制并粘贴图层蒙版；如果没有粘贴 - 否图层蒙版）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-02-27T08:28:34.280

将蒙版（剪辑和/或图层）应用到当前选定对象的更简洁的方法：

```
// Clipping Mask
const applyClippingMask = function () {
    // Grab the needed IDs
    const groupEventID = stringIDToTypeID('groupEvent')
    const nullID = stringIDToTypeID('null')
    const layerID = stringIDToTypeID('layer')
    const ordinalID = stringIDToTypeID('ordinal')
    const targetEnumID = stringIDToTypeID('targetEnum')

    // Prep the action
    const actionDesc = new ActionDescriptor()
    const actionRef = new ActionReference()

    // Prep the mask
    actionRef.putEnumerated(layerID, ordinalID, targetEnumID)
    actionDesc.putReference(nullID, actionRef)

    // Apply the mask
    executeAction(groupEventID, actionDesc, DialogModes.NO)
}

// Layer mask from selection
const applyLayerMask = function () {
    // Required internal IDs
    const makeID = stringIDToTypeID('make')
    const newID = stringIDToTypeID('new')
    const channelID = stringIDToTypeID('channel')
    const atID = stringIDToTypeID('at')
    const usingID = stringIDToTypeID('using')
    const userMaskEnabledID = stringIDToTypeID('userMaskEnabled')
    const revealSelectionID = stringIDToTypeID('revealSelection')

    // Prep the action
    const actionDesc = new ActionDescriptor()
    const actionRef = new ActionReference()

    // Setup the mask
    actionDesc.putClass(newID, channelID)
    actionRef.putEnumerated(channelID, channelID, maskID)
    actionDesc.putReference(atID, actionRef)
    actionDesc.putEnumerated(usingID, userMaskEnabledID, revealSelectionID)

    // Apply the mask
    executeAction(makeID, actionDesc, DialogModes.NO)
} 
```

**根据 Sergey 的评论，**编辑为包括剪辑和图层蒙版功能****

 **在 Photoshop CC 2021 中工作**

# r - 根据向量中的计数重复矩阵的元素

> ID：13842584
> 
> 赞同：0
> 
> 时间：2012-12-12T15:06:33.053
> 
> 标签：r, vector, matrix

我有两个数据框 (df)，它们共享一个名为`plot.id`. 在第一个 df 中，`plot.id`记录根据每个地块内监测的树木数量重复可变次数。第二个 df 每个只有一个记录`plot.id`，并且包含一个名为的变量，该变量`load`在绘图级别（而不是像第一个 df 中的树级别）收集，因此每个绘图记录仅列出一次。

目标：我需要根据第一个 df 中重复的`load`次数来重复第二个 df 的值`plot.id`（所有图都重复不同的次数）。我的示例dfs如下：

```
 df1 <- data.frame(plot.id = rep(c("plot1", "plot2", "plot3"), c(3,2,5)),
             tree.tag = c(111,112,113,222,223,333,334,335,336,337)) 

 df2 <- data.frame(plot.id = c("plot1", "plot2", "plot3"), load=c(17, 6, 24)) 
```

我已经接近解决这个问题了，但可惜我在解决问题的第 2 天，无法解决！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T14:35:26.873

使用`match`：

```
df2[match(df1$plot.id,df2$plot.id),] 
```

上面的结果是：

```
 plot.id load
1     plot1   17
1.1   plot1   17
1.2   plot1   17
2     plot2    6
2.1   plot2    6
3     plot3   24
3.1   plot3   24
3.2   plot3   24
3.3   plot3   24
3.4   plot3   24 
```

# c# - WPF - 在单元测试中引发 KeyEvent 触发器不起作用

> ID：13842588
> 
> 赞同：4
> 
> 时间：2012-12-12T15:06:42.863
> 
> 标签：c#, wpf, unit-testing, controls, keyevent

我想在单元测试中提出一个关键事件。当一个键被按下时，TextBox 应该在它的 text 属性中包含被按下的键。

这是一个使用 Xunit 的最小工作示例：

```
[TemplatePart(Name = Field0Name, Type = typeof(TextBox))]
class MyControl : Control
{
    public const string Field0Name = "Field0";
}

public class MyControlTests
{
    private MyControl control;
    public MyControlTests()
    {
        MemoryStream ms = new MemoryStream();
        StreamWriter sw = new StreamWriter(ms);
        sw.Write(@"<ControlTemplate xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'>
                        <Grid>
                            <TextBox Name='Field0'/>
                        </Grid>
                    </ControlTemplate>");
        sw.Flush();
        ms.Position = 0;

        control = new MyControl() { Template = (ControlTemplate)XamlReader.Load(ms) };
        control.ApplyTemplate();
    }

    [Fact]
    public void Field0Name_PreviewKeyDownEvent_WriteLetter()
    {
        TextBox tb = (TextBox)control.Template.FindName(MyControl.Field0Name, control);
        FocusManager.SetFocusedElement(control, tb);

        tb.RaiseEvent(new KeyEventArgs(Keyboard.PrimaryDevice, new FakePresentationSource(), Environment.TickCount, Key.A)
        {
            RoutedEvent = TextBox.PreviewKeyDownEvent
        });

        Assert.Equal("a", tb.Text);
    }
}

public class FakePresentationSource : PresentationSource
{
    protected override CompositionTarget GetCompositionTargetCore()
    {
        return null;
    }

    public override Visual RootVisual { get; set; }

    public override bool IsDisposed { get { return false; } }
} 
```

**通用的.xaml**

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:TextBoxRaiseEventProject">
<Style TargetType="{x:Type local:MyControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:MyControl}">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <Grid>
                        <TextBox x:Name="Field0"/>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

测试报告：

![测试报告](../Images/42ace0ab70d6477509674e240d293c52.png)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-06-13T19:37:53.837

此回复不是您希望或可能一直期待您的问题。然而我认为它是正确的，我希望你在阅读它之后重新考虑你的单元测试方法。

我认为在单元测试中调用按钮不是对功能进行单元测试的最佳方法。这是 MVVM、MVC、MVP 等模式的原因之一。您希望创建一个与 UI 使用分离的可测试类。（我很抱歉，因为我不想让它听起来像一个讲座）。

因此，在您的示例中，我要做的是创建一个命令，将其绑定到按钮以供使用，然后通过调用将触发一些可测试组件/部件的命令来建立我的单元测试。

```
<Button Command="{Binding PushButtonCommand}"..

some class MyClass
{
    public ICommand PushButtonCommand
    {
        get
        {
           return _pushButtonCommand ??
                (_pushButtonCommand = new DelegateCommand(ExecutePushButton));
        }
     }

    private void ExecutePushButton()
    {
         //lets pretend it sets some property that you need to test;
         NeedBacon = true;   
    } 
```

现在这是可测试的。在创建类后的单元测试中，触发命令并检查属性：

```
Assert.IsFalse(myClassInstance.NeedBacon);
((DelegateCommand)myClassInstance.PushButtonCommand).Execute(null);
Assert.IsTrue(myClassInstance.NeedBacon); 
```

# linux - 有没有办法告诉 sed 忽略符号链接？

> ID：13842589
> 
> 赞同：5
> 
> 时间：2012-12-12T15:06:48.387
> 
> 标签：linux, bash, shell, unix, command-line

我有一个目录 A，其中包含一堆`.xml`扩展名为的文件，我需要在这些文件上运行搜索和替换。A中有几个符号链接（也带有`.xml`扩展名）链接到A中的某些文件。我尝试运行`sed -i 's/search_regexp/replacement_string/' *.xml`但是当它遇到符号链接时它失败了

```
 sed: ck_follow_symlink: couldn't lstat file.xml: No such file or directory 
```

一个解决方案是循环我实际想要修改的文件并在每个文件上调用 sed，但是有没有办法告诉 sed 忽略符号链接？或者只是跟随他们并修改链接的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:25:50.167

@piokuc 已经命名了以下符号链接的选项，这是您可以`find`先忽略它们的方法：

```
find /path/to/dir/ -type f -name "*.xml" ! -type l -exec sed -i 's/search_regexp/replacement_string/' {} \; 
```

或者，稍微更有效：

```
find /path/to/dir/ -type f -name "*.xml" ! -type l | xargs sed -i 's/search_regexp/replacement_string/' 
```

该`! -type l`部分的意思是“不是任何符号链接”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:10:55.213

有一个选项（`man sed`）：

```
 --follow-symlinks

          follow symlinks when processing in place 
```

我使用的 sed 版本是 4.1.5：

```
ariadne{/tmp}:310 --> sed --help | grep follow
  --follow-symlinks
                 follow symlinks when processing in place
ariadne{/tmp}:311 --> sed --version           
GNU sed version 4.1.5
Copyright (C) 2003 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE,
to the extent permitted by law.
ariadne{/tmp}:312 --> uname -a
Linux ariadne 2.6.34.10-0.6-desktop #1 SMP PREEMPT 2011-12-13 18:27:38 +0100 x86_64 x86_64 x86_64 GNU/Linux
ariadne{/tmp}:313 --> 
```

# activemq - activemq 中 maxPageSize 和 Prefetch 限制的区别

> ID：13842591
> 
> 赞同：0
> 
> 时间：2012-12-12T15:06:50.417
> 
> 标签：activemq

谁能告诉我 maxPageSize 和预取限制之间的区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:15:18.817

maxPageSize：根据 apache 网站一次从存储到页面的最大持久消息数。这是消息存储在持久存储（如 kahadb）中的时候。您已经引用了存储在数据库中的消息。此 maxPageSize 限制您可以拥有的消息的引用数量。您有这个参考可以更快地访问数据库（比如在数据库中有一个可以提高性能的索引）

Prefetch Limit：与向消费者发送消息的数量以提高性能有关。如果您将预取限制设置为 0，则意味着消费者将继续从队列中轮询消息，但是如果您将其设置为 100，那么 activemq 将提前向消费者发送 100 条消息（预取给消费者）以进行处理，这将消除额外的工作，否则必须由消费者检查队列中的任何消息。

# c# - C# windows 应用程序可以在基于 windows 8 的平板电脑上运行吗？

> ID：13842592
> 
> 赞同：1
> 
> 时间：2012-12-12T15:06:55.490
> 
> 标签：c#, windows-8, tablet

最近，我被要求从事一个为一家养鸟公司开发的项目。
客户问我是否可以使正在用 C# 开发的应用程序在平板电脑上工作。
所以我想知道我是否可以正常完成c#中的应用程序我是否能够：
1.使用`mono for android`并编译整个项目并轻松获得一个用于android设备的android应用程序？
2.在Windows 8平板电脑上使用可执行项目而不做任何更改？
如果有人能回答这两个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:10:03.663

这取决于您正在谈论的平板电脑。

*   在 Surface 等 Windows RT（基于 ARM）平板电脑上，仅支持 Metro 应用程序。有一些桌面应用程序，但只有 Microsoft 可以制作它们。因此，如果您的应用是桌面应用，它将无法在 Surface RT 上运行。
*   在装有“真正的”Windows 8（基于 x86，例如 Surface Pro）的平板电脑上，您可以运行与在 PC 上相同的应用程序。

# drupal-7 - 使用链接更改主题

> ID：13842596
> 
> 赞同：0
> 
> 时间：2012-12-12T15:07:16.730
> 
> 标签：drupal-7, themes

也许有人可以告诉我在 Drupal 7 中是否可以使用单个链接更改主题（URL 应该显示应该更改为哪个主题站点外观）？

在最坏的情况下，是否可以仅使用链接在两个活动主题之间切换？

# php - 如何将 PHP 或 Javascript 代码添加到自定义内容类型

> ID：13842597
> 
> 赞同：0
> 
> 时间：2012-12-12T15:07:20.467
> 
> 标签：php, javascript, drupal, drupal-7

我正在使用 Drupal 7.17。

我创建了一个名为 Sidebar Ad（机器名称 sidebar_ad）的自定义内容类型，我想将 Javascript 和 PHP 添加到其中。据我了解，在我正在使用的主题的模板目录中，我需要创建一个名为“page--sidebar_ad.tpl.php”的文件，我可以将 PHP 和 Javascript 代码放在那里，它只会运行在包含自定义内容类型侧边栏广告的块和页面中。

我正在尝试使用其中一个股票主题 Bartik，但它对我不起作用。我尝试复制 page.tpl.php 文件，将其重命名为 page--sidebar_ad.tpl.php，并在几个地方添加一些文本 - 在 php 文件的顶部和内容 div 中。但我没有看到我网站上包含该自定义内容类型的页面有任何变化。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:29:55.240

您最有可能缺少的是刷新 Drupal 的缓存...任何时候添加挂钩或模板文件，您都需要刷新缓存，以便各个注册表可以获取它。

在覆盖页面模板文件的情况下，您还需要主题中标准 page.tpl.php 文件的副本。节点模板和最有可能的其他模板也是如此，您需要其中的原始模板才能使覆盖工作。

# c# - 在 Windows 8 Metro 中禁用应用程序休眠

> ID：13842599
> 
> 赞同：2
> 
> 时间：2012-12-12T15:07:25.663
> 
> 标签：c#, windows, windows-8, microsoft-metro

我正在开发一个显示视频的应用程序，并且在播放视频时遇到了机器在达到睡眠时间限制后进入睡眠状态的问题。有没有办法在 Windows 8 Metro 应用程序中禁用此行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:23:04.603

为此，您应该使用[DisplayRequest](http://msdn.microsoft.com/en-us/library/windows/apps/br241816.aspx)类，特别是[DisplayRequest.RequestActive 。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.display.displayrequest.requestactive.aspx)您还必须记住在完成后调用 DisplayRequest.RequestRelease 以允许显示器进入睡眠状态，例如，如果您没有在播放电影或在菜单屏幕中等。

# linux - 调度操作 bash

> ID：13842606
> 
> 赞同：0
> 
> 时间：2012-12-12T15:07:53.867
> 
> 标签：linux, bash, sleep

我需要每小时计算 N 次操作（相同的操作）。

目前我有我的操作，但我无法理解每小时执行 N 次：

```
 #!/bin/bash
 N=10; 
 # my operation
 sleep 3600/${N} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:34:44.297

好吧，按照你现在写的方式，它只会执行一次“我的操作”，之后它会休眠 6 分钟，然后退出。您需要的是围绕这两条线的循环结构。`bash`支持几种不同的循环结构，但这种情况下最简单的可能是：

```
#!/bin/bash
N=10
((delay=3600/N))
while true
do
  # do something
  sleep ${delay}
done 
```

当然，在这种情况下没有终止循环的规定，所以你必须用`^C`or`kill`或其他东西退出。如果您只希望它运行一定次数，则可以改用`for`循环，或者您可以让它在每次迭代时检查某个文件的 [不] 存在，并在创建或删除该文件时退出循环. 最合适的方法取决于你真正想做的事情的大局。

# powershell - 如何传递凭据来重命名命令？

> ID：13842611
> 
> 赞同：1
> 
> 时间：2012-12-12T15:07:59.230
> 
> 标签：powershell

我在 PowerShell 脚本中运行以下命令来简单地重命名计算机。该脚本将由计算机启动脚本 GPO 执行，因此我需要在命令中传递凭据。因为如果脚本在启动时执行，我看不到它发生了什么我正在以普通用户身份登录时运行脚本来测试它

```
(Get-WmiObject win32_computersystem).Rename( $NewName,'Password','domain\username') 
```

该命令返回“5”的 ReturnValue - 拒绝访问。如何传递用户名和密码？（我了解脚本中密码的安全风险）

```
__GENUS          : 2
__CLASS          : __PARAMETERS
__SUPERCLASS     : 
__DYNASTY        : __PARAMETERS
__RELPATH        : 
__PROPERTY_COUNT : 1
__DERIVATION     : {}
__SERVER         : 
__NAMESPACE      : 
__PATH           : 
ReturnValue      : 5
PSComputerName   : 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T16:24:37.273

如果您总是在同一台机器上运行它或关联的帐户漫游，那么 IIRC 您可以依靠 DPAPI 来存储密钥，如下所示：

```
# Capture once and store to file
$passwd = Read-Host "Enter password" -AsSecureString
$encpwd = ConvertFrom-SecureString $passwd
$encpwd
$encpwd > $path\password.bin

# Later pull this in and restore to a secure string
$encpwd = Get-Content $path\password.bin
$passwd = ConvertTo-SecureString $encpwd

# Extract a plain text password from secure string
$bstr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($passwd)
$str =  [System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($bstr)
[System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($bstr)
$str 
```

如果这不起作用，您可以使用这种方法，但它不如上述方法安全：

```
$key = 1..32 | ForEach-Object { Get-Random -Maximum 256 }
$passwd = Read-Host "Enter password" -AsSecureString
$encpwd = ConvertFrom-SecureString $passwd -Key $key
$encpwd

# Could easily modify this to store username also
$record = new-object psobject -Property @{Key = $key; EncryptedPassword = $encpwd}
$record
$record | Export-Clixml $path\portablePassword.bin

# Later pull this in and restore to a secure string
$record = Import-Clixml $path\portablePassword.bin
$passwd = ConvertTo-SecureString $record.EncryptedPassword -Key $record.Key

# Extract a plain text password from secure string
$bstr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($passwd)
$str =  [System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($bstr)
[System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($bstr)
$str 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:29:49.890

[在这里](http://www.hofferle.com/rename-computers-with-powershell/)找到以下内容：

```
$credential = Get-Credential
Get-WmiObject Win32_ComputerSystem -ComputerName OLDNAME -Authentication 6 |
ForEach-Object {$_.Rename("NEWNAME",$credential.GetNetworkCredential().Password,$credential.Username)} 
```

看起来您需要设置身份验证级别才能传递凭据（可以选择使用 Get-Credential CMDLet）。恐怕我目前没有可用的盒子来测试它。

# php - 需要有关从表单更新数据库的建议

> ID：13842613
> 
> 赞同：0
> 
> 时间：2012-12-12T15:08:04.447
> 
> 标签：php, html, css, forms

我不知道如何表达这个问题，因为我真的不知道我到底要问什么。基本上，我建立了一个小型销售门户，将信息放入数据库，然后以各种方式将其吐出。有时需要更新记录，但我需要一种方法从显示记录的网页更新它们（无需转到完全不同的页面），这样销售人员就不必进入数据库来更改记录。我知道如何在 PHP 中使用 UPDATE 功能，我想做的是在每一行的末尾有一个“编辑”按钮，并在单击按钮时让信息变得可更改。我需要用什么编程语言来做到这一点？该代码将如何构建？我真的只熟悉 PHP、HTML 和 CSS。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:28:16.137

您将需要 javascript 来按照您提到的方式处理表单字段。

*   每个记录行都将具有原始值和隐藏输入
*   Javascript 将隐藏原始值并显示输入
*   您可以在每个记录行的末尾有一个保存按钮或一个主“保存所有”按钮”。在每条记录的末尾有多个会更容易，但从用户的角度来看可能有点麻烦。

使用 AJAX 将更新的数据发送到服务器 - 这应该在“保存记录”javascript 函数中处理。

然后，您将需要 PHP 或其他一些服务器端语言来实际更新记录。

# perl - DateTime、DBIx::Class 和 SQLite 的时区问题（请假 5 小时）

> ID：13842614
> 
> 赞同：1
> 
> 时间：2012-12-12T15:08:08.717
> 
> 标签：perl, sqlite, datetime, timezone, dbix-class

我正在使用生成的 DBIx::Class 模式`dbcidump`来进行插入和查询。

最近，我发现我所有的时间都比我们的当地时间（EST）提前了 5 小时。

在我的`Result`课堂上，我有`__PACKAGE__->load_components("InflateColumn::DateTime")`，其中列定义为`"action_time", { data_type => "datetime", is_nullable => 0}`...

有没有一种简单的方法可以让我控制时区`DateTime`对象被膨胀/放气，以便我的查询和插入保持一致？

我已经尝试添加`time_zone => 'local'`到列定义中，但这没有什么区别。

例如：

*   **插入**2012-12-12 10:04:03
*   **检索**2012-12-12 15:04:03

样本数据：

```
sqlite> select datetime(action_time,'localtime'),action_time from actions order by id desc limit 3;
2012-12-12 08:35:07|2012-12-12 13:35:07
2012-12-12 08:34:45|2012-12-12 13:34:45
2012-12-12 08:34:43|2012-12-12 13:34:43 
```

**编辑：**我相信这与我的使用有关： [http](http://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/ResultClass/HashRefInflator.pm) ://search.cpan.org/dist/DBIx-Class/lib/DBIx/Class/ResultClass/HashRefInflator.pm ；来自文档：

> 不执行列值膨胀，例如，使用像 DBIx::Class::InflateColumn::DateTime 这样的模块。返回的哈希包含原始数据库值。

因此，我想知道如何让该类为日期时间字段做一些特别的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:29:54.587

您的时区可能是`America/New_York`，与`-0500`("EST") 不同，它遵循 DST。

出于这个原因，它不是一个适合存储的时区。每年有 120 分钟在这个时区的时间戳会不明确。因此，时间戳实际上存储在 UTC 中是有道理的。

如果您要使用[DBIx::Class::InflateColumn::DateTime](http://search.cpan.org/perldoc?DBIx%3a%3aClass%3a%3aInflateColumn%3a%3aDateTime)或者如果您从时间戳显式创建 DateTime 对象，则可以将这些时间戳转换为您的时区或任何其他时区。

您可以在使用模式生成器时指定一个选项，该选项将导致使用此模块（`-o components='["InflateColumn::DateTime"]'`for `dbicdump`）。

# c# - 当我使用 using 对象时，我应该在退出 using 块之前处理该对象吗？

> ID：13842625
> 
> 赞同：2
> 
> 时间：2012-12-12T15:08:34.823
> 
> 标签：c#, .net

当我在对象上使用 using 子句时，我应该在退出 using 块之前处理该对象吗？

```
 using (var transaction = TransactionUtils.CreateTransactionScope())
            {
                try
                {
                    _entity.Save(entity);
                    transaction.Complete();
                }
                catch // or better finally
                {
                    transaction.Dispose(); // Is this try-catch usefull?
                    throw;
                }
            } 
```

注意： 已经提出了[类似的问题，但我发现示例和答案很奇怪。](https://stackoverflow.com/q/2313196/196526)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:10:23.533

退出 using 块时，您的交易将自动处理。

这就像一个 try-finally 块一样在引擎盖下工作。

因此无需从您的代码中处理交易手册

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:12:45.670

配置对象是多余的。

```
using (ResourceType resource = CreateResource())
{
    DoStuffWith(resource);
} 
```

相当于

```
ResourceType resource = CreateResource();

try
{
    DoStuffWith(resource);
}
finally
{    
    if (resource != null)
    {
        ((IDisposable)resource).Dispose();
    }
} 
```

对于不可为空的值类型，空检查被省略，`dynamic`处理方式也略有不同。有关更多详细信息，请参阅[C# 语言规范](http://go.microsoft.com/fwlink/?LinkId=199552)中的 8.13 。

# objective-c - 实例变量和位域

> ID：13842626
> 
> 赞同：0
> 
> 时间：2012-12-12T15:08:37.520
> 
> 标签：objective-c, instance, bit, bit-fields, ivar

我试图在 Objective-C 中做一个 1 位的实例字段，但是当我尝试这个时，`@property BYTE Z : 1;`我得到一个错误，说`Property name cannot be a bitfield`.

我不能这样做吗？是否有解决此错误的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:34:25.647

大多数机器的最小可分配内存单元是 1 字节。没有办法分配 1 位，它可能不可映射。它必须包含所有 ASCII 字符。
所以只需使用一个字节然后读取位掩码。

使用类似的东西：

```
@property (nonatomic) Byte byte; 
```

然后使用宏进行阅读：

```
#define BitAtIndex(byte,index) (byte & (1<<index))!=0 
```

PS：当然指数不能大于7。

# .net - 在 Visual Studio Report Services 中加入两个数据集

> ID：13842628
> 
> 赞同：1
> 
> 时间：2012-12-12T15:08:45.097
> 
> 标签：.net, sql, ms-access, reporting-services

我正在寻找基于公共字段将访问数据库加入到不同的访问数据库。有什么方法可以在 sql 查询中做到这一点？

```
accessdatabase1.commonfield to  accessdatabase2.commonfield 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:18:55.897

从您的评论中，您提到您想在 上执行此操作`SQL`，

```
SELECT  a.*, b.*
FROM    tableA a
        INNER JOIN tableB b
           ON a.commonfield = b.commonfield 
```

*   [连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# android - 将字符串 unicode 发送到 servlet

> ID：13842630
> 
> 赞同：2
> 
> 时间：2012-12-12T15:09:01.133
> 
> 标签：android, unicode

请帮我。将 unicode 发布到 servlet 时出现问题。虽然我尝试了很多方法。我从android发送一个请求：

```
HttpPost httppost = new HttpPost(Constants.ADD_REPORT_URL);
DefaultHttpClient httpClient = new DefaultHttpClient();
MultipartEntity entity = new MultipartEntity(
            HttpMultipartMode.BROWSER_COMPATIBLE, "text/html",
            Charset.forName("UTF-8"));
// this.profile.userId));
entity.addPart(User.TOKEN,new StringBody("unicode over here"));
...
httppost.setEntity(entity); 
```

并在 servlet

```
request.setCharacterEncoding("UTF-8");
    response.setCharacterEncoding("UTF-8");
    response.setContentType("text/html; charset=UTF-8");
    PrintWriter writer = response.getWriter();
    boolean isMultipart = ServletFileUpload.isMultipartContent(request);
    Map<String, String> map = new HashMap<String, String>();
    String linkImage = "";
    if (!isMultipart) {
        System.out.println("File Not Uploaded");
    } else {
        System.err.println("A file is ready to upload");
        FileItemFactory factory = new DiskFileItemFactory();
        ServletFileUpload upload = new ServletFileUpload(factory);
        List items = null;
        try {
            items = upload.parseRequest(request);
            // System.out.println("items: " + items);
        } catch (FileUploadException e) {
            e.printStackTrace();
        }
        Iterator itr = items.iterator();
        while (itr.hasNext()) {
            FileItem item = (FileItem) itr.next();
            // part is text form
            if (item.isFormField()) {
                System.out.println("content type:" + item.getContentType());
                String name = item.getFieldName();
                System.out.println("name: " + name); 
```

但打印字符串`"362 Cu Giy, Dch Vng, Cu Giy,"`

# objective-c - 如何以数字格式获取月份中的日期？

> ID：13842631
> 
> 赞同：0
> 
> 时间：2012-12-12T15:09:03.053
> 
> 标签：objective-c, ios, date, nsdateformatter

我要查找的是月份中的哪一天，例如 2、5、30 或 31。以整数形式，而不是字符串。我不是在寻找预定的日期，而是在他们所在的任何地方寻找今天的日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:45:58.103

以上所有答案都是实现此目的的不好方法。这是正确的方法：

```
NSDate *date = [NSDate date];
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [calendar components:NSDayCalendarUnit fromDate:date];
NSInteger day = components.day; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:13:34.383

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"d"];
NSInteger day = [[dateFormat stringFromDate:[NSDate date]] intValue]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:10:48.173

从 an 开始，`NSDate`然后通过`NSDateFormatter`.

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:12:59.977

这是可能有用的东西：

```
NSDate *theDate;

// Set theDate to the date you want
// For example, theDate = [NSDate date]; to get today's date

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"d";
NSString *theDayString = [formatter stringFromDate:theDate];
int theDay = theDayString.intValue;

NSLog (@"%d", theDay); 
```

`theDay`包含您要查找的值！

# python - 如果包含换行符，正则表达式将失败

> ID：13842633
> 
> 赞同：1
> 
> 时间：2012-12-12T15:09:07.233
> 
> 标签：python

我正在尝试从用 # 字符分隔的字符串中提取一个简单的句子。

```
str = "#text text text \n text#" 
```

用这种模式

```
pattern = '#(.+)#' 
```

现在，有趣的是当字符串包含换行符时，正则表达式不匹配

```
out = re.findall(pattern, str) # out contains empty [] 
```

但是如果我从字符串中删除 \n 它工作正常。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T15:10:55.987

还通过[`re.DOTALL`](http://docs.python.org/2/library/re.html#re.DOTALL)标志，这使得`.`比赛真正的一切。

> 制作“。” 特殊字符完全匹配任何字符，包括换行符；没有这个标志，'.' 将匹配除换行符以外的任何内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T15:11:05.397

`re.DOTALL`如果您还希望`.`匹配，请使用`newline`：-

```
>>> out = re.findall('#(.+)#', my_str, re.DOTALL)
>>> out
['text text text \n text'] 
```

此外，使用内置名称作为变量名也不是一个好主意。使用`my_str`而不是`str`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T15:11:06.830

试试这个正则表达式`"#([^#]+)#"`

它将匹配分隔符之间的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:10:50.137

将[`DOTALL`](http://docs.python.org/2/library/re.html#re.DOTALL)标志添加到您的编译或匹配中。

# spring - Spring MVC - 字符串的集合

> ID：13842635
> 
> 赞同：1
> 
> 时间：2012-12-12T15:09:10.223
> 
> 标签：spring, spring-mvc, spring-security, spring-roo, spring-webflow

我想要一个包含字符串值集合的实体，它存储可以是字母数字的收据编号，因此需要存储字符串。如何使用 spring roo 将这样的字段添加到实体中？

我试过了

`field set --fieldName controlNumbers --type java.lang.String --class ~.model.Receipt` 但是在项目中找不到关于指定类型的错误，我需要先创建它。

然后我尝试将下面的代码直接注入实体并保存它并更新了aj文件。但是，当我运行 tomcat 时，这也有问题。

```
 private Set<String> controlNumbers = new HashSet<String>(); 
```

还看到有人这样做

```
@org.hibernate.annotations.CollectionOfElements
private Set<String> controlNumbers = new HashSet<String>(); 
```

但是你猜怎么着，CollectionOfElements 已被弃用。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:25:45.390

我最近不得不实现类似的东西，虽然我没有使用 spring roo，但我的实体需要存储一个 Map 并且我的实体中的以下内容起到了作用：

```
@ElementCollection(fetch = FetchType.EAGER)
@MapKeyColumn(name = "CONFIG_KEY")
@Column(name = "CONFIG_VALUE")
@CollectionTable(name = "CONFIG_MAPPING")
private Map<String, String> configAttributes; 
```

不确定这是否会有所帮助，但我想我会分享

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:42:13.707

你不应该指定 --class

如果您希望实体的 controlNumbers 字段是字符串的集合，请不要将 --class 指定为 Receipt，只需将 --type 保留为 java.lang.String。如果您希望它是 Receipts 的集合，则不要指定 java.lang.String。

此外，您的 Receipt 实体必须已经存在才能正常工作。您不能引用尚不存在的类型。

一旦你的 ~.model.Receipt 对象存在，你应该能够运行：

字段集 --fieldName controlNumbers --type ~.model.Receipt

有关更多示例，请参阅[http://static.springsource.org/spring-roo/reference/html-single/#command-index-field-set](http://static.springsource.org/spring-roo/reference/html-single/#command-index-field-set) 。

# entity-framework - EF 错误 - 无法更新 EntitySet，因为它有一个 DefiningQuery

> ID：13842637
> 
> 赞同：0
> 
> 时间：2012-12-12T15:09:12.117
> 
> 标签：entity-framework

我从表中删除了 PrimaryKey，刷新了 EDMX，现在在执行 db.SaveChanges() 时收到此错误消息：

**无法更新 EntitySet 'Results'，因为它有一个 DefiningQuery 并且元素中不存在支持当前操作的元素。**

现在... 1 - 我不想在我的表中使用 PrimaryKey。该表只是一袋值，不需要PK。2 - 我阅读了另一篇文章，其中有人建议从 EF 生成的 EDMX 中删除 DefiningQuery 元素。它不起作用，我避免手动更改自动生成的 EDMX。

知道如何避免这个错误，而不是在我的表中定义 PK 吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:03:54.527

在实体框架中，一切都必须有一个键，至少在模型中是这样。您可以从数据库中删除它，但您仍然必须在模型中定义一个键，这可能是一个复合键以确保它是唯一的。否则 EF 将无法正确实现或保存对象。

但是，无论如何我都会在表中使用主键。里面有一个标识字段一点也不麻烦，而且您不必担心自己找到一个唯一的字段组合。我无法想象该表不需要某种身份概念，或者它真的可以有两个完全相同的行吗？

# razor - MVC4 Razor 自定义视图定位器

> ID：13842638
> 
> 赞同：3
> 
> 时间：2012-12-12T15:09:16.767
> 
> 标签：razor, asp.net-mvc-4

我正在开发一个旨在为两个域提供服务的 MVC4 应用程序。我们的大部分内容将跨域共享，但有时我们需要根据请求来自哪个站点来呈现不同的标记（使用 Razor）。

理想情况下，我想要一种基于约定的方法，它允许我拥有这样的文件夹结构：

```
Views
+ Domain1
    + ControllerName
        View1
        View2
+ Domain2
    + ControllerName
        View1
+ ControllerName
   View1
   View2 
```

解析视图时，我想先检查特定于域的文件夹，然后再检查常规视图文件夹。

我的第一个想法是实现一个继承 RazorViewEngine 的自定义视图引擎，该引擎将根据请求域交换 ViewLocationFormats 字符串。不幸的是，所有这些东西都隐藏在 VirtualPathProviderEngine 中，无法被覆盖。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T16:40:08.433

事实证明，答案是为每个知道域特定文件夹的域创建一个自定义视图引擎（继承自 RazorViewEngine）：

```
public class Domain1ViewEngine() : RazorViewEngine
{
        ...

        ViewLocationFormats = new[]
        {
            "~/Views/Domain1/{1}/{0}.cshtml",
            "~/Views/Domain1/Shared/{0}.cshtml"
        };

        ...
} 
```

然后我需要重写`FindView`and`FindPartialView`方法，以便它仅在请求来自正确的域时才尝试查找定位视图：

```
public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
{
    if ([THIS IS NOT THE RIGHT DOMAIN]) 
    {
        return new ViewEngineResult(new string[] { });
    }

    return base.FindView(controllerContext, viewName, masterName, useCache);
} 
```

为了完成这个过程，我`Global.asax.cs`以通常的方式注册了视图引擎：

```
protected void Application_Start()
{
    ViewEngines.Engines.Clear();
    ViewEngines.Engines.Add(new Domain1ViewEngine());
    ViewEngines.Engines.Add(new RazorViewEngine());
} 
```

# python - python抓取汇率数据

> ID：13842642
> 
> 赞同：1
> 
> 时间：2012-12-12T15:09:28.980
> 
> 标签：python, python-2.7

[朋友使用的应用程序取决于特定站点链接到汇率来源的](http://bog.gov.gh/data/bankindrate.php)每日汇率数据

问题是利率改变时没有设定时间，这会影响业务，因为有时当利率改变时，她可能会出局，所以在他回来之前，发生的任何交易都将使用最后输入的利率。有时她赢了，有时她输了。我正在尝试创建一个自动客户端，它将独立地为她抓取和更新汇率。

到目前为止，我已经能够将网站的内容剥离到一个列表中：

```
[
<td style="text-align: left;">U.S Dollar</td>,
<td>USDGHS</td>, <td>1.8673</td>, <td>1.8994</td>,
<td style="text-align: left;">Pound Sterling</td>,
<td>GBPGHS</td>, <td>3.0081</td>, <td>3.0599</td>,
<td style="text-align: left;">Swiss Franc</td>,
<td>CHFGHS</td>, <td>2.0034</td>, <td>2.0375</td>,
<td style="text-align: left;">Australian Dollar</td>,
<td>AUDGHS</td>, <td>1.9667</td>, <td>2.0009</td>,
<td style="text-align: left;">Canadian Dollar</td>,
<td>CADGHS</td>, <td>1.8936</td>, <td>1.9259</td>,
<td style="text-align: left;">Danish Kroner</td>,
<td>DKKGHS</td>, <td>0.3255</td>, <td>0.3311</td>,
<td style="text-align: left;">Japanese Yen</td>,
<td>JPYGHS</td>, <td>0.0226</td>, <td>0.0230</td>,
<td style="text-align: left;">New Zealand Dollar</td>,
<td>NZDGHS</td>, <td>1.5690</td>, <td>1.5964</td>,
<td style="text-align: left;">Norwegian Kroner</td>,
<td>NOKGHS</td>, <td>0.3307</td>, <td>0.3363</td>] 
```

我现在正在努力创建这样的字典

```
{USDGHS: [1.8673, 1.8994], GBPGHS: [3.0081, 3.0599], ...} 
```

然后，我将使用字典来更新数据库中的相应表。

我通过使用 beautifulsoup4 和 urllib2 到了这个阶段

[编辑]

让我走到这一步的代码

```
from bs4 import BeautifulSoup
import urllib2

url = "http://bog.gov.gh/data/bankindrate.php"
page = urllib2.urlopen(url)

soup = BeautifulSoup(page.read())

td = soup.find_all('td')

another_soup = BeautifulSoup(td[:-3])

print another_soup 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:50:10.200

您需要首先找到行（`tr`标签）并使用它们来获取列（`td`标签）：

```
currencies = {}
trs = soup.find_all('tr') # find rows
for tr in trs[1:-3]: # skip first and last 3 (or whatever)
    text = list(tr.strings) # content of all text stuff in tr (works in this case)
    # [u'U.S Dollar', u'USDGHS', u'1.8673', u'1.8994']
    currencies[text[1]] = [float(text[2]), float(text[3])] 
```

并使用适当的键将它们放入字典中，并将两个数字的值转换为浮点数......

```
>>> currencies
{u'USDGHS': [1.8673, 1.8994], u'JPYGHS': [0.0226, 0.023], u'CHFGHS': [2.0034, 2.0375], u'CADGHS': [1.8936, 1.9259], ...} 
```

# asp.net-mvc-4 - 作为 JSON 的 knockout.mapping 返回到 Api 控制器而不是转换回对象

> ID：13842644
> 
> 赞同：3
> 
> 时间：2012-12-12T15:09:40.260
> 
> 标签：asp.net-mvc-4, knockout.js, knockout-mapping-plugin

我正在尝试让 knockout.js 库和 knockout.mapping.js 库在我的 MVC4 应用程序中工作。我正在使用控制器来生成视图。剃刀视图将模型转换为 JSON 字符串，然后我使用映射插件在我的 MV 中获取我的 JSON 模型。那部分一切正常。如果我向控制器中的模型添加一些值，它们就会显示在我的视图中。我遇到的问题是将 WebApi 控制器发回给我。一旦我得到它，它就不会转换回我的可序列化模型。这是我所拥有的：

```
<script type="text/javascript" src="/Scripts/knockout-2.1.0.debug.js"></script>
<script type="text/javascript" src="/Scripts/knockout.mapping-latest.debug.js"></script>
<script type="text/javascript">
function SearchModel() {
    var self = this;
    var baseUri = '/Api/searchsubscriber/FindSubscriber';

    self.search = function (formElement) {
        debugger;
        var myJSONString = JSON.stringify(ko.mapping.toJS(formElement));
        alert(myJSONString);
        $.ajax({
            type: "POST",
            url: baseUri,
            data: myJSONString
        }).done(updateSearchResults);

    };

    updateSearchResults = function (data) {
        debugger;
        var jsonString = JSON.stringify(data);
        alert(jsonString);
    };
};
$(function () {
    debugger;
//in my actualy view it looks like this
//var jsonModel = '@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(this.Model))';
    var jsonModel = '{"SubscriberNum":null,"PersonCode":null,"ClientCode":null,"LastName":"TEST","FirstName":"H","MI":null,"DOB":null,"StartDt":null,"EndDt":null,"GroupNum":null}';
    var mvcModel = ko.mapping.fromJSON(jsonModel);

    var myViewModel = new SearchModel();
    var g = ko.mapping.fromJS(myViewModel, mvcModel);

    ko.applyBindings(g);
});
</script><code> 
```

这是我的模型

```
[Serializable]
public class SearchSubscriberFields //: SearchSubscriberResults
{
   //public List<SearchSubscriberResults> Results { get; set; }
   public string SubscriberNum { get; set; }
   public string PersonCode { get; set; }
   public string ClientCode { get; set; }
   public string LastName { get; set; }
   public string FirstName { get; set; }
   public string MI { get; set; }
   public string DOB { get; set; }
   public string StartDt { get; set; }
   public string EndDt { get; set; }
   public string GroupNum { get; set; }
} 
```

这是我的 ApiController

```
[Authorize]
public class SearchSubscriberController : ApiController
{
    MyService _service = new MyService();

    [HttpPost]
    public SearchSubscriberFields FindSubscriber(SearchSubscriberFields search)
    {
        if (search != null)
        {
            SearchSubscribersRequest request = new SearchSubscribersRequest();

            request.Credentials = new Credentials() { Username = User.Identity.Name };

            request.SubscriberNum = Utility.FormatString(search.SubscriberNum).ToUpper();
            request.PersonCode = Utility.FormatString(search.PersonCode).ToUpper();
            request.ClientCode = Utility.FormatString(search.ClientCode).ToUpper();
            request.LastName = Utility.FormatString(search.LastName).ToUpper();
            request.FirstName = Utility.FormatString(search.FirstName).ToUpper();
            request.MI = Utility.FormatString(search.MI).ToUpper();

            SearchSubscribersResponse response = _service.SearchSubscribers(request);

            if (response.Errors.Count < 1)
            {
                return search;
            }
       }
        return search;
    }
} 
```

所以，从我看过的每一个例子来看，这都应该有效。如果我将 api 控制器中的对象更改为`FindSubscriber(JObject search)`我可以看到我得到一个 JSON 字符串。Fiddler 显示它正在发送一个 JSON 字符串。从提琴手：

```
POST http://localhost:60248/Api/searchsubscriber/FindSubscriber HTTP/1.1
Accept: */*
Content-Type: application/x-www-form-urlencoded
X-Requested-With: XMLHttpRequest
Referer: http://localhost:60248/Subscriber/Search
Accept-Language: en-US,es-DO;q=0.5
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host: localhost:60248
Content-Length: 157
Connection: Keep-Alive
Pragma: no-cache
{"SubscriberNum":null,"PersonCode":null,"ClientCode":null,"LastName":"TEST","FirstName":"H","MI":null,"DOB":null,"StartDt":null,"EndDt":null,"GroupNum":null} 
```

我只是没有在我的控制器中得到可以返回`SearchSubscriberFields`对象的结果。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:18:32.057

您应该使用 ko.mapping.toJSON 还需要正确配置 jQuery.Ajax，现在它会像 html 表单一样发布它，您的 MVC 控制器不会理解这一点。

像这样的东西应该工作

```
MyApp.utils = {
    post: function (url, data, success) {
        $.ajax({
            url: url,
            type: "POST",
            dataType: "JSON",
            contentType: "application/json; charset=UTF-8",
            data: ko.mapping.toJSON(data),
            success: success
        });
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:41:58.957

我发现我的问题是我的服务器模型具有 [Serializable] 属性，因此当我在剃刀视图中对其进行序列化时，它也在对支持字段进行序列化。这应该很明显，但我错过了。因此，一旦我发回我的模型，它也会发回那些绑定字段，因此无法映射到我的模型。我将此添加到 Global.asmx

```
 //This sets the JSON serializer to ignore the backing fields
        JsonSerializerSettings jSettings = new Newtonsoft.Json.JsonSerializerSettings();
        GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings = jSettings; 
```

# xcode - 在不使用 xcode 的情况下获取 mac os 应用程序的控制台输出

> ID：13842646
> 
> 赞同：1
> 
> 时间：2012-12-12T15:09:42.747
> 
> 标签：xcode, macos, debugging

通过使用 Apple 的 iPhone 配置实用程序工具，我可以在不使用 xcode（甚至在 Windows 上）的情况下在其他机器上调试 iOS 应用程序。更多信息在这里：

[http://developer.apple.com/library/ios/#qa/qa1747/_index.html](http://developer.apple.com/library/ios/#qa/qa1747/_index.html)

但是对于 macOS 应用程序，我找不到用于在非开发人员 Mac 上调试应用程序的类似工具。我对此并不陌生，希望经验丰富的开发人员提供一些帮助，这通常是如何在现实世界中完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:30:27.003

您可以从控制台应用程序获取 os x 应用程序的控制台输出和崩溃日志。

您可以在 Applications 文件夹的 Utility 文件夹中找到它。或者只是打开聚光灯并输入“控制台”

# c++ - 理解编译器——什么都不做的语句？

> ID：13842653
> 
> 赞同：4
> 
> 时间：2012-12-12T15:10:07.063
> 
> 标签：c++, compiler-construction

我有兴趣了解编译器是如何解释语句的……</p>

项目类型是 C++ IDE 是 XCode 3.2 64bit 操作系统是 Mac OS X 10.6.8

注意：代码示例是一个无限循环。

在下面的代码示例或附加图像中。如果有的话，编译器在做什么。没有引发重大错误，也没有小错误（鉴于我当前的编译器设置）。最感兴趣的是了解案例陈述 C 中发生的事情：

```
 bool nrContinue;
    enum Task {

        A,
        B,
        C,
        D

    };

    nrContinue = 1;
    Task nrTask = A;

    while (nrContinue) {

        switch (nrTask) {

            case A:

                cout << endl << "Processing task: " << A;
                nrTask = B;

                break;
            case B:

                cout << endl << "Processing task: " << B;
                nrTask = C;

                break;
            case C:

                cout << endl << "Processing task: " << C;

                // --------------------------------------------------
                // Below is the statement of my misunderstanding

                D;      // What is going on at this statement

                break;
            case D:

                cout << endl << "Processing task: " << C;
                nrContinue = 0;

                break;
            default:

                cout << endl << "Default case was unexpected.";
                nrContinue = 0;

                break;

        }

    } // loop 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:24:24.463

一行（或更多）形式的代码

```
expression; 
```

被称为*表达式语句*。表达式被求值，程序的状态根据表达式的副作用而改变。例如：

```
nrTask = C; 
```

导致程序计算表达式`nrTask = C`，这具有改变 的值的副作用`nrTask`。

`D;``D`计算没有副作用的表达式，因此什么也不做。

该语言允许将任何表达式用作表达式语句的主体；然而，一个好的编译器如果没有效果就应该发出警告，因为它几乎总是一个错误。如果您启用警告（`-Wunused-value`仅针对该警告，或者更好地`-Wall -Wextra`针对许多有用的警告），那么编译器应该通过“语句无效”之类的警告指出您的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:13:21.240

在情况 C 中，您缺少一条`nrTask = D;`语句，因此您的状态机在下一个循环中转换到该情况，否则它会无限期地停留在状态 C 中。单个语句`D;`什么都不做，它只是将常数 D 评估为一个时间，它永远不会被分配对任何事物或产生任何副作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:24:12.677

该声明

```
D;      // What is going on at this statement 
```

什么也没做。最有可能的是，编译器甚至会使用最基本的优化设置将其丢弃。如果你提高编译器的警告级别，它很可能会开始抱怨该语句什么都不做。

首先，此类语句合法的原因可能是因为没有人希望通过取缔这些无用的语句而不禁止看起来相似但有用的语句来使 C++ 的语法变得比现在更复杂。

# c# - C# 创建子类的另一个实例 - 反射？

> ID：13842658
> 
> 赞同：0
> 
> 时间：2012-12-12T15:10:18.017
> 
> 标签：c#, reflection

我正在重新发布我刚刚提出的一个问题，但我想以更简洁的方式重新提出这个问题，因为我认为我造成了一些混乱。

我有一个基类：RoomObject。我有两个子类：Bed 和 Table，它们继承自 RoomObject。

我有一个变量 currentObject，它是 RoomObject 类型，但实际上将保存 Bed 或 Table 的实例（RoomObject 本身永远不会实例化）。

如何在不知道其完整类型的情况下克隆我的 currentObject？

即如果 currentObject 是床，我想克隆床使用

```
currentObject = new Bed(currentObject); 
```

如果 currentObject 是一个表，我想使用

```
currentObject = new Table(currentObject); 
```

我可以通过调用 Activator.CreateInstance(currentObject.GetType()) 来使用反射，然后复制我需要的任何属性，但这看起来很混乱。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T15:14:41.147

您应该使用称为*虚拟构造函数*的模式或*克隆方法*。

添加一个返回当前对象副本的虚拟方法`RoomObject`：

```
abstract RoomObject Clone(); 
```

现在在`Bed`to return`new Bed(...)`和`Table`to return 中实现这个方法`new Table(...)`。将任何必要的参数传递给构造函数`Bed`并`Table`复制当前对象中的内容。

.NET 有一个`ICloneable`通常用于实现此模式的接口。这种方法的一个小缺点是`Clone`必须返回`object`，而不是`RoomObject`，所以如果你需要`RoomObject`，你需要强制转换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:33:14.410

[`ICloneable`](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)正如其他人在回答中所说的那样，在 .NET Framework 上实现开箱即用的接口，而不是那样做。

既然`ICloneable.Clone()`方法返回`object`，那么自定义`ICloneable<T>`也实现了`ICloneable`呢？

```
public interface ICloneable<T> : ICloneable
    where T : class
{
    T TypedClone();
}

public class MyCloneableObject : ICloneable<MyCloneableObject>
{
     public string Some { get; set; }

     public object Clone()
     {
         MyCloneableObject clone = new MyCloneableObject { Some = this.Some };
     }

     public MyCloneableObject TypedClone()
     {
          return (MyCloneableObject)Clone();
     }
} 
```

稍后，在您的代码中...

```
MyCloneableObject some = new MyCloneableObject();

if(some is ICloneable<MyCloneableObject>)
{
    MyCloneableObject myClone = some.TypedClone();

    // .. or the standard `Clone()`:
    myClone = (MyCloneableObject)some.Clone();
} 
```

实现内置和自定义接口是一个好主意，因为您的可克隆将与可能接受`ICloneable`实现的其他库一起运行。

最后，这种情况应该在设计时解决，而不是使用反射。我会争辩说，如果你不能修改包含想要的库，那么应该进行反射`ICloneable`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T15:20:59.727

我认为一种解决方案是为所有对象实现 ICloneable 接口。这是一些示例代码：

```
class RoomObject : ICloneable
{
    public abstract object Clone();
}

class Bed : ICloneable
{
    public override object Clone()
    {
        return new Bed();
    }
}

class Table : ICloneable
{
    public override object Clone()
    {
        return new Table();
    }
}

class Program
{
    public static void Main(String[] args)
    {
        RoomObject ro = /* from some other places*/
        RoomObject newOne = ro.Clone() as RoomObject;  /* here's what you what */
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T15:16:59.903

这是关于反射的最好的事情之一：在客户端代码不知道它是什么类型的情况下创建对象的能力。有时它会变得混乱，甚至有时会减慢代码的速度，但是——如果使用得当——会让你的代码更易于管理。

例如，看看[Factory Pattern](http://msdn.microsoft.com/en-us/library/ee817667.aspx)，以及如何[使用 Reflection](http://msdn.microsoft.com/en-us/magazine/cc164170.aspx)来实现它，以及[这里](http://www.youtube.com/watch?v=yDEmb5XYc_s)

# asp.net - 在邮件信封中找不到正文元素

> ID：13842662
> 
> 赞同：3
> 
> 时间：2012-12-12T15:10:25.427
> 
> 标签：asp.net, service, web

我在 asp.net 应用程序中调用 Web 服务。

```
MyService s = new MyService();
s.myMethod(); 
```

`s.myMethod()`返回：

```
System.ServiceModel.CommunicationException: A body element was not found inside the message envelope.

Server stack trace: 
   at System.ServiceModel.Channels.ReceivedMessage.VerifyStartBody(XmlDictionaryReader reader, EnvelopeVersion version)
   at System.ServiceModel.Channels.BufferedMessage..ctor(IBufferedMessageData messageData, RecycledMessageState recycledMessageState, Boolean[] understoodHeaders, Boolean understoodHeadersModified)
   at System.ServiceModel.Channels.TextMessageEncoderFactory.TextMessageEncoder.ReadMessage(ArraySegment`1 buffer, BufferManager bufferManager, String contentType)
   at System.ServiceModel.Channels.HttpInput.DecodeBufferedMessage(ArraySegment`1 buffer, Stream inputStream)
   at System.ServiceModel.Channels.HttpInput.ReadBufferedMessage(Stream inputStream)
   at System.ServiceModel.Channels.HttpInput.ParseIncomingMessage(Exception& requestException)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 
```

现在我确定 MyService 已启动并正在运行。此外，此错误不会经常发生。

MyService 在另一台机器上工作。当我查看 MyService 的日志文件时，我可以看到我的请求正在处理中。

有没有人遇到过这个错误信息？

# wcf - 在 [url] 处没有可以接受消息的端点侦听

> ID：13842663
> 
> 赞同：0
> 
> 时间：2012-12-12T15:10:35.253
> 
> 标签：wcf

我看到网上有几个类似的主题，所以关于这个，但没有一个对我解决这个问题有帮助。

我有一个 wcf 服务，它由 IIS 中的同一个 Web 应用程序（不要问为什么）托管和使用。所以我的 web.config 看起来像这样

```
<system.serviceModel>
    <services>
        <service name="Management.Service.ManagementService" behaviorConfiguration="Management.Service.ManagementServiceBehavior">
            <endpoint name="default" binding="basicHttpBinding" bindingConfiguration="default" contract="Management.Service.IManagementService" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="Management.Service.ManagementServiceBehavior">
                <serviceMetadata httpGetEnabled="true"/>
                <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
    <bindings>
        <basicHttpBinding>
            <binding name="default" closeTimeout="00:01:00" openTimeout="00:01:00"
                     receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
                     bypassProxyOnLocal="true" hostNameComparisonMode="StrongWildcard"
                     maxBufferSize="2147483647" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647"
                     messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                     useDefaultWebProxy="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                           maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                                 realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://www.example.com/Service.svc"
            binding="basicHttpBinding" bindingConfiguration="default"
            contract="Management.Client.IManagementService" name="default" />
    </client>
</system.serviceModel> 
```

这在我的本地环境中工作得非常好，我什至可以在任何浏览器中浏览到服务（生产）。但是由于某种原因，我`There was no endpoint listening`在生产服务器上收到错误。

我还尝试在标记后添加以下块`<system.serviceModel>`以启用跟踪，但我没有看到正在生成任何跟踪文件。

```
<system.diagnostics>
    <sources>
        <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true" >
            <listeners>
                <add name="xml"/>
            </listeners>
        </source>
        <source name="System.ServiceModel.MessageLogging">
            <listeners>
                <add name="xml"/>
            </listeners>
        </source>
    </sources>
    <sharedListeners>
        <add initializeData="C:\inetpub\WcfClient.svclog" type="System.Diagnostics.XmlWriterTraceListener" name="xml"/>
    </sharedListeners>
</system.diagnostics> 
```

**编辑：**忘了提，如果我尝试从本地环境使用生产服务，它工作正常！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:27:57.777

Well, turned out to be a totally different issue. Turned out that the web application (and in effect the service) was in-accessible from the server itself, i.e. if I try to browse the site from the server itself, I would get a "Page not found" message.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T20:15:03.407

我也有同样的问题。就我而言，我正在拨打电话的服务器存在防火墙问题。他们没有打开防火墙。打开后问题就解决了。

# iphone - gamekit 问题 ios5 和 ios6 设备

> ID：13842664
> 
> 赞同：2
> 
> 时间：2012-12-12T15:10:40.293
> 
> 标签：iphone, ios, gamekit

我正在开发一款多人纸牌游戏。我用gamekit做网络的东西，但我遇到了一个问题：我的应用程序总是在一个没有日志的客户端上崩溃（它只是冻结）。经过研究和测试，我追踪了问题的根源：-服务器（ios 5或ios 6）和客户端ios5设备=应用程序运行完美-服务器（ios 5或ios 6）和客户端ios6设备=应用程序运行完美-服务器（ios 5 或 ios 6）和客户端 ios5 和 ios6 = iOS6 客户端上的应用程序“冻结”。

服务器收到所有客户端的登录响应后，应用程序实际上冻结了。当然，游戏仍然在其他设备上运行。

```
peer (client with iOS 6) changed state 2 
```

和服务器显示：

```
failed to send packet 
```

我按照本教程进行操作：http://www.raywenderlich.com/12976/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-7 并测试了最终样本本教程中的项目，它完全像我的应用程序一样崩溃。

任何人都可以帮忙吗？

谢谢

# string - 将唯一编号映射到唯一的 6 个字符的字符串

> ID：13842665
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:10:40.763
> 
> 标签：string, algorithm, numbers, unique-key

我有一个数据库表，其中每一行都有其唯一 ID (RowID)。

有没有一种好方法可以将此 RowID 转换为长度始终为 6 个字符的唯一键。唯一的关键字符可以是 {A-Za-z0-9}。唯一密钥的一个示例是：a5Fg3A。

当然，我确实意识到我只能使用这种方法生成一定数量的密钥，但这对我的情况无关紧要。

我对此想了很多，但我想不出一个能够正确执行此操作的算法。

我的一个想法是：唯一键 = RowID 如果 RowID 低于 100000，则在其前面附加 0，例如：123 变为 000123 1 变为 000001

然后对于 100000 到 900000 范围内的数字，我会将第一个数字替换为字符串，例如 0 = a、1 = b、2 = c、...、9 = j。

然后我可以对大写字母等做同样的事情。

我的问题是我的算法非常有限并且生成的密钥数量很少，因为它不会利用所有可能的字符。

所以基本上我应该能够生成 56800235584 个唯一键，假设每个键的长度为 6 并利用这些字符：{A-Za-z0-9}。

AZ = 26 个字符 az = 26 个字符 0-9 = 10 个字符

所以它是 62^6 个唯一键。

任何关于如何正确完成（甚至最佳）的反馈都将不胜感激:-)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:13:52.840

您可以对 ID 进行排序，然后为每个 ID 附加一个递增的字典字符串。

仅使用字母表的简单示例`{a,b}`（仅为简单起见），并且`Ids= [20,1,7,90]`：

```
sort: Ids = [1,7,20,90]
Attach increasing strings:
1 =  aaaaaa
7 =  aaaaab
20 = aaaaba
90 = 0000bb 
```

* * *

如果您希望它作为某种哈希函数，而不是依赖于数据 - 您可以使用与数字相同的二进制编码，并将其转换为相似（即 1 = aaaaaa，2 = aaaaaab，3 = aaaaac。 ..)
[**编辑：**与@HighPerformanceMark 在评论中建议的 base-62 基本相同]

* * *

第一种方法的优点：允许您处理多达 62^6 个数字，不管它们的大小是多少，而第二种方法不允许。

然而，第二种方法允许您从数字到字符串的一致转换，而不管具体数据如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:21:12.930

如果您想让 AZ az 0-9 成为您注意到的字母表，那么您有 62 个基数系统。所以用base 62编码唯一的rowid，有一个标准的算法可以这样做。如果您的应用程序允许（需要）它，您可以添加更多可打印字符，例如“+”、“/”、“！”、“@”……这样您就可以获得更多的独特性。现成的答案是广泛使用的base64编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:24:28.227

有很多方法可以做到这一点 - 挑战是根据您的标准选择“最佳”的方法。一些例子，但远非详尽（一些已经在其他地方提出过）：

*   用递增序列填充
*   base-62 表示（注意：base-64 是常用的，甚至可能已经在您手头的任何库中提供了可用的代码）
*   截断加密哈希（速度慢，但有一些其他可能有用的属性，具体取决于您需要这样做的确切原因；如果您只需要这样做一次，那么性能损失可能是值得的）
*   其他不必要的加密哈希函数，可能会快得多
*   ……

# java - Java 仅允许某些值 0-9 和 AF 的数组

> ID：13842670
> 
> 赞同：0
> 
> 时间：2012-12-12T15:10:48.390
> 
> 标签：java, arrays, rgb

现在可以正常工作，代码已完成感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:34:32.253

您可以通过以下方式限制用户输入另一个值：（此程序适用于您从用户那里获取值）。这将要求输入数字，直到您输入 0 到 9 之间的数字。

您可以根据此制作代码。（仅供参考，如何限制用户输入错误）

```
Scanner scan=new Scanner(System.in);
int i=-1;
i=scan.nextInt();
while(i<=0 && i>=9){
    i=scan.nextInt();
} 
```

编辑

根据您的评论，在这种情况下，您需要将其更改为：

```
String s="";
while(!s.matches("^[0-9A-F]+$")){
    s=scan.nextLine();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:36:07.453

我会创建一个类来保存 RGB 值并让它检查输入的值是否正确。请参阅下面的测试代码......您可以根据需要处理更多案例。

```
import java.util.*;

public class jtest
{
  public static void main(String args[])
  {
    new jtest();
  }

  public jtest()
  {
    ArrayList<RGB> RGBarray = new ArrayList<RGB>();

    try
    {
    RGBarray.add(new RGB("F"));
    RGBarray.add(new RGB("J"));
    }
    catch(BadRGBValueException BRGBVE)
    {
      BRGBVE.printStackTrace();
    }
  }

  class BadRGBValueException extends Exception
  {
    public BadRGBValueException(String message)
    {
      super(message);
    }
  }

  class RGB
  {
    public RGB(String input) throws BadRGBValueException
    {
      if (!input.matches("^[0-9A-F]+$"))
      {
        throw new BadRGBValueException(input + " is not a valid RGB value");
      }

      value = input;
    }

    private String value = null;
  }
} 
```

# c++ - 带有缩进的 c++ 自定义输出流

> ID：13842676
> 
> 赞同：9
> 
> 时间：2012-12-12T15:10:59.717
> 
> 标签：c++, stl, stream, derived, manipulators

我在尝试实现自定义流类以在输出文件中生成很好的缩进代码时遇到了一些麻烦。我在网上进行了广泛的搜索，但似乎没有就实现这一目标的最佳方式达成共识。有些人谈论派生流，其他人谈论派生缓冲区，还有一些人建议使用语言环境/构面等。

本质上，我发现自己写了很多这样的代码：

```
ofstream myFile();
myFile.open("test.php");
myFile << "<html>" << endl <<
          "\t<head>" << endl <<
          "\t\t<title>Hello world</title>" << endl <<
          "\t</head>" << endl <<
          "</html>" << endl; 
```

当标签开始加起来时看起来很可怕，似乎有这样的东西会很好：

```
ind_ofstream myFile();
myFile.open("test.php");
myFile << "<html>" << ind_inc << ind_endl <<
          "<head>" << ind_inc << ind_endl <<
          "<title>Hello world</title>" << ind_dec << ind_endl <<
          "</head>" << ind_dec << ind_endl <<
          "</html>" << ind_endl; 
```

即创建一个派生流类，它会跟踪其当前的缩进深度，然后是一些操纵器来增加/减少缩进深度，以及一个操纵器来编写一个换行符，然后是许多制表符。

所以这是我实现类和操纵器的方法：

ind_ofstream.h

```
class ind_ofstream : public ofstream
{
    public:
        ind_ofstream();
        void incInd();
        void decInd();
        size_t getInd();

    private:
        size_t _ind;
};

ind_ofstream& inc_ind(ind_ofstream& is);
ind_ofstream& dec_ind(ind_ofstream& is);
ind_ofstream& endl_ind(ind_ofstream& is); 
```

ind_ofstream.cpp

```
ind_ofstream::ind_ofstream() : ofstream()   {_ind = 0;}
void ind_ofstream::incInd()     {_ind++;}
void ind_ofstream::decInd()     {if(_ind > 0 ) _ind--;}
size_t ind_ofstream::getInd()       {return _ind;}

ind_ofstream& inc_ind(ind_ofstream& is)     
{ 
    is.incInd();
    return is; 
}

ind_ofstream& dec_ind(ind_ofstream& is)     
{ 
    is.decInd();
    return is; 
}

ind_ofstream& endl_ind(ind_ofstream& is)    
{
    size_t i = is.getInd();
    is << endl;
    while(i-- > 0) is << "\t";
    return is;
} 
```

这会构建，但不会产生预期的输出；任何使用自定义操纵器的尝试都会导致它们由于某种原因被转换为布尔值并将“1”写入文件。我需要为我的新类重载 << 运算符吗？（我还没有找到一种可以构建的方法）

谢谢！

ps

1) 我从我的代码片段中省略了#includes、使用命名空间等以节省空间。

2）我的目标是能够使用类似于我的第二个代码片段中的界面。如果在阅读整篇文章后，您认为这是一个坏主意，请解释原因并提供替代方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T15:59:53.023

iostreams 支持向它们添加自定义数据，因此您不需要编写完整的派生类来添加将由操纵器操作的缩进级别。这是 iostreams 的一个鲜为人知的功能，但在这里派上用场。

你会这样写你的操纵器：

```
/* Helper function to get a storage index in a stream */
int get_indent_index() {
    /* ios_base::xalloc allocates indices for custom-storage locations. These indices are valid for all streams */
    static int index = ios_base::xalloc();
    return index;
}

ios_base& inc_ind(ios_base& stream) {
    /* The iword(index) function gives a reference to the index-th custom storage location as a integer */
    stream.iword(get_indent_index())++;
    return stream;
}

ios_base& dec_ind(ios_base& stream) {
    /* The iword(index) function gives a reference to the index-th custom storage location as a integer */
    stream.iword(get_indent_index())--;
    return stream;
}

template<class charT, class traits>
basic_ostream<charT, traits>& endl_ind(basic_ostream<charT, traits>& stream) {
    int indent = stream.iword(get_indent_index());
    stream.put(stream.widen('\n');
    while (indent) {
        stream.put(stream.widen('\t');
        indent--;
    }
    stream.flush();
    return stream;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T13:28:48.317

我将 Bart van Ingen Schenau 的解决方案与一个方面相结合，以允许将缩进级别推送和弹出到现有的输出流。该代码可在 github 上找到： [https](https://github.com/spacemoose/ostream_indenter) ://github.com/spacemoose/ostream_indenter ，并且存储库中有更彻底的演示/测试，但基本上它允许您执行以下操作：

```
/// This probably has to be called once for every program:
// http://stackoverflow.com/questions/26387054/how-can-i-use-stdimbue-to-set-the-locale-for-stdwcout
std::ios_base::sync_with_stdio(false);

std::cout << "I want to push indentation levels:\n" << indent_manip::push
          << "To arbitrary depths\n" << indent_manip::push
          << "and pop them\n" << indent_manip::pop
          << "back down\n" << indent_manip::pop
          << "like this.\n" << indent_manip::pop; 
```

生产：

```
I want to push indentation levels:
    To arbitrary depths
        and pop them
    back down
like this. 
```

我不得不做一个讨厌的把戏，所以我有兴趣听到关于代码实用程序的反馈。

# jquery - 希伯来语在 jquery 数组中显示乱码

> ID：13842680
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:11:08.093
> 
> 标签：jquery, html, character-encoding

我需要一些帮助，[这是链接](http://yasmin-minerals.com/googlesearch1212/heb/index.html)

对于我的问题，希伯来语在这段代码中显示为乱码！请单击搜索按钮以获取乱码的确切视图..

请问有什么建议吗？！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:25:07.753

1.  确保您的 html 标头中没有此内容：

`<meta http-equiv="Content-Language" content="English" />`

2.确保你没有两个冲突的字符集

3.在记事本中打开你的资源（html、css、javascript）并用utf-8编码保存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:20:08.553

您没有使用正确的字符编码。 [ISO 8859-8](http://en.wikipedia.org/wiki/ISO/IEC_8859-8)包含希伯来字符。如果您使用 保存代码文件`UTF-8`，这也应该有效，默认情况下不会发生这种情况。

# c++ - 带有指针 this 的模板函数“is_same”，意外行为？

> ID：13842682
> 
> 赞同：0
> 
> 时间：2012-12-12T15:11:12.243
> 
> 标签：c++, types, c++11, g++

相关问题：[模板功能在模板类中相同](https://stackoverflow.com/questions/13843222/template-function-is-same-in-template-classes)

我对指针“this”（gcc 4.7.2，c++11）的类型有点不安。原则上，例如C类型的非常量对象的指针“this”的类型是“C * const”，因此“*this”的类型是“C”。但是“is_same”类的行为让我很困惑。

测试：

```
// this-type.cpp
#include <iostream>
#include <type_traits>

using namespace std;

class C
{
public:
   void test()
   {
       cout << boolalpha;

       cout << "'this' const?" << "              "
            << is_const<decltype(this)>::value << endl;

       cout << "'*this' const?" << "             "
            << is_const<decltype(*this)>::value << endl;

       cout << "'*this' and 'C' the same?" << "  "
            << is_same<decltype(*this), C>::value << endl;

       cout << "'this' and 'C*' the same?" << "  "
            << is_same<decltype(this), C*>::value << endl;
   }
};

int main()
{
    C c;

    c.test();
} 
```

输出：

```
$ g++ --version | grep g++
g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2
$ g++ -std=c++11 this-type.cpp
$ ./a.out
'this' const?              false
'*this' const?             false
'*this' and 'C' the same?  false
'this' and 'C*' the same?  true 
```

但是，预期的输出是：

```
$./a.out
'this' const?              true   // C* const
'*this' const?             false  // C
'*this' and 'C' the same?  true
'this' and 'C*' the same?  false  // C* const vs. C* 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:28:15.493

> ### 9.3.2 this指针[class.this]
> 
> 1 - [...]关键字`this`是prvalue表达式，其值是调用函数的对象的地址。类的`this`成员函数中的类型`X`是`X*`。

`this`不是`const`左值，它是纯右值表达式，所以它不需要是`const`. 你不能分配给它，因为它是一个纯右值，同样的原因你不能写`2 + 2 = 5`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:29:17.767

在这种情况下，类型`this`是`C *`

> 9.3.2 this指针[class.this]
> 
> 在非静态 (9.3) 成员函数的主体中，关键字 this 是一个纯右值表达式，其值是调用该函数的对象的地址。类 X 的成员函数中 this 的类型是 X*。
> 
> ...

没有提到 for`X *const`等。`this`指针是一个*prvalue*，这就是为什么它不能被分配给它，而不是因为它是 const 限定的。

PS。顺便说一句，似乎

```
C *p; // for any type C
is_same<declype (*p), C &>::value == true 
```

虽然它可能是实现（编译器或`is_same`）的人工制品，因为标准说：

> 5.3.1 一元运算符 [expr.unary.op]
> 
> 1 ...
> 
> ...如果表达式的类型是“指向 T 的指针”，则结果的类型是“T”。...

# jquery - JS 代码只有放在正文中才有效

> ID：13842685
> 
> 赞同：0
> 
> 时间：2012-12-12T15:11:17.453
> 
> 标签：jquery, html

```
$("#btnCon").click(function() {
    $('#con').slideToggle('slow');
    $('.tgg:not(#con)').hide(); 
}); 
```

当我将此代码放在 html 的头部时 - 它不起作用。
在体内 - 它有效。
在一个单独的文件中 - 它不起作用。
秘密在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:11:51.023

要使其在头脑中工作，请执行以下操作：

```
$(function(){
  $("#btnCon").click(function() {
    $('#con').slideToggle('slow');
    $('.tgg:not(#con)').hide(); 
  });
}); 
```

`btnCon`问题是您在准备好之前就在寻找带有 id 的元素。通常的解决方案是在 DOM 准备好时 jQuery 调用的回调中嵌入代码。

但请注意，即使`$(function(){ ... });`始终建议使用，最佳做法通常是将您的代码

*   在一个单独的 javascript 文件中
*   在正文末尾的脚本元素中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T15:13:10.210

> 当我将此代码放在 html 的头部时 - 它不起作用。在体内 - 它有效。在一个单独的文件中 - 它不起作用。

如果您将`script`包含文件的标签放在正文的末尾，就在结束`</body>`标签之前，它将在单独的文件中工作。

它不起作用的原因是，当它在 中时`head`，代码会立即运行，并且元素还不存在，因此处理程序不会被连接起来。

这里的正确答案是将`script`代码的标签放在最后。这就是[YUI 团队](http://developer.yahoo.com/performance/rules.html)和[Google 闭包库团队](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)所倡导的。您还会看到人们[`ready`](http://api.jquery.com/ready)为此使用 jQuery 的事件并将脚本放入，这确实有效，但如果您控制标签`head`的位置，则无需这样做。`script`

简而言之：

这有效：

```
<body>
...content...
<script>
/* ...code... */
</script>
</body> 
```

这有效：

```
<body>
...content...
<script src="/the/script/file.js"></script>
</body> 
```

这有效：

```
<head>
...
<script>
jQuery(function($) { // <== This is a shortcut for `ready`
    /* ...code...*/
});
</script>
</head>
<body>
...content...
</body> 
```

**如果**脚本文件中的代码在处理程序中，则此方法有效`ready`：

```
<head>
...
<script src="/the/script/file.js"></script>
</head>
<body>
...content...
</body> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T15:12:30.913

在 document.ready 中尝试

```
$(document).ready(function () {

    $("#btnCon").click(function() {
        $('#con').slideToggle('slow');
        $('.tgg:not(#con)').hide(); 
    });

}); 
```

速记 -

```
$(function () {

    $("#btnCon").click(function() {
        $('#con').slideToggle('slow');
        $('.tgg:not(#con)').hide(); 
    }); 

}); 
```

# c# - 当行满足条件时从网格视图中删除完整的行

> ID：13842688
> 
> 赞同：0
> 
> 时间：2012-12-12T15:11:26.037
> 
> 标签：c#, asp.net, vb.net, vb.net-2010

`GridView`如果满足条件，我正在尝试从 a 中删除完整的行。

在这里我得到了

`a Description Column from Product table in database``GridView`填充了 a 。

我`sqlcommand`在我的 vb 应用程序中将 设置为 only `select the Description which does not contain the String s`。

在这里`String s has two keywords "Tomatoes" and "Apple"`。所以 Sql Query 应该检索`Description column that does not have "Tomatoes" and "Apple"`.

因此，`Gridview`应该通过删除满足条件的行来更新。

我在删除

`Description row in GridView`其中有“西红柿”和“苹果”。我尝试用结果填充另一个 GridView，但它没有出现在网页中，尽管一切都是正确的，因为我已经看到了我指定一些断点的值。有什么建议或想法吗？

这是我的代码：

```
Dim cmd1 = New SqlCommand(" SELECT DISTINCT [Description] FROM [Product] WHERE ([Description] LIKE '%' + @Description + '%')", conn)
                        cmd1.Parameters.AddWithValue("@Description", s)

         MsgBox("NO")

         For i As Integer = 0 To GridView1.Rows.Count - 1
         DA.SelectCommand = cmd1
         DA.Fill(dt)

         'row is of a GridViewRow datatype As GridView1.Rows
          row.Cells.RemoveAt(i) '' do not know if it is correct or not

         'GridView3.DataSource = '' dt tried with no luck
         'GridView3.DataBind() '' tried with no luck
          cmd1.Dispose()
          DA.Dispose()
          dt.Clear()
          dt.Dispose()
         Next
       End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:16:08.800

您仍然可以更改数据源，而无需操作原始数据源。你用数据库中的数据填充你的“dt”变量。然后用类似的东西循环它

```
 var stuffIActuallyWantInMyGrid = new List<DataSet>(); //A list of whatever you dt is of
    foreach(var x in dt)
    {
        if(x == WhateverMyCriteriaAre)
        {
           stuffIActuallyWantInMyGrid.Add(x);
        }
    }
    GridView3.DataSource = stuffIActuallyWantInMyGrid;
    GridView3.DataBind(); 
```

（是的，我知道这是 C# 代码，但有人将此问题标记为 C# ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:33:10.563

如果您绝对*必须*将数据保留在 GridView 的底层数据源中，但不希望它显示，则一种解决方案是处理 GridView 上的 RowDataBound 事件。在此方法中，根据您的标准测试给定的行；如果该行匹配，则将其 Visible 属性设置为 False。

```
Public Sub MyGridView_RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs)

    If e.Row.RowType = DataControlRowType.DataRow Then
        If e.Row.Cells(0).Text = "((value of row to hide))" Then
            e.Row.Visible = False
        Else
            e.Row.Visible = True
        End If
    End If

End Sub 
```

# javascript - 在 MVC3 框架中查找 mozilla firefox 的选项卡关闭、浏览器关闭和返回事件

> ID：13842689
> 
> 赞同：0
> 
> 时间：2012-12-12T15:11:26.430
> 
> 标签：javascript, jquery

请帮我找到 Mozilla Firefox 的事件。当我通过单击交叉按钮、关闭选项卡和单击后退按钮关闭浏览器时，我想显示警报消息并从服务器端删除会话。我发现诸如“onbeforeunload”之类的事件。但是当我刷新页面时，也会出现这个事件的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:18:13.930

```
window.onbeforeunload 
```

[如何检测窗口（新标签）关闭事件？](https://stackoverflow.com/questions/3185105/how-to-detect-the-windownew-tab-close-event)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T12:44:14.113

除了一些基于 cookie 的方法之外，您可能无法做到这一点，这些方法是非持久性 cookie 等开发工作。您可能在任何时候都无法正确知道它是返回按钮、下一页重定向、基于表单的重定向操作还是浏览器关闭。即使是实施也​​可能不是直接的。

您可以在客户关闭标签之前做一些小事。[javascript检测浏览器关闭选项卡/关闭浏览器](https://stackoverflow.com/questions/3888902/javascript-detect-browser-close-tab-close-browser)，但如果您的操作列表很大并且选项卡在完成之前关闭，您将无助。你可以试试，但根据我的经验，不要依赖它。是的，此时您无法区分返回、刷新和关闭。

```
window.addEventListener("beforeunload", function (e) {
  var confirmationMessage = "\o/";
  /* Do you small action code here */
  (e || window.event).returnValue = confirmationMessage; //Gecko + IE
  return confirmationMessage;                            //Webkit, Safari, Chrome
}); 
```

[https://developer.mozilla.org/en-US/docs/Web/Reference/Events/beforeunload?redirectlocale=en-US&redirectslug=DOM/Mozilla_event_reference/beforeunload](https://developer.mozilla.org/en-US/docs/Web/Reference/Events/beforeunload?redirectlocale=en-US&redirectslug=DOM/Mozilla_event_reference/beforeunload)

# spree - 狂欢 - 自定义结帐流程 - 完成回调后未执行

> ID：13842690
> 
> 赞同：3
> 
> 时间：2012-12-12T15:11:28.183
> 
> 标签：spree

嗨，我的 order_decorator.rb 中有以下代码行

```
Spree::Order.state_machine.before_transition :to => :delivery,
                                             :do => :valid_geolocation?

Spree::Order.state_machine.after_transition :to => :complete,
                                             :do => :notify_shops_new_order 
```

`valid_geolocation?`在转换到之前被调用，`:delivery`但`notify_shops_new_order`在状态之后不被调用`complete`。

我不知道为什么。我正在使用paypal进行结帐。我不知道这是否可能相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T13:05:33.077

如果您使用 spree_paypal_express gem，它不会使用自然状态机转换到完整状态，因此不会调用 after complete 回调。过去对我有用的是将您的调用链接到该`finalize!`方法：

```
# in order_decorator.rb
def finalize_with_notify_shops!
  finalize_without_notify_shops!
  notify_shops_new_order
end
alias_method_chain :finalize!, :notify_shops 
```

# spring - 将 json 对象从 spring mvc 控制器发送到 yui 视图

> ID：13842693
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:11:41.630
> 
> 标签：spring, model-view-controller, yui

我想将一个 json 对象从 spring mvc 控制器发送到一个视图，因为我有 YUI 数据表，并且我希望 json 对象成为该表的数据源。任何接近这种情况的建议或例子将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:49:14.257

您可以使用**Jackson**转换器和`@ResponseBody`注释：

```
@RequestMapping(...)  
public @ResponseBody Json getJson(){ 
    return new Json();
} 
```

遵循这些[说明](http://blog.safaribooksonline.com/2012/03/28/spring-mvc-tip-returning-json-from-a-spring-controller/)。

# java - 使用 DecimalFormat 格式化 Double 以在没有科学计数法的情况下打印

> ID：13842696
> 
> 赞同：6
> 
> 时间：2012-12-12T15:11:46.350
> 
> 标签：java, android, string-formatting, floating-accuracy, double-precision

我一直在从传感器读数中读取时间戳值，但由于它们以纳秒为单位提供，我想我会将它们转换为双倍并进行转换。结果数字是一个 17 位的值，加上分隔符。

尝试直接打印它会导致科学记数法，这是我不想要的，因此我使用 DecimalFormat 类将其输出到小数点后 4 位的预期值。问题是，即使调试器显示了 17 位十进制数字，即使在“doubleValue()”调用之后，输出字符串也显示了 15 位数字。

**代码：**

```
...
Double timestamp = (new Date().getTime()) +       // Example: 1.3552299670232847E12
            ((event.timestamp - System.nanoTime()) / 1000000D);
DecimalFormat dfmt = new DecimalFormat("#.####");

switch(event.sensor.getType()){
    case Sensor.TYPE_LINEAR_ACCELERATION:
    case Sensor.TYPE_ACCELEROMETER:
        accel = event.values.clone();
        String line = "A" + LOGSEPARATOR +              
            dfmt.format(timestamp.doubleValue()) + // Prints: 1355229967023.28
... 
```

我认为这可能是一个 android 精度问题，但调试器的格式化程序也显示了错误的精度。我已经在本地 java 程序中对此进行了测试，两个调用的位数相同。

这是 DecimalFormat 错误/限制吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:21:25.113

A double in Java has a mantissa of only 52 bit (counting the hidden 1 its 53 bit). This is equivalent to 15-16 decimal places (53*log10(2)). Every digit after this is kind of random and therefore it makes sense for the conversion function to cut the output after 15 decimal places.

Since you do not need the large number range that double provides, why not keep the value as long? This would give you 63 significant bits (64 -1 for the sign).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:03:10.380

Java 和 Android 的 DecimalFormat 类之间确实存在差异，尽管采用完全相同的参数，但它们输出的结果也不同。

这足以让我尝试亨利的方法，现在我看到我已经获得了额外的 2 位精度。我也相信这些值是准确计算的，因为只涉及求和和乘法。

这是我最终使用的修改后的代码：

```
...
long javaTime = new Date().getTime();
long nanoTime = System.nanoTime();
long newtimestamp = javaTime * 1000000 +            // Compute the timestamp
            (event.timestamp - nanoTime);           // in nanos first
String longStr = Long.valueOf(newtimestamp).toString();
String tsString = longStr.substring(0, longStr.length()-6) +// Format the output string
            "." + longStr.substring(longStr.length()-6);    // to have the comma in the
                                                            // correct space.
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:56:17.653

正在对 String.format 进行一些研究，结果相同。

```
Double timestamp = 1.3552299670232847E12;
System.out.println("it was " + timestamp);
System.out.println("and now " + String.format("%.4f", timestamp)); 
```

这是输出：

```
12-12 15:48:58.255: I/System.out(2989): it was 1.3552299670232847E12
12-12 15:48:58.255: I/System.out(2989): and now 1355229967023,2800 
```

也许你是对的，这是一个 Android 精度问题，就像你在 Java 中尝试一样，输出是正确的：http: [//ideone.com/PBOiet](http://ideone.com/PBOiet)

我会继续谷歌搜索...

# c# - 跨平台开发

> ID：13842697
> 
> 赞同：1
> 
> 时间：2012-12-12T15:11:47.793
> 
> 标签：c#, javascript, .net, html

当我意识到“废话，它就像其他所有网站一样”时，我正要上传我重新设计的新网站。

然后我有了一个想法。过去两周我一直在计划。我只剩下一件事要做，事实证明，我很难弄清楚我如何才能拥有我的个人电脑网站，以及一个完全不同的 iPad 网站（或者只是更大的基于触控的计算机）和另一个触控 -基于手机，然后是具有网络浏览功能的普通手机。

这可能吗？我要分离。我不想要一堆 javascript 文件，其中包含所有内容的命令。我想分离每个“网站”并根据请求文档的平台提供服务。我们怎样才能做到这一点？

如果您要推荐任何可能有帮助的库，请注意我不会使用 jQuery（但无论如何都要列出 jQuery，因为其他遇到此问题的人可能不介意使用 jQuery）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:25:20.983

您可以使用 Asp.net MVC 并根据设备切换视图。通过这种方式，您可以重复使用所有控制器，并为您想要的每个设备提供不同的视图。

Scott Hanselman 前段时间写了一篇关于这种开发的文章： [http ://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx](http://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx)

我会推荐 jQuery Mobile 在移动设备中使用。我也推荐Kendo UI Mobile，它看起来真的很棒但是移动版不是免费的。。

我还建议看一下 SPA（单页应用程序）。使用 SPA，您可以为任何设备准备一个丰富的 javascript 应用程序。将它与 Asp.Net WebApi 结合起来看起来很有前途。

Jonh Papa 开设了一门完全值得的 Pluralsight 课程：http: [//www.johnpapa.net/building-single-page-apps-with-knockout-jquery-and-web-api-ndash-the-story-begins /](http://www.johnpapa.net/building-single-page-apps-with-knockout-jquery-and-web-api-ndash-the-story-begins/)

这一切都是关于考虑你真正需要什么以及你可以付出多少努力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:31:09.350

长答案简短，我认为你正在寻找的是`Request.Browser`做重定向。您可以访问诸如 Browser.Browser 或 Browser.Version 之类的东西，我认为即使是 IsMobileDevice 也可以在那里找到。

签出：http: [//msdn.microsoft.com/de-de/library/system.web.httprequest.browser.aspx](http://msdn.microsoft.com/de-de/library/system.web.httprequest.browser.aspx)

# mysql - 将整数连接成二进制字符串并返回

> ID：13842700
> 
> 赞同：4
> 
> 时间：2012-12-12T15:11:51.793
> 
> 标签：mysql, casting

我想在二进制字符串中存储 20 个字节，这些字节来自应用程序的整数。这是我能做的最好的。两个字节只是为了使它更简单。

```
create table t (bs binary(2));

insert into t (bs) values
(concat(unhex(hex(240)), unhex(hex(40))))
;

select
    conv(hex(left(bs, 1)), 16, 10) n1,
    conv(hex(mid(bs, 2, 1)), 16, 10) n2
from t;
+------+------+
| n1   | n2   |
+------+------+
| 240  | 40   |
+------+------+ 
```

有什么不那么冗长的吗？如果不是，这些功能将如何进行这些转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:16:34.053

将整数连接成二进制字符串的函数：

```
create function concat_integers_into_binary(
    i1 integer, i2 integer
) returns binary(2) deterministic
return concat(unhex(hex(i1)), unhex(hex(i2)))

insert into t (bs) values
(concat_integers_into_binary(240, 40)) 
```

将二进制字符串转换为整数的函数：

```
create function binary2integer(
    bs varbinary(20), position integer
) returns integer deterministic
return conv(hex(substring(bs, position, 1)), 16, 10)

select
    binary2integer(bs, 1) n1,
    binary2integer(bs, 2) n2
from t;
+------+------+
| n1   | n2   |
+------+------+
|  240 |   40 |
+------+------+ 
```

# java - actionListener 不起作用，但方法可以

> ID：13842704
> 
> 赞同：3
> 
> 时间：2012-12-12T15:12:15.500
> 
> 标签：java, jsf, xhtml, primefaces

我已经测试了向数据库添加值的方法，它工作正常。但是，当我尝试将该方法用作命令按钮中的 actionListener 时，它不起作用。谁能解释一下我错了什么？这是方法：

```
public void addToNetwork() {

    MindmapNode currentNode = this.selectedNode;

    this.user.setConnections( this.user.getConnections() + "-" + currentNode.getLabel() );
    this.userConn = Arrays.asList(this.user.getConnections().split("-"));
    this.setUserdetails( this.user );
} 
```

这是xhtml：

```
<p:mindmap value="#{mmBean.root}" style="width:100%;height:600px" id="mindmap">
    <p:ajax event="select" listener="#{mmBean.onNodeSelect}" immediate="true"      
         id="oneClick" oncomplete="options.show()"  />
/p:mindmap>            

<p:dialog widgetVar="options">

    <p:panelGrid  id="optionspanel" columns="2">
        <h:outputText value="Add this user to your network?"/>
        <p:commandButton value="Add" update="mindmap" actionListener="#{mmBean.addToNetwork}" onclick="options.hide()" id="btnAdd"/>
    </p:panelGrid>

</p:dialog> 
```

这是 onNodeSelect 的方法：

```
public void onNodeSelect(SelectEvent event) {
    MindmapNode node = (MindmapNode) event.getObject();
    this.setSelectedNode(node);
} 
```

请注意，当他们单击时，我很容易强制添加，但最终我还想为用户提供许多其他选项。

这可以通过例如在他们单击添加时将 addToNetwork 中的属性设置为 true 来完成吗？基本上我在想像remoteCommand这样的东西？我尝试让第一个命令将连接属性设置为 true，然后 remoCommand 使用 if 循环调用该方法以在该属性设置为 true 时进行连接。那没有用。

我怀疑问题在于在对象中维护哪个节点是 selectedNode，但我不确定。任何帮助都会很棒！

编辑：答案是将节点标签存储在数据库中，然后从那里再次访问它。很简单，真的。我认为该对象在设置和调用 selectedNode 值之间的某个时间被销毁，但我对此不是 100% 确定的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:33:01.410

`action`与方法相反，`actionListener`方法必须带有`ActionEvent`参数。

您有 2 个选项：

1.  改为使用`action`。

    ```
    <p:commandButton ... action="#{mmBean.addToNetwork}" /> 
    ```

2.  添加该参数，即使您从未使用过它。

    ```
    import javax.faces.event.ActionEvent;

    // ...

    public void addToNetwork(ActionEvent event) {
        // ...
    } 
    ```

### 也可以看看：

*   [action 和 actionListener 的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener/3909382#3909382)

# ruby-on-rails - 在 Rails 中定义多个虚拟属性的 DRY 方法

> ID：13842714
> 
> 赞同：1
> 
> 时间：2012-12-12T15:12:45.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dry

我正在编写一个充当定制度量表单的应用程序。

客户模型有很多以毫米为单位的整数形式存储在数据库中的属性。由于此应用程序将在欧洲和美国使用，因此我将使用虚拟属性向用户显示英寸和厘米版本的数据。

例如对于客户身高，我的模型中有这个：

```
 def height_in_cm
    height / 10
  end

  def height_in_cm=(height)
    self.height = height.to_f  * 10
  end

  def height_in_in
    height * 0.039370
  end

  def height_in_in=(height)
    self.height = height.to_f / 0.039370
  end 
```

这在我的 _form 视图中：

```
 <% if @customer.measure_unit.eql? "imperial" %>
    <%= f.input :height_in_in %></br>
  <% else %>      
    <% if @customer.measure_unit.eql? "metric" %>
      <%= f.input :height_in_cm %></br>
    <% end %>     
  <% end %> 
```

正如我所说，我有很多属性，我的客户模型文件变得非常长并且非常容易出错。

有没有干燥的方法来缩短它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:31:46.593

封装这样的逻辑：

```
def display_height
  case measure_unit
  when 'imperial' then height_in_in
  when 'metric'   then height_in_cm
  else height_in_in
  end
end 
```

那么你的视图可以是这样的：

```
<%= @customer.display_height %> 
```

如果您在许多模型中使用这些相同的转换方法，请将其提取到一个模块中，如下所示：

```
module HeightConversions

  def height_in_cm
    height / 10
  end

  def height_in_in
    height * 0.039370
  end

  def display_height
    case measure_unit
    when 'imperial' then height_in_in
    when 'metric'   then height_in_cm
    else height_in_in
    end
  end

end 
```

并将其包含在需要的模型中：

```
class Customer
  include HeightConversions
end 
```

**编辑：**

好的，也许您需要更多类似的东西：

```
 %w(neck waist arm).each do |name|
    self.class_eval do

      define_method :"#{name}_in_cm" do
        self.send(name) / 10
      end

      define_method :"#{name}_in_cm=" do |n|
        self.send("#{name}=", (n.to_f * 10))
      end

      define_method :"#{name}_in_in" do
        self.send(name) * 0.03
      end

      define_method :"#{name}_in_in=" do |n|
        self.send("#{name}=", (n.to_f / 0.039370))
      end

    end
  end 
```

这通常称为*元编程*。这是一篇关于在 Rails 中使用不同方法的简洁文章： [http ://www.trottercashion.com/2011/02/08/rubys-define_method-method_missing-and-instance_eval.html](http://www.trottercashion.com/2011/02/08/rubys-define_method-method_missing-and-instance_eval.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:24:22.150

我会让 gem 或 javascript 进行转换。像[ruby](https://rubygems.org/gems/ruby-units) ​​-units 这样的 gem可能有点矫枉过正，但它为您可能想要的任何转换提供了持久的解决方案。

为了让 javascript 进行转换，您可以在 application.js 中添加一些内容。您还可以使用“基线”概念在 Rails 中干燥您的方法。

```
function convert_units(input, input_unit, output_unit) {
// Used to convert all units to similar intermediary unit. I used meters.
var inches_per_meter = 39.3701;
var sixteenths_per_meter = 629.9216;
var cm_per_meter = 100;
var mm_per_meter = 1000;

var intermediary = 0; //in meters

switch(input_unit)
{
  case: "mm": intermediary = input * mm_per_meter;
    break;
  case: "cm": intermediary = input * cm_per_meter;
    break;
  case: "meter": intermediary = input;
    break;
  case: "inches": intermediary = input * inches_per_meter;
    break;
  case: "sixteenths": intermediary = input * sixteenths_per_meter;
    break;
  default: return "Input unit not correctly accomodated";
}

switch(output_unit)
{
  case: "mm": return intermediary / mm_per_meter;
    break;
  case: "meter": return intermediary;
    break;
  case: "inches": return intermediary / inches_per_meter;
    break;
  case: "sixteenths": return intermediary / sixteenths_per_meter;
    break;
  case: "cm": return intermediary / cm_per_meter;
    break;
  default: return "Output unit not correctly accomodated";
}
} 
```

那么在你看来

```
convert_units(@customer.height, 'inches', 'cm'); 
```

# android - 在 ListView 中键入时 Android EditText 搜索快速删除问题

> ID：13842716
> 
> 赞同：1
> 
> 时间：2012-12-12T15:12:48.867
> 
> 标签：android, filter, android-edittext, listactivity, textwatcher

我的代码有问题，我对适配器内的 HashMap 执行搜索。它工作正常，但是当我快速删除 EditText 中的所有字母时，适配器会显示输入的第一个完整字符串的列表，而不是所有元素的列表。

示例：我键入 James，视图将获取地图中的所有 James，但如果我快速删除 EditText（按返回），则该方法会立即执行搜索并显示任何子字符串的正确列表（jame、jam、ja、 j）但最后他再次显示继承“詹姆斯”的列表而不是完整的联系人列表

感谢您的任何回答！

```
public class ContactsActivity extends ListActivity {

private HashMap<String, UserEntry> all_map_jid=new HashMap<String, UserEntry>();
private ArrayList<String> all_mkey=new ArrayList<String>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_contacts);
    getListView().setTextFilterEnabled(true);

    final EditText searchText = (EditText) findViewById(R.id.searchbox);

    TextWatcher textWatcher = new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

            //... your logic
             adapter.getFilter().filter(s.toString());

        }
        @Override
        public void afterTextChanged(Editable arg0) {
            // ... your logic

        }
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            // ... your logic
        }
    };

    searchText.addTextChangedListener(textWatcher);}

public class RosterAdapter extends BaseAdapter implements Filterable{

    //private ViewHolder holder;
    private LayoutInflater inflater;

    private HashMap<String, UserEntry> mappa_users=null;
    private ArrayList<String> mKeys;

    public RosterAdapter(){
        this.mappa_users =new HashMap<String, UserEntry>();
        this.inflater=          (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.mKeys=new ArrayList<String>();
    }
    @Override
    public int getCount() {
        return mappa_users.size();
    }

    @Override
    public UserEntry getItem(int position) {
        return mappa_users.get(mKeys.get(position));
    }

    @Override
    public long getItemId(int arg0) {
        return arg0;
    }

     public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;

        if (convertView == null) {

            convertView = inflater.inflate(R.layout.layout_row, null);

            // Creates a ViewHolder and store references to the two children
            // views we want to bind data to.
            holder = new ViewHolder();
            holder.username = (TextView) convertView.findViewById(R.id.user_info);
            holder.availability = (ImageView) convertView.findViewById(R.id.user_availability);
            holder.user_ic = (ImageView) convertView.findViewById(R.id.icon);

            // Keep track of the view holder as a tag of the view
            convertView.setTag(holder);

        } else {
            // Get the ViewHolder back to get fast access to the TextView
            // and the ImageView.
            holder = (ViewHolder) convertView.getTag(); 
        }

        String user = getItem(position).getUserName();
        //Log.e("Nome","username "+user);
        holder.username.setText(user);

        if(!(getItem(position).getUserStatus())){

            System.out.println("unavailable");
            holder.availability.setImageResource(R.drawable.ic_not_available);  

        }else{

            holder.availability.setImageResource(R.drawable.ic_available);
        }

        //do your view stuff here

        return convertView;
    }

    @Override
    public Filter getFilter() {
        return new Filter() {
            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {                 
                mappa_users = (HashMap<String,UserEntry>) results.values;
                mKeys= new ArrayList<String>(Arrays.asList(mappa_users.keySet().toArray(new String[mappa_users.size()])));
                Collections.sort(mKeys, new RosterEntryComparator(mappa_users));

                notifyDataSetChanged();
                }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {

                HashMap<String,UserEntry> searched_user=new HashMap<String,UserEntry>();
                FilterResults results = new FilterResults();

                if (constraint!= null && constraint.toString().length() > 0) {

                SmithWaterman metric = new SmithWaterman();

               for(String element : all_mkey){
                   //La mappa dell'adapter è riempito con le sole entry simily all'occorrenza ricercata
                   if (metric.getSimilarity(constraint.toString().toLowerCase(), all_map_jid.get(element).getUserName().toLowerCase()) >= 0.8 ){

                       UserEntry rEntry=all_map_jid.get(element);

                       searched_user.put(element, rEntry );

                   }

               }

              results.values = searched_user;
              results.count = searched_user.size();

                }
                else{

                        results.values = all_map_jid;
                        results.count = all_map_jid.size();

                }

                return results;
            }
        };
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:50:55.610

**解决了**

我解决了这个问题，问题是我在任何新类型上都创建了一个新的过滤器对象，使用相同的过滤器效果很好，因为正如 android 文档中所写：

> public final void 过滤器（CharSequence 约束，Filter.FilterListener 监听器）
> 
> 在 API 级别 1 中添加 启动异步过滤操作。调用此方法会取消之前所有未执行的过滤请求，并发布一个稍后将执行的新过滤请求。

这是正确的代码：

```
//My Adapter 
public class RosterAdapter extends BaseAdapter implements Filterable{

    //private ViewHolder holder;
    private LayoutInflater inflater;

    private ItemsFilter mFilter;

    private HashMap<String, UserEntry> mappa_users=null;
    private HashMap<String, UserEntry> all_map_jid=null;
    private ArrayList<String> all_mkey=null;;
    private ArrayList<String> mKeys;

    public RosterAdapter(){
        this.mappa_users =new HashMap<String, UserEntry>();
        this.inflater= (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.all_map_jid=new HashMap<String, UserEntry>();
        this.all_mkey=new ArrayList<String>();
        this.mKeys=new ArrayList<String>();
    }
    @Override
    public int getCount() {
        return mappa_users.size();
    }

    @Override
    public UserEntry getItem(int position) {
        return mappa_users.get(mKeys.get(position));
    }

    @Override
    public long getItemId(int arg0) {
        return arg0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;

        if (convertView == null) {

            convertView = inflater.inflate(R.layout.layout_row, null);

            // Creates a ViewHolder and store references to the two children
            // views we want to bind data to.
            holder = new ViewHolder();
            holder.username = (TextView) convertView.findViewById(R.id.user_info);
            holder.availability = (ImageView) convertView.findViewById(R.id.user_availability);
            holder.user_ic = (ImageView) convertView.findViewById(R.id.icon);

            // Keep track of the view holder as a tag of the view
            convertView.setTag(holder);

        } else {
            // Get the ViewHolder back to get fast access to the TextView
            // and the ImageView.
            holder = (ViewHolder) convertView.getTag(); 
        }

        String user = getItem(position).getUserName();
        //Log.e("Nome","username "+user);
        holder.username.setText(user);

        if(!(getItem(position).getUserStatus())){

            holder.availability.setImageResource(R.drawable.ic_not_available);  

        }else{

            holder.availability.setImageResource(R.drawable.ic_available);
        }

        //do your view stuff here

        return convertView;
    }

    /**
     * Implementing the Filterable interface.
     */
    @Override
    public Filter getFilter() {
        if (mFilter == null) {
            mFilter = new ItemsFilter();
        }
        return mFilter;}

        /**
         * Custom Filter implementation for the items adapter.
         *
         */
        private class ItemsFilter extends Filter {
            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {

                adapter.mappa_users = (HashMap<String,UserEntry>) results.values;
                adapter.mKeys= new ArrayList<String>(Arrays.asList(adapter.mappa_users.keySet().toArray(new String[adapter.mappa_users.size()])));
                Collections.sort(mKeys, new RosterEntryComparator(adapter.mappa_users));

                notifyDataSetChanged();
                Log.e("fine", "Terminato filtraggio "+constraint);

                }

            @Override
            protected  FilterResults performFiltering(CharSequence constraint) {

                HashMap<String,UserEntry> searched_user=new HashMap<String,UserEntry>();
                FilterResults results = new FilterResults();

                if (constraint!= null && constraint.toString().length() > 0) {

                SmithWaterman metric = new SmithWaterman();

               for(String element : all_mkey){
                   //La mappa dell'adapter è riempito con le sole entry simily all'occorrenza ricercata
                   if (metric.getSimilarity(constraint.toString().toLowerCase(), all_map_jid.get(element).getUserName().toLowerCase()) >= 0.8 ){

                       UserEntry rEntry=all_map_jid.get(element);

                       searched_user.put(element, rEntry );

                   }

               }

              results.values = searched_user;
              results.count = searched_user.size();

                }
                else{

                        results.values = all_map_jid;
                        results.count = all_map_jid.size();

                }

                return results;
            }
        }; 
```

# jquery-ui - 几个浮动图在 IE8 中不起作用

> ID：13842721
> 
> 赞同：0
> 
> 时间：2012-12-12T15:12:59.687
> 
> 标签：jquery-ui, internet-explorer-8, flot

我正在使用 jQuery UI 选项卡来显示几个图表，使用 Flot。这在除 IE8 之外的所有浏览器中都可以正常工作。看起来 IE8 不支持多个相邻的 Flot 图。以前有人经历过吗？

我在选择特定选项卡时，我正在渲染图表，请参阅下面的代码。

```
$( "#tabs" ).tabs({
    select: function(event, ui) {
        var tab = ui.index+1;
        if(tab == 1)
            rendergraph1();
        else if(tab == 2)
            rendergraph2();
        else if(tab == 3)
            rendergraph3();
    }
}); 
```

renderGraph1/2 函数只是使用一些选项来渲染图形，如下所示：

```
function rendergraph1()
{
    $.plot($("#graph1"), data, {
    ..... 
```

同样，代码在 Firefox 中运行良好。这就是为什么我不会用完整的渲染图代码来打扰你的原因 :) 以前有人经历过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:33:20.413

我假设您的其他选项卡在您绘制绘图之前是隐藏的。在旧版本的 IE 下隐藏 div 存在几个问题。

尝试在调用 plot 之前而不是之后显示选项卡/div。如果你有其他事情要做，或者正在使用某种过渡，你总是可以在之后立即隐藏选项卡/div，然后再显示它；当您调用 plot 时，它只需要可见并附加到 DOM。

# java - 使用作为参数传递的类实例化泛型类型

> ID：13842728
> 
> 赞同：1
> 
> 时间：2012-12-12T15:13:14.323
> 
> 标签：java, spring, generics

我对泛型没有那么丰富的经验，我有一个问题。我有两个类，两个泛型类型，我必须实例化传递同一个类，所以我试图做这样的事情：

```
protected MyNotGenericClass(Class<CommonType> myClass) {
    g1= new GenericType1<myClass>();
    g2 = new GenericType2<myClass>();
} 
```

并将`CommonType`类传递给构造函数：

```
new NotAGenericClass(CommonType.class); 
```

但它不起作用，因为`'myClass' cannot be resolved to a type`.

我做错了什么？

**更新**

请注意，这对我来说很重要，因为`NotAGenericClass`它不是泛型类型，因为我必须使用 Spring 实例化它，我可能会发现一些困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:11:26.873

尝试使您的类通用，如下所示：

```
public class MyClass<T extends CommonType> {

    private GenericType1<T> g1 = new GenericType1<T>();
    private GenericType2<T> g2 = new GenericType2<T>();

    // no constructor needed 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:17:07.927

**类型参数**只能是**类型**（引用类型 i.、类类型或接口类型），不能是**引用变量**。

您的代码与以下代码相同：

```
 String s="12";
        List<s>  list = new ArrayList<s>(); 
```

上面的代码是非法的，因为 Type Parameters 应该是实际的 Type (Reference Types) ，这里 s 是引用变量而不是类型。同样适用于您的代码。

**编辑：**

如果您希望您的构造函数是通用的，请执行以下操作：

```
protected <T> Constructor(T myClass) {
    g1= new GenericType1<T>();
    g2 = new GenericType2<T>();
} 
```

你的电话是：

```
new Constructor(new CommonType());
new Constructor(new AnotherCommonType()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:42:19.197

您需要将参数类型冒泡到另一个类：

```
class Foo<T> {
  private Bar1<T> g1;
  private Bar2<T> g2;
  protected Foo(Class<T> clazz) {
    g1 = new Bar1<T>();
    g2 = new Bar2<T>();
  }
} 
```

请注意，传递`clazz`参数的唯一原因是您是否需要在运行时执行一些面向反射的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:50:59.470

你不能在泛型中使用 myClass，它是一个变量而不是一个类。

如何使用泛型的示例：

```
public class GenericExample<T> {
        private T genericObject;

        public GenericExample(T genericObject){
            this.genericObject = genericObject;
        }

        public T getGenericObject(){
            return genericObject;
        }

    public static void main(String[] args){
        GenericExample<String> gen1 = new GenericExample<String>("This is a String");
        GenericExample<Integer> gen2 = new GenericExample<Integer>(1);

        String format = "value : %s, %s";
        System.out.println(String.format(format, gen1.getGenericObject(), gen1.getGenericObject().getClass()));
        System.out.println(String.format(format, gen2.getGenericObject(), gen2.getGenericObject().getClass()));
    }
} 
```

输出：

value : 这是一个字符串，类 java.lang.String

值：1，类 java.lang.Integer

# php - 在 PHP 中删除表上的行跨度

> ID：13842734
> 
> 赞同：8
> 
> 时间：2012-12-12T15:13:26.993
> 
> 标签：php, html-parsing, simple-html-dom, html-table

我想将这张表加载到多维数组中。问题在于，由于表格具有行跨度值，因此每行可能具有不同的单元格计数。所以我必须删除行跨度并添加空值而不是这些单元格。

这是我的表（原始文件）（有 5k 行。）![原始表](../Images/abcbb9f0b9bf1f5ff6eb9f47ba9edc69.png)

我必须像这样添加这个表才能有一个正确的数组。![在此处输入图像描述](../Images/c6e3dd897fe1b110c8461b9279e82669.png)

删除第一行的 colspan 值很容易。但是在当前方法中删除行跨度有时会导致数组中出现额外的值。

我当前的 PHP 文件：

```
<?php
ini_set('display_errors', true);
ini_set('mbstring.internal_encoding','UTF-8');
ini_set("memory_limit", "1024M"); 
ini_set('max_execution_time', 300);
include('simple_html_dom.php');

// Create a DOM object
$html = new simple_html_dom();

$html->load_file('stok.html');

$table = array();
$kac = array();

foreach($html->find('tr') as $row) {
        $satir = array();
        $j = 0;
        foreach($row->find('td') as $element) {
            if($kac[$j]['deger']>0){
                $satir[]='';
                $kac[$j]['deger']=$kac[$j]['deger']-1;
                $j++;
                while($kac[$j]['deger']>0){
                    $satir[]='';
                    $kac[$j]['deger']=$kac[$j]['deger']-1;
                    $j++;
                }
            }else{
                $j++;
                if(isset($element->rowspan)){
                    $kac[$j]['deger']=($element->rowspan)-1;
                }
                $satir[] = str_replace('&nbsp;', '', strip_tags($element->innertext));
            }

            if(isset($element->colspan)){
                $sayi=($element->colspan)-1;
                for($i=1;$i<=$sayi;$i++){
                    $satir[] = '';
                }
            }
        }
        $table[] = $satir;
}

echo '<pre>';
print_r($table);
echo '</pre>';
?> 
```

我当前的输出示例：（看到一些数组值中有 21、23 和 17 项。正确的是 21 项。（20 作为索引值））--没有删除示例输出中的表值--

```
Array
(
    [0] => Array
        (
        )

    [1] => Array
        (
            [0] =>   Envanter (R/B/K)   (Filitre Kodu  :  sa)    (Envanter Tarihi :28/11/2012  )    (Depo : 100)
            [1] => 
            [2] => 
            [3] => 
            [4] => 
            [5] => 
            [6] => 
            [7] => 
            [8] => 
            [9] => 
            [10] => 
            [11] => 
            [12] => 
            [13] => 
            [14] => 
            [15] => 
            [16] => 
            [17] => 
            [18] => 
            [19] => 
            [20] => 
        )

    [2] => Array
        (
            [0] => Model
            [1] => Stok Adı
            [2] => R
            [3] => Renk Adı
            [4] => B
            [5] => B
            [6] => B
            [7] => B
            [8] => B
            [9] => B
            [10] => B
            [11] => B
            [12] => B
            [13] => B
            [14] => B
            [15] => B
            [16] => B
            [17] => B
            [18] => B
            [19] => Toplam
            [20] => Resim
        )

    [3] => Array
        (
            [0] => 
            [1] => 
            [2] => 
            [3] => 
            [4] => 34
            [5] => 36
            [6] => 38
            [7] => 40
            [8] => 42
            [9] => 44
            [10] => 46
            [11] => 48
            [12] => 50
            [13] => 52
            [14] => 54
            [15] => 56
            [16] => 58
            [17] => 60
            [18] => 62
            [19] => Toplam
            [20] => 
        )

    [4] => Array
        (
            [0] => 1K011621110
            [1] => NIHAN 2111 KABAN
            [2] => 064
            [3] => FES
            [4] => 
            [5] => 
            [6] => 
            [7] => 
            [8] => 
            [9] => 
            [10] => 
            [11] => 
            [12] => 1.00
            [13] => 
            [14] => 
            [15] => 
            [16] => 
            [17] => 
            [18] => 
            [19] => 1.00
            [20] => Resim
        )

    [5] => Array
        (
            [0] => 
            [1] => 
            [2] => Toplam :
            [3] => 
            [4] => 
            [5] => 
            [6] => 
            [7] => 
            [8] => 
            [9] => 
            [10] => 
            [11] => 
            [12] => 
            [13] => 
            [14] => 
            [15] => 1.00
            [16] => 
            [17] => 
            [18] => 
            [19] => 
            [20] => 
            [21] => 
            [22] => 1.00
            [23] => 
        )

    [6] => Array
        (
            [0] => 
            [1] => 34
            [2] => 36
            [3] => 38
            [4] => 40
            [5] => 42
            [6] => 44
            [7] => 46
            [8] => 48
            [9] => 50
            [10] => 52
            [11] => 54
            [12] => 56
            [13] => 58
            [14] => 60
            [15] => 62
            [16] => Toplam
            [17] => 
        )

    [7] => Array
        (
            [0] => 1K011624760
            [1] => NIHAN 2476 KABAN
            [2] => 001
            [3] => SIYAH
            [4] => 
            [5] => 
            [6] => 
            [7] => 
            [8] => 
            [9] => 1.00
            [10] => 
            [11] => 1.00
            [12] => 
            [13] => 
            [14] => 
            [15] => 
            [16] => 
            [17] => 
            [18] => 
            [19] => 2.00
            [20] => Resim
        ) 
```

提前致谢。

**使用工作代码更新解决方案：**目前用“***”填充所有空单元格

```
<?php
ini_set('display_errors', true);
ini_set('mbstring.internal_encoding','UTF-8');
ini_set("memory_limit", "1024M"); 
ini_set('max_execution_time', 300);
include('simple_html_dom.php');

// Create a DOM object
$html = new simple_html_dom();

$html->load_file('stok.html');

$satir = array();
$rowcount = 0;
foreach($html->find('tr') as $row) {
        $colcount = 0;
        foreach($row->find('td') as $element) {
            while($satir[$rowcount][$colcount]!=''){
                $colcount++;
            }
            $satir[$rowcount][$colcount] = strip_tags(str_replace('&nbsp;', '***', $element->innertext));

            if(isset($element->colspan)){
                $sayi=($element->colspan)-1;
                for($i=1;$i<=$sayi;$i++){
                    $satir[$rowcount][$colcount+$i] = '***';
                }
            }
            if(isset($element->rowspan)){
                $sayi=($element->rowspan)-1;
                for($i=1;$i<=$sayi;$i++){
                    $satir[$rowcount+$i][$colcount] = '***';
                }
            }
            $colcount++;
        }
        $rowcount++;
}

echo '<pre>';
print_r($satir);
echo '</pre>';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T10:13:00.920

基于@deceze 的有用评论，我使用了不同的方法来解决问题。下面的代码将完成这项工作。但它会用 . 填充所有空白字段`***`。之后您可能需要重新访问整个数组以清空它。（此代码位于下方）

```
// Create a DOM object
$html = new simple_html_dom();

$html->load_file('stok.html');

$satir = array();
$rowcount = 0;
foreach($html->find('tr') as $row) {
        $colcount = 0;
        foreach($row->find('td') as $element) {
            while($satir[$rowcount][$colcount]!=''){
                $colcount++;
            }
            $satir[$rowcount][$colcount] = strip_tags(str_replace('&nbsp;', '***', $element->innertext));

            if(isset($element->colspan)){
                $sayi=($element->colspan)-1;
                for($i=1;$i<=$sayi;$i++){
                    $satir[$rowcount][$colcount+$i] = '***';
                }
            }
            if(isset($element->rowspan)){
                $sayi=($element->rowspan)-1;
                for($i=1;$i<=$sayi;$i++){
                    $satir[$rowcount+$i][$colcount] = '***';
                }
            }
            $colcount++;
        }
        $rowcount++;
}

echo '<pre>';
print_r($satir);
echo '</pre>';
?> 
```

下面的代码块将从我上面提到的那些星号中清除数组。

```
$itemcount=count($satir)-1;
for($i=1; $i<=$itemcount; $i++){
    for($j=0; $j<=20; $j++){
        if($satir[$i][$j]=='***'){
            $satir[$i][$j]='';
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-18T02:24:38.640

也许这在最近的时间里会更有帮助。我们可以使用各种工具来帮助我们删除合并的行和/或列，如下所示：

```
<?
namespace app;
use PhpOffice\PhpSpreadsheet\ExcelFactory;

class table {
    private function removeMergedCells(\DOMDocument $dom): \DOMDocument
    {
        $xpath = new \DOMXPath($dom);
        $search = $xpath->query('//table');

        /** @var \DOMNode $node */
        foreach ($search as $node) {
            $html = $dom->saveXML($node);

            $tmpHtml = \tempnam(\sys_get_temp_dir(), 'html');
            $tmpTable = \tempnam(\sys_get_temp_dir(), 'table');

            \file_put_contents($tmpHtml, $html);

            $table = ExcelFactory::load($tmpHtml);
            $merged = ($table->getAllSheets())[0]->getMergeCells();

            foreach ($merged as $cell) {
                $table->getActiveSheet()->unmergeCells($cell);
            }

            // this $writerType is case sensitive
            $writer = ExcelFactory::createWriter($table, 'Html');

            $writer->save($tmpTable);

            $domNew = new \DOMDocument();
            $domNew->loadHTML(\file_get_contents($tmpTable));

            $nodeNew = $dom->importNode($domNew->getElementsByTagName('body')[0], true);
            $node->parentNode->replaceChild($nodeNew, $node);
        }

        return $dom;
    }
}
?> 
```

# maven - 如何阻止 Jenkins 擦除作业的工作区（以及私有 Maven 存储库）？

> ID：13842735
> 
> 赞同：4
> 
> 时间：2012-12-12T15:13:27.177
> 
> 标签：maven, jenkins, jenkins-plugins

在 Jenkins 中，我使用私有 Maven 存储库（工作区本地）来避免 Maven 存储库并发问题。

我发现 Jenkins`[jenkins home]/jobs/[job]/workspace/.repository`每次构建都会删除这个 repo 文件夹 ()，这很痛苦，因为这意味着 Maven 会为每个构建下载整个 jar 世界。

我检查了我的 SCM (Accurev) 插件并修改了它的代码，以便在开始构建时它不会清除工作区。但是，Jenkins 中的其他内容仍在删除工作区。

我没有使用 Workspace Cleanup 插件或任何类似插件。

**更新：原来我没有正确修改 Accurev 插件代码。重新访问这是解决方案**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:32:46.213

经过大量修补后，我发现 Accurev 插件实际上在我的代码更改后仍在删除我的工作区。

我修复了我的代码。詹金斯不再清理我的整个工作区。

所以 - 总之，通常是您的 SCM 插件从您的工作工作区中删除文件。

# f# - 我的 F# 程序正在尝试连接到网络，但我没有网络代码

> ID：13842736
> 
> 赞同：1
> 
> 时间：2012-12-12T15:13:28.117
> 
> 标签：f#

基本上，我一直在为我自己设计的一种语言编写一个小而低效的解释器，以此来取乐。用 F# 编写它。奇怪的是，当给它一些冗长的代码来解释时，就像我的循环版本一样`"loop true do 0"`（这将转化为无限循环），它会尝试连接到网络。我知道是因为我的防火墙注意到它并问我该怎么做。这不是故意的，我的程序中没有一行网络代码。我什至更改为在解释器中循环代码作为一个实验，只是一个永恒的 F# while 循环，所以它只会永远循环而不做任何解释器的事情，但它没有任何效果。

当我说网络相关的东西时，我指的是连接到这两个地址之一： `224.0.0.252` 和 `239.255.255.250`

谷歌搜索后，我发现这`224.0.0.252`与 LLMNR（链路本地多播名称解析）有关，`239.255.255.250`与 SSDP（简单服务发现协议）有关，但我不知道那是什么意思。

有谁知道我的程序为什么这样做？

编辑：

循环代码看起来像这样的 atm（故意检查是否是我的代码执行了此操作）：

```
and loopExec scope state cond body =
    while true do ()
    GNil 
```

它尝试连接 while 循环中的某处。在我有这个之前：

```
and loopExec scope state cond body =
    let myig _ = ()
    while (exec scope state cond) <> GBool(false) do
        myig <| exec (pushScope scope) state body
    GNil 
```

其中 scope 是当前范围，state 是当前状态，cond 是条件和主体，只要 cond 为真，就应该评估什么。myig 基本上是我对问题可能是什么想法都没有了，所以我做了自己的忽略功能。exec 执行 cond 或 body 中的代码。

它不是最好的代码，我知道这一点。

编辑2：

我刚刚在整个程序的入口点插入了一个永恒循环，它仍然这样做了……在调试和发布模式下都进行了测试。

```
// Entrypoint of the program
[<EntryPoint>]
let main args =
    while true do ()
    // Display the greeting message thing
    displayHelp()
    // Prompt the user for code
    Console.Write("> ");
    let mutable inp = readCode()
    let mutable runCode = true
    let state = new Interpreter.State()
    while inp.Trim() <> "#exit" do
        if not (isValidLine inp) then
            if runCode then
                execCode state inp
            else
                printfn "Result: %A\n" (parseString inp)
        elif inp = "#help" then
            displayHelp()
            printfn ""
        elif inp = "#ast" then
            runCode <- false
        elif inp = "#run" then
            runCode <- true
        elif inp = "#names" then
            showNames state
        Console.Write("> ")
        inp <- readCode()
    // Ask the user to press enter before exiting
    printfn "[PRESS ENTER TO EXIST]"
    Console.Read() |> ignore
    Environment.ExitCode 
```

# python - 在 iPython 中移动到行首的键盘快捷键是什么？

> ID：13842738
> 
> 赞同：4
> 
> 时间：2012-12-12T15:13:29.027
> 
> 标签：python, ipython

在输入 iPython 时，按`CTRL+A`I 会按预期被带到该行的最前面。

现在，在输入一行并通过按`Up arrow`我想再次跳回前面来调用它之后，我按`CTRL+A`：

![在此处输入图像描述](../Images/badd9bc9a485ca4548e74ad2a1a4a111.png)

为什么我现在卡在屏幕右侧的空行中？如果我按`Up arrow`然后`Down arrow`在这里我得到原始线，然后我可以`CTRL+A`到它的前面，但我真的不知道为什么我首先被放在右侧。

我在 OS X 10.8.2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T15:43:25.810

与 OSX 中包含的默认行编辑库（称为`libedit`. 以至于 IPython 应该以警告开头：“检测到 libedit，readline 将不会表现良好”。

同样的警告应该告诉你如何解决它：`easy_install readline`安装标准的 readline 库，它的表现要好得多。

（请注意，由于我不完全理解的原因，您显然需要使用 easy_install，而不是我通常推荐的 pip。）

# c# - 从共享事件更新表单

> ID：13842741
> 
> 赞同：0
> 
> 时间：2012-12-12T15:13:36.057
> 
> 标签：c#, winforms, events

我有一个我用 4 创建的表单，`buttons`它会修改 a `listView`，每个都有自己的点击事件。我想知道作为一种避免在每个按钮中添加方法调用的方法，如果它们是按钮完成执行其单击事件后可用的事件？

这样做的原因是我可以更新，`listView`而后者又会更新`webBrowser`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:21:03.080

这是一个示例，当单击按钮 1 时，会向用户显示“1”，然后显示“全部”，单击按钮 2 时会显示“2”，然后显示“全部”，依此类推。

**注意：**您不想这样做 - 请参阅评论

```
 public Form1()
    {
        InitializeComponent();

        foreach(var b in Controls.OfType<Button>())
            b.Click += new EventHandler(AnyButton_Click);
    }

    void AnyButton_Click(object sender, EventArgs e)
    {
        MessageBox.Show("all");
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show("1");
    }

    private void button3_Click(object sender, EventArgs e)
    {
        MessageBox.Show("3");
    }

    private void button2_Click(object sender, EventArgs e)
    {
        MessageBox.Show("2");
    } 
```

# ios - 如何在 iOS6 模拟器中测试使用 iPhone 5 屏幕尺寸创建的应用程序？

> ID：13842745
> 
> 赞同：0
> 
> 时间：2012-12-12T15:13:47.447
> 
> 标签：ios, ios-simulator, iphone-5, iphone-4

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

虽然我使用的是 iphone6 模拟器，但我的模拟器尺寸与 iPhone 4 相同，但我想在 iphone5 屏幕尺寸下测试我的应用程序。那么，我怎样才能测试一个 iphone5 应用程序呢？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:17:58.110

在模拟器中，进入菜单“硬件”>“设备”并选择“iPhone (Retina 4-inch)”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:18:06.137

您只需要转到硬件并选择 iPhone 4in Retina。

![在此处输入图像描述](../Images/6276ac5ce1218b28733dd02645c6abe7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:19:03.307

在 Xcode 中，*iPhone 6.0 Simulator*是指带有 iOS 6.0 的 iPhone 模拟器。启动模拟器，进入*硬件*菜单，选择*iPhone (Retina 4-inch)*在 iPhone 5 (iOS 6.0) 模拟器中运行。

# hibernate - java.lang.NoSuchFieldError: TRACE while using hibernate 4.1.8.Final version

> ID：13842747
> 
> 赞同：5
> 
> 时间：2012-12-12T15:13:52.330
> 
> 标签：hibernate

在 Windows 7 上运行 Spring+hibernate 应用程序时出现以下错误。

```
Caused by: java.lang.NoSuchFieldError: TRACE
        at org.jboss.logging.Log4jLogger.translate(Log4jLogger.java:64)
        at org.jboss.logging.Log4jLogger.isEnabled(Log4jLogger.java:39)
        at org.jboss.logging.Logger.logv(Logger.java:1953)
        at org.hibernate.internal.CoreMessageLogger_$logger.tracev(CoreMessageLogger_$logger.java:443)
        at org.hibernate.cfg.EJB3DTDEntityResolver.resolveEntity(EJB3DTDEntityResolver.java:58)
        at com.sun.org.apache.xerces.internal.util.EntityResolverWrapper.resolveEntity(EntityResolverWrapper.java:110) 
```

我正在使用基于 MVN 的 4.1.8.Final 版本。我读了一些 log4j 应该是 GT 1.2.12 的地方，所以我使用的是 1.2.17，但问题仍然存在。

我的主要问题是相同的代码在 Windows XP 上运行良好。谁能帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T03:13:29.650

你的 log4j 版本有问题

```
 private static org.apache.log4j.Level translate(final Level level) {
    if (level != null) switch (level) {
        case FATAL: return org.apache.log4j.Level.FATAL;
        case ERROR: return org.apache.log4j.Level.ERROR;
        case WARN:  return org.apache.log4j.Level.WARN;
        case INFO:  return org.apache.log4j.Level.INFO;
        case DEBUG: return org.apache.log4j.Level.DEBUG;
        case TRACE: return org.apache.log4j.Level.TRACE;
    }
    return org.apache.log4j.Level.ALL;
} 
```

# file-conversion - 如何将文件从数据转换为 ASCII 格式

> ID：13842749
> 
> 赞同：2
> 
> 时间：2012-12-12T15:13:54.653
> 
> 标签：file-conversion

我有数据格式的文件 /etc/mydata

$ 文件 /etc/mydata /etc/mydata: 数据

有什么快速转换的方法

/etc/mydata：数据

从数据格式到 ASCII 格式有这个

/etc/mydata：ASCII 文本

谢谢你！谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:18:38.110

`strings`将过滤文件中的任何 ASCII 文本。但这可能不是您真正需要的。

# android - startService() Intent 是否被序列化？

> ID：13842753
> 
> 赞同：0
> 
> 时间：2012-12-12T15:14:25.330
> 
> 标签：android, android-intent, android-service

a) 如果我的代码调用`startService()`了两次，是否会按照我调用它们的顺序处理 Intent，或者它们可能会随机切换？

b）第一次运行会`onStartCommand()`在第二次调用开始之前完成，还是它们可以并行运行？

我已阅读[android 服务指南](http://developer.android.com/guide/components/services.html#ExtendingService)和参考。虽然它们清楚地显示了`IntentService`工作线程是如何序列化的，但我几乎没有找到有关如何传递和处理 Intent 的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:43:30.553

> 如果我的代码调用 startService() 两次，是否会按照我调用它们的顺序处理 Intent，或者它们是否会随机切换？

在这方面的行为`Service`是无证的，最后我检查了。但是，应该根据实际发生的情况，按照发出的顺序调用它们。

> 第一次通过 onStartCommand() 运行会在第二次调用开始之前完成，还是它们可以并行运行？

那取决于你。默认情况下，在主应用程序线程上调用 on `onStartCommand()`a `Service`，因此一次只处理一个命令。如果您选择派生线程`onStartCommand()`来处理命令，这些线程可能会并行运行。

> 虽然它们清楚地显示了 IntentService 工作线程是如何序列化的，但我几乎没有发现有关如何交付和处理 Intent 的信息。

`IntentService`维护自己的线程。您实施`onHandleIntent()`而不是（或可能除了）`onStartCommand()`。由于只有一个线程，因此一次`onHandleIntent()`只会执行一个。

# python - Python & pytz：确定时区是否支持 DST 以及 DST 和非 DST UTC 偏移量是多少

> ID：13842757
> 
> 赞同：3
> 
> 时间：2012-12-12T15:14:34.920
> 
> 标签：python, pytz

我正在使用 python 2.7.3 和 pytz。

对于描述一个地区的给定时区（例如 America/New_York），我想知道该时区是否在一年中的部分时间遵守 DST。我关心当前有效的时区定义。重新表述这个问题，鉴于当前的时区定义，这个时区观察者会在接下来的 365 天内（或停止观察它）吗？

此外，我想知道当它观察 DST 时这个时区与 UTC 的偏移量是多少，以及它不观察 DST 时的偏移量是多少。

最后，我想知道给定的时区目前是否正在观察 DST。

最终目标是生成这样的列表：

```
Name                    Observes DST     DST Offset     non-DST Offset   Presently DST
--------------------------------------------------------------------------------------
America/New_York        Yes              6              5                No 
```

我不知道如何从 pytz 获取这些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:59:46.580

据我所知，没有公共接口。您可以检查（及其子类）实例`_utc_transition_times`上存在的属性。`DstTzInfo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T22:20:15.200

我能够使用此功能解决此问题：

```
def get_tz_dst_info(tz):
    """
    Gets a 3-tuple of info about DST for a timezone. The returned elements are:
    - a boolean if this timezone observes DST
    - a Decimal UTC offset when not in DST
    - a Decimal UTC offset when in DST

    >>> from pytz import timezone
    >>> get_tz_dst_info(timezone('America/New_York'))
    (True, Decimal('-4'), Decimal('-5'))
    >>> get_tz_dst_info(timezone('Europe/Paris'))
    (True, Decimal('2'), Decimal('1'))
    >>> get_tz_dst_info(timezone('UTC'))
    (False, Decimal('0'), Decimal('0'))
    """
    dec_int_offset = timedelta_utc_offset_to_decimal(
        tz.utcoffset(DECEMBER_DATE)
    )
    jul_int_offset = timedelta_utc_offset_to_decimal(tz.utcoffset(JULY_DATE))
    jul_dst = tz.dst(JULY_DATE)
    dec_dst = tz.dst(DECEMBER_DATE)

    dst_offset = dec_int_offset
    non_dst_offset = jul_int_offset
    if jul_dst >= timedelta(seconds=0):
        dst_offset = jul_int_offset
        non_dst_offset = dec_int_offset
    elif dec_dst >= timedelta(seconds=0):
        dst_offset = jul_int_offset
        non_dst_offset = dec_int_offset
    return (dec_int_offset != jul_int_offset,
            non_dst_offset,
            dst_offset) 
```

# c++builder - 更新 TListView 的最快方法

> ID：13842761
> 
> 赞同：1
> 
> 时间：2012-12-12T15:14:45.357
> 
> 标签：c++builder, tlistview

我有一个**TListView**，其中填充了通过网络收集的数据。收集所有数据大约需要 50 毫秒，将其添加到列表大约需要 5 秒。我最初的猜测是每次添加或类似的东西后都会重新绘制。我应该怎么做才能让**TListView**尽快更新？

列和项目都是通过代码添加的。

我尝试在列表的项目上使用*BeginUpdate*和*EndUpdate*，但这并没有太大的区别。大约有 2000 个条目被添加到列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:51:13.070

如果没有看到您的实际代码，就无法确定为什么您的更新如此缓慢。但是，如果速度对您来说是个问题，特别是对于很多列表项，您应该将其`TListView`置于虚拟模式（将其`OwnerData`属性设置为 true）并将您的状态信息存储在其他地方，而不是`TListView`本身（2000 个项目很多非虚拟 ListView 处理的开销）。然后，只需在需要触发重绘时调用 ListView 的`Invalidate()`或方法，并在它要求您提供状态数据时使用该事件提供状态数据。例如：`UpdateItems()``OnData``TListView`

```
struct MyStatusInfo
{
    String Status;
    ...
};

MyStatusInfo StatusItems[2000];

__fastcall TForm1::TForm1(TComponent *Owner)
    : TForm(Owner)
{
    ...
    ListView1->Items->Count = 2000;  // you don't use Add() with a virtual ListView
    ...
}

void __fastcalll TForm1::UpdateStatus(int Index, const String &Status, ...)
{
    MyStatusInfo &Info = StatusItems[Item->Index];
    Info.Status = Status;
    ...
    ListView1->UpdateItems(Index, Index);
}

void __fastcall TForm1::ListView1Data(TObject *Sender, TListItem *Item)
{
    MyStatusInfo &Info = StatusItems[Item->Index];
    Item->Caption = Info.Status;
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:37:00.920

我不确定这是否有帮助，因为 BeginUpdate 没有，但值得尝试：

1）尝试在Enabled = false时填充它，然后启用它

2) 尝试构建一个 TListItems 并将其直接分配给 TListView 的 Items 属性

# android - 在 EditText 中为单词添加前缀

> ID：13842762
> 
> 赞同：0
> 
> 时间：2012-12-12T15:14:48.010
> 
> 标签：android, android-edittext, textwatcher

我有一个字符串列表，我想将我在 EditText 中写入的每个字符串与该列表进行比较。如果有匹配项，那么我必须添加一个“-”字符作为该单词的前缀。

我正在使用 TextWatcher，这是我到目前为止的代码：

```
 @Override
    public void afterTextChanged(Editable s) {
        String tmp = s.toString();
        words = tmp.split(" ");

        for (int i = 0; i < words.length; i++) {
            for (Iterator iterator = myList.iterator(); iterator
                    .hasNext();) {
                String str = (String) iterator.next();
                if (str.equalsIgnoreCase(words[i])) {
                    if (!words[i].contains("-")) {
                        tmp = tmp.replace(words[i], "-" + words[i]);

                    }
                    editMain.setText(tmp);
                    editMain.setSelection(tmp.length());

                }
            }
        }
    } 
```

它有效，但如果我在 EditText 中输入相同的单词两次，第一次出现两个“--”。

例如：

你好，这是-android（工作正常）

你好，这是--android -android（不能正常工作）

期望的结果应该是：

你好这是-android android（因为重复的词已经存在）

有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:20:14.013

尝试设置一个计数器。如果计数器大于 1，则不要写 -

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:22:11.573

你的问题不是很清楚。也许你的意思是 android 单词已经被找到，那么它不应该以 - 为前缀。

如果是这种情况，只需从 mylist 中删除一个数学单词。为此，请使用 listIterator。

# c# - 分组的 GridView。C＃。视窗 8

> ID：13842763
> 
> 赞同：0
> 
> 时间：2012-12-12T15:14:50.613
> 
> 标签：c#, gridview, windows-8

我做了很多样本​​，但没有遇到我的问题。也就是说，我想创建一个 Grouped GridView，它由两个组组成，除了每个组由完全不同的集合组成。例如，我想在第一组中是动物，在第二组中是汽车。

我还希望这些组中的每一个都有一个不同的模板；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:45:16.530

创建一个 ObservableCollection 并推送您的收藏项。像这样：

```
public class ScreenGroupModel
    {       

        private ObservableCollection<object> _groupItems = new ObservableCollection<object>();

        public ObservableCollection<object> GroupItems
        {
            get { return this._groupItems; }
        }

        public ScreenGroupModel()
        {

        }      

        public ObservableCollection<object> GetScreenGroups()
        {            
            _groupItems.Add(new Class1);
            _groupItems.Add(new Class2);           

            return _groupItems;
        }       
    } 
```

这个示例，简单的集合显示。您可以使用 DataTemplateSelectors。每种类，选择一个模板。ObservableCollection -> "object" 类型很重要。因为，对象是基本类型。你可以添加，每类。问候 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:39:26.670

使您的两个内部集合项都派生自一个公共基类。当我这样做时，我有一个 ItemBase 类，而我的 Event、Story 和 Party 类都派生自 Item base。

然后，我的组集合项中的每个项都包含 ObservableCollection 项的定义。（我想，现在考虑一下，我可以使用 object 作为隐含的基类型，但我没有）在编码时，这实际上是用我的派生类填充的，例如

```
Items.Add(new Event { Title = "I am an event" }; 
```

当您在网格中显示项目时，您需要创建一个派生自[ItemTemplateSelector 的新类，并覆盖 SelectTemplateCore(object item, DependencyObject container)](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.datatemplateselector.selecttemplatecore)方法。我的逻辑很简单

```
if(item is Event) { return EventTemplate; }
else if(item is Story) { return StoryTemplate }
else { return DefaultTemplate; } 
```

（我的派对项目使用了默认模板。）

# javascript - (AJAX) 通过 javascript 获取 xml

> ID：13842765
> 
> 赞同：0
> 
> 时间：2012-12-12T15:14:54.387
> 
> 标签：javascript, xml, ajax

我通过 javascript 将 XML 检索到 Ajax 中遇到了问题。问题是，脚本从数据库收集数据并将其以 xml 形式返回需要 45 秒。我的代码不再起作用了。在本地加载数据时，它工作正常。有任何想法吗 ？这里没有跨域问题！

```
//Get XML Data
    $.ajax({
        type: 'GET',
        url: 'http://.../export.jsp',
        dataType: 'xml',
        success: function(xml_list) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:33:18.557

听起来您的 JSP 脚本对数据库的响应速度很慢。当您说本地数据很好时，这一点就更加明显了。我会检查您的 JSP 脚本并检查您的数据库的慢查询日志以查看发生了什么。

# couchdb - 如何在一个地图功能中使用 CouchDB 进行搜索和排序

> ID：13842766
> 
> 赞同：3
> 
> 时间：2012-12-12T15:14:55.107
> 
> 标签：couchdb

我对我的 CouchDB 知识有点困惑。

我有一个用标签数组标记的内容数据库，并且有一个创建日期。

我想创建一个视图，该视图可以提取有限数量的带有特定标签的最新故事。

例如，最新的 6 个故事标记为“业务”。

遇到[这个问题](https://stackoverflow.com/questions/4773069/sorting-dates-in-couchdb-views)，这似乎让我几乎到达了我需要去的地方，但我缺少一个关键元素，我认为这是如何制作查询字符串以按一个键排序同时按另一个键进行搜索。

这是我的地图功能。

```
function(doc) {
    if (doc.published == "yes" && doc.type == "news") {
        for (var i = 0; i < doc.tags.length; i++) {
            if (doc.tags[i]) {
                emit([doc.created, doc.tags[i]], doc);
            }
        }
    }
} 
```

那么如何查询该视图以查找所有标记为“业务”的文档，这些文档是基于创建的最新文档。

created 属性是日期可排序格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:33:59.683

首先，我会切换你的发射顺序：

```
emit([doc.tags[i], doc.created]); 
```

*（同样省略`doc`，您可以添加`include_docs=true`以获取整个文档，并且您的视图在此过程中不会占用太多磁盘空间）*

`"Business"`现在您可以使用以下查询字符串查询所有标记为的故事：

```
startkey=["Business"]&endkey=["Business",{}] 
```

您将获得所有带有标签业务的文档，它们将按日期排序。

这利用了[视图排序](http://wiki.apache.org/couchdb/View_collation)规则，它基本上是管理索引如何排序/查询的规则。*对于像这样的复杂键，对数组的每个项目分别*进行排序。（即第一个键首先排序，第二个键排序第二，等等）这就是顺序很重要的原因，因为在查询视图索引时必须始终从左到右移动。

如果您想要 6 个最新的，您的查询字符串将需要更改：

```
descending=true&limit=6&endkey=["Business"]&startkey=["Business",{}] 
```

**注意**由于参数的工作方式，您需要交换`startkey`/值。有关进一步说明，请参阅[wiki 上的查看参考页面。](http://wiki.apache.org/couchdb/HTTP_view_API)`endkey``descending`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:53:42.513

好的，我想我想通了，但我不太确定我是否完全理解它。

我发现了这个关于复杂键以及搜索和排序的[故事。](http://ryankirkman.github.com/2011/03/30/advanced-filtering-with-couchdb-views.html)

我的地图功能如下所示：

```
function(doc) {
    if (doc.published == "yes" && doc.type == "news") {
        for (var i = 0; i < doc.tags.length; i++) {
            if (doc.tags[i]) {
                emit([doc.tags[i], doc.created], doc);
            }
        }
    }
} 
```

并使用它进行查询和排序，查询看起来像这样。

http://localhost:5984/database/_design/story/_view/tagged?limit=10&startkey=["Business"]&endkey=["Business",{}]&descending=false

我得到了我想要的结果，但我不完全确定我理解了这一切。

# asp.net - ext : System.Exception: 序列包含多个匹配元素

> ID：13842769
> 
> 赞同：0
> 
> 时间：2012-12-12T15:14:59.243
> 
> 标签：asp.net, extjs, sqldatasource, ext.net

为什么会发生此错误？任何想法 ？！

（我使用 sqldatasource 将数据从表单插入到数据库中）

我已经设置了`ShowWarningOnFailure="true"`，错误窗口告诉我这一点。

```
{
    serviceResponse: {
        success: false,
        message: "System.Exception: Sequence contains more than one matching element ---> System.InvalidOperationException: Sequence contains more than one matching element\r\n at System.Linq.Enumerable.Single[TSource](IEnumerable1 source, Func2 predicate)\r\n at Ext.Net.Store.InsertCallback(Int32 recordsAffected, Exception exception) in C:\Users\Geoffrey McGill\Documents\Visual Studio 2010\Projects\Ext.NET\v2\Ext.Net\Ext\Data\Store.cs:line 1053\r\n at System.Web.UI.DataSourceView.Insert(IDictionary values, DataSourceViewOperationCallback callback)\r\n at Ext.Net.Store.MakeInsertes(IDataSource ds, JArray data) in C:\Users\Geoffrey McGill\Documents\Visual Studio 2010\Projects\Ext.NET\v2\Ext.Net\Ext\Data\Store.cs:line 982\r\n at Ext.Net.Store.MakeChanges() in C:\Users\Geoffrey McGill\Documents\Visual Studio 2010\Projects\Ext.NET\v2\Ext.Net\Ext\Data\Store.cs:line 839\r\n at Ext.Net.Store.DoSaving(String action, String jsonData, JToken parameters) in C:\Users\Geoffrey McGill\Documents\Visual Studio 2010\Projects\Ext.NET\v2\Ext.Net\Ext\Data\Store.cs:line 793\r\n --- End of inner exception stack trace ---\r\n at Ext.Net.Store.DoSaving(String action, String jsonData, JToken parameters) in C:\Users\Geoffrey McGill\Documents\Visual Studio 2010\Projects\Ext.NET\v2\Ext.Net\Ext\Data\Store.cs:line 806\r\n at Ext.Net.Store.RaiseAjaxPostBackEvent(String eventArgument) in C:\Users\Geoffrey McGill\Documents\Visual Studio 2010\Projects\Ext.NET\v2\Ext.Net\Ext\Data\Store.cs:line 1131",
        data: 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:35:52.340

Store.c 文件中没有 System.Linq.Enumerable.Single 调用。

所以，Ext.NET 不应该产生这个异常。

插入新记录时是否会引发此异常，对吗？

如果是，我会尝试按原样检查 SqlDataSource 的 InsertCommand，即没有 Ext.NET 上下文。

还有一个问题是讨论了类似的例外。
[序列包含多个元素](https://stackoverflow.com/questions/1256757/sequence-contains-more-than-one-element)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:25:18.750

看起来问题是您在某处调用扩展方法 Single() ，并且您传递的谓词导致多个匹配项。Single() 只能返回一个实体，因此会引发异常。

# java - 同时搜索外部文件中的多个单词（Java）

> ID：13842772
> 
> 赞同：1
> 
> 时间：2012-12-12T15:15:07.593
> 
> 标签：java, netbeans

我正在尝试创建的程序是一个程序，它从用户定义的文件中获取单词，将这些单词保存为变量，然后在不同的用户定义文件中搜索这些单词，并在那里输出位置。

该程序一直工作到并包括程序获取单词并将它们保存为变量的位置。该程序的问题是搜索方法返回空结果。我的主要怀疑是 search 方法中的代码与 read 方法中的代码不兼容，或者这两种方法没有同时运行。

search 方法在 search 类中， read 方法在 reading 类中。

这是我的代码（包含我所有的 3 个类），请原谅所有的导入。

这是第一堂课：

```
import java.io.FileNotFoundException;
import java.util.Scanner;

public class Combination{

    public static void main(String[] args) throws FileNotFoundException{

    Scanner userInput = new Scanner(System.in);
    Reading ReadingObject = new Reading();        
    System.out.println("Please enter the file that you wish to open");
    String temp = userInput.nextLine();
    ReadingObject.setFileName(temp);
    ReadingObject.read();
    Scanner searchForWord = new Scanner(System.in);
    Searching SearchingObject = new Searching();
    System.out.println("Please enter the file that you would like to search for these words in");
    String temp1 = searchForWord.nextLine();
    SearchingObject.setFileName(temp1);
    SearchingObject.search();

}    
} 
```

这是第二类：

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;

class Reading {
private String file;
public void setFileName(String fileName){
    file = fileName;
}
public String getFileName(){
    return file;
}
public void read(){
    try{
        //Choosing the file to open
        FileInputStream fstream = new FileInputStream(getFileName());

        //Get the object of datainputstream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine = null;

        //Read the file line by line
        while((strLine = br.readLine()) != null){
            //      \\s+ means any number of whitespaces between tokens
            String [] tokens = strLine.split("\\s+");
            String [] words = tokens;
            for(String word : words){
                System.out.print(word);
                System.out.print(" ");

                Searching SearchingObject = new Searching();
                SearchingObject.setWord(word);
            }
            System.out.print("\n");   
        }
        in.close();  
    }
    catch(Exception e){
        System.err.println("Error: " + e.getMessage());  
    }
}
} 
```

这是第三类：

```
import java.io.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

class Searching {
private String file1;
public void setFileName(String fileName){
    file1 = fileName;
}
public String getFileName(){
    return file1;
}
private String word1;
public void setWord(String wordName){
    word1 = wordName;    
}
public String getWord(){
    return word1;
}

public void search() throws FileNotFoundException{

    try{
        //Choosing the file to open
        FileInputStream fstream = new FileInputStream(getFileName());

        //Get the object of datainputstream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine = null;

        while((strLine = br.readLine()) != null){

            Pattern p = Pattern.compile(getWord());
            Matcher m = p.matcher(strLine);

        int start = 0;
        while (m.find(start)) {
            System.out.printf("Word found: %s at index %d to %d.%n", m.group(), m.start(), m.end());
            start = m.end();
                }
          }        
    }
    catch(Exception e){
        System.err.println("Error: " + e.getMessage());
    } 
}
} 
```

任何帮助将不胜感激。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:36:51.920

您的代码很难阅读。你的`reading`课不仅阅读；它也搜索。你应该称它为反映其预期用途的东西。但是，它忘记告诉它的`searching`对象在哪里搜索，并且没有将此对象的引用传递给其他任何人。在这个片段中

```
for (String word : words) {
    System.out.print(word);
    System.out.print(" ");

    searching searchingObject = new searching();
    searchingObject.setWord(word);
} 
```

你基本上什么也没做。对的引用`searchingObject`永远丢失了。

您的`reading`类应该在 ArrayList 中保留要搜索的单词`searching`，而不是实例化搜索对象。

您的`searching`类应该将这些 ArrayList 之一作为构造函数参数 - 并将其转换为单个正则表达式，这比每个单词读取一次文件要高效得多。您可以使用单个正则表达式“a|b|c”搜索“a”、“b”和“c”。也适用于更长的单词。首先逃离它们以避免出现问题。

哦，请遵循命名准则。叫你`reading`的 a `TokenReader`，你`searching`的 a `WordListSearcher`...

# python - 在 PyCharm 交互式控制台命令历史记录中搜索

> ID：13842774
> 
> 赞同：19
> 
> 时间：2012-12-12T15:15:26.313
> 
> 标签：python, pycharm, console

PyCharm 为其交互式 Python 控制台保留命令历史记录。

有没有办法通过某种搜索来访问此历史记录，而不仅仅是在交互式控制台窗口中使用箭头键浏览条目？

我的环境：MacOS X 10.8.2 上的 PyCharm 2.7 EAP (124.138)。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-26T19:59:30.190

从 PyCharm 3.1 开始，在控制台中按 ⌥⌘e 会出现“浏览历史”窗口，开始输入以搜索特定命令

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-12T15:28:45.557

尚不可用，请为相关功能请求投票：

*   [PY-7922](http://youtrack.jetbrains.com/issue/PY-7922)在控制台中，通过键入前缀并按“向上”键搜索历史记录
*   [PY-5011](http://youtrack.jetbrains.com/issue/PY-5011)控制台中的 Ctrl+R 应该像在 bash 中一样调用历史搜索

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-04-11T13:13:40.013

如今，python 控制台左侧有**“浏览控制台历史记录”按钮。**它适用于 PyCharm 工作的所有操作系统。

在 Windows 和 Linux 中，**Ctrl+Alt+E**完全一样，但如果它被系统热键 Alt 覆盖，它可能无法在 Linux 上工作。

[![在此处输入图像描述](../Images/7c9cdbb75a0c651edfd7a4e7edf333f2.png)](https://i.stack.imgur.com/SGjaO.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-07-03T11:47:36.580

在 Windows 中，您可以使用 Ctrl Alt e

# javascript - 如何使用 javascript 分配组合框值

> ID：13842777
> 
> 赞同：0
> 
> 时间：2012-12-12T15:15:27.700
> 
> 标签：javascript, arrays, combobox

想象一下，你有一个这样的数组：

```
myArray[0] = 1,2,3
myArray[1] = 2,3,5
myArray[2] = 1,4,5 
```

其中 (1,2,3),(2,3,5),(1,4,5) 是组合框值。

例如。当 myArray[0]:

```
<select name="somename" id="someid">
<option value="1">one</option>
<option value="2">two</option>
<option value="3">three</option>
</select> 
```

例如。当 myArray[1]：

```
<select name="somename" id="someid">
<option value="2">two</option>
<option value="3">three</option>
<option value="5">five</option>
</select> 
```

现在，重点是将这些`myArray[]`值之一分配给组合框？是否可以？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:20:09.363

当然。您可以循环数组中的元素，然后从中构建您的 html。

```
var html = '';

for(var i = 0; i < myArray[0].length; i++){
   html += '<option value="' + myArray[0][i] + '">' + myArray[0][i] + '</option>';
}

document.getElementById('someid').innerHTML = html; 
```

注意：这是一个非常简单的示例来演示逻辑。如果您确实需要该功能，您当然还需要一种方法将您的数字转换为文本值（即，将 1 转换为“一”）。

如果这不是您想要的，请尝试更好地解释您的问题。不清楚是否要使用特定索引`myArray`来创建一个选择。或者，如果您想使用相应的数组值填充多个选择列表（已经存在）。如果是后者，那么您应该更清楚“someid”到底是什么，以便我们可以正确识别每个选择列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:20:21.713

您可以遍历您的数组并创建适当的 DOM 元素。这是一个示例，您需要向单词添加一个数值查找数组：

```
numwords = ["one", "two", "three", "four", "five"];
myArray = [];
myArray[0] = [1,2,3];
myArray[1] = [2,3,5];
myArray[2] = [1,4,5];
for(var i = 0; i < myArray.length; i++){
    var select = document.createElement('select');
    for(var j = 0; j < myArray[i].length; j++){
        var option = document.createElement('option');
        option.value = myArray[i][j];
        option.innerHTML = numwords[myArray[i][j] - 1];
        select.appendChild(option);
    }
    document.body.appendChild(select);
} 
```

这是一个演示：http: [//jsfiddle.net/YJj3b/1](http://jsfiddle.net/YJj3b/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T15:23:49.890

没有 jQuery，假设您已经有了“Select”对象：

```
var s = document.getElementById('someid');
var words = ["one", "two", "three", "four", "five"];

for(var i = 0; i < myArray[0].length; i++){
   var t = document.createElement("option")
   t.value = myArray[0][i];
   t.textContent = words[myArray[0][i]-1];
   s.appendChild(t)
} 
```

（**[工作示例](http://jsfiddle.net/gfSbF/2/)**）

否则，添加：

```
var s = document.createElement("select");
s.id = 'someid';
s.name = 'somename';
var words = ["one", "two", "three", "four", "five"];

for(var i = 0; i < myArray[0].length; i++){
   var t = document.createElement("option")
   t.value = myArray[0][i];
   t.textContent = words[myArray[0][i]-1];
   s.appendChild(t)
}
document.body.appendChild(s); 
```

我更喜欢手动 DOM 操作 ( `.textContent`) `innerHTML`，因为`innerHTML`每次使用时都会强制浏览器重新解析整个 DOM，因为浏览器不可能预测添加的 HTML 的结构。这使得 DOM 操作渲染比使用时更快`innerHTML`

# c# - ASP.NET 动态复选框或下拉列表

> ID：13842779
> 
> 赞同：0
> 
> 时间：2012-12-12T15:15:36.977
> 
> 标签：c#, asp.net

我在 ASP.NET 站点中有一个 gridview。

现在有一个 TemplateField 可以正常工作 - 这是一个调查表，默认情况下使用文本框回答问题：

```
<asp:TemplateField HeaderText="" Visible="True" >
   <ItemTemplate>
      <asp:TextBox ID="txtAnswer" Text='<%# Bind("Answer") %>' runat="server" 
       TextMode="MultiLine" Height="76px" MaxLength="2000" Width="377px">
       </asp:TextBox>
    </ItemTemplate>
 <EditItemTemplate>
       <asp:TextBox ID="txtAnswer" Text='<%# Bind("Answer") %>' runat="server" 
       TextMode="MultiLine" Height="76px" MaxLength="2000" Width="377px">
       </asp:TextBox>
 </EditItemTemplate>
 </asp:TemplateField> 
```

现在的要求是添加可以由下拉列表回答的新问题。我对如何做到这一点有一个想法（将问题编号传递给一个函数并检查是否存在存储在另一个表中的下拉答案），但我正在努力根据问题类型动态更新模板字段...有什么建议么？

**更新**

我设法通过一个辅助函数来部分工作。（可能不是我最好的代码，但它几乎可以完成工作）问题是我得到一个字符串，告诉我输出中的类型而不是实际控件（分别为文本框或下拉列表）......我该如何纠正?

```
 public Control GetAnswerControl(string QuestionID, string Answer)
{
    List<ListItem> lstOptions = new List<ListItem>();

    SqlCommand cmd = new SqlCommand("pDropDownAnswers_Get", functions.NewSupplierRequest);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add("@QuestionID", SqlDbType.Int);
    cmd.Parameters["@QuestionID"].Value = Int32.Parse(QuestionID);

    try
    {
        functions.NewSupplierRequest.Open();
        SqlDataReader r = cmd.ExecuteReader();
        while (r.Read())
        {
            lstOptions.Add(new ListItem(r["DropDownAnswer"].ToString(), r["DropDownAnswer"].ToString()));
        }
    }
    catch (Exception err)
    {
        this.lblError.Text = err.Message;
    }
    finally
    {
        functions.NewSupplierRequest.Close();
    }

    if (lstOptions.Count == 0)
    {
        TextBox tb = new TextBox();
        tb.ID = "txtAnswer";
        tb.Text = Answer;
        tb.TextMode = TextBoxMode.MultiLine;
        tb.Height = 76;
        tb.Width = 377;
        tb.MaxLength = 2000;

        return tb;
    }
    else
    {
        DropDownList dl = new DropDownList();
        dl.DataSource = lstOptions;
        dl.DataBind();
        dl.SelectedValue = Answer;
        return dl;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:05:31.183

我最终让这个以不同的方法工作......

1.  首先，我在 gridview 中设置了一些隐藏字段和一个占位符来保存问题 ID 和答案 ID
2.  然后我创建了一个辅助函数来遍历 gridview 的行，从隐藏字段中获取 ID 和答案。
3.  从代码隐藏将控件添加到占位符实际上将它们格式化为控件，而不是我得到的字符串。

# java - MappingException：使用实体子类作为命令时的未知实体

> ID：13842781
> 
> 赞同：1
> 
> 时间：2012-12-12T15:15:43.097
> 
> 标签：java, spring, hibernate, spring-mvc, spring-3

我有一个使用休眠注释映射的用户对象，工作得很好。

例如

```
@Entity
public class User implements Serializable {

   @Id
   @GeneratedValue(strategy = GenerationType.AUTO)
   private Long userId;

   etc ..
} 
```

然后我有一个使用 Spring 3 MVC 的“添加用户”表单，我需要一个命令对象来支持这个表单，所以我在 UserCommand 中从上面对用户进行了子类化。UserCommand 上有一些与 Web 界面等相关的额外内容，不需要保存为 User 实体的一部分。

例如

```
public class UserCommand extends User {

    private String initialAddress;

    etc
} 
```

因此，我的视图/表示层基本上创建了一个 UserCommand 对象，填写用户详细信息，然后控制器将其提交给服务/dao 层以进行持久化。由于 UserCommand extends ("is-a") User dao 接受 UserCommand 实例并通过 dao 验证检查（例如，确保已填写用户名和密码）。

但是，当休眠实际上将对象作为实体持久保存在数据库中时，它似乎意识到实际对象是一个用户命令，它不是一个映射实体，即使它的超类型是。

产生的错误是；

```
 org.hibernate.MappingException: Unknown entity: com.example.UserCommand
       org.hibernate.impl.SessionFactoryImpl.getEntityPersister(SessionFactoryImpl.java:691)
       org.hibernate.impl.SessionImpl.getEntityPersister(SessionImpl.java:1494)
       org.hibernate.engine.ForeignKeys.isTransient(ForeignKeys.java:202)
       org.hibernate.event.def.AbstractSaveEventListener.getEntityState(AbstractSaveEventListener.java:531)
       org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:102)
       org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61)
       org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:808)
       org.hibernate.impl.SessionImpl.persist(SessionImpl.java:782)
       org.hibernate.impl.SessionImpl.persist(SessionImpl.java:786) 
```

有没有办法解决这个问题？我似乎是一件显而易见的事情，表单正在填写一个用户，所以只需使用用户的扩展名（即 UserCommand）作为表单的支持命令对象。

还是我将不得不打破继承，在 UserCommand 中复制用户的字段，并在表单提交期间将所有值从 UserCommand 显式复制到 User 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:28:19.877

我认为混合数据库和视图实体是一种不好的做法。这些是不同的层，它们应该在不同的 DTO 上运行。通常我使用以下模式在两层之间进行转换：

```
public class UserCommand {
    public static UserCommand fromUser(User user) {
        UserCommand command = new UserCommand();
        // fill UserCommand fields
        return command;
    }

    public void toUser(User user) {
        // fill User fields
    }
} 
```

如果视图和数据库 DTO 之间的转换需要一些复杂的逻辑，您可以将这些方法移至转换服务。

拆分这些实体的一个好处是验证。您可以指定 JSR-303 注释来验证这些 bean，并且在大多数情况下，它们对于 UI 和 DB 会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:18:27.027

我刚刚在 Hibernate 3.6 中遇到了这个问题，你可以显式地定义一个子类。

[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html)

使用 xml，您可以：

```
<subclass name="DomesticCat"
          discriminator-value="D">
   <property name="name" type="string"/>
</subclass> 
```

或带注释：

```
@Entity @DiscriminatorValue("D")
public class DomesticCat extends Cat {
   //class implementation here
} 
```

**编辑：**
不要忘记鉴别器。

```
<discriminitor insert="false" formula="'C'" />

@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(discriminatorType=DiscriminatorType.STRING, insert=false)
@DiscriminatorFormula("'C'")
@DiscriminatorValue("C")
public class Cat { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:36:31.427

同意霍兹。如果您想轻松地将对象的每个字段从 DTO 复制到 DB，您可以使用[Dozer](http://dozer.sourceforge.net/)实用程序。

# php - mod_fcgid 进程何时停止？

> ID：13842782
> 
> 赞同：1
> 
> 时间：2012-12-12T15:15:50.197
> 
> 标签：php, mod-fcgid

据我所知，每个请求都会启动一个 mod_fcgid 进程。我想了解 mod_fcgid 进程何时/为何停止？PHP 致命错误是否会停止/删除进程？

我的问题的背景是，我想知道 PHP 致命错误是否可能是导致多个僵尸 mod_fcgid 进程的原因。不幸的是，我无法访问服务器以向您提供有关服务器的更多信息。我唯一能看到的是访问/错误日志。

首先，我想了解 mod_fcgid 进程是如何启动和停止的，如开头所述。

非常感谢您的帮助

亲切的问候！

# ruby-on-rails - 与 CanCan 的热销订单

> ID：13842783
> 
> 赞同：2
> 
> 时间：2012-12-12T15:16:04.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan, spree

我正在尝试使用 cancan 修改 spree 的管理/订单站点。在我的商店，产品从不同的供应商处出售。注册用户有一个`vendor_id`，产品也有一个`vendor_id`。下订单时，`LineItem`订单中的 a 有 a `Product`，因此它有 a `vendor_id`。

我想要实现的是，当用户登录并访问管理面板中的订单页面时，他只能看到从他那里订购产品的订单。用户不应看到来自其他供应商/用户的其他订单。

我尝试通过设置一些功能来使用 CanCan 来做到这一点：

```
 def initialize(user)
    if user.has_spree_role?("shop_manager") && !user.vendor.nil?
      can :admin, Spree::Order
      can :index, Spree::Order, :line_items => { :product => { :vendor_id => user.vendor_id } }
      can :show, Spree::Order, :line_items => { :product => { :vendor_id => user.vendor_id } }
      can :manage, Spree::LineItem, :product => { :vendor_id => user.vendor_id }
      can :read, Spree::Order
    end
  end 
```

如您所见，用户应该只在索引页面查看订单 where`:line_items => { :product => { :vendor_id => user.vendor_id } }`并且应该只查看`LineItems`where `:product => { :vendor_id => user.vendor_id }`。

但是我得到的行为是，我无权查看订单的索引页面，并且每个`LineItem`都显示在订单的显示操作中。

对于第二个任务，我认为修改视图是个好主意。我试图从 spree 核心更改并更改所有显示`_order_details.html.erb`的循环：`LineItems`

```
<% @order.line_items.accessible_by(@current_ability).each do |item| %> 
```

但这给了我一个`Uninitialized constant Product`（我认为应该是`Spree::Product`）。所以，我不知道该怎么做，无论是索引还是带有`LineItems`. 希望有人有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:40:21.593

Why you set restriction for :read, :show and :index at the same time?

:read assumes :index and :show and any aliased methods.

Then, if you pass associated conditions, you have to :join or :include it.

```
def initialize(user)
  if user.has_spree_role?("shop_manager") && !user.vendor.nil?
    can :admin, Spree::Order
    can :read, Spree::Order, Spree::Order.includes(:line_items).where(:line_items => { :product => { :vendor_id => user.vendor_id } })
    can :manage, Spree::LineItem, Spree::LineItem.includes(:product).where(:product => { :vendor_id => user.vendor_id })
  end
end 
```

For the second issue, try it again, but it will be much better if you collect records anywhere BEFORE ActionView runtime, in controller. It will be much much faster anyway.

Update:

```
def initialize(user)
  if user.has_spree_role?("shop_manager") && !user.vendor.nil?
    can :admin, Spree::Order
    can :read, Spree::Order, Spree::Order.includes(:line_items).where(:line_items => { :product => { :vendor_id => user.vendor_id } }) do |order|
      order.line_items.includes(:product).exists?(:vendor_id => user.vendor_id)
    end
    can :manage, Spree::LineItem, Spree::LineItem.includes(:product).where(:product => { :vendor_id => user.vendor_id })
  end
end 
```

What pass the block. When you define :read, the first AR::Relation statement filters the :index (listing), and the block clause filters the :show and give you ability to user can? and cannot?.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T19:30:17.887

要解决`Uninitialized constant Product issue`，您需要在过滤器中或之前添加`:class`选项：`load_resource``load_and_authorized_resource`

[https://github.com/ryanb/cancan/wiki/authorizing-controller-actions](https://github.com/ryanb/cancan/wiki/authorizing-controller-actions)

# mysql - Matlab 数据库工具箱 - 警告：com.mysql.jdbc.Connection@6e544a45 不可序列化

> ID：13842787
> 
> 赞同：1
> 
> 时间：2012-12-12T15:16:16.900
> 
> 标签：mysql, database, jdbc, matlab

我正在通过 Matlab 数据库工具箱连接到 MySQL 数据库，以便在 2 个嵌套的 for 循环中一遍又一遍地运行相同的查询。每次迭代后，我都会收到以下警告：

```
Warning: com.mathworks.toolbox.database.databaseConnect@26960369 is not serializable 
  In Import_Matrices_DOandT_julaugsept_inflow_nomettsed at 476 
Warning: com.mysql.jdbc.Connection@6e544a45 is not serializable 
  In Import_Matrices_DOandT_julaugsept_inflow_nomettsed at 476 
Warning: com.mathworks.toolbox.database.databaseConnect@26960369 not serializable 
  In Import_Matrices_DOandT_julaugsept_inflow_nomettsed at 476 
Warning: com.mysql.jdbc.Connection@6e544a45 is not serializable 
  In Import_Matrices_DOandT_julaugsept_inflow_nomettsed at 476 
```

我的代码基本上是这样的结构：

```
%Server
host = 
user = 
password = 
dbName = 

%# JDBC parameters
jdbcString = sprintf('jdbc:mysql://%s/%s', host, dbName);
jdbcDriver = 'com.mysql.jdbc.Driver';

%# Create the database connection object
conn = database(dbName, user , password, jdbcDriver, jdbcString);
setdbprefs('DataReturnFormat', 'numeric');

%Loop
for SegmentNum=3:41;
    for tl=1:15;
    tic;
    sqlquery=['giant string'];
    results = fetch(conn, sqlquery);
    (some code here that saves the results into a few variables)

    save('inflow.mat');
    end
end

time = toc

close(conn);
clear conn 
```

最终，经过一些迭代后，代码将因以下错误而崩溃：

```
Error using database/fetch (line 37)
  Query execution was interrupted

Error in Import_Matrices_DOandT_julaugsept_inflow_nomettsed (line
466)
results = fetch(conn, sqlquery); 
```

昨晚它在 25 次迭代后出错。我总共需要进行大约 600 次迭代，而且我不想每 25 次重复检查一次。我听说数据库连接对象可能存在内存问题......有没有办法保持我的代码运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:08:46.273

让我们一步一步来。

> 警告：com.mathworks.toolbox.database.databaseConnect@26960369 不可序列化

这来自这条线

```
save('inflow.mat'); 
```

您正在尝试保存数据库连接。那是行不通的。尝试仅指定您希望保存的变量，它应该会更好。

有一些技巧可以排除这些值，但老实说，我建议你只找到你想要保存的最重要的变量，然后保存它们。[但是，如果您愿意，您可以从此页面](http://www.mathworks.com/matlabcentral/newsreader/view_thread/293535)拼凑出一个解决方案。

```
save inflow.mat a b c d e 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:07:51.680

尝试将查询包装在一个`try` `catch`块中。每当您发现错误时，都会重置与应该释放对象的数据库的连接。

```
nQuery = 100;

while(nQuery>0)
   try
      query_the_database();
      nQuery = nQuery - 1;
   catch
      reset_database_connection();
   end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T15:29:05.597

造成这种情况的最终主要原因是数据库连接对象是 TCP/IP 端口，多个进程无法访问同一个端口。这就是数据库连接对象没有被序列化的原因。端口不能被序列化。

解决方法是在 for 循环中创建一个连接。

# variables - Kendo UI 使用模板数据作为 javascript 变量

> ID：13842788
> 
> 赞同：3
> 
> 时间：2012-12-12T15:16:17.873
> 
> 标签：variables, kendo-ui

我正在寻找一种方法（如果有的话）将从模板内部的数据源检索到的数据用作 javascript。

让我澄清一下...

在我的数据源结果中，我有一个名为`ItemType`. 在模板中，我将使用此变量`${ItemType}`在页面中“回显”它。

您可以在模板中使用 javascript 来使用`# if (...) { console.log('test') } #`.

我想要实现的是像这样使用模板的javascript`${ItemType}` *内部：*

```
<script type="text/x-kendo-tmpl" id="dossier_template">
# var type= "${ItemType} "; # 
```

如果我可以根据数据源项设置变量，我可以在模板的其余部分中使用 if 语句，如下所示：

```
# if(type == '1') {#
   <div class="type_one"></div>
# else { #
   <div class="type_two"></div>
# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:44:24.397

你可以试试这个：

```
# var type= ItemType; # 
```

这也应该有效：

```
# if(ItemType == '1') {#
   <div class="type_one"></div>
# else { #
   <div class="type_two"></div>
# 
```

# android - SupportMapFragment 到膨胀地图上的 DialogFragment 错误

> ID：13842790
> 
> 赞同：1
> 
> 时间：2012-12-12T15:16:26.070
> 
> 标签：android, android-dialogfragment, supportmapfragment

我正在编写一个类来显示`SupportMapFragment`a `DialogFragment`，如图所示。问题是我收到一个错误“Inflating class fragment”，尽管已经导入了`import com.google.android.gms.maps.SupportMapFragment;`.

布局/mapa.xml：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  android:layout_width="fill_parent"  android:layout_height="wrap_content"  android:layout_gravity="center_horizontal"   android:orientation="vertical" >
     <fragment android:id="@+mapa/mapa" android:layout_width="match_parent" android:layout_height="300dp" class="com.google.android.gms.maps.SupportMapFragment"/>
  </LinearLayout> 
```

班级：

```
package br.com.globalinterativa.uteis;

import br.com.globalinterativa.rcf.R;

import com.google.android.gms.maps.GoogleMap.OnMapClickListener;
import com.google.android.gms.maps.GoogleMap.OnMapLongClickListener;
import com.google.android.gms.maps.model.LatLng;

import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import com.google.android.gms.maps.SupportMapFragment;
import android.view.LayoutInflater;

public class SupMapFragmentDF extends DialogFragment implements OnMapClickListener,     OnMapLongClickListener {

private LatLng latLong;
private int actionCode;
private CallBackMethods returnn;

public SupMapFragmentDF(CallBackMethods returnn, int actionCode){
    this.returnn = returnn;
    this.actionCode=actionCode;
}

public interface CallBackMethods {
    public abstract void onLatLongSetados(LatLng latLong, int actionCode);
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState){
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            returnn.onLatLongSetados(latLong, actionCode);
        }
    });
    LayoutInflater inflater = getActivity().getLayoutInflater();
    builder.setView(inflater.inflate(R.layout.mapa, null) );
    return builder.create();
}   
public static void inicializa(DatePickerDialogFragment dp, Bundle b, FragmentManager fm) {

}
@Override
public void onMapLongClick(LatLng latLng) {
    this.latLong = latLong;
}
@Override
public void onMapClick(LatLng latLng) {
    this.latLong = latLong;
}
} 
```

# javascript - jquery uniform 还原时发生奇怪的事情（回滚/关闭unifrom时）

> ID：13842793
> 
> 赞同：0
> 
> 时间：2012-12-12T15:16:31.197
> 
> 标签：javascript, jquery, html, css, uniform

Uniform 是一个用于样式化表单的 jQuery 插件。我在我的项目中使用它，我有一个案例我需要关闭这个插件，然后再打开。

您通过以下方式（其中一种方式）打开插件：`$("input, textarea, select, button").uniform();`

如果您想关闭插件（恢复旧样式），请执行以下操作：`$.uniform.restore();`

它工作正常，但不能在`button`,`submit`或`reset`. 当恢复这些输入的值时，会出现并在原始按钮的左侧找到一个位置。

这是一个 jsFiddle 链接，供您查看演示：[jsFiddle uniform.js 问题](http://jsfiddle.net/PDWRe/)

我试图解决这个问题，但没有运气。请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:54:22.397

好吧，这是一个*非常*粗略的解决方法：

```
$.uniform._restore = $.uniform.restore;
$.uniform.restore  = function(elem) {
  if (elem === undefined) {
     elem = $($.uniform.elements);
  }
  $(elem).each(function() {
     if ($(this).is("button, :submit, :reset, input[type='button']")) {
       this[0].parentNode.firstChild.nodeValue = '';
     }
  });
  $.uniform._restore(elem);
}; 
```

[如此处](http://jsfiddle.net/PDWRe/1/)所示，它可以工作。但我宁愿在统一的源代码中解决这个问题（这就是它托管在 github 上的原因，毕竟）。)

# sql-server - 将 SQL 结果添加到 Dynamics CRM 报告

> ID：13842794
> 
> 赞同：0
> 
> 时间：2012-12-12T15:16:31.680
> 
> 标签：sql-server, dynamics-crm-2011, dynamics-crm

我有一些我写的 SQL，我最终希望结果出现在 Dashbord 上。我已将其保存为 SQL Server 中的视图，但不知道从哪里开始让 Dynamics 了解该视图，并以可以将其添加到仪表板的方式访问数据。

我从高处和低处寻找，并没有找到任何答案。大多数人说他们正在做这种事情，并且遇到了 SQL 逻辑问题。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:00:51.403

一种选择是将您的视图转换为存储在 CRM（工作场所 -> 报告）中的 SSRS 报告。

[使用 SQL Server Reporting Services 为 Microsoft Dynamics CRM 创建报告](http://msdn.microsoft.com/en-us/library/gg328097.aspx)

在那里，您可以将报告添加到仪表板。

[如何在 Dynamics CRM 2011 的仪表板中显示报表？](http://weblogs.asp.net/pabloperalta/archive/2011/10/27/how-to-display-a-report-in-a-dashboard-in-dynamics-crm-2011.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:34:01.030

您可以创建一个 SSRS 报告并将其放入表单中：

[http://mscrmshop.blogspot.sg/2012/02/step-by-step-tutorial-to-add-crm-report.html](http://mscrmshop.blogspot.sg/2012/02/step-by-step-tutorial-to-add-crm-report.html)

# java - 在 Android 上使用 StelsMDB 从 MS Access DB 获取数据

> ID：13842796
> 
> 赞同：0
> 
> 时间：2012-12-12T15:16:33.467
> 
> 标签：java, android, database, ms-access

我正在尝试使用[StelsMDB library](http://www.csv-jdbc.com/stels_mdb/doc.htm)访问 MS_Access db 。该文件位于手机的 SD 卡上。我加载了所有库，创建了连接：

```
public class DBConnection {
    private static final String TAG = DBConnection.class.getSimpleName();

    private Connection connection;

    public DBConnection() {
        try {
            Class.forName(jstels.jdbc.mdb.MDBDriver2.class.getName());
            connection = DriverManager.getConnection("jdbc:jstels:mdb:sdcard/2012xp.mdb");
        } catch (SQLException e) {
            Log.e(TAG, "", e);
        } catch (ClassNotFoundException e1) {
            Log.e(TAG, "", e1);
        }
    }

    public Connection getConnection() {
        return this.connection;
    }
} 
```

它似乎有效；但是当我尝试查询某些内容时，会出现以下异常：

> 解析查询 java.lang.IllegalStateException 失败：未知查询对象标志 3

在网上我找不到任何提示。我通过一个复杂的查询得到了这个异常，所以我试着写一个更简单的，比如

`"SELECT * FROM TABLE_NAME"`

....但我得到了同样的例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:45:49.337

我相信您的连接字符串有误。您需要使用其属性创建 Connection 对象。

尝试用这个替换你的连接：

```
Connection conn = DriverManager.getConnection("jdbc:jstels:mdb:sdcard/2012xp.mdb"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:58:07.900

经过长时间的尝试，我发现 jStel 与 android 不兼容...

# wordpress - 如何对缓存进行故障排除

> ID：13842801
> 
> 赞同：1
> 
> 时间：2012-12-12T15:16:50.307
> 
> 标签：wordpress, caching

我在缓存 WordPress 网站时遇到问题。我的网站显示不一致。我已将我的 DNS 服务器从我的 ISP 更改为 Google，并且该站点没有 chaching。我在不同的 ISP 上查看了该站点，但仍然不一致。我的浏览器缓存设置为 0，我正在使用“？” 在网址中。有没有办法确定缓存的来源？该站点位于预算共享主机帐户上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:19:17.237

尝试不同的网络浏览器。这将告诉您缓存是由于 W3 Total Cache 之类的插件还是您的浏览器缓存造成的。也许尝试禁用所有插件和主题，看看是否有什么不同。DNS 很可能不会产生任何影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:12:50.207

我建议为此使用 Firebug 或 Web-Kit 开发工具。

1.  您可以更方便地禁用/启用浏览器缓存
2.  您可以使用“网络”面板查看正在加载的内容、加载速度以及从何处加载。

# c# - 有没有比使用会话变量更好的解决方案；会话变量真的应该在网页中使用吗？

> ID：13842805
> 
> 赞同：2
> 
> 时间：2012-12-12T15:17:03.830
> 
> 标签：c#, session-variables, webmatrix

我正在使用 WebMatrix (C#) 为我工作的组织设计 Intranet Web 应用程序。

我已经创建了一个数据库驱动的站点，目前正在开发另一个站点，并且一段时间以来，我一直在 Session 变量随机变为 null 并引发错误方面遇到一些麻烦。如此之多，一个简单的 Session 变量改为使用服务器缓存内存进行切换（我最初认为它会更不稳定，但到目前为止还有待观察......）

一个问题是：Session 变量有什么实际用途吗？如果它真的像看起来那样不稳定，那么它们似乎一无所获。\

我知道它们在技术上是 cookie，所以我知道不应该依赖它们的数据，但这就是问题所在。我需要将数据发送到我“可以”依赖的其他页面。这忽略了 Session 变量和 cookie。

我通常远离查询字符串或 url 数据，因为它们公然“纯文本”显示任何敏感信息（如社会安全号码），即使 SSL 也无济于事。

服务器缓存也是易失性的，不能依赖。

AppState 变量不是用户特定的。

这留下了隐藏的输入字段......这里的问题是，有时在“发布”之后我会执行 Response.Redirect 等，因此 C# 并不总是在发布后呈现页面（似乎）。

也许这只是我缺乏知识，但无论我走哪条路，我似乎都走投无路了。

我真的必须将所有页面信息与每个页面一起保存到一个单独的数据库中，并使用另一个页面上的 sql 查询来检索它，只是为了获得可靠而不是“公然”显示的信息从一个页面到另一个页面吗？即使使用多个不同的用户，这种方法也会成为问题，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:55:09.393

ASP.NET 有不同的会话状态模式：

*   *InProc*，这是在内存中。只要不回收 IIS 应用程序池或重新启动整个 IIS，会话状态就会存在。

*   *数据库服务器*。这是 Session State 存储在 SQL Server 存储中。这很好，因为会话在 IIS 应用程序池或整个 IIS 重新启动后仍然存在，但它是一个瓶颈，因为这意味着对会话的每次访问都需要对会话状态对象进行反序列化和/或序列化，毕竟，数据库连接等等在。

*   *状态服务器*。与*SqlServer*类似，但使用 Microsoft 提供的 Session State Server。这种模式根本没有使用，但它是一个选项......（我没有使用它的经验）。

*   *自定义*. 您可以实现一些接口/抽象类并定义自己的会话状态存储。

另一方面，会话状态是服务器端的，它与 cookie 无关。这是在 HTTP 统治的无状态世界中模拟状态的一种方式。由于 ASP.NET 在浏览器中写入 HTTP cookie，它也可以将浏览器会话与唯一的服务器会话链接。

关于会话状态是否有用......在我的情况下，我决定完全避免“状态”。我更喜欢尽可能地保持无国籍状态。我在浏览器中写下一些 HTTP cookie 来标识设置、偏好或用户，并根据请求执行操作。

我更喜欢这样，因为一个好的缓存机制可以疯狂地优化请求的性能，因为在大多数情况下，您不会直接在存储中访问数据，而是在某些缓存中访问数据，这意味着速度很快！

顺便说一句，会话状态不应该用于存储大对象，而是用于存储基本值。会话状态不是缓存。例如，会话状态可能是存储当前登录用户或其角色等内容的好地方。或他们的个人资料标识符。谁知道。

应按请求查询任何其他数据。

再说一遍：缓存在优化环境方面应该是您的朋友，并且不要在每个请求中访问数据库或其他任何内容，从而损害系统性能。

# java - 从 hashmap 中只获取一行

> ID：13842810
> 
> 赞同：1
> 
> 时间：2012-12-12T15:17:33.730
> 
> 标签：java, android

我是安卓新手。现在我正在使用 hashmap 来显示我的列表视图

下面是我的 SimpleAdapter，

> ```
> private SimpleAdapter createSimpleAdapter() {
>     List<Map<String, String>> data = this.createData();
>     return new SimpleAdapter(this, data, R.layout.menuui,
>             new String[] {
>                     "name", "food"
>             }, new int[] {
>                     R.id.membername, R.id.food
>             });
> } 
> ```

我只想得到一行，但如果我`listview.getItemAtPosition(position).toString()`像这样使用`{food=Onigiri, name=Hashimoto Nanami}`

我怎样才能只得到一排？如果没有足够的信息让您知道我的要求，请告诉我，谢谢。

# jquery - jQuery / 箭头键未触发 keyup 事件

> ID：13842811
> 
> 赞同：0
> 
> 时间：2012-12-12T15:17:35.443
> 
> 标签：jquery, keyup

我正在尝试使用右箭头键在类之间进行更改，但我在使用箭头键触发事件时遇到了问题。相反，它在鼠标单击时起作用。右箭头键 keyCode 是 39。我都试过了，得到了相同的结果。

```
$(document).ready(function(){
    $(document).keyup(function(evt){
    console.log(evt.keyCode);// used to verify the keyCode 39

    if (evt.keyCode == 39) {
        $('body').toggle(function(){
            $('body').removeClass().addClass('narrow');

        }, function() {
        $('body').removeClass().addClass('large');

        }, function() {
        $('body').removeClass();
        });
        } 
        else {
        return false;
    };
    )
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:24:39.940

**编辑**——

一切都是正确的，除了切换。这是我假设您正在尝试做的事情-

[http://jsfiddle.net/jmsessink/nxJxj/3/](http://jsfiddle.net/jmsessink/nxJxj/3/)

```
$(function() {

    $(document).keyup(function(evt) {

        if (evt.keyCode == 39) {

            if ($('body').hasClass('narrow')) {
                $('body').removeClass('narrow').addClass('large');
            } else if ($('body').hasClass('large')) {
                $('body').removeClass('large');
            } else {
                $('body').addClass('narrow');
            }

        }

    });

}); 
```

# php - 如何到达 xpath 结果中的所需节点？

> ID：13842812
> 
> 赞同：1
> 
> 时间：2012-12-12T15:17:45.457
> 
> 标签：php, xml, xpath, web-scraping, simplexml

正如我在问题标题中提到的那样，我正在尝试下面的代码以达到 xpath 结果中所需的节点。

```
<?php
$xpath = '//*[@id="topsection"]/div[3]/div[2]/div[1]/div/div[1]';          
$html = new DOMDocument();
@$html->loadHTMLFile('http://www.flipkart.com/samsung-galaxy-ace-s5830/p/itmdfndpgz4nbuft');
$xml = simplexml_import_dom($html);   
if (!$xml) {
    echo 'Error while parsing the document';
    exit;
}

$source = $xml->xpath($xpath);
echo "<pre>";
print_r($source);
?> 
```

这是源代码。我正在使用从电子商务中取消价格。它工作它给出以下输出：

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [class] => line
                )

            [div] => SimpleXMLElement Object
                (
                    [@attributes] => Array
                        (
                            [class] => prices
                            [itemprop] => offers
                            [itemscope] => 
                            [itemtype] => http://schema.org/Offer
                        )

                    [span] =>  Rs. 10300
                    [div] => (Prices inclusive of taxes)
                    [meta] => Array
                        (
                            [0] => SimpleXMLElement Object
                                (
                                    [@attributes] => Array
                                        (
                                            [itemprop] => price
                                            [content] => Rs. 10300
                                        )

                                )

                            [1] => SimpleXMLElement Object
                                (
                                    [@attributes] => Array
                                        (
                                            [itemprop] => priceCurrency
                                            [content] => INR
                                        )

                                )

                        )

                )

        )

) 
```

现在如何直接到达 [内容] => 卢比。10300\. 我试过了：

```
echo $source[0]['div']['meta']['@attributes']['content'] 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:21:32.197

试试`echo (String) $source[0]->div->meta[0]['content'];`。

基本上，当你看到一个元素是一个对象时，你不能像数组一样访问它，你需要使用对象`->`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:40:10.723

的`print_r`a[`SimpleXMLElement`](http://php.net/SimpleXMLElement)不显示*真实的*对象结构。所以你需要有一些知识：

```
$source[0]->div->meta['content']
        |    |     |      `- attribute acccess
        |    |     `- element access, defaults to the first one
        |    `- element access, defaults to the first one
        |
 standard array access to get 
 the first SimpleXMLElement of xpath()
 operation 
```

然后该示例（带有您的地址）如下（`print_r`再次，[Demo](http://codepad.viper-7.com/hGydZx)）：

```
SimpleXMLElement Object
(
    [0] => Rs. 10300
) 
```

如果您需要文本值，请将其转换为字符串：

```
$rs = (string) $source[0]->div->meta['content']; 
```

但是，您已经可以使用 xpath 表达式直接访问该节点（如果这是单一情况）。

`SimpleXMLElement`在[Basic SimpleXML 使用示例^(*文档*)](http://php.net/simplexml.examples-basic)中了解有关如何访问的更多信息。

# android - android软键盘上大写字母的键码

> ID：13842813
> 
> 赞同：2
> 
> 时间：2012-12-12T15:17:57.047
> 
> 标签：android, android-layout

我正在做一个实验，它需要一个同时显示大写和小写字母的键盘**（**按 shift 后不显示大写）。现在，我使用 SDK 中的示例项目设法像普通键盘一样显示小写字母。该项目使用代码标签映射`xml`来定义键盘的布局，如下所示：

```
<Row>
    <Key android:codes="113" android:keyLabel="q" android:keyEdgeFlags="left"/>
    <Key android:codes="119" android:keyLabel="w"/>
    <Key android:codes="101" android:keyLabel="e"/>
    <Key android:codes="114" android:keyLabel="r"/>
    <Key android:codes="116" android:keyLabel="t"/>
    <Key android:codes="121" android:keyLabel="y"/>
    <Key android:codes="117" android:keyLabel="u"/>
    <Key android:codes="105" android:keyLabel="i"/>
    <Key android:codes="111" android:keyLabel="o"/>
    <Key android:codes="112" android:keyLabel="p" android:keyEdgeFlags="right"/>
</Row> 
```

这些都是小写字母。问题是如何显示大写字母。是否有大写的代码键标签值，或者有没有其他方法可以在键盘中包含大写字母？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:44:46.890

原来字母的大写和小写的代码是相同的。当用户在软键盘中按下字母键时，输出将取决于键盘视图的切换状态，可以使用`KeyboardView.setShifted(boolean)`.

另一件事是视图中的键应该具有相同的移位状态，因此不可能在一个视图中同时显示相同字母的大写和小写。但它可以在两种不同的视图中完成，一组是移位的，另一组是未移位的。

# lua - Corona tabbar 渲染精度

> ID：13842814
> 
> 赞同：5
> 
> 时间：2012-12-12T15:17:57.150
> 
> 标签：lua, coronasdk

我正在尝试在电晕中构建一个标签栏，仅使用自定义图形来显示向上/向下状态和背景。我发现电晕添加了左右填充，如下面的附加图像和基本设置所示。图像都是 32x32 并且应该完全填充空间，而不是两端都有黑线并且按钮被迫重叠。

我已经尝试了文档中可用的所有选项，但没有成功。有谁知道是否有一个未记录的选项可以覆盖标签栏按钮的自动定位？

```
 -- table to setup buttons
    local tabButtons = {
        { up="icon1.png", down="icon1-down.png", width = 32, height = 32, cornerRadius=0, onPress=onFirstView, selected=true },
        { up="icon2.png", down="icon2-down.png", width = 32, height = 32, cornerRadius=0, onPress=onSecondView },
    }

    -- create the actual tabBar widget
    local tabBar = widget.newTabBar{
        width=64, height=32,
        buttons = tabButtons
    } 
```

这是输出：

![输出截图](../Images/4fbf1e7d59a4c28d83dddf3ddb5fb2df.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T19:31:57.880

这是一个已知错误，正在解决中。

# c# - 从二进制文件中提取 XML

> ID：13842822
> 
> 赞同：1
> 
> 时间：2012-12-12T15:18:24.383
> 
> 标签：c#, vb.net

我有一个二进制文件，其中包含字节 2-43 中的 xmldata。我将如何将该数据提取到文件中？

我能够提取小整数字段做这样的事情：

`Row.TenderNumber = BitConverter.ToInt16(Row.RawBytesraw, 44);`

但是，我不知道如何从这个文件中提取 xml 数据。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:22:48.977

像这样的东西应该可以工作

```
 using (var stream = new MemoryStream(<byte[] here>))
    using (var reader = new StreamReader(stream))
    {
        var buffer = new char[41];
        stream.Seek(<offset where string begins>, SeekOrigin.Begin);
        reader.Read(buffer, 0, 41);
        <mystringVariable> = new string(buffer);
    } 
```

我用 C# 编写了它，但你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:22:59.603

xml 数据只是格式正确的文本。如果您可以从文件中提取字节，则可以将它们转换为字符串。并且字符串可以是 XML。

看看这个问题：[binary file to string](https://stackoverflow.com/questions/2980182/binary-file-to-string)

# encryption - 我的 PyCrypto 实现对于我的目的是否安全？

> ID：13842824
> 
> 赞同：2
> 
> 时间：2012-12-12T15:18:29.043
> 
> 标签：encryption, python-2.7, aes, pycrypto

我没有编程经验，而且 PyCrypto 文档对于初学者来说非常稀少。假设我用下面写的代码加密了一个文件，然后通过互联网发送。我关心的是计算机 A 和 B 之间文件的安全性。假设计算机本身是安全的，并且密钥是安全传输的。我是否正确实施了事情？还有什么我应该知道的吗？使用 Python 2.7 和 PyCrypto 2.6

提前感谢您的任何回答。

```
from Crypto.Cipher import AES
from Crypto import Random

def get_random(length):
    r = Random.new().read(length)
    return r

def aes_encrypt(key, file_in, file_out):
    data_source = open(file_in, 'rb')
    data = data_source.read()
    data_source.close()
    iv = get_random(AES.block_size)
    cipher = AES.new(key, AES.MODE_CFB, iv)
    data_encrypted = iv+cipher.encrypt(data)
    file_encrypted = open(file_out, 'wb')
    file_encrypted.write(data_encrypted)
    file_encrypted.close()

def aes_decrypt(key, file_in, file_out):
    data_source = open(file_in, 'rb')
    data = data_source.read()
    data_source.close()
    iv = data[:AES.block_size]
    data = data[AES.block_size:]
    cipher = AES.new(key, AES.MODE_CFB, iv)
    data_decrypted = cipher.decrypt(data)
    file_decrypted = open(file_out, 'wb')
    file_decrypted.write(data_decrypted)
    file_decrypted.close()

#testing
key = get_random(32)
#encrypting the file on computer A
aes_encrypt(key, 'file.dat', 'file.enc')
#decrypting the file on computer B
aes_decrypt(key, 'file.enc', 'file.dat') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:25:12.437

您错过了实现加密时最重要的考虑因素之一，即消息完整性。不幸的是，仅仅加密一条消息并不足以确保它不被篡改，尤其是在 CTR、CFB 和 OFB 等流模式的情况下。

看起来您正在使用 CFB 模式 (MODE_CFB)。其工作方式是使用 AES 生成随机密钥流，并将结果与​​明文进行异或运算。这意味着如果有人在密文中翻转一个位，相应的位将在解密的明文中翻转。攻击者可以将您的消息更改为完全不同的意思，您将无法检测到它。有关 CFB 模式（解密）如何工作的参考：

![CFB模式](../Images/16155432733e0548a9c44de364254efd.png)

如果我翻转密文第一个块的第一位，它将翻转解密明文的第一个块的第一位。

您需要应用[HMAC](https://www.dlitz.net/software/pycrypto/api/current/)或使用[AES-GCM](http://en.wikipedia.org/wiki/Galois/Counter_Mode)模式，这将同时处理机密性和完整性。

有比 CFB 更好的模式选择，所以如果没有强烈的理由偏爱它，我会首先推荐 AES-GCM，然后是带有 HMAC 的 AES-CTR。

# java - 如何获得该数组的标准差

> ID：13842826
> 
> 赞同：0
> 
> 时间：2012-12-12T15:18:31.847
> 
> 标签：java, arrays, std

好的，所以我设置了一个代码来获取具有多达 50 个元素的数组的平均值，我还想找到这些元素的标准偏差并将其显示在显示平均值的位置，到目前为止我的代码是

```
import java.util.Scanner;

public class caArray
{
public static void main(String args[])
{
    Scanner input = new Scanner(System.in);
    System.out.println("How many numbers you want to calculate average upto 50 : ");

    int n = input.nextInt();
    int[] array = new int[50];
    int sum = 0;

    for (int m = 0; m < n; m++)
    {
        System.out.print("Number " + m + " : ");
        array[m] = input.nextInt();
    }

    for (int m = 0; m < n; m++)
    {
        sum = array[m] + sum;
    }

    {
        System.out.println("Total value of Numbers = " + sum);
    }

    {
        double avg;
        avg = sum / array.length;
        System.out.println("Average of Numbers = " + avg);  //calculate average value
    }
}
} 
```

我需要添加到这个以获得一个程序中的标准偏差

编辑**我不能使用这些功能，因为我实际上必须使用程序本身的标准偏差fourmula

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:41:55.657

你可以用3种方法来写

```
private double standardDeviation(double[] input) {
    return Math.sqrt(variance(input));
}

private double variance(double[] input) {
    double expectedVal = expectedValue(input);
    double variance = 0;
    for(int i = 0;i<input.length;++i) {
        double buffer = input[i] - expectedVal;
        variance += buffer * buffer;
    }
    return variance;
}

private double expectedValue(double[] input) {
    double sum = 0;
    for(int i = 0;i<input.length;++i) {
        sum += input[i];
    }
    return sum/input.length;
} 
```

希望它有效，如果我以正确的方式使用公式，我不太确定。

但基本上你的计算中有这 3 个数学公式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:20:19.460

如果您不必自己编写，请查看[Apache Commons Math](http://commons.apache.org/math/)。[统计文档](http://commons.apache.org/math/userguide/stat.html)参考了如何得出[标准偏差](http://commons.apache.org/math/apidocs/org/apache/commons/math3/stat/descriptive/DescriptiveStatistics.html#getStandardDeviation%28%29)。

由于您必须自己编写，也许查看DescriptiveStatistics[的源代码](http://kickjava.com/src/org/apache/commons/math/stat/descriptive/DescriptiveStatistics.java.htm)会很有启发性（查找函数`getStandardDeviation()`）

# java - 树状图 对象的get方法返回空值

> ID：13842830
> 
> 赞同：2
> 
> 时间：2012-12-12T15:18:49.107
> 
> 标签：java, hashmap, key-value, treemap

```
import java.util.*;

public class Sort {

    static class ValueComparator implements Comparator<String> {

        Map<String, Integer> base;

        ValueComparator(Map<String, Integer> base) {
            this.base = base;
        }

        @Override
        public int compare(String a, String b) {
            if (base.get(a) >= base.get(b)) {
                return 1;
            } else {
                return -1;
            }
        }
    }

    public static void main(String[] args) {
        HashMap<String, Integer> map = new HashMap<String, Integer>();
        ValueComparator vc = new ValueComparator(map);
        TreeMap<String, Integer> sorted = new TreeMap<String, Integer>(vc);
        map.put("A", 1);
        map.put("B", 2);
        sorted.putAll(map);
        for (String key : sorted.keySet()) {
            System.out.println(key + " : " + sorted.get(key)); // why null values here?
        }
        System.out.println(sorted.values()); // But we do have non-null values here!
    }
} 
```

输出：

```
A : null
B : null
[1, 2]
BUILD SUCCESSFUL (total time: 0 seconds) 
```

我想知道为什么我们在第一个注释行得到空值，而我们确实有非空值，如第二个注释行所示。

**编辑**：@null 的版本似乎不起作用。我已将代码更改如下：

```
 public int compare(String a, String b) {
            if (a.equals(b)) return 0;
            if (base.get(a) >= base.get(b)) {
                return 1;
            } else return -1;
        } 
```

它似乎有效，但我不确定。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T15:20:44.030

我的猜测是您的`ValueComparator.compare()`方法永远不会返回 0，表示相等，导致该`Map.get()`方法找不到匹配项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:26:12.117

以这种方式更改您的比较

```
public int compare(String a, String b) {
        if (base.get(a) > base.get(b)) {
            return 1;
        }else if(base.get(a) ==  base.get(b)){
            return 0;
        }
        return -1;  
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T15:32:11.803

即使你的比较器肯定坏了，如果你把它改成

```
for (Map.Entry e : sorted.entrySet()) {
    System.out.println(e.getKey() + " : " + e.getValue());
} 
```

# java - 从单例切换到应用程序对象，仍然得到空指针异常

> ID：13842831
> 
> 赞同：1
> 
> 时间：2012-12-12T15:18:49.390
> 
> 标签：java, android

我从单例切换到应用程序对象来存储应用程序数据，因为据我了解，与常规单例相比，我的缓存数据在应用程序对象中存活的机会要大得多。

但是我仍然有问题。如果我切换到其他几个应用程序，然后回到我的应用程序，在我加载后加载我的事件的调用会`getApplication()`引发空指针异常。

我发现更奇怪的是，我最初意图的捆绑包仍然处于活动状态并且在应用程序切换中幸存下来。

我如何保留数据，不一定需要以永久方式持久保存（如果整个应用程序被杀死并重新加载，它只会将其从 web 服务中拉下来并重新开始，这就是为什么我想切换到一个应用程序对象就可以了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:31:50.217

您是否希望保留与您的应用程序何时被用户放入后台然后又被带回相关的数据？

也许重写 onSaveInstanceState 和 onRestoreInstanceState 方法，以及从包中存储和恢复是您正在寻找的。

[http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState(android.os.Bundle](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState(android.os.Bundle) )

[http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle) )

然后你可能想定义一个 Parcelable 接口

[http://developer.android.com/reference/android/os/Parcelable.html](http://developer.android.com/reference/android/os/Parcelable.html)

在您希望存储的类上。

或者，您也可以使用共享首选项 api。

[http://developer.android.com/reference/android/content/Context.html#getSharedPreferences(java.lang.String](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences(java.lang.String) , int)

# asp.net - 如何在 TextBox 中设置 ImageButton

> ID：13842833
> 
> 赞同：1
> 
> 时间：2012-12-12T15:18:52.877
> 
> 标签：asp.net, css, textbox, imagebutton

我有这个多行文本框。我想在文本框的左上角添加一个 ImageButton。

我看到了一些方法，但它们似乎都没有太大的帮助。

**将 ImageButton 添加到该多行文本框的最佳解决方案是什么？**

这是代码：

**HTML：**

```
<p>
    <asp:TextBox ID="txtDescription" Width="98%" Height="300px" style="overflow:auto" BorderStyle="Outset" BorderWidth="2px"
            runat="server" Visible="false" TextMode="MultiLine" ReadOnly="true" ></asp:TextBox>
</p> 
```

**代码背后：**

```
protected void SetTextBox(int levelID)
{
    switch (levelID)
    {
        case 1: // = not started yet
            txtDescription.CssClass = "textBoxWhite";                
            break;
        case 2: //= in proccess
            txtDescription.CssClass = "textBoxBlue";
            break;
        case 3: //= completed
            txtDescription.CssClass = "textBoxRed";
            break;
    }
} 
```

**CSS：**

```
.textBoxRed 
 { 

       background: rgba(255, 181, 181, 0.5);
 }

 .textBoxBlue 
 { 
      background: rgba(181, 181, 255, 0.5);
 }

 .textBoxWhite
 {
      background: rgba(255, 255, 255, 0.5);
 } 
```

**示例：参见“文本框中的** [图像”文本框中的图像](http://www.cssportal.com/form-elements/text-box.htm)

![这就是它需要的样子：](../Images/1016554b744ced3a9644af3e4635ae92.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:44:57.630

**如果你想在你的 textarea 中有一个图像，**你可以这样做：

*HTML*

```
<div>
    <asp:TextBox ID="txtDescription" CssClass="nice-input" ...></asp:TextBox>
</div> 
```

*CSS*

```
.nice-input
{
    background:#FFFFFF url('http://www.cssportal.com/form-elements/images/search.png') no-repeat 4px 4px;
    padding:25px 4px 4px 4px;
    border:1px solid #CCCCCC;
    width:98%;
    height:300px;
}​ 
```

**如果你需要一个提交图片按钮**，你可以做这样的事情

*HTML*

```
<div>
    <asp:ImageButton ID="ClickMeButton" CssClass="nice-button" ...></asp:TextBox>
    <asp:TextBox ID="txtDescription" CssClass="nice-input" ...></asp:TextBox>
</div> 
```

*CSS*

```
.nice-input
{
    padding:25px 4px 4px 4px;
    border:1px solid #CCCCCC;
    width:98%;
    height:300px;
}

.nice-button
{
    background:#FFFFFF url('http://www.cssportal.com/form-elements/images/search.png') no-repeat 0px 0px;
    position:relative;
    top:24px;
    left:4px;
}​ 
```

**注意**第二个解决方案非常hackish。如果您可以使用 jQuery 而不是您的 asp:ImageButton 来执行帖子，它可能会更好。

# joomla - 使用 DomPDF & Joomla 2.5 生成 PDF 时用户被注销

> ID：13842834
> 
> 赞同：0
> 
> 时间：2012-12-12T15:18:54.477
> 
> 标签：joomla, joomla2.5, dompdf

我已将 DomPDF 与我正在开发的 Joomla 站点集成。我按照[创建 PDF 视图](http://docs.joomla.org/Creating_PDF_views)文章来实现这一点，并且生成 PDF 效果很好，除了当单击链接并且从用户注销的组件生成 PDF 时。我正在使用 Joomla 2.5 和 DomPDF 0.6.0 beta 3，PDF 的内容是从自定义组件生成的，但现在它只是平面 HTML，并按照文章中的说明生成视图。我查看了代码，但似乎看不出问题出在哪里。任何帮助是极大的赞赏。

编辑：如果登录时选中“记住我”，则用户不会注销。也没有提到我使用数据库作为会话的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:53:19.427

检查是否清除用户对象的自定义组件。

重置用户对象的任何地方`session_destroy()`或`unset($user)`任何其他工厂调用。如果找不到这样的声明，请确保该 PDF 创建存在问题。

绝不你不能得到解决方案然后试试这个。

在创建 PDF 部分当前记录的用户对象 ID 设置为 Cookie 之前，您提到它没有清除记住我的选项。

```
$user = &JFactory::getUser();
echo $user->id //current logged user id. 
```

并且过程PDF再次将其放回用户对象之类。

```
$user = &JFactory::getUser($user_id);//from cookie. 
```

这不是一个完美的解决方案，但您的问题会解决。

希望这会有所帮助..

# jquery - jquery 选项文本返回空

> ID：13842836
> 
> 赞同：0
> 
> 时间：2012-12-12T15:18:56.190
> 
> 标签：jquery, option

在 jquery 从 1.7 到最新版本

```
$('option:selected[text~="some text"]') 
```

返回空数组。

在以前的版本中，它运行良好。

为什么？漏洞？

更新：html：

```
<select class='txt :required' name='terms' size="30" style="width:277px"
    onchange="reset_cost()" id="terms">
  <option label="авто/мото" value="1">авто/мото</option>
  <option label="бизнес/финансы" value="16">бизнес/финансы</option>
  ....
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:26:19.280

`[]`语法用于选择属性 。`text`不是属性。要根据元素的文本进行选择，请使用`:contains`.

```
$('option:selected:contains("some text")') 
```

由于您使用的是`~=`，它看起来在单词边界之间，您可能需要更改选择器（注意 之前的空格`some text`）

```
$('option:selected:contains(" some text")') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:28:39.240

根据您发布的 html，您需要更改`text`为`label`.

```
$('option:selected[label~="some text"]') 
```

# javascript - 使用 JavaScript 的 window.onload 属性调用多个函数

> ID：13842837
> 
> 赞同：0
> 
> 时间：2012-12-12T15:19:00.303
> 
> 标签：javascript, html5-canvas

我在我的网站的 index.html 页面中有以下代码，当页面加载时，它会在 HTML5 画布上绘制一些图像：

```
window.onload = function(){

    var sources = {};
        sources[0] = document.getElementById("building").src,
        sources[1] = document.getElementById("chair").src,
        sources[2] = document.getElementById("drink").src,
        sources[3] = document.getElementById("food").src,
        sources[4] = document.getElementById("fridge").src,
        sources[5] = document.getElementById("land").src,
        sources[6] = document.getElementById("money").src,
        sources[7] = document.getElementById("oven").src,
        sources[8] = document.getElementById("table").src,
        sources[9] = document.getElementById("van").src,

        sources[10] = document.getElementById("burger").src,
        sources[11] = document.getElementById("chips").src,
        sources[12] = document.getElementById("drink").src,
        sources[13] = document.getElementById("franchiseFee").src,
        sources[14] = document.getElementById("wages").src,

        sources[15] = document.getElementById("admin").src,
        sources[16] = document.getElementById("cleaners").src,
        sources[17] = document.getElementById("electricity").src,
        sources[18] = document.getElementById("insurance").src,
        sources[19] = document.getElementById("manager").src,
        sources[20] = document.getElementById("rates").src,
        sources[21] = document.getElementById("training").src,
        sources[22] = document.getElementById("water").src,

        sources[23] = document.getElementById("burger").src,
        sources[24] = document.getElementById("chips").src,
        sources[25] = document.getElementById("drink").src,

        sources[26] = document.getElementById("creditors").src,
        sources[27] = document.getElementById("electricity").src,
        sources[28] = document.getElementById("food").src,
        sources[29] = document.getElementById("hirePurchase").src,
        sources[30] = document.getElementById("loan").src,
        sources[31] = document.getElementById("overdraft").src,
        sources[32] = document.getElementById("payeTax").src,
        sources[33] = document.getElementById("tax").src

    loadImages(sources, drawImage);
}; 
```

Sources 是我用来在 JavaScript 中保存图像的数组，以便在从我的 HTML 中的隐藏部分加载它们后，可以将它们绘制到画布上。

这个函数目前完全按照它的预期工作——它调用了 loadImages 函数，该函数将 HTML 中隐藏部分的图像加载到 JavaScript 数组中，并在`drawImage`数组中的每个图像上调用该函数。但我还有另一个函数，我想用 window.onload 调用它：

我想添加到 window.onload 的功能是这样的：

```
function drawGameElements(){
    /* Draw a line for the 'score bar'. */
    context.moveTo(0, 25);
    context.lineTo(1000, 25);
    context.stroke();

    /* Draw current level/ total levels on the left, and current score on the right. */
    context.font = "11pt Calibri"; /* Text font & size */
    context.strokeStyle = "black"; /* Font colour */
    context.strokeText(currentLevel + "/" + totalLevels, 10, 15);
    context.strokeText(currentScore, 950, 15);
} 
```

`loadImages(sources, drawImage);`我尝试在行下方添加对函数的调用`window.onload = function(){};`

所以我现在有：

```
window.onload = function(){
...
loadImages(sources, drawImage);
drawGameElements();
}; 
```

尽管这部分有效，因为它在画布顶部为“得分栏”绘制了一条线，并在画布左侧的水平线上写了“1/3”，出于某种原因不会在右侧绘制当前分数。

此外，只要我单击已绘制到画布上的图像之一，将其拖放到画布上，“得分栏”就会从画布上完全消失。

有人知道为什么吗？无论画布上发生了什么，我怎样才能让得分栏在整个游戏过程中保持可见？另外，我怎样才能显示 currentScore 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:23:03.313

我会改为使用 loadImages 内部的回调来调用 drawGameElements。这样 drawGameElements 只在 loadImages 完成后运行。听起来你已经用你的两个函数创建了一个竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:26:07.313

如果我在你的位置，我会在画布之外创建得分栏。将其位置设置为绝对，让它悬停在画布上方所需的位置。这样您就可以将其作为 HTML 元素访问，而无需担心重绘。

为这些显示使用 HTML 元素的主要优点是您不需要重新绘制它们，例如在画布上移动图像之后。您也不必担心如何刷新值（在画布上，仅在旧值上绘制新值是不够的）。通过这种方式，您可以将值存储在 HTML 元素中并在画布上狂放，知道分数将始终保持在顶部。

# eclipse - 有没有办法在 Eclipse GGTS 中对项目进行排序？

> ID：13842843
> 
> 赞同：1
> 
> 时间：2012-12-12T15:19:23.773
> 
> 标签：eclipse, grails

我正在使用 Groovy-Grails Tool Suite (GGTS)，它基本上只是 Eclipse，上面有一些 Groovy/Grails 特定的东西。

我添加了一个新的源文件夹（属性 > Java 构建路径），但它的出现顺序很奇怪。有什么方法可以在 Project Explorer 中手动订购源文件夹？

您可以在此图像中看到“测试/功能”源文件夹不在其他测试文件夹旁边。至少我想把它们放在一起，理想情况下我想选择顺序。如果可以的话，我还想移动其他一些文件夹。

我还想继续使用这个 Project Explorer 视图，因为它对诸如“域”、“控制器”、“视图”等事物进行了 Grails 特定的旋转。

![项目浏览器](../Images/3fd03078638d682bae3cf20baff11c2f.png)

我正在使用 GGTS 3.1.0.RELEASE，它看起来像是基于 Eclipse 4.2.1 构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:23:09.347

不知道我是怎么错过的，但是在 Preferences > Grails > Project Explorer 下，您可以订购默认的对象集（域、控制器等）。这将有助于解决我想要订购所有对象的部分问题。

完成此操作后，我将首选项（文件 > 导出 > 首选项 > 全部）导出到文件中。在该文件中，我找到了这样的字符串：

```
/instance/org.grails.ide.eclipse.explorer/org.grails.ide.eclipse.explorer.ordering 
```

我更新了它，在“ `Stest/functional;`”之后添加“ `Stest/integration;`”，导入首选项（文件 > 导入 > 首选项），然后重新启动工作区。

我希望插件的首选项（您可以在其中更改默认顺序）允许您直接在首选项编辑器中添加新对象，但至少有一些方法可以做到这一点。

# google-custom-search - Google 自定义搜索查询参数和类别参数

> ID：13842845
> 
> 赞同：6
> 
> 时间：2012-12-12T15:19:27.583
> 
> 标签：google-custom-search

所以我正在尝试为谷歌自定义搜索设置查询参数和类别参数。这是一个示例搜索结果页面 url：

```
http://www.whiterootmedia.com/search_results/index.html?q=my%20search%20phrase 
```

所以看起来默认查询参数是`q`我`q`在为我的谷歌自定义搜索引擎设置分析部分时输入的。这个可以吗？我读到它不能使用`q`，而是使用`query`? 为什么这很重要？

我还应该设置一个看起来是可选的类别参数。

谢谢，尘土飞扬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T16:05:26.947

HTML：

```
<gcse:search gname='google1'></gcse:search> 
```

Javascript：

```
window.google.search.cse.element.getElement("google1").execute("hello world"); 
```

但是在启动 javascript 之前，您需要[等待 Google 脚本](https://developers.google.com/custom-search/docs/element#javascript)加载。

如果您使用 searchresults-only 而不是搜索，您还需要在 CSE 控制面板中启用正确的布局：https: [//www.google.com/cse/](https://www.google.com/cse/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T00:18:25.303

Google 搜索 API 仅使用`q`. AFAIK API 没有`query`参数。查看[自定义搜索 API 文档](https://developers.google.com/custom-search/v1/using_rest#query-params)。

不确定“类别”参数是什么意思。以前没遇到过那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-30T04:39:18.077

您可以点击以下内容：[https ://cse.google.com/cse?as_q=your_query_string%20must_be_urlencoded&client=google-csbe&cx=full_cse_id_goes_here:including_the_bit_after_the_colon](https://cse.google.com/cse?as_q=your_query_string%20must_be_urlencoded&client=google-csbe&cx=full_cse_id_goes_here:including_the_bit_after_the_colon)

所以直接回答你的问题 - 查询参数键是'as_q'。

# javascript - 盒式磁带添加单独的 Javascript 脚本链接参考内联

> ID：13842846
> 
> 赞同：3
> 
> 时间：2012-12-12T15:19:34.183
> 
> 标签：javascript, asp.net, asp.net-mvc

有没有办法使用 Cassette 添加内联脚本链接引用？

我想要的是能够在我的页面中添加如下内容：

`@Bundles.AddInlineScriptReference("/MyScripts/TheScript.js")`

*（注意：Bundles.AddInlineScriptReference 不存在，只是一个例子）*

并让 Cassette 写出脚本链接，包括处理缩小等。

`<script src="/cassette.axd/asset/MyScripts/TheScript.js?voB4kL0uy2HIpjkJnSuycghlp-8=" type="text/javascript"></script>`

我看到了一种添加内联脚本和捆绑包但不添加脚本链接引用的方法。我可以设置包含单个文件的捆绑包。然而，对于在整个网站部分中使用的单个脚本来说，这似乎是不必要的乏味。

阅读 Cassette Bundle 助手文档，我认为这样的事情会起作用。

`@Bundles.Reference("/MyScripts/TheScript.js")`

但是它会引发以下错误：

`Cannot find an asset bundle containing the path`

我会很感激任何建议。我觉得这是一个如此简单的问题，我一定遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T18:26:24.913

```
 bundles.Add<ScriptBundle>("MyBundle", new[]{ "path/to/script/script.js"}); 
```

# apache-flex - Adobe Flash Builder (Flex) 中的数据选择

> ID：13842848
> 
> 赞同：0
> 
> 时间：2012-12-12T15:19:36.683
> 
> 标签：apache-flex, adobe, flash-builder

在 Adob​​e Flash Builder 内部，我正在尝试将数据绑定到`comboBox`. 这是我的场景：

1.  我提供了`ColdFusion`连接到`MySQL`数据库的数据服务。
2.  我已连接数据服务，它们在检查器窗口中显示如下：`NameService`。
3.  在里面`NameService`我有以下数据类型（我的数据库中的`Tbl_names`表的名称）、、、、、、、和。`MySQL``admin:String``dept:String``ID:Number``manager:String``name:String``pin:String``store:String`

综上所述，我有一个`comboBox`ID 为`nameBox`. 我只想显示等于“Toyota”`nameBox`的人的名字。`store:String`我这辈子都想不通。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:32:24.507

听起来您需要设置 CFQUERY 来限制您的选择：

[http://www.quackit.com/coldfusion/tutorial/coldfusion_database_queries.cfm](http://www.quackit.com/coldfusion/tutorial/coldfusion_database_queries.cfm)

# javascript - “this”在 HTML 锚点中指的是什么

> ID：13842849
> 
> 赞同：2
> 
> 时间：2012-12-12T15:19:55.513
> 
> 标签：javascript, html, anchor, this

在点击链接部分中的链接之前，我正在尝试在 JavaScript 中做一些事情`href`：

```
<a href="open.this.page" onclick="doStuff(this);return false; title="follow me"> 
```

问题是`this`in`doSuff(this)`指的是什么？我原以为必须从中`href`取出锚的一部分，但是当检查它时，它看起来像它`href`，没有别的。

```
function doSutff(my_arg) {
   alert (my_arg);
   // do stuff
   // follow the href in the link
} 
```

在上面的警报中，我得到的正是`href`as `"http://my.domain/open.this.page"`。

这是预期的还是我在一个浏览器中得到它，但可能不是在另一个浏览器中？

如果这是正常行为，那么如何获得例如锚的一部分`rel`或一部分？`title`只有 DOM？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:21:43.353

在这种情况下`this`指的是 DOM 节点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T15:21:57.823

`this`在任何事件（onclick 或其他）的上下文中，指的是触发事件的 DOM 元素。

在您的情况下，它是锚标签本身。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T15:23:34.817

> *“在上述警报中，我得到的完全`href`一样`"http://my.domain/open.this.page"`。*
> 
> *这是预期的还是我在一个浏览器中得到它，但可能不是在另一个浏览器中？”*

这是意料之中的。您收到警报的原因是这就是元素`"http://my.domain/open.this.page"`的默认`.toString()`值。`<a>`

这是一个不寻常的案例。其他元素不显示属性作为`.toString()`表示。

如果您想实际使用`href`，您需要这样做`this.toString()`，或见下文...

* * *

> *“...例如，如何获得锚的 REL 或 TITLE 部分？”*

要获取其他属性或属性，您只需按照通常的方式进行即可。

要获取属性，您可以执行以下操作：

```
onclick="doStuff(this.getAttribute('title')); return false;" 
```

大多数标准属性直接映射到节点上的属性，因此您也可以这样做：

```
onclick="doStuff(this.title); return false;" 
```

或者因为你在一个内联处理程序中，你实际上可以这样做：

```
onclick="doStuff(title); return false;" 
```

最后一个起作用的原因是从属性分配的处理程序具有包含元素本身的唯一范围链。这意味着元素上的属性实际上显示为变量。

请注意，这不适用于任何其他类型的事件处理程序。

* * *

关于`this`，它指的是处理程序绑定到的元素。

属性发生的事情是它基本上成为分配给`onclick`属性的函数的主体。

所以你最终会得到这样的结果：

```
elem.onclick = function(event) {
    doStuff(this);return false; // Your onclick attribute value
} 
```

所以你可以看到这`this`实际上只是在分配给属性的事件处理程序中找到的正常值。

* * *

另请注意，`event`定义了一个参数。这意味着您可以像这样更改属性：

```
onclick="doStuff(this, event);return false;" 
```

...它将传递该参数，因为现在您的函数如下所示：

```
elem.onclick = function(event) {
    doStuff(this, event);return false; // Your onclick attribute value
} 
```

所以你可以看到你的字符串实际上是在引用`event`函数的普通参数。

* * *

这也适用于较旧的 IE。在 IE 中，`event`参数不会被定义，所以它会选择全局`event`对象。

```
 // ---------------v----no parameter
elem.onclick = function() {

                //   v---now it picks up the global event
    doStuff(this, event);return false; // Your onclick attribute value
} 
```

# c++ - QtWebkit：如何处理自定义协议

> ID：13842851
> 
> 赞同：1
> 
> 时间：2012-12-12T15:19:56.783
> 
> 标签：c++, qt, protocols, qtwebkit

我正在使用 qt 和 qtWebkit 编写一个应用程序，用于访问 Web 应用程序。在Web 应用程序中，我们有各种需要处理的自定义协议，例如'myprotocol:var1=1&var2=2'。使用此协议时，我的应用程序应该打开另一个程序。如何检测这些自定义协议之一何时被命中？

我已经看到了一些涉及“重新实现 QWebPage::acceptNavigationRequest”的类似问题的答案，但我不知道该怎么做。

还有其他人必须在 qtWebkit 中处理自定义协议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:40:03.367

如果您侦听使用以下代码调用插槽的“完成（QNetworkReply *）”信号。您可以从回复中包含的请求中获取协议的 URL。从那里您可以检查它是否是您要启动的协议，如果是，您可以使用`QDesktopServices::openUrl(reply->request().url());`.

```
QString scheme = reply->request().url().scheme();
if (scheme == QLatin1String("mailto")
    || scheme == QLatin1String("myprotocol")) {
        QDesktopServices::openUrl(reply->request().url());
} 
```

# ruby-on-rails - 每次运行 Rails 应用程序时都必须启动 Sunspot/Solr？

> ID：13842852
> 
> 赞同：1
> 
> 时间：2012-12-12T15:19:58.333
> 
> 标签：ruby-on-rails, sunspot

我刚刚安装了[太阳黑子](http://sunspot.github.com/)gem：

```
gem 'sunspot_rails'

group :development do
  gem 'sunspot_solr'
end

group :development, :test do
  gem "sunspot_test"
end 
```

如果我在做`sunspot:solr:start`之前不做，`rails server`我会收到这个错误：

```
> OLR Request (1.3ms)  [ path=#<RSolr::Client:0xa9a3f6c>
> parameters={data: <?xml version="1.0"
> encoding="UTF-8"?><add><doc><field name="id">Post 36</field><field
> name="type">Post</field><field
> name="type">ActiveRecord::Base</field><field
> name="class_name">Post</field><field boost="5"
> name="title_text">sadads</field><field
> name="content_text">asdasdasdasdsadsdsd</field></doc></add>, headers:
> {"Content-Type"=>"text/xml"}, method: post, params: {:wt=>:ruby},
> query: wt=ruby, path: update, uri:
> http://localhost:8982/solr/update?wt=ruby, open_timeout: ,
> read_timeout: } ]
>      (0.4ms)  rollback transaction
>     Completed 500 Internal Server Error in 639ms
>     
>     Errno::ECONNREFUSED (Connection refused - connect(2)):
>       app/controllers/posts_controller.rb:41:in `create' 
```

每次我做一个 POST 请求（例如在我的应用程序中创建帖子和投票）。

这是宝石的正常行为吗？是否有跳过或自动化这一步？

**编辑：**

这是**帖子*** *create action* * 和**model**，以防万一：

```
 def create
    @post = current_user.posts.build(params[:post])
    if @post.save
      flash[:success] = "Post created!"
      redirect_to @post
    else
      render 'new'
    end
  end

class Post < ActiveRecord::Base

  searchable do
    text :title, boost: 5
    text :content
    text :replies do
      replies.map { |reply| reply.content }
    end
  end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:32:22.847

> 这是宝石的正常行为吗？是否有跳过或自动化这一步？

是的，如果你想使用 Solr，你需要启动它，即使它是预打包的。为了让你的生活更轻松，你可以使用像[Foreman](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)这样的东西。

# regex - 正则表达式匹配和替换

> ID：13842863
> 
> 赞同：0
> 
> 时间：2012-12-12T15:20:30.690
> 
> 标签：regex

我只需要将这些字符串的**开头与****“KEYWORD AAA/0010/0”中的主要模式匹配，并在****/0**之后使用空格并将其替换为任何其他字符串。它必须只发生在开始的实例上。

```
KEYWORD AAA/0010/0 
KEYWORD AAAAAA/0010/0
KEYWORD AAA/001000/0
KEYWORD AAA/0010/000
KEYWORD AAA/0010/0 Testing comment
KEYWORD AAA/0010/0 Testing comment KEYWORD AAA/0010/0 Testing comment
KEYWORD */*/*
KEYWORD ?/?/? 
```

我已经尝试过了，但它不区分开始和中间的实例，并且与最后一个不匹配

```
^KEYWORD .*\/.*\/.*\s 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:25:34.600

Ungreedy`.*?`的（匹配直到下一个`/`，甚至是`[^/]*`），以及可选`\s`的 with `\s?`（最后一行），使得`^KEYWORD .*?\/.*?\/.*?\s?`或`^KEYWORD [^\/]*\/[^\/]*\/[^\/]*\s?`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:25:34.917

我想你快到了。您的正则表达式与您的最后一个测试用例不匹配，因为末尾没有空格。试试这个：

```
/^KEYWORD .*\/.*\/.*(\s|$)/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T15:26:02.390

关于什么

```
^KEYWORD [^\s/]*\/[^\s/]*\/[^\s/]*(?:\s|$) 
```

[在 Regexr 上](http://regexr.com?3348v)查看

最后一行不匹配，因为后面没有空格，因此我将其替换为 Whitespace 或字符串的结尾`(?:\s|$)`。

# xml - 为什么当我将 MvxBindableSpinner 放入 MvxBindableListView 时 gref 会过高？

> ID：13842864
> 
> 赞同：3
> 
> 时间：2012-12-12T15:20:32.643
> 
> 标签：xml, xamarin.android, mvvmcross

我正在使用 mvvmcross 为 Android 开发一个应用程序。

在这个应用程序中，我想要一个包含微调器的列表。当我在模拟器上测试应用程序时看起来不错，但是当我滚动它时，它很快就会耗尽内存，因为 gref 超过 2000。我知道 gref 在真实设备上可以更高，但我仍然认为我一定做错了什么.

可绑定列表

```
 <cirrious.mvvmcross.binding.android.views.MvxBindableListView
          android:id="@+id/propertyHolder"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:layout_below="@id/obsBtLayout"
          android:layout_above="@id/photoframe"          
          local:MvxBind="
          {
            'ItemsSource':{'Path':'PPHolders'},
            'ItemClick':{'Path':'PropertyClickedCommand'}
          }"
          local:MvxItemTemplate="@layout/listitem_property"
        /> 
```

ListItem_Property.axml（剥离）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"              
  xmlns:local="http://schemas.android.com/apk/res/AIPApp.UI.Droid"
  android:orientation="horizontal"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="@drawable/ListItemSelector"           
  android:descendantFocusability="beforeDescendants"
  >

  <cirrious.mvvmcross.binding.android.views.MvxBindableSpinner
    android:layout_gravity="center_horizontal"
    android:layout_width="200dip"
    android:layout_height="wrap_content"    
    local:MvxDropDownItemTemplate="@layout/spinneritem_propdropdown"
    local:MvxItemTemplate="@layout/spinneritem_prop"
    local:MvxBind="
    {
      'ItemsSource':{'Path':'CodeTableValues'},      
      'SelectedItem':{'Path':'ObservedCodeTable'},
      'Visibility':{'Path':'IsCodeTableValue','Converter':'Visibility'}
    }"/>     

</LinearLayout> 
```

发生这种情况是因为每次滚动时都必须重建微调器项目吗？因为它绑定到的列表在列表中的每个项目中都是不同的。因此，在一个 listitem 上，微调器列表可以是 6 个项目，而另一个可以是 3 个项目，依此类推。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T18:16:32.340

我还没有对您所看到的行为进行全面分析 - 如果没有完整的代码示例，很难做到。

但是，特别感谢[Xamarin 论坛](http://forums.xamarin.com/discussion/568/when-to-release-dispose-java-objects-jni-gref-question#latest)上的 JonPryor，我相信我现在至少对一般情况下 GREF 发生的事情有了更好的了解 - 所以我可以回答你的“为什么”问题。

* * *

绑定列表的一般情况是 GREF 递增：

*   每组绑定一次 - 因为绑定存储在混合 C#/Java 容器对象中 - [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/MvxJavaContainer.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/MvxJavaContainer.cs)
*   每个 ListView 项目一次 - 因为它在列表中使用
*   对 ListView 中具有绑定属性或事件的每个 View 对象执行一次 - 例如，如果您绑定到每个 ListView 项中的 a`TextView`和 a `Button`，则 C# 将存储对这些视图的引用

在您的示例中，每个列表项本身将包含一个绑定列表 - 这将导致所需 GREF 数量的倍增 - 这就是您看到报告的问题的原因。

* * *

有了这种理解，显而易见的问题可能是“我们如何解决这个问题？”

这不是一个简单的问题要回答，但我认为有几种方法可以解决这个问题。

首先，我们可以与 Xamarin 讨论这个问题 - 可能应该增加可用 GREF 的数量 - 因为这些对象在 Java 中将位于内存中，那么在 C# 中引用它们是否也没有什么坏处？

其次，我们可以考虑改变我们的 UI 绑定的实现方式，以便不会将永久引用存储到所有对象 - 例如，如果我们一次性知道绑定（例如标签），那么我们可能会查看一个路由不为此功能使用 XML 数据绑定。例如，我们可以使用新视图手动执行此绑定。

第三，我们可以考虑更改绑定代码本身，以便对于单向绑定（从 ViewModel 到 View），它`FindViewById<TView>`在更新时使用而不是使用对视图的保留引用来检索 Android 视图。这会更慢，但会减少所需的 GREF 数量。在明确声明的“一次性”绑定的情况下，此功能可能最容易实现。

第四，**这可能是您作为应用程序开发人员最容易使用的解决方案**，您可以查看更改 UI 实现，以便应用程序不使用这些绑定的子列表 - 例如，它可以改为使用标签 - 这只会创建按需微调器（通过处理代码中的 Click 事件）。

我敢肯定，除此之外还有其他选择...

* * *

在分析过程中我问自己的一个问题是这个问题是否是 MvvmCross 独有的，或者它是否是所有 MonoDroid 应用程序都可能出现的问题。

我不能 100% 确定，但我认为答案是，这是一个会影响所有 MonoDroid 应用程序的普遍问题。但是，我也认为 MvvmCross 增加了一点问题：

*   通过坚持对诸如 TextViews/labels 之类的东西的引用
*   通过使您更容易编写引用大量 Java 对象的代码。

我也不认为这完全只是一个 MvvmCross 或 MonoDroid 问题。虽然由于 MonoDroid 的实现而突出显示了此 GREF 限制，但这里的根本问题实际上是一次尝试做太多事情 - 所以实际上您可以通过简化设计/实现来提高应用程序的性能，从而减少使用意见。虽然它可能感觉不像，但我认为 MonoDroid**在这里帮了我们一个忙**——它指出我们的 UI 实现有点“胖”，我们应该考虑在我们的应用程序代码中优化它。

* * *

当我发现更多信息时，我会更新这个答案，但我希望上述信息已经让您很好地了解这种情况的“原因”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T19:26:35.230

（这可能是对[Stuart 出色答案](https://stackoverflow.com/a/13995199/83444)的评论，但我需要更多空间......）

问题出在[MvxBindableListAdapter.GetItem()](https://github.com/slodge/MvvmCross/blob/f86810d1b75500c57010bee2aa873c0a7b1a12c7/Cirrious/Cirrious.MvvmCross.Binding.Droid/Views/MvxBindableListAdapter.cs#L130)中：

```
public override Object GetItem(int position)
{
    return new MvxJavaContainer<object>(GetSourceItem(position));
} 
```

这样做的问题是每次调用它都会创建一个新的 GREF（因为每次调用都会实例化一个新对象）。“修复”（解决方法？）：[不要这样做™</a>。](http://forums.xamarin.com/discussion/comment/1841/#Comment_1841)

[](http://forums.xamarin.com/discussion/comment/1841/#Comment_1841)

[例如，](http://forums.xamarin.com/discussion/comment/1841/#Comment_1841)[ApiDemo/Tutorials/GridViewTutorial.cs](https://github.com/xamarin/monodroid-samples/blob/8986f5e1/ApiDemo/Tutorials/GridViewTutorial.cs#L41)示例简单地返回`null`：

```
public override Java.Lang.Object GetItem (int position)
{
    return null;
} 
```

这是有效的，因为没有（后果）调用`GetItem()`; 相反，从[GridViewTutorial.ImageAdapter.GetView()](https://github.com/xamarin/monodroid-samples/blob/8986f5e1/ApiDemo/Tutorials/GridViewTutorial.cs#L52)`GridViewTutorial.cs`返回一个（可能重复使用的）值：

```
public override View GetView (int position, View convertView, ViewGroup parent)
{
    ImageView imageView;

    if (convertView == null) {  // if it's not recycled, initialize some attributes  
        imageView = new ImageView (context);
        imageView.LayoutParameters = new GridView.LayoutParams (85, 85);
        imageView.SetScaleType (ImageView.ScaleType.CenterCrop);
        imageView.SetPadding (8, 8, 8, 8);
    } else {
        imageView = (ImageView)convertView;
    }

    imageView.SetImageResource (thumbIds[position]);
    return imageView;
} 
```

然后是[LabelledSections/SeparatedListAdapter.cs](https://github.com/xamarin/monodroid-samples/blob/8986f5e1/LabelledSections/SeparatedListAdapter.cs)示例，它“缓存”返回的值[`SeparatedListAdapter.GetItem()`](https://github.com/xamarin/monodroid-samples/blob/8986f5e1/LabelledSections/SeparatedListAdapter.cs#L29)（值实际上是在“其他地方”创建的）：

```
public override Java.Lang.Object GetItem (int position)
{
    int op = position;
    foreach (var section in sections.Keys) {
        var adapter = sections [section];
        int size = adapter.Count + 1;
        if (position == 0)
            return section;
        if (position < size)
            return adapter.GetItem (position - 1);
        position -= size;
    }
    return null;
} 
```

这些值存储在[SeparatedListAdapters.sections](https://github.com/xamarin/monodroid-samples/blob/8986f5e1/LabelledSections/SeparatedListAdapter.cs#L19)字典中。

实现`BaseAdapter.GetItem()`的时候，首先要问“调用者需要这个值吗？” 由于调用者通常是您自己的代码，您可以“跳过”该`GetItem()`方法（让它返回`null`）并使用另一种机制从适配器获取托管数据。

如果确实需要从 中返回值`BaseAdapter.GetItem()`，则应确保不会不必要地重新创建值。使用缓存或其他“存储”机制来减少实例化对象的数量。

# java - 在同一进程中加载 多个共享库

> ID：13842868
> 
> 赞同：0
> 
> 时间：2012-12-12T15:20:49.103
> 
> 标签：java, gcc, linker, osgi, ld

我正在运行一个 OSGi 应用程序，并且我有分别使用共享库 S1 和 S2 的包 B1 和 B2。S1 和 S2 有相当多的导出冗余方法。我希望这两个包只从它们各自的共享库中调用方法（所以 B1 使用 S1，B2 使用 S2）。在 osx 上，这是行为。但是在linux上，行为是不同的。两个 osgi 包都使用首先加载的共享库中的方法。我猜这是因为共享库是由同一个进程加载的。

如何确保每个包仅使用其各自共享库中的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:48:28.867

您需要在 Manifest.MF 中声明捆绑包的版本

插入 S1 清单文件

```
Bundle-Version: 1.0.0.S1 
```

并进入 B1 清单

```
Import-Package: yourpackage;version="1.0.0.S1" 
```

插入 S2 清单文件

```
Bundle-Version: 1.0.0.S2 
```

并进入 B2 清单

```
Import-Package: yourpackage;version="1.0.0.S2" 
```

这样将只使用 S1 中的包和类

# c# - 使用 hWnd 设置 Window.Owner

> ID：13842869
> 
> 赞同：11
> 
> 时间：2012-12-12T15:20:49.123
> 
> 标签：c#, wpf, winapi

在我的 WPF/C# 应用程序中，我正在使用如下代码创建一个对话框窗口：

```
Window dialog = new MyDialog() as Window;
dialog.Owner = Window.GetWindow(this);
dialog.ShowDialog(); 
```

如何将对话框所有者设置为另一个应用程序窗口的 hWnd？

我需要的功能只是在对话框可见时阻止“所有者窗口”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T15:25:57.677

使用[`WindowInteropHelper`](http://msdn.microsoft.com/en-us/library/system.windows.interop.windowinterophelper.aspx)：

```
Window dialog = new MyDialog();
WindowInteropHelper wih = new WindowInteropHelper(dialog);
wih.Owner = ownerHwnd;
dialog.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-12T16:33:58.430

我找到了阻止“所有者窗口”的解决方案。代码的第一部分来自 Douglas 的回答，其余部分是使用对 WinAPI [EnableWindow](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646291%28v=vs.85%29.aspx)方法的调用：

```
Window dialog = new MyDialog();
WindowInteropHelper wih = new WindowInteropHelper(dialog);
wih.Owner = ownerHwnd;

//Block input to the owner
Windows.EnableWindow(ownerHwnd, false);

EventHandler onClosed = null;
onClosed = (object sender, EventArgs e) =>
{
    //Re-Enable the owner window once the dialog is closed
    Windows.EnableWindow(ownerHwnd, true);

    (sender as Window).closed -= onClosed;
};

dialog.Closed += onClosed;
dialog.WindowStartupLocation = WindowStartupLocation.CenterOwner;
dialog.ShowActivated = true;
dialog.Show();

//Import the EnableWindow method
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool EnableWindow(IntPtr hWnd, bool bEnable); 
```

# java - 休眠删除对象而不删除相关对象

> ID：13842870
> 
> 赞同：0
> 
> 时间：2012-12-12T15:20:58.390
> 
> 标签：java, mysql, database, hibernate, hql

我有一个包含 3 个表的数据库：幻灯片、MediaItemsInSlideshows 和 Mediaitems。我正在将此数据库与使用休眠的 jsp 站点一起使用。我希望能够在不删除媒体项的情况下删除幻灯片。不过，应该删除 MediaItemsInSlideshows 中的行。

目前我使用以下代码删除幻灯片。当我使用它时，幻灯片中使用的所有媒体项都消失了。

```
Session session = HibernateUtil.getSessionFactory().openSession();
Slideshow s = this.getSlideshowById(id, session);
session.beginTransaction();
session.delete(s);
session.getTransaction().commit(); 
```

这是数据库的可视化表示： ![在此处输入图像描述](../Images/8e170c9edbecc4fc96127c2ab9bf8d46.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:33:04.100

删除 A 会将 B 中对它的引用设置为 null，这是架构禁止的。更改删除顺序的另一种方法是在 B 中添加反向一对多集合，并具有级联删除。只需要删除 A。（来源：[在hibernate中删除相关对象](https://stackoverflow.com/questions/1649366/deleting-of-related-objects-in-hibernate)）

# c# - System.Web.HttpRequestValidationException：从机器人的客户端检测到潜在危险的 Request.Form 值？

> ID：13842875
> 
> 赞同：4
> 
> 时间：2012-12-12T15:21:25.700
> 
> 标签：c#, asp.net

我们有一个带有搜索表单的 Web 应用程序，允许用户输入一些文本，我们根据他们输入的内容限制结果。最近我们开始收到以下错误：

```
System.Web.HttpRequestValidationException: A potentially dangerous Request.Form value was detected from the client (ctl00$ContentPlaceHolder1$results_search="...967.hcpm, <a href="http://www...."). 
```

这个错误每天都在发生，这似乎来自机器人，查看错误似乎机器人正在将 html ahref 链接放入搜索字段并尝试搜索，从而导致错误。

在四处搜索后，我发现有两种方法可以处理这个问题，要么使用 Jquery，要么将 validateRequest 设置为 false，然后在页面后面的代码中使用 htmlencode。有谁知道 jquery 代码是否适用于机器人？我不确定机器人是如何做到这一点的，如果它点击页面并点击按钮或以其他方式发送请求，因为按钮点击是导致回发触发搜索的原因，我们使用 POST 所以没有发送任何内容url 到搜索页面，页面只是回发给自己，而在 PostBack 上是搜索完成的时候。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-05T09:22:50.163

在 web.config 文件的标记中，插入`httpRuntime`具有 属性的元素`requestValidationMode="2.0"`。

例子：

```
<configuration>
<system.web>
<httpRuntime requestValidationMode="2.0" />
</system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:29:40.437

我们的一种解决方案是针对 IP 记录这些错误，如果提交太多，则在应用程序级别阻止访问。

这不是炸弹证明，但减少了我们的数量。但是，它仍然涉及工程和处理，但您不必费心 IIS。

然而，你能做的真的很少。他们会向您的表单发送垃圾邮件并且阻止 IP 只是一个短期解决方案，他们会从多个 IP 等攻击您。只要确保您的验证是严格的，并且您不容易受到注入攻击之类的事情的影响并忽略它，这是事实这些天的生活。

我们经常受到这样的打击，尤其是来自中国这样的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T09:33:02.823

您可以尝试其他解决方案。`defaultRedirect=" "`每当发生此类错误时，它会将您的页面重定向到默认 url（请在 中设置页面）。

```
<system.web>
    <customErrors mode="On" defaultRedirect="~/Home/Index"/>
</system.web> 
```

因此，该机器人将不再能够向您的收件箱发送垃圾邮件或它现在造成的其他问题！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-13T18:51:21.010

这对我有用。我可以通过添加 web.config 文件来消除错误：

```
<httpRuntime requestValidationMode="2.0" /> 
```

整个代码：

```
<httpRuntime requestValidationMode="2.0" maxRequestLength="102400" />
<compilation debug="true" strict="false" explicit="true" targetFramework="4.0"> 
```

我希望这有帮助。

# msbuild - How can I use perform MSBuild batching on Items that don't represent files?

> ID：13842880
> 
> 赞同：3
> 
> 时间：2012-12-12T15:21:38.350
> 
> 标签：msbuild

The MSBuild documentation hints in several places that Items aren't necessarily the same as files.

> ["MSBuild items are inputs into the build system, and they typically represent files."](http://msdn.microsoft.com/en-us/library/ms171453.aspx)
> 
> ["Items are objects that typically represent files."](http://msdn.microsoft.com/en-us/library/dd997067.aspx)

However, I can't seem to find any examples where Items do not represent files. In particular, I would like to perform batching over a set of non-file items. But every item that I create, even from a custom build task, somehow acquires file-like metadata (FullPath, RootDir, Filename, Extension, etc.). Furthermore, I'm confused about the ramifications of setting the Inputs of a target to a set of items that aren't files, and what to use as that target's Outputs.

Does anybody have an example of using non-file Items to perform batching in MSBuild?

**edit**

Sorry for taking so long to come up with an example. I understand things a bit more, but I'm still uncertain (and there seems to be a complete lack of documentation about this). Everything here is going off my recollection; I'm not at my work computer right now, so I can't verify any of it.

In my experience, MSBuild doesn't like to build multiple configurations of a .sln file in one go. So, this:

```
msbuild.exe SampleMSBuild.sln /p:Configuration=Debug%3BRelease 
```

(The encoded semicolon being necessary so that it doesn't try to define multiple properties.)

Produces this:

```
"D:\src\SampleMSBuild\SampleMSBuild.sln" (default target) (1) ->
(ValidateSolutionConfiguration target) ->
  D:\src\SampleMSBuild\SampleMSBuild.sln.metaproj : error MSB4126: The 
  specified solution configuration "Debug;Release|Any CPU" is invalid. 
  Please specify a valid solution configuration using the Configuration 
  and Platform properties (e.g. MSBuild.exe Solution.sln 
  /p:Configuration=Debug /p:Platform="Any CPU") or leave those properties 
  blank to use the default solution configuration. 
  [D:\src\SampleMSBuild\SampleMSBuild.sln] 
```

So, it seems like it should be possible to use batching and items to handle this.

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" 
         DefaultTarget="Rebuild" 
         ToolsVersion="4.0">
  <ItemGroup>
    <Configurations Include="Debug" />-->
    <Configurations Include="Release" />-->
  </ItemGroup>

  <UsingTask TaskName="LogMetadata"
             TaskFactory="CodeTaskFactory"
             AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v4.0.dll">
    <ParameterGroup>
      <Items ParameterType="Microsoft.Build.Framework.ITaskItem[]" 
             Required="true" />
    </ParameterGroup>
    <Task>
      <Code Type="Fragment" Language="cs">
        <![CDATA[
        foreach (var item in Items) {
          Console.Write(item.ItemSpec);
          Console.Write(" {");
          foreach (string metadataKey in item.MetadataNames) {
            Console.Write(metadataKey);
            Console.Write("=\"");
            Console.Write(item.GetMetadata(metadataKey).
                ToString().Replace("\"", "\\\""));
            Console.Write("\" ");
          }
          Console.WriteLine("}");
        }]]>
      </Code>
    </Task>
  </UsingTask>

  <Target Name="Rebuild">
    <LogMetadata Items="%(Configurations.Identity)" />
  </Target>
</Project> 
```

Which produces this:

```
Debug {
  FullPath="D:\src\SampleMSBuild\Debug" 
  RootDir="D:\" 
  Filename="Debug" 
  Extension="" 
  RelativeDir="" 
  Directory="src\SampleMSBuild\" 
  RecursiveDir="" 
  Identity="Debug" 
  ModifiedTime="" 
  CreatedTime="" 
  AccessedTime="" 
}
Release {
  FullPath="D:\src\SampleMSBuild\Release" 
  RootDir="D:\" 
  Filename="Release" 
  Extension="" 
  RelativeDir="" 
  Directory="src\SampleMSBuild\" 
  RecursiveDir="" 
  Identity="Release" 
  ModifiedTime="" 
  CreatedTime="" 
  AccessedTime=""
} 
```

As you can see, the items have all kinds of file metadata attached to them. I can't drop the Include attribute, since it's required, but I could synthesize the items in a custom task. HOWEVER, when I do that, they still somehow magically gain all the same file metadata.

What are the ramifications of this? Since I haven't specified these as Inputs or Outputs to a target, will the file metadata cause any problems? Will the build system skip over targets, or build more than it needs to, because the files specified in the Items' FullPath metadata do not exist? What if those files did exist? Would it cause any problems?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:41:28.257

I use items to build several solutions after each other and doing some "manual" task with them, therefore I define my own items:

```
<ItemGroup>
 <MergeConfigurations Include="project1\project1.SDK.sln">
  <MergeOutAssemblyName>product1.dll</MergeOutAssemblyName>
  <MergePrimaryAssemblyName>project1.Interfaces.dll</MergePrimaryAssemblyName>
  <SolutionBinaries>project1\bin\$(FlavorToBuild)</SolutionBinaries>
 </MergeConfigurations>

 <MergeConfigurations Include="project1\project1.Plugin.sln">
  <MergeOutAssemblyName>product1.dll</MergeOutAssemblyName>
  <MergePrimaryAssemblyName>project1.Interfaces.dll</MergePrimaryAssemblyName>
  <SolutionBinaries>project1\bin\plugin\$(FlavorToBuild)</SolutionBinaries>
 </MergeConfigurations>
<ItemGroup> 
```

Then I use a target to take the information and do what is necessary:

```
<Target Name="MergeSolution"
      Inputs="%(MergeConfigurations.Identity)"
      Outputs="%(MergeConfigurations.Identity)\Ignore_this">

  <PropertyGroup>
   <MergeSolution>%(MergeConfigurations.Identity)</MergeSolution>
   <MergeOutAssemblyName>%(MergeConfigurations.MergeOutAssemblyName)</MergeOutAssemblyName>
   <MergePrimaryAssemblyName>%(MergeConfigurations.MergePrimaryAssemblyName)</MergePrimaryAssemblyName>
   <SolutionBinaries>%(MergeConfigurations.SolutionBinaries)</SolutionBinaries>
  </PropertyGroup>

  [....]
 </Target> 
```

Hope this helps to point you in the direction you need.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:02:57.710

Tricky question. I'm an MSBuild noob, and found myself needing to understand batching recently, so figured I'd share some of what I found.

In general, yes, it seems that most everywhere you see samples and discussions about ITaskItems they tend to be about files. But the underlying implementation is very flexible and can deal with many other things as well. In my case, I've been working with strings and XML data.

[This MS article](https://docs.microsoft.com/en-us/visualstudio/msbuild/item-metadata-in-task-batching?view=vs-2019) gives some great examples of non-file ItemGroups and metadata.

[This article](https://web.archive.org/web/20120210061352/http://msdn.microsoft.com/en-us/library/ms171474(v=vs.80).aspx) was the best summary I can find that talks about the mechanics of Items and how they are different than Properties. It also covers the whole bit about @ and % syntax, converting between strings and Items, and a hint as to where those file metadata properties are coming from - MSBuild is optimized for it.

Whenever you have an interface used as a parameter to a task or whatever, there is going to be a default implementation of that interface *somewhere*. My guess is that your code sample is newing up a number of these default objects under the hood and those define the metadata that are created by default. If you were to implement this interface yourself, I'll wager you could change this behavior. Probably beyond the scope of the question though =)

# ruby - 获取超时::水豚和红宝石中的错误

> ID：13842885
> 
> 赞同：0
> 
> 时间：2012-12-12T15:21:45.703
> 
> 标签：ruby, cucumber, capybara

我在测试中使用黄瓜+水豚

```
env.rb
Capybara.run_server = false
Capybara.default_driver = :selenium
World(Capybara::DSL) 
```

在我的测试中，我点击了一个链接

```
Then /^I see deals on map$/ do
  find("#dealmap").click
end 
```

上面的动作是打开一个层（div），但过程停留在 find("#dealmap").click 方法上。5秒后我收到以下错误

```
 Timeout::Error (Timeout::Error)
      /usr/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill'
      /usr/lib/ruby/1.9.1/net/protocol.rb:140:in `rbuf_fill'
      /usr/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
      /usr/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
      /usr/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
      /usr/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'
      /usr/lib/ruby/1.9.1/net/http.rb:1319:in `block in transport_request'
      /usr/lib/ruby/1.9.1/net/http.rb:1316:in `catch'
      /usr/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'
      /usr/lib/ruby/1.9.1/net/http.rb:1293:in `request'
      /usr/lib/ruby/1.9.1/net/http.rb:1286:in `block in request'
      /usr/lib/ruby/1.9.1/net/http.rb:745:in `start'
      /usr/lib/ruby/1.9.1/net/http.rb:1284:in `request'
      ./features/frontend/step_definitions/search_results_page.rb:2:in `/^I see deals on map$/'
      features/frontend/search_results_page.feature:6:in `Then I see deals on map' 
```

注意：我已经尝试增加时间，但它没有解决问题

我无法解决问题。有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:50:40.473

我认为问题来自这条线

```
Capybara.run_server = false 
```

如果您正在运行基于机架的测试，您将需要它。删除它并重新运行测试。

如果您正在运行基于 Web 的测试，您可能希望将其保留在其中——并且仅仅因为您使用 Selenium 并不意味着您正在运行基于 Web 的测试。您仍在运行基于机架的测试，但在浏览器中。

# apache - 如何排除 url 的密码保护？

> ID：13842886
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:21:45.137
> 
> 标签：apache, .htaccess, password-protection

该网站有两个网址。

[http://example.com](http://example.com)

[http://example1.com](http://example1.com)

通过 .htaccess 文件添加密码保护

```
AuthType Basic
AuthName "You must give a password"
AuthUserFile /home/user/.htpasswd
Require valid-user 
```

现在，两个 url 都应用了密码保护。如何排除[http://example1.com](http://example1.com)的密码保护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:25:01.667

对于哪个版本的 Apache？（Apache 2.4 有一些新特性）

```
SetEnvIf Host ^example1\.com$ bypass=1

Satisfy any

Order allow,deny
Allow from env=bypass

AuthUserFile ...
AuthName ...
AuthType Basic
Require valid-user 
```

?

# java - 多线程在等待时做某事

> ID：13842890
> 
> 赞同：0
> 
> 时间：2012-12-12T15:22:03.280
> 
> 标签：java, multithreading, synchronization

我有一个程序，它基本上有一个单元矩阵（共享内存）和汽车（可观察线程）。在每次移动之前，每辆车都请求访问下一个单元格，如果下一个单元格被阻塞，它会进入一个调用 wait() 的同步块，线程进入睡眠状态。我想知道是否有任何方法可以让汽车在等待（）时做一些事情，然后当他收到通知时，他可以继续做他在等待之前所做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:25:47.937

你将不得不重新设计：不要用螺纹建模汽车。让线程池执行任何需要的任务，并使用带有回调函数的异步模型来指导汽车的行为。如果一个单元被阻塞，汽车的状态根本不会改变，线程池可以做其他事情。当单元被释放时，触发适当的回调，它将更新任务提交到池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:36:22.970

我做了一些类似于你描述的事情，使用`Handler`s 进行2路线程通信。

*   child/worker/'car' 线程确实工作，进入睡眠一段时间（~100ms），醒来时检查线程类成员变量的状态变化。

*   父线程会向`Handler`工作线程发送消息，工作线程接收命令并设置工作线程类中的成员变量，以便在工作人员下次退出睡眠时进行检测。

以下是我一直在查看的链接，以掌握如何使用`Handler`s 并有效地在线程之间进行通信：

*   线程 - 处理程序的很好的概述（没有活套）。带代码示例：http: `com.indy.testing.TestMain.java.MyThread.java` [//indyvision.net/2010/02/android-threads-tutorial-part-3/](http://indyvision.net/2010/02/android-threads-tutorial-part-3/)

*   线程 - 处理程序和循环器的概述 [http://techtej.blogspot.com/2011/02/android-passing-data-between-main.html](http://techtej.blogspot.com/2011/02/android-passing-data-between-main.html)

*   带 2way 通信的线程。带代码示例：sample.thread.messaging.ThreadMessaging.java [http://codinghard.wordpress.com/2009/05/16/android-thread-messaging/](http://codinghard.wordpress.com/2009/05/16/android-thread-messaging/)

# css - CSS：浏览器显示的颜色代码与 CSS 样式表上设置的颜色代码不同

> ID：13842891
> 
> 赞同：4
> 
> 时间：2012-12-12T15:22:07.277
> 
> 标签：css, colors, background-color

我有一个带有属性的 div：

```
background-color: #327EB2; 
```

当我在浏览器上打开页面时，我注意到显示了不同的颜色。如果我捕获屏幕并在 Photoshop 中打开捕获的图像，我可以看到捕获的颜色代码实际上是#437BB6。我的 CSS 样式表中没有设置该颜色。

我在不同的显示器、不同的颜色分辨率、不同的浏览器和版本上进行了测试，从 FF 4+ 到 IE8+、Opera、Chrome、Safari 等...

其实我不认为是显示器、分辨率或浏览器版本的问题，因为问题是显示颜色的代码实际上是完全不同的代码！

此外，Photoshop 警告我 #327EB2 不是“网络安全颜色”，但我认为这不是问题，因为我经常在工作表中使用非网络安全颜色，而且我从未遇到过这样的问题。

** 小提琴：http: [//jsfiddle.net/286tE/](http://jsfiddle.net/286tE/)

*更新

问题是 div 有一个背景图像和一个背景颜色。背景颜色必须匹配背景图像的最后一个像素的颜色（像往常一样），即#327EB2。无论如何，我可以看到从图像的最后一个像素到背景颜色的不同颜色：

[http://test.testblueday.eu/test/cbsissue.png](http://test.testblueday.eu/test/cbsissue.png)

您可以在这里查看页面，问题显示在左侧“Top Marchi”列表之后：

[http://test.testblueday.eu/test/cbstest.html](http://test.testblueday.eu/test/cbstest.html)

我留下了纯 CSS 和 JS（未压缩）让您查看所有属性。

** 更新 2

我使用 Mac，但我们也可以在 Windows 上看到问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:33:28.647

您的问题与CSS无关，问题出在图像中！

这是因为您提供的示例在额外的背景中显示了正确的#327EB2（通过 CSS “着色”的那个），这足以知道 CSS 部分是可以的。

注意在通过 Photoshop 导出的文件中进行的颜色校正/管理。

如果您无法对颜色进行管理/恢复为所需的颜色，另一种解决方案是相反，更改 CSS 颜色以匹配图像的最后一行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T16:40:14.977

据我所知，一切正常。您在底部的图像具有代码“#1080b3”的颜色 - 我刚刚下载了该图片 ( `gradient_box_emboss.jpg`) 并在 GIMP 中使用颜色选择器获取了颜色。当我像这样修改css时：

```
.embosser {
   background: #1080B3 url('/images/gradient_box_emboss.jpg') right top no-repeat;
   color: white;
   padding: 5px 6px;
} 
```

缺少差异。当我打印您的网站并将其粘贴到 GIMP 中时，颜色选择器显示“错误”背景的颜色为`#327eb2`. 当我打开您的图片时，您的问题中的背景颜色为 `#307db7`. 它在 jpg 中，我想在将原始数据压缩为 .jpg 时丢失了一些颜色信息。当您尝试在 Photoshop 中获取颜色时，可能会发生类似的情况。

当您将图像从一种格式转换为另一种格式时，可能会出现问题。上面是最简单的修复 - 将背景颜色更改为图像上的颜色。

# oop - MATLAB parfor 和 C++ 类 mex 包装器（需要复制构造函数？）

> ID：13842893
> 
> 赞同：8
> 
> 时间：2012-12-12T15:22:11.030
> 
> 标签：oop, matlab, parallel-processing, copy-constructor, mex

我正在尝试使用[此处](http://www.mathworks.com/matlabcentral/newsreader/view_thread/278243)概述的方法将 C++ 类包装在 matlab mex 包装器中。基本上，我有一个初始化 mex 文件，它返回一个 C++ 对象句柄：

```
handle = myclass_init() 
```

然后我可以将它传递给另一个`myclass_amethod`使用句柄调用类方法的 mex 文件（例如），然后最终`myclass_delete`释放 C++ 对象：

```
retval = myclass_amethod(handle, parameter)
myclass_delete(handle) 
```

为了便于使用，我将其封装在一个 MATLAB 类中：

```
classdef myclass < handle
    properties(SetAccess=protected)
        cpp_handle_
    end
    methods
        % class constructor
        function obj = myclass()
            obj.cpp_handle_ = myclass_init();
        end
        % class destructor
        function delete(obj)
            myclass_delete(obj.cpp_handle_);
        end
        % class method
        function amethod(parameter)
            myclass_amethod(obj.cpp_handle_, parameter);
        end
    end
end 
```

## 问题：这在并行代码中不起作用

这在非并行代码中运行良好。但是，一旦我从内部调用它`parfor`：

```
cls = myclass();
parfor i = 1:10
    cls.amethod(i)
end 
```

我得到一个段错误，因为类的副本是在`parfor`循环中（在每个工作人员中）制作的，但是由于每个工作人员都是一个单独的进程，所以 C++ 对象实例*没有*被复制，导致指针无效。

我最初尝试检测每个类方法何时在 parfor 循环中运行，并且在这些情况下也重新分配 C++ 对象。但是，由于无法检查对象是否已分配给当前工作人员，这会导致多次重新分配，然后仅删除一次（当工作人员退出时）导致内存泄漏（请参阅底部的附录详情提问）。

## 尝试的解决方案：复制构造函数并使用`matlab.mixin.Copyable`

在 C++ 中，处理这种情况的方法是复制构造函数（这样 C++ 对象只会在复制包装 MATLAB 类时重新分配一次）。快速搜索一下[matlab.mixin.Copyable](http://www.mathworks.co.uk/help/matlab/ref/matlab.mixin.copyableclass.html)类类型，它似乎提供了所需的功能（即 MATLAB 句柄类的深层副本）。因此，我尝试了以下方法：

```
classdef myclass < matlab.mixin.Copyable
    properties(SetAccess=protected)
        cpp_handle_
    end
    methods
        function obj = myclass(val)
            if nargin < 1
                % regular constructor
                obj.cpp_handle_ = rand(1);
                disp(['Initialized myclass with handle: ' num2str(obj.cpp_handle_)]);
            else
                % copy constructor
                obj.cpp_handle_ = rand(1);
                disp(['Copy initialized myclass with handle: ' num2str(obj.cpp_handle_)]);
            end
        end
        % destructor
        function delete(obj)
            disp(['Deleted myclass with handle: ' num2str(obj.cpp_handle_)]);
        end
        % class method
        function amethod(obj)
            disp(['Class method called with handle: ' num2str(obj.cpp_handle_)]);
        end
    end
end 
```

如上所述测试此类，即：

```
cls = myclass();
parfor i = 1:10
    cls.amethod(i)
end 
```

输出结果：

```
Initialized myclass with handle: 0.65548
Class method called with handle: 0.65548
Class method called with handle: 0.65548
Class method called with handle: 0.65548
Class method called with handle: 0.65548
Class method called with handle: 0.65548
Class method called with handle: 0.65548
Class method called with handle: 0.65548
Class method called with handle: 0.65548
Class method called with handle: 0.65548
Class method called with handle: 0.65548
Deleted myclass with handle: 0.65548
Deleted myclass with handle: 0.65548
Deleted myclass with handle: 0.65548 
```

换句话说，**似乎在为 parfor 生成工人时*没有***调用复制构造函数。是否有人对我做错了什么有任何指示，或者是否有某种方法可以在复制 MATLAB 包装类时实现重新初始化 C++ 对象句柄的期望行为？

* * *

## 替代方法：检测何时在工作人员上运行

仅供参考，这是我在工作人员中使用的重新分配的替代方法：

```
classdef myclass < handle
    properties(SetAccess=protected)
        cpp_handle_
    end
    methods
        function obj = myclass(val)
            obj.cpp_handle_ = rand(1);
            disp(['Initialized myclass with handle: ' num2str(obj.cpp_handle_)]);
        end
        % destructor
        function delete(obj)
            disp(['Deleted myclass with handle: ' num2str(obj.cpp_handle_)]);
        end
        % class method
        function amethod(obj)
            obj.check_handle()
            disp(['Class method called with handle: ' num2str(obj.cpp_handle_)]);
        end
        % reinitialize cpp handle if in a worker:
        function check_handle(obj)
            try
                t = getCurrentTask();
                % if 'getCurrentTask()' returns a task object, it means we
                % are running in a worker, so reinitialize the class
                if ~isempty(t)
                    obj.cpp_handle_ = rand(1);
                    disp(['cpp_handle_ reinitialized to ' num2str(obj.cpp_handle_)]);
                end
            catch e
                % in case of getCurrentTask() being undefined, this
                % probably simply means the PCT is not installed, so
                % continue without throwing an error
                if ~strcmp(e.identifier, 'MATLAB:UndefinedFunction')
                    rethrow(e);
                end
            end
        end
    end
end 
```

和输出：

```
Initialized myclass with handle: 0.034446
cpp_handle_ reinitialized to 0.55625
Class method called with handle: 0.55625
cpp_handle_ reinitialized to 0.0048098
Class method called with handle: 0.0048098
cpp_handle_ reinitialized to 0.58711
Class method called with handle: 0.58711
cpp_handle_ reinitialized to 0.81725
Class method called with handle: 0.81725
cpp_handle_ reinitialized to 0.43991
cpp_handle_ reinitialized to 0.79006
cpp_handle_ reinitialized to 0.0015995
Class method called with handle: 0.0015995
cpp_handle_ reinitialized to 0.0042699
cpp_handle_ reinitialized to 0.51094
Class method called with handle: 0.51094
Class method called with handle: 0.0042699
Class method called with handle: 0.43991
cpp_handle_ reinitialized to 0.45428
Deleted myclass with handle: 0.0042699
Class method called with handle: 0.79006
Deleted myclass with handle: 0.43991
Deleted myclass with handle: 0.79006
Class method called with handle: 0.45428 
```

从上面可以看出，当在 worker 中运行时，确实会发生重新分配。但是，无论 C++ 类被重新分配多少次，每个 worker 只调用一次*析构函数，从而导致内存泄漏。*

* * *

# 解决方案：使用`loadobj`

以下作品：

```
classdef myclass < handle
    properties(SetAccess=protected, Transient=true)
        cpp_handle_
    end
    methods(Static=true)
        function obj = loadobj(a)
            a.cpp_handle_ = rand(1);
            disp(['Load initialized encoder with handle: ' num2str(a.cpp_handle_)]);
            obj = a;
        end
    end
    methods
        function obj = myclass(val)
            obj.cpp_handle_ = rand(1);
            disp(['Initialized myclass with handle: ' num2str(obj.cpp_handle_)]);
        end
        % destructor
        function delete(obj)
            disp(['Deleted myclass with handle: ' num2str(obj.cpp_handle_)]);
        end
        % class method
        function amethod(obj)
            disp(['Class method called with handle: ' num2str(obj.cpp_handle_)]);
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T15:55:27.777

当您将对象实例传递到`PARFOR`循环体时，其行为与将其保存到文件中然后再次加载它的行为相同。最简单的解决方案可能是将您的标记`cpp_handle_`为`Transient`. 然后，您需要实施`SAVEOBJ`并`LOADOBJ`安全地传输您的数据。有关自定义类的保存/加载行为的更多信息，请参阅[此页面](http://www.mathworks.com/help/matlab/control-save-and-load.html)。

# http - 302重定向不当行为

> ID：13842896
> 
> 赞同：1
> 
> 时间：2012-12-12T15:22:31.523
> 
> 标签：http, libcurl

我正在使用很旧的 libCurl 7.15.1。当我收到请求时，服务器按预期返回 302，并在位置标头中包含重定向的 url。但是当我再次发出 get 请求时，它会直接转到重定向的 url，而不是实际的 URL。这实际上表现得像 301 永久重定向。我使用 TRUE 值和 MAXREDIRS 设置为 5 的 followLocation 选项。

我在这里错过了什么吗？

```
CURL* handle;
char* url = "www.google.com";
initialize()
{
    curl_easy_setopt(handle, CURLOPT_URL, url);
}

perform()
{
    curl_easy_perform(handle);
}

main()
{
    CURL* handle = curl_easy_init();
    initialize();
    perform();

    //Do something for some time (delay)
    perform();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:35:03.333

libcurl 将始终使用[CURLOPT_URL](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTURL)请求您在句柄中设置的 URL 。如果您不更新 URL，它将在所有重复使用句柄的后续请求中请求该 URL。

传输遵循 Location: 在前一个请求中设置 CURLOPT_FOLLOWLOCATION 的事实不会影响它将在后续请求中请求哪个 URL。

您可能应该知道，当您使用这样一个旧的 libcurl 版本时，它不会从您的代码中复制 URL 字符串，而是会指向它，因此如果您同时更改字符串，它会改变“ libcurl 所知道的“幕后”。

# vb.net - 限制文本框中逗号的数量

> ID：13842897
> 
> 赞同：2
> 
> 时间：2012-12-12T15:22:34.017
> 
> 标签：vb.net, winforms

我有一个文本框的小问题。我希望它付出代价，但问题是我们可以输入多个逗号，这会使一切都不起作用。我想将逗号的数量限制为 1

这是我尝试过的：

```
If ("0123456789,\b".IndexOf(e.KeyChar) = -1) Then
  If e.KeyChar <> Convert.ToChar(Keys.Back) Then
    If (",".IndexOf(e.KeyChar) = -1) And txtPrix.Text.Contains(",") Then
      e.Handled = False
    Else
      e.Handled = True
    End If
  End If 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T15:28:27.660

最可靠的是使用`Double.TryParse`or `Decimal.TryParse`：

```
Dim d = Double.MinValue
If Double.TryParse(txt.Text, d)
    ' it's a number 
Else
    ' it's not a number 
End If 
```

# c++ - 任何代表有序元素对的 stl/boost 类型？

> ID：13842900
> 
> 赞同：1
> 
> 时间：2012-12-12T15:22:45.267
> 
> 标签：c++, boost, stl

我只是想知道是否有任何实现以下内容的 stl/boost 类型。

我需要一对根据提供的二进制谓词保持其元素处于有序状态，即始终对应于条件`Predicate(pair.first, pair.second) == true`。

更具体地说，我需要一个按降序存储其元素的对，即对于任何对`pair.first < pair.second`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:28:32.887

如果第一秒是您的示例中的字段，这似乎是不可能的，因为当使用更改其中一个时，不会调用任何配对方法。如果它的方法很容易做到这一点：

```
class UnorderePair{
    T first_, second_;
    T& first(){
         return predicate(first_, second_)? first_: second_;
    }
    T& second(){
         return !predicate(first_, second_)? first_: second_;
    }

}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:26:09.123

您可以使用`std::set`，或为它创建一个适配器，在 ctor 中保留 2 个元素并丢弃任何会破坏类不变量的附加/前置/任何内容`assert ( length == 2)`。

# javafx - JavaFX将数据行从一个表添加到另一个表

> ID：13842903
> 
> 赞同：0
> 
> 时间：2012-12-12T15:22:50.493
> 
> 标签：javafx

我正在尝试将我在一个表中选择的行添加到另一个表中。我不确定如何动态追加行。到目前为止我所做的代码只是改变了第一行。

```
int hr = 1;
if ( hr == 1){
    ObservableList<TableColumn<ObservableList<StringProperty>, ?>> header = tableId.getColumns();
    auswTable.getColumns().addAll(header);
    hr = 2;
}
    ObservableList<ObservableList<StringProperty>> content = 
            tableId.getSelectionModel().getSelectedItems();
    auswTable.setItems(content); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:10:33.520

> 现在它只是将一行发送到 table2 并在用户每次单击按钮时交换其内容。我喜欢在 table2 中从 table1 添加更多行。

发生这种情况是因为在 table2 的代码中，您将 selectedItems 可观察列表设置为 setItems ，因此当用户在表 1 中选择一行/行时，它将自动添加 table2。要解决此问题，请为 table2 定义一个新的 ObserbaleList 并将选定项中的值添加到其中。

示例代码：

```
private  ObservableList<ObservableList<StringProperty>> table2Observable =  
                                            FXCollections.observableArrayList();

private boolean init = true;

  if(init) {

      ObservableList<TableColumn<ObservableList<StringProperty>, ?>> header =  
                          tableId.getColumns();
     auswTable.getColumns().addAll(header);
     auswTable.setItems(table2Observable);
     init = false;
    }

     table2Observable.addAll(tableId.getSelectionModel().getSelectedItems()); 
```

# ruby-on-rails - 使用 gem libv8 "3.11.8" 的问题

> ID：13842906
> 
> 赞同：0
> 
> 时间：2012-12-12T15:23:01.300
> 
> 标签：ruby-on-rails, gem

我正在尝试在我的 Rails 项目中使用**“gem libv8” 。**所以我加了

> 宝石'libv8'，'〜> 3.11.8'

在我的 Gemfile 中，但是当我运行**bundle**命令时，它显示如下错误

```
You have requested:

  libv8 ~> 3.11.8

The bundle currently has libv8 locked at 3.3.10.4.

Try running `bundle update libv8` 
```

我试图通过键入**gem list 查看**系统中安装了哪个版本的 libv8 ，但即使在该列表中它也显示为类似`libv8 (3.11.8.4)`，但不确定为什么我会收到此错误消息。

任何的意见都将会有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:24:46.547

Gemfile.lock 文件没有更新，运行*bundle update libv8*就可以了。

# javascript - 使用 Javascript 对 Twitter 进行 Pin 授权

> ID：13842913
> 
> 赞同：1
> 
> 时间：2012-12-12T15:23:09.867
> 
> 标签：javascript, oauth, twitter

我是这里的新手，对此很难过。我正在使用 OAuth2.0 将 twitter（OOB 方法）与我的应用程序集成。我正在使用 Javascript/HTML5 编写它。我已经完成了所有搜索，但找不到解决方案。

我的问题是 Twitter 给了我一个密码来完成授权，但我找不到可以输入这个密码的地方来完成这个过程。

我应该回到应用程序并有一个文本框并要求用户输入密码吗？如果是这样，我如何返回具有 pin 屏幕的应用程序？我不知道如何为我的应用设置 URL 以推动用户返回应用？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:21:56.533

是的，您需要让用户将该引脚复制到您的应用程序中。然后，您的应用程序将使用与在基于浏览器的 oauth for twitter 中使用[相同的方式`oauth_verifier`](https://dev.twitter.com/docs/auth/pin-based-authorization)使用此 pin - 即您将其交换为`oauth_token`然后`token_secret`您可以使用它来获取所有用户详细信息。

顺便说一句，我假设当您说您正在编写应用程序时，您不是在编写浏览器应用程序？如果您确实正在编写一个将在浏览器中运行的网站，那么基于 pin 的身份验证既麻烦又不必要。在这种情况下，您应该使用基于浏览器的 oauth 身份验证。不同之处在于，不是在您的应用程序中显示用户然后在浏览器地址栏中输入的 url，您只需将用户重定向到此 twitter url，如果他们提供有效的用户名和密码，twitter 会将他们重定向回您的网站。

# actionscript-3 - 更改 SimpleButton 的状态

> ID：13842916
> 
> 赞同：1
> 
> 时间：2012-12-12T15:23:17.560
> 
> 标签：actionscript-3, flash

我在弹出窗口中使用标准 SimpleButton。问题是当我通过单击 SimpleButton 关闭弹出窗口时，下一次出现弹出窗口时，SimpleButton 仍保持“MouseOver”状态。只有当我上下移动光标时，它才会恢复正常。
我尝试制作“gotoAndStop”，但 SimpleButton 不是 MovieClip。
我尝试手动触发 MouseOut 和 RollOut 事件，但仍然没有运气。
可以做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:11:41.837

这是一个已知的“错误”，并且 afaik 没有真正的解决方法。

我停止使用 SimpleButton 是因为你迟早会想要为它使用某种自定义行为。（慢慢淡入，一些闪光效果或其他）。

因此，最简单的方法是将按钮转换为带有帧标签的影片剪辑，然后执行`gotoAndPlay("over_in")`或执行`gotoAndPlay("over")`您想要执行的任何操作。

认为我已经使用了一种解决方法，即在跨越 10 帧左右的“过度状态”上播放一些短片，然后在完成后被删除。但不记得那是在 AS2 还是 AS3 中。我知道我开始使用“标记的影片剪辑解决方案”，从那时起就没有真正使用过其他任何东西。

# java - windows cmd中的JVM http代理

> ID：13842917
> 
> 赞同：0
> 
> 时间：2012-12-12T15:23:18.440
> 
> 标签：java, windows, proxy, jvm, cmd

我正在使用需要互联网的 java 应用程序。但是我通过代理有互联网，所以应用程序不起作用。我正在寻找一种在 JVM 中启用代理的方法（注意我不能通过代码更改它，我没有源代码）。请让我知道如何通过 Windows 上的命令提示符执行此操作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:26:09.423

```
 java -Dhttp.proxyHost=10.0.0.100 -Dhttp.proxyPort=8800 yourprogramhere 
```

# javascript - 在地图中使用 jquery 访问嵌套的 json（由 gson 准备）

> ID：13842918
> 
> 赞同：0
> 
> 时间：2012-12-12T15:23:20.273
> 
> 标签：javascript, jquery, html, json, gson

我有一个类似的 java 对象，其中有几个对象字段，其中包含基本字段，这是一个示例：

```
Template {
    String name;
    EmailMessage defaultEmailMessage;
}
EmailMessage {
    String emailSubject;
    String emailBody;
} 
```

我有一个 spring 控制器方法，它使用 gson 返回 json 格式的模板列表。

在我的 jsp 中，我使用 jquery ajax 调用来获取此列表，然后根据它填充一些 html 内容，这是一个缩短的版本：

```
$.ajax({
    type : "GET",
    url : '<c:url value="/listTemplates.htm"/>',
    dataType: 'json',
    success : function(templates) {
    var map = $.map(templates, function(template) { 
        return { 
            "name": template.name,
            "emailSubject": template.defaultEmailMessage.emailSubject
    };});
        $("#thumbnails-ul").html($("#campaignThumbTmpl").tmpl(map));
    },
    error : function(data) {
        alert(data.responseText);
    }
}); 
```

在萤火虫中，我看到一个错误`undefined template.defaultEmailMessage`，但是当我调试时，我可以同时评估`template.defaultEmailMessage`和`template.defaultEmailMessage.emailSubject`. 我尝试使用`$.each`但同样的问题。如何访问嵌套的 json？如果您想在浏览器中查看 json 的完整输出，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:26:24.497

替换你 `"emailSubject": template.defaultEmailMessage.emailSubject`的`"emailSubject": template.defaultEmailMessage`

**稍后添加：** 为什么要再次将数据转换为 json ？您以 json 格式请求数据，并且再次将 json 数据返回到模板中进行编译。将数据直接放入模板中。

```
$.ajax({
          type:"GET",
          url:"<c:url value="/listTemplates.htm"/>",
          datatype:"application/json",
          success:function(templates){      
                   $.get("Put Your Template URL HERE",function(template}
                   var result = _.template(template);                                $("#thumbnails-ul").html($("#campaignThumbTmpl").tmpl(templates));
        });
             }
    }); 
```

这样，您将能够通过`.each`循环访问数据，将数据放在模板中的任何位置，如下所示：

```
 <% _.each(data,function(anynamehere){ %>
        <li><a href="<%= anynamehere.name %>"></li>
    <% }); %> 
```

以上是从类中打印您的姓名的示例，但是对于其他 .each 循环，您也可以放置其他属性....希望这会有所帮助...

# html - 内部 HTML 表格不是全宽的

> ID：13842921
> 
> 赞同：0
> 
> 时间：2012-12-12T15:23:26.627
> 
> 标签：html, css

我有一个有点复杂的 HTML+CSS 情况，我想以某种方式理解和修复。

HTML 由 GWT 应用程序生成，因此请不要评论巨大的开销。

我的问题是带有蓝色边框的内表没有占用红色边框 div 中的完整水平空间。

我试图`width:100%` 在 div 和实际表之间放置每个级别，但没有帮助。在运行时外部 div 的宽度是未知的，所以我不想在嵌套表中重复确切的宽度。

这是显示情况的 jsFiddle：http: [//jsfiddle.net/jantekb/NBCcZ/](http://jsfiddle.net/jantekb/NBCcZ/)

在您的回答中，请尝试解释实际结果的原因，不仅告诉我正确的答案，而且还非常感谢后者...... :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:29:23.137

其中一张表没有 100% 的宽度，添加这一行，您将看到不同之处：

```
td > table { width:100%; } 
```

[http://jsfiddle.net/NBCcZ/2/](http://jsfiddle.net/NBCcZ/2/)

但是您应该找到一种更好的方法来在混乱中添加该 CSS :D

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:29:40.467

您必须为每个`table`元素指定 100% 的宽度。

添加以下`css`内容为我修复了它：

```
table{
    width: 100%;
} 
```

[http://jsfiddle.net/NBCcZ/3/](http://jsfiddle.net/NBCcZ/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T15:32:30.137

在你的 CSS 中试试这个：

```
table {
    width: 100%;       
} 
```

这会将所有表格元素设置为其父元素的 100% 宽度。受固定宽度为 550px 的 div 限制。所有子元素都将符合表格宽度并适当调整。默认情况下，表格宽度将仅与它包含的元素一样宽。

# android - 布局土地文件不起作用

> ID：13842925
> 
> 赞同：1
> 
> 时间：2012-12-12T15:23:42.660
> 
> 标签：android, android-layout

我有以下问题。我的程序是秒表。我有`res/layout/main.xml`，`res/layout-land/main.xml` 但它工作错了。当我转动手机时，程序停止。我认为它再次调用 onCreate 。我在清单中添加了以下行

`android:configChanges="keyboardHidden|orientation"`

但是在此布局活动未加载之后。

我已经尝试了下一个示例，但它不起作用

```
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  int ot = getResources().getConfiguration().orientation;
  switch (ot) {
    case Configuration.ORIENTATION_LANDSCAPE:
     setContentView(R.layout.main_land);
     break;
    case Configuration.ORIENTATION_PORTRAIT:
     setContentView(R.layout.main);
     break;
  }
 Toast.makeText(this, "Helloo", Toast.LENGTH_SHORT).show();
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
  // TODO Auto-generated method stub
  super.onConfigurationChanged(newConfig);

  int ot = getResources().getConfiguration().orientation;
  switch (ot) {
    case Configuration.ORIENTATION_LANDSCAPE:
     setContentView(R.layout.main_land);
     break;
    case Configuration.ORIENTATION_PORTRAIT:
     setContentView(R.layout.main);
     break;
  }
}

@Override
public Object onRetainNonConfigurationInstance() {
 // TODO Auto-generated method stub
 return super.onRetainNonConfigurationInstance();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:22:29.337

当您在 AndroidManifest.xml 中包含以下命令时，即**android:configChanges="orientation"**，您将**手动禁用**默认布局更改行为，即以新方向重新启动您的活动。

非常有用的是，当您在 onConfigurationChanged 中获得**CONFIGURATION_LANDSCAPE/CONFIGURATION_PORTRAIT**时，您需要手动更改使用的布局。

请注意，根据 Android 开发者网站上的 Activity 文档，onConfigurationChanged 是“最后的手段”选项 - 通常最好保持状态并让系统重新启动您的应用程序。

参考链接如下：-[处理配置的链接](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)。我希望这对你有用。

# winforms - 如何在 Winforms 应用程序中使标签文本可缩放

> ID：13842931
> 
> 赞同：6
> 
> 时间：2012-12-12T15:24:10.257
> 
> 标签：winforms, c#-4.0, telerik, label, system.drawing

我正在寻找一种方法来使标签中的文本可缩放以适合整个父容器。我能想到的一种方法是在窗口重新调整大小时获取容器大小，然后相应地增加或减小字体大小，但这会限制它的可能性。

想知道是否有更好的方法可以做到这一点，它可能更像是 Winforms 应用程序中的锚属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T02:57:49.517

我知道答案隐藏在图形对象和绘画事件的某个地方，玩弄这两个关键字解决了我的问题。这是在我的特定情况下有效的解决方案。

我只是在为我的标签更改绘制事件的字体大小，如下所示：

```
private void myLabel_Paint(object sender, PaintEventArgs e)
{
     float fontSize = NewFontSize(e.Graphics, parentContainer.Bounds.Size, myLabel.Font, myLabel.Text);
     Font f = new Font("Arial", fontSize, FontStyle.Bold);
     myLabel.Font = f;
} 
```

NewFontSize 函数如下所示：

```
public static float NewFontSize(Graphics graphics, Size size, Font font, string str)
{
    SizeF stringSize = graphics.MeasureString(str, font);
    float wRatio = size.Width / stringSize.Width;
    float hRatio = size.Height / stringSize.Height;
    float ratio = Math.Min(hRatio, wRatio);
    return font.Size * ratio;
} 
```

我还发现这篇文章很有帮助 [http://www.switchonthecode.com/tutorials/csharp-tutorial-font-scaling](http://www.switchonthecode.com/tutorials/csharp-tutorial-font-scaling)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-14T20:59:50.817

这扩展了已接受的答案并为我工作：

首先，我通过在设计器中设置一个正常的标签来确定我的“黄金比例”，该标签的字体大小在 Label.Height 属性设置为 100 时看起来不错。这就是我得到 48.0F 的字体 emSize 的地方。

然后在 OnPaint 覆盖中，如果 100.0/48.0 的比例*发生变化*，那么只需调整一次字体并保存新的比例（这样我们就不必在每次绘制控件时都制作新字体）。

当您与常规标签一起完成后，将其放入您的工具箱中效果很好。

```
public partial class LabelWithFontScaling : Label
{
    public LabelWithFontScaling()
    {
        InitializeComponent();
    }
    private void InitializeComponent()
    {
        this.SuspendLayout();
        this.Name = "label1";
        this.Size = new System.Drawing.Size(250, 100);
        this.ResumeLayout(false);
    }
    float mRatio = 1.0F;
    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        float ratio = e.ClipRectangle.Height / 100.0F;
        if ((ratio > 0.1) && (ratio != mRatio))
        {
            mRatio = ratio;
            base.Font = new Font(Font.FontFamily, 48.0F * ratio, Font.Style);
        }
    } 
```

# laravel - 带有restful的Laravel嵌套控制器

> ID：13842934
> 
> 赞同：2
> 
> 时间：2012-12-12T15:24:22.660
> 
> 标签：laravel, php

在我的 Laravel 项目中，我有以下文件夹结构

`application/controllers/products.php`

`application/controllers/products/categories.php`

在我的`products.php`

```
class Products_Controller extends Base_Controller {

    public $restful = true;    

    public function get_index()
    {
        $data['title'] = 'Products List';
        return View::make('product.index',$data);
    }    
} 
```

在我的`categories.php`

```
class Products_Categories_Controller extends Base_Controller{

    public $restful = true;    

    public function get_index(){

        $data['title'] = "All Categtories";

        return View::make('category.index', $data);
    }    
} 
```

这是我的`routes.php`

```
Route::get('products', array('as' => 'products', 'uses' => 'products@index'));
Route::get('products/categories', array('as' => 'categories', 'uses' => 'categories@index')); 
```

当我浏览时`example.com/products/categories`，我收到 404 错误消息。我怎么了`routes.php`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T16:47:22.990

```
Route::get('products/categories', array('as' => 'categories', 'uses' => 'products.categories@index')); 
```

注意`'uses' => 'products.categories@index'`

# php - 使用ajax POST到slim不起作用

> ID：13842936
> 
> 赞同：0
> 
> 时间：2012-12-12T15:24:26.733
> 
> 标签：php, jquery, ajax, slim

我正在尝试使用 jQuery 的 ajax 将数据发布到我的超薄 api。

这是jQuery

```
$.ajax({type:'POST',url:'/api/insert',dataType:'json',data:{name:'matname',label:'Material Name'},
        success:function(data){
            console.log(data);
        }
});​ 
```

和苗条的 index.php

```
<?php
require 'Slim/Slim.php';
\Slim\Slim::registerAutoloader();
function json($obj) {
    header('Content-Type','application/json');
    return json_encode($obj);
}

$app = new \Slim\Slim();

$app->post('/insert', function () {
    $request = Slim::getInstance()->request();
    $inputs = json_decode($request->getBody());
    echo json($inputs);
});
?> 
```

index.php 中还有一个 $app->get() ，如果我删除它，我会在尝试 POST 时得到一个 405 Method Not Allowed 。很明显我没有执行 POST，它实际上是在调用 GET。我需要知道该怎么做才能通过 jquery 发布。这一切都发生在同一个域本地主机上

这是帖子的网络活动：

```
Request URL:http://localhost/api/insert
Request Method:POST
Status Code:405 Method Not Allowed
Request Headersview source
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:96
Content-Type:application/json; charset=UTF-8
Cookie:PHPSESSID=bhj4oot5epdi2rqkn45m0oqgr0
Host:localhost
Origin:http://localhost
Referer:http://localhost/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
X-Requested-With:XMLHttpRequest
Request Payload
{"fid":3,"table":"input","label":"Material Name","name":"matname","type":"text","mandatory":"Y"}
Response Headersview source
Cache-Control:private
Connection:Keep-Alive
Content-Length:4
Content-Type:text/html
Date:Wed, 12 Dec 2012 15:49:15 GMT
Expires:Thu, 19 Nov 1981 08:52:00 GMT
Keep-Alive:timeout=5, max=100
Pragma:no-cache
Server:Apache/2.2.22 (Unix) DAV/2 PHP/5.3.15 with Suhosin-Patch mod_ssl/2.2.22 OpenSSL/0.9.8r
X-Powered-By:PHP/5.3.15 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:26:35.510

请求将`/api/insert`

你的苗条火柴`/insert`

应该是一样的。

另一件事是你在 apache 上安装了 DAV 模块，它允许你打开和关闭接受的方法

检查您的 Apache 配置（站点配置）是否允许使用 POST 方法。

[http://httpd.apache.org/docs/2.2/mod/mod_dav.html](http://httpd.apache.org/docs/2.2/mod/mod_dav.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T06:22:43.690

尝试这个

```
$inputs = json_decode($request->getBody(),true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-09T10:28:15.220

尝试这个

在 Slim 帖子定义中包含尾部斜杠

```
$app->post('/insert/', function () { 
```

# android - 安卓ID错误

> ID：13842940
> 
> 赞同：0
> 
> 时间：2012-12-12T15:24:28.970
> 
> 标签：android, listview

我正在尝试设置列表视图，当我在模拟器中运行时出现错误“您的内容必须有一个 id 属性是 android.R.id.list”。

这是我的文件的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <!-- Main ListView
         Always give id value as list(@android:id/list)
    -->
    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

当我签入生成的 Java 文件时，R.id 'list' 不在其中。任何想法如何解决这一问题？

坦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:27:46.567

```
<ListView
    android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

试试看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:30:42.277

使用时，`android:id="@android:id/list"`您指的是 android 系统中已经定义的 id。要创建自己的 id，您需要使用以下内容：

```
<listview id="@+id/insertListNameHere"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:32:00.467

你写的代码有点不正确。

代替，

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

采用，

```
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T15:34:47.277

```
<ListView
    android:id="@+id/mainListView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
</ListView> 
```

试试这个。

# javascript - 基于多个单选按钮更新 textarea

> ID：13842944
> 
> 赞同：0
> 
> 时间：2012-12-12T15:24:50.367
> 
> 标签：javascript, jquery

我对 jQuery 很陌生，我正在尝试修复一段脚本来更新基于多个单选按钮的文本区域的内容。

单选按钮：

```
<input type='radio' name='color'>Red
<input type='radio' name='color'>Green
<input type='radio' name='size'>Small
<input type='radio' name='size'>Large 
```

textarea 有一个默认内容：

```
<textarea><a href='http://www.example.com'><img src='images/red-small.png'></a></textarea> 
```

我想分别更新文件名的两个部分。是否可以通过更新 var 或其他方式来更新 textarea 的内容？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:30:03.120

是的，您可以使用 jQuery 选择文本区域并根据选择单选按钮控制它。

```
$('input[type="radio"]').change(function() {
    if($(this).val() === 'red') {
        $('textarea').css('background','red');
    } else {
        $('textarea').css('background','');
    }
}); 
```

我认为这是一个 jsfiddle 可以更好地回答您的问题：

[http://jsfiddle.net/U8Fhv/1/](http://jsfiddle.net/U8Fhv/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:27:05.733

我不知道那些 a.href 和 img.src 来自哪里。但是，如果您只想要一个在更改 textarea 内容之前将两者都作为参数的函数，那么我认为这是

```
function settextareacontent(a,img){
 var t = $('textarea');
 var d = $('<div>');
 d.html(t.html().replace(/&lt;/g,'<').replace(/&gt;/g,'>'));
 d.children()[0].src = a;      //X
 d.children()[1].href = img;   //X
 t.html(d.html());
} 
```

您也可以使用正则表达式来执行此操作。但是假设如果您的 textarea 内容不可预测并且使用正则表达式几乎是不可能的，那么您可以使用上面的函数，修改 X 部分，为 textarea 中的每个元素添加 id，最后只需使用 jquery 获取元素并设置他们的属性值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:51:11.760

您可以使用 JQuery 的 .val() 函数来更改文本区域的内部结构。

例子：

$("textarea").val("你想在 textarea 中添加的新内容"); // << 设置

var original_val = $("textarea").val(); // << 获取

# javascript - Jquery Validation Plugin - 仅在某些情况下适用于数字字段

> ID：13842946
> 
> 赞同：0
> 
> 时间：2012-12-12T15:24:58.607
> 
> 标签：javascript, jquery, jquery-plugins, jquery-validate

我正在尝试使用 jQuery Validate 对数值进行验证，但仅在选中单选按钮时；如果未选中单选按钮，则该字段将是必需的，但用户可以插入字母数字值；问题是仅验证该字段是否为空，console.log 显示我想要的值（真或假），但在提交时将数据发送到服务器。这就是我所拥有的：

```
$("#new_redeem_coupon").validate({
    rules:{
        'redeem_coupon[confirmation_number]': {
            required: function(element){
                var v = $("#redeem_coupon_confirmation_number").attr("value");
                if($("#redeem_coupon_coupon_kind_0").attr("checked") == "checked"){
                    ret = (v == "");
                    console.log("VALUE1: " + ret);
                    return ret;
                }
                else{
                    var ret = (v == "" || isNaN(v));
                    console.log("VALUE2: " + ret);
                    return ret;
                }
            }
        }
    },
    errorPlacement:function(error, element){
        $(element).attr("title",error.html()).tooltip({track:true});
    },
    success:function(label){
    },
    errorClass: "invalid",
    focusCleanUp: true
}); 
```

我也尝试过使用以下代码，但没有奏效；该值始终保持为假：

```
'redeem_coupon[confirmation_number]': { required:true, number: $("#redeem_coupon_coupon_kind_0").attr("checked") != "checked" } 
```

在此先感谢您的帮助。

巴勃罗·马蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:44:14.553

解决方案：使用上列出的`add`和方法：http: [//docs.jquery.com/Plugins/Validation/rules#.22add.22rules](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)`remove`

规则：

```
$("#new_redeem_coupon").validate({
    rules:{
        'redeem_coupon[confirmation_number]': {required: true}
    },
    errorPlacement:function(error, element){
        $(element).attr("title",error.html()).tooltip({track:true});
    },
    success:function(label){
    },
    errorClass: "invalid",
    focusCleanUp: true
}); 
```

我通过无线电添加了一个事件来添加和删除每种情况的规则：

```
$(".coupon_kind_opt").change(function(){
    if($("#redeem_coupon_coupon_kind_0").attr("checked") == "checked"){
        $("#redeem_coupon_confirmation_number").rules("remove", "number");
    }
    else{
        $("#redeem_coupon_confirmation_number").rules("add", {
            number: true
        });
    }
}) 
```

# php - TYPO3 6.0.0 错误：尝试访问不可浏览的存储中的文件夹

> ID：13842953
> 
> 赞同：2
> 
> 时间：2012-12-12T15:25:16.650
> 
> 标签：php, web, content-management-system, typo3, typoscript

我已经下载了 TYPO3 6.0.0rc1 的介绍包，并尝试使用一个名为“fileuser”的新文件存储。因此，我使用相对基本路径“fileuser/”创建了一个新的文件存储条目，并在文件系统中创建了文件夹（权限设置为 777）以及“已*处理*”文件夹（也在文件存储数据集中定义）。

现在我调用了 File -> Filelist 模块并重新加载了文件夹树。显示了新的文件存储，但添加了“离线”。如果我尝试访问它，我会收到错误消息：“您正在尝试访问不可浏览的存储中的文件夹。”。

关于如何摆脱这个问题的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T13:23:06.040

在具有单独工作副本的分布式开发环境中进行开发时，这是一个常见问题。对文件/文件夹结构所做的任何更改都应立即被所有其他工作副本采用。

正如 pgame 所指出的，存储文件夹必须（再次）在线设置。这是你一步一步做的：

1.  在管理面板中，选择“Web”下的“List”视图
2.  在页面树中选择根页面（应该有错字图标分配给它）
3.  在加载的编辑区域中，现在通过单击铅笔符号在数据选项卡“文件存储”下编辑您的存储文件夹。
4.  选择“访问”选项卡
5.  激活“在线”复选框。
6.  保存您的条目

您的存储文件夹现在应该可以再次访问了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T11:34:30.033

您需要`online`在`storage configuration record`.`access tab`

# java - 使用 Jvisualvm 检测内存泄漏

> ID：13842956
> 
> 赞同：2
> 
> 时间：2012-12-12T15:25:20.677
> 
> 标签：java, memory-leaks, jvisualvm

我的 java jar 只是大型程序使用的众多 jar 之一。我正在尝试确定我的代码是否是导致内存泄漏的原因，或者我的代码之外是否还有其他问题。我正在使用 jvisualvm，并且已经确定了我所有的课程，而且似乎没有一个是可疑的。查看采样器，我可以看到就大小和创建的实例而言，byte[]、char[] 和 int[] 似乎是最大的用户。问题是，我无法确定他们属于谁。我知道我的程序中有各种 byte[]，但是由于有大约 32,000 个实例，因此很难逐个确定来源。有没有办法过滤数据，以便只能查看来自某个罐子或区域的项目？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:09:58.930

除非您知道您正在创建很多`byte[]`或`String`实例，否则我不会投入资金`byte[]`或`char[]`成为问题的根源。我挖过的几乎每一个堆都有大量的这些，因为它们被用于许多 java 的内部结构中。我并不是说它们*不是*问题，但首先专注于你知道*你*正在创建的异常数量的对象会更有成效，即使它们不是堆中最大的东西。

我个人发现 MAT 比 VisualVM 更适合分析工作，尽管 VisualVM 非常适合动态监控内存使用情况和观察 GC 周期。

MAT 还允许您向下钻取以查看对保留对象的传入和传出引用。这将使您更好地了解哪些对象占用的内存比您预期的要多，并且应该帮助您找出 JAR 中的一个对象是否是罪魁祸首。

MAT 附带的帮助文档非常好，绝对值得一读以帮助您入门。

如果您想进一步深入阅读 OQL 上的兔子洞，您可以使用它来查询 MAT 和 VisualVM 中的堆。

MAT 可以在这里找到：http: [//www.eclipse.org/mat/](http://www.eclipse.org/mat/)

* * *

我挖出了一些背景资料（其中一些有点过时，但仍然有助于更好地了解如何解决问题）

[泄漏很容易找到，但内存使用情况分析有点困难](http://kohlerm.blogspot.co.uk/2009/03/leaks-are-easy-to-find-but-memory-usage.html)
[内存泄漏很容易找到](http://kohlerm.blogspot.co.uk/2009/02/memory-leaks-are-easy-to-find.html)
[使用 SAP 内存分析器查找内存泄漏](http://scn.sap.com/people/krum.tsvetkov/blog/2007/07/02/finding-memory-leaks-with-sap-memory-analyzer)

在查看堆时，还值得了解一些关于 GC 的知识，因此值得一读：
[GC Tuning](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)
[Diagnosing a Garbage Collection problem](http://www.oracle.com/technetwork/java/example-141412.html)

# android - android在ICS中不可见但在GB中工作的地图上绘制油漆

> ID：13842963
> 
> 赞同：1
> 
> 时间：2012-12-12T15:25:36.500
> 
> 标签：android, maps, draw, paint

我正在使用在谷歌上找到的一些代码（或者可能在这里，不确定）来获取两个点并将它们放置在地图上，以及它们之间的路线。此代码基于 JSON 解析，并且在运行 GB 2.3 的手机上测试时可以正常工作。在带有 4.1 的模拟器和带有 ICS 的朋友手机上，路线不可见，只有对象。我在清单中尝试使用*hardwareAccelerated选项，但没有运气。*无论如何，这是代码，也许有人知道为什么在 ICS 上看不到路由。

```
public class DrivingDirectionActivity extends MapActivity {

Point p1 = new Point();
Point p2 = new Point();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    MapView mapView = (MapView) findViewById(R.id.map);
    // setting a default value
    double src_lat = 18.5535;
    double src_long = 73.7966;
    double dest_lat = 18.5535;
    double dest_long = 73.7966;

    Geocoder coder = new Geocoder(getApplicationContext(),
            Locale.getDefault());

    List<Address> address_src = null;
    List<Address> address_dest = null;

    try {
        address_src = coder
                .getFromLocationName(
                        "Deepmala Housing Complex, Pimple Saudagar, Pimpri Chinchwad",
                        1);
        if (address_src.size() > 0) {
            Address loc = address_src.get(0);
            src_lat = loc.getLatitude();
            src_long = loc.getLongitude();
        }
    } catch (IOException e) { // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        address_dest = coder.getFromLocationName(
                "Infosys Phase 2, Hinjewadi Phase II, Hinjewadi", 1);
        if (address_dest.size() > 0) {
            Address loc = address_dest.get(0);
            dest_lat = loc.getLatitude();
            dest_long = loc.getLongitude();
        }
    } catch (IOException e) { // TODO Auto-generated catch block
        e.printStackTrace();
    }

    mapView.setBuiltInZoomControls(true);
    GeoPoint srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),
            (int) (src_long * 1E6));
    GeoPoint destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),
            (int) (dest_long * 1E6));

    DrawPath(srcGeoPoint, destGeoPoint, Color.GREEN, mapView);

    mapView.getController().animateTo(srcGeoPoint);
    mapView.getController().setZoom(13);

}

protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

private void DrawPath(GeoPoint src, GeoPoint dest, int color,
        MapView mMapView) {
    // connect to map web service
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(makeUrl(src, dest));
    HttpResponse response;
    try {
        response = httpclient.execute(httppost);

        HttpEntity entity = response.getEntity();
        InputStream is = null;

        is = entity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");
        String line = "0";
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        reader.close();
        String result = sb.toString();
        JSONObject jsonObject = new JSONObject(result);
        JSONArray routeArray = jsonObject.getJSONArray("routes");
        JSONObject routes = routeArray.getJSONObject(0);
        JSONObject overviewPolylines = routes
                .getJSONObject("overview_polyline");
        String encodedString = overviewPolylines.getString("points");
        List<GeoPoint> pointToDraw = decodePoly(encodedString);
        mMapView.getOverlays().add(new MyOverLay(pointToDraw));
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
        // TODO: handle exception
    }

}

private List<GeoPoint> decodePoly(String encoded) {

    List<GeoPoint> poly = new ArrayList<GeoPoint>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;

    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;

        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                (int) (((double) lng / 1E5) * 1E6));
        poly.add(p);
    }

    return poly;
}

private String makeUrl(GeoPoint src, GeoPoint dest) {
    // TODO Auto-generated method stub

    StringBuilder urlString = new StringBuilder();

    urlString.append("http://maps.googleapis.com/maps/api/directions/json");
    urlString.append("?origin=");// from
    urlString.append(Double.toString((double) src.getLatitudeE6() / 1.0E6));
    urlString.append(",");
    urlString
            .append(Double.toString((double) src.getLongitudeE6() / 1.0E6));
    urlString.append("&destination=");// to
    urlString
            .append(Double.toString((double) dest.getLatitudeE6() / 1.0E6));
    urlString.append(",");
    urlString
            .append(Double.toString((double) dest.getLongitudeE6() / 1.0E6));
    urlString.append("&sensor=false");

    Log.d("xxx", "URL=" + urlString.toString());
    return urlString.toString();
}

class MyOverLay extends Overlay {
    private int pathColor;
    private final List<GeoPoint> points;
    private boolean drawStartEnd;

    public MyOverLay(List<GeoPoint> pointToDraw) {
        // TODO Auto-generated constructor stub
        this(pointToDraw, Color.GREEN, true);
    }

    public MyOverLay(List<GeoPoint> points, int pathColor,
            boolean drawStartEnd) {
        this.points = points;
        this.pathColor = pathColor;
        this.drawStartEnd = drawStartEnd;
    }

    private void drawOval(Canvas canvas, Paint paint, Point point) {
        Paint ovalPaint = new Paint(paint);
        ovalPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        ovalPaint.setStrokeWidth(2);
        ovalPaint.setColor(Color.BLUE);
        int _radius = 6;
        RectF oval = new RectF(point.x - _radius, point.y - _radius,
                point.x + _radius, point.y + _radius);
        canvas.drawOval(oval, ovalPaint);
    }

    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        Projection projection = mapView.getProjection();
        if (shadow == false && points != null) {
            Point startPoint = null, endPoint = null;
            Path path = new Path();
            // We are creating the path
            for (int i = 0; i < points.size(); i++) {
                GeoPoint gPointA = points.get(i);
                Point pointA = new Point();
                projection.toPixels(gPointA, pointA);
                if (i == 0) { // This is the start point
                    startPoint = pointA;
                    path.moveTo(pointA.x, pointA.y);
                } else {
                    if (i == points.size() - 1)// This is the end point
                        endPoint = pointA;
                    path.lineTo(pointA.x, pointA.y);
                }
            }

            Paint paint = new Paint();
            paint.setAntiAlias(true);
            paint.setColor(pathColor);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(5);
            paint.setAlpha(90);
            if (getDrawStartEnd()) {
                if (startPoint != null) {
                    drawOval(canvas, paint, startPoint);
                }
                if (endPoint != null) {
                    drawOval(canvas, paint, endPoint);
                }
            }
            if (!path.isEmpty())
                canvas.drawPath(path, paint);
        }
        return super.draw(canvas, mapView, shadow, when);
    }

    public boolean getDrawStartEnd() {
        return drawStartEnd;
    }

    public void setDrawStartEnd(boolean markStartEnd) {
        drawStartEnd = markStartEnd;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:27:40.807

我解决了，所有后台工作现在都在 AsyncTask 中。

# oracle - SELECT INTO 和多个变量用于 UPDATE

> ID：13842968
> 
> 赞同：3
> 
> 时间：2012-12-12T15:25:48.370
> 
> 标签：oracle, plsql, oracle-sqldeveloper

我是 Oracle 和 PL/SQL 的新手；我在选择几个变量时遇到了一些问题。我要做的是在一个表（SA_SPECIFICATION_DETAILS）中搜索多个项目，并将它们连接到另一个表（SA_ASSET）中的一个字段中。SA_SPECIFICATION_DETAILS 表为每个 SA_ASSET.ASSET_ID 保存多行属性。我已经为此工作了几天，并且不断遇到一些错误。这是我的示例代码：

```
DECLARE 
manuf VARCHAR(50);
mods VARCHAR(50);
mvs VARCHAR(50);
yeara VARCHAR(4);
assid VARCHAR(50):= &assid;

BEGIN
SELECT TRIM(ATTRIBUTE_VALUE) INTO manuf      
    FROM
      SA_SPECIFICATION_DETAILS d,
      SA_ASSET a
    WHERE
      d.SPECIFICATION_NO = a.SPECIFICATION_NO
    AND d.ATTRIBUTE_DESC = 'MANUFACTURER'
    AND ASSET_ID = assid;

SELECT TRIM(ATTRIBUTE_VALUE) INTO mods
    FROM
      SA_SPECIFICATION_DETAILS d,
      SA_ASSET a
    WHERE
      d.SPECIFICATION_NO = a.SPECIFICATION_NO
    AND d.ATTRIBUTE_DESC = 'MODEL'
    AND ASSET_ID = assid;

SELECT TRIM(ATTRIBUTE_VALUE) INTO mvs
    FROM
      SA_SPECIFICATION_DETAILS d,
      SA_ASSET a
   WHERE
      d.SPECIFICATION_NO = a.SPECIFICATION_NO
    AND d.ATTRIBUTE_DESC = 'MAIN VALVE SIZE'
    AND ASSET_ID = assid;

SELECT TRIM(ATTRIBUTE_VALUE) INTO yeara
    FROM
      SA_SPECIFICATION_DETAILS d,
      SA_ASSET a
    WHERE
      d.SPECIFICATION_NO = a.SPECIFICATION_NO
    AND d.ATTRIBUTE_DESC = 'YEAR MANUFACTURED'
    AND ASSET_ID = assid;

dbms_output.ENABLE(buffer_size => NULL);
DBMS_OUTPUT.PUT_LINE ('Variables:');
dbms_output.put_line (manuf);
dbms_output.put_line (mods);
dbms_output.put_line (mvs);
dbms_output.put_line (yeara);
dbms_output.put_line (assid);
END;

BEGIN
UPDATE
  SA_ASSET
SET
  ASSET_DESC = TRIM(ATTRIBUTE1)
  || ' - Service Type: PW, Manf: '
  || manuf
  || ', Model: '
  || mods
  || ', Main Valve Size: '
  || mvs
  || ', Year Manf: '
  || yearm
  || ', Location: '
  || TRIM(SA_ASSET.STREET_NUMBER_CHAR)
  || ' '
  || TRIM(SA_ASSET.STREET_NAME)
WHERE
  ASSET_TYPE     = 'HYDRANT'
AND ASSET_STATUS = 'ACTIVE'
AND UPPER(ASSET_DESC) NOT LIKE '%LOCATION:%'
AND UPPER(ASSET_DESC) NOT LIKE '%HYDRANT%'
AND SA_ASSET.ASSET_ID = assid
END; 
```

我已经对此进行了测试，但它失败了：错误报告：ORA-06550：第 73 行，第 1 列：PLS-00103：遇到符号“BEGIN” ORA-06550：第 96 行，第 1 列：PLS-00103：遇到符号预期以下情况之一时的“END”：

所以我注释掉了更新部分并尝试了这个：

```
 declare 
    manuf sa_specification_details.attribute_value%type;
    mods sa_specification_details.attribute_value%type;
    mvs sa_specification_details.attribute_value%type;
    yeara sa_specification_details.attribute_value%type;
    assid varchar2(15):= &assid;

    --dbms_output.ENABLE(buffer_size => NULL);

    BEGIN
    SELECT ATTRIBUTE_VALUE INTO manuf      
        FROM
          SA_SPECIFICATION_DETAILS d,
          SA_ASSET a
        WHERE
          d.SPECIFICATION_NO = a.SPECIFICATION_NO
        AND d.ATTRIBUTE_DESC = 'MANUFACTURER'
        AND ASSET_ID = assid;
    dbms_output.put_line (manuf);

   SELECT ATTRIBUTE_VALUE INTO mods
        FROM
          SA_SPECIFICATION_DETAILS d,
          SA_ASSET a
        WHERE
          d.SPECIFICATION_NO = a.SPECIFICATION_NO
        AND d.ATTRIBUTE_DESC = 'MODEL'
        AND ASSET_ID = assid;
    dbms_output.put_line (mods);

    SELECT ATTRIBUTE_VALUE INTO mvs
        FROM
          SA_SPECIFICATION_DETAILS d,
          SA_ASSET a
       WHERE
          d.SPECIFICATION_NO = a.SPECIFICATION_NO
        AND d.ATTRIBUTE_DESC = 'MAIN VALVE SIZE'
        AND ASSET_ID = assid;
    dbms_output.put_line (mvs);

    SELECT ATTRIBUTE_VALUE INTO yeara
        FROM
          SA_SPECIFICATION_DETAILS d,
          SA_ASSET a
        WHERE
          d.SPECIFICATION_NO = a.SPECIFICATION_NO
        AND d.ATTRIBUTE_DESC = 'YEAR MANUFACTURED'
        AND ASSET_ID = assid;
    dbms_output.put_line (yeara);  

    SYS.dbms_output.ENABLE;
    DBMS_OUTPUT.PUT_LINE ('Variables:');
    dbms_output.put_line (manuf);
    dbms_output.put_line (mods);
    dbms_output.put_line (mvs);
    dbms_output.put_line (yeara);
    dbms_output.put_line (assid); 
    END; 
```

这让我得到了错误：错误报告：ORA-01403：未找到数据 ORA-06512：在第 11 行 01403。00000 - “未找到数据” *原因：
*操作：

所以我在没有选择的情况下运行了查询：

```
SELECT
  ATTRIBUTE_VALUE
FROM
  SA_SPECIFICATION_DETAILS d,
  SA_ASSET a
WHERE
  d.SPECIFICATION_NO = a.SPECIFICATION_NO
AND d.attribute_desc = 'MANUFACTURER'
AND asset_id = '001722'; 
```

它返回单行/单列（又名它有效）。那么我做错了什么？我已经声明了变量，我已经让选择正确运行，但它没有传递变量（我可以告诉 - 没有 dbms_output.put_line (manuf); 工作）。我是完全接近还是走错了路？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T15:35:43.570

在您的代码中，您需要在此处添加单引号：

```
assid VARCHAR2(50):= '&assid'; 
```

还要在这里删除结束/开始：

```
dbms_output.put_line (assid);
END;

BEGIN 
```

因为您希望将其作为一个块（因为您正在使用更新中第一个选择的变量）。

最后我认为你的意思是这是yeara而不是yearm

```
 || ', Year Manf: '
  || yearm <-- yeara? 
```

您也可以进行优化，将 4 个选择替换为一个：

```
select max(case d.attribute_desc
             when 'MANUFACTURER' then trim(attribute_value)
           end) manuf,
       max(case d.attribute_desc
             when 'MODEL' then trim(attribute_value)
           end) mods,
       max(case d.attribute_desc
             when 'MAIN VALVE SIZE' then trim(attribute_value)
           end) mvs,
       max(case d.attribute_desc
             when 'YEAR MANUFACTURED' then trim(attribute_value)
           end) yeara
  into manuf, mods, mvs, yeara
  from sa_specification_details d,
       sa_asset a
 where d.specification_no = a.specification_no
   and d.attribute_desc in ( 'MANUFACTURER', 'MODEL', 'MAIN VALVE SIZE',
                             'YEAR MANUFACTURED' )
   and asset_id = assid; 
```

# ios - 将元素添加到 NSArray

> ID：13842974
> 
> 赞同：4
> 
> 时间：2012-12-12T15:25:59.480
> 
> 标签：ios, objective-c, nsmutablearray

我知道我们可以只使用 a`NSMutableArray`作为对象，但是如果这不是一个选项并且我们需要向 a 添加新元素怎么办`NSArray`。我们将如何做这件事？

我的直接答案是`NSMutableArray`用原始创建一个，向其中`NSArray`添加新元素，然后将其`NSMutableArray`转换回原始`NSArray`。

我在一次采访中被问到这个问题，我很好奇正确的解决方案可能是什么，除了`NSMutableArray`首先使用 a 。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T15:28:22.150

```
NSArray *array = [NSArray arrayWithObjects:@"One", @"Two", nil];

array = [array arrayByAddingObject:@"Three"]; 
```

或者

```
NSArray *newArray = [NSArray arrayWithObjects:@"Three", @"Four", nil];

array = [array arrayByAddingObjectsFromArray:newArray]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T15:27:55.500

您可以`mutableCopy`在`NSArray`对象上使用来返回`NSMutableArray`包含先前对象的一个​​。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T15:28:30.360

`NSArray`对象是*不可变*的，因此它们不能被修改。唯一的选择是创建一个新的`NSArray`（也许通过一个中间`NSMutableArray`对象）并将这个新数组放回拥有的对象（如果它允许的话）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-22T21:13:31.143

`arrayByAddingObject`我想知道使用和创建可变副本然后添加**一个**元素之间的性能差异是什么。

我发现没关系。

这是我用的

```
- (IBAction)doTest
{
    for(int n = 0; n < 7; n++){
        [self runTestWithExponent:n];
    }
    NSLog(@"done");
}

- (void)runTestWithExponent:(double)exponent
{
    int arraySize = pow(10.0, exponent);

    NSMutableArray *originalMutableArray = [NSMutableArray arrayWithCapacity:arraySize];
    for(int i = 0; i < arraySize; i++){
        [originalMutableArray addObject:@(i)];
    }
    NSArray *originalArray = [NSArray arrayWithArray:originalMutableArray];
    originalMutableArray = nil;

    //test first time
    NSDate *now = [NSDate date];
    NSArray *newArray = [originalArray arrayByAddingObject:@(-1)];
    NSTimeInterval time1 = [[NSDate date] timeIntervalSinceDate:now];
    newArray = nil;

    //test second time
    now = [NSDate date];
    NSMutableArray *mutable = [originalArray mutableCopy];
    [mutable addObject:@(-1)];
    NSTimeInterval time2 = [[NSDate date] timeIntervalSinceDate:now];
    mutable = nil;

    NSString *winner = (time1 == time2) ? @"same" : ((time1 < time2) ? @"arrayByAdding" : @"mutable");
    NSLog(@"%i : %f --- %f : %@ %f%%", arraySize, time1, time2, winner, (time1/time2 * 100));
} 
```

如您所见，我测试了不同的数组大小。尺寸为 1、10、100 ... 1,000,000。我发现无论大小，时代都非常相似。对于任何给定的长度，有时一种方法更快，而另一种方法则更快。我猜他们在内部做同样的事情。

这是三个运行的输出：

```
1 : 0.000026 --- 0.000034 : arrayByAdding 76.491228%
10 : 0.000011 --- 0.000011 : same 100.000000%
100 : 0.000021 --- 0.000024 : arrayByAdding 87.344913%
1000 : 0.000228 --- 0.000260 : arrayByAdding 87.689133%
10000 : 0.001458 --- 0.001406 : mutable 103.696638%
100000 : 0.015396 --- 0.015625 : arrayByAdding 98.534393%
1000000 : 0.158018 --- 0.162849 : arrayByAdding 97.033438%
done
1 : 0.000011 --- 0.000012 : arrayByAdding 92.039801%
10 : 0.000012 --- 0.000014 : arrayByAdding 85.531915%
100 : 0.000020 --- 0.000025 : arrayByAdding 79.952267%
1000 : 0.000185 --- 0.000144 : mutable 128.435430%
10000 : 0.001397 --- 0.001437 : arrayByAdding 97.216807%
100000 : 0.014448 --- 0.014132 : mutable 102.235803%
1000000 : 0.145622 --- 0.149862 : arrayByAdding 97.170746%
done
1 : 0.000013 --- 0.000012 : mutable 107.920792%
10 : 0.000011 --- 0.000013 : arrayByAdding 84.862385%
100 : 0.000025 --- 0.000029 : arrayByAdding 86.036961%
1000 : 0.000165 --- 0.000135 : mutable 122.207506%
10000 : 0.001547 --- 0.001470 : mutable 105.242884%
100000 : 0.014817 --- 0.014337 : mutable 103.347954%
1000000 : 0.146554 --- 0.148468 : arrayByAdding 98.710857%
done 
```

请记住，这仅针对添加一个元素进行了测试。我怀疑（例如）使用第二种方法将 500 个元素添加到 1,000 大小的数组中可能会更快，但我将此类实验留给其他人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T16:29:56.897

这只是一个技巧问题。是不可变的，如果不创建新数组或从以前的数组`NSArrays`创建，就无法更改，简单明了。`NSArray``NSMutableArray`

# php - php检查数据库

> ID：13842976
> 
> 赞同：0
> 
> 时间：2012-12-12T15:26:03.507
> 
> 标签：php, mysql, database

我正在做一个积分系统。现在我在系统中得到了，所以当人们以 5 点购买 1 张票时，他们会从 MySQL 中丢失它。但我不知道如何限制。现在人们可以购买无限积分并且它不会停止。唯一发生的事情是他们得到-10分（示例）。我想这样做，如果他们得到 0-4 分，他们就不能买票。我使用的代码：

```
<?php
session_start();
//=============Configuring Server and Database=======
$host        =    'localhost';
$user        =    'root';
$password    =    '';
//=============Data Base Information=================
$database    =    'login';

$conn        =    mysql_connect($host,$user,$password) or die('Server Information is not Correct'); //Establish Connection with Server
mysql_select_db($database,$conn) or die('Database Information is not correct');

//===============End Server Configuration============

//=============Starting Registration Script==========

$username    =    mysql_real_escape_string($_POST['txtusername']);

//=============To Encrypt Password===================

//============New Variable of Password is Now with an Encrypted Value========

$insert = "UPDATE `users` SET `points` = (`points`-5) WHERE `username` = '".$username."'";
mysql_query($insert);

// other codes

$insert = "UPDATE `users` SET `lodd` = (`lodd` +1) WHERE `username` = '".$username."'";
mysql_query($insert); 

 mysql_query($insert); 

header('location: succes.php');
?> 
```

以下是加 1 张票并减去 5 点的代码：

```
$insert = "UPDATE `users` SET `points` = (`points`-5) WHERE `username` = '".$username."'";
mysql_query($insert);

// other codes

$insert = "UPDATE `users` SET `lodd` = (`lodd` +1) WHERE `username` = '".$username."'";
mysql_query($insert); 

 mysql_query($insert); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:45:20.577

你可以试试

```
$insert = "UPDATE `users` SET `points` = (`points`-5) WHERE `username` = '".$username."' AND `points` >= 5"; 
```

然后按照上面的建议检查该行是否受到**[mysqli](http://php.net/manual/en/mysqli.affected-rows.php)**的影响。如果该行受到影响，则意味着用户有 5 分或更多分。

# javascript - 你如何像在 Ember.js 中一样在 javascript 中复制 function(){ ... }.property() 之类的东西？

> ID：13842977
> 
> 赞同：5
> 
> 时间：2012-12-12T15:26:03.770
> 
> 标签：javascript, ember.js

Ember 使用类似的东西：

```
val: function(){ 
    ...
}.property() 
```

和类似的东西：

```
func: function(){
}.observes('someValue') 
```

我认为您可以在函数末尾添加属性这一事实非常简洁，并且希望复制它。但是，我找不到源代码中实现这些东西的位置，想知道是否有人知道？

此外，更重要的是，这里到底发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T15:32:47.950

它是[`Function`s 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function#Function_instances)之一，就像`call`or一样`bind`。

您可以通过扩展本机`Function.prototype`对象来添加其他方法。不过，这是否是一种好的做法是可以[讨论](https://stackoverflow.com/q/10197174/1048572)的；也看看[这些](http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/) [文章](http://perfectionkills.com/extending-built-in-native-objects-evil-or-not/)。

# c - 任何人都可以帮助我解决分段错误

> ID：13842983
> 
> 赞同：-1
> 
> 时间：2012-12-12T15:26:13.973
> 
> 标签：c, steganography

我的解码器有问题，想知道是否有人可以帮助我？

基本上，我正在尝试为我的隐写编码器构建一个解码器，编码器在声音文件中每个字节的 LSB 上放置一些消息

解码器的工作是收集这些比特并从中创建一条新消息

该代码旨在执行以下操作：

> 代码：全选
> 
> *   转到消息数组位置。
>     
>     
> *   将 bitindex 设置为 0 直到 7 // (8 位到一个字节)
>     
>     
> *   转到声音阵列位置
>     
>     
> *   如果 soundbit 相等，则将 0 添加到新字节，否则将 1 添加到新字节的末尾
>     
>     
> *   执行一次左移
>     
>     
> *   递增位索引

通过使用各种`printf`'s，我可以告诉你它在崩溃前运行了大约 3/4 次。

希望有意义的实际循环如下所示：

```
 {

int mIndex, sIndex, bitIndex, mask;
char *message[9];

mask = 1;
mIndex = 0;

unsigned char *soundFile = LoadWavAudioFile("boomedit.wav");

int soundFileSize = GetSizeOfWavFile();

bitIndex = 0;

    for(mIndex = 0; mIndex < 8; mIndex++)//index for message
    {
        printf("1\n");
        for(sIndex = 0; sIndex < soundFileSize; sIndex++)//index for soundfile
        {
            printf("2\n");
            for(bitIndex = 0; bitIndex < 8;)
            {
                printf("3\n");
                int test;
                if((soundFile[sIndex] & mask) > 0)//is message bit > 0
                {                                   
                    printf("++++++++++++++++\n");
                    *message[mIndex] = (soundFile[sIndex] | 1);//adds a one to message byte
                    *message[mIndex] = *message[mIndex] <<1;    //shift bits 1 placce left
                    printf("*****************\n");

                }
                else
                { //no change the LSB to 0
                    printf("------------------\n");
                    *message[mIndex]= soundFile[sIndex] & 254; //adds a zero at end o
                    *message[mIndex] = *message[mIndex] <<1; //shifts bits 1 place to left
                    printf("******************\n");
                }

                bitIndex++;
            }   
        }
    }

printf("\n hiddden letters:%s\n", *message); //print message    
printf("\nalert 5\n");

} 
```

希望有帮助的任何事情都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:28:26.417

问题在这里：

```
char *message[9]; 
```

您已经创建了一个由 9 个指向字符的指针组成的数组，您没有为它们分配任何值或为它们分配任何内存。它们未初始化。

您现在要做的第一件事是尊重其中一个未初始化的指针：

```
*message[mIndex] = 
```

这样你就崩溃了。

* * *

编辑：

您可以通过以下方式将其初始化为所有`NULL`s：

```
char *message[9] = {0}; 
```

但是你仍然不能使用它，它不会只是在引用 NULL 指针时出现段错误。你必须为这些分配一些内存才能有用..例如你可以这样做：

```
message[0] = malloc(100); // I don't know how much you need for your strings
message[1] = malloc(100); // that's up to you, so I'm just arbitrally picking 100 bytes
message[2] = malloc(100); // here to illustrate the point.
message[3] = malloc(100);
message[4] = malloc(100);
message[5] = malloc(100);
message[6] = malloc(100);
message[7] = malloc(100);
message[8] = malloc(100); 
```

然后，您必须在完成后释放它们中的每一个。这是你想要的吗？一个字符串数组？

这一行：

```
printf("\n hiddden letters:%s\n", *message); //print message 
```

对我来说意味着你真的只追求一个字符串......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:40:25.790

在您发布的代码中，当您到达第一个语句时`sIndex`将等于。从这里看，您正在阅读数组末尾的. （假设数组的大小实际上是）`soundFileSize``if``soundFile``soundFileSize`

# github - 在 Github 上将 README 更改为 Readme.md

> ID：13842987
> 
> 赞同：2
> 
> 时间：2012-12-12T15:26:22.997
> 
> 标签：github

当我在 github 上创建一个项目时，我设置了一个 README 文件，该文件现在出现在项目页面上。我决定切换到 Readme.md 以便我可以添加一些格式，但 github 仍在显示原始 README 文件。我尝试删除 README 并同时删除 README 和 Readme.md，然后重新添加 Readme.md，但原始 README 仍在项目页面上。

[https://github.com/toxygene/pale](https://github.com/toxygene/pale)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:26:05.793

这可能是缓存问题，因为您的 GitHub 项目页面的源代码包括：

```
<!-- readme cache key: tree-readme:2188350:07c93010a313c998bb0d7c69f54b7d50525ca75e -->
<div id="readme" class="clearfix announce instapaper_body ">
  <span class="name"><span class="mini-icon mini-icon-readme"></span> README</span>
  <div class="plain"><pre># Pale

Pale is a simple PHP library that allows a developer to easily convert errors to exceptions without having to worry about the details of changing and restoring error handlers.

## Usage
```php
use Pale;
try {
    Pale\run(function() {
        trigger_error(&quot;this will become an exception&quot;);
    });
} catch(ErrorException $e) {
    var_dump($e);
}
```
</pre></div> 
```

“ `cache key: tree-readme:2188350:07c9301...`”表示该页面的内容可能会在接下来的几个小时内更新。

# triggers - Clearcase，如何在未提供评论时禁止签入

> ID：13842991
> 
> 赞同：1
> 
> 时间：2012-12-12T15:26:29.473
> 
> 标签：triggers, clearcase, checkin

我花了几个小时在互联网上寻找解决方案，以弄清楚当开发人员未提供评论时如何禁止签入操作。

我正在尝试编写一个 preop 签入触发器，该触发器在每次签入检查评论字段是否为空之前触发。

到目前为止，我只管理向用户显示消息，但我找不到中断签入操作的方法。

在此先感谢，任何帮助将不胜感激。

编辑：安装触发器的命令如下：

`mktrtype -element -all -preop checkin -exec <trigger_path> COMMENT_CONTROL`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:51:28.343

首先，不要试图把所有东西都塞进`mktrtype`命令中：你的触发器定义应该调用一个脚本（所有用户都可以访问），你可以在其中编写你想要的所有检查。

您可以在此[preop checkin 触发器](http://www.ibm.com/developerworks/rational/library/4311.html#N104A8)中看到一个脚本示例，如果不满足某些条件，该脚本必须显示一条停止消息。

它基于一个误差函数：

```
########################################################################
# SUBROUTINE ERROR
#
sub error {
    close(WORKFILE);
    unlink($workFile);
    my ($message) = @_;
    die ($message."\nUnable to continue checkin ...\n");
} 
```

在脚本中的任何位置，您都可以调用：

```
&error("$message"); 
```

这将在向用户显示错误消息时停止签入。

它是脚本的一部分，您可以使用以下命令将其声明为触发器：

```
cleartool mktrtype -c "RCS Keyword substitution in a source file" -element -all -preop checkin -eltype text_file -execwin "ccperl \\mw-ddiebolt\triggers\keyword_subst.perl" -execunix "Perl /net/titeuf/triggers/keyword_subst.perl" KEYWORD_SUBST 
```

* * *

如果这太复杂了，[这个其他脚本](http://www.ibm.com/developerworks/rational/library/4311.html#N103B8)会像这样使用`exit`：

```
sub checkUserName {
  my $user = shift(@_);

  my $currentUser = uc($ENV{CLEARCASE_USER});

 if ($user !~ m/^($currentUser)/) {
    `clearprompt proceed -mask proceed -type error -prompt \"Can't create label f
    exit 1;
  }
  exit 0;
} 
```

这应该与您的相同：

```
system("clearprompt proceed -mask proceed -type error -prompt \"$text\""); 
exit 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:33:37.890

根据您使用的语言，返回非零返回码（即`1`）应该可以解决问题。我已经多次多次编写 Perl 的这一行来使 ClearCase 触发器不允许操作继续进行。

```
exit 1; 
```

每次都工作。

# javascript - 如何将空间与 url 关联起来

> ID：13842993
> 
> 赞同：0
> 
> 时间：2012-12-12T15:26:33.337
> 
> 标签：javascript, jquery, variables

我使用代理来获取 Bing 搜索结果，基于一些输入的值。

```
 var query =  $('input').val();

    var url = 'http://www.bing.com/search?q=' + query + '';
...rest of code... 
```

它很好用，除非有多个单词用空格分隔，例如这不起作用：“cars for sale” 因为这里我们有 3 个单词，它们需要在 url 中用“+”或“分隔” %20" 所以实际的 url 看起来像这样：

```
http://www.bing.com/search?q=cars+for+sale+ 
```

那么，当涉及到输入值中的空格时，如何让 var url 进行区分呢？

ps 查询不一定非要在input中，也可以是某些div中的纯文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:29:12.000

使用[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent). 这是“我想将用户输入添加到 URI”问题的一般解决方案。

```
var url = 'http://www.bing.com/search?q=' + encodeURIComponent(query); 
```

这将处理您的特定问题以及诸如输入的包含`&`字符的数据之类的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:28:44.857

```
var url = 'http://www.bing.com/search?q=' + query.replace(' ','+') + ''; 
```

这适合你吗？你用“+”附加和替换空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:29:03.400

您是否考虑过仅用 a 替换空格`+`？

```
var query =  $('input').val();
var url = 'http://www.bing.com/search?q=' + query.replace(" ","+"); 
```

# jquery - jQuery 滑出 Facebook 类似框在 Chrome 和 Firefox 中看起来不同

> ID：13842997
> 
> 赞同：0
> 
> 时间：2012-12-12T15:26:48.770
> 
> 标签：jquery, facebook, internet-explorer, google-chrome, firefox

我正在尝试向网站添加 Facebook 滑出式框，并且该机制在 Chrome 中运行良好，但在 Firefox 和 IE 中，它不会一直缩回，也不会用背景颜色。谁能让我知道我错过了什么？

实时 URL 是： http: [//www.campyavneh.org/social-network-slider-test](http://www.campyavneh.org/social-network-slider-test)

这是一个 JS Fiddle，它似乎在两种浏览器中都运行良好，所以我不确定我在现场网站上搞砸了什么：http: [//jsfiddle.net/U9nw6/8/](http://jsfiddle.net/U9nw6/8/)这是必要的代码：

```
 <script>
jQuery(function($) {
    $(document).ready(function() {
        $('#panelHandle').hover(function() {
            $('#sidePanel').stop(true, false).animate({
                'left': '0px'
            }, 900);
        }, function() {
            jQuery.noConflict();
        });

        jQuery('#sidePanel').hover(function() {
            // Do nothing
        }, function() {

            jQuery.noConflict();
            jQuery('#sidePanel').animate({
                left: '-201px'
            }, 800);

        });
    });
});
</script>

    /* Slide out social networking */
    #sidePanel {
        width:292px;
        position:fixed;
        left:-292px;
        top:15%;
        height:590px;
    }
    #panelHandle {
        height:128px;
        width:40px;
        border-radius:0 5px 5px 0;
        float:left;
        cursor:pointer;
    }
    #panelContent {
        float:left;
        width:292px;
        height:590px;
        background-color:#EEEEEE;
    }
    #panelHandle img {
        left: 292px;
        position: relative;
        top: -590px;
    }

<div id="sidePanel">
        <div id="panelContent">
          <iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fcampyavneh&amp;width=292&amp;height=590&amp;show_faces=true&amp;colorscheme=light&amp;stream=true&amp;border_color&amp;header=true&amp;appId=132179142482" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:590px;" allowTransparency="true"></iframe>     
        </div>
    <div id="panelHandle"><img src="/sites/all/themes/yavneh/images/fb_logo_side.jpg" alt="Facebook"></div>
</div>​ 
```

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:42:38.223

对于背景问题，您需要在 div iframe 标签中添加一行，应该是这样的：

背景：#ccc

其中#ccc 可以是十六进制代码或您要填充的任何颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:32:56.590

将 iframe 更改为

```
<iframe src="http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fcampyavneh&amp;width=292&amp;height=590&amp;show_faces=true&amp;colorscheme=light&amp;stream=true&amp;border_color&amp;header=true&amp;appId=132179142482" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:590px;" allowTransparency="true"></iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-23T14:45:56.487

将#sidePanel 处理更新为：

```
jQuery('#sidePanel').hover(function() {
  jQuery.noConflict();
  jQuery('#sidePanel').animate({
    left: '-201px'
  }, 800);
 }); 
```

# asp.net-mvc - 需要架构建议 - 客户端云 - 硬件控制

> ID：13842998
> 
> 赞同：1
> 
> 时间：2012-12-12T15:26:55.120
> 
> 标签：asp.net-mvc, wcf, amazon-web-services, client-server, cloud

我们正在设计一个主要基于云的应用程序。该应用程序的几乎所有功能都将是 .NET MVC 4。

但是，有两个应用程序元素需要通过 USB 驱动两个特定的硬件。

我们将为 Mac 和 Windows 的这两种硬件设备创建必要的驱动程序。

问题是基于浏览器的应用程序需要与客户端上安装和运行的驱动程序通信。

这是一个多站点推出，因此服务器端需要与不同的客户端实时通信。

例如，让我们看一个假装场景来说明问题。

“基于云的安全系统，外部托管。需要与特定建筑物门上的磁力锁对话。”

驱动程序将在客户端 PC/Mac 上作为守护程序或服务运行。

我很高兴服务器上运行的后端应用程序与驱动程序*或*前端 Web 应用程序 (java/html) 与驱动程序通信（如果可能的话）之间进行通信。

它还需要跨浏览器和跨平台工作，因此 Flash、Silverlight 和 ActiveX 不适用（幸运的是！！）

什么是稳健、可扩展和高性能的解决方案？在浏览器上发出的请求与点击设备驱动程序的命令之间需要非常短的延迟时间。例如，在 Web 应用程序中发出命令然后需要 10 秒才能到达驱动程序是不可接受的。

所以我们需要某种可靠的客户端-服务器服务总线，可以快速跨云工作。

注意事项：我们正在考虑将 AWS 作为托管环境。AWS 是否具有此架构所需形状的客户端-服务器服务总线？如果我确实选择了亚马逊 AWS 路线，这会满足我的需要吗： http: [//aws.amazon.com/sns/](http://aws.amazon.com/sns/)？

另一个考虑因素：JavaScript 是否可以在客户端触发一些可以被守护程序/服务获取的东西？这将是一个非常简单的解决方案，因为几乎没有延迟。我知道有许多安全限制（出于显而易见的原因），所以我不知道 JavaScript 能够在客户端上做什么。它只需要向我正在运行的服务发送一个 XML 命令。

希望有人可以建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:03:52.253

Might this be a good use of something like RabbitMq? The web clients talk to RabbitMq, which talks to the appropriate on-site-clients?

I don't know about SNS but it looks like a similar thing to rabbit. If you're hosting on Amazon it's probably the way to go.

Having the web client talk to the driver client puts too much responsibility on the web client IMO. Let it just have to deal with talking to a message broker and let that deal with informing the subscribers.

Note: I'm no expert on this but as nobody wiser has posted I felt this was worth a post. Basically, I think your initial instinct (Amazon SNS) is right.