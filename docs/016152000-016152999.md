# StackOverflow 问答 16152000-16152999

# c# - ASP.NET C# GridView - 专注于行编辑

> ID：16152001
> 
> 赞同：0
> 
> 时间：2013-04-22T16:25:41.963
> 
> 标签：c#, asp.net, gridview

我有一个大型数据集绑定到一个 300 像素高度限制的 DIV 标记内的网格视图。当我选择一行并触发编辑功能时，页面将数据（根据需要）重新加载到 gridview 中，无论我向下滚动多远，都会将我带回顶部。

有没有一种理想的方式只使用 asp.net c# 来关注正在编辑的行。如果需要，我不介意这是否涉及在编辑模式下将行放置在网格顶部。

下面是 CountryGrid.aspx

```
<%@ Page Language="C#" MasterPageFile="~/MasterPageSimple.master" AutoEventWireup="true"
    CodeFile="CountryGrid.aspx.cs" EnableEventValidation="false" Inherits="CountryGrid"
    Title="JFA Admin Portal - OP49 Country Update" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">

        <asp:UpdatePanel ID="UpdatePanel1" runat="server">

            <ContentTemplate>
            <center>
            <div class="headlanding">
                           <asp:Label ID="lb_Welcome" runat="server" CssClass="labelLargeFont" Text="Label">OP49 - Country Update</asp:Label>
                        <br />
                        <br />
                        <br />
                            <asp:Label ID="Label4" runat="server" CssClass="labelLargeFont" >You are currently modifying: </asp:Label> 
                            <asp:Label ID="Country" runat="server" CssClass="labelLargeFont" />
                        <br />
                            <asp:Label ID="Label1" runat="server" CssClass="labelLargeFont" >For </asp:Label> 
                            <asp:Label ID="Season" runat="server" CssClass="labelLargeFont" />
                        <br />
                        <br />
                    </div>                                 
                    <br />
                    <div style="text-align: center">
                        <asp:Label ID="Error_Dashboard" runat="server" Font-Size="Small" ForeColor="#FF3300"></asp:Label>
                        <asp:Label ID="ErrorAccess" runat="server" Font-Size="Small" ForeColor="#FF3300"></asp:Label>

                </center>
                </div>    

                <asp:Panel ID="Panel1" runat="server" Font-Size="Large" CssClass="Grid_Panel" GroupingText="OP49 - Update Grid" Font-Bold="true">
                    <center>
                        <div style="max-height: 550px; overflow: auto;">
                        <asp:GridView ID="CountryGridView" DataKeyNames="i_SK_Accom" runat="server" Postback="False"
                            AutoGenerateColumns="False" CssClass="mGrid" RowStyle-CssClass="normal" Width="95%" 
                            OnRowEditing="CountryGridView_RowEditing" 
                            OnRowCancelingEdit="CountryGridView_RowCancelingEdit" 
                            OnRowUpdating="CountryGridView_RowUpdating" >
                            <Columns>
                                <asp:TemplateField HeaderText="Accom Code">
                                    <ItemTemplate>
                                        <asp:Label ID="lb_Accom_Code" runat="server" Text='<%# Bind("Accom_Code") %>' />
                                    </ItemTemplate>
                                    <EditItemTemplate>
                                        <asp:Label ID="lbl_Accom_Code" runat="server" Text='<%# Bind("Accom_Code") %>' />
                                    </EditItemTemplate>
                                    <HeaderStyle Width="80px" />
                                    <ItemStyle Width="80px" />
                                </asp:TemplateField>
                                <asp:TemplateField HeaderText="Accom Name">
                                    <ItemTemplate>
                                        <asp:Label ID="lb_Accom_Name" runat="server" Text='<%# Bind("Accom_Name") %>' />
                                    </ItemTemplate>
                                    <EditItemTemplate>
                                        <asp:Label ID="lbl_Accom_Name" runat="server" Text='<%# Bind("Accom_Name") %>' />
                                    </EditItemTemplate>
                                    <HeaderStyle Width="200px" />
                                    <ItemStyle Width="200px" />
                                </asp:TemplateField>
                                <asp:TemplateField HeaderText="OP49 Required?">
                                <EditItemTemplate>
                                    <asp:DropDownList ID="txt_OP49" runat="server" SelectedValue='<%# Bind("OP49_Required") %>' CssClass="DropBoxYN">
                                        <asp:ListItem Text="Yes" Value="Y"></asp:ListItem>
                                        <asp:ListItem Text="No" Value="N"></asp:ListItem>
                                    </asp:DropDownList>
                                </EditItemTemplate>
                                <ItemTemplate>
                                    <asp:Label ID="lb_OP49" runat="server" Text='<%# Bind("OP49_Required") %>' />
                                </ItemTemplate>
                                <HeaderStyle Width="100px" />
                                <ItemStyle Width="100px" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Weekly">
                                <EditItemTemplate>
                                    <asp:DropDownList ID="txt_Weekly" runat="server" SelectedValue='<%# Bind("Weekly") %>'  CssClass="DropBoxYN">
                                        <asp:ListItem Text="Yes" Value="Y"></asp:ListItem>
                                        <asp:ListItem Text="No" Value="N"></asp:ListItem>
                                    </asp:DropDownList>
                                </EditItemTemplate>
                                <ItemTemplate>
                                    <asp:Label ID="lb_Weekly" runat="server" Text='<%# Bind("Weekly") %>' />
                                </ItemTemplate>
                                <HeaderStyle Width="60px" />
                                <ItemStyle Width="60px" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Daily">
                                <EditItemTemplate>
                                    <asp:DropDownList ID="txt_Daily" runat="server" SelectedValue='<%# Bind("Daily") %>' CssClass="DropBoxYN">
                                        <asp:ListItem Text="Yes" Value="Y"></asp:ListItem>
                                        <asp:ListItem Text="No" Value="N"></asp:ListItem>
                                    </asp:DropDownList>
                                </EditItemTemplate>
                                <ItemTemplate>
                                    <asp:Label ID="lb_Daily" runat="server" Text='<%# Bind("Daily") %>' />
                                </ItemTemplate>
                                <HeaderStyle Width="60px" />
                                <ItemStyle Width="60px" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Actions" >
                                <ItemTemplate>
                                    <asp:ImageButton ID="bt_Edit" runat="server" CommandName="Edit" AlternateText="Edit" ImageUrl="~/Images/Edit.gif" CssClass="ImageButton" />
                                </ItemTemplate>
                                <EditItemTemplate>
                                        <asp:ImageButton ID="bt_Update" runat="server" CommandName="Update" AlternateText="Update" ImageUrl="~/Images/save.png" CssClass="ImageButton" />
                                        <asp:ImageButton ID="bt_Cancel" runat="server" CommandName="Cancel" AlternateText="Cancel" ImageUrl="~/Images/cancel.png" CssClass="ImageButton" />
                                </EditItemTemplate>
                                <HeaderStyle Width="60px" />
                                <ItemStyle Width="60px" Wrap="False" />
                            </asp:TemplateField>
                            </Columns>
                        </asp:GridView>
                        </div>
                        <br />
                            <asp:ImageButton ID="Home" runat="server" ImageUrl="~/Images/home.png" CssClass="ImageButtonLarge" AlternateText="Home" ToolTip="Home" OnClick="Click_Home" />
                    </center>
                </asp:Panel>        
        </ContentTemplate>
        </asp:UpdatePanel>
</asp:Content> 
```

页面背后的代码：

```
using System;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Data.SqlClient;
using System.Text;

public partial class CountryGrid : System.Web.UI.Page
{
    SnowballInterface conn = new SnowballInterface();
    SnowballInterface CurSeason = new SnowballInterface();

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Page_Init(object sender, EventArgs e)
    {
        if (Request["i_FK_CountryID"] == null)
        {
            Response.Redirect("Default.aspx");
        }

        #region Get Accom Data
        SqlCommand EditCOComm = new SqlCommand("IFACE_JFA_COUNTRY", conn.sbConn);
        EditCOComm.CommandType = CommandType.StoredProcedure;

        EditCOComm.Parameters.Add("@Statement", SqlDbType.Char).Value = "CountryDetails";
        EditCOComm.Parameters.Add("@i_FK_CountryID", SqlDbType.Int).Value = Request["i_FK_CountryID"].Trim().ToString();

        try
        {
            conn.sbConn.Open();
            SqlDataReader EditCOReader;
            EditCOReader = EditCOComm.ExecuteReader();
            // Download default values
            while (EditCOReader.Read())
            {
                Country.Text = Convert.ToString(EditCOReader["Country_Name"]).Trim();
                Season.Text = Convert.ToString(EditCOReader["Season_Name"]).Trim();
            }

            EditCOReader.Close();
        }
        catch (Exception)
        {
        }
        finally
        {
            conn.sbConn.Close();
        }
        #endregion

        if (!IsPostBack)
        {
            BindCountryGrid();
        }
    }

    protected void CountryGridView_RowEditing(object sender, GridViewEditEventArgs e)
    {
        //Set the edit index.
        CountryGridView.EditIndex = e.NewEditIndex;
        //Bind data to the GridView control.
        BindCountryGrid();            
    }

    protected void CountryGridView_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        //Reset the edit index.
        CountryGridView.EditIndex = -1;
        //Bind data to the GridView control.
        BindCountryGrid();
    }

    protected void CountryGridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        Label Textbox_Accom = (Label)CountryGridView.Rows[e.RowIndex].FindControl("lbl_Accom_Code");
        Label Textbox_Accom_Name = (Label)CountryGridView.Rows[e.RowIndex].FindControl("lbl_Accom_Name");
        DropDownList Textbox_OP49 = (DropDownList)CountryGridView.Rows[e.RowIndex].FindControl("txt_OP49");
        DropDownList Textbox_Weekly = (DropDownList)CountryGridView.Rows[e.RowIndex].FindControl("txt_Weekly");
        DropDownList Textbox_Daily = (DropDownList)CountryGridView.Rows[e.RowIndex].FindControl("txt_Daily");

        SqlCommand commEditConsultant = new SqlCommand("IFACE_JFA_ACCOM", conn.sbConn);
        commEditConsultant.CommandType = CommandType.StoredProcedure;

            commEditConsultant.Parameters.Add("@Statement", SqlDbType.VarChar).Value = "AccomGridUpdate";
            commEditConsultant.Parameters.Add("@Page", SqlDbType.VarChar).Value = "OP49";
            commEditConsultant.Parameters.Add("@PC_Username", SqlDbType.VarChar).Value = HttpContext.Current.User.Identity.Name.ToUpper().ToString();
            commEditConsultant.Parameters.Add("@Season_Name", SqlDbType.VarChar).Value = Season.Text;
            commEditConsultant.Parameters.Add("@Accom_Code", SqlDbType.VarChar).Value = Textbox_Accom.Text;
            commEditConsultant.Parameters.Add("@i_FK_SeasonID", SqlDbType.VarChar).Value = Request["i_FK_SeasonID"].Trim().ToString();
            commEditConsultant.Parameters.Add("@OP49_Required", SqlDbType.VarChar).Value = Textbox_OP49.Text;
            commEditConsultant.Parameters.Add("@Weekly", SqlDbType.VarChar).Value = Textbox_Weekly.Text;
            commEditConsultant.Parameters.Add("@Daily", SqlDbType.VarChar).Value = Textbox_Daily.Text;

            conn.sbConn.Open();
                commEditConsultant.ExecuteNonQuery();
                CountryGridView.EditIndex = -1;
                Error_Dashboard.Text = Textbox_Accom.Text + " - " + Textbox_Accom_Name.Text + " Updated Successfully!";
            conn.sbConn.Close();    
                BindCountryGrid();

    }

    private void BindCountryGrid()
    {
        SqlCommand CountryGridSelect = new SqlCommand("IFACE_JFA_ACCOM", conn.sbConn);
        CountryGridSelect.CommandType = CommandType.StoredProcedure;
        CountryGridSelect.Parameters.Add("@Statement", SqlDbType.VarChar).Value = "CountryGridSelect";
        CountryGridSelect.Parameters.Add("@i_FK_CountryID", SqlDbType.VarChar).Value = Request["i_FK_CountryID"].Trim().ToString();

        try
        {
            conn.sbConn.Open();
            SqlDataReader CountryGridSelectReader;
            CountryGridSelectReader = CountryGridSelect.ExecuteReader();
            CountryGridView.DataSource = CountryGridSelectReader;
            CountryGridView.DataBind();
            CountryGridSelectReader.Close();
        }
        finally
        {
            conn.sbConn.Close();
        }
    }

    protected void Click_Home(object sender, EventArgs e)
    {
        Response.Redirect("Default.aspx?i_FK_SeasonID=" + Request["i_FK_SeasonID"].Trim().ToString());
    }    

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:03:41.843

您可以 在您的 aspx 页面上的页面指令中将**MaintanScrollPositionOnPostback设置为 true。**

```
<%@ Page Language="C#" AutoEventWireup="true" MaintainScrollPositionOnPostback="true" CodeBehind="Gridview.aspx.cs" Inherits="TestWebsite.Gridview" %> 
```

# jquery - 如何将 Kendo 过滤器对象发送到控制器操作

> ID：16152004
> 
> 赞同：0
> 
> 时间：2013-04-22T16:25:47.937
> 
> 标签：jquery, asp.net, asp.net-mvc, kendo-ui, kendo-grid

如何在 ASP.NET MVC 中将 Kendo 网格过滤器发送到操作？

我正在使用这种结构并且它正在工作，但我无法在控制器中获得发送值。实际中的参数“模型”为空。

```
 $('#btn-print').click(function () {
        filter = $('#trips').data('kendoGrid').dataSource.filter();
        $.ajax({
            type: 'post',
            url: '@Url.Action("Print", "Trips")',
            //dataType: 'json',
            data: filter,
            success: function (d) {
                var win = window.open('about:blank');
                with (win.document) {
                    open();
                    write(d);
                    close();
                }
                //alert('print click.');
            }
        })
    }); 
```

ASP.NET 操作

```
 [HttpPost]
    public ActionResult Print(object model)
    {
        var r = Request;
        return View();
    } 
```

谢谢你。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:38:00.040

你的方法让我有点吃惊。为什么不直接创建

```
var customDS = new kendo.data.dataSource(  
    transport: 
    {
      read: 
      {
        url: '@Url.Action("Print","Trips")',
        dataType: 'aspnetmvc-ajax'
      }
    },
  requestEnd: function (d) {
                var win = window.open('about:blank');
                with (win.document) {
                    open();
                    write(d);
                    close();
                }
});) 
```

并简单地复制过滤器？

```
if ($('#trips').data('kendoGrid').dataSource.filter())
{
   // if no filters are applied .filter() might return undefined, so to prevent
   // errors lets check if any filters are applied
   var filters = $('#trips').data('kendoGrid').dataSource.filter().filters;
   customDS.filter(filters);
} 
```

然后继续进行旅行网格。请注意，dataType 不是 json。

但是，如果您绝对必须在不使用 dataSource 和 as json 的情况下这样做，那么它会变得更加困难。`dataSource.filter()` 返回由“过滤器”数组和“逻辑”组成的对象。过滤器中的每个元素都是由“字段”、“值”和“运算符”组成的对象。目前，您的参数“模型”为空仅仅是因为您没有发送任何由名称“模型”定义的内容。实际上，您的数据如下所示：

```
data: { filters: [somearray], logic: 'somelogic' } 
```

如果你想将它作为 json 传递，你在控制器中的参数应该反映你真正发送的内容（或者你可以绑定前缀），以便反序列化可以发挥它的魔力。所以它要么

```
data: {model : filter} 
```

或者

```
 public ActionResult Print(Filters filters, string logic) 
```

其中 Filters 是一个有 3 个字段的类，与客户端`dataSource.filter().filters`数组相同。并且因为其中一个字段是 'operator'，它是 AFAIR C# 受限关键字，所以您还必须将所有数据从 'filters' 移动到一些 'temporaryFilters: {field:'', value:'', _operator: ''}。这是太多的工作，所以放弃那个解决方案并使用数据源之一:)

# functional-programming - OCaml 中的“字符串”是否支持 UTF-8？

> ID：16152005
> 
> 赞同：16
> 
> 时间：2013-04-22T16:25:48.523
> 
> 标签：functional-programming, ocaml

OCaml中的类型是否`string`支持`utf8`？

或者我应该为 utf8 字符串使用什么库？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T16:31:59.470

OCaml的`string`类型本质上由一系列 8 位字节组成。您可以将 UTF-8 值存储在字符串中，我经常这样做。但是，没有内置支持来处理它们。在 OCaml 中处理 Unicode 的一个很好的库（我听说过）是[Camomile](http://camomile.sourceforge.net)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T17:11:17.087

如果您只是在寻找 unicode 转换，还有[Uutf 。](http://erratique.ch/software/uutf/doc/Uutf)

# optimization - 使用布尔值评估表达式的准确性问题

> ID：16152016
> 
> 赞同：0
> 
> 时间：2013-04-22T16:26:35.630
> 
> 标签：optimization, cuda, kernel, boolean

我试图在我的代码中删除一些 if 语句，以使其更适合在 Cuda 内核中使用。if-else 语句具有以下格式：

```
if(boolean 1) {
  double1 = expression1;
}
else if(boolean 2) {
  double1 = expression2;
}
else {
  double1 = expression3;
} 
```

我删除 if 语句的尝试如下所示：

```
double1 = (boolean1) * expression1 + 
          (!boolean1 && boolean2) * expression2 +
          !(boolean1 && boolean2) * expression3; 
```

转换为 no-if-statement 形式显然工作得很好，即我得到的答案在球场上。但是，有细微的差别。这是针对将在相同内核上迭代数千次以计算质点位移的程序。为了进行测试，我仅在 50 个时间步之后比较了 if 语句和 no-if 语句，这就是区别：

```
if statements:    -2.2900031243(9010440)e-004
no if statements: -2.2900031243(8959510)e-004 
```

我已经单步执行了代码并分别评估了表达式并发现它们匹配，只有在与布尔表达式结合时我才看到问题。我尝试将布尔表达式转换为双打，但得到了相同的答案。有没有人知道是否有办法解决这个问题？我的目标是加速，所以使用 if 语句是最后的手段。上面的两个数字都来自我用来比较代码的两个不同的 CPU 实现。这不是 GPU 和 CPU 计算之间的区别。我很感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:04:44.127

你翻译错了，

```
double1 = (boolean1) * expression1 + 
          (!boolean1 && boolean2) * expression2 +
          !(boolean1 && boolean2) * expression3; 
```

`expression3`每当`boolean1`和中的任何一个`boolean2`为假时添加，但是

```
if(boolean 1) {
  double1 = expression1;
}
else if(boolean 2) {
  double1 = expression2;
}
else {
  double1 = expression3;
} 
```

`expression3`仅当*两者都*`boolean1`为假`boolean2`时才使用。

正确的翻译将使用

```
+ !(boolean1 || boolean2) * expression3 
```

# java - 速度资源路径问题

> ID：16152017
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:26:41.347
> 
> 标签：java, spring, spring-mvc, velocity

所以，这就是交易。

我正在使用**Spring Framework**开发约会应用程序。

我的**localhost**一切**都很好**，**即使是电子邮件发送部分**。

 ****但是当我将项目传递给我的**weblogic**时， **resource.loader.path**属性似乎没有加载。

这是我的代码的重要部分：

```
Properties prop = new Properties();
prop.setProperty("resource.loader", "class");
prop.setProperty("class.resource.loader.class", "org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader");
prop.setProperty("class.resource.loader.path", "../jsp/email-templates");

VelocityEngine.init(prop);
Template template = VelocityEngine.getTemplate("user-response.jsp"); 
```

正如我所说，只是我的代码的重要部分。基本上是这样配置的，带有一个**属性对象**和加载**user-response.jsp的****VelocityEngine.getTemplate()****文件夹内**

 **正如我所说，在我的本地主机中，他工作正常，但在 weblogic 中显示为：

```
org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource '..nulluser-response.jsp' 
```

出于某种原因，**class.resource.loader.path**属性未在**weblogic中加载**中。

所以...有人已经经历过这个问题？有什么问题的任何想法？

**Obs.：两个项目*（localhost和weblogic）*是一样的，使用的是版本控制软件*（bazaar）***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:28:34.950

我建议将其设置为相对于 CLASSPATH。如果您将 /email-templates 文件夹放在 WEB-INF/classes 下并将加载路径设置为“email-templates”，它应该可以工作。******

# android - Android ProgressDialog 未显示

> ID：16152019
> 
> 赞同：2
> 
> 时间：2013-04-22T16:26:42.903
> 
> 标签：android, button, android-activity, progressdialog

这是我连接到对话框的代码部分。他们按下按钮后，它应该显示出来，显示后，它应该处理数据，完成后，它应该隐藏起来。但它甚至没有出现？

```
ProgressDialog dialog = new ProgressDialog(this);
dialog.setMessage("Prosimo počakajte da naloži podatke.");
dialog.setIndeterminate(false);
dialog.setCancelable(false);
dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);

private Button.OnClickListener listener = new Button.OnClickListener() {
    public void onClick(View v){
        if(selectedClass >= 0){
            dialog.show();

            ... data processing ...

            Intent firstUpdate = new Intent(context, ConfigurationActivity.class);
            firstUpdate.setAction("android.appwidget.action.APPWIDGET_ENABLED");
            firstUpdate.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widget_id);
            context.sendBroadcast(firstUpdate);

            dialog.dismiss();
            setResult(RESULT_OK, firstUpdate); 
            finish(); 
        } else {
            Log.i("Schedule", "Missing selections");
        }
    }
}; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:59:00.447

多亏了“ Pragnani”，我才得以成功。这是最终代码：

```
private class ProgressTask extends AsyncTask<String, Void, Boolean> 
{
    private ProgressDialog dialog;
    private ConfigurationActivity activity;

    public ProgressTask(ConfigurationActivity activity) 
    {
        this.activity = activity;
        context = activity;
        dialog = new ProgressDialog(context);
    }

    private Context context;

    protected void onPreExecute() 
    {
        dialog = new ProgressDialog(context);
        dialog.setMessage("Prosimo počakajte da naloži podatke.");
        dialog.setIndeterminate(false);
        dialog.setCancelable(false);
        dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        dialog.show();
    }

    @Override
    protected void onPostExecute(final Boolean success) 
    {
        if (dialog.isShowing()) 
                    {
            dialog.dismiss();
        }
        if (success) 
                    {
            Toast.makeText(context, "OK", Toast.LENGTH_LONG).show();
        } 
                    else 
                    {
            Toast.makeText(context, "ERROR", Toast.LENGTH_LONG).show();
        }
    }

    @Override
    protected Boolean doInBackground(final String... args) 
    {
        try {    
            ... processing ...

            return true;
        } catch (Exception e){
            Log.e("Schedule", "UpdateSchedule failed", e);
            return false;
        }
    }

} 
```

调用类：

```
new ProgressTask(ConfigurationActivity.this).execute(); 
```

谢谢普拉尼亚尼！

# c# - 多个等待场景中的 HTTPContext

> ID：16152023
> 
> 赞同：3
> 
> 时间：2013-04-22T16:27:06.160
> 
> 标签：c#, asp.net-mvc-4, asynchronous, c#-5.0

我正在编写一些 MVC4 异步控制器代码，并且遇到了一个问题，即我异步调用了两个长时间运行的 Web 服务，而第二个调用似乎在错误的线程上。

这是代码片段：

```
public async Task<ActionResult> AmendDetails(Model model) 
{
    ClientMaintenanceClient clientService = new ClientMaintenanceClient();
    UpdateResponse clientResponse = await clientService.GetForUpdateAsync(clientService.CreateRequest(model.Id));

    StaticDataEnquiryClient staticService = new StaticDataEnquiryClient();
    DataResponse staticResponse = await staticService.GetPayMethodsAsync(staticService.CreateRequest());

    ...
} 
```

本质上，对 CreateRequest() 的调用将从 HttpContext 中查找会话 id，并创建一个形成的 WCF 请求对象，用于调用服务。

然而，在执行时，第一次调用发生得很好，但是第二次异步调用失败，因为 HttpContext 为空，这会让我相信我现在在不同的线程上。

当我在 MVC3 和 .Net4.5 之前执行此操作时，我必须在通过 AsyncManager（使用 EAP）从 Async 调用返回时手动同步线程，但我认为我不再需要使用 TAP 来执行此操作。

如果我使用下面的代码片段并行执行代码，问题就会消失。

```
public async Task<ActionResult> AmendDetails(Model model) 
{
    ClientMaintenanceClient clientService = new ClientMaintenanceClient();
    var clientTask = clientService.GetForUpdateAsync(clientService.CreateRequest(model.Id));

    StaticDataEnquiryClient staticService = new StaticDataEnquiryClient();
    var staticTask = staticService.GetPayMethodsAsync(staticService.CreateRequest());

    await Task.WhenAll(clientTask,staticTask); 
    UpdateResponse clientResponse = await clientTask;
    DataResponse staticResponse = await StaticTask;
    ...
} 
```

*   我假设在第一个片段中，第一个等待将进程移动到后台线程，因此当我到达第二个等待时，我仍然在后台线程上。HttpContext 将为空，因为我无法从该线程中获取它。

*   我还假设在第二段代码中，我在第一次等待之前进行了所有 HTTPContext 查找，所以我从来没有看到 HTTPContext 为空，因为我从来没有从后台线程调用它。

谁能证实我上面的假设？我不想在我的代码中查看一个明显的错误，它稍后会回来咬我！

**更新：**

我决定在这里执行期间检查线程，看来第二次等待确实发生在与第一次等待不同的线程上。有趣的是，似乎*HttpContext*在第二次调用时不为空。*HttpContext.Current*为空。

我通过以下方式访问会话 ID：

```
HttpContext.Current.Session.SessionId 
```

我猜我需要在第二次等待之前在某个地方同步一些东西，但我不确定是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:57:20.787

您的代码绝对*应该可以*工作。既然您提到了 MVC 3，我假设这是一个升级项目。在这种情况下，请确保您的 web.config 中有以下内容：

```
<appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
</appSettings> 
```

# google-cloud-storage - 谷歌云存储 - JAVA REST API - 获取 SignatureDoesNotMatch

> ID：16152027
> 
> 赞同：1
> 
> 时间：2013-04-22T16:27:25.857
> 
> 标签：google-cloud-storage

我正在使用 jersey-client 进行 REST Call 。我收到 SignatureDoesNotMatch 错误作为响应。我试图使用 GET Service 列出 Bucket 名称，还尝试使用 GET Bucket 方法列出 Bucket 对象。这是我的示例代码。

任何提示或解决方案？

```
public class restSample {

    private static final String HMAC_SHA1_ALGORITHM = "HmacSHA1";
    private static final String PROJECT_ID = "10XXXXXXXX478";

    public static String Base64Encoding()
            throws java.security.SignatureException, UnsupportedEncodingException {

          String access_id = "GOOGBAXXXXXXXXXXBI";
          String secret_key = URLEncoder.encode("pWTXXXXXXXXXXXXXXXRo85T+XXXXXXXXX3O","UTF-8");
          String bucket = "bucket_name";

          String version_header = "x-goog-api-version:1";
          String project_header = "x-goog-project-id:"+PROJECT_ID;
          String canonicalizedResources = "/"+bucket+"/";

          Calendar calendar = Calendar.getInstance();
          calendar.add(Calendar.MINUTE, 30);
          long expiration = calendar.getTimeInMillis();

         String stringToSign = URLEncoder.encode("GET\n\n\n"+expiration+"\n"+version_header+"\n"+project_header+"\n"+canonicalizedResources,"UTF-8");
         //String stringToSign = URLEncoder.encode("GET\n\n\n"+getdate()+"\n"+version_header+"\n"+project_header+"\n"+canonicalizedResources,"UTF-8");
         String authSignature="";
        try {

            SecretKeySpec signingKey = new SecretKeySpec(secret_key.getBytes(),HMAC_SHA1_ALGORITHM);

            Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM);
            mac.init(signingKey);

            // compute the hmac on input data bytes
            byte[] rawHmac = mac.doFinal(stringToSign.getBytes("UTF-8"));

            // base64-encode the hmac
            authSignature = new String(Base64.encode(rawHmac));

        } catch (Exception e) {
            throw new SignatureException("Failed to generate HMAC : " + e.getMessage());
        }
        authSignature = (access_id +":"+ authSignature);
        return  authSignature;
    }

    public static void main(String[] args) {

        ClientConfig config = new DefaultClientConfig();
        Client client = Client.create(config);

        String authSignature = null;
        try {
            authSignature = "GOOG1 "+ Base64Encoding();
        } catch (SignatureException e) {
            e.printStackTrace();
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }

        WebResource service = client.resource(getBaseURI());
        ClientResponse response = service.accept(MediaType.APPLICATION_XML)
                .header("Authorization",authSignature)
                .header("Date", getdate())
                .header("Content-Length", "0")
                .header("x-goog-api-version", "1")
                .header("x-goog-project-id", PROJECT_ID)
                .get(ClientResponse.class);

        System.out.println(response.getClientResponseStatus().getFamily());
        System.out.println("response1 :: " + response.getEntity(String.class));

    }

    private static URI getBaseURI() {
        String url = "https://bucket_name.storage.googleapis.com";
        return UriBuilder.fromUri(url).build();
    }
    private static String getdate(){
        SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z ", new Locale("US"));
         Calendar cal = Calendar.getInstance(new SimpleTimeZone(0, "GMT"));

         format.setCalendar(cal);
         return format.format(new Date());
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T22:55:11.353

确保您要签名的字符串与要签名的预期字符串匹配。如果身份验证失败，Google 云存储将返回预期的字符串以登录 HTTP 响应。

在您的特定示例中，您似乎正在将`version_header`and添加`project_header`到要签名的字符串中。这些不在`CanonicalHeaders`nor列表中`CanonicalExtensionHeaders`，因此您正在签署与服务器不同的字符串。

您可以在此处查看列表：[https ://developers.google.com/storage/docs/reference/v1/developer-guidev1#authentication](https://developers.google.com/storage/docs/reference/v1/developer-guidev1#authentication)

# sql - PostgreSQL 非标准选择（子分组）

> ID：16152029
> 
> 赞同：2
> 
> 时间：2013-04-22T16:27:32.373
> 
> 标签：sql, postgresql

我有一些记录：

```
+---+--------+---------------+
| | 数据 | 时间 |
+---+--------+---------------+
| 1 | 1 | 2013-04-22 16:18:07 |
| 2 | 1 | 2013-04-22 16:18:17 |
| 3 | 2 | 2013-04-22 16:18:27 |
| 4 | 2 | 2013-04-22 16:18:37 |
| 5 | 1 | 2013-04-22 16:18:47 |
| 6 | 1 | 2013-04-22 16:18:57 |
| 7 | 1 | 2013-04-22 16:19:07 |
| 8 | 3 | 2013-04-22 16:19:17 |
| 9 | 3 | 2013-04-22 16:19:27 |
| 10| 1 | 2013-04-22 16:19:37 |
| 11| 2 | 2013-04-22 16:19:47 |
| 12| 2 | 2013-04-22 16:19:57 |
| 13| 3 | 2013-04-22 16:20:07 |
| 14| 3 | 2013-04-22 16:20:17 |
+---+--------+---------------+

```

我怎样才能得到这些记录？：

```
+---+--------+---------------+
| | 数据 | 时间 |
+---+--------+---------------+
| 1 | 1 | 2013-04-22 16:18:07 |
| 3 | 2 | 2013-04-22 16:18:27 |
| 5 | 1 | 2013-04-22 16:18:47 |
| 8 | 3 | 2013-04-22 16:19:17 |
| 10| 1 | 2013-04-22 16:19:37 |
| 11| 2 | 2013-04-22 16:19:47 |
| 13| 3 | 2013-04-22 16:20:07 |
+---+--------+---------------+
```

我想为每个子组选择第一个条目，但如果我使用 distinct - 我有这个记录数组：

```
+---+--------+---------------+
| | 数据 | 时间 |
+---+--------+---------------+
| 1 | 1 | 2013-04-22 16:18:07 |
| 3 | 2 | 2013-04-22 16:18:27 |
| 8 | 3 | 2013-04-22 16:19:17 |
+---+--------+---------------+
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:43:10.837

这里的问题是您需要定义您正在查看的组。不同组的“数据”值重复。

这是查找每个组的方法。为每一行分配一个按时间排序的顺序值。然后，为每个数据值分配另一个按时间排序的顺序值。当这些值是连续的时，这些值之间的差异是恒定的。

以下将这个想法用于您的数据。确定组后，此方法用于`group by`获取数据：

```
select MIN(data) as data, MIN(time) as time
from (select t.*,
             (ROW_NUMBER() over (order by time) -
              ROW_NUMBER() over (partition by data order by time
             ) as thegroup
      from t
     ) t
group by thegroup 
```

如果您要保留更多列，则可以枚举每个组中的行以获取第一个：

```
select data, time
from (select t.*, ROW_NUMBER() over (partition by thegroup order by time) as seqnum
      from (select t.*,
                   (ROW_NUMBER() over (order by time) -
                    ROW_NUMBER() over (partition by data order by time
                   ) as thegroup
            from t
           ) t
      group by thegroup
     ) t
where seqnum = 1 
```

你也可以使用 Postgres 的`distinct on`语法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:38:33.413

这是一个更简单高效的版本

```
SELECT 
  *
FROM 
  (
    SELECT 
      id, 
      data, 
      time, 
      lag( id, 1 ) over( partition by data ORDER BY id ) as prev_id
    FROM t 
  ) t
WHERE 
  prev_id is null 
  OR id - prev_id > 1
ORDER BY
  id 
```

由于您需要`first row`从每个组中获取，我使用 PostgreSQL 窗口函数[**lag()**](http://www.postgresql.org/docs/8.4/static/functions-window.html)来生成一个名为`prev_id`如下所示的列（下表仅适用于`records`数据所在的那些，也为其他值`1`创建了一个类似的表）`data`

```
+---+----------+
| id | prev_id | 
+---+----------+
| 1  | NULL    |  This row is valid as lag is NULL
| 2  | 1       | 
| 3  | 2       | 
| 5  | 3       |  This row is valid as diff is > 1 (between prevoius_id and current_id )
| 6  | 5       | 
| 7  | 6       |  
| 10 | 7       |  This row is valid as diff is > 1 (between prevoius_id and current_id ) 
```

在上述两种情况中的任何一种情况下，当`lag is NULL`OR`id-lag > 1`是`true`我认为该行`start row`适用于每个`group`

[**SQLFIDDLE**](http://sqlfiddle.com/#!12/bdc43/27)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:31:47.150

使用按数据和时间分组而不是不同的

“按数据分组”将按数据字段对行进行分组，但如果您输入“和时间”，它也会按时间对数据组进行分组

# javascript - 在 jQuery 中更改子项不会保留在父项中

> ID：16152030
> 
> 赞同：0
> 
> 时间：2013-04-22T16:27:34.040
> 
> 标签：javascript, jquery

我有以下代码：

```
var data = "<div><p class='a'>Text</p></div>";
$(data).find(".a").each(function(){
    $(this).addClass("b");
})

console.log(data);   //will output: <div><p class='a'>Text</p></div> 
                     //instead of <div><p class='a b'>Text</p></div> 
```

我正在迭代一个 jQuery 对象`$(data)`，并且正在更改 child 的类`<p />`。但是，当我在更改后输出数据时，类`.b`就消失了。

为什么会这样，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:30:08.607

您需要存储 DOM 元素创建的结果。字符串本身永远不会被修改。

```
var data = "<div><p class='a'>Text</p></div>";

// Create the elements from the markup
var elems = $(data);

// Modify the elements
elems.find(".a").each(function(){
    $(this).addClass("b");
});

// Append the elements to the DOM
elems.appendTo("body"); 
```

* * *

您实际上可以将代码缩短为：

```
$(data).appendTo("body").find(".a").addClass("b"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:44:05.360

在你的情况下`var data`是一个字符串。

但是当您将`$(data)`其转换为 jQuery 对象并存储在内存中时。新类 b 被添加到 jQuery 对象而不是字符串`data`

你可以试试这样的

```
var data = "<div><p class='a'>Text</p></div>";

var $data = ""; // to store the jquery object

$data = $(data); // converts string to jQuery object

$data.find(".a").each(function(){
   $(this).addClass("b");   
})

console.log($data.get(0).outerHTML); //<div><p class='a b'>Text</p></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:31:20.523

原因是，您没有修改字符串`data`

当你说它`$(data)`从字符串创建一个 dom 结构并且 dom 在之后被操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:31:22.287

我认为你需要做这样的事情：

```
var data = "<div><p class='a'>Text</p></div>";
$(data).find('.a').each(function(){
    $(this).addClass("b");
}).appendTo('body'); //replace body with the target container 
```

# ruby-on-rails - 渴望加载不同的嵌套多态

> ID：16152031
> 
> 赞同：3
> 
> 时间：2013-04-22T16:27:35.563
> 
> 标签：ruby-on-rails

使用 Rails 3.2。我的模型以这样的方式嵌套：

*   评论 => 可评论（国家或商店）
*   国家 => CountryDay => 商店 => 照片
*   商店 => 照片

我有以下内容：

```
@reviews = @user.reviews.includes(:user, :reviewable) 
```

通常我们可以通过这样的方式包含嵌套多态：

```
# this will return errors because :shop is not found in the model Shop (:reviewable is actually :shop)
@reviews = @user.reviews.includes(:user, :reviewable => [:shop])

# this will return errors because :photos is not directly associated to Country
@reviews = @user.reviews.includes(:user, :reviewable => :photos) 
```

还有许多其他变体。如何解决它以使 ActiveRecord 包含基于其关联的正确模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T19:59:01.330

我想我刚才也遇到了同样的问题。我`ActiveRecord::EagerLoadPolymorphicError`在尝试加载关联时遇到了问题。我的解决方案是将自定义连接语句放在一起，我已将其放入范围中以便于使用。

未经测试，但这可能会让你继续：

```
class Review < ActiveRecord::Base
  scope :eagerly_loaded, -> {
    joins('
      INNER JOIN shops 
      ON (reviews.reviewable_type = "Shop" AND reviews.reviewable_id = shops.id)
      INNER JOIN countries 
      ON (reviews.reviewable_type = "Country" reviews.reviewable_id = countries.id)
    ')
  }
end 
```

然后你使用`@user.reviews.eagerly_loaded`. 确保使用匹配的`.group()`-statement 只获取您需要的那些。

# c - Mpi_recv 在等待从进程发送的消息时挂起

> ID：16152032
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:27:35.617
> 
> 标签：c, mpi, matrix-multiplication, openmpi

所以我正在尝试为自己编写一个使用 MPI（OpenMPI 实现）的矩阵乘法。问题是，尽管通过 MPI_Send/MPI_Recv 从主进程向从属发送矩阵的一部分工作正常，但主进程中的 MPI_Recv 应该从从属接收答案（由 //!!! 注释标记）无限等待，从未收到任何答案.

但是，我可以看到从属进程正在发送答案（第 167 行中的 debugMessage）。

为了使问题更清楚，可以在此处找到代码：http: [//pastebin.com/ZY9jQXDD](http://pastebin.com/ZY9jQXDD)

所以，有人知道问题出在哪里，可以请帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:34:50.957

您的问题就像标签值不匹配一样简单。主进程需要标签值为 的消息`0`：

```
MPI_Recv(&ans, sizeof(answer),MPI_BYTE,MPI_ANY_SOURCE,0,
         MPI_COMM_WORLD,MPI_STATUS_IGNORE );          |
// ------------------- tag = 0 -----------------------+ 
```

当工作进程发送带有标签的消息时`RESULT`，它恰好被定义为`1`. `MPI_ANY_TAG`如果工作人员可以发送带有各种标签的消息，请在 master 的接收呼叫中放置适当的标签或使用。

无偿建议：发送结构使用`MPI_BYTE`非常反 MPI 和非常不便携的风格。构造一个派生的数据类型，`MPI_Type_create_struct`以便以可移植的方式发送结构。

# jquery - jquery ui滑块-试图禁用单个句柄

> ID：16152033
> 
> 赞同：5
> 
> 时间：2013-04-22T16:27:37.940
> 
> 标签：jquery, jquery-ui

我有一个 ui 范围滑块。我更改了脚本以添加额外的范围和句柄。我正在尝试禁用其中一个句柄（以显示始终将成为计算一部分的整体的一部分，因此不应更改，但需要是可见的部分）。

我在幻灯片中尝试过： if ( ui.value == ui.values[3] && ui.value > 98) { off();

```
 }
           if ( ui.value == ui.values[3] && ui.value < 98 ) {
         off();
    } 
```

同时使用 off() 和 return false，然后句柄本身被冻结，但它仍在计算值，就好像它正在被移动一样。

因此，我尝试禁用-我尝试过： `$('A.ui-slider-handle').eq(2).draggable(false); //this somehow lets me drag it all over the page` 并且

`$('A.ui-slider-handle').eq(2).attr('disabled', 'disabled');`和 `$('A.ui-slider-handle').eq(2).prop('disabled');`

但这些也不起作用。有什么建议么？我对此很陌生并且迷路了。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-17T18:25:35.013

据我所知，jQuery UI 滑块小部件无法禁用单个句柄。但是，如果您不介意扩展 jQuery UI 滑块小部件，则可以添加此功能。

在下面的代码中，我扩展了`_mouseCapture`jQuery UI 滑块小部件中的功能，以防止鼠标移动/选择具有`ui-slider-handle-disabled`该类的句柄。它有点大，因为我必须复制现有`_mouseCapture`函数并添加几行。我用评论标记了我的插入。

您可以[在 jsfiddle 上](http://jsfiddle.net/finLprtoTyp/856kv/ "jsfiddle")测试此代码。

```
// extend jQuery UI slider widget's _mouseCapture function to allow disabling handles
// _mouseCapture function copied from jQuery UI v1.10.3
$.widget("ui.slider", $.ui.slider, {
    _mouseCapture: function (event) {
        var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,
        that = this,
            o = this.options;

        if (o.disabled) {
            return false;
        }

        this.elementSize = {
            width: this.element.outerWidth(),
            height: this.element.outerHeight()
        };
        this.elementOffset = this.element.offset();

        position = {
            x: event.pageX,
            y: event.pageY
        };
        normValue = this._normValueFromMouse(position);
        distance = this._valueMax() - this._valueMin() + 1;
        this.handles.each(function (i) {
            // Added condition to skip closestHandle test if this handle is disabled.
            // This prevents disabled handles from being moved or selected with the mouse.
            if (!$(this).hasClass("ui-slider-handle-disabled")) {
                var thisDistance = Math.abs(normValue - that.values(i));
                if ((distance > thisDistance) || (distance === thisDistance && (i === that._lastChangedValue || that.values(i) === o.min))) {
                    distance = thisDistance;
                    closestHandle = $(this);
                    index = i;
                }
            }
        });

        // Added check to exit gracefully if, for some reason, all handles are disabled
        if(typeof closestHandle === 'undefined')
            return false;

        allowed = this._start(event, index);
        if (allowed === false) {
            return false;
        }
        this._mouseSliding = true;

        this._handleIndex = index;

        closestHandle.addClass("ui-state-active")
            .focus();

        offset = closestHandle.offset();
        // Added extra condition to check if the handle currently under the mouse cursor is disabled.
        // This ensures that if a disabled handle is clicked, the nearest handle will remain under the mouse cursor while dragged.
        mouseOverHandle = !$(event.target).parents().addBack().is(".ui-slider-handle") || $(event.target).parents().addBack().is(".ui-slider-handle-disabled");
        this._clickOffset = mouseOverHandle ? {
            left: 0,
            top: 0
        } : {
            left: event.pageX - offset.left - (closestHandle.width() / 2),
            top: event.pageY - offset.top - (closestHandle.height() / 2) - (parseInt(closestHandle.css("borderTopWidth"), 10) || 0) - (parseInt(closestHandle.css("borderBottomWidth"), 10) || 0) + (parseInt(closestHandle.css("marginTop"), 10) || 0)
        };

        if (!this.handles.hasClass("ui-state-hover")) {
            this._slide(event, index, normValue);
        }
        this._animateOff = true;
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-31T18:05:17.880

在滑块 div 中自己定义句柄：

```
<div id="slider-range">
  <div class="ui-slider-handle first-handle"></div>
  <div class="ui-slider-handle second-handle"></div>
</div> 
```

禁用与滑块的所有交互：

```
.ui-widget {
    pointer-events: none;
} 
```

并设置相应的 css 样式以启用交互：

```
#slider-range.ui-slider .ui-slider-handle.first-handle {
    pointer-events: all;
} 
```

现在禁用除第一个句柄之外的所有内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T16:21:51.560

我通过以下方式进行了管理：

```
 $ ('.ui-slider .ui-slider-handle:first').draggable( false); 
```

# vb.net - Visual Studio 2010 为输入数据创建一个类似 excel 的表

> ID：16152034
> 
> 赞同：0
> 
> 时间：2013-04-22T16:27:41.077
> 
> 标签：vb.net, visual-studio-2010

我正在使用**Visual Studio Express**，我正在尝试向我的 Windows 应用程序中添加一个包含行和列的表单，但我找不到任何 WindowsForm，例如表格或单元格设计。

我尝试创建不同的文本框，但我需要大约两列和 10 行的标题，并且添加许多文本框是不切实际的。

![在此处输入图像描述](https://i.stack.imgur.com/ocewt.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:38:40.697

您正在寻找 DataGridView 控件：

[http://msdn.microsoft.com/en-us/library/e0ywh3cz.aspx](http://msdn.microsoft.com/en-us/library/e0ywh3cz.aspx)

# jquery - 无法将编辑内容加载到我的网站

> ID：16152035
> 
> 赞同：0
> 
> 时间：2013-04-22T16:27:43.913
> 
> 标签：jquery, ajax

我试图让我的演出页面通过按一下按钮来加载内容，但它似乎没有加载内容这就是我所拥有的

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        $(document).ready(function() {
            $("#apr").click(function(){
                $("#gigs").load(gigs/april13.html);
            }); 
        });
    </script>
    <title>Where We're Playing</title>
</head> 
```

其中， `#apr`是按钮 id， `#gigs`是我希望它出现的 div 的 id，并且在侧面我有一个包含按钮的无序列表。该文件`gigs/april13.html`是演出信息的网址。

这是我正在谈论[的演出页面。](http://boozebrostempsite.comeze.com/gigs.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:29:26.887

您需要包含`jQuery`库

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

或者

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

您还需要按照@tymeJV 所说的去做，并确保将加载 URL 保留在引号中

您可能希望将点击更改为`.on`

```
$(document).ready(function() {
    $("#apr").on("click",function(){
        $("#gigs").load("gigs/april13.html");
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:28:33.337

似乎您忘记了路径周围的引号

```
$("#gigs").load("gigs/april13.html"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:29:54.557

查看您的页面源代码后，明显的原因是您没有包含 jQuery 库。

将其放在您引用的 css 文件下和您的 jQuery 代码之前：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:30:21.940

您忘记包含`jQuery`API，并且您还有一个拼写错误。

试试这个：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        $(document).ready(function() {
            $("#apr").click(function(){
                $("#gigs").load('gigs/april13.html');
            }); 
        });
    </script>
    <title>Where We're Playing</title>
</head> 
```

# php - 查看您的文件，下载特定购买的文件，受保护的下载页面

> ID：16152037
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:27:46.070
> 
> 标签：php

我有一个用户登录的页面，然后它显示了他购买的所有文件。

我想当他点击下载文件按钮时这样做，它会立即下载文件。

**问题：**

用户只需复制链接并将其传递给他的朋友，然后每个人都可以下载此文件。

**问题**

我如何保护下载，以便用户可以随时下载他的文件，但其他人不能，他们必须先购买。

***我的想法：***

当用户点击下载链接时，它会生成一个链接然后下载文件，该链接将在 10 秒后立即删除。

*但我不确定它是否足够好，不安全或根本如何做到这一点..*

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:34:54.887

一种方法是，通过 PHP 脚本代理它，而不是给出文件的“直接”链接。确保文件在 webroot*之外*，这样他们就无法获得指向它的直接链接。您的 PHP 脚本可以访问该文件，但 Web 浏览器不能。

当用户单击链接时，脚本将检查他们是否已登录，然后是否允许他们访问该文件。如果他们可以访问该文件，则将文件（带有正确的标题）发送到浏览器，否则抛出错误。

像这样的东西：

```
<?php
session_start();

// Figure out if user is logged in and if they can download the file
if($_SESSION['loggedin'] && can_download($file)){
    header('Content-Type: '.mime_content_type($file));
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: no-cache');
    header('Content-Length: ' . filesize($file));
    readfile($file);
    exit;
}
else{
    header('HTTP/1.0 403 Forbidden');
    die('You are not allowed to access this file.'); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:31:21.193

您可以使链接需要有效的登录会话，但这无关紧要，可能不会实现任何目标。

如果他想与他的朋友分享文件，他可以下载并通过 Skype 发送文件或上传到 4Shared。除了在文件上实施某种 DRM 之外，您所做的任何事情都不会阻止用户共享它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:33:05.437

您可以为登录的用户创建一个会话 ID，在您的数据库中对其进行跟踪，并且只允许从具有匹配会话 ID 的用户那里下载。

或者

页面需要认证，只有经过认证的用户才能下载

或者

当用户购买/注册时，有一个表允许他们访问特定资源，并且只允许访问资源的用户 ID 下载

或者

使用 AJAX 链接到检查上述任何内容的页面而不是直接链接，这样您就可以分发链接并仍然执行检查

只是一些想法。

# sympy - IPython Notebook Sympy 数学渲染

> ID：16152040
> 
> 赞同：15
> 
> 时间：2013-04-22T16:28:01.020
> 
> 标签：sympy, ipython-notebook

我刚刚开始使用 IPython Notebook，并被它的强大功能所吸引。我一直在使用网络上的一些示例来开始使用。我正在关注本教程： http: [//nbviewer.ipython.org/url/finiterank.com/cuadernos/suavesylocas.ipynb](http://nbviewer.ipython.org/url/finiterank.com/cuadernos/suavesylocas.ipynb)但数学输出未按预期呈现。下面是我的代码和输出：

```
In [30]:

%load_ext sympyprinting
%pylab inline

from __future__ import division
import sympy as sym
from sympy import *

init_printing()

x,y,z=symbols("x y z")
k,m,n=symbols("k m n", integer=True)

The sympyprinting extension is already loaded. To reload it, use:
  %reload_ext sympyprinting

Welcome to pylab, a matplotlib-based Python environment [backend: module://IPython.kernel.zmq.pylab.backend_inline].
For more information, type 'help(pylab)'.

In [31]:

t = sin(2*pi*x*(k**2))/ (4*(pi**2)*(k**5)) + (x**2) / (2*k)
t
Out[31]:
  2      ⎛     2  ⎞
 x    sin⎝2⋅π⋅k ⋅x⎠
─── + ─────────────
2⋅k         2  5   
         4⋅π ⋅k 
```

我也尝试了其他示例，但它们也没有正确呈现。我哪里错了？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-29T14:40:15.613

我有同样的问题。尝试

```
from sympy.interactive import printing
printing.init_printing(use_latex=True) 
```

代替

```
%load_ext sympyprinting 
```

我正在使用 sympy 0.7.2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-14T05:49:35.477

我最近遇到了同样的问题，我正在使用 Linux Crunchbang，我认为它是 Redhat 的衍生产品。最初我使用安装 sympy

```
pip install sympy 
```

然而，这导致了上述问题。然后我去了 sympy 网页并将 git 存储库克隆到一个文件夹。然后可以通过使用安装它（一次在本地文件夹中）

```
python setup.py install 
```

之后一切正常，所以我认为这与使用的版本有关。作为记录，我用来在 python 中初始化打印的命令是

```
import sympy
sympy.init_printing() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-05T23:02:04.267

进口：

```
from sympy import *
init_printing() 
```

例子：

```
x = symbols('x')
a = Integral(cos(x)*exp(x), x)
Eq(a, a.doit()) 
```

输出：

[![Eq(积分(exp(x)*cos(x), x), exp(x)*sin(x)/2 + exp(x)*cos(x)/2)](https://i.stack.imgur.com/8W7NU.png)](https://i.stack.imgur.com/8W7NU.png)

# vba - 在书签处插入图片（或如何判断是否选择了任何列表框项目）

> ID：16152041
> 
> 赞同：1
> 
> 时间：2013-04-22T16:28:02.237
> 
> 标签：vba, ms-word

我是 VBA 的新手，但仍然很挣扎。

我在一个用相对“.\logos\”目录的内容的文件名填充的useform 上有一个列表对象。我想在名为 的书签中插入图片`bmLogo`，但我编写的代码（见下文）并不能解决问题。

```
If ListLogo <> Null Then
    ActiveDocument.Bookmarks("bmLogo").Range _
        .InlineShapes.AddPicture FileName:=ThisDocument.Path & "\logos\" & ListLogo
End If 
```

有小费吗？另外，如果我可以设置一个高度并在不改变纵横比的情况下调整图像比例，那将非常有用！

谢谢，
路易斯

编辑1：对，所以，bmLogo 是书签的正确名称，所以这不是问题。我只是使用了一个 msgbox 来显示 '"path:" & ThisDocument.Path & "\logos\" & ListLogo'，它看起来像是正确的路径。我正在使用 ThisDocument.Path 因为我希望它是相对的，因此文档更便携。我想我会暂时尝试一条绝对路径，看看是否可行，如果没有别的，它应该暗示错误不在哪里。

编辑 2：它适用于 IF 语句之外的绝对路径，当我得到一个 msgbox 来打印绝对路径和相对路径时，它们是相同的。注释掉 IF 语句后，找到相关方法。我很高兴它现在可以工作，但谁能告诉 IF 有什么问题？

编辑3：事实证明，我检查列表框中是否已选择某些内容的方法根本不起作用。相反，我将遍历列表中的每个项目并检查是否选择了该项目。这是一种非常粗略的方法，但在我找到更好的方法之前它会起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:02:35.243

作为记录，这在 2010 年对我有用，所以我猜您的文件名 ( `ListLogo`)、书签 ( `bmLogo`) 或文件路径 ( `ThisDocument.Path`) 有问题。

**1：**

文件名是否符合您期望的格式？它只是文件名还是完整路径？它是否包含正确的扩展名？

**2：**

您的文档中是否存在书签？

**3：**

`ThisDocument`指的是你认为它的作用吗？下面的简化对我有用。

```
ActiveDocument.Bookmarks("TEST").Range.InlineShapes.AddPicture FileName:="P:\test.png" 
```

我将`.docx`文件保存在我的`P:\`路径中，因此以下内容应该有效：

```
ActiveDocument.Bookmarks("TEST").Range.InlineShapes.AddPicture FileName:=ThisDocument.Path & "\test.png" 
```

但是，返回的路径是我的 AppData 目录。当我观察这个`ThisDocument`对象时，我发现它实际上指向了`Normal.dotm`模板，当我录制一个宏来测试它时，代码就是在这个模板中创建的。

* * *

您能否验证这三个项目中的每一个是否正确以及您的期望？

*   列表徽标
*   bm徽标
*   这个文件

# c# - 遇到断点时执行代码？

> ID：16152042
> 
> 赞同：11
> 
> 时间：2013-04-22T16:28:05.847
> 
> 标签：c#, visual-studio-2012

在立即窗口中，我可以执行一行代码。我还可以在特定点设置断点，这样当断点被命中时，程序就会停止，我可以在立即窗口中运行我的代码行。有什么方法（包括扩展）可以自动执行此操作吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-22T16:40:23.903

或多或少。您可以右键单击任何断点并选择“操作...”（VS 2017，请继续阅读旧版本）

那里唯一的选择是打印一条消息，这通常就足够了，但是您可以在其中运行任意代码。例如：`{Console.WriteLine("Hello World")}`

![Visual Studio 2017 操作断点的屏幕截图](https://i.stack.imgur.com/VQtHp.png)

在旧版本的 Visual Studio 中，可以通过右键单击并选择“当命中...”来使用该选项：

![Visual Studio When-Hit 断点的屏幕截图](https://i.stack.imgur.com/onj1L.png)

这将输出：

> Hello World
> 表达式已被评估，没有任何价值

这意味着您可以调用任意方法。任何其他副作用都会影响您正在运行的应用程序。我有时使用它来临时修补代码问题，而无需重新启动 64 位应用程序。

但是请记住，与正常程序执行相比，这非常慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-29T19:59:15.413

Visual Studio 2017 的答案与 Thorarin 的答案类似，但一些 UI 组件发生了变化。

在 Visual Studio 2017 中，您要查找的菜单项是“操作”。

右键单击断点，然后选择“操作”，然后将要执行的代码`{ .. code to execute .. }`放在“将消息记录到输出窗口”字段中的括号内。

# wordpress - 反向工程 MySQL 表 (Wordpress)

> ID：16152044
> 
> 赞同：0
> 
> 时间：2013-04-22T16:28:08.713
> 
> 标签：wordpress, plugins

我找到了一个名为[Extra Comment Fields](http://blog.ideashower.com/post/15147134893/wordpress-plugin-extra-comment-fields#download)的 Wordpress 插件，它应该可以工作，但我在使用数据库时遇到了问题！额外的字段不会存储在任何地方！

表插件使用（并且应该创建）称为 wp_comments_extra，但此表无处可寻。有没有办法通过反向工程插件的 .php 文件手动创建正确的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:51:48.763

你永远不应该这样做。事实上，这将是一个非常糟糕的主意。如果您不知道自己在做什么，通常修改插件会导致很多问题。你想做什么？激活插件时应自动创建该表。

是什么让您认为那是要创建的表？它可以使用 Wordpress 内置的元表，而不是它自己的。不是每个插件都会创建一个以自己命名的表。

此外，该插件自 2008 年以来就没有使用过。它可能已经过时了。如果我是你，我会寻找不同的插件。

# php - 将多维数组变成单数组？

> ID：16152047
> 
> 赞同：0
> 
> 时间：2013-04-22T16:28:21.163
> 
> 标签：php, zend-framework, multidimensional-array, google-analytics

我正在尝试转换通过迭代购物车创建的数组创建的多维数组：

```
Array (
    [array] => Array (
        [0] => Array (
            [product_id] => 7
            [prod_count] => 1
            [price] => 19.99
        )
        [1] => Array (
            [product_id] => 6
            [prod_count] => 3
            [price] => 19.99
        )
        [2] => Array (
            [product_id] => 5
            [prod_count] => 2
            [price] => 19.99
        )
        [3] => Array (
            [product_id] => 4
            [prod_count] => 4
            [price] => 14.99
        )
        [4] => Array (
            [product_id] => 3
            [prod_count] => 5
            [price] => 19.99
        )
    )
) 
```

变成这样的东西：

```
$items = array(
array('product_id'=> $val,  'price'=>$price, 'quantity'=>$prod_count),
array('product_id'=>$val, 'price'=>$price, 'quantity'=>$prod_count),
array('product_id'=>$val, 'price'=>$price, 'quantity'=>$prod_count)
); 
```

这样我就可以将它提供给谷歌分析电子商务跟踪代码，并为数组中的每个产品回显下面的代码。

```
_gaq.push(['_addItem',
   '<?php $order_id; ?>',          // trans ID **I have this part figured out**
   '<?php $product_id; ?>',        // SKU/code - required
   '',                             // product name 
   '',                             // category or variation
   '<?php $price; ?>',             // unit price - required
   '<?php $prod_count; ?>'         // quantity - required
]); 
```

我已经尝试了 SO 的一堆解决方案，但它们似乎都不适合我的购物车阵列，老实说，我很难过。SO的好人请指出我正确的方向。

编辑* 这是我首先创建多维数组的代码。

```
$products = array();

for($i=0; $i<sizeof($productsIds); $i++){       
    $product = explode(":", $productsIds[$i]);
    $products[$i]['info'] = $this->Products->getProductById($product[0]);
    $products[$i]['count'] = $product[1];
    $products[$i]['price_count'] = $product[1]*$products[$i]['info']['product_price'];

    $orderarray[$i] = array(
        'product_id' => $products[$i]['info']['product_id'], 
        'prod_count' => $products[$i]['count'], 
        'price' => $products[$i]['info']['product_price']) ; 
```

也许我可以改变它来创建一个更适合我想要的结果的数组。只是不确定如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:14:26.550

您想使用原始数组并将它们传递给 gaq？：

```
// You could remove the need for [0] if you changed your original code
<?php foreach($yourOriginalArray[0] as $item) { ?>
  _gaq.push(['_addItem',
     '<?php $order_id; ?>',          // trans ID **I have this part figured out**
     '<?php echo $item['product_id']; ?>',        // SKU/code - required
     '',                             // product name 
     '',                             // category or variation
     '<?php echo $item['price']; ?>',             // unit price - required
     '<?php echo $item['quantity']; ?>'         // quantity - required
  ]);
<?php } ?> 
```

其他数据、产品名称和类别，您必须像使用 product_id、价格和数量一样填充到您的数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T01:26:34.750

最后这工作

```
$ga_itemdata = call_user_func_array('array_merge',$ga_itemdata);

 foreach ($ga_itemdata as $gavar[0] => $details) {

echo "
_gaq.push(['_addItem',
    $order_id,
    $details[product_id],
    $details[prod_name],
    $none,
    $details[price],
    $details[prod_count]
    ]);
";
    } 
```

# android - 等待并发 GC 阻塞

> ID：16152048
> 
> 赞同：17
> 
> 时间：2013-04-22T16:28:23.003
> 
> 标签：android, eclipse, garbage-collection

当我在模拟器上运行我的应用程序时，Logcat 显示：

```
04-22 16:21:30.685: D/dalvikvm(967): GC_CONCURRENT freed 1545K, 20% free 7019K/8720K, paused 78ms+17ms, total 360ms

04-22 16:21:30.685: D/dalvikvm(967): WAIT_FOR_CONCURRENT_GC blocked 143ms
04-22 16:21:31.845: D/dalvikvm(967): GC_CONCURRENT freed 1552K, 20% free 7019K/8720K, paused 116ms+18ms, total 554ms

04-22 16:21:31.845: D/dalvikvm(967): WAIT_FOR_CONCURRENT_GC blocked 268ms
04-22 16:21:32.435: D/dalvikvm(967): GC_CONCURRENT freed 1545K, 20% free 7019K/8720K, paused 75ms+9ms, total 192ms

04-22 16:21:32.435: D/dalvikvm(967): WAIT_FOR_CONCURRENT_GC blocked 73ms
04-22 16:21:32.945: D/dalvikvm(967): GC_CONCURRENT freed 1552K, 20% free 7019K/8720K, paused 75ms+10ms, total 209ms

04-22 16:21:32.945: D/dalvikvm(967): WAIT_FOR_CONCURRENT_GC blocked 70ms
04-22 16:21:33.434: D/dalvikvm(967): GC_CONCURRENT freed 1545K, 20% free 7019K/8720K, paused 78ms+12ms, total 192ms 
```

这一直持续到我退出应用程序。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T16:40:22.910

似乎您正在创建许多新对象并很快将它们丢弃。

对于 WAIT_FOR_CONCURRENT_GC 看这个： [WAIT_FOR_CONCURRENT_GC 阻塞是什么意思？](https://stackoverflow.com/questions/11531657/what-does-wait-for-concurrent-gc-blocked-mean)

这意味着您尝试分配内存（例如对象创建）并且它不适合内存。这就是释放 GC_CONCURRENT 的原因。它只是通常的垃圾收集。

如果您遇到性能问题，请尝试重用对象或保留它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T16:35:56.970

这意味着您正在执行太多操作并且正在使用大量内存。因此，正在调用 GC（垃圾收集器）来释放内存。

> 04-22 16:21:30.685: D/dalvikvm(967): GC_CONCURRENT freed 1545K, 20% free 7019K/8720K, paused 78ms+17ms,总共360ms

freed 表示释放了多少内存

GC_CONCURRENT 当堆太大而无法防止溢出时调用。

paused 78ms+17ms – 表示 GC 完成收集所用的时间。

[参考](http://developer.samsung.com/android/technical-docs/Memory-Profiler-Identifying-Potential-Problems)

另外进行内存转储并使用 MAT 工具分析转储。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-16T15:07:34.390

有时它发生在你有一个永无止境的循环只是因为某些条件总是正确的。

尝试首先弄清楚它是否是这种情况，因为它主要是因为这个而发生的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-08T23:53:26.907

Agree mostly with @luxer, but I believe it's not that you are allocating too many objects, but you are allocating some huge objects. If you refer to the link pointed by @luxer about WAIT_FOR_CONCURRENT_GC, you will realize that a second gc is being triggered in your app while a concurrent gc (which is typically triggered when the heap occupancy hits a soft limit) is in progress. The second gc could have been triggered by you explicitly or because an allocation failed. Since you have not indicated that you're calling System.gc(), I would assume that your allocations are failing and the system is trying to do a gc.

So, yeah, you should seriously consider reusing some huge objects instead of allocating them each time. This is a better practice, but if for some reason you're unable to do that, you can probably bump your heap size (by setting large heap) and that may help.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-14T05:24:49.113

我能够通过调试我的代码来解决我的问题：有一个 DB 操作潜伏在一个无限的 while 循环中，它正在填充 bean 并因此导致内存泄漏。

也许如果您像我一样是新手，请检查 while/do-while/for 循环和循环中完成的对象分配。未关闭的连接和游标也应该关闭。

谢谢，

# python - Matplotlib python在颜色图中改变单色

> ID：16152052
> 
> 赞同：5
> 
> 时间：2013-04-22T16:28:41.100
> 
> 标签：python, matrix, matplotlib, color-mapping

我使用 python 中的颜色图来绘制和分析矩阵中的值。我需要将白色与等于 0.0 的每个元素相关联，而对于其他元素，我想要一个“传统”颜色图。查看 [Python Matplotlib Colormap](https://stackoverflow.com/questions/9893440/python-matplotlib-colormap)我将 pcolor 使用的字典修改为：

```
dic = {'red': ((0., 1, 1), 
               (0.00000000001, 0, 0), 
               (0.66, 1, 1), 
               (0.89,1, 1), 
               (1, 0.5, 0.5)), 
       'green': ((0., 1, 1), 
                (0.00000000001, 0, 0), 
                (0.375,1, 1), 
                (0.64,1, 1), 
                (0.91,0,0), 
                (1, 0, 0)), 
       'blue': ((0., 1, 1), 
               (0.00000000001, 1, 1), 
               (0.34, 1, 1), 
               (0.65,0, 0), 
               (1, 0, 0))} 
```

结果是：![在此处输入图像描述](https://i.stack.imgur.com/zKEFm.png)

我设置：

```
matrix[0][0]=0 matrix[0][1]=0.002 
```

但是正如您所看到的，它们都与白色相关联，即使我将 0.00000000001 设置为蓝色的起点。这怎么可能？我怎样才能改变它以获得我想要的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:30:55.387

虽然不理想，但掩盖零值是可行的。您可以使用 控制它的显示`cmap.set_bad()`。

```
from matplotlib.colors import LinearSegmentedColormap
import matplotlib.pyplot as plt
import numpy as np

dic = {'red': ((0., 1, 0), 
               (0.66, 1, 1), 
               (0.89,1, 1), 
               (1, 0.5, 0.5)), 
       'green': ((0., 1, 0), 
                (0.375,1, 1), 
                (0.64,1, 1), 
                (0.91,0,0), 
                (1, 0, 0)), 
       'blue': ((0., 1, 1), 
               (0.34, 1, 1), 
               (0.65,0, 0), 
               (1, 0, 0))}

a = np.random.rand(10,10)
a[0,:2] = 0
a[0,2:4] = 0.0001

fig, ax = plt.subplots(1,1, figsize=(6,6))

cmap = LinearSegmentedColormap('custom_cmap', dic)
cmap.set_bad('white')

ax.imshow(np.ma.masked_values(a, 0), interpolation='none', cmap=cmap) 
```

![在此处输入图像描述](https://i.stack.imgur.com/QgdMk.png)

# wcf - 无法将关联对象正确添加到实体框架上下文中

> ID：16152060
> 
> 赞同：0
> 
> 时间：2013-04-22T16:29:11.147
> 
> 标签：wcf, entity-framework, wcf-data-services, odata

我通过数据服务公开了实体框架项目：

```
public class VersionContext : DbContext
{
    public DbSet<VersionTreeEntry> VersionTreeEntries { get; set; }

    public DbSet<PluginState> PluginStates { get; set; }

    public static void SetForUpdates()
    {
        Database.SetInitializer(new MigrateDatabaseToLatestVersion<VersionContext, Configuration>());
    }
}

public class VersionTreeEntry
{
    public VersionTreeEntry()
    {
        Children = new List<VersionTreeEntry>();
        PluginStates = new List<PluginState>();
    }

    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public long Id { get; set; }

    public virtual ICollection<VersionTreeEntry> Children { get; set; }

    public virtual ICollection<PluginState> PluginStates { get; set; }

    public virtual VersionTreeEntry Ancestor { get; set; }

    /// <summary>
    /// Links to the ProtoBufDataItem Id for the session state.
    /// </summary>
    public int DataId { get; set; }

    public string Notes { get; set; }

    [Required]
    public DateTime TimeStamp { get; set; }

    [MinLength(1, ErrorMessage = "Tag cannot have a zero length")]
    [MaxLength(20, ErrorMessage = "A tag name cannot contain over 20 characters")]
    public string Tag { get; set; }

    public bool IsUiNodeExpanded { get; set; }

    [Required]
    public string Version { get; set; }

    [Required]
    public string SessionName { get; set; }
}

public class PluginState
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public long Id { get; set; }

    public string PluginName { get; set; }

    [Required]
    public byte[] Data { get; set; }
} 
```

据我所见，数据类定义正确。我尝试创建一些新对象并将它们添加到上下文中，它们的关系完好无损：

```
var session = new Session();
session.SessionName = "My new session";

VersionTreeEntry versionTreeEntry = new VersionTreeEntry();
versionTreeEntry.SessionName = session.SessionName;
versionTreeEntry.Version = Assembly.GetExecutingAssembly().GetName().Version.ToString();
versionTreeEntry.TimeStamp = DateTime.Now;

_versionContext.AddToVersionTreeEntries(versionTreeEntry);

foreach (var plugin in session.Plugins)
{
     using (var ms = new MemoryStream())
     {
           plugin.SaveState(ms);
           PluginState state = new PluginState();
           state.PluginName = plugin.PluginName;
           state.Data = ms.ToArray();

           versionTreeEntry.PluginStates.Add(state);
     }
}

_versionContext.SaveChanges(); 
```

问题是 PluginState 实例从未真正添加到数据库中。如果我添加代码以手动将它们添加到上下文中，它们会被添加，但指向 VersionTreeEntry 的外键为空。

同样，这是一个 WCF DataService 而不是普通的 EF，知道可能出了什么问题吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:28:41.033

从评论部分在这里发布答案。

同意。最好的方法是调用以下 API：

```
_versionContext.AddRelatedObject(versionTreeEntry, "PluginStates", state); 
```

谢谢普拉蒂克

# javascript - Ember.js 模型函数，无法读取未定义的属性“查找”

> ID：16152062
> 
> 赞同：1
> 
> 时间：2013-04-22T16:29:11.717
> 
> 标签：javascript, ember.js

我是 Ember.js 的新手，尝试在路由中使用模型函数时遇到问题。

我一直在关注 ember 网站上的文档，到目前为止有以下内容。

```
App.Latest = DS.Model.extend({
title: DS.attr('string'),
volume: DS.attr('string'),
issue: DS.attr('string')
});

App.Latest.FIXTURES = [{
"title": "test Title",
"volume": "test volume",
"issue": "test issue",
}];

App.LatestRoute = Ember.Route.extend({
    model: function() {
        return App.Latest.find();
  }
}); 
```

这在 chrome 的控制台中为我提供了以下信息

未捕获的类型错误：无法读取未定义的属性“查找”

谢谢

编辑：我正在使用 ember-1.0.0-rc.3 并且我已经设置了适配器。

修复：确保你不会像我一样犯错误，并检查你的 ember 数据是最新的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:37:38.440

您使用的是什么版本的 ember 数据？您的适配器设置是否正确？IE

```
App.Store = DS.Store.extend({
  revision: 12,
  adapter: 'DS.FixtureAdapter'
}); 
```

编辑：

您的灯具数据需要有一个 ID 属性

```
App.Latest.FIXTURES = [{
  "id"    : 1,
  "title" : "test Title",
  "volume": "test volume",
  "issue" : "test issue",
}]; 
```

[http://jsbin.com/odijiq/3/edit](http://jsbin.com/odijiq/3/edit)工作示例

# r - 如何在 R 中放大地图/绘图？

> ID：16152064
> 
> 赞同：0
> 
> 时间：2013-04-22T16:29:19.497
> 
> 标签：r, map

我在 R 中绘制了一张地图，但是当我导出它时，它的大小非常小。如何放大地图并仍将其保存为图片？（我知道我可以将其保存为 PDF，然后它是矢量图形 - 但我需要将其复制到 Power Point 并且还需要透明背景 - 我认为 PDF 不可能做到这一点，不是吗？）

正如您在此处看到的，该地图在 Power Point 幻灯片中使用起来太小了： ![PNG.格式的地图](https://i.stack.imgur.com/spOvC.png)

如果有人知道一种将其保存为矢量图的好方法，我可以轻松地在 Power Point 中使用它，那也是完美的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:39:26.520

png() 函数允许您以“px”的默认分辨率指定宽度和高度大小，默认值为 480 和 480。您还可以提供以“ppi”为单位的 res 参数。如果您有文本，您可能应该指定磅值 >= 20 以便于阅读。我通常将我的图表保存为 PDF 并使用外部程序转换为 PNG。但是，最新版本的 PowerPoint 将接受 pdf 格式。也可以另存为`.eps`格式。

# c# - 根据容器高度动态添加控件的“列”

> ID：16152066
> 
> 赞同：0
> 
> 时间：2013-04-22T16:29:37.523
> 
> 标签：c#, winforms, user-interface

我正在为我的应用程序使用 vs2012 (C#)，并且我正在寻找一种方法来动态地将标签和文本框添加到表单上的 tabPage。但是因为要添加的控件的数量可能大于 10，所以我也尝试将它们添加到“列”中，因此容器控件只会水平滚动，而不是垂直滚动。

例如，我正在尝试做这样的事情：

```
LabelControl     LabelControl     LabelControl     LabelControl
TextboxControl   TextboxControl   TextboxControl   TextboxControl

LabelControl     LabelControl     LabelControl     LabelControl
TextboxControl   TextboxControl   TextboxControl   TextboxControl

etc. 
```

“容器”控件是一个 TabPage，所以我知道我必须从中获取高度并使用它。我能够让文本框呈现，但在标签控件位于顶部，然后是下面的文本框时遇到了困难。

这是我到目前为止所得到的：

```
int height = tabPageBicycle.Height;
Point startLocation = new Point(0, 0);
int previousX = 0;
int previousY = 0;
int currentX = 0;

for (int x = 0; x < 75; x++)
{
    Label label = new Label();
    TextEdit text = new TextEdit();
    label.Text = x.ToString();
    text.Text = x.ToString();

    label.Location = new Point(currentX, previousY);
    tabPageBicycle.Controls.Add(label);

    if ((height - previousY) < text.Height)
    {
        currentX += 100;
        previousY = 0;
    }

    text.Location = new Point(currentX + text.Height + 5, previousY + 50);
    previousX = text.Location.X;
    previousY = text.Location.Y;
    tabPageBicycle.Controls.Add(text);
} 
```

关于我做错了什么的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:01:42.223

在逐行查看并查看循环中正在执行的操作之后，最终弄清楚了。这是我使用的最终代码....一如既往，我愿意接受建议/评论/等。关于如何使它更好/更有效。

```
int labelY = 0;
int textY = 0;
int startX = 5;
int startY = 5;
int height = tabPageBicycle.Height;
Point startLocation = new Point(0, 0);

for (int x = 0; x < 75; x++)
{
    Label label = new Label();
    TextEdit text = new TextEdit();
    label.AutoSize = true;
    label.Text = x.ToString();
    text.Text = x.ToString();

    //Determine if the next set of controls will be past the height of the container.
    //If so, start on the next column (change X).
    if ((height - textY) < ((label.Height + 10) + text.Height))
    {
        startX += 125;
        labelY = 0;
    }

    //Start of new column.
    if (labelY == 0)
        label.Location = new Point(startX, startY);
    else
        label.Location = new Point(startX, textY + label.Height + 10);

    tabPageBicycle.Controls.Add(label);
    labelY = label.Location.Y;
    textY = labelY + 15;

    text.Location = new Point(startX, textY);
    textY = text.Location.Y;
    tabPageBicycle.Controls.Add(text);
} 
```

结果： ![在此处输入图像描述](https://i.stack.imgur.com/SERwJ.png)

我希望它可以帮助别人！

# php - 如何从 MySQL 数据库中获取特定数据到我的 PHP 表？

> ID：16152067
> 
> 赞同：1
> 
> 时间：2013-04-22T16:29:39.810
> 
> 标签：php, mysql, sql

我想从 MySQL 数据库中获取数据到 .php 文件中的表中。在我的表格的每一行中，我想显示用户可以下载的标题、文本和附件（$name）。问题是当我显示它时，我从我的 .php 文件的每个表行的列表中显示的数据库中获取所有附件。因此，我只想从数据库中每行显示一个附件，其 ID 与数据库表行的标题和文本相同。

这是我的数据库表：

```
CREATE TABLE IF NOT EXISTS `table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`title` varchar(30) NOT NULL,
`text` varchar(30) NOT NULL,
`name` varchar(30) NOT NULL,
`type` varchar(30) NOT NULL,
`size` int(11) NOT NULL,
`content` longblob NOT NULL,
PRIMARY KEY (`id`)  ) 
```

我的代码：

```
<?php
include('config.php');
$sqlget="SELECT * FROM table ORDER BY timestamp DESC";
$sqldata= mysqli_query($dbcon, $sqlget) or die ('error');
echo"<table>";
while ($row=mysqli_fetch_array($sqldata,
MYSQLI_ASSOC)) {
echo "<tr><td>";
echo"<b><font color='#DF01A5'> Title: ".$row['title']."</font></b>";
echo "<br/>";
echo $row['text'];
echo "<br/>";
echo "<b><font color='#DF01A5'>Attachment: </font>";
?>
<?php
$con = mysql_connect('localhost', 'root', 'pass') or die(mysql_error());
$db = mysql_select_db('database', $con);
$query = "SELECT  id, name FROM table";
$result = mysql_query($query) or die('Error, query failed');
if(mysql_num_rows($result) == 0)
{
echo "Database is empty <br>";
} 
else
{
while(list($id, $name) = mysql_fetch_array($result))
{
?>
<a href="download.php?id=<?php echo urlencode($id);?>"
><?php echo urlencode($name);?></a> <br>
<?php 
}
}
mysql_close();
echo"</table";
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T17:12:07.917

只使用一个while循环

```
$sqlget="SELECT * FROM table ORDER BY timestamp DESC";
$sqldata= mysqli_query($dbcon, $sqlget) or die ('error');
echo"<table>";
while ($row=mysqli_fetch_array($sqldata,MYSQLI_ASSOC)) {
   echo "<tr><td>";
   echo"<b><font color='#DF01A5'> Title: ".$row['title']."</font></b>";
   echo "<br/>";
   echo $row['text'];
   echo "<br/>";
   echo "<b><font color='#DF01A5'>Attachment: </font>";
   echo "<a href=\"download.php?id=".$row['id']."\">".$row['name']."</a><br />\n";
   ...
}
echo '</table>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T16:47:48.327

假设您的两个表仅与 ID 相关：

```
$sql = $db_conn->query("SELECT t1.title, t1.text, t2.ID AS AID, t2.name FROM table1 AS t1 LEFT JOIN table2 AS t2 ON t1.ID = t2.ID ORDER BY t1.timestamp");

echo '<table><thead><tr><th>Title</th><th>Description</th><th>Attachment</th></tr></thead>';
while($row = $sql->fetch_array())
{
    echo '<tr>';
    echo '<td>' . $row['title'] . '</td>';
    echo '<td>' . $row['text'] . '</td>';
    echo '<td><a href="download.php?id=' . urlencode($row['AID']) . '">' . $row['name'] . '</a></td>';
    echo '</tr>';
}
echo '</table>'; 
```

未测试，但从这个开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T16:34:31.180

我们需要该表的示例输出。我仍然不确定这些附件是如何存储的。同时，这个 PHP 函数应该只返回一行：[http ://www.php.net/manual/en/mysqli-result.fetch-row.php](http://www.php.net/manual/en/mysqli-result.fetch-row.php)

编辑：不必要的评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T17:16:55.607

对于您的特定情况，这将有助于：

```
$sqlget = "SELECT `title`, `text`, `name` FROM `table` WHERE `title` = `text`"; 
```

享受...

# html - 防止 Bootstrap Modal 在单击外部或按 Escape 时消失？

> ID：16152073
> 
> 赞同：540
> 
> 时间：2013-04-22T16:29:58.870
> 
> 标签：html, twitter-bootstrap, modal-dialog

我将 Twitter Bootstrap 模式用作向导窗口，并希望防止用户在单击模式外部或按下退出键时关闭它。相反，我希望它在用户按下完成按钮时关闭。我怎样才能实现这种情况？

* * *

## 回答 #1

> 赞同：1023
> 
> 时间：2013-04-22T20:11:15.503

如果使用 JavaScript，那么：

```
$('#myModal').modal({
    backdrop: 'static',
    keyboard: false
}) 
```

或在 HTML 中：

```
<a data-controls-modal="your_div_id" data-backdrop="static" data-keyboard="false" href="#"> 
```

* * *

## 回答 #2

> 赞同：311
> 
> 时间：2014-01-07T15:50:04.107

也可以在您的 div 模式`data-backdrop="static"`中单击并`data-keyboard="false"`Esc ：

```
<div id="idModal" class="modal hide" data-backdrop="static" data-keyboard="false"> 
```

* * *

## 回答 #3

> 赞同：83
> 
> 时间：2018-04-12T10:11:16.267

您也可以在引导模型中使用 Direct。

```
<div class="modal fade" id="myModal" data-keyboard="false" data-backdrop="static"> 
```

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2016-07-14T12:37:49.150

> 只需向该模式添加`data-backdrop="static"`和属性。`data-keyboard="false"`

例如。

```
<a data-controls-modal="your_div_id" data-backdrop="static" data-keyboard="false" href="#"> 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2019-01-13T10:14:11.587

```
<button class='btn btn-danger fa fa-trash' data-toggle='modal' data-target='#deleteModal' data-backdrop='static' data-keyboard='false'></button> 
```

只需将 data-backdrop 和 data-keyboard 属性添加到打开模型的按钮即可。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2015-08-19T21:06:23.823

您可以使用下面的代码

```
$.fn.modal.prototype.constructor.Constructor.DEFAULTS.backdrop = 'static'; 
```

更改默认行为。

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2016-09-01T06:15:01.587

```
jQuery('#modal_ajax').modal('show', {backdrop: 'static', keyboard: false}); 
```

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2017-10-04T13:04:04.893

我使用这些属性并且它有效，`data-keyboard="false" data-backdrop="static"`

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2019-01-05T19:10:10.857

***如果您在模态框外单击，此代码将阻止模态框关闭。***

```
 $(document).ready(function () {
    $('#myModal').modal({
           backdrop: 'static',
           keyboard: false
    })
   }); 
```

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2016-10-26T06:14:18.617

```
<button class="btn btn-primary btn-lg" data-backdrop="static" data-keyboard="false" data-target="#myModal" data-toggle="modal"> 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2016-06-04T04:56:07.880

如果您需要禁用单击外部但启用按 Escape

```
$('#myModal').modal({
    background: 'static', // 这对点击外部事件禁用
    keyboard: true //这用于键盘事件
})
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2017-07-12T05:03:55.857

以下脚本对我有用：

```
// prevent event when the modal is about to hide
$('#myModal').on('hide.bs.modal', function (e) {
    e.preventDefault();
    e.stopPropagation();
    return false;
}); 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2018-08-06T08:36:42.503

如果您需要在显示模态*后进行设置，您可以使用@Nabid 解决方案。*但是，有时您仍然需要允许*某些*方法来关闭模式。假设您有一个带有 class 的按钮`really-close-the-modal`，它应该真正关闭模式，您可以使用以下代码（jquery）：

```
var closeButtonClicked = false;

$('.really-close-the-modal').on('click', function () {
    closeButtonClicked = true;
});

$('#myModal').on('hide.bs.modal', function (e) {
    if (!closeButtonClicked) {
        e.preventDefault();
        e.stopPropagation();
        return false;
    }
    closeButtonClicked = false;
}); 
```

这不是很好的代码设计，但它在模态与加载器动画一起显示的情况下帮助了我，直到 ajax 请求返回，然后我才能知道是否需要配置模态以防止“隐式”关闭。您可以使用类似的设计来防止在模态仍在加载时关闭它。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-04-15T08:47:55.570

你应该使用背景静态，键盘假。并且可以使用 jQuery 关闭关闭按钮，也可以从模态 html 中删除。希望这有帮助。

```
 $('#MyModal').modal({ backdrop: 'static', keyboard: false });
    $('#MyModal .close').css('display','none'); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-07-13T05:15:34.017

当我在模态框旁边单击时，您的代码正在工作，但是如果我**`input`**在模态框体内使用 html 字段，则将光标聚焦在该输入上，然后按下**`esc`**键模态框已关闭。点击[这里](http://jsfiddle.net/4EUS6/185/)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-01-22T07:36:07.117

```
<div class="modal show">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">     

    <h4 class="modal-title">Modal title</h4>
     </div>
     <div class="modal-body">
      <p>One fine body&hellip;</p>
  </div>

  </div><!-- /.modal-content -->
</div><!-- /.modal-dialog --> 
```

我认为这个 codepen 可以帮助你 [防止模态关闭 css 和 bootstrap](http://codepen.io/shubhangisingh/pen/RKbeqV)

# python - 如何从基于单个 Excel 文件的单个 DataFrame 在一个脚本中创建五个具有相同格式的不同图形？

> ID：16152078
> 
> 赞同：0
> 
> 时间：2013-04-22T16:30:19.260
> 
> 标签：python, matplotlib, pandas

我对 Python 还是很陌生，所以这可能是一个简单的问题，但我还没有找到满意的答案。我有来自五个不同来源的数据，在将数据从 Excel 文件加载到单个 DataFrame 后，我试图在一个脚本中绘制这些数据。就像现在一样，我只知道如何一次绘制一个源或在一个图形中绘制所有 5 个源（或 1 到 5 之间的某个位置）。这是我的代码，整个脚本。可能并非全部都是必要的，但我已将其全部包括在内以防万一。

```
import numpy as np
import pandas as pd
from pandas import *
import matplotlib
import matplotlib.pyplot as plot
import datetime as datetime
from datetime import *

#Import data from Excel File
data2007 = pd.ExcelFile('f:\Python\Learning 19-4-2013\Data 2007.xls')
table2007 = data2007.parse('Sheet1', skiprows=[0,1,2,3,4,5], index=None)

#Plot data for first meter
ax = plot.figure(figsize=(7,4), dpi=100).add_subplot(111)
FirstMeter = table2007_3.columns[0]
Meter1 = table2007_3[FirstMeter]
Meter1.plot(ax=ax, style='-v')

#Plot data for second meter
SecondMeter = table2007_3.columns[1]
Meter2 = table2007_3[SecondMeter]
Meter2.plot(ax=ax, style='-v')

#Plot data for third meter
ThirdMeter = table2007_3.columns[2]
Meter3 = table2007_3[ThirdMeter]
Meter3.plot(ax=ax, style='v-')

#Plot data for fourth meter
FourthMeter = table2007_3.columns[3]
Meter4 = table2007_3[FourthMeter]
Meter4.plot(ax=ax, style='v-')

#Plot data for fifth meter
FifthMeter = table2007_3.columns[4]
Meter5 = table2007_3[FifthMeter]
Meter5.plot(ax=ax, style='v-')

#Command to show plots
plot.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:30:22.993

我看到您正在`Meter1`从 DataFrame 的每一列中制作一个新系列（例如，），然后将它们分别绘制在相同的轴上。相反，您可以绘制 DataFrame 本身。Pandas 假设您想在同一图上将每一列绘制为单独的线，这正是您在这里所做的。

```
table_2007.plot(style='v-') 
```

或者`table_2007[0:4].plot(style='v-')`如果还有其他列需要省略。

默认情况下，它还会生成一个图例，您可以使用关键字参数来隐藏它`legend=False`。

如果您想要单独的数字，正如您的问题标题所暗示的那样，该`subplots=True`论点可能会完成工作。

# java - 如何在 jspx 中映射 tagx 调用？

> ID：16152085
> 
> 赞同：0
> 
> 时间：2013-04-22T16:30:36.423
> 
> 标签：java, jsp-tags, jspx, tagx

我们有一个大型项目，它使用了我们创建的大量 tagx，我们即将重构 UI 的底层代码。这意味着许多 tagx 将被合并、丢弃并重写视图（jspx-s）。为了能够将重构委托为合理的部分而不会相互冲突，我们希望“映射” tagx 调用。

是否有一种简单的方法或工具可以遍历 jspx/tagx 文件并列出它们调用的 tagx（不仅是库，还包括特定的 tagx）？

例如：

create.jspx 在其主体中调用：

*   c:如果
*   形式：创建
*   形式：依赖
*   myowntaglib1:myowntag1
*   myowntaglibN:myowntagN
*   ETC

应用程序列出了这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:10:54.890

最简单的方法是编写简单的 java 程序，递归地遍历目录搜索 jspx 文件，并使用 XML Parser，即。SAX 解析器监听

XMLStreamConstants.START_ELEMENT

然后显示

xmlReader.getName().getLocalPart();

示例代码：

```
 XMLInputFactory xmlFactory = XMLInputFactory.newInstance();
            List<TercCode> tercCodeList = new ArrayList<TercCode>();

            try {
                XMLStreamReader xmlReader = xmlFactory.createXMLStreamReader(fname, stream);

                while (xmlReader.hasNext()) {
                    // returns the event type
                    int eventType = xmlReader.next();

                    // returns event type for reference
                    if (xmlReader.getEventType() == XMLStreamConstants.START_ELEMENT){
System.out.println(xmlReader.getName().getLocalPart());
}
} catch (XMLStreamException e) {
        e.printStackTrace();
    } 
```

对于 fname 文件，流应该是 FileInputStream。

您可以将它们放入 HashMap 并在解析所有文件后显示它们，而不是显示标签名称，这样您就不会得到重复项。

# java - “线程中的异常”main“java.lang.ArrayIndexOutOfBoundsException：178”错误，不知道为什么

> ID：16152087
> 
> 赞同：0
> 
> 时间：2013-04-22T16:30:39.067
> 
> 标签：java, arrays, runtime-error

我正在使用两个数组绘制字母“S”。第一个数组用# 填充（字母所在的任何地方都会有一个空格）。第二个数组是每个空间的位置。

该代码对我来说看起来不错，但我遇到了一个不熟悉的运行时错误：线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 178 at Letter.main(Letter.java:20)。这是我的代码/任何关于为什么这不起作用的输入将不胜感激。

```
public class Letter {
   public static void main (String [] args) {
   char [] array = new char [150];
       for (int index = 0; index < array.length; index ++) 
        {
          array [index] = '#';
        }
    int [] indexNumbers = {0,1,2,3,4,5,6,7,8,9,10,20,30,40,50,
    60,70,71,72,73,74,75,76,77,78,79,89,99,109,119,129,139,140,
    141,142,143,144,145,146,147,178,149};
       for (int i = 0; i < indexNumbers.length; i++) 
        {
           array [indexNumbers[i]] = ' ';
        }
        for (int index = 0; index < array.length; index ++)
       {
           if (index % 10 == 0 && index > 0) 
             System.out.println();
          System.out.print (array[index]);
        }
   }
} 
```

编辑：非常感谢大家。多么可笑的错误！干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:33:49.533

你有一个错字`int [] indexNumbers`。

**178**应该是**148**。

您得到的异常信息**非常**丰富：

> java.lang.ArrayIndexOutOfBoundsException：**178**

如果还是看不懂，使用调试器对你有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:37:04.720

您的 IndexNumber 为 178，但您的“数组”仅达到 149...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:34:34.020

将数组中的 178 更改为 148 ;-)

# javascript - 如何使用键盘上的键“c”制作键盘快捷键以调用函数

> ID：16152090
> 
> 赞同：0
> 
> 时间：2013-04-22T16:30:47.263
> 
> 标签：javascript, jquery, html, html5-canvas

我想知道是否可以从键盘键调用 jquery 函数。

假设我想清除文本框值，如果用户从她的键盘上按“c”键。

现在我正在调用一个函数 onclick 事件。如果用户按下键盘上的“c”键，我想调用相同的函数

```
 $(".clear").click(function()
        { 
            $('#from_amount').val(''); 
            $('#to_amount').val(''); 
            $('.clear').hide(); 
        }); 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:33:32.190

使用[按键](http://api.jquery.com/keypress/)事件来处理这个。

一个可能的问题是，您将无法按`c`文档中的任何位置，因此您可能希望支持诸如`ctrl + c`. 或者在输入字段中按下键时不想这样做

```
<script>
    $(function(){
        $(document).keypress(function(e){
            if(e.which == 99){
                    $('#from_amount').val(''); 
                    $('#to_amount').val(''); 
                    $('.clear').hide(); 
            }
        })
    })
</script> 
```

忽略输入字段中的按键

```
<script>
    $(function(){
        $(document).keypress(function(e){
            if(e.which==99 && !$(e.target).is(':input')){
                console.log('clear')
            }
        })
    })
</script> 
```

# c# - C# 代码设计：1 个库，2 个使用它的项目（但一个是只读的）

> ID：16152091
> 
> 赞同：2
> 
> 时间：2013-04-22T16:30:47.637
> 
> 标签：c#, .net, class

想象一下，有 3 个项目。一个库和 2 个可执行文件。

这两个程序都使用该库。项目 1，在其中创建许多类实例，并使用序列化程序保存它们。项目 2，加载它们，但永远不要对它们进行任何更改。

因此，对于项目 2，它应该是只读的，但项目 1 应该拥有对它的完全访问权限。我该如何设计？

可以说，图书馆中有这个类：

```
public string Name { get; private set;} 
public int Age { get; private set;}

public Person(string Name, int Age)
{
   this.Name = Name;
   this.Age = Age;
} 
```

这对于项目 2 来说是完美的，后者将其用作只读文件。

但是对于项目 1 来说非常烦人，因为只要它只更改类中的一个属性，就必须创建一个全新的实例。拥有 2 个属性时并不烦人，但拥有 10 个属性时非常烦人。当这些值为 const 时，项目 2 甚至会很高兴。

设计它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:35:54.927

接口是做这样的事情的方式。

```
public IPerson
{
    string Name { get; }
    int Age { get; }
} 
```

在项目 1 中：

```
public class Person : IPerson
{
    public string Name { get; set;} 
    public int Age { get; set;}

    public Person(string name, int age)
    {
       this.Name = name;
       this.Age = age;
    }
} 
```

在项目 2 中：

```
public class Person : IPerson
{
    public readonly string _name;
    public string Name { get { return _name; } } 

    private readonly int _age;
    public int Age { get { return _age; } }

    public Person(string name, int age)
    {
       this._name = name;
       this._age = age;
    }
} 
```

请注意，真正的不可变类使用只读字段而不是私有设置器。
私有 setter 允许实例在创建后修改其状态，因此它不是真正不可变的实例。
而只有在构造函数中才能设置一个 reaonly 字段。

然后您可以通过扩展共享相同的方法：

```
public static class PersonExtensions
{
    public static string WhoAreYou(this IPerson person)
    {
        return "My name is " + person.Name + " and I'm " + person.Age + " years old.";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:38:25.703

条件编译可以做到这一点，只需在 Visual Studio 中创建新的构建配置并使用条件编译符号，然后包装所有可写语句，以便它们使用一种配置而不是另一种配置进行编译，例如：

```
public string Name { 
    get; 
#if WriteSupport
    private set;
#endif
} 
public int Age { 
    get; 
#if WriteSupport
    private set;
#endif
}

public Person(string Name, int Age)
{
   this.Name = Name;
   this.Age = Age;
} 
```

# java - char[] 中的“长度”是多少？

> ID：16152093
> 
> 赞同：4
> 
> 时间：2013-04-22T16:31:03.913
> 
> 标签：java

```
char[] name = "VIKKYHACKS".toCharArray();
System.out.println(name.length); 
```

在这个程序中，什么是“长度”，如果是，`(new String("VIKKYHACKS")).length()`那么长度就是一种方法。但是 char[] 是一种数据类型，其中不能包含字段或方法。该程序的第二行如何工作？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T16:35:14.387

char[] 不是原始数据类型。它是一个对象，它有一个公共字段“长度”。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

这是一个好的开始。

因为数组是对象，所以它们具有所有其他项，例如 equals() 和 hashCode() 方法。（以及所有的处理方式，如 notify()、wait() 等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:35:19.567

数组是 Java 中的对象。根据 JLS，[第 10.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.3)是`length`一个“`final`实例变量”，它给出了数组的长度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T16:37:57.067

An array is a container object that holds a fixed number of values of a single type. The length of an array is established when the array is created. After creation, its length is fixed.You can use the built-in length property to determine the size of any array. See also: [http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T16:42:04.587

首先你有一个字符串“VIKKYHACKS”。然后你把它变成一个数组，如下

```
char[] name = "VIKKYHACKS".toCharArray(); 
```

" *char[] name =* " 部分，将我们的 char 数组分配给变量名。其类型为 char 数组（*char[]*）

数组有一个名为 length 的变量，可以使用 .length 访问。在第二行中使用。

```
name.length 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T16:36:19.787

`length`是 Array 类的一个`public final`字段。它的值在创建数组时初始化。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T16:35:29.437

每个数组都有“长度”变量实例，其中包含数组的大小（正在谈论 java :)）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-22T16:40:23.893

因为 name 是一个字符数组，并且数组具有称为 length 的属性，它可以获取数组的长度。在字符串的情况下，length() 是一种获取字符串长度的方法。

# php - 在 Wordpress 管理页面视图中定义一个 php 变量

> ID：16152096
> 
> 赞同：0
> 
> 时间：2013-04-22T16:31:11.033
> 
> 标签：php, wordpress, shortcode

我创建了一个 wordpress 模板，其中包含以下代码片段：

```
<?php the_content(); ?>    
<?php
$location ="";
?> 
```

在 wordpress 管理员中，我想创建一个页面，并在页面编辑器中定义变量 $location。唯一的麻烦是我无法将 PHP 代码放入 edtior 并且 php-exec-plugin 无法正常工作。我需要这样做的原因是，取决于位置参数是什么，这会影响页面中的其他内容。（但这必须通过 wordpress 管理员控制。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:10:13.360

为什么不使用[自定义字段](http://codex.wordpress.org/Custom_Fields)？在帖子编辑器中，添加一个字段，例如`scott_location`和一个值。在您的模板中，使用如下值：

```
$loc = get_post_meta( get_the_ID(), 'scott_location', true );
if( $loc == 'atlantis' ){
    //do stuff
} 
```

# haskell - Haskell 输入输出

> ID：16152103
> 
> 赞同：0
> 
> 时间：2013-04-22T16:31:30.660
> 
> 标签：haskell, input, io, output

是否可以使用 Haskell 的输入和输出来捕获用户输入的数据并将其存储到变量中？

例如，如果用户被问到一个问题：

输入您的名字：Ben，然后名字 = Ben，输入您的姓氏：Davies，然后姓氏 = Davies

最后是连接两个变量的打印语句，即。名字++姓氏=本戴维斯？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:35:36.133

是的，有可能。

```
main = do
   putStrLn "Enter your first name"
   firstName <- getLine
   putStrLn "Enter your last name"
   lastName <- getLine
   putStrLn $ "Your full name is " ++ firstName ++ " " ++ lastName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:34:45.943

是的，这很容易做到。看[这个例子](http://book.realworldhaskell.org/read/io.html)

# visual-studio-2010 - WinRT 与 VS2010 在 Win8 上？

> ID：16152105
> 
> 赞同：0
> 
> 时间：2013-04-22T16:31:36.157
> 
> 标签：visual-studio-2010, html, windows-8, winrt-xaml

使用 VS2010 Pro 开发 WinRT 应用程序在多大程度上是可行和合法的？

一方面，我认为使用 VS2010 Pro 创建 HTML5/CSS/JavaScript WinRT 应用程序*应该是完全可能且合法的，因为您**可能*可以使用 Win 8 记事本来这样做。另一方面，我认为通过 VS2010 Pro 创建 C# WinRT 应用程序可能很困难并且可能是非法的，因为这样做可能需要用户规避 VS2010 Pro 软件的有意限制。

在过去，用户只需购买一个独立的编译器，她/他就可以自由地将其链接到她/他选择的任何库。通过这种方式，她/他不必在任何时候想要更新版本的 MFC 或 *.NET 时升级她/他的编译器。这些天来，IDE 似乎与编译器结合，所以我不确定是否允许用户使用较旧的 IDE（例如 VS2010）来链接像 WinRT 中提供的较新的库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:39:45.567

见[这里](http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx)。

> 您可以使用 Windows SDK 以及您选择的开发环境来编写 Windows 应用商店应用程序（仅在 Windows 8 上）...

所以这显然是合法的。我还没有测试过，但我猜你可能可以在 VS 2010 中做代码方面的事情，但是 VS 2010 没有设置为做 Windows Store UI，所以 xaml、html5 等可能不会工作.

简单地使用 Visual Studio 2012 express 可能要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:38:43.963

> 使用 VS2010 Pro 开发 WinRT 应用程序在多大程度上是可行和合法的？

它不是（直接）。API 和打包工具在 VS 2010 中将不可用。

虽然您可以自己执行此操作，但安装[Visual Studio 2012 Express for Windows 8](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-8)并使用它似乎要简单得多。

> 这些天来，IDE 似乎与编译器结合，所以我不确定是否允许用户使用较旧的 IDE（例如 VS2010）来链接像 WinRT 中提供的较新的库

它不仅仅是更新的库 - 还有一个全新的运行时，并且需要更改语言才能使用它。

# wpf - 如何更改 WPF 中路径的数据？

> ID：16152106
> 
> 赞同：0
> 
> 时间：2013-04-22T16:31:37.363
> 
> 标签：wpf, silverlight, path, visualstatemanager

使用可视化状态管理器，如何更改路径的数据。我已通过 Silverlight 中的 ObjectAnimationUsingKeyFrames 对其进行了更改，但在 WPF 中无法使用相同的内容。下面我得到一个错误，找不到目标属性“数据”..

对此有任何想法吗？

```
 <Storyboard BeginTime="0">
     <ObjectAnimationUsingKeyFrames BeginTime="0"
                                    Duration="1"
                                    Storyboard.TargetName="path"
                                    Storyboard.TargetProperty="Data">
           <DiscreteObjectKeyFrame KeyTime="0" Value="M2.1299944,9.9798575L55.945994,9.9798575 35.197562,34.081179 35.197562,62.672859 23.428433,55.942383 23.428433,33.52121z M1.3001332,0L56.635813,0C57.355887,0,57.935946,0.5891428,57.935946,1.3080959L57.935946,2.8258877C57.935946,3.5448422,57.355887,4.133985,56.635813,4.133985L1.3001332,4.133985C0.58005941,4.133985,-2.3841858E-07,3.5448422,0,2.8258877L0,1.3080959C-2.3841858E-07,0.5891428,0.58005941,0,1.3001332,0z" />
      </ObjectAnimationUsingKeyFrames>
 </Storyboard> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:34:46.077

你必须这样写：

```
<ObjectAnimationUsingKeyFrames Storyboard.TargetName="path"
                               Storyboard.TargetProperty="Data">
    <DiscreteObjectKeyFrame KeyTime="0">
        <DiscreteObjectKeyFrame.Value>
            <Geometry>M2.1299944,9.9798575L55.945994,9.9798575 35.197562,34.081179 35.197562,62.672859 23.428433,55.942383 23.428433,33.52121z M1.3001332,0L56.635813,0C57.355887,0,57.935946,0.5891428,57.935946,1.3080959L57.935946,2.8258877C57.935946,3.5448422,57.355887,4.133985,56.635813,4.133985L1.3001332,4.133985C0.58005941,4.133985,-2.3841858E-07,3.5448422,0,2.8258877L0,1.3080959C-2.3841858E-07,0.5891428,0.58005941,0,1.3001332,0z</Geometry>
        </DiscreteObjectKeyFrame.Value>
    </DiscreteObjectKeyFrame>
</ObjectAnimationUsingKeyFrames> 
```

# core-animation - 如何为包含子视图的视图设置动画

> ID：16152107
> 
> 赞同：0
> 
> 时间：2013-04-22T16:31:46.307
> 
> 标签：core-animation, xcode4.5, uiviewanimation, addsubview

我仍然是 xcode 的初学者。这是我的问题..我有一个以编程方式制作的滚动视图，其中有一个以编程方式制作的uilabel。我已将 ssrollview 放置在视图控制器的边缘，使其不可见。我想动画它滑动并在按下按钮时出现在视图控制器中。我该怎么做呢？当我只为滚动视图设置动画时，它工作得很好，但是当 uilabel 放置在滚动视图中时，我无法为滚动视图设置动画。这是我使用的。以下块来自按钮操作。[注意：我使用了quartzcore框架]

```
 -(IBAction)slideback:(id)sender 
```

{

```
viol=[[UIScrollView alloc] initWithFrame:CGRectMake(0, 44.8, 320, 420)];
viol.contentSize=CGSizeMake(320, 900);
viol.showsVerticalScrollIndicator=YES;
viol.backgroundColor=[UIColor grayColor];
    viol.delegate=self;

CATransition *animation = [CATransition animation];

[animation setDuration:1];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromRight];
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

[[viol layer] addAnimation:animation forKey:@"SlideView"];

l1=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 700)];
l1.backgroundColor=[UIColor redColor];
l1.font=[UIFont boldSystemFontOfSize:16];
[l1 setNumberOfLines:0];
[l1 sizeToFit];
[viol addSubview:l1];

[self.view addSubview:viol]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:53:17.313

代码很好。一旦你将文本设置为 UILabel，它就会起作用，你已经使用过 `[l1 sizeToFit];`

sizeToFit 调整视图大小并移动视图，使其包含其子视图。由于您在 UILabel 中没有文本，因此其宽度和高度将为 (0,0)

```
-(IBAction)slideback:(id)sender {
  viol=[[UIScrollView alloc] initWithFrame:CGRectMake(0, 44.8, 320, 420)];
viol.contentSize=CGSizeMake(320, 900);
viol.showsVerticalScrollIndicator=YES;
viol.backgroundColor=[UIColor grayColor];
viol.delegate=self;

[self.view addSubview:viol];

l1=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 700)];
l1.backgroundColor=[UIColor redColor];
l1.font=[UIFont boldSystemFontOfSize:16];
[l1 setNumberOfLines:0];
//    [l1 sizeToFit];
[viol addSubview:l1];

CATransition *animation = [CATransition animation];
[animation setDuration:2];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromRight];
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionDefault]];

[[l1 layer] addAnimation:animation forKey:@"SlideView"];

} 
```

# css - 为什么 CSS 不能让元素保持宽高比

> ID：16152110
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:31:56.223
> 
> 标签：css, syntax, scaling

所以，这可能是愚蠢的，但在我看来，CSS 将受益于执行类似以下操作的能力：

```
.some-element {
    width:100%;
    height:50% of width;
} 
```

但是属性不能引用其他属性或变量。这不是一个非常常见的用例，但它经常发生，我想知道为什么不存在像基于比率的高度这样简单的东西。像这样的元素`img`已经这样做了，但其他元素却不能。

**编辑**（尝试澄清我要找出的内容）

CSS作为一种语言是否有一些东西阻止它具有这样的语法，或者只是因为没有添加这个特性而出现这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:34:20.283

您可以[使用图像](http://jsfiddle.net/zMa7Q/1/)使 div 遵循相同的规则：

```
<div>
    <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" />
</div> 
```

```
div img {
    width: 100%;
    display: block;
}

div {
    background-color: red;
    width: 250px;
} 
```

在那个例子中，div 是正方形的

# c++ - 是否可以从超类实现中调用子类虚函数？

> ID：16152113
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:31:59.160
> 
> 标签：c++, polymorphism

```
#include <iostream>

using namespace std;

class Parent
{
public:
    Parent() {}
    virtual void foo() { cout << "My favorite song is:"; bar(); }
    virtual void bar() {}
};

class Child : public Parent
{
public:
    Child() : Parent() {}
    virtual void bar() { cout << "Singing in the Rain"; }
    void baz() { Parent::foo(); }
};

int main()
{
      Child().baz(); // Outputs "My favorite song is: Singing in the Rain"
      return 0;
} 
```

答案是肯定的。上面的代码按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:35:07.503

> 是否可以从超类实现中调用子类虚函数？

这当然是可能的。但是您需要实际建立这种继承关系。例如：

```
class Child : public Parent
//          ^^^^^^^^
//          For instance...
{
public: // Make at least baz() accessible from the outside
    // ...
}; // <== And don't forget the semicolon here 
```

如果必须通过以下方式调用基类中的成员函数，您还需要为它们提供适当的可访问性`Child`：

```
class Parent
{
public: // <== For instance, you could make the member functions public
    virtual void foo() { cout << "My favorite song is:"; bar(); }
    virtual void bar() {}
}; // <== Do not forget this 
```

有关完整示例，请参阅此[**现场演示**](http://ideone.com/McMH7Z)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:46:12.953

> 是否可以从超类实现中调用子类虚函数？

是的，但是在构造函数和析构函数中执行此操作时要小心，因为对象的类型会随着不同的构造函数/析构函数的完成而演变。特别是在`Parent`构造函数/析构函数的执行过程中，对象`Parent`的类型与被构造的整个对象的类型无关。

代码中有一些异味（除了编译器将捕获的明显语法错误和缺乏继承）。例如，`foo`是一个虚函数，但在实现中，`Child::baz`您显式调用了该覆盖（即禁用动态调度），这可能是有意的或无意的（您可以调用`foo()`）。

# eclipse - 启动黑莓模拟器时出错

> ID：16152118
> 
> 赞同：1
> 
> 时间：2013-04-22T16:32:20.350
> 
> 标签：eclipse, jvm, blackberry-simulator, blackberry-eclipse-plugin

自 Java 更新以来，我在尝试运行 BlackBerry 模拟器时开始收到以下消息。有谁知道如何解决这个问题？

> 打包项目 xxxx
> C:\Program Files\Eclipse\plugins\net.rim.ejde.componentpack5.0.0_5.0.0.36\components\bin\rapc.exe 参数
> I/O 错误：无法运行程序“C:\Program” : CreateProcess error=2, 系统找不到文件指定
> 打包项目xxx失败（耗时0.797秒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T08:56:23.273

自从我在我的系统上升级了 Java 之后，我就得到了同样的结果。

我可以通过将我的 eclipse 安装从“C:/Program Files/eclipse”移动到 D:/eclipse

# python - 摆脱列表中仅包含空格的一些元素

> ID：16152125
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:32:47.040
> 
> 标签：python, list

`[' ',' ',' ',' ', '12 21','12 34']` 我有一个这样的列表，其中前几个元素是任意数量的空白。如何删除仅包含空格的元素，使列表变为`['12 21', '12 34']` 列表比这大得多我刚刚将其缩小，并且仅包含空格的元素数量不是固定数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:34:15.033

使用`str.strip()`和一个简单的列表理解：

```
In [31]: lis=[' ',' ',' ',' ', '12 21','12 34']

In [32]: [x for x in lis if x.strip()]
Out[32]: ['12 21', '12 34'] 
```

或使用`filter()`：

```
In [37]: filter(str.strip,lis)
Out[37]: ['12 21', '12 34'] 
```

这有效，因为对于空字符串：

```
In [35]: bool(" ".strip())
Out[35]: False 
```

**帮助（str.strip）**：

```
In [36]: str.strip?
Type:       method_descriptor
String Form:<method 'strip' of 'str' objects>
Namespace:  Python builtin
Docstring:
S.strip([chars]) -> string or unicode

Return a copy of the string S with leading and trailing
whitespace removed.
If chars is given and not None, remove characters in chars instead.
If chars is unicode, S will be converted to unicode before stripping 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T16:36:10.110

如果字符串完全是空白字符，该[`str.isspace()`](http://docs.python.org/2/library/stdtypes.html#str.isspace)方法将返回，因此您可以使用以下内容：`True`

```
lst = [x for x in lst if not x.isspace()] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T16:41:05.557

由于这是一个大列表，您可能还需要考虑使用`itertools`，这样您就可以忽略只有空格的项目，而不是创建一个新列表：

```
>>> from itertools import ifilterfalse
>>> l = [' ',' ',' ',' ', '12 21','12 34']
>>> for item in ifilterfalse(str.isspace, l):
...     print item
... 
12 21
12 34 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:44:47.620

> 如何删除仅包含空格的元素，以便列表变为`['12 21', '12 34']`

鉴于空白元素总是出现在列表的开头，那么......

如果您需要就地修改列表，最佳解决方案将是这样的......

```
>>> l = [' ', ' ', ' ', ' ', '12 21','12 34']
>>> while l[0].isspace(): del l[0]
>>> print l
['12 21', '12 34'] 
```

...或者如果您只想遍历非空白元素，那么[`itertools.dropwhile()`](http://docs.python.org/2/library/itertools.html#itertools.dropwhile)似乎是最有效的方法...

```
>>> import itertools
>>> l = [' ', ' ', ' ', ' ', '12 21','12 34']
>>> for i in itertools.dropwhile(str.isspace, l): print i
12 21
12 34 
```

所有其他解决方案都将创建列表的副本和/或检查每个元素，这是不必要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T18:17:18.183

这是执行此操作的“功能”方式。

```
In [10]: a = [' ',' ',' ','12 24', '12 31']
In [11]: filter(str.strip, a)
Out[11]: ['12 24', '12 31'] 
```

这是对 的帮助`filter`。

> 关于内置模块**内置**函数过滤器的帮助：
> 
> filter(...) filter(function or None, sequence) -> list, tuple, or string
> 
> 返回那些 function(item) 为真的序列项。如果 function 为 None，则返回为 true 的项目。如果序列是元组或字符串，则返回相同的类型，否则返回列表。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-22T16:45:21.160

试试这个，

```
a=['','',1,2,3]
b=[x for x in a if x <> ''] 
```

# javascript - 存在无效搜索时将特定搜索错误添加到表中

> ID：16152126
> 
> 赞同：0
> 
> 时间：2013-04-22T16:32:49.807
> 
> 标签：javascript, jquery

当存在无效搜索时，我的程序从数据库中获取标签并将其输入到 var 中：

```
searchError.add(ss.getLabel("UASJSNSER", request)); 
```

当用户搜索某物时，表格中会填满所有可能的结果。当用户进行无效搜索时，我需要用标签填充表格而不是左岸。

```
$('#SearchResults').isEmpty(function(){
    searchError.add(ss.getLabel("UASEXFERR", request));
    ('#SearchResults').append(searchError);
} 
```

SearchResults 是表名。

当用户搜索时，搜索会检查数据库以查看用户搜索的内容是否实际存在于数据库中，如果数据库中没有任何内容我需要显示唯一错误。因此，如果有人搜索无效国家/地区，那么我需要将国家/地区错误显示在表格中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:35:02.833

添加以下内容作为获取搜索结果的回调：

```
$('#SearchResults:empty').append('<p>No results.</p>'); 
```

# asp.net-mvc-4 - 让 Ninject 解析 ToMethod 绑定

> ID：16152134
> 
> 赞同：1
> 
> 时间：2013-04-22T16:33:11.963
> 
> 标签：asp.net-mvc-4, dependency-injection, ninject

我已经创建了一个 MainFactory，它将解析我的类的所有依赖项，但我想使用 Ninject 以使其自动解析构造函数参数。

所以，我正在尝试将接口绑定到我工厂的方法，就像这样

```
kernel.Bind<ILoggerContainer>().ToMethod(m => MainFactory.CreateLoggerContainer()); 
```

但是，当我绑定依赖于 ILoggerContainer 的东西时，我需要指定方法来像这样解析其他容器

```
kernel.Bind<IUsersContainer>().ToMethod(m => MainFactory.CreateUsersServiceContainer(kernel.Get<ILoggerContainer>())); 
```

现在我确信有更好的方法，特别是因为 Ninject 的主要目标是自动解决这些依赖关系。

**编辑：** MainFactory 位于一个单独的项目中，它将包含所有依赖项，因此，如果依赖项发生更改，我只需要更新其 DLL。

使用ninject，以便我可以将构造函数设置为将接口的实现作为参数，并且它会自动设置，

主要问题是我怎样才能做到这一点

```
kernel.Bind<IUsersContainer>().ToMethod(m => MainFactory.CreateUsersServiceContainer(kernel.Get<ILoggerContainer>())); 
```

变成这样的东西

```
kernel.Bind<IUsersContainer>().ToMethod(m => MainFactory.CreateUsersServiceContainer()); 
```

注意 CreateUsersServiceContainer 的参数已被删除，我假设 Ninject 可以用正确的值填充其参数（已经绑定在 Ninject 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:33:15.673

我不太确定你的问题是什么，但看起来你正在尝试做的是使用你的`MainFactory`类来构建所有其他类，但也使用 Ninject 来构建“二级”依赖项。

对我来说，这似乎是一种非常奇怪的方法。`MainFactory`编写顶级对象是否有特定的原因？这将表明一个设计问题，其中一个“上帝对象”用于做很多事情。`MainFactory`每次类需要新的依赖项时，您还必须更改 Ninject 绑定和方法，这首先破坏了使用依赖项注入框架的意义。

您是否可以`MainFactory`用适当的 Ninject 绑定替换，如果它们在运行时需要某些东西，也许使用 Ninject 提供程序/工厂来构建对象？例如，如果你`MainFactory`有这样的事情：

```
public class MainFactory
{
    public static IFoo CreateFoo(ILogger log)
    {
        return new Foo(log);
    }
}

IFoo foo = MainFactory.CreateFoo(kernel.Get<ILogger>()); 
```

您可以将其替换为：

```
kernel.Bind<ILogger>().To<FileLogger>();
kernel.Bind<IFoo>().To<Foo>();
IFoo foo = kernel.Get<IFoo>(); 
```

这是一种非常标准的 Ninject 方法。如果您需要在运行时提供值，请查看[Ninject Factory Extension](https://github.com/ninject/ninject.extensions.factory/wiki)以执行以下操作：

```
public class Foo
{
    public Foo(string runtimeArg) { ... }
}

public interface FooFactory
{
    IFoo CreateFoo(string runtimeArg);
}

kernel.Bind<IFoo>().To<Foo>();
kernel.Bind<IFooFactory>().ToFactory();
IFooFactory factory = kernel.Get<IFooFactory>();
IFoo foo = factory.CreateFoo("my runtime value"); 
```

# php - Mysql查询脚本很奇怪

> ID：16152135
> 
> 赞同：0
> 
> 时间：2013-04-22T16:33:16.790
> 
> 标签：php, mysql, database, mysqli, crud

首先对不起我的英语不太好，

我只是想知道一些我不知道的事情，这对我来说很奇怪，例如：我的 mysql 数据库中有 2 个表，假设第一个表名为“一个”，第二个是“两个”，如果我想从表“一个”使用 CRUD PHP 脚本，我不需要使用反引号 --> ` <-- 标记，我不知道如何用英文调用它，我只是使用，例如：

```
mysql_query("SELECT * FROM one WHERE id='1'"); 
```

但我不知道为什么，如果我想对表“Two”做同样的事情，我必须使用 --> ` <-- 标记，如果我不使用它就不起作用，如果我使用它它就起作用：

```
mysql_query("SELECT * FROM `two` WHERE `id`='1'"); 
```

也许有人知道这一点，所以我不会再想它是否奇怪了：D

谢谢，我希望你们能理解我的语言

关于永基·奥古斯丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:39:21.183

您的`two`表很可能以某些[mysql 保留字](https://dev.mysql.com/doc/refman/4.1/en/reserved-words.html)命名（或名称包含一些非字母数字符号），因此需要额外的格式

# c# - 如何从播放设备录制声音并在录音设备上重现？

> ID：16152138
> 
> 赞同：1
> 
> 时间：2013-04-22T16:33:24.923
> 
> 标签：c#, naudio

我想从我的扬声器中捕捉声音，并`Line 1`使用`NAudio`或其他一些 API 在我的录音设备中播放它们。

我怎样才能做到这一点？

我可以列出`WaveIn`和`WaveOut`设备

```
public void ListDevices()
{
    Console.WriteLine(" WaveIn devices ");

    int waveInDevices = WaveInEvent.DeviceCount;
    for (int i = 0; i < waveInDevices; i++)
    {
        WaveInCapabilities deviceInfo = WaveInEvent.GetCapabilities(i);
        Console.WriteLine("Device {0}: {1}, {2} channels", i, deviceInfo.ProductName, deviceInfo.Channels);
    }

    Console.WriteLine(" WaveOut devices ");

    int waveOutDevices = WaveOut.DeviceCount;
    for (int i = 0; i < waveOutDevices; i++)
    {
        WaveOutCapabilities deviceInfo = WaveOut.GetCapabilities(i);
        Console.WriteLine("Device {0}: {1}, {2} channels", i, deviceInfo.ProductName, deviceInfo.Channels);
    }
} 
```

但它们与我想要的完全相反。我可以用麦克风录音并用扬声器收听，但我想做相反的事情。如何？

# c++ - '..' 类型的参数与 '..' C++ 不匹配

> ID：16152140
> 
> 赞同：2
> 
> 时间：2013-04-22T16:33:30.183
> 
> 标签：c++, eclipse, types, arguments

eclipse 中的 C++ 给出以下错误，我不知道为什么：..\BakeryC++\src\controller\controller.cpp:227:20: error: argument of type 'std::string (Repository::)() const {aka std::basic_string (Repository::)()const}' 不匹配 'std::string {aka std::basic_string}'

我的函数头如下所示：

```
virtual string getAsText(Product* p) = 0; 
```

它在其他模块中继承，但我调用它的函数只看到这个标题。该函数如下所示：

```
string Controller::toString() const{
    return rep->toString;
} 
```

可以肯定的是，这是原始的 toString() 函数：

```
string IMRepository::toString() const
{
    string str = "";
    for (int i = 0; i < this->getSize(); i++)
    {
        Product* p = this->ProductList.get(i);
        if (p == NULL)
            continue;

        string name(p->getName());
        string supplier(p->getSupplier());
        char quantity[3];
        sprintf(quantity, "%d", p->getQuantity());
        string sq(quantity);
        str+=name+", "+supplier+", "+sq+"\n";
    }
    return str;
} 
```

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:35:36.903

这是该错误中的重要信息。

```
std::basic_string (Repository::)() const does not match std::string 
```

您返回的是*函数指针*，而不是*函数调用的结果*。

改变这个

```
return rep->toString; 
```

对此。

```
return rep->toString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T16:34:51.050

`getAsText``const`如果你从一个函数中调用它应该是`const`，虽然我没有看到你在任何地方使用它，我想你实际上是这样做的（或者你的意思是`toString`）。

此外，您返回的是`toString`函数指针，而不是调用的结果。您需要在`Controller::toString()`.

# html - 更改组合框样式

> ID：16152144
> 
> 赞同：2
> 
> 时间：2013-04-22T16:33:37.220
> 
> 标签：html, css

我想更改我尝试使用此代码的 cmbobox 设计，它适用于 chrome，但不适用于 Opera 和 firefox HTML 代码：

```
<div class="styled-select">
   <select>
      <option>Here is the first option</option>
      <option>The second option</option>
   </select>
</div> 
```

CSS 代码：

```
.styled-select select {
       background: transparent;
       width: 268px;
       padding: 5px;
       font-size: 16px;

       border: 0;
       border-radius: 0;
       height: 34px;
       -webkit-appearance: none;
       -moz-appearance:none;
       appearance: none;
       }

.styled-select {
       width: 271px;
       height: 43px;
       overflow: hidden;
       background: url(img/cmbbox.png) no-repeat;
       border: 0;
       } 
```

jsFiddle：http: [//jsfiddle.net/Sz2e6/](http://jsfiddle.net/Sz2e6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:37:26.503

仅 Chrome 浏览器支持选择元素的完整 CSS 样式。[有关详细信息，请参阅此问题](https://stackoverflow.com/questions/1895476/how-to-style-a-select-dropdown-with-css-only-without-javascript)的第二个答案。

自发布该答案以来，Firefox 已经获得了对样式选择的一些支持，但并非所有样式选项都可用。

对于跨浏览器解决方案，通常的方法是隐藏选择并设置另一个元素的样式，使其*看起来*像一个选择控件。

# python - 在 GAE 开发 1.7.0 和 1.7.7 之间导入 json 失败

> ID：16152147
> 
> 赞同：0
> 
> 时间：2013-04-22T16:33:46.820
> 
> 标签：python, json, google-app-engine

刚刚将 GAE Python 开发环境从 1.7.0 更新到 1.7.7，并遇到错误：

```
ImportError: No module named json 
```

所以我创建了一个最小的测试用例，这里是 app.yap：

```
application: myapp

version: 1
api_version: 1
runtime: python27
threadsafe: true  

libraries:
- name: jinja2
  version: "2.6"

handlers:
- url: /test.*
  script: test.app
  login: required

- url: /.*
  script: routes.app
  login: required 
```

和test.py：

```
import webapp2
import json

class MainHandler(webapp2.RequestHandler):

    def get(self):
        self.response.out.write("test.py")

app = webapp2.WSGIApplication([('/test', MainHandler)],
    debug=True) 
```

切换开发环境是完全一致的——错误是在 1.7.7 而不是 1.7.0 上抛出的（在 Linux 上从终端运行开发环境）。我没有尝试将其上传到生产环境。它是在尝试从 Python 2.5 升级到 2.7 时发生的，所以可能是由于我对 2.7 不熟悉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:34:03.167

这是一个新手错误。如前所述，我从 2.5 升级到 2.7，在此期间我从导入 simplejson 转移到 json。

在2.5的开发过程中，我创建了一个名为json.py的文件，当然在升级到2.7并尝试导入json时会产生冲突，所以我重命名了那个文件。对不起，伙计们，我应该提到这一点，但如果我这样做了，我会意识到...... json.pyc 仍然徘徊！

删除 json.pyc 文件修复了它。然而，它并没有解释为什么 json.pyc 的存在影响了 1.7.7 而不是 1.7.0——两者之间的切换是完全可重复的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:37:35.260

你可以检查simplejson，就像在[这篇文章](https://stackoverflow.com/questions/712791/json-and-simplejson-module-differences-in-python)中一样，除了我认为在GAE中你从django.utils得到simplejson：

```
try: from django.utils import simplejson as json
except ImportError: import json 
```

但是[Python 2.7 运行时应该](https://developers.google.com/appengine/docs/python/python25/diff27#JSON_Version)允许`import json`. 如果上述方法有效，您可能在 2.5 上运行。

# javascript - javascript - 评估某事是否为空时，对象不是函数错误

> ID：16152151
> 
> 赞同：0
> 
> 时间：2013-04-22T16:33:53.643
> 
> 标签：javascript, null, undefined, conditional-statements, or-operator

我有以下代码：

```
console.log(callback);
if (typeof callback != "undefined" || callback != null){
  callback();
} 
```

控制台打印出来的地方：

```
null 
```

但 javascript 仍在尝试执行 callback() 函数调用。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:35:05.853

因为它应该是`&&`，即*逻辑与*：

```
if (typeof callback != "undefined" && callback != null) {
    callback();
} 
```

但我建议使用检查类型“函数”：

```
if (typeof callback === "function") {
    callback();
} 
```

甚至更短：

```
typeof callback === "function" && callback(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:39:19.643

尝试 ：

```
console.log(callback);
if (!(typeof (callback) == "undefined" || callback == null)){
  callback();
} 
```

# javascript - 如何使用 twitter bootstrap 有选择地堆叠列

> ID：16152154
> 
> 赞同：0
> 
> 时间：2013-04-22T16:33:59.797
> 
> 标签：javascript, css, twitter-bootstrap

我在这里有一个基于流体示例的模板：http: [//twitter.github.io/bootstrap/examples/fluid.html](http://twitter.github.io/bootstrap/examples/fluid.html)

我有来自这里的最新文件，唯一的自定义是颜色：http: [//twitter.github.io/bootstrap/customize.html](http://twitter.github.io/bootstrap/customize.html)

基本标记是

```
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span3">
      <div class="well sidebar-nav">
    Column 1
      </div><!--/.well -->
    </div><!--/span-->
    <div class="span9">
    Column 2
    </div><!--/span-->
  </div><!--/row-->
</div> 
```

第 2 列在移动设备上属于第 1 列，这有时是我想要的。但在某些情况下（特定页面），我希望 2 列并排保持。我的问题是如何使用相同的 js/css 文件实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:39:51.517

这是一种可能性：http: [//jsfiddle.net/panchroma/RPMMA/](http://jsfiddle.net/panchroma/RMPMA/)

您将看到列不会落在带有 class = double-col
CSS 的行上

```
@media (max-width: 767px){
.double-col.row-fluid [class*="span"] {
float: left;
width: 50%;

}
} 
```

由于这会在 767 像素及以下的视点上将每个列的宽度重置为 50%，因此这将适用于具有两列的行。对于其他组合，只需使用宽度设置即可。您可能还想改进填充和其他样式，但现在很容易。

希望这可以帮助！

# html - 无法更改标签html5中元素的背景

> ID：16152156
> 
> 赞同：0
> 
> 时间：2013-04-22T16:34:02.423
> 
> 标签：html, css, web

我多次检查我的代码。我看不出有什么问题。我可以更改除 side 标签中的新闻之外的所有内容的背景。它出什么问题了？这是css代码。我打电话给旁边的标签新闻。我的 side 标签 ID 在 html 中是正确的。在问这个问题之前，我检查了这一点。

```
*{
margin: 0px;
padding: 0px;
}

h1{
font: bold 20px Tahoma;
}

h2{
font: bold 14px Comic Sans MS;
}
header,section,footer,aside,article,nav,hgroup{
display:block;
}

body{
text-align:center; 
}

#whole_wrapper{
border:1px solid brown;
width: 1000px;
margin: 20px auto;
text-align: left;
background-color:orange;
}

#top_header{
background:beige;
padding: 20px;
}

#main_menu{
background:lightgreen;
color:blue;
}

#main_menu li{
display:inline-block;
list-style:none;
padding:5px;
font: bold 14px Tahoma;
}

#main_section{
float:left;
width:660px;
margin:30px;
}`  

#news{
float:left;
width:220px;
margin:20px 0px;
padding:30px;
background-color:red;
}

#bottom_footer{
clear:both;
text-align:center;
padding:20px;
border-top:2px solid beige;
}

article{
background-color:azure;
border: 1px solid navy;
padding:20p;
margin-bottom:15px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:38:45.760

您的 CSS 中有各种拼写错误。此外，请务必指定特定的颜色，而不是诸如`blue`or之类的声明`beige`。在这里它被清理了，没有对颜色进行编辑。

```
*{
    margin: 0px;
    padding: 0px;
}

h1{
    font: bold 20px Tahoma;
}

h2{
    font: bold 14px Comic Sans MS;
}
header, section, footer, aside, article, nav, hgroup{
    display:block;
}
body{
    text-align:center; 
}

#whole_wrapper{
    border:1px solid brown;
    width: 1000px;
    margin: 20px auto;
    text-align: left;
    background-color: orange; /* Use a specific color instead */
}
#top_header{
    background: beige; /* Use a specific color instead */
    padding: 20px;
}
#main_menu{
    background:lightgreen; /* Use a specific color instead */
    color:blue;
}
#main_menu li{
    display:inline-block;
    list-style:none;
    padding:5px;
    font: bold 14px Tahoma;
}
#main_section{
    float:left;
    width:660px;
    margin:30px;
}
#news{
    float:left;
    width:220px;
    margin:20px 0px;
    padding:30px;
    background-color:red; /* Use a specific color instead */
}
#bottom_footer{
    clear:both;
    text-align:center;
    padding:20px;
    border-top:2px solid beige; /* Use a specific color instead */
}
article{
    background-color:azure; /* Use a specific color instead */
    border: 1px solid navy; /* Use a specific color instead */
    padding:20p;
    margin-bottom:15px;
} 
```

# visual-studio - Visual Studio 2012 - 如何将多个构建操作分配给 TypeScript 文件

> ID：16152157
> 
> 赞同：4
> 
> 时间：2013-04-22T16:34:03.773
> 
> 标签：visual-studio, typescript, embedded-resource, buildaction

我正在使用 Visual Studio 2012 创建一个类库项目，该项目还将包含许多 TypeScript ( `.ts`) 文件，以及它们生成的`.js`文件`.js.map`。所有这些文件都需要作为嵌入式资源包含在程序集中，以便它们可以通过自定义的`VirtualPathProvider`.

注意：虽然只有生成的 JavaScript 文件对于生产环境是必不可少的，但`.ts`和`.js.map`文件也必须可供 Web 应用程序访问，以进行调试。

这会产生冲突，因为通常为 TypeScript 文件分配`TypeScriptCompile`构建操作，但我也需要分配它们`EmbeddedResource`。

有没有办法将多个构建操作分配给 VisualStudio 项目组件？或者，是否有另一种方法可以让 TypeScript 编译未明确标记为的文件`TypeScriptCompile`或让 Visual Studio 嵌入未标记为的文件`EmbeddedResource`？

谢谢你的建议，

蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:13:34.300

如果你有一个引用所有其他文件的 TypeScript 文件，那么它只需要具有`TypeScriptCompile`类型，因为编译器*应该*遍历所有依赖项并编译所有其余的。

因此，创建一个充当编译目标并引用所有其他文件的文件可能允许您将所有其余文件更改为`EmbeddedResource`.

# z3 - 括号意外嵌套：610

> ID：16152158
> 
> 赞同：0
> 
> 时间：2013-04-22T16:34:10.723
> 
> 标签：z3

我正在尝试将 Z3 Windows 二进制文件与输入文件一起使用，但我总是在文件的最后一行出现错误，上面写着“意外嵌套的括号：610”。请帮助

# cassandra - Cassandra 表中的多个列

> ID：16152160
> 
> 赞同：5
> 
> 时间：2013-04-22T16:34:16.913
> 
> 标签：cassandra, cql3

我想知道当表中有多个非 PK 列时会发生什么。我读过这个例子：http: [//johnsanda.blogspot.co.uk/2012/10/why-i-am-ready-to-move-to-cql-for.html](http://johnsanda.blogspot.co.uk/2012/10/why-i-am-ready-to-move-to-cql-for.html)

这表明单列：

```
CREATE TABLE raw_metrics (
schedule_id int,
time timestamp,
value double,
PRIMARY KEY (schedule_id, time)
); 
```

我们得到：

![在此处输入图像描述](https://3.bp.blogspot.com/-PIeVMTodi8U/UH48xDhMtVI/AAAAAAAAAPA/aitVqxDjJ0Y/s400/CQL+Raw+Metrics+Column+Family.png)

现在我想知道当我们有两列时会发生什么：

```
CREATE TABLE raw_metrics (
schedule_id int,
time timestamp,
value1 double,
value2 int,
PRIMARY KEY (schedule_id, time)
); 
```

我们是否会得到类似的结果：

```
row key  columns...
123      1339707619:"value1" | 1339707679:"value2" | 1339707784:"value2"
... 
```

更确切地说：

```
row key  columns...
123      1339707619:"value1":"value2" | 1339707679:"value1":"value2" | 1339707784:"value1""value2"
... 
```

等等。我想我要问的是这是否将是一个**稀疏**表，因为我一次只插入“value1”或“value2”。

在这种情况下，如果我想存储更多列（每种类型一个，例如 double、int、date 等），最好有单独的表而不是将所有内容存储在一个表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:15:41.023

这篇文章可能有助于解释创建复合键时发生的情况： [Cassandra 复合列 - 如何选择复合类型？](https://stackoverflow.com/questions/13218868/cassandra-composite-columns-how-are-compositetypes-chosen?rq=1)

因此，基本上该表将按以下方式显示：

```
row key  columns...
123      1339707619:"value1" | 1339707679:"value2" | 1339707784:"value2" 
```

另请参阅二级索引参考： [http ://wiki.apache.org/cassandra/SecondaryIndexes](http://wiki.apache.org/cassandra/SecondaryIndexes)

# r - 了解 data.table 中通过引用分配的优化消息

> ID：16152161
> 
> 赞同：6
> 
> 时间：2013-04-22T16:34:19.027
> 
> 标签：r, data.table

这是我在@sds [**here**](https://stackoverflow.com/questions/16132625/how-to-avoid-an-optimization-warning-in-data-table/16132768#16132768)回答这个问题时观察到的。

首先，让我*打开以下*的跟踪消息`data.table`：

```
options(datatable.verbose = TRUE)
dt <- data.table(a = c(rep(3, 5), rep(4, 5)), b=1:10, c=11:20, d=21:30, key="a") 
```

现在，假设一个人想要得到按 column 分组的所有列的总和`a`，那么，我们可以这样做：

```
dt.out <- dt[, lapply(.SD, sum), by = a] 
```

现在，假设我还想将属于每个组的条目数添加到`dt.out`，然后我通常通过引用分配它，如下所示：

```
dt.out[, count := dt[, .N, by=a][, N]]
# or alternatively
dt.out[, count := dt[, .N, by=a][["N"]]] 
```

在此引用分配中，`data.table`产生的消息之一是：

```
RHS for item 1 has been duplicated. Either NAMED vector or recycled list RHS. 
```

这是来自 data.table 的源目录中的文件的消息`assign.C`。我不想在这里粘贴相关的片段，因为它大约有 18 行。如有必要，只需发表评论，我将粘贴代码。`dt[, .N, by=a][["N"]]`只是给`[1] 5 5`。所以，它**不是**一个`named vector`. 而且我不明白`recycled list`RHS中的这是什么..

但如果我这样做：

```
dt.out[, `:=`(count = dt[, .N, by=a][, N])]
# or equivalently
dt.out[, `:=`(count = dt[, .N, by=a][["N"]])] 
```

然后，我收到消息：

```
Direct plonk of unnamed RHS, no copy. 
```

据我了解，RHS 在第一种情况下已被*复制*，这意味着它正在制作副本（浅/深，我不知道）。如果是这样，为什么会这样？

即使不是，为什么内部两个之间的引用分配发生变化？有任何想法吗？

提出我在写这篇文章时想到的*主要*`dt.out[, count := dt[, .N, by=a][["N"]]]`潜在问题（并且似乎已经忘记了！）：分配为“效率较低” （与第二种方式相比）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T17:03:31.720

**更新：**表达式，

```
DT[, c(..., lapply(.SD, .), ..., by=.] 
```

已在 v1.9.3 ( [FR #2722](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2722&group_id=240&atid=978) ) 的 commit #1242 中进行了内部优化。[这是来自NEWS](https://r-forge.r-project.org/scm/viewvc.php?view=rev&root=datatable&revision=1242)的条目：

> o 现在优化了表单的复杂 j 表达式`DT[, c(..., lapply(.SD, fun)), by=grp]`，只要`.SD`仅存在于表单中`lapply(.SD, fun)`。
> 
> 例如：`DT[, c(.I, lapply(.SD, sum), mean(x), lapply(.SD, log)), by=grp]`
> 优化为：`DT[, list(.I, x=sum(x), y=sum(y), ..., mean(x), log(x), log(y), ...), by=grp]`
> 
> 但`DT[, c(.SD, lapply(.SD, sum)), by=grp]`例如尚未优化。这部分解决了`FR #2722`。感谢 Sam Steingold 提交 FR。

* * *

它所说`NAMED vector`的意思是在C级别的内部R意义上；即，对象是否已被分配一个符号并被称为某物，而不是原子向量是否具有`"names"`属性。`NAMED`SEXP 结构中的值取值 0、1 或 2。R 使用它来知道它是否需要在子分配时复制。请参阅 R-ints 的第 1.1.2 节。

如果`j`in 的优化`data.table`可以处理会更好：

```
DT[, c(lapply(.SD,sum),.N), by=a] 
```

这行得通，但可能很慢。目前只优化了更简单的形式：

```
DT[, lapply(.SD,sum), by=a] 
```

* * *

要回答主要问题，是的，以下是：

```
Direct plonk of unnamed RHS, no copy. 
```

与以下相比是可取的：

```
RHS for item 1 has been duplicated. Either NAMED vector or recycled list RHS. 
```

实现这一目标的另一种方法是：

```
dt.out[, count := dt[, .N, by=a]$N] 
```

我不太确定为什么`[["N"]]`返回 a`NAM(2)`而`$N`不是。

# java - ExtJS 页面重定向

> ID：16152164
> 
> 赞同：2
> 
> 时间：2013-04-22T16:34:24.677
> 
> 标签：java, javascript, html, iframe, extjs4

这件事让我头疼了一段时间。

1.  我有一个用 ExtJS+Java EE 编写的网页（页面 A）。我想在按钮单击并显示页面 B 上创建一个新的浏览器选项卡。
2.  B 做了一些操作，做了一个完整的表单提交。
3.  此表单提交的结果必须显示在 A 中（一直打开）。

例如：

1.  在页面 A 中，我搜索我的学习管理系统中可用的测试并将其显示在网格中。
2.  当用户单击测试时，会打开一个新窗口，其中包含测试的 url（页面 B）。
3.  用户完成测试后，他单击 B 中的提交。
4.  测试结果显示在页面 A 的网格上。

最大的问题是我确实对页面 B 或其来源有很大的控制权。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T04:18:56.573

听起来你需要做一个 window.open('Whatever Page B's url is'); 当您单击网格中每行的正确链接时。

从页面 B，您可以使用 window.opener 来引用页面 A。因此，您可以通过执行以下操作来刷新页面 A：

```
window.opener.location.reload(); 
```

或者您可以从页面 B 调用您在页面 A 中定义的任何刷新类型方法，例如。window.opener.customMethod()

# java - 带回溯的数独算法不返回任何解

> ID：16152166
> 
> 赞同：0
> 
> 时间：2013-04-22T16:34:28.307
> 
> 标签：java, tail-recursion, sudoku, backtracking

我对数独算法有点卡住了，我使用回溯对其进行编码，并按照理论上的步骤进行操作，这应该可以工作，我尝试调试它，但是太难了（是的，它解决了一些数字并做了一些事情）

我贴上代码，希望你能帮帮我，我实在看不出问题出在哪里……

```
public void backtracking(int row,int col){
    if(row > 8){ 
        System.out.println("Solution Found!!"); 
        printSudoku(); 

    }
    if (m[row][col] != 0){
       next(row, col);
    }
    else {
        for(int i =1; i < n;i++) 
            if(row(row, i) && col(col, i)) {
                m[row][col] =i;
                next(row, col);
            }
        m[row][col] = 0;
    }

} 

public void next( int row, int col ) {
   if( col < 8)
       backtracking( row, col + 1 ) ;
   else
       backtracking( row+ 1, 0 ) ;
}

public boolean region(int x, int y, int numReg) {
    x = (x / 3) * 3 ;
    y = (y / 3) * 3 ;
    for( int r = 0; r < 3; r++ )
        for( int c = 0; c < 3; c++ )
        if( m[x+r][y+c] == numReg )
           return false ;

     return true ;
}

public boolean row(int x, int k){
    for(int i =0; i < 9; i++)
        if(m[x][i] == k)
            return false;
    return true;
}

public boolean col(int x, int k){
    for(int i =0; i < 9; i++)
        if(m[i][x] == k)
            return false;
    return true;
} 
```

我省略了“printSudoku”方法，只是你知道的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:36:59.587

代码似乎几乎是正确的。据我所知，您只是忘记调用 region 方法。而且我看不到变量 n 的来源。试试这个稍微修改过的回溯方法：

```
 public static void backtracking(int row, int col) {
    if (row > 8) {
        System.out.println("Solution Found!!");
        printSudoku();
        System.exit(0); //exiting after solution is found
    }
    if (m[row][col] != 0) {
        next(row, col);
    } else {
        for (int i = 1; i <= 9; i++) //replaced i < n with i<=9
            if (row(row, i) && col(col, i) && region(row, col, i)) { //calling region method too
                m[row][col] = i;
                next(row, col);
            }
        m[row][col] = 0;
    }

} 
```

# database - 规范化依赖

> ID：16152167
> 
> 赞同：13
> 
> 时间：2013-04-22T16:34:28.813
> 
> 标签：database, database-normalization, functional-dependencies

我只是想确保我以正确的方式思考它

1）完全依赖是当一个或多个主键确定另一个属性时

2）部分依赖是当一个主键确定另一个或多个属性时

3）传递依赖是当一个非关键属性决定另一个属性时

我想对了吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-04-12T10:39:12.437

这个答案直接来自我的 CS 课程，并从 Connolly 和 Begg 教科书中获得。

[![在此处输入图像描述](https://i.stack.imgur.com/XambJ.png)](https://i.stack.imgur.com/XambJ.png)

**完整的功能依赖**

识别**候选键** **（此处为 propertyNo、iDate 和 pAddress）**。这是因为这 3 个的任何组合都可以让您找到给定元组的其他属性是什么（我可以找到根据这三件事进行检查的工作人员编号，我可以找到给定这三件事的 carReg the staffNo used 等等.)。但请注意，您需要**所有这 3 个属性才能找到其他属性，而不仅仅是一个子集。** **完全依赖关系总是与取决于候选键的非候选键相关，或者取决于全部或取决于一些。**

**部分依赖**

给定这三个候选键，查看候选键。是否存在依赖于另一个的候选键的任何子集？是的，它是 pAddress。给定一个propertyNo，就可以算出该property的地址是什么了。然后查看候选键之外的内容。是否有任何这些键仅依赖于候选键的一部分，而不是所有组件？在这种情况下没有。因此，**部分依赖始终是候选键内的依赖或非候选键仅对候选键的一部分而不是所有组件的依赖**

**传递依赖**

现在，查看非候选键（staffNo、comments、iTime（检查时间）、sName、carReg）。在这些之中，有什么在功能上依赖于另一个吗？是的，它是 sName - 给定一个职员编号，您可以找出职员的姓名。但是 staffNo 在功能上依赖于 3 个候选键。所以通过传递性，propertyNo + iDate + pAddress -> staffNo -> sName，所以**sName 传递依赖于 staffNo**。**传递依赖总是与候选键之外的属性相关。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T17:09:09.867

不完全的。在您的术语中更准确会有所帮助：当您说“一个或多个主键”之类的东西时，您（大概）真的是指“主键的一个或多个列”？

仅当键包含多于一列（复合键）时，才会出现完全依赖和部分依赖之间的区别：

1）完全依赖是当需要完整的键（键的所有列）来确定另一个属性时。

2）部分依赖是当键是复合的并且键的一些但不是所有的列确定另一个属性时。（这可能仍然不止一列。）

3）传递依赖如你所说。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T17:58:21.020

*完全依赖*意味着依赖于所有有问题的属性，通常意味着*候选*键的所有属性。它不必是指定为“主”的键，因为主键在依赖理论和规范化中没有任何特殊作用。

*部分依赖*意味着依赖于这些属性的适当子集，通常意味着某个候选键的适当子集。

根据上下文，*传递依赖*可能意味着以下任何一种：

(1) A->B, B->C 形式的依赖

(2) A->B, B->C 形式的依赖关系，其中 B 不是超键

当提到（2）描述的情况时，几乎总是使用术语及物依赖，并且实际上已成为该含义的同义词，即使（1）是更正式的正确含义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-23T01:24:28.540

**部分依赖：**表中的属性仅依赖于主键的一部分，而不依赖于整个键。**（详情见此链接）** [https://www.studytonight.com/dbms/second-normal-form.php](https://www.studytonight.com/dbms/second-normal-form.php)

**传递依赖：**当一个非主属性依赖于其他非主属性而不是依赖于主属性或主键时。**（详情见此链接）** [https://www.studytonight.com/dbms/third-normal-form.php](https://www.studytonight.com/dbms/third-normal-form.php)

# javascript - 解析文本并将其存储以使用 javascript 在画布中呈现（如在控制台中）

> ID：16152172
> 
> 赞同：0
> 
> 时间：2013-04-22T16:34:34.880
> 
> 标签：javascript, html5-canvas

我有一些这样的代码：

```
// highlight text
vi.prototype.parse = function (text) {
    // some code
    this.data = data;
};
// place it on canvas
vi.prototype.render = function () {
    /* loop */
        this.ctx.clearRect(/* ... */);
        this.ctx.fillStyle = this.data[i].bg;
        this.ctx.fillRect(/* ... */);
        this.ctx.fillText(data[i].text, /* ... */);
        // ....
    /* end loop */
}; 
```

每次文本更改时，我都会解析和呈现文本。线条无法进入画布这一事实使一切变得复杂。

```
1 Some line
2 Some long line line line line line line line li
 ne line line
3 Some line 
```

用背景色和前景色解析和存储文本的最佳方法是什么？

我需要打印带有语法突出显示的文本。我有一个函数可以解析文本并以某种形式返回它，例如

```
text = "var x;";
highlightedText = vi.parse (text);
console.log (highlightedText);
>> [[  {text: "var", fg: "#dd5", bg: "#000"}, 
       {text: " ", fg: "#FFF", bg: "#000"},         
       {text: "x", fg: "#5dd", bg: "#000"}, 
       {text: ";", fg: "#FFF", bg: "#000"}]];
// Displays the text in canvas
vi.render (highlightedText); 
```

我认为这不是存储文本数据的好方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:46:08.770

**这不是经过测试的代码，但这是我的想法：**

将样式定义保留在主类中（vi？）

创建具有绘制文本所需的一切的 textSegment 对象：

*   文本。
*   文本的样式。
*   文本的宽度。

将所有 textSegments 保存在主类的数组中。

```
 this.textSegments.push({ 
        text  : text, 
        textWidth : ctx.measureText(newText).width, 
        style : style 
    }); 
```

这是代码（未经测试/不完整！）：

```
function vi(context,lineheight){

    this.ctx=context;
    this.lineHeight=lineheight;
    this.textSegments=[];
    this.x=0;
    this.y=0;

    // keep the style definitions once and reference them in your text segments
    this.styles=[];
    this.styles["normal"]=   { font:"12px Arial", bg:"#000", fg:"#fff" };
    this.styles["operator"]= { font:"12px Arial", bg:"#000", fg:"#5dd" };
    this.styles["keywordS"]= { font:"12px Arial", bg:"#000", fg:"#d55" };

}
//
// usage: myVi.addTextSegment("Hello","normal");
//
vi.prototype.addTextSegment(text,style){

    // measure the text once while you're adding it
    this.ctx.font=newStyle.font;

    // create a textSegment object 
    // that has everything needed to draw the text
    this.textSegments.push({ 
        text  : text, 
        textWidth : ctx.measureText(newText).width, 
        style : style 
    });
}
// draw the textSegment
vi.prototype.drawTextSegment(textSegment){
    var style=this.styles[textSegment.style];
    this.ctx.save();
    this.ctx.font=textSegment.style.font;
    this.ctx.fillStyle=textSegment.style.bg;
    this.ctx.rect(this.x,this.y,textSegment.textWidth,this.lineHeight);
    this.drawText(textSegment.text,this.x,this.y);
    this.ctx.restore();
    this.x+=textSegment.textWidth;
} 
```

# java - 从方法中更改变量的值会返回一个“随机”数字

> ID：16152173
> 
> 赞同：0
> 
> 时间：2013-04-22T16:34:34.707
> 
> 标签：java, methods

我正在尝试用 Java 制作一个输入处理程序。这是源代码的（片段）：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class Inputhandler{
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
public int InputInt;

public int GetInt(){    
    try{
        InputInt = br.read();
        } catch(Exception e){
            System.out.println("Input should be a number. Please try again\n");
            GetInt();
        }
    return InputInt;
    }
} 
```

我试图从第 10 行获取用户输入，然后将该输入设置为 InputInt 的值。但是，当我执行程序并调用这样的方法时：

```
Inputhandler in = new Inputhandler();
int a = in.GetInt("A question"); //I would input a number like 200
System.out.println(a); 
```

它打印出来，至少在我看来是这样，一个随机数。像 51、48、55 这样的数字。我在这里做错了什么？为什么我输入的数字没有分配给 InputInt？

我排序它与按引用传递和按值传递有关，我理解这些原则。我（想我）完全理解[这一点](https://stackoverflow.com/a/3481454/1910584)，但仍然无法解决。

请帮帮我！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:49:08.943

您`int`实际上是您输入[的字符的字节值。](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html#read%28%29)尝试

```
InputInt = Integer.valueOf(br.readLine()); 
```

反而。

# java - 我不能从文本字段数字中的数组传递

> ID：16152179
> 
> 赞同：1
> 
> 时间：2013-04-22T16:34:50.127
> 
> 标签：java

嗨，当我在面板中第一次选择时，当我按下 Start 时，我必须对数字进行抽奖，它应该为我提供一个面板，其中包含传递给构造函数面板的数字，但是当我通常显示面板时，面板中的数字`JTextField`不会出现。

当我按下按钮在返回第二个表格编号的函数处创建一个带有数字的面板时的代码我在这里放了一个 system.out 并且她通常在其构造函数下方显示它们，将表格作为参数传递。

```
if (source == start) {
   try {
     int numbers[][] = fucts.takeBulletin();
     RMIClient r=new RMIClient( numbers,1);
   }catch() {

   }
} 
```

听到的是构造函数代码

```
public RMIClient(int  [][]numbs,int a)  {
    super("!!!!!!!!!!!!!!!BINGO!!!!!!!!!!!!!!!!!!");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
    Container pane = getContentPane();
    GridLayout layout=new GridLayout(7 , 7);
    pane.setLayout(layout);
    pane.add(numB);
    pane.add(numI);
    pane.add(numN);
    pane.add(numG);
    pane.add(numO); 
    pane.add(num13);
    for (int row = 0; row < numbs.length; row++) {    
        for (int col = 0; col < numbs[row].length; col++) {
            pane.add(new JTextField(""+numbs[row][col])); <----- is nedd " "+
        }
    }
    setContentPane(pane);
    pack();  

} 
```

我不明白为什么他们不从文本字段的表格中传递值，是给我看空的文本字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:59:04.250

如果是 JApplet，尝试将构造函数的全部内容移动到 init() 方法中。

构造函数可以将 int[][] numbs 保存到实例变量中，init() 方法会看到它。

```
int[][] numbs;

public RMIClient(int[][] numbs, int a)  {
  this.numbs = numbs;
}

public void init() {
...
} 
```

# c - 为什么信号量不受来自不同线程的帖子的影响？

> ID：16152180
> 
> 赞同：2
> 
> 时间：2013-04-22T16:34:50.867
> 
> 标签：c, linux, pthreads

信号量被定义为静态变量

```
static int semaphore = -1; 
```

我正在尝试发布到这个信号量

```
sem_post(&semaphore); 
```

以这种方式创建的线程中有一个等待信号量：

```
pthread_create(&tid, NULL, start, NULL); 
```

和

```
static void *start(void *context)
{
    // ...

    sem_init(&semaphore, 0, 0);    
    sem_wait(&semaphore);

    // ...

    return NULL;
} 
```

不知何故，等待信号量不受信号量发布的影响。如果我从开始例程发布信号量，一切都很好。

问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:45:00.677

传递`int*`而不是`sem_t*`作为`sem_xxx`函数的第一个参数可能会访问超出分配区域的内存。根据 的至少一个[来源`<semaphore.h>`](https://android.googlesource.com/platform/prebuilts/gcc/linux-x86/host/x86_64-linux-glibc2.7-4.6/+/refs/tags/android-4.1.1_r4/sysroot/usr/include/bits/semaphore.h)， 的大小`sem_t`为 16 到 32 字节；`int`不足以容纳信号量的结构，可能导致未定义的行为。

你需要改变

```
static int semaphore = -1; 
```

至

```
static sem_t semaphore; 
```

修复通过分配的内存区域的访问。

此外，在启动使用信号量的线程*之前*初始化信号量通常是一个好主意。您应该将初始化调用从`start()`函数移到`main()`，或用于启动线程的任何函数。

```
sem_init(&semaphore, 0, 0); 
```

# android - 如果滑动抽屉正在打开，请敬酒？

> ID：16152182
> 
> 赞同：0
> 
> 时间：2013-04-22T16:34:53.493
> 
> 标签：android, listener, toast, slidingdrawer

嗨，我想在滑动抽屉打开时祝酒。我想知道如果slidingDrawer 正在打开，我怎么能听，然后如果是的话就烤面包。我到处寻找，但找不到问题的解决方案。希望你们中的一些人可以提供帮助:)

我在 developer.android 上找到了这个，但不知道如何使用它

```
 public void setOnDrawerCloseListener (SlidingDrawer.OnDrawerCloseListener onDrawerCloseListener) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:40:32.257

```
drawer.setOnDrawerOpenListener(new OnDrawerOpenListener() {
    @Override
    public void onDrawerOpened() {
        Toast.makeText(context, text, duration).show();
    }
}); 
```

填写`context`，`text`并`duration`根据您的需要。不过我想通知您，`SlidingDrawer`自 API 17 以来已弃用：http: [//developer.android.com/reference/android/widget/SlidingDrawer.html](http://developer.android.com/reference/android/widget/SlidingDrawer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:41:40.363

在`Activity`你有你的地方`SlidingDrawer`，你只需像这样附加监听器：

**编辑：**

添加了更多代码：

布局.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<SlidingDrawer xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/slidingDrawer1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:content="@+id/content"
    android:handle="@+id/handle" >

    <Button
        android:id="@+id/handle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Handle" />

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </LinearLayout>

</SlidingDrawer> 
```

`Activity` `onCreate`设置内容视图的方法`Activity`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout);

    SlidingDrawer mySlidingDrawer = (SlidingDrawer) findViewById(R.id.slidingDrawer1);
    mySlidingDrawer.setOnDrawerOpenListener(new OnDrawerOpenListener() {
        @Override
        public void onDrawerOpened() {
            Toast.makeText(getApplicationContext(), "SlidingDrawer opened!", Toast.LENGTH_SHORT).show();
        }
    });
} 
```

请记住，`SlidingDrawer`在 API 17 中实际上已弃用 - 不鼓励使用它。

# c# - 只读提要的第一项

> ID：16152185
> 
> 赞同：0
> 
> 时间：2013-04-22T16:35:02.787
> 
> 标签：c#, windows-phone

有没有办法简单地阅读 rss 提要的第一项而不是全部阅读？
我实际上使用`WebClient`了`DownloadStringAsync`方法，但读了所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:15:57.773

也许通过使用`HttpWebRequest`并添加 Range 标头。
但我不知道是否可以使用 Windows Phone

# javascript - jQuery 使用 ImageMapper 替换图像

> ID：16152190
> 
> 赞同：0
> 
> 时间：2013-04-22T16:35:13.007
> 
> 标签：javascript, jquery, imagemapster

我正在努力提高我对 Javascript、jQuery 和 ImageMapster 插件的理解。为了便于解释，这是我正在研究[的 jsFiddle 。](http://jsfiddle.net/bcmit/qLakz/)

在 jsFiddle 代码中，每个披头士乐队的脸在悬停时都带有红色边框。但是 HTML 还包含每个披头士乐队 ( `style="display:none"`) 的隐藏图像，当用户的鼠标移到相应披头士乐队的脸上时，我希望这些图像出现在合影上。

也就是说，当我将鼠标移到 Paul 的脸上时，应该会出现 Paul 的照片。离开保罗时，合影再次出现。越过林戈的脸，就会出现林戈的特写。坦率地说，如果合影消失而出现单张照片，或者个人照片是否叠加在合影上，对我来说并不重要——我似乎无法做到这两者。

我已经尝试了无数的东西，但是 javascript 超出了我的范围。我会很感激朝着正确的方向轻轻推动（或直接演示）。

对于那些读到这里的人，我也不明白 ALL 数据键是如何工作的：我添加了一个`all`标题，但它不会显示。我试图在鼠标悬停在集体照片上时显示该标题，但不是在任何特定的脸上（即当所有的脸都以白色突出显示时）。

我的问题是基于[这个](http://jsfiddle.net/nYkAG/)原始的 ImageMapper 演示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:54:28.787

我已经更新了你的小提琴： http: [//jsfiddle.net/qLakz/8/](http://jsfiddle.net/qLakz/8/) - 这是我添加的代码：

```
var currentPerson;
$('area').hover(
    function(){
        currentPerson = $('#just-'+$(this).data('name'));
        currentPerson.fadeIn();
    }, function(){
        currentPerson.hide();
    }
); 
```

jquery 文档页面在`.data()`这里：[http](http://api.jquery.com/data/) ://api.jquery.com/data/ - 它有大量示例，因此它应该可以帮助您更好地理解。

# mysql - sql查询只返回一行（LIKE）

> ID：16152195
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:35:21.180
> 
> 标签：mysql

```
SELECT * 
FROM customers
WHERE Firstname LIKE  'George' 
```

问题是我在表中有超过 1 行名称为 Geoge 并且查询结果仅显示一行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T16:36:43.743

您将需要包含通配符`%`以包含`George`名称中存在的行：

```
SELECT * 
FROM customers
WHERE Firstname LIKE  '%George%'; 
```

如果`George`总是出现在开头，那么您可以在末尾包含通配符：

```
SELECT * 
FROM customers
WHERE Firstname LIKE  'George%'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T16:36:30.337

您需要添加通配符`%`以匹配包含的任何值`george`

```
SELECT * 
FROM   customers
WHERE  Firstname LIKE  '%George%' 
```

*   [MySQL LIKE 运算符](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

该声明

```
WHERE  Firstname LIKE  'George' 
```

相当于

```
WHERE  Firstname =  'George' 
```

这就是为什么你只得到一个名字是的记录`george`。

**更新 1**

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/0aaef6/3)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-22T16:37:34.457

尝试

```
LOWER(Firstname) LIKE '%george%' 
```

处理部分值并避免区分大小写问题。

# postgresql - PostgreSQL 防止不匹配的 tsqueries 匹配 tsvector

> ID：16152196
> 
> 赞同：0
> 
> 时间：2013-04-22T16:35:26.327
> 
> 标签：postgresql, full-text-search

给定以下查询：

```
select to_tsvector('fat cat ate rat') @@ plainto_tsquery('cats ate'); 
```

此查询将返回 true 作为结果。现在，如果我不希望“猫”也匹配“猫”这个词，有什么办法可以防止这种情况发生吗？

另外，有什么方法可以确保 tsquery 以特定顺序匹配整个字符串（例如，“cats ate”被计为单个令牌而不是两个）。目前，以下查询也将匹配：

```
select to_tsvector('fat cat ate rat') @@ plainto_tsquery('ate cats'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:03:57.020

`cat`匹配`cats`是由于英语词干，英语可能是您的默认文本搜索配置。看看结果`show default_text_search_config`就可以确定了。

可以通过使用`simple`配置来避免。尝试使用显式文本配置的函数调用：

```
select to_tsvector('simple', 'fat cat ate rat') @@ plainto_tsquery('simple', 'cats ate'); 
```

或更改为：

```
set default_text_search_config='simple'; 
```

# python - Django：在 __init__ 或保存函数中访问和更新表单类的字段

> ID：16152197
> 
> 赞同：3
> 
> 时间：2013-04-22T16:35:27.527
> 
> 标签：python, django, django-models, django-forms

我有一个用于 MyModel 模型类的 MyModelForm 表单类，我想为某个字段生成一个随机值。

我看到它的方式是在**init**或 save 函数中，我尝试使用 self.fields['randfield'] 但它会引发错误`'MyModelForm' object has no attribute 'fields'`。

如何访问和更新表单类中的字段，以便我可以使用随机值对其进行实例化？

谢谢。

编辑：使用后`self.fields['randint'].initial`我得到一个 KeyError。代码是

好的，这里开始：

```
def __init__(self, instance=None, *args, **kwargs):
    _fields = ('username', 'email')
    _initial = model_to_dict(instance.user, _fields) if instance is not None else {}
    super(UserDetailsForm, self).__init__(initial=_initial, instance=instance, *args, **kwargs) 
    self.fields.update(fields_for_model(User, _fields))
    self.fields['randint'].initial = '987654321' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:15:04.217

使用这样的东西：

```
class RandomValueForm(ModelForm):
    myfield = models.IntegerField(default=0)

    def __init__(self, *args, **kwargs):
        super(RandomValueForm, self).__init__(*args, **kwargs)
        self.fields['myfield'].initial = my_random_generator() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T17:19:24.560

你得到这个错误是因为你会尝试`fields`在`self`不调用`__init__`超类的情况下访问。所以，首先你需要调用 ModelForm 的超类`__init__`，`__init__`然后你就可以访问`fields`.

```
class MyModelForm(ModelForm):

    def __init__(self, *args, **kwargs):
        super(MyModelForm, self).__init__(*args, **kwargs)
        self.fields['myfield'].initial = my_random_number() 
```

# javascript - 从 Google 电子表格创建表格：如何操作数据？

> ID：16152199
> 
> 赞同：0
> 
> 时间：2013-04-22T16:35:34.463
> 
> 标签：javascript, datatables, google-sheets

目前，我正在开展一个项目，以从 Google 表单/电子表格中提取数据并使用 JQuery/DataTables 将其显示在网站上。我收到了有关让数据出现在网站上的帮助，但我遇到了一个新问题。

上一个问题：[是否可以使用 Google 脚本创建公共数据库（电子表格）搜索？](https://stackoverflow.com/questions/16013110/is-it-possible-to-create-a-public-database-spreadsheet-search-with-google-scri/)

在谷歌上，我有一个输出八列的表单：

*   时间戳
*   标题
*   作者
*   类型
*   网址
*   话题）
*   国家/地区
*   标记

其中，我不需要显示时间戳，如果 URL 存在，我希望标题链接到 URL。由于我对 Javascript 或 DataTables 不太熟悉，因此我制作了第二张表格，并尝试将其简化为以下六个：

*   标题*（目前正在使用 URL 格式化为* `<a>` *标签）*
*   作者
*   类型
*   话题）
*   国家/地区
*   标记

这几乎可以工作，除了我用来构建表格的脚本将标题字段呈现在单元格中，`<a href=""></a>`并且在表格中可见。当前情况见标题“实际产出”下的表格；“目标表外观”下的表格是我的目标。

*   当前输出：http: [//intercultureresources.weebly.com/webtest.html](http://interculturalresources.weebly.com/webtest.html)

*   表创建脚本：[http ://www.weebly.com/uploads/1/7/5/3/17534471/tablescript.js](http://www.weebly.com/uploads/1/7/5/3/17534471/tablescript.js)

因此，有没有办法将`<a href=""></a>`链接作为链接提供，尽管它们被放在 Google 电子表格单元格中？或者，有没有办法将当前脚本编辑为a）忽略时间戳列和b）使标题输出从URL列到URL的链接*（具有适当的条件）*？

* * *

**编辑：**我现在专注于链接；我有一个时间戳解决方案，涉及将数据复制到新的电子表格（因为表单对复制/粘贴信息非常严格）。当前的问题是让每个条目都有一个链接，假设 URL 在第一列，标题在第二列。请阅读 Mogsdad 的回答和我的第一条评论以获取更多信息。

* * *

**解决方案：**首先，感谢 Mogsdad 的灵感和洞察力的“火花”，引导我朝着解决方案的正确方向前进。为了解释总体思路，我不想在目标网站上显示来自 Google 电子表格的一列（URL），而是使用它的内容在另一个（标题）中创建链接。然后，一旦制作了表格，就会使用 DataTables 对其进行格式化。表格中的所有单元格都必须包含某些内容，因此如果单元格为空白，则必须填写“无”。

```
function cellEntries(json, dest, divId) {
    var table = document.createElement('table');
        table.setAttribute("id", divId + "table");                 //Assign ID to <table> from the <div> name.
    var thead = document.createElement('thead');
    var tbody = document.createElement('tbody');
    var thr;
    var tr;
    var entries = json.feed.entry;                                     
    var cols = json.feed.gs$colCount.$t;                                  //The number of columns in the sheet.
    var link;                                                           //Teporary holder for the URL of a row.

    for (var i=0; i <cols; i++) {                                       //For the first row of cells (column titles),
        var entry = json.feed.entry[i];
        if (entry.gs$cell.col == '1') {                                     //For First Column / URL Column, (1)
            if (thr != null) {
                tbody.appendChild(thr);
            }
            thr = document.createElement('tr');                                 //Create <thr>/<tr> (???).
        }
        else {                                                              //For all other columns,
            var th = document.createElement('th');                              
            th.appendChild(document.createTextNode(entry.content.$t));          //Create title for each column.
            thr.appendChild(th);
        }
    } 
    for (var i=cols; i < json.feed.entry.length; i++) {                 //For all remaining cells,
        var entry = json.feed.entry[i];
        if (entry.gs$cell.col == '1') {                                     //For First Column / URL Column, (1)
            if (tr != null) {
                tbody.appendChild(tr);
            }
            tr = document.createElement('tr');                                  //Create <tr>.
            hlink = entry.content.$t;                                           //Put URL content into hlink.
        }
        else if (entry.gs$cell.col == '2') {                                //For Title Column,(2)
            var td = document.createElement('td');
            if (hlink != "None") {                                              //If there is a link,
                var alink = document.createElement('a');                            //Make <a>
                alink.appendChild(document.createTextNode(entry.content.$t));       //Put content in <a>
                alink.setAttribute('href',hlink);                                   //Assign URL to <a>.
                td.appendChild(alink);                                              //Put <a> in <td>.
            }
            else {                                                              //If there is no link,
                td.appendChild(document.createTextNode(entry.content.$t));          //Put content in <td>.
            }
            tr.appendChild(td);
        }
        else {                                                              //For all other columns,
            var td = document.createElement('td');
            if (entry.content.$t != "None") {                                   //If content is not "None",
                td.appendChild(document.createTextNode(entry.content.$t));          //Output the content.
            }
            else {                                                              //Else,
                td.appendChild(document.createTextNode(""));                        //Output a blank cell.
            }
            tr.appendChild(td);
        }       
    } 
    $(thead).append(thr);
    $(tbody).append(tr);
    $(table).append(thead);
    $(table).append(tbody);
    $(dest).append(table);
    $(dest + "table").dataTable();

};

function importGSS(json){
   var divId = "targetdivid"                            //ID of the target <div>.
   cellEntries(json, "#" + divId, divId);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:49:02.767

围绕这一点`tablescript.js`：

```
 var th = document.createElement('th');
    th.appendChild(document.createTextNode(entry.content.$t));
>>>>
    thr.appendChild(th) 
```

您可以通过执行以下操作添加超链接：

```
th.setAttribute('href',<link>); 
```

...`<link>`设置为特定出版物的超链接。

要完成这项工作，您可以修改电子表格源以将链接放在一列中，将标题放在另一列中。然后修改`tablescript.js`以结合链接和文本，如下所示：

```
var hlink = null;  // Temporary storage for hyperlink 
for (var i=0; i <cols; i++) {
    var entry = json.feed.entry[i];
    if (entry.gs$cell.col == '1') { 
        if (thr != null) {
            tbody.appendChild(thr);
        }
        thr = document.createElement('tr');
    }
    // Element 0 assumed to have hyperlink
    if (i == 0) {
       hlink = entry.content.$t;
    }
    else {
       var th = document.createElement('th');
       // If we have an hlink, set the href attribute.
       if (hlink !== null) {
          th.setAttribute('href',hlink);
          hlink = null;
       }
       th.appendChild(document.createTextNode(entry.content.$t));
       thr.appendChild(th);
   }
} 
```

# caliburn.micro - 将父级的操作重新连接到子视图模型

> ID：16152203
> 
> 赞同：0
> 
> 时间：2013-04-22T16:35:40.000
> 
> 标签：caliburn.micro

所以这是我的剧本。我在顶部有一个工具栏（办公风格），带有按钮。这是托管在外壳中的。其中一些按钮在加载时仅适用于某些子视图模型。理想情况下，我希望将按钮 action.target 在创建时重新定位到子视图模型（我通过`Action.Target="ActiveItem"`它们的设置来实现这一点。但这并不能完全解决问题：

a) 当子视图模型关闭并且没有活动项目时，我希望它们重新定位到 Shell 作为目标，以便可以将它们设置为“默认”状态。b) 我注意到，当子视图模型关闭并且作为导体的外壳具有 ActiveItem=null 时，动作中的钩子仍然绑定到最后一个视图模型的活动实例，所以看起来它并没有被处理掉。内存泄漏？

有什么建议如何实现这个场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:46:21.963

向您`ShellViewModel`的指向操作目标的属性添加一个属性并在激活/停用内容时对其进行更新怎么样：

例如

```
public class ShellViewModel
{
    public object ActionTarget
    {
        get { return _actionTarget; }
        set 
        { 
            _actionTarget = value; 
            NotifyOfPropertyChange(() => ActionTarget); 
        }
    }

    // Then when the active item changes just update the target:
    public override NotifyOfPropertyChange(string propertyName)
    {
        if(propertyName == "ActiveItem") 
        {
            if(ActiveItem == null) ActionTarget = this;
            else ActionTarget = ActiveItem;
        }
    }
} 
```

现在绑定到：

```
<SomeMenu cal:Action.Target="{Binding ActionTarget}" /> 
```

不确定这是否可行，但我确定我过去做过类似的事情。（您可能还必须在您的操作上明确调用 NPC，然后它们才会在您更改后更新`ActiveItem`）

# jenkins - Jenkins 构建管道和并行作业的问题

> ID：16152205
> 
> 赞同：2
> 
> 时间：2013-04-22T16:35:46.373
> 
> 标签：jenkins

## 背景

我正在使用 Jenkins 和 Build Pipeline 插件来构建一些需要多个编译步骤的相当复杂的项目：

1.  构建源 RPM。
2.  构建二进制 RPM（执行两次，每个平台一次）。
3.  部署到 YUM 存储库。

我解决构建需求的策略包括将常见工作拆分为可跨项目和分支重用的参数化作业，每个作业代表管道中的一个阶段。每个阶段都由参数触发，并将构建工件传递给管道中的下一个作业。但是，我在使用这种策略时遇到了一些麻烦，并且真的可以使用一些技巧来了解如何以最优雅和最灵活的方式解决这个问题。

更具体地说，有两个公共库，由其他项目（但不是所有项目）共享。这些库的构建方式与依赖项目不同，但不必在 Jenkins 中指定依赖项目是什么。

有多个分支，主分支（每晚重建）、开发分支（轮询更改）、功能分支（也轮询）和发布分支（轮询，但为发布而构建）。分支在多个项目中以相同的方式构建。

我们每个月都会创建多个存储库，虽然期望为新项目进行一些设置是可行的，但通常我们希望它尽可能简单和自动化。

## 问题

1.  我有许多具有多个分支的项目，我不希望以相同的方式构建所有分支甚至所有项目。因为大多数构建步骤都是相似的，我可以将这些常见步骤转换为参数化构建作业，并让每个作业触发链中的下一个，传递参数并沿着链构建工件。但是，如果需要跳过其中一个步骤，这将分崩离析，因为我不知道有条件地跳过构建步骤的方法。这意味着我需要复制构建作业，以便我可以为每个管道自定义它们，从而产生大量的构建作业。我可以使用插件组合来创建作业生成器（例如 dsl 流、dsl 作业等），并尽可能对用户隐藏，但最优雅的 Jenkins 解决方案是什么？有没有插件，或我可能错过的例子？你做这件事的经验是什么？

2.  因为第 2 步可以分成两个可以并行运行的作业，所以这引入了一种复杂性，导致我的管道出现问题。我的第一次尝试会使用不同的参数触发参数化构建作业两次，然后使用 join 插件加入作业，但是从两个上游作业复制构建工件开始看起来很复杂。这很重要，因为我需要两个作业的构建工件用于第 3 阶段。加入并行作业并从它们全部复制工件的最优雅的解决方案是什么？有没有我可能错过的例子？

3.  我需要将阶段 2 中两个作业生成的测试结果结合起来，并将它们复制到触发构建的作业中。处理这个问题的最佳方法是什么？

我很高兴阅读文章、演示文稿、技术文章、参考文档、编写脚本以及使这项工作正常工作所需的任何其他内容，但我不是 Jenkins 专家。如果有人可以就这三个问题给我一些建议，那将很有帮助。此外，如果相关，我将不胜感激有关如何在 Jenkins 中充分利用管道 CI 构建的任何建设性建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:40:55.403

对于第一点，我编写的 Job Generator 插件是为了解决这个用例而开发的。[您可以在 Job Generator 的 wiki 页面上](https://wiki.jenkins-ci.org/display/JENKINS/Job+Generator+Plugin)找到更多信息。还有一种相同类型的插件具有不同的方法（作业生成器作为构建步骤），称为[Jobcopy Builder](https://wiki.jenkins-ci.org/display/JENKINS/Jobcopy+Builder+plugin)。您提到的其他方法需要某种 DSL，也可能是一个不错的选择。

# c# - 如何在 C# 中自动填充文本框

> ID：16152206
> 
> 赞同：-4
> 
> 时间：2013-04-22T16:35:49.373
> 
> 标签：c#, web

如果我有一个内置 webbrowser 的 ac# 应用程序，然后我导航到一个网站。我希望我的应用程序找到第一个文本框 IE: email 并用 Xtacy 填充它，然后用密码填充第二个文本框 Password。

![在此处输入图像描述](https://i.stack.imgur.com/2bhbH.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:43:37.123

您应该找到 Textbox 控件并按如下方式设置值：

```
HtmlDocument doc = this.webBrowser1.Document;
doc.GetElementById("IE").SetAttribute("Value", "Xtacy");
doc.GetElementById("Password").SetAttribute("Value", "Password"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:38:42.760

You should look at the docs. The [WebBrowser](http://msdn.microsoft.com/en-us/library/5d67hf8a.aspx) class has a [Document](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.document.aspx) property. This returns an [HtmlDocument](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.aspx) which will give you access to the DOM.

Next, you use the [GetElementById()](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.getelementbyid.aspx) to get the input box like below and then set it's value with the [SetAttribute](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelement.setattribute.aspx) method.

```
HtmlDocument d = this.yourWebBrowser.Document;
d.GetElementById("<id of IE input>").SetAttribute("value", "Xtacy");
d.GetElementById("<id password input>").SetAttribute("value", "Password"); 
```

# asp.net - 通过 ASP.NET、Windows 身份验证和模拟使用智能卡的私钥对数据进行签名

> ID：16152210
> 
> 赞同：2
> 
> 时间：2013-04-22T16:35:56.970
> 
> 标签：asp.net, .net-4.0, x509certificate, smartcard

我想知道是否可以使用智能卡的私钥对数据进行签名，**而无**需借助 java applet 或 activex 控件。

*我非常接近！*

我们的环境是：

*   广告域
*   PKI 基础设施/智能卡 (PIV)

我敲开了一个简单的 ASP.NET (.net 4.0) 网络表单应用程序：

*   Windows 身份验证开启，匿名关闭
*   身份模拟

使用读卡器中的智能卡，我可以轻松枚举登录用户智能卡 (StoreLocation.CurrentUser) 上的证书。但是，当我尝试访问私钥（通过 CSP）时，我收到“拒绝访问”错误。

在调试模式下的本地机器上一切正常。我知道——这是陈词滥调。

```
 protected void Page_Load(object sender, EventArgs e)
        {

            //always populate the cert store
            store = new X509Store(StoreName.My, StoreLocation.CurrentUser);
            store.Open(OpenFlags.MaxAllowed);

            RSACryptoServiceProvider csp = new RSACryptoServiceProvider();

            //hardcoded to get the first cert in the store - it's legit and had a private key
            cert = store.Certificates[0];

            //throws error when not local
            csp = (RSACryptoServiceProvider)cert.PrivateKey;

        } 
```

我尝试让应用程序池身份访问证书存储区无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T14:43:59.220

不能在服务器上使用用户的私钥。这将有效地抵消使用智能卡的好处。事实上，安全操作将在智能卡上执行。

> # 支持智能卡的策略
> 
> Microsoft 将智能卡视为其公钥基础结构 (PKI) 支持的关键组件。智能卡增强了纯软件解决方案，例如客户端身份验证、交互式登录和安全电子邮件。智能卡是公钥证书和相关密钥的汇聚点，因为它们：
> 
> *   提供防篡改存储，以保护私钥和其他形式的个人信息。
> *   将涉及身份验证、数字签名和密钥交换的安全关键计算与系统的其他部分隔离开来。
> *   在工作、家中或移动用户的计算机之间实现凭据和其他私人信息的可移植性。

资料来源：[智能卡概念](http://technet.microsoft.com/en-us/library/dd277376.aspx)

如您所见，一个关键方面是将安全关键操作与系统的其余部分隔离开来。使用用户私钥执行加密的唯一方法是使用智能卡读卡器（硬件本身）。由于无法从服务器端 ASP.NET 网页访问客户端的硬件，因此您尝试执行的操作是不可能的。

实现这一点的唯一方法是使用客户端组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T11:30:32.953

你可以先试试这个：

```
store.Open(OpenFlags.ReadOnly);
cert = store.Certificates[0];
store.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T20:49:52.873

您访问被拒绝的原因是因为您试图访问私钥并且没有将 PIN 传递给卡。（我相信）

私钥功能需要 PIN。另外..您需要使用 winscard.dll 获取卡上下文

你可以看看这个。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa379886(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379886%28v=vs.85%29.aspx)

您还需要使用智能卡 CSP。Windows 在 7 及更高版本中有一个本机，称为智能卡迷你驱动程序。

我正在尝试同样的事情......如果我更进一步，我会发回一个样本......

# c# - 半设计数据库使用什么？模型优先还是数据库优先？

> ID：16152212
> 
> 赞同：3
> 
> 时间：2013-04-22T16:36:06.380
> 
> 标签：c#, database, entity-framework, ef-model-first, ef-database-first

假设您有一个当前正在使用的数据库。它有一张表，其中包含有关`Customers`.

假设您想围绕它创建一个应用程序。您需要`Customers`在程序中使用该表，但您还需要添加一些新表，可能连接到`Customers`. 例如，您需要添加一个`Orders`与该表有某种关联的`Customers`表。

我已经开始学习实体框架。我已经了解了一些关于“数据库优先”和“模型优先”数据模型的知识。但情况是，我想做的事情不属于这些类别中的任何一个。我既没有完全空的数据库，也没有可以直接在程序中使用的已完成的数据库模式。

我应该怎么办？如果我使用“模型优先”并使用 Visual Studio 设计器设计我的实体，我可以使用它来创建数据库架构的相关部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:49:26.377

使用数据优先，然后使用模型优先。您不必选择...使用数据优先向导为现有表生成 EF，然后使用设计器创建其他对象，然后将其同步回您的数据库。模型优先和数据优先的概念仅适用于 EF 内容的初始创建 - 之后您所做的任何事情都可以在任一方向同步。

这显示了如何在创建模型后将数据库更改放回模型中-您也可以这样做，但我找不到那篇文章-所有新视频和废话都很难导航-您也许可以找到它.

[http://msdn.microsoft.com/en-us/data/jj206878](http://msdn.microsoft.com/en-us/data/jj206878)

毕竟，如果框架将您锁定为永远无法更新任何内容，那么它就不会很有用。正确的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:51:25.307

您的项目开发得越多，它就会变得越数据库优先，所以我建议您现在使用数据库优先，然后扩展您的 EF 实体，然后实施/伪造/模拟缺失的部分

如果您还没有阅读过[TDD](http://en.wikipedia.org/wiki/Test-driven_development)，那么现在是时候阅读了。它将节省大量时间，尤其是在使用不断变化的数据模型时。

# design-patterns - 用于导入不同格式的相似数据的推荐设计格式

> ID：16152216
> 
> 赞同：0
> 
> 时间：2013-04-22T16:36:16.193
> 
> 标签：design-patterns

我的应用程序将从其他应用程序中获取数据。出于示例的目的，假设地址数据。此数据将始终包含街道、国家/地区、姓氏等元素，但会以许多不同的格式出现。csv、xml、xls 等

我想构建我的应用程序，以便我接受一种可以可靠验证和处理的格式。通过这种方式，我确保如果我想以我没有计划且目前不可用的形式接受数据，我只需将数据转换为我的文档格式。我相信这是 xsd 的好地方，因此，希望找到特定的数据，以及是否有围绕该数据的 XML 标准格式和组织。例如国内和国际地址数据：地址数据交换规范。

我考虑过只记录和使用 csv 格式，但这似乎容易出错 * 无法验证第一列中的数据实际上是记录在案的第一列元素。* 加载无效数据并需要清除的可能性很高

我相信 xsd 可以防止这些问题，并允许任何人开发自己的文件以从他们的应用程序中导出（例如：[Open_Financial_Exchange](http://en.wikipedia.org/wiki/Open_Financial_Exchange)，但似乎大多数应用程序更喜欢 csv 导入方法。

有没有比这两个更优雅的选择？也许是一种我不熟悉的模式，它处理以不同格式接收类似数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:30:25.607

不知道你所说的“模式”是什么意思，但`adapter`我`bridge`想到了。`Adapter`如果你需要翻译“1 到 n”，`bridge`如果你需要翻译“n 到 n”。

[这](https://stackoverflow.com/questions/8844105/repository-and-data-mapper-pattern)`DataMapper`是C# 中详细模式实现/批评的 SO 线程。

[JSON（JavaScript Object Notation）](http://en.wikipedia.org/wiki/JSON)作为一种通用传输结构变得非常流行。它非常简洁，大大减少了 XML 的膨胀。我知道 C# 有一个用于处理 JSON 的库，毫无疑问其他语言也是如此。

> 使用 csv 格式，但这似乎容易出错 * 无法验证第一列中的数据实际上是记录在案的第一列元素。

[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)允许第一行是列标题（字段名称等）。

# c# - 如何将此选项存储在我的 SQL Server DB 中以在 c# 中使用

> ID：16152217
> 
> 赞同：0
> 
> 时间：2013-04-22T16:36:16.633
> 
> 标签：c#, sql-server, database

我试图找出在我的数据库上存储选项列并确保它不超过其范围的最佳方法。

我的数据库是将连接到我的 C# 应用程序的 SQL Server，该应用程序存储用户工资单工作班次并输出该周/月/2 周期间总收入的工资单摘要。我有 2 列我不确定如何存储：

第一个是选择每周/双周/每月工资单的选项，第二个是允许用户选择某个班次并存储如果它是正常/时间和一半/双倍他们存储的每小时费率。

我正在考虑创建应用程序端 C# 验证，以阻止用户输入不正确的数据。这是最简单的方法还是这些情况有最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:19:45.870

您可以使用数据库[检查约束](http://msdn.microsoft.com/en-us/library/ms188258%28v=sql.100%29.aspx)，也可以将有效数据存储在另一个表中，该表与您的主表有关系，由约束强制执行。您可以使用 TSQL 或通过 SSMS 中的“数据库图”工具设置关系。

查找表可以从您的应用程序中维护，并且在数据发生变化时工作得最好。当您预先知道每个可能的值时，检查约束是合适的。

这是一个[例子](http://msdn.microsoft.com/en-us/library/ms190273%28v=sql.100%29.aspx)......

```
USE AdventureWorks ;
GO
CREATE TABLE Person.ContactBackup
(ContactID int) ;
GO
ALTER TABLE Person.ContactBackup
ADD CONSTRAINT FK_ContactBacup_Contact FOREIGN KEY (ContactID)
    REFERENCES Person.Contact (ContactID) ;
ALTER TABLE Person.ContactBackup
DROP CONSTRAINT FK_ContactBacup_Contact ;
GO
DROP TABLE Person.ContactBackup ; 
```

这是一个类似的[问题](https://stackoverflow.com/questions/1714293/is-it-good-to-use-check-constraints-for-business-rules)。

# memory-management - 如何在 cocos2D 2 中显示内存使用情况

> ID：16152218
> 
> 赞同：1
> 
> 时间：2013-04-22T16:36:18.107
> 
> 标签：memory-management, cocos2d-iphone

我认为查看使用了多少内存并且在 cocos2d 应用程序中仍然可用会非常方便。

我找到了这个链接：( [http://www.learn-cocos2d.com/2010/07/coding-cocos/](http://www.learn-cocos2d.com/2010/07/coding-cocos/) )，它描述了如何为 cocos2d v1 执行此操作，但在 cocos2d 2 中，这个“showFPS 函数”是完全完成的不同的方法。

那么有人可以向我解释如何在 cocos2d 2 中的 FPS 旁边显示内存使用情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:56:14.730

您无法通过代码获取整个应用程序内存使用情况。至少对于 iOS 设备。cocos2d 只允许您查看加载的纹理消耗了多少内存。如果您想查看您的应用程序消耗了多少内存，请使用 Instruments 工具。它是 XCode 包的一部分。

如果您只想查看加载的纹理消耗了多少内存，只需调用

```
[[CCTextureCache sharedTextureCache] dumpCachedTextureInfo]; 
```

您将在控制台中看到此信息。

# flash - 当我的 AIR 应用程序从后台返回时连接到 Flash Debugger

> ID：16152220
> 
> 赞同：0
> 
> 时间：2013-04-22T16:36:23.543
> 
> 标签：flash, debugging, air

我正在尝试调试为什么我的 AIR ios 应用程序在很长一段时间后从后台返回时需要很长时间才能加载。目前，我只能在第一次启动应用程序时连接到 Flash 调试器（弹出窗口要求 IP）。

当它从后台返回时是否可以调试它？当我从后台重新调用我的应用程序时，我没有收到 Flash 调试器弹出窗口。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:21:30.167

简短的回答。不，这似乎是不可能的。一旦应用程序进入后台，调试会话就会终止。

您可以将文本字段添加到您的应用程序并跟踪或记录消息。这些消息可能包括您正在测量的内容。

# javascript - Highcharts：Exporting.js 添加两个额外的按钮

> ID：16152221
> 
> 赞同：0
> 
> 时间：2013-04-22T16:36:23.473
> 
> 标签：javascript, highcharts

我将 exporting.js 添加到我的项目中，但是当我检查页面时，它似乎添加了两个额外的按钮，但在我的 jsfiddle 中却没有，您知道是什么原因造成的吗？

这是我的图表的示意图，你能看到有两个按钮：

![在此处输入图像描述](https://i.stack.imgur.com/vK8BG.png)

![在此处输入图像描述](https://i.stack.imgur.com/CzzmC.png)

这是我的 jsfiddle：http: [//jsfiddle.net/pLDeq/10/](http://jsfiddle.net/pLDeq/10/)

```
exporting: {
            enabled: true,
            exportButton: {
                enabled: true
            },
            buttons: 
            {
                customButton:
                {
                    //x: 20,
                     symbol: 'url(http://cdn1.iconfinder.com/data/icons/fatcow/16/chart_bar.png)',
                    onclick: function() {
                        setChartColumn([name,name2], categories, [data,data2], ['column','column']); 
                    }
                }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:09:52.043

已修复，问题出在主题中，我只是删除了这行。

```
 exporting: {
        buttons: {
            exportButton: {
                symbolFill: '#55BE3B'
            },
            printButton: {
                symbolFill: '#7797BE'
            }
        }
    }, 
```

# c++ - Html 文本作为工具提示，向右对齐

> ID：16152225
> 
> 赞同：0
> 
> 时间：2013-04-22T16:36:32.250
> 
> 标签：c++, html, qt, tooltip, text-alignment

我想在 Qt 中显示这样的工具提示：

```
Field1:     some_price1
Field2:     some_price2
Field3:     some_price3 
```

并且第二列应该向右对齐，例如

```
Field1:     17.50
Field2:      1.57
Field3:    117.50 
```

我该怎么做？过去我使用 /t 并且效果很好，但现在我需要 QToolTip 中的 html（用于着色），我唯一能做的就是计算空格数，我需要将价格向右对齐并将它们放在价格后面.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:25:42.783

问题以这种方式解决：

```
QString str = QString("<tr><td>Field1:</td><td align=\"right\">%1</td></tr>") + 
              QString("<tr><td>Field2:</td><td align=\"right\">%2</td></tr>"); 
```

感谢重播。

# ruby-on-rails - 当多个用户从 Rails 应用程序调用 shell 脚本时，是否存在线程或并发问题？

> ID：16152226
> 
> 赞同：0
> 
> 时间：2013-04-22T16:36:32.453
> 
> 标签：ruby-on-rails, bash

如果我们有一个在远程服务器上调用各种脚本（sh、bash、perl）的 rails 应用程序，我们是否应该担心这些脚本会阻止其他用户同时访问服务器？有没有人有这些问题的经验并愿意开始对话？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:41:47.570

我没有使用 Rails 的经验，但是 bash、shell perl 脚本都在单独的进程上运行。因此，不应阻止多个用户同时执行这些脚本，而只是启动另一个进程来执行脚本。根据这些脚本所做的事情，您将遇到并发问题，尽管如果两个人试图访问更改相同的数据，或者他们的脚本正在更改与系统其他地方有依赖关系的数据

# wordpress - 如果当前类别是另一个类别的子或孙

> ID：16152228
> 
> 赞同：0
> 
> 时间：2013-04-22T16:37:01.113
> 
> 标签：wordpress

例如，我有这样的结构：

灵感 > 男装 > 服装 > 牛仔裤

我在牛仔裤页面上，我想编写代码来检查牛仔裤是男士的孙子。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:28:57.000

如果您正在询问一个 CSS 选择器来定位它，那将是

```
.Men > * > .Jeans 
```

假设男人和牛仔裤是类

# java - 根据键/值对 (HADOOP) 将输出减少到所需文件

> ID：16152232
> 
> 赞同：0
> 
> 时间：2013-04-22T16:37:27.007
> 
> 标签：java, hadoop, mapreduce, key-value, reduce

是否可以根据密钥将减速器输出发送到多个文件？像，

```
if(key1)
 {
        //output to file1 using context.write() or otherwise
  }
 else
 {
        //output to file2 using context.write() or otherwise
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:36:37.217

你应该能够在你的 reducer 中使用条件逻辑和[`MultipleOutputs`](http://hadoop.apache.org/docs/r2.0.3-alpha/api/org/apache/hadoop/mapred/lib/MultipleOutputs.html)类来实现你想要做的事情。他们在链接的 javadoc 中有一个如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:06:43.330

另一种可能的方法是实现自定义[Partitioner](http://hadoop.apache.org/docs/r2.0.3-alpha/api/org/apache/hadoop/mapred/Partitioner.html)。这样，一个人可以只运行两个（多个）reducer 并根据键的值进行相应的分区。

# jsf-2 - 在后台启用接口

> ID：16152234
> 
> 赞同：0
> 
> 时间：2013-04-22T16:37:31.153
> 
> 标签：jsf-2, primefaces

我想知道如何将一个有按钮和链接的界面放在后台，处于禁用模式，然后在用户认证后重新激活？

也就是说，当用户认证时，后台的页面是活动的。

我使用 JSF 和 PrimeFaces。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:59:44.570

你想对这个演示产生影响吗？

[http://www.primefaces.org/showcase/ui/confirmDialog.jsf](http://www.primefaces.org/showcase/ui/confirmDialog.jsf)

这称为覆盖，您可以在 primefaces 或 jquery 中创建它，但该演示应该可以完成工作。

您需要知道，当您创建此类覆盖时，有人可能会打开 firebug 并删除覆盖元素并在站点内容上进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:00:10.413

利用`disabled`JSF 命令/输入组件的属性。它接受一个布尔表达式。

例如，假设您使用容器管理的身份验证来登录（因此，登录用户可通过`#{request.remoteUser}`视图中的方式获得）：

```
<h:commandButton ... disabled="#{not empty request.remoteUser}"> 
```

当您使用 PrimeFaces 时，另一种选择是使用它的`<p:blockUI>`组件。另请参阅[其展示](http://www.primefaces.org/showcase/ui/blockUI.jsf)以获取具体示例。

# mysql - 多租户数据库设计 - 每个用户的数据库

> ID：16152235
> 
> 赞同：3
> 
> 时间：2013-04-22T16:37:32.253
> 
> 标签：mysql, database-design, multi-tenant

我正在开发一个 Web 应用程序，该应用程序将要求用户拥有自己的一组私有数据。我最初的计划是创建一个 stores 表、一个 users 表和一个 user_stores 相交表。然后，我将在 stores 表中保存该商店的数据库名称（并使用应用程序用户和密码创建每个特定于商店的数据库，以便 Web 应用程序始终可以登录）。

每家商店都有相似的数据（用户、产品、运输方式等），而且我知道我可以使用外键引用将所有内容绑定到一个巨大的数据库中。但是，由于数据非常具体并且可能是专有的，使用我的原始设计还是制作一个包含每个人数据的单一数据库会更好吗？

我正在考虑扩展问题，单独的数据库会更好，因为我们可以将更活跃的帐户放在他们自己的（或更强大的）数据库服务器上，如果需要，只需在存储表中添加一个服务器位置字段。此外，它可能更安全，因为我们可以将用户登录信息添加到数据库中，并且只允许他们访问他们的数据（防止一个用户编辑另一个用户的内容）。我的问题是，是否有人担心我错过了？几乎我读过的每一篇文章都说不要使用我正在考虑的方法，而且我不是 DBA。任何输入都会有所帮助。

附加信息：这将托管在我将拥有根访问权限的专用服务器上。我可以根据需要创建任意数量的 MySQL 数据库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T16:39:41.427

我肯定会使用单个数据库。使用以下内容开始。使用单个数据库有几个原因，但最重要的原因是让您免于维护噩梦。如果您必须更改架构，您的手会一团糟。

[http://msdn.microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T18:46:58.077

在多租户数据库中，数据库设计人员考虑查询、成本、数据隔离和保护、维护和灾难恢复。

多租户解决方案的范围从每个租户一个数据库（“不共享任何内容”）到每个租户一个行（“共享所有内容”）。[这个 SO 答案](https://stackoverflow.com/a/8343142/562459)总结了权衡。如果您正在设计一个属于某种监管环境（HIPAA、FERPA 等）的数据库，那么该监管环境可能会胜过所有其他考虑。

在某些情况下，每个租户一个数据库是一个合理的决定。不过，尚不清楚这是否是*您*的最佳答案。

# windows-phone-8 - 带有 Windows Phone 8 的 PCSC

> ID：16152240
> 
> 赞同：0
> 
> 时间：2013-04-22T16:37:38.580
> 
> 标签：windows-phone-8, nfc, pcsc

我有一个连接到我的 PC 的 SCL3711 智能卡读卡器。有什么方法可以让我的 Windows 8 手机将我的 PC 识别为 NFC 设备并通过 NFC 在它们之间传输数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T12:24:11.073

您应该使用点对点通信。我不知道是否有任何软件，但您可以自己开发（更简单的方法是使用 c#）。

# python - 如何获得由 zope.transaction 管理的 SQLAlchemy 会话，该会话与 http 请求具有相同的范围，但在提交时不会自动关闭？

> ID：16152241
> 
> 赞同：3
> 
> 时间：2013-04-22T16:37:39.730
> 
> 标签：python, transactions, sqlalchemy, pyramid, zope

我有一个 Pyramid Web 应用程序，其中包含一些从数据库读取数据并写入数据的表单页面。

该应用程序将 SQLAlchemy 与 PostgreSQL 数据库一起使用，这是我设置 SQLAlchemy 会话的方式：

```
from sqlalchemy.orm import scoped_session
from sqlalchemy.orm import sessionmaker
from zope.sqlalchemy import ZopeTransactionExtension

DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension())) 
```

当我处理一个表单时，我需要执行一个包含在 a 中的显式提交，`try`并查看该提交是否有效。我需要这个显式提交，因为我在 PostgreSQL 数据库中有可延迟的[触发器](http://www.postgresql.org/docs/8.4/interactive/sql-createconstraint.html)（在提交时执行的检查），并且在某些情况下，没有错误是不可预测的。

一旦我成功提交了一个事务，例如添加一个 MyClass 的实例，我想获得这个实例的一些属性以及链接实例的一些属性。事实上，在提交之前我无法获取这些数据，因为它们是由数据库本身计算的。

我的问题是，当我使用`transaction.commit()`（在`transaction`包中）时，会话会自动关闭，我不能再使用该实例，因为它处于*分离*状态。[文件](https://pypi.python.org/pypi/zope.sqlalchemy#long-lasting-session-scopes)证实了这一点。

因此，如文档中所述，我尝试使用以下会话设置：

```
DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension(keep_session=True))) 
```

但是，现在会话范围不再与 http 请求范围相同：在我的仅执行读取查询的 http 请求结束时不会发送 ROLLBACK。

那么，有没有办法让会话与 http 请求具有相同的范围但在提交时不会自动关闭？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T20:18:13.520

`keep_session=True`您可以通过ZTE 上的将会话与请求分离。但是，如果是这种情况，您可能还想在提交会话后使用对象，否则您会对新会话感到满意。因此，您还需要`expire_on_commit=False`在您的会话中。之后，您已经成功地将会话从 pyramid_tm 的生命周期中分离出来，您可以随意提交/中止。那么我们如何在不使用 pyramid_tm 的情况下将其重新附加到请求生命周期中呢？好吧，如果你把你`DBSession`的东西包装在一个不那么全局的东西中，这将使它作为一个请求范围的变量更易于管理，那会有所帮助。从那里，很明显会话何时创建，何时应该通过请求完成的回调销毁。以下是我的散文摘要：

```
def get_db(request):
    session = request.registry['db_session_factory']()
    def _closer(request):
        session.close()
    request.add_finished_callback(_closer)
    return session

def main(global_conf, **settings):
    config = Configurator()

    DBSession = sessionmaker(expire_on_commit=False, extension=ZopeTransactionExtension(keep_session=True))
    # look we don't even need a scoped_session anymore because it's not global, it's local to the request!

    config.registry['db_session_factory'] = DBSession

    config.add_request_method('db', get_db, reify=True)

def myview(request):
    db = request.db # creates, or reuses the session created for this request
    model = db.query(MyModel).first();
    transaction.commit()
    # model is still valid here
    return {} 
```

当然，如果我们做这一切，中兴通讯可能根本帮不上你，你只想`db.commit()`自己使用和处理。如果发生异常，仍将调用已完成的回调，因此您不需要pyramid_tm 进行清理。

# android - android inputType=number 只有整数值

> ID：16152243
> 
> 赞同：1
> 
> 时间：2013-04-22T16:37:42.587
> 
> 标签：android, integer, android-edittext

我有一个带有属性的编辑文本`android:inputType="number"`。问题是我只希望编辑文本显示整数，但它总是显示小数点后 1 位。ex（我想显示 1，它显示 1.0）。我已经尝试了所有其他与数字相关的输入类型，并且相同。

这应该是一个非常基本的问题。我在这里缺少什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:45:50.937

尝试使用：

```
editText.setInputType(InputType.TYPE_CLASS_NUMBER); 
```

# excel - 如何在vba中编写一个excel公式？

> ID：16152247
> 
> 赞同：0
> 
> 时间：2013-04-22T16:37:53.263
> 
> 标签：excel, vba

我是vba的新手。我有一个excel公式，我想把它写成vba代码。但我有一个问题。我不知道该怎么做。有谁能够帮我？这是公式：

`IFERROR(LOOKUP(2^15,SEARCH(G$6:G$8,B6),G$6:G$8),"")`

实际上，我在 sheet2 的 G 列中有一些关键字，我想在 sheet1 的 B 列中搜索它们，其中包含文本。如果有任何匹配项，我希望 vba 代码在第一张表的列（例如 D）中返回匹配的关键字，如果没有，则将相应的单元格留空。

我不知道该怎么做。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:05:34.300

即使您提供的描述似乎与您提供的功能不匹配，我也会对此进行尝试。

我使用第一个`IsError`函数`Application.Match`来检查是否`lookup_value`在 Sheet1 的 Range("B:B") 中找到。

```
Dim lookup_value as String ' the value you're searching for.'
Dim found_value as String ' the value to return if a match is found.'

lookup_value = "edit this value!"  '<~~ This is the value you're searching for. Edit as needed.'

If Not IsError(Application.Match(lookup_value, Sheets("Sheet1").Range("B:B"),False) Then
    'If the above does not yield an error, then set the found_value based on VLOOKUP.'
    found_value = Application.WorksheetFunction.VLookup(lookup_value, Sheets("Sheet1").Range("B:D"),2,False)
Else:
    'If the MATCH function returns an error, set the found_value = vbNullString.
    found_value = vbNullString
End If 
```

从此结果中，您可以简单地将单元格值设置为函数的结果，`found_value`。

`ActiveCell.Value = found_value`或`Range("A1").Value = found_value`等

# wpf - Incorrect Button State with WPF Command

> ID：16152249
> 
> 赞同：0
> 
> 时间：2013-04-22T16:38:09.730
> 
> 标签：wpf

First, let me start off by stating that I will be more than happy to post whatever code or other information I need to in order to help resolve this issue. Unfortunately, at this time, I am just not sure what I need to post.

I have a WPF application that uses the Microsoft Ribbon library. I know the ribbon control has been rolled into the 4.5 framework but since I am still deploying to some XP machines, I am forced to use the 4.0 framework. I mention this only in case there is some obscure issue with the old library.

In the application, I have a RelayCommand that is bound to one of the ribbon buttons that does not enable itself correctly (or at all for that matter). The code that is in place to determine if the command can execute is the exact same as the code for a few other buttons. These other buttons behave correctly. Even worse, the behavior is correct on my machine but not on any of the other machines that I have tried it on. It doesn't appear to be isolated to XP or Windows 7\. Even worse, I have placed a regular button in the interface that calls the CanExecute method for the command and it reports a value of True even when the button is disabled.

I am at a complete loss of where to start looking. Perhaps someone can steer me in a direction of where to begin.

Thanks in advance to anyone who is able to assist me in my desperate state.

*** EDIT ***

On a whim, I installed .NET 4.5 on the machine that was not functioning correctly as this was a glaring difference between the development (my) machine and the other machines. To my surprise, this corrected the issue. That said, are there updates to the .NET 4.0 framework that are applied by installing version 4.5? As I mentioned above, I am targeting some XP machines so I cannot install 4.5\. Perhaps there are some other updates that can be installed without installing 4.5?

# android - NullPointer and java.util.Timer$TimerImpl.run

> ID：16152255
> 
> 赞同：0
> 
> 时间：2013-04-22T16:38:26.757
> 
> 标签：android, timer

I really do not understand what is going on here. I am just writing an android app to collect Accelerometer data. It keeps giving me this error

```
package com.thawda.mm;

public class RCService extends Service
{

    private static final String LOGTAG2 = "RCService";
    private boolean isTaking =false;

    public void onCreate()
    {

        mSensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
        tMgr =(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);

        Intent battery = this.registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));

        int level = battery.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
        int scale = battery.getIntExtra(BatteryManager.EXTRA_SCALE, -1);

        batteryPct = level / (float)scale;

        createFile();       
        myTimer();

        Toast.makeText(this, "The Program Threat has created....", Toast.LENGTH_LONG).show();

        Log.i(LOGTAG2,"ACC Service Running");       

    }
    @Override
    public void onDestroy()
    {
        super.onDestroy();
        closeFile();
        updateTimer.cancel();
        mSensorManager.unregisterListener(mListener);
        Toast.makeText(this, "Service Destroyed...", Toast.LENGTH_LONG).show();
    }
    @Override

    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    private SensorEventListener mListener = new SensorEventListener(){

        public void onAccuracyChanged(Sensor sensor, int accuracy)
        {
            // TODO Auto-generated method stub

        }
        @Override
        public void onSensorChanged(SensorEvent event) 
        {
            // TODO Auto-generated method stub

            String data3;
            //Date unixTime = new Date();
            x=event.values[0];
            y=event.values[1];
            z=event.values[2];
            //      data3 = String.format(" %1$1.4f",
            //                x);
            //      Log.i(LOGTAG2,data3);   

            //TIME = event.timestamp;
            //  TIME2 = unixTime.getTime();

        }
    };

    public void createFile()
    {
        String noTemp = tMgr.getDeviceId();
        File rootPath=new File(Environment.getExternalStorageDirectory()+"/MM_ACC/");
        String filepath =Environment.getExternalStorageDirectory()+"/MM_ACC/";
        File myFile = new File(filepath);

        String NAME = noTemp+"_"+DateFormat.format("yyyyMMdd-hhmmss", new Date())+"_MM_ACC_"+counter+".txt";        
        if(!Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))
        {
            Toast.makeText(this, "Cannot use storage", Toast.LENGTH_SHORT).show();
            //need to add about finish
            Log.i(LOGTAG2,"Passed usage of external storage");
            return;
        }

        //Create a new directory on External storage
        if(!rootPath.exists())
        {
            rootPath.mkdirs();
        }

        if(!myFile.isDirectory())
            myFile.mkdir();

        myFile = new File(filepath+NAME);
        try
        {
            myFile.createNewFile();
            fOut = new FileOutputStream(myFile);
            inChannel = fOut.getChannel();
            myOutWriter=new OutputStreamWriter(fOut);
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }
    }
    public void WriteFile()
    {
        try
        {
            String data2;
            Date unixTime = new Date();
            TIME2 = unixTime.getTime();

            data2 = String.format(", %1$1.4f, %2$1.4f, %3$1.4f",
                    x, y, z);
            myOutWriter.write(TIME2+ data2 +"\r\n"); // fix the time

        }
        catch(FileNotFoundException e)
        {
            e.printStackTrace();
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }
    }

    public void closeFile()
    {
        try
        {
            myOutWriter.close();
            inChannel.close();
            fOut.flush();
            fOut.close();
        }

        catch (IOException e)
        {
            e.printStackTrace();
        }
    }

    public void myTimer()
    {
        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);

        //  IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_OFF);
        //  registerReceiver(mReceiver, filter);
        // mSensorManager.registerListener(mListener, mAccelerometer, SensorManager.SENSOR_DELAY_FASTEST);  //(*need to fix for highest accuracy
        updateTimer=new Timer("Update");

        // startlocation();
        updateTimer.scheduleAtFixedRate(new TimerTask() 
        {

            public void run()
            {
                WriteFile();
                try 
                {
                    //Log.d(LOGTAG2,"Timer 1 just ran");
                    filesize=inChannel.size();
                    if(filesize>100000)
                    {
                        counter++;
                        closeFile();
                        createFile();
                    } 
                }

                catch (IOException e) 
                {
                    // TODO Auto-generated catch block 
                    e.printStackTrace();
                }

            }
        }, 0, 100);
    }

    public boolean isTaking()
    {
        return isTaking;
    }
} 
```

The following is the error I got

```
AndroidRuntime(4708): java.lang.NullPointerException
AndroidRuntime(4708):   at com.thawda.mm.RCService.WriteFile(RCService.java:196)
AndroidRuntime(4708):   at com.thawda.mm.RCService$2.run(RCService.java:241)
AndroidRuntime(4708):   at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

Those are my initiation values under public class RCService extends Service

```
SensorManager mSensorManager;
Sensor mAccelerometer, mField;
TelephonyManager tMgr;
FileOutputStream fOut;
OutputStreamWriter myOutWriter;
FileChannel inChannel;
long filesize =0;
long counter=0;
public long TIME2;
float x,y,z;
float Azimuth, Pitch, Roll;
public long TIME,TIME3; 
private float[] mGravity;
private float[] mMagnetic;
public float batteryPct;
Timer updateTimer;

private static final String LOGTAG2 = "RCService";
private boolean isTaking =false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:12:05.597

我不知道为什么它解决了这个问题。我工厂重置了我的手机，现在它工作得很好。我不知道为什么。

# c# - 尝试使用 WriteLine 在控制台应用程序中显示列表的内容

> ID：16152256
> 
> 赞同：3
> 
> 时间：2013-04-22T16:38:27.357
> 
> 标签：c#, wcf

我正在尝试使用 WriteLine 在控制台应用程序中显示列表的内容。我正在使用以下代码：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using TestCLient.ClientTransactionsServiceReference;

    namespace TestCLient
    {
        class Program
        {
            static void Main(string[] args)
            {
                ClientTransactionsServiceClient client = new ClientTransactionsServiceClient();
                List<ClientTransactions> ct = client.GetClientTransactions("9999");
                ct.ForEach(i => Console.Write(i));
                Console.Read();
            }
         }
    } 
```

我得到以下输出：

[![输出截图](https://i.stack.imgur.com/EvvIv.png)](https://i.stack.imgur.com/EvvIv.png)

当我调试时，我的列表 (ct) 显示它包含我想要显示的字段。请参阅以下屏幕截图：

[![调试截图](https://i.stack.imgur.com/dJn3b.png)](https://i.stack.imgur.com/dJn3b.png)

我搜索了许多来源，包括 Stack 以获取我用来编写列表的代码行。我是编程新手，非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:43:06.130

`Console.Write`隐式调用`ToString()`您尝试在控制台中打印的对象。因为您的类型不会覆盖返回的文本，所以是类定义`ToString()`的默认实现的结果（所有类型都从该类派生）。`ToString()``Object`

而不是`i`作为参数传递给`Console.Write`pass `i.NameOfThePropertyYouWantToOutput`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:43:29.440

您可以打印出您需要的每个属性。或者更好的是，覆盖该`ToString()`方法并像以下代码一样调用它：

`ct.ForEach(i => Console.Write(i.ToString()));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T16:42:48.597

由于您正在输出 的实例`ClientTransactions`，因此您需要指定如何在控制台上呈现信息。您可以输出此实例的一个或多个属性，也可以覆盖该`ToString()`方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T16:46:11.690

您尝试将对象解析为字符串。

如果要在控制台中正确显示对象，则需要显示客户端对象的成员。

```
ct.ForEach(i => Console.Write(i.Name )); // exemple
            Console.Read(); 
```

# task - How nexttuple and excute be called in storm framework

> ID：16152258
> 
> 赞同：0
> 
> 时间：2013-04-22T16:38:38.250
> 
> 标签：task, apache-storm

I think each task will contain an instance of spout or bolt, and a while or for block calls them, is it right?

If so, since every task coordinates to one of some threads running in a worker process, and there is probability that two or more tasks of the same spout or bolt are assigned to the same worker, in this case, do we need to sync (especially if the spout or bolt contains critical resources such as static members)? Why?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:18:21.947

是的，同一个 spout/bolt 的多个任务可以分配给同一个 worker 并在同一个 JVM 中运行。我建议不要使用非线程安全的静态成员——在这种情况下，你不需要关心同步。

# mysql - Rails 3.2 多数据库

> ID：16152264
> 
> 赞同：0
> 
> 时间：2013-04-22T16:38:45.893
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord

使用 Rails 3.2.13 我有一个带有某些通信设备（比如 200 - 300）的应用程序，每个设备都使用自己的 MySQL 数据库，命名约定如 xy000 + device.id（即 xy000001、xy000012 等）。每个设备（数据库）都有几个继承自 ActiveRecord::Base 的模型（表）。当用户登录到应用程序时，他选择了他想要使用的设备。当然，多个同时用户可以使用不同的设备，因此应用程序应该能够同时连接到多个数据库。

问题是：我怎样才能建立模型来制作

```
ActiveRecord::Base.establish_connection 
```

称呼？如何根据用户输入选择目标数据库，以便每次都可以使用连接到不同数据库的相同模型？

希望解释清楚。如果没有，我可以更准确...谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:57:30.617

在您的 database.yml 文件中使用您想要使用的名称创建一个连接。例如，如果您要命名连接**产品**，您可能会有如下连接：

```
products:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: my_database
  pool: 5
  username: root
  password: abc123
  host: 127.0.0.1 
```

然后在您的模型中，扩展 ActiveRecord::Base 并建立连接，如下所示：

```
class Product < ActiveRecord::Base
  establish_connection :products
end 
```

# android - 使用没有 Fragment 的 LoaderCallbacks

> ID：16152266
> 
> 赞同：8
> 
> 时间：2013-04-22T16:38:49.517
> 
> 标签：android, android-contacts, asynctaskloader

我正在对 AsyncTaskLoader 进行一些动手阅读，以便我可以使用该技术来加载联系人列表。代码工作的唯一时间是当我从扩展`Fragment`为 in的类中实现回调时`MyLoader extends Fragment implements LoaderCallbacks<ArrayList<Contact>>`。还有其他方法吗？我真正需要的只是将联系人列表（姓名、电话、缩略图）发送到我的后端。例如，当我尝试使用`Context`时，因为我可以通过简单地从任何活动中获取它`(Context)this`，所以代码甚至无法编译。我的意思是上下文

```
context.getLoaderManager().initLoader(1, null, this);
//I already changed to Fragment so don't really remember the exact ".context" line.
//But someone who has done this will understand the snippet. 
```

顺便说一句：我正在使用多个参考。一个是[http://developer.android.com/reference/android/content/AsyncTaskLoader.html](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)。

问题（再次）：我可以在没有 Fragment 或 FragmentActivity 的情况下使用 AsyncTaskLoader 吗？

与片段一起使用的代码：

```
package com.example.contactpreload.utils;

import java.util.ArrayList;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.LoaderManager.LoaderCallbacks;
import android.support.v4.content.Loader;

public class LoadingContacts extends Fragment implements LoaderCallbacks<ArrayList<Contact>> {
    ArrayList<Contact> loadedContacts;
    static Fragment fragmentActivity;

    public static LoadingContacts newInstance(int arg) {

        LoadingContacts f = new LoadingContacts();
        Bundle bundle = new Bundle();
        bundle.putInt("index", arg);
        f.setArguments(bundle);
        fragmentActivity = new Fragment();
        return f;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        System.out.println("onCreate()");
        int mIndex = getArguments().getInt("index");
        System.out.println(mIndex);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        System.out.println("onActivityCreated()");
        getLoaderManager().initLoader(1, null, this);
    }

    @Override
    public Loader<ArrayList<Contact>> onCreateLoader(int arg0, Bundle arg1) {

        System.out.println("onCreateLoader()");
        return new ContactsLoader(getActivity());
    }

    @Override
    public void onLoadFinished(Loader<ArrayList<Contact>> loader, ArrayList<Contact> data) {
        loadedContacts = data;
        System.out.println("AND THE CONTACTS ARE: ");
        for (Contact c : loadedContacts) {
            System.out.println("NAME: " + c.getName());
            System.out.println("getPhoneNumberHome: " + c.getPhoneNumber());
        }

    }

    @Override
    public void onLoaderReset(Loader<ArrayList<Contact>> arg0) {
        System.out.println("onLoaderReset()");
        // TODO Auto-generated method stub

    }

}

package com.example.contactpreload;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

import com.example.contactpreload.utils.LoadingContacts;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        LoadingContacts fragment = LoadingContacts.newInstance(1);
        fragment.setRetainInstance(true);
        getSupportFragmentManager().beginTransaction()
            .add(android.R.id.content, fragment).commit();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

显现：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T17:25:03.963

AsyncTaskLoader 与您使用的是 a`Fragment`还是`Activity`.

举个例子，考虑一个列表活动：

```
public class ExampleActivity extends ListActivity implements
LoaderManager.LoaderCallbacks<Cursor> {

     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.todo_list);

         //to start the loader:
         getLoaderManager().initLoader(0, null, this);
     }

     //override the loader callback methods as usual
     // Creates a new loader after the initLoader () call
     @Override
     public Loader<Cursor> onCreateLoader(int id, Bundle args) {
         CursorLoader cursorLoader = new CursorLoader(this,
         uri, projection, null, null, null);
         return cursorLoader;
     }

     @Override
     public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
         adapter.swapCursor(data);
     }

     @Override
     public void onLoaderReset(Loader<Cursor> loader) {
         // data is not available anymore, delete reference
         adapter.swapCursor(null);
     }
} 
```

显然，您需要为列表视图和布局创建相应的适配器，但该示例仅向您展示了一个简单的光标加载器如何为 Activity 工作。

此外，请确保您的所有导入都是一致的，无论是使用`support.v4`库还是常规库：

```
import android.app.LoaderManager;
import android.content.CursorLoader;
import android.content.Loader; 
```

另一个问题是`LoaderCallback`接口是否可以独立使用。如果您认为`LoaderCallback`是 for，则不建议这样做。

[该`LoaderManager.LoaderCallbacks<D>`接口是 LoaderManager 用来向客户端报告数据的简单协定。](http://www.androiddesignpatterns.com/2012/07/understanding-loadermanager.html)这意味着，它的唯一工作是在客户端请求的后台加载一些数据，这实际上是一个活动。

如果你创建一个独立的类，你可以扩展类定义来实现`LoaderManager.LoaderCallbacks<D>`，但是你需要通过某种机制将加载的数据报告回原始活动，这会使一个简单的任务复杂化。

现在，如果您真的固定在这样做，您可以这样创建您的独立类：

```
public class LoadingContacts implements LoaderManager.LoaderCallbacks<Cursor> {
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    return null;
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
}
} 
```

在您的`onLoadFinished`方法中，您需要`Cursor`通过广播或某种消息总线将加载的内容发送回：

*   `LocalBroadcastManager`
*   [奥托](http://square.github.io/otto/)
*   `Messenger`

将此信息发送到 后`MainActivity`，您可以将其加载到适配器并按原样继续。

# javascript - 如何在数组中获取文本？

> ID：16152270
> 
> 赞同：1
> 
> 时间：2013-04-22T16:39:00.353
> 
> 标签：javascript, jquery, return-value, paragraph, xgettext

我有这个数组：

```
var arr  = ['<p id="p1">Paragraph 1<p>', '<p id="p2">Paragraph 2<p>', '<p id="p3">Paragraph 3<p>'] 
```

如何`Paragraph 3`从该数组中获取文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:40:14.413

您可以使用：

```
$(arr[2]).prop('innerHTML'); 
```

或者：

```
$(arr[2]).html(); 
```

**[小提琴](http://jsfiddle.net/kyy6Q/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:29:24.790

`split()`您可以通过使用该方法分割字符串来剥离内部文本。

```
<script>

var arr  = ['<p id="p1">Paragraph 1<p>', '<p id="p2">Paragraph 2<p>', '<p id="p3">Paragraph 3<p>']

/* Even works with closed <p> element */

var arr  = ['<p id="p1">Paragraph 1</p>', '<p id="p2">Paragraph 2</p>', '<p id="p3">Paragraph 3</p>']

alert(arr[2].split('>')[1].split('<')[0])
</script> 
```

# android - android中异步任务的doinbackground方法可以一次调用两个方法吗？

> ID：16152271
> 
> 赞同：1
> 
> 时间：2013-04-22T16:38:59.903
> 
> 标签：android

我正在开发安卓应用程序。我需要一些关于异步任务 doinbackground 方法的说明。

```
 Code:

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.main);

    LongOperation2 op = new LongOperation2();
                op.execute("");

            }

    public void test1() {
            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("id", id));

            try {
                res1 = CustomHttpClient.executeHttpPost(
                        "http://website.com/folder1/firstpage.php",
                        postParameters);
                System.out.println("response in test1" + res1.trim());

            }

            catch (Exception e) {
                e.printStackTrace();
            }

        }

  public void test2() {
            ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("value", value));

            try {
                res2 = CustomHttpClient.executeHttpPost(
                        "http://website.com/folder1/secondpage.php",
                        postParameters);
                System.out.println("response in test2" + res2.trim());

            }

            catch (Exception e) {
                e.printStackTrace();
            }

        }

     private class LongOperation2 extends AsyncTask<String, Void, String> {

            @Override
            protected String doInBackground(String... params) {

                test1();
                                        test2();
                return "Executed";
            }

            @Override
            protected void onPostExecute(String result) {
                dialog1.dismiss();
                try {

                                              Test.this.startActivity(new Intent(Page1.this, Page2.class));
                }

                catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

            @Override
            protected void onPreExecute() {
                dialog1 = ProgressDialog.show(Test.this, "Please wait...",
                        "Retrieving data ...", true);
            }

            @Override
            protected void onProgressUpdate(Void... values) {
            }
        } 
```

在上面的代码中，我有两个方法 test1() 和 test2()。在这两种方法中，我都将参数传递给 web 服务。现在我的疑问是我可以在异步任务的 doInBackground() 中同时调用这两个方法吗？那样可以么？请让我知道或就此提出建议。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:19:30.217

调用两个或多个方法并没有错。但它们会一个接一个地依次执行。doBackground 方法内部没有多处理。

# javascript - 如何根据内容动态调整 Twitter Bootstrap 模式的大小

> ID：16152275
> 
> 赞同：108
> 
> 时间：2013-04-22T16:39:10.123
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

我的数据库内容包含不同类型的数据，例如 Youtube 视频、Vimeo 视频、文本、Imgur 图片等。它们都有不同的高度和宽度。我在互联网上搜索时发现的只是将大小更改为一个参数。它必须与弹出窗口中的内容相同。

这是我的 HTML 代码。我也使用 Ajax 来调用内容。

```
<div id="modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="ModalLabel"></h3>
    </div>
    <div class="modal-body">

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2016-01-28T08:52:23.673

这对我有用，以上都不起作用。

```
.modal-dialog{
    position: relative;
    display: table; /* This is important */ 
    overflow-y: auto;    
    overflow-x: auto;
    width: auto;
    min-width: 300px;   
} 
```

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2013-04-22T17:01:11.463

由于您的内容必须是动态的，您可以在模态的`show`事件上动态设置模态的 css 属性，这将重新调整模态的大小以覆盖其默认规范。引导的原因是使用以下 css 规则将最大高度应用于模态主体：

```
.modal-body {
    position: relative;
    overflow-y: auto;
    max-height: 400px;
    padding: 15px;
} 
```

`css`因此，您可以使用 jquery方法动态添加内联样式：

对于较新版本的引导程序使用`show.bs.modal`

```
$('#modal').on('show.bs.modal', function () {
       $(this).find('.modal-body').css({
              width:'auto', //probably not needed
              height:'auto', //probably not needed 
              'max-height':'100%'
       });
}); 
```

对于旧版本的引导程序使用`show`

```
$('#modal').on('show', function () {
       $(this).find('.modal-body').css({
              width:'auto', //probably not needed
              height:'auto', //probably not needed 
              'max-height':'100%'
       });
}); 
```

或使用 css 规则覆盖：

```
.autoModal.modal .modal-body{
    max-height: 100%;
} 
```

并将此类添加`autoModal`到您的目标模式中。

在小提琴中动态更改内容，您将看到模态相应地调整大小。`[Demo](http://jsfiddle.net/GDVdN/)`

较新版本的引导程序请参阅可用的[`event names`](http://getbootstrap.com/javascript/#modals-events).

*   **show.bs.modal** 此事件在调用 show 实例方法时立即触发。如果由单击引起，则单击的元素可用作事件的 relatedTarget 属性。
*   **shown.bs.modal** 当模态对用户可见时触发此事件（将等待 CSS 转换完成）​​。如果由单击引起，则单击的元素可用作事件的 relatedTarget 属性。
*   **hide.bs.modal** 调用 hide 实例方法后立即触发此事件。
*   **hidden.bs.modal** 当模态对用户隐藏完成时触发此事件（将等待 CSS 转换完成）​​。
*   **loaded.bs.modal** 当模态使用远程选项加载内容时触发此事件。

支持旧版本的引导程序`[modal events](http://twitter.github.io/bootstrap/javascript.html#modals)` 。

*   **Show** - 此事件在调用 show 实例方法时立即触发。
*   **显示**- 当模式对用户可见时触发此事件（将等待 css 转换完成）​​。
*   **hide** - 调用 hide 实例方法时立即触发此事件。
*   **hidden** - 当模式对用户完成隐藏时触发此事件（将等待 css 转换完成）​​。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-06-18T12:44:52.437

我无法让 PSL 的答案为我工作，所以我发现我所要做的就是将包含模态内容的 div 设置为`style="display: table;"`. 模态内容本身说明了它想要多大，并且模态可以容纳它。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-02-22T11:49:19.647

如果您想编写 css，有很多方法可以做到这一点，然后添加以下内容

```
.modal-dialog{
  display: table
} 
```

如果你想添加内联

```
<div class="modal-dialog" style="display:table;">
//enter code here
</div> 
```

不要添加`display:table;`到 modal-content 类。它完成了您的工作，但将您的模态配置为大尺寸请参见以下屏幕截图。如果您将样式添加到模态内容，则第一个图像是如果您将样式添加到模态对话框 [![如果您将样式添加到模态对话框](https://i.stack.imgur.com/lxiGo.png)](https://i.stack.imgur.com/lxiGo.png) 。它看起来很有个性。 [![在此处输入图像描述](https://i.stack.imgur.com/2mURD.png)](https://i.stack.imgur.com/2mURD.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-08-13T13:55:39.520

对于 bootstrap 3 使用，例如

```
$('#myModal').on('hidden.bs.modal', function () {
// do something…
}) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-06-04T10:25:06.050

简单的 CSS 为我工作

```
.modal-dialog { 
max-width : 100% ;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-02-01T22:58:25.520

我只是覆盖了css：

```
.modal-dialog {
    max-width: 1000px;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-05-04T13:51:46.203

`width:fit-content`在模态 div 上设置。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-10-31T08:47:54.013

如果您使用来自 gijgo.com 的 jquery 对话框插件并将宽度设置为自动，则可以这样做。

```
$("#dialog").dialog({
  uiLibrary: 'bootstrap',
  width: 'auto'
});
```

```
<html>
<head>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <link href="http://code.gijgo.com/1.0.0/css/gijgo.css" rel="stylesheet" type="text/css">
  <script src="http://code.gijgo.com/1.0.0/js/gijgo.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
</head>
<body>
 <div id="dialog" title="Wikipedia">
   <img src="https://upload.wikimedia.org/wikipedia/en/thumb/8/80/Wikipedia-logo-v2.svg/1122px-Wikipedia-logo-v2.svg.png" width="320"/>
 </div>
</body>
</html>
```

如果您将 resizable 设置为 true，您还可以允许用户控制大小。[您可以在http://gijgo.com/Dialog/Demos/bootstrap-modal-resizable](http://gijgo.com/Dialog/Demos/bootstrap-modal-resizable)看到有关此的演示

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-04-19T18:57:19.823

一个简单的 CSS 解决方案，将垂直和水平居中模式：

```
.modal.show {
  display: flex !important;
  justify-content: center;
}

.modal-dialog {
  align-self: center;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-02-18T23:30:27.207

**对于 Bootstrap 2 动态调整模型高度**

```
 //Auto adjust modal height on open 
  $('#modal').on('shown',function(){
     var offset = 0;
     $(this).find('.modal-body').attr('style','max-height:'+($(window).height()-offset)+'px !important;');
  }); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-11-15T08:58:08.427

我在 bootstrap 3 中遇到了同样的问题，并且模态体 div 的高度不想大于 442px。在我的情况下，这就是修复它所需的所有 css：

```
.modal-body {
    overflow-y: auto;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-28T06:38:33.137

我的解决方案只是添加以下样式。 `<div class="modal-body" style="clear: both;overflow: hidden;">`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-10T18:56:08.940

从 Bootstrap 4 开始 - 它具有以下风格：

```
@media (min-width: 576px)
.modal-dialog {
    max-width: 500px;
} 
```

因此，如果您希望将**模态**宽度调整为更大的宽度，我建议在您的 css 中使用它，例如：

```
.modal-dialog { max-width: 87vw; } 
```

**请注意**，设置`width: 87vw;`不会覆盖引导程序的`max-width: 500px;`.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-06-03T14:22:08.173

我的搜索把我带到了这里，所以不妨加上我两美分的想法。如果您使用的是[Monkey 友好的 Twitter Bootstrap 模式](https://github.com/nakupanda/bootstrap3-dialog)，那么您可以执行以下操作：

```
 var dialog = new BootstrapDialog({
        id: 'myDialog',
        title: 'Title',
        closable: false,
        // whatever you like configuration here...
    });

    dialog.realize();
    if (isContentAYoutubeVideo()) {
        dialog.getModalDialog().css('width', '80%'); // set the width to whatever you like
    }
    dialog.open(); 
```

希望这可以帮助。

# fragment - 在 starUML 的序列图中使用 alt

> ID：16152278
> 
> 赞同：20
> 
> 时间：2013-04-22T16:39:13.357
> 
> 标签：fragment, uml, sequence, xmi, staruml

我无法发现如何在 starUML 中正确使用 alt/combined 片段，因为我无法在 alt 片段出现后提供条件。可以 any1 列出如何操作的过程它或一些好的教程的链接。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-11-29T14:18:03.937

如果您使用的是**StarUML 2 (Beta)**，您可以执行以下简单步骤：

1.  将组合片段添加到您的序列图中：

![添加组合片段后的初始视图](https://i.stack.imgur.com/JEU7B.png)

2.  如果您尝试通过上下文菜单添加操作数（alt 分区），您会看到没有添加新操作数的选项：

![在 starUML 2 Beta 中没有添加操作数的选项](https://i.stack.imgur.com/bttEk.png)

3.为此，您可以简单地复制已定义的操作数并将其粘贴到组合片段下：

![在 starUML 2 Beta 中复制操作数](https://i.stack.imgur.com/81hSB.png)

![在 starUML 2 Beta 中粘贴操作数](https://i.stack.imgur.com/V6ZMA.png)

4.  之后，只需在操作数的“保护”属性中添加条件子句并调整操作数高度：

![Alt 在序列图中实现](https://i.stack.imgur.com/mAv3P.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-23T12:48:50.033

我刚刚找到了以下步骤。 **请参考[如何在starUML 中设置“alt combineFragment](http://blog.csdn.net/time_hunter/article/details/9428061)，因为我没有 10 声望来发布图片。**

1.创建序列图。

2.将CombinedFragment1 添加到图表中。

3.将“seq CombinedFragment1”更改为“alt CombinedFragment1”

4.选择“交互操作数”

5.左键单击​​“atl CombinedFragment1”，你会发现在“alt CombinedFragment1”中添加了一个“InteractionOperand1”。

6.添加第2个“InteractionOperand”，同第4步，第5步，会有如下分界线。

7.设置InteractionOperand的Guard数据，我的是“isInit”，你会在alt框找到它。

8.添加2nd Guard数据，同步骤7。

9.将图表移动到适当的位置。

同时，我还有一些未知的东西，例如如何使框架位于顶部正面并添加与“B方法”的关系。希望对你有帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-02T17:04:31.837

将交互操作数添加到组合片段。当您选择交互操作数时，您应该在 Properties Inspector 中看到一个“Guard”字段。您可以在此处输入您的条件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-03-19T21:50:27.613

非常感谢您的帖子。

顺便说一句，我在从左窗格添加*组合片段时注意到，*

[![在此处输入图像描述](https://i.stack.imgur.com/OizF7.jpg)](https://i.stack.imgur.com/OizF7.jpg)

**alt**关键字可以显示如下，

[![在此处输入图像描述](https://i.stack.imgur.com/Ygi4o.jpg)](https://i.stack.imgur.com/Ygi4o.jpg)

从右窗格中选择*interactionOperator后，*

[![在此处输入图像描述](https://i.stack.imgur.com/HfDly.jpg)](https://i.stack.imgur.com/HfDly.jpg)

注意：其他有用的关键字，例如“**循环**”，也可以从上面的列表中获得

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-29T14:47:34.080

*   当您添加“组合片段”时，双击图表上的名称
*   然后你会得到一个小图标，名称左侧有 3 条水平线
*   当您单击它时，您可以获得任意数量的交互操作数

# python - 运行两个无限并行循环

> ID：16152279
> 
> 赞同：1
> 
> 时间：2013-04-22T16:39:18.153
> 
> 标签：python, multithreading

我想运行两个无限的并行循环。一种是从服务器读取数据并用数字更新对象。另一个什么也不做，然后读取它，如果发生变化，处理它。不必同步左右。所以我的问题是：

*   如果从一侧写入并从另一侧读取，Python 是否有问题？
*   如果我遇到同步问题，是否需要锁定读/写进程？我应该做其他任何方式吗？
*   最好用什么，穿线还是穿线？
*   下一步，我将从 100 个站点读取并更新 100 个对象，并从 100 个循环中读取更改。是否建议从一开始就使用 Multiprocessing 以便我可以毫无问题地扩展？我需要在读写问题上吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:05:43.820

```
from threading import Thread
from Queue import Queue

class producer(Thread):
    def __init__(self,queue):
        Thread.__init__(self)
        self.queue=queue
        self.start()
    def run(self):
        while 1:
            self.queue.put(update_value())

class consumer(Thread):
    def __init__(self,queue):
        Thread.__init__(self)
        self.queue=queue
        self.start()
    def run(self):
        while True:
            value = queue.get()
            do_whatever_you_want(value)
queue = Queue()
producer(queue)
consumer(queue) 
```

请注意，您可以通过使用 100 个生产者和一个消费者（当然还有一个队列）来扩展 100 个线程应该没问题，但如果您想要 10000 个，情况会有所不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:45:38.070

简短的回答是，无论您认为什么都是您可以理解的。这意味着，出于学习目的，您的代码应该对您有意义。

这是一个示例，它轻巧且易于使用。从线程中获取值很容易。这不是实际的多线程（相同的 CPU 内核）

```
from threading import *

class worker(Thread):
    def __init__(self, input=0):
        self.input = input
        Thread.__init__(self)
        self.start()

    def run(self):
        while 1:
            self.input += 1

x = worker(-100)
y = worker(x.input)

print y.input 
```

这只是一个示例，表明`Y`线程可以访问`x`.. 中的数据。实际上，考虑到两个线程都将更新同一个变量，这可能很危险 :) （简而言之：-100 将在每个周期计算两次，-98 , -96, -94.. 等）

*   不会跨越多个 CPU
*   易于使用（跨线程访问数据很容易）
*   逻辑代码，如果您不熟悉队列系统或分布式系统
*   如果操作系统无法创建更多线程，将引发错误（“限制”）

# php - 用数组中的值替换所有出现的字符串

> ID：16152283
> 
> 赞同：6
> 
> 时间：2013-04-22T16:39:29.280
> 
> 标签：php, string, loops, phpmyadmin

我在将字符串发送到数据库之前对其进行解析。我想遍历`<br>`该字符串中的所有内容，并将它们替换为从数组中获取的唯一数字，然后是 newLine。

例如：

```
str = "Line <br> Line <br> Line <br> Line <br>"
$replace = array("1", "2", "3", "4");

my function would return 
"Line 1 \n Line 2 \n Line 3 \n Line 4 \n" 
```

听起来很简单。我只会做一个while循环，获取所有`<br>`使用strpos的情况，然后使用str_replace将它们替换为所需的数字+\n。

问题是我总是出错，我不知道我做错了什么？可能是一个愚蠢的错误，但仍然很烦人。

这是我的代码

```
$str     = "Line <br> Line <br> Line <br> Line <br>";
$replace = array("1", "2", "3", "4");
$replaceIndex = 0;

while(strpos($str, '<br>') != false )
{
    $str = str_replace('<br>', $replace[index] . ' ' .'\n', $str); //str_replace, replaces the first occurance of <br> it finds
    index++;
} 
```

请问有什么想法吗？

提前致谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T16:43:52.343

我会使用正则表达式和自定义回调，如下所示：

```
$str = "Line <br> Line <br> Line <br> Line <br>";
$replace = array("1", "2", "3", "4");
$str = preg_replace_callback( '/<br>/', function( $match) use( &$replace) {
    return array_shift( $replace) . ' ' . "\n";
}, $str); 
```

请注意，这假设我们可以修改`$replace`数组。如果不是这种情况，您可以保留一个计数器：

```
$str = "Line <br> Line <br> Line <br> Line <br>";
$replace = array("1", "2", "3", "4");
$count = 0;
$str = preg_replace_callback( '/<br>/', function( $match) use( $replace, &$count) {
    return $replace[$count++] . ' ' . "\n";
}, $str); 
```

你可以从[这个演示](http://viper-7.com/IXZcbM)中看到这个输出：

```
Line 1 Line 2 Line 3 Line 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:43:40.547

```
$str = str_replace('<br>', $replace[$index] . ' ' .'\n', $str); 
```

这是替换它发现的**所有**出现。`<br>`

正确的是每次迭代只做一次替换：`substr_replace`可以替换字符串的一个部分。正确的是：

```
while($pos = strpos($str, '<br>') !== false )
{
    $str = substr_replace($str, $replace[$replaceIndex] . ' ' .'\n', $pos, 4); // The <br> is four bytes long, so 4 bytes from $pos on.
    $replaceIndex++;
} 
```

（不要忘记`$`之前的`replaceIndex`!`$replaceIndex`是一个变量）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:53:11.617

如果你只是想数它，你也可以使用它。

```
$str_expl = explode('<br>',$str);
foreach($str_expl as $index=>&$str)
    if(!empty($str))
        $str .= ($index+1);
$str = implode($str_expl); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T16:47:15.660

你需要记住`$`变量前面的。另外，尝试使用[php regex function](https://stackoverflow.com/questions/1252693/php-str-replace-that-only-acts-on-the-first-match)，它允许指定替换的数量。

```
<?php
$str     = "Line <br> Line <br> Line <br> Line <br>";
$replace = array("1", "2", "3", "4");
$index = 0;
$count = 1;

while(strpos($str, '<br>') != false )
{
    $str = preg_replace('/<br>/', $replace[$index] . " \n", $str, 1); //str_replace, replaces the first occurance of <br> it finds
    $index++;
}
echo $str
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-19T08:17:38.293

这是我的版本。8 行格式化，没有正则表达式，KISS。

```
$str = "Line <br> Line <br> Line <br> Line <br>";
$replace = array("1", "2", "3", "4");

$temp = explode("<br>", $str);
$result = "";
foreach ($temp as $k=>$v) {
    $result .= $v;
    if ($k != count($temp) - 1) {
        $result .= $replace[$k];
    }
}

echo $result; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-09T11:21:24.680

将[`preg_replace_callback`](https://www.php.net/manual/en/function.preg-replace-callback)帮助您操作替换过程，而[nickb](https://stackoverflow.com/a/16152356/3832970)的回答显示了如何完成。

但是，匹配的数量可能比`$replace`数组中的项目数量多。如果要从第 0 项重新开始使用其元素，则需要在计数器等于数组大小时*重置计数器。*`$replace`

查看[PHP 演示](https://3v4l.org/kdgra)：

```
$text = "Line <br> Line <br> Line <br> Line <br> Line <br> Line <br>";
$replace = array("1", "2", "3", "4");
$counter = 0;
$text = preg_replace_callback('~<br\s*/?>~', function($m) use($replace, &$counter) {
    if ($counter === count($replace)) { $counter = 0; }
    return $replace[$counter++];
}, $text);
echo $text; 
```

输出：`Line 1 Line 2 Line 3 Line 4 Line 1 Line 2`。

请注意，`<br\s*/?>`正则表达式匹配`br`可以自关闭的标签（`/?`匹配可选`/`字符，并且为了`/`在模式中保持未转义，我使用`~`字符作为[正则表达式分隔符](https://www.php.net/manual/en/regexp.reference.delimiters.php)）并且在前后可能包含零个或多个空格（`\s*`）/ 。`br``/>``>`

# java - TCPMon 下载 jar 无法在 Windows 上运行

> ID：16152287
> 
> 赞同：3
> 
> 时间：2013-04-22T16:39:41.563
> 
> 标签：java, wso2esb, tcpmon

我下载[了 TCPmon](https://code.google.com/p/tcpmon/)以尝试通过 WSO2 ESB 监控流量。但是，当我尝试执行 jar 时，什么也没有发生。如何让 jar 执行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T16:39:41.563

他们未能在 MANIFEST 中正确设置主类。

创建一个将加载 Java 环境变量并设置主类的 bat 文件。

```
:checkJava
if "%JAVA_HOME%" == "" goto noJavaHome
if not exist "%JAVA_HOME%\bin\java.exe" goto noJavaHome
goto launch

:noJavaHome
echo "You must set the JAVA_HOME variable before running TCPMon."
goto end

:launch
"%JAVA_HOME%\bin\java.exe" -cp ".;tcpmon-1.1.jar" com.codegoogle.tcpmon.MainWindow 
```

[https://code.google.com/p/tcpmon/issues/detail?id=15](https://code.google.com/p/tcpmon/issues/detail?id=15)

**编辑**

鉴于我的用例是针对 WSO2 并且 TCPMon 已经包含在内，因此不需要。但它仍然是从谷歌存储库下载 TCPMon 的有用片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T17:07:24.903

WSO2 ESB 提供 tcpmon jar 和一个 bat 文件来运行它。您可以在 bin 文件夹中找到它，无需单独下载。

# windows-phone-7 - 如何在 windows phone 8 中捕获屏幕活动？

> ID：16152289
> 
> 赞同：1
> 
> 时间：2013-04-22T16:39:41.187
> 
> 标签：windows-phone-7, windows-phone-8

我是 Windows Phone 8 的新手，需要您的帮助来捕捉视频中的屏幕活动。我必须制作屏幕上执行的活动的视频吗？

一个让我印象深刻的解决方案是通过在某个时间分配一个计时器来以图像形式捕获屏幕，但这不是正确的方法，因为我必须制作屏幕活动的视频？建议您的意见如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:32:16.417

没有内置的方式来做你想做的事。

您将需要两件事：

1.  按照您的描述做一个调度计时器
2.  找到将这些帧编码成电影的代码。这不是手机支持的 ​​API - 您需要找到现有代码并使用它。我不知道存在这样的代码，但我只找过一两次，而且不是很努力。您可能会创建一个 MJPG，这是一种相当简单的视频格式，但即使这样也不是微不足道的，而且结束文件的大小可能令人望而却步。

# java - 内存数据范围的高性能过滤

> ID：16152293
> 
> 赞同：0
> 
> 时间：2013-04-22T16:39:55.423
> 
> 标签：java, performance, collections, filtering

我有一组复杂的 XML 对象，它们是存储位置数据和属性

有些商店有 50 个商店位置，有些商店有 1500 个商店位置，有些商店有 20,000 个商店位置。

我想为商店创建一个 Java 对象列表，让我可以按纬度/经度过滤商店位置以及有关商店位置的其他数据

最重要的过滤器是纬度/经度；在所有情况下，我都需要通过最大和最小纬度以及最大和最小长度来查找区域内的所有商店：在 (40.146364,-75.406188) 和 (40.228694,-75.491295) 之间

允许重复的纬度/经度值

我在想我会创建一个对象，其中包含一些用于过滤的关键显式属性（如 lat、long、存储类型代码）和一个包含完整 XML 的字符串

我在想这些对象像 ArrayList 或其他类型一样进入 Collection 中，而键是 Lat/long 的字符串。

快速过滤收藏很重要；它每天会发生数百万次。创建集合发生在启动时，如果过滤器速度很快，性能可能会降低。

lat/long 过滤器具有非常高的特异性；具有 1500 个商店位置的示例通常返回 50 个或更少的商店位置。

我在想我会遍历集合，并解析纬度/经度的密钥。如果纬度/经度在所需范围内，我将获取对象并过滤其他不太具体的搜索条件。

由于查询的数量和相同的查询几乎永远不会重复，直接查询数据库不是一个好主意。数据库缓存不会发生，因为每个查询的参数会不同（纬度/经度通常有 5 个小数位）。浏览集合意味着我将负载从数据库转移到应用服务器，但 Oracle 许可证和集群比负载平衡一堆 AWS 或 Tomcat 实例更昂贵/复杂

小组对这些要求和约束的实现有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:51:12.713

由于经纬度查询，您可能希望将数据存储在[区间树](http://en.wikipedia.org/wiki/Interval_tree)中。 [这是我发现的一个 Java 实现](http://thekevindolan.com/2010/02/interval-tree/)。简而言之，区间树可让您查询区间，快速定位所有对象，例如纬度在 x1 和 x2 之间的对象；然后将其与经度在 y1 和 y2 之间的对象相交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:50:17.510

The numbers you're talking about aren't scary and I would expect suitable performance from an in-memory implementation. If you can't store the complete object tree in memory, at least store the salient info (lat/long + ids) and filter on that.

As ever, I would implement some solution first before deciding performance is an issue.

# sql - 紧凑修复后性能下降/查询缓慢 - Access 2007

> ID：16152294
> 
> 赞同：1
> 
> 时间：2013-04-22T16:40:02.190
> 
> 标签：sql, ms-access, optimization, ms-access-2007, vba

我正在使用 VBA - Access 执行大量插入操作。VBA 代码位于文件“control.accdb”中，对“data.accdb”执行操作过程中很少有表是从 VBA 创建的，很少有这样的。

完成流程的第一阶段后，我手动或从 DBEngine.Compact VBA 代码执行压缩和修复。第二阶段（相同的代码 - 下一次迭代）变得非常非常慢。

这是插入代码：

```
SQL = "INSERT INTO ExpectedResult " _
  & "( DLID, NumRows, Total, SubjectBlock, NextSubjectBlockSeq ) " _
  & "SELECT INVDL.DLID, 1 AS Expr1, INVDL.Amount, " _
  & "INVDL.SubjectBlock,INVDL.SubjectBlockSeq+1 AS Expr2 " _
  & "FROM INVDL where SubjectBlock > 0;"
cdb.Execute (SQL)
TargetNumRows = 2
Do While TargetNumRows < MaxSubjectBlockSeq + 1
    Set qdf = cdb.QueryDefs("pq_appendToExpectedResult")
    qdf!TargetNumRows = TargetNumRows  '' parameter value
    qdf.Execute
    TargetNumRows = TargetNumRows + 1
    Set qdf = Nothing
Loop

where pq_appendToExpectedResult :

PARAMETERS TargetNumRows Long;
INSERT INTO ExpectedResult _
  ( DLID, NumRows, Total, SubjectBlock, NextSubjectBlockSeq ) _
SELECT INVDL.DLID+1-[TargetNumRows], [TargetNumRows] AS Expr1, _
  [ExpectedResult].[Total]+[INVDL].[Amount] AS NewTotal, _
  INVDL.SubjectBlock, [INVDL].[SubjectBlockSeq]+1 AS Expr2 _
FROM INVDL INNER JOIN ExpectedResult _
   ON (INVDL.SubjectBlock = ExpectedResult.SubjectBlock)  _
   AND (INVDL.SubjectBlockSeq = ExpectedResult.NextSubjectBlockSeq) _
WHERE (((INVDL.SubjectBlockSeq)>=[TargetNumRows])  _
   AND (ExpectedResult.NumRows=[TargetNumRows]-1)); 
```

据我所知，INVDL 中的所有索引都保持不变。我删除表 ExpectedResult 并在每个阶段（迭代）之后使用索引重新创建它。其他表 - 不要认为会有任何区别。

# javascript - jquery if 语句检查是否有输入值，否则在单击链接时自动填充

> ID：16152295
> 
> 赞同：3
> 
> 时间：2013-04-22T16:40:08.173
> 
> 标签：javascript, jquery

我有一个简单的`jQuery`声明，如下所示：

```
$(document).ready(function() {
    $('#ltc_link').click(function() {
        $('#USERDEFINE1').val( 'LT' );
        $('#PHONENIGHT').val( '(111)111-1111' );
        $('#INTERNET').val( 'NONE' );
        $('#last_purchase').val( 'N/A' );
        $('#last_purchase_date').val( 'N/A' );
    });
}); 
```

单击链接时，它会填充输入字段`#ltc_link`。

如果已经在一个或所有字段中输入了文本，那么我不希望单击/链接功能覆盖用户输入的内容。我知道在javascript中我可以这样做：

```
if (!third.value) { third.value = '(111)111-1111'; }
if (!fourth.value) { fourth.value = 'NONE'; }
if (!fifth.value) { fifth.value = 'N/A'; }
if (!sixth.value) { sixth.value = 'N/A'; } 
```

需要一些`jQuery`语法帮助。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T16:44:59.380

我建议如下：

```
var defaults = {
    USERDEFINE1 : 'LT',
    PHONENIGHT : '(111)111-1111',
    INTERNET : 'NONE',
    last_purchase : 'N/A',
    last_purchase_date : 'N/A'
};
$('#ltc_link').click(function() {
    // selects the elements
    $('#USERDEFINE1, #PHONENIGHT, #INTERNET, #last_purchase, #last_purchase_date').val(
        function(i, v) {
            // checks if the current value 'v' is an empty string,
            // if it is supplies the default value (from the object), if not
            // it sets the value to the current value
            return v == '' ? defaults[this.id] : v;
    });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/XdCYt/)。

参考：

*   [条件（三元）运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)。
*   [JavaScript 对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。
*   [`val()`](http://api.jquery.com/val/).

# html - 在 zurb-foundation 中设置 div 的最小高度

> ID：16152302
> 
> 赞同：2
> 
> 时间：2013-04-22T16:40:26.663
> 
> 标签：html, zurb-foundation, css

我刚刚通过我的朋友介绍了 Zurb Foundation 4 框架。有趣的东西。但我遇到了一个我似乎无法理解的问题。我有一个基于 4 行（页眉、导航栏、内容、页脚）的网站；

```
<div class="row siteBase">

   <div class="row siteHeader" id="siteHeader">
     <div class="large-12 c7olumns">
       <h2>Welcome to Foundation</h2>
       <p>This is version 4.1.2.</p>      
     </div>
   </div>

   <div class="row siteNavbar" id="siteNavbar">      
    navbar
   </div>

   <div class="row siteBody" id="siteBody">
    base
   </div>

   <div class="row siteFooter" id="siteFooter">
    footer
   </div>

</div> 
```

这是我的 CSS

```
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%; 
}

.siteBack {
    background-color: #545454;      
}

.siteBase { 
    /*base size and color*/
    width: 1280px;      
    min-height: 100%;
    margin: 0 auto;
    background-color: #f2f2f2;  

    /* exact fit the contents to the border */
    padding-left:15px;
    padding-right:15px;

    /* border size and color */
    border-style: solid;
    border-left-width: 4px;
    border-top-width: 0px;
    border-right-width: 4px;
    border-bottom-width: 0px;
    border-color: #7da500;

    /* add some shadows to the borders */
    -moz-box-shadow: 0 0 10px 5px #272727;
    -webkit-box-shadow: 0 0 10px 5px #272727;
    box-shadow: 0 0 10px 5px #272727;
}

.siteHeader
{
    width: 100%;
    height: 250px;
    background-color: #7da500;
}

.siteNavbar
{
    height: 50px;
    background-color: #1d1d1d;
}

.siteBody
{
    min-height: 100% auto;
    margin: 0 auto;
    background-color: #f2f2f2;  
}

.siteFooter
{
    height: 50px;
    background-color: #7da500;
} 
```

我遇到的问题是 sitebody div 没有拉伸到完全 100%。页眉和导航栏是固定大小的，页脚也是如此。但我不希望 sitebody div 占用剩余空间，以便页脚始终放置在屏幕的底部（至少）。

我在这里想念什么？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:58:39.457

基本上，您需要将页脚粘贴到页面底部。这样，即使你的主要内容很小，你也会有一个完整的身体。您可以查看这个[SO question](https://stackoverflow.com/questions/15676196/zurb-4-separately-scrollable-sections)以了解它是如何实现的。那里可能会发生很多事情，因为该布局有点复杂。所以我为您做了一个示例，您可以将其用于[更简单的布局](http://jsfiddle.net/RE93S/1/)。这是来自其他 SO 问题的修改后的 css。

```
html, body, #wrapper{ height: 100%; }
body > #wrapper{height: auto; min-height: 100%;}
#main { padding-bottom: 75px; /*  same height as the footer */
    overflow:hidden;
    top: 75px; bottom: 0; left: 0; right: 0;            
    background-color:yellow;           
}  
#footer { 
    position: relative;
    margin-top: -75px; /* negative value of footer height */
    height: 75px;
    clear:both;
} 

.clearfix:after {content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;}
.clearfix {display: inline-block;} 
```

# opencv - OpenCV 帧延迟

> ID：16152308
> 
> 赞同：1
> 
> 时间：2013-04-22T16:40:50.590
> 
> 标签：opencv, frame

我有一个简单的代码，根据用户输入，相机将捕获图像。这是代码：

```
for (int i=0; i<4; i++){
    cvWaitKey(0);                         //wait for input then take picture
    Mat grabbed = cam1.CamCapture();
    Image[i].setImage(grabbed.clone());
    imshow("picture", Image[i].getImage());
    cvWaitKey(1);
} 
```

问题是在显示图像时，Image[i] 正在显示用于 Image[i-1] 的图片。

我不明白似乎有什么问题，因为我认为进入循环后，我必须按下一个键，然后相机会捕捉一张图片并将其存储到第一个对象 Image[0] 中，过程是重复4次。然而，情况似乎并非如此。

我目前有一个使用嵌套循环的解决方法。诠释 k; for (int i=0; i<4; i++){ cvWaitKey(0); //等待输入然后拍照 for (int k=0;i<5;k++){ Mat grabbed = cam1.CamCapture(); Image[i].setImage(grabbed.clone()); } imshow("图片", Image[i].getImage()); cvWaitKey(1); }

然而，这似乎不是一种有效的方式。我认为这个问题可能是由于缓冲区问题，但我不太确定。

请指教，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:42:41.957

将 for 循环更改为 do while 循环

诠释我=0；

```
do {
    cvWaitKey(0);                         //wait for input then take picture
    Mat grabbed = cam1.CamCapture();
    Image[i].setImage(grabbed.clone());
    imshow("picture", Image[i].getImage());
    cvWaitKey(1);
}while ( i<4; i++) 
```

这是未经测试的

# java - 字符串创建和字符数组内存分配

> ID：16152311
> 
> 赞同：6
> 
> 时间：2013-04-22T16:41:10.927
> 
> 标签：java, string, memory, permgen

我已经阅读了很多关于创建 String 时内存分配的冲突文章。有些文章说 new 运算符在堆中创建一个字符串，而字符串字面量是在字符串池 [Heap] 中创建的，而有些文章说 new 运算符在堆中创建一个对象，在字符串池中创建另一个对象。

为了分析这一点，我编写了以下程序，该程序打印 String char 数组和 String 对象的哈希码：

```
import java.lang.reflect.Field;

public class StringAnalysis {

    private int showInternalCharArrayHashCode(String s)
            throws SecurityException, NoSuchFieldException,
            IllegalArgumentException, IllegalAccessException {
        final Field value = String.class.getDeclaredField("value");
        value.setAccessible(true);
        return value.get(s).hashCode();
    }

    public void printStringAnalysis(String s) throws SecurityException,
            IllegalArgumentException, NoSuchFieldException,
            IllegalAccessException {
        System.out.println(showInternalCharArrayHashCode(s));

        System.out.println(System.identityHashCode(s));

    }

    public static void main(String args[]) throws SecurityException,
            IllegalArgumentException, NoSuchFieldException,
            IllegalAccessException, InterruptedException {
        StringAnalysis sa = new StringAnalysis();
        String s1 = new String("myTestString");
        String s2 = new String("myTestString");
        String s3 = s1.intern();
        String s4 = "myTestString";

        System.out.println("Analyse s1");
        sa.printStringAnalysis(s1);

        System.out.println("Analyse s2");
        sa.printStringAnalysis(s2);

        System.out.println("Analyse s3");
        sa.printStringAnalysis(s3);

        System.out.println("Analyse s4");
        sa.printStringAnalysis(s4);

    }

} 
```

该程序打印以下输出：

```
Analyse s1
1569228633
778966024
Analyse s2
1569228633
1021653256
Analyse s3
1569228633
1794515827
Analyse s4
1569228633
1794515827 
```

从这个输出中可以清楚地看出，无论 String 是如何创建的，如果 String 具有相同的值，那么它们共享相同的 char 数组。

现在我的问题是这个 chararray 存储在哪里，是存储在堆中还是存储在 permgen 中？我还想了解如何区分堆内存地址和永久内存地址。

如果它存储在 permgen 中，我有一个大问题，因为它会占用我宝贵的有限 permgen 空间。如果 char 数组没有存储在 permgen 中，而是存储在堆中，那么这是否意味着字符串文字也使用堆空间 [这是我从未读过的东西]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:20:26.877

从字符串 src

```
 public String(String original) {
        this.value = original.value;
        this.hash = original.hash;
    } 
```

很明显，使用此构造函数创建的字符串与原始字符串共享 char 数组（值）。

需要注意的是，API 不保证这种共享：

*初始化一个新创建的 String 对象，使其表示与参数相同的字符序列；换句话说，新创建的字符串是参数字符串的副本。除非需要原始的显式副本，否则不需要使用此构造函数，因为字符串是不可变的*

例如，String.substring 用于与原始字符串共享 char 数组，但在 Java 1.7 的最新版本中，String.substring 会复制 char 数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T17:16:25.363

> 从这个输出中可以清楚地看出，无论 String 是如何创建的，如果 String 具有相同的值，那么它们共享相同的 char 数组

不完全是：这是因为您从一个文字字符串开始，并从中创建多个实例。在 OpenJDK (Sun/Oracle) 实现中，如果支持数组表示整个字符串，它将被复制。您可以在`src.jar`或此处查看此内容：http: [//grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.%3Cinit% 3E%28java.lang.String%29](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.%3Cinit%3E%28java.lang.String%29)

如果您仔细构建源字符串，使它们从不同的字符数组开始，您会发现它们不共享支持数组。

> 现在我的问题是这个字符数组存储在哪里

据我所知，字符串文字的字符数组存储在堆上（那些对类加载内部有更好了解的人，请随时发表评论）。从文件加载的字符串将*始终*将它们的后备数组存储在堆上。

我确实知道的是，所使用的数据结构`intern()`只引用了`String`对象，而不是它的字符数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:15:55.243

最后一个：根据定义，字面量“myTestString”是实习的，所有具有相同值的实习 String 引用都指向同一个物理 String 对象。因此，文字将与`intern`.

[更正] 根据定义，具有相同字符序列值的两个字符串的 hashCode（但不是 identityHashCode）将是相同的。

`char[]`另一方面，数组的 hashCode只是其地址位的混乱，与数组的内容无关。这表明该`value`数组在所有上述情况下都是完全相同的数组。

（更多信息：String 的旧实现包括指向 a 的指针`char[]`、偏移量、长度和 hashCode 值。较新的实现不推荐使用偏移值，String 值从数组的元素 0 开始。其他（非 Sun /non-Oracle) 实现取消了单独的`char[]`数组，并将字符串字节包含在主堆分配中。不要求该`value`字段实际存在。）

[继续] 复制测试用例并添加几行。hashCode 和 identityHashCode 在给定的 上产生相同的值`char[]`，但在具有相同内容的不同数组上产生不同的值。

s1 和 s2 中的数组相同的事实几乎可以肯定是因为它们共享`char[]`内部文字“myTestString”的数组。如果字符串是从“新”数组单独构造的，`char[]`它们将是不同的。

所有这一切的主要内容是 String 字面量是实习的，并且当使用`new String(String)`.

```
Char array hash codes
a1.hashCode() = 675303090
a2.hashCode() = 367959235
a1 identityHashCode = 675303090
a2 identityHashCode = 367959235
Strings from char arrays
a1 String = ABCDE
a1 String's hash = 62061635
a1 String value's identityHashCode = 510044439
a2 String = ABCDE
a2 String's hash = 62061635
a2 String value's identityHashCode = 1709651096 
```

# .net - 为什么连接池使用过多的内存？

> ID：16152312
> 
> 赞同：2
> 
> 时间：2013-04-22T16:41:22.037
> 
> 标签：.net, sql-server-2008, c#-4.0

我有一种情况，在使用[SqlDataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader%28v=vs.100%29.aspx)时，我在读取 9k 文本字段时一直收到 System.OutOfMemory 错误。这发生在 MsTest 测试中，并且至少目前一直在发生。

我相当肯定所有 SqlConnections、SqlDataReaders 和 SqlCommands 都包装在`using`块中。指定`System.Data.CommandBehavior.SequentialAccess`何时执行阅读器无效。

`SqlConnection.ClearAllPools()`但是，如果我在测试的麻烦部分打开连接之前拨打电话，问题就会消失。

为什么连接池会占用过多的内存？

**编辑：这是堆栈跟踪的相关部分**

```
at System.Data.SqlClient.TdsParser.TryReadPlpUnicodeChars(Char[]& buff, Int32 offst, Int32 len, TdsParserStateObject stateObj, Int32& totalCharsRead)
at System.Data.SqlClient.TdsParser.TryReadSqlStringValue(SqlBuffer value, Byte type, Int32 length, Encoding encoding, Boolean isPlp, TdsParserStateObject stateObj)
at System.Data.SqlClient.TdsParser.TryReadSqlValue(SqlBuffer value, SqlMetaDataPriv md, Int32 length, TdsParserStateObject stateObj)
at System.Data.SqlClient.SqlDataReader.TryReadColumnInternal(Int32 i, Boolean readHeaderOnly)
at System.Data.SqlClient.SqlDataReader.TryReadColumn(Int32 i, Boolean setTimeout, Boolean allowPartiallyReadColumn)
at System.Data.SqlClient.SqlDataReader.GetValueInternal(Int32 i)
at System.Data.SqlClient.SqlDataReader.GetValue(Int32 i)
at System.Data.SqlClient.SqlDataReader.get_Item(Int32 i) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:44:52.253

您可能遇到了[大对象堆](https://www.simple-talk.com/dotnet/.net-framework/the-dangers-of-the-large-object-heap/)，这样个别记录要么没有被收集，要么堆没有被正确压缩（碎片整理），这样你的应用程序的*地址空间*（不是物理内存）就变满了（大部分都是空洞）并且您不再能够分配新内存。

# angularjs - 如何仅针对 Angular.js 中的 JSON 对象的子对象？

> ID：16152313
> 
> 赞同：0
> 
> 时间：2013-04-22T16:41:22.867
> 
> 标签：angularjs

我似乎已经设法编写了一个影响 中所有内容的脚本，`$scope`有没有办法以 JSON 对象的子对象为目标/只输入带有“like”的提要？

这是一个Plunker：

[http://plnkr.co/edit/IGxw8P7YT85jVRMnOVgU](http://plnkr.co/edit/IGxw8P7YT85jVRMnOVgU)

谢谢，

J.P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:10:07.917

将`feed`对象传递给单击处理程序，以便它知道要修改哪个提要：

```
<button ng-show="!feed.isLiked" ng-click="likeClicked(feed)">Like</button> 
```

点击处理程序更新提要的“喜欢”状态：

```
$scope.likeClicked = function (feed) {
    feed.isLiked = !feed.isLiked;
}; 
```

这是一个更新的 Plunker：[http ://plnkr.co/edit/4WX14PfAnkcFOaRWJOGz?p=preview](http://plnkr.co/edit/4WX14PfAnkcFOaRWJOGz?p=preview)

# backbone.js - Backbone.js - 当我循环并保存我的模型时，如何显示保存的 gif？

> ID：16152314
> 
> 赞同：1
> 
> 时间：2013-04-22T16:41:30.227
> 
> 标签：backbone.js

我允许用户按下保存按钮，因此在该按钮的事件方法中，我需要保存集合中的所有现有模型并销毁在按下按钮之前删除的所有模型。

我想做的是在这一切发生时显示一个 ajax gif。如何知道所有 model.save() 和 model.destroy() 方法何时完成？

这是按下保存按钮时我调用的方法：

```
 Save: function() {
                var response = confirm("Are you sure you want to save?");

                if (response == true) {
                    // save items
                    var self = this;
                    this.collection.each(function(item) {
                        self.RemoveTempId(item);  // if temp id exists remove it
                        item.save();
                    });
                    // destroy items in the trashcan
                    for (var i = this.trashCan.length - 1; i >= 0; i--) {
                        this.trashCan[i].destroy();
                    }
                }
            }, 
```

当他们都完成后，我如何才能进入一个事件，以便我可以隐藏我的 ajax gif？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:02:24.617

这些方法（`save`和`destroy`）中的每一个都返回一个承诺。`when`您可以使用 jQuery方法等待多个 Promise 完成。例如：

```
$.when( model.save(), model2.destroy() ).then(function() { /* do stuff */ }); 
```

当然，这应该适合您的用例（因为您循环遍历每个模型，因此您可能会使用一个数组和`.apply()`deferred on 的数组`when`），但是您明白了主要思想。

另外，我建议将`confirm`视图中的对话框和加载 gif 与模型/集合分开。这将创建更好的关注点分离和更易于管理的代码。

带有延迟数组的示例：

```
var defs = [];
this.collection.each(function(item) {
    defs.push( item.save() );
});

$.when.apply( null, defs ).then(function() {
    /* everything is saved */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:59:33.353

当用户在您的提示后同意保存时，只需在页面上显示您的 GIF 图像并将其位置设置为您要显示的位置。可能，您应该将其显示在屏幕中央。

在您的保存方法中传递一个成功和错误处理程序作为选项哈希并在那里隐藏您的 GIF 图像。

查看[Backbone Model 保存文档](http://backbonejs.org/#Model-save)

一些伪代码是这样的：-

```
saveModel: function() {
    //Show image now. Use CSS to make it visible.
    $('#gifSelector').show();

    model.save({ 'x':1, 'y':2}, // The default attributes in your model which we wanna save
    success: function() {
        alert('Model has been saved');
        //Hide Gid image
        $('#gifSelector').hide();
    },
    error: function(e) {
        alert('Encountered some problem in saving model');
        // Hide GIF image
        $('#gifSelector').hide();
    }
} 
```

**一个建议**：由于您将为每个模型调用此方法，并且每次我们不想查询 DOM 以使用其选择器获取 GIF 图像。最好存储对它的全局引用并使用该引用显示/隐藏它。它会更快;）

# javascript - 试图使表格中的每一行嵌入可点击的表单中，以使项目按设计工作（无提交按钮）

> ID：16152315
> 
> 赞同：-3
> 
> 时间：2013-04-22T16:41:37.793
> 
> 标签：javascript, php, html, forms, html-table

我已经解决了表格在表格中工作的问题。我刚刚添加了一个额外的`<td>`字段并在其中创建了一个隐藏的输入字段，它将为表中的每个提示发布一个单独的 tipID。整个表格也用 form 标记包裹，以获取要 POST 到下一页的tipID。

现在我需要知道如何使每个单独的表格行从表单中发送数据，就像每个表格都是一个按钮或使隐藏按钮单击这些表格行之一。

```
<form method="post" action="tips.php">
<div id="tippanel"> 
     <table id="tippabl">
         <tbody>
           <?php if(!empty($tips))
             while ($recd = mysql_fetch_array($tips, MYSQL_ASSOC)) {            
             echo "<tr> <td class='tiptxt' >"; echo $recd['tip_desc']; echo "</td> <td class='tiptime'>";
             echo "<span>".date('H:i', strtotime($recd['datetime']))."</span>"; echo "</br>"; 
             echo date('m-d-y', strtotime($recd['datetime'])); echo"</td><td><input type="; 
             echo '"hidden" '; echo 'name='; echo '"tip_id" '; echo 'value="'; 
             echo ($recd['tip_id']); echo'"></td></tr>';
                }   
           ?>                                   
         </tbody>
      </table>          
     </div>
</form> 
```

我的下一页将使用下面的查询并回显完整的tip_desc，因为提示可以是几百个字符。它还将有一个文本区域，管理员可以在其中向原始用户发送消息。我的 PHP 和查询在下一页应该如下所示：

```
<?php
$tipID = $_POST['tipID'];
mysql_query="SELECT * FROM tips WHERE tipID = $tipID";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:45:43.493

只需将您的表格包围成一个表格，在其中放置一个隐藏的输入字段。

```
<form action="tips.php">
    <input name="tipID" type="hidden" value="id" />
    <div id="tippanel"> 
        <table id="tippabl">
            <tbody>
                <?php 
                    if(!empty($tips)) {
                        while ($recd = mysql_fetch_array($tips, MYSQL_ASSOC)) {             
                            echo "<tr> <td class='tiptxt' >"; echo $recd['tipDescription'];         
                            echo "</td> <td class='tiptime'>";
                            echo "<span>".date('H:i', strtotime($recd['dateTime']))."</span>"; 
                            echo "</br>"; echo date('m-d-y', strtotime($recd['dateTime']));
                            echo"</td></tr>";
                        }
                    }
                ?>                                  
            </tbody>
        </table>
    </div>
</form> 
```

看看这个让你的行可以点击。工作[演示](http://jsbin.com/ivobe/1/edit)

```
function addRowHandlers() {
    var table = document.getElementById("tableId");
    var rows = table.getElementsByTagName("tr");
    for (i = 0; i < rows.length; i++) {
        var currentRow = table.rows[i];
        var createClickHandler = 
            function(row) 
            {
                return function() { 
                    var cell = row.getElementsByTagName("td")[0];
                    var id = cell.innerHTML;
                    alert("id:" + id);
                };
            };
        currentRow.onclick = createClickHandler(currentRow);
    }
} 
```

学分：[SolutionYogi](https://stackoverflow.com/users/361883/sennheiser)

参考：[将 onclick 事件添加到表格行](https://stackoverflow.com/questions/1207939/adding-an-onclick-event-to-a-table-row)

# neo4j - Cypher：ThisShouldNotHappenError：此执行计划不应该存在

> ID：16152324
> 
> 赞同：4
> 
> 时间：2013-04-22T16:42:10.227
> 
> 标签：neo4j, cypher

以下查询有什么问题？[Neo4j 1.8.2，嵌入式]

```
start merchant = node:merchants('id:10')
match (merchant)<-[:VALID_AT]-(offer)-[:TARGET_PINCODE]->(pincode)<-[:RESIDES_IN]-(customer) where (offer)-[:VALID_OFFER]->() and offer.endDate > 1
return count(offer) 
```

Webadmin 返回未定义

Java 异常：

> org.neo4j.helpers.ThisShouldNotHappenError: Developer: Andres 声称：这个执行计划不应该存在。在 org.neo4j.cypher.internal.commands.PathExpression$$anonfun$4.apply(PathExpression.scala:47) 在 org.neo4j.cypher.internal.commands.PathExpression$$anonfun$4.apply(PathExpression.scala:46)在 scala.collection.LinearSeqOptimized$class.exists(LinearSeqOptimized.scala:79) 在 scala.collection.immutable.List.exists(List.scala:45) 在 org.neo4j.cypher.internal.commands.PathExpression.apply(PathExpression .scala:46) 在 org.neo4j.cypher.internal.commands.PathExpression.apply(PathExpression.scala:31) 在 org.neo4j.cypher.internal.commands.NonEmpty.isMatch(Predicate.scala:283) 在 org. org.neo4j.cypher.internal.pipes.matching 上的 neo4j.cypher.internal.commands.And.isMatch(Predicate.scala:83)。

**注意**：return offer 而不是 return count(offer) 有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:00:06.337

升级到 Neo4j 1.9 RC1 问题不再存在

# jquery - 使用 jquery 加载动态更改滑块内容

> ID：16152325
> 
> 赞同：0
> 
> 时间：2013-04-22T16:42:16.730
> 
> 标签：jquery

我在 jQuery(bxslider) 中使用了一个滑块插件。当我的页面第一次加载时，滑块类使用 displayHomeLine() 函数加载了默认列表元素。然后我用 jquery load 调用另一个 php 来替换整个滑块类（ul 和 li 元素）的内容。它加载得很好，但它没有动画，而是显示一个默认的无序列表。我的问题是 - 是否可以像在第一页加载时为默认内容一样为滑块设置动画？我不想刷新页面，那么其他选项是什么？我的代码：

```
<body>
<center>

<?php
        function displayHomeTimeline(){

            $home_timeline=$_SESSION['home_timeline'];

            foreach($home_timeline as $item){
                echo '<li>'.$item->text.'</li>';
            }

        }

?>
            <div id="page_content">
            <h1>Welcome <?php echo $_SESSION['screen_name']?></h1>
                <ul id="sections">
                    <li style="width:550px;"><h2>Tweets</h2>
                    <!-- Slider -->
                    <div id="wrapper_slider">

                        <ul class="bxslider">
                            <?php displayHomeTimeline();?><--Loads the default content
                        </ul>
                    </div>

                    </li>
                    <li style="width:180px;">
                        <h2>Followers</h2>

                    </li>
                </ul>
            </div>
</center>
<script type="text/javascript">
    //function to populate the slider with follower's tweets
    function populateFollowersTweets(screen_name){
            //THIS IS THE CALL TO OTHER FILE WHICH CREATES THE CLASS FOR SLIDER
        $('#wrapper_slider').load('follower_status.php?sname='+screen_name+'');
          //for tweets slider

              //TRIED PUTTING EXPLICIT CALL STILL DOESN"T ANIMATE
          $('.bxslider').bxSlider({
          auto:true});
    }

$(document).ready(function(){

  //for tweets slider
  $('.bxslider').bxSlider({
  auto:true});

  //for populating follower's tweets in the slider
  $('#followers_list>li').click(function(){
 //FUNCTION TO REPLACE THE CONTENT WITH NEW BXSLIDER CLASS
    populateFollowersTweets($(this).text());
  });

 });

</script>
</body> 
```

为 BXSlider 创建相同无序列表的文件：follower_status.php

```
<?php
    require("lib/twitteroauth/twitteroauth.php");
    session_start();

    //function to print user timelines
    function getUserTimeline($screen_name){
            $oauth_token = $_SESSION['oauth_token'];
            $oauth_token_secret = $_SESSION['oauth_token_secret'];
            $connection = new TwitterOAuth('xxx', 'xxx', $oauth_token, $oauth_token_secret);

            $tweets=$connection->get('statuses/user_timeline',array('screen_name' => $screen_name, 'count' => 10));
            foreach($tweets as $item){
                echo '<li>'.$item->text.'</li>';
            }

        }

    $screen_name=$_GET['sname'];

    echo '<ul class="bxslider">';
    getUserTimeline($screen_name);
    echo '</ul>';
?> 
```

屏幕截图应该更好地表达我的疑问。这是加载默认内容时的滑块： ![在此处输入图像描述](https://i.stack.imgur.com/aOpqP.jpg)

这是我调用 load 函数以将滑块类替换为 follower_status.php 后发生的情况： ![在此处输入图像描述](https://i.stack.imgur.com/7xRwO.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:21:07.327

The getmethod for AJAX request worked alright and served the purpose.

```
 $.get('xxx.php?sname='+screen_name+'', function(data) {
          $('.bxslider').bxSlider({
          auto:true}); 
```

# windows - 我应该如何测试 WinSNMP 中的 PDU 是否太大？

> ID：16152331
> 
> 赞同：0
> 
> 时间：2013-04-22T16:42:29.243
> 
> 标签：windows, snmp, winsnmp

我正在使用 Microsoft [WinSNMP API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379207%28v=vs.85%29.aspx)为 Windows 应用程序构建 SNMP 代理。目前，一切都适用于单项`get`和`set-request`，也适用`get-next`于允许行走定义的树（尽管有一些与此问题无关的警告）。

我现在正在研究多项目`get`和`get-bulk`.

我目前的程序是遍历请求的项目列表（`varbindlist`PDU 中的），单独处理每个项目，有效地导致内部`get`. 结果添加到 VBL，设置到 PDU，然后发送回 SNMP 管理器，考虑到无效请求等。

我的问题是我应该如何处理“太多”数据（无法放入单个传输层消息的数据）？或者更准确地说，有没有办法在不实际尝试传输的情况下测试数据是否“太大”？我在 API 中看到的唯一方法是尝试发送，检查错误，然后重试。

在这种情况下，`get-request`这不是问题 - 如果您无法返回所有请求的数据，您将失败：因此尝试发送，如果错误报告为`SNMPAPI_TL_PDU_TOO_BIG`，则发送默认的“错误”PDU。

但是，允许响应`bulk-get`返回部分结果。

我能看到处理此问题的唯一方法是删除项目并重试的繁琐（？）循环。类似于以下内容（为简洁起见，删除了一些细节）：

```
// Create an empty varbindlist
vbl = SnmpCreateVbl(session, NULL, NULL);
// Add all items to the list
SnmpSetVb(vbl, &oid, &value); // for each OID/Value pair
// Create the PDU
pdu = SnmpCreatePdu(session, SNMP_PDU_RESPONSE, ..., vbl);
bool retry;
do {
    retry = false;
    smiINT failed = SnmpSendMsg(session, ..., pdu);
    if (failed && SNMPAPI_TL_PDU_TOO_BIG == SnmpGetLastError()) {
        // too much data, delete the last vb
        SnmpDeleteVb(vbl, SnmpCountVbl(vbl));
        SnmpSetPduData(pdu, ..., vbl);
        retry = true;
    };
} while(retry); 
```

这似乎不是一种最佳方法 - 那么我错过了另一种方法吗？

* * *

作为旁注，我知道诸如 net-snmp 之类的库，但我的问题是针对 Microsoft API 的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:13:48.167

RFC 确实要求您执行粘贴的操作，

[https://www.rfc-editor.org/rfc/rfc3416](https://www.rfc-editor.org/rfc/rfc3416)

阅读第 16 页。

WinSNMP API 似乎没有公开的函数可以为您执行此操作，因此您必须编写自己的逻辑来处理它。

# c# - 扫描数据库中的新记录

> ID：16152337
> 
> 赞同：1
> 
> 时间：2013-04-22T16:42:58.377
> 
> 标签：c#, sql

我在 C# 中有一个程序，它可以像这样与数据库一起工作：

```
while(record found)
{
   SPEAKS RECORD OUT TO SPEAKER
   DELETES RECORD
} 
```

它工作正常，直到它用完记录。

我想要的是即使在数据库中没有找到记录后也继续扫描。当记录出现​​时，它应该执行逻辑。如何刷新数据库以便扫描新记录？

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:45:11.007

在检查新记录之前，您可能需要等待一段时间。所以永远迭代并检查新记录。如果你有，照常进行。如果您没有记录，请等待（例如 2 秒）然后重试

```
while(true){
    if(record found){
        // SPEAKS RECORD OUT TO SPEAKER
        // DELETES RECORD
    }else{
        System.Threading.Thread.Sleep(2000); // sleep two seconds
    }
} 
```

如果您不在请求之间等待，那么您将遇到不断请求新记录的问题。

另一个问题是“永远迭代”部分。通常，您所做的不是永远迭代，而是限制您连续尝试读取新记录的次数：

```
int attempts = 0;
while(attempts < 3){
    attempt++;
    if(record found){
        // SPEAKS RECORD OUT TO SPEAKER
        // DELETES RECORD
        attempts=0; // reset attempts counter
    }else{
        System.Threading.Thread.Sleep(2000); // sleep two seconds
    }
} 
```

所以你的程序不会永远尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T16:45:33.153

从您的伪代码看来，您运行了一个执行 SELECT 的 ADO 命令。您将像运行命令时一样迭代这些结果。它不是易失的数据结构。

因此，您将再次运行 SELECT 命令以查看自上次运行 SELECT 以来是否出现了任何新记录。

# c# - 固定数量可变对象的高效 C# 排序集合

> ID：16152344
> 
> 赞同：1
> 
> 时间：2013-04-22T16:43:18.863
> 
> 标签：c#, performance, sorting, collections

我正在尝试考虑有效的方法来维护小型固定有限数量的对象（几十个）的集合，这些对象会非常频繁地变化（至少每秒几次到每秒几十次）。是否有现有的排序集合具有更新现有插入项的键（排名）的功能？

让我们考虑以下项目定义：

```
public class Item
{
    public decimal Ranking { get; private set; }
    public IIdentity Identity { get; private set; }
    public IOtherInfo OtherInfo { get; private set; }
} 
```

我将收到这些项目的传入流（通常更新排名，有时会使以前的排名无效 - 例如可以通过将排名设置为 0 或无限来简化）。Identity 值的变化很少（并且可以快速转换为索引 0 到 N），OtherInfo 可以更改（但可以轻松存储在单独的查找数组中），最重要的是 Ranking 将快速更改. 我正在考虑 SortedCollection，但是每当排名变化（这很常见）听起来效率低下时，都需要删除和阅读项目。

任何允许更新项目及其在收藏中使用的收藏建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:03:08.973

对于您报告的负载，我会说您应该使用一种数据结构，该结构使其具有更好的可维护性，而不是担心挤出一些额外的 CPU 周期。使用[SortedList](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)或[SortedSet](http://msdn.microsoft.com/en-us/library/dd412070.aspx)，只有在遇到不可接受的结果时才担心提高性能。

我想说这是[过早优化是万恶之源的](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)情况之一。

# php - 如何将我自己的 HTML 标记添加到此 PHP 代码（数组）

> ID：16152348
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:43:31.443
> 
> 标签：php, html, arrays, drupal

你能告诉我如何将我自己的 HTML 标记添加到 PHP 代码的一部分吗？我说的是“***这部分需要 HTML 标记***”部分。

```
<div id="downbarek2">
    <?php
        $vid = 59;
        function termSort($a, $b) {return strcmp($a->name, $b->name);}

        $terms = taxonomy_get_tree($vid);   usort ($terms,'termSort');

        foreach ($terms as $term) {
            if ($term->depth == 1) {  
                print  "" .l( "This part need HTML tag " .$term->name,'taxonomy/term/'.$term->tid, array('title' => $term->name)). "";
            } 
        }  
    ?>
</div> 
```

所以，我的问题是：如何扩展这部分 HTML 标签，例如...

```
print  "" .l( "<b>This text need HTML tag</b> " .$term->name,'taxonomy/term/'.$term->tid, array('title' => $term->name)). ""; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:10:02.177

在 drupal 中，通过设置 array('html' => TRUE) 来实现这一点

```
print  l( t("<b>This text need HTML tag</b> " .$term->name,'taxonomy/term/'.$term->tid), array('attributes' => array('title' => $term->name, ), 'html' => TRUE) ); 
```

参考：[http ://api.drupal.org/api/drupal/includes%21common.inc/function/l/7](http://api.drupal.org/api/drupal/includes%21common.inc/function/l/7)

# android - 关闭应用程序后 onDestroy 崩溃

> ID：16152354
> 
> 赞同：2
> 
> 时间：2013-04-22T16:43:47.060
> 
> 标签：android, android-activity, media-player, ondestroy

在覆盖 onDestroy 方法后，我遇到了一些问题。我的应用程序是一个音乐播放器，如果没有音乐正在播放，我需要在某些时候使用我需要的媒体播放器实例来强制释放它。到目前为止，这是我的代码，为了制作我已经覆盖了 onKeyDown() 和 onDestroy() 方法的技巧：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
       if(mp.isPlaying())
       {
           //Genera la notifica
           generateNotificationSong();
           //Muovi in background
           moveTaskToBack(true);
       }
       else finish();

       return true;
    }

    return super.onKeyDown(keyCode, event);
}

//Faccio un override della funzione onDestroy per evitare che il mediaplayer continui 
//a mandare musica in background, inoltre l'UpdateTimeTask risulta inutile
@Override
public void onDestroy()
{
        mNotify.cancel(001);
        if(mHandler != null)
            mHandler.removeCallbacks(mUpdateTimeTask); //rimuovo il thread che aggiorna la seekbar
        if(mp != null)
            mp.release(); //rilascio il media player

        super.onDestroy();

} 
```

就是这样，现在当我想关闭应用程序时，我只需按下后退按钮，应用程序就会调用方法 onPause() onStop() 和 onDestroy() 对吗？无论如何，有时会在关闭手机后冻结 4-5 秒并显示一条消息：“程序应用程序已关闭”。我知道我在这里做错了，但我不知道是什么，我需要一些帮助。谢谢指教！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:49:13.407

`super.onDestroy()``onDestroy`如果您覆盖它，则必须是该方法的第一次调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-19T05:35:27.007

试试下面对我有用的代码

@覆盖

```
public void onDestroy() {

    mediaPlayer.stop();

    super.onDestroy();

        } 
```

}

# php - 你可以在 php 中递归运行 require_once 吗？

> ID：16152362
> 
> 赞同：2
> 
> 时间：2013-04-22T16:44:35.410
> 
> 标签：php, require-once

是否可以`require_once`像这样在一行中递归运行：

```
<?php
require_once('./OAuth2/*'); 
```

或者您是否必须直接访问每个文件`require`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T16:46:50.620

不能那样做。像这样的东西会起作用：

```
foreach (glob("./OAuth2/*.php") as $filename)
{
    require_once($filename);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T11:45:04.910

递归所有文件列表和 require_once 在一个目录中：

```
$files = array();

function require_once_dir($dir){

       global $files;

       $item = glob($dir);

       foreach ($item as $filename) {

             if(is_dir($filename)) {

                  require_once_dir($filename.'/'. "*");

             }elseif(is_file($filename)){

                  $files[] = $filename;
             }
        }
}

$recursive_path = "path/to/dir";

require_once_dir($recursive_path. "/*");

for($f = 0; $f < count($files); $f++){

     $file = $files[$f];

     require_once($file);
} 
```

# javascript - 使用 HTML 表单发送跨域 HTTP Post

> ID：16152363
> 
> 赞同：1
> 
> 时间：2013-04-22T16:44:38.987
> 
> 标签：javascript, jquery, ajax, http, cross-domain

我有这个 HTML 表单，我需要在提交之前进行一些处理：

```
<form action="http://appid.appspot.com/api/foo" id="contact-form" method="post"
name="contact-form">
    <fieldset>
        <label><input name="email" onblur=
        "if(this.value=='') this.value='Email'" onfocus=
        "if(this.value =='Email' ) this.value=''" value="Email"></label>
        <label><input name="subject" onblur=
        "if(this.value=='') this.value='Subject'" onfocus=
        "if(this.value =='Subject' ) this.value=''" value="Subject"></label> 
        <textarea name="message" onblur=
        "if(this.value=='') this.value='Message'" onfocus=
        "if(this.value =='Message' ) this.value=''">
Message
</textarea>

        <div class="buttons">
            <a href="#" onclick=
            "document.getElementById('contact-form').reset()">Clear</a>
            <a href="#" onclick=
            "document.getElementById('contact-form').submit()">Send</a>
        </div>
    </fieldset>
</form> 
```

基本上，我需要做的是：

*   单击提交按钮时，将出现一个弹出窗口，指示消息已提交（通过检查服务器响应）无论如何，

*   我需要复制特定表单输入的值，比如输入元素的值。然后将例如电子邮件添加到实际消息中，例如“消息”表单将是例如`"Email: x@dot.com Message: Hello world"`<- 这将是在将表单字段发送到api

**更新：**

我在我的问题中的意思是，如果这样会更好，我想将这个基于基本 HTML 表单的 POST 迁移到 Ajax 调用中，这样我就可以轻松实现上面概述的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:40:58.917

您想使用表单的`onsubmit`.

我稍微更改了您的 html（尤其是内联 javascript）（为了清楚起见）：

```
<form action="http://appid.appspot.com/api/foo" id="contact-form" method="post"
name="contact-form" onsubmit="return doStuff() ? true:false;">
    <fieldset>
        <input name="email" value="Email"
             onblur="if(this.value===''){this.value=this.defaultValue}" 
            onfocus="if(this.value===this.defaultValue){this.value=''}" > <br>
        <input name="subject" value="Subject"
             onblur="if(this.value===''){this.value=this.defaultValue}" 
            onfocus="if(this.value===this.defaultValue){this.value=''}" > <br>
        <textarea name="message" 
                onblur="if(this.value===''){this.value=this.defaultValue}" 
               onfocus="if(this.value===this.defaultValue){this.value=''}"
                      >Message</textarea>
        <div class="buttons">
            <a href="#" onclick=
            "document.getElementById('contact-form').reset()">Clear</a>
            <a href="#" onclick=
            "if(doStuff()){document.getElementById('contact-form').submit();}">Send</a>
        </div>
    </fieldset>
</form> 
```

如您所见，输入元素上的自动填充/自动清除现在有点重复，因此您可以将其分解为单独的通用函数。

这是在表单实际提交之前运行的 javascript 函数：

```
function doStuff(){
    var eml=document.getElementsByName('email')[0].value;
        msg=document.getElementsByName('message')[0];
    msg.value = 'Email: ' + eml + ' Message: ' + msg.value;
    alert ('message has been submitted');
    return true;
} 
```

[在这里工作 JSFiddle](http://jsfiddle.net/ANRPG/)

如果另一个域使用会话 cookie 和/或检查文档引用者，则执行此跨域可能会变得棘手。

更新：我看到您更新了您的问题，现在想检查并在您的消息中显示服务器响应？

# c# - 在 LinqToSql 中自动截断字符串？

> ID：16152364
> 
> 赞同：0
> 
> 时间：2013-04-22T16:44:45.597
> 
> 标签：c#, .net, linq-to-sql

使用 LinqToSql 时是否有自动截断字符串的整体设置？

我偶尔会遇到“ `string or binary data would be truncated`”异常，我们的解决方案只需修剪掉多余的部分就可以了。

由于我们有近 100 个实体，每个实体都有几十个属性，我希望有一些东西可以在系统范围内实现，而不是基于属性。

# clojure - 使用 clojure.tools.logging 强制 JUL

> ID：16152374
> 
> 赞同：1
> 
> 时间：2013-04-22T16:45:13.827
> 
> 标签：clojure, java.util.logging

我的 Clojure 应用程序需要通过 Java.Util.Logging (JUL) 进行日志记录，因为 Elastic Beanstalk 目前不支持自定义日志轮换。我正在使用 clojure.tools.logging 来编写日志文件，但该库会自动选择 log4j 作为日志引擎。

如何强制 clojure.tools.logging 使用 JUL？

我在网上找到了一个线程，该线程具有使用 alter-var-root 将所选工厂永久绑定到*logger-factory*的解决方案：

```
(alter-var-root (var log/*logger-factory*) (constantly (impl/jul-factory))) 
```

...但这是一个较旧的线程，不知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:02:52.727

我每天都用这个：

```
(alter-var-root                   
 #'clojure.tools.logging/*logger-factory*   
 (constantly (clojure.tools.logging.slf4j/load-factory)) 
```

为 impl/jul-factory 切换 slf4j 应该是可靠的，并且至少大部分是理智的。

# django - Django - 使用 jwplayer 显示视频

> ID：16152380
> 
> 赞同：1
> 
> 时间：2013-04-22T16:45:33.973
> 
> 标签：django, jwplayer, django-media

我目前正在尝试使用 jwplayer 在网站上显示视频。该页面的视图是

```
def video(request):
        return render_to_response('video_player/video.html', context_instance=RequestContext(request) 
```

并且正在使用的 html 模板在头部包含以下内容：

```
<script type="text/javascript" src="/jwplayer/jwplayer.js"></script> 
```

这在体内：

```
<div id="myElement">Loading the player...</div>
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "{{ MEDIA }}videos/test.mp4",
        image: "{{ MEDIA }}videos/cute-bunny.jpg"
    });
</script> 
```

除了“加载播放器”之外，它不显示任何内容，我认为我调用 media_root 可能有问题。它被定义为：

```
MEDIA_ROOT = 'C:/Users/Timmy/Documents/GitHub/GroupProject/media' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:45:48.997

您应该`{{ MEDIA_URL }}`在模板中使用您在 settings.py 中定义的标签。

settings.py 中的示例：

```
MEDIA_URL = '/media/' 
```

MEDIA_ROOT 和 STATIC_ROOT 一样，是Django 用来上传媒体文件和提供媒体文件的目录，而不是 URL 路径**。**

请参阅：[https ://docs.djangoproject.com/en/dev/howto/static-files/#serving-files-uploaded-by-a-user](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-files-uploaded-by-a-user)

# warnings - VHDL 乘法器代码中的综合警告

> ID：16152383
> 
> 赞同：0
> 
> 时间：2013-04-22T16:45:56.953
> 
> 标签：warnings, vhdl

当我合成这个 32 位乘法器代码时，我没有收到任何错误，只是警告我的输入未使用并且已分配但未使用。我的代码是这样的：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

entity multiplier is
    Port ( multiplicand : in  STD_LOGIC_VECTOR(31 downto 0);
           multiply : in  STD_LOGIC_VECTOR(31 downto 0);
           clk : in  STD_LOGIC;
           product : out  STD_LOGIC_VECTOR(63 downto 0));
end multiplier;

architecture Behavioral of multiplier is

    component adder32bit is
        port(addone, addtwo : in STD_LOGIC_VECTOR(31 downto 0);
                sum : out STD_LOGIC_VECTOR(31 downto 0);
                cout : out STD_LOGIC);
    end component;

    signal tempsum : STD_LOGIC_VECTOR(31 downto 0);
    signal preg : STD_LOGIC_VECTOR(63 downto 0);
    signal start : STD_LOGIC := '1';
    signal tempcout : STD_LOGIC;
    signal counter : integer := 1;
begin

    addN: adder32bit port map(multiplicand, preg(63 downto 32), tempsum, tempcout); 

    process(clk)
    begin
        if(rising_edge(clk)) then
            if(start = '1') then

                if(counter = 1) then
                    preg <= "00000000000000000000000000000000" & multiply;
                end if;

                if(preg(0) = '1') then
                    preg(63 downto 32) <= tempsum;
                    preg <= tempcout & preg(63 downto 1);
                else
                    preg <= '0' & preg(63 downto 1);
                end if;

                counter <= counter + 1;

                if(counter = 33) then
                    product <= preg;
                    start <= '0';
                    counter <= 1;
                end if;

            end if;
        end if;
    end process;

end Behavioral; 
```

当我运行模拟时，无论我的两个输入是什么（乘和乘），输出都将是这样的：“0000...UUUUUUU”

关于我应该在这里做什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:52:28.083

一种初始化方法`preg`只涉及对代码的微小更改......

```
 if(counter = 1) then
                preg <= "00000000000000000000000000000000" & multiply;
            else
               if(preg(0) = '1') then ...
            end if; 
```

# c# - 数字“05XXXXXXXX”的正则表达式

> ID：16152385
> 
> 赞同：1
> 
> 时间：2013-04-22T16:46:06.197
> 
> 标签：c#, regex, winforms

嗨，我需要使用正则表达式检查输入字符串是否为“05XXXXXXXX”，该数字必须仅以“05”开头，并且必须为 10 位数字。

我试过这个；

```
^(?:[1-9]|0[1-9]|5[0-9]|0[0-9]|10)$ 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T16:49:25.960

您可以简单地使用`{}`来指定一组重复，例如：

```
^05\d{8}$ 
```

*   `^`匹配字符串的开头。
*   `05`将是一个简单明了的完全匹配。
*   `\d`将匹配任何数字。
*   `{8}`将重复前面的表达式（`\d`在这种情况下）正好 8 次。
*   `$`匹配字符串的结尾。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-22T16:47:36.420

我想你想要这个：

```
^05[0-9]{8}$ 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-22T16:48:53.903

尝试这个：

```
^05\d{8}$ 
```

那是“一个 0 字符、一个 5 字符和一个数字字符恰好重复了 8 次”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T16:51:45.663

你也可以试试这个：

```
^0[5][0-9]{8}$ 
```

希望有帮助！

# certificate - 特定场景的数字签名概念

> ID：16152391
> 
> 赞同：0
> 
> 时间：2013-04-22T16:46:19.960
> 
> 标签：certificate, digital-signature, digital-certificate

我的公司为医院开发了一个 ERP，由于整个周末的一些立法变化，我一直在阅读很多关于数字签名的内容，因为我需要解决以下场景：

`Each doctor will receive from the ministry of health a certificate (so there's no escape from it... government said so...) and all of his reports sent/stored in digital format must be signed with this certificate.
The certificates will be valid for one year. Each year upon renewing of the medical license, the certificate will be renewed.`

我们在这里主要关心的是保证文档的来源（发件人就是他声称的那个人），但我们还必须使“不可能”（或至少不可行）来更改文档的内容（或者至少如果它改变了） ，我们必须能够知道发生了修改）并“提取并复制”签名......

我的问题是：我该如何处理这整件事？我应该怎么办？

PS：在您的回答中请考虑：

1.  这些文件将远远超过证书的生命周期。
2.  证书可能已被吊销。撤销前签署的文件必须仍然有效
3.  第 3 方如何验证信息的完整性（文件 + 证明）
4.  是否没有安全原则规定使用过期证书签名的信息无效或其他什么？
5.  我对这个领域真的很陌生，我可能问错了问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:49:20.477

简而言之，必须使用 CAdES、PAdES 或 XAdES（取决于数据格式）标准对文档进行签名，其中应用时间戳并采取其他措施。这些标准专为与您类似的任务而设计，因此可以解决您的顾虑。我建议您阅读一些有关这些格式的文章。不幸的是，我现在没有与您分享的链接，但您可以根据这些缩写找到很多。

CAdES 基于 PKCS#7/CMS（带有包装签名的通用数据的基于证书的签名）。

PAdES 是 PDF 签名的扩展，专门用于 PDF 文档。

XAdES 与 CAdES 类似，可用于签署 XML 文档和（较少见的）二进制数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:16:48.987

[披露：我为 ARX 的 CoSign 工作。]

你的情况很常见。你提出了一些问题。我的回答：

> > 他以数字格式发送/存储的所有报告都必须使用此证书签名。

*您可以对任何东西*（任何比特包）进行数字签名。真正的问题是收件人或审核员如何*轻松验证*文件：

*   自签名后未修改（完整性）
*   由正确的人（身份）签名
*   以正确的意图签署（签名者的声明）

**机器可读数据，例如表单数据、中间数据等。**

**签名：**对于设计用于稍后机器读取的信息（例如表单提交），将信息存储在 XML 中并使用 XML 签名标准对其进行签名：[XAdES](http://www.w3.org/TR/XAdES/) CoSign[签名 API (SAPI)](http://www.arx.com/forum/dev.php)直接支持对 XML 文档进行签名。

**验证**有许多在线 XML 数字签名验证服务，Google 为他们提供。SAPI api 还支持验证 XML 文档。

**人类可读文档**

**签名：**对于人类可以阅读的“最终”文档（但以数字方式存储，可以包含在搜索中等），PDF 文档是可行的方法。PDF 格式很好地支持数字签名。有许多方法可以将数字签名添加到 PDF 文档。对于开发人员来说，[CoSign Signature Web Agent](http://www.arx.com/forum/dev.php)是一个 Web 服务（HTTPS + XML 参数文档），可以处理所有的签名 UI 问题。

**验证：**验证 pdf 数字签名的最常用方法是使用免费的 Adob​​e Reader。（不是昂贵的 Adob​​e Acrobat。）Adobe Reader 知道如何检查数字签名的有效性，然后告诉阅读器/签名者/审核员签名有效，文档自签名后未更改等。

您的其他问题：

**这些文件将远远超过证书的生命周期。**

是的，这很好。就像“湿签名”一样，一旦您对文档进行了有效的数字签名，该文档仍然由您签名。-- 即使您的签名证书稍后过期。作为验证过程的一部分，将签名日期与证书上的有效日期进行比较。

**证书可能已被吊销。撤销前签署的文件必须仍然有效**

是的，这就是标准数字签名的工作方式。即使证书被吊销，在证书有效期间签署的文件仍将保持签署状态。由于日期/时间戳在验证过程中发挥着如此重要的作用，因此可以使用第 3 方时间戳服务。但它们不用于大多数数字签名。相反，应创建明确的管理程序，以确保时间服务器已正确设置 NTP 到良好的来源，并定期检查和验证系统。

CoSign 使用防篡改硬件设备进行签名。它的时钟使用 NTP 同步。

**第 3 方如何验证信息的完整性（文件 + 证明）**

正如我上面所讨论的，整个验证问题很重要。这就是我推荐使用 XML 或 PDF 作为文档类型的原因。例如，您可以对您自己系统用于表示信息的内部数据结构进行数字签名。在这种情况下，数字签名将在单独的数据结构中进行。这是“外部签名”场景。一切正常，除了审核员需要构建自己的软件来验证或*相信*您的软件正在正确地进行验证。更好的选择是使用直接支持数字签名且易于验证的格式。

**是否没有安全原则规定使用过期证书签名的信息无效或其他什么？**

适当的数字签名系统不允许使用过期的证书来签署任何内容。使用在签名时有效的证书对某些内容进行签名后，除非随后更改文档，否则它将保持签名状态。

**我对这个领域真的很陌生，我可能问错了问题......**

其他要问的问题：如何将签名者的图形签名添加到文档（XML 或 PDF）中——人们希望看到它。您如何管理/管理证书？基于服务器的签名是一个很好的解决方案。请记住，对于任何生产系统，证书不应存储在 sw 中。相反，必须使用安全签名创建设备（基于硬件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:29:27.930

您还需要阅读基线配置文件，其中有长期签名的配置文件。Eugene 已经提到的每种格式都有一个配置文件。例如，如果您的文档是 PDF，您可以使用 PAdES 签名和“PAdES Baseline Profile”文档中指定的 LTA 级别。

所有这些文档都是 ETSI 标准，您可以在以下位置搜索： http: [//pda.etsi.org/pda/queryform.asp](http://pda.etsi.org/pda/queryform.asp)

# ruby-on-rails - Rails + Carrierwave：如何更改图像版本（拇指、小号等）的默认文件命名？

> ID：16152393
> 
> 赞同：2
> 
> 时间：2013-04-22T16:46:37.817
> 
> 标签：ruby-on-rails

我正在将我的项目从带有附件_fu 的 Rails 2 升级到带有载波的 Rails 3。我有一个现有的数据库和文件目录，其中包含使用 attachment_fu 上传的图像。问题是，在 attachment_fu 中，上传的图像在文件名 ( `my_image_small.jpg`) 的后面附加了图像版本（拇指、小、中等），而在 carrierwave 中，默认值是相反的 ( `small_my_image.jpg`)。在carrierwave中我会在哪里改变这个？

这是我的文件上传器：

```
# encoding: utf-8

class FileUploader < CarrierWave::Uploader::Base
  #include UploaderFu
  # Include RMagick or MiniMagick support:

  SMALL_WIDTH = 101 
    MEDIUM_WIDTH = 223
    LARGE_WIDTH = 345

  include CarrierWave::RMagick
  # include CarrierWave::MiniMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  # include Sprockets::Helpers::RailsHelper
  # include Sprockets::Helpers::IsolatedHelper

  # Choose what kind of storage to use for this uploader:
  storage :file
  # storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    #{}"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
    "#{Rails.root}/public/file_uploads/#{("%08d" % model.id).scan(/..../).join('/')}"
    #{}"#{Rails.root}/public/file_uploads/"
  end

  version :small do
    process :resize_to_fit => [SMALL_WIDTH, 10000]
  end

  version :medium do
    process :resize_to_fit => [MEDIUM_WIDTH, 10000]
  end

  version :large do
    process :resize_to_fit => [LARGE_WIDTH, 10000]
  end

  # Provide a default URL as a default if there hasn't been a file uploaded:
  # def default_url
  #   # For Rails 3.1+ asset pipeline compatibility:
  #   # asset_path("fallback/" + [version_name, "default.png"].compact.join('_'))
  #
  #   "/images/fallback/" + [version_name, "default.png"].compact.join('_')
  # end

  # Process files as they are uploaded:
  # process :scale => [200, 300]
  #
  # def scale(width, height)
  #   # do something
  # end

  # Create different versions of your uploaded files:
  # version :thumb do
  #   process :scale => [50, 50]
  # end

  # Add a white list of extensions which are allowed to be uploaded.
  # For images you might use something like this:
  def extension_white_list
    %w(jpg jpeg gif png)
  end

  # Override the filename of the uploaded files:
  # Avoid using model.id or version_name here, see uploader/store.rb for details.
  # def filename
  #   "something.jpg" if original_filename
  # end

end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T17:35:05.877

要覆盖特定版本的文件名约定，您可以`full_filename`在版本块中定义一个方法：

```
version :small do
  def full_filename(for_file)
    [super(for_file), version_name].compact.join('_')
  end

  process :resize_to_fit => [SMALL_WIDTH, 10000]
end 
```

该方法只是`full_filename`对 CarrierWave 源代码中现有方法的重写（请参阅 参考资料`versions.rb`）。

但是，您需要在每个版本上覆盖它。相反，您可能希望通过修补`Versions`模块来更改 CarrierWave 的默认行为。您可以将此添加为初始化程序：

```
module CarrierWave
  module Uploader
    module Versions
      def full_filename(for_file)
        [super(for_file), version_name].compact.join('_')
      end
    end
  end
end 
```

**更新：**

要更正文件扩展名的问题，您可以使用 Rake 的`pathmap`函数来解析文件名：

```
require 'rake'
def full_filename(for_file)
  filename  = for_file.pathmap("%n")
  extension = for_file.pathmap("%x")
  [filename, version_name].compact.join('_') + extension
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:44:06.430

万一有人想知道我是怎么想出来的，我查看了 gem 代码，发现文件名是由 设置的`def full_filename`，所以在我的 FileUploader 中我重写了该方法，以便它覆盖行为。

```
def full_filename (for_file = model.filename.file)      
  "#{for_file[/(.+)\./][$1]}_#{version_name}.#{for_file[/\.(.+)/][$1]}"
end 
```

# symfony - 如何在 KnpMenuBundle 中禁用标签的 HTML 转义

> ID：16152396
> 
> 赞同：12
> 
> 时间：2013-04-22T16:46:46.887
> 
> 标签：symfony, knpmenubundle, knpmenu

我想渲染一个`HTML`标签，如：

```
$menu->addChild('Dashboard', array(
    'route' => 'dashboard', 
    'label' => '<i class="fa-icon-bar-chart"></i><span class="hidden-tablet"> Dashboard</span></a>',
    'extra' => array('safe_label' => true)
    )
); 
```

而且我在渲染时通过了正确的选项：

```
{{ knp_menu_render('WshCmsHtmlBundle:Builder:mainMenu', {'allow_safe_labels': true} ) }} 
```

但我的标签仍然被逃脱。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-23T12:13:27.840

好的，答案是！

您不是通过“额外”键而是通过“额外”键在菜单项上设置额外项目。因此，当您像这样设置项目时：

```
$menu->addChild('Dashboard', array(
    'route' => 'dashboard', 
    'label' => '<i class="fa-icon-bar-chart"></i><span class="hidden-tablet"> Dashboard</span></a>',
    'extras' => array('safe_label' => true)
)
); 
```

它工作正常！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-30T23:55:11.383

有两个步骤可以实现这一点。

## 1\. 菜单生成器

您必须设置`safe_label`为`true`in `extras`。请注意，您现在可以`HTML`在标签中书写。

```
$menu->addChild('Home<i><b></b></i>', array(
    'route' => 'homepage',
    'extras' => array(
        'safe_label' => true
    ),
)); 
```

## 2.树枝

您必须过滤输出，`knp_menu_render()`以便它打印原始`HTML`（请参阅[文档](http://twig.sensiolabs.org/doc/filters/raw.html)）。

```
{{ knp_menu_render('main', {'allow_safe_labels': true}) | raw }} 
```

## 警告

请注意，这可能很危险。从[文档](https://github.com/KnpLabs/KnpMenu/blob/master/doc/01-Basic-Menus.markdown)中：

> 谨慎使用它，因为如果标签来自用户，它可能会在您的应用程序中创建一些 XSS 漏洞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-03T14:45:40.010

我使用 FyodorX 的方法添加了一个强标签。它就像一个魅力，但我必须说原始过滤器不是必需的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:08:31.813

尝试使用原始过滤器

```
{{ knp_menu_render('WshCmsHtmlBundle:Builder:mainMenu', {'allow_safe_labels': true} )|raw }} 
```

# datetime - 将整数字段转换为分钟

> ID：16152401
> 
> 赞同：0
> 
> 时间：2013-04-22T16:47:08.697
> 
> 标签：datetime, casting, sql-server-2008-r2

我在 sql server 2008 r2 中有一个表。表中的一个字段表示任务运行的频率。它被称为`everyMinutes`。该字段保存整数值，范围从 0 到 15 到 120 甚至更大。如何选择此字段并将其转换为时间以便可以添加到其他时间？

我已经`startTime`设置为`time(7)`. 我知道我可以做我要在 sql 中提出的问题。但是我的最终目标是在 php 中完成。

我想查询`startTime`以及`everyMinutes`以便它们可以在 php 中轻松添加到一起。我正在寻找 select 语句中的转换、转换或其他内容`everyMinutes`，以便可以完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:55:33.747

您可以使用[DateAdd](http://msdn.microsoft.com/en-us/library/ms186819%28v=sql.105%29.aspx)：

```
select DATEADD (mi,  everyMinutes, '1/1/2005' )
from table 
```

编辑：如果您想在 PHP 中执行此操作，您可以按原样选择`everyMinutes`，然后使用[strtotime](http://fr.php.net/strtotime)：

```
strtotime('+ 30 minute',$yourdate); 
```

（对不起，我不懂 php，但你只需要使用`everyMinutes`和用作第一个参数来构建一个字符串。）

另请参阅：[https ://stackoverflow.com/a/1436844/1822514](https://stackoverflow.com/a/1436844/1822514)

# ios - 你怎么能做一个 UIPageControl/UIScrollView 循环

> ID：16152402
> 
> 赞同：1
> 
> 时间：2013-04-22T16:47:10.067
> 
> 标签：ios, objective-c, uiscrollview, nstimer, uipagecontrol

我通过重复`NSTimer`设置页面控件的当前页面和滚动视图的`currentOffset`.

当我到达最后一张图片时，我将页面控件的当前页面设置回，`0`滚动视图`currentOffset`也设置回`0`. 然而，这具有非常快速地将事情倒退到开始的效果，而不是给人以前进的印象。[除了使用iCarousel 之](https://github.com/nicklockwood/iCarousel)类的东西之外，还有一种快速简便的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:02:45.910

对于任何“无限”滚动，您只需要它显示三个项目。

上一项。当前项目。下一项。

如果您有一个包含 5 个项目的数组并且您希望它无限滚动，那么您首先显示...

5, 1, 2（中间始终是当前项）。

如果用户然后滑动查看数字 2，那么一旦它完成滚动，您就将数字 2 放在中间，就像这样......

1, 2, 3 然后更改视图的偏移量，使其回到中间。

即你总是搬出去然后回到中间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:54:35.307

不确定这是否适合您的需求，但您也可以将第一个图像添加到 UIScrollView 的末尾。

当您点击最后一张图片时，您可以将滚动视图的内容偏移设置回 0（没有动画）并更新您的页面控件。

# git - 如何恢复 git 历史重写？

> ID：16152407
> 
> 赞同：6
> 
> 时间：2013-04-22T16:47:22.520
> 
> 标签：git, git-filter-branch, git-rewrite-history

我正在重写一个相当大的回购的历史，`git filter-branch --tree-filter`这需要几个小时。我看到 git 正在使用一个临时目录来存储它的中间工作。这是否意味着如果它被中断可以恢复重写？如果是这样，怎么做？

**编辑**

我正在做的操作是移动几个目录。这些当前位于子目录中，但我现在需要它们位于根目录中。

例如

```
dir1
- dir2
- dir3
- dir4 
```

变成

```
dir1
- dir2
dir3
dir4 
```

当然，我的目录结构比这复杂得多，但这就是我想要做的事情的要点。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T18:22:04.457

`git filter-branch`本身不支持暂停/恢复使用模式 - 尽管它将临时数据写入`.git-rewrite`文件夹，但实际上不支持基于此目录的内容恢复。如果您`git filter-branch`在以前中止`filter-branch`操作的存储库上运行，它会要求您删除该临时文件夹，或者使用`--force`选项[自行执行](https://github.com/git/git/blob/v1.8.2.1/git-filter-branch.sh#L194-L200)。

潜在的问题是`git-filter-branch`在大型回购上运行缓慢 - 如果过程快得多，就没有尝试恢复的动力。所以你有几个选择：

# 让 git-filter-branch 快一点...

*   使用[RAM 磁盘](http://kvz.io/blog/2007/07/18/create-turbocharged-storage-using-tmpfs/)- `git-filter-branch`IO 非常密集，并且在您的存储库位于 RAM 中时运行速度会更快。
*   使用`--index-filter`而不是`--tree-filter`- 它类似于树过滤器，但不检查文件树，这使它更快，但*确实*需要您根据 git index 命令重写文件更改。
*   使用[云计算](http://debuggable.com/posts/muscles-on-demand-clean-a-large-git-repository-the-cloud-way:49ba8538-d7ac-486d-b132-0cce4834cda3)并租用具有快速内存和高时钟速度的机器（除非您自己的命令是多线程的，否则不要打扰多核，因为`git-filter-branch`它本身是单线程的）

# ...或使用 BFG *（更快）*

[BFG Repo-Cleaner](http://rtyley.github.io/bfg-repo-cleaner/)是一种更简单、更快的替代方案-`git-filter-branch`在大型 repo 上，它的速度提高了[50-150](https://docs.google.com/spreadsheet/ccc?key=0AsR1d5Zpes8HdER3VGU1a3dOcmVHMmtzT2dsS2xNenc)倍。这会将您需要几个小时的工作变成*只需要几分钟*的工作。

*全面披露：我是 BFG Repo-Cleaner 的作者。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-07T15:03:00.630

Roberto 在他的回答中提到了这一点，但我想给它一个基准：如果您的`git filter-branch`操作需要很长时间才能完成，请考虑使用 AWS 高内存实例。

我曾经不得不`filter-branch`合并 35 个不同的存储库，每个存储库都有两年每天数十次提交的历史。我的脚本在我的笔记本电脑上未能在 25 小时内完成。`m2.4xlarge`它在亚马逊的一个实例上在 45 分钟内完成。

总消耗？

**1.64 美元——比我在 20 盎司苏打水上的花费还少。**

BFG 听起来像是一个很棒的工具，我鼓励任何经常改写历史的人尝试一下。但是，如果您只是需要一些东西来工作并且可以轻松访问 AWS，那就太`filter-branch`简单了。

*在 2016 年，这甚至更便宜。*只需关注[Spot Advisor](https://aws.amazon.com/ec2/spot/bid-advisor/)，就会发现自己属于“每小时 0.30 美元的集群计算”。

# java - 查找文件中每个单词的频率

> ID：16152413
> 
> 赞同：0
> 
> 时间：2013-04-22T16:47:58.657
> 
> 标签：java

我正在尝试查找文件中每个单词的频率。

不仅要搜索某个单词的实例数，还要搜索每个单词的频率。

例如，如果文件包含这句话：

> “超棒超酷的人真棒！”

它会输出这个：

```
Super - 2
Awesome - 2
Cool - 1
People - 1
Are - 1 
```

显示每个单词的频率。

我怎样才能在 Java 中做到这一点，但计算整个文件，而不知道我可能正在测试什么单词？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:15:33.890

尝试以下操作：

```
// This will match all non-word characters, i.e. characters that are
// not in [a-zA-Z_0-9]. This should match whitespaces and interpunction.
String nonWordDelimiter="[\W]+";

String[] words = text.split(nonWordDelimiter);

Map<String, Integer> frequencies = new LinkedHashMap<String, Integer>();
for (String word : words) {
    if (!word.isEmpty()) {
        Integer frequency = frequencies.get(word);

        if (frequency == null) {
            frequency = 0;
        }

        ++frequency;
        frequencies.put(word, frequency);
    }
} 
```

最后，地图`frequencies`将包含每个单词的频率。

# delphi - 快速查找字符串的字符串/整数对的最佳存储？

> ID：16152415
> 
> 赞同：4
> 
> 时间：2013-04-22T16:48:09.373
> 
> 标签：delphi, data-structures, storage, delphi-xe2

我需要维护字符串和整数之间的对应关系，然后查找字符串值并返回整数。满足以下要求的存储此信息的最佳结构是什么：

*   速度和内存大小按顺序很重要。

*   我不想重新发明轮子并编写自己的排序程序。调用 Sort(CompareFunction) 当然可以。

条件：

*   整数不保证是连续的，也没有像 0 或 1 这样的“起始值”

*   数据对的数量可以从 100 到 100000

*   数据都是一开始就读入的，没有后续的增删改

*   FWIW 字符串是 Outlook（MAPI？）用来识别条目的十六进制条目 ID。示例：00000000FE42AA0A18C71A10E8850B651C24000003000000040000000000000018000000000000001E7FDF4152B0E944BA66DFBF2C6A6416E4F52000487F22

有很多选项（TStringList（带有对象或名称/值对），TObjectList，TDictionary，...），我最好先征求意见...

我已阅读[如何在 Delphi TStringList 中更快地搜索名称/值对？](https://stackoverflow.com/questions/3709784/how-can-i-search-faster-for-name-value-pairs-in-a-delphi-tstringlist)它建议字符串/字符串对的 TDictionary，以及[Delphi 2007 中的多维数组排序，](https://stackoverflow.com/questions/14594364/sorting-multidimensional-array-in-delphi-2007/)它建议字符串/整数的 TStringlist 对象，但对整数进行排序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T16:54:36.493

您在问题中包含的第二个链接不适用。这是一个关于排序而不是有效查找的问题。尽管您在问题中多次讨论排序，但您不需要排序。您的要求只是一个字典，也称为关联数组。当然，您可以通过对数组进行排序并使用二进制搜索进行查找来实现这一点，但排序不是必需的。你只需要一本高效的字典。

开箱即用，对您的问题最有效和最方便的数据结构是`TDictionary<string, Integer>`. 这具有 O(1) 的查找复杂性，因此可以很好地扩展到大型集合。对于较小的集合，具有 O(log n) 查找复杂度的基于二分查找的查找可能具有竞争力，并且确实可以胜过字典。

[Cosmin Prund](https://stackoverflow.com/users/282676/cosmin-prund)在 SO 上写了一个很好的[答案](https://stackoverflow.com/questions/14524350/delphi-check-if-element-exists-twice-in-tarraystring/14525968#14525968)，他将字典查找的性能与基于二进制搜索的查找进行了比较。我建议你读一读。我想说，对于小型容器，性能对您来说可能不是那么大的问题。因此，即使二进制搜索可能更快，也可能无关紧要，因为无论哪种方式你的性能都很好。但是对于较大的容器，性能可能会成为一个问题，而这正是字典总是更强大的地方。对于足够大的容器，二分查找的性能可能会变得无法接受。

我确信可以产生比 Embarcadero 更有效的字典实现，但我还要说 Embarcadero 实现非常可靠。它使用了一个不错的哈希函数，并且没有任何明显的弱点。

就内存复杂性而言，字典和排序数组之间几乎没有选择余地。不可能改进排序数组以供内存使用。

我建议您从`TDictionary<string, Integer>`不满足性能要求的情况下开始，并且只关注它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:22:36.007

看来您要查找长的均匀分布的字符串。这类问题最快的数据结构之一是[Trie](http://en.wikipedia.org/wiki/Prefix_tree)。

但是您的数据集大小相当小，并且像 THashedStringList 或 TDictionary（更方便）这样的即用型 Delphi 解决方案将提供相当高的速度。

# drupal-7 - Drupal 7- 分配给自定义区域的块是随机未分配的

> ID：16152418
> 
> 赞同：4
> 
> 时间：2013-04-22T16:48:17.860
> 
> 标签：drupal-7

我为我的主页设置了许多自定义区域，它使用自定义模板，并且能够根据需要定位它们并为它们分配块。

但是，我分配给这些区域的任何块都会随机消失。当我查看`_block`数据库表时，区域字段的值设置为-1（即未分配），我必须进入并为这些区域重新分配块。

无论我是否缓存我的块，都会发生这种情况。

当我运行 cron 或清除缓存时，它不会发生。由于这只发生在我的自定义字段中，我觉得除了在主题和子主题的`.info`文件中设置我的区域之外，我还应该做一些其他事情，这将使对这些区域的块分配与对一个标准区域。

许多人在 Drupal.org 上报告了这一点，但没有人能够提出答案。过去几周我对此进行了研究，并查看了任何可能将我的数据库存储或重写为这些值的脚本。

它总是在一夜之间发生，但没有任何可靠的时间间隔：我可以一周不发生，或者我可以坚持一天。

它不会发生在我用作开发服务器的离线 XAMPP 堆栈上。我的虚拟主机可能出了点问题，但由于这是一个非常具体的问题，我认为这与我的自定义区域的设置方式有关。

我使用了这个博客上的说明：http: [//megadrupal.com/blog/add-new-regions-in-drupal-7-themes](http://megadrupal.com/blog/add-new-regions-in-drupal-7-themes)。

我在那里发布了一个关于它的问题，但还没有收到回复。

# ios - 是否可以在返回 BOOL 的委托方法中执行 API 调用？

> ID：16152419
> 
> 赞同：0
> 
> 时间：2013-04-22T16:48:31.720
> 
> 标签：ios, parsing, delegates, objective-c-blocks

奇怪的标题，我知道，但这是解释我的问题的最快方法。Parse 服务有一个预建的注册控制器，用于让新用户注册您可能拥有的任何服务。无法编辑它的实现，您只能在它的委托方法中处理事件。所以我不能把它放在“注册”按钮的 IBAction 中。我想要做的是，当用户触摸“注册”时，我需要调用一些 API 来检查是否存在某些东西，然后如果它已经存在，那么不要让用户签名向上。这是用于在按下按钮时处理验证的委托方法：

```
// Sent to the delegate to determine whether the sign up request should be submitted to the server.
- (BOOL)signUpViewController:(PFSignUpViewController *)signUpController shouldBeginSignUp:(NSDictionary *)info { 
```

这是我要放入其中的内容：

```
[self processJSONDataWithURLString:[NSString stringWithFormat:@"https://www.someapi.com/api/profile.json?username=%@",username] andBlock:^(NSData *jsonData) {

    NSDictionary *attributes = [jsonData objectFromJSONData];

    // Check to see if username has data key, if so, that means it already exists
    if ([attributes objectForKey:@"Data"]) {
        return NO; // Do not continue, username already exists
    // I've also tried:
        dispatch_sync(dispatch_get_main_queue(), ^{ return NO; } );
    }
else
        return YES; //Continue with sign up
        dispatch_sync(dispatch_get_main_queue(), ^{ return YES; } );
}]; 
```

但是，当我尝试返回任何东西时，我会遇到错误。当我直接返回 YES 时，“^(NSData *jsonData)”带有黄色下划线，我得到“不兼容的块指针类型将 BOOL (^) NSData *_strong 发送*到 void(^)NSData ** _strong 类型的参数” .

基本上，有什么方法可以在此方法中进行 API 调用以检查某些内容，然后根据结果返回 YES 或 NO？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:07:37.473

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:23:29.963

尝试这个：

```
[self processJSONDataWithURLString:[NSString stringWithFormat:@"https://www.someapi.com/api/profile.json?username=%@",username] andBlock:^(NSData *jsonData) {

    NSDictionary *attributes = [jsonData objectFromJSONData];
    BOOL status=YES; 
    // Check to see if username has data key, if so, that means it already exists
    if ([attributes objectForKey:@"Data"]) {
        status=NO; // Do not continue, username already exists

    [self performSelectorOnMainThread:@selector(callDelegate:) withObject:[NSNumber numberWithBool:status] waitUntilDone:YES];
}];

-(void)callDelegate:(NSNumber*) status
 {
   BOOL returnStatus = [status boolValue];

   //now retutn returnStatus to your delegate.
 } 
```

但这不是正确的做法，您必须更改您编写的逻辑以支持异步通信。你可以考虑我的，只要你想按照自己的方式去做。

# javascript - 获取 JSON 值

> ID：16152421
> 
> 赞同：-5
> 
> 时间：2013-04-22T16:48:36.843
> 
> 标签：javascript, json, jquery

我需要在我的 java 脚本中从此 JSON 中获取值：

```
[{
        "selectionName": "Select",
        "subSelections": [{
                "id": 4,
                "subSelectionName": "Select",
                "description": "Deepmala"
            }
        ]
    }, {
        "selectionName": "week14",
        "subSelections": [{
                "id": 7,
                "subSelectionName": "1",
                "description": ""
            }
        ]
    }, {
        "selectionName": "test",
        "subSelections": [{
                "id": 6,
                "subSelectionName": "test",
                "description": ""
            }
        ]
    }, {
        "selectionName": "select",
        "subSelections": [{
                "id": 3,
                "subSelectionName": "sub-select",
                "description": "Created by Prakash"
            }
        ]
    }, {
        "selectionName": "testcreate",
        "subSelections": [{
                "id": 1,
                "subSelectionName": "testcreate",
                "description": ""
            }
        ]
    }, {
        "selectionName": "by htmlwidget",
        "subSelections": [{
                "id": 5,
                "subSelectionName": "by htmlwidget",
                "description": "created by html widget"
            }
        ]
    }
] 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:59:07.937

您可以使用 JSONSelect 之类的东西来提取某些值。

[http://jsonselect.org/](http://jsonselect.org/)

以下是如何使用它的示例：

（在[这个 JSFiddle](http://jsfiddle.net/molokoloco/7PTAQ/)中找到）

```
$(function(){
/*
Json as easy as SQL ??? RT @lloydhilaiel JSONSelect - CSS-like selectors for JSON - http://jsonselect.org
Testing...
*/
var jsonData = {
    "name": {
        "first": "Lloyd",
        "last": "Hilaiel"
    },
    "favoriteColor": "yellow",
    "languagesSpoken": [
        {
        "language": "Bulgarian",
        "level": 2},
    {
        "language": "English",
        "level": 1},
    {
        "language": "Spanish",
        "level": 7}
    ]
};

var selector = '.name > *'; // xPath CSS like selector

try {

    var resultObj = JSONSelect.match(selector, jsonData);
    console.log(typeof resultObj);
    console.log(resultObj);
    console.log('- - - - -');

    JSONSelect.forEach(selector, jsonData, function(resultObj) {
        console.log(typeof resultObj);
        console.log(resultObj);
        console.log('- - - - -');
        $('body').append('<p>' + $.trim(JSON.stringify(resultObj, null, ' ')) + '</p>');
    });

} catch(e) { console.log(e); }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:03:45.827

JSON 对象易于处理

```
var JSON = //Your JSON Object

JSON[0].selectName //returns 'Select'

JSON[0].subSelections[0].id //returns 4

and so on. 
```

任何数组对象都可以视为数组。任何映射的对象都可以通过使用 JSON 对象的字段名称等键来返回。

# html - 在 HTML 中解析/显示 RTF 文本？

> ID：16152424
> 
> 赞同：2
> 
> 时间：2013-04-22T16:48:45.527
> 
> 标签：html, .net, parsing, rtf

我正在寻找一些 RTF 代码，例如下面的示例摘录，并将其**显示**在 HTML 页面中。我不需要它是可编辑的，也不希望它在这个时候。在研究这一点时，我看到了很多支持 RTF 的 WYSIWYG 编辑器，但这并不是我真正想要的。

```
{}
{\rtf1\ansi\ansicpg1252\uc1\htmautsp\deff2
    {\fonttbl{\f0\fcharset0 Times New Roman;}
    {\f2\fcharset0 Segoe UI;}
    {\f3\fcharset0 Microsoft Yi Baiti;}
}
{\colortbl\red0\green0\blue0;\red255\green255\blue255;}
\loch\hich\dbch\pard\plain\ltrpar\itap0
{\lang1033\fs18\f2\cf0 \cf0\ql{\fs24\f2 
{\loch\f3\ltrch Hello } 
```

有没有办法在 HTML 页面中显示 RTF？尝试将其解析为 HTML/CSS 会更好，还是有可能？我还考虑在.NET 端解析它，但没有遇到任何解决方案。

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:31:26.503

FWIW，我将使用此处找到的解决方案，因为它似乎是最灵活的。

[**在 RTF 和 HTML 之间转换**](http://code.msdn.microsoft.com/Converting-between-RTF-and-aaa02a6e)

# google-cloud-storage - 谷歌云存储：如何生成授权标头？

> ID：16152430
> 
> 赞同：0
> 
> 时间：2013-04-22T16:48:58.003
> 
> 标签：google-cloud-storage

是否有任何特定规则可以为授权标头选择身份验证标识符？我很困惑是否使用 GOOG1 或 OAuth 或 AWS 等。

我们可以直接在授权标头中使用身份验证标识符后跟访问密钥来进行调用吗？

[https://developers.google.com/storage/docs/reference-headers#authorization](https://developers.google.com/storage/docs/reference-headers#authorization) 这个链接说我们可以使用身份验证标识符（ OAuth | GOOG1 | AWS ），后跟以下之一：

有效的 OAuth 2.0 令牌 访问密钥 签名

我正在使用“GOOG1 AccessKey”，但出现以下错误

```
<Error>
   <Code>InvalidSecurity</Code>
   <Message>The provided security credentials are not valid.</Message>
</Error> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:10:41.257

不，你不能`GOOG1 AccessKey`直接使用。使用 GOOG1 方法，Authorization 标头包含大量信息，所有信息都散列在一起形成一个密钥。使用 OAuth，标头通常包含特定的令牌。

对于 GOOG1（已弃用），可以在此处找到 Authorization 标头创建机制： [https ://developers.google.com/storage/docs/reference/v1/developer-guidev1#authentication](https://developers.google.com/storage/docs/reference/v1/developer-guidev1#authentication)

使用 OAuth2（推荐）将取决于您的应用程序将在什么场景下运行。首先阅读各种场景描述，选择适用的描述，然后点击相应部分中的链接： [https ://developers.google.com/accounts/docs/OAuth2#scenarios](https://developers.google.com/accounts/docs/OAuth2#scenarios)

# xcode - 显示 plist 的 TableView 代码不起作用，是因为它必须在 UITableView 控制器上吗？(Xcode)

> ID：16152437
> 
> 赞同：0
> 
> 时间：2013-04-22T16:49:13.813
> 
> 标签：xcode, plist, tableview

我无法让我的 plist 显示在我的应用程序上。我需要使用 TableView 而不是 TableView 控制器。我不确定我第一次尝试时是否遵循了错误的代码。请看一下。米。文件是：

```
#import "ECSlidingViewController.h"
#import "NewsFeedViewController.h"
#import "BuySharesViewController.h"
#import "SellSharesViewController.h"
#import "FinancesViewController.h"
#import "CurrentHoldingsViewController.h"
#import "TradingHistoryViewController.h"
#import "LeaderboardViewController.h"
#import "HowToPlayViewController.h"
#import "MenuViewController.h"
#import "InitViewController.h"

@interface SellSharesViewController ()

{
    BOOL isSearching;
}

@property (nonatomic, readonly) NSDate *CurrentDate;
@property (nonatomic, strong) NSDictionary *shares;
@property (nonatomic, strong) NSArray *shareValue;
@property (nonatomic, strong) NSArray *number;
@property (nonatomic, strong) NSArray *shareName;

- (void)resetSearch;
- (void)handleSearchForTerm:(NSString *)searchTerm;

@end

@implementation SellSharesViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    isSearching = NO;
    NSString *path=[[NSBundle mainBundle] pathForResource:@"shares" ofType:@"plist"];
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];
    self.allNames = dict;
    //NSArray *array = [[self.names allKeys] sortedArrayUsingSelector:@selector(compare:)];
    //self.keys = (NSMutableArray *)array;

    [self resetSearch];
    [self.table reloadData];
    [self.table setContentOffset:CGPointMake(0.0, 44.0) animated:NO];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return ([self.keys count] > 0) ? [self.keys count] : 1 ;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.

    if ([self.keys count] == 0)
        return 0 ;

    NSString *key = [self.keys objectAtIndex:section];
    NSArray *nameSection = [self.names objectForKey:key];
    return nameSection.count;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Configure the cell...
    NSUInteger section = [indexPath section];
    NSUInteger row = [indexPath row];

    NSString *key = [self.keys objectAtIndex:section];
    NSArray *nameSection = [self.names objectForKey:key];

    cell.textLabel.text = [nameSection objectAtIndex:row];

    return cell;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section  {

    if ([self.keys count] == 0)
        return nil;

    NSString *key = [self.keys objectAtIndex:section];
    if (key == UITableViewIndexSearch)
        return nil;

    return key;
}

/*
 // Override to support conditional editing of the table view.
 - (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
 {
 // Return NO if you do not want the specified item to be editable.
 return YES;
 }
 */

/*
 // Override to support editing the table view.
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
 {
 if (editingStyle == UITableViewCellEditingStyleDelete) {
 // Delete the row from the data source
 [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
 }
 else if (editingStyle == UITableViewCellEditingStyleInsert) {
 // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
 }
 }
 */

/*
 // Override to support rearranging the table view.
 - (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
 {
 }
 */

/*
 // Override to support conditional rearranging of the table view.
 - (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
 {
 // Return NO if you do not want the item to be re-orderable.
 return YES;
 }
 */

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {

    if (isSearching)
        return nil;

    return self.keys;
}

#pragma mark -
#pragma mark Custom Methods

- (void) resetSearch {
    NSMutableDictionary *allNamesCopy = [self.allNames mutableDeepCopy];
    self.names = allNamesCopy;

    NSMutableArray *keyArray = [[NSMutableArray alloc] init];
    [keyArray addObjectsFromArray:[[self.allNames allKeys]
                                   sortedArrayUsingSelector:@selector(compare:)]];
    [keyArray insertObject:UITableViewIndexSearch atIndex:0];
    self.keys = keyArray;
}

- (void)handleSearchForTerm:(NSString *)searchTerm {
    NSMutableArray *sectionsToRemove = [[NSMutableArray alloc] init];
    [self resetSearch];

    for (NSString *key in self.keys) {
        NSMutableArray *array = [self.names valueForKey:key];
        NSMutableArray *toRemove = [[NSMutableArray alloc] init];
        for (NSString *name in array ) {
            if ([name rangeOfString:searchTerm
                            options:NSCaseInsensitiveSearch].location == NSNotFound)
                [toRemove addObject:name];
        }

        if ([array count] == [toRemove count])
            [sectionsToRemove addObject:key];

        [array removeObjectsInArray:toRemove];
    }
    [self.keys removeObjectsInArray:sectionsToRemove];
    [self.table reloadData];
}

#pragma mark -
#pragma mark Table View Delegate Methods
- (NSIndexPath *)tableView:(UITableView *)tableView
  willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [self.search resignFirstResponder];
    isSearching = NO;
    self.search.text = @"";
    [self.table reloadData];
    return indexPath;
}

#pragma mark -
#pragma mark Search Bar Delegate Methods
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {
    NSString *searchTerm = [searchBar text];
    [self handleSearchForTerm:searchTerm];
}

- (void)searchBar:(UISearchBar *)searchBar
    textDidChange:(NSString *)searchTerm {
    if ([searchTerm length] == 0) {
        [self resetSearch];
        [self.table reloadData];
        return;
    }
    [self handleSearchForTerm:searchTerm];
}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar {
    isSearching = NO;
    self.search.text = @"" ;
    [self resetSearch];
    [self.table reloadData];
    [searchBar resignFirstResponder];
}

-(void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar {
    isSearching = YES;
    [self.table reloadData];
}

- (NSInteger)tableView:(UITableView *)tableView
sectionForSectionIndexTitle:(NSString *)titleForHeaderInSection
               atIndex:(NSInteger)index {
    NSString *key = [self.keys objectAtIndex:index];
    if (key == UITableViewIndexSearch) {
        [tableView setContentOffset:CGPointZero animated:NO];
        return NSNotFound;
    }
    else {
        return index;
    }
}

@end 
```

h.file 是：

```
#import <UIKit/UIKit.h>

@interface SellSharesViewController : UIViewController
<UITableViewDataSource, UITableViewDelegate>

@property (weak, nonatomic) IBOutlet UITableView *sellShares;
@property (weak, nonatomic) IBOutlet UILabel *rowSelectedDisplay;

@property (weak, nonatomic) IBOutlet UIButton *removeShare;

@property (strong, nonatomic) UIButton *menuBtn;

-(IBAction)removeShareButton:(id)sender;

@end 
```

随意要求任何其他可能有帮助的东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:47:40.413

将 uitableview 属性更改为强而不是弱。我这样做是为了有一个指向 tableview 的强指针，所以它不会被删除。您还需要将 uitableview 的委托和数据源连接到情节提要中的 uiviewcontroller。所以协议方法将在你的 uiviewcontroller 中被调用。如果它们未连接，则不会调用协议方法，因此表视图中不会显示任何内容。

如果你有一个字典数组，fornumberofrows 返回 [myarray count];

连接故事板中的数据源和委托被忽略了很多次，所以先检查一下。我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:11:13.447

您是否在 XIB 中设置了 Delegate 和 Datasource？ ![在此处输入图像描述](https://i.stack.imgur.com/6MC0a.png)

您需要检查的其他事项是，在下面的方法中放置断点并检查它是否正在触发

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

确保在前两种方法中没有返回零。

如果前两种方法中的任何一种都没有触发，那么这意味着您没有在 XIB 中添加数据源

# java - 将输入传递给不从标准输入读取的应用程序

> ID：16152438
> 
> 赞同：2
> 
> 时间：2013-04-22T16:49:19.097
> 
> 标签：java, linux, windows, command-line-interface

我有一个读取文本文件的应用程序。

如果应用程序从标准输入读取它，那么我可以转发输入/管道它

```
$ app < input.txt
$ cat input.txt | app 
```

不幸的是，应用程序需要一个文件名作为参数。

```
$ app --input input.txt 
```

而且我不能轻易更改输入源（例如，将本地文件 [如示例] 交换为 a 的结果`wget`）。

有没有办法以某种方式欺骗这个应用程序？

如果解决方案需要临时文件，则必须不将该文件留在 FS 上。

*[该应用程序实际上是一个可执行的 JAR；我想要在 Win/Lin 上运行的技巧..]*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:00:18.237

我不确定它是否适合你，但我已经用 fifo 解决了类似的问题。 [http://linux.die.net/man/3/mkfifo](http://linux.die.net/man/3/mkfifo)

这可以为您提供应用程序和源之间的间接性。

```
mkfifo fifo.input
app --input fifo.input 
```

现在您可以用不同的来源填充管道。

```
cat input > fifo.input
ctrl-c
cat otherInput > fifo.unput 
```

希望它能解决您在 Linux 上的问题。到目前为止，我知道它在 Windows 上不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:59:08.080

你想做这样的事情。

```
 java -jar myjar.jar arg1 arg2 
```

其中 myjar.jar 是可执行的 jar，而 arg1 arg2 等是程序期望的参数。

所以假设你想传递`input.txt`给你的应用程序，`only commandline parameter required`然后它的命令将是

```
java -jar myjar.jar input.txt 
```

# xml - 这样做可以吗？将所有变量存储在 datagridview 中

> ID：16152439
> 
> 赞同：0
> 
> 时间：2013-04-22T16:49:22.980
> 
> 标签：xml, vb.net, datagridview, formatting

对不起，如果这是一个愚蠢的问题，但我仍在学习编程的 No Nos。

我正在创建一个应用程序来处理存储在 xml 文件中的大量数据。

xml文件文件就是这样格式化的

```
<Name>
   <Property_1></Property_1>
   <Property_2></Property_2>
   <Property_3></Property_3>
</Name> 
```

每个名称大约有 16 个属性和很多名称。

我目前正在做的是将所有数据从 xml 文件导入到 datagridview，并隐藏用户不需要查看的列。我正在使用 datagridview 中的数据进行所有操作。

这样做可以吗，还是只获取所需的数据并从 xml 文件中进行持续读取会更好？

例如：当用户进行选择时，现在我使用 for each 循环来查看所有行并仅使匹配的行可见。

或者应该这样，当用户进行选择时，程序会在 xml 文件中查找所有匹配条件并将所有数据加载到网格视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:42:33.103

这是一种适用于非常小的应用程序的方法。但是，通常认为应该将 UI 和业务逻辑分开。这样做的主要原因是通过适当的结构来处理大型应用程序的复杂性。

对于其他一些扔掉的演示，我会创建一个“名称”对象并添加所有属性（Property_1 等）以及一个可见属性，并且您需要一个集合（列表？）来保存它们。然后，您可以有一个方法在所有对象上设置可见属性（或传入搜索条件并允许对象自行设置），而另一个方法只返回可见对象。您可以将网格数据绑定到对象。

有一些框架可以为你做一些工作，但我相当肯定在这种情况下它们会是矫枉过正，因为它们有一个陡峭的学习曲线。

如果您使用的是 WPF，那么我强烈建议您阅读 MVVM。祝你好运

# codeigniter - 更改在 codeigniter 中显示给用户的 url

> ID：16152441
> 
> 赞同：0
> 
> 时间：2013-04-22T16:49:24.803
> 
> 标签：codeigniter, codeigniter-2

我不知道这是否是奇怪的请求，但我有一个显示用户个人资料的页面。当然，每个用户都有唯一的用户名，并且这些用户名包含在与他们的姓名相关联的链接中。点击后会转到他们的个人资料：

```
profile/profile_guest/username 
```

当用户单击其中一个配置文件时，它会转到用户的配置文件，地址栏中的 url 是：

```
http://domain.com/profile/profile_guest/ahlam 
```

我想要实现的是配置 routes.php 来处理这个。所以一旦点击，它会进入个人资料页面，但在 URL 地址栏中显示的是：

```
domain.com/ahlam 
```

为此，我尝试了：

```
$route['someTest'] = "profile/profile_guest/$1"; 
```

公平地说，它不起作用，仍然显示整个 URL。我能做些什么来解决这个问题？

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:53:24.413

你应该使用类似的东西

```
$route['sometest/(:any)'] = "your/link/$1"; 
```

'$1​​' 就像您将从 '(:any)' 部分收到的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:07:39.297

```
//site.com/john          = "profile/profile_gest/john"
$route['([a-z0-9\-_]+)'] = "profile/profile_gest/$1";
//where $1 = "john", so "john" respects the pattern set below 
```

但是 CI Routing 会理解任何与此模式匹配的 URI，例如“index”、“post”……是配置文件控制器的路由。

为了防止您可以向 url 添加规范，例如：

```
//site.com/john.html
$route['([a-z0-9\-_]+)\.html'] = "profile/profile_gest/$1";

//site.com/user-john
$route['user\-([a-z0-9\-_]+)'] = "profile/profile_gest/$1"; 
```

或者

> 如果您确定任何用户名不会与其他页面竞争，请始终将此规则放在底部，以便 CI 将在此之前检查所有其他路由规则。

注意：在此之前，您的[htaccess](http://www.farinspace.com/codeigniter-htaccess-file/)必须设置为从您的 url 中删除 index.php。

[CI URI 路由](http://ellislab.com/codeigniter/user-guide/general/routing.html)

[正则表达式](http://www.zytrax.com/tech/web/regex.htm)

# c - C，来自unix ls函数的总数

> ID：16152446
> 
> 赞同：0
> 
> 时间：2013-04-22T16:49:52.757
> 
> 标签：c, unix, ls

我必须使 ls -l 功能。我的问题是从 ls -l 中找到总值。这是我的做法。

```
if (l_option) {
  struct stat s;
  stat(dir_name, &s);
  printf("total %jd\n", (intmax_t)s.st_size/512);
} 
```

我相信我的解决方案根据定义是正确的，即：“对于列出的每个目录，在文件前面加上一行‘total BLOCKS’，其中 BLOCKS 是该目录中所有文件的总磁盘分配。当前的块大小默认为 1024 字节”（信息 ls）但我的功能与真正的 ls 不同。

例如：

```
>ls -l
>total 60 
```

...并在同一目录中：

```
>./ls -l
>total 8 
```

如果我写：

```
>stat .
>File: `.'
>Size: 4096         Blocks: 8          IO Block: 4096   directory
>... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:42:49.013

我修好了它：

```
n = scandir(path, &namelist, filter, alphasort);

if (l_option) { // flag if -l is given
  while (i < n) {
    char* temp = (char *) malloc(sizeof(path)+sizeof(namelist[i]->d_name));
    strcpy(temp, path); //copy path to temp
    stat(strcat(temp, namelist[i]->d_name), &s); // we pass path to + name of file
    total += s.st_blocks;
    free(temp);
    free(namelist[i++]); // optimization rules!
  }
  free(namelist);
  printf("total %d\n", total/2);
} 
```

所以基本上，我创建了包含 dir_name + 文件名的新 char 数组，然后我得到 stat 结构并使用它来查找总数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T16:58:40.963

您应该使用 opendir/readdir/closedir。

```
#include <dirent.h> 
#include <stdio.h> 

int main(void)
{
  DIR           *d;
  struct dirent *dir;
  d = opendir(".");
  if (d)
  {
    while ((dir = readdir(d)) != NULL)
    {
      count++;
    }

    closedir(d);
  }
  printf("total %jd\n",count);
  return(0);
} 
```

# heroku - heroku connection refused at precompile with initialize_on_precompile = true

> ID：16152447
> 
> 赞同：1
> 
> 时间：2013-04-22T16:50:00.303
> 
> 标签：heroku, deployment, assets, heroku-postgres

I got this error

*could not connect to server: Connection refused Is the server running on host "127.0.0.1" and accepting TCP/IP connections on port 5432?*

At precompilation, I know that one of the workaround is to put initialize_on_precompile to false **but I do need my application to be initialized** for my css to work.

This is the full error: could not connect to server: Connection refused Is the server running on host "127.0.0.1" and accepting TCP/IP connections on port 5432? /tmp/build_3eatwoqg4vdl/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/connection_adapters/postgresql_adapter.rb:1216:in `initialize'

Thanks!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:53:45.203

您可以使用*实验性*实验室功能[user-env-compile 启用此功能：](https://devcenter.heroku.com/articles/labs-user-env-compile)

> Heroku Labs 的这项功能添加了实验性支持，以在 slug 编译期间让应用程序的配置变量出现在环境中。

**笔记：**

> 通过实验室添加的功能是实验性的，可能会更改或删除，恕不另行通知。

# java - 当我使用扫描仪输入字符串时，程序会跳过一个变量

> ID：16152448
> 
> 赞同：-2
> 
> 时间：2013-04-22T16:50:03.327
> 
> 标签：java, string, input, java.util.scanner

[一只忙碌的猫 http://maradastudios.ucoz.com/school/Capture3.png](http://maradastudios.ucoz.com/school/Capture3.png)

出于某种原因，在输入员工姓名时，插入点会跳过员工 1 并直接转到员工 2。但是，员工 3 及以后的员工似乎会正确输入。这是我的完整代码。忽略它的愚蠢，我做事非常规.import

```
java.awt.AWTException;
import java.awt.Robot;
import java.awt.event.KeyEvent;
import java.util.*;
import java.text.*;
public class program1
{
    public static boolean isclearing=false;
    public static int[] num={0,0,0,0,0,0,0};
    public static String[] name={"","","","","","",""};
    public static String[] dept={"","","","","","",""};
    public static double[] rate={0,0,0,0,0,0,0};
    public static int[] hours={0,0,0,0,0,0,0};
    public static int[] code={0,0,0,0,0,0,0};
    public static Scanner in=new Scanner(System.in);
    public static NumberFormat money=NumberFormat.getCurrencyInstance();
    public static int inval=0;
    public static void main(String[] args)
    {
        while(inval!=7)
        {
            showmenu();
            inval=in.nextInt();
            switch(inval)
            {
                case 1:
                {
                    if(isclearing==false){
                    input();
                    break;}
                }
                case 2:
                {
                    employees();
                    break;
                }
                case 3:
                {
                    production();
                    break;
                }
                case 4:
                {
                    machineshop();
                    break;
                }
            }
        }
    }
    public static void showmenu()
    {
        System.out.println("\n1\. Enter data");
        System.out.println("2\. Show all employees");
        System.out.println("3\. Show Production employees");
        System.out.println("4\. Show Machine Shop employees");
        System.out.println("5\. Gross pay report");
        System.out.println("6\. Display by union (618/410)");
        System.out.print("7\. Exit\nEnter your choice >> ");
        inval=in.nextInt();
        clearme();
        for(int crap=0;crap<99999;crap++){}
    }
    public static void input()
    {
        for(int i=0;i<7;i++)
        {
            System.out.print("Enter employee number "+(i+1)+": ");
            num[i]=in.nextInt();
        }
        for(int i=0;i<7;i++)
        {
            System.out.print("Enter employee name "+(i+1)+": ");
            name[i]=in.nextLine();
        }
        for(int i=0;i<7;i++)
        {
            System.out.print("Enter employee department "+(i+1)+": ");
            dept[i]=in.nextLine();
        }
        for(int i=0;i<7;i++)
        {
            System.out.print("Enter current rate "+(i+1)+": ");
            rate[i]=in.nextDouble();
        }
        for(int i=0;i<7;i++)
        {
            System.out.print("Enter current hours "+(i+1)+": ");
            hours[i]=in.nextInt();
        }
        for(int i=0;i<7;i++)
        {
            System.out.print("Enter union code "+(i+1)+": ");
            code[i]=in.nextInt();
        }
    }
    public static void employees()
    {
        System.out.println("Employee\tEmployee\tEmployee");
        System.out.println("Number  \tName    \tDepartment\n");
        for(int i=0;i<7;i++)
        {
            //System.out.println(num[i]+"\t"+name[i]+"\t"+dept[i]+"\t"+money.format(rate[i])+"\t"+hours[i]+"\t"+code[i]);
            System.out.println(num[i]+"\t"+name[i]+"\t"+dept[i]);
        }
    }
    public static void production()
    {
        System.out.println("Employee\tEmployee\tEmployee  ");
        System.out.println("Number  \tName    \tDepartment\n");
        for(int i=0;i<7;i++)
        {
            if(dept[i].equals("Production"))
            {
                //System.out.println(num[i]+"\t"+name[i]+"\t"+dept[i]+"\t"+money.format(rate[i])+"\t"+hours[i]+"\t"+code[i]);
                System.out.println(num[i]+"\t"+name[i]+"\t"+dept[i]);
            }
        }
    }
    public static void machineshop()
    {
        System.out.println("Employee\tEmployee\tEmployee  ");
        System.out.println("Number  \tName    \tDepartment\n");
        for(int i=0;i<7;i++)
        {
            if(dept[i].equals("Machine Shop"))
            {
                //System.out.println(num[i]+"\t"+name[i]+"\t"+dept[i]+"\t"+money.format(rate[i])+"\t"+hours[i]+"\t"+code[i]);
                System.out.println(num[i]+"\t"+name[i]+"\t"+dept[i]);
            }
        }
    }
    public static void clearme()
    {
        isclearing=true;
        try
        {
            Robot pressbot = new Robot();
            pressbot.keyPress(17); // Holds CTRL key.
            pressbot.keyPress(76); // Holds L key.
            pressbot.keyRelease(17); // Releases CTRL key.
            pressbot.keyRelease(76); // Releases L key.
            pressbot.keyPress(KeyEvent.VK_SPACE);
            pressbot.keyRelease(KeyEvent.VK_SPACE);
            pressbot.keyPress(KeyEvent.VK_ENTER);
            pressbot.keyRelease(KeyEvent.VK_ENTER);
        }
        catch (AWTException ex)
        {
            //Hi.
        }
        isclearing=false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:56:40.987

[Scanner#nextInt()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextInt%28%29) does not consume newline characters, instead passing through to the loop that reads employee names.

```
name[i] = in.nextLine(); 
```

The first line in the iteration now will not block as it has already received input from the previous block.

*Solution:* add `in.nextLine()` prior to the second loop to consume the newline character.

# c# - Importing CSV file into a List using C#

> ID：16152453
> 
> 赞同：1
> 
> 时间：2013-04-22T16:50:19.133
> 
> 标签：c#, list, class, datagridview

I am using C# to import a CSV file into my application

Currently I had a 1 field CSV file. It worked great but now I wanted to add a 3 field CSV file into the same application.

Once the data is stored into the List, I'm binding it to my DataGridView

Here is the relevent code I've written. If you see any issue(s) that aren't part of my problem but can be a problem, please feel free to shout them out. Im always looking to learn and improve my code.

```
 BindingList<StringValue> data = new BindingList<StringValue>();

    private void importExcelFile()
    {
        TextFieldParser parser = new TextFieldParser(fileName);            
        parser.TextFieldType = FieldType.Delimited;
        parser.SetDelimiters(",");
        while (!parser.EndOfData)
        {
            //Processing row
            string[] fields = parser.ReadFields();
            foreach (string field in fields)
            {
                StringValue s = new StringValue(field);
                // Issue is here. It adds it to a single dimension array. What can I do to make it multi-dimension?
                data.Add(s);
            }
        }
        parser.Close();
    }

    private void OnBackgroundWorkerDoWork(object sender, DoWorkEventArgs e)
    {            
        importExcelFile();            
    }

    private void OnBackgroundWorkerRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        dataGridView1.DataSource = data;
        dataGridView1.Columns[1].Name = "URL";
        dataGridView1.Columns[1].HeaderText = "URL";
        dataGridView1.Columns[1].Width = 300;
        dataGridView1.Columns[1].ReadOnly = true;
        dataGridView1.AutoResizeColumns();            
        toolStripStatusLabel1.Text = dataGridView1.RowCount.ToString() + " Number Of Websites";
    } 
```

* * *

```
class StringValue
{
    string day, time, url;
    public StringValue(string s)
    {
        _value = s;
    }

    public StringValue(string[] s)
    {
        day = s[0];
        time = s[1];
        url = s[2];
    }

    public string Value { get { return _value; } set { _value = value; } }
    string _value;
} 
```

I think I should modify my StringValue class to hold the multiple fields that I'm importing from my CSV file. I'm not sure how to modify the Value part to return the data I need when I bind it to my dataGridView

Thank you for your input and help/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:56:41.790

In your entity (StringValue) you can add as many properties as you want, containing as many values as your want.

You can bind each column of your dataGridView by setting the columns DataPropertyName with the name of the property you are binding to.

For example, your entity has two properties:

```
class MyValues
{
    public string FirstName {get;set;}
    public string LastName {get;set;}
} 
```

You add a collection of this to yuur data-collection, which you bind to your grid.

Your grid can be configures as:

```
dataGridView1.Columns[0].Name = "FirstName";
dataGridView1.Columns[0].HeaderText = "FirstName";
dataGridView1.Columns[0].DataPropertyName = "FirstName";
dataGridView1.Columns[1].Name = "LastName";
dataGridView1.Columns[1].HeaderText = "LastName";
dataGridView1.Columns[1].DataPropertyName = "LastName"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:57:31.373

Why not juste put the csv into a datatable like so?

```
private DataTable GetDataTableFromCsv(string path)
    {
        DataTable dataTable = new DataTable();
        String[] csv = File.ReadAllLines(path);

        foreach (string csvrow in csv)
        {
            var fields = csvrow.Split(','); // csv delimiter
            var row = dataTable.NewRow();

            row.ItemArray = fields;
            dataTable.Rows.Add(row);
        }

        return dataTable;
    } 
```

after that juste import the datatable into your datagridview.

# ant - modify temp value to do mutiple build in ant

> ID：16152454
> 
> 赞同：1
> 
> 时间：2013-04-22T16:50:21.057
> 
> 标签：ant, build

I want to do multiple builds in ant but the files in /tmp getting cleared by one build and fails the other. How to set a different value for TEMP variable. Tried setting env key="TEMPDIR" path="/tmp/mytemp1", env key="TEMP" path="/tmp/mytemp1", env key="TMP" path="/tmp/mytemp1", env key=" java.io.tmpdir" path="/tmp/mytemp1" but no luck. In short, how can I change value of TEMP for each process?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:01:10.183

我建议你看看使用标准的 ANT [tempfile](http://ant.apache.org/manual/Tasks/tempfile.html)任务来创建临时文件。

解决此问题的一种更常见的方法是在项目工作区中创建一个“构建”目录和一个“干净”目标以删除由 ANT 构建创建的文件：

```
<property name="build.dir" location"build"/>
<property name="classes.dir" location"${build.dir}/classes"/>

<target name="compile">
  <mkdir dir="${classes.dir}"/>
  <javac srcdir="${src.dir}" destdir="${classes.dir}"...
</target>

<target name="clean">
  <delete dir="${build.dir}"/>
</target> 
```

为了确保项目的干净构建，您可以按如下方式运行它：

```
ant clean compile 
```

# 更新

与设置临时目录相关的其他 stackoverflow 问题

*   [无法更改 java.io.tmpdir](https://stackoverflow.com/questions/10108262/not-able-to-change-java-io-tmpdir)
*   [控制 java.io.tmpdir 的环境变量？](https://stackoverflow.com/questions/1924136/environment-variable-to-control-java-io-tmpdir)

# javascript - 需要改进导航列表

> ID：16152455
> 
> 赞同：0
> 
> 时间：2013-04-22T16:50:22.387
> 
> 标签：javascript, html

我做了一个简单的 html 导航列表 + 一些 javascript。问题是，当我选择一个选项并单击提交时，我希望返回一个值，但该值会在 1 秒内消失，这里是代码：

```
<!doctype html>

<html>
<head>
<title>lol</title>
<meta charset="utf-8">
</head>
<body>
    <form action="" name="form">
       <input type="text" id="hp">

       <select name="" id="lol">
            <option value="neki1">neki1</option>
            <option value="neki2">neki2</option>
            <option value="neki3">neki3</option>
       </select>

       <input type="submit" onmousedown="radi()">   
       </form>
       <script type="text/javascript">
         function radi () {
            var x = document.getElementById('lol').selectedIndex,
            y = document.getElementById('lol').options,
            z = Number(document.form.hp.value),
            zSum = 0;

            if(y[x].text === "neki1"){
            zSum = z + 20;
            }

            else if(y[x].text === "neki2" ){
            zSum = z + 35;
            }

            else if(y[x].text === "neki3" ){
            zSum = z + 55;
            }

            document.form.hp.value = zSum;
        }
</script>
</body>
</html> 
```

编辑：如果我更改选项，我还希望减去旧值:))，是的，第一个问题已经得到解答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:57:38.400

那是因为您没有停止提交表单并且页面正在重新加载。将按钮代码更改为：

```
<input type="submit" onclick="return radi()"> 
```

并在你的函数结束时添加

```
return false; 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/A59SV/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:16:18.480

对于第二个问题

javascript的用户`parseInt()`方法将值从文本框转换回整数。如果值为非 0，则根据需要进行减法。

```
parseInt(document.form.hp.value) 
```

# knockout.js - 处理使用 requireJS 加载时计算的淘汰赛时出错

> ID：16152456
> 
> 赞同：1
> 
> 时间：2013-04-22T16:50:22.820
> 
> 标签：knockout.js

我正在使用 KnockoutJS 2.2 并尝试通过将“currentPanel”设置为显示在主模板页面上来实现应用导航

```
<div id="content" data-bind="template: {name: currentPanel}"></div> 
```

因此更改路由器中的面板名称将更改显示的内容

```
app.Router = Backbone.Router.extend({

  routes : {
     "" : "home",
     "index.html" : "home"
  },

  home : function() {
     app.appModel.set({'panelName' : 'index-template'});
  }, 
```

这背后的模型看起来像

```
app.appModel = new Backbone.Model({
   panelName : 'index-template'
});

// VERSION 3: Using a simple JS object
app.AppViewModel = function(model){
  this.panelName = kb.observable(model, 'panelName');

  this.currentPanel = ko.computed(function() {
     return this.panelName();
  }, this);
}
app.appViewModel = new app.AppViewModel(app.appModel);
ko.applyBindings(app.appViewModel, $('#content')[0]); 
```

这在不使用 requireJS 加载时非常有效。

但是 - 当我使用 require 加载我的脚本时

```
require.config({
  paths : {
     jquery : 'vendor/jquery-1.8.3.min',
     underscore : 'vendor/underscore',
     backbone : 'vendor/backbone',
     knockout : 'vendor/knockout-2.2.0.debug',
     knockback : 'vendor/knockback-0.17-2'
  }
});

define(['jquery', 'underscore', 'backbone', 'knockout', 'knockback'], function($, _, Backbone, ko, kb){

 // my code here....
}); 
```

使用 AMD 版本的下划线和主干 [从这里][1]，据我了解 [knockoutJS 是 AMD Ready™][2]。

**我在定义 'this.currentPanel' ko.computed 字段时收到此 JS 错误**：

```
Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters. 
```

（由于某种原因，我的 Firebug 甚至没有显示脚本窗格下的 knockout.js 库以进行调试 - 它在 Net 下加载 - 这不是我在使用集成到 Dojo 中的 requireJS 时的经验，但也许它是我的 Firebug 版本Linux）。

我还尝试了使用 jQuery 1.9 的 Knockout 2.2.1（2.2.0 与 jQuery 1.9 不兼容，因此在那里进行了更改）。

从knockoutJS代码中我可以看出，ko.computed的声明默认为只读，我试图用read_only=false属性来解决这个问题；但这似乎没有帮助，我不知道如何告诉 KO 它是可写的。

但是，由于这个错误不会出现在非 requireJS 加载情况下，我想我追错了。

任何人都可以理解这种情况下的错误吗？我是否面临一些配置问题或诚实的 KnockoutJS 问题？

- - 更新 - -

原始定义中有一个可观察到的击退，但如果我删除它并简单地使用 ko.observable，比如

```
// VERSION 3: Using a simple JS object
app.AppViewModel = function(model){

  this.currentPanel = ko.computed(function() {
     return 'index-template';
  }, this);
}
app.appViewModel = new app.AppViewModel(app.appModel);
ko.applyBindings(app.appViewModel, $('#content')[0]); 
```

确切的错误仍然存​​在。

```
Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters. 
```

# php - 搜索多个搜索词

> ID：16152457
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:50:23.673
> 
> 标签：php, mysql

如何使用以下代码搜索多个字段：

```
if (count($error) < 1) {

   $searchSQL = "SELECT sid, sdate, stitle, slocation, skategori, stype, sbody, slist FROM job_search WHERE ";

   # grab the search types.
   $types = array();
   $types[] = isset($_GET['title'])?"`stitle` LIKE '%{$searchTermDB}%'":'';
   $types[] = isset($_GET['desc'])?"`skategori` LIKE '%{$searchTermDB}%'":'';
   $types[] = isset($_GET['list'])?"`slist` LIKE '%{$searchTermDB}%'":'';          
        $types = array_filter($types, "removeEmpty"); 

   if (count($types) < 1) {

      $types[] = "`sbody` LIKE '%{$searchTermDB}%'"; 
      $andOr = isset($_GET['matchall'])?'AND':'OR';
      $searchSQL .= implode(" {$andOr} ", $types) . " ORDER BY `stitle`"; 
      $searchResult = mysql_query($searchSQL) or trigger_error("Error.<br/>" . mysql_error() . "<br />SQL Was: {$searchSQL}");

   }
} 
```

我在 中使用了一个复选框，`$types = array();`如果未选中任何复选框，则搜索将使用`$types[] = "sbody LIKE '%{$searchTermDB}%'";`.

我想知道的是如何`$types[]`在 中创建多个`{$searchTermDB}`并仅使用搜索所有字段 `LIKE '%{$searchTermDB}%'";`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T17:04:26.347

```
SELECT sid, sdate, stitle, slocation, skategori, stype, sbody, slist 
FROM job_search 
WHERE MATCH(`stitle`, `skategori`, `slist`) 
AGAINST('{$searchTermDB}' IN BOOLEAN MODE) 
```

您可以构建与当前操作类似的字段字符串。以上是完整查询的基本示例。

请注意，您确实应该使用 PDO 或 mysqli 之类的东西来处理数据库通信。mysql_ 函数已弃用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T17:28:16.077

这是解决方案。完全归功于@Kaiqing 的帮助。我放弃了 $types = array(); 并将其替换为以下内容：

```
 // If there are no errors, lets get the search going.
   if (count($error) < 1) {
      $searchSQL = "
      SELECT sid, sdate, stitle, slocation, skategori, stype, sbody, slist 
      FROM job_search 
      WHERE MATCH(`stitle`, `skategori`, `slist`, `sbody`, `slocation`) 
      AGAINST('{$searchTermDB}' IN BOOLEAN MODE) ";

      $searchResult = mysql_query($searchSQL) or trigger_error("There was an error.<br/>" . mysql_error() . "<br />SQL Was:        {$searchSQL}"); 
```

我没有使用 PDO，安全的选择是使用 PDO 方法。

# ios - 使用 SLRequest 发布到 Facebook 页面

> ID：16152459
> 
> 赞同：1
> 
> 时间：2013-04-22T16:50:29.120
> 
> 标签：ios, objective-c, facebook, slrequest

我可以使用`SLRequest`发布到`me/feed`，但尝试发布到 时遇到问题`[pageid]/feed`。

有人可以指出我如何做到这一点的正确方向吗？

我请求了 @"publish_stream" 权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:30:49.207

所以事实证明，必须在两个不同的步骤中授予权限。我的印象是已经包含了基本权限。如果有人需要 Facebook 发布方面的一般帮助，这对我有帮助：

[http://www.stuarticus.com/2012/11/12/ios-6-the-social-framework-reference/](http://www.stuarticus.com/2012/11/12/ios-6-the-social-framework-reference/)

# ruby-on-rails-3 - Mongoid + 设计每日注册

> ID：16152462
> 
> 赞同：0
> 
> 时间：2013-04-22T16:50:39.907
> 
> 标签：ruby-on-rails-3, mongodb, devise, mapreduce, mongoid

我一直在与 Devise 一起在我的最新项目中使用 Mongoid。到目前为止，它很棒。

我想计算按 created_at 日期分组的每天用户注册数。

我知道在 mongoDB 中它没有像关系数据库那样的传统组，而是使用 Map/Reduce 进行此类查询。

我可以通过使用纯 ruby​​ 并遍历一系列日期来做到这一点，但我真的很想使用 MongoDB 中的聚合框架生成这些信息，但这样做有点麻烦。

谁能给我一个例子，说明如何使用基于创建日期的 map reduce 来获取 Mongoid 文档的数量？

谢谢

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:49:36.417

我有[一篇博客文章](http://www.kamsky.org/1/post/2013/03/stupid-date-tricks-with-aggregation-framework.html)描述了如何使用聚合框架按天（或日期时间字段的任何其他截断）进行分组。

简而言之，您需要做的是使用 $project stage 将 created_at 字段转换为“日期”值（或反映特定日期午夜的值），然后在执行 {$sum 时将日期为 _id 的 $group :1} 获取用户数。

# visual-studio-2010 - 当项目已签出超过“X”天时，TFS 2010 能否生成电子邮件警报？

> ID：16152471
> 
> 赞同：0
> 
> 时间：2013-04-22T16:51:01.810
> 
> 标签：visual-studio-2010, tfs

如果用户签出文件但在一定天数后未能重新签入，我希望 TFS 2010 生成一封电子邮件。（例如，项目签出 1 天后会通知用户，2 天后会通知整个团队。）

我找到了关于编写[TFS 服务器插件的文章](http://blogs.microsoft.co.il/blogs/assafstone/archive/2011/07/29/how-to-write-a-robust-tfs-server-plugin-with-job-extensions.aspx)

但我想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:41:17.490

问题是，通知/警报是 TFS 中触发的事件。因此，如果没有任何变化，则不会触发。比自己写插件要容易一点，插件也需要一个触发器，但是可以检查多于改变的项，一个小应用会更容易。一个小的命令行工具就足够了，您可以使用每天一次的计划任务来运行它。该工具将检查所有待处理的更改以及它们待处理的时间，如果它们太旧，它会向用户发送邮件。

# string - 在结构 C 中操作字符串

> ID：16152476
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:51:38.093
> 
> 标签：string, struct

所以我有一个名为 task 的结构，它初始化了一些东西。

```
typedef struct _task{
        char *task_name;
        int priority; // higher numbers have higher priority                                                                                                                  
        char date_entered[11];
        char date_completed[11]; // not used yet                                                                                                                              
} task; 
```

我正在尝试编写一个名为 task *makeTask 的函数，它接受 (char *name, char *date, and char *priority) 我需要为新任务分配内存，新任务中的名称，我认为日期。到目前为止，我已经使用这个遇到了分段错误：

```
task *makeTask(char *name, char *date, char *priority)
{
  int i;
  int j;
  int k;
  task *newtask = malloc(sizeof(task));
  for(i=0; name[i] != '\0'; i++){
    if(name[i] == '\n')
      name[i] = '\0';
    }
  newtask->task_name = malloc(sizeof(char *)*(strlen(name)+1));
  strcpy(newtask->task_name, name);
  newtask->priority = atoi(priority);
  for(j=0; date[j] != '\0'; j++){
    if(date[j] == '\n')
      date[j] == '\0';
  }

  return newtask;// FILE THIS IN                                                                                                                                              
} 
```

我想我对字符串以及如何操作它们并没有真正扎实的理解。为什么我的代码在这里给我一个分段错误？是循环还是我为结构分配内存的方式？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:05:18.693

我还没有发现任何可以保证分段错误的东西，但是这里有一些问题。

你的循环，

```
 for(i=0; name[i] != '\0'; i++){
    if(name[i] == '\n')
      name[i] = '\0';
    } 
```

除了有些奇怪之外，您还假设`name`已正确初始化。如果还没有，那么该循环将引发分段错误。你的`date`循环也是如此

以下行：newtask->task_name = malloc(sizeof(char *)* (strlen(name)+1));

`sizeof(char *)`, 有点奇怪，因为您正在初始化一个字符数组，而不是一个字符指针数组（一个数组数组）。我不知道这是否真的有太大的不同，但这很奇怪。

# asp.net - 如何在 Nancy 中显示我的 404 页面？

> ID：16152483
> 
> 赞同：10
> 
> 时间：2013-04-22T16:52:01.110
> 
> 标签：asp.net, .net, nancy

我需要像这样在 Nancy 中显示我的 404 错误页面

```
if (ErrorCode == 404)
{
  return View["404.html"];
} 
```

怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-22T10:09:51.187

nemesv 的答案是正确的，但我只想添加一个使用 ViewRenderer 而不是 GenericFileResponse 的示例。

```
public class MyStatusHandler : IStatusCodeHandler
{
    private IViewRenderer viewRenderer;

    public MyStatusHandler(IViewRenderer viewRenderer)
    {
        this.viewRenderer = viewRenderer;
    }

    public bool HandlesStatusCode(HttpStatusCode statusCode,
                                  NancyContext context)
    {
        return statusCode == HttpStatusCode.NotFound;
    }

    public void Handle(HttpStatusCode statusCode, NancyContext context)
    {
        var response = viewRenderer.RenderView(context, "/status/404");
        response.StatusCode = statusCode;
        context.Response = response;
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-22T20:14:00.817

您只需要提供`IStatusCodeHandler`接口的实现（它将由 Nancy 自动获取）。

在`HandlesStatusCode`方法中返回 true 为`HttpStatusCode.NotFound`.

在该`Handle`方法中，您需要使用包含错误页面内容的响应来设置`Response`属性。`NancyContext`您可以使用例如`GenericFileResponse`：

```
public class My404Hander : IStatusCodeHandler
{
    public bool HandlesStatusCode(HttpStatusCode statusCode, 
                                  NancyContext context)
    {
        return statusCode == HttpStatusCode.NotFound;
    }

    public void Handle(HttpStatusCode statusCode, NancyContext context)
    {
        var response = new GenericFileResponse("404.html", "text/html");
        response.StatusCode = statusCode;
        context.Response = response;            
    }
} 
```

# java - 如何使用 mybatis 直接从 java 代码中执行查询？

> ID：16152485
> 
> 赞同：5
> 
> 时间：2013-04-22T16:52:14.173
> 
> 标签：java, sql, mybatis

我需要在运行时执行由 java 代码生成的查询（不是静态方法）。我已经知道如何使用注解和静态方法或使用 xml 映射器来构建动态查询，但它不适合我的情况。

有没有办法直接从java代码执行查询？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-11T02:05:50.810

Mybatis 已经有这个功能了，但是你必须使用适配器，如下所示。

1.  创建一个适配器类；

    > ```
    > public class SQLAdapter {
    >   String sql;
    > 
    >   public SQLAdapter(String sql) {
    >       this.sql = sql;
    >   }
    > 
    >   public String getSql() {
    >       return sql;
    >   }
    > 
    >   public void setSql(String sql) {
    >       this.sql = sql;
    >   }
    > } 
    > ```

2.  创建类 SQLAdapter 的 typeAlias

> `<typeAlias alias="sqladapter" type="com.zj.xxx.xxx.SQLAdapter" />`

3.  在需要直接执行 sql 的每个对象 xml 中放置选择标记。

    ```
    <select id="findRecords" parameterType="SQLAdapter" resultMap="xxxxxResultMap">  
        ${sql}  
    </select> 
    ```

4.  像这样调用这个选择方法

    > ```
    > String _sql = "select * from table where... order by... limit...";
    > xxxxx.findRecords(new SQLAdapter(_sql)); 
    > ```

5.  事情都已经做好了。您不能再在 xml 文件中编写复杂的 sql 语言。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:47:33.370

似乎最好的答案是在这种情况下使用 JDBC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T11:56:57.000

You can do this using SQL query as literal parameter:

```
<select id="findRecords" parameterType="string" resultMap="xxxxxResultMap">  
    ${_parameter}
</select> 
```

You can pass only where clause:

```
<select id="findRecords" parameterType="string" resultMap="xxxxxResultMap">  
    select * from records where ${_parameter}
</select> 
```

# node.js - 无法运行 mongodb2.4 文本搜索

> ID：16152490
> 
> 赞同：1
> 
> 时间：2013-04-22T16:52:21.067
> 
> 标签：node.js, mongodb, search, text, mongoose

当我运行 mongo db 我得到这个：

```
$ ./mongo db
MongoDB shell version: 2.4.2
connecting to: db
Server has startup warnings:
** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000
Mon Apr 22 19:25:54.938 [initandlisten] Index { v: 1, key: { type: "text", color: "text", category_A: "text", category_B: "text", category_C: "text" }, ns: "db.items", name: "type_text_color_text_category_A_text_category_B_text_category_C_text", sparse: false, background: false } claims to be of type 'text', which is either invalid or did not exist before v2.4\. See the upgrade section: http://dochub.mongodb.org/core/upgrade-2.4
> db.adminCommand( { setParameter : 1, textSearchEnabled : true } )
{ "was" : false, "ok" : 1 }
> db.runCommand("text",{search:"le"})
{
    "errmsg" : "exception: wrong type for field (text) 1 != 2",
    "code" : 13111,
    "ok" : 0
}

when I run the following code with nodejs I get - 
var mongoose = require("mongoose");
var Schema  = mongoose.Schema;
var ObjectId = Schema.ObjectId;
var Items = new Schema({
   type            : { type : String , default:""},
    color           : { type : [String] , default:""},
   category_A      : { type : String , default:""},
    category_B      : { type : String , default:""},
    category_C      : { type : String , default:""},
});
var textSearch = require("mongoose-text-search");
var ItemModel = mongoose.model('Item', Items);
Items.plugin(textSearch);
Items.index({
    type            :"text",
    color           :"text",
   category_A      :"text",
    category_B      :"text",
    category_C      :"text"
},
   {
        name: "best_match_index",
       weights: {
            type: 5,  
            color:   4,
      }
    }
)
ItemModel.textSearch('D', function (err, output) {
    if (err) 
    console.log(err);
    else
    console.log(output)
}) 
```

运行这个我得到： ItemModel.textSearch('D', function (err, output) { ^ TypeError: Object function model() { Model.apply(this, arguments); } has no method 'textSearch'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T13:17:32.180

这里有同样的问题。我通过应用 /mongoose-text-search/lib/index.js 中的代码解决了它

```
 YOURSCHEMA.statics.textSearch = function (search, o, cb) {
    if ('function' == typeof o) cb = o, o = {};

    if ('function' != typeof cb) {
      throw new TypeError('textSearch: callback is required');
    }

    var model = this;
    var lean = !! o.lean;

    // mongodb commands require property order :(
    // text must be first
    var cmd = {};
    cmd.text = o.text || this.collection.name;

    cmd.search = search;

    var keys = Object.keys(o);
    var i = keys.length;
    while (i--) {
      var key = keys[i];
      switch (key) {
        case 'text':
          // fall through
        case 'lean':
          continue;
        case 'filter':
          cmd.filter = model.find(o.filter).cast(model);
          break;
        case 'project':
          // cast and apply default schema field selection
          var query = model.find().select(o.project);
          query._applyPaths();
          var fields = query._castFields(query._fields);
          if (fields instanceof Error) return cb(fields);
          cmd.project = fields;
          break;
        default:
          cmd[key] = o[key];
      }
    }

    this.db.db.command(cmd, function (err, res) {
      if (err) return cb(err, res);
      if (res.errmsg) return cb(new Error(res.errmsg));
      if (!lean && Array.isArray(res.results)) {
        // convert results to documents
        res.results.forEach(function (doc) {
          if (!doc.obj) return;
          var d = new model(undefined, undefined, true);
          d.init(doc.obj);
          doc.obj = d;
        })
      }
      cb(err, res);
    });
  }
} 
```

到我的本地架构文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T19:03:29.420

需要仔细检查的一件事是，您`statics`在应用插件后没有覆盖该属性。这就是造成我问题的原因。

```
mySchema.plugin(textSearch);
mySchema.index({ name: 'text' });
...
mySchema.statics = { ... } 
```

# android - Enable back button in WebView

> ID：16152491
> 
> 赞同：7
> 
> 时间：2013-04-22T16:52:31.853
> 
> 标签：android, webview, android-webview

I am just starting out with the Android SDK. I wanted to make a simple app with WebView that displays local web-pages only. I have used examples I have found on the net to make it.

The app works just great, until I want to add a back-button. When the phones back-button is pressed the app crashes.

Here is my **MainActivity.java**

```
package com.hspd.avhor;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    WebView wv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView wv = (WebView)findViewById(R.id.hspd_webview);
        wv.setWebViewClient(new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url){
                view.loadUrl(url);
                return true;
            }
        });
        wv.loadUrl("file:///android_asset/one.htm");
    }

    @Override
    public void onBackPressed()
    {
        if(wv.canGoBack())
            wv.goBack();
        else
            super.onBackPressed();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

And here is my **activity_main.xml**:

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <WebView
        android:id="@+id/hspd_webview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</ScrollView> 
```

Here are my errors in **logcat**:

```
04-22 17:48:06.953: W/dalvikvm(799): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-22 17:48:06.972: E/AndroidRuntime(799): FATAL EXCEPTION: main
04-22 17:48:06.972: E/AndroidRuntime(799): java.lang.NullPointerException
04-22 17:48:06.972: E/AndroidRuntime(799):  at com.hspd.avhor.MainActivity.onKeyDown(MainActivity.java:41)
04-22 17:48:06.972: E/AndroidRuntime(799):  at android.view.KeyEvent.dispatch(KeyEvent.java:2609)
04-22 17:48:06.972: E/AndroidRuntime(799):  at android.app.Activity.dispatchKeyEvent(Activity.java:2375)
04-22 17:48:06.972: E/AndroidRuntime(799):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1847)
04-22 17:48:06.972: E/AndroidRuntime(799):  at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3701)
04-22 17:48:06.972: E/AndroidRuntime(799):  at android.view.ViewRootImpl.handleImeFinishedEvent(ViewRootImpl.java:3651)
04-22 17:48:06.972: E/AndroidRuntime(799):  at android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:2818)
04-22 17:48:06.972: E/AndroidRuntime(799):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 17:48:06.972: E/AndroidRuntime(799):  at android.os.Looper.loop(Looper.java:137)
04-22 17:48:06.972: E/AndroidRuntime(799):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-22 17:48:06.972: E/AndroidRuntime(799):  at java.lang.reflect.Method.invokeNative(Native Method)
04-22 17:48:06.972: E/AndroidRuntime(799):  at java.lang.reflect.Method.invoke(Method.java:511)
04-22 17:48:06.972: E/AndroidRuntime(799):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-22 17:48:06.972: E/AndroidRuntime(799):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-22 17:48:06.972: E/AndroidRuntime(799):  at dalvik.system.NativeStart.main(Native Method) 
```

Thanks in advance :)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T16:54:46.597

Override onKeyDown(params), check if the key pressed is back button ,check if the webview can navigate to previous page, if so naviagate to previous page. If there is no web page to display you can finish the actiivty

You can use the below

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && webView.canGoBack()) { 
            //if Back key pressed and webview can navigate to previous page
        webView.goBack();
            // go back to previous page
        return true;
    }
    else
    {
        finish();
           // finish the activity
    }
    return super.onKeyDown(keyCode, event);
} 
```

Edit:

Remove the scrollview in xml layout. Try the below

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<WebView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/wv"></WebView>
</LinearLayout> 
```

Edit:2

Here's a sample that works. Tested on samsung galaxy s3

activtiy_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<WebView
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_centerHorizontal="true"
android:layout_centerVertical="true"
android:id="@+id/wv"/>

</RelativeLayout> 
```

MainActivity

```
 public class MainActivity extends Activity {
 private WebView webView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        webView = (WebView) findViewById(R.id.wv);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebChromeClient(new WebChromeClient() {
               public void onProgressChanged(WebView view, int progress) {
                MainActivity.this.setProgress(progress * 1000);
               }
             });
             webView.setWebViewClient(new WebViewClient() {
               public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                 Toast.makeText(MainActivity.this, "Oh no! " + description, Toast.LENGTH_SHORT).show();
               }
             });

             webView.loadUrl("http://slashdot.org/");

}   

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && webView.canGoBack()) {
        webView.goBack();
        return true;
    }
    else
    {
        finish();
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

# iphone - Facebook SDK FBLoginView 在没有连接时崩溃

> ID：16152492
> 
> 赞同：1
> 
> 时间：2013-04-22T16:52:33.333
> 
> 标签：iphone, ios, objective-c, facebook

Facebook SDK 的另一个问题。我永远无法让它像在示例中那样工作。无论如何，我的会话将被注销，我关闭 wifi 等，当我点击登录按钮 (FBLoginView) 时，应用程序立即崩溃。为什么它没有像在示例中那样打开一个 Safari 页面，并且 Safari 会给用户一个错误，说没有连接？可能有帮助的信息：我在 modalViewController 上显示 FBLoginView。有连接时，该按钮可以正常工作。当它崩溃并且它没有指向任何有用的地方时，我得到一个 EXC_BAD_ACCESS 错误。我已经在我测试我的项目的同一设备上测试了 samplePorject，并且示例的行为符合预期，排除了操作系统/设备。

感谢您的帮助，
问候，
迈克

**更新：**这是崩溃的图片： ![在此处输入图像描述](https://i.stack.imgur.com/MsBwz.png) 这与我在另一个线程中遇到的崩溃相同，因为我在 FB 开发人员仪表板中将 Sandboxing 设置为“On”。为什么没有互联网时我会遇到同样的问题？感觉好像这个 SDK 坏了。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T14:15:58.543

在最新的 Facebook SDK 3.5.1 中修复了问题。

# java - CriteriaQuery 无排序

> ID：16152493
> 
> 赞同：0
> 
> 时间：2013-04-22T16:52:33.810
> 
> 标签：java, hibernate, jpa

我尝试按一个字段排序，但我在 sql-debugger 中看到 sql 不包含 order-clause。

我的标准代码是

```
GenericDaoImpl<T> {
    CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<T> cq = getCriteriaQuery(cb);
    Root<T> entity = getRoot(cq);
    cq.select(entity);
    TypedQuery<T> q = em.createQuery(cq);

    cq.orderBy(cb.asc(entity.get(order))); 
```

和

```
public class GenericDaoClient extends GenericDaoImpl<Client> {
    @Override
    protected CriteriaQuery<Client> getCriteriaQuery(CriteriaBuilder cb){
            return (CriteriaQuery<Client>) cb.createQuery(Client.class);
    }

    @Override
    protected Root<Client> getRoot(CriteriaQuery cq){
            return cq.from(Client.class);
    } 
```

比我打电话给我的 dao 来获得有序列表：

```
dao.findAll(false,page*step+1,(page-1)*step+1,"conferm"); 
```

结果我的 sql-query 没有 order 子句：

```
select client0_.idCl as idCl218_ ... from Client client0_ limit ?, ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:26:19.897

在设置 order by 子句*之前*构造类型化查询。反转这两个指令：

```
TypedQuery<T> q = em.createQuery(cq);
cq.orderBy(cb.asc(entity.get(order))); 
```

# c - C全局变量值不保留在函数之外

> ID：16152496
> 
> 赞同：-2
> 
> 时间：2013-04-22T16:52:41.517
> 
> 标签：c, static, global-variables, uint32-t

我遇到了一个有点尴尬的问题：我有一个带有两个全局 uint32_t 变量的程序，以及一个我为它们赋值的函数。但是，当我稍后尝试打印/访问这些值时，一个给了我正确的值，而另一个仍然为零！我很困惑。这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <libnet.h>
#include <stdint.h>
#include <pcap.h>
#include <time.h>
#include <string.h>
#include <arpa/inet.h>

static uint32_t last_seq; 
static uint32_t seq_offset;

void packet_handler(u_char* user, const struct pcap_pkthdr *header, const u_char * packet){
  struct tcphdr *tcp = (struct tcphdr *) (packet + LIBNET_IPV4_H + LIBNET_ETH_H);

  printf("current seq = %u\n", ntohl((uint32_t)(tcp->seq)));
  printf("last seq = %u\n", last_seq);
  printf("difference in seq = %u\n", ntohl((uint32_t)(tcp->seq)) - last_seq);
  last_seq = ntohl((uint32_t)(tcp->seq));

  seq_offset = ntohl((uint32_t)(tcp->seq)) - last_seq;
}

void seqno_probe(){
  libnet_t *l;
  u_int32_t dst_addr;
  u_int32_t src_addr;
  char *device = "eth0";
  char errbuf[LIBNET_ERRBUF_SIZE];
  libnet_ptag_t tcp = 0;
  libnet_ptag_t ip4 = 0;
  char *filter = "(tcp[13] == 0x14) || (tcp[13] == 0x12)";
  pcap_t *handle; 
  char libpcap_errbuf[PCAP_ERRBUF_SIZE];
  struct bpf_program fp;
  bpf_u_int32 netp, maskp;
  int answer, i;
  time_t tv;

  l = libnet_init(LIBNET_RAW4, device , errbuf);
  if(l == NULL){
    fprintf(stderr, "libnet_init() failed: %s\n", errbuf);
    libnet_destroy(l);
    exit(EXIT_FAILURE);
  }

  /* IP address */

  dst_addr = libnet_name2addr4(l, "172.16.54.5", LIBNET_DONT_RESOLVE);

  if(dst_addr == -1){
    fprintf(stderr, "Error converting IP address.\n");
    libnet_destroy(l);
    exit(EXIT_FAILURE);
  }

  src_addr = libnet_name2addr4(l, "172.16.54.3", LIBNET_DONT_RESOLVE);
if(src_addr == -1){
    fprintf(stderr, "Couldn't get own IP address: %s\n", libnet_geterror(l));
    libnet_destroy(l);
    exit(EXIT_FAILURE);
  }

  handle = pcap_open_live(device, 1500, 0, 2000, libpcap_errbuf);
  if(handle == NULL){
    fprintf(stderr, "Error opening pcap handle: %s\n", libpcap_errbuf);
    libnet_destroy(l);
    exit(EXIT_FAILURE);
  }

  if((pcap_setnonblock(handle, 1, libpcap_errbuf)) == -1){
    fprintf(stderr, "Error setting nonblock: %s\n", libpcap_errbuf);
    libnet_destroy(l);
    exit(EXIT_FAILURE);
  }

  if(pcap_lookupnet(device, &netp, &maskp, libpcap_errbuf) == -1){
    fprintf(stderr, "Net lookup error: %s\n", libpcap_errbuf);
    libnet_destroy(l);
    exit(EXIT_FAILURE);
  }

  if(pcap_compile(handle, &fp, filter, 0, maskp) == -1){
    fprintf(stderr, "BPF error: %s\n", libpcap_errbuf);
    libnet_destroy(l);
    exit(EXIT_FAILURE);
  }
if(pcap_setfilter(handle, &fp) == -1){
    fprintf(stderr, "Error setting BPF: %s\n", libpcap_errbuf);
    libnet_destroy(l);
    exit(EXIT_FAILURE);
  }

  pcap_freecode(&fp);

  tcp = libnet_build_tcp(
        libnet_get_prand(LIBNET_PRu16), /*source port*/
        514,                            /*destination port */
        libnet_get_prand(LIBNET_PRu16),/*sequence number */
        0,                              /*ack*/ 
        TH_SYN,                         /*control flag*/ 
        7,                              /*window*/
        0,                              /*checksum*/
        0,                              /*urgent*/ 
        LIBNET_TCP_H,                   /*header length*/ 
        NULL,                           /*payload*/ 
        0,                              /*payload length*/
        l,                              /*libnet context*/ 
        tcp                             /*protocol tag*/
        );

  if(tcp == -1){ 
    fprintf(stderr,"Error building TCP header: %s\n", libnet_geterror(l));
    libnet_destroy(l);
    exit(EXIT_FAILURE);
  }

  ip4 = libnet_build_ipv4(
      LIBNET_TCP_H + LIBNET_IPV4_H,     /*length*/
      0,                                /*TOS*/
      libnet_get_prand(LIBNET_PRu16),   /*IP ID*/
      0,                                /*frag offset*/
      127,                              /*TTL*/
      IPPROTO_TCP,                      /*upper layer protocol*/
      0,                                /*checksum*/
      src_addr,                         /*src ip address*/
      dst_addr,                         /*dest ip address*/
      NULL,                             /*payload*/
      0,                                /*payload length*/
      l,                                /*libnet context*/
      ip4                               /*protocol tag*/
      ); 

  if(ip4 == -1){
    fprintf(stderr, "Error building IP4 header: %s\n", libnet_geterror(l));
    libnet_destroy(l);
    exit(EXIT_FAILURE);
  }

  for(i=0;i<2;i++){
    if(libnet_write(l) == -1){
      fprintf(stderr, "Unable to send packet: %s\n", libnet_geterror(l));
      libnet_destroy(l);
      exit(EXIT_FAILURE);
    }
 answer = 1;
    tv     = time(NULL);

    while(answer){
      pcap_dispatch(handle, -1, packet_handler, NULL);
      if((time(NULL) - tv) > 2){
        answer = 0;
      }
    }
  }
  libnet_destroy(l);
}

int main(){
  seqno_probe();
  printf("last_seq = %u\n seq_offset = %u\n", last_seq, seq_offset);
  return 0;
} 
```

当我运行它时，last_seq 的输出是正确的，但 seq_offset 仍然为零！任何帮助将不胜感激 ：）。

问候，

莱纳斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:08:38.977

好的，我做出正确的回答。

为什么 seq_offset 会改变？您基本上在每次通话时都将其分配为 0。

```
last_seq = ntohl((uint32_t)(tcp->seq));
seq_offset = ntohl((uint32_t)(tcp->seq)) - last_seq; 
```

将计算为`seq_offset = ntohl((uint32_t)(tcp->seq)) - ntohl((uint32_t)(tcp->seq))`始终为 0。

你必须颠倒线条

```
seq_offset = ntohl((uint32_t)(tcp->seq)) - last_seq;
last_seq = ntohl((uint32_t)(tcp->seq)); 
```

这样，last_seq 包含最后一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:09:27.613

tristopia 在评论中指出了答案，这让我感到非常尴尬。我已经通过切换两个赋值语句来修复它

```
last_seq = ntohl((uint32_t)(tcp->seq));
seq_offset = ntohl((uint32_t)(tcp->seq)) - last_seq; 
```

谢谢！

# physics - 球之间的碰撞解决后动量不守恒

> ID：16152498
> 
> 赞同：1
> 
> 时间：2013-04-22T16:52:44.520
> 
> 标签：physics

我在球之间的碰撞解决方面有问题。实际上碰撞响应是非常真实的，但是动量不是守恒的，为什么？

我使用基于此文档的算法：[http](http://www.vobarian.com/collisions/2dcollisions2.pdf) ://www.vobarian.com/collisions/2dcollisions2.pdf 。

在 Java 代码中，我的算法是：

```
/**
* Resolve the collision creating new velocities according to physical laws. 
*/
public void resolveCollisionWith(Ball ball) {
    //First resolve intersection for calculate correct new velocities.
    resolveIntersectionWith(ball);

    //Unit normal vector uN is the unit-vector that links the two centers.
    Vector uN = mPosition.subtraction(ball.getPosition()).normalize();

    //Unit tangent vector uT is the unit-vector normal to uN. It's tangent to both the    two balls.
    Vector uT = new Vector(-uN.getY(), uN.getX());

    //Project the two balls velocities onto the collision axis(uT and uN vectors).
    double v1n = uN.dot(mVelocity), v1t = uT.dot(mVelocity);
    double v2n = uN.dot(ball.getVelocity()), v2t = uT.dot(ball.getVelocity());

    //Calculate the post collision normal velocities (tangent velocities don't change).
    double v1nPost = (v1n*(mMass-ball.getMass()) + 2*ball.getMass()*v2n)/(mMass+ball.getMass());
    double v2nPost = (v2n*(ball.getMass()-mMass) + 2*mMass*v1n)/(mMass+ball.getMass());

    //Convert scalar velocities to vectors.
    Vector postV1N = uN.multiplication(v1nPost), postV1T = uT.multiplication(v1t);
    Vector postV2N = uN.multiplication(v2nPost), postV2T = uT.multiplication(v2t);

    //Change the balls velocities.
    mVelocity.set(postV1N.addition(postV1T));
    ball.getVelocity().set(postV2N.addition(postV2T));
}

 /**
 * When two balls collide can occur an intersection(the distance between the centers
 * is less than the sum of the radii) that dephases the response. 
 * The method fix this situation bringing back the two ball according to their mass.
 */
private void resolveIntersectionWith(Ball ball){
    Vector n = mPosition.subtraction(ball.getPosition());
    // How much the distance between centers is less than the radii's sum.
    double offset = getRadius() + ball.getRadius() - n.length();
    n.normalize();
    n.multiply(offset);
    // Bring back the two ball according to their mass.
    mPosition.add(n.multiplication(ball.getMass() * 1.0 / (mMass + ball.getMass())));
    ball.getPosition().subtract(n.multiplication(mMass * 1.0 / (mMass + ball.getMass())));
}

 /**
 * Normalizes and returns this vector.
 */
 // ***INSIDE VECTOR CLASS***
public Vector normalize() {
    //Avoid division by zero.
    if (mX != 0 || mY != 0) {
        double lenght = length();
        mX /= lenght;
        mY /= lenght;
    }
    return this;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:17:30.253

假设精确的数学，方程本身将转换动量。所以自然怀疑是浮点错误。在正常情况下，错误会非常小，尽管它们仍然会随着时间的推移而累积。但是，除以小数会放大错误。

当你对一个非常小的向量进行归一化时，你可能会得到一个幅度不接近 1 的东西，这要归功于每个分量划分中的放大误差。这反过来又会大大改变势头。事实上，你的代码编写方式可能会给你无穷大或 NaN，尽管我想你会注意到如果是这样的话。

事实上，在某些情况下，您甚至根本没有对向量进行归一化（当两个分量都为 0 时）。但是您仍然盲目地继续使用虚假向量。

编辑：我刚刚注意到你的向量是可变的。我强烈建议让它们不可变。它简化了代码并减少了丢失副本导致的错误范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T02:41:18.933

我的程序有一个类似的问题，我有一个用户定义的具有随机质量、半径和速度的球，它们不断地相互碰撞。该问题是由于无法避免的小数舍入错误而出现的。

我想到的使我的动量始终保持在起始动量的正负约 1% 的解决方案如下：

制作一个名为 firstRun 的布尔值，以及两个双精度数 totalMomentum 和 totalMomentum2。计算循环中第一次运行的总动量并将其保存到 totalMomentum。然后，每隔一次运行，计算总动量并将其保存到 totalMomentum2。

然后，对于第一次之后的每一次跑步，将球的速度乘以比率（totalMomentum/totalMomentum2）。

这样，如果动量太高，就会使总量降低。如果它太低，它会使其更高。

我目前有一个设置，有 200 个球相互碰撞，初始动量约为 45000。我的范围始终保持在 44500 和 45500 之间。

希望这可以帮助！

编辑：当我将球的数量减少到 5 个并增加质量时，总动量约为 22500，使用这种方法几乎完美地保存了动量。波动甚至在大多数时候都不会发生，如果发生了，它会从 22500 到 22499，然后又回到 22500。

# image - Flex 移动图像

> ID：16152501
> 
> 赞同：1
> 
> 时间：2013-04-22T16:52:54.283
> 
> 标签：image, apache-flex, scroll, move, buttonclick

我正在做一个项目，我有一个背景图像，该图像将根据用户单击的按钮移动。这个想法是，每次用户单击按钮时，背景中的“地图”（为此我已经过大）将滚动到一个位置并显示不同的 UI。这方面的一个例子是该用户在主页上，他们点击访问游览。主页 UI 会淡出（取决于我们是否有时间让它工作），然后地图会移动，给人一种我们正在穿越地图的印象。然后游览的 UI 将淡入。

我是flex新手，所以我真的不知道来龙去脉。但是有没有人对我们想要完成的事情有想法/提示？

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T10:13:01.537

```
Use     <mx:Fade id="fadeOut" duration="500" alphaFrom="1.0" alphaTo="0.0"/>
    <mx:Fade id="fadeIn" duration="500" alphaFrom="0.0" alphaTo="1.0"/>
<mx:Image id="staticPhoto" hide="{fadeOut}" show="{fadeIn}" maintainAspectRatio="true" source=""/>
and change the source of image whenever user click on button. 
```

# gwt - 如何使用 Dagger 注入 Servlet？

> ID：16152502
> 
> 赞同：1
> 
> 时间：2013-04-22T16:52:57.953
> 
> 标签：gwt, servlets, dependency-injection, dagger

如何使用 Dagger 将对象注入 Servlet？

由于 servlet 容器自己实例化了 Servlet，因此它们不是用 Dagger 创建的。因此，我能看到注入它们的唯一机制是通过静态注入，匕首主页警告不要这样做。还有另一种（最佳实践）方法吗？

具体来说，我使用的是 Jetty 和 GWT（我的 servlet 扩展了 RemoteServiceServlet），但我认为这些细节并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:45:51.113

（还）没有任何库存基础设施代码来支持 Dagger 的 Java EE servlet 堆栈。

也就是说，在我们完成之前，您可以通过多种方式自制。如果您仅将它用于单例，那么您可以镜像某些人在 android 上所做的事情，并在应用程序启动时使用上下文侦听器初始化您的图形，然后使用 Servlet 的 init() 方法进行自我注入

当您尝试为请求添加范围时，它会变得更加棘手 - 并非不可能，但它需要更多的脚手架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-07T15:55:37.987

虽然没有库存基础设施，但我做了以下事情：

我把它`ObjectGraph`放到`ServletContext`了网络服务器中。然后，对于每个 Servlet，我可以执行以下操作，

```
@Inject
SomeDependency dependency;
@Inject
SomeOtherDependency otherDependency;

@Override
public void init(FilterConfig filterConfig) throws ServletException
{
  ((ObjectGraph) filterConfig.getServletContext().getAttribute(DaggerConstants.DAGGER_OBJECT_GRAPH)).inject(this);
} 
```

我之前定义了`DaggerConstants`自己的地方。

根据您的应用程序，可能有多种方法可以`ObjectGraph`进入. `ServletContext`我们使用嵌入式码头服务器，因此我们在启动期间控制一切。不确定如何在通用容器中执行此操作，但假设您`ObjecGraph`通过一些 init servlet 实例化您的 main，您会在那里执行此操作。

```
servletContext.setAttribute(DaggerConstants.DAGGER_OBJECT_GRAPH, objectGraph); 
```

请注意，我们的应用程序对整个应用程序使用单个 ObjectGraph，这可能不是您的情况。

# c# - 页面上有多个 Ajax.BeginForm

> ID：16152504
> 
> 赞同：0
> 
> 时间：2013-04-22T16:53:02.140
> 
> 标签：c#, ajax, asp.net-mvc-4

我需要实现多个 Ajax 表单。

**html**

```
@using (Ajax.BeginForm("PerformAction", "Home", new AjaxOptions { OnSuccess = "OnSuccess", OnFailure = "OnFailure" }))
{
    <h3>This is a demo form #1.</h3>
    @Html.LabelFor(model => model.FirstName)  
    @Html.TextBoxFor(model => model.FirstName, null, new { @class = "labelItem" })       
    <input type="submit" value="Submit" />     
}
<br />
<br />

@using (Ajax.BeginForm("PerformAction2", "Home", new AjaxOptions { OnSuccess = "OnSuccess2", OnFailure = "OnFailure2" }))
{
    <h3>This is a demo form #2\. </h3>
    @Html.LabelFor(model => model.FirstName)  
    @Html.TextBoxFor(model => model.FirstName, null, new { @class = "labelItem" })          
    <input type="submit" value="Submit" />     
}
<br />
<br />

<script type="text/javascript">

    function OnSuccess(response) {
        alert(response);
    }

    function OnFailure2(response) {
        alert("222 Whoops! That didn't go so well did it?");
    }

    function OnSuccess2(response) {
        alert(response);
    }

    function OnFailure(response) {
        alert("Whoops! That didn't go so well did it?");
    }

</script> 
```

**C＃**

```
 [AcceptVerbs("POST")]
        public ActionResult PerformAction(FormCollection formCollection, Person model)
        {
            model.FirstName += " Form 1";
            return View(model);
        }

        [AcceptVerbs("POST")]
        public ActionResult PerformAction2(FormCollection formCollection, Person model)
        {
            model.FirstName += " Form 2";
            return View(model);
        } 
```

但我面临着 ASP .NET MVC 4 正在寻找某种部分形式的错误。

我不想使用任何部分形式，只需要使用**JavaScript** `OnSuccess`和`OnSuccess2`

猜猜它是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:20:05.617

使用`View()`or `PartialView()`，MVC 它将尝试查找名称等于操作名称的视图。

因此，不要返回`View(model)` Return a`EmptyResult()`或 JSON 对象。

# javascript - 谷歌自定义搜索 JS 语法错误

> ID：16152505
> 
> 赞同：0
> 
> 时间：2013-04-22T16:53:02.677
> 
> 标签：javascript, google-custom-search

我的 Google 自定义搜索一直卡在加载中。我在 Chrome 控制台中得到的 JS 错误是：

```
Uncaught TypeError: Object [object Object] has no method 'enableSearchBoxOnly' 
```

我的代码：

```
 <div class="search">
<div id='cse-search-form' style='width: 100%;'>Loading</div>
</div>
<script src='//www.google.com/jsapi' type='text/javascript'></script>
<script type='text/javascript'>
google.load('search', '1', {language: 'es', style: google.loader.themes.DEFAULT});
google.setOnLoadCallback(function() {
var customSearchOptions = {};
var customSearchControl =   new google.search.CustomSearchControl('003806993800906102968:1a2oqwxzgqk', customSearchOptions);
customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
var options = new google.search.DrawOptions();
options.enableSearchBoxOnly('https://www.globalsign.es/buscar', 'q');
customSearchControl.draw('cse-search-form', options);
}, true);
</script> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:59:28.847

[API 参考](https://developers.google.com/custom-search/docs/js/cselement-reference#csedrawoptions-el)表明大写`enableSearchBoxOnly`错误。尝试

```
options.enableSearchboxOnly('https://www.globalsign.es/buscar', 'q'); 
```

而不是以大写字母 b 开头的“框”。

```
options.enableSearchBoxOnly('https://www.globalsign.es/buscar', 'q');
                    ^ 
```

# jquery - 使用 jQuery ajax 调用 Restful Web 服务

> ID：16152507
> 
> 赞同：1
> 
> 时间：2013-04-22T16:53:07.543
> 
> 标签：jquery, ajax, web-services, rest

我在 Java 的 localhost 上创建了一个 RESTful Web 服务。当我在导航器地址栏中键入以下网址时：

```
http://localhost:8080/GeonotesApp2-war/webresources/route/1 
```

它会给我：

```
{"rid":"1","routeComment":"hhhahahahah","routeDateCreate":"2012-04-03T00:00:00+02:00","routeDistance":"13400.0","routeName":"route1","routeUserId":"1"} 
```

现在我想使用 Ajax 调用来通过这个脚本获取这个 JSON 信息：

```
<html >
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
    $(function(){
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/GeonotesApp2-war/webresources/route/1",
            dataType: 'json',
            headers: {
                Accept: "application/json",
                "Access-Control-Allow-Origin": "*"
            },
            success: function(resp) {
                alert("success");
            },
            error: function(e) {
                alert("error: "+e);
            }
        });
    });

</script>   
</head>
<body>
    Hello Test Service!
</body> 
```

但是我总是收到错误消息：

```
error: [object Object] 
```

我找到了这篇文章并完全按照它的作用，但不起作用。谁能告诉我为什么？谢谢

[使用 JQuery Ajax 调用调用 Rest Web 服务，Web 服务返回 JSON 字符串](https://stackoverflow.com/questions/9481073/calling-rest-webservice-using-jquery-ajax-call-web-service-is-returning-json-s)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:56:43.337

The headers have to be on the service side. So the browser knows that the server allows this website to use Ajax to load the data. So these headers:

```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET 
```

Links:

*   [Set server headers](http://enable-cors.org/server.html)
*   [Client support](http://enable-cors.org/client.html)

# nosql - 如何构建 NoSQL 模式，以便可以根据记录属性查询记录？

> ID：16152510
> 
> 赞同：2
> 
> 时间：2013-04-22T16:53:27.787
> 
> 标签：nosql, redis

正在玩各种 NoSQL 数据库（主要是 redis 和 couchdb），并且遇到了一个问题：

如果我像这样保存用户数据：

`SET user:5 "{name: \"foobar\", age: 26}"`

我总是可以用`GET user:5`. 但是，如果我不知道用户的 id 但*知道*他们的 id`name`并想查询以找出`id`?

我们提出的一些想法涉及`SET usernames:foobar "5"`与另一个同时发送`SET`，但是因为它们不像在 RDBMS 中那样相关，所以草率的代码可能会意外地导致数据不匹配。

是否有处理这样的程序的“标准”方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:45:25.983

您描述的方法几乎是 Redis 中的标准方法。

您实际上是在为用户名创建索引。其他系统会自动为您创建此类索引，并在数据更改时对其进行维护。使用 Redis，您必须自己完成。

是的，草率的代码会导致数据不匹配。这是您每次非规范化或创建索引时支付的成本。你只需要小心它。

# ruby-on-rails - Rails 3.2 重定向跳过创建操作

> ID：16152512
> 
> 赞同：0
> 
> 时间：2013-04-22T16:53:31.507
> 
> 标签：ruby-on-rails, routing

我有一个 Rails 3 博客风格的应用程序，其中有一个用于后端的**管理**命名空间和一个包含相应**posts_controller.rb的****controllers/admin**子文件夹。

 **因此，页面的根 url 设置为“admin/posts#index”，并且帖子创建工作正常，除非我配置路由文件以将用户重定向到 root_url，如果他键入“/admin/articles”。

这是我的路线文件：

```
BlogDos::Application.routes.draw do
  # Index
  root to: "admin/posts#index"

  # If I uncomment these two lines below, the post#create function doesn't work. When I 
  # submit the "new post" form, the controller just skips the function entirelly and  
  # redirects me to admin/posts#index without creating the new post.
  # match "admin/posts" => redirect("/")
  # match "admin/posts/" => redirect("/")

  namespace :admin do
    resources :cpanel
    resources :posts do
      resources :comments, :only => [:create, :destroy]
    end
    root to: "cpanel#index"
  end
..
end 
```

这是我的**posts_controller.rb**

```
def create
    @usuario = current_user
    @post = @usuario .posts.create(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to article_dir_path(@post.year, @post.month, @post.slug), notice: 'Article was successfully created.' }
        format.json { render json: article_dir_path(@post.year, @post.month, @post.slug), status: :created, location: article_dir_path(@post.year, @post.month, @post.slug) }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end 
```

奇怪的是，这只发生在创建操作中，如果我编辑一篇文章并更新它，一切正常。我从 Rails 教程和 QA 网站上整理了几乎所有的东西，除了这个小问题，我确信它是相当简单的，但我是 Rails 的新手，还不太熟悉它的路由机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:10:22.917

创建帖子的表单提交给

```
/admin/posts 
```

如果您将该路由重定向到索引页面，则永远不会调用控制器操作。**

# python-3.x - 如何在 symbain 3rd 版本中打包已经安装的软件？

> ID：16152515
> 
> 赞同：0
> 
> 时间：2013-04-22T16:53:50.257
> 
> 标签：python-3.x, symbian3, s60-3rd-edition

在 Symbian 2nd 版本中，有一个名为 Sisboom 的软件，它可以与 python 一起使用，使用 Sisboom 可以获得已安装软件的安装程序文件，现在我有 Symbian 3rd 版本，并且我得到了相同的软件，而且我是 unbale做同样的事情，请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T07:34:02.943

With Symbian there is something called platform security, and from it there is something called data caging which is preventing access to the executable folders and some other ones as well, thus there are not really possibilities on 3rd party supplying such an application, and therefor I would suppose there would not be application with this kind of functionality available.

# android - 通过 PHP 检测原生/库存 Android 浏览器用户代理字符串

> ID：16152517
> 
> 赞同：1
> 
> 时间：2013-04-22T16:54:05.900
> 
> 标签：android, jquery-mobile, mobile, webkit, css-transitions

我仅在本机/库存 Android 4.1 浏览器上收到**很多**JavaScript 错误*，*我想通过 PHP 检测用户代理字符串。

 **我使用[Mobile_Detect](http://mobiledetect.net/)库来检查操作系统、设备和浏览器，但是它不支持检测原生 Android 浏览器。

关于这个主题有很多关于 SO 的帖子，但似乎没有回答。

我收到很多错误说明：

```
Cannot set property 'webkitTransitionDelay'
Cannot set property 'webkitTransform' 
```

...所以我想为这个浏览器**关闭**jQuery Mobile 页面转换- 但我需要能够首先检测到它。

有没有办法检测它？我必须强调这不是我要检测的操作系统，而是本机浏览器（也称为 Android）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T10:50:04.737

我正在使用以下内容：

```
(preg_match('/^Mozilla\/5\.0.*Android\s[12]\..*\sMobile/i', $_SERVER['HTTP_USER_AGENT']) 
    && !preg_match('/\sChrom/i', $_SERVER['HTTP_USER_AGENT'])) 
```

[在较旧的 Android 平台（1.x 或 2.x）（不支持 SVG](http://caniuse.com/svg) ）上匹配 Android 浏览器。

*   'Chrom' 排除 'Chrome' 和 'Chromium' （后者可能不存在）
*   Firefox 目前不包含 Android 版本，这意味着它与上面的匹配不完全一致。我在下面添加了一个明确的排除项，以防它开始添加 Android 版本号

一些测试字符串：

**旧版安卓浏览器**

```
Mozilla/5.0 (Linux; U; Android 2.3.5; en-gb; SAMSUNG GT-I9100/I9100BUKJ3 Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1 
```

**安卓上的 Chrome**

```
Mozilla/5.0 (Linux; Android 4.1.2; GT-I9100 Build/JZO54K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.59 Mobile Safari/537.36 
```

**安卓上的火狐**

```
Mozilla/5.0 (Android; Mobile; rv:26.0) Gecko/26.0 Firefox/26.0 
```

**Android 上的 Opera Mini**

```
Opera/9.80 (Android; Opera Mini/7.5.33361/34.788; U; en) Presto/2.8.119 Version/11.10 Mozilla/5.0 (Linux; U; Android 2.3.5; en-gb; GT-I9100 Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1 
```

任何版本的 Android 浏览器 + 不包括 Firefox：

```
(preg_match('/^Mozilla\/5\.0.*Android\s\d\..*\sMobile/i', $_SERVER['HTTP_USER_AGENT']) 
    && !preg_match('/\sChrom/i', $_SERVER['HTTP_USER_AGENT'])
    && !preg_match('/\sFirefox/i', $_SERVER['HTTP_USER_AGENT'])) 
```

这仅与使用的测试用户代理一样好，因此请在评论中贡献您自己的！**

# php - PHP 和 MYSQL 日期即将到期

> ID：16152523
> 
> 赞同：1
> 
> 时间：2013-04-22T16:54:22.123
> 
> 标签：php, mysql, date

我想做的是当用户登录时我想通知他们产品即将过期

关于我需要为此使用哪些查询以及如何执行此操作的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:05:53.943

您所要做的就是在您的条件中添加一些“时间数学”：

```
WHERE p.PID = s.PID AND DateExpiry < ADDDATE(NOW(), INTERVAL 3 DAY) AND Custid = $_SESSION['user'] 
```

这将使用从现在开始的 3 天时间而不是当前时间来进行比较。

当然，您可以随时更改间隔，例如使用`INTERVAL 1 DAY`仅添加 1 天。

有效单位可以在[这里](https://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html#function_date-add)找到。

作为替代方案，如果您使用的是不太旧的服务器版本，您可以只编写一个简单的添加：

```
WHERE p.PID = s.PID AND DateExpiry < NOW() + INTERVAL 3 DAY AND Custid = $_SESSION['user'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:13:14.867

**检查这个**

```
SELECT p.ProductName, s.Quantity, s.Price, s.DateExpiry FROM seller s, Product p
WHERE p.PID = s.PID AND Custid = $_SESSION['user'] AND
(DateExpiry BETWEEN curdate() and curdate() + interval 3 day) ORDER BY DateExpiry 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:04:19.053

尝试这个：

```
SELECT p.ProductName, s.Quantity, s.Price, s.DateExpiry FROM seller s, Product p
WHERE p.PID = s.PID AND DateExpiry < DATE_ADD(NOW(), INTERVAL 3 DAY) AND Custid = $_SESSION['user'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T17:08:54.477

您不必稍微更改查询，但您必须对您拥有的数据进行一些计算，现在我不知道您的 dateexpiry 是什么甲酸盐，但它可能看起来像这样。

**代码：**

```
$now = new DateTime('now');
$dateToCompare = new DateTime('2013-04-11');//here is where you put your dateexpire variable

$difference = $now->format('U') - $dateToCompare->format('U');
// or if your date to compare is in the future :
// $difference = $dateToCompare->format('U') - $now->format('U');
$time_diff = gmdate('d',$difference);

echo $time_diff;
if($time_diff == 3):
echo "there is 3 days left";
elseif($time_diff < 3):
echo "less then 3 day there will be 10% reduction";
endif; 
```

**代码取自：** [获取两个日期之间的时间差](https://stackoverflow.com/questions/16053799/get-a-time-difference-between-two-dates)

# vb.net - 如何使用 Visual Basic 代码运行命令提示符命令？

> ID：16152531
> 
> 赞同：4
> 
> 时间：2013-04-22T16:54:49.427
> 
> 标签：vb.net, visual-studio-2010, command-line

我正在尝试在 Visual Basic，更具体地说是 Visual Studio 2010 中编写一些代码。我希望通过单击按钮，我的程序来执行命令。那可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T06:11:01.650

这是一个例子：

```
Process.Start("CMD", "/C Pause")

/C  Carries out the command specified by string and then terminates
/K  Carries out the command specified by string but remains 
```

这是一个扩展功能：（注意使用 CMD 命令的注释行。）

```
#Region " Run Process Function "

' [ Run Process Function ]
'
' // By Elektro H@cker
'
' Examples :
'
' MsgBox(Run_Process("Process.exe")) 
' MsgBox(Run_Process("Process.exe", "Arguments"))
' MsgBox(Run_Process("CMD.exe", "/C Dir /B", True))
' MsgBox(Run_Process("CMD.exe", "/C @Echo OFF & For /L %X in (0,1,50000) Do (Echo %X)", False, False))
' MsgBox(Run_Process("CMD.exe", "/C Dir /B /S %SYSTEMDRIVE%\*", , False, 500))
' If Run_Process("CMD.exe", "/C Dir /B", True).Contains("File.txt") Then MsgBox("File found")

Private Function Run_Process(ByVal Process_Name As String, _
                             Optional Process_Arguments As String = Nothing, _
                             Optional Read_Output As Boolean = False, _
                             Optional Process_Hide As Boolean = False, _
                             Optional Process_TimeOut As Integer = 999999999)

    ' Returns True if "Read_Output" argument is False and Process was finished OK
    ' Returns False if ExitCode is not "0"
    ' Returns Nothing if process can't be found or can't be started
    ' Returns "ErrorOutput" or "StandardOutput" (In that priority) if Read_Output argument is set to True.

    Try

        Dim My_Process As New Process()
        Dim My_Process_Info As New ProcessStartInfo()

        My_Process_Info.FileName = Process_Name ' Process filename
        My_Process_Info.Arguments = Process_Arguments ' Process arguments
        My_Process_Info.CreateNoWindow = Process_Hide ' Show or hide the process Window
        My_Process_Info.UseShellExecute = False ' Don't use system shell to execute the process
        My_Process_Info.RedirectStandardOutput = Read_Output '  Redirect (1) Output
        My_Process_Info.RedirectStandardError = Read_Output ' Redirect non (1) Output
        My_Process.EnableRaisingEvents = True ' Raise events
        My_Process.StartInfo = My_Process_Info
        My_Process.Start() ' Run the process NOW

        My_Process.WaitForExit(Process_TimeOut) ' Wait X ms to kill the process (Default value is 999999999 ms which is 277 Hours)

        Dim ERRORLEVEL = My_Process.ExitCode ' Stores the ExitCode of the process
        If Not ERRORLEVEL = 0 Then Return False ' Returns the Exitcode if is not 0

        If Read_Output = True Then
            Dim Process_ErrorOutput As String = My_Process.StandardOutput.ReadToEnd() ' Stores the Error Output (If any)
            Dim Process_StandardOutput As String = My_Process.StandardOutput.ReadToEnd() ' Stores the Standard Output (If any)
            ' Return output by priority
            If Process_ErrorOutput IsNot Nothing Then Return Process_ErrorOutput ' Returns the ErrorOutput (if any)
            If Process_StandardOutput IsNot Nothing Then Return Process_StandardOutput ' Returns the StandardOutput (if any)
        End If

    Catch ex As Exception
        'MsgBox(ex.Message)
        Return Nothing ' Returns nothing if the process can't be found or started.
    End Try

    Return True ' Returns True if Read_Output argument is set to False and the process finished without errors.

End Function

#End Region 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T16:56:20.297

是的。您可以使用它[`Process.Start`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)来启动可执行文件，包括控制台应用程序。

如果您需要从应用程序读取输出，您可能需要从它的[StandardOutput](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)流中读取，以便从您启动的应用程序中打印任何内容。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-27T09:26:40.367

或者，你可以用非常简单的方法来做到这一点。

```
Dim OpenCMD 
OpenCMD = CreateObject("wscript.shell")
OpenCMD.run("Command Goes Here") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T17:16:50.247

您需要使用 CreateProcess [ [http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx) ]

例如：

LPTSTR szCmdline[] = _tcsdup(TEXT("\"C:\Program Files\MyApp\" -L -S")); CreateProcess(NULL, szCmdline, / *...* /);

# mysql - MySQL: If I use a function in SQL query more than one time will it get re-calculated every time?

> ID：16152533
> 
> 赞同：2
> 
> 时间：2013-04-22T16:54:52.857
> 
> 标签：mysql, function

in MySQL, given the following query:

```
select column1
, column2
, my_function1(column3) as f1
, my_function2(column4) as f2
, my_function3 (my_function1(column3), my_function2(column4)) as f3
where some condition on column 1 
having f1 > some value 
```

does my_function1(column3) will be called 3 times? Or there's some optimization/cache that re-use the calculated value?

thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:18:58.980

The function will be called for each calculation separately. you can reuse it as many times a shout want within a single query.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:24:14.833

Your function will be called 3 times unless declared as deterministic, but this depends of your MySQL version and i'm not pretty sure the function will be called once, if you want more info, read here: [http://dev.mysql.com/doc/refman/5.6/en/create-procedure.html](http://dev.mysql.com/doc/refman/5.6/en/create-procedure.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:32:21.887

Here's a short experiment to see what happens.

```
create function determin_rand (i integer) 
returns float DETERMINISTIC
return rand();

create function not_determin_rand (i integer) 
returns float 
return rand();

select determin_rand(1) as d1 , determin_rand(1) as d2, 
  not_determin_rand(1) as nd1, not_determin_rand(1) as nd2

0.00850549154   0.831901073456  0.133989050984  0.174242004752 
```

Since the values are different, the function is getting called each time. In the first function I declared it deterministic, but it didn't make a difference.

I made a sqlfiddle for you to try it out with different versions of mysql.

[http://sqlfiddle.com/#!2/a8536/2](http://sqlfiddle.com/#!2/a8536/2)

# c# - 使用 Regex Look-Behinds 仅返回第一个匹配项

> ID：16152535
> 
> 赞同：0
> 
> 时间：2013-04-22T16:55:06.673
> 
> 标签：c#, xml, regex, lookbehind, non-greedy

给定以下 XML 文档：

```
<root>
    <myGoodSection 
          some="attr" 
          another="attr" 
      />
    <myBadSection yet="anotherattr" />
</root> 
```

如何`/>`使用正则表达式返回第一个？到目前为止，我已经能够使用以下表达式非常接近：

```
(?ims)(?<=<myGoodSection.*?)/> 
```

但是，这将匹配`/>`第一次出现`<myGoodSection`. 我还尝试将它与消极的后视相结合，以使表达式不贪婪，但它似乎没有任何效果：

```
(?ims)(?<=<myGoodSection.*?)(?<!/>)/> 
```

**编辑：**

我正在使用基于 C# 构建的工具来处理正则表达式替换。如果我直接使用，我无法控制我可以使用或不使用多少匹配`System.Text.RegularExpressions`项。我在这里引用 C# 来阐明我使用的引擎支持的功能。

是的，我知道作为一般做法，我不应该使用 RegEx 来解析 XML。让我们规定，鉴于我目前的范围、要求和约束，这是一个完全可以接受的解决方案（假设实际上有一种方法可以实现它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:21:34.937

我能够通过替换来完成此操作`.`，`\b[^>]`以便我的最终表达式变为：

```
(?ims)(?<=<myGoodSection\b[^>]*?)/> 
```

`/>`只要前缀不包含任何地方，那只会匹配结束`>`，然后将排除第一个匹配之后的所有标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:02:43.750

首先，您不应该使用 Regex 来解析 XML。

有了那个助手，您可以让它只使用[Regex.Match()](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)返回第一个匹配项。

此外，如果您的正则表达式只是返回太多，您可以使用非贪婪选择，如下所示：

```
(?ims)(?<=<myGoodSection.*?)/> 
```

*注意. `?`_`*`*

# c++ - 长双增量运算符不适用于大数

> ID：16152536
> 
> 赞同：2
> 
> 时间：2013-04-22T16:55:09.390
> 
> 标签：c++, linux, gcc, double, long-integer

我正在将 C++ 系统从 solaris（SUN box 和 solaris 编译器）转换为 linux（intel box 和 gcc 编译器）。在处理大的“long double”值时，我遇到了几个问题。（由于一些非常非常大的整数，我们使用“long double”......不是任何小数精度）。它以几种奇怪的方式表现出来，但我已将其简化为以下程序。它试图增加一个数字，但没有。我没有得到任何编译或运行时错误......它只是没有增加数字。

我还随机尝试了一些不同的编译器开关（-malign-double 和 -m128bit-long-double 以及这些开关的各种组合打开和关闭），但没有区别。

我也在 gdb 中运行过它，gdb 的“打印”命令显示与 cout 语句相同的值。

有人见过这种行为吗？

谢谢

### 编译命令

```
$ /usr/bin/c++ --version
c++ (GCC) 4.4.6 20120305 (Red Hat 4.4.6-4)

$ /usr/bin/c++ -g -Wall -fPIC   -c SimpleLongDoubleTest.C   -o SimpleLongDoubleTest.o

$ /usr/bin/c++ -g SimpleLongDoubleTest.o   -o SimpleLongDoubleTest

$ ./SimpleLongDoubleTest
Maximum value for long double: 1.18973e+4932
digits 10 = 18
ld = 1268035319515045691392
ld = 1268035319515045691392
ld = 1268035319515045691392
ld = 1268035319515045691392
ld = 1268035319515045691392 
```

### SimpleLongDoubleTest.C

```
#include <stdlib.h>
#include <stdio.h>
#include <iostream>
#include <limits>
#include <iomanip>

int main( int argc, char* argv[] )
{
    std::cout << "Maximum value for long double: " 
              << std::numeric_limits<long double>::max() << '\n';

    std::cout << "digits 10 = " << std::numeric_limits<long double>::digits10 
              << std::endl;

    // this doesn't work  (there might be smaller numbers that also doen't work...
    // That is, I'm not sure the exact number between this and the number defined
    // below where things break)
      long double ld = 1268035319515045691392.0L ;

    // but this or any smaller number works (there might be larger numbers that
    // work... That is, I'm not sure the exact number between this and the number
    // defined above where things break)
    //long double ld =  268035319515045691392.0L ;

    for ( int i = 0 ; i < 5 ; i++ )
    {
        ld++ ;

        std::cout << std::setiosflags( std::ios::fixed ) 
                  << std::setprecision( 0 ) 
                  << "ld = "  <<    ld
                  << std::endl ;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:59:58.777

这是预期的行为。浮点数、双精度、长双精度等在内部以 (2^exp-bias)*1 + xxxxx 的形式表示，其中 xxxxx 是 N 位二进制数，其中 N=23 表示浮点数，52 表示双精度，可能 64 表示长双打。当数字增长大于 2^N 时，不再可能向该变量添加“1”——只能添加 2^(nN) 的倍数。

您的架构也可能将 long double 等同于 double。（即使 x86 可以在内部使用 80 位双精度数）。

另请参阅[Wikipedia 文章](http://en.wikipedia.org/wiki/Long_double)- 128 位双精度是一个例外而不是常态。（sparc 支持它）。

# java - Hibernate @Version 导致数据库外键约束失败

> ID：16152539
> 
> 赞同：0
> 
> 时间：2013-04-22T16:55:25.157
> 
> 标签：java, mysql, hibernate, optimistic-locking

我有两个休眠/JPA 实体

```
@Entity
@Table(name = "conference_room", uniqueConstraints = @UniqueConstraint(columnNames = "code"))
class ConferenceRoom {
    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "id", unique = true, nullable = false)
    private Integer     id;
    @Column(name = "code", unique = true, length = 20)
    private String      code;

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "conferenceRoom")
    @Cascade({CascadeType.ALL})
    private Set<Person> people       = new HashSet<Person>();
    // Appropriate getters and setters
}

@Entity
@Table(name = "person")
class Person {
    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "id", unique = true, nullable = false)
    private Integer     id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "conference_room_code", referencedColumnName = "code")
    private ConferenceRoom  conferenceRoom ;
    // Appropriate getters and setters
} 
```

此外，在我的数据库模式中，我在 person.conference_room_code 上有外键约束，它引用了 conference_room.code 列。

`@Transactional`如果我按照弹簧方法使用

```
public ConferenceRoom getNewConferenceRoom(Person p) {
    ConferenceRoom r = new ConferenceRoom();
    r.setCode("MyUniqueGeneratedCode");
    r.getPeople().add(p);
    // sessionFactory is spring injected member
    sessionFactory.getCurrentSession().merge(r); 
} 
```

一切都已正确保存，人员行已正确更新并添加了新的会议室行。

但后来我尝试在 Date 字段上添加对乐观锁定数据库更新的支持 Person 类，所以新的 Person 类

```
@Entity
@Table(name = "person")
class Person {
    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "id", unique = true, nullable = false)
    private Integer         id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "conference_room_code", referencedColumnName = "code")
    private ConferenceRoom  conferenceRoom ;

    @Version
    @Column(name = "updated", length = 19)
    private Date            updated;
    // Appropriate getters and setters
} 
```

MYSQL 时间戳列中的这个新的“更新”列，插入和更新时默认值为 current_timestamp。

现在，如果执行上述方法，我会得到

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException:
Cannot add or update a child row: a foreign key constraint fails (`schema`.`person`, CONSTRAINT `fk_room_code` FOREIGN KEY (`conference_room_code`) REFERENCES `conference_room` (`code`) ON DELETE NO ACTION ON UPDATE NO ACTION)
 .... 
```

我尝试在 中添加一个`@Version`字段`ConferenceRoom`，但这没有用。

我不明白为什么添加 @Version 会搞砸。如果我删除外键约束或新添加的 @Version 字段，代码将再次开始工作，没有任何异常。

我不想放弃外键约束。有没有其他方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:42:14.823

**首先**：

> 此外，在我的数据库模式中，我在 person.conference_room_code 上有外键约束，它引用了 conference_room.code 列。

您的 FK 应该引用被引用实体的 PK。在本例中，您应该有`person.conference_room_id`哪些引用`conferenceroom.id`。如果您希望您`code`成为`ConferenceRoom`实体的标识字段，请不要使用代理键。如果该`code`列不是 PK 候选，那么它也不是 FK 候选。

**第二**：

[合并](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Session.html#merge%28java.lang.Object%29)：

> 将给定对象的状态复制到具有相同标识符的持久对象上。如果当前没有与会话关联的持久实例，它将被加载。返回持久实例。如果给定实例未保存，则保存副本并将其作为新的持久实例返回。给定的实例不会与会话关联。如果关联使用 cascade="merge" 映射，则此操作级联到关联实例

[坚持](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Session.html#persist%28java.lang.String,%20java.lang.Object%29)：

> 使瞬态实例持久化。如果关联映射为 cascade="persist"，则此操作级联到关联实例

* * *

我想你已经混淆`merge`了`persist`。从我提供的代码可以看出，您正在创建一个新的`ConferenceRoom`而不是修改现有的。因此，`merge`不会做你想让它做的事情。尝试将您的（提供的）方法更改为以下内容：

```
public ConferenceRoom getNewConferenceRoom(Person p) {
    ConferenceRoom r = new ConferenceRoom();
    r.setCode("MyUniqueGeneratedCode");
    r.getPeople().add(p);
    // sessionFactory is spring injected member
    sessionFactory.getCurrentSession().persist(r); 
} 
```

这些东西应该可以解决您提出的问题。

# sql-server-2008 - SSMS和SqlCommand之间的Sql查询执行时间差异

> ID：16152543
> 
> 赞同：1
> 
> 时间：2013-04-22T16:55:37.410
> 
> 标签：sql-server-2008, .net-3.5, sqlcommand

我正在 SQL Server Management Studio (2008) 中执行一个 SQL 查询，并`SqlCommand`在 C# 中使用 (.net 3.5) 执行相同的查询。

在 Management Studio 中，查询将在**1.6 分钟**内完成。在 C# 中使用相同的查询需要**9 分钟。**`SqlCommand`

为什么 SQL Server Management Studio & 之间存在巨大差异`SqlCommand`？

请有人帮我找到解决时差问题的解决方案。

提前致谢。

查询：

```
SELECT * INTO [target_table]
FROM [source_table] WHERE Group_ID IN (1,2,3,4,5,6,7,8,9,10) 
```

这会将大约 100 万行复制到 target_table 中，并且表包含 220 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:24:53.993

由于您要问是什么导致了两种环境之间的差异，我将尝试回答这个问题，而不是如何更快地复制 1,000,000 条记录的更大问题。

这个[问题和答案](https://stackoverflow.com/questions/801909/why-is-some-sql-query-much-slower-when-used-with-sqlcommand?rq=1)提供了一个很好的指南来解决您的问题。如果您使用完全相同的命令或存储过程调用并且始终得到这种结果差异，则最可能的罪魁祸首是不同的 SET 选项。

尝试使用分析器查看在 SSMS 中执行插入时设置了哪些 SET 选项。对您的 C# 例程执行相同的操作。比较它们，看看 SSMS 设置与 ADO.NET 的不同之处。

# knockout.js - 不能设置集合导航属性

> ID：16152545
> 
> 赞同：3
> 
> 时间：2013-04-22T16:55:53.363
> 
> 标签：knockout.js, breeze, single-page-application

我一直在构建我的第一个 SPA 应用程序，从 John Papa 的 Jumpstart 的伟大工作中跳出来。

我遇到的问题是，当我尝试通过微风执行扩展或简单地选择所有字段时，在我的子集合映射期间，微风出现了问题。newValue.entityAspect 未定义

如果我通过 select 子句通过我的 api 查询，一切都很好，如果我直接调用表，直接“位置”，我会在 chartVal 对象上得到导航错误。 ![在此处输入图像描述](https://i.stack.imgur.com/dHyLL.png) ![在此处输入图像描述](https://i.stack.imgur.com/XviFs.png)

```
var query = EntityQuery.from('Positions')
           //.select('id, endDate, gauge, hoursPerWeek, memberId, title, summary, startDate, totalHours, weightedHours, company, compensation')
             .where('memberId', '==', id)
             .expand('Company, ChartVals')
             .orderBy(orderBy.positions);

            return manager.executeQuery(query)
                .then(querySucceeded)
                .fail(queryFailed);

            function querySucceeded(data) {
                var list = partialMapper.mapDtosToEntities(manager, data.results, entityNames.position, 'id');
                if (observables) {
                    observables(list);
                } 
```

上面的查询会成功，然后调用 MapDtosToEntities（由 John Papa 提供）

函数 mapDtosToEntities(manager, dtos, entityName, keyName, extendWith) { return dtos.map(dtoToEntityMapper);

```
 function dtoToEntityMapper(dto) {
            var keyValue = dto[keyName];
            var entity = manager.getEntityByKey(entityName, keyValue);
            if (!entity) {
                // We don't have it, so create it as a partial
                extendWith = $.extend({ }, extendWith || defaultExtension);
                extendWith[keyName] = keyValue;
                entity = manager.createEntity(entityName, extendWith);
            }
            mapToEntity(entity, dto);
            entity.entityAspect.setUnchanged();
            return entity;
        }

        function mapToEntity(entity, dto) {
            // entity is an object with observables
            // dto is from json
            for (var prop in dto) {
                if (dto.hasOwnProperty(prop) && prop !="entityAspect") {
                    entity[prop](dto[prop]); <-- tanks here on children
                }
            }
            return entity;
        }
    }

/// <summary>
/// TODO: Update summary.
/// </summary>
public class Position : PersistableObject
{
    public int CompanyId { get; set; }

    /// <summary>
    /// Weighted hours based on Half-Life.
    /// </summary>
    public int CreditMinutes { get; set; }

    public int? CompensationId { get; set; }

    public DateTime? EndDate { get; set; }
    /// <summary>
    /// Code to hold measure of completeness. 10 = complete 0 = not complete.  
    /// </summary>
    public int Gauge { get; set; }

    public int? HoursPerWeek { get; set; }

    public bool IsCurrent { get; set; }

    [StringLength(40)]
    public string LinkedInId { get; set; }

    [Required]
    public int MemberId { get; set; }

    [StringLength(40)]
    public string Title { get; set; }

    [StringLength(400)]
    public string WeightedWords { get; set; }

    /// <summary>
    /// Adjusted Experience score Based on half life
    /// </summary>
    public int Score { get; set; }

    [Required]
    [StringLength(2000)]
    public string Summary { get; set; }

    public DateTime StartDate { get; set; }

    public decimal? SalaryEnd { get; set; }

    /// <summary>
    /// Hourly salary - let users enter hourly, monthly, annual etc
    /// </summary>
    public decimal? SalaryStart { get; set; }

    public decimal TotalHours { get; set; }

    /// <summary>
    /// Total Man-hours Multiplied by Gauge reading
    /// </summary>
    public decimal WeightedHours { get; set; }

    public int VisibilityId { get; set; }

    public Company Company { get; set; }

    public Member Member { get; set; }

    public virtual Compensation Compensation { get; set; }

    public virtual ICollection<Project> Projects { get; set; }

    public virtual ICollection<Tag> Tags { get; set; } 

    public virtual ICollection<ChartVal> ChartVals { get; set; } 

}

public class ChartVal : PersistableObject
{
    [Required]
    [StringLength(40)]
    public string Key { get; set; }

    public double Value { get; set; }

    public string Percentage { get; set; }

    public int PositionId { get; set; }

    public virtual Position Position { get; set; }
} 
```

感谢您花点时间查看我的问题。我很感激你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T01:20:33.590

我有一个类似的问题，一个具有“imageUser”导航属性的部分用户实体。

我刚刚将 John Papa 的 mapDtosToEntities“mapToEntity”函数更改为此，它似乎正在工作 - 我对这一切都是新手，所以我不能保证与保存更改相关的导航属性的完整性，但它肯定将关联映射为我创建了一个“imageUrl”计算属性，它检索第一个关联并将其显示在图像元素中（即眼见为实）：

```
 function mapToEntity(entity, dto) {
            // entity is an object with observables
            // dto is from json
            for (var prop in dto) {
                if (dto.hasOwnProperty(prop)) {
                    if (typeof(dto[prop]) != "object") {
                        entity[prop](dto[prop]);
                    } else {
                        entity[prop] = ko.observable(dto[prop]);
                    }
                }
            }

            return entity;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:30:04.320

我也看到了这一点。我相信解决方案将涉及检测属性是否为集合并对其进行迭代以逐个添加项目。我没有尝试这样做，因为我仍在尝试确定这是否是*正确*的做法

我并不打算将其作为本身的答案，而是表明其他人遵循了与海报相同的轨道，并且会对社区对此的任何回应感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T20:45:53.073

最后，我最终放弃了 John Papa mapDtosToEntities 映射器方法，只是循环了我的收藏......

```
function querySucceeded(data) {
                var list = [];
                for(i = 0; i< data.results.length; i++)
                {
                    list.push(data.results[i]);
                }
                observables(list);
            } 
```

# simulink - 在 Simulink 中初始化 Dymola FMU

> ID：16152546
> 
> 赞同：0
> 
> 时间：2013-04-22T16:55:58.440
> 
> 标签：simulink, dymola, fmi

我在尝试使用 Simulink 中的 fmu 文件模拟模型时遇到了一个问题：

我正在使用 Dymola/Simulink 接口的 Modelon FMI 工具箱将 Model-Exchange 类型的 fmu 文件（1.0 版）导入 Simulink 模型。我有一个 Matlab m 文件，它以编程方式依次模拟模型，保存模型的最终内部状态以在下一次模拟中进行初始化。模拟的第一次迭代运行没有错误，但在第二次迭代中，Matlab 在调用模拟时返回以下错误：

> 模块 = partial_run_sim2/BasicModels.System_model_final_Sim，日志级别 = 错误：[][FMU 状态：错误] fmiInitialize：dsblock_ 失败，QiErr = 1
> 模块 = partial_run_sim2/BasicModels.System_model_final_Sim，日志级别 = 错误：[][FMU 状态：错误]可能的错误（非详尽）： 1\. 未找到许可证文件。使用环境变量“DYMOLA_RUNTIME_LICENSE”来指定您的 Dymola 许可证文件。2\. 模型引用了目标机器上不存在的外部数据，至少不在同一位置。'partial_run_sim2/BasicModels.System_model_final_Sim' 中的 S-function 'sfun_fmu_me_1_0' 报告的错误：fmiInitialize 在 initialize_fmu_model_first_time 返回错误。有关 FMU 模型打印的更多信息，请参阅命令窗口。

我知道我的 Dymola 和 FMI 工具箱许可证是最新的。

m文件中的模拟调用是：

```
simOut_itr = sim(model, model_cs); 
```

其中“model”是 Simulink .slx 模型文件，“model_cs”是 Simulink 配置设置变量。我已经设置了配置，以便模型从工作区加载初始状态，并且我已经将之前的迭代最终状态保存到该工作区变量。此操作也发生在第一次迭代中，尽管初始状态与 fmu 文件中的默认初始状态相同。我怀疑第一次迭代运行没有问题，因为初始化与默认值相同，但随后的迭代具有不同的初始化值，这与 fmu 块不一致。

我知道使用 fmi 函数在 Matlab 中模拟 fmu 文件的能力，但是这些方法不允许对系统状态进行尽可能多的透明度，这阻碍了顺序模拟。但是，我对任何允许这种模拟的方法持开放态度。

非常感谢有关在 Matlab/Simulink 中的 fmu 文件中初始化系统状态的任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:57:08.440

我想我以前遇到过这个错误，但没有使用 FMI Toolbox。

我在 for 循环中多次初始化 Dymola 生成的 FMU 时遇到问题，这与您上面描述的非常相似，其中一个初始化的输出作为下一个初始化的输入。

给一些随机的（但相当好的值）并初始化模型一次，使初始化与默认值不同。

如果这可行，那么很可能问题出在多重初始化中。也许，您可以在每次初始化结束时卸载模型，然后在每次循环开始时再次加载它？

如果没有任何效果，也许您可​​以使用 JModelica.org（来自 Modelon 的开源平台）将这些初始化的输出获取到 mat 文件中，然后在 MATLAB 中使用它进行后续工作。我知道这并不理想，但可能会在您在这里等待一些答案时为您节省一些时间。

# sass - Mixin、函数和变量名称的 Sass 插值

> ID：16152547
> 
> 赞同：7
> 
> 时间：2013-04-22T16:55:59.543
> 
> 标签：sass

我正在尝试遍历 Sass 中的值列表，并使用当前键的插值来动态输出分别使用 @include 和 @extend 的类名。

这是一个显示问题的笔，简化了。[http://codepen.io/ghepting/pen/vBmLy](http://codepen.io/ghepting/pen/vBmLy)

正如您在标记中看到的那样，我尝试在插值字符串的内部和外部包含“_”。我是否缺少解决 Sass 支持插值的限制的问题？

（注：OP的笔已经消失。这不是笔中找到的原始代码，而是问题的粗略近似）

```
$error-light: red;
$error-dark: darken(red, 10%);

$success-light: green;
$success-dark: darken(green, 10%);

$dialogs: error, success;

@each $d in $dialogs {
  .#{$d} {
    background: $#{$d}-light;
  }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T17:47:05.297

目前，插值不适用于 mixins 或变量。你必须想出一种不同的方法来实现你的目标。

从 Sass 3.3 开始，您可以为此目的对变量使用映射：

```
$dialogs:
    ( error:
        ( light: red
        , dark: darken(red, 10%)
        )
    , success:
        ( light: green
        , dark: darken(green, 10%)
        )
    );

@each $name, $colors in $dialogs {
  .#{$name} {
      color: map-get($colors, dark);
  }
} 
```

对于功能：

```
@function green() {
  @return lighten(green, 10%);
}

@function red() {
  @return lighten(red, 10%);
}

@mixin my-bg($function-name) {
  background: call($function-name);
}

.foo {
  @include my-bg('red');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-04T01:37:21.443

遇到了试图在 mixin 中包含插值变量的问题，并且能够使用占位符解决它：

```
%color-scheme-dark-bg-1 { background-color: #4e5163; }
%color-scheme-dark-color-1 { color: #4e5163 !important; }
%color-scheme-light-bg-1 { background-color: #c7c8ce; }

%color-scheme-dark-bg-2 { background-color: #fd6839; }
%color-scheme-dark-color-2 { color: #fd6839 !important; }
%color-scheme-light-bg-2 { background-color: #fecfc1; }

.card_color {
    @mixin CardColorScheme($arg: 1) {
      .borderPercent {
        @extend %color-scheme-dark-bg-#{$arg};
      }
      .border {
        @extend %color-scheme-light-bg-#{$arg};
      }
      ul li:before {
        @extend %color-scheme-dark-color-#{$arg};
      }
      .percent {
        @extend %color-scheme-dark-color-#{$arg};
      }
      .heading {
        @extend %color-scheme-dark-color-#{$arg};
      }
    }
    &--scheme {
      &-1 {
        @include CardColorScheme(1);
      }
      &-2 {
        @include CardColorScheme(2);
      }
    }
  } 
```

提示：[https ://krasimrtsonev.com/blog/article/SASS-interpolation-in-a-name-of-variable-nest-variables-within-variables](https://krasimirtsonev.com/blog/article/SASS-interpolation-in-a-name-of-variable-nest-variables-within-variables)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-17T16:16:28.563

替代解决方法（针对特定用例）：

[https://sass-lang.com/documentation/at-rules/mixin#passing-arbitrary-arguments](https://sass-lang.com/documentation/at-rules/mixin#passing-arbitrary-arguments)

> 有趣的事实：因为参数列表同时跟踪位置参数和关键字参数，所以您可以使用它同时将两者传递给另一个 mixin。这使得为​​ mixin 定义别名变得非常容易！

如果您对 mixin 插值感兴趣，因为您有一组 mixin，如下所示：

```
//_mixins.scss
@mixin text-style-1($args...){ //sass here }
@mixin text-style-2($args...){ //sass here }
@mixin text-style-3($args...){ //sass here } 
```

```
//_text.scss
.text-style-1 { 
  @include text-style-1; 
}
.text-style-1-contrast { 
  @include text-style-1($contrast: true); 
}

.text-style-2 { 
  @include text-style-2; 
}
.text-style-2-contrast { 
  @include text-style-2($contrast: true); 
} 
```

我们可以利用传递任意参数并为组使用别名：

```
//_mixins.scss
@mixin text-style-1($args...){ //sass here }
@mixin text-style-2($args...){ //sass here }
@mixin text-style-3($args...){ //sass here }

@mixin text($mixin, $args...) {
  @if $mixin == 'style-1' { @include text-style-1($args...); }
  @else if $mixin == 'style-2' { @include text-style-2($args...); }
  @else if $mixin == 'style-3' { @include text-style-3($args...); }
} 
```

```
//_text.scss
$text-styles: 'style-1', 'style-2', 'style-3';

@each $style in $text-styles {
  .text-#{$style} { 
    @include text($style); 
  }
  .text-#{$style}-contrast { 
    @include text($style, $contrast: true); 
  }
} 
```

# android - Android 发送 GET 而不是 POST

> ID：16152552
> 
> 赞同：-2
> 
> 时间：2013-04-22T16:56:17.177
> 
> 标签：android, post, get

我的 android 应用程序有一个后端，它在 GET 上返回 404，在 POST 上返回 json。现在，我正在尝试使用[此代码段](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)执行 POST 请求：

```
public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/api/login");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("email", "email@email.com"));
    nameValuePairs.add(new BasicNameValuePair("password", "qwerty"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}
} 
```

然而，服务器收到 GET 请求。使用 curl POST 后端按预期返回 json。但不知何故 httpPost 发送 GET(!) 请求。可能是什么问题呢？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:05:40.927

好的，伙计们，很快就回答了我自己的问题，可能对其他人有帮助。

**我用IP地址替换了主机名，它起作用了！**

# mongodb - MongoDB：使用过滤值按数组大小查询

> ID：16152557
> 
> 赞同：0
> 
> 时间：2013-04-22T16:56:28.200
> 
> 标签：mongodb

在 MongoDB 中，我有一个具有以下基本模式的集合（“用户”）：

```
{
    "_id" : ObjectId("50e5de00b623143995c5b739")
    "name" : "Jon",
    "emails_sent" : [ 
        {
            "type" : "invite",
            "sent_time" : ISODate("2013-04-21T21:11:50.999Z")
        },
        {
            "type" : "invite",
            "sent_time" : ISODate("2013-04-15T21:10:35.999Z")
        },
        {
            "type" : "follow",
            "sent_time" : ISODate("2013-04-21T21:11:50.999Z")
        }
    ]
} 
```

我想仅根据特定“类型”的**emails_sent**的 $size 来查询用户，例如只计算“邀请”电子邮件。有没有办法在标准的 mongo 查询中实现这种“过滤计数”？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:05:10.190

```
db.users.aggregate([
 {$unwind:'$emails_sent'},
 {$match: {'$emails_sent.type':'invite'}},
 {$group : {_id : '$name', sumOfEmailsSent:{$sum:1} }}
]); 
```

顺便说一句，您缺少一个关闭 $emails_sent 数组的方括号。

# java - Contravariantly converting Guava Predicates

> ID：16152562
> 
> 赞同：4
> 
> 时间：2013-04-22T16:57:04.583
> 
> 标签：java, generics, guava, contravariance

I have a `Predicate<Object>` and need an equivalent `Predicate<Animal>`.

```
Predicate<Animal> provideIsSentientPredicate() {
    // Won't compile -- cannot convert from Predicate<Object> to Predicate<Animal>
    return Predicates.instanceOf(Human.class);
} 
```

Predicates are contravariant, so converting a `Predicate<Object>` to a `Predicate<Animal>` is safe. Is there clean and readable way to convert from a `Predicate<Object>` to a `Predicate<Animal>` (e.g. without suppressing warnings)?

I'd prefer not to change my method's type signature to return a `Predicate<? super Animal>` or `Predicate<Object>` unless someone convinces me that is the correct thing to do.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:05:06.667

```
Predicate<Animal> provideIsSentientPredicate() 
{
    return cast( Predicates.instanceOf(Human.class) );
}

static <A, B extends A> Predicate<B> cast(Predicate<A> pa)
{
    @SuppressWarnings("unchecked")
    Predicate<B> pb = (Predicate)(pa);
    return pb;

    // we know it works correctly in practice.
    // or if you are a theorist, create a wrapper predicate
    //
    //     Predicate<B>
    //         boolean apply(B b)
    //             return pa.apply(b);
} 
```

顺便说一句，Guava 没有理由不将该方法声明为

```
static <T> Predicate<T> instanceOf(Class<?> clazz) 
```

与其他兄弟方法一致。

# css - Original image width kept by container in IE8 when scaling down a child image using css

> ID：16152563
> 
> 赞同：3
> 
> 时间：2013-04-22T16:57:05.383
> 
> 标签：css, image, internet-explorer-8, scaling

Rather an odd problem which I can only guess is a browser quirk, but my reason for posting this question is to see if anyone knows of any workaround out of the numerous possibilities that CSS offers.

[http://jsfiddle.net/3qbB8/](http://jsfiddle.net/3qbB8/)

So here is the basic markup that will trigger the issue:

```
<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style>
 div       { display: block; border: 1px solid blue; float: left; }
 div a     { display: block; border: 1px solid red; }
 div a img { display: block; border: 0; height: 64px; width: auto; }
</style>
</head>
<body>
 <div>
  <a href="#">
   <img src="https://www.google.com/images/errors/robot.png" />
  </a>
 </div>
</body>
</html> 
```

*(the bordering and padding is just for display purposes and has no effect on the outcome)*

Out of all the modern browsers I've tested, across three distinct operating systems — I even tested IE7 — the only browser that has a problem is IE8\. The problem is quickly illustrated with the following image:

![IE8 rendering weirdly](https://i.stack.imgur.com/zVEdH.png)

The top image is the original image just to show what it's dimensions are, the bottom left is how the above markup correctly renders — with it's container snapping to meet the scaled image. The bottom right image is IE8's version of events, which as you can see, even though the image has scaled, the parent has kept the image's natural width.

Whilst I would love to ignore IE8 as an annoying blip, I have to at least try everything before I give up on it. I have gone through a range of different styles in an attempt to fix things, even fallen back to just throwing random styles that fix other IE issues — i.e. `zoom:1` and `overflow:hidden` — at the problem.

I've tried:

```
div       { position: absolute; display: block; }
div a img { display: block; border: 0; height: 64px; width: auto; } 
```

or

```
div       { display: block; height: 64px; float: left; }
div a img { display: block; border: 0; height: 100%; width: auto; } 
```

or even...

```
div       { display: inline-block; }
div a img { display: block; border: 0; height: 64px; width: auto; } 
```

and possibly...

```
div       { display: block; float: left; width: 0; }
div a img { display: block; border: 0; height: 64px; width: auto; } 
```

and including!

```
div       { display: block; float: left; width: 0; }
div a img { display: block; border: 0; max-height: 64px; width: auto; } 
```

Any ideas? There might just be some simple trick I'm missing.. I've given up searching because all I find are posts that have nothing to do with this specific issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:06:28.063

除非我在这里遗漏了一些东西（完全有可能！），否则你不能像设置高度一样明确地设置元素的宽度吗？或者将 max-width 属性设置为 100%，以便将其限制为它所在容器的宽度？

# php - 比较日期并找出天气第一个日期大于第二个日期

> ID：16152571
> 
> 赞同：1
> 
> 时间：2013-04-22T16:57:44.590
> 
> 标签：php

日期 1=23-3-2013

日期 2=26-3-2013

如何比较以上两个日期，例如 If Date2 >= Date1 Echo 大于等于

别的

回声不大于它们等于

这里更大并不意味着在数学上更大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:00:42.897

使用函数`strtotime($date)` 因此，你会得到类似的东西：

```
if(strtotime($date1) < strtotime($date2)){
    echo Date 2 is greater than date 1;
}else{
    echo Date 1 is greater or equal than Date 2;
 } 
```

# javascript - JqueryMobile Div 转换

> ID：16152572
> 
> 赞同：3
> 
> 时间：2013-04-22T16:57:47.527
> 
> 标签：javascript, jquery-mobile

我在页面顶部有一个标题和导航栏，我想在导航栏下方添加 3 个不同的页面，因此，当单击导航栏的按钮时，相应的页面应该出现过渡。

我正在尝试这样做，但页面转换应用于整个页面，包括标题和导航栏。

是否可以使用 jquery mobile，或者是否有解决此问题的方法？

这是我的代码

```
 <div data-role="header" data-theme="b">
    <h1>title</h1>
    <a href="#" data-icon="gear" class="ui-btn-right">Logout</a>
</div>
<div data-role="navbar" >
    <ul>
        <li><a  href="#" class="ui-btn-active">One</a></li>
        <li><a  href="#">Two</a></li>
        <li><a  href="#">Three</a></li>
    </ul>
</div><!-- /navbar --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:01:54.653

```
<div data-role="header" data-theme="b" data-position="fixed"> 
```

你只需要`data-position`属性。更多信息在这里：

[http://jquerymobile.com/demos/1.2.1/docs/toolbars/bars-fixed.html](http://jquerymobile.com/demos/1.2.1/docs/toolbars/bars-fixed.html)

## 编辑

好的，诀窍是您还必须为所有页面上的标题提供相同的`data-id`. 这是一个工作示例：

[http://jsbin.com/ibukoz/1/](http://jsbin.com/ibukoz/1/)

# c - fwrite 在每个输入后添加新行

> ID：16152580
> 
> 赞同：-1
> 
> 时间：2013-04-22T16:58:20.013
> 
> 标签：c, fwrite

我想添加一个新行来分隔文件中的每个条目。

我试过：

```
show_dump(buff + "\n", len, dump_fd); 
```

但有一个错误。

我从其他地方得到了这个函数，它将客户端发送的缓冲区格式化为十六进制和 ASCII 数据。

```
/*
Usage:
    show_dump(buffer, buffer_length, stdout);
    show_dump(buffer, buffer_length, fd);
*/

#include <string.h>

void show_dump(unsigned char *data, unsigned int len, FILE *stream) {
    const static char       hex[] = "0123456789abcdef";
    static unsigned char    buff[67];   /* HEX  CHAR\n */
    unsigned char           chr,
                            *bytes,
                            *p,
                            *limit,
                            *glimit = data + len;

    memset(buff + 2, ' ', 48);

    while(data < glimit) {
        limit = data + 16;
        if(limit > glimit) {
           limit = glimit;
           memset(buff, ' ', 48);
        }

        p     = buff;
        bytes = p + 50;
        while(data < limit) {
            chr = *data;
            *p++ = hex[chr >> 4];
            *p++ = hex[chr & 15];
            p++;
            *bytes++ = ((chr < ' ') || (chr >= 0x7f)) ? '.' : chr;
            data++;
        }
        *bytes++ = '\n';

        fwrite(buff, bytes - buff, 1, stream);
     }
} 
```

这就是我创建文件的方式：

```
if(dump) {
    add = dumpfile;

    for(i = 1; ; i++) {
        sprintf(add, "%d.log", i);
        dump_fd = fopen(dumpfile, "rb");
        if(!dump_fd) break;
        fclose(dump_fd);
    }
    dump_fd = fopen(dumpfile, "wb");
    if(!dump_fd) std_err();

} 
```

这就是我写入文件的方式：

```
if(dump_fd) show_dump(buff, len, dump_fd); 
```

* * *

问题：代码有什么问题？为什么文件都写在一起而不是逐行写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:16:28.687

我想您可以将 '\n' 添加到缓冲区中：

```
buff[strlen(buff)]='\n';
buff[strlen(buff)+1]='\0'; 
```

应该工作，我想。

-编辑：

或者像评论中指出的那样（可能是更好的解决方案..），使用 strcat：

```
strcat(buff,"\n"); 
```

如果需要，用 if 语句封装它以防止溢出：

```
if (sizeof(buff) > strlen(buff)+1) 
```

# php - 如果名称 PT 2 中有空格，则不发送联系表

> ID：16152582
> 
> 赞同：0
> 
> 时间：2013-04-22T16:58:26.877
> 
> 标签：php, forms, contact

好的，这是我的最后一个问题[，如果名称中有空格，则联系表格不会发送](https://stackoverflow.com/questions/16124918/contact-form-doesnt-send-if-there-is-a-space-in-name)，我已经接受了答案，但现在有一个新问题（有点）。我正在创建一个新线程，因为代码已更改。因此，如果名称中有空格，我已经制作了发送电子邮件的联系表格，现在甚至两个空格（“John Smith”和“John James Smith”）都可以接受，但是如果名称之前或之后有空格名称（“John Smith”或“John Smith”）它不发送。我知道没有人在开头或结尾写自己的名字，但有人可能会不小心按到它，那我该如何更正呢？这是编辑后的代码

```
<?php

function sendemail($toname, $toemail, $fromname, $fromemail, $subject, $message, $type = "plain", $cc = "", $bcc = "") {

    require_once "class.phpmailer.php";

    $mail = new PHPMailer();

        $mail->IsMAIL();

    $mail->CharSet = "UTF-8";
    $mail->From = $fromemail;
    $mail->FromName = $fromname;
    $mail->AddAddress($toemail, $toname);
    $mail->AddReplyTo($fromemail, $fromname);
    if ($cc) { 
        $cc = explode(", ", $cc);
        foreach ($cc as $ccaddress) {
            $mail->AddCC($ccaddress);
        }
    }
    if ($bcc) {
        $bcc = explode(", ", $bcc);
        foreach ($bcc as $bccaddress) {
            $mail->AddBCC($bccaddress);
        }
    }
    if ($type == "plain") {
        $mail->IsHTML(false);
    } else {
        $mail->IsHTML(true);

    $mail->Subject = $subject;
    $mail->Body = $message;

    if(!$mail->Send()) {
        $mail->ErrorInfo;
        $mail->ClearAllRecipients();
        $mail->ClearReplyTos();
        return false;
    } else {
        $mail->ClearAllRecipients(); 
        $mail->ClearReplyTos();
        return true;
    }

}
}

function descript($text, $striptags = true) {
// Convert problematic ascii characters to their true values
    $search = array("40","41","58","65","66","67","68","69","70",
        "71","72","73","74","75","76","77","78","79","80","81",
        "82","83","84","85","86","87","88","89","90","97","98",
        "99","100","101","102","103","104","105","106","107",
        "108","109","110","111","112","113","114","115","116",
        "117","118","119","120","121","122"
        );
    $replace = array("(",")",":","a","b","c","d","e","f","g","h",
        "i","j","k","l","m","n","o","p","q","r","s","t","u",
        "v","w","x","y","z","a","b","c","d","e","f","g","h",
        "i","j","k","l","m","n","o","p","q","r","s","t","u",
        "v","w","x","y","z"
        );
    $entities = count($search);
    for ($i=0; $i < $entities; $i++) {
        $text = preg_replace("#(&\#)(0*".$search[$i]."+);*#si", $replace[$i], $text);
    }
    $text = preg_replace('#(&\#x)([0-9A-F]+);*#si', "", $text);
    $text = preg_replace('#(<[^>]+[/\"\'\s])(onmouseover|onmousedown|onmouseup|onmouseout|onmousemove|ondblclick|onfocus|onload|xmlns)[^>]*>#iU', ">", $text);
    $text = preg_replace('#([a-z]*)=([\`\'\"]*)script:#iU', '$1=$2nojscript...', $text);
    $text = preg_replace('#([a-z]*)=([\`\'\"]*)javascript:#iU', '$1=$2nojavascript...', $text);
    $text = preg_replace('#([a-z]*)=([\'\"]*)vbscript:#iU', '$1=$2novbscript...', $text);
    $text = preg_replace('#(<[^>]+)style=([\`\'\"]*).*expression\([^>]*>#iU', "$1>", $text);
    $text = preg_replace('#(<[^>]+)style=([\`\'\"]*).*behaviour\([^>]*>#iU', "$1>", $text);
    if ($striptags) {
        do {
            $thistext = $text;
            $text = preg_replace('#</*(applet|meta|xml|blink|link|style|script|embed|object|iframe|frame|frameset|ilayer|layer|bgsound|title|base)[^>]*>#i', "", $text);
        } while ($thistext != $text);
    }
    return $text;
}

$name=0;
$telefon=0;
$sender=0;
$syobshtenie=0;
$ename=0;
$etelefon=0;
$esender=0;
$esyobshtenie=0;

if($_POST['name']){
$name = $_POST['name'];
if(eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $sender))
{
$sender="Име";
}
}
else { $name=1; $ename=1; }

if($_POST['sender']){
$sender = $_POST['sender'];
if(!eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $sender))
{
$sender="Email";
}
}

else { $sender=1; $esender=1; }

if($_POST['telefon']){
$telefon = $_POST['telefon'];
}

if($_POST['zapitvane']){
$zapitvane = $_POST['zapitvane'];
$syobshtenie = "<p>Запитване от ".$_POST['name']."
<br />Email: ".$sender."
<br />Телефон: ".$telefon."</p>".$zapitvane;
}

    else { $syobshtenie=1; $esyobshtenie=1; }

if($name=="Име"){ $ename=1; }
if($telefon=="Телефон"){ $etelefon=1; }
if($sender=="Email"){ $esender=1; }
if($syobshtenie=="Моля, въведете съобщение до нас"){ $esyobshtenie=1; }

if($ename==0 && $esender==0 && $esyobshtenie==0 && $etelefon==0){

sendemail("VillaDes", "info@konsumator.com", "", $sender, $name, $syobshtenie, "", "", "");

echo '
<div class="active-error"" style="margin-top:5px;">Съобщението Ви беше изпратено.<br /><br />Приятен ден!</div>
<script>
document.getElementById("contact").reset();
</script>';
}

else {
echo '
<div class="border-15"></div><div class="active-error"><b>Моля, въведете:</b></div><div class="border-8"></div>';

if($ename==1) { echo '<div class="active-error">Име</div><div class="border-8"></div>'; }
if($esender==1) { echo '<div class="active-error">Е-поща</div><div class="border-8"></div>'; }
if($etelefon==1) { echo '<div class="active-error">Телефон</div><div class="border-8"></div>'; }
if($esyobshtenie==1) { echo '<div class="active-error">Запитване</div>'; }  
}

                echo '<script type="text/javascript">
                $(document).ready(function() {
                $("#close-email").click(function () { $("#mailresult").hide("fast"); } );
                });
                </script>';

?> 
```

这是有问题的部分，名称，必须做一些事情才能接受任何数量和位置的空格或其他符号

```
if($_POST['name']){
$name = $_POST['name'];
if(eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $sender))
{
$sender="Име";
}
}
else { $name=1; $ename=1; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:08:14.350

你试过修剪功能吗？

```
 $name = $_POST['name'];
    $name = trim($name); //Removes space from start and end of the string
    ... 
```

# bash - 在 bash 中判断文件是否为 PDF

> ID：16152583
> 
> 赞同：1
> 
> 时间：2013-04-22T16:58:35.793
> 
> 标签：bash, pdf, file-type

我需要编写一个 bash 脚本来判断文件是否为 pdf 文件。但是，我不能简单地使用文件名或扩展名。

例如：

test.pdf.encrypt - 不会打开，因为文件本身已加密并且文件是计算机无法识别的未知类型。

test.pdf.decrypt - 即使扩展名为 .decrypt 也会打开

由于查看扩展名无济于事，并且加密和解密文件的名称中间都有 .pdf，有没有办法让系统测试并查看文件是否可以用 pdf 阅读器读取？

我只需要可以输入到 bash 中的 if 语句中的命令。

```
if [this file is a working pdf file]; do
   echo "$file is a working pdf file."
fi 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T17:12:02.403

另一种选择是`file`在文件上使用：

```
type="$(file -b $file)"
if [ "${type%%,*}" == "PDF document" ]; then
  echo "$file is a PDF file."
fi 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T17:05:00.907

每个 PDF 文件都以`%PDF`. 您可以比较指定文件的前 4 个字符，以确保它是 PDF。

```
FILE="/Users/Tim/Documents/My File.pdf"
if [ $(head -c 4 "$FILE") = "%PDF" ]; then
    echo "It's a PDF!"
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:12:14.147

在 Linux 和 Solaris 上，file 命令将识别一种文件类型；具体来说，PDF 文档是众多类型中的一种。

```
file filename.xxx | grep -q 'PDF' && echo 'is pdf file'  || echo 'is not pdf' 
```

无论文件扩展名如何。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-05T13:41:56.140

该`file`命令说明文件的类型，无论扩展名如何。

```
 $ file Confirmation.pdf 
  Confirmation.pdf: PDF document, version 1.5 
```

# php - 在 PHP 中启用 Zend 多字节支持

> ID：16152585
> 
> 赞同：4
> 
> 时间：2013-04-22T16:58:42.907
> 
> 标签：php, linux, zend-framework, yum

我已经在 Amazon Linux 服务器上使用 yum 安装了 PHP (5.3.23)。我还使用以下方法安装了 mbstring：

```
yum install php-mbstring 
```

但是 Zend 多字节支持显示为禁用。我该如何启用它？我不想从源代码安装 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-18T12:33:19.777

您需要使用该`--enable-zend-multibyte`选项构建 PHP。

# mysql - MySQL 数据库固定 (?) 查询排序

> ID：16152587
> 
> 赞同：2
> 
> 时间：2013-04-22T16:58:51.777
> 
> 标签：mysql, sql-order-by

我有一个带有不同图片名称的 MySQL 数据库，我想按名称订购。问题是我不知道我是否需要使用 PHP 或 MySQL 是否可以使用 :)

这是 MySQL 的排序方式，但这当然是错误的——因为**-10.jpg**和**-11.jpg**应该在底部。

> 106-44XKJ7-1.jpg
> 106-44XKJ7-10.jpg
> 106-44XKJ7-11.jpg
> 106-44XKJ7-2.jpg
> 106-44XKJ7-3.jpg
> 106-44XKJ7-4.jpg
> 106-44XKJ7-5.jpg
> 106 -44XKJ7-6.jpg
> 106-44XKJ7-7.jpg
> 106-44XKJ7-8.jpg
> 106-44XKJ7-9.jpg

在表格中稍远一些，情况就是这样；

> 790_49BSBV_2.jpg
> 790_49BSBV_3.jpg
> 790_49BSBV_4.jpg
> 790_49BSBV.jpg

这看起来不错，但是，正如您可能已经猜到的那样，**没有**后续编号（下划线后面的数字）的应该是第一个，**_2**应该是第二个，依此类推......

提前感谢您的回复！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:34:38.157

这是对字符字段的常见误解。由于 10 和 11 实际上被视为您字段中的字符/文本（而不是数字），因此它们的排序确实正确，因为 10 比 1“大”并且比 2“小”。

如果您想按数字排序，您可以尝试从名称中解析数字，将它们转换为整数，然后按此排序。

MySQL中这样的东西可能会起作用：

```
ORDER BY SUBSTRING(name, 1, LOCATE('-', name, 5)), CAST(REPLACE(SUBSTRING(name, LOCATE('-', name, 5) + 1), '.jpg', '') as SIGNED) 
```

这将从头开始解析字符并按它们排序。然后，它通过在名称中定位第二个破折号并删除它之前的所有内容来进行二次排序。然后它从该结果中删除 .jpg。它最终将它转换为一个整数，这样就可以对其进行正确排序。

或者，您可以简单地将另一个字段添加到您的表中（如 DateCreated 字段），然后排序更加直接。

**更新的答案**

```
ORDER BY 
    SUBSTRING(REPLACE(name, '_', '-'), 1, 5),
    CAST(REPLACE(SUBSTRING(REPLACE(name, '_', '-'), LOCATE('-', REPLACE(name, '_', '-'), 5) + 1), '.jpg', '') as SIGNED) 
```

但同样，这会给你一些可能错误的排序。请参阅下面的评论。

# facebook - Facebook 小部件（由 Milap Patel 提供）如何翻译文本？

> ID：16152589
> 
> 赞同：2
> 
> 时间：2013-04-22T16:58:56.167
> 
> 标签：facebook, wordpress, widget

[我在我的博客上通过http://wordpress.org/extend/plugins/facebook-pagelike-widget/](http://wordpress.org/extend/plugins/facebook-pagelike-widget/)使用 wordpress 的 facebook 小部件 ，但我想翻译或更改当前显示“在 Facebook 上找到我们”的文本. 那可能吗？

我已经搜索了插件文件夹及其文件，但我没有足够的经验或者它只是不存在。如果可能，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:29:01.157

在插件文件夹中，您可以在第 7 行编辑名为 fb.js 的文件：

```
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId="+appid; 
```

**将en_US**更改为您想要的语言环境。可在此处找到可用 Facebook 语言环境的完整列表：[https ://www.facebook.com/translations/FacebookLocales.xml](https://www.facebook.com/translations/FacebookLocales.xml)

这样做的问题是，如果您安装插件的更新，语言环境将切换回 en_US。我会从 Facebook ( [https://developers.facebook.com/docs/reference/plugins/like-box/](https://developers.facebook.com/docs/reference/plugins/like-box/) ) 获取您自己的嵌入代码，并将其粘贴到您的主题或侧边栏的 HTML 小部件中。

# jquery - 页面加载后突出显示当前页面

> ID：16152590
> 
> 赞同：0
> 
> 时间：2013-04-22T16:58:57.550
> 
> 标签：jquery, navigation

需要帮助...我有这个导航栏

```
 <div id="nav">
<ul>
    <li id="overview" class="first"><a href="start?nhsyshhdyye%sdfsd">OVERVIEW</a></li>
    <li id="details" class=”current”&gt;<a href="start?ertrer%sdsde%srerte "> DETAILS</a></li>
    <li id="questions" ><a href="start?opuuwe%sjiwue ">QUESTIONS</a></li>
    <li id="review" ><a href="start?sdfw%wrfwlwer ">REVIEWS</a></li>
</ul>
</div>
<div><!---Details Page Start--->

<div><!---other content---></div>
<div> <input type="submit" name="answer-save" id=" answer-save" value="Save" class="save-btn" style="width:100px;">
 </div>
<div><!---other content---></div>
<div>
<input type="submit" name="answer-save1" id=" answer-save1" value="Save" class="save-btn" style="width:100px;"> 
</div>
<div><!---other content---></div>
</div> 
```

有很多提交按钮可以保存页面的编辑输入。例如，更改名称或添加评论等。当页面在保存/编辑后加载时，url 会更改。[ start?ertrer%sdsde%srerte 变为 start?someother%^url 但页面保持不变] 如何在页面加载时将类保持为最新？

我曾经使用过这个脚本，但是当页面加载脚本时 url 发生变化现在毫无意义。

```
var url = window.location.href; 
// passes on every "a" tag 
$("#nav a").each(function() {
        // checks if its the same on the address bar
    if(url == (this.href)) { 
        $(this).closest("li").addClass("current");
    }
}); 
```

帮助 ？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:42:41.000

像这样修改您的标记以包含查询字符串值：

```
<ul id="menu">
    <li id="overview" class="first" data-qs="nhsyshhdyye%sdfsd"><a href="start?nhsyshhdyye%sdfsd">OVERVIEW</a></li>
    <li id="details" data-qs="ertrer%sdsde%srerte"><a href="start?ertrer%sdsde%srerte "> DETAILS</a></li>
    <!--etc.-->
</ul> 
```

然后添加一行脚本，如下所示：

```
$(document).ready(function () {
    $("ul#menu li[data-qs=" + location.search.replace("?", "") + "]").addClass("current");
}); 
```

# pdf - 书签的页脚超链接在从 Word 2007 发布的 PDF 文档中不起作用

> ID：16152592
> 
> 赞同：0
> 
> 时间：2013-04-22T16:58:59.470
> 
> 标签：pdf, ms-word

我正在用 Word 编写用户手册，该手册将发布为 PDF 以分发给我们的客户。本文档通过指向文档中书签的超链接的方式广泛使用交叉引用——通常效果很好。因为这是一个相当长的文档，所以我在页脚部分的第一个“内容”页面的顶部放置了一个链接——页码打印在页脚另一侧的同一行。

但是，我无法在已发布的 PDF 文档中使用此链接。它看起来像普通的超链接一样带有蓝色和下划线，但与文档正文中的链接不同，当我将鼠标悬停在它上面时，光标不会变成超链接指针，并且单击它没有任何效果。

请对我能做些什么来解决这个问题或解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:17:54.890

好的，我自己找到了解决方案。我不妨在这里与其他可能遇到类似问题的人分享：

诀窍是插入一张透明图片，其宽度和高度与您想要超链接的单词大致相同。我在这里添加了一个适合 Tahoma 12pt 字体中的“内容”一词的内容。不过，大小并不是那么重要，因为您可以根据需要使用 Word 的图片手柄来调整其大小。

![透明PNG图片](https://i.stack.imgur.com/LOfVC.png)

很明显，都是透明的所以是不可见的，但是在这个文本上方的空白处右击，你会看到它确实是一个可以保存的图像。

保存图像后，请执行以下操作：

1.  编辑页脚并输入要链接的文本，如果需要，将其格式化为“超链接”样式。
2.  将图片插入页脚——注意在完成之前不要在图片外部单击，因为如果取消选择，很难再次选择。
3.  右键单击它并将其文本环绕属性设置为“Behind Text”。
4.  再次右键单击它并将其超链接属性设置为指向您想要的位置。
5.  使用手柄来定位和调整图片大小，使其与文本完全覆盖相同的区域。
6.  关闭页眉和页脚编辑工具。

最后一件事：与完成的 PDF 文档中指向书签的其他链接不同，出于某种原因，此链接显示了详细说明链接位置的工具提示。我能找到摆脱这种情况的唯一方法是转到“Office 按钮 | Word 选项 | 校对 | 自动更正选项... | 自动套用格式”，然后取消选中“替换”标题下的“带有超链接的 Internet 和网络路径”选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T16:06:41.130

插入`Cross-Reference`到`footer`（不是超链接）。采用

> 参考>交叉参考

然后选择：

> 参考类型“标题”

我为此苦苦挣扎了将近一个小时，然后将交叉引用插入到`Heading`我为目录创建的“”中。创建 PDF（不要打印）和宾果游戏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-06-02T07:19:05.340

我也遇到过这种情况，在这里阅读所有建议，但没有发现有帮助。

我尝试了自己并解决了我的问题。很简单，不要通过 MS Word 制作 pdf，只需访问在线 pdf 制作网站并将您的 doc 转换为 pdf。

# java - `putForNullKey` 方法在 hashmap 的`put` 方法中做了什么？

> ID：16152596
> 
> 赞同：1
> 
> 时间：2013-04-22T16:59:08.033
> 
> 标签：java, collections, hashmap

今天我在修复一个缺陷，发现了一件非常有趣的事情。

我试图在哈希图中放置一个键值对。（我假设密钥在那里，但后来发现它是空的）。

因此，在使用 key 检索值时，我并没有每次都得到 null。

后来我发现 key 是 null ，我更正了。

但后来我看到了`put`方法的代码`Hashmap`。

`key`为什么它在is时不给出异常`null`？

它调用`putForNullKey`私有方法。它有什么作用？

但我认为如果密钥为空，它应该给出一些例外。

为什么他们没有那样实施呢？如果键为空，键值对没有用吗？

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap.putForNullKey%28java.lang.Object%29](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap.putForNullKey%28java.lang.Object%29)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:03:41.857

来自 HashMap 的 Javadoc：

```
Hash table based implementation of the Map interface.
This implementation provides all of the optional map
operations, and permits null values and the null key 
```

这是设计使然，并且已记录在案。“为什么”的问题很难回答，但自从引入了 HashMap（以及在此之前，Hashtable）以来就是这样（编辑，实际上，Hashtable 不允许空值）。

至于为什么它有 putForNullKey，那么 HashMap 依赖于 key 的 hashCode() 来放置它，并且由于它无法从 null 值中获取 hashCode()，所以它必须作为一种特殊情况来做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:05:59.577

`Hashtable`这是 a和 a之间的区别之一`HashMap`。

`Hashtable`不允许空键或值。`HashMap`允许一个空键和任意数量的空值。

通常，我们使用 null 键来表示默认情况（即，如果给定键不存在时应该使用的值）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:07:21.923

HashMap 只允许一个空键。因此，每当有人想将某个值放入 null 时，它会在 put 方法中调用 putForNullKey 方法，并在 putForNullKey 方法中将值放在零索引处。

为了通过 null 键获取值，它还有一个方法 getForNullKey，它从 get 方法内部调用。

# javascript - 使用 CSS webkitFilter 画布 toDataURL

> ID：16152598
> 
> 赞同：1
> 
> 时间：2013-04-22T16:59:21.563
> 
> 标签：javascript, css, html, canvas

我已将 CSS 过滤器应用于画布，如下所示：

```
canvas.style.webkitFilter = 'hue-rotate(90deg)'; 
```

如果我然后尝试使用锚元素的下载属性下载画布的内容：

```
var imgData = canvas.toDataURL('image/*');
link.download = 'Image';
link.href = imgData; 
```

下载的图像没有应用过滤器。即使我使用 getImageData 来查看图像数据或尝试将图像源设置为图像数据，也会出现同样的问题。无论如何，在 JavaScript 中是否有应用 CSS 过滤器来获取画布的图像数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:30:30.260

**您可以在画布本身中应用 Hue-shift。**

例如，CamanJS 库有一些不错的图像过滤器： [http ://camanjs.com/](http://camanjs.com/)

这是来自他们的文档：

> 色调
> 
> 调整图像的色调。它可用于以统一的方式改变图像中的颜色。范围是 0 到 100。
> 
> 有时，色调在 0 到 360 的范围内表示。如果这是您习惯的术语，请认为 0 到 100 代表 0 到 360 范围内色调偏移的百分比。

来自 CamanJS 的示例代码：

```
Caman("#image", function () {
      this.hue(90).render();
}); 
```

# haskell - 带有 gcc 错误的 Haskell 编译

> ID：16152601
> 
> 赞同：1
> 
> 时间：2013-04-22T16:59:24.513
> 
> 标签：haskell, gcc, linker

我一直在尝试使用 ghc 编译 Haskell 代码（仅用于玩 Haskell），但在 gcc 链接部分出现错误。

```
ghc --make compileTest.hs 
Linking compileTest ...
/usr/bin/ld: --hash-size=31: unknown option
/usr/bin/ld: use the --help option for usage information
collect2: error: ld returned 1 exit status 
```

这是我的 gcc 版本：

```
gcc --version
gcc (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

我不明白 gcc 接受的不同标志的微妙之处，并且在谷歌上找不到对该错误的任何引用。另外，我认为我不能直接更改对 gcc 的调用，因为它是由 ghc 命令启动的，用于编译 Haskell 文件。

详细版本如下所示。

```
:~/haskell_code$ ghc --make compileTest.hs -v
Glasgow Haskell Compiler, Version 7.4.2, stage 2 booted by GHC version 7.4.2
Using binary package database: /usr/lib/ghc/package.conf.d/package.cache
wired-in package ghc-prim mapped to ghc-prim-0.2.0.0-7d3c2c69a5e8257a04b2c679c40e2fa7
wired-in package integer-gmp mapped to integer-gmp-0.4.0.0-af3a28fdc4138858e0c7c5ecc2a64f43
wired-in package base mapped to base-4.5.1.0-6e4c9bdc36eeb9121f27ccbbcb62e3f3
wired-in package rts mapped to builtin_rts
wired-in package template-haskell mapped to template-haskell-2.7.0.0-2bd128e15c2d50997ec26a1eaf8b23bf
wired-in package dph-seq not found.
wired-in package dph-par not found.
Hsc static flags: -static
*** Chasing dependencies:
Chasing modules from: *compileTest.hs
Stable obj: [Main]
Stable BCO: []
Ready for upsweep
  [NONREC
      ModSummary {
         ms_hs_date = Sun Apr 21 23:11:03 IST 2013
         ms_mod = main:Main,
         ms_textual_imps = [import (implicit) Prelude]
         ms_srcimps = []
      }]
*** Deleting temp files:
Deleting: 
compile: input file compileTest.hs
Created temporary directory: /tmp/ghc20569_0
*** Checking old interface for main:Main:
[1 of 1] Skipping  Main             ( compileTest.hs, compileTest.o )
Upsweep completely successful.
*** Deleting temp files:
Deleting: /tmp/ghc20569_0/ghc20569_0.s
Warning: deleting non-existent /tmp/ghc20569_0/ghc20569_0.s
link: linkables are ...
LinkableM (Sun Apr 21 23:11:17 IST 2013) main:Main
   [DotO compileTest.o]
Linking compileTest ...
*** C Compiler:
'/usr/bin/gcc' '-fno-stack-protector' '-Wl,--hash-size=31' '-Wl,--reduce-memory-overheads' '-c' '/tmp/ghc20569_0/ghc20569_0.c' '-o' '/tmp/ghc20569_0/ghc20569_0.o' '-DTABLES_NEXT_TO_CODE' '-I/usr/lib/ghc/include'
*** C Compiler:
'/usr/bin/gcc' '-fno-stack-protector' '-Wl,--hash-size=31' '-Wl,--reduce-memory-overheads' '-c' '/tmp/ghc20569_0/ghc20569_0.s' '-o' '/tmp/ghc20569_0/ghc20569_1.o' '-DTABLES_NEXT_TO_CODE' '-I/usr/lib/ghc/include'
*** Linker:
'/usr/bin/gcc' '-fno-stack-protector' '-Wl,--hash-size=31' '-Wl,--reduce-memory-overheads' '-o' 'compileTest' 'compileTest.o' '-L/usr/lib/ghc/base-4.5.1.0' '-L/usr/lib/ghc/integer-gmp-0.4.0.0' '-L/usr/lib/ghc/ghc-prim-0.2.0.0' '-L/usr/lib/ghc' '/tmp/ghc20569_0/ghc20569_0.o' '/tmp/ghc20569_0/ghc20569_1.o' '-lHSbase-4.5.1.0' '-lHSinteger-gmp-0.4.0.0' '-lgmp' '-lHSghc-prim-0.2.0.0' '-lHSrts' '-lffi' '-lm' '-lrt' '-ldl' '-u' 'ghczmprim_GHCziTypes_Izh_static_info' '-u' 'ghczmprim_GHCziTypes_Czh_static_info' '-u' 'ghczmprim_GHCziTypes_Fzh_static_info' '-u' 'ghczmprim_GHCziTypes_Dzh_static_info' '-u' 'base_GHCziPtr_Ptr_static_info' '-u' 'base_GHCziWord_Wzh_static_info' '-u' 'base_GHCziInt_I8zh_static_info' '-u' 'base_GHCziInt_I16zh_static_info' '-u' 'base_GHCziInt_I32zh_static_info' '-u' 'base_GHCziInt_I64zh_static_info' '-u' 'base_GHCziWord_W8zh_static_info' '-u' 'base_GHCziWord_W16zh_static_info' '-u' 'base_GHCziWord_W32zh_static_info' '-u' 'base_GHCziWord_W64zh_static_info' '-u' 'base_GHCziStable_StablePtr_static_info' '-u' 'ghczmprim_GHCziTypes_Izh_con_info' '-u' 'ghczmprim_GHCziTypes_Czh_con_info' '-u' 'ghczmprim_GHCziTypes_Fzh_con_info' '-u' 'ghczmprim_GHCziTypes_Dzh_con_info' '-u' 'base_GHCziPtr_Ptr_con_info' '-u' 'base_GHCziPtr_FunPtr_con_info' '-u' 'base_GHCziStable_StablePtr_con_info' '-u' 'ghczmprim_GHCziTypes_False_closure' '-u' 'ghczmprim_GHCziTypes_True_closure' '-u' 'base_GHCziPack_unpackCString_closure' '-u' 'base_GHCziIOziException_stackOverflow_closure' '-u' 'base_GHCziIOziException_heapOverflow_closure' '-u' 'base_ControlziExceptionziBase_nonTermination_closure' '-u' 'base_GHCziIOziException_blockedIndefinitelyOnMVar_closure' '-u' 'base_GHCziIOziException_blockedIndefinitelyOnSTM_closure' '-u' 'base_ControlziExceptionziBase_nestedAtomically_closure' '-u' 'base_GHCziWeak_runFinalizzerBatch_closure' '-u' 'base_GHCziTopHandler_flushStdHandles_closure' '-u' 'base_GHCziTopHandler_runIO_closure' '-u' 'base_GHCziTopHandler_runNonIO_closure' '-u' 'base_GHCziConcziIO_ensureIOManagerIsRunning_closure' '-u' 'base_GHCziConcziSync_runSparks_closure' '-u' 'base_GHCziConcziSignal_runHandlers_closure'
/usr/bin/ld: --hash-size=31: unknown option
/usr/bin/ld: use the --help option for usage information
collect2: error: ld returned 1 exit status
*** Deleting temp files:
Deleting: /tmp/ghc20569_0/ghc20569_1.o /tmp/ghc20569_0/ghc20569_0.s /tmp/ghc20569_0/ghc20569_0.o /tmp/ghc20569_0/ghc20569_0.c
*** Deleting temp dirs:
Deleting: /tmp/ghc20569_0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T14:45:46.447

问题在于 ghc 似乎使用了特定于旧版本 ld 的选项，正如 Daniel Fisher 所提到的。您可以通过将其放在您的路径中来覆盖 ld 的选择。

首先测试你有`ld.bfd`（旧程序）：

```
$ which ld.bfd
/usr/bin/ld.bfd 
```

然后让自己成为本地程序的目录。我使用〜/ bin。如果您还没有这样的目录，请将以下内容放入您的`.profile`文件中，然后重新启动所有 shell（例如`bash`）。

```
# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/bin" ] ; then
    PATH="$HOME/bin:$PATH"
fi 
```

然后，为`ld.bfd`.

```
$ cd bin
~/bin$ ln -s `which ld.bfd` ld
~/bin$ ls -l ld
lrwxrwxrwx 1 user user 15 Oct  1 15:44 ld -> /usr/bin/ld.bfd 
```

这有帮助吗？

# sql-server - 逗号分隔值计数

> ID：16152603
> 
> 赞同：0
> 
> 时间：2013-04-22T16:59:26.580
> 
> 标签：sql-server, tsql, count, comma

表格模式具有具有以下值的单列：

```
NewsletteridPattern
------------
%50%
%51% 
```

表 B 具有以下值：

```
SubscriberId NewsletterIdCsv
------------ -----------------
47421584     51
45551047     50,51
925606902    50
47775985     51 
```

我有以下查询，它基本上通过使用模式计算逗号分隔值：

```
SELECT *
FROM TABLEB t WITH (nolock)
JOIN Patterns p ON (t.NewsletteridPattern LIKE p.pattern) 
```

问题是计数不正确，例如我的模式有 %50% 和 %51% ，因此表 B 中的行号 2 应该计算两次，但是对于我的查询它只有一次，我该如何解决？

**编辑：**
我忘记在导致问题的原始查询中添加 DISTINCT：

```
SELECT Count(Distinct Subscriberid)
FROM TABLEB t WITH (nolock)
JOIN Patterns p ON (t.NewsletteridPattern LIKE p.pattern) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:13:48.443

我模拟了你的数据：

```
create table #pattern (pattern varchar(50))

insert into #pattern values ('%50%')
insert into #pattern values ('%51%')

create table #subscriber (id varchar(50), newsletter varchar(50))

insert into #subscriber values ('47421584', '51')
insert into #subscriber values ('45551047', '50,51')
insert into #subscriber values ('925606902', '50')
insert into #subscriber values ('47775985', '51')

SELECT pattern, COUNT(*) AS Counter
FROM #subscriber t WITH (nolock)
    JOIN #pattern p ON (t.newsletter LIKE p.pattern)
GROUP BY pattern 
```

我的选择语句返回：

```
pattern  Counter
-------  -------
%50%        2

%51%        3 
```

你的最终目标是什么？您是只关心按模式计算行数，还是想按模式选择行数？

# c# - 在 HTTP Post 请求中传递数组

> ID：16152607
> 
> 赞同：0
> 
> 时间：2013-04-22T16:59:42.490
> 
> 标签：c#, arrays, http-post

我正在尝试发出 POST 请求，但每次出现错误。

我的帖子请求正文如下：

```
 Content-Disposition:form-data; name="request";
   {
      "recipients":["7778888"]
   } 
```

所以我提出了要求，我的帖子数据如下：

```
 string postData2 ="Content-Disposition:form-data; name=\"request\";" + Environment.NewLine + "{" + Environment.NewLine + "\"recipients\":[\"7778888\"]" + Environment.NewLine + "}"; 
```

但它没有用，并给了我无效的收件人价值。我想我需要在这里将收件人值作为数组传递。如何在此请求中将 "{" + Environment.NewLine + "\"recipients\":[\"7778888\"]" + Environment.NewLine + "}" 作为数组传递？

# javascript - Importing external HTML inner content with Javascript AJAX without Jquery

> ID：16152609
> 
> 赞同：1
> 
> 时间：2013-04-22T16:59:48.387
> 
> 标签：javascript, html, ajax, import

I need some help, I've got the following HTML code:

```
<ul class="menu-list">
  <li class="active"><a href="cont1.html" title="Title 1">Link 1</a></li>
  <li><a href="cont2.html" title="Title 2">Link 2</a></li>
  <li><a href="cont3.html" title="Title 3">Link 3</a></li>
  <li><a href="cont4.html" title="Title 4">Link 4</a></li>
</ul>

<div class="content">           
   <div class="innerContent">
        <!-- Insert external HTML content here -->
   </div>
</div> 
```

So, when I click "Link 1", for example, I need to get the inner content from "cont1.html" to be appended inside of the div class="innerContent", not forgetting to add the "class="active"" inside the clicked li. Using just Javascript/AJAX without Jquery and without changing this HTML.

I did a similar [**example here**](https://stackoverflow.com/questions/15884640/hide-and-show-elements-by-clicking-on-a-link-with-java-script-without-jquery/15935020#15935020), but is working for the content of the same page, not different pages, and I don't know why but doesn't work on IE.

Please, someone can help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:32:43.873

尝试这个

```
 <ul class="menu-list">
   <li class="active"><a href="javascript:display('cont1.html');" title="Title 1" >Link 1</a></li>
   <li><a href="javascript:display('cont2.html');" title="Title 2" >Link 2</a></li>
   <li><a href="javascript:display('cont3.html');" title="Title 3" >Link 3</a></li>
   <li><a href="javascript:display('cont4.html');" title="Title 4" >Link 4</a></li>
  </ul>

<div class="content">           
  <div class="innerContent" id="innerContent">
  </div>
</div> 
```

脚本

```
function display(url)
{
   var xmlhttp;
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
           xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("innerContent").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET",url,true);
    xmlhttp.send();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:41:24.947

在我看来，您想对外部文件发出 AJAX 请求，然后使用 responseText 填充容器的 innerHTML。

本文将指导您完成如何制作 XMLHttpRequest——没有 jQuery 的 AJAX：[https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)

因此，您必须创建一个函数，该函数在您单击其中一个链接时运行，它将 1) 执行 AJAX 请求以获取外部 HTML；2）用responseText填充你的innerContent `<div>`；3)`<li>`被归类为“活跃”的变化。

# string - How to detect end of line character in a textbox string (VB6)

> ID：16152614
> 
> 赞同：0
> 
> 时间：2013-04-22T17:00:12.220
> 
> 标签：string, vb6, character, line, letter

i have a problem with VisualBasic6 .

i have 3 Textbox and 2 Command Button .

i want to detect VbCrLf when checking first textbox , letter by letter then write in another in second textbox: 101 and another function check the second textbox , if found 101 then make a new line (vbcrlf) in the third textbox.

in a Command :

```
For i = 1 to len(text1.text)
   if Mid(txtD.Text, i, 1) = vbcrlf then
      text2.text = 101
   endif
next 
```

in Command2 :

```
if text2.text = 101 then
  text3.text = text3.text & vbcrlf
endif 
```

but when i check for Vbcrlf , it seem that character is not a newline-character and text2.text doesn't fill `101`

Also i tried VbNewLine but there is same problem !

Thank You my friends !

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T19:37:50.243

您需要准确检查新行分隔符是什么。我见过 vbcr、vblf 和 vbcrlf。VbNewLine 与 vbcrlf 相同。

此外，即使您的字符串中有 vbcrlf，您的测试仍然会失败。vbcrlf 是**两个**字符。您一次只测试一个角色。

更好的测试是 InStr() 函数。这是一个快速测试，看看较小的字符串是否在较大的字符串中的任何位置。因此，您的测试将如下所示：

```
If InStr(txtD.Text, vbcr) or InStr(txtD.Text, vblf) then
  text2.text = 101
End If 
```

# javascript - How can I control image loading when I can't modify some of the source code?

> ID：16152618
> 
> 赞同：2
> 
> 时间：2013-04-22T17:00:29.743
> 
> 标签：javascript, html, performance, image-loading

I'm working in a templating system that uses a series of plugins to output some markup. One of these plugins is a gallery that contains multiple images. As the gallery sizes grow, load speed gets impacted and I'm trying to come up with a creative approach to work around it.

**Here's an example:**
`{% plugin gallery %}`

will become:

```
<div id="gallery">
   <img src="sample.png" alt="Sample Image">
   <img src="sample.png" alt="Sample Image">
   <img src="sample.png" alt="Sample Image">
   <img src="sample.png" alt="Sample Image">
   <img src="sample.png" alt="Sample Image">
</div> 
```

I can't control the content that's being output, only wrap it with additional HTML. This obviously results in 5 images being loaded

One technique to load images when you want them is to give them a fake attribute that you then turn into src when you want to load (e.g. ) but I can't edit that output.

Another idea I had was wrapping all the output with something to prevent load, like an HTML comment, and then stripping that off / using the data with some JavaScript to reconstruct the image elements as needed and append them back to the DOM. This seems hacky and I'm out of ideas.

**Summary:**

*   I want to prevent images from loading so I can load them as I want them and control page load better.
*   I cannot edit the markup of the image tags, but can wrap with additional markup.
*   I'm constrained to client-side languages (HTML/JS). I cannot use server-side languages or modify the server itself in this situation.

Any other techniques that may work here?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:04:27.050

如果您说您无法更改`<img>`HTML 内容中的标签，那么您就被卡住了。你不能用 javascript 或 HTML 做任何事情都不会阻止它们加载，然后允许你控制它们何时加载。

在图像已经开始加载之前，Javascript 无法在 DOM 上运行，因此当您使用 javascript 进行控制时，它们已经在加载。

在某些浏览器中包装 HTML 注释可能会出现问题，因为我已经读过并非所有浏览器都保留注释内的内容。

`display: none`使用 CSS 规则 (或)使图像不可见的各种方法`visibility: hidden`不会阻止它们加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:15:26.153

~~将其包装在一个`code`块中并用 Javascript 将其解析出来。您已经想到了这一点，但这不会受到 jfriend00 的回答中提到的问题的影响。注释。~~

基本上是的，你必须做一些 hacky 因为非 hacky 的事情是接收更少`img`的 s。

*   服务器是否支持分页或最大请求大小？
*   模板系统是否支持最大请求？还是基本形式的逻辑`if(num > MAX) return;`？

# c++ - 如何在异步读取 boost asio c++ 时获取传输的字节数

> ID：16152622
> 
> 赞同：0
> 
> 时间：2013-04-22T17:00:56.660
> 
> 标签：c++, sockets, asynchronous, boost-asio

正如我在 Boost::asio 中看到的，异步读取函数不会返回传输的字节数，但普通读取函数会返回。使用 async_read_some 时如何获取传输的字节数？（参数：缓冲区，处理程序）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:05:55.843

[所有表单都`async_read`](http://www.boost.org/doc/html/boost_asio/reference/async_read.html)期望表单的“ `ReadHandler`”回调

```
void handler(
  const boost::system::error_code& error, // Result of operation.

  std::size_t bytes_transferred           // Number of bytes copied into the
                                          // buffers. If an error occurred,
                                          // this will be the  number of
                                          // bytes successfully transferred
                                          // prior to the error.
); 
```

回调的第二个参数将是读取的字节数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T17:06:26.337

读取完成后，异步读取函数调用“处理程序”函数（或函数对象）。传输的字节数被传递给该函数；函数的签名必须是：

```
void handler(
    const boost::system::error_code& error, // Result of operation.
    std::size_t bytes_transferred           // Number of bytes read.
); 
```

[此处](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/ReadHandler.html)记录了读取处理程序的要求

# c++ - Visual Studio 2008 crashes when I try to open Resource View. How do i fix it?

> ID：16152624
> 
> 赞同：0
> 
> 时间：2013-04-22T17:01:02.213
> 
> 标签：c++, visual-studio, visual-studio-2008, porting, visual-c++-6

I am migrating a project from Visual Studio 6 to Visual Studio 9\. The project is building and displaying correctly, but Visual Studio crashes if I try to open the resource view to edit the dialogs. The crashing was happening prior to me attemting to edit the text files directly, but the only change I made to the files is I removed `DS_MODALFRAME` from the dialogs.

Has anyone encoutered this issue before? How did you fix it?

I am not sure this will help much, but here is what debug spit out when I ran it on Visual Studio after the crash.

```
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\advapi32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\msvcrt.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\sechost.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\rpcrt4.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\sspicli.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\cryptbase.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\gdi32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\user32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\lpk.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\usp10.dll'
'devenv.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.6161_none_50934f2ebcb7eb57\msvcr90.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\shell32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\shlwapi.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\ole32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\oleaut32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\msimg32.dll'
'devenv.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.windows.gdiplus_6595b64144ccf1df_1.1.7601.17825_none_72d273598668a06b\GdiPlus.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\imm32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\msctf.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\mscoree.dll'
'devenv.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscoreei.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\uxtheme.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\profapi.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\clbcatq.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\msenv.dll'
'devenv.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.atl_1fc8b3b9a1e18e3b_9.0.30729.6161_none_51cd0a7abbe4e19b\ATL90.dll'
'devenv.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_41e6975e2bd6f2b2\comctl32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\version.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\sxs.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\1033\msenvui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\1033\msenvmui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\1033\vcpkgui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\1033\VCProjectUI.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\SysWOW64\urlmon.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\wininet.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\iertutil.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\crypt32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\msasn1.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\dwmapi.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\VS SCC\VssProviderStub.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\VS SCC\1033\VssProviderStubui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\SysWOW64\cryptsp.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\rsaenh.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\RpcRtRemote.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Common Files\microsoft shared\VS7Debug\coloader80.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Tools\VDT\1033\vdt80pui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\1033\Microsoft.VisualStudio.QualityTools.TestCaseManagementUI.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\VS SCC\1033\VssProviderui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\Debugger\1033\vsdebugui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\vslog.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\1033\vslogui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\custsat.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\msenvmnu.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Common Files\microsoft shared\VS7Debug\msdbg2.dll'
'devenv.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll'
'devenv.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.6195_none_d09154e044272b9a\msvcr80.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\mscorlib\7150b9136fad5b79e88f6c7f9d3d2c39\mscorlib.ni.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.CommonIDE\9.0.0.0__b03f5f7f11d50a3a\microsoft.visualstudio.commonide.dll'
'devenv.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorjit.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\System\369f8bdca364e2b4936d18dea582912c\System.ni.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\System.Drawing\eead6629e384a5b69f9ae35284b7eeed\System.Drawing.ni.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\System.Windows.Forms\cb562e2e4f74ae607f1186f6ec50cec7\System.Windows.Forms.ni.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\Microsoft.VisualStu#\e9a7669b967ee967fc5da55aff381040\Microsoft.VisualStudio.ni.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\WindowsCodecs.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\apphelp.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\EhStorShell.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\setupapi.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\cfgmgr32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\devobj.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\propsys.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Office\Office14\GROOVEEX.DLL'
'devenv.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.6161_none_50934f2ebcb7eb57\msvcp90.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Common Files\microsoft shared\OFFICE14\Cultures\OFFICE.ODF'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Office\Office14\1033\GrooveIntlResource.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\ntshrui.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\srvcli.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\cscapi.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\slc.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\VS SCC\VssProvider.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\ProjectAggregator.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\VCProject.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\secur32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\ws2_32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\nsi.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Common Files\microsoft shared\MSEnv\msenvp.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\VCProjectEngine.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\mpr.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\msxml6.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\dnsapi.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\IPHLPAPI.DLL'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\winnsi.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\mshtml.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\psapi.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\msls31.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\VCProjectWCEPlatform.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\ntmarta.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\Wldap32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\mlang.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\vcpkg.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin\atlprov.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\Debugger\vsdebug.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\1033\msvb7ui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\Debugger\encmgr.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\Debugger\ecbuild.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\wsock32.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\Compsvcspkg.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\1033\compsvcspkgui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.Shell\2.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Shell.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\GAC\Microsoft.VisualStudio.Shell.Interop\7.1.40304.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Shell.Interop.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\assembly\GAC\Microsoft.VisualStudio.OLE.Interop\7.1.40304.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.OLE.Interop.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\assembly\GAC\Microsoft.VisualStudio.Shell.Interop.8.0\8.0.0.0__b03f5f7f11d50a3a\microsoft.visualstudio.shell.interop.8.0.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\Microsoft.Internal.#\1517ad5adc48f82780125ff81b17a475\Microsoft.Internal.VisualStudio.Shell.Interop.9.0.ni.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\assembly\GAC\Microsoft.VisualStudio.VSHelp80\8.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.VSHelp80.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\Microsoft.VisualStu#\1867791c5e29e2f2b3a432b40df41efc\Microsoft.VisualStudio.Shell.Interop.9.0.ni.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\System.Design\31a8f96f8939ac18a867ee26cc37eda8\System.Design.ni.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\System.Xml\f687c43e9fdec031988b33ae722c4613\System.Xml.ni.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\System.Configuration\195a77fcc6206f8bb35d419ff2cf0d72\System.Configuration.ni.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\rasapi32.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\rasman.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\rtutils.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\mswsock.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\WSHTCPIP.DLL'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\wship6.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\winhttp.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\webio.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\PeerDist.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\userenv.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\authz.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\credssp.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\dhcpcsvc6.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\dhcpcsvc.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Internet Explorer\ieproxy.dll'
'devenv.exe': Loaded 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\alink.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\mspdbcore.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\feacp.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\mspdb80.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\compluslm.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\vsmacros.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\1033\vsmacrosui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\SysWOW64\powrprof.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Common Files\microsoft shared\MSEnv\VsLogP.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\Xml\Microsoft.XmlEditor.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\NativeImages_v2.0.50727_32\Microsoft.VisualStu#\865b6992e3b8f37c0d481ab2cd21b5af\Microsoft.VisualStudio.Shell.9.0.ni.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.Package.LanguageService.9.0\3.5.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Package.LanguageService.9.0.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\GAC\Microsoft.VisualStudio.TextManager.Interop\7.1.40304.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.TextManager.Interop.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\assembly\GAC\Microsoft.VisualStudio.TextManager.Interop.8.0\8.0.0.0__b03f5f7f11d50a3a\microsoft.visualstudio.textmanager.interop.8.0.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.XmlEditor\3.5.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.XmlEditor.dll'
'devenv.exe': Loaded 'C:\Windows\assembly\GAC\EnvDTE\8.0.0.0__b03f5f7f11d50a3a\envdte.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Windows\assembly\GAC\Microsoft.VisualStudio.Debugger.Interop\8.0.1.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Debugger.Interop.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\htmled.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\1033\Htmledui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\srcedit.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\1033\Srceditui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\bined.dll'
'devenv.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.mfc_1fc8b3b9a1e18e3b_9.0.30729.6161_none_4bf7e3e2bf9ada4c\mfc90.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\comdlg32.dll'
'devenv.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.mfcloc_1fc8b3b9a1e18e3b_9.0.30729.6161_none_49768ef57548175e\MFC90ENU.DLL', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\1033\reseditui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\resedit.dll'
'devenv.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.vc90.mfc_1fc8b3b9a1e18e3b_9.0.30729.6161_none_4bf7e3e2bf9ada4c\mfc90u.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\Xml\1033\Microsoft.XmlEditorUI.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Common Files\microsoft shared\ink\tiptsf.dll'
'devenv.exe': Loaded 'C:\Windows\SysWOW64\oleacc.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC#\VCSPackages\1033\csprojui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\1033\Microsoft.VisualStudio.EnterpriseTools.ClassDesignerUI.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VB\Bin\1033\msvbprjUI.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\1033\mswebprjui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\1033\Microsoft.VisualStudio.SmartDevice.TestProjectUI.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Packages\1033\vdtflavui.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\SmartDevices\Projects\1033\SmartDeviceProjectUI.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\1033\Microsoft.VisualStudio.QualityTools.Tips.TuipPackageUI.dll', Binary was not built with debug information.
'devenv.exe': Loaded 'C:\Program Files (x86)\Common Files\microsoft shared\MSEnv\msenv90p.dll'
'devenv.exe': Loaded 'C:\Program Files\Microsoft SDKs\Windows\v6.0A\Bin\RcDll.Dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\rcxdti.dll'
'devenv.exe': Loaded 'C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcpackages\1033\rcxdtiui.dll', Binary was not built with debug information.
The thread 'Win32 Thread' (0x1f28) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x1fe0) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0xba4) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0xf58) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x43c) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x1c88) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0xb70) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x16d4) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x1f34) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0xc30) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0xef0) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x15bc) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x17c) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x12ac) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x172c) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x890) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x1c24) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0xd54) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x1994) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x1624) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x1ef4) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x1de8) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x14e0) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0xdc0) has exited with code -1073740791 (0xc0000409).
The thread 'Win32 Thread' (0x1d80) has exited with code -1073740791 (0xc0000409).
The program '[4000] devenv.exe: Native' has exited with code -1073740791 (0xc0000409). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T17:25:00.310

解决方案是删除 (project).rc 文件中的 #include "newres.h"。我还不确定这样做是否有任何缺点。

```
#define  APSTUDIO_READONLY_SYMBOLS
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 2 resource.
//

#include  "afxres.h"
//#include "newres.h"

/////////////////////////////////////////////////////////////////////////////

#undef  APSTUDIO_READONLY_SYMBOLS 
```

# javascript - Round up numbers with residue

> ID：16152627
> 
> 赞同：0
> 
> 时间：2013-04-22T17:01:08.357
> 
> 标签：javascript, jquery, math

This code rounds up only the subvalues bigger or equal to 5:

```
Math.round(2.5) = 3
Math.round(2.4) = 2 
```

I would like to get the following:

```
Math.round(2.0000000001) = 3
Math.round(2.0) = 2 
```

How do I round up any integer with non-zero residue?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T17:01:54.153

你应该使用[`Math.ceil`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil)：

```
Math.ceil(2.0000000001) = 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T17:02:13.077

使用[**Math.ceil**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil)：

```
Math.ceil(2.0000000001) === 3; // true 
```

但请注意，某些数字不会在内部表示为大于 2 的数字，即使它们看起来像这样：

```
Math.ceil(2.000000000000001) === 3;  // true
Math.ceil(2.0000000000000001) === 3; // false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:02:34.687

试试[**Math.ceil**](http://www.w3schools.com/jsref/jsref_ceil.asp) -`Math.ceil(2.0000000001)`

> ceil() 方法将数字向上舍入到最接近的整数

[演示](http://jsfiddle.net/mohammadAdil/x7adn/)

# android - Call Fragments onCreateView in context with Tabs

> ID：16152632
> 
> 赞同：0
> 
> 时间：2013-04-22T17:01:32.317
> 
> 标签：android, tabs, android-fragments

I have 2 Tabs and 2 Corresponding Fragments. On calling the LAUNCH Activity both Tabs were added and then the first one added will be shown. Thus the first Fragments onCreateView is called the second Fragments ones not.
In my case this is an issue because the first Fragment has to call methods on the second Fragment. Inside the second Fragment there is an Objectreference which will be set by calling the onCreateView in the second Fragment. Therefore I used following code snippet to solve this

```
actionBar.setSelectedNavigationItem(1);
actionBar.setSelectedNavigationItem(0); 
```

It works but in my opinion there must be another possibility to solve this issue. Like calling the onCreateView of the second Fragment?

Here is the relevant code snippet. The listener is implemented as in android-dev Sample only with small changes not affecting my issue.

simplexFragment corresponds to the first Fragment
graphicFragment corresponds to the second Fragment

```
// adds two tabs
actionBar.addTab(actionBar.newTab().setText("Input").setTabListener(new TabListener(null,  "input_fragment")));

graphicFragment = new GraphicFragment();

actionBar.addTab(actionBar.newTab().setText("Graphic").setTabListener(new TabListener(graphicFragment, "graphic_fragment")));
simplexFragment.setGraphics(graphicFragment); // sets the internal reference!

actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

// selects the Tab so the GraphicFragments onCreateView will be called
actionBar.setSelectedNavigationItem(1);
actionBar.setSelectedNavigationItem(0); 
```

Thanks for support.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:43:15.070

> 就我而言，这是一个问题，因为第一个 Fragment 必须调用第二个 Fragment 上的方法。

这不是应该如何`Fragments`工作的。这个想法是一个`Fragment`应该是独立的和可重用的，一个人`Fragment`不应该知道另一个存在（或者至少不应该依赖任何其他的存在`Fragment`）。

例如，假设您有 3 个`Fragments`并且 ActivityA 使用 FragmentA 和 FragmentB，但您有另一个`Activity`(ActivityB) 使用 FragmentA 和 FragmentC。在这种情况下，FragmentA 不知道另一个`Fragment`是什么（B 或 C），甚至不应该期望有另一个`Fragment`。

实现您想要的方法是在 上使用回调方法`Activity`并让它对任何其他`Fragments`（如果它们存在）执行操作。它可以通过在另一个上调用公共方法或在创建另一个时`Fragments`在“参数”中传递数据来做到这一点。`Bundle``Fragments`

# python - 在Python列表中按值对字典中的键进行排序

> ID：16152634
> 
> 赞同：5
> 
> 时间：2013-04-22T17:01:35.270
> 
> 标签：python, list, sorting, dictionary

我已经看过[这篇文章](https://stackoverflow.com/questions/613183/python-sort-a-dictionary-by-value)和[这篇文章](https://stackoverflow.com/questions/72899/in-python-how-do-i-sort-a-list-of-dictionaries-by-values-of-the-dictionary)以及许多其他文章，但还没有完全找到我的问题的答案，也无法弄清楚。

我有一本列表字典。例如，它看起来像：

```
Dict = {'a':[1,2,3,4], 'b':[9,8,7,6], 'c':[8,5,3,2]} 
```

我想返回基于列表中特定项目排序（降序/反向）的键列表。例如，我想根据每个列表中的第 4 项对 a、b、c 进行排序。

这应该返回`sorted_keys = ['b','a','c']`按值排序的列表`[6,4,2]`。

说得通？请帮助...谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T17:02:44.720

提供一个`key`函数，a`lambda`是最简单的，并且排序相反：

```
sorted(Dict.keys(), key=lambda k: Dict[k][3], reverse=True) 
```

key 函数告诉`sorted`排序*依据*；给定键值中的第 4 项。

演示：

```
>>> sorted(Dict.keys(), key=lambda k: Dict[k][3], reverse=True)
['b', 'a', 'c'] 
```

# file - 将最新日志文件从服务器复制到客户端系统然后重命名的批处理脚本

> ID：16152635
> 
> 赞同：0
> 
> 时间：2013-04-22T17:01:35.440
> 
> 标签：file, logging, batch-file, xcopy, renaming

我正在尝试设置一个批处理脚本，它将最新的 IIS 日志从我们的 Exchange 客户端访问服务器复制到我的系统。这样我就可以分析日志，同时将原始日志文件保留在服务器上。

所以我需要让脚本只复制最新的日志文件，然后将日志文件重命名为 cas1Log.log

我知道我必须使用 xcopy，我只是不知道如何只复制最新的文件。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:00:50.647

鉴于您有权访问该文件夹，这应该可以工作：

```
@echo off
set "target=c:\local folder"
set "source=\\server\share\logfolder"
pushd "%source%"
for /f "delims=" %%a in ('dir *.log /b /od /a-d') do set "logfile=%%a"
copy /b "%logfile%" "%target%\cas1Log.log"
popd 
```

# ios - 发送到 Apple 设备的电子邮件有时链接已损坏

> ID：16152636
> 
> 赞同：1
> 
> 时间：2013-04-22T17:01:49.460
> 
> 标签：ios, character-encoding, html-email, email-client

我的公司发送了各种新闻通讯（当然，所有通讯都符合双重选择加入和 CAN-SPAM 标准），但我们遇到了 Apple 设备的问题。电子邮件中的所有链接都以几乎相同的方式损坏，但所有其他代码/内容保持不变。以下是一些关键信息：

*   到目前为止，我们只在 Apple 产品（iPad、iPhone）上看到过这种情况
*   并非同一设备上的每个用户都有问题（我们公司的两台 iPad 都没有，但有 iPad 的用户报告了它，所以它可能与 iOS 版本有关）
*   对于它所影响的问题的用户，它不会影响他们收到的每一份时事通讯。此外，要么所有链接都正常工作，要么所有链接都已损坏；从不混合。
*   时事通讯是通过从我们的各种网站中提取文章并将它们插入模板来自动构建的
*   无论使用何种电子邮件服务/客户端，都会发生此问题。例如：通过 gmail 应用程序或在浏览器中通过 gmail.com 从 iPad 使用 gmail 帐户。
*   如果用户使用非 Apple 产品访问同一电子邮件，则链接不会损坏。
*   如果用户将损坏的电子邮件转发给通过非 Apple 设备访问它的人，则损坏仍然存在。

以下是 URL 如何更改的示例：

```
correct:
http://www.example.com/path/link.php?M=5009308&N=21109&L=34170&F=H
corrupted:
http://www.example.com/path/link.php?MQ80105&N!109&L4170&F=H

correct:
http://www.example.com/path/link.php?M=5009308&N=21109&L=34087&F=H
corrupted:
http://www.example.com/path/link.php?MQ80105&N!109&L4087&F=H

correct:
http://www.example.com/path/link.php?M=5009308&N=21109&L=34137&F=H
corrupted:
http://www.example.com/path/link.php?MQ80105&N!109&L4137&F=H 
```

*   所有时事通讯上的所有链接都遵循完全相同的模式。时事通讯和链接之间的唯一区别是查询变量（M、N 和 L）的数字。
*   它只影响 URL 的查询部分
*   当它后跟一个数字时，它似乎以每个 URL 上的“=”符号为中心：
    *   “=5009308”变成了“Q80105”
    *   “=21109”变成了“！109”
    *   “=34137”变成了“4137”

其中一部分似乎是字符编码问题，但您认为它不仅会影响链接的查询部分（即，您会看到 HTML/内容的其他部分中的文本也发生了变化）。

有谁知道是什么导致了这个极其奇怪的错误？任何帮助或想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:46:30.860

至少部分原因是您的邮件服务器和他们的设备之间的某些东西决定您使用[引用的可打印](http://en.wikipedia.org/wiki/Quoted-printable)编码并“修复”它。这将解释`=21`被替换`!`和`=34`被替换`4`。我不知道是什么触发了这种情况，但根据您的描述，我怀疑您的外发电子邮件标题中的某些内容告诉设备它需要执行此操作。如果您的 URL*始终*包含`=`但仅在某些时候损坏，则您的标头可能不一致。如果 URL 只包含`=`某些时间并且每次都损坏，那么问题总是存在，但只有在正确的数据中可见。

[在在线引用的可打印解码器](http://www.convertstring.com/EncodeDecode/QuotedPrintableDecode)上尝试您的原始 URL ，您将获得完全相同的更改。

# iphone - 如何在部分中为特定行滑动 tableviewcell

> ID：16152640
> 
> 赞同：2
> 
> 时间：2013-04-22T17:02:06.570
> 
> 标签：iphone, ios, objective-c, uitableview, uiswipegesturerecognizer

我有一个习惯`UITableview`，它深入到各个部分，我已经实现`UISwipeGestureRecognizer`了它。当我滑动我的表格视图单元格时，会`UIButton`出现一个。我现在面临的问题是，当我滑动第一个表格视图单元格时，连续部分中的另一个单元格也可以识别滑动手势。我无法找到如何在不刷其他部分的其他单元格的情况下滑动特定部分的单元格。

我只想滑动，不想删除/插入或添加复选标记。

**更新**.... 这是我的**customCell.m Tableview = customTableView**

```
 - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
        {
            self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
            if (self)
            {
                self.backgroundColor = [UIColor clearColor];
                self.contentView.backgroundColor = [UIColor clearColor];

                self.symptomCellImageView.contentMode=UIViewContentModeScaleToFill;

                swipeButton = [[UIButton alloc]init];
                swipeButton .frame = CGRectMake(220.0, 8.0, 30.0, 30.0);
                swipeButton .hidden = NO;

} 
```

**在我的 MainViewController.m**

```
 -(void)viewDidLoad
    {        

         symptomSwipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeHandleLeft)];
         symptomSwipeLeft .numberOfTouchesRequired = 1;
         symptomSwipeLeft .direction = UISwipeGestureRecognizerDirectionLeft;
         [customTableView addGestureRecognizer:symptomSwipeLeft];
         [self addGestureRecognizer:symptomSwipeRight];

          symptomSwipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeHandleRight)];
           symptomSwipeRight.numberOfTouchesRequired = 1;
           symptomSwipeRight.direction = UISwipeGestureRecognizerDirectionRight;
           [customTableView addGestureRecognizer:symptomSwipeRight];
           [self addGestureRecognizer:symptomSwipeRight];

    }

- (void)swipeHandleLeft:(UISwipeGestureRecognizer *)aSwipeGestureRecognizer
{
     CGPoint location = [aSwipeGestureRecognizer locationInView:customTableView ];
     NSIndexPath * indexPath = [customTableView indexPathForRowAtPoint:location];

     if(indexPath)
{
        UITableViewCell * cell = (UITableViewCell *)[customTableView cellForRowAtIndexPath:indexPath];
       [cell.swipeButton addTarget:self action:@selector(secondPageButton:) forControlEvents:UIControlEventTouchUpInside];

              }
}

- (void)swipeHandleRight:(UISwipeGestureRecognizer *)aSwipeGestureRecognizer
 {
     CGPoint location = [aSwipeGestureRecognizer locationInView:customTableView ];
     NSIndexPath * indexPath = [customTableViewindexPathForRowAtPoint:location];

     if(indexPath)
{
       UITableViewCell * cell = (UITableViewCell *)[customTableView cellForRowAtIndexPath:indexPath];
        [cell.swipeButton addTarget:self action:@selector(secondPageButton:) forControlEvents:UIControlEventTouchUpInside];
              }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:08:12.657

尝试：

```
- (void)handleSwipe:(UISwipeGestureRecognizer *)aSwipeGestureRecognizer; {
  CGPoint location = [aSwipeGestureRecognizer locationInView:_tableView];
  NSIndexPath * indexPath = [_tableView indexPathForRowAtPoint:location];

  if(indexPath){
    UITableViewCell * cell = (UITableViewCell *)[_tableView cellForRowAtIndexPath:indexPath];
    [cell whateverMethodYouWant];
  }
} 
```

附带说明一下，您接到多个单元格的调用的原因是该行不够独特。你们所有的部分都有一个`row = 0`。因此，如果您希望每个单元格的`.tag`属性附加一个唯一编号，您需要知道任何部分中的最大行数（调用它`largestNumberOfRows`），然后计算：

`cell.swipeButton.tag = (indexPath.section * largestNumberOfRows) + indexPath.row;`

希望有帮助！

***编辑：***

要使用上述方法，请在您的`viewDidLoad;`方法中添加以下代码：

```
UISwipeGestureRecognizer * recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipe:)];
[recognizer setDirection:(UISwipeGestureRecognizerDirectionRight | UISwipeGestureRecognizerDirectionLeft)];
[_tableView addGestureRecognizer:recognizer]; 
```

***编辑 2***

查看您的代码，您将手势识别器放入了错误的文件中。这是设置：

在您的`MainViewController.m`文件中：

```
- (void)viewDidLoad; {
  [super viewDidLoad];
  UISwipeGestureRecognizer * recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipe:)];
  [recognizer setDirection:(UISwipeGestureRecognizerDirectionRight | UISwipeGestureRecognizerDirectionLeft)];
  [_tableView addGestureRecognizer:recognizer];
}

- (void)handleSwipe:(UISwipeGestureRecognizer *)aSwipeGestureRecognizer; {
  CGPoint location = [aSwipeGestureRecognizer locationInView:_tableView];
  NSIndexPath * indexPath = [_tableView indexPathForRowAtPoint:location];

  if(indexPath){
    UITableViewCell * cell = (UITableViewCell *)[_tableView cellForRowAtIndexPath:indexPath];

    if(aSwipeGestureRecognizer.direction == UISwipeGestureRecognizerDirectionRight){
      [cell symptomCellSwipeRight];
    }
    else if(aSwipeGestureRecognizer.direction == UISwipeGestureRecognizerDirectionLeft){
      [cell symptomCellSwipeLeft];
    }
  }
}

- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath; {
  // Initial your cell. Then add:
  [cell.swipeButton addTarget:self action:@selector(secondPageButton:) forControlEvents:UIControlEventTouchUpInside];
} 
```

在您的`PPsymptomTableCell.m`文件中：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier; {
  if((self = [super initWithStyle:style reuseIdentifier:reuseIdentifier])){
    self.backgroundColor = [UIColor clearColor];
    self.contentView.backgroundColor = [UIColor clearColor];

    self.symptomCellImageView.contentMode=UIViewContentModeScaleToFill;

    // SHARE ON FACEBOOK BUTTON //

    shareFacebookButton = [[UIButton alloc]init];
    shareFacebookButton.frame = CGRectMake(220.0, 8.0, 30.0, 30.0);
    shareFacebookButton.hidden = NO;

    // DISPLAY NOTIFICATION IMAGE //

    selectedCellImageDisplay = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"selectedSymptomImage.png"]];
    selectedCellImageDisplay.frame = CGRectMake(240.0, 8.0, 30.0, 30.0);

    // SYMPTOM NAME //

    symptomCellLabel=[[UILabel alloc]initWithFrame:CGRectMake(15.0,0.0 ,280.0,40.0)];
    symptomCellLabel.font=[UIFont fontWithName:@"Rockwell" size:17];
    symptomCellLabel.textColor=[UIColor blackColor];
    symptomCellLabel.backgroundColor=[UIColor clearColor];

    [self.contentView addSubview:symptomCellLabel];
    [self.contentView addSubview:selectedCellImageDisplay];
    [self.contentView addSubview:shareFacebookButton];
  }
  return self;
}

- (void)symptomCellSwipeLeft; {
  [UIView beginAnimations:@"HideView" context:nil];
  symptomCellLabel.frame = CGRectMake(-183.0, 0.0, 280.0, 40.0);
  selectedCellImageDisplay.frame = CGRectMake(-340.0, 8.0, 30.0, 30.0);
  shareFacebookButton.frame = CGRectMake(120.0, 8.0, 80.0, 30.0);
  shareFacebookButton.hidden = NO;
  shareFacebookButton.backgroundColor = [UIColor redColor];

  [UIView setAnimationDuration:0.3f];
  [UIView commitAnimations];
}

- (void)symptomCellSwipeRight; {
  [UIView beginAnimations:@"HideView" context:nil];
  symptomCellLabel.frame = CGRectMake(15.0,0.0 ,280.0,40.0);
  selectedCellImageDisplay.frame = CGRectMake(240.0, 8.0, 30.0, 30.0);
  shareFacebookButton.frame = CGRectMake(220.0, 8.0, 30.0, 30.0);
  shareFacebookButton.hidden = YES;

  [UIView setAnimationDuration:0.3f];
  [UIView commitAnimations];
} 
```

这应该让一切正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:23:30.970

您正在使用 实现您的表格`sections`，然后将您的标签值设置为`indexPath.sections`和的组合`indexPath.row`。

但请确保您在没有重叠 tagValue 的情况下实施。

# javascript - JavaScript - 使用正则表达式组提取

> ID：16152641
> 
> 赞同：1
> 
> 时间：2013-04-22T17:02:09.087
> 
> 标签：javascript, regex

是否可以提取字符串的正则表达式组值模式？

例如，下面的代码给出

```
var str = "alpha bravo charlie delta";
var regex = /\s(\w+)\s(\w+)/
var value = str.replace(regex, "$1_$2"); // Gives alphabravo_charlie delta 
```

我正在寻找的是类似的东西，

```
var value = str.extract(regex, "$1_$2"); // Which should give bravo_charlie 
```

虽然`str.extract`不存在，但有没有其他方法可以获得相同的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:03:54.630

你可以这样做：

```
var str = "alpha bravo charlie delta";
var regex = /\s(\w+)\s(\w+)/;
var value = "";
str.replace(regex, function($0, $1, $2){
    value = $1 + "_" + $2;
});

alert(value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:05:16.697

您可以使用 String.match()

```
var array = str.match(regex); 
```

# jquery - 将美元符号 ($) 传递给函数

> ID：16152647
> 
> 赞同：2
> 
> 时间：2013-04-22T17:02:28.510
> 
> 标签：jquery

我正在使用一些其他人编写的类似于以下代码的 jquery，并且想知道为什么应该将美元符号传递给 javascript updateTextareas 函数。

它使用 2 个参数：$、$textareas。似乎只使用一个参数（$textareas）就可以正常工作。

我试图弄清楚为什么作者会在下面的 updateTextareas 函数中将 $ 作为第一个参数传递：

```
( function($) 
{
    // why would the first argument ($) need to be passed here?
    function updateTextareas($, $textareas)
    {
        $textareas.each(function()
        {
            alert($(this).val());
        });
    }   

    // document ready
    $(function()
    {
        updateTextareas($, $('textarea.bio') );
});
} )(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:13:09.563

在函数定义点：

```
function updateTextareas($, $textareas) 
```

的值`$`已经在当前作用域中定义（作为参数传递给外部函数），所以在这里再次传递它是完全没有用的，可以省略。

`(function($) { ... }(jQuery));`顺便说一句，当函数在包装器之外定义时，它可能曾经是必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:05:10.230

这样这样的代码或其他插件可以与其他可能已经使用美元符号的 Javascript 库一起使用。在这种情况下，如果没有对重命名 jQuery 的灵活支持（基本上），您会遇到冲突。

当然，作者本来可以根本不使用`$`，只是在`jQuery`任何地方使用，这也可以绕过整个问题 - 但尽可能使用`$`的好处是它简短而简洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:05:51.303

这个想法是，这将允许你传递一个“外观”或另一个像 jQuery 一样工作的函数。例如，这可以用于单元测试。

但是，老实说，这有点开销，我不建议这样做。它基本上是无用的，并且有更简单的方法来实现单元测试。

# websocket - Jmeter 的 WebSocket 插件

> ID：16152648
> 
> 赞同：10
> 
> 时间：2013-04-22T17:02:29.783
> 
> 标签：websocket, jmeter, jmeter-plugins

有人可以与我分享 JMeter 的 Websocket 协议插件采样器的链接吗？

我尝试从以下链接安装：[https](https://github.com/kawasima/mod_proxy_websocket) ://github.com/kawasima/mod_proxy_websocket 。
但不确定如何获得。

我是该工具的新手。
感谢和赞赏。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-22T18:19:10.007

您问题中的链接看起来不是针对 jmeter 插件，而是针对 Apache http 服务器的代理模块。
正确的链接似乎是[https://github.com/kawasima/jmeter-websocket](https://github.com/kawasima/jmeter-websocket) - WebSocket 协议的 jmeter 插件。

要使用它，您必须：

*   下载项目资源；
*   使用 maven 构建 ApacheJMeter_WebSocket.jar；
*   将罐子放入`$JMETER_HOME/lib/ext/`目录。

* * *

使用 maven 3.0 ( `mvn validate compile package`) 从源代码成功构建的 Jar 文件：

*   [ApacheJmeter_websocket-0.1.0-SNAPSHOT.jar](https://dl.dropboxusercontent.com/u/89045969/jmeter/ApacheJmeter_websocket-0.1.0-SNAPSHOT.jar)
*   [ApacheJmeter_websocket-dist-0.1.0-SNAPSHOT.jar](https://dl.dropboxusercontent.com/u/89045969/jmeter/ApacheJmeter_websocket-dist-0.1.0-SNAPSHOT.jar) - 带有依赖项。

采样器列表中可用的 WebSocket 采样器：

[![在此处输入图像描述](https://i.stack.imgur.com/qxWed.png)](https://i.stack.imgur.com/qxWed.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-16T19:02:12.720

这是 JMeter 的另一个 WebSocket 插件。它支持 WebSocket 协议的 RFC6455 (v13)。

链接：[https ://github.com/maciejzaleski/JMeter](https://github.com/maciejzaleski/JMeter)

特征：

*   支持 HTTS/HTTPS (ws/wss) 版本的 WebSocket 协议
*   忽略 SSL 证书错误的选项
*   流式传输允许单个连接在测试期间保持打开状态
*   响应必须匹配预定义的正则表达式
*   响应超时
*   响应消息积压（从多个服务器消息构建采样器响应）
*   如果服务器发送匹配预定义正则表达式的消息，连接可能会关闭

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-23T21:20:35.770

这是另一个（相当新的）JMeter WebSocket 插件： [https](https://bitbucket.org/pjtr/jmeter-websocket-samplers) ://bitbucket.org/pjtr/jmeter-websocket-samplers 。

查看当前功能的自述文件；它仍在积极开发中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-10T11:50:32.570

我不能评论以前的帖子。但是这个插件在运行大量线程时存在一个并发问题。我收到了这个错误：

```
[Problems]
 - Unexpected error: null
java.util.LinkedList$ListItr.checkForComodification(LinkedList.java:953)
java.util.LinkedList$ListItr.next(LinkedList.java:886)
JMeter.plugins.functional.samplers.websocket.ServiceSocket.getResponseMessage(ServiceSocket.java:125)
JMeter.plugins.functional.samplers.websocket.WebSocketSampler.sample(WebSocketSampler.java:156)
org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:429)
org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:257)
java.lang.Thread.run(Thread.java:744) 
```

所以我只是替换了ServiceSocket.java中的一行：

```
protected Deque<String> responeBacklog = new LinkedList<String>(); 
```

用这条线：

```
Queue<String> responeBacklog = new ConcurrentLinkedQueue<String>(); 
```

它解决了我的问题:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-07T13:13:47.023

如果您是 Jmeter 新手，则无需花费大量时间学习 Jmeter UI 和功能来进行 websocket 负载测试。我们现在有一个专门的工具来对 websocket 进行负载测试。它被命名为[雷神](https://github.com/observing/thor)。

感谢开发人员使其变得简单、轻量和开源。

# jquery - JQueryUI AutoComplete w/ Multi-Select - 删除选择

> ID：16152649
> 
> 赞同：2
> 
> 时间：2013-04-22T17:02:34.047
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete, multi-select

我正在使用带有多选功能的 JQuery Auto-Complete 小部件，如以下小提琴所示：http: [//jsfiddle.net/Z26yv/](http://jsfiddle.net/Z26yv/)。

这是代码：

```
<label>Teams:</label>
<input type="text" id="teams" />
<br />
<br />
<label>Team IDs:</label>
<input id="team_ids" />

$(function() {
        var availableTags = [
            {label: "Choice1", value: "Choice1", db: 1},
            {label: "Choice2", value: "Choice2", db: 2},
            {label: "Choice3", value: "Choice3", db: 3},
            {label: "Choice4", value: "Choice4", db: 4},
            {label: "Choice5", value: "Choice5", db: 5},
            {label: "Choice6", value: "Choice6", db: 6},
            {label: "different text", value: "different text", db: 7},
        ];

        function split(val) {
            return val.split(/,\s*/);
        }

        function extractLast(term) {
            return split(term).pop();
        }

        $("#teams")
        //don't navigate away from the field on tab when selecting an item
        .bind("keydown", function(event) {
            if (event.keyCode === $.ui.keyCode.TAB && $(this).data("ui-autocomplete").menu.active) {
                event.preventDefault();
            }
        })
        .autocomplete({
            minLength: 0,
            source: function(request, response) {
                //delegate back to autocomplete, but extract the last term
                response($.ui.autocomplete.filter(availableTags, extractLast(request.term)));
            },
            focus: function() {
                //prevent value inserted on focus
                return false;
            },
            select: function(event, ui) {
                var terms = split(this.value);
                //remove the current input
                terms.pop();
                //add the selected item
                terms.push(ui.item.value);
                //add placeholder to get the comma-and-space at the end
                terms.push("");
                this.value = terms.join(", ");

                $('#team_ids').val($('#team_ids').val() + "," + ui.item.db);
                return false;
            }
        });
    }); 
```

这个想法是用户将进行一个或多个选择，并且每次将所选项目的 ID 添加到（隐藏）字段中。我遇到的问题是如果他们删除选择会发生什么？由于它是一个文本框，因此用户只需退格/删除一个团队，并且自动完成中似乎没有事件可以捕捉到这一点。JQueryUI 自动完成 API 在这里：[http ://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)

也许我需要利用更改事件，并以某种方式提取当前选定值的 ID？我不完全确定该怎么做。

另外，关于从搜索中删除选定选项的任何想法？我想我必须从 availableTags 数组中删除一个选定的选项，然后如果它未被选中，则将其添加回来。

谢谢您的帮助。

# language-agnostic - 表示 GPS 轨迹集合的数据结构（对象）的正确名称是什么

> ID：16152652
> 
> 赞同：0
> 
> 时间：2013-04-22T17:02:37.713
> 
> 标签：language-agnostic, gps, naming-conventions, ooad

我想为个人使用实现一个表示 GPS 数据的结构化集合的对象。

目前，有很多文件格式来表示这些数据，所有这些格式都有一些小的变化：

*   跟踪点将是一个 4 元素元组，表示固定顺序的序列`(latitude, longitude, elevation, timestamp)`。
*   跟踪段是跟踪点的序列（有序集合），按时间戳排序，表示一条连续的线。
*   轨道是轨道段的有序集合，按“创建时间戳”排序，表示不连续的线（或给定顺序的多条连续线）。

我的问题是：“从面向对象的设计良好实践的角度来看，我应该如何命名一个类来代表一个（不一定是有序的）轨道集合”？

例如，假设我有一个 GPX 文件和一个 KML 文件，并且我想将两者都保存到一个 JSON 文件中，那么 API 调用将是：

```
kmldata = new GPS_Data("somefile.kml");
gpxdata = new GPS_Data("somefile.gpx");
merged = GPS_Lib.merge(kmldata, gpxdata);
merged.save_to_json("somefile.json"); 
```

我觉得“GPS_Data”太宽泛了。此外，这将是通常序列化为文件的结构，但“GPS_File”过多地涉及持久性的实现，但这是对象的偶然使用（序列化到磁盘），而不是它的定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:34:15.250

通常您将曲目存储在曲目列表中。
所以你可以称它为 Tracks 或 TrackList。

更一般地，您只需使用复数词来表示该集合的元素：单数：“track”复数“tracks”

在java中这将是

```
List<Track> tracks. 
```

# ios - 无法加载我的世界，加载架构师：//architect.js 时出现问题

> ID：16152654
> 
> 赞同：1
> 
> 时间：2013-04-22T17:02:42.057
> 
> 标签：ios, cordova, phonegap-plugins, wikitude

我能够在 iOS 的 Wikiitude PhoneGap 插件包中运行 HelloWorld 示例。

然而，当我小心地将必要的文件和框架复制到我自己的 vanilla PhoneGap 项目中时，我在尝试加载相同的 HelloWorld 世界时遇到以下情况：

*   每当我离开`<script src="architect://architect.js"></script>`我的代码时，应用程序就会在大的 Wikitude 标志处崩溃（之前是最小化到左下角）
*   当我删除该行时，应用程序不会崩溃，但不会显示 Hello World。

我已经尝试加载 ade.js，但我现在明白 D 代表桌面。我已经在我的 Mac 和互联网上寻找了 architect.js 文件，但找不到它。我不明白示例项目和我的项目有什么区别。

任何人都可以帮助我在自己的项目中获得一个世界吗？

（我在这里也问过这个问题（[http://forum.wikitude.com/home/-/message_boards/message/260302](http://forum.wikitude.com/home/-/message_boards/message/260302)）。我会在任何我发布问题的地方发布我得到的任何答案，并附上原始答案的链接给予者）

为了完整起见，这是来自 HelloWorld 世界的代码：

```
 <!-- Include the ARchitect library -->
    <script src="architect://architect.js"></script>

    <script type="text/javascript">
       var label = null;

        function createLabelAtLocation(geoLocation)
        {
            label = new AR.Label("No Text", 2, {onClick : function(){
                                        document.location = 'architectsdk://labelClick?text='+label.text;
                                     }});

            var geoObject = new AR.GeoObject(geoLocation, {drawables: {cam: label}});
        }

        function setupScene()
        {
            createLabelAtLocation( new AR.RelativeLocation(null, 100, 0, 0) );
        }

        function didReceivedNewTextForLabel(text)
        {
            if(label)
            {
                label.text = text;
            }
        }

        function clickedClose() {
            document.location = 'architectsdk://actionButton?action=close';
        }

        function clickedHide() {
            document.location = 'architectsdk://hideButton?status=hide';
        }

    </script>
</head>

<body onload="setupScene()">

    <!-- Button to close AR view, you may use this to hide arView and navigate back to familiar phoneGap environment -->
    <button title="close" onclick="clickedClose()">Close AR View</button>
    <button title="hide" onclick="clickedHide()">Hide AR View</button>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:37:31.533

我的 Xcode 项目中的问题似乎是链接器标志之一。我有`-Obj-C`，虽然`-ObjC`是必需的。

这个答案由 Andreas Schacherbauer 在维基板上提供：http: [//forum.wikitude.com/home/-/message_boards/message/260302#_19_message_262371](http://forum.wikitude.com/home/-/message_boards/message/260302#_19_message_262371)

# python - 用普通数组填充一个 numpy 数组

> ID：16152659
> 
> 赞同：1
> 
> 时间：2013-04-22T17:02:51.113
> 
> 标签：python, list, numpy

```
connum = np.empty((160,160))
confidence = [2142,213124,23123,34324,4545,56634,343,45435,12312,4543,343] 
```

我有列表`confidence`和 numpy 数组`connum`如何用列表的元素填充 empy numpy 数组`confidence`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T18:51:31.427

如果 confidence 是一个包含 25600 个元素的列表，只需执行以下操作：

```
connum = np.array(confidence).reshape((160,160)) 
```

# python - 从 Python 列表中删除重复值和类似值？

> ID：16152664
> 
> 赞同：0
> 
> 时间：2013-04-22T17:03:14.427
> 
> 标签：python

[这个问题是关于如何在保留顺序的同时从列表中删除重复项](https://stackoverflow.com/questions/480214/how-do-you-remove-duplicates-from-a-list-in-python-whilst-preserving-order)的后续问题？.

我需要从列表中删除重复值或类似值：

我从该问题的答案开始并申请：

```
def f7(seq):
    seen = set()
    seen_add = seen.add
    return [ x for x in seq if x not in seen and not seen_add(x)] 
```

但是当我将它应用于我的数据/数组时：，我得到这显然是错误的，因为粗体的值是相等的，应该删除一个

```
 [(Decimal('1.20149'), Decimal('1.25900')),
 *(Decimal('1.13583'), Decimal('1.07862'))*,
**(Decimal('1.07016'), Decimal('1.17773'))**,
 *(Decimal('1.13582'), Decimal('1.07863'))*,
  (Decimal('1.07375'), Decimal('0.92410')),
  (Decimal('1.01167'), Decimal('1.00900')),
**(Decimal('1.07015'), Decimal('1.17773'))**,
  (Decimal('0.95318'), Decimal('1.10171')),
  (Decimal('1.01507'), Decimal('0.79170')),
  (Decimal('0.95638'), Decimal('0.86445')),
  (Decimal('0.90109'), Decimal('0.94387')),
  (Decimal('0.84900'), Decimal('1.03060'))] 
```

您将如何删除那些相同的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:09:42.790

`seq`从输出看，您传递的似乎包含 2 个元组。虽然元组*内*的值可能相同，但元组本身（它们是序列的元素）却不同，因此不会被删除。

如果您的意图是获得唯一编号的平面列表，您可以先将其展平：

```
seq = [ (1,2), (2,3), (1,4) ]
f7(itertools.chain(*seq))
=> [1, 2, 3, 4] 
```

# antlr - NetBeans 平台语言和 ANTLR 词法分析器

> ID：16152666
> 
> 赞同：4
> 
> 时间：2013-04-22T17:03:20.357
> 
> 标签：antlr, antlr4

如何使 NetBeans LexerInput 适应 ANTLR 的 CharStream。我有下一个实现，但效果不佳。我想通过 ANTLR 词法分析器向 NetBeans 平台添加一种新语言。

Lexer 只发出 EOF，但令牌类型没问题，我不明白。

```
import java.util.ArrayList;
import java.util.List;
import org.antlr.v4.runtime.CharStream;
import org.antlr.v4.runtime.misc.Interval;
import org.netbeans.spi.lexer.LexerInput;

/**
 * @author jonny
 */
public class AntlrCharStream implements CharStream {

    private class CharStreamState {
        int index;
        int line;
        int charPositionInLine;
    }

    private int line = 1;
    private int charPositionInLine = 0;
    private LexerInput input;
    private String name;
    private int index = 0;
    private List<CharStreamState> markers;
    private int markDepth = 0;
    private int lastMarker;

    public AntlrCharStream(LexerInput input, String name) {
        this.input = input;
        this.name = name;
    }

    @Override
    public String getText(Interval intrvl) {
        return input.readText().toString();
    }

    public String substring(int start, int stop) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    public int LT(int i) {
        return LA(i);
    }

    public int getLine() {
        return line;
    }

    public void setLine(int line) {
        this.line = line;
    }

    public void setCharPositionInLine(int pos) {
        this.charPositionInLine = pos;
    }

    public int getCharPositionInLine() {
        return charPositionInLine;
    }

    public void consume() {
        int c = input.read();
        index++;
        charPositionInLine++;

        if (c == '\n') {
            line++;
            charPositionInLine = 0;
        }
    }

    public int LA(int i) {
        if (i == 0) {
            return 0; // undefined
        }

        int c = 0;
        for (int j = 0; j < i; j++) {
            c = read();
        }
        backup(i);
        return c;
    }

    public int mark() {
        if (markers == null) {
            markers = new ArrayList<CharStreamState>();
            markers.add(null); // depth 0 means no backtracking, leave blank
        }
        markDepth++;
        CharStreamState state = null;
        if (markDepth >= markers.size()) {
            state = new CharStreamState();
            markers.add(state);
        } else {
            state = (CharStreamState) markers.get(markDepth);
        }
        state.index = index;
        state.line = line;
        state.charPositionInLine = charPositionInLine;
        lastMarker = markDepth;

        return markDepth;
    }

    public void rewind() {
        rewind(lastMarker);
    }

    public void rewind(int marker) {
        CharStreamState state = (CharStreamState) markers.get(marker);
        // restore stream state
        seek(state.index);
        line = state.line;
        charPositionInLine = state.charPositionInLine;
        release(marker);
    }

    public void release(int marker) {
        // unwind any other markers made after m and release m
        markDepth = marker;
        // release this marker
        markDepth--;
    }

    public void seek(int index) {
        if (index < this.index) {
            backup(this.index - index);
            this.index = index; // just jump; don't update stream state (line, ...)
            return;
        }

        // seek forward, consume until p hits index
        while (this.index < index) {
            consume();
        }
    }

    public int index() {
        return index;
    }

    public int size() {
        return -1; //unknown...
    }

    public String getSourceName() {
        return name;
    }

    private int read() {
        int result = input.read();
        if (result == LexerInput.EOF) {
            result = CharStream.EOF;
        }

        return result;
    }

    private void backup(int count) {
        input.backup(count);
    }
} 
```

```
'[@-1,6:6='<EOF>',<1>,2:2]'
'[@-1,7:7='<EOF>',<1>,2:3]'
'[@-1,8:15='<EOF>',<9>,2:4]'
'[@-1,16:16='<EOF>',<1>,2:12]'
'[@-1,17:23='<EOF>',<8>,2:13]'
'[@-1,24:24='<EOF>',<1>,2:20]'
'[@-1,25:25='<EOF>',<2>,2:21]'
'[@-1,26:26='<EOF>',<1>,3:0]'
'[@-1,27:27='<EOF>',<1>,3:1]'
'[@-1,28:28='<EOF>',<1>,3:2]'
'[@-1,29:29='<EOF>',<1>,3:3]'
'[@-1,30:37='<EOF>',<4>,3:4]'
'[@-1,38:38='<EOF>',<1>,3:12]'
'[@-1,39:43='<EOF>',<5>,3:13]'
'[@-1,44:44='<EOF>',<1>,3:18]'
'[@-1,45:48='<EOF>',<9>,3:19]'
'[@-1,49:49='<EOF>',<1>,3:23]'
'[@-1,50:53='<EOF>',<7>,3:24]'
'[@-1,54:54='<EOF>',<1>,3:28]'
'[@-1,55:56='<EOF>',<6>,3:29]'
'[@-1,57:57='<EOF>',<2>,3:31]'
'[@-1,58:57='<EOF>',<-1>,4:32]' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-14T11:36:01.177

[我也在尝试使用 ANTLR 4 制作一个 NetBeans 插件。这是我在修改该教程](http://wiki.netbeans.org/New_Language_Support_Tutorial_Antlr)`AntlrCharStream`后想出的。到目前为止它对我有用。

```
import org.antlr.v4.runtime.CharStream;
import org.antlr.v4.runtime.misc.Interval;
import org.netbeans.spi.lexer.LexerInput;

public class AntlrCharStream implements CharStream {

    private final LexerInput input;
    private final String name;
    private int index = 0;
    private int markDepth = 0;

    public AntlrCharStream(LexerInput input, String name) {
        this.input = input;
        this.name = name;
    }

    @Override
    public String getText(Interval interval) {
        throw new UnsupportedOperationException("Not supported.");
    }

    @Override
    public void consume() {
        int character = read();
        if (character == EOF) {
            backup(1);
            throw new IllegalStateException("Attempting to consume EOF");
        }
        index++;
    }

    @Override
    public int LA(int lookaheadAmount) {
        if (lookaheadAmount < 0) {
            return lookBack(-lookaheadAmount);
        } else if (lookaheadAmount > 0) {
            return lookAhead(lookaheadAmount);
        } else {
            return 0; //Behaviour is undefined when lookaheadAmount == 0
        }
    }

    private int lookBack(int amount) {
        backup(amount);
        int character = read();
        for (int i = 1; i < amount; i++) {
            read();
        }
        return character;
    }

    private int lookAhead(int amount) {
        int character = 0;
        for (int i = 0; i < amount; i++) {
            character = read();
        }
        backup(amount);
        return character;
    }

    @Override
    public int mark() {
        return ++markDepth;
    }

    @Override
    public void release(int marker) {
        // unwind any other markers made after m and release m
        markDepth = marker;
        // release this marker
        markDepth--;
    }

    @Override
    public void seek(int index) {
        if (index < 0) {
            throw new IllegalArgumentException(String.format("Invalid index (%s < 0)", index));
        }

        if (index < this.index) {
            backup(this.index - index);
            this.index = index;
            return;
        }

        // seek forward, consume until p hits index
        while (this.index < index) {
            consume();
        }
    }

    @Override
    public int index() {
        return index;
    }

    @Override
    public int size() {
        throw new UnsupportedOperationException("Stream size unknown");
    }

    @Override
    public String getSourceName() {
        return name;
    }

    private int read() {
        int result = input.read();
        if (result == LexerInput.EOF) {
            return EOF;
        } else {
            return result;
        }
    }

    private void backup(int count) {
        input.backup(count);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T02:43:54.520

我修改了 Daniel 提出的实现来实现函数 getText。我还修改了索引位置的跟踪方式。到目前为止它对我有用，但由于我没有时间，它仍然需要适当的测试。

```
import org.antlr.v4.runtime.CharStream;
import org.antlr.v4.runtime.misc.Interval;
import org.netbeans.spi.lexer.LexerInput;

public class AntlrCharStream implements CharStream {

  private final LexerInput input;
  private final String name;
  private int index = 0;
  private int markDepth = 0;

  public AntlrCharStream(LexerInput input, String name) {
    this.input = input;
    this.name = name;
  }

  @Override
  public String getText(Interval interval) {
    int start = interval.a;
    int stop = interval.b;

    if (start < 0 || stop < start) {
      return "";
    }

    final int pos = this.index;
    final int length = interval.length();
    final char[] data = new char[length];

    seek(interval.a);
    int r = 0;
    while (r < length) {
      final int character = read();
      if (character == EOF) {
        break;
      }

      data[r] = (char) character;
      r++;
    }
    seek(pos);

    if (r > 0) {
      return new String(data, 0, r);
    } else {
      return "";
    }
  }

  @Override
  public void consume() {
    int character = read();
    if (character == EOF) {
      backup(1);
      throw new IllegalStateException("Attempting to consume EOF");
    }
  }

  @Override
  public int LA(int lookaheadAmount) {
    if (lookaheadAmount < 0) {
      return lookBack(-lookaheadAmount);
    } else if (lookaheadAmount > 0) {
      return lookAhead(lookaheadAmount);
    } else {
      return 0; //Behaviour is undefined when lookaheadAmount == 0
    }
  }

  private int lookBack(int amount) {
    backup(amount);
    int character = read();
    for (int i = 1; i < amount; i++) {
      read();
    }
    return character;
  }

  private int lookAhead(int amount) {
    int character = 0;
    for (int i = 0; i < amount; i++) {
      character = read();
    }
    backup(amount);
    return character;
  }

  @Override
  public int mark() {
    return ++markDepth;
  }

  @Override
  public void release(int marker) {
    // unwind any other markers made after m and release m
    markDepth = marker;
    // release this marker
    markDepth--;
  }

  @Override
  public void seek(int index) {
    if (index < 0) {
      throw new IllegalArgumentException(String.format("Invalid index (%s < 0)", index));
    }

    if (index < this.index) {
      backup(this.index - index);
      return;
    }

    // seek forward, consume until p hits index
    while (this.index < index) {
      consume();
    }
  }

  @Override
  public int index() {
    return index;
  }

  @Override
  public int size() {
    return -1; //unknown...
  }

  @Override
  public String getSourceName() {
    return name;
  }

  private int read() {
    int result = input.read();
    index++;

    if (result == LexerInput.EOF) {
      return EOF;
    } else {
      return result;
    }
  }

  private void backup(int count) {
    input.backup(count);
    index -= count;
  }
} 
```

我用以下代码创建了一个要点：[https](https://gist.github.com/megothss/849fb466a21793956033) ://gist.github.com/megothss/849fb466a21793956033 ，以防万一有人想贡献改进它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T17:10:09.650

谷歌查询“antlr netbeans”显示了许多文章，尽管是针对 v3 而不是 v4。例如， [http://wiki.netbeans.org/New_Language_Support_Tutorial_Antlr](http://wiki.netbeans.org/New_Language_Support_Tutorial_Antlr)

您是否以某种方式运行了不同的查询？

# python - 从字符串列表中的项目中获取元素

> ID：16152667
> 
> 赞同：0
> 
> 时间：2013-04-22T17:03:20.833
> 
> 标签：python, list, loops

从给定的列表中，从每个项目中取出一个元素来拼写一个新单词。

```
list1=["whiff", "dog", "axe"]
letters=[]
for j in list1:
    for k in j:
        letters.append(k)

answer = letters[4] + letters[6] + letters[9] 
```

有没有办法让它比我迄今为止想出的更简单？特别是，有没有办法调用列表中项目的元素，而不是整个项目本身？我不想要`list1[0]`，`"whiff"`我只想要`"f"`它的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:08:34.990

> ...有没有办法调用列表中项目的元素，而不是整个项目本身？

好吧，你可以链接下标运算符，像这样......

```
>>> l = ["whiff", "dog", "axe"]
>>> answer = l[0][4] + l[1][1] + l[2][1]
>>> print answer
fox 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:06:11.263

与[`operator.itemgetter`](http://docs.python.org/2/library/operator.html#operator.itemgetter)：

```
from operator import itemgetter

list1 = ["whiff", "dog", "axe"]

indexes = [4, 6, 9]
getter = itemgetter(*indexes)
print(getter(''.join(list1))) # prints ('f', 'o', 'x') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:16:40.890

如果您确实想访问所有单词中所有字母的列表，您可以使用：

```
>>> list1=["whiff", "dog", "axe"]
>>> from itertools import chain
>>> all_letters = list(chain(*list1))
>>> all_letters
['w', 'h', 'i', 'f', 'f', 'd', 'o', 'g', 'a', 'x', 'e']
>>> answer = all_letters[4] + all_letters[6] + all_letters[9] 
```

链产生它作为参数获得的所有可迭代的串联 - 字符串也是可迭代的。我需要调用`list`它的结果，因为它只返回一个迭代器。

然后我们有一个很长的列表，无需编写循环。

# javascript - Javascript中的命名空间

> ID：16152668
> 
> 赞同：0
> 
> 时间：2013-04-22T17:03:22.937
> 
> 标签：javascript

我有一个关于 JavaScript 命名空间的问题。命名空间有什么好处？什么时候使用命名空间？使用全局变量是坏习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:08:02.910

将所有变量存储在全局命名空间中是一种不好的做法，主要是因为您为名称冲突敞开了大门。例如，如果您定义了一个名为的函数`Foo`并导入了一个也定义了的 JavaScript 文件`Foo`，那么它们会发生冲突，并且在调用时最终会被隐藏。

命名空间的优点与其他语言类似：

*   您可以对代码进行逻辑分组
*   你可以将你的函数组织成更小的、可重用的块
*   您可以避免名称冲突
*   您避免弄乱全局命名空间（这会导致上述项目的反面）

我相信，无论何时开始编写 JavaScript，都应该避免将函数添加到全局命名空间中，并将代码保留在自己的命名空间中：

```
var MyLibrary = MyLibrary || {};
MyLibrary.x = function() { ... }; 
```

养成一个好习惯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T17:09:33.123

```
var company = company || {} ;

company.doSomething = function() {
};

company.test = {};
company.test.submodule = {};
company.test.submodule.doSomething = function() {};

company.api = {};
company.api.submodule = {}; 
```

您通常应该避免全局定义变量。对于清晰可维护的代码，使用对象作为命名空间，避免污染全局命名空间。

这也极大地增强了默认的 JS 功能。如果你真的很喜欢它，在你的项目中添加类似 require.js 的东西，你会得到一个非常好的类似 Java 的功能。

因此，使用 require.js，您的 company.api 和 company.test 可以放在不同的文件中并相互要求，就像您使用 Java 包执行 import company.test 一样。

命名空间是一种非常有效的做法。你得到：

1.  可读性（世界上最重要的事情！！）。
2.  可维护性。
3.  更快的调试。
4.  更快的代码升级/代码交付。
5.  延迟加载和缩小更容易，可以使用大量工具。
6.  逻辑和功能的有效划分。
7.  防止 IE 窗口与全局对象错误。
8.  使团队工作变得可能和愉快。
9.  大大加快了开发速度。大多数 IDE 会在您根据命名空间键入时索引和自动填充函数名称等。
10.  您可以有效地使用 jsDoc 标签来记录您的 JavaScript 代码。
11.  您可以避免与其他库发生冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:06:32.883

一般来说，命名空间的好处是：

1.  限制全局范围的污染并防止命名冲突
2.  为您的函数名称提供上下文（例如，我们期望 WindowUtils.getHeight 和 MenuUtils.getHeight 有不同的参数和结果）。

每当您构建任何显着规模或复杂性的项目时，您都可以使用命名空间。

全局变量通常是一个问题，因为它更容易命名不同文件之间的冲突和意外副作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T17:06:48.440

如果可以避免使用全局变量总是不好的，因为它会使您无法控制的命名空间变得混乱。如果引入了一个新插件，或者第二个程序员在您的代码上工作，并且共享全局变量名，那么这可能会很糟糕，您将得到非常不受欢迎且难以跟踪的错误。

通过使用您自己的命名空间，您可以将您的函数和变量隔离到一个独特、安全的小茧中。:D

# struts2 - Struts 2 在特定命名空间上映射默认操作

> ID：16152669
> 
> 赞同：1
> 
> 时间：2013-04-22T17:03:30.113
> 
> 标签：struts2, mapping

我想在每个“/mobile/*”网址上有一个动作映射。

当我将以下内容放入我的 struts.xml 时：

```
<package name="default-mobile-action" extends="mobile-default">  
   <action name="*.*" class="ca.tink.vitrine.webapp.action.DefaultAction">         
   ....      
   </action>  
</package> 
```

我的“/mobile/*”网址转到默认操作，这是正确的。但是当我像这样更改映射时（我在“/mobile”上添加了一个命名空间）：

```
<package name="default-mobile-action" extends="mobile-default" namespace="/mobile">  
   <action name="*.*" class="ca.tink.vitrine.webapp.action.DefaultAction">         
   ....      
   </action>  
</package> 
```

现在，“/mobile/*”网址无法访问该操作（未找到任何操作...）

这真的不是我预期的行为......

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T05:23:31.223

You can try this...

struts.xml:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
    <include file="mobile.xml"></include>
</struts> 
```

mobile.xml:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

    <package name="mobile" extends="struts-default" namespace="/mobile">
    </package>
</struts> 
```

# css - 多选字段显示 0 个项目而不是实际的选项名称。有人修过这个吗？

> ID：16152671
> 
> 赞同：0
> 
> 时间：2013-04-22T17:03:31.510
> 
> 标签：css, mobile, multi-select

在我的应用程序的一个表单中，我有一个多选字段部分，让用户可以选择多个选项。但是，在移动版本上，它会显示“0 个项目”，直到点击，用户选择说 2 个项目，然后返回说“2 个项目”。

有人知道怎么修这个东西吗？它不是用户友好的，并且对造型很烦人。

```
<div class="multiselect_field">
<div><%= form_builder.label t :u_ed_degrees %></div>
    <%= form_builder.select :degrees, degrees, {}, { :multiple => true, :size => 33 } %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:44:48.687

不可能，因为 iOS 不支持这一点。也许他们很快就会像 Android 一样加入进来。

# ruby-on-rails - JRuby 部署到 Tomcat 中 - org.jruby.rack.RackInitializationException

> ID：16152675
> 
> 赞同：3
> 
> 时间：2013-04-22T17:03:43.513
> 
> 标签：ruby-on-rails, tomcat, jruby, rack

我让我的应用程序在 WeBRICK 和特立尼达运行并完美运行。

问题是现在我需要在 Tomcat 中进行部署。

我使用 Jruby 和 Rails 3，当我创建部署时它失败并显示当前消息：

```
SEVERE: ERROR: unable to create shared application instance

org.jruby.rack.RackInitializationException: load error: /usr/local/webservices/tmp/0-SPARK/WEB-INF/config/environment -- java.lang.NullPointerException: null

    from org/jruby/RubyKernel.java:1027:in `require'

    from /usr/local/webservices/tomcat-servers/tctqan04/work/Catalina/localhost/SPARK/loader/jruby/rack/rails/environment3.rb:23:in `load_environment'

    from /usr/local/webservices/tomcat-servers/tctqan04/work/Catalina/localhost/SPARK/loader/jruby/rack/rails_booter.rb:65:in `load_environment'

    from <script>:1:in `(root)' 
```

有没有人知道问题可能是什么以及如何解决它？

问候。

# c++ - 使用 C API 漂亮地打印 Z3

> ID：16152682
> 
> 赞同：1
> 
> 时间：2013-04-22T17:04:17.673
> 
> 标签：c++, c, z3

有没有办法以人类可读的形式打印 AST，就像在 Python API 中一样？我想要类似的东西

```
(x = 3) ^ (f(3) > 2) 
```

代替

```
(and (= x 3) (> (f 3) 2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:16:58.607

不，Z3 C/C++ API 没有此功能。Z3 Python API 中的漂亮打印机是用 Python 实现的。它不是核心 API 的一部分。Z3 Python 打印机在文件中实现`src/api/python/z3printer.py`（参见[此处](https://z3.codeplex.com/SourceControl/changeset/view/8f7494cb0456ff85003cc83f7f08cdedba5d1b27#src/api/python/z3printer.py)）。可以使用类似 C/C++ 的符号在 C/C++ 中重新实现它。

# paypal - PayPal 沙盒“DoDirectPayment”错误代码 10501

> ID：16152683
> 
> 赞同：1
> 
> 时间：2013-04-22T17:04:18.590
> 
> 标签：paypal, paypal-sandbox

当我尝试 DoDirectPayment 时，我收到错误代码，说我的配置无效。尽管有 PayPal 员工回复了有人提出此问题的所有在线帖子，但我找不到实际的解决方法。

有没有办法从沙盒帐户添加 PayPal Payments Pro？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:17:39.177

通常，当您创建预配置的 Website Payments Pro 帐户时，这应该默认启用。但是，有时会出现一些问题导致此功能无法启用。启用此功能的几个选项是尝试手动打开它，或者尝试创建一个新的预配置帐户并查看它是否在新帐户上启用。如果您可以向我提供您的测试沙盒卖家帐户的电子邮件地址，我可以尝试为您手动切换它。

# c++ - GNU Make：在 Makefile 中自定义库搜索路径

> ID：16152689
> 
> 赞同：0
> 
> 时间：2013-04-22T17:04:30.420
> 
> 标签：c++, c, makefile, static-libraries, gnu-make

目前要在我的项目 repo 中包含一个自定义静态库，我需要告诉编译器库的完整路径，比如

```
$(CXX) $(CXXFLAGS) -o $@ $^ ../lib/libnt.a $(LDFLAGS) 
```

但我实际上想添加一个自定义搜索路径以便我可以编写

```
$(CXX) $(CXXFLAGS) -o $@ $^ -lnt $(LDFLAGS) 
```

反而。那可能吗？我试图指定`PATH`环境变量，但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:07:55.110

environment var 是用于 shell的`PATH`，我不明白为什么你甚至认为它会起作用。请改用`-L`链接器标志：

```
LDFLAGS = ... stuff you put here ... -L/search/path/for/custom/libs
                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                     This part 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:08:35.707

您可以只使用一个简单的 make var 定义。

```
LIBLDIR =   ../lib/
#
#
#
$(CXX) $(CXXFLAGS) -o $@ $^  -L$(LIBLDIR) -lnt $(LDFLAGS) 
```

# git - Git 中的 gitmodules 是什么？

> ID：16152692
> 
> 赞同：0
> 
> 时间：2013-04-22T17:04:53.457
> 
> 标签：git, github, octopress

我只是想知道 gitmodules 到底是什么。我听说它是​​你的 git 文件夹中的一个文件，但我找不到它。它必须存在吗？我已经在各种论坛中搜索过，但找不到很好的解释。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:06:23.743

`.gitmodules`文件是使用[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)`git submodule`时由命令（最常见）创建的存储库中的文件。`git submodule add`

它存储有关某些外部存储库应映射到哪些目录的信息，以便当有人克隆存储库或请求子模块更新时， `git submodule init`and`git submodule update`命令可以知道将它们放置在哪里。

# python - python随机数游戏中的缩进错误

> ID：16152698
> 
> 赞同：0
> 
> 时间：2013-04-22T17:05:18.120
> 
> 标签：python, indentation

这是我编辑的一个简单的小猜谜游戏。我知道它**应该**运行良好，但它一直给我一个错误。在第 12 行，它说“unindent 不匹配任何外部缩进级别”，箭头指向“guess = input()”中的右括号。有什么帮助吗？我看不出有什么问题！

```
# This is a guess the number game.
import random

guessesTaken = 0
print('Hello! What is your name?')
myName = input()
number = random.randint(1, 20)
print('Well, ' + myName + ', I am thinking of a number between 1 and 20.')

while guessesTaken < 6:
      print('Take a guess.')
    guess = input()
    guess = int(guess)
    guessesTaken = guessesTaken + 1
    if guess < number:
        print('Your guess is too low.')
    if guess > number:
        print('Your guess is too high.')
    if guess == number:
        break
if guess == number:
    guessesTaken = str(guessesTaken)
    print('Good job, ' + myName + '! You guessed my number in ' + guessesTaken + '         guesses!')
if guess != number:
    number = str(number)
    print('Nope. The number I was thinking of was ' + number) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:06:50.377

这里：

```
while guessesTaken < 6:
      print('Take a guess.')
    guess = input()
    # the rest of the code 
```

行`print('Take a guess.')`应该有[4 个空格 indentation](http://www.python.org/dev/peps/pep-0008/#indentation)。像这样。。

```
while guessesTaken < 6:
    print('Take a guess.')
    guess = input()
    # the rest of the code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:00:40.590

Thanakron Tandavas 向您展示了路径，但整个代码以防万一...

```
# This is a guess the number game.
import random

guessesTaken = 0
myName = raw_input('Hello! What is your name?\n')
number = random.randint(1, 20)
print('Well, ' + myName + ', I am thinking of a number between 1 and 20.')

while guessesTaken < 6:
    print('Take a guess.')
    guess = input()
    guess = int(guess)
    guessesTaken = guessesTaken + 1
    if guess < number:
        print('Your guess is too low.')
    if guess > number:
        print('Your guess is too high.')
    if guess == number:
        break
if guess == number:
    guessesTaken = str(guessesTaken)
    print('Good job, ' + myName + '! You guessed my number in ' + guessesTaken + '         guesses!')
if guess != number:
    number = str(number)
    print('Nope. The number I was thinking of was ' + number) 
```

请注意，我使用 raw_input() 而不是 input()，因为我使用 2.7.3 :) 干杯！

# java - 使图像向鼠标光标移动

> ID：16152710
> 
> 赞同：0
> 
> 时间：2013-04-22T17:05:54.450
> 
> 标签：java, image, mouse

在游戏即时制作中，我想使用鼠标光标瞄准。这是我知道的使子弹向鼠标光标移动的代码：

定位鼠标位置 private PointerInfo mouse = MouseInfo.getPointerInfo(); 私人点点=新点（mouse.getLocation（））；使子弹有点向鼠标光标移动

```
if(point.getX() > player.getX()){
        setX(getX() + 1);
}
if(point.getX() < player.getX()){
        setX(getX() - 1);
}
if(point.getY() > player.getY()){
        setY(getY() + 1);
}
if(point.getY() < player.getY()){
        setY(getY() - 1);
} 
```

问题是，如果鼠标光标位于该区域的某个位置，子弹不会精确地移动到鼠标光标，而是沿着 45 度的路径向左移动，同样的事情也适用于从左到右直到右边。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:45:44.693

为了使子弹直接朝着光标移动，而不是总是以 45 度的路径移动，`double`请用于 X 和 Y 的内部表示。此外，由于您希望子弹朝某个方向前进，因此您需要计算首次创建子弹时的 X 速度和 Y 速度。

例如：

```
double deltaX = player.getX() - point.getX();
double deltaY = player.getY() - point.getY();
double magnitude = Math.sqrt(deltaX*deltaX + deltaY*deltaY);

// It's possible for magnitude to be zero (cursor is over the person)
// Decide what you want the default direction to be to handle that case
double xVelocity = 1;
double yVelocity = 0;
if (magnitude != 0) {
    xVelocity = deltaX / magnitude;
    yVelocity = deltaY / magnitude;
} 
```

使用第一次创建子弹时计算的速度，在每个滴答声中，您只需要使用`xPosition += xVelocity`and `yPosition += yVelocity`。

# javascript - Java 脚本：如果用户的焦点不在窗口中，则显示警报

> ID：16152715
> 
> 赞同：-2
> 
> 时间：2013-04-22T17:06:18.827
> 
> 标签：javascript

我正在尝试创建一个在线测验网站。如果用户进入测验页面，他应该不能在计算机上的其他选项卡或其他窗口中搜索答案。这样，我们将从正确的人那里得到正确的答案。我发现我们可以用 JavaScript 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:08:09.960

用 JavaScript 是不可能做到这一点的。出于安全原因，JavaScript 无法控制浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:08:47.167

在 chrome 中你可以这样做：

```
window.onblur = function(){
    alert("Blurred");
} 
```

我还没有测试任何其他浏览器。

# php - 从 PHP 连接到 Informix 标准引擎 (SE)

> ID：16152722
> 
> 赞同：6
> 
> 时间：2013-04-22T17:06:46.933
> 
> 标签：php, database, odbc, informix

除了使用 ODBC 之外，还有什么方法可以做到这一点吗？我怀疑有，但只是想检查一下。我相信 ODBC 性能很差，但不确定这个问题。我所知道的是功能集很差（比如无法获得选择的行数。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T22:29:12.020

您可以使用 PDO Informix

*   [PHP 文档 - PDO Informix](http://www.php.net/manual/en/ref.pdo-informix.php)
*   [PHP 文档 - PDO Informix 连接](http://php.net/manual/en/ref.pdo-informix.connection.php)
*   [IBM - 带有 PHP 的 Informix](http://pic.dhe.ibm.com/infocenter/idshelp/v117/index.jsp?topic=/com.ibm.virtapp.doc/TD_item2.htm)

棘手的部分是正确安装并正常工作。

我已经 4 年多没有使用 informix 了，但我记得我们花了一些时间才让它工作。

# hadoop - 蜂巢错误运行选择查询

> ID：16152726
> 
> 赞同：0
> 
> 时间：2013-04-22T17:06:55.137
> 
> 标签：hadoop, hive

我创建扩展配置单元表：

```
 CREATE EXTERNAL TABLE  hivelog (timestamp BIGINT ,value STRING)
 PARTITIONED BY(dt BIGINT) row format serde
 'hive.serde.AdsClickLogWritableDeserializer'  stored as inputformat
 'org.apache.hadoop.mapred.SequenceFileInputFormat'   outputformat
 'org.apache.hadoop.mapred.SequenceFileOutputFormat' location
 '/user/hive/HiveData';

hive.serde.AdsClickLogWritableDeserializer is my class deserialized data. 
```

然后我运行查询

```
select count(*) from hivelog  that has error:

2013-04-22 22:30:51,228 FATAL org.apache.hadoop.mapred.Child: Error running child : java.lang.OutOfMemoryError: Java heap space
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:949)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:428)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

我的 hive 版本是 0.90，hadoop 版本是 1.0.0

如何解决这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:52:04.310

try to increase JVM memory settings to handle the OutOfMemoryError

refer [How can I increase the JVM memory?][1] and [Behaviour of JVM during out of memory error ?][2] [1]: [How can I increase the JVM memory?](https://stackoverflow.com/questions/2294268/how-can-i-increase-the-jvm-memory) [2]: [Behaviour of JVM during out of memory error? List s = new ArrayList<String>();](https://stackoverflow.com/questions/7753443/behaviour-of-jvm-during-out-of-memory-error-list-s-new-arrayliststring)

# regex - 在正则表达式中查找第一次出现的模式

> ID：16152727
> 
> 赞同：1
> 
> 时间：2013-04-22T17:06:59.470
> 
> 标签：regex, web-applications, outsystems

如果我正在浏览这样的文本：

```
hello bob hello hello hello 
```

我想找到hello的第一个实例并将其取出，所以我使用这样的模式

```
hello 
```

当我擦除那个图案时，这就是文本

```
bob 
```

但我需要的是

```
bob hello hello hello 
```

如何修改它以仅找到模式的第一次出现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:21:43.230

我的水晶碗告诉我你在你的正则表达式中使用了某种`global`修饰符，如果你把它去掉，那么你应该得到你期望的结果。例如，在 javascript 中，您将使用：

```
/hello/ 
```

代替：

```
/hello/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:42:45.610

在 OutSystems 中，正则表达式函数是通过扩展提供的，所以我假设您正在使用`Text`扩展。扩展代码映射到 .NET/Java 代码，并且对正则表达式方法的底层调用`Replace(string input, string replacement)`用于 .NET 和`replaceAll(String replacement)`Java。这些都将替换给定输入字符串上出现的所有正则表达式。

现在，有几种方法可以解决您的问题...

**如果要替换字符串的开头：** 在您给出的示例中，您有兴趣删除的*hello也在输入字符串的开头。*在这种特殊情况下，您可以使用正则表达式，例如`^hello`.

**如果您想替换字符串中的任何位置的第一个匹配项：** 如果您有兴趣替换第一个匹配项，但它可以是输入字符串中的任何位置，那么您可以编写一个表达式，例如`hello(.*)`并用作替换字符串`$1`。在这种情况下，`$1`这意味着捕获组`(.*)`将包括所有进一步出现的*hello*。这适用于[.NET](http://msdn.microsoft.com/en-us/library/ewy2t5e0.aspx)和[Java](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuffer,%20java.lang.String%29)。当然，这种做事方式既不漂亮也不高效，所以......

**如果您想拥有更多正则表达式功能：**您可以使用 Integration Studio 下载并打开 Text 扩展并添加您想要的任何新方法，尽管由于此扩展包含在平台中并且可以通过升级替换，我会建议创建您自己的扩展并使用 Text 扩展作为模板。您可以创建一个与当前非常相似的扩展操作，`Replace`但这可能需要一个额外的*计数*参数或类似的东西。

# python - 创建类对象列表

> ID：16152737
> 
> 赞同：-1
> 
> 时间：2013-04-22T17:07:54.607
> 
> 标签：python, list, class, python-3.x

我正在尝试创建一个 Python 程序，该程序创建一个可以保存信息并使用联系人对象执行操作的类。基本上它就像一部手机，您可以输入姓名、地址、电话、年龄和类型（如家庭、工作、朋友等）的数据。我对 Python 很陌生，对课程不太熟悉。 .

我想出了类似的东西

```
CONTACTS = open ("contacts.txt","r")

CONTACT_DATA = CONTACTS.read()

class Contacts(CONTACT_DATA):

      def __init__(CONTACT_DATA, Name= "Unavailable", Address= "Unavailable",   Phone="Unavailable", Age=0, Type=None ):
            CONTACT_DATA.Name = Name
            CONTACT_DATA.Address = Address
            CONTACT_DATA.Phone = Phone
            CONTACT_DATA.Age = Age
            CONTACT_DATA.Type = Type 
```

但我几乎坚持如何将字符串分配给变量。我知道我想使用“设置”和“获取”方法......

contacts.txt 文件看起来像

```
3 
Albert Einstein
27 Technology Drive
25
555-555-1212
WORK
Sally Field
48 Friendly Street
22
555-555-8484
FRIEND
Marvin Gaye
191 Apple Mountain Road
30
555-555-2222
RELATIVE 
```

3是联系人的数量。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:20:00.527

您正在使用的可能是可行的，但更像是这样：

```
class Contact(object):
  def __init__(self, name, address, age, phone, ctype):
    self.name = name,
    self.address = address
    self.age = age
    self.phone = phone
    self.ctype = ctype

# Read off the first line of your data file.
fh = open('contacts.txt')
count = int(fh.readline())

Contacts = [Contact(*c) for c in [[next(fh) for i in range(5)] for j in range(count)]] 
```

如前所述，最后一行确实使用了一些嵌套列表推导。这相当于：

```
Contacts = []
for j in range(count):
  fields = []
  for i in range(5):
    fields.append(next(fh))
  Contacts.append(Contact(*fields)) 
```

# html - 位置：固定在 chrome 中不起作用

> ID：16152744
> 
> 赞同：-1
> 
> 时间：2013-04-22T17:08:17.493
> 
> 标签：html, css, widget, blogger, css-position

我在我的博客[http://kasperikoski.blogspot.fi](http://kasperikoski.blogspot.fi)中添加了一个新的小部件，它基本上通过使用“添加 HTML/脚本”作为菜单工作。代码是给博主的 HTML/CSS：

```
 .menukadn   {
    line-height: 1;
    }

    a.limeka, a.limeka:visited, a.limeka:active {
    font-family: 'Maven Pro', sans-serif;
    font-size: 30px;
    font-weight: bold;
    color: #bbb;
    text-decoration: none;
    text-transform: uppercase;
    transition: color 150ms linear;
    letter-spacing: -0.090em;
    }

    a.limeka:hover  {
    color: #21a97e;
    transition: color 150ms linear;
    } 
```

到小部件：

```
 <div class="menukadn">
    <a href="https://www.facebook.com/Kadnnn" class="limeka" title="" target="_blank">Facebook</a>
    <br/>
    <a href="http://instagram.com/kasperikoski" class="limeka" title="" target="_blank">Instagram</a>
    </div> 
```

当我尝试像这样添加定位时，

```
 .menukadn   {
    line-height: 1;
    position: fixed;
    } 
```

或者将小部件 DIV#HTML1 替换为自身：

```
 #HTML1 {
    position: fixed;
    } 
```

它在 Mozilla Firefox 上完美运行，但在 Chrome 中，我的小部件#HTML1 位于距离它应该在的位置（列-左-外）大约 800 像素处，就在内部主体左边框旁边。任何可能有其他代码引起矛盾的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:22:55.107

除了定位之外，`position:fixed`您还没有定义元素的位置，例如

```
#HTML1 {
   position: fixed;
   left:0;
   top:0;
} 
```

如果你想根据屏幕宽度来定位它，你可以尝试这样的事情：

```
#HTML1 {
   position: fixed;
   left:0;
   right:0;
   width: 200px;
   margin:0 auto;
} 
```

唯一的缺点是你**必须**定义一个宽度，然后再玩，`left`或者`right`直到你把它放在你想要的地方。

# ios - iOS：以编程方式呈现视图控制器

> ID：16152746
> 
> 赞同：38
> 
> 时间：2013-04-22T17:08:24.140
> 
> 标签：ios, objective-c, uiviewcontroller, uistoryboard, presentviewcontroller

我正在使用该`presentViewController:animated:completion:`方法转到另一个视图控制器。

这是我的代码：

```
AddTaskViewController *add = [[AddTaskViewController alloc] init];
[self presentViewController:add animated:YES completion:nil]; 
```

此代码转到另一个`UIViewController`，但另一个控制器是空的。我一直在使用故事板，但现在我需要在代码中完成。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-22T17:11:52.177

如果您使用的是故事板，您可能不应该使用`alloc`and`init`创建一个新的视图控制器。相反，请查看您的故事板并找到*您*想要执行的转场；它应该有一个唯一的标识符（如果没有，您可以在右侧边栏中设置一个）。

找到该 segue 的标识符后，向*当前*视图控制器发送一条`-performSegueWithIdentifier:sender`消息：

```
[self performSegueWithIdentifier:@"mySegueIdentifier" sender:self]; 
```

这将导致情节提要实例化一个 AddTaskViewController 并以您为该 segue 定义的方式呈现它。

* * *

另一方面，如果您根本不使用情节提要，那么您需要为 AddTaskViewController 提供某种用户界面。这样做的最常见方法是使用 nib 初始化控制器：`init`您将调用`-initWithNibName:bundle:`并提供包含添加任务 UI 的 .xib 文件的名称，而不是仅仅调用：

```
AddTaskViewController *add = [[AddTaskViewController alloc]
                              initWithNibName:@"AddTaskView" bundle:nil];
[self presentViewController:add animated:YES completion:nil]; 
```

（还有其他（不太常见的）方法可以获得与新视图控制器关联的视图，但这可能会给您带来最少的工作麻烦。）

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-22T18:08:05.433

如果您正在使用 Storyboard 并且您的“添加”视图控制器在情节提要中，那么在设置中为您的“添加”视图控制器设置一个标识符，以便您可以执行以下操作：

```
UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"NameOfYourStoryBoard" 
                                                     bundle:nil];
AddTaskViewController *add = 
           [storyboard instantiateViewControllerWithIdentifier:@"viewControllerIdentifier"];

[self presentViewController:add 
                   animated:YES 
                 completion:nil]; 
```

如果您在情节提要或 nib 文件中没有“添加”视图控制器，并且想要以编程方式创建整个内容，那么 appDocs 会说：

> 如果您无法在情节提要或 nib 文件中定义视图，请覆盖 loadView 方法以手动实例化视图层次结构并将其分配给视图属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-16T14:19:49.213

您需要从情节提要身份检查器设置情节提要 ID

```
 AddTaskViewController *add=[self.storyboard instantiateViewControllerWithIdentifier:@"storyboard_id"];
 [self presentViewController:add animated:YES completion:nil]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-30T06:05:03.007

你的代码：

```
 AddTaskViewController *add = [[AddTaskViewController alloc] init];
 [self presentViewController:add animated:YES completion:nil]; 
```

此代码可以转到另一个控制器，但是您会得到一个新的 viewController，而不是故事板的控制器，您可以这样做：

```
AddTaskViewController *add = [self.storyboard instantiateViewControllerWithIdentifier:@"YourStoryboardID"];
[self presentViewController:add animated:YES completion:nil]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-12T03:09:16.923

最好的方法是

```
AddTaskViewController * add = [self.storyboard instantiateViewControllerWithIdentifier:@"addID"];
[self presentViewController:add animated:YES completion:nil]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-30T01:52:57.760

以下是您在 Swift 中的操作方法：

```
let vc = UIViewController()
self.presentViewController(vc, animated: true, completion: nil) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-16T06:53:54.243

尝试以下操作：

```
NextViewController *nextView = [self.storyboard instantiateViewControllerWithIdentifier:@"nextView"];
[self presentViewController:nextView animated:YES completion:NULL]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-28T09:48:48.097

试试这个代码：

```
[self.navigationController presentViewController:controller animated:YES completion:nil]; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-03-28T06:26:04.010

```
LandingScreenViewController *nextView=[self.storyboard instantiateViewControllerWithIdentifier:@"nextView"];
[self presentViewController:nextView animated:YES completion:^{}]; 
```

# wordpress - 如何从帖子图片网址设置特色图片？

> ID：16152747
> 
> 赞同：-2
> 
> 时间：2013-04-22T17:08:26.453
> 
> 标签：wordpress

我正在使用一个名为 Movie Poster 的插件，它收集有关电影的信息并为我的评论网站创建一个自动帖子。此自动发布通过 URL 源显示电影的海报图像。我使用的主题是 Arras Project AR2。如何使此图像 URL 也成为该帖子的特色图像？感谢您的时间和回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:51:57.417

尝试使用这个插件：

[http://wordpress.org/extend/plugins/auto-post-thumbnail/](http://wordpress.org/extend/plugins/auto-post-thumbnail/)

和这个 ：

[http://wordpress.org/extend/plugins/easy-add-thumbnail/](http://wordpress.org/extend/plugins/easy-add-thumbnail/)

祝你好运

# java - Jedis 中的响应对象 - 抛出 ClassCastException

> ID：16152748
> 
> 赞同：6
> 
> 时间：2013-04-22T17:08:28.463
> 
> 标签：java, response, sync, pipeline, jedis

在 Jedis 中使用响应对象，抛出 ClassCastException 。当我使用管道时，我无法从 Redis 获得任何价值。请帮忙。我正在使用 Jedis 2.1.0

```
public class JedisPipeline {    
    public static void main(String args[]){
        final JedisPool pool = new JedisPool(new JedisPoolConfig(), "127.0.0.1", 6379);
        Jedis jedis = pool.getResource();
        Pipeline pipeline = jedis.pipelined();
        pipeline.multi();
        HashMap<String,String> map = new HashMap<String,String>();
        map.put("50", "50");
        pipeline.hmset("Id",map);
        Response <Long> incr = pipeline.hincrBy("Id", "100", 100);
        Response<Map<String,String>> map1 = pipeline.hgetAll("Id");
        pipeline.exec();
        List<Object> results = pipeline.syncAndReturnAll();
        System.out.println(results);
        System.out.println( incr.get());
        System.out.println( map1.get());
        pool.returnResource(jedis);
        pool.destroy();
    }
}

Exception in thread "main" java.lang.ClassCastException: [B cannot be cast to java.lang.Long
    at redis.clients.jedis.BuilderFactory$4.build(BuilderFactory.java:45)
    at redis.clients.jedis.BuilderFactory$4.build(BuilderFactory.java:48)
    at redis.clients.jedis.Response.get(Response.java:27)
    at redis.clients.jedis.Pipeline.syncAndReturnAll(Pipeline.java:42)
    at com.work.jedis.JedisPipeline.main(JedisPipeline.java:28) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T14:39:18.200

我使用的 jar 文件有冲突。我在构建路径中错误地保留了 jedis 2.1.0 和 jedis 2.0.0。

# c++ - 在 C++ 中使用指令与使用声明交换

> ID：16152750
> 
> 赞同：18
> 
> 时间：2013-04-22T17:08:35.300
> 
> 标签：c++, swap, using-directives, using-declaration

请参考以下代码：

```
#include <algorithm>

namespace N
{

    template <typename T>
    class C
    {
    public:
        void SwapWith(C & c)
        {
            using namespace std; // (1)
            //using std::swap;   // (2)
            swap(a, c.a);
        }
    private:
        int a;
    };

    template <typename T>
    void swap(C<T> & c1, C<T> & c2)
    {
        c1.SwapWith(c2);
    }

}

namespace std
{

    template<typename T> void swap(N::C<T> & c1, N::C<T> & c2)
    {
        c1.SwapWith(c2);
    }

} 
```

如上所述，代码无法在 Visual Studio 2008/2010 上编译。错误是：

```
'void N::swap(N::C<T> &,N::C<T> &)' : could not deduce template argument for 'N::C<T> &' from 'int'. 
```

但是，如果我注释掉 (1) 并取消注释 (2)，它将编译 OK。`using namespace std`和`using std::swap`解释这种行为的区别是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-22T18:19:33.763

第一种情况是 using 指令 ​​( `using namespace X`)，这意味着命名空间中的名称`X`将可用于常规查找，在`X`当前范围的第一个公共命名空间中。`::N`在这种情况下， and的第一个公共命名空间祖先`::std`是`::`，因此 using 指令`std::swap`仅在查找命中时才可用`::`。

这里的问题是，当查找开始时，它会在函数内部查找，然后在类内部查找，然后在内部`N`查找`::N::swap`。由于检测到潜在的过载，因此常规查找不会继续到外部命名空间`::`。因为`::N::swap`是一个函数，编译器将执行 ADL（依赖于参数的查找），但基本类型的关联命名空间集是空的，因此不会带来任何其他重载。此时查找完成，重载决议开始。它将尝试将当前（单个）重载与调用相匹配，并且它将无法找到从参数转换`int`为参数的方法，`::N::C`并且您会收到错误消息。

另一方面， using 声明 ( `using std::swap`) 在当前上下文中提供实体的声明（在这种情况下，在函数本身内部）。查找将`std::swap`立即找到并停止常规查找`::std::swap`并将使用它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-22T18:17:07.687

显而易见的原因是 using 声明和 using 指令具有不同的效果。using 声明将名称立即引入当前范围，因此 `using std::swap`将名称引入本地范围；查找在此处停止，您找到的唯一符号是`std::swap`. 此外，这发生在定义模板时，因此`std`找不到命名空间中的后续声明。在下一行中，*唯一* `swap`会考虑的是在 中定义的`<algorithm>`，加上由 ADL 添加的（因此，在 namespace 中的那个`N`）。（但是 VC++ 是这样吗？编译器没有正确实现名称查找，所以谁知道。）

using 指令指定名称将“好像”在包含指令和指定命名空间的最近命名空间中声明；在你的情况下，全局命名空间。它实际上并没有介绍名称；它只会影响名称查找。在依赖符号的情况下（或者总是在 VC++ 的情况下）发生在调用站点。

至于为什么你有这个特定的错误消息：可能更多的是 VC++ 的问题，因为你的代码中肯定没有不可推导的上下文。但是，无论编译器如何，都没有理由期望这两个变体具有相同的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T17:24:10.347

**注意**：*我已经删除了命名空间 std 中的交换定义。这里不相关。即使没有它，代码也会有同样的问题。*

* * *

这是由于查找`using directive`( `using namespace std`) 和`using` **`declaration`**( `using std::swap`)之间的规则差异

[微软](http://msdn.microsoft.com/en-us/library/aewtdfs3%28v=vs.80%29.aspx)说

> > **如果局部变量与命名空间变量同名，则命名空间变量是隐藏的。命名空间变量与全局变量同名是错误的。**

```
#include<iostream>

namespace T {
    void flunk(int) { std::cout << "T";}
}

namespace V {
    void flunk(int) { std::cout << "V";}
}

int main() {
    using T::flunk;   // makes T::flunk local
    // using V::flunk;  // makes V::flunk local. This will be an error
    using namespace V;  // V::flunk will be hidden
    flunk(1);
} 
```

据此，由于您的

```
template <typename T>
void swap(C<T> & c1, C<T> & c2) 
```

`std::swap`使用时会隐藏

```
using namespace std; 
```

因此，唯一`swap`可用于模板推导的是`N::swap`，它不适用于`int`s，因为它需要 a`template class`作为参数。

但**不是**什么时候

```
using std::swap; 
```

在这种情况下，它等同于**local definition**。并且可以毫无问题地使用。

# sonarqube - 如何使用模块基本目录中的源配置声纳运行器多语言

> ID：16152757
> 
> 赞同：1
> 
> 时间：2013-04-22T17:08:56.963
> 
> 标签：sonarqube, sonar-runner

我有一个具有以下结构的网络项目：

```
./
ajax/
    login.php
    ...
webapp/
    main.js
    ... 
```

我的 PHP 源代码位于 ajax 文件夹中，而我的 javascript 代码位于 webapp 文件夹中。我试图像这样配置我的声纳项目：

```
sonar.modules=ajax,webapp
sonar.sources=.

ajax.sonar.sources=.
webapp.sonar.sources=.

ajax.sonar.language=php
webapp.sonar.language=javascript 
```

但我收到以下错误：

```
ERROR: Error during Sonar runner execution
ERROR: Unable to execute Sonar
ERROR: Caused by: java.io.IOException: Cannot run program "pdepend" (in directory /home/rfernandez/project/ajax"):   java.io.IOException: error=2, No such file or directory
ERROR: Caused by: Cannot run program "pdepend" (in directory "/home/rfernandez/project/ajax"): java.io.IOException: error=2, No such file or directory
ERROR: Caused by: java.io.IOException: error=2, No such file or directory 
```

我知道这与 sonar.sources 属性有关，但我不确定如何指示源文件夹位于每个模块的基本目录中。我正在使用声纳亚军 2.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:40:31.163

PHP 插件目前不支持多模块，但我们将在下一个 sprint（1.2 版）期间进行处理，这应该在 2013 年 5 月结束之前可用。

[您可以观看并为https://jira.codehaus.org/browse/SONARPLUGINS-943](https://jira.codehaus.org/browse/SONARPLUGINS-943)投票。

# php - 如何将字段设置为当前日期

> ID：16152758
> 
> 赞同：-3
> 
> 时间：2013-04-22T17:08:56.987
> 
> 标签：php, mysql, date, datetime

用户登录，然后应将当前日期植入“LastActivity”字段中。

有了这个日期，我可以进行查询，显示所有登录用户。

我该怎么做呢？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:28:45.750

```
update myTable set myField = now(); 
```

最好是确保表格列设置为日期类型。否则，您也将获得时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:31:30.250

您可以按如下方式定义列，而不是手动更新：

```
CREATE TABLE foo(
   lastActivity TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
); 
```

你不仅会得到这个日期，还会得到时间。在您的查询中，您可以使用

```
SELECT DATE(lastActivity) ... 
```

只获取日期部分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-03-30T06:36:35.307

不要忘记添加一个字段来存储用户注销的日期/时间。否则，您只知道哪些用户曾经登录过，而不是当前会话。;-)

# neo4j - 试图返回相关节点neo4jclient

> ID：16152760
> 
> 赞同：0
> 
> 时间：2013-04-22T17:09:06.710
> 
> 标签：neo4j, cypher, neo4jclient

我正在尝试查找与特定项目（节点 3）相关的项目。我在 query.results 语句中收到错误消息。我不断收到“没有为此对象定义的无参数构造函数”。有谁知道我错过了什么？

代码：

```
Dim query As Cypher.CypherFluentQuery(Of Neo4jClient.NodeReference(Of TestGraph2.Item))
query = client.Cypher.Start("n", 3).Match("n-[r]->()<-[r2]-other").Return(Of NodeReference(Of Item))("other")
Dim x As IEnumerable(Of System.Collections.Generic.IEnumerable(Of Neo4jClient.NodeReference(Of TestGraph2.Item))())
x = query.Results.ToList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:50:36.187

返回 a`Node<T>`而不是`NodeReference<T>`：

```
Dim query As Cypher.CypherFluentQuery(Of Neo4jClient.Node(Of TestGraph2.Item))
query = client.Cypher.Start("n", 3).Match("n-[r]->()<-[r2]-other").Return(Of Node(Of Item))("other")
Dim x As IEnumerable(Of System.Collections.Generic.IEnumerable(Of Neo4jClient.Node(Of TestGraph2.Item))())
x = query.Results.ToList 
```

仅使用`NodeReference`而不是`Node`在[issue 35](https://bitbucket.org/Readify/neo4jclient/issue/35/cypher-should-be-able-to-flatten-nodes-to)中的功能，但尚未实现。

* * *

PS：我的 VB.NET 已经过时了，但是您提供的代码看起来非常冗长。

这是 C# 等价物：

```
var query = client.Cypher
    .Start(new { n = 3 })
    .Match("n-[r]->()<-[r2]-other")
    .Return<Node<Item>>("other")
var x = query.Results.ToList() 
```

我希望/希望/祈祷您的 VB.NET 代码可以更简洁。

# git - 如何通过 git-config 配置统一差异上下文？

> ID：16152762
> 
> 赞同：2
> 
> 时间：2013-04-22T17:09:10.127
> 
> 标签：git, git-diff, git-config, unified-diff

如何通过 git-config 配置统一上下文，这样我就不必总是为 -U 或 --unified 选项提供值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T17:14:12.353

```
git config --global diff.context <value> 
```

将其设置为`<value>`在您使用的任何 repo 中显示上下文行。

# filepicker.io - 接受除 tiff 之外的所有图像 mime 类型

> ID：16152764
> 
> 赞同：1
> 
> 时间：2013-04-22T17:09:18.493
> 
> 标签：filepicker.io

我如何接受除特定图像类型之外的所有图像类型？将它们全部列出似乎很痛苦。有没有办法命名排除项。除了 tiff 什么都喜欢？

```
filepicker.pickAndStore
  mimetypes: "image/*"
  container: "modal"
  service: "COMPUTER"
  maxSize: (20 * 1024 * 1024) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T01:41:53.667

没有办法以编程方式排除 mimetypes 或扩展。我们会考虑添加它，但在大多数情况下，我们已经看到开发人员实际上并不想要通用排除，例如“除 tiffs 之外的所有图像”包括 .tga 文件（http://en.wikipedia.org）之类的东西[。 org/wiki/Truevision_TGA](http://en.wikipedia.org/wiki/Truevision_TGA)）你可能也不想要。

# python - ndb 是否可能：查询（AdModel.daily_used < AdModel.daily_budget）

> ID：16152765
> 
> 赞同：1
> 
> 时间：2013-04-22T17:09:18.617
> 
> 标签：python, google-app-engine, app-engine-ndb

我正在尝试在 appengine 中使用 ndb 执行查询，如下所示

```
all_adverts = AdModel.query(AdModel.daily_used < AdModel.daily_budget) 
```

我正在尝试仅查询未使用其广告活动预算的每日最大值的项目。但是，当我运行它时，我得到以下异常：

```
BadValueError: Expected float, got FloatProperty('daily_budget', default=1) 
```

ndb 根本不可能做到这一点，还是我错误地构造了查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:16:51.817

您的查询需要扫描所有相同类型，这不是数据存储的典型用法。

一个更简单的解决方法是使用`ComputedProperty`。然后使用此属性进行过滤。当然，此更改只会影响以后的实体更新。

```
class AdvertModel(ndb.Model):
    daily_used = ndb.FloatProperty()
    daily_budget = ndb.FloatProperty()
    in_money = ndb.ComputedProperty(lambda self: self.daily_used < self.daily_budget) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:17:05.293

您需要了解查询机制需要比较右侧的值，而不是另一个属性。它不是 ndb 的限制，而是底层架构的工作方式。因此你得到的错误`BadValueError: Expected float, got FloatProperty('daily_budget', default=1)`。其他答案是您对所需功能的最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:34:10.880

您的设置将需要使用自定义（复合）索引。这增加了资源。为什么不添加一个布尔字段“daily_under_budget”。每次更新 daily_used 或 daily_budget 时，您都可以设置此值。然后，您不需要自定义索引。

# actionscript-3 - 如果对象的实例存在于舞台上，则删除它

> ID：16152767
> 
> 赞同：0
> 
> 时间：2013-04-22T17:09:20.433
> 
> 标签：actionscript-3, object

我正在尝试检查屏幕上是否存在对象的实例，如果存在 - 将其删除。代码如下 -

```
if (gracetarget.parent)
{
 gracetarget.removeEventListener(Event.ENTER_FRAME, gracetarget.graceListener);
 gracetarget.parent.removeChild(gracetarget);
}
else if (springtarget.parent)
{
 springtarget.removeEventListener(Event.ENTER_FRAME, springtarget.springListener);
 springtarget.parent.removeChild(springtarget);
} 
```

我收到以下错误 - TypeError：错误 #1009：无法访问空对象引用的属性或方法。

我想这是因为我试图删除一个不存在的对象，但肯定 IF 语句应该只在对象存在时运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:16:04.573

首先测试您要删除的对象是否不为空。

```
if (gracetarget != null && gracetarget.parent) {
...
} 
```

如果键入了gracetarget（例如MovieClip），您可以这样做

```
if (gracetarget is MovieClip && gracetarget.parent) {
    ...
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:18:43.313

Gracetarget/springtarget 没有从阶段中删除的原因是因为您在代码中的其他地方将其设置为 null。您在代码中的某处丢失了这些变量。

再次检查你的类的代码，检查你在哪些地方设置了gracetarget/springtarget并跟踪它。还要检查您是否从类外部设置它的值，并在所有此类位置放置不同的跟踪以进行调试

如果将变量gracetarget 或springtarget 设置为null，则实际的movieclip 将保留在舞台上，因为gracetarget 和springtarget 只是指向实际movieclip 的指针。

我相信你可以很容易地调试这个。祝你好运。

# html - 如何使用 Perl 提取 HTML 文件的特定部分

> ID：16152776
> 
> 赞同：0
> 
> 时间：2013-04-22T17:10:00.883
> 
> 标签：html, perl

我是 Perl 的新手，我正在尝试读取`<div class="one">`HTML 文件之间的特定内容。

HTML 文件：

```
<div class="one">

    <div id="two">Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.
    </div>

    <pre>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.
    </pre>

</div> 
```

Perl 代码：

```
my $file = "content.html";

if (-e $file) {
    open(IN, $file);
    while (<IN>) {
        chomp($line = $_);

        #print "$line\n";
    }
}

@contents = <IN>;

#check to if content in html file is in the right location,
#if content is in correct location (div class="one")
#print content in div two and three if exist

for (my $i = 0 ; $i <= $#contents ; $i++) {
    if (!$contents[$i] =~ m/^\s*<div/ && $contents[$i] =~ m/class\s*=\s*"one"/) {
        print "content in wrong location";
    }
    else {
        if ($contents[$i] =~ m/^\s*<div/) {
            print "$_";
        }
        else ($contents[$i] =~ m/^\s*<pre/) {
            print "$_";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:57:07.867

[我使用HTML::TreeBuilder](http://search.cpan.org/~cjm/HTML-Tree-5.03/lib/HTML/TreeBuilder.pm)取得了一些成功，它擅长处理损坏的 HTML。

# jquery - DOM 未加载阻止 TextBoxFor 控件中的 focus()

> ID：16152777
> 
> 赞同：0
> 
> 时间：2013-04-22T17:10:00.443
> 
> 标签：jquery, asp.net-mvc, dom

我不确定为什么我的 focus() 不能在一个视图上工作。

我在 JQuery 中有一个类，通过母版页传递，定义为： $(".focus").focus();

这适用于我代码中其他地方定义的文本框。例如：

```
<td><%: Html.DropDownListFor(p => p.PhoneTypeId, phoneTypeListItems, new{@class="focus"}) %></td> 
```

但是在具有类似代码的一个视图上，没有设置焦点：

```
<td><%=Html.TextBoxFor(de => de.EmailAddress1, new {@class="focus"})%></td> 
```

如果我的焦点课程正在使用其他控件，那么它就不可能是我的 jquery。我尝试了许多选项来设置它，包括 $("#EmailAddress1").focus() 并在同一视图中定义我自己的 jquery 以及除此之外的其他选项。唯一能在不点击文本框的情况下点击重新加载按钮（Chrome 和 IE9），这让我相信 DOM 没有加载。但在我的 jquery 中，我使用： $(document).ready(function () {

我不知道如何解决这个问题。任何人都可以帮忙吗？

PS 在进一步的测试中，我发现 JQuery 中的其他类元素也可以工作。例如， <%=Html.TextBoxFor(de => de.EmailAddress1, new { @class = "focus phoneNumber" })%> phoneNumber 和 focus 都在同一个 .js 中 $(".focus").focus( ); $(".phoneNumber").mask("(999) 999-9999");

但只有 phoneNumber 会显示，焦点不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:25:05.993

如果要使用 jQuery 设置焦点类，则必须提供**ID ，如下所示：**

```
<td><%=Html.TextBoxFor(de => de.EmailAddress1, new {@class="focus", id = "EmailAddress", name = "EmailAddress"})%></td> 
```

现在在**jQuery**中：

```
$(document).ready(function(){
    $("#EmailAddress").focus();
}); 
```

# asp.net - “~/”没有返回完整的根路径

> ID：16152784
> 
> 赞同：0
> 
> 时间：2013-04-22T17:10:32.347
> 
> 标签：asp.net, html

我在网上找到的所有内容都说“~/”将返回 URL 的完整应用程序根目录，因此`~/test.aspx`在`test`子文件夹中将返回`http://domain.com/test/test.aspx`. 我不明白为什么，这不是我们的 Web 应用程序中处理波浪号的方式。在我们的例子中，波浪号只返回站点根目录（所以在上面的例子中，我们得到`http://domain.com/test.aspx`）。

我们的标签确实包括`runat="server"`.

我一定错过了一些东西，但我就是不知道它是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:13:26.320

~/ 仅返回 Web 应用程序根目录。如果您需要访问[http://domain.com/test/test.aspx](http://domain.com/test/test.aspx)，并且您网站的根目录是[http://domain.com](http://domain.com)，那么您需要在代码中使用 ~/test/test.aspx 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:19:33.310

你可以使用它 ~/test/ 作为 root ...

# authentication - 移动客户端上的 Aspnet Web API 身份验证

> ID：16152790
> 
> 赞同：2
> 
> 时间：2013-04-22T17:11:07.797
> 
> 标签：authentication, azure, asp.net-web-api

我正在使用 ASP.net Web API 实现一个 API，我正在尝试在我的场景中找到合适的身份验证替代方案，如下所示：

*   API 应该可以从移动客户端访问
*   移动客户端用户不应登录，客户端是本机应用程序
*   API 使用由设备 ID 和用户 ID 组成的凭据进行授权，通过其他方式在应用程序中获取，有效凭据存储在 sql 数据库中
*   客户端不应存储静态凭据
*   API 管理敏感数据并且应该是安全的

所以我探索了一些选项，我发现通过 SSL 进行基本身份验证就足够了，但有些人说这可能还不够，基于声明的解决方案就足够了。

然后我探索了 Azure ACS，我发现它有一些优势，但也许它对我的场景来说过于复杂了？我仍然应该像基本身份验证一样创建一个身份提供者。示例流程（第二种方法）：http: [//msdn.microsoft.com/en-us/library/gg429784.aspx](http://msdn.microsoft.com/en-us/library/gg429784.aspx)

你怎么看？

谢谢

**更新：**

我一直在考虑使用 DotNetOpenOauth 的实现并使用资源所有者密码授予，这样我就可以第一次使用设备 ID 和用户 ID 来获取访问令牌而不存储凭据，服务器可以根据设备授权调用者调用它，这是正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T12:06:57.470

在 VS 2013 中，您可以使用“Asp MVC SPA 应用程序”模板生成一个工作实现，该实现在登录时生成 Oauth2 令牌承载并使用 [Authorize] 属性为 WebApi 控制器调用授权。它使用成员资格和实体框架在 SQL Server 中本地存储用户和散列。只需删除您不需要的 asp mvc 部分并保留 WebApi 的 Auth 部分。更多详细信息：http: [//msdnrss.thecoderblogs.com/2013/09/understanding-security-features-in-the-spa-template-for-vs2013-rc/](http://msdnrss.thecoderblogs.com/2013/09/understanding-security-features-in-the-spa-template-for-vs2013-rc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-24T10:16:18.313

我使用 asp.net mvc 4.0/web api 基本会员资格做到了。您可能会发现它很有帮助。

[https://github.com/aamir-poswal/Mobile-Apps-Authentication-Authorization-ASP.NET-WEB-MVC-4.0](https://github.com/aamir-poswal/Mobile-Apps-Authentication-Authorization-ASP.NET-WEB-MVC-4.0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T01:55:18.167

不存储凭据是个好主意。你可以看看 IdentityServer，它支持资源所有者、隐式和代码流：

[https://github.com/thinktecture/Thinktecture.IdentityServer.v2/wiki](https://github.com/thinktecture/Thinktecture.IdentityServer.v2/wiki)

# ssl-certificate - 如果证书替换为证书链，则客户端通道的 MQ 身份验证失败

> ID：16152795
> 
> 赞同：2
> 
> 时间：2013-04-22T17:11:27.523
> 
> 标签：ssl-certificate, ibm-mq

我有 MQ 版本 6，并且身份验证使用单个个人证书来验证使用客户端通道的连接。现在，从另一端连接到 MQ 服务器的客户端实体想要使用具有根证书、中间证书和另外 2 级证书的证书链。安装根和证书链后，身份验证失败并显示以下消息。

AMQ9637：通道缺少证书。

知道可能出了什么问题吗？证书的顺序似乎是正确的。提前感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:35:56.303

如果客户端访问证书存储时出现问题，它将失败并中止连接。“通道缺少证书”错误表明客户端参与了通道协商，但在询问时无法找到自己的证书。造成这种情况的一些常见原因包括：

*   C 客户端按标签查找个人证书，该证书以不同的标签加载到 KDB 中。例如，如果我的用户 ID 是`t.rob`C 客户端证书必须有一个标签`ibmwebspheremqt.rob`.
*   Java/JMS 客户端将 Keystore 属性指向信任库文件。在 Java 和 JMS 中，密钥库和信任库可能是不同的文件，也可能是同一个文件。无论使用哪种方案，指向正确文件的环境变量。
*   客户端未完全关闭。更改密钥库后，必须从内存中清除旧的密钥库。队列管理器有`RESET SECURITY TYPE(SSL)`执行此操作的命令，但客户端应用程序没有。因此，任何需要查看新版本密钥库的应用程序都必须完全停止，然后重新启动。对于应用程序服务器之类的应用程序可能与服务器分开关闭的情况，通常必须循环整个服务器。

如果其中之一不能解决问题，您需要使用一些详细信息更新问题，例如客户端类型、证书标签、用户 ID、平台等。

# bash - 使用 config 创建一个 shell 脚本来运行基本命令 ssh connection with output

> ID：16152799
> 
> 赞同：-1
> 
> 时间：2013-04-22T17:11:33.583
> 
> 标签：bash, scripting, ssh

我正在考虑创建一个带有配置文件的小型 shell 脚本，我可以在其中设置需要检查的服务器的 IP，并执行一些简单的命令，例如 who、date、uname 等，并将输出打印到文件中。

**更新**

这是我目前拥有的：

```
#!/bin/bash
USERNAME=xxx
HOSTS="localhost localhost"
SCRIPT="uname -a; who; who -b; date; df -h; id"

for HOSTNAME in ${HOSTS} ; do
        echo "${HOSTS}" >> output.log
        ssh -l ${USERNAME} ${HOSTNAME} "${SCRIPT}" >> output.log
        echo "" >> output.log
        echo "" >> output.log
done 
```

有什么方法可以在输出中提供适当的主机 IP 地址/主机名？目前它将打印所有行 HOSTS，因此在每次输出初始化时显示 localhost localhost。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:16:22.650

在所有远程服务器上创建 ssh 密钥 - 为本地服务器上的用户（您）：

```
for node in server1 server2 server3
do
    ssh $node  "uname -a && who"
done 
```

或者对于一堆命令：

```
for node in server1 server2 server3
do
    echo "$node"
    for cmd in 'who'  'ls *.pdf' 
    do
        ssh $node  "$cmd"
    done
done 
```

# ios - iOS：未调用 CLLocationManager 的 didEnterRegion

> ID：16152800
> 
> 赞同：5
> 
> 时间：2013-04-22T17:11:49.967
> 
> 标签：ios, objective-c, uialertview, cllocationmanager, cllocation

我已经成功地注册了一个区域或监控，我知道这是因为`didStartMonitoringForRegion`方法被触发了。

我有一个简单的测试应用程序，`MKMapView`其中我可以看到我当前的位置，我还在地图上将我的区域绘制为红色圆圈，这样我实际上可以“物理地”看到我在什么时候进入或离开这个区域。在`didEnterRegion`and`didExitRegion`方法中，我有一个`UIAlertView`触发。

不久前，我决定离开办公室，带着我的 iPhone 4 去散步，看看这是否可行。我从该区域的中间开始（半径约 200m），我的应用程序一直处于前台。我走了几个街区，离开了该地区，什么也没发生。

我在 SO（我认为）上读到，有时它仅在您离开该区域一定距离时才有效，所以我继续走。

又走了 200m 左右，因为仍然没有出现，我放弃了`UIAlertView`，开始往回走。显然，在重新进入该区域时，`didEnterRegion`也没有开火。

我没有`[locationManager startUpdatingLocation]`在我的代码中调用任何地方，我应该是吗？我只是在真正创建区域并调用`[locationManager startMonitoringForRegion]`.

这`CLLocationManagerDelegate`是我的应用程序委托，看起来很好，因为我`didStartMonitoringForRegion`的触发正常。

我还缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:27:54.130

该文档指出，区域监控独立于其他位置服务工作。这意味着调用 startMonitoringForRegion 就足够了。

确保：

*   [CLLocationManager regionMonitoringAvailable] 返回 YES
*   CLLocationManager.monitoredRegions 包含有效区域

**注意：** 文档指定事件需要 3-5 分钟才能触发。

> 在 iOS 6 中，半径在 1 到 400 米之间的区域在 iPhone 4S 或更高版本的设备上效果更好。（在 iOS 5 中，半径在 1 到 150 米之间的区域在 iPhone 4S 和更新版本的设备上效果更好。）在这些设备上，应用程序可以期望在平均 3 到 5 分钟内收到相应的区域进入或区域退出通知，如果不早点。

和

> 一旦设备从之前的通知移动 500 米或更远，应用程序就会收到通知。它不应期望通知的频率超过每五分钟一次。如果设备能够从网络检索数据，则位置管理器更有可能及时传递通知。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T16:04:49.123

需要注意的一件事（如果您正在模拟位置）：

如果即使您认为您已经在代码中正确完成了所有操作，也不会调用进入和退出，请确保通过以下方式检查您是否禁用了位置模拟：

转到产品 -> 方案 -> 编辑方案 -> 选项选项卡 -> 禁用位置模拟。

我试图通过在模拟位置的同时走出和进入该区域来测试我的区域监控，但正是由于这个原因，它对我不起作用。

# xaml - 当使用网格控件将它们平铺在一起以用于 windows phone 时，矩形之间会出现细线

> ID：16152803
> 
> 赞同：0
> 
> 时间：2013-04-22T17:11:54.600
> 
> 标签：xaml, grid, windows-phone-8, rectangles

下面的代码将在 windows phone 上的平铺矩形之间显示细线。我尝试将 UseLayoutRounding 设置为 true，但似乎没有做任何事情。当使用设备（在我的例子中是 lumina 92​​0）而不是模拟器运行代码时，会有更多细线，但 720p 模拟器似乎在这方面遇到了更多麻烦。是否有一个我错过的简单属性可以解决这个问题？我现在使用矩形缩放到 1.1 来隐藏线条，但不是一个优雅的解决方案，特别是如果矩形变成半透明，那么重叠区域上有亮点。

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0" UseLayoutRounding="True" >
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Rectangle Fill="White" Grid.Row="0" Grid.Column="0" StrokeThickness="0" />
    <Rectangle Fill="White" Grid.Row="1" Grid.Column="0" StrokeThickness="0" />
    <Rectangle Fill="White" Grid.Row="2" Grid.Column="0" StrokeThickness="0" />
    <Rectangle Fill="White" Grid.Row="0" Grid.Column="1" StrokeThickness="0" />
    <Rectangle Fill="White" Grid.Row="1" Grid.Column="1" StrokeThickness="0" />
    <Rectangle Fill="White" Grid.Row="2" Grid.Column="1" StrokeThickness="0" />
    <Rectangle Fill="White" Grid.Row="0" Grid.Column="2" StrokeThickness="0" />
    <Rectangle Fill="White" Grid.Row="1" Grid.Column="2" StrokeThickness="0" />
    <Rectangle Fill="White" Grid.Row="2" Grid.Column="2" StrokeThickness="0" />
    <Rectangle Fill="White" Grid.Row="3" Grid.Column="0" StrokeThickness="0" />
    <Rectangle Fill="White" Grid.Row="3" Grid.Column="1" StrokeThickness="0" />
    <Rectangle Fill="White" Grid.Row="3" Grid.Column="2" StrokeThickness="0" />
</Grid> 
```

![网格之间的细线](https://i.stack.imgur.com/2S5QB.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:36:38.213

如果您在 WXGA (Nokia 920) 和 720p (HTC 8X) 上看到这一点，但在 WVGA (Nokia 820) 上没有看到，那么这是多分辨率比例因子系统的结果。在 WP8 中，所有屏幕都是 480 逻辑像素宽，我们为每个分辨率应用一个乘数（720p 为 1.5，WXGA 为 1.6）。如果您需要完美的布局，您有几个选择：

*   使用单独的 XAML 解决问题
*   使用乘以 1.0、1.5 和 1.6 时沿相同方向舍入的数字。
*   根据 ScaleFactor 值设置宽度

我承认这些都不是完美的，但是根据您的需要，有时对值进行小的更改可以解决任何问题。

您可以在此处找到一篇提供有关此信息的文章：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj206974%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206974%28v=vs.105%29.aspx)

# embedded - 使用实时操作系统

> ID：16152808
> 
> 赞同：0
> 
> 时间：2013-04-22T17:12:22.490
> 
> 标签：embedded, rtos

我对嵌入式领域很陌生。我想学习 RTOS 并将其应用于任何应用程序。我已经在网上搜索了一段时间，我已经完全迷失了。

有没有好的起点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:59:17.223

试试 Labrosse 的 MicroC/OS 书籍之一，它描述了一个示例 RTOS。[或在embedded.com](http://www.embedded.com)上搜索文章。

# javascript - 当表格中已有文本时，在运行无效搜索后向表格添加自定义错误

> ID：16152809
> 
> 赞同：0
> 
> 时间：2013-04-22T17:12:29.223
> 
> 标签：javascript, jquery, sql

如果没有结果，则运行搜索时，会在表中添加“未找到结果”行。运行无效搜索时，例如用户搜索虚假国家/地区。我需要访问标签数据库并输入无效国家错误而不是“未找到结果”。

```
if(SearchResults.empty){
   searchError.add(ss.getLabel("UASJSNSER", request));
   SearchResults.append(searchError);
} 
```

这不会覆盖没有结果时发生的“未找到结果”。
SearchResults 是表，searchError 是发生搜索错误时保存错误的变量。

***更新***

SearchResults 是在搜索运行后填充数据的表。

```
<tr class="odd">
<td class=" sorting_1">0001UK</td>
<td class="">
<td class="">Pl,anPlus Inc</td>
<td class="">PlanPlus PlanIt</td>
<td class="">Permanent Access</td>
<td class=""></td>
<td class="">
<a href="loadAdvisor.do?planner=0001UK">Edit</a>
| 
<a href="javascript:popUp('deleteadvisor.jsp?action=&planner=0001UK');">Delete</a>
</td>
</tr> //this Is when a search happens that has results 

<tr class="odd">
<td class="dataTables_empty" valign="top" colspan="7">No records found</td>
</tr>
</tbody> //Instead of it saying No records found I need it to say the error I call from the database. 
```

# mysql - 在 MySQL 中索引哪些列

> ID：16152811
> 
> 赞同：0
> 
> 时间：2013-04-22T17:12:41.050
> 
> 标签：mysql, select, indexing, between

我正在尝试优化下表，根据 phpMyAdmin，有关表扫描的几个统计数据很高，并且索引不存在或未被使用。（处理程序读取 rnd next 5.7 M）

1.

```
$query = "
  SELECT * FROM apps_discrep
  WHERE discrep_station = '$station'
  AND discrep_date = '$date'
  ORDER BY discrep_timestart"; 
```

2.

```
$query = "
  SELECT * FROM apps_discrep
  WHERE discrep_date BETWEEN '$keyword' AND '$keyword3'
  AND (discrep_station like '$keyword2%') ORDER BY discrep_date"; 
```

索引 discrep_station、discrep_date 和 discrep_timestart 是否正确？自动增量 ID 目前只存在主唯一索引。

-- 表结构

```
`index` int(11) NOT NULL AUTO_INCREMENT,
discrep_station varchar(5) NOT NULL,
discrep_timestart time NOT NULL,
discrep_timestop time NOT NULL,
discrep_date date NOT NULL,
discrep_datetime timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
discrep_show varchar(31) NOT NULL,
discrep_text text NOT NULL,
discrep_by varchar(11) NOT NULL,
discrep_opr varchar(11) NOT NULL,
email_traffic varchar(3) NOT NULL,
email_techs varchar(3) NOT NULL,
email_promos varchar(3) NOT NULL,
email_spots varchar(3) NOT NULL,
eas_row varchar(11) NOT NULL,
PRIMARY KEY (`index`)
ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:00:27.343

在我看来，您可以使用相同的 BTREE 索引获取两个查询，因为这允许您将最左侧的元组用作单独的索引。

[将此 MySQL 文档页面](http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html)视为参考。

```
ALTER TABLE xxx ADD KEY `key1` (`discrep_station`, `discrep_date`, `discrep_timestart`) USING BTREE; 
```

您的第一个查询将使用索引中的所有 3 个字段。第二个查询将只使用索引中的前 2 个字段。

# java - 如何在mybatis中动态拦截和更改sql查询

> ID：16152812
> 
> 赞同：6
> 
> 时间：2013-04-22T17:12:47.127
> 
> 标签：java, sql, mybatis

我在我的项目中使用 mybatis 执行 sql 查询。我需要在执行之前拦截 sql 查询以动态应用一些更改。我读过这样的@Interseptors：

```
@Intercepts({@Signature(type= Executor.class, method = "query", args = {...})})
public class ExamplePlugin implements Interceptor {
  public Object intercept(Invocation invocation) throws Throwable {
    return invocation.proceed();
  }
  public Object plugin(Object target) {
    return Plugin.wrap(target, this);
  }
  public void setProperties(Properties properties) {
  }
} 
```

它确实拦截了执行，但是由于相应的字段不可写，因此无法更改 sql 查询。我应该手动构建整个对象的新实例来替换 sql 查询吗？拦截查询执行以动态更改它的正确位置在哪里？感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-23T02:21:15.647

我希望它会帮助你：

```
@Intercepts( { @Signature(type = Executor.class, method = "query", args = {
        MappedStatement.class, Object.class, RowBounds.class,
        ResultHandler.class
    })
})
public class SelectCountSqlInterceptor2 implements Interceptor
{
    public static String COUNT = "_count";
    private static int MAPPED_STATEMENT_INDEX = 0;
    private static int PARAMETER_INDEX = 1;
    @Override
    public Object intercept(Invocation invocation) throws Throwable
    {
        processCountSql(invocation.getArgs());
        return invocation.proceed();
    }
    @SuppressWarnings("rawtypes")
    private void processCountSql(final Object[] queryArgs)
    {
        if (queryArgs[PARAMETER_INDEX] instanceof Map)
        {
            Map parameter = (Map) queryArgs[PARAMETER_INDEX];
            if (parameter.containsKey(COUNT))
            {
                MappedStatement ms = (MappedStatement) queryArgs[MAPPED_STATEMENT_INDEX];
                BoundSql boundSql = ms.getBoundSql(parameter);
                String sql = ms.getBoundSql(parameter).getSql().trim();
                BoundSql newBoundSql = new BoundSql(ms.getConfiguration(),
                                                    getCountSQL(sql), boundSql.getParameterMappings(),
                                                    boundSql.getParameterObject());
                MappedStatement newMs = copyFromMappedStatement(ms,
                                        new OffsetLimitInterceptor.BoundSqlSqlSource(newBoundSql));
                queryArgs[MAPPED_STATEMENT_INDEX] = newMs;
            }
        }
    }
    // see: MapperBuilderAssistant
    @SuppressWarnings({ "unchecked", "rawtypes" })
    private MappedStatement copyFromMappedStatement(MappedStatement ms,
            SqlSource newSqlSource)
    {
        Builder builder = new MappedStatement.Builder(ms.getConfiguration(), ms
                .getId(), newSqlSource, ms.getSqlCommandType());
        builder.resource(ms.getResource());
        builder.fetchSize(ms.getFetchSize());
        builder.statementType(ms.getStatementType());
        builder.keyGenerator(ms.getKeyGenerator());
        // setStatementTimeout()
        builder.timeout(ms.getTimeout());
        // setParameterMap()
        builder.parameterMap(ms.getParameterMap());
        // setStatementResultMap()
        List<ResultMap> resultMaps = new ArrayList<ResultMap>();
        String id = "-inline";
        if (ms.getResultMaps() != null)
        {
            id = ms.getResultMaps().get(0).getId() + "-inline";
        }
        ResultMap resultMap = new ResultMap.Builder(null, id, Long.class,
                new ArrayList()).build();
        resultMaps.add(resultMap);
        builder.resultMaps(resultMaps);
        builder.resultSetType(ms.getResultSetType());
        // setStatementCache()
        builder.cache(ms.getCache());
        builder.flushCacheRequired(ms.isFlushCacheRequired());
        builder.useCache(ms.isUseCache());
        return builder.build();
    }
    private String getCountSQL(String sql)
    {
        String lowerCaseSQL = sql.toLowerCase().replace("\n", " ").replace("\t", " ");
        int index = lowerCaseSQL.indexOf(" order ");
        if (index != -1)
        {
            sql = sql.substring(0, index);
        }
        return "SELECT COUNT(*) from ( select 1 as col_c " + sql.substring(lowerCaseSQL.indexOf(" from "))  + " )   cnt";
    }
    @Override
    public Object plugin(Object target)
    {
        return Plugin.wrap(target, this);
    }
    @Override
    public void setProperties(Properties properties)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T14:12:09.777

您可以考虑使用字符串模板库（例如 Velocity、Handlebars、Mustache）来帮助您

迄今为止，甚至还有 MyBatis-Velocity ( [http://mybatis.github.io/velocity-scripting/](http://mybatis.github.io/velocity-scripting/) ) 可以帮助您为 sql 编写脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T20:43:47.007

根据您要进行的更改，您可能希望使用mybatis 3的[动态 sql功能](http://mybatis.github.io/mybatis-3/dynamic-sql.html)

# c - 使用 2 个管道在子节点和父节点之间进行管道通信

> ID：16152815
> 
> 赞同：0
> 
> 时间：2013-04-22T17:13:05.557
> 
> 标签：c, unix, pipe

```
#include<dirent.h>
#include<string.h>
#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>

int main()
{
    int canal_son[2];
    int canal_father[2];
    pipe(canal_father);
    pipe(canal_son);
    char mesaj_son[20];
    char mesaj_father[20];

    if (fork()==0)
    {
        printf("Son %d\n",getpid());
        read(canal_father[0],mesaj_father,4);
        int j;
        for(j=0;j<5;j++) 
        {
            printf("The message from father is: %s \n",mesaj_father);
            read(canal_father[0],mesaj_father,4);
            write(canal_son[1],"son",3);
        }
        exit(0);
    }

    int i=5;
    for (i=0;i<5;i++)
    {
        write(canal_father[1],"mesas",4);
        read(canal_son[0],mesaj_son,10);
        printf("we are in father:%s\n",mesaj_son);
    }
} 
```

我要做的是创建用于在孩子和父亲之间进行通信的管道，唯一的问题是当我尝试同时使用两者时，我的进程会冻结，就像它期待一些输入，如果我只使用一个管道，canal_father 或 canal_son一切都很完美，有没有人知道使用 2 个管道有什么问题？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:31:12.437

您的孩子正在尝试从父母的管道中读取两次。结果，孩子和父母都在等待对方开始写作。

完整的事件顺序是这样的：

1.  家长给孩子写信。
2.  孩子从父母那里读。
3.  父母等待从孩子那里阅读。
4.  孩子等待从父母那里阅读。

要解决此问题，请从孩子的开头删除额外的阅读，并在循环中阅读后移动打印输出。所以子代码如下所示：

```
 printf("Son %d\n",getpid());
    int j;
    for(j=0;j<5;j++) 
    {
        read(canal_father[0],mesaj_father,4);
        printf("The message from father is: %s \n",mesaj_father);
        write(canal_son[1],"son",3);
    }
    exit(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:22:53.937

您的代码的结构方式是，儿子在写一条之前尝试从父亲那里读取两条消息，而父亲写一条消息然后尝试读取一条。所以儿子在第二次读取时阻塞（循环中的那个，j=0），而父亲在第一次读取时阻塞（i=0）。

此外，由于您在任何一个进程中都不会关闭任何写入端（有 4 个 - 两个在儿子中，两个在父亲中），因此您永远不会在读取时获得任何 EOF。这在这里并不是真正的问题，因为您从不等待 eof，但如果您尝试做更复杂的事情，可能会成为问题。

最后，您正在编写的消息不包括`'\0'`字符串的终止 NUL ( )，因此当您将 传递给它们时`printf`，它们是未终止的，这将导致问题。您需要在写入的数据中包含 NUL，或者从读取调用（返回值）中获取读取的长度并显式终止字符串。

在任何情况下，您都应该检查读取和写入调用的返回值是否存在错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:27:46.737

您正在读取和写入不同大小、未终止的字符串并执行不同数量的读取和写入。如果您使大小和读/写一致，它就可以工作。

```
if (fork()==0)
{
    printf("Son %d\n",getpid());
    int j;
    for(j=0;j<5;j++)
    {
        printf("The message from father is: %s \n",mesaj_father);
        read(canal_father[0],mesaj_father,6);
        write(canal_son[1],"son",4);
    }
    exit(0);
}

int i=5;
for (i=0;i<5;i++)
{
    write(canal_father[1],"mesas",6);
    read(canal_son[0],mesaj_son,4);
    printf("we are in father:%s\n",mesaj_son);
} 
```

# python - 当第二个单词是大于 20 的数字时，用于检查 6 个单词限制内的两个单词的正则表达式

> ID：16152818
> 
> 赞同：-2
> 
> 时间：2013-04-22T17:13:10.343
> 
> 标签：python, regex

我正在尝试创建一个正则表达式，它将检查一个单词，然后在 6 个单词内检查一个大于 20 的数字。

我认为这应该可行，但我似乎遗漏了一些东西，有人能给我指点吗？

```
\b(?:word1\W+(?:\w+\W+){1,6}[2-9][0-9]|[2-9][0-9]\W+(?:\w+\W+){1,6}word1)\b 
```

这适用于 python 驱动的软件引擎中的自定义分类器。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-22T17:57:38.423

以下正则表达式将找到一组 1-6 个单词，后跟任何大于 20 的整数：

```
(\w+\s){1,6}([1-9][0-9]{2,}|[2-9][0-9]) 
```

或者，以下内容将坚持该数字*在字符串中第一个单词的*6 个单词内（不完全清楚您在后​​面）：

```
^(\w+\s){1,6}([1-9][0-9]{2,}|[2-9][0-9]) 
```

# scala - Play Framework 2.1.1 不解决依赖关系

> ID：16152820
> 
> 赞同：6
> 
> 时间：2013-04-22T17:13:15.193
> 
> 标签：scala, playframework-2.0, sbt

我正在尝试`play dependencies`在我的项目上运行，但找不到我的依赖项。我的情况很独特，因为我在内部 LAN 上运行，完全没有 Internet 访问权限，因此必须在我的本地存储库或本地工件中找到所有内容。我的 Build.scala 看起来像这样：

```
val appDependencies = Seq(
    "rroc.e.jasfeed" % "ms-common" % "1.2-SNAPSHOT",
    "rroc.e.jasfeed" % "metrics-common" % "1.2-SNAPSHOT"
)

val local = "localhost" at "file:///C:/DevTools/apache-maven-3.0.4/repository/"
val art = "private-repo" at "http://10.10.20.230:8080/artifactory/repo/"

val main = play.Project(appName, appVersion, appDependencies).settings(
    scalaVersion := "2.10.1",
    scalaHome := Some(file("C:/DevTools/Scala/scala-2.10.1")),
    autoScalaLibrary := false,
    offline := true,
    ivyLoggingLevel := UpdateLogging.Full,
    resolvers ++= Seq(local,art)
) 
```

我看到的第一个问题是，即使我告诉它`offline := true`它会不断尝试连接到“ [http://repo.typesafe.com/typesafe/](http://repo.typesafe.com/typesafe/) ”，但由于无法访问而始终失败。

我看到的另一个问题是它试图获取“rroc/e/jasfeed/ms-common_2.10/1.2-SNAPSHOT/maven-metadata.xml”而不是“rroc/e/jasfeed/ms-common/1.2-快照/maven-metadata.xml。” 我认为有`autoScalaLibrary := false`会导致停止，但显然不是。

关于 Play/SBT 的工作方式，我有什么遗漏/不了解的地方吗？我似乎无法让它进入真正的离线模式，我似乎无法让它退出将“_2.10”放在我的依赖项末尾。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:25:37.960

对于您的第一个问题，我将冒险猜测您的`plugins.sbt`文件中仍然列出了 Typesafe 存储库。

对于你的第二个问题，我认为你在接受[这个问题的答案之后](https://stackoverflow.com/questions/8288859/how-do-you-remove-the-scala-version-postfix-from-artifacts-builtpublished-wi)

# css - 添加 CSS 褪色边框

> ID：16152821
> 
> 赞同：0
> 
> 时间：2013-04-22T17:13:20.020
> 
> 标签：css

我只是想知道是否有人可以告诉我如何在我的网页上添加左右褪色的边框，例如在这个网站上：

[http://www.farrow-ball.com/colours/paint/fcp-category/list?resetFilters=true](http://www.farrow-ball.com/colours/paint/fcp-category/list?resetFilters=true)

我的网页是固定布局的，宽度为 920 像素到图像/文本框的边缘。

在我学习 CSS 的过程中，任何帮助都将不胜感激！我试图找到有关如何执行此操作的教程或有关此主题的先前主题，但是我不能输入正确的关键字，因为我似乎无法找到我所追求的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:15:57.220

`box-shadow`大多数新浏览器都支持您使用它，但有些使用前缀。

甚至还有一个可以派上用场的发电机

[http://css3gen.com/box-shadow/](http://css3gen.com/box-shadow/)

# java - FileUploader - 在项目中保存数据

> ID：16152823
> 
> 赞同：0
> 
> 时间：2013-04-22T17:13:26.257
> 
> 标签：java, eclipse, jsf, primefaces, path

我正在使用[PF 3.5 File Uploader 上传文件](http://www.primefaces.org/showcase/ui/fileUploadSingle.jsf)

我的上传方法如下所示：

```
public void handleFileUpload(FileUploadEvent event) {  
    log.info("Method handleFileUpload invoked");
    FacesMessage msg = new FacesMessage("Succesful", event.getFile().getFileName() + " is uploaded.");  
    FacesContext.getCurrentInstance().addMessage(null, msg);  

    InputStream inputStream = null;
    OutputStream out = null;

    try {
        File targetFolder = new File("\\resources\\uploads");
        if(!targetFolder.exists()) {
            targetFolder.mkdirs();
        }

        inputStream = event.getFile().getInputstream();
        File outFile = new File(targetFolder, event.getFile().getFileName());
        log.info("copy file stream to " + outFile.getAbsolutePath());
        out = new FileOutputStream(outFile);
        int read = 0;
        byte[] bytes = new byte[size];
        log.info("read file stream");           
        while ((read = inputStream.read(bytes)) != -1) {
            out.write(bytes, 0, read);
        }

        out.flush();
    } catch (IOException e) {
        log.error(e);
    } finally {
        ...
    } 
```

目前我的文件上传到`\\resources\\uploads"`. 那个`s the path to a folder on the`C：`。

但是，我想将我的上传上传到我的 eclipse 项目中的路径。如何改变路径？真的很感谢你的回答！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:34:54.307

> *但是，我想将我的上传上传到我的 eclipse 项目中的路径。*

由于此答案中提到的原因，**绝对不建议这样做：** [Uploaded image only available after refresh the page](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page/8889096#8889096)。关键是：IDE 的工作区和服务器的部署文件夹绝对不是永久的文件存储。上传的文件将无法访问和/或像魔术一样消失。

只需将它们保存在 IDE 工作区和服务器部署文件夹之外的路径中。你做得很好。我只会通过系统属性、环境变量或属性文件设置来配置路径，这样您每次更改上传位置时都不需要编辑、重新编译、重建等代码。

如果您的具体问题更多是上传文件的服务，那么只需将上传文件夹添加为服务器配置中的另一个上下文，或者为服务作业创建一个简单的 servlet，或者当您使用 PrimeFaces 时，只需使用`<p:fileDownload>`或指向想要的。`<p:graphicImage>``StreamedContent``FileInputStream`

### 也可以看看：

*   [如何在 JSF 中保存上传的文件](https://stackoverflow.com/questions/14211843/how-to-save-uploaded-file/14214223#14214223)

# php - 括号在 FPDF 中显示为 ASCII 代码？

> ID：16152826
> 
> 赞同：0
> 
> 时间：2013-04-22T17:13:28.863
> 
> 标签：php, pdf, fpdf

我正在使用 FPDF 创建具有从 MySQL 查询填充的某些文本元素（作为单元格）的文档。一个这样的字段是 $company。

只要公司名称包含括号（即“Acme Fixings (UK) Ltd”），生成的 PDF 就会显示

```
Acme Fixings &#40;UK&#41; Ltd 
```

我尝试使用 addlashes() 转义括号无济于事。用单引号字符串替换变量可以正常工作。

我正在使用提供的 Arial 字体。

有什么线索吗？

谢谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:37:22.810

似乎由于某种原因，在将数据输入数据库时​​，括号被认为是危险的，因此被编码为 HTML 实体。

`html_entity_decode`反转这个过程，产生括号。

请注意，如果您将它输出到浏览器并且它“看起来”很好，那是因为浏览器解码了 HTML 实体。您应该使用 View Source 查看服务器实际输出的内容。

# javascript - js解释器工作期间如何防止/避免脚本执行

> ID：16152827
> 
> 赞同：0
> 
> 时间：2013-04-22T17:13:33.617
> 
> 标签：javascript

加载过程中将解析的 js 文件示例：

```
var Test = {
   someProp: Utils.getProp()
}
var Utils = {
   myAttr: "",

   getProp: function() { 
      alert("Test"); 
   }
} 
```

我在页面加载过程中遇到的错误是

```
"TypeError: Utils is undefined" 
```

据我了解，js 解释器在页面加载期间执行脚本，在这种情况下会发生错误。这里的问题是：加载页面并避免脚本执行是真的吗？或者我怎样才能避免错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:16:23.027

由于`Test`取决于`Utils`，`Utils`必须首先定义。

```
var Utils = {
   myAttr: "",

   getProp: function() { 
      alert("Test"); 
   }
} 
var Test = {
   someProp: Utils.getProp()
} 
```

# c# - 从集合中转换为对象与使用 foreach

> ID：16152828
> 
> 赞同：0
> 
> 时间：2013-04-22T17:13:37.333
> 
> 标签：c#

我对这两种说法之间的区别感到有些困惑。

这个可以正常工作并打印出属性结果。

```
foreach( string key in result.Properties.PropertyNames )
{
    foreach( object property in result.Properties[key] )
    {
         Console.WriteLine("{0}:{1}", key, property.ToString());
    }
} 
```

以下不起作用。我认为通过将特定属性转换为对象，这将是同一件事，但显然不是：

```
foreach( string key in result.Properties.PropertyNames )
{
     if( key == "name" )
     {             
         Console.WriteLine("{0}:{1}", key, ((object)(result.Properties[key])).ToString() );            
     }
} 
```

我得到了 print 的对象类型`result.Properties[key]`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:19:33.447

这两个片段做了完全不同的事情。

在第一个示例中，`result.Properties[key]`是某种类型的集合 ( `IEnumerable`)。它循环遍历集合中的每个对象，并将该对象的字符串表示形式 ( `ToString()`) 打印到屏幕上。

在第二个示例中，它只是打印集合本身的字符串表示形式，通常只是类型的名称。
[注意：您几乎永远不会想要`ToString`包含集合的内容。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:18:57.227

不同之处在于，即使`property`是`object`第一个示例中的类型，实际属性仍然具有用于 的基础类型`ToString()`。您只是使用该`object`类型来保存更派生的类型。

在第二个示例中，您将其强制转换为 type`object`您是在告诉编译器“我不在乎属性实际上是什么类型，将其视为 an`object`所以它最终使用`object.ToString()`而不是`property.ToString()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:37:19.947

属性是具有属性名称和每个属性名称一组值的对象。所以... result.Properties[key] 将返回一个 ResultPropertyValueCollection，其中包含一个或多个值。

您可以枚举您在第一段代码中所做的这些值。

在第二个示例中，您希望显示此集合中的所有值。这可以通过 LINQ 轻松完成。为了更好地理解，我将代码拆分，但可以写成一行：

```
foreach( string key in result.Properties.PropertyNames )
{
     if( key == "name" )
     {
         IEnumerable collection = result.Properties[key];
         string[] seperateValues = collection.Cast<object>().Select(o => o.ToString()).ToArray();
         string joinedValues = String.Join(", ", seperateValues)
         Console.WriteLine("{0}:{1}", key, joinedValues);             
     }
} 
```

# ios - 在主项目中使用子项目的 xcdatamodelId

> ID：16152831
> 
> 赞同：0
> 
> 时间：2013-04-22T17:14:00.770
> 
> 标签：ios, core-data, subproject

我在 XCode 中有一个依赖子项目工作的主项目。子项目基本上是一个库，它还定义了一个数据库模型，以及与之交互的方式。

要在主项目中使用子项目，我只是在主项目中删除了子项目 xcodeproj 文件，进行了一些设置（如指定标题搜索路径），仅此而已。

我正在使用核心数据，但如果我尝试通过创建托管对象上下文直接使用 .xcdatamodelId 文件，它会失败：看起来主项目找不到子项目资源（.h 和 .m 文件除外）。

到目前为止，我发现的唯一解决方案是从主项目的子项目中复制 .xcdatamodelId 文件，它可以解决问题。但这并不令人满意，因为如果我的模型发展，我必须维护两个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T13:58:19.407

我在这个问题上苦苦挣扎了一段时间，我想在这里回答它，因为我认为它很重要。

为了将子项目中的模型文件添加到父项目中，您只需在 Finder 中找到要添加的模型文件。然后，您可以将它们拖到您认为合适的任何文件夹中。当 Xcode 显示“选择添加这些文件的选项”提示时，**取消选择**“将项目复制到目标组的文件夹”项，您可以选择“创建组...”或“创建文件夹引用...”。在此过程之后，您应该在 Build Settings 的 compile sources 阶段看到模型文件。

重要的是要注意，将模型文件（在 Xcode 中）从子项目拖到“编译源”或父项目中，据我所知是行不通的，所以最好在 Finder 中进行。

# c# - 从 BackgroundWorker 调用方法

> ID：16152832
> 
> 赞同：5
> 
> 时间：2013-04-22T17:14:02.430
> 
> 标签：c#, backgroundworker

我讨厌我的第一个问题似乎已被多次回答，但我仍然很难弄清楚如何使用 BackgroundWorker 调用方法。

我正在使用一系列类和方法处理一个非常大的文本文件。在用户选择一个工具条项目后，整个过程就开始了。依次，它是这样的：

*   用户选择工具条项目
*   用户通过对话框选择要处理的文件
*   行动开始

我想我可以从用户弹出初始对话框的那一刻起将所有内容包装到 BackgroundWorker 中，但我现在想做的只是将完成所有繁重工作的方法放入它自己的 BackGroundWorker 实例中。我也会添加一个 ProgressBar，但我认为如果我可以让 BackgroundWorker 进程滚动，我可以处理它。

从顶部开始（用于示例目的的伪代码。为简洁起见，省略了很多）：

```
private void ToolStripMenuItem_Click(object sender, EventArgs e)
{
     string fileName = openSingleFile.FileName;
     processFile(fileName); 
}

static public void processFile(string fileName)
{
// many vars/loops exist but not shown

    foreach (data in bigData)
    {
        processItem(stringA, stringB); // <-- this method is where the expensive work is done 
        x++; 
    }  
} 
```

我创建了一个 BackgroundWorker 的实例...：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    // Things go here
} 
```

...而且我已经尝试了太多的东西来列出，所以我回到了上面演示的开头。

如果我了解 BackgroundWorker，我需要执行以下操作：

*   将上面代码中的 processItem(stringA, stringB) 替换为：

    `backgroundWorker1.RunWorkerAsync(processItem(stringA, stringB));`

...然后进行某种类型的 DoWork 调用？...然后进行某种类型的 RunWorkerCompleted 调用？

不知道为什么我的大脑会冻僵，但我很尴尬我花了这么多时间却没有结果。任何帮助将不胜感激。如果没有 StackOverflow，我很久以前就会成为 DOA。

仅供参考：我参考了其他 SO 帖子、MSDN 和 DotNetPerls 示例。我想，我只是在概念上遗漏了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:44:41.880

> 将上面代码中的 processItem(stringA, stringB) 替换为...

不，这就是你遇到麻烦的原因。您绝对希望将 processFile() 调用移至工作人员。在工作人员中运行 processItem() 没有明显的好处，至少在您发布的片段中没有。这样做很困难，需要启动多个工人。每个项目一个。有很多工人，每个人都做很少的工作，这不是很健康。如果确实有必要，那么您不想使用 BackgroundWorker，您将需要一种完全不同的方法，其中包含多个线程，这些线程使用线程安全队列中的工作包。如果可以避免，请不要去那里。

唯一需要解决的重要问题是传递 processFile() 需要的字符串。幸运的是 BackgroundWorker.RunWorkerAsync() 有一个采用单个对象的重载。传递你的字符串。在 DoWork 事件处理程序中获取其值，将 e.Argument 转换回字符串。因此：

```
 private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e) {
        string path = (string)e.Argument;
        processFile(path);
    }

    private void processToolStripMenuItem_Click(object sender, EventArgs e) {
        backgroundWorker1.RunWorkerAsync(openSingleFile.FileName);
        processToolStripMenuItem.Enabled = false;
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e) {
        processToolStripMenuItem.Enabled = true;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:29:52.297

```
BackgroundWorker bgw; 
```

在 Load 事件或构造函数中：

```
bgw = new BackgroundWorker();
bgw.WorkerReportsProgress = true;
//bgw.WorkerSupportsCancellation = true;

bgw.DoWork += bgw_DoWork;
bgw.ProgressChanged += bgw_ProgressChanged;
bgw.RunWorkerCompleted += bgw_RunWorkerCompleted; 
```

/

```
 private void ToolStripMenuItem_Click(object sender, EventArgs e)
    {
        string fileName = openSingleFile.FileName;

        bgw.RunWorkerAsync(fileName);
    }

    private void bgw_DoWork(object sender, DoWorkEventArgs e)
    {
        string fileName = (string)e.Argument;

        processFile(fileName);
    }

    private void bgw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        int Progress = e.ProgressPercentage;

        //Update progressbar here
    }

    private void bgw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        //Job completed
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:21:55.237

启动一个新的后台工作者是一项昂贵的操作。您不想为循环的每次迭代都启动一个。相反，将整个循环放在单个后台工作人员的范围内。

运行时`ToolStripMenuItem_Click`创建您的后台工作人员，`processFile`在`DoWork`事件处理程序中完成。

确保在做这项工作时你真的只是在做这项工作，而不是更新 UI。您需要将业务逻辑与用户界面分开。如果您想使用当前进度更新 UI，请调用`ReportProgress`并确保有一个事件处理程序来正确更新 UI。

如果您需要在工作完成后更新 UI，那么您可以在`RunWorkerCompleted`事件处理程序中执行此操作。如果您正在执行的工作生成了一些用于更新 UI 的结果，请使用`Result`后台工作人员的属性将其从`DoWork`方法传递给已完成的处理程序。

# php - wordpress代码的模态登录

> ID：16152833
> 
> 赞同：0
> 
> 时间：2013-04-22T17:14:07.703
> 
> 标签：php, wordpress

我正在使用 mymodal 让我的用户登录他们的帐户，不幸的是，当用户登录时，它仍然显示相同的按钮和登录选项。如何在用户登录时将其更改为显示注销。此代码都在一个文件中。

```
<?php } ?>

<?php if($smof_data['disable_signin_btn'] !='disable') { ?>

<div class="button-second">

    <a href="#myModal2" role="button" class="btn btn-primary btn-small" data-toggle="modal"><?php _e('Sign In','siiimple') ?>&nbsp;&nbsp;<span class="icon-circle-arrow-right"></span></a>

    <div id="myModal2" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

        <div class="modal-header">

            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>

            <h3 id="myModalLabel2"><?php _e('Sign In','siiimple') ?></h3>

        </div><!-- END MODAL HEADER -->

        <div class="modal-body">

            <form method="post" action="<?php echo site_url(); ?>/wp-login.php" id="loginform_custom" class="form-horizontal" name="loginform_custom">

                <div class="control-group">

                    <label class="control-label"><?php _e('Username','siiimple') ?></label>

                    <div class="controls">

                            <input type="text" class="u-name" name="log" />

                    </div><!-- END CONTROLS -->

                </div><!-- END CONTROL GROUP -->

                <div class="control-group">

                    <label class="control-label"><?php _e('Password','siiimple') ?></label>

                    <div class="controls">

                        <input type="password" class="u-pass" name="pwd" />

                    </div><!-- END CONTROLS -->

                </div><!-- END CONTROL GROUP -->

                <div class="control-group">

                    <div class="controls">

                        <label class="checkbox">

                            <input type="checkbox"> <?php _e('Remember me','siiimple') ?>

                        </label>

                        <input type="submit" class="btn" name="submit" value="Login" /><div class="clear" style="clear:both"></div><a href="<?php echo site_url();?>/wp-login.php?action=register" class="register-modal"><?php _e('Register','siiimple') ?></a><a href="<?php echo wp_lostpassword_url(); ?>" title="Lost Password"><?php _e('Lost your password','siiimple') ?></a>
                    </div><!-- END CONTROLS -->

                </div><!-- END CONTROL GROUP -->
          <?php do_action( 'wordpress_social_login' ); ?> 

            </form><!-- END FORM -->

        </div><!-- END MODAL BODY -->

    </div><!-- END MODAL2 -->

</div><!-- END LIST -->

<?php } ?>

    <?php wp_nav_menu( array(
    'theme_location' => 'sub_menu',
    'sort_column' => 'menu_order',
    'menu_class' => 'sub-menu',
    'fallback_cb' => 'default_menu'
    )); 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:24:57.367

使用[`is_user_logged_in()`](http://codex.wordpress.org/Function_Reference/is_user_logged_in)条件标签：

```
<?php
    if( is_user_logged_in() ) {
        // logout button
    } else {
        // login button + login form
    }
?> 
```

# objective-c - UIAlert 关闭后加载新视图

> ID：16152838
> 
> 赞同：0
> 
> 时间：2013-04-22T17:14:36.300
> 
> 标签：objective-c

如何使警报中的“确定”单击将用户引导到另一个视图？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:19:22.200

`UIAlertViewDelegate` `delegate`在你的 viewController.h 文件中设置

初始化 UIAlertView 对象时不要忘记设置委托

然后在您的 .m 文件中实现以下方法，并在其中编写您的重定向代码

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex  // after animation
{
    // Your redirect code goes here
} 
```

# javascript - iOS 4 -> iOS 5/6 之间是否有任何 javascript 引擎差异会导致此代码片段中出现此错误？

> ID：16152843
> 
> 赞同：0
> 
> 时间：2013-04-22T17:14:48.887
> 
> 标签：javascript, ios, mobile-safari

我在工作中遇到了 javascript 错误（它发生在在模拟器上测试的 iOS 4.2/4.3 上）
Safari 模拟器上的 javascript 调试控制台显示以下错误消息：

SyntaxError：解析错误 - 第 43 行

这是第 42-43 行的代码

```
line 42: args[0] = obj[methodName].bind(obj); 
line 43: jobQueue.do.apply(jobQueue, args); 
```

应用于 jobQueue 对象的“do”函数是一个内部函数，除了切片和数组以及将一些元素推入另一个数组之外没有什么特别的。

```
do: function () {
        var args = Array.prototype.slice.call(arguments);
        this.pendingJobs.push(args);
        scheduleJobProcessing.call(this);
    } 
```

我怀疑问题出在“应用”函数上，这很奇怪，因为参数是正确的（第二个参数始终是[MDN](https://developer.mozilla.org/es/docs/JavaScript/Reference/Global_Objects/Function/apply)要求的数组）。
所以...既然这是我们仅在 iOS 4 中检测到的问题，那么 iOS 4 -> iOS 5/6 之间是否存在任何 javascript 引擎差异会导致该代码片段出现问题？提前致谢

# ubuntu - 配置 Celery 以通过 Unix 套接字与 Redis 通信

> ID：16152848
> 
> 赞同：9
> 
> 时间：2013-04-22T17:15:06.747
> 
> 标签：ubuntu, redis, celery

我希望 Celery 建立在 Redis 而不是默认的 RabbitMQ 上。

[芹菜文档](http://docs.celeryproject.org/en/latest/getting-started/brokers/redis.html)解释说：

> 配置很简单，只需配置你的 Redis 数据库的位置：
> 
> `BROKER_URL = 'redis://localhost:6379/0'`
> 
> URL 的格式为：
> 
> `redis://:password@hostname:port/db_number`
> 
> 方案后的所有字段都是可选的，并且将默认为端口 6379 上的 localhost，使用数据库 0。

但是，我将 Redis 设置为不监听端口，而是监听套接字。

是否有支持这一点的 URI 方案？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-09-10T15:38:29.623

Redis 套接字从 Celery 1.3 开始可用。语法是：

```
BROKER_URL = 'redis+socket:///tmp/redis.sock' 
```

如果要使用特定数据库：

```
BROKER_URL = 'redis+socket:///tmp/redis.sock?virtual_host=1' 
```

该文档不是最新的，但您可以查看此问题以获取更多详细信息：

*   [https://github.com/celery/celery/issues/1283](https://github.com/celery/celery/issues/1283)
*   [https://github.com/celery/kombu/pull/238](https://github.com/celery/kombu/pull/238)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:29:42.410

celery redis broker 不支持socket连接，目前只支持TCP连接。

经过一番谷歌搜索后，我在 github 上找到了这个项目[celery-redis-unixsocket 。](https://github.com/piquadrat/celery-redis-unixsocket)如果这对你有用，你可能会看看。

# magento - Magento 块标签

> ID：16152850
> 
> 赞同：-4
> 
> 时间：2013-04-22T17:15:08.700
> 
> 标签：magento

请解释 Magento 块标签的所有属性

```
<block type="catalog/product_featured" name="product_featured" 
     as="product_featured" 
     template="catalog/product/featured.phtml"></block>
<block type="catalog/product_featured" name="product_featured"              template="catalog/product/featured.phtml">
<action method="setLimit"><limit>2</limit></action>
 </block> 
```

还有为什么我们需要两倍的块标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:05:47.693

type = PHP 文件模板将查找方法。这里是 Mage_Catalog_Block_Product_Featured.php

name = 块的名称。它在页面中应该是唯一的。

as = 别名。较小的名称形式。它在它的父块中应该是唯一的。

template = 此块附加到的模板文件（视图）。您可以使用`$this`.. 例如 $this->getName()从 this 内部的块类型调用方法

`name`与`as`示例：

```
<reference name="left">
    <block type="block/type1" name="first_block" template="template1.phtml">
       <block type="abc/abc" name="abc" as="common" template="abc.phtml"/> 
    </block>
    <block type="block/type2" name="second_block" template="template2.phtml">
       <block type="xyz/xyz" name="xyz" as="common" template="xyz.phtml"/>            
    </block>
</reference> 
```

因此，您现在可以`abc`从`first_block`AND`xyz`中调用块名称`second_block`as `$this->getChildHtml('common');`，但是看到两个被调用的块将根据它们的调用父级而有所不同。

# python - 如何在python中禁用堆栈跟踪

> ID：16152851
> 
> 赞同：5
> 
> 时间：2013-04-22T17:15:09.053
> 
> 标签：python, logging, stack-trace

我想禁用在引发异常时打印的堆栈跟踪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-05T00:00:45.580

每当代码调用该`logger.exception`方法时，就会自动打印堆栈跟踪。那是因为方法的`exc_info`参数的默认值`.exception`是True。

查看源代码：

```
def exception(msg, *args, exc_info=True, **kwargs):
    """
    Log a message with severity 'ERROR' on the root logger, with exception
    information. If the logger has no handlers, basicConfig() is called to add
    a console handler with a pre-defined format.
    """
    error(msg, *args, exc_info=exc_info, **kwargs) 
```

为了防止这种情况，您可以发送`exc_info=False`到这样的 `.exception`方法：

```
 try:
      raise Exception("Huston we have a problem!")
  except Exception as ex:
      logger.exception(f"Looks like they have a problem: {ex}", exc_info=False) 
```

虽然这看起来可行，但强制用户在`exc_info=False`每次使用该方法时都编写是不好的。因此，为了从程序员的肩上分担这个负担，你可以给`.exception`方法打补丁，让它像这样的常规`.error`方法：

```
# somewhere in the start of your program
# money patch the .exception method
logger.exception = logger.error

  try:
      raise Exception("Huston we have a problem!")
  except Exception as ex:
      logger.exception(f"Looks like they have a problem: {ex}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:15:09.053

环顾四周，我发现了以下解决方案/解决方法：

sys.tracebacklimit = 0

# java - Java 工作空间和文件路径

> ID：16152857
> 
> 赞同：4
> 
> 时间：2013-04-22T17:15:32.010
> 
> 标签：java, file, relative-path, absolute-path

我有一个可能很容易解决的问题。我的项目中有一个文件夹，并希望使用相对路径获取它：

```
new File("/folder") 
```

这给了我`FileNotFoundException`

如果我这样尝试

```
new File("d:/workspace/project/folder") 
```

有用

我怀疑它因此不起作用： `new File("").getAbsolutePath()`返回：`D:\eclipse` 所以不是工作区的路径。

我做错了什么还是我需要更改eclipse中的一些设置

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:41:19.780

Don 指出您使用的是绝对路径。那就是问题所在。

默认情况下，Eclipse 中的工作目录是您执行的程序所在的项目路径。

通过显示此属性，您始终可以知道工作目录：

```
System.out.println(System.getProperty("user.dir")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T18:36:50.973

刚刚在 djna 建议的运行配置中找到了我的答案，但不是在环境选项卡中，而是在参数选项卡中。有一个工作目录部分，其中设置了 d:\eclipse 并且需要设置为 ${workspace_loc:myproject}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T17:24:17.677

```
new File("/folder") 
```

不是相对路径，而是绝对路径。如果要访问相对路径，请使用

```
new File("folder") 
```

或者

```
new File("./folder") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T17:20:04.453

你可以试试这个吗？

```
File file = new File("folder");
String path = file.getAbsolutePath();
FileInputStream fis = new FileInputStream(path); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T17:24:10.950

在运行配置中，您可以指定启动的工作目录。这在不同的 Eclipse 中可能会有所不同，但对我来说：

```
Run->Run Cofigurations ...
Select Java Application, right Click New
Environment Tab gives you a chance to specify the working directory
    Select Other, and then Workspace ... to specify a project in your workspace 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T17:24:17.087

`D:\eclipse`是您项目的根文件夹。如果您`D:\java`在同一个工作区中创建另一个项目，`new File("").getAbsolutePath()`将返回`D:\java`，因此这与您的工作区的路径无关。

如果您想在项目中创建一个文件夹，请使用`.`，例如：

```
System.out.println(new File(".\\test").getAbsolutePath()); 
```

# java - 通过图形输入板在 HTML Canvas 元素中绘制

> ID：16152860
> 
> 赞同：1
> 
> 时间：2013-04-22T17:15:46.653
> 
> 标签：java, graphics

任何人都知道如何检测图形输入板驱动程序并添加对`<canvas>`直接从平板电脑直接绘制到元素的支持？

我想需要某种Java小程序之类的东西吗？

# zend-framework2 - ZF2: 'required' => false 忽略 DateSelect 元素

> ID：16152865
> 
> 赞同：1
> 
> 时间：2013-04-22T17:16:00.000
> 
> 标签：zend-framework2, validation, required, zend-form2

在 Zend Framework 2 应用程序中，我的控制器操作方法中有以下形式：

```
public function testAction()
{
    $form = new \Zend\Form\Form('test');

    $date = new \Zend\Form\Element\DateSelect('date');
    $date->setOptions(array(
            'label'    => 'Date',
            'min_year' => date('Y') - 10,
            'max_year' => date('Y') + 10,
        )
    );

    $date->getDayElement()->setEmptyOption('day');
    $date->getMonthElement()->setEmptyOption('month');
    $date->getYearElement()->setEmptyOption('year');

    $form->add($date);

    $form->add(array(
        'name'    => 'submit',
        'attributes' => array(
            'type'  => 'submit',
            'value' => 'submit',
            'id' => 'submitbutton',
        ),
    ));

    if ($this->request->isPost()) {
        $data = $this->request->getPost();            
        $form->setData($data);

        if ($form->isValid()) {
            $data = $form->getData();
            // more code
        }
    }

    return array('form' => $form);
} 
```

现在，如果我提交表单，我会收到验证消息：

'输入似乎不是有效日期'

这是正确的，但我只想知道该字段是否是必需的。如果我查看`DateSelect`元素的源代码，我会看到一个`getInputSpecification()`默认设置为 false 的方法，还有一个`getValidator()`方法需要空日期不符合的格式。

如果不需要输入，我如何绕过验证（显然，在我的真实形式中，我有更多元素）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T07:30:02.097

我通常使用工厂模式，您可以设置该字段是否为必填项，即

```
$inputFilter->add($factory->createInput(array(
            'name'     => 'availableDate',
            'required' => true,
            'filters'  => array(
                array('name' => 'StripTags'),
                array('name' => 'StringTrim'),
            ),
            'validators' => array(
                array(
                    'name'    => 'StringLength',
                    'options' => array(
                        'encoding' => 'UTF-8',
                        'max'      => 20,
                    ),
                ),
            ),
        ))); 
```

参考所需的字段 - 您可以将其设置为 false

# c# - C# 中 long 与 Int64 的接受样式？

> ID：16152868
> 
> 赞同：57
> 
> 时间：2013-04-22T17:16:07.197
> 
> 标签：c#

我知道它们是相同的变量类型，但是是否有一个公认的标准“风格”来使用`long`or `Int64`？

我想使用最常见的一种。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-22T17:19:55.967

来自 Microsoft 的所有文档以及您在网上找到的 99.999%（左右）的代码都将使用`long`. 例如，请参阅 C# 参考中的数字数据类型定义：http: [//msdn.microsoft.com/en-us/library/exx3b86w.aspx](http://msdn.microsoft.com/en-us/library/exx3b86w.aspx)

最后，这与使用`string`or是相同的问题`String`。通常，小写名称用于数值数据类型，如数字或字符，而大写名称用于类。在 C#`Int64`中是值数据类型的复杂数据类型（具有字段、属性和方法的结构，请参阅[此处](http://msdn.microsoft.com/en-us/library/system.int64.aspx)的文档） （请参阅[此处](http://msdn.microsoft.com/en-us/library/ctetwysk.aspx)`long`的文档）。通常，人们不会将该类用于调用该类中的方法以外的其他用途，例如. 所以你通常会发现这样的东西：`Int64``Int64.Parse`

```
long variable = 9.5f;
string text = "8.4";
long anotherVariable = Int64.Parse(text); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-22T17:18:37.370

对于这样的问题，您会得到很多不同的意见，因为它们是完全相同的。所以这取决于你。Microsoft 几乎总是在他们的文档和示例中使用`long`,`int`和。`short`它只是 VB.NET 和 C# 中的别名。所以我想以这种方式使用它们会更好。

*   `long` 代替`Int64`
*   `int` 代替`Int32`
*   `short`代替`Int16`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-22T17:26:42.423

C# 使用这些关键字（如 long、int string）作为 .NET 类型的别名。

*   `int`=`System.Int32`
*   `long`=`System.Int64`
*   `string`=`System.String`

使用这些关键字的第一个参数是它是语言自带的，所以在编写语言时使用它。

使用这些关键字的第二个参数是您不必放在代码文件`using System;`之上。

另一个好处可能是有人可以创建一个名为的新类型`Int64`并将其放在您的命名空间中的某个位置（我知道......这会很疯狂）。如果您的旧代码使用 type `Int64`，您的旧代码可能会停止运行。如果您的旧代码正在使用`long`（的别名`System.Int64`），那么它仍然可以正常工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-22T17:31:34.730

您应该使用`long`,`int`和`short`。

我知道的一个例外是函数名。看看[BitConverter.ToInt64](https://msdn.microsoft.com/en-us/library/system.bitconverter.toint64%28v=vs.110%29.aspx)。

原因是[CIL](https://en.wikipedia.org/wiki/Common_Intermediate_Language)中没有定义 long而 int64 是。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T17:23:04.977

我认为这归结为清晰度与兼容性。`Int16`,`Int32`和`Int64`比`short`,`int`和更清晰`long`。你只要看一下它就知道`Int16`它的长度是 16 位。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T17:26:31.117

我认为在大多数情况下，这将归结为个人喜好，但如果您在没有指定底层平台的情况下严格谈论“C#”，我的想法会有所不同。如果您正在开发以遵守跨平台可移植性和“面向未来”的 C# 标准，那么“long”将是最好的方式，因为它是语言本身的实际构造。“Int64”是框架中的一个实际结构（System.Int64）。

# ruby-on-rails - aws-sdk ruby 和连接重置导轨

> ID：16152872
> 
> 赞同：0
> 
> 时间：2013-04-22T17:16:18.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-web-services, amazon-s3, paperclip

我将 aws-sdk gem 与我的 rails 应用程序和回形针一起使用将图像上传到 amazon s3 ..但是当我尝试上传图像时总是发现这些错误。

```
Errno::ECONNRESET (An existing connection was forcibly closed by the remote host.): 
```

我搜索了很多没有解决方案。我正确使用它超过 6 个月，突然出现错误。我检查了凭据并仍然提出这些问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T22:31:35.570

在将它们修复到正确的时间和时区后，问题出在我的 Windows 时钟和时区中，问题消失了

# ios - 在 iOS 上显示程序生成的视频帧的最有效方式

> ID：16152877
> 
> 赞同：1
> 
> 时间：2013-04-22T17:16:33.403
> 
> 标签：ios, video, ios6, xamarin.ios

我需要将程序生成的图像序列显示为视频序列，最好使用内置控件（控件很好，但没有要求），我只是在寻找有关使用哪个 API 的一些指导。似乎有很多选择，但我不确定哪一个最适合我的需要。[GPUImage](https://github.com/BradLarson/GPUImage)、Core Video、Core Animation、OpenGL ES 还是其他？

如果有帮助，仅针对 iOS 6 及更高版本将没有问题。

**更新**：我更喜欢允许我直接显示视频帧而不是将它们写入临时电影的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:50:19.947

检查 UIImageView 的 animationImages 属性。这可能会满足您的需求。基本上，您会将所有图像存储到此数组中，以便它可以为您处理动画。[UIImageView 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImageView_Class/Reference/Reference.html)

# c++ - 永久更改光标

> ID：16152878
> 
> 赞同：4
> 
> 时间：2013-04-22T17:16:33.827
> 
> 标签：c++, api, winapi

我正在尝试将光标永久更改为其他光标。

当我这样做时，我得到的只是新光标，直到我再次移动光标。

```
 case WM_RBUTTONDOWN:
      cursor = LoadCursor (NULL, IDC_CROSS) ;
      SetCursor(cursor);
      break; 
```

我该如何更改它以使其成为永久性的..我知道它与 wndclass ..

当我在 wndproc 中创建窗口时，我对 IDC_ARROW 说 wndclass.hIcon 但我不能在 WM_RBUTTONDOWN 中调用 wndclass ..

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:19:31.427

每次鼠标移动都会[`WM_SETCURSOR`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648382%28v=vs.85%29.aspx)向您的窗口发送一条消息；默认窗口过程将响应配置的光标。覆盖以返回您的新光标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T17:19:04.257

从[文档中`SetCursor`：](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648393%28v=vs.85%29.aspx)

> 如果您的应用程序必须在窗口中设置光标，请确保将指定窗口类的类光标设置为 NULL。**如果类光标不为NULL，则每次移动鼠标时系统都会恢复类光标。**

您需要从窗口类中删除任何指定的光标。

# ruby-on-rails - 没有对应记录时如何验证失败（多对多关系）

> ID：16152879
> 
> 赞同：0
> 
> 时间：2013-04-22T17:16:33.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两个模型`Link`并且`Feed`有很多关系（有很多：通过`LinkFeed`加入模型）。每个链接应属于 1 个或多个 Fe​​ed。所以我想允许创建链接（因为有相应的Feed记录）：

```
@feed = Feed.create(name: "Test Feed")
@feed.links.create!(url: "http://google.com") 
```

`Link.create!(url: "http://google.com")`并且由于没有对应的 Feed 记录而无法使用 simple 创建链接。我怎样才能做到这一点？

编辑：我添加了这个验证：

```
validate do
  errors.add(:base, "Must have at least one feed") unless feeds.size > 0
end 
```

但是现在两个示例都因此错误而失败：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:21:06.367

尝试向`must not be null`您的外键添加条件`feed_id`。

```
class Link

  validates :feed_id, :presence => true
  ...
end 
```

这将使创建的记录与提要没有关联而失败。

编辑：

在这里，关于多对多 relashionships 中的验证的两个答案。
[验证 Rails 中多对多关联的唯一性](https://stackoverflow.com/questions/1421544/validate-uniqueness-of-many-to-many-association-in-rails)
[在 Ruby on Rails 中正确实现多对多？](https://stackoverflow.com/questions/7322230/correct-implementation-of-many-to-many-in-ruby-on-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:22:50.153

您需要在 Link 类上组合 validates_presence_of :feed_id 和[validates_associated 。](http://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_associated)`validates_associated`确保 Feed 也是有效的对象。

# c# - JSON.NET 序列化跟踪 - 从程序集中加载类型时出错 - ITraceWriter

> ID：16152880
> 
> 赞同：1
> 
> 时间：2013-04-22T17:16:33.957
> 
> 标签：c#, serialization, json.net, trace

我正在调试一个使用 JSON.NET 进行序列化的 C# 类库。反序列化过程中出现转换错误，因此我使用示例代码[http://james.newtonking.com](http://james.newtonking.com)，Release 11 说明（日期为 11/2012）实现了序列化跟踪。我的代码：

```
ProcessPlan p = ProcessPlan.TestPlan();
ITraceWriter traceWriter = new MemoryTraceWriter();

JsonConvert.SerializeObject(p, new JsonSerializerSettings { TraceWriter = traceWriter });

Console.WriteLine(traceWriter); 
```

当此代码运行时，我收到此消息：

CPlanAppV9.UnitTest.TestRepository.SaveLoad：System.TypeLoadException：无法从程序集“Newtonsoft.Json，版本=4.5.0.0，文化=中性，PublicKeyToken=30ad4fe6b2a6aeed”加载类型“Newtonsoft.Json.Serialization.ITraceWriter”。

项目 References 中引用的 DLL 声称其版本为 5.0.3，这正是我想要的。我无法在上述错误消息中获取 Version 属性来显示除 4.5.0.0 之外的任何内容，尽管它可能指的是框架版本号。

我删除了对库的所有引用，清理了解决方案，重新构建，然后通过 NuGet 重新安装了 5.0.3 包，但“类型加载”问题仍然存在，错误消息和引用条目属性中的 4.5.0.0 也是如此. 我确实有其他项目，现在已经完成，是用早期版本构建的，所以这可能是 DLL Hell 的味道。

# c# - 生命周期范围由 IoC 容器处理的单元测试对象

> ID：16152887
> 
> 赞同：7
> 
> 时间：2013-04-22T17:16:52.623
> 
> 标签：c#, unit-testing, dependency-injection, simple-injector, membus

我正在使用 Microsoft 单元测试并具有以下内容：

```
public class AccountCommandHandlers :
    Handler<CreateAccountCommand>,
     Handler<CloseAccountCommand>
{
    public bool CreateAccountCommandWasCalled = false;
    public bool CloseAccountCommandWasCalled = false;

    public void Handle(CreateAccountCommand command)
    {
        CreateAccountCommandWasCalled = true;
    }

    public void Handle(CloseAccountCommand command)
    {
        CloseAccountCommandWasCalled = true;
    }
}

[TestMethod]
public void CanRaiseInternalHandlers()
{
    var iocContainer = SimpleInjectorWiringForMembus.Instance;
    iocContainer.Bootstrap(
        AppDomain.CurrentDomain.GetAssemblies());

    var membus = MembusWiring.Instance;
    membus.Bootstrap();

    membus.Bus.Publish(new CreateAccountCommand() { Id = 100 });
    membus.Bus.Publish(new CloseAccountCommand() { Id = 100 });
} 
```

我正在使用一个处理对象生命周期范围的 IoC 容器（简单注入器）。Membus 将命令连接到命令处理程序，并通过 IoC 容器进行解析。

上面的代码运行和工作，命令处理程序将它们的局部变量设置为 true。

但是，由于 Simple Injector 处理生命周期范围，我不能向 Simple Injector 询问`AccountCommandHandler`对象，因为它会返回一个`CreateAccountCommandWasCalled`设置为 false 的新对象。

`CreateAccountCommandWasCalled`作为单元测试的新手，除了设置为静态变量之外，还有什么更健壮的测试方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T06:35:42.937

正如其他人已经提到的那样，您实际上正在运行集成测试。然而，这不是问题。集成测试适合测试您的 IoC 设置并确保应用程序的不同部分协同工作。

但是，通过集成测试，您不应该使用模拟或存根对象。模拟和存根在单元测试中有它们的用途。单元测试就是测试代码中尽可能小的部分。在单元测试中，您使用模拟来控制您的类所具有的所有依赖项的行为。一年前我写了[一篇博客，介绍了集成测试和单元测试之间的区别以及如何在测试中使用模拟。](http://wouterdekort.blogspot.nl/2012/03/unit-testing-hell-or-heaven.html)

在您的情况下，我不会使用具有生产配置的 IoC 容器来设置您的单元测试。相反，我会切换到在测试中手动创建对象，并使用[Moq](https://code.google.com/p/moq/)等模拟工具来控制依赖关系。

但这也是可以自动化的。一个很棒的工具是[AutoFixture](http://autofixture.codeplex.com/)。“夹具”是指您运行测试所需的基线。这可能是一些示例数据、您需要的模拟和存根以及其他设置代码。

Mark Seemann（AutoFixture 背后的开发人员）几周前写了一篇不错的博客，介绍了将 AutoFixture 与 IoC 一起用作[Auto-mocking Container](http://blog.ploeh.dk/2013/03/11/auto-mocking-container/)。我建议使用这样的东西来构建你的单元测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T22:12:56.373

正如 Steven 在他的评论中所说，听起来你正在编写一个集成测试，在这种情况下使用 IoC 容器确实有意义。

您的测试项目应该有自己的 IoC 配置组合根。您可以配置您的 IoC 容器以返回 AccountCommandHandlers 的模拟对象。您的测试，而不是检查布尔成员，可以改为检查是否至少调用了一次 Handle(CreateCommand)。使用 Moq，它看起来像这样：

```
mock.Verify(foo => foo.Handle(createAccountCommand), Times.AtLeastOnce()); 
```

如果出于某种原因您不能在 IoC 配置中使用模拟框架，那么为这个测试用例创建自己的模拟类会很容易。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-29T10:23:59.933

您还应该问自己的一个问题是：我真正想测试什么？

您的测试套件不一定需要测试 3rd 方库。在上面，membus 旨在将消息传递给处理程序，该库中的测试确保情况如此。

如果你真的想测试消息 -> IOC 处理程序委托，在 Membus 的情况下，你可以编写一个总线 -> IOC 适配器进行测试：

```
public class TestAdapter : IocAdapter
{
    private readonly object[] _handlers;

    public TestAdapter(params object[] handlers)
    {
        _handlers = handlers;
    }

    public IEnumerable<object> GetAllInstances(Type desiredType)
    {
        return _handlers;
    }
} 
```

然后将它与被测实例一起使用。

```
 var bus =
            BusSetup.StartWith<Conservative>()
                    .Apply<IoCSupport>(
                        ioc => ioc.SetAdapter(new TestAdapter(new Handler<XYZ>()))
                    .SetHandlerInterface(typeof (IHandler<>)))
                    .Construct(); 
```

您将在其中保留 Handler 实例以对其进行断言。OTOH，如果您信任该库来完成其工作，您只需新建处理程序并测试其内部逻辑。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-25T08:46:59.727

这是对您问题的更“哲学”的答案:-)

如果可能的话，我的建议是根本不要在测试中使用 IOC 容器！

我的理由是，您需要您的测试完全控制测试的上下文，而 IOC 可以取消部分控制。IMO，单元测试应该尽可能集中、小和可预测！

考虑将模拟对象发送到您的测试类，而不是实际类。

如果您的类需要一个 IOC 容器的内部实例，请将其从类中分解为某种“控制器”。

您可以通过多种方式完成此操作，我最喜欢使用[Rhino Mocks 之](http://hibernatingrhinos.com/oss/rhino-mocks "犀牛嘲笑")类的框架。

这样，您实际上会在测试“设置”中删除 IOC 在运行时提供的“生命周期”。

所以测试应该完全控制（通过模拟和存根）何时创建或销毁对象，使用像 Rhino 这样的框架。

如果甚至需要，您可以模拟国际奥委会。

附带说明一下，设计良好的 IOC 容器的好处之一是它应该使单元测试更容易——因为它应该阻止类依赖于类的实际“具体实例”，并鼓励使用可互换的接口。

您应该尝试在运行时依赖 IOC 容器来提供您设计的接口的具体实现。

请注意，弄清您实际测试的内容通常也很重要。单元测试通常应该专注于测试单个类上单个方法的行为。

如果您实际上测试的不仅仅是一个类上的一种方法，例如一个类如何与其他类交互，这意味着您很可能正在编写一个“集成”测试，而不是真正的“单元”测试。

另一个注意事项：我并没有声称自己是单元测试方面的专家！它们非常有用，但与编码的几乎任何其他方面相比，我仍然在努力进行测试。

为了进一步阅读，我强烈推荐 Roy Osherove 的“单元测试的艺术”。还有其他人。

[单元测试的艺术](https://rads.stackoverflow.com/amzn/click/com/1933988274)

# javascript - 链接到外部页面的特定选项卡

> ID：16152892
> 
> 赞同：0
> 
> 时间：2013-04-22T17:17:00.863
> 
> 标签：javascript, html, hyperlink, tabs

我需要在我的网站上放置一个链接，该链接指向另一个网站（到目前为止没有什么复杂的：D）问题是链接所在的页面有一个用这样的标签组织的内容：

```
<div id="tabcontent1" style="display: block;">...</div>
<div id="tabcontent2" style="display: none;">...</div>
<div id="tabcontent3" style="display: none;">...</div>
<div id="tabcontent4" style="display: none;">...</div> 
```

内容通过javascript调用隐藏/显示：

```
<a href="#" onclick="selectTab(4); return false;"></a> 
```

我想要做的是让我的链接指向这个页面，并显示最后一个选项卡。由于我不控制页面本身（不在我的网站上），所以我不知道该怎么做。

你们知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:23:41.480

以 StackOverflow 站点为例

现在我将在我的网站上提供一个链接，该链接将位于 Stackoverflow 的最后一个选项卡上

> **网址：** [https ://stackoverflow.com/unanswered](https://stackoverflow.com/unanswered)

在这里，我们有一个通过 url 可以登陆任何选项卡的工具。

但是在您的情况下，您需要看到目标站点具有相同的权限才能这样做。

# php - PHP 连接

> ID：16152894
> 
> 赞同：-2
> 
> 时间：2013-04-22T17:17:17.733
> 
> 标签：php, concatenation, echo

我正在尝试使用一些 PHP，但我似乎无法弄清楚以下内容。

我可以通过 PHP 连接创建一个字符串：

```
echo 'This ' . 'string ' . 'was ' . 'made ' . 'with concatenation.' . "\n"; 
```

但是如果你想用一个变量来做这件事呢？（我猜WP的函数可以称为变量。）我在这里很迷茫。以下**不起作用**。或者至少，我的文本编辑器抛出了一个未知错误。

```
<?php
if ( is_404() ) {
    echo "<script src='" . get_stylesheet_directory_uri(); . "/sm/script/soundmanager2-nodebug-jsmin.js'></script>
<script>
soundManager.setup({
  url: '" . get_stylesheet_directory_uri(); . "/sm/swf/',
  onready: function() {
    var mySound = soundManager.createSound({
      id: 'aSound',
      url: 'http://www.mysite.com/sound.mp3',
      volume: '25'
    });
    mySound.play();
  },
  ontimeout: function() {

  }
});
</script>"
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:18:18.067

这里出错了：

```
rc='" . get_stylesheet_directory_uri(); . "/s 
```

你`;`的句子中间有一个。同样在你的字符串的末尾你没有`;`

正确的语法

```
<?php
if ( is_404() ) {
    echo "<script src='" . get_stylesheet_directory_uri() . "/sm/script/soundmanager2-nodebug-jsmin.js'></script>
<script>
soundManager.setup({
  url: '" . get_stylesheet_directory_uri() . "/sm/swf/',
  onready: function() {
    var mySound = soundManager.createSound({
      id: 'aSound',
      url: 'http://www.mysite.com/sound.mp3',
      volume: '25'
    });
    mySound.play();
  },
  ontimeout: function() {

  }
});
</script>";
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:24:55.237

您还可以更改方法以避免此类问题。您可以将 PHP 嵌入到 HTML 关闭和打开 PHP 标记中，而不是将 HTML 嵌入到 PHP 中：

```
<?php if ( is_404() ) { ?>
<script src="<?php echo get_stylesheet_directory_uri(); ?>/sm/script/soundmanager2-nodebug-jsmin.js"></script>
<script>
    soundManager.setup({
        url: "<?php echo get_stylesheet_directory_uri(); ?>/sm/swf/",
        onready: function() {
            var mySound = soundManager.createSound({
                id: 'aSound',
                url: 'http://www.mysite.com/sound.mp3',
                volume: '25'
            });
            mySound.play();
        },
        ontimeout: function() {

        }
    });
</script>
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:19:23.073

尝试这个

```
 if ( is_404() ) {
    echo "<script src='" . get_stylesheet_directory_uri(). "/sm/script/soundmanager2-nodebug-jsmin.js'></script>
    <script>
    soundManager.setup({
    url: '" . get_stylesheet_directory_uri(). "/sm/swf/',
    onready: function() {
    var mySound = soundManager.createSound({
    id: 'aSound',
    url: 'http://www.mysite.com/sound.mp3',
    volume: '25'
});
mySound.play();
},
ontimeout: function() {

}
});
</script>";
} 
```

您正在添加；在不正确的代码之间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T17:33:55.940

如果你简单地保存函数的返回值，你可以省去很多麻烦：

```
<?php
if ( is_404() ) {
$temp = get_stylesheet_directory_uri();
    echo "<script src='$temp/sm/script/soundmanager2-nodebug-jsmin.js'></script>
<script>
soundManager.setup({
  url: '$temp/sm/swf/',
  onready: function() {
    var mySound = soundManager.createSound({
      id: 'aSound',
      url: 'http://www.mysite.com/sound.mp3',
      volume: '25'
    });
    mySound.play();
  },
  ontimeout: function() {

  }
});
</script>"
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T17:21:13.613

尝试这个：

```
<?php
if ( is_404() ) {
echo "<script src='" . get_stylesheet_directory_uri() . "/sm/script/soundmanager2-nodebug-jsmin.js'></script>
<script>
soundManager.setup({
  url: '" . get_stylesheet_directory_uri() . "/sm/swf/',
  onready: function() {
  var mySound = soundManager.createSound({
  id: 'aSound',
  url: 'http://www.mysite.com/sound.mp3',
  volume: '25'
});
mySound.play();
  },
  ontimeout: function() {

}
});
</script>";
}
?> 
```

# windows-8 - 自定义任务栏悬停按钮的代码？

> ID：16152896
> 
> 赞同：2
> 
> 时间：2013-04-22T17:17:23.550
> 
> 标签：windows-8, hover, tooltip, wtl, taskbar

Windows Vista、7 和 8 都显示应用程序的预览；当打开的应用程序的应用程序图标悬停在任务栏中时。

一些开发人员在此工具提示中添加了自定义选项，例如[Windows Media Player](http://en.wikipedia.org/wiki/Windows_Media_Player)：

![Windows 媒体播放器 12 工具提示](https://i.stack.imgur.com/2BNZM.png)

给定一个用 C++ 编写的使用[Windows 模板库](http://en.wikipedia.org/wiki/Windows_Template_Library)的应用程序，我将如何在自定义按钮中对应用程序工具提示预览进行编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-06T11:56:15.673

该功能被称为[任务栏扩展 - 缩略图工具栏](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378460%28v=vs.85%29.aspx#thumbbars)。WTL 不提供任何帮助器/包装器类来实现对缩略图工具栏的支持，因此您必须直接使用 API，使用[`ITaskbarList3`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391692%28v=vs.85%29.aspx)接口。

# jquery - jQuery - 使用等列脚本重新计算高度

> ID：16152906
> 
> 赞同：0
> 
> 时间：2013-04-22T17:17:46.393
> 
> 标签：jquery, css, equal-heights

[http://www.indigoeastend.com/live-entertainment.html](http://www.indigoeastend.com/live-entertainment.html)

我有一个上面列出的页面，其中有手风琴框，打开时会破坏布局。特别是最后一个。我使用以下脚本使列相等：

```
$(window).load(function() {
    $(".equal_heights").equalHeights();
});

(function($) {
    $.fn.equalHeights = function(minHeight, maxHeight) {
        tallest = (minHeight) ? minHeight : 0;
        this.each(function() {
            if($(this).height() > tallest) {
                tallest = $(this).height();
            }
        });
        if((maxHeight) && tallest > maxHeight) tallest = maxHeight;
        return this.each(function() {
            $(this).height(tallest).css("overflow","visible");
        });
    }
})(jQuery); 
```

当盒子被打破时，我怎样才能让两列都调整大小。我正在尝试使用innerheight，但这不起作用。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:41:54.083

只需使用 CSS 让自己的列高度相等，就可以省去很多麻烦。最简单的技术是将元素的显示属性更改为表格单元格：

[http://tinker.io/ae84b](http://tinker.io/ae84b)

```
.main {
    display: table; /* optional */
}

.main article, .main aside {
    display: table-cell;
 }

<div class="main">
    <article>
        Lorem ipsum dolor sit amet...
    </article>

    <aside>
        I'm the aside!
    </aside>
</div> 
```

这适用于无限数量的“列”，只要它们是相邻的并且是表格单元格。因为不使用浮点数，所以不需要清除它们。另一个优点是，因为它是纯 CSS，您可以通过媒体查询从窄设备中隐藏 2 列布局。

# linux - 尝试运行 awk 可执行文件时出现“错误解释器”错误消息

> ID：16152908
> 
> 赞同：4
> 
> 时间：2013-04-22T17:17:53.847
> 
> 标签：linux, awk

我正在尝试使 awk 文件可执行。我已经编写了脚本，并且做到了`chmod +x filename`。这是代码：

```
#!/bin/awk -v

'TOPNUM = $1

## pick1 - pick one random number out of y
## main routine

BEGIN {
## set seed
        srand ()

## get a random number

        select = 1 +int(rand() * TOPNUM)

# print pick
        print select
}' 
```

当我尝试运行程序并为`TOPNUM`：

```
pick1 50 
```

我得到回应：

```
-bash: /home/petersone/bin/pick1: /bin/awk: bad interpreter: No such file or directory 
```

我确定我搞砸了一些简单的事情，但我根本无法弄清楚它是什么。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T17:20:51.037

从命令行运行以下命令：

```
which awk 
```

这将打印 AWK 的路径，这很可能是`/usr/bin/awk`. 更正第一行，您的脚本应该可以工作。

此外，您的脚本不应在开头和结尾包含单引号字符。您可以从命令行运行 AWK 并将脚本作为带引号的字符串传递，或者您可以在文件中编写脚本并使用`#!/usr/bin/awk`第一行，命令仅在文件中。

此外，脚本的第一行也无法正常工作。在 AWK 中，设置代码需要在`BEGIN`块内，并且`$1`是对输入行中第一个字的引用。您需要使用`ARGV[1]`来引用第一个参数。

[http://www.gnu.org/software/gawk/manual/html_node/ARGC-and-ARGV.html](http://www.gnu.org/software/gawk/manual/html_node/ARGC-and-ARGV.html)

正如@TrueY 指出的那样，`-f`第一行应该有一个：

```
#!/usr/bin/awk -f 
```

此处讨论：[Invoking a script, which has a awk shebang, with parameters (vars)](https://stackoverflow.com/questions/1418245/invoking-a-script-which-has-an-awk-shebang-with-parameters-vars)

该程序的工作，测试版本：

```
#!/usr/bin/awk -f

## pick1 - pick one random number out of y
## main routine
BEGIN {
    TOPNUM = ARGV[1]

## set seed
        srand ()

## get a random number

        select = 1 +int(rand() * TOPNUM)

# print pick
        print select
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-09T11:45:39.027

实际上这种形式更可取：

```
#! /bin/awk -E 
```

男人告诉：

> -E 与 -f 类似，但是，这是最后一个处理的选项，应该与 #! 脚本，特别是对于 CGI 应用程序，以避免在命令行中从 URL 传递选项或源代码 (!)。此选项禁用命令行变量分配

# dependency-injection - ServiceManager 在 shared = false 时返回相同的实例

> ID：16152912
> 
> 赞同：0
> 
> 时间：2013-04-22T17:18:00.460
> 
> 标签：dependency-injection, zend-framework2

`MyClass`我为希望通过 ServiceManager 检索的别名定义了一个别名，请参见`module.config.php`下面的示例。`MyClass`当我在我的控制器中检索一个实例时，我`$this->serviceLocator->get('MyClass')`第一次得到一个新的实例，然后是同一个实例。我错过了配置中的某些内容还是应该提交错误？

```
module.config.php
return array(
    'di' => array(
        'instance' => array(
            'alias' => array(
                'MyClass' => 'Some\Namespace\MyClass',
            ),

            'MyClass' => array(
                'shared' => false,
             ),                 
         ),
    ),
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:22:40.397

我不知道，`DI`但`ServiceManager`希望您`shared`在管理器的配置数组的根目录中指定 (false)。像这样的东西：

```
'invokables' => array( // Note that you can use also 'factories', 'abstract_factories', etc.
     'Some\Namespace\MyClass' => 'Some\Namespace\MyClass',
),
'alias' => array(
    'MyClass' => 'Some\Namespace\MyClass',
),
'shared' => array(
    'MyClass' => false,
), 
```

请参阅`ServiceManager`手册上的示例配置

希望这可以帮助 ：）

斯托扬

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:34:11.283

由于我的编辑未被接受，我将自己回答这个问题。最后，我`ServiceManager`感谢 Stoyan Dimov，他把我推向了正确的方向。不幸的是，他的回答并不正确。我不得不使用`invokables`而不是`alias`. 下面是正确的例子：

```
return array(
    'invokables' => array(
        'MyClass' => 'Some\Namespace\MyClass',
    ),

    'shared' => array(
        'MyClass' => false,
    ),
); 
```

当我使用`alias`而不是`invokables`我得到一个`exception`具有该名称的服务不可用时，这意味着它`alias`不起作用，必须有一个由、`invokables`或定义的现有服务。`factories``services``abstract_factories`

按照前面的示例，我可以使用：

```
...
'alias' => array(
    'SomethingDifferent' => 'MyClass',
),
... 
```

通过调用`$this->serviceLocator->get('SomethingDifferent')`我会收到一个`Some\Namespace\MyClass`.

# .htaccess - 将单页 http 重定向到 https

> ID：16152914
> 
> 赞同：14
> 
> 时间：2013-04-22T17:18:01.913
> 
> 标签：.htaccess, http, redirect, https, http-redirect

我正在尝试使用 .htaccess 将单个页面从 http 重定向到 https，但我不断收到重定向循环错误。

代码：

```
Redirect /secureform.html https://www.example.com/secureform.html 
```

但是，我不断收到“此网页的重定向太多”错误。我如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-22T17:24:40.680

尝试这个 ：

```
RewriteEngine on
RewriteCond %{HTTPS} off
RewriteRule ^secureform\.html$ https://www.example.com/secureform.html [L,R=301] 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-02-01T15:44:30.593

我已经尝试过了，它对我有用：

```
Redirect permanent /secure https://www.example.com 
```

# excel - 在 Excel 中组合来自 3 个单独的电子表格的数据

> ID：16152919
> 
> 赞同：0
> 
> 时间：2013-04-22T17:18:15.150
> 
> 标签：excel, pivot, pivot-table, vlookup

我正在尝试合并来自 3 个单独的电子表格的数据：

- 所有三张表都有一个名为“标签”的公共列，其中包含 ID 号 -表 1 包含最多的信息，并将用作所有内容都将合并到的表。-表 2 有某些日期，我想移到表 1，但我希望信息与正确的 ID 号匹配，因此最终在表 1 中与表 1 中具有相同 ID 号的数据位于同一行 -表 3 也有某些信息，我想移到表 1，并且我还希望以与表 2 中的信息相同的方式呈现信息。

我该怎么做呢？我对 vlookup 和数据透视表不太擅长，我不确定什么可以最好地帮助我以及如何做到这一点。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:49:08.570

以下是 Vlookup 的示例：

![示例 1](https://i.stack.imgur.com/9kz6r.png)

您可以简单地使用此公式来填充主工作表上每个标签的所有其他数据。

自动填充是一种将公式和值填充到其他单元格中的方法 - 通过将初始公式拖到其他单元格中。您应该阅读它，因为它是几乎所有 excel 使用的重要组成部分。

[http://www.homeandlearn.co.uk/excel2007/excel2007s2p2.html](http://www.homeandlearn.co.uk/excel2007/excel2007s2p2.html)

# jetty - Jetty 不再包含请求 URL 路径作为线程 ID 的一部分？

> ID：16152926
> 
> 赞同：0
> 
> 时间：2013-04-22T17:18:46.357
> 
> 标签：jetty, logback

我们将 Logback 与 Jetty 一起使用，我们的 appender 配置如下所示：

```
<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
  <encoder>
    <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{0} - %msg%n</pattern>
  </encoder>
</appender> 
```

在 Jetty 7.5.4 中，%thread 属性将被扩展为包括请求的 URL 路径以及线程 ID——类似于 [qtp2105333421-78 - /requested/url]

自从升级到 7.6.8 后，似乎不再包含请求路径——日志现在只包含 [qtp2105333421-78]。

我只能找到有人试图从日志中排除请求路径的讨论。现在我正在尝试将它包含在内，因为它丢失了，而且我在 Jetty 更改日志中找不到任何听起来相关的内容。这是已删除的内容，还是可以更改日志记录模式以再次访问请求路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:41:44.903

线程名称中的请求路径是 7.5.4 中的 DEBUG 唯一功能

参见[`org.eclipse.jetty.server.HttpConnection.handleRequest()`Jetty 7.5.4 行 #407](https://github.com/eclipse/jetty.project/blob/jetty-7.5.4.v20111024/jetty-server/src/main/java/org/eclipse/jetty/server/HttpConnection.java#L407)

它仍然作为 DEBUG 功能存在，但迁移到 Jetty 7.6.x 时进行了一些重构，这可能会让您感到厌烦。

参见[`org.eclipse.jetty.server.AbstractHttpConnection.handleRequest()`Jettty 7.6.10 line #431](https://github.com/eclipse/jetty.project/blob/jetty-7.6.10.v20130312/jetty-server/src/main/java/org/eclipse/jetty/server/AbstractHttpConnection.java#L431)。

注意类更改`HttpConnection`为`AbstractHttpConnection`

# c - 使用 C 和程序集创建用户级线程的分段错误

> ID：16152932
> 
> 赞同：5
> 
> 时间：2013-04-22T17:19:11.940
> 
> 标签：c, assembly

我正在尝试使用一些作业来理解一些操作系统基础知识。我已经发布了一个类似的问题并得到了令人满意的答案。但这一个略有不同，但我无法调试它。所以这就是我所做的：

我要做的是启动一个主程序，malloc一个空间，将其用作堆栈以启动用户级线程。我的问题是退货地址。这是到目前为止的代码：

[我正在编辑我的代码以使其与我的答案的当前状态保持同步]

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>

#define STACK_SIZE 512

void switch_thread(int*,int*);

int k = 0;

void simple_function()
{
    printf("I am the function! k is: %d\n",k);
    exit(0);
}

void create_thread(void (*function)())
{   
   int* stack = malloc(STACK_SIZE + 32);
   stack = (int* )(((long)stack & (-1 << 4)) + 0x10);
   stack = (int* ) ((long)stack + STACK_SIZE); 
   *stack = (long) function;
   switch_thread(stack,stack);  
}

int main()
{
    create_thread(simple_function);
    assert(0);
    return 0;
} 
```

switch_thread 是我编写的汇编代码，如下所示：

```
.text
    .globl  switch_thread
switch_thread:  
    movq    %rdi, %rsp
    movq    %rsi, %rbp
    ret 
```

这段代码在 GDB 下运行得非常好，并给出了预期的输出（即，将控制权传递给 simple_function 并打印“我是函数！k 是：0”。但是当单独运行时，这会产生分段错误。我很困惑通过这个结果。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T17:36:23.750

您的代码有两个问题：

1.  除非您的线程实际上位于正确的过程（或嵌套过程）中，否则不存在“基指针”之类的东西。这使得 %rbp 的值无关紧要，因为线程在初始化时不在特定过程中。

2.  与您的想法相反，当`ret`指令执行时， %rsp 所指的值成为程序计数器的新值。这意味着在执行时将查询而不是`*(base_pointer + 1)`, 。`*(base_pointer)`同样，%rbp 的值在这里是无关紧要的。

您的代码（只需稍加修改即可运行）应如下所示：

```
void switch_thread(int* stack_pointer,int* entry_point);

void create_thread(void (*function)())
{
    int* stack_pointer = malloc(STACK_SIZE + 8);
    stack_pointer += STACK_SIZE; //you'd probably want to back up the original allocated address if you intend to free it later for any reason.
    switch_thread(stack_pointer,function);      
} 
```

您的 switch_thread 例程应如下所示：

```
 .text
    .globl  switch_thread
switch_thread:
    mov     %rsp, %rax //move the original stack pointer to a scratch register
    mov     %rdi, %rsp //set stack pointer
    push    %rax       //back-up the original stack pointer
    call    %rsi       //call the function
    pop     %rsp       //restore the original stack pointer
    ret                //return to create_thread 
```

仅供参考：如果您自己初始化线程，我建议您首先创建一个适当的蹦床作为线程入口点（例如 ntdll 的 RtlUserThreadStart）。这将使事情变得更加清晰，特别是如果您想使您的程序多线程并且还将任何参数传递给启动例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:37:47.413

`base_pointer`需要适当地对齐以存储`void (*)()`值，否则您正在处理未定义的行为。我想你的意思是这样的：

```
void create_thread(void (*function)())
{
    size_t offset = STACK_SIZE + sizeof function - STACK_SIZE % sizeof function;
    char *stack_pointer = malloc(offset + sizeof *base_pointer);
    void (**base_pointer)() = stack_pointer + offset;
    *base_pointer = function;
    switch_thread(stack_pointer,base_pointer);      
} 
```

无需强制转换 malloc。将指针转换为整数类型或将函数指针转换为对象指针类型通常是一个坏主意。

我知道这都是可移植 C 挑剔的建议，但它确实有助于尽可能多地用可移植代码编写软件，而不是依赖于未定义的行为。

# linux - 查找 500 内部服务错误的源文件

> ID：16152937
> 
> 赞同：0
> 
> 时间：2013-04-22T17:19:22.653
> 
> 标签：linux

我正在对由我以外的人构建的服务器进行更改。我需要编辑一些在生成 500 内部服务错误时显示的信息，但我似乎找不到在哪里执行此操作。这是一个linux服务器。

有谁知道确定它指向哪里的过程？我不知道什么会导致错误首先产生。

# java - 生成具有一定平均差的随机数列表

> ID：16152938
> 
> 赞同：2
> 
> 时间：2013-04-22T17:19:23.373
> 
> 标签：java, php, c, algorithm, random

我必须生成一个随机数列表，并且它们必须具有给定的平均差异。例如，给定的平均差为 10，因此这些数字很好：`1 3 5 9 15 51`. 我所做的是将给定的平均差乘以 2 并加 1。像这样：

```
 while (i <= 50000)
    {
        i += Math.random() * givenAverageDiff * 2 + 1;
        list.add(i);
    } 
```

但我从来没有得到5000或更多。事实上，它总是 4,850 或更少。为什么？假设`givenAverageDiff`是10。我的错误是什么？我该如何解决？

用 C 或 PHP 实现 PS 对我也有好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:17:16.827

因为你正在做“+ 1”。

让我们计算预期差异：

E(2*10*x+1)= 2*10*E(x)+1 = 2*10*0.5+1 = 10+1。因此，平均而言，您将获得 50000/11 个数字。

您需要选择期望值等于 10 的值。将其更改为以下内容，它应该可以工作：

```
while (i <= 50000)
    {
        i += Math.random() * (givenAverageDiff-1) * 2 + 1;
        list.add(i);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:34:53.130

根据您创建的范围来考虑它。根据您目前的计算，

```
i += Math.random() * givenAverageDiff * 2 + 1; 
```

`givenAverageDiff`您正在为您的号码添加 1 到 2* 。1 到 2x 的总和是 (2x)(2x+1)/2，由于有 2x 选项，我们除以 2x 得到 (2x)(2x+1)/(2*2x) = (2x+1) /2 = x + 0.5。

所以你想要的是有 2x+1 个选项，使用 [0,2*x] 的范围是最简单的。您可以通过添加括号来获得：

```
i += Math.random() * (givenAverageDiff * 2 + 1); 
```

如果您希望它始终增加，那么您要么需要使用非均匀分布，要么需要使用具有较小范围的均匀分布。要获得范围 [n,2*xn]，请使用

```
i += Math.random() * ((givenAverageDiff - n) * 2 + 1) + n; 
```

如果您使用负值，`n`您可以扩大范围，使数字也可以减少。

# jquery - Twitter Bootstrap + datepicker + 在屏幕中显示日历

> ID：16152942
> 
> 赞同：2
> 
> 时间：2013-04-22T17:19:32.883
> 
> 标签：jquery, twitter-bootstrap, calendar, datepicker

我正在使用 Twitter Bootstrap Datepicker，我希望始终在屏幕上显示日历，如下例所示。

有人知道这样做的方法吗？

谢谢！

![Datepicker 在屏幕中打开](https://i.stack.imgur.com/fxBuQ.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T17:52:33.970

您可以使用该`bootstrap-calendar`插件并使用其简单的 css 对其进行样式设置以满足您的需求。

项目站点和文档：[https ://github.com/ahmontero/bootstrap-calendar](https://github.com/ahmontero/bootstrap-calendar)

演示页面：[http ://ahmontero.github.io/bootstrap-calendar/](http://ahmontero.github.io/bootstrap-calendar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:05:11.337

您创建一个隐藏的输入字段，在该输入字段上调用 ​​datepicker，在 datepicker 上调用`show`操作，然后添加一点 CSS 来隐藏 datepicker div 顶部的白色小箭头。

```
<script>
  $(function() {
     $("#foo").datepicker();
     $("#foo").datepicker("show");
  });
</script>

<style>
  #foo {
    display:none;
  }
  .datepicker:before, .datepicker:after {
    display: none;
  }
</style>

<input id="foo"/> 
```

[JS 小提琴在这里](http://jsfiddle.net/S6g8B/)。

# c++ - 在其实例类方法中调用 QMainWindow 方法

> ID：16152949
> 
> 赞同：0
> 
> 时间：2013-04-22T17:19:51.093
> 
> 标签：c++, qt, methods, qt4, qmainwindow

我有一`MainWindow`堂课

```
class MainWindow : public QMainWindow
{
    customClass * obj;
public:
    void foo(bool);
} 
```

这是我的自定义类：

```
class customClass 
{
    void foo1(bool);
} 
```

现在，我想`foo()`在`foo1()`.

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:59:18.527

You can make the constructor of your `customClass` take a pointer to a `MainWindow` which it stores in a member variable for later use.

```
class customClass 
{
public:
  customClass(MainWindow* mainWindow)
  : mainWindow_(mainWindow)
  {
  }

  void foo1(bool b) {
    mainWindow_->foo(b);
  }

private:
  MainWindow* mainWindow_;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:53:09.730

You can make your MainWindow implements singleton pattern (if it's applicable to your design), then you can directly get an instance from any place you like.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T17:37:06.940

一种方式 - 使用依赖注入模式：[link](http://en.wikipedia.org/wiki/Dependency_injection)

```
struct A;
struct B
{
  B( A& a );

void foo1()
{
  m_a.foo();
}

private:
  A& m_a;
}

struct A
{
  void foo(){}
  B m_b;
} 
```

# php - 使用 Yii 框架重写 URL

> ID：16152956
> 
> 赞同：1
> 
> 时间：2013-04-22T17:20:08.420
> 
> 标签：php, url-rewriting, yii

我有一个像

```
www.example.com/food/xyz 
```

为此，我在 main.php （配置文件夹）中编写了这样的规则

```
'urlManager'=>array(
    'urlFormat'=>'path',
    'showScriptName'=>false,
    'caseSensitive'=>false,
    'rules'=>array(
        '/food/<name:\w+>/' => 'food/index/',
        '<controller:\w+>/<id:\d+>'=>'<controller>/view',
        '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
        '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
    ),
), 
```

这意味着内部“xyz”将根据规则作为参数传递给我的FoodController的actionIndex

```
class FoodController extends Controller
{
    public function actionIndex($name){
        //some code here
    }

    public function actionItems(){
        //some code here
    }
} 
```

我面临的问题是我在同一个类中有另一个名为 actionItems 的方法，当我使用 URL 时

```
www.example.com/food/items 
```

它调用 actionIndex 并将“items”作为参数传递

关于如何解决这个问题的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:11:48.990

你的第一条规则应该是物品

```
'/food/items'=>'food/items',
'/food/<name:\w+>/' => 'food/index/', 
```

或者，我宁愿使用别名来拆分控制器的使用，以便所有 'food'/<:name>' url 都与 '/food/action' url 区分开来，例如：

```
'/food/<name:\w+>/' => 'food/index/',
'/foods/<action:\w+>' => 'food/<action>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:45:48.210

试试这个，只需更改顺序：

```
'urlManager'=>array(
    'urlFormat'=>'path',
    'showScriptName'=>false,
    'caseSensitive'=>false,
    'rules'=>array(
        '<controller:\w+>/<id:\d+>'=>'<controller>/view',
        '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
        '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        '/food/<name:\w+>/' => 'food/index/'
    ),
), 
```

# python - 将一个列表分成两个列表

> ID：16152957
> 
> 赞同：1
> 
> 时间：2013-04-22T17:20:13.890
> 
> 标签：python, list

我有这个数组：

`[160, 177], [162, 169], [163, 169], [166, 173], [166, 176], [166, 177], [169, 176], [169, 177]]`

如何将其拆分为 2 个单独的数组，使其变为：

`[160,162,163,166,166,166,169,169]`

和

`[177,169,169,173,176,177,176,177]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:21:46.923

这应该这样做

```
l = [[160, 177], [162, 169], [163, 169], [166, 173], [166, 176], [166, 177], [169, 176], [169, 177]]
l1, l2 = zip(*l) 
```

# javascript - 使用复选框启用呼叫拖动

> ID：16152960
> 
> 赞同：1
> 
> 时间：2013-04-22T17:20:37.567
> 
> 标签：javascript, d3.js

如果复选框已被勾选，我只是试图调用拖动功能。我一直在尝试实现以下示例：

# 1

```
node.call(function(d) { if d3.selectAll("input").property("checked", true) {return drag } }) 
```

# 2

```
d3.selectAll("input").on("change", change);

    function change() {

 if (this.value === true )  da();

       function da() {

      node.call(drag);

       } 
```

它不显示错误，只是在检查后不拖动 - [http://jsfiddle.net/gUF8x/3/](http://jsfiddle.net/gUF8x/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:57:04.987

最大的问题`this.value`是设置为复选框的值，而不是状态（例如，它不会根据复选框是否被选中而变为真或假）。相反，您应该使用`this.checked`：

```
if (this.checked === true )  da(); 
```

这将允许调用`da();`发生，但是你会得到一个错误，因为它是当前编写的，`da()`函数不在全局范围内（它当前是函数的`draw()`子函数），所以要实现你正在寻找的for 将需要对代码和结构进行更多修改。至少你会从这里开始使用错误......

# wcf - 在非 .net 平台上使用 WCF 服务（无元数据）

> ID：16152961
> 
> 赞同：1
> 
> 时间：2013-04-22T17:20:40.223
> 
> 标签：wcf, metadata

我创建了一个 WCF 服务并通过自托管来托管它。此服务未发布任何元数据。

第一个问题

1.  我可以通过 Visual Studio 使用它，添加服务参考吗？希望不会。
2.  我可以通过创建手动代理来使用它，即`ChannelFactory<ServiceContract>`......吗？希望是的。

现在在第二种情况下，客户端必须是.Net，对吗？

所以这意味着，要在非.net 平台上使用 wcf 服务，我们必须公开它的元数据？

没有元数据的 WCF 服务不能被 Ajax 客户端消费，或者说 Java 客户端吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:51:49.427

使用 WCF 服务有 3 个选项：

1.  如果服务公开了 WSDL，请使用 VS（或其他平台的等效项）中的“添加服务引用”。请注意，如果您不想公开 WSDL，您可以暂时公开它，将 WSDL 保存在文件中，然后将其发送给任何平台中的用户以从中生成代理。您可以在保存 WSDL 后立即关闭它。另请注意，即使 WSDL 未公开，您仍需要保护 Web 服务免受未经授权的访问。

2.  如果这是一个 .Net 客户端，它可以使用相同的服务合同程序集进行编译并使用 ChannelFactory 等。

3.  任何平台都可以向服务发送原始soap 消息（例如XML）。当然，他们需要知道什么是正确的格式。WSDL 可以提供帮助，但即使没有它，如果他们有一个工作示例，他们也可以模仿它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:20:10.797

WCF 提供 REST（表示状态传输）支持，以供非 .NET 客户端（如 JavaScript (AJAX)、java、Objective C、Web 浏览器等）使用它...

基本上，WCF REST 通过 HTTP 协议公开方法和传输数据，它支持所有 HTTP 操作（GET、POST、PUT 和 DELETE）。此功能使其独立于平台，并且不需要公开元数据。

请参考以下链接以获取有关 WCF REST 的更多信息：

[使用 WCF 介绍 RESTful 服务](http://msdn.microsoft.com/en-us/magazine/dd315413.aspx)

[WCF REST 编程模型概述](http://msdn.microsoft.com/en-us/library/vstudio/bb412172%28v=vs.90%29.aspx)

[WCF 休息与 WCF SOAP](http://msdn.microsoft.com/en-us/library/vstudio/hh273094%28v=vs.100%29.aspx)

[创建 RESTful WCF 服务 API：分步指南](http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide)

# jquery - 仅在元素进入视口时加载图像

> ID：16152962
> 
> 赞同：3
> 
> 时间：2013-04-22T17:20:40.157
> 
> 标签：jquery, viewport, image-loading

我正在构建一个照片库，我只想在内容“DIV”元素进入视口时加载图像。我为此使用 jquery viewport.js。

默认情况下，我将每个“IMG”标签的 src 属性设置为“LOADING.JPEG”，当任何 div 进入视口时，我将 IMG 标签的 src 属性更改为真实图像。但是在更改 SRC 属性图像后不要更改它仍然显示 LOADING.JPEG。

```
$(".content").each(function(i,obj){
     var element = obj.id;
     if($("#"+element).is(':in-viewport')){
         var link = $("#"+element+" div a").attr('href');
         //set the image src from loading to read image
         $("#"+element+" div a img").attr('src',link);
     }
}); 
```

任何帮助或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:22:57.793

为什么你让它变得复杂 - ？尝试这个 -

```
$(".content").each(function(i,obj){  
     if($(this)).is(':in-viewport')){
         var link = $("div a",this).attr('href');
         //set the image src from loading to read image
         $("div a img",this).prop('src',link);
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T10:34:51.003

您是否尝试过使用[延迟加载 jQuery 插件](http://www.appelsiini.net/projects/lazyload)？

当它们在视口中时，这将在某些图像中逐渐淡化。设置起来也很容易，您只需为每个图像调用一个数据属性：

```
<img class="lazy" data-original=“img/example.jpg” src=“img/grey.gif” width=“640” height=“480”&gt; 
```

并像这样启动它：

```
$("img.lazy").lazyload(); 
```

# css - 不知道为什么 :nth-of-type 不起作用

> ID：16152964
> 
> 赞同：0
> 
> 时间：2013-04-22T17:20:50.830
> 
> 标签：css

我正在尝试在我的 div 库中选择每 4 个图像。我似乎无法弄清楚为什么我不能选择它。

```
#gallery img:nth-of-type(4n){
   border: 5px solid #000;
} 
```

我尝试了其他一些想法，但没有成功。谁能帮助我并向我解释为什么这不是在我的 div 库中选择每 4 个图像？提前致谢。

```
 <div id="gallery">

  <a href="/system/images/series_uploads/5/original/ankara_5602p_alabaster.jpg?1330114093" rel="lightbox['gallery']">
    <img alt="" src="/system/images/series_uploads/5/gallery/ankara_5602p_alabaster.jpg?1330114093" title="Ankara" />
    <div class="gallery-text">
      <h3>Ankara</h3>
      <p>Porcelain</p>
    </div>
  </a>

  <a href="/system/images/series_uploads/6/original/ankara_5624p_noce.jpg?1330114095" rel="lightbox['gallery']">
    <img alt="" src="/system/images/series_uploads/6/gallery/ankara_5624p_noce.jpg?1330114095" title="Ankara" />
    <div class="gallery-text">
      <h3>Ankara</h3>
      <p>Porcelain</p>
    </div>
  </a>

  <a href="/system/images/series_uploads/7/original/ashton_23931_smokey_beige_.jpg?1330114250" rel="lightbox['gallery']">
    <img alt="" src="/system/images/series_uploads/7/gallery/ashton_23931_smokey_beige_.jpg?1330114250" title="Ashton" />
    <div class="gallery-text">
      <h3>Ashton</h3>
      <p>Porcelain</p>
    </div>
  </a>

  <a href="/system/images/series_uploads/8/original/ashton_23942_camel_haze_entry.jpg?1330114251" rel="lightbox['gallery']">
    <img alt="" src="/system/images/series_uploads/8/gallery/ashton_23942_camel_haze_entry.jpg?1330114251" title="Ashton" />
    <div class="gallery-text">
      <h3>Ashton</h3>
      <p>Porcelain</p>
    </div>
  </a>

  <a href="/system/images/series_uploads/9/original/ashton_23942_camel_haze_lr.jpg?1330114252" rel="lightbox['gallery']">
    <img alt="" src="/system/images/series_uploads/9/gallery/ashton_23942_camel_haze_lr.jpg?1330114252" title="Ashton" />
    <div class="gallery-text">
      <h3>Ashton</h3>
      <p>Porcelain</p>
    </div>
  </a>

  <a href="/system/images/series_uploads/10/original/berkshire_25525_oak.jpg?1330115116" rel="lightbox['gallery']">
    <img alt="" src="/system/images/series_uploads/10/gallery/berkshire_25525_oak.jpg?1330115116" title="Berkshire" />
    <div class="gallery-text">
      <h3>Berkshire</h3>
      <p>HDP &ndash; High Definition Porcelain</p>
    </div>
  </a>

  <a href="/system/images/series_uploads/11/original/berkshire_25585_walnut_famousdaves01.jpg?1330115118" rel="lightbox['gallery']">
    <img alt="" src="/system/images/series_uploads/11/gallery/berkshire_25585_walnut_famousdaves01.jpg?1330115118" title="Berkshire" />
    <div class="gallery-text">
      <h3>Berkshire</h3>
      <p>HDP &ndash; High Definition Porcelain</p>
    </div>
  </a>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T17:28:06.010

他们不是兄弟姐妹，这就是您应该使用的原因

```
#gallery a:nth-of-type(4n) img{
   border: 5px solid #000;
} 
```

# java - 自动从pdf中提取许多文件的文本

> ID：16152965
> 
> 赞同：0
> 
> 时间：2013-04-22T17:20:52.313
> 
> 标签：java, python, pdf, text

我有大约 10,000 个 pdf 文件（conf 论文），我需要从这些论文的某些部分（如实验部分）中提取文本并保存在一个文件中。有谁知道可以帮助我做到这一点的java工具或python工具？

提前致谢

阿尤什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:25:41.310

您在发布之前研究过您的问题吗？我刚刚搜索了一下，发现了这个 Apache 项目： http: [//pdfbox.apache.org/](http://pdfbox.apache.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:27:47.207

对于 java：看看 iText

对于 python，我会使用 PDFMiner

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T02:28:42.937

既然这些是学术论文，你也应该看看[lapdftext](https://github.com/BMKEG/lapdftext)

> LA-PDFText 是一个从基于 PDF 的研究文章中提取准确文本的系统（以及一个能够在需要时提高性能的界面）。该系统是开源的，并提供了一个简单的基线功能，用于使用开发人员可以自定义的规则从主要研究文章中提取文本。

# html - nowrap 包装器内的 div 换行符

> ID：16152966
> 
> 赞同：0
> 
> 时间：2013-04-22T17:20:54.373
> 
> 标签：html, css

我有 2 个浮动 div，我希望它们位于同一行，它们的宽度超过 1024px，因此它们需要水平窗口滚动，但尽管将它们包装在 div 中，`white-space:nowrap;`但 div 会中断并出现在两行上。我在这段代码中有什么问题吗？谢谢。

```
.wrapper{
          white-space:nowrap;
        }
.content{
         float:left; width:600px; height:20px;
        }

 <div class = "wrapper">
     <div class = "content" style = "background-color:red;"></div>
     <div class = "content" style = "background-color:blue;"></div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:26:08.097

指定固定宽度以`.wrapper`解决您的问题

```
.wrapper {
   white-space: nowrap;
   width: 1300px;
} 
```

## 更新

或者，您可以`display: table-cell`为您`.content`设置并`min-width`为他们 设置

```
.content {
  display: table-cell;
   height: 45px;
   min-width: 600px;
   overflow: auto;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:32:10.043

您可以使用其他包装器解决：

```
 <html>
      <head>
         <style>
            .wrapper{
                position: relative;
                overflow:hidden;
                height: 20px;
            }
            .nowrap{
                white-space:nowrap; 
                width: auto;
                position: absolute;
                height: 20px;
            }
            .content{
                float:left; width:600px; height:20px;    
            }
         </style>
     </head>
     <body>
         <div class = "wrapper">
             <div class="nowrap">
                 <div class = "content" style = "background-color:red;"></div>
                 <div class = "content" style = "background-color:blue;"></div>
             </div>
         </div>  
     </body>
 </html> 
```

在这种情况下，您必须照顾好`height`财产！仅当您知道元素的高度时才使用此解决方案，例如，如果您创建图像滑块或类似的东西。

笔记：

小心`absolute`位置。我使用了它，因为`absolute` `position`元素的尺寸不会在父元素内关闭。你的两个 div 分成两行的原因是容器元素`.content`没有`absolute`位置。绝对定位的元素始终应该在相对元素内（这就是我使用其他包装器的原因）所以您只能一起重复代码（不要将其他`.nowrap`div 放在`.wrapper` `div`.

# ios - iOS - 使用谓词过滤集的性能

> ID：16152967
> 
> 赞同：1
> 
> 时间：2013-04-22T17:20:56.380
> 
> 标签：ios, performance, nspredicate, nsset

我在一些较旧的设备（例如 ipod touch 4th gen）上遇到 UI 卡顿/暂停，我已将其缩小到这段代码：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"gender != %@ && catId != %@", [NSNumber numberWithInt:0], [NSNumber numberWithInt:7]];
NSSet *filteredCats = [cats filteredSetUsingPredicate:predicate]; //cats is an NSSet 
```

如果我注释掉这两行代码并改为这样做：

```
NSSet *filteredCats = cats; 
```

表演非常流畅。那么如何在不导致屏幕更新短暂停顿的情况下改进这种过滤呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:42:42.227

您可以异步进行过滤，这应该有助于提高性能：

```
 __weak ViewController *bSelf = self;
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0ul),^{

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"gender != %@ && catId != %@", [NSNumber numberWithInt:0], [NSNumber numberWithInt:7]];

    NSSet *filteredCats = [cats filteredSetUsingPredicate:predicate]; 

    dispatch_async(dispatch_get_main_queue(), ^{ 
        [bSelf updateMyViewWithFilteredSet:filteredCats]; 
    }
} 
```

# java - 使用 jquery ajax 将对象的 js 数组发送到 servlet

> ID：16152968
> 
> 赞同：0
> 
> 时间：2013-04-22T17:21:04.253
> 
> 标签：java, jquery, ajax, json, servlets

这是数组的样子：

```
A[0] = { time, data[lon, lat], type }
...
A[n] 
```

我想使用 jquery ajax 将 A 发送到 servlet，并且能够在 servlet 上拥有相同的对象，这样我就可以访问 A[0].data[0].lat 之类的值

我想知道最好的方法是什么，我不是程序员，我已经搜索和尝试了几天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:27:22.460

[我建议使用 JSON：在服务器端，使用http://www.json.org](http://www.json.org)上列出的 JSON 库之一。

在客户端（jQuery）上，你会想要这样的东西：

```
var myData = JSON.stringify(A);
$.post('myurl.html', myData, function(data) {
    //success function
}); 
```

如果适合您，您也可以使用 $.get

# android - r.java 不生成 ListView 并且它引用另一个项目中的另一个 ListView

> ID：16152971
> 
> 赞同：0
> 
> 时间：2013-04-22T17:21:16.000
> 
> 标签：android, listview, android-xml, r.java-file

在我清理和构建应用程序时未声明列表视图，`r.java`但它不起作用。我什至删除了`r.java`它，它在没有 ListView 的情况下重新生成。

## 问题

当我`android:id="@android:id/listv"`将 XML 文件更改为`android:id="@+id/listv"`. 它声明了`r.java`但不幸的是出现了许多错误。我认为 Eclipse 正在查看`ListView`另一个项目中的另一个，它的 id 列表无论如何这里是 logcat

**编辑：** 更改 XML 中的声明后

这是日志猫

```
04-22 17:36:48.253: E/ActivityThread(674): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d0cdc8 that was originally bound here
04-22 17:36:48.253: E/ActivityThread(674): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d0cdc8 that was originally bound here
04-22 17:36:48.253: E/ActivityThread(674):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-22 17:36:48.253: E/ActivityThread(674):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-22 17:36:48.253: E/ActivityThread(674):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-22 17:36:48.253: E/ActivityThread(674):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-22 17:36:48.253: E/ActivityThread(674):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-22 17:36:48.253: E/ActivityThread(674):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-22 17:36:48.253: E/ActivityThread(674):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-22 17:36:48.253: E/ActivityThread(674):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
04-22 17:36:48.253: E/ActivityThread(674):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
04-22 17:36:48.253: E/ActivityThread(674):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-22 17:36:48.253: E/ActivityThread(674):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-22 17:36:48.253: E/ActivityThread(674):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-22 17:36:48.253: E/ActivityThread(674):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-22 17:36:48.253: E/ActivityThread(674):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-22 17:36:48.253: E/ActivityThread(674):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-22 17:36:48.253: E/ActivityThread(674):  at java.lang.Thread.run(Thread.java:856)
04-22 17:36:48.304: E/StrictMode(674): null
04-22 17:36:48.304: E/StrictMode(674): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d0cdc8 that was originally bound here
04-22 17:36:48.304: E/StrictMode(674):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-22 17:36:48.304: E/StrictMode(674):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-22 17:36:48.304: E/StrictMode(674):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-22 17:36:48.304: E/StrictMode(674):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-22 17:36:48.304: E/StrictMode(674):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-22 17:36:48.304: E/StrictMode(674):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-22 17:36:48.304: E/StrictMode(674):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-22 17:36:48.304: E/StrictMode(674):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
04-22 17:36:48.304: E/StrictMode(674):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
04-22 17:36:48.304: E/StrictMode(674):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-22 17:36:48.304: E/StrictMode(674):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-22 17:36:48.304: E/StrictMode(674):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-22 17:36:48.304: E/StrictMode(674):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-22 17:36:48.304: E/StrictMode(674):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-22 17:36:48.304: E/StrictMode(674):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-22 17:36:48.304: E/StrictMode(674):  at java.lang.Thread.run(Thread.java:856)
04-22 17:36:48.304: W/ActivityManager(288): Unbind failed: could not find connection for android.os.BinderProxy@40f77040
04-22 17:36:48.323: E/ActivityThread(674): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d0d680 that was originally bound here
04-22 17:36:48.323: E/ActivityThread(674): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d0d680 that was originally bound here
04-22 17:36:48.323: E/ActivityThread(674):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-22 17:36:48.323: E/ActivityThread(674):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-22 17:36:48.323: E/ActivityThread(674):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-22 17:36:48.323: E/ActivityThread(674):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-22 17:36:48.323: E/ActivityThread(674):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-22 17:36:48.323: E/ActivityThread(674):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-22 17:36:48.323: E/ActivityThread(674):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-22 17:36:48.323: E/ActivityThread(674):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
04-22 17:36:48.323: E/ActivityThread(674):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
04-22 17:36:48.323: E/ActivityThread(674):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
04-22 17:36:48.323: E/ActivityThread(674):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-22 17:36:48.323: E/ActivityThread(674):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-22 17:36:48.323: E/ActivityThread(674):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-22 17:36:48.323: E/ActivityThread(674):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-22 17:36:48.323: E/ActivityThread(674):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-22 17:36:48.323: E/ActivityThread(674):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-22 17:36:48.323: E/ActivityThread(674):  at java.lang.Thread.run(Thread.java:856)
04-22 17:36:48.354: E/StrictMode(674): null
04-22 17:36:48.354: E/StrictMode(674): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d0d680 that was originally bound here
04-22 17:36:48.354: E/StrictMode(674):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-22 17:36:48.354: E/StrictMode(674):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-22 17:36:48.354: E/StrictMode(674):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-22 17:36:48.354: E/StrictMode(674):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-22 17:36:48.354: E/StrictMode(674):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-22 17:36:48.354: E/StrictMode(674):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-22 17:36:48.354: E/StrictMode(674):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-22 17:36:48.354: E/StrictMode(674):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
04-22 17:36:48.354: E/StrictMode(674):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
04-22 17:36:48.354: E/StrictMode(674):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
04-22 17:36:48.354: E/StrictMode(674):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-22 17:36:48.354: E/StrictMode(674):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-22 17:36:48.354: E/StrictMode(674):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-22 17:36:48.354: E/StrictMode(674):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-22 17:36:48.354: E/StrictMode(674):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-22 17:36:48.354: E/StrictMode(674):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-22 17:36:48.354: E/StrictMode(674):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:23:41.943

异常清楚地说 `Your content must have a ListView whose id attribute is 'android.R.id.list'`

当您使用 ListActivity 时，会发生这种情况，您的 listView 应该有 id`@android:id/list`所以

在 xml 中`android:id="@android:id/list"`为您设置 id`ListView`

# php - PHP：简单的DOM解析器如何迭代这个html

> ID：16152974
> 
> 赞同：1
> 
> 时间：2013-04-22T17:21:31.397
> 
> 标签：php, simple-html-dom

我尝试使用简单的 html dom 解析器迭代以下 html，但没有到达下一个节点。

```
<div class="category-products">
<ul class="products-grid">
    <li><a href="http://someurl.com">Text</a></li>
    <li><a href="http://someurl.com">Text</a></li>
    <li><a href="http://someurl.com">Text</a></li>
</ul>
<ul class="products-grid">
    <li><a href="http://someurl.com">Text</a></li>
    <li><a href="http://someurl.com">Text</a></li>
    <li><a href="http://someurl.com">Text</a></li>
</ul>
<ul class="products-grid">
    <li><a href="http://someurl.com">Text</a></li>
    <li><a href="http://someurl.com">Text</a></li>
    <li><a href="http://someurl.com">Text</a></li>
</ul>
</div> 
```

我想遍历每个 li 和 ul.products-grid 的一个，但我还没有进入下一个 ul 标签，我已经使用了这个代码。

```
require_once('simple_html_dom.php');
set_time_limit(0);
ini_set('memory_limit', '1024M');
$url='http://www.somesite.com';
$html = file_get_html($url);

if(is_object($html)){
    foreach ( $html->find('div.category-products') as $elem){
        $data = $elem->innertext;
        $strdata = str_get_html($data);
        foreach ($strdata->find('ul[class="products-grid"]') as $ul) {
                //not getting how to iterate over next ul tags
        }
        die;
    }
} 
```

任何有任何想法的人都请帮助解决。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T23:27:01.567

你把它复杂化了：

```
foreach ( $html->find('div.category-products li a') as $a){
  // do something with $a
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:56:44.460

你可以试试这个

```
$url='http://www.somesite.com';
$html = file_get_html($url);
if(is_object($html)){
    foreach ( $html->find('div.category-products .products-grid') as $ul){
        // To iterate al li tags use following
        foreach ( $ul->find('li') as $li )  echo $li. '<br />';
        // To iterate al a tags use following
        foreach ( $ul->find('li a') as $a ) echo $a. '<br />';
    }
} 
```

# asp.net - 为我的应用程序创建 ASP.NET 角色和成员资格表

> ID：16152975
> 
> 赞同：0
> 
> 时间：2013-04-22T17:21:34.927
> 
> 标签：asp.net, sql-server-2008

我需要将 ASP.NET 的角色和成员表创建到我创建的新数据库（SQL Server 2012）中。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:26:33.360

使用框架文件夹中的 ASPNET_REGSQL.exe 工具为您执行此操作：

[ASP.NET SQL Server 注册工具 (Aspnet_regsql.exe)](http://msdn.microsoft.com/en-us/library/ms229862%28v=vs.100%29.aspx)

只需在没有任何开关的情况下运行 exe，它就会为您打开一个 GUI。

然后使用[ASP.NET 配置工具](https://stackoverflow.com/questions/12382529/where-is-web-site-administration-tool-in-visual-studio-2012)获取配置详细信息（VS 中解决方案资源管理器面板顶部的图标）。

[网站管理工具概述](http://msdn.microsoft.com/en-us/library/yy40ytx0%28v=vs.100%29.aspx)

# javascript - 带有 document.ready() 侦听器的动态脚本未通过 ajax 调用执行

> ID：16152977
> 
> 赞同：1
> 
> 时间：2013-04-22T17:21:41.573
> 
> 标签：javascript, jquery

我在我的页面中使用了 1.8.1 版本的 jQuery 插件。我创建了一个根据以下代码创建动态脚本的函数，并将其放在 HTML 页面的 BODY 中。

```
<script> $(document).ready(function(){ // .... Some javascript }); </script> 
```

上面的动态脚本使用 AJAX 获取一些额外的 HTML 和 JQuery 并将其附加到 Body 标记，但在 Ajax 完成后它不会执行。如果我像下面添加一个简单的警报（“某事”），那么它会执行。

```
<script> alert('something'); $(document).ready(function(){ // .... Some javascript }); </script> 
```

请告诉我我想在没有 alert() 框的情况下使用 document.ready() 执行动态脚本是什么问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:23:55.873

这是因为文档就绪事件已经发生。因为您的页面已经完全加载。你必须以另一种方式解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:27:18.533

为了知道 AJAX 何时完成并且文档准备就绪，您可以使用如下内容：

```
var docReady = new $.Deferred();
var ajaxDone = $.ajax({
    url: "whatever",
    type: "GET",
    blah blah blah
});

$(document).ready(function () {
    docReady.resolve();
});

$.when(ajaxDone, docReady).done(function () {
    // Document is ready and AJAX request is successful
}); 
```

如果 AJAX 请求失败（无论出于何种原因），则`$.when().done`回调不会执行。它要求两个延迟对象都成功完成。如果您不关心 AJAX 是否成功，`.done`请将`.then`.

# android - 精灵图像大小 android

> ID：16152980
> 
> 赞同：0
> 
> 时间：2013-04-22T17:21:49.820
> 
> 标签：android, opengl-es, sprite

基于此线程：[Android 活动图像背景大小](https://stackoverflow.com/questions/3694830/android-activity-image-background-size)

和这个线程：[android中的按钮图像大小](https://stackoverflow.com/questions/9697440/button-image-size-in-android)

现在我知道为了节省堆内存我需要使用什么图像大小，但是我的精灵呢？

我正在使用 OpenGLES，我知道我可以通过代码调整它们的大小，但是现在我使用的是 500x500 图像并且它占用了大量的堆内存。

Ldpi、Mdpi 和 Hdpi 的尺寸应该是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:09:26.887

通过代码调整图像大小可能会导致模糊，有时甚至会导致性能问题。如果您正在做 2D 游戏，那么如果您可以拥有清晰、清晰的非尺寸图像，那就太好了。如果您想获得深度效果，或显示同一精灵的大小版本，那么您必须进行尺寸调整，但如果您这样做，请尝试以能够为您提供简单数学比率的尺寸进行调整，从而清晰地调整尺寸（例如，将其设为 1/2 大小或 3/4 大小，而不是 0.6 大小）。

找到您希望精灵的大小，然后使用其他答案给您的相同比例。如果 xhdpi 的 160 像素高有效，则使用以下比率：

*   xhdpi：160x160
*   高清：120x120
*   分辨率：80x80
*   低密度脂蛋白：60x60

同样，如果 160x160 是您想要的 hdpi 大小，则使用这种比例：

*   xhdpi：240x240
*   高清：160x160
*   分辨率：120x120
*   低密度像素：90x90

不要随意调整它们的大小，并将适当的文件存储在正确的可绘制文件夹中。你会得到一个更好的外观。

# vim - vim中如何换行？

> ID：16152983
> 
> 赞同：10
> 
> 时间：2013-04-22T17:22:11.760
> 
> 标签：vim

使用`vim`我可以通过 tying 更改我的光标所在的单词`cw`。我可以用 更改当前字符`cl`。我可以用 . 更改括号内的所有内容`ci{`。

我什至可以用`cj`. 但是如何只更改光标所在的行？

我正在寻找比以下命令之一更短或更有效的东西： `ddko`, `0C`,`0Da`等

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-22T17:23:29.277

要删除当前行并启动插入模式，请使用`cc`. 要更改光标后的所有内容，请使用`c$`或`C`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T17:54:37.367

最简单的方法是`S`, 或`SHIFT-s`，因为它会更改整行而不管光标位置如何。

`cc`工作方式类似，但可以说更难键入，连续两次非主行键按下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T17:24:27.910

似乎`^C`（或`cc`）（不计算空格的行首）或`0C`（行首）效果最好。Shift-c（大写 c）表示从光标到行尾更改所有内容。

# objective-c - 由于未捕获的异常“NSObjectInaccessibleException”而终止应用程序，CoreData 无法满足以下错误

> ID：16152986
> 
> 赞同：4
> 
> 时间：2013-04-22T17:22:24.943
> 
> 标签：objective-c, restkit

在我发布最新版本之前，我的应用程序运行良好。现在，当我运行我的应用程序时，我收到了上面提到的错误。发生在 RKManagedObjectRequestOperations saveContextToPersistentStore 方法中。

下面是我创建对象的代码，但如果我注释掉一行，则在底部附近永远不会发生错误。代码没变，我刚从 Github 更新了 RestKit？有什么建议么？

```
 NSManagedObjectContext *context = [[[RKObjectManager sharedManager] managedObjectStore] mainQueueManagedObjectContext];

    User *joeBlow  = [NSEntityDescription insertNewObjectForEntityForName:@"User" inManagedObjectContext:context ];

        joeBlow.username = @"jjjj";

        joeBlow.email = @"jason3@atsdfatsd.com";

        joeBlow.gender = @"male";

        joeBlow.password = @"12345";

        NSError *error = nil;

        [context save:&error];  <------- If I comment this code out the error goes away.

    [self.restEngine signUpNewUser:joeBlow]; 
```

**更新**

如果将保存更改为以下内容，则可以。

```
[[objectManager.managedObjectStore persistentStoreManagedObjectContext] save:&error ]; 
```

有谁知道在 Restkit 中是否不再允许使用以下内容？

```
[[[RKObjectManager sharedManager] managedObjectStore] mainQueueManagedObjectContext]; 
```

# python - 解释器说 Card 没有定义（它是一个类）有人知道为什么吗？

> ID：16152988
> 
> 赞同：0
> 
> 时间：2013-04-22T17:22:31.190
> 
> 标签：python, python-3.x

问题就在第二行（`cards =`），据我所知，但我不知道如何解决

```
import random
cards = [Card('Spade', 10, 'Ace'), Card('Diamond', 5, '5')] 

def play_game():

    print("Welcome to Black Jack! The Game of 21!")
    print()
    x = input("Do you want to play?: ")
    if x == 'y':
        print()
        print("WOOOOO :)")
        print()
        draw_card()
    if x == 'n':
        print("FINE! YOU ARE MEAN!!! :(")

def draw_card():

     a1 = random.randint(0, len(cards) -1)
     print("Player's card: ", a1)
     print()

     x = input("Hit again?: ")
     print()

     if x == 'y':
        a2 = random.randint(0, len(cards) -1)
        print("Player's next card: ", a2)
        print()
        print("Player Total so far: ", a1 + a2)

        print()
        x = input("Hit again?: ")

     if x == 'y':
        a3 = random.randint(0, len(cards) -1)
        sum_ = a1 + a2 + a3
        print()
        print("Player new Total: ", a1 + a2 + a3)
        print()

     b1 = random.randint(0, len(cards) -1)
     print("Dealer's card: ", b1)

     print()
     y = input("Dealer Hit Again?: ")
     print()

     if y == 'y':
        b2 = random.randint(0, len(cards) -1)
        print("Dealer's next card: ", b2)
        print() 
        print("Dealer Total so far: ", b1 + b2)
        print()

     y = input("Dealer Hit Again: ")
     print()

     if y == 'y':
        b3 = random.randint(0, len(cards) -1)
        sum2_ = b1 + b2 + b3
        print("Dealer new Total: ", b1 + b2 + b3)
        print()

     player = sum_

     dealer = sum2_

     if player == dealer:
         print("ITS A TIE")
     if player <= 21:
        print("Player wins IN YOUR FACE COMPUTER")
     if player > 21:
        print("PLAYER YOU LOSE")
     if dealer == 21:
        print("Computer wins IN YOUR FACE PLAYER")
     if dealer >= 22:
        print("Computer FAIL")

class Card(object):
    suit = ''
    name = ''
    value = ''

    def __init__(self, suit, value, name):
        self.suit = suit
        self.value = value
        self.name = name

    def __str__(self):
        return '%s %ss %i' % (self.name, self.suit, self.value)

    def main():
        c = Card('Spade', 8, '8')
        d = Card('Diamond', 10, 'King')

if __name__ == '__main__':
    play_game() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:24:19.053

`Card`直到文件稍后才定义。将`cards`定义移至该行*下方*`class Card`。

将其放在该`if __name__`行之前：

```
cards = [Card('Spade', 10, 'Ace'), Card('Diamond', 5, '5')] 

if __name__ == '__main__':
    play_game() 
```

# java - 如何使用 Selenium 定位不稳定的表格元素？

> ID：16152990
> 
> 赞同：0
> 
> 时间：2013-04-22T17:22:37.543
> 
> 标签：java, selenium, html-table

这是HTML：

```
<table class="wikitable openei-infobox">

    <tbody><tr>
    <th> <a href="/wiki/Property:Name" title="Property:Name">Name</a>
    </th>
    <td> Ambit Energy, L.P.
    <pre style="display: none;"></pre>
    </td></tr>
    <tr>
    <th> <a href="/wiki/Property:Place" title="Property:Place">Place</a>
    </th>
    <td> <a href="/wiki/Maryland" title="Maryland">Maryland</a>
    <pre style="display: none;"></pre>
    ...... 
```

我需要使用 Selenium 定位元素**Maryland**，但我不能使用以下 xpath `("//a[@href='...']")`，我也不能使用`By.linkText`，因为它不稳定。我尝试了以下方法：

```
String el = driver.findElement(By.xpath(("//table[@class='wikitable openei-infobox']/td[1]"))).get(1).getText();
        System.out.println(el); 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:33:58.747

请尝试以下操作： String el = driver.findElement(By.xpath(("//tr[2]/td[1]"))).getText(); System.out.println(el);

# youtube-api - 从 YouTube 频道的上传供稿中的条目中获取喜欢/不喜欢计数

> ID：16152992
> 
> 赞同：1
> 
> 时间：2013-04-22T17:22:45.620
> 
> 标签：youtube-api

我正在尝试检索频道供稿中的喜欢和不喜欢的数量。但只得到了每个视频的评分。有没有办法从好恶中获取这些信息？

我的代码：

```
// set feed URL
$feedURL = "http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads";

// read feed into SimpleXML object
$sxml = simplexml_load_file($feedURL);

// get <gd:rating> node for video ratings
$gd = $entry->children('http://schemas.google.com/g/2005');

foreach ($sxml->entry as $entry) {

      if ($gd->rating) {
        $attrs = $gd->rating->attributes();        
        $rating = $attrs['average'];                
      }

      /*
       * does not work
       *
        $yt = $entry->children('http://gdata.youtube.com/schemas/2007');
        $attrs = $yt->rating->attributes();
        $dislikes = $attrs['numDislikes'];
        $likes = $attrs['numLikes'];
      */

} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:48:42.943

您需要包含`v=2`参数以指定您想要支持喜欢/不喜欢的数据 API 的 v2。

此外，如果您添加，您可能会发现事情更容易，`alt=jsonc`因为您可以使用 JSON 而不是 XML。例如[http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads?v=2&alt=jsonc](http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads?v=2&alt=jsonc)